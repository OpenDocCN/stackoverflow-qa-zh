# StackOverflow 问答 10315000-10315999

# .net - 在 F#.net 中为特定代码块打开命名空间

> ID：10315000
> 
> 赞同：3
> 
> 时间：2012-04-25T11:51:10.083
> 
> 标签：.net, f#, namespaces

我知道这在 C# 中是不可能的；最近的事情是在代码文件的顶部形成一个别名。有没有办法在 F# 中做到这一点？

有关我的问题的 C# 类似物，请参阅[此问题：](https://stackoverflow.com/questions/3144124/c-use-a-namespace-for-a-specific-block-of-code)

我的猜测是“不，使用别名。” 但没有冒险，没有收获。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:13:31.463

打开命名空间的最小范围是在模块中。

一种解决方法是将函数及其打开的命名空间放入自动打开的子模块中，以便`open`命令不会污染父模块并且子模块对用户是透明的：

```
[<AutoOpen>]
module Utils =
    open System.IO    
    // Now you do not have to include the full paths.
    let writeToFile filename (text: string) =  
      let stream = new FileStream(filename, FileMode.Create)
      let writer = new StreamWriter(stream)
      writer.WriteLine(text) 
```

# c# - 在 WCF 请求中存储数据的位置

> ID：10315005
> 
> 赞同：3
> 
> 时间：2012-04-25T11:51:15.660
> 
> 标签：c#, wcf, web-services, session

我正在为我的 WCF 安全性使用自定义用户名和密码验证。现在我想在请求期间存储用户名，以便稍后在调用的方法中访问它。我怎么做？

一些示例代码来描述我的问题：

```
public class CustomUserValidator : UserNamePasswordValidator
{
    public override void Validate(string username, string password)
    {
        if (username == "aaa" && password == "bbb")
        {
            // store username where i can get it in method called later.
            return;
        }
        throw new SecurityTokenException("Unknown Username or Password");
    }
} 
```

现在被调用的方法：

```
public void WebServiceMethod()
{
    Database.User.Single(c => c.Username == /* username from above */);
} 
```

安德烈亚斯
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:02:10.280

您通常会通过发出自定义“主体”来执行此操作，该“主体”通过`IAuthorizationPolicy`;完成。IIRC，用户名通过评估上下文参数提供给 auth-policy。[此处](http://leastprivilege.com/2009/04/02/custom-principals-in-wcf-with-geneva/)是 WCF 中自定义主体的*一般*演练，但是您可能需要进行一些试验才能在评估上下文中找到传入的用户名。特别是，如果任何键是“声明”字典，请查看它。并查看评估上下文 - 您*应该*在他们发布的带有用户名的“声明”中找到。`Evaluate``.Claims`*`CustomUserValidator`*

 *但是，我已经**完全按照**您在之前的工作中所描述的做了 - 并且 IIRC 它工作得很好，使用上面的页面作为我的起点。

一旦您发布了委托人，它将像往常一样通过以下方式提供：

```
string cn = Thread.CurrentPrincipal.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:38:11.957

要通过单个 WCF 请求存储任何类型的数据，Darin Dimitrov 建议在此处将一个简单的`IExtension<>`帮助程序类连接到当前`OperationContext`：[在哪里存储当前 WCF 调用的数据？](https://stackoverflow.com/questions/1895732/where-to-store-data-for-current-wcf-call-is-threadstatic-safe#answer-1895958)*

# c# - 页面回发后查询字符串值丢失

> ID：10315009
> 
> 赞同：-1
> 
> 时间：2012-04-25T11:51:26.730
> 
> 标签：c#, asp.net

单击时会显示患者详细信息页面`<a href="" />`（锚标记在中继器内）：

```
function showPatient(Pid) {                          
    RedirectToPage("Patient_Registration.aspx","pid="+Pid);
    return false;
} 
```

```
<asp:Repeater ID="repeaterPatientList" runat="server" OnItemDataBound="repeaterPatientList_ItemDataBound" >
    <ItemTemplate>
        <a href="#" onclick="return showPatient('<%#Eval("PID") %>')"><%#Eval("Patient_Name")%></a>
    </ItemTemplate>
</asp:Repeater> 
```

我`pID`在患者详细信息页面上获取查询字符串。进入`pID`第一页加载后，患者信息将填写到相应的文本字段中。但是，当我单击保存按钮时，`pID`它会丢失 - 将 0 作为值，以便始终触发插入查询。

```
int pID;
protected void Page_Load(object sender, EventArgs e)
{
    pID = Convert.ToInt32(Request["pid"]);

    if (pID != 0)
    {
        if (IsPostBack == false)
        {
            FillPatientInfo(pID);
        }
    } 
}
protected void btnSave_Click(object sender, EventArgs e)
{
    if(pID ==0)
    {
        //insert query code
    }
    else
    {
        //update query code
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:55:35.420

您必须在保存按钮中再次获取 pid。您正在从 postback == false 的查询字符串中设置 pid 的值。因此，当单击保存按钮时，它会回发，因此查询字符串中的 pid 值未分配给类变量 pid。

也使用 Request.QueryString["pid"] 而不是 Request["pid"]

```
protected void btnSave_Click(object sender, EventArgs e)
{
   pID = Convert.ToInt32(Request.QueryString["pid"].ToString());

  if(pID ==0)
  {
    //insert query code
  }
  else
  {
   //update query code
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:23:21.770

您没有使用 QueryString - JavaScript RedirectToPage() 方法中的代码读取 QueryString 并将其作为表单元素输出，然后提交到目标页面。

这第一次工作正常，但一旦页面回发，值就会丢失，所以这种行为是正确的。

您应该将值存储在某处（ViewState、Session 等）或将 HiddenField 添加到页面并在第一次加载时填充它，然后在回发时您可以从 HiddenField 中提取值。

**编辑**

要进入 hiddenfield 路由，像这样在您的 ASPX 页面中添加一个控件

```
<asp:HiddenField runat="server" ID="hidField" /> 
```

然后像这样改变你的PageLoad

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            pID = Convert.ToInt32(Request["pid"]);
            if(pID != 0)
            {
                FillPatientInfo(pID);
                hidField.Value = pID;
            }
        }
        else
        {
            pID = Convert.ToInt32(hidField.Value);
        }
    } 
```

# java - 使用 JSF 提交数据表值并通过 javax.servlet.http.HttpServletRequest 访问它

> ID：10315010
> 
> 赞同：0
> 
> 时间：2012-04-25T11:51:34.150
> 
> 标签：java, jsf, datatable, primefaces, submit

是否可以提交数据表的 JSF/PrimeFaces 值？通常，数据表将绑定到托管 bean 属性并以这种方式访问​​它。

`javax.servlet.http.HttpServletRequest`提交时，我需要通过对象访问数据表的每个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:32:47.700

将 datatable 的 value 属性绑定到 POJO 列表。表列对应 POJO 成员。

```
public class MyPOJO{
   String column1;
   String column2;
   String column3;
   String column4;
    //setters and getters here ....
}

@ManagedBean(name="beanDetails")
@ViewScoped
public class MyBean {
public List<MyPOJO> list_POJO;
    //setters and getters here ....
}

<p:dataTable id="myTable" value="#{beanDetails.list_POJO}" var="dataItem"> 
<p:column>
    <f:facet name="header">
       <h:outputLabel value="Column 1" />
    </f:facet>

   <p:cellEditor>
        <f:facet name="output">
            <h:outputLabel value="#{dataItem.column1}" />
        </f:facet>
        ...
        ...
   </p:cellEditor>
</p:column>
   .... 
   ....
</p:dataTable>  

<p:commandButton value="Submit" actionListener="#{beanDetails.submitDetails}"/> 
```

而在 submitDetails 中，您可以使用 list_POJO 遍历数据表记录。

# linker-errors - 进行 GTest 时出错

> ID：10315016
> 
> 赞同：36
> 
> 时间：2012-04-25T11:52:11.167
> 
> 标签：linker-errors, googletest

我试图在我的 Ubuntu 机器上设置 GTest 环境。但是在使 GTest 获取库时，我收到以下错误...

```
som@som-VPCEH25EN:~/Workspace/CPP/gtest-1.6.0/make$ make
g++ -I../include -g -Wall -Wextra -lpthread sample1.o sample1_unittest.o gtest_main.a -o sample1_unittest
gtest_main.a(gtest-all.o): In function `~ThreadLocal':
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1336: undefined reference to `pthread_getspecific'
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1340: undefined reference to `pthread_key_delete'
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1336: undefined reference to `pthread_getspecific'
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1340: undefined reference to `pthread_key_delete'
gtest_main.a(gtest-all.o): In function `testing::internal::ThreadLocal<std::vector<testing::internal::TraceInfo, std::allocator<testing::internal::TraceInfo> > >::GetOrCreateValue() const':
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1372: undefined reference to `pthread_getspecific'
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1379: undefined reference to `pthread_setspecific'
gtest_main.a(gtest-all.o): In function `testing::internal::ThreadLocal<testing::TestPartResultReporterInterface*>::CreateKey()':
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1365: undefined reference to `pthread_key_create'
gtest_main.a(gtest-all.o): In function `testing::internal::ThreadLocal<std::vector<testing::internal::TraceInfo, std::allocator<testing::internal::TraceInfo> > >::CreateKey()':
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1365: undefined reference to `pthread_key_create'
gtest_main.a(gtest-all.o): In function `testing::internal::ThreadLocal<testing::TestPartResultReporterInterface*>::GetOrCreateValue() const':
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1372: undefined reference to `pthread_getspecific'
/home/som/Workspace/CPP/gtest-1.6.0/make/../include/gtest/internal/gtest-port.h:1379: undefined reference to `pthread_setspecific'
collect2: ld returned 1 exit status
make: *** [sample1_unittest] Error 1 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-25T17:11:54.083

尝试在您的 g++ 命令中`-lpthread`移至 after 。`gtest_main.a`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-11T22:03:48.737

我遇到了同样的问题，我`-lpthread`将 Makefile 更改为`-pthread`. （我去掉了小“L”。）之后，一个“make”编译没有错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-17T10:14:52.907

您是否看过Erik Smistad关于如何在 Ubuntu 上开始使用[gtest 的优秀教程？](http://www.thebigblob.com/getting-started-with-google-test-on-ubuntu/)我刚刚在 (K)ubuntu 12.04 上尝试过，效果很好。简而言之，您需要做的是

```
sudo apt-get install cmake libgtest-dev
cd /usr/src/gtest
sudo cmake CMakeLists.txt
sudo make
sudo cp *.a /usr/lib 
```

如果您对以 root 身份运行 make 和 cmake 感到不舒服，则必须将 /usr/src/gtest 复制到用户可写的目录中。在本教程中，Erik 还提供了一个带有 CMakeLists.txt 的示例测试来构建它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T22:54:54.057

将“-L/usr/local/$(uname -m)-linux-gnu”放在 LDFLAGS 中，将“-pthread”放在链接器 (ld) 命令行中。（是的，那是-pthread，不是-lpthread）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T08:09:34.573

gtest-1.6.0/make 中的文件 你应该有 Makefile 看看下面它应该是什么样子。区别在最后一行

```
# A sample Makefile for building Google Test and using it in user
# tests.  Please tweak it to suit your environment and project.  You
# may want to move it to your project's root directory.
#
# SYNOPSIS:
#
#   make [all]  - makes everything.
#   make TARGET - makes the given target.
#   make clean  - removes all files generated by make.

# Please tweak the following variable definitions as needed by your
# project, except GTEST_HEADERS, which you can use in your own targets
# but shouldn't modify.

# Points to the root of Google Test, relative to where this file is.
# Remember to tweak this if you move this file.
GTEST_DIR = ..

# Where to find user code.
USER_DIR = ../samples

# Flags passed to the preprocessor.
CPPFLAGS += -I$(GTEST_DIR)/include

# Flags passed to the C++ compiler.
CXXFLAGS += -g -Wall -Wextra

# All tests produced by this Makefile.  Remember to add new tests you
# created to the list.
TESTS = sample1_unittest

# All Google Test headers.  Usually you shouldn't change this
# definition.
GTEST_HEADERS = $(GTEST_DIR)/include/gtest/*.h \
                $(GTEST_DIR)/include/gtest/internal/*.h

# House-keeping build targets.

all : $(TESTS)

clean :
    rm -f $(TESTS) gtest.a gtest_main.a *.o

# Builds gtest.a and gtest_main.a.

# Usually you shouldn't tweak such internal variables, indicated by a
# trailing _.
GTEST_SRCS_ = $(GTEST_DIR)/src/*.cc $(GTEST_DIR)/src/*.h $(GTEST_HEADERS)

# For simplicity and to avoid depending on Google Test's
# implementation details, the dependencies specified below are
# conservative and not optimized.  This is fine as Google Test
# compiles fast and for ordinary users its source rarely changes.
gtest-all.o : $(GTEST_SRCS_)
    $(CXX) $(CPPFLAGS) -I$(GTEST_DIR) $(CXXFLAGS) -c \
            $(GTEST_DIR)/src/gtest-all.cc

gtest_main.o : $(GTEST_SRCS_)
    $(CXX) $(CPPFLAGS) -I$(GTEST_DIR) $(CXXFLAGS) -c \
            $(GTEST_DIR)/src/gtest_main.cc

gtest.a : gtest-all.o
    $(AR) $(ARFLAGS) $@ $^

gtest_main.a : gtest-all.o gtest_main.o
    $(AR) $(ARFLAGS) $@ $^

# Builds a sample test.  A test should link with either gtest.a or
# gtest_main.a, depending on whether it defines its own main()
# function.

sample1.o : $(USER_DIR)/sample1.cc $(USER_DIR)/sample1.h $(GTEST_HEADERS)
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(USER_DIR)/sample1.cc

sample1_unittest.o : $(USER_DIR)/sample1_unittest.cc \
                     $(USER_DIR)/sample1.h $(GTEST_HEADERS)
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(USER_DIR)/sample1_unittest.cc

sample1_unittest : sample1.o sample1_unittest.o gtest_main.a
    $(CXX) $(CPPFLAGS) $(CXXFLAGS)  $^ -o $@ -lpthread #<----------------------- DIFF 
```

接下来请在此目录中运行 make :) 并感到高兴。

# sql - 将 Cobol 转换为 Sql 查询

> ID：10315019
> 
> 赞同：2
> 
> 时间：2012-04-25T11:52:19.890
> 
> 标签：sql, cobol

我从客户端收到了一个 cobol 查询，我必须将其转换为 sql。我是cobol的新手，我无法理解整个事情。非常感谢任何帮助。代码如下。

```
!JOB ARSRCHAA,RPT/*.IVL;OUTCLASS=LP,1
!COMMENT  {PRNT$PRINTER      ?$}
!COMMENT  {PRI $PRIORITY     ?$}
!COMMENT  {CD1 $DATE         ?$}
!COMMENT  {CD2 $AMOUNT1      ?$}
!COMMENT  {CD3 $EXCLUDE      ?$}
!FILE QSLIST=ARSRCHAA;DEV={PRNT},{PRI}
!AQ
ENTER=GENLED2,FP,FP
S=ARAP-TRN

VVF VND-NO NE {CD3} AND TPE-SHP NE VX

F CONN ARAP-TRN.VND-NO TO ARAP-TOT.VND-NO; &
ARAP-TRN.VND-NO NE 0867,0249,3163,3193,3077,3263,5402,{CD3} &
AND ARAP-TRN.TPE-SHP NE VX &
REQ ARAP-TOT.VND-NO=ARAP-TRN.VND-NO

LP

R;H1,DATE,74;H2,TIME,74;H1,PAGENO,79;H1,"ARSRCHAA",8
H1,"NON-CLAIM AR'S BEFORE {CD1} ",50
H2,"FOR AMOUNTS GREATER THAN ${CD2}",50
H3,"Excludes-0867,0249,3163,3193,3077,3263,5402,{CD3}",55
H4,"ACCT     NAME         REG#     DESCRIP",38
H4,"LAST-DT   TRN#       NET  *COLL",79
H5,"*=On hold",13;H5,"c=Claim",62;H5,"Cr Bal=+",76
E1,"ZZ-ZZ-ZZ";E2,"ZZZ,ZZZ.99-";E3,"ZZZZ,ZZZ.99-"
E4,"XXXXXXXXXXXXXXXX";E5,"ZZZZZZZZ";E6,"XXXXXXXXXXXXXXX"
S,!DBTRAN(VNDR:DATE-INFO.IVL-DATE=TRN-DT, &
VNDR:DATE-INFO.REAL-DATE)
S1,REG-NO;S2,VND-NO
S3,!DBTRAN(VNDR:VENDOR.VND-NO=VND-NO,VNDR:VENDOR.DBA-NM)
R1,L,!DBTRAN(VNDR:DATE-INFO.IVL-DATE=TRN-DT, &
VNDR:DATE-INFO.REAL-DATE)
R3,L,{CD1}
R4,A,AMT
R5,L,1,IF !DBTRAN(REMARK:REG-COLLECT.REG-NO=REG-NO,REMARK:&
REG-COLLECT.STAT-CD) EQ OP
R6,L,1,IF NET-AMT LT 0
R7,L,1,IF &
!DBTRAN(ACTRN:TRN-INFO.TRN-NO=TRN-NO,ACTRN:TRN-INFO.TPE-CD)=CI,CC
R9,L,0
R9,L,1,IF R1 LE R3 AND R4 GT {CD2}00
R9,L,0,IF &
!DBTRAN(VNDR:VENDOR.VND-NO=VND-NO,VNDR:VENDOR.POINT-LOC)=ME,MF
R9,L,0,IF R7=1
R9,L,0,IF !DBTRAN(REMARK:REG-COLLECT.REG-NO=REG-NO,REMARK:&
REG-COLLECT.STAT-CD) EQ OP
T1,VND-NO,4,PIF R9=1
T1,"*",5,PIF R9=1 AND ARAP-TOT.A-STAT=HH
T1,!DBTRAN(VNDR:VENDOR.VND-NO=VND-NO,VNDR:VENDOR.DBA-NM),20,&
E6,PIF R9=1
T1,REG-NO,28,E5,PIF R9=1
T1,DESCRP,45,E4,PIF R9=1
T1,TRN-DT,55,E1,PIF R9=1
T1,TRN-NO,64,PIF R9=1
T1,"c",56,PIF R9=1 AND R7=1
T1,R4,75,E2,PIF R9=1
T1,"*",75,PIF R9=1 AND R5=1
T1,"+",76,PIF R9=1 AND R6=1
T1,REG-NO,78,COUNT,PIF R9=1
T1,R1
T1,R4
T1,R5
T1,R6
T1,R7
TF,"******** END OF REPORT ********",55
END

EXIT
!EOJ 
```

我只需要将这个cobol查询转换为sql查询。这里`ARAP-TRN`是主表，`vendor-no`其他类似的东西是对应表的列字段，例如，这里的表是`vendor`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:03:14.263

我不熟悉这位报告作者，但这是我的最佳猜测。

有3张桌子；VNDR、备注和 ACTRN。

VNDR 有这些列；VND-NO、DBA-NM、IVL-DATE、REAL-DATE、POINT-LOC

REMARK 有这些列；REG-NO，STAT-CD

ACTRN 有这些列；TRN-NO, TPE-CD

ARAP-TRN 是一个包含 VND-NO 的事务文件，它是 VNDR 的关键。它还包含字段 REG-NO、DESCRP、TRN-DT 和 TRN-NO。REG-NO 是 REMARK 的关键。TRN-NO 是 ACTRN 的关键。

ARAP-TOT 是一个总文件。我假设它是在本报告之外创建的。

我猜，TPE-SHP 是 ARAP-TRN 或 ACTRN 的另一列。

如果有人知道这是什么报告作者，请写下您的答案作为对我答案的评论。我很想知道。

# opencv - 为 python3 安装 opencv

> ID：10315021
> 
> 赞同：19
> 
> 时间：2012-04-25T11:52:31.583
> 
> 标签：opencv, python-3.x, cmake

有没有人尝试为python3安装opencv？。如此处所述[http://opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)其支持状态未知。所以我想试试：

我已经下载了 OpenCV-2.3.1 的源代码。但是cmake报告。

> -- Python 解释器：/Library/Frameworks/Python.framework/Versions/3.2/bin/python3 -B (ver 3.2)
> 
> -- Python numpy：否（不会生成 Python 包装器）

我确实在 python3 中安装了 numpy（版本 1.6.0），但 cmake 没有找到它。我正在使用 Mac OSX 10.6 有什么想法吗？

**更新**

我刚刚看到 cmake 输出的另一件事可能会有所帮助

> -- 找到 PythonInterp：/Library/Frameworks/Python.framework/Versions/3.2/bin/python3（找到版本“3.2”）
> 
> -- 找到 PythonLibs：/usr/lib/libpython2.6.dylib 文件“”，第 1 行
> 
> ```
> from distutils.sysconfig import *; print get_python_lib()
> 
>                                                       ^ 
> ```
> 
> SyntaxError：无效的语法文件“”，第 1 行
> 
> ```
> import os; os.environ['DISTUTILS_USE_SDK']='1'; import numpy.distutils; print 
> ```
> 
> numpy.distutils.misc_util.get_numpy_include_dirs()[0]
> 
> ```
>  ^ 
> ```
> 
> SyntaxError：无效的语法文件“”，第 1 行
> 
> ```
> import sphinx; print sphinx.__version__
> 
>                           ^ SyntaxError: invalid syntax 
> ```

请注意，它找到了 3.2，然后找到了 libpython2.6 ??

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T18:58:15.353

目前 OpenCV 仅支持 Python 2.x。OpenCV（包括 OpenCV 2.4）不能与 Python 3.x 一起编译。

Python3 支持已经在 OpenCV 未来版本的愿望清单中。但目前没有这方面的活动，欢迎您创建并提供解决兼容性问题的补丁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-07T05:01:04.837

使用 pip 应用程序。

在 ubuntu 上：

`sudo apt install python3-pip`

所以，在命令行：

`pip3 install --upgrade pip`

`pip3 install opencv-python`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-19T03:28:00.167

我得到了至少构建和安装的东西。它可以很好地加载 cv2 模块。不过没有测试太多。

详情： [https ://stackoverflow.com/a/21212023/3075814](https://stackoverflow.com/a/21212023/3075814)

# c - ntddk.h 没有这样的文件或目录

> ID：10315022
> 
> 赞同：1
> 
> 时间：2012-04-25T11:52:42.753
> 
> 标签：c, compiler-construction, build, codeblocks, device-driver

我正在使用`CODE::BLOCKS in windows XP`. 试图写一个设备驱动程序。但是在创建一个项目之后，我得到了以下错误。我做了以下设置，但仍然收到错误为“ntddk.h 没有这样的文件或目录”。我已经尝试过所有编译器（项目构建选项），但它仍然存在。请帮忙。

创建项目，如： -`File->New->Project->Kernel Mode Driver->Next->Next...`

![在此处输入图像描述](../Images/ff78387ca6100fb80418b03cca4bf5cd.png)

![在此处输入图像描述](../Images/d654f1215a45e81bf6061a536ab60fc0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:41:56.387

如果像大多数在 Windows 上使用 Code::Blocks 的人一样，您使用 MingW-TDM（通常被 Code::Blocks 检测为“GNU GCC Compiler”，并与“easy install”包捆绑在一起），该文件`ntddk.h`位于`ddk`系统包含文件夹的子文件夹。

因此，您要么必须将`ddk`文件夹添加到包含搜索路径，要么写入`#include <ddk/ntddk.h>`，要么都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:08:42.837

1.  您的编译器列表似乎不包括 DDK 编译器
2.  你有安装windows DDK吗？

注意：我对代码块一无所知，但您需要 DDK 编译器来编译 Windows 驱动程序。

# apache - 如何关闭jboss签名？

> ID：10315026
> 
> 赞同：0
> 
> 时间：2012-04-25T11:52:59.280
> 
> 标签：apache, security, jboss, jboss5.x, appserver

有没有办法关闭 Jboss 签名。假设 url 拼写错误一条错误消息“请求的资源（请求的无效路径 /test）不可用”，在此服务器名称和版本下方显示（JBoss Web /2.1.1.0）.. 我已经阅读了隐藏服务器名称和版本是一个很好的安全实践......我使用的是 Jboss 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:05:15.430

如果它是任何 webapp，那么最好的方法是编写一个错误 jsp 或 html 并重定向到该页面，即使是 web-console、jmx-console 等。

例如，像这样在 web.xml

```
<error-page>
  <error-code>404</error-code>
  <location>/the404_page.html</location>
</error-page> 
```

# c - 在while循环中初始化错误

> ID：10315027
> 
> 赞同：0
> 
> 时间：2012-04-25T11:53:09.347
> 
> 标签：c

这是我写的一个小程序，（我还在写），但是到目前为止，根据我的理解，编译程序不应该给出任何错误。

```
#include <stdio.h>
#include <stdlib.h>
struct node t1 {
        int data;
        struct node *next, *prev;
};
struct node *root;
root = NULL;
int main()
{
        int i, j, choice, count;
        printf("enter choice\n");
        scanf("%d", &choice);
        count = 0;
        while (choice == 1) {
                printf("enter a data element");
                scanf("%d", &j);
                count++;
        }

}

void push()
{
}

void pop()
{
} 
```

我得到的错误是

```
 cc linklist.c
linklist.c:3:16: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
linklist.c:8:1: warning: data definition has no type or storage class [enabled by default]
linklist.c:8:1: error: conflicting types for ‘root’
linklist.c:7:14: note: previous declaration of ‘root’ was here
linklist.c:8:8: warning: initialization makes integer from pointer without a cast [enabled by default] 
```

我使用 gcc 和 Ubuntu 11.04。编译代码时出现警告的原因是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:55:04.367

> ```
> struct node *root;
> root = NULL; 
> ```

您不能在函数之外进行这样的分配。删除它，`root = NULL`因为它对于具有静态存储的对象（例如全局变量）是隐式的。

### 编辑

正如 Tom Dignan 所发现的，结构声明也是错误的：

```
struct node t1 { ... };
            ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:55:30.360

您不能`root = NULL;`在顶层（在任何函数之外）发表声明。做

```
struct node *root = NULL; 
```

（这`= NULL`部分实际上是可选的；全局或`static`指针自动为空。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T11:57:21.797

一方面，您在 main 或函数之外有一个赋值语句。

```
root = NULL; 
```

我没有尝试过其他任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T12:01:36.367

```
struct node t1 {
        int data;
        struct node *next, *prev;
}; 
```

您想为结构节点创建别名。它应该是：

```
typedef struct node  { /* typedef! */
        int data;
        struct node *next, *prev;
}t1; /* alternative name go here */ 
```

# ios - 用于本地化应用内购买的 ID

> ID：10315031
> 
> 赞同：0
> 
> 时间：2012-04-25T11:53:18.490
> 
> 标签：ios, localization

我想在我的应用中使用多种语言，并将使用应用内购买。在设置有关单元的数据时，我必须用不同的语言注册一个相同的单元吗？它会有不同的ID吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:01:01.297

您创建一个具有一个 ID 的产品，iTunesConnect 会提示您添加多种语言的描述。在您的应用程序中，当您加载产品信息时，iOS 会为您提供正确的本地化信息。

# facebook-graph-api - Facebook API 访问令牌 - 当我知道 uid 和密码时

> ID：10315032
> 
> 赞同：0
> 
> 时间：2012-04-25T11:53:24.657
> 
> 标签：facebook-graph-api, oauth, facebook-authentication, facebook-access-token

我的情况很简单：我知道（用户）UID 和密码，我想创建 API 请求，例如`https://graph.facebook.com/220439?access_token=...`.

我**不**想要的是将用户重定向到 Facebook 页面并提示他给我权限 - 因为我知道凭据。有没有办法直接获取access_token？或者至少只发出一次第一个 OAuth 请求，接收**永久**请求令牌，然后在进行 API 调用时只将其切换为常规访问令牌？

顺便说一句，我使用 PHP SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:54:42.840

不。Facebook 非常明确，您不能将凭据发送到他们的 API 以执行登录等。

# python - 姜戈。运行多个实例的日志轮换

> ID：10315033
> 
> 赞同：0
> 
> 时间：2012-04-25T11:53:25.770
> 
> 标签：python, django, logging

我们在 django 日志轮换方面遇到了麻烦。

日志处理程序设置：

```
'handlers': {
    'null': {
        'level':'DEBUG',
        'class':'django.utils.log.NullHandler',
    },
    'some':{
        'formatter': 'simple',
        'filename':'%s/log/some.log' % (PROJECT_ROOT, ),
        'level':'DEBUG',
        'class':'logging.handlers.RotatingFileHandler',
        'maxBytes': 1024*1024*5, # 5 MB
        'backupCount': 5,
    }
} 
```

日志中的结果：

```
drwxr-xr-x  2 webserver webserver      4096 Apr 25 11:43 .
drwxr-xr-x 29 webserver webserver      4096 Apr 24 20:58 ..
-rw-r--r--  1 webserver webserver        35 Apr 25 03:58 some.log
-rw-r--r--  1 webserver webserver        30 Apr 25 03:58 some.log.1
-rw-r--r--  1 webserver webserver        30 Apr 25 03:57 some.log.2
-rw-r--r--  1 webserver webserver        35 Apr 25 03:57 some.log.3
-rw-r--r--  1 webserver webserver        35 Apr 25 03:05 some.log.4
-rw-r--r--  1 webserver webserver       631 Apr 25 03:05 some.log.5 
```

只有一条记录进入日志，并且在它之后日志轮换。为什么处理程序旋转日志如此之快？在哪里挖？我们在服务器上运行了不止一个 django 实例。在我们拥有一个巨大的日志文件之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:15:04.263

为了确保只有一个进程写入这些文件，请将日志文件名设置为

```
'%s/log/some-%s.log' % (PROJECT_ROOT, os.getpid()) 
```

并发布您发现的内容。

# c# - MonoTouch 中的 ViewForZoomingInScrollView

> ID：10315036
> 
> 赞同：1
> 
> 时间：2012-04-25T11:53:48.827
> 
> 标签：c#, ios, uiscrollview, xamarin.ios, zooming

我正在尝试`ViewForZoomingInScrollView`使用 MonoTouch 实现。用户拍照并使用下面的代码添加图像

```
scrollView.AddSubview (imageView);
scrollView.MinimumZoomScale = 1.0f;
scrollView.MaximumZoomScale = 3.0f;
scrollView.MultipleTouchEnabled = true;
scrollView.ViewForZoomingInScrollView = delegate(UIScrollView scrollView2) 
{
        return imageView;           
}; 
```

如果我在窗口上滑动手指，我可以毫无问题地从一个图像转到另一个图像。
当我尝试捏合图像时，图像会向右移动并且我有空白。

问题：

当您捏图像时，您需要在代码中执行哪些步骤来重新调整大小并在图像视图的中心显示放大的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:43:17.483

有许多 Xamarin 的[示例](https://github.com/xamarin/monotouch-samples)展示了如何使用`ViewForZoomingInScrollView`. [您可以从github](https://github.com/xamarin/monotouch-samples)获取它们，也可以从[示例网站](http://samples.xamarin.com/iOS)浏览它们。

这包括[ZoomingPdfViewer](https://github.com/xamarin/monotouch-samples/tree/master/ZoomingPdfViewer)（Apple 的同名 Objective-C 示例的一个端口）。请参阅[源代码](https://github.com/xamarin/monotouch-samples/blob/master/ZoomingPdfViewer/PdfScrollView.cs#L82)。

# haskell - 为什么此代码会导致“不明确的变量出现”错误？

> ID：10315037
> 
> 赞同：0
> 
> 时间：2012-04-25T11:53:59.317
> 
> 标签：haskell, syntax

我写了一个函数叫做`product`：

```
product [] = 1
product (x:xs) = x * product xs 
```

当我将它加载到 WinHug 中时：

> 错误文件：.\product.hs:4 - 不明确的变量出现“产品”
> *** 可以参考：Main.product Hugs.Prelude.product

这是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T11:57:07.283

该`product`函数[在 Haskell Prelude 中定义。](http://hackage.haskell.org/packages/archive/base/4.3.1.0/doc/html/Prelude.html#v:product)

您的本地定义与库版本冲突。

考虑将您的版本重命名为 eg`myproduct`或`import Prelude hiding (product)`.

此外，您可能需要考虑[使用 GHC 而不是 Hugs。](http://haskell.org/platform)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T11:58:36.177

[Haskell Prelude](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html)中已经有一个名为的[`product`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:product)函数。

顺便说一句，你应该安装[Haskell Platform](http://hackage.haskell.org/platform/)而不是 Hugs；Hugs 是一个不再维护的老项目，而 GHC/i 的支持要好得多，功能也更多。即使您的学校希望您使用 Hugs，私下偷偷使用带有 GHCi 的 Haskell 平台也没有什么坏处。

# iphone - 每 n 分钟在标签中显示 NSString

> ID：10315038
> 
> 赞同：0
> 
> 时间：2012-04-25T11:54:01.200
> 
> 标签：iphone, ios, sleep

我有一个标签和一个由 10 个字符串值组成的数组。我知道如何在该标签中显示文本。但是现在，每 1 分钟我想显示从该数组到标签的每个字符串。任何想法这个怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:01:33.683

使用[NSTimer](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(changeText:) userInfo:nil repeats:YES]; 
```

如果要停止计时器，请记住使用`[timer invalidate]`，否则如果目标已释放，您将崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:00:45.393

1.  在你的类中添加一个变量来保存当前字符串的索引
2.  编写一个增加索引并用下一个字符串更新标签的方法
3.  创建一个[`NSTimer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)间隔 = 60 秒来重复调用此方法

**更新**

根据您的评论，我猜您要更新的是位置信息？一些参考资料：

*   [iOS 多任务处理：后台位置](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)
*   [我们可以用什么来代替 nstimer？](https://stackoverflow.com/questions/10169241/what-can-we-use-instead-of-nstimer)
*   [位置感知编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)
*   [iOS 应用程序编程指南 - 跟踪用户的位置](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW25)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:34:07.067

use NSTimer with 60 sec interval, write a method to get the text from the array and display it in the label.

# c++ - 在交叉编译时我必须如何处理 C++ 库？

> ID：10315039
> 
> 赞同：2
> 
> 时间：2012-04-25T11:54:05.157
> 
> 标签：c++, cmake, cross-compiling

这是我的配置的编译器部分：

```
IF(UNIX)
    ## Compiler flags

    # specify the cross compiler
    SET(CMAKE_C_COMPILER   /home/username/projects/buildroot/output/host/usr/bin/arm-linux-gcc)
    SET(CMAKE_CXX_COMPILER /home/username/projects/buildroot/output/host/usr/bin/arm-linux-g++)

    if(CMAKE_COMPILER_IS_GNUCXX)
        set(CMAKE_CXX_FLAGS "-O3")
        set(CMAKE_EXE_LINKER_FLAGS "-lsqlite3 -lrt -lpthread")
    endif()

    target_link_libraries(complex
      ${Boost_FILESYSTEM_LIBRARY}
      ${Boost_SYSTEM_LIBRARY})
ENDIF(UNIX) 
```

有3个问题：-lsqlite3 -lrt -lpthread

我必须如何为我的架构制作它们并在此处指定？在我以某种方式为我的架构重新编译编译库之后，如何设置（使用 set？）编译库的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:09:42.860

如果你想用 CMake 进行交叉编译，你真的应该使用工具链文件。有关介绍，请参阅[CMake Wiki](http://www.cmake.org/Wiki/CMake_Cross_Compiling)。为了使用第三方库（即不包含在交叉编译工具链中），您也需要交叉编译它们。

**编辑**：由于您使用的是 buildroot 工具链，因此您可以使用已经包含的 CMake 工具链文件。`-DCMAKE_TOOLCHAIN_FILE=/home/username/projects/buildroot/output/toolchainfile.cmake`调用 CMake 时通过。无需在您的文件中设置`CMAKE_C_COMPILER`和。此外，设置和被认为是非常糟糕的做法。`CMAKE_CXX_COMPILER``CMakeLists.txt``CMAKE_CXX_FLAGS``CMAKE_EXE_LINKER_FLAGS`

大概您在构建 buildroot 工具链的同时构建了 sqlite3，因此您可以像使用任何其他库一样使用它。IE：

```
find_path(SQLITE3_INCLUDE_DIR sqlite3.h)
find_library(SQLITE3_LIBRARY sqlite3)
if(NOT SQLITE3_INCLUDE_DIR)
  message(SEND_ERROR "Failed to find sqlite3.h")
endif()
if(NOT SQLITE3_LIBRARY)
  message(SEND_ERROR "Failed to find the sqlite3 library")
endif()

find_package(Threads REQUIRED)

# ...

target_link_libraries(complex
  ${Boost_FILESYSTEM_LIBRARY}
  ${Boost_SYSTEM_LIBRARY}
  ${SQLITE3_LIBRARY}
  ${CMAKE_THREAD_LIBS_INIT}
  rt) 
```

最后，不要设置`CMAKE_CXX_FLAGS`为`-O3`. 用户应该`-DCMAKE_BUILD_TYPE=Release`在配置项目时通过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:57:35.837

您还必须交叉编译依赖项。路径取决于您安装它们的位置。

顺便说一句，使用`-lpthread`不是获取 POSIX 线程的安全方法。您应该为`-pthread`编译器和链接器提供选项。

# actionscript-3 - 需要 Flash 应用程序 gui 架构建议

> ID：10315040
> 
> 赞同：0
> 
> 时间：2012-04-25T11:54:08.023
> 
> 标签：actionscript-3, flash

我需要关于如何在 Flash 应用程序中组织 GUI 的建议。见图片： [http ://dl.dropbox.com/u/32811/Screen%20Shot%202012-04-25%20at%2015.40.31%20.png](http://dl.dropbox.com/u/32811/Screen%20Shot%202012-04-25%20at%2015.40.31%20.png)

应用程序是视频播放器。我有当鼠标离开播放器时必须隐藏的按钮组。我添加了一个 Sprite，我所有的按钮都添加为这个 sprite 的子项。在这种情况下，我隐藏父级，而不是单独隐藏每个按钮。

有几个问题：

*   当父 Sprite 发生调整大小时，他的所有孩子都与他一起调整大小。
*   我想相对于他们的容器定位孩子，但这非常困难，因为我无法设置父精灵的宽度和高度。

我想设置父 Sprite 的宽度和高度，在里面定位按钮，并且其中的任何调整大小都会自动发生。

问题是：我使用了错误的工具，还是以某种方式错误地使用了它们？是否有任何 GUI 框架可以帮助构建布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:11:02.977

write this line at Creation Complete Event or any where at beginning of code

```
 fscommand("allowscale","true"); 
```

it will maintain aspect ratio of application so all children of application will resize and scale properly

try this it will work

# c++ - std::string 上下文中首字母缩写词 SSO 的含义

> ID：10315041
> 
> 赞同：178
> 
> 时间：2012-04-25T11:54:09.093
> 
> 标签：c++, string, optimization

在[关于优化和代码风格的 C++ 问题中](https://stackoverflow.com/questions/10231349/are-the-days-of-passing-const-stdstring-as-a-parameter-over)，有几个答案在优化`std::string`. 在这种情况下，SSO 是什么意思？

显然不是“单点登录”。也许是“共享字符串优化”？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2012-04-25T16:18:06.147

## 背景/概述

对自动变量的操作（“来自堆栈”，这是您在不调用`malloc`/的情况下创建的变量`new`）通常比那些涉及自由存储（“堆”，这是使用创建的变量）快得多`new`。但是，自动数组的大小在编译时是固定的，但来自自由存储的数组的大小不是。此外，堆栈大小是有限的（通常为几个 MiB），而免费存储仅受系统内存的限制。

SSO 是短/小字符串优化。A`std::string`通常将字符串存储为指向空闲存储（“堆”）的指针，这提供了与调用`new char [size]`. 这可以防止非常大的字符串的堆栈溢出，但它可能会更慢，尤其是复制操作。作为一种优化，许多实现`std::string`创建一个小的自动数组，比如`char [20]`. 如果您有一个 20 个字符或更小的字符串（在此示例中，实际大小会有所不同），它将直接将其存储在该数组中。这完全避免了调用的需要`new`，从而加快了速度。

编辑：

我没想到这个答案会如此受欢迎，但既然如此，让我给出一个更现实的实现，但需要注意的是，我从未真正“在野外”阅读过任何 SSO 的实现。

## 实施细节

a 至少`std::string`需要存储以下信息：

*   规模
*   容量
*   数据的位置

大小可以存储为 a`std::string::size_type`或指向末尾的指针。唯一的区别是您是否希望在用户调用时必须减去两个指针，或者在用户调用时向指针`size`添加 a 。容量也可以以任何一种方式存储。`size_type``end`

## 你不用为你不使用的东西付费。

首先，根据我上面概述的内容考虑简单的实现：

```
class string {
public:
    // all 83 member functions
private:
    std::unique_ptr<char[]> m_data;
    size_type m_size;
    size_type m_capacity;
    std::array<char, 16> m_sso;
}; 
```

对于 64 位系统，这通常意味着`std::string`每个字符串有 24 个字节的“开销”，另外还有 16 个字节用于 SSO 缓冲区（由于填充要求，此处选择 16 个而不是 20 个）。存储这三个数据成员加上一个本地字符数组是没有意义的，就像在我的简化示例中一样。如果`m_size <= 16`，那么我会将所有数据放入`m_sso`，所以我已经知道容量并且我不需要指向数据的指针。如果`m_size > 16`，那么我不需要`m_sso`。在我需要所有这些的地方绝对没有重叠。不浪费空间的更智能的解决方案看起来更像这样（未经测试，仅用于示例目的）：

```
class string {
public:
    // all 83 member functions
private:
    size_type m_size;
    union {
        class {
            // This is probably better designed as an array-like class
            std::unique_ptr<char[]> m_data;
            size_type m_capacity;
        } m_large;
        std::array<char, sizeof(m_large)> m_small;
    };
}; 
```

我假设大多数实现看起来更像这样。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-25T16:15:57.390

SSO 是“Small String Optimization”的缩写，一种将小字符串嵌入到字符串类的主体中而不是使用单独分配的缓冲区的技术。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-08-11T04:44:17.333

正如其他答案已经解释的那样，SSO 表示**Small / Short String Optimization**。这种优化背后的动机是不可否认的证据，即应用程序通常处理的短字符串比长字符串多得多。

正如 David Stone[在上面的回答中](https://stackoverflow.com/a/10319672/4289700)所解释的那样，`std::string`该类使用内部缓冲区来存储最多给定长度的内容，这消除了动态分配内存的需要。这使得代码*更加高效*和*快速*。

[这个其他相关答案](https://stackoverflow.com/a/28003328/4289700)清楚地表明内部缓冲区的大小取决于`std::string`实现，这因平台而异（请参阅下面的基准测试结果）。

## 基准

这是一个小程序，它对许多相同长度的字符串的复制操作进行基准测试。它开始打印复制 1000 万个长度 = 1 的字符串的时间。然后它以长度 = 2 的字符串重复。它一直持续到长度为 50。

```
#include <string>
#include <iostream>
#include <vector>
#include <chrono>

static const char CHARS[] = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
static const int ARRAY_SIZE = sizeof(CHARS) - 1;

static const int BENCHMARK_SIZE = 10000000;
static const int MAX_STRING_LENGTH = 50;

using time_point = std::chrono::high_resolution_clock::time_point;

void benchmark(std::vector<std::string>& list) {
    std::chrono::high_resolution_clock::time_point t1 = std::chrono::high_resolution_clock::now();

    // force a copy of each string in the loop iteration
    for (const auto s : list) {
        std::cout << s;
    }

    std::chrono::high_resolution_clock::time_point t2 = std::chrono::high_resolution_clock::now();
    const auto duration = std::chrono::duration_cast<std::chrono::milliseconds>(t2 - t1).count();
    std::cerr << list[0].length() << ',' << duration << '\n';
}

void addRandomString(std::vector<std::string>& list, const int length) {
    std::string s(length, 0);
    for (int i = 0; i < length; ++i) {
        s[i] = CHARS[rand() % ARRAY_SIZE];
    }
    list.push_back(s);
}

int main() {
    std::cerr << "length,time\n";

    for (int length = 1; length <= MAX_STRING_LENGTH; length++) {
        std::vector<std::string> list;
        for (int i = 0; i < BENCHMARK_SIZE; i++) {
            addRandomString(list, length);
        }
        benchmark(list);
    }

    return 0;
} 
```

如果你想运行这个程序，你应该这样做，这样`./a.out > /dev/null`打印字符串的时间就不会被计算在内。重要的数字打印到`stderr`，因此它们将显示在控制台中。

我用我的 MacBook 和 Ubuntu 机器的输出创建了图表。请注意，当长度达到给定点时，复制字符串的时间会有很大的跳跃。那是字符串不再适合内部缓冲区并且必须使用内存分配的时刻。

另请注意，在 linux 机器上，当字符串长度达到 16 时发生跳转。在 macbook 上，当长度达到 23 时发生跳转。这证实了 SSO 取决于平台实现。

**Ubuntu** [![Ubuntu 上的 SSO 基准测试](../Images/1d463e55f4006aac2686285a9b28c52d.png)](https://i.stack.imgur.com/KsRWO.png)

**MacBook Pro** [![Macbook Pro 上的 SSO 基准测试](../Images/7ac2403157ca9a600f5721116f681af9.png)](https://i.stack.imgur.com/evYbn.png)

# asp.net - 仅针对图像覆盖 ASP.NET 波浪号 (~) 分辨率

> ID：10315042
> 
> 赞同：2
> 
> 时间：2012-04-25T11:54:16.927
> 
> 标签：asp.net, cdn, virtualpathprovider, resolveurl

我有一个大型遗留应用程序，我想将我们所有的图像移动到 CDN。

目前，我们所有的图像都驻留在应用程序根目录下，因此路径都像`"~/Images/MyImage.jpg."` 由于我们系统的要求，如果要在 CDN 中存在给定图像，我必须在运行时确定给定图像的完整 URL。这使我们可以严格控制版本控制、缓存等。逐个图像地更改代码将是一个非常漫长、乏味且容易出错的过程。

我想做的是能够连接到 ASP.NET 中的某些机制，我可以在其中决定如何解析图像的波浪号。这将允许我们所有现有代码保持原样，并且图像将在运行时定向到 CDN。

*我发现了一些关于VirtualPathProviders*的提及，这听起来像是我正在寻找的东西，但是当我测试它时，唯一传递给*CombineVirtualPaths*函数的路径是以 . 结尾的路径`.ASPX, .ASCX, and .MASTER`。

谁能帮我找到一个干净、低风险的选择？

基本上，我需要在我的应用程序中将“~/images/myimage.jpg”作为“http://mycdnhost.com/myimage.jpg”呈现给浏览器的任何地方。这将完全避免浏览器向我们的服务器发送图像请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:16:45.410

**使用 IIS 路由**

提供来自不同站点或服务器的静态内容。您的 Web 应用程序部署在多台服务器上，动态 Web 内容位于一个站点或服务器上，而所有静态内容位于不同的站点或服务器上。您可以将 URL 重写模块与 IIS 应用程序请求路由模块一起使用，将所有对静态文件的请求转发到不同的服务器，同时为来自当前服务器的所有动态网页请求提供服务。这样，ASP.NET 路由仅用于动态 Web 内容，而不评估静态内容的任何 URL。

以下示例显示了可用于此方案的 URL 重写规则：

```
<rewrite>
    <rules>
        <rule name="Forward to static file server">
            <match url="^.+\.(?:jpg|bmp|gif)$" />
            <action type="Rewrite" url="http://static_file_server/{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

更多信息：http://learn.iis.net/page.aspx/496/iis-url-rewriting-and-aspnet-routing/

**使用 HttpModule**

1.  您应该尝试创建拦截图像请求的 HttpModule 并尝试将它们重定向到您的 CDN 路径。首先，您需要将图像文件的文件扩展名映射到 IIS 中的 aspnet_isapi。然后，添加一个为这些文件扩展名执行 url 重定向的 httpmodule。例如，在模块的 beginrequest 方法中：

    void context_BeginRequest(object sender, EventArgs e) { if(request.url.endwith .jpg/.png ...) 重定向到相对于根文件夹的路径。}

2.  使用 httpmodule 的另一个选项是拦截呈现的 html 并使用正则表达式替换图像 url 以指向 CDN。在这里你可以看到它是如何工作的[http://shoaibsheikh.blogspot.com/2012/05/change-image-url-in-aspnet-using.html](http://shoaibsheikh.blogspot.com/2012/05/change-image-url-in-aspnet-using.html)

此方法将增加 asp.net 生命周期的开销，因为我们必须在将整个页面发送到客户端之前拦截整个页面。

**使用控制适配器**

如果您只想处理图像控件以劫持图像控件渲染方法并有选择地更改 cdn url 的路径，您应该尝试使用 ASP.Net 控件适配器。这种方法风险较小且可拆卸。

```
 public class CDNImageControlAdapter : ControlAdapter
    {
        protected override void Render(HtmlTextWriter writer)
        {
            Image img = this.Control as Image;
            if (img == null)
            {
                base.Render(writer);
                return;
            }

            if (img.ImageUrl.Length > 0)
            {
                // Let the HyperLink render its begin tag
                img.RenderBeginTag(writer);

                Image image = new Image();

                if (img.ImageUrl.IndexOf("~") == 0)
                {
                    img.ImageUrl = (img.ImageUrl.Replace("~", "http://mycdn.com/images/"));

                }

                img.RenderControl(writer);
            }
            else
            {
                // HyperLink.RenderContents handles a couple of other
                // cases if its ImageUrl property hasn't been set. We
                // delegate to that behavior here.
                base.Render(writer);
            }
        }
    } 
```

并将 All.broswer 文件添加到应用程序的 App_Browsers 文件夹中

```
<!--
    You can find existing browser definitions at
    <windir>\Microsoft.NET\Framework\<ver>\CONFIG\Browsers
-->
<browsers>
  <browser id="Default">
    <controlAdapters>
      <adapter controlType="System.Web.UI.WebControls.Image" adapterType="CDNImageControlAdapter, MyWebApplication" />
    </controlAdapters>
  </browser>
</browsers> 
```

问候。

# tridion - Tridion 2009 SP1：通过页面元数据打开组件打开共享项目而不显示对话框？

> ID：10315050
> 
> 赞同：4
> 
> 时间：2012-04-25T11:54:36.570
> 
> 标签：tridion

在 SDL Tridion 2009 SP1 中，我使用带有组件链接的页面元数据来为页面设置一些特色媒体、SEO 数据等。问题是当编辑器单击“打开”按钮从页面编辑它时，共享项目在当前出版物中以只读模式打开。我们需要的是在打开组件表示时显示共享项对话框，以便我们可以编辑父项。

有没有办法启用这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:01:14.513

我相信对此有一个热修复。我会试着找到号码。

**更新**

看来我错了 - 我正在考虑的问题是针对 SDL Tridion 2011 并通过[https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011/index.aspx](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011/index.aspx)上的修补程序 CM_2011.0.1.73971 解决的- 我猜是这样问题可能来自 2009 SP1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:35:22.107

SDL 现在已针对此问题生成了一个修补程序：

[https://www.sdltridionworld.com/images/CM_2009.1.81021_tcm89-20623.zip](https://www.sdltridionworld.com/images/CM_2009.1.81021_tcm89-20623.zip)（需要登录）

# visual-studio-2010 - 如何在 Visual Studio 中通过 adhoc 无线处理单个项目

> ID：10315056
> 
> 赞同：1
> 
> 时间：2012-04-25T11:54:50.080
> 
> 标签：visual-studio-2010, tfs

我的团队正在开展一个项目，但我们发现如果我们继续，提交我们所做的更改将会有所不同。我们正在考虑的选项是在临时无线连接上共享项目并一起工作，但我想知道是否有更好的方法来做到这一点，比如让你看到不同的用户正在工作打开它时的类（如谷歌文档）等。谢谢。

ps：我正在研究Team Foundation Server，但是听起来有点复杂，虽然我现在正在下载试用版，不知道是不是我要找的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:32:23.757

如果您有 MSDN 帐户，请在基本配置中安装 Team Foundation Server 或按照 KMoraz 告诉您的操作：使用 TFS Express（它仍然是测试版，但它已经“上线”，所以不要害怕使用它）。您可以在任何类型的计算机上安装这两个版本（例如您的计算机，但必须在您的队友工作时一直启动）。

我强烈建议您尝试 tfspreview.com（Team Foundation Services），它是 TFS 的云版本，它现在是免费的（只要它是 beta 版），但微软总是说去的时候不会花很多钱零售。

Team Foundation Services 真的很棒，你知道在云中有持续集成，非常好。如果你有兴趣，我可以给你更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:35:25.817

吉特，吉特，吉特。

GIT 是这个问题的简单免费解决方案。它很好地合并了多个用户修改的文件。

[带有 VS.NET 的 GIT](https://stackoverflow.com/questions/507343/using-git-with-visual-studio)

[胃肠道](http://en.wikipedia.org/wiki/Git_%28software%29)

# jquery-mobile - jquerymobile 页面和 Phonegap deviceready 事件 onLoad

> ID：10315062
> 
> 赞同：0
> 
> 时间：2012-04-25T11:55:20.357
> 
> 标签：jquery-mobile, cordova, onload

我知道这已经讨论过，但对我来说没有结果。

问题是 deviceready() 只触发一次，第一次是在“列表”页面上。我不能让它在文章页面上工作。当我从“文章”页面返回到“文章列表”时，该事件仍然无法正常工作。我需要在每个 data-role="page" 中操作的菜单按钮。

js：

```
 <script type='text/javascript'>
 function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false); 
 }

 function onDeviceReady() {
   document.addEventListener("menubutton", onMenuKeyDown, false);       
  }

   function onMenuKeyDown() {
    alert('Menu pressed');
    }
 </script> 
```

的HTML：

```
<body onload="onLoad()">
 <div id="list" data-role="page">
   <ul id="articleList" data-role="listview">
    <li id="list1"><a id="link1" href="#article1"></li>  
    <li id="list2"><a id="link1" href="#article2"></li>  
   </ul>
</div>

<div id="article1" data-role="page">Content</div>
<div id="article2" data-role="page">Content</div> 
```

我和：cordova-1.5.0 /jquery.mobile-1.1.0-rc.2 /jquery-1.7.1 /Android

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:26:03.727

我刚刚在我现在正在开发的应用程序中快速测试了它并且它有效。Phonegap-1.6.1 和 jquery.mobile-1.1.0 最终版

也许你应该尝试升级你的 phonegap 和 jquery.mobile

# python - GAE - 部署错误：“AttributeError：无法设置属性”

> ID：10315069
> 
> 赞同：11
> 
> 时间：2012-04-25T11:55:42.227
> 
> 标签：python, google-app-engine, deployment

当我尝试部署我的应用程序时，出现以下错误：

```
开始更新app：flyingbat123，版本：0-1
获取当前资源限制。
avigmati 的密码：Traceback（最近一次通话最后一次）：
  文件“C:\Program Files (x86)\Google\google_appengine\appcfg.py”，第 125 行，在
    run_file(__file__, globals())
  文件“C:\Program Files (x86)\Google\google_appengine\appcfg.py”，第 121 行，在 run_file
    execfile(script_path, globals_)
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 4062 行，在
    主要（sys.argv）
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 4053 行，在 main
    结果 = AppCfgApp(argv).Run()
  运行中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2543 行
    自我行动（自我）
  __call__ 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 3810 行
    返回方法（）
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 3006 行，在更新中
    self.UpdateVersion（rpcserver，self.basepath，appyaml）
  UpdateVersion 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2995 行
    self.options.max_size)
  DoUpload 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2122 行
    resource_limits = GetResourceLimits(self.rpcserver, self.config)
  GetResourceLimits 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 355 行
    resource_limits.update(GetRemoteResourceLimits(rpcserver, config))
  GetRemoteResourceLimits 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 326 行
    版本=配置.版本）
  发送中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 379 行
    self._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 437 行
    super(HttpRpcServer, self)._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 281 行
    auth_token = self._GetAuthToken(凭证[0]，凭证[1])
  _GetAuthToken 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 233 行
    e.headers, response_dict)
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 94 行，在 __init__
    self.reason = args[“错误”]
AttributeError：无法设置属性
2012-04-25 19:30:15（进程退出，代码 1）

```

以下是我的 app.yaml：

```
应用：flyingbat123
版本：0-1
运行时：蟒蛇
api_version: 1
线程安全：没有

```

这似乎是一个身份验证错误，但我输入了有效的电子邮件和密码。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T01:01:53.110

我有同样的问题。我对我的 google 帐户使用 2 因素身份验证，因此我之前必须输入应用程序特定密码才能将应用程序部署到 GAE。如果我输入了正常的谷歌密码，我得到了`AttributeError: can't set attribute`错误。但是，当我创建[应用程序专用密码](https://www.google.com/accounts/IssuedAuthSubTokens)并使用它时，它就起作用了

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T14:38:11.470

错误消息表明我们的 SDK 中存在错误。因为这个bug，你看不到失败的原因。但是，仅当身份验证请求以 403 HTTP 错误结束时才调用此代码块。

您可以按如下方式临时调整文件 C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py 以查看实际原因（添加`logger.warn(body)`行）。

```
except urllib2.HTTPError, e:
  if e.code == 403:
    body = e.read()
    # Add a line bellow to see the actual error
    logger.warn(body)
    response_dict = dict(x.split("=", 1) for x in body.split("\n") if x)
    raise ClientLoginError(req.get_full_url(), e.code, e.msg,
                           e.headers, response_dict)
  else:
    raise 
```

一旦找到原因，这个问题一定会更容易解决。[解决问题后，如果您能在我们的问题跟踪器](http://code.google.com/p/googleappengine/issues/list)中创建有关此神秘错误消息的问题，我将不胜感激？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:18:27.060

我知道这不能回答 OP 问题，但它可能会帮助其他遇到问题`--oauth2`的其他人在这个问题中提到的问题。

我启用了两步验证，并且我一直在使用应用程序专用密码，但发现每天左右查找和粘贴长字符串很乏味。我发现使用`--oauth2`退货

`This application does not exist (app_id=u'my-app-id')`

但通过添加`--no_cookies`选项

`appcfg.py --oauth2 --no_cookies update my-app-folder\`

现在，我每次只需在打开的浏览器窗口中单击 [允许访问] 即可进行身份验证。

我在 Windows 7 上使用 Python SDK 1.7.2

*注意：我在其他地方找到了这个解决方案，但我不记得在哪里，所以我不能正确地归因它。对不起。*

.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T12:17:59.187

将 --oauth2 标志添加到 appcfg.py 更新以便更轻松地修复

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T15:43:30.420

我遇到了同样的问题，插入 logger.warn(body) 后，我得到了这个： `WARNING appengine_rpc.py:231 Error=BadAuthentication Info=InvalidSecondFactor`

标准错误消息可能更有帮助，但这让我想知道我是否不应该使用特定于应用程序的密码？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T10:15:11.243

如果您的值与您的in`default_error`重叠，也会发生这种情况。`static_dirs``app.yaml`

# c# - 如何获取属性名称及其值？

> ID：10315073
> 
> 赞同：11
> 
> 时间：2012-04-25T11:55:53.867
> 
> 标签：c#, loops, properties

> **可能重复：**
> [C#如何通过反射获取字符串属性的值？](https://stackoverflow.com/questions/987982/c-sharp-how-can-i-get-the-value-of-a-string-property-via-reflection)

```
public class myClass
{
    public int a { get; set; }
    public int b { get; set; }
    public int c { get; set; }
}

public void myMethod(myClass data)
{
    Dictionary<string, string> myDict = new Dictionary<string, string>();
    Type t = data.GetType();
    foreach (PropertyInfo pi in t.GetProperties())
    {
        myDict[pi.Name] = //...value appropiate sended data.
    }
} 
```

带 3 的简单类`properties`。我发送这个类的对象。我如何循环获取所有`property names`值及其值，例如一个`dictionary`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-25T12:00:08.907

```
foreach (PropertyInfo pi in t.GetProperties())
    {
        myDict[pi.Name] = pi.GetValue(data,null)?.ToString();

    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T12:00:37.817

这应该做你需要的：

```
MyClass myClass = new MyClass();
Type myClassType = myClass.GetType();
PropertyInfo[] properties = myClassType.GetProperties();

foreach (PropertyInfo property in properties)
{
    Console.WriteLine("Name: " + property.Name + ", Value: " + property.GetValue(myClass, null));
} 
```

**输出：**

> 名称：a，值：0
> 
> 名称：b，值：0
> 
> 名称：c，值：0

# ios - MonoTouch - iOS UI 中的对接和锚定等价物

> ID：10315074
> 
> 赞同：2
> 
> 时间：2012-04-25T11:55:56.267
> 
> 标签：ios, xamarin.ios, interface-builder, size, resolution

在 .NET WinForms 中，我大量使用锚点和停靠来保持与不同窗口大小和屏幕分辨率的比例一致。

据我了解，iOS 设备的分辨率也可能有所不同。

那么在 iOS 中使用什么来保持 UI 元素的比例以使它们在各种屏幕分辨率上看起来一致呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:04:30.620

请参阅[此](http://www.techotopia.com/index.php/IOS_4_iPhone_Rotation,_View_Resizing_and_Layout_Handling)链接。

通常你`UIAutoresizingMask`会这样做，尽管它与 WinForms 或 WPF 有很大不同。我将 Interface Builder (XCode) 用于我的视图布局，我觉得这让它更容易一些（当您更改布局设置时，它们有一个很好的交互式视频）。

如果你走从 C# 设置视图的路线，那将是一样的——你只是`UIAutoresizingMask`手动设置的。

# c# - C# Excel UDF 范围写回错误，HRESULT 异常：0x800A03EC

> ID：10315081
> 
> 赞同：0
> 
> 时间：2012-04-25T11:56:22.450
> 
> 标签：c#, excel, user-defined-functions

```
public string Name(string code)
    {
        MyExcelAppInstance.Volatile(true);

        MsExcel.Application oApp = new MsExcel.Application();
        oApp.Visible = true;
        oApp.UserControl = true;
        Object oBooks = oApp.Workbooks;
        System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("en-US");
        oBooks.GetType().InvokeMember("Add", System.Reflection.BindingFlags.InvokeMethod, null, oBooks, null, ci);

        oApp.Visible = true;
        oApp.UserControl = true;
        System.Globalization.CultureInfo oldCI = System.Threading.Thread.CurrentThread.CurrentCulture;
        System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-US");
        oApp.Workbooks.Add();
        System.Threading.Thread.CurrentThread.CurrentCulture = oldCI;

        MsExcel.Range rng = MyExcelAppInstance.get_Range("A1:D4", Type.Missing);
        //Get a 2D Array of values from the range in one shot: 
        object[,] myArray = (object[,])rng.get_Value(Type.Missing);

        // Process 'myArray' however you want here. 
        // Note that the Array returned from Excel is base 1, not base 0\. 
        // To be safe, use GetLowerBound() and GetUpperBound: 
        for (int row = myArray.GetLowerBound(0); row <= myArray.GetUpperBound(0); row++)
        {
            for (int column = myArray.GetLowerBound(1); column <= myArray.GetUpperBound(1); column++)
            {
                if (myArray[row, column] is double)
                {
                    myArray[row, column] = (double)myArray[row, column] * 2;
                }
            }
        }

        // Pass back the results in one shot: 
        rng.set_Value(Type.Missing, myArray);  // where gets an error

        return code + code;
    } 
```

我收到一个错误“HRESULT 异常：0x800A03EC”。我尝试设置语言环境，但没有成功。没有 set_value，它工作正常。知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:06:57.177

我曾经遇到过类似的问题，错误结果是由无效参数引起的（我以无效格式传递了范围字符串）。确保调用时范围和所有数组内容都有效`set_Value`。

# ios - NSUserDefaults registerDefaults 与 NSInteger

> ID：10315083
> 
> 赞同：1
> 
> 时间：2012-04-25T11:56:31.440
> 
> 标签：ios, nsuserdefaults, nsinteger

我正在`NSUserDefaults`为我的应用程序存储一些整数设置，但我想使用如下代码为这些设置注册默认值：

```
NSDictionary *appDefaults = [[NSDictionary alloc] initWithObjectsAndKeys:(NSInteger)0, @"PMChordColour", (NSInteger)1, @"PMTextColour", (NSInteger)0, @"PMBackgroundColour", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults]; 
```

这些值在我的应用程序中使用

```
NSInteger setColour = [[NSUserDefaults standardUserDefaults] integerForKey:@"PMChordColour"]; 
```

这样做的问题是`NSDictionary`不允许存储标量值。

有没有办法注册允许存储整数的默认值？我意识到我可以使用`NSNumber`，但这似乎是不必要的开销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:02:54.703

不，您必须使用`NSNumber`. 这是*必要*的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:25:12.313

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:13], @"id", nil];
int integer = [[dict objectForKey:@"id"] intValue]; 
```

# android - 我们如何在 sencha touch 2.0 中集成短信网关？

> ID：10315085
> 
> 赞同：1
> 
> 时间：2012-04-25T11:56:46.803
> 
> 标签：android, cordova, sencha-touch-2, sms-gateway

你好朋友，我正在使用 sencha touch 2.0 应用程序开发 phonegap，我必须在其中集成短信网关。谁能用一些例子来解释我如何实现这一点？

**编辑：-**

我浏览了以下链接并没有发现它有帮助，因为该链接提供了 phonegap 的 SMS 类链接，但现在已弃用。

[来自sencha touch app的短信](http://www.sencha.com/forum/showthread.php?131445-It-is-possible-to-send-SMS-Messages-from-a-Sencha-Touch-App)

[在 Android 上通过 PhoneGap 发送短信](https://stackoverflow.com/questions/3193997/send-sms-through-phonegap-on-android)

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:20:58.610

你可以试试这个，它对我有用

```
{
  xtype: 'button',
                       flex: 1,
                        ui: 'action',
                        text: 'SMS',
                        id: 'smsButton',
                        handler: function () {
                            window.location = 'sms:xxxxxxx';
                        }
} 
```

# debugging - JQuery Mobile 导致 Firebug 和 Chrome 调试器无法在断点处停止

> ID：10315089
> 
> 赞同：1
> 
> 时间：2012-04-25T11:56:53.510
> 
> 标签：debugging, google-chrome, jquery-mobile, firebug

我遇到了一个奇怪的问题，我无法让 Chrome 或 Firebug 调试器在我设置的断点处停止。页面运行良好，它正在写入控制台，只是我的断点都不会停止页面。

事实证明，如果我删除了 jQuery Mobile 包含文件：

```
<script src="lib/jquery.mobile-1.1.0.min.js"></script> 
```

然后调试器按预期工作（我使用 JQM 进行移动样式设置，所以如果我删除包含文件，我的样式就不起作用 - 没有 JS 错误或任何东西）。

我在控制台中没有看到与 JQM 相关的错误，所以我不确定为什么该文件会导致调试器出现问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:14:37.790

问题是我的 html 页面中没有包含“data-role=page”的 div（这些是由我的应用程序中的 JS 创建的）。我添加了一个带有该属性的空 div，调试器又开始工作了。我不能把修复归功于它，它属于[Kin Blas](https://github.com/jblas)。

在此处查看完整详细信息：

[https://github.com/jquery/jquery-mobile/issues/4206#issuecomment-5448298](https://github.com/jquery/jquery-mobile/issues/4206#issuecomment-5448298)

这可能发生在任何通过下划线或 Mustache 使用模板并使用 Javascript 将它们作为单独文件加载的人身上。我正在使用主干和下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T08:07:10.777

JQuery Mobile 使用 ajax 调用动态加载页面，因此 JS 文件不是以标准方式加载的。如果您不使用`rel="external"`,`data-ajax="false"`或`"target"`属性（[在此处](http://demos.jquerymobile.com/1.2.0/docs/pages/page-links.html)参考）阻止 ajax 调用，则必须使用`debugger;`语句停止 javascript 代码，即 Firebug、Internet Explorer 开发人员工具栏和 Chrome 开发人员工具的编程断点。

# selenium - 如何使用 log4j 启 动 selenium 服务器

> ID：10315090
> 
> 赞同：0
> 
> 时间：2012-04-25T11:56:57.527
> 
> 标签：selenium, log4j

我想用 log4j 启​​动 selenium 服务器，以便所有与服务器相关的日志都到那里。我正在使用以下 ANT 目标启动带有 ANT 的服务器

```
<target name="startserver" depends="setClassPath">
<java jar="${test.home}/lib/selenium-server-standalone-2.20.0.jar"  fork="true">
<arg line="-Djava.util.logging.config.file=log4j.properties"/>
<arg line="-firefoxProfileTemplate 'D:\selenium.default'"/>
<arg line="-browserSideLog"/>
</java>
</target> 
```

我的 log4j.properties 如下：

```
log4j.rootLogger=INFO, R, stdout

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=./logs/sellog.log
log4j.appender.R.MaxFileSize=10MB
log4j.appender.R.MaxBackupIndex=1
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n 
```

但是从目标启动服务器后，我没有得到任何服务器日志。

另外，我有一个硒测试，我将日志扔到 log4j 中，如下所示：

```
private LogManager lm;
private Logger logger = lm.getLogger(this.getClass().getName());
logger.info("Selenium Client started..."); 
```

我在 log4j 日志中获取应用程序日志。

我想要的是在 log4j 日志中包含所有日志（硒服务器日志 + 应用程序日志）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:48:39.757

Selenium 使用[slf4j](http://www.slf4j.org/)，可以告诉它将日志数据发送到 log4j。但是您必须打开 JAR 清单并明确指定类路径和主类，而不是使用该`-jar`选项。然后将slf4j的log4j适配器jar（slf4j-log4j12-1.6.4.jar）添加到classpath，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:10:43.700

您在这里混合了两个日志框架：

```
java.util.logging.config.file=log4j.properties 
```

该常量用于配置 java.util.logging，AKA 'JDK logging'。

您确定 Selenium Server 实际使用 log4j 吗？如果是这样，你应该有

```
log4j.configuration=log4j.properties 
```

编辑：基于[http://code.google.com/p/selenium/source/browse/trunk/java/server/src/org/openqa/selenium/server/log/LoggingManager.java](http://code.google.com/p/selenium/source/browse/trunk/java/server/src/org/openqa/selenium/server/log/LoggingManager.java)，看起来它使用JDK日志记录，因此您不能（轻松）将其重定向到 log4j。

# youtube-api - 什么是 youtube Zend gdata api 速率限制？

> ID：10315091
> 
> 赞同：0
> 
> 时间：2012-04-25T11:57:04.927
> 
> 标签：youtube-api, gdata-api

我正在使用**Youtube Zend GDATA API**，我想知道我对 Youtube 进行的 API 调用的确切限制。并告诉我如果超出限制他们遵循的程序是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:21:56.643

他们没有说直接数字，只是存在配额限制。但是，我相信您的应用程序必须有大量的使用量才能超过限制。

[在这里](https://developers.google.com/youtube/faq#quota)查看更多。

# objective-c - 循环遍历 didSelectRowAtIndexPath 中自定义单元格的子视图以获取 UITextField 文本

> ID：10315095
> 
> 赞同：0
> 
> 时间：2012-04-25T11:57:11.920
> 
> 标签：objective-c, uitableview, ios4

我知道我问了一个非常常见的问题。但是在经历了很多类似的问题和文章之后我无法理解

**如何在 didSelectRowAtIndexPath 委托方法中访问 UITableViewCell 中的 UITextfield。**

我在下面发布我的代码。我可能不会按照预期的方式进行，虽然..

我想在 didSelectRowAtIndexPath 中制作文本字段（选定行的）[becomeFirstResponder]，以便我可以在此文本字段下方显示 uiPicker。这个你能帮我吗。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        if(self.isTableForHospital)
        {
            UIView *myview=[self createRowViewForHospitalTable:[customArray objectAtIndex:indexPath.row]];
            myview.tag=indexPath.row;
            [cell addSubview:myview];
            cell.selectionStyle=UITableViewCellSelectionStyleNone;
        }
        else
        {
            cell.textLabel.text=[customArray objectAtIndex:indexPath.row];
        }
    }
    return cell;
}

-(UIView *)createRowViewForHospitalTable:(NSString *)rowText
{
    UIView *hospital_row_view=[[UIView alloc]init];
    UILabel *lblRowText=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 300, 50)];
    lblRowText.text=rowText;

    txtDepartment=[[UITextField alloc]initWithFrame:CGRectMake(310, 0, 185, 30)];
        //...rest styling for textfield goes here..
    txtRole=[[UITextField alloc]initWithFrame:CGRectMake(495, 0, 185, 30)];

    [hospital_row_view addSubview:lblRowText];
    [hospital_row_view addSubview:txtDepartment];
    [hospital_row_view addSubview:txtRole];
    return  hospital_row_view;
}

- (void)textFieldDidEndEditing:(UITextField *)textField {  }

- (void)textFieldFinished:(id)sender{
    NSString *value=@"sa";
    [sender resignFirstResponder];
}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    UITableViewCell *cellSelected = [tableView cellForRowAtIndexPath: indexPath];

    UIView *myview=[cellSelected.contentView viewWithTag:indexPath.row];
    for(UIView *item in [myview subviews])
    {
        if([item isKindOfClass:[UITextField class]])
        {
            [item becomeFirstResponder];        
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:45:30.993

在遍历单元格子视图和获取 UITextField 方面，我想我有你的答案。

[我在这里](https://stackoverflow.com/a/6580069/1383296)的另一个线程上找到了这个，并将其修改为更通用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITextField* textField = [[UITextField alloc] init];

    UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];

    UIView* 子视图 = [[cell.contentView 子视图] lastObject]; // 确保你的 UITextField 真的*是*你添加的最后一个对象。

    if ([subview isKindOfClass:[UITextField class]]) {
        textField = (UITextField*) 子视图；
    }

    [文本字段成为FirstResponder]；

}

```

...其中“textField”是实际文本字段对象的占位符。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:13:15.877

我认为您不需要分配初始化文本字段，因为它最终将指向单元格的文本字段（如果有）。

我相信你是在不必要地分配它。

# php - PHP 移动设备检测自动转发脚本 - 需要添加“否则”语句？

> ID：10315103
> 
> 赞同：0
> 
> 时间：2012-04-25T11:57:30.980
> 
> 标签：php, html

我有 2 个在 InDesign 中创建的目录副本 - SWF（桌面）和 PDF（移动）。

该脚本应自动将用户转发到 SWF 版本，除非下面的脚本检测到移动设备会将用户转发到 PDF 版本。

```
<?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://www.****.co.uk/catalogue/mobile.pdf');
?> 
```

我需要稍微扩展一下，也许使用“else if”来基本说：如果这个脚本没有检测到移动设备，不要转发到/mobile.pdf，而是转发到/catalogue.swf。

任何帮助将不胜感激！

利亚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:16:29.700

```
<?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4))) {
    header('Location: http://www.****.co.uk/catalogue/mobile.pdf');
} else {
    header('Location: http://www.****.co.uk/catalogue/catalogue.swf');
}
?> 
```

虽然对于检测设备，我更喜欢[这种方法](http://www.brettjankord.com/2012/01/16/categorizr-a-modern-device-detection-script/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T13:08:17.147

PHP 移动设备检测自动转发脚本 - 试试这个效果很好

```
<?  php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: mobilesite/index.php');
?> 
```

# ios - iOS：UIViewController 不使用情节提要显示另一个 UIViewController

> ID：10315107
> 
> 赞同：0
> 
> 时间：2012-04-25T11:57:44.807
> 
> 标签：ios, uiviewcontroller, storyboard

我正在尝试在单个视图中显示多个 UIViewController 对象。目前我想在应用加载时显示一个 UIViewController 对象。但是应用程序屏幕显示为空白，而它应该在子视图控制器内显示一个标签。

这是我所做的：

父视图控制器.h

```
#import <UIKit/UIKit.h>
@interface ParentViewController : UIViewController
{
    UIViewController *child1Controller;
    UIViewController *child2Controller;
}
@end 
```

父视图控制器.m

```
#import "ParentViewController.h"
#import "Child1Controller.h"
#import "Child2Controller.h"

@interface ParentViewController ()
@end

@implementation ParentViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil { ... }

- (void)viewDidLoad
{
    child2Controller = [[Child2Controller alloc] init];
    [self.view addSubview:child2Controller.view];

    [super viewDidLoad];
    // Do any additional setup after loading the view.

}

- (void)viewDidUnload { ... }

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { ... }

@end 
```

然后在界面生成器的情节提要中

*   添加 3 个视图控制器
*   为它们中的每一个分配了一个类 ParentViewController、Child1Controller 和 Child2Controller
*   在 Child2Controller 对象中，在 View 中添加了一个 UILabel。
*   在 Child2Controller.h 中为 UILabel 定义了 IBOutlet 并在 Child2Controller.m 中添加了相同的综合语句
*   最后在 project-Info.plist 中设置主故事板文件

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:43:10.123

从 iOS 5 开始，可以利用 View Controller Containment。这是一种新方法，允许您创建自定义控制器容器，例如`UINavigationController`或`UITabBarController`。

在您的情况下，这可能非常有用。事实上，在您的故事板中，您可以创建父控制器和两个子控制器。父母可以链接到另一个场景，而两个孩子没有链接。它们是您可以在父控制器中使用的独立场景。

例如，在`viewDidLoad`您的父控制器的方法中，您可以执行以下操作：

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   UIStoryboard *storyboard = [self storyboard];

   FirstChildController *firstChildScene = [storyboard instantiateViewControllerWithIdentifier:@"FirstChildScene"];
   [self addChildViewController:firstChildScene];
   [firstChildScene didMoveToParentViewController:self];
} 
```

然后在你的`FirstChildController`覆盖`didMoveToParentViewController`

```
- (void)didMoveToParentViewController:(UIViewController *)parent
{
   // Add the view to the parent view and position it if you want
   [[parent view] addSubview:[self view]];
   CGRect newFrame = CGRectMake(0, 0, 350, 400);
   [[self view] setFrame:newFrame];
} 
```

瞧！您有一个控制器，其中包含一个由子控制器管理的视图。

有关更多信息，请参阅[how-does-view-controller-containment-work-in-ios-5](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5)。

希望能帮助到你。

# java - 从子线程回调父线程

> ID：10315111
> 
> 赞同：2
> 
> 时间：2012-04-25T11:58:08.077
> 
> 标签：java

我有一个父线程。它的工作是排队请求和初始化子线程。子线程应该从 Web 服务获取数据并回调到父线程。父线程处理数据并启动另一个子线程。问题是回调方法中的所有内容都由子线程而不是父线程处理。有没有办法处理父线程的回调？换句话说，子线程在调用回调方法后立即完成而不对其进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:04:36.940

您需要为此进行一些设计，但对于初学者来说，如果主线程除了等待子线程完成之外什么都不做，我看不到子线程的意义。另一方面，如果主线程必须为进一步的传入请求提供服务，那么它也不能为来自子线程的回调提供服务。你将不得不重新考虑这一点。一种想法是让一个线程收集请求并将它们推送到队列中。子线程将它们的事件推送到同一个队列，并且有一个单独的线程处理来自队列的事件——来自子线程的请求和响应。

如果这样的事情对您来说听起来不错，那么请务必使用`ExecutorService`来处理工作排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:19:55.173

正如 Marko 提到的，您可以使用具有 Future 引用的 ExecutorService ，您可以将运行作业的结果返回到其父线程。

# php - 使用 htaccess 控制会话不活动

> ID：10315116
> 
> 赞同：0
> 
> 时间：2012-04-25T11:58:25.790
> 
> 标签：php, .htaccess, web

我有一个正在运行的本地站点，该站点由需要用户名和密码的 htaccess 文件进行身份验证。这很好用，但是我想添加一个功能，如果站点处于非活动状态（您走开）10 分钟，它会在刷新/重新加载站点上的页面时再次询问您的用户名和密码。有没有办法做到这一点？

这是一个 Wordpress 网站，因此向每个页面添加代码可能有点麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:47:11.557

HTTP 身份验证没有任何注销，也没有会话到期。每次请求都会发送凭据。您需要的是基于 Web 的身份验证。对于 Wordpress，您可以使用现有插件之一，例如[http://wordpress.org/extend/plugins/basic-authentication/](http://wordpress.org/extend/plugins/basic-authentication/)。

# jquery - Pdf 文件在我的 Drupal 站点中打开新选项卡

> ID：10315118
> 
> 赞同：0
> 
> 时间：2012-04-25T11:58:34.163
> 
> 标签：jquery, file, drupal, field

我正在使用 Drupal 7。我的主题 Omega。并在我的网站上有文件字段。上传所有 pdf 文件，一切正常。

但是，当我在 Firefox 上单击 pdf 文件时，我的 pdf 文件开始下载。当我点击 Chrome 时，pdf 在同一页面中打开。

经Firebug检查，pdf文件html代码在这里：

```
<span class="file"><img src="/modules/file/icons/application-pdf.png" title="application/pdf" alt="" class="file-icon"> <a title="myfile.pdf" type="application/pdf; length=1620377" href="http://mysite.net/sites/default/files/myfile.pdf">Click to Download</a></span> 
```

我想在单击 pdf 文件时打开一个新选项卡，所以要创建属性。Drupal 文件模块是（file.js）：

```
/**
 * @file
 * Provides JavaScript additions to the managed file field type.
 *
 * This file provides progress bar support (if available), popup windows for
 * file previews, and disabling of other file fields during Ajax uploads (which
 * prevents separate file fields from accidentally uploading files).
 */

(function ($) {

/**
 * Attach behaviors to managed file element upload fields.
 */
Drupal.behaviors.fileValidateAutoAttach = {
  attach: function (context, settings) {
    if (settings.file && settings.file.elements) {
      $.each(settings.file.elements, function(selector) {
        var extensions = settings.file.elements[selector];
        $(selector, context).bind('change', {extensions: extensions}, Drupal.file.validateExtension);
      });
    }
  },
  detach: function (context, settings) {
    if (settings.file && settings.file.elements) {
      $.each(settings.file.elements, function(selector) {
        $(selector, context).unbind('change', Drupal.file.validateExtension);
      });
    }
  }
};

/**
 * Attach behaviors to the file upload and remove buttons.
 */
Drupal.behaviors.fileButtons = {
  attach: function (context) {
    $('input.form-submit', context).bind('mousedown', Drupal.file.disableFields);
    $('div.form-managed-file input.form-submit', context).bind('mousedown', Drupal.file.progressBar);
  },
  detach: function (context) {
    $('input.form-submit', context).unbind('mousedown', Drupal.file.disableFields);
    $('div.form-managed-file input.form-submit', context).unbind('mousedown', Drupal.file.progressBar);
  }
};

/**
 * Attach behaviors to links within managed file elements.
 */
Drupal.behaviors.filePreviewLinks = {
  attach: function (context) {
    $('div.form-managed-file .file a, .file-widget .file a', context).bind('click',Drupal.file.openInNewWindow);
  },
  detach: function (context){
    $('div.form-managed-file .file a, .file-widget .file a', context).unbind('click', Drupal.file.openInNewWindow);
  }
};

/**
 * File upload utility functions.
 */
Drupal.file = Drupal.file || {
  /**
   * Client-side file input validation of file extensions.
   */
  validateExtension: function (event) {
    // Remove any previous errors.
    $('.file-upload-js-error').remove();

    // Add client side validation for the input[type=file].
    var extensionPattern = event.data.extensions.replace(/,\s*/g, '|');
    if (extensionPattern.length > 1 && this.value.length > 0) {
      var acceptableMatch = new RegExp('\\.(' + extensionPattern + ')$', 'gi');
      if (!acceptableMatch.test(this.value)) {
        var error = Drupal.t("The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.", {
          '%filename': this.value,
          '%extensions': extensionPattern.replace(/\|/g, ', ')
        });
        $(this).parents('div.form-managed-file').prepend('<div class="messages error file-upload-js-error">' + error + '</div>');
        this.value = '';
        return false;
      }
    }
  },
  /**
   * Prevent file uploads when using buttons not intended to upload.
   */
  disableFields: function (event){
    var clickedButton = this;

    // Only disable upload fields for Ajax buttons.
    if (!$(clickedButton).hasClass('ajax-processed')) {
      return;
    }

    // Check if we're working with an "Upload" button.
    var $enabledFields = [];
    if ($(this).parents('div.form-managed-file').size() > 0) {
      $enabledFields = $(this).parents('div.form-managed-file').find('input.form-file');
    }

    // Temporarily disable upload fields other than the one we're currently
    // working with. Filter out fields that are already disabled so that they
    // do not get enabled when we re-enable these fields at the end of behavior
    // processing. Re-enable in a setTimeout set to a relatively short amount
    // of time (1 second). All the other mousedown handlers (like Drupal's Ajax
    // behaviors) are excuted before any timeout functions are called, so we
    // don't have to worry about the fields being re-enabled too soon.
    // @todo If the previous sentence is true, why not set the timeout to 0?
    var $fieldsToTemporarilyDisable = $('div.form-managed-file input.form-file').not($enabledFields).not(':disabled');
    $fieldsToTemporarilyDisable.attr('disabled', 'disabled');
    setTimeout(function (){
      $fieldsToTemporarilyDisable.attr('disabled', '');
    }, 1000);
  },
  /**
   * Add progress bar support if possible.
   */
  progressBar: function (event) {
    var clickedButton = this;
    var $progressId = $(clickedButton).parents('div.form-managed-file').find('input.file-progress');
    if ($progressId.size()) {
      var originalName = $progressId.attr('name');

      // Replace the name with the required identifier.
      $progressId.attr('name', originalName.match(/APC_UPLOAD_PROGRESS|UPLOAD_IDENTIFIER/)[0]);

      // Restore the original name after the upload begins.
      setTimeout(function () {
        $progressId.attr('name', originalName);
      }, 1000);
    }
    // Show the progress bar if the upload takes longer than half a second.
    setTimeout(function () {
      $(clickedButton).parents('div.form-managed-file').find('div.ajax-progress-bar').slideDown();
    }, 500);
  },
  /**
   * Open links to files within forms in a new window.
   */
  openInNewWindow: function (event) {
    $(this).attr('target', '_new');
    window.open(this.href, 'filePreview', 'toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,width=500,height=550');
    return false;
  }
};

})(jQuery); 
```

我没有 page.tpl 文件，所以必须使用这个 jQuery 或其他方式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:27:02.337

您的问题是我在以前的一个项目中遇到的问题。有两种方法：

*   您使用 pdf 引擎创建自己的模块以查看并使用 drupal api 将您的字段添加到所需的内容类型，同时显示渲染它。
*   使用 pdf 模块。还有其他可用的模块，但我使用了它，因为它可以轻松完成我的工作。[http://drupal.org/project/pdf](http://drupal.org/project/pdf)

我希望它有帮助

# excel - Visual Basic Excel - 删除行的宏

> ID：10315120
> 
> 赞同：0
> 
> 时间：2012-04-25T11:58:38.487
> 
> 标签：excel, vba

我的文档中有 2 张纸（带有电话号码）。如果数字存在于工作表 1 中，我想从工作表 2 中删除该行。

我快到了（这是我第一次使用 VBA）。但谁能帮我完成最后一部分。

```
Sub CleanList()

    Dim stopList As Range, cell1 As Range

    Set stopList = Sheet1.Range("A1:A10000")

    For Each cell1 In stopList
        Dim fullList As Range, cell2 As Range
        Set fullList = Sheet2.Range("A2:A10000")

        For Each cell2 In fullList
            If NumberFix(cell1.Value) = NumberFix(cell2.Value) Then
                cell2.EntireRow.Delete
            End If
        Next cell2
    Next cell1

End Sub

Private Function NumberFix(ByVal nr As String) As String

    If Not nr.StartsWith("46") Then
        nr = "46" + nr
    End If

    NumberFix = nr

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:51:08.890

首先是您的使用`nr.StartsWith`方式更像 VB.NET。您在 VBA 中寻找的功能（可能不是 VB 脚本 btw）是

```
Dim firstTwoChar As String
firstTwoChar = Mid(nr, 1, 2)

If Not firstTwoChar = "46" Then
    nr = "46" + nr
End If

NumberFix = nr 
```

`for...each`但即便如此，我会说如果您要删除行，您不应该使用迭代器。问题是当您删除第 5 行时，第 6 行变为第 5 行，而您转到的下一行是“6”行，但实际上是原始列表中的第 7 行，有效地跳过了原始第 6 行。

你需要向后移动。就像是

```
Sub CleanList()

    Dim stopList As Range, cell1 As Range

    Set stopList = Sheet1.Range("A1:A10000")

    For Each cell1 In stopList
        Dim fullList As Range, cell2 As Range

        Dim firstRowSheet2 As Integer, lastRowSheet2 As Integer, r As Integer
        Dim sheet1sNumber As String
        sheet1sNumber = NumberFix(cell1.Value)   'you really only need to do this once 
                                                 so you may as well bring it out of
                                                 the for loop and store the value and 
                                                 not recalculate each time
        Dim cell2 As Range
        For r = firstRowSheet2 To lastRowSheet2 Step -1 
                         '"Step -1" allows you to move backwards through the loop
            With Sheet2
                Set cell2 = .Cells(r, 1)
                If sheet1sNumber = NumberFix(cell2.Value) Then
                        cell2.EntireRow.Delete
                    End If
            End With

        Next r

    Next cell1

End Sub 
```

但当然@ExternalUse 是对的。有很多内置选项可用于从列表中删除重复项。除非您正在尝试学习 VBA，否则这是一个很好的练习。

# php - 如何解密使用 Drupal 数据库中的 MD5 算法散列的密码？

> ID：10315121
> 
> 赞同：-7
> 
> 时间：2012-04-25T11:58:47.363
> 
> 标签：php, drupal, md5

我的项目需要所有用户及其密码的列表。Drupal 在应用 MD5 哈希后存储这些密码。如何获取用户的原始密码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:05:09.143

MD5 是一种单向哈希函数。没有重要的方法可以逆转它，这就是为什么它（和其他单向哈希函数）用于存储密码的原因。但是，您也许可以使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)来尝试反转哈希，但有效性取决于密码的复杂性和使用的盐（如果使用了盐）。彩虹表在时间和计算资源方面也是非常昂贵的。

我建议重新考虑为什么需要密码。通常，使用用户密码是一个坏主意。那里可能有替代解决方案。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-25T12:04:30.767

如果它们已经在数据库中 - 你只能通过暴力破解获得它们（这可能需要一段时间；即实际上你不能）。除此之外：

1.  每次注册时向管理员发送一封包含密码的电子邮件
2.  对另一个数据库中的表的额外写入
3.  关闭 md5 （它到底有什么用？O-）

# maven-3 - Windows7 64 位上的 Maven 3

> ID：10315122
> 
> 赞同：0
> 
> 时间：2012-04-25T11:58:52.497
> 
> 标签：maven-3

我在 Win7 64Bit 上安装了 Maven3。

当我在命令提示符下输入 mvn 时，我得到：

线程“main”中的异常 java.lang.NoClassDefFoundError: org/codehaus/classworlds/Launcher 原因：java.lang.ClassNotFoundException: org.codehaus.classworlds.Launcher at java.net.URLClassLoader$1.run(URLClassLoader.java:202 ) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306) 在 sun.misc.Launcher$ AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 找不到主类：org.codehaus.classworlds.Launcher。程序将会退出。

%JAVA-HOME% 是一个环境变量。%M2% 包含在 PATH 中

```
D:\Users\me>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_26

D:\Users\me>echo %M2%
C:\TOOLS\maven-3.0.4\bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:55:05.903

我在 Windows 7 和 8 上所做的是将“M2_HOME”设置为我的 Maven 目录，如下所示：

```
M2_HOME=E:\dev\tools\apache-maven-3.0.4
```

然后我将 bin 添加到我的“PATH”中，效果很好！

```
路径=E:\dev\tools\apache-maven-3.0.4\bin;
```

我认为您的部分问题是您设置的是“M2”而不是“M2_HOME”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T09:48:58.440

我想你已经下载了源文件而不是二进制文件。您可能会看到以 Apache-*** 开头的文件夹。

下载具有以下文件夹结构的二进制文件

> Apache-Maven-3.3.9\bin+boot+conf+lib+licence....

然后设置你的

> M2_HOME=E:\dev\tools\apache-maven-3.3.9 和路径=E:\dev\tools\apache-maven-3.3.9\bin;

希望这会奏效。

# php - 具有方法执行计数、时间等的 PHP Profiler，无需扩展

> ID：10315124
> 
> 赞同：0
> 
> 时间：2012-04-25T11:59:08.497
> 
> 标签：php, methods, profiler, execution-time

在使用 CI 的默认分析器旁边的本地 php 环境中，是否有任何类或库可用于分析、查找瓶颈、查看不必要的执行时间等？

我打算远程使用它，我的主机没有安装任何调试扩展，我不想让他们安装，如果有任何PHP解决方案，它会很好。

如果可能，请不要安装扩展程序或更改 php.ini 文件。

（我编辑了标题，因为它使问题看起来特定于 Codeigniter，但事实并非如此。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:27:06.073

来自 Facebook 团队的 XHProf

[http://internetwebsitedesign.biz/tutorials/advanced-codeigniter-profiling-with-xhprof](http://internetwebsitedesign.biz/tutorials/advanced-codeigniter-profiling-with-xhprof)

此处提供的代码：

[https://github.com/facebook/xhprof](https://github.com/facebook/xhprof)

# iphone - 不支持的配置：在 4.2 之前的 Xcode 版本中使用字体 Calibri-Bold 可能会产生意外结果

> ID：10315125
> 
> 赞同：1
> 
> 时间：2012-04-25T11:59:08.877
> 
> 标签：iphone, ios5

我在整个应用程序中使用字体 Calibri-Bold 但我在应用程序中收到警告

不支持的配置：在 4.2 之前的 Xcode 版本中使用字体 Calibri-Bold 可能会产生意外结果

请提供帮助如何在应用程序中解决此问题

我正在使用 ios 5.0

提前致谢

# java - SOLR 1.4 - 按标志排序

> ID：10315128
> 
> 赞同：0
> 
> 时间：2012-04-25T11:59:22.417
> 
> 标签：java, solr, scoring

我正在使用 SOLR 1.4。在搜索索引中，我存储产品和类别。每个产品可能有多个类别。类别应该影响文档的分数。

例如

```
Category 1 (flag 8)
Category 2 (flag 4)
Category 3 (flag 2)
Category 4 (flag 1)

Product A: Category 1 + Category 2
Product B: Category 1 + Category 3 + Category 4 
```

在这种情况下，产品 A 的得分应该高于产品 B：8 + 4 > 8 + 2 + 1

如何在 SOLR 1.4 中实现这一点？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:49:58.647

如果您不太关心相关性，就像您在评论中所说的那样，我建议您使用排序并避免试图影响 solr 分数。您可以添加一个包含与文档类别相关的标志总和的字段，然后使用该字段进行排序。

正如您所指出的，您不能在 solr 1.4 中使用 sort by function，但值得一提的是，如果您升级到 3.x，您可以拥有一个包含标志列表的多值字段并通过函数计算总和，将其[用于排序](http://wiki.apache.org/solr/FunctionQuery#Sort_By_Function)。

在这两种情况下，对于具有相同标志和相同标题的文档，您将查看 solr 分数，这对您来说并不重要。

# macos - QGLWidget::renderText() 创建一些向下移动的字母

> ID：10315131
> 
> 赞同：2
> 
> 时间：2012-04-25T11:59:27.660
> 
> 标签：macos, qt, opengl, text

我创建了一个从 QGLWidget 派生的类：

```
class OpenGLWidget : public QGLWidget 
```

我想在 OpenGL 小部件上写一些文本。因此，我在班级的 paintGL() 中使用了 renderText() 方法：

```
QString s = QString("AaBbCcDd");
renderText(10, 20, s);        // picture line 1 
```

在我的小部件顶部创建的文本中，一些字母向下/向上移动。

看看[这张照片](http://www.julianscharnagl.com/files/QGLWidget_renderText.tiff)。

例如，在图片的第一行中，“C”、“G”、“O”向上移动，“4”、“5”向下移动。

我试图改变字体和字体大小，但这只是改变了字母，而不是问题本身：

```
QFont font = QFont("Arial");
font.setPointSize(18);
renderText(10, 50, s, font);    // picture line 2

font = QFont("Times");
font.setPointSize(18);
renderText(10, 80, s, font);    // picture line 3

font = QFont("Courier");
font.setPointSize(18);
renderText(10, 110, s, font);   // picture line 4

font = QFont("Courier");
font.setPointSize(16);
renderText(10, 140, s, font);   // picture line 5 
```

有人知道如何将字母排成一条直线吗？

我还尝试了 QPainter::drawText() 方法，而不是我班级的 paintGL() 中的 renderText()：

```
QPainter painter(this);
QString s = QString("AaBbCcDd");
painter.drawText(10, 20, s); 
```

这种方法会导致同样的问题。

我在 Mac OS 10.7 上使用 Qt 4.7.4 和 Qt Creator 2.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T17:08:00.527

这是Qt 4.8.x中的一个[已知错误。](https://bugreports.qt-project.org/browse/QTBUG-27881)它会影响在 OS X 10.7 和 10.8（Lion 和 Mountain Lion）下运行的基于 Mac Qt 的应用程序。如果您在 OS X 10.6 (Snow Leopard) 下运行您的应用程序，您将不会看到问题。

Qt 5.0.x 修复了 OS X 10.7 和 10.8 的 renderText() 问题，但仍然太不稳定，无法用作更可靠的 4.8.x 构建的替代品。

可悲的是，Qt 大神们还没有（还）用 5.0.x 版本的修复程序来改造 4.8.x 版本。

# ruby - 为什么 7 位 ASCII 字符串文字在 Ruby 中编码为 UTF-8

> ID：10315133
> 
> 赞同：4
> 
> 时间：2012-04-25T11:59:33.213
> 
> 标签：ruby, encoding

我正在阅读“Ruby 编程语言”。在第 3.2.6.1 节“Ruby 1.9 中的多字节字符”中，本书介绍了 Ruby 字符串中的优化

> 如果字符串文字仅包含 7 位 ASCII 字符，则其编码方法将返回 ASCII，即使源编码为 UTF-8

我在 ruby​​ 1.9.1-p431、1.9.2 和 1.9.3-p125 上都尝试了以下简单脚本，它们都对 7 位 ASCII 字符使用 UTF-8 编码。

```
# coding: utf-8
s = 'hello'
p s.encoding
# result is #<Encoding:UTF-8> 
```

我想也许这种行为在 Ruby 1.9 的开发过程中发生了变化。我尝试搜索 Ruby 1.9 的变更日志，[1.9.1 的变更日志](http://svn.ruby-lang.org/repos/ruby/tags/v1_9_1_0/ChangeLog)证实了这种行为。我还克隆了 Ruby 的 git 存储库，但我找不到提到更改此行为的提交。

**更新：**

查看 Ruby 的源代码存储库，我猜这是 2008 年 1 月发布的 Ruby 1.9.0 中的行为。（它无法在 Debian 6 上编译，所以我无法完全确认。）**虽然“The Ruby Programming 《语言》是一本优秀的书，最初出版于2008年。很可能书中的一些描述已经过时了。**

另一个过时的描述是关于`Encoding.list`方法行为的。因此，如果您也在阅读这本书，请注意过时的描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:12:01.627

我没有那本书，但是当前 Pdf 版本的 Programming Ruby 书（镐）状态

> 无论字符串的内容如何，​​字符串文字总是使用包含它们的源文件的编码进行编码

然后给出一个`"dog"`获得 utf-8 编码的例子。看起来你的书的版本是错误的。这是你的书印刷版中的勘误表，还是只是印刷后 ruby​​ 发生了变化，我不知道

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:32:34.887

需要注意的是，Ruby 中的“编码”通常指的是“解释”，而不是实际存储的字节。当它说编码是 UTF-8 时，这意味着该字符串中的字节将被解释为 UTF-8 多字节字符，尽管考虑到 UTF-8 在设计上向后兼容 7 位 ASCII，有在二进制级别上没有明显的区别。

Ruby 不会自动检测字符串的编码，因为没有标准甚至可靠的方法来确定这一点。这就是为什么默认编码方法应用于所有字符串的原因，除非在创建或转换时明确指定。

您可以切换字符串的编码，而无需使用实际修改存储的字节`force_encoding`。您还可以转换为不同的格式，可能会重新映射存储的字节，使用`encode`.

如果您想了解更多关于字符串内部的信息，您有几种方法可以探索：

```
'dog'.encoding
# => #<Encoding:UTF-8> 
'dog'.bytes.to_a
# => [100, 111, 103] 
'dog'.chars.to_a
# => ["d", "o", "g"] 
```

与非 7 位 ASCII 字符串比较：

```
'døg'.encoding
# => #<Encoding:UTF-8> 
'døg'.bytes.to_a
# => [100, 195, 184, 103]
'døg'.chars.to_a
# => ["d", "ø", "g"] 
```

# jquery - jQuery 输入会更新所有 ID，而不仅仅是所需的一个

> ID：10315135
> 
> 赞同：0
> 
> 时间：2012-04-25T11:59:34.417
> 
> 标签：jquery, html, jquery-calculation

我遇到的问题很难解释，但我已经在 jsFiddle [http://jsfiddle.net/6ms4T/1/中复制了它](http://jsfiddle.net/6ms4T/1/)

我想要实现的是通过更新“数量”文本框，我想在其他地方显示值（下面的行我将称为“成本行”）。

基本上，更新第一个输入框 ( `qty_item_1`) 是更新`quant_`“成本行”中的所有 ( ) ID，而不仅仅是与该产品相关的 ID。

```
function recalc(){

$("[id^=quant_]").text($("input[id^=qty_item_]").val()); 
```

ETC...

完整代码在这里：http: [//jsfiddle.net/6ms4T/1/](http://jsfiddle.net/6ms4T/1/)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:10:41.997

添加一个包含有关您的输入的信息的属性。我添加了一个属性“rel”，第一个输入值为 1，第二个输入值为 2，然后使用此 rel 为 li 元素构建正确的 id。

这是一个更新的工作 jsFiddle：http: [//jsfiddle.net/6ms4T/8/](http://jsfiddle.net/6ms4T/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:08:11.497

您可以使事情相对简洁，并通过识别 的数字组件并将事件仅应用于特定元素`id`，然后将该数字用作选择器的一部分：

```
var idNum = this.id.match(/\d+/);
$("#quant_" + idNum).text($("#qty_item_" + idNum).val()); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6ms4T/11/)。

参考：

*   [`match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match).
*   [正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:16:12.313

您可以找到正在更改的元素的 id，然后提取其中的数字部分以用于其余的计算。这是我更改的方面和[工作版本](http://jsfiddle.net/6ms4T/12/)。：

```
var uniqueOne = $(this).attr("id").match(/\d+/);
$("[id^=quant_][id$="+uniqueOne+"]").text($("input[id^=qty_item_][id$="+uniqueOne+"]").val()); 
```

虽然不是最干净的代码，但它的作用是找到以 quant_ 开头并以 uniqueOne 结尾的 id。您可能可以压缩这些，但它突出显示了结合两个选择器（开头和结尾）。

看起来你有很多很棒的想法可供选择。

**编辑**：

如果您的 id 不以 qty_item_ 开头，那么您需要使用不同的选择器。这个最容易实现的目标是[contains 选择器](http://api.jquery.com/attribute-contains-selector/): `id*=blah`。

带有“总”ID 的更新版本可以找到：http: [//jsfiddle.net/6ms4T/22/](http://jsfiddle.net/6ms4T/22/)

**编辑**：

以前的 jsfiddle 没有按预期处理更新总数。此更新版本应通过识别所有通过 ID 查找 DOM 元素的情况来减少混淆；但是，很有可能应该对其进行重构：http: [//jsfiddle.net/6ms4T/24/](http://jsfiddle.net/6ms4T/24/)。

**编辑**：

OP 的标签在他的 ID 中生成了各种数字和字母，但最后的数字前面有一个下划线。因此，使用 regex 找到了重要的 id `/\d+$/`。正如其他海报所示，解决这个问题的方法不止一种。我个人喜欢用户 gabitzish 的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:19:55.837

更改 recalc() 函数的开始，如下所示；

```
function recalc(e){
    var idx = $(e.target).attr('id').split('_').pop();
    $("[id^=quant_" + idx + "]").text($(e.target).val()); 
```

... }

# java - 循环复杂度巨大 - 克隆对象更好的方法？

> ID：10315147
> 
> 赞同：1
> 
> 时间：2012-04-25T12:00:22.323
> 
> 标签：java

我的度量工具说 copyTo() 方法的圈复杂度为 44。这是相当大的。如何使用更好更快的方法创建地址对象的克隆？注意：我没有可用的 Cloneable 界面（移动应用程序）。

这是课程：

```
class Address
{
    Address()
    {
        init();
    }

    String company1;
    String company2;
    String degree;
    String firstName;
    String lastName;
    String salutation;
    String toPerson;
    String poBox;
    String country;
    String postalCode;
    String place;
    String street;
    String telephone1;
    String telephone2;
    String mobilePhone;
    String privatePhone;
    String fax;
    String eMail;
    String homepage;
    String socialSecurityNumber;
    String bank1Name;
    String bank1BCN;
    String bank1AccountNr;
    String bank2Name;
    String bank2BCN;
    String bank2AccountNr;
    String free01Name;
    String free01Value;
    String free02Name;
    String free02Value;
    String free03Name;
    String free03Value;
    String free04Name;
    String free04Value;
    String free05Name;
    String free05Value;
    String comment;
    String cityCode;
    GpsPosition position;
    int recId;
    int recStatus;
    DateTime recCreated;
    String recCreatedBy;
    String recCreatedByProg;
    DateTime recChanged;
    String recChangedBy;
    String recChangedByProg;
    AddressPropertyUsage usage;

    /* Generates a duplicate of the Address object */
    Address clone()
    {
        Address clonedObject = new Address();

        copyTo(clonedObject);

        return clonedObject;
    }

    void copyTo(Address destination)
    {
        if (destination.usage == null)
            destination.usage = new AddressPropertyUsage(this.usage.value);
        else
            destination.usage.value = this.usage.value;

        destination.recId = this.recId;
        destination.recStatus = this.recStatus;
        destination.recChanged = this.recChanged.clone();

        if (this.recChangedBy == null)
            destination.recChangedBy = null;
        else
            destination.recChangedBy = this.recChangedBy.substring(0);

        if (this.recChangedByProg == null)
            destination.recChangedByProg = null;
        else
            destination.recChangedByProg = this.recChangedByProg.substring(0);

        destination.recCreated = this.recCreated.clone();

        if (this.recCreatedBy == null)
            destination.recCreatedBy = null;
        else
            destination.recCreatedBy = this.recCreatedBy.substring(0);

        if (this.recCreatedByProg == null)
            destination.recCreatedByProg = null;
        else
            destination.recCreatedByProg = this.recCreatedByProg.substring(0);

        if (this.company1 == null)
            destination.company1 = null;
        else
            destination.company1 = this.company1.substring(0);

        if (this.company2 == null)
            destination.company2 = null;
        else
            destination.company2 = this.company2.substring(0);

        if (this.degree == null)
            destination.degree = null;
        else
            destination.degree = this.degree.substring(0);

        if (this.firstName == null)
            destination.firstName = null;
        else
            destination.firstName = this.firstName.substring(0);

        if (this.lastName == null)
            destination.lastName = null;
        else
            destination.lastName = this.lastName.substring(0);

        if (this.street == null)
            destination.street = null;
        else
            destination.street = this.street.substring(0);

        if (this.postalCode == null)
            destination.postalCode = null;
        else
            destination.postalCode = this.postalCode.substring(0);

        if (this.place == null)
            destination.place = null;
        else
            destination.place = this.place.substring(0);

        if (this.country == null)
            destination.country = null;
        else
            destination.country = this.country.substring(0);

        if (this.poBox == null)
            destination.poBox = null;
        else
            destination.poBox = this.poBox.substring(0);

        if (this.telephone1 == null)
            destination.telephone1 = null;
        else
            destination.telephone1 = this.telephone1.substring(0);

        if (this.telephone2 == null)
            destination.telephone2 = null;
        else
            destination.telephone2 = this.telephone2.substring(0);

        if (this.mobilePhone == null)
            destination.mobilePhone = null;
        else
            destination.mobilePhone = this.mobilePhone.substring(0);

        if (this.fax == null)
            destination.fax = null;
        else
            destination.fax = this.fax.substring(0);

        if (this.eMail == null)
            destination.eMail = null;
        else
            destination.eMail = this.eMail.substring(0);

        if (this.homepage == null)
            destination.homepage = null;
        else
            destination.homepage = this.homepage.substring(0);

        if (this.salutation == null)
            destination.salutation = null;
        else
            destination.salutation = this.salutation.substring(0);

        if (this.toPerson == null)
            destination.toPerson = null;
        else
            destination.toPerson = this.toPerson.substring(0);

        if (this.privatePhone == null)
            destination.privatePhone = null;
        else
            destination.privatePhone = this.privatePhone.substring(0);

        if (this.comment == null)
            destination.comment = null;
        else
            destination.comment = this.comment.substring(0);

        if (this.cityCode == null)
            destination.cityCode = null;
        else
            destination.cityCode = this.cityCode.substring(0);

        this.position.copyTo(destination.position);

        if (this.bank1AccountNr == null)
            destination.bank1AccountNr = null;
        else
            destination.bank1AccountNr = this.bank1AccountNr.substring(0);

        if (this.bank1BCN == null)
            destination.bank1BCN = null;
        else
            destination.bank1BCN = this.bank1BCN.substring(0);

        if (this.bank1Name == null)
            destination.bank1Name = null;
        else
            destination.bank1Name = this.bank1Name.substring(0);

        if (this.bank2AccountNr == null)
            destination.bank2AccountNr = null;
        else
            destination.bank2AccountNr = this.bank2AccountNr.substring(0);

        if (this.bank2BCN == null)
            destination.bank2BCN = null;
        else
            destination.bank2BCN = this.bank2BCN.substring(0);

        if (this.bank2Name == null)
            destination.bank2Name = null;
        else
            destination.bank2Name = this.bank2Name.substring(0);

        if (this.socialSecurityNumber == null)
            destination.socialSecurityNumber = null;
        else
            destination.socialSecurityNumber = this.socialSecurityNumber.substring(0);

        if (this.free01Name == null)
            destination.free01Name = null;
        else
            destination.free01Name = this.free01Name.substring(0);

        if (this.free01Value == null)
            destination.free01Value = null;
        else
            destination.free01Value = this.free01Value.substring(0);

        if (this.free02Name == null)
            destination.free02Name = null;
        else
            destination.free02Name = this.free02Name.substring(0);

        if (this.free02Value == null)
            destination.free02Value = null;
        else
            destination.free02Value = this.free02Value.substring(0);

        if (this.free03Name == null)
            destination.free03Name = null;
        else
            destination.free03Name = this.free03Name.substring(0);

        if (this.free03Value == null)
            destination.free03Value = null;
        else
            destination.free03Value = this.free03Value.substring(0);

        if (this.free04Name == null)
            destination.free04Name = null;
        else
            destination.free04Name = this.free04Name.substring(0);

        if (this.free04Value == null)
            destination.free04Value = null;
        else
            destination.free04Value = this.free04Value.substring(0);

        if (this.free05Name == null)
            destination.free05Name = null;
        else
            destination.free05Name = this.free05Name.substring(0);

        if (this.free05Value == null)
            destination.free05Value = null;
        else
            destination.free05Value = this.free05Value.substring(0);
    }

    private void init()
    {
        this.company1 = StringHelper.emptyString;
        this.company2 = StringHelper.emptyString;
        this.degree = StringHelper.emptyString;
        this.firstName = StringHelper.emptyString;
        this.lastName = StringHelper.emptyString;
        this.salutation = StringHelper.emptyString;
        this.toPerson = StringHelper.emptyString;
        this.poBox = StringHelper.emptyString;
        this.country = StringHelper.emptyString;
        this.postalCode = StringHelper.emptyString;
        this.place = StringHelper.emptyString;
        this.street = StringHelper.emptyString;
        this.telephone1 = StringHelper.emptyString;
        this.telephone2 = StringHelper.emptyString;
        this.mobilePhone = StringHelper.emptyString;
        this.privatePhone = StringHelper.emptyString;
        this.fax = StringHelper.emptyString;
        this.eMail = StringHelper.emptyString;
        this.homepage = StringHelper.emptyString;
        this.socialSecurityNumber = StringHelper.emptyString;
        this.bank1Name = StringHelper.emptyString;
        this.bank1BCN = StringHelper.emptyString;
        this.bank1AccountNr = StringHelper.emptyString;
        this.bank2Name = StringHelper.emptyString;
        this.bank2BCN = StringHelper.emptyString;
        this.bank2AccountNr = StringHelper.emptyString;
        this.free01Name = StringHelper.emptyString;
        this.free01Value = StringHelper.emptyString;
        this.free02Name = StringHelper.emptyString;
        this.free02Value = StringHelper.emptyString;
        this.free03Name = StringHelper.emptyString;
        this.free03Value = StringHelper.emptyString;
        this.free04Name = StringHelper.emptyString;
        this.free04Value = StringHelper.emptyString;
        this.free05Name = StringHelper.emptyString;
        this.free05Value = StringHelper.emptyString;
        this.comment = StringHelper.emptyString;
        this.cityCode = StringHelper.emptyString;
        this.position = new GpsPosition();

        this.recId = 0;
        this.recStatus = -1;
        this.recCreated = DateTime.UNKNOWN_PC.clone();
        this.recCreatedBy = StringHelper.emptyString;
        this.recCreatedByProg = StringHelper.emptyString;
        this.recChanged = DateTime.UNKNOWN_PC.clone();
        this.recChangedBy = StringHelper.emptyString;
        this.recChangedByProg = StringHelper.emptyString;
        this.usage = new AddressPropertyUsage(AddressPropertyUsage.VERSION3_ALL);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:03:57.863

你有很多这样的`someString.substring(0)`东西（如果我计算正确的话，出现了 43 次）。由于字符串在 Java 中是不可变的，因此只需分配它们就足够了，因此对 null 的检查将是过时的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:07:56.183

您的`Address`课程包含太多字段。理想情况下，您应该将对象拆分为许多小对象，例如：`BankInfo`、`RecInfo`、`PhoneInfo`、`FreeValues`等。然后让您的`Address`Class 包含这些对象的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:04:24.510

您想通过`.substring(0)`电话实现什么目标？

这将创建另一个具有与原始字符数组相同的底层 char 数组的对象，我可以看到它可能会诱使您使用它。但是为什么你还需要另一个对象呢？字符串是不可变的，因此两个实例都`Address`可以直接使用相同的`String`。

一旦不碍事，您就不需要任何`if`语句，并且可以直接分配值，例如：

```
// No need to create new instances of String...
//  if (this.recChangedBy == null)
//      destination.recChangedBy = null;
//  else
//      destination.recChangedBy = this.recChangedBy.substring(0);

// so above is replaced by:
destination.recChangedBy = this.recChangedBy; 
```

瞧，大多数/所有条件句都消失了，圈复杂度急剧下降。

* * *

（在另一个主题上，您的地址多久修改一次？我很想将其设为不可变对象，并在构造函数中设置所有值，恕我直言，这将使推理和使用变得更容易。尤其是与构造一个空的地址。

也没有调用私有`init`方法的构造函数 - 只需将该方法的主体设为构造函数。

而且我不认为地址真的有 44 个字段，这似乎是一个[上帝对象](http://en.wikipedia.org/wiki/God_object)。`Address`如果类只代表一个地址，您的代码可能会更清晰，并且银行详细信息进入一个`Account`类，最后一个更改详细信息出现在一个`AuditDetails`类中，等等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:11:34.997

我同意其他所有人的观点，即您不应该尝试复制字符串，并且不这样做可以让您摆脱条件。但值得补充的是：如果您*确实*需要进行条件复制——例如，如果这些东西不是字符串而是某种其他类型的对象——那么你最好将重复的逻辑分解：

```
String copyUnlessNull(String s) {
  if (s==null) return null;
  return s.substring(0);
}

void copyTo(Address destination) {
  // ...
  destination.recChangedBy     = copyUnlessNull(this.recChangedBy);
  destination.recChangedByProg = copyUnlessNull(this.recChangedByProg);
  // ...
} 
```

为免生疑问，在这种特殊情况下，上述方法**不是**正确的解决方案——你根本不应该打扰 substring() 的东西，然后你就不需要条件逻辑——但只要你发现自己一遍又一遍地编写相同的代码，您应该寻找一种只编写一次并重复使用它的方法。

# maven - 为什么 sbt 缺少对 Vaadin 项目的依赖

> ID：10315148
> 
> 赞同：0
> 
> 时间：2012-04-25T12:00:24.190
> 
> 标签：maven, sbt, vaadin

我已经使用 maven 创建了一个 Vaadin 项目，并将 war 安装在我的本地 maven 存储库中。这个项目定义了一个公共类，`com.whatever.User`.

然后，我创建了一个 sbt 项目，我想在 Vaadin 项目上添加一个依赖项——以测试它的逻辑。在我的 sbt 项目的 build.sbt 文件中，我添加了：

```
resolvers += "Local Maven Repository" at "file://"+Path.userHome+"/.m2/repository"

libraryDependencies ++= Seq(
  "com.whatever" % "something" % "1.0"
) 
```

重新加载 sbt 项目后，我尝试使用 sbt 项目内部的 User 对象。但我收到了这个错误：

```
> test
[info] Compiling 1 Scala source to /Users/me/projects/something-test/target/scala-2.9.1/classes...
[error] /Users/me/projects/something-test/src/main/scala/TryingUser.scala:1: object whatever is not a member of package com
[error] import com.whatever.User
[error]            ^
[error] one error found
[error] {file:/Users/me/projects/something-test/}default-1bc94a/compile:compile: Compilation failed
[error] Total time: 3 s, completed 2012-apr-25 13:44:56 
```

我错过了什么？为什么 sbt 不添加此依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:40:03.207

我看不到 sbt 或任何其他构建工具能够使用 war 文件作为依赖项。想想类路径传递给什么`javac`或`java`看起来像什么。编译器可能只会将其视为标准 zip 文件，而不会知道实际的类位于`WEB-INF/classes`.

我认为您需要将类打包为 jar 文件并将其用作依赖项。

# c# - 如何在 Web 服务上重命名 xml 序列化？

> ID：10315153
> 
> 赞同：1
> 
> 时间：2012-04-25T12:00:41.327
> 
> 标签：c#, asp.net, xml, web-services, serialization

我有一个用 C# 编写的 Web 服务，在这个项目中我添加了一个名为 ProjectDTO 的模型。我有一个返回此类的一些对象的 Web 服务，我希望我的 Web 服务在我的 xml 结果中返回一个名为 Project 的节点，而不是 ProjectDTO，我该怎么做？

我尝试在我的 ProjectDTO 类上添加一些属性，例如 XmlRoot、XmlElement，但它不起作用。

谢谢

## 编辑

```
public class ProjectDTO {
  //some properties
} 
```

我的网络服务（.asmx 文件.. 这是一个来自 asp.net 2.0 的简单网络服务）方法：

```
[WebMethod]
public ProjectDTO[] GetProjects(); 
```

我的输出xml：

```
<ArrayOfProjectDTO ...> 
 <ProjectDTO>
  <Id>...</Id>
  <Nome>...</Nome>
 </ProjectDTO>
</ArrayOfProjectDTO> 
```

我想在这个 xml 输出中将所有“ProjectDTO”所在的位置重命名为“Project”，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:41:27.253

我知道我以前编写过类似的东西，只是花了我一段时间才记起来。

这是您正在寻找的格式：

```
public class WebService : System.Web.Services.WebService {
    [WebMethod]
    [return: XmlRoot(ElementName = "Projects")]
    public ProjectDTO[] HelloWorld()
    {
        return new ProjectDTO[] { new ProjectDTO(), new ProjectDTO(), new ProjectDTO(), }; 
    }       
}

[XmlType(TypeName = "Project")]
public class ProjectDTO
{
    public string Blah { get; set; }
} 
```

关键是 XmlRootAttribute 和 XmlTypeAttribute。

# android - Android：如何对角放大和缩小视图？

> ID：10315154
> 
> 赞同：1
> 
> 时间：2012-04-25T12:00:43.203
> 
> 标签：android, animation

我正在尝试为一个视图设置动画，该视图扩展并缩小回初始大小。我尝试使用动画集添加两个动画，以便第二个动画将在第一个动画之后开始，但无法让它工作。

```
AnimationSet expandAndShrink = new AnimationSet(true);
ScaleAnimation expand = new ScaleAnimation(
     1f, 1.5f, 
     1f, 1.5f,
     Animation.RELATIVE_TO_PARENT, 0,
     Animation.RELATIVE_TO_PARENT, 0);

ScaleAnimation shrink = new ScaleAnimation(
     1.5f, 1f, 
     1.5f, 1f,
     Animation.RELATIVE_TO_PARENT, 1f,
     Animation.RELATIVE_TO_PARENT, 1f);

expandAndShrink.addAnimation(expand);
expandAndShrink.addAnimation(shrink)
expandAndShrink.setFillAfter(true);
expandAndShrink.setDuration(1000);
expandAndShrink.setInterpolator(new AccelerateInterpolator(1.0f));

view.bringToFront();
view.startAnimation(expandAndShrink); 
```

我真的很感激任何帮助让它工作。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:39:39.477

我已经修复了“展开”和“缩小”动画，并为两者添加了持续时间。你也应该添加 shrink.setStartOffset(1000); 所以第二个动画稍后开始

```
 AnimationSet expandAndShrink = new AnimationSet(true);
    ScaleAnimation expand = new ScaleAnimation(
         1f, 1.5f, 
         1f, 1.5f,
         Animation.RELATIVE_TO_PARENT, 0,
         Animation.RELATIVE_TO_PARENT, 0);
    expand.setDuration(1000);

    ScaleAnimation shrink = new ScaleAnimation(
         1.5f, 1f, 
         1.5f, 1f,
         Animation.RELATIVE_TO_PARENT, 0f,
         Animation.RELATIVE_TO_PARENT, 0f);
    shrink.setStartOffset(1000);
    shrink.setDuration(1000);

    expandAndShrink.addAnimation(expand);
    expandAndShrink.addAnimation(shrink);
    expandAndShrink.setFillAfter(true);
    expandAndShrink.setInterpolator(new AccelerateInterpolator(1.0f));

    view.startAnimation(expandAndShrink); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T16:21:19.673

我将解释我选择动画布局更改的方式。

Android 有一个特殊的 Animation 类`ScaleAnimation`，我们可以在其中平滑地展开或折叠视图。

通过对角线展开显示视图：

```
ScaleAnimation expanding = new ScaleAnimation(
   0, 1.0f,
   0, 1.0f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
expanding.setDuration(250);

view.startAnimation(expanding) 
```

使用的构造函数是：

```
ScaleAnimation(float fromX, float toX, float fromY, float toY, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue) 
```

因此，您可以相应地更改值。

例如，下面的示例将水平动画视图：

```
ScaleAnimation expanding = new ScaleAnimation(
   0, 1.1f,
   1f, 1f,
   Animation.RELATIVE_TO_PARENT, 0,
   Animation.RELATIVE_TO_PARENT, 0);
expanding.setDuration(250); 
```

您可以根据需要更改`fromX`, `toX`, `fromY`& 。`toY`

例如，如果显示视图并且您必须将其展开，则根据需要将`fromX`and放置`fromY`到`1.0f`, and 。`toX``toY`

现在，使用同一个类，您可以通过稍微扩展视图然后将其缩小到原始大小来创建更酷的显示视图效果。为此，`AnimationSet`将使用。所以它会产生一种泡沫效应。

下面的示例用于创建气泡效果以显示视图：

```
AnimationSet expandThenShrink = new AnimationSet(true);

ScaleAnimation expanding = new ScaleAnimation(
   0, 1.1f,
   0, 1.1f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
expanding.setDuration(250);

ScaleAnimation shrinking = new ScaleAnimation(
   1.1f, 1f,
   1.1f, 1f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
shrinking.setStartOffset(250);
shrinking.setDuration(120);

expandThenShrink.addAnimation(expanding);
expandThenShrink.addAnimation(shrinking);
expandThenShrink.setFillAfter(true);
expandThenShrink.setInterpolator(new AccelerateInterpolator(1.0f));

view.startAnimation(expandThenShrink); 
```

# sql-server - 如何从数据库中获取用户定义变量的值？

> ID：10315157
> 
> 赞同：2
> 
> 时间：2012-04-25T12:00:51.373
> 
> 标签：sql-server, variables, ssis

这是我的第一个 SSIS 项目，我被告知要从具有变量名称及其值的 SQL SERVER 表中获取包中所有变量的值。我找不到任何可以向我展示如何从 SQL Server 数据库表中获取值并将它们分配给 SSIS 用户定义变量的教程。

如何从表中获取变量值并分配给变量？我的包中有大约 20 个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:14:29.343

我相信您正在寻找如何在 SSIS 包中使用*包配置。*包配置使您能够将用户定义的变量的值存储在包之外，这样您就不必在只需要更改变量值时更改包。您可以将值存储在数据库表或基于 XML 的配置文件或环境变量中，还有其他选项。

以下链接可能会帮助您了解如何在 SSIS 包中使用包配置：

[**了解集成服务包配置**](http://msdn.microsoft.com/en-us/library/cc895212.aspx)

[**包配置**](http://msdn.microsoft.com/en-us/library/ms141682.aspx)

# oracle - 执行立即更改用户绑定变量

> ID：10315170
> 
> 赞同：1
> 
> 时间：2012-04-25T12:01:37.217
> 
> 标签：oracle

以下程序：

```
create or replace
PROCEDURE ChangePassword
(
    p_Name      VARCHAR2,
    p_Password  VARCHAR2
)
AS
  EXECUTE IMMEDIATE 'ALTER USER :a IDENTIFIED BY :b' USING p_Name, p_Password;
END; 
```

编译成功，但执行时：

```
exec ChangePassword('TestUser', 'newPassword'); 
```

导致错误：

```
01935\. 00000 -  "missing user or role name"
*Cause:    A user or role name was expected.
*Action:   Specify a user or role name. 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:10:18.647

您不能使用绑定变量代替标识符，例如此语句中的用户名。解析语句时需要知道标识符的值，而绑定值在解析之后、执行之前合并。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T12:13:26.743

我认为以下内容会起作用

```
create or replace PROCEDURE ChangePassword(p_Name         IN VARCHAR2,
                                           p_Old_password IN VARCHAR2,
                                           p_New_password IN VARCHAR2)
AS
  EXECUTE IMMEDIATE 'ALTER USER ' || p_name ||
                    ' IDENTIFIED BY ' || p_New_password ||
                    ' REPLACE ' || p_Old_password;
END; 
```

分享和享受。

# java - 如何在 C# WebBrowser 事件中更改弹出窗口的范围

> ID：10315172
> 
> 赞同：1
> 
> 时间：2012-04-25T12:01:43.053
> 
> 标签：java, javascript, browser

当我加载到我的 WebBrowser1 的网页打开一个链接时，它会在应用程序范围之外打开它，因此它似乎会创建一个新会话，并且不会记住任何 cookie 或登录信息。用户必须重新登录新的弹出窗口。

在我的 WebBrowser1 中，我加载了一个页面，该页面具有一个链接，该链接通过此调用调用 java 脚本函数

```
<a href="#" onclick="javascript:stats('155916','0');">stats</a> 
```

java脚本函数是这个

```
// <![CDATA[
function stats(portRowId, action) 
{
    var w, wname = 'waiting';
    w = window.open('/router.do?method=stats&action=' + action + '&portId=' + portRowId,wname);
}

// ]]> 
```

是否可以插入此调用并使其在 webbrowser1 范围内打开 /router.do?method=stats&action= 链接，以便用户不必重新登录新窗口？

我也无权访问网页的源代码，所以我无法更改`"<a ref"`或 java 脚本功能

# java - ArrayOfObjects 不能转换为 Java.util.Collection

> ID：10315174
> 
> 赞同：0
> 
> 时间：2012-04-25T12:01:51.300
> 
> 标签：java, collections, casting

我尝试用所有不同的方法在谷歌上搜索几个小时。

这里是调用 ASP .Net C# 中的 Web 服务方法的 Java 代码

```
public DefaultTableModel SelectAllProjects ()
{
    try{
    DefaultTableModel DtM;
    Collection c = (Collection)wws.selectAllProjects();
    Iterator iter = c.iterator();
    DtM = new DefaultTableModel();

    DtM.addColumn("Project ID:");
    DtM.addColumn("Project Name:");
    DtM.addColumn("Project Description:");

    Vector vec = new Vector(c.size());

    while(iter.hasNext()){

        Project p = new Project();
        p.getPId();
        p.getPName();
        p.getPDescript();
        vec.add(p);
        DtM.addRow(vec);

    }

    return DtM;
    }
    catch(Exception e)
    {
        System.out.println(e);
        return null;
    }

} 
```

这是网络服务方法......

```
[WebMethod]//Ska vara collection
public List<Project> SelectAllProjects()
{
    Controller contr = new Controller();
    List<Project> project = contr.SelectAllProjects();
    return project;
} 
```

我知道该方法有效，因为用 C# 编写的 Windows 窗体应用程序可以成功调用它。

我也知道 Java 和 Web 服务之间的联系，因为我可以调用其他方法。

我的 Catch(Exception e) 返回以下消息：

```
java.lang.ClassCastException: javaapp.ArrayOfProject cannot be cast to java.util.Collection 
```

感谢您的回答，找不到任何接近的东西。

Ps 试过`Object[] obj = (Object[])wws.selectAllProjects();` 了`Project[] proj = (Project [])wws.selectAllProjects();`

**请求自动生成的 ArrayOfProject.java 类**

```
package javaapp;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;
import java.util.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ArrayOfProject", propOrder = { "project" })
public class ArrayOfProject {
    @XmlElement(name = "Project", nillable = true)
    protected List<Project> project;

    public List<Project> getProject() {
        if (project == null) {
            project = new ArrayList<Project>();
        }
        return this.project;
    }
} 
```

代码来自我的视图类..（我按下的按钮）

```
private void btnAllProjects_actionPerformed(ActionEvent e) {
    try{
    Controller control = new Controller();
    DefaultTableModel DtM;
    DtM = control.SelectAllProjects();
    JTable selectProjectsTable = new JTable (DtM);
    }
    catch (Exception ex)
    {
        System.out.println(ex);
    }

} 
```

我最新的例外列表：

```
C:\Oracle\Middleware\jdk160_24\bin\javaw.exe -client -classpath "C:\Users\MS\Desktop\Web Services\Java Uppgift 2\.adf;C:\Users\MS\Desktop\Web Services\Java Uppgift 2\JavaApp\classes;C:\Oracle\Middleware\wlserver_10.3\server\lib\weblogic.jar;C:\Oracle\Middleware\oracle_common\modules\oracle.jrf_11.1.1\jrf.jar;C:\Oracle\Middleware\modules\com.oracle.toplink_1.0.0.0_11-1-1-5-0.jar;C:\Oracle\Middleware\modules\org.eclipse.persistence_1.1.0.0_2-1.jar;C:\Oracle\Middleware\modules\com.bea.core.antlr.runtime_2.7.7.jar;C:\Oracle\Middleware\modules\javax.persistence_1.0.0.0_2-0-0.jar;C:\Oracle\Middleware\oracle_common\modules\oracle.xdk_11.1.0\xmlparserv2.jar;C:\Oracle\Middleware\oracle_common\modules\oracle.xdk_11.1.0\xml.jar;C:\Oracle\Middleware\oracle_common\modules\oracle.nlsrtl_11.1.0\orai18n-mapping.jar" -Djavax.net.ssl.trustStore=C:\Users\MS\AppData\Local\Temp\trustStore7859653733656575754.jks javaapp.Main
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2760)
    at java.util.Arrays.copyOf(Arrays.java:2734)
    at java.util.Vector.ensureCapacityHelper(Vector.java:226)
    at java.util.Vector.insertElementAt(Vector.java:554)
    at javax.swing.table.DefaultTableModel.insertRow(DefaultTableModel.java:357)
    at javax.swing.table.DefaultTableModel.addRow(DefaultTableModel.java:333)
    at javaapp.Controller.SelectAllProjects(Controller.java:56)
    at javaapp.View.btnAllProjects_actionPerformed(View.java:103)
    at javaapp.View.access$200(View.java:24)
    at javaapp.View$3.actionPerformed(View.java:68)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6289)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6054)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4652)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:644)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:603)
    at java.awt.EventQueue$1.run(EventQueue.java:601) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:12:04.140

您需要[Arrays.asList](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)方法将数组转换为 List 即 Collection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:06:55.863

该类`javaapp.ArrayOfProject`需要实现`Collection`

作为替代方案，您可以创建一个实现 Collection 的包装器。

最简单的可能是创建一个 ArrayList，复制所有元素并使用 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:08:41.313

考虑到数组不是集合，`Arrays`类上有一个实用方法，`asList`它接受一个数组作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:11:22.740

`ArrayOfProject`是您的 SOAP 框架生成的类。它只是一个普通的 Java 类。检查它有什么吸气剂，根据使用的框架，会有一些返回数组或列表的东西。

在您的代码中编辑这一行：

```
Collection c = (Collection)wws.selectAllProjects(); 
```

至

```
Collection c = wws.selectAllProjects().getProject(); 
```

其余的将按原样工作。

# vim - 如何在 Mac OS X 上安装 Vim-CSS-Color 插件？

> ID：10315180
> 
> 赞同：1
> 
> 时间：2012-04-25T12:02:16.337
> 
> 标签：vim

我正在通过终端使用内置版本的 Vim (7.3) 运行 Mac OS Lion。

我正在尝试安装[Vim-CSS-Plugin](https://github.com/skammer/vim-css-color)。我已经安装并运行了 Pathogen，但是当我将存储库克隆到我的 bundle 目录时它不起作用。然后，我根据插件的帮助页面将 after/syntax 目录移动到`.vim/after/syntax`，但这也不起作用。

如何让这个插件在 Mac OS X 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T15:43:09.350

在 .vimrc 中设置以下变量使其也可以在终端内工作。

```
set t_Co=256 
```

参考：[https ://github.com/skammer/vim-css-color/issues/10](https://github.com/skammer/vim-css-color/issues/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:30:12.337

虽然我无法让它与内置终端一起使用，但它在[Macvim](http://code.google.com/p/macvim/)上运行得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:50:55.757

在你的 vimrc 中，确实有：

`set nocompatible`

&

`filetype plugin indent on`

&

`call pathogen#infect('~/.vim/bundle')`

放？

# c# - 具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的类工厂问题

> ID：10315181
> 
> 赞同：2
> 
> 时间：2012-04-25T12:02:18.423
> 
> 标签：c#, ms-word, asp.net-3.5

我正在使用一些互操作 dll 将数据导出到 Word 文件。早些时候我在Windows 2008 Server 中开发了应用程序，当时我可以将数据导出到Word 文件。但最近我已将我的电脑升级到 Windows 7。它在我的本地主机中运行良好。

当我在 IIS 中部署应用程序时，出现此错误：

> 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:00:32.763

我在 Windows Server 2003 中遇到了互操作库的问题。我试图通过 .NET 应用程序创建一个 excel 文件。它在本地工作，但在服务器上工作。这个链接解释了如何解决这个问题。首先，您必须在服务器上安装 MOExcel。在 DCOM 中配置 Microsoft Excel 应用程序。

[http://blog.crowe.co.nz/archive/2006/03/02/589.aspx](http://blog.crowe.co.nz/archive/2006/03/02/589.aspx)

它救了我！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T22:03:02.293

修复 DCOM Config 中 Microsoft Excel 应用程序的安全设置：

> 控制面板 > 管理工具 > 组件服务 > 计算机 > 我的电脑 > DCOM 配置 > Microsoft Excel 应用程序
> 
> 右键单击以获取属性对话框。转到安全选项卡并相应地自定义权限。

资料来源：[https ://social.msdn.microsoft.com/Forums/en-US/b6388275-b295-4e55-8c25-6d8788eac1ca/error-while-creating-excel-object](https://social.msdn.microsoft.com/Forums/en-US/b6388275-b295-4e55-8c25-6d8788eac1ca/error-while-creating-excel-object)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:14:03.420

看看[ASP.NET 和访问错误 80070005](http://forums.codeguru.com/printthread.php?t=383912&page=3&pp=15)：

> 一个。我首先从命令提示符打开 DCOMCNFG，打开组件服务，展开计算机/我的电脑/DCOM 配置。然后我选择了 Microsoft Excel 应用程序，并在结果对话框中选择了安全选项卡。在安全选项卡下，我将启动和激活权限更改为自定义、访问权限自定义和配置权限自定义。在这三个中我选择了 ASPNET 帐户。湾。然后我在 Windows 资源管理器中选择新文件夹，打开属性并在 WebSharing 选项卡下选择共享此文件夹。

或[错误：80070005](http://forums.asp.net/t/1045732.aspx/1)：

> bin 文件夹中的 .DLL 只是一个 COM 互操作程序集。实际的 COM 组件也必须安装在 Web 服务器上，因此您应该检查一下。

或[创建单词对象时出错：访问被拒绝：80070005](http://forums.asp.net/t/1027132.aspx)：

> 您只能通过手动创建的帐户访问 Office 组件，该帐户有权访问 Office 二进制文件。例如您自己的帐户。

# android - Android HTC Flyer - 使用 MotionEvents 捕捉触控笔

> ID：10315182
> 
> 赞同：1
> 
> 时间：2012-04-25T12:02:18.877
> 
> 标签：android, touchscreen, stylus-pen

我正在开发一个应用程序，旨在捕捉画布上的文字。该应用程序设计用于 HTC Flyer (Android 2.3.3)。

此设备已经安装了 Scribbler，因此我禁用了“自动启动 Scribbler 模式”，但选中了“每个应用的笔历史记录”。

在我的测试中，我发现该应用程序可以检测到我在触摸屏上的手指，但不能检测到手写笔。我按下触控笔上的按钮组合无济于事。

我的代码基于 Android 开发人员的 TouchPaint：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/TouchPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/TouchPaint.html)

我没有按照上面代码中的描述导入包

```
com.example.android.apis.graphics; 
```

在我的 Eclipse IDE 中，它报告了以下问题，建议我应该删除 Override 属性。

```
@Override
public boolean onHoverEvent(MotionEvent event) {
    return onTouchOrHoverEvent(event, false /*isTouch*/);
} 
```

所以我做了。

我已将以下内容添加到清单中。

```
<uses-configuration android:reqTouchScreen="stylus"/>
<uses-configuration android:reqTouchScreen="finger"/> 
```

该应用程序可以检测到我在触摸屏上的手指移动，但不能检测到我的手写笔。为什么？

我还注意到，在 Android 开发人员指南中，MotionEvents 指的是 getToolType，但我在 Eclipse 的“Intellisense”中看不到它。

[http://developer.android.com/reference/android/view/MotionEvent.html#getToolType%28int%29](http://developer.android.com/reference/android/view/MotionEvent.html#getToolType%28int%29)

getToolType 方法在我的 Android 代码中不可用。我想我可以使用这种方法来检查触摸输入的类型，例如手指或手写笔。

我还为 PaintView 添加了一个 onTouchListener（基于 TouchPaint 代码）。

```
this.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return touchSurface(v, event);
    }
}); 
```

触摸表面代码

```
private boolean touchSurface(View v, MotionEvent event) {
            boolean complete = true;
            int pAction = event.getAction();
            int pActionIndex = event.getActionIndex();

            Log.i("SignName", "touchSurface event fired.");
            Log.i("SignName", "Pointer Action: " + pAction + ", pActionIndex: " + pActionIndex);

            return complete;
        } 
```

当我使用手指时，会触发上述事件。当我使用手写笔时，它不会被解雇。为什么？

我想知道这个问题是否与 HTC Flyer 无关，这是因为它有一个 Scribbler 应用程序，它覆盖了我的应用程序设置，或者我的代码错误。

你能帮我么？

（更新：2012 年 4 月 27 日）我发现了问题所在。引起混乱的是专用触控笔 HTC Flyer。

我想如果这支手写笔不工作，那么任何其他手写笔也不能工作。但是，我确实尝试了不同的手写笔并且它有效。

不过，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:07:42.237

首先，您应该将 Flyer 更新为 Honeycomb (Android 3.2)，此示例也特定于 ICS (Android 4)，但您可以通过使用兼容性库并对代码进行一些小的更改来运行此示例，更多信息将在可在[http://htcdev.com](http://htcdev.com)

# c# - 打开文件对话框并使用 WPF 控件和 C# 选择文件

> ID：10315188
> 
> 赞同：198
> 
> 时间：2012-04-25T12:02:36.037
> 
> 标签：c#, wpf, textbox, openfiledialog

我有一个`TextBox`named`textbox1`和一个`Button`named `button1`。当我单击时，`button1`我想浏览我的文件以仅搜索图像文件（类型 jpg、png、bmp...）。当我选择一个图像文件并在文件对话框中单击确定时，我希望将文件目录写成`textbox1.text`这样：

```
textbox1.Text = "C:\myfolder\myimage.jpg" 
```

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-04-25T12:08:57.880

像这样的东西应该是你需要的

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    // Create OpenFileDialog 
    Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

    // Set filter for file extension and default file extension 
    dlg.DefaultExt = ".png";
    dlg.Filter = "JPEG Files (*.jpeg)|*.jpeg|PNG Files (*.png)|*.png|JPG Files (*.jpg)|*.jpg|GIF Files (*.gif)|*.gif"; 

    // Display OpenFileDialog by calling ShowDialog method 
    Nullable<bool> result = dlg.ShowDialog();

    // Get the selected file name and display in a TextBox 
    if (result == true)
    {
        // Open document 
        string filename = dlg.FileName;
        textBox1.Text = filename;
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-31T16:50:10.423

```
var ofd = new Microsoft.Win32.OpenFileDialog() {Filter = "JPEG Files (*.jpeg)|*.jpeg|PNG Files (*.png)|*.png|JPG Files (*.jpg)|*.jpg|GIF Files (*.gif)|*.gif"}; 
var result = ofd.ShowDialog();
if (result == false) return;
textBox1.Text = ofd.FileName; 
```

# get - 将 HTTP 请求批量加载到 JMeter

> ID：10315189
> 
> 赞同：0
> 
> 时间：2012-04-25T12:02:43.730
> 
> 标签：get, jmeter, bulk-load

我正在尝试编写一个用于测试 REST 服务器的 JMeter 测试计划。服务器当前支持大约 80 个 GET 请求（加上几个 POST 和 PUT 请求）。是否有任何简单的方法可以为所有 GET 请求创建 HTTP 请求采样器，而无需手动执行它们？我可以将 URL 放在 CSV 文件中并批量加载它们吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:24:50.903

当然。
您可以使用[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)从您的 csv 文件中读取请求详细信息 - 在循环中，在[While Controller](http://jmeter.apache.org/usermanual/component_reference.html#While_Controller)下，条件 = 直到文件结尾。

作为与您的请求详细信息一起使用的 http 采样器，您可以使用以下之一：

1.  [HTTP 请求](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)- jmeter 开箱即用的采样器；
    主机名、url/路径、协议可以指定为从 csv 条目中提取的变量，但请求方法是从列表中选择的 - 因此在使用此采样器的情况下，您必须设置多个循环和 csv 文件 - 分别用于 GET / POST / PUT .
2.  [HTTP 原始请求- 来自](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)[jmeter-plugins 的](http://code.google.com/p/jmeter-plugins/)自定义采样器；
    在这种情况下，您可以完全定义来自 csv 的请求的所有详细信息和参数。

通用架构将如下所示：

```
. . .
**While Controller**
Condition = ${__javaScript("${rMethod}"!="<EOF>",)}
+ **CSV Data Set Config**
  Filename = requests.csv
  Varible names = rMethod,rHost,rPort,rPath...
+ **HTTP Request / HTTP Raw Request**
. . . 
```

# polygon - 单调多边形的德劳内三角剖分

> ID：10315192
> 
> 赞同：2
> 
> 时间：2012-04-25T12:02:57.170
> 
> 标签：polygon, triangulation, delaunay

我在整个互联网和科学数据库中搜索了一篇关于单调多边形的 Delaunay 三角剖分的论文。我不是在寻找任意的多边形三角剖分，而是在寻找 Delaunay 三角剖分。有人知道这样的出版物，其中单调多边形是德劳内三角剖分的吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:39:25.443

Delaunay 三角剖分适用于一组点，而不适用于给定的形状（例如多边形）。如果您有特定的三角剖分形状，您正在寻找受约束的 delaunay 三角剖分......我实现了 Bowyer-Watson 算法，并带有约束来对给定的多边形进行 delaunay 三角剖分（不一定是单调的）。我的实现是[OgreProcedural](http://code.google.com/p/ogre-procedural/)的一部分。

在实施之前，我阅读了以下有关该主题的论文：

*   [http://www.geom.uiuc.edu/~samuelp/del_project.html](http://www.geom.uiuc.edu/~samuelp/del_project.html)
*   [http://www.cg.tuwien.ac.at/hostings/cescg/CESCG-2004/web/Domiter-Vid/](http://www.cg.tuwien.ac.at/hostings/cescg/CESCG-2004/web/Domiter-Vid/)

# java - 当我使用 Ant 构建具有多个库的 Android 项目时，我的构建失败

> ID：10315193
> 
> 赞同：4
> 
> 时间：2012-04-25T12:02:57.037
> 
> 标签：java, android, ant, jenkins

我有一个包含总共 10 个项目的应用程序：3 个 java 项目、6 个 Android 项目和一个 Android 应用程序项目。我可以在 Eclipse 中毫无错误地构建它们，但是当我在 Jenkins 中构建它们时，在最后一个项目的编译过程中构建失败。

这是我用来构建的 shell 命令。

需要说明的是，DrawCard 和 CameraModule 是 CC_library3.0.3 调用的库，CC_library3.0.3 是 MainApp 调用的库项目。

```
android update lib-project -p ./DrawCard  -t "android-15"  
android update lib-project -p ./AppStar  -t "android-15"
android update lib-project -p ./CameraModule   -t "android-15"
android update lib-project -p ./CC_library3.0.3   -t "android-15" 
android update lib-project -p ./ISAd  -t "android-15"
android update lib-project -p ./Payment  -t "android-15"
android update project -p ./MainApp -t "android-15" -l ../CC_library3.0.3 -l ../ISAd -l ../Payment

echo 'source.dir=../android-vcard/src' > ./DrawCard/ant.properties
echo 'source.dir=../TianShu/src' > ./MainApp/ant.properties
echo 'source.dir=../Log4A/src' >> ./MainApp/ant.properties
cd ./MainApp
ant all clean debug 
```

在这些命令之后，在构建 MainApp 时，该过程失败并显示以下消息：

```
[javac]Compiling 22 source files to /var/lib/jenkins/foobar/bin/classes
[javac]A.java : package a.b.c does not exist
....
[javac]B.java : can not find symble

.....
BUILD FAILED 
```

我不明白为什么我会收到这个错误。我检查了`/bin`所有 6 个 lib 项目的文件夹。每个都包含一个`classes.jar`文件。为什么会发生这种情况，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:22:50.610

我认为您不能`android update project`像以前那样在同一个调用中提交多个库。我认为每个条目都会`-l`默默地覆盖以前的条目。尝试为每个库运行一次命令：

```
android update project -p ./MainApp -t "android-15" -l ../CC_library3.0.3
android update project -p ./MainApp -t "android-15" -l ../ISAd
android update project -p ./MainApp -t "android-15" -l ../Payment 
```

之后打开你的`./MainApp/project.properties`并确保你有以下条目：

```
android.library.reference.1=../CC_library3.0.3
android.library.reference.2=../ISAd
android.library.reference.3=../Payment 
```

# java - 从 xml 文档中删除具有无效标记名称的节点

> ID：10315195
> 
> 赞同：0
> 
> 时间：2012-04-25T12:02:58.253
> 
> 标签：java, xml, saxon

我使用 Saxon XSLT2 处理器（使用 Java + Saxon S9API）转换 xml，并且必须处理 xml 文档作为源，其中包含无效字符作为标记名称，因此无法由文档生成器解析。

例子：

```
<A>
   <B />
   <C>
      <D />
   </C>
   <E!_RANDOM_ />
   < />
</A> 
```

代码：

```
import net.sf.saxon.s9api.*;

[...]

/* XSLT Processor & Compiler */
proc = new Processor(false);

/* build document from input*/
XdmNode source = proc.newDocumentBuilder().build(new StreamSource(input)); 
```

错误：

```
Error on line X column Y 
SXXP0003: Error reported by XML parser: Element type
"E" must be followed by either attribute specifications, ">" or "/>". 
```

*感叹号*和只是*空格*的标签名称是我目前唯一的无效标签。我正在寻找更强大的解决方案，而不仅仅是删除（格式化）xml 的整行。

经过一番折腾，我可以想出一个正则表达式来识别无效字符串，但会在删除包含属性和子节点的节点时遇到困难。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:19:09.147

如果输入包含无效标签，则它不是 XML。最好通过将这些称为非 XML 文档而不是 XML 文档来确立您的思维定势；这有助于明确处理非 XML 文档，您需要非 XML 工具。（忘记“节点” - 在文档被解析之前没有节点，并且在将其转换为格式良好的 XML 之前无法解析）。要将非 XML 转换为 XML，通常需要使用擅长文本操作的非 XML 工具，例如 Perl。当然，从源头解决问题要好得多：如果人们以私有的非 XML 格式生成数据，那么 XML 的所有好处都将丧失。

# android - 创建时图库视图未填满整个屏幕

> ID：10315197
> 
> 赞同：0
> 
> 时间：2012-04-25T12:03:04.540
> 
> 标签：android, view, position, gallery

我已经使用本[教程](http://developer.android.com/resources/tutorials/views/hello-gallery.html)创建了水平图库视图 但是当创建图库时，它从屏幕的一半开始，在屏幕截图下方

![在此处输入图像描述](../Images/be5860052eae7d344fe0038a9e8c1703.png)

我希望当画廊视图开始时它应该从屏幕左侧而不是中心开始。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:06:37.130

更好的逃避方式，从第二项标记焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:09:57.090

尝试在xml中使用--

机器人：重力=“左”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:15:21.583

在您的`getView`功能中，您可以设置应该居中的图像。所以你可以设置最后一张图片如下

```
imageView.setImageResource(mImageIds[position]); 
```

我做过的事情

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
ImageView imageView = new ImageView(mContext);
imageView.setImageResource(mImageIds[position]);
imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
imageView.setBackgroundResource(mGalleryItemBackground);

return imageView;
} 
```

# php - 在 Symfony 1.4 ProjectConfiguration 类中使用 loadHelpers I18N 有缺点吗？

> ID：10315202
> 
> 赞同：1
> 
> 时间：2012-04-25T12:03:23.950
> 
> 标签：php, internationalization, symfony-1.4

在我的 Symfony 1.4 项目中，直到现在，以下是我在操作中使用 i18n setflash 消息的方式：

```
$message = $this->getContext()->getI18N()->__('message’);
$this->getUser()->setFlash('notice', $message); 
```

但我刚刚找到了一种最简单的方法。这是我在项目配置类中使用的代码：

```
public function setup()
{
  $this->loadHelpers(array('I18N')); 
} 
```

然后是我在操作中使用的代码：

```
$this->getUser()->setFlash('error', __('message')); 
```

对我来说，这很方便，因为我不必到处使用 getContext->getI18N 但我想知道使用这种方法是否有缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:34:32.250

I always use this method in many projects and I didn't see any drawbacks.

Helpers are here to give us a library of useful functions. Some helper's functions return html so (impov) they are dedicated to the template, but in case of I18N or Date, it can be useful to have them in an action.

And if you don't want to load your helper in a global view, you can use:

```
sfApplicationConfiguration::getActive()->loadHelpers(array('I18N')); 
```

# windows - 使用你自己的 msvcrt.dll 而不是 system32 的那个

> ID：10315203
> 
> 赞同：0
> 
> 时间：2012-04-25T12:03:31.217
> 
> 标签：windows, dll, msvcrt

我有一个带有一些依赖 dll 的 cpp 程序（对我来说是黑匣子）。此 dll 之一依赖于 windows/system32/ 的 MSVCRT.dll。

我的程序在 win vista 和更新版本上运行，但不在 win xp 上运行，因为 msvcrt.dll 太旧并且没有某些功能。

我想在我的程序中使用我自己的 msvcrt.dll（来自 win Vista），但我不知道将这个告诉需要 msvcrt 的依赖 dll（我没有它的来源）。

谢谢 ！

-- 测试 --

我在包含我的应用程序的文件夹中加入了一个更新的 msvcrt.dll（实际上是一个 .dll），dependy walker 告诉我它仍然链接到 system32/msvcrt.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:46:23.247

所以，你的答案是对的，谢谢！

对我来说特别的问题是我的 minGw 版本。最新版本的 minGW 无法为 windows xp 编译代码。由于 MSVCRT.dll 依赖项存在问题，它可以编译但无法运行。

这似乎是一个错误，并且存在问题，所以希望它会在未来几个月内得到解决。

# java - 如何通过 Hibernet Java Struts 获取/优化大量数据的 PAGINATION

> ID：10315204
> 
> 赞同：1
> 
> 时间：2012-04-25T12:03:43.253
> 
> 标签：java, jsp, struts2, pagination

当前问题：我们目前正试图从数据库中获取超过 500k（五十万）条记录，然后我必须在 JSP 上每页显示 50 条记录（使用 struts 2）。问题是加载需要很长时间，甚至需要一些时间。一旦加载，我们就可以顺利导航。

需要的解决方案：喜欢根据分页定义的记录加载有限的记录，例如：每页最多 100 条记录。有没有人在 struts 或类似框架中实现了类似的功能？我也不想一次获得所有记录。请指导我如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:20:26.240

您可以使用 jquery 数据表。它具有用于 ajax 加载的分页功能。因此，当您单击下一页时，它会从数据库中加载下一条记录。为此，您需要添加 Jquery 库，如`jquery.dataTables.min.js`, `jquery-ui-1.8.10.custom.min.js` , `jquery-1.4.4.min.js`, `jquery-1.4.2.min.js`,`jquery-ui-1.8.10.custom.css`

**JSP代码**

```
<table id="reqAllQueriesTable" cellpadding="0" cellspacing="0" border="0" class="display" style="width: 100%;">
    <thead>
    <tr>
    <th style="display: none"></th>
    <th>&nbsp;</th>
    <th><spring:message code='Name'/></th>
    <th><spring:message code='runDate'/></th>
    th><spring:message code='noOfRec'/></th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

**JavaScript**

```
var oTable = $('#reqAllQueriesTable')
                .dataTable(
                        {
                            "bProcessing": true,
                            "bServerSide": true,
                            "sAjaxSource": "query/getQuery",
                            "bPaginate" : true,
                            "bScrollCollapse" : true,
                            "iDisplayLength" : 10,
                            "bFilter" : true,
                            "bJQueryUI" : true,
                            "sPaginationType" : "full_numbers",
                            "oLanguage" : {
                                "sLengthMenu" : "Display _MENU_ records per page",
                                "sZeroRecords" : "No  Queries found",
                                "sInfo" : "Showing _START_ to _END_ of _TOTAL_ records",
                                "sInfoEmpty" : "Showing 0 to 0 of 0 records",
                                "sInfoFiltered" : "(filtered from _MAX_ total records)"
                            },
                            "aaSorting" : [ [ 3, "desc" ] ],
                            "aoColumns" : [/*Id*/{
                                "bSearchable" : false,
                                "bVisible" : false
                            },
                            /*Id RadioButton*/{
                                "bSearchable" : false,
                                "bSortable" : false
                            },
                            /*Name*/null,
                            /*Run Date*/{
                                "sType" : "date"
                            },                          
                            {
                                "fnRender" : function(oObj) {

                                return '<input type="radio"  name="Id" value= "' + oObj.aData[0] + " "/>';
                                },
                                "aTargets" : [ 1 ]
                            }]
                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:10:51.543

您可以根据某个参数在每个请求中仅获取 100 条记录。一次获取所有记录需要很长时间。我已经使用查询和一些参数实现了分页。

# image - 如何在 cakephp 的电子邮件中添加公司徽标？

> ID：10315208
> 
> 赞同：0
> 
> 时间：2012-04-25T12:04:04.963
> 
> 标签：image, email, cakephp

我已经为邮件模板创建了页面并为预览模板设置了按钮。

我已经从本地机器设置了图像路径，例如，

```
 src="/projectname/app/webroot/img/logo.JPG" 
```

当我预览该模板时，它会显示徽标。

当我发送邮件时使用该模板时，电子邮件中不显示图像。

那么任何人都可以告诉我可能是什么问题，或者我错过了类似 mime 类型的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:31:49.050

这行不通。电子邮件是在客户端中打开的，“/projectname/app/webroot/img/logo.JPG”之类的路径对该客户端意味着什么？什么是域？

您可以将域添加到 SRC，例如 src="http://example.com/projectname/app/webroot/img/logo.JPG"。但默认情况下不会显示，因为这是一个安全风险。想象一下垃圾邮件发送者在每封电子邮件中包含 src="http://example.com/feedback?id=12345" 之类的图像，其中 ID 用于标识邮件发送到的每个电子邮件地址。每个下载此图像的客户都将确认收到此电子邮件，让垃圾邮件发送者知道您正在阅读他们的垃圾邮件。大多数电子邮件客户端都会明确询问您是否应该下载邮件中提到的图像。

另一种解决方案是将每封电子邮件作为电子邮件的附件包含在内，然后您可以将其称为“内联”图像。这不需要外部连接并且安全风险较小，客户端默认情况下大多允许这样做。

我已经用谷歌搜索了一个据称也支持内联的组件，但您也可能会找到其他组件：http: [//bakery.cakephp.org/articles/CraZyLeGs/2006/12/18/swiftmailer-component-tutorial](http://bakery.cakephp.org/articles/CraZyLeGs/2006/12/18/swiftmailer-component-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:55:21.920

在电子邮件中，您必须使用完整路径，而不是相对路径。要在 CakePHP 中轻松做到这一点，请使用：`FULL_BASE_URL`常量，`HTML Helper`如下所示：

```
<?php
echo $this->Html->image(
    FULL_BASE_URL . $photo['Photo']['path'].$photo['Photo']['filename']
);
?> 
```

（显然这可以在一行中完成，但为了便于在 StackOverflow 上阅读，我将其分解）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T22:56:41.967

电子邮件客户端需要图像的绝对路径；使用 HTML 助手附加完整的基础：

```
<?= $this->Html->image("logo.JPG", array('fullBase' => true)) ?> 
```

请注意，`/projectname/app/webroot/img/`使用 HTML 帮助程序时不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:11:35.153

这可能是因为当您在本地机器上测试时，该路径很好。但是，如果您向自己发送电子邮件（例如 gmail），您的浏览器可能会在某处`http://mail.google.com/gmail/projectname/app/webroot/img/logo.JPG`寻找图像，但不会在那里找到您的图像。因此，您需要将图像源设置为`http://localhost/projectname/app/webroot/img/logo.JPG`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-26T05:51:01.307

如果您使用的是 CakePHP v1.2 或 1.3（是的，它们已被弃用 - 但嘿，有人可能会觉得这很有用），您需要将 Content-ID 标头添加到要附加到电子邮件的图像中，以便您可以通过以下方式引用它在消息中内联使用 cid 时。打开 cake 安装的 email 控制器，在 __attachFiles() 方法中添加这一行：

$this->__message[] = 'Content-ID: <' 。基本名称（$文件）。'>';

然后，您可以像这样在模板中添加图像：

v1.2 和 1.3 中 email 类的 attachfile 方法只接受路径，没有更高版本的附加功能，因此“hack”

# full-text-search - 没有空格的lucene.net搜索查询

> ID：10315210
> 
> 赞同：0
> 
> 时间：2012-04-25T12:04:09.850
> 
> 标签：full-text-search, lucene.net

我需要搜索 lucene.net 文档中包含字母之间的空格。

例子

文件 1：54 658 1 22

文件 2：54658 122

文件3：5 4658122

查询：54658122

我需要返回包含示例中查询的所有文档是所有文档。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:56:37.403

在 Lucene 索引中存储数据时，存储已从源数据中删除空格的文档字段 - 并索引该字段。搜索时，去掉空格并在没有空格的字段上搜索。如果空格在输出中很重要，我建议您也将原始数据放在 Lucene 文档的单独字段中。这样，您可以在找到具有其他字段的文档后将其用于用户显示。

# javascript - $.getJSON 在 Internet Explorer 中不起作用

> ID：10315211
> 
> 赞同：10
> 
> 时间：2012-04-25T12:04:11.043
> 
> 标签：javascript, jquery, internet-explorer, getjson

我正在使用以下代码从 JSON 中获取数据。

```
 $(document).ready(function()
 {
   $.getJSON("http://www.example.com/data.php?id=113&out=json", function(data) {

        $.each(data.issue.page, function(i,item) {
            imagesJSON[i] = item["@attributes"];
        });

       alert(imagesJSON.length);
    });
 }); 
```

它适用于 Mozilla、Chrome 和其他浏览器，但不适用于 IE。（不在任何版本中）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T12:13:33.950

[`$.getJSON`](https://api.jquery.com/jquery.getjson/)有[在 IE 中缓存结果](https://web.archive.org/web/20170829225346/http://i.justrealized.com/2008/jquerys-getjson-failing-randomly-in-internet-explorer)的趋势。改为使用[`$.ajax`](https://api.jquery.com/jquery.ajax/)。

在您的情况下，相关调用应该是这样的：

```
// Not really sure if you've forgot to var 
var imagesJSON = [];

$.ajax({
  url: "www.example.com/data.php?id=113&out=json",
  cache: false,
  dataType: "json",
  success: function(data) {
    $.each(data.issue.page, function(i,item) {
        imagesJSON[i] = item["@attributes"];
    });

    alert(imagesJSON.length);
  },
  error: function (request, status, error) { alert(status + ", " + error); }
}); 
```

确保你有`cache: false`.

* * *

**更新：**

OP 实际使用的请求 URL 似乎是主机上的配置问题。使用 IE 网络浏览器直接访问 url 会导致主机中止。您只能将问题报告给主机，例如向主机的网站管理员发送电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-20T14:57:40.187

我在页面上遇到了同样的错误，我添加了这些行：

```
<!--[if lte IE 9]>
<script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/jquery-ajaxtransport-xdomainrequest/1.0.0/jquery.xdomainrequest.min.js'></script>
<![endif]--> 
```

它最终对我有用；) IE9 不再出错

这篇文章帮助我[对 WebService 的 jQuery 调用返回“无传输”错误](https://stackoverflow.com/questions/5241088/jquery-call-to-webservice-returns-no-transport-error/21237086#21237086)

# mysql - Mysql查询检查2列

> ID：10315220
> 
> 赞同：-2
> 
> 时间：2012-04-25T12:04:34.633
> 
> 标签：mysql

所以我有 5 列 ID、姓名、国家、付款 1 和付款 2 有没有我可以说的方法 `Select * from payment where payment1 = payment2`？

以及当 payment1 与 payment 2 不同时？所以像这样

`Select * from payment where payment1 != payment2`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:08:05.073

你的意思是

> 选择 * from payment where payment1 <> payment2

# php - Drupal - 如何更改内容类型的默认查看/编辑操作名称

> ID：10315225
> 
> 赞同：0
> 
> 时间：2012-04-25T12:04:58.010
> 
> 标签：php, drupal, drupal-6, drupal-7, drupal-modules

我正在使用drupal 7。首先请参考我的屏幕截图以了解我在说什么。 [http://www.karya.gisla.in/scr.png](http://www.karya.gisla.in/scr.png)

假设我的内容类型是文章。当我们创建文章时，对于经过身份验证的用户，节点显示主要选项卡，即：查看和编辑。我只想更改/编辑它说：查看文章和编辑文章。

注意：仅适用于特定的内容类型。即其他内容类型说页面将默认显示：查看和编辑。

任何想法如何实现这一目标。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:31:17.800

以下代码可以解决问题。将其粘贴到您的主题 template.php 中并将 YOURTHEMENAME 更改为...您的主题名称。也许在这个函数中使用 dpm($vars) 来查看 $vars 中的信息种类。这应该可以帮助您下​​次更快地达到目的。

[编辑：] 感谢 Ben 指出这一点！这是一个更新的版本：

```
function YOURTHEMENAME_preprocess_page(&$vars) {
  if ($vars['node']->type == 'article') {
    foreach($vars['tabs']['#primary'] AS $index => $tab) {
      if($tab['#link']['title'] == t('View')) {
        $vars['tabs']['#primary'][$index]['#link']['title'] = t('View Article');
      }

      if($tab['#link']['title'] == t('Edit')) {
        $vars['tabs']['#primary'][$index]['#link']['title'] = t('Edit Article');
      }
    }
  }
} 
```

玩得开心，马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:44:59.007

[字符串覆盖模块](http://drupal.org/project/stringoverrides)可能会有所帮助，但我不确定它是否处理角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:26:39.063

您可以将以下功能放入主题的模板文件中并替换`YOURTHEME`为主题名称以更改选项卡链接。

`$nodes`是一个多维数组，其中第一级键是您希望替换选项卡的内容类型，第二级键值组合分别是路径和替换模式。设置替换模式`''`将删除选项卡。

```
/**
 * Implements hook_menu_local_tasks_alter().
 */
 function YOURTHEME_menu_local_tasks_alter(&$data, $router_item, $root_path) {
    $nodes = array(
        'article'   =>  array(
            'node/%/view'   =>  'View Article',
            'node/%/edit'   =>  'Edit Article'
        )
    );

    foreach ($router_item['page_arguments'] as $key => $argument) {
        if (is_object($argument) && array_key_exists( $router_item['page_arguments'][$key]->type, $nodes )) {
            foreach( $nodes[$router_item['page_arguments'][$key]->type] as $path => $new_title ) {
                foreach ($data['tabs'][0]['output'] as $key => $value) {
                    if ($value['#link']['path'] == $path) {
                        if( !$new_title ) {
                            unset($data['tabs'][0]['output'][$key]);
                        } else {
                            $data['tabs'][0]['output'][$key]['#link']['title'] = $new_title;
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T11:36:31.043

有一个模块： [https](https://drupal.org/project/tabname_tweaker) : //drupal.org/project/tabname_tweaker ;-)

# xmpp - 如何将数据包发送到子域

> ID：10315229
> 
> 赞同：2
> 
> 时间：2012-04-25T12:05:20.637
> 
> 标签：xmpp, openfire

我有两个 xmpp 服务器实例：`mydomain.com`并且，如果我从to`node1.mydomain.com`发送消息，则 服务器认为这是 jabber id 的所谓组件部分并且不发送它。 `user1@mydomain.com``user2@node1.mydomain.com``mydomain.com``node1`

如何告诉我的 xmpp 服务器我想向远程用户发送消息？在 xmpp 标准中是否有可能这样做，或者它仅依赖于实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:43:36.397

我认为将一台服务器设为另一台服务器的子域是无效的。我认为您应该将服务器重命名为 node2.mydomain.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:53:42.553

我发现这是我的 xmpp 服务器错误（我使用 Openfire），这里有一个补丁修复[它](http://issues.igniterealtime.org/browse/JM-1203)。

任何 xmpp 服务器的最佳实践是检查此类组件是否已注册，如果未注册，则将数据包视为发送到远程 xmpp 服务器。

# java - JPA 合并，包括子项

> ID：10315230
> 
> 赞同：0
> 
> 时间：2012-04-25T12:05:25.460
> 
> 标签：java, jpa, merge, persistence

我有一个包含地址列表的实体（人）。用户界面实际上只允许每个名称输入一个地址。

用户可以创建一个人，然后添加地址。在数据库中，我有一个人行和一个地址行。然后，用户可以通过 UI 更新地址。我在实体管理器上调用合并，以便使用同一个人。问题是地址没有合并，而是添加了一个新行。因此我有一个人行和两个地址行。只有第二个地址行有效。

我对这种关系的代码是：

```
@OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE}, mappedBy = "person")
@OrderBy("id asc")
private List<Address> addresses; 
```

我可以添加任何注释来强制合并孩子吗？还是我必须自己手动执行此操作？

理想情况下，在上面的场景中，我会在 Person 表中保留一行，在地址表中保留一行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:34:25.130

如果 Id 与现有对象匹配，merge() 将合并到现有对象中。确保地址的 Id 相同。

此外，如果您只有一个地址，为什么要使用 OneToMany，只需使用 OneToOne。

# python - Eclipse / PyDev 覆盖 @sys，找不到 Python 64 位解释器

> ID：10315232
> 
> 赞同：2
> 
> 时间：2012-04-25T12:05:27.583
> 
> 标签：python, linux, eclipse, pydev

我正在使用以下设置的多用户环境中工作：

*   Linux 64位环境（用户可以登录不同的服务器）。
*   Eclipse (IBM Eclipse RSA-RTE) 32 位。所以 Java VM、Eclipse 和 PyDev 是 32 位的。
*   Python 3 解释器目前仅适用于 64 位。

在 PyDev 的首选项中，我想设置 Python 解释器的路径，如下所示：

/app/python/@sys/3.2.2/bin/python

在 Eclipse/PyDev 中，*@sys*指向*i386_linux26*即使系统实际上是*amd64_linux26*。因此，如果我没有明确编写*amd64_linux26*而不是*@sys*，PyDev 将无法找到仅适用于 64 位的 Python 3 解释器。该链接在 Eclipse/PyDev 之外按预期工作，例如在终端中。

 ***任何想法如何强制 Eclipse/PyDev 使用*@sys*的真正价值？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:15:12.550

我真的不认为在 PyDev 方面可以做任何事情......似乎@sys 是根据您正在运行的进程类型（而不是您的系统）解决的，所以，如果您使用 64 位 vm （我认为）它应该工作......

除此之外，您可能必须提供实际路径而不是使用@sys ...***

# c - C 中的后台进程（守护进程）不是 execvp() -ing

> ID：10315240
> 
> 赞同：3
> 
> 时间：2012-04-25T12:05:57.103
> 
> 标签：c, unix, process, background, exec

所以，我正在尝试运行一个后台进程并从中执行 execvp。当我输入 cp /path/file /var/tmp 时，该过程不会复制文件。

这是我的参考代码：

```
void cmd_bg(char command[])
{
        pid_t process_id = 0;
        pid_t sid = 0;
        char* argv[512];
        getArgv(command,argv);
        // Create child process
        process_id = fork();
        // Indication of fork() failure
        if (process_id < 0)
        {
                printf("fork failed!\n");
                // Return failure in exit status
                exit(1);
        }
        // PARENT PROCESS. Need to kill it.
        if (process_id > 0)
        {
                printf("process_id of child process %d \n", process_id);
                // return success in exit status
                exit(0);
        }
        //unmask the file mode
        umask(0);
        //set new session
        sid = setsid();
        if(sid < 0)
        {
                // Return failure
                exit(1);
        }
        // Change the current working directory to root.
        chdir("/");
        // Close stdin. stdout and stderr
        close(STDIN_FILENO);
        close(STDOUT_FILENO);
        close(STDERR_FILENO);

        execvp(argv[0],argv);

        }
}
void getArgv(char command[], char* argv[512])
{
        char *token;
        int count = 0;
        int pid = 0;
        int ex = 0;
        char *absPath;
        char pwdtemp[512];
        strcpy(pwdtemp,pwd);

        token = strtok(command, " ");
        while(token!=NULL)
        {
                argv[count++] = token;
                printf("%s\n",argv[count-1]);
                token = strtok(NULL," ");
        }
        argv[count] = '\0';
} 
```

我真诚地希望有人能帮助我。谢谢！

**编辑**：我找到了解决方案。我不能自我回答，因为我还没有 100 次代表。无论如何，对于未来可能会查看此主题的人：

好的。我解决了这个问题。

首先我注释掉了

```
close(STDIN_FILENO);
close(STDOUT_FILENO);
close(STDERR_FILENO);
chdir("/"); 
```

接下来，我没有直接调用 cmd_bg，而是创建了：

```
void temp1(char command[])
{
    int pid = fork();
    if(pid==0)
        cmd_bg(command);

    else
        waitpid(-1, NULL, 0);
} 
```

它现在似乎工作了！非常感谢您的投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:25:49.483

我会检查 execvp 是否返回（它只在错误时返回），并查看它产生的 errno。这可能会帮助您追踪问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:00:28.987

你有没有机会调用你的程序`cp`？如果是这种情况，您`execvp()`将一遍又一遍地调用该程序，而不是`/bin/cp`. 获得完整的代码也很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:22:10.650

你试过不关闭标准输入、标准输出、标准错误吗

# php - php HSL配色方案：制作图例

> ID：10315241
> 
> 赞同：0
> 
> 时间：2012-04-25T12:06:00.957
> 
> 标签：php, html, css, colors, hsl

好的，所以我创建了一个配色方案，以突出显示输入数据（文本）的某些部分。

但是我需要制作一个 Legend ，告诉用户每种颜色的含义。这就是我到目前为止所拥有的：`/*输入*/

```
<div style="text-color: hsl($col,35%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,45%, 50%);">/*input*/</div>

<div style="text-color: hsl($col,50%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,55%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,60%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,70%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,80%, 100%);">/*input*/</div>

    <div style="text-color: hsl($col,90%, 100%);">/*input*/</div>

<div style="text-color: hsl($col,100%, 100%);">/*input*/</div> 
```

` 其中 input- 将是颜色的标签，例如这意味着强结果。$col 是一个每次都会改变颜色的变量，例如 0 = 红色等。

我需要知道如何将我在这里的颜色变成一个图例，它位于一个 html 页面上。

请问有什么帮助吗？

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:51:15.653

我猜你正试图用颜色的实际名称替换你的 /*输入*/ 占位符，即栗色、黑色、黄色等。您可能最终会编写自己的替换代码。颜色名称可在此处[http://www.imagemagick.org/script/color.php](http://www.imagemagick.org/script/color.php)或此处[http://www.w3schools.com/cssref/css_colornames.asp](http://www.w3schools.com/cssref/css_colornames.asp)获得。如果你有 ImageMagick，你可以创建单像素图像并使用[http://www.php.net/manual/en/imagickpixel.getcolorasstring.php](http://www.php.net/manual/en/imagickpixel.getcolorasstring.php)来检索颜色名称，据我所知 - 你应该缓存结果，不过...我不知道任何其他内置函数，但您可以检查一些类存储库，如 phpclasses.org。

希望有帮助，斯特凡

# tsql - TSQL：使用可以有两个值的参数执行过程

> ID：10315242
> 
> 赞同：0
> 
> 时间：2012-04-25T12:06:01.340
> 
> 标签：tsql, stored-procedures, parameters

大家好，

我想执行以下过程：

```
EXECUTE MYDB.dbo.MYPROCEDURE 
        @gender='male',
        @status='single' 
```

状态可以是单身、离婚或已婚。我需要执行所有单身和离婚男性的程序。

我可以这样做吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:09:41.557

最好的方法是将存储过程更改为表值函数。然后你可以调用它两次并将所有结果联合起来得到一个结果集。另一种方法是只调用存储过程两次，然后自己将结果相加。

除非您可以返回两个结果集（通过执行该语句两次），否则您将需要对您的 SQL 语句进行某种修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:08:49.363

除非你重写程序，否则这是不可能的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:09:17.073

如果不更改程序，这是不可能的。

一种选择是将值设置为`singledivorced`并具有以下`WHERE`子句：

```
WHERE [status]=@status
OR (@status='singledivorced' AND ([status]='single' or [status]='divorced')) 
```

# java - Arrayindex 越界 android

> ID：10315246
> 
> 赞同：0
> 
> 时间：2012-04-25T12:06:18.540
> 
> 标签：java, android

我采用了一个字符串数组，它以“2012-04-26T08:38:00”的格式存储日期。我需要两个时间差，所以我从“ **T** ”中拆分字符串并将其存储在数组中，所以现在

```
at array index 0 = 2012-04-26
and array index 1 = 08:38:00 
```

现在从我用“：”分割的第一个索引开始，所以它存储起来像

```
[0] = 08
[1] = 38
[2] = 00 
```

现在，当我从中减去当前时间时，昨天它给了我很好的输出，但现在它引发了错误。

```
 04-25 17:32:34.103: WARN/System.err(4292): java.lang.ArrayIndexOutOfBoundsException: index=1 length=1
04-25 17:32:34.103: WARN/System.err(4292):     at com.housedisplay.ListViewCustomAdapter.getView(ListViewCustomAdapter.java:83)
04-25 17:32:34.103: WARN/System.err(4292):     at android.widget.AbsListView.obtainView(AbsListView.java:1964)
04-25 17:32:34.113: WARN/System.err(4292):     at android.widget.ListView.makeAndAddView(ListView.java:1756)
04-25 17:32:34.113: WARN/System.err(4292):     at android.widget.ListView.fillDown(ListView.java:656)
04-25 17:32:34.113: WARN/System.err(4292):     at android.widget.ListView.fillFromTop(ListView.java:716)
04-25 17:32:34.113: WARN/System.err(4292):     at android.widget.ListView.layoutChildren(ListView.java:1609)
04-25 17:32:34.123: WARN/System.err(4292):     at android.widget.AbsListView.onLayout(AbsListView.java:1794)
04-25 17:32:34.123: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.123: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.123: WARN/System.err(4292):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
04-25 17:32:34.123: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.123: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.123: WARN/System.err(4292):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
04-25 17:32:34.133: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.133: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.133: WARN/System.err(4292):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
04-25 17:32:34.133: WARN/System.err(4292):     at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1527)
04-25 17:32:34.144: WARN/System.err(4292):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1316)
04-25 17:32:34.144: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.144: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.144: WARN/System.err(4292):     at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
04-25 17:32:34.144: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.154: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.154: WARN/System.err(4292):     at com.google.android.maps.MapView.onLayout(MapView.java:764)
04-25 17:32:34.154: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.163: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.163: WARN/System.err(4292):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
04-25 17:32:34.163: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.163: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.163: WARN/System.err(4292):     at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
04-25 17:32:34.173: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.183: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.183: WARN/System.err(4292):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
04-25 17:32:34.183: WARN/System.err(4292):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
04-25 17:32:34.183: WARN/System.err(4292):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
04-25 17:32:34.183: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.183: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.193: WARN/System.err(4292):     at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
04-25 17:32:34.193: WARN/System.err(4292):     at android.view.View.layout(View.java:9330)
04-25 17:32:34.193: WARN/System.err(4292):     at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-25 17:32:34.203: WARN/System.err(4292):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1201)
04-25 17:32:34.203: WARN/System.err(4292):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1944)
04-25 17:32:34.203: WARN/System.err(4292):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 17:32:34.213: WARN/System.err(4292):     at android.os.Looper.loop(Looper.java:126)
04-25 17:32:34.213: WARN/System.err(4292):     at android.app.ActivityThread.main(ActivityThread.java:3997)
04-25 17:32:34.213: WARN/System.err(4292):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 17:32:34.213: WARN/System.err(4292):     at java.lang.reflect.Method.invoke(Method.java:491)
04-25 17:32:34.213: WARN/System.err(4292):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-25 17:32:34.223: WARN/System.err(4292):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-25 17:32:34.223: WARN/System.err(4292):     at dalvik.system.NativeStart.main(Native Method) 
```

**代码 ：：**

```
try {
            holder.imgViewLogo.setText(arr_ServiceNumber[position]);
            holder.txtViewTitle.setText(itemList[position]);

            stime = arr_ScheduledDepartureTime[position].split("T");
            sTime2  = stime[1].split(":");

            Date dt = new Date();
            int hours = dt.getHours();
            int minutes = dt.getMinutes();
            int myhour = Integer.parseInt(sTime2[0]);
            int mymin = Integer.parseInt(sTime2[1]);

            int onefire = Math.abs((myhour - hours) * 60);
            int total;
            if (onefire >= 60) {
                total = onefire - Math.abs((mymin - minutes));
            } else {
                total = onefire + Math.abs((mymin - minutes));
            }
            holder.lstrw_btn_departure.setText(total + " min \n" + "("
                    + sTime2[0] + ":" + sTime2[1] + ")");
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:21:22.643

Java 可以为您解析字符串。

```
String dateString = "2012-04-26T08:38:00";
SimpleDateFormat parser = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
Date date = null;
try {
    date = parser.parse(dateString);
} catch (ParseException e) {
    // error parsing.
}
if (date != null) {
    // do something with date.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:09:33.470

发生这种情况是因为您在 ArrayList 中只有 1 个元素时尝试访问第二个索引 (1)，这意味着您唯一的有效索引是 0。

错误的第一行告诉您这一点..

```
`java.lang.ArrayIndexOutOfBoundsException: index=1 length=1` 
```

这意味着您在为大小为 1 的 ArrayList 访问索引号 1 时遇到了 ArrayIndexOutOfBoundsException（这意味着 0 是目前唯一包含某些内容的索引。）

# java - 如何在 JavaFX 2.0 中创建几何形状？

> ID：10315252
> 
> 赞同：3
> 
> 时间：2012-04-25T12:07:01.840
> 
> 标签：java, shape, geometry, javafx-2

我有一个正在开发 JavaFX 2.0 的项目，它是一个绘图应用程序。到目前为止，我创建了一支笔，以及一个笔大小滑块、颜色选择器、橡皮擦和撤消功能。我还不知道如何创建基本的形状，如矩形、圆形或多边形。形状必须具有自定义尺寸，我需要将它们绘制到我的场景中。谁能帮我吗？

我真的很感激任何帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:32:37.143

查看 API 文档：[javafx.scene.shape.Shape](http://docs.oracle.com/javafx/2.0/api/javafx/scene/shape/Shape.html)。
示例用法：[绘制矩形](http://java-buddy.blogspot.com/2012/02/javafx-20-exercise-draw-rectangle.html)。Circle 和 Line 的例子也在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T17:47:21.633

```
public class MyCanvas extends Application {

    @Override
    public void start(Stage primaryStage) {
         primaryStage.setTitle(MyCanvas.class.getSimpleName());
         Group root = new Group();
         final Canvas canvas = new Canvas(300, 250);
         GraphicsContext gc = canvas.getGraphicsContext2D();
         drawShapes(gc);
         final Text text = new Text("X =    Y =   ");
         text.setTranslateX(100);
         text.setTranslateY(40);
         text.setFont(new Font(20));
         canvas.setOnMouseMoved(new EventHandler<MouseEvent>() {

             @Override
             public void handle(MouseEvent t) {
                 text.setText("X = " + t.getX() + "  Y = " + t.getY());
             }
         });

         root.getChildren().addAll(canvas, text);
         primaryStage.setScene(new Scene(root));
         primaryStage.getScene().setFill(Color.AQUA);
         primaryStage.show();

     }

     /**
      * The main() method is ignored in correctly deployed JavaFX application.
      * main() serves only as fallback in case the application can not be
      * launched through deployment artifacts, e.g., in IDEs with limited FX
      * support. NetBeans ignores main().
      *
      * @param args the command line arguments
      */
     public static void main(String[] args) {
         launch(args);
     }

     private void drawShapes(GraphicsContext gc) {
         gc.setFill(Color.WHITESMOKE);
         gc.fillRect(gc.getCanvas().getLayoutX(),      
                     gc.getCanvas().getLayoutY(), 
                     gc.getCanvas().getWidth(), 
                     gc.getCanvas().getHeight());
         gc.setFill(Color.GREEN);
         gc.setStroke(Color.BLUE);

         gc.setLineWidth(5);
         gc.strokeLine(40, 10, 10, 40);
         gc.fillOval(10, 60, 30, 30);
         gc.strokeOval(60, 60, 30, 30);
         gc.fillRoundRect(110, 60, 30, 30, 10, 10);
         gc.strokeRoundRect(160, 60, 30, 30, 10, 10);
         gc.fillArc(10, 110, 30, 30, 45, 240, ArcType.OPEN);
         gc.fillArc(60, 110, 30, 30, 45, 240, ArcType.CHORD);
         gc.strokeArc(10, 160, 30, 30, 45, 240, ArcType.OPEN);

     } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:12:39.063

您将需要获取要在其中绘制的组件的图形组件。

如果您有一个面板，它将类似于：

```
 Graphics g = jPanel1.getGraphics();
 Graphics2D g2d = (Graphics2D)g; 
```

Graphics2D 为您提供绘制所需内容的所有方法。有关完成方法的列表，请查看 oracle 的文档：

[http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)

编辑：困惑的 JavaSE。对于 JavaFX，您可以在此处阅读一些操作方法：http: [//docs.oracle.com/javafx/1.3/howto/Shapes-Tutorial.html](http://docs.oracle.com/javafx/1.3/howto/Shapes-Tutorial.html)

# android - 使用 web 服务时的问题

> ID：10315255
> 
> 赞同：0
> 
> 时间：2012-04-25T12:07:13.980
> 
> 标签：android, eclipse, web-services

安装 Apache Tomcat、Apache Axis2、创建 Web 项目、转换为服务、将其部署在 Tomcat 中、然后创建客户端项目、使用我们服务的存根创建客户端，最后访问服务。

我认为这些都是在 Android Eclipse 上使用 Web 服务的所有步骤。
在这里，我已经完成了在 tomcat 服务器上部署 web 项目的步骤，它成功显示了服务，但服务器选项显示为 SYNCHRONIZED。下面给出

**服务器**

本地主机上的 Tomcat v6.0 服务器[已启动，已同步]

AndBack[同步]。

* * *

同时，在创建客户端项目后，它在运行时显示为：

`Sorry! The application has stopped unexpectedly. Please try again. Force close`

请参考下面给出的我的 logcat。

**LOGCAT**

```
04-25 16:46:51.153: E/dalvikvm(273): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method org.test.Frontend.AndFrontActivity.onCreate
04-25 16:46:51.153: W/dalvikvm(273): VFY: unable to resolve new-instance 25 (Lorg/ksoap2/serialization/SoapObject;) in Lorg/test/Frontend/AndFrontActivity;
04-25 16:46:51.153: D/dalvikvm(273): VFY: replacing opcode 0x22 at 0x0010
04-25 16:46:51.164: D/dalvikvm(273): VFY: dead code 0x0012-0081 in Lorg/test/Frontend/AndFrontActivity;.onCreate (Landroid/os/Bundle;)V
04-25 16:46:51.243: D/AndroidRuntime(273): Shutting down VM
04-25 16:46:51.243: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-25 16:46:51.273: E/AndroidRuntime(273): FATAL EXCEPTION: main
04-25 16:46:51.273: E/AndroidRuntime(273): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
04-25 16:46:51.273: E/AndroidRuntime(273):  at org.test.Frontend.AndFrontActivity.onCreate(AndFrontActivity.java:28)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
04-25 16:46:51.273: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-25 16:46:51.273: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 16:46:51.273: E/AndroidRuntime(273):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 16:46:51.273: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-25 16:46:51.273: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-25 16:46:51.273: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:49:03.907

变成外部罐子，例如

ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar

放在 /libs 文件夹下，以便 Eclipse ADT 自动将您的 jars 添加到应用程序的构建路径中。毕竟这是一个缺少定义的类错误的构建路径。我希望这对你也有帮助！

[这里](https://stackoverflow.com/questions/9853113/java-lang-noclassdeffounderror-org-ksoap2-serialization-soapobject)或[那里](https://stackoverflow.com/questions/9853113/java-lang-noclassdeffounderror-org-ksoap2-serialization-soapobject)

# php - 使用 PHP 导出为 CSV 文件

> ID：10315256
> 
> 赞同：1
> 
> 时间：2012-04-25T12:07:16.507
> 
> 标签：php, mysql

我正在使用此代码使用 PHP 将选定的数据从 MySQL 导出到 CSV，我遇到了一个小问题，即当数据导出到 csv 文件时，它如下所示：

第一行在正确的位置，但是从第二行开始数据向右移动一个空格，如果我在 Excel 中打开 csv 文件，我可以看到第一行为空后最左边的单元格。

```
parts   destination 
===================     
1   9.71504E+11 
1   9.71504E+11
1   96656587662
1   9.71504E+11 
```

这是我的代码：

```
$values =mysql_query( "SELECT parts,destination from log");

$rown = 0;
$row = array();
$row[] = 'parts';
$row[] = 'destination'."\n";
$data .= join(',', $row)."\n";

while( $row_select = mysql_fetch_assoc($values) ) {
  if($rown++==0)
    $row = array();

  $row[] = $row_select['parts'];
  $row[] = $row_select['destination']."\n";
}
$data .= join(',', $row)."\n";

$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: text/csv");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");
print $data;
exit(); 
```

你能帮忙吗？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:16:56.057

> 第一行在正确的位置，但是从第二行开始数据向右移动一个空格，如果我在 Excel 中打开 csv 文件，我可以看到第一行为空后最左边的单元格。

我发现编写 CSV 比想象的要复杂得多。例如，转义值以便分隔符在值内部正确转义。我创建了一个使用 fwritecsv() 而不是自己尝试渲染 CSV 的简单类：

*编辑*：我已将示例更改为您的使用场景。

```
<?php
/**
 * Simple class to write CSV files with.
 * 
 * @author Berry Langerak <berry@ayavo.nl>
 */
class CsvWriter {
    /**
     * The delimiter used. Default is semi-colon, because Microsoft Excel is an asshole.
     * 
     * @var string
     */
    protected $delimiter = ";";

    /**
     * Enclose values in the following character, if necessary.
     * 
     * @var string
     */
    protected $enclosure = '"';

    /**
     * Constructs the CsvWriter.
     */
    public function __construct( ) {
        $this->buffer = fopen( 'php://temp', 'w+' );
    }

    /**
     * Writes the values of $line to the CSV file.
     * 
     * @param array $line 
     * @return CsvWriter $this
     */
    public function write( array $line ) {
        fputcsv( $this->buffer, $line, $this->delimiter, $this->enclosure );
        return $this;
    }

    /**
     * Returns the parsed CSV.
     * 
     * @return string
     */
    public function output( ) {
        rewind( $this->buffer );
        $output = $this->readBuffer( );
        fclose( $this->buffer );

        return $output;
    }

    /**
     * Reads the buffer.
     * @return type 
     */
    protected function readBuffer( ) {
        $output = '';
        while( ( $line = fgets( $this->buffer ) ) !== false ) {
            $output .= $line;
        }
        return $output;
    }
}

/**
 * Example usage, in your scenario:
 */
$values = mysql_query( "SELECT parts,destination from log" );

$csv = new CsvWriter( );
$csv->write( array( 'parts', 'destination' ) ); // write header.

while( $line = mysql_fetch_assoc( $values ) ) {
    $csv->write( $line );
}

$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: text/csv");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");

print $csv->output( );

exit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:21:20.047

就像@ChrisPatrick 指出的那样，这条线

```
$data .= join(',', $row)."\n"; 
```

导致问题，您应该将其移至 while 循环内部，然后您将摆脱单元格跳过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:17:13.373

问题出在以下行

`$data .= join(',', $row)."\n";`

您正在`$row`用逗号连接所有元素。因此，一行的目的地与下一行的部分连接起来，中间有逗号，所以你会得到这样的结果：

```
$data = $row_select['parts'] . ',' . $row_select['destination']."\n" . ',' . $row_select['parts'] etc... 
```

换行符后的逗号在行首创建一个空单元格。

**更新**它应该适用于以下

```
while( $row_select = mysql_fetch_assoc($values)){
$row = array();
$row[] = $row_select['parts'];
$row[] = $row_select['destination']."\n";
$data .= join(',', $row);
} 
```

# python - openerp 回显函数的返回结果

> ID：10315257
> 
> 赞同：1
> 
> 时间：2012-04-25T12:07:29.500
> 
> 标签：python, openerp

在 openerp 中，我正在开发一个虚拟函数，该函数（例如）返回选定记录上某个字段的总和。
例如，您选择 3 张发票，它返回发票行中数量的总和。我认为执行求和的函数是正确的，即使它不是，我只需要帮助来显示在弹出框中调用函数的结果。为此，我在发票对象中添加了类似于“确认发票”的操作。

为了让自己更清楚，当确认发票被按下时，它的函数被调用并且之前打开的弹出窗口当然是关闭的，因为在函数中找到了这一行：`return {'type': 'ir.actions.act_window_close'}`
我如何在我的函数中告诉它而不是（关闭）来显示执行函数后存储的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:29:05.203

如果您的目的是调试，最简单的解决方案是`print`在代码中添加语句，然后在控制台中运行服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:49:56.960

我认为最简单的方法是[添加一个wizard](http://doc.openerp.com/v6.0/developer/3_10_wizard/index.html#add-a-new-wizard)，并使用`client_action_multi`关键字让你在几条记录上一起运行wizard。

我编写了一个名为 的自定义模块[`production_packing`](http://bazaar.launchpad.net/~zaber/openobject-addons/main/files/head:/production_packing/)，其功能之一是检查多个生产订单的可用性。用户选择生产订单，单击操作按钮，选择检查可用性，然后获取有关哪些生产订单仍在等待原材料的报告。听起来您可以使用类似的技术来计算跨多个记录的函数，然后将结果显示给用户。

# iphone - 如何在 iphone 应用程序中以编程方式将图像添加到 excel 文件？

> ID：10315258
> 
> 赞同：1
> 
> 时间：2012-04-25T12:07:30.753
> 
> 标签：iphone, image, excel, openxml

我正在处理一个 iphone 项目，在该项目中，我需要创建一个包含多个电子表格的 excel 文件，在每个电子表格中，我需要有具有相关图像的自定义数据，这些数据不过是从 iPad2 主摄像头拍摄的照片。为此，我正在创建 xml 文件（Open Office XML），其中以下是创建单行的格式，

```
<Row ss:AutoFitHeight="0">
<Cell ss:Index=\"2\"><Data ss:Type=\"String\">City, State, Zip</Data></Cell>
<Cell ss:Index=\"4\" ss:MergeAcross=\"4\" ss:StyleID=\"s66\"/>
<Cell ss:Index=\"10\" ss:StyleID=\"s114\"><Data ss:Type=\"String\">Physical Structure</Data></Cell>
<Cell ss:Index=\"13\" ss:MergeAcross=\"2\" ss:StyleID=\"s66\"/>
</Row> 
```

有谁知道如何将图像添加到单元格？让我知道 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:09:36.567

只是一个建议，因为我不知道 excel 格式，但我注意到那里有一个“数据”元素。也许您可以将您的图像转换为 NSData，然后从中生成一个 UTF8 编码的字符串表示形式以包含在“数据”元素中？

同样，这只是一个想法，它可能不是正确的路径，但希望它可以引导您找到解决方案。

# php - PHP：计算数组中特定值的出现次数

> ID：10315259
> 
> 赞同：1
> 
> 时间：2012-04-25T12:07:31.410
> 
> 标签：php, arrays, multidimensional-array

我想知道我是否可以解释一下。

我有一个多维数组，我想获取该数组中出现的特定值的计数

下面我展示了 array 的片段。我只是在检查**profile_type**。

所以我试图在数组中显示**profile_type的计数**

**编辑**

对不起，我忘了提一些东西，不是主要的东西，我需要**profile_type==p的计数**

```
Array
(
    [0] => Array
        (
            [Driver] => Array
                (
                    [id] => 4
                    [profile_type] => p                    
                    [birthyear] => 1978
                    [is_elite] => 0
                )
        )
        [1] => Array
        (
            [Driver] => Array
                (
                    [id] => 4
                    [profile_type] => d                    
                    [birthyear] => 1972
                    [is_elite] => 1
                )
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:16:27.497

[使用RecursiveArrayIterator](http://php.net/RecursiveArrayIterator)的简单解决方案，因此您不必关心尺寸：

```
$iterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));

$counter = 0
foreach ($iterator as $key => $value) {
  if ($key == 'profile_type' && $value == 'p') {
    $counter++;
  }
}
echo $counter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:20:47.123

嗨，您可以从多维数组中获取 profuke_type==p 的计数

```
 $arr = array();
    $arr[0]['Driver']['id'] = 4;
    $arr[0]['Driver']['profile_type'] = 'p';
    $arr[0]['Driver']['birthyear'] = 1978;
    $arr[0]['Driver']['is_elite'] = 0;

    $arr[1]['Driver']['id'] = 4;
    $arr[1]['Driver']['profile_type'] = 'd';
    $arr[1]['Driver']['birthyear'] = 1972;
    $arr[1]['Driver']['is_elite'] = 1;

    $arr[2]['profile_type'] = 'p';
    $result = 0;
    get_count($arr, 'profile_type', 'd' , $result);
    echo $result;
    function get_count($array, $key, $value , &$result){
        if(!is_array($array)){
            return;
        }

        if($array[$key] == $value){
            $result++;
        }

        foreach($array AS $arr){
            get_count($arr, $key, $value , $result);
        }
    } 
```

尝试这个..

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:00:02.203

您还可以使用 array_walk($array,"test") 并定义一个函数“test”，该函数检查数组的每个项目的“类型”并递归调用 array_walk($arrayElement,“test”) 以获取“数组”类型的项目, 否则检查条件。如果条件满足，则增加一个计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:15:25.800

像这样的东西可能会起作用......

```
$counts = array();
foreach ($array as $key=>$val) {
    foreach ($innerArray as $driver=>$arr) {
        $counts[] = $arr['profile_type']; 
    }
}

$solution = array_count_values($counts); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:15:44.723

我会做类似的事情：

```
$profile = array();
foreach($array as $elem) {
    if (isset($elem['Driver']['profile_type'])) {
        $profile[$elem['Driver']['profile_type']]++;
    } else {
        $profile[$elem['Driver']['profile_type']] = 1;
    }
}
print_r($profile); 
```

# javascript - Internet Explorer 将 e.which 显示为未定义

> ID：10315260
> 
> 赞同：1
> 
> 时间：2012-04-25T12:07:36.753
> 
> 标签：javascript, jquery, asp.net, internet-explorer-8, internet-explorer-7

在`Internet Explorer 8`,在`event.which`FireFox`undefined`和`IE 9`. 我正在使用`Textbox`“onkeypress”事件

## 标记

```
<asp:TextBox runat="server" ID="tb1" MaxLength="3"
                        onkeypress="return MainCheckStrings(event);" /> 
```

## 它在 FF、Chrome、Safari 和 Internet Explorer 中运行良好 - 9

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:31:28.520

```
var charCode = evt.which || evt.keyCode; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:11:10.843

[文档](http://msdn.microsoft.com/en-us/library/ff974898%28v=vs.85%29.aspx)清楚地表明，此属性仅在 IE 9 之后可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:11:05.683

在 IE 之前的 9 中，偶数对象与其他对象不同，因此您需要专门处理这种情况，which 属性也是如此。

```
function MainCheckStrings(e) {
    if (!e) {
        e = window.event;  // Get event details for IE
        e.which = e.keyCode; // assign which property (so rest of the code works using e.which)
    }
}; 
```

这是一篇关于这个主题的好文章，应该清楚地解释一切[http://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)

# php - Apache2 使用了大量的 CPU。如何调得最好？

> ID：10315261
> 
> 赞同：0
> 
> 时间：2012-04-25T12:07:45.367
> 
> 标签：php, mysql, apache

我有一个流量很大的在线游戏（150 万查询/小时）。该游戏是iphone上的回合制游戏。但是，服务器运行缓慢：

```
CPU:  92% user, 3% kernel, 0% IO, 5% idle
Real Memory:   15.71 GB total, 985.17 MB used 
```

服务器统计：

```
Memory: 16 GB
Disk: 256GB SAS
Trafic:  2 * 1 Gbit 
CPU:    4 * 2Ghz 
```

这些是我使用的设置：

```
ect/apache2/httpd.conf

Timeout 300
KeepAlive On
MaxKeepAliveRequests 500
KeepAliveTimeout 2

<IfModule mpm_prefork_module>
StartServers          5
MinSpareServers       10
MaxSpareServers      20
ServerLimit          2000
MaxClients           1900
MaxRequestsPerChild  1000 
```

在 phpmyadmin 中，我有：

```
max connections = 2000 
```

由于很多人同时玩，我发现通过增加最大连接数可以提高性能，但我不想将其设置为高，以免服务器崩溃。现在有 2000 个连接，CPU 为 92%（如上所述）。

我能做些什么来让它更快吗？
更多地增加 max_connections 是否安全？
为什么 CPU 这么高而 RAM 内存这么低？

提前致谢

编辑，来自 /proc/cpuinfo 的信息

```
 processor   : 0
vendor_id   : AuthenticAMD
cpu family  : 16
model       : 2
model name  : Quad-Core AMD Opteron(tm) Processor 8356
stepping    : 3
cpu MHz     : 2320.957
cache size  : 512 KB
fpu     : yes
fpu_exception   : yes
cpuid level : 5
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow constant_tsc rep_good tsc_reliable nonstop_tsc pni cx16 popcnt hypervisor lahf_lm extapic abm sse4a misalignsse 3dnowprefetch
bogomips    : 4621.29
TLB size    : 1024 4K pages
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management:

processor   : 1
vendor_id   : AuthenticAMD
cpu family  : 16
model       : 2
model name  : Quad-Core AMD Opteron(tm) Processor 8356
stepping    : 3
cpu MHz     : 2320.957
cache size  : 512 KB
fpu     : yes
fpu_exception   : yes
cpuid level : 5
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow constant_tsc rep_good tsc_reliable nonstop_tsc pni cx16 popcnt hypervisor lahf_lm extapic abm sse4a misalignsse 3dnowprefetch
bogomips    : 4621.29
TLB size    : 1024 4K pages
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management:

processor   : 2
vendor_id   : AuthenticAMD
cpu family  : 16
model       : 2
model name  : Quad-Core AMD Opteron(tm) Processor 8356
stepping    : 3
cpu MHz     : 2320.957
cache size  : 512 KB
fpu     : yes
fpu_exception   : yes
cpuid level : 5
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow constant_tsc rep_good tsc_reliable nonstop_tsc pni cx16 popcnt hypervisor lahf_lm extapic abm sse4a misalignsse 3dnowprefetch
bogomips    : 4621.29
TLB size    : 1024 4K pages
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management:

processor   : 3
vendor_id   : AuthenticAMD
cpu family  : 16
model       : 2
model name  : Quad-Core AMD Opteron(tm) Processor 8356
stepping    : 3
cpu MHz     : 2320.957
cache size  : 512 KB
fpu     : yes
fpu_exception   : yes
cpuid level : 5
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow constant_tsc rep_good tsc_reliable nonstop_tsc pni cx16 popcnt hypervisor lahf_lm extapic abm sse4a misalignsse 3dnowprefetch
bogomips    : 4621.29
TLB size    : 1024 4K pages
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management: 
```

# entity-framework - EF 通过 ObjectContext 检测分离对象图中的变化

> ID：10315271
> 
> 赞同：0
> 
> 时间：2012-04-25T12:08:14.770
> 
> 标签：entity-framework

存在一种方法来检测一个对象图中的变化，并将其与另一个对象图进行比较。

例如：

```
usersSourceGraph = ObjectContext.Users.Where("bla bla bla");
userGraph = GetUsersGraph() // come from another tier and detached from ObjectContext. 
```

与 usersSourceGraph 相比，我需要在 (Modified,New) 中设置 userGraph 状态的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:21:33.767

您必须[手动](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)进行。EF 不支持合并两个对象图。

# jquery - 小程序上的jquery右键单击上下文菜单

> ID：10315273
> 
> 赞同：2
> 
> 时间：2012-04-25T12:08:16.833
> 
> 标签：jquery, applet, contextmenu

我正在尝试在小程序对象上创建一个右键单击 jquery 上下文菜单。能够在任何其他元素（如 div 或 span）上获得右键单击选项，但无法在 applet 对象上完成。

首先，我们可以在applet 对象上这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:49:08.467

如果它是一个 java applet 或 flash applet，那么它不能通过 javascript 完成，除非在 applet 代码中内置了一些“桥”。如果你的小程序不是那么复杂，那么花时间用普通的旧 jS 重写它可能是值得的

# sencha-touch - Sencha Touch 2 形式

> ID：10315279
> 
> 赞同：2
> 
> 时间：2012-04-25T12:08:45.980
> 
> 标签：sencha-touch, sencha-touch-2

我有一个带有表单文本字段的弹出窗口。如何访问文本字段？这是我的尝试：

```
function foo(){
    bar = Ext.Viewport.add({
    xtype: 'panel',
    scrollable: true,
    centered: true,
    width: 400,
    height: 300,
    items:[{
            xtype: 'textfield',
            name: 'name',
            label: 'Name'
        }, {
            docked: 'bottom',
            xtype: 'titlebar',
            items:[{
                    xtype: 'button',
                    ui: 'normal',
                    text: 'Send',
                    go: 'testsecond',   
                    handler:function(){
                        alert(bar.getValues().name);
                    }  
            }]
        }]
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:42:19.367

没有。你不需要这样做。设置`xtype:'panel'`将阻止您使用`form.getValues()`方法访问表单值。

相反，请执行以下方式。

将您的面板 xtype 设置为`formpanel`.

见下文：

```
bar = Ext.Viewport.add({
    xtype: 'formpanel',
    scrollable: true,
    centered: true,
    width: 400,
    height: 300,
    items:[{
            xtype: 'textfield',
            name: 'name',
            label: 'Name'
        }, {
            docked: 'bottom',
            xtype: 'titlebar',
            items:[{
                    xtype: 'button',
                    ui: 'normal',
                    text: 'Send',
                    go: 'testsecond',   
                    handler:function(){
                        Ext.Msg.alert("Name: "+bar.getValues().name);
                    }  
            }]
        }]
    }); 
```

你的输出应该是：

![在此处输入图像描述](../Images/9f7cc023cd7335a4303b72bd1e043b44.png)

# iphone - 在 iphone 中直接在 EDIT MODE DIRECTLY 中打开 ABPersonViewController

> ID：10315280
> 
> 赞同：3
> 
> 时间：2012-04-25T12:08:46.403
> 
> 标签：iphone, edit, abpersonviewcontroller

我正在开发通讯录应用程序。当用户从联系人列表中选择用户时，我想直接在编辑模式下打开该记录，`ABPersonViewController`而不是单击编辑按钮`ABPersonViewController`。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:38:53.497

只需在视图显示后调用 setEditing 即可：

```
ABPersonViewController *ab = [[ABPersonViewController alloc] init];
ab.allowsEditing = YES;
// customize as you see fit
[self.navigationController pushViewController:ab animated:YES];
[ab setEditing:YES animated:NO]; 
```

我在 iPad 上从弹出框控制器中尝试了这个，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T12:19:31.147

事实上 AB **New** PersonViewController 在编辑模式下看起来与 ABPersonViewController 完全一样。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-06-19T17:53:21.233

我通过这样做完成了同样的事情：

```
 ABRecordID personId = (ABRecordID)contact_ID;// if you want to edit a particular record and you're maintaining contact ID somewhere in your project.
    ABPersonViewController *contactVC = [[ABPersonViewController alloc] init];
    contactVC.personViewDelegate = self;// set your ViewController as delegate
    contactVC.allowsEditing = YES; //set NO if you don't wanna allow editing
    contactVC.displayedPerson = ABAddressBookGetPersonWithRecordID(addressBook, personId);
    [self.navigationController presentViewController:contactVC animated:YES completion:nil]; 
```

# node.js - 子域之间的会话持久性

> ID：10315281
> 
> 赞同：1
> 
> 时间：2012-04-25T12:08:48.637
> 
> 标签：node.js, cross-domain, express, http-proxy, node-http-proxy

我有两个子域，`api.abc.com`和`beta.abc.com`. 它们都在同一台服务器（盒子）上，`api.abc.com`在端口上运行，`4000`并且`beta.abc.com`在`5000`. 我也`node-htty-proxy`用来反向代理请求。`beta.abc.com`仅用于提供静态内容，同时`api.abc.com`以 json 格式返回响应。

用户身份验证是通过服务器（api）端的 facebook oauth 完成的。完成后，将创建会话并将用户重定向到测试版。我在这里遇到的问题是我无法坚持会话！我尝试在 cookie obj 中提供域选项（正如我在其他问题中看到的那样），即使这样也不起作用。

```
app.use(express.session({
    秘密：“天哪”
  , 商店: 新的 mongoStore({
        网址：config.db.uri
      ，集合：'会话'
    })
  ， 曲奇饼： {
        域：“.abc.com”
      ，最大年龄：1000*60*60*24*30*12
    }
}))

```

我该怎么做？我做错什么了吗？

[我在这里](https://stackoverflow.com/questions/10291000/persisting-a-cookie-based-session-over-node-http-proxy)发现了一个非常相似的问题。

# php - 为什么要检查 mysql_real_escape_string() 的返回

> ID：10315286
> 
> 赞同：3
> 
> 时间：2012-04-25T12:09:02.197
> 
> 标签：php, mysql, security

在我读过的每一篇博客/文章/问答中，没有人建议检查`mysql_real_escape_string()`.

在我看来，此检查对于确保数据一致性非常重要，因为如果此函数失败，则插入数据库中的值将是假阳性：布尔 FALSE 类型转换为字符串，结果为空字符串，而不是什么你会期望的。

根据文档：

```
Returns the escaped string, or FALSE on error. 

A MySQL connection is required before using mysql_real_escape_string() otherwise an error of level E_WARNING is generated, and FALSE is returned. If link_identifier isn't defined, the last MySQL connection is used. 
```

如果您进入日志查看发生了什么，警告是好的，但不会阻止它发生。

我知道很少有更改会失败，但如果至少有一项更改，您的应用程序应该会预料到。

如果出现以下情况，此功能将失败：

*   开发人员在调用此函数之前没有连接到数据库
*   在调用此函数之前与数据库的连接失败
*   服务器（mysql客户端所在的地方）内存不足，无法复制字符串进行转义
*   ...

这是“正常”用法的示例：

```
$db = mysql_connect() or die('Cannot connect to database');
$value = mysql_real_escape_string($_POST['value'], $db);
mysql_query('insert into tablex (value) values ("'.$value.'")', $db) or die('Cannot insert data in database'); 
```

我正在使用这样的东西（在mysql的OO包装器中）：

```
class mywrapper{
    // ... [code ...]

    // $this->db is the mysql link identifier
    public function escape($string)
    {
        if(mysql_real_escape_string($string, $this->db) === false)
        {
            throw new Exception('Some message');
        }
    }
} // end class    

    // I'm calling it as 
    // $myWrapper->insert('insert into tablex (value) values ("'.($myWrapper->escape($value)).'")'); 
```

这将引发异常处理程序将捕获的异常，最重要的是我防止在数据库中插入误报值，确保数据一致性。

我错过了什么？我是在安全地玩还是我在偏执狂？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:18:36.377

从某种意义上说，您缺少一些东西，因为[不再建议使用 mysql_](http://uk.php.net/manual/en/intro.mysql.php)系列函数。而是使用[mysqli](http://uk.php.net/manual/en/book.mysqli.php)或[PDO](http://uk.php.net/manual/en/book.pdo.php)。这两者都提供参数化查询，它们会自动为您转义您的输入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:11:44.247

不，我不认为你是偏执狂。（或者我们都是偏执狂）

我也认为避免发送`nothing`mysql 查询绝对是一个好习惯（几乎就像你不想发送一个`nothing`有价值的`$_POST`变量一样）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T12:16:41.070

我注意到你提到的问题：

> 这是“正常”用法的示例：
> 
> $db = mysql_connect();

好吧，此时您绝对应该检查连接是否成功。此外，通过良好的数据库抽象层，您可以防止用户“忘记”连接到数据库（因为他不必手动执行此操作）。(1)。

如果您在此期间失去连接，那么您的查询将失败，因此您发送的内容无关紧要 (2)。

`mysql_real_escape_string`在客户端完成，因此 mysql 服务器的内存使用不是问题 (3)。

# c# - 会员创建用户providerError

> ID：10315290
> 
> 赞同：0
> 
> 时间：2012-04-25T12:09:31.883
> 
> 标签：c#, asp.net, .net, asp.net-membership, vb.net-2010

我有一个使用会员模式 6 的应用程序。

当我尝试使用membership.CreateUser 在代码后面添加用户时，我收到错误11“提供者错误”。

在我的应用程序 Membership.UserValidate、Membership.GetUser、Membership.ChangePassword 等工作正常。

即使 Role.AddUserToRole 在没有创建用户的情况下也能正常工作。

我在 web.config 中有以下设置：

```
<membership defaultProvider="MySQLMembershipProvider"> 
  <providers> 
    <remove name="MySQLMembershipProvider" /> 
    <add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.3.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" 

         applicationName="/myApp" description="MySQL myApp" connectionStringName="LocalMySqlServer" writeExceptionsToEventLog="False" autogenerateschema="True" 

         enablePasswordRetrieval="True" enablePasswordReset="True" requiresQuestionAndAnswer="False" requiresUniqueEmail="True" passwordFormat="Encrypted" 

         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="" /> 
  </providers> 
</membership> 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T19:43:53.760

我收到错误是因为我在其中一个创建的成员表中添加了列。删除列后一切正常。

# struts - 在嵌入式码头部署struts项目

> ID：10315292
> 
> 赞同：1
> 
> 时间：2012-04-25T12:09:34.520
> 
> 标签：struts, jetty

我在我的应用程序中嵌入了码头，文件夹树的结构是：

|--lib
|--WebRoot
      |---WEB-INF
                |---lib

我想知道的是---我应该把struts2 libs（例如struts2-core-2.2.3.1.jar，xwork-core-2.2.3.1.jar）放在哪里，以及servlet相关的api（例如servlet-api- 2.5-6.1.11.jar, jasper-compiler-5.5.15.jar api)?

我应该将 jar 放在顶层 lib 文件夹中还是放在 WEB-INF 内的 lib 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:10:59.717

这完全取决于您希望如何构建您的应用程序，如果您正在嵌入，您不必*遵循*传统的 webapp 方法，其中您有一个战争文件（爆炸或不爆炸）及其在 WEB-INF 下的库约定在您使用 web.xml 的示例中，您可以完全跳过 webapp 部署程序的想法，只需自己构建处理程序更改并在 java 代码中注册 servlet，看看我们拥有的一些嵌入式示例：

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/ManyServletContexts.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/ManyServletContexts.java)

那里还有其他示例，如果您正在嵌入，那么除非您*需要*部署战争，否则您不必在这方面搞砸。如果您确实需要部署战争，那么您将在任何正常使用 servlet 容器的地方放置东西，将战争的东西放在 WEB-INF/lib 中，并将系统类加载器中的东西放回主主类路径中。

# php - Twig：将 URL 编码两次，同时将其传递给 Twitter 共享按钮

> ID：10315296
> 
> 赞同：2
> 
> 时间：2012-04-25T12:09:41.307
> 
> 标签：php, twitter, symfony, twig

我正在用 Symfony2 开发一个简单的页面，使用 Twig 作为模板引擎。

我有一个 url 列表，我想为每个 url 添加 Twitter 共享按钮。我所做的是在 urls 数组上进行一个简单的循环，并为循环内的每个 Twitter 按钮设置 url。看起来，twig 一开始对 url 进行了编码，然后 Twitter 脚本再次对其进行了编码。所以 Twitter 分享数不匹配。代码（循环内）如下，页面末尾还有另一部分 Twitter 代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="{{ s.url }}">Tweet</a> 
```

我在渲染页面上获得的 url 是：（`http%253A%252F%252Fwww.example.com%252F`两次编码传递）而不是`http%3A%2F%2Fwww.example.com%2F`（一次编码传递，正确）。看起来`%`被再次编码为`%25`.

这不会使 Twitter 计数工作，因为它将这两个视为不同的 url。

我也尝试使用一些过滤器，例如`{{ s.url|raw }}`，但它没有用。

所以我的问题是：如何避免这种情况？有没有办法告诉树枝（或推特）不编码网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:24:39.393

`{% autoescape false %}`您始终可以通过在要保留原始代码之前使用声明来关闭 Twig 中的自动转义。这将使您输出的任何字符串都未转义，因此您的 URL 不会被转义两次。确保您重新打开自动转义`{% endautoescape %}`

```
{% autoescape false %}
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="{{ s.url }}">Tweet</a>
{% endautoescape %} 
```

[完整的 Twig HTML 转义文档](http://twig.sensiolabs.org/doc/templates.html#html-escaping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T16:03:57.343

一个旧帖子，但看起来您现在可以使用“原始”过滤器。这应该这样做：

```
{{ s.url|raw }} 
```

[http://twig.sensiolabs.org/doc/api.html#escaper-extension](http://twig.sensiolabs.org/doc/api.html#escaper-extension)

# php - 根据选择框结果执行功能

> ID：10315299
> 
> 赞同：0
> 
> 时间：2012-04-25T12:09:49.013
> 
> 标签：php, html, forms

我有一个正常的选择框，如下所示，在一个单独的类中我有许多 php 函数。我希望能够基于选择框执行功能。

```
<form action="functions.php" method"post">
<select name="sales">
  <option value="week">Last 7 days</option>
  <option value="month">Last 30 Days</option>
  <option value="year">Last 365 Days</option>
  <option value="all">Complete report</option>
</select>
<input type="submit" value="Submit" />
</form> 
```

然后例如在我的函数类中我有函数`function week(), function month(), function year()`。我想要选择，选择并单击提交的时间，将执行星期函数，是否有一种简单的方法来执行此操作？最好在同一页面上但在单独的页面上会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:14:01.923

一个简单的 if/else 语句有什么问题？

```
if ( $_POST['select'] == 'year' ){ year(); }
else if ( $_POST['select'] == 'month' ){ month(); }
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:11:49.880

为您的选择添加名称`<select name="myvariable" method="POST">`

那么您可以使用该名称来调用函数，例如：

```
echo $_POST['myvariable'](); 
```

或使用 call_user_func() 函数，如：

```
echo call_user_func($_POST['myvariable']); 
```

（在此处阅读有关 call_user_func 的更多信息 - [http://lt.php.net/manual/en/function.call-user-func.php](http://lt.php.net/manual/en/function.call-user-func.php)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:12:06.010

在最简单的形式上：

```
$function = $_POST['select_name'];
$function(); 
```

或者（更好），

```
call_user_func($_POST['select_name']); 
```

* * *

### 笔记：

*   您没有为您的选择添加名称，这是强制传递给 PHP 的。
*   您可能应该验证用户输入以确保他们没有输入邪恶的内容。

# c++ - 如何封装一个线程？

> ID：10315303
> 
> 赞同：2
> 
> 时间：2012-04-25T12:10:06.757
> 
> 标签：c++, multithreading, boost, crash

我得到了一个程序，其中包含一些使用 boost::thread 创建的线程，因为它是为我的游戏项目启动和控制多个游戏服务器的管理器。

管理器由一个应用程序组成，我的问题如下：

如何以这种方式封装线程，例如，如果它在 NULL 指针异常或类似情况下崩溃，则线程本身结束但不是整个程序随后崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:12:55.970

首先，您应该绝对确保代码中不会出现空指针异常。这是一项强制性要求。

有什么方法可以将您的应用程序拆分为多个通信进程？这样，如果其中一个崩溃，其余的不受影响。

# java - 重新打包 .jar 文件

> ID：10315306
> 
> 赞同：2
> 
> 时间：2012-04-25T12:10:25.293
> 
> 标签：java, android, ant, jar, jarjar

我需要将一些 JRE7 库中的 jar 添加到我的 Android 项目中。但例如`rt.jar`与`android.jar`来自 Adroid 2.2 SDK 的冲突，所以我得到这个错误：

> 不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。
> 
> 这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。
> 
> 但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。
> 
> 如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。
> 
> 如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。
> 
> 如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

我知道有几个关于它的话题，像[JarJar](http://code.google.com/p/jarjar/)、[OneJar](http://one-jar.sourceforge.net/)或[FatJar](http://fjep.sourceforge.net/)这样的东西可能对我有好处。但是我不知道如何使它们中的任何一个起作用，并且文档并没有真正说明（对我而言）。我猜他们使用 Ant 命令，但我一直使用 Eclipse 内置构建器，现在我不知道如何使用 Ant 和上面提到的任何命令。

所以我的问题是：如何重新打包这个 rt.jar 以便在我的 Android 项目中编译它？

谢谢！

**编辑：**

好的，所以我想要实现的是创建一个.jar，可以在开发Android应用程序时使用（简化一些功能，没关系）。但我也希望能够将相同的 .jar 添加到标准 Java 项目中，以便在那里使用一些功能。它看起来像这样：编写应用程序的人将此 .jar 添加到他的 Java 项目中 -> 它使他能够生成某些文件（需要 Internet 来完成）-> 然后将这些生成的文件添加到 Android 项目中 -> 稍后，当有人使用这个 Android 应用程序时，这些文件在不使用互联网（离线）的情况下提供某些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:25:32.643

即使有可能，在任何项目中都这样做是不明智的。您将面临大量的类不兼容和加载问题。但在任何情况下，这甚至都无关紧要，因为核心 Java 库在您的档案被触及之前就已加载，因此任何覆盖它们的尝试都没有实际意义。

更不用说 Android 正在使用自己的 JVM 实现，它与 JDK 6 不完全兼容（忘记 JDK 7）。另请注意，将核心 Java 库与您的代码打包可能会侵犯版权，并且可能会更改您的许可选项 (IANAL)。

您需要找到另一种方法来解决您遇到的任何问题（您在问题中没有提到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:53:44.360

有许多 JAR 在 Android 和经典 Java 上都能很好地工作。没有涉及让 Android 开发人员盗版`rt.jar`。坚持Android SDK`java.*`和`javax.*`您支持的任何 Java 级别中存在的类，您的 JAR 将在这两种环境中正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:55:23.480

理想情况下，您应该避免使用此类 .jar 文件，但如果必须，您可以将它们添加到构建路径中。但这有时会导致冲突，就像你现在面临的那样。要解决这种冲突，您需要做的是：

1.  在构建路径中添加 jar。
2.  检查“引用的库”。jar 文件应该出现在相同的下面。
3.  一旦它在引用的库下具有功能，请检查“android依赖项”虚拟目录。如果您看到那里也有相同 jar 文件的实例，则应该完全删除“android 依赖项”文件夹。（相信我，这不会以任何方式影响您的项目）。
4.  完成后，您应该能够编译您的代码而不会发生任何进一步的冲突。

快乐编码.. :)

# batch-file - 如何使用windows xp中的批处理文件检查端口80是否可用

> ID：10315307
> 
> 赞同：2
> 
> 时间：2012-04-25T12:10:29.817
> 
> 标签：batch-file, windows-xp, port

我正在编写一个批处理文件来自动检查端口 80 的可用性，并在它被另一个程序使用时给出错误消息。但我不确定如何在批处理文件中检查端口 80 的可用性。

我发现以下命令可以使用终端进行检查。

```
 netstat -o -n -a | findstr 0.0:80 
```

但我需要用一个批处理文件来检查它，如下所示

```
if (!//port 80 is available) {
  // Give an error message
} else {
  // Continue with the rest
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T12:28:06.993

你可以这样尝试：

```
@echo off
netstat -o -n -a | findstr ZXCZXCZCZX 
if %ERRORLEVEL% equ 0 (@echo "port taken")
ELSE (@echo "port available") 
```

当找不到项目时，FINDSTR 将返回 %ERRORLEVEL% > 0
（在 Windows 7 64 位的命令控制台上测试）

# c# - Google Contacts API asp.net 设置和授权令牌

> ID：10315308
> 
> 赞同：2
> 
> 时间：2012-04-25T12:10:31.670
> 
> 标签：c#, asp.net, oauth, google-api

有没有很好的例子来说明如何填充应用程序设置来创建请求设置？

这是来自[谷歌的代码](https://developers.google.com/google-apps/contacts/v3/)

```
using Google.Contacts;
using Google.GData.Contacts;
using Google.GData.Client;
using Google.GData.Extensions;
// ...
    RequestSettings settings = new RequestSettings("<var>YOUR_APPLICATION_NAME</var>");
    // Add authorization token.
    // 
    // ...
    ContactsRequest cr = new ContactsRequest(settings); 
```

我是否必须指定从 oAuth 请求中获得的令牌，而不再指定？

YOUR_APPLICATION_NAME 的值可以是任何字符串值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:41:37.030

如果要使用 OAuth 2.0，则必须设置`settings.OAuth2Parameters`为`OAuth2Parameters`类的实例或使用`RequestSettings(string applicationName, OAuth2Parameters parameters)`构造函数。

[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs)上的示例应用程序展示了如何实例化一个`OAuth2Parameters`对象。

其他`RequestSettings`构造函数允许您使用 OAuth 1.0 和其他身份验证机制。

# wpf - WPF：Unity：关闭后重用窗口

> ID：10315313
> 
> 赞同：1
> 
> 时间：2012-04-25T12:10:51.910
> 
> 标签：wpf, mvvm, unity-container

在 ShellViewModel 我有下面的命令绑定打开一个新窗口“远程视图”

```
public ICommand RemoteViewCommand
{
    get { return new RelayCommand(RemoteViewExecute, CanRemoteViewExecute); }
}

private void RemoteViewExecute()
{
    if (!CanRemoteViewExecute())
    {
        return;
    }

    var shellRemoteView = Application._Container.Resolve<ShellRemoteView>();
    if (_ShellRemoteView.DataContext==null)
        _ShellRemoteView.DataContext = Application._Container.Resolve<ShellRemoteViewModel>();        

    shellRemoteView.Show();
} 
```

在启动时，我已经使用生命周期管理器注册了“ShellRemoteView”和“ShellRemoteViewModel”以拥有单例实例。

```
_Container.RegisterType<ShellRemoteView>(new ContainerControlledLifetimeManager());
_Container.RegisterType<ShellRemoteViewModel>(new ContainerControlledLifetimeManager()); 
```

当 shellRemoteView.Show() 执行并关闭表单时，再次调用 shellRemoteView.Show() 时出现**无效操作异常：无法设置可见性或在窗口关闭后调用 Show、ShowDialog 或 WindowInteropHelper.EnsureHandle。**

如果关闭了，Unity 中是否有任何解决**方法可以再次获取窗口实例**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:44:32.107

[您应该向LifetimeManager](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.lifetimemanager%28v=pandp.20%29.aspx)注册您的视图以仅创建一个实例。查看[使用终身管理器](http://msdn.microsoft.com/en-us/library/ff648098.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:14:12.410

这条线是你的问题：

```
return new RelayCommand(RemoteViewExecute, CanRemoteViewExecute); 
```

基本上，每次调用 Get 命令时都会创建一个新视图。解决此问题的方法是将一个变量放在您的 GET 语句之外，该语句的范围是 ViewModel 级别。让它存储对视图的引用并返回该引用，而不是每次都创建一个新引用。查看[Singleton 模式](http://csharpindepth.com/Articles/General/Singleton.aspx)，了解如何最好地做到这一点。

# .net - .Net 中的异步 BinaryReader 和 BinaryWriter？

> ID：10315316
> 
> 赞同：11
> 
> 时间：2012-04-25T12:11:06.853
> 
> 标签：.net, f#

我想异步读取和写入字节和结构化值类型，而不必担心解码器和字节移位：有什么东西可以让我这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T12:05:36.880

`BinaryReader`使用or是不可能的`BinaryWriter`。您可以同时从底层读取`BaseStream`，但[文档](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.basestream.aspx)说明如下：

> 在读取或使用 BinaryReader 时使用底层流可能会导致数据丢失和损坏。例如，可能会多次读取相同的字节，可能会跳过字节，或者字符读取可能变得不可预测。

因此，唯一的方法是滚动您自己的实现。但这样做的好处是有争议的。来自 Microsoft 的 Marco Greg 在博客文章[我应该为同步方法公开异步包装器吗？](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)：

> Jon：BinaryReader/Writer 没有 XxxAsync 方法的原因是这些类型的方法通常只从先前打开的基础流中读取/写入很少的字节。在实践中，数据经常被缓存，从底层源获取数据所需的时间通常非常短，因此不值得异步执行。
> 
> 值得注意的是，这些类型的某些方法在某些情况下可能会传输大量数据（例如 ReadString）。更进一步，这些方法的异步版本可能会添加也可能不会添加，但不太可能在不久的将来发生。
> 
> 一般而言，如果您正在读取的数据量很大（至少数百或数千字节），或者您是第一次访问资源（例如，第一次从文件中读取），您应该只考虑异步 IO 方法即使您正在读取一个字节，也可能需要启动磁盘）。

这听起来很合理。如果您确实需要解决方案，除了滚动您自己的`BinaryReader`/之外，还有几种解决方法`BinaryWriter`。您可以在单独的线程中运行它（这可能效率低下），或者如果您愿意更改文件格式或有线协议，您可以使用此模式（伪代码）：

```
//read packet length
await stream.ReadAsync(buffer);
var packetLength=convertToInt(buffer);

//read complete packet asynchronously
await stream.ReadAsync(buffer,packetLength);

//process packet with BinaryReader
using(var br=new BinaryReader(new MemoryStream(buffer))
{
  //...
} 
```

请注意，此模式仅在完整缓冲区很容易放入内存并且性能可能会受到影响时才有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-04T08:49:05.870

您可以使用`FileStream`，确保正确调用构造函数，以便它启用异步并具有足够大的缓冲区。

```
var buffer = new byte[2048];

using var r = new FileStream(
                  Path,
                  FileMode.Open, 
                  FileAccess.ReadWrite, 
                  FileShare.None, 
                  2048000, 
                  FileOptions.Asynchronous);

await r.ReadAsync(buffer, 0, 2048);
await r.Writesync(buffer); 
```

现在您有了一个字节数组，您可以使用三个选项将它们转换为对象：

*   利用[`BitConverter`](https://docs.microsoft.com/en-us/dotnet/api/system.bitconverter?view=netcore-3.1)
*   使用`BinaryFormatter`和`MemoryStream`
*   编写自己的自定义逻辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-08T03:00:01.580

我创建了这些类的异步版本：[https ://github.com/ronnieoverby/AsyncBinaryReaderWriter](https://github.com/ronnieoverby/AsyncBinaryReaderWriter)

示例用法：

```
async Task Main()
{
    using var ms = new MemoryStream();
    using var writer = new AsyncBinaryWriter(ms);
    await writer.WriteAsync("today is: ");
    await writer.WriteAsync(DateTime.Today.Ticks);
    await writer.FlushAsync();

    ms.Position = 0;

    using var reader = new AsyncBinaryReader(ms);
    var preamble = await reader.ReadStringAsync();
    var payload = new DateTime(await reader.ReadInt64Async());

    Console.WriteLine(preamble + payload);
} 
```

BCL 二进制读取器/写入器类上存在的所有相同的读取/写入方法都存在。

# c# - WPF：单击“全选”复选框控件时选择/取消选择 ListView 的数据项

> ID：10315319
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:11:20.263
> 
> 标签：c#, wpf

我正在开发一个 WPF 应用程序，我必须在一个容器`ListViews`内绑定三个不同的分组。`GroupBox`

这是显示的 XAML：

```
<GroupBox Header="Zone2 Sensors" Height="250" Name="grpBoxZone2" Width="380" Margin="25,248,90,660" Grid.Column="5" Grid.ColumnSpan="2" Foreground="#FF1E5EE6">
    <Grid Height="250" Width="375" MinHeight="250">
        <Label Content="Strain" Width="40" Name="labelZone2S" Foreground="#FF1E5EE6" Margin="44,1,291,227" />
        <Label Content="Accelerometer" Width="79" Name="labelZone2A" Foreground="#FF1E5EE6" Margin="132,1,164,227" />
        <Label Content="Tilt" Name="labelZone2T" Foreground="#FF1E5EE6" Margin="264,1,82,227" />
        <ListView Margin="25,42,268,49" Name="lst2" ItemsSource="{Binding}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" BorderThickness="0" SelectionChanged="lst2_SelectionChanged">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Padding="5" Background="#FF83A2DA" BorderThickness="1" BorderBrush="Black">
                        <CheckBox Name="CheckBoxs1" IsChecked="{Binding IsSelected}" Click="CheckBoxs1_Click" Unchecked="CheckBoxs1_Unchecked">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ObjectData}"></TextBlock>
                            </StackPanel>
                        </CheckBox>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <ListView Margin="134,42,159,111" Name="lstZone2A" ItemsSource="{Binding}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" BorderThickness="0" SelectionChanged="lstZone2A_SelectionChanged">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Padding="5" Background="#FF83A2DA" BorderThickness="1" BorderBrush="Black">
                        <CheckBox Name="ChkZone2A" IsChecked="{Binding IsSelected}" Checked="ChkZone2A_Checked" Unchecked="ChkZone2A_Unchecked">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ObjectData}"></TextBlock>
                            </StackPanel>
                        </CheckBox>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <ListView Margin="249,42,44,156" Name="lstZone2T" ItemsSource="{Binding}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" BorderThickness="0" SelectionChanged="lstZone2T_SelectionChanged">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Padding="5" Background="#FF83A2DA" BorderThickness="1" BorderBrush="Black">
                        <CheckBox Name="ChkZone2T" IsChecked="{Binding IsSelected}" Checked="ChkZone2T_Checked" Unchecked="ChkZone2T_Unchecked">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ObjectData}"></TextBlock>
                            </StackPanel>
                        </CheckBox>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <CheckBox Content="Select ALL Sensors" Margin="14,21,248,213" Name="chkZone2SelectAll" Checked="chkZone2SelectAll_Checked" Unchecked="chkZone2SelectAll_Unchecked" />
    </Grid>
</GroupBox> 
```

这是我用来检查和取消选中项目的 C# 代码：

```
private void chkZone2SelectAll_Checked(object sender, RoutedEventArgs e)
{
    try
    {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < lst2.Items.Count; i++)
        {
                // Get a all list items from listbox
                ListBoxItem ListBoxItemObj = (ListBoxItem)lst2.ItemContainerGenerator.ContainerFromItem(lst2.Items[i]);
                //bool check = ListBoxItemObj.HasContent;
                // find a ContentPresenter of that list item.. [Call FindVisualChild Method]
                ContentPresenter ContentPresenterObj = FindVisualChild<ContentPresenter>(ListBoxItemObj);

                // call FindName on the DataTemplate of that ContentPresenter
                DataTemplate DataTemplateObj = ContentPresenterObj.ContentTemplate;
                CheckBox Chk = (CheckBox)DataTemplateObj.FindName("CheckBoxs1", ContentPresenterObj);
                Chk.IsChecked = true;
        }
        for (int i = 0; i < lstZone2A.Items.Count; i++)
        {
            // Get a all list items from listbox
            ListBoxItem ListBoxItemObj = (ListBoxItem)lstZone2A.ItemContainerGenerator.ContainerFromItem(lstZone2A.Items[i]);

            // find a ContentPresenter of that list item.. [Call FindVisualChild Method]
            ContentPresenter ContentPresenterObj = FindVisualChild<ContentPresenter>(ListBoxItemObj);

            // call FindName on the DataTemplate of that ContentPresenter
            DataTemplate DataTemplateObj = ContentPresenterObj.ContentTemplate;
            CheckBox Chk = (CheckBox)DataTemplateObj.FindName("ChkZone2A", ContentPresenterObj);
            Chk.IsChecked = true;
        }
        for (int i = 0; i < lstZone2T.Items.Count; i++)
        {
            // Get a all list items from listbox
            ListBoxItem ListBoxItemObj = (ListBoxItem)lstZone2T.ItemContainerGenerator.ContainerFromItem(lstZone2T.Items[i]);

            // find a ContentPresenter of that list item.. [Call FindVisualChild Method]
            ContentPresenter ContentPresenterObj = FindVisualChild<ContentPresenter>(ListBoxItemObj);

            // call FindName on the DataTemplate of that ContentPresenter
            DataTemplate DataTemplateObj = ContentPresenterObj.ContentTemplate;
            CheckBox Chk = (CheckBox)DataTemplateObj.FindName("ChkZone2T", ContentPresenterObj);
            Chk.IsChecked = true;
        }
        foreach (TripInfo cbObject in lst2.Items)
        {
            cbObject.IsSelected = true;
        }
        foreach (TripInfo cbObject in lstZone2A.Items)
        {
            cbObject.IsSelected = true;
        }
        foreach (TripInfo cbObject in lstZone2T.Items)
        {
            cbObject.IsSelected = true;
        }
        foreach (TripInfo cbObject in lst2.Items)
        {
            if (cbObject.IsSelected)
            {
                if (SelectedSensser != null)
                {
                    if (SelectedSensser.Contains(cbObject.ObjectData.ToString())) { }
                    else
                    {
                        sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                    }
                }
                else
                {
                    sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                }
                SelectedSensser += sb.ToString().Trim();
                sb.Clear();
            }
        }
        foreach (TripInfo cbObject in lstZone2A.Items)
        {
            if (cbObject.IsSelected)
            {
                if (SelectedSensser != null)
                {
                    if (SelectedSensser.Contains(cbObject.ObjectData.ToString())) { }
                    else
                    {
                        sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                    }
                }
                else
                {
                    sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                }
                SelectedSensser += sb.ToString().Trim();
                sb.Clear();
            }
        }
        foreach (TripInfo cbObject in lstZone2T.Items)
        {
            if (cbObject.IsSelected)
            {
                if (SelectedSensser != null)
                {
                    if (SelectedSensser.Contains(cbObject.ObjectData.ToString())) { }
                    else
                    {
                        sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                    }
                }
                else
                {
                    sb.AppendFormat("{0}, ", cbObject.ObjectData.ToString());
                }
                SelectedSensser += sb.ToString().Trim();
                sb.Clear();
            }
        }
    }
    catch (Exception ex) { throw ex; }
}

private ChildControl FindVisualChild<ChildControl>(DependencyObject DependencyObj) where ChildControl : DependencyObject
{
    int count = VisualTreeHelper.GetChildrenCount(DependencyObj);
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(DependencyObj); i++)
    {
        DependencyObject Child = VisualTreeHelper.GetChild(DependencyObj, i);

        if (Child != null && Child is ChildControl)
        {
            return (ChildControl)Child;
        }
        else
        {
            ChildControl ChildOfChild = FindVisualChild<ChildControl>(Child);

            if (ChildOfChild != null)
            {
                return ChildOfChild;
            }
        }
    }
    return null;
}

public class TripInfo
{
public TripInfo(string objectData) { ObjectData = objectData; }

public TripInfo(bool isSelected, string objectData)
{
    IsSelected = isSelected;

    ObjectData = objectData;
}

public Boolean IsSelected
{ get; set; }
public String ObjectData
{ get; set; }

} 
```

但是，当它到达第 8 个索引时，这给了我以下错误，但`ListItems`计数显示 10 个元素：

```
Value cannot be null.
Parameter name: element 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:29:36.223

感谢所有刚刚访问此问题的人。我找到了解决方案。这很棘手:-)。垂直滚动下的列表项，或者您可以说 FindVisualChild 类没有找到那些不可见的项目。当我增加了列表视图和找到的所有项目的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:36:55.567

我看到您正在使用绑定和模板来显示您的数据。
您可以轻松地在您的视图模型上调用 a`ICommand`并将所有项目设置为`IsSelected=True`. 如果您已`INotifyPropertyChanged`正确实施，它应该可以工作，并且您将不再需要代码隐藏/FindVisual 的东西。

# c# - 使用 odbc 驱动程序的 asp.net 应用程序与 quickbooks 集成

> ID：10315324
> 
> 赞同：1
> 
> 时间：2012-04-25T12:11:24.373
> 
> 标签：c#, asp.net, odbc, quickbooks

> **可能重复：**
> [使用 QWC 在 Web 应用程序中列出 QuickBooks 客户信息](https://stackoverflow.com/questions/2552272/listing-quickbooks-customer-information-in-web-app-using-qwc)

我想将我的 asp.net Web 应用程序与 quickbooks 集成以获取项目信息。我已经安装了 quickbook odbc 驱动程序。现在我不明白如何在我的 c# 类中获取项目信息。我想写一个方法，我想使用 odbc 驱动程序获取项目信息，但我在 asp.net 中没有看到任何示例来完成此任务。有什么帮助吗？

# php - php str_replace 仅替换针数组中的第一个值

> ID：10315326
> 
> 赞同：0
> 
> 时间：2012-04-25T12:11:30.660
> 
> 标签：php, str-replace

`str_replace`我已经使用这个函数有一段时间了，但这是我第一次在 PHP 的函数上遇到这个奇怪的问题。这是我的代码...

```
$e2p_perline = explode(',', $e2p_wrd_rplc);

        $e2p_words = array();
        $e2p_words_2b = array();
        $e2p_loopcounter = 0;

        foreach($e2p_perline as $line){

            $e2p_line_words = explode('-', $line);
            $e2p_words[$e2p_loopcounter] = $e2p_line_words[0];
            $e2p_words_2b[$e2p_loopcounter] = $e2p_line_words[1];

            $e2p_loopcounter++;
        }

$e2p_message = str_replace($e2p_words, $e2p_words_2b, $e2p_message); 
```

`$e2p_wrd_rplc`是使用 wordpress 的 get_option() 函数从数据库加载的字符串。这种格式的字符串数据`c*sh-cash, v*gra-viagra, s3x-sex,....`

`$e2p_words`是一个用要替换的词`$e2p_words_2b`填充的数组，是一个用替换词填充的数组。

假设我们有

`e2p_words`是 (c*sh, v*agra, s3x)

`e2p_words_2b`是（现金、伟哥、性）

现在，当我运行它时，只有第一个单词`c*sh`被替换为`cash`. 其余`e2p_words`事件`e2p_message`保持不变。

我也没有收到任何错误或警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:17:19.143

**这对我有用：**

```
<?php

$e2p_words = array("c*sh", "v*agra", "s3x");
$e2p_words_2b = array("cash", "viagra", "sex");

$e2p_message = "Get a v*agra, or you'll have to pay c*sh for some real s3x.";

$e2p_message = str_replace($e2p_words, $e2p_words_2b, $e2p_message);

echo $e2p_message;

?> 
```

**输出 ：**

```
Get a viagra, or you'll have to pay cash for some real sex. 
```

# ajax - 在 Web 内容显示 Portlet 中使用 ajax

> ID：10315327
> 
> 赞同：0
> 
> 时间：2012-04-25T12:11:31.173
> 
> 标签：ajax, spring, liferay, portlet, liferay-6

我正在使用 liferay 社区版 6.0。其中一个页面将仅使用 Web Content Display portlet 向其中添加内容。我想在该内容中实现以下内容，我将加载一些 html 链接，这些链接将用于下载一些 pdf。我想在实际重定向到链接之前向我的域添加一个 ajax 调用。

我的问题如下。我已经使用 liferay 的钩子功能在 view.jsp 中添加了一个 java 脚本 ajax 函数。click 事件在 view.jsp 中被捕获，但由于没有控制器，我不知道如何将此事件传播到域。

到目前为止，我已经在使用 Spring MVC 完成的自定义创建 portlet 上完成了此功能。但是对于这个特定的 portlet，我似乎找不到控制器或 Web Content Display 正在使用的处理程序（如果有的话）。

有人可以告诉我这是否可能，如果可能的话，请指出我的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T13:08:16.650

我不确定您要在这里实现什么功能，但我会尽力提供帮助。您可以从 view.jsp 对钩子中的另一个 jsp 进行 Ajax 调用。

```
jQuery.ajax({
   type: "POST",
   url: "/jsp/path/your.jsp",
   data: "country="+country,
   success: function() {
   ...
  }
  ...
}); 
```

# grails - Grails isDirty() 不适用于关联

> ID：10315345
> 
> 赞同：0
> 
> 时间：2012-04-25T12:12:30.333
> 
> 标签：grails

在我的应用程序中，我正在更新与患者实体 1:1 关联的对象凭证。在我的控制器中，我调用“voucherInstance.properties = params”来绑定新值。但是当我在凭证中更改患者（尚未保存），然后我调用 isDirty('patient')，在这种情况下 IMO 应该返回 true，它实际上返回 false。

此外，getPersistentValue('patient') 返回更改后的值，而不是原始值。我是否正确理解了这些方法？

谢谢，洛伊扎

在我的控制器类中：

```
def update() {
   Voucher voucherInstance = voucherService.get(id)
   voucherInstance.properties = params // patient is being sent from view by params.patient.id
   voucherService.update(voucherInstance)
} 
```

在我的 VoucherService 类中：

```
public Voucher update(Voucher voucher) {
   if (voucher.isDirty('patient')) {  // returns false
      // do something
      Patient oldPatient = voucher.getPersistentValue('patient') // returns the updated patient
   }
   voucher.save(flush: true)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:31:10.827

这里正确的使用应该是`voucherInstance.patient.isDirty`. 的参数化版本`isDirty`适用于 bean 字段 iirc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:38:57.983

我做了一些谷歌搜索，找到了一个解决方案，虽然不是一个好的解决方案：http: [//stuff4j.blogspot.com/2011/05/i-encountered-few-times-strange.html](http://stuff4j.blogspot.com/2011/05/i-encountered-few-times-strange.html)

```
def update() {
   Voucher voucherInstance = voucherService.get(id)
   voucherInstance.patient = null
   voucherInstance.properties = params // patient is being sent from view by params.patient.id
   voucherService.update(voucherInstance)
} 
```

这似乎有效。但是我必须先将所有关联显式设置为 null，然后才能更新它们。

# javascript - 如何使用 jquery 和 javascript 从数据库中显示菜单项

> ID：10315346
> 
> 赞同：0
> 
> 时间：2012-04-25T12:12:32.850
> 
> 标签：javascript, jquery, css, sqlite

嗨，我正在用 css jquery 和 javascript 编写菜单列表：我想从数据库中获取菜单项

js代码：

```
 var selectAllStatement = "SELECT * FROM Contacts";
           function  findAll(){
       var name;
     db.transaction(function(tx) {
    tx.executeSql(selectAllStatement, [], function(tx, result) {
    dataset = result.rows;
        for (var i = 0, item = null; i < dataset.length; i++) {
          item = dataset.item(i);
          name = item['firstName'] }
                   });
                                  });

              } 
```

.html 文件：

```
 <section id="popupAccordeon" class="hide">

<div id="popup-bg">
</div>

     <div id="popup-box">   

    <ul class="niveau1">
        <li><a href="">  Players Name</a>
                <ul class="niveau2">

        <li><a href="http://www.rankspirit.com"> </a></li> // this are items i want to get them from table Contacts

            </ul>

  </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:22:18.760

Javascript、CSS 和 HTML 适用于网站的前端。这些文件被下载到浏览器并在浏览器的范围内运行。

数据库驻留在服务器中。您需要一种服务器端语言来与数据库交互并生成必要的 html 以发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:17:31.333

您必须使用一些服务器端语言，例如 PHP、C#、Java、Ruby 等。这取决于您的服务器。

# jquery - html jquery.load，动态文件名

> ID：10315348
> 
> 赞同：3
> 
> 时间：2012-04-25T12:12:39.653
> 
> 标签：jquery, html

我得到了一个用 li / a 制作的菜单，并且我得到了 jquery.load 使用它。当我单击一个链接时，它会在不刷新页面的情况下加载 div 中的内容。但是添加必须在属性中加载的文件名的最佳方法是什么？

这将加载带有原始链接的页面：例如 127.0.0.1/filetobeloaded.html。 `<a href="filetobeloaded.html">test</a>`

但如果我这样做，`<a href="#" rel="filetobeloaded.html">test</a>`我认为这是错误的属性 =/。

那么我应该为此使用什么属性？

问候，斯特凡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:13:57.513

使用`href`属性，这就是它的用途。在`.click`函数中，您只需执行`return false`. 这将阻止浏览器重定向到该页面。

```
<a href="filetoload.html" class="ajaxLinks">MyLink</a>

$('.ajaxLinks').click(function() {
    // do something with this.href       

    return false;
}); 
```

使用该`href`属性可以让您选择让它在没有 javascript 的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:21:48.790

使用 href 属性。这样它也适用于您禁用 javascript 的浏览器。

```
<a href="yourpage.html" class="ajaxLink">Link 1</a> 
```

并在脚本中

```
$(function(){

 $("a.ajaxLink").click(function(e){
    e.preventDefault() //to prevent the normal behaviour of a tag
    $("#yourContentdiv").load($(this).attr("href"));
 });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:15:17.950

如果你正在使用它可以使用 href 或 rel，在另一个元素中你可以使用 data-like data-load="url"

点击一下，你只需要抑制事件，所以：

```
$('a').click(function(ev) {
  // load stuff here using $(this).attr('href')
  ev.preventDefault();
  return false;
} 
```

# jakarta-ee - 获取 null 而不是新实例

> ID：10315349
> 
> 赞同：1
> 
> 时间：2012-04-25T12:12:40.690
> 
> 标签：jakarta-ee, jsf-2, cdi, jboss-weld

我相信，如果您使用 ApplicationScope 注入一个 bean 并且它从未被实例化，CDI 会给您 null。

但是，如果您创建一个新实例，然后尝试在稍后注入它可以正常工作，从那时起它将继续正常工作。

在 JSF 依赖注入中，您不必创建一次。我相信 JSF 会做类似的事情

```
//pseudo code
AtStartUp () {
if (applicationScoped)
create new Instance(); 
```

或者可能

```
AtInjectionPoint () {
if (applicationScoped && null)
return new Instance();

else return Instance; 
```

虽然我相信 CDI 会做类似的事情

```
AtInjectionPoint () {
return Instance; 
```

你能跟我来这里吗？我的问题基本上是我们拥有的每个应用程序范围的 bean 都是空的，除非我们创建一次。我们非常希望 CDI 能够以某种方式处理这个问题，并且表现得像前两个伪代码示例之一。

有人知道更多吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:53:42.600

CDI bean 在第一次被引用时由容器自动创建。无需自己实例化它。

我不确定您为什么会遇到这种行为。也许您将 jsf 托管 bean 注释与 CDI 注释混合在一起？或者您正试图在构造函数中访问注入的 bean？

# php - 如何为 apns iphone 应用程序创建 php 提供程序服务器？

> ID：10315350
> 
> 赞同：0
> 
> 时间：2012-04-25T12:12:42.823
> 
> 标签：php, iphone, ios, apple-push-notifications

我查看并研究了许多教程，包括 Apple Document，但我找不到为 apns 创建自己的服务提供商服务器的方法。在此链接`http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12`中，他们为我们提供了一个示例 php 服务器，并对我们的设备令牌进行硬编码以接收推送通知。但是，我正在寻找`to create a php server`以及如何在本地网站中托管 php 服务器。我对数据库/服务器端工作不是很熟悉，这就是我苦苦挣扎的原因。任何人都可以请解释我或`suggest any tutorials to create a php server and host the server in local? How to save all device tokens in the server from our device?`请帮助我。提前致谢。我在这个话题上花了两天时间，请保存我的一天。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:21:08.870

如果您不想自己创建服务器，有[一个更易于使用的解决方案](http://urbanairship.com/)

# asp.net-mvc - MVC：在相同的 [HTTPOST] 操作方法中编辑和创建

> ID：10315351
> 
> 赞同：0
> 
> 时间：2012-04-25T12:12:47.867
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-post, actioncontroller

我首先在我的项目中使用 MVC3-Viewmodel 模型。

当用户在 my 中输入一个值，`DDL`然后`TextArea`单击我的表单按钮时，它基本上会执行一个 ajax url.post 到我的 POST 操作，现在我的 Post Action 方法会创建并保存它。但我想要的是某种类型的检查，例如：

*   第 1 步：如果 SelectQuestion 有任何答案
*   第 2 步：如果答案存在，请更新
*   第 3 步：如果答案不存在，则创建一个新答案并保存。

这就是我的控制器现在的样子：

```
 [HttpPost]
    public JsonResult AnswerForm(int id, SelectedQuestionViewModel model)
    {
        bool result = false;
        var goalCardQuestionAnswer = new GoalCardQuestionAnswer(); // Creates an instance of the entity that I want to fill with data

        SelectedQuestion SelectedQ = answerNKIRepository.GetSelectedQuestionByID(model.QuestionID);   // Retrieve SelectedQuestion from my repository with my QuestionID.               
        goalCardQuestionAnswer.SelectedQuestion = SelectedQ; // Filling my entity with SelectedQ
        goalCardQuestionAnswer.SelectedQuestion.Id = model.QuestionID; // filling my foreign key with the QuestionID
        goalCardQuestionAnswer.Comment = model.Comment; // Filling my entity attribute with data
        goalCardQuestionAnswer.Grade = model.Grade; // Filling my entity attribute with data
        answerNKIRepository.SaveQuestionAnswer(goalCardQuestionAnswer); // adding my object
        answerNKIRepository.Save();  // saving
        result = true;
        return Json(result);
    } 
```

`Comment`并且`Grade`也可以为空。

实体的关联如下

```
[Question](1)------(*)[SelectedQuestion](1)-----(0..1)[GoalCardQuestionAnswer] 
```

任何形式的帮助表示赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:47:34.690

我实现了我的问题，答案如下：

```
 [HttpPost]
        public JsonResult AnswerForm(int id, SelectedQuestionViewModel model)
        {
            SelectedQuestion SelectedQ = answerNKIRepository.GetSelectedQuestionByID(model.QuestionID);

            if (SelectedQ.GoalCardQuestionAnswer == null)
            {

                var goalCardQuestionAnswer = new GoalCardQuestionAnswer();
                goalCardQuestionAnswer.SelectedQuestion = SelectedQ;
                goalCardQuestionAnswer.SelectedQuestion.Id = model.QuestionID;
                goalCardQuestionAnswer.Comment = model.Comment;
                goalCardQuestionAnswer.Grade = model.Grade;
                this.answerNKIRepository.SaveQuestionAnswer(goalCardQuestionAnswer);
                this.answerNKIRepository.Save();
                const bool Result = true;
                return this.Json(Result);
            }
            else
            {
                if (SelectedQ.GoalCardQuestionAnswer != null)
                {
                    SelectedQ.GoalCardQuestionAnswer.Comment = model.Comment;
                }

                if (SelectedQ.GoalCardQuestionAnswer != null)
                {
                    SelectedQ.GoalCardQuestionAnswer.Grade = model.Grade;
                }
                const bool Result = false;
                return this.Json(Result);
            }
        } 
```

# android - dx转dex是否包括原始类文件的校验？

> ID：10315354
> 
> 赞同：1
> 
> 时间：2012-04-25T12:12:58.647
> 
> 标签：android, class, dalvik, dex

我有兴趣在 dx 将已编译的 Class 文件转换为 dex 文件之前对其进行一些修改。我查看了一些官方的[Dalvik 文档](http://source.android.com/tech/dalvik/)以及[DEX 格式和 Class 格式](https://stackoverflow.com/questions/8210173/what-is-the-difference-between-class-and-dex-files)之间的比较。我找不到太多关于实际*转换过程*的信息，class->dex。dx 在转换之前是否首先验证 Class 文件？它是否只是逐个字段和逐个方法地进行，将指令组合并为更紧凑的分组？任何见解将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T22:37:30.943

运行方式`dx`，它通常没有足够的信息来进行所有可能的验证，也不是为了这样做而编写的。特别是，部分验证与一个类中的代码如何引用其他类中`dx`的代码有关，并且在运行时，所讨论的“其他类”的代码实际上可能不可用。例如，您可以针对 Android API 级别 6 编译一些代码，生成一个`.dex`文件。稍后，当运行 API 级别 29 的设备出现时，您可以尝试运行该`.dex`文件。只有当文件在系统上并准备好运行时，系统才会拥有执行验证所需的所有信息。此时，它可以检查`.dex`文件与系统上可用的内容并接受（通过验证）或拒绝（验证失败）该文件。

举个简单的例子，也许该`.dex`文件引用了 API 级别 6 中存在但在 API 级别 29 中被删除的类或方法。

但要明确的是，正如@JesusFreke 所说，`dx`需要能够解析`.class`文件以完成其翻译工作。如果它在该层遇到问题，它将报告为翻译失败，在上下文中，这大约相当于验证错误，尽管它通常不会这样表述。

即使不考虑 API 演变的可能性，也有可能取一个`.class`无法验证的文件，成功地将其翻译成一个（a 的一部分）`.dex`文件，然后观察该`.dex`文件无法验证。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:01:22.390

我不像 dalvik 字节码那样熟悉 dx 本身和转换过程，但我不记得看到原始 java 字节码的任何验证，尽管显然它必须格式良好，才能被 dx 解析/理解.

我知道没有关于转换过程的文档。它涉及将字节码转换为几种中间格式（ROP、SSA），并包括一些用于有效寄存器分配的逻辑和对中间格式的一些优化（我认为）。

有关转换过程的更多信息，最好的办法是查看 dx 源本身 (/dalvik/dx)

# .net - 控件的有效名称

> ID：10315357
> 
> 赞同：0
> 
> 时间：2012-04-25T12:13:02.120
> 
> 标签：.net, winforms, devexpress

我目前正在使用 DevExpress Xtrareports，但在设置报告名称时遇到问题（将显示在打印队列中）

我正在将我在代码中创建的 XtraReport 实例上的 .Name 属性设置为来自数据库字段的值。对于某些值，这会引发异常。

问题似乎是 XtraReport 从 XRControl 继承了 name 属性，XRControl 是可视控件的基类。

所以我只能将名称设置为一个有效的值，作为 winforms 中可视控件的名称。

我搜索了谷歌，很难找到一个清晰的列表，其中列出了 Windows 窗体中有效控件名称的规则。

我知道它不能以数字开头，也不能包含点或连字符 ('-')。

有谁知道完整的规则，或者我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:46:41.167

控件名称应该是一个有效的标识符，你可以用它来命名一个变量。这取决于您选择的 .net 语言。对于 C# 4.0，有效标识符在语言规范的第 2.4.2 部分中进行了描述（[从 microsoft 下载](https://www.microsoft.com/en-us/download/details.aspx?id=7029)）

解释：以**字母**或**下划线开头**，然后是：

**字母字符：** Lu、Ll、Lt、Lm、Lo 或 Nl 类的 Unicode 字符 表示 Lu、Ll、Lt、Lm、Lo 或 Nl 类字符的 unicode 转义序列

**组合字符：** Mn 或 Mc 类的 Unicode 字符 表示 Mn 或 Mc 类字符的 unicode-escape-sequence

**十进制数字字符：** Nd 类的 Unicode 字符 表示 Nd 类字符的 unicode-escape-sequence

**连接字符：**
Pc 类的 Unicode 字符 表示 Pc 类字符的 unicode-escape-sequence

**format-character:**
类 Cf 的 Unicode 字符 表示类 Cf 的字符的 unicode-escape-sequence

可以在[此处找到 unicode 字符类的简短描述](http://www.java2s.com/Tutorial/XML/0060__XML-Schema/Unicodecharacterclasses.htm)

# caching - 带有 JSONP 对象的 Sensa Touch 1.1 仅第一次调用

> ID：10315361
> 
> 赞同：1
> 
> 时间：2012-04-25T12:13:18.303
> 
> 标签：caching, sencha-touch, jsonp

我试图通过 Ext.util.JSONP.request 从服务器获得答案。该代码工作正常并调用回调函数，但只是第一次。我对此进行了很多搜索，但是我看到的解决方案并没有为我提供解决方案。我的代码是：

```
Ext.util.JSONP.request({
    method: 'GET',
    callbackKey: 'callback',
    callback: function(data){
        alert('data');
    },
    url: myUrl,
}); 
```

我尝试为 callbackparams 中的每个调用以及在 url 的末尾添加更改参数，每次调用中的`?param=myParam`myParam 都不同。

我尝试添加`disableCaching: true`

我试图添加到响应中：

```
response.setHeader("Cache-Control", "no-store"); 
```

我也尝试直接从浏览器调用 url，这很好，每次我打电话都会收到一个新的答案，因此这不是服务器的问题。

我不知道我还能测试什么。请你帮助我好吗？

提前非常感谢。

# winforms - Windows 窗体应用程序中按钮的按下和释放行为

> ID：10315368
> 
> 赞同：1
> 
> 时间：2012-04-25T12:13:44.717
> 
> 标签：winforms, button

我希望我的 Windows 窗体中的按钮具有“按下”和“释放”行为。如何做到这一点？更清楚地说，单击按钮应导致“按住”状态，下一次单击应“释放”它。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:29:18.770

使用复选框：

```
checkBox1.Appearance = Button; 
```

图形质量可能会有所不同。

# android - 如何设置按钮以填充每一行的一半？

> ID：10315369
> 
> 赞同：-2
> 
> 时间：2012-04-25T12:13:47.157
> 
> 标签：android, android-relativelayout, android-linearlayout

在我的 android 应用程序中，我有两个按钮，位于一排并在它们上方显示地图。我希望每个按钮占据行的一半。谁能告诉我该怎么做？

目前我的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnProgram"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Program" />

    <Button
        android:id="@+id/btnAfisareStatii"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Afisaza toate statiile" 
        android:layout_toRightOf="@+id/btnProgram"/>

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnAfisareStatii" />

    <WebView
        android:id="@+id/webview2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/webview" />

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
        android:clickable="true"
        android:enabled="true" 
        android:layout_above="@id/btnProgram">
    </com.google.android.maps.MapView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:16:38.223

使用线性布局和 layout_weight：

```
 <?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/button_container"
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:orientation="horizontal"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btnProgram"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="Program" />

        <Button
            android:id="@+id/btnAfisareStatii"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/btnProgram"
            android:text="Afisaza toate statiile" />
    </LinearLayout>

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnAfisareStatii" />

    <WebView
        android:id="@+id/webview2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/webview" />

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button_container"
        android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
        android:clickable="true"
        android:enabled="true" >
    </com.google.android.maps.MapView>

</RelativeLayout> 
```

但是你为什么要把 webviews 放在它们本身与屏幕底部对齐的按钮下面呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:17:12.830

将您的按钮放入 a`LinearLayout`并分配`layout_weight`给它们。然后把这个LinearLayout放到你RelativeLayout的底部。

```
<LinearLayout layout_width="fill_parent" layout_height="fill_parent">
  <Button
        android:id="@+id/btnProgram"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Program" />

    <Button
        android:id="@+id/btnAfisareStatii"
        android:layout_width="wrap_fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Afisaza toate statiile" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:21:49.100

将两个按钮都放在 a 中`LinearLayout`并设置`android:orientation="horizontal"`

如下所示。确保你有`weight`按钮的属性

```
<LinearLayout android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                 android:orientation="horizontal">
<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Button" android:layout_weight="1"/>
<Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Button" android:layout_weight="1"/>

</LinearLayout> 
```

更新

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnAfisareStatii" 
        android:layout_weight="1"/>

    <WebView
        android:id="@+id/webview2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/webview" 
         android:layout_weight="1"/>

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
        android:clickable="true"
        android:enabled="true" 
         android:layout_weight="1">
    </com.google.android.maps.MapView>

        <LinearLayout android:orientation="horizontal" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
       android:layout_weight="1">
          <Button
        android:id="@+id/btnProgram"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Program" 
        android:layout_weight="1"/>

    <Button
        android:id="@+id/btnAfisareStatii"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Afisaza toate statiile" 
        android:layout_toRightOf="@+id/btnProgram" android:layout_weight="1"/>

    </LinearLayout>
</LinearLayout> 
```

# c# - 来自不同线程的触发事件

> ID：10315370
> 
> 赞同：4
> 
> 时间：2012-04-25T12:13:53.677
> 
> 标签：c#, wpf

在我的主窗口（*线程 A*）中，我启动了一个新线程（*线程 B*），它在用户等待时执行一些工作。

如果出现错误或需要用户提供额外信息，线程 B 会触发事件，线程 A 将监听这些事件。

在线程 A 的事件侦听器中，我需要向用户显示对话框消息，我有一个自定义对话框窗口并使用`dialogWindow.showDialog()`. 这工作正常，但是当我尝试设置对话框的所有者时会导致错误，我这样做`dialogWindow.Owner = Window.GetWindow(this)`。

我得到的错误是：*调用线程无法访问此对象，因为另一个线程拥有它。*

**侦听从不同线程触发的事件的正确方法是什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T12:19:58.103

事件侦听器代码将在触发事件的线程上隐式运行，因此事件侦听器不是线程绑定的。

如果您想在 UI 中显示事件处理的结果，您应该自己进行编组。像这样的东西：

```
void OnEvent(object sender, EventArgs args)
{
    // runs in the event sender's thread
    string x = ComputeChanges(args);
    Dispatcher.BeginInvoke((Action)(
        () => UpdateUI(x)
    ));
}

void UpdateUI(string x)
{
    // runs in the UI thread
    control.Content = x;
    // - or -
    new DialogWindow() { Content = x, Owner = this }.ShowDialog();
    // - or whatever
} 
```

所以：你最好在后台线程中执行你的计算（如果有的话），而不接触 UI；之后，当您知道 UI 中需要更改哪些内容时，您可以在 UI 线程中执行 UI 更新代码。

是控件的`Dispatcher`属性，因此如果您的代码是 UI 的一部分，您将免费获得 Dispatcher。否则，您可以从任何控件（例如`control.Dispatcher`）中获取调度程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:24:56.043

从后台线程向 UI 线程引发事件的正确方法是，事件应该在该 Dispatcher 上引发，这里的关键是事先获取 UIthread 的调度程序。

> UIDisaptcher.BeginInvoke((ThreadStart)(() => RaiseEventToUIThread()));

当 UI 线程侦听引发的事件时，它可以设置 Owner 属性（因为窗口是由 UI 线程创建的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T12:18:55.593

当然 -> 我们所做的是使用 SynchronizationContext。因此，当您启动一个新线程时，您（在 UI 线程上）捕获当前上下文并将其作为参数传递给第二个线程。

然后在第二个线程上，当你想引发一个事件时，你可以这样做：

```
 if (_uiThreadId != Thread.CurrentThread.ManagedThreadId)
    {
        _uiContext.Post(
            new SendOrPostCallback(delegate(object o) { OnYourEvent((EventArgs)o); }),
            e);
    }
    else
        OnYourEvent(e); 
```

# android - 远程蓝牙

> ID：10315376
> 
> 赞同：6
> 
> 时间：2012-04-25T12:14:08.070
> 
> 标签：android, bluetooth

我正在尝试了解工作客户端-服务器蓝牙。android是客户端。PC是服务器。

我找到了[代码](https://github.com/luugiathuy/Remote-Bluetooth-Android)。这适用于三星 Galaxy 10.1（android 3.2），但不适用于三星 Galaxy s（android 2.3.3）和 htc wildfire s（android 2.2）。

```
MY_UUID = UUID.fromString("04c6093b-0000-1000-8000-00805f9b34fb"); 
```

* * *

```
 04-25 18:32:37.023: D/BluetoothCommandService(13665): setState() 1 -> 2
04-25 18:32:37.033: I/BluetoothCommandService(13665): BEGIN mConnectThread
04-25 18:32:37.063: E/BluetoothService.cpp(102): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
04-25 18:32:37.103: E/BluetoothCommandService(13665): Unable to start Service Discovery
04-25 18:32:37.103: E/BluetoothCommandService(13665): java.io.IOException: Unable to start Service Discovery
04-25 18:32:37.103: E/BluetoothCommandService(13665):   at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:367)
04-25 18:32:37.103: E/BluetoothCommandService(13665):   at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:201)
04-25 18:32:37.103: E/BluetoothCommandService(13665):   at com.luugiathuy.apps.remotebluetooth.BluetoothCommandService$ConnectThread.run(BluetoothCommandService.java:258)
04-25 18:32:37.103: D/BluetoothCommandService(13665): setState() 2 -> 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:53:32.223

您的设备因服务发现而失败（我认为是这样）。

1.  我已经阅读了许多三星设备和 HTC 设备的 BT 问题，但那些专门针对 L2CAP/HID 配置文件的问题。Soln：如果你使用 L2CAP，你可以使用 SPP 或 RFCOMM

2.  如果您使用的是上述解决方案中的一种，请尝试使用标准 UUID

SPP 00001101-0000-1000-8000-00805F9B34FB

RFCOMM 00000003-0000-1000-8000-00805F9B34FB

**编辑**

或者，您可以尝试使用反射来获取您的套接字连接，类似于以下方法

```
private static BluetoothSocket createBluetoothSocket(
        int type, int fd, boolean auth, boolean encrypt, String address, int port){
    try {
        Constructor<BluetoothSocket> constructor = BluetoothSocket.class.getDeclaredConstructor(
                int.class, int.class,boolean.class,boolean.class,String.class, int.class);
        constructor.setAccessible(true);
        BluetoothSocket clientSocket = (BluetoothSocket) 
            constructor.newInstance(type,fd,auth,encrypt,address,port);
        return clientSocket;
    }catch (Exception e) { return null; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:46:39.037

试试这个 ：

```
static int sdk = Integer.parseInt(Build.VERSION.SDK);

private static final UUID MY_UUID = 
   UUID.fromString((sdk<=8||sdk>=11)?"04c6093b-0000-1000-8000-00805f9b34fb":"00001101-0000-1000-8000-00805F9B34FB"); 
```

它对我有用 :)
在 2.1 - 3.3 和 4.0.4 android 版本上测试。

# sql - 为什么在 JPA Hibernate 中更新查询；所有属性都在 SQL 中更新

> ID：10315377
> 
> 赞同：2
> 
> 时间：2012-04-25T12:14:12.007
> 
> 标签：sql, hibernate, jpa

我正在将 JPA 与 Hibernate 一起使用。当我修改对象的一个​​属性并更新它时；生成的 SQL 显示所有列正在更新！为什么它不只更新修改后的列？有没有办法实现这一点，因为我觉得这会更加优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:20:53.927

默认情况下，hibernate 包括更新查询中的所有字段。如果您想排除此问题，请使用**自定义更新 HQL**，或者您可以配置 hibernate 以**排除更新查询中未修改的字段，**如[本文所述](http://www.mkyong.com/hibernate/hibernate-dynamic-update-attribute-example/)。

这是通过添加`dynamic-update="true"`您的类映射来完成的。

```
<class ... table="your_table" .... dynamic-update="true"> 
```

在多列的大表（遗留设计）或包含大量数据的情况下，这将对系统性能产生很大影响。[如此处](https://stackoverflow.com/a/3405560/507864)所述，它可能会对性能产生一些影响。因此，在实施之前测量代码的性能。

[阅读此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-class)的 API以获取更多信息。

如果您使用注释，

```
@org.hibernate.annotations.Entity(selectBeforeUpdate=true) 
```

它是特定于休眠的注释，在 JPA 中不可用。这是一篇链接到详细信息的好[文章。](http://www.skill-guru.com/blog/2009/10/22/some-useful-options-in-class-element-in-hibernate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:38:49.210

在过去的 4-5 天里，我遇到了一个问题，这让我慢慢发疯。

删除操作正在使用所有列，而不仅仅是主键列。

例如。

```
DELETE FROM MYTABLE WHERE ID=? AND NAME=? AND VALUE=? 
```

当我删除“dynamicUpdate=true”注释时，Hibernate 开始生成正确的 SQL，即。

```
DELETE FROM MYTABLE WHERE ID=? 
```

它在 Oracle 11g 上造成了令人讨厌的问题，当时`VALUE`是 CLOB。

# amazon-web-services - 运行 Amazon EMR 作业时出现“文件不存在”错误

> ID：10315378
> 
> 赞同：1
> 
> 时间：2012-04-25T12:14:12.103
> 
> 标签：amazon-web-services, amazon-emr, emr

我已经上传了我的数据 genotype1_large_ind_large.txt phenotype1_large_ind_large_1.txt

到 S3 系统，在 EMR UI 中，我设置如下参数

RunDear.run s3n://scalability/genotype1_large_ind_large.txt s3n://scalability/phenotype1_large_ind_large_1.txt s3n://scalability/output_1phe 33 10 4

在我的 RunDear.run 类中，我会将文件 genotype1_large_ind_large.txt 和 phenotype1_large_ind_large_1.txt 分发到缓存中

但是，运行 EMR 后，出现以下错误： java.io.FileNotFoundException: File does not exist: /genotype1_large_ind_large.txt

我想知道为什么文件名前面有斜杠'/'？如何使它工作？

我也尝试像下面这样使用，但我的程序会将 -cacheFile 作为参数，因此也不起作用，

RunDear.run -cacheFile s3n://scalability/genotype1_large_ind_large.txt#genotype.txt -cacheFile s3n://scalability/phenotype1_large_ind_large_1.txt#phenotype.txt s3n://scalability/output_1phe 33 280 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:24:54.077

我终于意识到这是使用文件系统的问题，所以我在程序中添加了如下代码 FileSystem fs = FileSystem.get( URI.create("s3://scalability"), conf);

# asp.net - 无法将 ScriptMananger 添加到页面而不会从自动生成的代码中获取错误给设计器

> ID：10315380
> 
> 赞同：0
> 
> 时间：2012-04-25T12:14:27.960
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在尝试使用脚本管理器来使用页面方法在页面的服务器和客户端之间进行通信。我已将此代码添加到 html

```
<asp:ScriptManager ID="ScriptManager1" runat="server"   
  EnablePageMethods="True"> 
```

当我添加这个时，这是插入到设计器页面的内容。

```
 Protected WithEvents ScriptManager1 As Global.System.Web.UI.ScriptManager 
```

但是当它被自动添加时，我得到了这个错误。

```
Error   52  Type 'System.Web.UI.ScriptManager' is not defined.  C:\Users\Bill\Desktop\iPlan-7-layer\listing\summarytreeMain.aspx.designer.vb    32  44  iPlan 
```

我在我的项目中添加了对 system.web.services 的引用 - 但似乎仍然无法解决这个错误。有什么建议么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:03:43.670

您的项目中可能缺少对 System.Web.Extensions 的引用。删除它时出现错误。

# ruby-on-rails - Rails 3 - 在 file_column 插件中禁用文件名缓存

> ID：10315386
> 
> 赞同：0
> 
> 时间：2012-04-25T12:14:55.010
> 
> 标签：ruby-on-rails, uuid

这是我获取 UUID 的代码：

```
 def manage_id
    self.id = UUIDTools::UUID.random_create().to_s.upcase if self.id.blank?
  end 
```

这非常适合我的对象的主键。

我的问题是我想用 UUID 命名上传的文件......并且我为不同的上传获得相同的 UUID。例如，我将拥有一个 UUID，2 分钟后与另一个对象我将拥有相同的 UUID！

这是命名我的图像的类代码：

```
:filename => "#{UUIDTools::UUID.random_create().to_s.upcase}.jpg" } 
```

我不明白生成 UUID 时会出现什么问题......

我在开发中没有问题！

编辑1：问题不在于UUID本身，它与时间戳相同......（并且仅在生产中）

编辑2：我发现了问题。那个设定：

config.cache_classes = true

是生产模式的问题。它肯定会将 UUID 保存在内存中的某个位置。

我想我不能在生产模式下切换到 false （为了性能），那么为这个插件名称功能停用缓存的最佳方法是什么？

编辑 3：我添加了我的模型的完整代码

```
class Product < ActiveRecord::Base

 file_column :image, {:magick => { :versions => { "tiny" => "70x70", "small" => "160x240", "high" => "640x960" }}, :store_dir => "public/upload/wine/image", :web_root => "upload/", :filename => "#{UUIDTools::UUID.timestamp_create().to_s.upcase}.jpg" }

end 
```

所以，正如我所说，生成的 UUID 在生产中被缓存。我不知道如何强制这个模型或者插件 file_column 不被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:49:42.360

它对您不起作用的原因是您始终使用预初始化选项。但是你可以尝试改变一些东西来改进它。例如，您可以使用 lambda 表达式来计算文件名...尝试类似下一个

```
file_column :image, {:magick => 
                            { :versions => 
                                { "tiny" => "70x70", "small" => "160x240", "high" => "640x960" }
                             },
                             :store_dir => "public/upload/wine/image", 
                             :web_root => "upload/", 
                             :filename => lambda { "#{UUIDTools::UUID.timestamp_create().to_s.upcase}.jpg"} } 
```

并改变这个

> 将文件名分配给临时图像路径。更新代码@class TempUploadedFile store_upload 方法行号 219

```
@filename = options[:filename] || FileColumn::sanitize_filename(file.original_filename) 
```

至

```
options_file_name = options[:filename].respond_to?(:call) ? options[:filename].call : options[:filename]

   @filename = options_file_name || FileColumn::sanitize_filename(file.original_filename) 
```

# php - PHP 布尔搜索

> ID：10315392
> 
> 赞同：0
> 
> 时间：2012-04-25T12:15:26.410
> 
> 标签：php, regex, boolean, preg-split

我正在尝试将用户输入的字符串转换为 MySQL 布尔搜索。我有以下功能，它适用于许多场景，但它不适用于双引号。

例如，它适用于以下字符串：

String1：技术而非经理 String2：技术或经理或管理员

现在唯一不起作用的是当您输入用双引号括起来的短语时。例如：

String3（不起作用）：“技术作家”而不是“文档管理器”

这是我正在使用的功能：

```
function booltostring($input)
{
    $input = strtolower($input);
    $out = "";
    $plusflag = false;
    $minusflag = false;

    $forms = preg_split("%(and|or|not)%",$input,-1,PREG_SPLIT_DELIM_CAPTURE);
    $forms = array_map('trim',$forms);

    for($i = 0; $i < count($forms); $i++) 
    {
        switch($forms[$i]) 
        {
            case 'and':
                $plusflag = true;
                $minusflag = false;
                if(count(explode(' ',$forms[$i+1])) > 1) 
                {
                    $out .= '"+'.$forms[$i+1].'" ';
                } 
                else 
                {
                    $out .= "+".$forms[$i+1]." ";
                }
                $i++;
            break;
            case 'or':
                if(strpos($forms[$i-1],'OR')>-1 || strpos($forms[$i-1],'or')>-1)
                {
                    $plusflag = true;
                }
                if(count(explode(' ',$forms[$i+1])) > 1) 
                {
                    $out .= '"'.(($minusflag) ? "-" : "").$forms[$i+1].'" ';
                } 
                else 
                {
                    $out .= (($minusflag) ? "-" : "").$forms[$i+1]." ";
                }
                $i++;
            break;
            case 'not':
                $plusflag = false;
                $minusflag = true;
                if(count(explode(' ',$forms[$i+1])) > 1) 
                {
                    $out .= '"-'.$forms[$i+1].'" ';
                } 
                else 
                {
                    $out .= "-".$forms[$i+1]." ";
                }
                $i++;
            break;
            default:
                if(strpos($forms[$i+1],'OR')>-1 || strpos($forms[$i+1],'or')>-1)
                {
                    $plusflag = false;
                }
                if(strpos($forms[$i+1],'AND')>-1 || strpos($forms[$i+1],'and')>-1)
                {
                    $plusflag = true;
                }
                if(count(explode(' ',$forms[$i])) > 1) 
                {
                    $out .= (($plusflag) ? "+" : "")."\"".$forms[$i]."\" ";
                }
                else
                {
                    $out .= (($plusflag) ? "+" : "").$forms[$i]." ";
                }
            break;
      }
    }
    $out = trim($out);

    return $out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:26:11.370

```
"technical writer" not "document manager" 
```

该字符串不起作用，因为您没有从字符串中删除双引号

使用`trim`函数删除它们

**编辑**：

使用`TRIM`个人价值观，即“技术作家”、“文档管理员”

像这样`trim('"document manager"','"');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:28:05.230

您只需要删除您手动添加的双引号，然后它应该没问题。

比如这个

```
$out .= '"+'.$forms[$i+1].'" '; 
```

因为那些双引号已经在输入字符串中

# xml - 将 XML 数据存储在数以千计的小文件中

> ID：10315404
> 
> 赞同：0
> 
> 时间：2012-04-25T12:16:24.740
> 
> 标签：xml, sync

将数据存储在数千个单独的文件中还是在几个 XML 文件中更好？

数据在定期更新其各个部分的多个设备之间共享。为了最大限度地减少冲突，每个对象都将存储在以 GUID 命名的单个文件中。

例如，可能有 1000 个项目存储在 1000 个 XML 文件中，500 个类别存储在另外 500 个文件中。

OmniFocus 和 1Password 等应用程序目前使用这种方法的一种变体。OmniFocus 压缩了一些文件，但在 webDav 驱动器上仍然存在性能问题。

用户通常会拥有数千个文件，有些则有数万个。

在我的特殊情况下，数据存储在像 Dropbox 这样的服务上，因此中央数据库解决方案不可用。

修改数据的设备包括 iOS、Android、Mac 和 PC。

这些文件不一定需要是 XML。似乎是一种存储数据的便捷方式。

我担心这么多文件的性能和其他问题。我已经有一个使用十几个文件（分为主文件和定期更改文件）的工作解决方案，但是在这个其他解决方案中有许多边缘情况，我想知道每个 UID 一个文件是否可能更干净。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:15:40.287

抱歉，但答案是：视情况而定。一些大文件会更容易/更快，一些小文件会更容易/更快。

大文件往往意味着您将经常解析不需要的数据，并将分配内存来保存不需要的数据。

小文件意味着您需要某种方式来跟踪所有文件并为给定操作找到正确的文件。

如果没有 XML 数据库，我不想处理超过 1000 个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:36:24.013

通常我会建议将您的数据加载到某种数据库中。这使得搜索、操作和提取其他格式变得更加简单。

话虽如此，我曾经不得不设计一个依赖于数千个 CSV 文件的应用程序，总共有几百万行数据。设计目标之一是保持数据以原始格式掌握，以便帮助搜索每个文件都加载到[Solr](http://lucene.apache.org/solr/)索引中。

如果您还没有看到[Solr](http://lucene.apache.org/solr/)的实际应用，我强烈推荐它。一旦你的数据被索引，它就会提供一个基于 JSON 的 REST API 来搜索你的内容。索引很容易保持最新并且速度非常快。

# javascript-events - 如何将参数传递给事件的处理程序

> ID：10315406
> 
> 赞同：7
> 
> 时间：2012-04-25T12:16:29.317
> 
> 标签：javascript-events

如何将参数传递给事件的处理程序？

这是我想做的，不起作用：

```
for (var i = 0; i < myobj.length; i++) {
myobj[i].onmouseover = myfun(myobj[i]);
} 
```

以下也不起作用。

```
myobj[i].onmouseover = myfun.call(myobj[i]);
myobj[i].onmouseover = function () {myfun(myobj[i]);};
myobj[i].onmouseover = function () {myfun.call(myobj[i]);}; 
```

我主要对为什么它不起作用以及相同风格的解决方案感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T12:18:50.600

只需为您的处理程序使用创建者函数来封装要传递的参数。

```
function createHandler( param ) {
  return function() {
    myfun( param );
  }
}

for (var i = 0; i < myobj.length; i++) {
  myobj[i].onmouseover = createHandler( myobj[i] );
} 
```

您的方法不起作用的原因是，因为您没有传递函数引用，而是传递函数调用的结果。因此，在您的第一个示例`myfun( myobj[i] )`中进行评估，并将结果作为事件处理程序传递。

我认为，您真正的意思是，如果事件被触发，则应评估该函数。为此，您必须通过一些全局变量或作为[数据集属性](https://developer.mozilla.org/en/DOM/element.dataset)传递参数。

然而，更清洁的解决方案是具有如上所示的生成器功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T13:24:49.337

另一种方法是使用`onmouseover`将作为触发事件的 DOM 元素上的**方法**（而不是函数）调用的事实。

换句话说，编写你的代码，就好像你期望有人这样做：

```
obj = xahlees();
obj.onmouseover(); 
```

这是一个解决方案：

```
for (var i = 0; i < myobj.length; i++) {
  myobj[i].onmouseover = function() { myFun(this) };
} 
```

我上传了一个[更完整的例子](https://gist.github.com/2489155)。

# android - ListActivity 内适配器中的 add() 函数显示不支持的操作

> ID：10315413
> 
> 赞同：1
> 
> 时间：2012-04-25T12:16:41.377
> 
> 标签：android

使用的代码。我希望列表在开始时加载一次，然后在后续滚动中加载数据..

```
public class ViewPage extends ListActivity{

ListView lv;
ListAdapter ld;
int size=7;
String filename[] = new String[size];
Cursor contactcursor;
ArrayAdapter<String> arr_ad;
int contact_column_index;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mylist);

    for(int i=0;i<size;i++)
        filename[i]=new String();

    String[] proj = { ContactsContract.Contacts.DISPLAY_NAME };
    contactcursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, proj, null, null, null);
    contact_column_index = contactcursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME);
    lv = (ListView)findViewById(android.R.id.list);
    contactcursor.moveToFirst();
        for(int i=0;i<size;i++)
        {
            filename[i] = contactcursor.getString(contact_column_index);
            Toast.makeText(ViewPage.this, filename[i] +" ok "+ contactcursor.getString(contact_column_index) , 1).show();
            if(!contactcursor.moveToNext())
                break;
        }
        arr_ad = new ArrayAdapter<String>(ViewPage.this, android.R.layout.simple_list_item_1, filename);
        setListAdapter(arr_ad);
        lv.setOnScrollListener(new EndlessScrollListener());
}

public class EndlessScrollListener implements OnScrollListener {

private int visibleThreshold = size;
private int currentPage = 0;
private int previousTotal = 0;
private boolean loading = true;

public EndlessScrollListener() 
{

}

public EndlessScrollListener(int visibleThreshold) 
{
    this.visibleThreshold = visibleThreshold;
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    // TODO Auto-generated method stub
    Toast.makeText(ViewPage.this, "In" , 1).show();
     if (loading) 
     {
         if (totalItemCount > previousTotal) 
         {
            loading = false;
            previousTotal = totalItemCount;
            currentPage++;
         }
     }
     if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) 
     { 

            for(int i=0;i<size;i++)
            {
                filename[i] = contactcursor.getString(contact_column_index);
                Toast.makeText(ViewPage.this, filename[i] +" "+ contactcursor.getString(contact_column_index) , 1).show();
                arr_ad.add(filename[i]);
                if(!contactcursor.moveToNext())
                    break;

            }

            arr_ad.notifyDataSetChanged();
            //arr_ad = new ArrayAdapter<String>(ViewPage.this, android.R.layout.simple_list_item_1, filename);

            //setListAdapter(arr_ad);

            loading = true;
            Toast.makeText(ViewPage.this,totalItemCount+" "+visibleItemCount+" "+firstVisibleItem+" "+visibleThreshold+" ", 1).show();
     }
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
    // TODO Auto-generated method stub

}

}
} 
```

它在第 98 行显示错误，即 arr_ad.add(filename[i]); 并表示不支持该操作。有人可以帮忙吗！提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:45:17.390

如果要使用 ArrayAdapter 的 add 方法，则必须在构造函数中提供 List<String> 对象（不是 String[]）。

# javascript - 在向数组添加一些字符串后，数组会附加未定义。这正常吗？

> ID：10315418
> 
> 赞同：1
> 
> 时间：2012-04-25T12:16:56.090
> 
> 标签：javascript

在将一些字符串推送到数组后，我遇到了 JavaScript 数组添加额外未定义对象的问题。

```
$(function() {
    var formTagArr = [];
    $( "button", "#start-button" ).click(function() {
            $.getJSON('http://127.0.0.1:8000/some_url/', function(data) {
                formTagArr.push(buildForm(data));
                console.log(formTagArr);
                displayForm(formTagArr);
            });
    return false;
    });

    function buildForm(data) {
        for (var i = 0; i < data.length; i++) {
            var html = "";
            var questionsTags = "<fieldset><p>" + data[i].question + "</p>";
            var answersTags = "";
            for (j = 0; j < data[i].answers.length; j++) {
                answersTags += "<input type='radio' name='" + data[i].qid + 
                    "' value='" + data[i].answers[j] + "' /" + ">" + 
                     data[i].answers[j] + "\n";
            }
            html = questionsTags + answersTags + "</fieldset>";
            formTagArr.push(html);
        }
    }

    function displayForm(arr) {
        if (arr.length === 0) {
            return false;
        }
        var info = arr.pop();
        $("#question-form").append(info[0]);
    }
}); 
```

/some_url/ 返回此 JSON：

`[{"qid": 4, "question": "How many legs does a spider have?", "answers": ["4", "6", "8", "10"]}, {"qid": 2, "question": "When did Nigeria become a republic?", "answers": ["1960", "1961", "1962", "1963"]}, {"qid": 1, "question": "When did Nigeria gain independence?", "answers": ["1960", "1961", "1962", "1963"]}, {"qid": 3, "question": "How many days are in a leap year?", "answers": ["360", "362", "365", "366"]}]`

和 console.log(formTagArr); 在上面的代码中返回：

`["<fieldset><p>How many l...e='10' />10\n</fieldset>", "<fieldset><p>When did N...963' />1963\n</fieldset>", "<fieldset><p>When did N...963' />1963\n</fieldset>", "<fieldset><p>How many d...'366' />366\n</fieldset>", undefined]`

因此， displayForm() 失败，因为 info 未定义。当然，我可以只使用条件来跳过未定义的对象，但我想知道未定义的对象最初是如何到达那里的。
我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:20:38.690

```
formTagArr.push(buildForm(data)); 
```

您的 buildForm 函数不返回任何内容，上面的代码尝试将该函数的结果推送到数组中。没有 return 语句的函数最终会是未定义的。

似乎它应该只是

```
buildForm(data) 
```

由于此函数已推送到 formTagArr 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:28:55.033

[jsfiddle](http://jsfiddle.net/ryanwfiorini/fBTBY/)

您需要删除 formTagArr.push 调用，并在 displayForm 调用中将行更改为： $("#question-form").html(info);

# php - openssl_public_encrypt() 和 openssl_private_encrypt() 的输出

> ID：10315420
> 
> 赞同：0
> 
> 时间：2012-04-25T12:17:02.783
> 
> 标签：php, encryption, openssl, public-key-encryption

我想知道一些事情

*   openssl_public_encrypt() 和 openssl_private_encrypt() 函数的输出是什么？
*   上述函数的输出（加密数据），这对网络安全吗？
*   如何在网站之间传输生成的加密数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:07:53.037

`openssl_public_encrypt()`使用公钥加密消息，以便只有相应的私钥才能解密它。这用于保护信息不被不应该看到的人看到。

`openssl_private_encrypt()`使用私钥加密消息，以便任何拥有相应公钥的人都可以解密该消息。这*不是*用于保护信息免受不受欢迎的眼睛，而是用于制作数字签名以帮助验证数据没有被修改。您通常不应该使用此功能；使用`openssl_sign()`and`openssl_verify()`代替。

加密和签名通常一起使用：您获取数据，使用`openssl_sign()`您自己的私钥对其进行签名（使用 ），然后使用`openssl_public_encrypt()`接收者的公钥对其进行加密（使用 ）。将签名和加密的消息都发送给收件人，收件人可以使用`openssl_private_decrypt()`他的私钥解密消息（使用 ），并使用`openssl_verify()`您的公钥验证签名（使用 ）。这样可以确保在传输过程中没有人可以读取*或*篡改消息，这可能就是您所说的“网络安全”。

至于在网站之间传输数据，您可以以任何方式进行。HTTP、FTP、电子邮件、API 调用等等。加密和签名的全部意义在于您不必使用任何特殊方式来安全地传输消息。

# c# - 如何使用 NHibernate 从数据库中检索特定字段？

> ID：10315421
> 
> 赞同：0
> 
> 时间：2012-04-25T12:17:05.950
> 
> 标签：c#, asp.net, nhibernate

我一直在尝试使用 NHinernate 从我的数据库中检索特定字段。问题是我的用户列表一直返回 null。

我该怎么办？这是我的代码：

```
public IList<Users> GetHospitalStaff(string name) {
      ISession session = NHibernateHelper.OpenSession();
      ICriteria crt = session.CreateCriteria<Users>();
      crt.Add(Restrictions.Eq("HospitalName", name));
      crt.Add(!Restrictions.Eq("Role", "admin"));
      IList<Users> users = crt.SetProjection(Projections.ProjectionList()
        .Add(Projections.Property("Name"))
        .Add(Projections.Property("Email"))
        .Add(Projections.Property("Telephone"))
        .Add(Projections.Property("DateOfBirth"))
        .Add(Projections.Property("HospitalName"))
        .Add(Projections.Property("Role")))
        .SetResultTransformer(new NHibernate.Transform.AliasToBeanResultTransformer(typeof(Users)))
        .List<Users>();

      session.Close();
      return users;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:29:35.807

可能，您必须使用`Projection.Alias()`：

```
Projections.ProjectionList()
    .Add(Projections.Alias(Projections.Property("Name"), "Name"))
    .Add(Projections.Alias(Projections.Property("Email"), "Email"))
    .Add(Projections.Alias(Projections.Property("Telephone"), "Telephone"))
    .Add(Projections.Alias(Projections.Property("DateOfBirth"), "DateOfBirth"))
    .Add(Projections.Alias(Projections.Property("HospitalName"), "HospitalName"))
    .Add(Projections.Alias(Projections.Property("Role"), "Role")) 
```

将您的字段映射回来。

或者只是指定`.Add()`方法的第二个参数：

```
Projections.ProjectionList()
    .Add(Projections.Property("Name"), "Name")
    .Add(Projections.Property("Email"), "Email")
    .Add(Projections.Property("Telephone"), "Telephone")
    .Add(Projections.Property("DateOfBirth"), "DateOfBirth")
    .Add(Projections.Property("HospitalName"), "HospitalName")
    .Add(Projections.Property("Role"), "Role") 
```

# c++ - GDB 打印错误的值

> ID：10315430
> 
> 赞同：2
> 
> 时间：2012-04-25T12:17:29.337
> 
> 标签：c++, debugging, gdb

我在使用 GDB 调试 C++ 程序时遇到了一些问题。

当我使用`print object.member`时，它并不总是正确打印变量的值。相反，它将一个参数的值打印到我正在调试的函数中。它不会通过函数改变，尽管我改变了`object.member`整个的值。

问题是，这个程序相当大，由几个模块组成，有部分专门的模板等，所以我不能在这里全部发布。
现在我尝试创建一个最小的测试用例，但无论我尝试多么简单，我都无法让它工作。我的意思是，不工作。

所以我能问的是，有没有人在 GDB 中看到过这种行为，你有没有发现它是什么原因造成的以及如何解决它？

这里有关于类似行为的问题，但这些问题相当于程序没有正确编译（优化级别太高等）。我用 编译它`-Wall -Wextra -pedantic -g -O0`，所以不能这样。

程序运行良好；我可以`cout << object.member;`并且输出预期值，所以我不知道现在该尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:31:43.847

我以前见过类似的行为。不幸的是，gdb 确实是基于“C”的，所以虽然它会处理 C++，但我发现它偶尔对显示值非常挑剔。

当显示更复杂的项目（例如映射、字符串或智能指针的取消引用内容）时，您有时必须非常明确地取消引用和强制转换变量。

另一种可能性是函数本身——它有什么不寻常的地方吗？例如，它是模板化的吗？

您可以在代码中创建对此变量的引用并尝试显示它吗？或者获取变量的地址并取消对内容的引用——当然，前提是它是公开可用的。

自然，源代码**必须**与您编译的内容相匹配，因此必须比 exe 旧，但 gdb 通常会警告您此类事情

# f# - 如何在 F# 3.0 中使用 pseq？

> ID：10315433
> 
> 赞同：8
> 
> 时间：2012-04-25T12:17:37.997
> 
> 标签：f#, parallel-processing

在 F# 3.0 中使用 PSeq 的最佳方式是什么？

F# 3.0 没有电源包，也没有证据表明 PSeq 包含在 3.0 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T12:23:09.557

最简单的解决方案是将[PSeq.fs](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/68767#700933)文件复制到您的项目并使用 F# 3.0 进行编译。

`PSeq`module 是 PLINQ 的一个瘦包装器，在 F# PowerPack 中没有依赖关系，因此您可以独立使用它而不会出现任何问题。

还有其他选择：

*   根据 F# 3.0 从源代码编译[F# PowerPack 。](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/68767)
*   重定向文件中的 dll 使用`exe.config`。

这些技术也包含在一个类似的线程中：[如何为 F# 3.0 获取 F# powerpack](https://stackoverflow.com/questions/9662317/how-to-obtain-f-powerpack-for-f-3-0)

# c# - 重置图像的 X 位置

> ID：10315434
> 
> 赞同：0
> 
> 时间：2012-04-25T12:17:39.057
> 
> 标签：c#, xna

我编写了代码来重置 ufo 离开屏幕时的 x 位置。我已经考虑了不明飞行物可能发生的一切。下面的代码说明如果 ufo 离开屏幕，则 ufo 的 x 位置设置回 0，并通过 false 将其杀死。我不知道我还能补充什么。不明飞行物离开屏幕，再也看不到了（可怜的东西）:(有什么帮助吗？

```
 if (ufo.alive == false)
            {
                Random random = new Random();
                int randomNumber = random.Next(0, 100);

                {
                    if (randomNumber == 1)
                    {

                        ufo.alive = true;

                    }

                }
                {

                    if (ufo.XPos > 1000)
                    {
                        // kill the ufo if it goes off th 
                        ufo.alive = false;

                        ufo.XPos = 0;

                    }

                }

                //make a new one
                // here you want to do it randomly .
                // so
                //int random = random number (you have to do some code to make a random number google it.
                //if (random number == 1)
                // ufo = new ufo();
                // so if you tell it to make a random number between 1 and 1000, then every now and then, 1 will be the number it makes
                // fo when it amkes one, and randomnumber is equal to 1, it will make a new ufo.

                // i will let you figure out how to do the random bit.
                // i guess haha
            }
            //if ufo is alive
            // check for collision
            if (ufo.alive == true)
            {
                // also, we need to make it move
                ufo.XPos = ufo.XPos + 1;

                if (MissileFired != null)
                {
                    // if you miss, and the ufo carries on, it will go forever.
                    //so 

                    Rectangle rectMissile = new Rectangle((int)MissileFired.GetPosition().X, (int)MissileFired.GetPosition().Y, MissileImg.Width, MissileImg.Height);
                    Rectangle rectUFO = new Rectangle(ufo.XPos, 30, UFOImage.Width, UFOImage.Height);

                    if (rectMissile.Intersects(rectUFO))
                    {
                        PlayerScore = PlayerScore + 1000;
                        // we needed to kill the missile, other wise it gives you a point for every time it goes through.
                        MissileFired = null;
                        //now only 1000 points for winning
                        ExplosionSoundInstance.Play();
                        ufo.alive = false;
                    }
                }
            }
        } 
```

编辑代码：以上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:03:22.017

您遇到的错误很容易调试和修复，您应该学习使用调试器，它非常有用。

这是[一个调试教程](http://www.dotnetperls.com/debugging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:34:30.350

基本上，当 UFO 处于活动状态时，检查 UFO > 1000 的位置是否永远不会运行，因为它在第一个 IF 语句的范围内。

```
if (ufo.alive == false)
{
    if (ufo.XPos > 1000)
    {
    }
} 
```

如果不明飞行物在移动，你不应该在它还活着的时候检查它的位置吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:35:31.153

我不确定您的括号是否格式正确。第 5 行的左括号 { 在那里没有任何意义。另外，您最后没有右括号。

也许代码正在消亡而不是不明飞行物？

# objective-c - 带有 characterAtIndex 的 Objective-C NSString for 循环

> ID：10315435
> 
> 赞同：8
> 
> 时间：2012-04-25T12:17:43.877
> 
> 标签：objective-c, xcode, loops, for-loop

我正在尝试逐个字符地循环遍历 NSString，但出现 EXC_BAD_ACCESS 错误。您知道如何正确执行此操作吗？我已经在谷歌上搜索了几个小时，但无法弄清楚。

这是我的代码（.m）：

```
self.textLength = [self.text length];

for (int position=0; position < self.textLength; position++) {

    NSLog(@"%@", [self.text characterAtIndex:position]);

    if ([[self.text characterAtIndex:position] isEqualToString:@"."]){
        NSLog(@"it's a .");
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T12:23:29.613

字符不是对象。`characterAtIndex`返回`unichar`，它实际上是一个整数类型`unsigned short`。您需要使用`%C`而不是`%@`in `NSLog`。另外 character 不是 a `NSString`，所以你不能发送它`isEqualToString`。你需要用来`ch == '.'`比较`ch`。`'.'`

```
unichar ch = [self.text characterAtIndex:position];
NSLog(@"%C", ch);

if (ch == '.') {} // single quotes around dot, not double quotes 
```

注意，`'a'`是字符，`"a"`是C字符串并且`@"a"`是NSString。它们都是不同的类型。

当您使用`%@`with unichar `ch`in 时`NSLog`，它会尝试从`ch`无效的内存位置打印对象。因此你得到一个 EXC_BAD_ACCESS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T12:22:54.187

`characterAtIndex:`返回 a `unichar`，因此您应该使用`NSLog(@"%C", ...)`而不是`@"%@"`.

您也不能`isEqualToString`用于 a `unichar`，只需使用即可`== '.'`。

如果要查找所有 '.' 的位置，可以使用`rangeOfString`. 参考：

*   [字符串编程指南：搜索、比较和排序字符串](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/SearchingStrings.html#//apple_ref/doc/uid/20000149-CJBBGBAI)
*   [NSString 或 NSMutableString 中字符的位置](https://stackoverflow.com/q/2379997/1241690)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:27:15.683

`characterAtIndex:`返回 a `unichar`，它被声明为`typedef unsigned short unichar;`您在调用中使用的格式说明符`NSLog`不正确，您可以这样做，`NSLog(@"%u",[self.text characterAtIndex:position]);`或者`NSLog(@"%C",[self.text characterAtIndex:position]);`如果您希望打印出实际字符。

此外，由于 unichar 是按原样定义的，它不是字符串，因此您无法将其与其他字符串进行比较。尝试类似：

```
unichar textCharacter = '.';

if ([self.text characterAtPosition:position] == testCharacter) {
   // do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:28:44.920

如果要查找字符串中字符的位置，可以使用以下命令：

```
NSUInteger position = [text rangeOfString:@"."].location; 
```

如果找不到字符或文本，您将得到一个 NSNotFound：

```
if(position==NSNotFound)
    NSLog(@"text not found!"); 
```

# c# - 在 Microsoft Solver Foundation 中处理实数范围

> ID：10315437
> 
> 赞同：1
> 
> 时间：2012-04-25T12:18:13.533
> 
> 标签：c#, ms-solver-foundation

我正在处理的求解器项目（C#）需要测试是否存在解决方案，无论质量如何，或者是否存在某些输入落在某个预定义的实数范围内的问题。

我将以下示例放在一起，其中包含一个约束，表示值（参数类型）和由两个变量（决策类型）组成的方程之间的简单相等测试。

```
 const double DESIRED_OUTPUT_VALUE = -2.5;

        SolverContext solver = SolverContext.GetContext();
        Model model = solver.CreateModel();

        //Defined a value to be tested against
        Parameter output = new Parameter(Domain.Real, "output");
        output.SetBinding(DESIRED_OUTPUT_VALUE);

        //Defined a range between 1 & 10 for the input variables.
        Domain inputDomain = Domain.RealRange(1, 10);
        Decision inputA = new Decision(inputDomain, "inputA");
        Decision inputB = new Decision(inputDomain, "inputB");

        model.AddDecision(inputA);
        model.AddDecision(inputB);
        model.AddParameter(output);

        //The constraint, which given the value of output currently is not solvable.
        Constraint constraint = model.AddConstraint("result", output == inputA / inputB);

        /*Expected that the solver would report back quickly that this is no feasable solution.
         *However instead it just sits there with a blank screen... 
         */
        Solution solution = solver.Solve();
        Report report = solution.GetReport();
        Console.WriteLine(report);
        Console.ReadLine(); 
```

我观察到的是，如果约束被改变以至于没有解，并且其中表示的方程是除法或乘法，求解器似乎停止了，没有给出关于它是否仍在求解的任何反馈。

我怀疑这种类似停顿的行为与求解器正在处理实数并且正在进行一些详尽的搜索这一事实有关，但是如果更改约束以便有一个已知的解决方案，它会非常快速地工作。

在搜索了各种论坛之后，我仍然不确定是什么导致了这种行为，或者，鉴于这是我第一次使用 Microsoft Solver Foundation，我的实施方法是否正确。

有没有其他人遇到过这个问题或确实有解决方案？

d。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:42:50.790

Solver Foundation 选择的求解器取决于许多因素。一个重要因素是您如何在目标和约束中使用决策。在这种情况下，您正在划分两个决策，这意味着需要使用非常通用的求解器。

如果您可以编写模型以使目标和约束在决策对象中是线性的，那么您将获得更好的成功。我意识到这并不总是可能的，但在这种特定情况下，它可以：将 output == inputA / inputB 更改为 inputB * output == inputA。

我认为这应该有所帮助。内特

# css - 堆叠图像 CSS

> ID：10315451
> 
> 赞同：0
> 
> 时间：2012-04-25T12:18:58.933
> 
> 标签：css, image, fluid

我知道将图像堆叠在一起很容易，但我只是想知道这是否可以实现但保持流畅的图像？一旦我使用了 position 属性，我就必须提供一个宽度。然后图像不会使用浏览器重新调整大小。

谢谢你的帮助。

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:31:06.210

你当然可以使用`width: 100%;`. `display: block;`此外，如果您只是在 img 元素上指定，则不需要将它们放在 div中。您可能必须指定`max-width`，但这取决于您的特定应用程序和所需的浏览器支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:34:46.800

A`width : 100%`与`position : absolute`if一起使用`display : block`

您的问题很可能是您的 div 中只有绝对定位 img ，因此它的尺寸为空（因为定位规则。）

解决此问题的两种方法：

*   使一个 img 没有绝对定位。它的尺寸将是父 div 的尺寸

*   使用透明的 img, with `position : relative`, 与你的真实 imgs 具有相同的尺寸：它很脏，但它会设置父 div 尺寸。

仅当您的 img 尺寸相同时，这些才有效。否则，您必须使用 JS 解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:44:30.020

将照片作为空白`<img>`或`<div>`类似的东西的背景

```
.container {
  position: relative;
  height: 400px;
  width: 100%;
}

.container > div {
   position: absolute;
   top: 0;
   left: 0;
   height: 100%;
   width: 100%;
}

<div class="container">

   <div style="background: url('myimage1.jpg');"><!-- nothing --></div>
   <div style="background: url('myimage2.jpg');"><!-- nothing --></div>
   <div style="background: url('myimage3.jpg');"><!-- nothing --></div>

</div> 
```

# c# - 在应用程序处理另一个线程时更新主窗体标签中的文本

> ID：10315453
> 
> 赞同：0
> 
> 时间：2012-04-25T12:19:00.933
> 
> 标签：c#, forms, label, desktop-application

我创建了一个线程来在我的应用程序中执行某些功能，并且在执行它时我想更新用户可见的应用程序主窗体中的标签。

我试图通过调用 usinag 单独线程的函数返回字符串数据，但它不起作用。

请让我知道是否有任何解决方案可以在使用线程执行活动时更新标签文本。

```
class e2ertaData : e2erta1
{
    public void rsData()
    {
        network networkDetails = new network();
        csv csvFile = new csv();
        ftpFile ftpData = new ftpFile();
        //Host Geo Data
        string getIP = networkDetails.GetIP();
        string[] hostData = getIP.Split('~');
        GeoIP geoIPReq = new GeoIP();
        GeoIpData geoIPReqData = new GeoIpData();
        geoIPReqData = geoIPReq.GetMy();
        if (geoIPReqData.KeyValue["Error"].ToString() == "NO")
        {
            //Reading server names from XML file
            XmlDocument thisXmlDoc = new XmlDocument();
            thisXmlDoc.LoadXml(ftpData.getConfigFile("server.xml"));
            XmlNodeList xnList = thisXmlDoc.SelectNodes("/servers/server");
            //updating label in e2erta1

            this.l1.Text = "daaaaaaaaaaa";
            this.l1.Visible = true;
            this.l1.Refresh();
            foreach (XmlNode xn in xnList)
            {
                string rtNote = "";
                string requestedServer = xn["sname"].InnerText;
                string rtGet = networkDetails.GetRT(requestedServer);
                if (rtGet.Contains("Exception"))
                {
                    rtNote = rtGet;
                    //MessageBox.Show(rtNote);
                }
                try
                {
                    var row = new List<string> { rtGet, rtNote };
                    ftpData.addToCSVFile(row);
                }
                catch (Exception c)
                {
                    MessageBox.Show(c.ToString());
                }
            }
        }
        else
        {
            MessageBox.Show("Geo data : " + geoIPReqData.KeyValue["Error"].ToString());
        }
        //return null;
    }
} 
```

谢谢，

纳维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:23:01.080

从您的线程中使用它：

```
this.Invoke((MethodInvoker)delegate
{
    label.Text = "...";
}); 
```

**编辑：**

您还可以在使用前测试[IsHandleCreated](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.ishandlecreated.aspx)属性`Invoke`：

```
private void UpdateLabel(string text)
{
    if (this.IsHandleCreated)
    {
        this.Invoke((MethodInvoker)delegate
        {
            label.Text = text;
        });
    }
    else
    {
        label.Text = text;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:34:26.250

还要考虑使用`BackgroundWorker`组件。

1.  将 BackgroundWorker 从 ToolBox 拖到表单中
2.  将 backgroundworker 的属性 WorkerReportsProgress 设置为 true
3.  订阅 backgroundworker 的事件 DoWork
4.  订阅 backgroundworker 的事件 ProgressChanged

在 DoWork 事件处理程序中运行您在线程中执行的所有操作，并调用 ReportProgress 方法将进度传递给您的表单：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    // reading server names from XML file        

    for (int i = 0; i < xnList.Count; i++)
    {
        XmlNode xn = xnList[i];
        // process node

        // report percentage to UI thread
        int percentProgress = (i+1)*100/xnList.Count;
        backgroundWorker1.ReportProgress(percentProgress); 
    }
} 
```

在 ReportProgress 事件处理程序中，只需将值分配给标签：

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    label1.Text = e.ProgressPercentage.ToString();
} 
```

启动后台处理调用`backgroundWorker1.RunWorkerAsync();`

更新：您的代码不起作用，因为控件只能从创建它们的线程（UI 线程）更新。因此，您应该使用 Invoke 在 UI 线程上执行更新功能。您可以在[此处](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)找到示例和说明。

# python - 无法在 Windows Vista 的 virtualenv 中使用 pip 安装 PIL

> ID：10315454
> 
> 赞同：0
> 
> 时间：2012-04-25T12:19:01.010
> 
> 标签：python, windows, python-imaging-library, virtualenv, pip

我创建了一个名为的新 virtualenv `renamover`，然后尝试安装`pil`，`pip`但我相信安装卡住了，因为`Build`在安装期间创建的目录`pip`从未被删除。下面显示了`build\pil`位于我的`renamover`virtualenv 中的目录：

```
(renamover) C:\Users\s3z\Desktop\My Dropbox\pythons\renamover>dir build\pil
 Volume in drive C is SQ004814V03
 Volume Serial Number is A045-86B5

 Directory of C:\Users\s3z\Desktop\My Dropbox\pythons\renamover\build\pil

04/25/2012  01:58 PM    <DIR>          .
04/25/2012  01:58 PM    <DIR>          ..
04/25/2012  01:58 PM    <DIR>          build
04/25/2012  01:58 PM               239 BUILDME
04/25/2012  01:58 PM            63,751 CHANGES
04/25/2012  01:58 PM             8,940 CONTENTS
04/25/2012  01:58 PM            16,520 decode.c
04/25/2012  01:58 PM            20,783 display.c
04/25/2012  01:58 PM    <DIR>          Docs
04/25/2012  01:58 PM            35,988 doctest.py
04/25/2012  01:58 PM            13,230 encode.c
04/25/2012  01:58 PM    <DIR>          Images
04/25/2012  01:58 PM    <DIR>          libImaging
04/25/2012  01:58 PM             6,688 MANIFEST
04/25/2012  01:58 PM             8,953 map.c
04/25/2012  01:58 PM             3,869 outline.c
04/25/2012  01:58 PM            14,282 path.c
04/25/2012  01:58 PM    <DIR>          PIL
04/25/2012  01:58 PM                 4 PIL.pth
04/25/2012  01:58 PM    <DIR>          pip-egg-info
04/25/2012  01:58 PM               780 PKG-INFO
04/25/2012  01:58 PM            10,642 README
04/25/2012  01:58 PM    <DIR>          Sane
04/25/2012  01:58 PM    <DIR>          Scripts
04/25/2012  01:58 PM             5,632 selftest.py
04/25/2012  01:58 PM            17,323 setup.py
04/25/2012  01:58 PM    <DIR>          Tk
04/25/2012  01:58 PM            84,558 _imaging.c
04/25/2012  01:58 PM            16,792 _imagingcms.c
04/25/2012  01:58 PM            13,843 _imagingft.c
04/25/2012  01:58 PM             6,720 _imagingmath.c
04/25/2012  01:58 PM             1,456 _imagingtk.c
              21 File(s)        350,993 bytes
              11 Dir(s)   3,643,211,776 bytes free 
```

以下是安装期间提示中出现的错误/警告：

```
C:\Users\s3z\Desktop\My Dropbox\pythons>virtualenv --distribute renamover

New python executable in renamover\Scripts\python.exe
Installing distribute.................................................
......................................................................
......................................................................
..done.
Installing pip.................done.

C:\Users\s3z\Desktop\My Dropbox\pythons>cd renamover

C:\Users\s3z\Desktop\My Dropbox\pythons\renamover>pip install pil
'pip' is not recognized as an internal or external command,
operable program or batch file.

C:\Users\s3z\Desktop\My Dropbox\pythons\renamover>Scripts\activate

(renamover) C:\Users\s3z\Desktop\My Dropbox\pythons\renamover>pip
install pil
Downloading/unpacking pil
  Downloading PIL-1.1.7.tar.gz (506Kb): 506Kb downloaded
  Running setup.py egg_info for package pil
    WARNING: '' not a valid package name; please use only.-separated p
ackage names in setup.py

Installing collected packages: pil
  Running setup.py install for pil
    WARNING: '' not a valid package name; please use only.-separated p
ackage names in setup.py
    building '_imaging' extension
    error: Unable to find vcvarsall.bat
    Complete output from command "C:\Users\s3z\Desktop\My Dropbox\
pythons\renamover\Scripts\python.exe" -c "import setuptools;__file__='
C:\\Users\\s3z\\Desktop\\My Dropbox\\pythons\\renamover\\build\\pi
l\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'),
 __file__, 'exec'))" install --single-version-externally-managed --rec
ord c:\users\s3z\appdata\local\temp\pip-hyfdad-record\install-reco
rd.txt --install-headers "C:\Users\s3z\Desktop\My Dropbox\pythons\
renamover\include\site\python2.7":
    WARNING: '' not a valid package name; please use only.-separated p
ackage names in setup.py

running install

running build

running build_py

creating build

creating build\lib.win-amd64-2.7

copying PIL\ArgImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\BdfFontFile.py -> build\lib.win-amd64-2.7

copying PIL\BmpImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\BufrStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ContainerIO.py -> build\lib.win-amd64-2.7

copying PIL\CurImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\DcxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\EpsImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ExifTags.py -> build\lib.win-amd64-2.7

copying PIL\FitsStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\FliImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\FontFile.py -> build\lib.win-amd64-2.7

copying PIL\FpxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GbrImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GdImageFile.py -> build\lib.win-amd64-2.7

copying PIL\GifImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GimpGradientFile.py -> build\lib.win-amd64-2.7

copying PIL\GimpPaletteFile.py -> build\lib.win-amd64-2.7

copying PIL\GribStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\Hdf5StubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IcnsImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IcoImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\Image.py -> build\lib.win-amd64-2.7

copying PIL\ImageChops.py -> build\lib.win-amd64-2.7

copying PIL\ImageCms.py -> build\lib.win-amd64-2.7

copying PIL\ImageColor.py -> build\lib.win-amd64-2.7

copying PIL\ImageDraw.py -> build\lib.win-amd64-2.7

copying PIL\ImageDraw2.py -> build\lib.win-amd64-2.7

copying PIL\ImageEnhance.py -> build\lib.win-amd64-2.7

copying PIL\ImageFile.py -> build\lib.win-amd64-2.7

copying PIL\ImageFileIO.py -> build\lib.win-amd64-2.7

copying PIL\ImageFilter.py -> build\lib.win-amd64-2.7

copying PIL\ImageFont.py -> build\lib.win-amd64-2.7

copying PIL\ImageGL.py -> build\lib.win-amd64-2.7

copying PIL\ImageGrab.py -> build\lib.win-amd64-2.7

copying PIL\ImageMath.py -> build\lib.win-amd64-2.7

copying PIL\ImageMode.py -> build\lib.win-amd64-2.7

copying PIL\ImageOps.py -> build\lib.win-amd64-2.7

copying PIL\ImagePalette.py -> build\lib.win-amd64-2.7

copying PIL\ImagePath.py -> build\lib.win-amd64-2.7

copying PIL\ImageQt.py -> build\lib.win-amd64-2.7

copying PIL\ImageSequence.py -> build\lib.win-amd64-2.7

copying PIL\ImageShow.py -> build\lib.win-amd64-2.7

copying PIL\ImageStat.py -> build\lib.win-amd64-2.7

copying PIL\ImageTk.py -> build\lib.win-amd64-2.7

copying PIL\ImageTransform.py -> build\lib.win-amd64-2.7

copying PIL\ImageWin.py -> build\lib.win-amd64-2.7

copying PIL\ImImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ImtImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IptcImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\JpegImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\McIdasImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MicImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MpegImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MspImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\OleFileIO.py -> build\lib.win-amd64-2.7

copying PIL\PaletteFile.py -> build\lib.win-amd64-2.7

copying PIL\PalmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PcdImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PcfFontFile.py -> build\lib.win-amd64-2.7

copying PIL\PcxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PdfImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PixarImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PngImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PpmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PsdImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PSDraw.py -> build\lib.win-amd64-2.7

copying PIL\SgiImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\SpiderImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\SunImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TarIO.py -> build\lib.win-amd64-2.7

copying PIL\TgaImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TiffImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TiffTags.py -> build\lib.win-amd64-2.7

copying PIL\WalImageFile.py -> build\lib.win-amd64-2.7

copying PIL\WmfImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XbmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XpmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XVThumbImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\__init__.py -> build\lib.win-amd64-2.7

running build_ext

building '_imaging' extension

error: Unable to find vcvarsall.bat

----------------------------------------
Command "C:\Users\s3z\Desktop\My Dropbox\pythons\renamover\Scripts
\python.exe" -c "import setuptools;__file__='C:\\Users\\s3z\\Deskt
op\\My Dropbox\\pythons\\renamover\\build\\pil\\setup.py';exec(compile
(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" inst
all --single-version-externally-managed --record c:\users\s3z\appd
ata\local\temp\pip-hyfdad-record\install-record.txt --install-headers
"C:\Users\s3z\Desktop\My Dropbox\pythons\renamover\include\site\py
thon2.7" failed with error code 1 in C:\Users\s3z\Desktop\My Dropb
ox\pythons\renamover\build\pil
Storing complete log in C:\Users\s3z\AppData\Roaming\pip\pip.log 
```

此外，当我尝试`import pil`使用`renamover`virtualenv Python 解释器时，我会得到`ImportError`这样的结果：

```
(renamover) C:\Users\s3z\Desktop\My Dropbox\pythons\renamover>python

Python 2.7 (r27:82525, Jul  4 2010, 07:43:08) [MSC v.1500 64 bit (AMD6
4)] on win32
Type "help", "copyright", "credits" or "license" for more information.

>>> import pil
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named pil 
```

那么如何在 Windows Vista 上的 virtualenv 中`pil`正确安装呢？`pip`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:08:11.743

您可以尝试使用[Pillow](http://pypi.python.org/pypi/Pillow/)作为 PIL 兼容的分支。

即使在 Linux 上安装 PIL 时我也遇到问题 :)

# android - 未经许可不允许启动服务 Intent X Y

> ID：10315455
> 
> 赞同：10
> 
> 时间：2012-04-25T12:19:04.330
> 
> 标签：android, service, android-intent, android-c2dm

```
04-25 14:16:30.931: E/AndroidRuntime(6638): FATAL EXCEPTION: main
04-25 14:16:30.931: E/AndroidRuntime(6638): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { (has extras) }} to activity {com.exclusive26.igale/com.exclusive26.igale.Push_Activity}: java.lang.SecurityException: Not allowed to start service Intent { act=com.google.android.c2dm.intent.REGISTER pkg=com.google.android.gsf (has extras) } without permission com.google.android.c2dm.permission.RECEIVE
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2553)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2595)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread.access$2000(ActivityThread.java:121)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.os.Looper.loop(Looper.java:130)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread.main(ActivityThread.java:3701)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at java.lang.reflect.Method.invoke(Method.java:507)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at dalvik.system.NativeStart.main(Native Method)
04-25 14:16:30.931: E/AndroidRuntime(6638): Caused by: java.lang.SecurityException: Not allowed to start service Intent { act=com.google.android.c2dm.intent.REGISTER pkg=com.google.android.gsf (has extras) } without permission com.google.android.c2dm.permission.RECEIVE
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ContextImpl.startService(ContextImpl.java:867)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.content.ContextWrapper.startService(ContextWrapper.java:336)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at com.google.android.c2dm.C2DMessaging.register(C2DMessaging.java:54)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at com.exclusive26.igale.Push_Activity.register(Push_Activity.java:124)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at com.exclusive26.igale.Push_Activity.onActivityResult(Push_Activity.java:58)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
04-25 14:16:30.931: E/AndroidRuntime(6638):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2549)
04-25 14:16:30.931: E/AndroidRuntime(6638):     ... 11 more 
```

意图确实在清单中具有适当的权限：

显现：

```
<permission
    android:name="com.exclusive26.igale.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.exclusive26.igale.permission.C2D_MESSAGE"/>
<uses-permission android:name="com.exclusive26.igale.c2dm.permission.RECEIVE"/>
...
...
<activity android:name=".Push_Activity"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
    </intent-filter>
</activity>
...
...
<service android:name=".C2DMReceiver" />

<receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND">

    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <category android:name="com.exclusive26.igale" />
    </intent-filter>

    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.REGISTRATION"/> 
        <category android:name="com.exclusive26.igale" />
    </intent-filter>
</receiver> 
```

在 Push_Activity.java 中检查以下代码：

```
com.google.android.c2dm.C2DMessaging.register( this, com.exclusive26.igale.Config.C2DM_SENDER ); 
```

在 C2DMessaging.register 中正确发送的参数（Push_Activity 上下文和一些电子邮件地址 <-- 静态最终字符串）：

```
public static void register(Context context,
        String senderId) {
    Intent registrationIntent = new Intent(REQUEST_REGISTRATION_INTENT);
    registrationIntent.setPackage(GSF_PACKAGE);
    registrationIntent.putExtra(EXTRA_APPLICATION_PENDING_INTENT,
            PendingIntent.getBroadcast(context, 0, new Intent(), 0));
    registrationIntent.putExtra(EXTRA_SENDER, senderId);
    context.startService(registrationIntent);
    // TODO: if intent not found, notification on need to have GSF
} 
```

在 startService() 我得到了异常。没有 idia 如何解决这个问题。请阐明这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-14T14:41:41.993

仅供未来出现此错误的用户使用：清单文件应如下所示：

```
<permission
    android:name="YOUR_PACKAGE.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="YOUR_PACKAGE.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

代替

```
<permission
    android:name="YOUR_PACKAGE.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="YOUR_PACKAGE.permission.C2D_MESSAGE" />
<uses-permission android:name="YOUR_PACKAGE.permission.RECEIVE" /> 
```

我花了大约 5 个小时来找出我的项目出了什么问题 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:27:48.453

也许我遗漏了一些东西，但错误显示“com.google.android.c2dm.permission.RECEIVE”并且清单包含“com.google.android.c2dm.permission.SEND”所以我看不到完美匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T12:42:53.480

代码是正确的。我创建了一个新项目，复制了代码，没有问题了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-31T11:14:20.743

如果我们在 Activity Java 文件中错误地使用了某些资源的名称，也可能会出现此错误。我也遇到了同样的错误，但我还没有使用任何服务或权限。问题出在资源 ID 错误的 onCreate() 方法上。

# java - 将 PreparedStatement 批处理与 Statement 批处理混合，可以吗？

> ID：10315456
> 
> 赞同：1
> 
> 时间：2012-04-25T12:19:04.987
> 
> 标签：java, database, jdbc

是否可以以某种方式将 PreparedStatement 批处理与 Statement 批处理混合并保持两者在单个事务中执行的好处？

我拥有的是我自己的代表事务的数据访问对象。我想像这样使用它：

```
/* here transaction starts: object receive connection, etc. */
MyTableTransactionObject myTable = new MyTableTransactionObject();

myTable.clear();
myTable.insert(Row1);
myTable.insert(Row2);
myTable.insert(Row3);
myTable.doSomethingElse();
myTable.insert(Row4);

/* here transaction ends, batches are executed changes are commited,
   statements are closed */
myTable.execute();
myTable.close(); 
```

MyTableTransactionObject 的“幕后”有使用 Statement 或 PreparedStatements 的方法（可能有多个 PreparedStatements）。例如：在`clear()`方法中我想使用`statement.addBatch("DELETE FROM table;")`，在`insert(...)`方法中我想使用特殊的 PreparedStatement 来执行 SQL`INSERT`操作，在`doSomethingElse(...)`我想使用不同的 PreparedStatement 来做其他事情等等。

我怎样才能按照调用它们的顺序执行这些语句`myTable.execute()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T17:40:53.497

这不是最优雅的解决方案，您将付出 %$# 的性能，但它确实有效。

```
public class DBEngine {

private final int defaultBatchSize = 1000;

private Pool pool = null;
private Connection con = null;
private PreparedStatement ps = null;
private ArrayList<PreparedStatement> globalBatch = new ArrayList<PreparedStatement>();
private int k = 0;  //bean-wide batch counter
private boolean debugMode = false;
private PreparedStatement batchPs = null;
//--------------------------------
DBEngine(){
    this.pool = new Pool();
    this.con = pool.getConnection();
    this.ps = null;
    this.k = 0;  //bean-wide batch counter
}
//-------------
boolean mixedBatchTime(boolean force){
    return mixedBatchTime(defaultBatchSize, force);
}
//-------------
boolean mixedBatchTime(int customBatchSize){
    return mixedBatchTime(customBatchSize, false);
}
//-------------
boolean mixedBatchTime(){
    return mixedBatchTime(defaultBatchSize, false);
}
//-------------
// Executes a mixed batch of PreparedStatements
//-------------
boolean mixedBatchTime(int customBatchSize, boolean force){

    if(k > customBatchSize - 1 || force){
        try {
            StringBuilder sqlStmt = new StringBuilder();

            for(int i = 0; i < globalBatch.size(); i++){
                sqlStmt.append(globalBatch.get(i) + "; ");
            }

            batchPs = con.prepareStatement(sqlStmt.toString());    
            batchPs.execute();
            ps = null;
            sqlStmt = null;
            batchPs = null;
        } catch (SQLException e) {
            e.printStackTrace();
        }
        k = 0;
        globalBatch = null;
        globalBatch = new ArrayList<PreparedStatement>();
        return true;
    }else return false;

  }
} 
```

您必须在**DBEngine bean 内部的**实际批处理准备部分中增加 k，例如：

```
 //------------------------------------------
     boolean updateSomeQuantity(int someID, int someQuantity){

        try{
            // detects if the statement has changed in order to recompile it only once per change 
            if(ps!=null && !ps.toString().contains("UPDATE sometable SET somequantity =")){
                ps = null;
                String updateStmt = "UPDATE sometable SET somequantity = ? WHERE someID = ?";
                ps = con.prepareStatement(updateStmt);
            }else if(ps == null){
                String updateStmt = "UPDATE sometable SET somequantity = ? WHERE someID = ?";
                ps = con.prepareStatement(updateStmt);
            }

            ps.setInt(1, someQuantity)
            ps.setInt(2, someID);

            globalBatch.add(ps);
            k++;   // very important

            return true;

        } catch (SQLException e) {
            e.printStackTrace();
            if(e.getNextException() != null) e.getNextException().printStackTrace();
            return false;
          }
    } 
```

实际实现在另一个代码中，您在其中实例化 DBEngine bean 的实例并在循环中使用 updateSomeQuantity(somequantity) 方法和 mixedBatchTime() 方法。循环完成后，调用mixedBatchTime(true) 对剩余的任何内容进行批处理。

注意：此解决方案使用 AutoCommit(true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:26:13.237

如果您的 Statements/PreparedStatements 共享一个公共连接并且您没有在该连接上提交事务，那么它们将共享一个公共事务。

# java - 如何使用java开发基于JXTA2.X与Tomcat（或其他serlvet容器）集成的p2p服务器？

> ID：10315457
> 
> 赞同：0
> 
> 时间：2012-04-25T12:19:06.217
> 
> 标签：java, cloud, p2p, jxta, fileserver

基本要求：

```
1\. Build a file server (back is cloud-storage server)
2\. Build satellite servers for private company
3\. file server and satellite server shared file metadata and authorization. 
```

我承认 p2p 符合我们的要求（不确定）。

目前，我刚刚找到以下教程： [The JXTA solution to P2P](http://www.javaworld.com/javaworld/jw-10-2001/jw-1019-jxta.html?page=7)和 book [Mastering JXTA](http://www.google.com.hk/url?sa=t&rct=j&q=mastering%20jxta&source=web&cd=1&ved=0CC0QFjAA&url=ftp://92.241.233.90/pub/trashyard/library/DEV_BOOKZ/Java/Mastering%2520JXTA%2520%28Wiley%29.pdf&ei=t-qXT7mTCoig2AWBjbX8Bg&usg=AFQjCNE85kA2FyMJ7ytbLXC57PvRgoQ4mA)。

提示任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:51:22.093

我们在[b2een](http://b2een.com/download.html)中做过类似的事情，基本上是 Jetty+JXTA+Other Stuff。Jetty 处理 UI、REST 等。而 JXTA 处理 b2een 对等点之间的通信和数据交换。

所以，这是可行的，让我给你几个警告：

1.  像 JXTA 这样的 P2P 网络在两件事上表现出色：处理非集中式网络（“直接”对等通信）和跨越防火墙（通过中继）。如果您有一个带有中央服务器和远程客户端的星型网络，请不要使用 P2P：您将拥有这些网络的所有复杂性而没有好处。
2.  不再维护 JXTA。由于 Oracle 不愿意向开源社区发布名称，我们无法将 JXTA 转移到 Apache 基金会，维护者也离开了。

现在，话虽这么说，我已经编程很多年了，在 p2p 网络上工作绝对是我做过的最激动人心的事情之一。

# sql - 如何将三值逻辑应用于 SQL 查询？

> ID：10315459
> 
> 赞同：3
> 
> 时间：2012-04-25T12:19:08.197
> 
> 标签：sql, three-valued-logic

我一直在做过去的纸质问题，并不断提出这些涉及 3 个有价值逻辑的问题。我的笔记提到了它，但没有给出与考试中要求的例子相关的例子。

我理解`True = 1`, `False = 0`&`Unknown = 1/2`以及`And = Min`,`Or = Max`和的基础`Not(x) = 1-x`。但是我不知道如何将其应用于以下问题：

> 在 SQL 中，讨论以下表达式的可能真值：
> Ra > Rb OR Ra <= 0 OR Rb >= 0
> 证明你的答案是正确的。

和：

> Owner 表的电话和年龄字段中可能包含空值。考虑所有可能的组合，显示表达式可能返回三个真值中的哪一个：
> phone = '141-3304913' OR age <50 OR age >= 50

任何为我澄清这些的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:38:18.873

我将重点放在具体的例子上，这更适合澄清事情。简而言之，您的逻辑表达式由三个子句的连词组成

```
C1: phone = '141-3304913'
C2: age < 50
C3: age >= 50 
```

其三布尔逻辑表明结果是

```
True, if any clause is true
False, if all clauses are false
Unknown, in all the other cases 
```

因此，如果与 True 关联的值最大，与 False 关联的值最小，而与 Unknown 关联的任何中间值，那么取`MAX`for 连词证明是正确的。同样，析取函数也适用于`MIN`函数。只要我们将 0 和 1（排除）之间的任何值解释为未知，否定就有效；显然，如果我们取 1/2，则否定函数是“稳定的”，但这在数学方面并不重要。

更有效的是，这些子句清楚地对您的`phone`变量`P`和`age`变量的以下值（实例）做出反应`A`：

```
P1 such that P1 = '141-3304913'
P2 such that P2 <> '141-3304913'
P3 such that P3 = NULL
A1 such that A1 < 50
A2 such that A2 >= 50
A3 such that A3 = NULL 
```

在条款的满足方面，我们有

```
P1 -> C1 = 1
P2 -> C1 = 0
P3 -> C1 = 1/2
A1 -> C2 = 1, C3 = 0
A2 -> C2 = 0, C3 = 1
A3 -> C2 = C3 = 1/2 
```

通常存在 3*3 种可能的组合，因为您的两个变量中的每一个都采用三个可能的值：

```
P1 A1: C1 = 1, C2 = 1, C3 = 0 -> MAX(1,1,0) = 1 -> true
P1 A2: C1 = 1, C2 = 0, C3 = 1 -> MAX(1,0,1) = 1 -> true
P1 A3: C1 = 1, C2 = 1/2, C3 = 1/2 -> MAX(1,1/2,1/2) = 1 -> true
P2 A1: C1 = 0, C2 = 1, C3 = 0 -> MAX(0,1,0) = 1 -> true
P2 A2: C1 = 0, C2 = 0, C3 = 1 -> MAX(0,0,1) = 1 -> true
P2 A3: C1 = 0, C2 = 1/2, C3 = 1/2 -> MAX(0,1/2,1/2) = 1/2 -> unknown
P3 A1: C1 = 1/2, C2 = 1, C3 = 0 -> MAX(1/2,1,0) = 1 -> true
P3 A2: C1 = 1/2, C2 = 0, C3 = 1 -> MAX(1/2,0,1) = 1 -> true
P3 A3: C1 = 1/2, C2 = 1/2, C3 = 1/2 -> MAX(1/2,1/2,1/2) = 1/2 -> unknown 
```

特别是，由于 C2 和 C3 是互斥的，因此您永远不会因为合取而得到 False。

该表达式`R.a > R.b OR R.a <= 0 OR R.b >= 0`反而呈现了这些情况：

```
R.a <= 0, R.a > 0, R.a = unknown
R.b >= 0, R.b < 0, R.b = unknown
R.a - R.b > 0, R.a - R.b <= 0, R.a - R.b = unknown 
```

`R.a - R.b`显然，我们有 3 个变量和 27 个可能的情况，但可以轻松排除几个相关的情况。

# java - 绘制 d 维数据

> ID：10315460
> 
> 赞同：1
> 
> 时间：2012-04-25T12:19:23.613
> 
> 标签：java, r, matlab, plot, octave

我在 .txt 文件中有以下数据格式。

```
नोभेम्बर 
 [0.013597779962868256, -0.10849757437254635, -0.15999846585159766, -1.2417475384869558, -0.6802765400695919, 0.44552601044477186, 0.10820787964125786, -1.584483680411645, 0.2007759414522207, -0.7101547556233192]
 बाट
[0.7488351202673913, 0.3645634610332536, 0.1937027124201285, -0.10361011958447905, 0.48222626651261347, 0.36795608937720814, -0.06307932558713457, -0.05626217864435294, -0.5245206209054951, 0.40256760017279525]
रूपमा
[0.06077674960453302, 0.2570556052636379, 0.3347552495487344, -0.10512580657948888, 0.10414134700640766, 0.19736087970834254, 0.09207914995816116, 0.19904934221006, 0.061402311347008, -0.11409541813280075]
बोर्डमा
[0.5200111891848155, -0.14947230042320633, 0.7351562111464331, -0.7542450932215059, 1.4477558941048831, -0.6235133303135835, -0.7781689512584442, -0.057886889872348815, 0.10625424653444066, 0.9777761194886687]
आउनु
[1.0596966006985387, 0.24909505933749815, 0.5181999691383957, -0.01983089009044503, -1.4106664226234644, -0.020542297788816014, -0.7822719255911348, 0.42914674116391344, -0.5753257725556651, -0.9141151600890186] 
```

这个词就像 `नोभेम्बर` 是数据点，而数值是它们的向量表示。我想以这些表示为坐标并绘制它们以找到它们之间的关系。绘制它们的可能性是什么。非常感谢任何建议的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:03:49.597

我的 GUI 无法处理项目名称的字体，但如果我将它们命名为：a、b、cc、d、e，您可以使用平行坐标图来显示多维特征：

```
require(MASS)  # an R package
parcoord(data.frame(a=a,b=b,cc=cc,d=d,e=e), col=1:5) 
```

![在此处输入图像描述](../Images/d11502925f564ec305553b3d3f43fab6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T21:46:42.567

这是一个 MATLAB 解决方案。

首先我们读取数据。尽管 MATLAB 能够读取 Unicode 文本，但[它在 GUI 中显示它有一些问题](https://stackoverflow.com/a/6872642/97160)（所以我只是用 Point1/Point2 等替换标签。）

```
%# read file lines
fid = fopen('data.txt', 'rt', 'native', 'UTF-8');
C = textscan(fid, '%s', 'Delimiter','\n');
fclose(fid);
C = C{1};

%# split into labels/data
labels = C(1:2:end);
data = cellfun(@str2num, C(2:2:end), 'UniformOutput',false);
data = cell2mat(data);

%# HACK: MATLAB has issues displaying unicode text
labels = num2str((1:size(data,1))', 'Point %d'); 
```

接下来我们可以使用[平行坐标](https://stackoverflow.com/a/3942575/97160)绘制数据：

```
%# you might need to normalize the attributes
%#data = zscore(data);

plot(data');            %'# plot lines
set(gca, 'XTick',1:numDim, 'XGrid','on')
xlabel('Features'), ylabel('Feature value')
title('Parallel Coordinates')
legend(labels)          %# show legend of labels 
```

![平行坐标](../Images/466431a9127b48c38f476ffb59208a41.png)

如果您有权访问统计工具箱，则可以使用多种技术[可视化多元数据：](http://www.mathworks.com/products/statistics/demos.html?file=/products/demos/shipping/stats/mvplotdemo.html)

```
%# parallel coordinates (similar the above)
parallelcoords(data, 'Group',labels)

%# glyph plot (stars)
glyphplot(data, 'obslabels',labels, 'glyph','star') 
```

![glyphplot_star](../Images/8ca92c74f29a63d6ddce50ea3aa6bbc8.png)

```
%# glyph plot (Chernoff faces)
glyphplot(data, 'obslabels',labels, 'glyph','face') 
```

![glyphplot_face](../Images/e8fe45c894d3768966704ca7eb0217e4.png)

```
%# Andrews curves
andrewsplot(data, 'Group',labels) 
```

![安德鲁斯图](../Images/ddcc424fb8cb58b00a6828f757509b16.png)

# authentication - 破坏了我的 LifeRay+CAS 安装

> ID：10315470
> 
> 赞同：1
> 
> 时间：2012-04-25T12:20:08.760
> 
> 标签：authentication, liferay

我在 6.1 版中将 LifeRay 与 CAS 结合使用。出于测试目的，我想暂时停用 CAS 并改用 LifeRay 的本机登录功能。因此，我在门户设置中停用了 CAS。现在，我无法登录 LifeRay，因为即使我点击“登录”，我也会收到“您无权查看此页面”。我在哪里可以在配置文件或数据库中再次激活 CAS，或者如何返回 LifeRay 的本机登录功能？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:08:22.090

在您的 portal-ext.properties 中添加以下内容（您也可以创建属性挂钩，但由于这是临时的，我建议您暂时更改它，然后进行清理然后删除属性）并重新启动服务器

```
auto.login.hooks=com.liferay.portal.security.auth.CASAutoLogin,com.liferay.portal.security.auth.FacebookAutoLogin,com.liferay.portal.security.auth.NtlmAutoLogin,com.liferay.portal.security.auth.OpenIdAutoLogin,com.liferay.portal.security.auth.OpenSSOAutoLogin,com.liferay.portal.security.auth.RememberMeAutoLogin,com.liferay.portal.security.auth.SiteMinderAutoLogin,com.liferay.portal.security.auth.ParameterAutoLogin 
```

一旦服务器重新启动，将以下参数添加到 liferay 的任何 url

```
?parameterAutoLoginLogin=test@liferay.com&parameterAutoLoginPassword=test 
```

将凭据更改为您的管理员凭据

# c++ - 删除注册表项 - MSDN 示例中的错误

> ID：10315472
> 
> 赞同：3
> 
> 时间：2012-04-25T12:20:13.277
> 
> 标签：c++, windows, registry

[这篇](http://msdn.microsoft.com/en-us/library/ms724235%28VS.85%29.aspx)MSDN 文章应该演示如何删除具有子项的注册表项，但代码存在缺陷。

说的那一行

```
StringCchCopy (lpEnd, MAX_PATH*2, szName); 
```

导致异常，这是由于试图复制到 lpEnd 的缓冲区之外。我尝试通过用以下内容替换该行来纠正解决方案

```
size_t subKeyLen = lstrlen(lpSubKey);
size_t bufLen = subKeyLen + lstrlen(szName)+1;
LPTSTR buf = new WCHAR[bufLen];
StringCchCopy(buf,bufLen,lpSubKey);
StringCchCopy(buf+subKeyLen,lstrlen(szName)+1,szName);
buf[bufLen-1]='\0'; 
```

由于目标平台和开发平台不同，我无法单步执行代码，但是从我在代码中输入的日志来看，它看起来只是冻结了，但没有引发异常。

令人沮丧的是 MSDN 文章是错误的……你会认为它们会被检查。

关于如何纠正这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:11:17.483

If you don't mind having `Shlwapi.dll` as an additional dependency, it may be easier for you just to use [SHDeleteKey](http://msdn.microsoft.com/en-us/library/bb773486%28v=vs.85%29.aspx). If you're only targetting Vista+, [RegDeleteTree](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379776%28v=vs.85%29.aspx) (which lives in `Advapi32.dll`) is another alternative.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:35:40.963

这种改变本身是不够的。它后面的代码行：

```
 if (!RegDelnodeRecurse(hKeyRoot, lpSubKey)) {
            break; 
```

也需要改变。 `lpSubKey`将需要替换为，`buf`因为它现在包含完整的密钥。

这可能是不言而喻的，但一定要释放（删除）`buf`作为清理的一部分。

但是，为了正确起见，似乎最好通过更改原始代码行以传递正确的长度来修复原始代码行（这*应该*没问题，因为我相信注册表中的最大密钥长度是 255）：

```
StringCchCopy (lpEnd, MAX_PATH*2 - lstrlen(lpSubKey), szName); 
```

# objective-c - 如何从 UISplitViewController IOS 5 导航回来？

> ID：10315473
> 
> 赞同：1
> 
> 时间：2012-04-25T12:20:17.280
> 
> 标签：objective-c, ios5, uiviewcontroller, uinavigationcontroller, uisplitviewcontroller

我有 6 个视图，其中我将 UISplitViewController 放置在第 4 个位置（即第 4 个视图）。现在，当我从第三视图导航到第四视图（即 ViewController 到 SplitView）时，我想回到第四视图到第三视图（即 SplitView 到 ViewController）。

当我从第三个视图导航到第四个视图时，我使用下面的代码来显示 UISplitViewController。

```
MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
            UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

            DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
            UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

            masterViewController.detailViewController = detailViewController;
            self.splitViewController = [[UISplitViewController alloc] init];
            self.splitViewController.delegate = detailViewController;
            self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];
            AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
            appDelegate.window.rootViewController = self.splitViewController; 
```

现在，我以编程方式在导航栏中创建了一个工具栏并放置了一个后退按钮。下面是我试图将视图弹出回视图控制器的代码。（即从SplitView 到ViewController）。

```
-(IBAction)backbtn:(UIBarButtonItem *)sender
{
//    RepresentativeAccount<UISplitViewControllerDelegate> *represent = [[RepresentativeAccount alloc]initWithNibName:@"RepresentativeAccount" bundle:nil];
//    //[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:2] animated:YES];
//    [[self.splitViewController.viewControllers objectAtIndex:0]popToViewController:represent animated:YES];
} 
```

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:20:17.250

参考：[查看 iOS 的控制器目录](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Introduction.html#//apple_ref/doc/uid/TP40011313)

> 拆分视图控制器必须始终是您创建的任何界面的根。

换句话说，您必须始终将来自`UISplitViewController`对象的视图安装为应用程序窗口的*根视图。*

> 然后，拆分视图界面的窗格可能包含导航控制器、选项卡栏控制器或您需要实现界面的任何其他类型的视图控制器。

拆分视图控制器不能以模态方式呈现。

因此，您的尝试是不正确的，实际上您的应用程序可能会被 Apple 拒绝。

# c# - Linux 生物信息学工具

> ID：10315474
> 
> 赞同：1
> 
> 时间：2012-04-25T12:20:18.023
> 
> 标签：c#, linux, bioinformatics

我正在寻找一个数据可视化工具来可视化生物数据。我习惯于成为 C# 和 .net 编码器。但是，据我了解，如果您在 ubuntu 中运行 C# 应用程序，您可能会遇到麻烦。对使用这些规范的语言有什么建议吗？我在考虑 Java，但很乐意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:47:57.840

C# 是一个不错的选择，尤其是在您已经了解该语言的情况下。[C# 和 .NET 框架与Mono 项目](http://www.mono-project.com/Main_Page)具有可靠的跨平台端口，您可以使用[Gtk#](http://www.mono-project.com/GtkSharp)绑定创建 Gnome UI 。

作为替代方案，Java 用于许多生物信息学应用程序。尽管我个人不得不说，其中大多数都有糟糕的用户界面，而且 Java 的内存管理似乎不适合处理生物信息学中常见的数据大小——工具通常会耗尽内存或变得非常慢。这不一定是 Java 的固有问题，也不一定是马虎编程，但 Java 肯定无济于事。

Java 的替代品也可以是带有合适 GUI 库的 Python（有一些不错的库），特别是因为 Python 提供了更好、更优美的语法。

另一个值得的选择，特别是如果你真的在处理大数据或者如果性能很重要，那就是用[Qt](http://qt.nokia.com/products/)构建 GUI 的 C++。请注意，如果您还不精通 C++，这将使开发变得更加复杂。

# javascript - 如何在特定位置的 contenteditable div 中添加/插入/更新文本？

> ID：10315478
> 
> 赞同：6
> 
> 时间：2012-04-25T12:20:25.750
> 
> 标签：javascript, jquery, html, contenteditable

HTML 代码如下所示

```
<div id="txtarea" contenteditable="true">Some text</div> 
```

我必须根据上述 div 中特定位置的某些事件插入一些新文本。该事件调用函数说 updateDiv(txt, positon)。例如它说
`updateDiv("more ",5);`

所以 div 应该变成

```
<div id="txtarea" contenteditable="true">Some more text</div> 
```

我尝试了很多 javascript 和 jquery，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:31:01.287

我是这样做的：

```
var position = 5,
    txt = "more ";
var current = $("#txtarea").html();
//alert(current.substring(0, position))
var endVal = current.substring(position);
var newValue = current.substring(0, position) + txt + endVal;
$("#txtarea").html(newValue);​ 
```

[jsfiddle](http://jsfiddle.net/qwsRM/)显示它'在行动'。

**编辑**：用上面评论中列出的方法更新[了](https://stackoverflow.com/a/4364902/469643)[jsfiddle](http://jsfiddle.net/qwsRM/1/)。相当光滑！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:31:57.903

如果您的可编辑内容`<div>`始终由单个文本节点组成，这相对简单，您可以使用下面的代码。

```
var div = document.getElementById("txtarea");
var textNode = div.firstChild;
textNode.data = textNode.data.slice(0, 5) + "more " + textNode.data.slice(5); 
```

否则，您需要阅读有关[DOM 范围](https://developer.mozilla.org/en/DOM/range)的信息（请注意，IE < 9 不支持它们）并使用类似[此答案](https://stackoverflow.com/a/10299622/96100)的内容来创建与内容中的字符索引相对应的范围，然后使用`insertNode()`.

```
var div = document.getElementById("txtarea");
var range = createRangeFromCharacterIndices(div, 5, 5);
range.insertNode(document.createTextNode("more ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:51:31.180

使用这个功能：

```
String.prototype.splice = function( position, newstring ) {
    return (this.slice(0,position) + newstring + this.slice(position));
}; 
```

并将此功能用作：

```
var oldstr=$('#txtarea').html();
var newstr='more';
var position = 5;
$('#txtarea').html(oldstr.splice(position , newstr); 
```

# django - Django - 带有自动完成功能的 Javascript 动态内联 FormSet

> ID：10315479
> 
> 赞同：2
> 
> 时间：2012-04-25T12:20:30.080
> 
> 标签：django, autocomplete, django-forms

我正在尝试制作一种能够附加参与者的调度程序事件编辑器。

## 楷模

```
class Session(models.Model):
  start_time = models.DateTimeField()
  end_time = models.DateTimeField()

class Participation(models.Model):
  session = models.ForeignKey(Session)
  participant = models.ForeignKey(User)
  status = models.CharField(max_length=1, choices=STATUSES) 
```

在编辑器中，我希望有一个自动完成搜索输入，我可以从中找到`user`要添加到会话中的 s

## 预习

![会话编辑器](../Images/c708b0b1c81e230459f123e9f099f1e7.png)

在这里，我输入了“laurent”，我将通过单击其中一个结果名称来添加一个人
参与者颜色取决于他们`status`

我有一个`Session`用开始和结束时间定义的对象的表单
现在我想我应该有一个s的*内联表单集*`Participation`

## 问题

*   您是否建议我为参与者使用*内联表单集？*
*   如何动态添加/删除参与者行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T16:14:55.073

这个问题看起来很简单，但正确的回答将涉及几个答案。

我将使用 jQuery 逐点给出我的解决方案。

# 自动完成

这是简单的部分。您可以使用[select2](https://github.com/ivaynberg/select2)或[jqueryui 自动完成](http://jqueryui.com/autocomplete/)之类的插件以及查找用户的视图

```
def search_users(request):
    search = request.GET.get('term')
    users = User.objects.filter(
      Q(first_name__icontains=search)
    | Q(last_name__icontains=search)
    )
    ulist = list({'id': u.id, 'value': u'%s %s' % (u.first_name, u.last_name)}
        for u in users)
    return JsonResponse(ulist) 
```

*此视图与默认的 jQuery UI 自动完成插件兼容*

# 动态表单集

这是一个棘手的问题。关键是要利用`management_form`和`form.DELETE`。这是我的解决方案：

*   为参与者使用内联表单集（带有一个额外的表单）
*   打印`management_form`
*   通过克隆一个隐藏的空表单（额外的一个）并增加自动完成选择后，使用 jQuery 添加表单行`id_form-TOTAL_FORMS`
*   通过隐藏它们并选中隐藏的删除复选框，使用 jQuery 删除表单行

## 模板

```
<form method="post">{% csrf_token %}
{{ sessionform }}
<div>
{{ participant_formset.management_form }}
  <label for="part_search">Search: </label><input id="part_search" />
    <ul id="participation_set">
{% for tform in participant_formset %}
    {{ tform.id }}
      <li>
        <span class="participant">
          {{ tform.participant }}{{ tform.instance.participant.name }}
        </span>
        <span class="status">{{ tform.status }}</span>
        <span class="delete ui-icon ui-icon-circle-minus">
          {{ tform.DELETE }}
        </span>
      </li>
{% endfor %}
    </ul>
</div>
</form> 
```

## CSS

```
/* Delete button */
#participation_set .delete {
  display: inline-block;
  vertical-align: middle;
  cursor: pointer;
}

/* Hidden delete checkbox */
#participation_set .delete input {
  display: none;
}

/* Deleted form */
#participation_set li.deleted {
  display: none;
}

/* Last hidden form to clone */
#participation_set li:last-child {
  display: none;
} 
```

## jQuery

```
/*! This adds a form line
 * Call it on autocomplete select
 */
function add_aform(inst, item) {
  if ($(':input[name$="participant"][value=' + item.id + ']').length) {
    return false;
  }
  var total = $('#id_' + inst + '-TOTAL_FORMS').val();
  var sul = '#' + inst;
  var li = $(sul + ' li:last-child');
  var new_li = li.clone().appendTo(sul);
  li.find('span.participant').append(item.label);
  li.find(':input[name$="participant"]').val(item.id);
  new_li.find(':input').each(function () {
    var new_name = $(this).attr('name')
      .replace('-' + (total - 1) + '-', '-' + total + '-');
    $(this).attr('name', new_name);
  });
  new_li.find('label').each(function () {
    var tmp = $(this).attr('for')
      .replace('-' + (total - 1) + '-', '-' + total + '-');
    $(this).attr('for', new_for);
  });
  new_li.find('.delete').click(del_aform);
  $('#id_' + inst + '-TOTAL_FORMS').val(++total);
}

/*! This removes a form line
 * Call it on click from delete buttons (placed inside each li)
 */
function del_aform() {
  $(this).parents('li').addClass('deleted');
  $(this).find(':checkbox').attr('checked', true);
} 
```

我知道我也可以使用一个`empty_form`实例并使用`__prefix__`来替换 ids，这简化了 javascript 以获得更好的可维护性，但我没有找到一种方法来分解真实形式和空形式之间的代码。

## 看法

该视图非常标准，使用`inlineformset_factory`设置`extra`为 1 （以获取唯一要克隆的隐藏表单）。也不要忘记`HiddenInput`为该字段使用小部件`participant`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:57:50.000

这个插件将帮助您获得您正在寻找的自动完成功能：

[https://github.com/millioner/django-ajax-select](https://github.com/millioner/django-ajax-select)

# html - 使用 CSS 进行设计

> ID：10315483
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:20:40.667
> 
> 标签：html, css

考虑以下表结构：

```
<table style="width:150px;">
 <tr>
  <td>some dynamicly generated content that can wrap several lines</td>
  <td valign="bottom"><img ... /></td>
 </tr>
</table> 
```

我如何使用 CSS 获得这种效果（即当第一个 TD 中的内容占用更多行时，表格垂直增长并且图像“下降”到底部）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:44:24.857

尝试`display:inline-block`对于旧版浏览器，您需要一个小技巧（很容易用 google 搜索），但它应该可以满足您的需要：

[http://jsfiddle.net/4vYHa/](http://jsfiddle.net/4vYHa/)

```
.content{
    width:150px;
    display:inline-block;
}
.bottom-image{
     display:inline-block;
}

<div class="wrapper">
    <div class="content">
        <p>Lorem ipsum</p>        
    </div>
    <div class="bottom-image">
        <img src="http://placehold.it/250x150">
    </div>
</div> 
```

编辑：如果您需要将图像贴在顶部，您只需添加`vertical-align:top;`：

```
.bottom-image{
    display:inline-block;
    vertical-align:top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:24:06.203

```
<div id="maintable">

<div class="data1">some dynamicly generated content that can wrap several lines</div>
<div class="data1"><img ... /></div>
</div> 
```

然后将 CSS 应用于您的 data1 以向左浮动并向左清除，这将使它们保持在彼此之上。您也可以继续添加宽度限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:24:07.837

使用浮动 div。给文本 div 没有固定宽度，然后它会根据需要拉伸，图像 div 最终会“下降”到文本下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:31:57.780

尝试这样的事情

```
 <div style="width:150px;">
        <div class="dynamic">some dynamicly generated content that can wrap several lines</div>
        <div style="width:20px;"><img ... /></div>
       </div> 
```

**编辑**

```
 <div style="width:150px;">
               <div style="width:100px; float:left;">some dynamicly generated content that can wrap several lines</div>
               <div style="width:50px; float:right;"><img src="test.png" /></div>
               </div> 
```

**检查 Jsfiddle 输出：http:** [//jsfiddle.net/srinivasan/AhJzH/1/](http://jsfiddle.net/srinivasan/AhJzH/1/)

# c# - 使用 Wmi win32_Process 执行远程进程 - 获取进程的标准输出

> ID：10315489
> 
> 赞同：6
> 
> 时间：2012-04-25T12:21:08.727
> 
> 标签：c#, wmi

嗨，我能够使用 Wmi 执行远程进程，并且能够获取进程的返回值和进程 ID。有什么方法可以获得由 Wmi 启动的进程的输出。例如。如果我启动一个在控制台中打印某些内容的 exe，我将能够使用此 Api 获取这些值。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:11:49.763

您必须将输出重定向到一个文件，然后通过网络读取该文件。

使用 CMD.EXE /S /C 选项来执行此操作。

要运行的示例命令行`Program.exe`：

```
CMD.EXE /S /C " "c:\path\to\program.exe" "argument1" "argument2"  > "c:\path\to\stdout.txt" 2> "c:\path\to\stderr.txt" " 
```

然后像这样连接到服务器`\\servername\c$\path\to\stdout.txt`以读取标准输出结果。

**注意：请**注意要运行的命令周围的额外引号。这些对于确保正确解释命令行是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T07:59:51.613

您可以使用**psexec**执行 program.exe 并通过管道获取标准输出

```
p = subprocess.Popen(cmd, shell=False, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
while p.poll() is None:
    line = p.stdout.readline()
    line = line.strip().decode('gbk')
    if line:
        print('Subprogram output: [{}]'.format(line))
if p.returncode == 0:
    print('Subprogram success')
    return True
else:
    print('Subprogram failed')
    return False 
```

# ruby-on-rails - 将相关的 Ruby on Rails activeRecord 对象添加到控制器中的数组

> ID：10315492
> 
> 赞同：1
> 
> 时间：2012-04-25T12:21:10.770
> 
> 标签：ruby-on-rails, ruby, arrays, enumeration

我正在尝试在应用程序控制器的 :helper_method 中将对象添加到 Ruby on Rails 的数组中。在这个例子中，other_roommates 以数组的形式返回，其中包含 2 个对象，类型为 house_tenant，这正是我所期望的。

```
 @other_roommates = Array.new

  @other_roommates = current_house.house_tenant.where("active = '1' AND person_id != ?", current_user.id) 
```

我想要做的是使用来自每个 HouseTenants 的相关对象 Person 创建一个数组，但是当我这样做时，我得到与上面完全相同的数组：

```
 @other_roommates = Array.new

  joins = current_house.house_tenant.where("active = '1' AND person_id != ?", current_user.id)

  joins.each do |join|
    @other_roommates << join.person
  end 
```

我希望在上述情况下，该数组将包含与其中的 house_tenant 对象相关的 2 个 Person 对象。我可以通过枚举 other_roommate 数组并在每个对象上调用 .person 来访问视图中的那些 Person 对象，但它在应用程序控制器中不起作用是没有意义的。为了进一步混淆我，我又尝试了 2 个测试：

```
 for x in 0..joins.count - 1
    @other_roommates << joins[x]
  end 
```

和

```
 for x in 0..joins.count - 1
    @other_roommates << x
  end 
```

当我输出数组的内容时，两个例子都给了我完全相同的东西“0, 1”，或者 x 的值。这是视图中的循环：

```
<% other_roommates.each do |roommate| %>
<%= roommate %>
<% end %> 
```

值得一提的是，所有这些都在 Heroku Cedar 堆栈上运行。我知道这可能是一个基本问题，但我不知道我做错了什么。任何帮助深表感谢！

编辑：这是模型类的关系。如果我在视图中而不是在 ApplicationController 中执行它，我可以以完全相同的方式遍历对象，只是由于某种原因在这里它不起作用。

```
class HouseTenant < ActiveRecord::Base
  belongs_to :house
  belongs_to :person
end

class House < ActiveRecord::Base
  has_many :house_tenant
end

class Person < ActiveRecord::Base
  has_many :house_tenant
end 
```

house_tenant 的架构具有“house_id”和“person_id”，并且这些关系在控制台中也可以正常工作。

# java - 位移 X 比位移 X 倍快吗？

> ID：10315493
> 
> 赞同：1
> 
> 时间：2012-04-25T12:21:12.497
> 
> 标签：java, bit-manipulation, bit-shift

**问题 #1**

在 Java 中，移动数倍比使用单个语句移动相同的数字贵吗？

例如，是

```
int x = 5;
x = x << 16; 
```

比...快

```
int x = 5;
for (int i=0; i<16; ++i) {
    x = x << 1;
} 
```

此外，关于

```
int x = 5;
for (int i=0; i<16; ++i) {
    x = x*2;
} 
```

## 编辑：“x << 16”的精确性能是什么？它与“x << 1”的速度相同吗？

**问题2**

是否有在线资源可以用来确定 Java 中的各种按位运算性能，这样我就不必浪费 StackOverflow 用户的时间了？:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:25:03.330

> ...这样我就不必浪费 StackOverflow 用户的时间了？

你也在浪费自己的时间。编写应用程序的完整原型，对其进行分析，*然后*对其进行优化。我很确定您会发现瓶颈*不是*由于位移造成的。

这闻起来过早的优化很长一段时间。

> “x << 16”的精确表现是什么？它与“x << 1”的速度相同吗？

是的，它是一样的。但从技术上讲，它实际上取决于编译器、JVM 实现、JIT、CPU 架构…… *Java 规范*在这种情况下对执行时间没有任何限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:30:11.923

*就基本逻辑而言*，单次换档会带来更好的性能。

使用该`for loop`版本时，对于循环的每次迭代，都会检查循环的终止条件，`i`递增，执行按位运算并对 进行赋值`x`。

使用单次移位时，将执行单次按位运算并对 进行赋值`x`。

正如其他人所说，这确实看起来像是过早的优化。

不过，为了回答您的问题，从逻辑上讲，第一个示例比其他示例更快。

也就是说，根据语言和编译器，编译器可能会看到您`for loop`总是运行 16 次，然后继续优化您的代码，将其更改为`x << 16`. 如果是这种情况，您将看到您提供的每个代码示例之间没有区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:31:09.220

为什么不写一个简单的基准测试并亲眼看看呢？

```
 long start1 = System.nanoTime();
    for (int k = 0; k < 100000000; k++) {
        int x = 5;
        x = x << 16;
    }
    long stop1 = System.nanoTime();

    long start2 = System.nanoTime();
    for (int k = 0; k < 100000000; k++) {
        int x = 5;
        for (int i = 0; i < 16; ++i) {
            x = x << 1;
        }
    }
    long stop2 = System.nanoTime();

    long start3 = System.nanoTime();
    for (int k = 0; k < 100000000; k++) {
        int x = 5;
        for (int i = 0; i < 16; ++i) {
            x = x * 2;
        }
    }
    long stop3 = System.nanoTime();

    System.out.println(stop1 - start1);
    System.out.println(stop2 - start2);
    System.out.println(stop3 - start3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:32:30.957

我会使用第一个。
但这可能几乎相同。
也许第一个更快，因为我认为 JVM 有一个内置指令，至于另一个，它必须读取几个指令，这可能会更慢。

你不应该想太多关于这些小的“速度改进”的事情。这些小算术/逻辑运算的速度是巨大的，它不会对程序性能产生太大影响。

# android - 找不到类“com.google.ads.AdRequest”

> ID：10315496
> 
> 赞同：3
> 
> 时间：2012-04-25T12:21:20.537
> 
> 标签：android, admob

这周我从 Windows 切换到了 Ubuntu。我已经将我的Android项目导入Eclipse，没有任何错误，可以正常构建项目。

但是，当我尝试在设备上运行应用程序时，应用程序崩溃并显示以下消息：

> 04-25 14:14:15.700: E/dalvikvm(12640): 找不到类 'com.google.ads.AdRequest'，引用自方法 com.myApp.initAds

和

> 04-25 14:14:15.790: E/AndroidRuntime(12640): 由: java.lang.ClassNotFoundException: com.google.ads.AdView 在加载器 dalvik.system.PathClassLoader[/data/app/com.busybits.treinverkeer -2.apk] 04-25 14:14:15.790: E/AndroidRuntime(12640): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240) 04-25 14:14:15.790: E/AndroidRuntime(12640 ): at java.lang.ClassLoader.loadClass(ClassLoader.java:551) 04-25 14:14:15.790: E/AndroidRuntime(12640): at java.lang.ClassLoader.loadClass(ClassLoader.java:511) 04- 25 14:14:15.790: E/AndroidRuntime(12640): 在 android.view.LayoutInflater.createView(LayoutInflater.java:471) 04-25 14:14:15.790: E/AndroidRuntime(12640): 在 android.view。 LayoutInflater.createViewFromTag(LayoutInflater.java:570) 04-25 14:14:15.790: E/AndroidRuntime(12640): ... 22 更多

我的构建路径如下：

*   FlurryAgent.jar
*   GoogleAdmobAdsSdk-4.1.0.jar
*   安卓 2.2

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:40:30.760

您是否安装了 Android SDK 18 或更高版本？如果是这样，请检查您的 jar 文件在哪里。它们应该在 project_home/ **libs**文件夹中。

# javascript - window.open 兼容所有浏览器吗？

> ID：10315502
> 
> 赞同：2
> 
> 时间：2012-04-25T12:21:42.253
> 
> 标签：javascript

我想从 PHP 打开一个窗口。由于无法使用 PHP，因此我向 Javascript 发送以下命令：

```
echo '<script type="text/javascript" language="javascript">window.open("/help/help_central.php","my window", "height=200, width=200, top=100, left=500, menubar=0, toolbar=0, location=0, status=0");</script>'; 
```

在 FF 11.0 中，只能更改高度、宽度、顶部、左侧（对我来说！）。我尝试了是/否，但效果相同。
您知道兼容所有常见浏览器（FF、IE、Safari、Chrome、Opera）的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:25:33.883

通常是的，它适用于任何地方，但并非所有浏览器都支持所有功能。

这篇文章是一本很好的读物，可以根据浏览器了解哪些有效，哪些无效。

[http://www.quirksmode.org/js/popup.html](http://www.quirksmode.org/js/popup.html)

另一个很好的参考是

[http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html](http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html)

您可能需要考虑使用模态窗口，因为您将设法在任何地方进行工作，并且当模态窗口不会时，弹出窗口也可能被浏览器插件安全设置阻止。

# java - 无法实现通知服务

> ID：10315505
> 
> 赞同：1
> 
> 时间：2012-04-25T12:21:49.147
> 
> 标签：java, android, notifications

我参考了以下链接来研究 Android 中通知服务的演示示例：[Sai Geetha 博客](http://saigeethamn.blogspot.in/2009/09/android-developer-tutorial-for.html)和[Vogella 教程](http://www.vogella.com/articles/AndroidNotifications/article.html#notificationmanager_example)。

两者都有效但部分有效，即我已经按原样下载了两个项目并执行了它们。两者都有按钮来启动通知。On Button Click 通知出现在顶部状态栏。

问题来了，单击该通知时，既没有显示任何消息，也没有触发意图导航到新活动。

我是这个概念的新手，所以任何帮助表示赞赏......

***代码***

**创建通知.class**

```
public class CreateNotification extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void notify(View view) {
        NotificationManager nm= (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        final int UNIQUE_ID = 123458;
        Intent navigationIntent = new Intent();
        navigationIntent.setClass(CreateNotification.this,
                NotificationReceiver.class);

        PendingIntent pi = PendingIntent.getActivity(this, 0, navigationIntent,
                0);
        String body = "New Notification added!!!";
        String title = "Title";
        Notification n = new Notification(R.drawable.ic_launcher, body,
                System.currentTimeMillis());
        n.number = 2;
        n.setLatestEventInfo(this, title, body, pi);
        n.defaults = Notification.DEFAULT_ALL;
        nm.notify(UNIQUE_ID, n);
    }
} 
```

* * *

**NotificationReceiver.class**

```
public class NotificationReceiver extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result);
        Log.i("Receiver", "NotificationReceiver");
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:onClick="notify"
        android:text="Create Notification" >
    </Button>

</LinearLayout> 
```

**结果.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This is the result activity opened from the notification" >
    </TextView>

</LinearLayout> 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.notificationmanager"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".CreateNotification"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".NotificationReceiver" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:36:49.220

请尝试修改该行：

```
PendingIntent pi = PendingIntent.getActivity(this, 0, navigationIntent, 0); 
```

至

```
PendingIntent pi = PendingIntent.getActivity(this, 0, navigationIntent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

文档：

请注意，该活动将在现有活动的上下文之外启动，因此您必须在 Intent 中使用 Intent.FLAG_ACTIVITY_NEW_TASK 启动标志。

附在我的代码下方。对我来说，它工作正常。

```
private void showNotification() {
    Log.i(TAG, "showNotification called...");
    final Intent notificationIntent = new Intent(this, UpdateApplicationActivity.class);
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    final PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    final Notification notification = new Notification(R.drawable.htc_notification, getString(R.string.UpdateCheck_update_available), System.currentTimeMillis());
    notification.defaults |= Notification.DEFAULT_ALL;
    notification.flags |= Notification.FLAG_ONLY_ALERT_ONCE | Notification.FLAG_SHOW_LIGHTS | Notification.FLAG_AUTO_CANCEL;
    notification.setLatestEventInfo(this, getString(R.string.UpdateCheck_notification_title), getString(R.string.UpdateCheck_notification_message), contentIntent);

    // Notifying the user about the new update.
    if (notificationManager != null) {
        notificationManager.notify(APP_UPDATE_NOTIFICATION, notification);
    }
} 
```

# scheme - 平等的？和记录类型

> ID：10315506
> 
> 赞同：2
> 
> 时间：2012-04-25T12:21:54.763
> 
> 标签：scheme, r6rs

假设我有以下方案（R6RS）代码：

```
(define-record-type typeA
 (fields
  (mutable A))) 
```

我创建了两条记录：

```
(define X (make-typeA 123))
(define Y (make-typeA 123)) 
```

我不明白为什么`(equal? X Y)`并`(equal? (make-typeA 123) (make-typeA 123))`返回`#f`。

我阅读了 R6RS 标准（[第 11.5 节](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.5)），但我并没有真正理解它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:28:08.500

来自[R6RS](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_idx_436)：

> 平等？谓词将对和向量视为具有传出边的节点，使用 string=? 比较字符串，使用 bytevector=? 比较字节向量（参见关于“字节向量”的库章节），并使用 eqv? 比较其他节点。

换句话说，您的使用`equal?`实际上只是在做同样的事情，`eqv?`因为这就是为记录指定的方式（参见上面的最后一行）。

第 6.1 章对记录有这样的说法`eqv?`：

> 如果 obj1 和 obj2 都是相同记录类型的记录，并且是对记录构造函数的两次单独调用的结果，那么 eqv? 返回#f。

在您的代码中，这两条记录是对构造函数的两次单独调用的结果。因此他们不可能`eqv?`。

Scheme 的某些方言可能允许您在记录上使用结构相等性。例如，在[Racket](http://www.racket-lang.org)中，您可以声明一条记录`#:transparent`以获得结构相等性。我不确定您是否可以在标准方案中获得这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:30:14.013

我对 R6RS 不是很熟悉，但是快速的谷歌搜索表明

这里的关键是[可变性](http://www.r6rs.org/final/html/r6rs-lib/r6rs-lib-Z-H-7.html#node_sec_6.1)：

> 如果 obj1 和 obj2 都是相同记录类型的记录，并且是对记录构造函数的两次单独调用的结果，那么 eqv? 返回#f。

# c# - 需要在命令行上 msbuild 较低版本的 C# 项目，无需 Visual Studio

> ID：10315507
> 
> 赞同：4
> 
> 时间：2012-04-25T12:21:57.933
> 
> 标签：c#, compiler-construction, command-line, msbuild

我需要在命令行上 msbuild 较低版本的 C# 项目，我没有 Visual Studios。

我在构建项目时遇到了错误：

```
Microsoft (R) Build Engine Version 2.0.50727.42
[Microsoft .NET Framework, Version 2.0.50727.42]
Copyright (C) Microsoft Corporation 2005\. All rights reserved.

.\Project.sln : Solution file error MSB4054: The solution file must be opened in t
he Visual Studio IDE and converted to the latest version before it can be built
by MSBuild. 
```

我有 .sln 文件，以前有人可能使用 1.0 版引擎从这里构建了项目。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:39:14.660

您将在 C:\Windows\Microsoft.NET\Framework[框架版本] 中找到 MSBuild。

例如，.NET 2.0 附带的文件位于 C:\Windows\Microsoft.NET\Framework\v2.0.50727 中。我相信这是 VS 8.0 附带的。

如果你需要 x64 版本，它在 C:\Windows\Microsoft.NET\Framework64\v2.0.50727

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T22:54:33.187

在许多情况下，您只需将项目文件传递给 MsBuild，它就会编译得很好。例如：

```
msbuild MyProj.csproj /p:Configuration=Release 
```

.csproj 文件是有效的 MsBuild XML 文件，而 .sln 文件必须即时转换为 MsBuild 脚本，这就是它们与特定版本的 Visual Studio 相关联的原因。

如果您的解决方案中有多个项目，我建议您将主/启动项目传递给 MsBuild，以便所有依赖项也得到构建。此方法并不总是有效，如果您在解决方案文件中指定了任何解决方案级别依赖项或自定义解决方案配置，您可能会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:17:26.850

好的，已获得客户端安装 VStudios 的许可。安装并构建程序：/

# mysql - 无法检索 unicode 结果集

> ID：10315514
> 
> 赞同：0
> 
> 时间：2012-04-25T12:22:22.410
> 
> 标签：mysql, unicode, jdbc

我已经能够成功地将 unicode 值插入到我的数据库中，但无法通过 java 结果集检索它们。相同的查询从 mysql 查询浏览器中获取数据。sql是这样写的：

```
SELECT book_name FROM book_resource_user_view WHERE MATCH(book_name) AGAINST ('तेरा मुझसे है पेहला का नाता कोई') limit 25 
```

在尝试选择语句之前，我这样做了：

```
String query = "set names utf8";
        state.executeUpdate(query); 
```

还是没有成功？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:56:14.443

我似乎找到了答案。我修改了关键字变量使用

```
keyword = new String(keyword.getBytes("ISO-8859-1"), "UTF-8"); 
```

在我评论了该语句并直接从表单中使用关键字变量之后，它似乎起作用了。

# python - 从 python 字符串中去除时间戳/语法序列

> ID：10315523
> 
> 赞同：0
> 
> 时间：2012-04-25T12:23:15.920
> 
> 标签：python, string, timestamp, strip

我正在开发一个 python 脚本，它从 sdict 中检索值作为字符串值。许多返回的值包含取决于 sdict 的时间戳，这有点烦人。

例如。`<2006-12-20 00:10:24 Cattle is a tree>`

我一辈子都无法弄清楚如何`2006-12-20 00:10:24`从返回值中删除 。有没有人有任何想法？我在想我可以去掉 - 字符之间的任何东西。但是，返回的值通常包含 - 贯穿始终。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:27:55.920

这是使用正则表达式的好选择。

```
>>> import re
>>> s = '<2006-12-20 00:10:24 Cattle is a tree>'
>>> re.sub(r'\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2} ', '', s)
'<Cattle is a tree>' 
```

# netbeans - NetBeans - 打包 jars 并将它们包含在 web 和 ejb 模块的清单中

> ID：10315524
> 
> 赞同：1
> 
> 时间：2012-04-25T12:23:16.633
> 
> 标签：netbeans, jar, classpath, manifest, ear

我想在 NetBeans 中创建企业应用程序。此应用程序依赖于许多额外的 .jars 文件，这些文件对于 WAR 和 EJB 模块很常见。

特别是我需要用结构构建EAR：

```
myEAR.ear 
|-myWebModule.war 
| |-META-INF 
| | |-MANIFEST.MF 
| |-somefile 
| |-somefile 
| |-... 
|-myEJBModule.ejb 
| |-META-INF 
| | |-MANIFEST.MF 
| |-somefile 
| |-somefile 
| |-... 
|-additionalJar1.jar 
|-additionalJar2.jar 
|-additionalJar3.jar 
|-... 
```

其中一些“additionalJars”必须包含在 Web 模块内 MANIFEST.MF 的 Class-Path 中，而一些“additionalJars”必须包含在 EJB 模块内 MANIFEST.MF 的 Class-Path 中。

如何在 NetBeans 中创建这样的项目？

# ios - EXC_BAD_ACCESS 自动处理

> ID：10315526
> 
> 赞同：14
> 
> 时间：2012-04-25T12:23:22.893
> 
> 标签：ios, xcode, exception-handling, exc-bad-access, crash-reports

我正在尝试为 iOS 构建自己的信号和未捕获的异常处理程序。为此，我使用这两个功能：

```
NSSetUncaughtExceptionHandler(/*handler*/); 
```

和

```
signal(/*signal const*/, /*signal handler*/); 
```

我的问题是我不能让它与 EXC_BAD_ACCESS 信号一起工作。是否有一些信号常量（如 SIGABRT、SIGBUS）来捕获 EXC_BAD_ACCESS？如果没有，我该如何处理？一些崩溃分析工具（如 PLCrashReporter、Crashlytics 等）可以跟踪它......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T12:40:17.743

`EXC_BAD_ACCESS`不会产生异常，因此您的第一个函数不适用于这种情况。它产生一个信号`SIGSEGV`或`SIGBUS`。

请参阅Cocoa with Love[处理未处理的异常和信号](http://cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)。

**更新**

我刚刚检查了LLDB的源代码。它可能是`TARGET_EXC_BAD_ACCESS`= 0x91。

在 RNBRemote.h 中：

```
/* We translate the /usr/include/mach/exception_types.h exception types
   (e.g. EXC_BAD_ACCESS) to the fake BSD signal numbers that gdb uses
   in include/gdb/signals.h (e.g. TARGET_EXC_BAD_ACCESS).  These hard
   coded values for TARGET_EXC_BAD_ACCESS et al must match the gdb
   values in its include/gdb/signals.h.  */

#define TARGET_EXC_BAD_ACCESS      0x91
#define TARGET_EXC_BAD_INSTRUCTION 0x92
#define TARGET_EXC_ARITHMETIC      0x93
#define TARGET_EXC_EMULATION       0x94
#define TARGET_EXC_SOFTWARE        0x95
#define TARGET_EXC_BREAKPOINT      0x96 
```

在 RNBRemote.cpp 中：

```
// Translate any mach exceptions to gdb versions, unless they are
// common exceptions like a breakpoint or a soft signal.
switch (tid_stop_info.details.exception.type)
{
    default:                    signum = 0; break;
    case EXC_BREAKPOINT:        signum = SIGTRAP; break;
    case EXC_BAD_ACCESS:        signum = TARGET_EXC_BAD_ACCESS; break;
    case EXC_BAD_INSTRUCTION:   signum = TARGET_EXC_BAD_INSTRUCTION; break;
    case EXC_ARITHMETIC:        signum = TARGET_EXC_ARITHMETIC; break;
    case EXC_EMULATION:         signum = TARGET_EXC_EMULATION; break;
    case EXC_SOFTWARE:
        if (tid_stop_info.details.exception.data_count == 2 &&
            tid_stop_info.details.exception.data[0] == EXC_SOFT_SIGNAL)
            signum = tid_stop_info.details.exception.data[1];
        else
            signum = TARGET_EXC_SOFTWARE;
        break;
} 
```

# authentication - 如何在 RavenDB 中对用户进行身份验证

> ID：10315530
> 
> 赞同：1
> 
> 时间：2012-04-25T12:23:31.823
> 
> 标签：authentication, ravendb, document-database

服务器模式下 ravendb 的身份验证机制是什么。Authentication 包包含用于创建用户的 AuthenticationUser 类和用于验证用户的 AuthenticateClient 类。AuthenticateClient 类有一个功能

```
public bool Authenticate(DocumentDatabase currentStore, string username, string password, out AccessTokenBody.DatabaseAccess[] allowedDatabases) 
```

我不知道如何使用这个功能。这个函数需要 DocumentDatabase 对象。我不知道如何实例化 DocumentDatabase 对象。有没有办法实现身份验证？如果您知道，请告诉我更好的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:47:04.227

Rajdeep，你不需要使用这个类，也不需要实例化 DocumentDatabase 类。这是 RavenDB 内部的东西。

RavenDB 默认使用 Windows 身份验证。如果您想改用 OAuth，这就是 Authentication Bundle 的用途。请在此处查看如何使用该捆绑包：[http ://ravendb.net/docs/server/bundles/authentication](http://ravendb.net/docs/server/bundles/authentication)

# ruby-on-rails - 成功的 heroku 运行 rake db:migrate 但列似乎不起作用

> ID：10315531
> 
> 赞同：6
> 
> 时间：2012-04-25T12:23:32.240
> 
> 标签：ruby-on-rails, database, heroku, rake, migrate

我在名为 ClassRequest 的表中添加了一个名为 level 的新列，在 localhost 上运行了 rake db:migrate 并且视图运行良好。将更改推送到heroku，视图遇到错误“NoMethodError: undefined method `level' for #”

所以我跑了 heroku run rake db:migrate ，这似乎是成功的，显示了下面的代码。

```
Running rake db:migrate attached to terminal... up, run.1
==  AddDetailsToClassRequests: migrating ======================================
-- add_column(:class_requests, :level, :string)
   -> 0.0684s
==  AddDetailsToClassRequests: migrated (0.0713s) ============================= 
```

但是当我加载关联的视图时，我仍然有这个错误“NoMethodError: undefined method `level' for #”。

我是 Rails 新手，所以我不知道出了什么问题，也不知道如何检查可能出了什么问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T12:26:48.480

```
heroku restart 
```

检查 heroku 的文档：[https ://devcenter.heroku.com/articles/rake](https://devcenter.heroku.com/articles/rake)

> 运行迁移后，您需要使用 heroku restart 重新启动您的应用程序以重新加载架构并获取任何架构更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T12:27:27.703

运行迁移后，您需要重新启动应用程序。尝试

`heroku restart`

看看情况是否有所改善。

# java - 从 Aparapi 线程返回

> ID：10315532
> 
> 赞同：3
> 
> 时间：2012-04-25T12:23:38.087
> 
> 标签：java, multithreading, aparapi

我正在使用 Aparapi，但无法返回我想要的数据。我发现 Aparapi 的工作方式类似于线程。

```
 private int calculateBlockLightLevel(final int x,final int y,final int z) {
    int blockType = world.getBlockTypeAt(x, z, y);

    //TODO Work out how to edit this, aka not Final!
    final int found[] = new int[]{0};
    Kernel kernel = new Kernel(){
        @Override public void run() {
            int blockLightLevel = getBlockLightLevelAt(x, y + 1, z);
            int highestSurroundingBlockLight = blockLightLevel;

            found[0]=highestSurroundingBlockLight;

            blockLightLevel = getBlockLightLevelAt(x - 1, y, z);
            if (blockLightLevel > highestSurroundingBlockLight) {
                highestSurroundingBlockLight = blockLightLevel;
                found[0]=highestSurroundingBlockLight;
            }
            blockLightLevel = getBlockLightLevelAt(x + 1, y, z);
            if (blockLightLevel > highestSurroundingBlockLight) {
                highestSurroundingBlockLight = blockLightLevel;
                found[0]=highestSurroundingBlockLight;
            }
            blockLightLevel = getBlockLightLevelAt(x, y, z - 1);
            if (blockLightLevel > highestSurroundingBlockLight) {
                highestSurroundingBlockLight = blockLightLevel;
                found[0]=highestSurroundingBlockLight;
            }
            blockLightLevel = getBlockLightLevelAt(x, y, z + 1);
            if (blockLightLevel > highestSurroundingBlockLight) {
                highestSurroundingBlockLight = blockLightLevel;
                found[0]=highestSurroundingBlockLight;
            }
            blockLightLevel = getBlockLightLevelAt(x, y - 1, z);
            if (blockLightLevel > highestSurroundingBlockLight) {
                highestSurroundingBlockLight = blockLightLevel;
                found[0]=highestSurroundingBlockLight;
            }

        }
     };
     kernel.execute(1);

     kernel.dispose();

    return Math.max(found[0] - Math.max(BLOCK_TRANSPARENCY.get(blockType), 1), 0);

} 
```

从这段代码中，我试图将找到的返回到我的返回中。

# joomla - Joomla Modal 在 IE（所有版本）中显示，模板几乎为空

> ID：10315533
> 
> 赞同：1
> 
> 时间：2012-04-25T12:23:38.793
> 
> 标签：joomla, squeezebox

我正在为 Joomla 制作模板！2.5.4。通常这很顺利，但今天我有一个奇怪的问题。

Joomla Modal(Squeezebox) 在所有版本的 IE 中都显示在一个完全空的模板中。 ![在此处输入图像描述](../Images/0c3ce8ed123259adaa13420430207d1b.png)

模板的代码是：

```
<?php
$app            = JFactory::getApplication();
$sitename = $app->getCfg('sitename');
?>
<?='<?xml version="1.0" encoding="utf-8?>'; ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-en" lang="en-en" dir="ltr">
    <head>
        <jdoc:include type="head" />
    </head>
    <body>

    </body>
</html> 
```

当禁用 K2 System 插件时，Modal 会消失。但我需要插件，所以我不能禁用它。

在 Joomla 中安装了以下内容：

*   Joomla 2.5.4（最新版本）
*   K2
*   这个模板

该网站可通过[http://marjolein.site-project.nl访问](http://marjolein.site-project.nl)

有人记得这个问题或知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:58:16.030

已经找到遮篷了。XML 行将模板以 Quirks 模式放入 IE... 删除解决了它

# tcp - iptables过滤性能：TCP和UDP

> ID：10315535
> 
> 赞同：1
> 
> 时间：2012-04-25T12:23:52.110
> 
> 标签：tcp, udp, iptables, throughput

我写信询问 iptables 在 TCP 和 UDP 过滤中的性能。我正在使用大量 iptables 规则对其进行测试。当 FORWARD 链中有 10 000 个混合 TCP 和 UDP 规则时，我得到 TCP 吞吐量 35.5 Mbits/sec 和 UDP 吞吐量 25.2 Mbits/sec

我很困惑为什么 TCP 吞吐量大于 UDP？我认为 TCP 会因为 ACK 数据包而变慢。我已经用cisco ACL测试过，UDP更快。

PC ---- FW ----- PC 拓扑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:06:39.163

防火墙开销对于数据包而不是字节最为重要。因此，如果平均 UDP 数据包小于平均 TCP 数据包，那么 CPU 将以比 TCP 更小的每秒比特数最大化 CPU。

相反，如果 UDP 数据包大到足以导致碎片，并且防火墙配置为在检查碎片之前重新组装碎片，那么重组将导致大量开销，这将降低每秒比特数的吞吐量。

可能还有其他特定于防火墙实施和配置的因素​​，但我相信这两个将是首要的。

# java - 鼠标滚轮侦听器在 jscrollbar 中不起作用

> ID：10315536
> 
> 赞同：3
> 
> 时间：2012-04-25T12:23:52.480
> 
> 标签：java, swing, mouseevent, netbeans-platform, jscrollbar

我正在 netbeans 平台（netbeans 模块）中开发一个桌面应用程序，其中我有一个桌面窗格和一个 jscrollbar。我已经**实现了 MouseWheelListener**并添加了

```
scrollBar.addMouseWheelListener(this); 
```

在类的构造函数中。现在，当我滚动鼠标滚轮时，它不会滚动滚动条，尽管我在

```
 private void scrollBarMouseWheelMoved(java.awt.event.MouseWheelEvent evt) { 

 System.out.println("mouse value is------------ " + evt.paramString());
} 
```

上面 sout 的输出是

```
mouse value is------------ MOUSE_WHEEL,(8,49),absolute(0,0),button=0,clickCount=0,scrollType=WHEEL_UNIT_SCROLL,scrollAmount=3,wheelRotation=1 
```

我现在应该怎么做才能在 jscrollbar 上启用鼠标滚轮事件？

我已经搜索过，但我找到了滚动窗格的事件，但我正在明确寻找滚动条..

我已经删除了额外的代码，并在下面的示例代码中显示了我正在寻找的内容

```
 public final class ScrollableWindow1TopComponent extends TopComponent implements ComponentListener, MouseWheelListener {

    private javax.swing.JScrollBar scrollBar;
    private javax.swing.JDesktopPane scrollableGraphnewContainer;

    public ScrollableWindow1TopComponent() {
      this.addComponentListener(this);
      scrollBar.addMouseWheelListener(this);

    }
     private void scrollBarMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {                                          
       System.out.println("mouse value is------------ " + evt.paramString());
    }
     private void scrollBarAdjustmentValueChanged(java.awt.event.AdjustmentEvent evt) { 
      //code that works fine 
    }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T12:34:30.087

I think that you have look at [AdjustmentListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/AdjustmentListener.html) rather than `MouseXxxListener`,

```
final JScrollBar scrollBar = myScrollpane.getVerticalScrollBar();
scrollBar.addAdjustmentListener(new AdjustmentListener() {

    @Override
    public void adjustmentValueChanged(AdjustmentEvent e) {
        System.out.println("JScrollBar's current value = " + scrollBar.getValue());
    }
}); 
```

.

.

EDIT

:-) no, without any issue on my side :-)

![enter image description here](../Images/d31de6453faf411148eef380ea95c260.png)

```
import java.awt.*;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import javax.swing.*;

public class ListPanel extends JFrame {

    private static final long serialVersionUID = 1L;

    public ListPanel() {
        setLayout(new GridLayout(0, 2, 10, 10));
        DefaultListModel model = new DefaultListModel();
        model.addElement(createButtons("one"));
        model.addElement(createButtons("two"));
        model.addElement(createButtons("three"));
        model.addElement(createButtons("four"));
        model.addElement(createButtons("five"));
        model.addElement(createButtons("six"));
        model.addElement(createButtons("seven"));
        model.addElement(createButtons("eight"));
        model.addElement(createButtons("nine"));
        model.addElement(createButtons("ten"));
        model.addElement(createButtons("eleven"));
        model.addElement(createButtons("twelwe"));
        JList list = new JList(model);
        list.setCellRenderer(new PanelRenderer());
        JScrollPane scroll1 = new JScrollPane(list);
        final JScrollBar scrollBar = scroll1.getVerticalScrollBar();
        scrollBar.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar.getValue());
            }
        });
        add(scroll1);
        JScrollPane scroll2 = new JScrollPane(createPanel());
        add(scroll2);        
        final JScrollBar scrollBar1 = scroll2.getVerticalScrollBar();
        scrollBar1.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar1.getValue());
            }
        });

    }

    public static JPanel createPanel() {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(0, 1, 1, 1));
        panel.add(createButtons("one"));
        panel.add(createButtons("two"));
        panel.add(createButtons("three"));
        panel.add(createButtons("four"));
        panel.add(createButtons("five"));
        panel.add(createButtons("six"));
        panel.add(createButtons("seven"));
        panel.add(createButtons("eight"));
        panel.add(createButtons("nine"));
        panel.add(createButtons("ten"));
        panel.add(createButtons("eleven"));
        panel.add(createButtons("twelwe"));
        return panel;
    }

    public static JButton createButtons(String text) {
        JButton button = new JButton(text);
        return button;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                ListPanel frame = new ListPanel();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                //frame.pack();
                frame.setSize(270, 200);
                frame.setVisible(true);
            }
        });
    }

    class PanelRenderer implements ListCellRenderer {

        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            JButton renderer = (JButton) value;
            renderer.setBackground(isSelected ? Color.red : list.getBackground());
            return renderer;
        }
    }
} 
```

output from System.out.println(...)

```
run:
JScrollBar's current value = 0
JScrollBar's current value = 0
JScrollBar's current value = 1
JScrollBar's current value = 2
JScrollBar's current value = 3
JScrollBar's current value = 4
JScrollBar's current value = 5
JScrollBar's current value = 6
JScrollBar's current value = 7
JScrollBar's current value = 8
JScrollBar's current value = 9
JScrollBar's current value = 10
JScrollBar's current value = 11
JScrollBar's current value = 12
JScrollBar's current value = 13
JScrollBar's current value = 14
JScrollBar's current value = 15
JScrollBar's current value = 78
JScrollBar's current value = 143
JScrollBar's current value = 78
JScrollBar's current value = 0
JScrollBar's current value = 78
JScrollBar's current value = 143
BUILD SUCCESSFUL (total time: 10 seconds) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:02:46.100

您是否尝试在 JScrollPane 上添加[setWheelScrollingEnabled(true/false) 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setWheelScrollingEnabled%28boolean%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:28:18.260

我的实际问题是我没有在鼠标滚轮更改时更改滚动值，但我得到了鼠标滚轮事件，所以我解决了如下问题：

```
 private void scrollBarMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {                                          
        if (evt.getUnitsToScroll() > 0) {
            scrollBar.setValue(scrollBar.getValue() + 1);
        } else {
            scrollBar.setValue(scrollBar.getValue() - 1);
        }
   } 
```

每次我向上滚动滚轮时，evt.getUnitsToScroll() 给出正值，向下滚动它给出负值，所以我增加了滚动条的值，其余部分由自动处理

```
 private void scrollBarAdjustmentValueChanged(java.awt.event.AdjustmentEvent evt) { 
     //my code...
} 
```

# expect - Expect 脚本中的 StringToBytes 问题

> ID：10315542
> 
> 赞同：1
> 
> 时间：2012-04-25T12:24:20.997
> 
> 标签：expect

我在我的 Expect 脚本文件中使用以下命令。

设置名称 [StringToBytes "Tamin"]; 把“名称= $名称”

当我运行此脚本时，出现以下错误。

执行从“set name [StringToBytes "Tamin"]" 中调用的 "StringToBytes "Tamin"" 时命令名称 "StringToBytes" 无效

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:48:06.707

据我所知，这意味着`StringToBytes`找不到该命令。 `StringToBytes`未在[文档](http://www.tcl.tk/man/tcl8.5/TclCmd/contents.htm "Tcl 文档")中列出，所以大概您打算自己定义此命令？

# c# - 从 windows 应用程序执行一个 aspx 页面并获取返回的数据

> ID：10315545
> 
> 赞同：1
> 
> 时间：2012-04-25T12:24:31.403
> 
> 标签：c#, asp.net

您好正在开发一个 Windows 应用程序，在该应用程序中我必须调用一个从数据库中读取值并将其转换为 XML 的 aspx 页面。我不知道如何调用一个 aspx 页面并使其返回一个值给调用 Windows 应用程序。我尝试使用 Web 请求方法，它不返回任何内容。请建议我如何执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:30:47.670

您可以使用 WebClient，如下所示：

这是一个由 HttpModule 生成的站点地图 XML，它拦截对 XML 文件的请求：

```
 WebClient wc = new WebClient();
  string smap = wc.DownloadString("http://www.antoniob.com/sitemap.xml"); 
```

这是一个返回 XML 的理论 aspx

```
 WebClient wc = new WebClient();
  string smap = wc.DownloadString("http://www.somesite.com/GetXml.ashx"); 
```

通话没有区别，当然除了地址

**在服务器端**（asp.net 应用程序），最好使用 ASHX 处理程序，因为它更适合返回 XML，在您的 ASP.NET 应用程序中添加新项目，并选择通用处理程序：

![在此处输入图像描述](../Images/0122e91b77a15ec6b405bee87283181c.png)

这是 GetXml.ashx 处理程序的代码，它将从 App_Data 文件夹返回示例 XML：

```
 public class GetXml : IHttpHandler
  {    
    public void ProcessRequest(HttpContext context)
    {
      context.Response.ContentType = "text/xml";
      string xml = File.ReadAllText(context.Server.MapPath("~/App_Data/sample.xml"));
      context.Response.Write(xml);
      context.Response.End();    
    }

    public bool IsReusable
    {
      get
      {
        return false;
      }
    }
  } 
```

# php - 从php中的数组中删除重复项

> ID：10315546
> 
> 赞同：1
> 
> 时间：2012-04-25T12:24:39.800
> 
> 标签：php, arrays, duplicates, array-unique

我想从 php 中的数组中删除重复的元素。以下是数组的结构

```
Array
(
    [0] => Array
        (
            [0] => xllga@hotmail.com
            [1] => bounce@abc.com
            [2] => 20120416135504.21734.qmail@abc.com
            [3] => xllga@hotmail.com
            [4] => info@abc.com
            [5] => info@abc.com
            [6] => xllga@hotmail.com
            [7] => xllga@hotmail.com
        )

) 
```

怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T12:26:10.450

试试[`array_unique`](http://php.net/manual/en/function.array-unique.php)。

**代码 ：**

```
<?php

$arr = array_unique($arr);

?> 
```

* * *

> 数组**array_unique** ( 数组 $array [, int $sort_flags = SORT_STRING ] )
> 
> 接受一个输入数组并返回一个没有重复值的新数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:26:18.613

尝试[`array_unique()`](http://php.net/manual/en/function.array-unique.php)：

```
$newArray = array_unique($oldArray); 
```

从文档：

> [ `array_unique()`] 接受一个输入数组并返回一个没有重复值的新数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:27:14.497

[http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

```
$new_unique_array = array_unique($your_array[0]); 
```

希望有帮助，斯特凡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:36:22.803

没有 array_unique() 解决方案。没那么聪明:)

```
array_keys(array_flip($array)); 
```

如果使用您的阵列，`$array = $yourArray[0];`

# c++ - OpenCv 2.3 C - 如何隔离图像内的对象

> ID：10315551
> 
> 赞同：10
> 
> 时间：2012-04-25T12:25:00.960
> 
> 标签：c++, c, opencv, image-processing

我有一个像：

![资源](../Images/8c9f229fbd922d73ded0ca0bcf64d6d5.png)

我想删除数字周围的黑色行和列。所以我希望结果是：

![输出](../Images/67b1848cce896192ef1a4f3f832c3503.png)

我试试这个：

```
void findX(IplImage* imgSrc,int* min, int* max){
    int i;
    int minFound=0;
    CvMat data;
    CvScalar maxVal=cvRealScalar(imgSrc->width * 255);
    CvScalar val=cvRealScalar(0);
    //For each col sum, if sum < width*255 then we find the min
    //then continue to end to search the max, if sum< width*255 then is new max
    for (i=0; i< imgSrc->width; i++){
        cvGetCol(imgSrc, &data, i);
        val= cvSum(&data);
        if(val.val[0] < maxVal.val[0]){
            *max= i;
            if(!minFound){
                *min= i;
                minFound= 1;
            }
        }
    }
}

void findY(IplImage* imgSrc,int* min, int* max){
    int i;
    int minFound=0;
    CvMat data;
    CvScalar maxVal=cvRealScalar(imgSrc->width * 255);
    CvScalar val=cvRealScalar(0);
    //For each col sum, if sum < width*255 then we find the min
    //then continue to end to search the max, if sum< width*255 then is new max
    for (i=0; i< imgSrc->height; i++){
        cvGetRow(imgSrc, &data, i);
        val= cvSum(&data);
        if(val.val[0] < maxVal.val[0]){
            *max=i;
            if(!minFound){
                *min= i;
                minFound= 1;
            }
        }
    }
}
CvRect findBB(IplImage* imgSrc){
    CvRect aux;
    int xmin, xmax, ymin, ymax;
    xmin=xmax=ymin=ymax=0;

    findX(imgSrc, &xmin, &xmax);
    findY(imgSrc, &ymin, &ymax);

    aux=cvRect(xmin, ymin, xmax-xmin, ymax-ymin);

    //printf("BB: %d,%d - %d,%d\n", aux.x, aux.y, aux.width, aux.height);

    return aux;

} 
```

所以我使用：

```
IplImage *my_image = cvLoad....
CvRect bb = findBB(my_image);
IplImage *new_image = cvCreateImage(cvSize(bb.width,bb.height), my_image->depth, 1);
cvShowImage("test",new_image); 
```

它效果不佳，因为我尝试检查新图像中是否有黑色行或列并且它们存在。我能做些什么？有人能帮我吗？（对不起我的英语不好！）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-25T14:35:10.903

一种方法是简单地执行[边界框技术](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/)来检测数字，如下图所示：

![在此处输入图像描述](../Images/f316df0a68c9132432b0810e851a6c5e.png)

由于您的图像已经过处理，我使用的边界框技术要简单得多。

完成该过程后，您真正需要做的就是将原始图像的 ROI（感兴趣区域）设置为框定义的区域，以实现**裁剪**效果并隔离对象：

![在此处输入图像描述](../Images/16e6715bb74027a6c0b6a460e931e25b.png)

请注意，在生成的图像中，边框中有一个额外的非白色像素行/列。好吧，它们也不是黑色的。那是因为我没有执行任何阈值方法将图像二值化为黑白。下面的代码演示了在图像的灰度版本上执行的边界框技术。

这几乎是实现您想要的路线图。出于教育目的，我将分享我使用 OpenCV 的 C++ 接口编写的代码。我确定您能够将其转换为 C 接口。

```
#include <cv.h>
#include <highgui.h>

#include <vector>

int main(int argc, char* argv[])
{
    cv::Mat img = cv::imread(argv[1]);

    // Convert RGB Mat to GRAY
    cv::Mat gray;
    cv::cvtColor(img, gray, CV_BGR2GRAY);

    // Store the set of points in the image before assembling the bounding box
    std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = gray.begin<uchar>();
    cv::Mat_<uchar>::iterator end = gray.end<uchar>();
    for (; it != end; ++it)
    {
        if (*it) points.push_back(it.pos());
    }

    // Compute minimal bounding box
    cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

// Draw bounding box in the original image (debug purposes)
//cv::Point2f vertices[4];
//box.points(vertices);
//for (int i = 0; i < 4; ++i)
//{
        //cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(0, 255, 0), 1, CV_AA);
//}
//cv::imshow("box", img);
//cv::imwrite("box.png", img);

    // Set Region of Interest to the area defined by the box
    cv::Rect roi;
    roi.x = box.center.x - (box.size.width / 2);
    roi.y = box.center.y - (box.size.height / 2);
    roi.width = box.size.width;
    roi.height = box.size.height;

    // Crop the original image to the defined ROI
    cv::Mat crop = img(roi);
    cv::imshow("crop", crop);

    cv::imwrite("cropped.png", crop);
    cvWaitKey(0);

    return 0;
} 
```

# javascript - chrome 扩展后台页面错误：“Uncaught SyntaxError: Unexpected token <”

> ID：10315557
> 
> 赞同：8
> 
> 时间：2012-04-25T12:25:33.460
> 
> 标签：javascript, html, google-chrome-extension

为什么我的 background.html 页面会抛出这个：

`Uncaught SyntaxError: Unexpected token <`在第 1 行

这是实际的html：

```
<html>
<head>
<script type="text/javascript" src="fancy-settings/source/lib/store.js"></script>
<script type="text/javascript" src="background.js"></script>
</head>
<body></body>
</html> 
```

所以 chrome 抱怨第一个开头的“<”，我不知道为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T15:04:48.457

我遇到过同样的问题。`manifest.json`只需在您的文件中替换

```
"background": {
    "scripts": ["background.js"]
  }, 
```

和：

```
"background": {
    "page": "background.html"
  }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:32:56.783

删除 js：

```
<script type="text/javascript" src="fancy-settings/source/lib/store.js"></script>
<script type="text/javascript" src="background.js"></script> 
```

如果错误仍然存​​在，那么你没有正确连接js

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T23:48:38.937

如果您使用 Manifest V3，只需在后台添加 type: "module"

```
 {
        ...
        "background": {
        "service_worker": "background.js",
        "type": "module"
        },
        ...
     } 
```

# php - 正则表达式删除带数字的单词

> ID：10315560
> 
> 赞同：3
> 
> 时间：2012-04-25T12:25:36.680
> 
> 标签：php, regex

我想在我的产品名称中删除带有数字（参考）或小字（2 个字符或更少）的单词，但我找不到好的正则表达式。

一些例子：

*   “Chaine anti-rebond ECS-2035”应该变成**“Chaine anti-rebond”**
*   “Guide 35 cm Oregon Intenz”应改为**“Guide Oregon Intenz”**
*   “Tronçonneuse sans fil AKE 30 LI - Guide 30 cm 36 V”应该变成**“Tronçonneuse sans fil AKE - Guide”**

我在 PHP 中这样做：

```
preg_replace('#([^A-Za-z-]+)#', ' ',' '.wd_remove_accents($modele).' '); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:35:43.660

你不需要在 RegExp 中做所有你知道的事情：

```
<?php

$str = "Chaine anti-rebond ECS-2035 cm 30 v";
$result = array();

$split = explode(" ", $str); //Split to an array

foreach ($split as $word) {
    if ((strlen($word) <= 2) || (preg_match("|\d|", $word))) {  //If word is <= 2 char long, or contains a digit
        continue;                                               //Continue to next iteration immediately 
    }
    $result[] = $word;                                          //Add word to result array (would only happen if the above condition was false)
}

$result = implode(" ", $result);                                //Implode result back to string

echo $result; 
```

对于基于单词的字符串操作，解析字符串本身，以单词为基础准确地调节您想要的内容，通常比字符串级别的 RegExp 好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:43:06.057

要处理像 in 这样的 unicode 字符，`tronçonneuse`您可以使用：

```
/\b(?:[\pL-]+\pN+|\pN+[\pL-]+|\pN+|\pL{1,2})\b/ 
```

where`\pL`代表任何字母，`\pN`代表任何数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:35:22.660

Well, for the combinations in your example the following regex would do:

```
/\b(?:[-A-Za-z]+[0-9]+|[0-9]+[-A-Za-z]+|\d{1,2}|[A-Za-z]{1,2})\b/ 
```

Then just replace the match with an empty string.

However, it doesn't allow for strings like `aaa897bbb` - just `aaa786` or `876aaa` (and an optional dash). I don't know what it is that you require - you would have to specify the rules in more detail before the regex can be refined.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:45:39.497

您的要求对于最终答案还不够具体，但这可以作为您的示例：

```
$subject = 'Tronçonneuse sans fil AKE 30 LI - Guide 30 cm 36 V';
$regex = '/(\\s+\\w{1,2}(?=\\W+))|(\\s+[a-zA-Z0-9_-]+\\d+)/';
$result = preg_replace($regex, '', $subject); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T12:31:58.707

[在回调函数http://www.php.net/manual/en/function.preg-replace-callback.php](http://www.php.net/manual/en/function.preg-replace-callback.php)中使用preg_replace_callback和filter

这将适用于所有 3 个测试字符串：

```
<?php

$str = "Tronçonneuse sans fil AKE 30 LI - Guide 30 cm 36 V";

function filter_cb($matches)
{
    $word = trim($matches[0]);

    if ($word !== '-' && (strlen($word) <= 2 || (preg_match("/\d/", $word)))) {
        return '';
    }

    return $matches[0];
}

$result = preg_replace_callback('/([\p{L}\p{N}-]+\s*)/u', "filter_cb", $str);

echo trim($result); 
```

# php - 我如何从javascript中的img标签以外的其他样式中删除样式

> ID：10315563
> 
> 赞同：2
> 
> 时间：2012-04-25T12:25:50.300
> 
> 标签：php, javascript

我想从所有 html 标签中删除样式，但不是从 javascript 中的 img 标签中删除。

我是这样使用的..

```
content.replace(/(<[^>]+) style=".*?"/g, '$1'); 
```

但它替换了所有标签的样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:31:25.503

像这样的东西应该可以作为 javascript 解决方案

```
var els = document.getElementsByTagName('*'),
    len = els.length,
    i = 0;

for (; i < len; i++) {
  if (els[i].nodeName.toUpperCase() !== 'IMG') {
    els[i].removeAttribute('style');
  }
} 
```

[这是关于 jsfiddle http://jsfiddle.net/FnAEt/](http://jsfiddle.net/FnAEt/)的演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:38:57.673

```
content.replace(/(<(?!img)[^>]+) style=".*?"/g, '$1'); 
```

# sms-gateway - 发送短信到服务器进行更新

> ID：10315564
> 
> 赞同：3
> 
> 时间：2012-04-25T12:25:50.987
> 
> 标签：sms-gateway

当用户向服务器发送短信时，我想更新我的服务器数据。我的服务器想通过手机收听我的短信。有什么方法可以实现吗？请告诉我 。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:10:08.087

我想要完成上述任务，您需要使用任何短信网关，如 clickatell、nowsms 等。因此，当短信发送到网关时，网关将从您的设备接收短信，然后更新您的服务器。

# java - 如何使用当前的spring bean访问另一个spring bean中的数据

> ID：10315566
> 
> 赞同：2
> 
> 时间：2012-04-25T12:25:59.133
> 
> 标签：java, spring, dependency-injection

我是 Spring 新手，我有一个小要求。

```
<bean name="triangle" class="com.thomson.learn.spring.triangle">
    <property name="name" ref="dataSource" />
</bean>

<bean id="dataSource" class="java.lang.String">
    <property name="name" value="easy" />
</bean> 
```

我写了如上所示的bean。我需要使用`easy`bean 从 bean访问值`id="triangle"`，但是当我尝试这样做时，我得到了一个异常。有人可以建议如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:31:00.113

字符串没有属性“名称”，因此您无法以您尝试的方式实例化一个。此外，您不需要，因为您可以直接将其用作值，例如：

```
<bean name="triangle" class="com.thomson.learn.spring.triangle">
  <property name="name" value="easy" />
</bean> 
```

编辑以回复您的评论：如果“名称”是 type `shape`，那么您需要在`shape`此处注入...

```
<bean name="triangle" class="com.thomson.learn.spring.triangle">
  <property name="name" ref="shape" />
</bean>
<bean name="shape" class="com.thomson.learn.spring.shape">
    <!-- configure properties here -->
</bean> 
```

Spring连接的对象应该是JavaBeans。这在实践中意味着它们有一个无参数的构造函数和一组属性，每个属性都有一个 getter 和一个 setter。当您编写上述定义时，Spring 使用 setter 来设置您在配置文件中定义的属性。

例如，如果`Shape`是这样的类：

```
package com.thomson.learn.spring.Shape;

class Shape {

  private String name;

  public Shape() {
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }
} 
```

然后你可以用以下方式连接它：

```
<bean id="myShape" class="com.thomson.learn.spring.Shape">
  <property name="name" value="blah" />
</bean> 
```

这实际上转化为 Spring 在运行时执行以下操作：

```
Shape myShape = new Shape();
shape.setName("blah"); 
```

这就是它的全部内容，除了属性当然也可以是其他类的更复杂的实例，这就是为什么您可以使用`ref`引用另一个 bean 的属性。

PS：Spring在很多情况下可以使用反射来注入值，所以它实际上并不需要setter，但是出于各种原因，大多数人都是这样实现他们的bean的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:41:16.697

尝试以下操作：

```
<bean name="triangle" class="com.thomson.learn.spring.triangle">
        <property name="name" ref="dataSource" />
</bean>

<bean id="dataSource" class="com.thomson.learn.spring.shape">
    <property name="name" value="easy" />
</bean> 
```

where`com.thomson.learn.spring.triangle`并且`com.thomson.learn.spring.shape`必须作为项目中的类存在。您的`String`类 bean 无法工作，因为`String`没有要访问的`name`属性（`getName()`方法 getter）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:22:02.240

如果要注入所有 bean 的字符串，您可以从属性文件中引用属性并使用`<context:property-placeholder location="location to .properties"/>` ，或者您可以在配置 xml 中定义属性`<util:properties />`

属性占位符示例

```
<bean id="appDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/> // Refered from property file
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean>

    <context:property-placeholder location="classpath:jdbc.properties"/> 
```

# c++ - 在 Win7 上无法使用 MinGW 编译 RIES

> ID：10315571
> 
> 赞同：1
> 
> 时间：2012-04-25T12:26:12.870
> 
> 标签：c++, gcc, mingw

我正在尝试在 Windows 7 上使用 MinGW编译[该程序。在我第一次尝试时，它给了我这个错误：](http://www.mrob.com/pub/ries/ries.c.txt)

```
>gcc -o ries.exe ries.c -lm

ries.c:1582:21: fatal error: stdafx.h: No such file or directory
compilation terminated. 
```

我用谷歌搜索了一下，发现我应该删除该`# include "stdafx.h"`行，我这样做了。

现在它给了我这个：

```
C:\Users\XXXXXX\AppData\Local\Temp\cczlkqve.o:ries.c:(.text+0xb9): undefined reference to `asprintf'
collect2: ld returned 1 exit status 
```

谷歌现在沉默了……接下来我该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:34:40.127

MinGW 使用 (AFAIK) Microsoft C 运行时库。我认为其中不存在[asprintf](http://linux.die.net/man/3/asprintf)或等效项-尽管这很奇怪，因为无论如何他都包含用于 Windows 构建的 stdafx.h，尽管不是以特别有用的方式（它不能 AFAICS 用于预编译的标头，因为它是在 #if 中)

最简单的解决方法是自己分配缓冲区，即更改

```
char * name_ext;
int nc;
nc = asprintf(&name_ext, "%s.ries", filename); 
```

到

```
char name_ext[MAX_PATH];
int nc;
nc = snprintf(name_ext, MAX_PATH, "%s.ries", filename); 
```

如果没有定义 MAX_PATH（但我认为它会是：你已经有了 stdlib.h），那么要么自己定义它，要么只替换数字 260。

# iphone - 无法在 iPhone 的地图上显示自定义注释

> ID：10315581
> 
> 赞同：0
> 
> 时间：2012-04-25T12:26:49.800
> 
> 标签：iphone, ios, annotations, mkmapview

我正在尝试在我的地图视图上添加注释，但我无法添加它们。有人可以建议我在哪里做错了吗？**代码：**添加地图的代码：

```
mapview = [[MKMapView alloc] initWithFrame:CGRectMake(10, 175, 300, 268)];
mapview.delegate = self;
mapview.userInteractionEnabled = TRUE;
[mapview setZoomEnabled:TRUE];
[mapview setScrollEnabled:TRUE];
mapview.showsUserLocation = TRUE;
[self.view addSubview:mapview]; 
```

//在另一个方法中添加注解:
for (id annotation in mapview.annotations) { [mapview removeAnnotation:annotation]; }

```
 for(int i =0;i<arrEventList.count;i++){
            CLLocationCoordinate2D theCoordinate;
            theCoordinate.latitude = [[NSString stringWithFormat:@"%@",[(NSDictionary*)[arrEventList objectAtIndex:i] objectForKey:@"lat"]] floatValue];
            theCoordinate.longitude = [[NSString stringWithFormat:@"%@",[(NSDictionary*)[arrEventList objectAtIndex:i] objectForKey:@"lng"]] floatValue];

            MyLocation *annotation = [[[MyLocation alloc] initWithName:[(NSDictionary*)[arrEventList objectAtIndex:i] objectForKey:@"event"] address:[(NSDictionary*)[arrEventList objectAtIndex:i] objectForKey:@"place"] coordinate:theCoordinate] autorelease];
            [mapview addAnnotation:annotation];
            //[annotations addObject:myAnno.annotation];
        } 
```

// 委托方法：

```
- (MKAnnotationView *) mapView: (MKMapView *) mapView viewForAnnotation: (id<MKAnnotation>) annotation {
static NSString *identifier = @"MyLocation";   
if ([annotation isKindOfClass:[MyLocation class]]) {

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    annotationView.image=[UIImage imageNamed:@"annotation.png"];//here we use a nice image instead of the default pins

    return annotationView;
}

return nil; 
```

}

上面的委托方法仅对自身位置调用，但对于我要添加的其他注释不调用。

有人能指出我的错误吗

```
@interface MyLocation : NSObject <MKAnnotation> {
NSString *_name;
NSString *_address;
CLLocationCoordinate2D _coordinate; 
```

}

```
@property (copy) NSString *name;
@property (copy) NSString *address;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate;

@end
//Mylocation class:

 @implementation MyLocation
 @synthesize name = _name;
 @synthesize address = _address;
 @synthesize coordinate = _coordinate;

 - (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate {
if ((self = [super init])) {
    _name = [name copy];
    _address = [address copy];
    _coordinate = coordinate;
  }
  return self;
}

- (NSString *)title {
if ([_name isKindOfClass:[NSNull class]]) 
    return @"Unknown charge";
else
    return _name;
}

- (NSString *)subtitle {
return _address;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:16:12.117

我发现了问题。我的代码是正确的。纬度和经度的值有些互换。我的错误，但我现在已经纠正了

# php - Datamapper ( city ) 中的表名错误

> ID：10315582
> 
> 赞同：0
> 
> 时间：2012-04-25T12:26:49.743
> 
> 标签：php, datamapper, codeigniter-datamapper, datamapper-1.2

我有一个名为 City in datamapper for codeigniter 的模型。我将表的名称保留为“城市”，因为 datamapper 需要复数形式的表名称。现在，当我在控制器中为模型创建对象时（ $c = new City(); ）；我收到以下错误：在第 61 行调用 C:\wamp\www\project\application\controllers\userhome.php 中非对象的成员函数 where()。

这是我用过的模型

```
 <?php

        class City extends DataMapper {

            //var $table = "cities";
            function __construct()
            {
                parent::__construct();
            }
        }

        ?> 
```

正如您在模型中看到的那样，我尝试将表名分配给现在我已经评论过的变量。我也得到了错误。

这些是我在控制器中使用的代码。

```
 $c = new City(); 

                    $details3 = $c -> where('city_id', $ct) -> get();
        foreach($details3 as $d3)
        {
            $data['city_native_from_city_table'] = $d3 -> city_name; 
        }
        echo $data['city_native_from_city_table']; echo "<br>"; 
```

请帮帮我。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:37:36.107

您可以删除代码中的注释，如下所示：

```
 <?php

        class City extends DataMapper {

            var $table = "cities";
            function __construct()
            {
                parent::__construct();
            }
        }

        ?> 
```

然后再试一次..！

# c++ - 类成员引用变量是否具有内置的“常量正确性”？

> ID：10315583
> 
> 赞同：0
> 
> 时间：2012-04-25T12:26:53.530
> 
> 标签：c++, reference, const-correctness, class-members

```
struct A {
  int &r; 
  A (int &i) : r(i) {}
  void foo () const {
    r = 5;  // <--- ok
  }
}; 
```

编译器不会在`r = 5;`.
这是否意味着`&r`已经是*const-correct*作为引用（逻辑等价于`int* const`）？[这是一个[相关](https://stackoverflow.com/questions/8469209/why-cant-i-declare-a-reference-to-a-mutable-object-reference-cannot-be-decla)的问题。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:36:02.040

我不确定你所说的“已经是正确的”是什么意思，但是：

赋值`r`与赋值给传递给构造函数的任何东西是一样的`A`。在执行此操作时，您不会修改任何内容`A`，因此声明为 const 的事实`foo`不是障碍。就好像你已经这样做了：

```
struct A {
  int * r;
  A (int * i) : r(i) {}
  void foo () const { *r = 5; }
} 
```

const的事实`foo`意味着它不会修改`A`调用它的实例中的任何内容。这与让它修改提供的其他数据之间没有冲突。

当然，如果您碰巧安排了`r`对某个成员的引用，`A`那么调用毕竟`foo`会修改该实例。`A`编译器无法捕捉到`const`可能违反成员函数的所有可能方式；当您声明一个成员函数时，`const`您承诺它不会参与任何此类诡计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:33:02.647

是的，它的逻辑等价于`int* const`.

在这种情况下，您可能希望创建和使用适当限定的访问器，以防止对值`r`引用进行不必要的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:51:48.700

我将`const`成员函数解释为隐式插入`const`到每个尚未具有此类限定符的数据成员的左侧。这`const`已经隐含地用于引用（`int & const r;`是非法语法）。换句话说，引用“已经是*正确的”*以使用您的命名法。

如果成员函数上的限定符具有在每个数据成员的每个可能的有效位置`const`插入的效果（例如，数据成员的行为就像在成员函数中一样），那就太好了，但这不是发生的事情，它不是t 标准所说的将会发生。`const``int ** foo;``int const * const * const foo;``const`

# ruby-on-rails - 在后台运行 ruby 脚本而不使用屏幕

> ID：10315584
> 
> 赞同：10
> 
> 时间：2012-04-25T12:26:54.247
> 
> 标签：ruby-on-rails, ruby, ssh

我在 Rails 环境中有两个脚本，必须 24/7 运行。我在远程服务器上工作，所以我需要使用 启动脚本`ssh`，这意味着我需要一直打开 ssh 窗口。

我正在寻找一种在后台运行这些脚本的简单方法，以便在我关闭 ssh 连接后它们不会被取消。

我不想使用`screen`. 我认为必须有更简单的方法来处理这个问题。没有吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T12:55:30.867

我认为最基本的解决方案是`nohup`：

```
nohup myscript &> /dev/null & 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T19:47:55.203

您可以拒绝脚本：

```
 ruby script.rb &! 
```

STDOUT/STDERR 仍然附加到当前 shell，但该`ruby`进程不再是 shell 的子进程，因此如果您关闭终端，它不会被杀死。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:29:53.003

检查[守护进程](https://github.com/ghazel/daemons)。它是一个将脚本转换为可控守护进程的工具包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T12:30:43.593

您可以使用

*   [运行](http://smarden.org/runit/)
*   [监督者](http://supervisord.org/)

用于守护进程

或者一些红宝石的东西：[https](https://www.ruby-toolbox.com/#Background_Processing) ://www.ruby-toolbox.com/#Background_Processing用于后台处理

# java - StateException：注解指定的 bean 名称

> ID：10315591
> 
> 赞同：1
> 
> 时间：2012-04-25T12:27:16.307
> 
> 标签：java, spring

我得到以下异常：

> StateException：bean 类 [com.company.project.services.autoExec.ScenarioService] 的注释指定的 bean 名称“scenarioServiceImpl”与现有的、不兼容的同名 bean 定义和 >class[com.company.project.services .autoExec.ScenarioServiceImpl] >在 org.springframework.ontext.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPath>BeanDefinitionScanner.java:274)

这是类和接口的签名：

```
public interface ScenarioService 

@Component("scenarioServiceImpl")
public class ScenarioServiceImpl implements ScenarioService 
```

我真的不明白为什么spring将我在实现中指定的名称归因于接口并最终导致冲突。

PS：我没有使用基于xml的配置，所以请放心没有冲突。

# winapi - 如何查看 Visual C++ 中正在运行或终止的新进程

> ID：10315592
> 
> 赞同：1
> 
> 时间：2012-04-25T12:27:17.087
> 
> 标签：winapi, visual-c++, process

我想知道如何查看正在运行或终止的新进程。我可以使用 Windows 7 API 来实现吗？如何？

我在 Windows 7 中使用 Visual C++，不想使用 .Net Framework。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:52:53.710

虽然您可以使用轮询（即 EnumProcesses）来做到这一点，但最好的方法是事件驱动的方法。为此，您需要使用 WMI。这个[MSDN 页面提供了示例代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390425.aspx)。

**更新**显然您可以使用[Windows 事件跟踪](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803.aspx)作为替代方案，但我个人对此一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:46:11.480

您可以使用`Process32First`和`Process32Next`来自工具帮助库。[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms686701%28v=vs.85%29.aspx)有一个示例如何获取正在运行的进程列表。

另一种方法是[EnumProcesses 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)。

# java - 在 netbeans 中添加其他项目作为库

> ID：10315597
> 
> 赞同：11
> 
> 时间：2012-04-25T12:27:37.713
> 
> 标签：java, netbeans

我有一个项目 A（例如基于 Ant 的 Java 应用程序项目）和第二个项目 B（一个 Java 类库项目或另一个 Java 应用程序项目，均基于 Ant 构建。）

项目 B 有一些额外的 Java 库依赖项（Libraries 文件夹中的 .jar 文件）。

A 依赖于 B。A 可以使用自己在 B 中编写的类，但它看不到 B 的附加库中的类，除非我将这些库/jar 文件添加到 A。

除了 B 自己的 jar 文件之外，有没有办法让 NetBeans 通过包含 B 的依赖项来自动管理 A 中的库依赖项？在 Eclipse 中，当您将 .jar 文件添加到项目 B 时，无需再次将它们添加到 A。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-16T17:34:13.533

在您的项目文件夹中，您应该会看到一个名为的文件夹`Dependencies`，右键单击该文件夹并选择`Add Dependency...`. 打开`Open Projects`标签；从那里您可以从列表中选择您的项目。单击`Add`。

这适用于 NetBeans IDE 7.2.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-10T01:33:37.470

更简单的 NetBeans Ant 项目 Libraries 文件夹用于每个单独项目的编译时和运行时依赖项。如果您的“Java 类库”类型基于 Ant 的项目 B 具有其他库依赖项，则当您将 B 作为 A 的库包含时，它们不会在项目 A 中自动转发或更新。

构建项目 A 时，它的 .jar 文件将仅包含项目 A 代码，而 lib/ 文件夹将仅包含其 Libraries 文件夹中的 .jar 文件。当您升级依赖库版本时，这可能会导致混淆，并且可能忘记在您依赖项目 B 的任何地方升级它们。

您将需要手动管理依赖项，除非您切换到项目管理并构建处理此问题的系统，例如 Maven。

NetBeans Maven 项目将有一个 Dependencies 文件夹而不是 Libraries 文件夹，如果项目 B 已正确设置并注册为 Maven 项目，并且项目 A 也创建为 Maven 项目，则可以将 B 上的依赖项添加到 A 和 B 将转发它是 Maven 项目 A 的依赖信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:36:52.057

如果要在netbeans 中添加另一个项目作为库，请右键单击库目录并选择“添加项目”，选择要添加的项目。当您执行此操作时，将为您正在添加的项目构建的 jar 文件（在 dist 目录中）将被选中，然后单击“添加项目 jar 文件”，这应该将 jar 文件添加到您的项目中。或者，您可以选择“添加 Jar”，然后按照 Ravi 描述的方式自己添加 jar 文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T12:40:38.690

在您的项目文件夹中，您会看到一个名为 的文件夹`Libraries`，右键单击该文件夹，您可以从那里选择您的`.jar`文件。`.jar`添加一次到项目后，您无需重复添加文件。`Clean and Build`每当将新文件添加到文件中时，您只需要添加到您的项目中`.jar`。

# macos - 如何更改架构 mac os x

> ID：10315598
> 
> 赞同：0
> 
> 时间：2012-04-25T12:27:39.320
> 
> 标签：macos, shell, command-line, terminal, cpu-architecture

大家好，我需要更改文件中的架构类型。

当我执行`lipo -info`命令时，我只得到 arm7 但我需要在它旁边放 i386。

是否有任何命令可以在文件中添加我的 i386 信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:30:53.090

是的，它被称为`cc`，但它依赖于一些次要的配置文件（*.m 或 *.c 文件）。

**编辑：**很抱歉没有让这个笑话变得明显。我想说的是：

无法更改可执行文件的体系结构。可执行文件是通过将源代码编译为机器代码生成的，这个过程是不可逆的。您将需要原始源代码将项目重新编译为缺少的架构。然后，您可以使用`lipo`将可执行文件组合成胖二进制文件。

# apache-flex - 我如何在 flex 应用程序中从谷歌地图中获取县 ID

> ID：10315600
> 
> 赞同：0
> 
> 时间：2012-04-25T12:27:47.663
> 
> 标签：apache-flex, google-maps

我尝试在我的 flex 网络应用程序中使用 Google 地图，并借助以下链接[在 flex 项目中使用 Google 地图](http://blog.flexexamples.com/2008/08/03/using-google-maps-in-a-flex-project/)。

每当用户单击地图的任何县时，我都想获取县 ID。借助以下代码，我可以获取该县的纬度和经度。

```
googleMap.addEventListener(MouseEvent.CLICK, onClick);

private function onClick(event:MouseEvent):void
   {
      googleMap.getLatLngBounds();
   } 
```

谁能告诉我如何从纬度或经度中获取县ID。有没有其他方法可以获取县 ID。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:07:10.877

借助以下网址，我们可以获得县 ID

[http://maps.googleapis.com/maps/api/geocode/xml?latlng=22.937121390987343,78.89300930982809&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?latlng=22.937121390987343,78.89300930982809&sensor=false)

# jboss - JRockit 任务控制 4.1 是否支持 SUN 热点（热点）JVM？

> ID：10315604
> 
> 赞同：0
> 
> 时间：2012-04-25T12:27:56.523
> 
> 标签：jboss, jvm, jvm-hotspot, jrockit

我可以在 Oracle 网站上看到一些文档说：“JRockit Mission Control 4.1 现在可供下载。它包括 HotSpot 支持、改进的 Solaris 支持、DTrace 集成、Mac OSX 端口、对 Oracle Coherence 的支持和一系列新的酷特性。 Markus Eisele 的博文中有更多详细信息。”

但实际上我无法使用 jrmc 连接到我在 SUN HotSpot JVM 上运行的 JBoss 应用程序，有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:23:28.243

如果您是 Oracle 客户，您可以从 MOS (My Oracle Support) 下载 Java Mission Control 5.x (Mission Control for Hotspot) 的早期版本。您将需要运行最新版本的 Oracle JDK 7 (>= 7u4)。请注意，仍然有很多限制，如下所述：http: [//hirt.se/blog/](http://hirt.se/blog/?p=211) ?p=211 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:09:03.493

来自官方 JRockit 网页：Oracle JRockit Mission Control 客户端现在可以在 Oracle HotSpot JVM 上运行。JRockit Mission Control 还可以在 Hotspot JDK 1.6 及更高版本上启动本地管理。**请注意，您仍然需要连接到 JRockit 才能使用大多数任务控制工具。**

# sql - Oracle：按月分解多个条目

> ID：10315606
> 
> 赞同：0
> 
> 时间：2012-04-25T12:28:00.070
> 
> 标签：sql, oracle, date-arithmetic

我在下表中有数据

```
start_date      end_date        amount
15-01-2012      25-01-2012      100
26-01-2012      10-02-2012      100
11-02-2012      29-02-2012      100 
```

我希望这些条目按月分解如下

*   15-01 到 25-01 = 100
*   26-01 到 31-01 = 100/((10-02-2012 - 26-01-2012) +1 ) * ((31-01-2012 - 26-01-2012) + 1) = 37.5 所以期间2012 年 1 月 15 日至 2012 年 1 月 31 日 = 100 + 37.5 = 137.5

2 月份的金额应为

*   01-02 至 10-02 = 100/((10-02-2012 - 26-01-2012) +1 ) * ((01-02-2012 - 10-02-2012) + 1) = 62.5
*   11-02 到 29-02 = 100

所以对于 2 月 01-02-2012 到 29-02-2012 = 62.5 + 100 = 162.5

所以最终输出应该是

```
start_date      end_date        amount
15-01-2012   31-01-2012                  137.5
01-02-2012   29-02-2012          162.5 
```

有什么方法可以在不使用 PLSQL 的情况下实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:33:38.130

you can use a LAG function to determine the daily average between one row and a previous (sorted) row.

once you have a daily average, you can multiply by the number of days in the period.

all in the same sql statement.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:00:27.460

我不确定您要如何计算这些值，但首先，尝试每月打破记录：

```
with dts as (select last_day(add_months(
  to_date('20111201','yyyymmdd'),level)) ld,
             add_months(
  to_date('20111201','yyyymmdd'),level) sd
             from dual connect by level < 12)
select case when start_date >= sd then start_date  else sd end st_dt,
case when end_date <= ld then end_date  else ld end en_dt, amount,
ld-sd days_in_month,
case when end_date <= ld then end_date  else ld end-
case when start_date >= sd then start_date  else sd end part
from t, dts
where (start_date >= sd and to_char(start_date, 'yyyymm') = 
       to_char(sd, 'yyyymm'))
       or (end_date <= ld and to_char(end_date, 'yyyymm') = 
       to_char(ld, 'yyyymm')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:05:03.460

我看到 AB Cade 打败了我，但这是我的解决方案：

```
SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MM-YYYY'
  2  /

Session altered.

SQL> CREATE TABLE t (start_date DATE, end_date DATE, amount NUMBER);

Table created.

SQL> INSERT INTO t VALUES (TO_DATE('20120115','YYYYMMDD'),TO_DATE('20120125','YYYYMMDD'),100);

1 row created.

SQL> INSERT INTO t VALUES (TO_DATE('20120126','YYYYMMDD'),TO_DATE('20120210','YYYYMMDD'),100);

1 row created.

SQL> INSERT INTO t VALUES (TO_DATE('20120211','YYYYMMDD'),TO_DATE('20120229','YYYYMMDD'),100);

1 row created.

SQL> 
```

设置了一些测试数据...

```
SQL> COL for_month       FOR A9
SQL> COL pro_rated_start FOR A15
SQL> COL pro_rated_end   FOR A13
SQL> 
```

...并格式化了一些列...

```
SQL> WITH months AS (
  2      SELECT TRUNC(MIN(start_date),'MM') min_start_month
  3      ,      MONTHS_BETWEEN(TRUNC(MAX(end_date),'MM'),TRUNC(MIN(start_date),'MM')) + 1 mos
  4      FROM   t
  5  )
  6  , offset AS (
  7      SELECT ROWNUM - 1 r
  8      FROM  (SELECT NULL
  9             FROM   DUAL
 10             CONNECT BY LEVEL <= (SELECT mos FROM months))
 11  )
 12  , ranges AS (
 13      SELECT  ADD_MONTHS(months.min_start_month, offset.r)                mo_start
 14      ,       LAST_DAY(ADD_MONTHS(months.min_start_month, offset.r))      mo_end
 15      FROM    offset
 16      ,       months
 17  )
 18  SELECT      TO_CHAR(GREATEST(t.start_date,ranges.mo_start),'Mon YYYY') for_month
 19  ,           MIN(GREATEST(t.start_date,ranges.mo_start))                pro_rated_start
 20  ,           MAX(LEAST(t.end_date,ranges.mo_end))                       pro_rated_end
 21  ,           SUM(t.amount
 22                  * CASE
 23                    WHEN t.end_date < ranges.mo_end
 24                     AND t.start_date > ranges.mo_start
 25                    THEN 1
 26                    ELSE ((LEAST(t.end_date,ranges.mo_end)
 27                        - GREATEST(t.start_date,ranges.mo_start) + 1)
 28                       / (t.end_date - t.start_date + 1))
 29                    END)  pro_rated_amount
 30  FROM        t
 31  ,           ranges
 32  WHERE       t.start_date <= ranges.mo_end
 33  AND         t.end_date >= ranges.mo_start
 34  GROUP BY    TO_CHAR(GREATEST(t.start_date,ranges.mo_start),'Mon YYYY');

FOR_MONTH PRO_RATED_START PRO_RATED_END PRO_RATED_AMOUNT
--------- --------------- ------------- ----------------
Jan 2012  15-01-2012      31-01-2012               137.5
Feb 2012  01-02-2012      29-02-2012               162.5

SQL> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:07:06.057

```
SQL> select * from q10315606;

START_DATE END_DATE       AMOUNT
---------- ---------- ----------
2012-01-15 2012-01-25        100
2012-01-26 2012-02-10        100
2012-02-11 2012-02-29        100

SQL> with day_generator as
  2  -- this block expands out every date in the entire date range
  3  (
  4  select min_start_date + level - 1 as date_value
  5    from (select min(start_date) as min_start_date,
  6                 max(end_date) - min(start_date) + 1 as total_days
  7            from q10315606
  8         )
  9   connect by level <= total_days
 10  ),
 11  range_averages as
 12  -- this block generates a daily average for each date range
 13  (
 14  select start_date, end_date,
 15         end_date - start_date + 1 as days_inclusive,
 16         amount / (end_date - start_date + 1)  as daily_amount
 17    from q10315606
 18  )
 19  select start_date, end_date, sum(amount) as amount
 20    from (
 21  -- here we cast all the dates to the minimum and maximum value found in the month
 22          select min(dg.date_value)
 23                   over (partition by last_day(dg.date_value) ) as start_date,
 24                 max(dg.date_value)
 25                   over (partition by last_day(dg.date_value) ) as end_date,
 26                 ra.daily_amount as amount
 27            from range_averages ra,
 28                 day_generator dg
 29           where dg.date_value between ra.start_date and ra.end_date
 30         )
 31   group by start_date, end_date
 32*  order by start_date, end_date
amusch@AGDEV:SQL> /

START_DATE END_DATE       AMOUNT
---------- ---------- ----------
2012-01-15 2012-01-31      137.5
2012-02-01 2012-02-29      162.5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:08:05.720

这是一个尝试：

我加入了几个月。如果一行在两个月上将被“复制”，更准确地说，将在两个月上分布。对于每一行*月，我应用公式`amount/(days in current row) * (days in current month)`

```
with months as 
    (select add_months('1-Jan-2012', level -1) as mon
    from dual 
    connect by level < 12)
select mon, sum(amount)
from(
    select 
        months.mon, 
        amount/(end_date - start_date +1)*
           (case when trunc(start_date,'MM') = months.mon 
                 then least(last_day(start_date), end_date) - start_date +1 
                 else end_date - greatest(months.mon, start_date) +1 
            end) as amount
    from your_table y 
    join months on 
      (months.mon between trunc(start_date,'MM') and trunc(end_date, 'MM'))
)
group by mon; 
```

这段代码已经过测试，并给出了您想要的结果。

# asp.net-mvc - asp .net mvc 自定义模型绑定失败

> ID：10315610
> 
> 赞同：0
> 
> 时间：2012-04-25T12:28:10.687
> 
> 标签：asp.net-mvc

我写了一个自定义活页夹，但我似乎无法让它运行。这是我的代码：

```
 public abstract class SlideItem
{
   public string PlaceHolderName { get; set; }
    public uint PlaceHolderID { get; set; }
    public uint ItemType { get; set; }
}

public class TitleSlideItem : SlideItem
    {
       ...

        public TitleSlideItem()
        {
            ItemType = 1;
        }
    }

public class ParagraphSlideItem : SlideItem
{
     ...
     public ParagraphSlideItem()
    {
        ItemType = 2;
    }
}

 public class SlideItemBinder : IModelBinder

{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {

        System.Diagnostics.Trace.WriteLine("BindModel is working");

        var values = (ValueProviderCollection)bindingContext.ValueProvider;
        var placeHolderName = (string)values.GetValue("PlaceHolderName").ConvertTo(typeof(string));
        var placeHolderID = (uint)values.GetValue("PlaceHolderID").ConvertTo(typeof(uint));
        var itemType = (uint)values.GetValue("ItemType").ConvertTo(typeof(uint));
        switch (itemType)
        {
            case 1:
                System.Diagnostics.Trace.WriteLine("TitleSlideItemBinder");
                return (SlideItem)new TitleSlideItem { PlaceHolderName = placeHolderName };
            case 2:
                System.Diagnostics.Trace.WriteLine("ParagraphSlideItem");
                return (SlideItem)new ParagraphSlideItem { PlaceHolderName = placeHolderName };
            case 3:
                System.Diagnostics.Trace.WriteLine("TextSlideItem");
                return (SlideItem)new TextSlideItem { PlaceHolderName = placeHolderName };
            case 4:
                System.Diagnostics.Trace.WriteLine("PictureSlideItem");
                return (SlideItem)new PictureSlideItem { PlaceHolderName = placeHolderName };
            default:
                System.Diagnostics.Trace.WriteLine("this should never-ever-ever-ever happen");
                //this should never-ever-ever-ever happen
                return (SlideItem)new TextSlideItem { PlaceHolderName = placeHolderName };
        }           
    }
} 
```

我将此添加到我的 global.asax.cs 中：

```
 ModelBinders.Binders.Add(new KeyValuePair<Type, IModelBinder>(typeof(SlideItem), new SlideItemBinder())); 
```

但是当我尝试运行它时：

```
 [System.Web.Http.HttpPost]
 public HttpResponseMessage Create(IList<SlideContent> l)
        { 
```

... }

我仍然收到 System.MissingMethodException 说：无法创建抽象类

我哪里错了？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:38:26.850

检查此链接。您可能会在此处找到解决方案：[ASP.NET MVC 2 - 绑定到抽象模型](https://stackoverflow.com/questions/4012217/asp-net-mvc-2-binding-to-abstract-model)

答案有一个自定义模型绑定器。

# ruby-on-rails-3 - 从 restful_authentication 升级到 devise :confirmable 不确认旧用户

> ID：10315612
> 
> 赞同：0
> 
> 时间：2012-04-25T12:28:12.780
> 
> 标签：ruby-on-rails-3, devise, restful-authentication, devise-confirmable

我已将我的应用程序从 Rails 2.3.5 升级到 Rails 3.2.2。我已经用设计 wiki 中给出的步骤指导替换了来自 RESTful 身份验证的身份验证。

我有用户模型

```
 devise :database_authenticatable, :registerable,:confirmable, :validatable,
     :recoverable, :rememberable, :trackable, :encryptable,:encryptor => :restful_authentication_sha1,:authentication_keys => [:login] 
```

当我尝试使用旧用户登录时，由于确认令牌匹配问题，我无法登录。确认后我可以使用新用户登录

但是当我`:confirmable`从设计选项中删除时。我也可以用老用户登录。

我加了**胡椒**和舒展

```
config.stretches = 10

config.pepper = "<KEY_FOR_SITE>" 
```

另一件事是，当我尝试使用未经确认的用户登录时，不会显示通知，只是登录页面刷新

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:21:40.943

尝试设置：

```
config.stretches = 1
config.pepper = '' 
```

# java - getClass().getField() 上的 NoSuchFieldException

> ID：10315614
> 
> 赞同：6
> 
> 时间：2012-04-25T12:28:15.677
> 
> 标签：java

```
java.lang.NoSuchFieldException: id 
```

下面的行正在创建异常。

```
String fieldValue =String.valueOf(studyplanCategory.getClass().getField(filterProperty).get(studyplanCategory)); 
```

studyplanCategory 是一个有效的对象并且有实际的值。由于此异常，我的 JSF webapp 的 LazyLoading DataTable 中的加载方法和搜索功能无法正常工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T12:44:01.747

来自[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getField(java.lang.String))的`Class.getField(...)`：

> 返回一个反映此 Class 对象表示的类或接口的指定公共成员字段的 Field 对象。name 参数是一个字符串，指定所需字段的简单名称。要反射的场由下面的算法确定。设 C 为该对象所代表的类：
> 
> 如果 C 声明了一个具有指定名称的公共字段，那就是要反映的字段。如果在上面的步骤 1 中没有找到任何字段，则该算法递归地应用于 C 的每个直接超接口。直接超接口按照它们被声明的顺序进行搜索。如果在上面的步骤 1 和 2 中没有找到字段，并且 C 有一个超类 S，则在 S 上递归调用此算法。如果 C 没有超类，则抛出 NoSuchFieldException。请参阅 Java 语言规范，第 8.2 和 8.3 节。

如果您尝试通过以下方式检索的字段：

```
studyplanCategory.getClass().getField(filterProperty) 
```

是私人的，那么你会得到一个`NoSuchFieldException`. 对于私有字段，请尝试以下操作：

```
studyplanCategory.getClass().getDeclaredField(filterProperty) 
```

并以这种方式通过字段设置值时绕过潜在的非法访问异常：

```
Field field = studyplanCategory.getClass().getDeclaredField(filterProperty);
field.setAccessible(true);
field.get(studyplanCategory); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T12:45:39.983

应用程序会触发此异常，因为它看不到您想要回馈的属性。方法 getField() 返回非私有属性，因此如果您的属性是私有的，则方法看不到它们。您可以查看[http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html](http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html)

因此，您可以这样做，您的属性将更改为受保护或公开，然后应该正常工作。但是这种方式（与 primefaces 上的示例相同）模拟真实数据库。

```
public List<Car> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {  
        List<Car> data = new ArrayList<Car>();  

        //filter  
        for(Car car : datasource) {  
            boolean match = true;  

            for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {  
                try {  
                    String filterProperty = it.next();  
                    String filterValue = filters.get(filterProperty);  
                    String fieldValue = String.valueOf(car.getClass().getField(filterProperty).get(car));  

... 
```

因此，此列表仅以模拟真实数据库为例。如果你想使用它。所以你应该在支持 bean 类上做它并在那里做。您已经使用某些过滤器打开连接或不打开连接，然后从数据库返回数据。

//编辑：Man 写道您应该使用 getDeclaredField() 但我确实尝试过，但效果不佳，并引发了 IlegalAccessException。当一个 pretype 归属于 protected 时，它可以正常工作。我不知道为什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T07:56:03.270

问题的最佳解决方案`getClass().getField()`是：

使用**getDeclaredField** () 代替**getField** ()

1)

```
String propertyName = "test";<br/>
Class.forName(this.getClass().getName()).getDeclaredField(propertyName); 
```

2)

```
String propertyName = "name";<br/>
Replace **"HelloWorld"** with your class name<br/>
HelloWorld.class.getDeclaredField(propertyName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-19T12:34:31.503

我也遇到过同样的问题。我的问题是我的变量不是**public**。确保您的类变量是**公开的**

```
 private Object getVariableValue(Object clazz, String variableName) {
    try {
        Field field = clazz.getClass().getField(variableName);
        return field.get(clazz);
    } catch (NoSuchFieldException e) {
        return "";
    } catch (IllegalAccessException e) {
        return "";
    }

} 
```

# c++ - 在 C++ 中获取数字的所有组合

> ID：10315617
> 
> 赞同：4
> 
> 时间：2012-04-25T12:28:26.200
> 
> 标签：c++, algorithm

我需要获得给定集合的所有可能*组合*。例如，给定：[1, 4, 7]，结果组合应该是：

*   111, 114, 117, 141, 144, 147, 171, 174, 177, 411, 414, 417, 441, 444, 447, 471, 474, 477, 711, 714, 717, 741, 744, 747, 771, 774, 777.

我尝试使用`next_permutation`方法，但这不是我想要的（这不会返回 111、144、717 等值）。

那么有什么办法可以在 C++ 中做到这一点吗？请注意，我是一个完整的初学者。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T12:41:28.710

仔细看一下数字：您列出的所有数字也可以表示为列表 {11,14,17,41,44,47,71,74,77}，前缀一次是 1，一次是 4，一次是 7 . 这指向一个通用规则：

> 具有集合 {1,4,7} 的 3 个数字的字符串是通过获取具有相同集合的 2 个数字的字符串并在集合的每个元素前面加上来构建的。

概括这条规则中的 3 和 2，用递归实现结果的想法，你就有了一个算法来解决你的问题。

作为 C++ 实现说明，请确保使用字符串而不是整数来表示数字。这个问题不是算术问题，并且与 base-10 表示紧密耦合。弦乐会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:33:02.163

使用值创建一个数组，例如 {1, 4, 7}。

使用 length(array) 循环，每个循环都有 length(array) 迭代。

在最内层循环输出 100 * array[i] + 10 * array[j] + array[k]

如果最大长度未知，则使用递归，例如**伪代码**：

```
void Solve(int[] array, int length, int position, int sum)
{
    position++;
    sum *= 10;

    for (int cnt = 0; cnt < length; cnt++)
    {
        int tempsum = sum + array[cnt];

        if (position == length)
            output(tempsum);
        else
            Solve(array, length, position, tempsum);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:38:32.570

`vector`创建一个大小等于集合中元素数量的整数向量（称为）。将每个条目初始化为 0。然后遵循以下算法：

1) Walk `vector`，输出对应的元素。（所以如果向量是 0,1,1，集合是 [9,8,7]，输出 988——第零个元素，第一个元素，第一个元素。）

2) 设置一个被称为`element`0 的整数。

3) 增量`vector[element]`。检查是否`vector[element]`等于集合中的元素数。如果没有，请转到步骤 1。

4) 设置`vector[element]`为零。增量`element`。如果`element`小于集合中的元素个数，则转到步骤 3。

5) 停止。你完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:35:18.807

在这里看看我的答案：[PHP 采用所有组合](https://stackoverflow.com/questions/9787051/php-take-all-combinations/9787438#9787438)

**提示：**这不是 C++ 代码，但你会明白的。（我建议使用递归）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:47:24.643

好吧，我冒昧地尝试执行任务。我想锈掉一点我的算法知识。结果是这样的：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <set>
using namespace std;

vector<int> allowedNumbers;

bool my_next_perm(vector<int>::iterator& begin, vector<int>::iterator& end) {
    for (vector<int>::iterator itr = end - 1; ; --itr)
    {
        if (*itr != allowedNumbers.back())
        {
            *itr = *upper_bound(allowedNumbers.begin(), allowedNumbers.end(), *itr);
            while ((++itr) != end) {
                *itr = allowedNumbers[0];
            }
            return true;
        }
        if (itr == begin)
        {
            return false;
        }
    }
}
void printAllPermutationsWithRepetitions(vector<int>& v)
{
    int n = v.size();
    set<int> allNumbers;
    for (int i = 0; i < n; i++)
    {
        allNumbers.insert(v[i]);
    }
    for (set<int>::iterator itr = allNumbers.begin(); itr != allNumbers.end(); ++itr) {
        allowedNumbers.push_back(*itr);
    }
    for (int i = 0; i < n; i++) {
        v[i] = allowedNumbers[0];
    }

    do {
        for (int i = 0; i < n; i++) {
            if (i != 0) cout << " ";
            cout << v[i];
        }
        cout << endl;
    } while(my_next_perm(v.begin(), v.end()));
}

int main (int argc, char *argv[]) {
    vector<int> v;
    v.push_back(7);
    v.push_back(1);
    v.push_back(3);
    printAllPermutationsWithRepetitions(v);
    return 0;
} 
```

实现只是稍微次优（因为我使用`upper_bound`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T13:40:07.083

您实际上是从 000 到 222 以 3 为基数进行计数，并以这些数字作为索引来查找您的 [1, 4, 7] 数组。将其推广到任意大小的输入数组：

```
int n = digits.size();
int n_n = std::pow(n, n);
for (int i = 0; i < n_n; ++i)
{
     int x = i;
     for (int j = 0; j < n; ++j)
     {
          cout << digits[x % n];
          x /= n;
     }
     cout << ' ';
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-18T14:07:18.073

这是**最简单**的方法。您可以将**任何数字**作为用户的输入，例如 147，它会将**所有排列**打印为：111、114、117、141、144、147、171、174、177、411、414、417、441、444、447、471 , 474, 477, 711, 714, 717, 741, 744, 747, 771, 774, 777。

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

 bool Search(int A[],int num,int length)
    {
        for(int i = 0;i<length;i++)
            if(A[i] == num)
                return 1;
        return 0;
    }

    int main()
    {
        int n;
        cout << "Please Enter a Number\n";
        cin>>n;
        int num = n, k = 1;
        int count = 0;
        while(num>0)
        {
            num/=10;
            count++;
        }
        cout<<"The All Permutations of " <<n<<" are: "<<endl;
        num = n;
        int *A = new int[count];

        for(int i = 0;i<count;i++)
        {
            A[i] =  num%10;
            num/=10;
        }

        int fact = pow(count,count);
        int *Ar = new int[fact];
        int *B = new int[count];
        int value,number = 0;

        for(int i = 0;i<fact;)
        {

            for(int j = 0;j<count;++j)
            {
                value = (rand()%count);

                B[j] = value;
            }

            for(int k= 0;k<count;k++)
                number = number + A[B[k]]*pow(10,k);

            if(Search(Ar,number,fact) == 0)
            {
                cout<<k++<<". "<<number<<endl;
                Ar[i] = number;
                ++i;
            }
            number = 0;

        }

        return 0;
    } 
```

# c# - asp.net Button.Click 事件未触发

> ID：10315619
> 
> 赞同：0
> 
> 时间：2012-04-25T12:28:29.247
> 
> 标签：c#, asp.net, events, button, event-handling

我有一个 ASP.WebSite，其中我在 aspx.cs 上使用动态添加了一些表单控件

```
form1.Controls.Add( " Object of Control "); 
```

另外一个已经在 aspx 文件中的表单上添加了一个按钮，使用

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Add" UseSubmitBehavior="false" /> 
```

现在，当我运行程序时，它将 Button1 转换为 HTML 提交按钮，如下所示

```
<input type="button" name="Button1" value="Add" onclick="javascript:__doPostBack('Button1','')" id="Button1" /> 
```

并且表单标签变为

```
<form name="form1" method="post" action="Add1.aspx" id="form1" enctype="multipart/form-data"> 
```

当我单击 Button1 时，它会提交表单，而不是调用 Code Behind 上的函数。

如何调用Button1 的 OnClick 事件中指定的方法**Button1_Click ？**

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:33:21.087

您是否在代码隐藏中实现了单击事件处理程序？

```
protected void Button1_Click(Object sender, EventArgs e)
{
    Button btn = (Button)sender;
} 
```

[Button.Click 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

我不知道这个问题与您的*动态控制* 问题有什么关系，因为`Button1`它是以声明方式添加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:51:53.137

我应该动态添加按钮控件如下：

```
 b1.ID = "EDIT";
    b1.Text = "Add";
    b1.Click +=new System.EventHandler(this.Button1_Click);
    b1.Style["Position"] = "Absolute";
    b1.Style["Top"] = "10px";
    b1.Style["Left"] = "20px";
    form1.Controls.Add(b1); 
```

它现在在 Button1 的单击事件上调用函数 Button1_Click。在这种情况下，我必须手动创建函数**Button1_Click**，即不仅仅是双击设计页面。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-25T13:00:30.893

您要动态添加的控件，您必须在页面加载时添加它。

然后它会正常工作。

# c# - 使用 ASP.Net C#、DropDownList 和重定向？

> ID：10315625
> 
> 赞同：1
> 
> 时间：2012-04-25T12:29:00.600
> 
> 标签：c#, asp.net, drop-down-menu

我有一个 DropDownList 有几个选项。我希望用户选择一个选项，当单击下一步按钮时，页面将重定向到其相应的页面。前任。
如果用户选择选项 A > 下一步按钮 > 页面 A
如果用户选择选项 B > 下一步按钮 > 页面 B
请问我该怎么做？

附加细节：
只有一个 DropDownList，值是从连接的数据库和一个 Next 按钮填充的。

更新：
我使用了下面的 switch 语句。它正在重定向，但无论选择什么，它总是重定向到 Birthday.aspx 页面。

```
switch (lstCategory.SelectedValue.ToString())
    {
        case "Birthday":
            Response.Redirect("Birthday.aspx");
            break;
        case "Christmas":
            Response.Redirect("Christmas.aspx");
            break;
        case "Valentine":
            Response.Redirect("Valentine.aspx");
            break;
    } 
```

问题解决了！
我需要做的就是从 DropDownList 启用 AutoPostBack

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:33:25.250

you can try this.

in the click event of next button 1) see the value of the dropdownlist. if it is A, Response.Redirect to page A 2) if it is B, Response.Redirect to B

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:34:15.347

```
protected void Button_Click(object sender, EventArgs e)
    {
          switch(dropdownlist.SelectedValue) // or SelectedText
           {
             case "A": 
             Response.Redirect("A.aspx");
             break;
             case "B":
             Response.Redirect("B.aspx");
             break;
             default:
             Response.Redirect("NotFound.aspx");;
             break;
           }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:35:03.230

You could do something like this:

**HTML:**

```
<asp:DropDownList ID="DropDown1" runat="server">
    <asp:ListItem>Option A</asp:ListItem>
    <asp:ListItem>Option B</asp:ListItem>
</asp:DropDownList>

<asp:Button ID="Button1" runat="server" Text="Next" /> 
```

**C# CodeBehind:**

```
protected void Button1_Click(object sender, EventArgs e)
{
    string redirectTo = string.Empty;

    switch (DropDown1.SelectedIndex) {
        case 0:
            redirectTo = "PageA.aspx";
            break;
        case 1:
            redirectTo = "PageB.aspx";
            break;
    }

    Response.Redirect(redirectTo);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T12:36:54.877

我假设你是 stackoverflow 和 asp.net 的新手，我会给你一些在线教程供你参考。

[代码项目](http://www.codeproject.com/Questions/191898/DropDownList-and-capturing-values-after-SelectedIn)

[电子杂志 asp.net](http://www.ezineasp.net/post/ASP-Net-DropDownList-OnSelectedIndexChanged-Event.aspx)

尝试使用此网站进行一些操作，您将了解如何使您的要求发挥作用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T12:37:48.657

基本上你需要：

1）创建一个按钮单击事件（双击按钮） 2）在这个新事件中写下类似的内容：

```
If(YourDropDownList.SelectedValue == 1){
Response.Redirect("http://www.SiteA.com");
}
else
{
Response.Redirect("http://www.SiteB.com");
} 
```

如果您发布到目前为止您可以做的事情，那么尝试提供帮助会更容易。

希望能帮助到你

工作代码：

我的页面正文：

```
<body>
    <form id="form1" runat="server">
    <div>
    <asp:DropDownList ID="db" runat="server">
        <asp:ListItem>www.ademargomes.com</asp:ListItem>
        <asp:ListItem>www.google.com</asp:ListItem>
    </asp:DropDownList>

    <asp:Button runat="server" Text="Redirect" ID="bt" onclick="bt_Click"/>

    </div>
    </form>
</body> 
```

按钮后面的代码：

公共部分类 WebForm1：System.Web.UI.Page

{ protected void Page_Load(object sender, EventArgs e) {

```
}

protected void bt_Click(object sender, EventArgs e)
{
    if (db.SelectedValue == "www.ademargomes.com")
    {
        Response.Redirect("http://www.ademargomes.com");
    }
    else
    {
        Response.Redirect("http://www.google.com");
    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T12:34:49.930

1.  Keep dropdown list, next button or html link button

2.  write javascript to get the selected option of dropdown, And use if condition to and navigate pages as per the option selected.

3.  Incondition-> set the url's value property to the page link that u have.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T15:55:59.867

一种简单的方法是将 ListItem 的值设置为您想要的值，例如：

```
<asp:DropDownList ID="ddlChoices" runat="server">
    <asp:ListItem Value="pageA.aspx" Text="OptionA" />
    <asp:ListItem Value="pageB.aspx" Text="OptionB" />
</asp:DropDownList>

<asp:Button ID="btnClickMe" runat="server" Text="Click Me" OnClick="btnClickMe_Clicked" /> 
```

**背后的代码**

```
protected void btnClickMe_Clicked(object sender, EventArgs e) {
    Response.Redirect(ddlChoices.SelectedValue);
} 
```

# extjs - ExtJS 3 将 textarea 内容导出到文本文件

> ID：10315632
> 
> 赞同：0
> 
> 时间：2012-04-25T12:29:51.903
> 
> 标签：extjs, textarea, export

我需要将 ExtJS TextArea 的内容导出到文本文件。我搜索了文档，但没有找到与 textarea 相关的任何内容。这可能吗？

准备文件名以及将文本区域内容导出到文件的能力也是理想的选择。

帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:56:45.420

您不能只将 JS 文件中的内容保存到用户本地计算机文件系统的任何位置。这是一个巨大的安全漏洞，它只是不能以这种方式工作。但是，您有几个选择：

*   将此信息发送到您的服务器并为用户提供文件链接。用户单击该链接服务器将响应信息 - 浏览器保存该数据。你甚至可以让浏览器自动下载内容（好吧，无论如何，大部分都是这样）

*   或者您可以要求用户右键单击并将此信息复制到剪贴板中。

# c# - GetCustomAttributes 不返回值

> ID：10315637
> 
> 赞同：6
> 
> 时间：2012-04-25T12:30:04.793
> 
> 标签：c#, reflection, ado.net

我已经定义了一个自定义属性

```
[AttributeUsage(AttributeTargets.Property )]
public class FieldAttribute: Attribute
{
    public FieldAttribute(string field)
    {
        this.field = field;
    }
    private string field;

    public string Field
    {
        get { return field; }

    }
} 
```

使用自定义属性的我的类如下

```
[Serializable()]   
public class DocumentMaster : DomainBase
{

    [Field("DOC_CODE")]
    public string DocumentCode { get; set; }

    [Field("DOC_NAME")]
    public string DocumentName { get; set; }

    [Field("REMARKS")]
    public string Remarks { get; set; }

   }
} 
```

但是当我尝试获取自定义属性的值时，它返回空对象

```
Type typeOfT = typeof(T);
T obj = Activator.CreateInstance<T>();

PropertyInfo[] propInfo = typeOfT.GetProperties();

foreach (PropertyInfo property in propInfo)
{

     object[] colName = roperty.GetCustomAttributes(typeof(FieldAttributes), false);
     /// colName has no values.
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T12:34:53.957

typo: should be `typeof(FieldAttribute)`. There is an unrelated system enum called `FieldAttributes` (in `System.Reflection`, which you have in your `using` directives, since `PropertyInfo` resolves correctly).

Also, this is easier usage (assuming the attribute doesn't allow duplicates):

```
var field = (FieldAttribute) Attribute.GetCustomAttribute(
          property, typeof (FieldAttribute), false);
if(field != null) {
    Console.WriteLine(field.Field);
} 
```

# c++ - 使用QDOMDocument获取第一级子节点

> ID：10315644
> 
> 赞同：1
> 
> 时间：2012-04-25T12:30:34.790
> 
> 标签：c++, qt, qt4

我正在尝试使用 QDomDocument 解析 Xml 文件。
我有根元素。现在我需要
在根元素下查找并提取特定节点，但仅在层次结构的第一级。

我尝试使用：

`QDomElement root = doc.documentElement();`

`QDomNodeList nodeList = root.elementsByTagName("apple");`

但这会返回一个 nodeList ，其中包含
所有层次结构中标签名称为“apple”的节点。但我只需要一级搜索。

有人可以帮我吗。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:23:13.910

没有方法可以完全按照您的意愿进行操作，但是通过使用以下方法迭代子级很容易实现：

```
QList<QDomElement> elements;
QDomElement child = root.firstChildElement("apple");
while(!child.isNull()) {
  elements.append( child );
  child = child.nextSiblingElement("apple");
} 
```

# objective-c - 调度队列时应用程序阻塞

> ID：10315645
> 
> 赞同：0
> 
> 时间：2012-04-25T12:30:35.477
> 
> 标签：objective-c, grand-central-dispatch, xmppframework

我使用 XMPPFramework 并且在它的代码中有这样的方法：

```
- (NSDictionary *)occupants
{
    if (dispatch_get_current_queue() == moduleQueue)
    {
        return occupants;
    }
    else
    {
        __block NSDictionary *result;

        dispatch_sync(moduleQueue, ^{//IT BLOCKS HERE, WITHOUT MESSAGE
            result = [occupants copy];
        });

        return [result autorelease];
    }
} 
```

[编辑] 它不一致地阻塞，并非总是如此，因为应用程序没有做任何事情我暂停它，我看到线程已经停止在那里，它永远不会继续执行。怎么了？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:10:11.430

您解释的行为与您在主线程上尝试通过 GCD 在主线程上执行操作时出现的行为完全匹配。所以你应该检查 moduleQueue 是否是主队列，那么就是这样。尝试检查它是否是主队列，如果是，则跳过 dispatch_sync 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:14:38.563

块有时需要保留变量以确保它们在执行时可用。如果在块内使用局部变量，则应在块外声明它时将其初始化为零。

# wordpress - 在 wordpress 博客中加载标题时如何运行挂钩操作？

> ID：10315647
> 
> 赞同：3
> 
> 时间：2012-04-25T12:30:38.637
> 
> 标签：wordpress, hook

我正在使用错误插件。我想在 WordPress 博客站点中加载标题时生成一些错误或成功消息。

像：

```
if(is header load)
{
  //run a action hook here
  //print success or error msgs through hook function
} 
```

建议在标题加载时显示消息的钩子操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:58:15.933

下面的代码可能会有所帮助。您可以将此代码放在主题文件夹中的 functions.php 中。

```
 function load_me_on_header()
            {
               // do something here ... like show error message.
            }

            add_action('wp_head','load_me_on_header'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T23:20:52.093

您也可以以相同的方式使用 add_filter() 函数。当涉及内容处理时，过滤器更适合。

# ios - iPad 视网膜显示屏上的黑屏

> ID：10315659
> 
> 赞同：1
> 
> 时间：2012-04-25T12:31:06.967
> 
> 标签：ios, cocos2d-iphone

我在 iPad 上运行的一个小游戏应用程序有问题。当我午餐模拟器 iOS 5.1 和 iPad 视网膜显示时，应用程序从我的默认图像 @x2 开始，显示图像后进入黑屏。在普通 iPad iOS 5.1 模拟器上运行良好。Xcode 只告诉我这个：

```
2012-04-25 14:24:26.978 AppName[83696:10a03] cocos2d: Frame interval: 1
2012-04-25 14:24:26.980 AppName[83696:10a03] cocos2d: surface size: 1536x2048 
```

任何想法？谢谢

* * *

@Smamim Hossain：同样的错误我把完整的 Appdelegate.m

```
#import "cocos2d.h"

#import "AppDelegate.h"
#import "GameConfig.h"
#import "Intro.h"
#import "RootViewController.h"

@implementation AppDelegate

@synthesize window;

- (void) removeStartupFlicker
{

//#if GAME_AUTOROTATION == kGameAutorotationUIViewController

//#endif // GAME_AUTOROTATION == kGameAutorotationUIViewController  
}
- (void) applicationDidFinishLaunching:(UIApplication*)application

[director setProjection:kCCDirectorProjection2D]
{

    // Init the window
    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    [director setProjection:kCCDirectorProjection2D]
    CCDirector *director = [CCDirector sharedDirector];

    // Init the View Controller
    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;

    //
    // Create the EAGLView manually
    //  1\. Create a RGB565 format. Alternative: RGBA8
    //  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
    //
    //
    EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                                   depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                        ];

//  // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#endif

    [director setAnimationInterval:1.0/60];
    [director setDisplayFPS:NO];
    [director setDepthTest:NO];

    // make the OpenGLView a child of the view controller
    [viewController setView:glView];

    // make the View Controller a child of the main window
    [window addSubview: viewController.view];

    [window makeKeyAndVisible];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // Removes the startup flicker
    [self removeStartupFlicker];

    // Run the intro Scene
    [[CCDirector sharedDirector] runWithScene: [Intro scene]];
}

- (void)applicationWillResignActive:(UIApplication *)application {
    [[CCDirector sharedDirector] pause];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
    [[CCDirector sharedDirector] resume];
}

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[CCDirector sharedDirector] purgeCachedData];
}

-(void) applicationDidEnterBackground:(UIApplication*)application {
    [[CCDirector sharedDirector] stopAnimation];
}

-(void) applicationWillEnterForeground:(UIApplication*)application {
    [[CCDirector sharedDirector] startAnimation];
}

- (void)applicationWillTerminate:(UIApplication *)application {
    CCDirector *director = [CCDirector sharedDirector];

    [[director openGLView] removeFromSuperview];

    [viewController release];

    [window release];

    [director end]; 
}

- (void)applicationSignificantTimeChange:(UIApplication *)application {
    [[CCDirector sharedDirector] setNextDeltaTimeZero:YES];
}

- (void)dealloc {
    [[CCDirector sharedDirector] end];
    [window release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T11:58:17.070

在 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions 尝试这行代码：

[导演组投影：kCCDirectorProjection2D]；

希望这能解决您的问题。

# python - 如何为 Windows 获取预构建的 *debug* 版本的 Python 库（例如 Python27_d.dll）

> ID：10315662
> 
> 赞同：12
> 
> 时间：2012-04-25T12:31:11.593
> 
> 标签：python, gdb, debug-symbols, activepython, mingw-w64

首先声明一下，我目前的开发环境是**Windows 7**下的**MSYS + mingw-w64 + ActivePython**，平时我*主要*是Linux开发者。我不高兴获得或编译带有调试符号的 Python 库版本。

 ***理想情况下，我需要**Python27.dll**文件的**32 位和 64 位调试版本。**我希望能够在 C++ 中嵌入 Python 并实现 Python 扩展，并且能够使用我为 mingw-w64 构建的**gdb-7.4和用于纯 Python 方面的 WingIDE 调用无缝调试工具。**

 ****事实证明，使用我的 mingw-w64 工具链从源代码构建**Python 2.7.3**太成问题了——在有人因为我的尝试而发火之前：我承认这个环境不受支持，但我认为我可以通过一些明智的选择来解决这个问题补丁（黑客）和：

`make OPT='-g -DMS_WIN32 -DWIN32 -DNDEBUG -D_WINDOWS -DUSE_DL_EXPORT'`

我错了...我放弃了 posixmodule.c，因为我的更改的影响变得不确定；ymmv。

我曾尝试使用**Visual C++ 2010 Express**进行构建，但作为一名主要的 Linux 开发人员，我今天无法承受*文化冲击；*Python 项目甚至没有成功导入。显然，我需要 Visual C++ 2008，但我已经确信，如果可能的话，我不想走这条路……

令我惊讶的是**，在 Internet 的某个地方没有提供必要的 .dll 的 zip 文件**。ActiveState 确实应该在他们制作的每个 ActivePython 版本中将这些作为可选下载提供——也许这就是付费支持的来源；-)。

**给定我的环境，获取 Python 调试库文件的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-05T23:28:57.390

我刚刚使用 Visual Studio 2012 Express（免费）在调试模式下构建了 CPython 2.7.5。

我通过 wiki 页面记录了该过程：[https ://wiki.python.org/moin/VS2012](https://wiki.python.org/moin/VS2012)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T20:55:51.913

在 Windows 下创建 Python 调试版本的最佳方法是使用 Python 源代码附带的 Visual Studio 项目中的 Debug 构建，使用特定 Python 版本所需的编译器版本，即 VS 2008。

可能还有其他方法，但这肯定是最好的方法。

如果你真的还需要 64 位调试版本，最好的方法是购买 VS 2008 的副本（即不要使用 Express 版本）。可以使用 SDK 64 位编译器创建 AMD64 调试版本，但同样，使用官方支持的程序是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-07T07:31:44.987

这些库可以从官方 Python 站点[https://www.python.org/ftp/python/](https://www.python.org/ftp/python/)获取。只需导航到您喜欢的特定版本，然后下载相应的安装程序。
对于安装，您可以像这样调用安装程序：

```
your_installer.msi targetdir="the_path_to_your_directory_of_choice" 
```

或者干脆以管理员身份运行它们。

您也可以使用 Python 安装程序下载调试符号（使用 webinstall 版本）。*******

# c# - 保留在内存中的静态类.....如何最好地实现这一点

> ID：10315664
> 
> 赞同：1
> 
> 时间：2012-04-25T12:31:12.527
> 
> 标签：c#, asp.net, validation, helper

我创建了一个非常简单的帮助类，可以在我的 ASP.Net 页面中使用。这个想法是，它应该是一种非常简单的方法来记录页面错误或成功（不是表单验证错误），然后将其显示给用户。

在我的公共助手类中，我有一个具有某些属性的类，如下所示：

```
public class UserMessage
{
    public UserMessage()
    {
        Messages = new Dictionary<string, string>();
    }

    public string SummaryMessage;
    public Dictionary<string, string> Messages;
    public bool ShowMessages;
    public bool ShowAsError;
} 
```

然后我有一个变量，用于存储 UserMessage 类的实例，如下所示：

私有静态 UserMessage _userMessage { 获取；放; }

然后我有两个公共静态方法，一个记录消息，另一个显示所有消息，如下所示：

```
public static void LogSummary(string summaryMessage, bool showIndividualMessages, bool showAsError)
{
    _userMessage = new UserMessage();
    _userMessage.SummaryMessage = summaryMessage;
    _userMessage.ShowMessages = showIndividualMessages;
    _userMessage.ShowAsError = showAsError;
}

public static string DisplayUserMessages()
{
    if (_userMessage == null)
        return string.Empty;

    StringBuilder messageString = new StringBuilder();
    messageString.AppendFormat("\n");
    messageString.AppendLine(string.Format("<div class=\"messageSummary {0}\">", (_userMessage.ShowAsError) ? "invalid" : "valid"));
    messageString.AppendLine(string.Format("<h3>{0}</h3>", _userMessage.SummaryMessage));
    messageString.AppendLine("</div>");

    return messageString.ToString();
} 
```

我遇到的问题是 _userMessage 变量必须是静态变量，否则我会收到错误消息“非静态字段需要对象引用......”。变量为静态的问题在于它保留在内存中，因此如果用户收到错误消息然后访问另一个页面 - 仍然会显示错误消息！

我确定这是因为我错过了 OOP 101，但我应该如何更正呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:36:32.500

将引用作为参数传递给静态成员，或者让它返回一个新实例，如下所示：

```
public static UserMessage LogSummary(string summaryMessage, bool showIndividualMessages, bool showAsError)
{
    var userMessage = new UserMessage();
    userMessage.SummaryMessage = summaryMessage;
    userMessage.ShowMessages = showIndividualMessages;
    userMessage.ShowAsError = showAsError;
    return userMessage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:36:56.363

不要使用静态变量来保存每个用户的消息！ASP.NET 应用程序是多线程的，使用静态变量不是线程安全的。将它们存储在 Session 中。

```
public static void LogSummary(string summaryMessage, ...)
{
   HttpContext.Current.Session["userMessages"] = new UserMessage(); 
   ...
}

public static string DisplayUserMessages()
{
   // get the value from session
   var userMessage = (UserMessage)HttpContext.Current.Session["userMessages"];
   // do the work
   // do the clean up
   HttpContext.Current.Session["userMessages"] = null;
   // the messages will not be displayed on next request
} 
```

每个请求由不同的线程处理，因此用户将覆盖该`_userMessage`字段，并且您不能保证将显示当前用户的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:37:20.077

在**我**看来，你试图用错误的方法来面对问题。考虑到您正在开发服务端组件（ASP.NET）并且您必须在每个访问您的站点的用户之间进行完美*隔离*，我个人认为没有任何理由不使用后端数据库来保存每条记录的错误消息可以关联到单个用户唯一 ID。

简单的[ACID](http://it.wikipedia.org/wiki/ACID)支持的数据库（实际上市场上几乎所有的数据库）都非常适合这种情况。

通过这种方式，您可以在需要的时候从数据库中提取您需要的消息，并且不需要更多担心任何类型的内存问题（至少从这个问题的角度来看）

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:45:51.480

静态变量将在 AppDomain 内共享 - 即并发请求将共享同一个实例，因此您的方法是有问题的。

您应该考虑将您的用户消息实例放入当前`HttpContext`，以根据您的用例的需要获取每个请求的语义。例如，

```
public class UserMessage
{
   public static UserMessage Current
   {
      get { return HttpContext.Current.Items["_User_Message"] as UserMessage; }
   }

   public static void LogSummary(string summaryMessage, bool showIndividualMessages, bool showAsError)
   {
      var userMessage = new UserMessage();
      userMessage.SummaryMessage = summaryMessage;
      ...  

      HttpContext.Current.Items["_User_Message"] = userMessage;
   }

   public static string DisplayUserMessages()
   {
       var userMessage = UserMessage.Current;
       if (userMessage == null ) return string.Empty;

       ...
   }

   // rest of the code
   ...
} 
```

我可能还会制作 UserMessage 构造函数`private`。

# selenium - PHPUnit 在命令行上运行 selenium 测试，但不是通过 jenkins 构建

> ID：10315667
> 
> 赞同：2
> 
> 时间：2012-04-25T12:31:24.997
> 
> 标签：selenium, phpunit, jenkins

我有一个运行 selenium phpunit 测试的 ant 构建脚本。我可以在命令行上运行构建脚本，我看到测试正在进行，浏览器窗口打开并且 selenium 测试已执行。在命令行上一切都很好。

**但是**，如果我创建一个 jenkins 作业来运行构建脚本。它在尝试运行 phpunit 任务时失败。这是控制台输出。

似乎当詹金斯运行构建时它无法访问硒。请参阅**“拒绝访问”**和**“无法显示网页”** 任何帮助将不胜感激！

php单元：

```
 [exec] PHPUnit 3.6.10 by Sebastian Bergmann.
 [exec] 
 [exec] The Xdebug extension is not loaded. No code coverage will be generated.
 [exec] 
 [exec] 
 [exec] E
 [exec] 
 [exec] 
 [exec] Time: 1 second, Memory: 3.75Mb
 [exec] 
 [exec] There was 1 error:
 [exec] 
 [exec] 1) Example::testPokerMainNav
 [exec] Issues while capturing the screenshot:
 [exec] Invalid response while accessing the Selenium Server at 'http://localhost:4444/selenium-server/driver/': <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
 [exec] <HTML>
 [exec]     <HEAD>
 [exec]         <title>Web Page Cannot Be Displayed</title>
 [exec]         <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
 [exec]         <style>
 [exec]         <!--
 [exec] 
 [exec]             body {
 [exec]                 font-family: Arial,Sans-serif;
 [exec]             }
 [exec] 
 [exec]             li {
 [exec]                 padding-top: 5px;
 [exec]             }
 [exec] 
 [exec]             .messageBox {
 [exec]                 BORDER-TOP: #9c9a9c 1px solid;
 [exec]                 BORDER-LEFT: #9c9a9c 1px solid;
 [exec]                 BORDER-RIGHT: #9c9a9c 1px solid;
 [exec]                 BORDER-BOTTOM: #9c9a9c 1px solid;
 [exec]             }
 [exec] 
 [exec]             .alertTitle
 [exec]             {
 [exec]                 color: #676767;
 [exec]                 FONT-SIZE: 12px;
 [exec]                 font-weight: bold;
 [exec]             }
 [exec] 
 [exec]             .alertText
 [exec]             {
 [exec]                 color: #676767;
 [exec]                 FONT-SIZE: 11px;
 [exec]                 font-weight: normal;
 [exec]                 padding-left: 15px;
 [exec]                 padding-right: 15px;
 [exec]             }
 [exec] 
 [exec]         -->
 [exec]         </style>
 [exec]     </HEAD>
 [exec]     <body>
 [exec]         <table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0">
 [exec]             <tr>
 [exec]                 <td align="center" valign="center">
 [exec]                     <table>
 [exec]                         <tr>
 [exec]                             <td>
 [exec]                                 <table border="0" class="messageBox">
 [exec]                                     <tr>
 [exec]                                         <td height="25">&nbsp;</td>
 [exec]                                     </tr>
 [exec]                                     <tr>
 [exec]                                         <td align="center">
 [exec]                                             <table border="0" width="490">
 [exec]                                                 <tr>
 [exec]                                                     <td class="alertTitle" align="center">
 [exec]                                                         <strong>Unable to display page</strong>
 [exec]                                                     </td>
 [exec]                                                 </tr>
 [exec]                                                 <tr class="spacerRow">
 [exec]                                                     <td></td>
 [exec]                                                 </tr>
 [exec]                                                 <tr>
 [exec]                                                     <td class="alertText" align="left">
 [exec]                                                         It has not been possible to display the page you requested for the following reason:
 [exec]                                                         <ul>
 [exec]                                                             <li>Access Denied</li>
 [exec]                                                         </ul>
 [exec]                                                         Contact your system administrator if you continue to experience difficulties.
 [exec]                                                     </td>
 [exec]                                                 </tr>
 [exec]                                             </table>
 [exec]                                         </td>
 [exec]                                     </tr>
 [exec]                                     <tr>
 [exec]                                         <td height="25">&nbsp;</td>
 [exec]                                     </tr>
 [exec]                                 </table>
 [exec]                             </td>
 [exec]                         </tr>
 [exec]                         <tr>
 [exec]                             <td align="right"><asp:Label id="lblDateTime" runat="server" CssClass="AlertText" /></td>
 [exec]                         </tr>
 [exec]                     </table>
 [exec]                 </td>
 [exec]             </tr>
 [exec]         </table>
 [exec]     </body>
 [exec] </HTML>
 [exec] 
 [exec] Invalid response while accessing the Selenium Server at 'http://localhost:4444/selenium-server/driver/': <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
 [exec] <HTML>
 [exec]     <HEAD>
 [exec]         <title>Web Page Cannot Be Displayed</title>
 [exec]         <meta name="vs_targetSchema" content=" 
```

构建失败

硒：selenium-server-standalone-2.21.0.jar。

从 Firebug selenium IDE 导出的 PHPunits 测试。

PHPUnit：3.6.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:57:20.623

我`http_proxy`在ubuntu中设置了环境文件。

出于某种原因，jenkins 用户试图通过代理连接到我的网站。然而，该网站与詹金斯在同一个盒子上。因此失败。

我删除了`http_proxy`，重新启动了 ubuntu 并且它工作了。

仍然令人费解，但它现在正在工作。

# c++ - 记事本显示Unicode字符作为文件是ANSI？

> ID：10315682
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:32:46.510
> 
> 标签：c++, c, linux, notepad++

我创建了一个文件，其中包含（摄氏度字符）和其他需要超过一个字节的字符。在记事本++中，它显示编码ANSI，因为它是ANSI，那么为什么记事本显示多字节字符？

任何的想法 ？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:49:29.487

如果你不把它保存在 UNICODE 中！只要代码页支持所涉及的字符，记事本就会将其保存为 ANSI。

要以 UNICODE 保存，您必须在保存文件时从下拉列表中选择它。

# classpath - 如何在您实际上不知道jdk所在位置的远程PC中使用批处理文件设置类路径？

> ID：10315684
> 
> 赞同：2
> 
> 时间：2012-04-25T12:32:50.580
> 
> 标签：classpath

有没有办法在远程PC上找到jdk的位置？然后通过使用java代码运行批处理文件（通过运行时类metho exec）在远程PC上设置它。

# c# - 从 Windows 8 Metro 风格应用程序建立到 Dynamics CRM Online Web 服务的连接

> ID：10315686
> 
> 赞同：4
> 
> 时间：2012-04-25T12:32:53.057
> 
> 标签：c#, dynamics-crm, windows-8, dynamics-crm-online

从我的 Window 8 Metro 风格应用程序创建与在线动态 CRM 的连接时，我遇到了严重的问题。

我的代码在正常（完整）.net 框架下工作正常，但在 WinRT 下失败

```
private IOrganizationService OrgService { get; set; }
private ClientCredentials ClientCreds { get; set; }
private ClientCredentials DeviceCreds { get; set; }
//(..)
ClientCreds = new ClientCredentials();
ClientCreds.UserName.UserName = "some_account@hotmail.com";
ClientCreds.UserName.Password = "sample_password";

DeviceCreds = DeviceIdManager.LoadOrRegisterDevice();

Uri orgServiceUri = new Uri("https://sampleaddress.api.crm4.dynamics.com/XRMServices/2011/Organization.svc");

OrgService = new OrganizationServiceProxy(orgServiceUri, null, ClientCreds, DeviceCreds); 
```

这段代码的最后一行给出了一个异常：

> 该系统找不到指定的文件。（来自 HRESULT 的异常：0x80070002）

可能此类尝试将某些文件保存在某处，这在 Metro 风格应用程序中是不允许的。

有人可以帮忙吗？如何绕过这种行为或 OrganizationServiceProxy 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:37:02.170

由于这是使用服务，您可能会遇到我遇到的问题：必须控制通过网络返回的生成类的输出。代码必须在某个地方进行 JIT，通常是临时目录。

请参阅我的[问题](https://stackoverflow.com/questions/1717574/prevent-net-from-writing-to-c-windows-temp)以控制输出目录。

# ruby-on-rails - 与同一模型有两个关系时的 Rails 命名约定

> ID：10315688
> 
> 赞同：1
> 
> 时间：2012-04-25T12:33:00.137
> 
> 标签：ruby-on-rails, mongodb, coding-style, naming-conventions, mongoid

我的问题与命名约定有关，而不是我猜的编程。

让我们假设一个应用程序，用户可以在其中创建新文章（因此他们是这些文章的所有者），并且您可以在其中添加文章“编辑者”，他们只能更新文章内容。

```
class User
  include Mongoid::Document
  has_many :articles # as owner of the articles
  has_and_belongs_to_many :articles # as editor of the articles
end

class Article
  include Mongoid::Document
  belongs_to :user
  has_and_belongs_to_many :editors, :class_name => 'User'
end 
```

我想知道的是我应该如何在我的用户模型中调用文章关联。我的意思是，一篇文章有​​一个作者和编辑，这对我来说似乎是很强的命名约定，但是一个用户有他创建的文章并且他是编辑。您将如何称呼/命名/声明最后两个关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:40:48.907

我会将它们称为`:edited_articles`, 和`:authored_articles`or `:owned_articles`，或类似的简单名称。只是不要忘记向它们添加`:class_name`and`:foreign_key`或`:through`限定符。

更新：

对于 has_and_belongs_to_many 关系，您需要一个连接表，默认情况下，它以两个连接表命名。例如`articles_users`在你的情况下。在此表中，您可能有两个 id`user_id`和`article_id`. 这样，rails 会自动连接您的模型。

```
has_and_belongs_to_many :editors, :class_name => 'User', :foreign_id => 'user_id' 
```

当然，如果您`editor_id`在联接表中调用它，则使用它。相反，在用户端也应该起作用。

# android - getLocationUpdates() 在 4.0 模拟器上给出非法参数异常

> ID：10315691
> 
> 赞同：2
> 
> 时间：2012-04-25T12:33:04.447
> 
> 标签：android, geolocation, android-webview

当我们尝试以下操作时，我在**code.google.com**上看到方法 getLocationUpdate() 中存在错误：

**requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000L, 500.0f, this);**

它抛出：

```
09-06 22:46:16.163: ERROR/AndroidRuntime(351): Caused by: java.lang.IllegalArgumentException: provider=network
09-06 22:46:16.163: ERROR/AndroidRuntime(351):     at android.os.Parcel.readException(Parcel.java:1325)
09-06 22:46:16.163: ERROR/AndroidRuntime(351):     at android.os.Parcel.readException(Parcel.java:1275)
09-06 22:46:16.163: ERROR/AndroidRuntime(351):     at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
09-06 22:46:16.163: ERROR/AndroidRuntime(351):     at android.location.LocationManager._requestLocationUpdates(LocationManager.java:582)
09-06 22:46:16.163: ERROR/AndroidRuntime(351):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:446) 
```

这是链接：[http ://code.google.com/p/android/issues/detail?id=19857](http://code.google.com/p/android/issues/detail?id=19857)

我想知道这是否已修复。我的应用程序每次尝试获取位置更新时都会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:39:35.520

`implements LocationListener`没写的请先实现 。

除此以外

试试这个链接[Get current Lat Lon](http://wowjava.wordpress.com/2011/02/25/geting-current-location-in-android-using-gps/)我已经用这个链接解决了我的问题。试试这个……祝你好运

并尝试使用`LocationManager.NETWORK_PROVIDER`istead of `LocationManager.GPS_PROVIDER`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:41:54.220

看到这个线程，这将为你做......如果你在模拟器中工作...... [链接](https://stackoverflow.com/questions/9990129/illegalargumentexception-thrown-by-requestlocationupdate)

# java - 带有休眠 4.1 注释配置的 Spring 3.1.1

> ID：10315696
> 
> 赞同：7
> 
> 时间：2012-04-25T12:33:17.693
> 
> 标签：java, spring, hibernate, annotations

我正在使用 spring3.1.1 和 hibernate 4.1 设置新项目。当我运行我的项目时，我收到以下错误

```
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.getCurrentSession()Lorg/hibernate/classic/Session;
at com.humancapital.dao.TestModelDAOImpl.getTestModelList(TestModelDAOImpl.java:22) 
```

我的 applicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

        <context:component-scan base-package="com.example"/>

        <!-- Use @Transaction annotations for managing transactions  -->    
        <tx:annotation-driven transaction-manager="transactionManager"/>

        <!-- PropertyConfiguer -->
        <bean id="propertyCongigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="location" value="/WEB-INF/config/jdbc/jdbc.properties"></property>
        </bean>

        <!--  DataSource connection -->
        <bean id="myDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="${jdbc.driverClassName}"></property>
            <property name="url" value="${jdbc.url}"></property>
            <property name="username" value="${jdbc.username}"></property>
            <property name="password" value="${jdbc.password}"></property>  
        </bean>

        <!-- Hibernate SessionFactory -->
        <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="myDataSource"></property>
            <property name="annotatedClasses">
                <list>
                    <value>com.humancapital.dao.TestModel</value>
                </list>
            </property>
            <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop> 
            </props>
            </property>
        </bean>

        <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
            <property name="sessionFactory" ref="sessionFactory"></property>
        </bean>

        <context:annotation-config/>

        <bean id="testModelDAO" class="com.example.dao.TestModelDAOImpl"></bean> 
```

## MyDAOImpl

```
@Repository
public class TestModelDAOImpl implements TestModelDAO {

@Autowired
private SessionFactory sessionFactory;
public void setSessionFactory(SessionFactory sessionFactory){
    this.sessionFactory = sessionFactory;
}

@SuppressWarnings("rawtypes")
@Override
    @Transactional(readOnly=true,propagation=Propagation.REQUIRES_NEW)
public List getTestModelList() {
    System.out.println(sessionFactory.toString());
    return sessionFactory.getCurrentSession().createCriteria(TestModel.class).list();
}
} 
```

我已经添加了我的依赖 jars 请建议我

```
antlr-2.7.7.jar
antlr-runtime-3.0.jar
commons-collections-3.2.1.jar
commons-dbcp-1.4.jar
commons-fileupload-1.2.jar
commons-lang-2.4.jar
commons-logging.jar
commons-pool-1.5.4.jar
dom4j-1.6.1.jar
ejb3-persistence-3.3.1.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.1.Final.jar
hibernate-entitymanager-4.1.1.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
hibernate-validator-4.0.2.GA.jar
jackson-core-asl-1.9.2.jar
jackson-jaxrs-1.8.5.jar
jackson-mapper-asl-1.9.2.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.CR2.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
json-lib-2.3-jdk13.jar
jstl-1.2.jar
jta-1.1.jar
log4j-1.2.14.jar
mail.jar
mysql-connector-java-5.0.8-bin.jar
org.springframework.aop-3.1.1.RELEASE.jar
org.springframework.asm-3.1.1.RELEASE.jar
org.springframework.aspects-3.1.1.RELEASE.jar
org.springframework.beans-3.1.1.RELEASE.jar
org.springframework.context.support-3.1.1.RELEASE.jar
org.springframework.context-3.1.1.RELEASE.jar
org.springframework.core-3.1.1.RELEASE.jar
org.springframework.expression-3.1.1.RELEASE.jar
org.springframework.jdbc-3.1.1.RELEASE.jar
org.springframework.jms-3.1.1.RELEASE.jar
org.springframework.js-2.0.8.RELEASE.jar
org.springframework.orm-3.1.1.RELEASE.jar
org.springframework.oxm-3.1.1.RELEASE.jar
org.springframework.test-3.1.1.RELEASE.jar
org.springframework.transaction-3.1.1.RELEASE.jar
org.springframework.web.servlet-3.1.1.RELEASE.jar
org.springframework.web-3.1.1.RELEASE.jar
servlet-api.jar
slf4j-api-1.6.1.jar
slf4j-log4j12-1.6.1.jar
slf4j-simple-1.6.1.jar
spring-modules-validation-0.7.jar
standard.jar 
```

请帮我完成项目设置。请给我们一些建议，在建立新的项目结构时，我们需要集中精力在哪些方面需要对未来的升级进行较少的更改。

抱歉，我是 stackoverflow 的新手，我不知道如何重播命令

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T12:59:49.070

发生这种情况是因为您已休眠。`current_session_context_class`属性启用

you should NEVER use that property when combining Hibernate with Spring that destroys proper session and transaction management. The only time you want to set this property is if you use Spring and Hibernate in a JTA environment, else don't use it.

# javascript - jQuery UI 对话框未正确显示

> ID：10315698
> 
> 赞同：1
> 
> 时间：2012-04-25T12:33:21.383
> 
> 标签：javascript, jquery, jquery-ui

我正在开发的网站中使用 jQuery UI 1.8.19 和 Twitter Bootstrap 2.0.3。我想在单击删除时显示一个模式对话框，为此我这样做：

```
 <div id="dialog-confirm" title="<?php echo lang("event:delete_confirm_title") ?>">
      <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><?php echo lang('event:delete_confirm_content') ?></p>
 </div> 
```

触发事件的 JS 是这个：

```
 $(function() {
    $("#delete").click(function(){
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "<?php echo lang('event:delete') ?>": function() {
                    $( this ).dialog( "close" );
                },
                "<?php echo lang('global:cancel_label') ?>": function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
}); 
```

由于某种原因，模式对话框总是显示在页面末尾，而我认为它不应该显示，当我单击元素时，对话框出现，但页面立即重定向到我的主页并且不知道原因，因为我在任何地方都没有重定向，也没有表格。对此有何建议或帮助？最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:38:45.743

您应该添加`style='display: none'`到您的对话框 div，这样它就不会在启动时显示。

然后，如果当您单击按钮时页面被发送到主页，您可能需要检查 #delete 是什么类型的按钮并完成它的功能，`return false`如果它是一个提交，例如以避免启动正常的单击事件处理程序：

```
$(function() {
    $("#delete").click(function(e){
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "<?php echo lang('event:delete') ?>": function() {
                    $( this ).dialog( "close" );
                },
                "<?php echo lang('global:cancel_label') ?>": function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    e.preventDefault();
    });
}); 
```

编辑：根据 Scott 的建议进行修改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:34:40.073

这也发生在我身上。我知道的原因只有一个。未加载对话框 CSS 文件。

请参阅我的 SO 问题：[位置：IE9 中的固定中断](https://stackoverflow.com/questions/7472491/positionfixed-breaks-in-ie9)

# javascript - Persistent copy&paste for jstree nodes

> ID：10315701
> 
> 赞同：4
> 
> 时间：2012-04-25T12:33:35.050
> 
> 标签：javascript, jquery, html, copy-paste, jstree

The default way to set up copy&paste with jstree as described in [the documentation](http://www.jstree.com/documentation/crrm) is easy enough and works well, but only within the scope of JavaScript variables context of the loaded page.

Specifically, if I select copy and then paste that will work. However, if I select copy, then reload the page, paste will not work since the data about copy is lost now.

How can I make this work? I guess something will need to be stored and retrieved from a cookie. Where do I find that? Also, is there an existing option in the plugin for this use case?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:53:51.117

根据您的听众，我会尝试通过 html5 本地存储实现复制/粘贴。对于一些简单的文本复制等，它应该很容易实现。

Html 5 本地存储只是存储在用户本地 Web 浏览器内存中的键：值对。因此它将通过网络浏览器重新加载来维护。哎呀，如果他们不小心完全关闭了浏览器，它甚至应该能够被保存！

我想用一点 javascript，如果你使用像 JQuery 这样的库，实现起来应该不会太难。您甚至可以启用多个副本的额外好处，因为您可以只拥有多个键：值对。

看一下我发现的教程，我认为它可以很好地了解如何开始使用它：

[http://paperkilledrock.com/2010/05/html5-localstorage-part-one/](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:24:14.617

据我了解，您可以为 jstree 编写一个新插件来完成这项工作。

看看[这里](http://static.jstree.com/v.1.0pre/jquery.jstree.js)，看看当前的[CRRM 插件](http://www.jstree.com/documentation/crrm)是如何实现的。（如果您发现很难找到该位置，则 CRRM 插件默认包含在 jstree 中。上述链接文件中的 CRRM 的 Serach）。

我想你可以看看它是如何实现的，并以类似的方式实现这些方法，但具有持久性。

# css - CSS3 background-image transition

> ID：10315712
> 
> 赞同：1
> 
> 时间：2012-04-25T12:34:08.847
> 
> 标签：css, css-transitions

In this website I am making there is an arrow link that when you hover over it it becomes a new image with a cool addition to the image. I had this working completely fine with this code below and I did not edit the code at all but it seems that when I woke up the "all" transition no longer works for this. I can't find what is wrong. I am also using this to fade a background-image that is a solid color to fade to another background image that is a different solid color.

```
a.visitarrow
{
-webkit-transition:all 1.0s ease-in-out;
-moz-transition:all 1.0s ease-in-out;
-o-transition:all 1.0s ease-in-out;
-ms-transition:all 1.0s ease-in-out;        
transition:all 1.0s ease-in-out;
display:block;
width:130;
height:121;
background-image:url('pictures/visit.png');
}

a.visitarrow:hover
{
-webkit-transition:all 0.5s ease-in-out;
-moz-transition:all 0.5s ease-in-out;
-o-transition:all 0.5s ease-in-out;
-ms-transition:all 0.5s ease-in-out;        
transition:all 0.5s ease-in-out;
display:block;
width:130;
height:121;
background-image:url('pictures/visithover.png');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:38:18.227

我相信这应该有效：

```
a.visitarrow {
    display: block;
    width: 130;
    height: 121;
    -webkit-transition: 1.0s ease-in-out;
    -moz-transition: 1.0s ease-in-out;
    -o-transition: 1.0s ease-in-out;
    -ms-transition: 1.0s ease-in-out;        
    transition: 1.0s ease-in-out;
    background-image: url('pictures/visit.png');
}

a.visitarrow:hover {
    background-image: url('pictures/visithover.png');
} 
```

# java - Overriding createToolTip() in a custom CellRenderer

> ID：10315714
> 
> 赞同：3
> 
> 时间：2012-04-25T12:34:13.443
> 
> 标签：java, swing, jtable, tooltip

I'm trying to get a custom ToolTip for a specific column of a JTable. I've already created a CellRenderer (of which I've been changing other cell-specific attributes successfully):

```
private class CustomCellRenderer extends DefaultTableCellRenderer
{
    private static final long   serialVersionUID    = 1L;

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column)
    {
        JComponent c = (JComponent) super.getTableCellRendererComponent(table, value,
                isSelected, hasFocus, row, column);

        if (value != null)
        {
            if(column == 1 && value instanceof Date)
            {
                final DateFormat df = new SimpleDateFormat("h:mm aa");
                table.setValueAt(df.format(value), row, column);
            }
            else if(column == 2)
            {
                c.setToolTipText((String) value);
            }
            else if(column == 4)
            {
                final Mail m = main.selectedPage.messages.get(row);
                JCheckBox checkBox;

                if((Boolean) value)
                {
                    checkBox = new JCheckBox()
                    {
                        @Override
                        public JToolTip createToolTip()
                        {
                            System.out.println("Passed");
                            return new ImageToolTip(m.getImage());
                        }
                    };
                    checkBox.setToolTipText(m.attachName);
                }
                else 
                    checkBox = new JCheckBox();

                checkBox.setSelected(((Boolean)value).booleanValue());
                c = checkBox;
            }
        }
        else
        {
            c.setToolTipText(null);
        }
        return c;
    }
} 
```

When I override any other JComponent's createTooltip() method like so, it all works fine outside of the Renderer.

```
checkBox = new JCheckBox()
{
    @Override
    public JToolTip createToolTip()
    {
        System.out.println("Passed");
        return new ImageToolTip(m.getImage());
    }
}; 
```

From what I can tell, the tooltip is created elsewhere, because "Passed" is never even printed. The `checkBox.setToolTipText(m.attachName);` only results in a default ToolTip with that String.

I've found someone with a [similar question](https://stackoverflow.com/questions/6042212/override-createtooltip-method-of-jpanel-in-java-swing), but I can't say I completely understand the only resolving answer. Do I need to extend JTable and override `getToolTipText(MouseEvent e)`? If so, I'm not sure what with to get the correct (mine) Tooltip.

Please excuse any of my self-taught weirdness. Thanks in advance. :-)

## EDIT:

Thanks to Robin, I was able to piece together something based on JTable's `getToolTipText(MouseEvent e)` code. I'll leave it here for anyone else with a similar problem. Again, I'm not sure it this it the best way to do it, so feel free to critique it below. :-)

```
messageTable = new JTable()
{
    @Override
    public JToolTip createToolTip()
    {
        Point p = getMousePosition();

        // Locate the renderer under the event location
        int hitColumnIndex = columnAtPoint(p);
        int hitRowIndex = rowAtPoint(p);

        if ((hitColumnIndex != -1) && (hitRowIndex != -1)) 
        {
            TableCellRenderer renderer = getCellRenderer(hitRowIndex, hitColumnIndex);
            Component component = prepareRenderer(renderer, hitRowIndex, hitColumnIndex);

            if (component instanceof JCheckBox) 
            {
                Image img = main.selectedPage.messages.get(hitRowIndex).getImage();
                if(((JCheckBox) component).isSelected())
                    return new ImageToolTip(img);
            }
        }
        return super.createToolTip();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:58:23.247

You are not able to create tooltip for checkbox inside cell renderer. Actually that component doesn't exists at the moment you are trying to move mouse over it. It is just an image. You need to create tooltip for your JTable

```
private void tableMouseMoved(java.awt.event.MouseEvent evt) {
    String toolTipText;
    int row = table.rowAtPoint(evt.getPoint());
    int column = table.columnAtPoint(evt.getPoint());

    if (row >= 0) {
        Object o = table.getValueAt(row, column);
        if (column == YourTableModel.COLUMN_INDEX_WITH_CHECKBOX) {
            Boolean value = (Boolean) o;
            if (value == Boolean.TRUE) {
                toolTipText = "Tooltip text for true value";
            } else {
                toolTipText = "Tooltip text for false value";
            }  
        } 
    }
} 
```

And you need to register listener for MouseEvent of course:

```
javax.swing.JTable table = new JTable();
table.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
    public void mouseMoved(java.awt.event.MouseEvent evt) {
        tableMouseMoved(evt);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:46:21.797

The reason that the `JTable` does not use your tooltip can be seen in the implementation. The `JTable` will indeed use the component returned by the renderer, but it will ask it for its tooltip text. So only settings a custom tooltip text will work if you stick to the default `JTable` implementation. Just a quick copy-paste of the relevant part of the `JTable` source code to illustrate this:

```
 if (component instanceof JComponent) {
        // Convert the event to the renderer's coordinate system
        Rectangle cellRect = getCellRect(hitRowIndex, hitColumnIndex, false);
        p.translate(-cellRect.x, -cellRect.y);
        MouseEvent newEvent = new MouseEvent(component, event.getID(),
                                  event.getWhen(), event.getModifiers(),
                                  p.x, p.y,
                                  event.getXOnScreen(),
                                  event.getYOnScreen(),
                                  event.getClickCount(),
                                  event.isPopupTrigger(),
                                  MouseEvent.NOBUTTON);

        tip = ((JComponent)component).getToolTipText(newEvent);
    } 
```

So yes, you will have to override the `JTable` method if you really want an image as tooltip for your check box.

On a side-note: your renderer code has weird behavior. The

```
final DateFormat df = new SimpleDateFormat("h:mm aa");
table.setValueAt(df.format(value), row, column); 
```

seems incorrect. You should replace the `setValueAt` call by a

```
JLabel label = new JLabel();//a field in your renderer
//in the getTableCellRendererComponent method
label.setText( df.format( value ) );
return label; 
```

or something similar. The renderer should not adjust the table values, but create an appropriate component to visualize the data. In this case a `JLabel` seems sufficient. And as Stanislav noticed in the comments, you should not constantly create new components. That defeats the purpose of the renderer which was introduced to avoid creating new components for each row/column combination. Note that the method is called `getTableCellRendererComponent` (emphasis on `get`) and not `createTableCellRendererComponent`

# javascript - 通过客户端发送邮件而不启动电子邮件客户端（静默电子邮件）

> ID：10315730
> 
> 赞同：-3
> 
> 时间：2012-04-25T12:35:04.330
> 
> 标签：javascript, jquery, html

我想发送 html 页面的电子邮件。是否有任何方法可以静默发送电子邮件，即无需打开电子邮件客户端。

我可以使用 javascript 或 jquery 使用一些方法/方式来做到这一点吗？

在这个 html 页面中，我不想向客户显示任何电子邮件正在发送。

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:37:37.003

这是不可能的。即使是这样，这也不是一件很酷的事情。

如果您想通过电子邮件发送网页，为什么不直接向用户询问他们的电子邮件地址，然后自己在服务器端发送呢？如果您不想为此工作需要刷新页面，则可以使用 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T02:47:59.293

有可能的。[SquareSend](https://squaresend.com/)就是一个例子。[MailerJs](https://news.ycombinator.com/item?id=3627608)是另一个。您只需在网页中嵌入一个小型 javascript，并且不需要服务器。

# ios - Screen doesn't resize properly at incoming call

> ID：10315732
> 
> 赞同：2
> 
> 时间：2012-04-25T12:35:05.460
> 
> 标签：ios, iphone

When a call comes in on my iPhone, my application does not resize properly. What can I do to solve handle the resize better?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:35:48.257

请参阅iOS 应用程序编程指南中的[在电话呼叫期间调整用户界面。](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html%23//apple_ref/doc/uid/TP40007072-CH4-SW41)

# bash - Biased behavior of bash script

> ID：10315736
> 
> 赞同：0
> 
> 时间：2012-04-25T12:35:19.203
> 
> 标签：bash, unix, loops, redirect

I have 8 folders namely HCIVR5,HCIVR6,HCIVR7,HCIVR8,IVR5,IVR6,IVR7,IVR8. I wrote down this code first

```
ls -d IVR* > temporary.txt 
```

Saved this code in a file called run. then executed it using ./run. When i tried opening the file(using cat and normal opening through click), it said "cannot access temporary.txt.

This is my entire code

```
ls -d IVR* > temporary.txt
while read ivr_line;do echo $ivr_line;cd $ivr_line;./ivr_alarm;cd ..;done < temporary.txt
ls -d HCIVR* > temporary.txt
while read hcivr_line;do echo $hcivr_line;cd $hcivr_line;./hcivr_alarm;cd ..;done < temporary.txt 
```

Now this program works for IVR5,6,7,8\. After that i get the error ./run: line 4: temporary.txt: No such file or directory even when i comment the first two lines i get the same error

code for ivr_alarm is this

```
mkdir TEMP
day=`date +%d-%m-%Y`
read ip<ip.txt
read ivr_number<ivr_number.txt
while read line;do scp -i ivr"$ivr_number"_key -r root@$ip:${line%?} ./TEMP/ ;done < files_needed.txt
mv ./TEMP/.bash_history ./LOGS/.bash_history_"$day"
cd TEMP
for file in *;do 
    mv $file ../LOGS/${file%.*}_"$day".${file##*.}
done
cd ..
rmdir TEMP 
```

code for hcivr_alarm is this

```
day=`date +%m-%d-%Y`
read ip<ip.txt
read ivr_number<ivr_number.txt
rm alarmtest
rm ./LOGS/HEALTH_CHECK_$day.log
while read line;do
echo "ssh -i hcivr"$ivr_number"_key root@$ip '${line%?}'>>./LOGS/HEALTH_CHECK_$day.log" >> alarmtest
done < commands.txt
chmod 700 alarmtest
./alarmtest 
```

and for alarmtest(for HCIVR5, key changes to hcivr6_key for HCIVR6 and so on) is this

```
ssh -i hcivr5_key root@172.19.66.137 'ocstatus'>>./LOGS/HEALTH_CHECK_04-25-2012.log
ssh -i hcivr5_key root@172.19.66.137 'ocmp-bre status'>>./LOGS/HEALTH_CHECK_04-25-2012.log 
```

Now this program works for IVR5,6,7,8\. After that i get the error ./run: line 4: temporary.txt: No such file or directory even when i comment the first two lines i get the same error. Where am i going wrong . Because when i manually open all the HCIVR folders and run ./hcivr_alarm everything works fine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:38:22.553

Try this:

```
ls -d IVR* > temporary.txt
while read ivr_line;do echo $ivr_line;pushd $ivr_line;./ivr_alarm;popd;done < temporary.txt
ls -d HCIVR* > temporary.txt
while read hcivr_line;do echo $hcivr_line;pushd $hcivr_line;./hcivr_alarm;popd;done < temporary.txt 
```

I can't see how, but I think you're screwing up your current directory, somehow.

# osgi - 如何在 osgi.bnd 文件中提供两种服务？

> ID：10315737
> 
> 赞同：1
> 
> 时间：2012-04-25T12:35:20.103
> 
> 标签：osgi, equinox

我正在使用 Equinox，我有一个看起来像这样的 OSGI.BND 文件

```
Service-Component: DefaultCommunication;\
        provide:=com.whatever.service.Communication;\
        implementation:=com.whatever.myservice.DefaultCommunication 
```

但是现在我想提供两个接口，通信和配置。

那么文件会是什么样子呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:13:07.703

基于[Bnd 格式规范](http://www.aqute.biz/Bnd/Format#LIST)：

> LIST 一个逗号分隔的列表。如果项目包含逗号，则应使用 '"' 引用。通常，列表项还可以在项目上定义属性和指令。

[Bnd 服务组件说明](http://www.aqute.biz/Bnd/Components)：

> 提供 ::= '提供：=' 列表

在你的情况下：

> 提供：=com.whatever.service.Communication,com.whatever.service.Configuration

# c - 以秒为单位准确测量执行时间

> ID：10315739
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:35:26.850
> 
> 标签：c, time

我想知道一个程序的执行时间，但我也想排除文件输入/输出所需的时间。为此，我使用了该`time()`功能。有很多文件`.h`，`.cpp`但这里是唯一引用时间对象的地方。

`dosomethingelse()`我的问题是，虽然 start 的值在开始时设置正确，但在第一次调用时它会丢失它（设置为零） 。这使得有一个非常大的值，因为现在和`sub_duration`之间的差异为零，是 的值。`end``start``end`

这是我使用它的方式：

主文件

```
time_t start=0;
time_t end=0;
time_t sub_duration=0;
time_t total_duration=0; 

int main()
{
    start = time(NULL);
    while(somethingtodo)
    {
        dosomething();
        dosomethingelse();
    }
    end = time(NULL);
    sub_duration = difftime(end,start);
    total_duration += sub_duration;
} 
```

多思.h

```
 extern      time_t start;
   extern      time_t end;
   extern      time_t sub_duration;
   extern      time_t total_duration;
   dosomethingelse(); 
```

多思.cpp

```
#include"dosth.h"    
dosomethingelse()
{
    if(somecondition)
    {
        end = time(NULL);
        sub_duration = difftime(end,start);
        total_duration += sub_duration;
        writesomethingTofile();
        start = time(NULL);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:52:34.183

问题是`start`并且`end`是全局的......当你将它们设置在里面时，你正在为整个程序`dosomethingelse()`重新设置。`start`

解决方案是在内部保留一个本地计时器`dosomethingelse()`，并从总数中减去在该函数中花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:40:31.983

« start » 变成 « main » 和 « dosomethingelse » 函数。你为什么这么做 ？

# android - 当我退出活动时，listview 上的动态更新会丢失

> ID：10315740
> 
> 赞同：0
> 
> 时间：2012-04-25T12:35:30.573
> 
> 标签：android, listview

我制作了一个简单的模块，在其中动态更新了我的列表视图，但我的实际问题是当我通过后退按钮退出活动时，当回到相同的活动时，我对列表视图的动态更新丢失了。

那么，当我再次回到此活动时，我该如何坚持这些更新。

请告诉我一些方法来实现这一点..

谢谢，贾尔普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:03:51.407

可能发生的情况是，每次你回到它时，它都会被重新创建。如果您没有将列表的更新保存在某种持久存储中，然后在活动 onCreate() 上加载该存储，那么您将丢失它。

您也可以尝试在 AndroidManifest.xml 中为您的活动声明一个 android:launchMode="singleTop" 属性，以便只运行一个活动实例。如果这样做，您可能还必须为活动实现 onNewIntent() 方法

# android - 上传文件时显示加载对话框android

> ID：10315742
> 
> 赞同：0
> 
> 时间：2012-04-25T12:35:32.133
> 
> 标签：android, url

我正在使用http post将文件上传到我的服务器我有一个简单的方法女巫可以完成工作但是加载...对话框永远不会显示我该如何解决这个问题...这是我的代码

```
public void send_data() throws IOException
{
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";

    ProgressDialog dialog = ProgressDialog.show(CaptureTestActivity.this, "", 
        "Loading. Please wait...", true);
    dialog.show();

    String urlServer = "http://poi.gps.ro:80/postimg?lat=" + String.valueOf(mDraw.lat) + "&lon=" + String.valueOf(mDraw.lon)+"&comment=" + tmp;
    Log.w("DHA", urlServer);
    URL url = new URL(urlServer);
    if (url != null)
    {   
        Log.w("DHA", "Merge aici");
        connection = (HttpURLConnection) url.openConnection();
        if (connection != null)
        {
            Log.w("DHA", "Si aici mere!");
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Host", "poi.gps.ro");
            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "multipart/form-data;boundary=*****");
            outputStream = new DataOutputStream(connection.getOutputStream());
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + "PICT0000" +"\"" + lineEnd);
            outputStream.writeBytes(lineEnd);
            outputStream.write(btarr.toByteArray());
            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            Log.w("DHA", "Incep trimiterea pozei!");
            outputStream.flush();
            outputStream.close();
            int serverResponseCode = connection.getResponseCode();
            String conn = connection.getResponseMessage();
        //  InputStream in  = connection.getInputStream();
        //  StringWriter writer = new StringWriter();

            Log.w("DHA", conn);
            Log.w("DHA", "Serverul a raspuns cu " + String.valueOf(serverResponseCode));
            if (serverResponseCode == 200)
            {
                AlertDialog alertDialog;
                alertDialog = new AlertDialog.Builder(this).create();
                alertDialog.setTitle("Super :)");
                alertDialog.setMessage("Poza a fost trimisa cu success.");
                alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {

                      public void onClick(DialogInterface dialog, int id) {

                         finish();

                    } }); 
                alertDialog.show();

            }

}
    }
    dialog.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:46:49.230

正如大卫所说，你需要一个 AsynTask，最实用的选项。*您可以使用Void, Void, Void*部分做一些聪明的事情，但除非您想查看文档，否则应该可以正常工作。

```
public class MyActivity extends Activity {

....

    private final class AsyncSender extends AsyncTask<Void, Void, Void> {

        ProgressDialog pd;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            pd = new ProgressDialog(MyActivity.this);
            pd.setTitle("Sending Data");
            pd.setMessage("Please wait, data is sending");
            pd.setCancelable(false);
            pd.setIndeterminate(true);
            pd.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            send_data(); // You probably have to try/catch this
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            pd.dismiss();
        }
    }
} 
```

然后当你调用它时，最干净的方法是调用

```
new AsyncSender().execute(); 
```

另外，我应该提到，这应该是一个内部类，这意味着不要为它创建一个单独的 java 文件。通常我只是把它们放在我正在使用的类文件的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:40:22.853

您正在使用上传代码阻止 UI。您需要使用 AsyncTask / 线程 / 服务。

[无痛穿线](http://android-developers.blogspot.co.uk/2009/05/painless-threading.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:46:03.637

首先，您调用 ProgressDialog.show() 两次，这是不必要的。也许它不显示的一个原因是因为它在显示后立即被解雇。例如，如果您的文件上传速度非常快或失败或在另一个线程中完成，那么对dismiss() 的调用将被调用得如此之快，以至于您将永远看不到对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:47:54.613

当您想在后台执行任何任务并想在屏幕上显示另一件事时，您应该使用**AsyncTask** ...

这是使用 AsyncTask 登录的示例，现在您可以更新它...

```
public class mytask extends AsyncTask<Object, Object, Object> {

    String METHOD_NAME = "Login";
    String NAMESPACE = "http://tempuri.org/";
    SoapObject request;
    String SOAP_ACTION = "http://tempuri.org/Login";
    @Override
    protected Object doInBackground(Object... params) {
        Log.d(TAG, "doInBackground(Void... params");
        Object flag = null;
        try {
            flag = TAGS.sendToServerAndGetResponse(request, SOAP_ACTION);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }
        return flag;
    }

    @Override
    protected void onPostExecute(Object result) {
        if (result.toString().equalsIgnoreCase("true")) {

            mIntent = new Intent();
            mIntent.setClass(PresenTABActivity.this,
                    presentation_list.class);
            startActivity(mIntent);
            finish();
        } else {
            Toast.makeText(getApplicationContext(),
                    "Please Enter Valid Username or Password",
                    Toast.LENGTH_SHORT).show();
            edtPass.setVisibility(View.VISIBLE);
            edtUname.setVisibility(View.VISIBLE);
            chk_remeber_me.setVisibility(View.VISIBLE);
            btnSubmit.setVisibility(View.VISIBLE);
            mProgressBar.setVisibility(View.INVISIBLE);
            loading.setVisibility(View.INVISIBLE);
        }
    }

    @Override
    protected void onPreExecute() {
        Log.d(TAG, "onPreExecute()");
        request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("Username", edtUname.getText().toString()
                .trim());
        request.addProperty("password", edtPass.getText().toString().trim());

        mProgressBar = (ProgressBar) findViewById(R.id.progress_login);
        loading = (TextView) findViewById(R.id.tv_loading);
        loading.setVisibility(View.VISIBLE);
        mProgressBar.setVisibility(View.VISIBLE);

        edtPass.setVisibility(View.INVISIBLE);
        edtUname.setVisibility(View.INVISIBLE);

        chk_remeber_me.setVisibility(View.INVISIBLE);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:48:00.243

检查此页面：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

例子

```
private class UploadingTask extends AsyncTask<Void, Void, Void> {

private ProgressDialog mProgressDialog;

    @Override
    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(this, title, message, true);
    }

    @Override
    protected Void doInBackground(final Void... params) {
        // Do your work .. uploading
        return null;
    }

    @Override
    protected void onPostExecute(final Void result) {
        if (mProgressDialog != null) {
        mProgressDialog.dismiss();
        }
    }
} 
```

# nhibernate - NHibernate 过滤器未应用于急切获取的子实体

> ID：10315746
> 
> 赞同：2
> 
> 时间：2012-04-25T12:35:40.637
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有以下数据模型：

```
Category
  Date
  Products

Product
  Date
  Payments

Payment
  Date 
```

我希望使用 NHibernate 急切地加载整个树。我想过这样做：

```
var query = from cat in session.Query<Category>() select cat;     
query = query.FetchMany(c => c.Products).ThenFetch(c=>c.Payments);     
var result = query.Distinct().ToList(); 
```

这工作正常。它创建一个左外连接并返回结果。

但我也只想获得比 01/01/2012 更新的实体。所以我创建了一个名为 DateFilter 的过滤器，并将以下内容添加到 Category、Product 和 Payment 映射中：

```
ApplyFilter<DateFilter>(); 
```

当我启用过滤器时，我预计生成的 SQL 查询将在类别、产品和付款表的“WHERE”子句中具有过滤条件，但它只有类别（顶部元素）的条件。

代码：

```
using (var session = SessionProvider.OpenSession(ConnectionString))
{
    session.EnableFilter("DateFilter")
        .SetParameter("start", OracleHelper.ToDate(new DateTime(2012, 1, 1)));

    var query = from cat in session.Query<Category>() select cat;     
    query = query.FetchMany(c => c.Products).ThenFetch(c=>c.Payments);     
    var result = query.Distinct().ToList();
} 
```

生成的 SQL：

```
SELECT ... FROM   ... WHERE category_.Date >= '2012-01-01' 
```

我所期望的是：

```
SELECT ... FROM   ... WHERE category_.Date >= '2012-01-01' 
    and product_.Date >= '2012-01-01'
    and payment_.Date >= '2012-01-01' 
```

我还尝试在映射中应用过滤器，如下所示：

```
HasMany<Payment>(x => x.Payments).ApplyFilter<DateFilter>(); 
```

但是它将过滤器应用于连接（将过滤条件放在连接的 ON 子句中）而不是“WHERE”子句中，这会使用左外连接给出错误的结果。

过滤器是否仅适用于顶级实体而不适用于急切获取的子实体？

我还能如何实现我想做的事情？

谢谢！

# jquery - Ruby on Rails 按钮单击以使用 jQuery 填充 text_field

> ID：10315749
> 
> 赞同：1
> 
> 时间：2012-04-25T12:35:52.787
> 
> 标签：jquery, ruby-on-rails, textbox, buttonclick

我正在尝试使用 jQuery 单击按钮来填充 text_field 并有几个问题。我在这里发布了一个关于此的问题，但不确定提供的答案，因为它似乎过于复杂（这可能是正确的，但我对实施没有运气）......

[Ruby on Rails jQuery 按钮单击填充 text_field](https://stackoverflow.com/questions/10229152/ruby-on-rails-jquery-button-click-populate-text-field)

确认按照 Christian 在另一个问题中提到的方式或更简单的方式进行操作会很棒，并且示例代码将不胜感激。正如另一个问题中提到的，我对 ROR 和 jQuery 都很陌生。

关于这个问题的更多信息......

该按钮在 new 和 edit.html.erb 中都退出，并且位于 text_field 旁边的 form_for 块中（我有一个单独的按钮来提交表单）。我希望能够使用 Ruby 方法 SecureRandom.urlsafe_base64 填充该字段。

1.  我使用 button_tag 是否正确？
2.  javascript 文件应该放在哪里，我已经阅读了一些关于此的内容，并且有人提到创建一个 edit.js.erb 文件并让控制器也响应 javascript。但是我对这个过程有点不确定，因为我在新页面和编辑页面中需要类似的功能，所以一个全局 jQuery 函数会更好。
3.  如果通过 jQuery 从控制器调用方法是正确的方法，有人可以提供一些示例代码来说明这是如何完成的，因为我在尝试时没有运气。如果可以从 js.erb 文件中调用 SecureRandom.urlsafe_base64 并在每次单击按钮时更新字段，那将是理想的。

从另一个问题可以看出，我得到了一些工作，但现在卡住了，变得非常绝望。

我将不胜感激任何帮助和示例代码。

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:30:32.177

我假设你已经包含了 jQuery 并且已经正常工作了。话虽如此，为了简单起见，将此 javascript 放在 app/assets/javascripts/devices.js 中。如果这样做，请确保您在同一目录中的 application.js 包含一个“//=require_tree。”（这将拉入该目录中的所有文件，包括您刚刚创建的文件。）最重要的是，确保您包含“ application.js”在正在呈现的布局中。（可能是 app/views/layouts/application.html.erb）

应用程序/资产/javascripts/devices.js：

```
$(function(){
  $("#deviceIDbutton").click(function(e){
      $.get("/generate_device_id", function(data){
      $("#deviceIDfield").val(data);
    });
    e.preventDefault();
  })
}) 
```

然后，添加路由，以便 AJAX 调用知道要调用什么控制器和操作...

应用程序/配置/路由.rb

```
get '/generate_device_id', :to=>"devices#generate_device_id" 
```

然后，添加将调用您要求的 SecureRandom 方法的控制器操作...

应用程序/控制器/devices_controller.rb

```
def generate_device_id
 render :text=>SecureRandom.urlsafe_base64
end 
```

# c# - Infragistics、Net Advantage 10.3 Windows 窗体、帮助文档？

> ID：10315751
> 
> 赞同：0
> 
> 时间：2012-04-25T12:36:01.340
> 
> 标签：c#, winforms, infragistics, netadvantage

我最近一直在寻找一些已经在计算机上使用了很长时间的软件，并遇到了这个，它全部安装并且工作正常，但我似乎找不到任何关于如何使用它的有用文档，似乎在解释如何使每个工具工作等方面提供的帮助很少使用这些工具，可以提供一些指示或知道在哪里可以找到一些像样的文档。

提前致谢，

里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:57:32.097

[在线帮助文](http://www.infragistics.com/support/documentation.aspx#OnlineDocumentation)​​档页面中有指向当前 NetAdvantage 文档的链接。2010 卷 3 现在仍可在线获取，但可能会在 2012 卷 1 发布后被删除。

对于较旧的卷，您可以参考较新的文档，因为早期卷中存在的功能仍将包含在当前文档中。唯一的区别是新功能不适用于您。

您也可以在本地安装帮助。要获得下载，您需要在 Infragistics 网站上的个人资料中注册一个密钥，然后可以从“[我的密钥和下载](https://www.infragistics.com/Membership/Default.aspx?panel=Downloads)”页面获得下载。

# php - 按 2 列对多维数组进行排序

> ID：10315753
> 
> 赞同：2
> 
> 时间：2012-04-25T12:36:06.217
> 
> 标签：php, arrays, sorting, multidimensional-array

我想按其中一列对二维数组进行排序...例如：

```
$a = array(
    'user4' => array('name' => 'u4', 'payment' => 1000, 'time' => 5000),
    'user2' => array('name' => 'u2', 'payment' => 2000, 'time' => 5000),
    'user3' => array('name' => 'u3', 'payment' => 2000, 'time' => 3000),
); 
```

我想按`payment`( `DESC`) 和`time`( `ASC`) 对其进行排序。所以排序后的数组应该是这样的：

```
$a = array(
    'user3' => array('name' => 'u3', 'payment' => 2000, 'time' => 3000),
    'user2' => array('name' => 'u2', 'payment' => 2000, 'time' => 5000),
    'user4' => array('name' => 'u4', 'payment' => 1000, 'time' => 5000),
); 
```

怎么做？谢谢，

* * *

我找到了解决方案：

```
 foreach ($a as $key => $row) {
        $payment[$key]  = $row['payment'];
        $time[$key] = $row['time'];
    }

    array_multisort($payment, SORT_DESC, $time, SORT_ASC, $a); 
```

来源： http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:02:31.813

你可以使用`usort`：

```
$arr = array(
    'user4' => array('name' => 'u4', 'payment' => 1000, 'time' => 5000),
    'user2' => array('name' => 'u2', 'payment' => 2000, 'time' => 5000),
    'user3' => array('name' => 'u3', 'payment' => 2000, 'time' => 3000),
);

function mySort($a,$b) {
    if ($a['payment'] == $b['payment']) {
        return $a['time'] - $b['time'];
    } else {
        return $b['payment'] - $a['payment'];
    }
}
usort($arr, 'mySort');
print_r($arr); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [name] => u3
            [payment] => 2000
            [time] => 3000
        )

    [1] => Array
        (
            [name] => u2
            [payment] => 2000
            [time] => 5000
        )

    [2] => Array
        (
            [name] => u4
            [payment] => 1000
            [time] => 5000
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T15:43:47.263

是的 usort 是这里的答案。在我看来，PHP array_multisort 的行为很奇怪，它强制您将自然格式化的表数据分解为单独的数组。

这是用于表格数据格式的多维数组的多列排序的基本解决方案。

[http://pastebin.com/9vCy1jxH](http://pastebin.com/9vCy1jxH)

# asp.net-mvc-3 - Asp.net mvcpaging - @Ajax.Pager 丢失

> ID：10315756
> 
> 赞同：1
> 
> 时间：2012-04-25T12:36:20.873
> 
> 标签：asp.net-mvc-3, razor, pagination

我正在使用这个 MVCPaging nuget 包，可以在[这里找到](http://nuget.org/packages/mvcpaging)

集成正常，编译也正常，但是在运行时，行错误：***@Ajax.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount,"AjaxIndex", new AjaxOptions { UpdateTargetId = "divCategoryList" })。***

似乎应用程序无法识别**@Ajax.Pager**方法，在键入 @ajax 后也没有对**Pager的智能感知。**

我正在使用本[教程](http://weblogs.asp.net/shijuvarghese/archive/2011/07/06/using-mvcpaging-in-asp-net-mvc-apps.aspx)，可能我必须以某种方式实现属性 Model.PageSize、Model.PageNumber、Model.TotalItemCount 吗？

我错过了什么吗？，你能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T06:43:44.620

```
 <div class="pager">
                                    @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount,new AjaxOptions { UpdateTargetId = "gridcontainer"}).Options(o=> o.Action("index").DisplayTemplate("Bootstrap3Pagination"))
                                </div> 
```

如果您使用 Bootstrap3Pagination。寻呼机看起来不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:58:55.223

使用评论中所写的错误消息，

我认为你得到了 Pager() 方法对吗？

然后我觉得您没有正确重载 Pager() 方法，首先尝试仅使用您发布的示例链接中提到的基本参数，如果仍然不起作用，那么它可能是一个参考问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:06:06.003

从 MvcPaging 的第 2 版开始，缺少 @Ajax.Pager 并替换为 @Html.Pager。只有一种方法具有所有功能。

见[Martijn 帖子](http://blogs.taiga.nl/martijn/2012/04/23/mvcpaging-2-0/)

# encoding - Base64编码的真正目的是什么？

> ID：10315757
> 
> 赞同：96
> 
> 时间：2012-04-25T12:36:20.873
> 
> 标签：encoding, base64

为什么我们有 Base64 编码？我是初学者，我真的不明白你为什么要将字节混淆成其他东西（除非它是加密）。在我读过的其中一本书中，当无法进行二进制传输时，Base64 编码很有用。例如。当我们发布表单时，它会被编码。但是为什么我们要把字节转换成字母呢？难道我们不能把字节转换成字符串格式，中间有一个空格吗？例如，`00000001 00000004`？或者只是`0000000100000004`没有任何空间，因为字节总是成对的 8？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-04-25T13:00:07.743

Base64 是一种将二进制数据编码为几乎每个计算机系统都知道的 ASCII 字符集的方法，以便在不丢失或修改内容本身的情况下传输数据。例如，邮件系统无法处理二进制数据，因为它们需要 ASCII（文本）数据。因此，如果您要传输图像或其他文件，它会因为处理数据的方式而损坏。

注意：base64 编码不是一种加密方式，也不是一种压缩数据的方式。事实上，base64 编码的数据片段比原始数据片段大 1.333... 倍。这只是一种确保在传输过程中不会丢失或修改数据的方法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-05-13T02:03:46.063

Base64 是一种能够在只允许打印字符的介质上表示和传输二进制数据的机制。它是“基本编码”的最流行形式，其他已知的使用是 Base16 和 Base32。

对 Base64 的需求源于需要将二进制内容附加到电子邮件中，例如图像、视频或任意二进制内容。由于 SMTP [RFC 5321] 只允许消息中包含 7 位 US-ASCII 字符，因此需要使用 7 位 ASCII 字符来表示这些二进制八位字节流……

希望这能回答问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T12:51:37.600

Base64 是一种或多或少紧凑的传输（实际上是编码，但目标是传输）任何类型的二进制数据的方式。

见[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

“一般规则是选择一组 64 个字符，它们既是大多数编码通用的子集的一部分，又是可打印的。”

这是一个非常普遍的目的，共同的需求是不要浪费比需要更多的空间。

从历史上看，它基于这样一个事实，即（几乎）所有编码都有一个公共子集用于将字符存储为字节，并且在简单的数据传输过程中，很多 2^8 个可能的字节有丢失或转换的风险（例如复制-粘贴-电子邮件发送-电子邮件接收-复制-粘贴序列）。

（请将投票重定向到布赖恩的评论，我只是让它更完整，希望更清楚）。

# linux - Mac 上“size”命令中的数据段大小

> ID：10315759
> 
> 赞同：3
> 
> 时间：2012-04-25T12:36:23.287
> 
> 标签：linux, macos, size, osx-leopard, unix

鉴于 Mac OS X 10.5 上的“size”命令在小型可执行文件上的以下输出，__DATA 下的值是多少？是未初始化的数据段大小还是初始化的数据段大小？我发现令人困惑的是，无论我是否在程序中初始化（唯一的）全局数组，这个值（也不是其余的值）似乎都没有改变。

我猜这个命令在 Linux 和 Mac 上的工作方式不同？

```
__TEXT  __DATA  __OBJC  others  dec hex
4096    4096    0   4294971392  4294979584  100003000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:48:30.773

在 linux 上，格式为

```
 text    data     bss     dec     hex filename
   1281     520      32    1833     729 a.out 
```

`BSS`是零初始化的全局变量和局部静态变量的字节大小。我验证了它们（数据、bss 等）随着变量数量及其初始化值的变化而相应变化。

需要注意的一点是，在 CWD 中`size`自动选择没有任何参数。`a.out`

我完全不知道Mac中的东西。我的猜测是`__OBJC`= `BSS`。还要检查你是如何调用`size`命令的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:11:52.123

所有静态变量和全局变量都已初始化，只是它们是否初始化为零或其他值的问题。初始化为零的变量进入__DATA*段的 __bss**部分*。其他变量将进入 __DATA 段的其他部分。

# web - 如何在 JavaFX 2.0 中按深度保存任何网站？

> ID：10315761
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:36:24.383
> 
> 标签：web, web-scraping, javafx-2

我正在开发一个 JavaFX 2.0 应用程序，我想按深度保存一个网站及其内容，但我不知道该怎么做。例如，如果我想要深度 0，它将保存第一个 html 页面。如果深度为 1，我将保存网站的第一个 html 页面及其所有子页面及其内容！我不知道该怎么做。

我有这个项目作为家庭作业。我是一个学生！

任何人都可以在这里帮助我吗？我会很高兴的。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:12:07.760

I'm not sure that JavaFX has some special API for this task. The main idea of javaFX may be defined as "tool for builing really cool GUI", but not like "some special tool for some specific tasks on web". Maybe [WebView component](http://docs.oracle.com/javafx/2.0/webview/jfxpub-webview.htm) can help you with your task (as its purpose is working with web). If not - you should work with javaFX on this task just the same way you'll walk with some other framework on it: write your own parser for HTML pages (read a website as a string, parse it for finding all html tags... and so on... XPath can help you there), or find some already existing libraries and use them in your application. So, javaFX can help you in this project as a framework for building GUI, but business logic must be done by some other frameworks.

# mysql - 如何根据在 mysql 中执行查询得到的结果执行不同的查询？

> ID：10315762
> 
> 赞同：0
> 
> 时间：2012-04-25T12:36:31.060
> 
> 标签：mysql, birt

我的问题是：

如果我从一个表中检索数据...说**select id from table**。

根据**id 的结果，**

我需要执行不同的查询说，

如果 id=1 则**select * from table1**，

如果 id=2**从 table2 中选择 ***和

如果 id=3，**则从 table3 中选择 ***

如何在 MySQL 数据库或 Birt 报告中实现这一点？

请给我一个例子或语法。

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:18:49.150

我从您的问题中了解到，这是我能想到的最佳解决方案。像这样使用联合。

```
 SELECT *
FROM (
SELECT id,name FROM table1
UNION
SELECT id,name FROM table2
UNION
SELECT id,name FROM table3
) num
WHERE num.id = ? 
```

您可以将此查询用于 Birt 报告，因此无论您传递什么 id，都会根据该 id 生成结果，希望它能解决您的目的。问候

# jquery - jQuery 验证无法正常工作

> ID：10315768
> 
> 赞同：0
> 
> 时间：2012-04-25T12:37:05.907
> 
> 标签：jquery, html

我试图通过我阅读的内容来做所有事情..但是当我提交表单时不会发生 jquery 验证。这是我的jQuery：

```
(function ($) {

$('#registrationForm').validate({
    rules: {
        username: {
            required: true,
            minlength: 4
        },
        fullname: {
            required: true,
            minlength: 4
        },
        email: {
            required: true,
            minlength: 4,
            email: true
        },
        retype_email: {
            required: true,
            minlength: 4,
            email: true,
            nameField: { notEqual: "email" }
        },
        password: {
            required: true,
            minlength: 4
        },
        retype_password: {
            required: true,
            minlength: 4,
            nameField: { notEqual: "password" }
        },
        url: "url",
        comment: "required"
    },

    messages: {
        username: {
            required: "Please fill your name",
            minlength: "The name is too short"
        },
        fullname: {
            required: "Please fill your surname",
            minlength: "Your surname is too short"
        },
        email: {
            required: "Please fill your email",
            minlength: "Your email is too short",
            email: "Invalid email"
        },
        retype_email: {
            required: "Please retype your email",
            minlength: "Your email is too short",
            email: "This is an invalid email",
            nameField: "Your email doesnt match the email above"
        },
        password: {
            required: "Please fill in your password",
            minlength: "The password is too short"
        },
        retype_password: {
            required: "Please retype your password",
            minlength: "The password is too short",
            nameField: "Your password doesnt match the password above"
        }
    },
    submitHandler: function (form) {
        $(form).ajaxSubmit();
    },
    invalidHandler: function (e, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var messages = errors == 1
           ? 'You have missed 1 field. It has been highlighted below'
           : 'You missed ' + errors + 'fields. They have been highlighted below';
            $("div.errors span").html(message);
            $("div.error").show();
        }
        else {
            $("div.error").hide();
        }
    }
});

jQuery.validator.addMethod("notEqual", function (value, element, param) {
    return this.optional(element) || value != param;
}, "Please specify a different (non-default) value");

})(jQuery); 
```

这是我的html：

```
 <form action="" method="post" id="registrationForm" >    <table>

    <tr>

        <td>

            Sign up

        </td>

    </tr>

    <tr>

        <td>

            <input class="required" id="username" name="username" title="User name" type="text" value="" />

        </td>

    </tr>

    <tr>

        <td>

            <input class="required" id="fullname" name="fullname" title="Full name" type="text" value="" />

        </td>

    </tr>

    <tr>

        <td>

            <input class="required" id="email" name="email" title="Email address" type="text" value="" />

        </td>

    </tr>

    <tr>

        <td>

           <input class="required" id="retype_email" name="retype_email" title="Retype email" type="text" value="" />

        </td>

    </tr>

    <tr>

        <td>

           <input class="required" id="password" name="password" title="Password" type="text" value="" />

        </td>

    </tr>

     <tr>

        <td>

               <input class="required" id="retype_password" name="retype_password" title="Retype password" type="text" value="" />

            </td>

        </tr>
</table>
<input type="submit" name="register" value="Sign up" />
</form> 
```

我做错了什么，为什么提交表单并且当所有字段为空时都没有显示错误？

**更新：**

> 未捕获的类型错误：对象 [对象对象] 没有方法“验证”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:04:40.330

我希望这是你想要的。

**[演示](http://jsfiddle.net/dhirajbodicherla/my5gC/2/)**

1.  错字：在`invalidHandler`声明的变量中是消息，但消息被用于`$("div.errors span").html(messages);`
2.  更改`namefield`为`retpye_password`_ `retype_email`_`equalTo`

# c# - 指定受约束的泛型类是子类？

> ID：10315769
> 
> 赞同：1
> 
> 时间：2012-04-25T12:37:06.547
> 
> 标签：c#

我有这个类定义：

```
public abstract class AbstractListViewModel<T>  : AbstractWorkspaceViewModel 
```

所以我有一个名为的类`AbstractListViewModel`，它有一个泛型类型，它是`AbstractWorkspaceViewModel`.

但是，我需要限制`T`为仅是`AbstractWorkspaceViewModel`. 我尝试了以下方法：

```
public abstract class AbstractListViewModel<T> where T :
    AbstractWorkspaceViewModel, : AbstractWorkspaceViewModel
public abstract class AbstractListViewModel<T> where T :
    AbstractWorkspaceViewModel : AbstractWorkspaceViewModel 
```

但是这种语法是无效的。

所以在这里我想说“一个名为`AbstractListViewModel`的`AbstractWorkspaceViewModel`类是`AbstractWorkspaceViewModel`.

我如何定义这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:40:11.373

这是您的约束的顺序。尝试这个：

```
public abstract class AbstractListViewModel<T>  : AbstractWorkspaceViewModel
    where T : AbstractWorkspaceViewModel 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:40:01.030

你要这个：

```
public abstract class AbstractListViewModel<T> : AbstractWorkspaceViewModel
    where T : AbstractWorkspaceViewModel 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:41:26.367

```
public abstract class AbstractListViewModel<T> : AbstractWorkspaceViewModel where T : AbstractWorkspaceViewModel 
```

# menu - JavaFX 2.0 像 MenuItem 一样激活菜单

> ID：10315774
> 
> 赞同：14
> 
> 时间：2012-04-25T12:37:31.013
> 
> 标签：menu, javafx, menuitem, javafx-2, menubar

我正在制作一个`MenuBar`，我不想按一个`Menu`喜欢的功能：“文件”然后执行一个动作。比如打开另一个 fxml，或者写一些输出的例子。

我想要类似“文件”中的`MenuItem`（谎言“关于”） 的功能。`Menu`

```
package model;

import static java.lang.System.out;

import javafx.application.Application;
import javafx.beans.property.ReadOnlyDoubleProperty;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.geometry.Side;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyCodeCombination;
import javafx.scene.input.KeyCombination;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

/**
 * Example of creating menus in JavaFX.
 * 
 * @author Dustin
 */
public class JavaFxMenus extends Application
{
   /**
    * Build menu bar with included menus for this demonstration.
    * 
    * @param menuWidthProperty Width to be bound to menu bar width.
    * @return Menu Bar with menus included.
    */
   private MenuBar buildMenuBarWithMenus(final ReadOnlyDoubleProperty menuWidthProperty)
   {
      final MenuBar menuBar = new MenuBar();

      // Prepare left-most 'File' drop-down menu
      final Menu fileMenu = new Menu("File");

      menuBar.getMenus().add(fileMenu);
      //menuBar.getOnMouseClicked().handle(this);

      // Prepare 'Examples' drop-down menu
      final Menu examplesMenu = new Menu("JavaFX 2.0 Examples");
      examplesMenu.getItems().add(new MenuItem("Text Example"));
      examplesMenu.getItems().add(new MenuItem("Objects Example"));
      examplesMenu.getItems().add(new MenuItem("Animation Example"));
      menuBar.getMenus().add(examplesMenu);

      // Prepare 'Help' drop-down menu
      final Menu helpMenu = new Menu("Help");
      helpMenu.setOnAction(null);

      final MenuItem searchMenuItem = new MenuItem("Search");
      searchMenuItem.setDisable(true);
      helpMenu.getItems().add(searchMenuItem);
      final MenuItem onlineManualMenuItem = new MenuItem("Online Manual");
      onlineManualMenuItem.setVisible(false);
      helpMenu.getItems().add(onlineManualMenuItem);
      helpMenu.getItems().add(new SeparatorMenuItem());
      final MenuItem aboutMenuItem =
         MenuItemBuilder.create()
                        .text("About")
                        .onAction(
                            new EventHandler<ActionEvent>()
                            {
                               @Override public void handle(ActionEvent e)
                               {
                                  out.println("You clicked on About!");
                               }
                            })
                        .accelerator(
                            new KeyCodeCombination(
                               KeyCode.A, KeyCombination.CONTROL_DOWN))
                        .build();             
      helpMenu.getItems().add(aboutMenuItem);
      menuBar.getMenus().add(helpMenu);

      // bind width of menu bar to width of associated stage
      menuBar.prefWidthProperty().bind(menuWidthProperty);

      return menuBar;
   }

   /**
    * Start of JavaFX application demonstrating menu support.
    * 
    * @param stage Primary stage.
    */
   @Override
   public void start(final Stage stage)
   {
      stage.setTitle("Creating Menus with JavaFX 2.0");
      final Group rootGroup = new Group();
      final Scene scene = new Scene(rootGroup, 800, 400, Color.WHEAT);

      final MenuBar menuBar = buildMenuBarWithMenus(stage.widthProperty());
      rootGroup.getChildren().add(menuBar);
      stage.setScene(scene);
      stage.show();
   }

   /**
    * Main executable function for running examples.
    * 
    * @param arguments Command-line arguments: none expected.
    */
   public static void main(final String[] arguments)
   {
      Application.launch(arguments);
   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T13:58:13.920

AFAIK, A`Menu`如果没有添加任何子菜单或`Menuitem`s，则不会在单击、显示或隐藏时触发事件。然而，解决方法是设置它的图形，这个图形节点将处理鼠标点击，例如，

```
Label menuLabel = new Label("File");
menuLabel.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent event) {

        Stage myDialog = new Stage();
        myDialog.initModality(Modality.WINDOW_MODAL);

        Scene myDialogScene = new Scene(VBoxBuilder.create()
            .children(new Text("Hello! it's My Dialog."))
            .alignment(Pos.CENTER)
            .padding(new Insets(10))
            .build());

        myDialog.setScene(myDialogScene);
        myDialog.show();
    }
});
Menu fileMenuButton = new Menu();
fileMenuButton.setGraphic(menuLabel);
menuBar.getMenus().add(fileMenuButton); 
```

这种方法的一个缺点是标签没有覆盖菜单的所有空间，导致单击菜单边缘不会触发鼠标事件。通过取消注释上面的行来查看这一点`menuLabel.setStyle`。但这可以通过`CSS`我认为的风格来解决。
部分代码取自[使用 Stage 的 Create Dialog](http://java-buddy.blogspot.com/2012/02/create-dialog-using-stage.html)。您还`FXML`可以`myDialog`使用`FXMLLoader`. 网上有很多关于它的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-25T13:43:06.737

最近我遇到了同样的问题，这就是我所做的

```
@FXML private Menu myMenu;

@Override
public void initialize(URL url, ResourceBundle rb) {

    myMenu.setGraphic(
        ButtonBuilder.create()
            .text("btnText")
            .onAction(new EventHandler<ActionEvent>(){
                @Override public void handle(ActionEvent t) {
                    //TODO
             } })
            .build()
    );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-23T19:05:40.800

结合我们朋友[@Dota2](https://stackoverflow.com/users/2788606/dota2)的回答，我构建了一个辅助类来触发`Menu`'s`onAction(Menu menu)`事件，即使它内部没有任何事件`MenuItem`。这是静态辅助方法：

```
public static void onAction(Menu menu)
{
    final MenuItem menuItem = new MenuItem();

    menu.getItems().add(menuItem);
    menu.addEventHandler(Menu.ON_SHOWN, event -> menu.hide());
    menu.addEventHandler(Menu.ON_SHOWING, event -> menu.fire());
} 
```

然后你打电话：

```
YourHelperClass.onAction(myMenu); 
```

准备好了！我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T11:57:27.960

最近我遇到了同样的问题，这是我的出路：

我在菜单中有一个 menuItem，它的行为就像单击 menuItem 一样（在你的情况下是`File`菜单）。所以你可以做的是有一个 menuItem`Dummy_menuItem`

```
final Menu fileMenu = new Menu("File");
fileMenu.getItems().add(new MenuItem("Dummy_menuItem"));
menuBar.getMenus().add(fileMenu); 
```

然后单击`File`菜单，触发`Dummy_menuItem`menuItem 或您希望拥有的任何功能。为了确定哪个菜单应该有这个属性，我曾经`numberOfMenuItems`在 menubar 的菜单中获取 menuItems 的数量

```
if (numberOfMenuItems == 1) {
    menu.showingProperty().addListener(
        (observableValue, oldValue, newValue) -> {
            if (newValue) {
                // the first menuItem is triggered
                menu.getItems().get(0).fire();
            }
        }
    );
} 
```

结果是`Dummy_menuItem`在单击`File`菜单或任何具有一个 menuItem 的菜单时没有上下文显示 menuItem 的情况下触发。所以看起来好像您单击了`File`菜单并被重定向到另一个页面或其他页面。

希望这可以帮助！！

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-09-12T06:51:06.433

我认为您不能允许对主菜单标签进行任何操作。

但是，您可以创建一个堆栈窗格，并用文本和菜单栏填充它。

# jquery - 在 jquery 中隐藏和显示

> ID：10315778
> 
> 赞同：0
> 
> 时间：2012-04-25T12:37:42.670
> 
> 标签：jquery, html

我想在点击事件上显示和隐藏 div，我想通过一个按钮来做到这一点。我写了一个代码，但它不工作。

```
<head>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript">
      $(function () {
         $('#clickme').click(function () {

            $('.mydiv').hide();
         })

         $('.clickme').click(function () {

            $('.mydiv').show();
         })
      })
   </script>
</head>
<body>
   <div class="mydiv">hiiiii</div>
   <input type="button" id="clickme" value="clickme" />
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:39:25.287

试试这个：

```
$('#clickme').click(function() {   // you're using an ID here!
    var div = $('.mydiv');

    if(div.is(":visible")) {
        div.hide();
    } else {
        div.show();
    }

}); 
```

您正在向按钮添加两个事件侦听器。两者都将在单击时运行，因此 div 将显示并立即隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:40:45.333

试试这个：

```
<head>

<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">

$(function(){

$('#clickme').click(function(){

    if ($('.mydiv').is(":visible")) {
        $('.mydiv').hide();
    }
    else {
        $('.mydiv').show();
    }
}
)
})

</script>

</head>

<body>

<div class="mydiv">hiiiii </div>
<input type="button" id="clickme" value="clickme" />
</body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T12:42:10.927

您在 jQuery 中混合了类和 id 标识符。你的按钮有 ID clickme。在您隐藏内容的第一个代码中，您以正确的方式引用了一个按钮，但在第二个脚本中，您使用的是类 .clickme 而不是#clickme。

虽然是正确的，但这个脚本会同时隐藏和显示，因此它看起来好像什么都没发生：

```
$(function(){ 
   $('#clickme').click(function(){ 
       $('.mydiv').hide(); 
   });

   $('#clickme').click(function(){ 
       $('.mydiv').show(); 
   }); 
}); 
```

更好的方法是使用：

```
$(function() {
    $("#clickme").click(function() {
        $(".mydiv").toggle();
    });
}); 
```

正如 Binarous 指出的那样，第一个脚本虽然正确，但行不通。您应该在隐藏时应用一些自定义类，并在显示时使用该类，甚至更好地使用 toggle() 函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T12:44:17.067

当你隐藏它时向你的 div 添加一个类，当你显示它时删除它，并在你想做某事之前检查它。

此代码有效：

```
$(function(){
    $('#clickme').click(function(){

        if ($('.mydiv').hasClass("hidden")) $('.mydiv').removeClass("hidden").show();
        else $('.mydiv').addClass("hidden").hide();
    });
}) 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/V3gRH/](http://jsfiddle.net/V3gRH/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T12:45:30.197

**HTML**

```
<div id="divContent">Some content</div>
<input type="button" id="btnShow" value="Hide" /> 
```

**脚本**

```
$(function(){
    var isVisible=true;
    $("#btnShow").click(function(){
         if(isVisible)
         {
              $(this).val("Show")
              $("#divContent").hide();
         }
        else
        {
             $(this).val("Hide")
             $("#divContent").show();
        }
        isVisible=!isVisible;   
    });    
}); 
```

这是工作示例：http: [//jsfiddle.net/95vXQ/5/](http://jsfiddle.net/95vXQ/5/)

**编辑 ：**

```
isVisible = !isVisible 
```

上面的行是下面代码的简化版本

```
if(isVisible)
{
  isVisible =false;
}
else
{
 isVisible =true;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-25T12:50:17.350

```
$(function(){
    $("#clickme").click(function(){
      var $mydiv = $(".mydiv");
        if ($mydiv.css("display")=="none"){
           $mydiv.show();   
        } else
        {
           $mydiv.hide();
        }
    });        
});​ 
```

[**-- 看演示 --**](http://jsfiddle.net/Curt/VXMaN/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T12:49:10.227

试试这个：

```
$(function() {
    $('#clickme').click(function() {
        if ($('.mydiv').css('display') == "none") {
            $('.mydiv').show();
        } else {
            $('.mydiv').hide();
        }
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-25T12:49:41.033

你可以做一个隐藏的复选框。
单击按钮后，它将被选中-true。然后检查如果你再次点击按钮，它会检查它是否被选中（如果它被选中 - 取消选中）..那么你可以添加另一个 IF .. 在按钮点击时，检查 IF 复选框是否被选中，如果它显示，否则隐藏..

OMG chikidi 检查自己

$('#check').is(:checked) {...} $('#check').not(:checked) {...}

这很愚蠢，但我可能会工作！;D

# javascript - 在没有任何服务器端语言的情况下在 Javascript 中使用 MVC？

> ID：10315781
> 
> 赞同：1
> 
> 时间：2012-04-25T12:38:00.087
> 
> 标签：javascript, jquery, html, model-view-controller

我正在尝试使用 MVC 并将其与 javascript 一起使用。我将使用 HTML5 制作移动应用程序，并且不打算仅使用本地存储的任何服务器端语言。

如何做到这一点？我通常被模型抛弃，因为据我了解它依赖于后端语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:41:45.987

该模型不依赖于后端。MVC 在概念上很简单：

1.  **控制器**收到请求。
2.  **控制器**调用**模型**来完成所有的逻辑（无论是数据库交互，localStorage 交互）
3.  **模型**将数据返回给**Controller**。
4.  **控制器**相应地调用**View**，如果需要，从**Model**传递数据。

这意味着，模型不必使用服务器端语言，它是应用程序逻辑的占位符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:43:32.557

有多个`MV*`可用的框架。您不必拥有服务器支持即可使用它们。

*   [骨干JS](http://documentcloud.github.com/backbone/)
*   [EmberJS](http://emberjs.com/)
*   [javascriptMVC](http://javascriptmvc.com/)

还有很多，但首先想到的是这三个。享受

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:43:14.420

MVC 开发与服务器端脚本无关。

它只与您开发应用程序所采用的架构类型有关。

这仅意味着您拥有模型、视图和控制器。模型可以是从 javascript 生成的对象，与视图一起使用以呈现一些数据。

控制器用于保存视图和模型之间的逻辑和行为。

嗯，这是一个非常基本的概述，但 MVC 绝不意味着后端服务或 ajax 调用。

这篇文章可能会帮助[http://www.alexatnet.com/articles/model-view-controller-mvc-javascript](http://www.alexatnet.com/articles/model-view-controller-mvc-javascript)

# c - 套接字发送（）可重复

> ID：10315784
> 
> 赞同：0
> 
> 时间：2012-04-25T12:38:16.053
> 
> 标签：c, sockets

我对 TCP 套接字上的 send() 有疑问。

有没有区别：

```
char *text="Hello world";
char buffer[150];

for(i=0;i<10;i++)
    send(fd_client, text, strlen(text) ); 
```

和

```
char *text="Hello world";
char buffer[150];

buffer[0]='\0';
for(i=0;i<10;i++)
    strcat(buffer, text);

send(fd_client, buffer, strlen(buffer) ); 
```

接收端使用recv有区别吗？两者都将成为一个 TCP 数据包吗？

即使设置了 TCP_NODELAY？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:05:26.213

TCP is stream based protocol. If you run Send, it will put some data into OS TCP layer buffer and OS will send it periodically. But if you call Send too quick it might put few arrays into OS TCP layer before the previous one were sent. So it is like stack, it sends whatever it has and put everything in one big array.
Sending is btw done with segmentation by OS TCP layer, and there is as well Nagle's algorithm that will prevent sending small amount data before OS buffer will be big enough to satisfy one segment size.

So yes, there is difference.

TCP is stream based protocol, you can't rely on that single send will be single receive with same amount of data.
Data might merge together and you have to remember about that all the time.

Btw, based on your examples, in first case client will receive all bytes together or nothing. In meantime if sending one big segment will drop somewhere on the way then server OS will automatically resend it. Drop chance for bigger packets is higher so and resending of big segments will lead to some traffic lose. But this is based on percentage of dropped packets and might be not actual for your case at all.

In second example you might receive everything together or parts each separate or some merged. You never know and should implement you network reading that way, that you know how many bytes you expecting to receive and read just that amount of bytes. That way even if there is left some unread bytes they will be read on next "Read".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:41:05.543

实在没有办法知道。取决于 TCP 的实现。如果是 UDP 套接字，它们肯定会有不同的结果，在第一种情况下你会有几个数据包，在第二种情况下会有一个数据包。

TCP 可以随意拆分数据包；它模拟一个流并将它的数据包机制从用户那里抽象出来。这是设计使然。

# c# - 获取列表框中的选定项目 ID

> ID：10315790
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:38:28.717
> 
> 标签：c#, .net, winforms

如何在列表框中获取选择项并将其传递给另一个类。目前它确实显示项目ID。

```
 private void moveup_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < listBox1.SelectedItems.Count; i++)
            {
                MessageBox.Show(listBox1.SelectedItems[i].ToString());

            }
        } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:40:03.263

试试这个，使用 SelectedItems[i].Text 而不是 SelectedItems[i].ToString()

```
private void moveup_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < listBox1.SelectedItems.Count; i++)
            {
                MessageBox.Show(listBox1.SelectedItems[i].Text);

            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:46:08.000

如果我理解正确，您想要列表框中的文本吗？使用 .text 代替 .ToString()

```
 private void moveup_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < listBox1.SelectedItems.Count; i++)
            {
                MessageBox.Show(listBox1.SelectedItems[i].text);

            }
        } 
```

要将其传递给另一个类，您可以将其用作参数或将其保存为自变量，或将所选项目保存到列表中，然后将其传递给类。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:42:48.343

您可以将对象添加到它接受对象的列表框集合中，然后将所选项目转换为您使用的任何类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:43:32.760

将它传递给一个新类到底是什么意思？

如果您正在创建一个新类，您可以在构造函数中使用它，方法是定义一个接受字符串参数的构造函数

如果要设置类的属性，可以将其作为参数传递给类的公共方法，也可以直接设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:47:08.630

让列表框是lstOptions。

所以 lstOptions.SelectedItems[0].text

在列表框中为您提供第一个选定项目的 TEXT。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T12:47:56.177

您可以将所选项目转换为目标类型并将其传递给另一个对象。

```
otherObject.PassObject(listBox1.SelectedItems as WhatEver); 
```

# c - C有课程吗？

> ID：10315793
> 
> 赞同：26
> 
> 时间：2012-04-25T12:38:42.573
> 
> 标签：c, class

好吧，你可以叫我菜鸟，但我真的很困惑。

我的前同学付钱让我用 C 写一个程序。她给了我任务，上面写着“废话少说至少做两门课，至少写一个构造器，至少重写一个方法”，它一个字一个字地说.

然后我告诉她“这是 C++ 而不是 C”她说“但我们正在学习 C”

我忽略了它并用 C++ 编写了程序并发送给她，因为我认为她不知道她在说什么。她说“它不适用于代码块，而 wtf 是 cout <<”，然后她给我发了一段他们编写的代码，而不是 cout 和 cin，而是 printf 和 scanf。它必须是 C。所以，我用 printf 和 scanf 重写了程序，她仍然说代码块会抛出错误（我仍然按照任务要求离开课程）。

我想问wtf？C有课程吗？还是有什么误会什么的？

编辑：这么多年后我又回到了这个问题，并注意到一些 *****es 花了一些时间从问题中删除 99% 的文本。获得生活，这还不是1984年。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T12:43:11.077

不，C 没有课程。也就是说，有一些方法可以在 C 中模拟面向对象的编程——快速的 Google 搜索应该会产生一些有用的结果。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-25T12:41:51.793

不，C 本身没有类，只有 C++（当时以“带类的 C”开始......）。但是您可以在 C++ 代码中使用标准 C 库，即使它通常不被认为是好的做法（其中 C++ 有自己的更高级别的构造，例如`cout`vs `printf`）。

您也可以在 C 中模拟类、继承和虚函数的行为，但这不值得。

你可能应该给你的前同学买一本 C 编程书 :-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T12:44:35.877

C 没有类的正式结构。您可以生成具有模块级数据的模块，根据您自己的协议，您不会在其他任何地方使用这些数据或静态数据，并编写函数来获取、设置和以其他方式操作该数据。您甚至可以使用函数指针来操作类似的数据类型，就好像它们在一个类中一样。

但是，您不会受到 C 编译器的类语义或其他规则的保护，因为 C 编译器不知道类。但是，结构化数据非常强大。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T12:41:41.637

C 没有类。

但是可以通过使用静态全局变量作为私有类成员，使用静态函数作为私有成员函数来近似一个类。外部成员为公众。在这种情况下，可以将整个文件视为一个类。

可能这不是你想要的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T13:34:21.923

C 没有类，但您可以使用结构和指向函数的指针来模拟它。C99 是一点点（只是一点点）基于 C++，所以很容易用 C 复现类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T12:53:46.190

一个典型的冲突需求案例，似乎:-)

她要求*CLASS、CONSTRUCTOR、METHOD*的术语都是 C++ 术语，而没有一个是 C 术语（其中最接近的可以说是*STRUCT、INITIALIZATION、FUNCTION*）。你的朋友在**这里**混淆了一些东西。我怀疑她的老师是否混淆了某些东西，尽管...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-08-13T09:59:24.333

C 不支持类，但我们确实有**棘手的 hacky 解决方法**。阅读完整的解释或简单地向下滚动到代码部分。

## 结构声明：

我声明了一个`struct`带有名称的**类**。**在里面，我使用void**`function`类型、名称**Print**和一个参数**char**进行初始化。这看起来像******`void class.Print(char);`******

 ******## 结构不允许内部初始化：

但是 struct 不允许内部变量的初始化。所以我们将在外面初始化它。我们创建了一个`function`类，名称**为****Printer**。它初始化并返回我们可以轻松使用的初始化结构。**`struct`**

 **## 打电话给班级：

现在我们包含了 helper header 和声明的变量 type `class`， name `printer1`， value `Printer()`。在我调用班级成员并使用打印字符串之后`printer1.Print("Hello from class function");`

`main.c`

```
#include "helper.h"
void main()
{
    class printer1 = Printer();
    printer1.Print("Hello from class function");
} 
```

`helper.h`

```
#include <stdio.h> //imports int printf(...);
void print(const char* text)
{
    printf(text);
}

typedef struct 
{
    void (*Print) (const char*);
} class;

class Printer()
{
    class Printer;
    Printer.Print = &print;
    return Printer;
} 
```

**笔记：**

*   这个确切的例子是用 VC 和 tcc 编译器成功编译和测试的。
*   `class`是示例名称。您也可以使用任何其他名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-18T08:26:27.807

C 主要使用功能/结构编程，而不是像 C++、Java、Python 等使用类的语言那样实现面向对象编程。但在少数情况下，我们使用如下类：

```
typedef struct {
    ShapeClass shape;
    float width, height;
}
RectangleClass; 
```

希望它有所帮助。********

# ios - 使用应用内购买的一个应用中的 ID

> ID：10315794
> 
> 赞同：1
> 
> 时间：2012-04-25T12:38:44.633
> 
> 标签：ios, in-app-purchase, app-store-connect

请告诉我，我可以在一个应用程序中创建多少个 ID？只有10 000？还是一个 IAP 10000？我想在我的应用程序中进行至少 3 次应用内购买。我们有大量的内容可供出售

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:50:34.210

它是 10000 个产品 ID。请参考[iTunes Connect 开发者指南 7.4](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)：

> 您可以在 iTunes Connect 中为每个应用程序创建最多 10000 个单独的产品 ID，分配给您的应用程序内购买。这个数字是指应用内购买的数量，而不是购买交易的数量。

# asp.net - 如何使用 iTextSharp 在 pdf 文件中获取部分目标页码？

> ID：10315797
> 
> 赞同：0
> 
> 时间：2012-04-25T12:38:51.890
> 
> 标签：asp.net, pdf, annotations, itextsharp

我有一个 pdf 文件，其中包含索引页面，其中包含目标页面的部分。我可以获得部分名称（第 1.1 节，第 5.2 节），但我无法获得目标页码...

例如： http: [//www.mikesdotnetting.com/Article/84/iTextSharp-Links-and-Bookmarks](http://www.mikesdotnetting.com/Article/84/iTextSharp-Links-and-Bookmarks)

这是我的代码：

```
string FileName = AppDomain.CurrentDomain.BaseDirectory + "TestPDF.pdf";
PdfReader pdfreader = new PdfReader(FileName);
PdfDictionary PageDictionary = pdfreader.GetPageN(9);
PdfArray Annots = PageDictionary.GetAsArray(PdfName.ANNOTS);       
if ((Annots == null) || (Annots.Length == 0))
    return;

foreach (PdfObject oAnnot in Annots.ArrayList)
{
    PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(oAnnot);          

    if (AnnotationDictionary.Keys.Contains(PdfName.A))
    {
        PdfDictionary oALink = AnnotationDictionary.GetAsDict(PdfName.A);

        if (oALink.Get(PdfName.S).Equals(PdfName.GOTO))
        {
            if (oALink.Keys.Contains(PdfName.D))
            {
                PdfObject objs = oALink.Get(PdfName.D);
                if (objs.IsString())
                {
                    string SectionName = objs.ToString(); // here i could see the section name...
                }
            }
        }
    }
} 
```

我如何获得目标页码？

我也无法访问某些 pdf 前的部分名称：[http ://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/adobe_supplement_iso32000.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/adobe_supplement_iso32000.pdf)

在此 PDF 第 9 页中包含我无法获取该部分的部分。所以请给我解决方案....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:45:44.097

有两种可能的链接注释类型，要么`A`要么`Dest`。是更强大的`A`类型，但往往是矫枉过正。该`Dest`类型仅指定对页面的间接引用以及一些拟合和缩放选项。

该`Dest`值可以是几个不同的东西，但通常（据我所见）是一个命名的字符串目标。您可以在文档的名称目标字典中查找命名目标。所以在你的主循环之前添加这个，以便以后可以引用它：

```
//Get all existing named destinations
Dictionary<string, PdfObject> dests = pdfreader.GetNamedDestinationFromStrings(); 
```

一旦你得到`Dest`了字符串，你就可以在上面的字典中将该对象作为键查找。

```
PdfArray thisDest = (PdfArray)dests[AnnotationDictionary.GetAsString(PdfName.DEST).ToString()]; 
```

返回的数组中的第一项是您习惯的间接引用。（实际上，第一项可能是一个整数，表示远程文档中的页码，因此您可能需要检查它。）

```
PdfIndirectReference a = (PdfIndirectReference)thisDest[0];
PdfObject thisPage = PdfReader.GetPdfObject(a); 
```

以下是将上述大部分内容放在一起的代码，省略了您已经拥有的一些代码。`A`并且`Dest`根据规范是互斥的，因此任何注释都不应该同时指定。

```
//Get all existing named desitnations
Dictionary<string, PdfObject> dests = pdfreader.GetNamedDestinationFromStrings();

foreach (PdfObject oAnnot in Annots.ArrayList) {
    PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(oAnnot);

    if (AnnotationDictionary.Get(PdfName.SUBTYPE).Equals(PdfName.LINK)) {
        if (AnnotationDictionary.Contains(PdfName.A)) {
            //...Do normal A stuff here
        } else if (AnnotationDictionary.Contains(PdfName.DEST)) {
            if (AnnotationDictionary.Get(PdfName.DEST).IsString()) {//Named-based destination
                if (dests.ContainsKey(AnnotationDictionary.GetAsString(PdfName.DEST).ToString())) {//See if it exists in the global name dictionary
                    PdfArray thisDest = (PdfArray)dests[AnnotationDictionary.GetAsString(PdfName.DEST).ToString()];//Get the destination
                    PdfIndirectReference a = (PdfIndirectReference)thisDest[0];//TODO, this could actually be an integer for the case of Remote Destinations
                    PdfObject thisPage = PdfReader.GetPdfObject(a);//Get the actual PDF object
                }
            } else if(AnnotationDictionary.Get(PdfName.DEST).IsArray()) {
                //Technically possible, I think the array matches the code directly above but I don't have a sample PDF
            }
        }
    }
} 
```

# objective-c - 为什么这个委托 - 协议没有响应？

> ID：10315800
> 
> 赞同：0
> 
> 时间：2012-04-25T12:39:02.180
> 
> 标签：objective-c, ios, delegates, protocols

我有一个名为 dateSelectViewController 的方法在我的 .h 文件中声明为协议：

```
@class DateSelectViewController;
@protocol DateSelectViewControllerDelegate 

- (void)dateSelectViewController:(DateSelectViewController *)sender
                         theDate:(id)stringDate;

@end 
```

在协议下方，我声明了一个代表：

```
@property (nonatomic, weak) id <DateSelectViewControllerDelegate> delegate; 
```

在实现文件中，我合成了委托，当在我的视图中按下完成按钮时，我向委托发送一条消息：

```
- (IBAction)DonePressed:(id)sender {
    NSDate *chosen = [datePicker date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

    [formatter setDateFormat:@"MM/dd/yyyy"];
    NSString *formatedDate = [formatter stringFromDate:chosen];

    //sending a message to the delegate
    [self.delegate dateSelectViewController:self theDate:formatedDate];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

在被委派给的 .h 文件中，我正在导入委派者 .h 文件。在 .m 文件中，我符合协议：

```
@interface MakePlantTVC ()<DateSelectViewControllerDelegate>
- (void)dateSelectViewController:(DateSelectViewController *)sender
                     theDate:(id)stringDate
{
    self.displayDate.text = stringDate;
    NSLog(@"delegate working");
} 
```

出于某种原因，这完全有效。当在我的委托人类中按下完成按钮时，该按钮会按预期执行并弹出视图控制器，但就像消息永远不会发送给委托人一样。起初我以为我可以向 nil 发送消息，但它的类型为 id，所以情况不应该如此。为什么没有发送消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:49:10.997

想到了几件事

*   你设置委托了吗？这听起来可能很愚蠢，但当一个代表不工作时，90% 的时间是因为我忘记或丢失了 IB 连接。
*   你的弱对象过期了吗？弱对象是 nil'ed - 因此您正在对“无”执行委托操作 - 也许您想要更多保留或`NSNotification`

我与代表一起练习的其他可能有用的事情

*   使用基于断言的编程？当您拥有具有所需功能的协议时，值得断言，即：`NSAssert(delegate, @"Error, delegate not set!");`
*   检查代理是否响应选择器
*   使用 GCD 异步调度委托调用，即：

    ```
    dispatch_async(dispatch_get_main_queue(), ^{
      if ([delegate_ respondsToSelector:@selector(updateUI:)]) 
        [delegate_ updateUI:self];
    }); 
    ```

希望这可以帮助！

# c# - app.config 中的当前日期

> ID：10315802
> 
> 赞同：0
> 
> 时间：2012-04-25T12:39:14.370
> 
> 标签：c#, app-config

我正在尝试使用 log4net 创建一个日志文件。我让它创建一个日志文件。但我无法将日志文件的名称设为当前日期。

我试过这个：

```
<file value="log\\$date.txt"/> 
```

但这只是让我在日志文件夹中使用一个名为“$date.txt”的文件。我希望将文件命名为“25-04-2012.txt”

任何人都知道使这项工作的小技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:50:03.017

从文档中，您应该使用 RollingFileAppender

> 此示例显示如何配置 RollingFileAppender 以在日期期间滚动日志文件。此示例将每分钟滚动一次日志文件！要更改滚动周期，请调整 DatePattern 值。例如，“yyyyMMdd”的日期模式将每天滚动。有关可用模式的列表，请参阅 System.Globalization.DateTimeFormatInfo。

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="logfile" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <datePattern value="yyyyMMdd-HHmm" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

[文档（搜索 rollingFileappender）](http://logging.apache.org/log4net/release/config-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:51:36.157

```
<appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
  <param name="File" value="C:\Akhila\logger\logger\bin\Debug\log-" />
  <param name="AppendToFile" value="true" />
  <rollingStyle value="Date" />
  <datePattern value="yyyy-MM-dd" />
  <staticLogFileName value="false" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
  </layout>
</appender> 
```

# sql - 执行时间溢出，无限制执行时

> ID：10315807
> 
> 赞同：1
> 
> 时间：2012-04-25T12:39:27.753
> 
> 标签：sql, performance, limit

当我使用此查询时，一切正常。5 结果在 0.3587 秒内。

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, 
`prod_combined`.`link` 
FROM `prod_combined` 
WHERE 
(
   prod_combined.sku IN 
       (
       SELECT 
       prod_combined.sku FROM 
       (
           SELECT prod_combined.sku FROM prod_billiger 
           INNER JOIN
           prod_combined ON prod_combined.sku = prod_billiger.sku 
           WHERE rangGesamt = 1 
           AND prod_combined.aktiv = 1 
       ) q 
       JOIN prod_combined ON prod_combined.sku = q.sku)
) 
AND (aktiv = 1)
LIMIT 0,5 
```

但是当我使用这个查询时，它会运行大约 3 分钟。

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, 
`prod_combined`.`link` 
FROM `prod_combined` 
WHERE 
(
   prod_combined.sku IN 
       (
       SELECT 
       prod_combined.sku FROM 
       (
           SELECT prod_combined.sku FROM prod_billiger 
           INNER JOIN
           prod_combined ON prod_combined.sku = prod_billiger.sku 
           WHERE rangGesamt = 1 
           AND prod_combined.aktiv = 1 
       ) q 
       JOIN prod_combined ON prod_combined.sku = q.sku)
) 
AND (aktiv = 1) 
```

我想要做什么：获取所有排名第一的产品（prod_billiger.rangGesamt）。我在“prod_billiger”表中得到这些信息。其他产品信息来自 prod_combined。

有没有办法加快速度？我需要过度考虑整个查询吗？

问候， 查奇2305

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:34:04.123

像这样的东西对你有用吗？

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link
FROM prod_combined AS pc 
WHERE pc.sku IN (
    SELECT sku
    FROM prod_billiger
    WHERE rangGesamt = 1
)
AND pc.aktiv=1 
```

我为 prod_combined ( `prod_combined AS pc`) 添加了一个同义词，只是为了使`select`语句更简洁。

如果您的表很小，或者如果您在 rangGesamt 和/或 aktiv 上有索引，这将很快运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:36:45.077

重写您的查询让我：

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined pc   
WHERE 
(
   pc.sku IN
       (
       SELECT 
       pc2.sku FROM
       (
           SELECT pc2.sku FROM 
           prod_billiger  pb
           INNER JOIN prod_combined pc2 ON pc2.sku = pb.sku
           WHERE pb.rangGesamt = 1
           AND pc2.aktiv = 1 
       ) q 
       JOIN prod_combined pc3 ON pc3.sku = q.sku
        )
) 
AND pc.aktiv = 1
; 
```

，这可能相当于：

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined  pc
WHERE pc.sku IN (
       SELECT q.sku 
       FROM (
           SELECT pc2.sku FROM 
           prod_billiger  pb
           INNER JOIN prod_combined pc2 ON pc2.sku = pb.sku
           WHERE pb.rangGesamt = 1
           AND pc2.aktiv = 1
           ) q
        )
AND pc.aktiv = 1
        ; 
```

可以进一步简化为：

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined  pc
WHERE EXISTS (
       SELECT *
          FROM prod_billiger  pb
          INNER JOIN prod_combined pc2 ON pc2.sku = pb.sku 
          WHERE pb.rangGesamt = 1 AND pc2.aktiv = 1
          AND pc.sku = pb.sku;
        )
AND pc.aktiv = 1
        ; 
```

如果“sku”是 prod_combined 的主键，子查询甚至可以进一步缩减，只包含“prod_billiger”。

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined  pc
WHERE EXISTS (
       SELECT *
          FROM prod_billiger  pb
          WHERE pc.sku = pb.sku;
          AND pb.rangGesamt = 1 AND pc2.aktiv = 1
        )
AND pc.aktiv = 1
        ; 
```

这或多或少等同于：

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined  pc
WHERE pc.sku IN (
       SELECT sku
       FROM prod_billiger  pb
       WHERE pb.rangGesamt = 1 
       )
AND pc.aktiv = 1
        ; 
```

如果 sku 也是 prod_billiger 的主要（或候选）键，则可以进一步简化为：

```
SELECT pc.sku, pc.titel, pc.preis_vk, pc.link pc
FROM prod_combined  pc
JOIN prod_billiger  pb ON pc.sku = pb.sku
WHERE pb.rangGesamt = 1
AND pc.aktiv = 1
        ; 
```

# c# - 将程序集加载到 AppDomain

> ID：10315808
> 
> 赞同：4
> 
> 时间：2012-04-25T12:39:30.523
> 
> 标签：c#, assemblies, appdomain

如果我使用

```
Assembly assembly = Assembly.LoadFrom(file); 
```

后来尝试使用该文件，我得到一个异常说明该文件正在使用中。

我需要将它加载到一个新的 appdomain 上。

我似乎找到的只是如何在程序集中创建实例的示例， **有没有办法加载整个程序集**。

我需要的是：

```
 (1) load the assembly into a new AppDomain from a file . 
 (2) extract an embedded  resource (xml file) from the Dll .
 (3) extract a type of class which implements an interface (which i know the interface type) .
 (4) unload the entire appdomain in order to free the file . 
```

**2-4没问题**

**我似乎无法找到如何将程序集加载到新的 AppDomin**中，只有创建实例的示例，这为我提供了来自 Dll 中的类的实例。

**我需要整件事。**

就像这个问题一样： Create instance 的另一个例子。

[将 DLL 加载到单独的 AppDomain](https://stackoverflow.com/questions/88717/loading-dlls-into-a-separate-appdomain)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:00:52.033

最基本的多域场景是

```
static void Main()
{
    AppDomain newDomain = AppDomain.CreateDomain("New Domain");
    newDomain.ExecuteAssembly("file.exe");
    AppDomain.Unload(newDomain);
} 
```

调用`ExecuteAssembly`单独的域很方便，但不提供与域本身交互的能力。它还要求目标程序集是可执行文件，并强制调用者进入单个入口点。为了结合一些灵活性，您还可以将字符串或参数传递给 .exe。

我希望这有帮助。

扩展：然后尝试以下操作

```
AppDomainSetup setup = new AppDomainSetup();
setup.AppDomainInitializer = new AppDomainInitializer(ConfigureAppDomain);
setup.AppDomainInitializerArguments = new string[] { unknownAppPath };
AppDomain testDomain = AppDomain.CreateDomain("test", AppDomain.CurrentDomain.Evidence, setup);
AppDomain.Unload(testDomain);
File.Delete(unknownAppPath); 
```

可以`AppDomain`按如下方式初始化

```
public static void ConfigureAppDomain(string[] args)
{
    string unknownAppPath = args[0];
    AppDomain.CurrentDomain.DoCallBack(delegate()
    {
        //check that the new assembly is signed with the same public key
        Assembly unknownAsm = AppDomain.CurrentDomain.Load(AssemblyName.GetAssemblyName(unknownAppPath));

        //get the new assembly public key
        byte[] unknownKeyBytes = unknownAsm.GetName().GetPublicKey();
        string unknownKeyStr = BitConverter.ToString(unknownKeyBytes);

        //get the current public key
        Assembly asm = Assembly.GetExecutingAssembly();
        AssemblyName aname = asm.GetName();
        byte[] pubKey = aname.GetPublicKey();
        string hexKeyStr = BitConverter.ToString(pubKey);
        if (hexKeyStr == unknownKeyStr)
        {
            //keys match so execute a method
            Type classType = unknownAsm.GetType("namespace.classname");
            classType.InvokeMember("MethodNameToInvoke", BindingFlags.InvokeMethod, null, null, null);
        }
    });
} 
```

# iphone - 生成自定义表格视图，表格视图单元格无法放入表格视图行

> ID：10315810
> 
> 赞同：0
> 
> 时间：2012-04-25T12:39:37.967
> 
> 标签：iphone

我创建了自定义表格视图。我将表格视图单元格添加到表格视图中，但表格视图单元格不适合表格视图行....我想为此做什么，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:41:48.453

[带有自定义单元格教程和工作示例代码的自定义表格视图](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-uiimage-and-uilabel-in-the-uitableview/)

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:42:45.273

你必须实施

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

并在此处返回自定义单元格的高度。

# mysql - MySQL 多选不明确的结果

> ID：10315812
> 
> 赞同：2
> 
> 时间：2012-04-25T12:39:55.263
> 
> 标签：mysql, select, phpmyadmin, where-clause, dml

使用 phpMyAdmin 5.1.44 试验 DML 命令。

我一直在关注在线教程。

```
SELECT book.b_isbn, publisher.p_name FROM 'book', 'publisher' WHERE book.b_title='DSA' 
```

**表格1**

```
book

b_id(PK)    b_isbn     b_title   p_id(FK)
-----------------------------------------
1           12345      DSA       1
2           23456      SD        1
3           34567      CSP       2 
```

**表 2**

```
publisher

p_id(PK)    p_name
--------------------
1           Fred
2           John 
```

**预期成绩**

```
b_isbn      p_name
---------------------
12345       Fred 
```

**实际结果**

```
b_isbn      p_name
----------------------
12345       Fred
34567       John 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:46:05.477

我认为您需要将 fk 放入 where 语句中的 pk 键

```
SELECT
    *
FROM
    book, publisher
WHERE
    book.p_id=publisher.p_id
    AND book.b_title='DSA' 
```

甚至更好地使用`JOIN`s：

```
SELECT
    *
FROM
   book
   JOIN publisher
     ON book.p_id=publisher.p_id
WHERE
   book.b_title='DSA' 
```

或者，如果您不确定是否有相应的值，请使用`left join`. 像这样：

```
SELECT
    *
FROM
   book
   LEFT JOIN publisher
     ON book.p_id=publisher.p_id
WHERE
   book.b_title='DSA' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:47:43.487

您需要告诉 MySQL 如何将表连接在一起（没有它，它只会将每本书与每个出版商匹配） - 使用以下任何一种：

1.  添加`AND publisher.p_id = book.p_id`到您的`WHERE`条款中；

2.  告诉 MySQL 加入`ON`那个条件/`USING`那个列；

    ```
    ... FROM book JOIN publisher ON publisher.p_id = book.p_id WHERE ... 
    ```

    或者

    ```
    ... FROM book JOIN publisher USING (p_id) WHERE ... 
    ```

3.  使用 a`NATURAL JOIN`让 MySQL 根据列名猜测这是您想要的。

    ```
    ... FROM book NATURAL JOIN publisher WHERE ... 
    ```

# rest - ASP.NET WEB API 中的电子邮件验证 URL

> ID：10315813
> 
> 赞同：0
> 
> 时间：2012-04-25T12:39:59.560
> 
> 标签：rest, restful-authentication, asp.net-mvc-4, asp.net-web-api

如何在 ASP.NET WEB API 中使用给定的 URL 进行电子邮件变体？

var Email="test@test.com" var key="122";

“http://localhost:50740/api/Users/VerifyEmail/”+邮箱+“/”+键

当我进入网络浏览器时，调试它

```
[HttpGet]
public HttpResponseMessage VerifyEmail(string email, string verificationKey)
{
}
   paramters of action method are always null. 
```

在 Global.asax.cs 我定义了以下路线

```
routes.MapHttpRoute(
                name: "EmailVerification",
                routeTemplate: "api/{controller}/{action}/{email}/{verificationKey}",
                defaults: new { action = "VerifyEmail", email = "", verificationKey = "" }
             ); 
```

基本上，我希望处理具有两个参数电子邮件和密钥的验证电子邮件。

您的回复将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:52:47.023

我通过将自定义路由移动到定义路由的顶部找到了解决方案。

# html - video.js(mobile)v 视频播放器的流畅设计

> ID：10315821
> 
> 赞同：2
> 
> 时间：2012-04-25T12:40:22.150
> 
> 标签：html, mobile

我使用 video.js 创建了一个用于在移动设备上观看视频的页面。代码片段：

```
<video id="intro_video" class="video-js vjs-default-skin"  controls poster='img' preload="auto" data-setup="{}">
 <source src="v.webm" type="video/webm" /> 
 <source src="v..ogg" type="video/ogg" /> 
 <source src="v.mp4" type="video/mp4" />  
       </video> 
```

我面临的问题是它采用默认宽度和高度。如果我在 CSS 中指定高度和宽度，它仍然会覆盖 .

我想为此提供一个解决方案，其中使用流体设计需要宽度和高度。

我使用了这个 CSS 解决方案：

```
@media only screen and (min-width: 992px) and (max-width: 1280px) {
#intro_video,#video_wrap {height:640px;
                 width:992px}

#intro_video_html5_api{height:640px;
                 width:992px}
}

/* VERTICAL TABLET LAYOUT: 768px - 991px
----------------------------------------------------------- */
@media only screen and (min-width: 768px) and (max-width: 991px) {
#intro_video,#video_wrap {height:480px;
                 width:640px}
#intro_video_html5_api{height:480px;
                 width:640px}
}

/* WIDE MOBILE LAYOUT: 480px - 767px
----------------------------------------------------------- */
@media only screen and (min-width: 480px) and (max-width: 767px) {
    #intro_video {height:320px;
                 width:480px}
 #intro_video_html5_api   {height:320px;
                 width:480px}
} 
```

但这对我没有帮助。

# c - 暂停/恢复所有用户进程 - 这可能吗？

> ID：10315823
> 
> 赞同：1
> 
> 时间：2012-04-25T12:40:26.237
> 
> 标签：c, windows, multithreading, winapi, multiprocessing

我的 PC 有很多应用程序同时运行，我在想是否可以暂停所有应用程序，我想这样做以定期运行另一个使用大量 CPU 的应用程序，所以希望它拥有所有处理器时间. 问题是我想暂停所有应用程序运行我经常使用 CPU 的东西，然后当我的东西退出时，恢复所有应用程序并恢复所有工作......

欢迎任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:48:15.313

这是可能的，但根本不推荐。

设置进程和线程优先级，以便您的应用程序将获得更大的 CPU 份额。这也意味着它不会像您的方法那样杀死桌面、任何网络连接、防病毒、开始菜单、窗口管理器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-12T12:56:51.963

您可能会保留一个您自己手动生成的程序列表，其中列出了要求太高的程序（例如，（坏）示例，Steam.exe、chrome.exe、90GB-video-game.exe 等）。基本上，您可以获得所有正在运行的进程的完整列表，在该列表中搜索所有列入黑名单的名称，以及 NtSuspendProcess/NtResumeProcess（如果您需要允许它在将来再次运行）。

我不认为暂停*所有*用户进程是一个好主意。其中大部分都受到了奇怪的保护，可能应该继续运行，无论如何，这是一场艰苦的战斗，收获甚微。

正如另一个答案中提到的，如果您有权这样做，您当然可以调整您的流程优先级。这会对 OS 范围内的进程列表进行排序，有利于您的进程，因此您首先获得 CPU 时间。

这是与您的原始请求类似的示例。我正在用 C++ 编写一个需要这个确切功能的程序，所以我想我会帮忙的。这将找到 Steam.exe 或 chrome.exe，并将找到的第一个暂停 10 秒。然后将恢复它。如果您在窗口暂停时尝试与窗口交互，这将在 Windows 上显示为“无响应”。有些应用程序可能不喜欢被挂起，YMMV。

```
/*Find, suspend, resume Win32 C++
 *Written by jimmio92\. No rights reserved. Public domain. 
 *NO WARRANTY! NO LIABILITY! (obviously)
*/

#include <windows.h>
#include <psapi.h>

typedef LONG (NTAPI *NtSuspendProcess)(IN HANDLE ProcessHandle);
typedef LONG (NTAPI *NtResumeProcess)(IN HANDLE ProcessHandle);
NtSuspendProcess dSuspendProcess = nullptr;
NtResumeProcess dResumeProcess = nullptr;

int get_the_pid() {
    DWORD procs[4096], bytes;
    int out = -1;

    if(!EnumProcesses(procs, sizeof(procs), &bytes)) {
        return -1;
    }
    for(size_t i = 0; i < bytes/sizeof(DWORD); ++i) {
        TCHAR name[MAX_PATH] = "";
        HMODULE mod;
        HANDLE p = nullptr;
        bool found = false;

        p = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, procs[i]);

        if(p == nullptr)
            continue;

        DWORD unused_bytes_for_all_modules = 0;

        if(EnumProcessModules(p, &mod, sizeof(mod), &unused_bytes_for_all_modules)) {
            GetModuleBaseName(p, mod, name, sizeof(name));

            //change this to use an array of names or whatever fits your need better
            if(strcmp(name, "Steam.exe") == 0 || strcmp(name, "chrome.exe") == 0) {
                out = procs[i];
                found = true;
            }
        }

        CloseHandle(p);
        if(found) break;
    }

    return out;
}

void suspend_process_by_id(int pid) {
    HANDLE h = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);

    if(h == nullptr)
        return;

    dSuspendProcess(h);
    CloseHandle(h);
}
void resume_process_by_id(int pid) {
    HANDLE h = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);

    if(h == nullptr)
        return;

    dResumeProcess(h);
    CloseHandle(h);
}

void init() {
    //load NtSuspendProcess from ntdll.dll
    HMODULE ntmod = GetModuleHandle("ntdll");

    dSuspendProcess = (NtSuspendProcess)GetProcAddress(ntmod, "NtSuspendProcess");
    dResumeProcess = (NtResumeProcess)GetProcAddress(ntmod, "NtResumeProcess");
}

int main() {
    init();

    int pid = get_the_pid();
    if(pid < 0) {
        printf("Steam.exe and chrome.exe not found");
    }

    suspend_process_by_id(pid);

    //wait ten seconds for demonstration purposes
    Sleep(10000);

    resume_process_by_id(pid);

    return 0;
} 
```

# c# - 使用 xsd:includes 生成 XSD 代码 (C#)

> ID：10315828
> 
> 赞同：1
> 
> 时间：2012-04-25T12:40:37.543
> 
> 标签：c#, xsd, include

我在使用 xsd.exe（.NET SDK 提供的那个）和 Xsd2Code（[http://xsd2code.codeplex.com/](http://xsd2code.codeplex.com/)）生成代码时遇到问题。

我有以下 XSD 文件设置：

*   通用.xsd
*   摘要.xsd
*   细节.xsd

Common 定义了一些在 Summary 和 Detail 中都使用的类型，因此 Summary 和 Detail 都包含该行`<xs:include schemaLocation="Common.xsd" />`。

现在我尝试的所有 XSD 代码生成工具的问题是它们只采用顶级类型（即摘要/详细信息）的 XSD 文件并在 ONE 命名空间中创建类。

这样做的问题是，如果我使用这些工具，我会得到 Common.xsd 中每种类型的 2 个精确副本（Namespace.Summary.CommonType 和 Namespace.Detail.CommonType）。当我想在代码中使用它们时，我总是必须在它们之间进行转换（基本上只是复制所有值），这非常麻烦，并导致大量开销和混乱。

是否有任何 XSD 代码生成工具可以更好地处理包含（即将包含的类型放入自己的命名空间并且只生成一次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:26:32.170

Xsd2Code 处理这种情况，您只需为每个 xsd 文件运行多次命令，指定命名空间。

```
xsd2code Common.xsd MyNamespace MyNamespace\Common.cs
xsd2code Summary.xsd MyNamespace MyNamespace\Summary.cs /eit+
xsd2code Detail.xsd MyNamespace MyNamespace\Detail.cs /eit+ 
```

每个 xsd 文件都将生成到自己的源代码文件中（可选地在不同的命名空间中）。/eit+ 开关表示 xsd2code 不会将包含的模式类型生成到该文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:08:16.923

您应该尝试在命令行中列出所有 XSD 文件，它应该可以解决所有问题，但希望不适用于您的情况。

请看一下[这篇文章](https://stackoverflow.com/questions/9698255/how-to-work-with-different-xsd-namespaces-that-contains-the-same-elements-classe/9701545#9701545)，也在 SO 上，它准确地显示了你需要做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T15:10:57.223

Xsd2Code 中的以下方法始终返回 true：

```
Xsd2Code.Library.Extensions.CodeExtension.ContainsTypeName(XmlSchema schema, CodeTypeDeclaration type) 
```

这可以防止排除包含的 xml 模式项。

# vb.net - VB.NET 中的 NDESK 命令行解析

> ID：10315830
> 
> 赞同：2
> 
> 时间：2012-04-25T12:40:43.803
> 
> 标签：vb.net, parsing, command-line, parameters

尽管我尝试了很多次，但我无法将 NDESK.Options 解析示例转换为简单的 vb.net 代码（对不起，我不是专业人士）。

他们提供的唯一示例可在此处获得： [http ://www.ndesk.org/doc/ndesk-options/NDesk.Options/OptionSet.html](http://www.ndesk.org/doc/ndesk-options/NDesk.Options/OptionSet.html)

但是，我不理解代码的这个关键部分：

```
var p = new OptionSet () {
        { "n|name=", "the {NAME} of someone to greet.",
          v => names.Add (v) },
        { "r|repeat=", 
            "the number of {TIMES} to repeat the greeting.\n" + 
                "this must be an integer.",
          (int v) => repeat = v },
        { "v", "increase debug message verbosity",
          v => { if (v != null) ++verbosity; } },
        { "h|help",  "show this message and exit", 
          v => show_help = v != null },
    }; 
```

这部分：v => names.Add (v) 得到以下 vb.net 等效项：Function(v) names.Add (v)，我不明白。

任何人都可以如此友善并将其发布在一组更易于理解的命令中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:55:01.500

这是 NDesk.Options OptionSet 对象的上述代码的 VB.NET 版本。
此代码示例使用集合初始值设定项。

```
Static names = New List(Of String)()
Dim repeat As Integer
Dim verbosity As Integer
Dim show_help As Boolean = False

Dim p = New OptionSet() From {
 {"n|name=", "the {NAME} of someone to greet.", _
     Sub(v As String) names.Add(v)}, _
 {"r|repeat=", _
     "the number of {TIMES} to repeat the greeting.\n" & _
     "this must be an integer.", _
     Sub(v As Integer) repeat = v}, _
 {"v", "increase debug message verbosity", _
     Sub(v As Integer) verbosity = If(Not IsNothing(v), verbosity + 1, verbosity)}, _
 {"h|help", "show this message and exit", _
     Sub(v) show_help = Not IsNothing(v)}
 } 
```

此代码示例创建 OptionSet 集合，然后调用 Add 方法添加每个选项。此外，请注意最后一个选项是传递函数的函数指针 (AddressOf) 的示例。

```
Static names = New List(Of String)()
Dim repeat As Integer
Dim verbosity As Integer
Dim show_help As Boolean = False

Dim p = New OptionSet()
p.Add("n|name=", "the {NAME} of someone to greet.", _
            Sub(v As String) names.Add(v))
p.Add("r|repeat=", _
            "the number of {TIMES} to repeat the greeting.\n" & _
            "this must be an integer.", _
            Sub(v As Integer) repeat = v)
p.Add("v", "increase debug message verbosity", _
            Sub(v As Integer) verbosity = If(Not IsNothing(v), verbosity + 1, verbosity))
p.Add("h|help", "show this message and exit", _
            Sub(v) show_help = Not IsNothing(v))
' you can also pass your function address to Option object as an action.
' like this:
p.Add("f|callF", "Call a function.", New Action(Of String)(AddressOf YourFunctionName )) 
```

# python - 比 C 等价物更快的搜索 python 脚本

> ID：10315834
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:40:54.890
> 
> 标签：python, c, performance, multiprocessing

对于我的研究，我需要处理生物序列（fasta 格式）的巨大文本文件（10gi），更准确地说，我必须将具有特定 ID 的特殊特定序列放入其中。fasta 序列是这样的：

>id|id_number（例如 102574）|东西

ATGCGAT.. ATGTC..（多行）

所以我编写了脚本来搜索这些大文件的块，以便使用 python 的多处理库并行化我的搜索（并使用我的 8 cpu）

我注入我的多进程类的函数如下：

```
idlist=inP[0] # list of good id 
    filpath=inP[1] # chunck of the big file
    idproc=inP[2]   # id of the process

    #######################
    fil=filpath.split('\n')
    del filpath
    f=open('seqwithid{0}'.format(idproc),'w')
    def lineiter():
        for line in fil:
            yield line
    it=lineiter()
    line=it.next()

    while 1:
        try:
            ids=line.split('|')[1].split('locus')[0].partition('ref')[0]
            #print ids
            while ids[0].isalpha():
                ids=ids[1:]
        except Exception:
            pass
        else:
            if ids in idlist: 
                f.write(line+'\n')
                while 1:
                    try:
                        line=it.next()
                    except Exception:
                        break
                    if line and line[0]!='>':
                        f.write(line+'\n')
                    else:
                        break
        try:                
            line=it.next()
        except Exception:
            break
        while  not line or line[0]!='>':
            try:
                line=it.next()
            except Exception:
                break
    f.close() 
```

为了提高速度，我用 4 个函数用 C 重写了这段代码：

我将文件切成块：

```
f1=fopen(adr, "r");
if (f1==0){printf("wrong sequences file: %s\n",adr);exit(1);}

fstream = (char *) malloc((end-begin)*sizeof(char) );
fseek(f1,begin,SEEK_CUR);
fread(fstream,sizeof(char)*(end-begin-1),1,f1);
adrtampon=fgetc(f1);

while (!(feof(f1)) && adrtampon!=ter)
{
    sprintf(fstream,"%s%c",fstream,adrtampon);
    adrtampon=fgetc(f1);
}
fclose(f1); 
```

我使用 run trought 带有 main 函数的块，直到找到一个 '>' 字符：

```
adrtampon=fstream[0];   
i=0;

while(adrtampon!='\0' )
{
    adrtampon=fstream[i];
    if (adrtampon==ter)
    {
        sprintf(id,"%s",seekid((fstream+i)));

        if (checkidlist(id,tab,size)==0) 
        {
            i++;
            fputc('>',f2);
            adrtampon=fstream[i];
            while (adrtampon!='\0' &&  adrtampon!=ter)  
            {
                fputc(adrtampon,f2);
                i++;
                adrtampon=fstream[i];
            }
            i--;
        }
    }
    i++;
} 
```

当我找到'>'时，我首先提取两个'|'之间的序列的id 然后我用另一个简单的函数（类似于 idlist 中的 if id）循环我的 intersting id 库然后用仍然使用多处理类的 python 函数调用这个函数最后......我用 C 代码获得比python代码，即使只有一个进程。（当我直接处理文件而不是块时，我使用 C 获得更好的性能，但由于对多进程文件的并发访问（我认为）只有一个进程））任何改进我的 C 代码并解释原因的建议它比python中的同等速度慢？？？？？？多谢！！（特别是如果你已经阅读到这里！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:07:45.990

可能一个 10GB 的文件不适合内存（如果它适合内存，你可以像我在[这里](https://stackoverflow.com/a/7672351/905902)做的那样做。）所以读取和处理它的唯一方法是：读取一部分，处理那部分，读取下一部分. 如果 linelength 有限， fgets() 是最优雅的。否则，您可以一次读取一个字符并使用小型状态机进行处理。读取缓冲区大小的块是可能的，但更难，因为逻辑行将跨越缓冲区边界。

# android - InputStream 中的 Drawable 随 ViewFlipper 发生变化

> ID：10315836
> 
> 赞同：1
> 
> 时间：2012-04-25T12:41:00.780
> 
> 标签：android

我有一个选项卡式应用程序，它有 5 个选项卡。应用程序中的图像是从网络调用中获取的，因此在 tab1 中，例如第一个活动，会进行一个返回图像的网络调用。我正在使用此代码

```
 urln = new URL("http://10.84.4.2:8083/imageFolder/General/backgroundcurved.png");
    con = (HttpURLConnection) urln.openConnection();
    is = con.getInputStream();
    curvedBG = Drawable.createFromStream(is, "CurvedBG");
    is.close(); 
```

这可以很好地检索图像，并且对所有图像都这样做。但是，我注意到一个我似乎无法解决的相当烦人的问题。当我从视图中翻转，然后翻转回来时，图像大小似乎发生了变化。

一开始我以为是网上的图片有问题。所以为了确认这一点，我改变了它，而不是来自在线的图像，它们来自可绘制文件夹中的离线。所以我做了这个

```
 Drawable test;
InputStream testStream;

Resources res = getResources();
    test = Drawable.createFromStream(res.openRawResource(R.drawable.backgroundcurved), "test"); 
```

（目前，我制作了这些全局变量，以便所有活动都可以调用这些图像）

然而，同样的问题发生了。但问题比这更奇怪。在选项卡一中，您可以访问设置屏幕，然后您可以从那里切换到菜单 1 或菜单 2。如果菜单 1 使用测试可绘制对象，那么它可以正常工作，但是如果菜单 1 和菜单 2 都使用它测试drawable，然后如果我翻转到菜单1，回到设置，然后到菜单2，回到设置，然后到菜单1，然后我第二次访问菜单1，drawable已经缩小到它的一半大小，并且但是菜单 2 上的图像很好。如果我反过来做，即访问菜单 2，然后访问菜单 1，然后再次访问菜单 2。然后菜单 2 中的图像混乱，但菜单 1 中的图像很好。

我只是不知道为什么会发生这种情况。是否有太多页面调用相同的 Drawable？或者这是viewflipper搞砸图像的问题？

如果有人能指出我正确的方向，将不胜感激

编辑：

我也尝试使用这种方法获取图像

```
 public Object fetch(String address) throws MalformedURLException,
        IOException
{
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
}

private Drawable ImageOperations(Context ctx, String url)
{
    try
    {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e)
    {
        return null;
    } catch (IOException e)
    {
        return null;
    }
} 
```

正如我听说的那样，这可以解决尺寸问题，但同样的问题也会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:00:26.313

修复问题，必须在每次页面加载时重置图像

# iphone - 在我的 phonegap iphone 应用程序中加载 youtube 视频

> ID：10315837
> 
> 赞同：0
> 
> 时间：2012-04-25T12:41:04.687
> 
> 标签：iphone, cordova, youtube

大家好，我正在尝试在 iPhone 上的 phonegap 应用程序中使用 iframe 方法加载 youtube/Dailymotion 视频，但每次播放视频时都会弹出警报消息，提示无法播放这部电影，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:37:10.937

您是否尝试过播放非商业视频，例如教程或其他内容？如果播放，您至少知道可以播放某些视频。播放某些视频可能会受到限制。

# android - 如何在 Android 中及时聆听变化

> ID：10315840
> 
> 赞同：1
> 
> 时间：2012-04-25T12:41:05.800
> 
> 标签：android, android-intent

如果电话时间变了，我需要做一些动作。如何聆听时间变化？

更具体地说，我想在用户输入的特定日期到来时发送短信。

我通过服务运行它。关键是我需要经常检查发送短信的日期是否到了

```
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.telephony.gsm.SmsManager;

public class SmsService extends Service{
    String date, messege, numberphone;
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        date=intent.getStringExtra("date"); 
        String[] dateArray = date.split(",");
        Date dateTime = new Date();

        if(dateArray[0].equals(Integer.toString(dateTime.getDate(
                ))) &&dateArray[1].equals(Integer.toString(dateTime.getMonth(
                ))) && dateArray[2].equals(Integer.toString(dateTime.getYear())))   
            sendSMS(intent.getStringExtra("numberphone"),intent.getStringExtra("message"));
        return super.onStartCommand(intent, flags, startId);
    }

    @SuppressWarnings("deprecation")
    private void sendSMS(String phoneNumber, String message)
    {        
        PendingIntent pi = PendingIntent.getActivity(this, 0,
                new Intent(this, SmsActivity.class), 0);

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    }  

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:10:38.820

使用操作创建一个 BroadCastReceiver`"android.intent.action.TIME_SET"`并设置 Receiver 类。

在 AndroidManifest 文件中，

```
 <receiver android:name=".MyReceiver">
            <intent-filter >
                <action android:name="android.intent.action.TIME_SET"/>
            </intent-filter>
 </receiver> 
```

您的广播接收器类

`MyReceiver.java`

```
public class MyReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(final Context arg0, Intent arg1) {
        Log.d("MyReceiver", "Time Changed");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T08:01:05.797

getActivity().registerReceiver(networkreceiever,new IntentFilter("android.intent.action.TIME_SET"));

但问题是，在更改日期时，接收器已经被销毁，因为我在活动暂停时取消注册接收器。

# mysql - MySql REGEXP 运算符

> ID：10315841
> 
> 赞同：3
> 
> 时间：2012-04-25T12:41:10.760
> 
> 标签：mysql, regex, operators

mySql REGEXP 运算符不区分大小写。此运算符是否有区分大小写的**版本**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:44:44.150

使用`BINARY`关键字，强制`REGEXP`将字符串匹配为二进制字符串，这是区分大小写的。

```
SELECT 'a' REGEXP 'A', 'a' REGEXP BINARY 'A'; 
```

尽管[文档中没有明确说明](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)这一点（您可以使用常规字符串执行此操作），但根据我的经验，它可以按预期工作。

# android - 如何访问用户对移动设备的呼叫？

> ID：10315848
> 
> 赞同：0
> 
> 时间：2012-04-25T12:41:29.967
> 
> 标签：android

我希望在用户拨打特定电话时激活我的应用程序。有什么方法可以获取用户在同一时间（而不是后记）拨打电话的信息，以便在正确的时间激活应用程序？

好的，我为我的案例编写了这段代码，它可以工作：

```
public class OutgoingCallReceiver extends BroadcastReceiver  {

        public void onReceive(Context context, Intent intent) {
                Bundle bundle = intent.getExtras();

                if(null == bundle) return;

                String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

                if( phonenumber.equals("11111111") ) {

                    Intent myactivity = new Intent(context, MyKeyboard.class);
                    myactivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(myactivity);

                }

        }

} 
```

在清单中我添加了这个：

```
<receiver 
            android:name=".OutgoingCallReceiver"
            android:enabled="true"> 
                   <intent-filter> 
                      <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
                   </intent-filter> 
</receiver>

<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:49:34.793

我真的不知道，但我认为这是一种非常危险的做法。这一切都取决于你打算用你的应用程序做什么。如果它是一个录音应用程序，我认为你甚至不能考虑开发它，或者不要在互联网上发布它，因为它在许多国家都是非法的。这就是我的看法和感受你的问题。关于 Android 没有 15k 的地方可以搜索，看看 android API。

[http://developer.android.com/reference/android/provider/CallLog.Calls.html](http://developer.android.com/reference/android/provider/CallLog.Calls.html)

例如，我不知道它是否是实时日志，或者是否在呼叫终止后填充。但是你可以朝那个方向搜索。

# .net - 哪些对象可以用作 Visual Studio 中的数据源？

> ID：10315849
> 
> 赞同：0
> 
> 时间：2012-04-25T12:41:32.170
> 
> 标签：.net, visual-studio

我对 Visual Studio 中的数据源感到沮丧。我想使用一个对象作为我的报告的数据源。据我了解，VS 仅了解公共属性和数据表。但我想使用`List<Image>`我的对象中的 a 。可能吗？

编辑：对于评论者。如果您选择具有表格或公共属性的对象，则该表格将显示在数据源窗口中，并且可以拖动到控件上或在 reportviewer 中选择或其他。`List<Image>`在数据源窗口中不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:44:10.067

该类实现了 IEnumerable 接口，可以作为 DOTNET 中的数据源提供，例如：Dataset、Datatable、List、Array 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:53:17.753

尝试阅读问题中的空白...*听起来*您想将 a 添加`BindingSource`到表单中，然后在该源的属性上，选择`DataSource`，选择“添加项目数据源...”，选择`Object`，然后展开命名空间/类型树以选择您将绑定的类型。

然后在运行时，将*实际*列表分配给`.DataSource`.

坦率地说，我真的不会打扰 - 只需在运行时连接它就可以了，并且避免了 IDE 中的很多混乱。

# java - 如何区分 Sorted 集合中的两个 equals 对象？

> ID：10315850
> 
> 赞同：3
> 
> 时间：2012-04-25T12:41:32.830
> 
> 标签：java, guava, apache-commons

我可能错了，但对我来说，我们可以为一个对象覆盖 equals，这样你就可以认为它们有意义地相等。映射中的所有条目都有不同的键，集合中的所有条目都有不同的值（没有意义地等于）

但是当使用 TreeMap 或 TreeSet 时，您可以提供一个比较器。我注意到，当提供比较器时，对象的 equals 方法被绕过，当比较器返回 0 时，两个对象被认为是相等的。因此，我们有 2 个对象，但在映射键集或集合中，只保留了一个。

我想知道是否有可能使用排序集合来区分两个不同的实例。

这是一个简单的示例：

```
public static void main(String[] args) {
    TreeSet<String> set = new TreeSet<String>();
    String s1 = new String("toto");
    String s2 = new String("toto");
    System.out.println(s1 == s2);
    set.add(s1);
    set.add(s2);
    System.out.println(set.size());
} 
```

请注意，使用 new String("xxx") 绕过了字符串池的使用，因此 s1 != s2。我想知道如何实现一个比较器，以便设置大小为 2 而不是 1。

主要问题是：对于相同字符串值的两个不同实例，我如何在比较器中返回一些东西！= 0？

请注意，我希望该比较器遵守规则：

> 比较它的两个参数的顺序。返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。实现者必须确保所有 x 和 y 的 sgn(compare(x, y)) == -sgn(compare(y, x))。（这意味着当且仅当 compare(y, x) 抛出异常时 compare(x, y) 必须抛出异常。）
> 
> 实现者还必须确保关系是可传递的： ((compare(x, y)>0) && (compare(y, z)>0)) 意味着 compare(x, z)>0。
> 
> 最后，实现者必须确保 compare(x, y)==0 意味着所有 z 的 sgn(compare(x, z))==sgn(compare(y, z))。
> 
> 通常是这样，但并不严格要求 (compare(x, y)==0) == (x.equals(y))。一般来说，任何违反此条件的比较器都应清楚地表明这一事实。推荐的语言是“注意：这个比较器强加了与等于不一致的排序。”

我可以使用以下技巧：

```
public int compare(String s1,String s2) {
  if s1.equals(s2) { return -1 }
  ...
} 
```

它似乎工作正常，但由于 compare(s1,s2) != -compare(s2,s1) 没有遵守规则

那么这个问题有什么优雅的解决方案吗？

* * *

**编辑：对于那些想知道我为什么问这样的事情的人。这更多是出于好奇，而不是任何现实生活中的问题。**

但我已经遇到过这样的情况，虽然关于这个问题的解决方案：

想象一下你有：

```
class Label {
  String label;
} 
```

对于每个标签，您都有一个关联的字符串值。现在，如果你想要一个地图，标签-> 值怎么办。但是现在，如果您希望能够拥有与地图键相同的两倍标签怎么办？Ex "label" (ref1) -> value1 "label" (ref2) -> value2 您可以实现 equals 以便两个不同的 Label 实例不相等 -> 我认为它适用于 HashMap。

但是，如果您希望能够按字母顺序对这些 Label 对象进行排序呢？您需要提供比较器或实现可比较。但是我们如何才能区分具有相同标签的 2 个标签呢？我们必须！compare(ref1,ref2) 不能返回 0。但它应该返回 -1 还是 1 ？我们可以比较内存地址或类似的东西来做出这样的决定，但我认为这在 Java 中是不可能的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:46:44.117

如果您使用的是 Guava，则可以使用[`Ordering.arbitrary()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html#arbitrary%28%29)，这将对元素施加额外的顺序，这些顺序在 VM 的生命周期内保持一致。您可以使用它以一致的方式打破 Comparator 中的联系。

但是，您可能使用了错误的数据结构。您是否考虑过使用允许添加多个实例的`Multiset`（例如）？`TreeMultiset`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T18:26:21.913

尝试使用以下比较器（例如）：

```
Comparator<String> comp = Ordering.natural().compound(Ordering.arbitrary()); 
```

这将根据它们的自然 Comparable 排序对事物进行排序，但是当自然排序相等时，它将退回到任意排序，以便不同的对象保持不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:48:34.770

我不确定这样做是不是个好主意。从 javadoc 为`Comparator`：

> 当使用能够施加与等于不一致的排序的比较器来对排序集（或排序映射）进行排序时，应谨慎行事。假设带有显式比较器 c 的有序集合（或有序映射）与从集合 S 中提取的元素（或键）一起使用。如果 c 对 S 施加的排序与 equals 不一致，则有序集合（或有序映射）将表现得“奇怪”。特别是有序集合（或有序映射）将违反集合（或映射）的一般合同，它是根据等式定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:55:11.857

您可能想要使用 a`SortedSet<Collection<String>>`或类似的，因为 - 正如您所提到的 - sorted 不允许您添加多个相等的条目。

或者，您可以使用 Guava 的[MultiSet](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)。

从 JavaDoc 开始`SortedSet`：

> 请注意，如果有序集合要正确实现 Set 接口，则由有序集合维护的排序（无论是否提供显式比较器）必须*与 equals 一致。*

但是，仍然存在一个问题：为什么要拥有两个逻辑上相等的不同实例（这就是`equals()`实际含义）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:51:43.277

如果您想要一个具有相同对象的排序集合，您可以将所有对象放在一个列表中并使用 Collections.sort()。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-25T12:54:37.363

只有当两个引用引用同一个对象时，比较器实际上才应该返回 0，如下所示：

```
public int compare(String s1,String s2) {
   if (s1!=s2) { 
      int result = s1.compareTo(s2);
      if (result == 0) {
          return -1;
      } else {
          return result;
      }
   } else {
      return 0;
   } 
} 
```

# selenium - 带有 safari 浏览器的 Selenium Grid

> ID：10315855
> 
> 赞同：1
> 
> 时间：2012-04-25T12:41:47.073
> 
> 标签：selenium, selenium-grid

请帮助我如何在硒网格中实例化 Safari

```
 capabilities = new DesiredCapabilities();
            // Version browser
            capabilities.setVersion(versaoBrowser);
            capabilities.setBrowserName("safari");
            capabilities.setJavascriptEnabled(true);
            // Platform test runner
            capabilities.setPlatform(platform); 
```

在服务器上是 weel

```
-browser "browserName=safari,version=5,platform=WINDOWS,javascriptEnable=true" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:44:41.827

如果问题是关于以新方式使用 Safari，SafariDriver over Grid2，那么这将是我相信的典型方法（或多或少）：

```
import org.openqa.selenium.*;
import org.openqa.selenium.remote.*;
import java.net.*;

DesiredCapabilities c = new DesiredCapabilities();
c.setBrowserName("safari");
/* you can then set version & platform as well, but the minimum is just browser. Maybe for Grid2 you need the others, but for remote web driver only, you don't.
*/

WebDriver d = new RemoteWebDriver(new URL("http://hubIpOrHostname:hubPort/wd/hub"),c); 
```

这应该有效。在服务器端，我相信您只是根据 wiki 文档为 Grid2 正常实例化（最后我检查，现在可能不同）：

//启动集线器 java -jar selenium-server-standalone-2.21.0.jar -role hub -port theHubPort

//启动节点 java -jar selenium-server-standalone-2.21.0.jar -role node -hub http://172.22.6.198:4446/wd/hub -port theNodePort

但是，当前的 Grid2 似乎不提供 Safari 支持。当我在集线器中查找已注册节点的控制台时，它没有显示 Safari 的图标。也许我错过了什么。下次我会尝试添加平台和版本，看看是否会产生差异，但认为不会。

这是我使用 SafariDriver 为 Grid2 得到的错误片段：

2012 年 5 月 11 日下午 6:01:11 org.openqa.selenium.remote.RemoteWebDriver 执行信息：执行：[null，newSession {"desiredCapabilities":"Capabilities [{browse rName=safari}]"}] // 错误： // 未捕获的异常：类型变量声明：对象构造函数：在第 7 行：在文件中：：new RemoteWebDriver (new URL ("http://172.22.6.198:4446/wd/hub"), c)

目标异常：org.openqa.selenium.WebDriverException：转发新会话时出错，找不到：{browserName=safari} 命令持续时间或超时：109 毫秒

**注意：**对于 webdriver，相同的代码可用于（独立）远程 webdriver 执行与网格，不同之处在于对于远程，您使用远程服务器 ip，而对于 grid2，您使用集线器 ip。SafariDriver 在远程 webdriver 上工作，但目前似乎还没有在 Grid2 上工作。

远程 webdriver 启动：

java -jar selenum-server-standalone-2.21.0.jar [-port somePort] //默认端口4444

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:26:11.783

我相信你要的是这样的东西？

```
selenium = new DefaultSelenium("localhost", 4444, *safari,"http://google.com.au");
selenium.start(); 
```

我通常使用 WebDriver，但我的理解是功能是创建浏览器实例时的选项，而不是打开浏览器本身。虽然我可能错了，因为我对 Selenium Grid 没有经验。

编辑：[这](http://darrellgrainger.blogspot.com.au/2011/02/using-selenium-20-with-webdriver-and.html)和[这](http://qtp-help.blogspot.com.au/2011/08/selenium-grid-for-browser-compatibility.html)可能会有所帮助。

# c# - 获取线程列表

> ID：10315862
> 
> 赞同：46
> 
> 时间：2012-04-25T12:42:09.060
> 
> 标签：c#, multithreading, list

我想列出所有正在运行的线程，但不使用`List<>`该类。我想动态观察正在运行的线程。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2016-02-22T16:02:36.383

## 方法一：获取操作系统线程

这将获取操作系统线程列表：

```
ProcessThreadCollection currentThreads = Process.GetCurrentProcess().Threads;

foreach (ProcessThread thread in currentThreads)
{
} 
```

## 方法二：获取托管线程

托管线程位于操作系统线程之上。ID 是不同的，理论上，多个托管线程可能位于单个操作系统线程之上（尽管我实际上没有观察到这一点）。

事实证明，获得托管线程比实际应该的要棘手。

### 方法 2.1：获取托管线程的最简单代码

1.  查看[GitHub 上的 Microsoft.Diagnostics.Runtime](https://github.com/Microsoft/clrmd)。
2.  安装 NuGet 包[CLR 内存诊断 (ClrMD)](https://www.nuget.org/packages/Microsoft.Diagnostics.Runtime)。

然后，您可以使用所述 NuGet 包附加到您自己的进程，并读出托管线程：

```
using Microsoft.Diagnostics.Runtime;

using (DataTarget target = DataTarget.AttachToProcess(
    Process.GetCurrentProcess().Id, 5000, AttachFlag.Passive))
{
    ClrRuntime runtime = target.ClrVersions.First().CreateRuntime();
    foreach (ClrThread thread in runtime.Threads)
    {
    }
} 
```

### 方法 2.2：如何通过堆栈跟踪搜索托管线程的示例

不幸的是，我找不到任何方法来按线程名称搜索线程列表。

然而，一切并没有丢失：这是一个如何创建托管线程的示例，然后通过在堆栈帧中搜索命名空间上的匹配项来找到它，然后打印出它的属性：

```
namespace MyTest
{
    int managedThreadId = 0;
    var task = Task.Run(
        () =>
        {
            // Unfortunately, cant see "Testing" anywhere in result returned
            // from NuGet package ClrMD ...
            Thread.CurrentThread.Name = "Testing";
            Thread.Sleep(TimeSpan.FromDays(1));
        });

    // ... so we look for our thread by the first word in this namespace.
    string startOfThisNamespace = this.GetType().Namespace.ToString().Split('.')[0]; // Is "MyTest".
    using (DataTarget target = DataTarget.AttachToProcess(Process.GetCurrentProcess().Id, 5000, AttachFlag.Passive))
    {
        ClrRuntime runtime = target.ClrVersions.First().CreateRuntime();

        foreach (ClrThread thread in runtime.Threads)
        {
            IList<ClrStackFrame> stackFrames = thread.StackTrace;

            List<ClrStackFrame> stackframesRelatedToUs = stackFrames
                .Where(o => o.Method != null && o.Method.ToString().StartsWith(startOfThisNamespace)).ToList();

            if (stackframesRelatedToUs.Count > 0)
            {
                Console.Write("ManagedThreadId: {0}, OSThreadId: {1}, Thread: IsAlive: {2}, IsBackground: {3}:\n", thread.ManagedThreadId, thread.OSThreadId, thread.IsAlive, thread.IsBackground);
                Console.Write("- Stack frames related namespace '{0}':\n", startOfThisNamespace);
                foreach (var s in stackframesRelatedToUs)
                {
                    Console.Write("  - StackFrame: {0}\n", s.Method.ToString());
                }
            }
        }
    }
} 
```

您还可以通过保存`ManagedThreadId`在您创建的线程中找到正确的匹配项，然后在`runtime.Threads`.

## 测试

使用以下所有组合进行测试：

*   视觉工作室 2015 SP1
*   .NET 4.5
*   .NET 4.6.0
*   .NET 4.6.1
*   C# 5.0
*   C# 6.0

## 参考

请参阅[创建运行时时 ClrMd 引发异常](https://stackoverflow.com/questions/31633541/clrmd-throws-exception-when-creating-runtime/31745689#31745689)。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-04-25T12:52:20.090

```
using System.Diagnostics;

ProcessThreadCollection currentThreads = Process.GetCurrentProcess().Threads;

foreach (ProcessThread thread in currentThreads)    
{
   // Do whatever you need
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-16T12:04:09.677

更新了代码以获取使用来自@Contango 的答案作为基础的所有堆栈跟踪的快照。您仍然需要安装 NuGet 包[CLR Memory Diagnostics (ClrMD)](https://www.nuget.org/packages/Microsoft.Diagnostics.Runtime)。此代码段还包含用于获取线程名称的额外代码，但如果您只需要堆栈跟踪，则不需要这样做。

```
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using Microsoft.Diagnostics.Runtime;

namespace CSharpUtils.wrc.utils.debugging
{
    public static class StackTraceAnalysis
    {
        public static string GetAllStackTraces()
        {
            var result = new StringBuilder();

            using (var target = DataTarget.CreateSnapshotAndAttach(Process.GetCurrentProcess().Id))
            {
                var runtime = target.ClrVersions.First().CreateRuntime();

                // We can't get the thread name from the ClrThead objects, so we'll look for
                // Thread instances on the heap and get the names from those.    
                var threadNameLookup = new Dictionary<int, string>();
                foreach (var obj in runtime.Heap.EnumerateObjects())
                {
                    if (!(obj.Type is null) && obj.Type.Name == "System.Threading.Thread")
                    {
                        var threadId = obj.ReadField<int>("m_ManagedThreadId");
                        var threadName = obj.ReadStringField("m_Name");
                        threadNameLookup[threadId] = threadName;
                    }
                }

                foreach (var thread in runtime.Threads)
                {
                    threadNameLookup.TryGetValue(thread.ManagedThreadId, out string threadName);
                    result.AppendLine(
                        $"ManagedThreadId: {thread.ManagedThreadId}, Name: {threadName}, OSThreadId: {thread.OSThreadId}, Thread: IsAlive: {thread.IsAlive}, IsBackground: {thread.IsBackground}");
                    foreach (var clrStackFrame in thread.EnumerateStackTrace())
                        result.AppendLine($"{clrStackFrame.Method}");
                }
            }

            return result.ToString();
        }
    }
} 
```

# iis-7 - IIS7 重写规则不起作用

> ID：10315869
> 
> 赞同：0
> 
> 时间：2012-04-25T12:42:49.073
> 
> 标签：iis-7

我正在尝试为非 aspx 站点执行重写规则。它只是 html 文件。

这是我目前在 web.config 中的内容。我尝试了各种规则以及集成和经典管道模式，但没有任何效果。

```
<?xml version="1.0" encoding="UTF-8"?>

    <rewrite>
        <rules>
            <rule name="Redirect domain.com to www" patternSyntax="Wildcard" stopProcessing="true">
                <match url="*" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="eyeswidewhat.net" />
                </conditions>
                <action type="Redirect" url="http://www.eyeswidewhat.net/{R:0}" />
            </rule>
        </rules>
    </rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:02:06.657

尝试这个。这会将非 www 重定向到 www。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
          <rule name="RedirectToWWW" stopProcessing="false">
                <match url=".*" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^eyeswidewhat\.net$" />
                </conditions>
                <action type="Redirect" url="http://www.eyeswidewhat.net/{R:0}" />
            </rule>
        </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

# java - 将相机预览与图像合并？

> ID：10315872
> 
> 赞同：3
> 
> 时间：2012-04-25T12:43:03.727
> 
> 标签：java, android, image, android-camera, augmented-reality

我正在尝试从相机预览和`ImageView`上面的一个合成图像。我有一个透明的 png 图像，它设置在这样的 imageview 上

```
ImageView iv = new ImageView(this);
iv.setImageResource(R.drawable.one); 
```

然后我将它添加到已经显示我的相机预览（继承 SurfaceView）的框架布局中，如下所示：

```
preview = (FrameLayout) findViewById(R.id.camera_preview);
preview.addView(cp); //cp is a reference to a camera preview object
preview.addView(iv); 
```

我的 imageview 的图片是这样的：

![在此处输入图像描述](../Images/f032dd699b557e4ffd54d67e8beb0875.png)

屏幕是这样的（我不得不从另一台相机拍摄照片，因为 DDMS 屏幕截图没有显示预览，只显示图像和黑屏，但不知道这是否相关）：

![在此处输入图像描述](../Images/c75626f5b9cbc93a4ef70e6e704e80d3.png)

现在我的任务是用 imageview 拍摄那张照片。想出了两个办法，都不知道能不能实现

1.  单独保存图片，跟踪图像上的封面，然后以某种方式合并。这可以做到吗，怎么做？
2.  获得两个视图所在的框架布局的外观并保存为图像
3.  截取特定区域的屏幕截图，我会在万不得已的情况下这样做，即如果可以这样做

我想知道的是这些方法中的哪一种是可能的，如何实现？还是有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:03:09.183

假设您已经有`byte[] data`来自 jpeg 回调形式的图像。

1.  将图像解码为可变位图：

    ```
    Bitmap photo = BitmapFactory.decodeByteArray(data, 0, data.length);
    photo = photo.copy(photo.getConfig(), true); 
    ```

2.  阅读覆盖：

    ```
    Bitmap overlay = BitmapFactory.decodeResource(getResources(), R.drawable.one); 
    ```

3.  在照片上绘制叠加层：

    ```
    Canvas canvas = new Canvas(photo);
    canvas.drawBitmap(overlay, new Matrix(), null); 
    ```

现在，`photo`应该包含您的图像。

# java - 如何获得在图中断开某个节点的最小成本

> ID：10315877
> 
> 赞同：6
> 
> 时间：2012-04-25T12:43:28.390
> 
> 标签：java, algorithm, graph

在给定的图中，我想计算在图中断开某个节点的最小成本。示例：
![在此处输入图像描述](../Images/2f77021da959955cbc680c6463b4ab7e.png)在此图中，假设我想通过删除这些节点之间的一些边来`node A`断开`node C`连接`node F`。即通过删除`edge A-B`和，`edge F-E`节点和将断开连接。这里的成本是指被移除的边缘的长度。在此示例中，断开和彼此的总最小成本为 2+1=3。 有人可以提供一些提示。我无法对这个问题进行分类，这是一种还是？`A``C``F``Node A``Node C``Node F`
`shortest path problem``minimum spanning tree problem`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:01:28.237

这称为**多端割问题**。不幸的是，似乎没有维基百科条目。*问题是，给定一个加权图和一个称为终端*的顶点子集，计算最小权重的边集，其移除会断开每对终端的连接。坏消息是这个问题是 NP 难的，所以如果你真的需要一个不能被暴力破解的实例的最优解，你可能不得不求助于整数编程。好消息是有一个简单的 2 逼近算法（不是已知的最佳因子，但您可能需要复习线性规划并阅读研究文献以使用“更好”的），这可以通过采取st 切割的联合将每个终端与其他终端分开。

# java - 如何在不作为标准命令的情况下将字符串发送到终端？

> ID：10315880
> 
> 赞同：3
> 
> 时间：2012-04-25T12:43:33.140
> 
> 标签：java, process, terminal, command

我正在用 Java 编写一个需要使用终端命令才能工作的程序。我的功能基本上是这样的：

```
public void sendLoginCommand() throws IOException
{
    System.out.println("\n------------Sending Login Command------------\n");
    String cmd="qskdjqhsdqsd";
    Runtime rt = Runtime.getRuntime();
    Process p=rt.exec(cmd);
}
public Process sendPassword(String password) throws IOException
{
    System.out.println("\n------------Sending Password------------\n");
    String cmd=password;
    Runtime rt = Runtime.getRuntime();
    Process p=rt.exec(cmd);
    return p;
}
public void login(String password) throws IOException
{
    sendLoginCommand();
    Process p = sendPassword(password);
    System.out.println("\n------------Reading Terminal Output------------\n");
    Reader in = new InputStreamReader(p.getInputStream());

    in = new BufferedReader(in);
    char[] buffer = new char[20];
    int len = in.read(buffer);
    String s = new String(buffer, 0, len);
    System.out.println(s);
    if(s.equals("Password invalid.")) loggedIn=false;
    else loggedIn=true;
} 
```

在这里，程序正确发送了 p4 登录命令，但随后终端要求输入密码。当我使用与 sendLoginCommand() 相同的行时，程序返回错误。显然，我们只能通过 Process 发送标准命令。我希望有人知道如何向终端发送普通字符串

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:59:02.973

您的直接问题是您正在为您正在调用的每个“命令”启动单独的进程。密码“command”被发送给一个完全不知道之前的“login”命令的进程。

话虽如此，您更可怕的问题是对 Process 类的用途以及如何从 Java 中与外部程序交互的严重误解。

这是一个[教程](http://www.avajava.com/tutorials/lessons/how-do-i-run-another-application-from-java.html)，可以帮助您进一步了解该主题，我会建议其他人使用谷歌搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:07:19.463

我找到了我的问题的答案。

问题是终端的第二个响应实际上是在第一个响应中，并且必须在其中发送密码。这是代码（我同意，我的解释有点模糊）：

```
 String s="";
    Process p = Runtime.getRuntime().exec("p4 login");     
    BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));    
    char a=(char)in.read();
    while(a>0 && a<256)
    {

        a=(char)in.read();
        if(nb==14) new PrintWriter(p.getOutputStream(),true).println(password); 
        if(nb>16) s=s+a;
        nb++;
    }
    if(s.startsWith("User")) loggedIn=true;
    else loggedIn=false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:02:12.497

为了与一个进程通信，你不需要启动另一个进程，而是写入它的标准输入。实际上那里有代码试图做这样的事情。已`sendLoginCommand`返回创建的进程；删除所有代码`sendPassword`，实际上删除整个方法。在您的主代码中，将您的密码写入进程的输出流。所以我要说的是

```
new PrintWriter(sendLoginCommand().getOutputStream()).println(password); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T00:18:47.963

作为旁注，我强烈建议使用一个预先打包的库，该库已经封装了有关 Java 中进程通信的所有技术内容。

一个很好的库是**commons-exec** ( [http://commons.apache.org/exec/](http://commons.apache.org/exec/)。

它带有命令行助手、读取 sysout/syserr 输出的后台线程、在给定时间后杀死进程的可选看门狗等等（它当然适用于几乎所有操作系统）。

# android - 带有标题的列表视图

> ID：10315888
> 
> 赞同：0
> 
> 时间：2012-04-25T12:44:03.803
> 
> 标签：android, android-listview

我正在创建一个带有标题的列表视图。我创建了 header.xml，其中有一个图像。但是当我滚动列表标题时也会滚动。它应该总是在顶部。`public class CustomListActivity extends ListActivity {

```
 static final String[] Actress = 
               //new String[] { "Katrina Kaif", "Aishwarya", "Genelia", "Vidya", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid"};
    new String[] { "Aishwarya", "Genelia","Katrina Kaif",   "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Khalid", "Vidya",};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ListView lv = getListView();
        View header = getLayoutInflater().inflate(R.layout.header, null);
        lv.addHeaderView(header);
        setListAdapter(new MobileArrayAdapter(getApplicationContext(), Actress));

        lv.setTextFilterEnabled(true);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        //get selected items
        String selectedValue = (String) getListAdapter().getItem(position);
        Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:48:09.430

只需在列表视图上方放置一个视图，无需使用标题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:48:12.130

不要将标题作为另一个单元格，而是创建一个自定义组件。像（总的*modo*）：

```
<LinearLayout orientation="vertical">
  <Header/>
  <ScrollablePanel>
    <ListView/>
  </ScrollablePanel>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:49:25.927

如果您只是将 header.xml 中的任何视图放在 ListActivity 布局文件中的 ListView 顶部，则它不应该滚动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:54:01.687

尝试这个：

```
LayoutInflater inflater = getLayoutInflater();
ViewGroup header = (ViewGroup)inflater.inflate(R.layout.header, lv, false);
lv.addHeaderView(header, null, false); 
```

# compression - GOP 重组/显示顺序

> ID：10315892
> 
> 赞同：2
> 
> 时间：2012-04-25T12:44:16.883
> 
> 标签：compression, mpeg

在处理 MPEG 压缩时，以下一组图片（（GOP（I-、P-和 B-Frames））按以下顺序进行编码和传输：

`I P B B P P B B P B B P P`

但是，显示顺序是：

`I P P B B P P B B P B B P`

有人可以解释一下这个特定的顺序是如何确定的吗（我知道它不是随机的，但我不确定在重新排序帧时使用什么准则/逻辑）？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:27:18.560

您的帧序列不太正确：

显示顺序：`I(1) B(2) B(3) P(4) B(5) B(6) P(7)`

传输顺序：`I(1) P(4) B(2) B(3) P(7) B(5) B(6)`

为什么会这样的简短答案：由于 B 帧预测的双向性质，解码器必须首先处理前一个和下一个参考帧。例如，要解码 B(2)，解码器必须首先具有 I(1) 和 P(4)。

重新排序从传输到显示的帧的简单方法（对于大多数序列）是查看图片标题中的 temporal_reference，它为您提供帧在显示顺序中的位置。

希望这可以帮助！

# selenium-webdriver - Selenium WebDriver 页面对象

> ID：10315894
> 
> 赞同：10
> 
> 时间：2012-04-25T12:44:19.307
> 
> 标签：selenium-webdriver, webdriver, pageobjects

关于 selenium webdriver 中的页面对象的快速问题。我们的网站非常动态，有很多 ajax 和各种身份验证状态。很难弄清楚如何定义每个页面对象但是可以说我已经弄清楚并定义了几个代表我们网站的页面对象。

你如何处理从页面到页面的交叉。因此，我为我的主页获取了一个页面对象，为我的帐户页面获取了一个页面对象，为我的结果页面获取了一个。然后我需要编写一个遍历我所有页面的测试来模拟用户执行多个操作。

你怎么说给我一个 HomePage 对象来创建一个新的使用 -> 然后获取一个帐户页面对象来执行一些用户操作 - 然后获取一个结果页面对象来验证所有来自单个脚本的这些操作。

人们是如何做到这一点的？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T02:03:46.673

当您模拟让用户在浏览器的 URL 栏中输入新 URL 时，测试类有责任创建它需要的页面对象。

另一方面，当您在页面上执行某些操作时，会导致浏览器指向另一个页面——例如，单击链接或提交表单——那么该页面对象有责任返回下一页对象。

由于我对您的主页、帐户页面和结果页面之间的关系知之甚少，无法准确告诉您它在您的网站中的表现，因此我将使用在线商店应用程序作为示例。

假设您有一个 SearchPage。当您在 SearchPage 上提交表单时，它会返回一个 ResultsPage。当你点击一个结果时，你会得到一个 ProductPage。所以这些类看起来像这样（缩写为相关方法）：

```
public class SearchPage {

    public void open() {
        return driver.get(url);
    }

    public ResultsPage search(String term) {
        // Code to enter the term into the search box goes here
        // Code to click the submit button goes here
        return new ResultsPage();
    }

}

public class ResultsPage {

    public ProductPage openResult(int resultNumber) {
        // Code to locate the relevant result link and click on it
        return new ProductPage();
    }

} 
```

执行这个故事的测试方法看起来像这样：

```
@Test
public void testSearch() {

    // Here we want to simulate the user going to the search page
    // as if opening a browser and entering the URL in the address bar. 
    // So we instantiate it here in the test code.

    SearchPage searchPage = new SearchPage();
    searchPage.open(); // calls driver.get() on the correct URL

    // Now search for "video games"

    ResultsPage videoGameResultsPage = searchPage.search("video games");

    // Now open the first result

    ProductPage firstProductPage = videoGameResultsPage.openResult(0);

    // Some assertion would probably go here

} 
```

如您所见，页面对象存在这种“链接”，其中每个对象都返回下一个对象。

结果是您最终会得到许多不同的页面对象来实例化其他页面对象。因此，如果您有一个相当大的站点，您可以考虑使用依赖注入框架来创建这些页面对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T13:42:47.570

好吧，我创建了自己的代表页面的 Java 类：

说，下面是代表主页的代码。这里用户可以登录：

```
public class HomePage{
  private WebDriver driver;
  private WebElement loginInput;
  private WebElement passwordInput;
  private WebElement loginSubmit;

  public WebDriver getDriver(){
    return driver;
  }

  public HomePage(){
    driver = new FirefoxDriver();
   }

  public CustomerPage login(String username, String password){
     driver.get("http://the-test-page.com");
     loginInput = driver.findElement(By.id("username"));
     loginInput.sendKeys(username);
     passwordInput = driver.findElement(By.id("password"));
     passwordInput.sendKeys(password);
     loginSubmit = driver.findElement(By.id("login"));
     loginSubmit.click();
     return new CustomerPage(this);
  }

} 
```

客户页面可能如下所示。在这里，我正在演示如何获取登录用户：

```
public class CustomerPage{
    private HomePage homePage;
    private WebElement loggedInUserSpan;

 public CustomerPage(HomePage hp){
    this.homePage = hp;
  }

 public String getLoggedInUser(){
      loggedInUserSpan = homePage.getDriver().findElement(By.id("usrLongName"));
      return loggedInUserSpan.getText();
 }

} 
```

测试可以这样进行：

```
@Test
public void testLogin(){
  HomePage home = new HomePage();
  CustomerPage customer = home.login("janipav", "extrasecretpassword");
  Assert.assertEquals(customer.getLoggedInUser(), "Pavel Janicek");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-20T07:26:05.417

您通常希望对用户在使用您的网站时的实际行为进行建模。当使用页面对象时，这最终会采用领域特定语言 (DSL) 的形式。但是，它会与可重用的页面组件混淆。

现在 Java 8 推出了默认方法，可重用的页面组件可以被视为使用默认方法的 mixin。我有一篇博客文章，其中包含一些在这里找到的代码示例，更详细地解释了这一点：http: [//blog.jsdevel.me/2015/04/pageobjects-done-right-in-java-8.html](http://blog.jsdevel.me/2015/04/pageobjects-done-right-in-java-8.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T03:40:24.223

我建议您使用为这些模式提供支持的框架。[Geb](http://www.gebish.org/)是最好的之一。下面是一个取自他们手册的例子

```
Browser.drive {
    to LoginPage
    assert at(LoginPage)
    loginForm.with {
        username = "admin"
        password = "password"
    }
    loginButton.click()
    assert at(AdminPage)
}

class LoginPage extends Page {
    static url = "http://myapp.com/login"
    static at = { heading.text() == "Please Login" }
    static content = {
        heading { $("h1") }
        loginForm { $("form.login") }
        loginButton(to: AdminPage) { loginForm.login() }
    }
}

class AdminPage extends Page {
    static at = { heading.text() == "Admin Section" }
    static content = {
        heading { $("h1") }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-11T08:34:53.860

我喜欢使用页面对象模式编写 Selenium Webdriver 测试。但个人对必须始终显式实例化并返回下一页或页面组件的冗长和重复感到恼火。因此，借助 Python 的元类，我编写了一个[名为 Keteparaha 的库，它可以自动计算出应该从 selenium 页面对象的方法调用中返回的内容](http://keteparaha.aychedee.com/)。

# qooxdoo - Qooxdoo 1.6 Gzip 选项错误

> ID：10315900
> 
> 赞同：1
> 
> 时间：2012-04-25T12:44:41.387
> 
> 标签：qooxdoo

我尝试将 `"gzip": true`选项添加到我的 config.json 文件并收到以下错误：

*   生成包[Errno 2] No such file or directory: u'apppath/build/script/appname.828e8d12c6a6.js'

我注意到目录中有一个 appname.828e8d12c6a6.js.gz 文件。

当我启用 gzipping 时，我还需要改变什么吗？

当我将 gzip 选项设置为 false 时，它​​成功完成。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:34:19.827

这是最近版本中已知的回归，并且在 qooxdoo 问题跟踪器中有一个[错误。](http://bugzilla.qooxdoo.org/show_bug.cgi?id=5493)恐怕你得等到问题解决了。

# c++-cli - C++/CLI 可选参数

> ID：10315903
> 
> 赞同：9
> 
> 时间：2012-04-25T12:45:09.967
> 
> 标签：c++-cli, optional-parameters

为什么我不能为托管类型的成员函数或泛型函数声明默认参数？`C# 4.0`引入了[命名和可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)；有类似的事情`CLI`吗？

我不明白为什么不能声明这样的方法：

```
void Optional(int argument = 0); 
```

然后，当我调用`Optional();`编译器时，不会将此调用转换为*：*`Optional(0);`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T13:13:20.553

看起来 C++/CLI 编译器没有为此发出正确的 IL 指令。它不会发出`.param [1] = int32(0)`C# 用于识别默认参数的指令。如果您在 ILDasm 中打开生成的程序集，您会看到它。

*编译*的一种方法是使用属性`Optional`和命名空间，但 C# 不使用这些作为默认参数，因此目前没有简单的方法来创建重载。`DefaultParameterValue``System::Runtime::InteropServices`

您可以在此处找到有关这些属性的问题：[https ://stackoverflow.com/a/4974528/93652](https://stackoverflow.com/a/4974528/93652)

# javascript - JavaScript“类”中的事件处理程序

> ID：10315904
> 
> 赞同：0
> 
> 时间：2012-04-25T12:45:10.153
> 
> 标签：javascript, oop

我正在努力完全理解 JavaScript 中的类定义。目前，我有一个定义如下的类：

```
function Item() { this.init(); }
Item.prototype = {
    init: function () {
        this.data = {
            id: 0,
            name: "",
            description: ""     
        }
    },

    save: function() {
        $.ajax({
            url: getUrl(),
            type: "POST",
            data: JSON.stringify(this.data),
            contentType: "application/json",
            success: save_Succeeded,
            error: save_Failed
        });
    }
} 
```

我的问题是，我不确定如何或在哪里定义我的`save_Succeeded`和`save_Failed`事件处理程序。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:52:04.300

将 a 添加`context:`到`$.ajax`指向的调用中，`this`以便在调用处理程序时传递正确的对象`this`。

就像是：

```
save: function() {
    $.ajax({
        context: this,
        url: getUrl(),
        type: "POST",
        data: JSON.stringify(this.data),
        contentType: "application/json",
        success: this.save_Succeeded,
        error: this.save_Failed
    }); 
```

（假设您也将`save_Succeeded`and`save_Failed`放入`prototype`）}

# php - 效率低下的 MySQL 数据库/语句减慢 PHP/JS 系统的速度

> ID：10315906
> 
> 赞同：1
> 
> 时间：2012-04-25T12:45:16.453
> 
> 标签：php, mysql, optimization

我为我学校的 VLE 开发了一个相当不稳定的 PHP/JavaScript 奖励系统。

主要工作是在`transactions`具有以下字段的表上完成的：

`Transaction_ID`, `Datetime`, `Giver_ID`, `Recipient_ID`, `Points`, `Category_ID`,`Reason`

这个想法是，如果我作为一名教职员工，给学生一些奖励积分，则会将这样的条目插入到数据库中：

```
INSERT INTO `transactions` (`Transaction_ID`, `Datetime`, `Giver_ID`, `Recipient_ID`, `Points`, `Category_ID`, `Reason`) VALUES
(60332, '2012-02-22', 34985, 137426, 5, 5, 'Excellent volcano homework.'); 
```

这很好用——但我并没有真正考虑过系统的使用量。我现在在这个表中有超过**72,000 笔交易。**

因此，我的一些页面开始变慢。例如，当员工尝试分配积分时，我的系统会运行一个命令来获取员工的总积分分配和其他信息片段。这似乎显示得相当缓慢，并且查看 MySQL 语句/伴随的 PHP 代码，我认为这可能会更有效率。

```
function getLimitsAndTotals($User_ID) {

    $return["SpentTotal"] = 0;
    $return["SpentWeekly"] = 0;

    $sql = "SELECT * 
        FROM `transactions` 
        WHERE `Giver_ID` =$User_ID";
    $res = mysql_query($sql);

    if (mysql_num_rows($res) > 0) {
        while ($row = mysql_fetch_assoc($res)) {
            $return["SpentTotal"] += $row["Points"];

            $transaction_date = strtotime ($row["Datetime"]);

            if ($transaction_date > strtotime( "last sunday" )) {
                $return["SpentWeekly"] += $row["Points"];
            }
        }
    }

    return $return;
} 
```

因此，我的问题是双重的。

1.  可以优化此特定代码吗？
2.  我可以使用任何数据库技术（全文索引等）来进一步优化我的系统吗？

* * *

**编辑**：重新索引

我对索引一无所知，但看起来我的`transactions`表确实有一个索引？

![事务表索引](../Images/58257945c837c3abe6c14826a0cca078.png)

这是正确的索引类型吗？

这是创建表的代码：

```
CREATE TABLE IF NOT EXISTS `transactions` (
  `Transaction_ID` int(9) NOT NULL auto_increment,
  `Datetime` date NOT NULL,
  `Giver_ID` int(9) NOT NULL,
  `Recipient_ID` int(9) NOT NULL,
  `Points` int(4) NOT NULL,
  `Category_ID` int(3) NOT NULL,
  `Reason` text NOT NULL,
  PRIMARY KEY  (`Transaction_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=74927 ; 
```

* * *

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:50:49.093

确保`Giver_ID`已**编入索引**。尝试在 while 循环之外运行 strtotime，因为我认为运行 72,000 次是一项昂贵的操作。

```
if (mysql_num_rows($res) > 0) {

    // assign the unix timestamp of last sunday here.
    $last_sunday = strtotime('last sunday');

    while ($row = mysql_fetch_assoc($res)) {
        $return["SpentTotal"] += $row["Points"];

        $transaction_date = strtotime ($row["Datetime"]);

        if ($transaction_date > $last_sunday) {
            $return["SpentWeekly"] += $row["Points"];
        }
    }
} 
```

还要考虑`UNIX_TIMESTAMP(Datetime) AS datetime_timestamp`在您的 SQL 中运行，而不是将其作为字符串取出并运行另一个昂贵的 strtotime 操作。然后，您可以简单地运行：

```
if (mysql_num_rows($res) > 0) {

    // assign the unix timestamp of last sunday here.
    $last_sunday = strtotime('last sunday');

    while ($row = mysql_fetch_assoc($res)) {
        $return["SpentTotal"] += $row["Points"];

        if ($row['datetime_timestamp'] > $last_sunday) {
            $return["SpentWeekly"] += $row["Points"];
        }
    }
} 
```

（当然，如果您的列是 DATE 类型！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:50:49.913

72k 什么都不是……但是这里可能还有其他导致速度变慢的事情，例如您的 mysql 配置（您为服务分配了多少内存），以及其他一些（搜索优化 mysql）。

还要查看`INSERTS`给定页面中有多少个，这通常会减慢页面加载速度，如果您为用户执行插入每个操作，那么您将进行昂贵的交易。

通常，SELECT 比 INSERT 等便宜得多；

从您的 SQL 代码中，我还可以假设您没有优化查询，例如：

```
$sql = "SELECT * 
    FROM `transactions` 
    WHERE `Giver_ID` =$User_ID"; 
```

应该：

```
$sql = "SELECT Points, DateTime FROM ..." 
```

（从您的数据来看不是一个大问题，但它只要求您需要什么，而不是在迭代过程中需要更多内存的所有内容）。

也不确定您的架构是如何设计的，但是您是否使用索引`Transaction_ID`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:19:08.717

> 可以优化此特定代码吗？

是的。
但绝对不是通过“查看代码”。

> 我可以使用任何数据库技术（全文索引等）来进一步优化我的系统吗？

不，你不能。
仅仅**因为您不知道，**您的系统中肯定是什么速度很慢。

这只是一种常识，在现实生活中被任何人广泛使用，但由于某种原因，当有人开始编写网站时，它就完全被遗忘了。

您的问题就像“我的车变慢了。如何加快速度？”。地球上谁可以回答它，不知道缓慢的原因？是轮胎吗？还是汽油？还是周围没有路，只有一片开阔的田野？或者只是有人忘记释放手刹？

## 您必须首先确定缓慢的原因。

**在**提出问题之前，您必须测量您的查询运行时间。
如果它仍然很快，你不应该因为你的网站速度慢而责备它。
并开始对其**进行分析**。

首先，您必须确定整个页面的哪个部分使其加载缓慢。它可能只是从第三方服务器加载的一些 Javascript。
因此，从 Firebug 中的“Net”选项卡开始，查看最慢的部分。

然后继续它。
如果它是您的 PHP 代码 - 使用`microtime(1);`测量不同的部分来发现问题之一。

## 然后带着问题来。

但是，如果您的问题不是作为速度优化的要求，而是为了使 SQL 更加健全，则可以进行一些改进。

这两个数字都可以作为单个值检索。

```
select sum(Points) as Total from FROM `transactions` WHERE Giver_ID=$User_ID 
```

会给你点数
以及

```
$sunday = date("Y-m-d",strtotime('last sunday'));

select sum(Points) as Spent from FROM `transactions` 
WHERE Giver_ID=$User_ID AND Datetime > '$sunday' 
```

会给你每周积分。

# android - 垂直滚动视图中的多个水平搜索栏，尝试滚动修改搜索栏值

> ID：10315915
> 
> 赞同：0
> 
> 时间：2012-04-25T12:45:40.177
> 
> 标签：android, scrollview, xamarin.android, seekbar, vertical-scrolling

我有一个在滚动视图中有几个 SeekBar 的应用程序。Atm 几乎一切都很好，但只有一个问题：

如果我在屏幕上滑动以向上或向下滚动，并且滑动的开始是在搜索栏上，我会修改搜索栏的值。Seekbar 似乎抓住了触摸并且直到我停止触摸才释放它。但是我希望 Seekbar 将触摸传递给滚动视图，以防滑动主要是垂直的。有没有人意识到这一点？我完全不知道如何解决这个问题。

感谢您的帮助。

编辑：

我在Java中也遇到了这个问题。而且我真的不想从头开始实现搜索栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:15:01.970

我认为无论如何你都需要覆盖 seekbar onTouch 事件。做一些搜索让我得到了这个答案，这似乎也是适合你的方法：[在滚动视图中使用 seekbar 问题](https://stackoverflow.com/questions/9374892/issue-using-seekbar-inside-a-scroll-view)

如您所见，它继承了 SeekBar 并覆盖了 OnTouch 事件。我帮助另一个人在这个线程中继承了 SeekBar：[如何在 MonoDroid 中正确地继承 SeekBar？](https://stackoverflow.com/questions/10980975/how-to-properly-subclass-seekbar-in-monodroid/10984666#10984666)请记住声明所有构造函数，否则您可能会遇到相同的问题。

# postgresql - 如何使用 psql -F 设置制表符分隔符

> ID：10315916
> 
> 赞同：36
> 
> 时间：2012-04-25T12:45:41.880
> 
> 标签：postgresql

我想使用 psql -F 将选择查询转储到制表符分隔的文本文件中。但是，这不起作用：

```
psql -Umyuser mydb -F '\t' --no-align -c "select * from mytable" -o /tmp/dumpfile.txt 
```

这使得分隔符成为文字 \t。我如何让它使用真正的标签？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-25T12:54:19.137

我认为您只需要使用文字标签即可。这如何工作取决于您的外壳。你看过这个[帖子](http://archives.postgresql.org/pgsql-sql/2006-11/msg00163.php)吗？

在 bash shell 中，您可以使用`$'\t'`.

使用您问题中的示例：

```
psql -Umyuser mydb -AF $'\t' --no-align -c "select * from mytable" -o /tmp/dumpfile.txt 
```

来自`man bash`：

> $'string' 形式的单词被特殊处理。该单词扩展为字符串，并按照 ANSI C 标准的规定替换反斜杠转义字符。[...] 扩展结果是单引号的，就好像美元符号不存在一样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-07T20:17:06.313

在 Unix 中，您还可以键入

```
ctrl-V tab 
```

ctrl-V 告诉终端不要解释下一个键。

这也适用于回车 (^M) 和许多其他特殊键，如箭头键

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-21T08:05:47.740

如果有人在交互式外壳中寻找如何做到这一点： `\f '\t'`

# c++ - 如何从 ostream 读取输出？

> ID：10315923
> 
> 赞同：0
> 
> 时间：2012-04-25T12:46:04.770
> 
> 标签：c++

[解决方案]

您可以将 stringstream 传递到采用 ostream 的参数中。之后，您可以通过 str() 函数获取在字符串流中设置的文本。

```
#include <sstream>

...

{
stringstream ss;
print(ss);
string text;
text = ss.str();
// Handle text
} 
```

鉴于有这样的功能：

```
void print(ostream& stream) const; 
```

如何访问写入 ostream 的数据？

我正在考虑将其解释为字符串：

```
string text;
print( text );
// Interpret text 
```

原因是另一个函数有一个指向对象的指针作为参数：

```
void append( *Data data ); 
```

而且我必须使用数据对象打印方法来获取它的数据：

```
// This is a public function in the Data class
void append( *Data data ) {
    string text;
    data->print( text );
    // append data to this Data object
} 
```

我试图转换为字符串流，但没有奏效。我在想是否可以将数据保存到文件中，然后将其作为解决方法读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:50:52.753

而不是这个...

```
string text;
print( text ); 
```

...尝试这个...

```
ostringstream text;
print( text ); 
```

然后就可以用文字写成“文字”了。

# vb.net - VB.NET 的 MsgBox 函数在哪里定义？

> ID：10315926
> 
> 赞同：2
> 
> 时间：2012-04-25T12:46:06.453
> 
> 标签：vb.net, clr

这实际上更像是一个学术问题，但是这个函数是在哪里定义的呢？在 .NET 中，我习惯于以面向对象的方式工作。但是，如果我按如下方式定义 VB.NET 类：

```
Public Class foo
    Public Sub showmessagebox()
        Dim i As Integer
        i = MsgBox("Message")
    End Sub
End Class 
```

MsgBox 是在一个类中定义的吗？我不需要引用静态类或从另一个类继承。我什至不需要导入命名空间。我确实从 msdn找到了这个[链接。](http://msdn.microsoft.com/en-us/library/139z2azd%28v=vs.90%29.aspx)但我的问题仍然存在，这是在哪里定义的，CLR 是如何加载一个函数的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:49:21.193

如果您进入`MsgBox`Visual Studio 并点击`F12`，您将看到它在`Microsoft.VisualBasic`命名空间中，在`Interaction`模块中。

实际上，您引用的 MSDN 页面底部也提供了此信息（尽管有点隐藏）：

> **命名空间**：Microsoft.VisualBasic
> **模块**：交互
> **程序集**：Visual Basic 运行时库（在 Microsoft.VisualBasic.dll 中）

如果您查看`References`项目属性部分，您会看到`Microsoft.VisualBasic`命名空间是自动导入的。由于`Interaction`是一个模块，您可以使用它的方法而无需限定模块名称（与类的静态/共享方法相反）。

附带说明：如果您将 Microsoft.VisualBasic.dll 的引用添加到 C# 项目，您也可以`Microsoft.VisualBasic.Interaction.MsgBox("Hello World");`在那里使用（尽管大多数 C# 用户更喜欢使用`MessageBox`该类）。

# javascript - 如何为对象创建完全继承（不仅仅是原型）？

> ID：10315929
> 
> 赞同：0
> 
> 时间：2012-04-25T12:46:09.887
> 
> 标签：javascript

我想从孩子那里读取父母自己的属性。

父对象：

```
var module = function() {
  this.group = new group('Male');
  this.thumb = new thumb('Loly');
} 
```

子对象：

```
var group = function( name ) {
  this.name = name || '';
}
var thumb = function( name ) {
  this.name = name || '';
} 
```

我想写一个`function extend (child, parent ) {...}`，应用后`extend( group, module )`我们有 `module.group.thumb == module.thumb` （即我们可以从 访问所有父级自己的属性`module.group`）。所以下一个日志不会打印**undefiend**之后`group.select()`：

```
group.prototype.select = function( name ) {
      console.log( this.thumb);
} 
```

父对象自身属性的数量可能不确定，因此不适合简单的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:48:41.017

似乎您想要针对 javascript 原型继承的经典继承。John resig 下面的小继承部分可能很有用，因为它允许引用父方法（也可以修改它以访问属性，因为只有类型不同）

[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

# java - java.util.Scanner：一直等待额外的输入

> ID：10315931
> 
> 赞同：0
> 
> 时间：2012-04-25T12:46:12.403
> 
> 标签：java, java.util.scanner

总Java新手在这里。在我的第一个 Java 程序中工作。请帮忙。这是我想要实现的目标：我需要接受空格分隔整数的用户键盘输入，将它们复制到数组中并处理它们。已知：用户将只输入一行数据。我不知道有多少个数字，但是一旦他们按 Enter 键，就不会再有了。由于用户输入可能包含单词和特殊字符，我需要用简洁的错误处理它们并提示用户重试。当我运行我在下面写的内容时，我进入了某种无限循环，其中 Scanner 一直在等待额外的输入。我如何告诉它已经结束并且不会再有任何输入？

这是代码：

```
<!-- language-all: java -->

public static void EnterInts () {

    System.out.println("Enter series of integers separated by whitespace. Press Enter key when finished.");
    Scanner input = new Scanner(System.in);
    while (input.hasNext()){
        if (input.hasNextInt(){
            int i = input.nextInt();
            System.out.println(i);
        }
        else {
            System.out.println("Only integers can be entered. Try again.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:22:29.830

似乎您应该先阅读单行输入，然后创建扫描仪以扫描该单行。

尝试使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)和[InputStreamReader](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)首先读取该行：

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
String str = in.readLine(); 
```

然后创建`Scanner`，也许将`StringBufferInputStream`读取字符串中的 created 传递给它的构造函数。

# python - python re防止剥离空格

> ID：10315940
> 
> 赞同：-2
> 
> 时间：2012-04-25T12:46:48.233
> 
> 标签：python, string, strip

:) 我不确定为什么下面的 python 代码也会删除空格，但确实如此。有人可以解释一下如果不这样做我怎么能做到这一点？谢谢 ！:)

```
text = html
rules = [
    { r'>\s+' : u'>'},
    { r'\s+' : u' '},
    { r'\s*<br\s*/?>\s*' : u'\n'},
    { r'</(div)\s*>\s*' : u'\n'},
    { r'</(p|h\d)\s*>\s*' : u'\n\n'},
    { r'<head>.*<\s*(/head|body)[^>]*>' : u'' },
    { r'<a\s+href="([^"]+)"[^>]*>.*</a>' : r'\1' },
    { r'[ \t]*<[^<]*?/?>' : u'' },
    { r'^\s+' : u'' }
]
for rule in rules:
    for (k,v) in rule.items():
        regex = re.compile (k)
        text  = regex.sub (v, text)
print text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:49:58.337

正如您可以在文档中阅读的那样：http: [//docs.python.org/library/re.html](http://docs.python.org/library/re.html)

该`\s`序列匹配所有空格。所以底部规则将删除所有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:51:43.833

除了 WoLpH 的答案之外，您的前 5 个 re 以某种变体结尾，`\s`并将其替换为末尾不包含空格（换行符除外）的字符串......

# iphone - 如何在 App Store 中为同一个项目提交两个二进制文件（iPhone 和 iPad）？

> ID：10315944
> 
> 赞同：3
> 
> 时间：2012-04-25T12:47:06.313
> 
> 标签：iphone, ipad, app-store, itunes, submission

我已经为 iPhone 创建了 Map 应用程序，并根据我的客户要求在 iPad 上开发了相同的 Map 应用程序。现在我有相同的地图应用程序项目，但有两个 .ipa 文件，一个用于 iPhone，另一个用于 iPad。

我已经在 iTune 上放了 iPhone 版本，它显示状态“等待审核”

1>现在我想将我的 iPad 版应用程序放在 iTune 上，并使用相同的项目名称。如何实现？

2>我应该在 plist 文件和 xib 文件中做哪些设置？

如果有通用应用程序 iPhone/iPad，那么在应用程序商店中，我们可以看到 iphone 和 iPad 应用程序具有相同的项目名称......所以在我的情况下，我应该遵循哪些步骤。请建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T12:54:13.283

您不能以相同的名称上传同一应用程序的两个二进制版本。

您要么必须制作一个通用应用程序（即一个应用程序中的 iPhone/iPad 应用程序），要么以另一个名称提交。

开始阅读：http: [//developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T18:33:22.240

您可以通过使用多个 Target 来从同一个 Xcode 项目提交多个应用程序，并编辑每个 Target 的 Bundle ID 后缀，以便每个 Target 具有唯一的 Bundle ID。您可能还想在构建设置中更改每个目标的产品名称，以便您的应用程序具有不同的捆绑文件名称。

请注意，除非 iPad 版本与 iPhone 版本有足够的不同（例如仅使用 iPad 的 API），否则据报道 Apple 可能会拒绝几乎相同的 iPhone/iPad 应用程序对并要求您提交单个通用版本.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:56:06.683

如果您希望您的 iPhone 和 iPad 项目在同一个应用程序中，您应该以这种方式构建它。

但是，如果您确实特别想要单独的 iPhone 和 iPad 应用程序，那么您应该在每个应用程序的名称中明确区分。

有许多公司在应用商店中同时拥有 iPhone 和 iPad 应用。通常，iPhone 应用程序仅称为“ *appName* ”，而 iPad 版本通常称为“ *appName for iPad* ”。

这方面的例子是： -

*   *Skype*和*iPad版 Skype*

*   **适用于 iPad 的**Ebay*和Ebay*

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:56:43.753

如果您希望应用程序在 iTunes Connect 中具有完全相同的名称，则必须使其成为通用应用程序。

您可以取消“等待审核”并提交您的通用二进制文件：

> 我可以拒绝已经提交审核的二进制文件吗？是的。当您的应用程序处于以下 iTunes Connect 状态之一时，您可以拒绝二进制文件，将其从 Apple 审核队列中删除：
> 
> ```
> Waiting For Review
> In Review 
> ```
> 
> 要拒绝您的二进制文件，只需单击拒绝二进制按钮。在二进制文件被拒绝后，您可以通过单击“准备上传二进制文件”按钮来表明您已准备好通过 Application Loader 提交另一个二进制文件。
> 
> 请注意，如果您拒绝等待审核或审核中的二进制文件，您的审核时间将被重置，并且您将在提交新的二进制文件后从头开始。

[iTunes 连接常见问题解答](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/11.0.0.9.1.7.1.1.1.1)

但是，如果您绝对需要拥有两个单独的应用程序，您可以在 iTunes Connect 中创建一个新应用程序并将其命名为例如“[your app] for iPad”或“[your app] HD”或类似许多应用程序的名称你在商店里看到的。

您没有提交通用申请有什么特别的原因吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T12:58:11.143

如果它是一个通用应用程序会更好。

在 iTunes Connect 中，您无法创建/重复使用应用程序名称、sku 编号、捆绑标识符。您可以提交通用应用程序作为更新。

如果您仍然想要多个应用程序，那么您将必须在 iTunes 中创建多个应用程序连接不同的名称、sku 编号和 bundle-id，

但请注意**，安装在设备中的应用程序名称是您在 xcode 上提供的名称，而不是在 itunes connect 中提供的名称**。所以我想你只能给出这么多的相似性。

PS如果创建一个带有详细信息{apps-name,sku number,bundle-identifier}的应用程序并且你删除而不发布，你不能再重复使用这些。

所以告诉客户最好的（可能是唯一可能的）解决方案是通用应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T13:01:37.507

如果您对 iphone 和 ipad 有相同的应用程序，对于 iphone 应用程序名称将是 - [应用程序名称]，对于 ipad 它应该是 - [应用程序名称] HD**

# perl - 如何使用 bugzilla 配置 XML::Twig？

> ID：10315948
> 
> 赞同：1
> 
> 时间：2012-04-25T12:47:17.820
> 
> 标签：perl, bugzilla, xml-twig

我想从 xml 文件中导入 bugzilla db 中的错误，运行以下命令后出现错误消息。

```
perl -T C:\bugzilla\bugzilla\importxml.pl -v C:\bugzilla\bugzilla\mybugs\bug.xml

"ERR: can not import these bugs because bug import is disabled here" 
```

现在我发现 XML::Twig 模块只需要使用 importxml.pl 脚本导入 XML 错误。

我已经从 CPAN 下载页面下载了 XML-Twig-3.39：[http ://search.cpan.org/dist/XML-Twig/](http://search.cpan.org/dist/XML-Twig/)

但我不知道如何用 bugzilla 配置它？

任何帮助，将不胜感激。

请分享你的知识，如果有人知道吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:44:15.847

我找到了解决方案。

bugzilla 管理中启用移动的单选按钮需要打开。

管理 -> 参数 -> 错误移动 -> 启用移动。

@simbabque：你的评论真的很有帮助，建议的工具 PPM 真的很棒。谢谢。

# android - Android，是否可以在照片库的每个图像中添加文本？

> ID：10315951
> 
> 赞同：0
> 
> 时间：2012-04-25T12:47:28.433
> 
> 标签：android, view, gallery, adapter

我在我的项目中使用照片库，我可以用我的适配器将图像膨胀到画廊中。如果我想在图像底部添加文本（2-3 个单词作为图像名称）我应该怎么做？有任何参考吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:53:56.203

`getView`从适配器的方法创建并返回一个自定义视图对象。`ImageView`您可以对包含一个和一个`TextView`内部`LinearLayout`具有垂直方向的 XML 进行膨胀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:03:06.180

首先：创建具有 textview 和 imageview 的 gallery_items 布局，

然后你必须使用 ViewHolder 类在 getView 方法中膨胀布局，

如下 ：

```
 public class GalleryPhotoWithText extends Activity {
  private  Gallery galleryView; 
    /** Called when the activity is first created. */
    @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

      galleryView = (Gallery)findViewById(R.id.galleryid);

       galleryView.setAdapter(new ImageAdapter(this));         
           }

 public class ImageAdapter extends BaseAdapter { 
  private Activity activity;  
  private  LayoutInflater inflater=null; 
  public ImageAdapter(Activity a) {   
      activity = a;  
           inflater = (LayoutInflater)activity.getSystemService
                   (Context.LAYOUT_INFLATER_SERVICE);          } 

 public int getCount() {   
    return data.length;         }  

public Object getItem(int position) {   
    return position;         }   

public long getItemId(int position) {   
    return position;         }    

public  class ViewHolder{   
    public TextView text;    
    public ImageView image;         }   

public View getView(int position, View convertView, ViewGroup parent) {   
    View vi=convertView;   
    ViewHolder holder;   
    if(convertView==null){  
        vi = inflater.inflate(R.layout.gallery_items, null); 
        holder=new ViewHolder();  
        holder.text=(TextView)vi.findViewById(R.id.textView1);  
        holder.image=(ImageView)vi.findViewById(R.id.image);   
        vi.setTag(holder);             }  

        else    

    holder=(ViewHolder)vi.getTag();  
    holder.text.setText(name[position]); 
    final int stub_id=data[position];  
    holder.image.setImageResource(stub_id);  
    return vi;         } 

    private int[] data = {  
        R.drawable.image1, R.drawable.image2,  
        R.drawable.image3, R.drawable.image4,  

                        };  
    private String[] name = {  
        "first pic name", "second pic name",  
        "third pic name", "fourth pic name",  

        };     } } 
```

希望这有帮助

# c# - Visual C# - 使用 WebBrowser 时摆脱“脚本错误”

> ID：10315952
> 
> 赞同：0
> 
> 时间：2012-04-25T12:47:31.367
> 
> 标签：c#, visual-studio, webbrowser-control

好的，所以我有一个名为**wb**的 WebBrowser 。我使用`wb.Navigate("url");`当页面加载时将页面加载到 wb 中，我得到一个显示“脚本错误”的框。

这是我得到的
![我得到的错误](../Images/4908a6380840adf6395360155bc4332d.png)

我怎样才能防止它在我的程序中弹出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T12:52:40.110

不确定更新的浏览器控件，但在我的脑海中，有一个名为 SuppressScriptErrors 或类似的选项。在执行工作之前，在您的代码中将其设置为 true。您还必须确保在 Internet 选项下调试网页已关闭（如果您看到上面的对话框，则它已关闭）。

[http://www.dev102.blogspot.com/2007/12/how-to-suppress-disable-script-errors.html](http://www.dev102.blogspot.com/2007/12/how-to-suppress-disable-script-errors.html)

```
wb.ScriptErrorsSuppressed = true; 
```

# php - 如何在php中对数组中的数字进行分组

> ID：10315953
> 
> 赞同：1
> 
> 时间：2012-04-25T12:47:38.963
> 
> 标签：php, arrays

我在一个字符串中有很多数字

```
$userlist = '12,17,46,35,32,66,43,64'; //the userlist can be as long as i want 

$arr2 = explode(',', $userlist); 
```

我现在不知道如何让它们像下面这样输出。

```
12,17

46,35

32,66

43,64 
```

感谢您花时间阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:48:36.060

您可以使用[`array_chunk`](http://php.net/array_chunk)将两个再次组合在一起，然后遍历这些组并使用`,`. 示例（[演示](http://codepad.org/oiDWrX05)）：

```
$userPairings = array_chunk($arr2, 2);

foreach ($userPairings as &$pair)
{
    $pair = implode(',', $pair);
}
unset($pair);

echo implode("\n\n", $userPairings); 
```

输出：

```
12,17

46,35

32,66

43,64 
```

# javascript - 如何使用 CSS 设置表单样式

> ID：10315954
> 
> 赞同：1
> 
> 时间：2012-04-25T12:47:43.283
> 
> 标签：javascript, html, css

我正在尝试为即将推出的页面设置表单样式。我试图坚持只使用 CSS、HTML、JQUERY/JAVASCRIPT。我想知道我将如何去做这样的事情。![在此处输入图像描述][1]

您可以在这里找到该网站：http: [//www.learnstreet.com/](http://www.learnstreet.com/)

提前谢谢你们！

PS对不起，我也无法发布图片，声誉不够高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:56:50.753

只需像添加普通对象一样将 css 添加到表单中。如果你希望它有借口和圆角，那么你可以使用这样的背景图像。

这是输入。

```
<input style="border:0;" size="42" type="text" name="subemail" value="Enter your pretext here."/> 
```

这是一个作为提交按钮的图像。

```
<input type="image" src="image source here" height="53" width="100" border="0" /> 
```

然后，您可以使用 css 边框半径将所有这些放在具有圆形边缘的 div 中，

```
border-radius:10px;
-moz-border-radius:10px;
-webkit-border-radius:10px; 
```

或者只是简单地给 div 一个背景图像。[您可以在http://www.penny-patrol.com](http://www.penny-patrol.com)上看到这一切，这是我创建的一个使用这种输入类型的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:04:03.147

这里是关于如何从 javascript 设置元素样式的一些小技巧（示例也生成它们）它看起来并不完全符合您的要求，但应该说明如何从 javascript 设置表单元素的样式。

[http://jsfiddle.net/W7Vua/](http://jsfiddle.net/W7Vua/)

编辑：有点太晚了，因为已经被接受了:)

# php - 来自json的foreach为空

> ID：10315965
> 
> 赞同：1
> 
> 时间：2012-04-25T12:48:11.887
> 
> 标签：php, json, foreach

我有以下网址：

```
https://graph.facebook.com/123456/likes?access_token=__ACCESS_TOKEN__&format=json 
```

然后我这样做：

```
$likesList = json_decode(file_get_contents("https://graph.facebook.com/123456/likes?access_token=$access_token&format=json"),true); 
```

产生例如

```
{
"data": [

  {
     "name": "yo yo yo",
     "category": "Entertainer",
     "id": "45640987076",
     "created_time": "2012-04-18T16:14:09+0000"
  },
  {
     "name": "Tony Smith",
     "category": "Musician/band",
     "id": "456456456456",
     "created_time": "2012-02-22T06:56:18+0000"
  },
  {
     "name": "Stations",
     "category": "Company",
     "id": "567657567",
     "created_time": "2012-01-30T23:08:39+0000"
  }

]

} 
```

然后我想列出所有返回的名称，例如：

```
foreach ($likesList->data as $element2){ 

    $name = $element2[name];

    echo $name; 

} 
```

但它是空的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:52:20.947

查看您的数据结构的[可视化。](http://array.include-once.org/?foreach=1&assoc=1&json=%7B%0D%0A%22data%22%3A+%5B%0D%0A%0D%0A++%7B%0D%0A+++++%22name%22%3A+%22yo+yo+yo%22%2C%0D%0A+++++%22category%22%3A+%22Entertainer%22%2C%0D%0A+++++%22id%22%3A+%2245640987076%22%2C%0D%0A+++++%22created_time%22%3A+%222012-04-18T16%3A14%3A09%2B0000%22%0D%0A++%7D%2C%0D%0A++%7B%0D%0A+++++%22name%22%3A+%22Tony+Smith%22%2C%0D%0A+++++%22category%22%3A+%22Musician%2Fband%22%2C%0D%0A+++++%22id%22%3A+%22456456456456%22%2C%0D%0A+++++%22created_time%22%3A+%222012-02-22T06%3A56%3A18%2B0000%22%0D%0A++%7D%2C%0D%0A++%7B%0D%0A+++++%22name%22%3A+%22Stations%22%2C%0D%0A+++++%22category%22%3A+%22Company%22%2C%0D%0A+++++%22id%22%3A+%22567657567%22%2C%0D%0A+++++%22created_time%22%3A+%222012-01-30T23%3A08%3A39%2B0000%22%0D%0A++%7D%0D%0A%0D%0A%5D%0D%0A%0D%0A%7D)

当您收到一个数组时，您需要`$list["data"]`而不是`$list->data`. 也不要忘记引用数组 key `"name"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T12:50:57.700

```
foreach ($likesList['data'] as $element2){ 

     $name = $element2['name'];

     echo $name; 
} 
```

在带有参数 true 的 json_decode 之后，您将拥有关联数组。您可以通过字符串键访问值。就像上面的例子一样。

# c# - 在 ascx 文件中访问母版页控件

> ID：10315967
> 
> 赞同：2
> 
> 时间：2012-04-25T12:48:14.787
> 
> 标签：c#, asp.net, controls

我有一个母版页文件，其中包含 2 个面板控件中的 2 个菜单。我还使用控件来检查用户是否已登录并获取用户类型。

取决于我想要显示/隐藏面板的类型。控件本身不在母版页中引用，而是通过 CMS 系统动态引用。

我想在用户控件中使用 findcontrol 在母版页中查找面板控件。我尝试了不同的方法，但都返回 null。

母版页中的内容占位符是 asp:Content runat="server" ContentPlaceHolderID="PHMainBlock"

并且控件称为 asp:Panel ID="NormalUser" runat="server"

我已经尝试使用代码....

```
Panel ph = (Panel)Page.Master.FindControl("NormalUser");
ph.Visible = false; 
```

但带回null，有什么帮助吗？

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:57:21.453

您可以在母版页中创建一个公共属性，即

```
public bool ShowPanel
{
    set
    {
        NormalUser.Visible = value;
    }
} 
```

像这样称呼它

```
if (Page.Master is NameOfMasterPage)
{
    ((NameOfMasterPage)Page.Master).ShowPanel = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:10:48.173

由于 Panel 控件位于 ContentPlaceHolder 控件内，因此您必须首先获取对 ContentPlaceHolder 的引用，然后使用其 FindControl 方法来定位 TextBox 控件。

```
ContentPlaceHolder mpContentPlaceHolder;
Panel pn;
mpContentPlaceHolder = (ContentPlaceHolder)Master.FindControl("PHMainBlock");
if(mpContentPlaceHolder != null)
{
    pn = (Panel) mpContentPlaceHolder.FindControl("NormalUser");
    pn.Visible = false;
} 
```

[http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:34:46.267

这是我做类似事情的方法，并且效果很好：

```
if (Page.Master != null)
{
    var tempPanel = Page.Master.FindControl("MessagePanel") as UpdatePanel;
    if (tempPanel != null)
        tempPanel.Visible = true;

    var temp = Page.Master.FindControl("MessageForUser") as MessageToUser;
    if (temp != null)
        temp.PostWarningMessage(message, msgInterval);
} 
```

但是，我在 ContentPlaceHolder 正上方有“MessagePanel”和“MessageForUser”作为控件。这是我的标记：

```
<asp:UpdatePanel runat="server" Visible="true" ID="MessagePanel" >
    <ContentTemplate>
        <msg:MainMessage ID="MessageForUser" runat="server" Visible="true" />  
        <br />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:ContentPlaceHolder ID="cphContent" runat="server" Visible="true">              
</asp:ContentPlaceHolder> 
```

如果您的面板位于标签内，那么您应该能够在不需要 Page.Master.FindControl 的情况下引用面板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:53:56.053

一种方法是用javascript（jquery）解决这个问题：

```
$('.NormalUser').hide(); 
```

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

# svn - 用于 checkstyle 的 Svn 预提交钩子

> ID：10315970
> 
> 赞同：2
> 
> 时间：2012-04-25T12:48:22.243
> 
> 标签：svn, hook, checkstyle, pre-commit

这是我当前的 checkstyle shell 脚本。如果我在 TRUNK 上提交而不是在 Branches 上提交，它工作正常。我真的不明白为什么它不起作用。有人可以帮帮我吗？

```
#!/bin/sh

###################################################
#
# Verify Checkstyle
#
###################################################

REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook
JAVA=/opt/ibm/java2-i386-50/bin/java
CHECKSTYLE=/usr/local/checkstyle/checkstyle-all-5.1.jar
TMPDIR=/tmp/$TXN
REPORT=/tmp/$TXN/report
CHECKSTYLE_CONFIG=/usr/local/checkstyle/checkstyle.xml

CHANGED=`$SVNLOOK changed -t "$TXN" "$REPOS" | grep -v "^D" | awk '{print $2}'`
mkdir -p $TMPDIR
for LINE in $CHANGED ; do
    FILE=`echo $LINE | egrep -v Test\\.java$ | egrep -v \\/src\\/test\\/ | egrep -v \\/js\\/ext`
    if [ -n "$FILE" ] ; then
        DIRNAME=`dirname $FILE`
        mkdir -p $TMPDIR/$DIRNAME
        $SVNLOOK cat $REPOS --transaction $TXN $FILE > $TMPDIR/$FILE
    fi
done
$JAVA -jar $CHECKSTYLE -c $CHECKSTYLE_CONFIG -r $TMPDIR > $TMPDIR/tmpfile.checkstyle
X=$?
if [ $X -ne 0 ] ; then
    cat $TMPDIR/tmpfile.checkstyle > /dev/stderr
    rm -Rf $TMPDIR
    exit 1
fi
rm -Rf $TMPDIR

exit 0 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T16:57:21.117

忠告：不要将此作为预提交脚本。

*   任何预提交脚本都会阻止提交直到完成。如果我签入十几个文件，该脚本运行需要多长时间？当我第一次接触计算时，第二秒的响应时间被认为是可以接受的。现在，如果你在几秒钟内没有得到回应，人们就会抱怨。
*   在那些`checkstyle`没有问题的情况下，或者开发人员编写它的方式实际上比`checkstyle`坚持应该的更清晰和更容易理解的情况下会发生什么？当你使用类似`checkstyle`or的东西时`findbugs`，你必须明白你会得到一些误报。

更好的方法是使用像[Jenkins](http://jenkins-ci.org)这样的持续构建引擎。Jenkins 可以设置为在每次提交时自动启动构建。詹金斯可以：

*   自动存储构建结果。然后，您实际上可以直接从 Jenkins 发布代码以供测试和为您的客户使用。毕竟，您知道您测试过的相同 jar/ear/war 文件与您的客户将获得的相同。
*   自动运行各种测试，包括：
    *   格纹风格
    *   查找错误
    *   科尔贝图拉
    *   PMD
    *   干燥
    *   JUnit
    *   检查内置警告
    *   和其他几十个
*   Jenkins 将整个构建输出、所有保存的工件和所有测试保存在一个美观且易于查看的网页中，任何用户都可以使用该网页。
*   Jenkins 可以集成到各种问题跟踪工具中，因此您可以查看 Jenkins 构建特定问题所涉及的内容。

您不必使用 Jenkins。哈德森还在。CruiseControl 也是如此，您可以使用 TeamCity、Bamboo 和其他数十种持续构建系统。我喜欢 Jenkins，因为开发非常活跃，而且设置起来非常简单。第一次听说它时，我花了大约 30 分钟下载并运行我的第一份工作。

我知道你问过你的 pre-commit 钩子，我不想听起来像一个推销员（Jenkins 是免费和开源的，我与该项目没有任何联系），但是做一些复杂的事情，比如`checkstyle`检查 pre -commit 钩子是自找麻烦。使用持续构建服务器只是处理此问题的更好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:55:04.530

一个提示。

尝试比较目录结构，创建临时目录（删除“rm -Rf $TMPDIR”）。

也许您在树干和树枝之间有区别，例如：

主干：/tmp/12/code/file.java

分支：/tmp/br1/12/code/file.java

# asp.net-mvc - Ajax json 帖子不起作用

> ID：10315971
> 
> 赞同：1
> 
> 时间：2012-04-25T12:48:22.690
> 
> 标签：asp.net-mvc, jquery

我需要将 json 数据传递给控制器​​。因此我创建了一个 ajax 帖子。但它没有调用 action 方法。

```
function DeleteRow(postData) {
$.ajax({
    url: '@Url.Action("DeleteGridRow","Project")',
    type: 'POST',
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    async: false,
    data: JSON.stringify(postData),
    success: function (data) {

    }
}); 
```

}

我的行动方法

```
 [HttpPost]
    public JsonResult DeleteGridRow(string postData)
    {
        return Json(null);
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:05:20.790

如果您已将您的 javascript 文件与您的 cshtml 或 vbhtml 页面分开，那么这是行不通的。您的 URL 将被错误地解释。您应该将要提交的 URL 传递给函数 DeleteRow。像这样的东西：

```
$("#myForm").submit(function() {
    var url = $(this).attr("action");
    var data = Use your method to collect data or $(this).serialize();

    DeleteRow(url, data);
});

function DeleteRow(url, postData) {  
    $.ajax({  
        url: url,  
        type: 'POST',  
        dataType: "json",  
        contentType: "application/json; charset=utf-8",  
        async: false,  
        data: JSON.stringify(postData),  
        success: function (data) {  

    }  
}); 
```

像这样的东西应该工作。

# nhibernate - 'NHibernate.Cfg.Configuration' 的类型初始化程序引发异常

> ID：10315972
> 
> 赞同：6
> 
> 时间：2012-04-25T12:48:23.013
> 
> 标签：nhibernate

从 nhibernate 1.0.4.0 升级到 nhibernate 3.3 后，当我尝试运行“Configuration cfg = new Configuration();”时遇到以下错误

```
System.TypeInitializationException was caught
  Message="The type initializer for 'NHibernate.Cfg.Configuration' threw an exception."
  Source="NHibernate"
  TypeName="NHibernate.Cfg.Configuration"
  StackTrace:
       at NHibernate.Cfg.Configuration..ctor()
       at KEH.Web.Data.NHibernateUtil..cctor() in F:\Projects\KEH nHibernate\KEHWeb\Data\Data\NHibernateUtil.cs:line 24
  InnerException: System.NotSupportedException
       Message="The invoked member is not supported in a dynamic assembly."
       Source="mscorlib"
       StackTrace:
            at System.Reflection.Emit.AssemblyBuilder.get_Location()
            at log4net.Util.SystemInfo.AssemblyLocationInfo(Assembly myAssembly)
            at log4net.Core.DefaultRepositorySelector.GetInfoForAssembly(Assembly assembly, String& repositoryName, Type& repositoryType)
            at log4net.Core.DefaultRepositorySelector.CreateRepository(Assembly repositoryAssembly, Type repositoryType, String repositoryName, Boolean readAssemblyAttributes)
            at log4net.Core.DefaultRepositorySelector.CreateRepository(Assembly repositoryAssembly, Type repositoryType)
            at log4net.Core.DefaultRepositorySelector.GetRepository(Assembly repositoryAssembly)
            at log4net.Core.LoggerManager.GetLogger(Assembly repositoryAssembly, String name)
            at log4net.LogManager.GetLogger(Assembly repositoryAssembly, String name)
            at log4net.LogManager.GetLogger(Type type)
            at lambda_method(ExecutionScope , Type )
            at NHibernate.Log4NetLoggerFactory.LoggerFor(Type type)
            at NHibernate.LoggerProvider.LoggerFor(Type type)
            at NHibernate.Cfg.Configuration..cctor()
       InnerException: 
```

任何帮助将不胜感激。

NHibernateUtil 类代码如下：

```
public class NHibernateUtil
    {
        private static readonly Configuration cfg;
        private static readonly ISessionFactory sessionFactory;
        private static readonly ILog logger = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

        static NHibernateUtil()
        {
            try
            {
                logger.Debug("Before Initializing NHibernate");
                cfg  = new Configuration();
                cfg.AddAssembly("KEH.Web.Data");
                sessionFactory = cfg.BuildSessionFactory();
                logger.Debug("Initialized NHibernate");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        public static ISession OpenSession()
        {
            logger.Debug("Before Getting Connection");
            return sessionFactory.OpenSession();
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:56:06.407

我有同样的问题。实际原因是我使用了一个使用旧版本 log4net 的库。如果找到，NHibernate 会尝试使用它。所以我不得不通过添加这样的行来强制它使用（或实际上不使用）其他记录器： LoggerProvider.SetLoggersFactory(new NoLoggingLoggerFactory());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:06:16.443

不知道为什么它不起作用，但我只是更换

```
cfg.AddAssembly("KEH.Web.Data"); 
```

和

```
cfg.AddAssembly(typeof(Entity).Assembly); 
```

其中 Entity 是映射文件程序集中存在的某个类。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-31T22:01:44.053

为了其他可能通过 Google 找到此问题的人的利益：

对我们来说，这个错误是一个红鲱鱼。我们的应用程序运行良好，直到我们部署了一个新组件并且它会失败（以未知方式）并且 IIS 会回收应用程序池。问题是我们使用的 HTML 到 JPG 组件以某种方式出错并导致我们所有的 w3wp.exe 工作进程消耗最大 CPU。当应用程序池通过 IIS 回收时，整个站点将关闭，NHibernate 会不断抛出此错误，直到 iisreset。在回收之前，即使有 CPU 负载，站点仍然会非常敏感。

While we still don't know how the component was failing or why it was cascading to problems with NHibernate initializing, the point is it was a red-herring. Be sure to watch for this error "suddenly" occurring shortly after a new deployment, and keep logs of your CPU utilization so it can help spot when trouble is brewing. Finally, if the downtime is happening near the same time every day, it's probably an automatic IIS app pool recycle, and that should be another clue that something is bugging out your application and surfacing during the recycle.

Ultimately, we disabled the HTML to JPG component until a workaround can be found and our up-time sprung back to 100%.

Hope this helps someone.

# c++ - 保存 ostringreader.str().c_str()

> ID：10315974
> 
> 赞同：2
> 
> 时间：2012-04-25T12:48:27.793
> 
> 标签：c++, ostringstream

为什么在这段代码中读出 y 后 text1 的值会发生变化？

```
void func()
{
    int value1 = 5;
    double value2 = 1.5;
    std::ostringstream x, y;

    x << value1;
    y << value2;

    const char *text1 = x.str().c_str();
    fprintf(stderr, "text1: v=%s, p=%p\n", text1, &text1);
    const char *text2 = y.str().c_str();
    fprintf(stderr, "text1: v=%s, p=%p\ntext2: v=%s, p=%p\n", text1, &text1, text2, &text2);
} 
```

输出：

文本1：v = 5，a = 0xbfcfd508

文本 1：v = 1.5，a = 0xbfcfd508

文本 2：v = 1.5，a = 0xbfcfd510

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T12:51:01.927

计算完`str().c_str()`表达式后，调用创建的临时`std::string`实例`str()`被释放，`char`指针指向 Nirvana。您需要存储的返回值`str()`！

# wicket - wicket:scope 属性有什么作用？

> ID：10315975
> 
> 赞同：0
> 
> 时间：2012-04-25T12:48:30.277
> 
> 标签：wicket

没有它的文档[https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html#Wicket%2527sXHTMLtags-Attributewicket%253Ascope](https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html#Wicket%2527sXHTMLtags-Attributewicket%253Ascope)。它仅适用于组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:20:52.120

**wicket:scope 属性有什么作用？**
HtmlHeaderContainer 类记录了 wicket:scope 属性：

> wicket:head 标签（组件）只能添加一次。为了允许更多的控制，每个 wicket:head 都有一个关联的范围，默认情况下等于与包含 wicket:head 的标记直接关联的 java 类名。它可以通过范围属性进行修改。

在 HeaderPartContainer 类中进一步记录了它，简单地说明它是“一种命名空间”。

**它仅适用于组件吗？**
wicket:scope 属性仅用于标签。如 HtmlHeaderContainer 类级别 javadoc 中所述，该标记应仅用于“面板、边框和继承的标记（面板、边框和页面）”中。

简而言之，您的问题的答案是否定的，该属性可以在从父级继承标记的页面内的标签内使用。这里的含义是，标签仅在您不只使用标签的情况下才有意义（即在基本页面 html 文件中）。

# php - 将数据库记录与上传文件夹中的图像匹配

> ID：10315977
> 
> 赞同：0
> 
> 时间：2012-04-25T12:48:31.917
> 
> 标签：php, mysql, database, image, image-uploading

我有一个数据库，其中包含用户信息，例如姓名、电子邮件等。当他们注册时，他们必须上传图片。目前他们这样做的时候。图像进入服务器上的“上传”文件夹。

我的问题是，我如何将数据库记录与文件夹中的对应图像对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:53:54.067

您可以使用数据库中唯一的名称来命名图像。例如，如果用户 id 为 157 的“John”上传了一张图片，请将图片命名为 157.jpg - 然后您可以在文件夹中查询该 id 和扩展名。

对不起，重新阅读评论。

我假设您的上传文件超出了文档路径，对吗？这是否有帮助：

```
header('Content-Type: image/x-png'); //or jpg....
readfile('displayfile.png');
die(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:54:01.457

您应该在数据库中存储文件名/url（使其唯一，md5 用户 ID 或其他内容）作为参考，这是处理这种类型的照片 + 用户关系的最佳方式。和往常一样，只需将实际文件保存在`/uploads/`

只需在您的数据库中创建一个名为的列`user_photo`并将链接保存到文件`/uploads/john_smith_321sf.jpg`

这样以后，您只需使用数据库数据检索它。

# mysql - sql查询日期过滤结果

> ID：10315981
> 
> 赞同：0
> 
> 时间：2012-04-25T12:48:38.830
> 
> 标签：mysql, database

我创建了一个数据库来存储来自网站的统计信息，例如流量。我正在尝试在数据库中查询过去 30 天内捕获的唯一 IP 地址的数量；

```
SELECT COUNT(*) totalA FROM statistics GROUP by ipAddress 
AND DATE_SUB(CURDATE( ) ,INTERVAL 30 DAY) LIMIT 0, 30 
```

但是查询只返回表中数据条目的数量。我使用了相同的查询减去日期过滤器并得到了正确的结果，所以只是日期过滤搞砸了

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:56:45.200

我想这就是你要找的。基本上，我只是将您的日期代码放在 WHERE 子句中，并将其与表中的日期列进行比较。显然，您需要将“entryDate”更改为日期列的名称。

```
SELECT COUNT(*) AS totalA
FROM statistics
WHERE entryDate >= DATE(CURDATE()-INTERVAL 30 DAY)
GROUP BY ipAdress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:56:41.673

这是因为你`GROUP BY`在`ipAddress AND DATE_SUB(CURDATE( ), INTERVAL 30 DAY)`并且这个表达式产生`AND`两个字段之间的逻辑，它只有 2 个可能的值。不过，您并不关心区分和请求只是`count(*)`.

你可能想要的是：

```
SELECT ipAddress, DATE_SUB(CURDATE( ), INTERVAL 30 DAY), COUNT(*) AS totalA
  FROM statistics
 GROUP by ipAddress, DATE_SUB(CURDATE( ), INTERVAL 30 DAY)
 LIMIT 0, 30 
```

# wordpress - 如何使用 wp_nav_menu() 在 Wordpress 中自定义 html 菜单？

> ID：10315983
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:48:44.773
> 
> 标签：wordpress

```
<ul id="nav">
  <li class="top"><a href="index.php" class="top_link"><span>Home</span></a></li>
  <li class="top"><a href="index.php" class="top_link"><span>About Us</span></a></li>
  <li class="top"><a href="index.php" class="top_link"><span>Gallery</span></a></li>
  <li class="top"><a href="index.php" class="top_link"><span>Registration</span></a></li>
  <li class="top"><a href="index.php" class="top_link"><span>Contact Us</span></a></li>
</ul> 
```

帮助！我是 Wordpress 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:57:47.340

我通常使用 get_pages() 然后对 foreach 循环中的布局做任何我喜欢的事情。

[获取页面（）](http://codex.wordpress.org/Function_Reference/get_pages)

# android - ContentResolver.query 是否转义了参数，还是只是替换了问号？

> ID：10315984
> 
> 赞同：0
> 
> 时间：2012-04-25T12:48:44.817
> 
> 标签：android, sql, sqlite

是否[`ContentResolver.query`](http://developer.android.com/reference/android/content/ContentResolver.html#query%28android.net.Uri,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String%29)逃避选择参数？

例如，我是否应该`selArgs`在执行类似操作之前手动转义参数

```
Cursor c = contentResolver.query(uri, null, "mimetype=?", selArgs, null); 
```

还是通过`query`方法完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:04:32.323

不，您应该在您的内容提供商中手动执行此操作。

查询函数源码：

```
public final Cursor query(Uri uri, String[] projection,
            String selection, String[] selectionArgs, String sortOrder) {
        IContentProvider provider = acquireProvider(uri);
        if (provider == null) {
            return null;
        }
        try {
            long startTime = SystemClock.uptimeMillis();
            Cursor qCursor = provider.query(uri, projection, selection, selectionArgs, sortOrder);
            if (qCursor == null) {
                releaseProvider(provider);
                return null;
            }
            // force query execution
            qCursor.getCount();
            long durationMillis = SystemClock.uptimeMillis() - startTime;
            maybeLogQueryToEventLog(durationMillis, uri, projection, selection, sortOrder);
            // Wrap the cursor object into CursorWrapperInner object
            return new CursorWrapperInner(qCursor, provider);
        } catch (RemoteException e) {
            releaseProvider(provider);

            // Arbitrary and not worth documenting, as Activity
            // Manager will kill this process shortly anyway.
            return null;
        } catch (RuntimeException e) {
            releaseProvider(provider);
            throw e;
        }
    } 
```

# ruby-on-rails - 如何将 Capistrano 解压并重新解压到正确的位置

> ID：10315986
> 
> 赞同：5
> 
> 时间：2012-04-25T12:48:58.277
> 
> 标签：ruby-on-rails, rvm, capistrano

尝试执行此操作时出现此错误：`bundle exec cap deploy`

```
"RVM - Capistrano integration was extracted to a separate gem, \
install: `gem install rvm-capistrano` and remove the `$LOAD_PATH.unshift` line, \
note also the 'set :rvm_type, :user' is now the default (instead of :system)." 
```

不幸的是，这些技巧都没有真正奏效。

问题源于我必须将我的 RVM 副本恢复为旧副本以使其符合 POW。完成此操作后，此功能不再起作用。哪*一种是有道理的*。

所以我的问题很简单，我如何重新设计我的 Capistrano 精确度而**不是单独的 gem**。

我尝试卸载所有内容，重新安装所有内容，但这似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:53:57.523

我和你有同样的问题。在我的 deploy.rb 文件中，我不得不注释掉这一行：

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path'])) # Add RVM's lib directory to the load path. 
```

IE

```
# $:.unshift(File.expand_path('./lib', ENV['rvm_path'])) # Add RVM's lib directory to the load path. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:21:21.887

RVM 与 POW 一起使用，这是已知问题：[https ://github.com/37signals/pow/issues/271](https://github.com/37signals/pow/issues/271)

最简单的解决方案（在项目目录中）：

```
rvm env . > .powenv 
```

只需使用最新的 RVM、POW、rvm-capistrano gem - 它应该可以正常工作。

# javascript - 使用 JQuery，如何停止传播 DOM 的点击事件？

> ID：10315997
> 
> 赞同：2
> 
> 时间：2012-04-25T12:49:29.737
> 
> 标签：javascript, jquery, html

给定以下 HTML 片段：

```
<li class="list">
  <img src="/assets/img/site/arrow_black.png"/>My List Element<span class="star"></span>
</li> 
```

当我将单击事件绑定到`li`元素并将单击事件绑定到`.star`类时，我的问题如下：

**`li`当我点击星星时，如何在触发时停止点击事件？**

我的 JQuery 代码看起来类似于：

```
$(".list").click(function() {
//do something
}

$(".star").click(function() {
//do something
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T12:51:19.060

见[jQuery.stopPropagation()](http://api.jquery.com/event.stopPropagation/)

```
$(".star").click(function(e) {
    e.stopPropagation();
    // do work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:50:53.750

尝试[`event.stopPropagation();`](http://api.jquery.com/event.stopPropagation/)

```
$(".star").click(function(event) {
  event.stopPropagation();
  // Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:52:03.060

您需要停止 .star 的平均传播。

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$(".star").click(function(ev) {
    ev.stopPropagation();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:54:10.230

您可以使用事件委托..

将事件监听器应用到 ul

```
document.getElementById("parent-list").addEventListener("click",function(e) {

if(e.target && e.target.nodeName == "LI") {
    var classes = e.target.className.split(" ");

    if(classes) {

      for(var x = 0; x < classes.length; x++) {

        if(classes[x] == "star") { // do your thing
                                  }
                    }
          }
  }
});

}); 
```

或者只是使用 preventDefault 来星级