# StackOverflow 问答 11539000-11539999

# php - 如何将助手加载到 symfony 中的另一个助手中

> ID：11539006
> 
> 赞同：0
> 
> 时间：2012-07-18T10:09:26.500
> 
> 标签：php, symfony1, symfony-1.4

我想从另一个助手中使用该`distance_of_time_in_words`功能。`DateHelper`

如何在`DateHelper`我的自定义 Helper 中使用 symfony？

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:14:34.130

I think the best way, is to define your helper globally, in your `apps/frontend/config/settings.yml`:

```
all:
  .settings:
    standard_helpers:  [Partial, Cache, I18N, Date] 
```

This way, all the helpers from `standard_helpers` will always be loaded and available in your view.

Ps: be careful to not override your own `standard_helpers` but just add `Date` to the end.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:47:04.530

我想我找到了解决方案。

在我的助手中调用 distance_of_time_in_words() 函数之前添加了以下行。

```
sfProjectConfiguration::getActive()->loadHelpers(array('Date')); 
```

这正是我需要的，谢谢。

# c# - 无法将多个枚举分配给 UltraWinGrid ValueList 的单列？

> ID：11539008
> 
> 赞同：0
> 
> 时间：2012-07-18T10:09:35.230
> 
> 标签：c#, .net, winforms, infragistics

我是初学者。我有一个 wingrid，如果将单个枚举分配给列 valuelist，那么它会完美地显示枚举名称。

但是，当我将多个枚举分配给 valuelist 列时，它会将所有单元格值分配为与枚举值对应的数字，并且仅用于

分配给 valuelist 的最后一个枚举完美地显示了枚举值下面是具有 3 行的列，每行具有不同的枚举值，例如 A 列

```
 1 

   65

  EnumName 
```

上面的列显示了正在发生的场景，它向我显示了除 lastone 之外的所有数字，似乎它覆盖了值列表项，并且网格只能显示最后声明的枚举名称。

```
 e.Layout.Bands[0].Columns["Quantity"].ValueList = e.Layout.ValueLists["QuantityType"];
    e.Layout.Bands[0].Columns["Quantity"].ValueList = e.Layout.ValueLists["CrimEmpQuantityType"];
    e.Layout.Bands[0].Columns["Quantity"].ValueList = e.Layout.ValueLists["CrimCreditQuantityType"]; 
```

此代码是在网格 initialize_Layout 事件下编写的，这里 QuantityType、CrimEmpQuantityType、CrimCreditQuantityType 是我的枚举，列显示“CrimCreditQuantityType”的枚举名称和其余枚举的编号。有什么办法可以将多个枚举分配给单列的值列表？或任何其他人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:53:07.647

列的 ValueList 属性只能引用单个 IValueList，因此当您多次设置它时，您将替换它指向的引用。如果您需要为各个行设置不同的值集，则需要在各个单元格上设置 ValueList。如果您有一个比其他值列表使用更多的值列表，您仍然可以将其设置为列的 ValueList，然后根据需要在单个单元格上使用其他两个实例。

[UltraGridCell ValueList 属性](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR2.0/?page=Infragistics2.Win.UltraWinGrid.v12.1~Infragistics.Win.UltraWinGrid.UltraGridCell~ValueList.html)的 API 文档中有一个示例。

# asp.net - TransmitFile 在 Response.End 之后继续 page_load

> ID：11539010
> 
> 赞同：0
> 
> 时间：2012-07-18T10:09:38.977
> 
> 标签：asp.net, pageload, transmitfile

我一直在寻找一个星期的答案，我放弃了。我正在创建一个 excelfile，然后让用户使用 TransmitFile 将其下载到他的客户端。问题是，这在大多数情况下都能完美运行，但在某些情况下（可以重复），在 Response.End 之后，页面重新加载并调用 page_load。标志 IsPostBack 为假。此行为中断下载，整个应用程序停止工作，显示连接到服务器。

```
foreach (string filename in Directory.GetFiles(WebConfigurationManager.AppSettings.Get("EXCEL_PATH")))
{
    if (File.GetLastWriteTime(filename) < (DateTime.Now.AddDays(-1)))
    {
        File.Delete(filename);
    }
}
ClsOrderFormData ofData = new ClsOrderFormData(ddOrderTypes.SelectedValue, OF.Customer.CustomerCategory);

ClsExportOF xls = new ClsExportOF(OF.SizeDims, ofData, OF.Customer, Request.PhysicalApplicationPath, ClsPrintOrder.getOrderData().TheOrder.Articles);
string sFileName = xls.CreateExcelFile();
FileInfo OutFile = new FileInfo(WebConfigurationManager.AppSettings.Get("EXCEL_PATH") + sFileName);
Response.Clear();
Response.AddHeader("content-disposition", "attachment; filename=Abacus_OF_" + ddOrderTypes.SelectedItem.Text + "_" + ddCustomer.SelectedItem.Text + "_" + DateTime.Now.ToShortDateString() + ".xls".Replace(',', '-'));
Response.ContentType = "application/vnd.ms-excel";
Response.TransmitFile(WebConfigurationManager.AppSettings.Get("EXCEL_PATH") + sFileName, 0, OutFile.Length);
Response.Flush();
Response.End(); 
```

简而言之。当它正常工作时，在 Response.End() 之后不再执行代码，正如预期的那样。当它不起作用时，它会继续 page_load 等等，并且该站点会挂起。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:05:17.970

尝试使用 HttpApplication.CompleteRequest 而不是 Response.End。Response.End 可能会抛出一个 ThreadAbortException ，这会扰乱进程。

见... [http://ardalis.com/Use-HttpApplication.CompleteRequest-Instead-of-Response.End](http://ardalis.com/Use-HttpApplication.CompleteRequest-Instead-of-Response.End) http://weblogs.asp.net/hajan/archive/2010/09/26/why-not-to -使用-httpresponse-close-and-httpresponse-end.aspx

# c# - 为什么 IQueryable 上的 .Where() 会根据 Lamba 还是 Func 返回不同的类型 作为参数传递

> ID：11539012
> 
> 赞同：3
> 
> 时间：2012-07-18T10:09:44.313
> 
> 标签：c#, linq, entity-framework, lambda, linq-to-entities

在我的 Entity Framework Code First 项目中，我有一个包含路由的存储库对象

```
public class EFRepository
{
    ...
    public IQueryable<Route> Routes
    {
        get { return context.Routes; }
    }
   ...
} 
```

如果我跑

```
var routes = this.repository.Routes
                  .Where(r => r.DeployedService.IsActive.HasValue 
                   && r.DeployedService.IsActive.Value); 
```

路线对象的类型`IQueryable<Route>`。

但是，如果我运行

```
Func<Route, bool> routeIsActive = r => r.DeployedService.IsActive.HasValue 
                                      && r.DeployedService.IsActive.Value;
var routes = this.repository.Routes.Where(routeIsActive); 
```

在这种情况下，路由对象的类型是`IEnumerable<Route>`。

我原以为他们会被评估相同，但显然我错了。这两个语句有什么区别，为什么它们返回不同的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:13:55.090

该方法`.Where(Expression<Func<Route,bool>>)`由 定义`IQueryable<Route>`。`.Where(Func<Route,bool>)`另一方面，该方法是由`IEnumerable<Route>`而不是由定义的`IQueryable<Route>`。因此，每个都为流畅的 LINQ 方法链接返回自己的类型。

定义的附加方法`IQueryable`允许将表达式树下推到 LINQ 提供程序，例如 LINQ-to-entities，以便在可能的情况下在提供程序级别进行延迟延迟评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:11:17.920

因为传递`Func<Route,bool>`会使它成为 Linq-to-objects（`Func`是 .NET 委托，它将在 .NET 代码中执行）。它告诉 EF：加载所有路由，我将在 .NET 代码中进行过滤。

您需要传递一个表达式 ( `Expression<Func<Route,bool>>`)，该表达式将在内部转换为 SQL 以使用 Linq-to-entities。它告诉 EF：这是我要转换为 SQL 并在数据库服务器上执行的过滤器，我只想接收过滤后的结果集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:14:31.733

`IQuerable<T>` inherits from `IEnumerable<T>`. This means that `Where` is overloaded:

One overload takes an expression and returns an `IQuerable<T>`.

```
public static IQueryable<TSource> Where<TSource>(this IQueryable<TSource> source, Expression<Func<TSource, bool>> predicate) 
```

The other overload takes a function and returns an `IEnumerable<T>`.

```
public static IQueryable<TSource> Where<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) 
```

If you pass in a lambda, both overloads are applicable, and overload resolution prefers the first one. If you pass in a `Func<T,bool>`, then only the second overload is applicable.

If you change the type of your variable to `Expression<Func<Route, bool>>`, then you'll get an `IQueryable<Route>` back.

# sql-job - 从 sql 作业运行 exe 文件

> ID：11539017
> 
> 赞同：2
> 
> 时间：2012-07-18T10:10:15.293
> 
> 标签：sql-job

我正在尝试从 sql 作业运行 exe。数据库在服务器上，以及 exe 文件。exe应该在日志上写东西。即使 sql 作业成功，我也没有看到日志文件有任何变化。我已经在本地检查了exe，它确实有效。

该作业在 cmdexec 类型上运行，命令为：

```
\\ustlvint02\c\FixProjectsWhichFailedSync\FixProjectsWhichFailedSync.exe 
```

ustlvint02 - 服务器的名称。该路径是有效的，因为我通过在我的计算机上运行它来测试它（在那里，也没有创建日志）。

我会很感激你能提供的任何帮助。哈达斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T08:54:41.923

在 %WINDIR%\System32（适用于 32 位版本的 SQL Server）或 %WINDIR%\SysWOW64（适用于 64 位版本的 SQL Server）中查找日志文件，其中 %WINDIR% 是所在文件夹的路径已安装 Windows（通常为 C:\Windows）。此目标不依赖于为 SQL 代理作业指定的系统帐户。您的可执行文件需要写入或读取的所有文件必须在绝对路径中指定或在相对路径中指定，因此存在于上述系统文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:43:42.687

运行 SQL Server 代理的帐户需要具有以下权限：1.) 取消该位置的 exe 和 2.) 写入日志文件位置。

[找出 SQL Agent 使用的帐户](http://msdn.microsoft.com/en-us/library/ms178142.aspx)，然后验证该用户是否具有正确的执行和写入权限。

# jdbc - jdbc resultSet 性能慢

> ID：11539022
> 
> 赞同：0
> 
> 时间：2012-07-18T10:10:39.727
> 
> 标签：jdbc, oracle10g

hiii，我在我的 Web 应用程序的 java 类中调用存储过程，有一些报告需要花费大量时间来呈现 jsp/HTML，我还使用存储过程查询进行了检查，它只需 2 秒即可执行甲骨文浏览器。我检查了我的 SP 调用代码，发现我的结果集获取时间非常短，但是当尝试使用 While(rst.next) 迭代结果集时，在 while 循环中打印 SOP 几乎需要 3 分钟，我怀疑 ret.next() 一定有问题，我的代码如下，

```
Connection connection   = null;
CallableStatement stmt  = null;
ResultSet rst           = null ;

connection = DBConnector.getConnection();

stmt = connection.prepareCall("{call MIS_GSGR_ASON.MIS_DIVNETSALE_ASON(?,?,?,?,?,?,?,?,?)}");

            stmt.setString(1,START_DT);                 
            stmt.setString(2,END_DT);                   
            stmt.setString(3,DIVISION);             
            stmt.setString(4,LOC_ID);   
            stmt.setInt(5,USER_GRP);
            stmt.setInt(6,FIELD_ID);
            stmt.setInt(7,Integer.parseInt(PERIOD_ID));
            stmt.setString(8,zone);
            stmt.registerOutParameter(9+INC,OracleTypes.CURSOR);
            stmt.execute();
            rst = (ResultSet) stmt.getObject(9+INC);

            System.out.println("Got resultset . . . .");

            data = new ArrayList<MainActionAll>();

            while(rst.next()){
            System.out.println("In loop");} 
```

任何帮助都将受到高度评价，请帮助我，谢谢，amol

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:30:45.470

也许您通过慢速网络运行查询，如果返回很多行，它的运行速度很慢？

添加一些时间检查，而不是打印到控制台，只需计算记录：

```
...
...
...
stmt.registerOutParameter(9+INC,OracleTypes.CURSOR);
long t0, t1, t2, t3, t4, t5;
t0 = System.currentTimeMillis();
stmt.execute();
t1 = System.currentTimeMillis();
rst = (ResultSet) stmt.getObject(9+INC);
t2 = System.currentTimeMillis();
System.out.println("Got resultset . . . .");
data = new ArrayList<MainActionAll>();
t3 = System.currentTimeMillis();
t4 = t3;
t5 = t3;

int rec_cnt = 0;
if (rst.next())
    {
    ++rec_cnt;
    t4 = System.currentTimeMillis();
    while (rst.next())
        ++rec_cnt;
    t5 = System.currentTimeMillis();
    }
System.out.println("execute: " + (t1 - t0));
System.out.println("stmt.getObject: " + (t2 - t1));
System.out.println("Array: " + (t3 - t2));
System.out.println("1st next: " + (t4 - t3));
System.out.println("loop: " + (t5 - t4));
System.out.println("rec cnt: " + (rec_cnt)); 
```

尝试在尽可能靠近数据库服务器的地方执行它以减少网络传输（首选本地主机）。用那些时间编辑你的问题。

# list - Magento Product_List_Crosssell

> ID：11539023
> 
> 赞同：0
> 
> 时间：2012-07-18T10:10:49.583
> 
> 标签：list, magento, product

对于产品视图页面，Crosssells 似乎不适用于我的 Magento EE 安装。我已经调试了产品列表交叉销售块，但似乎在通过各种代码的途中崩溃了，同时收集了集合。无法弄清楚原因（调试到某个级别时出现白屏......因此没有设置项目集合。很难弄清楚。没有记录异常）。

我在安装时没有错误……当然我不需要编辑任何逻辑，因为默认情况下提供了该功能。我遵循了这个例子：

[http://www.magentocommerce.com/boards/viewthread/51529/](http://www.magentocommerce.com/boards/viewthread/51529/)

我的 crossells 像往常一样显示在购物车页面上……但我无法让它们显示在我的产品视图页面上。这是我的一些代码：

目录.xml：

```
 <block type="catalog/product_list_crosssell" name="product.info.crosssell" as="crosssell_products" template="catalog/product/list/crosssell.phtml"/> 
```

产品/列表/crosssell.phtml：

```
if(count($this->getItems())): ?>

        <div id="also_bought_productslist" class="inner">   

            <?php $i=0; 
            foreach ($this->getItems() as $product): 
```

任何人都知道我可能会错过什么。有没有人在他们的产品视图页面中添加了 crossells？

只是为了澄清...这是使用默认的 PRODUCT_LIST_CROSSELL 块...并且我没有尝试使用结帐/购物车/crossell 代码（我知道这依赖于购物车功能/数据才能正常工作。我确实尝试过这个，并且仍然没有 crossell 项目....但它们确实显示在购物车页面中。）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:19:08.140

目录 xml 文件中的语法。即，一个 AFTER="blahblah" 声明......并使用相同的块代码两次

旧代码：

```
<block type="catalog/product_list_crosssell" name="product.info.crosssell" as="crosssell_products" template="catalog/product/list/crosssell.phtml"/>             
<block type="catalog/product_list_related" name="alsoboughttabs" after="forgettoaddproducts" template="pagetabs/alsobought_pagetabs.phtml" />
<block type="catalog/product_list_related" name="forgettoaddproducts" after="product.info" template="catalog/product/list/dontforgettoadd.phtml" /> 
```

新代码：

```
<block type="catalog/product_list_crosssell" name="product.info.crosssell" as="crosssell_products" template="catalog/product/list/crosssell.phtml"/>             
<block type="catalog/product_list_upsell" name="alsoboughttabs" template="pagetabs/alsobought_pagetabs.phtml" />
<block type="catalog/product_list_related" name="forgettoaddproducts" after="product.info" template="catalog/product/list/dontforgettoadd.phtml" /> 
```

# javascript - 将 CSS 应用于正确放置的字母

> ID：11539024
> 
> 赞同：3
> 
> 时间：2012-07-18T10:10:55.137
> 
> 标签：javascript, jquery, css, drag-and-drop

目前，此代码在完成后将 CSS 样式应用于单词。我需要将样式应用于单个字母以确定它们是否正确放置。

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2").fadeOut(1300);

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow");

        }
    }
}
}); 
```

CSS是...

```
.wordglow {
    -webkit-box-shadow: inset 2px 2px 20px 7px #ff0000;
    box-shadow: inset 2px 2px 20px 7px #ff0000;

}

.wordglow2 {

    -webkit-box-shadow: inset 2px 2px 20px 7px #22ff22;
    box-shadow: inset 2px 2px 20px 7px #22ff22;

} 
```

我试过这个，但没有快乐......

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-letter=' + word + ']').addClass("wordglow2").fadeOut(1300);

        } else {
            $('td[data-letter=' + word + ']').addClass("wordglow");

        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:59:31.410

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event).toString().toSource());
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");

        }
    }

},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

 }); 
```

# r - 拆分数据框，应用函数，并在嵌套列表中返回结果

> ID：11539026
> 
> 赞同：1
> 
> 时间：2012-07-18T10:10:59.347
> 
> 标签：r, list, plyr

我的问题的标题几乎与`dlply`（`plyr`包）描述相匹配，除了“嵌套”部分。

让我用一个例子来解释：

```
library(plyr)
res <- dlply(mtcars, c("gear", "carb"), identity)
head(res, 2)
# $`3.1`
#                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
# Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
# Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
# Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
# 
# $`3.2`
#                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
# Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
# Dodge Challenger  15.5   8  318 150 2.76 3.520 16.87  0  0    3    2
# AMC Javelin       15.2   8  304 150 3.15 3.435 17.30  0  0    3    2
# Pontiac Firebird  19.2   8  400 175 3.08 3.845 17.05  0  0    3    2 
```

如您所见，输出是一个列表，其中名称（键）是我用于拆分数据的两个变量的串联，`"3.1"`例如`(gear = 3, carb = 1)`.

相反，我希望我的结果是一个嵌套列表，因此可以通过两组键访问元素，一组键用于我的每个拆分变量：`res[["3"][["1"]]`.

周围有什么东西（不一定来自`plyr`包装）可以实现这一目标吗？我希望答案可以推广到任意数量的拆分变量。此外，尽管我的示例使用了该`identity`函数，但我可以应用任何函数也很重要，这只会导致数据的拆分。谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:30:26.607

我自己提出了一个解决方案，它使用递归：

```
nested.dlply <- function(df, by, fun, ...) {

   require(plyr)

   if (length(by) == 1) {
      dlply(df, by, fun, ...)
   } else {
      dlply(df, by[1], nested.dlply, by[-1], fun, ...)
   }
} 
```

这里有几个例子：

```
nested.dlply(mtcars, c("gear", "carb"), identity)
# $`3`
# $`3`$`1`
#                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
# Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
# Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
# Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
# 
# $`3`$`2`
#                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
# Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
# Dodge Challenger  15.5   8  318 150 2.76 3.520 16.87  0  0    3    2
# AMC Javelin       15.2   8  304 150 3.15 3.435 17.30  0  0    3    2
# Pontiac Firebird  19.2   8  400 175 3.08 3.845 17.05  0  0    3    2
# [...]

nested.dlply(mtcars, c("gear", "carb"), head, 2)
# $`3`
# $`3`$`1`
#                 mpg cyl disp  hp drat    wt  qsec vs am gear carb
# Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
# Valiant        18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
# 
# $`3`$`2`
#                    mpg cyl disp  hp drat   wt  qsec vs am gear carb
# Hornet Sportabout 18.7   8  360 175 3.15 3.44 17.02  0  0    3    2
# Dodge Challenger  15.5   8  318 150 2.76 3.52 16.87  0  0    3    2
# [...] 
```

我怀疑这是非常有效的，但它确实有效。我仍然欢迎你的建议。理想情况下，我希望一些包已经实现了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:02:50.137

嵌套`split`呢？

```
temp = lapply(split(mtcars, mtcars$gear), function(x) split(x, x$carb))
temp[["3"]]["1"]
# $`1`
#                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
# Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
# Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
# Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1 
```

# c# - 用静态图像替换深度数据 - C# / Kinect

> ID：11539027
> 
> 赞同：1
> 
> 时间：2012-07-18T10:11:00.767
> 
> 标签：c#, arrays, kinect, pixels, bitmapimage

我需要用图像替换不是播放器的背景像素，我可以用 ColorFrameImage 成功替换用户像素，但是一旦我尝试用图像像素替换其余的深度位。. 我收到 XamlParseError 异常

更新： ims.PixelHeight 和 ims.PixelWidth 导致异常。.

我可能将位图图像转换为像素错误。.

有什么解决办法吗？

这是代码：

```
public partial class MainWindow : Window
{

    Byte[] pixels;

    Byte[] pix;

    Byte[] pixy;

    BitmapImage ims;

    public MainWindow()
    {
        InitializeComponent();

        ims = new BitmapImage();
        ims.BeginInit();
        ims.UriSource = new Uri(@"/autumn_scene.jpg", UriKind.RelativeOrAbsolute);

        //int height = ims.PixelHeight;
       // int width = ims.PixelWidth;
        //int nStride = (ims.PixelWidth * ims.Format.BitsPerPixel + 7) / 8;

      //  pixy = new byte[(ims.PixelHeight* 4+1)];

      //  MessageBox.Show("Pixel Height" + ims.PixelHeight);
        MessageBox.Show("I hate Exceptions");

        //System.Console.WriteLine("Pixel Height" + ims.PixelHeight);

   //     ims.CopyPixels(pixy, nStride, 0);

      //  ims.EndInit();

        }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        kinectSensorChooser1.KinectSensorChanged += new DependencyPropertyChangedEventHandler(kinectSensorChooser1_KinectSensorChanged);
    }

    void kinectSensorChooser1_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        KinectSensor oldSensor = (KinectSensor)e.OldValue;
        StopKinect(oldSensor);

        KinectSensor newSensor = (KinectSensor)e.NewValue;

        //NOTE: Add this check for a null sensor
        if (newSensor == null)
        {
            return;
        }

        newSensor.ColorStream.Enable();
        newSensor.DepthStream.Enable();
        newSensor.SkeletonStream.Enable();
        newSensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(newSensor_AllFramesReady);

        try 
{
    newSensor.Start();
}
catch (System.IO.IOException)
{

 kinectSensorChooser1.AppConflictOccurred();
}
    }

    void newSensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {

    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (depthFrame == null)
            {
                return;
            }

            if (colorFrame == null)
            {
                return;
            }

            pixels = GenerateColoredBytes(depthFrame,colorFrame);

            //pix = new byte[colorFrame.PixelDataLength];
            //colorFrame.CopyPixelDataTo(pix);

            int stride2 = colorFrame.Width * 4;

            image1.Source = BitmapSource.Create(colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels, stride2);

            //Number of bytes per row
            int stride = depthFrame.Width * 4;

           image2.Source =  BitmapSource.Create(depthFrame.Width, depthFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels, stride);
          //  image2.Source = ims;
        }

    }

   private byte[] GenerateColoredBytes(DepthImageFrame depthFrame, ColorImageFrame colorFrame)

    {

        //Getting raw depth data

        short[] rawDepthData = new short[depthFrame.PixelDataLength];
        depthFrame.CopyPixelDataTo(rawDepthData);

        pixels = new byte[depthFrame.Width * depthFrame.Height * 4];

        pix = new byte[colorFrame.Width * colorFrame.Height * 4];

        colorFrame.CopyPixelDataTo(pix);

     //  ColorImagePoint mapval = depthFrame.MapToColorImagePoint(depthFrame.Width,depthFrame.Height,
        //Getting & Setting the BGR values
        const int BlueIndex = 0;
        const int GreenIndex = 1;
        const int RedIndex = 2;
     //   const int alpha = 3;

       // int nStride = (ims.PixelWidth * ims.Format.BitsPerPixel + 7) / 8;

       //byte[] pixy = new byte[ims.PixelHeight * nStride];

       // ims.CopyPixels(pixy,nStride,0);

       for (int depthIndex = 0, colorIndex = 0; depthIndex < rawDepthData.Length && colorIndex < pixels.Length; depthIndex++, colorIndex += 4) {
            //Player formula
            int player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;

            //Depth / Distance formula
            int depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

            if (player > 0)
            {
                pixels[colorIndex + BlueIndex] = pix[colorIndex + BlueIndex];
                pixels[colorIndex + GreenIndex] = pix[colorIndex + GreenIndex];
                pixels[colorIndex + RedIndex] = pix[colorIndex + RedIndex];

              //  pixels[colorIndex + BlueIndex] = 
            }else{

                //if (colorIndex + RedIndex < pixy.Length)
                //{

                //    pixels[colorIndex + BlueIndex] = pixy[colorIndex + BlueIndex];
                //    pixels[colorIndex + GreenIndex] = pixy[colorIndex + GreenIndex];
                //    pixels[colorIndex + RedIndex] = pixy[colorIndex + RedIndex];
                //}
                //else
                {
                    pixels[colorIndex + BlueIndex] = 255;
                    pixels[colorIndex + GreenIndex] = 0;
                    pixels[colorIndex + RedIndex] = 0;
                    //   pixels[colorIndex + alpha] = 0;
                }

            }
       }

            return pixels;
   }

void StopKinect(KinectSensor sensor){
        if (sensor != null)
        {
            //NOTE: Add this code
            if (sensor.IsRunning)
            {
                sensor.Stop();
                if (sensor.AudioSource != null)
                {
                    sensor.AudioSource.Stop();
                }
            }
        }
    }

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        StopKinect(kinectSensorChooser1.Kinect);
    }
} 
```

# javascript - jquery插件选项数组，防止数组覆盖

> ID：11539028
> 
> 赞同：0
> 
> 时间：2012-07-18T10:11:01.113
> 
> 标签：javascript, jquery, jquery-plugins

我正在为 jquery 编写一个插件，并且我使用了这样的代码来允许用户为插件指定选项：

```
var settings = $.extend({
    url     : 'error.json',
    slotWidth   : 100,
    slotHeight  : 100,
    gridWidth   : 6,
    gridHeight  : 3,
    basketLayers    : 1,
    layerDirection  : "vertical",
    classNames  : {
            productPanelParent  : '.products-panel-parent',
            productPanelTabs    : '.products-panel-tabs',
            productPanelGroup   : '.products-panel-container',
            productPanel    : '.products-panel',
            productBasketParent : '.products-basket-parent',
            productBasketGroup  : '.products-basket-container',
            productBasket   : '.products-basket',
            productBasketMenu   : '.products-basket-menu',
            basketSlot      : '.basket-slot',
            basketSlotFull  : '.basket-slot-full',
            basketSlotHelper    : '.basket-slot-highlight',
            product     : '.product',
            resetBasket     : '.clearBasket',
            resetLayer      : '.clearLayer',
            viewLayer       : '.viewLayer'
          }
}, options); 
```

问题是，当我尝试覆盖其中一个类名时，整个数组`null`都会在未指定属性的地方用值覆盖。

例如，我会做这样的事情：

```
$('#somediv').myPlugin({
    gridWidth : 4,
    gridHeight : 2,
    classNames : {
        productBasket : '.small_basket'
    }
}); 
```

该`settings.classNames.productBasket`属性将是正确的值，但所有内容都在 settings.classNames 中。

我该如何解决这个问题？
*（不编写自定义函数来处理数组中的默认值？）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:13:37.650

的第一个参数[`jQuery.extend()`](http://api.jquery.com/jQuery.extend/)可以是布尔值。如果是`true`，那么扩展是“深”的（合并是递归进行的）：

```
var settings = $.extend(true, defaults, options); 
```

从文档：

> 执行的合并`$.extend()`默认不是递归的；如果第一个对象的属性本身是一个对象或数组，它将被第二个对象中具有相同键的属性完全覆盖。这些值没有合并...但是，**通过为第一个函数参数传递 true ，对象将被递归合并**。

# javascript - 在javascript中面临比较问题

> ID：11539031
> 
> 赞同：0
> 
> 时间：2012-07-18T10:11:14.590
> 
> 标签：javascript

这就是我的 java 脚本函数：

```
function issueOrReturn() {
    var functiontype = document.getElementById("functiontype").value;
    alert("functiontype : "+functiontype);
    if (functiontype=="issueTempcard") {
        alert("1111111111111111111111111");
        var empid = document.getElementById("empid").value;
        var tempcardnumber = document.getElementById("tempcardnumber").value;
        var dateofissue = document.getElementById("dateofissue").value;
        if(empid.length==0) {
            alert("Please enter Employee ID ");
            return false;
        }
        if(tempcardnumber.length==0) {
            alert("Please enter Card Number ");
            return false;
        }
        if(dateofissue.length==0) {
            alert("Please enter Date of issue ");
            return false;
        }
        if(empid.length > 0 && tempcardnumber.length > 0 && dateofissue.length > 0) {
            document.forms["frmTempcard"].submit();
        } else {
            alert("Please enter Employee ID and and Card Number and Date of issue ");
            return false;
        }
    }
    if (functiontype == "returnTempCard") {
        alert("222222222222222222222222222222");
        var empid = document.getElementById("empid").value;
        var dateofreturn = document.getElementById("dateofreturn").value;

        if (empid.length == 0) {
            alert("Please enter Employee ID ");
            return false;
        }
        if (dateofreturn.length == 0) {
            alert("Please enter Date of return ");
            return false;
        }
        if (empid.length > 0 && dateofreturn.length > 0) {
            document.forms["frmTempcard"].submit(); 
        } else {
            alert("Please enter Employee ID and Date of return ");
            return false;
        }
    }
} 
```

这里的函数类型是：`issueTempcard`打印警报但它没有进入 if 循环`issueTempcard`因此没有提交表单，

还请告知我以下提交表格的方式是否正确：

```
if (empid.length > 0 && tempcardnumber.length > 0 && dateofissue.length > 0) {
    document.forms["frmTempcard"].submit(); 
} else {
    alert("Please enter Employee ID and and Card Number and Date of issue ");
} 
```

请为我提供一些帮助，以便我可以做到。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:23:39.257

您的两个函数定义都错过了它们的结束`}`字符。因此，它们不会被执行（因为 javascript 解释器无法读取您的整个函数）

这个[JsFiddle](http://jsfiddle.net/qYttv/)显示您的代码可以顺利运行。我所做的就是添加`}`

为了帮助您调试 JS 代码，请尝试使用[Firebug](https://addons.mozilla.org/nl/firefox/addon/firebug/)，它可以告诉您哪里出错了；）

Your way of submitting forms looks fine to me, but is also missing the trailing `}`

# sql - 根据条件排序表

> ID：11539036
> 
> 赞同：1
> 
> 时间：2012-07-18T10:11:47.227
> 
> 标签：sql, oracle, sorting, sql-order-by

我必须按照以下规则对 EMPLOYEE 表中的员工进行排序：当他们的部门是 SALES 时，按经验排序，否则按 SALARY 排序

![在此处输入图像描述](../Images/869dae39055dbb4dfc90df04ead99c4d.png)

这是我尝试过的：

```
select FNAME||' '||LNAME as emp_name,salary,HIRE_DATE from employee 
where dept_id=(select dept_id from department where name='SALES') order by HIRE_DATE asc;
UNION
select FNAME||' '||LNAME as emp_name,salary,HIRE_DATE from employee
where dept_id NOT IN (select dept_id from department where name='SALES') order by salary desc; 
```

由于我认为有两个订单，这会引发错误。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:24:27.873

试试这个：

```
select FNAME||' '||LNAME as emp_name,salary,HIRE_DATE from employee  E
join department D
on E.dept_id=D.dept_id
 order by (case when D.name='SALES' then HIRE_DATE end),
           (case when D.name<>'SALES' then salary end) desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:26:29.253

首先显示销售部门，按hire_date 排序。其他部门按工资排序显示。

```
select FNAME||' '||LNAME as emp_name,salary,HIRE_DATE 
  from employee
 inner join department
    on employee.dept_id = department.dept_id
 order by
 -- Sales department is on top. Swap 0 and 1 if you want sales on bottom
       case when department.name = 'SALES'
            then 0
            else 1
       end,
 -- And employees are sorted by hire_date
       case when department.name = 'SALES'
            then employee.HIRE_DATE
            else null
       end,
 -- Employees from other departments are sorted by salary
       employee.Salary desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:23:24.437

使用解码：

```
SELECT   fname || ' ' || lname AS emp_name
        ,salary
        ,hire_date
    FROM employee e
        ,department d
   WHERE e.dept_id = d.dept_id
ORDER BY decode(d.name,'SALES',experience,salary)
; 
```

另见[http://sqlfiddle.com/#!4/afa6f/1](http://sqlfiddle.com/#!4/afa6f/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:29:22.840

```
SELECT e.fname||' '||e.lname as emp_name, e.salary, e.hire_date
FROM employee e, department d
WHERE e.dept_id = d.dept_id 
ORDER BY
CASE 
WHEN d.name ='SALES' then
hire_date ASC
ELSE
salary DESC
END 
```

好的。抱歉，试试这个 - 可能已经回答过了。

# jquery - 加载到 div 后的 Jquery Ajax 错误

> ID：11539041
> 
> 赞同：0
> 
> 时间：2012-07-18T10:12:02.900
> 
> 标签：jquery, ajax

假设我有一个名为 index.php 的页面，它包含一个名为 divContent 的 div 元素，其中包含一个名为“msg”的按钮和另一个名为“show”的按钮。

当我加载 index.php 时，两个按钮显示得很好。我在我的页面上添加了 jquery。当点击我的“味精”按钮时，它会显示“成功”味精

> 警报（“成功”）；

. 它的工作方式就像当我单击显示按钮（在 divContent 之外）时，它会通过 ajax 技术将另一个页面内容加载到我的 divContent 中。

```
$('#msg').click(function(e) {
    alert("successful");
}); 
} //Whilst editing formatting - extra closing brace

$('#show').click(function(e) {
    $.ajax({
        type: "GET",
        url: "test.php",
        success: function(msg){
            $('#divContent').html(msg);
        }
    });
    e.preventDefault();
});

test.php
--------
    <input type="button" id="msg" /> 
```

test.php 包含一个与 index.php 中的 msg 按钮相同的按钮。我的问题是当加载 index.php 时，单击 msg 按钮它显示成功的 msg 但是当单击 show 按钮时它将 test.php 的包含加载到 divContent 并单击 msg 按钮它不显示“成功”消息。问题是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:19:13.300

这是因为您将单击绑定到所有现有的#msg 元素，它不适用于绑定时不存在的任何元素。因此，当您加载新内容时，它没有绑定点击，您需要再次绑定它。

```
success: function(msg){
   $('#divContent').html(msg);
   $('#msg').click( .... );
} 
```

或者，使用 .on() 方法：

找到一个元素，它是两个 #msg 按钮的祖先，并使用 .on 将事件绑定到它

```
$('.parent').on('click', '#msg', function(){
   alert("whatever");
}); 
```

这将确保任何作为 .parent 子级的#msg，无论何时创建，都会有一个点击事件。

来源：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:19:18.890

您的第一个点击函数有一个额外的右括号。

```
$('#msg').click(function(e) {
    alert("successful");
}); 
} //<<Here 
```

# wordpress - 从每月 15 日开始循环

> ID：11539044
> 
> 赞同：0
> 
> 时间：2012-07-18T10:12:15.987
> 
> 标签：wordpress, date, loops

我正在尝试创建一个循环，显示从本月 15 日开始的所有帖子。

```
$current_year = date('Y');
$current_month = date('m');

query_posts( "cat=22&year=$current_year&monthnum=$current_month&order=ASC" ); 
```

这不起作用，因为它从当月 1 日开始发布帖子。谢谢！

PS 不是 15 日的帖子，而是每月 15 日开始的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:26:40.250

The standard query interfaces don't support this. You'll need to fetch the posts for the month and filter them in your processing loop.

```
$current_year = date('Y');
$current_month = date('m');
query_posts( "cat=22&year=$current_year&monthnum=$current_month&order=ASC" );
...
if (have_posts()) {
    while (have_posts()) {
        the_post();
        if ( intval(get_the_date('j')) >= 15 ) {
            // display the post
        }
    }
} else {
    // no posts found
} 
```

# fortran - 如何根据变量的数据类型指定要执行的过程

> ID：11539050
> 
> 赞同：2
> 
> 时间：2012-07-18T10:12:33.623
> 
> 标签：fortran, gfortran, fortran2003

我正在编写一个访问图像并读取像素值的模块。图像中的值通常具有不同的数据类型（`integer(2)`, `integer(4)`, ...）。到目前为止，类型`image`定义如下：

```
type, public :: image
  logical        :: initialized   = .false.
  character(256) :: path          = ""      ! Path to image
  integer        :: dimensions(3) = -1      ! Dimensions of image
  integer        :: datatype      = 0       ! Datatype
  contains
    procedure :: initialize
    procedure :: pxvalues
    procedure :: getMeta
end type image 
```

我现在的问题是：程序是否有可能根据图像的数据类型（存储在变量中）自动找到相应的程序`image%datatype`？例如，如果数据类型是整数，则`pxvalues_integer`在执行期间调用子例程`image%pxvalues`。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:20:13.827

如果您不愿意更改代码的结构，那么 bdforbes 提出的 SELECT CASE 方法是一种选择。

除此之外，您可以使用多态性并用不同类型替换数据类型组件，这些类型都是相同父类型的扩展。这就是类型绑定过程（类型定义中 contains 之后的过程语句）存在的根本原因，所以您不妨按预期使用它们！

```
type, public, abstract :: image
  ! Common components to all extensions
  logical        :: initialized   = .false.
  character(256) :: path          = ""      ! Path to image
  integer        :: dimensions(3) = -1      ! Dimensions of image
  contains
    procedure :: initialize
    ! Abstract interface pxvalues_image specified what the interface must
    ! look like.  Deferred attribute means that extensions of image 
    ! must specify a specific procedure for the pxvalues binding.  All 
    ! specific procedures must have the same interface bar the passed 
    ! argument.
    procedure(pxvalues_image), deferred :: pxvalues
    procedure :: getMeta
end type image

abstract interface
  subroutine pxvalues_image(obj, ...)
    import :: image
    class(image), intent(in) :: obj
    ...
  end subroutine pxvalues_image
end interface

! A type for images that have integer2 data.
type, public, extends(image) :: image_integer2
  contains
    procedure :: pxvalues => pxvalues_integer2
end type image_integer2

! A type for images that have integer4 data.
type, public, extends(image) :: image_integer4
  contains
    procedure :: pxvalues => pxvalues_integer4
end type image_integer4 
```

特定过程''pxvalues_integer2''、''pxvalues_integer4''等，然后采用扩展类型的初始参数。

而不是设置数据类型组件，创建初始“图像”对象的代码应该将对象创建为图像的适当扩展，也许：

```
subroutine create_image(object)
  class(image), intent(out), allocatable :: object
  ...
  ! We want an image that for integer2's
  allocate(image_integer2 :: object) 
```

这种方法的含义需要比孤立的示例片段中提供的更多的代码知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:09:13.703

有一个像这样的实际程序怎么`pxvalues`样：

```
subroutine pxvalues(this)
    select case (this%datatype)
    case (0)
        call this%pxvalues_integer
    case (1)
        call this%pxvalues_real
    end select
end subroutine 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:24:28.650

如果 pxvalues 是使用接口定义的模块过程，您可以执行以下操作：

```
interface pxvalues ; module procedure &
    pxvalues_integer , &
    pxvalues_real
end interface 
```

# android - 如何从服务类（Android）中检测“最近的活动选项卡按钮”按下？

> ID：11539052
> 
> 赞同：1
> 
> 时间：2012-07-18T10:12:39.793
> 
> 标签：android, dialog, android-input-method

这是我的代码：

```
public void displayQuickSettingsDialog() {
        if(quickSettingsDialog == null) {

            quickSettingsDialog = new Dialog(mContext);
            quickSettingsDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            Window win = quickSettingsDialog.getWindow();
            WindowManager.LayoutParams lp = quickSettingsDialog.getWindow().getAttributes();
            lp.token = mKptAdaptxtIME.mInputView.getWindowToken();
            lp.type = WindowManager.LayoutParams.TYPE_APPLICATION_ATTACHED_DIALOG;
            lp.dimAmount = 0.5f;
            lp.y = lp.y + 150;
            win.setAttributes(lp);
            win.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
            win.addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            win.addFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);

            quickSettingsDialog.setContentView(R.layout.quicksettings);
            quickSettingsDialog.setCanceledOnTouchOutside(true);

            //listeners for dialog options
            quickSettingsDialog.findViewById(R.id.quick_sett_lang).setOnClickListener(this);
            quickSettingsDialog.findViewById(R.id.quick_sett_keyboard_type).setOnClickListener(this);
            quickSettingsDialog.findViewById(R.id.quick_sett_sugg_control).setOnClickListener(this);
            quickSettingsDialog.findViewById(R.id.quick_sett_settings).setOnClickListener(this);

        }

        quickSettingsDialog.show();
    } 
```

它显示一个警报对话框，一切正常，在显示对话框后，当我按下最近的活动选项卡（4.0）时，如果我选择了其他一些活动，那么对话框仍然没有被关闭，这个方法我从输入法调用服务...在我按下最近的活动按钮时将调用回叫的服务中？需要快速帮助...提前感谢androidians ..

# facebook - 带有来自 FB IFrame 应用程序的链接的 FB 墙贴

> ID：11539063
> 
> 赞同：0
> 
> 时间：2012-07-18T10:13:32.023
> 
> 标签：facebook, facebook-graph-api, facebook-wall, spring-social

我正在发布带有[http://www.rewardtv.com](http://www.rewardtv.com)链接的 FB Wall 帖子。当我从我的独立网站（使用 spring social）发布它时，墙上的链接工作正常。它转到rewardtv.com

但是，当我使用 FB 应用程序中的相同代码并将其发布到墙上时，即使墙上的帖子看起来正确，但是当我单击链接时，它会被重定向到

[http://www.facebook.com/connect/uiserver.php?app_id=172622806174327&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.rewardtv.com%2F&response_type=code&display=page&auth_referral=1](http://www.facebook.com/connect/uiserver.php?app_id=172622806174327&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.rewardtv.com%2F&response_type=code&display=page&auth_referral=1)

而不是rewardtv.com

然后得到一个错误页面，显示我的“应用名称发生错误。请重试。

请提供任何帮助......我的意图是即使墙上发布是从 FB 应用程序（iframe）完成的，它也应该被定向到 www.rewardtv.com 而不是我的应用程序连接和许可

是否需要在应用程序中授予任何额外的权限？

# 构建如下链接

```
 FacebookLink link  = new FacebookLink("http://www.rewardtv.com",
                rtvLinkTitle, rtvLinkHeading,
                rtvLinkMessage); 
```

# 并像这样写帖子

```
 facebook.feedOperations().postLink(message, facebookLink); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:20:10.360

要纠正问题，请按照以下步骤操作，

要将跨域 URL (http://www.rewardtv.com) 作为链接发布，请执行以下操作，

1.  转到相应应用的开发者应用设置 (https://developers.facebook.com/apps)。

2.  单击编辑应用程序选项卡。

3.  单击左侧的高级选项卡。

4.  在 Migrations 菜单的设置中，选中单选按钮 Disabled for Stream post URL security

# mysql - 检查 x 连续天 - 数据库中的给定时间戳

> ID：11539065
> 
> 赞同：18
> 
> 时间：2012-07-18T10:13:35.457
> 
> 标签：mysql, sql, database, gaps-and-islands

谁能给我一个想法或提示您如何在存储登录名（用户ID，时间戳）的数据库表（MySQL）中检查连续X天？

Stackoverflow 做到了（例如，像 Enthusiast 这样的徽章——如果你连续登录 30 天左右......）。您必须使用哪些功能或如何使用它的想法是什么？

像`SELECT 1 FROM login_dates WHERE ...`什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-18T12:34:57.177

您可以使用移位自外连接和变量来完成此操作。请参阅此解决方案：

```
SELECT IF(COUNT(1) > 0, 1, 0) AS has_consec
FROM
(
    SELECT *
    FROM
    (
        SELECT IF(b.login_date IS NULL, @val:=@val+1, @val) AS consec_set
        FROM tbl a
        CROSS JOIN (SELECT @val:=0) var_init
        LEFT JOIN tbl b ON 
            a.user_id = b.user_id AND
            a.login_date = b.login_date + INTERVAL 1 DAY
        WHERE a.user_id = 1
    ) a
    GROUP BY a.consec_set
    HAVING COUNT(1) >= 30
) a 
```

如果用户在过去的任何时间连续登录 30 天或更长时间，***这***将返回 a`1`或 a 。`0`

 *这个查询的首当其冲确实是在第一个子选择中。让我们仔细看看，以便更好地理解它是如何工作的：

使用以下示例数据集：

```
CREATE TABLE tbl (
  user_id INT,
  login_date DATE
);

INSERT INTO tbl VALUES
(1, '2012-04-01'),  (2, '2012-04-02'),
(1, '2012-04-25'),  (2, '2012-04-03'),
(1, '2012-05-03'),  (2, '2012-04-04'),
(1, '2012-05-04'),  (2, '2012-05-04'),
(1, '2012-05-05'),  (2, '2012-05-06'),
(1, '2012-05-06'),  (2, '2012-05-08'),
(1, '2012-05-07'),  (2, '2012-05-09'),
(1, '2012-05-09'),  (2, '2012-05-11'),
(1, '2012-05-10'),  (2, '2012-05-17'),
(1, '2012-05-11'),  (2, '2012-05-18'),
(1, '2012-05-12'),  (2, '2012-05-19'),
(1, '2012-05-16'),  (2, '2012-05-20'),
(1, '2012-05-19'),  (2, '2012-05-21'),
(1, '2012-05-20'),  (2, '2012-05-22'),
(1, '2012-05-21'),  (2, '2012-05-25'),
(1, '2012-05-22'),  (2, '2012-05-26'),
(1, '2012-05-25'),  (2, '2012-05-27'),
                    (2, '2012-05-28'),
                    (2, '2012-05-29'),
                    (2, '2012-05-30'),
                    (2, '2012-05-31'),
                    (2, '2012-06-01'),
                    (2, '2012-06-02'); 
```

这个查询：

```
SELECT a.*, b.*, IF(b.login_date IS NULL, @val:=@val+1, @val) AS consec_set
FROM tbl a
CROSS JOIN (SELECT @val:=0) var_init
LEFT JOIN tbl b ON 
    a.user_id = b.user_id AND
    a.login_date = b.login_date + INTERVAL 1 DAY
WHERE a.user_id = 1 
```

将产生：

![示例结果](../Images/3ef8c3b2b2428fc1bfdd5c8c26b0fa39.png)

如您所见，我们正在做的是*将*连接表移动 +1 天。对于与前一天不连续的每一天，`NULL`LEFT JOIN 会生成一个值。

现在我们*知道*了非连续天在哪里，我们可以使用一个变量来区分每组*连续*天，方法是检测移位表的行是否为`NULL`。如果它们是`NULL`，则这些天不是连续的，因此只需增加变量即可。如果它们是`NOT NULL`，则不要增加变量：

![突出显示分组的结果](../Images/ef6e8c8df5afa5bd83aedab6cf8c051e.png)

在我们用递增变量区分每组连续天后，只需按每个“组”（如`consec_set`列中定义）进行分组并使用`HAVING`过滤掉任何少于指定连续天数的集合（在您的示例中为 30）：

![按 consec_set 列分组的结果](../Images/310271ace9d855281ccd4a2d6e86c8f8.png)

最后，我们包装***那个***查询并简单地计算连续 30 天或更多天的集合数。如果有这些集合中的一个或多个，则返回`1`，否则返回`0`。

* * *

## 查看[SQLFiddle 分步演示](http://sqlfiddle.com/#!2/6d990/2/3)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T10:21:02.620

您可以将 X 添加到时间戳日期并检查此日期范围内的 distinct( dates ) 是否为 == X：

在这 30 天中，每天至少一次：

```
SELECT distinct 1 
FROM 
   login_dates l1 
inner join
   login_dates l2
      on l1.user = l2.user and 
         l2.timestamp between l1.timestamp and  
                              date_add( l1.timestamp, Interval X day )
where l1.user = some_user
group by 
   DATE(l1.timestamp)
having 
   count( distinct DATE(l1.timestamp) ) = X 
```

（你不谈论性能要求......;））

*** 已编辑 ***仅过去 X 天的查询：这 30 天中的每一天向东一次

```
SELECT distinct 1 
FROM 
   login_dates l1 
where l1.user = some_user
      and l1.timestamp >  date_add( CURDATE() , Interval -X day )
group by
    l1.user
having 
   count( distinct DATE(l1.timestamp) ) = X 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:49:53.537

这是一个单独使用 SQL 很难解决的问题。

问题的核心是您需要在一个查询中比较动态结果集。例如，您需要获取一个 DATE 的所有登录名/会话 ID，然后将它们与 DATE() 中的一组登录名的列表一起加入或联合（您可以使用 DATE_ADD 来确定）。您可以对 N 个连续日期执行此操作。如果您还剩下任何行，那么这些会话已在该期间登录。

假设下表：

sessionid int，创建日期

此查询返回过去两天有行的所有 sessionid：

```
select t1.sessionid from logins t1 
  join logins t2 on t1.sessionid=t2.sessionid 
  where t1.created = DATE(date_sub(now(), interval 2 day)) 
    AND t2.created = DATE(date_sub(now(), interval 1 day)); 
```

如您所见，SQL 将在 30 天内变得粗糙。让脚本生成它。:-D

这进一步假设登录表每天都会随着会话更新。

我不知道这是否真的解决了你的问题，但我希望我已经帮助解决了这个问题。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-18T12:07:03.780

在 login_dates 表中添加一个默认值为 1 的额外列 Continuous_days 不是更简单吗？这将指示在该天结束的连续日期的长度。

您在 login_dates 上的触发器后创建一个插入，您可以在其中检查是否有前一天的条目。

如果没有，则该字段将具有默认值 1，这意味着在该日期开始一个新序列。

如果这里是前一天的条目，那么您将 days_logged_in 值从默认的 1 更改为比前一天的值大 1。

前任：

```
| date       | consecutive_days |
|------------|------------------|
| 2013-11-13 | 5                |
| 2013-11-14 | 6                |
| 2013-11-16 | 1                |
| 2013-11-17 | 2                |
| 2013-11-18 | 3                | 
```*

# url - 面临网址重定向问题

> ID：11539066
> 
> 赞同：0
> 
> 时间：2012-07-18T10:13:35.963
> 
> 标签：url, redirect, directory, dns

嗨，我在主域上使用 wordpress，在子域上使用 mybb 论坛脚本

现在问题是这个

当我指向 site.com/forum/

index.php 文件以错误的 url 打开论坛

但我的真实网址是 subdoamin.site.com/index.php

我该如何解决

也在错误日志中得到这个

site.com/forum/thread 标题

而不是 subdomain.site.com/thread 标题

使用 apache 和 cpanel

如果您有时间检查我的问题，请检查并帮助我，如果它按照我要求 wordpress、mybb 和主机检查和修复的方式修复，我非常感谢您，但还没有运气，所以请帮助我

提前谢谢这里是我的网址 asf-mobiles.com 和 forums.asf-mobiles.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:17:04.837

如果您希望指定某个 url 进行重定向，您可以轻松地进行永久重定向。

# objective-c - 如何在 iOS 中存储中小型数据集（以便于 iCloud 同步）？

> ID：11539068
> 
> 赞同：1
> 
> 时间：2012-07-18T10:13:37.990
> 
> 标签：objective-c, ios, database, nsmutablearray, icloud

我有一个 iOS 应用程序，它目前管理着一小部分设置（通过 NSUserDefaults，我知道如何通过 iCloud 同步这些设置）和一些列表数据。

举个例子，我想存储一个<颜色名称/颜色/评论>列表。所以我创建了一个自定义类型，称为 ColorInfo。在我的应用程序中，我需要存储多个 ColorInfo 值，我会尝试使用 NSMutableArray 或数据库来实现，但两者都不容易通过 iCloud 同步。

为了满足以下两个要求，您更喜欢在 iOS 应用中管理数据列表的方式是什么？

1.  您应该能够轻松地将数据持久地存储在本地电话上。
2.  您应该能够通过 iCloud 轻松同步数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:50:00.100

您想使用它为本地归档和 iCloud 持久性设计的 UIDocument。

[开发者文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDocument_Class/UIDocument/UIDocument.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T17:50:34.430

不要使用键值存储。这很……奇怪。

我会通过创建一个本地文件和一个同名的远程文件来制作我自己的键值存储版本。要同步，您必须下载远程文件并将其内容与本地数据相结合。将其写入文件并上传文件。

# sql-server-2008 - 无法使用 SQL Server 2008 R2 标准版连接到生产服务器中的 ASPNETDB

> ID：11539070
> 
> 赞同：1
> 
> 时间：2012-07-18T10:13:41.577
> 
> 标签：sql-server-2008, staging, aspnetdb

我是 ASP.net 的新手，只是遵循教程。这个特殊问题让我非常头疼，我在 VS 2010 中开发了一个网站，使用 Asp.Net Login Controls 提供的 ASPNETDB SQL 服务器数据库来创建用户和角色。还添加了一些表，在我完成后使用“发布到提供者”功能生成脚本 (ASPNETDB.MDF.sql)。我使用此脚本生成数据库和表 -Sql Server 2008 R2 management Studio，并像这样修改了 web.config -

```
<!--Connection String-->
                <connectionStrings>
        <remove name="LocalSqlServer" />
        <add name="LocalSqlServer"  connectionString="Server=AkumJamir-PC\SQLEXPRESS;Initial Catalog=ASPNETDB;Integrated Security=true" providerName="System.Data.SqlClient" />
                <add name="con" connectionString="Server=AkumJamir-PC\SQLEXPRESS;Initial Catalog=ASPNETDB;Integrated Security=True"/>
                <add name="ConnectionString" connectionString="Server=AkumJamir-PC\SQLEXPRESS;Initial Catalog=ASPNETDB;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings>
<roleManager enabled="true">
        <providers>
            <remove name="AspNetSqlRoleProvider"/>
            <add connectionStringName="ConnectionString" applicationName="/"
                 name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider,System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
            <remove name="AspNetWindowsTokenProvider"/>
        </providers>
    </roleManager>

<membership>
        <providers>
            <remove name="AspNetMembershipProvider"/>
            <add connectionStringName="ConnectionString" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphaNumericCharacters="1" passwordAttemptWindow="5" passwordStrengthRegularExpression="" name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider,System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        </providers>
    </membership>   
    <webParts>
        <personalization defaultProvider="AspNetSqlPersonalizationProvider">
            <providers>
                <remove name="AspNetSqlPersonalizationProvider"/>
                <add name="AspNetSqlPersonalizationProvider" type="System.Web.UI.WebControls.Webparts.SqlPersonalizationProvider"
                 connectionStringname="ConnectionString" applicationName="/"/>
            </providers>
        </personalization>
    </webParts> 
```

现在的问题是在我的开发机器上工作但在我们的登台服务器上，每当我尝试浏览到某些页面时，它都无法连接到数据库，在这些页面中我有一些数据要从数据库中显示，登录页面也不起作用。connectionString 看起来像这样在服务器中：

```
<!--Connection String-->
                <connectionStrings>
        <remove name="LocalSqlServer" />
        <add name="LocalSqlServer"  connectionString="Driver={SQL Native Client};Server=WIN-K16NMM4128C;Initial Catalog=ASPNETDB;Integrated Security=true" providerName="System.Data.SqlClient" />
                <add name="con" connectionString="Server=WIN-K16NMM4128C;Initial Catalog=ASPNETDB;Integrated Security=True"/>
                <add name="ConnectionString" connectionString="Data Source=WIN-K16NMM4128C\SqlServer2008;Initial Catalog=ASPNETDB;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我正在吃掉我的脑筋，我已经浏览了已经涵盖的主题，，，，感谢您的任何建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:56:19.577

我面临着同样的问题。我刚刚在 IIS 管理器中启用了 ASP/Authentication，并且设置了 Basic Authentication=true。它现在正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:24:41.553

您在连接字符串中使用集成安全性。将其配置为使用 sql 身份验证。像这样的东西：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

# c# - 如何获取用户控件数据类型所在的 TabPage

> ID：11539071
> 
> 赞同：3
> 
> 时间：2012-07-18T10:13:43.407
> 
> 标签：c#, user-controls, tinymce, umbraco

我正在使用用户控件包装器方法构建自定义数据类型。在其中，我添加了现有的 TinyMCE 数据类型。问题是我需要找到一种方法来动态获取数据类型所在的当前 TabPage，以便我可以将 TinyMCE 按钮添加到菜单中。这是我目前拥有的（TabPage 是硬编码的）：

使用语句：

```
using umbraco.cms.businesslogic.datatype;
using umbraco.editorControls.tinyMCE3;
using umbraco.uicontrols; 
```

OnInit 方法：

```
private TinyMCE _tinymce = null;

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    this.ID = "crte";

    DataTypeDefinition d = DataTypeDefinition.GetDataTypeDefinition(-87);
    _tinymce = d.DataType.DataEditor as TinyMCE;
    ConditionalRTEControls.Controls.Add(_tinymce);

    TabView tabView = Page.FindControl("TabView1", true) as TabView;
    TabPage tabPage = tabView.Controls[0] as TabPage;
    tabPage.Menu.InsertSplitter();
    tabPage.Menu.NewElement("div", "umbTinymceMenu_" + _tinymce.ClientID, "tinymceMenuBar", 0);
} 
```

用户控制：

```
<asp:PlaceHolder ID="ConditionalRTEControls" runat="server" /> 
```

* * *

**注意：** Page.FindControl 正在使用递归查找控件的自定义扩展方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:17:58.587

如果有一种方法可以通过 Umbraco API 访问 TabPage，我会很高兴，但是，在过去几个小时的工作之后，我可以获取选项卡的唯一方法是遍历父控件，直到我来到选项卡.

代码：

```
private TinyMCE _tinymce = null;

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    this.ID = "crte";

    DataTypeDefinition d = DataTypeDefinition.GetDataTypeDefinition(-87);
    _tinymce = d.DataType.DataEditor as TinyMCE;
    ConditionalRTEControls.Controls.Add(_tinymce);
}

protected void Page_Load(object sender, EventArgs e)
{
    TabView tabView = Page.FindControl("TabView1", true) as TabView;
    TabPage tabPage = GetCurrentTab(ConditionalRTEControls, tabView);
    tabPage.Menu.NewElement("div", "umbTinymceMenu_" + _tinymce.ClientID, "tinymceMenuBar", 0);
}

private TabPage GetCurrentTab(Control control, TabView tabView)
{
    return control.FindAncestor(c => tabView.Controls.Cast<Control>().Any(t => t.ID == c.ID)) as TabPage;
} 
```

扩展方法：

```
public static class Extensions
{
    public static Control FindControl(this Page page, string id, bool recursive)
    {
        return ((Control)page).FindControl(id, recursive);
    }

    public static Control FindControl(this Control control, string id, bool recursive)
    {
        if (recursive)
        {
            if (control.ID == id)
                return control;

            foreach (Control ctl in control.Controls)
            {
                Control found = ctl.FindControl(id, recursive);
                if (found != null)
                    return found;
            }
            return null;
        }
        else
        {
            return control.FindControl(id);
        }
    }

    public static Control FindAncestor(this Control control, Func<Control, bool> predicate)
    {
        if (predicate(control))
            return control;

        if (control.Parent != null)
            return control.Parent.FindAncestor(predicate);

        return null;
    }
} 
```

# android - 监听网络活动，并在网络繁忙时搭载我自己的消息

> ID：11539072
> 
> 赞同：0
> 
> 时间：2012-07-18T10:13:46.597
> 
> 标签：android, networking

手机的成本之一是发送消息，例如向服务发送心跳消息，以便能够接收推送消息。

我正在尝试的一个解决方案是为我的计时器设置一个时间框架，用于最早的心跳和最晚的心跳，这样当我到达早期时间时，我就会开始监听网络流量，如果手机上的收音机反正很忙，我会在忙的时候发送我的心跳。

这个想法是，我可以通过防止手机只为我打开收音机来节省一些电量。

这就是理论。

但是有两个问题。我是 Android 新手，我一直无法弄清楚是否有这样的服务可以收听。

我的目标是面向尽可能广泛的受众的 Android 2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:22:10.013

Android 培训中涵盖了您的要求：

[http://developer.android.com/training/efficient-downloads/regular_updates.html](http://developer.android.com/training/efficient-downloads/regular_updates.html)

有关在不耗尽电池的情况下传输数据的其他部分也应该会有所帮助。

# ios - RBG24在windows上可以玩得很好，但是在iOS上就不行了

> ID：11539073
> 
> 赞同：1
> 
> 时间：2012-07-18T10:13:52.947
> 
> 标签：ios, windows, uiimage, rgb, bgr

通过解码器将 H264 视频转换为 rgb24 文件，它可以在 Windows 上很好地显示，但是当我使用 UIImage 在 UIImageView 上显示它时，它的颜色不正确。我这样使用的代码：

```
- (UIImage *)imageFromAVPicture:(const UInt8 *)pict width:(int)width height:(int)height
{
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CFDataRef data = CFDataCreateWithBytesNoCopy(kCFAllocatorDefault, pict, width*height*3,kCFAllocatorNull);

    CGDataProviderRef provider = CGDataProviderCreateWithCFData(data);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGImageRef cgImage = CGImageCreate(width, 
                                       height, 
                                       8,
                                       24, 
                                       width*3, 
                                       colorSpace, 
                                       bitmapInfo, 
                                       provider, 
                                       NULL, 
                                       YES, 
                                       kCGRenderingIntentDefault);

    CGColorSpaceRelease(colorSpace);

    UIImage *image = [self scaleImage:cgImage];
    //UIImage *image = [[UIImage alloc] initWithCGImage:cgImage];
    CGImageRelease(cgImage);
    CGDataProviderRelease(provider);
    CFRelease(data);

    return image;
} 
```

但是在创建CGImage之前，添加如下代码，它的显示是正确的，下面的代码所做的就是在t rgb和bgr之间进行转换。

```
UInt8 tmpBuff1,*tmpBuff2;
tmpBuff2 = (UInt8 *)pict;

for(int i =0;i<height;i++)
{
    for(int j=0;j<width;j++)
    {
        tmpBuff1 = *tmpBuff2;
        *tmpBuff2 = *(tmpBuff2+2);
        *(tmpBuff2+2) = tmpBuff1;
        tmpBuff2 += 3;
    }
} 
```

从rgb转换为bgr后，它的显示将是正确的。

所以我想知道为什么，为什么相同的RGB24文件在PC上可以很好地播放，但在从RGB24转换为BGR24之前在iOS上却出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:52:05.603

这是一个标准的字节顺序问题。哪个字节表示哪种颜色未针对 RGB 进行标准化。Windows 在 MSB 中使用 R，而 Mac/iOS 在 LSB 中使用 R。因此，在 Windows 和 Mac/iOS 之间移动 RGB 时，您总是需要进行字节顺序转换。请注意，您可能会发现使用 Accelerate 框架`vImagePermuteChannels_ARGB8888`执行此类转换比编写自己的代码更有效。

# git - Git“无法确定git目录的绝对路径”

> ID：11539076
> 
> 赞同：28
> 
> 时间：2012-07-18T10:14:04.310
> 
> 标签：git, windows-7

我是 git 新手，在尝试获取远程项目的最新版本时遇到问题：

```
S:\dev\prj\myprj [master]> git pull
/usr/libexec/git-core/git-sh-setup: line 266: cd: .git: No such file or directory
Unable to determine absolute path of git directory 
```

直到今天它都运行良好，奇怪的是，自从上次运行良好以来，我认为我没有改变任何东西。

这是在 Windows 7 上。我的项目位于加密驱动器 (S:) 上，而 git 位于 C 上：

```
S:\dev\prj\myprj [master]> git --exec-path    
C:\Users\matt\AppData\Local\GitHub\PortableGit_656cc1ef6d04f06ddf8b2f5bedbac921caed3b62/libexec/git-core 
```

手动执行 cd 到上面的 exec 目录可以正常工作（即使有混合斜杠类型）。

任何想法如何开始解决问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-01-27T07:54:59.430

杀死**ssh-agent.exe**进程对我有用。
注意：在较新版本的 SourceTree 中它被称为 sh.exe（感谢@cowlinator **）**

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-23T11:26:23.690

找到解决方案/解决方法！欢呼！

我曾经（现在仍然）使用 GitHub for Windows，偶尔它会要求我去 Windows Powershell 修复存储库，因为有时它无法自动完成，有时它会因上述错误消息而失败。

对我来说失败的原因不仅仅是我的项目位于加密驱动器上，更重要的是，有时我会在安装加密驱动器（我手动安装）之前启动 GitHub for Windows。即使我随后关闭 GitHub for Windows，然后挂载加密驱动器，然后重新启动 GitHub for Windows，它仍然会返回上述错误，所以当我关闭 GitHub for Windows 时，可能并非所有 GitHubby 都被关闭。

我的解决方法是：

1.  重启
2.  安装包含项目的驱动器
3.  启动 GitHub for Windows

...以该顺序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T10:15:58.843

You're most likely using PowerShell and a mapped network drive. PowerShell "helpfully" undoes the mapping, so the directory passed to Git is a UNC path which Git doesn't understand.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T11:04:36.170

如果您在 Windows 上使用 SourceTree，请尝试 Tools-> Options -> Git -> Use system Git

# javascript - javascript没有获得价值

> ID：11539078
> 
> 赞同：2
> 
> 时间：2012-07-18T10:14:12.670
> 
> 标签：javascript, forms, input, alert

我想知道以下内容为什么会给我带来麻烦，它看起来很简单，但我不确定发生了什么。

所以我有一个输入框，我希望用户填写它，每次我运行以下

我身份不明，我不知道为什么。

```
<input type="numbers" name="price" class="sell" placeholder="$0.00"> 
```

我正在使用以下 javascript

```
var price = document.getElementsByName("price")
    alert(price.value); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:16:02.857

```
var price = document.getElementsByName("price")[0];
    alert(price.value);

```

document.getElementsByName will give you HTMLCollection (kind of array) as a return type. This is because a number of elements in your dom may share the same name. So if you have number of checkboxes having same name you can refere each checkbox with the array index.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:16:46.570

You have several problems.

The one causing your problem is that [`getElementsByName`](https://developer.mozilla.org/en/DOM/document.getElementsByName) returns an [HTMLCollection](https://developer.mozilla.org/en/DOM/HTMLCollection) (which is like an array), not a single element. You need to pull the first item off it before trying to access its properties.

```
var price = document.getElementsByName("price")[0]; 
```

Second, `numbers` it not a type of input. [`number` (singular)](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#number-state-type-number) is.

Third, if you give the example `$0.00` then you are informing people that you expect them to type a value starting with a `$` sign. You can't have a `$` sign in a number.

# php - What is the right FTP permission for PHP files on a normal LAMP webserver?

> ID：11539083
> 
> 赞同：1
> 
> 时间：2012-07-18T10:14:26.660
> 
> 标签：php, linux, ftp, lamp, chmod

I need to know what the right FTP permision is for PHP files on a normal LAMP server? I heard about the linux permision rules and how to modify them using chmod but what are the dangers for a normal user like my client?

For instance, if he modified a PHP file with Filezilla to 777 is the world really allowed to write to the file? Thanks for your help and advises.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:18:19.967

简短回答 755 - 它将使文件可执行 + 对组和世界可读，而仅对所有者可写

长答案：这取决于文件本身。通常可执行代码（php、ruby、perl、python）设置为 755，以便它可以由 web 服务器执行。您可以使用这个[http://www.onlineconversion.com/html_chmod_calculator.htm](http://www.onlineconversion.com/html_chmod_calculator.htm)来计算权限，大多数 FTP 客户端都有这个（我相信至少 Windows 上的 CuteFTP 确实有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:18:36.537

FTP 权限实际上是指文件的权限。这些是使用[chmod](http://en.wikipedia.org/wiki/Chmod)命令改变的。在您的情况下，777 并不意味着*任何人*，而是服务器上的任何用户。

这是一个关于这个确切主题的[体面论坛主题的链接。](http://www.webmasterworld.com/forum88/5396.htm)向下滚动到 Moose 的帖子，内容非常丰富。

# javascript - Disable Text Selector In JavaScript

> ID：11539084
> 
> 赞同：0
> 
> 时间：2012-07-18T10:14:28.643
> 
> 标签：javascript, jquery, function, blackberry-webworks, preventdefault

[Prevent Defaults](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-prevent-default-touch-and-mouse-events-in-the-BlackBerry/ta-p/1223685)

At the above link it describes how to prevent the default behaviour in JavaScript,but only shows you how to disable all defaults.

I only want to disable Text Selection / Context Menus

How would I go about this? Or am I going about this the wrong way?

This is nessary for the following reasons

*   Disabling paste/copy on the play book
*   When using auto complete the text selector pops up and is very annoying and sometimes in the way

This annoyance is caused by J Query auto select when it shows the text selection in blackberry gets in the way when trying to touch to choose one.

If came up with a work around by adding padding-top:30px; to the auto complete so its below the text selector but would like a better way to do this.

Thanks

```
.noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

Tried the above code thanks to a good stack overflower ! and this solves the problem on the browser(e.g chrome) but not on the web works play book application this fully disables editing/input as well which is no good.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:51:32.340

我认为您不需要javascript来禁用文本选择，CSS就足够了：

```
.noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

​<a href="http://jsfiddle.net/ruisoftware/aKkSx/1/" rel="nofollow">jsFiddle 这里

**编辑：** 要允许在编辑框上键入，同时在那里禁用文本选择，您可以使用此 [http://jsfiddle.net/ruisoftware/aKkSx/3/](http://jsfiddle.net/ruisoftware/aKkSx/3/) 基本上撤消[jQuery select() 事件](http://api.jquery.com/select/)上的文本选择。不是最干净的方式，但可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:00:33.617

在 css 文件中包含以下行。

```
-webkit-user-select: none;
-moz-user-select: none;
-khtml-user-select: none;
user-select: none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:13:23.290

也可以内联处理。我认为 CSS 解决方案更好，但我总是想知道所有选项：

```
<element oncontextmenu="return false">
<input onselect="return false">  <!-- only <input>'s though... --> 
```

为了防止选择文本，我认为您必须使用 CSS 或 JS（监听文本上的拖动）或使用图像。
请注意，用户可以访问浏览器显示的所有内容，因此阻止用户选择文本不会阻止他使用 Chrome 检查元素从源代码中删除您的解决方案或从源代码中复制粘贴。

# tomcat - How to setup fastCGI with Apache tomcat to run C++?

> ID：11539086
> 
> 赞同：0
> 
> 时间：2012-07-18T10:14:31.750
> 
> 标签：tomcat, fastcgi

I have my java application running along with Apache Tomcat and jdbc is used for DB. However in some of the db transactions there are few dlls that are to be invoked. For this I've decided to use fastcgi.

So now I have a C++ program that invokes a dll. FastCGI along with Apache Tomcat should be able to be run this C++ program on a Windows machine? How can this be done? I am not able to get any pointers on Google for this particular fastCGI + Tomcat Apache + C++ + windows combination of setup. Please help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:23:12.597

JFastCgi 是一个允许tomcat 进行FastCGI 调用的servlet。然而，据我所知，它不支持授权者和过滤器角色。 [JFastCgi Sourceforge](http://sourceforge.net/projects/jfastcgi/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:26:54.420

Apache Tomcat 是一个 Java 应用服务器。它是故意限制范围的。出于某种原因，它支持 CGI；但它不支持 FastCGI。这就是为什么您没有找到任何指针的原因：不可能使用分布式的 Tomcat。

您可以尝试以下方法之一：

*   将您的 FastCGI 包装器转换为普通的可执行文件，并从 Java 调用它；
*   使用 SWIG 将 C++ 库包装在 Java 本机 (JNI) 包装器中，这允许您将其直接加载到 Java 应用程序中并调用它，但这对于 Tomcat 来说很棘手，因为它不允许 Web 应用程序加载本机库，除非由管理员安装在 Tomcat 的公共库目录中；
*   修改您的 Java Web 应用程序以实现 FastCGI 网络协议，以便与托管您的 DLL 的 FastCGI 进程进行通信；
*   在 Tomcat 前面运行另一个同时支持 Tomcat (AJP) 和 FastCGI 转发的服务器，例如 Apache httpd、lighttpd 或 nginx。

# java - Launch .bat on a web application

> ID：11539091
> 
> 赞同：1
> 
> 时间：2012-07-18T10:14:42.960
> 
> 标签：java, jsf, batch-file

I'm on a JSF application, I have a `.bat` that I want to launch when clicking on a `Command` button, this script is in the webcontent directory of my project. The code of the action is:

```
public String genererRapportTable() {
  try {
    ServletContext ctx = (ServletContext) FacesContext
      .getCurrentInstance().getExternalContext().getContext();
    String realPath = ctx.getRealPath("/");
    String[] command = { "cmd.exe", "/C", "start", realPath + "Tools\\cmd.bat" };
    Runtime.getRuntime().exec(command);
  } catch (IOException e) {
    e.printStackTrace();
  }
  return null;
} 
```

The path is correctly constructed but the script is not launched!

The debugging screen:

![enter image description here](../Images/3d6710f73542890923efc2c849ec94f5.png)

This what I get for output :

![enter image description here](../Images/5ad36bf758f3cf91c9d6f15e5b87e35e.png)

So the path is correct but the script is not launched. When I put the `.bat` on `c:\Tools` and I use this path `"C:\\Tools\\cmd.bat"` it works. What is the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:47:05.127

你能发布批处理文件的内容吗？我注意到实际路径被用作新命令提示符窗口的标题。这是滥用`start`命令的典型行为（第一个参数不是可执行文件的路径，而是`title`新窗口的路径。不要问我，我不知道为什么......）你`start`在批处理文件中使用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:32:12.003

如果您使用*start*运行批处理，则需要将带引号的标题作为第一个参数，因为您的路径包含空格并且也会被引用。
start 命令始终使用第一个引用的参数作为标题。

```
start "myTitle" cmd.exe /c myBat.bat 
```

像这样的东西应该有效
`String[] command = { "cmd.exe", "/C", "start", "\"myTitle\" \""+realPath + "Tools\\cmd.bat\""`};

您还应该将 cmd.bat 重命名为更好的名称，这样它就不会与 cmd.exe 冲突。

# ios - 使用缩放 uiscrollview 的帧不正确

> ID：11539094
> 
> 赞同：2
> 
> 时间：2012-07-18T10:14:53.553
> 
> 标签：ios, uiscrollview, zooming

我有一个`UIScrollView`包含 UIImageView 的。我需要缩放我的 UIImageView。

我正在使用以下方法：

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return imageView; // my UIImage about I describe here.
} 
```

在 viewDidLoad 方法中，我为我的`UIImageView`（例如`NSRect: {{110, 180}, {100, 100}}`）设置了框架

```
NSLog(@"image view frame %@", [NSValue valueWithCGRect:self.imageView.frame]); 
```

在这种情况下，注销此值：图像视图框架`NSRect: {{110, 180}, {100, 100}}`

但是当我尝试在缩放后输出 imageView 的帧时，我得到了下一个数量的新值：

**{{9.9999971, 9.9999971}, {100.00001, 100.00001}}**

而且我不明白为什么我得到这个值**9.9999971**。我的意思是说。是的，我知道缩放后我们会更改坐标，但我不明白为什么我们得到的不是**9.0f**而是**9.9999971**以及为什么不是**100.0**而不是**100.00001**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:04:59.710

我已经实现了您提到的图像缩放演示代码。

*   (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView { return imgZoom; }

我有我在视图中设置的 imageview 的值确实加载了。

我认为你做错了什么。

如果您可以分享更多，那么我可以详细告诉您。

谢谢

# python - 带有 ./manager runserver 的 Django 运行良好，而 Django + uwsgi 返回 404

> ID：11539097
> 
> 赞同：2
> 
> 时间：2012-07-18T10:15:06.720
> 
> 标签：python, django, static, nginx, uwsgi

这与我的 settings.py`static`有关`settings.py`：

```
STATIC_ROOT = '/home/coat/www/site/app/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
"/usr/lib/python2.6/site-packages/django/contrib/admin/static/",
# This is Django admin default static files
) 
```

我使用 django 服务器：

`./manager runserver`

然后我打开网址：`http://localhost:8000/static/admin/css/base.css`

它工作得很好。

但是一个开放`http://localhost/static/admin/css/base.css`

它打印'404'

![在此处输入图像描述](../Images/769db43fb7a8c406d798c57997dd53cc.png)

我已经多次重启 Nginx 和 uwsgi，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:50:53.733

首先，这是*nonono*：

```
STATIC_ROOT = '/home/coat/www/site/app/static/' 
```

**永远不要**硬编码绝对路径，你只是让你的设置文件不那么便携，可能会杀死小猫。根据您的需要进行调整：

```
import os.path
import posixpath

PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), '..')

STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')

# fix STATICFILES_DIRS too 
```

现在，回答你的问题。django.contrib.staticfiles 很棒，但起初可能有点混乱。

1.  您**必须**了解[collectstatic 命令](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)：

    > 将静态文件收集到 STATIC_ROOT。[...] 使用启用的查找器搜索文件。默认是查看 STATICFILES_DIRS 中定义的所有位置以及 INSTALLED_APPS 设置指定的应用程序的“静态”目录。

2.  使用 runserver，静态文件会自动提供，但在生产模式下（DEBUG=False，像 Nginx 这样的真实 HTTP 服务器），您应该运行 collectstatic 来（重新）构建 STATIC_ROOT

3.  STATIC_ROOT：是 HTTP 服务器应该**从**.

4.  STATIC_URL：是 HTTP 服务器应该将静态文件**提供给**的根 URL 。

5.  STATICFILES_DIRS：其他静态目录，除了每个应用程序的“静态”子目录。因为 django.contrib.admin 是一个带有“静态”文件夹的普通应用程序，所以不需要在设置中指定它。

**结论**：如果 STATIC_ROOT 解析为`/home/coat/www/site/app/static/`，并且 STATIC_URL 是`/static/`，那么您应该：

1.  运行 collectstatic 管理命令

2.  配置 Nginx 服务`/home/coat/www/site/app/static/`于`/static/`，即：

    ```
    location ^~ /static/ {
        alias /home/coat/www/site/app/static/;
    } 
    ```

3.  重新加载 nginx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:45:31.900

在开发过程中，runserver 命令可以为您的静态文件提供服务。在生产中，您需要配置 NGinx 来执行此操作。我推荐你阅读的 Django 文档中有两章：

1.  [在生产中提供静态文件](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-static-files-in-production)
2.  [服务文件（部署）](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-files)

特别是最后一个链接解释了如何配置 NGinx 以提供静态文件。

# iphone - Read Device Token for iPhone Push Notification

> ID：11539101
> 
> 赞同：1
> 
> 时间：2012-07-18T10:15:24.553
> 
> 标签：iphone, apple-push-notifications, devicetoken

I try to implement push notification in my iPhone application. I have create Provisioning Profile and App-id for push notification and add this certificates into Xcode. Connect iPhone device to mac system and build application through device for read Device token using the following code.

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    NSLog(@"didRegisterForRemoteNotificationsWithDeviceToken:\n%@", deviceToken);
}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{
    NSLog(@"didFailToRegisterForRemoteNotificationsWithError:%@", [error localizedDescription]);
} 
```

But it returns error.. like

> *didFailToRegisterForRemoteNotificationsWithError:no valid 'aps-environment' entitlement string found for application 2012-07-18 14:18:08.597 Z2NotifyMe[1874:707] didFailToRegisterForRemoteNotificationsWithError:Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x11fee0 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}*

I have remove all old certificates in Xcode and my device, then re-create all certificate newly then execute above same code it returns same above error.

Please help solve this problem.

Thanks..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:23:28.143

使用以下代码注册您的设备：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)]; 
```

在`applicationDidFinishLaunching:`方法中。

我希望您尝试使用的设备没有越狱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:19:31.073

当我正确执行所有步骤时，我遇到了类似的问题，但我仍然收到此错误。

尝试执行以下步骤，它对我有帮助：
1）转到您的配置文件 -> 配置
2）在您的应用程序配置文件附近按右侧的“编辑”按钮 - > 然后修改
3）在此处进行一些更改，它改变是什么并不重要，这只是为了触发一个新的配置文件。取消选择其中一个设备，或更改名称，您可以稍后将其更改回来。
4) 按“提交”按钮
5) 下载配置文件并将其拖到 Xcode。（之前在 Xcode 中删除您的旧配置文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:57:01.107

当您的代码签名身份未启用推送通知时，会出现此问题。看看这个链接：

[http://mobiforge.com/developing/story/programming-apple-push-notification-services](http://mobiforge.com/developing/story/programming-apple-push-notification-services)

[http://blog.martinreichart.com/2010/01/getting-iphone-push-notifications-to-work/](http://blog.martinreichart.com/2010/01/getting-iphone-push-notifications-to-work/)

# php - Magento 订单创建 sales_flat_quote_item 未进行

> ID：11539102
> 
> 赞同：5
> 
> 时间：2012-07-18T10:15:31.080
> 
> 标签：php, zend-framework, magento

我有一个模块，它从另一个站点获取提要，然后将订单导入 magento。问题是，尽管订单已正确创建并出现在 Magento 中，但它们并未显示在“已订购产品”报告中。

原因似乎是该报告查看了 sales_flat_quote_item 表以产生结果，但我的销售项目没有条目。然而，它们确实正确地出现在 sales_flat _order_item 中。

下面是代码的缩短版本。

关于为什么我没有在 flat_quote_item 中获得条目的任何建议？

为什么 Ordered Products 报告使用的 Magento 模型使用报价表而不是订单表？

```
$quote = Mage::getModel('sales/quote')->setStoreId((string) $dataArray->StoreviewId);

if (is_object($product)) {

                $product->setPrice(((string) $orderitem->Price) / $reverseRate);

                $item = Mage::getModel('sales/quote_item');
                $item->setQuote($quote)->setProduct($product);
                $item->setData('qty', (string) $orderitem->Quantity);
                $item->setCustomPrice((string) $orderitem->Price);
                $item->setOriginalCustomPrice((string) $orderitem->Price);

                $quote->addItem($item);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:10:16.083

`$item->save`此代码未显示对or的任何调用`$quote->save`，因此可能是您没有保存`quote`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:31:20.667

> 为什么 Ordered Products 报告使用的 Magento 模型使用报价表而不是订单表？

因为您可能有一个未付款或被取消的订单，因此产品未交付。系统中仍有订单，只是没有执行。我的猜测是，具体的报告应该只包含成功的订单，产品的发货地点或至少报价的发送地点。

> 关于为什么我没有在 flat_quote_item 中获得条目的任何建议？

您需要生成报价，这在保存订单时不会自动完成。

请参阅以下论坛主题以获取有关如何生成报价的提示：http: [//www.magentocommerce.com/boards/viewthread/28426/P30/](http://www.magentocommerce.com/boards/viewthread/28426/P30/)

# validation - disable drupal date validation

> ID：11539106
> 
> 赞同：0
> 
> 时间：2012-07-18T10:15:51.577
> 
> 标签：validation, drupal, date, drupal-7

I have a date field (widget = select list) in a drupal 7 content type, And I want to be able to enter a date like 2012/2/31 without any validation error? what can I do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:55:43.957

问题`2012/2/31`不在于日期，而只是一个类似于真实日期格式的文本字符串。

如果您不想使用正确、有效的日期，那么您根本不应该使用日期字段。我建议改为添加一个文本字段，然后使用[字段验证](http://drupal.org/project/field_validation)模块来定义一个模式来测试输入。这样您就可以接受任何类型的类似于日期的字符串，而不仅仅是真实的日期。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T10:34:44.290

您可以使用日期模块，它为您提供日期选择器小部件，输出将与 2012/2/31 相同，您必须使用文本字段小部件。

*   [日期模块](http://drupal.org/project/date)

# c# - Drawing on PictureBox

> ID：11539107
> 
> 赞同：1
> 
> 时间：2012-07-18T10:15:55.800
> 
> 标签：c#, winforms, drawing, picturebox

in a `UserControl` I have a `PictureBox` and some other controls. For the user control which contains this picturebox named as `Graph` I have a method to draw a curve on this picture box:

```
 //Method to draw X and Y axis on the graph
    private bool DrawAxis(PaintEventArgs e)
    {
        var g = e.Graphics;
        g.DrawLine(_penAxisMain, (float)(Graph.Bounds.Width / 2), 0, (float)(Graph.Bounds.Width / 2), (float)Bounds.Height);
        g.DrawLine(_penAxisMain, 0, (float)(Graph.Bounds.Height / 2), Graph.Bounds.Width, (float)(Graph.Bounds.Height / 2));

        return true;
    }

    //Painting the Graph
    private void Graph_Paint(object sender, PaintEventArgs e)
    {
        base.OnPaint(e);
        DrawAxis(e);
     }

    //Public method to draw curve on picturebox
    public void DrawData(PointF[] points)
    {
        var bmp = Graph.Image;
        var g = Graphics.FromImage(bmp);

        g.DrawCurve(_penAxisMain, points);

        Graph.Image = bmp;
        g.Dispose();
    } 
```

When application starts, the axis are drawn. but when I call the `DrawData` method I get the exception that says `bmp` is null. What can be the problem?

I also want to be able to call `DrawData` multiple times to show multiple curves when user clicks some buttons. What is the best way to achive this?

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:19:18.900

You never assigned `Image`, right? If you want to draw on a `PictureBox`’ image you need to *create* this image first by assigning it a bitmap with the dimensions of the PictureBox:

```
Graph.Image = new System.Drawing.Bitmap(Graph.Width, Graph.Height); 
```

You only need to do this *once*, the image can then be reused if you want to redraw whatever’s on there.

You can then subsequently use this image for drawing. For more information, [refer to the documentation](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx#Y0).

By the way, this is totally independent from drawing on the `PictureBox` in the `Paint` event handler. The latter draws on the control directly, while the `Image` serves as a backbuffer which is painted on the control automatically (but you *do* need to invoke `Invalidate` to trigger a redraw, after drawing on the backbuffer).

Furthermore, it makes *no* sense to re-assign the bitmap to the `PictureBox.Image` property after drawing. The operation is meaningless.

Something else, since the `Graphics` object is disposable, you should put it in a `using` block rather than disposing it manually. This guarantees correct disposing in the face of exceptions:

```
public void DrawData(PointF[] points)
{
    var bmp = Graph.Image;
    using(var g = Graphics.FromImage(bmp)) {
        // Probably necessary for you:
        g.Clear();
        g.DrawCurve(_penAxisMain, points);
    }

    Graph.Invalidate(); // Trigger redraw of the control.
} 
```

You should consider this as a fixed pattern.

# css - 在 CSS 中浮动

> ID：11539108
> 
> 赞同：0
> 
> 时间：2012-07-18T10:15:55.790
> 
> 标签：css, css-float

我想知道这段代码有什么问题？

```
<style type="text/css">

.recipe h2{
float:left;
}

.recipe .intro,
.recipe ol{
float:right;
width:500px;
}

</style>
</head>

<body>
<h1>Recipes for Cheese</h1>

<p class="intro">Cheese is a remarkably versatile food, available in literally hundreds of          varieties with different flavores and textures.</p>

<div class="recipe">

    <h2>Welsh Rarebit</h2>

    <p class="intro">Welsh Rarebit is a savory dish made from melted cheese, often Cheddar, on toasted bread, and a variety of other ingredients such as mustard, egg or bacon. Here is one take on this classic.</p>

    <ol>
    <li>Lightly toast the bread</li>
    <li>Place a baking tray, and spread with butter.</li>
    <li>Add the grated Cheddar cheese and 2 tablespoons of beer to a saucepan. Place the saucepan over a medium heat, and stir the cheese continuously until it has melted. Add a teaspoon of wholegrain mustard and grind in a little pepper. Keep stirring.</li>
    <li>When thick and smooth, pour over each piece of toast spreading it to the edges to stop the toast from burning.</li>
    <li>Place undre the grill for a couple of minutes or until golden brown.</li>
</ol>
</div>

</body>
</html> 
```

原来，这段代码的解决方案应该和这里的书中图片一样： [https ://picasaweb.google.com/lh/photo/fDg4GiRbz3mCZvh2krcsqdMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/fDg4GiRbz3mCZvh2krcsqdMTjNZETYmyPJy0liipFm0?feat=directlink)

上面的代码给了我这个： [https ://picasaweb.google.com/lh/photo/kaH-7AE5K-UKMcxxlJdkrtMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/kaH-7AE5K-UKMcxxlJdkrtMTjNZETYmyPJy0liipFm0?feat=directlink)

我现在已经反复阅读了几次，找不到任何问题，但不知道为什么会这样。

谁能解释它为什么这样做以及如何纠正它？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:20:02.200

`clear: right;`后面加一个`float:right;`

现场演示[http://dabblet.com/gist/3135429](http://dabblet.com/gist/3135429)

* * *

你的`.recipe .intro`和你的`.recipe ol`都向右浮动。

`.recipe .intro`是 HTML 中的第一个，所以它是右边的第一个。除非您清除浮动，`.recipe ol`否则不会在 下方`.recipe .intro`，而是在其左侧（因为它尽可能向右）。

* * *

如果你想让整个事情接近于`h2`，你可以考虑对 CSS 做更多的改变：

*   首先，给 一个固定值`width`，`h2`比如说 400px；你也可以设置`text-align`它；
*   不要浮动或给`width`任何`.recipe .intro`或固定`.recipe ol`；相反，只需给它们一个`margin-left`，它等于`h2`(`400px`在这种情况下) 的宽度；

CSS：

```
.recipe h2 {
    float: left;
    width: 400px;
    text-align: center;
}
.recipe .intro, 
.recipe ol {
    margin-left: 400px;
} 
```

演示[http://dabblet.com/gist/3135529](http://dabblet.com/gist/3135529)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:42:13.280

试试这个：

添加

```
<div style="clear:right"></div> 
```

后

```
<p class="intro">Welsh Rarebit is a savory dish made from melted cheese, often Cheddar, on toasted bread, and a variety of other ingredients such as mustard, egg or bacon. Here is one take on this classic.</p> 
```

# jquery - jQuery在浮动li中查找每行的项目数

> ID：11539113
> 
> 赞同：27
> 
> 时间：2012-07-18T10:16:09.167
> 
> 标签：jquery, css-float, html-lists, loops

有没有办法在 a 中找到它的**float:**设置为**left**的项目数（`li`标签）。假设我有大量由标签直观表示的文件夹。由于浮动行为，一旦不适合单行，它们就会被向下推，给它行和列外观。我的问题是`ul`****`li``li`****

 ****使用 jQuery ..etc 有没有办法确定`li`每行的数量

### 代码

```
<ul>
 <li>A</li>
 <li>B</li>
 <li>C</li>
 <li>D</li>
 <li>E</li>
 <li>F</li>
 <li>G</li>
 <li>H</li>
 <li>I</li>
 <li>J</li>
</ul> 
```

### 风格

```
ul,li{margin:0 0;padding:0 0;}
ul li{display:inline;float:left} 
```

对于我的决议 li 最多 F 排成一排，其余的排成另一排，如下所示。我想要一种 jquery 方法来获取第 1 行中的元素数量（在我的情况下为 6）。

```
A B C D E F
G H I J 
```

### 语境

我正在添加键盘事件以使用左、右、上、下导航到每个文件夹（li）。左右就像突出显示下一个和上一个 li 一样简单。上下键需要转到下一行和上一行。现在你会明白的：）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-18T10:40:04.057

我们可以通过检查 LI 的数量来做到这一点，它们的顶部（y 轴）位置与之前的兄弟姐妹的位置匹配。

演示：http: [//jsfiddle.net/KgBpx/1/](http://jsfiddle.net/KgBpx/1/)

**更新演示：http:** [//jsfiddle.net/KgBpx/2/](http://jsfiddle.net/KgBpx/2/)

注意：在调整窗口大小时也进行了重新计算，以充分展示逻辑。

代码：

```
function calculateLIsInRow() {
    var lisInRow = 0;
    $('ul li').each(function() {
        if($(this).prev().length > 0) {
            if($(this).position().top != $(this).prev().position().top) return false;
            lisInRow++;
        }
        else {
            lisInRow++;   
        }
    });
    console.log('No: of lis in a row = ' + lisInRow);
}

calculateLIsInRow();

$(window).resize(calculateLIsInRow); 
```

**笔记**

如果 LI 的总数不是 lisInRow 的倍数，则所有行的 LI 计数将相同，除了最后一行。通过执行以下操作可以轻松找到最后一行中的 LI 数量：`$('ul li').length % lisInRow`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-27T01:53:54.953

使用 filter() 可以减少代码量。

```
function filterByTop(top) {
  return function(i) { return $(this).offset().top == top; };
}
var el = $('li:first');
var rowSz = $('li').filter(filterByTop(el.offset().top)).length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:36:08.647

您可以使用以下函数获取一个数组，该数组将包含每行的 Li 项目数。如果您只想要左浮动的 li 项目，您可以轻松添加该条件。

```
function computeItemsPerRow() {
        var itemsInRows = new Array();

        var countLi = $('ul li');
        var rowWidth = $('#rowContainer').width(); // TODO: Replace with the proper row container selector.
        var curRowWidth = 0;
        var itemsInCurRow = 0;

        for (var i = 0; i < countLi; i++) {
            var itemWidth = $('li:eq(' + i + ')').width();
            if (curRowWidth + itemWidth > rowWidth || i == countLi - 1) {

                itemsInRows[itemsInRows.length] = itemsInCurRow;
                itemsInCurRow = 1;
                curRowWidth = itemWidth;
            }
            else {
                itemsInCurRow++;
                curRowWidth = curRowWidth + itemWidth;
            }
        }

        return itemsInRows;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:37:55.663

您可以通过顶部位置来做到这一点：

```
var arr = [];

$('ul li').each(function(i){
    arr[i] = $(this).position().top;
}); 
```

然后计算结果数组中的匹配值 -[如何计算 Javascript 数组中的匹配值](https://stackoverflow.com/questions/2228362/how-to-count-matching-values-in-array-of-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T10:40:28.260

试试这个（真的不行，可能需要一些调试）

```
var numberPerRow = [];
var offsets =      [];
$("li").each(function(){
    var thisOffset = $(this).offset().top; 
    var index = $.inArray(thisOffset, offsets);
    if(index >=0){
        numberPerRow[index]++;
    }else{
        offsets.push(thisOffset);
        numberPerRow.push(1);
    }
}); 
```

**更新**

要获得数组中的最高行值，您可以使用以下内容：

```
console.log( Math.max.apply(null, numberPerRow) ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-16T17:01:55.313

```
var rows = 0;
$('li').each(function() {
    var $this = $(this);
    var $prev = $this.prev();
    if ($prev.length && $this.position().top === $prev.position().top) rows++;
});

console.log(rows); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-03T14:41:47.360

@techfoobar 脚本的小更新：

当其项目数与常见项目数不同时，您可以隐藏最后一行

[http://jsfiddle.net/cavico/KgBpx/222/](http://jsfiddle.net/cavico/KgBpx/222/)

```
if(lisInLastRow != lisInRow) {
    $('ul li').slice( -lisInLastRow ).hide();
} 
```****

# regex - 在字符串中查找特定字符并将其放置在同一字符串中定义的分隔符之后的不同位置

> ID：11539118
> 
> 赞同：1
> 
> 时间：2012-07-18T10:16:31.423
> 
> 标签：regex, string, r, split, pattern-matching

让我们定义以下字符串`s`：

```
s <- "$ A; B; C;" 
```

我需要翻译`s`成：

```
"$ A; $B; $C;" 
```

分号是分隔符。但是，$ 只是可以出现在字符串中的 3 个特殊字符之一。数据框`m`包含所有 3 个特殊字符：

```
m <- data.frame(sp = c("$", "%", "&")) 
```

我第一次使用`strsplit`分号作为分隔符来分割字符串

```
> strsplit(s, ";")
[[1]]
[1] "$ A" " B"  " C" 
```

我认为下一步是使用 grep 或 match 来检查第一个字符串是否包含 data frame 中定义的 3 个特殊字符中的任何一个`m`。如果是这样，可以使用 gsub 将匹配的特殊字符插入剩余的子字符串中。然后简单地使用 paste with collapse = "" 再次将子字符串合并在一起。那有意义吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:31:40.173

像这样的东西怎么样：

```
getmeout = gsub("[$|%|& ]", "", unlist(strsplit(s, ";")))
whatspecial = unique(gsub("[^$|%|&]", "", s))
whatspecial
# [1] "$"
getmeout
# [1] "A" "B" "C"
paste0(whatspecial, getmeout, sep=";", collapse="")
# [1] "$A;$B;$C;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:37:51.013

这是一种方法：

```
library(stringr)
separator <- '; '

# extract the first part
first.part <- str_split(s, separator)[[1]][1]
first.part
# [1] "$ A"

# try to identify your special character
special <- m$sp[str_detect(first.part, as.character(m$sp))]
special
# [1] $
# Levels: $ & %

# make sure you only matched one of them
stopifnot(length(special) == 1)

# search and replace
gsub(separator, paste(separator, special, sep=""), s)
# [1] "$ A; $B; $C;" 
```

如果我错过了你的一些假设，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:44:45.823

反向引用将其变成单行：

```
s <- c( "$ A; B; C;", "& A; B; C;", "% A; B; C;" )
ms = c("$", "%", "&")

s <- gsub( paste0("([", paste(ms,collapse="") ,"]) ([A-Z]); ([A-Z]); ([A-Z]);") , "\\1 \\2; \\1 \\3; \\1 \\4" , s) 

> s
[1] "$ A; $ B; $ C" "& A; & B; & C" "% A; % B; % C" 
```

然后，如果需要，您可以使正则表达式适当地通用（匹配多个空格、多个字母数字字符等）。

# gwt - GCM server jar and GCM with GWT

> ID：11539119
> 
> 赞同：1
> 
> 时间：2012-07-18T10:16:31.797
> 
> 标签：gwt, google-cloud-messaging

Hi am new bee to the GCM and GWT and i was worndering from where do i get the jar for the gcm-server implementation,i was literally not able to find the jar for the download. Can anyone please guide me from where do i get the gcm-server.jar for my appengine server.

And also how do i go ahead with the GWT push implementation to android using GCM.

[link for the GCM-android](http://developer.android.com/guide/google/gcm/gs.html)

i have found this link but i was not sure if this page had any source for the gcm-server jar for download.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:57:51.737

得到了 gwt-server.jar。当我们在 eclipse 上从 extras 安装 Google Cloud Messaging for Android Library 时，在 android 根目录/extras 目录中将创建 gcm 目录，并且在其中我们有另一个目录 dist/gcm-server ，我们可以在其中获取 gcm-server.jar还有一些非常有用的 google appengine 与 gcm 的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:19:50.203

请检查以下网址。

[https://github.com/slorber/gcm-server-repository/tree/master/deployer](https://github.com/slorber/gcm-server-repository/tree/master/deployer)

你得到 Gcm-server.jar 文件

其他完整的详细信息来自以下网址。

[http://developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)

# sql - select "step" records

> ID：11539120
> 
> 赞同：3
> 
> 时间：2012-07-18T10:16:37.967
> 
> 标签：sql, postgresql

Given the following table

```
 grp |   ind |   val
----------------------
    a |     1 |     1
    a |     2 |     1
    a |     3 |     1
    a |     4 |     2
    a |     5 |     2
    a |     6 |     4
    a |     7 |     2
    b |     1 |     1
    b |     2 |     1
    b |     3 |     1
    b |     4 |     3
    b |     5 |     3
    b |     6 |     4 
```

I need to select the following:

```
 grp |   ind |   val
----------------------
    a |     1 |     1
    a |     4 |     2
    a |     6 |     4
    a |     7 |     2
    b |     1 |     1
    b |     4 |     3
    b |     6 |     4 
```

That is for each 'grp', each record where the 'val' is different to the proceeding 'val' (ordered by 'index') So each record where the 'value' "steps".

what would be the most efficient way to achieve this?

thanks.

Here is a script to create the test case:

```
create temp table test_table
(
    grp character varying,
    ind numeric,
    val numeric
);
insert into test_table values
    ('a', 1 , 1),
    ('a', 2 , 1),
    ('a', 3 , 1),
    ('a', 4 , 2),
    ('a', 5 , 2),
    ('a', 6 , 4),
    ('a', 7 , 2),
    ('b', 1 , 1),
    ('b', 2 , 1),
    ('b', 3 , 1),
    ('b', 4 , 3),
    ('b', 5 , 3),
    ('b', 6 , 4); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:46:59.137

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE ztable
        ( zgroup CHAR(1)
        , zindex int
        , zvalue INTEGER
        );
INSERT INTO ztable(zgroup,zindex,zvalue) VALUES
    ('a',     1,      1)
    ,('a',     2,      1)
    ,('a',     3,      1)
    ,('a',     4,      2)
    ,('a',     5,      2)
    ,('a',     6,      4)
    ,('b',     1,      1)
    ,('b',     2,      1)
    ,('b',     3,      1)
    ,('b',     4,      3)
    ,('b',     5,      3)
    ,('b',     6,      4)
        ;

WITH agg AS (
        SELECT zgroup
        , zindex
        , zvalue
        , row_number() OVER (PARTITION BY zgroup ORDER BY zindex) AS zrank
        FROM ztable
        )
SELECT t1.zgroup,t1.zindex,t1.zvalue
FROM agg t1
LEFT JOIN agg t0 ON t0.zgroup = t1.zgroup AND 1+t0.zrank = t1.zrank
WHERE t0.zvalue <> t1.zvalue OR t0.zrank IS NULL
        ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:55:50.093

```
select grp,
       ind,
       val
from (
   select grp, 
          ind, 
          val,
          lag(val,1,0::numeric) over (partition by grp order by ind) - val as diff
   from test_table
) t
where diff <> 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:31:26.577

```
select group,min(index) as index,value from table
group by group,value 
```

# nginx - How can I tell nginx to silently ignore requests that dont match and let them time out instead of giving 404

> ID：11539121
> 
> 赞同：10
> 
> 时间：2012-07-18T10:16:37.990
> 
> 标签：nginx

I have a server block listening to 80 port requests on a specific server name along with some location directives. How can I make nginx treat any request that doesnt match as if it hadnt received it, that is let it time out? Currently those requests are treated with an 404 error

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-21T07:21:06.540

有一种方法可以忽略每个请求并告诉 nginx 什么都不响应：

```
server {
  listen 80 default_server;
  return 444;
} 
```

记录在这里： http: [//nginx.org/en/docs/http/ngx_http_rewrite_module.html](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html)

> 非标准代码 444 关闭连接而不发送响应头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-19T17:37:55.970

> 如何让 nginx 处理任何不匹配的请求，就好像它没有收到它一样，那就是让它超时？

你不能松开时钟。要找出正在请求的服务器名称（来自 TLS-SNI 和/或`Host`标头），nginx 必须首先`accept`连接（这将导致操作系统的 TCP/IP 堆栈将 SYN-ACK 数据包发送回请求者，以便推进 TCP 握手）。一旦连接被接受，对方就知道有东西在监听。所以你已经放弃了连接超时的机会。

已经不可挽回地失去了*这个*机会，下一个机会就是点击套接字接收超时。由于客户端将等待服务器响应*某些*内容，因此理论上您可以通过完全不响应来触发其接收超时。目前标准 nginx 中没有机制告诉它坐在那里暂时什么都不做，但是如果您也愿意涉及另一块软件，那么您可以使用`proxy_pass`指令或类似的指令将该责任转移到另一台服务器. 但是请注意，这将使您的服务器在连接的整个生命周期内使用一定数量的操作系统资源。Nginx 在套接字上运行，而不是原始数据包，操作系统管理这些套接字。

按要求回答了问题后，我认为最好质疑问题的前提。为什么要让客户端超时？如果您的目标是惹恼或“报复”恶意攻击者，那么 nginx 是错误的工具。这是计算机安全领域，您将需要使用在网络堆栈的较低层运行的工具。Nginx 被设计成一个网络服务器，而不是一个蜜罐。

如果您的目标只是隐藏有一个服务器正在侦听的事实，那么您的目标是不可能通过当前 HTTP 的工作方式实现的。防火墙只能通过在连接被接受*之前*拒绝连接来实现这样的重影。因此，TCP 握手永远不会进行，没有 SYN-ACK 数据包被发送回客户端，并且据任何人所知，*整个端口*都是一个黑洞。但是在确定请求的服务器名称*之后*，就不可能这样做了。IP 地址和端口可从第一个数据包获得；服务器名称不是。

在不远的将来的某一天，HTTP 可能会使用 UDP 而不是 TCP，并且请求参数（例如服务器名称）可能会在第一个数据包上预先呈现。然而，除非并且直到这成为常态，否则我上面描述的情况将继续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:21:18.110

我假设您正在尝试转移恶意请求。像这样的东西可能会起作用（未经测试）。

设置默认服务器（捕获与现有服务器名称不匹配的任何请求），然后将客户端重定向回自身：

```
server {
    listen  80 default_server;
    rewrite ^ http://127.0.0.1/;
} 
```

您必须为有效服务器块内的无效位置设置类似的包罗万象。可能比你想要的更令人头疼。

我不知道这在实践中会有多大用处。考虑 fail2ban 或其他一些可以监控您的日志并在防火墙处禁止客户端的工具可能会更好。

# php - 使用php代码从where子句中的下拉列表中获取值

> ID：11539125
> 
> 赞同：0
> 
> 时间：2012-07-18T10:16:49.217
> 
> 标签：php

我的代码是这样的：

```
$zone = $_POST['zone'];
$state = $_POST['state'];

$sql = "Select zone_id from tbl_zone where zone_name = $zone";
$query = mysql_query($sql); 
```

我正在选择从数据库中获取并列在下拉列表中的区域名称。现在我想获取区域名称的 id 以存储在其他表中。

在 where 子句中 zone_name 为空白。上面的代码应该做哪些改变？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:54:01.537

我建议你设计一个合适的数据库。就像你的问题有点令人困惑。让我告诉你这个过程。首先设计 2 个表，每个表有 2 列。让我们假设表 1 为州，表 2 为城市。状态表包含 2 列，即 zone_id 和 zone_state。city 表包含 2 列，即 zone_id 和 zone_city。以 zone_id 作为主键并使用 auto_increment 字段制作状态表，并为每个 id 提供唯一状态，例如 zone_id 1 作为 AP，zone_id 2 作为泰米尔纳德邦，zone_id 3 作为卡纳塔克邦，zone_id 4 作为喀拉拉邦，zone_id 5 作为马哈拉施特拉邦等......现在城市表添加带有重复值的 zone_id，例如 zone_id 1 作为 Hyderabad，zone_id 1 作为 Vijayawada，zone_id 1 作为 Vizag 等。zone_id 2 作为钦奈，zone_id 2 作为哥印拜陀等......我希望你明白我的意思......如果你这样设计，然后检索结果对你来说很容易。

看到这段代码：

```
CREATE TABLE IF NOT EXISTS `state` (
  `zone_id` int(2) NOT NULL AUTO_INCREMENT,
  `zone_state` varchar(25) NOT NULL DEFAULT '',
  PRIMARY KEY (`zone_id`)
) ENGINE=MyISAM;

CREATE TABLE IF NOT EXISTS `city` (
  `zone_id` int(2) NOT NULL DEFAULT '0',
  `zone_city` varchar(25) NOT NULL DEFAULT ''
) ENGINE=MyISAM; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:35:23.917

试试这个。。

```
$sql = "Select zone_id from tbl_zone where zone_name = '$zone'"; 
```

# ruby-on-rails - Rails：errors.add 显示 HTML 标签

> ID：11539126
> 
> 赞同：0
> 
> 时间：2012-07-18T10:16:51.557
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.1

今天，我开始在验证上遇到一个奇怪的问题。

这是代码。

```
self.errors.add("", 'Must confirm your current password to set a new one') 
```

但我在输出中得到 HTML 标签。比如下面这张。

```
<div id="errorList" class="errorList"><div class="errorListInner"><h5>1 error prohibited saving your profile</h5><ul><li> Must confirm your current password to set a new one</li></ul></div></div> 
```

我认为 CSS 没有得到应用。我正在使用 rails 3.1.3 和 ruby​​ 1.9.2。

谁能帮我吗。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:12:18.500

通过简单的修复找到了答案。

不要在模型中对此做任何事情。只需将“原始”放在您查看这些错误的位置即可。

喜欢

```
<%= raw a_helper_function_for_errors %> 
```

# objective-c - 在 iOS 中制作动画时 Button 上的用户交互

> ID：11539128
> 
> 赞同：3
> 
> 时间：2012-07-18T10:17:02.490
> 
> 标签：objective-c, ios, animation, button

我正在以编程方式创建按钮，并且它们是动画的（淡入淡出和移动），但我需要按钮仍然具有用户交互。我尝试过类似的事情

选项：（UIViewAnimationOptionAllowUserInteraction

这似乎无济于事：/我在这里阅读了几篇不同建议的帖子，包括有人说这实际上是不可能的。有谁知道我是否可以在按钮动画时启用用户交互，如果不可能，人们如何解决这个问题？

谢谢你。

这是我正在使用的当前动画代码：

```
[UIView animateWithDuration:106 
                      delay:0 
                    options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionAllowAnimatedContent | UIViewAnimationOptionCurveEaseInOut)
                 animations:^{

                     [_planetButton setCenter:point];
                     _planetButton.alpha = 0.2;
                     _planetButton.userInteractionEnabled = YES;

                 }
                 completion:^(BOOL finished){
                     NSLog(@"animation completed");
                     //[_planetButton removeFromSuperview];
                 }
 ]; 
```

我还尝试了动画，例如：

```
 CABasicAnimation *move = [CABasicAnimation animationWithKeyPath:@"transform2"]; 
    move.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    move.duration = 5.105;
    move.repeatCount = 1;
    move.autoreverses = YES;
    move.removedOnCompletion = YES;
    move.toValue = [NSValue valueWithCGPoint:point];
    [_planetButton.layer addAnimation:move forKey:nil]; 
```

# asp.net-mvc-3 - 在 asp.net mvc 3 中使用 Valums 插件提交 Ajax 表单

> ID：11539132
> 
> 赞同：0
> 
> 时间：2012-07-18T10:17:09.903
> 
> 标签：asp.net-mvc-3, ajax-upload

我在 asp.net mvc 3 中使用 Valums 上传器插件进行文件上传。以下是在表单中具有表单字段和 ajax 查询上传按钮的视图。我不确定我做对与否。我必须在视图上进行更改，以便当我选择要上传表单字段的文件时，也会发送该值。

**意见：**

```
<link href="@Url.Content("~/Content/css/fileuploader.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Content/js/fileuploader.js")" type="text/javascript"></script>

@using (Html.BeginForm("Upload","AjaxUpload")) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Upload Image File</legend>
         <div class="editor-label">
           @Html.Label("Select Language")
        </div>
        <div>

          @Html.DropDownList("Language1", (SelectList) ViewBag.lang)
      </div>
         <div class="editor-label">
           @Html.Label("Select Category")
        </div>

      <div>
          @Html.DropDownList("ParentCategoryID", ViewBag.ParentCategoryID as SelectList) 
      </div>

      <div id="file-uploader">
    <noscript>
        <p>
            Please enable JavaScript to use file uploader.</p>
    </noscript>
</div>
    </fieldset>
}

**<script type="text/javascript">
    var uploader = new qq.FileUploader
    ({
        element: document.getElementById('file-uploader'),
        action: '@Url.Action("upload")', // put here a path to your page to handle uploading
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], // user this if you want to upload only pictures
        sizeLimit: 4000000, // max size, about 4MB
        minSizeLimit: 0 // min size
    });
</script>** 
```

如何将表单的值传递给 HTTPOST Action 的控制器，以便将数据保存到数据库。在这里，我有上传操作将数据保存在数据库中，但我不知道要检索到通过表单发送的那些值。

**HttpPost 动作**

```
 [HttpPost]
        public ActionResult Upload(HttpPostedFileBase qqfile)
        {
            var wav = new PlayWav
            {
                Name = ***filename***,
                CategoryID = ***value from category dropdown select list***,
                UserID = repository.GetUserID(HttpContext.User.Identity.Name),
                LanguageID = int.Parse(***value from language dropdown select list***),
                UploadDateTime = DateTime.Now,
                ActiveDateTime = DateTime.Now,
                FilePath = "n/a"
            };

            if (qqfile != null)
            {
                // this works for IE
                var filename = Path.Combine(Server.MapPath("~/App_Data/Uploads"), Path.GetFileName(qqfile.FileName));
                qqfile.SaveAs(filename);

                return Json(new { success = true }, "text/html");
            }
            else
            {
                // this works for Firefox, Chrome
                var filename = Request["qqfile"];
                if (!string.IsNullOrEmpty(filename))
                {
                    filename = Path.Combine(Server.MapPath("~/App_Data/Uploads"), Path.GetFileName(filename));
                    using (var output = System.IO.File.Create(filename))
                    {
                        Request.InputStream.CopyTo(output);
                    }

                    **db.PlayWavs.Attach(wav);
                    db.SaveChanges();**

                    return Json(new { success = true });
                }
            }
            return Json(new { success = false });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:20:34.650

您没有阅读[文档](http://valums.com/ajax-upload/)吗？有一整节题为*Sending additional params*。甚至给出了一个例子：

```
var uploader = new qq.FileUploader({
    element: document.getElementById('file-uploader'),
    action: '/server-side.upload',
    // additional data to send, name-value pairs
    params: {
        param1: 'value1',
        param2: 'value2'
    }
}); 
```

# android - 如何在 android 应用程序中设置 x,y 值？

> ID：11539135
> 
> 赞同：0
> 
> 时间：2012-07-18T10:17:24.043
> 
> 标签：android, textview, java, adk

我是 android 应用程序的新手，使用 textview 设置高度和宽度，但我不知道如何在 android 应用程序中设置 x,y 值，请帮助我

提前致谢

```
Here i tried:

 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select Your country"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:20:18.490

如果要动态设置 width 和 height ，则必须为 textview 或 Android 中的任何视图设置布局参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:21:14.257

您只能在**AbsoluteLayout**中使用 x 和 y 位置。像这样

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
        <Button android:layout_height="wrap_content"
            android:layout_width="wrap_content" 
            android:id="@+id/button1" 
            android:layout_x="104dp" 
            android:text="Button" 
            android:layout_y="54dp"></Button>
</AbsoluteLayout> 
```

[查看此](http://developer.android.com/guide/topics/ui/layout/linear.html)站点中的其他布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:45:14.467

如果你想设置视图的高度和宽度（比如 textview），你可以在 xml 布局中这样做。例如 ：

```
 <TextView
    android:id="@+id/textView1"
    android:layout_width="DESIRED WIDTH"
    android:layout_height="DESIRED HEIGHT"
    android:text="Select Your country"/> 
```

只需设置您的高度和宽度值。

或者，如果您想在运行时设置，您可以这样做

```
TextView textView =(TextView)findViewById(R.id.textView1);
textView.setWidth(DESIRED WIDTH);
textView.setHeight(DESIRED HEIGHT); 
```

所需高度和所需宽度由您决定。

希望它有所帮助。

# c# - 无法将“System.Windows.Controls.Grid”类型的对象转换为“System.Windows.Controls.TabItem”类型

> ID：11539137
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:18:00.627
> 
> 标签：c#, wpf, tabcontrol, tabitem

您好，我在 TabControl 中定义了多个 tabItem。选项卡项目 1、选项卡项目 2、选项卡项目 3

这些是 CloseableTabItem。

如果我在 tabItem1 中添加一个节点并按下一个按钮来为这个节点创建一个 subGraph 模型。这

tabItem2 中应出现相同的节点，以便 tabItem2-Header = nodeName 和 nodeName =

tabItem1-标题。

没有 (TabItem)tabControl.SelectedContent == tabItem1，代码工作正确，但

如果我在 tabItem2 中添加一个新节点并按下 subGraph-Button 节点，问题就在于

添加到 tabItem3 但 nodeName = tabItem1-Header。

我的代码抛出异常“无法将'System.Windows.Controls.Grid'类型的对象转换为'System.Windows.Controls.TabItem'。”

```
MyNodeData todata = new MyNodeData();
if (tabItem1.IsLoaded && (TabItem)tabControl.SelectedContent == tabItem1)
{
  string childNodeName = (String)tabItem1.Header;
  todata.Text = childNodeName;
  return;
}
 if (tabItem2.IsLoaded)
{
  string childNodeName = (String)tabItem2.Header;
  todata.Text = childNodeName;
  return;
}
 if (tabItem3.IsLoaded)
{
  string childNodeName = (String)tabItem3.Header;
  todata.Text = childNodeName;
  return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:20:15.990

`SelectedContent`是 TabItem 的内容。你想要的是`SelectedItem`.

# android - Android 中使用 SurfaceTexture 的相机预览示例

> ID：11539139
> 
> 赞同：28
> 
> 时间：2012-07-18T10:18:07.997
> 
> 标签：android

我正在尝试使用[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)渲染相机预览。我阅读了文档，但无法理解它是如何工作的。

任何人都可以提供一个示例示例（非常基本的示例）或使用[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)预览相机的链接。我用谷歌搜索了这个，但没有找到我要找的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-17T11:01:21.260

如果您想将相机与 TextureSurface 一起使用，您可以实现`SurfaceTextureListener`接口。您必须实现 4 种方法：

1) `onSurfaceTextureAvailable`- 在这里你设置你的相机

2) `onSurfaceTextureSizeChanged`- 在您的情况下，Android 的相机将处理此方法

3) `onSurfaceTextureDestroyed`- 在这里你摧毁所有相机的东西。

4) `onSurfaceTextureUpdated`- 当你有东西要改变时，在这里更新你的纹理！

检查以下示例：

```
 public class MainActivity extends Activity implements SurfaceTextureListener{

    private Camera mCamera;
    private TextureView mTextureView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mTextureView = new TextureView(this);
        mTextureView.setSurfaceTextureListener(this);

        setContentView(mTextureView);
    }

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
        mCamera = Camera.open();

        Camera.Size previewSize = mCamera.getParameters().getPreviewSize();
        mTextureView.setLayoutParams(new FrameLayout.LayoutParams(
                previewSize.width, previewSize.height, Gravity.CENTER));

        try {
            mCamera.setPreviewTexture(surface);
        } catch (IOException t) {
        }

        mCamera.startPreview();

    }

    @Override
    public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {
        // Ignored, the Camera does all the work for us
    }

    @Override
    public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
        mCamera.stopPreview();
        mCamera.release();
        return true;
    }

    @Override
    public void onSurfaceTextureUpdated(SurfaceTexture surface) {
        // Update your view here!
    }
} 
```

还有两件事：不要忘记在项目的清单中添加相机权限，并且`SurfaceTexture`可以从 API 11 获得。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-18T10:24:29.940

```
public class VideoCapture extends Activity implements OnClickListener, SurfaceHolder.Callback {
MediaRecorder recorder;
SurfaceHolder holder;
boolean recording = false;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

recorder = new MediaRecorder();
initRecorder();

SurfaceView cameraView = new SurfaceView(this);
holder = cameraView.getHolder();
holder.addCallback(this);
holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

cameraView.setClickable(true);
cameraView.setOnClickListener(this);
}

private void initRecorder() {
recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);

CamcorderProfile cpHigh = CamcorderProfile
        .get(CamcorderProfile.QUALITY_HIGH);
recorder.setProfile(cpHigh);
recorder.setOutputFile("/sdcard/videocapture_example.mp4");
recorder.setMaxDuration(50000); // 50 seconds
recorder.setMaxFileSize(5000000); // Approximately 5 megabytes
}

private void prepareRecorder() {
recorder.setPreviewDisplay(holder.getSurface());

try {
    recorder.prepare();
} catch (IllegalStateException e) {
    e.printStackTrace();
    finish();
} catch (IOException e) {
    e.printStackTrace();
    finish();
}
}

public void onClick(View v) {
if (recording) {
    recorder.stop();
    recording = false;

    // Let's initRecorder so we can record again
    initRecorder();
    prepareRecorder();
} else {
    recording = true;
    recorder.start();
}
}

public void surfaceCreated(SurfaceHolder holder) {
prepareRecorder();
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
    int height) {
}

public void surfaceDestroyed(SurfaceHolder holder) {
if (recording) {
    recorder.stop();
    recording = false;
}
recorder.release();
finish();
}
} 
```

# java - android HMAC 显示意外错误

> ID：11539140
> 
> 赞同：1
> 
> 时间：2012-07-18T10:18:13.320
> 
> 标签：java, android, hash, md5, hmac

我试图使用 md5 生成 HMAC，一切似乎都很完美，但它显示出意外的错误

代码如下

```
public String calcHmac(String src) throws Exception {

        String key = "PFhNTD48VUlEPlNYWUFOR0VUPC9VSUQ+PEVUUkFOQVVUSD48WFNQUk9MRT5BbGw8L1hTUFJPTEU+PFhTUFNlY3VyaXR5SUQ+MzMzPC9YU1BTZWN1cml0eUlEPjxYU1BTZWN1cml0eUlEPjk5NzwvWFNQU2VjdXJpdHlJRD48WFNQU2VjdXJpdHlJRD5HQjwvWFNQU2VjdXJpdHlJRD48WFNQU2VjdXJpdHlJRD5YMDM8L1hTUFNlY3VyaXR5SUQ+PFhTUFNlY3VyaXR5SUQ+WDAxPC9YU1BTZWN1cml0eUlEPjxYU1BSZWNpcGllbnQ+NDlBQ0NULVNZQU5HRVRSQU48L1hTUFJlY2lwaWVudD48L0VUUkFOQVVUSD48L1hNTD4=";
        SecretKeySpec keySpec = new SecretKeySpec(
                key.getBytes(),
                "HmacMD5");

        Mac mac = Mac.getInstance("HmacMD5");
        mac.init(keySpec);
        byte[] result = mac.doFinal(src.getBytes());
        return Hex.encodeHexString(result);   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:23:50.467

尝试这个

```
 public static String sStringToHMACMD5(String s, String keyString)
    {
        String sEncodedString = null;
        try
        {
            SecretKeySpec key = new SecretKeySpec((keyString).getBytes("UTF-8"), "HmacMD5");
            Mac mac = Mac.getInstance("HmacMD5");
            mac.init(key);

            byte[] bytes = mac.doFinal(s.getBytes("ASCII"));

            StringBuffer hash = new StringBuffer();

            for (int i=0; i<bytes.length; i++) {
                String hex = Integer.toHexString(0xFF &  bytes[i]);
                if (hex.length() == 1) {
                    hash.append('0');
                }
                hash.append(hex);
            }
            sEncodedString = hash.toString();
        }
        catch (UnsupportedEncodingException e) {}
        catch(InvalidKeyException e){}
        catch (NoSuchAlgorithmException e) {}
        return sEncodedString ;
    } 
```

这肯定会帮助你。

谢谢

# javascript - 用于多张幻灯片的带有惰性加载器的 Jquery 褪色图像

> ID：11539141
> 
> 赞同：0
> 
> 时间：2012-07-18T10:18:15.053
> 
> 标签：javascript, jquery, html, loader, lazy-evaluation

过去一年我一直在使用 stackoverflow，并且对设计确实有帮助，这是我第一次真正陷入困境，我真的不知道必须这样做......

我有一个正在构建的网站，它在带有拇指的页面上有 60 个项目，在鼠标悬停时，我希望拇指像快速幻灯片一样更改为 5 个其他 img，使用惰性加载器，因此在鼠标悬停之前不会加载替代 img

我刚刚开始在业余时间学习 Javascript 和 Jquery，不幸的是，这超出了我的能力范围 :(

我有这个[http://jsfiddle.net/razzabazza17/hRErs/](http://jsfiddle.net/razzabazza17/hRErs/)但这只是在滚动时加载我需要的是溢出：隐藏；围绕容器，然后当鼠标悬停在主要 img 上时，它将依次浏览其他 4 个拇指。鼠标悬停时也需要停止此功能。

感谢您提供的任何帮助或建议，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:46:14.763

你试过这个 jQuery 插件吗？ [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload) 听起来就是你所追求的，实现看起来很简单

# stored-procedures - 在vb脚本中调用存储过程

> ID：11539146
> 
> 赞同：0
> 
> 时间：2012-07-18T10:18:38.263
> 
> 标签：stored-procedures, vbscript, ado

我创建了一个存储过程。我在查询分析器中对其进行了测试，例如 EXEC test '10/12/2012'。没关系。但我在 vb 脚本中按照以下方式调用它。不行。

```
InstanceVar = CreateObject("ADODB.Recordset")
InstanceVar.ActiveConnection = ConnVar
InstanceVar.Source = "EXEC Test '" & Date() & "'"
InstanceVar.CursorType = 3
InstanceVar.CursorLocation = 3
InstanceVar.Open() 
```

我有 80040E14 错误。我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:58:12.043

我意识到这有点晚了，但是我在寻找解决同一问题的方法时发现了这个问题。我已经这样解决了：

```
Set cmd = Server.CreateObject("ADODB.Command")
cmd.ActiveConnection = ConnVar
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "Test"
cmd.Parameters.Append(cmd.CreateParameter("@my_date", adVarChar, adParamInput,10))
cmd.Parameters("@my_date") = "10/12/2012"

Set rsResults = Server.CreateObject("ADODB.Recordset")
rsResults.CursorLocation = adUseClient
rsResults.Open cmd,,adOpenForwardOnly,adLockBatchOptimistic 
```

Using意味着您可以使用等`CursorLocation = adUseClient`导航`rsResults`RecordSet 。`MoveNext``MoveFirst`

# python - 使用 Python Ctypes 的访问冲突

> ID：11539149
> 
> 赞同：1
> 
> 时间：2012-07-18T10:18:53.743
> 
> 标签：python, ctypes

我正在尝试使用 Pythons ctypes 模块从 DLL 导入和使用函数，但我不断收到此错误：

> ```
> Windows Error: exception: access violation writing 0x0000002C 
> ```

我在这里查看了关于类似主题的其他问题，但似乎没有一个能够提供有效的答案。我目前的代码如下：

```
from ctypes import *

dll = "./WinlicenseSDK/WinlicenseSDK.dll"

mydll = cdll.LoadLibrary(dll)

name = c_char_p("A.N. Body")
org = c_char_p("ACME")
pcID = c_char_p("APC44567")
zero = c_int(0)
licenseKey = create_string_buffer("")    

mydll.WLGenLicenseFileKey(HASH, name, org, pcID, zero, zero, zero, zero, zero, licenseKey) 
```

背景：我正在研究一款软件的许可技术。上述函数通过散列参数生成许可证密钥。

WLGenLicenseFileKey 的最后一个参数是生成的密钥写入的字符串缓冲区。

我尝试为函数设置 argtypes`mydll.WLGenLicenseFileKey.argtypes = ...`但这不起作用，因为没有字符串缓冲区 ctypes 原始类型，因为没有字符串、整数、浮点数等。

谁能告诉我哪里出错了？

编辑：

C/C++ 函数定义：

```
int WLGenLicenseFileKeyW(    
wchar_t* pLicenseHash,     
wchar_t* pUserName,     
wchar_t* pOrganization,    
wchar_t* pCustomData,     
wchar_t* pMachineID,   
int NumDays,    
int NumExec,    
SYSTEMTIME* pExpirationDate,     
int CountryId,     
int Runtime,     
int GlobalTime,    
char* pBufferOut    
); 
```

这就是文档提供的有关该功能的所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:17:41.123

您的 licenseKey 缓冲区的长度是一个字节，并且您没有传递 Unicode 字符串。我不在我的电脑前，但如果你的参数是正确的，我应该很接近。确保调用函数的 W 版本。只要它们是整数和指针，您也不需要创建确切的类型。

```
buffer = create_string_buffer(REQUIRED_BUFSIZE)
mydll.WLGenLicenseKeyW(u"A.N. Body", u"ACME", u"APC44567", None, None, 0, 0, None, 0, 0, 0, buffer) 
```

如果您确实想使用`argtypes`，那么这就是您想要的：

```
mydll.WLGenLicenseKeyW.argtypes = [c_wchar_t,c_wchar_t,c_wchar_t,c_wchar_t,c_wchar_t,c_int,c_int,c_void_p,c_int,c_int,c_int,c_char_p] 
```

`SYSTEMTIME`如果你想传递 NULL 以外的东西，也需要定义。

**编辑**

我找到了一些[文档](http://www.oreans.com/WinLicenseHelp.pdf)。该函数使用 stdcall 调用约定，因此使用：

```
mydll = WinDLL(dll) 
```

# ruby - Rails 多个 belongs_to 赋值

> ID：11539151
> 
> 赞同：10
> 
> 时间：2012-07-18T10:18:58.970
> 
> 标签：ruby, ruby-on-rails-3, belongs-to

给定

用户：

```
class User < ActiveRecord::Base
   has_many :discussions
   has_many :posts
end 
```

讨论：

```
class Discussion < ActiveRecord::Base
    belongs_to :user
    has_many :posts
end 
```

帖子：

```
class Post < ActiveRecord::Base
    belongs_to :user
    belongs_to :discussion 
end 
```

我目前正在通过初始化控制器中的帖子

```
@post = current_user.posts.build(params[:post]) 
```

我的问题是，如何设置/保存/编辑@post 模型，以便也设置帖子和讨论之间的关系？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T12:36:44.423

## 保存和编辑讨论以及帖子

**现有讨论**

要将您正在构建的帖子与现有讨论相关联，只需将 id 合并到帖子参数中

```
@post = current_user.posts.build(
          params[:post].merge(
            :discussion_id => existing_discussion.id
        ) 
```

您必须在表单中为讨论 ID 隐藏输入，`@post`以便保存关联。

**新讨论**

如果您想与每个帖子一起建立一个**新讨论并通过表单管理其属性，请使用**[`accepts_nested_attributes`](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)

```
class Post < ActiveRecord::Base
  belongs_to :user
  belongs_to :discussion
  accepts_nested_attributes_for :discussion
end 
```

`build_discussion`然后，您必须在构建帖子后在控制器中构建讨论

```
@post.build_discussion 
```

在您的表单中，您可以包含用于讨论的嵌套字段

```
form_for @post do |f|
  f.fields_for :discussion do |df|
    ...etc 
```

这将与帖子一起创建讨论。有关嵌套属性的更多信息，[请观看此出色的 railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)

## 更好的关系

此外，您可以使用[关联](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)`:through`选项来实现更一致的关系设置：[`has_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

```
class User < ActiveRecord::Base
  has_many :posts
  has_many :discussions, :through => :posts, :source => :discussion
end

class Discussion < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :user
  belongs_to :discussion 
end 
```

像这样，用户与讨论的关系只在`Post`模型中维护，而不是在两个地方。

# python - 在 Celery 任务中保存对象后，Django 匹配查询不存在

> ID：11539152
> 
> 赞同：6
> 
> 时间：2012-07-18T10:19:03.260
> 
> 标签：python, mysql, django, celery, django-celery

我有以下代码：

```
@task()
def handle_upload(title, temp_file, user_id):
    .
    .
    .
    photo.save()
    #if i insert here "photo2 = Photo.objects.get(pk=photo.pk)" it works, including the         view function
    return photo.pk

#view function
def upload_status(request):
    task_id = request.POST['task_id']

    async_result = AsyncResult(task_id)
    photo_id = async_result.get()
    if async_result.successful(): 
        photo = Photo.objects.get(pk=photo_id) 
```

我使用 ajax 请求来检查上传的文件，但是在 celery 任务完成后，我得到一个照片匹配查询不存在。照片 pk 确实存在并被返回。如果我手动查询数据库，它可以工作。这是某种数据库滞后吗？我该如何解决？我正在使用 Django 1.4 和 Celery 3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:19:53.230

您可以通过在 django 视图中添加延迟以在任务成功完成几秒钟后等待来确认这是否是延迟问题。如果这解决了问题，您可能希望将 handle_upload 包装在事务中以阻塞，直到数据库完全确认它在返回之前完成。

除了 Django，DB 也有自己的缓存。当 django 调用查询集时，它要么从自己的缓存中获取陈旧数据（除非您正在重用查询集，我在您发布的代码部分中没有看到）或者数据库正在缓存相同 Django 连接的结果。

例如，如果您要在 celery 任务在一个全新的 django 请求/视图中完成后调用后处理，您可能会看到 DB 中的新更改很好。但是，由于您的视图在任务执行时被阻止（这违背了 celery 顺便说一句的目的），因此 django 仅在进入视图时保留数据库的快照。因此，您的 get 失败并且您在简单地进入 django shell 时直接确认了此行为。

您可以通过以下任一方式解决此问题：

*   调用将刷新快照的事务管理
*   更改您的数据库端点缓存和自动提交策略
*   完成处理后，让 celery 回调 django（网络请求）（这可能是您无论如何都想做的，因为阻止 django 会破坏目的）

# git - 如何在提交中阻止虚假用户名和电子邮件

> ID：11539154
> 
> 赞同：2
> 
> 时间：2012-07-18T10:19:04.990
> 
> 标签：git

我想阻止服务器中具有虚假用户名和电子邮件的那些提交。身份验证是通过 ssh 进行的。我目前可以将配置 user.name 和 user.email 更新为我以外的其他内容，并且仍然提交并推送到中央仓库。历史现在显示有关提交者的错误信息。任何想法，我们如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:21:52.893

您需要将 ssh 密钥与电子邮件相关联，并拒绝具有不同电子邮件的提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T21:40:11.877

电子邮件和用户名可以被欺骗。

最好的方法是使用 gpg 密钥对提交进行签名。

[https://phreaknerd.wordpress.com/2012/02/09/signing-git-commits-with-your-gpg-key/](https://phreaknerd.wordpress.com/2012/02/09/signing-git-commits-with-your-gpg-key/)

```
gpg --list-keys  
git config --global user.signingkey 123ABC89  
git commit -S 
```

# spring-security - 为什么 Spring Security 的 RoleVoter 需要前缀？

> ID：11539162
> 
> 赞同：10
> 
> 时间：2012-07-18T10:19:37.847
> 
> 标签：spring-security

在我们的应用程序中，我们计划使用该`RoleVoter`机制，但我们想删除`ROLE_`前缀，因为我们正在实施的安全性更多的是*基于任务*而不是*基于角色*。

从技术上讲，实现没有问题，但我在文档中发现不鼓励[使用`RoleVoter`带有空前缀的](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/vote/RoleVoter.html#setRolePrefix%28java.lang.String%29)。

我想知道为什么？

AFAICS，唯一的问题是，如果没有前缀，`RoleVoter`将参与它不应该参与的决策（例如`IS_AUTHENTICATED_FULLY`, `IS_AUTHENTICATED_REMEMBERED`, ...）并且可能会返回拒绝访问而不是弃权。

您能否确认这是空前缀的唯一问题？

在此先感谢 M。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T19:42:22.177

是的。如果您使用多个选民或自定义选民，那么他们需要某种方式知道他们应该使用哪些属性。例如，如果您有一个`DayOfTheWeekVoter`并且您有一个定义了属性的资源，`ROLE_USER,DAY_MONDAY`则`RoleVoter`可能会投票授予访问权限，因为用户具有“用户”角色，但`DayOfTheWeekVoter`可能会拒绝访问，因为它不是星期一。

如果您没有配置`RoleVoter`前缀，那么它将检查用户是否具有分配给他们的名为“DAY_MONDAY”的权限，因此这种情况将不起作用。

`hasRole('user')`如果您只对角色感兴趣，那么您可以不使用前缀，或者您可以使用不使用 . 的表达式（例如） `RoleVoter`。

# jquery - 如何更改颜色框的边框颜色

> ID：11539164
> 
> 赞同：4
> 
> 时间：2012-07-18T10:19:41.390
> 
> 标签：jquery, css, border, colorbox

嗨，我在整个 Web 应用程序中使用[颜色框。](http://www.jacklmoore.com/colorbox)我想知道是否可以更改颜色框的边框颜色。我浏览了代码，看到有一个属性

```
 #cboxMiddleLeft:background: url("images/controls.png") repeat-y scroll left top transparent; 
```

当我转到颜色框的图像文件夹时，我看到颜色框和属性的左右边框的控件.png 图像

```
 #cboxBottomCenter: background: url("images/border.png") repeat-x scroll 0 -29px transparent; 
```

用于颜色框的顶部和底部边框。两张图片都在`dark grey color`.

现在我想问的是，如果我想改变颜色框的边框，那么我应该把它`color.png and border.png`放在那个特定的颜色中吗？我可以得到所有颜色的这些图像吗？因为很难设计出所有颜色的相同图像。

我的 Web 应用程序的颜色以多种颜色变化，我想显示与这些颜色相关的边框。最好的方法是什么？有没有自动化的方法来做到这一点？我搜索但什么也找不到。

问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T11:06:05.937

把所有的东西都藏起来怎么样

```
$("#cboxTopLeft").hide();
$("#cboxTopRight").hide();
$("#cboxBottomLeft").hide();
$("#cboxBottomRight").hide();
$("#cboxMiddleLeft").hide();
$("#cboxMiddleRight").hide();
$("#cboxTopCenter").hide();
$("#cboxBottomCenter").hide(); 
```

或者只是在插件中指定您不需要边框；接下来添加以下css

```
.blue_border_example {
    border: 10px solid blue;
    border-radius: 10px;
    margin: 10px;
    box-shadow: 0 0 25px blue;
} 
```

然后添加这个类来`#cboxContent`喜欢：

```
$("#cboxContent").addClass("blue_border_example"); 
```

# checkbox - 复选框的 PHP 值

> ID：11539165
> 
> 赞同：1
> 
> 时间：2012-07-18T10:19:45.133
> 
> 标签：checkbox

`$alt`是选择的替代 ID 的值。我从中得到它们 `$_GET['alternative'];`，[alternative] 是复选框的名称。

```
<input type="checkbox" name="alternative['.$row_q['question_id'].']" value="'.$row['alternative_id'].'">'.$row['alternative'].'</input> 
```

所以我通过写来获得价值

```
$alt = $_GET['alternative']; in another page.<br> 
```

问题是：

例如，如果我从问题 1 中选择 A, B, C 并从问题 2 中选择 B , C 然后我会得到`print_r`这样的结果： `Array ( [1] => 40 [2] => 7 )`，你看我`[1] => 40`从问题 #1 中只得到 C，它的问题 id 作为键，这是最后一个来自问题＃1的一个。我没有从问题 nr 1 中得到 A 和 B 只有 C。我的意思是 [1] 是问题 id 并且 =>40 是alternative_id 但是问题 #1 的最后一个选择的替代方案。我从问题 #2 中得到 C `[2] => 7` ，这是问题 #2 中最后选择的问题 ID。

我的目标是这样的：我的问题表中有一个名为 alt_id 的列。我的问题表如下所示： `Q_id`, `question`,`alt_id`

让我们问一下您选择 A、B 和 C 女巫的替代 id 是 10、30、40 现在我想用 implode() 用逗号收集它们并将它们写为 10、30、40 并将它们放在问题 id 行中的列 alt_id 中编号 1

```
Q_id       question                                            alt_id
1          Chose some equation to get 20                       10,30,40
2          What's a synonym of handsome?                       60,7
3          .................................................   89,6,50,30 
```

我想要他们这样

```
ARRAY([1]=>10,30,40  [2]=>60,7  [3]=>89,6,50,30) 
```

然后我想像这样更新问题表（当然`alt_id`从一开始就是NULL）

```
 foreach($alt AS $key=>$alternativ){
    $query = 'UPDATE question SET alt_id = '.alternative.'  WHERE q_id  = '.$key.' ';
    $result = mysql_query($query);  
    } 
```

所以我的问题是我怎样才能让他们像这样`ARRAY([1]=>10,30,40 [2]=>60,7 [3]=>89,6,50,30 and so on….`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:25:20.473

在您的 HTML 代码中，您需要将每个复选框命名为好像它是 PHP 数组的附加成员一样，如下所示：

```
<input type="checkbox" name="alternative[]" value="10" />A <br />
<input type="checkbox" name="alternative[]" value="20" />B <br />
<input type="checkbox" name="alternative[]" value="30" />C <br /> 
```

然后，在 PHP 中：

```
$alternatives = implode(' ',$_GET['alternative']); 
```

**编辑：**您可能想要做一个数组数组：

```
<input type="checkbox" name="alternativeA[][]" value="10" />A1 <br />
<input type="checkbox" name="alternativeA[][]" value="20" />B1 <br />
<input type="checkbox" name="alternativeA[][]" value="30" />C1 <br />

<input type="checkbox" name="alternativeB[][]" value="40" />A2 <br />
<input type="checkbox" name="alternativeB[][]" value="50" />B2 <br />
<input type="checkbox" name="alternativeB[][]" value="60" />C2 <br />

<input type="checkbox" name="alternativeC[][]" value="70" />A3 <br />
<input type="checkbox" name="alternativeC[][]" value="80" />B3 <br />
<input type="checkbox" name="alternativeC[][]" value="90" />C3 <br /> 
```

# asp.net - 如何从水晶报表项目引用到主项目

> ID：11539168
> 
> 赞同：1
> 
> 时间：2012-07-18T10:20:14.103
> 
> 标签：asp.net, c#-4.0, crystal-reports, crystal-reports-2010

在我的项目中，我们使用了许多水晶报告文件（rpt），当我们编译我的应用程序时显示错误，如**无磁盘空间错误**，所以现在我想将水晶报告分成单独的项目。

**我如何将其作为单独的项目执行**，何时可以在主项目中进行参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:29:53.750

[虽然我没有从我的任何项目中分离出我的 Crystal Reports，但根据这个 SO线程](https://stackoverflow.com/questions/884445/multi-targeting-in-vs2008-with-crystal-reports "线")，它似乎是可行的。

为此，您将创建一个新的解决方案。然后为 CR 报告创建一个项目，并添加包含您的业务逻辑的现有项目。然后，您可以在业务逻辑项目中引用您的报告项目。

hmk - 请让我知道这是否可行，因为我可能不得不在不久的将来自己这样做！

# javascript - 带有动作的 jQuery 通知

> ID：11539171
> 
> 赞同：-2
> 
> 时间：2012-07-18T10:20:20.920
> 
> 标签：javascript, jquery, notifications

我正在使用 jQuery 插件来显示通知。

所以我可以使用这样的东西

```
show_notification("Successfully Saved your data","success"); 
```

我们可以将`html`内容用作`message`.

现在我想执行一些操作

前任。

```
show_notification("Do you want to save your data","success"); 
```

所以这是给用户的一个问题，用户需要通过单击`yes`或`no`[两者都将作为 html 消息传递]来回复

我需要做的是当用户单击是/否时，我需要执行一些操作。

我可以使用`id` or`class`来附加一个点击事件，但是我有很多类型的动作，并且需要使用非常不同的`id`or `class`。

我可以使用回调函数或类似的东西吗？

请帮助我或给我您宝贵的建议。

谢谢你。

**注意：我知道当前插件不可能并且不谈论它的功能，我只是想修改插件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:50:06.867

如果无法向您的插件发送回调，则必须手动将“是/否”按钮添加到您的消息中，并通过实时代表或在显示通知后分配侦听器来定位它们。

```
$(function() {

    $('body').on('click', '.notification-yes', function() {
       // yes-callback
    });

    $('body').on('click', '.notification-no', function() {
       // no-callback
    });

});

show_notification('Do you want to proceed? <button class="notification-yes">Yes</button> <button class="notification-no">No</button>', 'success'); 
```

如果你使用的是[这个插件](http://demos.9lessons.info/jnotification/index.php)，你会希望你的听众调用`closeNotification()`. 我意识到语法并不完全相同，但这可能是一个版本问题。如果我们知道您正在使用的插件的详细信息，则可以更轻松地帮助您了解具体情况。

您还需要一种方法来了解单击按钮时显示的通知。您当然可以为不同的通知设置唯一的按钮类名称。如果在任何给定时间总是只显示一个通知，另一种方法是为感兴趣的回调设置一个小的状态对象。例如：

```
var myNotifications = {
    onYes: function() { },
    onNo: function() { }
};

$(function() {
    $('body').on('click', '.notification-yes', function() {
       myNotifications.onYes();
       closeNotification();
    });

    $('body').on('click', '.notification-no', function() {
       myNotifications.onNo();
       closeNotification();
    });
});

function showCertainNotification() {
    myNotifications.onYes = function() {
        // specific callback for this notification.
    };

    show_notification('Confirm? <button class="notification-yes">Yes</button> <button class="notification-no">No</button>', 'success');
} 
```

如果在任何时候都可能显示多个通知，那么像这样的简单变量将无法做到。在这种情况下，您必须将您的消息包装在一个容器中，您可以从您的侦听器中提取其 ID，并基于此调用特定的回调，或将其作为参数传递。我不会在这里详细介绍，因为 的简单性质`show_notification`意味着 的同样简单的方式`close_notification`。由于似乎找不到任何 ID，因此我假设不支持多个活动通知。

一个更吸引人的解决方案可能是修改插件本身，而不是解决它，以便您可以将回调函数直接传递给插件。像这样的东西：

```
show_notification({
    message: 'Confirm',
    type: 'success',
    buttons: [
        { caption: 'Yes', click: function() { } },
        { caption: 'No',  click: function() { } }
    ]
}); 
```

但是，当然，这几乎不可能帮助您，除非您首先有机会查看您当前使用的插件的外观。

# java - 在 Linux 中获取用户进程的执行时间

> ID：11539172
> 
> 赞同：1
> 
> 时间：2012-07-18T10:20:23.433
> 
> 标签：java, linux

如何获取 Linux 中进程的详细信息。我想要一个进程的总执行时间，内存映射。在这种情况下，该过程将是一个简单的 Java 程序。我只知道文件名，不知道进程ID。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:52:10.467

如果该进程尚未运行，`time`则将打印总执行时间。该名称既有 bash 内置命令，也有独立命令，但行为有所不同。但是，正如您提到的内存映射表明一个已经在运行的进程，我将专注于这一点。

您可以使用`ps -C java`. 如果您想知道该 java 二进制文件正在运行什么，您可以执行以下操作来查找 pid：

```
ps -C java -o pid,time,cmd | awk '/foo\.jar/{print $1,$2}' | \
while read pid time; do
    echo "PID $pid, TIME $time"
    cat /proc/$pid/maps
    echo ""
done 
```

如果您不喜欢输出格式，请将循环替换为其他内容。

这是这样做的：

*   **`-C java`:**查找java进程
*   **`-o pid,time,cmd`:**打印这些字段
*   **`/foo\.jar/`:**只取包含该正则表达式的行
*   **`print $1,$2`:**打印 pid 和 time 列
*   **`/proc/$pid/maps`:**访问包含内存映射的 proc 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:53:22.070

我打算使用一些内存分析工具，例如 valgrid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:29:05.103

如果您只知道程序名称而不知道进程 ID，则首先必须找出哪些进程（它们可以是许多进程）正在运行该程序。

假设程序名称为：您可以使用例如以下一些命令来找出答案`progname`：

```
ps auxw | grep progname
pidof progname
pgrep progname 
```

（请注意，如果您使用 JVM 来运行一些 Java 程序，那么`progname`总是`java`没有多大帮助）

您也可以使用`top`或`htop`

一旦你得到一个有趣的 pid，例如 1234，你就可以得到更多关于该进程的信息，例如：

```
ps -lw 1234
cat /proc/1234/status
cat /proc/1234/stat
cat /proc/1234/stack
cat /proc/1234/maps
cat /proc/1234/smaps 
```

还要查看`/proc/1234/`诸如此类的其他文件和目录`/proc/1234/fd/`。

Linux 内核通过传递有关进程的信息，[`/proc`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)因此您应该了解更多有关它的信息。

# symfony-1.4 - Symfony 1.4 - 如何从另一个 yml 配置文件中获取 yml 配置文件参数

> ID：11539173
> 
> 赞同：0
> 
> 时间：2012-07-18T10:20:28.877
> 
> 标签：symfony-1.4, yaml

我需要在 Symfony 1.4 中使用一个 yml 配置文件参数到另一个 yml 配置文件中，我不知道该怎么做。

在 app.yml 中，我定义了“ldap ip”或“ldap 域”等参数，这些参数也用于 LDAPauth.yml。出于这个原因，我想统一它：

**应用程序.yml：**

```
 all:
      ldap:
        ip: XXX.XXX.XXX.XXX
        domain: ou=XXXXXX, ou=...... 
```

**LDAPAuth.yml：**

```
 adLDAP: 
        base_dn: ou=XXXXXX, ou=......
        domain_controllers:
          - XXX.XXX.XXX.XXX 
```

我在 LDAPAut.yml 中尝试过这个，但不起作用：

**LDAPAuth.yml：**

```
 adLDAP: 
        base_dn: %APP_LDAP_IP%
        domain_controllers:
          - %APP_LDAP_DOMAIN% 
```

如果有人知道如何使它起作用，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:27:52.470

You can execute PHP code inside a yml (yep crazy but so useful sometimes).

In your case, since data inside `app.yml` file are accessible using `sfConfig::get`, you can do:

```
adLDAP: 
    base_dn: <?php echo sfConfig::get('app_ldap_domain')."\n"; ?>
    domain_controllers:
      - <?php echo sfConfig::get('app_ldap_ip')."\n"; ?> 
```

The `"\n"` at the end is to write a line return to no break the yml syntax.

# java - 如何在 Java 中实现 serializableBufferedWriter？

> ID：11539178
> 
> 赞同：4
> 
> 时间：2012-07-18T10:20:40.070
> 
> 标签：java, serializable

我正在尝试扩展`java.io.BufferedWriter`，所以让它`Serializable`。我尝试简单地扩展`BufferedWriter`和实现`Serializable`接口。它有两个构造函数，所以代码看起来像这样。

```
class SerializableBufferedWriter extends BufferedWriter implements Serializable{
/**
 * 
 */
private static final long serialVersionUID = 1625952307886764541L;

public SerializableBufferedWriter(OutputStreamWriter osw, int size){
    super(osw, size);

}
public SerializableBufferedWriter(OutputStreamWriter osw){
    super(osw);

}

} 
```

但是我在运行时得到一个无效的构造函数异常。在我在这里阅读之后，对于一个要实现的类`Serializable`，它的第一个不可序列化的超类需要有一个无参数的构造函数。那么如何在中间添加一个类，其中包含一个无参数的构造函数，该构造函数扩展`BufferedWriter`并被扩展`SerializableBufferWriter`？

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:33:48.253

您可以做的是存储文件的名称或将数据发送到的 URL。当您的应用程序重新加载此信息时，它会重新创建编写器。

* * *

您遇到的问题不仅是类，而且您想要保留的所有字段也是可序列化的。大多数流不是可序列化的，因此您需要对这些流进行自定义序列化。

> 那么如何在两者之间添加一个类，其中包含一个扩展的无参数构造函数

添加一个不带参数的构造函数。您需要使用构造函数的参数调用 super ，这是困难的部分。

你遇到的最大问题是你试图序列化一些不是设计为序列化的东西。

# c - .s文件可以直接执行吗？

> ID：11539179
> 
> 赞同：1
> 
> 时间：2012-07-18T10:20:41.730
> 
> 标签：c, linux, assembly, x86-64

我正在寻找为什么我不能`.s`直接使用文件的解释。

我正在尝试在 X86_64 上学习汇编语言，这给了我汇编代码：

```
gcc -S sample.c 
```

为什么我不能直接使用运行它`nasm`？

我重命名并`sample.s`尝试`sample.asm`这样做：

```
 nasm -f elf -l sample.lst  sample.asm 
```

但这给了我一个错误（如果需要，将发布）。我认为中间文件是汇编代码。请说清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:26:47.900

The problem if probably that the assembly from GCC and the one used by nasm is not using the same syntax!

GCC uses so-called AT&T syntax while nasm uses the standard Intel syntax. See e.g. [http://en.wikipedia.org/wiki/X86_assembly_language#Syntax](http://en.wikipedia.org/wiki/X86_assembly_language#Syntax) for a little information about the differences.

# android - Android 在运行时更改列表视图主题

> ID：11539181
> 
> 赞同：0
> 
> 时间：2012-07-18T10:20:46.520
> 
> 标签：android, listview, styles

如果可能的话，谁能给我一些想法或代码，例如如何通过在运行时单击按钮来更改 Listview 的主题（如背景颜色、文本颜色、图标等）？

我在这里看到了一个示例[android 在运行时动态更改样式](https://stackoverflow.com/questions/3241729/android-dynamically-change-style-at-runtime)。

我想知道列表视图是否有类似的可能？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:02:02.647

要更改背景颜色，您可以动态设置它。

`mListView.setBackgroundColor(mColor); //`[文档](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)

要更改您的设计`listView`，您必须设置一些变量，然后在您的自定义中使用它们`adapter`。单击时，您更改这些变量并调用该`notifyDataSetChanged()`方法。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:49:45.393

如果我正确理解您的问题，您希望动态自定义行（单独或全部）的外观。如果是这样，使用自定义适配器并覆盖 getView(...) 函数可能对您有用。

可在[http://www.mkyong.com/android/android-listview-example/获得快速解释](http://www.mkyong.com/android/android-listview-example/)

希望这可以帮助。

# python - 如何循环通过生成器

> ID：11539194
> 
> 赞同：95
> 
> 时间：2012-07-18T10:21:46.873
> 
> 标签：python, generator

一个如何循环通过一个生成器？我是这样想的：

```
gen = function_that_returns_a_generator(param1, param2)
if gen: # in case the generator is null
    while True:
        try:
            print gen.next()
        except StopIteration:
            break 
```

有没有更蟒蛇的方式？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-07-18T10:24:11.170

简单地

```
for x in gen:
    # whatever 
```

会成功的。请注意，`if gen`总是返回`True`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-18T10:23:46.660

```
for item in function_that_returns_a_generator(param1, param2):
    print item 
```

您无需担心测试以查看您的函数是否返回任何内容，就好像没有返回任何内容一样，您将不会进入循环。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-24T10:25:47.930

如果您不需要生成器的输出，因为您只关心它的副作用，您可以使用以下单行：

```
for _ in gen: pass 
```

#### 跟进

根据 aiven 的评论，我进行了一些性能测试，虽然它看起来`list(gen)`比 略快`for _ in gen: pass`，但它`tuple(gen)`甚至更快，所以我的最终建议是使用，以防你只关心副作用

```
tuple(gen) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-01T21:27:35.950

您可以简单地循环遍历它：

```
>>> gen = (i for i in range(1, 4))
>>> for i in gen: print i
1
2
3 
```

但请注意，您只能循环一次。下次生成器将为空：

```
>>> for i in gen: print i
>>> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-06-06T17:38:24.987

其他答案适用于复杂的场景。如果您只是想将项目流式传输到列表中：

`x = list(generator)`

对于简单的预处理，使用列表推导：

```
x = [tup[0] for tup in generator] 
```

如果只想执行生成器而不保存结果，可以跳过变量赋值：

```
# no var assignment b/c we don't need what print() returns
[print(_) for _ in gen] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-18T10:24:12.617

只需像对待任何其他可迭代对象一样对待它：

```
for val in function_that_returns_a_generator(p1, p2):
    print val 
```

请注意，`if gen:`它将始终为 True，因此这是一个错误的测试

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-16T06:53:24.990

如果您想手动移动生成器（即手动处理每个循环），那么您可以执行以下操作：

```
 from pdb import set_trace

    for x in gen:
        set_trace()
        #do whatever you want with x at the command prompt
        #use pdb commands to step through each loop of the generator e.g., >>c #continue 
```

# php - jQuery 提交动态创建元素的元数据的最佳方式是什么？

> ID：11539201
> 
> 赞同：0
> 
> 时间：2012-07-18T10:22:15.733
> 
> 标签：php, jquery, html, forms

基本上我正在使用jQuery创建一些矩形并将它们添加到DOM中，例如

```
var divElement = jQuery('<div/>').attr({
'class': 'ui-widget-content resizable'
}); 
```

然后我允许用户填写所选矩形的输入字段，例如名称、宽度、高度。此数据当前正在通过 .data 方法添加到每个元素。

一旦用户创建了所有元素及其相关元数据，我希望他们提交页面，以便我可以在 PHP 中执行一些服务器端脚本。

只是想知道提交这些数据的最佳方式是什么——据我所知，我可以动态创建表单元素或使用 jQuery.post 方法。

请任何人就最佳方法（可能完全不同）以及如何设置它的任何提示提出建议，例如在每个元素的名称中使用 [] 括号来创建数组等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:25:48.680

一个好方法是构造一个对象或数组，并用您希望保存的所有数据填充它。然后使用 $.post() 将其发送到您的服务器进行存储。

```
var data = new Array;
data['height'] = 100;
data['width'] = 200;
$.post('save.php', data, function(result){
    // test if successful and carry on
}); 
```

来源：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# php - jQuery UI 链式选择菜单。单击按钮时表单重置

> ID：11539202
> 
> 赞同：1
> 
> 时间：2012-07-18T10:22:18.550
> 
> 标签：php, javascript, jquery, jquery-ui, select-menu

我正在使用链式选择菜单来引导访问者解决一些问题。这就像一个魅力，然而，最终用户必须单击一个按钮才能将所有值发送到 PHP 脚本。这也没有问题，但是，当页面重新加载时（因为按钮将表单发送到同一页面），所有字段都被再次隐藏，这不是我想要的。

我希望在页面重新加载时“选择”其中的项目时显示链接的选择菜单。使用 PHP，我只需测试是否选择了一个字段并将该状态添加到选择菜单中。但它们会一直隐藏，直到您再次手动选择所有内容。

我认为这只是 JS 部分的一个小调整。但是我对 JS 的有限知识让我没有解决办法。

**来源**

*   [jsFiddle](http://jsfiddle.net/XkCsU/)
*   [链式选择脚本](https://github.com/fnagel/jquery-ui/blob/selectmenu/demos/selectmenu/dependency.html)
*   [jQuery UI 和选择菜单](https://github.com/fnagel/jquery-ui)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:49:39.330

由于表单提交给自己，用户选择的值将在`$_GET`or中可用`$_POST`（取决于`action`您的表单是`get`or `post`）。

最好的方法是使用这些值`selected`在适当的节点上设置属性，`<option>`就像这样。

```
$selectedC1Value = '';
<? if isset($_POST['c1']) { ?>
    $selectedC1Value = $_POST['c1'];
<? } ?>

<select name="c1" id="c1" >
    <option value="" <? if ($selectedC1Value == '') { echo 'selected'; } ?>>
        --
    </option>
    <option value="age" <? if ($selectedC1Value == '') { echo 'selected'; } ?>>
        Age
    </option>
    <option value="education" <? if ($selectedC1Value == '') { echo 'selected'; } ?>>
        Education
    </option>
    <!-- etc -->
</select> 
```

这必须为`<select>`您的`<form>`.

# list - 如何在 Prolog 中附加列表？

> ID：11539203
> 
> 赞同：27
> 
> 时间：2012-07-18T10:22:31.927
> 
> 标签：list, prolog, append, concatenation

如何在 Prolog 中附加列表？我在互联网上搜索过，我发现了这个（来自[http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/2_7.html](http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/2_7.html)）

```
append([X|Y],Z,[X|W]) :- append(Y,Z,W).  
append([],X,X). 
```

所以它`Z`通过删除 in 的元素来`[X|Y]`获得`[X|W]`。但是如何将两个列表附加在一起？

例子，

```
appendlist([1,2],[3,4,5],X). 
```

结果将是`X = [1,2,3,4,5]`。

我也不知道递归中发生了什么。（我追踪了但不明白）

**编辑：**我想知道的是它应该如何编码以像`append()`Prolog 中预定义的那样运行。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-18T21:59:07.420

您发布的代码（几乎）没问题。子句的顺序只需要交换（为了使这个谓词定义有效，当以生成方式使用时）：

```
append( [], X, X).                                   % (* your 2nd line *)
append( [X | Y], Z, [X | W]) :- append( Y, Z, W).    % (* your first line *) 
```

`A`这定义了三个参数之间的关系，比如说`B`和`C`。

你的第一行说，*“`C`是附加的结果，`A`如果`B`和`A`是非`C`空列表，它们都有相同的**头部**（即第一个元素），**尾部**是`C`附加`A`相同第二个参数的尾部的结果，`B`”*。

```
 a        a
  ----------
  b        b
  c        c
  .    d   d
       e   e
       .   . 
```

或者从左到右：

```
 a | b c .
           |     d e .
         a | b c d e .

append(         [], 
                 Z,
                 Z ).       
append( [X | Y   ],
                 Z,
        [X |         W ] ) :- append(
             Y,  Z,  W). 
```

想一想，这完全有道理。它所做的是，我们想要定义这种`append/3`关系，并且我们知道我们想要它是什么，所以我们只是写下一些我们希望它实现的明显事实，如果你愿意的话，它必须遵循的法律。

所以假设我们已经为我们定义了这个代码，它必须遵循什么法律？显然，将某个列表的尾部附加到另一个列表会给我们一个将完整列表附加到第二个列表的结果的尾部。

这定义了我们如何“滑动”第一个列表。但是，如果没有更多的地方可以滑动怎么办？如果我们已经到达该列表的末尾怎么办？然后我们到达了空列表，将一个空列表附加到另一个列表中，我们得到了该列表作为结果。明显地。这就是您的代码中的第二行告诉我们的内容，它说， “将一个***空列表****与另一个列表附加会产生该列表作为结果”***。**

 **令人惊讶的是，写下这两个`append/3`必须遵循的定律，就与写下定义本身是一样的。

*补充：*这从声明的角度解释它；请查看[m09 的答案，该答案](https://stackoverflow.com/a/10620282/849891)从操作的角度来看更多。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T10:24:47.690

> ***但是如何将两个列表附加在一起？***

您回答了自己的问题：您使用`append/3`.

如果你想追加`X`和`Y`存储结果`Z`，你做

```
append(X, Y, Z) 
```

例如`X = [1, 2]`，如果`Y = [3, 4, 5]`然后`Z`将绑定到`[1, 2, 3, 4, 5]`：

```
| ?- append([1,2],[3,4,5], X).

X = [1,2,3,4,5]

yes
| ?- 
```**

# configuration - Azure 角色配置管理

> ID：11539204
> 
> 赞同：5
> 
> 时间：2012-07-18T10:22:38.580
> 
> 标签：configuration, azure, web-config, app-config

当您别无选择只能在 web.config（或 app.config）中保存配置设置时，我看不出 Windows Azure 如何让您改变应用程序的配置。

例如...

很多时候，项目会使用大量使用 web.config 的 3rd 方库。web.config 的使用可能涉及连接字符串、应用程序设置或自定义配置部分。一个很好的例子是 ELMAH。ELMAH 的 web.config 文件可能如下所示：

```
<configuration>

  <configSections>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
    </sectionGroup>
  </configSections>

  <connectionStrings>
    <add
      name="MyElmahDatabase"
      providerName="System.Data.SqlClient"
      connectionString="Server=tcp:myServer.database.windows.net,1433;Database=myDB;User ID=user@myServer;Password=password;Trusted_Connection=False;Encrypt=True;Connection Timeout=30" />
  </connectionStrings>

  <elmah>
    <security allowRemoteAccess="1" />
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="MyElmahDatabase" />
  </elmah>

</configuration> 
```

这里有几个问题：

*   我无法更新或更改是否在服务配置之间启用了远程访问。

*   我无法更新或更改服务配置之间的 ELMAH 连接字符串。

这是因为 web.config 按原样打包到 .cspkg 文件中，并且 ELMAH 不会查看服务配置设置（这是我可以在服务配置之间更改配置设置的唯一方法）。

我可以想到许多其他有问题的例子......

*   任何直接查看连接字符串部分的数据访问框架。
*   我需要创建的任何自定义配置设置。

...仅举两个。

我是否遗漏了什么，或者这是 Windows Azure 提供的配置管理中的一个重大差距？

# 编辑

从下面的答案和评论来看，这似乎没有得到很好的支持。我认为管理多个解决方案构建配置以支持不同的配置文件是一个非常薄弱的​​解决方案。我不应该为我需要的每个配置文件重新构建解决方案（可能会有很多）。编译不等于配置。

我想知道是否有办法修改 .cspkg 文件，因为它只是一个 zip 文件。根据[此](http://msdn.microsoft.com/en-us/library/windowsazure/jj151532)文档，您可以在 Linux 上。

我查看了 .cspkg 文件中的清单，它看起来像这样：

```
<PackageManifest version="2">
  <Encryption keytype="1" />
  <Contents hashtype="1">
    <Item name="MyApp.Web.UI_<GUID>.cssx" hash="AED69299C5F89E060876BC16BD3D6DE5130F6E62FFD2B752BAF293435339B7E2" uri="/MyApp.Web.UI_<GUID>.cssx" />
    <Item name="MyApp.Web.Services_<GUID>.cssx" hash="7AC81AFF642E4345173C8470C32A41118A4E3CFD4185B82D0ADA44B71057192D" uri="/MyApp.Web.Services_<GUID>.cssx" />
    <Item name="SMPackage_<GUID>.csmx" hash="B5E6B83B62AF64C7C11CAC1A394ABBF15D7DB7667A773C5284CE5BE95C5834E9" uri="/SMPackage_<GUID>.csmx" />
    <Item name="SDPackage_<GUID>.csdx" hash="F34B7C02A551D82BAD96881E2DA9447D0014D49B47CCB3840475BDC575234A7D" uri="/SDPackage_<GUID>.csdx" />
    <Item name="NamedStreamPackage_<GUID>.csnsx" hash="FA2B5829FF5D9B2D69DCDDB0E5BDEE6B8B0BC09FFBF37DAEEE41CF3F3F4D0132" uri="/NamedStreamPackage_<GUID>.csnsx" />
  </Contents>
  <NamedStreams>
    <Stream name="RequiredFeatures/MyApp.Web.Services/1.0" />
    <Stream name="RequiredFeatures/MyApp.Web.UI/1.0" />
    <Stream name="SupportData/MyApp.Web.Services/1.0" />
    <Stream name="SupportData/MyApp.Web.UI/1.0" />
  </NamedStreams>
</PackageManifest> 
```

不幸的是，如果我重新计算未更改的“MyApp.Web.UI_.cssx”文件的哈希值，我的哈希值与清单中的哈希值不同。

来自清单的哈希：AED69299C5F89E060876BC16BD3D6DE5130F6E62FFD2B752BAF293435339B7E2

我计算的哈希值：E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855

请注意，我还没有更改文件，所以哈希应该是相同的。

这表明我计算错误。我的方法如下：

```
class Program
{
    static void Main(string[] args)
    {
        using (FileStream fs = new FileStream(args[0], FileMode.Open))
        {
            ComputeHash(new SHA256Managed(), fs);
        }
    }

    private static void ComputeHash(HashAlgorithm hashAlgorithm, Stream stream)
    {
        byte[] hash = hashAlgorithm.ComputeHash(stream);
        string hashString = BitConverter.ToString(hash);
        Console.WriteLine(hashString.Replace("-", string.Empty));
        Console.WriteLine();
    }
} 
```

上面的文档链接表明重新计算哈希很简单（无论如何在 Linux 上）。

有谁知道如何重新计算哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:32:06.077

Passing a `Stream` to `ComputeHash()` ends up with a different hash as compared to using the `byte[]` overload. I don't know why.

Try something like:

```
private static void ComputeHash(HashAlgorithm hashAlgorithm, Stream stream)
{
    BinaryReader reader = new BinaryReader(stream)
    byte[] hash = hashAlgorithm.ComputeHash( reader.ReadBytes( (int)stream.length ) );
    string hashString = BitConverter.ToString(hash);
    Console.WriteLine(hashString.Replace("-", string.Empty));
    Console.WriteLine();
} 
```

This will give you the hash you're after.

As you've probably already discovered, on linux you can get the digest with

```
openssl dgst -sha256 /path/to/file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:11:30.370

如果您的 web.config 中有您想要更改的项目，具体取决于它的构建方式，您可以使用 Azure 之外的解决方案。您可以使用[Web.config 转换](http://msdn.microsoft.com/en-us/library/dd465318.aspx)。这些转换与您的构建配置而不是您的服务配置相关联，但您的服务配置可能与您的构建配置密切相关（...Local.csfg -> Debug，...Cloud.csfg -> Release）。如果默认构建配置不适合您，只需创建您需要的构建配置。

如果您想为每个服务配置使用不同的服务定义，那么 UI 不支持它，但您可以[弄乱构建过程以使其工作](https://stackoverflow.com/a/10440196/17089)

# javascript - TinyMCE 剥离跨度

> ID：11539210
> 
> 赞同：2
> 
> 时间：2012-07-18T10:23:09.867
> 
> 标签：javascript, tinymce

TinyMCE 使用以下配置剥离跨度：

```
tinyMCE.init({
    mode : "specific_textareas",
    theme_advanced_resizing_min_width : 550,
    editor_selector : /(tiny_mce|image_mce)/,
    theme : "advanced",
    editor_deselector : "mceNoEditor",
    body_class : "cms",
    content_css : "/css/content.css",
    plugins : "safari, inlinepopups, paste, table",
    file_browser_callback : "tinyBrowser",
    width : 640,
    height : 500,
    paste_auto_cleanup_on_paste : true,
    theme_advanced_buttons1 : "bold, italic, underline, justifyleft,justifycenter, justifyright, justifyfull , formatselect, |, pasteword ,pastetext, code ",
    theme_advanced_buttons2 : "undo,redo,|,bullist, numlist,| , outdent,indent, |, link, unlink, image, forecolor",
    theme_advanced_buttons3 : "tablecontrols",
    theme_advanced_resizing : true,
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "center",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_blockformats : "p,h2,h4",
    convert_urls : false,
    verify_html : true,
    valid_elements : "@[class|style|title],br,h2,h3,h4,-p[align],-strong/b,a[name|href|target]," + 
    "img[src|border=0|alt|width|height|align],hr[width|size|noshade],-em/i,-span" + 
    "table[border|cellspacing|cellpadding|width],tr[rowspan],td[colspan],th[colspan],-ul,-ol,-li" 

}); 
```

有问题的跨度是使用“前色”按钮创建的，看起来像这样`<span style="color: rgb(0, 255, 0); ">foo</span>`。

任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:19:59.637

我创建了一个 tinymce fiddle 来演示这个问题 - 它就在那里。我稍微调整了valid_elements。现在可以了。在此处查看 tinymce 小提琴：http: [//fiddle.tinymce.com/RNbaab/10](http://fiddle.tinymce.com/RNbaab/10)

# java - 从java打印文档时是否可以弹出打印对话框？

> ID：11539214
> 
> 赞同：0
> 
> 时间：2012-07-18T10:23:23.843
> 
> 标签：java, printing, ms-word

我必须从java打印一个word文档。我可以打开它并打印它。但是下面的代码会自动打印它。有没有办法弹出打印对话框来选择打印机？如果用户不想打印它，他应该可以取消它。我还需要在打印后关闭单词。请帮我。

```
public static void main(String args[]) throws IOException {
   Desktop desktop = Desktop.getDesktop();
   File f = new File("C:\\Users\\asa\\Desktop\\resume.doc");
   desktop.open(f);
   Thread.sleep(5000);          
   desktop.print(f);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:30:21.343

你试过使用`Desktop#print(File file)`方法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:28:33.490

试试 Java 打印服务 API。

教程在这里： [http ://docs.oracle.com/javase/tutorial/2d/printing/services.html](http://docs.oracle.com/javase/tutorial/2d/printing/services.html)

# asp.net-mvc - 在 asp.net MVC 应用程序的 web.config 中指定角色

> ID：11539217
> 
> 赞同：19
> 
> 时间：2012-07-18T10:23:30.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config, roleprovider

我正在使用表单身份验证创建一个 MVC 应用程序。我正在针对活动目录进行身份验证，因此创建了一个自定义 RoleProvider。我的应用程序只关心一小组角色，到目前为止，我一直在我的 web.config 的 appSettings 部分定义这些角色：

```
<appSettings>
  <add key="DirectorRole" value="Domain\Directors" />
  <add key="ManagementRole" value="Domain\Managers" />
  ...
</appSettings> 
```

但是，我在使用这种方法时遇到了一些问题：

1.  我无法在我的控制器数据注释中引用这些设置：`[Authorize(Roles = ConfigurationManager.AppSettings["DirectorRole"])]`因为它不会编译，所以我必须再次指定组的名称：`[Authorize(Roles = "Domain\\Directors")]`。
2.  在我的 web.config 中，我想为我的角色提供者指定 groupsToUse 并且只引用一个预先存在的列表，而不是维护同一组角色的两个单独的列表。

似乎必须有一种更好/可重用的方式来定义 web.config 中的角色，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T11:35:58.777

我更喜欢使用自定义授权属性。像这个。

```
public class MyAuthorizeAttribute : AuthorizeAttribute {

    public MyAuthorizeAttribute(params string[] roleKeys) {
        List<string> roles = new List<string>(roleKeys.Length);

        //foreach(var roleKey in roleKeys) {
            //roles.Add(ConfigurationManager.AppSettings["DirectorRole"]);
        //}
        var allRoles = (NameValueCollection)ConfigurationManager.GetSection("roles");
        foreach(var roleKey in roleKeys) {
            roles.Add(allRoles[roleKey]);
        }

        this.Roles = string.Join(",", roles);
    }
} 
```

在您的控制器中，使用：

```
[MyAuthorize("DirectorRole")] 
```

在你的 web.config

```
 <configSections>
    <section
      name="roles"
      type="System.Configuration.NameValueFileSectionHandler,System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <roles>
    <add key="DirectorRole" value="Domain\Directors" />
    <add key="ManagementRole" value="Domain\Managers" />
  </roles> 
```

我希望这能很好地解决您的第一个问题。一点点也可以解决第二个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:56:55.877

请看一下这个优秀的例子，其中作者谈到了您面临的问题。

[http://www.ryanmwright.com/2010/04/25/dynamic-controlleraction-authorization-in-asp-net-mvc/](http://www.ryanmwright.com/2010/04/25/dynamic-controlleraction-authorization-in-asp-net-mvc/)

# javascript - jQuery - 在 DIV / 或可排序元素内拖动元素

> ID：11539224
> 
> 赞同：0
> 
> 时间：2012-07-18T10:23:52.387
> 
> 标签：javascript, jquery, css

我在将 div 拖动到另一个 div 元素中时遇到问题。

HTML 看起来像这样：

```
<div id="grid">
    <div id="el1" style="width:300px"></div>
    <div id="el2" style="width:100px"></div>
    <div id="el3" style="width:100px"></div>
    <div id="el4" style="width:100px"></div>
</div> 
```

所有元素都是可拖动的并且具有 css 样式`float:left;position:relative;`。当我拖动`el1`到它的位置时`el3`它会起作用，但它当然会与元素重叠`el3`。draggin`jquery draggable`工作正常，但我想`el1`在这个位置的 HTML 代码中插入带有 id 的 div。

它看起来像这样：

```
<div id...>
    <div id="el2...
    <div id="el3...
    <div id="el1...
    <div id="el4...
</div> 
```

我现在的问题是，这是一个网格。`el1`宽度为“300”，其他宽度为“100”。拖到应该交换的地方，拖到的`el1`地方，拖到的地方。`el3``el2``el3``el4``el1``el1``el2, el3, el4`

为了获得这种行为，我认为我需要`div`在`el4`. 但是如何确定哪个元素是最近的呢？

**- - - - 更新 - - - -**

**我尝试使用可排序的...见这里[http://jsfiddle.net/vwK5e/2/](http://jsfiddle.net/vwK5e/2/) 但是如果你把红框放在数字 3 上，红框将在第二行（正确）但数字 4 应该紧挨着空间的第三个原因。**

TIA frgtv10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:52:03.323

参考[http://jqueryui.com/demos/sortable/#display-grid](http://jqueryui.com/demos/sortable/#display-grid)

我猜你想要这样的功能。

回答

[另一种可排序的 jquery](https://stackoverflow.com/questions/5500302/a-different-kind-of-jquery-sortable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:48:26.780

我的解决方案如下所示：

`draggable`我现在使用的不是 jQuerys `sortable`（链接到[sortable](http://jqueryui.com/demos/sortable/)）。除此之外，我现在得到了 jQuery 插件的帮助，称为`masonry`(link to [masonry](http://masonry.desandro.com/index.html) )

例子：

```
// Masonry
$('#container').masonry({
    itemSelector: '.element',
    isResizable: true,
    columnWidth: 100
})

// Sortable 
$('#container').sortable({
    items: '.element',
    forcePlaceholderSize: true,
    placeholder: 'card-sortable-placeholder element',
    tolerance: 'pointer',
    handle: '.handle',
    cursor: 'move',
    cancel: '.notdrag',

    start:  function(event, ui) {     
            ui.item.addClass('dragging').removeClass('element');
            ui.item.parent().masonry('reload')
        },
    change: function(event, ui) {
               ui.item.parent().masonry('reload');
        },
    stop:   function(event, ui) { 
               ui.item.removeClass('dragging').addClass('element');
               ui.item.parent().masonry('reload');
        }

    }); 
```

# css - 如何使用 IE7+ 让我的网页看起来不错？

> ID：11539225
> 
> 赞同：-2
> 
> 时间：2012-07-18T10:24:06.933
> 
> 标签：css, html, internet-explorer

我最近重构了我的网站以使用 HTML5。它适用于大多数浏览器，显然除了 IE7 和 IE8。

看起来它是由于使用了 IE7 显然忽略的 <header>、<section> 和 <article> 标签造成的。我的 css 为这些定义了特定的标签格式子类。

```
header { color: #fff;  background: url("background1.jpg"); 
        padding: 10px 40px 20px 40px; margin-bottom: 20px; }
header a { color: #fff; text-decoration: none; outline: none; }
header a:hover { color: #fff; text-decoration: underline; }
header h1 { color: #FFFFFF; font-weight: bold; font-size: 30px; 
          padding-bottom: 20px; padding-top: 0px; }
header h2 { color: #FFFFFF; font-weight: bold; font-size: 16px; padding-bottom: 10px; }
header hr { margin: 10px 10px 0px 0px; }
header .copyright { font-style: italic; font-weight: bold; 
    padding-left: 30px; padding-right: 0px; }

section { padding: 5px 40px 5px 40px; line-height: normal; }

article .main { font-weight: bold; font-size: 20px; line-height: normal; } 
```

我跳过了其他不会导致问题的样式定义。

我怎么能解决这个问题？我必须删除 HTML5 标签吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:26:15.743

您可以在 head 部分中使用此脚本：

```
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

大多数 html5 对我来说是否在 IE 中工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:32:05.463

问题是浏览器对它们根本无法识别的标签进行了特殊处理。诸如应用样式和能够包含子项之类的基本内容将不起作用。

Html shivs，例如由 RTB 链接的，将通过 javascript 注入对这些 html5 标签的基本识别，以便浏览器将它们识别为有效标签，这意味着您可以设置它们的样式。

Modernizr 之类的库还包括一个 html5 shiv（除此之外，Modernizr 不启用 html5 功能）请注意，除了基本的标签识别之外，shiv 通常不允许任何其他操作，因此您可以设置元素的样式。它不启用功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:37:18.263

您可以尝试在 javascript 中创建元素，IE 将呈现它。

```
document.createElement('header');
document.createElement('section');
document.createElement('article'); 
```

# opencv - JAVACV：使用 javacv 捕获网络摄像头

> ID：11539230
> 
> 赞同：1
> 
> 时间：2012-07-18T10:24:14.227
> 
> 标签：opencv, webcam, javacv

尝试使用 JAVACV 库从网络摄像头捕获。但它会抛出一个`UnsatisfiedLinkError`. 堆栈跟踪如下：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:
C:\Users\anooj\AppData\Local\Temp\javacpp7955905460040\jniopencv_core.dll: %1 is not a valid Win32 application
at java.lang.ClassLoader$NativeLibrary.load(Native Method)
at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1928)
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
at java.lang.Runtime.load0(Runtime.java:792)
at java.lang.System.load(System.java:1059)
at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:418)
at com.googlecode.javacpp.Loader.load(Loader.java:368)
at com.googlecode.javacpp.Loader.load(Loader.java:315)
at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:131)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at com.googlecode.javacpp.Loader.load(Loader.java:334)
at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:96)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at com.googlecode.javacpp.Loader.load(Loader.java:334)
at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:91)
at com.googlecode.javacv.OpenCVFrameGrabber.start(OpenCVFrameGrabber.java:170)
at javaapplication16.JavaApplication16.captureframe(JavaApplication16.java:24)
at javaapplication16.JavaApplication16.main(JavaApplication16.java:38)
Java Result: 1 
```

我们的代码如下：

```
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvSaveImage;

public class JavaApplication16 {

/**
 * @param args the command line arguments
 */
    public static void captureframe()
    {
        OpenCVFrameGrabber grabber=new OpenCVFrameGrabber(0);
        try
        {
            grabber.start();
            IplImage img=grabber.grab();
            if(img!=null)
            {
                cvSaveImage("capture.jpg", img);
            }
        }
        catch(Exception ae)
        {
            ae.printStackTrace();

        }
    }
    public static void main(String[] args) {
        captureframe();
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T09:01:31.757

请记住，openCV 和 javaCV 的版本必须匹配。下载最新版本的openCV 2..46 [http://opencv.org/downloads.html](http://opencv.org/downloads.html)

并下载 javacp [https://code.google.com/p/javacv/downloads/list](https://code.google.com/p/javacv/downloads/list) [注意：选择 javacv-0.6-cppjars.zip 85.0 MB]

在这种情况下，您不会在线程“main”java.lang.UnsatisfiedLinkError 中获得异常：

我的代码运行成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:06:39.393

*   确保您已正确安装 Microsoft Visual C++ Redistributable 包和设置路径变量。下面的链接解释了所有必要的步骤
    [http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html](http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html)

*   使用 VideoInputFrameGrabber 而不是 OpncvFrameGrabber，如以下链接中的建议 [http://code.google.com/p/javacv/wiki/Windows7AndOpenCV#I_cannot_capture_from_my_Webcam_using_opencv_highgui_or_OpenCVFr](http://code.google.com/p/javacv/wiki/Windows7AndOpenCV#I_cannot_capture_from_my_Webcam_using_opencv_highgui_or_OpenCVFr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:04:10.343

请参阅此链接以解决您遇到的错误[Link1](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html)

请参阅此链接以获取从相机捕获图像的程序，将其保存为 JPG 格式并将其显示在画布上[Link2](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/javacv-capture-save-flip-show-live.html)

希望它能解决您的查询。

# javascript - 带有空数据错误的简单用户界面

> ID：11539238
> 
> 赞同：1
> 
> 时间：2012-07-18T10:24:46.337
> 
> 标签：javascript, asp.net, jquery-easyui

我正在为我的应用程序使用easyui。由于某些原因，我需要显示空网格，并将空数据发送到 easyui。但是，它不显示空网格，而是在第一列显示排序号和按钮。这是我的代码：

```
 $('#GRID_PT_TARIFF_CONTRACT').datagrid({
                    singleSelect: true,
                    remoteSort: false,
                    fitcolumns: true,
                    columns: [[
                        { field: 'action', title: 'İşlem', width: (_width * 0.08).toString(), sortable: false, formatter: function (value, row, index) {
                          var button = "";
                          button = '<input type="button" value="Tarifeyi aç" class="BttnWindow" onclick="DESIGN.OPEN_SEGMENT_FRAME_BY_BUTTON(\'' + row.TariffId+ '\',\'' + row.TariffName + '\',\'' + row.ContractName + '\',\'' + row.Supplier + '\') "/>';
                          return button;
                        }
                        },
                        { field: 'TariffName', title: 'Taslak Tarife Tanımı', width: '100%', sortable: true },
                        { field: 'TariffStat', title: 'Taslak Tarife Durumu', width: '100%', sortable: true },
                        { field: 'Supplier', title: 'Tedarikçi', width: '100%', sortable: true },
                        { field: 'ContractName', title: 'Sözleşme Tanımı', width: '100%', sortable: true },
                        { field: 'ContractStat', title: 'Sözleşme Durumu', width: '100%', sortable: true },
                        { field: 'StartDate', title: 'Başlangıç Tarihi', width: '100%', sortable: true },
                        { field: 'EndDate', title: 'Bitiş Tarihi', width: '100%', sortable: true },
                        { field: 'NoticePeriod', title: 'İhbar Süresi', width: '100%', sortable: true, formatter: function (value, row, index) {
                            var val;
                            if (row.TariffId != null) {
                                val = value + ' Gün';
                            }
                            return val;
                        }
                        },
                        { field: 'ValidityPeriod', title: 'Geçerilik Süresi', width: '100%', sortable: true, formatter: function (value, row, index) {
                            var val;
                            if (row.TariffId != null) {
                                val = value + ' Ay';
                            }
                            return val;
                        }
                        }

                    ]],
                    onClickRow: function () {
                        var row = $('#GRID_PT_TARIFF_CONTRACT').datagrid('getSelected');
                        if (row.TariffId != null) {
                            GLOBALS.SelectedTariffId = row.TariffId.toString();
                            //DEGIGN.ROWCLICKEVENT
                        }
                    },
                    onDblClickRow: function () {
                        var row = $('#GRID_PT_TARIFF_CONTRACT').datagrid('getSelected');
                        if (row.TariffId != null) {
                            GLOBALS.SelectedTariffId = row.TariffId.toString();
                            GLOBALS.SelectedTariffName = row.TariffName.toString();
                            GLOBALS.SelectedContractName = row.ContractName.toString();
                            GLOBALS.SelectedSupplier = row.Supplier.toString();
                            DESIGN.CREATE_TARIFF_WIN(row.TariffId);
                        }
                    },
                    onLoadSuccess: function (data) {
                        var panel = $(this).closest(".datagrid");
                        var dg = $(this);
                        panel.find("div.datagrid-view2 > div.datagrid-body tr:first > td[field]").each(function (k, v) {
                            var bodyCol = $(v);
                            var field = bodyCol.attr("field");
                            var headerCol = panel.find("div.datagrid-view2 > div.datagrid-header tr:first > td[field='" + field + "']");
                            var bodyContent = bodyCol.children(":first");
                            var headerContent = headerCol.children(":first");
                            var content = null;
                            if (bodyCol.width() > headerCol.width()) {
                                content = bodyCol.children(":first");
                            } else {
                                content = headerCol.children(":first");
                            }

                            var col = dg.datagrid("getColumnOption", field);
                            col.width = content.outerWidth();
                            col.boxWidth = $.boxModel == true ? content.width() : content.outerWidth();

                            bodyContent.width(col.boxWidth);
                            headerContent.width(col.boxWidth);
                        });
                        dg.datagrid("fitColumns");
                        dg.datagrid("fixColumnSize");
                    }
                }); 
```

这是图像： ![喜欢这张图片](../Images/721c5242f04450e6b101dc340847e3fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T12:36:47.567

[本主题将对您有所帮助](http://www.jeasyui.com/forum/index.php?topic=1881.0)，然后我更改了扩展代码；

```
var myview = $.extend({}, $.fn.datagrid.defaults.view, {
                onAfterRender: function (target) {
                    $.fn.datagrid.defaults.view.onAfterRender.call(this, target);
                    var opts = $(target).datagrid('options');
                    var vc = $(target).datagrid('getPanel').children('div.datagrid-view');
                    vc.children('div.datagrid-empty').remove();
                    if ($(target).datagrid('getRows').length <= 1) {
                        if ($(target).datagrid('getRows')[0].Id == null) {
                            var d = $('<div class="datagrid-empty"></div>').html(opts.emptyMsg || 'no records').appendTo(vc);
                            d.css({
                                position: 'absolute',
                                left: 0,
                                top: 25,
                                height: 25,
                                width: '100%',
                                textAlign: 'center',
                                background: 'snow'
                            });
                        }
                    }
                }
            }); 
```

# c# - Rhino ETL - 加载大型管道分隔文件

> ID：11539241
> 
> 赞同：1
> 
> 时间：2012-07-18T10:25:03.213
> 
> 标签：c#, sql-server, sqlbulkcopy, filehelpers, rhino-etl

我们必须加载大型管道分隔文件。使用 Rhino ETL（依赖 FileHelpers）将这些加载到 SQL Server DB 时，是否必须提供记录类？我们必须将文件加载到具有数十列的不同表中——生成它们可能需要一整天的时间。我想我们可以编写一个小工具来从 SQL Server 表中生成记录类。

另一种方法是为 FileStream 编写 IDataReader 包装器并将其传递给 SqlBulkCopy。

SqlBulkCopy 也确实需要列映射，但它确实允许列序号——这很容易。

有什么想法/建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:51:44.133

我对 Rhino ETL 了解不多，但 FileHelpers 有一个`ClassBuilder`允许您在运行时生成记录类。有关一些示例，请参阅[文档](http://www.filehelpers.com/runtime_classes.html)。

所以很容易生成一个类似下面的类：

```
SqlCommand command = new SqlCommand("SELECT TOP 1 * FROM Customers;", connection);
connection.Open();

// get the schema for the customers table
SqlDataReader reader = command.ExecuteReader();
DataTable schemaTable = reader.GetSchemaTable();

// create the FileHelpers record class
// alternatively there is a 'FixedClassBuilder'
DelimitedClassBuilder cb = new DelimitedClassBuilder("Customers", ","); 
cb.IgnoreFirstLines = 1; 
cb.IgnoreEmptyLines = true; 

// populate the fields based on the columns
foreach (DataRow row in schemaTable.Rows)
{
     cb.AddField(row.Field<string>("ColumnName"), row.Field<Type>("DataType")); 
     cb.LastField.TrimMode = TrimMode.Both;
}

// load the dynamically created class into a FileHelpers engine
FileHelperEngine engine = new FileHelperEngine(cb.CreateRecordClass());

// import your records
DataTable dt = engine.ReadFileAsDT("testCustomers.txt"); 
```

# c# - 为什么这段代码不起作用？带有 .StartsWith 的 XML

> ID：11539243
> 
> 赞同：0
> 
> 时间：2012-07-18T10:25:16.313
> 
> 标签：c#, xml, windows-phone-7, linq-to-xml

为什么这样工作：

```
 XDocument dataFeed = XDocument.Parse(e.Result);
        var guide = from query in dataFeed.Descendants("MaxPayne3")
                                    select new NewGamesClass
                                    {
                                        GameID = (string)query.Element("ID"),
                                        GameTitle = (string)query.Element("Title"),
                                        GameDescription = (string)query.Element("Description"),
                                        GameGuide = (string)query.Element("Guide")
                                    };

        if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
        {
            if (selectedIndex == "0")
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameTitle.StartsWith("Feel"));
            else if (selectedIndex == "1")
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameTitle.StartsWith("Serious")); 
```

但不是这样：

```
 if (selectedIndex == "0")
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameID.StartsWith("000"));
            else if (selectedIndex == "1")
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameID.StartsWith("001")); 
```

我想使用 GameID 而不是 GameTitle。

抱歉没有 XML，对我来说太早了，哈哈

这里： [https ://dl.dropbox.com/u/27136243/AchivementHunters/XML/GameList.xml](https://dl.dropbox.com/u/27136243/AchivementHunters/XML/GameList.xml)

这是课程：

```
public class NewGamesClass
{
    string gameID;
    string gameTitle;
    string gamedescription;
    string gameImage;
    string gameGuide;
    string videoLink;
    public string GameID
    { get { return gameID; } set { gameID = value; } }
    public string GameTitle
    { get { return gameTitle; } set { gameTitle = value; } }
    public string GameDescription
    { get { return gamedescription; } set { gamedescription = value; } }
    public string GameImage
    { get { return gameImage; } set { gameImage = value; } }
    public string GameGuide
    { get { return gameGuide; } set { gameGuide = value; } }
    public string VideoLink
    { get { return videoLink; } set { videoLink = value; } }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:38:24.080

大多数`<MaxPayne3>`节点没有子`<ID>`节点，因此这段代码：

```
select new NewGamesClass
           {
               GameID = (string)query.Element("ID"),
               GameTitle = (string)query.Element("Title"),
               GameDescription = (string)query.Element("Description"),
               GameGuide = (string)query.Element("Guide")
            } 
```

将为`GameID`. 然后这段代码：

```
guide.Where(ngc => ngc.GameID.StartsWith("000")) 
```

将抛出`NullReferenceException`所有这些元素

将其更改为：

```
guide.Where(ngc => !String.IsNullOrEmpty(ngc.GameID) && ngc.GameID.StartsWith("000")) 
```

它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:30:44.817

鉴于我们没有数据，这里唯一显着的区别是`.GameTitle.`vs `.GameID.`。我假设“不起作用”在这里意味着“它会引发异常”。我可以预测的主要例外是`NullReferenceException`, because `.GameID`is `null`, so`.GameID.anything`是非法的。

这让我认为它`<ID>whatever</ID>`在您认为存在的位置不存在（这将导致`.GameID`成为`null`参考）。要验证的事项：

*   它存在于那里
*   大小写正确（`ID`, `Id`, `id`, 等）
*   那是一个*元素*，而不是一个*属性*
*   它不在命名空间中

更新：这是数据中的问题：

```
<MaxPayne3>
  <Title>Part I Complete - 20G</Title>
  <Description>Complete Part I Of The Story</Description>
  <Guide>Story related, cannot be missed.</Guide>
  <Image>http://www.xbox360achievements.org/images/achievements/925/-K6lMA==.jpg</Image>
  <VideoLink/>
</MaxPayne3> 
```

没有`<ID>`。像这样的还有很多。所以：你需要处理它。一个务实的检查将是：

```
...blah...guide.Where(ngc => ngc.GameID != null && ngc.GameID.StartsWith("000")); 
```

# android - 如何使用 Robotium 从列表视图中选择两个项目？

> ID：11539244
> 
> 赞同：1
> 
> 时间：2012-07-18T10:25:16.653
> 
> 标签：android, robotium, listview-selector

`listview`我想在使用 Robotium时测试两个项目的选择。我正在使用`solo.clickInList(0);`它从列表中获取第一项，但我如何获得第二项。`(solo.clickInList(1);`再次获得第一个！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:31:51.717

尝试使用`solo.clickInList(int line, int index)`

这可能看起来像：

`solo.clickInList(0,1)`和`solo.clickInList(0,2)`

希望这可以帮助！

# django - 更改字段标识符而不更改字段名称

> ID：11539248
> 
> 赞同：1
> 
> 时间：2012-07-18T10:25:38.507
> 
> 标签：django, django-forms

另一个系统向我的服务器发出请求，参数看起来像`XYZ_LOGIN=myname&XYZ_PASSWORD=mydata`. 我无法更改该系统或格式。

我用这样的形式解析数据：

```
class MyForm(forms.Form):
    XYZ_LOGIN = forms.CharField()
    XYZ_PASSWORD = forms.CharField() 
```

但这非常难看。我可以用这样的好别名制作字段吗？

```
 login = forms.CharField(alias='XYZ_LOGIN') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:31:20.813

您可以设置字段的[标签](https://docs.djangoproject.com/en/dev/ref/forms/fields/#label)：

```
XYZ_LOGIN = forms.CharField(label='Login') 
```

正如您在评论中所说，这只会在您呈现表单时使 html 输出“人性化”，您仍然必须`cleaned_data.get('XYZ_LOGIN')`在代码中使用。

没有类似于您提出的“别名”参数的内置功能。您可以在实例化表单之前预处理发布数据，或自定义表单行为。就个人而言，我会坚持您当前代码的“丑陋”。

# excel - 在excel中格式化

> ID：11539254
> 
> 赞同：-3
> 
> 时间：2012-07-18T10:26:03.793
> 
> 标签：excel-2010, excel, excel-formula, formatting

在[excel-2010](/questions/tagged/excel-2010 "显示标记为“excel-2010”的问题")中，我们可以将时间列与相应时间的 AM/PM 信息一起格式化为文本吗？

例如，A 列的文本为“daily”，B 列的值为“6.00 PM”。我们可以附加这些 A 和 B 列并在单个单元格中显示为“每日下午 6 点”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:46:48.187

是的，试试这个公式：

```
=CONCATENATE(A1," ",TEXT(B1,"hh.mm AM/PM")) 
```

**CONCATENATE**函数或“ &”可用于将值连接为文本。

**TEXT**函数可用于将值更改为具有特定格式的文本。

# eclipse - Eclipse - 使文件快速访问

> ID：11539255
> 
> 赞同：1
> 
> 时间：2012-07-18T10:26:04.287
> 
> 标签：eclipse, spring

我使用eclipse（实际上是Spring STS）。我需要快速访问两个文件： - web.xml - servlet-context.xml (spring config)

每次我想打开文件时，我都需要找到它们，这需要时间。

有没有办法在项目的根文件夹上创建链接？这样我可以快速访问吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:51:49.127

一种选择是使用`Ctrl+Shift+R`并键入要打开的文件的名称。

您还可以在项目的根目录下创建指向某个文件的链接：

1.  右键单击项目并选择`New->File`
2.  在“新建文件”对话框中单击`Advanced`，然后选择`Link to file in the file system`
3.  单击`Browse`并选择要快速访问的文件
4.  点击`Finish`就完成了

# macos - 在哪里可以找到 Mac OS 软件词汇表？

> ID：11539261
> 
> 赞同：0
> 
> 时间：2012-07-18T10:26:22.963
> 
> 标签：macos

几年前，Apple 为 Leopard 的每个可用本地化版本发布了软件词汇表（双语文件）。这些较旧的词汇表可在此处找到：[https](https://developer.apple.com/internationalization/downloads/) ://developer.apple.com/internationalization/downloads/或 developer.apsic.com 的免费下载部分。对于任何为 Mac OS 平台本地化应用程序的人来说，这是一个有价值的参考，以便它们与平台中的术语保持一致。

自 Leopard 以来，Mac OS 中添加了更多语言，并且显然发生了更多 UI 更改和添加。

Apple 是否通过 99 美元的 Mac OS 开发者计划或其他渠道向开发社区提供更新的词汇表（Lion 级别）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:25:41.840

回答自己的问题：刚刚注意到苹果公司于 2012 年 8 月 6 日发布了 Mountain Lion 的词汇表，可以从[https://developer.apple.com/downloads下载](https://developer.apple.com/downloads)

# c++ - 返回矩阵 A 中不同行数的最快方法是什么？

> ID：11539267
> 
> 赞同：3
> 
> 时间：2012-07-18T10:26:41.460
> 
> 标签：c++, matrix

如果我有以下矩阵A：

```
A = {1,2,3}
    {7,9,1}
    {5,3,2} 
```

我如何可以轻松地返回矩阵中不同行的数量？在这种情况下，输出必须是：“3”

我试图制作一个函数“ **rows** ”：

```
void rows (int a[N][N], int row[N], int x){

    for (int i=0;i<N;i++){

        row[i]=a[x][i];

    }

} 
```

然后，使用“**检查**”功能，我尝试检查行是否不同：

```
int check ( int a[N][N])
{

    int row1[N];
    int row2[N];

    int j=0;

    rows(a,row1,j);
    rows(a,row2,j+1); 

    int count = 0;

    for ( int i=0; i<N; i++){
        for ( int j=0; j<N; j++){

            if ( row1[i] != row2[j]){

                count++;

            }

        }
    }

    return count;

} 
```

但是返回错误的号码，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:38:05.117

你的算法是完全错误的。添加`break`后，当所有行都不同时它“工作”，但当某些行相同时它会中断。它计算行数，以便存在与它不同的另一行。例如，如果您在

```
1 2 3
4 5 6
1 2 3 
```

你会得到一个答案`3`，但你应该得到一个`2`。

算法应该是这样的：

*   假设所有行都是不同的 ( `result = N`)
*   对于每一行`i`，查看它下面的行
*   如果该行`j`下方的任何行`i`等于`row[i]`，则递减`result`并跳出内部循环
*   在外循环的末尾，`result`包含您的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:29:49.880

尝试将不等式变量添加到：

```
int count = 0;

for ( int i=0; i<N; i++){
inequalty=0;
    for ( int j=0; j<N; j++){

        if ( row1[i] != row2[j]){

            inequality=1;
            break; //this makes even faster

        }

    }
 if(inequality!=0)count++;
} 
```

即使是单个元素的不等式也会使行不等，对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:53:41.057

实现一个“CompareRows”函子作为集合的谓词。那么，你需要做的就是——

```
typedef vector<int> Rows;
set<Rows, CompareRows> UniqRows;

for ( int i = 0 ; i < N ; ++i )
  UniqRows.insert(Rows(a[i], a[i] + N));

UniqRows.size(); 
```

# oracle - RCU Installation issues

> ID：11539271
> 
> 赞同：0
> 
> 时间：2012-07-18T10:26:54.633
> 
> 标签：oracle, failed-installation, obiee

I am trying to install Obiee11g on my windows machine. While running through various tutorials in the web, many of them have suggested to use RCU to create MDS and BIplatform.

However when I downloaded RCU and extracted the same. While I am running the rcu.bat in the running directory, it is just opening my OBIEE_HOME folder. I am not able to see the RCU window.

Please Help!

Cheers, Dwarak

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:30:31.473

在您尝试安装 OBIEE 的驱动器中创建一个名为***OBIEE的文件夹！***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:59:13.480

在没有具体错误信息的情况下，我将为您提供一些关于如何运行 RCU 的通用说明。

1.  确保您的机器符合要求。我更喜欢 Linux，但对于 Windows，**我会使用 x86-64 2003 / 2008 Windows 服务器。**
2.  打开命令外壳
3.  执行rcu.bat
4.  按照提示操作
5.  记录错误并上传以获得进一步帮助。

**一些最常见的错误是：**

1.  磁盘空间不足。
2.  低内存
3.  出于性能原因，请避免在运行 OBIEE 的同一台机器上运行 Oracle DB。
4.  将 RCU shiphome 解压到一个没有空格的文件夹中
5.  清理可能指向旧 BI 安装的 PATH 变量
6.  %TMP% 和 %TEMP% 路径也不应该有空格。
7.  不要设置 ORACLE_HOME
8.  不要设置 JAVA_HOME
9.  正确卸载以前的产品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T15:39:48.473

安装 RCU 的目录中不能有空格。

# javascript - Javascript variable declaration : what is "var myVariable = {}"?

> ID：11539274
> 
> 赞同：2
> 
> 时间：2012-07-18T10:27:07.653
> 
> 标签：javascript, backbone.js, requirejs

I'm pretty new to plain old JavaScript and to JavaScript frameworks (such as Backbone.js, RequireJS, ...). As I was reading and trying to understand some JavaScript files that I got from a project at work (based on JQuery, Backbone and Require), I've encountered some variable declarations such as:

```
var myVariable = {}, itemList; 
```

Could someone explain to me what the "{}" is?

PS: might be a silly question but it's definitely not that easy Googling for "{}" as keyword...

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:31:01.750

`{}`只是定义集合或对象的javascript方式。

在这个例子中，它填充了一个对象字面量

```
var apple = {
    type: "macintosh",
    color: "red",
    getInfo: function () {
        return this.color + ' ' + this.type + ' apple';
    }
}

var featurelessApple = {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:32:26.083

`myVariable`是一个[对象字面](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Object_literals)量或泛型`object`。

为了将来参考，您可以使用浏览器中[的控制台](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)轻松查看此内容。在 Chrome 中

```
var myVariable = {}
console.log(myVariable); 
```

这将打印出整个对象。在这个

```
Object {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:33:24.763

它是一个空的 Javascript 对象字面量（创建对象的简写方式）

```
var myVariable = {}; 
```

类似于

```
var myVariable = new Object(); 
```

两个表达式都将创建一个空对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T10:29:24.560

那是一个空的[对象字面量](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Object_literals)。

对象字面量包含在花括号中的零个或多个键/值对。在您的示例中，键/值对为零，因此该对象未定义任何属性。

# ajax - retrieve json file from server

> ID：11539281
> 
> 赞同：2
> 
> 时间：2012-07-18T10:27:35.107
> 
> 标签：ajax, json, jsonp

I am trying to get a json file from my server. Until now, always I need a json file, it was got by ajax and a php file in server creates the json file.

Not I have a json file (X.json) with this structure:

```
{
"zona": [
    {
        "zona1": [
            {
                "lon": "a",
                "lat": "b"
            },
            {
                "lon": "aa",
                "lat": "bb"
            },
            {
                "lon": "aaa",
                "lat": "bbb"
            },
            {
                "lon": "aaaa",
                "lat": "bbbb"
            }
        ]
    },
    {
        "zona2": [
            {
                "lon": "c",
                "lat": "d"
            },
            {
                "lon": "cc",
                "lat": "dd"
            },
            {
                "lon": "ccc",
                "lat": "ddd"
            },
            {
                "lon": "cccc",
                "lat": "dddd"
            },
            {
                "lon": "ccccc",
                "lat": "ddddd"
            }
        ]
    }
]
} 
```

And when I try the same way to get the file, I didn't get anything. I think maybe it is possible to add the file when I load the webpage like a javascript file. Or maybe with jsonp but I trid and also I got bad answer.

As json try, I used:

```
$.ajax({
        url: 'localhost/open/listaPuntosZona.json',
        type: 'GET',
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        jsonp: "callback",
        jsonpCallback: "jsonpCallbackfunction",
        error: function () {
            alert("Error in Jsonp");
        }
    });

function jsonpCallbackfunction(responseData) {
alert(responseData);    

} 
```

Also I wrapped json file with: callback( jsonfile code)

And also, this other two tries:

```
$.ajax({ 
  url: 'localhost/open/listaPuntosZona.json', 
  type: 'get', 
  error: function(data){ }, 
  complete: function(data){ 

    data=jQuery.parseJSON(data); //do something with data

    alert(data.zona.zona1.length);
  }
});

$.getJSON('localhost/open/listaPuntosZona.json',function(jsonData){
    alert("hola");
    alert(jsonData);
}); 
```

I am using lampp to test the webpage.

Do I have to change something? I used jsonp in past but don't know what I am doing wrong now.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:31:28.943

首先，尝试使用`$.getJSON()`而不是普通的 $.ajax()。它将立即解决许多问题。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

其次，确保你的 json 文件格式完美，没有任何松散的字符和奇怪的空格。

还尝试将错误处理程序链接到您的 ajax 调用。在上面的 getJSON 文档中可用。

```
var jqxhr = $.getJSON("example.json").error(function() { alert("error"); });
// this is according to documentation, i cannot currently test this to work, sorry about that. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-04T21:25:35.147

我知道这已经过时了，但如果其他人像我一样遇到这个问题，这就是我能够解决它的方法......

将以下行添加到**.htaccess**文件中...

```
Header set Access-Control-Allow-Origin "*" 
```

# android - How to type in Android Emulator using PC-Keyboard

> ID：11539283
> 
> 赞同：36
> 
> 时间：2012-07-18T10:27:41.830
> 
> 标签：android, android-emulator

I can not type in Emulator using PC-Keyboard.

can anyone help me ?

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-18T10:29:45.117

转到 windows-> Avd Manager 。选择您的 AVD 并对其进行编辑并在硬件部分下添加键盘支持。使其布尔值为真，享受使用 PC 键盘打字的乐趣。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-23T13:15:19.543

对于那些正在使用 Android Studio 的人。

1.  打开 Android 虚拟设备管理器。
2.  单击与所选模拟器对齐的“**铅笔图标”。**
3.  （将弹出一个对话框）选择`Show Advance Settings`按钮。
4.  找到“**启用键盘输入**”并确保它被选中。 [![在此处输入图像描述](../Images/64a01c1770b88cc55251d9a0d110b62d.png)](https://i.stack.imgur.com/Jefsb.png)

5 最后点击“**完成**”就完成了！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-18T10:31:11.430

打开`AVD Manager`> 单击您的目标 AVD > 编辑 > 硬件 > 新 > 键盘支持 > 确定 > 设置为是 > 并立即尝试

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-13T06:23:44.327

Android Studio -> 工具 -> Android -> AVD 管理器 -> 将显示虚拟设备列表 编辑您要更新设置的设备（铅笔图标） -> 显示高级设置 -> 键盘 -> 选中启用键盘输入 -> 完成。

[![](../Images/9ce6b76771eb8c44dd0d18443d383463.png)](https://i.stack.imgur.com/gF7sN.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T10:33:40.750

从以下链接查看：-

[Android 模拟器不接受键盘输入 - SDK 工具 rev 20](https://stackoverflow.com/questions/11235370/android-emulator-doesnt-take-keyboard-input-sdk-tools-rev-20)

[https://android.stackexchange.com/questions/23333/how-can-i-use-my-pcs-keyboard-on-the-android-emulator](https://android.stackexchange.com/questions/23333/how-can-i-use-my-pcs-keyboard-on-the-android-emulator)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-17T11:10:56.440

Android Studio > AVD Manager > 编辑 > 显示高级设置 > 启用键盘输入 > 完成

# c# - 创建一个组合框用户控件并从主窗口传递项目

> ID：11539284
> 
> 赞同：0
> 
> 时间：2012-07-18T10:27:44.370
> 
> 标签：c#, wpf, user-controls, combobox

我想创建一个新的用户控件来显示我自己的组合框。（组合框有自己的风格和其他东西......（稍后会出现））

用户控件 xaml 文件：

```
<UserControl x:Class="WpfApplication1.MyCombobox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" d:DesignWidth="500"
             Height="50">

    <ComboBox Height="42" ItemsSource="{Binding Path=MyItems}"></ComboBox>

</UserControl> 
```

文件后面的用户控制代码：

```
namespace WpfApplication1
{
    public partial class MyCombobox
    {
        public MyCombobox()
        {
            InitializeComponent();

            MyItems = new List<ComboBoxItem>();
        }

        public List<ComboBoxItem> MyItems { get; set; }
    }
} 
```

主窗口 xaml 文件：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:WpfApplication1="clr-namespace:WpfApplication1" WindowStartupLocation="CenterScreen"
        Height="350"
        Width="500"
        >
    <Grid>
        <WpfApplication1:MyCombobox>
            <WpfApplication1:MyCombobox.MyItems>
                <ComboBoxItem Height="36">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="16" />
                                <RowDefinition Height="16" />
                            </Grid.RowDefinitions>
                            <TextBlock Text="Item Title 1" Grid.Row="0" FontWeight="Bold" />
                            <TextBlock Text="Item Description 1" Grid.Row="1" FontStyle="Italic" />
                        </Grid>
                    </Grid>
                </ComboBoxItem>
                <ComboBoxItem Height="36">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="16" />
                                <RowDefinition Height="16" />
                            </Grid.RowDefinitions>
                            <TextBlock Text="Item Title 2" Grid.Row="0" FontWeight="Bold" />
                            <TextBlock Text="Item Description 2" Grid.Row="1" FontStyle="Italic" />
                        </Grid>
                    </Grid>
                </ComboBoxItem>
            </WpfApplication1:MyCombobox.MyItems>
        </WpfApplication1:MyCombobox>
    </Grid>
</Window> 
```

我希望我可以在主窗口中将组合框项添加到我的用户控件中。像那样：

```
<WpfApplication1:MyCombobox.MyItems>
    <ComboBoxItem Height="36">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="16" />
                    <RowDefinition Height="16" />
                </Grid.RowDefinitions>
                <TextBlock Text="Item Title 2" Grid.Row="0" FontWeight="Bold" />
                <TextBlock Text="Item Description 2" Grid.Row="1" FontStyle="Italic" />
            </Grid>
        </Grid>
    </ComboBoxItem>
    <!-- more items... -->
</WpfApplication1:MyCombobox.MyItems> 
```

UserControl 组合框使用在主窗口中传递的项目。

当我运行代码时，它只显示一个空的组合框

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:21:25.507

这与您在组合框中创建与 MyItems 的绑定的方式有关。

要使其正确定位代码隐藏中的 MyItems 属性，您可以执行以下操作：

```
public MyCombobox() 
{ 
    InitializeComponent(); 

    MyItems = new List<ComboBoxItem>(); 
    this.DataContext = this;
} 
```

# javascript - jquery ui tabs, intercept default ajax load

> ID：11539287
> 
> 赞同：1
> 
> 时间：2012-07-18T10:27:54.297
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

I need to be able to modify the url in the anchors for the tabs and add some query params. Most examples floating around the net suggest that I use code like

```
 $('#tabs-left').tabs({
            select: function (event, ui) {
                //do some mods here
                return true;
            }
        }).removeClass("ui-corner-all"); 
```

My problem is the select event only fires when selecting a new tab, and so I cannot trap the content that is loaded into the default tab.

What can I use to trap the loading of the content via ajax ? I see there is a load event, but that only fires after the content is loaded, which is too late. I read in some bug fix that a beforeload event is planned for a future release, but I need something that works now. I am using jquery-ui-1.8.21

Can anyone suggest a way forward ?

Thanks,

Steed.

# sql - What is the best way from performance point of view while giving away the query results through HTTP?

> ID：11539289
> 
> 赞同：1
> 
> 时间：2012-07-18T10:27:57.540
> 
> 标签：sql, performance

I need to give away results of the query in response to a following URL:

[http://foo.com/search?from=20&perpage=10](http://foo.com/search?from=20&perpage=10)

What is the best practice from performance point of view?

1.  Run the query every time with WHERE row > N and row <= K

2.  Run query once and keep all the result for certain amount of time

3.  What else could be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:37:31.970

如果您的查询将产生非常少量的数据，您可以*考虑*缓存结果。但是想想这个：

*   高性能分页并非易事。它可以在[数据库端](https://stackoverflow.com/questions/2135418/equivalent-of-limit-and-offset-for-sql-server)以更好的性能完成（如果您使用的是 Microsoft SQL Server 2012，它有自己的[扩展](http://msdn.microsoft.com/en-us/library/ms188385.aspx)）。
*   分页由用户完成，他们需要时间来读取数据并单击“下一页”按钮。新查询的性能影响不会很大，并且数据库将比我们能做的更好地处理自己的缓存。
*   缓存大量数据是无用的，消耗内存且效率低于新查询。

然后我的答案是*每次都运行查询*。您的数据库将比您更好地处理它，并且它会随着您的数据扩展（否则当您的系统将有 1000000 条记录时，可能适用于 500 条记录的内容将被破坏）。

总结一下：数据库引擎在缓存数据方面比我们更有效，并且它们的扩展性更好，（通常）一个好的索引就是它们表现良好所需要的。

# android - Post text message on facebook wall

> ID：11539290
> 
> 赞同：0
> 
> 时间：2012-07-18T10:28:06.360
> 
> 标签：android, facebook, post, facebook-android-sdk, facebook-requests

I got a problem while posting text message on the wall. I expected the apps will login to fb and post a text message on the wall, but nothing is posted on my wall.

The following is my code The login part is the same as the Facebook guide and i just added the permission "publish stream"

```
public class FB_trial extends Activity {
Facebook facebook = new Facebook("app_id");
private AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);  
private SharedPreferences mPrefs;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fb_trial);
    /*
     * The following is tutorial sample code
     */
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }

    /*
     * Only call authorize if the access_token has expired.
     */
    if(!facebook.isSessionValid()) {
        facebook.authorize(this, new String[] {"publish_stream"}, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
            }
            @Override
            public void onFacebookError(FacebookError error) {}
            @Override
            public void onError(DialogError e) {}
            @Override
            public void onCancel() {}
        });
    }
    //end of the login sample code

    //post wall fx
    Bundle params = new Bundle();
    params.putString("message", "Fb testing message");
    params.putString("access_token", access_token);
    mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.request("me/feed", params, "POST", new RequestListener(){
        @Override
        public void onComplete(String response, Object state) {
            System.out.println("post wall success");
        }
        @Override
        public void onIOException(IOException e, Object state) {}
        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {}
        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {}
        @Override
        public void onFacebookError(FacebookError e, Object state) {}
    }, null);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fb_trial, menu);
    return true;
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

}

The "wall post success" message is shown in the log (is that means the request is complete?) but i can't find the post on my wall.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:17:54.080

您可以使用对话框发布到墙上：

```
 Bundle params = new Bundle();
        params.putString("link", linkgame);
        params.putString("name", subject);
        params.putString("description", content);
        params.putString("picture", iconUrl);

        facebook.dialog(((Activity) ctx).getParent(), "feed", params,
                new DialogListener() {

                    public void onComplete(Bundle values) {
                    }

                    public void onFacebookError(FacebookError error) {}
                    public void onError(DialogError e) {}
                    public void onCancel() {}
        }); 
```

# magento - 如何删除注册表单上的“密码不能为空”信息

> ID：11539294
> 
> 赞同：1
> 
> 时间：2012-07-18T10:28:26.880
> 
> 标签：magento

在我的应用程序（Magento v1.7）中，我不希望用户在注册时输入密码。所以我在页面 app\design\frontend\base\default\template\persistent\customer\form\register.phtml 上注释掉以下代码

```
<ul class="form-list">
     <li class="fields">
         <div class="field">
              <label for="password" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
              <div class="input-box">
                   <input type="password" name="password" id="password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
              </div>
          </div>
          <div class="field">
               <label for="confirmation" class="required"><em>*</em><?php echo $this->__('Confirm Password') ?></label>
               <div class="input-box">
                     <input type="password" name="confirmation" title="<?php echo $this->__('Confirm Password') ?>" id="confirmation" class="input-text required-entry validate-cpassword" />
               </div>
           </div>
      </li>
      <?php echo $this->getChildHtml('persistent.remember.me'); ?>
</ul> 
```

但警告消息“密码不能为空。” 注册时仍然显示。如何删除此警告消息？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:45:27.177

密码在 Mage_Customer_Model_Customer::validate() 进行验证，因此您可以覆盖此函数或创建一个隐藏字段`name="password"`并在此处输入一些虚拟信息，您以后可以使用生成的密码进行覆盖。但是，如果您不立即覆盖密码，这可能是一个安全漏洞。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T11:12:46.987

从密码字段中删除类“required-entry”。

# objective-c - 当应用程序进入后台时处理事件

> ID：11539297
> 
> 赞同：0
> 
> 时间：2012-07-18T10:28:43.170
> 
> 标签：objective-c, xcode, cocoa-touch

我想要的是我的应用程序在进入后台时（按下主页按钮时）应该停止播放声音。我在 appDelegate.m 中做了这个，但它说`use of undeclared identifier 'soundID'`

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    AudioServicesDisposeSystemSoundID(soundID)
} 
```

我已将我的 VC 导入到委托中，并将其`soundID`作为属性公开。我哪里错了？请帮忙。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"something" ofType:@"wav"];
    NSURL *url = [NSURL fileURLWithPath:path]; 
    AudioServicesCreateSystemSoundID((CFURLRef)url, &soundID);
    AudioServicesPlaySystemSound(soundID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:40:30.257

如果您想要该功能，您应该转到您的应用程序主 plist 文件（可能名为*`[your-app-name]-Info.plist`*）并在那里找到一个键：

```
Required background modes 
```

并删除价值

```
App plays audio 
```

这应该够了吧。

----------------**编辑：**

试试这个：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"myWavFile" ofType:@"wav" inDirectory:@"DirectoryName"];
self.player = [AVPlayer playerWithURL:[NSURL fileURLWithPath:path]];
[self.player play]; 
```

自我播放器在哪里：

```
@property (strong, nonatomic) AVPlayer *player; 
```

您还应该：

```
#import <AVFoundation/AVFoundation.h> 
```

并将此框架添加到您的项目中。

# android - How to present cursor from two columns of the same table to SimpleCursorAdapter Android

> ID：11539298
> 
> 赞同：2
> 
> 时间：2012-07-18T10:28:43.153
> 
> 标签：android

I a developing an app whereby i retrieve data from an sqlite database and the data is displayed on a listview I am retrieving data from two columns of a specific table and it is added to a SimpleCursorAdapter which is then set to the listview i would like to display each record in the different columns to be displayed on its own row currently data from both columns is displayed in one row any help will be appreciated especially a link to a working example

i have deicded to add my code maybe this will help you help me even better

```
mDicCursor=managedQuery(DictionaryProvider.CONTENT_URI, null, null,
              new String[] {query}, null);

      if (mDicCursor == null ) {
          mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    /*    final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom_dialog);
            dialog.setTitle("WORD MISSING");*/
            showDialog(DIALOG_WORDMISSING);

       //new AlertDialog.Builder(this).setTitle("Argh").setMessage("Watch out!").setNeutralButton("Close", null).show();  
      } else {
          int count = mDicCursor.getCount();
          String countString = getResources().getQuantityString(R.plurals.search_results,
                                  count, new Object[] {count, query});
          mTextView.setText(countString);

/*  int  iWord = mDicCursor.getColumnIndexOrThrow(DictDatabase.REC_DESCRIPTION);
    mTextView.setText(mDicCursor.getString(iWord));*/
     // Specify the columns we want to display in the result

    String[] from = new String[]{ DictDatabase.REC_WORD,
            DictDatabase.REC_DESCRIPTION   };

       // and an array of the fields we want to bind those fields to (in this case just text1)
     int[] to = new int[]{ R.id.text2,
                           R.id.text3};
      SimpleCursorAdapter words = 
         new SimpleCursorAdapter(this, R.layout.dictwords, mDicCursor, from, to);

      mListView.setAdapter(words); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:35:37.267

在光标适配器中，您可以详细说明数据是如何设置并在屏幕上显示的。您需要确保每第二行都来自第二列。这可以使用当前行索引的模数来完成

```
boolean isEvenRow = (currentRow % 2==0); // will give 0 for even rows, 1 for odd rows 
```

然后您可以使用此布尔结果来选择数据是来自 A 列还是 B 列。

```
String data;
if (isEvenRow){
 data = mCursor.getString(COLUMN_A);
}else{
 data = mCursor.getString(COLUMN_B);
} 
```

然后您还需要确保总行数将是游标大小的两倍，因此当您返回计数时，请确保返回正确的值：

```
return mCursor.getCount()*2; 
```

这将允许您滚动两倍的光标长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:39:23.610

创建另一个包含 2 个文本视图的布局并将它们彼此相邻放置。在您的活动“R.layout.new_layout”中，并在您的 simplecursoradapter 的构造函数中使用它和您的新 2 textviews id.m 示例：

```
SimpleCursorAdapter simple=new SimpleCursorAdapter(this, R.layout.new_layout,cursor, new String[]{column1,column2} , new int[] {textview1,textview2}); 
```

# xcode - Implementing a UITableView and it's Controller

> ID：11539299
> 
> 赞同：0
> 
> 时间：2012-07-18T10:28:52.837
> 
> 标签：xcode, controller, uitableview

I am trying to implement programmatically a UITableView.

I have a UIView (named IndexView). Here is the constructor :

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        MyTableViewController* favorite_table_view_controller = [[MyTableViewController alloc] init];
        UITableView* theTableView = [[UITableView alloc] initWithFrame:CGRectMake(20, 65, 280, 350) style:UITableViewStylePlain];
        theTableView.delegate = favorite_table_view_controller;
        theTableView.dataSource = favorite_table_view_controller;
        [self addSubview:theTableView];
    }
    return self;
} 
```

MyTableViewController is defined this way :

```
@interface MyTableViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

And implements the two necessary functions :

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return data.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"Cell"];

    [cell.textLabel setText:[data objectAtIndex:indexPath.row]];

    return cell;
} 
```

And I get this error :

```
[__NSMallocBlock__ tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x6897de0
2012-07-18 12:07:24.607 ButtonsTest[22854:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x6897de0' 
```

I think there is a problem when I'm binding the controller to the view. But I can't find where.

Any idea where does the problem come from ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:33:19.177

您不应该从视图构建视图控制器。应该反过来做。（从 UIVIewControllers 构造视图）

制作一个 ViewController 的子类`UIViewController`，然后让它实现`UITableViewDelegate`and `UITableViewDataSource`。如果您仍然需要从另一个控制器类控制 UITableView，请在 parent 中设置此连接`UIViewController`，而不是从 View 本身。这就是iOS密集使用MVC的基本前提

# c++ - 如何对结构进行位操作？

> ID：11539300
> 
> 赞同：2
> 
> 时间：2012-07-18T10:28:53.973
> 
> 标签：c++, struct, bit-manipulation, conversion-operator

我有一个位域结构，我想在其上使用掩码执行按位运算。我想知道最简单、最有效的方法。我尝试使用我的转换运算符（这似乎是对两个结构执行 & 操作的一种低效方式），但我收到错误 C2440：'type cast'：无法从 'const test::dtType' 转换为 'char'。没有可以执行此转换的用户定义转换运算符，或者无法调用该运算符

```
class test
{
   public:
    test() : startTime(0), endTime(5,23) {}
    ~test();

    struct dtType {
        // inline constructors with initialisation lists
        dtType() {dtType(0);}
        dtType(byte z) {dtType(z,z);}
        dtType(byte n,byte h) : mins(n), hrs(h){}

        // inline overloaded operator functions
        operator char() {return mins + hrs<<3;}; // allow casting the struct as a char

        // All I want to do is return (this & hrsMask == date & hrsMask)
        // I know that in this trivial case I can do return (hrs == date.hrs) but I have simplified it for this example.
        bool operator== (dtType date){return (char(this) & char(hrsMask)) == (char(date) & char(hrsMask));};

        // data members
        unsigned mins: 3; // 10's of mins
        unsigned hrs: 5; // 8 bits
    };
    const static dtType hrsMask; // initialised outside the declaraion, since a static is not associated with an individual object.
    dtType startTime; // initialised by test() in its initialisation list
    dtType endTime; // initialised by test() in its initialisation list
};

// Typically in a source file, but can be in the header.
const test::dtType hrsMask(0,31); 
```

我尝试使用 void 指针进行按位运算。它可以编译，但我还没有测试过。

```
bool test::dtType::operator== (dtType date){
    const void * longThisDT = this;
    const void * longThatDT = & date;
    const void * longMaskDT = & hrsMask;
    return (*((long *)longThisDT) &  *((long *)longMaskDT) == *((long *)longThatDT) &  *((long *)longMaskDT));
}; 
```

这是否尽可能高效？它涉及三个额外的指针，而我真正需要的只是转换为 long。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:57:20.200

它在`this`被间接和 const 被删除时起作用：

```
bool operator== (dtType date) {
    return (char(*this) & char(hrsMask)) == (char(date) & char(hrsMask));};

/* ... */

static dtType hrsMask;

/* ... */

 test::dtType test::hrsMask(0,31); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:57:03.983

首先花点时间准备工作示例，你的有很多错误：
- 没有定义〜测试
- *const test::dtType hrsMask(0,31);* 不正确，应该是：*const test::dtType test:hrsMask(0,31);*

除此之外：
-您应该将*operator char() {*更改为*operator char() const {* - 这正是编译器抱怨的原因:)
- 不应该有*byte mins: 3*而不是*unsigned mins: 3*这实际上意味着'unsigned int' 所以无论如何都使用 4 个字节

# jquery - 使用 JQuery 克隆颜色框图像链接

> ID：11539301
> 
> 赞同：0
> 
> 时间：2012-07-18T10:28:58.100
> 
> 标签：jquery, drupal-7, colorbox

在 Drupal7 中，我使用颜色框，我需要克隆一个颜色框图像链接（加载页面上所有颜色框链接中的第一个）并将其添加到 div 标记中。我怎么能用 javascript/jquery 做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:34:08.843

我找到了这个解决方案：

```
 $('#main-stuff').append('<div id="bgImgOverlay"></div>').css("cursor","pointer");
        $('#bgImgOverlay').click(function() {
            $("a[rel='gallery-all']").colorbox({open:true});
         }); 
```

# javascript - 为我的 html 页面创建一个微调器

> ID：11539305
> 
> 赞同：-5
> 
> 时间：2012-07-18T10:29:09.087
> 
> 标签：javascript, jquery, html

我有一个用户需要提交到服务器的网络表单。服务器响应可能需要几秒钟。所以我想向用户展示一个微调器，这样所有其他字段都是灰色的，并且用户在网络表单中进行任何更改，并且在中心我有一个不断旋转的微调器..请帮助我我应该如何继续..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:34:35.510

这是我的完整解决方案，使用 ajax 发送查询（如果您使用标准表单发布离开页面，则无法使用微调器）：

```
loading = {
    count: 0
};

loading.finish = function() {
    this.count--;
    if (this.count==0) this.$div.hide();
};

// 
loading.start = function() {
    this.count++;
    if (!this.$div) {
        var html = '<div style="position: fixed;z-index:100;left:0;top:0;right:0;bottom:0;background: black;opacity: 0.6;">';
        html += '<table width=100% height=100%>';
        html += '<tr><td align=center valign=middle>';
        html += '<img src=img/loading.gif>';
        html += '</td></tr>';
        html += '</table></div>';
        this.$div=$(html);
        this.$div.prependTo('body');
    }
    setTimeout(function(){
        if (loading.count>0) loading.$div.show();
    }, 500);
};

// the function to call
askUrl = function(url, success) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                success(msg);
            }
            loading.finish();
        }
    };
    loading.start();
    httpRequest.open('GET', url);
    httpRequest.send();
}; 
```

如果您调用 askUrl 并且服务器在 500 毫秒内没有响应，则屏幕将变灰并显示一个微调器。

我在[这里](http://ajaxload.info/)得到了我的 gif 微调器。

# c++ - 选择哪个选项以在 C++ 中使用 sql

> ID：11539307
> 
> 赞同：12
> 
> 时间：2012-07-18T10:29:21.010
> 
> 标签：c++, sql, c, database, odbc

我想`sql`在我的应用程序中连接和使用数据库`C++`。我的应用程序需要存储一些数据*（可以以表的形式存储）*，这些数据将不断增长并且需要在不同进程之间共享——所以我需要一个数据库。我之所以选择`sql`它是因为它对初学者是推荐的，而且我需要多个作家所以没有`SQLite`。

在搜索时，我发现了以下选项*（这些选项可能包括 ORMS、APIs 和 Drivers 并且可能其中一些选项甚至不应该包括在内 - 即我完全错误地理解了该选项；请纠正我）*：

1.  [SQLAPI++](http://www.sqlapi.com/index.html) -[来源](http://www.crazyengineers.com/community/threads/database-connectivity-using-c-c-tutorial.23155/)（官方网站）
2.  [MySQL 连接器/C++](http://dev.mysql.com/doc/refman/5.6/en/connector-cpp.html)（那里也给出了一些优点。） -[源](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html)
3.  [MySQL++](http://tangentsoft.net/mysql++/)
4.  [数据库](http://cppcms.com/sql/cppdb/)
5.  [SOCI](http://soci.sourceforge.net/)
6.  [Libodbc++](http://libodbcxx.sourceforge.net/)（在 ODBC 之上运行）
7.  [数据库模板库](http://dtemplatelib.sourceforge.net/)-[源](http://www.codeguru.com/cpp/data/data-misc/fileinformation/article.php/c10629/Accessing-Your-Database-with-C-Is-as-Easy-as-DTL.htm)
8.  [Oracle 模板库](http://otl.sourceforge.net/)
9.  将 sql.h 与 ODBC 一起使用：ODBC的
    选择
    ：[MYSQL 连接器/ODBC](http://dev.mysql.com/downloads/connector/odbc/)
    b. [EasySoft ODBC](http://www.easysoft.com/products/data_access/odbc_oracle_driver/index.html)
    C. [其他一些](http://www.unixodbc.org/)

一些 SO 的线程可以帮助我找到这些选择：[T1](https://stackoverflow.com/questions/205802/best-portable-way-to-connect-to-sql-server-using-c)，[T2](https://stackoverflow.com/questions/296205/recommended-c-database-abstraction-layers)，[T3](https://stackoverflow.com/questions/440069/database-access-libraries-for-c)，[T4](https://stackoverflow.com/questions/813296/how-do-i-use-a-database-in-c)。

**我的问题**：

1.  *使用哪个*选项以及*何时*使用？这些选项的*优点/缺点？**（可能基于`performance`、`learning curve`、`compatibility`、`present support`。）*在这些选项中进行选择是否有任何**基准**或**建议。***（我真的不知道这些选项，因此可能需要将其中一些选项组合在一起以使它们起作用，即，某些选项可能是**相互依赖的**。）*
2.  这些选项所需的工具集是什么。
3.  如果使用任何`ODBC`依赖库，那么`ODBC`使用哪个。*（上面的“其他一些”链接中提到了许多 ODBC。）*
4.  任何学习它们的来源。*（对于某些选项，我已经提到了一个来源。）*
5.  还有什么我完全错过的吗？
6.  如果我的应用程序在 中**`C`**怎么办？*（这是因为我还需要使用 C 开发一个应用程序`sql`）*

*我知道我问得太多了。请对任何特定部分提出建议。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:36:38.607

您需要考虑的主要问题是您需要在应用程序和数据库方面实现跨平台的程度。

如果您可能需要连接到多个关系数据库服务器（例如 Oracle 和 MySQL 或 Firebird），则使用 ODBC 可能会更好（因为值得我使用 UnixODBC）。我没有使用过 SQLAPI++ 或 SOCI，所以我不能说这些与 UnixODBC 相比如何。

使用 UnixODBC，您可以在部署中获得很多选择。很多时候，我实际上根本不安装 UnixODBC，而是将应用程序直接连接到 ODBC 驱动程序（如果特定实例只与单个数据库通信，这很有用，并且最大限度地减少了您需要安装的东西）。它也适用于 C++ 和 C。

对于 UnixODBC -> MS SQL Server，我们使用 FreeTDS 驱动程序。最初我担心将其投入生产，但实际上我发现有线协议已完全指定，因此这不仅仅是逆向工程黑客（而且我相信制作 FreeTDS 的人也做商业 EasySoft 驱动程序）。MySQL 本身提供了与 UnixODBC 兼容的驱动程序。

我没有尝试过 UnixODBC -> Oracle，因为我已经编写了一个直接的 OCI（即时客户端）接口并且我们一直使用它。

UnixODBC 比使用像 OCI 之类的有线协议方法要慢得多，但差异并不显着，无需担心。我们使用 OCI 的原因是 Oracle 为 Linux / AIX / Solaris 平台免费提供它，而我找不到这些平台的 ODBC oracle 驱动程序。

# selenium-rc - Selenium RC - 执行我的测试脚本后出现空指针异常

> ID：11539309
> 
> 赞同：0
> 
> 时间：2012-07-18T10:29:23.310
> 
> 标签：selenium-rc

我正在使用`assertTrue`网络应用程序测试中的语句，即使文本存在于网络中，它也会返回错误。我怎样才能解决这个问题？

```
public void Test1() throws Exception {
    Selenium selenium = new DefaultSelenium("localhost",1777,"*chrome","http://www.mortgagecalculator.org/");
    selenium.start(); 

   try {     
                 selenium.open("/");
                 Thread.sleep(3000);
                 selenium.windowMaximize();
                     selenium.type("name=param[homevalue]", "400000");
             selenium.type("name=param[principal]", "7888800");
             selenium.select("name=param[rp]", "label=New Purchase");
             selenium.type("name=param[interest_rate]", "8");
             selenium.type("name=param[term]", "35");
             selenium.select("name=param[start_month]", "label=May");
             selenium.select("name=param[start_year]", "label=2006");
             selenium.type("name=param[property_tax]", "7.5");
             selenium.type("name=param[pmi]", "0.8");
             selenium.click("css=input[type=\"submit\"]");
             assertTrue(selenium.isTextPresent("$58,531.06"));
             System.out.println("Assert Statement executed");
             selenium.stop();
    } 
   catch (Exception e) {
        System.out.println("In Mortgage Calculator App exception Happened"); 
                                                 }  
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:25:34.087

我已经对您的测试进行了运行，这对我来说似乎很好，但是我怀疑这与这里的事实有关：

```
selenium.click("css=input[type=\"submit\"]");
assertTrue(selenium.isTextPresent("$58,531.06")); 
```

您没有任何等待，因此只有在页面/结果加载速度足够快以至于测试在移动到 assertTrue 时不会被炸毁时，它才会成功找到“$58,531.06”。

我建议在这里改用“waitForTextPresent”，或者在其中放置一些东西以确保测试可以在您检查结果之前加载结果。

希望有帮助。

# java - Spring 目录监听器

> ID：11539315
> 
> 赞同：3
> 
> 时间：2012-07-18T10:29:42.350
> 
> 标签：java, spring, tomcat, listener

我正在创建一个使用**Apache Tomcat (Latest)**、**Spring 3**、**Struts2**和**Hibernate**的 Web 应用程序。我需要有一个监听器来观察出现的任何新 XML 文件的目录。当 Web 应用程序部署到 Tomcat 上并运行时，它应该继续这样做。

1.  使用这些框架做这样的事情时推荐什么方法？
2.  有没有我可以参考的例子来帮助开始阶段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:37:12.253

尝试 jdk7 [WatchService](https://dzone.com/articles/how-watch-file-system-changes)。我已经完成了一个与您拥有的结构相似的项目。否则你可以尝试使用[`FileAlterationListner`](http://commons.apache.org/io/apidocs/org/apache/commons/io/monitor/FileAlterationObserver.html)from `org.apache.commons.io`。我宁愿选择 jdk7，因为它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:11:11.730

我在其中一个项目中使用[了 JNotify](http://jnotify.sourceforge.net/)，如果无法切换到 JDK 7，它的工作原理就像被迷住了一样。

# iphone - 替换为 view2 后删除视图 1

> ID：11539322
> 
> 赞同：1
> 
> 时间：2012-07-18T10:30:15.073
> 
> 标签：iphone, ios, selector

我有一个小代码来显示图像 1 并在 2 秒后将 image1 替换为 image2 并带有下面的动画

```
UIImageView *view1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 410, 1020, 400)];
UIImage *image = [UIImage imageNamed:@"img.jpeg"];
view1.image = image;
[self.view addSubview:view1];
UIImageView *view2 = [[UIImageView alloc] init ];
view2.frame = CGRectMake(0, 410, 0, 400);
view2.image = [UIImage imageNamed:@"bien.jpeg"];
[self.view addSubview:view2];
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.8];
[UIView setAnimationDelay:2];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(removeView: view1:)];
view2.frame =  CGRectMake(0, 410, 800, 400);
[UIView commitAnimations]; 
```

和函数 removeView 从下面的超级视图中删除 view1：

```
-(void)removeView: (UIImageView *)view1{
[view1 removeFromSuperview];
 } 
```

所以我不知道为什么我从superview中删除view1的功能不起作用，请帮助我！非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:36:37.027

选择器不能传递参数。将您的方法修改为

```
-(void)removeView{
   [view1 removeFromSuperview];
 } 
```

其中“view1”是您的视图的一个实例。

和您的选择器：

```
[UIView setAnimationDidStopSelector:@selector(removeView)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:44:12.990

我建议您使用基于块的动画（自 iOS 4 起可用）。它们更容易使用，并且不需要通过方法和所有这些东西发送参数。例子：

```
UIImageView *view1 = [[UIImageView alloc] init];
//initialize your UIImageView view1
[self.view addSubview:view1];
UIImageView *view2 = [[UIImageView alloc] init];
//initialize your UIImageView view2
[UIView animateWithDuration:2 animations:^{
    //here happens the animation
    [self addSubview:view2];
} completion:^(BOOL finished) {
    //here happens stuff when animation is complete
    [view1 removeFromSuperView];
}]; 
```

记得投票和/或标记为已接受的答案；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:46:14.680

试试这个代码！！

```
UIImageView *view1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 410, 1020, 400)];
UIImage *image = [UIImage imageNamed:@"img.jpeg"];
view1.tag = 1;
view1.image = image;
[self.view addSubview:view1];

UIImageView *view2 = [[UIImageView alloc] init ];
view2.frame = CGRectMake(0, 410, 0, 400);
view2.image = [UIImage imageNamed:@"bien.jpeg"];
[self.view addSubview:view2];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.8];
[UIView setAnimationDelay:2];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(removeView: view1:)];
view2.frame =  CGRectMake(0, 410, 800, 400);
[UIView commitAnimations]; 
```

// 删除视图方法

```
-(void)removeView : (UIImageView *) imgVew {

    if (imgVew.tag == 1)

        [imgVew removeFromSuperView];
} 
```

访问它 -

```
[UIView setAnimationDidStopSelector:@selector(removeView:)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:58:28.157

问题很简单，这个选择器在你的类中**不**存在：`-removeView:view1:`。因此动画完成后没有什么可以回调的。这就是为什么您的`-(void)removeView:(UIImageView *)view1;`方法永远不会被回调的原因。

请，意识到你真正的选择器是`-removeView:`，它不等于`-removeView:view1:`

如果你想通过 传递参数`didStopSelector`，我会有一个坏消息：你**不能**像你在代码中那样做，所以这部分是错误的：

```
// WRONG AT ALL:    
[UIView setAnimationDidStopSelector:@selector(removeView:view1:)];

// PROPER WAY:
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)]; 
```

因为`didStopSelector`必须是具有以下参数的以下类型的选择器。

```
- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context; 
```

你**可以**像这样为你的回调方法传递参数：

```
[UIView beginAnimations:nil context:view1]; // see the context's value 
```

在你的`didStopSelector`你可以以某种方式使用它：

```
- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
    [((UIView *)context) removeFromSuperView];
} 
```

# asp.net - 无法加载文件或程序集，尝试了网上的所有解决方案

> ID：11539323
> 
> 赞同：0
> 
> 时间：2012-07-18T10:30:17.093
> 
> 标签：asp.net, iis

尝试了在网上找到的所有解决方案，但仍然无法修复我的错误：在 64 位 Windows 2008 R2 上，我的错误日志如下：

```
Server Error in '/npp' Application.

    enter code here

Could not load file or assembly 'AjaxControlToolkit' or one of its dependencies. Access is denied.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'AjaxControlToolkit' or one of its dependencies. Access is denied.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'AjaxControlToolkit' could not be loaded.

=== Pre-bind state information ===
LOG: User = Unknown
LOG: DisplayName = AjaxControlToolkit
 (Partial)
LOG: Appbase = file:///C:/inetpub/wwwroot/npp/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\npp\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\inetpub\wwwroot\npp\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/npp/13400f43/eee46b06/AjaxControlToolkit.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/npp/13400f43/eee46b06/AjaxControlToolkit/AjaxControlToolkit.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/npp/bin/AjaxControlToolkit.DLL.
LOG: Using application configuration file: C:\inetpub\wwwroot\npp\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Post-policy reference: AjaxControlToolkit, Version=3.0.30512.27788, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e
ERR: Failed to complete setup of assembly (hr = 0x80070005). Probing terminated.

Stack Trace: 

[FileLoadException: Could not load file or assembly 'AjaxControlToolkit' or one of its dependencies. Access is denied.]

[FileLoadException: Could not load file or assembly 'AjaxControlToolkit, Version=3.0.30512.27788, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' or one of its dependencies. Access is denied.]
   System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
   System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +416
   System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +166
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +190

[ConfigurationErrorsException: Could not load file or assembly 'AjaxControlToolkit, Version=3.0.30512.27788, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' or one of its dependencies. Access is denied.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +11241896
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +388
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +232
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +48
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +210
   System.Web.Compilation.BuildProvidersCompiler..ctor(VirtualPath configPath, Boolean supportLocalization, String outputAssemblyName) +76
   System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +283
   System.Web.Compilation.BuildManager.CompileGlobalAsax() +50
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +676

[HttpException (0x80004005): Could not load file or assembly 'AjaxControlToolkit, Version=3.0.30512.27788, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' or one of its dependencies. Access is denied.]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +76
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +1012
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) +1025

[HttpException (0x80004005): Could not load file or assembly 'AjaxControlToolkit, Version=3.0.30512.27788, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' or one of its dependencies. Access is denied.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11335894
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +88
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4355316 
```

非常感谢您的帮助

我试图授予临时文件权限，授予 iis 文件夹和临时文件上的每个人的权限，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:36:03.423

这似乎是文件系统权限错误，如所示

```
[FileLoadException: Could not load file or assembly 'AjaxControlToolkit' or one of its dependencies. Access is denied.] 
```

该[文档](http://support.microsoft.com/kb/812614)说您需要为以下用户/用户组授予以下文件系统权限。

```
Inetpub\Adminscripts                        Administrators          Full control
Inetpub\wwwroot (or content directories)    Administrators          Full control
Inetpub\wwwroot (or content directories)    System                  Full control
Inetpub\wwwroot (or content directories)    IIS_WPG                 Read, execute
Inetpub\wwwroot (or content directories)    IUSR_MachineName        Read, execute
Inetpub\wwwroot (or content directories)    ASPNET                  Read, execute 
```

# magento - Magento indexController 不会触发

> ID：11539327
> 
> 赞同：0
> 
> 时间：2012-07-18T10:30:31.437
> 
> 标签：magento, controller

我正在研究 Magento 中的 massgrid 选项。问题是我的 indexController 没有被加载。我认为我的类的声明存在问题。

这是我的 config.xml

```
<config>
    <global>
        <blocks>
            <adminhtml>
                <rewrite>
                    <sales_order_grid>Comp_Dhl_Block_Sales_Order_Grid</sales_order_grid>
                </rewrite>
                <events>
                    <core_block_abstract_prepare_layout_before>
                        <observers>
                            <Dhl_core_block_abstract_prepare_layout_before>
                                <class>Dhl/observer</class>
                                <method>addMassAction</method>
                            </Dhl_core_block_abstract_prepare_layout_before>
                        </observers>
                    </core_block_abstract_prepare_layout_before>
                </events>
            </adminhtml>
        </blocks>
        <admin>
        <routers>
            <todhl>
                <use>admin</use>
                <args>
                    <module>Comp_Dhl</module>
                    <frontName>todhl</frontName>
                </args>
            </todhl>
        </routers>
    </admin>
    </global>
</config> 
```

这是我的 Grid.php

```
class Comp_Dhl_Block_Sales_Order_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid
{   
    protected function _prepareMassaction()
    {
        parent::_prepareMassaction();

        $this->getMassactionBlock()->addItem(
            'to_dhl',
            array('label' => $this->__('Sent to [DHL]'),
                  'url'   => $this->getUrl('/*/*/toDhl'),
            )
        );
    }
} 
```

批量选项：“发送到 [DHL]”显示正常。因为我的网址中有这个：`$this->getUrl('/*/*/toDhl')`我必须添加：`public function toDhlAction()`到我的 indexController.php

我的 indexController.php 看起来像：

```
class Comp_Dhl_IndexController extends Mage_Adminhtml_Controller_Action
{
    public function toDhlAction(){      
        mail('to@me.com', 'controller works', 'the mass action controller works');
        $this->_redirect('*/*/index');
    }
} 
```

这就是问题所在，因为我没有收到 indexController.php 应该触发的电子邮件。

有什么想法吗？

# c++ - 带有 C++ 成员初始化的 Objective-C

> ID：11539334
> 
> 赞同：2
> 
> 时间：2012-07-18T10:31:03.547
> 
> 标签：c++, objective-c, constructor, objective-c++

我在我的 Objective-C 类中声明了一个 C++ 对象。

C++ 对象只有一个带有多个参数的构造函数。

在 C++ 代码中，我会将参数解析到包含它的类的初始化列表中的构造函数。

我如何在 Objective-C 中做同样的事情？

当我编译时，我收到一条错误消息，告诉我我的 C++ 对象没有合适的默认构造函数，正如您所期望的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:35:30.467

我认为你不能在 Objective-C 中做类似的事情，因为那里没有构造函数和初始化列表。但是您可以使用`std::shared_ptr`或其他智能指针来存储指向您的类的指针并在`init`方法中创建对象本身

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:35:22.140

您可以将对象更改为此对象类型的（智能）指针。然后，您可以将对象的构建延迟到您认为合适的那一刻。

# trac - 如何删除从 Trac 中的全局配置继承的自定义工单字段？

> ID：11539337
> 
> 赞同：1
> 
> 时间：2012-07-18T10:31:16.663
> 
> 标签：trac

我在所有 Trac 环境继承的全局配置中定义了一些自定义工单字段。现在我只想为单个环境删除其中的一些（但不必取消继承全局配置，它设置的不仅仅是自定义字段）。或许显而易见的方式

```
[ticket-custom]
mycustomfield = 
```

不工作。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:36:24.630

不，一般来说继承没有限制。因此，一旦配置部分被继承，您就无法阻止其传播。

您可以构建一个稍微碎片化的继承而不是放弃继承以仍然达到您的目标：

**global_trac.ini：**

```
all the basic, common stuff

[ticket-custom]
put reduced, common set of custom fields here 
```

**global_trac_with_custom_fields.ini：**

```
[inherit]
file = ../global_trac.ini

[ticket-custom]
put full set of custom fields here 
```

**your_special_trac_env/conf/trac.ini：**

```
[inherit]
file = ../global_trac.ini 
```

**some_other_trac_env/conf/trac.ini：**

```
[inherit]
file = ../global_trac_with_custom_fields.ini 
```

# php - 如何处理数组中的空值

> ID：11539343
> 
> 赞同：0
> 
> 时间：2012-07-18T10:31:46.087
> 
> 标签：php, mysql

我有一个疑问

```
 $sql="SELECT mstEmp.empname,mstEmp.cardno, InDate, dailyattendance.InTime,dailyattendance.OutTime, mstEmp.teamtype FROM mstEmp left JOIN dailyattendance ON (InDate BETWEEN '$from' AND '$to' )  AND (dailyattendance.HolderName = mstEmp.empname ) WHERE mstEmp.teamtype = '$chk' ORDER BY InDate DESC"; 
```

现在当我以 print_r($row) 运行它时，它给我的数组为 [0]=absbd [1]=34 [2]= [3]= [4]= 现在我想要 [2] 这是要显示的日期日期，但它给了我垃圾价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:49:47.390

试试这个..,

```
if(!is_null($var)){
    // Do ur stuff
} 
```

参考[is_null](http://php.net/manual/en/function.is-null.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:34:27.567

您可以明确检查 null ：

```
if($row[2] === null) {
    // Special behavior for null
] else {
    // Handle the date normally
} 
```

# android - 是否可以使用视图而不是 UI 线程？

> ID：11539346
> 
> 赞同：0
> 
> 时间：2012-07-18T10:32:02.227
> 
> 标签：android

我是安卓新手。我对 SurfaceView 和 View 有一点困惑......

据我所知.. 视图都绘制在同一个 GUI 线程上，该线程也用于所有用户交互。

我想知道是否可以为处理创建单独的线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:37:50.157

取决于您在处理中定义的内容。如果在处理中您的意思是进行计算、下载等，那么可以。

如果通过处理您的意思是拆分控制和查看，那么不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:38:37.333

如果您的处理意味着在 GUI 线程之外处理 GUI 事物，那么这是不可能的，因为视图与 GUI 线程或 Android 组件活动耦合。但是即使您的活动完成，非 GUI 线程仍然存在，并且它可能会泄漏对视图的引用。因此，几乎所有的编程模型都支持它。假设如果您在非 GUI 线程中下载一些值，然后更新您的 GUI 视图，并且在 bwteen 中您的屏幕方向发生并且您的活动及其视图被重新创建，但非 GUI 线程直到现在仍保留对旧视图的引用。这可以创建不被垃圾收集器收集的旧视图并泄漏内存。

# java - 如何将索引添加到@ManyToOne 关系

> ID：11539349
> 
> 赞同：1
> 
> 时间：2012-07-18T10:32:13.403
> 
> 标签：java, hibernate

我在对象中有@ManyToOne 关系，而在“一个”方面我没有@OneToMany 关系在这种情况下如何添加@IndexColumn？我可以在@ONEToOne 关系中添加@indexColumn 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:45:07.900

你的问题没有多大意义。IndexColumn 用于在 OneToMany 或 ManyToMany 关联中为 List 的元素分配索引。您只有一个 ManyToOne 关联，因此根本没有列表，因此不需要索引列。

我可以想象你会想要执行一个查询，返回父级的所有子级，并希望将它们放在特定索引处的列表中。在这种情况下，您需要为您的子实体添加一个持久索引字段，执行查询，按索引对子实体进行排序，然后自己创建索引列表：

```
List<Child> sortedList = 
    session.createQuery("select c from Child c where c.parent = :parent order by c.index")
           .setParameter("parent, parent)
           .list();
List<Child> indexedList = new ArrayList<Child>();
for (Child child : sortedList) {
    indexedList.ensureCapacity(child.getIndex() + 1);
    indexedList.set(child.getIndex(), child);
} 
```

对于 OneToOne 关联，IndexColumn 真的没有任何意义。

# plone - 在 Plone 4.1 中可以“自动”分类文件夹的所有内容吗？

> ID：11539352
> 
> 赞同：1
> 
> 时间：2012-07-18T10:32:24.923
> 
> 标签：plone

如果我创建一个文件夹，则该特定文件夹中的所有内容项（即文件、文件夹、图像）都应**自动**分类在该文件夹下。因此，当我创建一个集合以查看文件夹的所有内容时，只有那些内容应该在集合中可见。我不需要用标签标记每个内容并创建集合，即应该为其内容创建一个自动标签（文件夹内容的固有标签）。如何在 Plone 4.1 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:39:59.323

我们需要使用 Location 并将子文件夹（如果需要）添加为集合标准的 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:13:28.437

创建（或编辑）集合时，您可以添加位置条件，并指定文件夹的路径。保存后，集合将仅显示该文件夹内的内容（并且，除了此条件之外，您添加为该集合过滤器的所有其他条件）。

# sql - 来自 Excel 的“反透视”数据

> ID：11539355
> 
> 赞同：0
> 
> 时间：2012-07-18T10:32:27.007
> 
> 标签：sql, excel, ms-access, unpivot

我需要清理一些丑陋的数据。我所拥有的类似于

```
ID,someFields,Supplier,Supplier_1,Supplier_2,Price,Price_1,Price_2,Weight; Weight_1,Weight_2 
```

等等。字段最多命名为 _9，实际上有 8 个不同的字段，分别命名为 _1 到 _9。当然 Price_1 是为 Supplier_1 等等。

我现在想取消转向

```
ID,someFields,Supplier,Price,Weight 
```

通过复制 ID 和 somefields。一个重要的注意事项是那些 _1 到 _9 字段可以为空，实际上它们中的大多数是空的。

我有的工具。Excel MS Access 可能（错误）使用我有权访问的 oracle 架构...

我发现这个 [如何在 Access 2010 中模拟 UNPIVOT？](https://stackoverflow.com/questions/7255423/how-to-simulate-unpivot-in-access-2010)

但是，这也会增加只有 1 个供应商的行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:59:48.777

您可以使用联合查询。

```
 SELECT * INTO NewTable FROM
  (SELECT ID,someFields,Supplier,Price,Weight FROM Table
   WHERE SomeField Is Not Null
   UNION ALL
   SELECT ID,someFields1,Supplier1,Price1,Weight1 FROM Table
   WHERE SomeField1 Is Not Null
   <...>) 
```

# android - Android 3.x++ + 操作栏 + 全屏

> ID：11539357
> 
> 赞同：0
> 
> 时间：2012-07-18T10:32:44.807
> 
> 标签：android, android-layout, android-theme

我在stackoverflow中浏览了几篇文章，但我仍然无法得到一个简单问题的答案：

是否可以使用操作栏在 Android 3.x 及更高版本中创建全屏应用程序？

使用`@android:style/Theme.Holo.Light.DarkActionBar`

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

没有成功。

使用全屏主题，通过代码添加操作栏也没有这样做。

android不允许两者同时发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T15:11:53.527

这适用于所有 android 版本（从 4.0 到 4.2 测试）。我确实使用 actionbarsherlock，但它使用 4.0+ 上的本机实现。

```
@Override
    protected void onResume() {
        super.onResume();
        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
                getWindow().setFlags(
                        WindowManager.LayoutParams.FLAG_FULLSCREEN,
                        WindowManager.LayoutParams.FLAG_FULLSCREEN);

            }
        }, 1000);

    } 
```

似乎也可以在 XML 中添加它！这样就更好了，因为它不会导致通知区域的显示和隐藏。没有在任何地方看到此代码。

```
<style name="Theme.MyTheme" parent="@style/Theme.PICK_A_PARENT_THEME_LIKE_ACTIONBAR">         
        <item name="android:windowFullscreen">true</item>
    </style> 
```

使用 actionbarsherlock 和一个新创建的非 actionbarsherlock 项目测试了 XML。两者都可以正常工作（在 4.0.3 上）。下面是新鲜的非 abs 应用程序。

![在此处输入图像描述](../Images/a1513e49ca4fcfb7f92e5561f4d638ef.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T16:08:29.753

是的，差不多。对我有用的是：在设置内容视图之前的 onCreate 方法的 Activity 中：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
requestWindowFeature(Window.FEATURE_ACTION_BAR);
requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY); 
```

这是在片段部分，但也应该在活动中工作：

```
 getActivity().getActionBar().hide();
 getView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

某些设备只会使导航按钮变暗。导航按钮的空间不会被使用，但您可以使用许多其他视图常量。

亲切的问候

# android - android中选项卡布局中的进度对话框

> ID：11539358
> 
> 赞同：0
> 
> 时间：2012-07-18T10:32:52.780
> 
> 标签：android, android-layout, android-intent, android-progressbar

我正在处理选项卡布局和进度对话框。当用户进入选项卡布局以及用户更改选项卡时，我想显示五秒钟的进度对话框。

我使用以下相同的代码来显示两种情况下的进度对话框。

```
public class TabLayoutActivity extends TabActivity {
    ProgressDialog progressDialog;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tablayoutview);
        progressDialog = ProgressDialog.show(TabLayoutActivity.this, "",
                "Loading. Please wait...");
        new Thread() {
            public void run() {
                try {
                    Thread.sleep(5000);
                    TabHost tabHost = getTabHost();
                    TabHost.TabSpec tabSpec;
                    Intent intent = new Intent().setClass(
                            getApplicationContext(), FirstTabActivity.class);
                    tabSpec = tabHost.newTabSpec("first").setIndicator("First")
                            .setContent(intent);
                    tabHost.addTab(tabSpec);

                    intent = new Intent().setClass(getApplicationContext(),
                            SecondTabActivity.class);
                    tabSpec = tabHost.newTabSpec("second")
                            .setIndicator("Second").setContent(intent);
                    tabHost.addTab(tabSpec);
                } catch (Exception e) {
                    Log.e("tag", e.getMessage());
                }
                progressDialog.dismiss();
            }
        }.start();
    }
} 
```

进度对话框工作正常，但选项卡的内容不显示。它显示以下错误。

“只有创建视图层次结构的原始线程才能触及它的视图”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:37:36.497

试试这个

```
public class TabLayoutActivity extends TabActivity {
ProgressDialog progressDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tablayoutview);
    progressDialog = ProgressDialog.show(TabLayoutActivity.this, "",
            "Loading. Please wait...");
    new Thread() {
        public void run() {
            try {
                Thread.sleep(5000);
 TabLayoutActivity .this.runOnUiThread(new Runnable() {

    @Override
    public void run() {
        TabHost tabHost = getTabHost();
                TabHost.TabSpec tabSpec;
                Intent intent = new Intent().setClass(
                        getApplicationContext(), FirstTabActivity.class);
                tabSpec = tabHost.newTabSpec("first").setIndicator("First")
                        .setContent(intent);
                tabHost.addTab(tabSpec);

                intent = new Intent().setClass(getApplicationContext(),
                        SecondTabActivity.class);
                tabSpec = tabHost.newTabSpec("second")
                        .setIndicator("Second").setContent(intent);
                tabHost.addTab(tabSpec);
              progressDialog.dismiss();
    }
});

            } catch (Exception e) {
                Log.e("tag", e.getMessage());
            }

        }
    }.start();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:37:02.620

我的猜测是它崩溃了，`progressDialog.dismiss()`因为您试图从非 UI 线程中删除。为了防止这种行为，您应该像这样在 UI/主线程中运行它：

```
runOnUiThread(new Runnable() {
            public void run() {
                progressDialog.dismiss();
            }
        }); 
```

# java - Java nio 在选择器上读取 SocketChannel

> ID：11539361
> 
> 赞同：1
> 
> 时间：2012-07-18T10:32:59.977
> 
> 标签：java, nio, socketchannel

我有一个小型服务器应用程序，它接收来自多个客户端的连接。客户端将连接，发送消息并断开连接，没有返回响应。

我正在使用 ServerSocketChannel 来监听连接。我使用选择器收到新连接的通知，发生这种情况时，我使用选择器注册 SocketChannel`SelectionKey.OP_READ`

我不确定的部分是我何时收到通知数据可供阅读。我的 SocketChannels 处于非阻塞模式。我调用`channel.read(buffer)`SocketChannel 以从 javadoc 读取字节缓冲区，我应该重复调用它，直到我得到一个表示流结束的 -1。但是，我不确定在再次调用 read 之前是否应该等待选择器再次通知我。那是：

*   选择器通知我数据可用。
*   我叫读
*   然后我应该再次调用 read 直到返回 -1 还是让选择器通知我然后再次调用 read

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:39:20.857

> 从 javadoc 中读取，我应该重复调用它，直到我得到一个 -1 表示流结束。

它没有说任何这样的事情。

如果您处于非阻塞模式，则可以读取直到它返回 -1*或 zero*。如果它返回零，则说明套接字接收缓冲区中没有待处理的数据，因此您应该返回到选择循环。如果它返回-1，就是这样，完成，完成，finito，关闭套接字通道并相应地继续。

# javascript - Backbone.js 添加到 Collection

> ID：11539362
> 
> 赞同：0
> 
> 时间：2012-07-18T10:33:00.383
> 
> 标签：javascript, json, backbone.js

在 Backbone 中，我有一个集合，其中填充了一些 JSON 数据，如下所示。

```
[
{
    "test1": {
        "fistName": "test",
        "lastName": "example"
    },
    "test2": {
        "fistName": "test",
        "lastName": "example"
    }
},
{
    "test1": {
        "fistName": "test",
        "fistName": "example"
    },
    "test2": {
        "fistName": "test",
        "fistName": "example"
    }
}, 
```

]

目前我正在尝试向包含上述数据的集合添加一个新模型。

这是模型。

```
Test = Backbone.Model.extend({
defaults : {
        test1: {
            firstName: null,
            lastName: null
        },
        test2: {
            firstName: null,
            lastName: null
        }
    }, 
```

});

下面是我正在尝试的

```
var test = new Test({test1: {firstName: $("#test1 option:selected").val(), score: $("#test1lastName").val()}}, {test2: {firstName: $("#test2 option:selected").val(), score: $("#test2lastName").val()}});

myCollection.add(test); 
```

然而，这样做只会填充 test1 数据而不是 test2 数据。将 test1 和 test2 数据添加到模型中的正确方法是什么，然后可以将其添加到集合中。

谢谢

更新

只是为了澄清，测试1和2不是单独的对象，它们彼此相关并且需要在同一个模型中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:37:37.293

编辑，取决于您的模型是如何定义的，如果您将其格式化如下，您可能能够更好地调试。

```
var test = new TFS.Test({
    test1: {
        firstName: $("#test1 option:selected").val(),,
        lastName: '', // code for last name? 
        score: $("#test1lastName").val()
    },
    test2: {
        firstName: $("#test2 option:selected").val(),
        lastName: '', 
        score: $("#test2lastName").val()
    }
});

myCollection.add(test); 
```

I might be able to offer you a little more help if you give a better view of the entire action/process - i.e. what is triggering the creation of these models? Could there be a problem with jQuery, and your document not being ready?

# oauth-2.0 - 无法访问谷歌应用 api 的 oAuth2

> ID：11539365
> 
> 赞同：2
> 
> 时间：2012-07-18T10:33:11.523
> 
> 标签：oauth-2.0

每当我尝试访问时，我都会收到以下错误`credential.refreshToken()`：

```
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request { "error" : "invalid_grant" }
at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:>103)
at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:508)
at com.intuit.dmx.storage.google.StorageAuthenticationServiceImpl.authenticateUser(StorageAut>henticationServiceImpl.java:51)
... 2 more 
```

我不是每次都得到这个例外。有时它工作正常，即我可以获得*访问令牌*，有时它会抛出异常。

# url - 输入浏览器 URL 时会发生什么？

> ID：11539366
> 
> 赞同：0
> 
> 时间：2012-07-18T10:33:11.927
> 
> 标签：url, networking

我在面试中被问过几次这个问题，每次都无法给出明确的答案。所以我的问题是，当我们在浏览器中输入 URL 时会发生什么我知道这个 URL 是通过 DNS 转换为 IP 并通过 GET 方法获得的。但是细节上发生了什么？有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:18:27.893

URL 有几个部分表示不同的东西，例如，当您搜索“URL 的部分”时，您可以阅读它。

基本上当你有一个像这样的 URL 时：

[http://server.domain.com/path/to/script.php?var=value&var2=value2](http://server.domain.com/path/to/script.php?var=value&var2=value2)

那么 http 是用于传输的协议（可以是 http、https、ftp 或其他），server.domain.com 是要联系的服务器的 DNS（使用 DNS 解析），它本身由部分组成（ com 是 1 级域，域是 2 级，服务器是 3 级 - 阅读 DNS 解析以了解更多信息）

“/path/to/script.php?var=value&var2=value2”部分被交给服务器，其中：“/path/to/”是被调用的文档/脚本的路径 “script.php”是脚本和 "?var=value&var2=value2" 是传递给脚本的参数：var 将具有 "value" 的值和 "value2" 的 var2

这就是整个过程:)

# mysql - 将 twiki 帖子数据存储在 mysql 数据库中

> ID：11539373
> 
> 赞同：1
> 
> 时间：2012-07-18T10:33:31.920
> 
> 标签：mysql, twiki

TWiki 是一个很好的 wiki 项目。我已经实现并使用了。默认情况下，Twiki 将数据存储在扩展名为 .txt 的文件中，是否有任何插件/方法可以将帖子数据存储在 mysql 数据库中？

如何将数据存储在 TWiki 的 mysql 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:09:12.370

可悲的是没有。

我为 foswiki（一个 TWiki 分支）[http://foswiki.org/Development/MongoDBPlugin](http://foswiki.org/Development/MongoDBPlugin)构建了一个 MongoDB 后端，并取得了显著成果，Crawford 和我开始为它开发一个数据库后端，但工作尚未完成。

我想最大的问题是 - 你需要它吗，你是否需要它来帮助实现它:)

文

# mysql - mysql插入成功但不可见

> ID：11539375
> 
> 赞同：0
> 
> 时间：2012-07-18T10:33:39.393
> 
> 标签：mysql

我有一个带有名为游戏的表的数据库。人们可以在应用程序中相互发送邀请，然后在此表中插入一行。

最近它停止工作了。当我插入新行时，php（以及手动插入时的 phpmyadmin）说更新成功（查询函数返回 true），但我在表中找不到新插入的行:(

我真的不知道可能是什么原因造成的。我已经检查了权限并重新启动了服务器，但这并没有解决问题。

该表具有以下列：

```
id (int)
black (varchar)
white (varchar)
onturn (varchar)
gamestarted (bool)
inviter (varchar)
opponent (varchar)
field (varchar)
timestarted (datetime)
lastmove (datetime)
lastmove_pushsent (bool) 
```

我正在尝试的查询是：

```
$query = "INSERT INTO games VALUES ('','','','','0','$loginName','$opponent','11111111111111111111000000000022222222222222222222','$timeInvite','','')";
$this->db->query($query); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:31:06.013

我已经通过从当前表中创建一个 .sql 文件、删除表、创建一个新表并将数据复制到该新表中来解决它。我仍然不确定为什么新行没有出现。大家感谢他们的意见！:)

# java - jboss 7.1.1 上的集群 TimerService？

> ID：11539377
> 
> 赞同：3
> 
> 时间：2012-07-18T10:33:46.630
> 
> 标签：java, jakarta-ee, jboss7.x

我正在寻找一种方法来正确集群使用计时器的 Java EE 应用程序。通过适当的集群，我的意思是我正在寻找以下功能：

1.  计时器执行应回退到其他集群节点。我的意思是节点 A 上的一些 EJB 创建了一个计时器：
    `timerService.createIntervalTimer(/* every 10 seconds */)`
    然后离线（崩溃）超时调用将开始在节点 B 上触发（部署相同应用程序的其他一些集群节点）

2.  计时器应该可以跨集群访问。我的意思是，如果 EJB X 创建了一个在节点 A 上运行的计时器，那么在集群节点 B 上运行的同一个 EJB X（显然是同一个类）可以通过执行类似的操作来取消该计时器
    `timerService.getTimers().iterator().next().cancel();`

3.  计时器执行可以分布在整个集群中 - 例如，如果我的超时方法是一些我没有在 10 秒内完成的长时间计算（当计时器下一次到期时），我希望下一次超时调用发生在其他一些上，而不是 - as-busy 节点。

显然这是我理想的一组功能，但任何指向正确方向的指针都会受到欢迎。

# birt - Web 应用程序和 BIRT

> ID：11539379
> 
> 赞同：0
> 
> 时间：2012-07-18T10:33:49.283
> 
> 标签：birt

我对 BIRT 很陌生。我没有得到任何在 JSP 中使用 BIRT 的基本教程。在我的应用程序中：客户将发送一个参数，使用从 DB 获取的信息生成完整的报告。谁能帮我指导一个教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:15:53.837

首先用你的查询设计你的报告......如果你想从一个表中选择一个特定的名字，例如：select * from student_name ..像这样你必须在之后设计你的报告
你必须绑定你的值，即你想要你的名字添加如下所示

url = "$report_url/frameset?__report=ur_report.rptdesign&ur_report_parameter="+query 这里的查询意味着您通过 javascript 或其他方式（如...
var query = 'where id= '+ur 文本框 id .value ('where id = 1')
在您的报告中您必须为此网址添加一个参数，例如（ur_report_parameter）

最后，您必须将这些 url 参数从页面绑定到您的报告参数，为此您必须单击您的数据集并在该选择下拉列表中选择脚本（布局、母版页、SCRIPT、xmlsource、预览），然后像这样添加您的脚本.queryText = this.queryText+" "+("ur_report_parameter"); 注意：将您的查询绑定到数据集时，您必须使用（this.queryText）然后您将获得结果，在这里您可以编写自己的 javascript...

# flash - 为新项目选择正确的客户端技术（框编辑器）

> ID：11539382
> 
> 赞同：0
> 
> 时间：2012-07-18T10:34:03.463
> 
> 标签：flash, apache-flex, html

我需要开发一个新工具，我们称之为盒子编辑器：用户可以添加/删除盒子和添加/删除盒子之间的连接，用户还可以编辑盒子内部。框编辑器应该类似于[此处](http://didreseller.com/)的编辑器（参见视频）。

我担心的是选择正确的技术。这是我的问题。

1.  我是否正确理解对象动画（对于我的框编辑器）MXML+AS3 不是一个选项？Flash（我的意思是没有 mxml 的 AS3）对我来说是更方便的工具吗？

2.  HTML5 现在变得非常流行。不过，我在 HTML5 方面不是很擅长。在 HTML5 中编写类似提供的示例会很困难吗？HTML5 是比 Flash 更好的选择吗？无论如何，很高兴看到在 HTML5 示例中执行类似框编辑器的示例。

请注意，未来的应用程序不需要在移动设备上启动。因此，“iPad 上没有 Flash”在这里并不是很强的论据！

先感谢您！请不要害羞，任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:05:29.807

> 我是否正确理解对象动画（对于我的框编辑器）Flex 不是一个选项？Flash（我的意思是没有 mxml 的 AS3）对我来说是更方便的工具吗？

你不可以。Flex 是建立在 AS3 之上的框架。AS3 是 Fl​​ash（和 AIR）的语言。在普通 AS3 中可以做的任何事情都可以在 Flex 中做；包括动画。Flex 提供了一些过渡和效果类，但您也可以编写自己的或使用其他人编写的。

```
Please note that future app do not need to be launched on mobile devices. So 'there's no Flash on iPad' is not very strong argument here! 
```

如果你想在 iPad 上运行基于浏览器的应用程序，那么你不能使用 Flash/Flex/AS3。但是，您可以使用 Flex/Flash/AS3 技术来创建原生 iOS 应用程序。

# android - 原生android开发的安全字符串函数？

> ID：11539384
> 
> 赞同：0
> 
> 时间：2012-07-18T10:34:11.663
> 
> 标签：android, c, security, android-ndk

我想知道 - 在 android 上开发其他本机库时，android 库提供的功能有多“安全”？有微软的 strsafe.h 或 bstring 之类的东西吗？或者那些可以移植过来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:42:25.793

通常，您可以使用不安全函数的安全变体来确保在引入难以检测的错误之前通常检测和处理任何操作问题，这些错误只是在稍后执行时才注意到。如果我正确理解您的问题，您可能希望查看诸如 snprintf 代替 printf、strncat 代替 strcat，以及在创建遵循“成功或死亡”约定的字符数组时使用 malloc 的变体。

我发现这些参考资料在用 C for Android 编码时很有帮助（我知道本机库缺少一点）。

[http://www.cplusplus.com/reference/clibrary/cstring/](http://www.cplusplus.com/reference/clibrary/cstring/)

[http://en.wikipedia.org/wiki/C_string_handling#Overview_of_functions](http://en.wikipedia.org/wiki/C_string_handling#Overview_of_functions)

使用需要额外信息的变体，例如最大缓冲区大小或在失败时触发容易发现的错误，通常有助于避免可能在以后造成麻烦的细微错误。

# android - 使用 FragmentManager 从活动中访问片段方法

> ID：11539385
> 
> 赞同：5
> 
> 时间：2012-07-18T10:34:12.497
> 
> 标签：android, android-fragments

在下面的方法中，我试图从活动中调用片段方法。此方法所在的类扩展了 FragmentActivity。我对片段的所有导入都应该来自 android.support.v4 吗？错误在最后一行“无法从 Fragment 转换为 NasaDailyImage”有什么想法吗？

```
 public void onRefresh(View view){
       android.app.FragmentManager fragmentManager=getFragmentManager();
       NasaDailyImage NasaDailyFragment;
       NasaDailyFragment=(NasaDailyImage)fragmentManager.findFragmentById(R.id.fragment_iotd);  //cannot cast from Fragment to NasaDailyImage

 //NasaDailyFragment.onRefresh();
   } 
```

到目前为止，我对 FragmentManager 的所有导入都来自 android.support.v4.app，因为当我导入 android.support.v4.app.FragmentManager 而不是 android.app.FragmentManager 时 getFragmentManager() 方法不更长的可用时间。我试图通过创建一个 android.support.v4.app.FragmentManager() 对象来解决这个问题，但我收到一个错误，说我无法实例化它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T10:39:30.130

你试过这个[`public FragmentManager getSupportFragmentManager ()`](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportFragmentManager%28%29)方法吗？

# ios - 转换运行时属性大小、点、矩形

> ID：11539388
> 
> 赞同：2
> 
> 时间：2012-07-18T10:34:28.193
> 
> 标签：ios, interface-builder, ios5.1

我在 IB 中为我的自定义类使用“用户定义的运行时属性”。

我在以下位置捕获值：-(void) setValue:(id)value forKey:(NSString *)key

如何转换大小、点和矩形的值？

NSLog(@"值 %@", 值)

对于大小写：“值 NSSize：{10, 10}”

但是 NSSize 不只是 OSX 的一种数据类型吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:42:15.373

这实际上是苹果框架中的一个错误。描述只是输出 NSSize 而不是 CGSize。你可以像这样使用它`[value CGSizeValue]`等等。NSSize 甚至在 iOS 上都不存在，所以你不可能处理它。

你可以用一行来验证这一点->`NSLog(@"%@", [NSValue valueWithCGSize:CGSizeMake(10, 10)]);`

# visual-studio-2010 - Windows Azure - 当前服务模型不同步

> ID：11539389
> 
> 赞同：56
> 
> 时间：2012-07-18T10:34:30.190
> 
> 标签：visual-studio-2010, azure, azure-web-roles

当我在本地开发人员结构上运行 Windows Azure Web 角色时，我收到以下错误：

> 当前的服务模型不同步。确保服务配置和定义文件都有效。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-18T10:39:15.980

我的一位同事遇到了这个问题，经过一番尝试后，问题是两个服务配置文件（云和本地）具有不同数量的设置。

当他更新配置文件以使它们同步时，一切正常。

一个提示是使用 Visual Studio 中的 GUI 同时向两者添加新设置。可以通过右键单击 Web 角色和选择属性来访问 GUI。这应该会打开一个窗口。单击左侧的设置选项卡。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-21T11:57:07.423

对我来说，这是由于我的天蓝色项目已从一台 PC 复制到另一台 PC（在此过程中从 Win 7 到 Win 8.1）。我在两者上都使用 VS 2013 社区版，但我已经从 Win7 上的 Azure 2.4 升级到 Win 8.1 机器上的 Azure 2.5。

如果您卸载 azure 项目并编辑 csproj 文件，您只需要进行小编辑（例如添加评论）并保存它，因此它会自行重新编写。这在我的情况下修复了它（我花了很长时间检查 CSDEF 和 CSCFG 文件中的错误）。一旦我重新保存了 csproj 文件，它就可以正常工作了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-16T14:07:38.203

我按照这里的所有答案进行了操作，但最终仍然无法正常工作，我重新启动了 Visual Studio 并成功了。

我相信解决方案是这里的一个或多个答案+重新启动VS的组合。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-08T12:50:29.247

这发生在我身上，因为我的一个云配置文件 (.cscfg) 缺少一些在 ServiceDefinition.csdef 中定义的键值对。

手动检查文件很痛苦。有一种简单的方法可以发现差异：

1.  在解决方案资源管理器中，右键单击构成云服务的角色之一，然后单击上下文菜单中的“属性”。

    ![在此处输入图像描述](../Images/cecaab8b56c8222bf549f623f7e73abe.png)

2.  角色属性窗口将打开灰色并显示一条错误消息：

    > “无效的服务定义或服务配置。有关详细信息，请参阅错误列表”。

3.  打开错误列表窗口，在某些情况下，您应该能够看到特定差异的列表，其中包含文件和属性名称。

    ![在此处输入图像描述](../Images/a2738fc69c3e456dee655d9aaac0cbbb.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-04-26T11:09:07.203

对我有用的是：

1.  确保云服务`.cscfg`和`.Local.cscfg`文件是相同的（除非您`Local.cscfg`出于调试目的需要有一些差异），
2.  确保`.csdef`文件具有与文件匹配的定义，`.cscfg`然后
3.  关闭项目并删除其 Cloud Services`.ccproj.user`文件。

重新加载项目后，一切正常。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-19T06:32:53.220

当服务配置中没有实际故障时，可能会发生该错误。如果它发生并且一切似乎都正确，而不是重新启动 Visual Studio，只需卸载 azurecloud 项目（右键单击：卸载 proecjt

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-17T10:23:51.003

请交叉检查您的`ServiceConfiguration.Cloud.cscfg`和`ServiceConfiguration.Local.cscfg`文件。我的问题是，我添加了一个配置，`Local.cscfg`但忘记添加相同的`Cloud.cscfg`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-18T12:38:51.033

My problem was incorrect certificate definition in csdef file.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-11T11:10:04.767

对我来说，问题是我使用的 Wifi 阻止了 Azure 正在使用的端口，改变 Wifi 解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-17T14:08:46.637

Had this issue - no errors though. I have found that for some bizarre reason the if the setting:

```
<Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="UseDevelopmentStorage=true" /> 
```

was commented out, then the workerrole would not launch.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-06T23:27:18.740

对我来说，问题原来是`vmName`我在各种环境中分配给我的角色之一的值之间的不一致。我有一个用于我的开发、测试和生产环境的 *.cscfg 文件。其中每一个都有一个角色定义，应该是

```
 <Role name="HardWorker" vmName="SomeName">...</Role> 
```

但有一个条目

```
 <Role name="HardWorker" vmName="SomeOtherName">...</Role> 
```

显然，这足以触发错误。

# asp.net - 徽标未出现在 ASP.net 网络表单标题中的某些页面上

> ID：11539393
> 
> 赞同：0
> 
> 时间：2012-07-18T10:34:57.810
> 
> 标签：asp.net, html, css

我会尽力解释这个..

在 site.master 中，我像这样在标题中添加了一个徽标。

```
<div class="title">
               <img alt="" class="style1" src="Images/logo.png" />     
</div> 
```

当 url 是帐户的一部分时，徽标在所有接受的页面中都可以正常显示。

例如..

“http://localhost:54341/Sitename/mypage.aspx”（显示正常）

然而

“http://localhost:54341/Sitename/Account/Register.aspx”（不显示）

我猜它是因为它位于父文件夹（图像文件）中。

有没有更好的办法？

编辑：图像文件夹位于顶层

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:37:06.667

尝试使用相对于应用程序根目录的相对路径：

```
 <img alt="" class="style1" runat="server" src="~/Images/logo.png" /> 
```

**解释：**

ASP.NET 包括 Web 应用程序根运算符 (~)，您可以在指定服务器控件中的路径时使用它。ASP.NET 将 ~ 运算符解析为当前应用程序的根。您可以将 ~ 运算符与文件夹结合使用，以指定基于当前根目录的路径。

以下示例显示使用 Image 服务器控件时用于指定图像的根相对路径的 ~ 运算符。在此示例中，图像文件是从位于 Web 应用程序根目录下的 Images 文件夹中读取的，无论网页在网站中的位置。

```
<asp:image runat="server" id="Image1"
  ImageUrl="~/Images/SampleImage.jpg" /> 
```

您可以在服务器控件中的任何与路径相关的属性中使用 ~ 运算符。**~ 运算符仅在服务器控件和服务器代码中被识别。您不能将 ~ 运算符用于客户端元素。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:53:45.187

This should do it...

```
 <img alt="" class="style1" src="<%=ResolveClientUrl("~/Images/logo.png")%>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:04:02.053

@Kevin Main suggested : You need to put runat="server" on the image for this to work.. this worked a treat

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T10:39:24.913

这将适用于`localhost:54341/Sitename/Account/Register.aspx`

```
<img alt="" class="style1" src="../Images/logo.png" /> 
```

# php - 用户登录/记住我/禁止系统

> ID：11539397
> 
> 赞同：0
> 
> 时间：2012-07-18T10:35:09.270
> 
> 标签：php

我目前拥有它，当用户登录时，他们的用户名和用户 ID 会保存在 cookie 中。由于这不是最安全的方法，我现在打算改变方法；

当用户登录时，cookie 中会保存一个唯一的令牌。用户名、用户 ID、禁止布尔值和唯一令牌存储在会话中。cookie 中的令牌必须与要登录的会话中的令牌相匹配。

我考虑过将令牌存储在数据库中吗？在我的代码中很多时候我很快就需要用户名和用户 ID，因此存储在会话中对我来说是最合乎逻辑的想法，而不是总是查询数据库。

无论如何，我的方法合适吗？如果没有，什么是行之有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:06:07.250

你的方法听起来很合适。我不清楚您计划将会话对象存储在哪里，但我认为将其存储在数据库的会话表中是可以的。确实，这需要数据库查询以在呈现每个页面之前从数据库中检索会话（例如，如果会话令牌错误，您可能希望重定向到登录页面），但根据我的经验，这不是性能问题. 作为奖励，一旦您有了会话表，您就可以在其上运行有趣的查询来跟踪 Web 应用程序的使用情况。

[我的Programming PHP](http://shop.oreilly.com/product/9781565926103.do)副本说“使用 PHP 维护状态的最佳方法是使用内置的会话跟踪系统。” 在编写自己的代码之前，您应该考虑到这一点。

无论您采用哪种方法，您都应该确保会话令牌是随机生成的，并在合理的时间后过期。否则，攻击者可以通过猜测来伪造会话令牌，或者窃取其他人的会话令牌并劫持他们的会话。

# visual-studio-2010 - 视觉工作室突出显示空格/括号之间的水平线

> ID：11539398
> 
> 赞同：1
> 
> 时间：2012-07-18T10:35:11.910
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

当我的课程在这两个括号之间时，我想在我的 Visual Studio 2010 中的括号之间显示一条垂直线，在行号旁边。

我已经启用了该选项，但不知何故它消失了。

编辑：没有人使用该功能吗？调试时非常好的事情之一

**没人用这个功能吗？？**

编辑：最后一推！！必须有一种方法可以查看括号之间的空格在哪里开始和结束。

编辑：这是一张图片![在此处输入图像描述](../Images/8e72b40125e6e98a800f722a0e060a81.png)

编辑：**我还没有找到我要找的东西**。VS 是如此强大，必须在某个地方提供一个选项或插件。当您可以看到`{`开始和结束的位置时，它非常有用`}`。

任何人的线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:22:53.130

自 2008 年以来我还没有看到水平线功能。我讨厌它，所以我也没有一直在寻找它。

但是，当您的光标位于括号上时，您应该能够看到括号被突出显示。如果没有，也许您已经更改了主题或`Options`菜单中的某些颜色。

这是您应该尝试的：

`Tools ->`
`Options(down at the bottom of the drop-down) ->`
`Environment ->`
`Fonts and Colors`

确保`Show settings for:`选择器显示`Text Editor`.
您正在寻找的是`Brace Matching (Highlight/Rectangle)`.

尝试将其更改为您的选择，并查看更改是否发生。如果没有，请重置为默认值并重新检查它是否已启用。

# 还...

另一个建议可以方便地临时查看主体的范围，您可以将鼠标悬停在边缘，它将突出显示最嵌套的主体。您可能需要对颜色进行一些调整以使其充满活力。我使用较深的颜色，并让我的代码块突出显示白色。我知道这不是你要找的东西，但它可能有点像创可贴。

# android - 多个搜索栏

> ID：11539403
> 
> 赞同：2
> 
> 时间：2012-07-18T10:35:24.463
> 
> 标签：android

我已经在 android 中实现了多个搜索栏，例如

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    sb1=(SeekBar) findViewById(R.id.seekBar1);
    sb2=(SeekBar) findViewById(R.id.seekBar2);
    sb3=(SeekBar) findViewById(R.id.seekBar3);

    tv1=(TextView) findViewById(R.id.textView1);
    tv2=(TextView) findViewById(R.id.textView2);
    tv3=(TextView) findViewById(R.id.textView3);

    sb1.setOnSeekBarChangeListener(this);
    sb2.setOnSeekBarChangeListener(this);
    sb3.setOnSeekBarChangeListener(this);

}

@Override
public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
{

    switch (arg0.getId()) 
    {
    case R.id.seekBar1:
        tv1.setText(arg1);
        break;
    case R.id.seekBar2:
        tv2.setText(arg1);
        break;
    case R.id.seekBar3:
        tv3.setText(arg1);
        break;
    }
}

@Override
public void onStartTrackingTouch(SeekBar arg0) 
{
    // TODO Auto-generated method stub

}

@Override
public void onStopTrackingTouch(SeekBar arg0) 
{
    // TODO Auto-generated method stub

} 
```

每当我运行此应用程序时，它都会出现以下错误：

> 致命例外：主要

```
07-18 15:41:13.200: E/AndroidRuntime(596): android.content.res.Resources$NotFoundException:String resource ID #0x1
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.content.res.Resources.getText(Resources.java:201)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.TextView.setText(TextView.java:2817)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.example.allocationseekbar.MainActivity.onProgressChanged(MainActivity.java:42)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.SeekBar.onProgressRefresh(SeekBar.java:89)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.ProgressBar.doRefreshProgress(ProgressBar.java:506)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.ProgressBar.refreshProgress(ProgressBar.java:515)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.ProgressBar.setProgress(ProgressBar.java:564)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.AbsSeekBar.trackTouchEvent(AbsSeekBar.java:337)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.widget.AbsSeekBar.onTouchEvent(AbsSeekBar.java:292)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.View.dispatchTouchEvent(View.java:3766)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.os.Looper.loop(Looper.java:123)
07-18 15:41:13.200: E/AndroidRuntime(596):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-18 15:41:13.200: E/AndroidRuntime(596):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 15:41:13.200: E/AndroidRuntime(596):  at java.lang.reflect.Method.invoke(Method.java:521)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-18 15:41:13.200: E/AndroidRuntime(596):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-18 15:41:13.200: E/AndroidRuntime(596):  at dalvik.system.NativeStart.main(Native Method) 
```

我不知道为什么会这样。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:37:23.760

您正在将一个传递给您`int`的`setText()`方法，该方法`TextView`是查找具有该 ID 的资源的重载。您需要将其（以及类似的行）更改为：

```
tv1.setText(arg1.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:18:09.160

我们可以使用以下解决方案：

```
 1\. tv1.setText(Integer.toString(arg1))
 2\. tv1.setText(""+arg1) 
```

# iphone - 在 UITextField 的子类中居中占位符文本

> ID：11539404
> 
> 赞同：5
> 
> 时间：2012-07-18T10:35:26.570
> 
> 标签：iphone, ios5, xcode4, uitextfield

所以首先，我需要设置占位符文本颜色，所以我将 UITextfield 子类化，如几个堆栈溢出帖子所示。这工作正常。这是一个示例帖子：[How do I subclass UITextField and override drawPlaceholderInRect to change Placeholder color](https://stackoverflow.com/questions/6151474/how-do-i-subclass-uitextfield-and-override-drawplaceholderinrect-to-change-place)。

但是，当我尝试使用`searchNameField.textAlignment = UITextAlignmentCenter;`它时，它不再使占位符居中。输入文本仍然居中。

那么，假设由于子类化而居中不起作用，我必须向 UITextField 子类添加什么才能使占位符文本居中？

谢谢

**编辑**

这是我用来解决这个问题的代码。这放置在我的 UITextField 子类中。

```
- (CGRect)placeholderRectForBounds:(CGRect)bounds 
{
    CGSize size = [[self placeholder] sizeWithFont:[UIFont fontWithName:@"Arial" size:placeholdTextSize]];

    return CGRectMake( (bounds.size.width - size.width)/2 , bounds.origin.y , bounds.size.width , bounds.size.height);
} 
```

请注意，placeholdTextSize 是我在初始化期间设置的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:49:59.910

给你，伙计

子类化 UITextField 将完成工作：

```
// CustomTextField.h
@interface CustomTextField : UITextField {
}
@end 
```

覆盖方法：

```
@implementation
- (CGRect)placeholderRectForBounds:(CGRect)bounds {
    return CGRectMake(x,y,width,height);//Return your desired x,y position and width,height
}

- (void)drawPlaceholderInRect:(CGRect)rect {
    //draw place holder.
 [[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:12]];

}
@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T06:00:34.370

我认为这会起作用（经过测试）

```
- (void) drawPlaceholderInRect:(CGRect)rect {

      [[UIColor redColor] setFill];
      [self.placeholder drawInRect:rect
                          withFont:self.font
                     lineBreakMode:UILineBreakModeTailTruncation
                         alignment:self.textAlignment];
    } 
```

[https://github.com/mschulkind/cordova-true-native-ios/blob/master/Classes/UITextFieldPlugin.m](https://github.com/mschulkind/cordova-true-native-ios/blob/master/Classes/UITextFieldPlugin.m)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-27T05:46:35.990

您可以在 UITextfield 子类中执行此操作

```
- (void)drawPlaceholderInRect:(CGRect)rect {

[[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.8] setFill];

[[self placeholder] drawInRect:rect withFont:[UIFont boldSystemFontOfSize:16.0] lineBreakMode:UILineBreakModeTailTruncation alignment:NSTextAlignmentCenter]; 
```

}

# apache - Apache mod_rewrite 与 '/' 在 url

> ID：11539407
> 
> 赞同：0
> 
> 时间：2012-07-18T10:35:36.490
> 
> 标签：apache, mod-rewrite

我们在配置中有这个规则：

```
RewriteRule (\w+)\/place_info\/(\d+)(\/.+|\/?)$ $1/place_info.php?id=$2 [QSA] 
```

用于获取表单的 URL

```
http://www.ourdomain.com/section/place_info/12345/place-name-whatever 
```

并在内部将其传递为

```
http://www.ourdomain.com/section/place_info.php?id=12345 
```

这在所有情况下都可以正常工作，除非其中`place-name-whatever`包含 URL 编码`/`字符。例如，这有效：

```
http://www.ourdomain.com/section/place_info/12345/place-name-whatever 
```

这有效：

```
http://www.ourdomain.com/section/place_info/12345/place-name-whatever/with-slash 
```

但这不是：

```
http://www.ourdomain.com/section/place_info/12345/place-name-whatever%2Fwith-slash 
```

对于我来说，我无法弄清楚这里发生了什么，更重要的是，如何解决它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:55:29.210

似乎与很长一段时间仍未解决的[mod_rewrite 错误有关。](https://issues.apache.org/bugzilla/show_bug.cgi?id=34602 "错误 34602 - mod_rewrite 无法正确处理其中包含转义的 URL")

如果您甚至丢弃剩余的行，它也会影响您。

# vb.net - 如何以不同的形式在 2 列表视图中显示数据

> ID：11539410
> 
> 赞同：0
> 
> 时间：2012-07-18T10:35:37.467
> 
> 标签：vb.net, winforms, listview

我有一个带有一个列表视图和其他控件的表单 (form1)。这个列表视图充满了数据。我不会在 ListView 中以其他形式（form2）拥有相同的数据。在这种情况下，我创建了一个带有参数 listView 的方法 RefreshForm。

```
Public Sub RefreshForm(ByVal listView As ListView)
   On Error Resume Next
   ListView2 = listView
   ListView2.Refresh()
   On Error GoTo 0
End Sub 
```

在构造函数的 form1 中，我初始化 form2 并显示它。

```
form2 = new Form_CustInfo()
fCustInfo.Show() 
```

在我从form1填充listView的方法中，在listview填充数据的方法结束后，我从form2调用RefreshForm方法

```
form2.RefreshForm(Me.ListView2) 
```

在我进入调试的方法中，我播种了充满数据的列表视图（ListView2 有 5 个项目），但是从 form2 刷新列表视图后不显示这些项目。

# debugging - 如何调试 Google Apps 脚本（又名 Logger.log 记录到哪里？）

> ID：11539411
> 
> 赞同：160
> 
> 时间：2012-07-18T10:35:42.077
> 
> 标签：debugging, google-apps-script, google-sheets, triggers

在 Google 表格中，您可以添加一些脚本功能。我正在为`onEdit`活动添加一些东西，但我不知道它是否有效。据我所知，您无法从 Google 表格中调试实时事件，因此您必须从调试器中进行，这是没有意义的，因为`onEdit()`如果我从`Script Editor`.

所以，我试图`Logger.log`在函数被调用时使用该方法记录一些数据`onEdit`，但这似乎也只在从`Script Editor`. 当我从 运行它时`Script Editor`，我可以通过转到`View->Logs...`

我希望我能够看到事件实际执行时的日志，但我无法弄清楚。

我该如何调试这些东西？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-07T14:39:10.387

**更新：**

如[本](https://stackoverflow.com/a/46859894)答案所述，

*   [Stackdriver Logging](https://developers.google.com/apps-script/guides/logging#stackdriver_logging)是现在首选的日志记录方法。

*   用于[`console.log()`](https://developers.google.com/apps-script/reference/base/console#log())登录到 Stackdriver。

* * *

`Logger.log`将向您发送一封电子邮件（最终），说明您的脚本中发生的错误，或者，如果您正在从 运行东西`Script Editor`，您可以通过转到`View->Logs`（仍在脚本编辑器中）查看上次运行功能的日志。同样，这只会显示您**从内部`Script Editor`**运行的最后一个函数记录的任何内容。

我试图开始工作的脚本与电子表格有关 - 我制作了一个电子表格待办事项清单类型的东西，它按优先级等对项目进行排序。

我为该脚本安装的唯一触发器是 onOpen 和 onEdit 触发器。调试 onEdit 触发器是最难弄清楚的，因为我一直在想，如果我在我的 onEdit 函数中设置一个断点，打开电子表格，编辑一个单元格，我的断点就会被触发。不是这种情况。

为了模拟编辑单元格，我*最终*不得不在实际的电子表格中做一些事情。我所做的只是确保选择了我希望它视为“已编辑”的单元格，然后在 中`Script Editor`，我将转到`Run->onEdit`。然后我的断点就会被击中。

但是，我确实必须停止使用传递给 onEdit 函数的事件参数——你不能通过`Run->onEdit`. 我需要从电子表格中获取的任何信息，例如选择了哪个单元格等，我必须手动找出。

无论如何，答案很长，但我最终想通了。

* * *

**编辑**：

如果您想查看我制作的待办事项清单，您可以[在这里查看](https://docs.google.com/spreadsheet/ccc?key=0Aj5PhKkp12xKdGxKN1dZWFRqVmJMdnlCbEJvd1pPbGc)

（是的，我知道任何人都可以编辑它——这就是分享它的目的！）

我希望它也能让你看到剧本。由于您在那里看不到它，所以它是：

```
function onOpen() {
  setCheckboxes();
};

function setCheckboxes() {
  var checklist = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("checklist");
  var checklist_data_range = checklist.getDataRange();
  var checklist_num_rows = checklist_data_range.getNumRows();
  Logger.log("checklist num rows: " + checklist_num_rows);

  var coredata = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("core_data");
  var coredata_data_range = coredata.getDataRange();

  for(var i = 0 ; i < checklist_num_rows-1; i++) {
    var split = checklist_data_range.getCell(i+2, 3).getValue().split(" || ");
    var item_id = split[split.length - 1];
    if(item_id != "") {
      item_id = parseInt(item_id);
      Logger.log("setting value at ("+(i+2)+",2) to " + coredata_data_range.getCell(item_id+1, 3).getValue());
      checklist_data_range.getCell(i+2,2).setValue(coredata_data_range.getCell(item_id+1, 3).getValue());
    }
  }
}

function onEdit() {
  Logger.log("TESTING TESTING ON EDIT");
  var active_sheet = SpreadsheetApp.getActiveSheet();
  if(active_sheet.getName() == "checklist") {
    var active_range = SpreadsheetApp.getActiveSheet().getActiveRange();
    Logger.log("active_range: " + active_range);
    Logger.log("active range col: " + active_range.getColumn() + "active range row: " + active_range.getRow());
    Logger.log("active_range.value: " + active_range.getCell(1, 1).getValue());
    Logger.log("active_range. colidx: " + active_range.getColumnIndex());
    if(active_range.getCell(1,1).getValue() == "?" || active_range.getCell(1,1).getValue() == "?") {
      Logger.log("made it!");
      var next_cell = active_sheet.getRange(active_range.getRow(), active_range.getColumn()+1, 1, 1).getCell(1,1);
      var val = next_cell.getValue();
      Logger.log("val: " + val);
      var splits = val.split(" || ");
      var item_id = splits[splits.length-1];
      Logger.log("item_id: " + item_id);

      var core_data = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("core_data");
      var sheet_data_range = core_data.getDataRange();
      var num_rows = sheet_data_range.getNumRows();
      var sheet_values = sheet_data_range.getValues();
      Logger.log("num_rows: " + num_rows);

      for(var i = 0; i < num_rows; i++) {
        Logger.log("sheet_values[" + (i) + "][" + (8) + "] = " + sheet_values[i][8]);
        if(sheet_values[i][8] == item_id) {
          Logger.log("found it! tyring to set it...");
          sheet_data_range.getCell(i+1, 2+1).setValue(active_range.getCell(1,1).getValue());
        }
      }

    }
  }

  setCheckboxes();
}; 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-11-18T20:02:50.253

> 据我所知，您无法从 google docs 调试实时事件，因此您必须从调试器中进行，这是没有意义的，因为如果我运行，传递给我的 onEdit() 函数的事件参数将始终未定义它来自脚本编辑器。

是的 - 所以自己定义事件参数以进行调试。请参阅[如何在 GAS 中测试触发功能？](https://stackoverflow.com/questions/16089041/how-can-i-test-a-trigger-function-in-gas/16089067#16089067)

> 每当调用 onEdit 函数时，我都尝试使用 Logger.log 方法记录一些数据，但这似乎也仅在从脚本编辑器运行时才有效。当我从脚本编辑器运行它时，我可以通过查看->日志来查看日志...

再次正确，但有帮助。Peter Hermann 的[BetterLog 库](https://sites.google.com/site/scriptsexamples/custom-methods/betterlog)将所有​​日志重定向到电子表格，甚至可以从未附加到编辑器/调试器实例的代码中进行日志记录。

例如，如果您在包含电子表格的脚本中进行编码，则可以仅将这一行添加到脚本文件的顶部，所有日志都将转到电子表格中的“日志”表。无需其他代码，只需`Logger.log()`像往常一样使用：

```
Logger = BetterLog.useSpreadsheet(); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-10-21T03:55:45.207

**2017 年更新：** [Stackdriver Logging](https://developers.google.com/apps-script/guides/logging#stackdriver_logging)现在可用于 Google Apps 脚本。从脚本编辑器的菜单栏中，转到： `View > Stackdriver Logging`查看或流式传输日志。

[console.log()](https://developers.google.com/apps-script/reference/base/console)将写入`DEBUG`级别消息

日志记录示例`onEdit()`：

```
function onEdit (e) {
  var debug_e = {
    authMode:  e.authMode,  
    range:  e.range.getA1Notation(),    
    source:  e.source.getId(),
    user:  e.user,   
    value:  e.value,
    oldValue: e. oldValue
  }

  console.log({message: 'onEdit() Event Object', eventObject: debug_e});
} 
```

然后检查[Stackdriver UI](https://console.cloud.google.com/logs/viewer)中标记的日志`onEdit() Event Object`以查看输出

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-01-04T06:46:49.317

我浏览了这些帖子，最终以某种方式找到了一个简单的答案，我在这里为那些想要简短而甜蜜的解决方案的人发布了这个答案：

1.  `console.log("Hello World")`在您的脚本中使用。
2.  转到[https://script.google.com/home/my](https://script.google.com/home/my)并选择您的附加组件。
3.  单击项目详细信息上的省略号菜单，选择执行。

[![在此处输入图像描述](../Images/90f90b5227ea07ff7e30a6166bc68b0e.png)](https://i.stack.imgur.com/TsS0w.png)

4.  单击最新执行的标题并阅读日志。

[![在此处输入图像描述](../Images/1388ec5b5c5ed825cb5b774843af8d74.png)](https://i.stack.imgur.com/I8s1v.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-24T09:11:52.120

有点 hacky，但我创建了一个名为“console”的数组，每当我想输出到控制台时，我都会推送到数组。然后，每当我想查看实际输出时，我都会返回，`console`而不是之前返回的任何内容。

```
 //return 'console' //uncomment to output console
    return "actual output";
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-28T12:51:30.603

如果您打开了脚本编辑器，您将在 View->Logs 下看到日志。如果您的脚本具有 onedit 触发器，请更改电子表格，该电子表格应在第二个选项卡中打开脚本编辑器时触发该功能。然后转到脚本编辑器选项卡并打开日志。您将看到您的函数传递给记录器的任何内容。

基本上只要打开脚本编辑器，事件就会写入日志并为您显示。它不会显示其他人是否在其他地方的文件中。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-07T13:06:29.427

我遇到了同样的问题，我在网上的某个地方找到了以下内容......

Docs 中的事件处理程序虽然有点棘手。因为文档可以处理多个用户同时进行的多个编辑，所以事件处理程序是在服务器端处理的。这种结构的主要问题是，当事件触发脚本失败时，它会在服务器上失败。如果您想查看调试信息，您需要在触发器菜单下设置一个显式触发器，当事件失败时通过电子邮件向您发送调试信息，否则它将静默失败。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-18T15:36:18.987

它远非优雅，但在调试时，我经常登录到 Logger，然后使用[getLog()](https://developers.google.com/apps-script/reference/base/logger#getlog)获取其内容。然后，我要么：

*   将结果保存到一个变量（可以在 Google Scripts 调试器中检查——这适用于我无法在某些代码中设置断点但我*可以*在稍后执行的代码中设置断点的情况）
*   将其写入一些临时 DOM 元素
*   在[警报中显示](https://developers.google.com/apps-script/reference/base/ui#alert%28String%29)

本质上，它只是一个[JavaScript 输出](http://www.w3schools.com/js/js_output.asp)问题。

它严重缺乏现代`console.log()`实现的功能，但 Logger 仍然有助于调试 Google 脚本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-26T11:40:46.260

就像一个通知一样。我为我的电子表格制作了一个测试功能。我在 onEdit(e) 函数中使用变量 google throws（我称之为 e）。然后我做了一个这样的测试功能：

```
function test(){
var testRange = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(GetItemInfoSheetName).getRange(2,7)
var testObject = {
    range:testRange,
    value:"someValue"
}
onEdit(testObject)
SpreadsheetApp.getActiveSpreadsheet().getSheetByName(GetItemInfoSheetName).getRange(2,6).setValue(Logger.getLog())
} 
```

调用此测试函数会使所有代码像电子表格中的事件一样运行。我刚刚输入了我编辑的单元格的位置，whitch 给了我一个意想不到的结果，将 value 设置为我放入单元格的值。OBS！有关谷歌为函数提供的更多变量，请访问此处：[https ://developers.google.com/apps-script/guides/triggers/events#google_sheets_events](https://developers.google.com/apps-script/guides/triggers/events#google_sheets_events)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-25T16:45:41.907

目前，您仅限于在文档中使用脚本的容器绑定性质。如果您在文档之外创建一个新脚本，那么您将能够将信息导出到谷歌电子表格并像日志工具一样使用它。

例如在您的第一个代码块中

```
function setCheckboxes() {

    // Add your spreadsheet data
    var errorSheet = SpreadsheetApp.openById('EnterSpreadSheetIDHere').getSheetByName('EnterSheetNameHere');
    var cell = errorSheet.getRange('A1').offset(errorSheet.getLastRow(),0);

    // existing code
    var checklist = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("checklist");
    var checklist_data_range = checklist.getDataRange();
    var checklist_num_rows = checklist_data_range.getNumRows();

    // existing logger
    Logger.log("checklist num rows: " + checklist_num_rows);

   //We can pass the information to the sheet using cell.setValue()
    cell.setValue(new Date() + "Checklist num rows: " + checklist_num_rows); 
```

当我使用 GAS 时，我有两个监视器（您可以使用两个窗口），其中一个包含 GAS 环境，另一个包含 SS，因此我可以将信息写入并记录。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-15T13:54:20.780

开发控制台将记录应用脚本抛出的错误，因此您只需抛出一个错误即可将其记录为普通的 console.log。它将停止执行，但对于逐步调试可能仍然有用。

```
throw Error('hello world!'); 
```

将显示在控制台中，类似于`console.log('hello world')`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-25T23:15:28.263

只需像这样调试您的电子表格代码：

```
...
throw whatAmI;
... 
```

显示如下：

[![在此处输入图像描述](../Images/0c62fb746855bbaabc2eeb44e19aa50b.png)](https://i.stack.imgur.com/1MTgF.png)

# c# - LinkBut ton 作为默认按钮

> ID：11539412
> 
> 赞同：0
> 
> 时间：2012-07-18T10:35:48.270
> 
> 标签：c#, jquery, asp.net

我在我的网络应用程序中使用链接按钮，我的“复合控件”没有使用 ASP 面板（因此没有“默认按钮”属性，不是说它会起作用）。我的链接按钮当前的 href 设置为 'javascript:_doPostBack..'（asp 默认），但是为了启用我的自定义客户端验证脚本，我还在 'onclick' 属性中有代码。

典型按钮：

```
<div class="button orange o_lime right Normal">
    <a onclick="if (!validateFormmainContent_Login()) return false;" 
        id="mainContent_Login_ctl09_mainContent_Login_btnSubmit" defaultB="loginForm" 
        href="javascript:__doPostBack(&#39;ctl00$mainContent$Login$ctl09$mainContent_Login_btnSubmit&#39;,&#39;&#39;)">
        Submit
    </a>
</div> 
```

需要“默认按钮”操作的典型表单行

```
<div class='row' ID='mainContent_Login_ctl03'>
    <label ID='mainContent_Login_ctl04'>Email/Username</label>
    <input name="ctl00$mainContent$Login$txtAccount" type="text" id="mainContent_Login_txtAccount" class="lime validate[required]" defaultB="loginForm" />
</div> 
```

我目前的代码尝试使这项工作：

```
<script type="javascript">  
$('input[defaultB]').keypress(function (e) {
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {     
        $('a[defaultB=' + $(e.srcElement).attr('defaultB') + ']').click();
        return false;
    } else {
        return true;
    }
}); 
```

我当前尝试的解决方案为“defaultB”分配了一个值，该值与相应按钮中定义的“defaultB”值匹配，这样按键“13”（回车）应该启动“click”事件。但什么也没发生:(

我创建了一个 jsfiddle 来提供帮助，但它不适用于愚蠢的“找不到函数”异常。:(

[http://jsfiddle.net/Ninjanoel/yQvKC/](http://jsfiddle.net/Ninjanoel/yQvKC/)

我真的很想让这个工作而不必重新设计我的所有控件！任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:27:42.983

我已经更新了代码，请参见：

```
http://jsfiddle.net/yQvKC/5/ 
```

我相信你缺少的是：**$(this)**

我用

```
 $('a[defaultB=' + $(this).attr('defaultB') + ']').click(); 
```

然后 $('a[defaultB=' + $(e.srcElement).attr('defaultB') + ']').click();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:42:59.057

问题是，您将按键事件绑定到输入按钮。所以如果用户按下按钮然后按下回车，就会触发该事件。您应该将其绑定到表单！

我已经更新了代码：http: [//jsfiddle.net/YN56H/2/](http://jsfiddle.net/YN56H/2/)

您可能需要选择默认按钮（根据从 asp.net 生成的丑陋的 html），但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:53:41.027

```
$('input[defaultB]').keypress(function (e) {
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  
         alert('enter pressed');    
        var _el = $('a[defaultB='+ $(e.srcElement).attr('defaultB') + ']');
        eval(_el.attr('onclick'));
        eval(_el.attr('href'));
        return false;
    } else {
        return true;
    }
}); 
```

[http://jsfiddle.net/Ninjanoel/5WDKT/1/](http://jsfiddle.net/Ninjanoel/5WDKT/1/)

在这种情况下我使用“eval”是否危险？在属性上使用“eval”似乎对我有用，但我想知道这样做是否存在太大的安全风险？

# php - Facebook 发布到墙上。如何？

> ID：11539414
> 
> 赞同：1
> 
> 时间：2012-07-18T10:35:57.050
> 
> 标签：php, facebook, oauth-2.0, facebook-wall

大家好，我对“POST TO WALL”有很大的疑问。有人可以告诉我怎么做吗？

```
<?php

 $app_id = "myappid";

 $canvas_page = "mycanvaspage";

 $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($canvas_page);

 $signed_request = $_REQUEST["signed_request"];

 list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

 $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

 if (empty($data["user_id"])) {
        echo("<script> top.location.href='" . $auth_url . "'</script>");
  ?> 
```

我知道如何使用对话窗口制作 POST TO WALL 但有人可以告诉我如何在没有它的情况下制作它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:09:26.690

使用 facebook php lib 并发布流权限：

```
try {
     $facebook -> api ('/' . $fbID . '/feed', 'POST', $post);
       #where $post is array like array('name' => 'test' , 'description' => 'test');
    } catch (FacebookApiException $e) {
     #if eny error
         #u can get it $e -> getMessage() 
    } 
```

# php - 如何获取主 kay 字段的最后插入值？

> ID：11539418
> 
> 赞同：0
> 
> 时间：2012-07-18T10:36:06.193
> 
> 标签：php, mysql, primary-key

我正在使用 MySQL。我必须获取最后插入的记录的主键值。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:39:59.447

这将返回最后插入的 id。

```
SELECT LAST_INSERT_ID(); 
```

或者

```
if ((result = mysql_store_result(&mysql)) == 0 &&
    mysql_field_count(&mysql) == 0 &&
    mysql_insert_id(&mysql) != 0)
{
    used_id = mysql_insert_id(&mysql);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:39:08.360

```
mysqli_insert_id()
PDO::lastInsertId()
mysql_insert_id() 
```

如果您可能满足“竞争”条件，那么检查文档是非常值得的。[http://uk3.php.net/manual/en/function.mysql-insert-id.php](http://uk3.php.net/manual/en/function.mysql-insert-id.php)等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:47:10.393

有两个函数返回这个值：

`mysql_insert_id()`--> PHP 函数

`LAST_INSERT_ID()`--> PHP 和其他语言或 MySQL 命令行界面或 MySQL 前端都可以使用的 MySQL 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T10:40:11.510

使用以下查询：

```
 SELECT LAST_INSERT_ID(); 
```

# android - 在询问蓝牙 PIN 时避免在 Android 中失去焦点

> ID：11539420
> 
> 赞同：0
> 
> 时间：2012-07-18T10:36:08.650
> 
> 标签：android, bluetooth

当我的应用程序首次通过蓝牙与特定设备连接时，会出现一个对话框，要求输入 PIN。问题是，如果用户在对话框之外触摸屏幕，它就会失去焦点并消失......从那时起，它只是麻烦，用户必须强制关闭应用程序，或者回到以前的状态并重新启动配对过程...

所以，我的问题是：有没有办法避免（以编程方式）失去对系统生成对话框的关注？这是系统的正常行为还是我应该检查我的代码是否存在错误/概念错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:58:18.063

由于 Android 4.0+ [setCanceledOnTouchOutside (boolean)](http://developer.android.com/reference/android/app/Dialog.html#setCanceledOnTouchOutside%28boolean%29)默认设置为 true 用于对话框，这就是为什么在对话框外点击会取消它。

但是，没有任何方法可以覆盖`ontouch`系统对话框的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:06:40.703

对于 4.1 设备，简单的安全配对也许是一种可能的解决方法 - 但它尚未得到很好的记录 - 在配对方面面临类似的问题 - 并希望[使用 Jelly Bean 的简单安全配对（蓝牙）与 NFC 配对来改变问题](https://stackoverflow.com/questions/11500140/use-jelly-beans-simple-secure-pairing-bluetooth)

# android - 在android中拍摄Sreen-shot

> ID：11539421
> 
> 赞同：1
> 
> 时间：2012-07-18T10:36:12.043
> 
> 标签：android, screenshot

我想截取我的 Activity 和 Activity (View) 组件的屏幕截图。

这个 Activity 包含一个 SurfaceView 和一个相互叠加的布局。

当我截取 Surface 视图的屏幕截图时，它运行良好，但是当我截取整个 Activity 的屏幕截图时，我没有得到其中的 Surface 视图。我正在使用以下代码：

```
public class Screenshot {
  private final View view;
  /** Create snapshots based on the view and its children. */
  public Screenshot(View root) {
    this.view = root;
  }
  /** Create snapshot handler that captures the root of the whole activity. */
  public Screenshot(Activity activity) {
    final View contentView = activity.findViewById(android.R.id.content);
    this.view = contentView.getRootView();
  }
  /** Take a snapshot of the view. */
  public Bitmap snap() {
    Bitmap bitmap = Bitmap.createBitmap(this.view.getWidth(), this.view.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:56:15.460

作为一种解决方法，您可以做的是捕获布局**和**`SurfaceView`图像，并`SurfaceView`使用.`Canvas.drawBitmap``SurfaceView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:42:58.487

更改`this.view = contentView.getRootView();`为`this.view = contentView;` 希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:48:03.087

我不确定这是否会有所帮助，但您不能直接使用 DDMS 截屏吗？

**编辑**

您是否尝试过获取`Window`并`Activity`查看可以从中提取哪些视图/图像缓存？

# sql-server - 如何将文件的内容读入 SQL 变量

> ID：11539424
> 
> 赞同：16
> 
> 时间：2012-07-18T10:36:22.677
> 
> 标签：sql-server, readfile

有人能告诉我如何使用 T-SQL 将文件的内容读入 MS SQL 变量吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-18T11:37:31.693

```
DECLARE @FileContents  VARCHAR(MAX)

SELECT @FileContents=BulkColumn
FROM   OPENROWSET(BULK'PathToYourFile.sql',SINGLE_BLOB) x; -- BINARY
--FROM OPENROWSET(BULK'PathToYourFile.sql',SINGLE_CLOB) x; -- CHAR 
```

SQL Server 服务帐户显然需要具有读取文件的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:32:14.850

利用 SQLCMD 执行 .sql（从命令提示符或在 SSMS 中）。如果你想在 SSMS 中使用它，那么首先打开 SQLCMD 模式（查询 >> SQLCMD 模式）

查看[http://msdn.microsoft.com/en-us/library/ms174187.aspx](http://msdn.microsoft.com/en-us/library/ms174187.aspx)

```
:r yourFilename 
```

就像是：

```
:r d:\scripts\sample.sql 
```

# windows - 用pascal解析字节文件

> ID：11539428
> 
> 赞同：0
> 
> 时间：2012-07-18T10:36:38.710
> 
> 标签：windows, parsing, pascal, lazarus

我需要做的就是解析一个再见文件以将内容读取到屏幕上，但我不知道如何解析，谁能给我一些粗略的编码，我可以在其中输入文件地址或任何关于如何解析的想法？

这是我目前所在的地方

```
program Reordering;

uses crt;

  var f, i: text;
  s: string;
  skyf: array [1..256] of byte;
  j: integer;
  result: array [1..256] of char;

begin
  assign(f, 'C:\Users\Peter John Arnold\Documents\Coding\EDID1.LOG_JVC_TV_Model_LT19DK8ZJ.file');
  j := 1;
  Assign(i, 'C:\Users\Peter John Arnold\Documents\Coding\TV File\TvFile.txt');
  rewrite(f);
  reset(f);
  rewrite(i);

  repeat
    readln(f, skyf[j]);
    Result[j] := char(skyf[j]);
    Append(i);
    write(i, (skyf[j]));
    j := j + 1;
  until EOF(f);
  close(f);
  close(i);
  s := result[1..256];
  write(s);
  readln();
end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:01:07.357

**解析二进制文件：**

1.  从文件中读取字节数组（[如何读取和更改二进制文件](http://community.freepascal.org/bboards/message?message_id=266412&forum_id=24084)）
2.  将从文件获得的字节数组转换为字符串（每个字节到相应的 ASCII 字符 - “chr”-function）
3.  使用现有的解析库（例如“regexpr”单元）

**注意**：使用“AnsiString”类型

# python - int() 参数必须是字符串或数字，而不是“会议”

> ID：11539429
> 
> 赞同：1
> 
> 时间：2012-07-18T10:36:38.190
> 
> 标签：python, django, django-models, tornado

考虑这个功能，我在 tornadoweb 上使用 Django

```
def MeetingRecord(userid,mtngid,mesg):
    obj =  Usage()
    obj.name = userid
    obj.meeting_id = mtngid
    obj.action = mesg
  #  obj.participantid = participantid
    obj.save() 
```

这是模型

```
class Usage(models.Model):
    user = models.ForeignKey('User',related_name = 'usage_user',null = True)
    meeting = models.ForeignKey('Meeting',related_name = 'meeting_usages',null = True)
    participant= models.ForeignKey('Participant',related_name = 'meeting_participant_id',null = True)
    date = models.DateTimeField(auto_now  = True)
    action = models.CharField(max_length = 500)
    miscellaneous = models.CharField(max_length = 500) 
```

我正在从龙卷风类中调用此方法，例如

`MeetingRecord(check_user_exist,mtng,mesg)`

但我正在关注引用

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg/tornado/web.py", line 1021, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "tornado_main.py", line 383, in post
    MeetingRecord(check_user_exist,mtng,mesg)
  File "tornado_main.py", line 503, in MeetingRecord
    obj.save()
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/query.py", line 1576, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/sql/compiler.py", line 909, in execute_sql
    for sql, params in self.as_sql():
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/sql/compiler.py", line 872, in as_sql
    for obj in self.query.objs
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/fields/related.py", line 964, in get_db_prep_save
    connection=connection)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/fields/__init__.py", line 292, in get_db_prep_save
    prepared=False)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/fields/__init__.py", line 284, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/fields/__init__.py", line 537, in get_prep_value
    return int(value)
TypeError: int() argument must be a string or a number, not 'Meeting' 
```

我想确认 userid 是 User 类的实例， mtngid 是 meeting class 的实例。

请帮我弄清楚为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:46:57.723

只是一个有根据的猜测：“obj.meeting_id = mtngid”在这里您可能传递的是会议实例而不是会议 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:22:06.343

您的会议是一个外键，它需要一个对象，而不是实际的引用。你也没有`meeting_id`字段。

尝试这个：

```
def MeetingRecord(userid,mtngid,mesg):
    obj =  Usage()
    obj.name = userid
    obj.meeting = mtngid
    obj.action = mesg
  #  obj.participantid = participantid
    obj.save() 
```

您还应该适当地命名您的方法的参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T12:25:32.330

您使用的是会议 ID 字段 ( [AutoField](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)`obj.meeting_id` )的外键。AutoField 是[IntegerField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.AutoField)。这就是为什么错误消息说**int() argument**。在您的情况下，您必须使用. Burhan 的对象引用方式更加清晰。我只建议将 mtngid 重命名为 mtng，因为它不是 id，它是对象。**`obj.meeting_id = mtngid.id`**

# shell - awk 退出 ACTION 路径并直接进入 END 部分

> ID：11539432
> 
> 赞同：7
> 
> 时间：2012-07-18T10:36:50.960
> 
> 标签：shell, awk

我正在使用一个 awk 脚本，它的框架很简单

```
 awk '
 BEGIN {
     Variable declaration
 }
 {
    ACTION PART
 }
 END
 {
 }' FILE A 
```

文件 A 是一个巨大的文件。所以我不想遍历整个文件，所以我想做的是，我试图在 ACTION PART 中保留一些检查，如果检查成功，那么我需要跳过阅读其余部分文件并直接转到 END 部分。

我的问题是如何根据条件将脚本从 ACTION PART 重定向到 END Part。我正在寻找某种命令，例如 for 循环中的“break”。你们能不能分享你的想法。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T10:39:59.480

该`exit`命令将执行您想要的操作。

从[`man`页面](http://linux.die.net/man/1/awk)：

> 类似地，所有的 END 块都被合并，并在所有输入用尽时（或执行退出语句时）执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:42:54.267

在终止当前块时使用“exit”，但仍会处理 END。请参见下面的示例。

```
$ cat test.input
hello
world
one

$ awk 'BEGIN { print "Start-up"} {print "Read:", $1; if ($1 == "world") {exit}} END {print "Phase-out"}' test.input 
Start-up
W: hello
W: world
Phase-out 
```

# extjs - 在 Internet Explorer 中运行 ExtJS 应用程序

> ID：11539445
> 
> 赞同：0
> 
> 时间：2012-07-18T10:37:34.703
> 
> 标签：extjs, extjs4, extjs-mvc

虽然我删除了尾随逗号，但在我的 mvc 项目中，它没有在 IE 8 中加载。构建这个应用程序进行部署可以解决这个问题吗？我不确定为什么会出现这个问题

# jquery - 学习 jQuery 选择器。如何提醒选择器的值？

> ID：11539454
> 
> 赞同：1
> 
> 时间：2012-07-18T10:38:01.693
> 
> 标签：jquery

以这段代码为例：

```
$('.photo').hover(
            function() {
                //display heading and caption
                $(this).children('div:first').stop(true,false).animate({top:0},{duration:200, easing: 'easeOutQuart'});
                $(this).children('div:last').stop(true,false).animate({bottom:0},{duration:200, easing: 'easeOutQuart'})
}) 
```

假设我想知道用这一行选择了哪个元素：

```
$(this).children('div:first') 
```

是否有可能以某种方式提醒目标元素？我试过：

```
something = $(this).children('div:first').val();
                alert (something); 
```

或者

```
something = $(this).children('div:first');
                alert (something); 
```

在第一个示例中，我得到空白警报。使用第二个 - Objext 对象。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:40:00.050

您可以使用以下内容。

```
something = $(this).children('div:first').text();
                alert (something); 
```

或者

```
something = $(this).children('div:first').html();
                alert (something); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:41:24.960

当然！您可以使用与 jQuery 选择配合得很好的 console.log。

```
console.log($(this).children('div:first')); 
```

如果您使用的是 firefox 或 chrome，请按 F12 打开开发人员的控制台，导航到控制台选项卡，您将看到整个选择和结构。

事实上，这对于显示数组和对象以及任何东西都非常有用！

# java - java音频滤波器

> ID：11539455
> 
> 赞同：3
> 
> 时间：2012-07-18T10:38:03.027
> 
> 标签：java, audio, frequency

我正在用java开发一个简单的音频播放器。我需要的唯一高级功能是频率滤波器。它不一定是功能齐全的均衡器功能，在特定频率范围内具有不同的增益：一个低通滤波器可以削减高于指定值的频率就足够了。

我研究了带有均衡器的[jlGui](http://www.javazoom.net/jlgui/jlgui.html)，但它只适用于 MP3 数据，而我将播放的文件是 OGG。

浏览各种答案，我发现像[Xuggler](http://www.xuggle.com/xuggler)或[Jave](http://www.sauronsoftware.it/projects/jave/index.php?lang=en)这样的 ffmpeg 包装器可能是一个解决方案。但是我没有找到任何教程，甚至没有关于如何使用 ffmpeg 处理频率过滤的起点。

JMF 也被描述为实现此类功能的有效选择，但我没有发现足够具体的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:21:20.463

[http://www.cs.ubc.ca/~kvdoel/jass/doc/index.html](http://www.cs.ubc.ca/~kvdoel/jass/doc/index.html)

这是 UBC Vancouver 的 JASS 项目的 JavaDoc。它可以免费用于非商业用途。您应该能够使用它实现大多数类型的过滤器。检查几个级别的 URL 以获取实际的源下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T12:15:34.773

我最终使用了这个解决方案（用于 Windows 应用程序）：[Equalizer APO](http://sourceforge.net/projects/equalizerapo/)

它利用了 Windows Vista 及更高版本上可用的音频处理对象技术。我的应用程序只需要编辑一个配置文本文件，其余的由 APO 完成。

显然，它依赖于平台，我必须安装一个外部应用程序才能让我的过滤器工作，但在我的情况下它是可以接受的，而且它很容易实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:01:07.653

我找到了一个名为[JEQ](http://sourceforge.net/projects/jeq/)
的旧项目 ，它基于 javax.sound 并使用[IIR](http://en.wikipedia.org/wiki/Infinite_impulse_response)创建 10/15/25/31 频段均衡器。它适用于 PCM 数据（不仅仅是像其他 MP3 一样），所以我希望我可以让它与 OGG 一起使用。我唯一担心的是输出质量，在我的一些测试中不是很好。我得调查一下

# objective-c - Base64 在目标 C 中对非常大的文件进行编码，以在 sharepoint 中上传文件

> ID：11539462
> 
> 赞同：0
> 
> 时间：2012-07-18T10:38:37.520
> 
> 标签：objective-c, sharepoint, file-upload, base64, large-files

我有一个要求，用户可以通过同一个应用程序将应用程序中存在的文件上传到 SharePoint。

我尝试使用共享点的[http://schemas.microsoft.com/sharepoint/soap/CopyIntoItems](http://schemas.microsoft.com/sharepoint/soap/CopyIntoItems)方法。但它需要base64 编码格式的文件嵌入到SOAP 请求的主体中。当我尝试将 30 MB 文件转换为 base64 编码字符串时，我的代码在设备上崩溃了？相同的代码在模拟器上执行得很好

是否有任何其他替代方法可以将文件（如文件流等）上传到共享点？我可能必须上传最大 500 MB 的文件？是否有更高效的库将 NSData 转换为大文件的 base64 编码字符串？？？

我是否应该分块读取文件，然后将其转换为 base64 编码字符串并在转换完整文件后上传文件？还有其他方法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:41:05.043

首先，您的代码可能因为内存不足而崩溃。我会做一个循环，在其中读取我转换的块，然后推送到一个打开的套接字。这可能意味着您需要转到比 NSURLConnection 更低的级别，我曾尝试搜索 NSURLConnection 和分块上传，但没有取得多大成功。

有些人似乎建议使用[ASIHttp](http://allseeing-i.com/ASIHTTPRequest/)，但看看主页似乎被开发人员放弃了，所以我不能推荐。

[AFNetworking](https://github.com/AFNetworking/AFNetworking)看起来非常好，它支持块，我可以在第一页的示例中看到它是如何为您使用的。查看流式请求示例。基本上创建一个 NSInputStream，您将分块数据推送到并在 AFHTTPURLConnectionOperation 中使用它。

# c# - 写入文件需要针对大流量进行优化第 4 部分

> ID：11539463
> 
> 赞同：1
> 
> 时间：2012-07-18T10:38:51.663
> 
> 标签：c#, multithreading, performance, io

这是第 3 部分的延续

[写入文件需要针对大流量进行优化第 3 部分](https://stackoverflow.com/questions/11526856/write-file-need-to-optimised-for-heavy-traffic-part-3)

由于我的代码有所改变，我认为最好打开一个新线程。

```
 public class memoryStreamClass
    {
        static MemoryStream ms1 = new MemoryStream();
        static MemoryStream ms2 = new MemoryStream();
        static int c = 1;

        public void fillBuffer(string outputString)
        {
            byte[] outputByte = Encoding.ASCII.GetBytes(outputString);

            if (c == 1)
            {
                ms1.Write(outputByte, 0, outputByte.Length);

                if (ms1.Length > 8100)
                {
                    c = 2;

                    Thread thread1 = new Thread(() => emptyBuffer(ref ms1));
                    thread1.Start();
                }
            }
            else
            {
                ms2.Write(outputByte, 0, outputByte.Length);

                if (ms2.Length > 8100)
                {
                    c = 1;

                    Thread thread2 = new Thread(() => emptyBuffer(ref ms2));
                    thread2.Start();
                }
            }
        }

        void emptyBuffer(ref MemoryStream ms)
        {
            FileStream outStream = new FileStream(string.Format("c:\\output.txt", FileMode.Append);

            ms.WriteTo(outStream);
            outStream.Flush();
            outStream.Close();

            ms.SetLength(0);
            ms.Position = 0;

            Console.WriteLine(ms.Position);
        } 
```

我从第 3 部分中的代码更改了 2 件事。

1.  类和方法更改为非静态，变量仍然是静态的。
2.  我已将 memorystream 重置长度移动到 emptyBuffer 方法中，并且我使用 ref 参数将引用而不是副本传递给该方法。

这段代码编译得很好并且运行正常。但是，我与我的单线程程序并排运行它，使用 2 台计算机，一台计算机运行单线程，一台计算机运行多线程版本，在同一个网络上。我运行它大约 5 分钟。单线程版本收集了 8333KB 的数据，而多线程版本只收集了 8222KB 的数据。（单线程版本的98.6%）

这是我第一次在 2 版本之间进行任何性能比较。也许应该运行更多测试来确认它。但是基于查看代码，那里的任何大师都会指出任何问题？

我目前没有在锁或线程池上放置任何代码，也许我应该，但如果代码运行良好，我不想更改它并破坏它。我唯一要改变的是缓冲区大小，所以我会在另一个缓冲区清空之前消除缓冲区填满的任何机会。

对我的代码有任何评论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:14:30.367

问题仍然是静态的。您正在清除可能包含未写入磁盘的数据的缓冲区。

我想这种情况发生的概率为 1.4%。

```
ms1 填满，清空 buffer1 线程启动，切换到 ms2
空缓冲区 1 正在写入磁盘
ms2 填满，清空 buffer2 线程启动，切换到 ms1
清空 buffer1 到磁盘完成
ms1 在它是活动流时被清除

```

在进行多线程编程时，静态*类*很好，但静态*不是*。理想情况下，您在线程之间没有共享内存，并且您的代码完全依赖于它。

这样想——如果你期望一个值持续变化，它不完全是[静态](http://en.wiktionary.org/wiki/static)的，不是吗？

# magento - Magento 保存选定的国家

> ID：11539464
> 
> 赞同：0
> 
> 时间：2012-07-18T10:38:51.997
> 
> 标签：magento

我想在客户帐户注册页面中添加另一个国家/地区下拉列表。我试过了

```
<?php echo $this->getCountryHtmlSelect() ?> 
```

但这不显示下拉菜单。我试过的另一个是

```
<select name="partner_country" id="partner_country">
    <option value=''>– Please Select –&lt;/option>
        <?php foreach($_countries as $_country): ?>
            <option value="<?php echo $_country->getId() ?>"><?php echo $_country->getName() ?></option>
        <?php endforeach; ?>
</select> 
```

这一项显示国家列表，但所选国家不显示在后端客户信息页面中。

我知道`getCountryHtmlSelect()`呈现国家/地区的下拉菜单。我是否在我的模块中创建了类似的方法来保存所选国家/地区？

**更新**

通过设置脚本添加此属性时，我已经创建了一个源模型，

```
$installer->addAttribute('customer_address','partner_country_id',array(
        'type'               => 'varchar',
        'label'              => 'Partner Country',
        'input'              => 'select',
        'source'             => 'wholesale/attribute_source_partnercountry',
        'global' => 1,
        'visible' => 1,
        'required' => 0,
        'visible_on_front' => 1,
        'sort_order'=>220
)); 
```

源模型

```
class Company_Wholesale_Model_Attribute_Source_Partnercountry extends Mage_Eav_Model_Entity_Attribute_Source_Table
{
    public function getAllOptions()
    {
        if (!$this->_options) {
            $this->_options = Mage::getResourceModel('directory/country_collection')
                ->loadByStore($this->getAttribute()->getStoreId())->toOptionArray();
        }
        return $this->_options;
    }

} 
```

配置文件

```
<config>
    <global>
        <resources>
            <wholesale_setup>
                <setup>
                    <module>Company_Wholesale</module>
                    <class>Company_Wholesale_Model_Entity_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </wholesale_setup>
        </resources>
    </global>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:00:35.670

您遇到的问题与您创建的属性类型有关。为了在管理员中选择您的自定义属性，您需要使用“select”和“source_model”类型创建/更新它。为此需要使用客户模块设置模型，因此在设置资源的模块配置中，您需要指定它：

```
<config>
   <global>
       <resources>
           <your_module_setup>
               <setup>
                  <class>Mage_Customer_Model_Resource_Setup</class>
                  <module>Your_Module</module>
               </setup>
           </your_module_setup>
       </resources>
    </global>
</config> 
```

在您的设置文件中，您需要创建/修改您的属性。（如果属性存在，当前代码片段将修改它，而不是创建）。

```
<?php

$this->startSetup();
$this->addAttribute('customer', 'partner_country' , array(
     'type'   => 'varchar',
     'label'  => 'Partner Country',
     'input'  => 'select',
     'source' => 'customer/entity_address_attribute_source_country'
));
$this->endSetup(); 
```

**更新：**

现在我收到了您的问题，您尚未将属性添加到客户创建帐户表单中，因此在帐户创建过程中从设置为客户模型的数据中过滤掉了您的属性。

因此，您只需为应该可以保存您的属性的表单指定您的客户属性。

目前有这样的表格可用：

*   **customer_account_create** - 注册表格
*   **customer_account_edit** - 更改帐户详细信息表格
*   **checkout_register** - 在结帐时注册新帐户

要将您的自定义属性添加到表单，只需再创建一个设置脚本，将带有表单代码的记录和您的属性 id 添加到名为的表中`customer/form_attribute`：

```
<?php
$this->startSetup();
$attributeId = $this->getAttributeId('customer', 'partner_country_id');
$data = array(
    array('attribute_id' => $attributeId, 'form_code' => 'customer_account_create'),
    array('attribute_id' => $attributeId, 'form_code' => 'customer_account_edit'),
    array('attribute_id' => $attributeId, 'form_code' => 'checkout_register')
);
$this->getConnection()->insertMultiple($this->getTable('customer/form_attribute'), $data);
$this->endSetup(); 
```

只需选择退出您不需要的表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:17:21.113

如果您想使用`getCountryHtmlSelect()`，那么您应该给它一些参数，以便它可以应用于您的属性，而不是`country`默认情况下。对于注册表单，它可以给出如下内容：

```
echo $this->getCountryHtmlSelect($this->getFormData()->getPartnerCountryId(), 'partner_country_id', 'partner_country', $this->__('Partner Country')) 
```

在第二个示例中，您`partner_country`在选择名称中使用，而您创建了一个`partner_country_id`属性。

# c# - C# 图形中的分割线

> ID：11539470
> 
> 赞同：0
> 
> 时间：2012-07-18T10:39:09.827
> 
> 标签：c#, graphics, drawing

我画一条线

```
Graphics gg = this.CreateGraphics();
Pen pen = new Pen(Color.Blue, 2);
gg.DrawLine(pen, Lines[0].StartPoint.X,  Lines[0].StartPoint.Y, 
                 Lines[0].EndPoint.X, Lines[0].EndPoint.Y); 
```

我怎样才能把这条线分成两部分......当我用鼠标右键单击并从 contextMenuStrip 中选择 split 时，这条线分成三部分

```
gg.DrawLine(pen, Lines[0].StartPoint.X,  Lines[0].StartPoint.Y, 
                 mouseposition.X, mouseposition.Y);
gg.DrawLine(pen, mouseposition.X, mouseposition.Y,
                 Lines[0].EndPoint.X, Lines[0].EndPoint.Y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:10:12.560

我对你的绘图逻辑不太了解。也许这会有所帮助：与其明确地绘制两条线部分，不如尝试`Line`相应地更改您的列表。（我假设它是一个`List<T>`，而不是一个数组）。

```
var line = new Line{ StartPoint = mouseposition, EndPoint = Lines[0].EndPoint };
Lines.Add(line);
Lines[0].EndPoint = mouseposition; 
```

现在，您始终可以`DrawLine`在循环中调用一次。

```
Graphics gg = this.CreateGraphics();
Pen pen = new Pen(Color.Blue, 2);

foreach (Line line in Lines) {
    gg.DrawLine(pen, line.StartPoint.X, line.StartPoint.Y,
                     line.EndPoint.X, line.EndPoint.Y);
} 
```

# android - 不幸的是，应用程序已在 android 模拟器中停止

> ID：11539472
> 
> 赞同：0
> 
> 时间：2012-07-18T10:39:13.260
> 
> 标签：android, android-relativelayout

我是android开发的新手。我正在使用 Eclipse Helios 和 AVD 15。我正在尝试使用一个小程序 Sliding Drawer。每当我想运行它时，编译器没有显示错误，但在模拟器中显示“不幸的是已停止。我卸载它然后运行它几次，清理项目，消除每个警告仍然出现。当我在调试模式下运行它时，控制台显示：-

```
[2012-07-18 12:03:34 - sliding drawer] ------------------------------
[2012-07-18 12:03:34 - sliding drawer] Android Launch!
[2012-07-18 12:03:34 - sliding drawer] adb is running normally.
[2012-07-18 12:03:34 - sliding drawer] Performing sliding.drawer.SlidingdrawerActivity 
activity launch
[2012-07-18 12:03:34 - sliding drawer] Automatic Target Mode: launching new emulator   compatible AVD 'And_em_1.5'
[2012-07-18 12:03:34 - sliding drawer] Launching a new emulator with Virtual Device  ![android debug image][1]'And_em_1.5'
[2012-07-18 12:03:54 - sliding drawer] New emulator found: emulator-5554
[2012-07-18 12:03:54 - sliding drawer] Waiting for HOME ('android.process.acore') to be launched...
[2012-07-18 12:05:33 - sliding drawer] HOME is up on device 'emulator-5554'
[2012-07-18 12:05:33 - sliding drawer] Uploading sliding drawer.apk onto device  'emulator-5554'
[2012-07-18 12:05:33 - sliding drawer] Installing sliding drawer.apk...
[2012-07-18 12:06:33 - sliding drawer] Success!
[2012-07-18 12:06:33 - sliding drawer] Starting activity  sliding.drawer.SlidingdrawerActivity on device emulator-5554
[2012-07-18 12:06:36 - sliding drawer] ActivityManager: Starting: Intent {  act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER]  cmp=sliding.drawer/.SlidingdrawerActivity }
[2012-07-18 12:06:38 - sliding drawer] Attempting to connect debugger to  'sliding.drawer' on port 8633 
```

我正在发送我的代码：

# .java 文件

```
package sliding.drawer;

import android.app.Activity;
import android.os.Bundle;

public class SlidingdrawerActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

# main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"    >
     <SlidingDrawer
          android:id="@+id/drawer"
          android:layout_width="320dip"
          android:layout_height="440dip"
          android:orientation="vertical"
          android:handle="@+id/handle"
          android:content="@+id/content">
    <ImageView
          android:id="@+id/handle"
          android:layout_width="48dip"
          android:layout_height="48dip"
          android:contentDescription="@string/s"
          android:src="@drawable/ic_launcher" />
    <AnalogClock
          android:background="#D0A0A0"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" />
    </SlidingDrawer>

  <TextView
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/hello" />
</RelativeLayout> 
```

然后一个窗口带有线程状态。

# 线程

```
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1956    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1981 
ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 123    
ActivityThread$H.handleMessage(Message) line: 1147  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 4424    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not   available [native method]            
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 784  
ZygoteInit.main(String[]) line: 551 
NativeStart.main(String[]) line: not available [native method] 
```

因为我是 android 新手，所以我很生气。请帮我。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:45:04.063

我认为问题是您忘记了 id 属性`AnalogClock`：

```
<AnalogClock
    android:id="@+id/content"
    android:background="#D0A0A0"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:46:13.290

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="320dp"
        android:layout_height="440dp"
        android:content="@+id/content"
        android:handle="@+id/handle"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/handle"
            android:layout_width="fill_parent"
            android:layout_height="20dp"
             />

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             >

            <AnalogClock
              android:background="#D0A0A0"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" />
        </RelativeLayout>
    </SlidingDrawer>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:50:53.827

在单独的视图中使用 AalogClock

```
<RelativeLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/ic_launcher" >

        <AnalogClock
          android:background="#D0A0A0"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" />
    </RelativeLayout> 
```

# ios - iOS 中的 performSelector 有什么用

> ID：11539479
> 
> 赞同：7
> 
> 时间：2012-07-18T10:39:21.817
> 
> 标签：ios, objective-c, performselector

**performSelector**的作用是什么？

比较：

```
[self btnClicked]; 
```

和

```
[self performSelector:@selector(btnClicked)];

-(void)btnClicked
{
    NSLog(@"Method Called");
} 
```

两者都对我来说很好。这两者有什么区别。`[self btnClicked]`和`[self performSelector:@selector(btnClicked)]`;

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T10:42:36.073

正如您所演示的那样，两者在使用时完全相同，但后者的优点是您可以动态确定在运行时调用哪个选择器。

```
SEL selector = [self gimmeASelectorToCall];
[self performSelector: selector]; 
```

[[[资源]]](https://stackoverflow.com/a/1493182/916299)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T10:50:28.837

苹果文档是你的朋友。

[NSObject 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

它

> 向接收者发送指定的消息并返回消息的结果。

尤其是：

> 该`performSelector:`方法**相当于直接向接收者发送一个 aSelector 消息**。例如，以下所有三个消息都执行相同的操作：
> 
> ```
> id myClone = [anObject copy];
> id myClone = [anObject performSelector:@selector(copy)];
> id myClone = [anObject performSelector:sel_getUid("copy")]; 
> ```
> 
> 但是， performSelector: 方法**允许您发送直到运行时才确定的消息**。变量选择器可以作为参数传递：
> 
> ```
> SEL myMethod = findTheAppropriateSelectorForTheCurrentSituation();
> [anObject performSelector:myMethod]; 
> ```
> 
> aSelector 参数应该标识一个不带参数的方法。对于返回对象以外的任何东西的方法，请使用 NSInvocation。

希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T10:43:01.227

`selector`对象允许您调用编译时不知道的方法。您只需要知道作为字符串的方法的名称即可调用它。

当您正在调用的方法的名称在编译时已知时，使用选择器会适得其反：代码变得不那么可读，没有明显的优势。当您编写的库需要调用与库分开编译的其他代码中的方法时，选择器提供了一种将两段代码解耦的方法。

例如，如果您正在编写一个可以在时间间隔结束时回调您的计时器类，您的计时器不知道它需要调用的函数的名称，因此它不能编写如下内容：

```
// We do not know if the function is called intervalHasExpired or something else
[target intervalHasExpired]; 
```

但是如果你给你的定时器一个选择器，定时器就可以给你回电话。

```
[myTimer scheduleWithTarget:self andSelector:@selector(myCompletion)]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T10:48:12.617

PerformSelector 基本上允许您决定在运行时（后期绑定）传递什么消息，而不是像普通 C 这样的语言。如果您知道目标 C 类中方法的名称，则可以使用

```
NSSelectorFromString() 
```

要将字符串转换为选择器，并让您的类使用 performSelector 调用该选择器。这样，您可以在运行时选择不同的函数来调用。您甚至可以使用配置文件选择要调用的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T10:41:10.170

`performSelector`调用已在类中声明和实现的方法。当您需要将代码中的操作附加到事件时使用它。

# iphone - 仅更新苹果故事中的应用程序名称，无需上传新的二进制文件

> ID：11539481
> 
> 赞同：-2
> 
> 时间：2012-07-18T10:39:23.087
> 
> 标签：iphone, ios, itunes, itunes-store, itunes-app

我已经在 Apple Story 中发布了应用程序。我只想更改 Apple Story 中的应用程序名称（我不需要新的二进制上传）。

我是否需要制作新的应用程序版本并再等待两周才能获得 Apple Review？在 Apple Story 中为已发布的应用程序更改应用程序名称的最快捷方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:46:18.270

你不能这样做。使用正确的名称再次上传应用程序，并拒绝已批准的应用程序。在命名应用程序之前三思而后行，你不能玩太多。

# android - 传感器更新率的动态变化

> ID：11539484
> 
> 赞同：3
> 
> 时间：2012-07-18T10:39:34.300
> 
> 标签：android, android-sensors

您可以在注册传感器侦听器时设置传感器更新速率（频率）。但是可以动态改变它吗？

这就是问题所在：我想以正常速率从加速度计获得读数，但是当达到某个阈值时，我希望尽可能快地获得读数。当然可以通过取消注册然后使用新的更新参数再次注册监听器来完成，但如果经常达到阈值，那么它可能会变得低效，我猜。这就是为什么我问是否有任何办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:34:00.603

不，这是不可能的。您可以做的是快速订阅读数，但除非达到您的阈值，否则丢弃不需要的事件。由于您订阅事件的速率无论如何只是对系统的提示（文档说“事件的接收速度可能比指定的速率更快或更慢。通常接收事件的速度更快”）这实际上可能是一个更健壮和比依赖系统更新率更有效的方法。

# jsf - JSF 2.X 在两个 xhtml 页面之间传递参数

> ID：11539485
> 
> 赞同：4
> 
> 时间：2012-07-18T10:39:37.067
> 
> 标签：jsf

我正在尝试在两个页面之间传递参数。我的**User.xhtml**页面具有 显示用户的**ui:repeat**。我也可以访问**用户 ID**。我想单击用户并转到他们的详细信息页面。我有**userDetails.xhtml**目前是空白的。

我也有一个豆子。

目前我正在使用**h:link**将一个页面导航到另一个页面。它有效。

我的任务是：点击用户并获取他们的详细信息。

请帮忙，我是JSF的新手

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:46:31.333

您可以尝试使用`<f:param>`：

```
<ui:repeat value="#{userBean.users}" var="u">
    ...
    <h:link outcome="userDetails" value="Details">
        <f:param name="userID" value="#{u.id}" />
    </h:link>
    ...
</ui:repeat> 
```

然后你可以得到这样的id：

```
@ManagedBean
@RequestScoped
public class UserDetailsBean {

    @ManagedProperty(value = "#{param.userID}")
    private String userID;

    // Getters and Setters
} 
```

# c# - 在asp.net服务器端创建一个定时器

> ID：11539495
> 
> 赞同：0
> 
> 时间：2012-07-18T10:40:19.247
> 
> 标签：c#, asp.net

我有一个 asp.net web 应用程序，在该应用程序中，一旦调用该函数，我将调用一个函数，它必须等待一段时间间隔，然后执行应该如何执行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:16:03.730

不建议在 asp.net 中休眠或延迟线程。如果您需要在特定时间后检索一些数据，请在一段时间后通过javascript进行ajax调用。

如果您想在一段时间后执行某些操作（例如发送电子邮件），请创建可以在计时器上运行的服务或控制台应用程序，创建某种持久队列，并让服务处理队列中的项目.

这将使您的应用程序在执行所需操作的同时保持快速响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:44:44.903

最简单的是：

```
Thread.Sleep(<mlsec>) 
```

最酷的是使用一些调度程序，例如[Quartz.net](http://quartznet.sourceforge.net/faq.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:43:23.600

你可以这样做`System.Threading.Thread.Sleep(5000);`5000 = 5 秒

因为你只需要一次

# ruby-on-rails - Controller#update 的奇怪事件根本没有更新模型

> ID：11539499
> 
> 赞同：2
> 
> 时间：2012-07-18T10:40:33.290
> 
> 标签：ruby-on-rails, ruby

我有一个奇怪的案例。我的同事和我都无法弄清楚为什么它不起作用。也许有人有类似的情况，或者可以发现我们忽略的任何东西。这是我们所拥有的：

Rails 3.2.6 mysql 数据库

我们有一个`Comment`模型。像这样：

```
# == Schema Information
#
# Table name: comments
#
#  id           :integer          not null, primary key
#  username     :string(255)
#  realname     :string(255)
#  email        :string(255)
#  title        :string(255)
#  content      :text
#  comment_date :datetime
#  article_id   :string(255)
#  created_at   :datetime         not null
#  updated_at   :datetime         not null
#  rating       :float
#

class Comment < ActiveRecord::Base
  attr_accessible :username, :realname, :email, :title, :content, :comment_date, :article_id, :rating
  belongs_to :article, class_name: Goldencobra::Article, foreign_key: "article_id"
end 
```

我试过`attr_accessible`有无效果。
我创建了一个`CommentsController`这样的：

```
class CommentsController < ApplicationController
  skip_before_filter  :verify_authenticity_token
  protect_from_forgery only: [:index]

  def index
    @article = Goldencobra::Article.find(params[:id])
    @comments = @article.comments
    respond_to do |format|
      format.rss
    end
  end

  def create
    @comment = Comment.new(params[:comment])
    @comment.save!
    flash[:notice] = 'Comment was successfully created.'
  rescue ActiveRecord::RecordInvalid
    render :action => :new
  end

  def update
    @comment = Comment.find(params[:id])
    if @comment && @comment.update_attributes(params[:comment])
      render text: "Success", layout: false
    else
      render text: "No success", layout: false
    end
  end
end 
```

我想要的是使用更新操作来更新评论模型。就像我们每次做的一样。小菜一碟……只是，它不会更新。这是我测试更新的方法：

```
require 'spec_helper'

describe CommentsController do

  def do_create
    @article = Goldencobra::Article.create(title: "Testartikel", article_type: "Default Show")
    post :create, :comment => {username: "johnny",
                               realname: "John Doe",
                               email: "johnny@gmail.com",
                               title: "Great title",
                               content: "What an awesome article.",
                               article_id: @article.id,
                               rating: 3.4}
  end

  it "should update a comment" do
    do_create
    put :update, id: Comment.first.id, comment: {title: "New great title"}
    Comment.first.title.should eql("New great title")
  end
end 
```

我通过 REST 客户端（OS X 上的 Rested.app）更新尝试了同样的事情 ![宁静的尝试参数](../Images/9b142d5ea76e417cf94daa0d776f8da0.png) ![宁静的尝试响应](../Images/d001e9dc901fd8d8e1fadb111d1c5654.png)

我总是得到“成功”的回应。`.update_attributes()`总是成功。问题是：它没有任何改变。这是来自 restful 尝试的控制台日志：

```
Started PUT "/comments/10" for 127.0.0.1 at 2012-07-18 12:35:13 +0200
Processing by CommentsController#update as HTML
  Parameters: {"comment"=>{"title"=>"neuer test"}, "id"=>"10"}
  Comment Load (0.4ms)  SELECT `comments`.* FROM `comments` WHERE `comments`.`id` = 10 LIMIT 1
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms | Solr: 0.0ms) 
```

这是它的样子，当我在 rails 控制台中尝试同样的薄时：

```
1.9.2p290 :017 > Comment.last.update_attributes(title: "test 2")
  Comment Load (0.8ms)  SELECT `comments`.* FROM `comments` ORDER BY `comments`.`id` DESC LIMIT 1
   (0.2ms)  BEGIN
   (0.5ms)  UPDATE `comments` SET `title` = 'test 2', `updated_at` = '2012-07-18 09:48:39' WHERE `comments`.`id` = 10
   (3.4ms)  COMMIT
 => true 
```

缺少的是`UPDATE`评论`SET`标题`= 'test 2',`updated_at`= '2012-07-18 09:48:39' WHERE`评论`.`id `= 10`。谁能告诉我为什么我的控制器不更新模型？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:53:30.113

您的其余客户端在您的 params 哈希中缺少一个参数：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"gzC0IKScOUu+RBacL1YREpe4aE4KgnD0lqOgMhwRKVA=" 
```

它是authenticity_token。它在 Rails 应用程序表单中的位置为：

```
<input name="authenticity_token" type="hidden" value="gzC0IKScOUu+RBacL1YREpe4aE4KgnD0lqOgMhwRKVA=" /> 
```

因此，您无法从其他应用程序更新记录（正如您尝试做的那样）。您可以在使用以下过滤器之前跳过此操作：

```
skip_before_filter :verify_authenticity_token 
```

在您的控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:29:54.227

您确定您没有尝试将“标题”更新为其旧值吗？我知道这听起来很愚蠢，但有时我忽略了一些明显的事情，需要另一个人来指出我一些明显的事情。

# sql - 如何优化以下 oracle 查询以仅在一次连接中获取 from 和 to 国家/地区名称？

> ID：11539500
> 
> 赞同：2
> 
> 时间：2012-07-18T10:40:36.677
> 
> 标签：sql, oracle

下面是我试图运行的查询。

```
 select 
          from_country_id, 
          to_country_id, 
          fromCountry.country_name as from_country_name, 
          to_country_id.country_name as to_country_name
    from TourDetails t 
    left join country fromCountry on fromCountry.id = t. from_country_id
    left join country toCountry on toCountry.id = t. to_country_id 
```

我有一个旅游详细信息表，我在其中保存来自国家/地区 ID 和国家/地区 ID。我有另一个国家表，其中包含国家 ID 和国家名称。

现在，当我查询 tourdetails 表时，我还需要获取国家名称。为此，我两次使用左连接和县表。

有什么办法我不必两次加入这个国家表，仍然得到来自国家和去往国家的国家名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:00:45.693

即使您无法优化查询，也有可能优化查询的执行。您应该检查查询的解释计划，如果它使用嵌套循环，则可能值得强制散列`/*+USE_HASH(country) */`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:23:59.243

它归结为基于元组（ [from, to] in tour）检索国家/地区详细信息（名称）。

据我所知，有可能与`exists`. 请查看以下是否适合您。

架构：

```
create table country (
  country_id varchar2(10)
);

create table tour
(
  from_country_id varchar2(10),
  to_country_id varchar2(10)
); 
```

数据：

```
insert into country select 'AU' from dual;
insert into country select 'UA' from dual;
insert into country select 'UK' from dual;

insert into tour select 'AU', 'UA'  from dual;
insert into tour select 'UK', 'UA'  from dual;
insert into tour select 'UA', 'AU'  from dual; 
```

解决方案本身：

```
select
  country_from.country_id from_, 
  country_to.country_id to_ 
from 
  country country_from,
  country country_to
where exists
  (select
     from_country_id, 
     to_country_id
   from tour 
   where 
     from_country_id = country_from.country_id 
    and 
     to_country_id = country_to.country_id) 
```

不需要内部连接:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:15:35.637

内连接有时比左连接运行得快得多。在对数据实施参照完整性的情况下，内连接和左连接将产生相同的结果。引用完整性意味着外键的每个实例都引用引用表中的现有行。

DBMS 可以通过数据定义中声明的约束来强制执行参照完整性。有时可行的替代方法是在加载新数据的过程中强制执行参照完整性。让 DBMS 强制执行参照完整性通常是可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:02:51.177

您可以通过一个连接来完成它，但代价是连接条件和代码中的`or`(or `in`) 可能不太清楚：

```
select t.from_country_id,
    t.to_country_id,
    max(case when c.id = from_country_id then c.country_name end)
        as from_country_name,
    max(case when c.id = to_country_id then c.country_name end)
        as to_country_name
from tourdetails t
join country c on c.id = t.from_country_id or c.id = t.to_country_id
group by t.from_country_id, t.to_country_id; 
```

这和有两个连接之间可能没有太大的性能差异，您需要测试来检查。在这种情况下，取决于您所说的“优化”是什么意思。我想这里的风格可能更像是一个问题——在减少连接数量与对返回数据进行更复杂的操作之间进行权衡。

# c++ - cout 在 VC++ 10 中导致访问冲突

> ID：11539502
> 
> 赞同：0
> 
> 时间：2012-07-18T10:40:47.013
> 
> 标签：c++, visual-c++, access-violation, cout

抱歉，我在 C++ 方面相对较新，所以我正在调试这段代码，这在第三次调用 cout << 时给了我访问冲突（就在 load_array 返回之后）：

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#define FILENAME "H:\\test.preisach"
#define ROWS 32760
#define COLUMNS 4
using namespace std;

class cPreisach {
public:
    float input;
    float pdf[ROWS][COLUMNS];

    void load_array (){
    char c;
    float value=0;
    int getnum=0, rowno=0, columnno=0, power=0;
    bool decimalpoint=false, exponential=false;
    ifstream pdf_file (FILENAME);
    if (pdf_file.is_open()) {

  while (pdf_file.good()) {
    c=pdf_file.get();
    switch (c) {
      case '0': if (exponential == false) {value = (value*10); if (decimalpoint=true) getnum++;} else power=power*10; break;
      case '1': if (exponential == false) {value = (value*10)+1; if (decimalpoint=true) getnum++;} else power=(power*10)+1; break;
      case '2': if (exponential == false) {value = (value*10)+2; if (decimalpoint=true) getnum++;} else power=(power*10)+2; break; 
      case '3': if (exponential == false) {value = (value*10)+3; if (decimalpoint=true) getnum++;} else power=(power*10)+3; break;
      case '4': if (exponential == false) {value = (value*10)+4; if (decimalpoint=true) getnum++;} else power=(power*10)+4; break;
      case '5': if (exponential == false) {value = (value*10)+5; if (decimalpoint=true) getnum++;} else power=(power*10)+5; break;
      case '6': if (exponential == false) {value = (value*10)+6; if (decimalpoint=true) getnum++;} else power=(power*10)+6; break;
      case '7': if (exponential == false) {value = (value*10)+7; if (decimalpoint=true) getnum++;} else power=(power*10)+7; break;
      case '8': if (exponential == false) {value = (value*10)+8; if (decimalpoint=true) getnum++;} else power=(power*10)+8; break;
      case '9': if (exponential == false) {value = (value*10)+9; if (decimalpoint=true) getnum++;} else power=(power*10)+9; break;
      case '.': decimalpoint=true; break;
      case 'E': exponential = true; break;
      case ' ': if (value != 0){
                  value = value/(10^(getnum-power)); /*cout << rowno << columnno << "\n";*/ pdf[rowno][columnno] = value; value=0; power=0; getnum=0; decimalpoint=false; 
              exponential=false; columnno++;
            } break;
      case '\n': value = value/(10^(getnum-power)); /*cout << "newline" << rowno << columnno << "\n";*/ pdf[rowno][columnno] = value; value=0; power=0; getnum=0; decimalpoint=false; 
        exponential=false; rowno++; columnno=0; break;
    }
  }
  pdf_file.close();
}
}

void do_calculation (float input) {}
};

int main () {
  float input;
  cout << "welcome to the preisach function \n";
  cPreisach Preisach;
  cout << "created object, loading array \n";
  Preisach.load_array();
  cout << "please input magnetic field strength \n";
  cin >> input;
  Preisach.do_calculation (input);
  return 0;
} 
```

我不知道为什么 cout 会导致访问冲突，但它一定与数组有关，因为如果该函数被注释掉，cout 就可以了。

谢谢

编辑，因为我还不允许回答我自己的问题：这确实是缓冲区溢出，部分原因是我忘记从 [0][0] 而不是 [1][1] 递增。不知道为什么我没有想到；相当愚蠢。谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:02:19.780

我猜这个错误是在访问文件时引起的。您应该检查程序是否可以访问该文件并且它没有损坏。

我看到的另一件事是您从不打开文件，而是检查它是否已打开。

```
ifstream pdf_file (FILENAME); 
if (pdf_file.is_open()) { 
```

那应该看起来更像

```
ifstream pdf_file;
pdf_file.open(FILENAME);
if (pdf_file.is_open()) { 
```

如果文件尚未打开并且您的 if 必须失败，则程序肯定无法从文件中读取。

# android - Html 解码到文本视图

> ID：11539503
> 
> 赞同：0
> 
> 时间：2012-07-18T10:40:48.640
> 
> 标签：android

我在文本视图中遇到标题问题。我使用：`title.setText(Html.fromHtml(headerId));`将文本从 html 转换为 textview。一切都很好，但是当我在 html 中有或其他标题时，我得到一个 html，但边距有一些空间。当我做一些这样的事情时： `title.setText(Html.fromHtml(Html.fromHtml(headerId).toString));`并构建版本，然后我转向旧版本，我的标题位于右侧的正确位置，没有任何空间。这是它的外观： ![在此处输入图像描述](../Images/b96802937d885abf05b5b26648934010.png)

这就是它的外观： ![在此处输入图像描述](../Images/ae62b4fb95cf8d2deb10e6ad55bb9f58.png)

如您所见，Cola Bare 向右对齐，但是当我第一次开始时，该标题未对齐。我如何才能从第一次运行开始工作？

编辑看起来来自 headerId 的代码： ![在此处输入图像描述](../Images/0a8a7857c878d6d6a2944f0cd5554aca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:33:37.050

我通过以下方式解决了这个问题：`replaceAll("^<h1>\\s*","<h1>").replaceAll("^<h2>\\s*","<h2>").replaceAll("^<h3>\\s*","<h3>")`

# php - 解析在相同元素上有两种不同格式的html页面

> ID：11539505
> 
> 赞同：0
> 
> 时间：2012-07-18T10:40:54.257
> 
> 标签：php, simple-html-dom

在同一个 html 页面中，有两种不同格式的相同包含：

第一个是：

```
<div class="gs"><h3 class="gsr"><a href="http://www.example1.com/">title1</a> 
```

第二个是：

```
<div class="gs"><h3 class="gsr"><span class="gsc"></span><a href="http://www.example2.com/">title2</a> 
```

如何在可以使用 simple_html_dom 处理两种不同格式的代码中获取链接和标题？我试过这段代码，但它不起作用：

```
foreach($html->find('h3[class=gsr]') as $docLink){
   $link = $docLink->first_child();
   echo $link->plaintext;
   echo $link->href;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:01:08.600

采用`getElementsByTagName($tag);`

它将在 dom 中找到所有指定的标签...

请参阅此链接[getElementsByTagName](http://php.net/manual/en/domdocument.getelementsbytagname.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:08:10.023

从[文档](http://simplehtmldom.sourceforge.net/manual.htm)中似乎有一个后代选择器的概念

```
// Find all <td> in <table> which class=hello 
$es = $html->find('table.hello td'); 
```

然后

```
foreach($html->find('h3[class=gsr] a') as $link) {
   echo $link->plaintext;
   echo $link->href;
} 
```

应该做你的工作。[顺便说一句，我不太了解 simple_html_dom ;) 试一试]

**编辑**

还有嵌套选择器

```
// Find first <li> in first <ul> 
$e = $html->find('ul', 0)->find('li', 0); 
```

所以

```
foreach($html->find('h3[class=gsr]') as $docTitle) {
   $link = $docTitle->find('a', 0); //get the first anchor tag
   echo $link->plaintext;
   echo $link->href;
} 
```

也应该工作

# sql - 从多个查询返回匹配的 SQL

> ID：11539506
> 
> 赞同：2
> 
> 时间：2012-07-18T10:41:01.073
> 
> 标签：sql, vbscript

我需要返回出现在同一个表中的两个或多个查询中的值。在这里感觉有点像菜鸟，但只是看不到树木的树林。

我有一个分配给不同组的用户表。我只需要返回出现在所有请求组中的用户：

```
User   Group
frank  1
Jane   2
Tom    2
frank  2
Jane   1
Tom    3 
```

这是我需要输出的：

```
Result for Group 1 & 2:
frank
Jane

Result for Group 2 & 3:
Jane
Tom 
```

似乎是一个非常 101 的问题，但感谢任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:44:50.420

```
select user
from users
where group_id in (1,2)
group by user
having count(*) = 2; 
```

您需要将`having count(*) = 2`条件调整为所需的组数。

如果一个用户可以多次分配到同一个组，则需要考虑 Madhivanan 的评论：

```
select user
from users
where group_id in (1,2)
group by user
having count(distinct group_id) = 2; 
```

（我使用列名`group_id`是因为`group`是保留字，应该用作列名）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T10:45:48.817

```
select user from table
where group in (1,2)
group by user
having count(distinct group)=2 
```

# regex - 记事本正则表达式乘法运算符

> ID：11539507
> 
> 赞同：0
> 
> 时间：2012-07-18T10:41:02.540
> 
> 标签：regex, notepad++, operator-keyword, multiplication

如何通过指定适用于多少个副本来在 Notepad++ 中使用乘法运算符？该手册告诉（据我所知它是标准的）使用`{n}`. 但这不起作用。
例如，如果我有一个包含文本 123123 的文件。然后`\d{2}`返回“找不到文本”，但`\d\d`按预期工作。这是非常基本和微不足道的，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T21:19:07.997

应该是v5的bug。

在当前的 Notepad++ 版本 6.9.2 中，`\d{2}`可以正常工作。

# php - php - 真实或真实的区别？

> ID：11539511
> 
> 赞同：31
> 
> 时间：2012-07-18T10:41:18.357
> 
> 标签：php

我想知道，在 PHP 中，我见过人们使用这两种情况：

```
if($var === TRUE)

if($var === true) 
```

它们之间是否存在实际差异或用于布尔值的编码标准/格式？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-18T10:42:29.010

根本没有区别。从[文档](http://php.net/language.types.boolean)：

> 要指定布尔文字，请使用关键字 TRUE 或 FALSE。两者都不区分大小写。

[根据 PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md#25-keywords-and-truefalsenull)，正如 Laxus 和 Paul Bain 在他们的评论中所述，*标准*是将它们写成小写。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T11:26:06.910

小写通常被认为是一种很好的做法，请参阅 stackoverflow 上小写的颜色 :)

并且不相关，但您应该始终在条件中首先使用 true `true === $var`，这是一个很好的做法，可以在错误输入条件时避免偷偷摸摸的错误，例如：`$var = true`

# adobe - 如何为 Adob e CQ5 创建 ajax 搜索组件

> ID：11539513
> 
> 赞同：3
> 
> 时间：2012-07-18T10:41:28.767
> 
> 标签：adobe, aem

我想创建一个搜索框组件，类似于 CQ5 开箱即用的那个。但我希望它具有以下功能：

*   AJAX 搜索（这意味着整个页面在提交时不需要刷新）
*   自动建议（我希望管理员能够选择带有自动建议字词的 Excel 电子表格）
*   能够指定一个文件夹进行搜索（这已经是现有搜索中的一项功能）

我正在考虑使用免费的 jquery 插件来提供 ajax 和自动建议功能，但我是 CQ5 的新手，所以仍在弄清楚什么是可能的。

*   使用 jQuery 插件作为起点是个好主意吗？
*   一旦我开发了 jQuery，我需要做什么才能将它集成到 CQ5 组件中？
*   在我开始之前，有没有办法下载或购买已经具备上述部分或全部功能的 CQ5 搜索组件？

请原谅我的菜鸟问题！

非常感谢，

凯蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:33:16.813

当然，jQuery 插件可以工作。我将首先在 /libs/foundation/components/search 复制现有的 CQ 搜索组件并扩展 search.result 类。clientlibs 文件夹将包含您的 JS 和插件。有关 clientlibs 的详细讨论，请参阅此帖子：http: [//blogs.adobe.com/livecycle/2012/02/cq5-clientlib-explained-by-example.html](http://blogs.adobe.com/livecycle/2012/02/cq5-clientlib-explained-by-example.html)

# css - 是否可以阻止来自 CSS 的“外部”请求？

> ID：11539514
> 
> 赞同：0
> 
> 时间：2012-07-18T10:41:31.760
> 
> 标签：css, security

我正在尝试开发一个 Web 应用程序，它允许用户上传他们自己的 CSS 来设置它所服务的页面的样式，有点像主题。这些主题可以在用户之间共享，因此我不希望任何人能够引用除我的域之外的“外部”资源 - 因此他们无法获取 IP 地址或根据提出请求的人提供不同的内容等等，它应该在网络应用程序中完全独立。

换句话说，只有来自指定域的资源才可用于检索，而没有其他资源。

有什么方法可以实现这一点或具有相同效果的阻止 Web 应用程序“外部”请求的效果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:49:32.257

让一个 php 脚本读取 CSS 文件并找到对在其属性中使用 http://、https:// 等文件的任何引用 - 如果它们匹配，则删除它或警告用户删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:46:04.320

您可以简单地验证所有此类 URL 是否确实指向您的域。

# java - Spring + Tomcat：设置相对文件路径

> ID：11539517
> 
> 赞同：0
> 
> 时间：2012-07-18T10:42:00.473
> 
> 标签：java, spring, tomcat

我在 Tomcat7 上部署 Spring 3 应用程序。我正在使用 OXM unmarshaller，所以我需要像这样创建 StreamSource：

```
unmarshaller.unmarshal(new StreamSource(new FileInputStream(dbSetupPath))) 
```

我像这样为 dbSetupPath 设置值，它在**单元测试**中工作：

```
@Value("src/main/resources/db-setup.xml")
String dbSetupPath; 
```

但是，当我在 Tomcat 上部署时，我得到了 FileNotFoundException。什么是让我的测试通过并且 Tomcat 正常工作的正确路径？我正在部署exploded:war atm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:47:22.300

当您在 tomcat 上部署时，您的所有资源文件夹文件都会进入 WEB-INF/classes 文件夹中的 .war 文件。

你需要尝试

```
@Value("classpath:/db-setup.xml") 
```

所以tomcat会检查类路径中的db-setup.xml

有关更多和适当的详细信息，请参阅

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/new-in-3.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/new-in-3.html)

第**2.5.3.1 节基于 Java 的 bean 元数据**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:00:22.193

将您的 db-setup.xml 与图片相同

![在此处输入图像描述](../Images/3f8bf4239bb49082ca595400324f312c.png)

并改变这个

```
@Value("db-setup.xml")
String dbSetupPath; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:09:32.147

我认为您可以指定这样的路径：

${webAppRoot}WEB-INF/db-setup.xml

并将 db-setup.xml 放入 WEB-INF 文件夹（或创建一些子文件夹）。

此外，为了正确使用这种方法，您需要在 web.xml 中指定这样的参数：

```
<context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>webAppRoot</param-value>
</context-param> 
```

Spring 会自动将这个参数注入到您的 Web 应用根文件夹的实际路径。

这适用于我的日志记录，这就是为什么我认为它也适用于你的情况。

[这是关于 webAppRootKey 的讨论](https://stackoverflow.com/questions/5014651/webapproot-in-spring)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:05:25.073

所以我的解决方案是将值注入 org.springframework.core.io.Resource 而不是像这样的普通字符串：

```
@Value("classpath:/db/db-setup.xml")
Resource dbConfig; 
```

然后我访问了底层文件并将其提供给编组器：

```
unmarshaller.unmarshal(new StreamSource(dbConfig.getFile()); 
```

# c# - 拒绝对文件夹的继承？

> ID：11539520
> 
> 赞同：0
> 
> 时间：2012-07-18T10:42:04.273
> 
> 标签：c#, ntfs

如何以编程方式从文件夹中删除继承的权限，从父文件夹继承的权限..

要不然

从高级安全选项卡中取消选中复选框“从父级继承适用于子对象......等的权限整体”......？

# c++ - 使函数内联会影响绑定到其参数的临时对象的生命周期吗？

> ID：11539521
> 
> 赞同：4
> 
> 时间：2012-07-18T10:42:09.570
> 
> 标签：c++, reference, language-lawyer

这个问题与[此 C++ 静态分析规则是否有意义？](https://stackoverflow.com/questions/11538478/does-this-c-static-analysis-rule-make-sense-as-is)，但有些不同。我现在实现了一个静态分析规则来查找函数返回其 const 引用参数作为引用的情况，例如

```
const X& f(const X& x) { return x; } 
```

当临时对象绑定到 时，这可能是不可靠的`x`，因为临时对象的生命周期将在 的返回值`f`可以绑定到调用者中的引用之前结束。换句话说，这将是有问题的：

```
const X& r = f(X()); 
```

在运行规则时，我`min`在标准库中找到了一个如下所示的实现：

```
template<typename _Tp>
inline const _Tp&
min(const _Tp& __a, const _Tp& __b)
{
  // concept requirements
  __glibcxx_function_requires(_LessThanComparableConcept<_Tp>)
  //return __b < __a ? __b : __a;
  if (__b < __a)
    return __b;
  return __a;
} 
```

这清楚地将其 const 引用参数作为引用返回，但函数是`inline`. 这对临时寿命有影响吗，还是真的有点狡猾？该函数标有以下注释，因此它显然可以在临时对象上调用：

```
*  This is the simple classic generic implementation.  It will work on
*  temporary expressions, since they are only evaluated once, unlike a
*  preprocessor macro. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:53:07.997

函数是否内联对任何临时对象的生命周期都没有影响。`f`将像您的(or )这样的函数的返回值绑定`std::min`到具有本地范围的 const 引用是最终得到悬空引用的可靠方法。但我看不出哪里有任何真正的危险，因为这不是你在合理的代码中会做的事情，除非引用首先是长期存在的东西，例如：

```
T const& obj = std::min( myMap['x'], myMap['y'] ); 
```

除非在这种特殊情况下，局部变量将是值，而不是引用。

# php - 在tag <select name="Country" id="Country" style="width:200px;"><option value="0">--选择国家--</option> ID：11539525 赞同：-1 时间：2012-07-18T10:42:20.497 标签：php, html 回答 #1 赞同：0 时间：2012-07-18T10:48:37.287 您不能在<select>标签内放置隐藏值，但是如果您想向标签中添加自定义属性，option您可以这样做 <option value="<?php echo $row_c['COUNTRY_CODE_PARCELFORCE'];?>"<?php if($row_c['COUNTRY_DESC']== $row['COUNTRY']) echo 'selected="selected"'?> attribute1="<?php echo $row_c['CUSTOM_ATTR'];?>"><?php echo $row_c['COUNTRY_DESC'];?></option> 要使用 Jquery 访问 cutom 属性，请像这样使用 $('#Country').change(function(){ alert($(this).find('option:selected').attr('attribute1')); }); 回答 #2 赞同：0 时间：2012-07-18T10:49:48.613 我不知道你为什么要这样做。我建议在选择代码之外执行 while 循环。 所以你得到 <?php // sql stuff $options = ''; $hidden = ''; while($row_c = mysql_fetch_assoc($sql_c)){ $count_no++; $options .= "<option value="<?php echo $row_c['COUNTRY_CODE_PARCELFORCE'];?>"<?php if($row_c['COUNTRY_DESC']== $row['COUNTRY']) echo 'selected="selected"'?>><?php echo $row_c['COUNTRY_DESC'];?></option>" $hidden .= "<input type="hidden" name='country_code' value="<?php echo $ro_c['COUNTRY_CODE']?>">"; } // now the select ?> <select> <?php echo $options; ?> </select> <!-- hidden values --> <?php echo $hidden; ?> 您的评论说这是出于验证目的。我想不出你为什么需要这样做来进行验证。如果它们已经存储在数据库中，那么您应该在表单发布/提交后对数据库进行验证查找。 否则，请使用@ubercooluk 的方法（但请记住我的评论）。</select>

# php - 使用 SQL 查询回显表

> ID：11539526
> 
> 赞同：0
> 
> 时间：2012-07-18T10:42:23.563
> 
> 标签：php, sql, debugging, html-table, echo

```
<?php
$product_list="";
if(isset($_GET['cat'])){
$sql = mysql_query("SELECT*FROM products WHERE category LIKE'$category'");

while($row=mysql_fetch_array($sql)){
$tablerow='3';
$product_list.='<tr>';
   while($tablerow >= 0){
      $id=$row["id"];
      $name=$row["name"];
      $price=$row["price"];
      $date_added = strftime("%b %d, 20%y",strtotime($row["date_added"]));
      $discriptiontags = $row['category'];
      $discription = $row['subcategory'];
      $size = $row['details'];
      $qty= $row['inv'];
      $product_list.='<td><img src="inventory_images/'.$id.'.jpg" width="250" height="167"/><br/>$name</td>';
      $tablerow=$tablerow-1;
}
$product_list.='</tr>';
 }
}else{
$product_list = "no products in this category";
exit();
 }          
?> 
```

所以这背后的想法是；使用 $_GET 为我的数据库获取类别标签，并使用 LIKE 查找行信息并在一个表单元格中显示每行信息，该表来自一个跨 3 列的表，并动态添加其他行。

这是应该显示的地方的html

```
 <table width="760px" border="1" cellpadding="4">
      <?php echo $product_list ?>
      </table> 
```

[链接到相关页面](http://glamourpawscollars.com/products.php?cat=green&tab=1)

我选择绿色类别进行测试，因为它有 3 个项目。

也由于某种原因，如果未设置 url 变量，则页面根本不显示...????

页面上的其余 php：

```
<?php 
///conect to mysql
///grab page variable
include "storescript/connect_to_mysql.php";
$category="";
$tab="-1";
if(isset($_GET['cat'])){
    $category=$_GET['cat'];
}
if(isset($_GET['tab'])){
    $tab=$_GET['tab'];
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:54:02.697

不要使用 exit(); 它停止脚本。所以它从不“回声”，甚至“没有该类别的产品”。

如果包含第一个代码，请使用 return；而不是退出（）。但我看不到你在哪里插入了哪些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:03:59.060

您必须使用`category LIKE '%red%'`来匹配诸如“red medium Christmas”和“alsored category”等类别。`category LIKE 'red'`仅匹配“红色”类别。

请参阅[http://www.techonthenet.com/sql/like.php](http://www.techonthenet.com/sql/like.php)了解更多关于`LIKE`.

# android - 阻止/取消阻止呼叫。传入/传出之间的区别

> ID：11539529
> 
> 赞同：0
> 
> 时间：2012-07-18T10:42:32.580
> 
> 标签：android, callblocking

我正在尝试控制来自我的应用程序的呼叫。

感谢这篇文章[Blocking Incoming call](http://androidsourcecode.blogspot.in/2010/10/blocking-incoming-call-android.html) - [Call Control in Android](http://prasanta-paul.blogspot.com.es/2010/09/call-control-in-android.html) - [Question Stackoverflow](https://stackoverflow.com/questions/1083527/how-to-block-calls-in-android)和[这个](https://stackoverflow.com/questions/9971524/how-to-resolve-this-error-com-android-internal-telephony-cannot-be-resolved-to)。我能够取消来电/去电

我注册了 ITelephony 类（com.android.internal.telephony.ITelephony），

在 Manifest 中定义了一个接收者：

```
 <receiver android:name=".PhoneCallReceiver" >
        <intent-filter android:priority="100" >
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver> 
```

在 PhoneCallReceiver 中，我重写了 OnRecive 方法，使用反射来实例 ITelephony。

```
 @Override
public void onReceive(Context context, Intent intent) {
    Log.v(TAG, "Receving....");
    TelephonyManager telephony = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    try {
        Class c = Class.forName(telephony.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        telephonyService = (ITelephony) m.invoke(telephony);
        //telephonyService.silenceRinger();
        if (!(InfoAct.ismodguiaon(context))){
            telephonyService.endCall();
        } else {

        }

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

这可行，但我想区分来电和去电，但我不知道如何。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:05:37.673

在清单中，用于拨出呼叫的接收器标记操作，

参考[这个](http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/)

# c#-4.0 - 检查对象的 Null 值

> ID：11539531
> 
> 赞同：0
> 
> 时间：2012-07-18T10:42:36.640
> 
> 标签：c#-4.0

我有下面的代码：

```
class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Address address { get; set; }

    public Person GetFullName()
    {
        return new Person { };
    }
}

public class Address
{
    public int Name { get; set; }
} 
```

我需要检查 Person 是否不为空以及它包含的地址。为此，以下代码有效：

```
 class Program
    {

        static void Main(string[] args)
        {

            Person person = new Person();
            person.FirstName="bla";
            if (person != null && person.address != null)
            {
                Console.WriteLine(person.address.Name);
            }

        }
    } 
```

我的问题：

这段代码如何作为 person.Address 执行应该抛出 Null 异常？

```
if (person != null && person.address != null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:55:45.707

你的代码很好

```
if (person != null && person.address != null) 
```

当`person`为 null 时起作用，因为 C# 一旦遇到评估为假的语句，就会终止表达式中语句的评估。

您的代码与以下代码相同：

```
if (person != null)
{
    if (person.address != null)
    {
        // do stuff
    }
} 
```

其他语言（Ada）不一样。在那里，计算表达式的顺序不是由操作的“成本”决定或决定的。如果您想强制执行评估顺序，则必须使用`and then`(or `or else`) 构造：

```
if (person != null and then person.address != null) 
```

它使代码更清晰，但这就是它所要做的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:49:49.663

检查无效性的正确方法是`if(person != null)`. 如果你这样做`if(!person.Equals(null))`了，你会得到一个 NullReferenceException `if person == null`。这有点滑稽，因为避免这个例外是首要目标。

您的代码会执行，因为`person != null`只有 if 为 true 时它才会开始查看下一条语句 is `person.address != null`。如果第一个语句返回 false，则由于 && 运算符，它甚至不会查看下一个语句。

编辑：您可能还想知道它`person.address.Name`永远不会为空，因为这是一个整数。默认情况下，它的 value = 0 而不是 null。当然，这仅适用于类成员字段，因为本地方法级别的字段必须在使用前显式分配一个值。

# android - Android：如何在原生活动之上添加另一个视图

> ID：11539532
> 
> 赞同：2
> 
> 时间：2012-07-18T10:42:35.980
> 
> 标签：android, user-interface, java-native-interface, android-ndk

我是 NDK 的新手，我正在使用 3D 引擎 -Ogre 编写游戏。我在清单中有这样的东西指向我的本地库：

```
 <activity
        android:name="android.app.NativeActivity"
         android:screenOrientation="landscape"
          android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
         <!-- Tell NativeActivity the name of or .so -->
        <meta-data android:name="android.app.lib_name" android:value="OgreAndroidTemplate" /> 
```

然后我通过从另一个 java Activity 调用它来启动这个 Activity：

```
Intent engineIntent = new Intent( _context, NativeActivity.class);
            startActivity(engineIntent); 
```

但是，我希望在我的游戏（等菜单按钮或广告）之上进行一些 UI 处理，并希望在 java 端进行处理。有什么方法可以在我的游戏之上为此添加另一个视图或活动？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:47:18.757

不确定 NDK，但如果您使用的是普通的 Android XML 布局，则可以使用 FrameLayout

```
<FrameLayout>
   <YourNdkView/>
   <LinearLayout>
      <!-- buttons etc -->
   </LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:54:09.297

通过包含标签，您可以在原生活动之上添加另一个视图：

```
<include:layout="@layout/yourxml"/> 
```

任何你想添加视图的地方。

# c++ - 是否可以为函数参数指定多种类型？

> ID：11539535
> 
> 赞同：6
> 
> 时间：2012-07-18T10:42:59.117
> 
> 标签：c++, polymorphism, multiple-inheritance

在 C++ 中可以将函数参数定义为不止一种类型吗？

```
#include <iostream>
using namespace std;

class A {
public:
   void  PrintA() { cout << "A" << endl;}
};

class B {
public:
   void  PrintB() { cout << "B" << endl;}
};

class C: public A, public B {
public:
   C(){;}
};

class D: public A, public B {
public:
   D(){;}
};

///
void __printall__(A*a, B*b){
   a->PrintA();
   b->PrintB();
}
#define printall(a) __printall__(a,a)
///

int main(int argc, char *argv[]){
   C c;
   D d;
   printall(&c);
   printall(&d);
} 
```

我想用不使用宏的东西来改变注释之间的代码。我不会强制转换指针，因为我想保持类型安全。我什至不会在 C/D 和 A/B 之间引入另一个类，因为实际上我的类层次结构比代码中显示的要复杂一些，并且不希望重新设置从 A 或 B 派生的所有类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:53:17.997

就像[@Torsten 建议](https://stackoverflow.com/a/11539772/20984)的那样，一个可能的解决方案是使用函数模板，以便您可以传递任何类型的参数。但是，一个简单的模板将适用于提供适当成员的任何类型（在本例中为`printA`and `printB`），因此以下函数模板

```
template <typename T>
void printAll(T const & t)
{
    t.printA();
    t.printB();
} 
```

将使用以下类型

```
struct Foo
{
    void printA() const { std::cout << "FooA\n"; }
    void printB() const { std::cout << "FooB\n"; }
}

printAll(Foo()); 
```

即使`Foo`不是派生自`A`or `B`。这可能是可取的，但如果您真的想强制执行参数必须是 a`A`和 a的事实`B`，您可以在函数中使用静态断言来检查：

```
#include <type_traits>

template <typename T>
void printAll(T const & t)
{
    static_assert(std::is_base_of<A, T>::value && std::is_base_of<B, T>::value,
                  "T must be derived from A and B");

    t.printA();
    t.printB();
} 
```

另一种解决方案是`std::enable_if`仅在模板参数确实是`A`and的派生类时才使用定义函数模板`B`：

```
template<
    typename T ,
    typename = typename std::enable_if<
        std::is_base_of<A, T>::value &&
        std::is_base_of<B, T>::value
    >::type
>
void printAll(T const & t)
{
    t.printA();
    t.printB();
} 
```

* * *

*注意*:`static_assert`和是 C++11 特性`enable_if`。`is_base_of`如果您正在使用 C++03，您可以在各种 Boost 库中找到等价物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T10:57:37.513

模板版本只会选择传递给函数的类型：

```
template < class T >
void printall( T* t )
{
   t->printA();
   t->printB();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:01:15.800

托斯滕是对的。相反，如果在运行时看起来像“后期绑定”，您可以使用函数指针。[你可以在这里](http://www.newty.de/fpt/intro.html#why)找到一个清晰的例子。

# zeromq - 在 ZeroMQ 中进行多部分或不进行多部分

> ID：11539536
> 
> 赞同：5
> 
> 时间：2012-07-18T10:42:59.857
> 
> 标签：zeromq

我正在设计一个与 ZeroMQ 对话的服务器应用程序。在不深入细节的情况下，服务器将存储和服务（来自查询请求）`(eventid, eventstring)`元组。

我的问题涉及有线协议的设计。我想将我的元组从一端发送到另一端。我看到两个选项：

*   序列化我的元组（使用 protobuf 或其他）并将其作为单个消息发送。
*   将我的元组作为多部分消息发送；第一部分包含 eventid，第二部分包含 eventstring。

**这两个选项中的任何一个都比另一个更可取吗？**阅读[ZeroMQ 指南](http://zguide.zeromq.org/page%3aall)，有一[章是关于高级请求-回复模式](http://zguide.zeromq.org/page%3aall#toc45)的，它大量使用了多部分消息信封。这是否意味着我作为用户应该尝试坚持使用单一消息以在将来启用更高级的消息模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:29:30.987

指南中有一节讨论了序列化：

[http://zguide.zeromq.org/page:all#Serializing-Your-Data](http://zguide.zeromq.org/page:all#Serializing-Your-Data)

您有两个字段的情况是如此微不足道，只要它有效，IMO 无论您使用什么格式都无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:52:39.620

我建议看一下[Majordomo 协议的有线协议](http://rfc.zeromq.org/spec:7)。您可以从该示例中看到，结构中的每个“字段”都作为单独的帧发送。这工作得很好并且得到了很好的支持。

您还可以定义字节布局并将数据作为单帧发送。您将需要处理任何字节序问题（如果您在小字节序和大字节序的平台上运行代码），但这很容易处理。如果您不知道如何操作，请使用像 Majordomo 这样的框架技术。

使用 1 帧与使用多帧之间的性能差异可以忽略不计。除非您每秒发送千兆位，否则这不太可能成为问题。与往常一样，在您“优化”之前对您的具体情况进行基准测试，并浪费大量时间和精力来节省每条消息 200 纳秒。

# javascript - 验证失败后恢复文本值

> ID：11539544
> 
> 赞同：1
> 
> 时间：2012-07-18T10:43:26.043
> 
> 标签：javascript, jquery, validation, jsf-2, form-submit

我正在使用 jQuery 绑定 inputText 的 keyup 事件，以便将其值设置为跨度文本。

```
<h:form id="formId">
     <script type="text/javascript">
      $(document).ready(function(){
        var portletNamespace = '#<portlet:namespace/>\\:formId\\:';             
        $(portletNamespace+'txtSimpleText').live('keyup',function(){    
             $(portletNamespace+'spanText').text($(portletNamespace+'txtSimpleText').val());    
        }); 
     });    
    </script>

    <h:inputText id="txtSimpleText" value=""/>
    <h:inputText required="true" value=""/>
    <h:outputText id="spanText"></h:outputText >
    <h:commandButton actionListener="#{myController.someAction}" value="do somthing"/>
</h:form> 
```

它工作正常，但在第一次验证失败时，我丢失了 spanText 文本！这只是第一次发生；在第二次验证失败时，spanText 文本仍然存在。我只需要在视图层使用，提交表单后不需要使用。请告诉我如何在验证失败后恢复我的 spanText！

PS：我不能使用 Ajax 来存储和设置 spanText 的值是有原因的。

# c# - 为自定义 OID 设置 SNMP 值

> ID：11539546
> 
> 赞同：0
> 
> 时间：2012-07-18T10:43:38.593
> 
> 标签：c#, windows, snmp

我们已经[申请](http://pen.iana.org/pen/PenApplication.page)了一个[私有企业号](http://www.iana.org/assignments/enterprise-numbers)，以便在 SNMP MIB“树”中“保留”一个空间来存储一些监控值。最终，我们将被分配一个数字，例如：

```
iso.org.dod.internet.private.enterprise.XXX (1.3.6.1.4.1.XXX) 
```

我们还没有收到我们分配的 PEN，但我希望通过简单地获取一个（临时的，仅在我的工作站上）OID 并使用[SNMP#Net](http://www.snmpsharpnet.com/)向它写入一个值来开始我的项目。我遵循了工作正常的[设置示例](http://www.snmpsharpnet.com/content/how-make-snmp-set-request)`sysLocation`（ OID`1.3.6.1.2.1.1.6.0`设置正常）。

所以，接下来我尝试设置一个“伪造的”OID（`1.3.6.1.4.1.99999.1.0`最终`99999`将成为我们分配的 PEN）。然而，这失败了`ErrorStatus 17`，根据[这个来源](http://www.snmpsharpnet.com/content/how-make-snmp-set-request)，应该是“无法写入或创建变量”。

我检查了我的 SNMP 代理服务，并且`private`我使用的社区设置为`READ/CREATE`. 我在 Windows 7 上使用 C#。

在设置我想要的值之前，我需要做些什么吗？在 Windows 允许我设置值之前，我是否需要导入某种“MIB 定义”？为了（现在测试）设置值，我需要做什么？也许我需要先用 SNMP 代理“声明”或“注册”我想要的 OID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:08:26.417

您需要使用[WinSNMP API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379207.aspx)将 SNMP 代理提供程序服务中的变量注册为绑定列表的一部分。

本质上，您用于`SnmpCreateVbl`将 OID 绑定到变量。

# r - 使用 xtable 确保所有单元格在 LaTeX 表示中都有 3 位数字

> ID：11539548
> 
> 赞同：1
> 
> 时间：2012-07-18T10:43:41.683
> 
> 标签：r, latex, xtable

我有以下数据框：

```
> dput(py6s_pwc_16)
structure(list(source = c("AERONET", "BIGF", "MODIS"), ndvi_real = c(0.618, 
0.618, 0.618), ndvi_95 = c("0.616", "0.616", "0.615"), ndvi_05 = c("0.62", 
"0.62", "0.621"), perc_95 = c("-0.288", "-0.315", "-0.431"), 
    perc_05 = c("0.374", "0.289", "0.471")), .Names = c("source", 
"ndvi_real", "ndvi_95", "ndvi_05", "perc_95", "perc_05"), row.names = c(NA, 
-3L), class = "data.frame") 
```

当我在 R 命令提示符下打印出来时，它看起来像这样：

```
> py6s_pwc_16
   source ndvi_real ndvi_95 ndvi_05 perc_95 perc_05
1 AERONET     0.618   0.616    0.62  -0.288   0.374
2    BIGF     0.618   0.616    0.62  -0.315   0.289
3   MODIS     0.618   0.615   0.621  -0.431   0.471 
```

我想使用`xtable`. 我正在尝试使用以下代码执行此操作：

```
x <- xtable(py6s_pwc_16)
digits(x) <- 3
print(x, include.rownames=FALSE, table.placement=NULL, latex.environments=NULL, size="\\centering", booktabs=TRUE, sanitize.colnames.function=add_bold) 
```

但是，这会产生如下所示的 LaTeX 代码（只是表格内部的一个片段）：

```
AERONET & 0.618 & 0.616 & 0.62 & -0.288 & 0.374 
```

如您所见，第 4 列没有三位数字 - 它只是 0.62，我希望它是 0.620。有没有办法让 xtable 做到这一点？

我试过添加这一行：

```
display(x) <- rep("fg", ncol(x)+1) 
```

尝试让 R 使用有效数字而不是数字，但这不会改变输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:00:47.063

发生这种情况是因为您的数据包含`character`它应该在的位置`numeric`：

```
str(py6s_pwc_16)
'data.frame':   3 obs. of  6 variables:
 $ source   : chr  "AERONET" "BIGF" "MODIS"
 $ ndvi_real: num  0.618 0.618 0.618
 $ ndvi_95  : chr  "0.616" "0.616" "0.615"
 $ ndvi_05  : chr  "0.62" "0.62" "0.621"
 $ perc_95  : chr  "-0.288" "-0.315" "-0.431"
 $ perc_05  : chr  "0.374" "0.289" "0.471" 
```

要修复它，请将`chr`列转换为数字：

```
py6s_pwc_16[, 2:6] <- lapply(py6s_pwc_16[2:6], as.numeric) 
```

然后运行`xtable`：

```
library(xtable)
xtable(py6s_pwc_16, digits=3)

% latex table generated in R 2.15.0 by xtable 1.7-0 package
% Wed Jul 18 12:00:33 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rlrrrrr}
  \hline
 & source & ndvi\_real & ndvi\_95 & ndvi\_05 & perc\_95 & perc\_05 \\ 
  \hline
1 & AERONET & 0.618 & 0.616 & 0.620 & -0.288 & 0.374 \\ 
  2 & BIGF & 0.618 & 0.616 & 0.620 & -0.315 & 0.289 \\ 
  3 & MODIS & 0.618 & 0.615 & 0.621 & -0.431 & 0.471 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# jquery-mobile - 外部链接上的 JQuery Mobile ajax 加载

> ID：11539549
> 
> 赞同：1
> 
> 时间：2012-07-18T10:43:50.373
> 
> 标签：jquery-mobile

我正在开发一个从两个不同域加载的 JQuery Mobile 应用程序。（部分页面来自 example1.com，其他页面来自 example2.com，但所有页面均由 JQuery 设计）

据我所知，如果我有从 example1.com 到 example2.com 的链接，它将完全重新加载页面。

有没有办法像内部链接一样对该页面进行动态ajax加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:46:22.583

根据[jQuery Mobile 文档](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)，如果页面在另一个域上，它将加载页面并刷新整个页面。

我自己没有测试过，但您应该能够首先使用该[`$.mobile.loadPage`](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)方法加载页面，然后链接或更改到该页面，该页面现在将成为同一个 DOM 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:50:15.173

见下文：

> 外部页面链接
> 
> jQuery Mobile 使构建基于 Ajax 的站点和应用程序的过程自动化。
> 
> 默认情况下，当您单击指向外部页面（例如 products.html）的链接时，框架将解析链接的 href 以制定 Ajax 请求（Hijax）并显示加载微调器。
> 
> 如果 Ajax 请求成功，则将新页面内容添加到 DOM，自动初始化所​​有移动小部件，然后通过页面转换将新页面动画化到视图中。
> 
> 如果 Ajax 请求失败，框架将显示一个小的错误消息覆盖（样式为“e”样本），该消息会在短暂的时间后消失，因此不会中断导航流程。查看错误消息的示例。
> 
> 本地、内部链接的“页面”
> 
> 单个 HTML 文档可以包含多个“页面”，这些“页面”通过堆叠具有“页面”数据角色的多个 div 一起加载。每个“页面”块都需要一个唯一的 ID (id="foo")，用于在“页面”(href="#foo") 之间进行内部链接。单击链接时，框架将查找带有 ID 的内部“页面”并将其转换为视图。
> 
> 请务必注意，如果您从通过 Ajax 加载的移动页面链接到包含多个内部页面的页面，则需要在链接中添加 rel="external" 或 data-ajax="false"。这告诉框架重新加载整个页面以清除 URL 中的 Ajax 哈希。这一点很关键，因为 Ajax 页面使用哈希 (#) 来跟踪 Ajax 历史，而多个内部页面使用哈希来指示内部页面，因此这两种模式之间的哈希会发生冲突。
> 
> 例如，指向包含多个内部页面的页面的链接如下所示：
> 
> 多页链接 这是一个使用两个 jQuery Mobile div 构建的 2“页面”站点的示例，通过链接到放置在每个页面包装器上的 ID 进行导航。请注意，页面包装器上的 ID 仅用于支持内部页面链接，如果每个页面都是单独的 HTML 文档，则它们是可选的。这是两个页面在 body 元素中的样子。

# java - 当图形是连接的一部分时如何移动图形

> ID：11539556
> 
> 赞同：1
> 
> 时间：2012-07-18T10:44:18.960
> 
> 标签：java, eclipse, draw2d

我正在使用 Draw2d 库（没有 GEF）开发一个小型图形编辑器。一项要求是，您可以通过用鼠标拖动图形来移动它们。只要图形之间没有（Polyline-）连接，它就可以正常工作。当我添加一个连接时，一切都正确呈现，但无法移动数字。

这是一个显示问题的代码示例：

```
public class Main {

    public static void main(String[] args) {
        Display d = new Display();
        final Shell shell = new Shell(d);
        shell.setSize(400, 400);
        shell.setText("Draw2d Test");
        LightweightSystem lws = new LightweightSystem(shell);
        Figure contents = new Figure();
        XYLayout contentsLayout = new XYLayout();
        contents.setLayoutManager(contentsLayout);

        // create figures
        Figure f1 = new TestFigure("Test 1");
        Figure f2 = new TestFigure("Test 2");

        MouseManager mm = new MouseManager();

        // register mouse listeners
        f1.addMouseMotionListener(mm);
        f1.addMouseListener(mm);
        f2.addMouseMotionListener(mm);
        f2.addMouseListener(mm);

        // set constraints to layout manager
        contentsLayout.setConstraint(f1, new Rectangle(10, 10, -1, -1));
        contentsLayout.setConstraint(f2, new Rectangle(200, 200, -1, -1));

        // add to layout manager
        contents.add(f1);
        contents.add(f2);

        // add connection
        // When uncommenting these lines, dragging works fine
        PolylineConnection c = new PolylineConnection();
        c.setSourceAnchor(new ChopboxAnchor(f1));
        c.setTargetAnchor(new ChopboxAnchor(f2));
        c.setConnectionRouter(new ManhattanConnectionRouter());
        contents.add(c);

        lws.setContents(contents);
        shell.open();
        while (!shell.isDisposed()) {
            while (!d.readAndDispatch()) {
                d.sleep();
            }
        }
    }
}

class MouseManager implements MouseMotionListener, MouseListener {
    Figure selection;
    private Point lastDragLocation;

    @Override
    public void mousePressed(MouseEvent me) {
        System.out.println("mouse pressed");
        selection = (Figure) me.getSource();
    }

    @Override
    public void mouseReleased(MouseEvent me) {
        System.out.println("mouse released");
        selection = null;
        lastDragLocation = null;
    }

    @Override
    public void mouseDragged(MouseEvent me) {
        if (lastDragLocation != null && selection != null) {
            int offsetX = me.getLocation().x - lastDragLocation.x;
            int offsetY = me.getLocation().y - lastDragLocation.y;
            int newX = selection.getLocation().x + offsetX;
            int newY = selection.getLocation().y + offsetY;
            System.out.println(String.format("NewX: %d, NewY: %d", newX, newY));
            selection.setBounds(selection.getBounds().getTranslated(offsetX,
                    offsetY));

        }
        lastDragLocation = me.getLocation();
    }

    // [removed empty implementations of the interface for this post]
}

class TestFigure extends RectangleFigure {
    public Color classColor;

    public TestFigure(String name) {
        ToolbarLayout layout = new ToolbarLayout();
        setLayoutManager(layout);
        setOpaque(true);

        classColor = new Color(null, 255, 255, 206);
        setBackgroundColor(classColor);

        Label lbl_name = new Label(name);
        add(lbl_name);
    }

    @Override
    protected void finalize() throws Throwable {
        classColor.dispose();
        super.finalize();
    }
} 
```

有没有人知道当两个图形之间存在连接时如何使拖动成为可能（不必渲染连接的拖动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:08:55.170

两个问题：

1.  在`mouseDragged`函数中，您正在更改`Figure`的边界，而不是更改父容器中图形的约束。
2.  您没有重新验证父级。

我进行了以下更改并且它有效：

```
public void mouseDragged(MouseEvent me) {
  if(lastDragLocation != null && selection != null) {
    int offsetX = me.getLocation().x - lastDragLocation.x;
    int offsetY = me.getLocation().y - lastDragLocation.y;
    int newX = selection.getLocation().x + offsetX;
    int newY = selection.getLocation().y + offsetY;
    System.out.println(String.format("NewX: %d, NewY: %d", newX, newY));
    // selection.setBounds(selection.getBounds().getTranslated(offsetX, offsetY)); <-- this does not work
    selection.getParent().getLayoutManager()
        .setConstraint(selection, selection.getBounds().getTranslated(offsetX, offsetY));
    selection.getParent().revalidate();

  }
  lastDragLocation = me.getLocation();
} 
```

但是我仍然认为实现存在问题，因为如果您以某种方式将鼠标移动得太快，您可以设法摆脱图形并且它停止移动。我要做的是在父图形中听鼠标，捕捉鼠标何时开始在内部图形顶部移动（使用 parents `Figure.findFigureAt()`），然后在鼠标移动时移动内部图形。

# c# - C# 将字符串复制到字节缓冲区

> ID：11539559
> 
> 赞同：3
> 
> 时间：2012-07-18T10:44:25.107
> 
> 标签：c#, arrays, string

我正在尝试将 Ascii 字符串复制到字节数组，但无法。如何？

* * *

这是我到目前为止尝试过的两件事。两者都不起作用：

```
public int GetString (ref byte[] buffer, int buflen)
{
    string mystring = "hello world";

    // I have tried this:
    System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
    buffer = encoding.GetBytes(mystring);

    // and tried this:
    System.Buffer.BlockCopy(mystring.ToCharArray(), 0, buffer, 0, buflen);  
   return (buflen);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:49:23.463

如果缓冲区足够大，可以直接写：

```
encoding.GetBytes(mystring, 0, mystring.Length, buffer, 0) 
```

但是，您可能需要先检查长度；一个测试可能是：

```
if(encoding.GetMaxByteCount(mystring.length) <= buflen // cheapest first
   || encoding.GetByteCount(mystring) <= buflen)
{
    return encoding.GetBytes(mystring, 0, mystring.Length, buffer, 0)
}
else
{
    buffer = encoding.GetBytes(mystring);
    return buffer.Length;
} 
```

在那之后，没有**什么可做**的，因为你已经昏倒`buffer`了`ref`。不过，就个人而言，我*怀疑*这`ref`是一个糟糕的选择。没有必要在`BlockCopy`这里，除非你是从临时缓冲区复制，即

```
var tmp = encoding.GetBytes(mystring);
// copy as much as we can from tmp to buffer
Buffer.BlockCopy(tmp, 0, buffer, 0, buflen);
return buflen; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-01T20:30:31.807

这将处理创建字节缓冲区：

```
byte[] bytes = Encoding.ASCII.GetBytes("Jabberwocky"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T12:15:46.537

也许有人需要标准的 c 代码函数，如 strcpy 转换为 c#

```
 void strcpy(ref byte[] ar,int startpoint,string str)
    {
        try
        {
            int position = startpoint;
            byte[] tempb = Encoding.ASCII.GetBytes(str);
            for (int i = 0; i < tempb.Length; i++)
            {
                ar[position] = tempb[i];
                position++;
            }
        }
        catch(Exception ex)
        {
            System.Diagnostics.Debug.WriteLine("ER: "+ex.Message);
        }

    } 
```

# javascript - CK编辑器。如何关闭自动增长（设置恒定高度）

> ID：11539561
> 
> 赞同：2
> 
> 时间：2012-07-18T10:44:29.710
> 
> 标签：javascript, configuration, ckeditor

我使用自动增长插件，在某些情况下需要关闭它。并设置恒定的高度......但我该怎么做呢？没有找到任何关于如何动态启用/禁用插件的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:00:42.787

您可以为每个实例设置配置。

下面的示例包括用于关闭自动增长和通过设置高度和禁用调整大小来设置恒定高度的配置设置。

如果要修改特定实例的一堆配置设置，可以调用自定义配置文件：

```
CKEDITOR.replace( 'textareaID',
{
  customConfig : 'customConfigSettingsA.js';
}); 
```

否则，只需在创建实例时将设置包含在文件中。

```
CKEDITOR.replace( 'textareaID',
{
  config.autoGrow_onStartup = false,
  config.resize_enabled = false,
  config.height = '111px';
}); 
```

您还可以加载共享的自定义配置文件并同时设置特定设置：

```
CKEDITOR.replace( 'textareaID',
{
  customConfig : 'customConfigSettingsA.js',
  config.autoGrow_onStartup = false,
  config.resize_enabled = false,
  config.height = '111px';
}); 
```

* * *

有关控制宽度、高度、可调整性和最小/最大尺寸设置的其他配置设置，请参阅这篇文章：

[如何设置和锁定CKEditor窗口大小？](https://stackoverflow.com/a/11512016/751619)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T15:15:54.640

感谢 codewaggle 和

oleq [jQuery UI 在 CKEditor 中可调整大小](https://stackoverflow.com/questions/12487190/jquery-ui-resizable-in-ckeditor)

以下是我如何实施他们的建议：

```
<form .....  onload="CKStart()">
.....
<div id="resizable" style="overflow: hidden; max-height:240px;">
    <ckeditor:editor name="content" id="myCKEditor" height="200px" width="100%" >
    </ckeditor:editor>
  </div>

...

</form>

<script>

function CKStart(){
  var editor = CKEDITOR.replace( 'myCKEditor', {
    autoGrow_onStartup: false,
        resize_enabled: false,
    height: '200px'

    });
}
</script> 
```

它似乎确实有效 - 没有可用的调整大小

# javascript - 在 javascript 中使用正则表达式仅选择标签之间的文本

> ID：11539562
> 
> 赞同：0
> 
> 时间：2012-07-18T10:44:32.307
> 
> 标签：javascript, regex, text

我已经搜索和搜索，但似乎找不到我需要的答案。我仍然对整个正则表达式的事情感到头疼，还不足以解决这个问题，这似乎很简单。

我有一个字符串`"<a href="#">London<span>35.2miles</span></a>"`

我需要除掉所有东西`"London"`，但是我尝试的所有东西都导致`"London<span>35.2miles</span>"`我似乎无法摆脱*span*标签和文本，以及*a*标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:51:12.170

```
var root = document.createElement("div");
root.innerHTML = '<a href="#">London<span>35.2miles</span></a>';
alert( root.firstChild.firstChild.nodeValue ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:49:06.223

以下正则表达式应该可以工作；

```
/>([^<]*)/ 
```

它从第一个匹配任何东西，`>`直到它碰到另一个`<`

你可以把它和`match()`方法结合起来，得到这样的结果；

```
var matches = '<a href="#">London<span>35.2miles</span></a>'.match(/>([^<]*)/);

if (matches) { // "null" if no matches, array if there was.
    var london = matches[1];
} 
```

# c# - 最简单的 LINQ to XML 查询。但我无法得到它

> ID：11539564
> 
> 赞同：0
> 
> 时间：2012-07-18T10:44:42.713
> 
> 标签：c#, .net, linq

我是 LINQ 的新手。我的 XML：

```
<Config>
<remainingDays>7</remainingDays>
</Config> 
```

如何使用 LINQ 获得 7？

我尝试了以下方法，但没有任何帮助：

```
XElement doc = XElement.Load("Config.xml");
remainDay = Convert.ToInt32(doc.Element("remainingDays").Value);
remainDay = Convert.ToInt32((from ele in doc.Elements()
                             let e = ele.Element("remainingDays")
                             select e));
remainDay = Convert.ToInt32((from el in doc.Descendants("remainingDays")
                            select el).First()); 
```

更新。剩余日是一个整数。我想在 XML 中获取 day 的值并分配给 becomeDay

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:55:15.087

你想要的是

```
var config = XElement.Load("Config.xml");
var remainingDaysElement = config.Elements("remainingDays").First();
var remainingDays = int.Parse(remainingDaysElement.Value); 
```

离开我的头顶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:59:11.777

```
doc.Descendants("remainingDays").FirstOrDefault().Value; 
```

这将帮助您获取值`7`，现在您可以使用解析它`int.Parse`并将其分配给剩余日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:54:19.733

试试这个

```
 using (StreamReader reader = new StreamReader(store.OpenFile(_strXMLFile, FileMode.Open)))
   {
      XDocument _xDoc = XDocument.Parse(reader.ReadToEnd());
      _strDays = _xDoc.Element("Config").Element("remainingDays").Value;
      return _strDays;
    } 
```

并使用 System.Xml.Linq 定义；就是这样。

# ruby-on-rails - 为 nil 调用 id，它会错误地为 4——如果你真的想要 nil 的 id，使用 object_id .. amistad 视图？

> ID：11539577
> 
> 赞同：1
> 
> 时间：2012-07-18T10:45:15.190
> 
> 标签：ruby-on-rails, model-view-controller

我正在使用 amistad 作为朋友控制器。现在我想添加朋友，但我得到的错误是：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id.. 
```

这是我添加朋友的链接：

```
<section>
      <h1>
        <%= @user.username %>
      </h1>

    <% unless current_user == @user  %>
<%= link_to "Arkadaşlarıma Ekle", friends_path(:friend_id => @user), :method => :post,class: "btn btn-large btn-primary" %>
    <%end %>
      </section> 
```

和我的friendships_controller.rb：

```
class FriendshipsController < ApplicationController

  before_filter :authenticate_user!

  def index
    @friends = current_user.friends
    @pending_invited_by = current_user.pending_invited_by
    @pending_invited = current_user.pending_invited
  end

  def new
    @users = User.all :conditions => ["id != ?", current_user.id]
  end

  def create
    invitee = User.find_by_id(params[:user_id])
    if current_user.invite invitee
      redirect_to new_friend_path, :notice => "Successfully invited friend!"
    else
      redirect_to new_friend_path, :notice => "Sorry! You can't invite that user!"
    end
  end

  def update
    inviter = User.find_by_id(params[:id])
    if current_user.approve inviter
      redirect_to new_friend_path, :notice => "Successfully confirmed friend!"
    else
      redirect_to new_friend_path, :notice => "Sorry! Could not confirm friend!"
    end
  end

  def requests
    @pending_requests = current_user.pending_invited_by
  end

  def invites
    @pending_invites = current_user.pending_invited
  end

  def destroy
    user = User.find_by_id(params[:id])
    if current_user.remove_friendship user
      redirect_to friends_path, :notice => "Successfully removed friend!"
    else
      redirect_to friends_path, :notice => "Sorry, couldn't remove friend!"
    end
  end 

end 
```

我怎样才能为 amistad 安排正确的观点？有教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:41:43.610

你的控制器有点乱，但我想错误是你发送了一个参数“friend_id”，但在你的创建操作中，你试图用一个名为“user_id”的参数加载用户。大概方法：

```
current_user.invite invitee 
```

被邀请者被调用为 nil，因此您收到此错误。

希望能帮助到你！:)

# visual-studio-2010 - 在 Visual Studio 中从 SQL CE 数据库显示表数据

> ID：11539579
> 
> 赞同：0
> 
> 时间：2012-07-18T10:45:19.410
> 
> 标签：visual-studio-2010, sql-server-ce

我试图通过 Visual Studio 显示 SQL CE 数据库中表的表数据，由于某种原因，我收到以下错误。

现在，这是这台机器的简要近期历史，我会尽我所能。最近我修复了 Visual Studio SP1 安装，希望它能解决这个问题。在此之前，由于围绕集成测试的要求，我安装了 SQL 2012，所以我现在在这个盒子上安装了 SQL 2008 和 SQL 2012。其他一些有趣的事情可能是我安装了 LightSwitch，并且我曾经安装过 Visual Studio 2012 RC - 但后来卸载了它。

我希望我可以修复一些东西并让它工作:)

我期待着您的回复。

![Visual Studio 错误](../Images/117c067efdcfaafeb9d3bc07b38fc9e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:43:48.760

显然很多事情都可能导致这种情况——但就我而言，我相信它是在我的盒子上安装 SQL Server 2012。请按照以下步骤操作，如果您遇到此错误，您会很高兴。

1.  在 Windows 资源管理器中导航到`C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools`.
2.  将文件重命名`dsref80.dll`为`dsref80.dll.old`.
3.  修复Visual Studio 2010 安装（原root 之一）。
4.  重新启动您的机器。

和繁荣！它是固定的。

明智的话 - 考虑只使用虚拟机 - 时期。不同类型的项目需要不同类型的安装，这些安装总是相互影响——现在看来，为每种可能的配置使用虚拟机更安全。

简而言之，由于当今软件需求的复杂性，只需使用虚拟机为自己构建一个本地开发网络，然后将您的机器变成主机。

# php - Magento 产品页面上的缩小 HTML？

> ID：11539581
> 
> 赞同：0
> 
> 时间：2012-07-18T10:45:26.020
> 
> 标签：php, magento

出于某种原因，我在本地 Magento 安装上的产品页面似乎正在缩小？这随后打破了该页面，主要是 jQuery ..

所有其他页面都很好 - 包括目录和 CMS 页面/主页等。

如果您在此处查看类别页面的来源： ![正常的源代码](../Images/1e79601394647dbd1fc700d6bb939d7c.png)

然后这是产品页面的来源： ![损坏的产品页面html头](../Images/da7890204eff6c524b4036bf0c718960.png)

是什么导致这种情况发生？有任何想法吗？我没有使用压缩或缩小作为开发环境。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:54:11.543

感谢您的所有评论，事实证明 Better Configurable Products 是造成此问题的罪魁祸首，已禁用该模块并且它现在可以工作。

# java - 当我尝试从中调用 Java 方法时，Matlab 会锁定 jar 文件

> ID：11539586
> 
> 赞同：2
> 
> 时间：2012-07-18T10:45:45.027
> 
> 标签：java, matlab

我正在用 Java 开发一个库，需要在 Matlab 中使用它。Java 和 Matlab 代码都在不断开发中；因此，每当我重建 Java 代码并创建一个新的 jar 文件时，我都需要在 Matlab 代码中重新加载它并在那里使用新的 jar 文件。我的问题是 Matlab 锁定了 jar 文件，我无法用新的 jar 文件替换旧的 jar 文件，除非我重新启动整个 Matlab 环境。如何让 Matlab 解锁我的 jar 文件？

我通过以下方式访问 Java 类和方法

```
javaaddpath('path/to/jar/file.jar'); 
```

最后我还打电话给：

```
javarmpath('path/to/jar/file.jar'); 
```

但它也不会解锁文件。我使用 Matlab 7.9.0 (R2009b)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:55:06.750

我怀疑你不能。在底层 MatLab 包含一个 JVM，它是锁定 JAR 文件的 JVM。这样做是为了防止当外部的东西修改它脚下的 JAR 文件时，JVM 发生令人讨厌的事情。

现在，如果这是您自己的应用程序，您可以编写一个自定义类加载器来解决这个问题。但我怀疑 MatLab 会让你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T20:17:15.490

您可以使用 ClassPathHacker 动态加载 .jar 文件而不会被锁定，如[https://stackoverflow.com/a/4380605/2043349](https://stackoverflow.com/a/4380605/2043349)中所述。

[您可以从https://code.google.com/p/ratrix/source/browse/classes/db/cpath/ClassPathHacker.java?r=8ee84cd195104df02b5e8530190590aff465d914](https://code.google.com/p/ratrix/source/browse/classes/db/cpath/ClassPathHacker.java?r=8ee84cd195104df02b5e8530190590aff465d914)下载 jar 包 。

然后使用以下代码加载文件：

```
cpathPath=[hpath,'\Utilities\java\cpath.jar'];
javaaddpath(cpathPath)
import cpath.*
cpath.ClassPathHacker.addFile(jarfile) 
```

（根据您的需要调整 hpath 和 jarfile。）

# ios - DrawRect 完成和 UI 刷新之间的时间延迟

> ID：11539598
> 
> 赞同：1
> 
> 时间：2012-07-18T10:46:28.803
> 
> 标签：ios, drawrect, lag

我有一个使用开源类 MMGridView 的 iPad 应用程序。基本上我执行 CoreData 查询，然后这个类在屏幕上以网格模式绘制框来表示结果。盒子里有照片。一切正常，除了有时会出现无法解释的时间延迟，直到 UI 被绘制在屏幕上。有时刷新是即时的，有时超过 20 秒。它的行为显得非常随机。

我已经设法确定：

*   每次都调用 DrawRect。
*   在 DrawRect 方法中没有发生滞后。
*   当我运行时间分析器时，据我所知，在这段时间滞后期间没有发生任何事情

我的问题是，在调用 DrawRect 之后会发生什么，我可以尝试查看以找出问题所在？

绝对任何想法将不胜感激。

另请注意，用户交互能够缩短延迟。- 旋转 iPad（触发重绘）总是使 ui 立即刷新 - 按下按钮重做相同的查询通常会刷新屏幕

所以看起来我只是遇到了一些随机延迟，而不是任何类型的处理器/工作负载问题。问题是，以编程方式，我无法判断 UI 是否已更新。否则我可以要求它再次重绘。

我包含了 DrawRect 方法中的代码，以防万一引发任何想法，但据我所知，此方法在滞后发生之前完成。

```
- (void)drawRect:(CGRect)rect {

if (self.dataSource && self.numberOfRows > 0 && self.numberOfColumns > 0) {
    NSInteger noOfCols = self.numberOfColumns;
    NSInteger noOfRows = self.numberOfRows;
    NSUInteger cellsPerPage = noOfCols * noOfRows;
    NSLog(@"rows = %d, cols = %d", noOfCols, noOfRows);
    CGRect gridBounds = self.scrollView.bounds;
    CGRect cellBounds = CGRectMake(0, 0, gridBounds.size.width / (float)noOfCols, 
                                   gridBounds.size.height / (float)noOfRows);

    CGSize contentSize = CGSizeMake(self.numberOfPages * gridBounds.size.width, gridBounds.size.height);
    [self.scrollView setContentSize:contentSize];

    for (UIView *v in self.scrollView.subviews) {
        [v removeFromSuperview];
    }

    for (NSInteger i = 0; i < [self.dataSource numberOfCellsInGridView:self]; i++) {
        MMGridViewCell *cell = [self.dataSource gridView:self cellAtIndex:i];
        [cell performSelector:@selector(setGridView:) withObject:self];
        [cell performSelector:@selector(setIndex:) withObject:[NSNumber numberWithInt:i]];

        NSInteger page = (int)floor((float)i / (float)cellsPerPage);
        NSInteger row  = (int)floor((float)i / (float)noOfCols) - (page * noOfRows);

        CGPoint origin = CGPointMake((page * gridBounds.size.width) + ((i % noOfCols) * cellBounds.size.width), 
                                     (row * cellBounds.size.height));

        CGRect f = CGRectMake(origin.x, origin.y, cellBounds.size.width, cellBounds.size.height);
        cell.frame = CGRectInset(f, self.cellMargin, self.cellMargin);

        [self.scrollView addSubview:cell];
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:36:10.323

由于对何时使用和何时不使用 drawRect 进行了非常清晰和简洁的描述，因此问题解决了：Peter Hosey 在回答这个问题时。 [使核心图形不滞后的正确方法是什么？](https://stackoverflow.com/questions/7629485/what-is-the-proper-way-to-make-it-so-core-graphics-does-not-lag)

基本上，这是我正在使用的开源类 MMGridView 中的一个错误，因为它不应该使用 drawRect: 来设置 UIScrollView 上的框或单元格。这是因为没有进行实际的绘图。

因此，通过更改上述方法的名称并在我之前调用 setNeedsDisplay 的地方直接调用它，不再有任何随机延迟。

# java - RESTEasy - 如何设置代理类的表示

> ID：11539601
> 
> 赞同：1
> 
> 时间：2012-07-18T10:46:30.347
> 
> 标签：java, rest, jax-rs, resteasy

我用 RESTEasy 设置了一个客户端代理类：

```
 ResourceIF resource = ProxyFactory.create(resourceIF.class, PATH, clientExecutor); 
```

当我调用

```
 ClientResponse res = (ClientResponse) resource.getObject(); 
```

我的界面如下所示：

```
 @GET
 @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
 public Response getObject() 
```

我自动得到一个 XML 表示。如何将其设置为 JSON？仅仅是声明一个新的仅支持 JSON 的接口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T21:06:33.477

您必须添加一个 MediaTypeInterceptor，如下所示：

```
 ClientExecutor executor=ClientRequest.getDefaultExecutor();
    ResteasyProviderFactory factory=ResteasyProviderFactory.getInstance();
    InterceptorRegistry<ClientExecutionInterceptor> registry=factory.
        getClientExecutionInterceptorRegistry();
    registry.register(new MediaTypeInterceptor("application/json"));
    ResourceIF resource = ProxyFactory.create(ResourceIF.class,PATH,executor,factory); 
```

# javascript - Jquery 承诺链

> ID：11539605
> 
> 赞同：13
> 
> 时间：2012-07-18T10:46:39.827
> 
> 标签：javascript, jquery, jquery-deferred, promise, jquery-chaining

我有一个简单的事件链：

1.  从元数据表中获取列（异步）
2.  加载选定的列（异步）
3.  渲染列表

我过去只是将这些函数链接起来，每个函数都在完成后调用下一个函数。但是，发生了什么并不是很明显（调用`getColumnsFromMeta`结果是在填充视图）。因此，为了清晰和代码重用，我想使用`JQuery` `Promises`. 我以前使用过承诺。但是我如何链接两个以上？`getColumnsFromMeta ().then(loadSourceFromDatabase /*some arguments*/) //.then(renderList)?;`

这是一个示例`getColumnsFromMeta`：

```
var getColumnsFromMeta = function(id)
{
    var sql,
        dfd;

    dfd = $.Deferred();

    var onSuccess = function(tx, result)
    {
        var columns = [];

        for (var i = 0; i < result.rows.length; i++) 
        {
            columns.push(result.rows.item(i).Column);
        }

        dfd.resolve(columns);
    };

    var onError = function(tx, error)
    {
        dfd.reject(error);
    };

    sql = "SELECT Column FROM Meta WHERE id = ?";

    database.query(sql, [id], onSuccess, onError);

    return dfd.promise();
}; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T10:51:24.663

它应该是这样的：

```
function getColumnsFromMeta()
{
    var d = $.Deferred();

    // retrieve data in async manner and perform
    // d.resolve(columns);

    return d.promise();
}

function loadSelectedColumns(columns)
{
    var d = $.Deferred();

    // retrieve data in async manner and perform
    // d.resolve(data);

    return d.promise();
}

function render(data)
{
    // render your data
}

getColumnsFromMeta().pipe(loadSelectedColumns).pipe(render); 
```

[http://jsfiddle.net/zerkms/xYDbm/1/](http://jsfiddle.net/zerkms/xYDbm/1/) - 这是一个工作示例

[http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/) - 这是我非常喜欢的关于承诺的文章

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T20:43:05.803

经过一番思考，zerkms 的回复帮助了我。我将发布我在这里所做的事情，以防万一有完整上下文的示例有帮助。

```
/**
 * takes a list of componentIDs to load, relative to componentRoot
 * returns a promise to the map of (ComponentID -> componentCfg)
 */
function asyncLoadComponents (componentRoot, components) {

    var componentCfgs = {};

    function asyncLoadComponentCfg(component) {
        var url = _.sprintf("%s/%s", componentRoot, component);
        var promise = util.getJSON(url);
        promise.done(function(data) {
            componentCfgs[component] = data;
        });
        return promise;
    }

    var promises = _.map(components, asyncLoadComponentCfg);
    var flattenedPromise = $.when.apply(null, promises);
    var componentCfgPromise = flattenedPromise.pipe(function() {
        // componentCfgs is loaded now
        return $.Deferred().resolve(componentCfgs).promise();
    });

    return componentCfgPromise;
}

var locale = 'en-US';
var componentRoot = '/api/components';
var components = ['facets', 'header', 'DocumentList'];
$.when(asyncLoadComponents(componentRoot, components)).done(function(componentCfgs) {
    buildDocumentListPage(locale, componentCfgs)
}); 
```

# jquery - 如何将值 lat、lng 和地址从 jQuery 函数传递到 PHP 表单，并将所有内容保存在 MySQL 表中？

> ID：11539606
> 
> 赞同：0
> 
> 时间：2012-07-18T10:46:38.863
> 
> 标签：jquery, google-maps, latitude-longitude

如何将值 lat、lng 和地址从 jQuery 谷歌地图函数 (gmaps.js) 传递到 main.html？. 我想获得这些值以及其他值 - 我将在主 html 中获得，我想将所有内容一起写在 MySQL 的表（标记）上，并带有一个保存按钮。任何想法？谢谢！！

//**gmaps.js 函数

```
function update_ui( address, latLng ) {
  $('#gmaps-input-address').autocomplete("close");
  $('#gmaps-input-address').val(address);
  $('#gmaps-output-latitude').html(latLng.lat());
  $('#gmaps-output-longitude').html(latLng.lng());
  $('#gmaps-output-address').html(address);
  } 
```

//**html 主要代码：

```
<div id='input'>
      <input type='text' id='gmaps-input-address' placeholder='to start, write address...'  size="41" />
      <div id='gmaps-error'>
     </div>
</div>
    <div id="gmaps-canvas" style="width:auto; height:250px"></div>
      <p>
<!—show current lat, lng and address   -->
      Latitude: <span id='gmaps-output-latitude'></span> <br/>
      Longitude: <span id='gmaps-output-longitude'></span><br/>
      Address: <span id='gmaps-output-address'></span><br/>
……
……
<!—start form. (get others values)   -->

    <label>name<br />
    <input class="text" type="text" name="name" id="name" width="100%"/>
    </label>

    <label>address<br />
    <input class="text" type="text" name="address" id="precio" width="100%"/>
    </label>
    …… 
  <!—here I need to get lat and assign to var-->
  <!—here I need to get lng and assign to var -->
  <!—here I need to get address and assign to var -->
  <!— each one lat, lng , address,  in separate vars -->
  <!— call to sql to save them in a table -->
<!—end of form (get others values)    --> 
```

//**SQL语句：

```
function insertar($campos){

if($this->con->conectar()==true){
return mysql_query("INSERT INTO markers ( name, precio, lat, lng, address ) VALUES ('".$campos[0]."','".$campos[1]."','".$campos[2]."','".$campos[3]."','".$campos[4]."')");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:59:20.463

我今天做了这个！

我以[这个项目](http://vikku.info/programming/google-maps-v3/draggable-directions/saving-draggable-directions-saving-waypoints-google-directions-google-maps-v3.htm)为基础。

使用 Apache 和我的 SQL，并在 Dreamweaver 上完成了项目，它工作正常！=)

这是一个人帮助我将网站放到网上的帖子 [无法在 Google 地图 v3 中保存航点](https://stackoverflow.com/questions/11474099/cant-save-waypoints-in-googls-maps-v3)

只需将 process.php 编辑到您的本地主机、用户并通过。

试试看 =)

# amazon-ec2 - PHP Cronjob 导致过多的数据库连接

> ID：11539607
> 
> 赞同：0
> 
> 时间：2012-07-18T10:46:41.170
> 
> 标签：amazon-ec2, cron, wget, crontab, amazon-rds

我有一个带有多个 Cronjobs 的 EC2 服务器，每分钟调用一次。大多数时候一切正常，但有时会发生，一个 cronjob (wget) 由于数据库而需要很长时间，然后进行下一个 wget 调用。这会减慢数据库的速度，最终我会收到许多 wget 调用和超过 200 个数据库连接。大多数时候，除了关闭 RDS 和 EC2 并在没有 cronjobs 的情况下重新启动之外，别无他法。

我想知道： 1\. 对 cronjobs 有什么更好的解决方案（我必须获取大量数据并将其存储在 RDS 中）？2\. 如何确保每个 URL 只运行一个 wget？3\. 为什么 RDS 需要几分钟才关闭连接？我必须更改哪个参数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:00:16.737

取决于你想要达到什么。

*   您想扩展您的数据库以处理多个连接而不会失败吗？

如果每个 cronjob 调用都很重要，你会这样做。而且您不能错过半处理请求。

为了优化这一点，你首先要弄清楚你的时间花在了哪里。它是在服务器端处理，还是纯粹的数据。

*   如果您不介意部分请求或跳过的呼叫

一个快速的解决方法是使用 wget 超时选项之一（假设 wget 是你所有的 cronjobs 所做的）请注意，这可能会使调用饿死。如果请求总是需要超过超时时间，它将永远不会执行。

更强大的解决方案是确保一次只有一个 cronjob 实例处于活动状态。IIRC Perl 有一个简单的 CPAN 解决方案。

# sqlite - 无法使用 Entity Framework 5 在 SQLite 数据库中插入记录

> ID：11539612
> 
> 赞同：2
> 
> 时间：2012-07-18T10:47:02.000
> 
> 标签：sqlite, entity-framework-4.1

我尝试使用 ADO.NET Entity Framework 5 使用 SQLite 数据库，并且能够连接到 SQLite 数据库并能够从数据库中的表中查询记录。但是当我尝试将记录插入表中时，**SaveChanges**会引发异常

```
"An error occurred while updating the entries. See the inner exception for details." 
```

代码如下所示：

```
var connectionStr = string.Format("data source={0};Version=3;UseUTF16Encoding=True;",
    fileName);
var conn = new SQLiteConnection(connectionStr);

this.personDataContext = new PersonDataContext(conn);

var persons = (from person in File.ReadAllLines(fileName)
               let p = person.Split(new[] { ',', ' ' },
                                    StringSplitOptions.RemoveEmptyEntries)
               select new Person
               {
                   ID = Convert.ToInt32(p[0]),
                   Name = p[1],
                   Address = p[2],
                   MobNo = Convert.ToInt32(p[3]),
                   PhNo = Convert.ToInt32(p[4]),
                   Designation = p[5]
               }).ToList();

if (this.personDataContext != null && this.personDataContext.Persons != null)
{
    foreach (var person in persons)
    {
      this.personDataContext.Persons.Add(person);
    }

    var saveFailed = false;

    do
    {
        try
        {
            this.personDataContext.SaveChanges();
        }
        catch (DbUpdateConcurrencyException ex)
        {
            saveFailed = true;
            ex.Entries.Single().Reload();
        }
    }
    while (saveFailed);
} 
```

当我检查内部异常时，它说未定义主键。因此，在将主键定义到表中后，每次都会出现相同的异常。

我在[此处](https://skydrive.live.com/redir?resid=BF69AAF5344E2B32!318)附上示例应用程序。首先使用 Open Db 打开示例数据库，然后尝试导入 CSV 文件。

我正在使用 Code First 方法，在该方法中我设计了一个 Model 类并将其与 SQLite 数据库中的表连接起来。

请帮助解决问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:08:10.970

尝试为`Person`类中的关键属性禁用数据库生成的身份：

```
[DatabaseGenerated(DatabaseGeneratedOption.None)]
public int ID { get; set; } 
```

对我来说，您似乎想要手动提供键值 ( `ID = Convert.ToInt32(p[0])`) 但 EF 不会将此值发送到数据库，因为默认情况下它希望`ID`在数据库中生成该值。如果它不是在数据库中生成的，则会出现异常。通过设置`DatabaseGeneratedOption`EF`None`将获取您提供的值并将其在 INSERT 语句中发送到数据库。

# regex - awk: Counting errors in tomcat logs

> ID：11539615
> 
> 赞同：1
> 
> 时间：2012-07-18T10:47:06.983
> 
> 标签：regex, tomcat, logging, awk

My Tomcat logs are build in this format:

```
[<DATE>] [<COMPONENT>] ERROR_TYPE <ERROR_NAME> - <Rest of line> 
```

Where `ERROR_TYPE` is [a log4j value](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Level.html) like `DEBUG` or `ERROR`.

e.g.,

```
[18/Jul/2012:08:53:39 +0000] [component1] ERROR ConnectionTimeOut - ...
[18/Jul/2012:09:54:32 +0000] [component2] DEBUG IPNotFound - ...
[18/Jul/2012:09:54:32 +0000] [component1] TRACE Connected - ...
[18/Jul/2012:08:53:39 +0000] [component1] ERROR ConnectionTimeOut - ... 
```

I would like to create a maps from the tuple `(ERROR_TYPE, ERROR_NAME)` to the number of occurrences, e.g.

```
ERROR ConnectionTimeOut       2
DEBUG IPNotFound              1
TRACE Connected               1 
```

How do I match something like:

```
_anything_ (ERROR|DEBUG|TRACE|WARN|FATAL_spaces_ _another_word_)_anything_ 
```

in AWK, and return only the part in parentheses?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:52:34.477

```
awk '/ERROR|DEBUG|TRACE|WARN|FATAL/ {count[$4,$5]++} END {for (i in count) {split(i, a, SUBSEP); print a[1], a[2], count[i]}}' inputfile 
```

Lines are selected which contain the error types. A `count` array element is incremented for the type and name taken together as the index. The comma represents the contents of the `SUBSEP` variable which defaults to `\034`. In the `END` block, iterate over the `count` array, splitting the indices using the `SUBSEP` variable. Print the type, name and count.

**Edit:**

This uses a regex to handle unstructured log entries:

```
awk 'match($0, /(ERROR|DEBUG|TRACE|WARN|FATAL) +[^ ]+/) {s = substr($0, RSTART, RLENGTH); split(s, a); count[a[1],a[2]]++} END {for (i in count) {split(i, a, SUBSEP); print a[1], a[2], count[i]}}' inputfile 
```

# css - javafx-2 getStyleClass().removeAll

> ID：11539617
> 
> 赞同：2
> 
> 时间：2012-07-18T10:47:07.863
> 
> 标签：css, javafx-2, removeall

我刚开始在 javafx 2 中使用 CSS。我在从窗格中删除 CSS 样式类时遇到了一些问题。

Pane 根据自定义对象的布尔值获取背景颜色和边框：

```
//kw is a subobject of objects in a listview, everytime the selection is changed 
//the CSS on the pane gets refreshed
resetGUI();
...
if(kw != null){
    if (kw.getAfgewerkt()) {
        pRA.getStyleClass().add("success"); //true
    } else {
        pRA.getStyleClass().add("error"); //false
    }
}
... 
```

以上工作。

然而，在 pRA 节点上设置样式类之前，我通过调用 resetGUI() 方法重置 CSS，因为当 kw 对象为空时，不应应用任何 CSS。

```
public void resetGUI(){
    ...
    pRA.getStyleClass().removeAll("error", "success");
    ...
} 
```

似乎删除 StyleClasses 不起作用。如果 kw 对象为空，我希望 pRa 节点看起来像“默认”。我必须自己在 CSS 文件中创建一个“默认”类吗？这不应该是我假设的情况吗？

这是CSS：

```
.error {-fx-background-color: #FBE3E4;-fx-text-fill:#8a1f11;-fx-border-style:solid;-fx-border-color:#FBC2C4;}
.success {-fx-background-color:#E6EFC2;-fx-text-fill:#264409;-fx-border-style:solid;-fx-border-color:#C6D880;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T16:13:38.570

正如 pmoule 所评论的：

通过使用自己分配默认样式

```
pRA.getStyleClass().add("default"); 
```

并且不要忘记将它添加到 css 中

```
.default {...} 
```

# asp.net-mvc-4 - RavenDb Mini Profiler 仅在第一页加载时加载

> ID：11539624
> 
> 赞同：3
> 
> 时间：2012-07-18T10:47:27.047
> 
> 标签：asp.net-mvc-4, unity-container, ravendb, mvc-mini-profiler

我正在尝试在我的 ASP.NET MVC4 项目中运行 RavenDb 的迷你分析器。

我的 Unity 引导程序中有以下内容：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(Web.App.App_Start.AppStart_Unity), "Start")]
public static class AppStart_Unity
{
    public static void RegisterServices(IUnityContainer container)
    {
        container.RegisterInstance(DocumentStoreFactory.Create(ConfigurationManager.ConnectionStrings[0].Name));
        container.RegisterType<IDocumentSession>(new HierarchicalLifetimeManager(), new InjectionFactory(c => c.Resolve<IDocumentStore>().OpenSession(ConfigurationManager.ConnectionStrings[0].Name)));
    }

    public static void Start()
    {
        // Create the unity container
        IUnityContainer container = new UnityContainer();

        // Register services with our Unity container
        RegisterServices(container);

        // Tell ASP.NET MVC to use our Unity DI container
        DependencyResolver.SetResolver(new UnityServiceLocator(container));

        // hook up the profiler    
        var store = container.Resolve<IDocumentStore>();
        var documentStore = store as DocumentStore;
        if (documentStore != null)
        {
            Raven.Client.MvcIntegration.RavenProfiler.InitializeFor(documentStore);
        }
    }
} 
```

在我的主 _Layout 我有以下内容：

```
<head>
    @Raven.Client.MvcIntegration.RavenProfiler.CurrentRequestSessions()
</head> 
```

第一次启动 Web 应用程序时，我可以看到分析器，没问题。

但是，任何后续页面请求和分析器都不可见。

当我查看页面源时，我可以看到 div 容器在那里，但没有填充数据。完全没有 JavaScript 错误。很奇怪。呈现的 HTML 如下所示：

```
<div class="ravendb-profiler-results">
    <div id="ravendb-session-container"></div>
    <p></p>
    <a href="#" class="ravendb-toggle ravendb-close">Close</a>
</div> 
```

比较请求，我在第一次加载时看到了这些请求：

1.  `http://localhost:62238/ravendb/profiling?path=yepnope.js`
2.  `http://localhost:62238/ravendb/profiling?path=jquery.tmpl.min.js`
3.  `http://localhost:62238/ravendb/profiling?path=ravendb-profiler-scripts.js`
4.  `http://localhost:62238/ravendb/profiling?path=jquery.tmpl.min.js`
5.  `http://localhost:62238/ravendb/profiling?path=ravendb-profiler-scripts.js`
6.  `http://localhost:62238/ravendb/profiling?path=Templates%2Ftotals.tmpl.html`
7.  `http://localhost:62238/ravendb/profiling?path=Templates%2Fravendb-profiler.tmpl.html`
8.  `http://localhost:62238/ravendb/profiling?path=Templates%2Fsession-template.tmpl.html`
9.  `http://localhost:62238/ravendb/profiling?path=Templates%2Frequest-details.tmpl.html`
10.  `http://localhost:62238/ravendb/profiling?id%5B%5D=d3ada4e4-4bc3-4a7c-bd36-64cc8017d94a`
11.  `http://localhost:62238/ravendb/profiling?path=styles.css`

在随后的加载中，我看到以下请求：

1.  `http://localhost:62238/ravendb/profiling?path=yepnope.js`
2.  `http://localhost:62238/ravendb/profiling?path=jquery.tmpl.min.js`
3.  `http://localhost:62238/ravendb/profiling?path=ravendb-profiler-scripts.js`
4.  `http://localhost:62238/ravendb/profiling?path=jquery.tmpl.min.js`
5.  `http://localhost:62238/ravendb/profiling?path=ravendb-profiler-scripts.js`

奇怪的是，我**在这两种情况下都**看到重复调用`jquery.tmpl.min.js`和`ravendb-profiler-scripts.js`。

ravendb-profiler-scripts.js 包含以下行：

```
 9\. var load = function () {
10\. if (options.id.length == 0)
11\.    return; 
```

在随后的加载中，options.id.length 为零。然后不会加载模板，也不会获取结果。

第一个页面加载包含脚本：

```
<script type="text/javascript">
yepnope([{ test: window.jQuery, nope: '/ravendb/profiling?path=jquery-1.6.1.min.js' }, { test: window.jQuery && window.jQuery.fn.tmpl, nope: '/ravendb/profiling?path=jquery.tmpl.min.js' }, {load: '/ravendb/profiling?path=ravendb-profiler-scripts.js', complete: function() { jQuery(function() { RavenDBProfiler.initalize({ id:['df05238a-24a6-4a16-ad63-3b9537e9b544'], url: '/ravendb/profiling' }); }) } }]);
</script> 
```

随后的加载包含：

```
<script type="text/javascript">
yepnope([{ test: window.jQuery, nope: '/ravendb/profiling?path=jquery-1.6.1.min.js' }, { test: window.jQuery && window.jQuery.fn.tmpl, nope: '/ravendb/profiling?path=jquery.tmpl.min.js' }, {load: '/ravendb/profiling?path=ravendb-profiler-scripts.js', complete: function() { jQuery(function() { RavenDBProfiler.initalize({ id:[], url: '/ravendb/profiling' }); }) } }]);
</script> 
```

**请注意缺少*id*对象。**

我还尝试了[迷你分析器](http://miniprofiler.com/)，还尝试从最新的不稳定 RavenDb 客户端回滚到当前的稳定版本。似乎没有什么不同。

这是预期的行为吗？我还需要做其他事情吗？我在这里是白痴吗？

**更新**

我刚刚安装了 Glimpse.Ravendb 插件，它报告：

> EmbeddableDocumentStore 目前不支持分析。

但是，我显然没有使用`EmbeddableDocumentStore`：

```
public static class DocumentStoreFactory
{
    public static IDocumentStore Create(string connectionStringName)
    {
        var documentStore = new DocumentStore { ConnectionStringName = connectionStringName };
        documentStore.Initialize();
        documentStore.DatabaseCommands.EnsureDatabaseExists(connectionStringName);

        var catalog = new CompositionContainer(new AssemblyCatalog(typeof(Users_ByKarmaAndLocation).Assembly));
        IndexCreation.CreateIndexes(catalog, documentStore.DatabaseCommands.ForDatabase(connectionStringName), documentStore.Conventions);

        return documentStore;
    }
} 
```

我不确定这是否是红鲱鱼。以为我会提到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:44:28.380

问题是我的 Unity 设置。我不应该使用 Unity `HierarchicalLifetimeManager()`，而是使用`PerResolveLifetimeManager()`. 重新启动应用程序后，Glimpse 问题就解决了。

事后看来，我应该更仔细地关注不同类型的 LifetimeContainers 并正确使用它们。

更新后的 Unity 配置如下所示：

```
public static class AppStart_Unity
{
    public static void RegisterServices(IUnityContainer container)
    {
        container.RegisterInstance(DocumentStoreFactory.Create(ConfigurationManager.ConnectionStrings[0].Name));
        //container.RegisterType<IDocumentSession>(new HierarchicalLifetimeManager(), new InjectionFactory(c => c.Resolve<IDocumentStore>().OpenSession(ConfigurationManager.ConnectionStrings[0].Name)));
        container.RegisterType<IDocumentSession>(new PerResolveLifetimeManager(), new InjectionFactory(c => c.Resolve<IDocumentStore>().OpenSession()));
    }

    public static void Start()
    {
        // Create the unity container
        IUnityContainer container = new UnityContainer();

        // Register services with our Unity container
        RegisterServices(container);

        // Tell ASP.NET MVC to use our Unity DI container
        DependencyResolver.SetResolver(new UnityServiceLocator(container));

        var store = container.Resolve<IDocumentStore>();
        var documentStore = store as DocumentStore;
        if (documentStore == null)
        {
            return;
        }

        RavenProfiler.InitializeFor(
            documentStore,
            "Email", "HashedPassword", "AkismetKey", "PasswordSalt", "UserHostAddress");
        Profiler.AttachTo(documentStore);
    }
} 
```

# javascript - 将附加参数传递给路由（expressjs）

> ID：11539625
> 
> 赞同：1
> 
> 时间：2012-07-18T10:47:28.900
> 
> 标签：javascript, node.js, parameters, express

最近开始使用 express 后，我偶然发现了以下问题：

我的路由的整个逻辑是在单独的文件中定义的，然后通过 require(route_name) 包含这些文件。各自的 get / post 匹配如下：

```
app.get('/', routes.home) etc. 
```

上面这行暗示 routes.home 是一个使用参数 req、res 和 next 调用的函数。

我有一堆实用程序函数存储在 utils 对象中，我希望每条路由都能够访问它们。到目前为止，我一直在解决以下问题：

```
var utils = ...

app.get('/', function (req, res, next) {
  routes.home(req, res, next, utils);
}); 
```

有没有办法告诉 express 它应该将 utils 对象作为参数传递给每条路由，或者通常是我的问题的更好解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:54:19.670

我同意JohnnyHK。还有为什么你需要通过 res 和 req 两次？为什么不在您的应用程序文件中执行此操作：

```
app.get('/', routes.home); 
```

然后在你需要的文件中是这样的：

```
var utils = require('utils')
exports.home = function(req, res){
    //code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:51:51.740

感谢所有的答案。我通过在我想要到 utils 模块的路由上调用“init(utils)”函数找到了解决问题的方法。

# java - 收到“错误：一般错误。无法生成指定的 XSD 文件！” 在尝试获取 wsdl 文件的依赖 xsd 时

> ID：11539629
> 
> 赞同：3
> 
> 时间：2012-07-18T10:47:43.320
> 
> 标签：java, wsdl, websphere, jax-ws, websphere-7

我有一个作为 web 服务公开的 EJB 会话 bean：

```
 @Stateless
    @WebServiceProvider(
            targetNamespace = "http://WSCreateAccountMovementListRequest.ws.mybank.ru",
            serviceName = "WSCreateAccountMovementListRequest",
            portName = "WSCreateAccountMovementListRequestPort",
            wsdlLocation = "META-INF/wsdl/WSCreateAccountMovementListRequest/WSCreateAccountMovementListRequest.wsdl")
    @ServiceMode(value = Service.Mode.MESSAGE)
    @javax.jws.HandlerChain(file = "handlers.xml")
    public class WSCreateAccountMovementListRequestImpl implements Provider<SOAPMessage> {
...
} 
```

此 bean 部署在 Websphere AS 7.0.0.21 上。我希望服务的客户端能够访问 wsdl 以生成他们的存根。但我遇到了麻烦。我可以毫无问题地访问已部署服务的 wsdl，但是当我尝试在 SoapUI 中从 wsdl 创建项目时，我收到此错误：

> 加载错误 [ [http://example.com:9081/WSCreateAccountMovementListRequest/WSCreateAccountMovementListRequest/META-INF/wsdl/WSCreateAccountMovementListRequest/WSCreateAccountMovementListRequestTypes.xsd](http://example.com:9081/WSCreateAccountMovementListRequest/WSCreateAccountMovementListRequest/META-INF/wsdl/WSCreateAccountMovementListRequest/WSCreateAccountMovementListRequestTypes.xsd)

如果我尝试在浏览器中查看该 xsd，我会得到以下信息：

> 错误：一般错误。
> 
> 无法生成指定的 XSD 文件！

xsd 文件与 wsdl 文件放在同一目录中（`META-INF/wsdl/WSCreateAccountMovementListRequest/`在 EJB jar 中）。

任何帮助，将不胜感激。

# javascript - Google Maps API v3 中是否有等效的 GDownloadUrl 函数

> ID：11539630
> 
> 赞同：2
> 
> 时间：2012-07-18T10:47:48.620
> 
> 标签：javascript, ajax, google-maps, google-maps-api-3, xmlhttprequest

我在各个地方使用了 Google Maps API 版本 2 功能[`GDownloadUrl`](https://developers.google.com/maps/documentation/javascript/v2/reference#GDownloadUrl)来下载 XML/JSON 数据。我正在将大约 3 打地图页面转换为版本 3，但我无法找到与此功能等效的功能。是否有或者我应该使用另一个库来处理 AJAX/XHR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:01:40.193

google maps API v3 中没有内置功能（如果您想要一些历史，[v3 组中有几个讨论，包括](https://groups.google.com/group/google-maps-js-api-v3/search?hl=en&group=google-maps-js-api-v3&q=GDownloadUrl&qt_g=Search+this+group)[这个包括来自谷歌的 Pamela Fox 的回答（当时）](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/12542ae618555594/660c2a04d67cc1dd?hl=en&lnk=gst&q=GDownloadUrl#660c2a04d67cc1dd)）。[演示库](https://developers.google.com/maps/documentation/javascript/demogallery)中有一个示例（搜索 xml），我在此[示例中使用了一个版本，来自 Mike WIlliams 的 v2 教程，我翻译成 v3](http://www.geocodezip.com/v3_MW_example_map3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:18:43.060

API V3 中没有等效功能。我使用基于此示例编写的[这个单独的函数：](http://maps.forum.nu/ajax2.js)

[https://developer.mozilla.org/En/AJAX:Getting_Started#Step_3_.E2.80.93_A_Simple_Example](https://developer.mozilla.org/En/AJAX:Getting_Started#Step_3_.E2.80.93_A_Simple_Example)

（在所有浏览器中都可以正常工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T07:49:35.040

代替...

```
 GDownloadUrl('https://your/url.json', function(data) {
        // ...
    }); 
```

...你可以这样做，假设你已经加载了[jQuery](https://jquery.com/)并且可以作为`$`：

```
 $.get('https://your/url.json', function(data) {
        // ...
    }); 
```

# c# - 如何将 utf8 字符串转换为 utf8 字节数组？

> ID：11539631
> 
> 赞同：30
> 
> 时间：2012-07-18T10:47:48.927
> 
> 标签：c#, .net, encoding, utf-8

如何将字符串转换为 utf8 字节数组，我有这个示例代码：

这工作正常：

```
StreamWriter file = new StreamWriter(file1, false, Encoding.UTF8);
file.WriteLine(utf8string);
file.Close(); 
```

这工作错误，文件是 ASCII：

```
byte[] bytes = System.Text.UTF8Encoding.UTF8.GetBytes(utf8string);
FileStream fs = new FileStream(file2, FileMode.CreateNew);
fs.Write(bytes, 0, bytes.Length);
fs.Close(); 
```

我想得到这个函数返回的字节数组：

```
System.IO.File.ReadAllBytes(path_to_file) 
```

因为这工作正常：

```
byte[] datab = File.ReadAllBytes(file1);
FileStream fs2 = new FileStream(file3, FileMode.CreateNew);
fs2.Write(datab, 0, datab.Length);
fs2.Close(); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-18T10:55:35.737

可以再次使用其他选项：

```
string value = "\u00C4 \uD802\u0033 \u00AE";    
byte[] bytes= System.Text.Encoding.UTF8.GetBytes(value); 
```

有关更多信息，可以查看[Encoding.UTF8 属性](https://msdn.microsoft.com/en-Gb/library/system.text.encoding.utf8.aspx)

# python - 我怎样才能获得 __call__ 实例的附加？

> ID：11539632
> 
> 赞同：1
> 
> 时间：2012-07-18T10:48:00.960
> 
> 标签：python

```
 class Method(object):
     def __call__(self):
         #how could I get the App instance here?
         return True

 class App(object):
     def __init__(self):
         self.g = Method() 
```

如您所见，上面的代码可以解释我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:50:30.827

您必须将指针存储回方法中的 App 对象：

```
class Method(object):
    def __init__(self, app):
        self.app = app

    def __call__(self):
        self.app.something()
        return True

class App(object):
    def __init__(self):
        self.g = Method(self) 
```

如果您绝对需要避免`self`在 App 中传递指针，则需要检查堆栈以取回它。

**以下是不鼓励的，仅当您`Method`在以下方法中实例化对象`App`**时才有效：

```
import sys

class Method(object):
    def __init__(self):
        parent = sys._getframe(1) # Calling context
        locals_ = frame.f_locals
        assert ('self' in locals_,
            'Method objects can only be instanciated inside instance methods')
        self.app = locals_['self'] 
```

# ruby-on-rails - 从公共目录之外提供图像

> ID：11539634
> 
> 赞同：0
> 
> 时间：2012-07-18T10:48:04.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我不是红宝石程序员，必须维护我继承的代码库，如果这是一个菜鸟问题，请原谅我（快速搜索 SO 并没有透露太多）

用户将文件上传到 Rails 应用程序，它们存储在 /uploads/images 而不是 /public/assets/

我可以获得看起来像 /uploads/images/image01.png 的路径，如何在视图的 image_tag 中使用它？

也许我应该创建一个控制器来获取这些文件？就像是

```
<img src="/images?name=image01.png" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:56:17.833

您可以创建自定义控制器来提供该文件，并在其中使用 send_file mentod 配置内联[http://apidock.com/rails/ActionController/DataStreaming/send_file](http://apidock.com/rails/ActionController/DataStreaming/send_file)您也可能对 x_sendfile_header 设置感兴趣，以使用 apache/nginx 服务该文件更快[http://guides.rubyonrails.org/asset_pipeline.html#x-sendfile-headers](http://guides.rubyonrails.org/asset_pipeline.html#x-sendfile-headers)

# multithreading - 在 Spring 中生成一个知道其他 bean 的线程

> ID：11539641
> 
> 赞同：0
> 
> 时间：2012-07-18T10:48:50.350
> 
> 标签：multithreading, spring, hibernateexception

我需要在 Spring 中创建一个永远循环的线程，并在 LinkedBlockingQueue.take() 上阻塞以处理其中的对象（控制器将对象放入该队列中）。如果在@Controller 中处理我的代码，则可以正常工作。但是，现在我将它移到线程中，我从 Hibernate 获得了多个 LazyInitializationException。简而言之，我的线程的伪代码骨架是：

```
@Component
public class AsynchronousConsumer implements Runnable
{
   @Autowire
   // Service Layer and other goodies (all correctly injected)

   @PostConstruct
   public void init(){
      (new Thread(this)).start();
   }

   // Note that an @Controller action is placing MyBean in the queue 
   protected static LinkedBlockingQueue<MyBean> queue = new LinkedBlockingQueue<MyBean>();

   @Override
   public void run()
   {
      while(true)
      {
         MyBean myBean = queue.take();
         this.processBean(myBean); // do the processing
      }    
   }    
   void processBean(MyBean m)
   {
      // Hybernate exceptions happen when retrieving objects from the DB
   }
} 
```

我在这里做错了吗？我应该如何启动我的线程以使其完全了解 Spring/Hibernate？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:20:33.277

我不确定是否需要创建自己的线程我认为你应该能够通过在春季拥有任务调度程序和执行程序来做到这一点。[任务与调度](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

# mysql - 删除 MySQL 中部分相似的行

> ID：11539643
> 
> 赞同：1
> 
> 时间：2012-07-18T10:49:12.007
> 
> 标签：mysql, sql

我需要使用 MySQL 删除表中部分相似的行。前任：

来自 table1 (id,color1,color2,key) 内容：

```
id,color1,color2,key
-----------------------------
1,Blue,Green,AASDDD
2,Blue,Green,JJUUYYY
3,Blue,Red,HHYYY
4,Green,Red,KKIII
5,Blue,Red,KKIIUUUU 
```

我想删除 color1,color2 中的重复行并获得：

```
id,color1,color2,key
-----------------------------
1,Blue,Green,AASDDD
3,Blue,Red,HHYYY
4,Green,Red,KKIII 
```

就像是

```
delete FROM table1 WHERE Exists(SELECT color1,color2 FROM table1) 
```

在不创建临时表的情况下在 MySQL 中执行此操作的最佳方法是什么？

（我知道有很多关于删除 MySQL 中重复行的帖子，但不是针对部分匹配的行。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T10:53:22.927

```
DELETE FROM table1 
WHERE id NOT IN (SELECT min(id) 
                 FROM table1 
                 GROUP BY color1, color2) 
```

## 编辑

MySQL 不能从具有同一表的子查询的表中删除。要解决该限制，您可以执行以下操作：

```
DELETE FROM table1 
WHERE id NOT IN (select * from (SELECT min(id) 
                               FROM table1 
                               GROUP BY color1, color2) t) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T10:55:05.327

```
DELETE FROM table1 WHERE id NOT IN (SELECT min(id) FROM table1 GROUP BY color1, color2) 
```

这里有 GROUP BY 的手册：http: [//dev.mysql.com/doc/refman/5.0/en/group-by-functions-and-modifiers.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions-and-modifiers.html)

教程：

*   [http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/)
*   [http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

笔记：

在 MySQL 中：

> 目前，您不能在子查询中从表中删除并从同一个表中选择。

至少对于 5.0 版本。( [http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html) )

因此，在 mysql 中，您可以在[事务中使用](http://dev.mysql.com/doc/refman/5.0/en/commit.html)[TEMPORARY TABLE](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)：

```
BEGIN;
CREATE TEMPORARY TABLE colors_temp SELECT min(id) as id FROM table1 GROUP BY color1, color2;
DELETE FROM table1 WHERE id NOT IN (SELECT id FROM colors_temp);
DROP TABLE colors_temp;
COMMIT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:06:02.760

```
 DELETE FROM table1 
   WHERE id NOT IN (SELECT MIN(id) FROM table1 GROUP BY colo1, color2) 
```

# android - 我的 android 应用程序访问 wcf Web 服务的命名空间、soap 操作和 url 应该是什么？

> ID：11539646
> 
> 赞同：9
> 
> 时间：2012-07-18T10:49:37.897
> 
> 标签：android, ksoap2

我的 WSDL 是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
    <wsdl:definitions name="ABCWcfService" targetNamespace="http://www.ABC.com/ABCWcfService" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://www.ABC.com/ABCWcfService" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
      <wsdl:types>
        <xsd:schema targetNamespace="http://www.ABC.com/ABCWcfService/Imports">
          <xsd:import schemaLocation="http://desktop/ABCWcfService/ABCWcfService.svc?xsd=xsd0" namespace="http://www.ABC.com/ABCWcfService"/>
          <xsd:import schemaLocation="http://desktop/ABCWcfService/ABCWcfService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
        </xsd:schema>
      </wsdl:types>
      <wsdl:message name="IABCWcfService_GetWhatsOnData_InputMessage">
        <wsdl:part name="parameters" element="tns:GetWhatsOnData"/>
      </wsdl:message>
      <wsdl:message name="IABCWcfService_GetWhatsOnData_OutputMessage">
        <wsdl:part name="parameters" element="tns:GetWhatsOnDataResponse"/>
      </wsdl:message>
      <wsdl:portType name="IABCWcfService">
        <wsdl:operation name="GetWhatsOnData">
          <wsdl:input wsaw:Action="http://www.ABC.com/ABCWcfService/IABCWcfService/GetWhatsOnData" message="tns:IABCWcfService_GetWhatsOnData_InputMessage"/>
          <wsdl:output wsaw:Action="http://www.ABC.com/ABCWcfService/IABCWcfService/GetWhatsOnDataResponse" message="tns:IABCWcfService_GetWhatsOnData_OutputMessage"/>
        </wsdl:operation>
      </wsdl:portType>
      <wsdl:binding name="BasicHttpBinding_IABCWcfService" type="tns:IABCWcfService">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
        <wsdl:operation name="GetWhatsOnData">
          <soap:operation soapAction="http://www.ABC.com/ABCWcfService/IABCWcfService/GetWhatsOnData" style="document"/>
          <wsdl:input>
            <soap:body use="literal"/>
          </wsdl:input>
          <wsdl:output>
            <soap:body use="literal"/>
          </wsdl:output>
         </wsdl:operation>
      </wsdl:binding>
      <wsdl:service name="ABCWcfService">
        <wsdl:port name="BasicHttpBinding_IABCWcfService" binding="tns:BasicHttpBinding_IABCWcfService">
          <soap:address location="http://desktop/ABCWcfService/ABCWcfService.svc"/>
        </wsdl:port>
      </wsdl:service>
    </wsdl:definitions> 
```

我想知道我应该为我的 SOAP_ACTION、METHOD_NAME、NAMESPACE 和 URL 放什么？我猜：

```
SOAP_ACTION = "http://www.ABC.com/ABCWcfService/IABCWcfService/GetWhatsOnData"
METHOD_NAME = "GetWhatsOnData"
NAMESPACE = "http://www.ABC.com/ABCWcfService"
URL = "http://desktop/ABCWcfService/ABCWcfService.svc" 
```

但它似乎在我的代码中不起作用：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION, envelope);
SoapObject result = (SoapObject) envelope.getResponse(); 
```

它在 androidHttpTransport.call(SOAP_ACTION, envelope); 行进入异常；异常对象 e 的值为 null。

我已经添加

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

在清单文件中

谁能告诉我怎么了？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T05:02:13.507

好吧，我是这样做的

```
[OperationContract]
    [WebInvoke(Method = "GET",
                RequestFormat = WebMessageFormat.Json,
                ResponseFormat = WebMessageFormat.Json,
                UriTemplate = "/Login?ID={ID}&PASSWORD={PASSWORD}")]
    System.IO.Stream ValidarLogin(int ID, string PASSWORD); 
```

并在 android 客户端

```
class MiTareaAsincrona extends AsyncTask<Void, Integer, String> {
    ProgressDialog dialog=null;

 protected void onPreExecute() {
   dialog = new ProgressDialog(MainScreen.this);
    dialog.setMessage("Verificando sus datos.. ");
    dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
   // dialog.setMax(100);
    dialog.setCancelable(false);
    dialog.show();

    }

   @Override
   protected String doInBackground(Void... params) {

       final EditText text1 = (EditText) findViewById(R.id.editText1);
       final EditText text2 = (EditText) findViewById(R.id.editText2);
     String Cedula=  text1.getText().toString();
     String Password = text2.getText().toString();

     final String URL = "https://MYURL.COM/NGLOGIN/NGLogin.svc/Login?ID="+Cedula+"&PASSWORD="+Password;

    if(!Cedula.equals("") || !Password.equals("")){

                try {
                        key=ValidarLogin(URL);

                    } catch (ClientProtocolException e) {
                            // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();

                        key="noinet";
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

    //  this.cancel(true);
    }

    return key;

   }

   @Override
   protected void onPostExecute(String result) {
       String a= result.toString();
       Boolean aa= " ".equals(result);

      if(!result.equals("false") & !result.equals("noinet")){
          dialog.dismiss();
         finalizo=true;
         if(finalizo){
              Intent intent = new Intent(getApplicationContext(), MainMenu.class);
                intent.putExtra("llave", key);
                startActivity(intent);} 
```

ValidarLogin(URL) 代码：

```
public String ValidarLogin (String URL) throws ClientProtocolException, IOException, JSONException
   {

       Security.addProvider(new BouncyCastleProvider());

       HttpClient  client =  new MyHttpsClient(getApplicationContext());

       HttpGet get = new HttpGet(URL);
       HttpResponse response = client.execute(get);

       int status = response.getStatusLine().getStatusCode();

       if(status == 200) //sucess
       {
           HttpEntity e = response.getEntity();
           String key = EntityUtils.toString(e);
         // get.abort();
        /*/ char[] arreglo = key.toCharArray();
         char[] arreglo2= new char[arreglo.length-2];

         for(int x=1; x<arreglo.length-1;x++){

             arreglo2[x-1] = arreglo[x];

         }

         /*/

           if(!key.equals("")){return key;}
           return "false";

       }

           return "false";

   } 
```

如果用户和密码都正常，wcf 将返回 1 或不返回任何内容。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T23:58:09.000

您可以使用 WCFTestClient 并单击底部的 XML 选项卡。您可以找到您正在查找的信息（SOAP URL 和操作）。我希望这将有所帮助。

# python - uwsgi下带有插件pyramid_exclog的金字塔项目中的excepiton.log文件中没有异常日志输出

> ID：11539647
> 
> 赞同：1
> 
> 时间：2012-07-18T10:49:46.247
> 
> 标签：python, logging, pyramid, uwsgi

我使用 uwsgi 来部署我的金字塔项目。并且还使用 pyramid_exclog 来捕获异常日志，该日志预计将记录到文件 exception.log 中。但是所有日志信息（包括异常日志）都输出到文件“project.log”中，该文件在[uwsgi]部分中设置，文件production.ini

```
[uwsgi]                                                                                                                                                                                                                   
logto = /var/log/project.log 
```

我需要您的帮助才能将异常信息输出到 exception.log 文件而不是 project.log 我使用“pserve”命令启动我的项目，一切正常。那么如何在uwsgi下部署pyramid_exclog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T21:36:53.453

我遇到了同样的问题。我已经尝试过该`--ini-paste-logged`选项，但这需要粘贴。我在 Python 3.3 下运行，并且粘贴尚未针对 Python 3 进行更新，所以这对我不起作用。

我想出的是像这样创建自己的 WSGI 应用程序文件（文件名为`production.wsgi`）：

```
import configparser
import logging.config

from myapp import main

ini_path = 'production.ini'

# Set up logging
logging.config.fileConfig(ini_path)

# Parse config and create WSGI app
config = configparser.ConfigParser()
config.read(ini_path)

# First argument is default config values, second argument are the settings
# from the app:main section
# http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/startup.html
application = main(config['DEFAULT'], **config['app:main']) 
```

然后在我的`production.ini`文件中，我有以下`[uwsgi]`部分：

```
[uwsgi]
wsgi-file = %d/production.wsgi
chdir = %d
http-socket = :29999
enable-threads = true
master = true
processes = 1 
```

我没有以`--ini-paste`or开头，而是以以下开头：`--ini-paste-logged``--ini`

```
/usr/bin/uwsgi --ini /usr/local/myapp/production.ini 
```

（uWSGI 实际上已安装到我的应用程序的虚拟环境中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:09:18.607

这是我的做法。在 irc 日志上找到了这个

首先，确保按照[此处所述正确设置它](http://docs.pylonsproject.org/projects/pyramid_exclog/en/latest/index.html)

然后在您的应用中手动设置日志记录

```
from pyramid.paster import setup_logging

# somewhere in your main app
setup_logging('your-settings.ini') 
```

我不知道这样做是否有副作用，但到目前为止它有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:22:22.293

pyramid_exclog 使用标准的 python 日志记录模块。因此，您需要确保 uwsgi 在运行应用程序时从您的 ini 中解析日志记录配置。我认为这涉及`--ini-paste-logged`在 uWSGI 下使用或类似调用您的应用程序。此外，请确保您按照 pyramid_exclog 文档中的说明实际设置日志记录。

# mvc-mini-profiler - MiniProfiler 卸载错误

> ID：11539651
> 
> 赞同：0
> 
> 时间：2012-07-18T10:49:52.050
> 
> 标签：mvc-mini-profiler

我无法从我的项目中卸载 MiniProfiler。它总是给我这个错误消息'Microsoft JScript 运行时错误：'MiniProfiler'未定义'并将动态 JavaScript 代码插入我的 html 页面。当我按下浏览器的后退按钮时，它在 IE9 上。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:56:01.693

如果将以下代码行添加到 web.config 文件中，它应该可以解决问题：

```
 <system.webServer>
    ...
    <handlers>
      <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" 
         type="System.Web.Routing.UrlRoutingModule"
         resourceType="Unspecified" 
         preCondition="integratedMode" />
  </handlers>
  </system.webServer> 
```

**在将MiniProfiler**与**MVC 4**应用程序一起使用时，我注意到完全相同的错误。这为我修好了。有关更多信息，请查看**MiniProfiler**论坛：

[http://community.miniprofiler.com/permalinks/113/microsoft-jscript-runtime-error-miniprofiler-is-undefined](http://community.miniprofiler.com/permalinks/113/microsoft-jscript-runtime-error-miniprofiler-is-undefined)

# php - 第一次单击无法发布到数据库（第二次单击工作）

> ID：11539653
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:49:53.653
> 
> 标签：php, sql

我有一个大问题。我有一个功能，您应该替换“密码”。但是当用户第一次点击提交时，在 var_dump 中留下 Hands = "false"。如果您再次执行相同的过程并且效果很好！有没有类似的问题？

看法：

```
 public function View(){
    $NavigationView = New NavigationView();

    return "
    <div class='change'>
            <form name='login' id='RegisterUserForm' method='Post'  action='" . $NavigationView -> GetPersonIndex() . "'>
                <p>
                    <label class='label' for='password'><h2  id='changelabel' >New Password</h2></label>
                </p>
                <p>
                    <input type='password' size='20' name='$this->pass' id='name' class='text'/>
                </p>

                    <input type='hidden'  id='submithidden' value='true' name='" . NavigationView::Personindex . "'/>
                    <input type='submit'  name='submit' id='submit' value='Change Password'/>
            </form>
    </div>
    ";

} 
```

控制器 ：

```
if($PersonChangeView->TriedToChangePassword()){
        var_dump($PersonChangeView->GetPassword(),$Username);
        $kalle = $UserHandler->ChangePassword($PersonChangeView->GetPassword(),$Username);
        var_dump($kalle);

    } 
```

处理程序：

```
 public function ChangePassword($password,$username){
    var_dump($password,$username);
    $DBConnection = new DBConnection();
    $DBConnection -> Connect();
    $sql= "UPDATE user SET m_password=? where m_username=?";
    $stmt = $DBConnection -> prepare($sql);
    $stmt -> bind_param("ss",$password, $username);
    if ($stmt === FALSE) {
        //echoBr("prepare of '$sql' failed " .  $DBConnection -> error);
        return false;
    }
    $stmt -> execute();
    // ger resultet.
    $result = $stmt -> get_result();
    $stmt -> close();
    return false;

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:46:23.863

您确定以正确的顺序执行脚本吗？似乎它第一次工作，但没有用新数据检索页面。并且仅在第二次显示您实际上是第一次尝试的结果。

您需要在修改 Handler 和 Controller 中的值后调用您的视图。

# android - 打开失败：EBUSY（设备或资源忙）

> ID：11539657
> 
> 赞同：34
> 
> 时间：2012-07-18T10:50:13.387
> 
> 标签：android, inputstream, unzip

我的应用程序中有一个奇怪的错误。

在我的应用程序中，可以下载一个 zipFile，按原样阅读内容并删除它。它到底是什么并不重要。

问题：只有在摩托罗拉 Xoom（4.0.4 版）上，我可以下载文件，解压缩，我可以读取数据，我可以删除所有内容。但是，如果我尝试再次下载文件并解压缩文件并将文件复制到 SD 卡，它会因错误 EBUSY（设备或资源繁忙）而崩溃。

1.  为什么它只在第一次工作？
2.  那个错误是什么意思？
3.  为什么我只在 Xoom 上收到此错误？

我找不到任何解决方案。在所有其他设备上它工作正常，没有错误或问题。

日志猫：

```
07-18 12:27:46.774: E/PrepareMagTask(10057): IOException
07-18 12:27:46.774: E/PrepareMagTask(10057): java.io.FileNotFoundException: /mnt/sdcard/Android/data/com.xxxxxx.android/files/content/23760/emag.db: open failed: EBUSY (Device or resource busy)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at libcore.io.IoBridge.open(IoBridge.java:406)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at com.xxxxx.android.util.io.ZipHelper.uncompressEntry(ZipHelper.java:35)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at com.xxxxx.android.task.PrepareMagTask.doInBackground(PrepareMagTask.java:271)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at com.xxxxx.android.task.PrepareMagTask.doInBackground(PrepareMagTask.java:1)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at java.lang.Thread.run(Thread.java:856)
07-18 12:27:46.774: E/PrepareMagTask(10057): Caused by: libcore.io.ErrnoException: open failed: EBUSY (Device or resource busy)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at libcore.io.Posix.open(Native Method)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
07-18 12:27:46.774: E/PrepareMagTask(10057):    at libcore.io.IoBridge.open(IoBridge.java:390)
07-18 12:27:46.774: E/PrepareMagTask(10057):    ... 11 more 
```

它在我的 ZipHelper 类的第 35 行崩溃：

```
FileHelper.copy(zipFile.getInputStream(entry), new FileOutputStream(outputFile), modify); 
```

getInputStream(entry) ...我真的不知道为什么？

有没有一种方法可以在设备繁忙时等待设备或追索权？每次我尝试解压缩文件时都会发生这种情况，应用程序会尝试 5 次（下载 - > 解压缩）并且每次都会崩溃。

编辑：我们发现，它不仅是 Xoom。我们也有版本 4.0.4 的华硕变压器的错误

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-02T11:27:05.810

我有一个很大的答案！问题来自 Android 系统或/和 FAT32 系统。我无法解释系统如何得到错误，它与删除文件和 FAT32 系统有关。

但解决方案非常简单：在删除目录或文件之前：重命名它！

重命名代码：

```
final File to = new File(file.getAbsolutePath() + System.currentTimeMillis());
file.renameTo(to);
to.delete(); 
```

就是这样，如果您在删除之前重命名文件夹或文件，系统就没有机会再次尝试打开现有文件或您想要再次保存的打开文件（或类似的东西）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-18T11:41:31.090

这个问题可能是由于

*   **两个或多个进程引用同一个文件**

*   **文件被删除，但引用没有被杀死**

但是，删除它，只有一个引用被杀死，或者**一个或多个**进程也引用了这个文件

你可以一步一步：

在删除文件之前，您应该

*   `adb shell lsof | grep "com.xxxxxx.android"`

您打开的文件，以及哪个进程引用了您打开的文件。另外，这个命令，显示我们的进程ID

比，

*   `adb shell ls -al /proc/%d/fd`

惊喜等着你，O(∩_∩)O

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T07:34:02.643

它似乎是一个挥之不去的文件系统锁。我在不接触我的代码的情况下修复了它，我认为这是通过拔下我的 USB 电缆并重新插入它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-22T12:33:19.507

得到完全相同的错误，尝试拔掉插头，重新启动 Eclipse 等，但没有任何效果。最后不得不重新启动手机，一切都恢复原状；）

感谢您让我走上正确的道路！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-27T22:57:54.553

我在 Sony Xperia 中注意到这个错误，当目录中的文件在写入一些内容后没有关闭并且我正在尝试访问（修改/删除）目录时。

确保正确关闭文件。确保没有程序正在访问您的文件。那么你就不会遇到这个错误了。

如果您不确定任何程序可能正在访问您的目录，请确保在删除目录之前删除（/关闭）目录中的所有文件。

adb reboot 是关闭打开文件的一种选择。但这不是一个好的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-18T19:51:16.623

我知道这是一个老问题，最初是针对 XOOM 报告的，但如果 OP 有一个未正确关闭的打开 FileOutputStream，即通过 finally 块，那么这可能是导致资源被持有的原因稍后尝试引用它时……即使实际删除了物理文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-11T13:49:39.323

该消息`rm: could not remove directory (code EBUSY)`，表示某些应用程序或进程正在使用该目录。

对我来说，这通常意味着 AndroidStudio、Webstorm 或其他 IDE 已打开。如果您打开了 IDE，关闭它可以释放删除文件夹的过程。关闭后，再次运行删除。

# css - 具有固定像素边距的流体列布局？

> ID：11539659
> 
> 赞同：2
> 
> 时间：2012-07-18T10:50:30.103
> 
> 标签：css, margin, fluid-layout

我不想为此使用 JS，**请仅使用 css 解决方案**。

我希望包含 div 内的列能够均匀地放入其中，即每个列都是容器宽度的三分之一。我在这里实现了这一点 - [http://jsfiddle.net/yFxZX/](http://jsfiddle.net/yFxZX/)

但是，除此之外，我还想要`10px margin`在列之间，第一列亲吻容器的左边缘，右列亲吻容器的右边缘。请参阅下图以了解粗略的模型。

当浏览器重新调整大小或父容器改变宽度时，我希望列相应地调整大小以填充空间，但它们之间的边距保持固定在 10px。

**这可以在没有 JS 的情况下完成吗？**

![在此处输入图像描述](../Images/93e4d50af194f57e9de9671c7e252bb5.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T11:04:26.413

使用负边距：

```
.container {
  background: green;
  overflow: auto;
}

.inner {
  padding-left: 20px;
}

.box {
  width: 33.3%;
  background: red;
  float: left;
  margin-right: 10px;
}

.first {
  margin-left: -20px;
}

.last {
  width: 33.4%;
  margin-right: 0;
  /*float:right;*/
}

img {
  max-width: 100%;
  height: auto;
  width: auto\9;
  /* ie8 */
} 
```

[http://jsfiddle.net/yFxZX/2/](http://jsfiddle.net/yFxZX/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:12:24.443

在 HTML 中：

```
<div class="container">
    <div class="box">
        <div class="box-content">
            First
        </div>
    </div>
    <div class="box">
        <div class="box-content">
            SECOND
        </div>
    </div>
    <div class="box last">
        <div class="box-content">
            Last
        </div>
    </div>
</div> 
```

在 CSS 中：

```
.container {
    background: green;
    overflow: auto;
}
.box {
    width: 33.3%;
    float: left; 
}
.box.last {
    width: 33.4%;
}
.box .box-content {
    margin-right: 10px;
    background: red;
}
.box.last .box-content {
    margin-right: 0px;
    background: red;
} 
```

如果你希望你的盒子在 css 中具有相同的高度，请添加：

```
.box .box-content {
    margin-right: 10px;
    background: red;
    margin-bottom: -1000px;
    padding-bottom: 1000px;
} 
```

[http://jsfiddle.net/wqwDN/](http://jsfiddle.net/wqwDN/)

# iphone - 如何在 iOS4 中发推文

> ID：11539661
> 
> 赞同：0
> 
> 时间：2012-07-18T10:50:31.187
> 
> 标签：iphone, ios, twitter

我想发布一张我将从我的应用程序发送的图像。我正在为我的应用程序使用 Twitter_Oauth API。为了更新状态，我使用：

```
 [_engine sendUpdate:@"This is my tweet"]; 
```

但是如何发推文呢？抱歉，我没有找到任何相关文档...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:05:35.673

使用[ShareKit](http://getsharekit.com/tutorial/twitter)很强大。它支持将图像作为文本发布到 Twitter（不仅是 Facebook、ReadItLater 和其他一些）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:30:42.643

您可以为此使用共享工具包，也可以使用 OAuth 协议或使用 can twitpic api 在 Twitter 上上传照片。您必须在 Twipic 中注册您的应用程序，查看演示[http://sourceforge.net/projects/tweetphoto/files/TestTwitpic.zip/download](http://sourceforge.net/projects/tweetphoto/files/TestTwitpic.zip/download)

该演示工作正常，但有时它会崩溃

# java - 从子类调用父类中的方法

> ID：11539664
> 
> 赞同：0
> 
> 时间：2012-07-18T10:50:51.913
> 
> 标签：java, swing, user-interface, parent-child

这似乎是一个愚蠢的问题，但是对象是否可以从实例化它的对象调用方法？

具体来说，如果我有一个扩展 JFrame 以提供 GUI 的类 A 和具有各种组件的 JPanel 类型的 B 类和 C 类，则 A 类对象在 B 和 C 之间变化以向用户显示不同的内容。B类的对象是否可以调用A类的方法而不在B内部创建另一个A类对象但调用里面有B的上层A对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:01:55.343

看起来你需要这样的东西。

```
 class A {
        private B b;
        public void method() {
            b = new B(this);
        }
    }

    class B {
        private A a;
        public B(A a) {
            this.a = a;
        }
        void callAMethod() {
            a.method();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:55:26.093

我看到的最简单的方法是将 A 传递给 B 和 C，或者通过参数或对 B/C 的扩展，该扩展包含一个 A 实例并具有一个设置器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:00:04.723

您可以尝试放置对在其中创建 B 或/和 C 对象的 A 对象的引用，例如通过使用 setter 或将它们作为构造函数参数传递。

```
class A extends JFrame{
    void someMethod(){System.out.println("methods body");}
    public static void main(String[] args) {
        A a=new A();
        B b=new B();
        b.setCreator(a);
        b.test();
    }

}
class B extends JPanel{
    private A creator;
    public void setCreator(A creator) {
        this.creator = creator;
    }

    void test(){
        creator.someMethod();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:00:59.353

还要考虑在 Swing 框架中存在不同的方法来获取组件的层次结构，例如 [getParent()](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getParent%28%29)或[getRoot()](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/SwingUtilities.html#getRoot%28java.awt.Component%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:01:27.297

最好的解决方案是让执行实例化的代码将自身的引用传递给它正在创建/已创建的对象。

理论上，一个对象可以找出哪个*类*创建了它（通过创建一个`Exception`并查看它的堆栈跟踪）......但是在执行的应用程序中没有办法找出创建*实例*。

# android - 使按钮不那么明显但不消失

> ID：11539668
> 
> 赞同：0
> 
> 时间：2012-07-18T10:50:57.317
> 
> 标签：android, button, viewgroup

几周前，我想我读过一些关于使 Button 或任何其他 View 组有点褪色或不那么明显的东西，以表明它没有被使用，但可以在用户执行某些操作时使用。现在我在任何地方都找不到它，我真的很想使用它。

有谁知道它是什么以及它是否可以在 android 2.1 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:57:50.270

// 给 0 表示完全透明 255 表示完全不透明。

```
Mybutt.getBackground().setAlpha(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:01:56.700

您可以使用以下方法，如果 Button 未启用并且您想向用户显示它未在使用中。

```
mButton.setEnabled(false); // if it is not enable and you want to show user that it is not in use. 
```

和

```
mButton.setEnabled(true); // to make it enabled/ in use 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:57:27.840

你试过这个：

```
mButton.getBackground().setAlpha(127); // semi transparent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:01:30.020

您可以在任何视图/视图组及其子级上使用[AlphaAnimation 。](http://developer.android.com/reference/android/view/animation/AlphaAnimation.html)

看看[这个答案](https://stackoverflow.com/a/4814651/1117415)。

# c - 如何从 c-string 中读取特定数量的字符？

> ID：11539669
> 
> 赞同：2
> 
> 时间：2012-07-18T10:50:59.913
> 
> 标签：c, string

我可以将`int snprintf(char *str, size_t size, const char *format, ...);` 特定数量的字符写入`str`.

如何从 c-string 中读取特定数量的字符？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:53:18.567

您可以在格式参数中传递一个数字：

```
char buf[21];
sscanf(str, "%20s", buf); 
```

这最多可将 20 个字符读入`buf`.

如果在编译时不知道要读取多少数据，可以在运行时准备格式字符串：

```
char format[20];
sprintf(format, "%%%ds", howMuchToRead);
sscanf(str, format, buf); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T18:02:01.263

[`sscanf`](https://stackoverflow.com/a/11539706/925381)作为两者的替代[`strncpy`](https://stackoverflow.com/a/11543292/925381)方案，您还可以使用**精度说明符**（例如`"%.20s"`仅打印 20 个字符）。[此 SO 帖子](https://stackoverflow.com/questions/7780809/is-it-possible-to-print-out-only-a-certain-section-of-a-c-string-without-making)中讨论了*C 字符串*的精度说明符。这些步骤与解决方案中的基本相同，您创建一个格式字符串并使用它来捕获所需的字符。 在使用时，如果您使用提到的格式说明符 ie等，如果字符串包含空格，则不能保证您将获得 20 个字符；如果遇到空格，那么您只会在空格之前获得字符（因为空格是函数族的分隔符）。相反，您应该使用类似的东西`sscanf`
`sscanf``"%20s"``scanf``%20[^\n]`. `[^\n]`表示读取直到换行，而 20 指定要扫描的字符数。所有这些都可以在[以下示例](http://ideone.com/XMrhq)中看到：

```
#include <stdio.h>
#include <string.h>

int main(void) {
        char format[20] = {0};
        char buf[50] = {0};
        char str[] = "Hello World! How are you?";
        size_t howMuchToRead = 8;

        /* Using sscanf - till whitespace or size specified */
        snprintf(format, sizeof format, "%%%zus", howMuchToRead);
        sscanf(str, format, buf);
        printf("Using sscanf with %%8s format :%s\n", buf);

        /* Using sscanf - read everything upto newline */
        snprintf(format, sizeof format, "%%%zu[^\n]", howMuchToRead);
        sscanf(str, format, buf);
        printf("Using sscanf with %%8[^\\n] format :%s\n", buf);

        /* Using precision specifier */
        snprintf(format, sizeof format, "%%.%zus", howMuchToRead);
        snprintf(buf, sizeof buf, format, str);
        printf("Using precision specifier :%s\n", buf);
        return 0;
}
/*
Output:
Using sscanf with %8s format :Hello
Using sscanf with %8[^\n] format :Hello Wo
Using precision specifier :Hello Wo
*/ 
```

sinelaw[的回答](https://stackoverflow.com/a/11543292/925381)提出了非常重要的几点，您应该小心。
希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T14:07:00.517

`sscanf`，就像`scanf`函数一样，是有问题的。正如 GNU 手册页所说：

> 给定格式说明符必须有足够的地址参数；如果不是，结果是不可预测的，并且可能是灾难性的。

因此，您需要避免一个问题（编译器无法验证您是否传递了正确数量或类型的参数，尽管有些编译器有一个 hack 专门警告您这些函数）。这个问题的一部分还在于您需要在格式字符串中硬编码最大缓冲区大小（这使得使用整数常量来防止缓冲区溢出变得更加困难）。

由于您的用例只是从字符串中复制最多一定数量的字符，因此我将按照 Joachim Pileborg 的回答所建议的那样使用`strncpy`（并确保设置一个终止符）。`'\0'`对于长度参数，您应该使用输入和输出缓冲区的最小长度，减 1 以适应 terminating `nul`。

换句话说（未经测试）：

```
strncpy(dest, src, 
        MIN(NUM_OF_CHARS_TO_COPY, 
            MIN(DEST_BUFFER_SIZE, SRC_BUFFER_SIZE)) - 1); 
```

其中`MIN(a,b)`相当于`a < b ? a : b`on 整数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T10:53:39.530

您可以使用`strncpy`或`memcpy`。但是，请注意，`strncpy`在某些情况下可能不会附加终止`'\0'`字符，而且`memcpy`永远不会。此外，`memcpy`根本不检查字符串的结尾，它只是复制您要求它的字节数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T10:55:30.857

您可以使用`sscanf`：

```
int sscanf(const char *str, const char *format, ...); 
```

例如：

```
char out[4];
sscanf("foo", "%3s", &out); 
```

当然，你也可以做一些更有趣的事情：

```
int value;
sscanf("value=10", "value=%d", &value); 
```

# objective-c - 我们可以使用 iPhone 应用程序中的任何 Wordpress 插件获取数据（或将数据插入数据库）吗

> ID：11539676
> 
> 赞同：0
> 
> 时间：2012-07-18T10:51:11.513
> 
> 标签：objective-c, ios, xcode, wordpress

有一个 wordpress 支持的网站，我需要为同一个网站开发一个原生 iphone 应用程序，因为我是社交网络开发的新手，我花了很多时间来寻找一个插件来进行数据交易，但是我找不到，我的问题是，我们可以使用任何 wordpress 插件从 iphone 应用程序从远程数据库获取数据（或将数据插入远程数据库）吗？如果没有，是否有任何其他强大的方法可以在不使用 Web 服务的情况下访问远程数据库...请帮助我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:22:24.657

WordPress 插件是影响 WordPress 安装行为的服务器端代码片段。它们不作为客户端应用程序的一部分运行。如果您正在构建本机应用程序，则需要创建与服务器对话的 Objective-C。

一个快速的谷歌搜索给了我这个作为关于如何沟通的信息的可能来源：http: [//codex.wordpress.org/XML-RPC_WordPress_API](http://codex.wordpress.org/XML-RPC_WordPress_API)

# jquery - 将 jQuery 从 1.3.1 版本升级到 1.6.1

> ID：11539677
> 
> 赞同：0
> 
> 时间：2012-07-18T10:51:17.317
> 
> 标签：jquery, upgrade

我目前正在研究 jQuery 1.3.1 到 1.6.1 的升级

我已经阅读了 jQuery 站点上的文档，详细说明了自 1.3.1 以来每个版本中的新内容

[http://jquery14.com/day-01/jquery-14](http://jquery14.com/day-01/jquery-14)

[http://blog.jquery.com/2011/01/31/jquery-15-released/](http://blog.jquery.com/2011/01/31/jquery-15-released/)

[http://blog.jquery.com/2011/05/03/jquery-16-released/](http://blog.jquery.com/2011/05/03/jquery-16-released/)

我有一个非常大的代码库，其中一些是我继承的，其中很多是我添加的。

我可以并排运行该站点的两个实例，一个使用 jQuery 1.3.1，一个使用 jQuery 1.6.1

所以我想我的问题是，有没有人从 1.3.1 升级到 1.6.1，你遇到了很多问题吗？

此外，除了这三个链接之外，是否有一个明确的变化列表？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:25:06.700

将 jquery 升级到较新的版本会引发许多 js 错误。在升级之前，请确保其他 jquery 插件，如 jquery 验证器、日期选择器、拖放等。将兼容。

# iphone - 将 UITableview 的数据写入文件

> ID：11539680
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:51:23.543
> 
> 标签：iphone, objective-c, uitableview, nsdate

我想将 Tableview 的数据写入文件。在 tableview 我有三列。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:57:06.817

你是如何填充表格的？好吧，同样的方式（使用适当的方法）可以让您读取表格的数据。至于在文件中写入内容，这是一个不同的主题。思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:57:35.953

您在表中查看的数据必须来自某个数组或字典。

遍历数组或字典以获取字符串的每个值（我想）。继续将此值附加到 NSData。然后使用方法将此数据写入文件

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile;

```

检查这个

```
//对于数组
    NSMutableArray *contentArr = [[NSMutableArray alloc] init];//你的数组在这里
    NSMutableData *bodyData = [[NSMutableData alloc] init];

    for (NSString *aStrData in contentArr) {
        [bodyData appendData:[aStrData dataUsingEncoding:NSUTF8StringEncoding]];

    }

    [bodyData writeToFile:FilePath atomically:YES];

```

# eclipse - Eclipse 未通过代理连接到 Internet

> ID：11539681
> 
> 赞同：5
> 
> 时间：2012-07-18T10:51:24.523
> 
> 标签：eclipse, proxy, java

我的 Eclipse（juno 4.2，centos 5.6）没有连接到互联网。完全没有。我有一个代理服务器设置。

我查看了[Eclipse 无法连接到互联网](https://stackoverflow.com/questions/7778484/eclipse-can-not-connect-to-internet) 以及其他各种问题。因此，目前，我的 eclipse.ini 文件如下所示：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-Dhttp.proxyHost=192.168.1.21
-Dhttp.proxyPort=3128
-Dhttp.nonProxyHosts=localhost|127.0.0.1
-Djava.net.preferIPv4Stack=true
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120522-1813
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms40m
-Xmx512m 
```

我还尝试在首选项（首选项/网络连接）中设置代理服务器值 - 设置 HTTP、HTTPS、SOCKS 主机、端口和凭据。但是没有任何活动提供程序设置（手动、本机、直接）对我有用。

我已经花了足够的时间知道我需要帮助。很糟糕。:P

所以，我在这里……救命！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:20:39.280

我可以通过“网络连接”部分下的首选项 UI 来做到这一点。我必须将“Active Provider”设置为“Manual”，然后在其下方提供代理服务器详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T08:22:05.140

这篇文章（[Eclipse Kepler not connected to internet via proxy](https://stackoverflow.com/questions/17338212/eclipse-kepler-not-connecting-to-internet-via-proxy)）建议您不应该设置（或者您应该重置为空白）SOCKS 代理以使网络连接实际工作。你试过这个吗？

编辑：也许我有点晚了:)但它仍然适用于其他人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T06:45:04.090

对于那些在使用 cntlm 和 socks 设置后仍然面临这个问题的人；您的防病毒程序可能是原因。我尝试了我发现的每一个建议，但是我无法连接到市场中的互联网（即当我激活 cntlm 时，我可以使用网络浏览器连接到互联网，但无法通过 eclipse 或 maven 连接）。然后发现防病毒程序被阻止了。

# extjs - 更改 extjs 中的日期格式

> ID：11539683
> 
> 赞同：3
> 
> 时间：2012-07-18T10:51:25.017
> 
> 标签：extjs

我是 extjs 的新手，想更改日期格式。

我正在从数据库中获取日期。我的日期格式为 -> YYYY-md，

并希望将此格式更改为 dm-YYYY。

.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T11:22:22.773

为此有`Date`和`Ext.Date.format`类。（4.1版）

```
var dt = new Date('2012-05-31')
'formatted Date:' + Ext.Date.format(dt,'d-m-Y') // 31-05-2012 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T11:58:36.747

如果您正在使用`Ext.data.Model`，您应该查看[Ext.data.Field#dateFormat](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-dateFormat) 以正确转换接收到的数据。

使用网格，您可以查看列的渲染器[Ext.grid.column.Column#renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer) 并使用[Ext.util.Format#dateRenderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Format-method-dateRenderer)作为渲染器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-24T04:43:27.357

如果您正在使用模板，请使用以下内容：

```
{MyDate:date("M")}
```

使用以下[链接](https://docs.sencha.com/extjs/6.2.1/modern/Ext.Date.html)查找从 ExtJs6.2 开始的所有 Extjs 格式

```
 Format      Description                                                               Example returned values
 ------      -----------------------------------------------------------------------   -----------------------
   d         Day of the month, 2 digits with leading zeros                             01 to 31
   D         A short textual representation of the day of the week                     Mon to Sun
   j         Day of the month without leading zeros                                    1 to 31
   l         A full textual representation of the day of the week                      Sunday to Saturday
   N         ISO-8601 numeric representation of the day of the week                    1 (for Monday) through 7 (for Sunday)
   S         English ordinal suffix for the day of the month, 2 characters             st, nd, rd or th. Works well with j
   w         Numeric representation of the day of the week                             0 (for Sunday) to 6 (for Saturday)
   z         The day of the year (starting from 0)                                     0 to 364 (365 in leap years)
   W         ISO-8601 week number of year, weeks starting on Monday                    01 to 53
   F         A full textual representation of a month, such as January or March        January to December
   m         Numeric representation of a month, with leading zeros                     01 to 12
   M         A short textual representation of a month                                 Jan to Dec
   n         Numeric representation of a month, without leading zeros                  1 to 12
   t         Number of days in the given month                                         28 to 31
   L         Whether it&#39;s a leap year                                                  1 if it is a leap year, 0 otherwise.
   o         ISO-8601 year number (identical to (Y), but if the ISO week number (W)    Examples: 1998 or 2004
             belongs to the previous or next year, that year is used instead)
   Y         A full numeric representation of a year, 4 digits                         Examples: 1999 or 2003
   y         A two digit representation of a year                                      Examples: 99 or 03
   a         Lowercase Ante meridiem and Post meridiem                                 am or pm
   A         Uppercase Ante meridiem and Post meridiem                                 AM or PM
   g         12-hour format of an hour without leading zeros                           1 to 12
   G         24-hour format of an hour without leading zeros                           0 to 23
   h         12-hour format of an hour with leading zeros                              01 to 12
   H         24-hour format of an hour with leading zeros                              00 to 23
   i         Minutes, with leading zeros                                               00 to 59
   s         Seconds, with leading zeros                                               00 to 59
   u         Decimal fraction of a second                                              Examples:
             (minimum 1 digit, arbitrary number of digits allowed)                     001 (i.e. 0.001s) or
                                                                                       100 (i.e. 0.100s) or
                                                                                       999 (i.e. 0.999s) or
                                                                                       999876543210 (i.e. 0.999876543210s)
   O         Difference to Greenwich time (GMT) in hours and minutes                   Example: +1030
   P         Difference to Greenwich time (GMT) with colon between hours and minutes   Example: -08:00
   T         Timezone abbreviation of the machine running the code                     Examples: EST, MDT, PDT ...
   Z         Timezone offset in seconds (negative if west of UTC, positive if east)    -43200 to 50400
   c         ISO 8601 date represented as the local time with an offset to UTC appended.
             Notes:                                                                    Examples:
             1) If unspecified, the month / day defaults to the current month / day,   1991 or
                the time defaults to midnight, while the timezone defaults to the      1992-10 or
                browser's timezone. If a time is specified, it must include both hours 1993-09-20 or
                and minutes. The "T" delimiter, seconds, milliseconds and timezone     1994-08-19T16:20+01:00 or
                are optional.                                                          1995-07-18T17:21:28-02:00 or
             2) The decimal fraction of a second, if specified, must contain at        1996-06-17T18:22:29.98765+03:00 or
                least 1 digit (there is no limit to the maximum number                 1997-05-16T19:23:30,12345-0400 or
                of digits allowed), and may be delimited by either a '.' or a ','      1998-04-15T20:24:31.2468Z or
             Refer to the examples on the right for the various levels of              1999-03-14T20:24:32Z or
             date-time granularity which are supported, or see                         2000-02-13T21:25:33
             http://www.w3.org/TR/NOTE-datetime for more info.                         2001-01-12 22:26:34
   C         An ISO date string as implemented by the native Date object's             1962-06-17T09:21:34.125Z
             [Date.toISOString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)
             method. This outputs the numeric part with *UTC* hour and minute
             values, and indicates this by appending the `'Z'` timezone
             identifier.
   U         Seconds since the Unix Epoch (January 1 1970 00:00:00 GMT)                1193432466 or -2138434463
   MS        Microsoft AJAX serialized dates                                           \/Date(1238606590509)\/ (i.e. UTC milliseconds since epoch) or
                                                                                       \/Date(1238606590509+0800)\/
   time      A javascript millisecond timestamp                                        1350024476440
   timestamp A UNIX timestamp (same as U)                                              1350024866
```

# webrtc - 为什么 localStreams 包含 LocalMediaStream 而 remoteStreams 包含 MediaStream？

> ID：11539689
> 
> 赞同：4
> 
> 时间：2012-07-18T10:51:36.430
> 
> 标签：webrtc

![在此处输入图像描述](../Images/3c64eb1116663e07a8121c44546fd812.png)

**localStreams**和**remoteStreams**都是“<strong>MediaStreamList”类型。 **localStreams**包含“<strong>LocalMediaStream”对象

但是，**remoteStreams**包含“<strong>MediaStream”对象

*为什么差别这么大？*

当我使用“<strong>localStreams”时——它适用于我：

```
localVideo.src = URL.createObjectURL(localStreams[0]); 
```

但是如果我尝试使用“<strong>remoteStreams”——它就不起作用：

```
remoteVideo.src = URL.createObjectURL(remoteStreams[0]) 
```

**“<strong> remoteStreams** ”和“<strong>localStreams”的 Blob 在样式上看起来相同。

为什么“<strong>remoteStreams”对我不起作用（在“<strong>onaddstream”事件中或直接）？？？

```
remoteVideo.src = URL.createObjectURL(secondPeer.remoteStreams[0])
"blob:http%3A//localhost%3A8082/78e8821f-90b8-4703-b56d-918ec505e5bf" 
```

**现场演示**：--- [https://muazkh.appspot.com/?page=WebRTC](https://muazkh.appspot.com/?page=WebRTC)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:56:42.563

LocalMediaStream 正在被 MediaStream 接口取代。

在[simpl.info/pc 上](http://simpl.info/rtcpeerconnection/)，从 Chrome Stable 和 Canary 的控制台尝试：

```
localPeerConnection.getLocalStreams()[0];
remotePeerConnection.getRemoteStreams()[0]; 
```

# ruby-on-rails-3 - Rails 3邮件拦截器冲突

> ID：11539690
> 
> 赞同：2
> 
> 时间：2012-07-18T10:51:45.247
> 
> 标签：ruby-on-rails-3, actionmailer, conflict, interceptor, mailer

我遵循 RailsCasts 教程（发送电子邮件修订版）。我不得不更改“配置”中的开发文件，因为它无法正常工作。总是当我尝试添加拦截器（告诉 Rails 也将电子邮件发送给我）时，它会停止将其发送给用户。如果我禁用它，它会将其发送给用户，但不会发送给我。我根本没有收到任何错误。谢谢 ！

```
Here are my files:
My config/development.rb file:

  ActionMailer::Base.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:user_name            => "admin@gmail.com",
:password             => 'admin',
:authentication       => "plain",
:enable_starttls_auto => true
 } 

User controller:
UserMailer.signup_confirmation(@user).deliver

User mailer file:
app/mailers/user_mailer.rb

class UserMailer < ActionMailer::Base
default from: "admin@gmail.com"

def signup_confirmation(user)
@user = user
mail to: user.email, subject: "Sign Up Confirmation"    
end
end

lib/development_mail_interceptor.rb file

 class DevelopmentMailInterceptor  
  def self.delivering_email(message)  
    message.subject = "[#{message.to}] #{message.subject}"  
    message.to = "admin@gmail.com"  
  end  
end

config/initiliazers/setup_mail.rb

require 'development_mail_interceptor'
ActionMailer::Base.register_interceptor(DevelopmentMailInterceptor) if 
Rails.env.development? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:39:02.460

您将电子邮件设置为，而不是添加到它。

```
message.to = "admin@gmail.com" 
```

尝试其中之一：

```
message.to << "admin@gmail.com" 
message.to += "admin@gmail.com" 
```

# java - 未找到 PreferenceScreen 类

> ID：11539692
> 
> 赞同：3
> 
> 时间：2012-07-18T10:51:58.893
> 
> 标签：java, android

我有一个简单的preferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <PreferenceCategory
                android:title="First Category">
                <CheckBoxPreference
.... 
```

我的 android 版本是 2.1 (API7) java 是 1.6，使用 eclipse indigo。在包资源管理器中有*android.jar*，打开后有*android.preference*包。

即便如此我得到以下错误：

```
com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- PreferenceCategory (Fix Build Path, Edit XML)
- PreferenceScreen (Fix Build Path, Edit XML) 
```

我该怎么办？提前感谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T11:09:55.000

如果preferences.xml 不在res/xml 中，你应该把它移到那里。我猜这可能是你问题的根源。

# javascript - 如何使用来自 JSP 的数据填充全局 JavaScript 对象？

> ID：11539697
> 
> 赞同：0
> 
> 时间：2012-07-18T10:52:12.177
> 
> 标签：javascript, html, jsp

我需要维护一些数据客户端以进行表单验证。数据是在服务器端创建的，然后我的计划是将它保存在一个全局 JavaScript 对象中，以便其他函数可以根据需要对其进行访问。

我的代码目前看起来像这样：

```
<html>
<body>
<script language="javascript" type="text/javascript">
    window.globVal = new Object();
<%
    SomeObject o = new SomeObject();
    ArrayList a = o.getArrayList();
    for(int i = 0; i < a.size(); i++){
        String str = a.get(i);

%>
         window.globVal[<%= str %>] = <%= o.retrieve(str) %>;
    <%}%>
    </script>

...
[SOME OTHER STUFF]
....
    <script language="javascript" type="text/javascript">
        function myFunc(){
        alert("My global obj: " +window.globVal);
    }
    </html> 
```

警报打印出“我的全局 obj：未定义

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T11:39:04.467

我将在 Java 中创建对象/数组，使用 JSON 编码器将其序列化为 JSON，将 JSON 字符串绑定到请求参数，并从此 JSON 字符串初始化 JavaScript 对象：

```
<script>
    window.globVal = ${theJsonString};
</script> 
```

# c++ - Matlab 和 C 风格的 dll

> ID：11539698
> 
> 赞同：4
> 
> 时间：2012-07-18T10:52:15.627
> 
> 标签：c++, matlab, dll

我对 Matlab 有一个非常烦人的问题。我有一个自定义 C 风格的 DLL 来与我们的硬件通信。它在我的电脑上运行良好，在我同事的电脑上运行良好。在第三台 PC 上，它无法加载：

在 365 处使用 ==> loadlibrary 时出错 无法预处理输入文件。预处理器的输出是：'cl' 不是内部或外部命令、可运行程序或批处理文件。

显然它找不到编译器。然而运行 !mex -setup 让我的交互位选择机器上唯一的编译器（VS2008）并检查 !set vs 显示路径正确。尝试直接添加路径似乎也无济于事。因为我对 Matlab 知之甚少，对 matlab 论坛的广泛搜索和尝试建议也无济于事。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:11:10.207

我不直接在你添加路径的地方做，而是尝试将 cl.exe 所在的路径添加到：

我的电脑 -> 属性 -> 高级 -> 环境变量 -> 系统变量 -> PATH

如果你打开一个命令提示符（Execute -> cmd.exe）并写“set PATH”（没有“”）你能找到正确的路径吗？如果你写 cl.exe 会发生什么。也许你应该从正确的 Visual Studio 版本（即 C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:02:21.120

也许像创建一个 cl.bat/cl.cmd 文件这样的黑客

```
@rem CL.CMD
@rem vcvars32 or vcvars64 depending on the OS
@rem Explicitly set the variables for VC
call "<YourVCDir>\Bin\VCVARS32.BAT"
@rem Pass all the parameters to the "real" cl.exe
cl.exe %* 
```

有助于 ？

# php - 将提取的 html 内容转换为 pdf 并提供使用 php 下载的选项

> ID：11539699
> 
> 赞同：0
> 
> 时间：2012-07-18T10:52:24.727
> 
> 标签：php, html, pdf-generation

我有一个 html 内容存储在一个变量中。我必须生成一个 pdf 文件，然后才能下载它

例如 $content="包含测试内容的测试文档"

我试图将其添加到 pdf 文件中，并为用户提供下载它的选项。

我试过代码

```
<?php 
header('Content-Type: text/pdf; charset=utf-8');

header('Content-Disposition: attachment; filename=data.pdf');

$output = fopen('output', 'w');

fputcsv($output, $content);
?> 
```

这提供了将文件下载为 pdf 的选项，bt 当我尝试在 pdf 阅读器中打开它时，它显示文件类型 nt 支持.. 还有其他方法可以在 php 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:26:23.997

如果您的值已经有一个变量，这里是 $content，使用**FPDF** ( [http://www.fpdf.org](http://www.fpdf.org) ) 将其变成 PDF 真的很快。

例如，使用您的变量：

```
require('fpdf.php');
$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,$content);
$pdf->Output(); 
```

此外，如果您希望您的用户直接下载文件，请编写：

```
$pdf->Output("Name.pdf","D"); 
```

请注意，在 Output() 之前不必发送任何信息；！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:00:26.080

如果我理解你所说的正确，那么你只是试图将一些 html 输出为 PDF 文件。这不是它的工作原理。你需要生成一个PDF，然后把这个内容放在那里。

我建议看看[Zend_Pdf](http://framework.zend.com/manual/en/zend.pdf.html)。

下载看[这里](http://zend-framework-community.634137.n4.nabble.com/Zend-Pdf-how-to-output-for-download-td663453.html)

# sql - 使用查询监视 SQL Server 2005 中的语句

> ID：11539703
> 
> 赞同：0
> 
> 时间：2012-07-18T10:52:53.823
> 
> 标签：sql, sql-server-2005, monitoring, transaction-log

我需要编写一个查询来获取自上次重启以来用户在特定数据库中执行的语句。

首先，我从 ::fn_dblog(NULL,NULL) 中提取所有事务，它返回事务日志。在此之后，我尝试使用这两个查询来获取缓存的查询：

```
SELECT *
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC;

-- OR

select * from master.dbo.syscacheobjects where dbid = db_id() and objtype = 'Adhoc'; 
```

我的想法是将可以产生交易的语句与其交易结合起来，并显示其他的。问题是第一个尝试获取查询信息的查询没有提供任何信息来识别数据库，而另一个查询没有提供任何可用于将其加入事务日志的信息。

我正在尝试在不了解此特定 DBMS 的情况下构建此查询，因此请原谅我的概念错误。先感谢您。

# iphone - 我将如何将一个视图控制器推送到另一个没有 nib 文件的视图控制器？

> ID：11539704
> 
> 赞同：0
> 
> 时间：2012-07-18T10:53:04.960
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我将如何推`oneviewcontroller`送到另一个`viewcontroller`没有 nib 文件的内容？

这就是我目前正在做的事情。虽然没有 nib 文件，`UserViewController`但我仍在使用`initWithNibName:@"UserViewController"`

```
-(IBAction)userProfile:(id)sender {

    UserViewController *userViewController = [[UserViewController alloc]
                                                            initWithNibName:@"UserViewController" bundle:nil];
    [self.navigationController pushViewController:userViewController animated:YES ];

    [userViewController release];  

} 
```

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:58:30.680

你只需使用：

```
[[UserViewController alloc] init]; 
```

您可以在方法中构建相应的视图`loadView`。但是请查看 Apple 的[View Controller Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:58:45.347

如果您没有任何 nib 文件，则不应提及任何文件。请找到以下代码：

```
-(IBAction)userProfile:(id)sender {

UserViewController *userViewController = [[UserViewController alloc]
                                                        init];
[self.navigationController pushViewController:userViewController animated:YES ];

[userViewController release];  

} 
```

您可以在**UserViewController**`-(id)init`中放置方法并设置全局变量。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:59:53.083

```
-(IBAction)userProfile:(id)sender {

UserViewController *userVC = [[UserViewController alloc] init];

// Replace the current view controller
NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:[[self navigationController] viewControllers]];
[viewControllers removeLastObject];
[viewControllers addObject:userVC];
[[self navigationController] setViewControllers:viewControllers animated:YES];
} 
```**

# python - python - 将字符串分解为变量

> ID：11539708
> 
> 赞同：1
> 
> 时间：2012-07-18T10:53:26.797
> 
> 标签：python, string

我敢肯定这将是一个愚蠢的问题......我试图将一个字符串`s = 'P1=12,P2=34,P3=56,P4=78'`分解成一堆单独的变量：

```
P1 = 12
P2 = 34
P3 = 56
P4 = 78 
```

`s.split(',')`给了我一份清单`['P1=12','P2=34','P3=56','P4=78']`，我认为这是一个开始。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T10:56:25.193

我会用这样的东西：

```
d = {}
for assignment in s.split(","):
    name, value = assignment.split("=")
    d[name.strip()] = float(value) 
```

这将为您提供一个将名称映射到值的字典，这很可能比尝试动态创建变量更好。如果你真的想做后者，你也可以做

```
exec s.replace(",", "\n") 
```

但这真的很可怕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T11:00:35.440

只是双重分割：

```
string = 'P1=12,P2=34,P3=56,P4=78'
d = dict( s.split('=') for s in string.split(',') )
# d == {'P2': '34', 'P3': '56', 'P1': '12', 'P4': '78'} 
```

我已将这些放入字典中，因为根据您使用数据的目的，查找可能更方便。

如果您希望将值作为整数，您可以执行以下操作：

```
d = dict( (k, int(v)) for k, v in (s.split('=') for s in string.split(',')) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:08:02.973

尝试这个：

```
s = 'A=1,B=2,C=3'
d = dict([i.split('=') for i in s.split(',')])
o = '%s = %s' % (', '.join(d.keys()), ', '.join(d.values()))
exec(o)

print A, B, C
# 1, 2, 3 
```

# c# - MVC 4 手机和平板视图分离

> ID：11539711
> 
> 赞同：6
> 
> 时间：2012-07-18T10:53:31.467
> 
> 标签：c#, asp.net-mvc

我正在尝试为平板电脑和手机制作单独的视图。在 app_start 我有这个代码

```
DisplayModeProvider.Instance.Modes.Insert(0, new
        DefaultDisplayMode("Tablet")
        {
            ContextCondition = (ctx =>
            ctx.Request.UserAgent.IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >= 0 ||
            ctx.Request.UserAgent.IndexOf("Android", StringComparison.OrdinalIgnoreCase) >= 0)
        }); 
```

我创建了两个布局文件，一个用于移动设备，一个用于平板电脑。但是当我从 Android 上的移动设备访问时存在冲突。它将我重定向到 layout.tablet。我怎么能把这两个设备分开？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T07:58:03.807

我已经在浏览器中使用用户代理切换器对此进行了测试，并且效果很好。

```
DisplayModeProvider.Instance.Modes.Insert(0, new
        DefaultDisplayMode("Tablet")
        {
            ContextCondition = (ctx =>
            ctx.Request.UserAgent.IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >= 0 ||
            ctx.Request.UserAgent.IndexOf("Android", StringComparison.OrdinalIgnoreCase) >= 0 && 
            ctx.Request.UserAgent.IndexOf("mobile", StringComparison.OrdinalIgnoreCase) < 1)
        });

        DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode("Mobile")
        {
            ContextCondition = (ctx =>
                ctx.GetOverriddenBrowser().IsMobileDevice)
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:03:23.173

新文主义者，

尝试添加一个额外的逻辑片段：

```
&& ctx.Request.UserAgent.IndexOf("mobile", StringComparison.OrdinalIgnoreCase) < 0 
```

这将从平板电脑的 DisplayMode 中排除所有移动设备。

```
DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("Tablet")
{
    ContextCondition = (ctx =>
     (ctx.Request.UserAgent.IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >=0 
       || ctx.Request.UserAgent.IndexOf("Android", StringComparison.OrdinalIgnoreCase) >= 0) 
       && ctx.Request.UserAgent.IndexOf("mobile", StringComparison.OrdinalIgnoreCase) < 0)
}); 
```

此外，您可以查看：

```
DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode("Mobile")
{
    ContextCondition = (ctx =>
        ctx.GetOverriddenBrowser().IsMobileDevice)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:15:41.717

你有没有看过像[http://51degrees.mobi](http://51degrees.mobi)这样的服务，它为你完成了所有的用户代理/设备繁重的工作？虽然它不是免费的，但他们提供了一个“精简”版本，可以为您提供很多您需要的东西，尽管我注意到“IsTablet”是他们的高级版本中的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T11:00:51.370

您可以使用 51Degrees 的免费云解决方案来帮助您检测不同的设备类型。使用 IsMobile 和 IsTablet 属性，您可以根据结果进行重定向。您可以从网站获取免费云产品并获得免费云密钥。有关如何使用 API 的信息，您可以在此处查看教程。[https://51degrees.com/Developers/Documentation/APIs/Cloud-API/NET-Cloud](https://51degrees.com/Developers/Documentation/APIs/Cloud-API/NET-Cloud)

例如，您可以请求返回类似于下面显示的设备类型，然后根据响应放入重定向逻辑。

```
@using (var webClient = new System.Net.WebClient())
{
  string json = webClient.DownloadString(String.Format(
  "https://cloud.51degrees.com/api/v1/{0}/match?user-agent=
{1}&values=DeviceType",
  "YOUR KEY HERE",
  HttpUtility.UrlEncode(Request.UserAgent)));

dynamic match = Newtonsoft.Json.Linq.JObject.Parse(json);
  SortedList<string, string[]> values = Newtonsoft.Json.JsonConvert.DeserializeObject<SortedList<string, string[]>>(match.Values.ToString());
  string[] hvValues;

 if (values.TryGetValue("DeviceType", out hvValues))
  {
foreach (string s in hvValues)
{
<h4>
    Device Type:
    @s
</h4>
}
  } 
```

披露：我在 51Degrees 工作。

# c++ - 如何避免在 QMainWindow 中与过多的停靠小部件发生丑陋的重叠？

> ID：11539714
> 
> 赞同：8
> 
> 时间：2012-07-18T10:53:42.027
> 
> 标签：c++, qt, qdockwidget

在我们的应用程序中，我们有可变数量的停靠小部件，因为其中一些是由在运行时加载的插件添加的。并非所有的dockwidgets都必须同时可见。这在很大程度上取决于用户正在做什么以及哪些插件处于活动状态。

但是，如果使用 以编程方式添加了太多的dockwidgets `addDockWidget(...)`，它们就会开始相互重叠（不是在选项卡方面，而是在一个被绘制在不同区域的内容方面，这显然看起来被破坏了）。

![重叠的码头小部件](../Images/f55a1b121d0cbb9f963d44a33c371a91.png)

用户可以将dockwidgets 移动到*仍有空间的dockareas，但布局/主窗口成功地防止（未选项卡）重新添加到“拥挤”的dockarea。*

我们确实允许选项卡式停靠以允许用户安排所需的停靠小部件，但我们不想启用`QMainWindow::ForceTabbedDocks`，因为这会过多地限制同时可见的停靠小部件的数量（每个停靠区域一个）。

我怎样才能防止这种情况或更好地控制如何添加dockwidgets？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T13:12:53.493

不直接回答您的问题，但实际上忘记 Qt 并真正考虑整个交互应该如何工作可能是值得的。用户的期望是什么？如果 10 个不同的插件激活，实际会发生什么？它们应该停靠还是浮动，或者它们应该成为具有初始状态的可固定停靠窗口，作为 MainWindow 边缘上的一个小按钮？我认为，一旦您完成了基础工作并提出了用户界面模型，您就可以开始查看 Qt 并确定 Qt 是否提供了开发该界面的直接方法，如果没有，您需要开发哪些附加组件使该界面正常工作。

根据我自己的经验，我很久以前就在 MFC 中开发了一个类似的界面。我们这样做的方式是，一些停靠的窗户被认为是必须拥有的，它们会像停靠一样出现。然后有一组不需要总是可见但应该快速可用的窗口，它们的初始状态是隐藏的可固定停靠窗口，这意味着它们作为 MainWindow 边缘的按钮出现。最后还有一个用户并不总是需要的第三组，可以从文件->查看菜单中调用。一旦用户使其可见，用户通常会将其分配给前两个组之一或保持浮动。整个配置保存在配置文件中，并且从那里开始，每当插件加载/变为活动时，使用关联停靠窗口的最后使用状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:47:06.693

你试过`setDockOptions(QMainWindow::AllowNestedDocks)`吗？我现在无法测试它，但它可能会有所帮助。默认情况下，`QMainWindow::dockOptions`设置为`AnimatedDocks | AllowTabbedDocks`所以你会想要类似的东西

```
setDockOptions(QMainWindow::AllowNestedDocks | QMainWindow::AnimatedDocks | QMainWindow::AllowTabbedDocks) 
```

编辑：如果你有太多问题，你可能会以错误的方式解决这个问题。您可能想尝试将 QMdiArea 与 QMdiWindow 一起使用，而不是使用扩展坞。这可能不适用于您的程序，但需要考虑一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:25:22.503

这是我尝试过的解决方案：

1.  我在 QTCreator 中创建了一个带有窗口的空项目，一个标有“New Dock”的简约菜单和一个名为`dockWidget`

2.  这是`triggered()`我的菜单项的处理程序：

    ```
     void MainWindow::on_actionNew_Dock_triggered()
     {    
         QDockWidget* w = new QDockWidget("Demo", ui->dockWidget);
         this->addDockWidget(Qt::LeftDockWidgetArea,w);
         this->tabifyDockWidget(ui->dockWidget,w);
     } 
    ```

`tabifyDockWidget(QDockWidget* first, QDockWidget* second)`是一个 QMainWindow 方法，它将第二个 dockwidget 堆叠在第一个上。希望能帮助到你...

# c# - jquery 和 C# web 服务的问题

> ID：11539716
> 
> 赞同：0
> 
> 时间：2012-07-18T10:53:58.890
> 
> 标签：c#, javascript, jquery, web-services

Web 服务的输出，“http://localhost:6833/Service1.asmx/HelloWorld”：

```
<string xmlns="http://tempuri.org/">
[{"Name":"Pini","Age":"30","ID":"111"},{"Name":"Yaniv","Age":"31","ID":"Cohen"},{"Name":"Yoni","Age":"20","ID":"Biton"}]
</string> 
```

HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$.ajax({
        type: "POST", 
        url: "Service1.asmx/HelloWorld", 
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            alert("Result: " + msg);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("Error: " + textStatus);
    }
});
});
</script>
</head>
<body>
</body>
</html> 
```

当我在浏览器中运行 index.html 时，我收到错误警报。尝试了很多东西，但找不到丢失的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:56:17.173

你的 json 封装在一个 xml 字符串中，我想这就是你的问题。

编辑：

查看[这篇](https://stackoverflow.com/questions/211348/how-to-let-an-asmx-file-output-json)文章了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:13:20.090

尝试在您的方法之前添加它。

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

以下

```
 [WebMethod] 
```

# java - javax.persistence.Entitymanager: remove() 方法

> ID：11539720
> 
> 赞同：22
> 
> 时间：2012-07-18T10:54:17.130
> 
> 标签：java, jpa, persistence

**EntityManager的***remove* (Object entity) 方法是否仅适用于从*find* () 方法获得的那些对象？

 ***我有以下代码片段：

```
public void deletePerson() {
    EntityManager em = getEntityManager();
    Person p = new Person("x", "y", 200);
    em.remove(p);
} 
```

但它并没有从数据库中删除特定条目。

当我尝试如下操作时：

```
public void deletePerson() {
    EntityManager em = getEntityManager();
    Person p = em.find(Person.class, 200);
    em.remove(p);
} 
```

它工作正常。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-18T10:59:41.013

引用 ObjectDB 关于[删除 JPA 实体对象](http://www.objectdb.com/java/jpa/persistence/delete)的手册：

> 为了从数据库中删除一个对象，必须首先检索它（无论哪种方式），然后在活动事务中，可以使用 remove 方法将其删除。
> 
> 如果参数不是实体类的实例或者它是分离的实体，则 remove 会引发 IllegalArgumentException。

使用`new`运算符创建对象时，它成为一个分离的实体，如果要删除它，则需要将其持久化。

检索实体时，您正在检索持久实体。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T10:59:04.893

那个方向的东西。[EntityManager.remove](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#remove%28java.lang.Object%29)仅适用于托管实体。您如何获得这些托管实体并不重要，例如：

*   通过 JPQL 查询
*   通过 Criteria API 查询
*   在 EntityManager 中查找方法
*   通过遵循来自其他实体的关系。
*   创建新实体并将其持久化

但是简单地创建新对象并尝试删除它是行不通的，因为这个新对象不是托管实体。实体也不应该被分离。

实体的寿命大致如下，都在同一个事务中（事务之外的实体不受管理）：

```
Entity ent = new Entity(1); //entity is in new state, EntityManager never know
                            //anything about it
em.persist(ent); //entity is managed as long as not disconnected 
                 //from EntityManager
em.clear(); // all previously managed entities, including ent, are now detached

Entity same = em.find(1); //managed same
em.remove(same); // entity is removed 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T11:06:07.190

是的，在合并或删除操作的情况下，您必须使用 find() 操作，然后在检索到的实体上使用 remove 方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-30T14:29:38.227

使用，您可以通过简单地执行语句`JPA`来删除实体而不检索它：`delete`

```
javax.persistence.Query q= entityManager.createQuery("delete from A where id = :id");
q.setParameter("id", "value of id to delete");
int deletedRows = q.executeUpdate(); 
```***

# openssl - 捕获证书域名不匹配的openssl

> ID：11539724
> 
> 赞同：1
> 
> 时间：2012-07-18T10:54:29.273
> 
> 标签：openssl, certificate, x509certificate

如何捕获域名不匹配？

我`SSL_get_peer_certificate(ssl)`用来获取证书，然后`SSL_get_verify_result(ssl);`验证证书。我如何在此处捕获域名不匹配，因为我目前没有捕获它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:56:18.480

`SSL_get_verify_result`不进行主机名不匹配搜索。我们必须手动考虑证书中的多个 CN 和主题备用名称 (SAN)。

可用于处理多个 CN 的函数是：

```
int lastpos = -1;
lastpos=X509_NAME_get_index_by_NID(X509_get_subject_name(cert), NID_commonName, lastpos);
X509_NAME_get_entry(X509_get_subject_name(cert), lastpos); 
```

使用新的 lastpos 再次调用`X509_NAME_get_index_by_NID`将给我们下一个 CN，直到它返回 -1 表示没有更多可用的 CN。

此函数给出 a `X509_NAME_ENTRY *`，可以转换为`char *`using `ASN1_STRING_to_UTF8`。

请务必考虑 SAN 和 CN 中的通配符

# batch-file - 如何使用批处理文件获取最新文件？

> ID：11539726
> 
> 赞同：21
> 
> 时间：2012-07-18T10:54:32.557
> 
> 标签：batch-file, forfiles

我有一个带有日期和时间的 zip 文件列表，如`yyyymmdd_hhmmss_Demos.zip`. 现在如何在源目录中获取最近添加的 zip 文件。我需要使用`copy`命令将此文件复制到目标中。

我找到了一些关于 的信息`forfiles`，但不知道如何在几秒钟内完成它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-18T10:57:56.190

您可以使用

```
pushd D:\a
for /f "tokens=*" %%a in ('dir /b /od') do set newest=%%a
copy "%newest%" D:\b
popd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-28T09:24:47.197

```
set Path="D:\hello\abc\old"
for /f "tokens=*" %%a in ('dir /A:-D /B /O:-D /S %Path%') do set NEW=%%a&& goto:n 
:n
echo %NEW% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T19:22:27.810

```
pushd \\ryap\CONTROL_DATOS
for /f "tokens=*" %%a in ('dir \\ryap\CONTROL_DATOS /b /od') do set newest=%%a
Xcopy/Y "\\ryap\CONTROL_DATOS\%newest%" "D:\TXT_SOURCES\"
popd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-04T09:43:39.400

下面的代码段将提取日期并根据您的需要进行自定义

```
for /f "tokens=1-4 delims=/ " %%i in ("%date%") do (
     set dow=%%i
     set month=%%j
     set day=%%k
     set year=%%l
)
:: Pad digits with leading zeros e.g Sample_01-01-21.csv
    set yy=%year:~-2%
    set datestr=%day%-%month%-%yy% 
```

替代方式：

```
set datestr=%date:~0,2%-%date:~3,2%-%date:~6,2% 
```

# apache - Apache 将子域传递到备用路径

> ID：11539729
> 
> 赞同：0
> 
> 时间：2012-07-18T10:54:59.183
> 
> 标签：apache, tomcat, configuration

我是 Apache 新手，正在尝试映射

> www.subdomain.mycompany.com:8083

至

> www.mycompany.com:8083/subdomain

但是子域可以是任何未预先确定的。

我们正在使用运行**Apache 2.2.15**。目前文件中有proxypasses设置`.conf`。

我必须将其传递给proxypass：

> ProxyPass /myapplication [https://serv123.internal:5000/myapplication/subdomain](https://serv123.internal:5000/myapplication/subdomain)
> 
> ProxyPassReverse /myapplication [https://serv123.internal:5000/myapplication/subdomain](https://serv123.internal:5000/myapplication/subdomain)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:24:45.087

您可以使用 Apache 模块**mod_vhost_alias**

```
<VirtualHost *:80>
     ServerAlias *.example.com
     VirtualDocumentRoot /var/www/%-3/
     VirtualScriptAlias /var/www/%-3/
</VirtualHost> 
```

URL *http:// **subdomain** .example.com*的访问将映射到 /var/www/ **subdomain** / -3 指的是 URL 的第三部分，因为 -2 指的是**example**。

ServerAlias 指令可防止在访问[http://example.com/](http://example.com/)时出错。如果没有该指令，此访问将尝试重定向到**/var/www/_/**。

# jquery - 将 javascript 和 CSS 注入 iframe

> ID：11539730
> 
> 赞同：2
> 
> 时间：2012-07-18T10:55:02.970
> 
> 标签：jquery, html, jquery-mobile, cordova, asp.net-mvc-4

我正在使用 ASP.NET MVC 4 开发一个基于 Web 的 JQuery Mobile 应用程序，我想通过 PhoneGap 将其作为智能手机应用程序提供。

但是，JQuery Mobile 和其他插件很重，我不应该每次用户加载页面时都下载它们。

我想在本地加载 CSS 样式、JQuery Mobile 和其他库。

我的想法是：在应用程序`iframe`的本地`html`文件中放置一个，加载没有脚本和样式的远程网页，然后将 CSS 样式和 Javascript 库注入其中`iframe`。

你怎么看？你有更好的主意吗？如果属实，你的想法是什么？如果为假，如何将 JQuery、JQuery mobile 和其他插件注入其中`iframe`？

# php - 如何通过 FB 应用程序在 FB 页面上发帖

> ID：11539737
> 
> 赞同：0
> 
> 时间：2012-07-18T10:55:29.747
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

这很好用：

```
$user = $this->facebook->getUser();
$loginUrl = $this->facebook->getLoginUrl(array('scope' => 'publish_stream')); 
try {
    $post = $this->facebook->api('/me/feed', 'post', array('message'=>'Test message !'));   
} catch (FacebookApiException $e) {
    header("Location:{$loginUrl}");
} 
```

在这种情况下，通过应用程序在我的墙上发布帖子。

但是，我想通过应用程序在应用程序页面上发布帖子。当我改变

```
$this->facebook->api('/me/feed') 
```

至

```
$this->facebook->api('/xxxxxxxxxxxxxxx/feed') 
```

, 帖子是我在应用程序上发布的。

那么，如何通过应用程序在应用程序页面本身上发布帖子，即在可以从应用程序创建的 FB 页面上。

因此，我可以通过“application_name”将发布的帖子视为“测试消息”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:25:55.643

您可以阅读[Authenticating as a Page的文档](https://developers.facebook.com/docs/authentication/pages/)

> 1.  验证用户并请求 manage_pages 权限
>     
>     
> 2.  获取用户管理的页面列表 (https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN)
>     
>     
>     
>     > 响应将是用户管理的一系列页面和应用程序 [...] 在每个块内将是一个页面访问令牌或应用程序访问令牌，可用于向 Graph API 发出请求。

# php - 如何将值传递给重定向的动态 php 页面

> ID：11539740
> 
> 赞同：1
> 
> 时间：2012-07-18T10:55:39.727
> 
> 标签：php, javascript, .htaccess

如何使用 post 方法将值传递到 .htaccess 文件中的重定向动态页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:01:57.563

如果您想要下一页中的数据，您也可以使用**会话**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:00:24.317

您不能在 htaccess 重定向中使用 POST。

也许这个问题会对您有所帮助：[PHP Redirect with POST data](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:58:45.767

重定向总是`GET`对此无能为力。您是否有任何理由要对`POST`重定向页面进行赋值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:13:27.750

您可以使用隐藏字段发送表单值。

```
 $action = 'http://abac.com/abc.php';
    $form = '<form id="frm" name="frm" action="'.$action.'" method="post">';
    $form .= '<input type="hidden" id="title" name="title" value="'.$_POST['title'].'">';
    $form .= '<script>document.frm.submit();</script>';
    $form .= '</form>';
    echo $form;
    exit; 
```

希望它会起作用

谢谢

# vba - Windows XP Excel VBA 在 Windows 7 上崩溃

> ID：11539744
> 
> 赞同：0
> 
> 时间：2012-07-18T10:55:53.360
> 
> 标签：vba, windows-7, excel-2007, windows-xp, msinet

我正在尝试将 Excel VBA 宏从 Windows XP 切换到 Windows 7。这两个 Windows 版本都是 32 位操作系统。我的 Windows 7 版本是企业版。

VBA 代码在 Windows XP 上运行良好。当我尝试在 Windows 7 上运行代码时，它崩溃并且没有报告错误描述。

我已注册`msinet.ocx`，这似乎是 Microsoft Internet Transfer Control 6.0 所必需的。我还尝试通过添加额外的 com 组件来解决安全问题，`tabctl32`所有这些都是 ocx 文件。但是，没有任何变化 - 我的代码在 Windows 7 上仍然失败。`comctl332/232/32``comdlg32`

取消注册后，Excel VBA 会打开`msinet`我的工作簿，报告缺少的参考`msinet`并且根本不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:37:33.110

尴尬的。在将宏安全设置为高或中的 Excel 会话中打开工作表，然后对有关在工作表中启用 VBA 宏的对话框回复“否”。

如果它打开，您应该仍然可以查看该项目，如果您尝试编译它，这可能会显示明显的缺失引用或错误。

下一步：将工作簿另存为 html 并关闭 Excel。清除临时文件夹，重新启动 excel，打开 html 文件并将其保存回 Excel 格式。如果幸运的话，所有遗留对象和引用都将被清除并替换为与您的新操作系统兼容的版本。

这大约有一半的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T14:19:32.870

检查您是否没有对丢失库的引用，如果有，只需取消选中它。我有一个类似的问题，它在我的情况下有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:34:11.883

未注册 msinet.ocx 时系统未崩溃并不一定意味着它是问题所在。

如果您在模块*内部*或*从模块调用*的任何过程中调用了该库 (msinet.ocx)，`ThisWorkbook`并且您未注册该库，则当文件打开并尝试运行 On open 宏时，模块将不会编译，因此不会运行使其崩溃的代码行。（我只是猜测这可能是你的情况。）

尝试找出导致系统崩溃的确切调用。

1.  让 msinet.ocx 注册。
2.  打开文件而不激活宏。
3.  然后通过文件的打开代码 ( ) 手动运行 Step by Step (F8 `Private Sub Workbook_Open()`)

最终，您将到达导致系统崩溃的确切代码行。有了这些信息，您将能够获得更多帮助。

笔记：

要在不激活宏的情况下打开文件，您可以使用以下方法之一：

*   双击文件后按住 Shift 键将其打开（从 Windows 资源管理器中）。要使此方法起作用，必须关闭 Excel 应用程序。

*   如果 Excel 应用程序已打开，则转到 VB 编辑器并`application.EnableEvents=False`在即时窗口中键入（然后按 Enter 键运行它）。请注意，这将禁用该 Excel 实例中每个文件的事件。您必须将其设置回 true 或关闭应用程序（不仅仅是文件）。

# r - 具有不同图标的 R 图例

> ID：11539749
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:56:15.097
> 
> 标签：r, icons, legend

对于我的图表，我使用 smartlegend。我有一个由线条和箱线图组成的情节。有没有办法在 smartlegend 中使用不同的图标，即我想为箱线图使用“正常”颜色填充框，为其他数据使用一些简单的水平线。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:24:28.833

为什么不使用标准`legend`功能？下面将生成一个带有 2 行和 2 个符号的图例

```
legend ("top",
         col=c(1:4),
         lty=c(1,1,0,0),
         pch=c(0,0,1,2),
         legend=c("1","2","3","4")
       ) 
```

# javascript - phonegap for iOS (iPad 2, iPad3) - 后台工作者和持续刷新

> ID：11539751
> 
> 赞同：0
> 
> 时间：2012-07-18T10:56:16.673
> 
> 标签：javascript, ipad, html, cordova, ipad-2

我正在为 Ipad（2 和 3）开发一个应用程序。该应用程序需要与远程 Web 应用程序持续同步。重点是，只要有连接，我的应用程序需要保持“监听”，以便接收更新（大量数据）、警报等。

**PS**：在继续之前，我想强调我的应用程序不是针对应用程序商店的，而且它不能依赖推送通知。

我对ipad上的多任务处理感到困惑。我希望我的应用程序的本地数据库通过与远程 Web 应用程序通信来保持同步。因此我的问题是：

*   是否有任何 ipad 具有真正的多任务处理功能？（就像你可以拥有“服务”的安卓系统）这意味着我的应用程序或至少它的一小部分仍然可以运行，即使它在屏幕上未处于活动状态。

*   如何使用 phonegap 标准框架实现这一目标？

*   如果以上几点表明在某种程度上这是不可能的。是否仍有可能使用插件扩展 phonegap 并实现这一点？

*   如果以上三点不幸完全否定；您将如何通过记住同步涉及大量数据并且必须涵盖应用程序的可用性来解决该问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:32:02.647

> 是否有任何 ipad 具有真正的多任务处理功能？（就像你可以拥有“服务”的安卓系统）这意味着我的应用程序或至少它的一小部分仍然可以运行，即使它在屏幕上未处于活动状态。

IOS 只有有限的后台服务 - 你的应用程序在不活动时进入后台状态。真的只限于接收推送通知。由于 Phonegap 使用 webview 和 javascript，仅当应用程序在前台处于活动状态时才处于活动状态。

> 如何使用 phonegap 标准框架实现这一目标？

如果您想保持数据连接打开，您可能需要为平板电脑而不是 IOS 设备开发应用程序。

> 如果以上几点表明在某种程度上这是不可能的。是否仍有可能使用插件扩展 phonegap 并实现这一点？

不。

> 如果以上三点不幸完全否定；您将如何通过记住同步涉及大量数据并且必须涵盖应用程序的可用性来解决该问题？

您唯一的选择（如果您只能使用 phonegap）是让应用程序始终处于活动状态，并使用 Jquery 和 XML/JSON 数据设置持续同步。当然，这取决于您要显示的数据类型。对于显示数据页面 - 类似于网页，您不会有任何问题 - 只要您了解一旦更改应用程序数据将不会同步。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T01:27:19.460

> 我希望我的应用程序的本地数据库通过与远程 Web 应用程序通信来保持同步。

如果我是你，我会质疑为什么我需要这样做？为什么不让应用程序在线运行？您可以在本地拥有所有资产，只需设置某种 API 来检索您需要按需显示的任何数据。

否则，您需要破解自己的方式来做所有您想做的事情，此外您还需要离线/在线同步。由于您拥有*大部分*离线可用数据，我假设该应用程序也可以离线使用？而且您将在离线/在线同步上度过一段非常糟糕的时光......

# c# - 将计时器间隔转换为浮点数

> ID：11539753
> 
> 赞同：-1
> 
> 时间：2012-07-18T10:56:16.520
> 
> 标签：c#, winforms, timer

是否可以使**计时器间隔**在 c#中**浮动**。

如果是，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:59:50.037

定时器间隔是双倍的

类型：System.Double Elapsed 事件之间的时间（以毫秒为单位）。该值必须大于零，并且小于或等于 Int32.MaxValue。默认值为 100 毫秒。

[http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)

# jquery - 如何过滤ajax响应

> ID：11539754
> 
> 赞同：0
> 
> 时间：2012-07-18T10:56:19.217
> 
> 标签：jquery, ajax

我正在调用两个 ajax 函数并且 url 是相同的 ajax.php 并且两个函数同时被触发现在问题是如何显示对正确字段的响应

我在做什么

调用函数 1 和 2

例如。在一个我得到史蒂夫，乔布斯和两个拉胡尔，pankaj

我想在不同的领域展示 steve、jobes 和 rahul、pankaj，但是

我得到的是两个字段中显示的四个名称现在我需要过滤这些名称怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:00:00.137

将回调与 ajax 调用一起传递，该调用将识别正确的填充位置。

例如：对于第一个请求，您将发送回调 `cb1('field1', ajaxresponse);`

对于第二个请求，您将发送回调 `cb2('field2', ajaxresponse);`

然后您可以根据需要使用响应来填充正确的字段

在jQuery中

```
function cb1(field, response){
// do your stuff here like innerHTML or value
 $('#'+field).html(response);
 $('#'+field).val(response);
}

function cb2(field, response){
// do your stuff here like innerHTML or value or anything as per your logic depending on response
 $('#'+field).html(response);
 $('#'+field).val(response);
} 
```

在javascript中

```
function cb1(field, response){
  document.getElementById(field).innerHTML = response;
}

function cb2(field, response){
  document.getElementById(field).innerHTML = response;
} 
```

or if the function does the same job then pass the parameter or the initial request param to the function so that it wud populate the correct place

# .net - WinRT/UWP 帧和页面缓存：如何在 Navigate() 上创建新页面实例并将页面实例保留在 GoBack() 上

> ID：11539755
> 
> 赞同：47
> 
> 时间：2012-07-18T10:56:23.493
> 
> 标签：.net, xaml, windows-8, windows-runtime, win-universal-app

我正在尝试使用 C# 创建一个 UWP（通用 Windows 应用程序）应用程序。我的问题是`Frame`控件：如果我在没有 的情况下使用它`NavigationCacheMode = Required`，则每次用户返回时，页面都不会保存在内存中，而是会重新创建。如果我设置`NavigationCacheMode`为`Required`or `Enabled`，返回可以正常工作（没有新的页面对象）**，但是**如果我从相同类型导航到另一个页面，则前一个页面对象将被回收和重用（没有新的页面实例）。

**期望的行为：**

有没有办法使原始控件具有以下行为`Frame`（例如在 Windows Phone 中）：

1.  创建新的页面实例`Navigate()`
2.  保持页面实例开启`GoBack()`

我知道的唯一解决方案是创建一个自己的`Frame`控件，但这会导致其他问题（例如：缺少`SetNavigationState()`方法等......）

**示例场景：**

具有三个页面的简单应用示例：`TvShowListPage`、`TvShowDetailsPage`、`SeasonDetailsPage`。

1.  `TvShowListPage`是入口页面。单击`TvShow`导航到后`TvShowDetailsPage`。
2.  现在在`TvShowDetailsPage`列表中选择一个季节并导航到`TvShowDetailsPage`.
3.  如果向后导航，页面应保留在内存中以避免重新加载页面。
4.  但是，如果用户返回`TvShowListPage`并选择另一个`TvShow`，`TvShowDetailsPage`则会被回收并且可能处于错误状态（例如，显示演员枢轴而不是第一个，季节枢轴）

我正在寻找默认的 Windows Phone 7 行为：导航在页面堆栈上创建一个新页面，返回从堆栈中删除顶部页面并显示堆栈中的前一页（存储在内存中）。

**解决方案：**

因为没有解决这个问题，我不得不重新实现所有与分页相关的类：Page、Frame、SuspensionManager 等...

提供所有这些类的**库 MyToolkit**可以在这里下载：[https ://github.com/MyToolkit/MyToolkit/wiki/Paging-Overview](https://github.com/MyToolkit/MyToolkit/wiki/Paging-Overview)

**参考：**

*   [http://www.jayway.com/2012/05/25/clearing-the-windows-8-page-cache/](http://www.jayway.com/2012/05/25/clearing-the-windows-8-page-cache/)：没有好的解决方案
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88e6d1b3-1fa6-4ab4-a816-e77c86ef236f/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88e6d1b3-1fa6-4ab4-a816-e77c86ef236f/)：实现自己的 Frame 类不是解决方案，因为它不适用于`SuspensionManager`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T15:46:59.997

因为没有解决这个问题，我不得不重新实现所有与分页相关的类：Page、Frame、SuspensionManager 等...

该解决方案可以在这里下载： [https ://github.com/MyToolkit/MyToolkit/wiki/Paging-Overview](https://github.com/MyToolkit/MyToolkit/wiki/Paging-Overview)

**更新：**

页面类现在还提供**OnNavigatingFromAsync**方法来显示例如异步弹出窗口并在需要时取消导航......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T16:54:40.303

我有很多同样的问题。我希望这样当我在 Metro（正确的是 Windows 商店）中前进时，它会创建一个新实例。但是，当返回时，它会保留我想要保存的数据。

所以，我同样使用了 NavigationCacheMode = NavigationCacheMode.Enabled。我发现，无论我走哪条路，前进或后退，一切都被保存了下来。所以，我会前进几页，然后退后几页。希望在我前进的过程中一切都被重置，我总是发现它不是。它保留了数据。

我尝试了一切，包括编写自己的后退按钮代码以包含 NavigationCacheMode = NavigationCacheMode.Disabled，但无济于事。正如其他人指出的那样，一旦启用它， NavigationCacheMode 就不会禁用。

我确实找到了解决方案。我去了 LayoutAwarePage.cs 并简单地做了一个小改动。在“OnNavigatedTo”下，我找到了这一行：

```
// Returning to a cached page through navigation shouldn't trigger state loading
if (this._pageKey != null) return; 
```

但是，评论与我想要的相反。我正在寻找单向模式的状态加载。如果继续前进，我想要状态加载；如果向后移动，我想要评论指示的行为 - 没有状态加载。

所以我只是修改了这条线。

```
// Returning to a cached page through navigation shouldn't trigger state loading
if (this._pageKey != null && e.NavigationMode == NavigationMode.Back) return; 
```

我已经对其进行了测试，并且效果很好。现在，当向后导航时，它会记住状态并保持页面不变。向前导航，它加载新鲜。

也许不是最佳实践，但我不会从我的代码隐藏中调用“OnNavigatedTo”。我通过“LoadState”做所有事情。如果您在代码隐藏中覆盖“OnNavigatedTo”，您可能会看到不同的行为。

谢谢，

约瑟夫·欧文

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-18T21:04:13.243

*向前*导航时，可以在调用**Frame.Navigate**之前将**NavigationCacheMode**设置为**Disabled**吗？然后，在**OnNavigatedTo()**中再次将**NavigationCacheMode**设置回**Enabled**。

 ******这应该使得当您向前导航时，缓存被禁用。但是当您到达新页面实例时，**OnNavigatedTo**将再次启用它。当您想向后导航时，您不会在调用**Frame.GoBack之前触摸****NavigationCacheMode**。我认为这应该给你缓存的实例。

 **我相信这会起作用，但我还没有测试过。我很想知道是否确实如此。有趣的场景。我很想看到该应用程序在运行，并更好地了解这种行为的使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T11:13:29.530

您使用 NavigationCacheMode 属性来指定是否为每次访问页面创建一个新的页面实例，或者是否为每次访问使用保存在缓存中的先前构造的页面实例。

NavigationCacheMode 属性的默认值为已禁用。当页面的新实例对于每次访问都不是必需的时，将 NavigationCacheMode 属性设置为 Enabled 或 Required。通过使用页面的缓存实例，您可以提高应用程序的性能并减少服务器上的负载。

将 NavigationCacheMode 设置为 Required 意味着无论 CacheSize 属性中指定的缓存页数如何，都会缓存该页。标记为必需的页面不计入 CacheSize 总数。将 NavigationCacheMode 设置为 Enabled 意味着页面被缓存，但如果缓存页面的数量超过 CacheSize 的值，则可以处理。

如果必须为每次访问创建一个新实例，请将 NavigationCacheMode 属性设置为 Disabled。例如，您不应缓存显示每个客户独有信息的页面。

每次请求都会调用 OnNavigatedTo 方法，即使从缓存中检索页面也是如此。您应该在此方法中包含必须为每个请求执行的代码，而不是将该代码放在 Page 构造函数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-19T23:24:50.943

我必须`page2`从我的类派生一个类`page`，然后当我想导航到同一页面的第二个版本时，我检测`this`对象是`page`还是`page2`. 然后我导航到`page2`if I was in`page`并导航到`page`if in `page2`。

唯一的缺点是一个巨大的缺点，即无法从另一个 XAML 文件派生一个 XAML 文件。因此，所有 C# 代码都在`page`类代码隐藏中，如预期的那样，但是有两个几乎相同的 XAML 文件，一个用于页面的每个版本。

可以添加一个小脚本作为预构建步骤，从第一个页面类生成第二个页面类，复制 XAML 数据并调整类名。

它很丑，但几乎可以完美运行，我永远不必担心 C# 代码重复或奇怪的导航缓存问题。我最终得到了重复的 XMAL 代码，在我的情况下，它真的永远不会改变。`new`我还收到了两个关于在自动生成的代码中不使用关键字的警告`page2.InitializeComponent()`和`page2.Connect()`。

有趣的是，导航到`page`then 到`page2`then`page`不会导致问题，并且`page`该类的第二个实例是与第一个无关的实际第二个实例。

请注意，MS 可能建议不要使用此解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T19:42:59.387

我通过以下方式实现了这一目标：

*   将所需页面的 NavigationCacheMode 设置为必需/启用。
*   单击 Page2 按钮/链接时：

    遍历 Frame BackStack 并找出 Page2 是否在 BackStack 中。如果找到 Page2，则调用 Frame.GoBack() 所需的次数。如果没有找到，只需导航到新页面。这将适用于任何页面。

代码示例：

```
public void Page2Clicked(object sender, RoutedEventArgs e)
{
int isPresent = 0;
int frameCount = 0;
//traverse BackStack in reverse order as the last element is latest page
for(int index= Frame.BackStack.Count-1; index>=0;index--)
{
    frameCount += 1;
    //lets say the first page name is page1 which is cached
    if ("Page2".Equals(Frame.BackStack[index].SourcePageType.Name))
    {
        isPresent = 1;
        //Go back required no of times
        while (frameCount >0)
        {
            Frame.GoBack();
            frameCount -= 1;
        }
        break;
    }

}
    if (isPresent == 0)
    {
    Frame.Content = null;
    Frame.Navigate(typeof(Page2));
    }
} 
```

如果没有太多使用前进/后退按钮，这将很有帮助。因为此解决方案将影响向前/向后导航。如果您还希望使用前进/后退导航，则必须处理一些额外的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-27T11:08:59.833

**启用NavigationCacheMode**后，您可以在 OnNavigatedFrom() 中（有条件地）调用Dispose **()**以**确保**在应用程序下次导航到该页面时创建一个新的页面实例。********

# mysql - Cloudfoundry，Spring，MySQL 从服务器收到的未知初始字符集索引“192”

> ID：11539757
> 
> 赞同：1
> 
> 时间：2012-07-18T10:56:28.513
> 
> 标签：mysql, spring, cloud-foundry

当我尝试在使用 MySQL 的 cloudfoundry 上运行我的页面时，我收到了这个错误

```
 org.springframework.jdbc.CannotGetJdbcConnectionException: 
Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: 
Cannot create PoolableConnectionFactory (Unknown initial character set index '192' received from server. 
Initial client character set can be forced via the 'characterEncoding' property.) 
```

我错过了什么 ？我确实尝试在下面将我的 UTF-8 更改为 LATIN，但仍然收到错误

```
ALTER TABLE t MODIFY col1 VARCHAR(50) CHARACTER SET latin1; 
```

感谢所有的答复

我明白

```
+----------------------+-----------------+
| Variable_name        | Value           |
+----------------------+-----------------+
| collation_connection | utf8_unicode_ci |
| collation_database   | utf8_unicode_ci |
| collation_server     | utf8_unicode_ci |
+----------------------+-----------------+ 
```

来自 cloudfoundry 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:13:42.597

我正在使用**mysql-connector-java-3.1.7-bin.jar**，并且在更改为**mysql-connector-java-5.1.21-bin.jar**之后效果很好。时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:51:45.573

在 /etc/mysql 中检查您的配置，如下所示。评论他们，然后再试一次。您必须重新启动 mysql 服务（/bin/vcap restart）。

collat​​ion_server = utf8_unicode_ci

character_set_server = utf8

# c - 该程序可能的输入是什么？

> ID：11539763
> 
> 赞同：2
> 
> 时间：2012-07-18T10:57:02.337
> 
> 标签：c

我希望您能帮助了解用户对以下可以产生输出的程序的输入：`U%ae'$ffq' ong string`

```
int main(void) {
    int i=0;
    char j[22]="This is a long string", k[3];

    scanf("%2s ", k);
    sprintf(j, k);
    printf("%s", j);
    for (; i< 21; printf("%c", j[i++]))
        ;
    return 1;

} 
```

我不明白几件事：

k 只能从用户那里得到两个字符——这是什么`"%2s"`意思，不是吗？然后将数组 k 指向的内容写入 j 指向的数组中，因此`j`不指向 k，但如果我们`j[5]`仍然会得到`i`. 所以我不明白我们怎么能得到这个输入，因为输入将被切成两个字符`j[0], j[1]`，这两个字符是输入中的两个字符，其余的`j[i]`将是“这是一个长字符串”的原始其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:07:18.910

我只是在这里猜测，但问题可能出在循环上。您不检查字符串终止符，而是打印所有数组，无论字符串是否结束。

如果将循环更改为：

```
for (; i < 22 && j[i] != '\0'; printf("%c", j[i++])) ; 
```

你应该得到预期的输出。

（注意：我也改成`21`哪个`22`是数组的大小，当然你也可以这样做`i <= 21`。）

**编辑：**在 hmjd 发表评论后重新阅读问题。

如果读取的输入`scanf`包含百分比 ( `'%'`) 字符，则之后的调用`sprintf`将尝试将其解析为格式化代码。如果我用输入测试这个程序`%d123`，那么`k`将`"%d"`如预期的那样，但结果数组`j`将是`"192795408\0long string"`.

# ruby-on-rails-3 - rails 实例变量在模板中不起作用

> ID：11539771
> 
> 赞同：0
> 
> 时间：2012-07-18T10:57:36.423
> 
> 标签：ruby-on-rails-3

无法理解为什么相同的命令`Category.find(:all , :order => 'name ASC')` 在 rails 控制台中有效，但在模板和控制器中没有返回任何内容，请帮助

`_form.html.erb`

```
<% @all_categories.each do |cat| -%>
  <li><%= check_box_tag('categories[]' , cat.id , @post.categories.collect{|c| c.id}.include?(cat.id))%>
  <%= cat.name %></li>
<% end -%> 
```

`posts_controller.rb`

```
@all_categories = Category.find(:all , :order => 'name ASC') 
```

### 导轨控制台

```
@all_categories = Category.find(:all , :order => 'name ASC')
  Category Load (0.2ms)  SELECT `categories`.* FROM `categories` ORDER BY name ASC
 => [#<Category id: 1, name: "General", short_name: "general", description: "This is a general category">] 
```

### 错误

```
undefined method `each' for nil:NilClass 
```

# post_controller

```
 def edit
    @user_list = get_user_list
    @post = Post.find(params[:id])
  end
  def update
    post_params = params[:post]
    author_id  = post_params.delete(:author_id)
    #@all_categories = get_all_categories
    @all_categories = Category.find(:all , :order => 'name ASC')  
    checked_categories = get_categories_from(params[:categories])
    removed_categories = @all_categories - checked_categories
    @post = Post.find(params[:id])
    @post.author = User.find(author_id) if @post.author_id != author_id 
    if @post.update_attributes(post_params)
      perform_operation_on_categories
      flash[:notice] = "Post was successfully updated."
      redirect_to :action => 'show' , :id => @post
    else
      @user_list = get_user_list
      render :action => 'edit'
    end

  end 
```

# 索引视图

```
<h1><% @page_title = 'Listing posts' %></h1>
<%= content_tag('p',link_to('&laquo Back', :controller => 'staff',:action =>'menu')) %>
<table>

    <tr>
        <th>Created at</th>
        <th>Title</th>
        <th>Author</th>
        <th>Categories</th>
        <th>Status</th>
        <th>Comments</th>
    </tr>

<% @posts.each do |post|    %>
<tr class="<%= cycle('row1','row2') %>">
    <td><%= post.created_at.strftime('%m/%d/%y %I:%m %p')%></td>
    <td><%= h(post.title)%></td>
    <td><%= h(post.author.display_name) if post.author%></td>
    <td><%= post.categories.collect {|cat| cat.name}.join(", ")%></td>
    <td><%= h(post.status)%></td>
    <td><%= post.comments_count %></td>
    <td><%= link_to('Preview',{:action =>'show',:id=>post,:target => '_blank'})%></td>

    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Delete', post, :method => :delete, :data => { :confirm => 'Are you sure you want to permanently remove this post?' } %></td>
</tr>
<% end %>
</table>

<%= will_paginate(@posts) %>
<br/>
<%= link_to 'New Post' , :action=> 'new' %> 
```

# _form.html.erb （我得到错误的部分）

```
<table>
    <tr>
        <th>Title</th>
        <td><%= text_field(:post,:title,:size => 40 , :style => "font-size: 1.5em;")%></td>
        <td rowspan="2">
            <div class="categorylist">
                <h2>Categories:</h2>
                <ul>

                        <% @all_categories.each do |cat| -%>
                            <li><%= check_box_tag('categories[]' , cat.id , @post.categories.collect{|c| c.id}.include?(cat.id))%>
                            <%= cat.name %></li>
                        <% end -%>

                </ul> 
```

# 编辑.html.erb

```
<% @page_title = 'Edit Post' -%>

<%= content_tag('p',link_to('&laquo; Back', :action => 'index'))%>

<%= form_tag(:action => 'update') do -%>
    <%= render(:partial => 'form')%>
    <%= submit_tag('Create', :style => 'margin: 1.5em 0 0 100px;')%>

<% end %>

<%= link_to('Preview Post' , {:action=>'show',:id => @post} ,:target => '_blank')%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:19:29.723

只是从你发布的代码中猜测，但在我看来你应该把

`@all_categories = Category.find(:all , :order => 'name ASC')`

在`edit`将被调用以显示您的视图的方法中，而不仅仅是在`update`将被调用以保留您的更改的方法中。

这同样最终适用于`new`,`index`和`show`方法

高温高压

# c# - Asp.net WCF 和集成的 Windows 身份验证和 IIS 6.0

> ID：11539777
> 
> 赞同：0
> 
> 时间：2012-07-18T10:58:13.753
> 
> 标签：c#, asp.net, .net, wcf

我一直在努力解决这个问题，阅读了很多问题，文章但无法解决。所以我在这里。

Webservice 在网站内，我从控制台应用程序 [测试] 访问它。这是我的 Web.Config 代码

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Services.CilsDataReceiveBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="WindowsAuth">
          <security mode="TransportCredentialOnly" >
            <transport clientCredentialType="Windows"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Services.CilsDataReceiveBehavior" name="Services.CilsDataReceive">
        <endpoint address="" binding="basicHttpBinding" name="BasicHttpEndpoint" bindingConfiguration="WindowsAuth" contract="Services.ICilsDataReceive" />
        <endpoint address="mex" binding="webHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
      </system.serviceModel> 
```

**下面是我在控制台**应用程序中使用的代码和 app.config 。

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ICilsDataReceive" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://wgb01wa7002.worldwide.co.uk:44001/Services/CilsDataReceive.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICilsDataReceive"
                contract="ICilsDataReceive" name="BasicHttpBinding_ICilsDataReceive" />
        </client>
    </system.serviceModel> 
```

下面是cs代码

```
icDateList.titlesField = titles.ToArray();
            var cilsDataReceiveClient = new CilsDataReceiveClient();
            try
            {
                cilsDataReceiveClient.RecieveICDateList(icDateList);
                Console.WriteLine(" O_O   Service saved the data   O_O");
            }
            catch (Exception exception)
            {
                cilsDataReceiveClient.Abort();
                Console.WriteLine(exception.Message);
                throw;
            }

            finally
            {
                Console.Read();

            } 
```

错误消息是“HTTP 请求未经授权，客户端身份验证方案‘匿名’。从服务器收到的身份验证标头是‘协商，NTLM’。”

如果将我的控制台应用程序 app.config 更改为

```
<security mode="TransportCredentialOnly">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security> 
```

我收到以下错误“'http://wgb01wa7002.worldwide.co.uk:44001/Services/CilsDataReceive.svc' 无法激活。有关更多信息，请参阅服务器的诊断跟踪日志。”

我尝试了很多尝试 WsHttpBinding 但我认为使用 Https 而不是 http。

你能建议点什么吗？

编辑：如果我从浏览器访问它，我会得到“此服务的安全设置需要'匿名'身份验证，但托管此服务的 IIS 应用程序未启用它。”

编辑 2：我尝试使用 netTCPBinding 并更改错误“提供的 URI 方案 'http' 无效；预期为 'https'。看来我不应该使用它。参数名称：通过”

编辑 3：我尝试使用 wsHttpBinding，但仍然出现错误。它就像永无止境的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:22:21.933

首先，您的桌面环境是否设置为测试 ssl？如果没有，请添加它。

其次，您可能缺少 WsHttpsBinding

# javascript - iframe - 设置内容类型标头

> ID：11539779
> 
> 赞同：1
> 
> 时间：2012-07-18T10:58:17.830
> 
> 标签：javascript, html, internet-explorer-7, base64

我想使用 iframe 动态显示 JPEG 图像，但它的标题应该是`"Content-type: image/jpeg"`.

这可能吗？

这将是在 IE7 中显示 base64 图像的一种解决方法：

1）获取base 64码

2）使用js解码

3) 生成 iframe 图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:20:13.417

也许我没有得到你真正需要的东西（尤其是使用 js 部分解码）但你可以尝试这样的[事情](http://jsfiddle.net/AFefT/2/)

```
 var data64 = "your encoded staf..."
    document.getElementById("divContent").innerHTML = "<iframe name='innerFrame' src='"+data64 +"'></iframe>"; 
```

显然上面的代码不适用于 IE。您可以改用下面的块。

```
 var data64 = "your encoded staf..."
    document.getElementById("divContent").innerHTML = "<iframe name='innerFrame'></iframe>";
    var objDoc = window.frames[ "innerFrame" ].document;
    objDoc.write("<img src='"+data64 +"' />"); 
```

您还可以将图像添加到 iframe 文档。但我只会使用将 img 标签添加到原始页面（iframe 的父页面。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T11:02:28.693

您希望从返回 iframe 源的服务器返回内容类型。

换句话说，如果您的 iframe 看起来像：`<iframe src="http://www.foobar.com/test.php>`，则`test.php`应该将内容类型设置为`image/jpeg`

# java - Primefaces 动态树

> ID：11539780
> 
> 赞同：2
> 
> 时间：2012-07-18T10:58:25.033
> 
> 标签：java, jsf, primefaces

我正在开发一个 Tree 组件，它可能会根据用户输入进行修剪。我缓存了所有节点，以便为 primefaces 组件模型提供始终相同的树节点实例。

但问题是，当我更改父子关系（删除其中一些）时，我总是会得到一个并发修改异常......有没有办法解决这个问题或者我错过了什么。

提前致谢。

```
/**
 * Recursively copy the hierarchy and prune not visible branches
 * @param originalNode node of the original hierarchy to be copied
 * @param parent parent node in the new hierarchy
 * @param visibleNodes set of nodes, which should be included in the new hierarchy
 * @param model model of the TreeAutompleteComponent
 * @return copy of the oroginal node in the new hierarchy
 */
private TreeNode copyHierarchy(TreeNode originalNode, TreeNode parent, Set<TreeNode> visibleNodes, TreeAutocompleteModel model) {
    if (!visibleNodes.contains(originalNode)) {
        return null;
    }

    TreeNode newNode = model.getCompleteModelNodes().get(((NodeWrapper)originalNode.getData()).getIri());//new DefaultTreeNode(originalNode.getData(), parent);
    for (int i = 0; i < originalNode.getChildCount(); i++) {
        copyHierarchy((TreeNode) originalNode.getChildren().get(i), newNode, visibleNodes, model);
    }
    newNode.setParent(parent); //when removed, no exception occurs
    return newNode;
} 
```

例外

```
ava.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at org.primefaces.component.tree.TreeRenderer.encodeTreeNodeChildren(TreeRenderer.java:284)
    at org.primefaces.component.tree.TreeRenderer.encodeTreeNode(TreeRenderer.java:274)
    at org.primefaces.component.tree.TreeRenderer.encodeMarkup(TreeRenderer.java:165)
    at org.primefaces.component.tree.TreeRenderer.encodeEnd(TreeRenderer.java:96)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:23:54.400

您正在尝试修改您当前正在迭代的集合。
您是否尝试过处理相关集合的副本而不是修改当前集合？

来自[http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)：

> 请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

在您的递归函数中，您有以下场景：

**在您来到树的叶子之前的 1 步：**
假设您有一个父节点“5”和一个唯一的子（叶子）节点“11”。（“11”有“5”作为其父级）您开始迭代子级（“11”），并在他身上调用 copyHierarchy。
由于他没有孩子，因此跳过了循环，他的父母变成了 newNode，例如“17”。
然后你返回一个级别。
您应该迭代以“5”为父节点的节点，但节点“11”实际上已将其父节点从“5”更改为“17”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:59:21.840

这是解决方案，有效。我还没有本地化实际问题，但我已经成功地解决了所有问题......

```
public TreeNode constructActualModel(TreeAutocompleteMatcherIface matcher) {
    if (prunedModel == null) {
        eraseHierarchyStructure();
        prunedModel = copyHierarchy((TreeNode) completeModel, getVisibleNodes(matcher));
    }
    return prunedModel;
}

/**
 * Recursively copy the hierarchy and prune not visible branches
 * @param originalNode node of the original hierarchy to be copied
 * @param visibleNodes set of nodes, which should be included in the new hierarchy
 * @param model model of the TreeAutompleteComponent
 * @return copy of the oroginal node in the new hierarchy
 */
private TreeNode copyHierarchy(TreeNode originalNode, Set<TreeNode> visibleNodes) {
    if (!visibleNodes.contains(originalNode)) {
        return null;
    }

    TreeNode newNode = this.getCompleteModelNodes().get(((NodeWrapper) originalNode.getData()).getIri());//new DefaultTreeNode(originalNode.getData(), parent);
    List<TreeNode> children = new ArrayList<TreeNode>();
    for (int i = 0; i < originalNode.getChildCount(); i++) {
        TreeNode child = copyHierarchy((TreeNode) originalNode.getChildren().get(i), visibleNodes);
        if(child != null){
            children.add(child);
        }
    }
    ((DefaultTreeNode) newNode).setChildren(children);
    return newNode;
}

private void eraseHierarchyStructure() {
    for (TreeNode node : duplicateCompleteModelNodes.values()) {
        node.setParent(null);
    }       
} 
```

有必要以相反的方式进行 - 让 impl 能够调用 setChildren 方法并首先删除层次结构......

# php - 如何设置外键id的id #sf2 #doctrine2

> ID：11539789
> 
> 赞同：3
> 
> 时间：2012-07-18T10:58:58.047
> 
> 标签：php, symfony, doctrine-orm, foreign-keys

我正在尝试手动将外键 id 设置为对象，但没有找到如何去做

```
class Item
{
    /**
     * @ORM\ManyToOne(targetEntity="MyBundle\Entity\ItemType", inversedBy="itemTypes")
     * @ORM\JoinColumn(name="type_id", referencedColumnName="id")
     */
    protected $item_type;
} 
```

有没有办法做一些链接？

```
$item = new Item();
$item->setItemTypeId(1); // This generate an error. 
```

还是我必须那样做？

```
$item = new Item();
$type = Repository::RetrieveById(1);
$item->setItemType($type); // This generate an error. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-11T19:27:36.583

这可以使用[Reference Proxies](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/advanced-configuration.html#reference-proxies)来完成，它使您可以获取对已知标识符的实体的引用，而无需从数据库中加载该实体。

```
$type = $em->getReference('MyBundle\Entity\ItemType', 1);
$item->setItemType($type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:09:42.143

1.  首先（您是否在 ItemType 类中定义了关系？）：

    ```
    inversedBy="item" 
    ```

2.  所以第二个：

    ```
    Repository::RetrieveById(1); // Not valid code for the repository methods 
    ```

3.  将此替换为：

    ```
    $type = $this->getDoctrine()->getRepository('ACMEBundle:ItemType')->find(1); 
    ```

4.  第二种用法将接近文档。

# javascript - 捕获 Magento 一页结帐重定向

> ID：11539794
> 
> 赞同：3
> 
> 时间：2012-07-18T10:59:31.037
> 
> 标签：javascript, magento

我在 Magento 一页结账流程的末尾添加了一个步骤。用户点击“Place Order”后，出现此步骤。

我已经禁用了它，`$result['success'] = true;`所以它不应该重定向，但是某些东西（暂停后）重定向到结帐/购物车，我不知道是什么 JS 函数负责。

编辑：它可能被重定向到结帐/单页/成功，但由于我禁用了太多，所以它会反弹回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:37:47.663

**为事件“checkout_onepage_controller_success_action”**放置一个事件观察器，并在其中添加您想要的任何逻辑。

如果您不熟悉，这里有一个如何添加事件观察者的教程：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# php - Opencart 中的支付网关集成

> ID：11539803
> 
> 赞同：5
> 
> 时间：2012-07-18T11:00:22.753
> 
> 标签：php, payment-gateway, opencart, payment-processing

我想在我的 opencart 应用程序中集成 CitrusPay（一个印度支付网关）。我收到了一个 PHP 集成工具包，但不知道从哪里开始在 opencart 中。请让我知道如何将 Citruspay 添加为付款方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T13:32:18.457

您可以编辑和修改这些文件：

```
/var/www/opencart/catalog/controller/payment
/var/www/opencart/catalog/model/payment
/var/www/opencart/catalog/view/theme/ 
```

您可以看到两个文件夹 default 和另一个您可以将其放置在该文件夹中的另一个文件夹中应该有模板/付款在这里您已经放置了您的 .tpl 文件 - PHP MVC。

然后带上你的管理员：

```
/var/www/opencart/admin/controller/payment 
```

在这里您可以看到其他付款文件，您必须将您的管理控制器文件放在这里，在这里您可以放置​​您的管理视图文件`/var/www/opencart/admin/view/template/payment`，然后将您的`localhost/opencart/admin`在这里您可以看到在`extensions->payments`这里您可以看到可用的付款和您的文件，您可以安装/卸载这里

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:16:41.700

集成新支付网关的最简单方法是查看当前以类似方式工作的 opencart 支付网关。Paypal pro 扩展随 opencart 免费提供，虽然您需要根据需要对其进行自定义，但它可以作为网关的良好基础。当然，这基于 CC 字段。如果您使用的是第三方网关页面，则可能会使用更多类似 SagePay 的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T10:09:20.873

zip 中的自述文件描述了整个过程。

1.  备份您现有的 Opencart 安装，包括。Mysql 数据库，在安装新模块之前。

2.  将模块 zip 的内容解压缩到一个文件夹中。将所有 3 个文件夹（管理员、目录、柑橘）上传 (FTP) 到您的 Opencart 根文件夹。当它要求覆盖时选择是。

3.  现在在 Opencart 中登录到您的管理员帐户，然后转到 Extensions-> Payments 选项。它将向您显示上图中突出显示的 Citrus Payment® Instant Checkout。

4.  单击右侧的安装选项，将模块安装到 Opencart 引擎中。

5.  安装完成后，您将看到编辑按钮。单击编辑选项以设置选项。(a.) 填写 Citrus 提供的 Vanity/Payment Url、Merchant Access Key 和 API Key。(b.) 网关模块选项将是沙盒/测试版本的“沙盒”和实时版本的“生产”。(c.) 将状态选项更改为启用或禁用以启用或禁用 Citrus 支付网关。(d.) 根据您的选择提供排序顺序和订单状态。

6.  现在点击保存，客户将在结账过程中获得 Citrus Payment® Instant Checkout。

# objective-c - 如何在 xcode 中将 plist 文件添加到 iPhone/iPod 设备？

> ID：11539808
> 
> 赞同：0
> 
> 时间：2012-07-18T11:00:36.253
> 
> 标签：objective-c, plist, device, add

我在 xcode 中运行以下代码。当我在模拟器中运行它时，offlineData 中有内容，但在设备上运行时，内容为零。

```
NSString *offlinePlistDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) lastObject];
NSString *offlineFilePath = nil;
offlineFilePath = [offlinePlistDirectory stringByAppendingPathComponent:@"offline.plist"]; 
NSData *offlineData = [NSData dataWithContentsOfFile:offlineFilePath]; 
```

我在Library的documents文件夹中有offline.plist文件......

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T11:48:33.680

试试下面的代码

```
#define USER_DATA_PLIST_PATH    [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"offline.plist"]
#define USER_DATA_PLIST [NSMutableDictionary dictionaryWithContentsOfFile:USER_DATA_PLIST_PATH]

NSMutableDictionary *d = USER_DATA_PLIST; 
```

# visual-studio-2010 - 无法访问已处置的对象。对象名称：'MarshalingwindowFrame'

> ID：11539812
> 
> 赞同：2
> 
> 时间：2012-07-18T11:00:51.647
> 
> 标签：visual-studio-2010, devexpress, report

在 Visual Studio 2010 中打开我的项目期间，出现了这个问题。 ![在此处输入图像描述](../Images/2fd3cd4c17ebae3a102e6daea3b60f9d.png)

那么，我该如何解决呢？无法打开 DataSet 并继续 VS 中的任何其他工作。请告诉我可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-16T22:21:56.450

对我来说，禁用源**代码****控制**集成**后**错误消失了。要禁用 SCC，请执行以下操作：

*   在 IDE 中转到**`Tools->Options->Source Control->Plug-in Selection`**对话框页面。
*   **`None`**从标有 的下拉框中选择**`Current Source Control plug-in:`**。

# c# - POST 请求的服务器应答 - 无效的回发或回调参数

> ID：11539815
> 
> 赞同：0
> 
> 时间：2012-07-18T11:01:00.583
> 
> 标签：c#, post, eventvalidation

我目前正在开发一种工具来获取和解析外部网站（不是我的）的一些内容。我不会粘贴代码，因为我认为它不会带来任何东西，但是如果您认为它有用，我会这样做。

以下是我的工具的主要步骤：

*   使用常规的 webrequest/webresponse 获取网页。
*   解析网页就知道应该解析多少页（解析的网页是研究成果，所以可以提供多页的结果）
*   由于常规浏览器中的页面更改是通过提交表单完成的，因此我确实通过解析网页来检查此表单的所有 POST 参数（隐藏）。
*   使用这些参数创建 POST 请求
*   使用 WebClient 和 UploadString() 方法将 POST 请求发送到服务器。

不幸的是，最后一部分不起作用并抛出 500 错误`Invalid postback or callback argument. Event validation is enabled using ...`

如果它可以帮助，在表单的隐藏参数中，存在一个名为的参数`EventValidation`，我确实将它提供给 POST 请求。

也许有人可以知道发生了什么，因为我对asp不太熟悉。请原谅我的英语错误

# php - 显示文件的PHP来源

> ID：11539817
> 
> 赞同：0
> 
> 时间：2012-07-18T11:01:13.530
> 
> 标签：php, .htaccess

我正在处理上传脚本，我希望用户能够上传任何文件。我让它在本地主机上工作，我补充说

```
 php_flag engine off 
    AddType text/plain php html shtml php5 php4 php3 cgi asp aspx xml 
```

到我上传文件夹中的 htaccess，它显示了 PHP、html 和所有其他文件的来源。正是我想要的。现在我试图将它上传到一个真正的网络服务器，不幸的是我的主机不允许这样的 .htaccess 文件。

我尝试使用 file_get_content() 和 fopen() 打开文件并给它们一个文本/纯文本标题..但没有任何效果。它首先执行脚本并在我的 textarea 中显示输出。

你们对我如何在没有 .htaccess 的情况下解决这个问题有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:07:34.527

不要将文件上传到 webroot 并让人们直接访问它们。正如您所说，.php 脚本（可能还有更多）以这种方式执行。**任意代码执行攻击的经典方法。**

将上传的文件存储在不可公开访问的 webroot 之外，并在完成必要的权限检查后创建一个允许用户下载文件的脚本，例如使用[`readfile`](http://php.net/readfile)Apache [mod_xsendfile 。](https://tn123.org/mod_xsendfile/)

另请参阅[上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads/11061577#11061577)。

# sql - 在聚合函数中排序数据

> ID：11539819
> 
> 赞同：0
> 
> 时间：2012-07-18T11:01:15.657
> 
> 标签：sql

在此查询中，时间未在聚合函数内排序：

```
SELECT id,
       aggregate(time)
FROM   (SELECT *
        FROM   TABLE
        ORDER  BY time) AS foo
GROUP  BY something; 
```

如何按表达式分组内的列排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:04:09.753

你不应该有`ORDER BY`一个子查询，你也不需要它。

您可以`ORDER BY`在聚合函数的结果中添加一个，但这不会影响聚合函数计算其结果的方式。

如果您想影响聚合函数查看其参数的顺序，那么您可以将 an 添加`ORDER BY`到聚合函数，但仅限于某些数据库和某些情况下。

```
SELECT id, aggregate(time ORDER BY time)
FROM   (SELECT *  FROM   TABLE) AS foo
GROUP  BY something; 
```

**例子**

*   [PostgreSQL](http://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-AGGREGATES)
*   MySQL 的[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:06:23.750

您不能在派生表中排序，您可以做的是

```
SELECT id,
       aggregate(time)
FROM   (SELECT *
        FROM   TABLE
        ) AS foo
GROUP  BY something;
ORDER  BY aggregate(time) 
```

# wpf - 在带有 MVVM 的 RibbonControlsLibrary 中使用 GroupSizeReductionOrder

> ID：11539822
> 
> 赞同：0
> 
> 时间：2012-07-18T11:01:18.123
> 
> 标签：wpf, mvvm, ribbon, ribboncontrolslibrary

我正在为我的功能区使用 RibbonControlsLibrary (.Net 4.0)。我的实现完全是使用 MVVM 实现的。现在我喜欢使用调整大小功能的好处。但我无法设置组框的减少顺序。这是因为我必须以特殊顺序定义组框的名称。我无法设置分组框的名称，因为我使用的是数据模板。我试图将功能区组框用户控件的名称绑定到 datacontext 上的属性，但我认为这不起作用。

那么，我是否有机会将功能区组框用户控件名称设置为数据上下文的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:07:30.273

# 设置功能区组的名称

可能还有其他解决方案，我的是实现一个在 OnAttached 方法中设置 RibbonGroup 名称的 Behavior [。](http://msdn.microsoft.com/en-us/library/ff725476%28v=expression.40%29.aspx)

```
public class RibbonGroupNameBehavior : Behavior<RibbonGroup>
{
    protected override void OnAttached()
    {
        base.OnAttached();

        GroupeCommandesViewModel groupeCommandesViewModel = this.AssociatedObject.DataContext as GroupeCommandesViewModel;
        if (groupeCommandesViewModel != null)
        {
            this.AssociatedObject.Name = groupeCommandesViewModel.Nom;
        }
    }
} 
```

您可能想在分配周围添加一个 try-catch 块...

# 使用行为

当您使用 DataTemplates 时，我认为您必须将行为分配给带有样式的 RibbonGroups。我一直在成功使用[这个解决方案](https://stackoverflow.com/a/14406679/428494)。如您所见，我的行为代码没有提供所需的依赖属性，您必须添加它。

这是我缩短的 Ribbon 的样式：

```
<r:Ribbon.Style>
    <Style TargetType="{x:Type r:Ribbon}">
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type r:RibbonTab}">
                    <Setter Property="ItemsSource" Value="{Binding ListeCommandes, Converter={StaticResource CommandesToGroupesConverter}}" />
                    <Setter Property="GroupSizeReductionOrder" Value="{Binding ListeCommandesOrdreRedimensionnement}" />
                    <Setter Property="ItemContainerStyleSelector">
                        <Setter.Value>
                            <ribbonVM:RibbonGroupStyleSelector>
                                <ribbonVM:RibbonGroupStyleSelector.GenericStyle>
                                    <Style TargetType="{x:Type r:RibbonGroup}" BasedOn="{StaticResource RibbonGroupStyle}" />
                                </ribbonVM:RibbonGroupStyleSelector.GenericStyle>
                            </ribbonVM:RibbonGroupStyleSelector>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>
</r:Ribbon.Style> 
```

还有我的 RibbonGroup 的风格：

```
<Style x:Key="RibbonGroupStyle"  TargetType="{x:Type r:RibbonGroup}" BasedOn="{StaticResource RibbonControlStyle}">
    <Setter Property="Header"       Value="{Binding Libellé}" />
    <Setter Property="ItemsSource"  Value="{Binding Commandes}" />

    <Setter Property="CanAddToQuickAccessToolBarDirectly" Value="False" />

    <Setter Property="ihm_behaviors:RibbonGroupNameBehavior.IsEnabled" Value="True" />
</Style> 
```

# 数据绑定 GroupSizeReductionOrder 属性

如果您查看 GroupSizeReductionOrder 属性的定义，您会看到它是一个带有 TypeConverter StringCollectionConverter 的 StringCollection。据我所见，此转换器仅从字符串转换为 StringCollection。因此，您的属性应该是字符串或 StringCollection。

# cuda - 加快思路——CUDA 能帮上忙吗？

> ID：11539826
> 
> 赞同：0
> 
> 时间：2012-07-18T11:01:41.100
> 
> 标签：cuda

我正在研究一种算法，该算法必须在一定程度上独立地对大量小数组进行少量操作。

给出一个想法：

*   对长度通常为 0.5k-1k 元素的数组进行 1k 次排序。
*   1k 对 10-20 级矩阵的 LU 求解。

一切都在浮动。

然后，这个问题有一些横向性：上述操作必须在 10k 数组上独立进行。

此外，不需要存储中间结果：例如，我不需要保留已排序的数组，只需保留最小的 $m$ 元素的总和。

整个事情已经用c ++编程并运行了。我的问题是：您是否希望这样的问题能够通过 CUDA 获得显着的加速（因子 2 或更多）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:10:41.297

如果您“仅”需要 2 倍的加速，我建议在考虑 GPGPU/CUDA 之前先查看更直接的优化可能性。例如，假设 x86 考虑使用 SSE 通过重写代码的性能关键部分以使用 4 路浮点 SIMD 来实现潜在的 4 倍加速。尽管这会将您绑定到 x86，但它会更便携，因为它不需要 nVidia GPU。

话虽如此，您的代码库中甚至可能有更简单的优化机会，例如消除冗余操作（无用的副本和初始化是最受欢迎的）或使您的内存访问模式对缓存更友好。尝试使用一个像样的分析器来分析你的代码，看看瓶颈在哪里。

但是请注意，通常排序不是特别适合 SIMD 或 CUDA，但其他操作（例如 LU 分解）可能会受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:51:09.510

只需几个指针，您可能已经合并：

1）如果你只需要m个最小的元素，你最好只搜索最小的元素，删除它并重复m次。

2）您是否已经在 cpu 上并行化了代码？OpenMP 左右...

3）您是否考虑过购买更好的硬件？（我知道这不是一个好主意，但如果你想达到特定应用程序的性能目标，它有时是最便宜的可能性......）

如果你想在 CUDA 上做，它应该在概念上工作，所以不会出现大问题。但是，总有一些小事情，这取决于经验等。

考虑用于排序的推力库，希望其他人可以提出一些好的 LU 分解算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:46:17.103

您可以在 5 行[ArrayFire](http://accelereyes.com/arrayfire)代码中运行它。我通过 CPU 获得了约 6 倍的加速。与 Thrust 相比，我得到了约 4 倍的加速（它是为向量设计的，而不是矩阵）。由于您只使用单个 GPU，因此您可以运行 ArrayFire 免费版。

```
array x = randu(512,1000,f32);
array y = sort(x); // sort each 512-element column independently
array x = randu(15,15,1000,f32), y;
gfor (array i, x.dim(2))
  y(span,span,i) = lu(x(span,span,i)); // LU-decomposition of each 15x15 matrix 
```

请记住，当内存访问与 32 的倍数对齐时，GPU 性能最佳，因此一堆 32x32 矩阵的性能将优于一堆 31x31 矩阵。

# sencha-touch-2 - Sencha Touch 2 - 在源按钮旁边放置一个浮动面板

> ID：11539834
> 
> 赞同：1
> 
> 时间：2012-07-18T11:01:56.653
> 
> 标签：sencha-touch-2

我有这段代码，它创建了一个以屏幕为中心的浮动面板：

```
Ext.define('myapp.view.ButtonNav', {
extend: 'Ext.Container',
xtype: 'myapp_buttonnav',
config: {
    fullscreen: false,
    layout: 'hbox',
    items: [
        {
            xtype: 'button',
            text: 'Button 1',
            listeners: {
                tap: function () {
                    var panel = Ext.Viewport.add({
                        xtype: 'panel',
                        defaultType: 'button',
                        baseCls: 'btn1_cont',
                        centered: true,
                        layout: {
                            type: 'vbox',
                            align: 'center',
                            pack: 'center'
                        },
                        items: [
                            {
                                baseCls: 'btn1',
                                text: 'HOME PAGE',
                                handler: function() {
                                    Ext.Viewport.setActiveItem({
                                        xtype: 'myapp_homepage'
                                    });
                                    panel.destroy();
                                }
                            }
                        ],
                        top: // SET TOP TO SOURCE BUTTON
                        left: // SET LEFT TO SOURCE BUTTON
                    });
                }
            }
        },

    ]        
}
}); 
```

如您所见，它是一个容器，带有一个按钮，单击该按钮会显示一个浮动面板。如何将浮动面板定位在触发浮​​动面板的按钮的中心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:45:11.583

如果我理解正确，您需要像这样使用 showBy 函数：

```
myPanel.showBy(myButton); 
```

它将在按钮旁边显示面板，您也可以选择对齐方式。

[你可以看看文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-method-showBy)

**如何获得按钮**

如果您查看点击侦听器签名：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.Button-event-tap](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-event-tap)

您可以看到第一个参数是按钮本身，所以：

```
listeners: {
  tap: function (myButton, myEvent) {
    ... // create your panel
    myPanel.showBy(myButton);
  }
} 
```

希望这可以帮助

# vba - 在函数上使用子例程的目的

> ID：11539838
> 
> 赞同：17
> 
> 时间：2012-07-18T11:02:13.567
> 
> 标签：vba, ms-access

我已经使用 Access 有一段时间了，虽然我理解函数相对于 Sub 的明显好处，因为它可以返回值，但我不确定为什么我应该使用 Sub一个函数。毕竟，除非我弄错了；函数可以做所有 Subs 可以做的事情吗？

注意：我完全知道如何同时使用 Sub 和 Function，所以不需要解释它们是如何工作的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T06:59:30.220

就性能而言，这在这里不会是任何重大问题。

主要区别在于用户定义的函数可以在代码中的表达式中使用，而 sub 不能。

这真的是一个巨大的珠穆朗玛峰。

这种差异并不仅限于 Access，而是适用于我能想到的所有支持创建用户定义函数的编程语言和系统。

使用定义函数的主要优势有很多，但最基本的问题是这样的函数可以在 EXPRESSIONS 中使用。

例如，在表单上按钮的单击设置中，您通常可以将单个 VBA [事件代码] 例程附加到该按钮。

但是，您也可以在属性表中放置一个表达式，如下所示：

```
=MyUserFunction() 
```

以上是一个方便的提示，从那时起，您可以突出显示表单上的 10 个控件，然后输入上面的表达式，然后将上述功能分配给这 10 个按钮。你不能用一个子做上述事情。

另一个显着的区别是您可以将函数用作表单或报表上文本框的数据源（表达式）（同样，您不能使用 sub 执行此操作）。

另一个显着的区别是您可以在 SQL 中使用这些函数。这是一种真正奇妙的能力，因为这样您就可以为查询的每一行“运行”代码。这意味着您可以扩展 SQL 的能力和功能。

您甚至可以使用这个想法在 sql 查询中显示 VBA 变量，因为您只需构建一个返回 VBA 变量的公共函数，这可以在查询中使用 - 但是您不能在查询中使用 VBA 变量！

而这种 SQL 的扩展开辟了无穷无尽的想法：

所以我可以构建一个名为 ToMorrow() 的公共函数

```
Public Function Tomorrow() as date

   Tomorrow() = date() + 1

End Function. 
```

现在在查询生成器中，我可以去：

```
Select FirstName, lastName, Tomorrow() as NextDay from tblCustomers 
```

您甚至可以进行自定义转换，例如：

```
Select FirstName, LastName, Celsius([DailyGreenHouseTemp]) from tblGreenHouse. 
```

上面的每日温度读数可以以华氏度为单位，您只需定义一个名为 Celsius 的公共函数，如下所示：

```
Public Function Celsius(Temperature As Variant) As Variant

   Celsius = (Temperature * 1.8) + 32

End Function 
```

现在，虽然上述功能很简单，但它可以执行复杂的记录集处理复杂的算法，以根据温度和湿度确定花盆上方的湿度。

因此，一旦我们定义了这样一个公共函数，那么关键概念就是这样一个函数不仅可以在 VBA 代码中用作表达式，而且还可以令人惊奇地使用这种能力，包括 SQL。

所以即使在代码中，你也可以去：

```
If MyCustomfucntion(SomeVar) = lngTestValue then 
```

同样在上面，您不能在 VBA 表达式中使用 sub。

更有趣的是，在 Access 中为功能区使用自定义 XML 时，如果您对“on action”属性使用 function() 表达式，则可以避免功能区回调的需要。更好的是功能区将以当前形式调用这些函数（），而不是像您必须使用功能区回调那样的公共代码模块。

关于差异，我可能可以再输入 10 多页，但我认为这将开始是多余的，我不想在这里以任何方式出现浓缩。

因此，在 VBA 中或实际上在大多数编程语言中，子和函数之间的基本区别非常相似。

在 Access 或几乎任何编程语言中使用函数的好处也大致相同。例如，我可以在 t-sql（标量）中定义一个用户定义的函数——然后您可以在您的任何 t-sql 代码甚至是您为 sql server 创建和使用的查询中自由使用该 t-sql 函数。

所以这是子程序和函数之间的基本和简单的区别，我敢说那些用几乎任何编程语言编写过计算机代码的人都会立即意识到子程序和函数之间的上述重要和有用的区别。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T11:10:28.460

主要区别不仅在于返回值，而且似乎 subs 比函数更快（至少在 .net 中），因为 subs 的 MSIL 代码在没有返回值时要短得多。因此，当没有返回值时，整体 subs 会更快。哦，我刚刚找到了一个很好的来源（谈论 .net），也许您想进一步了解它[- 函数与子例程](http://www.codeproject.com/Articles/13372/Functions-VS-Subroutines-and-By-Val-Vs-By-Ref-in-V)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:08:39.690

是的，Function 只是一个返回值的 Sub。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T19:56:37.817

但是，我不确定，我认为 subs 比函数更快，因为子例程的变量是在创建子例程时定义的，并且可以通过引用内存位置来访问。函数每次被访问时都必须分配内存空间。

子例程修改调用代码中的变量，函数保持它们不变。因此，子例程可以向调用代码提供几条修改后的信息（与变量一样多，包括数组），但函数一次只能为传递给它的值提供一个答案。由于这种差异，如果子程序中的变量不改变其值很重要，则必须将该值分配给子程序本身中定义的临时变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-16T18:19:19.467

FWIW（我的理论;） -

让我们想想现实世界来理解这一点。

假设您想完成某事。有（至少）两种方法可以做到这一点。

第一种方式，向帮助者发送信息请求，他们会为您返回信息。所以你保持控制，即所有信息都流回给你，如果有的话，你正在决定下一步做什么。这更像是集中控制的环境。这是vba中“函数”的本质

第二种方式，将工作划分为单独的任务，并将责任分配给您的助手为您完成任务，即实际工作由助手执行，而不是仅收集信息。这是vba中'sub'的本质。

所以想想如果代码中断怎么办。通过函数调用，您可以专注于中央命令来寻找失败的原因。使用 sub 调用，您必须查看每个 sub 的工作并找出他们做错了什么。

当然，你可以搞砸目的，让函数正常工作，而 subs 只是获取信息，但是当事情破裂时，这真的会让人感到困惑！哦，但你不能这样做，请阅读此链接 - [http://www.cpearson.com/excel/diferen.htm](http://www.cpearson.com/excel/differen.htm)，其中指出 Excel 禁止更改单元格值的函数和从单元格调用的子程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T11:14:42.683

你会注意到，事件总是 subs，从来没有函数。但是，在 MS Access 中，当您希望将函数用作事件的属性时，创建函数会很有用：

```
On Close: = MyCloseFunction() 
```

Subs 可以返回一个值[ByRef](http://www.cpearson.com/excel/byrefbyval.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-18T16:34:08.037

我发现了另一个区别，至少在 Excel 上，但可能在其他 Office 应用程序上。如果您想通过添加按钮来启动 VB 程序来自定义功能区，当您在“选择命令来自”下拉菜单中选择宏时，它会列出代码中的所有子程序，但不列出函数。请注意，私人子也将从自定义功能区选择中隐藏，公共功能也是如此。

总而言之，这些可以作为按钮添加到功能区：Sub、Public Sub

并且这些将无法添加：Function、Public Function、Private Function、Private Sub

# python - 如何合并两个生成器之间？

> ID：11539846
> 
> 赞同：2
> 
> 时间：2012-07-18T11:02:37.947
> 
> 标签：python, generator, itertools

如何合并两个不同的生成器，在每次迭代中，不同的生成器都会获得收益？

```
>>> gen = merge_generators_in_between("ABCD","12")
>>> for val in gen:
...     print val
A
1
B
2
C
D 
```

我怎样才能做到这一点？我没有找到它的功能[`itertools`](http://docs.python.org/library/itertools.html)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T11:05:45.697

查看*循环*下的[`itertools`食谱](http://docs.python.org/library/itertools.html#recipes)：

 *```
>>> from itertools import cycle, islice
>>> def roundrobin(*iterables):
        "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
        # Recipe credited to George Sakkis
        pending = len(iterables)
        nexts = cycle(iter(it).next for it in iterables)
        while pending:
            try:
                for next in nexts:
                    yield next()
            except StopIteration:
                pending -= 1
                nexts = cycle(islice(nexts, pending))

>>> for x in roundrobin("ABCD", "12"):
        print x

A
1
B
2
C
D 
```*

# ruboto - 安卓中的红宝石

> ID：11539848
> 
> 赞同：1
> 
> 时间：2012-07-18T11:02:51.223
> 
> 标签：ruboto

我想用 ruby​​ 在 android 中启动一个项目。我已经使用 rails n 通过在 rails 上使用 ruby​​ 做了很多项目。谁能建议我在我的 com 中安装什么？我的 com 有 os linux。我想在我的 com 中运行我的 android 项目。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:15:34.103

您可以在此处找到开始使用 Ruboto 的指南：

*   [https://github.com/ruboto/ruboto/wiki/Getting-started-with-Ruboto](https://github.com/ruboto/ruboto/wiki/Getting-started-with-Ruboto)

如果此处未涵盖您的设置，则以下是基本安装所需的步骤。

首先，您需要安装 Java、ANT 和 Android SDK：

*   [http://java.sun.com/](http://java.sun.com/)
*   [http://ant.apache.org/](http://ant.apache.org/)
*   [http://developer.android.com/index.html](http://developer.android.com/index.html)

然后你需要安装一个 Ruby 实现和 ruboto gem：

*   [http://www.ruby-lang.org/](http://www.ruby-lang.org/)

    [sudo] 宝石安装 ruboto

*   [http://jruby.org/](http://jruby.org/)

    jruby -S gem install ruboto

*   [http://rubini.us/](http://rubini.us/)

    不确定这个。

您可以在邮件列表、IRC 频道或通过在主页上描述的跟踪器中提交问题来获得使用 Ruboto 的帮助：

*   [http://ruboto.org/](http://ruboto.org/)

# python - 无法直接运行 cython 模块？

> ID：11539849
> 
> 赞同：4
> 
> 时间：2012-07-18T11:02:56.637
> 
> 标签：python, module, cython

我有一个非常基本的 cython 测试脚本

测试1.pyx：

```
def do_something(f):
    return f

def main():
    f = 1
    print do_something(f)

if __name__ == "__main__":
    main() 
```

我编译的是：

```
cython test1.pyx
gcc -Wall -O2 -g -lm -shared -pthread -fPIC -fwrapv -fno-strict-aliasing -Iinclude/python2.6 -o test1.so test1.c 
```

它有效：

```
./bin/python -c "import test1; test1.main()"
1 
```

但是直接将其作为模块调用是行不通的：

```
./bin/python -m test1
/mypath/bin/python: No code object available for test1 
```

为什么这不起作用？如何让它直接调用 cython 脚本？

Cython 版本 0.12.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T17:30:34.120

使用该`--embed`选项。这是一个[**例子**](https://github.com/cython/cython/tree/master/Demos/embed)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-26T03:17:34.637

I put together runcython ([http://github.com/Russell91/runcython](http://github.com/Russell91/runcython)) to make this easier. Using `runcython test.pyx` will build and run your cython script directly.

# java - IndexColumn 注释中的基本属性

> ID：11539855
> 
> 赞同：0
> 
> 时间：2012-07-18T11:03:52.907
> 
> 标签：java, hibernate, annotations

有人知道@IndexColumn 注释中的基本属性是什么意思吗？base=0 和 base=1 有什么不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:09:04.553

从[IndexColumn API](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/IndexColumn.html) base 属性判断是 DB 中的索引从 base 开始，默认为 0。

这意味着您的数据库中索引的起点是什么。Java 数组是从 0 开始的，但在数据库中，您可能有 1..n 个值，`base`然后是 1。例如。：

```
@IndexColumn(base = 1)               @IndexColumn(base = 0)

DB     Java                          DB     Java
1      0      <---  position  -->    0      0
2      1                             1      1
3      2                             2      2 
```

# xml-parsing - XML Parsing - node.text 方法删除尾随空格

> ID：11539858
> 
> 赞同：0
> 
> 时间：2012-07-18T11:04:03.833
> 
> 标签：xml-parsing, jscript

我有一个使用 jscript 解析的大 xml 文件。我使用以下代码加载 xml

```
var xmlDoc = Sys.OleObject("Msxml2.DOMDocument.6.0");
    xmlDoc.async = false;

    // Load xml data from a file
    xmlDoc.load(this._studyDocPath); 
```

现在，如果我使用以下代码

```
var text = this.xmlDoc.selectSingleNode(xPath);
text = node.text; 
```

text 变量保存特定标签的内部文本。但是如果我有这样的标签

```
<Text>ABCD </Text> 
```

然后 node.text 只返回值“ABCD”，即它会自动修剪空间。但我不需要修剪任何尾随空格。我需要文字原样。我怎样才能做到这一点？

期待你的回复

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:42:43.543

我们可以使用 node.firstChild.nodeValue 对 node.firstChild 进行空检查

# c# - 如何确定第一个 simbol 是否为“_”，如果为真，则将其删除并使首字母大写？

> ID：11539860
> 
> 赞同：-2
> 
> 时间：2012-07-18T11:04:20.167
> 
> 标签：c#, .net, .net-3.5, unity3d

我们有一个字符串（`0 .. N`长符号）。如何确定它的第一个 simbol 是否为`"_"`真，如果为真，则删除它并使首字母大写（例如`"_distance"` `=>` `"Distance"`）？

总的来说，我想知道 - 我太愚蠢了，而我正在研究创建 Unity3d`CustomEditor`组件对`Inspector`. 所以想法是 - 如果类字段以`_`解析等开始。

但似乎在 Unity3d 中，私有类字段通常写成`_name`当你用`[SerializeField]`检查器之类的东西标记它时**会**自动做这样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:06:09.363

非常微不足道，实际上：

```
if (s.StartsWith("_")) {
  s = s.Substring(1, 1).ToUpper() + s.Substring(2);
} 
```

读起来几乎和你的描述一样，实际上。如果*N*小于 2，它将失败。但您可以单独检查，例如：

```
if (s.Length >= 2 && s.StartsWith("_")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:23:31.427

尝试

```
if (s != null && s.Length >= 2 && s[0] == '_') {
    s = Char.ToUpper(s[1]) + s.Substring(2);
} 
```

如果您知道这`s`不可能`null`，请放弃第一个测试。

```
if (s.Length >= 2 && s[0] == '_') {
    s = Char.ToUpper(s[1]) + s.Substring(2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:10:08.547

凌乱的单线：

```
String name = "_distance";
name = (name.StartsWith("_") ? (name.Length > 1 ? name.Substring(1, 1).ToUpper() + (name.Length > 2 ? name.Substring(2) : "") : "") : name); 
```

更清晰的单线版本：

```
String name = "_distance";
if (name.StartsWith("_"))
{
    if (name.Length > 1)
    {
        name = name.Substring(1, 1).ToUpper() + (name.Length > 2 ? name.Substring(2) : "");
    }
    else
    {
        name = "";
    }
} 
```

扩展版本：

```
public static String ParseCapitalize(this String str)
{
    if (str == null)
        return "";
    if (str.StartsWith("_"))
    {
        if (str.Length > 1)
        {
            return str.Substring(1, 1).ToUpper() + (str.Length > 2 ? str.Substring(2) : "");
        }
        else
        {
            return "";
        }
    }
    return str;
}

//Usage:
String s = "_this is a string";
if(!String.IsNullOrEmpty(s))
    s = s.ParseCapitalize(); 
```

这些片段将处理：

"" => ""

“_” => “”

“_a” => “A”

“_asd” => “Asd”

“asd” => “asd”

（仅用于扩展） null => ""

# c# - 尝试浏览器导航到组合框中选择的值时出现异常

> ID：11539863
> 
> 赞同：0
> 
> 时间：2012-07-18T11:04:31.803
> 
> 标签：c#, winforms

我在尝试将浏览器组件导航到我的组合框选定值时遇到问题 - 当组合框值更改时。

当我像下面那样做时它工作正常（但是当combobox2改变时它不会被触发）：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(sites.paths[comboBox1.SelectedIndex]);

        List<Foo> combo2data = new List<Foo>();

        foreach (string s in filePaths)
        {
            Foo fileInsert = new Foo();
            fileInsert.path = s;
            fileInsert.name = Path.GetFileName(s);
            combo2data.Add(fileInsert);
        }

        comboBox2.DataSource = combo2data;
        comboBox2.ValueMember = "path";
        comboBox2.DisplayMember = "name";         

        this.webBrowser1.Navigate((string)comboBox2.SelectedValue); // THE MOST IMPORTANT LINE : )
    } 
```

但是我看到一个异常（无法将 App1.Foo 类型的对象转换为 System.String 类型），就像这样：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(sites.paths[comboBox1.SelectedIndex]);

        List<Foo> combo2data = new List<Foo>();

        foreach (string s in filePaths)
        {
            Foo fileInsert = new Foo();
            fileInsert.path = s;
            fileInsert.name = Path.GetFileName(s);
            combo2data.Add(fileInsert);
        }

        comboBox2.DataSource = combo2data;
        comboBox2.ValueMember = "path";
        comboBox2.DisplayMember = "name";

    }

    private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
         this.webBrowser1.Navigate((string)comboBox2.SelectedValue);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:06:04.603

我认为您应该在路径前添加类似 file:/// 的内容

但还有更多你应该考虑的

通过 HTTP(S) 检索到的页面上的本地文件链接在 Mozilla/Firefox 中被故意禁用，因为它们可能存在安全风险，并且过去曾被用于攻击。

[http://kb.mozillazine.org/Firefox_：*问题*：_Links_to_Local_Pages_Don%27t_Work](http://kb.mozillazine.org/Firefox_%3a_Issues_%3a_Links_to_Local_Pages_Don%27t_Work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:30:25.957

尝试从此更改行的顺序：

```
 comboBox2.DataSource = combo2data; 
    comboBox2.ValueMember = "path"; 
    comboBox2.DisplayMember = "name"; 
```

对此：

```
 comboBox2.DisplayMember = "name";
    comboBox2.ValueMember = "path";
    comboBox2.DataSource = combo2data; 
```

然后你的代码：

```
 (string)comboBox2.SelectedValue 
```

将给出正确的结果，即 Path 的值

# ruby-on-rails - 授权用户操作

> ID：11539864
> 
> 赞同：0
> 
> 时间：2012-07-18T11:04:40.953
> 
> 标签：ruby-on-rails, authorization, cancan

我正在使用 CanCan 来授权用户的操作，并且效果很好，但是现在我需要向用户显示一条消息。

例如，用户点击“评论”按钮，cancan 会检查以下条件：

*   用户已激活
*   用户未被禁止
*   用户注册 > 1 天前。
*   自用户上次发表评论以来已过去至少 10 分钟。

现在我在 cancan 的能力模型中有它，如果其中一个条件不成立，它会告诉用户“你不能发表评论”。

使消息更详细的最佳方法是什么？用户应该会看到“您的帐户未激活”等错误。

我想只在控制器中放一个代码，但我没有唯一的用户，我需要在其他控制器上做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:08:14.030

为什么不将这些条件移动到用户模型的方法中，并在能力模型和“拒绝访问”页面上使用它们？据我所知，cancan 只是说，是否允许或现在采取行动，而不是为什么。

# javascript - jQuery 淡出功能

> ID：11539866
> 
> 赞同：0
> 
> 时间：2012-07-18T11:04:54.487
> 
> 标签：javascript, jquery, html, css, animation

我正在尝试添加一个链接到另一个的淡出功能。[点击这里](http://iamnatesmithen.com/jukebox/index.php)目前我有一个闪烁的标志。当用户点击徽标时，闪烁停止，稍有延迟，然后慢慢淡出。有没有人能够纠正我在下面粘贴的代码？

```
 <script>
         $(document).ready(function(){
         $("#center-gif").click(function(){
            $('#center-gif').hide();
            $('#center-img').show();
            });
         $('#center-img').click(function(){
            $('#center-img').hide();
            $('#center-img-gif').show();
        });
         $('flash-link').click(function(){
            $('center-img').fadeOut(5000);
         });
    });
        </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:13:40.817

如果你想用`class`/访问元素`id`；您必须始终在开始时定义这些`.`，`#`例如 css。

一些例子：

```
$('img').fadeOut();//selects all img elements
$('.img').fadeOut();//selects all elements with class="img"

$('myClass').fadeOut(); //false
$('.myClass').fadeOut(); //true

$('myId').fadeOut(); //false
$('#myId').fadeOut(); //true 
```

这是用更少的代码为您的问题工作的 jQuery：

```
$(document).ready(function(){
     $("img").click(function(){
        var takeId = $(this).attr('id');//takes clicked element's id

        $('img').hide();//hides all content

        $('#'+takeId).show();
        //matches clicked element's id with element and shows that
     });

     $('#flash-link').click(function(){//define '#' id declaration here
        $('#center-img').fadeOut(5000,//new function after fadeOut complete
          function() {
             window.open('url','http://iamnatesmithen.com/jukebox/dancers.php');
             return false;
          });
        );
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:18:12.063

所以我认为您的问题是该图像不会淡出，对吗？

这可以解决它：

首先将您的`.click()`-functions 更改为：

```
$().click( function(event) {
    // cour code
    event.preventDefault();
} 
```

而不是像这样更改最后一个：

```
$('#flash-link').click( function(event) {
    $('#center-img').fadeOut( 5000, function() {
        window.location.href = 'jukebox/dancers.php';
    });
    event.preventDefault();
}); 
```

我没有对此进行测试，但它应该可以工作。它的作用是：淡出图像并在准备好时调用函数。然后，此功能将重定向到您的下一页。

将`event.preventDefault();`告诉浏览器不要委托`click`- 事件。如果你不把它放在那里，浏览器会打开锚点而不等待任何 JavaScript 执行。

### 笔记

当您想选择一个带有 ID 的元素时，请使用此选择器：`$('#[id]')`因为此选择器`$('html')`仅适用于 HTML 元素。

# database - 我们如何防止 DB2 填充 Char 类型中的空白字符？

> ID：11539869
> 
> 赞同：1
> 
> 时间：2012-07-18T11:04:59.190
> 
> 标签：database, db2, char

目前，我有一个 DB2 数据库和一些 char 类型的列。如果我在这些列中插入一些字符少于指定字符的数据，则 DB2 用空白字符填充其余部分。

例如： Column: orderkey in type `char(8)`
If I insert `"AB12"`，它被保存为`"AB12XXXX"` （X表示空白字符）

是否可以防止 DB2 按 char 类型填充空白字符？

DB2 版本 9.5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T13:45:15.247

在 SQL 中，CHAR 数据类型是一个固定长度的字符串。根据定义，附加字符用空格填充。

您想要的是 VARCHAR 数据类型。因此，只需更改 VARCHAR(8) 的数据类型，它将存储您的字符串而不会附加空格。

顺便说一句，这在所有数据库中都是如此，不仅是 DB2。

# wpf - 如何处理附加属性事件？

> ID：11539870
> 
> 赞同：0
> 
> 时间：2012-07-18T11:05:11.683
> 
> 标签：wpf, events, mvvm, attached-properties

我创建了一个扩展器样式，在其标题中包含一个复选框。复选框状态绑定到附加属性：

```
<Style TargetType="{x:Type Expander}" x:Key="MyCheckboxExpander">
    <Setter Property="Template">
         <Setter.Value>
              <ControlTemplate TargetType="{x:Type Expander}">
               (...)
                   <CheckBox x:Name="ExpanderHeaderChk" VerticalAlignment="Center" Margin="4,0,0,2" 
                                          IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(my:AP.IsChecked)}" />
                (...) 
```

我认为，在扩展器内部，我有一个带有 ComboBox 的堆栈面板。

每当用户检查扩展器的复选框时，我不希望组合框选择第一个项目，另一方面，每当用户取消选中它时，我不希望组合框的选定项为空。

我怎样才能做到这一点？我遵循 MVVM 模式，但由于这更多是一个观点问题，我愿意接受代码隐藏建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:11:49.110

好吧，我认为您的设计不是最佳的。你看，你正试图改变`Expander`. 真正的扩展器没有附加复选框的语义，因此您创建的控件不再是扩展器。

我建议您切换到用户控件（或者可能是自定义控件，查看您的语义），并在控件的类中公开所需的事件。用户控件的 XAML 应该是带有复选框的扩展器。

* * *

编辑：带有 UserControl 的示例（未测试）

(XAML)

```
<UserControl x:Class="namespace:MyCheckboxExpander">
    <Expander>
        ...
        <Checkbox x:Name="cb"/>
        ...
    </Expander>
</UserControl> 
```

（代码隐藏）

```
public class MyCheckboxExpander : UserControl
{
    MyCheckboxExpander()
    {
        InitializeComponent();
        cb.Check += OnCheck;
    }

    void OnCheck(object sender, whatever2 args)
    {
        if (CheckboxTriggered != null)
            CheckboxTriggered(new EventArgs<whatever>);
    }

    public event EventArgs<whatever> CheckboxTriggered;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:02:13.527

WPF 是一个非常强大的框架，你可以使用扩展器的下一个样式来解决你的问题：

```
 <Style x:Key="myExpanderStyle" TargetType="{x:Type Expander}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Expander}">
                        <StackPanel>
                            <CheckBox x:Name="PART_CheckBox" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <ComboBox x:Name="PART_ComboBox" ItemsSource="{TemplateBinding Content}" />
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="True">
                                <Setter TargetName="PART_ComboBox" Property="SelectedIndex" Value="0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

样本：

```
<Expander Style="{StaticResource myExpanderStyle}">
            <x:Array Type="sys:String">
                <sys:String>1</sys:String>
                <sys:String>2</sys:String>
                <sys:String>3</sys:String>
            </x:Array>
        </Expander> 
```

只是 XAML！我喜欢 XAML 声明性。

但是从 MVVM 的角度来看，这种方法有一个缺点——我不能用单元测试来覆盖这种情况。所以，我更喜欢：

1.  创建具有以下属性的视图模型：IsChecked（绑定到 CheckBox）、SelectedItem（绑定到 ComboBox）和 Source（ComboBox 的 ItemsSource）——我的真实视图的抽象，没有任何控件引用；
2.  在视图模型中编写一个逻辑，根据 IsChecked 属性设置或取消设置 SelectedItem；
3.  用单元测试覆盖该逻辑（是的，如果您喜欢测试优先方法，您甚至可以从这一点开始）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:26:11.073

**我遵循了@Baboon 提供的建议，并使用名为CheckedChanged**的​​路由事件创建了一个自定义控件，这样我就可以通过视图的 xaml 和代码隐藏来访问它：

```
 [TemplatePart(Name = "PART_Expander", Type = typeof(Expander))]
[TemplatePart(Name = "PART_CheckBox", Type = typeof(CheckBox))]
public class MyCustomExpander : Expander
{
    static MyCustomExpander()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyCustomExpander), new FrameworkPropertyMetadata(typeof(MyCustomExpander)));
    }

    public bool IsChecked
    {
        get { return (bool)GetValue(IsCheckedProperty); }
        set { SetValue(IsCheckedProperty, value); }
    }
    public static readonly DependencyProperty IsCheckedProperty =
        DependencyProperty.Register("IsChecked", typeof(bool), typeof(MyCustomExpander),
                                     new UIPropertyMetadata(false));

    #region Events

    private CheckBox chkExpander = new CheckBox();
    public CheckBox ChkExpander { get { return chkExpander; } private set { chkExpander = value; } }

    public static readonly RoutedEvent CheckedChangedEvent = EventManager.RegisterRoutedEvent("ExtraButtonClick", 
                                                                                               RoutingStrategy.Bubble, 
                                                                                               typeof(RoutedEventHandler),
                                                                                               typeof(MyCustomExpander));

    public event RoutedEventHandler CheckedChanged
    {
        add { AddHandler(CheckedChangedEvent, value); }
        remove { RemoveHandler(CheckedChangedEvent, value); }
    }

    void OnCheckedChanged(object sender, RoutedEventArgs e)
    {
        RaiseEvent(new RoutedEventArgs(CheckedChangedEvent, this));
    } 

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        CheckBox chk = base.GetTemplateChild("PART_CheckBox") as CheckBox;
        if (chk != null)
        {
            chk.Checked += new RoutedEventHandler(OnCheckedChanged);
            chk.Unchecked += new RoutedEventHandler(OnCheckedChanged);
        }
    }

    #endregion

} 
```

我要感谢@Baboon 和@Vlad 的帮助。

# javascript - 编写替换背景图像的用户脚本

> ID：11539871
> 
> 赞同：0
> 
> 时间：2012-07-18T11:05:12.503
> 
> 标签：javascript, background, greasemonkey, userscripts

这是代码

```
// ==UserScript==
// @name           Wood Background
// @namespace      http://www.nationstates.net/nation=ellorn
// @description    Changes background to wood finish
// @include       http:*//w11.zetaboards.com/Allied_Republics/*
// ==/UserScript==

function addCss(cssString) {
    var head = document.getElementsByTagName('head')[0];
    return unless head;
    var newCss = document.createElement('style');
    newCss.type = "text/css";
    newCss.innerHTML = cssString;
    head.appendChild(newCss);
}  
addCss (
    '* { background: #00ff00                          url('http://awesomewallpapers.files.wordpress.com/2010/01 /wooden_top.jpg') no-repeat 

fixed center;  }'
); 
```

我正在尝试替换网站的背景：http: [//awesomewallpapers.files.wordpress.com/2010/01/wooden_top.jpg](http://awesomewallpapers.files.wordpress.com/2010/01/wooden_top.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:46:55.547

对于样式更改，请使用[Stylish 插件](https://addons.mozilla.org/en-US/firefox/addon/stylish/)（几乎每个浏览器都可以使用该插件的一些变体）。

Stylish 比 Greasemonkey 或用户脚本更快、更轻、更容易。[userstyles.org](http://userstyles.org/)上有很多预制样式。

除此之外，请使用内置函数，例如[`GM_addStyle()`](http://wiki.greasespot.net/GM_addStyle).

以下脚本适用于 Firefox 和 Chrome，可能还有其他一些浏览器。（CSS 字符串中有语法错误）：

```
// ==UserScript==
// @name        Wood Background
// @namespace   http://www.nationstates.net/nation=ellorn
// @description Changes background to wood finish
// @include     http:*//w11.zetaboards.com/Allied_Republics/*
// ==/UserScript==

GM_addStyle (
    "* { background: #00ff00 "
    + "url('http://awesomewallpapers.files.wordpress.com/2010/01/wooden_top.jpg')"
    + " no-repeat fixed center; }"
); 
```

请注意，最好将 替换`*`为`body`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:11:07.597

您可以定义自己的用户样式表来覆盖网站的作者样式表。我认为这比编写 javascript 更适合更改 CSS。

这是关于如何实现这一目标[的简短介绍。](http://brugbart.com/Articles/custom-style-sheets)

除此之外，如果您正确移交 CSS 字符串（固定引用和换行符），您的代码应该可以正常工作：

```
var css = "* { background: #00ff00 url('http://awesomewallpapers.files.wordpress.com/2010/01/wooden_top.jpg') no-repeat fixed center;  }";

addCss ( css ); 
```

但是请注意，这`*`会中断，因为您将木质背景应用于**每个**元素，而不仅仅是您的背景元素（HTML 或正文或包装器 div）。

# sql-server - 如何在sql连接中使用sum函数

> ID：11539875
> 
> 赞同：1
> 
> 时间：2012-07-18T11:05:21.313
> 
> 标签：sql-server

如何在 sql server 2008 的连接中使用 sum 函数？

```
SELECT SUM(d.TranTypeAmt),
       h.LnNo,
       h.LoanRcptAmt,
       d.Trantype,
       d.TranTypeAmt
FROM   LGen_LnInstClln_h h
       RIGHT OUTER JOIN LGen_LnInstClln_d d
         ON h.PK_Id = d.InstCllnHdr_FK
WHERE  h.LnNo = '40009' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:09:58.433

使用[聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)时，例如[`SUM()`](http://msdn.microsoft.com/en-us/library/ms187810.aspx)您需要对其余数据项使用聚合函数，或按它们分组。

```
select  SUM(d.TranTypeAmt), h.LnNo,h.LoanRcptAmt,d.Trantype,d.TranTypeAmt
from LGen_LnInstClln_h h 
right outer join LGen_LnInstClln_d d on h.PK_Id=d.InstCllnHdr_FK  
where h.LnNo='40009'
GROUP BY h.LnNo,h.LoanRcptAmt,d.Trantype,d.TranTypeAmt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:12:15.993

使用聚合函数时，您应该有一个 group by 子句，以及选择列表中的其他列。

所以在这里你应该添加

```
group by 
h.LnNo,
       h.LoanRcptAmt,
       d.Trantype,
       d.TranTypeAmt 
```

在查询结束时

# php - isset 或 !empty 用于 $_GET[var]

> ID：11539877
> 
> 赞同：3
> 
> 时间：2012-07-18T11:05:27.257
> 
> 标签：php, isset

我最近不得不为一份工作做一个“测试”，我得到反馈说这个陈述是不正确的：

```
$images = $flickr->get_images(5, !empty($_GET['pg']) ? $_GET['pg'] : 1); 
```

“假定的”错误是在第一次加载页面时通过三元运算符生成的，因为没有通过查询字符串传递“？pg = 1”（或其他）。

反馈说我应该改用 isset。我在这里查看了各种帖子（[问题 1960509](https://stackoverflow.com/questions/1960509/isset-and-empty-make-code-ugly)）和博客，但找不到任何明确的答案。

这真的是一个错误吗？我怎样才能复制这个问题？我需要在我的 php.ini 文件中添加 E_STRICT 或其他内容吗？或者这可能是由于旧版本的 php 造成的？

注意：请不要告诉我我应该如何验证事情..我知道......这是一个测试，看看我是否可以使用 flickr api 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:09:37.890

这很好。`empty`不是一个实际的功能，它是一种语言结构。如果未设置变量，它不会发出警告（在这种情况下，变量被认为是空的，因此“函数”会`TRUE`按您的意愿返回），此外它还会检查空值或零值。

您可以将`empty`其视为正常`isset`检查，并与以下内容进行松散比较`FALSE`：

```
empty($var) === (!isset($var) || $var == FALSE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:08:01.093

$images = $flickr->get_images(5, (isset($_GET['pg']&&($_GET['pg']))) ? $_GET['pg'] : 1);

没有isset你会得到错误所以结合他们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:10:53.903

我会用

```
$images = $flickr->get_images(5, array_key_exists('pg', $_GET) ? $_GET['pg'] : 1); 
```

如果需要，可以结合`!empty($_GET['pg'])`（即`array_key_exists('pg', $_GET) && !empty($_GET['pg'])`），但这`array_key_exists`是这项工作的预期功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:11:56.003

您会收到错误的原因是因为 empty 函数旨在检查现有变量的**值，whearas** **isset()**旨在告诉您变量是否已被实例化，但是因为 empty() 在技术上是一种语言结构不会抛出错误或创建警告，因此大多数人看不到差异。

从[文档](http://php.net/manual/en/function.empty.php)：

> ```
> empty() is the opposite of (boolean) var, except that no warning is generated when the variable is not set. 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:12:21.613

我认为在这种情况下`isset`使用正确的函数是检查数组元素的存在，而不是检查元素的值是否已设置。正如 Martin 所说，最好的办法是将它们组合起来，因为这只会在元素存在时检查值，这意味着错误不会在第一个页面加载时发生。

另外，我认为这只会在 E_NOTICE 开启时发出警告（或者也可能是 E_WARNING ）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T11:18:47.377

isset — 确定变量是否已设置且不为 NULL。所以“isset”是用于检查值是否设置的正确函数。

更多细节： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

# wso2 - 如何在 wso2esb 中重写 url

> ID：11539883
> 
> 赞同：2
> 
> 时间：2012-07-18T11:05:50.370
> 
> 标签：wso2, wso2esb, esb

我正在使用 wso2ESB 使用 alfresco 用户名和密码从 alfresco 获取登录票。在我打电话给服务之后

```
http://xx.xx.xxx.xx:8282/services/AlfrescoLogin 
```

我必须附加

```
http://xx.xx.xxx.xx:8282/services/AlfrescoLogin?u=xxx&pw=xxx 
```

我定义了以下服务：

```
<proxy name="AlfrescoLogin" transports="https http" startOnLoad="true" trace="disable">
        <target>
            <endpoint>
                <address uri="http://XX.XX.XXX.XX:8080/alfresco/s/api/login"/>
            </endpoint>
            <inSequence>
                <rewrite>
                    <rewriterule>
                        <action value="u=xxxxx" type="set" fragment="query"/>
                        <action value="pw=xxxxx" type="set" fragment="query"/>
                    </rewriterule>
                </rewrite>
            </inSequence>
            <outSequence>
                <send/>
            </outSequence>
        </target>
    </proxy> 
```

但是下面的配置没有效果。我尝试将 action 标记的 type 属性也设置为 append。而且我仍然必须手动将参数添加到 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:51:39.780

以下 URL 重写配置将对您的 URL 进行所需的转换。

```
<rewrite>
    <rewriterule>
        <action value="u=xxx&amp;pw=xxx" type="set" fragment="query"/>
    </rewriterule>
</rewrite> 
```

# javascript - 按下“赞”按钮时出现 Facebook 错误

> ID：11539892
> 
> 赞同：0
> 
> 时间：2012-07-18T11:06:23.717
> 
> 标签：javascript, jquery, facebook

当点击like按钮时，我明白了。

> 不安全的 JavaScript 尝试使用 URL [http://www.facebook.com/dialog/oauth?api_key=248753205242460&app_id=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%访问框架3D9%23cb%3Dfedecb848%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&client_id=248753205242460&display=none&domain=localhost&locale=en_US&origin=2F%2Fstatic.facebook.A% com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df99e53428%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent%26frame%3Df2c40b1914&response_type=tokendk=Cjoeyfromrequest_type=tokendk=](http://www.facebook.com/dialog/oauth?api_key=248753205242460&app_id=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Dfedecb848%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&client_id=248753205242460&display=none&domain=localhost&locale=en_US&origin=1&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df99e53428%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent%26frame%3Df2c40b1914&response_type=token%2Csigned_request%2Ccode&sdk=joey) Cjoey网址[http://www.facebook.com/plugins/like.php?action=like&api_key=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df458cef1c% 26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&colorscheme=light&extended_social_context=false&font=segoe%20ui&href=http%3A%2F%2Fecommercedeveloper.com&layout=standard&locale=en_US&node_type=link&sdk=joey&sdk= 400#](http://www.facebook.com/plugins/like.php?action=like&api_key=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df458cef1c%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&colorscheme=light&extended_social_context=false&font=segoe%20ui&href=http%3A%2F%2Fecommercedeveloper.com&layout=standard&locale=en_US&node_type=link&sdk=joey&show_faces=true&width=400#) . 域、协议和端口必须匹配。不安全的 JavaScript 尝试使用 URL [https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=9#channel=f2ad19772&origin=http%3A%2F%2Flocalhost&channel_path=%2FDummy%2FFBplugin%2Ffb访问框架.](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=9#channel=f2ad19772&origin=http%3A%2F%2Flocalhost&channel_path=%2FDummy%2FFBplugin%2Ffb.php%3Ffb_xd_fragment%23xd_sig%3Dfe951f208%26)[http://www.facebook.com/plugins/like.php?action=like&api_key=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df458cef1c% 26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&colorscheme=light&extended_social_context=false&font=segoe%20ui&href=http%3A%2F%2Fecommercedeveloper.com&layout=standard&locale=en_US&node_type=link&sdk=joey&sdk= 400#](http://www.facebook.com/plugins/like.php?action=like&api_key=248753205242460&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df458cef1c%26origin%3Dhttp%253A%252F%252Flocalhost%252Ff2ad19772%26domain%3Dlocalhost%26relation%3Dparent.parent&colorscheme=light&extended_social_context=false&font=segoe%20ui&href=http%3A%2F%2Fecommercedeveloper.com&layout=standard&locale=en_US&node_type=link&sdk=joey&show_faces=true&width=400#) . 域、协议和端口必须匹配。

我不知道为什么会出现该错误，可能是因为触发了检查登录的代码..

这是我的html：

```
<!DOCTYPE html> 
```

```
<body>
  <div id="fb-root"></div> 
```

```
 <script type="text/javascript">
 $(document).ready(function(){          

          FB.init({
            appId      : '248753205242460', // App ID
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
            });   

window.fbAsyncInit = function() {
            console.log('Sdk is loaded');

FB.getLoginStatus(function(response) {
                console.log('GEtting logged in status');

  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    console.log('User is connected');
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
     console.log('User not authorized');
  } else {
    // the user isn't logged in to Facebook.
     console.log('User inst logged in');
  }
 });
};

 FB.Event.subscribe('edge.create',
    function(response) {
        console.log('You liked the URL: ' + response.status);
    });

});

       </script>        
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:23:19.330

> 我正在使用的另一个事件是“getLoginStatus”，它会告诉我用户是否登录到 facebook。

这本身不是一个“事件”——它只是一个异步方法，它可以让你获得登录状态。

> console.log('FB.getLoginStatus: '+FB.getLoginStatus);

此时，您甚至都没有调用该方法——您只是在说明它的名称。（我知道，你之前调用过它——但是这个调试输出没有多大意义。）

> 我想触发 edge.create

你究竟是如何实现你的喜欢按钮的？如果您使用的是 iframe 版本的按钮，则*不会*触发此事件。

> [来自评论] 我想我需要有自己的应用程序 ID ......这可能是原因吗？这是我的 Facebook 名称，而不是数字

你当然知道。您的用户名无论如何**都不是应用程序 ID。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:17:10.967

错误消息通常暗示您的 http 协议有问题`Unsafe JavaScript attempt to access frame with URL`。`Domains, protocols and ports must match`您是否应该对这些调用使用 HTTPS 而不是普通的 HTTP？

当我看到这些错误时，我通常会测试我是否在某处丢失了 https ......

另请查看您的应用是否在 facebook 的开发人员管理面板中设置了所有安全 URL！

# iphone - 在 FOR 语句中使用变量访问字符串名称

> ID：11539897
> 
> 赞同：0
> 
> 时间：2012-07-18T11:06:46.487
> 
> 标签：iphone, objective-c, ios

是否可以在 FOR 语句中使用变量访问对象？

假设我已经宣布：

```
UIImageView *UIImageView0;
UIImageView *UIImageView1;
UIImageView *UIImageView2; 
```

我在一个数组中有 3 个对象，如果数组中的 x 等于 2，我调用 FOR 语句，我希望它将 x 的值添加到 UIImageView 名称，如 UIImageView1 等

我试过了：

```
for (int x=0; x<[theArray count]; x++) {

UIImageView[x].image = etc....

} 
```

但它给了我一个关于 UIImageView[x] 的错误

```
subscript requires size of interface 'UIImageView' 
```

有任何想法吗？或者甚至可以使用 UIImageView 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:09:53.070

但是，数组中没有三个元素*；*您有三个名称相似的自变量。如果您创建了一个*实际*的数组，其中包含三个变量的值，那么您可以使用`for`循环——事实上，语法就像您所展示的那样（当然，使用数组变量的实际名称。 )

你可以说

```
UIImageView * views[3] = {UIImageView0, UIImageView1, UIImageView2}; 
```

然后`views[i].image`在你的循环中使用，例如。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:13:37.627

为了将您的 UIImageView 放入一个数组中，您需要创建一个实例 NSMutableArray（例如）

上面的代码没有显示任何数组，而是你有三个 ivars

```
UIImageView *UIImageView0;
UIImageView *UIImageView1;
UIImageView *UIImageView2; 
```

并访问那些你会使用名称，而不是数组。

但是，如果您将它们放入 an`NSMutableArray`中，则可以使用

```
NSMutableArray array = [[NSMutableArray alloc] 
   initWithObjects:UIImageView0, UIImageView1, UIImageView2, nil];
[array objectAtIndex:i ]; // where i is 0,1 or 2

...
[array release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:13:10.073

您可以将 UIImageView 放到另一个数组中，然后从该数组中获取 UIImageView。

```
NSArray *imagesArray = @[imageView0, ...]

for(size_t i = 0; i<theArray.count; i++)
{
    UIImageView *imageView = [imagesArray objectAtIndex:i];
} 
```

或者您可以使用 UIView 的“标签”属性，例如：

```
UIImageView *image0 = ...;
image0.tag = 100; //or 0 or something else
[self.view addSubview:image0]; 
```

然后在 FOR 语句中按标签获取 UIImageView：

```
for(size_t i = 0; i<theArray.count; i++)
{
    UIImageView *imageView = [self.view viewWithTag:100+i];
} 
```

# delphi - 如何控制 Components 数组中项目的顺序？

> ID：11539899
> 
> 赞同：1
> 
> 时间：2012-07-18T11:07:15.607
> 
> 标签：delphi, components

我在 Delphi 中开发了一个带有 TEdit 组件的小应用程序。![在此处输入图像描述](../Images/95713adb5ba89373eb1e872440a818af.png)
我使用这个函数来验证组件字段是否不为空。

```
function TF_config.Validatefields:boolean;
var 
  i : integer;
begin
 for i := 0 to ComponentCount - 1 do
 begin
   if (Components[i]is TEdit) then
   begin
      if ((TEdit(Components[i]).Text) ='') then
      begin
        MessageDlg('Enter data in all the fields',mtWarning,[MBOK],0);
        TEdit(Components[i]).SetFocus;
        result := false;
        exit;
     end;             
   end;  //end for TEdit
 end;    //end component count 
 result := true;
end; 
```

现在我必须再添加一个组件
![在此处输入图像描述](../Images/e9ac77e468c6efc85624f8bff2f933d3.png)
该函数检查数据是否有效的顺序是 *ID->Name->Address->Phone->Age*。但我希望它是*ID->Name->Address->Age->Phone*。
我尝试解决它删除*Phone Edit 组件，然后在添加**Age* Edit 组件后添加它。或者使用*Phone* Edit 组件为*Age并为**Phone*添加新的 Edit 组件。这对于少数组件来说更容易，但在拥有许多组件时变得乏味。所以我想知道我们是否可以以适合我们的方式安排组件。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:02:28.290

您可以使用`TabOrder`属性进行排序和`FindNextControl`方法在控件之间移动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:18:20.980

1.  在 IDE 中，按 Alt+F12 或右键单击表单并选择“以文本形式查看”以打开表单的资源 (.dfm)
2.  根据需要重新排列组件（剪切和粘贴）。它们在资源中出现的顺序是它们`Components`在运行时在表单属性中列出的顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:28:17.400

我建议将控件放在您自己的列表/数组中，然后您可以完全控制其内容和顺序，并且可以在需要时循环遍历它。这也确保您只触摸您真正感兴趣的控件，而不是浪费时间触摸您不感兴趣的其他控件，并且它还允许 VCL 在它认为合适的时候维护它自己的内部列表的顺序。

```
type
  TF_config = class(TForm)
    procedure FormCreate(Sender: TObject);
  ...
  private
    EditFields: array[0..4] of TEdit;
    function ValidateFields: Boolean; 
  ...
  end;

procedure TF_config.FormCreate(Sender: TObject);
begin
  EditFields[0] := IdEdit;
  EditFields[1] := NameEdit;
  EditFields[2] := AddressEdit;
  EditFields[3] := AgeEdit;
  EditFields[4] := PhoneEdit;
end; 

function TF_config.ValidateFields: Boolean; 
var  
  i : integer; 
begin 
  for i := Low(EditFields) to High(EditFields) do 
  begin 
    if EditFields[i].GetTextLen = 0 then 
    begin 
      MessageDlg('Enter data in all the fields', mtWarning, [MBOK], 0); 
      EditFields[i].SetFocus; 
      Result := False; 
      Exit; 
    end;              
  end;
  Result := True; 
end; 
```

**更新**：如果您需要验证多种类型的控件，则可以这样做：

```
type 
  TF_config = class(TForm) 
    procedure FormCreate(Sender: TObject); 
  ... 
  private 
    Fields: array[0..4] of TControl; 
    function ValidateFields: Boolean;  
  ... 
  end; 

procedure TF_config.FormCreate(Sender: TObject); 
begin 
  Fields[0] := ...; 
  Fields[1] := ...; 
  ...
  Fields[4] := ...; 
end;  

function TF_config.ValidateFields: Boolean;  
var   
  i : Integer;  
  ctrl: TControl;
begin  
  Result := True;
  for i := Low(Fields) to High(Fields) do  
  begin  
    ctrl := Fields[i];
    if ctrl is TCustomEdit then // handles both TEdit and TMemo
    begin  
      if TCustomEdit(ctrl).GetTextLen = 0 then  
      begin  
        Result := False;
        Break;
      end;               
    end;
    if ctrl is TComboBox then
    begin  
      if TComboBox(ctrl).ItemIndex = -1 then  
      begin  
        Result := False;
        Break;
      end;               
    end;
    ... and so on ...
  end;
  if not Result then
  begin
    MessageDlg('Enter data in all the fields', mtWarning, [MBOK], 0);  
    ctrl.SetFocus;  
  end;
end; 
```

# iphone - 如何在 iPhone 的 tableview 中显示来自 url 的图像

> ID：11539907
> 
> 赞同：0
> 
> 时间：2012-07-18T11:07:39.603
> 
> 标签：iphone, uitableview, ios5

我正在使用以下代码在表格视图中显示图像，

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[xmlParser templates] count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    Temp *currentTemplate = [[xmlParser templates] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect contentNameLabelFrame = CGRectMake(64, 2, 250, 20);
        UILabel *contentNameLabelF = [[UILabel alloc] initWithFrame:contentNameLabelFrame];
        contentNameLabelF.tag = 0011;
        contentNameLabelF.font = [UIFont boldSystemFontOfSize:12];
        contentNameLabelF.text = @"Template Name:";
        contentNameLabelF.textColor = [UIColor orangeColor];
        [cell.contentView addSubview:contentNameLabelF];

        CGRect contentFrame = CGRectMake(115, 2, 250, 20);
        UILabel *contentLabel = [[UILabel alloc] initWithFrame:contentFrame];
        contentLabel.tag = 0012;
        contentLabel.font = [UIFont boldSystemFontOfSize:12];
        [cell.contentView addSubview:contentLabel];

        CGRect contentnumberofcontacts = CGRectMake(63, 20, 250, 13);
        UILabel *contentnumberofcontactsLabel = [[UILabel alloc] initWithFrame:contentnumberofcontacts];
        contentnumberofcontactsLabel.tag = 0013;
        contentnumberofcontactsLabel.font = [UIFont boldSystemFontOfSize:10];
        contentnumberofcontactsLabel.text = @"Image:";
        contentnumberofcontactsLabel.textColor = [UIColor brownColor];
        [cell.contentView addSubview:contentnumberofcontactsLabel];

        CGRect contentnumberFrame = CGRectMake(115, 20, 250, 13);
        UILabel *contentnumberLabel = [[UILabel alloc] initWithFrame:contentnumberFrame];
        contentnumberLabel.tag = 0014;
        contentnumberLabel.font = [UIFont systemFontOfSize:10];
        [cell.contentView addSubview:contentnumberLabel];

        CGRect contentstatus = CGRectMake(78, 35, 250, 10);
        UILabel *contentstatuslabel = [[UILabel alloc] initWithFrame:contentstatus];
        contentstatuslabel.tag = 0015;
        contentstatuslabel.font = [UIFont boldSystemFontOfSize:10];
        contentstatuslabel.text = @"Category:";
        contentstatuslabel.textColor = [UIColor grayColor];
        [cell.contentView addSubview:contentstatuslabel];

        CGRect statusFrame = CGRectMake(115, 35, 250, 10);
        UILabel *statusLabel = [[UILabel alloc] initWithFrame:statusFrame];
        statusLabel.tag = 0016;
        statusLabel.font = [UIFont systemFontOfSize:10];
        [cell.contentView addSubview:statusLabel];

    }

    UILabel *contentLabel = (UILabel *)[cell.contentView viewWithTag:0012];
    contentLabel.text = [currentTemplate templateName];

    UILabel *contentnumberLabel = (UILabel *)[cell.contentView viewWithTag:0014];
    contentnumberLabel.text = [currentTemplate imagePath];

    UILabel *statusLabel = (UILabel *)[cell.contentView viewWithTag:0016];
    statusLabel.text = [currentTemplate category];

    return  cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath

{
    return 75;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    xmlParser = [[ViewController alloc] loadXMLByURL:@"http://www.xxxxx.net/xxxxx/xxxx.aspx?type=xxxxx&xxxx="];
}

-(id)loadXMLByURL:(NSString *)urlString
{
    _templates = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];

    return self;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"template_maste"])
    {
        currentTemplate = [Temp alloc];
    }
    if ([elementName isEqualToString:@"img_path"])
    {
        currentTemplate = [Temp alloc];
        isStatus = YES;
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"Template_name"])
    {
        currentTemplate.templateName = currentNodeContent;
    }
    if([elementName isEqualToString:@"img_path"])
    {
        currentTemplate.imagePath = currentNodeContent;
    }
    if([elementName isEqualToString:@"Category"])
    {
        currentTemplate.category = currentNodeContent;
    }
    if([elementName isEqualToString:@"template_maste"])
    {
        [self.templates addObject:currentTemplate];
        currentTemplate = nil;
        currentNodeContent = nil;
    }
} 
```

我能够在 tableView 中显示图像的路径，但我需要从 url 显示 tableView 中的图像。

我搜索了解决方案，但我无法获得解决方案，

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:18:08.453

如果您正在使用`ASIHTTPRequest`，您可以这样做：

```
NSURL *url = [NSURL URLWithString:@"http://example.com/picture.png"];
__block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setCompletionBlock:^{
    NSData *responseData = [request responseData];
    UIImage *img = [UIImage imageWithData:responseData];
    [self.myImageView setImage:img];
}];
[request startAsynchronous]; 
```

**编辑：**我还建议您将下载的图像（名称如 URL_MD5.png）保存在设备上，仅当它们在缓存中丢失时才从 Internet 获取它们。您也可以创建一个基于 UIImageView 的“组件”，它显示活动指示器（如 ajax），直到下载完成。因此，您可以添加一个类似的方法，该方法`loadImageFromUrl`将在缓存中查看图像并在需要时异步加载它，将其存储到缓存并最终显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:10:33.783

您必须对所有图像的 URL 进行 url 请求。代替 UILabel，放置一个 UIImageView，并将图像数据从 url 响应加载到 imageview 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:14:39.357

获得所有图像 URL 后。试试下面的代码来显示吧！！:-)

```
NSString *imageStr = [imageURLArray objectAtIndex:indexPath.row];
NSString *trimmedString = [imageStr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSString *string1=[trimmedString stringByReplacingOccurrencesOfString:@"/n" withString:@""];
NSURL *url = [NSURL URLWithString:string1];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *newImage = [UIImage imageWithData:data];
cell.imageView.image = newImage; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:15:04.780

我认为你正在寻找的是这样的：

```
NSString *path = @"http://www.yoururl/images/yourimage.png";
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[[UIImage alloc] initWithData:data] autorelease];

UIImageView *imageView = [[[UIImageView alloc] initWithImage:img] autorelease];
imageView.frame = CGRectMake(0, 0, 44, 44);
[cell addSubview:imageView]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:15:08.767

为 Teodor 的答案添加更多内容，使用[AFNetworking 框架](https://github.com/AFNetworking/AFNetworking/)将有助于您的生活。它适用于基于块的方法。更有帮助的是，它有 AFImageRequestOperation，一个用于下载和处理图像的特定类，以及 UIImageView+AFNetworking，它可以帮助您更多地异步加载远程图像。

# jquery - 在 jQuery 动画上使用延迟

> ID：11539908
> 
> 赞同：0
> 
> 时间：2012-07-18T11:08:00.043
> 
> 标签：jquery, animation, delay

我正在使用此代码为 3 个 div 设置动画，如何添加延迟以使动画逐步发生。现在 3 个 div 会同时设置动画。请帮我。

这是我的代码： $(document).ready(function() {

```
//iPhone Animation / Define Variable
var iPhoneOne = $(".iphoneOne");
var iPhoneTwo = $(".iphoneTwo");
var free = $(".free");

iPhoneOne.animate({marginTop:'80px',opacity:1},{duration:"slow", easing:"easeOutBounce"});
iPhoneTwo.animate({marginTop:'80px',opacity:1},{duration:"slow", easing:"easeOutBounce"});
free.show("fast"); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:12:44.010

我想这将是一种方法：

```
iPhoneOne.动画（
   {marginTop:'80px',不透明度:1},
   {持续时间：“慢”，缓动：“easeOutBounce”}，
   功能（）
   {

      iPhoneTwo.animate(
         {marginTop:'80px',不透明度:1},
         {持续时间：“慢”，缓动：“easeOutBounce”}，
         功能（）
         {

             free.show("快");

         }
      );

   }
);

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:13:39.577

我解决了。这是代码：
$(document).ready(function() {

```
//iPhone Animation / Define Variable
var iPhoneOne = $(".iphoneOne");
var iPhoneTwo = $(".iphoneTwo");
var free = $(".free");

iPhoneOne.animate({marginTop:'80px',opacity:1},{duration:"slow", easing:"easeOutBounce"});
iPhoneTwo.delay(500).animate({marginTop:'80px',opacity:1},{duration:"slow", easing:"easeOutBounce"});
free.delay(800).show("fast"); 
```

});

# xslt - 如果子节点为空，则删除父节点

> ID：11539910
> 
> 赞同：2
> 
> 时间：2012-07-18T11:08:00.703
> 
> 标签：xslt

源 XML：

```
<MP>
  <Name>pol</Name>
  <PRules>
  <PRule order="1" name="r1">
   <Conditions>
    <Condition eleName="eth" value="05">05</Condition>
    <Condition eleName="dest" value="32">32</Condition>
   </Conditions>
  </PRule>
  <PRule order="2" name="r2">
   <Conditions>
    <Condition eleName="eth" value="04">04</Condition>
   </Conditions>
   <Actions>
    <Action name="xyz"/>
   </Actions>
  </PRule>
 </PRules>
</MP> 
```

如果必须删除具有属性 eleName="eth" 的 Condition 节点。如果Condition为空，则在删除Condition节点后，还必须删除完整的PRule节点。

我应用了以下 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template name="attributeTemplate" match="Condition[@elementName='eth']"/>

 <xsl:template match="PRule[descendant::Conditions[not(@*)]]"/>
</xsl:stylesheet> 
```

但结果是这样的：

```
<MP>
 <Name>pol</Name>
 </PRules>
</MP> 
```

我必须进行哪些更改才能将 XML 转换为

```
<MP>
 <Name>pol</Name>
 <PRules>
  <PRule name="r1" order="1">
   <Conditions>
    <Condition eleName="dest" value="32">32</Condition>
   </Conditions>
  </PRule>
 </PRules>
</MP> 
```

xsl 文件出了什么问题，我不明白。基本上，如果条件为空，我想删除父 PRule 节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:56:55.613

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="PRule[not(*/Condition[not(@eleName='eth')])]"/>

 <xsl:template match="Condition[@eleName = 'eth']"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<MP>
    <Name>pol</Name>
    <PRules>
        <PRule order="1" name="r1">
            <Conditions>
                <Condition eleName="eth" value="05">05</Condition>
                <Condition eleName="dest" value="32">32</Condition>
            </Conditions>
        </PRule>
        <PRule order="2" name="r2">
            <Conditions>
                <Condition eleName="eth" value="04">04</Condition>
            </Conditions>
            <Actions>
                <Action name="xyz"/>
            </Actions>
        </PRule>
    </PRules>
</MP> 
```

**产生想要的正确结果：**

```
<MP>
   <Name>pol</Name>
   <PRules>
      <PRule order="1" name="r1">
         <Conditions>
            <Condition eleName="dest" value="32">32</Condition>
         </Conditions>
      </PRule>
   </PRules>
</MP> 
```

**说明**：

正确使用同**[一律](http://dpawson.co.uk/xsl/sect2/identity.html)**和**[双重否定律](http://en.wikipedia.org/wiki/Double_negation)**。

# sockets - Windows Phone 7 通过 wifi 接收 UDP 数据包（广播或单播）

> ID：11539922
> 
> 赞同：3
> 
> 时间：2012-07-18T11:08:54.757
> 
> 标签：sockets, udp, windows-phone-7.1, asyncsocket

我已经看了几天关于 Windows Phone 7 的各种论坛，但是没有一个给我一个明确的答案。到目前为止，我还无法接收从通过 wifi 连接的计算机发送到 Windows Phone 7 设备（在模拟器上运行）的 UDP 数据包（既不是广播也不是单播）。

显然应该支持 UDP 单播并且下面的代码运行正确，但是没有从手机接收到 UDP 数据包。我希望有人可以更正下面的代码。

请注意，以下代码遵循迄今为止在其他论坛上给出的所有建议，即：

1.  首先发送一个数据包到预期的目的地，然后监听回复
2.  不要使用广播，而是使用 UDP 单播（我可以测试两个设置 isBroadcast 变量）
3.  使用 SilverLight 允许的端口 4502

主页.xaml

```
 <phone:PhoneApplicationPage 
      x:Class="UDPClient.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
      xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
      FontFamily="{StaticResource PhoneFontFamilyNormal}"
      FontSize="{StaticResource PhoneFontSizeNormal}"
      Foreground="{StaticResource PhoneForegroundBrush}"
      SupportedOrientations="Portrait" Orientation="Portrait"
      shell:SystemTray.IsVisible="True">

      <!--LayoutRoot is the root grid where all page content is placed-->
      <Grid x:Name="LayoutRoot" Background="Transparent">
          <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

      <!--TitlePanel contains the name of the application and page title-->
          <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
          <TextBlock x:Name="ApplicationTitle" Text="UDP Socket Application" Style="{StaticResource PhoneTextNormalStyle}"/>
          <TextBlock x:Name="PageTitle" Text="Client" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
          </StackPanel>

          <!--ContentPanel - place additional content here-->
          <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,-8,12,8">
          <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <!-- Fit to content -->
              <ColumnDefinition Width="Auto"/>
              <!-- Fit to content -->
              <ColumnDefinition Width="Auto"/>
              <!-- Fit to content -->
              <ColumnDefinition Width="*"/>
              <!-- Take up remaining space -->
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <!-- Fit to content -->
              <RowDefinition Height="Auto"/>
              <!-- Fit to content -->
              <RowDefinition Height="Auto"/>
              <!-- Fit to content -->
              <RowDefinition Height="*"/>
              <!-- Take up remaining space -->
          </Grid.RowDefinitions>

          <!-- Grid Row 0: Remote Host Input Field >-->
          <TextBlock Grid.Row="0" Grid.Column="0" Text="Host Name:"  
                VerticalAlignment="Center" HorizontalAlignment="Center" 
                FontSize="{StaticResource PhoneFontSizeNormal}" />
          <TextBox x:Name="txtRemoteHost" Grid.Row="0" Grid.Column="1"  Height="70" Width="200" 
              VerticalAlignment="Top" HorizontalAlignment="Left" 
              FontSize="{StaticResource PhoneFontSizeNormal}" Text="192.168.1.3" />

          <!-- Grid Row 1: Echo >-->
          <!-- TextBlock for Echo command label-->
          <TextBlock Grid.Row="1" Grid.Column="0" Text="Text To Echo:" 
                VerticalAlignment="Center" HorizontalAlignment="Center" 
                FontSize="{StaticResource PhoneFontSizeNormal}" />

          <!-- TextBox for Echo command text input-->
          <TextBox x:Name="txtInput" Grid.Row="1" Grid.Column="1" Height="70" Width="200"  
              VerticalAlignment="Top" HorizontalAlignment="Left" 
              FontSize="{StaticResource PhoneFontSizeNormal}" Text="test..." />

          <!-- Button to the right of the input textbox for the Echo command >-->
          <Button x:Name="btnEcho" Grid.Row="1" Grid.Column="2" Height="70"  Width="120" 
              Content="Echo" 
              FontSize="{StaticResource PhoneFontSizeNormal}" Click="btnEcho_Click"/>

          <!-- Grid Row 2: Quote of the Day-->
          <!-- Button for the Quote command >-->
          <Button x:Name="btnGetQuote" Grid.Row="2" Grid.ColumnSpan="4" Height="70" 
              Content="Get Quote of the Day" 
              FontSize="{StaticResource PhoneFontSizeNormal}" Click="btnGetQuote_Click"/>
          <!-- Grid Row 3: Output-->
          <!-- Output TextBox named 'txtOutput' >-->
          <TextBox x:Name="txtOutput" Grid.Row="3" Grid.ColumnSpan="4" Background="Black" BorderBrush="Green" 
              AcceptsReturn="False" Foreground="LightGray" FontFamily="Courier New"  
              IsHitTestVisible="False" FontSize="{StaticResource PhoneFontSizeSmall}" TextWrapping="Wrap" />
          <Button Content="Listen" Grid.Column="1" Grid.ColumnSpan="2" Height="70" HorizontalAlignment="Left" Margin="195,0,0,0" Name="Listenbutton" VerticalAlignment="Top" Width="125" Click="Listenbutton_Click" />
          </Grid>
      </Grid>

      <!--Sample code showing usage of ApplicationBar-->
      <!--<phone:PhoneApplicationPage.ApplicationBar>
          <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
          <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
          <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
          <shell:ApplicationBar.MenuItems>
              <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
              <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
          </shell:ApplicationBar.MenuItems>
          </shell:ApplicationBar>
      </phone:PhoneApplicationPage.ApplicationBar>-->

      </phone:PhoneApplicationPage> 
```

MainPage.xaml.cs

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Net;
  using System.Windows;
  using System.Windows.Controls;
  using System.Windows.Documents;
  using System.Windows.Input;
  using System.Windows.Media;
  using System.Windows.Media.Animation;
  using System.Windows.Shapes;
  using Microsoft.Phone.Controls;
  using System.Net.Sockets;
  using System.Threading;

  namespace UDPClient
  {
  public partial class MainPage : PhoneApplicationPage
  {
  // Constructor
  public MainPage()
  {
  InitializeComponent();
  }

  // Constants
  const int ECHO_PORT = 7;  // The Echo protocol uses port 7 in this sample
  const int QOTD_PORT = 17; // The Quote of the Day (QOTD) protocol uses port 17 in this sample
  const int UDP_PORT = 4502;
  /// <summary>
  /// Handle the btnEcho_Click event by sending text to the echo server and outputting the response
  /// </summary>
  private void btnEcho_Click(object sender, RoutedEventArgs e)
  {
  // Clear the log 
  ClearLog();

  // Make sure we can perform this action with valid data
  if (ValidateRemoteHost() && ValidateInput())
  {
      // Instantiate the SocketClient
      SocketClient client = new SocketClient();
      SocketAsyncEventArgs socketEventArg; 

      // Attempt to send our message to be echoed to the echo server
      Log(String.Format("Sending '{0}' to server ...", txtInput.Text), true);
      string result = client.Send(txtRemoteHost.Text, ECHO_PORT, txtInput.Text, false, out socketEventArg);
      Log(result, false);

      // Receive a response from the echo server
      Log("Requesting Receive ...", true);
      result = client.UDPReceive(ECHO_PORT, false);
      Log(result, false);

      // Close the socket connection explicitly
      client.Close();
  }

  }

  private void Listenbutton_Click(object sender, RoutedEventArgs e)
  {
  // Clear the log 
  ClearLog();

  // Make sure we can perform this action with valid data
  if (ValidateRemoteHost())
  {
      // Instantiate the SocketClient
      SocketClient client = new SocketClient();

      // Receive packets
      string result = client.UDPReceive(UDP_PORT, false);
      Log(result, false);
      // Close the socket connection explicitly
      client.Close();
  }
  }

  /// <summary>
  /// Handle the btnGetQuote_Click event by receiving text from the Quote of the Day (QOTD) server and outputting the response
  /// </summary>
  private void btnGetQuote_Click(object sender, RoutedEventArgs e)
  {
  // Clear the log 
  ClearLog();
  // Receive response from the QOTD server
  Log("nothing...", true);;
  }
  }

  #region UI Validation
  /// <summary>
  /// Validates the txtInput TextBox
  /// </summary>
  /// <returns>True if the txtInput TextBox contains valid data, False otherwise</returns>
  private bool ValidateInput()
  {
  // txtInput must contain some text
  if (String.IsNullOrWhiteSpace(txtInput.Text))
  {
      MessageBox.Show("Please enter some text to echo");
      return false;
  }

  return true;
  }

  /// <summary>
  /// Validates the txtRemoteHost TextBox
  /// </summary>
  /// <returns>True if the txtRemoteHost contains valid data, False otherwise</returns>
  private bool ValidateRemoteHost()
  {
  // The txtRemoteHost must contain some text
  if (String.IsNullOrWhiteSpace(txtRemoteHost.Text))
  {
      MessageBox.Show("Please enter a host name");
      return false;
  }

  return true;
  }
  #endregion

  #region Logging
  /// <summary>
  /// Log text to the txtOutput TextBox
  /// </summary>
  /// <param name="message">The message to write to the txtOutput TextBox</param>
  /// <param name="isOutgoing">True if the message is an outgoing (client to server) message, False otherwise</param>
  /// <remarks>We differentiate between a message from the client and server 
  /// by prepending each line  with ">>" and "<<" respectively.</remarks>
  private void Log(string message, bool isOutgoing)
  {
  string direction = (isOutgoing) ? ">> " : "<< ";
  txtOutput.Text += Environment.NewLine + direction + message;
  }

  /// <summary>
  /// Clears the txtOutput TextBox
  /// </summary>
  private void ClearLog()
  {
  txtOutput.Text = String.Empty;
  }
  #endregion
}
} 
```

套接字客户端.cs

```
 using System;
  using System.Net;
  using System.Windows;
  using System.Windows.Controls;
  using System.Windows.Documents;
  using System.Windows.Ink;
  using System.Windows.Input;
  using System.Windows.Media;
  using System.Windows.Media.Animation;
  using System.Windows.Shapes;
  using System.Net.Sockets;
  using System.Threading;
  using System.Text;

  namespace UDPClient
  {
  public class SocketClient
  {
  // Cached Socket object that will be used by each call for the lifetime of this class
  Socket _socket = null;
  // Signaling object used to notify when an asynchronous operation is completed
  static ManualResetEvent _clientDone = new ManualResetEvent(false);
  // Define a timeout in milliseconds for each asynchronous call. If a response is not received within this 
  // timeout period, the call is aborted.
  const int TIMEOUT_MILLISECONDS = 1000;
  // The maximum size of the data buffer to use with the asynchronous socket methods
  const int MAX_BUFFER_SIZE = 2048;
  bool isHasSent = false;
  int errorCode = 0;

  /// <summary>
  /// SocketClient Constructor
  /// </summary>
  public SocketClient()
  {
  // The following creates a socket with the following properties:
  // AddressFamily.InterNetwork - the socket will use the IP version 4 addressing scheme to resolve an address
  // SocketType.Dgram - a socket that supports datagram (message) packets
  // PrototcolType.Udp - the User Datagram Protocol (UDP)
  _socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
  }

  /// <summary>
  /// Send the given data to the server using the established connection
  /// </summary>
  /// <param name="serverName">The name of the server</param>
  /// <param name="portNumber">The number of the port over which to send the data</param>
  /// <param name="data">The data to send to the server</param>
  /// <returns>The result of the Send request</returns>
  public string Send(string serverName, int portNumber, string data, bool isBroadcast, out SocketAsyncEventArgs socketEventArg)
  {
  string response = "Operation Timeout";
  // Create SocketAsyncEventArgs context object

  // We are re-using the _socket object that was initialized in the Connect method
  if (_socket != null)
  {
      socketEventArg = new SocketAsyncEventArgs();
      // Set properties on context object

      System.Diagnostics.Debug.WriteLine("Send(): setting remoteEndPoint");
      if (isBroadcast)
      socketEventArg.RemoteEndPoint = new IPEndPoint(IPAddress.Broadcast, portNumber);
      else
      socketEventArg.RemoteEndPoint = new DnsEndPoint(serverName, portNumber);
      System.Diagnostics.Debug.WriteLine("Send(): remoteEndPoint correctly set");

      // Inline event handler for the Completed event.
      // Note: This event handler was implemented inline in order to make this method self-contained.
      socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
      {
      response = e.SocketError.ToString();
      // Unblock the UI thread
      _clientDone.Set();

      isHasSent = true; 
      });

      // Add the data to be sent into the buffer
      byte[] payload = Encoding.UTF8.GetBytes(data);
      socketEventArg.SetBuffer(payload, 0, payload.Length);

      // Sets the state of the event to nonsignaled, causing threads to block
      _clientDone.Reset();

      // Make an asynchronous Send request over the socket
      _socket.SendToAsync(socketEventArg);

      // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.
      // If no response comes back within this time then proceed
      _clientDone.WaitOne(TIMEOUT_MILLISECONDS);
  }
  else
  {
      socketEventArg = null;
      response = "Socket is not initialized";
  }

  return response;
  }

  public String UDPReceive(int portNumber, bool isBroadcast)
  {
  SocketAsyncEventArgs socketEventArg;

  System.Diagnostics.Debug.WriteLine("calling Send(\"server\", portNumber, \" \", isBroadcast, out socketEventArg)");
  Send("servern", portNumber, " ", !isBroadcast, out socketEventArg);
  Thread.Sleep(1000);

  while (!isHasSent)
  {
      Thread.Sleep(1);
  }
  System.Diagnostics.Debug.WriteLine("calling Receive(portNumber, isBroadcast, socketEventArg)");
  return Receive(portNumber, isBroadcast, out socketEventArg);
  } 

  /// <summary>
  /// Receive data from the server
  /// </summary>
  /// <param name="portNumber">The port on which to receive data</param>
  /// <returns>The data received from the server</returns>
  public string Receive(int portNumber, bool isBroadcast, out SocketAsyncEventArgs socketEventArg)
  {
  string response = "Operation Timeout";

  // We are receiving over an established socket connection
  if (_socket != null)
  {
      // Create SocketAsyncEventArgs context object
      socketEventArg = new SocketAsyncEventArgs();

      System.Diagnostics.Debug.WriteLine("Receive(): setting remoteEndPoint");
      if (isBroadcast)
      socketEventArg.RemoteEndPoint = new IPEndPoint(IPAddress.Broadcast, portNumber);
      else 
      socketEventArg.RemoteEndPoint = new IPEndPoint(IPAddress.Any, portNumber);
      System.Diagnostics.Debug.WriteLine("Receive(): remoteEndPoint correctly set");

      // Setup the buffer to receive the data
      socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);
      System.Diagnostics.Debug.WriteLine("Receive(): SetBuffer() correctly called");

      // Inline event handler for the Completed event.
      // Note: This even handler was implemented inline in order to make this method self-contained.
      socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
      {
      if (e.SocketError == SocketError.Success)
      {
          System.Diagnostics.Debug.WriteLine("Receive(): SocketError.Success");
          // Retrieve the data from the buffer
          response = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
          response = response.Trim('\0');
      }
      else
      {
          System.Diagnostics.Debug.WriteLine("Receive(): SocketError.Error");
          response = e.SocketError.ToString();
      }
      System.Diagnostics.Debug.WriteLine("Receive(): Set()");
      _clientDone.Set();
      });

      System.Diagnostics.Debug.WriteLine("Receive(): Reset()");
      // Sets the state of the event to nonsignaled, causing threads to block
      _clientDone.Reset();

      try
      {
      // Make an asynchronous Receive request over the socket
      _socket.ReceiveFromAsync(socketEventArg);
      }
      catch (SocketException sockEx)
      {
      Console.WriteLine(sockEx.Message);
      Console.WriteLine(sockEx.ErrorCode);
      Console.WriteLine(sockEx.StackTrace);
      Console.ReadLine();
      System.Diagnostics.Debug.WriteLine("errorCode=" + errorCode + " " + sockEx.Message + sockEx.ErrorCode + sockEx.StackTrace);
      errorCode = 11;
      response += "errorCode=" + errorCode + " " + sockEx.Message + sockEx.ErrorCode + sockEx.StackTrace;
      }
      catch (Exception ex)
      {
      Console.WriteLine(ex.Message);
      Console.WriteLine(ex.StackTrace);
      Console.ReadLine();
      System.Diagnostics.Debug.WriteLine("errorCode="+errorCode+" "+ex.Message + ex.StackTrace);
      errorCode = 22;
      response += "errorCode="+errorCode+" "+ex.Message + ex.StackTrace;
      }
      // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.
      // If no response comes back within this time then proceed
      System.Diagnostics.Debug.WriteLine("Receive(): _clientDone.WaitOne(TIMEOUT_MILLISECONDS)");
      _clientDone.WaitOne(TIMEOUT_MILLISECONDS);
  }
  else
  {
      socketEventArg = null;
      response = "Socket is not initialized";
  }
  System.Diagnostics.Debug.WriteLine("Receive(): response = " + response);
  return response;
  }

  /// <summary>
  /// Closes the Socket connection and releases all associated resources
  /// </summary>
  public void Close()
  {
  if (_socket != null)
  {
      _socket.Close();
  }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:49:40.903

Windows Phone 的 Silverlight 中不需要端口 4502，但仅在浏览器的 Silverlight 应用程序中才需要端口 4502。我正在检查您的代码，因为我有同样的问题。

# php - PHP将服务器时间转换为EST时间

> ID：11539924
> 
> 赞同：1
> 
> 时间：2012-07-18T11:08:57.490
> 
> 标签：php, html

如何将服务器时间转换为 EST 时间。

我使用 date("Ymd H:i:s") 来存储服务器时间。我想将其转换为 EST 时间。

```
$dt = new DateTime($timestamp);

$dt->setTimeZone(new DateTimeZone('EST'));

echo $dt->format('H:i:s'); 
```

但它没有显示正确的结果。请帮我。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T16:59:40.717

尝试这个：

```
<?php
date_default_timezone_set('America/Chicago'); //server time zone
echo 'Current Server Time:' . date('m/d/Y H:i:s a') ;
$EasternTimeStamp =mktime(date('H')-6,date('i'),date('s'),date("m"),date("d"),date("Y"));
echo '<br />';
echo 'Current EST Time ' . date('m/d/Y H:i:s a',$EasternTimeStamp) ;
?> 
```

[键盘演示>>](http://codepad.viper-7.com/Xufyoo)

# joomla - joomla 2.5中自定义模块的分页

> ID：11539926
> 
> 赞同：2
> 
> 时间：2012-07-18T11:09:05.663
> 
> 标签：joomla, module, pagination, joomla2.5

我们已经创建了用于搜索的自定义模块，但分页不起作用。我们使用以下代码进行分页。

```
 jimport( 'joomla.html.pagination' );
    $pagNav = new JPagination(6, 0, 5);

    $pageNav = new JPagination( $db->loadResult(), $lim0, $lim );

    echo $pagNav->getListFooter(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:26:06.767

尝试

```
jimport( 'joomla.html.pagination' );

$pageNav = new JPagination( $db->loadResult(), $lim0, $lim );

echo $pageNav->getListFooter(); 
```

我不确定你的`pagNav`变量的目的是什么，但它确实看起来不合适。`$lim0`当然，这也是假设您设置`$lim`正确。

# javascript - Javascript定位树节点

> ID：11539928
> 
> 赞同：2
> 
> 时间：2012-07-18T11:09:11.233
> 
> 标签：javascript, layout, tree, positioning

我需要知道这棵树的每个节点上的位置，我正在使用我正在尝试的 javaScript，但在重叠/间距方面仍然存在问题

![一只忙碌的猫](../Images/8ea90b43065d7a450225a72b902a4ee9.png) ！[家谱]

我有每个节点的子列表。
A=> C, B, D
C=> E, F, G
等等。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:06:11.703

我在这里找到了我的解决方案（[tree_layout_lw.py](http://new-vistrails.googlecode.com/svn-history/r46/core/tree_layout_lw.py)）。只需将此代码转换为 javascript，它就可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:41:16.557

正如你所提到的结构，我能想到的一个想法是：

假设您有一个 X per Y 的 2D 空间，即左上角 (0,0)，右下角 (X,Y)

首先，您将 A 定位在第二行的坐标 (X/2, 1) 上，在表格的中间。

然后，左孩子将在水平 A 坐标的一半，即 (X/4, 3)，并垂直向下有 2 个单元格。A 的中间孩子将有 (X/2, 3)，A 的右孩子将有 (3*X/4, 3)。

因此，每个孩子都将根据其父母的位置进行定位。

很好的问题要解决，如果你有smth。我很想看看。

# python - webdriver 等待多个元素之一出现

> ID：11539930
> 
> 赞同：11
> 
> 时间：2012-07-18T11:09:18.877
> 
> 标签：python, selenium, webdriver, selenium-webdriver, wait

有没有办法让 a`webDriverWait`等待多个元素中的一个出现并根据出现的元素采取相应的行动？

目前我`WebDriverWait`在 try 循环中执行一个操作，如果发生超时异常，我将运行等待其他元素出现的替代代码。这似乎很笨拙。有没有更好的办法？这是我的（笨拙的）代码：

```
try:
    self.waitForElement("//a[contains(text(), '%s')]" % mime)
    do stuff ....
except TimeoutException:
    self.waitForElement("//li[contains(text(), 'That file already exists')]")
    do other stuff ... 
```

它涉及等待整整 10 秒，然后再查看系统上是否已存在文件的消息。

该函数`waitForElement`只是执行一些`WebDriverWait`调用，如下所示：

```
def waitForElement(self, xPathLocator, untilElementAppears=True):
    self.log.debug("Waiting for element located by:\n%s\nwhen untilElementAppears is set to %s" % (xPathLocator,untilElementAppears))
    if untilElementAppears:
        if xPathLocator.startswith("//title"):
            WebDriverWait(self.driver, 10).until(lambda driver : self.driver.find_element_by_xpath(xPathLocator))
        else:
            WebDriverWait(self.driver, 10).until(lambda driver : self.driver.find_element_by_xpath(xPathLocator).is_displayed())
    else:   
        WebDriverWait(self.driver, 10).until(lambda driver : len(self.driver.find_elements_by_xpath(xPathLocator))==0) 
```

有人有任何建议以更有效的方式完成此任务吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T23:00:15.543

创建一个函数，将标识符映射到 xpath 查询并返回匹配的标识符。

```
def wait_for_one(self, elements):
    self.waitForElement("|".join(elements.values())
    for (key, value) in elements.iteritems():
        try:
            self.driver.find_element_by_xpath(value)
        except NoSuchElementException:
            pass
        else:
            return key

def othermethod(self):

    found = self.wait_for_one({
        "mime": "//a[contains(text(), '%s')]",
        "exists_error": "//li[contains(text(), 'That file already exists')]"
    })

    if found == 'mime':
        do stuff ...
    elif found == 'exists_error':
        do other stuff ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:26:32.563

像这样的东西：

```
def wait_for_one(self, xpath0, xpath1):
    self.waitForElement("%s|%s" % (xpath0, xpath1))
    return int(self.selenium.is_element_present(xpath1)) 
```

# python - 从文件直接读取到二维列表python

> ID：11539938
> 
> 赞同：3
> 
> 时间：2012-07-18T11:09:41.747
> 
> 标签：python, list, logging, 2d

这是我的 .log 文件的内容

> 当前日期和时间、翻译、经过时间、响应时间、翻译速率、
> 
> 7 月 18 日星期三 10:03:1, 5, 0.37 sec, 0.00 sec, 13.51 t/s,
> 
> 7 月 18 日星期三 10:03:5, 5, 0.45 sec, 0.00 sec, 11.11 t/s,
> 
> 7 月 18 日星期三 10:04:0, 5, 0.91 sec, 0.00 sec, 5.49 t/s,
> 
> 7 月 18 日星期三 10:22:4, 12, 0.79 sec, 0.00 sec, 15.19 t/s,
> 
> 7 月 18 日星期三 10:23:0, 12, 0.56 sec, 0.00 sec, 21.43 t/s,
> 
> 7 月 18 日星期三 10:23:1, 12, 0.53 sec, 0.00 sec, 22.64 t/s,

我想将这些值直接放入 python 中的二维列表中，但我找到的每个解决方案都只是为每一行创建一个列表项。我希望列表槽的值是一个逗号分隔值。EG 列表中的第 3 行第 2 列将存储 5。这可能很简单，但我一直在搜索和搜索，但没有发现以这种方式执行此操作。非常感谢任何帮助。干杯。

更新：

Traceback（最近一次调用最后一次）：文件“StressTestCompare.py”，第 45 行，打印数据 [2][0]
IndexError：列表索引超出范围

[['当前日期和时间', '\tTrans', '\tElapsed Time', '\tResponse Time', '\tTrans Rate', '\tThroughput', '\tConc', '\tOKAY', '\tFailed ', '\t数据传输', '\tIP地址', ''], ['Wed Jul 18 10:03:1', '\t5', '\t0.37 sec', '\t0.00 sec' , '\t13.51 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2\. 55:8080'], [], ['Wed Jul 18 10:03:5', '\t5', '\t0.45 sec', '\t0.00 sec', '\t11.11 t/s ', '\t0.00 b/s', '\t0.00', '\t0', '\t5', '\t0 字节', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:04:0', '\t5', '\t0.91 sec', '\t0.00 sec', '\t5.49 t/s'、'\t1609.89 b/s'、'\t0.00'、'\t5'、'\t0'、'\t1465 字节'、'\t10.2.2.57:8080'] , [], ['Wed Jul 18 10:22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\t15.19 t/s', '\t0 .00 b/s', '\t0.00', '\t0', '\t0', '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', '\t0.00 b/s', '\ t0.00', '\t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\ t12', '\t0.53 sec', '\t0.00 sec', '\t22.64 t/s', '\t0.00 b/s', '\t0.00', '\t0' , '\t0', '\t0 字节', '\t10.2.2.57:8080'], []]'\t1609.89 b/s', '\t0.00', '\t5', '\t0', '\t1465 字节', '\t10.2.2.57:8080'], [], [' 7 月 18 日星期三 10:22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\t15.19 t/s', '\t0.00 b/s' , '\t0.00', '\t0', '\t0', '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0' , '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', ' \t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0 .53 秒'，'\t0.00 秒'，'\t22.64 t/s'，'\t0.00 b/s'，'\t0.00'，'\t0'，'\t0'， '\t0 字节', '\t10.2.2.57:8080'], []]'\t1609.89 b/s', '\t0.00', '\t5', '\t0', '\t1465 字节', '\t10.2.2.57:8080'], [], [' 7 月 18 日星期三 10:22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\t15.19 t/s', '\t0.00 b/s' , '\t0.00', '\t0', '\t0', '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0' , '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', ' \t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0 .53 秒'，'\t0.00 秒'，'\t22.64 t/s'，'\t0.00 b/s'，'\t0.00'，'\t0'，'\t0'， '\t0 字节', '\t10.2.2.57:8080'], []]89 b/s', '\t0.00', '\t5', '\t0', '\t1465 bytes', '\t10.2.2.57:8080'], [], ['Wed Jul 18 10 :22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\t15.19 t/s', '\t0.00 b/s', '\t0 .00', '\t0', '\t0', '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12 ', '\t0.56 秒', '\t0.00 秒', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec' , '\t0.00 sec', '\t22.64 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.57:8080'], []]89 b/s', '\t0.00', '\t5', '\t0', '\t1465 bytes', '\t10.2.2.57:8080'], [], ['Wed Jul 18 10 :22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\t15.19 t/s', '\t0.00 b/s', '\t0 .00', '\t0', '\t0', '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12 ', '\t0.56 秒', '\t0.00 秒', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec' , '\t0.00 sec', '\t22.64 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.57:8080'], []]'\t5', '\t0', '\t1465 bytes', '\t10.2.2.57:8080'], [], ['Wed Jul 18 10:22:4', '\t12', '\ t0.79 秒'，'\t0.00 秒'，'\t15.19 t/s'，'\t0.00 b/s'，'\t0.00'，'\t0'，'\t0' , '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0 .00 秒'、'\t21.43 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t12'、'\t0 字节'、'\ t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22\. 64 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57:8080'] , []]'\t5', '\t0', '\t1465 bytes', '\t10.2.2.57:8080'], [], ['Wed Jul 18 10:22:4', '\t12', '\ t0.79 秒'，'\t0.00 秒'，'\t15.19 t/s'，'\t0.00 b/s'，'\t0.00'，'\t0'，'\t0' , '\t0 bytes', '\t10.2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0 .00 秒'、'\t21.43 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t12'、'\t0 字节'、'\ t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22\. 64 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57:8080'] , []]'\t10.2.2.57:8080'], [], ['Wed Jul 18 10:22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\ t15.19 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.55:8080 '], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', ' \t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed 7 月 18 日 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22.64 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.57:8080'], []]'\t10.2.2.57:8080'], [], ['Wed Jul 18 10:22:4', '\t12', '\t0.79 sec', '\t0.00 sec', '\ t15.19 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.55:8080 '], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', ' \t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 bytes', '\t10.2.2.56:8080'], [], ['Wed 7 月 18 日 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22.64 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t0', '\t0 字节', '\t10.2.2.57:8080'], []]00 秒'、'\t15.19 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10 .2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 字节', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22.64 t/s', '\t0\. 00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57:8080']、[]]00 秒'、'\t15.19 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10 .2.2.55:8080'], [], ['Wed Jul 18 10:23:0', '\t12', '\t0.56 sec', '\t0.00 sec', '\t21.43 t/s', '\t0.00 b/s', '\t0.00', '\t0', '\t12', '\t0 字节', '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', '\t22.64 t/s', '\t0\. 00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57:8080']、[]]'\t0.00 秒'、'\t21.43 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t12'、'\t0 字节' , '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', ' \t22.64 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57： 8080'], []]'\t0.00 秒'、'\t21.43 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t12'、'\t0 字节' , '\t10.2.2.56:8080'], [], ['Wed Jul 18 10:23:1', '\t12', '\t0.53 sec', '\t0.00 sec', ' \t22.64 t/s'、'\t0.00 b/s'、'\t0.00'、'\t0'、'\t0'、'\t0 字节'、'\t10.2.2.57： 8080'], []]

使用 print repr(data) 出来是这样的，有没有可能得到更容易阅读的格式？即使从我所看到的情况来看，它看起来仍然存在，所以我不知道为什么我会收到超出范围的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:12:45.050

[csv](http://docs.python.org/library/csv.html)模块为此派上用场：

```
import csv

with open('data.txt', 'rb') as inf:
     data = list(csv.reader(inf, skipinitialspace=True))
     data = [i for i in data if i] ## add to deal w/ blank lines in data file 
```

会给你变量`data`的内容：

```
[['Current Date & Time',
  'Trans',
  'Elapsed Time',
  'Response Time',
  'Trans Rate',
  ''],
 ['Wed Jul 18 10:03:1', '5', '0.37 sec', '0.00 sec', '13.51 t/s', ''],
 ['Wed Jul 18 10:03:5', '5', '0.45 sec', '0.00 sec', '11.11 t/s', ''],
 ['Wed Jul 18 10:04:0', '5', '0.91 sec', '0.00 sec', '5.49 t/s', ''],
 ['Wed Jul 18 10:22:4', '12', '0.79 sec', '0.00 sec', '15.19 t/s', ''],
 ['Wed Jul 18 10:23:0', '12', '0.56 sec', '0.00 sec', '21.43 t/s', ''],
 ['Wed Jul 18 10:23:1', '12', '0.53 sec', '0.00 sec', '22.64 t/s', '']] 
```

并且`data[2][1]`（不是`data[3][2]`由于*从零开始的*索引）会给你

```
'5' 
```

一个字符串，您可以将其转换为`5`整数`int(data[2][1])`

**更新**：

添加`data = [i for i in data if i]`以处理输入中可能导致 OP 更新后出现问题的空白行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:21:02.140

看看[`pandas`](http://pandas.pydata.org/)：

```
>>> import pandas
>>> a = pandas.read_csv('input.csv')
>>> print a
  Current Date & Time   Trans  Elapsed Time  Response Time  Trans Rate  Unnamed: 5
0  Wed Jul 18 10:03:1       5      0.37 sec       0.00 sec   13.51 t/s         NaN
1  Wed Jul 18 10:03:5       5      0.45 sec       0.00 sec   11.11 t/s         NaN
2  Wed Jul 18 10:04:0       5      0.91 sec       0.00 sec    5.49 t/s         NaN
3  Wed Jul 18 10:22:4      12      0.79 sec       0.00 sec   15.19 t/s         NaN
4  Wed Jul 18 10:23:0      12      0.56 sec       0.00 sec   21.43 t/s         NaN
5  Wed Jul 18 10:23:1      12      0.53 sec       0.00 sec   22.64 t/s         NaN

>>> print a[' Trans'] * 2
0    10
1    10
2    10
3    24
4    24
5    24
Name:  Trans 
```

# c# - 在网格中按日期显示数据时出错

> ID：11539939
> 
> 赞同：0
> 
> 时间：2012-07-18T11:09:48.627
> 
> 标签：c#

我试图按日期显示数据，但我没有得到确切的答案，请帮助我..

```
public void gettoday()
    {
        con.Open();
        {
            string strview = @"select MRNO,MaterialCode,Description,Specification,
                              Category as Cat,Source as Sor,Population as Pop, StockInStores as Stock, MRRating as Rating,PreparedBy,PreparedDate,CheckedBy,CheckedDate,ApprovedBy,ApprovedDate  
                         from tbl_KKSMaterialRaise 
                         where PreparedDate between (getdate()-1) and (getdate()+1)";
            SqlCommand cd = new SqlCommand(strview, con);
            SqlDataReader reader = cd.ExecuteReader();

            GridView1.DataSource = reader;
            GridView1.DataBind();
        }
        con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:15:58.173

您的`SQL`查询似乎不正确。所以你想选择昨天和明天之间的记录。

那么这应该工作（假设`SQL-Server`因为你使用[`GetDate`](http://msdn.microsoft.com/en-us/library/ms188383)）：

```
WHERE PreparedDate BETWEEN DateAdd(d,-1,GetDate()) AND DateAdd(d,+1,GetDate()) 
```

*   [`DATEADD (Transact-SQL)`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

**编辑**：除此之外，您应该始终使用`using-statement`（对于任何实现的对象`IDisposable`）以确保即使出现异常也关闭连接：

```
const string strview = @"select MRNO,MaterialCode,Description,Specification, Category as Cat,Source as Sor,Population as Pop, StockInStores as Stock, MRRating as Rating,PreparedBy,PreparedDate,CheckedBy,CheckedDate,ApprovedBy,ApprovedDate  
                         FROM tbl_KKSMaterialRaise 
                         WHERE PreparedDate BETWEEN DateAdd(d,-1,GetDate()) AND DateAdd(d,+1,GetDate())";
// don't use global connection objects
using(var con = new SqlConnection(connectionString))
using(var cmd = new SqlCommand(strview, con))
{
    con.Open();
    GridView1.DataSource = cmd.ExecuteReader();
    GridView1.DataBind();
} 
```

# regex - 正则表达式如何用字符串中的实际换行符替换 \r\n

> ID：11539945
> 
> 赞同：4
> 
> 时间：2012-07-18T11:10:11.537
> 
> 标签：regex

因为 \r\n 是正则表达式中的“特殊”字符，所以我无法确定我实际需要在我的表达式中放入什么。

基本上我有一个看起来像...的字符串

```
bla\r\nbla\r\nbla 
```

..我想把它改成...

```
bla
bla  
bla 
```

...使用正则表达式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T11:17:30.590

`\`是正则表达式中的转义字符，可用于转义自身，这意味着您可以编写`\\n`以匹配文本`\n`。

使用该模式`\\r\\n`并替换为`\r\n`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:21:51.867

您不一定需要正则表达式（除非这不是您要替换的唯一内容），但 \r\n 是大多数正则表达式变体的方法。

例子：

*   PHP

    *   `$str = preg_replace("/\\r\\n/", "\r\n", $str);`或者
    *   `$str = str_replace('\r\n', "\r\n", $str);`（或`"\\r\\n"`对于第一个论点）
*   红宝石

    *   `str = str.gsub(/\\r\\n/, "\r\n")`或者
    *   `str = str.gsub('\r\n', "\r\n")`

# jboss - Arquillian 和 jboss-4.2.3.GA

> ID：11539951
> 
> 赞同：0
> 
> 时间：2012-07-18T11:10:25.573
> 
> 标签：jboss, jboss-arquillian

我在一个 jboss-4.2.3.GA 项目上工作。它是一个旧项目，但我们无法升级到新服务器。

我正在尝试将 Arquillian 用于 JPA ..

我们在 JPA 的 pom 中使用以下条目

```
 <dependency>
   <groupId>com.jboss</groupId>
   <artifactId>ejb3-persistence.jar</artifactId>
   <version>4.2.3</version>
   <scope>provided</scope>
  </dependency>
  <dependency>
     <groupId>hibernate</groupId>
      <artifactId>hibernate3</artifactId>
      <version>3.2.4.SP1</version>
      <scope>provided</scope>
   </dependency> 
```

我正在尝试配置 Arquillian，但我遇到了一些问题，例如 nosuchmethod found 或者有时没有设置默认容器。

任何人都可以帮我设置我需要设置的容器以及任何依赖项设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T10:04:15.520

将 arquillian-bom 添加到 pom 的 dependencyManagement 部分，请参阅入门指南：[http ://arquillian.org/guides/getting_started/#add_the_arquillian_apis](http://arquillian.org/guides/getting_started/#add_the_arquillian_apis)

这将更新 jbossas 适配器对 arquillian 核心的依赖版本。没有它，您将运行 Core 1.0.1.Final 和 Core X 的混合（无论适配器恰好是当前编译的，它可能与 1.0.1.Final Core 工件兼容，也可能不兼容）。

# extjs - 有没有办法可以在 store.load 中传递 xml、start、limit？

> ID：11539955
> 
> 赞同：0
> 
> 时间：2012-07-18T11:10:32.010
> 
> 标签：extjs

我`m new to extjs,I need to pass a xml(xml data that`正在加载网格）、起始值和限制。如何在“store.load”中执行此操作？？？

我实际上需要在网格中显示数据，带有当前页码和限制。

有没有办法？？？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:19:16.090

您只需要设置[页面大小](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-pageSize)，然后使用[store.loadPage()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-loadPage)方法。

请记住，ExtJS 中集成了一个不错的数据网格[分页工具栏](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging)

# asp.net - 在IIS 7.5本地部署asp.net网站

> ID：11539963
> 
> 赞同：0
> 
> 时间：2012-07-18T11:11:03.690
> 
> 标签：asp.net, windows-7, iis-7.5

在 11s 7.5 中部署网站时出现此错误：

```
Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 16:     <compilation debug="true" targetFramework="4.0" />
Line 17: 
Line 18:     <authentication mode="Forms">
Line 19:       <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
Line 20:     </authentication> 
```

源文件：C:\Users*\Documents\Visual Studio 2010\Projects\web\web\web.config 行：18

我正在尝试在本地部署我的网站进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:14:54.197

查看以下解决方案：

1.  删除 bin 和 obj 文件夹，运行 Clean Solution 并重新构建，错误消失。

2.  检查站点正在运行的应用程序池，以确保应用程序池使用的是 .NET 4.0 Framework（而不是 .NET 2.0 Framework）。

# python - 覆盖导入，显示导入模块的模块名称

> ID：11539971
> 
> 赞同：4
> 
> 时间：2012-07-18T11:11:20.193
> 
> 标签：python, python-import

> **可能重复：**
> [知道文件名：line_no 导入到 my_module 的位置](https://stackoverflow.com/questions/5603321/know-filenameline-no-where-an-import-to-my-module-was-made)

我想找出哪些模块正在导入我的示例模块“foo”：

foo.py

```
# pseudocode, this should be triggered when "foo" is imported
on_import():
    print "foo is imported by module X" 
```

酒吧.py

```
# this should print "foo is imported by module bar"
import foo 
```

我该如何实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:02:17.553

@Wooble你是对的

这是来自[know filename:line_no 的解决方案，其中对 my_module 进行了导入](https://stackoverflow.com/questions/5603321/know-filenameline-no-where-an-import-to-my-module-was-made)

```
import inspect
last_frame = inspect.stack()[1]
print 'Module imported from file:line_no = %s:%i' % last_frame[1:3] 
```

# vim - 隐藏符号的问题

> ID：11539975
> 
> 赞同：2
> 
> 时间：2012-07-18T11:11:28.187
> 
> 标签：vim, syntax

我有`&concealcursor=nc` ，这很好用，除了一件事：比如说，我有以下一行：“ `foo bar ~*baz*~ foo`”，并且符号`~`和`*`被隐藏了。我将光标移过这条线，光标停留在隐藏的符号上。

这并不是更糟糕的事情：比如说，我想选择 word `baz`。我将光标放在这个单词上，开始选择，现在我看到光标不在 letter 处`b`，而是在 symbol 处`~`。

我必须仔细重新选择它，以确保我选择了我想要的。这真的很烦人。

我相信 Vim 应该处理这个问题并跳过这些隐藏的符号，以使其清楚。有没有办法做到这一点？

# android - 如何在 Android 中翻转 ImageView？

> ID：11539976
> 
> 赞同：8
> 
> 时间：2012-07-18T11:11:33.277
> 
> 标签：android, android-imageview

我正在开发一个应用程序，我需要翻转`ImageView`触摸并将控制权转移到第二个活动。

请帮我。

我尝试了很多，但我没有成功。

谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-17T18:21:16.607

这是一个很好的翻转图像库：

[https://github.com/castorflex/FlipImageView](https://github.com/castorflex/FlipImageView)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-24T16:32:32.560

您不需要使用任何库，您可以尝试以下简单的功能来水平或垂直翻转图像视图，

```
 final static int FLIP_VERTICAL = 1;
    final static int FLIP_HORIZONTAL = 2;
    public static Bitmap flip(Bitmap src, int type) {
            // create new matrix for transformation
            Matrix matrix = new Matrix();
            // if vertical
            if(type == FLIP_VERTICAL) {
                matrix.preScale(1.0f, -1.0f);
            }
            // if horizonal
            else if(type == FLIP_HORIZONTAL) {
                matrix.preScale(-1.0f, 1.0f);
            // unknown type
            } else {
                return null;
            }

            // return transformed image
            return Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
        } 
```

您必须传递与要翻转的图像视图关联的位图和翻转类型。例如，

```
ImageView myImageView = (ImageView) findViewById(R.id.myImageView);
Bitmap bitmap = ((BitmapDrawable)myImageView.getDrawable()).getBitmap(); // get bitmap associated with your imageview
myImageView .setImageBitmap(flip(bitmap ,FLIP_HORIZONTAL)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T11:33:45.107

您可以使用适用于 Android 3.0 及更高版本的动画 API。

如果你需要它 pre-honeycomb，你可以使用一个名为[NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)的库。

查看[此答案](https://stackoverflow.com/a/8109197/1117415)以获取要使用的确切代码。

# .htaccess - htaccess 301 重定向规则从 URL 中删除部分查询字符串，但保留其余部分

> ID：11539981
> 
> 赞同：2
> 
> 时间：2012-07-18T11:11:49.283
> 
> 标签：.htaccess, redirect, mod-rewrite, query-string

我正在尝试找到一个重定向，该重定向将从 URL 中删除部分查询字符串，但保留剩余的查询字符串。

现在我可以通过一个 URL 重定向很好地做到这一点，但是有数百个这样的 URL。所以我试图找到一个规则，可以一举为所有这些人做到这一点，所以我不必为每个人都制定一个规则，任何新的规则都会自动重定向。

我正在尝试`start=0&`从 URL 中删除，以下是一些示例：

```
www.example.com/products.php?start=0&category=Pens%20Ballpens 
```

也重定向：

```
www.example.com/products.php?category=Pens%20Ballpens 
```

和

```
www.example.com/products.php?start=0&category=Jackets 
```

也重定向：

```
www.example.com/products.php?category=Jackets 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:52:52.003

尝试将此添加到文档根目录中的 htaccess 中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)&?start=0(.*)$ 
RewriteRule ^/?products\.php$ /products.php?%1%2 [R=301,NE] 
```

# java - J2ME 网络服务

> ID：11539982
> 
> 赞同：3
> 
> 时间：2012-07-18T11:11:51.373
> 
> 标签：java, web-services, java-me

我已经创建了 J2me 应用程序（原型），现在我必须向它添加用 .Net 编写的 Web 服务。

怎么做？我正在寻找开发 j2me 客户端的过程，我可以在其中传递与 .Net Web 服务中类似的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:20:15.093

正如 sreehari 所解释的，首先您需要将 JAX-RPC API 包含在您的项目中。完成后，接下来就是如何调用 Web 服务。

Web Service 可以用任何语言创建，例如 Java (servlets)、PHP 或 .net，我使用过这三种语言。对于 Java 和 PHP，您可以直接调用 Web 服务，而对于 .net，您需要创建存根。

[创建存根的步骤](https://stackoverflow.com/q/4256256/996493)。一旦创建了这些存根，您就可以像在代码中调用其他方法一样简单地调用它并传递参数（如果需要）。

也看看这个问题[How to use web service in J2ME application ？](https://stackoverflow.com/q/4897165/996493)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:25:05.897

您将需要使用 JAX-RPC API 来为 Web 服务创建客户端。服务以哪种语言实现并不重要。从 J2ME 的角度来看，我不确定限制。

# csv - 将两个列表合并成csv

> ID：11539985
> 
> 赞同：0
> 
> 时间：2012-07-18T11:12:03.830
> 
> 标签：csv, sh

我有两个文件，a.txt 和 b.txt。比方说：

`a.txt`包含：

```
123
234
345
456 
```

并`b.txt`包含：

```
012
023
034
045 
```

我需要将它们组合成以下内容：

```
123,012
234,023
345,034
456,045 
```

关于如何在基本 sh 中做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:38:21.727

最简单的方法是使用[`paste`](http://www.manpagez.com/man/1/paste/)命令。

```
$ paste -d"," a.txt b.txt
123,012
234,023
345,034
456,045 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:04:21.787

正如 Shawn 所指出的，`paste`绝对是正确使用的工具。如果您想严格在 shell 中执行此操作：

```
while read a; read -u 3 b; do echo $a,$b; done < a.txt 3< b.txt 
```

# ip - 每个IP只有一个MAC地址？

> ID：11539986
> 
> 赞同：0
> 
> 时间：2012-07-18T11:12:07.693
> 
> 标签：ip, protocols

我读了一本关于 IP 和 MAC 地址的书。

据我了解，我们使用 ARP 来查找 PC 的 MAC 地址。

我的问题是每个IP地址是否只有一个MAC地址？如果是这样，为什么我们需要 IP 地址？为什么我们不能轻易去MAC地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:21:18.363

每个 IP 地址应该只有一个 MAC 地址，但 MAC 地址永远不会离开子网，并且 MAC 地址与子网外的路由无关。仅给定 MAC 地址，您无法说明数据包应从子网外部的何处发送。把它想象成一个人的名字。即使它是独一无二的，它也不会帮助您找到它们。您需要查找街道地址 (ARP) 并使用地图（路由表）来确定如何到达那里。然后，一旦您到达正确的房屋（子网），您只需将所有邮件倾倒在柜台上，然后让每个人都拿起上面有他们姓名（MAC 地址）的邮件。