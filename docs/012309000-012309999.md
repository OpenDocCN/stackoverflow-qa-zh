# StackOverflow 问答 12309000-12309999

# backbone.js - 相对 url 在骨干网中不起作用

> ID：12309002
> 
> 赞同：1
> 
> 时间：2012-09-06T21:58:21.267
> 
> 标签：backbone.js

我遇到的问题是，当我单击网站上具有相对 URL 的链接或按钮时，我收到 404 错误，因为它将链接设置为根

前任

我的路由器设置如下：

```
define([
'jquery',
'underscore',
'backbone',
'views/home/main',
'views/projects/list',
'views/users/list'
], function($, _, Backbone, mainHomeView, projectListView, userListView ){

var AppRouter = Backbone.Router.extend({
   routes: {
       'projects': 'showProjects',
       'users': 'showUsers',
       '*actions': 'defaultAction'
    },
  initialize: function(){
        this.home = new mainHomeView.homeView(this);
        this.user = new userListView.userView(this);
        this.project = new projectListView.projectView(this);
  },
  showProjects: function(){
        this.project.render();
  },

    showUsers: function(){
        this.user.render();
    },
    defaultAction: function(actions){
        this.home.render()
    }
});

var initialize = function(){
        var app_router = new AppRouter;
        Backbone.history.start();
};

return {
    initialize: initialize
};
}); 
```

我的按钮/链接设置如下：

```
 <ul>
      <li><a href="#/links">Links</a></li>
 </ul> 
```

所以如果我的网址是：www.some-web-site.com/example/ex1/

我点击它应该将网址设置为的链接：www.some-web-site.com/example/ex1/#/links

相反，我得到：404 not found - www.some-web-site.com/links

我错过了什么吗？谢谢

# iphone - 另一个 VC 上的“setInt”不起作用

> ID：12309004
> 
> 赞同：1
> 
> 时间：2012-09-06T21:58:42.000
> 
> 标签：iphone, objective-c, ios, xcode, nsinteger

我正在尝试使用`prepareForSegue`方法在另一个 VC 上设置一个整数。我有四个按钮，每个按钮在按下时都有自己的布尔值

```
- (IBAction)answerChoiceFourPressed:(id)sender {
    self.ButtonFourPressed = YES;
} 
```

我在这里有这个方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    ((SecondQuestionViewController *)segue.destinationViewController).delegate=self;

    if ([segue.identifier isEqualToString:@"toQuestion2"]) {
        SecondQuestionViewController *mdvc = segue.destinationViewController;

        NSInteger newInt;

        if (ButtonTwoPressed == YES) {
            newInt = 1;
            [mdvc setSecondScore:newInt];}

        if (ButtonThreePressed == YES) {
            newInt = 2;
            [mdvc setSecondScore:newInt];}

        if (ButtonFourPressed == YES) {
            newInt = 3;
            [mdvc setSecondScore:newInt];} 

        else {
            [mdvc setSecondScore:0];}
    }
} 
```

在 SecondQuestionViewController 中，我已经涵盖了所有内容：

```
#import "FirstQuestionViewController.h" 
```

并且 secondScore int 被声明为@property：

```
@property (nonatomic, assign) NSInteger secondScore; 
```

我正在使用 NSLog`(@"Score NUMBER 2 is %d", secondScore);`

它总是给我0，**除非按下第四个按钮**：它给我3（`prepareForSegue`方法中的最后一个）可能的问题是什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:10:37.467

Your if statements are whacked. You're last condition was setting the value to 0\. Also no need for the newInt var to be declared. Just do this:

```
if (ButtonTwoPressed == YES) {
    [mdvc setSecondScore:1];
}
else if (ButtonThreePressed == YES) {
    [mdvc setSecondScore:2];
}
else if (ButtonFourPressed == YES) {
     [mdvc setSecondScore:3];
} 
else {
    [mdvc setSecondScore:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:03:10.890

用这个：

```
if (ButtonTwoPressed == YES) {
    newInt = 1;
    [mdvc setSecondScore:newInt];
}
else if (ButtonThreePressed == YES) {
    newInt = 2;
    [mdvc setSecondScore:newInt];
}
else if (ButtonFourPressed == YES) {
    newInt = 3;
    [mdvc setSecondScore:newInt];
} 
else {
    [mdvc setSecondScore:0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T22:10:09.283

试试这个：

```
if (ButtonTwoPressed == YES) {
    newInt = 1;
    [mdvc setSecondScore:newInt];}

else if (ButtonThreePressed == YES) {
    newInt = 2;
    [mdvc setSecondScore:newInt];}

else if (ButtonFourPressed == YES) {
    newInt = 3;
    [mdvc setSecondScore:newInt];} 

else {
    [mdvc setSecondScore:0];} 
```

问题是你的 if 语句是分开的，所以当它到达最后一个并且没有按下按钮时，会调用“else”指令，并将值设置为 0。

# c# - 将公共属性用于内部和公共使用还是将其分开？

> ID：12309005
> 
> 赞同：3
> 
> 时间：2012-09-06T21:58:41.917
> 
> 标签：c#, asp.net, .net

我想使用具有自动属性的干净且编码较少的类。所有属性都是公开的。在同一类的方法中，我也使用了该属性。所以，我认为这种方法是可混搭的，因为我将公共属性用于内部使用和公共使用。在这种情况下最好的方法是什么？在方法中使用私有成员并为公共使用创建属性或在类中使用公共（或在某些特殊情况下为私有）属性？

```
public class Account
{
     public int Count {get; set;}

     private int Calculate()
     {
         return Count * Count;
     }
} 
```

或使用类似的东西

```
public class Account
{
     private int _count;
     public int Count {
        get
        {
            return _count;
        } 
        set
        {
            _count = value,
        }
     }

    private int Calculate()
    {
        return _count * _count;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:01:32.323

第一种方式非常好，因为它实际上是你用第二种方式写的。但是，当您需要向 getter 或 setter 添加其他代码时要小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:02:57.017

在内部和外部使用公共属性是完全可以接受的，特别是如果它是一个自动属性，因为您的属性中没有逻辑。而且我认为这是首选方法，因为它是更简洁的代码。

顺便说一句：编译代码时会创建一个支持字段，因此两个示例的 IL 代码是相同的。因此，自动属性只是设计时开发人员的可用性功能。

自动属性获取器的 IL 代码...

```
.method public hidebysig specialname instance int32 
    get_Count() cil managed
{
  .custom instance void [mscorlib]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = ( 01 00 00 00 ) 
  // Code size       11 (0xb)
  .maxstack  1
  .locals init (int32 V_0)
  IL_0000:  ldarg.0
  IL_0001:  ldfld      int32 ConsoleApplication1.Program::'<Count>k__BackingField'
  IL_0006:  stloc.0
  IL_0007:  br.s       IL_0009
  IL_0009:  ldloc.0
  IL_000a:  ret
} // end of method Program::get_Count 
```

具有支持字段的属性获取器的 IL 代码...

```
.method public hidebysig specialname instance int32 
    get_Count() cil managed
{
  // Code size       12 (0xc)
  .maxstack  1
  .locals init ([0] int32 CS$1$0000)
  IL_0000:  nop
  IL_0001:  ldarg.0
  IL_0002:  ldfld      int32 ConsoleApplication1.Program::_count
  IL_0007:  stloc.0
  IL_0008:  br.s       IL_000a
  IL_000a:  ldloc.0
  IL_000b:  ret
} // end of method Program::get_Count 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T22:05:04.787

我认为第一种方法更可取。您公开的是一个概念，而不是一个简单的变量，这意味着您可以在以后轻松更改该概念的定义，而无需更改使用代码。

实际上，我希望有一种方法可以使字段仅对需要​​它们的属性可访问，以明确避免第二种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:02:43.337

在这里看不到问题，我的意思是在`public`内部使用属性。众所周知，属性在字段方面引入了一些*非常小的*开销，但在`99.99%`某些情况下它是无关紧要的，所以我认为它在这里并不重要。

总之，第一种情况是可以的。

还要从 TDD 设计的角度考虑这一点。如果您要测试`public`成员（根据 TDD 的最佳实践），您也可以测试对“内部”功能的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T02:22:27.223

> Getter 和 Setter 被过度使用。我见过数以百万计的人声称公共领域是邪恶的，所以他们将它们设为私有并为所有人提供 getter 和 setter。我相信这与公开字段几乎相同，如果您使用线程（但通常不是这种情况）或者如果您的访问器具有业务/表示逻辑（至少“奇怪”），可能会有所不同。我不赞成公共领域，但反对为他们每个人制作一个getter/setter（或属性），然后声称这样做是封装或信息隐藏......哈！巴勃罗·费尔南德斯（Pablo Fernandez）[参考：这个和其他 19 个有争议的编程观点](http://programmers.blogoverflow.com/2012/08/20-controversial-programming-opinions/)

为了解决这个问题，我两种都用过，第一个选项是最简单的。当属性 getter/setter 中出现一些副作用时，这个问题就更难回答了。一个典型的例子是引发事件以指示属性已更改。这是在课堂内和外部请求中都可能发生的事情吗？在这种情况下，使用属性而不是支持变量将给出一致的行为。所以最好的答案是取决于:-)

# osgi - OSGi 化的 Apache Commons 日志记录？

> ID：12309007
> 
> 赞同：4
> 
> 时间：2012-09-06T21:58:47.727
> 
> 标签：osgi, apache-poi, apache-commons-logging

我需要一个 OSGi 化版本的 Apache POI，但找不到，所以我使用 BND 构建了一个。BND 声称 Apache POI 需要 Apache Commons Logging。所以我寻找了一个 OSGi 化的版本，但没有找到。所以我使用 BND 构建了一个。BND 声称 Apache Commons Logging 需要“Apache Excalibur”和“Apache Avalon”，它们显然是与日志相关的已退役 Apache 项目。我猜我将无法找到这些的 OSGi 化版本。

我真的需要这些东西吗？或者仅仅是因为 Apache Commons 可选地支持 Excalibur 和 Avalon，不管它们是什么？在这种情况下，我可以告诉 BND 考虑这些是可选的，而不关心我没有它们的事实吗？

或者，是否有人知道“真正的”OSGi 版本的 Commons Logging，它已经以比我半途而废的“让 BND 弄清楚”方法更深思熟虑的方式处理了这些（和其他）问题？

提前致谢。

**编辑：**需要明确的是，BND 并没有真正声称 Commons Logging 需要 Avalon 和 Excalibur。相反，它声称它需要包 org.apache.avalon.framework.logger 和 org.apache.log。这些包裹（在我看来）似乎分别来自 Avalon 和 Excalibur。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:26:18.230

[Eclipse Orbit](http://download.eclipse.org/tools/orbit/downloads/)中有一个 OSGi 化版本的 Commons Logging 可用。Excalibur 和 Avalon 的依赖项应该是可选的，并且在运行时不需要。我知道有人也在研究 OSGi-ifying Apache POI，但我们的构建存在[一些问题](https://bugs.eclipse.org/388370)，导致循环依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:33:28.083

您可以尝试使用 pax 日志记录。它为所有流行的日志框架提供了 OSGi 就绪的实现。最简单的测试方法是使用 Apache Karaf。它预装了 pax 日志记录。

见[http://karaf.apache.org/](http://karaf.apache.org/)

# vba - 我可以使用哪些 VBA 对象作为参考？

> ID：12309008
> 
> 赞同：0
> 
> 时间：2012-09-06T21:58:49.613
> 
> 标签：vba, object

对于创建对象变量的基本函数，我可以引用哪些类型的对象出现在用户窗体中？

例如，我知道

```
 Dim button As CommandButton
    Set button = CommandButton1
    button.Caption = "Text I can change for this object." 
```

将运行并更改 CommanButton1 的属性。由于不匹配错误，这似乎不适用于用户表单中的标签或文本框。是否有以这种方式可用的对象列表，有没有办法可以将这样的标签或文本框用于数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:49:10.033

由于您在评论中指出您正在按类型查找数组，因此对于用户表单......这是适用于标签（`MsForms.Label`）的示例的粗略草稿。它仍然循环遍历所有控件，但是一旦创建了数组，您就可以自由使用它。

```
Option Explicit
Private labels() As MSForms.label

Private Sub PopulateLabelArray()
    Dim ctrl As Control
    Dim count As Long
    Dim lbl As Variant
    For Each ctrl In Me.Controls
        If TypeOf ctrl Is MSForms.label Then
        count = count + 1
        End If
    Next
    ReDim labels(1 To count)
    count = 0
    For Each ctrl In Me.Controls
        If TypeOf ctrl Is MSForms.label Then
            count = count + 1
            Set labels(count) = ctrl
        End If
    Next
End Sub

Private Sub UserForm_Initialize()
    Dim lbl As variant
    'Populate the label array.
    PopulateLabelArray
    'Test the array
    For Each lbl In labels()
    Debug.Print lbl.Caption
    Next
End Sub 
```

我确信这可以改进，但这是功能性的。

# php - MySQL插入语法错误PHP

> ID：12309011
> 
> 赞同：1
> 
> 时间：2012-09-06T21:58:54.293
> 
> 标签：php, mysql

```
$result2 = mysql_query("INSERT INTO mazegames 
        (game,savename,player,playerimg,level,gold,keys,puzzle,posX,posY,map) 
    VALUES 
        ('$game','$Save','$player','$playerimg','$level','$gold','$keys','$puzzle','$x','$y','$map')",$db); 
```

我不断收到此错误：

> 保存约翰逊游戏时出错。（您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在 'keys,puzzle,posX,posY,map 附近使用的正确语法） VALUES ('maze','Johnson','Patrick ','eddie' 在第 2 行 -- 'maze','Johnson','Patrick','eddie.gif','1','0','0','fail','17','13 ','w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w ,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w ,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w ,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w ,w,w,w,w,w,w,w,w,w,w,w,w,b,b,b,w,w,w,w,w,w,w,w,w,w ,w,w,w,w,w,w,w,w,w,w,n,g,g,g,w,g,g,m,g,g,g,m,w,g,g ,g,g,g,w,w,w,w,w,w,w,w,g,w,g,g,w,g,g,g,g,g,g,g,w,g ,w,g,g,g,w,w,w,w,w,w,w,w,g,g,w,m,w,m,w,w,w,d,w,w,g ,g,w,w,g,g,w,w,w,w,w,

我已将 'map' 列的大小增加到 VARCHAR (10000)，因为我认为我超出了我设置的 1000 的限制，但我仍然收到错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T22:00:58.800

`KEYS`是 mysql 的[保留字](http://dev.mysql.com/doc/en/reserved-words.html)。所以你需要在它周围加上反引号：

```
gold, `keys`,puzzle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:04:53.590

`keys`是保留字，like`SELECT`或`LIMIT`其他。正确的用法是在每个字段周围添加反引号，以便 SQL 识别它。

```
$result2 = mysql_query("INSERT INTO mazegames
    (`game`,`savename`,`player`,`playerimg`,`level`,`gold`,`keys`,`puzzle`,`posX`,`posY`,`map`)
VALUES
    ('$game','$Save','$player','$playerimg','$level','$gold','$keys','$puzzle','$x','$y','$map')",$db); 
```

# javascript - JavaScript：如何每隔一小时做一件事？

> ID：12309019
> 
> 赞同：17
> 
> 时间：2012-09-06T22:00:04.713
> 
> 标签：javascript, time, timer, setinterval

我想每小时执行一些 JS 代码。但我不能使用

```
setInterval("javascript function",60*60*1000); 
```

因为我想每隔一小时做一次，我的意思是在 1:00、2:00、3:00 等等。我正在考虑类似的事情

```
var d;
while(true) {
  d = new Date();
  if ((d.getMinutes() == '00') && (d.getSeconds() == '00')){
    // my code here
  }  
} 
```

但它太慢了，而且效果不好。

谢谢你的任何想法

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T22:07:46.657

我会找出现在是什么时间，弄清楚距离下一个完整小时还有多长时间，然后等那么久。所以，

```
function doSomething() {
    var d = new Date(),
        h = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours() + 1, 0, 0, 0),
        e = h - d;
    if (e > 100) { // some arbitrary time period
        window.setTimeout(doSomething, e);
    }
    // your code
} 
```

检查`e > 100`只是为了确保您不会`setTimeout`在 5 毫秒之类的时间内进行操作并陷入疯狂的循环。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T22:03:10.340

您可以做的是每分钟运行一次间隔，并检查时间是否`:00`在运行实际代码之前。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T22:09:10.877

看看这个：

```
function to_be_executed(){
    ...
    ...
    ...
    makeInterval();
}

function makeInterval(){
    var d = new Date();
    var min = d.getMinutes();
    var sec = d.getSeconds();

    if((min == '00') && (sec == '00'))
        to_be_executed();
    else
        setTimeout(to_be_executed,(60*(60-min)+(60-sec))*1000);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-10T10:08:59.280

高性能和**简答**：

```
const runEveryFullHours = (callbackFn) => {
  const Hour = 60 * 60 * 1000;
  const currentDate = new Date();
  const firstCall =  Hour - (currentDate.getMinutes() * 60 + currentDate.getSeconds()) * 1000 - currentDate.getMilliseconds();
  setTimeout(() => {
    callbackFn();
    setInterval(callbackFn, Hour);
  }, firstCall);
}; 
```

用法：

```
runEveryFullHours(() => console.log('Run Every Full Hours.')); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-08T13:36:31.993

ES6 版本，适用于 NodeJS 和现代浏览器 - 根据浏览器或服务器时钟以毫秒为单位执行。

**功能：**

```
const doSomething = (something) => {
  let running = true
  let nextHour = () => {
    return 3600000 - new Date().getTime() % 3600000
  }
  let nextCall = setTimeout(() => {
    something()
    doSomething(something)
  }, nextHour())
  return {
    next() { return running ? nextHour() : -1 },
    exec() { something() },
    stop() {
      clearTimeout(nextCall)
      running = false
    },
    start() {
      clearTimeout(nextCall)
      nextCall = setTimeout(() => {
        something()
        doSomething(something)
      }, nextHour())
      running = true
    }
  }
} 
```

**用法：**

```
// Do something at next full hour and repeat forever
doSomething(() => console.log('Full hour reached!'))

// Do something every full hour & stop it
let obj = doSomething(() => console.log('Will I ever execute? :/'))
obj.next() // Time to next execution in milliseconds
obj.next() / 1000 // Time to next execution in seconds
obj.next() / 1000 / 60 // Time to next execution in minutes
obj.stop() // Stop executing every full hour
obj.start() // Continue executing every hour
obj.exec() // Execute now 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-01T00:43:19.343

您可以使用类似下面的功能，这很容易适应您的需求。

它计算距离下一个间隔还有多长时间，然后在每次运行脚本后重新运行脚本*（除非您将第三个参数设置为 true）*。

```
function runOnInterval(interval_in_ms, function_to_run, only_run_once = false){
    setTimeout(()=>{
        function_to_run();
        if (!only_run_once) runOnInterval(...arguments);
    }, interval_in_ms - ((Date.now() - (new Date().getTimezoneOffset() * 6e4)) % interval_in_ms));
} 
```

示例用法：

```
// Every day at midnight:
runOnInterval(24 * 60 * 60 * 1000, my_function_to_run);
// Every hour on the hour:
runOnInterval(60 * 60 * 1000, my_function_to_run);
// Every minute on the minute:
runOnInterval(60000, my_function_to_run);
// Every 10 seconds on the 10 second mark:
runOnInterval(1e4, ()=>console.log('this will be run every 10 seconds on the 10 second mark')); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-09-29T07:15:13.740

这就是我将如何去做，扩展上一个答案：

```
function callEveryFullHour(my_function) {

    var now = new Date();
    var nextHour = new Date(now.getFullYear(), now.getMonth(), now.getDate(), now.getHours() + 1, 0, 0, 0);
    var difference = nextHour - now;

    return window.setTimeout(function(){

        // run it
        my_function();

        // schedule next run
        callEveryFullHour(my_function);

    }, difference);
} 
```

这样，您可以开始停止任何功能在整小时内运行。

用法：

```
let my_function = () => { // do something };
let timeout = callEveryHour(my_function);

// my_function will trigger every hour

window.clearTimeout(timeout);

// my_function will no longer trigger on the hour 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-06T22:14:38.057

您可以通过每次清除和设置间隔来做到这一点。这只是第一次，而不是间隔是一小时，而是一小时减去当前的分钟和秒：

```
var d = new Date();
var secondsPastHour = d.getMinutes()*60 + d.getSeconds();
var intervalId = setInterval( myFn, 60*60*1000 - secondsPastHour*1000 );

function myFn() {
    // do stuff
    // ...
    clearInterval( intervalId );
    intervalId = setInterval( myFn, 60*60*1000 );
} 
```

唯一的问题是它最终可能会开始漂移......解决方案就是在函数内部做同样的事情，就像你在启动它时所做的那样：

```
var d = new Date();
var secondsPastHour = d.getMinutes()*60 + d.getSeconds();
var intervalId = setInterval( myFn, 60*60*1000 - secondsPastHour*1000 );

function myFn() {
    // do stuff
    // ...
    clearInterval( intervalId );
    var d = new Date();
    var secondsPastHour = d.getMinutes()*60 + d.getSeconds();
    intervalId = setInterval( myFn, 60*60*1000 - secondsPastHour*1000 );
} 
```

这是每分钟更新一次的概念证明（我不想等一小时来测试我的代码！）：http: [//jsfiddle.net/dRsua/](http://jsfiddle.net/dRsua/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-06T22:13:40.460

您需要每分钟运行一次 setInterval 函数（或每秒运行一次，具体取决于您希望计时器的精度），并在分钟数为零时执行代码（顺便说一句，get minutes 返回一个介于 0 和 59 之间的数字）。

```
 function myTimer() {
        var d = new Date()
        if (d.getMinutes() == 0) {
        console.log("full hour");
        }
}

 timer = setInterval(function(){myTimer()},60000) 
```

如果您不希望在确定您已经整小时后每隔一秒/分钟运行一次间隔，您可以简单地触发一个新的每小时间隔并清除初始间隔。

```
var myHourlyTimer = null;

     function myTimer() {
            var d = new Date()
            if (d.getMinutes() == 0) {
            console.log("full hour");
myHourlyTimer = setInterval(function(){myHourlyTimerFunction()},3600000);
clearInterval(timer)
            }
    }

 timer = setInterval(function(){myTimer()},60000) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-18T05:13:28.880

也在寻找这个，根据马克的回应，我写了这个：

```
function callEveryFullHour() {

    var now = new Date();
    var nextHour = new Date(now.getFullYear(), now.getMonth(), now.getDate(), now.getHours() + 1, 0, 0, 0);
    var difference = nextHour - now;

    window.setTimeout(function(){

        // code goes here

        console.log("It's a full hour!")
        callEveryFullHour();

    }, difference);

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-06T14:32:52.630

建议对 Steffan 提出的方法进行改进，这对我来说效果最好。

**功能：**

```
let doSomething = function (interval, task) {
      let running = false
      let nextExec = () => {
        if (interval < 0) interval = 1000
        return interval - (new Date().getTime() % interval)
      }
      let taskwrapper = () => {
        //console.log("do more...")
        task()
      }
      let trigger = () => {
        if (nextCall) clearTimeout(nextCall)
        if (running) {
          nextCall = setTimeout(() => {
            taskwrapper()
            trigger()
          }, nextExec())
        }
      }
      let nextCall = null
      return {
        next() {
          return running ? nextExec() : -1
        },
        exec() {
          taskwrapper()
        },
        stop() {
          if (nextCall) clearTimeout(nextCall)
          running = false
        },
        start() {
          if (!running) {
            running = true
            if (nextCall) clearTimeout(nextCall)
            trigger()
          }
        }
      }
    }

/*instantiate an object doSomething(interval, task) */
let obj = doSomething(5000, () => console.log('You go..!'))

/*schedule You go...! every 5 seconds */
obj.start()

/*stop printing  */
//obj.stop()

/*execute task once */
obj.exec()
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-09T10:55:44.347

使用 Cron Job 代替纯 js 实现是合适的。

```
var CronJob = require('cron').CronJob;
var job = new CronJob('* * * * * *', function() {
  console.log('You will see this message every second');
}, "@hourly", true, 'America/Los_Angeles');
job.start(); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-10T06:39:42.710

如果此脚本在类 Unix 服务器上运行，而不是在浏览器上运行，那么`crontab`可能是最好的解决方案，而不是在脚本中按小时进行调度。

[https://www.geeksforgeeks.org/crontab-in-linux-with-examples/](https://www.geeksforgeeks.org/crontab-in-linux-with-examples/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-12-09T17:17:36.467

1.  创建工作。
2.  安排在服务器上运行它。

*   Heroku - [https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)
*   AWS [https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/RunLambdaSchedule.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/RunLambdaSchedule.html)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-12-08T19:00:23.300

```
let timerId = null

function wrapper (cb,date = new Date()) {
    if(!date.getMinutes() && !date.getSeconds()){
        setInterval(cb,60*60*1000);
        clearInterval(timerId)
    }
}

timerId = setInterval(wrapper,1000,yourCb) 
```

使用一个包装函数，它将每秒执行一次，直到整整一小时，然后调用`setInterval(cb,60*60*1000)`然后停止执行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-09-06T22:28:02.590

一种简单的方法是持续运行检查以检测时间何时更改：

```
var lastProcessedHour = -1;

setInterval(function() {
   var d = new Date();
   var currentHour = d.getHours();
   if (currentHour != lastProcessedHour) {
      // do stuff
      console.log("new hour");

      lastProcessedHour = currentHour;
   }
}, 1000); 
```

如果你像上面那样每秒运行一次，脚本最迟会触发一秒钟进入新的小时。

我认为这种方法既健壮又易于理解，从性能的角度来看，每秒运行一次这个简单的检查应该不是问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-24T11:39:38.030

基本上和其他许多人一样，但更干净一些。其他没注意的`Date().getTime()`是每小时上面是3600000的整数倍。

```
fn();          // call this once to exec on the hour

function fn(now) {

   //############## add this to top of your existing fn ###############
   var to_top = 3600000 - new Date().getTime()%3600000;  // msec to top of hour

   clearTimeout(fn.t);                           // in case called out of turn
   fn.t = setTimeout(fn, to_top, true);

   if( !now ) return;
   //###################################################################

   ...fn stuff...
} 
```

# asp.net-web-api - WebApi Odata 406 错误

> ID：12309026
> 
> 赞同：0
> 
> 时间：2012-09-06T22:00:27.430
> 
> 标签：asp.net-web-api, odata

我最近尝试实现一个实现 Odata 的 WebApi 服务。供我参考，我一直在使用以下链接。在我自己的代码和运行示例时，通过 Fiddler 发出请求只会返回 406 错误。有没有人遇到过类似的问题？

谢谢

[WebApi Odata 帖子](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)

[WebApi Odata 示例](http://aspnet.codeplex.com/SourceControl/changeset/view/903afc4e11df#Samples/Net4/CS/WebApi/ODataServiceSample/ReadMe.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-25T05:13:13.500

存在两个命名空间和程序集，因为这两个版本的 OData 不兼容，尽管它们可以并排使用。

将 System.Web.Http.OData 用于 OData v3，将 System.Web.OData 用于 OData v4。在您的 odata 控制器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:01:08.397

有一个[错误](http://aspnetwebstack.codeplex.com/workitem/416)跟踪此问题。这里的问题是执行期间的任何异常都会转换为 HttpError 并且 ODataFormatter 现在不理解 HttpError。

# c# - Mandelbrot 集上的 C# 结构？

> ID：12309028
> 
> 赞同：0
> 
> 时间：2012-09-06T22:00:29.613
> 
> 标签：c#, struct, mandelbrot

之前在 C#.Net Mandelbrot 集合上发布了一个问题，该问题得到了有益的回答，但是我不得不回到这个 Mandelbrot 集合并在其定义（虚构和真实）坐标的双变量上实现一个结构。

作为一个刚接触结构并且对它们有点生疏的人，我想就我做错了什么以及如何通过查看它来改进上述代码提供一些建议，我相信它可以稍微优化一下. 这是使用结构的正确方法吗？如果不是，有哪些替代方案或最佳技术？谢谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace wmcMandelbrot
{
struct doubleVar
{

    public double realCoord, imagCoord;
    public double realTemp, imagTemp, realTemp2, arg;
    public double newIcoord, newIcoord1, newIcoord2;
    public double rCoord, rCoord1, rCoord2;
 }

class Program
{
    static void Main(string[] args)
    {

        doubleVar doubleNum;
        int iterations;

        Console.WriteLine("Enter first imaginary coord: ");
        doubleNum.newIcoord = Convert.ToDouble(Console.ReadLine());

        Console.WriteLine("Enter second imaginary coord: ");
        doubleNum.newIcoord1 = Convert.ToDouble(Console.ReadLine());

        Console.WriteLine("Enter third imaginary coord: ");
        doubleNum.newIcoord2 = Convert.ToDouble(Console.ReadLine());

        Console.WriteLine("Enter first real coord: ");
        doubleNum.rCoord = Convert.ToDouble(Console.ReadLine());

        Console.WriteLine("Enter second real coord: ");
        doubleNum.rCoord1 = Convert.ToDouble(Console.ReadLine());

        Console.WriteLine("Enter third real coord: ");
        doubleNum.rCoord2 = Convert.ToDouble(Console.ReadLine());

        for (doubleNum.imagCoord = doubleNum.newIcoord; doubleNum.imagCoord >= -doubleNum.newIcoord1; doubleNum.imagCoord -= doubleNum.newIcoord2)
        {
            for (doubleNum.realCoord = -doubleNum.rCoord; doubleNum.realCoord <= doubleNum.rCoord1; doubleNum.realCoord += doubleNum.rCoord2)
            {
                iterations = 0;
                doubleNum.realTemp = doubleNum.realCoord;
                doubleNum.imagTemp = doubleNum.imagCoord;
                doubleNum.arg = (doubleNum.realCoord * doubleNum.realCoord) + (doubleNum.imagCoord * doubleNum.imagCoord);
                while ((doubleNum.arg < 4) && (iterations < 40))
                {
                    doubleNum.realTemp2 = (doubleNum.realTemp * doubleNum.realTemp) - (doubleNum.imagTemp * doubleNum.imagTemp) - doubleNum.realCoord;
                    doubleNum.imagTemp = (2 * doubleNum.realTemp * doubleNum.imagTemp) - doubleNum.imagCoord;
                    doubleNum.realTemp = doubleNum.realTemp2;
                    doubleNum.arg = (doubleNum.realTemp * doubleNum.realTemp) + (doubleNum.imagTemp * doubleNum.imagTemp);
                    iterations += 1;
                }
                switch (iterations % 4)
                {
                    case 0:
                        Console.Write(".");
                        break;
                    case 1:
                        Console.Write("o");
                        break;
                    case 2:
                        Console.Write("O");
                        break;
                    case 3:
                        Console.Write("@");
                        break;
                }
            }
            Console.Write("\n");
        }
        Console.ReadKey();

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T01:00:59.353

我认为您应该使用结构来表示每个复数。然后，该结构可以包含将这些复数加、减、乘的函数：

例如。

```
struct Complex
{
    public double real;
    public double imag;

    public Complex(double r, double i)
    {
        real = r;
        imag = i;
    }

    public Complex add(Complex operand)
    {
        return new Complex(real + operand.real, imag + operand.imag);
    }

    public Complex multiply(Complex operand)
    {
        return new Complex(real * operand.real - imag * operand.imag, real * operand.imag + operand.real * imag);
    }
} 
```

然后使用结构你可以做类似的事情

```
Complex c = new Complex( ...coordinate goes here... );
Complex z = new Complex(0,0);

// z -> z^2 + c
Complex result = z.multiply(z).add(c); 
```

等等

您还可以将“sq”（数字平方）或“pow”（提高到给定的幂）或“arg”（在上面的代码中）添加到复数结构。天空是极限！请注意，这些函数不必返回另一个复数，例如“arg”将返回一个双精度数。

此外，如果您总是将两个复数（地图点和 z 值）组合在一起，您可以创建一个结构来保存两个复数：

```
struct MapPoint
{
    Complex c;
    Complex z;
} 
```

等等。对我来说，将事物分组在逻辑上不可分割的结构或始终作为一个组工作的事物是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:32:15.887

只存储定义坐标（读取和虚部）所需的值而不存储任何临时值是有意义的。计算值也可以是属性，如下所示：

```
public struct MapPoint
{
    public double realCoord, imagCoord;
    public double realConst, imagConst;

    public MapPoint(double realConst, double imagConst)
        : this(realConst, imagConst, realConst, imagConst) { }

    public MapPoint(double realCoord, double imagCoord, double realConst, double imagConst)
    {
        this.realCoord = realCoord;
        this.imagCoord = imagCoord;
        this.realConst = realConst;
        this.imagConst = imagConst;
    }
    public double Argument // calculated property
    {
        get { return realCoord * realCoord + imagCoord * imagCoord; }
    }

    public MapPoint Iterate()
    {
        // Do the z = z^2+c thing

        return new MapPoint(
            realCoord * realCoord - imagCoord * imagCoord + realConst,
            2 * realCoord * imagCoord + realConst,
            realConst, imagConst);
    }
} 
```

现在像这样使用这个结构：

```
void Main() {
    for( double y=...
      for( double x=...

        int iterations = 0;
        MapPoint point = new MapPoint(x, y);

        while (iterations < 40 || point.Argument < 4.0)
        {
            point = point.Iterate();
            iterations++;
        }

        switch (iterations % 4)
        {
            //...
        }
    ...
} 
```

关键是所有计算都在结构内部完成，靠近存储信息的地方。这样，结构可以在其他地方重用，而无需再次重新编写计算块。此外，任何临时值在不需要时都会被丢弃，并且不会存储在重要值旁边。

请承诺阅读[此处](http://www.dotnetperls.com/struct)和[此处](http://www.csharp-station.com/Tutorial/CSharp/lesson12)的结构，然后将上面的代码重新编写为您自己的代码。

# android - 从android应用程序登录网页

> ID：12309029
> 
> 赞同：3
> 
> 时间：2012-09-06T22:00:39.287
> 
> 标签：android, login

我正在努力做到这一点，我真的需要有经验的人的帮助。

1.  带有 2 个 texbox 的应用程序。一个用于用户名，一个用于密码。
2.  登录按钮。
3.  当用户按下按钮时，登录信息将发送到网页（m.bonbon.hr），并在浏览器中打开该网页。
4.  首次登录后，登录信息将被保存，用户无需再次输入该信息。

从哪里开始，请任何指导，建议，我会采取任何措施。

编辑：

我在我的主要活动中创建了这个

```
DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httpost = new HttpPost("https://www.bonbon.hr/registracija?direct=1");

      try {
        List<NameValuePair> nvps = new ArrayList<NameValuePair>();
        nvps.add(new BasicNameValuePair("email", "login"));
        nvps.add(new BasicNameValuePair("password", "pw"));
        nvps.add(new BasicNameValuePair("autologin", "true"));
        httpost.setEntity(new UrlEncodedFormEntity(nvps));

        }
        catch (UnsupportedEncodingException e) {
            // writing error to Log
            e.printStackTrace();
        }
        try {
            HttpResponse response = httpclient.execute(httpost);

            // writing response to log
            Log.d("Http Response:", response.toString());

        } catch (ClientProtocolException e) {
            // writing exception to log
            e.printStackTrace();

        } catch (IOException e) {
            // writing exception to log
            e.printStackTrace();
        } 
```

在 onCreate 部分下。所以现在，当我点击我的按钮（已经创建并准备好使用）时，我需要使用给定的信息登录给定的 URL ......但我不知道如何使用 asyntask 让它发生 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:05:57.140

这与从浏览器登录完全相同：您只需将 POST 请求发送到正确的 url。用户登录后，其会话 cookie 将存储在 http 客户端中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:56:24.960

使用两个文本框和一个按钮登录来设计应用程序的布局。

现在，当按下该按钮时，使用 HttpClient 获取在两个 TextBox 中输入的文本并向网页 URL**`getText()`**发出**`POST`**请求并维护会话。

如果您打算保存用户登录信息，[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)是最好的方法，您可以将用户名和密码存储在 SharedPreference 变量中，并在以后使用它们来发出以后的登录请求。

如果您想了解更多关于如何使用 HttpClient 建立会话的信息，[这个问题](https://stackoverflow.com/questions/3434525/android-log-into-website-and-preserve-session-cookie-using-defaulthttpclient)将为您提供很多答案。

# c# - 为什么要为 Page.InitComplete 添加额外的事件处理程序？

> ID：12309031
> 
> 赞同：0
> 
> 时间：2012-09-06T22:00:46.070
> 
> 标签：c#, asp.net, events, web-parts, page-lifecycle

我正在学习 Web 部件，并且教程中有一点说要在 Page_Init 中执行以下操作：

```
Page.InitComplete += new EventHandler(GenerateModeList); 
```

本教程继续定义 GenerateModeList，其中将项目列表添加到 DropDownList。此列表将包含支持的显示模式。

在我看来，定义 GenerateModeList 方法并从 Page_InitComplete 调用它会更简单。

为什么要添加额外的事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:05:42.747

可能*“GenerateModeList”*方法需要访问已初始化的控件（如 DropDownList）。页面上的控件在 时尚未初始化`Page.Init`。

请参阅[Page.InitComplete](http://msdn.microsoft.com/en-us/library/system.web.ui.page.initcomplete.aspx)事件的文档：

> 在页面生命周期的这个阶段，页面上所有声明的控件都已初始化，但尚未填充页面的状态。您可以访问服务器控件，但它们尚不包含用户返回的信息。

# ruby - 使用 watir-webdriver 单击 'div' 中的所有链接

> ID：12309033
> 
> 赞同：3
> 
> 时间：2012-09-06T22:00:55.817
> 
> 标签：ruby, watir, watir-webdriver

我有以下 DOM 设置，我正在尝试使用 watir-webdriver 单击每个/每个链接。请记住，“随机数 X”和“随机名称 X”都是随机的，不能用于提出解决方案。

```
<div class="container">
<ul>
<li id="Random Number 1"><a href="#">Random Name 1</a></li>
<li id="Random Number 2"><a href="#">Random Name 2</a></li>
<li id="Random Number 3"><a href="#">Random Name 3</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T00:24:04.700

就像是：

```
browser.div(:class=>"container").links.each do | link | 
  link.click 
  browser.back
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:24:42.830

您必须将所有链接存储在一个数组或结构中，然后您将能够单击网页或 div 或任何元素的所有链接。

```
link = Array.new
i = 0
browser.div(:class, "container").links.each do |li|
link[i] = l.text
i = i + 1
end

li.each do |visit|
b.link(:text, visit).click
b.back
end 
```

这是必需的，因为如果您没有将链接存储到数组中，那么简单循环将仅单击第一个链接，当它执行 browser.back 时，它不会获得要单击的第二个链接的值，因为每次缓存都会被清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:53:27.313

你也可以试试：

```
browser.div(:class, 'container').as.each do |x|
    x.click
    browser.back
end 
```

或点击单个链接尝试以下操作之一：

```
browser.div(:class, 'containter').as[0].click  #This is for the first link.   
browser.div(:class, 'containter').a(:text, 'Random Name 1').click 
```

# reporting-services - SSRS SQL server 2008 R2 多值参数

> ID：12309042
> 
> 赞同：0
> 
> 时间：2012-09-06T22:01:20.143
> 
> 标签：reporting-services, sql-server-2008-r2

我有一个问题 我有一个需要多个值的查询

```
SELECT * FROM customer
WHERE department IN (@pValueParm) 
```

如果单击“Q&M”应将值 E 发送到查询 pValueParm，我希望拥有的实际值是两个选项的两个设置，我“Capital”应将值 M、T 发送到查询 pValueParm。

基本上，如果他们同时点击两者，它应该发送所有 4 个 E、I、M、T

```
SELECT * FROM customer
WHERE department IN (E,I,M,T) 
```

我创建了一个参数 pValueParm 并选择了“指定值标签 Q&M 和值作为 E,I 标签大写和值作为 M,T

但是，它不起作用。任何想法什么是实现这一目标的最佳方法？谢谢

# c# - 2D 碰撞检测表现得很有趣

> ID：12309043
> 
> 赞同：2
> 
> 时间：2012-09-06T22:01:25.590
> 
> 标签：c#, xna, collision-detection

我有一个简单的 BreakOut 游戏（垂直，沿底部划桨）启动并运行，但碰撞检测有点偏离。我使用 Rectangle.Intersect 来初步检查球是否完全与给定的砖相交，然后如果它确实还有 4 个 Intersect 调用来检查球是垂直碰撞（砖的一侧，左+​​右）还是水平（砖的顶部+底部）。在某些情况下，当球在 2 个水平相邻的砖块的交叉点附近以锐角与砖块相撞时，它会将它们都移除并继续向上。我认为这是双重碰撞。我已经强行退出了 foreach 循环，它在找到矩形相交的那一刻检查矩形相交，但这并没有解决问题。

这是在游戏类的主要 Update() 函数中：

```
 foreach (Brick brick in bricks)
        {
            if (brick.CheckCollision(ball))
            {
                break;
            }
        } 
```

这是 Brick.CheckCollision() 函数：

```
 public bool CheckCollision(Ball ball)
    {
        if (alive && ball.Bounds.Intersects(location))
        {
            alive=false;
            ball.Deflection(this);
            return true;
        }
        return false;
    } 
```

这就是 Ball.Deflection() 函数。在此，我使用没有宽度/高度的矩形来标记砖的侧面。不确定这是否是正确的方法：

```
 public void Deflection(Brick brick)
    {
        //For vertical collision (top or bottom of brick) invert Y motion
        if (this.Bounds.Intersects(new Rectangle(brick.Location.Left, brick.Location.Top, brick.Location.Right - brick.Location.Left, 0)) ||
            this.Bounds.Intersects(new Rectangle(brick.Location.Left, brick.Location.Bottom, brick.Location.Right - brick.Location.Left, 0)))
        {
            motion.Y *= -1;
            return;
        }
        //For horizontal collision (left or right side of brick) invert X motion
        if (this.Bounds.Intersects(new Rectangle(brick.Location.Left, brick.Location.Top, 0, brick.Location.Bottom - brick.Location.Top)) ||
            this.Bounds.Intersects(new Rectangle(brick.Location.Right, brick.Location.Top, 0, brick.Location.Bottom - brick.Location.Top)))
        {
            motion.X *= -1;
            return;
        }
    } 
```

我假设我犯了一个明显的逻辑错误，但如果可以改进一般方法，我会全神贯注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:07:35.607

通过与 itsme86 在评论中的讨论，我解决了我的问题。我添加了日志记录（由 bmm6o 推荐），并确认这是由于球在一帧内移动太远而在下一帧仍部分位于相邻块内造成的碰撞加倍。我决定保持逻辑简单，当我反转它的方向时，将球移回它相交的块的边缘。这是在中间没有 Draw() 函数的情况下完成的，以免产生口吃效果。我正在努力观察任何跳跃或口吃，所以如果有的话，它是不可见的。

# php - 多维数组到字符串

> ID：12309047
> 
> 赞同：13
> 
> 时间：2012-09-06T22:01:37.783
> 
> 标签：php

我正在尝试将多维数组转换为具有特定格式的字符串。

```
function convert_multi_array($array) {
    foreach($array as $value) {
        if(count($value) > 1) {
            $array = implode("~", $value);
        }
        $array = implode("&", $value);
    }
    print_r($array);
}
$arr = array(array("blue", "red", "green"), array("one", "three", "twenty"));
convert_multi_array($arr); 
```

应该输出：`blue~red~green&one~three~twenty`...等等更多的子数组。

我只想说，我无法生成任何接近我想要的结果的代码。两个小时后，这几乎是我能得到的最好的。我不知道为什么内爆的行为与通常对字符串的行为不同，或者我可能只是看不正确。你能对数组值使用内爆吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-06T22:05:48.577

您正在覆盖`$array`，其中包含原始数组。但是在`foreach`一个副本`$array`正在处理中，所以你基本上只是分配一个新变量。

您应该做的是遍历子数组并将它们“转换”为字符串，然后将结果内爆。

```
function convert_multi_array($array) {
  $out = implode("&",array_map(function($a) {return implode("~",$a);},$array));
  print_r($out);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-26T08:17:48.027

看我的版本。它内爆任何维度：

```
function implode_all($glue, $arr){            
    for ($i=0; $i<count($arr); $i++) {
        if (@is_array($arr[$i])) 
            $arr[$i] = implode_all ($glue, $arr[$i]);
    }            
    return implode($glue, $arr);
} 
```

这是示例：

```
echo implode_all(',', 
array(
1,
2,
array('31','32'),
array('4'),
array(
  array(511,512), 
  array(521,522,523,524),
  53))
); 
```

将打印：

```
1,2,31,32,4,511,512,521,522,523,524,53 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T13:28:10.943

这是一个简单的答案：

```
 function implode_recur ($separator, $arrayvar){
        $output = "";
         foreach ($arrayvar as $av)
         {
             if (is_array ($av))
             {
                $output .= implode_r ($separator, $av);
             }
            else
            {
                $output .= $separator.$av;
            }
            return $output;
         }
    }
    $result = implode_recur(">>",$variable); 
```

好的，快乐的编码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T22:07:24.553

将内爆的内部数组保存到数组中。然后内爆那些。

*（本着您原始实现的精神编写）*

```
function convert_multi_array($arrays)
{
    $imploded = array();
    foreach($arrays as $array) {
        $imploded[] = implode('~', $array);
    }
    return implode("&", $imploded);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T12:39:41.493

可能没有兴趣，但我需要报告一个包含错误的嵌套数组，所以我简单地定义了一个变量，然后使用 json_encode 将其放入我的电子邮件中。将数组转换为字符串的一种方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-28T09:57:52.237

我尝试了一堆这些，但没有一个为我勾选了所有框。最后一个是[Jeff_Alieffsons](https://stackoverflow.com/a/35646695/1766219)。

这是一个调整后的版本，您可以将任何多维数组放入其中，然后它会返回一个字符串。

```
function implode_all( $glue, $arr ){
  if( is_array( $arr ) ){

    foreach( $arr as $key => &$value ){

      if( @is_array( $value ) ){
        $arr[ $key ] = implode_all( $glue, $value );
      }
    }

    return implode( $glue, $arr );
  }

  // Not array
  return $arr;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T22:17:03.890

您也可以从 PHP 加入手册 ( [http://php.net/manual/en/function.join.php](http://php.net/manual/en/function.join.php) )中获取原始实现

```
function joinr($join, $value, $lvl=0)
{
    if (!is_array($join)) return joinr(array($join), $value, $lvl);
    $res = array();
    if (is_array($value)&&sizeof($value)&&is_array(current($value))) { // Is value are array of sub-arrays?
        foreach($value as $val)
            $res[] = joinr($join, $val, $lvl+1);
    }
    elseif(is_array($value)) {
        $res = $value;
    }
    else $res[] = $value;
    return join(isset($join[$lvl])?$join[$lvl]:"", $res);
}

$arr = array(array("blue", "red", "green"), array("one", "three", "twenty"));
joinr(array("&", "~"), $arr); 
```

这是递归的，所以你甚至可以做

```
$arr = array(array("a", "b"), array(array("c", "d"), array("e", "f")), "g");
joinr(array("/", "-", "+"), $arr); 
```

你会得到

```
a-b/c+d-e+f/g 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T11:27:29.767

您可以使用这一行数组来字符串代码：

```
$output = implode(", ",array_map(function($a) { return '<a href="'.$a['slug'].'">'.$a['name'].'</a>'; }, $your_array) );

print_r($output); 
```

输出：

> 链接1、链接2、链接3

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-05T14:24:23.067

如果有人需要一个`safe general function`可以支持添加的二维数组（如表格），`keys name`我认为这个可以很好：

```
function arystr($ary='',$key=false,$rowsep=PHP_EOL,$cellsep=';') { // The two dimensional array, add keys name or not, Row separator, Cell Separator
    $str='';
    if (!is_array($ary)) {
        $str=strval($ary);
    } else if (count($ary)) {
        foreach ($ary as $k=>$t) {
            $str.=($key ? $k.$cellsep : '').(is_array($t) ? implode($cellsep,$t) : $t);
            end($ary);
            if ($k !== key($ary)) $str.=$rowsep;
        }
    }
    return $str;
} 
```

*   我将其用作**Array To CSV String**函数

所以如果我们的输入是这样的：

```
$a=array(array("blue", "red", "green"), array("one", "three", "twenty"));
echo arystr($a); 
```

结果将是：

```
blue;red;green
one;three;twenty 
```

另一个内爆键的例子：

```
$a = array(
  'first' => array
  (
    'a' , 'b'
  ),
  'second' => array
  (
    'c','d'
  ),
  'third' => array
  (
    'e','f'
  )
);
echo arystr($a,true,'|',','); 
```

结果 ：

```
first,a,b|second,c,d|third,e,f 
```

# ruby - nokogiri 和嵌套块

> ID：12309049
> 
> 赞同：0
> 
> 时间：2012-09-06T22:01:41.543
> 
> 标签：ruby, nokogiri

我正在尝试使用 Nokogiri 使用以下代码从 HTML 文件中提取数据：

```
@doc = Nokogiri::HTML("<table >
<tr BGCOLOR=\"#eeeeee\">
<td>SPILLED</td>
</tr>
<tr BGCOLOR=\"#eeeeee\">
<td >RUSTING</td>
</tr>
</table>")
@doc.xpath('//tr[@bgcolor="#eeeeee"]').each do |record|
    print record
    record.xpath("//td").each do |cell|
       print cell
    end
end 
```

第一个块似乎按预期工作，每次都只`record`包含一个行。另一方面，第二个块正在访问`<td>`两行的元素，这对我来说很神秘，因为`record`变量显示它在进入内部块之前只有一行的数据。

当“记录”在内部块中时，它如何拥有两行的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:22:34.433

弄明白了——“td”前面的“//”导致搜索回到树上，高于记录变量中的内容，即记录中的元素仍然与父元素有关系，等等。消除“//”解决了它。

# actionscript-3 - 如何从 AS3 中的 textArea 中删除从另一个 textArea 生成的文本

> ID：12309053
> 
> 赞同：0
> 
> 时间：2012-09-06T22:02:14.633
> 
> 标签：actionscript-3

我不知道如何在标题中解释这一点，但我有一个 textArea 可以在我的应用程序的另一个 textArea 中生成文本。它生成的文本就好了：

```
gallery.txtArea1.addEventListener(TextEvent.TEXT_INPUT, displayEvent);

function displayEvent(event:TextEvent):void {
        picArea1.text = gallery.txtArea1.text + event.text;
} 
```

但是当我想从动态文本区域 picArea1 中删除文本时，它不会捕获该 keyCode。所以我专门为此添加了另一个事件监听器：

```
gallery.txtArea1.addEventListener(KeyboardEvent.KEY_DOWN, onKeyPressed);

function onKeyPressed(event:KeyboardEvent):void {
        if (event.keyCode == Keyboard.DELETE) {
            picArea1.text = gallery.txtArea1.text;
        }
} 
```

只是为了刷新它。但它也没有接受删除。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:22:36.260

该`TextEvent.TEXT_INPUT`方法不会调度未添加到文本输入的内容。

改为添加一个关键侦听器，您朝着正确的方向前进。如果您使用 KEY_UP 而不是 KEY_DOWN，它应该按您期望的方式工作。

原因是，KEY_DOWN 在系统更改文本输入之前被调度/处理。或者，您可以使用 a`Timer`并在 KEY_DOWN 和 KEY_UP 事件之间更新它，如果您希望在按住删除/退格键以擦除多个字母时获得即时结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:52:19.667

好的。奇怪的问题。当我改变时：

```
event.keyCode == Keyboard.DELETE 
```

至

```
event.keyCode == 8 
```

它开始工作了。我不知道为什么会这样，因为我导入了 Keyboard 类和所有东西。我不得不做一些小技巧来只从字符串中删除最后一个字符，因为我编码它的方式是获取整个字符串并将最后一个字符添加到末尾，然后重新采样整个事情并再次执行：

```
picArea1.text = gallery.txtArea1.text + event.text; 
```

所以这是我的最终功能：

```
gallery.txtArea1.addEventListener(KeyboardEvent.KEY_DOWN, onKeyPressed);

function onKeyPressed(event:KeyboardEvent):void {
        if (event.keyCode == 8) {
            var newString:String = gallery.txtArea1.text;
            picArea1.text = newString.substring(0, newString.length - 1);
        }

} 
```

# ember.js - 为什么 ember 会自动将不正确的控制器传递给视图实例？

> ID：12309056
> 
> 赞同：2
> 
> 时间：2012-09-06T22:02:33.700
> 
> 标签：ember.js

我正在尝试在模板中添加视图。此模板定义了一个名为 NewAssetLinkView 的视图。在其中我正在添加 TracksView。ember 给出了例外：

未捕获的错误：断言失败：Ember.CollectionView 的内容必须实现 Ember.Array。你通过了 AssetLinksApp.NewAssetLinkController:ember538

似乎路由器正在尝试自动创建 NewAssetLinksController 并将其应用于 TracksView，这是错误的。也许它这样做是因为在 NewAssetLinkView 中声明了 TracksView？（顺便说一句，NewAssetLinkController 扩展了 ObjectController）

我有一个 TracksView 应该使用的 TracksController - 我怎样才能让路由器不尝试自动创建错误的控制器并将其与 TracksView 关联？

```
<script type="text/x-handlebars" data-template-name="new_asset_link_view">
    .....
    {{view AssetLinksApp.TracksView}}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:35:38.393

当您在模板内实例化视图时，新创建的视图将传递给创建它的视图的控制器。这非常有用，因为任何视图都可以访问`controller`并且不需要绑定到类似`parentView.controller`.

但是，在您的情况下，您想使用不同的控制器。因此，您可以通过帮助程序传入控制器绑定`{{view}}`。

尝试使用

```
{{view AssetLinksApp.TracksView controller="AssetLinksApp.tracksController"}} 
```

# javascript - 带有接口的 ASP.NET MVC RegisterModel

> ID：12309061
> 
> 赞同：0
> 
> 时间：2012-09-06T22:02:47.253
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我想在我的网站的注册表单中有一个界面。让我们称之为 IShape。有多种接口实现，如 ISquare 和 ICycle，除了接口中声明的共享属性外，每个接口都有自己的属性。

我希望用户能够从所有可能的类型中拥有尽可能多的形状，并能够用我作为 RegisterModel 收到的信息填充它们。

```
public class RegisterModel
{
    [Required]
    [Display(Name = "Username")]
    public string UserName { get; set; }

    [Required]
    [Display(Name = "Shapes")]
    public List<string> Shapes { get; set; }
} 
```

注册操作：

```
public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
              // Iterate over the shapes
              model.Shapes ...
            }
        } 
```

请参考 javascript 问题，因为如果我有多个对象，它们的名称会发生​​冲突。例如：2 个形状具有 size 属性。如果我创建两个名为“size”的文本框，ASP.NET 引擎将无法解决它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:09:38.583

您希望 MVC 框架如何建模绑定接口？为了使模型绑定起作用，MVC 必须知道它必须创建对象的哪个实例。界面中没有足够的信息来执行此操作，这意味着您将需要自定义模型绑定器。

您正在谈论的路径基本上覆盖了 MVC 为您提供的所有生产力特性，因为大多数 MVC 特性都基于约定优于配置。很难对接口进行约定。

我并不是说你不能这样做，但可能有更好的方法来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:14:31.550

我会考虑在前端使用[Knockout.js ，以允许用户构建他们的对象列表。](http://knockoutjs.com/)它是一个 MVVM 框架，可让您管理客户端事件和操作 DOM。

您可以为他们添加的每个新形状（在 onclick 事件上）将 ajax 请求发送回服务器。然后，您需要保留用户在数据库或会话中建立的列表，但是当用户点击确认/提交时，您已经可以访问完整列表，因此可以轻松地一次对所有项目执行验证.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:52:32.827

我想我有点理解，这很合理，但是使用接口不是解决问题的方法，因为接口永远不能被实例化，只有实现它的类可以。

我认为您需要做的是使用继承而不是接口。

您有一个基本的抽象 Shape 类，Circle、Square 等派生自该类。在输入表单上，您的用户可以愉快地选择 Circles 或 Squares，然后您将获得一个很好的统一 IList 类型的 Shape 以在您的控制器中处理。

为了做到这一点，您需要编写一个自定义模型绑定器，该绑定器检测到它正在尝试绑定一个抽象类（它不能这样做）并覆盖 CreateModel 以提供一个 Square 或 Circle 类型的新类（然后是类MVC 绑定到的）。

[这里](https://stackoverflow.com/questions/5460081/asp-net-mvc-3-defaultmodelbinder-with-inheritance-polymorphism)有关于这种技术的相当完整和详细的讨论

# java - 使用 Jackson 和 Spring MVC 3.1 将 Java 列表转换为由列表对象的属性键控的 JSON 对象

> ID：12309072
> 
> 赞同：2
> 
> 时间：2012-09-06T22:03:33.023
> 
> 标签：java, spring-mvc, jackson, spring-data-mongodb

在我的 Spring MVC 3.1 项目中，我有一个模型结构，其中一个对象的属性是子对象列表。例如：

```
public class Person {
    private String name;
    private List<Pet> pets;
} 
```

然后是 Pet 类，如：

```
public class Pet {
    private String name;
    private String species;
} 
```

使用默认的[Jackson HTTP 转换器](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/json/MappingJacksonJsonView.html)，我可以生成（并接受）如下所示的 Person 对象：

```
{
 "name": "Tres",
 "pets": [ {
            "name": "Fido",
            "species": "Dog"
           },
           {
            "name": "Mittens",
            "species": "Cat"
         } ]
} 
```

但我更希望它生成的是：

```
{
 "name": "Tres",
 "pets": {
           "Fido": {
               "species": "Dog"
           },
           "Mittens": {
            "species": "Cat"
           }
         }
} 
```

我知道我可以创建自己的视图转换器来手动将我的子对象转换为地图，但如果有任何现有的 Spring 功能，我更愿意使用它。我也尝试过调查杰克逊的一些注释，但还没有找到任何满足我需求的东西。

另外，我不希望将 pets 属性存储为 Person 中的 Map，因为这 2 个对象存储在 MongoDB 中并且位于 2 个不同的集合中。因此，我需要使用自定义转换器对 MongoDB 读取或使用自定义转换器对 HTTP 响应的输出执行转换。

感谢我在 View 转换器或 Mongo 转换器上获得的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:28:15.180

这是我会做的...

```
public class Pet {
   private String name;
   private String species;
   public String getName()
   {
       return name;
   }
   public String getSpecies()
   {
       return species;
   }
} 
```

使用人名作为地图的键，地图的值是宠物列表

```
Map<String,List> peopleWithPets = new HashMap<String, List>();
peopleWithPets.put("Person Name", new ArrayList<Pet>());

JSONObject json = new JSONObject();
json.putAll( peopleWithPets ); 
```

# java - SSD损坏可以更改txt文件中的字符吗？

> ID：12309076
> 
> 赞同：1
> 
> 时间：2012-09-06T22:03:54.807
> 
> 标签：java, filesystems, ntfs, corruption, solid-state-drive

我有一个从一堆文本文件（价值约 50gbs）中读取的 java 应用程序。每个文件的大小从 5kb 到 35mb 不等。这些文件本身是从另一个 java 应用程序创建的，该应用程序按需运行但大约一周内未运行。该文件使用了许多分隔符，例如

> | ; ,

我的应用程序运行良好，但最近开始抛出错误，出现数字格式异常。经过检查，我发现其中一个逗号已被翻转为 $

> 0.43916,22970.43081,6.76182$527640691.38786,|10,

我的问题是这个。由于驱动器损坏，这种“翻转”是否可能发生？整个文件中只有 1 个字符会改变似乎有点牵强。文件上的时间戳验证它没有被另一个程序“意外”修改。

我真的在这个问题上摸不着头脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:20:31.780

这不太可能，但绝对有可能。事实上，只需在 a , (00100100) 和 $ (00101100) 之间更改一位。磁盘通常具有内置校验和和纠错码等内容，因此如果确实发生损坏，它们能够纠正它，或者至少让您知道它已经发生。但是，无声损坏并非闻所未闻，与传统硬盘相比，SSD 更有可能发生。

不过，首先要看的绝对是生成文件的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:52:45.907

原来是驱动器损坏。跑了一个 CHKDISK 并想出了错误。

# php - 您如何将文件上传添加到 Symfony2 DataFixture？

> ID：12309077
> 
> 赞同：16
> 
> 时间：2012-09-06T22:03:56.507
> 
> 标签：php, symfony, doctrine, symfony-2.1

我似乎无法理解如何将文件上传添加到 DataFixture。我正在尝试为我的灯具加载的虚拟内容上传图像。这似乎是有用的知识。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-18T22:23:37.997

虽然这个问题在一年前就被问过，但似乎没有很多关于如何通过理论数据夹具上传文件的信息。我只能找到这个帖子。

我一直在寻找，我采取的方法与 ornj 的方法略有不同。（可能与 Symfony 的更新有关。）

我首先不得不

```
use Symfony\Component\HttpFoundation\File\UploadedFile; 
```

然后使用 copy() 复制图像，因为正如 ornj 所说，它会移动它。

```
copy($art1->getFixturesPath() . '01.jpg', $art1->getFixturesPath() . '01-copy.jpg'); 
```

然后使用以下命令创建并添加文件：

```
$file = new UploadedFile($art1->getFixturesPath() . '01-copy.jpg', 'Image1', null, null, null, true);

$art1->setFile($file);

$manager->persist($art1); 
```

如果我没有在 ''UploadedFile'' 构造函数中将最后一个参数设置为 ''true''，因为它在运行 ''doctrine:fixtures:load'' 时会引发未知错误。此参数为“测试模式是否激活”。看到它是一个固定装置，设置为测试模式是有意义的。

方法 ''getFixturesPath()'' 只是检索存储我的示例图像的路径：

```
// Entity file
public function getFixturesPath()
{
    return $this->getAbsolutePath() . 'web/uploads/art/fixtures/';
} 
```

''getAbsolutePath()'' 方法取自[Doctrine File Uploads](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)。

完整的工作代码：实体：

```
<?php
//src/User/MyBundle/Entity/Art.php

namespace User/MyBundle/Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * 
 * Art Entity
 * 
 * @ORM\Entity(repositoryClass="User\MyBundle\Entity\Repository\ArtRepository")
 * @ORM\Table(name="art")
 * @ORM\HasLifecycleCallbacks
 */
class Art
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=100)
     */
    protected $title;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    protected $path;

    /**
     * @Assert\File(maxSize="6000000")
     */
    private $file;

    private $temp;

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir() . '/' . $this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir() . '/' . $this->path;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded
        // documents should be saved
        return __DIR__ . '/../../../../web/' . $this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw up
        // when displaying uploaded doc/image in the view.
        return 'uploads/art';
    }

    public function getFixturesPath()
    {
        return $this->getAbsolutePath() . 'web/uploads/art/fixtures/';
    }

    /**
     * Sets file.
     *
     * @param UploadedFile $file
     */
    public function setFile(UploadedFile $file = null)
    {
        $this->file = $file;
        // check if we have an old image path
        if (isset($this->path)) {
            // store the old name to delete after the update
            $this->temp = $this->path;
            $this->path = null;
        } else {
            $this->path = 'initial';
        }
    }

    /**
     * Get file.
     *
     * @return UploadedFile
     */
    public function getFile()
    {
        return $this->file;
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->getFile()) {
            // do whatever you want to generate a unique filename
            $filename = sha1(uniqid(mt_rand(), true));
            $this->path = $filename . '.' . $this->getFile()->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        // the file property can be empty if the field is not required
        if (null === $this->getFile()) {
            return;
    }

        // if there is an error moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->getFile()->move($this->getUploadRootDir(), $this->path);

        // check if we have an old image
        if (isset($this->temp)) {
            // delete the old image
            unlink($this->getUploadRootDir() . '/' . $this->temp);
            // clear the temp image path
            $this->temp = null;
        }

        $this->file = null;
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }
} 
```

夹具：

```
<?php
// src/User/MyBundle/DataFixtures/ORM/ArtFixtures.php

namespace User\MyBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\DataFixtures\OrderedFixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Fredzz\LotwBundle\Entity\Art;
use Symfony\Component\HttpFoundation\File\UploadedFile;

class ArtFixtures extends AbstractFixture implements OrderedFixtureInterface
{
    public function load(ObjectManager $manager)
    {
        $art1 = new Art();
        $art1->setTitle('MyTitle');
        $art1->setDescription('My description');

        copy($art1->getFixturesPath() . '01.jpg', $art1->getFixturesPath() . '01-copy.jpg');
        $file = new UploadedFile($art1->getFixturesPath() . '01-copy.jpg', 'Image1', null, null, null, true);
        $art1->setFile($file);

        $art1->setUser($manager->merge($this->getReference('user-1')));

        $manager->persist($art1);
        $manager->flush();
    }
} 
```

希望这对某人有帮助！抱歉，如果有问题。我还在学习 ：）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-07T13:54:17.440

我找到了我的问题的答案。我需要使用该类`Symfony\Component\HttpFoundation\File\File`来创建一个文件。Symfony 将物理移动文件而不创建副本，因此您需要为每个夹具创建一个新文件，使用 use`copy()`来创建可以移动的文件的副本。

```
$image = new Image();
$file = new File('path/to/file.jpg');
$image->file = $file;
$om->persist($image); 
```

类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:12:07.253

您要使用的图像应该位于您的“Web”文件夹中，并且您应该只在 Data Fixture 中使用文件指针字符串（即“/web/images/test.png”）。

您通常应该避免将图像存储在数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T16:44:38.373

我为 PHP 5.3+ 创建了一个[FileUpload](https://github.com/olaferlandsen/FileUpload-for-PHP)类

如何使用？：

[文档](https://github.com/olaferlandsen/FileUpload-for-PHP#documentation)

**来自 RFC 3023（XML 媒体类型）：**

> 顶级媒体类型“文本”对 MIME 实体有一些限制，它们在 [RFC2045] 和 [RFC2046] 中有描述。特别是，不允许使用 UTF-16 系列、UCS-4 和 UTF-32（HTTP[RFC2616] 除外，它使用类似 MIME 的机制）。

**只允许上传 yaml 文件：**

```
<?php
$file = new FileUpload\FileUpload();
$file->setInput( "file" );
$FileUpload->setAllowedMimeTypes(array(
    "text/x-yaml", //RFC 3023
    "application/x-yaml", // Ruby on Rails
    "text/plain",//Possible option( only text plain )
    "text/yaml",//Possible option
    "text/x-yaml",//Possible option
    "application/yaml",//Possible option
));
$file->setDestinationDirectory("/var/www/html/myapp/");
$file->save();
if ($file->getStatus()) {
    echo "Okay";
}
?> 
```

**所有 mime 类型的示例：**

```
<?php
$file = new FileUpload\FileUpload();
$file->setInput( "file" );
$file->save();
if ($file->getStatus()) {
    echo "is Upload!";
}
?>
<html>
    <head>
        <title>FileUpload Example</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <form method="post" action="" enctype="multipart/form-data">
            <input type="file" name="file" />
            <input type="submit" value="Upload now!" />
        </form>
    </body>
</html> 
```

GitHub： [https ://github.com/olaferlandsen/FileUpload-for-PHP](https://github.com/olaferlandsen/FileUpload-for-PHP)

# c# - Visual Studio C# 2010 Express Debug 运行速度比 Release 快

> ID：12309080
> 
> 赞同：7
> 
> 时间：2012-09-06T22:04:09.203
> 
> 标签：c#, debugging, visual-studio-debugging, visual-c#-express-2010

我有一个正好有 2 个线程的 Windows 窗体应用程序。这些线程彼此之间的交互为零，Ala 第一个线程运行而不会与第二个线程混淆。它们之间没有同步，因为没有必要发生这种情况。第一个线程处理应用程序的 UI，更改颜色和标签，并运行一个计时器以捕获一些用户输入，该计时器每 200 毫秒触发一次。第二个线程涉及更多，并不断运行其编码，直到用户通过退出应用程序关闭。

第二个线程首先从内存中读取数据并将数据存储到一个列表中，然后使用这些数据进行一些计算。我有一个 StopWatch 类计时器来测量完成第二个线程的一次迭代所需的时间。该计时器在线程一开始就重置并启动，然后在线程完成迭代后停止并打印到控制台。这是我获取性能数据的地方。我一直允许线程运行至少 1000 次迭代，然后进行平均，不包括第一次运行。

构建的调试版本，即由 VSHOST 运行的构建，或者在 Visual Studio C# 2010 Express 中按 F5 时运行的构建。计时平均为 0.00035 秒，即 0.35 毫秒。

当应用程序在 VSHOST 之外运行时，通过按 Ctrl-F5 或通过从按 BUILD 时生成的 .exe 运行应用程序。我还使用 REBUILD 进行了绝对零更改的测试。时间平均为 0.365 秒，即 365 毫秒。发布版本大约慢了 1000 倍。

我完全不知道发生了什么。VSHOST 的作用是让程序运行得如此之快。我已确保所有变量初始化均已计算在内且正确无误。话虽如此，我不知道为什么会发生这样的事情。关于为什么我得到这样的性能下降的任何见解？

附带说明一下，我使用的计算机是 64 位的，它具有带超线程的四核 i7、16 GB 内存和双 HD6750。因此，线程过多似乎不是问题，这里唯一可能存在问题的是超线程。

我的应用程序形式的代码片段。但是，由于读取的内存地址是减速发生的地方，因此无法提供工作代码。

```
namespace Test Snippet
{
public struct Data
{
    public float X;
    public float Y;
    public float Z;
    public float dX;
    public float dY;

    public Data(int c)
    {
        this.X = ReadFloat(Base + 0x50 + (c * 0x10));
        this.Y = ReadFloat(Base + 0x50 + (c * 0x10));
        this.Z = ReadFloat(Base + 0x50 + (c * 0x10));
        if (this.Z == 1)
        {
            targetindex = c;
        }
        this.dX = 0;
        this.dY = 0;
    }
}
class Class1
{
    public int Base = new int();
    public List<Data> data = new List<Data>();
    public int targetindex = new int();
    public Data targetdata = new Data();

    public void GetData()
    {
        while (true)
        {
            data.Clear();
            for (int c = 0; c < 64; c++)
            {
                Data tempdata = new Data();
                teampdata = new Data(c);
                data.Add(tempdata);
            }
            if (data.Count != 0)
            {
                targetdata = data[targetindex];
                data.RemoveAt(targetindex);
                targetdata.dX = ReadFloat(Base + 0x66);
                targetdata.dY = ReadFloat(Base + 0x65);
                Data[] tempdatarray = new Data[data.Count];
                for (int j = 0; j < tempdatarray.Length; j++)
                {
                    tempdatarray[j].dX = (float)Math.Acos(targetdata.dX * 10);
                    tempdatarray[j].dY = (float)Math.Acos(targetdata.dY * 10);
                }
            }

        }
    }
} 
```

}

编辑:: 我尝试了相同的过程，但没有使用线程。我有由我用来捕获用户输入的计时器调用的线程函数。我得到了同样的结果。所以这意味着线程似乎不是问题。我还在另一台计算机上进行了测试，由于某种原因，我没有得到巨大的差异。这使我相信我的计算机可能有问题，或者由于其超线程能力而处理我的处理器如何处理线程的问题。任何人都知道超线程是否会导致未在程序中明确使用它的多线程应用程序出现问题。老实说，我不知道如何设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:28:29.557

我没有看到任何内容表明您正在选择发布版本。这是工具栏上的一个选项。如果您直接运行调试版本，它可能正在寻找它找不到的东西。

编辑：除了我错过的标题！！！！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:07:05.967

所以首先，你应该做一些性能分析。要么使用分析工具，要么只使用计时器在某处打印一些消息，显示某些事情需要多长时间 - 这应该至少让你确定哪一行代码运行缓慢，即使它没有告诉你它为什么运行在调试器下慢得多。如果没有这些信息，您所拥有的只是猜测。

现在，开始猜测......

根据这些观察，我认为问题与控制台的使用有关

*   写入控制台窗口本身实际上相对较慢 - 您可以在运行向控制台写入大量内容的应用程序时看到这一点。如果您保持窗口打开，则运行需要很长时间，但是如果您最小化控制台窗口，则相同的操作可以运行得**更快**。
*   据我了解，您每 0.35 毫秒向控制台写入 1 条消息。那是**很多**消息。
*   根据您运行应用程序的方式，Visual Studio 在调试时实际上会将控制台输出重定向到 Visual Studo 内的“输出”窗口。

我的猜测是，Visual Studio 中的控制台窗口比不调试时使用的等效机制要快得多，并且额外减速的原因实际上是您的日志记录代码。尝试取出基于控制台的日志记录并记录到文件中，看看它是否有任何区别，或者甚至只是减少记录消息的次数，例如记录完成 100 次迭代所需的时间 - 这将减少影响（如果任何）控制台对您的性能的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:50:45.410

这个问题与超线程无关。我找不到链接，但英特尔在 2004 年对它的工作原理进行了很好的技术描述（没有任何营销炒作）。但它的短处是：Core 0 可能是一个真正的核心，Core 1 可能是一个与 Core 0 共享相同硬件的逻辑核心。对于我们的观点（应用程序开发人员）来说，Core 0 和 Core 1 都是真实的，而我们不是必须关心核心 1 是逻辑核心的事实（除了显而易见的，逻辑核心总体上只提供了大约 13-30% 的性能提升，这在技术描述中再次提到）。Windows 在跨真实和逻辑核心调度线程方面做得很好。您所要做的就是创建两个线程，Windows 将在核心 0 和核心 1 上各运行一个。您可以在 BIOS 中禁用超线程，

话虽如此，尝试超线程并不能帮助您解决问题。您应该像已经提到的那样做并分析发布版本。还要在事件日志中寻找奇怪的错误。并运行 sysinternal 的 Process Explorer 以查看是否在 I/O 上花费了太多时间。谁知道呢，也许发布版本以某种方式在这台机器上的设备驱动程序中触发了一些古怪的行为。

编辑：这是英特尔的技术描述（耶维基百科），实际上是从 2002 年开始的：http: [//download.intel.com/technology/itj/2002/volume06issue01/vol6iss1_hyper_threading_technology.pdf](http://download.intel.com/technology/itj/2002/volume06issue01/vol6iss1_hyper_threading_technology.pdf)

# php - 当我尝试上传 swf 文件时，我无法获取 $_POST 数据

> ID：12309082
> 
> 赞同：0
> 
> 时间：2012-09-06T22:04:11.530
> 
> 标签：php, html, file-upload

我有一个简单的 html 表单，例如：

```
<form action="http://localhost/index.php" method="post" accept-charset="utf-8" enctype="multipart/form-data">
<input type="text" name="name"/> Name<br/><br/>
Content<br/>
<textarea name="content" style="width:350px;height: 350px;">

</textarea><br/>
Category: <select name="category">
        <option value="1">ABC</option>
        <option value="2">CBA</option>
    </select>
<br/>
Omage: <input type="file" name="image"/>
<br/>
Swf: <input type="file" name="swf"/><br/>
<input type="submit" value="Save"/>
</form> 
```

如果我在上传文件时选择图像，我可以从 $_POST 获取数据，例如：

```
Array ( [name] => example [content] => try [category] => 1 ) 
```

但是当我选择 .swf 文件时，结果是：

```
Array ( ) 
```

问题是什么？如何上传 .swf 文件？

# css - 撤消伪元素 ::before 和 ::after 规则

> ID：12309086
> 
> 赞同：14
> 
> 时间：2012-09-06T22:04:31.297
> 
> 标签：css, pseudo-element

> **可能重复：**
> [有没有办法重置元素的 :after/:before CSS 规则？](https://stackoverflow.com/questions/9798210/is-there-any-way-to-reset-after-before-css-rules-for-an-element)

有没有一种巧妙的方法来撤消元素上的所有 ::before 和 ::after 伪元素规则？我想删除使用 Twitter 引导样式的下拉菜单上的箭头效果。我是否必须一一取消设置每条规则，还是可以通过其他方式将其清除？例如

```
.navbar .nav > li > .dropdown-menu::after {
position: absolute;
top: -6px;
left: 10px;
display: inline-block;
border-right: 6px solid transparent;
border-bottom: 6px solid white;
border-left: 6px solid transparent;
content: '';
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-06T22:13:50.943

[http://jsfiddle.net/LQTmF/](http://jsfiddle.net/LQTmF/)

```
<selector>:after{
    content:none;
} 
```

# objective-c - 按键对数组中字典中的字符串进行排序？

> ID：12309094
> 
> 赞同：0
> 
> 时间：2012-09-06T22:05:10.390
> 
> 标签：objective-c, arrays, dictionary, plist, sorting

我有一个 plist 文件，其中包含有关人员的数据（姓名、职务、电话、电子邮件）。这里不解释，而是显示结构的示例：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Kontakt</key>
    <array>
        <array>
            <dict>
                <key>title</key>
                <string>Teacher</string>
                <key>name</key>
                <string>Adam Scott</string>
                <key>phone</key>
                <string>tel://1234-567890</string>
                <key>email</key>
                <string>adam.scott@email.com</string>
            </dict>
            <dict>
                <key>title</key>
                <string>Teacher</string>
                <key>name</key>
                <string>Adam Scott</string>
                <key>phone</key>
                <string>tel://1234-567890</string>
                <key>email</key>
                <string>adam.scott@email.com</string>
            </dict>
            <dict>
                <key>title</key>
                <string>Teacher</string>
                <key>name</key>
                <string>Adam Scott</string>
                <key>phone</key>
                <string>tel://1234-567890</string>
                <key>email</key>
                <string>adam.scott@email.com</string>
            </dict>
        </array>
    </array>
</dict>
</plist> 
```

在代码中，我想对键***名***的字符串进行排序。然后我将在表格视图中显示排序后的数组。有谁知道如何做到这一点？

# ruby - 休息客户端错误 412

> ID：12309096
> 
> 赞同：0
> 
> 时间：2012-09-06T22:05:18.610
> 
> 标签：ruby, rest-client

我正在使用 ruby​​ 和 rest-client gem。

我尝试与 RESTFUL API 进行通信。

如果我使用以下内容，它工作正常：

```
RestClient.post "http://www.restfulapi.com/students/284433/enroll", {:token => token, :param1 => "56303", :param2 => ""}.to_json, :content_type => :json 
```

但如果我决定使用活动资源样式：

```
api = RestClient::Resource.new "http:/www.restfulapi.com"

response = api["/students/284433/enroll"].post  :params => {:token => token, :param1 => "56303", :param2 => ""} 
```

我收到错误 412 Precondition Failed (RestClient::PreconditionFailed)

我不确定到底有什么区别以及为什么一个工作而不是另一个工作。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-06T22:18:18.817

Http 状态`412 Precondition Failed`意味着服务器在您的请求中不符合正确的标头。因此，您似乎必须手动设置它们。

可能这会有所帮助。

*   rfc2616 – [http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
*   rest_client 文档——http [://rubydoc.info/gems/rest-client/1.6.7/frames](http://rubydoc.info/gems/rest-client/1.6.7/frames)

# r - 向数据框添加名称的功能

> ID：12309098
> 
> 赞同：7
> 
> 时间：2012-09-06T22:05:28.813
> 
> 标签：r, dataframe, names

我有一个没有列的数据框：

```
df<-data.frame(v1=c(1:10), v2=seq(1, 100, length=10)) 
```

我想将标题名称更改为“X”和“Y”

我知道我可以这样做：

```
names(df)<-c("X","Y") 
```

我想做的是编写一个函数，在其中我可以将数据帧作为参数传递，并使用这些标题名称放置标题。

我试过了：

```
get.names<- function(x)
    {names(x)<-c("X", "Y")} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T22:10:05.400

您的函数设置名称；你只需要返回对象。

```
get.names<- function(x) {
    names(x)<-c("X", "Y")
    x
} 
```

或者，您可以使用该`setNames`功能

```
> setNames(data.frame(v1=c(1:10), v2=seq(1, 100, length=10)), c("X","Y"))
    X   Y
1   1   1
2   2  12
3   3  23
4   4  34
5   5  45
6   6  56
7   7  67
8   8  78
9   9  89
10 10 100 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T22:12:00.283

有一个 R 函数已经这样做了，尽管它不是修改您的环境的数据框，而是返回重命名的数据框：

```
df<-`names<-`(df, new_names) 
```

事实上，当你调用`names(df)<-`...

* * *

请注意，R 中几乎没有函数修改它们已传递的值——几乎所有函数的风格都是“功能性的”——执行对新副本的更改并返回它。出于这个原因，您应该期望看到并编写大量代码，格式如下：`x=f(x)`.

* * *

您可能会发现另一种有用的技术是包中的`rename`函数`reshape`：

```
df<-rename(df,c(v1="X", v2="Y")) 
```

这只会更改指定列的名称。它还可以重命名列表和向量中的名称！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T02:47:22.433

如果您希望使用`names<-`and避开内部复制`df<-rename(df,c(v1="X", v2="Y"))`，`setNames`您可以使用该`data.table`包

```
# some example data
library(data.table)
DF <- data.frame(a = 1:5, b = 1:5)
DT <- data.table(DF) 
```

您可以使用`data.table`通过引用（无需复制）设置名称`setnames`

```
setnames(DT, new = c('new_name1','newname2'))
DT
   new_name1 newname2
1:         1        1
2:         2        2
3:         3        3
4:         4        4
5:         5        5
# you can change only a subset by defining old and new
setnames(DT, old = 'new_name1', new = 'blah')
DT
        blah newname2
1:         1        1
2:         2        2
3:         3        3
4:         4        4
5:         5        5 
```

如果不想使用data.tables，可以使用package中的`setattr`函数`data.table`（很像package中的同名函数`bit`）

```
setattr(DF, 'names', c('oh','look'))
DF

  oh look
1  1    1
2  2    2
3  3    3
4  4    4
5  5    5

 bit::setattr(DF, 'names', c('yip','hee'))
DF
  yip hee
1   1   1
2   2   2
3   3   3
4   4   4
5   5   5 
```

# c# - 如何在控制台窗口中打印控制字符

> ID：12309104
> 
> 赞同：3
> 
> 时间：2012-09-06T22:05:55.570
> 
> 标签：c#

我有以 ASCII (09) 或 Unicode 分配的制表符

```
char ch = '\x09';
(or)
char ch = '\u0009'; 
```

如何`'\t'`在控制台窗口中打印？

以下都不起作用。（也许它打印一个选项卡，但不是'\ t'的规范表示）

```
Console.Write(ch);
Console.Write(ch.ToString()) 
```

猜猜，`Console.Write()`这不是正确的方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:05:19.613

不显示控制字符，因为这是控制字符的全部内容。毕竟，在一段文本中放置一个标签的原因是有一个标签。

理想情况下，我们可以使用标准符号`␀␁␂␃␄␅␆␇␈␉␊␋␌␍␎␏␐␑␒␓␔␕␖␗␘␙␚␛␜␝␞␟␠␡␤␥␦`，但它们没有很好的字体支持（在我看来，现在删除表格二和替换表格二的符号显示不正确），控制台的情况更糟。

您的问题也不清楚您是想要规范表示 ( `U+0009`) 还是 C# 转义 ( `\t`)，因为您在请求另一个之后立即请求一个（“'\t' 的规范表示”）。

假设是后者，我们的问题在于 C# 只为 8 个控制字符提供了这样的快捷方式转义。该过程还要求我们`\`出于与 C# 相同的原因进行转义——否则我们如何检测是`\t`指制表符，还是表示`\`后跟`t`？

因此，假设您想要一个可以再次直接在 C# 中使用的表单，我们可以执行以下操作：

```
public static class StringEscaper
{
    public static string EscapeForCSharp(this string str)
    {
        StringBuilder sb = new StringBuilder();
        foreach(char c in str)
            switch(c)
            {
                case '\'': case '"': case '\\':
                    sb.Append(c.EscapeForCSharp());
                    break;
                default:
                    if(char.IsControl(c))
                        sb.Append(c.EscapeForCSharp());
                    else
                        sb.Append(c);
                    break;
            }
        return sb.ToString();
    }
    public static string EscapeForCSharp(this char chr)
    {
        switch(chr)
        {//first catch the special cases with C# shortcut escapes.
            case '\'':
                return @"\'";
            case '"':
                return "\\\"";
            case '\\':
                return @"\\";
            case '\0':
                return @"\0";
            case '\a':
                return @"\a";
            case '\b':
                return @"\b";
            case '\f':
                return @"\f";
            case '\n':
                return @"\n";
            case '\r':
                return @"\r";
            case '\t':
                return @"\t";
            case '\v':
                return @"\v";
            default:
                //we need to escape surrogates with they're single chars,
                //but in strings we can just use the character they produce.
                if(char.IsControl(chr) || char.IsHighSurrogate(chr) || char.IsLowSurrogate(chr))
                    return @"\u" + ((int)chr).ToString("X4");
                else
                    return new string(chr, 1);
        }
    }
} 
```

现在我们可以用一个字符串和一个字符来测试它。

单字符：

```
Console.WriteLine('\t'.EscapeForCSharp()); 
```

输出：

```
\t 
```

细绳：

```
string str = "The following string contains all the \"C0\" and \"C1\" controls, escaped with \\ as per C# syntax: "
  + "\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\u0008\u0009\u000A\u000B\u000C\u000D\u000E\u000F\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001A\u001B\u001C\u001D\u001E\u001F\u007F\u0080\u0081\u0082\u0083\u0084\u0085\u0086\u0087\u0088\u0089\u008A\u008B\u008C\u008D\u008E\u008F\u0090\u0091\u0092\u0093\u0094\u0095\u0096\u0097\u0098\u0099\u009A\u009B\u009C\u009D\u009E\u009F";
Console.WriteLine(str.EscapeForCSharp()); 
```

输出：

```
The following string contains all the \"C0\" and \"C1\" controls, escaped with \\ as per C# syntax: \0\u0001\u0002\u0003\u0004\u0005\u0006\a\b\t\n\v\f\r\u000E\u000F\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001A\u001B\u001C\u001D\u001E\u001F\u007F\u0080\u0081\u0082\u0083\u0084\u0085\u0086\u0087\u0088\u0089\u008A\u008B\u008C\u008D\u008E\u008F\u0090\u0091\u0092\u0093\u0094\u0095\u0096\u0097\u0098\u0099\u009A\u009B\u009C\u009D\u009E\u009F 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:27:01.073

没有内置方法可以将字符打印为 C# 转义序列。

只需根据需要使用字典将字符映射到字符串：

```
var map = new Dictionary<char, string>{ {'\t', @"\t"}} 
```

并在输出期间使用它来替换字符（如果存在于地图中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:43:43.587

\t 有一个特殊的含义（一个标签），所以如果你想打印它，你需要转义'\'。

```
Console.Writeline("\tHello World");
prints:     Hello World

Console.Writeline("\\tHello World");
prints: \tHello World 
```

您还可以使用@-语法来删除\t、\n、\'...的特殊含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:36:40.300

尝试这个：

```
 string tab = "\u0009";
    Console.Write(tab.Replace(tab, "\\t")); 
```

# c# - MemoryStream 的 byte[] 缓冲区可以具有可变大小吗？

> ID：12309107
> 
> 赞同：3
> 
> 时间：2012-09-06T22:06:03.647
> 
> 标签：c#, serialization, memorystream, base-class-library

我正在将一个对象序列化为`byte[]`using `MemoryStream`：

```
byte[] serialized = new byte[1000];
using (MemoryStream stream = new MemoryStream(serialized))
    using (TextWriter textWriter = new StreamWriter(stream))
        serializer.Serialize(textWriter, stuffToSerialize); 
```

有什么办法可以设置`'serialized'`根据大小增长`stuffToSerialize`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T22:08:27.063

无参数构造函数`new MemoryStream()`使用一个。

然后将其序列化，然后当您需要创建实际使用的缓冲区的任何长度的副本的`byte[]`调用时`ToArray()`（内部缓冲区通常在任何时候都会有一些增长的空间，这通常是不可取的，`ToArray()`给您实际使用的关心）。

在以下代码的末尾，它将具有与您的代码相同的效果，您是否能够预测正确的大小：

```
byte[] serialized;
using (MemoryStream stream = new MemoryStream())
{
  using (TextWriter textWriter = new StreamWriter(stream))
  {
    serializer.Serialize(textWriter, stuffToSerialize);
  }
  // Note: you can even call stream.Close here is you are paranoid enough
  // - ToArray/GetBuffer work on disposed MemoryStream objects.
  serialized = stream.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T22:12:38.247

如果您使用采用提供的现有`byte[]`缓冲区的构造函数，则不会，因为一旦分配的数组具有固定大小。

默认构造函数以及任何其他不接受`byte[]`参数的构造函数将根据需要将现有缓冲区替换为更大的缓冲区。请注意，如果您使用[`GetBuffer()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx): 如果在调用 GetBuffer() 后将流附加到，则`byte[]`可能会替换实际支持的流，这可能会使事情复杂化。另请注意，调用 时`GetBuffer()`，流数据可能不在返回数组的索引 0 处开始！

要取出内容，请使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)将它们作为字节数组获取，或[`WriteTo(Stream)`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.writeto.aspx)将 的内容`MemoryStream`倒入另一个流中。

# java - 将子字符串与 Java 中的字符串进行比较

> ID：12309109
> 
> 赞同：3
> 
> 时间：2012-09-06T22:06:11.947
> 
> 标签：java, if-statement, comparison, substring

所以基本上，用户输入 2 个字符串（ CATSATONTHEMAT AT ），我们需要计算第二个字符串出现在第一个字符串中的次数（所以这里的答案是 3 ）

这是我到目前为止所拥有的，它一直在说

“线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：81223 at java.lang.String.substring(Unknown Source) at practice.main(practice.java:60)”

任何帮助，将不胜感激！我只是看不到我哪里出错了

```
 String s = scan.next(); // CATSATONTHEMAT
    String t = scan.next(); // AT

    int j= 0;

    for ( int i = 0 ; i < s.length(); i++){
        int k = t.length();
        String newstring = s.substring(i,i+k); // I printed this and the substring works so the if statement might not be working..

        if(newstring.equals(t))
            j++;   // if the new substring equal "AT" then add 1
        }

    System.out.printf("%d", j);  // suppose to print just 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:08:24.303

当 i 接近 s 的末尾并且 k 带您通过字符串的末尾时，会发生 outOfBounds 异常。

您需要将循环更改为仅达到 s.length()-t.length()

```
for ( int i = 0 ; i < s.length()-t.length(); i++){ 
```

我还建议将 int k = t.length() 带出 for 循环。您不需要每次迭代都分配它，因为每次迭代都应该相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:09:17.670

我认为您最好使用正则表达式。查看本教程以获取提示：[http ://docs.oracle.com/javase/tutorial/essential/regex/matcher.html](http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T00:40:03.220

如果 beginIndex 为负数或
endIndex 大于此 String 对象的长度，则会发生 IndexOutOfBoundsException，

或 beginIndex 大于 endIndex。

在下面的行中，这个问题发生在循环从 0 运行到 s.length 但它应该从 0 运行到 s.length-t.length。

```
String newstring = s.substring(i,i+k); 
```

# ios - 如何在 iOS 中创建一个空白的 CSV 文件

> ID：12309113
> 
> 赞同：0
> 
> 时间：2012-09-06T22:06:31.323
> 
> 标签：ios, ios5, csv, nsfilemanager

我正在尝试创建一个空白 CSV 文件，然后使用 CHCSVWriter 对其进行写入，但我没有在库中看到创建没有内容的新文件的方法。我可以使用 iOS 级别的东西来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:14:38.603

你有没有尝试过

```
NSString *content = @"content here";
NSData *fileContents = [content dataUsingEncoding:NSUTF8StringEncoding];
[[NSFileManager defaultManager] createFileAtPath:@"/my/path/to/file.csv"
                                contents:fileContents
                                attributes:nil]; 
```

如果你想要一个空白文件，请尝试设置`contents:nil`

# scala - 为什么 `object` 中的 `val` 不会自动成为 final？

> ID：12309114
> 
> 赞同：35
> 
> 时间：2012-09-06T22:06:32.587
> 
> 标签：scala, field, final

`val`s not (?) 在单例对象中自动成为 final的原因是什么？例如

```
object NonFinal {
   val a = 0
   val b = 1

   def test(i: Int) = (i: @annotation.switch) match {
      case `a` => true
      case `b` => false
   }
} 
```

结果是：

```
<console>:12: error: could not emit switch for @switch annotated match
          def test(i: Int) = (i: @annotation.switch) match {
                                                     ^ 
```

然而

```
object Final {
   final val a = 0
   final val b = 1

   def test(i: Int) = (i: @annotation.switch) match {
      case `a` => true
      case `b` => false
   }
} 
```

编译时没有警告，因此可能会生成更快的模式匹配表。

不得不添加`final`对我来说似乎纯粹是烦人的噪音。不是`object`决赛本身，因此也是它的成员？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T22:35:53.807

这在[规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中明确解决，它们自动是最终的：

> final 类或对象的成员也是隐式的 final，因此`final`修饰符通常对它们也是多余的。但是请注意，常量值定义（第 4.1 节）确实需要显式`final`修饰符，即使它们是在最终类或对象中定义的。

Your `final`-less example compiles without errors (or warnings) with 2.10-M7, so I'd assume that there's a problem with the `@switch` checking in earlier versions, and that the members are in fact final.

* * *

Update: Actually this is more curious than I expected—if we compile the following with either 2.9.2 or 2.10-M7:

```
object NonFinal {
  val a = 0
}

object Final {
  final val a = 0
} 
```

`javap` does show a difference:

```
public final class NonFinal$ implements scala.ScalaObject {
  public static final NonFinal$ MODULE$;
  public static {};
  public int a();
}

public final class Final$ implements scala.ScalaObject {
  public static final Final$ MODULE$;
  public static {};
  public final int a();
} 
```

You see the same thing even if the right-hand side of the value definitions isn't a constant expression.

So I'll leave my answer, but it's not conclusive.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-11T05:52:57.070

You're not asking "why aren't they final", you're asking "why aren't they inlined." It just happens that final is how you cue the compiler that you want them inlined.

The reason they are not automatically inlined is separate compilation.

```
object A { final val x = 55 }
object B { def f = A.x } 
```

When you compile this, B.f returns 55, literally:

```
public int f();
  0: bipush        55
  2: ireturn 
```

That means if you recompile A, B will be oblivious to the change. If x is not marked final in A, B.f looks like this instead:

```
 0: getstatic     #19                 // Field A$.MODULE$:LA$;
  3: invokevirtual #22                 // Method A$.x:()I
  6: ireturn 
```

Also, to correct one of the other answers, final does not mean immutable in scala.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T18:15:56.443

To address the central question about final on an object, I think this clause from the spec is more relevant:

> A constant value definition is of the form final val x = e where e is a constant expression (§6.24). The final modifier must be present and no type annotation may be given. References to the constant value x are themselves treated as constant expressions; in the generated code they are replaced by the definition’s right-hand side e.

Of significance:

*   No type annotation may be given
*   The expression e is used in the generated code (by my reading, as the original unevaluated constant expression)

It sounds to me like the compiler is required by the spec to use these more like macro replacements rather than values that are evaluated in place at compile time, which could have impacts on how the resulting code runs.

I think it is particularly interesting that no type annotation may be given.

This, I think points to our ultimate answer, though I cannot come up with an example that shows the runtime difference for these requirements. In fact, in my 2.9.2 interpreter, I don't even get the enforcement of the first rule.

# php - php - file_get_contents/fread 连续输入流

> ID：12309116
> 
> 赞同：1
> 
> 时间：2012-09-06T22:06:57.693
> 
> 标签：php, http

对于我的项目，我必须从我的（php）网站与远程设备进行通信。我需要实现的命令之一发送一个连续的数据流，直到它接收到来自用户的更多输入。

所以我的问题是如果我使用这会是一个问题`file_get_contents()`吗？还是我应该使用`fread()`？我的输入是一个字符串的形式，它`fread()`说我应该使用`file_get_contents()`，但是如果我使用`file_get_contents()`，我需要把它放在一个循环中，然后在数据包之间发送数据到我的设备以停止它发送数据吗？每次我打电话时，循环会关闭我的连接并打开一个新连接`file_get_contents()`吗？

我每天可以使用的数据量也受到限制，如果我使用`file_get_contents()`它并且它限制了块大小为 8KB 的块大小，即我一天数据的 8%。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:13:49.863

使用`fsockopen`,`fread`等... 的目的`file_get_contents`是读取文件，而不是按照您想要的方式发送/接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:21:06.433

我会使用`fopen`和使用`stream_context_create`

```
$options = array(
    'http' => array(
        'method' => 'GET',
    ),
);
$context = stream_create_context($options);
$fh = fopen($your_url, 'r', false, $context); 
```

这将允许您将流作为文件使用。让您可以访问任何您想用它做的事情......比如逐行解析它`fgets`或其他任何东西。

# spring - Spring使用主机名初始化bean

> ID：12309117
> 
> 赞同：7
> 
> 时间：2012-09-06T22:07:02.447
> 
> 标签：spring, initialization

我需要用当前主机名填充 bean 的属性，就像调用返回它一样：InetAddress.getLocalHost().getHostName()

它应该是这样的：

`<bean id="hostname" value="InetAddress.getLocalHost().getHostName()" />`

`<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">`

`<property name="schedulerName" ref="hostname" />`

`</bean>`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T22:31:12.253

这可以通过 xml 稍微简单地完成，详见Spring 文档的[3.3.2.2](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)和[3.3.2.3部分。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-class-instance-factory-method)

总之，第 3.3.2.2 节建议了一种调用`static`类方法的方法。可以这样做：

```
<bean id="myBean"
  class="com.foo.MyClass"
  factory-method="myStaticMethod"/> 
```

这将在 中创建一个`ApplicationContext`名称为的 bean，该 bean`myBean`由调用返回的对象填充`MyClass.myStaticMethod()`。

但这只是一半，因为我们只有`static`方法的结果（在您的情况下是第一次调用）。

3.3.2.3 节详细介绍了如何调用已经存在的 bean 的非静态方法`ApplicationContext`。可以这样做：

```
<bean id="myOtherBean"
  factory-bean="myBean"
  factory-method="myNonStaticMethod"/> 
```

这将在 中创建一个`ApplicationContext`名称为的 bean，该 bean`myOtherBean`由调用返回的对象填充`myBean.myNonStaticMethod()`，其中`myBean`bean 是从`ApplicationContext`.

当放在一起时，你应该能够实现你所追求的。

```
<bean id="localhostInetAddress"
  class="java.net.InetAddress"
  factory-method="getLocalHost"/>

<bean id="hostname"
  factory-bean="localhostInetAddress"
  factory-method="getHostName"/> 
```

当然，更简单的方法是使用[Java Configuration](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)。

```
@Configuration
public class InetConfig {
    @Bean
    public String hostname() {
        return InetAddress.getLocalHost().getHostName();
    }
} 
```

# javascript - 随着浏览器窗口变大/变小，如何捕获元素的宽度

> ID：12309121
> 
> 赞同：0
> 
> 时间：2012-09-06T22:07:14.677
> 
> 标签：javascript, html, syntax

随着浏览器窗口变大/变小，如何使用 javascript 来捕获元素的宽度？

我要解决的问题是
我在 td 中有几行文本，但如果我的内容的长度超过了 td 的长度，我只想显示“...”。随着浏览器窗口的变化，我想要动态确定我是否应该使用 ... 或者有足够的空间容纳我的内容。

这与分辨率无关，与窗口的实际大小有关，您可以在其中拖动窗口的角以使其变大/变小

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:24:20.727

您可以通过监听 window.onresize 事件（jquery：[http](http://api.jquery.com/resize/) ://api.jquery.com/resize/ ）自己实现它。或者只使用如下插件：

[http://dotdotdot.frebsite.nl/](http://dotdotdot.frebsite.nl/)

我在谷歌搜索“省略号 jquery”，顺便说一句。省略号是“...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:25:01.990

该`window`对象有一个`onresize`您可以收听的事件：

```
 window.onresize = function () {
    // if the size is small add `...` if large remove `...`
 } 
```

# entity-framework - 如何不在 EF 中映射外键 ID（代码优先）？

> ID：12309123
> 
> 赞同：1
> 
> 时间：2012-09-06T22:07:23.980
> 
> 标签：entity-framework, ef-code-first

好的，让我先解释一下这不是我的代码。我从另一名员工那里接手了一个项目。无论如何，这个项目使用的是 Code First。我正在修复一个性能问题，但我遇到了一个奇怪的错误。

我基本上有两个映射类要处理。为了简洁起见，我将编写简短的版本。

```
public class User
{
    public int UserId { get; set; } //primary key
    //attributes here, not important

    public int UserProfileId { get; set; } //foreign key id *i added this*
    public UserProfile UserProfile { get; set; } //foreign key *i added this*
}

public class UserProfile
{
    public int Id { get; set; } //primary key
    //attributes here, not important
} 
```

现在，这是一个非常标准的外键关系。但是，有一个警告。这些表是从旧表中删除的，如下所示：

```
modelBuilder.Entity<User>().ToTable("application_user"); 
```

然后，使用名称将每个列映射到拉取表的列。但是，我正在尝试将这两个表合并为一对一的关系，如下所示：

```
modelBuilder.Entity<User>().HasRequired(x => x.UserProfile)
            .WithMany()
            .HasForeignKey(u => u.UserProfileId); //ERROR HERE - THIS COLUMN DOES NOT EXIST IN THE ORIGINAL TABLE 
```

现在，据我所知，错误是在 PREVIOUS 表中，没有 (UserProfileId) 的外键列，所以我收到了 Invalid Column Name 错误。

有没有办法我不能映射外键 id 列并仍然保持一对一的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:49:01.560

由于您说 User 表上没有 UserProfileId ，因此您定义的是 1:1 关系，其中 User 和 UserProfile 表共享一个主键对吗？

如果是这样，您可以像这样映射它：

```
 modelBuilder.Entity<User>()
        .HasRequired(u => u.UserProfile)
        .WithRequiredPrincipal(); 
```

这将生成一个这样的数据库：

![在此处输入图像描述](../Images/d8e34b4bc52ab0fd81773bb647797b11.png)

# javascript - 延迟代码执行直到下载完成

> ID：12309127
> 
> 赞同：1
> 
> 时间：2012-09-06T22:07:48.380
> 
> 标签：javascript, ajax

我正在编写一个脚本，它将为我动态更新论坛页面。这不仅方便，而且我认为这是一个很好的练习，可以让您更熟悉 Javascript 和 DOM。

要获取更新的帖子列表，我必须获取页面的最新版本。我用 XmlHttpRequest 来做这件事：

```
function getNewDOM(url) {
    console.log("getNewDOM()");
    // Get the page
    var request = new XMLHttpRequest();
    request.open("GET", url, false);
    request.send(null);  

    var new_html = request.responseText;
    var new_dom = document.createElement("div");
    // Strip the HTML down to the contents of the <body> tag.
    new_html = new_html.replace(/<!DOCTYPE.*?body\ id.*?>/, "");
    new_html = new_html.replace(/\/body>.*?<\/html>/, "");
    console.log("Strip HTML");
    new_dom.innerHTML = new_html;

    return new_dom;

} 
```

如您所见，请求当前是同步的。出于我相信你们都知道的原因，这很糟糕。使用异步请求并不能完成工作，因为其余代码在页面完成下载之前开始执行。

我认为 setTimeout() 是我需要使用的。像这样的东西？

```
function getNewDOM(url) {
    console.log("getNewDOM()");
    // Get the page
    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.send(null);  

    setTimeout(function() {

        var new_html = request.responseText;
        var new_dom = document.createElement("div");
        // Strip the HTML down to the contents of the <body> tag.
        new_html = new_html.replace(/<!DOCTYPE.*?body\ id.*?>/, "");
        new_html = new_html.replace(/\/body>.*?<\/html>/, "");
        console.log("Strip HTML");
        new_dom.innerHTML = new_html;

        return new_dom;

    }, 15000);

} 
```

问题是我不知道如何将该返回值返回到原始`getNewDOM()`函数，以便我可以将它返回到那里。即使我这样做了，它不会只是返回一些未定义的值 in `getNewDOM()`，因为超时中的函数直到完成后才会运行`getNewDOM()`？这仍然会让我处于现在的境地。

我对 AJAX 完全陌生。我知道使用 jQuery 可能有一些简单的方法，但如果可能的话，我想用 vanilla Javascript 来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:11:21.567

> 我认为 setTimeout() 是我需要使用的

不，因为您永远不知道异步 ajax 请求何时完成。您需要的是绑定到`readystatechange`事件：

```
var request = new XMLHttpRequest();
request.onreadystatechange = function() {
    if (request.readyState==4 && request.status==200) {
        // Inside here is the only safe place to use request.responseText;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:11:40.820

而不是等待 15 秒，您应该使用该`readystatechange`事件

```
request.onreadystatechange = function() {
    if (request.readyState === 4 && request.status === 200) {
        // code which should be executed once the download has finished
        // ...
    }
} 
```

# java - 使用静态全局工作变量有优势吗？

> ID：12309128
> 
> 赞同：0
> 
> 时间：2012-09-06T22:07:50.933
> 
> 标签：java

这可能是在挑剔，但是在使用全局静态字段来处理一次性工作变量时是否有任何时间/内存效率？给出一个简单的例子：

```
class theClass {

private static GregorianCalendar wkCal;
private static int wkTimes1;
private static int wkTimes2;
private static int wkTimes3;
private static StringBuilder wkSb = new StringBuilder();

void aMethod(int n) {
    wkTimes1 = n * 1;
    wkTimes2 = n * 2;
    wkTimes3 = n * 3;
    wkCal = new GregorianCalendar();
    wkSb.setLength(0);
    wkSb.append("A string"); 
    // And so on...
}
} 
```

此代码段有可能被实例化多次（> 3000），并且每次实例化多次使用 aMethod 。此外，wk 前缀字段将用于其他方法，旨在保存仅用于中间计算的临时值。

在我看来，如果您注意有关使用全局变量的常见警告，这可以节省内存和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:12:41.407

如果您将其实例化 3000 次（这并不多），并且一次不止一次，那么您正在乞求一个很好的非确定性竞争条件。为什么不只使用当地人并消除所有疑问？

当方法完成运行时，局部变量会消失，这与实例变量不同，实例变量将在未来不确定的时间内被 GC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:41:20.947

通常，静态变量的访问速度比实例字段慢（或至少不快），而且比局部变量慢得多。静态的唯一两个原因是如果您需要一些类范围的先前事件的“内存”，或者如果您有一些常见的（基本上是只读的）对象（例如日历对象）被类中的方法重复访问.

将静态用于 int 或其他一些可以作为局部变量的标量确实效率低下。

对高度可变的对象（例如 StringBuilder）使用静态也是非常危险的。从 methodA 调用到 methodB 你可能会意外地使用同一个对象，结果很糟糕。（更不用说线程应用程序的问题了。）

（应该指出的是，分配一个局部变量基本上没有任何成本——无论是缩放器 int/float/whatever，还是对象引用。添加实例字段的成本也很低——`new`初始化时间只是是时候将空间归零（这基本上是它来自堆的方式）。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T00:46:10.547

其他人提出了建议，我同意它对速度的影响可以忽略不计，而且是一种非常糟糕的形式，会在你最不期望的时候咬你或同事。

但是，如果您不相信，那么创建一个微基准来证明实现之间几乎没有差异。创建该方法的两个不同版本，然后使用 n 的随机值对函数的 100,000 或 10,000,000 次执行计时，并查看每个执行需要多长时间，这应该是一件容易的事。

# php - 检查数据库中复选框的值

> ID：12309132
> 
> 赞同：1
> 
> 时间：2012-09-06T22:08:09.550
> 
> 标签：php, javascript, mysql, ajax, checkbox

我正在研究一个向选定的参与者组（注册程序的人）发送大量电子邮件的方法。

表格如下所示：

1）（复选框）程序名称开始日期

2）（复选框）程序名称开始日期

3）（复选框）程序名称开始日期

4）（复选框）程序名称开始日期

5）（复选框）程序名称开始日期

假设您检查了所有这些，但其中一个（例如第 3 号）没有任何参与者注册该计划。

提交表单时，会引发 MySQL 错误，并且任何程序参与者（在本例中为 4 和 5）都不会收到发送给他们的电子邮件，提交表单的用户也不明智。

```
<form id="email_form" name="email_form" action="email_broadcast_test.php" method="get">
<input name="pid[]" type="checkbox" class="eventCodeCheck" value="<?php echo $row_programs['eventcode']; ?>"/>
<input type="submit" value="Send Email" class="ButtonDefault" /> 
```

所以我需要弄清楚，更重要的是，学习并理解如何检查程序是否为空并发出警报以通知用户而不是提交表单。

我的另一个想法是能够在页面加载时检查程序是否为空，并禁用该复选框。

或者，

选中复选框时发出警报，通知用户它是空的。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:22:10.780

您不应该显示复选框...为此，您需要在 MySQL 查询中添加 WHERE 子句，以仅获取某人实际注册的程序。

如果您不能使用复选框，则显示复选框是没有意义的。

如果您发布当前查询和一些关于您的数据库的信息，那么我可以为您提供更好的帮助。

您的查询可能是：

```
SELECT eventcode, eventdesc, date_format(date, '%m/%d/%Y') as format_date 
FROM camps_events WHERE reg_status!= 'Archived' 
AND eventcode IN (SELECT DISTINCT eventcode FROM registrations) 
".getAllowedPrograms()." ORDER BY eventdesc"; 
```

# mysql - SQL - 如果另一列符合条件，则向一列添加内容

> ID：12309141
> 
> 赞同：-3
> 
> 时间：2012-09-06T22:08:56.703
> 
> 标签：mysql

所以...同一张桌子。我在 phpMyAdmin 工作。

如果 A 列包含“thingOne”，则将“thingTwo”添加到 B 列

```
UPDATE `table` SET tablefield = replace(tablefield,"your mom","my mom"); 
```

我可以找到/替换。

对于 B 列，我也想添加已经存在的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:22:42.200

```
UPDATE `table`
SET columnB = CONCAT(columnB, 'thingTwo')
WHERE columnA = LIKE '%thingOne%' 
```

# jsf - JSF 托管 bean 和无状态 EJB 的最佳模式是什么

> ID：12309149
> 
> 赞同：2
> 
> 时间：2012-09-06T22:09:50.643
> 
> 标签：jsf, ejb, managed-bean

对于会话范围与请求范围，您认为实现 JSF 托管 bean 的最佳方式是什么？在我的例子中，我有一个带有 EJB 模块和 Web 模块的 EAR 应用程序。EJB 模块提供无状态会话 bean。现在，在 Web 模块中，我在 sessionScope 中使用了 ManagedBean。该 bean 注入了一些无状态会话 ejb 并保存了一些包含业务数据的值对象，这些业务数据可以在不同的页面中使用。

```
@Named("workflowController")
@SessionScoped
public class WorkflowController {
    private List<ItemCollection> someList;
    private ItemCollection someBusinessData;
    /* Services */
    @EJB
    private MyService myService; 
```

bean 为前端提供了很多操作方法，并利用了无状态会话 bean。这是一般的好习惯吗？或者我应该更改我的控制器以请求范围？我见过前端控制器仅在 RequestScoped 中使用并将所有业务数据对象作为 managedProperties 注入的项目，这些对象在 SessionScope 中作为 ManagedBeans 实现。

在我的示例中，我在 SessionScope 中只有一个控制器持有所有业务值并提供在无状态 ejb 中实现的业务方法。在另一种情况下，RequestScopde 中使用了一个控制器，并且有许多 BusinessValue 对象在 SessionScope 中实现为 MangedBeans，这些对象被注入到控制器 bean 中。

我的问题是：一般来说，将 Session EJB 注入 SessionScope Managed bean 是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T22:26:03.933

如果会话范围的托管 bean 需要访问业务逻辑，那么将无状态 EJB 注入其中并不是一个坏习惯。

过度使用会话范围的 bean 可能是一种不好的做法。

仅将会话范围的 bean 用于 HTTP 会话真正全局的事物，例如有关当前登录用户或购物车的详细信息。请注意，当用户在浏览器中打开多个窗口或选项卡时，会话范围的 bean 可能会受到竞争条件的影响。

在具有数十到数百个页面的典型 Web 应用程序中，通常最多应该只有少数会话范围的 bean。

对于支持单个页面的托管 bean（称为支持 bean），视图范围通常是 JSF 中最合适的范围。根据页面的确切作用，请求范围也可能是合适的。根据经验，当最初请求页面时加载数据时，回发后也需要该数据，请使用视图范围。如果没有此类数据，请尝试是否可以摆脱请求范围。

如果您需要在一种流中跨越多个页面，您可以选择通过 GET 参数传递数据，前提是它涉及已经持久化的数据并且您可以传递它们的 Id。否则，您可能想查看对话范围。

不幸的是，JSF 2.1 和之前的版本本身不支持 CDI 托管 bean 的视图范围，但是像 CODI 这样的第三方项目提供了一个实现（JSF 2.2 很可能支持开箱即用的 CDI 的视图范围）。

# java - 新 AmazonS3Client 上的 java.lang.NoClassDefFoundError

> ID：12309151
> 
> 赞同：2
> 
> 时间：2012-09-06T22:10:03.240
> 
> 标签：java, amazon-s3

当我尝试创建新的 AmazonS3Client 对象时

```
client = new AmazonS3Client(new BasicAWSCredentials(S3ACCESS_KEY, S3SECRET_KEY)); 
```

我收到此错误：

```
Caused by: java.lang.NoClassDefFoundError: org/apache/http/HttpRequest 
```

我的项目包含了 httpcore-4.1.jar，我可以在其中看到 HttpRequest.class 文件。我还包含了 httpclient-4.1.3.jar。会不会对这个有影响？

该项目构建得很好，我只在创建新的 AmazonS3Client 对象时遇到此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:22:51.317

我相信您的问题是 http 客户端的错误版本。看amazonws maven神器，是依赖`HttpCLient 4.2.1。

```
<dependency>
    <groupId>com.amazonaws</groupId>
    <artifactId>aws-java-sdk</artifactId>
    <version>1.2.15</version>
</dependency> 
```

使用 HttpClient 4.2.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:44:25.660

在多次撞墙之后，我最终只是重新克隆了 repo，它运行良好。我一定只是在我正在处理的版本中搞砸了我的配置。不是很满意，但现在可以正常工作了。

# jquery - 简化大规模 if else 语句

> ID：12309154
> 
> 赞同：0
> 
> 时间：2012-09-06T22:10:11.377
> 
> 标签：jquery

我试图简化我大量的 else if 语句。有没有更好的方法来获得更短的代码？大多数条件都使用不同的 css 属性和插入/附加到元素的方式..

谢谢您的帮助！

```
var img = $("<img src='images//anim.gif class='Img'>");

            var cssProp = {'position':'absolute',
                       'z-index':99,
                       'top': topPos,
                       'left': leftPos
            }

//$element var represent all kinds of elements I have in my DOM           

            if($element.attr('id')=='count' || $element.attr('id')=='assign' ){
                img.prependTo($element)          
            }else if($element.is('#title')){
                cssProp.top=+20;
                img.insertBefore($element);

            }else if($element.is('#tab')){
                detail_img = $("<img src='images/anim.gif' id='tab1' class='Img'>");
                detail_img.insertBefore($element.parent());
                detail_img.css(cssProp);

            }else if($element.is('#tab2')){ 
                detail_img = $("<img src='images/anim.gif' id='tab2' class='Img'>");
                detail_img.insertBefore($element.parent());
                detail_img.css(cssProp);         

            }else if ($element.is('#e_btn')){
                cssProp.left=+20;
                cssProp.top=+3;
                img.insertBefore($element);
                img.css(cssProp);

            }else if($element.is('#date_set')){
                img.insertBefore($element);

            }else if($element.is('td')){
                img.prependTo($element).css(cssProp);

            }else if($element.is('#l_title')){
                cssProp.top+=10;
                img.insertBefore($element);
                img.css(cssProp);

            }else if($element.is('#status')){
                cssProp.top =+10;
                img.insertBefore($element).css(cssProp);

            }else if($element.is('label')){
                img.appendTo($element)

            }else if($element.closest('#divTab').length>0){
                ($element.attr('id')=='work')? cssProp.left+=10 : '';
                cssProp.top+=5;
                img.insertBefore($element);
                img.css(cssProp)
           }else{      
                img.insertBefore($element);
                img.css(cssProp)
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:35:56.943

要减少行数：

*   将每个子句中的表达式`if{}`减少到一行 - 这是相当微不足道的。必要时，使用`$.extend()`来操纵`cssProp`.
*   有些表达式是相同的，所以它们的`if`条件可以用`||`.
*   删除空行。

这样做，我将 if/else 链从 49 行减少到 21 行。

要提高运行时效率，请从以下语句开始：

```
var id = $element.attr('id');
var tag = $element.get(0).tagName; 
```

*好的，这增加了 2 行*

然后，在条件中，对而不是使用 jQuery 表达式`if`执行字符串比较。唯一的例外是，它不遵循相同的模式。`id``tag``if($element.closest('#divTab').length>0)`

# objective-c - Objective-C，如何正确地将十六进制编码为图像文件？

> ID：12309158
> 
> 赞同：0
> 
> 时间：2012-09-06T22:10:26.903
> 
> 标签：objective-c, image, hex

我的应用程序中有一个方法，我想将十六进制值写入文件（本质上是从写入的字节创建图像）。我似乎无法弄清楚如何正确编码这些值以生成图像。任何建议将不胜感激 - 谢谢。

```
- (void)makeImage {

@autoreleasepool {

    NSString* hexValues = @"8950..." // these are the hex bytes that make up the image file

    NSString* fileName    = @"image.png";
    NSString* homeDir     = [NSHomeDirectory() stringByAppendingPathComponent:@"Desktop/"];

    NSString* fullPath = [homeDir stringByAppendingPathComponent:fileName];

    NSError* error = nil;
    [lastLine writeToFile:fullPath atomically:NO encoding:NSASCIIStringEncoding error:&error];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:00:33.107

您可以使用有损 ASCII 编码或 UTF-8 将 NSData 转换为 NSString，然后您可以使用 -[NSData bytes] 方法获取原始字节。

使用 for 循环一次循环遍历它们 2 个字节，然后您可以将两个字节/字符复制到大小为 3 的 char 数组中（3 包括 \0，请确保使用 " 00" 得到一个终止 \0) 然后你可以使用 c 函数

```
long int strtol ( const char * str, char ** endptr, int base ); 
```

将两个字节/十六进制转换为整数。

或者，您可以将自己的十六进制字符串写入不需要终止 \0 的 int。

# python - f2py 中的 malloc 错误

> ID：12309161
> 
> 赞同：1
> 
> 时间：2012-09-06T22:10:46.407
> 
> 标签：python, malloc, fortran, checksum, f2py

我正在尝试使用 f2py 在 3 维中运行一个简单的集成问题。

*调用*fortran代码的python代码如下：

```
#!/Library/Frameworks/EPD64.framework/Versions/Current/bin/python
import pymods as modules
import pygauleg as gauleg
import pyint as integrator
import pylab as pl
import sys
import math
import time

############################################
# main routine #############################
############################################
zero = 0.0
one = 1.0
pi = pl.pi

Nr = 10
Nt = 10
Np = 2*Nt
r0 = zero
rf = one
NNang = Nr*Nt*Np

print 'Nr Nt Np = ', Nr, Nt, Np
print 'NNang = ', NNang
print 'r0 rf = ', r0, rf

Nx = int(math.floor( (one*NNang)**(one/3.0) ))
Ny = int(math.floor( (one*NNang)**(one/3.0) ))
Nz = int(math.floor( (one*NNang)**(one/3.0) ))

Nx = int(pl.floor(float(Nx)*1.75))
Ny = int(pl.floor(float(Ny)*1.75))
Nz = int(pl.floor(float(Nz)*1.75))

NNxyz = Nx*Ny*Nz

print 'Nx Ny Nz = ', Nx, Ny, Nz
print 'NNxyz = ', NNxyz
xyz0 = -rf
xyzf = rf

t1 = time.time()
xt = pl.zeros(Nt)
wt = pl.zeros(Nt)
gauleg.gauleg(xt, wt, 0.0, pl.pi, Nt)
print 'outside of gauleg' 
```

虽然 fortran 子例程有点长，但它的重要部分是开始......

```
 2 subroutine gauleg(x,w,x1,x2,n)
  3 !Input:   x1,x2,n
  4 !Output:  x,w
  5 !implicit none
  6 !integer, parameter :: ikind = selected_int_kind(25)
  7 !integer, parameter :: rkind = selected_real_kind(15, 307)
  8 !
  9 !real(kind = rkind), parameter :: pi = 3.14159265358979323846d00
 10 !real(kind = rkind), parameter :: one = 1.0d00
 11 !real(kind = rkind), parameter :: zero = 0.0d00
 12 use mod_gvars
 13 
 14 real(kind = rkind) :: tol = 1d-15
 15 
 17 integer :: n
 18 !!!!!f2py intent(in) n
 19 real(kind = rkind), dimension(n) :: x
 20 real(kind = rkind), dimension(n) :: w
 22 real :: x1, x2
 23 
 24 real(kind = rkind) :: z1, z, xm, xl, pp, p3, p2, p1;
 25 
 26 integer(kind = ikind) :: m
 27 integer(kind = ikind) :: i,j
 28 integer(kind = ikind) :: countmax, counter, max_counter, min_counter
 29 
 30 integer(kind = ikind) :: tenth, hundredth, thousandth
 31 
 32 print*, 'n = ', n 
```

最后...

```
 98 
 99 print*, 'returning'
100 
101 end subroutine 
```

子程序顶部的注释（第 5-11 行）是存在于 fortran 模块中的结构`mod_gvars`。似乎一切都按计划进行**直到**此子例程返回。这是输出：

```
Nr Nt Np =  10 10 20
NNang =  2000
r0 rf =  0.0 1.0
Nx Ny Nz =  21 21 21
NNxyz =  1728
 n =           10
 m =  5
 returning
python(14167) malloc: *** error for object 0x1081f77a8: incorrect checksum for freed object - object was probably modified after being freed.
*** set a breakpoint in malloc_error_break to debug
Abort trap 
```

似乎子程序只有在返回时才会遇到问题。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:21:21.317

这种问题通常发生在 Python 中的引用计数错误中，例如，如果 f2py 中存在错误，或者如果您在 Fortran 中覆盖的内存比在 numpy 数组中分配的内存多，则可能会发生这种情况。所有这些错误仅在 Fortran 子例程退出后随机出现，通常是当您在 Python 中释放一些内存时。

要对此进行调试，请尝试打印您进入 Fortran 的所有数组，即打印数组 x、w，以确保您可以访问其中的所有内存（测试 f2py 使用相同的类型等等） .

确保在 Fortran 中使用边界检查（至少`-fbounds-check`在 gfortran 中，最好只是`-fcheck=all`检查所有问题）。

您也可以在调试器或 valgrind 下运行它，它可能会告诉您问题出在哪里。

最后，我个人更喜欢直接使用 Cython 来包装 Fortran。然后我可以轻松访问所有生成的文件，并使用`iso_c_binding`Fortran 模块，以便 Fortran 编译器检查所​​有类型在 Fortran 和 C (Python) 之间是否兼容，请参见[此处](http://fortran90.org/src/best-practices.html#interfacing-with-python)的示例。

# java - CRUD 接口使用一个控制器处理多个子类型

> ID：12309162
> 
> 赞同：2
> 
> 时间：2012-09-06T22:10:46.860
> 
> 标签：java, jsp, reflection, crud

我正在尝试设置单个 CRUD 控制器和相关视图 (JSP) 来处理同一超类的多个子类。每个子类都有一个控制器/视图会导致大量复制/粘贴代码。我的第一个倾向是使用反射。

从另一个页面，用户单击一个链接，该链接确定了操作和要使用的正确子类。因此，在我的控制器中，我将让服务返回正确类型的实例化，然后对于视图，我想显示和编辑所有字段名称和值。

以下是我迄今为止的新行动：

```
// controller new action code
SubType sub = service.give_me_type(x);
List<Field> fields = new ArrayList<Field>();

fields.addAll(Arrays.asList(sub.getClass().getSuperclass().getDeclaredFields()));
fields.addAll(Arrays.asList(sub.getClass().getDeclaredFields()));

return new ModelAndView("/sub/form")
  .addObject("fields", fields);

// view form.jsp
<form:form method="post" commandName="sub" cssClass="left">
<c:choose>
  <c:when test="${not empty fields}">
  <table>
  <c:forEach items="${fields}" var="field">
    <tr>
      <td>${field.name}</td>
      <td>value here</td>
    </tr>
  </c:forEach>
  </table>
  </c:when>
  <c:otherwise>
  ... 
```

我意识到将字段放在列表中无助于将对象连接到视图，但我不确定接下来要尝试什么。有任何想法吗？谢谢。

编辑：我正在使用 Spring MVC

编辑：我正在考虑不尝试将对象与视图连接起来。将编辑/更新操作视为一个有趣的案例，在编辑时，我将从我的对象加载我的列表，然后将其显示在视图中；在创建时，我将从用户在视图中输入的列表中找到的值设置对象中的值。那会是下降的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:19:48.907

我想建议使用类似 Struts 或 Spring MVC 的东西，因为你会遇到很多问题，与映射到自定义字段类型、检查超超类的字段并授予对它们的访问权限等有关。

[http://alasdoo.com/2010/08/binding-data-with-spring-forms/](http://alasdoo.com/2010/08/binding-data-with-spring-forms/)

# algorithm - 组合随机样本

> ID：12309174
> 
> 赞同：5
> 
> 时间：2012-09-06T22:11:45.120
> 
> 标签：algorithm, math, random, probability, combinatorics

我有一组元素**U**（最初未知大小），我想生成一个随机样本*n* << | **你**| 元素。流采样适用于此。

当我将**U**细分为几个子集并随机抽取每个子集的样本（每个样本包含*k* <= *n*元素，但通常是*k* = *n*）时，问题就出现了。我也知道每个子集中有多少元素。我想知道如何将这些样本（最好一次合并两个样本）组合成一个大小为*n*的样本。

或者换一种说法，给定不同的集合**A**和**B**以及随机样本**a**和**b**，我想让**c** ⊆ **a** ∪ **b**，这样**c**是**A** ∪ **B**的随机样本，我可以指定**c**的大小（通常 | **c | 的大小与 |** **a** |)大致相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:31:35.537

就好像您仍在从**U**采样一样。要选择一个样本，首先选择它应该来自的子集**S_i 。**与相对**S_i**大小成比例地执行此操作。因此，如果**S_1**是**U的 20%，您从****S_1**中选择样本的概率为 20%。选择子集后，您可以从该子集中获取任何一个样本，并将其用于最终样本。如果*k*值小于*n* ，这可能会遇到问题，但如果通常*k* = *n*，这对您来说可能不是问题。

把它放在你的**A**和**B**公式中，建立**c**如下：**一个**|/| **A** ∪ **B** | **从a**中获取下一个样本；有概率| **乙**|/| **A** ∪ **B** | = 1 - (| **A** |/| **A** ∪ **B** |) 从**b**中获取下一个样本。（如上所述，如果 | **a** | 不大于*n* * (| **A** |/| **A** ∪ **B** |) （以及 | **b的等价物），这可能会遇到问题**|)，但如果是这种情况，我不清楚您是否可以做您想做的事情。）这使您可以一次构建样本两个子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:13:47.173

如果 |A|==|B| 和|a|==|b|，那么你完全不用担心。只需从 aUb 进行定期赎金采样。

# database - 数据库查找表和 i18n

> ID：12309175
> 
> 赞同：1
> 
> 时间：2012-09-06T22:11:51.507
> 
> 标签：database, internationalization, lookup-tables

我无法想象成为第一个遇到这个问题的人，但我仍然没有找到令人满意的答案。

我的 PHP/MySQL/CodeIgniter 应用程序使用 MySQL 数据库，其中包含一堆查找表，用于诸如状态和离散选择之类的事情。这些表具有通用形式：

```
table XXXXXX
id: int (PK) 
description: varchar(100) 
```

该网站将提供两种语言，英语和泰语。我们将为静态内容使用资源包，但是如何处理查找值，在大多数情况下会显示在下拉框中？

我的第一个想法是使用 2 个单独的描述字段：description_en 和 description_th，并根据会话中存储的语言环境选择正确的字段。

我的同事倾向于在资源包中包含所有 i18n 值，这将使表中的描述字段变得多余。只有一个 PK 字段的表是无意义的，这意味着相应的 FK 字段将“降级”为普通的查找键。还是仍然将查找表与资源包结合使用，并将英文描述留作管理员参考？

查找表只能由管理员更改，最终用户不能更改。

我想对此做出明智的决定，因此欢迎提出任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:00:58.663

没有太多的反馈，但有时只是发布一个问题会迫使你更深层次地思考它......

我使用了一个非常简单的解决方案，我们继续使用语言文件来查找值。唯一的修改是查找表不包含实际描述，而是包含语言文件的查找键。因为所有的开发者都是英文流利的，我们选择使用英文缩写的description字段，重命名为description_key。

所以我认为这个问题已经解决。

# c - Valgrind 奇怪的“系统调用参数 socketcall.sendto(msg) 指向未初始化的字节”

> ID：12309178
> 
> 赞同：7
> 
> 时间：2012-09-06T22:12:10.473
> 
> 标签：c, valgrind

也许我完全失明或愚蠢，但我不明白我是如何在这里遇到 valgrind 问题的。Valgrind 给了我这个：

```
==3728== Syscall param socketcall.sendto(msg) points to uninitialised byte(s)
==3728==    at 0x57835DC: send (send.c:33)
==3728==    by 0x4058B7: CBSocketSend (CBLibEventSockets.c:287)
==3728==    by 0x4E522FB: CBNetworkCommunicatorOnCanSend (CBNetworkCommunicator.c:649)
==3728==    by 0x40564F: CBCanSend (CBLibEventSockets.c:235)
==3728==    by 0x526E54B: event_base_loop (event.c:1346)
==3728==    by 0x405244: CBStartEventLoop (CBLibEventSockets.c:154)
==3728==    by 0x5A54E99: start_thread (pthread_create.c:308)
==3728==  Address 0x5e7b6b4 is 20 bytes inside a block of size 24 alloc'd
==3728==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==3728==    by 0x4E51E2A: CBNetworkCommunicatorOnCanSend (CBNetworkCommunicator.c:592)
==3728==    by 0x40564F: CBCanSend (CBLibEventSockets.c:235)
==3728==    by 0x526E54B: event_base_loop (event.c:1346)
==3728==    by 0x405244: CBStartEventLoop (CBLibEventSockets.c:154)
==3728==    by 0x5A54E99: start_thread (pthread_create.c:308)
==3728==
==3728== (action on error) vgdb me ... 
```

当这种情况发生时，GDB 会给出回溯：

```
0x00000000057835dc in __libc_send (fd=<optimized out>, buf=<optimized out>,
    n=<optimized out>, flags=<optimized out>) at ../sysdeps/unix/sysv/linux/x86_64/send.c:33
33  ../sysdeps/unix/sysv/linux/x86_64/send.c: No such file or directory.
(gdb) bt
#0  0x00000000057835dc in __libc_send (fd=<optimized out>, buf=<optimized out>,
    n=<optimized out>, flags=<optimized out>) at ../sysdeps/unix/sysv/linux/x86_64/send.c:33
#1  0x00000000004058b8 in CBSocketSend (socketID=20,
    data=0x5e7b6a0 "\371\276\264\331version", len=24)
    at /media/sf_BitEagle_Projects/cbitcoin/dependencies/sockets/CBLibEventSockets.c:287
#2  0x0000000004e522fc in CBNetworkCommunicatorOnCanSend (vself=0x5e76c30, vpeer=0x5e791c0)
    at /media/sf_BitEagle_Projects/cbitcoin/src/structures/CBObject/CBNetworkCommunicator/CBNetworkCommunicator.c:649
#3  0x0000000000405650 in CBCanSend (socketID=20, eventNum=4, arg=0x5e7a2d0)
    at /media/sf_BitEagle_Projects/cbitcoin/dependencies/sockets/CBLibEventSockets.c:235
#4  0x000000000526e54c in event_process_active_single_queue (activeq=0x5e78be0,
    base=0x5e78710) at event.c:1346
#5  event_process_active (base=<optimized out>) at event.c:1416
#6  event_base_loop (base=0x5e78710, flags=0) at event.c:1617
#7  0x0000000000405245 in CBStartEventLoop (vloop=0x5e78eb0)
    at /media/sf_BitEagle_Projects/cbitcoin/dependencies/sockets/CBLibEventSockets.c:154
#8  0x0000000005a54e9a in start_thread (arg=0x7a74700) at pthread_create.c:308
#9  0x00000000057824bd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#10 0x0000000000000000 in ?? () 
```

所以在这里可以看出，代码正在向 send() 发送一些分配的 24 字节数据，这就是 CBSocketSend 中发生的事情，然后 valgrind 在数据的 20 字节处向 sendto 抱怨。

我用这段代码填写数据：

```
peer->sendingHeader = malloc(24);
if (NOT peer->sendingHeader) {
    CBNetworkCommunicatorDisconnect(self, peer, 0, false);
    return;
}
peer->sendingHeader[0] = self->networkID;
peer->sendingHeader[1] = self->networkID >> 8;
peer->sendingHeader[2] = self->networkID >> 16;
peer->sendingHeader[3] = self->networkID >> 24;
// Get the message we are sending.
CBMessage * toSend = peer->sendQueue[peer->sendQueueFront];
// Message type text
if (toSend->type == CB_MESSAGE_TYPE_VERSION)
    memcpy(peer->sendingHeader + 4, "version\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_VERACK)
    memcpy(peer->sendingHeader + 4, "verack\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_ADDR)
    memcpy(peer->sendingHeader + 4, "addr\0\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_INV)
    memcpy(peer->sendingHeader + 4, "inv\0\0\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_GETDATA)
    memcpy(peer->sendingHeader + 4, "getdata\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_GETBLOCKS)
    memcpy(peer->sendingHeader + 4, "getblocks\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_GETHEADERS)
    memcpy(peer->sendingHeader + 4, "getheaders\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_TX)
    memcpy(peer->sendingHeader + 4, "tx\0\0\0\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_BLOCK)
    memcpy(peer->sendingHeader + 4, "block\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_HEADERS)
    memcpy(peer->sendingHeader + 4, "headers\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_GETADDR)
    memcpy(peer->sendingHeader + 4, "getaddr\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_PING)
    memcpy(peer->sendingHeader + 4, "ping\0\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_PONG)
    memcpy(peer->sendingHeader + 4, "pong\0\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_ALERT)
    memcpy(peer->sendingHeader + 4, "alert\0\0\0\0\0\0\0", 12);
else if (toSend->type == CB_MESSAGE_TYPE_ALT)
    memcpy(peer->sendingHeader + 4, toSend->altText, 12);
// Length
if (toSend->bytes){
    peer->sendingHeader[16] = toSend->bytes->length;
    peer->sendingHeader[17] = toSend->bytes->length << 8;
    peer->sendingHeader[18] = toSend->bytes->length << 16;
    peer->sendingHeader[19] = toSend->bytes->length << 24;
}else{
    memset(peer->sendingHeader + 16, 0, 4);
}
// Checksum
peer->sendingHeader[20] = toSend->checksum[0];
peer->sendingHeader[21] = toSend->checksum[1];
peer->sendingHeader[22] = toSend->checksum[2];
peer->sendingHeader[23] = toSend->checksum[3]; 
```

您可以很清楚地看到所有数据都已分配，对吗？那么 valgrind 在做什么呢？

您可以在这里看到明显引起麻烦的完整功能：[https ://github.com/MatthewLM/cbitcoin/blob/master/src/structures/CBObject/CBNetworkCommunicator/CBNetworkCommunicator.c#L582](https://github.com/MatthewLM/cbitcoin/blob/master/src/structures/CBObject/CBNetworkCommunicator/CBNetworkCommunicator.c#L582)

CBSocketSend 是这样的：

```
int32_t CBSocketSend(uint64_t socketID,uint8_t * data,uint32_t len){
    ssize_t res = send((evutil_socket_t)socketID, data, len, CB_SEND_FLAGS);
    if (res >= 0)
        return (int32_t)res;
    if (errno == EAGAIN)
        return 0; // False event. Wait again.
    return CB_SOCKET_FAILURE; // Failure
} 
```

在这里：[https ://github.com/MatthewLM/cbitcoin/blob/master/dependencies/sockets/CBLibEventSockets.c#L286](https://github.com/MatthewLM/cbitcoin/blob/master/dependencies/sockets/CBLibEventSockets.c#L286)

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T06:19:49.480

以下 Valgrind 参数可能有助于确定未初始化数据的来源：

```
--track-origins=yes 
```

您也可以尝试使用

```
 --vgdb-error=0 
```

在初始化字节 20 之前和之后放置断点，并使用**memcheck**命令**get_vbits**验证发生了什么。

# wcf - 从 Silverlight 5 客户端访问 Azure 表存储数据的最佳实践

> ID：12309186
> 
> 赞同：1
> 
> 时间：2012-09-06T22:12:55.310
> 
> 标签：wcf, silverlight, azure, odata

向 Silverlight 5 客户端提供 Azure 表数据的最佳方式是什么？

我们正在构建一个最初以 Silverlight 5 为目标的应用程序，但最终需要向包括 asp.net、Android 设备、Windows 8 等在内的多个客户端提供数据。我们看到的示例主要使用带有 EF 数据模型的 WCF RIA。我们正在使用 VS2012 和 .Net 4.5。我假设通过 WCF 服务的 oData 是可行的方法，但我看到的示例很旧，并且假设 SQL 后端具有 EF 模型。有人可以指点我一些有帮助的在线资料吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:51:27.730

根据您的要求，如果要为不同类型的多个客户端提供服务，您最好的选择是使用在 Web 角色中运行的 WCF 服务，该服务可以使用 OData 与您的 Azure 表存储通信并服务任何客户端请求。这样你就不需要担心表存储的安全性，任何可以连接到 WCF 服务的客户端都可以工作，Andrid、SL、Win8 等。所以在我的理解中，你确实有正确的选择和正确的方向。

如果您只想测试使用 oData 读取 Azure 表存储的 WCF 服务，我发现了一个很好的旧示例，我在几分钟内迁移到了 .net 4.0 和 Azure SDK 1.7 并使其正常工作，因此您肯定可以尝试作为 POC。示例代码位于[此处](http://code.msdn.microsoft.com/windowsazure/CSAzureTableStorageWCFDS-2355159b/view/SourceCode#content)。

接下来，如果您决定使用基于 WCF 的 webrole 连接到使用 oData 的 Azure 表存储，您目前只有 .net 4.0 支持的 Windows Azure SDK。由于您想使用 .net 4.5，因此当前不支持 Windows Azure 的运行时，并且没有关于 .net 4.5 支持 Windows Azure SDK 的即时信息。您可能需要稍等片刻才能获得完全支持 Web 角色的 .net 4.5。

如果您等不及，只需使用 Windows Azure 虚拟机（仍处于预览状态）并在其上运行基于 WCF/oData/.net4.5 的应用程序。

# javascript - 无法让 setInterval 函数在 javascript 中使用 this.function_name 调用另一个函数

> ID：12309190
> 
> 赞同：3
> 
> 时间：2012-09-06T22:13:15.307
> 
> 标签：javascript

我在一个对象中有一个函数，它设置了一个调用另一个函数的间隔，但是当调用另一个函数时，它会给我一个错误，说 Uncaught TypeError: Object [object Window] has no method

这是我试图理解的代码。

```
function test2() {
this.timer;

this.say = function(){
    console.log("hi");
}

this.start = function() {
    //starts the interval function
    this.timer = setInterval(this.loop, 1000)
}

this.loop = function() {
    //runs every 1 second  
    this.say(); //gives error -- Uncaught TypeError: Object [object Window] has no method 'say'
}
}

var test = new test2();
test.start(); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T22:15:42.610

触发时`setInterval()`，上下文是全局上下文（例如窗口），而不是您的对象。要在对象上调用方法并`this`在该方法调用中适当地设置值，您需要一个单独的函数，您可以在其中调用实际对象上的方法，如下所示：

```
this.start = function() {
    //starts the interval function
    var self = this;
    this.timer = setInterval(function() {
        self.loop();
    }, 1000)
} 
```

仅供参考，当使用诸如计时器或ajax之类的异步函数将上下文保存到局部变量中时，这是非常常见的，`this`因此即使在回调函数中不同时也可以从嵌入式回调函数中引用它`this`（如您的示例中所示）。这是一种常见的设计模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T17:54:08.623

我对此有一个独特的解决方案。我通过创建一个调用我的对象方法的函数来解决它：

```
const globalSet = new globals();

function ut(){
    globalSet.updateToasts();
}

setInterval(ut,15000); 
```

它似乎欺骗了 JS 做我想做的事。

# matrix - OpenGL ES2.0 Modelview 矩阵 2D

> ID：12309192
> 
> 赞同：4
> 
> 时间：2012-09-06T22:13:17.557
> 
> 标签：matrix, camera, opengl-es-2.0, model-view, opengl-es-1.1

从 OpenGL ES1.1 迁移到 2.0 用于 2D 目的（正交），我在弄清楚如何应用转换（矩阵乘法顺序）时遇到了一些麻烦。我只需要在 Z 轴上旋转，并在 X 和 Y 上缩放，这始终是相同的值，所以这应该会大大简化事情。我当前的完美方法（ES1.1）有一个虚拟相机，与对象位于相同的绝对坐标空间中。

在每一帧的开始，我首先通过调用

```
 glRotatef(angle, 0.0f, 0.0f, 1.0f);
    glScalef(zoom, zoom, 0.0f);
    glTranslatef(-pos.x, -pos.y, 0.0f); // negative position to shift everything back to the center of the view 
```

对于对象，它看起来像这样（省略纹理和绘图调用）。

```
 glPushMatrix(); // to preserve camera transform
   glTranslatef(pos.x, pos.y, 0.0f);
   glScalef(scale, scale, 0.0f);
   glRotatef(angle, 0.0f, 0.0f, 1.0f);
   // drawing done here
   glPopMatrix(); 
```

我试图在 ES2.0 中获得同样的功能，但是所有的矩阵运算都必须手动执行。

从[这个链接](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/)我发现乘法的正确顺序应该是**((Scale * Rotation) * Translation)**

之后我想出了一个结合所有这些的单一矩阵公式，因为 2D 更简单。我还包括了一个正交投影矩阵。对于测试着色器，我有这个：

```
 attribute vec4 position;
   attribute vec4 color;

   varying vec4 colorVarying;

   uniform vec2 translate;
   uniform float rotate;
   uniform float scale;
   uniform vec4 camera; // x, y, z = angle, w = zoom

   void main()
   {

        const float w = 3.2;
        const float h = 4.8;

        mat4 projection = mat4(1.0/w, 0.0, 0.0, 0.0,
                       0.0, 1.0/h, 0.0, 0.0,
                       0.0, 0.0, -1.0, 0.0,
                       0.0, 0.0, 0.0, 1.0);

        float s1 = scale * sin(rotate);
        float s2 = scale * cos(rotate);

        mat4 m = mat4(s2, s1, 0.0, 0.0,
              -s1, s2, 0.0, 0.0,
              0.0, 0.0, 1.0, 0.0,
              translate.x, translate.y, 0.0, 1.0);

        gl_Position = projection * m * position;

        colorVarying = color;
  } 
```

对于每个自由度，它的工作原理都是如此。但是，我无法弄清楚如何合并相机。着色器中矩阵的乘法顺序与 gl 调用的顺序不匹配，因此我不确定如何将相机调用转换为乘法。起初我还试图为相机计算一个单独的变换矩阵，并像这样设置最终位置：

```
 gl_Position = projection * cam * m * position; 
```

无论相机矩阵本身的顺序如何，我都认为这是不正确的（我尝试了多种方法，但都没有正确）。我相信所有相机和对象模型视图转换都必须编译成一个模型视图矩阵（每个矩阵乘以最后一个，从相机转换开始，然后是对象，但显然是按特定顺序）。这种操作顺序是我感到困惑的地方，尤其是因为它与 ES1.1 中的正常工作不匹配。

有人可以解释正确的顺序，以及为什么 gl 调用与实际乘法不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T22:26:27.710

如果这在 OpenGLES 1.1 中对您有用

```
glRotatef(angle, 0.0f, 0.0f, 1.0f); //camera
glScalef(zoom, zoom, 0.0f);         //camera
glTranslatef(-pos.x, -pos.y, 0.0f); //camera

glTranslatef(pos.x, pos.y, 0.0f);   //model
glScalef(scale, scale, 0.0f);       //model
glRotatef(angle, 0.0f, 0.0f, 1.0f); //model 
```

那么 OpenGLES 2.0 中的等效操作将是（一切都以相同的顺序）：

```
modelViewMatrix = camRotate * 
                  camScale * 
                  camTranslate * 
                  objTranslate * 
                  objScale * 
                  objRotate; 
```

要向其中添加投影矩阵，只需将其附加到左侧：

```
mvpMatrix = proj * modelViewMatrix; 
```

要变换顶点，请将其乘以右边：

```
transformed = mvpMatrix * in_vert; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:27:53.600

在 glPushMatrix、glTranslatef、glScalef、glRotatef、glPopMatrix 之后，您将获得推入堆栈的矩阵。所以它几乎什么也没做。

但是无论如何，如果您想要以这种顺序（**glTranslatef、glScalef、glRotatef**）重新生成 xforms 的矩阵，您需要以相同的顺序相乘**（平移 * 比例）* 旋转**

# asp.net-mvc-3 - 下拉加载完成后如何运行某些操作

> ID：12309199
> 
> 赞同：0
> 
> 时间：2012-09-06T22:14:06.163
> 
> 标签：asp.net-mvc-3, knockout.js

在下拉列表中填充了我的网络服务中的项目后，我需要选择一个默认值。如何检测下拉项的加载是否完成？

```
 <select id="countriesList"
                    data-url="@Url.Action("GetAllCountries", "Countries", new { Area = "Panel" })"
                    data-bind="options: countries, optionsValue: 'ID', optionsText: 'Name', optionsCaption: 'Selecione um país', value: selectedCountry">
                </select> 
```

和 JS：

```
 $.getJSON($('#countriesList').data('url'), function (data) {
            self.countries(data);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:20:46.740

您可以尝试创建自己的 KO 绑定，以便附加适当的回调函数：http: [//jsfiddle.net/RRBzb/](http://jsfiddle.net/RRBzb/)

`ko.bindingHandlers.options`处理程序应该尽可能地模仿，因此调用`ko.bindingHandlers.options.update`. `ko.bindingHandlers.options`没有`init`方法，所以不需要。

# ruby-on-rails - 在 Rails 上读取远程 yaml ruby

> ID：12309203
> 
> 赞同：4
> 
> 时间：2012-09-06T22:14:31.737
> 
> 标签：ruby-on-rails, ruby, yaml

我想读取一个远程*.yaml*文件（在我的情况下，文件位于 Dropbox 的“公共”文件中）并对其进行解析，以便最终得到一个哈希值。

当我尝试类似的东西时`open('https://link_to_file/file.yaml')`，我得到的不是 File 对象而是一个字符串对象，所以我不能只是`YAML.load(open('https://link_to_file/file.yaml'))`

问题是：我如何更改字符串对象

```
foo:
    -foo1
    -foo2 
```

（实际上类似于`"foo:\r\n\t-foo1\r\n\t-foo2"`）

到类似 yaml 的哈希？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T22:18:00.280

改用`YAML.parse`：

```
YAML.parse(open('https://link_to_file/file.yaml')) 
```

正如[@VoloD](https://stackoverflow.com/users/1653262/volod)所说：

> 使用后`parse`，用于`.to_ruby`检索哈希。

# ruby-on-rails - ActiveRecord::Base 上的 alias_method 导致 NameError

> ID：12309209
> 
> 赞同：17
> 
> 时间：2012-09-06T22:15:44.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我有一个直接从 继承的模型`ActiveResource::Base`，我正在尝试为`alias_method`记录表中的大多数列运行，但结果是 NameError：

> NameError：未定义的方法`address_line_1' for class` LeadImport::Base'

但是我可以访问该属性：

```
LeadImport::Base.new.address_line_1 #=> nil (not error) 
```

我的班级有一个名为 的表列`address_line_1`，所以我看不到问题所在。

```
class LeadImport::Base < ActiveRecord::Base
    alias_method :address_1, :address_line_1
end 
```

*规格：Ruby 1.8.7，Rails 2.3.8*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-06T22:22:29.577

根据我发现的网站，您应该改用 alias_attribute ：

> 问题是 ActiveRecord 不会动态创建访问器方法，直到数据库连接处于活动状态并且它已经解析了表模式。在加载类之后很长时间。

```
class LeadImport::Base < ActiveRecord::Base
  alias_attribute :address_1, :address_line_1
end 
```

# javascript - 动画、时间和运行循环等问题

> ID：12309216
> 
> 赞同：0
> 
> 时间：2012-09-06T22:16:22.330
> 
> 标签：javascript, html

我正在尝试在用户单击时使元素出现和消失，并带有淡入淡出的动画。我有这个工作，但如果用户快速连续单击两次或在动画完成之前单击两次，则会出现问题。我知道问题将与运行循环以及事件和动画的时间等有关，但作为 html/js 的新手，我在这种情况下对这些问题没有足够的经验来了解最佳解决方案。

这是一个小提琴，如果您单击第一行并在每次单击之间等待几秒钟，它将起作用，如果您疯狂地单击，您很快就会开始看到问题。

谢谢

[http://jsfiddle.net/mungbeans/wqUgC/](http://jsfiddle.net/mungbeans/wqUgC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:27:44.043

一个快速的解决方案就是添加一个简单的锁来防止任何额外的动画被触发。[我在这里](http://jsfiddle.net/wqUgC/2/)做了。

关于代码的一些注释 - 代码上的动画锁定可能不应该被代码的其他部分访问，所以我把它放在一个单独的上下文中。此外，为了确保一切都在正确的时间触发，我添加了一个整数控件“动画时间”来处理动画速率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:28:11.547

这是一个比您想象的更常见的问题。问题是您设置了一个事件来将您的元素设置为`display: none`. 但是，如果您再次单击，您希望阻止该事件发生。因此，您需要做的是保留对事件的引用（`setTimeout()`返回 this），以便`clearInterval()`在需要取消隐藏元素时调用该引用：

```
var listener = (function() {
    var interval = 0; //A variable to retain the interval            

    return function() { //return the original function into listener
        var title = document.getElementById('title');

        //dismiss any plans to hide/show the element because we've changed our minds
        // (if the event already fired, this does nothing, which is fine):
        clearInterval(interval); 

        if (title.dataset.displayed == 'yes') {
            title.dataset.displayed = 'no';
            setTimeout(function () {
            title.style.webkitTransition = "opacity 2.0s ease";
            title.style.opacity = 0.0;
            }, 0);

            //don't forget to hold onto the interval!
            interval = setTimeout(function() { title.style.display = 'none'; }, 2000);
        }
        else {
            title.dataset.displayed = 'yes';
            title.style.display = 'block';

            //It's probably not necessary to retain the interval here. 
            // But it doesn't hurt anything.
            interval = setTimeout(function () {
                title.style.webkitTransition = "opacity 2.0s ease";
                title.style.opacity = 1.0;
            }, 0);
        }
    };
}());

var li = document.getElementById('list');
li.addEventListener("click", listener, false); 
```

请注意，我将您的侦听器函数包装在一个更大的、立即调用的函数表达式中，该表达式返回原始函数。我这样做`interval`是为了从一个呼叫保留到`listener()`下一个呼叫。你也可以创建`interval`一个全局变量，但这些很顽皮，而且这个解决方案更加独立。

当我将它换成你的 JSFiddle 时，它​​似乎工作正常。剩下的代码做得很好！

# java - java小程序中的.class错误

> ID：12309220
> 
> 赞同：0
> 
> 时间：2012-09-06T22:16:53.610
> 
> 标签：java, applet

我正在编写一个小程序，它将随机挑选 10 张卡片并在屏幕上显示它们。但是，我收到一个 .class 错误和一个 ; 当我尝试传递字符串 [] 时需要错误。有人帮忙吗？这是我的代码：

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Image;
import java.applet.Applet;
import java.lang.Math;
import java.util.Random;

public class unit12Assignment extends Applet
{
Image card1 ... card52;

public void init()
{
    card1 = getImage( getDocumentBase(), "c1.gif" );
    ...
    card52 = getImage( getDocumentBase(), "sk.gif" );
}

public void getCards()
{
    String cardNumber; 
    double cardRandom;
    int cardRandomNumber;
    String[] cardSelection = new String[10];
    Random ran = new Random();

    for (int number = 0; number <=  9; )
    {
        cardRandom = ran.nextInt(52) + 1;
        cardRandomNumber = (int) Math.round( cardRandom );

        if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )
        { 
            cardNumber =  "card" + cardRandomNumber;
            number++;
        }
    }   
    paint( String[] cardSelection );
}

public void paint(Graphics g, String[] card)
{
    setBackground( Color.green );
    g.drawImage( card[0], 10, 10, this);
    g.drawImage( card[1], 90, 10, this);
    g.drawImage( card[2], 170, 10, this);
    g.drawImage( card[3], 250, 10, this);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:19:03.963

这一行：

```
paint( String[] cardSelection ); 
```

在语法上应该是

```
paint( cardSelection ); 
```

您只需`String[]`在第一次声明变量时在变量前写上类型（例如 ）。从那里可以只用它的名字来引用它。

我还注意到它`paint`需要一个`Graphics`参数以及 a `String[]`，因此您还需要将其传入：

```
Graphics g = getGraphicsSomehow();
paint(g, cardSelection); 
```

**编辑：**有关使用替代解决方案的免责声明，请参阅[Andrew Thompson 的回答。](https://stackoverflow.com/a/12327416/697449)`Graphics`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:52:57.313

任何涉及的事情`getGraphics()`都是一个脆弱的解决方案。

如果用户拖动另一个另一个应用程序。在浏览器上方并覆盖小程序，然后最小化其他应用程序。它可能会擦除自定义绘制的像素。请参阅[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/) 以了解如何正确绘画（分解为“当被告知这样做时绘画”）。

另一种方法是使用 a`BufferedImage`进行渲染并将其显示在`JLabel`. 在需要时绘制到图像，然后重新绘制标签。

# group-by - Mysql 加速 max() group by

> ID：12309224
> 
> 赞同：5
> 
> 时间：2012-09-06T22:17:09.973
> 
> 标签：group-by, max

我有一个简单的查询分组行需要 0.0045 秒。300.000 行

`SELECT cid FROM table GROUP BY cid`

当我添加 MAX() 进行查询时，需要 0.65 秒才能返回。

`SELECT MAX(id) id, cid FROM table GROUP BY cid`

我怎样才能加快这个查询？该查询在我的本地主机上运行以进行测试。id = 主键，我在 cid 上有索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:23:24.553

原因是两个查询之间的差异：

*   您的第一个查询将永远不会触及表格 - 它仅依赖于索引
*   您的第二个查询实际上需要命中所有行

因此，要回到更优化的第一种情况，您需要一个索引，它可以同时提供：按 cid 和最小/最大 id 分组。您可以尝试通过在 (cid,id) 上创建索引来实现此目的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:19:32.500

我会尝试在 cid 和 id 上添加复合索引。这可能会替换 cid 上的现有索引。我建议您分析一些典型的查询来评估增加现有索引大小的影响。复合索引恰好包含满足查询所需的数据，因此应尽量减少所需的工作。

MySQL 使用基于成本的优化。成本计算基于 i/o 的数量，因此，如果您可以仅在感兴趣的列上放置索引，则应该最小化 i/o 并导致最佳查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:20:25.177

查看 mysql 手册中有关加快 max() 、 min() 查询的内容

> MySQL 对这些操作使用索引：
> 
> 查找特定索引列 key_col 的 MIN() 或 MAX() 值。这是由预处理器优化的，该预处理器检查您是否在索引中 key_col 之前出现的所有关键部分上使用 WHERE key_part_N = constant。在这种情况下，MySQL 为每个 MIN() 或 MAX() 表达式执行单个键查找，并将其替换为常量。

# java - 逆向工程java序列化

> ID：12309235
> 
> 赞同：0
> 
> 时间：2012-09-06T22:18:27.067
> 
> 标签：java, serialization, deserialization

首先让我解释一下我们的项目。

我们有一个客户端服务器系统。客户端和服务器都是用java实现的。我们正在用 C 重新实现客户端，保持接口相同，并保持服务器仍然在 java 中。

客户端和服务器通信的方式是通过 java 动态代理，remoteid 是网络连接。现在，客户端调用在服务器上调用的方法。显然有序列化和反序列化。我想在 C 中实现服务器期望的相同格式。作为一名 C 黑客，我通过 wireshark 打开数据包并开始在 java 代码中映射实际字节，这对我没有多大帮助。我无法在代码中映射几个字节（显然我没有查看正确的代码）。

我还没有完全理解java动态代理是自动序列化它的库还是你需要在类中实现一些函数，以便可以将东西写入网络。

任何人都可以建议我更人性化的方法来解决这个问题吗？

PS：我对java编程不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:33:38.293

我是[Google Protocol Buffers](http://code.google.com/p/protobuf/)的粉丝，用于维护跨语言兼容的序列化接口。您以一种相当简单的格式编写消息格式，并`protoc`以您想要的任何语言为消息对象生成代码并将它们兼容地序列化。（它也非常擅长确保您以后可以添加更多字段而不会破坏所有内容，这对于轻松维护事物非常重要。）

它默认只处理 Java、C++ 和 Python，但[存在 C 插件](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:50:26.117

> 我想在 C 中实现服务器期望的相同格式。

忘掉它。这基本上是不可能的，除非你手头有一个 JVM 来为你做这件事。任何 Java 类都可以定义自己的序列化格式，JDK 本身中的许多都这样做。

考虑另一种协议，或者忘记在 C 中重新实现客户端。无论如何，这样做的目的是什么？一般是逆行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:22:01.633

我宁愿建议使用[Thrift 之](http://thrift.apache.org/)类的东西。随着在 C 中重新实现 Java 序列化，您就如履薄冰，如果它可以在您的测试环境中工作 - 它可能会在现实世界中的真实数据上失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:34:26.197

正如其中一条评论所建议的那样-我建议您切换协议。
java.lang.reflect.Proxy 本身只是一个调用的拦截器。
我猜[InvocationHandler](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/InvocationHandler.html)是执行实际通信的那个。
例如，在使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)框架时，许多实现让客户端决定它希望以哪种格式获得响应 - JSON、XML 或其他格式。
在服务器端，有一些类负责根据请求的格式“呈现”结果。
我建议您实现一种区分 C 客户端和 java 客户端的机制，
并根据客户端类型使用正确的“请求解析器”和“响应编写器”
这样，你也将实现对现有 Java 客户端的向后兼容

另一个选择当然是使用相同的协议，并决定更改现有的 Java 客户端，
在这个选项中，你可以使用 DataInputStream 和 DataOutputStream 从 Stream 中读取和写入数据不仅仅是一个字节数组或单个字节。
我认为，通过一些使用wireshark 的实验，您将了解正确的字节对齐方式，例如写入长值的情况。
我过去使用
DataInputStream 和 DataOutputStream 成功实现了协议读取器和写入器，其中客户端不仅仅是 Java（例如 - 我们有一个 iOS/objective-C 客户端）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-07T00:15:19.347

任何实现 Serializable 接口的 Java 类都使用此处指定的序列化协议（使用 BNF 语法）：[https ://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html](https://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html)

如果您习惯编写解析器，您绝对可以在 C 中实现此语法，并使用它来反序列化和重新序列化 Java 对象。

# matlab - matlab从cellfun中省略总和

> ID：12309236
> 
> 赞同：1
> 
> 时间：2012-09-06T22:18:31.177
> 
> 标签：matlab

嗨，我有以下内容：

```
b = cellfun(@(x) sum(cross(u{1},x)),r,'UniformOutput',false); 
```

我想省略总和并更改为：

```
b = cellfun(@(x) cross(u{1},x),r,'UniformOutput',false); 
```

但是我得到的错误：

```
??? Error using ==> reshape
To RESHAPE the number of elements must not change.

Error in ==> cellcross at 4
    bres = reshape(bmat,size(grid'));    %reshape the get columns of bfield vectors in x y z format 
```

原因是我不认为我在正确的地方求和。我想做 sum(cross(u{1},r{1}))....sum(cross(u{1},r{n})) 但结果似乎没有这样做。

# jquery - 使用 JQuery 悬停触发 CSS3 动画不起作用

> ID：12309241
> 
> 赞同：0
> 
> 时间：2012-09-06T22:18:47.507
> 
> 标签：jquery, animation, css

我正在尝试使用 CSS3 和 Jquery 让一些图标在悬停时跳转。弹跳动画附加到`.bounce`样式表中的类；为了处理悬停，我告诉 Jquery`bounce`在鼠标分别进入和离开图像的父元素时添加和删除类。虽然 Jquery 按预期工作，但动画没有，我不知道为什么。

[这是小提琴。](http://jsfiddle.net/fyTpV/)我很感激帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:30:05.577

您缺少动画持续时间：

```
.bounce {    
    // this is the shorthand definition
    -webkit-animation: bounce 1s ease infinite;
    -moz-animation: bounce 1s ease infinite;
    -o-animation: bounce 1s ease infinite;
    animation: bounce 1s ease infinite;
} 
```

[http://jsfiddle.net/fyTpV/2/](http://jsfiddle.net/fyTpV/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:38:00.330

您需要添加动画类。这是更新的小提琴[http://jsfiddle.net/fyTpV/3/](http://jsfiddle.net/fyTpV/3/)将类添加到您希望动画的元素中，或者在您的添加类中添加动画类。

# bash - Bash，从包含电子邮件的文本文件中获取电子邮件正文

> ID：12309244
> 
> 赞同：4
> 
> 时间：2012-09-06T22:18:56.477
> 
> 标签：bash, email, unix

我在一个文件夹中有多个文件，每个文件都有一封电子邮件。每条消息都有一个格式的标题

```
Subject: formatting fonts 
To: XXX@XXX.COM 
From: sender 

email body 
```

我怎样才能得到尸体？我可以通过“read XX”之类的方式获取主题，to .. 由于没有“Body：”之类的标签，我现在无法获取电子邮件正文

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T23:36:02.757

你想要除了第一段之外的所有内容。`sed`可以这样做：

```
sed '1,/^$/d' file.txt 
```

它说的是——从头开始，（`1`）转到第一行空白（`^$`——在开头`^`和结尾之间没有任何内容`$`）并删除它（`d`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:35:58.753

电子邮件的标题和正文始终由一个空行分隔。您需要阅读（并忽略）所有行，直到看到空白行。文件的其余部分是正文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-10T09:10:28.450

将消息传递到：

```
| formail -I '' 
```

procmail 包的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T00:01:15.530

此解决方案使用`pcregrep`并匹配主题、至和来自行，然后得到该匹配的逆。

```
pcregrep -M -v 'Subject.*\nTo.*\nFrom.*\n' file.txt 
```

# ruby-on-rails - 在“视图”中填充 db 值时 date_select ruby 问题

> ID：12309247
> 
> 赞同：0
> 
> 时间：2012-09-06T22:19:10.387
> 
> 标签：ruby-on-rails

我在将`date`值从我的数据库填充到 Rails`View`对象时遇到问题。我在数据库中拥有的是一个`License`带有属性的表`license_expiration="2012-11-11"`。我需要在`View`用户选择“编辑”时填充此值。我在**edit.html.erb**文件中的内容是：

```
<h1>Edit License</h1>
<% product_options_for_selector = options_for_select(product_selection_options, 
@license.product ? @license.product.id : product_selection_options.first.last) 
%>

<% form_tag("/licenses/#{@license.id}", :method => :put, :id => "edit_license_#        @license.id}") do %>
.
.
.
.
<%= label_tag :license_expiration, 'License Expiration:' %> <br />
<%= date_select :license_expiration, @license.license_expiration %>
. 
.
. 
```

但是，date_select 始终默认为当前日期，而不是`@license.license_expiration`数据库中的值。关于我在这里做错了什么有什么想法吗？帮助将不胜感激，

谢谢，

--- 一月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:52:33.190

你试过吗？

```
<%= date_select :license_expiration, :license_expiration, :default => Time.parse(@license.license_expiration) %> 
```

# mysql - MySQL Order By 不适用于所有记录

> ID：12309248
> 
> 赞同：0
> 
> 时间：2012-09-06T22:19:20.817
> 
> 标签：mysql, sql, sorting, sql-order-by

我运行此查询并需要按状态字段对结果进行排序。

```
SELECT status
FROM myusers
WHERE status IN (7,8,35)  
ORDER BY status DESC 
```

我得到回应：

```
8
7
7
7
35 
```

为什么我使用时它不能正确排序`IN (7,8,35)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:22:35.477

这是因为您当前列的`string`格式存储为`VARCHAR`. 将其转换为整数以获得正确的结果。

```
SELECT status
FROM myusers
WHERE status IN (7,8,35)  
ORDER BY CAST(status AS SIGNED) DESC 
```

或者另一种方法是将`status`列的当前数据类型更改为`INT`

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/40b7f/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:21:41.400

您的`status`字段应该是正确排序的数字字段。当前的顺序显然是按字母顺序排列的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:21:57.047

您的状态列可能是`VARCHAR`，将其转换为`INT`列，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:23:01.060

我想你的“状态”是 VARCHAR 类型的，所以排序顺序是正确的。您正在按降序排序，因此“8”（按字典顺序）大于“7”，“7”大于“35”。

对于数字排序，将状态字段的数据类型更改为数字。

对于订单 (7,8,35)，您应该使用 ORDER BY status ASC ;-)

# jquery - 月视图和日视图之间的全日历切换

> ID：12309249
> 
> 赞同：3
> 
> 时间：2012-09-06T22:19:29.300
> 
> 标签：jquery, fullcalendar

我是一个完整的日历新手。

我为客户网站创建了一个页面，该页面显示默认（月）视图，并且可以按月来回显示。顺便说一句，我不知道“今天”按钮在这种情况下的作用，所以我将它从标题中删除。

我想要做的是实现 dayClick 回调以将视图更改为 basicDay，然后允许查看器返回。

更改为 basicDay 似乎相当简单：

```
dayClick: function(date, allDay, jsEvent, view) {
  $(this).( 'changeView', 'basicDay' )
} 
```

但观众如何回来？basicDay 视图似乎没有任何可点击的内容。至少我在文档中找不到它.....

也许我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:24:15.327

定义您希望在`header`日历选项中可用的视图以及导航按钮：

```
header: {
  left: 'prev,next today',
  center: 'title',
  right: 'month,basicWeek, basicDay'
} 
```

当视图改变时，使用`viewDisplay`回调做一些事情：

```
viewDisplay: function(view) {
  console.log(view.name);
} 
```

它在[文档](http://arshaw.com/fullcalendar/docs/display/header/)中。查看[示例](http://arshaw.com/js/fullcalendar-1.5.4/demos/agenda-views.html)源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T16:51:03.333

实际上：

要检测到视图更改，请使用：

```
viewRender: function(view) {
   console.log(view.name);
}, 
```

要更改视图，请使用：

`my_function(){ p_calendar.fullCalendar('changeView', 'month'/*Or anything else*/); }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-14T08:22:43.193

这是在视图之间切换甚至拥有自定义菜单的方法：

将标题右侧的初始化设置为空白：

```
'header' => [ 'left'=>'today','center'=>'prev, title, next','right'=> ''], 
```

（也就是Yii2中的格式，纯javascript类似）

使用jquery添加自定义标题html，使用jquery绑定一个函数来点击事件，创建一个函数来处理不同的情况并更改日历视图。

该功能已被彻底注释，此代码正在运行并正在生产中。

这是创建自定义右上角标题的 javascript，其中覆盖了标准完整日历按钮的处理：

```
var htm = '<div class="dropdown" style="display:-webkit-inline-box"><button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Bytt Visning</button><div class="dropdown-menu pull-right" style="width:170px" aria-labelledby="dropdownMenu2"><button class="dropdown-item fc-agendaDay-button fc-button fc-state-default fc-state-active" type="button">Dag</button><button class="dropdown-item fc-agendaWeek-button fc-button fc-state-default" type="button">Uke</button><button class="dropdown-item fc-month-button fc-button fc-state-default" type="button">Måned</button><button class="dropdown-item fc-listYear-button fc-button fc-state-default" type="button">År</button></div></div><button type="button" class="btn btn-secondary fc-listDay-button fc-button fc-state-default toggle"><i class="fa fa-toggle-off"></i></button><button type="button" class="btn btn-secondary fc-listWeek-button fc-button fc-state-default hidden toggle"><i class="fa fa-toggle-off"></i></button><button type="button" class="btn btn-secondary fc-listMonth-button fc-button fc-state-default hidden toggle"><i class="fa fa-toggle-off"></i></button>';

$(document).on('ready', function () { 
  $('.fc-right').append(htm);

  $('.fc-listYear-button').on('click', {name:'listYear'},myChangeView);

  $('.fc-month-button').on('click', {name:'month', toggle: 'listMonth'},myChangeView);
  $('.fc-listMonth-button').on('click', {name:'listMonth', toggle: 'month'},myChangeView);

  $('.fc-agendaWeek-button ').on('click', {name:'agendaWeek', toggle: 'listWeek'},myChangeView);
  $('.fc-listWeek-button ').on('click', {name:'listWeek', toggle: 'agendaWeek'},myChangeView);

  $('.fc-agendaDay-button').on('click', {name:'agendaDay', toggle: 'listDay'},myChangeView);
  $('.fc-listDay-button').on('click', {name:'listDay', toggle: 'agendaDay'},myChangeView);

  function myChangeView(event) {    

    if(event.data.toggle)//button with corresponding toggle button or toggle button
    {    
      if(event.data.name.indexOf('list') == 0)//toggle button
      {
        if($('.fc-'+event.data.name+'-button').html() == '<i class="fa fa-toggle-on"></i>') //is it already toggled on?
        {      
          $('.fc-'+event.data.name+'-button').html('<i class="fa fa-toggle-off"></i>'); //toggle to off        

          $('#calendar').fullCalendar('changeView', event.data.toggle);//render the opposite view to the current view (toggle views)
          return; //do not proceed to the rest of the code
        }
        else //it was not already toggled on
        {
          $('.toggle').addClass('hidden');     //hide all toggles  
          $('.fc-'+event.data.name+'-button').html('<i class="fa fa-toggle-on"></i>');//toggle to on
          $('.fc-'+event.data.name+'-button').removeClass('hidden'); //show that one toggle           
        }
      }
      else //button with corresponding toggle button (in dropdown menu)
      {
        $('.toggle').addClass('hidden');  //hide all toggles  
        $('.toggle').html('<i class="fa fa-toggle-off"></i>'); //toggle to off
        $('.fc-'+event.data.toggle+'-button').removeClass('hidden');   //show that one toggle  
      }

    }
    else
    {
      $('.toggle').addClass('hidden');   //hide all toggles 
      $('.toggle').html('<i class="fa fa-toggle-off"></i>');  //reset all toggles to off    
    }
      $('#calendar').fullCalendar('changeView', event.data.name);  //render the requested view
  };

}); 
```

# java - sudo：java：从root用户退出后找不到命令

> ID：12309253
> 
> 赞同：2
> 
> 时间：2012-09-06T22:20:01.930
> 
> 标签：java, bash, unix, sudo

我已经安装了 jdk，但是当我尝试使用 java 命令时，它说“找不到命令”。

所以我然后在 .bashrc 中为我的帐户设置环境变量，它工作正常。

```
export JAVA_HOME=/usr/java/jdk1.7.0_03
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/l\
ib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin 
```

但是，当我尝试使用 sudo 执行 java 时，它又说了一遍。所以我曾经`sudo -s`切换到root，将它们放入/etc/profile，然后执行`source /etc/profile`

如果我继续以 root 身份登录但在我返回自己的帐户并使用`sudo java`它后仍然显示 sudo: java: command not found 并且这些环境变量变为空白，则此方法有效。

我应该怎么做才能解决问题？我想应该很容易解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T02:15:07.330

默认情况下，某些发行版会重置您的环境变量，以确保在 root 下执行的程序按预期运行。白名单中未指定的任何环境变量都不会带入您的根会话。

重置环境的指令以及允许的变量在`/etc/sudoers`. （您需要权限才能查看/编辑此内容）。

例如，在我的 Fedora 16 机器上，我有

```
默认值 env_reset
默认值 env_keep = "颜色显示主机名 HISTSIZE INPUTRC KDEDIR LS_COLORS"
默认值 env_keep += "MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE"
默认值 env_keep += "LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"
默认值 env_keep += "LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE"
默认值 env_keep += "LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"

```

请注意，`XAUTHORITY`默认情况下不存在，[我必须添加它](http://blog.edwards-research.com/2012/06/x-forwarding-with-sudo/)。

如果您希望您的`JAVA_HOME`envvar 继续使用，您可以在此处添加它。但是，要让这成为您需要做的全部，您需要添加`PATH`到此列表中，这确实令人气馁。

所以在这个文件中也有如下一行：

```
默认值secure_path = /sbin:/bin:/usr/sbin:/usr/bin

```

这将是您`$PATH`在 sudo 会话中的内容。只需确保您有一个指向要在其中一个文件夹中使用的 java 可执行文件的符号链接，就可以了。

（由于您收到“找不到命令消息”，因此`java`您的安全路径上没有可执行文件，但如果有，您需要删除它，或者将新符号链接“更高”（较早）放在路径中)

**备选方案 1**

在文件中添加别名`java`（例如`alias java='/usr/java/latest/bin/java'`），例如`/etc/bashrc`

**备选方案 2**

`java`在您的本地配置文件或 bashrc 文件中添加一个别名，该别名`sudo` [将保留您的别名](http://blog.edwards-research.com/2010/07/keeping-aliases-with-sudo-sort-of/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:25:24.390

man sudo 会给你答案：

```
 -E   The -E (preserve environment) option indicates to the security policy that the user wishes
       to preserve their existing environment variables.  The security policy may return an error 
       if the -E option is specified and the user does not have permission to preserve the environment. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:48:20.793

您可能想要使用类似的东西`update-alternatives`（不确定这是否适用于所有发行版）。

它在 /usr/bin 中创建和管理符号链接（即所有人都可以使用的可执行文件）。

示例用法：`sudo update-alternatives --install java java /path/to/java/home/bin/java`

我认为java可以`JAVA_HOME`根据它的可执行位置提取位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T00:31:59.167

检查 jdk 文件夹的权限，确保它是`rwx`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-20T10:50:14.063

我解决了这个问题

```
vi /etc/sudoers 
```

然后将 $JAVA_HOME/bin 放入

```
Defaults        secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin:$JAVA_HOME/bin" 
```

# linux - cron 没有运行程序

> ID：12309259
> 
> 赞同：0
> 
> 时间：2012-09-06T22:20:46.820
> 
> 标签：linux, cron, crontab

我试图向 cron 添加一个命令，但它不会运行。我正在使用 crontab -e 进行编辑，经过广泛的谷歌搜索，我找不到解决问题的方法。

这是我的 crontab：

```
 SHELL=/bin/sh
    PATH=/usr/bin:/usr/sbin:/bin:/sbin
    * * * * * /usr/bin/notify-send hello 
```

我已经检查了 cron 是否使用 ps -A|grep 'cron' 运行。它正在运行。我在一个带有 systemd 和 cronie 的拱系统上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:10:05.420

判断它是否“工作”的简单方法是查看 cron 守护程序日志文件，例如`/var/log/crond.log`. cron 表中的`'* * * * *'`部分意味着每分钟运行一次工作。这真的是你想要的吗？

# c# - 使用 linq 设置值时的奇怪结果

> ID：12309263
> 
> 赞同：1
> 
> 时间：2012-09-06T22:21:08.940
> 
> 标签：c#, linq

我试图使用 LINQ 在我的列表中设置一些值，但不知何故，以下代码将没有设置值。

```
class Person
{
    public string name;
    public Person(string name)
    {
        this.name = name;
    }
}

List<Person> people = new List<Person>() { new Person("a"), new Person("b") };
people.Select(x => { x.name = "c"; return x; });
foreach (Person person in people)
{
    Console.WriteLine(person.name);
} 
```

但是，如果我在调用 select 方法后添加 ToList() ，则会设置值：

```
List<Person> people = new List<Person>() { new Person("a"), new Person("b") };
people.Select(x => { x.name = "c"; return x; }).ToList(); 
```

更奇怪的是，如果我在单独的行上调用 ToList() ，它也不起作用：

```
List<Person> people = new List<Person>() { new Person("a"), new Person("b") };
people.Select(x => { x.name = "c"; return x; });
people.ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:25:29.330

通常，最好不要生成会产生副作用的 LINQ 查询。`Select()`您在这里的全部目标是在语句中产生副作用。

导致这种情况产生影响的原因`ToList()`是 LINQ 查询在您枚举结果之前不会执行。 `ToList()`使查询结果被完全枚举（以构建列表）。如果你要写：

```
foreach (Person person in people.Select(x => { x.name = "c"; return x; }))
{ 
```

当 foreach 遍历结果时，您会看到效果发生了。

话虽如此，使用 LINQ 写入值的“正确”方法是过滤，然后再更改：

```
var peopleToEdit = people.Where(p => string.IsNullOrWhiteSpace(p.Name));
foreach(var person in peopleToEdit)
    person.Name = "Foo"; // Assign like so 
```

基本上，查询应该没有副作用，然后使用正常的控制流来实际编辑值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:35:38.207

使用 .Where 子句。

```
 List<Person> people = new List<Person>() { new Person("C"), new Person("b") };
    var something = people.Where(x => x.name == "C");
    foreach(var x in something)
    {

    } 
```

这是经过测试的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-10T06:29:50.213

```
people.Where(p => string.IsNullOrWhiteSpace(p.Name)).ToList().ForEach(cc=>cc.Name="Foo"); 
```

# jquery - jQuery each() 闭包 - 如何访问外部变量

> ID：12309264
> 
> 赞同：21
> 
> 时间：2012-09-06T22:21:11.840
> 
> 标签：jquery, closures

从 $.each() 中访问我的 this.rules 变量的最佳方法是什么？任何解释为什么/如何也会有帮助！

```
app.Style = function(node) {
    this.style = node;
    this.rules = [];
    var ruleHolder = node.find('Rule');

    $.each(ruleHolder, function(index, value) {
        var myRule = new app.Rule($(ruleHolder[index]));
        this.rules.push(myRule);
    });

    console.log(this.rules)
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T22:22:13.277

在调用之前存储对`this`-- 命名它的引用`self`，例如 -- ，`.each()`然后`rules`使用`self.rules`：

```
app.Style = function(node) {
    this.style = node;
    this.rules = [];
    var ruleHolder = node.find('Rule');

    var self = this;
    $.each(ruleHolder, function(index, value) {
        var myRule = new app.Rule($(ruleHolder[index]));
        self.rules.push(myRule);
    });

    console.log(this.rules)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T21:28:03.100

João Silva 的上述答案不是一个好的解决方案，因为它创建了一个全局变量。您实际上并没有通过引用将“self”变量传递给每个函数，而是引用了全局“self”对象。

在上面的示例中，“this”是窗口对象，设置“var self = this”实际上并没有做任何事情。

Window 对象有两个自引用属性，window 和 self。您可以使用任一全局变量直接引用 Window 对象。

简而言之，window和self都是对Window对象的引用，它是客户端javascript的全局对象。

[创建一个闭包函数是一个更好的解决方案](https://stackoverflow.com/a/23357268)。

[显示窗口和自我比较的屏幕截图](https://i.stack.imgur.com/KxxWK.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T10:16:33.477

没有它更优雅`var self = this;`

```
app.Style = function(node) {
    this.style = node;
    this.rules = [];
    var ruleHolder = node.find('Rule');

    $.each(ruleHolder, function(index, value) {
        var myRule = new app.Rule($(ruleHolder[index]));
        this.rules.push(myRule);
    }.bind(this));

    console.log(this.rules)
} 
```

# python - 如何将 JSON 数据写入文件？

> ID：12309269
> 
> 赞同：1445
> 
> 时间：2012-09-06T22:21:21.717
> 
> 标签：python, json

我将 JSON 数据存储在变量中`data`。

我想将其写入文本文件进行测试，这样我就不必每次都从服务器获取数据。

目前，我正在尝试这个：

```
obj = open('data.txt', 'wb')
obj.write(data)
obj.close 
```

我收到了这个错误：

> TypeError：必须是字符串或缓冲区，而不是字典

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2604
> 
> 时间：2012-09-06T22:23:14.897

您忘记了实际的 JSON 部分 -`data`是一个字典，尚未进行 JSON 编码。[像这样](https://docs.python.org/3/library/json.html)编写它以获得最大的兼容性（Python 2 和 3）：

```
import json
with open('data.json', 'w') as f:
    json.dump(data, f) 
```

在现代系统（即 Python 3 和 UTF-8 支持）上，您可以编写一个更好的文件

```
import json
with open('data.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=4) 
```

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2013-02-14T08:22:36.483

要在 Python 2 接受的答案中获取***utf8****编码*文件而不是***ascii****编码文件，请使用：*

```
import io, json
with io.open('data.txt', 'w', encoding='utf-8') as f:
  f.write(json.dumps(data, ensure_ascii=False)) 
```

Python 3 中的代码更简单：

```
import json
with open('data.txt', 'w') as f:
  json.dump(data, f, ensure_ascii=False) 
```

在 Windows 上，`encoding='utf-8'`参数 to`open`仍然是必要的。

为了避免在内存中存储数据的编码副本（结果）并在 Python 2 和 3 中`dumps`输出*utf8 编码的字节串，请使用：*

```
import json, codecs
with open('data.txt', 'wb') as f:
    json.dump(data, codecs.getwriter('utf-8')(f), ensure_ascii=False) 
```

*该`codecs.getwriter`调用在 Python 3 中是多余的，但在 Python 2 中是必需的*

* * *

**可读性和大小：**

的使用`ensure_ascii=False`提供了更好的可读性和更小的尺寸：

```
>>> json.dumps({'price': '€10'})
'{"price": "\\u20ac10"}'
>>> json.dumps({'price': '€10'}, ensure_ascii=False)
'{"price": "€10"}'

>>> len(json.dumps({'абвгд': 1}))
37
>>> len(json.dumps({'абвгд': 1}, ensure_ascii=False).encode('utf8'))
17 
```

通过向or的参数添加标志`indent=4, sort_keys=True`（如[dinos66](https://stackoverflow.com/a/31343739/237105)所建议的）进一步提高可读性。这样，您将在 json 文件中获得一个很好的缩进排序结构，但代价是文件大小稍大。`dump``dumps`

* * *

## 回答 #3

> 赞同：173
> 
> 时间：2013-12-25T20:04:24.653

我会用上述答案稍作修改来回答，那就是编写一个人眼可以更好地阅读的美化 JSON 文件。为此，传递`sort_keys`as`True`和`indent`4 个空格字符就可以了。还要注意确保 ascii 代码不会写入您的 JSON 文件中：

```
with open('data.txt', 'w') as outfile:
     json.dump(jsonData, outfile, sort_keys = True, indent = 4,
               ensure_ascii = False) 
```

* * *

## 回答 #4

> 赞同：125
> 
> 时间：2016-06-13T16:43:33.533

## 使用 Python 2+3 读写 JSON 文件；使用 unicode

```
# -*- coding: utf-8 -*-
import json

# Make it work for Python 2+3 and with Unicode
import io
try:
    to_unicode = unicode
except NameError:
    to_unicode = str

# Define data
data = {'a list': [1, 42, 3.141, 1337, 'help', u'€'],
        'a string': 'bla',
        'another dict': {'foo': 'bar',
                         'key': 'value',
                         'the answer': 42}}

# Write JSON file
with io.open('data.json', 'w', encoding='utf8') as outfile:
    str_ = json.dumps(data,
                      indent=4, sort_keys=True,
                      separators=(',', ': '), ensure_ascii=False)
    outfile.write(to_unicode(str_))

# Read JSON file
with open('data.json') as data_file:
    data_loaded = json.load(data_file)

print(data == data_loaded) 
```

参数说明[`json.dump`](https://docs.python.org/2/library/json.html#basic-usage)：

*   `indent`: 使用 4 个空格来缩进每个条目，例如当一个新的 dict 开始时（否则所有将在一行中），
*   `sort_keys`：对字典的键进行排序。如果您想使用差异工具比较 json 文件/将它们置于版本控制之下，这将非常有用。
*   `separators`: 防止 Python 添加尾随空格

## 带一个包

查看我的实用程序包[`mpu`](https://github.com/MartinThoma/mpu)，了解一个超级简单且易于记忆的工具包：

```
import mpu.io
data = mpu.io.read('example.json')
mpu.io.write('example.json', data) 
```

## 创建的 JSON 文件

```
{
    "a list":[
        1,
        42,
        3.141,
        1337,
        "help",
        "€"
    ],
    "a string":"bla",
    "another dict":{
        "foo":"bar",
        "key":"value",
        "the answer":42
    }
} 
```

## 常见文件结尾

`.json`

## 备择方案

*   CSV：超级简单的格式（[读写](https://stackoverflow.com/a/41585079/562769)）
*   JSON：非常适合编写人类可读的数据；非常常用（[读写](https://stackoverflow.com/a/37795053/562769)）
*   YAML：YAML 是 JSON 的超集，但更易于阅读（[读写](https://stackoverflow.com/a/42054860/562769)，[JSON 和 YAML 的比较](https://stackoverflow.com/a/1729545/562769)）
*   pickle：一种 Python 序列化格式（[读写](https://stackoverflow.com/a/33245595/562769)）
*   [MessagePack](http://msgpack.org/)（[Python 包](https://pypi.python.org/pypi/msgpack-python)）：更紧凑的表示（[读写](https://stackoverflow.com/q/43442194/562769)）
*   [HDF5](https://en.wikipedia.org/wiki/Hierarchical_Data_Format)（[Python 包](http://docs.h5py.org/en/latest/quick.html)）：适用于矩阵（[读写](https://stackoverflow.com/a/41586571/562769)）
*   XML: 也存在 *sigh* ([读](https://stackoverflow.com/a/1912483/562769)&[写](https://stackoverflow.com/a/3605831/562769))

对于您的应用程序，以下内容可能很重要：

*   其他编程语言的支持
*   读/写性能
*   紧凑性（文件大小）

另见：[数据序列化格式的比较](https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)

如果您正在寻找一种制作配置文件的方法，您可能需要阅读我的短文[Python 中的配置文件](https://martin-thoma.com/configuration-files-in-python/)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2015-07-10T14:45:29.270

对于那些试图转储希腊语或其他“外来”语言（例如我）但也遇到奇怪字符（例如和平符号 (\u262E) 或其他通常包含在 json 格式数据中的字符）的问题（unicode 错误）的人例如 Twitter 的，解决方案可能如下（sort_keys 显然是可选的）：

```
import codecs, json
with codecs.open('data.json', 'w', 'utf8') as f:
     f.write(json.dumps(data, sort_keys = True, ensure_ascii=False)) 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-01-03T06:52:36.360

我没有足够的声誉来添加评论，所以我只是在这里写下我对这个烦人的 TypeError 的一些发现：

基本上，我认为这只是 Python **2**`json.dump()`中的函数中的一个错误 -*即使*您使用参数打开文件，它也无法转储包含非 ASCII 字符的 Python（字典/列表）数据。（即无论你做什么）。但是，适用于 Python 2 和 3。***`encoding = 'utf-8'``json.dumps()`***

 ***为了说明这一点，跟进 phihag 的回答：他的回答中的代码在 Python 2 中出现异常`TypeError: must be unicode, not str`，如果`data`包含非 ASCII 字符。（Python 2.7.6，Debian）：

```
import json
data = {u'\u0430\u0431\u0432\u0433\u0434': 1} #{u'абвгд': 1}
with open('data.txt', 'w') as outfile:
    json.dump(data, outfile) 
```

然而，它在 Python 3 中运行良好。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-12-24T10:58:21.390

Write a data in file using JSON use **json.dump()** or **json.dumps()** used. write like this to store data in file.

```
import json
data = [1,2,3,4,5]
with open('no.txt', 'w') as txtfile:
    json.dump(data, txtfile) 
```

this example in list is store to a file.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-12-13T22:38:01.237

要编写带有缩进的 JSON，“漂亮的打印”：

```
import json

outfile = open('data.json')
json.dump(data, outfile, indent=4) 
```

此外，如果您需要调试格式不正确的 JSON，并且想要有用的错误消息，请使用`import simplejson`库，而不是`import json`（功能应该相同）

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-02-29T20:16:51.557

```
json.dump(data, open('data.txt', 'wb')) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-10-10T05:36:43.863

之前的所有答案都是正确的，这是一个非常简单的例子：

```
#! /usr/bin/env python
import json

def write_json():
    # create a dictionary  
    student_data = {"students":[]}
    #create a list
    data_holder = student_data["students"]
    # just a counter
    counter = 0
    #loop through if you have multiple items..         
    while counter < 3:
        data_holder.append({'id':counter})
        data_holder.append({'room':counter})
        counter += 1    
    #write the file        
    file_path='/tmp/student_data.json'
    with open(file_path, 'w') as outfile:
        print("writing file to: ",file_path)
        # HERE IS WHERE THE MAGIC HAPPENS 
        json.dump(student_data, outfile)
    outfile.close()     
    print("done")

write_json() 
```

[![在此处输入图像描述](../Images/5aff4476ba525f30492c65cc04ccc0b8.png)](https://i.stack.imgur.com/1CNhG.png)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-06-03T07:48:30.773

如果您尝试使用 json 格式将 pandas 数据帧写入文件，我建议您这样做

```
destination='filepath'
saveFile = open(destination, 'w')
saveFile.write(df.to_json())
saveFile.close() 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-11-01T12:00:47.470

JSON数据可以按如下方式写入文件

```
hist1 = [{'val_loss': [0.5139984398465246],
'val_acc': [0.8002029867684085],
'loss': [0.593220705309384],
'acc': [0.7687131817929321]},
{'val_loss': [0.46456472964199463],
'val_acc': [0.8173602046780344],
'loss': [0.4932038113037539],
'acc': [0.8063946213802453]}] 
```

写入文件：

```
with open('text1.json', 'w') as f:
     json.dump(hist1, f) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-10-15T04:10:56.743

接受的答案很好。但是，我使用它遇到了“不是 json 可序列化”错误。

这是我将其修复`open("file-name.json", 'w')`为输出的方法：

`output.write(str(response))`

虽然它不是一个很好的解决方法，因为它创建的 json 文件不会有双引号，但是如果您正在寻找快速和肮脏的东西，那就太好了。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-09-13T12:16:53.287

*这只是对使用的额外提示`json.dumps`（这不是对问题问题的回答，而是对于那些必须转储 numpy 数据类型的人的技巧）：*

如果字典中有 NumPy 数据类型，`json.dumps()`需要一个额外的参数，归功于*[TypeError: Object of type 'ndarray' is not JSON serializable](https://stackoverflow.com/a/65821617/11154841)*，它还会修复诸如此类`TypeError: Object of type int64 is not JSON serializable`的错误：

```
class NumpyEncoder(json.JSONEncoder):
    """ Special json encoder for np types """
    def default(self, obj):
        if isinstance(obj, (np.int_, np.intc, np.intp, np.int8,
                            np.int16, np.int32, np.int64, np.uint8,
                            np.uint16, np.uint32, np.uint64)):
            return int(obj)
        elif isinstance(obj, (np.float_, np.float16, np.float32,
                              np.float64)):
            return float(obj)
        elif isinstance(obj, (np.ndarray,)):
            return obj.tolist()
        return json.JSONEncoder.default(self, obj) 
```

然后运行：

```
import json

#print(json.dumps(my_data[:2], indent=4, cls=NumpyEncoder)))
with open(my_dir+'/my_filename.json', 'w') as f:
    json.dumps(my_data, indent=4, cls=NumpyEncoder))) 
```

在 np.array() 的情况下，您可能还希望返回字符串而不是列表，因为数组被打印为分布在行上的列表，如果您有很大或很多数组，这将破坏输出。警告：稍后从转储字典中访问项目以将它们作为原始数组返回更加困难。但是，如果您不介意只有一个数组字符串，这会使字典更具可读性。然后交换：

```
 elif isinstance(obj, (np.ndarray,)):
            return obj.tolist() 
```

和：

```
 elif isinstance(obj, (np.ndarray,)):
            return str(obj) 
```

要不就：

```
 else:
            return str(obj) 
```***

# phpbb - 在我的 PHPBB3 论坛上安装 mod 时出现问题

> ID：12309272
> 
> 赞同：1
> 
> 时间：2012-09-06T22:21:41.950
> 
> 标签：phpbb, phpbb3

我正在尝试手动安装一个名为“快速标题版”的模块，他们部分的安装教程基于样式 prosilver。但是我正在使用一种名为“Kirigami”的自定义样式，他们要求我编辑 MCP_post.html 和其他内容。但它们在 Kirigami/template/.. 中不存在。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:27:54.857

Kirigami 模板只有几个 HTML 模板位于该样式模板文件夹中。如果安装成功，则只需要编辑 Kirigami 模板文件夹中的 html 文件。这是因为 Kirigami 模板样式使用 prosilver。

可以在这里找到更好的解释。[https://www.phpbb.com/community/viewtopic.php?f=46&t=1586785](https://www.phpbb.com/community/viewtopic.php?f=46&t=1586785)

# java - 在 JAVA (org.json) 中从字符串创建 JSONObject

> ID：12309279
> 
> 赞同：16
> 
> 时间：2012-09-06T22:22:10.130
> 
> 标签：java, android, json

我正在使用 org.json 并且我在字符串中有那个 JSON：

> {"小时":["1","2","3","4","5","6","7","8","9","10","11"] }

当我尝试从该字符串创建一个新的 JSONObject 时，我收到以下错误：

```
Value of type ..String cannot be converted to JSONObject. 
```

我究竟做错了什么？

**编辑：**假设 str 具有内容：

```
JSONObject jObject = new JSONObject(str); 
```

**EDIT2：**这是真正的字符串：

```
{"hours":["1","2","3","4","5","6","7","8","9","10","11"],"lessons":["\u05d2\u05d9\u05d0,\u05ea\u05dc\u05de,\u05e2\u05e8\u05d1,\u05e4\u05d9\u05e1,\u05d1\u05d9\u05d5,\n\u05d6\u05d9\u05d5,\u05d5\u05d9\u05d9,\u05dc\u05d5\u05d9,\u05e4\u05d1\u05dc,\u05e8\u05d9\u05d9,","\u05d2\u05d9\u05d0,\u05ea\u05dc\u05de,\u05e2\u05e8\u05d1,\u05e4\u05d9\u05e1,\u05d1\u05d9\u05d5,\n\u05d6\u05d9\u05d5,\u05d5\u05d9\u05d9,\u05dc\u05d5\u05d9,\u05e4\u05d1\u05dc,\u05e8\u05d9\u05d9,","\u05d7\u05e0\"\u05d2 \u05d1\u05e0\u05d9\u05dd,\u05d7\u05e0\"\u05d2 \u05d1\u05e0\u05d5\u05ea\n\u05d9\u05de\u05e4\u05d5\u05dc\u05e1\u05e7\u05d9 \u05dc,\u05e0\u05d0\u05d5\u05e8 \u05de\u05dc\u05d9","\u05e1\u05e4\u05e8\u05d5\u05ea\n\u05d6\u05d9\u05dc\u05d3\u05de\u05df \u05d0\u05d5\u05e8\u05dc\u05d9","\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea\n\u05d1\u05e9\u05d9 \u05e9\u05d5\u05dc\u05de\u05d9\u05ea","\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea\n\u05d1\u05e9\u05d9 \u05e9\u05d5\u05dc\u05de\u05d9\u05ea","\u05ea\u05e0\",\u05e2\u05e8\u05d1,\u05e6\u05e8\u05e4,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\n\u05e9\u05d7\u05e3,\u05de\u05d6\u05dc,\u05dc\u05e1\u05e7,\u05d8\u05d5\u05e4,\u05dc\u05d5\u05d9,","\u05ea\u05e0\",\u05e2\u05e8\u05d1,\u05e6\u05e8\u05e4,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\n\u05e9\u05d7\u05e3,\u05de\u05d6\u05dc,\u05dc\u05e1\u05e7,\u05d8\u05d5\u05e4,\u05dc\u05d5\u05d9,","\u05e2\u05e8\u05d1,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\u05d8\u05db\",\u05e8\u05d5\u05e1,\n\u05dc\u05d5\u05d9,\u05e7\u05de\u05d7,\u05d1\u05e1\u05d5,\u05d5\u05e7\u05e1,\u05e6\u05d5\u05e8,","\u05e2\u05e8\u05d1\u05d9,\u05e7\u05d5\u05dc\u05e0,\u05d1\u05d9\u05d5\u05d8,\u05d8\u05db\"\u05dd\n\u05dc\u05d5\u05d9,\u05d1\u05e1\u05d5\u05df,\u05d5\u05e7\u05e1,\u05e6\u05d5\u05e8",""]} 
```

**EDIT3：**最后，这是我的代码，希望你能解决这个问题。

```
StringBuilder str = new StringBuilder();
        TextView textView = new TextView(this);
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet("http://ohel-shem.com/~iApplication/appdata.php?pass=12345&request=cp&day=4%20&class=7&layer=12");
        Log.d("MyTag","Before");
        HttpResponse response = client.execute(request);

//       Get the response
        BufferedReader rd = new BufferedReader
          (new InputStreamReader(response.getEntity().getContent()));

        String line = "";
        while ((line = rd.readLine()) != null) {
          str.append(line);
        } 
        Log.d("MyTag","hello");
        String s = str.toString();
                s= s.replaceAll("\n", "\\n");
                JSONObject json = new JSONObject(s); //Occures an error converting string to jsonobject 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T23:22:38.123

欢迎来到 \n 破坏解析器的美妙世界。

\n 指定一个换行符，我不确定它究竟为什么会破坏解析器，但添加一个 \ 会将控制字符分隔开。

```
@Test
public void test() throws JSONException {

        String s = 
        "{\"hours\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\"],\"lessons\":[\"\u05d2\u05d9\u05d0,\u05ea\u05dc\u05de,\u05e2\u05e8\u05d1,\u05e4\u05d9\u05e1,\u05d1\u05d9\u05d5,\n\u05d6\u05d9\u05d5,\u05d5\u05d9\u05d9,\u05dc\u05d5\u05d9,\u05e4\u05d1\u05dc,\u05e8\u05d9\u05d9,\",\"\u05d2\u05d9\u05d0,\u05ea\u05dc\u05de,\u05e2\u05e8\u05d1,\u05e4\u05d9\u05e1,\u05d1\u05d9\u05d5,\n\u05d6\u05d9\u05d5,\u05d5\u05d9\u05d9,\u05dc\u05d5\u05d9,\u05e4\u05d1\u05dc,\u05e8\u05d9\u05d9,\",\"\u05d7\u05e0\\\"\u05d2 \u05d1\u05e0\u05d9\u05dd,\u05d7\u05e0\\\"\u05d2 \u05d1\u05e0\u05d5\u05ea\n\u05d9\u05de\u05e4\u05d5\u05dc\u05e1\u05e7\u05d9 \u05dc,\u05e0\u05d0\u05d5\u05e8 \u05de\u05dc\u05d9\",\"\u05e1\u05e4\u05e8\u05d5\u05ea\n\u05d6\u05d9\u05dc\u05d3\u05de\u05df \u05d0\u05d5\u05e8\u05dc\u05d9\",\"\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea\n\u05d1\u05e9\u05d9 \u05e9\u05d5\u05dc\u05de\u05d9\u05ea\",\"\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea\n\u05d1\u05e9\u05d9 \u05e9\u05d5\u05dc\u05de\u05d9\u05ea\",\"\u05ea\u05e0\\\",\u05e2\u05e8\u05d1,\u05e6\u05e8\u05e4,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\n\u05e9\u05d7\u05e3,\u05de\u05d6\u05dc,\u05dc\u05e1\u05e7,\u05d8\u05d5\u05e4,\u05dc\u05d5\u05d9,\",\"\u05ea\u05e0\\\",\u05e2\u05e8\u05d1,\u05e6\u05e8\u05e4,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\n\u05e9\u05d7\u05e3,\u05de\u05d6\u05dc,\u05dc\u05e1\u05e7,\u05d8\u05d5\u05e4,\u05dc\u05d5\u05d9,\",\"\u05e2\u05e8\u05d1,\u05e7\u05d5\u05dc,\u05d1\u05d9\u05d5,\u05d8\u05db\\\",\u05e8\u05d5\u05e1,\n\u05dc\u05d5\u05d9,\u05e7\u05de\u05d7,\u05d1\u05e1\u05d5,\u05d5\u05e7\u05e1,\u05e6\u05d5\u05e8,\",\"\u05e2\u05e8\u05d1\u05d9,\u05e7\u05d5\u05dc\u05e0,\u05d1\u05d9\u05d5\u05d8,\u05d8\u05db\\\"\u05dd\n\u05dc\u05d5\u05d9,\u05d1\u05e1\u05d5\u05df,\u05d5\u05e7\u05e1,\u05e6\u05d5\u05e8\",\"\"]}";
        s= s.replaceAll("\n", "\\n");
        JSONObject json = new JSONObject(s); 
    } 
```

工作正常。

编辑：看看你的代码，你很幸运。一些服务有时会在提要的开头添加一个疯狂的字符，看起来这就是这里发生的事情。你只需要从字符串中修剪它。

例子 ：

```
s = s.substring(s.indexOf("{")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T23:01:23.897

```
import org.json.JSONException;
import org.json.JSONObject;

public class JSONTest {

    public static void main(String[] args) throws JSONException {
        String str = "{\"hours\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\"]}";
        JSONObject jsonObject = new JSONObject(str);
        System.out.println(jsonObject);
    }
} 
```

输出是：`{"hours":["1","2","3","4","5","6","7","8","9","10","11"]}`

# c++ - linux下方便socket编程的抽象库

> ID：12309281
> 
> 赞同：0
> 
> 时间：2012-09-06T22:22:16.203
> 
> 标签：c++, linux, sockets

我必须在以下条件下为 2 个应用程序编写服务器客户端逻辑：

*   一个应用程序只发送数据，另一个应用程序只接收这个数据
*   两者都在 C++ 中
*   接收数据的应用程序应该是多平台的，或者至少存在于 Mac、Linux 和 Windows 下
*   我必须只交换数值或一组明确定义的结构，数据包具有致命的简单骨架结构

我希望有一个图书馆可以帮助我保持工作简单。

我想强调一个事实，即我必须只使用`sys/socket.h`与套接字编程相关的标头，而没有其他依赖项。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:46:49.603

首先，Berkeley 套接字接口确实不难使用，尽管按照现代标准它可能有点笨拙。但是，如果您真的想要一些更简单的东西，那么使用类似 的文本 I/O 怎么样`netcat`，完全避免进行套接字级编程并用简单的进程生成和管道替换它？或者让你的“非常简单”的协议成为一个 HTTP 事务，并在客户端上使用一个简单的 CGI 脚本和 curl/wget（或 libcurl）？

有许多简单的方法可以通过网络移动数据，而不涉及繁琐的 C API。选择哪一个取决于你想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:31:47.660

您的要求有点不一致，因为通常库是依赖项。

满足您其他要求的库：Boost.Asio，[http](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html) ://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html和 ACE（自适应通信环境），[http://www.cs。 wustl.edu/~schmidt/ACE.html](http://www.cs.wustl.edu/~schmidt/ACE.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:04:26.087

我个人更喜欢 poco 而不是 boost.asio：[http](http://pocoproject.org/) ://pocoproject.org/但它仍然是依赖关系！

# mysql - MySQL 通过 current_timestamp 选择上个月的数据

> ID：12309289
> 
> 赞同：7
> 
> 时间：2012-09-06T22:22:52.470
> 
> 标签：mysql, timestamp

直到今天，当我使用 MySQL 并需要使用日期/时间执行操作时，我使用的是带有 unix 时间戳的 int 列并且没有问题，但是今天在阅读了一些指南之后，我决定默认使用“current_timestamp”测试时间戳列。

所以我很感兴趣如何按信息为“2012-09-07 00:23:30”格式的列选择上个月的数据？也许有一些棘手的问题会从本月初（不是持续 30 天，而是从 09-01 00:00:00 到今天）给我什么数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T22:35:03.043

这将为您提供最后一个月：

```
WHERE dateColumn BETWEEN SUBDATE(CURDATE(), INTERVAL 1 MONTH) AND NOW(); 
```

从月初开始：

```
WHERE dateColumn BETWEEN STR_TO_DATE('2012-09-01', '%Y-%m-%d') AND NOW(); 
```

BETWEEN 没什么特别的，它只是一个快捷方式

```
dateColumn <= ... AND dateColumn >= .... 
```

嗯，我猜 NOW() 比较实际上并不需要，因为所有记录都在现在之前。

所以就这样做：

```
WHERE dateColumn >= STR_TO_DATE('2012-09-01', '%Y-%m-%d') 
```

当月动态开始：

```
WHERE dateColumn >= CURDATE() - INTERVAL DAY(CURDATE())-1 DAY 
```

所有这一切都是从当前日期中提取月份中的某一天，然后从中减去那么多天。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T23:48:44.170

你应该看看[common_schema](http://code.google.com/p/common-schema/)，它很容易安装并且有很多很棒的工具，包括一个[`start_of_month()`](http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/start_of_month.html)你正在寻找的函数：

```
select * 
from your_table
where your_column >= common_schema.start_of_month(now()) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-04T17:09:43.460

如果你有一个mysql时间戳，`2013-09-29 22:27:10`你可以这样做

```
 select * from table WHERE MONTH(FROM_UNIXTIME(UNIX_TIMESTAMP(time)))=9; 
```

转换为 unix，然后使用 unix 时间函数提取月份，在本例中为 9 表示 9 月。

# javascript - 如果填写了特定值，则从电子表格发送电子邮件数据

> ID：12309297
> 
> 赞同：1
> 
> 时间：2012-09-06T22:23:19.710
> 
> 标签：javascript, google-apps-script

我想在编辑工作表时收到一封电子邮件，但前提是特定列具有特定值。在这种情况下，我想从已编辑的整行中获取数据。

我找到并尝试了这个解决方案，它带有一个触发器，每次编辑工作表时都会向我发送一封电子邮件并且它可以工作：

```
function onEdit2(e){
var ss = SpreadsheetApp.getActiveSheet();  
var editedCell =  ss.getRange(e.range.rowStart, e.range.columnEnd, 1, 1);      
var body = "FYI Cell: " + editedCell.getA1Notation()+ " was changed to: "+ editedCell.getValue(); 
MailApp.sendEmail("exa...@email.com", "Edit report", body); 
} 
```

但我不知道如何设置它以适应我的条件。我想是这样的：

`if( e.range.columnStart == 7 && e.value == 'OK' )`....但比什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:46:53.867

看来您有自己的答案... ;-)

```
if( e.range.columnStart == 7 && e.value == 'OK' ){MailApp.sendEmail("exa...@email.com", "Edit report", body)}; 
```

使用条件执行“邮件”部分...

我最终会添加一列来显示已发送邮件以避免重复，类似于[本教程](https://developers.google.com/apps-script/articles/sending_emails#section2)中的内容，或者更改已发送邮件的单元格的背景颜色......您的选择。

# java - 类型不能从类型 View 对非静态方法 setVisibility(int) 进行静态引用

> ID：12309301
> 
> 赞同：2
> 
> 时间：2012-09-06T22:23:34.980
> 
> 标签：java, android

我在 Eclipse 中不断收到以下错误：

> 类型不能从类型 View 对非静态方法 setVisibility(int) 进行静态引用

我的代码是：

```
package com.example.testing;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onLoveButtonClicked(View view) {
    TextView haikuTextView = (TextView) findViewById(R.id.haikuTextView);
    TextView.setVisibility(View.VISIBLE); //error here
}
 } 
```

我只是java的初学者，所以我不知道是什么导致了这个问题。我已经用谷歌搜索了这个错误，但我没有得到任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:24:20.327

你需要使用：

```
haikuTextView.setVisibility(View.VISIBLE); 
```

`TextView`是类，`haikuTextView`是你的变量。您无法更改整个班级的可见性。但是您可以更改变量的可见性。

* * *

当你写道：

```
<TextView
    android:id="@+id/haikuTextView"
    ... /> 
```

您创建了该类的一个*实例。*`TextView`您可以创建`TextView`该类的许多实例，但是当您想在一个实例中更改某个特定的某些功能时，您必须指定`TextView`要更改的内容。

当您写信时，`TextView.setVisibility()`您尝试更改*每个* `TextView`. 现在`TextView`该类没有`setVisibility()`更改 every的方法`TextView`，但它确实必须`setVisibilty()`更改*一个*实例。

**因此，**
当您尝试使用 this 访问 every`TextView`时，`TextView.setVisibility()`这是一个“静态引用”，但是，就像我说的那样，没有方法可以调用`setVisibility()` *every* `TextView`。

如果您使用`haikuTextView.setVisibilty()`更改一个实例的可见性，这将起作用，因为这是“非静态方法”存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:36:09.963

扩展山姆的答案：

TextView 是一个类；它也是 View 类的子类。当你引用一个类的静态成员时，你执行“classname.method(...)”或“classname.field”；当您说“TextView.setVisibility”时，您正在对“View”类中的方法“setVisibility”进行“静态引用”，该方法由 TextView 类继承。因此，错误消息：无法从类型 View 对非静态方法 setVisibility(int) 进行静态引用。因为 setVisibility 方法不是静态方法；这是一种普通的方法。

必须相对于类的特定*实例*引用普通方法。由于 haikuTextView 是 TextView 的一个实例；你可以说：

```
haikuTextView.setVisibility(View.VISIBLE); 
```

明白了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T12:05:41.570

它应该是：

```
textView.setVisibility(View.VISIBLE);//A small t instead of a capital T. 
```

祝你好运

# javascript - 使用 KineticJS 变换（移动/缩放/旋转）形状

> ID：12309306
> 
> 赞同：6
> 
> 时间：2012-09-06T22:24:01.200
> 
> 标签：javascript, transform, kineticjs

我正在尝试为 KineticJS 构建一个转换管理器，它将构建一个边界框并允许用户在其画布上缩放、移动和旋转图像。我被锚点的逻辑绊倒了。

[http://jsfiddle.net/mharrisn/whK2M/](http://jsfiddle.net/mharrisn/whK2M/)

我只想让用户从任何角落按比例缩放他们的图像，并在按住拖动锚点时旋转。

谁能帮我指出正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T22:59:15.143

这是我所做的旋转控制的概念证明：http: [//codepen.io/ArtemGr/pen/ociAD](http://codepen.io/ArtemGr/pen/ociAD)

当控件被拖动时，dragBoundFunc 用于旋转它旁边的内容：

```
controlGroup.setDragBoundFunc (function (pos) {
  var groupPos = group.getPosition()
  var rotation = degrees (angle (groupPos.x, groupPos.y, pos.x, pos.y))
  status.setText ('x: ' + pos.x + '; y: ' + pos.y + '; rotation: ' + rotation); layer.draw()
  group.setRotationDeg (rotation); layer.draw()
  return pos
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T10:12:43.790

我正在做同样的事情，并且我发布了一个完全一样的问题，但我找到了一个链接，您可以在其中开发调整大小和移动工具。所以我也用过。但是它不包含旋转工具，但这对您来说也是一个好的开始，它非常简单且合乎逻辑。这是链接：[http ://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

如果我设法让它完美地工作，我也会带着旋转工具回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T08:15:03.110

我希望我还没有迟到发布我制作的这个代码片段。我在处理这类任务时遇到了同样的问题。自从我在处理图像和对象时尝试了这么多变通方法来模仿fabricjs 框架功能以来，已经过去了3 天。我可以使用 Fabricjs，但似乎 Kineticjs 更快/更一致地处理 html5。

幸运的是，我们已经有现有的插件/工具，我们可以轻松地与 kineticjs 一起实现，这就是 jQuery Transform 工具。非常感谢本文的作者！只需在谷歌上搜索并下载它。

我希望我创建的下面的代码可以帮助许多正在努力解决此类任务的开发人员。

$（函数（）{

```
 //Declare components STAGE, LAYER and TEXT
    var _stage = null;
    var _layer = null;
    var simpleText = null;
    _stage = new Kinetic.Stage({
        container: 'canvas',
        width: 640,
        height: 480
    });
    _layer = new Kinetic.Layer();

    simpleText = new Kinetic.Text({
            x: 60,
            y: 55,
            text: 'Simple Text',
            fontSize: 30,
            fontFamily: 'Calbiri',
            draggable: false,
            name:'objectInCanvas',
            id:'objectCanvas',
            fill: 'green' 
          });
     //ADD LAYER AND TEXT ON STAGE     
    _layer.add(simpleText);
    _stage.add(_layer);
    _stage.draw();

    //Add onclick event listener to the Stage to remove and add transform tool to the object 
    _stage.on('click', function(evt) {

        //Remove all objects' transform tool inside the stage 
        removeTransformToolSelection(); 

        // get the shape that was clicked on
        ishape = evt.targetNode;

        //Add and show again the transform tool to the selected object and update the stage layer
        $(ishape).transformTool('show');
        ishape.getParent().moveToTop();
        _layer.draw();

    });

    function removeTransformToolSelection(){
        //Search all objects inside the stage or layer who has the name of "objectInCanvas" using jQuery iterator and hide the transform tool. 
        $.each(_stage.find('.objectInCanvas'), function( i, child ) {
                $(child).transformTool('hide');
        });
    }

    //Event listener/Callback when selecting image using file upload element
    function handleFileSelect(evt) {

           //Remove all objects' transform tool inside the stage 
           removeTransformToolSelection(); 

           //Create image object for selected file
           var imageObj = new Image();
           imageObj.onload = function() {
                    var myImage = new Kinetic.Image({
                    x: 0,
                    y: 0,
                    image: imageObj,
                    name:'objectInCanvas',
                    draggable:false,
                    id:'id_'
             });
             //Add to layer and add transform tool
             _layer.add(myImage);
             $(myImage).transformTool();
             _layer.draw();

            }  

          //Adding source to Image object.
          var f = document.getElementById('files').files[0];
          var name = f.name;
          var url = window.URL;
          var src = url.createObjectURL(f);
          imageObj.src = src;
    }
    //Attach event listener to FILE element
    document.getElementById('files').addEventListener('change', handleFileSelect, false);

}); 
```

# .net - 使用 PowerShell 时出现内存泄漏

> ID：12309310
> 
> 赞同：2
> 
> 时间：2012-09-06T22:24:21.670
> 
> 标签：.net, powershell, powershell-2.0, runspace

我正在使用 VB.net 中的 power shell 连接到 Office 365 实例。这工作正常，但运行此服务的服务的内存使用量不断增加。我正在使用以下代码启动和关闭 power shell。似乎就像 close 方法无法正常工作一样。

```
Private Function initRunSpace(ByVal user_name As String, ByVal password_user As String) As String
   Dim StringBuilder As New StringBuilder
   Dim liveIdconnectionUri As String = "https://ps.outlook.com/powershell"
   Dim password As New SecureString()
   Dim str_password As String = password_user
   Dim username As String = user_name
   Dim credential As New PSCredential(username, password)
   Dim iss As InitialSessionState = Nothing
   Dim psSession As New PSCommand()
   Dim setVar As New PSCommand()
   Dim importSession As New PSCommand()

   Try
       For Each x As Char In str_password
           password.AppendChar(x)
       Next

       iss = InitialSessionState.CreateDefault
       iss.ImportPSModule(New String() {"MSOnline"})

       runspace = RunspaceFactory.CreateRunspace(iss)
       runspace.Open()
          powershell = System.Management.Automation.PowerShell.Create()
       powershell.Runspace = runspace
       REM connect to exchange server in the cloud

       psSession.AddCommand("New-PSSession")
       psSession.AddParameter("ConfigurationName", "Microsoft.Exchange")
       psSession.AddParameter("ConnectionUri", New Uri(liveIdconnectionUri))
       psSession.AddParameter("Credential", credential)
       psSession.AddParameter("Authentication", "Basic")
       psSession.AddParameter("AllowRedirection")
       powershell.Commands = psSession
       Dim result = powershell.Invoke()
       Dim errors As Collection(Of ErrorRecord) = Nothing
       errors = powershell.Streams.Error.ReadAll()

       If errors.Count > 0 Then
           REM Save the order or action for later execution
           For Each obj As Object In errors
               If obj IsNot Nothing Then StringBuilder.AppendLine(obj.ToString)
           Next
           powershell.Stop()
           powershell.Dispose()
           runspace.Close()
           runspace.Dispose()

           Return "Import-PSSession:" & StringBuilder.ToString
            End If
           Catch ex As Exception
          Throw ex
          Finally
          StringBuilder = Nothing
          liveIdconnectionUri = Nothing  
          password = Nothing
          str_password = Nothing
          username = Nothing
          credential = Nothing
          iss = Nothing
          psSession = Nothing
          setVar = Nothing
          importSession = Nothing
          End Try
          Return ""
      End Function

   Public Sub CloseRunspace()

   Dim removesession As New PSCommand()
   Try

       If powershell IsNot Nothing Then
           removesession.Commands.AddScript("Remove-PSSession $sa;Remove-Variable $sa;Remove-Module -Name MSOnline;")
           powershell.Commands = removesession
           powershell.Runspace = runspace
           Dim results As Collection(Of PSObject) = powershell.Invoke()

       End If
   Catch ex As Exception
   Finally
       removesession = Nothing
       powershell.Stop()
       powershell.Dispose()

       runspace.Close()
       runspace.Dispose()
       GC.Collect()
       Thread.Sleep(100)
   End Try
  End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:00:22.387

Microsoft 的 import-Pssession 命令存在一个已知问题，尽管尚未发布。它会消耗大量内存，即使在关闭和处置运行空间、powershell 和管道之后也不会释放它。我什至尝试过对 GC.Collect 的显式调用......但没有任何帮助。我在网上的一些地方找到了它的提示。

[http://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/3c143111-eb14-4235-8084-5edec8202f8b](http://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/3c143111-eb14-4235-8084-5edec8202f8b) [http://go4answers.webhost4life.com/Example/re-establish-failed-remote -powershell-80988.aspx](http://go4answers.webhost4life.com/Example/re-establish-failed-remote-powershell-80988.aspx)

最后打电话给MS，他们说如果不需要就不要关机。尽可能长时间地重用相同的运行空间......尽管如果您在程序中动态使用并且它空闲一段时间，powershell会话将超时，例如在生成交换2010 powershell管理命令的Web应用程序中。

如果您找到解决方法，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T06:14:17.627

我建议尽量不要使用“Import-PSSession”。而是使用“Invoke-Command”远程执行 powershell 脚本而不导入它们。

导入是一项昂贵的操作，可以避免。

# javascript - 给第一次尝试 Javascript 的经验丰富的开发人员的建议

> ID：12309312
> 
> 赞同：1
> 
> 时间：2012-09-06T22:24:48.613
> 
> 标签：javascript

我在 C/C++/Objective-C 方面非常有经验，在过去的几天里一直在尝试使用 html/css/JS 并且发现它非常令人沮丧。

由于复制/粘贴等原因，我一次又一次地被抓住，因为我有语法错误或未声明的变量，结果是代码突然停止工作，然后我不得不挠头并找出原因.

最痛苦的事情是求助于在代码中散布警报，以找出失败的原因。我知道有用于记录的新控制台对象，但它似乎不适用于 Komodoedit 或 jsFiddle？这是我一直在使用的。

有没有办法使用这些工具或替代工具，我可以像使用其他语言一样在调试器中逐行遍历代码？或者除了jslint之外还有什么技巧可以在执行代码之前轻松检测代码问题？

[我不想使用任何可能内置支持日志记录等的库，因为我发现它们（以及 JQuery/JQuery 移动版）正在大大减慢 iPhone 上的加载时间，所以我想专注于纯JS。]

[我的目标浏览器只是 iOS，但我大部分时间都在使用 Komodoedit 和 Chrome，每隔几个小时在 iPhone 上尝试一下]

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T22:29:34.783

你需要几个工具。

**首先**，让自己成为一个真正的调试器。我使用 Chrome 内置的那个。Safari 和 Firebug 中内置了一个类似的插件，可作为 Firefox 的插件使用。这将允许您设置断点并单步执行您的代码并查看到底发生了什么。

**其次**，非常习惯于通过[jsLint](http://www.jslint.com/)运行您的代码。这将向您展示许多明显的拼写错误，并鼓励您从一开始就编写健壮的代码。

**三**、开始写[`strict`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode?redirectlocale=en-US&redirectslug=JavaScript/Strict_mode)模式。这将再次防止一些明显的拼写错误，并迫使你养成一些好习惯。

**四**、`console.log()`需要时使用。一旦你有了调试器，它的输出将显示在浏览器中任何页面的调试器的调试控制台中，包括 jsFiddle 页面。您必须在 jsFiddle 的正确框架上调用调试器，然后它才能正常工作。我既使用常规调试器，也`console.log()`一直使用 jsFiddle。在 jsFiddle 和调试器中需要一些计算才能找到您自己的代码设置断点的位置，但是一旦找到它，它就很容易使用。

**第五**，javascript 根本不是 C++。虽然语法看起来很熟悉，但使用匿名函数和闭包以及对象和原型的方式却大不相同。作为一个在学习 javascript 之前使用 C++ 编程很多很多年的人，我非常感谢我现在可以在 javascript 中做的事情，在 C++ 中做的工作要多得多，但是我花了一段时间才让我的大脑进入一种新的思维模式。在 javascript 开发的头几年，我花了太多时间试图模仿 C++ 技术，而不是仅仅学习更好的方法来实现 javascript 中的目标。

**第六**，您将不得不改变编写和测试代码的方式，因为缺少为您发现错误的编译器。我记得在 C++ 时代，当我需要重构某些东西时，我可以进行大量更改，然后让编译器找到我需要修复语法的所有其他地方。你不能用javascript做到这一点。当您进行大量更改时，您可以通过 jsLint 运行以发现一些问题，然后您实际上需要执行每条路径以确保一切正常。这有点痛苦。

**第七**，找到单元测试的策略/工具。一旦一个项目获得了超过几个功能，您将从构建单元测试中受益匪浅，您可以在任何时候进行重大更改时运行这些单元测试。与没有单元测试相比，他们都会在更短的时间内为您找到问题，并且当您看到需要时，他们会给您重构和清理代码的勇气，因为您知道单元测试会告诉您一切是否正确再次工作。这是额外的前期工作，可以在未来多次获得回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:28:18.493

Firefox 有一个名为 FireBug 的附加组件，它对调试 CSS/javascript 非常有帮助，是的，它确实能够单步执行脚本和命令行，您可以在其中尝试各种 javascript 表达式。我很确定 Chrome 也有类似的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:33:41.477

在这篇文章中，您可以获得调试 javascript [Advance-javascript-debugging-techniques的工具列表](http://www.sitepen.com/blog/2008/04/03/advanced-javascript-debugging-techniques/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:45:29.743

由于您使用的是 Chrome，您只需要打开开发者控制台（扳手 -> 工具 -> javascript 控制台，或 Ctrl+Alt+J（猜测））。不要在代码中添加警报，而是使用`console.log`,`console.error`和`console.info`打印到它。所有这些都是可变参数，因此您可以根据需要将尽可能多的信息传递给一个呼叫。

除此之外，您可以使用控制台即时测试和修改部分代码，或者只是尝试一些片段以查看它们是否有效。它是一个功能齐全的 REPL，也适用于当前文档。

在开发人员控制台的**源**选项卡中，您可以设置断点并单步执行代码，分析每个点的状态。此页面详细介绍了它：[http ://chromedevtools.googlecode.com/svn-history/r421/trunk/tutorials/breapoints/index.html](http://chromedevtools.googlecode.com/svn-history/r421/trunk/tutorials/breapoints/index.html)

在**元素**选项卡中，您可以对 DOM 中的元素更改设置断点，包括对属性和子节点的更改。右键单击一个节点并选择所需的选项。这在调试异步代码并与文档一起播放时会派上用场（例如，AJAX 调用插入新内容）。

除此之外，您可以滚动到右侧样式窗格的底部，然后打开**事件侦听**器部分。在这里，您可以检查绑定到所选 DOM 节点的所有事件。

您可以在代码中输入`debugger`（不带分号），此时它将打开源选项卡，以便您进一步检查代码。我认为这可能是特定于 Chrome 的。

最后，像 JSlint 这样的工具将帮助您在编码时发现未声明的变量，以及代码格式产生意外错误的情况，有些甚至可能使用语法高亮来让您注意到未定义的变量。

这也只是表面现象。您的编辑器和 JSlint 可以使您的代码*看起来*正确并无错误地解析，但是浏览器及其控制台是您将花费大部分时间的地方。

# php - 引用名称中包含破折号的对象属性

> ID：12309314
> 
> 赞同：3
> 
> 时间：2012-09-06T22:24:51.750
> 
> 标签：php, syntax, properties, simplexml

我有一个带有两个破折号的标签的 xml 文档，如下所示`<item--1>`：我使用 SimpleXML 来解析这个文档，所以它给了我带有标签名称的对象属性。这显然是一个问题，我猜是因为破折号是变量和属性名称的无效字符。

```
<?php

$xml = "<data><fruits><item>apple</item><item--1>bananna</item--1></fruits></data>";

$xml = simplexml_load_string($xml);

foreach( $xml->children() as $child ) {
  var_dump($child->item);
#  var_dump($child->item--1);
} 
```

当你运行它时，你会得到

```
object(SimpleXMLElement)#5 (1) {
  [0]=>
  string(5) "apple"
} 
```

但是，如果取消注释最后一行，即带有两个破折号的 xml 元素，则会出现错误：

```
PHP Parse error:  syntax error, unexpected T_LNUMBER in test.php on line 17 
```

我尝试使用花括号：

```
var_dump($child->{item--1}); 
```

但这只会给我这个错误：

```
PHP Parse error:  syntax error, unexpected T_DEC 
```

这是减量运算符，或`--`。

如何引用此对象的属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T22:35:43.763

您使用花括号的方法并不太错误，但是您需要在大括号之间添加一个字符串：

```
var_dump($child->{'item--1'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:35:40.810

从[手册的](http://www.php.net/manual/en/class.simplexmlelement.php#106500)对象页面`SimpleXMLElement`：

> 警告任何尝试使用包含连字符的键名解析 XML 的人 ie。）

```
<subscribe>
  <callback-url>example url</callback-url>
</subscribe> 
```

> 为了访问回调 URL，您需要执行以下操作：

```
<?php
  $xml = simplexml_load_string($input);
  $callback = $xml->{"callback-url"};
?> 
```

> 如果您尝试在没有大括号和引号的情况下执行此操作，您会发现返回的是 0 而不是您想要的。

# javascript - 将调色板添加到 ASP.NET 文本框

> ID：12309320
> 
> 赞同：0
> 
> 时间：2012-09-06T22:25:47.740
> 
> 标签：javascript, asp.net, textbox

我需要在我的表单中添加一个调色板，以便用户可以在普通文本框中选择特定文本，然后从调色板中选择一种颜色。

然后，我会在所选文本之前和之后添加一个前缀，如 HTML 标记，因此当文本重新加载到 div 或任何其他 HTML 控件中时，用户可以看到所选颜色的文本。

我希望在不使用 AJAXControlToolkit 的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:36:34.997

如果您不介意使用 jQuery，您可以使用 jQuery 执行此操作：

有一个像这样的常规文本输入元素：

```
<input type="text" maxlength="6" size="6" id="colorpickerField1" value="00ff00"> 
```

您可以创建一个颜色选择器：

```
<script type="text/javascript" src="js/colorpicker.js"></script>

$(document).ready(function(){
   $('#colorpickerField1').ColorPicker({
    onSubmit: function(hsb, hex, rgb, el) {
        $(el).val(hex);
        $(el).ColorPickerHide();
    },
    onBeforeShow: function () {
        $(this).ColorPickerSetColor(this.value);
    }
   })
    .bind('keyup', function(){
        $(this).ColorPickerSetColor(this.value);
      });
}); 
```

colorpicker.js 可以[从这里下载。](http://www.eyecon.ro/colorpicker/)

# mongodb - 更新到 mongodb 2.2.0 后 findAndModify 查询给出了 '$' 位置运算符的错误消息

> ID：12309322
> 
> 赞同：1
> 
> 时间：2012-09-06T22:25:56.380
> 
> 标签：mongodb

相同的查询适用于 mongodb 2.0.6。将其更新到 2.2.0 后会出现错误并且不执行操作。

```
"errmsg" : "exception: can't append to array using string field name [$]" 
```

这发生在以下行：

```
db.findAndModify(query, null, null, false, updateJob, true, false); 
```

查询在哪里：

```
{ "_id" : ObjectID , "job" : { "$elemMatch" : { "jobId" : "1"}}} 
```

并且`updateJob`是：

```
{ "$set" : { "job.**$**.endTime" : { "$date" : "2012-09-05T04:12:44.708Z"}} 
```

** 我的测试集合如下，我想更新我的第一份工作并设置新的结束时间。

```
{
  "_id" : "5f6761d1-589a-4140-9753-5e890ab3ecb9", 

  "name" : "Test",

  "lastJobId" : 2,

  "job" : [{
      "jobId" : "1",

      "jobName" : "test1", 

      "endTime" : ISODate("2012-09-07T17:39:43.032Z"), 

    }, {
      "jobId" : "2",

      "jobName" : "test2", 

      "endTime" : ISODate("2012-09-07T17:39:43.838Z"),      
    }]
} 
```

用于此的查询是：

```
{  findandmodify :  "Test", query : { _id : "5f6761d1-589a-4140-9753-5e890ab3ecb9", job : { $elemMatch : { jobId : "1" } } }, update : {  $set :  { job.$.endTime :  new  Date(1347039583032) } ,  new : true } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:25:24.323

您的查询：

```
{ "_id" : ObjectID , "job" : { "$elemMatch" : { "jobId" : "1"}}} 
```

不需要使用“$elemMatch”。$elemMatch 专门用于您尝试匹配数组元素内的多个字段的情况。

由于您只有一个，因此您可以消除 $elemMatch 并仅使用 {"job.jobId":"1"} 作为查询过滤器以及 "_id" ，然后您的 findAndModify 将正常工作。

[有一个错误会阻止 findAndModify 与 $elemMatch 和位置运算符更新在此处](https://jira.mongodb.org/browse/SERVER-6993)提交的 2.2 中正常工作。

# python - 无法将 BufferedReader 保存到文件

> ID：12309325
> 
> 赞同：0
> 
> 时间：2012-09-06T22:26:40.183
> 
> 标签：python, http

我正在尝试使用[此处](https://github.com/benoitc/http-parser/)`http-parser`的示例并将响应写入文件。这就是我想要做的，我将 GET 请求更改为请求图像，然后尝试将其保存到文件中：

```
open('image.jpg', 'wb').write(p.body_file().read()) 
```

但是该文件的字节数为零。我在这里想念什么？

完整代码：

```
#!/usr/bin/env python
import socket

from http_parser.http import HttpStream
from http_parser.reader import SocketReader

def main():
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try:
        s.connect(('www.linux-mag.com', 80))
        s.send("GET http://www.linux-mag.com/s/i/topics/tux.jpg HTTP/1.1\r\nHost: www.linux-mag.com\r\n\r\n")
        r = SocketReader(s)
        p = HttpStream(r)
        print p.body_file()
        open('image.jpg', 'wb').write(p.body_file().read())
    finally:
        s.close()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:34:17.867

事实证明，我需要`sudo`脚本。我做到`sudo python <script>`了，效果很好。

# oracle - Oracle PL/SQL 和 Shell 脚本：从一种模式到另一种模式

> ID：12309328
> 
> 赞同：1
> 
> 时间：2012-09-06T22:26:55.780
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想每天从一个表中将数据从一个模式加载到另一个模式。

*   表在不同的数据库中，因此出于某些安全目的，创建数据库链接将不是一个选项....
*   大约百万条记录将得到处理....
*   数据库位于不同的服务器上，从数据库“A”我通过组合一个月的 emp 详细信息和 emp 存在表来获取员工存在详细信息，并将此数据加载到数据库“B”的其他表中。需要每天运行此活动。
*   我需要每天在高峰时段运行一项工作，以将表的完整副本复制到其他数据库中......
*   会在 sqlldr 的帮助下导入/导出或加载数据吗？

请让我知道正确的方法..提前谢谢..

我最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:02:44.597

好吧，似乎使用数据库链接最适合您的情况。如果要从数据库中读取表，则应具有读取权限。也许您可以要求 DBA 创建一个仅对特定表具有读取权限的帐户（用户）。然后您可以使用数据库链接与新用户连接。您无法更新或删除表中的数据，因为您连接的用户没有写入权限。这可以解决安全问题。

exp/imp 和 sqlldr 是不同的工具。他们不一起工作。您只能从导出文件中导入数据。您无法使用 sqlldr 加载导出文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T01:18:37.803

如果你想定期运行它，听起来你可能想看看 Oracle Scheduler

概述：[http ://docs.oracle.com/cd/B28359_01/server.111/b28310/schedover001.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28310/schedover001.htm)

要导出数据并将其添加到新数据库中，您可能需要使用 Oracle DataPump，它可以安全地为您执行导出和导入。

数据泵导出：[http ://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm)

所以你的赌注可能是创建一个 shell 脚本，它使用数据泵从 2 号数据库创建导出文件，然后再次使用数据泵将所述文件导入到 1 号数据库。一旦你有了这个脚本，你可以安排它运行在夜间或任何交通流量低的时候。

问候

# c# - DropDownList 总是给我第 0 个元素

> ID：12309333
> 
> 赞同：1
> 
> 时间：2012-09-06T22:27:30.417
> 
> 标签：c#, xaml

我正在为 Web 应用程序编写一个小补充，我正在使用一个 DropDownList ，我需要访问当前选择的元素。我以前做过，在这个项目中我做了很多，但由于某种原因，最后一个 DropDownList 总是返回第 0 个元素。

这是 DDL 的 XAML：

```
<td><asp:DropDownList Width="230" ID="d_serviceList" runat="server" Autopostback = "false"></asp:DropDownList></td> 
```

这是我正在调用的方法：

```
 protected void deleteService_onClick(object sender, EventArgs e)
    {
        ServiceDal.DeleteService(d_serviceList.SelectedItem.Text, d_categoryList.SelectedItem.Text, d_practiceList.SelectedItem.Text);
        required.Checked = false;
        message2.Visible = true;
        message.Visible = false;
    } 
```

其中 ServiceDal.DeleteService(string, string string) 获取字符串并运行后端查询。查询工作正常，但是三个 DDL（d_serviceList）中的第一个每次都返回第 0 个元素，而所有其他的都没有。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:01:18.723

您应该在下拉框中查看选定的索引更改操作，这应该允许您指定第 0 个元素是什么或要保存的元素。

```
Protected void d_serviceList_SelectedIndexChanged(object sender, EventArgs e)
{
    TempString = d_serviceList.SelectedItem.ToSting();
} 
```

除非您手动更改索引，否则无论发生什么情况，都可以让您准确地选择什么。

# xamarin.ios - Monotouch 上的 Techart：文档在哪里？

> ID：12309335
> 
> 赞同：0
> 
> 时间：2012-09-06T22:27:44.333
> 
> 标签：xamarin.ios, teechart

为 Monotouch iOS 下载了 Teechart 的评估。看起来很有前途。除了 windows help chm 之外找不到文档。网络上有可用的文档吗？

同样在 iPad 上运行一个示例发现平移和缩放非常慢，除非设置为自动。

chart3.Chart.Aspect.ZoomScrollStyle = Steema.TeeChart.Drawing.Aspect.ZoomScrollStyles.Auto;

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:25:57.343

> 为 Monotouch iOS 下载了 Teechart 的评估。看起来很有前途。除了 windows help chm 之外找不到文档。网络上有可用的文档吗？

[是的，您可以通过此链接](http://www.steema.com/files/public/teechart/net/TeeChartNET4_CHM_Library_Help.zip)在我们的网站上下载。

> 同样在 iPad 上运行一个示例发现平移和缩放非常慢，除非设置为自动。为什么？

这就是我们引入 ZoomScrollStyles 属性的原因，将其设置为 Auto，图表将使用 iOS 使用的标准缩放和滚动手势（对于大多数常见的 2D 图表样式），同时将其设置为 Manual，图表将使用基于 TeeChart for NET 产品的默认缩放和滚动功能。

# ruby-on-rails - Rails 中的助手 - 构建 html 字符串时最好的方法是什么？

> ID：12309338
> 
> 赞同：12
> 
> 时间：2012-09-06T22:28:00.890
> 
> 标签：ruby-on-rails

我通常这样写助手：

```
 def bloco_vazio (texto = "", btn = "", args={})
      titulo = content_tag :h3, "Vazio!" 
      p = content_tag :p, texto
      content_tag :div, (titulo + tag(:hr) + p + btn ), args
  end 
```

但我经常看到人们使用其他方法，例如：

```
 def flash_notice
    html = ""
    unless flash.empty?
      flash.each do |f|
        html << "<div class='alert alert-#{f[:type].to_s}'>"
        html << "<a class='close' data-dismiss='alert'>×</a>"
        html << f[:text].to_s
        html << "</div>"
      end
    end
    html
 end 
```

或者

```
def a_helper (some_text ="")
  %{ <h3>some title</h3>
      <p>#{some_text}</p>    
  }%
end 
```

我过去使用这两个鞋楦并遇到了一些问题，然后开始使用 content_tag 和标签助手，即使`.html_safe`有时我仍然必须使用该方法。

有没有建立助手的标准方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T23:21:11.650

如果 html 超过 1 行，我通常将 html 放在一个部分中并使用自定义帮助方法调用它

**看法**

```
<= display_my_html(@item, {html_class: "active"}) %> 
```

**帮手**

```
def display_my_html(item, opts={})
  name = item.name.upcase
  html_class = opts.key?(:html_class) ? opts[:html_class] : "normal"

  render "my_html", name: name, html_class: html_class
end 
```

**部分的**

```
<div class="<%= html_class %>">
  <span class="user">
    <%= name %>
  </span>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T21:58:43.927

最好的方法是在 helpers 中编写 ruby​​ 代码，并且仅在 .html.erb 文件上编写 html 代码，即使它们是“字符串”，所以你应该使用 content_tag 作为助手，如果你想要一个块，你可以使用：

```
<%= content_tag :div, :class => "strong" do -%>
 Hello world!
<% end -%> 
```

如果您的 html 很大，请考虑转移到部分内容，希望它能解决您的疑问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T21:29:47.390

如果您想构建更长的“安全”html，推荐的方法是：

```
html = "".html_safe
html.safe_concat "Testing boldfaced char <b>A</b>"
html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T23:13:29.793

实际上，您也可以并且应该在视图助手中使用局部变量。在视图之外使用原始 html 标记是一种代码异味，我会尽量避免。

相关问题：[Rails 在帮助文件中查看帮助程序](https://stackoverflow.com/questions/1380938/rails-view-helpers-in-helper-file)

# php - 为什么这个 mysql 查询在服务器上不起作用

> ID：12309340
> 
> 赞同：1
> 
> 时间：2012-09-06T22:28:08.673
> 
> 标签：php, mysql, encoding, webserver

此代码使用服务器和本地 phpmyadmin 进行了测试

*   在本地主机上，它按预期返回了结果
*   在服务器上它返回了一个很好的结果，但是在传递 dr_name 时它返回空结果这里是代码：

`SELECT * FROM doctor WHERE dr_name LIKE '%غا%' AND specialization=12 AND state=6`

server 和 local 之间的唯一区别是 server mysql 引擎是 localhost 上的 myisam 和 innodb

这是创建表语句：

```
CREATE TABLE IF NOT EXISTS `doctor` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `dr_name` varchar(65) NOT NULL,
  `dr_name_e` varchar(65) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `unique_name` varchar(75) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `pass` char(40) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `nickname` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
  `specialization` int(11) NOT NULL,
  `state` tinyint(4) NOT NULL,
  `scientific_degree` int(11) DEFAULT NULL,
  `university` int(11) DEFAULT NULL,
  `grad_year` smallint(6) DEFAULT NULL,
  `show_degree` tinyint(1) DEFAULT NULL,
  `show_univ` tinyint(1) DEFAULT NULL,
  `show_grad_year` tinyint(1) DEFAULT NULL,
  `appendices` varchar(1000) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
  `picture` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '0',
  `views` bigint(20) DEFAULT '0',
  `search_result` bigint(20) DEFAULT '0',
  `gender_male` tinyint(1) DEFAULT NULL,
  `agent` int(11) DEFAULT NULL,
  `next_step` tinyint(4) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_name` (`unique_name`),
  KEY `university` (`university`),
  KEY `scientific_degree` (`scientific_degree`),
  KEY `specialization` (`specialization`),
  KEY `agent` (`agent`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=31 ; 
```

# c# - C# DateTime.ParseExact for "2012-09-03T06:35:31Z"

> ID：12309350
> 
> 赞同：2
> 
> 时间：2012-09-06T22:29:07.303
> 
> 标签：c#, datetime

在 C# 中，我试图将“2012-09-03T06:35:31Z”转换为日期时间：

```
Date = DateTime.ParseExact( "2012-09-03T06:35:31Z", ???); 
```

我不确定如何解析函数的其余部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:34:36.613

```
//using System.Globalization; should be at top

Date = DateTime.ParseExact("2012-09-03T06:35:31Z", "yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'", CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal) 
```

请参阅[自定义日期和时间格式文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4)。这类似于[sortable format](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Sortable)，但最后有一个 Z 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T23:05:39.463

您没有说格式是否被指定为始终为 UTC 并用`Z`.

如果是这样的话，那么

```
DateTime.ParseExact(
  yourDateString, @"yyyy\-MM\-ddTHH:mm:ss\Z",
  CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal) 
```

会做得很好。

但是，如果您正在使用的标准未指定 UTC，则您必须处理的输入也可能是例如`2012-09-03T06:35:31+05:00`或`2012-09-03T06:35:31+0500`取决于所使用的 ISO 8601 格式 -`Z`在该格式中是`+00:00`. 如果您需要处理这种可能性，那么您首先要创建一个`DateTimeOffset`，然后从中获取等效的 UTC `DateTime`：

```
DateTimeOffset.ParseExact(yourDateString,
  new string[]{@"yyyy\-MM\-ddTHH:mm:sszzz",@"yyyy\-MM\-ddTHH:mm:ss\Z"},
  CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal).UtcDateTime 
```

请注意，我们仍然使用`AssumeUniversal`. 这是因为第二种格式是说“AZ 将出现在这里”，但该方法随后忽略了它，因此我们必须明确地将这种形式解释为 UTC。但是，对于第一种格式，`zzz`将给出时区，因此将`AssumeUniversal`被忽略。（或者换一种说法，除非另有说明，否则它假定通用，并且该格式确实另有说明）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T22:43:51.960

看起来您正在尝试解析 Xml 日期。如果是这种情况，我建议使用 XmlConvert 类...

```
Date = System.Xml.XmlConvert.ToDateTime("2012-09-03T06:35:31Z", XmlDateTimeSerializationMode.Local); 
```

您需要将 XmlDateTimeSerializationMode 更改为适当的值。

# c++ - c++无法编译文件

> ID：12309351
> 
> 赞同：0
> 
> 时间：2012-09-06T22:29:11.007
> 
> 标签：c++

我是 C++ 的初学者，我正在尝试编写一个程序来找到最大的公因数。我主要有：

```
#include <iostream>
#include <cstdlib>
#include "longgcd.cpp"
int main(int argc, char* argv[]){
  long gcd(long m, long n);
  long m,n,g;
  m=atol(argv[1]);
  n=atol(argv[2]);
  g=gcd(m,n);
  std::cout<<"gcd("<<m<<","<<n<<")="<<g<<std::endl;
  return 0;
} 
```

然后我将子函数放入另一个名为 longgcd.cpp 的文件中

```
#include <iostream>
#include <cstdlib>
long gcd( long m, long n){
  long r;
  while(n !=0){
    r=m%n;
    m=n;
    n=r;
  }
  return m;
} 
```

不知何故 longgcd.cpp 无法编译。我收到一个错误：

```
/usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [longgcd] Error 1 
```

不知何故，我很难运行这个程序并使它工作，我看不出它有什么问题。感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:31:00.897

你能显示你用来编译的那行吗？听起来您试图`longgcd.cpp`独立编译为可执行文件，并且由于该文件没有`main`. 链接器正确地抱怨它找不到`main`.

最简单的解决方案是将两个文件一起编译

```
g++ $FLAGS longgcd.cpp main.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:31:39.717

您应该编译包含该`main()`函数的源文件。

请注意，`#include`通常不鼓励使用 cpp。您可以将声明`gcd`放在头文件中，并从包含它的代码的实现 cpp 和调用它的主文件中包含此文件。在这种情况下，您需要将*两个*cpp 文件都指定到编译器命令行，因为它们都是汇编最终程序所必需的。即使有这种复杂性，这种方式也比包含 cpp 要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T22:33:00.760

一个问题是它`main`应该在您的 .cpp 文件中，而不是您的标头中。

另一个是您通常`#include`将标头（.h 或 .hpp）放入 .cpp 文件中，而不是相反。

另外，请阅读一本不错的 C++ 书籍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:31:53.860

不包括`longgcd.cpp`. 你几乎不应该包含一个`.cpp`（除非你真的，真的，知道发生了什么）

您应该将所有`cpp`s 指定给编译器。例如：`g++ main.cpp longgcd.cpp`

还要将这`long gcd(long m, long n);`条线移到您的主要功能上方。

# objective-c - 为什么我不能注释掉这个字符串？

> ID：12309354
> 
> 赞同：10
> 
> 时间：2012-09-06T22:29:43.260
> 
> 标签：objective-c, c, xcode, comments

我无法在 XCode 编辑器中使用 /* */ 注释和编译以下代码行。我从 XPath 查询中使用的更复杂的字符串中提炼出这个示例：

字符串本身似乎很好：

```
NSString* s = @"//*//"; 
```

不会为我编译：

```
/*
NSString* s = @"//*//";
*/ 
```

XCode 4.4。如果有人能确认我没有愚蠢，我会提交雷达。

**编辑**：很高兴看到 SO 语法荧光笔也出现了这个问题......

**编辑**：好的，我向 Apple 提交了错误报告。谢谢。

**编辑**：根据 Rob 在下面的回答，这不是错误 :) 感谢您的解释，Rob；现在完全有道理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T23:01:57.137

这不是编译器错误。双引号字符`"`在注释中没有特殊含义，因此预处理器不会关注它。`*/`预处理器一看到字符就结束注释。

注释掉一段代码的最好方法是放在`//`每一行的开头。`//`注释在下一个换行符处结束。`//`Xcode 有一个菜单命令（快捷方式：⌘<code>/），它可以通过在每行的开头插入或删除来注释或取消注释您选择的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:38:13.620

它在我不知道任何允许嵌套块注释的编辑器中检测并结束注释`@"//*//";`（我知道这不是你在做什么，而是同样的问题）。请注意，即使是 SO 上的语法荧光笔也搞砸了。

# ios - 在弹出框内添加按钮

> ID：12309355
> 
> 赞同：0
> 
> 时间：2012-09-06T22:29:47.440
> 
> 标签：ios, uipopovercontroller, popover

是否可以在 Xcode 中在弹出框内添加一个按钮，将用户带到一个新视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T23:44:33.837

是的。

```
[myPopOver.contentViewController.view addSubview:myButton];
[myButton addTarget:self action:@selector(goToNextView) forControlEvents:UIControlEventTouchUpInside];

- (void)goToNextView
{
 //if you are using xibs use this line
    UIViewController *controller = [[UIViewController alloc] initWithNibName:@"myXib" bundle:[NSBundle mainBundle]];
//if you are using storyboards use this line
    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllersID"];

//to present the controller modally use this
    [self presentViewController:controller animated:YES completion:nil];
//or if you are pushing to this controller using a navigation controller use this
    [self.navigationController pushViewController:controller animated:YES];
} 
```

# android - 无法使用 loopj android-async-http 和授权标头提交带有 Post 的 Content-Type

> ID：12309358
> 
> 赞同：2
> 
> 时间：2012-09-06T22:30:25.553
> 
> 标签：android, jersey, loopj, android-async-http

在与点火项目遇到相同问题后，我正在使用 loopj/android-async-http。

当我提交没有授权标头的 GET 时，一切正常：

```
AsyncHttpClient client = new AsyncHttpClient();
client.get(url, params, responseHandler); 
```

我正在发送到 Jersey 服务器，并且日志过滤器显示了预期的数据：

```
INFO: 1 * Server in-bound request
1 > GET http://mydomain.com/myresource/
1 > host: mydomain.com
1 > accept-encoding: gzip
1 > user-agent: android-async-http/1.4.0 (http://loopj.com/android-async-http)
1 > connection: Keep-Alive 
```

经过身份验证的 GET 也可以工作。

如果我对同一个 URL 的 POST 请求做同样的事情：

```
AsyncHttpClient client = new AsyncHttpClient();
String auth = user + ":" + pass;
client.addHeader("Authorization", "Basic " + Base64.encodeToString(auth.getBytes(), Base64.DEFAULT));
client.post(context, url, entity, "application/json", responseHandler); 
```

服务器没有显示我希望看到的多个信息，我不明白为什么：

```
INFO: 2 * Server in-bound request
2 > POST http://mydomain.com/myresource/
2 > host: mydomain.com
2 > accept-encoding: gzip
2 > authorization: Basic GFzasomethingvalidhereXN0
2 > connection: Keep-Alive 
```

1.  为什么我看不到“Content-Type”标头？这是我遇到的主要问题，因为我的 Jersey 资源被注释为使用 application/json 数据

2.  为什么我看不到“用户代理”标题？

我的泽西资源：

```
@Service
@Path("/myresource/")
public class MyResource {

@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public MyDTO myEndPointMethod(MyDTO myDTO) {
   //something cool here
} 
```

# php - 为什么在 PHP 上传表单字段中指定“允许”文件类型不起作用？

> ID：12309361
> 
> 赞同：1
> 
> 时间：2012-09-06T22:30:33.480
> 
> 标签：php, image, upload

我一直在尝试——从大量的无知中——构建一个 PHP 表单来帮助当地的非营利组织，使人们能够上传项目的照片和描述。我一直在使用的表单，[Dagon Design 的 PHP Mailer](http://www.dagondesign.com/articles/secure-php-form-mailer-script/)表单，声明我可以通过将以下内容添加到脚本的 $form_struct 段来将文件上传功能添加到默认表单：

```
type=file|class=|label=|fieldname=|[req=true]|[allowed=1,2,3] 
```

与进一步的声明

> allowed 字段是可选的，可让您定义允许上传的文件扩展名（逗号分隔）列表。否则，将允许所有文件类型。

我只想要照片，显然允许人们上传任何东西是一个 HEY SCARY 安全漏洞，所以我添加了以下内容（并且不得不搞砸一点，意识到我需要填写所有空白才能激活保存功能在表格上:)

```
type=file|class=fmfile|label=Upload|fieldname=fm_upload|[req=true]|[allowed=png,jpg,jpeg] 
```

表单现在保存上传的文件，但“允许”似乎根本不适用。尽管有 [allowed] 字段，但它允许上传 php、html 等文件。这显然把我吓坏了。

我试图在这里提供足够的信息，而不是对人们进行这种形式的 1100 行代码转储，但我真的不确定问题是否仅在这一行中，或者我是否需要在确保 [允许] 字段功能的整体脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:42:08.950

我没有使用过那个脚本，但看起来你需要做的就是删除方括号，你应该很高兴。

似乎这些在[文档](http://www.dagondesign.com/articles/secure-php-form-mailer-script/)中用于显示什么是可选参数。请注意示例不包括它们。. .

# tcl - 期望脚本，if的两个分支都没有被执行

> ID：12309365
> 
> 赞同：3
> 
> 时间：2012-09-06T22:30:44.853
> 
> 标签：tcl, expect

任何人都可以看看并建议为什么以下代码段不执行 if 语句的两个分支？脚本不会抛出任何错误。它只是到达期望线并等待直到超时。arg1 只是命令行的一个参数。

```
set arg1 [lindex $argv 0]
set strname "teststring"

expect {
       "prompt#" {
                        if { [string compare $arg1  $strname]  != 0 } {
                            send "strings different\r"
                        } else {
                            send "strings same\r"
                        }
                 }

       default          abort
} 
```

提前致谢。

编辑：

编辑以显示正确的结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T01:22:48.937

Expect 是 Tcl 的扩展，Tcl[对空格非常讲究](http://wiki.tcl.tk/981)：

```
...
# need a space between the end of the condition and the beginning of the true block
if { [string compare $arg1  $strname]  != 0 } {
  ...
# the else keyword needs to be on the same line as the closing bracket of the true block
} else {
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:35:59.187

你的完整脚本更像这样吗？：

```
#!/usr/bin/expect -d

set arg1 [lindex $argv 0]
set strname teststring

expect {
       "prompt#"
                        if { [string compare $arg1  $strname]  != 0 }{
                            send "strings different\r";
                        }
                        else{
                            send "strings same\r";
                        }

       default          abort
} 
```

还是您正在以其他方式运行？你**究竟**是如何运行期望的，你的脚本，使用什么参数？

# mysql - 如何在mysql输出中获得重复的结果？

> ID：12309368
> 
> 赞同：0
> 
> 时间：2012-09-06T22:31:07.747
> 
> 标签：mysql

我对sql有一个简单而愚蠢的疑问。我必须写下如下查询。在这里，id 不是唯一的。但是当我执行以下查询时，我会得到唯一值作为输出。我如何获得多个值？

```
select name from students_table where id in (select id from students_id);

Ex : Lets say students_table has name   id
                                 -----  ---
                                 john    1
                                 jack    2

     And students_id table has   id    
                                 ---
                                  1
                                  1
                                  1
                                  2
                                  ...

If i write the query in the above way i get name
                                            ----
                                            john
                                            jack

Instead i want my output as name
                            ----
                            john
                            john
                            john
                            jack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:34:37.540

```
select st.name from students_id si
join students_table st on st.id = si.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:33:07.120

你需要`JOIN`两个表。试试这个，

```
SELECT  a.Name
FROM    student_table a
        INNER JOIN student_ID b
             on a.ID = b.ID 
```

这就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:34:54.233

你想做一个加入：

```
select t1.name from students_table t1 inner join students_id t2 on t1.id = t2.id 
```

# jquery - jquery append() 不写结束标签

> ID：12309372
> 
> 赞同：2
> 
> 时间：2012-09-06T22:31:17.700
> 
> 标签：jquery, append

我在 Google Chrome 中使用 jquery append 方法时遇到了一个奇怪的问题，当元素为空时它不会写入结束标记，但如果元素包含字符则会写入结束标记。

如果我使用此代码：

```
$('#workZone .canvas').each(function(i) {
        $(this).append('<canvas id="test"></canvas>');
    });
} 
```

我在标记中得到了这个：

```
<canvas id="test"> 
```

如果我使用此代码：

```
$('#workZone .canvas').each(function(i) {
        $(this).append('<canvas id="test">i</canvas>');
    });
} 
```

我得到了我期望在标记中得到的东西：

```
<canvas id="test">i</canvas> 
```

显然，我想要结束标签，但不必包含一次性字符。到底是怎么回事？

这是关于 jsfiddle 的测试用例：http: [//jsfiddle.net/YSDnk/](http://jsfiddle.net/YSDnk/)

谢谢！

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:33:52.870

尝试这个：

```
$(this).append('<canvas id="test"><!-- //comment --> </canvas>'); 
```

您应该在空白处放置一个 html 注释。这样结束标签就会显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:21:13.353

这与之前发布的解决方案相同，但标签之间有一个空格，以防评论无法解决。

```
$(this).append('<canvas id="test">&nbsp</canvas>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T22:40:55.397

不确定您是如何验证这一点的，但您会得到一个带有初始代码的完整标签。当我查看 Inspector 时，我看到了您所看到的，但如果在控制台中运行它：

```
console.log($("#workZone .canvas").html()) 
```

在打印输出中，您将看到完整的 HTML 有效且已正确关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:34:16.167

如果你使用：

```
$(this).append('<canvas id="test"/>'); 
```

这应该和你所拥有的一样，所以我不知道它为什么会起作用，我刚刚学会了测试所有的怪癖。

# android - 在android中递归读取json对象？

> ID：12309375
> 
> 赞同：1
> 
> 时间：2012-09-06T22:31:43.533
> 
> 标签：android, json, parsing

我正在尝试解析以下 json (org.simple.json)

```
 {
   "TotalCount":4,
   "Items":[
      {
         "ProductID":879605004504,
         "Product":{
            "Subtitle":"Vibram Fivefingers",
            "ID":879605004504,
            "Attributes":[
               {
                  "Value":"Vibram Fivefingers",
                  "Key":"Brand"
               },
               {
                  "Value":"Brown",
                  "Key":"Color"
               }
            ],
            "Media":{
               "ImageTile":"http:\/\/xxxx\/v5\/products\/879605004504\/images\/tile",

            },
            "Title":"Mens Vibram FiveFingers KSO Trek Shoes",
            "References":[
               {
                  "Name":"travelcountry.com",
                  "Link":"http:\/\/www.travelcountry.com\/shop\/vibram-fivefingers\/kso-trek-mens.html?RefId=29&RefType=Affiliate"
               },
               {
                  "Name":"summithut.com",
                  "Link":"http:\/\/www.summithut.com\/products\/mens-kso-trek\/?rc=googlebase"
               }
            ]
         },
         "ID":4,
         "CreatedAt":1346523371000000
      },
      {
         "ProductID":773040867635,
         "Product":{
            "Subtitle":"Chaco",
            "ID":773040867635,
            "Attributes":[
               {
                  "Value":"Available in Multiple Colors! - CAO1405: Credence Tall Boot by Chaco Features: -Women s Credence Tall Boot in Sienna. -Available in whole and half size. -Available in Medium width only. -The upper is constructed from full grain leather. -Part of the...",
                  "Key":"Description"
               },
               {
                  "Value":"Chaco",
                  "Key":"Manufacturer"
               },
               {
                  "Value":"Adult",
                  "Key":"Age Segment"
               },
               {
                  "Value":"Black",
                  "Key":"Color"
               },
               {
                  "Value":"Boots",
                  "Key":"Footwear Type"
               },
               {
                  "Value":"5",
                  "Key":"Size"
               }
            ],
            "Media":{
               "ImageTile":"http:\/\xxxx\/v5\/products\/773040867635\/images\/tile",

            },
            "Categories":[
               "Hidden > Shoes > Women's > Boots"
            ],
            "Title":"Chaco Credence Tall Boot - Women's"
         },
         "ID":3,
         "CreatedAt":1346523325000000
      }
   ]
} 
```

我不知道如何解析这个 json ？它有项目的总数。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:49:06.123

这应该让你开始，你需要继续你的定义......

```
JSONObject rootObject = new JSONObject(inputString);
int totalCount = rootObject.getInt("TotalCount");
JSONArray items = rootObject.getJSONArray("Items");

JSONObject item = null;
JSONObject itemDetails = null;
int productID = 0;
String subtitle = null;

for(int i = 0; i < items.size(); i++) {
    item = items.getJSONObject(i);
    productId = item.getInt()"ProductId");
    itemDetails = item.getJSONObject("Product");
    subtitle = itemDetails.getString("Subtitle");
} 
```

# c# - 在 ServiceStack 中设置会话超时？

> ID：12309381
> 
> 赞同：2
> 
> 时间：2012-09-06T22:32:29.593
> 
> 标签：c#, session-timeout, servicestack

我正在尝试使用新的 ServiceStack 会话功能。我已经阅读了帮助页面，但我没有看到您配置超时的任何地方（也就是缓存中对象的到期日期）。我希望能够在我的 AppHost 构造函数中创建的 SessionFeature 实例上设置它。它是如何完成的？对于我的应用程序，我需要一个非常短的超时时间：30 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:13:24.177

我想通了。它实际上是基于每个对象的。通过 Add 的重载添加到缓存集合时，您可以设置超时。默认超时是无限的。至少这是我在缓存对象上看到的。我不确定等式的 cookie 部分是如何工作的。

# extjs4 - Extjs 4 / Sencha Architect - 边界布局中的两个相同区域

> ID：12309387
> 
> 赞同：0
> 
> 时间：2012-09-06T22:33:03.173
> 
> 标签：extjs4, sencha-architect, border-layout

我在 Sencha Architect 中使用 Extjs 4。我有 2 个按钮，当我按下第一个按钮时，底部会显示“Panel_1”。我使用父面板上的边框布局和子面板“Panel_1”上的南部区域来制作它。

![边框布局](../Images/7a604e93640ad13bc8a501f4e23edb09.png)

现在我需要做同样的事情并在按下 button_2 时在同一位置显示“Panel_2”。但似乎我无法在边框布局中的同一区域（南部）设置两个面板。

关于如何做到这一点的任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:41:41.663

您需要在南部地区创建一个带有卡片布局的容器。将您的两个面板添加到此容器中，然后`southContainer.setActiveItem(card)`在您按下相关按钮时使用按钮处理程序中的函数来显示正确的面板。

# linux - 保持 X11 应用程序处于活动状态，之后我可以断开连接并重新连接

> ID：12309389
> 
> 赞同：2
> 
> 时间：2012-09-06T22:33:07.807
> 
> 标签：linux, ssh, x11, virtual-machine, x11-forwarding

我目前有一个很小的、无头的（我当然想保持这种状态:)）Linux 虚拟机设置了 Vagrant 和 VirtualBox，为了进行测试，我想运行一个 X11 应用程序（Firefox），它的输出来自 Xming我的真机。所有这一切都很好，工作完美，但我还不开心！

我想要做的是做一些设置，确保一切正常运行，然后断开与服务器的连接，让测试正常运行。但是，如果出现问题，或者我只想检查事物的当前状态（某些测试可能会持续数小时），我想然后跳回服务器并将 X11 输出再次指向我的机器。但是，尽管我在几个小时前还不知道关于 X11 的大量 Google-ing 和学习负载，但我找不到任何关于选择 X11 应用程序的输出去哪里的信息，除了在启动时，即；

```
DISPLAY=:10 firefox & 
```

我读过一些随机的博客文章，说 Xephyr XServer 做到了这一点（充当中间 X11 缓冲区，然后如果你愿意，它会重定向，否则只是输出到 /dev/null），但我找不到任何其他参考对它，或其他任何这样做的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-25T16:11:33.440

有一个名为 Xpra 的程序，它的工作方式有点像“屏幕”，但用于 X 会话。它将从主会话启动一个单独的 X 会话，用于远程访问，但您可以从主机随意连接/断开连接。

[http://www.xpra.org/](http://www.xpra.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:33:07.807

我目前有一种可接受的方法来做到这一点，这将达到我的目的，我运行了一个 vnc4server 来获取 firefox 的输出，然后我可以毫无问题地连接和断开连接，就像普通的 VNC 服务器一样。这使我可以做我想做的事，但不能做我想做的事。我希望能够在完全不需要 VNC 服务器的情况下做到这一点。

# c# - 解析 Json facebook c#

> ID：12309391
> 
> 赞同：1
> 
> 时间：2012-09-06T22:33:20.140
> 
> 标签：c#, .net, facebook, json, parsing

我尝试了很多小时来解析一个 JsonArray，我已经通过 graph.facebook 获得，所以我可以额外的值。我要提取的值是消息和 ID。

获得 JasonArry 没问题，并且工作正常：

```
[
    {
    "code":200,
    "headers":[{"name":"Access-Control-Allow-Origin","value":"*"}],
    "body":"{
        \"id\":\"255572697884115_1\",
        \"from\":{
            \"name\":\"xyzk\",
            \"id\":\"59788447049\"},
        \"message\":\"This is the first message\",
        \"created_time\":\"2011-11-04T21:32:50+0000\"}"},
    {
    "code":200,
    "headers":[{"name":"Access-Control-Allow-Origin","value":"*"}],
    "body":"{
        \"id\":\"255572697884115_2\",
        \"from\":{
             \"name\":\"xyzk\",
             \"id\":\"59788447049\"},
        \"message\":\"This is the second message\",
        \"created_time\":\"2012-01-03T21:05:59+0000\"}"}
] 
```

现在我尝试了几种方法来访问消息，但是每个方法都以 catch... 结尾并引发异常。

例如：

```
var serializer = new JavaScriptSerializer();   
var result = serializer.Deserialize<dynamic>(json);

foreach (var item in result)
{
    Console.WriteLine(item.body.message);
} 
```

引发异常： System.Collections.Generic.Dictionary 不包含正文的定义。尽管如此，您在下面的屏幕截图中看到，该正文包含定义。

因为我不允许发图片你可以在directupload上找到：http: [//s7.directupload.net/images/120907/zh5xyy2k.png](http://s7.directupload.net/images/120907/zh5xyy2k.png)

我没有更多的想法，所以我请你帮助我。我需要这个项目，私人的，而不是商业的。

也许你可以给我一段代码，这样我就可以继续我的开发了。

谢谢你到目前为止

多米尼克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:48:44.097

If you use [Json.Net](http://json.codeplex.com/), All you have to do is

replacing

```
var serializer = new JavaScriptSerializer();
var result = serializer.Deserialize<dynamic>(json); 
```

with

```
dynamic result = JsonConvert.DeserializeObject(json); 
```

that's all.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T22:50:53.983

您没有反序列化为强类型对象，因此应用程序抛出异常是正常的。换句话说，反序列化器不会为您创建 Anynymous 类。

您的字符串实际上被反序列化为 2 个对象，每个对象都包含`Dictionary<string,object>`元素。所以你需要做的是：

```
var serializer = new JavaScriptSerializer();   
var result = serializer.Deserialize<dynamic>(s);

foreach(var item in result)
{
    Console.WriteLine(item["body"]["message"]);
} 
```

这是一个完整的示例代码：

```
void Main()
{
        string json =  @"[
    {
    ""code"":200,
    ""headers"":[{""name"":""Access-Control-Allow-Origin"",""value"":""*""}],
    ""body"":{
        ""id"":""255572697884115_1"",
        ""from"":{
            ""name"":""xyzk"",
            ""id"":""59788447049""},
        ""message"":""This is the first message"",
        ""created_time"":""2011-11-04T21:32:50+0000""}},
    {
    ""code"":200,
    ""headers"":[{""name"":""Access-Control-Allow-Origin"",""value"":""*""}],
    ""body"":{
        ""id"":""255572697884115_2"",
        ""from"":{
             ""name"":""xyzk"",
             ""id"":""59788447049""},
        ""message"":""This is the second message"",
        ""created_time"":""2012-01-03T21:05:59+0000""}}
]";
    var serializer = new JavaScriptSerializer();   
    var result = serializer.Deserialize<dynamic>(json);

    foreach(var item in result)
    {
        Console.WriteLine(item["body"]["message"]);
    }

} 
```

印刷：

```
This is the first message
This is the second message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T08:44:58.000

我正在使用这种简单的技术

```
 var responseTextFacebook = 
 @"{
       "id":"100000891948867",
       "name":"Nishant Sharma",
       "first_name":"Nishant",
       "last_name":"Sharma",
       "link":"https:\/\/www.facebook.com\/profile.php?id=100000891948867",
       "gender":"male",
       "email":"nihantanu2010\u0040gmail.com",
       "timezone":5.5,
       "locale":"en_US",
       "verified":true,
       "updated_time":"2013-06-10T07:56:39+0000"
    }" 
```

我已经宣布了一个班级

```
 public class RootObject
    {
        public string id { get; set; }
        public string name { get; set; }
        public string first_name { get; set; }
        public string last_name { get; set; }
        public string link { get; set; }
        public string gender { get; set; }
        public string email { get; set; }
        public double timezone { get; set; }
        public string locale { get; set; }
        public bool verified { get; set; }
        public string updated_time { get; set; }
    } 
```

现在我正在反序列化

```
JavaScriptSerializer objJavaScriptSerializer = new JavaScriptSerializer();
RootObject parsedData = objJavaScriptSerializer.Deserialize<RootObject>(responseTextFacebook ); 
```

# sql - 如何计算 SQL 行数

> ID：12309392
> 
> 赞同：2
> 
> 时间：2012-09-06T22:33:20.527
> 
> 标签：sql

```
SELECT count(*) FROM Stack WHERE Id = 33478 GROUP BY SID

Output:

(No column name)
1
4 
```

对于结果；有两排。怎么退货 2 （行数）

有没有像下面这样的方法：

```
Select COUNT(SELECT count(*) FROM Stack WHERE ContentId = 33478 GROUP BY SID) .... 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:35:30.800

你应该看看`DISTINCT`关键字：

```
SELECT COUNT(DISTINCT SID) FROM Stack WHERE Id = 33478 
```

# c# - 这会在程序关闭后损害系统性能吗？

> ID：12309404
> 
> 赞同：-5
> 
> 时间：2012-09-06T22:34:19.787
> 
> 标签：c#, performance

所以假设一台除了运行这个程序什么都不做的计算机有 500 功率。当它运行它时，它会下降到450。当它关闭程序时，它会回到500吗？代码：

```
bool shouldCheck = true;
    string word = "hndxgfhesufyhsukj";
    string name = "NAME OF PROGRAM HERE";
    bool updates = false;

    private void button1_Click(object sender, EventArgs e)
    {
        if (shouldCheck == true)
        {
            var url = "MYURL";
            var client = new WebClient();
            using (var stream = client.OpenRead(url))
            using (var reader = new StreamReader(stream))
            {
                string downloadedString;
                while ((downloadedString = reader.ReadLine()) != null)
                {
                    if (downloadedString == word)
                    {
                        updates = true;
                        this.Hide();
                        Form1 form2 = new Form1();
                        form2.Show();
                        MessageBox.Show("There's no updates, and the full program has opened! Enjoy!", name, MessageBoxButtons.OK, MessageBoxIcon.Information);
                        client.Dispose();
                    }
                    else
                    {
                        MessageBox.Show("There is an update! Downloading now!", name, MessageBoxButtons.OK, MessageBoxIcon.Information);
                        url = "MYURL";
                        var web = new WebBrowser();
                        web.Navigate(url);
                    }
                }
            }
        }
    } 
```

这运行良好，但在程序关闭后会损害性能吗？通过关闭，我的意思是更新已被检查，新表单打开并使用红色 X 按钮关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:49:21.270

答案是肯定的，它应该恢复全功率。您可以检查任务管理器以确保您的程序已正确关闭。如果它消失了，就很难继续对您的机器产生性能影响。您需要注意的一件事是表单是否已关闭但应用程序仍在后台运行。如果是，它将在任务管理器中列出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T01:13:03.067

如果您创建线程，请务必将它们设置为后台线程。这样，如果您忘记手动关闭它们，当您的程序退出时，它们将终止。否则你的程序将继续运行。

[http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)

您还应该正确（并且很好地）停止您启动的任何线程，以确保正确释放所有资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T00:55:10.710

如果您曾经使用线程，则需要注意一点，您必须在关闭函数或线程本身中添加线程停止以查找关闭和结束本身。不久前我遇到了一个问题，因为我的一个线程没有正确关闭并从计算机中吸取资源，直到它重新启动。

# shopify - Shopify Gem：有没有办法检索商店的行业和体验级别？

> ID：12309406
> 
> 赞同：0
> 
> 时间：2012-09-06T22:34:22.537
> 
> 标签：shopify

当店主在 Shopify 上开设商店时，他们必须输入他们的行业和经验水平。有没有办法使用 ShopifyAPI gem 来检索这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:01:01.713

不，此信息无法通过 API 获得。

# php - 是否有允许逐行调试 PHP 应用程序的工具？就像它是如何在 perl 或 .net 中完成的？

> ID：12309413
> 
> 赞同：4
> 
> 时间：2012-09-06T22:34:57.877
> 
> 标签：php, perl, debugging, xdebug

PHP 是否有等效的“perl -d”？我需要逐步完成一些复杂的单元测试，并且不想安装任何 Firefox 或客户端/服务器扩展。只是寻找我的代码的逐行执行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:25:16.517

我使用[VS.php](http://www.jcxsoftware.com/vs.php)，它是 Microsoft Visual Studio（2003 到 2010）的商业插件。它包括 GDB 和 XDebug 以及一个本地 Apache 服务器。它支持您描述的逐步调试和 VS 集成，包括 Locals、Watch 和 Call Stack 窗口。

我了解 Eclipse（大概也是免费的）以及商业 Komodo IDE 存在类似的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:36:03.130

不幸的是，PHP 没有[内部调试器](http://www.php.net/manual/en/debugger-about.php)

有一个[交互式外壳](http://www.php.net/manual/en/features.commandline.interactive.php)，但不确定这是否对您来说是一个好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:45:47.630

使用**Eclipse**并选择透视图作为 PHP .....您将 APACHE 用于 Web 服务器....因为您必须在 php **EXT 文件夹中的 dll 中添加****XDEBUG并在****php.ini**中进行一些更改，它会起作用与 .NET 调试器相同......一步一步......

# preprocessor - C++ 预编译器有条件地包含代码

> ID：12309415
> 
> 赞同：1
> 
> 时间：2012-09-06T22:35:10.307
> 
> 标签：preprocessor

我有几个项目共享很多公共代码，但有时我需要根据项目不包含公共代码的某些部分。

我尝试创建一个名为 project_names.hh 的单独文件，其中包含以下内容：

```
// list of project names
#define FIRSTPROJECT 0
#define SECONDPROJECT 1

// PROJECT_NAME must be set to one of the above names in the project's main.cc file
#define PROJECT_NAME 
```

然后在一个项目的主要文件中，我这样做：

```
#define PROJECT_NAME FIRSTPROJECT 
```

问题是即使我将 project_names.hh 包含在另一个文件中，我似乎也无法编译此语句：

```
#if PROJECT_NAME == FIRSTPROJECT 
```

我收到此错误：

错误：运算符“==”没有左操作数

有没有人有这样做的好方法？

谢谢！

马龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:40:28.240

那是因为您已将`PROJECT_NAME`行定义为空字符串

```
#define PROJECT_NAME 
```

你想把它改成

```
#define PROJECT_NAME FIRSTPROJECT 
```

这需要在该项目的所有文件#include 的头文件中。

或者，您可以摆脱该项目中的所有文件，`#define PROJECT_NAME`而是
`-DPROJECT_NAME=FIRSTPROJECT`在编译器命令行上使用。请注意，如果在多个项目中使用同一个文件，则需要使用不同的选项多次编译它，并将输出放在不同的位置...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:39:50.993

如果我处于您的情况，我会简单地定义 FIRSTPROJECT 或 SECONDPROJECT 而不是将 PROJECT_NAME 设置为这些值中的任何一个。然后我会用它`#ifdef`来检查是否设置了该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T22:40:15.587

而不是`#define PROJECT_NAME FIRSTPROJECT`,

使用`#define FIRSTPROJECT`，

然后检查它的存在`#ifdef FIRSTPROJECT`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:45:40.587

这很可能是因为未设置 PROJECT_NAME。您应该检查正在编译哪个文件并检查是否在此处设置了#define。

将定义设置为整个构建过程的编译器选项可能会有所帮助。对于我知道的大多数编译器（gcc、MSVC、clang、xlC），编译器选项是

`-DPROJECT_NAME=FIRSTPROJECT`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T22:43:33.680

您应该在运行`#if PROJECT_NAME == FIRSTPROJECT`. 预处理器可能一开始就没有加载和执行语句设置`PROJCET_NAME`。

# asp.net-mvc - 无论如何要让动作链接在下拉列表中工作

> ID：12309422
> 
> 赞同：0
> 
> 时间：2012-09-06T22:35:52.047
> 
> 标签：asp.net-mvc, razor

反正有没有使这项工作：

```
<select>
        <option>@Html.ActionLink("View", "View", "Person")</option>
        <option>@Html.ActionLink("Edit", "Edit", "Person")</option>
    </select> 
```

所以它基本上是一个充满链接的下拉菜单。当您单击链接时，它应该像普通的 ActionLink 帮助程序一样指向操作方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:46:14.723

您可以处理 select 的 change 事件以打开链接，如下所示：

html:

```
<select>
    <option>@Url.Action("View", "View", "Person")</option>
    <option>@Url.Action("Edit", "Edit", "Edit")</option>
</select> 
```

javascript:

```
$('select').change(function(){ window.href = $(this).find(':selected').text();}); 
```

# xna - Xbox 的 Microsoft msdn 链接不再有效

> ID：12309427
> 
> 赞同：1
> 
> 时间：2012-09-06T22:36:14.877
> 
> 标签：xna, msdn, xbox

我目前正在使用 XNA 为 Xbox 进行开发，但是当我点击几个指向微软官方网站的链接时，例如教程和文件，然后我被重定向到这个页面： [http ://forums.create.msdn.com/forums /t/19992.aspx](http://forums.create.msdn.com/forums/t/19992.aspx)

例如，通过单击此链接：

[http://create.msdn.com/en-US/education/catalog/sample/skinned_model](http://create.msdn.com/en-US/education/catalog/sample/skinned_model)

目前有人对微软官方网站有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:14:23.403

是的。微软意识到了这个问题——尽管我不知道他们何时/是否会修复它的任何信息。

基本上，作为向 Windows Phone 8 迁移的一部分，他们已经将 Xbox 和 Phone 开发的东西分开了。

如果您遇到这样的旧链接，通常可以通过更改域来手动修复它们，如下所示：

`forums.create.msdn.com`变为`xboxforums.create.msdn.com`（更改子域）

和

`create.msdn.com`变成`xbox.create.msdn.com`（添加子域）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T02:43:32.600

是的。

一个月就这样了。这似乎表明他们正在试图淡化 Windows 8 开发的 XNA，这令人悲哀！如果您从 Google 中找到这些页面，您始终可以使用 Google 的缓存服务来查看它们……但我认为这不适用于下载！

# ffmpeg - 捕获原始视频字节流以进行实时转码

> ID：12309428
> 
> 赞同：0
> 
> 时间：2012-09-06T22:36:31.367
> 
> 标签：ffmpeg, video-streaming, gstreamer, squid

我想实现以下目标：

设置代理服务器来处理来自远程视频服务器（如 YouTube、Vimeo 等）的客户端的视频请求（现在，比如说来自任何 Android 视频客户端的所有视频请求）。我无权访问所请求的视频文件，因此需要代理服务器。我已经解决了鱿鱼。此代理应处理从远程服务器传递的视频信号/流，然后再将其转发回请求客户端。

为了实现上述目标，我要么

# 1\. 需要弄清楚被请求的视频资源的精确位置（URL），快速下载，并在转码继续进行 HTTP 流式传输回客户端之前根据需要对其进行修改（同时，有一些延迟）

# 2\. 访问原始字节流，将其通过管道传输到转码器（我在想 ffmpeg），然后继续流向客户端（也有一些预期的延迟）。

选项 #2 似乎很难做到，但为我想要执行的那种转码提供了更大的灵活性。我必须实际处理原始数据/数据包，但我不知道 ffmpeg 是否接受这样的输入。

简而言之，我正在寻找一种解决方案来实现我无法从代理直接访问的视频的实时转码。关于我可以使用的工具或方法的任何建议？我也读过 Gstreamer（但不知道它是否适用于我的情况）和 MPlayer/MEncoder。

最后，一个相当具体的问题：是否有任何工具可以在给定 YouTube 视频 URL 的情况下下载字节流以进行进一步处理？也就是说，类似于 Chrome YouTube 下载器但可以与服务器端脚本集成的东西？

感谢您的任何指示/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:05:13.537

你应该问单一的编码问题。您问的更像是一般的“如何编写我的应用程序”。不过有几点评论：

*   squid 是一个 http 代理，视频使用通常通过 rtsp 流式传输。
*   是的，有一些工具可以从 youtube url 中获取 rtsp url，但在这样做之前一定要了解视频服务的使用条款。
*   gstreamer 有一个 gst-rtsp-server 模块，其中包含一个 rtsp 服务器，它也可以用作给定 rtsp 流的代理。

# performance - Time complexity for Babylonian Method

> ID：12309432
> 
> 赞同：10
> 
> 时间：2012-09-06T22:36:43.240
> 
> 标签：performance, algorithm, big-o, time-complexity

What would be the time complexity for Babylonian Method? is it log(n) where n is the number we want to find the squared root for? If so, why is this so?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-23T14:27:57.357

Looking at [the wikipedia section for the Babylonian method](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Babylonian_method) we can see that the relative error at step k, e[k], satisfies the equation e[k] < 2^(-f(k)), where f(k) is defined recursively as follows:

f(1) = 2 and f(k+1) = 2 * f(k) + 1 for n > 1

By induction, f(k) = 3 * 2^(k-1) - 1

Let n be the input to our algorithm, which stops when we are sure that the total error is less than a constant m

The error at step k, E[k], satisfies the equation E[k] = e[k] * n

Therefore the algorithm will terminate once e[k] * n < m

This will occur when 2^(f(k)) > n/m which is equivalent to f(k) > log[2](n/m)

That equation is true when 2^(k-1) > (log[2](n/m) - 1)/3 which is true when k > log[2]((log[2](n/m) - 1)/3)+ 1

Therefore the algorithm will terminate in O(log(log(n/m)+1)) steps.

Using [this logarithmic summation formula](http://en.wikipedia.org/wiki/List_of_logarithmic_identities#Summation.2Fsubtraction) you can show that log(log(x)+c)) = O(log(log(x)).

Therefore the Babylonian method takes O(log(log(n/m)) steps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T13:26:57.810

I guess steps would be O(log2(log to the base E0 (m/n)) where E0 is the error at zeroth iteration i.e when we choose seed value m is error allowed in the ans and n is the input to the algorithm. You can refer to this for complete explanation for recursive function of error :[http://www.math.harvard.edu/library/sternberg/slides/lec1.pdf](http://www.math.harvard.edu/library/sternberg/slides/lec1.pdf)

# c# - 我在 Servicestack 会话文档中遗漏了一些东西

> ID：12309438
> 
> 赞同：2
> 
> 时间：2012-09-06T22:36:59.560
> 
> 标签：c#, session, servicestack

在此处的 ServiceStack 会话文档中：

[https://github.com/ServiceStack/ServiceStack/wiki/Sessions](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)

有一些示例代码定义了 UserSession 属性。我希望该属性的设置器会将新创建的数据存储对象添加到缓存中。此示例代码中是否缺少该内容？或者是否有其他地方将会话数据添加到缓存中？

另外，为什么我们同时拥有 sessionId 和 sessionKey？后者还不够吗？我们创建了多个 Id (CreateSessionIds) 但只使用一个 (GetSessionId)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:01:56.923

SessionId 只是散列的 Guid，SessionKey 是在数据存储（例如 Redis）中引用会话时使用的[唯一完全限定键。](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/SessionFeature.cs#L64)

存在定义的临时和永久会话密钥，使用的密钥由`ss-opt`cookie 指定，并且可以由客户端随时更改。

# objective-c - 在 UITableViewCell 的单元格中添加多个图标

> ID：12309439
> 
> 赞同：1
> 
> 时间：2012-09-06T22:37:00.183
> 
> 标签：objective-c, ios, xcode

我有一个带有单元格的 UITableView，并且表格视图右侧有按钮，因此当我单击其中一个按钮时，它会获取所选 TableViewCell 的标签文本，并将其保存到特定于该按钮的数组中点击。这些按钮有不同颜色的文本，“绿色、蓝色、红色、紫色和橙色”。我想要发生的是，当我单击其中一个按钮时，它会在单元格中的文本右侧放置一个彩色圆圈。圆圈的颜色将取决于按下的按钮。我觉得你可以对单元格的附件视图做一些事情，但棘手的是，当你点击同一个单元格的另一个按钮时，它会放入另一个彩色圆圈。如果需要，我希望能够显示 5 个圆圈并且如果您再次单击相同的按钮，它将带走您之前添加的圆圈。

![在此处输入图像描述](../Images/f4b2cecd026e7e86915d504e62336fdc.png)

有没有人对这个问题有任何想法或方法。我似乎无法弄清楚您将如何在附件视图中设置多个圆圈，以及它将如何影响文本。它会移动文本吗？

帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:50:32.913

你试试这个代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
```

// 在您的情况下，它必须是此处的自定义单元格对象。

```
MyCustomCell *cell = (MyCustomCell*)[tableView dequeueReusableCellWithIdentifier:@"AnIdentifierString"];

    if (cell == nil) {
    cell = [[[MyCustomCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"AnIdentifierString"] autorelease];
}

//use your cell here----------

//  cell.textLabel.text = @"This text will appear in the cell";

    return cell;
} 
```

对于多个图像，您可以使用 MyCustomCell 样式覆盖 init，如下所示

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {

self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {

//change frame sizes to palce the image in the cell
    UIImageView * thumbnail1 = [[UIImageView alloc] initWithFrame:CGRectMake(17, 12, 62, 62)];
    thumbnail1.image = [UIImage imageNamed:@"Icon.png"];
    [self addSubview:thumbnail1];

    UIImageView * thumbnail2 = [[UIImageView alloc] initWithFrame:CGRectMake(17, 12, 62, 62)];
    thumbnail1.image = [UIImage imageNamed:@"Icon.png"];
    [self addSubview:thumbnail2];

    UIImageView * thumbnail3 = [[UIImageView alloc] initWithFrame:CGRectMake(17, 12, 62, 62)];
    thumbnail3.image = [UIImage imageNamed:@"Icon.png"];
    [self addSubview:thumbnail3];

}
return self; 
```

}

# ios - iOS - 将 UISearchDisplayController 与 UISearchBar 一起使用，即 UIToolbar 中的 UIBarButtonItem

> ID：12309441
> 
> 赞同：6
> 
> 时间：2012-09-06T22:37:11.593
> 
> 标签：ios, uisearchbar, uitoolbar, uisearchdisplaycontroller

有没有人尝试过使用 UISearchDisplayController 和 UISearchBar，它是 UIToolbar 中的 UIBarButtonItem？

我将不胜感激有关如何成功执行此操作的提示。

目前，每当搜索控制器弹出时，它都会重绘 UISearchBar，我正在努力保持与 UIToolbar 相似的外观

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T19:08:11.743

通常您不想将搜索栏放在工具栏内，但是，您似乎想做一些类似于我所做的事情。

所以这就是我的做法，它可能被称为 hack，但它就像一个魅力:)

首先，您必须像这样在界面生成器中进行设置：

![在此处输入图像描述](../Images/978431f802351e6134f396876a8760a0.png)

请注意，搜索不是工具栏的子项，而是在上面。

搜索栏应该有“清晰的颜色”背景和灵活的左、右和宽度自动调整蒙版。

您在工具栏下方放置了一个黑色背景的 1 像素标签，即。[x=0, y=44, width=320 or frame width, height=1]，还有灵活的左右和宽度自动调整大小的蒙版。这是在搜索显示控制器显示表格后隐藏你得到的一个可见像素看法。在没有它的情况下尝试它以理解我的意思。

您设置任何工具栏项目并确保为它们提供出口，因为您将需要这些。

现在是代码...

当您开始搜索时：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    // animate the search bar to the left ie. x=0
    [UIView animateWithDuration:0.25f animations:^{
        CGRect frame = controller.searchBar.frame;
        frame.origin.x = 0;
        controller.searchBar.frame = frame;
    }];
    // remove all toolbar items
    [self.toolbar setItems:nil animated:YES];
} 
```

当你结束搜索

```
- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    // animate search bar back to its previous position and size
    // in my case it was x=55, y=1
    // and reduce its width by the amount moved, again 55px
    [UIView animateWithDuration:0.25f 
                          delay:0.0f
                        // the UIViewAnimationOptionLayoutSubviews is IMPORTANT,
                        // otherwise you get no animation
                        // but some kind of snap-back movement 
                        options:UIViewAnimationOptionLayoutSubviews 
                     animations:^{
                         CGRect frame = self.toolbar.frame;
                         frame.origin.y = 1;
                         frame.origin.x = 55;
                         frame.size.width -= 55;
                         controller.searchBar.frame = frame;
                     } 
                     completion:^(BOOL finished){
                         // when finished, insert any tool bar items you had
                         [self.toolbar setItems:[NSArray arrayWithObject:self.currentLocationButton] animated:YES];
                     }];
} 
```

有了这个，我得到了一个漂亮的动画：)

![在此处输入图像描述](../Images/d16c0dd7f28fab85381491ee655fc309.png)

![在此处输入图像描述](../Images/a730c82f3fd8e46c80c9deaee435d724.png)

# sql-server - 对 nvarchar 限制感到困惑

> ID：12309449
> 
> 赞同：7
> 
> 时间：2012-09-06T22:38:29.147
> 
> 标签：sql-server

我有一个快速的问题，我无法在任何地方找到答案。我经常需要将一种类型的数据库转换为另一种类型，因此我正在编写一个程序来来回转换 MS SQL Server 数据库。我遇到的问题是我无法声明最大长度超过 4000 的 nvarchar 变量。我明白了，

“赋予参数‘描述’的大小 (6000) 超过了允许的最大值 (4000)。”

然而，这在原始数据库中被明确定义为 nvarchar(6000)，至少我认为是这样，因为 max_length 是 6000，如果你使用 max max_length 是 -1，对吧？我知道我可以只使用 nvarchar(max) 但如果我正在编写转换数据库的软件，我希望尽可能地保持原始状态。

最近是否更改了 nvarchar 最大限制，还是我错过了一些设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:46:53.287

给定的大小（6000）以字节为单位，而当您给出长度时，它以 unicode 的字符数为单位。限制 4000 是因为 nvarchar(xxxx) 和 nvarchar(max) 的内部存储不同。如果您想要超过 4000 个字符的存储空间，请使用 nvarchar(max)。

# c++ - STL 列表和朋友类 - 不要得到想要的结果

> ID：12309451
> 
> 赞同：-1
> 
> 时间：2012-09-06T22:38:38.707
> 
> 标签：c++, list, stl, friend

我的意图是在 A 类中存储 B 对象的列表，但是当我调用 B 构造函数时，我希望在 A 列表中创建一个新元素。

我有这样的代码：

```
class A
{...
    protected:
      std::list<B> Blist;
      std::list<B>::iterator Bit;
 ...
    public:
      Update();
 ...
    friend class B;
}

class B
{...
    protected:
       A* p_A;
 ...
    public:
       B(); //Standard constructor
       B(A* pa); // This is the constructor I normally use
}

B::B(A* pa)
{
    p_A=pa; // p_A Initialization

    p_A->Bit = p_A->Blist.insert(p_A->Blist.end(), *this);
}

A::Update()
{

   for(Bit=Blist.begin(); Bit != Blist.end(); Bit++)
   {
     (*Bit).Draw() //Unrelated code
   }

}

void main() //For the sake of clarity
{

    A* Aclass = new A;
    B* Bclass = new B(A);

    Aclass.Update(); // Here is where something goes wrong; current elements on the list are zeroed and data missed

} 
```

好吧，程序编译没有困难，但是当我运行程序时，我没有得到想要的结果。

对于 BI，有两个构造函数，一个默认将所有内容归零，另一个接受输入以初始化内部变量。

当我使用第二个初始化私有变量时，然后在 A.Update 方法期间，一切都归零，看起来我会使用默认构造函数。

难道我做错了什么？我的方法正确吗？

谢谢！

编辑：为清晰而编辑的程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:49:11.247

您可能想在取消引用之前尝试初始化 p_A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:15:49.890

```
std::list<B> Blist; 
```

这是B 类型`list`的*对象* 。当你 时`insert(iterator,value)`，你给列表一个要复制的值。这会生成一个`B`由列表保存的新对象，该对象由复制构造函数创建。如果`B`的复制 ctor 没有执行您需要的初始化步骤，则该对象将不会处于您期望的状态。

```
std::list<B*> Blist; 
```

保留*指针*列表而不是*对象*将使`A`对象能够访问`B`已创建的项目，而不是创建位于`B`列表中的新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:57:43.320

改变：

```
std::list<B> Blist;
std::list<B>::iterator Bit; 
```

至

```
std::list<B*> Blist;
std::list<B*>::iterator Bit; 
```

和

```
p_A->Bit = p_A->Blist.insert(p_A->Blist.end(), *this); 
```

至

```
p_A->Bit = p_A->Blist.insert(p_A->Blist.end(), this); 
```

应该能解决你的问题。

# html - 将两个不同宽度的导航栏与margin auto对齐？CSS/HTML

> ID：12309456
> 
> 赞同：0
> 
> 时间：2012-09-06T22:39:12.933
> 
> 标签：html, css, navigationbar

我正在尝试对齐比原始导航栏短的第二个导航栏，以满足原始导航栏的右侧。可能没有多大意义，所以这里有一张图片可以提供帮助：http: [//i49.tinypic.com/nohno7.jpg](http://i49.tinypic.com/nohno7.jpg)

顶部导航栏的 CSS 是：

```
#nav { width:940px; height:40px; margin:0 auto; padding:0; font-size:105%; background:url(../images/bg-nav.png) 0 0 repeat-x; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; box-shadow:0 0 3px #ccc; } 
```

第二个导航栏的 CSS 是：

```
#nav2 { width:547px; height:40px; margin:1px auto; padding:0; font-size:105%; background:url(../images/bg-nav.png) 0 0 repeat-x; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; box-shadow:0 0 3px #ccc; } 
```

如果有人可以帮助我指出正确的方向，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:41:29.813

`float:right`可以解决您对第二个导航栏的问题吗？

编辑：我想我知道你的页面是什么样子的：你的导航栏就在`body`标签内。所以让我们做一些小改动：

1.  添加一个包含两个导航栏的 div。让我们称之为`nav-bar`。
    `<div id="nav-bar"><!--1st nav--><!--2nd nav--></div>`

2.  添加一些CSS：
    `#nav-bar {width:940px;height:80px; margin:0 auto; padding:0;}`
    `#nav2 {float:right;}`

并完成 nav2 的其余 css 希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:07:47.073

```
.nav-container2 { width:940px; margin:auto; height:30px;}
#nav2 { width:547px; height:40px; float:right; margin:1px 0 0 0; font-size:105%; background:url(../images/bg-nav.png) 0 0 repeat-x; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; box-shadow:0 0 3px #ccc; } 
```

# session - PHP更新/会话表为空后的Drupal 7“访问被拒绝”

> ID：12309458
> 
> 赞同：2
> 
> 时间：2012-09-06T22:39:49.417
> 
> 标签：session, drupal-7, administrator

尝试 php 5.4 更新后，我无法登录 Drupal。

我有两个用户，安装的默认管理员和权限有限的用户级帐户。在 mysite.com/user/login 登录后，我被重定向到 mysite.com/user/1，并显示以下消息“您无权访问此页面”。当我尝试 mysite.com/admin 时，我得到了同样的结果

我已经注释掉了 settings.php 中的 $base_url 和 $cookies_domain 条目，但没有运气。

如果我尝试使用错误凭据登录，我的登录将被拒绝。所以凭据验证正在工作。

另外，我清除了数据库中的 SESSIONS 表。我在 SESSIONS 清除后尝试登录多次，但该表中没有创建新行。

不知何故，我通过了凭据验证阶段，但是会话无法保存到数据库中……因此我的“未授权”消息。

我对 Drupal 核心中发生的事情一点也不熟悉。通常我的 Drupal 安装正常工作。

您认为这是 Drupal 问题还是 PHP 问题？我是否错过了 php.ini 中的一些愚蠢设置？

ps - 我实际上有两个 apache 虚拟主机，一个安装了 Drupal 6，另一个安装了 Drupal 7……这个登录问题发生在两个安装中。（可能是因为他们共享 PHP ？）

我非常感谢任何想法或建议:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T21:11:38.450

似乎您在那里尝试了几次尝试。无论如何，我会建议您以下内容：

清除缓存并运行 cron： $ drush cc all && $ drush cron 启动：/user/logout # 以停止登录会话并尝试再次登录。

添加到您的 index.php：

```
error_reporting(E_ALL | E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE); 
```

如果您可以在那里识别任何内容，还请检查看门狗表。我在 PHP 5.4.3 上并且没有任何问题。如果您找不到任何解决方法，PHP 5.3.10 是 D8 所需的最低版本，因此降级到它就可以了。

您是否尝试在新的 PHP 版本上重新安装 Drupal？

# java - 单个 TCP Socket 发送请求并等待响应的多线程 FIFO 队列

> ID：12309459
> 
> 赞同：0
> 
> 时间：2012-09-06T22:39:49.880
> 
> 标签：java, multithreading, sockets, tcp, queue

所以继承人我当前的java实现：

1.  使用线程从 UDP 套接字接收 UDP 包，将包放入非阻塞队列。
2.  300 个线程中的一个读取此非阻塞队列并将此数据包作为对连接到 TCP 主机/端口的 Socket 的请求进行处理。
3.  等待响应并将其返回给 UDP 套接字。

这部分一切正常，但是从高负载下 TCP 套接字部分的分析中，我发现在随机情况下，TCP 套接字部分可能需要大约 2-5 秒才能完成。通常这部分需要 2-3 毫秒。我的问题是我只是通过随机线程执行来访问 TCP 套接字，并且我没有线程操作的 FIFO。

有没有办法我可以将“请求”信息加上当前线程引用（我想知道哪个线程来处理“响应”）放入 FIFO 阻塞队列，以确保首先处理最旧的线程以确保 TCP 套接字请求/response 操作需要最少的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:48:59.417

我相信您正在寻找一个[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html) - 这是它的描述，我强调了一些。

> 基于链接节点的无界**线程安全队列。**此队列对元素**进行 FIFO（先进先出）排序**。队列的**头部**是在**队列中时间最长**的元素。队列的**尾部**是在**队列中时间最短**的元素。新元素被插入到队列的尾部，队列检索操作获取队列头部的元素。当**许多线程将共享对公共集合的访问时，ConcurrentLinkedQueue 是一个合适的选择。**此队列**不允许空**元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:43:03.597

> 有没有办法我可以放置“请求”信息加上当前线程参考

我会有一个`AtomicLong`请求计数器，每个请求都会增加。然后，计数器将与请求映射中的 UDP 套接字与任何其他每个请求信息相关联。计数器也将通过 TCP 套接字发送。来自 TCP 套接字的响应将与请求计数器一起返回，读取器线程将通过适当的 UDP 套接字将响应发送回或将其安排在线程池中。

一旦你有了请求计数器，那么 TCP 套接字将是一个请求/响应流，以便在必要时可以乱序发送它们。一个线程将向远程服务器发送请求，另一个线程将读取响应并将响应调度回 UDP 客户端。如有必要，您可以保证 FIFO 顺序，但如果另一个响应已准备好，我不明白为什么它必须等待只是因为它出现故障。

在服务器端，您将有一个类似的读取器和写入器线程都从工作队列中消耗。

# css - 使用 CSS 实现字体模糊时遇到问题

> ID：12309462
> 
> 赞同：0
> 
> 时间：2012-09-06T22:39:54.867
> 
> 标签：css

有人对如何以这种强度水平实现字体模糊有任何见解吗？

[![](../Images/6c045d33ba514c8860c66fd393087bd3.png)](https://i.stack.imgur.com/DA0hJ.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:46:51.913

查看此链接： http: [//motyar.blogspot.com/2010/04/blur-effect-with-css-and-jquery.html](http://motyar.blogspot.com/2010/04/blur-effect-with-css-and-jquery.html)

你基本上是在寻找

```
color: transparent;   
text-shadow: 0px 0px 10px #FF33FF; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:48:07.997

这是一个例子：http: [//jsfiddle.net/vMna4/1/](http://jsfiddle.net/vMna4/1/)

# c# - 这是 Resharper 的错误吗？

> ID：12309463
> 
> 赞同：1
> 
> 时间：2012-09-06T22:40:14.273
> 
> 标签：c#, refactoring, resharper, automated-refactoring

我有这个代码：

```
string[] args = Environment.GetCommandLineArgs();
bool grabNext;
foreach (string arg in args)
{
    if (arg == "-AA")
    {
        grabNext = true;
    }
    if (grabNext)
    {
        incomingPlatypusID = arg;
    }
} 
```

...并且 Resharper 建议在内部范围内声明“bool grabNext”，所以当我允许时，代码变为：

```
string[] args = Environment.GetCommandLineArgs();

foreach (string arg in args)
{
    if (arg == "-AA") ;
    bool grabNext;
    {
        grabNext = true;
    }
    if (grabNext)
    {
        incomingPlatypusID = arg;
    }
} 
```

...然后，当然，我得到了一个错误消息，即“空控制语句体”

## 更新

实际上，我认为我需要的是以下内容，因为“-AA”是我获取下一个参数的指示：

```
foreach (string arg in args)
{
    if (arg == "-AA")
    {
        grabNext = true;
        continue;
    } 
    if (grabNext)
    {
        PlatypusID = arg;
        break;
    } 
} 
```

## 更新 2

使用此代码，Resharper 不会抱怨：

```
private void AutoProvMainForm_Load(object sender, EventArgs e)
{
    string[] args = Environment.GetCommandLineArgs();
    bool grabNext = false;

    foreach (string arg in args)
    {
        if (arg == "-AA")
        {
            grabNext = true;
            continue;
        } 
        if (grabNext)
        {
            PlatypusID = arg;
            break;
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:47:20.993

如果在 for each 之外声明了grabNext，您可以拥有grabNext 的前一个arg 值，因为它仅在arg == "-AA" 时被覆盖。

上一次迭代中的 GrabNext 可能是真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:43:52.807

Reshaper 想要的是这样的：

```
foreach (string arg in args)
{
    bool grabNext = (arg == "-AA");
    if (grabNext)
    {
        incomingPlatypusID = arg;
        // probably better break now:
        break;
    }
} 
```

[请注意，代码始终设置`incomingPlatypusID` 为`"-AA"`（如果 args 包含它）。]

增加可读性并放入`grabNext`它所属的范围，因为它只在那里使用。

以下是更多信息：[C# 中的变量范围](https://stackoverflow.com/questions/3979493/scope-of-variables-in-c-sharp)

摘抄：

在 C# 中，最好将它们放在需要它们的范围内。这有一些好处，包括：

*   您可以降低因不恰当地重用变量而出错的风险，尤其是在长期维护期间
*   您将变量限制在该范围内，这简化了重构

* * *

请注意，相同的语句使用 Linq 可能更具可读性：

```
incomingPlatypusID = args.FirstOrDefault(a => a == "-AA"); 
```

* * *

**编辑**：根据您修改后的问题进行更新。`for-loop`如果要使用索引器，请改用 a 。

```
for( int i = 0; i < args.Length; i++ )
{
    if( args[i] == "-AA" && i+1 < args.Length )
    {
         incomingPlatypusID = args[ i+1 ];
         break;
    }
} 
```

# security - 如何防止机器人尝试匹配密码并以 root 身份登录到服务器？

> ID：12309465
> 
> 赞同：1
> 
> 时间：2012-09-06T22:40:18.420
> 
> 标签：security, login, centos, root, brute-force

今天我注意到我的 /var/log/secure 文件越来越大。这很奇怪，当我检查尾巴时，我得到了这样的东西：

```
Sep  6 18:37:58 asdf sshd[17615]: Failed password for root from 200.85.122.11 port 36126 ssh2
Sep  6 18:37:58 asdf sshd[17616]: Received disconnect from 200.85.122.11: 11: Bye Bye
Sep  6 18:38:00 asdf sshd[17618]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=200.85.122.11  user=root

Sep  6 18:38:02 asdf sshd[17618]: Failed password for root from 200.85.122.11 port 36445 ssh2
Sep  6 18:38:02 asdf sshd[17619]: Received disconnect from 200.85.122.11: 11: Bye Bye
Sep  6 18:38:04 asdf sshd[17623]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=200.85.122.11  user=root

Sep  6 18:38:06 asdf sshd[17623]: Failed password for root from 200.85.122.11 port 36776 ssh2
Sep  6 18:38:06 asdf sshd[17624]: Received disconnect from 200.85.122.11: 11: Bye Bye
Sep  6 18:38:08 asdf sshd[17626]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=200.85.122.11  user=root

Sep  6 18:38:10 asdf sshd[17626]: Failed password for root from 200.85.122.11 port 37072 ssh2
Sep  6 18:38:11 asdf sshd[17627]: Received disconnect from 200.85.122.11: 11: Bye Bye
Sep  6 18:38:13 asdf sshd[17689]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=200.85.122.11  user=root

Sep  6 18:38:15 asdf sshd[17689]: Failed password for root from 200.85.122.11 port 37390 ssh2
Sep  6 18:38:15 asdf sshd[17690]: Received disconnect from 200.85.122.11: 11: Bye Bye
Sep  6 18:38:17 asdf sshd[17700]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=200.85.122.11  user=root 
```

这看起来好像有人试图找到我的服务器的密码。

如何在多次尝试登录失败后阻止 IP（例如，如果在过去一小时内 10 次尝试登录失败，但是现在我的 VPS 每分钟至少收到 100 个失败的登录请求）。实际上，密码对于暴力破解来说太长太复杂了，但我不确定这种暴力破解是否会导致服务器负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:52:28.813

您可以使用 iptables 设置速率限制。看看这个链接： http: [//www.debian-administration.org/articles/187](http://www.debian-administration.org/articles/187)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T23:51:54.780

看我的帖子。Fail2Ban 是我的解决方案。[https://unix.stackexchange.com/questions/204383/fail2ban-is-not-blocking-ips-trying-to-access-my-server-via-ssh/204393#204393](https://unix.stackexchange.com/questions/204383/fail2ban-is-not-blocking-ips-trying-to-access-my-server-via-ssh/204393#204393)

正如有人指出的那样，我认为在 sshd_config 中有这个指令 PermitRootLogin no 是一个很好的做法，以防万一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:22:35.143

您可以使用[DenyHosts](http://denyhosts.sourceforge.net/)：效果很好。

# sql - 如何诊断 Java EE 中的 SQL 瓶颈

> ID：12309469
> 
> 赞同：0
> 
> 时间：2012-09-06T22:40:44.887
> 
> 标签：sql, performance, jakarta-ee, java-ee-6

我们遇到了一些 SQL 瓶颈，我想这是由于事务隔离造成的。

我们将尝试逐步调试我们的违规代码并检查数据库分析器以检测在给定时间哪些资源被阻塞。

您将如何诊断 Java EE 上的 SQL 瓶颈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:49:51.980

我会使用一种非常经典的方法：测量每个查询使用的时间，然后在调试文件中写入时间，然后是查询。然后，在正常使用条件下运行应用程序几次，并查看需要更多时间的查询。

关于 Java 中的计时： [如何在 Java 中计时方法的执行？](https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java)

另请注意，由于数据量的原因，某些 SQL 查询确实比其他查询花费更多时间：例如，“SELECT”语句是常见的瓶颈。一个`SELECT * FROM userdata`语句比一个语句花费更多的时间`SELECT name, surname FROM userdata`，尤其是当您有大量存储数据时。

# php - is_file() 是否使用包含路径？

> ID：12309471
> 
> 赞同：2
> 
> 时间：2012-09-06T22:40:58.737
> 
> 标签：php

如果我向 include_path 添加路径，php 函数：is_file() 会使用此路径搜索我传递给它的文件名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:42:28.330

不。它只检查传递的绝对或相对路径，它不尊重包含路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:42:19.797

根据[Docs](http://www.php.net/manual/en/function.is-file.php)，它看起来不像。

看起来如果您不包含路径，它将使用当前目录，否则它将使用您提供的路径。

# jquery - 当没有找到与 Rails 的 JQuery 自动完成匹配时如何显示响应

> ID：12309480
> 
> 赞同：3
> 
> 时间：2012-09-06T22:41:36.860
> 
> 标签：jquery, ruby-on-rails, autocomplete

我正在使用 rails3-jquery-autocomplete gem。一切都很漂亮。

我现在唯一的问题是弄清楚当自动完成文本没有匹配项时如何显示“不匹配”消息。

我是新手——我看过这些类似的回复（[这里](https://stackoverflow.com/questions/4742110/jquery-ui-autocomplete-return-nothing-found-when-no-search-matches-occur)和[这里](https://stackoverflow.com/questions/8863628/no-matches-message-for-jquery-ui-autocomplete)，但似乎仍然无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:56:22.367

我做了这样的事情：

```
 jQuery(".auto_search_complete").live("click", function() {
var $this = jQuery(this);
     $this.autocomplete({
        minLength: 3,

        source: function (request, response) {
        jQuery.ajax({
            url: "/autocomplete.json",
            data: {
            term: request.term
            },
            success: function (data) {
            if (data.length == 0) {
// You would enter a return for printing "No Response" here.
// I did:
    //  $this.siblings('span.guest_email').show();
          //      $this.siblings('span.delete_button').show();

            }
            response(data);
            }
        });
        },
// ... Rest of your stuff here, like focus, select... this above bit is your answer.... 

```

我使用`jQuery`是因为我的 $ 被原型占用了，所以我不得不有所不同。

因此请注意，您必须使用长格式的 ajax 请求，而不是花哨的快速请求，因为您想将成功分解为“如果没有数据子句”

# html - 如何选择用于模型绑定的 HTML 元素

> ID：12309481
> 
> 赞同：0
> 
> 时间：2012-09-06T22:41:39.173
> 
> 标签：html, asp.net-mvc

我的视图有许多由 HTML 助手生成的控件，例如 HTMLEditFor，但我有一个`<select>`是“手动”创建的，而不是由 HTML 助手创建的。

我的视图将其数据发送到我的控制器中的重载操作之一，但我需要用 HTML 元素中的值填充模型实例的一个属性。

我怎样才能做到这一点？

```
<select id="CityID" 
    data-url="@Url.Action("GetCitiesByStateId", "Cities", new { Area = "Panel" })"
    data-bind="options: cities, optionsValue: 'ID', optionsText: 'Name', optionsCaption: 'Selecione uma cidade', value: selectedCity">
</select> 
```

`CityID`是我的模型中的属性名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:26:14.393

我认为您需要在选择列表中添加名称属性以将其发送到控制器

```
<select id="CityID" name="CityID"
    data-url="@Url.Action("GetCitiesByStateId", "Cities", new { Area = "Panel" })"
    data-bind="options: cities, optionsValue: 'ID', optionsText: 'Name', optionsCaption: 'Selecione uma cidade', value: selectedCity">
</select> 
```

# database - 遍历 db，并检查是否存在特定 id

> ID：12309484
> 
> 赞同：1
> 
> 时间：2012-09-06T22:41:46.067
> 
> 标签：database, ruby-on-rails-3

我想创建一个可以找到我和随机“文章”的方法。问题是我不知道如何遍历数据库，并且在找不到的情况下不会出现异常。我认为它是如何工作的（我知道它不是轨道方式，但我没有其他线索）从 Class.first 到 Class.last 检查它是否存在（可能被删除）而不是返回通过随机 id 对象。

像这样的东西：

```
1.9.3p194 :009 > def test
1.9.3p194 :011?>   until Task.exists?(x)
1.9.3p194 :012?>     print "hmmmmmm"
1.9.3p194 :013?>     x = rand(1..10)
1.9.3p194 :014?>     end
1.9.3p194 :015?>   end 
```

（当该方法工作到此为止时，将添加更多指定的标准）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:29:52.937

如果您使用 ActiveRecord，则必须捕获 RecordNotFound 异常并递归调用您的方法。对于其他 ORM 尝试捕获其他异常。

```
def ran_find
  x = rand(1..100)
  Task.find(x)
rescue ActiveRecord::RecordNotFound => e
  puts 'hmmmm'
  ran_find
end 
```

不是最好的实现，因为 x 值可以多次满足。但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:15:04.317

人们喜欢使用 ActiveRecord :offset 选项来获取随机记录，因为它避免了 RecordNotFound 异常：

取自[Toby Hede](https://stackoverflow.com/users/14971/toby-hede)： [ActiveRecord 中的随机记录](https://stackoverflow.com/questions/2752231/random-record-in-activerecord)

> `offset = rand(Model.count)`
> 
> `rand_record = Model.first(:offset => offset)`

# python - 文本中关键字的精确命中集

> ID：12309485
> 
> 赞同：4
> 
> 时间：2012-09-06T22:41:51.500
> 
> 标签：python, algorithm, set

文本中有一些关键字以及它们出现的开始/结束位置。关键字可能部分重叠，例如“something”->“something”/“some”/“thing”：

```
keywords_occurences = {
    "key_1": [(11, 59)],
    "key_2": [(24, 46), (301, 323), (1208, 1230), (1673, 1695)],
    "key_3": [(24, 56), (1208, 1240)],
    ...
} 
```

我需要为每个关键字选择一个位置，这样它们就不会重叠，对于这种情况的解决方案是：

```
key_1: 11-59
key_2: 301-323     (or 1673-1695, it does not matter)
key_3: 1208-1240 
```

如果无法做到这一点，请选择最大数量的唯一非重叠键。

看起来像是一种“精确命中集”问题，但我找不到算法描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:21:30.413

我认为以下代码可以满足您的需求。

```
#!/usr/bin/env python

# keyword occurrences -> [('key_1', (11, 59)), ('key_2', (301, 333)), ('key_3', ())]
kw_all_occ = {"key_1" : [(11, 59)],
"key_2" : [(24, 56), (301, 333), (1208, 1240), (1673, 1705)],
"key_3" : [(24, 46), (1208, 1230)]}

def non_overlapping_occ(occ):
    # dictionary with all keyword occurrences
    all_occ = dict({})
    all_occ.update(occ)

    # list with the first non overlapping occurrences of every keyword -> 
    # [('key_1', (start_1, end_1)),('key_2', (start_2, end_2)),...]
    result = []

    # Sort keywords by length -> [(22, 'key_3'), (32, 'key_2'), (48, 'key_1')]
    kw_lengths = []
    for k, v in all_occ.iteritems():
        kw_lengths.append((v[0][1] - v[0][0], k))
    kw_lengths.sort()

    while len(kw_lengths):
        # Current longest keyword
        longest_keyword = kw_lengths.pop(-1)[1]
        try:
            result.append((longest_keyword, all_occ[longest_keyword][0]))
            # Remove occurrences overlapping any occurrence of the current
            # longest_keyword value
            for item in all_occ[longest_keyword]:
                start = item[0]
                end = item[1]
                for l, k in kw_lengths:
                    v = all_occ[k]
                    all_occ[k] = filter(lambda x: (x[0] > end) | (x[1] < start), v)

        except IndexError:
            result.append((longest_keyword, ()))

    return result

print non_overlapping_occ(kw_all_occ) 
```

它产生以下输出：

```
vicent@deckard:~$ python prova.py 
[('key_1', (11, 59)), ('key_2', (301, 333)), ('key_3', ())] 
```

请注意，我没有在代码中使用集合。您的问题只是表明集合可以帮助解决问题，所以我知道使用集合对您来说不是强制性的。

另请注意，该代码尚未经过深入测试，但似乎运行良好（它还可以正确处理您问题中提供的关键字出现。事实上，这些出现可以通过一些更简单但不太通用的代码来解决）。

# vala - 使用 Vala/Genie 获取 SDL 表面的像素颜色

> ID：12309488
> 
> 赞同：0
> 
> 时间：2012-09-06T22:42:02.997
> 
> 标签：vala, genie

我可以获得第一个像素，但如何获得其他像素？

```
def get_alpha (x:uint8,y:uint8): uchar
        r:uchar
        g:uchar
        b:uchar
        a:uchar
        dire:uint32*
        r=0
        g=0
        b=0
        a=0
        Image.do_lock()
        dire=Image.pixels
        Image.format.get_rgba (*dire, ref r,ref g,ref b,ref a)
        Image.unlock()
        print "En x= %d y=%d ,%d %d %d %d",x,y,r,g,b,a
        return a 
```

这是获取像素的 SDL Wiki 的 c 代码。我只需要（3和4个字节）。我看到我可以做 surface.pixels+y *surface.pitch*surface.format.BytesPerPixel 去这个位置，但我有这个问题。第一个位置很好，但全白表面的最后一个位置给了我其他颜色。我认为我的措施并不好。

```
// Nota, código obtenido del wiki de SDL
// http://www.libsdl.org/cgi/docwiki.cgi/Pixel_20Access
Uint32 getpixel(SDL_Surface *surface, int x, int y)
{
    int bpp = surface->format->BytesPerPixel;
    /* Here p is the address to the pixel we want to retrieve */
    Uint8 *p = (Uint8 *)surface->pixels + y * surface->pitch + x * bpp;

    switch(bpp) {
    case 1:
        return *p;

    case 2:
        return *(Uint16 *)p;

    case 3:
        if(SDL_BYTEORDER == SDL_BIG_ENDIAN)
            return p[0] << 16 | p[1] << 8 | p[2];
        else
            return p[0] | p[1] << 8 | p[2] << 16;

    case 4:
        return *(Uint32 *)p;

    default:
        return 0;       /* shouldn't happen, but avoids warnings */
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:42:07.300

我想我知道答案。我已经学习了一些关于指针的知识，并且没有使用 get_rgba 方法，我尝试直接从内存中获取它们。就我而言，我不会获得 alpha 像素。当变量 BytesPerPixel 给我 1、2 或 3 时，我认为没有可能的 alpha 通道。当 BytesPerPixel 给我 4 时，我将第四个字节用于获取 alpha 通道值。当像素大小为 4 时，结构为 RGBA（红、绿、蓝、阿尔法）。

```
def get_alpha (x:uint8,y:uint8): uchar
    dire:uint8*
    var alpha=0

    Control.Imagen_0.do_lock()
    dire=Control.Imagen_0.pixels // this is the first point of Image 
    dire+= (y*Control.Imagen_0.pitch)+ (x*Control.Imagen_0.format.BytesPerPixel) // this calculates the point x,y in memory

    Control.Imagen_0.unlock()
    case Control.Imagen_0.format.BytesPerPixel
        when 1,2,3
            alpha=255
        when 4
            dire+=+3  // go to alpha channel byte
            alpha=*dire // take from memory point
    return alpha 
```

# android - Android - 有没有办法让两个远程异步调用相互依赖？

> ID：12309491
> 
> 赞同：0
> 
> 时间：2012-09-06T22:42:18.360
> 
> 标签：android, android-asynctask

我有一个屏幕，我在其中进行了 2 次异步调用以获取两条不同的数据。我要做的是根据一组数据来显示或不显示其他数据的一部分。

是否可以这样做，因为我不知道哪个异步任务会先返回，因此在系统尝试确定是否显示第二条数据时不知道第一条数据是否可供系统使用?

有什么合理的解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:05:34.117

好吧，我相信您正在寻找信号量模式。

[http://en.wikipedia.org/wiki/Semaphore_（编程）](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)

这个想法是这样的：

有一个变量来维护异步调用的数量，在您的情况下为 2。然后，当任一调用完成时，递减此计数器并检查该值。如果计数器为 0，则您知道两个调用都已完成。如有必要，请记住将计数器重置为 2。

# python - AppEngine LEPL parser.py 语法错误

> ID：12309493
> 
> 赞同：0
> 
> 时间：2012-09-06T22:42:24.067
> 
> 标签：python, google-app-engine, parsing, deployment, lepl

在开发环境中，它工作得很好。但是在部署到 AppEngine 之后，它就中断了。在项目中包含必要的文件。

正在使用 LEPL 5.1.3。

破损：

```
<type 'exceptions.SyntaxError'>: invalid syntax (parser.py, line 182)
Traceback (most recent call last):
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/controllers/main.py", line 26, in <module>
    from controllers import users as Users
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/controllers/users.py", line 15, in <module>
    from lepl.apps.rfc3696 import Email
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/lepl/__init__.py", line 113, in <module>
    from lepl.contrib.matchers import SmartSeparator2
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/lepl/contrib/matchers.py", line 41, in <module>
    from lepl.matchers.derived import Optional
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/lepl/matchers/derived.py", line 38, in <module>
    from lepl.matchers.combine import And, DepthFirst, BreadthFirst, \
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/lepl/matchers/combine.py", line 45, in <module>
    from lepl.matchers.core import Literal
  File "/base/data/home/apps/s~roo-net/4-0.361574419262849513/lepl/matchers/core.py", line 44, in <module>
    from lepl.core.parser import tagged 
```

对 appengine 给出的这个错误消息感到非常困惑。我查看了 parser.py 中的第 182 行，它看起来不错……甚至很棒。真的很漂亮的东西。

...

```
 else:
                    if m_value: m_value.yield_(value)
                    yield value
                # this allows us to restart with a new evaluation
                # (backtracking) if called again.
                value = main
    except StopIteration as exception: # line 182
        if exception_being_raised:
            raise
        # otherwise, we will propagate this value
        value = exception
        exception_being_raised = True
        if m_value: m_value.exception(value) 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:51:34.210

看起来您可能正在使用 Python > 2.5 进行开发，但正在部署到 Python 2.5。（检查`runtime`你的`app.yaml`）。for的`as`语法`except`是在 Python 2.5 之后出现的。

# javascript - 使用私有成员创建 JavaScript 类

> ID：12309497
> 
> 赞同：6
> 
> 时间：2012-09-06T22:42:38.657
> 
> 标签：javascript, oop

我正在开发一个在 javascript 中创建类的实用程序。它有效，问题是如何定义私有属性。

这是代码

```
var OO = {

    Class:function(){

        var len = arguments.length;
        var data = arguments[len-1];

        var Klass;
        if (data.constructor === Object){
            Klass = function (){};

        } else {
            Klass = data.constructor;
            delete data.constructor;                
        }

        OO.extend(Klass.prototype,data); //Classic Extend Method

        return Klass;

    },
//Simple extend method, just what I need in this case
    extend: function(target, source){
            var prop;
            for (prop in source)
                target[prop] = source [prop];

    }
} 
```

这就是它的工作原理

```
// first create a class
var person = OO.Class ({
constructor: function (name, age) {
this.name = name;
this.age = age;
},

name:'',
age:'',

getName: function () {
return this.name;
},

getAge: function () {
return this.age;
}

}); 
```

这是实例

```
var one = new Person ('josh', 22); 
```

问题是：

```
one.age / / returns 22
one.name / / returns josh 
```

**我需要的是这些属性只能通过getName()和getAge()等方法访问**

**EDIT1**：添加了扩展功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:27:38.897

闭包是由构造函数参数创建的，所以这就是您需要做的所有事情（编辑 AlienWebguy 的代码）：

```
var Person = function(name, age){

    this.getName = function() {
        return name;
    };

    this.getAge = function() {
        return age;
    };

};

var john = new Person('johnathan', 33);

document.writeln(john.name);        // undefined
document.writeln(john.age);         // undefined
document.writeln(john.getName());   // johnathan
document.writeln(john.getAge());    // 33 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:52:38.563

**更新1：**

这是工作原型。它的工作原理除了

1.) 将构造值传递给私有成员。

```
 Dummy values do work however. 
```

测试小提琴：

[http://jsfiddle.net/UWRHP/11/](http://jsfiddle.net/UWRHP/11/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T22:48:17.560

作为对象接口一部分的任何变量（即`this.x`和`this.y`）都将是公共的。您将无法强制通过 getter 访问这些变量的外部访问。

所以，只要你有这样的代码：

```
getAge: function () {
    return this.age;
} 
```

...你不能阻止这一点：

```
var one = new Person ('josh', 22);
console.log(one.age); 
```

查看 Douglas Crockford 的文章[Private Members in JavaScript](http://javascript.crockford.com/private.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T00:22:56.137

如果您不想像@AlienWebguy 建议的那样使事情变得过于复杂（并完全放弃到目前为止所做的事情），那么您甚至不需要该`.io`成员-最终与`.name`and`.age`属性一样暴露：

```
john.io.set('name', 'Johnny'); // still exposed! 
```

归根结底，对象和and属性`.io`一样暴露，所以这是一个复杂的解决方案，在封装和信息隐藏方面没有任何进展。（对不起，@AlienWebguy，这就是我的感觉）`.name``.age`

如果您尝试使用经典的继承范例并完全放弃传统的 JavaScript OOP，那么请放弃传统的函数作为构造函数范例并忘记`this`在构造函数中使用引用：

```
// first create a constructor
var Person = function(arg0, arg1) {

    var that = {};

    // private variables

    var age = arg0;
    var name = arg1;

    // public methods

    that.getName = function() {
        return name;
    };

    that.getAge = function() {
        return age;
    };

    that.setAge = function(a) {
        age = a;
    };

    return that;

};

var john = new Person('johnathan', 33);

console.log(john.name);        // undefined
console.log(john.getName());   // 'johnathan'
console.log(john.age);        // undefined
console.log(john.getAge());   // 33
john.setAge(28);
console.log(john.getAge());   // 28
john.setName("Richard");      // Error - setName is not a function 
```

这是道格拉斯·克罗克福德的[寄生继承](http://www.crockford.com/javascript/inheritance.html)的一个例子……但没有“继承”部分。关键是，实例变量`age`和`name`是私有的，但由于 JavaScript 的函数变量作用域而保留在范围内，因此对象的方法仍然可以操作它们。

您还会注意到该`name`变量没有设置器，因此这种技术合法地允许您控制对`name`变量的访问 - 没有隐藏`this.name`也`this.io`不允许操纵变量；它完全是私人的。

# eclipse - 使用 CounterClockwise 和 Eclipse 在 Clojure REPL 中进行评估

> ID：12309498
> 
> 赞同：4
> 
> 时间：2012-09-06T22:42:39.293
> 
> 标签：eclipse, clojure, ccw

我通常使用 Emacs，但受到启发再次尝试 CCW + Eclipse。我有一个 Clojure 测试项目，其源文件 src/user.clj 包含以下内容：

```
(ns user)

(println "hi") 
```

我有一个 REPL，我从 Window->Show View->Other->Clojure Views->REPL 开始。

当我选择 println 表达式（所有的 '(println "hi")'）并按 Command-enter 时，表达式本身会在 REPL 窗口中回显，但不会出现输出。类似于 '(take 10 (range))' 之类的表达式。

如果我直接在 REPL 中输入表达式，然后按 Enter，我会得到

```
=> (take 10 (range)) 
```

但似乎没有任何额外的评估输出。

感谢您的任何想法。我查看了文档，但没有明显的发现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T00:38:49.413

您需要连接到 REPL 才能获得响应。

有两种选择：

*   连接到现有的 REPL
*   将您的项目作为 Clojure 应用程序运行并自动连接到它的 REPL。

要连接到现有的 REPL，您可以使用 Window -> Connect to REPL。

要运行您的项目，请右键单击您的项目；运行方式 -> Clojure 应用程序。如果这不是一个选项，请右键单击 -> 配置 -> 作为 Clojure 应用程序

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T01:58:55.303

听起来您的 REPL 已断开连接 - 它需要连接到正在运行的 Clojure 进程，以便您与实时环境进行交互。

`Ctrl-Alt-L`我通常只是启动一个 REPL 并通过在代码编辑器窗口中按下同时加载文件。

# eclipse - 未使用 Seam pages.xml 文件

> ID：12309500
> 
> 赞同：0
> 
> 时间：2012-09-06T22:43:00.840
> 
> 标签：eclipse, jakarta-ee, jsf-2, tomcat7, seam2

我正在尝试根据此[示例](http://lists.jboss.org/pipermail/jboss-user/2006-October/016024.html)将面包屑添加到我的网站。

问题是 pages.xml 文件的页面标记中的操作方法永远不会被调用。我不知道是否必须在 web.xml 中配置任何内容。我尝试浏览没有好的结果的解决方案。请帮忙。

我正在使用 JSF 2、Seam 2.2.2、Tomcat 7 和 Eclipse IDE。我所有的网络文件都是 .jsp 扩展名。这是我的 web.xml 文件。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
      <display-name>Max3dsJSF</display-name>
      <filter> 
          <display-name>Ajax4jsf Filter</display-name> 
          <filter-name>ajax4jsf</filter-name> 
          <filter-class>org.ajax4jsf.Filter</filter-class> 
          <init-param> 
           <param-name>forceparser</param-name> 
           <param-value>false</param-value> 
          </init-param> 
        </filter> 
        <filter-mapping> 
          <filter-name>ajax4jsf</filter-name> 
          <servlet-name>Faces Servlet</servlet-name> 
          <dispatcher>REQUEST</dispatcher> 
          <dispatcher>FORWARD</dispatcher> 
          <dispatcher>INCLUDE</dispatcher> 
        </filter-mapping>
        <filter>
        <filter-name>Seam Filter</filter-name>
        <filter-class>org.jboss.seam.web.SeamFilter</filter-class>
        </filter> 
        <filter-mapping> 
          <filter-name>Seam Filter</filter-name>
          <url-pattern>/*</url-pattern>
          </filter-mapping>
        <context-param> 
      <param-name>facelets.BUILD_BEFORE_RESTORE</param-name> 
      <param-value>false</param-value> 
    </context-param> 

      <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
        <welcome-file>/Index.jsp </welcome-file>
  </welcome-file-list>
 <listener>
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class> 
 </listener> 

</web-app> 
```

Faces_config.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"    
version="1.2">   
<application>

<locale-config>
    <default-locale>nl_NL</default-locale>
    </locale-config>
    </application>
Managed beans and navigation rukes......
</faces-config> 
```

提前致谢！

简

# asp.net-mvc-3 - 将 MVC 3 html 助手与 twitter boostrap 集成的最佳方法是什么

> ID：12309503
> 
> 赞同：1
> 
> 时间：2012-09-06T22:43:19.703
> 
> 标签：asp.net-mvc-3, twitter-bootstrap

我试图让我的单选按钮看起来像普通按钮（比如这里的按钮组：http://jasny.github.com/bootstrap/components.html）。问题是如果我使用 razor html helper @Html.RadioButtonFor(... 我不明白如何将该输出与引导程序所需的元素链接起来。将数据放入引导程序的最佳方法是什么在不丢失链接到我的模型的剃刀的情况下进行造型？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:08:15.367

用普通的 Html 语法写出“长手”单选按钮没有任何问题`<Input type="radio">`，特别是如果它是一个单选按钮并且您有自定义的 Html 位来绕过它。HtmlHelpers 只是帮助者。只需确保您填充了，`id="model.value"`以便活页夹拾取该属性。

如果您发现自己重用了这段较长的代码，那么您可以创建一个 HtmlHelper 扩展方法来呈现您想要的 Html。这有点像构建你自己的，并允许你做类似的事情`Html.TwitterRadioButtonFor(....)`。

[在这个](http://mstecharchitect.blogspot.co.uk/2009/08/extending-aspnet-mvc-htmlhelper-class.html)博客上有一个编写 HtmlHelpers 的非常基本的指南。

编辑：如果你只是在寻找风格，那么你总是可以使用

```
new { @class = "myClass" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T00:10:03.673

将 html 助手与 twitter bootstrap 集成的最佳方法是使用[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)

-- Bootstrap 2 免费。

# ruby-on-rails - 将项目上传到 Github，部署和更新它

> ID：12309504
> 
> 赞同：0
> 
> 时间：2012-09-06T22:43:23.003
> 
> 标签：ruby-on-rails, git, deployment, capistrano

我做了我的第一个“大”项目，但我有一些关于将其上传到存储库然后部署它的问题。

我创建了一个 Rails 项目并提交了所有文件（忽略数据库和不感兴趣的东西），包括 production.rb。

production.rb 文件有邮件配置，所以我有一些假配置。

问题是，当我部署时，我修改了 production.rb 文件（以及另外 2-3 个文件），所以我的问题就在这里：

推送更改时如何更新项目？如果我在本地修改的文件上推送更改，“git pull”将不起作用。

我想上传这些文件，因为我希望其他用户能够轻松使用我的应用程序。

capistrano 可以解决这个问题吗？AFAIK capistrano 依赖于 git repo（等等），所以如果我在本地修改文件，capistrano 也会哭。

那么，当您必须提取新的更改并且您在本地修改了一些文件时，你们会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:21:16.433

如果您正在对文件进行更改并且希望其他人使用它们，那么它们可能应该在您的 git 存储库中。如果他们有敏感信息（即密码、用户名），那么他们肯定不应该在你的 git repo 中，你可以使用 capistrano put 命令部署它们。此命令将通过 scp 我认为将文件复制到您的部署服务器。您甚至可以先通过 erb 运行文件，这样您就可以在 capistrano 中设置变量或传入变量，而不必担心 git 存储库中存在敏感信息。[你可以在这里](http://railscasts.com/episodes?utf8=%E2%9C%93&search=capistrano)找到一些关于 capistrano 的好信息。其中一个情节是付费情节，但如果您正在进行任何数量的 Rails 开发，那么它是一个非常好的资源。

# javascript - prettyPhoto 脚本不工作

> ID：12309505
> 
> 赞同：0
> 
> 时间：2012-09-06T22:43:24.493
> 
> 标签：javascript, css, gallery, prettyphoto

我之前有一个关于为这个网站 www.chrissybulakites.com 使用灯箱的问题。现在我可以将照片加载并正确淡入画廊设置，但是当我放置它时我的脚本似乎没有出现网站告诉我的地方。

谁能帮我解决这个问题？谈到这种风格，我是一个初学者，只是一个想帮助朋友的设计师。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:33:08.017

这三个资源在指定的 [相对] 路径中不可用：

```
<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
<script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script> 
```

浏览器将其解释为

```
http://www.chrissybulakites.com/js/jquery.js
http://www.chrissybulakites.com/css/prettyPhoto.css
http://www.chrissybulakites.com/js/jquery.prettyPhoto.js 
```

检查以确保它们确实存在 - js/ 和 css/ 目录应与 index.html（或任何默认页面）处于同一级别，并且文件具有 http 服务器的正确权限为他们服务等

我查看了 Chrome 的 Javascript 控制台，发现这些 URL 正在返回 404 Not Found —— Ch​​rome 和 Firefox 都内置了开发人员工具，可以提醒您注意这些问题。

# matlab - matlab中的3D互相关

> ID：12309509
> 
> 赞同：3
> 
> 时间：2012-09-06T22:43:47.563
> 
> 标签：matlab, image-processing, signal-processing

我需要在 MATLAB 中计算 3D 互相关。有人知道我应该使用哪个功能吗？对于 2-D 互相关，它具有`xcorr2`，但我不知道是 3D。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T03:36:00.960

相关性类似于卷积，除了不需要翻转关于原点的输入（但相关性需要取其中一个操作数的复共轭），因此对于 3D 实矩阵，您可以使用它`convn(x3d,y3d(end:-1:1,end:-1:1,end:-1:1))`来计算 3D 互相关。

# wcf - 我可以为在 WCF Web Server 中开发的 Windows Azure 云服务使用/查询我的本地 sql 数据库服务器吗？

> ID：12309512
> 
> 赞同：0
> 
> 时间：2012-09-06T22:44:11.540
> 
> 标签：wcf, web-services, azure, cloud

我正在使用 Windows Azure 部署我的 Web 服务。我想知道我可以从 WCF Web 角色中创建的 Windows Azure 云服务查询我的本地 SQL 数据库服务器吗？

如果是...请告诉我一些与此相关的教程或有用的链接。

感谢和问候拉希特阿罗拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:22:23.337

[Windows Azure 代码示例站点](http://code.msdn.microsoft.com/windowsazure/CSAzureServiceBusWCFDS-d69e2ae0#content)上的通过[Azure 服务总线访问本地数据示例](http://code.msdn.microsoft.com/windowsazure/CSAzureServiceBusWCFDS-d69e2ae0#content)正是您所需要的。

# browser - 更快地超时阻塞的 HTTP 资源

> ID：12309517
> 
> 赞同：1
> 
> 时间：2012-09-06T22:44:36.607
> 
> 标签：browser, tcp, hosts

我在 /etc/hosts 文件中阻止了几个流行的广告定位域。例如：

```
127.0.0.1 ad.doubleclick.net
127.0.0.1 a.adroll.net 
```

但是，有时网站会在其 Web 文档中设置对这些服务器的阻塞调用`<head>`，Chrome 在请求超时之前不会绘制页面的其余部分，这可能需要一段时间。

有没有办法可以加快这些请求超时的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:52:26.977

通过主机将请求重定向到 127.0.0.1 当然意味着对 localhost 的请求。如果您在那里运行一个网络服务器，您会捕获所有这些请求，这可能会导致一些处理时间。

如果您没有在 localhost 上运行的服务器和防火墙，它会丢弃对端口 80 的请求，事情可能会变得更加糟糕：如果数据包被静默丢弃，client/os-combo 可能需要很长时间才能放弃。

因此，请尝试以下操作：

*   如果您在 localhost 上有一个网络服务器，请确保它以 404 快速响应
*   如果您没有本地网络服务器但有防火墙，请向其添加一条规则以**不**丢弃来自本地主机的数据包 - 这将导致快速“连接被拒绝”

# javascript - Javascript 对象和 this 关键字

> ID：12309523
> 
> 赞同：0
> 
> 时间：2012-09-06T22:45:32.027
> 
> 标签：javascript, class, object, this

我知道*这*引用了对象所有者。但是我很难尝试让课堂工作，同时试图确定*这*是指什么。

猜猜最好只显示代码：

```
function Ajax_Class(params) {
// Public Properties
this.Response = null;

// Private Properties
var RequestObj = null;

// Prototype Methods
this.OnReset    = function() { };
this.OnOpenConn = function() { };
this.OnDataSent = function() { };
this.OnLoading  = function() { };
this.OnSuccess  = function() { alert("default onSuccess method."); };
this.OnFailure  = function() { alert("default onFailure method."); };

// Public Methods
this.Close = function() {   // Abort current Request
    if (RequestObj) {
        RequestObj.abort();
        RequestObj = null;
        return true;
    } else return false;
};

// Private Methods
var Instance = function() {     // To create instance of Http Request
    try { return new XMLHttpRequest(); }
    catch (error) {}
    try { return new ActiveXObject("Msxml2.XMLHTTP"); }
    catch (error) {}
    try { return new ActiveXObject("Microsoft.XMLHTTP"); }
    catch (error) {}

    // throw new Error("Could not create HTTP request object.");
    return false;
};

var ReadyStateHandler = function() {
    // Switch through possible results
    switch(RequestObj.readyState) {
        case 0:
            this.OnReset();
        break;

        case 1:
            this.OnOpenConn();
        break;

        case 2:
            this.OnDataSent();
        break;

        case 3:
            this.OnLoading();
        break;

        case 4:
            // Check Status
            if (RequestObj.status == 200)  {
                // Handle Response
                Response = HandleResponse();
                // Call On Success
                this.OnSuccess();
                // Hide Loading Div
                LoadingDiv(true);
            } else {
                this.OnFailure();
            }

        break;
    } // End Switch
};

var Open = function() {
    // In case it's XML, Override the Mime Type
    if ((params["ResponseType"] == "XML") && (RequestObj.overrideMimeType)) 
        RequestObj.overrideMimeType('text/xml');

    // 
    if ((params["User"]) && (params["Password"]))
        RequestObj.open(params["Method"], params["URL"],  params["Async"], params["User"], params["Password"]);
    else if (params["User"])
        RequestObj.open(params["Method"], params["URL"],  params["Async"], params["User"]);
    else
        RequestObj.open(params["Method"], params["URL"],  params["Async"]);

    // Set Request Header ?
    if (params["method"] == "POST") 
        //this.SetRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
        RequestObj.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

};

var Send = function() {
    if (params["Data"])     RequestObj.send(params["Data"]);
    else                    RequestObj.send(null);
};

var HandleResponse = function() {
    if (params["ResponseType"] == "JSON")
        return ParseJSON(RequestObj.responseText);
    else if (params["ResponseType"] == "XML")
        return RequestObj.responseXML;
    else 
        return RequestObj.responseText;
};

// Method ParseJSON
var ParseJSON = function(obj) {
    if (obj)
        return JSON.parse(obj);
}; // End ParseJSON

// Method LoadingDiv -> Either Shows or Hides the Loading Div
var LoadingDiv = function(hide) {
    // Hide the Modal Window
    if (hide) { document.getElementById("Async").style.display = "none"; return false; }

    // Show Modal Window
    document.getElementById("Async").style.display = "block";

    // Reset the Position of the Modal_Content to 0, x and y
    document.getElementById("Async_Container").style.left = "0px";
    document.getElementById("Async_Container").style.top = "0px";

    // Center the Modal Area, no matter what the content
    var Screen_Width, Screen_Height;
        // Get screen data
        if (typeof(window.innerWidth) == "number") { Screen_Width = window.innerWidth; Screen_Height = window.innerHeight; }            //Non-IE
        else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {         //IE 6+ in 'standards compliant mode'
            Screen_Width = document.documentElement.clientWidth;
            Screen_Height = document.documentElement.clientHeight;
        } else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {                                        //IE 4 compatible
            Screen_Width = document.body.clientWidth;
            Screen_Height = document.body.clientHeight;
        }

        // Set Modal_Content Max Height to allow overflow
        document.getElementById("Async_Container").style.maxHeight = Screen_Height - 200 + "px";

        // Get Modal_Container data
        var El_Width = document.getElementById("Async_Container").offsetWidth;
        var El_Height = document.getElementById("Async_Container").offsetHeight;

    // Set the Position of the Modal_Content
    document.getElementById("Async_Container").style.left = ((Screen_Width/2) - (El_Width/2)) + "px";
    document.getElementById("Async_Container").style.top = ((Screen_Height/2) - (El_Height/2)) + "px";
};

// Constructor

// Check the Params
// Required Params
if (!params["URL"]) return false;
// Default Params
params["Method"]        = (!params["Method"]) ? "GET" : params["Method"];   // GET, POST, PUT, PROPFIND
params["Async"]         = (params["Async"] === false) ? false : true;
params["ResponseType"]  = (!params["ResponseType"]) ? "JSON" : params["ResponseType"];  // JSON, TXT, XML
params["Loading"]       = (params["Loading"] === false) ? false : true;
// Optional Params
// params["User"])
// params["Password"]

// Create Instance of Http Request Object
RequestObj = Instance();

// Handle Ajax according to Async
if (params["Async"]) {
    // Handle what should be done in case readyState changes
    if (params["Loading"]) LoadingDiv();
    // State Handler || Response is Handled within the code
    RequestObj.onreadystatechange = ReadyStateHandler;
    // Open & Send
    Open();
    Send();
} else {
    // Handle the Loading Div
    if (params["Loading"]) LoadingDiv();
    // Open & Send
    Open();
    Send();
    // Handle Response
    this.Response = HandleResponse();
    // No State Handler, Application has been waiting for modifications.
    //this.OnSuccess(Response);
    // Handle the Loading Div
    LoadingDiv(true);
}

// no problems?
return true;

} // End Ajax 
```

然后，在页面内部：

```
window.onload = function() {

update_states = function() {
    this.OnSuccess = function() {
        alert("overriden onSuccess Method");
    };
};
    update_states.prototype = new Ajax_Class({URL:"ajax/states.php?id=5&seed="+Math.random()});
    run_update_states = new update_states;      

} // Window Onload 
```

我想要做的是有一个默认的 OnSuccess （等等）方法，如果有需要，我可以用子类方法覆盖默认方法，但它仍然会在 HttpRequest 状态更改时自动调用。

如果有人能指出我正确的方向，我将不胜感激，如果我能理解为什么*这*在这种情况下不起作用以及如何使其引用正确的对象，我会感到惊讶。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:50:49.367

`this`是根据事物的调用方式设置的。这些是它的不同设置方式：

1.  `func()`- 一个正常的函数调用。 `this`设置为全局对象（`window`在浏览器中）。

2.  `obj.method()`- 方法调用。 `this`设置为`obj`。

3.  `func.call(obj, arg1, arg2, ...)`- 使用`.call()`. `this`设置为`obj`。

4.  `func.apply(obj, args)`- 使用`.apply()`. `this`设置为`obj`。

5.  `func.bind(obj, arg1, arg2, ...)`- 使用`.bind()`. `this`创建一个在调用时设置为的新函数`obj`（在内部，它`.apply()`在其实现中使用）。

需要注意的典型事情。

*   调用常规函数，即使是在对象的方法中也会导致`this`指针`window`位于该函数内。
*   回调函数通常会收到`this`与其可能嵌入的代码不同的值。您可能必须将原始`this`值保存到局部变量中（通常`self`按约定调用），以便您可以从回调函数中引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:04:30.417

也许您正在尝试执行以下操作：

```
function Base() {}

Base.prototype.showName = function() {
  alert('Base method: ' + this.name);
}

function Foo(name, arg){

   this.name = name;

  // Extend this if arg is an object
  if (typeof arg == 'object') {
    for (var p in arg) {

      // This references the new instance if called with new keyword
      if (arg.hasOwnProperty(p)) {
        this[p] = arg[p];
      }
    }
  }
}

Foo.prototype = new Base();

// Re-assign constructor property (not very useful but some to do like this)
Foo.prototype.constructor = Foo; 

var inst0 = new Foo('foo 0');

// Override inherited method
var inst1 = new Foo(
             'foo 1',
             {showName: function(){alert('Instance method: ' + this.name);}}
            );

inst0.showName(); // Base method: foo 0
inst1.showName(); // Instance method: foo 1 
```

但是还有其他（更简单？更好？）的方法可以做到这一点。让原型继承和 javascript 的动态特性为你工作，不要仅仅因为你对它们更舒服就试图让它模仿其他继承模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T22:55:06.473

你试过这个吗

```
run_update_states = new update_states(); 
```

注意括号。

# wpf - 在 WPF 控件中显示 Microsoft Office 文档

> ID：12309524
> 
> 赞同：1
> 
> 时间：2012-09-06T22:45:39.373
> 
> 标签：wpf, excel, ms-word, ms-office, office-interop

我正在开发一个允许用户浏览目录内容的 WPF 应用程序。我想要做的是，如果用户单击 Microsoft Word 或 Excel 文档，则将文件显示在 WPF 应用程序内的视图控件（如 Scrollviewer 或其他东西）中。我正在尝试制作一个多合一的文档查看器，这样用户就不必打开单独的 Word 和 Excel 窗口。

用户不需要能够编辑文件，只需查看它。此外，用户将在其计算机上安装 Word 和 Excel。

这可能吗？我正在阅读相互矛盾的答案，似乎假设用户不一定安装了 Office。在这种情况下，是的，他们将在本地计算机上安装 Office。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:23:39.413

您可以尝试使用电子表格控件打开 excel [http://www.syncfusion.com/products/user-interface-edition/wpf/spreadsheet](http://www.syncfusion.com/products/user-interface-edition/wpf/spreadsheet)

示例位置： [http ://silverlight.syncfusion.com/samples/WPF/Samples/WPFSampleBrowser/UI/Spreadsheet/Spreadsheet.htm](http://silverlight.syncfusion.com/samples/WPF/Samples/WPFSampleBrowser/UI/Spreadsheet/Spreadsheet.htm)

要打开 word 文件，请使用 RichTextBox， [http://www.syncfusion.com/products/user-interface-edition/wpf/tools/features#rich-text-box](http://www.syncfusion.com/products/user-interface-edition/wpf/tools/features#rich-text-box)

要打开 pdf，请使用 Pdfviewer， [http://www.syncfusion.com/products/reporting-edition/report-viewer](http://www.syncfusion.com/products/reporting-edition/report-viewer)

# html - 我的样式忽略了我的 CSS，而是使用“元素样式”

> ID：12309526
> 
> 赞同：0
> 
> 时间：2012-09-06T22:45:43.633
> 
> 标签：html, css

我正在为我的网站的联系表格制作工具提示（可以在联系部分中看到[。](http://www.jamesperrett.co.uk/testsite/)）

我在正确定位工具提示时遇到了一些问题。我相信您可以看到，工具提示不在它相关的字段附近。我在我的 css 中输入了 200px 的左值（您可以在[此处](http://www.jamesperrett.co.uk/testsite/css/validationEngine.jquery.css)的 .formerror 类中看到）

然而，该元素仍在通过左值 279。开发人员工具告诉我这是来自“元素样式”。我很困惑这个值是从哪里来的，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:52:35.053

`left`您在 CSS 中设置的位置正在被`style`某些 JavaScript 在元素属性中覆盖。您可以添加`!important`到值的末尾`left`以防止`style`属性（或其他任何内容）覆盖它，但这可能不是最佳解决方案（请参阅[http://css-tricks.com/when-using-important-is -正确的选择/](http://css-tricks.com/when-using-important-is-the-right-choice/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:56:36.383

从这里的演示......

[http://www.position-relative.net/creation/formValidator/demos/demoPositioning.html](http://www.position-relative.net/creation/formValidator/demos/demoPositioning.html)

...代码完全按照应有的方式工作，但图形上的箭头居中而不是左对齐，所以看起来有点奇怪。

下一页上有一个部分告诉您如何定位工具提示：

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

寻找“提示位置”。

# php - PHP中的Excel Pivot？

> ID：12309527
> 
> 赞同：1
> 
> 时间：2012-09-06T22:45:50.273
> 
> 标签：php, mysql, pivot-table

是否存在任何 php/mysql 框架/产品可以帮助您构建与 Excel 中的数据透视表相同类型的数据表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-19T00:04:13.327

这是一个老问题，但是有一篇关于它的优秀文章。 [http://www.ibm.com/developerworks/library/x-excelpivotphp/](http://www.ibm.com/developerworks/library/x-excelpivotphp/) 基本上，在 excel 中创建您的数据透视，另存为 xml，您可能有 2 个文件：一个包含数据，另一个包含数据透视结构。然后随时用php创建数据xml并打开数据透视表。甜的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:54:57.360

You can use any of the Pivot Table components. E.g. here's a showcase of connecting one to php/mysql simply via CSV [http://www.flexmonster.com/blog-connect-database](http://www.flexmonster.com/blog-connect-database)

# perl - 使用 Net::LDAP::Control::Paged 超出 SizeLimit

> ID：12309539
> 
> 赞同：1
> 
> 时间：2012-09-06T22:47:06.687
> 
> 标签：perl, active-directory, ldap

根据我阅读的所有文档，查询 Active Directory 时结果集的最大大小为 1000 条记录。如果您需要超过 1000 条记录，系统会告诉您使用 Net::LDAP::Control::Paged 来分页并获取超过 1000 条记录，我曾尝试这样做。出于某种原因，尽管使用了分页控件，但我仍然只能返回 1000 条记录。我使用的代码与其他人声称成功使用的代码相同，但没有任何运气。我在这里错过了什么吗？请注意，我没有对 AD 服务器的管理访问权限，因此更改配置不是我的选择。我在下面粘贴了相关代码，因此您可以指出我可能做错了什么。

```
#!perl -w

use strict;
use Net::LDAP;
use Net::LDAP::Control::Paged;
use Net::LDAP::Constant qw( LDAP_CONTROL_PAGED );

my $LDAPServer      = "<LDAP SERVER ADDRESS>";
my $base        = "<BASE DN>";
my $user                = "<LDAP USER>";
my $pass                = "<PASSWORD>";
my $page                = Net::LDAP::Control::Paged->new(size => 1000) or die $!;
my $errorConnectionStr  = "";
my $ldap;
my $mesg;
my $cookie;

$ldap = Net::LDAP->new($LDAPServer);
$mesg = $ldap->bind($user, password => $pass, version => 3);

open(OUT,">users.csv");
print OUT "sAMAccountName,sn,givenName\n";

my $filter = "(&(objectClass=person)(!(userAccountControl:1.2.840.113556.1.4.803:=2))(!(objectClass=computer)))";
my @attribs = ("sn", "givenName", "sAMAccountName", "distinguishedName");

my @args = (
        base    => $base,
        scope   => 'sub',
        filter  => $filter,
        attrs   => @attribs,
        pagesize => 1000,
        control => [$page]
);

while(1) {
    $mesg = $ldap->search(@args) or die $!;

    while (my $entry = $mesg->pop_entry()) {
        my $print = 1;

        my $dn = $entry->dn();
        my $uid = $entry->get_value('sAMAccountName');
        my $ln = $entry->get_value('sn');
        my $fn = $entry->get_value('givenName');

        if($dn =~ m/.*Resources.*/) {
            $print = 0;
        }

        if(defined($uid) && defined($ln) && defined($fn)) {
            if($print == 1) {
                print OUT "$uid,$ln,$fn\n";
            }
        }
    }

    my ($resp) = $mesg->control(LDAP_CONTROL_PAGED) or last;
    $cookie = $resp->cookie or last;
    $page->cookie($cookie);
}

if($cookie) {
    print "Abnormal exit\n";
    $page->cookie($cookie);
    $page->size(0);
    $ldap->search(@args);
}

close(OUT);
$ldap->unbind; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T12:11:29.820

你需要`attrs => \@attrs,`在`@args`. 如果没有反斜杠，您将插入奇数个元素（`'attrs'`加上数组的四个元素），并且搜索方法看不到`pagesize`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T20:19:33.357

我只是第一次使用它，它在这里工作。我的搜索非常简单（显示容器中的所有对象）。我通过在 800 个组页面中抓取它们来列出 11.5k 个组。我的代码与您的代码几乎相同（它是 Net::LDAP::Control::Paged 手册页和您的示例的混合），除了我没有在搜索中指定页面大小：

```
while (1) {
   my $mesg = $x->{ldap}->search(base => $x->{config}->{gbase},
                                scope => 'sub',
                              control => [$page],
                               filter => 'cn=*',
                                attrs => \@attrs,
   );
   die "LDAP error: server says ",$mesg->error,"\n" if $mesg->code;

   foreach my $entry ( $mesg->entries ) {
      my $cn   = $entry->get_value('cn');
      my $desc = $entry->get_value('description');
      print "$cn - $desc\n";
   }

   # Get cookie from paged control
   my($resp)  = $mesg->control( LDAP_CONTROL_PAGED )  or last;
   $cookie    = $resp->cookie or last;

   # Set cookie in paged control
   $page->cookie($cookie);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-10-09T20:16:06.043

您不能使用 1000 的大小，因为它是 AD 限制，因此不会分页。需要比这更少的东西。尝试 999 并获得快乐。

# iphone - iPhone：触发通知时显示自定义视图

> ID：12309543
> 
> 赞同：0
> 
> 时间：2012-09-06T22:47:18.323
> 
> 标签：iphone, objective-c, xcode

一旦在 iPhone 上触发通知，我就会尝试显示自定义视图。我的意思是，一旦弹出 UILocalNotification 警报并且用户按下操作按钮，现在它会显示我的主视图，但我宁愿让它显示不同的视图。

我该如何做到这一点？不一定需要代码，只需要完成此操作的一般步骤。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:24:11.647

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

launchOptions 中的 UIApplicationLaunchOptionsLocalNotificationKey 使用该键访问 UIApplicationDelegate 方法 application:didFinishLaunchingWithOptions: 的第二个参数中传递的字典内容。它返回与刚刚呈现给应用程序的本地通知关联的 UILocalNotification 对象。

然后您可以使用您在通知中传递的信息并显示不同的视图控制器或任何自定义视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:18:49.857

```
 - (void)application(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

这是在您单击由 UILocalNotification 触发的警报对话框上的操作按钮后触发的方法。只需要展示那里的景色。

# c# - 来自 Resharper 的可疑警告 - 我应该更改我的代码吗？

> ID：12309545
> 
> 赞同：6
> 
> 时间：2012-09-06T22:47:21.887
> 
> 标签：c#, refactoring, resharper, automated-refactoring

使用以下代码：

```
if (lombardiTrophy.Substring(1, 1).Equals('~')) 
```

...我明白了，“*可疑比较：解决方案中没有类型是从 'string' 和 'char' 继承的*”

有没有更好的方法来做到这一点，不会导致 Resharper 挑起毛病？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T22:50:51.520

您应该注意 ReSharper 的警告 - Substring 返回一个字符串，而单引号表示法是一个字符，因此您正在比较两种不同的类型。您应该将 char 与 char 进行比较，您可以这样做：

```
if (lombardiTrophy[1].Equals('~')) 
```

当然，您要确保您的字符串至少有两个字符长。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T22:55:53.447

试试这个：

```
 if (lombardiTrophy.Substring(1, 1).Contains("~")) 
```

注意字符串比较的双引号。

# core-plot - 如何将 Y 轴定位在图表底部上方的零？

> ID：12309548
> 
> 赞同：0
> 
> 时间：2012-09-06T22:47:53.690
> 
> 标签：core-plot

**场景：**带有一些负值和正值的线/散点图。

**问题：**负值超出了图表的底部。

**愿望：**用可见的图形区域查看所有值。

我需要向上调整 Y 轴的零/负值以显示所有图形。

必须有一个简单的方法来做到这一点......通过范围？

里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:50:50.060

设置`yRange`绘图空间的 。绘图范围由起始位置（例如，-10）和长度（例如，25）定义。此示例范围将从 -10 开始并扩展到 15 (-10 + 25)。

# wordpress-theming - 在 wp-admin.css 中为 #wpcontent 添加宽度

> ID：12309549
> 
> 赞同：0
> 
> 时间：2012-09-06T22:47:55.157
> 
> 标签：wordpress-theming, wordpress

有人知道在管理区域中为 CSS 样式 ID #wpcontent 指定宽度而不修改核心文件的方法吗？我想扩大我的插件设置页面的宽度。我只需要更改`#wpcontent{height:100%}`为`#wpcontent { height:100%; width: 100%; }`.

根据[这个页面](http://millionclues.com/wordpress-tips/how-to-add-css-styles-to-wordpress-admin/)，似乎需要嵌入另一个 CSS 文件。但如果你能展示一个简单的方法，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:07:59.943

无需导入外部文件。

```
$width = 'width: 100%;';
echo '<style type="text/css">
    #wpcontent {
        height:100%;
        ' . $width . '
    }
    #footer {
        ' . $width . '
        color: #777;
        border-color: #DFDFDF;
    }           
</style>'; 
```

另外，`stripos()`我会使用 $_GET 而不是 ，

```
if ($_GET['page'] == PLUGINPAGESLUG) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:49:19.527

实际上，这并不难做到，拥有一个单独的 css 文件似乎还不错，尽管对于这么小的任务来说它看起来有点重。

我按照这个页面所说的：[http ://codex.wordpress.org/Creating_Admin_Themes](http://codex.wordpress.org/Creating_Admin_Themes)

## 主插件文件：

```
define('PLUGINPAGESLUG', 'mypluginpageslug');
add_action('admin_head', 'Plugin_Custom_CSS');
function Plugin_Custom_CSS() {
    if (stripos($_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"], '?page=' . PLUGINPAGESLUG) !== false) 
        echo '<link rel="stylesheet" type="text/css" href="' . plugins_url('/css/myadminpage.css', __FILE__). '">';
} 
```

## css\myadminpage.css

```
#wpcontent { height:100%; width: 100%; } 
```

就是这样。

# c# - Prism 取消订阅，订阅令牌不起作用

> ID：12309550
> 
> 赞同：7
> 
> 时间：2012-09-06T22:48:00.710
> 
> 标签：c#, .net, prism

我正在使用 ClassA 中的以下代码订阅和取消订阅 prism 事件。我遇到的问题是**在**我取消订阅之后，另一个完全不同的类，比如 ClassB，使用不同的处理程序注册相同的事件，仍然调用 ClassA 处理程序。为什么是这样？

我尝试过使用令牌取消订阅以及注册时使用的方法委托，但均无济于事。

```
SubscriptionToken _subscriptionToken;

//register subscription + handler
var pevent = GetEventAggregator().GetEvent<PriceSubscriptionEvent>();
_subscriptionToken = pevent.Subscribe(r =>
{
    DataHandler(r);
    return;
}, ThreadOption.BackgroundThread, false, null);

//Unsubscribe
var pevent = GetEventAggregator().GetEvent<PriceSubscriptionEvent>();
pevent.Unsubscribe(_subscriptionToken); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:10:22.493

我不认为取消订阅可以在那里工作，因为您在订阅调用中使用了匿名方法。尝试在单独的方法中移动订阅代码，然后订阅/取消订阅/取消订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:56:40.997

我不确定这里的订阅令牌代码。

但是，我们可以按如下方式订阅和取消订阅该事件：

```
evenaggregator.GetEvent<EventName>().Subscribe(eventhandler); 
```

和

```
evenaggregator.GetEvent<EventName>().Unsubscribe(eventhandler); 
```

这个对我有用。

# drupal-7 - 层次分类法的参考字段选项限制

> ID：12309551
> 
> 赞同：1
> 
> 时间：2012-09-06T22:48:03.703
> 
> 标签：drupal-7, drupal-views

i 创建一个名为 Country 的词汇表，其中包含以下 2 个术语。

英国
法国

并创建一个单独的词汇表并将其命名为 City，添加一个名为 field_country 的新术语参考，因此现在每个城市术语都必须选择一个特定的国家术语。

并创建以下城市条款。

伦敦（field_country 设置为英格兰）
里昂（field_country 设置为法国）
曼彻斯特（field_country 设置为英格兰）
巴黎（field_country 设置为法国）

像往常一样将现有的 field_country 添加到 Article> 内容类型。

添加一个字段名为 field_city 的新术语引用字段，并在设置页面中，选中根据匹配字段值限制此字段的选项选项，如下图所示。

现在，当您添加新文章时，只要您选择 Country 字段，City 字段就会更新。

但是当同时公开 Country 和 City 术语过滤器时。两个字段都显示，并且城市不依赖于国家字段，如果我按应用，那么城市字段值取决于国家字段方式 ajax 不起作用

# asp-classic - 经典的 ASP 流式 PDF 到浏览器在 IE 中停止工作

> ID：12309556
> 
> 赞同：0
> 
> 时间：2012-09-06T22:48:18.547
> 
> 标签：asp-classic, msxml

我有一个 ASP 页面，它从另一个 URL 获取 PDF 图像并将其流式传输到浏览器。它似乎最近停止了工作（我认为 8/23 上安装了几十个 Windows 和 .NET 安全补丁，我认为这可能是原因）。

代码非常简单，在 Chrome 中运行良好。在 IE8 中，我的页面加载正常，并且没有记录错误。但是 PDF 数据没有得到流式传输。任何人都可以看到任何可能导致 IE 出现问题的东西吗？

```
Dim objRequest
Set objRequest = Server.CreateObject("MSXML2.ServerXMLHTTP.6.0")
objRequest.open "GET", otherUrl, False
objRequest.send
if left(objRequest.status,1) = 4 or left(objRequest.status,1) = 5 then 'their URL had a problem
    'return error to web page; this line is not hit
else
    Response.ContentType = "application/pdf"
    Response.BinaryWrite objRequest.responseBody
end if
Set objRequest = Nothing 
```

我已经离开了我构建的部分，`otherUrl`但它似乎工作正常，我可以点击 URL 并获取 PDF。我玩过 MSXML 对象的版本，但这似乎是正确的，而且 ProgId 绝对可用。

帮助！

更新请求的信息：IE8，Adobe Reader X。服务器操作系统是 Windows Server 2k8 R2 标准。IE9、Firefox 和 Chrome 似乎都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:45:42.223

如果不知道您的 Adob​​e、IE 和网络服务器版本，实际上很难说什么。您可以[在此处](http://www.techper.net/2008/02/27/4-ways-to-stream-pdf-and-some-tips)查看基本提示。

如果让这个再次工作对您来说至关重要，您可能希望通过添加这个来引发下载提示

```
Response.AppendHeader("content-disposition", "attachment;filename=myfile.pdf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:57:58.957

您的 IIS 是否配置为对所有发送的数据进行用户 HTTP 压缩？有时这可能会使浏览器在接收端不再理解它。

# io - awk 打印与 printf 函数

> ID：12309563
> 
> 赞同：5
> 
> 时间：2012-09-06T22:49:15.910
> 
> 标签：io, awk, printf

其中`awk`有两个输出函数：`print`和`printf`。

*   他们的实现有`awk`很大不同吗？
*   关于性能/速度有什么区别（如果可能的话——理论上，不仅仅是`time`命令行上的“”）？
*   他们使用相同的系统调用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T22:55:05.660

1.  性能差异可能无法衡量。
2.  该`print`函数在末尾输出一个换行符；`printf`除非要求，否则不会。
3.  代码将`print`参数转换为字符串，然后将它们发送到由 OFS（输出字段分隔符）分隔的输出。
4.  代码可能需要先将字符串转换为双精度，然后`printf`再使用双精度格式（`%16.8g`或其他格式）和类似操作对其进行格式化。
5.  所使用的系统调用将`write(2)`用于两者或类似的东西，但将有代码（可能`<stdio.h>`）在其之上分层。

所有这些加起来就是：

*   实现方式不同；`print`比 . 更简单（因此更快）`printf`。
*   对于大多数目的，差异可能无法测量。
*   `print`如果它可以满足您的需要，请使用；`printf`当它做你需要的时候使用。
*   别担心。

而且使用a`sprintf`后跟`print`可能会比`printf`直接使用慢，所以不要。

如有疑问，请测量。

# c# - 在 C# 中写入二进制文件，然后在 C++ 中读取相同的文件

> ID：12309568
> 
> 赞同：2
> 
> 时间：2012-09-06T22:50:35.637
> 
> 标签：c#, c++, binaryfiles

我正在使用 BinaryWriter 类在 C# 中编写二进制文件

```
using (var b = new System.IO.BinaryWriter(System.IO.File.Open("C:\\TextureAtlas0.txa", 
       System.IO.FileMode.Create)))
{
  int count;

  // Write the number of source rectangle entries
  count = textureAtlas.Rectangles.Count;

  b.Write(count);

  for (int i = 0; i < count; ++i)
  {
    b.Write(textureAtlas.SpriteNames[i]);
    b.Write(textureAtlas.Rectangles[i].X);
    b.Write(textureAtlas.Rectangles[i].Y);
    b.Write(textureAtlas.Rectangles[i].Width);
    b.Write(textureAtlas.Rectangles[i].Height);
  }
} 
```

然后我尝试使用以下步骤将相同的文件读入 C++。

我有一个结构，它以与写入相同的顺序保存数据。

```
struct TextureAtlasEntry 
{
    std::string name;
    int x;
    int y;
    int width;
    int height;
}; 
```

首先读取计数

```
int count;

fread(&count, sizeof(int), 1, LoadFile); 
```

然后我尝试使用计数值来确定将保存数据的列表大小。我似乎无法使用数组，因为 count 的值会因读取的文件而异。

```
std::list<TextureAtlasEntry> entries;
fread(&entries, sizeof(TextureAtlasEntry), count, LoadFile);

fclose(LoadFile); 
```

上面的代码不起作用。我可以正确读取计数，但 memcpy 命令会导致 fread 和条目列表的访问冲突。

如何正确读取数据，是否应该将 fread 与 C++ 等价物交换？

编辑：

我现在可以使用以下代码将整个二进制文件读入内存

```
ifstream::pos_type size;
char *memblock;

ifstream file ("TextureAtlas0.txa", ios::in|ios::binary|ios::ate);

if (file.is_open())
{
    size = file.tellg();
    memblock = new char[size];
    file.seekg (0, ios::beg);
    file.read (memblock, size);
    file.close();

    printf("File content is in memory");

    delete[] memblock;
}
else 
{
    printf("Unable to open file");
} 
```

现在文件在内存中，如何将 char[] 数据转换为 struct 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:07:59.243

根据[文档](http://msdn.microsoft.com/en-us/library/yzxa6408.aspx#Y0)， BinaryWriter(String) 写...

> 以长度为前缀的字符串通过在字符串前面加上一个包含该字符串长度的单个字节或单词来表示字符串长度。此方法首先将字符串的长度写入为 UTF-7 编码的无符号整数，然后使用 BinaryWriter 实例的当前编码将那么多字符写入流。

在您的 C++ 代码中，您只是试图读取结构大小的字节数，这与 BinaryWriter 使用的格式不同。

您是否将 .NET 用于 C++ 代码？如果是这样，只需使用 BinaryReader 类来读取文件。

如果没有，您将不得不稍微拆分阅读。当您准备好读取名称时，您首先必须读取“UTF-7 编码的无符号整数”，然后读取更多字节以获取字符串。

**编辑**

根据您在下面的评论，您似乎不会使用 C++.NET，所以我认为您有两个选择。1) 在 C# 中以您能够将数据读入 C++ 的方式写出数据（使用固定长度的字符串） 2) 找出 BinaryWriter.Write() 写入数据的方式，以便您可以在 C++ 中正确读取数据。

伪代码 - 我认为它是这样的。就像我在下面的评论中说的那样，我的 C++ 生锈了，但这是基本算法应该很接近。

```
read from file int num - number of items
for (i=0;i<num;i++){
   read int stringBytes - size of string
   read string stringBytes bytes - the name
   read int X4
   create your struct and add to list/array/dictionary
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:10:55.933

而不是另一个答案中解释的字符串数据类型问题，这里还有一件事。`std::list`是一个`doubly linked list`本质上包含额外指针的，所以直接`fread/memcpy`可能不会给你你在 c# 片段中存储的内容。

# java - JetBrains 使用哪些 GUI 库？

> ID：12309569
> 
> 赞同：126
> 
> 时间：2012-09-06T22:50:38.663
> 
> 标签：java, swing, user-interface, intellij-idea

# 背景

我对 Java 有点陌生，并且喜欢使用由 JetBrains 团队开发的 IntelliJ IDE。

我已经下载了社区版的源代码，并且正在尝试找出他们使用哪些 GUI 库来获得外观。

# 问题

他们使用哪些库（如果有）来获取非本地选项卡、工具栏和面包屑组件？

他们使用的面板也很有趣，但我觉得它们是为该项目开发的，而不是库。这是真的？

有人可以提供在 GUI 项目中产生类似外观所需的细分吗？

有没有人有这方面的教程？到目前为止，我所能解决的只是他们使用的是 Swing 和 jGoodies。

# 到目前为止我的想法

他们正在使用 Swing 和 jGoodies。MyDoggy[项目](http://mydoggy.sourceforge.net/)正在尝试生成一个类似的对接框架，但我认为 IntelliJ 不会使用它。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-09-07T05:01:17.523

IntelliJ IDEA 是一个纯 Java Swing 应用程序。所有自定义组件（如编辑器选项卡）都是手动创建的，没有使用第三方库。您可以通过查看[IntelliJ IDEA 社区源代码](https://github.com/JetBrains/intellij-community)找到所有详细信息。

# javascript - 使用复选框绘制折线 Google Maps API3，不起作用

> ID：12309575
> 
> 赞同：2
> 
> 时间：2012-09-06T22:51:03.470
> 
> 标签：javascript, google-maps-api-3, google-polyline

我在我的项目中包含谷歌地图，我想在地图上的两个标记之间绘制一条折线，但带有一个复选框。没有功能和复选框，一切都很好。这是代码：

```
 <script type="text/javascript">

     function placePolyline(chkb)
            {
                if(chkb.cheked==true)
                    {
                var MarkerArray= [];
                for(var i=0;i<arrayLatitude.length;i++)
                    {
                        var lokacijaMarkera = new google.maps.LatLng(arrayLatitude[i],arrayLongitude[i]);
                        MarkerArray.push(lokacijaMarkera);
                    }
                var polyOptions = new google.maps.Polyline({
                    path: MarkerArray,
                    map: map
                  });

                  polyLine = new google.maps.Polyline(polyOptions);
                  polyLine.setMap(map); 
                //  
                    }
                else{
                    polyLine.setMap(null);
                }

            }

    </script>
<form>
<input type="checkbox" id="chkb" ">
<input type="button" value="Drew polyline" onclick="placePolyline(chkb)"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:30:03.337

[复选框](http://www.w3schools.com/jsref/dom_obj_checkbox.asp)的属性是“检查”而不是检查

# android - JellyBean 布局崩溃

> ID：12309576
> 
> 赞同：5
> 
> 时间：2012-09-06T22:51:24.360
> 
> 标签：android, android-layout, android-webview, android-4.2-jelly-bean

我有一个`RelativeLayout`包含 a`ProgressBar`和 a的应用程序`WebView`。它没有什么复杂的。但是，我遇到了一个非常奇怪的崩溃，我什至没有看到 ANR 对话框。注释掉`ProgressBar`xml 中的 允许应用程序不会崩溃，但是我想使用它。任何想法为什么它会崩溃？

xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ProgressBar
        android:id="@+id/progress"
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:layout_gravity="center"
        android:layout_marginBottom="3dp"
        android:layout_marginLeft="8dp"
        android:layout_marginRight="8dp"
        android:layout_marginTop="3dp"
        android:indeterminate="false"
        android:indeterminateOnly="false"
        android:maxHeight="2dp"
        android:minHeight="2dp"
        android:progressDrawable="@android:drawable/progress_horizontal" />

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="8dp"
        android:background="@android:color/transparent"
        android:scrollbars="none" />

</RelativeLayout> 
```

日志输出：

```
09-06 16:57:41.233: I/ActivityManager(358): Displayed com.example.myapp.video/.MainActivity: +341ms
09-06 16:57:41.313: D/dalvikvm(27248): GC_FOR_ALLOC freed 3498K, 42% free 19676K/33543K, paused 47ms, total 50ms
09-06 16:57:41.423: D/dalvikvm(27248): GC_FOR_ALLOC freed 1565K, 41% free 19940K/33543K, paused 54ms, total 54ms
09-06 16:57:41.583: E/SQLiteLog(14294): (14) cannot open file at line 30174 of [00bb9c9ce4]
09-06 16:57:41.583: E/SQLiteLog(14294): (14) os_unix.c:30174: (2) open(/CachedGeoposition.db) - 
09-06 16:57:41.583: D/WebKit(14294): ERROR: 
09-06 16:57:41.583: D/WebKit(14294): SQLite database failed to load from /CachedGeoposition.db
09-06 16:57:41.583: D/WebKit(14294): Cause - unable to open database file
09-06 16:57:41.583: D/WebKit(14294): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)
09-06 16:57:41.673: D/TilesManager(14294): new EGLContext from framework: 66233588 
09-06 16:57:41.673: D/GLWebViewState(14294): Reinit shader
09-06 16:57:41.673: D/GLWebViewState(14294): Reinit transferQueue
09-06 16:57:44.913: A/libc(14294): Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1), thread 14294 (ample.myapp.video)
09-06 16:57:45.013: I/DEBUG(122): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
09-06 16:57:45.013: I/DEBUG(122): Build fingerprint: 'google/nakasi/grouper:4.1.1/JRO03D/402395:user/release-keys'
09-06 16:57:45.013: I/DEBUG(122): pid: 14294, tid: 14294, name: ample.myapp.video  >>> com.example.myapp.video <<<
09-06 16:57:45.013: I/DEBUG(122): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000008
09-06 16:57:45.083: I/DEBUG(122):     r0 662b1f78  r1 00002060  r2 00000000  r3 00000004
09-06 16:57:45.083: I/DEBUG(122):     r4 00000008  r5 66323060  r6 00000008  r7 00000010
09-06 16:57:45.083: I/DEBUG(122):     r8 00000008  r9 00002060  sl 6630cee4  fp 00000004
09-06 16:57:45.083: I/DEBUG(122):     ip 00000000  sp bee12308  lr 67643fa0  pc 67643d14  cpsr 20000010
09-06 16:57:45.083: I/DEBUG(122):     d0  0000000b44921000  d1  4138000041300000
09-06 16:57:45.083: I/DEBUG(122):     d2  4445400044920000  d3  000004904491a000
09-06 16:57:45.083: I/DEBUG(122):     d4  0000048d00000315  d5  444540000000048d
09-06 16:57:45.083: I/DEBUG(122):     d6  4492000000000315  d7  3f800000000004b5
09-06 16:57:45.083: I/DEBUG(122):     d8  c0000000c0000000  d9  0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d10 0000000000000000  d11 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d12 0000000000000000  d13 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d14 0000000000000000  d15 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d16 4092400000000000  d17 7e37e43c8800759c
09-06 16:57:45.083: I/DEBUG(122):     d18 0000000000000000  d19 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d20 0000000000000000  d21 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d22 0000000000000000  d23 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d24 3ff26a7f0aacdd31  d25 3ff550a851800000
09-06 16:57:45.083: I/DEBUG(122):     d26 0000000000000000  d27 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d28 4091fc0002180000  d29 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     d30 bff550a861e00000  d31 0000000000000000
09-06 16:57:45.083: I/DEBUG(122):     scr 20000012
09-06 16:57:45.093: I/DEBUG(122): backtrace:
09-06 16:57:45.093: I/DEBUG(122):     #00  pc 0003bd14  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):     #01  pc 0003bf9c  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):     #02  pc 0003c470  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):     #03  pc 00011f98  /system/lib/egl/libGLESv2_tegra.so (glDrawArrays+156)
09-06 16:57:45.093: I/DEBUG(122):     #04  pc 00016497  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #05  pc 00016549  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #06  pc 000107bb  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #07  pc 00010a25  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #08  pc 00010a25  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #09  pc 00010a25  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #10  pc 00010a25  /system/lib/libhwui.so
09-06 16:57:45.093: I/DEBUG(122):     #11  pc 00059c8f  /system/lib/libandroid_runtime.so
09-06 16:57:45.093: I/DEBUG(122):     #12  pc 0001de30  /system/lib/libdvm.so (dvmPlatformInvoke+112)
09-06 16:57:45.093: I/DEBUG(122):     #13  pc 0004d083  /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+394)
09-06 16:57:45.093: I/DEBUG(122):     #14  pc 00027260  /system/lib/libdvm.so
09-06 16:57:45.093: I/DEBUG(122):     #15  pc 0002bb68  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
09-06 16:57:45.093: I/DEBUG(122):     #16  pc 0005fab7  /system/lib/libdvm.so (dvmInvokeMethod(Object*, Method const*, ArrayObject*, ArrayObject*, ClassObject*, bool)+374)
09-06 16:57:45.093: I/DEBUG(122):     #17  pc 0006700d  /system/lib/libdvm.so
09-06 16:57:45.093: I/DEBUG(122):     #18  pc 00027260  /system/lib/libdvm.so
09-06 16:57:45.093: I/DEBUG(122):     #19  pc 0002bb68  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
09-06 16:57:45.093: I/DEBUG(122):     #20  pc 0005f7f1  /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
09-06 16:57:45.093: I/DEBUG(122):     #21  pc 00049673  /system/lib/libdvm.so
09-06 16:57:45.093: I/DEBUG(122):     #22  pc 0004698d  /system/lib/libandroid_runtime.so
09-06 16:57:45.093: I/DEBUG(122):     #23  pc 0004746f  /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, char const*)+390)
09-06 16:57:45.093: I/DEBUG(122):     #24  pc 00000dcf  /system/bin/app_process
09-06 16:57:45.093: I/DEBUG(122): stack:
09-06 16:57:45.093: I/DEBUG(122):          bee122c8  0000002a  
09-06 16:57:45.093: I/DEBUG(122):          bee122cc  0000000c  
09-06 16:57:45.093: I/DEBUG(122):          bee122d0  67070d30  
09-06 16:57:45.093: I/DEBUG(122):          bee122d4  662b21f8  
09-06 16:57:45.093: I/DEBUG(122):          bee122d8  00000610  
09-06 16:57:45.093: I/DEBUG(122):          bee122dc  00000048  
09-06 16:57:45.093: I/DEBUG(122):          bee122e0  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee122e4  66227561  /system/lib/libardrv_dynamic.so (NvArdShaderWriteFlags+152)
09-06 16:57:45.093: I/DEBUG(122):          bee122e8  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee122ec  6630cce8  
09-06 16:57:45.093: I/DEBUG(122):          bee122f0  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee122f4  00000024  
09-06 16:57:45.093: I/DEBUG(122):          bee122f8  00000009  
09-06 16:57:45.093: I/DEBUG(122):          bee122fc  6622a7fd  /system/lib/libardrv_dynamic.so (NvArdLoadVertexConstants_CPU_PIO+32)
09-06 16:57:45.093: I/DEBUG(122):          bee12300  df0027ad  
09-06 16:57:45.093: I/DEBUG(122):          bee12304  00000000  
09-06 16:57:45.093: I/DEBUG(122):     #00  bee12308  662b8470  
09-06 16:57:45.093: I/DEBUG(122):          bee1230c  6624d1b8  
09-06 16:57:45.093: I/DEBUG(122):          bee12310  6630caf8  
09-06 16:57:45.093: I/DEBUG(122):          bee12314  00000001  
09-06 16:57:45.093: I/DEBUG(122):          bee12318  0000082d  
09-06 16:57:45.093: I/DEBUG(122):          bee1231c  662b21fc  
09-06 16:57:45.093: I/DEBUG(122):          bee12320  d5942160  
09-06 16:57:45.093: I/DEBUG(122):          bee12324  6630ceec  
09-06 16:57:45.093: I/DEBUG(122):          bee12328  6624d1b8  
09-06 16:57:45.093: I/DEBUG(122):          bee1232c  00000010  
09-06 16:57:45.093: I/DEBUG(122):          bee12330  00000008  
09-06 16:57:45.093: I/DEBUG(122):          bee12334  00000008  
09-06 16:57:45.093: I/DEBUG(122):          bee12338  00000001  
09-06 16:57:45.093: I/DEBUG(122):          bee1233c  6630cee4  
09-06 16:57:45.093: I/DEBUG(122):          bee12340  00000003  
09-06 16:57:45.093: I/DEBUG(122):          bee12344  67643fa0  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):     #01  bee12348  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee1234c  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee12350  00000010  
09-06 16:57:45.093: I/DEBUG(122):          bee12354  00000008  
09-06 16:57:45.093: I/DEBUG(122):          bee12358  00000004  
09-06 16:57:45.093: I/DEBUG(122):          bee1235c  6764aa7c  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):          bee12360  662b21f8  
09-06 16:57:45.093: I/DEBUG(122):          bee12364  6630ceec  
09-06 16:57:45.093: I/DEBUG(122):          bee12368  662b1f30  
09-06 16:57:45.093: I/DEBUG(122):          bee1236c  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee12370  00000010  
09-06 16:57:45.093: I/DEBUG(122):          bee12374  662b1f78  
09-06 16:57:45.093: I/DEBUG(122):          bee12378  67687464  /system/lib/egl/libGLESv2_tegra.so
09-06 16:57:45.093: I/DEBUG(122):          bee1237c  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee12380  6624d1b8  
09-06 16:57:45.093: I/DEBUG(122):          bee12384  6624d1b8  
09-06 16:57:45.093: I/DEBUG(122):          ........  ........
09-06 16:57:45.093: I/DEBUG(122):     #02  bee123a8  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123ac  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123b0  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123b4  00000004  
09-06 16:57:45.093: I/DEBUG(122):          bee123b8  00000010  
09-06 16:57:45.093: I/DEBUG(122):          bee123bc  000003fc  
09-06 16:57:45.093: I/DEBUG(122):          bee123c0  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123c4  662b1f30  
09-06 16:57:45.093: I/DEBUG(122):          bee123c8  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123cc  00000005  
09-06 16:57:45.093: I/DEBUG(122):          bee123d0  00000006  
09-06 16:57:45.093: I/DEBUG(122):          bee123d4  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123d8  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123dc  00000000  
09-06 16:57:45.093: I/DEBUG(122):          bee123e0  00000004  
09-06 16:57:45.093: I/DEBUG(122):          bee123e4  6624d1b8  
09-06 16:57:45.093: I/DEBUG(122):          ........  ........
09-06 16:57:45.103: I/DEBUG(122): memory near r0:
09-06 16:57:45.103: I/DEBUG(122):     662b1f58 00000000 00000000 00000000 00000000  ................
09-06 16:57:45.103: I/DEBUG(122):     662b1f68 00000000 00000000 00000000 00000000  ................
09-06 16:57:45.103: I/DEBUG(122):     662b1f78 c48300e0 66321000 0000c000 00004000  ......2f.....@..
09-06 16:57:45.103: I/DEBUG(122):     662b1f88 00000048 00000100 00002088 00002040  H........ ..@ ..
09-06 16:57:45.103: I/DEBUG(122):     662b1f98 00002040 00000000 00000000 00000020  @ .......... ...
09-06 16:57:45.103: I/DEBUG(122): memory near r1:
09-06 16:57:45.103: I/DEBUG(122):     00002040 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002050 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002060 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002070 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002080 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122): memory near r5:
09-06 16:57:45.103: I/DEBUG(122):     66323040 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     66323050 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     66323060 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     66323070 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     66323080 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122): memory near r9:
09-06 16:57:45.103: I/DEBUG(122):     00002040 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002050 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002060 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002070 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122):     00002080 ffffffff ffffffff ffffffff ffffffff  ................
09-06 16:57:45.103: I/DEBUG(122): memory near sl:
09-06 16:57:45.103: I/DEBUG(122):     6630cec4 00000002 00000003 00000000 00000001  ................
09-06 16:57:45.103: I/DEBUG(122):     6630ced4 00000000 00000001 00fe0002 00dc0001  ................
09-06 16:57:45.103: I/DEBUG(122):     6630cee4 00000000 00008b52 00000101 00008b50  ....R.......P...
09-06 16:57:45.103: I/DEBUG(122):     6630cef4 0000ffff 00008b52 00000313 662ba630  ....R.......0.+f
09-06 16:57:45.103: I/DEBUG(122):     6630cf04 6630c410 6630d0d8 00000002 00000002  ..0f..0f........
09-06 16:57:45.103: I/DEBUG(122): memory near sp:
09-06 16:57:45.103: I/DEBUG(122):     bee122e8 00000000 6630cce8 00000000 00000024  ......0f....$...
09-06 16:57:45.103: I/DEBUG(122):     bee122f8 00000009 6622a7fd df0027ad 00000000  ......"f.'......
09-06 16:57:45.103: I/DEBUG(122):     bee12308 662b8470 6624d1b8 6630caf8 00000001  p.+f..$f..0f....
09-06 16:57:45.103: I/DEBUG(122):     bee12318 0000082d 662b21fc d5942160 6630ceec  -....!+f`!....0f
09-06 16:57:45.103: I/DEBUG(122):     bee12328 6624d1b8 00000010 00000008 00000008  ..$f............
09-06 16:57:45.103: I/DEBUG(122): code around pc:
09-06 16:57:45.103: I/DEBUG(122):     67643cf4 eaffffa3 e3540008 13a03000 02033001  ......T..0...0..
09-06 16:57:45.103: I/DEBUG(122):     67643d04 e3530000 01a0800b 0a000007 e1a0300b  ..S..........0..
09-06 16:57:45.103: I/DEBUG(122):     67643d14 e8960003 e2533001 e0866007 e8850003  .....0S..`......
09-06 16:57:45.103: I/DEBUG(122):     67643d24 e2855008 1afffff9 eaffff95 e1a00005  .P..............
09-06 16:57:45.103: I/DEBUG(122):     67643d34 e1a01006 e1a02004 e0855004 ebff2932  ..... ...P..2)..
09-06 16:57:45.103: I/DEBUG(122): code around lr:
09-06 16:57:45.103: I/DEBUG(122):     67643f80 e59de06c e59d002c e59d3068 e58dc004  l...,...h0......
09-06 16:57:45.103: I/DEBUG(122):     67643f90 e58d6008 e58d700c e58de010 ebfffedd  .`...p..........
09-06 16:57:45.103: I/DEBUG(122):     67643fa0 e59d2024 e3520002 e1a01000 0a000050  $ ....R.....P...
09-06 16:57:45.103: I/DEBUG(122):     67643fb0 e2817003 e3c76003 e59d301c e06a1004  .p...`...0....j.
09-06 16:57:45.103: I/DEBUG(122):     67643fc0 e2844008 e19370d1 e3570000 aaffff9c  .@...p....W.....
09-06 16:57:45.263: I/BootReceiver(358): Copying /data/tombstones/tombstone_07 to DropBox (SYSTEM_TOMBSTONE)
09-06 16:57:45.283: I/WindowState(358): WIN DEATH: Window{4181ebd0 com.example.myapp.video/com.example.myapp.video.MainActivity paused=false}
09-06 16:57:45.283: I/ActivityManager(358): Process com.example.myapp.video (pid 14294) has died.
09-06 16:57:45.283: W/ActivityManager(358): Force removing ActivityRecord{415c9a88 com.example.myapp.video/.MainActivity}: app died, no saved state
09-06 16:57:45.333: D/Zygote(124): Process 14294 terminated by signal (11) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:42:22.163

这种崩溃表明您的 JNI 代码中存在错误（如果有的话）或固件中存在错误。`SIGSEGV`即使您的代码中存在错误，正常的 SDK 工作也应该是不可能的。

如果这是在具有库存固件的 Nexus 设备上，或者在模拟器上，或者如果这可以在具有库存固件的多个设备上重现，请将问题发布到[http://b.android.com](http://b.android.com)。包括您在此处发布的所有内容，包括该`SIGSEGV`转储。

如果这是在带有 ROM 模块的设备上，请先联系 ROM 维护人员。

# jquery - jQuery选择棋子路径中的所有s

> ID：12309578
> 
> 赞同：3
> 
> 时间：2012-09-06T22:51:41.207
> 
> 标签：jquery, css-selectors

我有一个`table`8 `<tr>`s，每个 8 `<td>`s，每个`data-x`值和`data-y`值在 1 到 8 之间，即棋盘的 8x8 网格。

鉴于主教只能沿对角线移动并且我有起始和结束方块的坐标，那么找到`<td>`“路径”中所有元素的最有效方法是什么。

例子：

```
// coordinates representing a bishop move from d6 (4, 6) to h2 (8, 2)
var from = {
    x: 4,
    y: 6
},
to = {
    x: 8,
    y: 2
}

// code to select squares e5 (5,5), f4 (6,4) and g3 (7,3) 
```

我怎么能选择这些元素：

```
td[data-x="5"][data-y="5"],
td[data-x="6"][data-y="4"],
td[data-x="7"][data-y="3"] 
```

以最有效的方式，记住`from`and`to`是动态设置的？

有关信息，我编写了一个在其他地方使用的函数来检查主教是否从对角线开始移动：

```
function is_valid_bishop_move(from, to){
    var tan_theta = (to.y - from.y) / (to.x - from.x);
    if( tan_theta === 1 || tan_theta === -1 ){
        return true;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:00:36.770

我只能想到这样的事情：

```
var from = {
    x: 4,
    y: 6
},
to = {
    x: 8,
    y: 2
}

var delta_x = (to.x - from.x > 0 ? 1 : -1),
    delta_y = (to.y - from.y > 0 ? 1 : -1),
    dest_x = from.x + delta_x,
    dest_y = from.y + delta_y,
    selector = '';

while (dest_x != to.x) {
    selector += 'td[data-x="' + dest_x + '"][data-y="' + dest_y + '"],';
    dest_x += delta_x;
    dest_y += delta_y;
}

selector = selector.replace(/,$/, '');

console.log(selector);
​ 
```

[http://jsfiddle.net/zerkms/gtEwV/1/](http://jsfiddle.net/zerkms/gtEwV/1/)

# c# - 具有两个不同对象的 WP7 RootFrame

> ID：12309579
> 
> 赞同：1
> 
> 时间：2012-09-06T22:51:47.960
> 
> 标签：c#, windows-phone-7, silverlight-toolkit, agfx

我在我的 WP7 应用程序中使用 AGFX 框架。要使用它，我需要在我的`App.xaml.cs`

```
RootFrame = new PhoneApplicationFrameEx(); 
```

现在我想从 Silverlight Toolkit for WP7 添加页面转换。为了使它们工作，我**还**需要将我的 RootFrame 更改为特定元素

```
RootFrame = new Microsoft.Phone.Controls.TransitionFrame(); 
```

我应该如何解决这个问题？我不能同时使用...或者有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:53:45.337

您不可能将两者都分配给同一个`RootFrame`. 不过，这两个类的源代码是可用的，因此您可以创建一个继承自的框架并添加来自（或相反）`PhoneApplicationFrameEx`的逻辑。`TransitionFrame`

# c# - 如何在控制台应用程序中使用 WCF

> ID：12309580
> 
> 赞同：0
> 
> 时间：2012-09-06T22:52:00.597
> 
> 标签：c#, .net, wcf

我在解决方案中有一个控制台应用程序和 WCF 服务应用程序。我想从控制台应用程序调用 WCF 应用程序。我向控制台应用程序项目添加了服务引用，并尝试引用该服务，但未找到其命名空间。我正在使用 VS 2010。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:17:30.117

添加服务引用时，它与程序集引用不同。

当您可以添加服务引用时，您不一定知道服务的内部细节。在许多情况下，它不是您的服务，而是另一家公司的服务。服务引用仅定义合同。

因此，您不会使用您在服务端声明的名称空间或对象找到您的服务。相反，您的客户实际上是根据合同定义自己的客户端对象。添加引用时，您可以选择将其添加到的命名空间。

在 Visual Studio 中，单击解决方案资源管理器中的客户端项目并启用“显示所有文件”选项。然后您应该能够浏览服务参考并找到添加服务参考向导自动生成的隐藏文件。通过检查这些文件，您将看到它在哪个命名空间中声明。

![在此处输入图像描述](../Images/60dfb6bb541d4f1c5c5c1ed35f6e6f48.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:15:36.743

在 Web 服务消费方面，控制台应用程序与其他应用程序类型没有什么特别之处。

请参阅[如何使用 Web 服务](http://johnwsaunders3.wordpress.com/2009/05/17/how-to-consume-a-web-service/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T08:46:38.443

最近我也面临同样的问题。我做了以下步骤。1) 打开 Reference.cs 文件 2) 您的错误可能如下所示

```
Error   3   The type name 'ServiceReference1' does not exist in the type 'LongOperationClient.ServiceReference1.LongOperationClient' 
```

现在在 Reference.cs 文件（自动生成）中删除“NamespaceOfProject.serviceReference1”

3）保存并构建它对我有用。问候，赫曼特

# actionscript-3 - 我有一个加载 15fps AS2 动画的 60fps AS3 电影。为什么AS3电影变慢了？

> ID：12309584
> 
> 赞同：3
> 
> 时间：2012-09-06T22:52:25.647
> 
> 标签：actionscript-3, flash, frame-rate

我有一个播放动画的 15fps 基于 AS2 的在线系统。有成千上万的 AS2 swf 格式的外部加载动画。

我升级了主系统以使用 AS3 并以 60fps 运行，并相应地更新了它自己的嵌入式动画关键帧，使其间隔为原来的 4 倍，因此它们以 60fps 正常播放。

由于我无法更新从外部源加载的所有数千个单独的 15-fps AS2 动画，因此我必须按原样播放它们。实际上，我破解了字节流标头以强制它们作为 AS3 加载。它们可以正常加载和播放，但似乎主电影在播放时暂时降低了帧速率以匹配子电影。这导致它自己的动画显得非常缓慢（在其关键帧更新为以 60fps 观看后以 15fps 播放）。

起初我以为视频文件的处理速度变慢了，但现在我意识到较慢的子剪辑似乎导致播放器暂时降低其帧速率以匹配。任何人都可以确认这种暂时放缓或提出解决方法吗？

编辑：动画有“同步到流”的声音，我隐约记得读过一些例外，这会导致播放器在通常保持父加载器帧速率的地方放慢速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:22:01.793

Flash 不会间隔帧，并且您只有一个容器，因此 Flash 必须匹配所有帧速率。

解决方案有点困难：使用动作脚本控制帧速率。我向你解释这个想法：

*   您必须创建一个 Timer 和一个 Array，Timer 的间隔将是加载的文件帧速率。如果它是每秒 15 帧，那么以秒为单位的间隔将为 1/15。

*   您必须制作一个加载器来加载文件，停止它并将其推送到数组中。

*   每次计时器滴答作响时，它都会循环所有 Array 对象并`nextFrame`在每个对象上执行，因此您可以以相同的帧速率拥有大量文件，但与主要电影不同。

就是这样，这是内部帧速率控制器的 CPU 消耗较少的模型。请记住，此模型适用于具有相同帧速率的文件，如果您对其进行修改，则可以对不同的帧速率执行相同操作。

另一种解决方案是将闪存中的所有文件修改为具有相同的帧速率，根据您的文件数量，我认为这个解决方案是最好的。

# asp.net - 文本框上的验证错误，文件后面的代码中设置的文本

> ID：12309593
> 
> 赞同：1
> 
> 时间：2012-09-06T22:53:09.873
> 
> 标签：asp.net, validation, webforms, datatable

我在文本框上执行验证时遇到问题，该文本框在代码隐藏文件中设置了文本，这是根据数据表中的数据设置文本。问题是，当我加载页面并单击一个按钮时，验证会按原样运行，但是已使用文本设置的字段无法通过验证 - 他们不应该这样做。

前端代码为：

```
<asp:TextBox ID="tbName" runat="server" ></asp:TextBox>
<asp:RequiredFieldValidator ID="tbRequired" EnableClientScript="true" 
        Display="Dynamic" runat="server" ControlToValidate="tbName" ErrorMessage="Please enter a name"></asp:RequiredFieldValidator> 
```

后端代码为：

```
 tbName.Text = dtDetails.Rows[0]["Name"].ToString(); 
```

任何建议将不胜感激。

干杯

例如，当页面加载时设置了文本框（来自代码后面，因此不是用户输入），例如“John”（此文本在文本框内），当单击页面上的按钮时，将显示错误消息 Eg “请输入姓名”旁边的文本框，其中包含约翰。

必填字段中有文本，我不确定它为什么显示错误消息。设置带有代码的文本框文本而不是在页面上输入它会是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:18:12.233

发现问题在于从数据库返回的数据中有额外的空格，所以我使用了修复它的 Trim() 方法。

感谢那些回答的人。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:39:11.213

我需要更多信息，但可能是您忘记将文本字段的设置包含在 Page_Load() 的 if(!Page.IsPostBack) 中吗？

例如

```
if(!Page.IsPostBack)
{
    tbName.Text = dtDetails.Rows[0]["Name"].ToString();
} 
```

Page_Load() 在每个页面加载时运行，包括 PostBacks。如果您没有使用上述 if 语句将设置代码包装在 Page_Load() 中，则在调用 OnClick 事件之前，文本框将被 DataTable 中的值覆盖。如果 DataTable 中的值是空白的（或者如果 DataTable 没有重新初始化），那么 TextBox 将再次变为空白。

正如我所说，这有点猜测，因为没有太多关于数据或代码隐藏代码的信息。

# javascript - 没有 Jquery 的 ajax 中的文本链接

> ID：12309594
> 
> 赞同：3
> 
> 时间：2012-09-06T22:53:12.930
> 
> 标签：javascript, html, css, ajax

我有大量普通文本链接，我希望能够单击它们并发送 ajax 请求来获取页面，这样当我从服务器。因为我很固执，喜欢知道事情是如何艰难地完成的，所以我不想为 jquery 操心。我想用大锤的方式做到这一点。但是我找不到关于如何处理不使用 JQuery 的 ajax 链接的任何评论。我是一个巨大的新手，我很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:10:12.173

一种建议是将点击处理程序附加到链接元素并破坏默认行为，例如

```
<div id="links_container">
    <a href="http://example.com/page" class="ajax_link">Page</a>
    <!-- etc -->
</div> 
```

在 JavaScript 中..

```
// define the click handler
var ajaxLinkHandler = function(e) {

    e.preventDefault();// prevent browser from following link
    var link = e.target;
    var url = link.href;

    // I won't take the time to rehash standard JS AJAX here
};

// now attach the handler
var container = document.getElementById("links_container");
var ajaxLinks = container.getElementsByClassName("ajax_link");

for (var i=0; i < ajaxLinks.length; i++) {
    ajaxLinks[i].onclick = ajaxLinkHandler;
} 
```

我喜欢这种方法，因为您的 HTML 不会变得虚伪。

*   对于纯 JS 中的 AJAX，请参阅[MDN](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:13:06.057

您需要查找以下一些内容

*   [将事件附加](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)到`<a>`标签
*   [*当您使用事件*](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)[.preventDefault()](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)单击链接时如何防止链接进入页面[](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)
**   从元素中[选择属性（如 href）](http://www.javascriptkit.com/dhtmltutors/domattribute.shtml)*   如何在没有 jquery 的情况下使用[ajax](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)（相当简单）*   [如何使用innerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML?redirectlocale=en-US&redirectslug=DOM%3aelement.innerHTML)将返回的 html 添加到当前页面*

 *本质上，选择您的`<a>`标签，为其添加点击事件。防止点击事件触发链接的默认行为。让事件向您的链接指向的页面发出 AJAX 请求。将页面上某个元素的 innerHTML 设置为 AJAX 返回的内容。您可能还需要解析通过 ajax 返回的某些标签（`<head>`例如）。

就实际的 ajax 请求而言，它看起来像这样：

```
//Taken (with modifications) from https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started

/**
 * 'standard' way
 */
if (window.XMLHttpRequest) {
    httpRequest = new XMLHttpRequest();
}
/**
 * IE way
 */
else if (window.ActiveXObject) { // IE
    try {
        httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch (e) {
        try {
            httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (e) {}
    }
}

if (!httpRequest) {
    alert('Giving up :( Cannot create an XMLHTTP instance');
    return false;
}

function testFunction(data) {
    alert(data);
}

httpRequest.onreadystatechange = testFunction;
httpRequest.open('GET', url);
httpRequest.send(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T22:57:53.773

使用 javascript XMLHttpRequest 对象。 [http://www.w3schools.com/ajax/ajax_xmlfile.asp](http://www.w3schools.com/ajax/ajax_xmlfile.asp)*

# c# - 解析分层xml

> ID：12309598
> 
> 赞同：0
> 
> 时间：2012-09-06T22:54:01.283
> 
> 标签：c#, xml

我想知道如何解析这个 XML：

```
<MenuItems>
  <MenuItem Id="2" Name="Country">
    <MenuItem Id="2272" Name="Europe">
      <MenuItem Id="888" Name="Austria"/>
    </MenuItem>
    <MenuItem Id="2572" Name="Asia">
  <MenuItem Id="2572" Name="Japan"/>
    </MenuItem>
      </MenuItem>
      <MenuItem Id="3" Name="Car">
    <MenuItem Id="231" Name="Diesel">
      <MenuItem Id="387" Name="Toyota">
    <MenuItem Id="387" Name="Avensis"/>
      </MenuItem>
    </MenuItem>
  </MenuItem>
</MenuItems> 
```

并将以下内容写入控制台：

> 国家-欧洲-- 奥地利- 亚洲 -- 日本汽车 -柴油机 --丰田 汽车
> --Avensis

我事先不知道孩子在层次结构中的深度。

**我的代码：**

```
XElement doc = XElement.Parse(DataXml);
XElement MenuNode = doc.XPathSelectElement("/MenuItem");
var segmentNodes = MenuNode.XPathSelectElements("/");

foreach (XElement segmentNode in segmentNodes)
{
  var segmentAlignment = (string)segmentNode.Attribute("Name");
  Console.Writeline(segmentAlignment);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:45:20.927

这真的是两个问题：

1.  [如何解析 XML？](https://stackoverflow.com/questions/220867/how-to-deal-with-xml-in-c-sharp)

2.  [如何遍历列表的递归列表？](https://stackoverflow.com/questions/10878268/recursive-reading-of-listobject)

两者都是微不足道的，并且在其他地方得到了充分的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:10:34.443

像这样的东西：

```
using System.Xml.Linq;
using System.Xml.XPath;

. . . 

void PrintMenu(XElement menuElement, string prefix)
{
  string newPrefix = prefix + "-";
  foreach (XElement subMenuElement in menuElement.XPathSelectElements("MenuItem")) {
    Console.WriteLine(prefix+(string)subMenuElement.Attribute("Name"));
    PrintMenu(subMenuElement, newPrefix);
  }
}

. . . 

XElement doc = XElement.Parse(DataXml); 
PrintMenu(doc, String.Empty); 
```

# c - 带有指向 const 数据的目标指针的 memcpy

> ID：12309600
> 
> 赞同：5
> 
> 时间：2012-09-06T22:54:26.820
> 
> 标签：c, memory, pointers

我一直认为像`const int *a`手段这样的语句`a`是指向数据的`int`指针，`const`因此不应该能够修改它指向的值。事实上，如果你这样做`const int a [] = {1,2,3}`然后发出`a[0] = 10`，你会得到编译器错误。

然而，令我惊讶的是，以下编译没有任何警告并且运行良好。

```
#include <stdio.h>
#include <string.h> 

int main (){

    const int a [] = {1, 1, 1};
    const int b [] = {2, 2, 2};

    memcpy((void*) &a[0], (const void*)&b[0], 3*sizeof(int));

    int i;
    for (i=0; i<3; i++) printf("%d\n",a[i]);

    return 0;
} 
```

为什么允许这样做？这是演员阵容的原因吗？当我`memcpy(&a[0], (const void*)&b[0], 3*sizeof(int));`编译器立即生成以下警告时：

```
cpy.c: In function ‘main’:
cpy.c:9:3: warning: passing argument 1 of ‘memcpy’ discards ‘const’ qualifier from pointer target type [enabled by default]
/usr/include/string.h:44:14: note: expected ‘void * __restrict__’ but argument is of type ‘const int *’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T23:03:16.113

您告诉编译器在执行强制转换时忽略初始声明。它听了。但是，这并不意味着您的程序是正确的。修改最初声明的内容会`const`导致未定义的行为（例如，编译器可以自由地将该数据存储在只读存储器中）。

C没有牵你的手。如果您选择做一些危险的事情，那么它会让您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T23:00:29.873

强制转换为`void*`删除与`int`- 通过丢弃类型的关联，您丢弃了类型装饰器，例如`const`

**编辑**

从下面的讨论中，我想明确指出，重要的部分不是**你**投射的内容（`void*`在 OQ 中），而是你投射的事实**-**这意味着丢弃你的原始类型及其装饰器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T23:04:38.917

强制转换通常会抑制警告。有一个 gcc 选项，`-Wcast-qual`它会警告您丢失`const`或`volatile`限定符的演员表。

程序成功运行是因为用于存储数组的内存实际上不是只读的，因为它们是在堆栈上分配的。这是一个实现细节，从技术上讲，如果实现非常严格，您的代码可能会崩溃。

声明`a`并`b`作为全局变量，它崩溃的可能性更大（仍然不能保证）

# linux - Bash脚本搜索文件并替换是否使用通配符在文件内找到字符串

> ID：12309601
> 
> 赞同：1
> 
> 时间：2012-09-06T22:54:37.207
> 
> 标签：linux, bash, shell, unix

我正在开发一个 bash 脚本，该脚本将使用通配符路径搜索特定文件，一旦找到该文件名，它就会在文件中搜索特定术语，然后替换它。

这是我已经放在一起的内容：

```
#!/bin/sh

PATH=${1}
FILENAME="$2"
SEARCHFOR="$3"

/usr/bin/clear
echo "Searching $PATH"
echo "For the file $FILENAME"
echo "With the string $SEARCHFOR"
echo "=========================="
echo "       RESULTS            "
echo "=========================="
/usr/bin/find $PATH -type f -name "$FILENAME" | /usr/bin/xargs /bin/grep -l "$SEARCHFOR" 
```

我还没有添加替换，但我想我会使用 SED 而不是 grep 来做到这一点，只是使用 grep 进行测试。

使用上面的代码，我必须为任何类型的通配符路径使用引号。有没有解决的办法？

```
./script '/home/*/public_html' php.ini module.so 
```

我在想也许可以使用参数，但必须有另一种方法来做到这一点。

我的最终目标是拥有一个 bash 脚本，我可以将通配符路径或文件名传递给它，它会搜索该文件，一旦它找到它搜索特定术语的文件并在找到时替换它。

听起来很简单，应该是这样，但我正把头撞在桌子上，因为我已经很久没有搞砸 bash 了……aaggghh 帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:27:53.660

```
find $path -name \*$filenamepattern\* -exec sed -i.bak 's/find/replace/g' {} ';' 
```

*   sed -i 将在文件中查找和替换*并*保存回文件
*   如果您不想备份文件，请删除 .bak 部分
*   利用 find 的 -exec 选项来避免稍微麻烦的 xargs

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T05:35:46.843

首先，将变量名以大写形式声明是一个糟糕、糟糕、非常糟糕的主意，特别是`PATH`因为您实际上会重新设置实际的`PATH`环境变量（只需`echo $PATH`在提示中执行 a ，您就会明白我的意思，这可能是您必须使用`/usr/bin/clear`而不是`clear`因为 env 变量`PATH`被修改的原因之一）。因此，始终建议使用小写变量，例如`path`.

* * *

您面临的问题是子外壳内的`glob`扩展。`*`当你使用

```
./script '/home/*/public_html' php.ini module.so 
```

不会在`*`提示符（父 shell）处展开，而是在脚本的子 shell 内展开。但是当你使用

```
./script /home/*/public_html php.ini module.so 
```

在`*`父shell中扩展（这将导致shell指向一个随机路径），然后在程序子shell中传递-

所以让我们说，有`/home`目录`/user`，，做会带你到按字母顺序排列的目录，即。因此，在父 shell 中没有引号将始终指向哪个不是我们想要的！`/apps``/data``$ cd *``/apps``/home/*``/home/apps`

对此的直接补救措施如下

```
$set -o noglob   #unset glob expansion
$./script /home/*/public_html php.ini module.so    #your command without quotes & wildcard */
$set +o noglob   #re-set glob expansion back 
```

或者

```
$set -o noglob;./script /home/*/public_html php.ini module.so;set +o noglob 
```

尝试`$echo *`然后`$set -o noglob;echo *;set +o noglob`举个简单的例子。

**警告**- 如果您失败或忘记`noglob`回退 ( `set +o noglob`)，shell 会将字符视为`*`和`?`普通字符一样，并且不会扩展它们，这可能会导致不良结果和混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:03:57.563

只需重新排序您的参数并将您要搜索的目录列表放在最后。所以：

```
#!/bin/sh

FILENAME="${1?No filename specified}"
SEARCHFOR="${2?No target string given}"
shift; shift;
SEARCHPATH="$@" 
```

然后您应该能够保持其余部分不变（除了将名称 PATH 更改为 SEARCHPATH，因为更改 PATH 是一个非常糟糕的主意）并将其称为：

```
$ ./script php.ini module.so /home/*/public_html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:34:23.737

这将解决将通配符传递给 bash 脚本的问题，但请遵守第一个要点。

```
#!/bin/bash -f

directory=$1
filename=$2
searchfor=$3
replacement=$4

sedpattern=s/$searchfor/$replacement/g

find $directory -name $filename -exec sed -i.bak $sedpattern {} ';' 
```

*   在命令行上调用此脚本时很重要，您必须反斜杠转义您的 glob；
    *   `% ./thisscript . \*.csv oldword newword`
*   bash -f 选项在正确的时间关闭 globbing - 当第一次调用 bash subshel​​l 时，意味着在解析参数之前；
*   在所有匹配的文件上查找命令 execs
*   将搜索替换模式传递给包含脚本中其他已定义变量的 sed 的最简单方法是首先将模式本身放在变量中
*   -i.bak 选项使用替换创建一个新文件，并备份原始文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T06:14:47.593

```
find `filepath` -name `filename`|xargs sed 's/find/replace/' 
```

对我来说，我会使用 find 和 sed 来完成工作。

# c# - 使用 MVVM Light 从 Windows Phone 7 中的后台代理访问我的模型

> ID：12309607
> 
> 赞同：0
> 
> 时间：2012-09-06T22:55:28.830
> 
> 标签：c#, windows-phone-7, mvvm-light

我有一个正在处理的 WP7（Windows Phone 7）项目，我使用了 MVVM 方法。我现在想添加一个后台代理来定期检查来自远程服务器的新数据。在我的模型中，我有一个需要从后台代理调用的方法。问题是我无论如何都没有在后台代理中获得对模型的引用。我正在使用 MVVM 灯光项目。有没有人对如何解决这个问题有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:10:38.180

您可以将模型对象分离到单独的项目中

```
- Project.Model
    ModelClass
    ModelClass2
- Project.Background
    Agent
- Project.Application
    App
    MainPage 
```

所以在这个例子中，你的应用程序和后台项目将引用模型项目。

# python - 使用 django 将数据预加载到backbone.js 集合中

> ID：12309611
> 
> 赞同：0
> 
> 时间：2012-09-06T22:56:04.043
> 
> 标签：python, django, backbone.js

我对 Backbone.js 很陌生（但对 Django 不是很熟悉）。我已经设置了一个简单的应用程序来使用backbone.js 和Django（通过djangorestframework），但我似乎无法将服务器数据加载到集合中。

这是views.py

```
from djangorestframework.mixins import ResponseMixin
from djangorestframework.renderers import DEFAULT_RENDERERS
from djangorestframework.compat import View
from djangorestframework.response import Response

class WeekView(ResponseMixin, View):
    """Gets and returns specific week, or current week if no week data provided."""
    renderers = DEFAULT_RENDERERS

    def get(self, request):
        response = Response(200, [{'day': x} for x in range(7)])
        return self.render(response) 
```

这是backbone.js 代码：

```
$(document).ready(function() {
    /* Backbone scripts */
    var Day = Backbone.Model.extend({
    });

    var Week = Backbone.Collection.extend({
        model: Day,
        url: '/week'
    });

    var days = new Week;
    days.fetch();
    days.each(function(day) {
        console.log(day.get("day"));
    });
}); 
```

控制台什么也不返回。

如果我记录 days 变量本身，我会得到如下信息：

```
> d
    _byCid: Object
    _byId: Object
    length: 7
    models: Array[7]
    __proto__: x 
```

视图似乎没问题（调用 /week 返回一个格式良好的 {'day': number} 类型的字典列表。

我确信将简单数据预加载到集合中的解决方案非常简单，但我很难过......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:48:43.730

数据是异步获取的，因此您需要响应事件（如“重置”）或使用 jquery 延迟功能（假设 jquery 用于请求）：

```
days.on("reset", function(days){
   console.log(days)l
});
days.fetch(); 
```

或者

```
$.when(days.fetch()).done(function(days){
  console.log(days);
}).error(function(){
  console.error("oops");
}); 
```

# layout - 是否有任何用于制作平铺列表的 jQuery 移动插件？

> ID：12309613
> 
> 赞同：1
> 
> 时间：2012-09-06T22:56:31.953
> 
> 标签：layout, jquery-mobile

我想制作一个像这样的列表[http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-search.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-search.html)，但我不想使用标准的垂直列表，而是想使用基于图块的列表。

你知道有什么插件可以做到这一点吗？如果你不这样做，有没有一种方法你认为你可以在不破坏 jquery mobile 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T00:20:04.360

你可以用一点 CSS 做到这一点：

```
.custom-ul .ui-li {
    width  : 200px;
    height : 200px;
    float  : left;
}
/*jQuery Mobile adds a `.ui-btn-inner` element that also has the `.ul-li` class, so it needs to be reset after the changes made above*/
.custom-ul .ui-li .ui-btn-inner {
    width : 100%;
} 
```

这会为列表项设置一个特定的高度/宽度，然后将它们浮动以便它们以网格样式堆叠，然后它会重置列表项的内部 div。请注意`.custom-ul`选择器的部分，这使得您仍然可以拥有标准列表，但是当您想要“网格样式”列表时，您可以将`.custom-ul`类添加到`<ul data-role="listview">`元素中。

这是一个演示： http: [//jsfiddle.net/ykEtD/](http://jsfiddle.net/ykEtD/)（相同的列表输出两次，第一个有`.custom-ul`类）

请注意，您可能需要调整其他 CSS 以获得您想要的内容，但这对您来说是一个很好的起点。

# python - 等待 twitter 网站 flask 和 tweepy 的响应

> ID：12309615
> 
> 赞同：1
> 
> 时间：2012-09-06T22:56:47.647
> 
> 标签：python, flask, tweepy

如果我有这样的事情

```
auth=tweepy.OAuthHandler(consumerkey,consumer_secret)
redirect_url = auth.get_authorization_url()
final_url='<a href='+redirect_url+'> Click here to verify</a>'

print redirect_url
return flask.render_template("index.html",url=final_url) 
```

在我运行之前我怎么能等待 twitter 网站的响应

```
auth.get_access_token(verifier) #That is, once we get 'verifier' from the user via an input
tweet=tweepy.API(auth)
tweet.update_status(text) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:40:02.140

您是否尝试过查看烧瓶中的请求上下文？它说“标有 after_request() 的函数在请求后调用并传递将发送给客户端的响应。它们必须返回该响应对象或不同的对象。但是，如果出现异常，则不能保证执行它们提出，这就是标有 teardown_request() 的函数进来的地方”。

# java - 打开的文件太多

> ID：12309620
> 
> 赞同：2
> 
> 时间：2012-09-06T22:57:33.260
> 
> 标签：java, unix

突然之间，我们在系统中遇到了以下错误。原因：java.io.FileNotFoundException: /web/wasapps/EventLog.log (打开的文件太多)

我假设有一些文件没有关闭，但我无法找到导致泄漏的 java 文件。请帮助我。

无限设置如下：

```
time(seconds)        unlimited
file(blocks)         unlimited
data(kbytes)         unlimited
stack(kbytes)        unlimited
memory(kbytes)       32768
coredump(blocks)     unlimited
nofiles(descriptors) 2000
threads(per process) unlimited
processes(per user)  unlimited 
```

堆栈跟踪 ：

SystemErr R 引起：java.io.FileNotFoundException：/web/wasapps/EventLog.log（打开的文件太多）

```
at java.io.FileOutputStream.openAppend(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:203)
at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
at com.abc.ci.common.LogManager.writeIntoFile(Unknown Source)
at com.abc.ci.common.LogManager.writeLogFile(Unknown Source)
at com.abc.ci.common.LogManager.handleEvent(Unknown Source)
at com.abc.ci.RANdc.common.CIFAdapter.postRequestForHashMap(Unknown Source)
at com.abc.ci.RANdc.UserInqDataTranslator.translate(Unknown Source)
at com.abc.ci.RANdc.UserInqProcessor.UserInq(UserInqProcessor.java:187)
at com.abc.ci.RANdc.srvprov.UserInqXYHostSrvProv.executeService(Unknown Source)
at com.abc.fiapi.common.XYHostServiceExecutor.execute(Unknown Source)
at com.abc.ci.RAN.ejb.RANModuleEJBBean.executeService(Unknown Source)
at com.abc.ci.srvprov.FRANModuleBeanLookUpServiceProvider.executeService(Unknown Source)
at com.abc.ci.abc.app.abcServiceExecutor.executeService(Unknown Source)
at com.abc.ci.abc.app.abcMessageExecutor.executeService(Unknown Source)
at com.abc.ci.abc.app.abcMessageExecutor.executeMessage(Unknown Source)
at com.abc.ci.abc.app.abcSyncMessageExecutor.processMessage(Unknown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:25:20.157

jstack ( [http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html) ) 也可以帮助确定问题所在。`lsof`将为您提供 pid，您可以运行`jstack < pid >`以转储所有线程的堆栈跟踪。假设您在某个循环中打开文件，您可能会捕获一个堆栈，该堆栈显示如果您使用几个 jstacks 的位置。

另一种解决方案是使用 JMockit ( [http://jmockit.googlecode.com](http://jmockit.googlecode.com) ) 之类的东西来模拟 FileOutputStream 构造函数，以便在打开文件时转储​​堆栈。只需将此代码添加到您的主要方法中：

```
final String TARGET_FILE = "/web/wasapps/EventLog.log";
new MockUp<FileOutputStream>()
{
    @Mock
    public $init(Invocation i, String name)
    {
        if (name.equals(TARGET_FILE))
        {
            new Exception().printStackTrace();
        }

        i.proceed();
    }
}; 
```

# jquery - jQuery .animate() 在执行前无意中等待了几秒钟

> ID：12309624
> 
> 赞同：1
> 
> 时间：2012-09-06T22:58:05.927
> 
> 标签：jquery, jquery-animate, delay

我在`.animate`整个页面上都使用 jQuery，一切都非常好，除了这一行，它在用户单击消息后向用户隐藏了“目标已完成”消息。我包括了整个函数，尽管奥秘在于动画命令的链式行。我正在使用`.animate()`优雅的东西，然后在对象不在用户视线范围内时快速而肮脏`.css()`……似乎无论我如何调整，这个 div 都不会动画，直到经过长时间的延迟。 ..

我已经尝试过的东西：

1) 将 jQuery 命令链分离为一次一个：--> 结果：所有动画同时执行，除了第一个动画在执行前 STILL 等待 8 秒

2) 与编写的代码完全相同，但在页面上的其他地方切换随机 div besdies "#kbm" 这显然是我真正想要隐藏的 --> 结果：新选择的 div 行为正常，所有动画都发生在以正确的顺序及时

3) 重新排列 HTML 中元素的顺序

4）尝试`position: relative`而不是`absolute`

5 ）`.css`从脚本中删除命令并仅`.animate`用于所有内容

JAVASCRIPT：

```
function loadnextpage(response)
{

    word = response["word"];
    imgarray = response["imgarray"];
    loadgame();

    $("#kbm").animate({"top": "-340"},500,function(){
        $("#kbm").css("top","-1000px");
        $(".key").animate({"left": "0px"},1000,function(){
            $("#keyboard").css("overflow", "visible");
        });
    });

} 
```

HTML：

```
<body>
<div id="pagec">

    <div id="mainc">
        <div id="wordpic"><div id="wordpicbg" class="bg"></div></div>
        <div id="wordblanks"><div id="wordblankbg" class="bg"></div></div>
        <div id="keyboard">
            <div id="keyboardbg" class="bg"></div>
            <div id="kbm"><img src="i/medal.png"><img src="i/arrow.png" id="arrow" onclick="loadnext()"></div>
        </div>
    </div>
</div>
</body> 
```

CSS：

```
#kbm
{
    display: inline-block;
    position: absolute;
    left: 340px;
    top: -1000px;
    width: 500px;
    height: 340px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:17:28.970

.stop() 阻止了这种行为，因为动画队列在移动到下一个动画之前被清除。动画时间和内置延迟（使用 .delay()）可以总结为动画提示的延迟，尤其是在为许多元素设置动画时。

在此处阅读更多信息：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)（关于队列的部分）。

# jqgrid - 在 jqGrid 中搜索

> ID：12309625
> 
> 赞同：1
> 
> 时间：2012-09-06T22:58:13.340
> 
> 标签：jqgrid, jqgrid-formatter, jqgrid-inlinenav

我是 jqGrid 的初学者，我编写这段代码用于在 ASP.NET 中构建 jqGrid

```
var grid = $('#list');
grid.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'CostTypes', Action: 'Fill' },
    ajaxGridOptions: { cache: false },
    direction: "rtl",
    datatype: 'json',
    height: 490,
    colNames: ['CostId', 'CostNo', 'CostName', 'Remark '],
    colModel: [
        { name: 'COST_ID', width: 100, sortable: true, search:true, editable: false,
            hidden: true, key: true, index: 'COST_ID' },
        { name: 'COST_NO', width: 100, sortable: true, editable: true },
        { name: 'COST_NAME', width: 350, sortable: true, editable: true },
        { name: 'REMARK', width: 300, sortable: true, editable: true }
    ],
    gridview: true,
    rowNum: 30,
    rowList: [30, 60, 90],
    pager: '#pager',
    sortname: 'COST_ID',
    viewrecords: true,
    rownumbers: true
});
grid.jqGrid('navGrid', '#pager', { add: false, edit: false, del: true, search: true },
    {},
    {},
    { url: "JQGridHandler.ashx?ActionPage=CostTypes&Action=Delete",
        reloadAfterSubmit: false },
    { multipleSearch: true}); 
```

当单击搜索图标并在输入文本示例时显示搜索框时`costNo=1`jqGrid 不过滤我认为此操作无效，请帮助我在 jqGrid 中进行隐式搜索 谢谢大家

编辑 01：当我添加`loadonce: true`搜索工作但删除此选项时搜索不起作用，请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:37:11.337

如果您使用`loadonce: true`的数据将在网格中加载**一次**。之后，`datatype`将更改为，`"local"`并且所有操作，如重新加载、排序、搜索（过滤）都将在*本地*实现，无需与服务器通信。

如果用户开始搜索网格将被重新加载。如果你使用`url: 'jQGridHandler.ashx', datatype: 'json'`那么新的请求将被发送到 URL `jQGridHandler.ashx`。一些附加参数通知服务器应该过滤数据，该`_search`参数将设置为`true`。因为您使用`multipleSearch: true`有关搜索过滤器的其余信息将在另一个参数中发送：`filters`. 它是 JSON 格式的字符串。格式在[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)中描述。因此，服务器必须对参数进行解码`filters`并过滤网格数据（通常根据参数的值构造 SQL 语句的`WHERE`一部分）。`SELECT``filters`

在[答案中](https://stackoverflow.com/a/10871428/315935)，您将找到代码示例并可以下载[演示项目](http://www.ok-soft-gmbh.com/jqGrid/jqGridASHX.zip)。

# selenium - 如何让 Selenium 测试脚本一直有效？

> ID：12309626
> 
> 赞同：1
> 
> 时间：2012-09-06T22:58:16.847
> 
> 标签：selenium, webdriver, selenium-webdriver

**更新 2**

我正在使用 C# 和名为 GridView 的控件在.Net 上工作......所以 gridview 控件呈现并吐出这个 html 如下所示：这只是一个小的示例 html 源代码，`TR`我有 100 多个......

```
<tr class="item">
<td align="center">
<td align="center" style="width:15px;"/>
<td>John John</td>
<td/>
<td>Friendship</td>
<td/>
<td>
<td>9/7/2012 6:28:29 PM</td>
</tr> 
```

所以，我正在尝试查找是否`John John`存在，这就是我最终使用 XPATH 的方式

```
 int pageCount = 100;
        bool assertFlag = false;
        for (int i = 0; i < pageCount; i++) 
        {
            try
            {
                string _Id = String.Format("//*[@id='ctl00_ContentPlaceHolder1_AddeCardControl1_gridview_control']/tbody/tr[{0}]/td[3]", i);
                string _txt = GetText(By.XPath(_Id));

                if (_txt == "some text comparing here")
                {
                    //matched
                    assertFlag = true;
                    break;
                }
            }
            catch (Exception e)
            {
                //
            }
        } 
```

你们觉得怎么样？还是我犯了可怕的错误？

PS：没有 ID 或 CSS 选择器我可以这样做，所以除了使用 XPATH 之外我没有其他选择

**结束更新 2**

**更新**

我正在使用带有 C# 的 Selenium WebDriver 2，我正在使用 IE 8 和 FF

**结束更新**

我仍然不确定是什么导致这个错误被抛出，所以我有脚本并且它可以工作，当我第二次运行它失败并收到以下消息......如果我继续运行不止一次，那么它有时会工作，有时不是……我该怎么办？是什么导致了这个错误？有什么见解吗？

有时我会收到此错误消息：

```
Element is no longer valid 
```

有时这样：

```
Unable to find element with xpath == //*[@id='ctl00_ctl00_ctl00_LeftNavigation_LeftNavigation_LeftNavigationControl1_rptLeftNav_ctl14_lnkText'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:33:25.810

**对于第一种情况（元素不再有效）：**
      当您长时间使用元素对象时，它会给您一个错误，例如“元素不再附加到 DOM” 这不是一致性。解决方案是您必须再次找到该元素。
**第二（无法使用 xpath == //*[@id=..... 找到元素）：**
      在 Xpath 中，您提到了 * 而不是特定的标签。在这些情况下，当您有具有相同 ID 的不同标签时，它将无法选择哪一个。因此，请提及正确的标签名称。您可以在 Firefox 中使用 FirePath 验证 xpath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:27:23.097

我想你的最后一个问题；[使用 Selenium Webdriver 获得超时](https://stackoverflow.com/questions/12217113/getting-timeout-using-selenium-webdriver)有很多好东西。这与您提出的问题有关。如果使用一种类型的定位器找不到元素，请尝试另一种类型。

我也忍不住注意到您正在为 IE 使用 xpath 定位器。有一个非常好的网络研讨会说明为什么由于速度问题你永远不应该在 IE（和一般情况下）中使用 xpath，这可能会导致你当前的一些问题。

这是链接：[http](http://sauceio.com/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/) ://sauceio.com/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/ 。该网络研讨会探讨了为什么 CSS 优于 xpath，尤其是 IE。除了 CSS 之外，您遇到的错误可能是由任何事情引起的，从您的盒子设置到您使用的浏览器，网络自动化毕竟不是一门精确的科学。地狱，你也可能有一个错误......这不是你首先要测试的吗？

*编辑*

所以你的更新对我来说有点奇怪，因为你完全从在具有单独 id 的东西下寻找多个元素转变为在标签中寻找元素。关于您当前的更新，我建议只使用 css 定位器说

```
driver.FindElement(By.CssSelector("td:contains('John John')")) 
```

如果找不到您的标签，您无疑会被告知。正如我之前提到的，css 定位器完成与 xpath 相同的事情，但它们在 IE 中更快并且工作得更好。是的，它们并非 100% 的时间都在工作。也许 100 次中有 5 次需要在 css 上使用 xpath，但总体 css 更好。如果您仍然不确定如何使用它们，请阅读相关链接，它们写得很好，对我很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:55:06.383

坦率地说，我不喜欢您在 xPath 中提到的 id 类型。尝试使用 css 选择器定位所需的元素。并验证您是否已在 firepath（firebug 插件）中正确找到它。在运行 seleniumt 测试套件时，我总是避免使用诸如 `<span id="j_idt12:j_idt13">` cause 之类的 ID，它们可能会有所不同。所以更好的方法是使用元素的整个路径将我们的元素直接指向 DOM。使用这种方法可以避免元素“不再有效”或“无法定位”这样的不一致

# php - 使用 PHP 进行漂亮的 HTML 格式/输出

> ID：12309630
> 
> 赞同：1
> 
> 时间：2012-09-06T22:59:17.050
> 
> 标签：php, html, formatting

我有一个字符串，其中包含通过所见即所得编辑器格式化的数据。但是生成的 HTML 代码的格式不是很好。我想要像“the_content()”wordpress 函数这样的东西，它提供这样的字符串：

```
Lorem ipsum dolor sit amet, <strong>not properly closed

Another paragraph without p, lorem ipsum dolor m nonummy. 
```

对于这样的事情：

```
<p>Lorem ipsum dolor sit amet, <strong>not properly closed</strong></p>

<p>Another paragraph without p, lorem ipsum dolor m nonummy.</p> 
```

我仰望 wordpress 核心，但没有取得多大成功（找到了 force_balance_tags() 函数，但似乎不是我想要的）。

所以...你们知道一些 php 类/库/代码片段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:05:06.520

你可以试试[HTML Tidy](http://www.php.net/manual/en/book.tidy.php)。

也看看这个问题：[整理 PHP 和 HTML 代码？](https://stackoverflow.com/questions/3585790/tidying-php-and-html-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:09:50.370

Wordpress 有一个函数[`wpautop`](http://codex.wordpress.org/Function_Reference/wpautop)，可以将双换行符转换为段落元素。

我不建议使用库来纠正用户错误格式化的 HTML。您将被迫猜测正确的解释。（就像过去的旧浏览器一样，这并不完全成功）。

例如，代码中的结束`</strong>`标记应该放在哪里？没人知道！

我宁愿寻找（或创建）一种方法来**检查**无效的 HTML，然后通知用户，让他们更正它。

*   [检查有效性的 PHP 函数（回答 SO 问题）](https://stackoverflow.com/questions/3167074/which-function-in-php-validate-if-the-string-is-valid-html)
*   使用[W3C 验证器 API](http://validator.w3.org/docs/api.html)

# ruby - 在 ruby 中将字符串转换为 UTF-8

> ID：12309631
> 
> 赞同：0
> 
> 时间：2012-09-06T22:59:23.120
> 
> 标签：ruby, character-encoding

我得到这个输出：

> 不要\u0092t

unicode 字符 92 是正确的字符，但为什么不显示？正在从文件中读取此字符串。该文件的 chardet 输出为：

> ISO-8859-2 有信心 0.795656700854

这就是我打开文件的方式：

```
File.open('file.txt', 'r:ISO-8859-2') 
```

然后，使用给定的文件行，我将其输出如下：

```
puts line.encode('UTF-8') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:20:48.967

将文件打开语句更改为使用：'r:windows-1252:utf-8'。我猜 chardet 只是没有正确检测到编码。

# python - Maya / Python：用户在文本字段中按下回车后如何关闭自定义 UI 窗口？

> ID：12309634
> 
> 赞同：0
> 
> 时间：2012-09-06T22:59:58.287
> 
> 标签：python, window, maya

我需要知道用户按下回车后如何正确关闭此窗口。

`txtA = cmds.textField(w = 345, h = 28, text = item, ec = renFc, aie = True)`

按下回车后调用此函数：`def ren():`

我尝试放入`cmds.deleteUI(renUI)`refFc 函数，但这使它崩溃。

这是完整的代码：

```
import maya.cmds as cmds

'''
Rename popup box for outliner - copy/paste this script into a hotkey field in the hotkey editor
'''

class ReUI():
    def __init__(self):

        renUI = 'renUI'

        if cmds.window(renUI, exists = True):
            cmds.deleteUI(renUI)

        renUI = cmds.window(renUI, t = 'JT Rename UI', sizeable = True, tb = True, mnb = False, mxb = False, menuBar = True, tlb = False, nm = 5)
        form = cmds.formLayout()
        rowA = cmds.rowColumnLayout(w = 350, h = 30)

        item = cmds.ls(os = True)[0]

        def ren():
            def renFc(self):
                print 'yes'
                tval = cmds.textField(txtA, text = True, q = True)
                cmds.rename(item, tval)

            txtA = cmds.textField(w = 345, h = 28, text = item, ec = renFc, aie = True)

        ren()

        cmds.showWindow(renUI)

r = ReUI() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:54:59.477

You're running into a teensy little bug I'm afraid.. for more details check out the thread here: [http://forums.cgsociety.org/archive/index.php/t-1000345.html](http://forums.cgsociety.org/archive/index.php/t-1000345.html) .

Just incase the link dies - basically, in 2011/2012 it looks like there's an issue where hitting enter and invoking deleteUI deletes the object before Maya/QT have finished cleanup, and thus giving you a segfault type situation.

There's a sort of a workaround for it though, you want to import the `maya.utils` package and use the `executeDeferred()` command (see: [http://download.autodesk.com/global/docs/maya2013/en_us/index.html?url=files/Python_Python_in_Maya.htm,topicNumber=d30e725143](http://download.autodesk.com/global/docs/maya2013/en_us/index.html?url=files/Python_Python_in_Maya.htm,topicNumber=d30e725143) ) around your deleteUI call. Check in 2013 to see if this is fixed perhaps?

I've just hacked your code a little to insert the relevant line to demo it works, but it's heavily dependent on that string 'renUI'

(oh, and that function ren() isn't reaaaly helping.. you can get rid of it and unindent that block.)

```
import maya.utils # you need this line!
class ReUI():
    def __init__(self):

        renUI = 'renUI'

        if cmds.window(renUI, exists = True):
            cmds.deleteUI(renUI)

        renUI = cmds.window(renUI, t = 'JT Rename UI', sizeable = True, tb = True, mnb = False, mxb = False, menuBar = True, tlb = False, nm = 5)
        form = cmds.formLayout()
        rowA = cmds.rowColumnLayout(w = 350, h = 30)

        item = cmds.ls(os = True)[0]

        def ren():
            def renFc(self):
                print 'yes'
                tval = cmds.textField(txtA, text = True, q = True)
                cmds.rename(item, tval)
                maya.utils.executeDeferred("cmds.deleteUI('renUI')") # and this one!

            txtA = cmds.textField(w = 345, h = 28, text = item, ec = renFc, aie = True)

        ren()

        cmds.showWindow(renUI)

r = ReUI() 
```

# matching - scapy中的数据包匹配行为

> ID：12309637
> 
> 赞同：5
> 
> 时间：2012-09-06T23:00:15.837
> 
> 标签：matching, packet, scapy

**背景：**

我正在使用 scapy 测试一个网络设备，该设备可以通过交换源/目标 MAC、IP 地址和第 4 层端口号来选择性地环回数据包。可以为`layer_2_only`、`layers_2_and_3`、选择交换`layers_2_3_and_4`。我在服务器上运行 scapy，将数据包传输到设备并验证发回的数据包是否根据设置交换了适当的源/目标字段。

**问题：**

发送数据包和接收匹配的 scapy`srploop()`方法适用于 PING 和 ARP 等消息类型。我发现如果我传输一个 UDP 数据包并且源/目标端口没有被环回设备反转，那么 scapy 不会将环回数据包视为匹配项。当环回设备反转端口号时，数据包被检测为匹配。

**问题：**

1.  有没有办法覆盖或以其他方式影响 scapy 的数据包匹配逻辑？例如，能够在第 4 层禁用匹配会很有用。我查看了文档，没有发现任何表明这是可能的。

2.  有没有另一种方法可以在 scapy 中实现这一点。我已经尝试过 using `send()`，`sniff()`但我没有成功使用该方法捕获回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:14:14.730

对于问题的第二部分，您可能想尝试我在[Scapy 中提到的方法在使用多个线程时无法嗅探数据包](https://stackoverflow.com/questions/16279661/scapy-fails-to-sniff-packets-when-using-multiple-threads)。

基本上，在单独的线程上运行嗅探器并将返回的流量过滤到队列中，然后可以从正在执行`send()`. 因此，您可以同时进行发送和接收（在两个线程上）。

~~唯一的问题是，在我的特定设置中，我在嗅探器中遇到了一些奇怪的行为，在单独的线程上运行时它无法应用过滤器。希望你会有更好的运气。~~

**更新**：嗅探器的问题已解决（请参阅上面链接的我的问题）。

希望这可以帮助！

# jquery - 如何在输入中禁用发送和显示消息以完成

> ID：12309641
> 
> 赞同：0
> 
> 时间：2012-09-06T23:00:36.347
> 
> 标签：jquery, forms

如何使用 jQuery 显示表单消息并禁用表单提交？

我想在文本输入字段上显示带有 jQ​​uery 的表单消息，这些字段需要在填写字段之前提交和禁用提交按钮。

我的简单问题是这样的：

如果输入字段为空并禁用提交按钮，我想显示错误消息。如果输入字段为空，我想在输入字段附近显示消息，该字段为空且需要填写。

我试过了

```
$("#CustomerForm").validate({
  rules: {
    FirstNameEdit: { required: true },
    LastNameEdit: { required: true },
    EmailEdit: { required: true, email:true }
  }
}); 
```

但它不起作用。

头

```
<script type="text/javascript">
$.fx.speeds._default = 650;
$(function() {
  $('.massgejava').dialog({
    autoOpen: false,
    show: 'explode',
    hide: 'explode',
    title: 'راسلنا',
    width: 380
  });
  $('#javamassge').click(function() {
    $(".massgejava").dialog('open');
    return false;
  });
  $('input#registerjquery').click(function() {
    $(".massgejava").dialog("close");
  });
});
</script> 
```

身体

```
<form action="form.php" method="post">
  <input name="name" 
         type="text" 
         value="اسمك الكريم" 
         onblur="if (this.value == '') this.value = 'اسمك الكريم'" 
         onclick="value=''" />
  <input name="email" 
         type="text" 
         value="البريد الالكتروني" />
  <input name="phone" 
         type="text" 
         value="رقم الهاتف" 
         onblur="if (this.value == '') this.value = 'رقم الهاتف'" 
         onclick="value=''" />
  <textarea name="msg" 
            cols="41" 
            rows="5" 
            placeholder = "نص الرساله" 
            wrap="soft"></textarea>
  <input type="submit" value="ارسال" />
</form> 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:47:17.220

带有一些添加 ID 的表单：

```
<form action="form.php" method="post" id="CustomerForm">
    <input name="name" type="text" value="اسمك الكريم" onblur="if (this.value=='')this.value='اسمك الكريم'" onclick="value=''" />
    <br />
    <input name="email" type="text" value="البريد الالكتروني" />
    <br />
    <input name="phone" type="text" value="رقم الهاتف" onblur="if (this.value=='')this.value='رقم الهاتف'" onclick="value=''" />
    <br />
    <textarea name="msg" id="msg" cols="41" rows="5" placeholder="نص الرساله" wrap=soft></textarea>
    <br />
    <input type="submit" id="submit" value="ارسال" />
</form> 
```

查询：

```
function kontrolaMailu(emailAddress) {
    var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
    return pattern.test(emailAddress);
}

function checkName(name){
var pattern = new RegExp(/^([a-z]+) ([a-z]+)$/);
return pattern.test(name);
}

function formControl(){
var error=0;
var errorTXT='';
var inputs = $("#CustomerForm input ");
$.each(inputs, function(key, value) {
    if(value["name"]=='name'){
        if(value['value']!='' && error==0){
            if(checkName(value['value'])){
                error=0;
                }
                else{
                    error=1;
                    errorTXT='your error msg text for name input when there arent two words';
                    return false;
                }
        }
        else{
            error=1;
            errorTXT='your error msg text for empty name field';
            return false;
            }
        }
     if(value["name"]=='email'){
        if(value['value']!='' && error==0){
            if(kontrolaMailu(value['value'])){
                error=0;
                }
                else{
                    error=1;
                    errorTXT='your error msg text for wrong mail format';
                    return false;
                }

        }
        else{
            error=1;
            errorTXT='your error msg text for empty mail';
            return false;
            }
        }
}

     if(error != 0){
      $('#submit').attr('title',errorTXT);
      $('#submit').attr('disabled', 'disabled');
      $('#submit').addClass('disabled');//css class for disabled button
      $('#msg').val(errorTXT);
     }
     else{
      $('#submit').removeAttr('title');
      $('#submit').removeAttr('disabled');
      $('#submit').removeClass('disabled');//css class for disabled button
      $('#msg').val('');
     }
} 
```

如果像 value='اسمك الكريم' 这样的值会通过那些 RegExps，我不放心，因为我从来不需要使用不同的字符集使用语言

# android - 适用于 Android 应用程序的 Google 子令牌

> ID：12309642
> 
> 赞同：1
> 
> 时间：2012-09-06T23:00:37.203
> 
> 标签：android, oauth-2.0, auth-token

我正在开发一个 Android 应用程序，该应用程序要求获得查看我的 Google 个人资料和电子邮件的权限。我允许应用程序查看它，但我的 Google 帐户页面的“授权应用程序和网站”部分没有列出我的应用程序。有什么方法可以让我的应用程序显示出来，以便用户可以根据需要撤销访问权限。它主要用于测试，所以我可以强迫它一遍又一遍地征求我的许可，但是......

看起来应该是可能的，因为我的应用程序的 iOS 版本可以做到这一点，而其他一些 Android 应用程序也可以做到。我只是找不到任何关于如何让我的应用程序显示它使用的信息的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:00:40.067

是的，尽管该功能尚未完全启动。它将在 Google Play 服务中可用，记录在这里：

[https://developers.google.com/android/google-play-services/](https://developers.google.com/android/google-play-services/)

具体来说，您需要使用`GoogleAuthUtil.getToken()`：

[https://developers.google.com/android/google-play-services/reference/com/google/android/gms/auth/GoogleAuthUtil#getToken(android.content.Context, java.lang.String, java.lang.细绳）](https://developers.google.com/android/google-play-services/reference/com/google/android/gms/auth/GoogleAuthUtil#getToken%28android.content.Context,%20java.lang.String,%20java.lang.String%29)

这很简单。我在今年的 Google I/O 演示文稿中提供了少量信息：http: [//oauth2-preso.appspot.com/#51](http://oauth2-preso.appspot.com/#51)。[I/O 网站](https://developers.google.com/events/io/sessions/gooio2012/604/)上也提供视频。[Building Android Applications that use Web APIs](https://developers.google.com/events/io/sessions/gooio2012/121/) session 可能有更深入的信息。

# maven-3 - 如何找出 Maven 目标绑定的默认阶段？

> ID：12309652
> 
> 赞同：15
> 
> 时间：2012-09-06T23:02:10.807
> 
> 标签：maven-3, maven-plugin

在 Maven 中，如何找出目标的默认阶段（如果此特定目标存在任何默认阶段）？

### 例子

我正在使用一个名为[Jetty Maven Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)的 Maven 插件。它包含一个目标`jetty:run`。运行命令`mvn jetty:run`（注意这个命令只包含一个目标，而不是一个阶段）首先构建一个指定的`pom.xml`web 应用程序直到默认[`test-compile`阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)，然后将它部署在一个 Jetty 服务器中。

[正如Mojo API Specification](http://maven.apache.org/developers/mojo-api-specification.html)中所指出的，一个目标可以在其源代码中分配一个默认阶段（通过`@phase`或通过`@execute phase`）。[如果是`jetty:run`，则默认阶段是`@execute phase="test-compile"`](http://grepcode.com/file_/repo1.maven.org/maven2/org.mortbay.jetty/jetty-maven-plugin/8.1.4.v20120524/org/mortbay/jetty/plugin/JettyRunMojo.java/?v=source)。

但是查找源代码文件可能会变得相当复杂。有没有更简单的方法来找出默认阶段？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T07:51:24.973

最简单的解决方案是使用[maven-help-plugin](http://maven.apache.org/plugins/maven-help-plugin/describe-mojo.html)，如下所示：

```
mvn help:describe -DartifactId=maven-compiler-plugin -DgroupId=org.apache.maven.plugins -Dgoal=compile -Ddetail 
```

这将打印出许多信息，但在第一行：

```
[INFO] Mojo: 'compiler:compile'
compiler:compile
  Description: Compiles application sources
  Implementation: org.apache.maven.plugin.CompilerMojo
  Language: java
  Bound to phase: compile

  Available parameters:
  .... 
```

如果您尝试使用 jetty:run 像这样：

```
mvn help:describe -DartifactId=jetty-maven-plugin -DgroupId=org.mortbay.jetty -Dgoal=run -Ddetail 
```

您将获得大量输出，但您不会看到默认阶段，因为它打算从命令行调用：

```
[INFO] Mojo: 'jetty:run'
jetty:run
  Description: This goal is used in-situ on a Maven project without first
    ....
    redeploying.
     .....

  Implementation: org.mortbay.jetty.plugin.JettyRunMojo
  Language: java
  Before this mojo executes, it will call:
    Phase: 'test-compile'

  Available parameters:
      .... 
```

# php - 获取地址多维数组递归搜索php

> ID：12309658
> 
> 赞同：1
> 
> 时间：2012-09-06T23:03:16.720
> 
> 标签：php, arrays, search, recursion, multidimensional-array

我有以下将遍历多维数组的 php 搜索脚本。当找到 $value 时，它​​会返回它，但我也希望返回地址（考虑到它只有 2 个级别）

```
function arr_search($array, $line, $lvl=0)
{ 

// Loops through each element. If element again is array, function is recalled. If not, result is echoed.
foreach($array as $key=>$value)
{ 
    if(is_array($value))
    {
        arr_search($value, $line); 
    }else{ 
          if(strpos($line, $value))
          echo "found $key: $value\n";
          // return $value; // should return array with [?],[$key],[$value]
    }

}

return false;
} 
```

您会注意到 $key 是找到的最新数组的地址。但我想拥有父数组的索引。

数组示例：

```
Array
(
[0] => Array
    (
        [0] => string324
        [1] => string234
        [2] => string7567
        [3] => stringw34

    )

[1] => Array
    (
        [0] => string4563
        [1] => string37

    )

[2] => Array
    (
        [0] => string3735
        [1] => string3563
        [2] => string3563
        [3] => string356
        [4] => string356
    )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T22:38:20.597

这应该可以帮助你。

```
<?php

function array_find_deep(array $array, $string, array &$result) {
    foreach ($array as $key => $value) {
        if (is_array($value)) {
            $success = array_find_deep($value, $string, $result);
            if ($success) {
                array_unshift($result, $key);
                return true;
            }
        } else {
            if (strcmp($string, $value) == 0) {
                array_unshift($result, $key);
                return true;
            }
        }
    }
    return false;
}

$array = array(
    1 => array(
        1 => array(
            1 => "a",
            2 => "b",
            3 => "c",
            4 => "d",
            5 => "e",
        ),
        2 => array(
            1 => "f",
            2 => "g",
            3 => "h",
            4 => "i",
            5 => "j",
        ),
        3 => array(
            1 => "k",
            2 => "l",
            3 => "m",
            4 => "n",
            5 => "o",
        ),
    ),
    2 => array(
        1 => array(
            1 => "A",
            2 => "B",
            3 => "C",
            4 => "D",
            5 => "E",
        ),
        2 => array(
            1 => "F",
            2 => "G",
            3 => "H",
            4 => "I",
            5 => "J",
        ),
        3 => array(
            1 => "K",
            2 => "L",
            3 => "M",
            4 => "N",
            5 => "O",
        ),
    ),
    3 => array(
        1 => array(
            1 => "p",
            2 => "q",
            3 => "r",
            4 => "s",
            5 => "t",
        ),
        2 => array(
            1 => "u",
            2 => "v",
            3 => "w",
            4 => "x",
            5 => "y",
        ),
        3 => array(
            1 => "z",
            2 => "P",
            3 => "Q",
            4 => "R",
            5 => "S",
        ),
    ),
);

$result = array();
$success = array_find_deep($array, 's', $result);

var_dump($result); 
```

将显示获取数据的“方式”。

```
array(3) {
  [0]=>
  int(3)
  [1]=>
  int(1)
  [2]=>
  int(4)
} 
```

# c++ - C++ ifstream 帮助（简单）

> ID：12309659
> 
> 赞同：0
> 
> 时间：2012-09-06T23:03:29.277
> 
> 标签：c++, file, input

我正在尝试从 .txt 文件中获取一些名称并将它们添加到 char 数组中，但发生了一些奇怪的事情。这是我输入的代码部分：

```
int main()
{
string namelist[30];
int i=0;
string line;
ifstream file("C:\\names.txt");
if (file.is_open())
{
    while ( getline (file,line).good () )
    {
        getline(file,line);
        cout << line << endl;  // It prints the names normally (it was added for   debugging) //
        namelist[i] = line;
    }
    file.close();
}
cout << namelist;  // Here is the prob. 
```

在代码的最后一行，它在控制台而不是列表上打印一个指针，我不知道为什么。我对 c++ 很陌生，所以不要粗鲁！

文本文件类似于：

```
John
Nick
Samatha
Joe
... 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:07:33.923

因为数组的名称是一个指针，所以写

```
for (int i = 0; i < 30; ++i)
    std::cout << namelist[i] << std::endl; 
```

或者

```
#include <algorithm>
#include <iterator>
//...
std::copy(namelist
         , namelist + 30
         , std::ostream_iterator<std::string>(std::cout, "\n")
); 
```

# php - Zend_Service_Twitter - 在尝试任何 API 之前使用其 OAuth 功能获取访问令牌

> ID：12309661
> 
> 赞同：2
> 
> 时间：2012-09-06T23:03:34.003
> 
> 标签：php, zend-framework, twitter, twitter-oauth

我正在尝试使用 Zend 开发一个模块，该模块将查找我的最新推文并显示在我的博客上。

我已经阅读并了解`Zend_Service_Twitter`了这门课，我想我应该从我的推特上获得最新的推文。

当我启动下面给出的代码时：

```
public function indexAction() {

        $token = unserialize('XXXXX');      
        $twitter = new Zend_Service_Twitter(array(
             'username' => 'XXX',
             'accessToken' => $token,
             'consumerKey' => 'XXXX',
             'consumerSecret' => 'XXXX',
             'callbackUrl' => 'http://localhost/zendtest/public/blog'
         ));            

        // verify user's credentials with Twitter
        $response = $twitter->account->verifyCredentials();

        // Get Timeline
        $response = $twitter->status->userTimeline();

        $this->view->twitresponse = $response;

    } 
```

我收到此错误：

```
Fatal error:
 Uncaught exception 'Zend_Service_Twitter_Exception' with message 'Twitter session is unauthorised. You need to initialize Zend_Service_Twitter with an OAuth Access Token or use its OAuth functionality to obtain an Access Token before attempting any API actions that require authorisation' in D:\Server\xampp\htdocs\zendtest\library\Zend\Service\Twitter.php:282

Stack trace: 
 #0 D:\Server\xampp\htdocs\zendtest\library\Zend\Service\Twitter.php(769): Zend_Service_Twitter->_init() 
 #1 [internal function]: Zend_Service_Twitter->accountVerifyCredentials()
 #2 D:\Server\xampp\htdocs\zendtest\library\Zend\Service\Twitter.php(270): call_user_func_array(Array, Array)
 #3 [internal function]: Zend_Service_Twitter->__call('verifyCredentia...', Array) 
 #4 D:\Server\xampp\htdocs\zendtest\application\modules\twitter\controllers\TwitterServiceController.php(27): Zend_Service_Twitter->verifyCredentials() 
 #5 D:\Server\xampp\htdocs\zendtest\library\Zend\Controller\Action.php(516): Twitter_TwitterServiceController->indexAction() 
 #6 D:\S in D:\Server\xampp\htdocs\zendtest\library\Zend\Controller\Plugin\Broker.php on line 336 
```

我在互联网上和这里有很多文章，但仍然无法解决我的问题。

有谁知道如何处理这个问题？
和有什么共同点`Zend_Oauth_Consumer`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T05:29:41.623

如果您只想显示**自己的**时间线，您可以在 Twitter 开发人员页面上“直接”请求令牌，并将其“硬编码”到您的应用程序中。所以你不必处理重定向和身份验证过程。试试这个：（未经测试，因为我正在运行..）

```
 $token = new Zend_Oauth_Token_Access();

    $token->setParams(array(
        'oauth_token'        => 'oAUTH-TOKEN',
        'oauth_token_secret' => 'oAUTH-TOKEN-SECRET',
    ));

    $twitter = new Zend_Service_Twitter(array(
        'username'       => 'USER',
        'consumerKey'    => 'CONSUMER-KEY',
        'consumerSecret' => 'CONSUMER-SECRET',
        'accessToken'    => $token
    ));

    $timeLine = $twitter->status->userTimeline(); 
```

# jquery - Fancybox 2 不适用于 jQuery 1.7.2

> ID：12309665
> 
> 赞同：0
> 
> 时间：2012-09-06T23:03:52.430
> 
> 标签：jquery, fancybox, fancybox-2

我正在尝试使任何 Lightbox 类型的代码都能正常工作，但它似乎不适用于 jQuery 1.7.2 。我基本上是在 iFrame 中制作表格。当有人点击横幅时，它会在灯箱中打开一个选择表单，他们可以注册邮件列表。我目前正在使用 Fancybox 2，当我使用时它看起来很漂亮：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

但是当我恢复到：

```
<script type='text/javascript' src='http://www.ncfitclub.net/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script> 
```

它不再起作用了。我想也许我可以在网站上使用 1.7 版本，但是当我这样做时，它会导致首页上的图片幻灯片停止工作。

现在，我用 jQuery 1.7.2 和 1.8 做了一个 JSFiddle，它们都可以工作。所以现在我不知道是什么导致了这个问题。需要明确的是，我正在使用 XAMPP 在我的计算机上测试该站点，而无需任何其他代码或插件，以避免在我最初测试它时发生冲突。我知道这不是一个可以用 jQuery.noConflict 解决的问题，因为它不能在代码干净的页面上工作。

这是我用来测试功能的代码：

```
<!DOCTYPE html>
<head>
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="js/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="css/jquery.fancybox.css?v=2.1.0" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery.fancybox.pack.js?v=2.1.0"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="css/jquery.fancybox-buttons.css?v=1.0.3" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery.fancybox-buttons.js?v=1.0.3"></script>
<script type="text/javascript" src="js/jquery.fancybox-media.js?v=1.0.3"></script>

<link rel="stylesheet" href="css/jquery.fancybox-thumbs.css?v=1.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery.fancybox-thumbs.js?v=1.0.6"></script>
<script type="text/javascript">
$(document).ready(function() {
$(".various").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : true,
    closeClick  : false,
    openEffect  : 'elastic',
    closeEffect : 'elastic',
    helpers : {
    overlay : {
        css : {
            'background' : 'rgba(58, 42, 45, 0.3)'
        }
    }
}
});

});
</script>

</head>

<body>
<a class="various fancybox.iframe" href="http://www.ncfitclub.net"><img src="http://images.beachbody.com/tbb/coo/ad_banners/tropical_shakeology/shakeology-tropical-new-728x90.jpg" width="72" height="72" alt="" /></a>
</body>
</html> 
```

有任何想法吗？

## 编辑

我发现它与 WP 包含文件和幻灯片有关。幻灯片仅在我使用`<script type='text/javascript' src='http://www.ncfitclub.net/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>`. 如果我使用版本 1.7.2 或 1.8 或直接从 jQuery.com 链接的任何其他版本，它不起作用。我想知道代码中是否有一些相关链接？

## 编辑

以下是链接：

[http://www.miller-media.com/sites/ncfit/index.html](http://www.miller-media.com/sites/ncfit/index.html)（这有 WP 包含 JS 文件。您会注意到幻灯片工作正常，但如果您单击右上角的横幅，其中有附加的fancybox代码，它只是将您链接到不在fancybox中的页面）

[http://www.miller-media.com/sites/ncfit/index2.html](http://www.miller-media.com/sites/ncfit/index2.html)（这是来自 jquery.com 的 JS 调用，带有相同版本的 jquery（1.7.2）。幻灯片不再有效，但如果你点击右上角的横幅，fancybox 就可以工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:36:02.967

WP jQuery 和官方的区别在于线路

```
jQuery.noConflict(); 
```

在末尾。可能会使用无冲突模式来避免扰乱 Mootools 库。尝试使用官方 jQuery，但之后直接运行上面的代码行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:17:59.750

我想到了。感谢 Owlvark 指出 WP jQuery 中的 noConflict。然后我基本上不得不为我的 Fancybox 代码做一些事情：

```
<script>
var $j = jQuery.noConflict();
    $j(document).ready(function(){
            $j(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});

            //Example of preserving a JavaScript event for inline calls.
            $j("#click").click(function(){ 
                $j('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                return false;
            });
        }); 
```

我只需要更改变量以使用 noConflict，因为页面上还有 Mootools。

# perl - iptables 规则验证

> ID：12309669
> 
> 赞同：3
> 
> 时间：2012-09-06T23:04:29.700
> 
> 标签：perl, iptables

我有一个`perl`脚本，它生成一个稍后将`iptables`在远程机器上加载的 shell 脚本。perl 脚本的数据输入来自一个配置文件，我可以在其中为每个规则指定各种参数。

问题是关于验证，**如果没有执行能力，你将如何验证整套规则？**

我在 CPAN 上搜索过，最接近的解决方案是[IPTables::Rule](http://search.cpan.org/~phillips/IPTables-Rule-0.01/lib/IPTables/Rule.pm)，但它只在生成规则时验证一些限制。我不能使用 IPTables::IPv4，因为它直接与主机 iptables 交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-27T02:51:42.573

这是我在 sh 脚本中测试规则的方法：

```
#!/bin/sh
/usr/sbin/iptables-restore --test < yourfileofrules
[ $? -ne 0 ] && {
    echo File does NOT syntax check
    exit 1
} 
```

在 perl 中，您将以您喜欢的任何方式执行 iptables-restore 命令，然后检查“0”退出状态是否成功。

**[编辑]** 有人告诉我这是 perl 方式：

```
my $cmd = "/usr/sbin/iptables-restore --test < yourfileofrules";
if (system($cmd) != 0) { die("File does NOT syntax check"); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:37:17.013

这不是直接可以实现的。`iptables`规则字符串语法部分由`iptables(8)`加载的各个匹配或操作模块解析。在不直接调用底层 C 模块的情况下，没有标准的方法来解析输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-02T16:47:25.123

查看[fffuu](https://github.com/diekmann/Iptables_Semantics/tree/master/haskell_tool)，花哨的正式防火墙通用理解器。它是 iptables 防火墙规则集的静态分析器。该工具仍在积极开发中（截至 2017 年 2 月），尚未完全完成。但是，核心已完全正式验证，因此您可以信任它。

作为输入，它只需要 的输出`iptables-save`。对于您的场景，您可以在虚拟机上生成此输出。

你想验证什么？

fffuu 可以：

*   检查欺骗保护
*   将您的防火墙转换为简化版本，然后您可以手动检查
*   可视化防火墙在完整 IPv4 和 IPv6 地址空间上隐含的访问控制关系。默认情况下，它会检查目标端口 22 和 80。

请注意，ITval 存在错误，[Cornelius Diekmann、Julius Michaelis、Maximilian Haslbeck 和 Georg Carle 在 Verified iptables Firewall Analysis 中报告。在 IFIP Networking 2016，奥地利维也纳，2016 年 5 月（第 2 节，第 2 段）](http://www.net.in.tum.de/fileadmin/bibtex/publications/papers/verified_iptables_firewall_analysis.pdf)。

**免责声明**：我是[fffuu](https://github.com/diekmann/Iptables_Semantics/tree/master/haskell_tool)的作者，我的观点可能有偏见，而且[fffuu](https://github.com/diekmann/Iptables_Semantics/tree/master/haskell_tool)并不完美（还）。但是，嘿，它是免费的，我希望它有所帮助。随意重用任何代码:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T13:28:49.313

检查以下 sf.net 项目[http://sourceforge.net/projects/itval/](http://sourceforge.net/projects/itval/)

# php - PHP Regex - 从具有指定类的所有链接中获取文本

> ID：12309670
> 
> 赞同：0
> 
> 时间：2012-09-06T23:04:29.420
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我正在尝试使用 PHP 和正则表达式从外部页面获取所有超链接。我关心抓取的链接结构如下：

```
<li class="magic"><a href="http://blah.com">TargetText1</a></li>
<li class="magic"><a href="http://blah.com">TargetText2</a></li> 
```

请记住，我正在尝试获取锚文本而不是 url。我有下面的代码工作，但它只是刮掉页面上的所有链接。我试图抓取只用上面列出的 li 类包装的链接。

```
 $url = "http://www.example.com"; 
 $input = @file_get_contents($url) or die("Could not access file: $url"); 

 $regexp = "<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>";

 if(preg_match_all("/$regexp/siU", $input, $matches)) { 
  print_r($matches);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:11:49.340

```
<?php

    $dom = new domDocument;
    $dom->loadHTML($html);
    $dom->preserveWhiteSpace = false;
    $lis = $dom->getElementsByTagName('li');
    foreach($lis  as $li){
        if($li->getAttribute('class')=='magic'){
            $links = $li->getElementsByTagName('a');
            if($links->length){
                echo $links->item(0)->nodeValue;
            }
        }
    }

?> 
```

# ios - RestKit 0.10.1：如何创建 NSManagedObject 子类的新实例？

> ID：12309672
> 
> 赞同：1
> 
> 时间：2012-09-06T23:04:54.317
> 
> 标签：ios, restkit

我需要创建一个 NSManagedObject 子类的新实例，然后我打算使用 POST

```
- (void)postObject:(id<NSObject>)object usingBlock:(RKObjectLoaderBlock)block 
```

如何创建对象？我使用这种方法吗？：

`+ (id)insertNewObjectForEntityForName:(NSString *)entityName inManagedObjectContext:(NSManagedObjectContext *)context;`

如果我应该使用`insertNewObjectForEntityName`，我该如何获得`context`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:23:17.217

我自己想通了。

假设我的 NSManagedObject 子类被命名为 Blah。我可以像这样创建 Blah 的实例：

```
Blah *blah = [Blah object]; 
```

# c++ - 植物学家PK_Signer

> ID：12309673
> 
> 赞同：3
> 
> 时间：2012-09-06T23:04:57.143
> 
> 标签：c++, botan

我正在尝试初始化一个 PK_Signer 对象，这似乎给我带来了比 Botan 1.8.10 版更多的问题。我目前正在使用 Botan 的最新稳定版本（1.10），但我遇到了麻烦...

在 Botan 1.8.10 中，我看到了程序员这样的例子：

```
Botan::RSA_PrivateKey pkey(rng, p, q, 65537, 0, n);
Botan::PK_Signer signer(pkey, "EMSA3(SHA-1)"); 
```

在 Botan 1.10.3 中，PK_Signer 类没有类似的构造函数。有2个构造函数：

```
Botan::PK_Signer(const PK_Signer &);
Botan::PK_Signer(const PK_Signing_Key &key, EMSA *emsa); 
```

这不是问题，直到我开始实际使用第二个构造函数时遇到问题。

我试过改变很多东西，但最有意义的方法是： Botan::AutoSeeded_RNG rng; Botan::RSA_PrivateKey pkey(rng, p, q, 0x10001, 0, n);

```
Botan::EMSA3 emsa(Botan::SHA_160);
Botan::PK_Signer signer(pkey, &emsa); 
```

这样做会引发错误：

```
error: no matching function for call to 'Botan::PK_Signer::PK_Signer(Botan::RSA_PrivateKey&, Botan::EMSA3 (*)(Botan::SHA_160))' 
```

我不知道为什么会发生这种情况，因为根据 Botan 文档[EMSA3](http://botan.randombit.net/doxygen/classBotan_1_1EMSA3.html)从抽象类 EMSA 继承。感谢您的帮助，Hetelek。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:12:01.833

`Botan::SHA_160`是一个类，所以`emsa`你定义的变量是一个函数而不是一个`EMSA3`实例。

根据 Botan 1.8 中的示例，您可以使用：

```
 #include <botan/look_pk.h>
 ...
 Botan::PK_Signer signer(pkey, get_emsa("EMSA3(SHA-1)")); 
```

这也应该在 Botan 1.10 中工作。

# c# - InfoPath 中的更新表单按钮

> ID：12309679
> 
> 赞同：0
> 
> 时间：2012-09-06T23:05:42.310
> 
> 标签：c#, infopath

我有一个 InfoPath，它作为 Web 表单部署到 SharePoint，它包含许多 C# 后端代码。大多数表单都可以正常工作，但我必须插入一个“更新表单”按钮，以便任何后端代码都可以运行。当 InfoPath 控件更改时，是否有另一种调用此代码/按钮的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:52:07.800

每个控件都具有强制回发更改的能力：控件的属性 -> 浏览器表单 -> 始终。

# cloud-foundry - 无法在 CloudFoundry.com 中推送我的应用程序

> ID：12309685
> 
> 赞同：0
> 
> 时间：2012-09-06T23:07:32.883
> 
> 标签：cloud-foundry

我已成功登录[CloudFoundry](http://api.CloudFoundry.com)，但是当我尝试推送我的应用程序时，它失败并出现以下错误：

**错误 702：未为此帐户启用外部 URI**

细节：

```
$ vmc push
Would you like to deploy from the current directory? [Yn]: y
Application Name: alcor
Detected a Java SpringSource Spring Application, is this correct? [Yn]: 
Application Deployed URL [alcor.CloudFoundry.com]: 
Memory reservation (128M, 256M, 512M, 1G, 2G) [512M]: 
How many instances? [1]: 
Bind existing services to 'alcor'? [yN]: y
1: mysql-js
Which one?: 1
Create services to bind to 'alcor'? [yN]: 
Would you like to save this configuration? [yN]: 
Creating Application: Error 702: External URIs are not enabled for this account 
```

任何想法？我应该注册一个子域吗？我应该更改我的帐户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:53:47.180

你能检查一下你使用的是哪个 vmc 版本吗？

```
vmc -v 
```

似乎云铸造子域应该全部小写。在您的情况下，它是 alcor.CloudFoundry.com，应该是 alcor.cloudfoundry.com。如果可能，您可能希望升级到最新版本并重试。

Cloud Foundry 测试版不支持外部 URL。但它在 GA 时支持此功能的路线图。您可以等到那时，如果您真的需要它，请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:46:47.937

我会说这次用 alcor 以外的另一个名字再试一次。CloudFoundry.com 限制了一些 URI，这可能就是其中之一。

# android - JSON解析器跳过节点？

> ID：12309689
> 
> 赞同：1
> 
> 时间：2012-09-06T23:07:54.793
> 
> 标签：android, json, parsing, google-maps

我用[这个](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)做了一个简单的 JSON 解析器。我想要做的就是使用 Google 地图 api 解析企业的名称和纬度/经度，但我似乎无法正确解析它。

**JSON结果示例：**

```
"results" : [
  {
     "geometry" : {
        "location" : {
           "lat" : 41.8881090,
           "lng" : -87.6308430
        }
     },
     "name" : "American Bar Association",
  },
  {
     "geometry" : {
        "location" : {
           "lat" : 41.8721230,
           "lng" : -87.6294680
        }
     },
     "name" : "Bar Louie",

  } ], "status" : "OK"} 
```

我删除了一些我不感兴趣的其他细节来缩短示例，但这是我的代码：

```
 JSONParser jParse = new JSONParser();
            JSONObject json = jParse.getJSON(url);

            try
            {   
                JSONArray contacts = json.getJSONArray("results"); //Parent Node
                for(int i = 0; i < 5; i++)//Loop through first 5 results results            
                {
                    JSONObject c = contacts.getJSONObject(i);
                    name = c.getString("name");//Gets name field 

                    //get lat from location which is a sub object of geometry                       
                    lat = Float.valueOf (contacts.getJSONObject(i).getJSONObject("geometry").getJSONObject("location").getString("lat")); 
                }
            } catch (JSONException e) { e.printStackTrace(); } 
```

当我运行它时，我得到的第一个结果很好，我得到了正确的名称和纬度，但是它没有移动到第二个结果，而是移动到 i 的最后一个结果并在循环的其余部分打印它。很难解释，我的意思是如果我遍历 5 个结果，我会得到：

*   循环 1 输出：Result#1 //这很好
*   Loop 2 Output: Results#5 //不知何故我们跳到结果#5而不是得到#2
*   循环 3 输出：Results#5 //现在它只是在循环的其余部分每次都保持打印 #5
*   循环 4 输出：结果#5
*   循环 5 输出：结果#5

我不知道它是如何忽略 for 循环并获得最后一个结果的？我只用一条 Toast 消息打印结果，我省略了一个较短的片段。

（我会注意到我正在通过一个单独的线程运行它并使用处理程序来显示 Toast 消息，如果这很重要的话）

我在 Java 方面真的不是那么好，这是我第一次使用 JSON，所以请不要说我可能说过的任何愚蠢。任何帮助深表感谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:19:06.030

嗨，我无法理解您的五个循环，因为正如您所说，它应该只有三个循环。有一次当我使用 JSON 文件时，我遇到了类似的问题。我建议你打印你拥有的真实数量的对象

```
JSONArray contacts = json.getJSONArray("results"); 
```

我的问题是我认为我在数组中有我想要的元素（联系人 - 用 3 个对象填充）但实际上我有一些不同的东西（例如几何对象）

在我使用 JSON 的语言中，结果是一个字典，所以也许你不应该 concat getJSONObject

```
contacts.getJSONObject(i).getJSONObject("geometry").getJSONObject("location").getString("lat") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:14:37.437

我最终回答了我自己的问题。我认为这是因为我每次通过循环都重新使用了 name 变量，并且当处理程序启动并完成显示第一条消息时，循环已经完成并为 name 分配了最后一个值。因此，当其他 4 个处理程序请求最终被执行时，它只打印了 4 次相同的值。

# python - 在 POST 请求中向 Tornado 服务器发送非字符串参数

> ID：12309693
> 
> 赞同：0
> 
> 时间：2012-09-06T23:08:48.280
> 
> 标签：python, post, tornado

在`post`Tornado 的 RequestHandler 方法中，`self.get_argument(arg, None)`获取`arg`请求中包含的值。

我见过的所有示例都返回一个字符串作为值，这让我想知道我们是否可以在 POST 请求中发送字符串以外的数据。

我感兴趣的具体用例：我在页面上有一个包含多个字段的表单，我想在对服务器的 POST 请求中将**其字段的一个子集打包到一个参数中，例如**

```
packed = self.get_argument('packed_arg', None)
arg1 = packed['arg1']
arg2 = packed['arg2']
... 
```

而其余的字段仍然是单独的参数。到目前为止，`dict`对于这个打包的参数，我正在考虑类似于（也许是 JSON？）的数据结构，这可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:07:21.690

JSON 将非常适合您的目的。

在客户端做这样的事情：

```
var data = {'packed_arg':get_form_args(); } 
```

功能`get_form_args()`是抽象的。您可以以任何方式实现它。默认情况下，Javascript 对象是 JSON。因此，在客户端，您必须从表单字段创建字典。这样想：

```
var data = {};
var names_to_pack = ['packed1', 'packed2']
$(form).find('input, select').each(function (i, x) {
    var name = $(x).attr('name')
    if(names_to_pack.indexOf(name) != -1) { 
        if(!data.packed) {
            data.packed = {};  
        }
        data['packed'][name] = $(x).val(); 
    } else { 
        data[name] = $(x).val(); 
    }
});
$.post('/', data); 
```

然后在服务器端：

```
raw_packed = self.get_argument('packed_arg', None)
packed = {}
if raw_packed: 
    packed = tornado.escape.json_decode(raw_packed)
arg1 = packed.get('arg1')
arg2 = packed.get('arg2') 
```

您还可以访问`self.request.arguments`.

# javascript - D3JS selectAll 附加矩形

> ID：12309694
> 
> 赞同：6
> 
> 时间：2012-09-06T23:08:49.153
> 
> 标签：javascript, select, charts, svg, d3.js

我对 d3.js 可视化数据的简洁性感到惊讶。隐藏在这种简洁下的复杂性也让人有点难以理解它是如何工作的。以下是来自[http://mbostock.github.com/d3/ex/calendar.html的部分代码](http://mbostock.github.com/d3/ex/calendar.html)

问题是它如何在创建的 svg 数量内创建一天的矩形（var svg = d3 ....）。在声明中`svg.selectAll("rect.day")`，我不确定它如何为每个 svg 附加 rect（selectAll 试图选择 rect.day ！）

```
var margin = {top: 19, right: 20, bottom: 20, left: 19},
    width = 960 - margin.right - margin.left, // width
    height = 136 - margin.top - margin.bottom, // height
    cellSize = 17; // cell size

var day = d3.time.format("%w"),
    week = d3.time.format("%U"),
    percent = d3.format(".1%"),
    format = d3.time.format("%Y-%m-%d");

var svg = d3.select("#chart").selectAll("svg")
    .data(d3.range(1990, 2011))
  .enter().append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
    .attr("class", "RdYlGn")
  .append("g")
    .attr("transform", "translate(" + (margin.left + (width - cellSize * 53) / 2) + "," + (margin.top + (height - cellSize * 7) / 2) + ")");

var rect = svg.selectAll("rect.day")
    .data(function(d) { return d3.time.days(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })
  .enter().append("rect")
    .attr("class", "day")
    .attr("width", cellSize)
    .attr("height", cellSize)
    .attr("x", function(d) { return week(d) * cellSize; })
    .attr("y", function(d) { return day(d) * cellSize; })
    .datum(format); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T23:15:15.980

你看过[Thinking With Joins](http://bost.ocks.org/mike/join/)吗？它非常清楚地解释了数据连接的工作原理——本质上，在 D3 中，您使用`.selectAll()`将数据连接到选择中，然后根据`.enter()`需要添加新元素。所以

```
svg.selectAll("rect.day")
    .data( ... )
  .enter().append("rect")
    .class("day") 
```

根据数据创建新`rect`元素。

# handlebars.js - 如何使用 Handlebars.js 加入 JSON 数据

> ID：12309695
> 
> 赞同：0
> 
> 时间：2012-09-06T23:09:45.957
> 
> 标签：handlebars.js

我有一个表示评论流的 JSON，例如：

```
var comments = [
    { "comment_id": 1, "author_id": 100, "text": "hello world!" },
    { "comment_id": 2, "author_id": 120, "text": "cheers world!" },
    { "comment_id": 3, "author_id": 100, "text": "goodmorning world!" },
    { "comment_id": 4, "author_id": 100, "text": "goodnight world!" } ] 
```

您可能会注意到，`author_id`100 人发表了 3 次评论。

我`author`的 s 数据有另一个 JSON，例如：

```
var authors = {
    100: {"username": "ciccio"},
    120: {"username": "pernacchia"} } 
```

我想在渲染模板时加入这两个 JSON，`authors`使用`author_id`as 键查找。有这样的助手会很棒：

```
<div class="comments">
    <!-- `join` takes an iterable, a lookup dict, a key,
          and a new name for the joined property -->
    {{#join comments authors "author_id" "author"}}
    <div class="Comment">
       {{author.username}} says: {{text}}
    </div>
    {{/join}}
</div> 
```

我试图写下一个助手来做到这一点，但我不明白如何在助手中**引用**`authors`字典。

 **现在我正在手动加入这两个字典，为模板创建一个*临时的*和*新*的 JSON。但是将这项工作委托给模板会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:22:51.847

除非您将在代码中的许多地方执行此连接，否则我认为不值得定义辅助函数。只需使用 Javascript/JQuery 即可：

```
$.each(comments, function(key, comment) {
    var author_id = comment.author_id;
    var comment_text = comment.text;
    if (authors[author_id]) {
        if (authors[author_id].text) {
            authors[author_id].text = authors[author_id].text + " " + comment.text;
        } else {
            authors[author_id].text = comment.text;
        }
    }
}); 
```

上面在“作者”记录中添加了一个“文本”字段，因此在此之后，只需遍历“作者”列表。如果您真的热衷于此，您也可以将其转换为辅助函数。

看看它在行动：http: [//jsfiddle.net/DUkFa/](http://jsfiddle.net/DUkFa/)**

# c++ - gdb cout 双倍接近 0

> ID：12309700
> 
> 赞同：0
> 
> 时间：2012-09-06T23:10:12.977
> 
> 标签：c++, gdb, cout

```
#include <iostream>
#include <string>
#define SIZE_LETTERS (254)

using namespace std;

void analyzeF(const string *input, char a, int *freq) {
    for (int i = 0; i < (input)->length(); ++i) {
            if ((*input)[i] == a)
                    ++(*freq);      
    }
}

int main() {
    int freq = 0;

    string input = "53\u2021\u2021\u2020305))6*;4826)4\u2021.)4\u2021);806*;48\u2020860))85;;]8*;:\u2021*8\u202083(88)5*\u2020;46(;88*96*?;8)*\u2021(;485);5*\u20202:*\u2021(;4956*2(5*\u20144)88*;4069285);)6\u20208)4\u2021\u2021;1(\u20219;48081;8:8\u20211;48\u202085;4)485\u2020528806*81(\u20219;48;(88;4(\u2021?34;48)4\u2021;161;:188;\u2021?;";
    char c;

    cout << "Please enter a character to be matched: " << endl;
    cin >> c;
    analyzeF(&input, c, &freq);

    double result = (double)freq/SIZE_LETTERS;
    cout << "The frequency for " << c << " is:" << result << endl;
    return 1;
} 
```

编写此程序是为了检测字符串中使用的字符的频率。

当我执行程序时，无论我为 char c 键入什么，输出值都是 0。

但是，当我在 gdb 中调试它时，它会给出正确的结果。例如 8 的频率是 0.133858。

我用来生成 .o 对象的命令是：

```
g++ -g c.cpp -o c
./c 
```

# java - 记录 Java servlet 操作

> ID：12309701
> 
> 赞同：0
> 
> 时间：2012-09-06T23:10:22.447
> 
> 标签：java, servlets, logging

我是编写 java servlet（来自 PHP）的新手，所以我不熟悉进行*日志记录*的最佳方法（崩溃，以及我想抛出的异常，例如登录尝试次数过多）。

似乎有一个`Logger`( `java.util.logger`)，但我也听说有更好的网络应用程序记录器。这种工作是否有黄金标准记录仪？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T23:26:13.550

Java中有很多日志框架。[SLF4J](http://www.slf4j.org/index.html)为大多数这些提供了一个简单的外观，因此您可以轻松地交换您正在使用的具体实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T01:17:36.017

正如 paulsm4 所述，Log4j 通常被认为是标准。但是，如果您没有特定需求并且由于您声明您是初学者（但即使您不是），我会坚持使用 java.logging 它很可能会在不添加新依赖项的情况下处理您的所有需求。它也可以进一步定制。

# facebook - 不要在成员墙上发布群组帖子

> ID：12309703
> 
> 赞同：0
> 
> 时间：2012-09-06T23:10:26.307
> 
> 标签：facebook, facebook-graph-api

我正在开发一个应用程序，该应用程序使用图形 api 在用户选择的组/页面/墙上发布。

发生的情况是，如果一个成员属于用户选择发布到的多个组，则这些帖子会在成员的墙上多次显示。我的意思是，相同的帖子信息，但每个帖子信息都在相应的组中。

有没有办法告诉 Facebook api 不要在会员的墙上显示这些帖子？我怎么能那样做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:24:52.983

不，但你不能只存储你已经发布到的组的 ID，而不是多次发布到同一个组吗？

您也可以`feed`在发帖前检查群组的连接，看看是否已经有相同的帖子

# entity-framework-4 - 更新实体时出现异常“无法更改关系，因为一个或多个外键属性不可为空”

> ID：12309704
> 
> 赞同：0
> 
> 时间：2012-09-06T23:10:31.970
> 
> 标签：entity-framework-4, entity-framework-4.1, asp.net-mvc-4, entity-framework-5, asp.net-mvc-3-areas

我有以下型号。

```
public class Site
{
    public int Id { get; set; }
    public string SiteName { get; set; }
    public string SiteUrl { get; set; }
    public IEnumerable<SiteBrand> SiteBrands { get; set; }
}

public class SiteBrand
{
    public int Id { get; set; }
    public int SiteId { get; set; }
    public int BrandId { get; set; }
    public SiteConfiguration SiteConfiguration { get; set; }
} 
```

SiteBrand 在 Site 的 SiteId 上有一个外键。

我正在尝试以这种方式更新我的站点实体。

```
public bool Update(Site item)
{
    try
    {
        if (item == null)
            return false;

        var itemToUpdate =
            _dbContext.SiteConfigurations.FirstOrDefault(ua => ua.Id == item.Id);

        if (itemToUpdate == null)
            return false;

        itemToUpdate.SiteName = item.SiteName;

        itemToUpdate.SiteBrands = item.SelectedBrands.Select(
            br =>
            new DataEntities.Siteconfig.SiteBrand {BrandId = br}).ToList();

        _dbContext.SaveChanges(); // Save changes.

        return true;
    }
    catch (Exception e)
    {
        throw new Exception(e.Message);
    }
} 
```

但是上面的代码抛出了以下异常。

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

我认为我收到此错误是因为我试图在不清除现有外键条目的情况下更新我的站点实体。我不确定它是否正确，也不知道如何解决这个问题。有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:34:41.843

问题是您没有为您的 SiteId 外键分配值，因此它将作为空值发送到数据库（您的数据库关系不允许）。尝试将您的代码更改为：

```
itemToUpdate.SiteBrands = item.SelectedBrands
                              .Select(br => new DataEntities.Siteconfig.SiteBrand
                                            {
                                                SiteId = item.Id,
                                                BrandId = br
                                            }).ToList(); 
```

# asp.net-mvc - 下拉依赖页面

> ID：12309708
> 
> 赞同：0
> 
> 时间：2012-09-06T23:10:42.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js

问题的总体思路是，如果您可以想象您通常如何在任何给定网站上创建帐户。注册后，您完成的操作将针对您登录的帐户。假设您的登录包含多个帐户，但您希望完成的操作特定于通过下拉菜单选择的单个帐户。

整个站点的所有页面都是相同的，您只需选择对谁完成操作。目前，我将用户名连同我执行的每个操作一起发布，以便我确定要针对谁完成操作。但是我认为有人可能对如何更好地做到这一点并以更清洁的方式获得相同的结果有一些想法？

现在我所做的只是在每个表单的顶部添加一个选择框（在用户导航时重置为默认值。我知道讨厌！）。我不确定某种 Helper 是否是首先拦截所有操作并添加用户名的好解决方案？我应该在哪里维护选择的用户名的当前状态，也许是 cookie 或其他东西？通常只是对什么样的合作伙伴可能最适合这个问题感到困惑。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:59:57.323

我认为在服务器端检查登录状态并使用标准**FormsAuthentication的最佳方法是在****User.Identity.Name**中拥有您的活动用户名。

所以在登录时你应该设置 auth coockie：

```
 FormsAuthentication.SetAuthCookie(username, true); 
```

在注销或更改用户时：

```
 FormsAuthentication.SignOut(); 
```

这是非常标准的功能，您可以在 asp.net mvc 3 创建的默认应用程序中看到它。

您可能需要的链接：

*   **[MSDN 上的 FormsAuthentication](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)**

*   **[ASP.NET MVC 3 在 stackoverflow 上使用身份验证问题](https://stackoverflow.com/questions/4237394/asp-net-mvc-3-using-authentication)**

# jquery - jQuery Change click behavior in Edit Mode

> ID：12309711
> 
> 赞同：0
> 
> 时间：2012-09-06T23:11:12.360
> 
> 标签：jquery, click, toggle

I have a simple media gallery with images that click through to other pages. I also have an "Edit" mode that allows the user to change the media gallery name, description and delete photos etc. While in "Edit" mode, I'd like to disable the default click action on the photos, and make it so that you can "select" multiple images when clicking on them. Then, buy clicking "Cancel" or "OK", the regular default image click HREFs are restored. I have the following code that kind of works in parts, but I am getting strange behavior. Any ideas on what I am doing wrong here or a better way to achieve this?

```
$(".editAlbumButton").click(function() {
    $("#editTools").show();
    $(".mediaClick").preventDefault();
    $(".mediaClick").toggle(function() {
        $(this).addClass('mediaSelectHighlight');
        }, function() {
        $(this).removeClass('mediaSelectHighlight');
    });
}); 

$(".cancelButton").click(function() {
    $(".mediaClick").removeClass('mediaSelectHighlight');
    $("#editTools").hide();
    $(".mediaClick"). ??? (); // I don't know how to "Restore" default click action here ?
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:21:37.533

Try [bind](http://api.jquery.com/bind/)ing and [unbind](http://api.jquery.com/unbind/)ing the events, depending on which mode is active.

```
$(".editAlbumButton").click(function() {
    $(".mediaclick").unbind("click", /*hanlder*/);
}
...
$(".cancelButton").click(function() {
   $(".mediaclick").bind("click", /*handler*/);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:34:00.233

为什么不使用例如可编辑的标志。

```
var editable=false;
$(".editAlbumButton").click(function() {
    $("#editTools").show();
    editable=true;
    $(".mediaClick").toggle(function() {
        $(this).addClass('mediaSelectHighlight');
        }, function() {
        $(this).removeClass('mediaSelectHighlight');
    });
});
$(".cancelButton").click(function() {
    $(".mediaClick").removeClass('mediaSelectHighlight');
    $("#editTools").hide();
    editable=false;
});
$(".mediaClick").click(function() {
    if(editable){
        $(this).preventDefault();
        return;
    }
}); 
```

# jquery-ui - 排除 ul 中的 li 被 jquery-ui 选项卡视为选项卡

> ID：12309714
> 
> 赞同：2
> 
> 时间：2012-09-06T23:11:55.013
> 
> 标签：jquery-ui, asp.net-mvc-4, jquery-ui-tabs

![我想要的图片，现在可以使用，但不完全](../Images/1e4a7ce6cc82d6d8fb02ea35f92dd2d0.png)

我有一个标签列表（使用 jquery-ui 的 ul），我在整个页面上横向拉伸。在主题/选项卡区域的右上角（不在选项卡区域之外，而是在其中）我想要另一组我想要不同主题的导航。

所以我制作了另一个 ul 并将其嵌套在我父 ul 的最后一个 li 中。然后应用 css 覆盖应用于其余选项卡的 jquery-ui 主题。这有效，除了两件事：1.）我希望这个嵌套列表和我的标签条中的最后一个真实标签之间的间隙随着浏览器改变大小而缩小，如果它需要换行到底部（就像其余的一样标签可以）。2.) 我的嵌套 ul 中的第一个 li 被视为仍然是一个选项卡，因此当我单击它时，它不是指向我在href 属性，jquery-ui 推入“#ui-tabs-1”并尝试回发到当前页面上不存在的锚点。我不知道“#ui-tabs-1”是从哪里来的，因为那是 甚至不是我对父级 ul/tab-list 的命名约定？？？我没有将任何嵌套列表视为选项卡列表的一部分。

如果我需要取消嵌套另一个 ul 并将其放在页面上的其他位置，这对我来说很好......但是，我仍然希望它位于我的标签列表的右上角并且我希望它用标签包裹，所以这就是为什么我把它推到我父母 ul 的最后/最右边的 li 中。

有没有办法告诉 jquery“不要把这个 li 当作一个标签”？

我页面上的代码如下所示：

```
<article>
    <div id="tabs">
        <nav>
            <ul>
                <li><a href="#Parts" onclick="getTab('Parts');">Parts</a></li>
                <li><a href="#Categories" onclick="getTab('Categories');">Categories</a></li>
                <li><a href="#Links" onclick="getTab('Links');">Links</a></li>
                <li class="untabbed">
                    <ul>
                        <li>[ <a href="/Store/Admin">Admin</a> |</li>
                        <li><a href="/Store/Order">Order</a> |</li>
                        <li><a href="/Account/LogOff">Log off</a> ]</li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="Parts"></div>
        <div id="Categories"></div>
        <div id="Links"></div>
    </div>

</article>
    ...
<script type="text/javascript">
    $tabs = $('#tabs').tabs();
    $('#tabs').tabs('select', 'Categories');
    getTab('Categories');
    function getTab(id) {
        var url = '/Store/Home/GetTab/' + id;
        var targetDiv = '#' + id;
        $.get(url, null, function (result) {
            $(targetDiv).html(result);
        });
    }
    $.address.change(function (event) {
        $('#tabs').tabs('select', window.location.hash)
    });
    $('#tabs').bind('tabsselect', function (event, ui) {
        window.location.hash = ui.tab.hash;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:15:05.987

您可以使用禁用的选项来选择要排除的选项卡。

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

> 一个数组，包含在初始化时应禁用的选项卡（从零开始的索引）的位置。

**例如：**

```
$( "#tabs" ).tabs({ disabled: [1, 2] }); 
```

**更新**

在我们发表评论之后，我完成了一个解决方案的 JSFiddle，该解决方案将子列表从选项卡式列表中取出。

[http://jsfiddle.net/spacebeers/G6WhC/17/](http://jsfiddle.net/spacebeers/G6WhC/17/)

# php - PHP、SQL - 复杂查询需要 40 多秒

> ID：12309717
> 
> 赞同：0
> 
> 时间：2012-09-06T23:12:10.847
> 
> 标签：php, mysql, sql, join

在我们的应用程序中，我们使用这 3 个表：

1.  类别
2.  城市（category_id）
3.  city_data（距离，city_id）

> ```
> $q = "SELECT a.id as aid,a.distance as adistance, 
>            b.id as bid,b.distance as bdistance 
>         FROM city_data as a 
>         JOIN city_data as b on a.id != b.id 
>         JOIN cities AS a_cities ON a.city_id = a_cities.id
>         JOIN cities AS b_cities ON b.city_id = b_cities.id      
>         WHERE (a_cities.category_id='".$_GET["c"]."' AND b_cities.category_id='".$_GET["c"]."')
>         AND abs(a.distance - b.distance) < 100 ORDER BY RAND() LIMIT 1"; 
> ```

表**城市**，**city_data**具有相同的行数 -**几乎 5.000**。上面的查询大约需要**45 秒**，这很糟糕。更糟糕的是，这些表应该有另外 5.000 行，总共有 10.000 行......

我想问你任何方式，如何减少执行上述查询的时间...... 45s是不可接受的......

我有什么办法可以解决这个问题吗？

**编辑：**谢谢你的建议，我删除了 **ORDER BY RAND()**部分，时间真的很短，大约 22 秒，但这对于通常使用来说仍然太高了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:31:25.650

确保您已在连接列上创建索引（cities.city_id、city_data.id、citys.category_id）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T00:20:44.703

我不知道您的表是如何设计的，但您应该将 city1 到 city2 的距离信息保存在一个（可能是另一个）表中，并摆脱最后 2 个连接并获取另一个查询结果的类别信息。

如之前给出的示例（[计算 400 个城市之间的距离并为其优化 MySQL？](https://stackoverflow.com/questions/7914239/calculating-distance-between-400-cities-and-optimizing-mysql-for-it)）

```
SELECT c1.name, c2.name, cd.dist 
FROM cities_dist cd
  INNER JOIN cities c1 ON cd.city1 = c1.id
  INNER JOIN cities c2 ON cd.city2 = c2.id
WHERE cd.city1 = your_id
   OR cd.city2 = your_id
ORDER BY cd.dist ASC 
```

并确保您有正确的索引和字段类型定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:18:17.210

你为什么要加入这个？

```
FROM city_data as a JOIN city_data as b on a.id != b.id 
```

您正在将`city_data`表的数据与同一个表的数据连接起来，其中您不匹配它们之间的唯一关系。我想这就是让您的查询如此缓慢的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T23:48:23.737

分解查询。将每个子查询变成一个视图。分别运行它们。这应该可以让您提高性能。运行一个很长的非常复杂的查询通常比运行一个简化的查询要慢。尽可能限制每个子查询的结果。那么也许你可以使用联合来加入结果。那将是我的第一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T00:16:03.440

将所有这些数据拉回 PHP 并在那里进行循环/距离计算可能是有意义的——这在代码中可能比在数据库中更快。

# python - python-xmpp 收到消息

> ID：12309719
> 
> 赞同：1
> 
> 时间：2012-09-06T23:12:49.597
> 
> 标签：python, xmpp, google-talk

我用 xmpp 编写了应用程序。它使用 gtalk 发送消息。我想打印收到的消息。我能怎么做？我的应用程序短代码如下。

```
def process_message():
    client = xmpp.Client('gmail.com')
    client.connect( server=('talk.google.com',5223) )
    client.auth(user,passwd, 'botty')

    to = raw_input("to: ");
    if client:
        message = raw_input("message: ")
        client.send( xmpp.Message( to,message ) )

if __name__ == "__main__":
    user = raw_input("User: ")
    passwd = getpass.getpass("Pass: ")
    process_message() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T23:46:14.917

您需要为传入消息注册一个事件处理程序，使用[`Client.registerHandler`](http://xmpppy.sourceforge.net/apidocs/xmpp.dispatcher.Dispatcher-class.html#RegisterHandler). 看看像[这样](http://off-the-stack.moorman.nu/2012-10-10-keep-in-touch-with-your-servers-using-xmpp.html)或[这样](http://xmpppy.sourceforge.net/examples/xtalk.py)的示例客户端代码。例如，后者实现了这样的消息处理函数：

```
def xmpp_message(self, con, event):
    type = event.getType()
    fromjid = event.getFrom().getStripped()
    if type in ['message', 'chat', None] and fromjid == self.remotejid:
        sys.stdout.write(event.getBody() + '\n') 
```

# git - teamcity 对分支删除的操作

> ID：12309720
> 
> 赞同：8
> 
> 时间：2012-09-06T23:12:58.070
> 
> 标签：git, github, continuous-integration, branch, teamcity

我正在考虑设置一个 teamcity CI 服务器以与 git (github) repo 一起使用。

我想让 teamcity 构建每个被推送到主仓库的分支，似乎 TeamCity 现在支持这一点。

当一个分支被推送时，我想为它创建一个新的 IIS 网站/应用程序池等，看起来我可以通过 web deploy 或其他类似的东西来完成这个。

我想知道它是否可能是，当一个分支从 repo 中删除时，因为它被合并到 master/prod 中，有没有办法让 TeamCity 运行一个批处理文件/命令，我将在其中删除所有工件（网站/应用程序池/数据库等）来自仅为该分支部署站点的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:34:57.923

这可能不是您想要的，但是如果您可以使用简单的预接收挂钩来做到这一点，您为什么要使用 TeamCity？

[有关更多详细信息，请参阅此内容。](https://stackoverflow.com/a/2022615/760757)

# java - 如何获得数组类的类定义 byte[]？

> ID：12309727
> 
> 赞同：2
> 
> 时间：2012-09-06T23:13:40.303
> 
> 标签：java, classloader

我试图了解 Java 类加载器是如何工作的，特别是`defineClass(String,byte[],int,int)`方法。假设我想为`NonIntrinsicType`. 我知道我可以找到 *.class 文件`NonIntrinsicType`，将其内容序列化为`byte[]`被调用的`bytes`，然后调用`defineClass(null,bytes,0,bytes.length)`.

我无法理解的奇怪情况是，我怎样才能获得类似`byte[]`的类定义`[LNonIntrinsicType`- 换句话说，如果我的应用程序请求 的实例的类定义`NonIntrinsicType[]`，我没有 *.class 文件对应于此类类型。我如何获得`byte[]`这种类型的定义？

你可能想知道我为什么要这样做。我基本上是在尝试创建一个网络类加载器，其中有一个在其类路径上具有类定义的“本地”JVM，以及一个在其类路径上没有上述类定义的“远程”JVM。“远程”遇到`NonIntrinsicType[]`该类类型的实例并从“本地”请求定义，但我的“本地”JVM 找不到 的类文件`NonIntrinsicType[]`，因此无法为`byte[]`“远程”提供类定义。

**添加于 2010 年 9 月 7 日**

我应该提到的一件事......我正在使用`Socket`并`ObjectInputStream`接收“本地”发送到“远程”的消息。我在`ObjectInputStream`“远程”端创建了一个自定义扩展并覆盖了`protected Class<?> resolveClass(ObjectStreamClass)`. 这是当传入消息包含尚未加载的类实例时我的“远程”JVM 收到的第一个通知。我有另一个用于传递类定义的套接字，因此当第一个套接字接收到尚未加载的类的实例时，它会通过第二个套接字从“本地”JVM 请求该类的定义。

当我的自定义`ObjectInputStream.resolveClass(ObjectStreamClass)`通过`ObjectStreamClass`返回数组类型的类名（名称看起来像`[Lsome.ClassName;`）时，就会出现问题。我可以很容易地解析出基级类型`some.ClassName`并首先加载它——这是在对 的调用中完成的`NetworkClassLoader.getInstance.loadClass()`，在这里我得到`byte[]`基级类的一个，然后使用它`defineClass()`在该方法调用中进行调用。

我现在明白了，您可能无法获得`byte[]`数组类型的类定义，所以这让我试图弄清楚如何找到`Class<?>`数组类型的实例并返回它。这是我在“远程”JVM 的消息接收`resolveClass`中自定义的方法的代码：`ObjectInputStream``Socket`

```
@Override
protected Class<?> resolveClass(ObjectStreamClass osc) 
        throws IOException, ClassNotFoundException{
    try {
        return super.resolveClass(osc);
    } catch (Exception e){}

    String name = osc.getName();
    boolean array = name.contains("[L");

    if(array) name = name.replace("[L","").
            replace("[","").replace(";","");

    Class<?> c = NetworkClassLoader.getInstance().loadClass(name);
    if(!array) return c;

    //If it's an array type, how do I obtain its corresponding
    //Class<?> and return it here?

    throw new ClassNotFoundException();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T23:25:12.787

您不需要为`[LType`. 如果你有一个`Class`，你可以用反射创建一个该类的[数组：](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int...%29)

```
Object array = Array.newInstance(yourClass, dimensions); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T23:17:16.857

您无法控制数组的加载，因为它们没有被加载。没有什么可以加载的。数组没有类。没有类定义。没有字节[]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:37:43.337

可以做到这一点的唯一方法是修补 JVM 的 defineClass(...) 方法以查找所需的类，然后将它们存储起来以备后用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T02:50:17.457

数组类由 JVM 创建，无需调用`defineClass()`.

请参阅[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.3.3](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.3.3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T02:55:03.800

[来自ClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html) javadoc的摘录：

> 数组类的类对象不是由类加载器创建的，而是根据 Java 运行时的要求自动创建的。Class.getClassLoader() 返回的数组类的类加载器与其元素类型的类加载器相同；如果元素类型是原始类型，则数组类没有类加载器。

了解如何要求您的类加载器为`[LNonIntrinsicType`. 感觉就像你在做一些定制的事情。如果你能更详细地描述你在做什么，我们就能更好地理解你的问题。当您的类加载器被要求定义时，调用堆栈是`[LNonIntrinsicType`什么？

# php - 类外观将在我的目录 MVC 中的什么位置？

> ID：12309731
> 
> 赞同：0
> 
> 时间：2012-09-06T23:15:16.570
> 
> 标签：php, design-patterns, facade

我有一个与设计模式有关的问题，我正在用 php 开发一个 MVC 应用程序，但我不知道类门面在哪里，如果我使用的是 mvc 模式，我认为门面必须在模型中，但是我不知道？？，在哪里放置类门面？

```
**model**
DeliveryDepartment.php
DiscountDepartment.php
OrderDepartment.php
PizzaCallCenterFacade.php
**view**
**controller** 
```

或者我已经将外观放在另一个文件夹中？您如何使用 MVC 组织设计模式外观？

谢谢回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:27:33.487

如果您正在谈论[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)的实现，那么这个类必须与模型保持在一起，因为它“外观”了其他模型类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:27:01.490

我会创建一个名为**components**的新目录。那就是我坚持不是模型视图或控制器的额外类的地方。如果就是这样，也许可以称它为助手。

```
**components**
facade.php 
**model**
DeliveryDepartment.php
DiscountDepartment.php
OrderDepartment.php
PizzaCallCenterFacade.php
**view**
**controller** 
```

# android - 保存 PagerAdapter 的当前状态

> ID：12309732
> 
> 赞同：3
> 
> 时间：2012-09-06T23:15:19.423
> 
> 标签：android, android-viewpager, android-adapter

我有一个`ViewPager`我想在离开后保存当前状态的`Activity`. 我的选择之一是将当前变量值保存在我已经拥有的数据库中，并在重新创建活动时将它们读回。但是，此解决方案似乎工作过度。还有另一种更好的方法来恢复 的最后状态`ViewPagwer`吗？我可以使用`ViewPager`适配器的这两种方法吗？

```
@Override
public void restoreState(Parcelable arg0, ClassLoader arg1) {}

@Override
public Parcelable saveState() {
    return null;
} 
```

如果是这样，请提供使用它的简单示例。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:20:26.613

这实际上取决于您要保存什么样的数据。如果是一些私有字段，你可以使用这两种方法，如果数据更复杂，可以使用 Parcelable。通常不需要为此目的使用数据库，如果您从互联网或其他地方捕获数据并希望保存/恢复它而不是在破坏活动后再次重新加载，则使用数据库作为缓存，但这是不同的问题。因此，要缓存数据，您需要在从 Internet 下载所有需要的数据后立即使用应用程序的 DB 和文件夹，然后使用 AsyncTaskLoader 从 DB 加载它，然后使用 PagerAdapter 在 ViewPager 上表示它。

# c# - 构造二叉树图

> ID：12309737
> 
> 赞同：2
> 
> 时间：2012-09-06T23:15:52.010
> 
> 标签：c#, binary-tree

这是一个[二叉树](http://www.dijksterhuis.org/implementing-a-generic-binary-tree-in-c/)图。我无法理解图表是如何创建的。你有 5 在顶部，但你如何决定接下来的数字和顺序？有人可以逐步指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:04:16.087

听起来您对该链接上的图表感到特别困惑。该图似乎有错误。

正如其他人所说，有多种有效的安排，但对排序二叉树的要求是每个节点的左子树只包含较小的元素，而右子树只包含较大的元素。

在您的问题中提供的链接的图表中，由于 6 > 5，这违反了。元素 6 属于 5 的右子树，这似乎是作者的一个简单错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:22:25.643

当然，

好吧，你说这是二叉树。所以算法是这样的：插入新数字时，如果数字较小，则向左，如果较大，则向右。您应该检查此小程序以生成二叉树以了解其工作原理

[小程序链接](http://www.cs.jhu.edu/~goodrich/dsa/trees/btree.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:21:56.580

数字的特定排列不是规范的（即存在其他有效排列）。唯一的要求是每个节点的左子树只包含较小的节点，而右子树只包含较大的节点。

实现特定排列的方式取决于用于填充它的算法以及插入值的顺序。这在“平衡树”部分的文章中进行了部分解释。插入时，您需要保持树平衡。重新平衡的频率以及如何重新平衡是数百万页教科书、研究论文和代码行的主题。

简而言之，您的问题的答案是“视情况而定”。

对于不一定产生平衡树的朴素实现，每个插入只是简单地遍历树，如果数字小于当前访问的节点，则向左，或者如果它更大，则向右（忽略相等的值，您需要要么确保不会发生，要么决定处理它们的政策）。当您到达死胡同（即空左或右指针）时，用插入的值在那里插入一个新节点。

> 边栏：值得注意的是，朴素算法在极少数情况下可以满足您的需求，这要归功于其简单性。您可以通过在插入之前随机打乱输入数据来避免不平衡的树。然而，在大多数情况下，最好不要使用二叉树。哈希表几乎总是更可取的。

# php - PHP / CodeIgniter-类构造中的未定义变量

> ID：12309738
> 
> 赞同：0
> 
> 时间：2012-09-06T23:15:55.267
> 
> 标签：php, class, codeigniter, object, arguments

我有以下 php 错误：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的变量：t

和

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：myclass::__construct() 缺少参数 1，在第 1011 行的 xxx 中调用并定义

我的控制器包含：

```
 $this->load->model('mymodel');
    $i = $this->mymodel->func(1);
    print_r($i); 
```

我的模型：

```
$test = new myclass("foo", "bar");
$myarray[] = $test;
return $myarray 
```

我的课 ：

```
class myclass {

var $a;
var $b;

public function __construct($t, $l) // ERROR 2
{
    $this->a = $t; // ERROR 1
    $this->b = $l;
}

} 
```

请注意，控制器中的 print_r($a) 打印带有内容的正确对象..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:33:45.927

好吧，那是由 Codeigniter 引起的。

*myclass*在单独的文件中声明并由*mymodel*使用：

```
 $CI =& get_instance();
    $CI->load->library('myclass', $params); 
```

加载库时，Codeigniter 创建一个*myclass*实例作为单例，但它不传输任何参数。为防止出现此错误，您必须在加载 lib 之前提供参数：

```
 $params = array('type' => "a", 'loc' => "b");
    $CI =& get_instance();
    $CI->load->library('myclass', $params); 
```

请注意，它**必须**是一个数组 ($params)，而不是单个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-28T05:23:53.207

另一种方法是复制猫antelove [answer](https://stackoverflow.com/a/52122854/2368696)。

这样，您只需要更改模型文件和加载模型的方式。

PS这只是为了丰富这个SO线程

# python - Python 二进制文件 CTime 4 字节

> ID：12309740
> 
> 赞同：1
> 
> 时间：2012-09-06T23:16:14.790
> 
> 标签：python, binary, ctime

我正在尝试解析一个具有文件格式的二进制文件。我有 3-4 字节的变量，它们被列为“CTime”，我使用 struct.unpack 读取它们。我想将此数字转换为实际的日时间值。我拥有的值似乎是从绝对开始以来经过的秒数。我记得在 R 中有某种方法可以从经过的秒数中获取日期。有没有办法在python中做到这一点？或者即使我应该将 CTime 作为整数读取。

我读到：[将 ctime 转换为 unicode 并将 unicode 转换为 ctime python](https://stackoverflow.com/questions/4750522/convert-ctime-to-unicode-and-unicode-to-ctime-python)，但这并不是我想要做的。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:29:04.807

```
import datetime
import time
seconds_since_epoch = time.time()
print datetime.datetime.fromtimestamp(seconds_since_epoch)

 #prints "2012-09-06 16:29:48.709000" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:30:39.100

您可以使用时间模块

```
>>> import time
>>> t1=time.gmtime(1284286794)
>>> t1
time.struct_time(tm_year=2010, tm_mon=9, tm_mday=12, tm_hour=10, tm_min=19, 
             tm_sec=54, tm_wday=6, tm_yday=255, tm_isdst=0) 
```

# ruby-on-rails - 将 JSONP 与 EmberJS 路由器一起使用？

> ID：12309743
> 
> 赞同：0
> 
> 时间：2012-09-06T23:17:02.557
> 
> 标签：ruby-on-rails, ajax, jsonp, ember.js

如何在 emberJS 路由器下的 ajax 下使用 JSONP。任何人都可以分享使用 ajax/getJSON 请求来填充数据的示例代码吗？

在最新的应用程序结构[http://emberjs.com/guides/outlets/](http://emberjs.com/guides/outlets/)中，控制器创建由路由器初始化管理。为控制器编写 AJAX get 的最佳方法是保持路由器代码类似于应用程序结构 ember 指南中提出的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:01:51.183

查看[http://trek.github.com/](http://trek.github.com/)（特别是“加载外部数据”部分）作为示例。
由此看来，您的 AJAX 获得的应该驻留在您的模型中，而不是直接驻留在您的路由器中。但我可能过度解释了一些事情。

# ios - 在 iPad 上使用自定义背景图像创建 UIKit 弹出框

> ID：12309747
> 
> 赞同：0
> 
> 时间：2012-09-06T23:17:20.447
> 
> 标签：ios, uikit, uipopovercontroller

我有一个 iPad 应用程序，它将使用自定义图稿显示一个弹出框。从较早的问题（[带有图案边框的自定义弹出框](https://stackoverflow.com/questions/11762832/custom-popover-with-pattern-border)，我了解了 UIPopoverBackgroundView 类。但我不清楚我应该如何提供我的图像。

我的设计师为我提供了一张图片，它很容易分割成组件。如果我只是在 UIPopoverBackgroundView 子类中实现 drawRect，我可以使用未拉伸的左右图像和拉伸的中心图像。但是不清楚我如何提供我的自定义箭头图像（指向上方），因为箭头的表示是从基类属性派生的。

我查看了 UIPopoverBackgroundView.h 但我没有看到任何引用图像的方法或属性，只是视图的属性。

我会以正确的方式解决这个问题吗？UIPopoverBackgroundView 是否真的让我为自定义弹出框外观提供完整的背景图像？如何将自定义图像提供给 UIPopoverBackgroundView 子类？我是否需要改为子类 UIView 来实现完全自定义的弹出框外观？

我目前的目标是 iOS 5。

编辑：我还发现了另一个问题，[使用 UIPopoverBackgroundView 类](https://stackoverflow.com/questions/8205846/using-uipopoverbackgroundview-class)。我的问题看起来像那个重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:12:49.480

我通过实现自己的弹出视图类解决了这个问题。

# html - 为什么a 礼节被移到它的孩子之外并且大小不同？

> ID：12309748
> 
> 赞同：0
> 
> 时间：2012-09-06T23:17:26.000
> 
> 标签：html, css

我有一个我无法解决的问题，这对我来说似乎很奇怪，但我希望你们能找到解决方案。

问题是，我网站的一些礼仪（不是全部）比它们包含的 img 尺寸小，并且它们被移位，这会影响布局，因为它看起来像底部边缘。

这是它的图片，如果您需要任何其他信息，请告诉我。![我的网站问题](../Images/112cbeb474080cda7ca07220c28c1d20.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:19:28.713

尝试将此添加到您的 CSS 中：

```
img{vertical-align:bottom} 
```

如果这可行，我将给出进一步的解释。

# linux - linux下的守护进程无法使用execv启动应用程序

> ID：12309749
> 
> 赞同：0
> 
> 时间：2012-09-06T23:17:27.067
> 
> 标签：linux, daemon, execv

我们有一个在 Fedora 16 下运行的命令和控制守护程序，它提供各种服务，包括启动我们的一个辅助应用程序。这已经为我们工作了很长一段时间。

事实上，它仍然有效 - 在某些系统上。

守护进程分叉（成功），然后调用 execv()。

设置在另一个系统上测试，突然失败，execv()失败返回127。

两个系统都在运行 Fedora 16，虽然有问题的是 3.3.7-1.fc16.x86_64 而另一个一切正常的系统是运行 3.4.2-1.fc16.x86_64

如果我停止守护程序并将其作为独立应用程序运行，则整个过程运行良好。

所有在 execv() 和相关文档中的搜索都无法显示 127 错误代码，到目前为止我唯一的猜测是 Linux 'Command not found' 错误。不知道这意味着什么使解决问题变得困难。

谁能告诉我 127 返回码是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:06:39.057

好的，问题又回来了，我发现我实际上已经解决了它，但是解决方案需要一些时间才能起作用。

动态链接器未找到似乎已在其他系统上获取的特定库（可能是因为该库是作为错误机器上缺少的某些硬件的驱动程序的一部分加载的）。

将它添加到 /etc/ld.so.conf.d/ 中的配置文件并没有立即帮助，但几个小时后，在几次重新启动后它确实有帮助。

所以： *execv()*没有启动应用程序，而是返回 127 作为未找到库的症状。

解决方案是将路径添加到*/etc/ld.so.conf.d/中的适当文件*

为了立即满意，运行*ldconfig*来重建缓存。

# c# - 无法将实现接口的类的实例添加到 C# 中所述接口的列表中

> ID：12309752
> 
> 赞同：0
> 
> 时间：2012-09-06T23:17:55.187
> 
> 标签：c#, generics, interface

我有这个错误：

> 无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.List”

对于以下代码：

当我尝试添加到列表中时：

```
if (information != null) // not empty
{
    foreach (CharacterInformation info in information)
    {
        chButtons.Add(new GuiSelectCharacterButton(
            selectGui,
            new Rectangle(100, 100, 450, 100)
        ));
        chButtons[chButtons.Count - 1].ImageTexture = GUISprites.Instance().GetTexture(UITexture.RainbowDash);
        chButtons[chButtons.Count - 1].Texture = GUISprites.Instance().GetTexture(UITexture.CommonButtonNotPressed);
        chButtons[chButtons.Count - 1].PressedTexture = GUISprites.Instance().GetTexture(UITexture.CommonButtonPressed);
        chButtons[chButtons.Count - 1].ImageTextureWidth = 90;
        chButtons[chButtons.Count - 1].ImageTextureHeight = 90;
        chButtons[chButtons.Count - 1].ButtonPressed += LoginCharacterHandler;
        chButtons[chButtons.Count - 1].Font = GameFonts.Instance().GetSpriteFont(FontType.UI);
        chButtons[chButtons.Count - 1].Information = information[chButtons.Count - 1];
    }
}
// error at this line
buttoncontainer.ButtonList = chButtons; 
```

类声明：

```
public class GuiSelectCharacterButton : GUIImageButton, IGameUserInterfaceImageButton
{
    public GuiSelectCharacterButton(GUI parent, Rectangle area)
        : base(parent, area)
    {

    }
} 
```

界面：

```
public interface IGameUserInterfaceImageButton : IGameUserInterfaceComponent
{
    bool InsideContainer { get; set; }
    Rectangle InsideContainerArea { get; set; }
} 
```

IGameUserInterfaceImageButton 列表：

```
private List<IGameUserInterfaceImageButton> buttonList;

public List<IGameUserInterfaceImageButton> ButtonList
{
    get
    {
        return buttonList;
    }
    set
    {
        buttonList = value;
        scrollbarThumbTotalHeight = marginButtons;
        scrollbarThumbY = 0;
        int yhelper = 0;
        foreach (IGameUserInterfaceImageButton button in buttonList)
        {
            yhelper += marginButtons;
            button.InsideContainer = true;
            button.InsideContainerArea = new Rectangle(
                marginXbutton,
                yhelper,
                button.Area.Width,
                button.Area.Height
            );
            yhelper += marginButtons + button.Area.Height;
            scrollbarThumbTotalHeight += button.Area.Height + marginButtons * 2;
        }
        scrollbarThumbDrawHeight = 0;
        if (scrollbarThumbTotalHeight > Area.Height)
        {
            scrollbarThumbDrawHeight = (int)Math.Pow(AreaScrollbar.Height, 2) / scrollbarThumbTotalHeight;
        }
    }
} 
```

我不知道我的错误在哪里。基类 (GUIImageButton) 实现了所述接口的所有内容。我在程序的其他部分这样做了，但由于任何奇怪的原因，它在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:25:02.147

## 简短的回答：

如果我们有一个接口和一个实现它的类：

```
public interface IFoo { }
public class Foo : IFoo { } 
```

这*不起作用*：

```
var x = new List<Foo>();
x.Add(new Foo());
var y = new List<IFoo>();
y = x; 
```

这*确实*有效：

```
var x = new List<IFoo>();
x.Add(new Foo());
var y = new List<IFoo>();
y = x; 
```

## 解释

您的问题不在于尝试将实例添加到您的列表中；该`chButtons.Add()`方法工作正常。

您的问题是尝试分配`chButtons`给`buttoncontainer.ButtonList`. 这两个标识符的类型不同。你已经说过什么是类型`ButtonList`，但你还没有说什么`chButtons`是。

如果，正如我所怀疑的那样，`chButtons`是 a `List<GuiSelectCharacterButton>`，那么你正在做的事情是行不通的。您不能将 a 分配`List<Foo>`给 a`List<IFoo>`即使`Foo : IFoo`; 这称为“协方差”，C# 在具体类上不支持它。

如果您定义`chButtons`与 具有完全相同的类型`ButtonList`，例如 a `List<IGameUserInterfaceImageButton>`，那么您的代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:25:33.240

当从 继承时，您不能直接将 from`List<A>`转换为`List<IA>`事件。 `A``IA`

你能做的也是使`chButtons`type `IGameUserInterfaceImageButton`。然后在添加它们时将每个项目投射到界面：

```
var chButtons = new List<IGameUserInterfaceImageButton>();
chButtons.Add(
    (IGameUserInterfaceImageButton)new GuiSelectCharacterButton(
        // etc ...
    )
);
// this is now valid
buttoncontainer.ButtonList = chButtons 
```

# jquery - 鼠标悬停时淡入 img - Fullscreenr - jQuery

> ID：12309753
> 
> 赞同：1
> 
> 时间：2012-09-06T23:17:57.263
> 
> 标签：jquery

我希望在我的主导航中的每个锚点鼠标悬停时淡入 img (#bgimg)。我想为每个锚点使用不同的 img。我正在使用插件 Fullscreenr，并且有四个不同的 img，每个都与我的主导航中的链接相关。在 mouseout 上，我希望它回到原来的 img。我只想在我的主页上执行此操作。下面是我想使用它的页面的链接和我的标记的片段：

[http://tamedia.ca/marlowe/home.html](http://tamedia.ca/marlowe/home.html)

```
<body>
  <img id="bgimg" src="img/bg-home.jpg" />

  <div id="container">
  <header>      
       <nav>
        <ul>
          <li><a href="brand.html">BRAND</a></li>
          <li><a href="collection-aw12.html">COLLECTION</a></li>
          <li><a href="boutiques.html">BOUTIQUES</a></li>
          <li><a href="contact.html">CONTACT</a></li>
        </ul>
       </nav>
    </header>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:46:11.180

好吧，我无法为您提供解决问题的脚本，因为您必须做功课，但这里有一些关于您可以做什么的演练。首先将类或 ID 添加到列表项中。像这样的东西：

```
<li><a href="brand.html" id="brand">BRAND</a></li> 
```

而且，也许在底部，在 body 标记之前，或者在任何你有 javascript 的地方，你都可以添加如下内容：

```
<script>
  $(document).ready(function() {

      //selects the element with the id of brand on mousein
      $('#brand').hover(

             function() {
             //replaces the image on the element bgimg with one called bg-brand.jpg
                $('#bgimg').attr('src', 'img/bg-brand.jpg');
             //fades in the image
                $('#bgimg').fadeIn("slow");
             }, 
             function () {
             //returns to its original background image after the mouseout
                $('#bgimg').attr('src', 'img/bg-home.jpg');
             //fades out the image
                $('#bgimg').fadeOut("slow");
             }
      );

  })(jQuery);
</script> 
```

这个例子只翻转了第一个锚点的背景图像，但如果这有效，我猜你知道这个练习。要淡入/淡出图像需要一些额外的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:04:20.173

这是我最终使用的：

```
$(function () {

    $('#brand-nav').hover(function () {
        $('#bgimg').fadeOut('fast', function () {
            $('#bgimg').attr( 'src', 'img/bg-brand.jpg' );
            $('#bgimg').fadeIn('slow');
        });
    }, function () {
        $('#bgimg').fadeOut('fast', function () {
            $('#bgimg').attr('src', 'img/bg-home.jpg' );
            $('#bgimg').fadeIn('slow');
       });
    });       

}); 
```

# spring - JSF - 来自 Spring bean 和数据库的资源包

> ID：12309754
> 
> 赞同：3
> 
> 时间：2012-09-06T23:18:08.767
> 
> 标签：spring, jsf, spring-mvc, jsf-2, resourcebundle

这是一个在许多论坛上都被问到的主题，但我找不到任何准确而具体的答案。在我看来，即使接受的答案也不完整，所以我将尝试发布我解决此问题的完整尝试，以期就该主题建立一个精确的问题+答案。

我正在尝试让资源包在 JSF 中工作。资源包来自一个 Spring bean，它应该从任意外部系统（即数据库）加载。

我现在将绕过数据库查询并使用模拟的资源包来保持清晰。

这是我的资源包业务实现，我设法从这个论坛的其他帖子中收集到：

```
public class TesteResBundle extends ReloadableResourceBundleMessageSource {

    private final Map<String, Map<String, String>> properties = new HashMap<String, Map<String, String>>();

    public TesteResBundle() {
        reload();
    }

    @Override
    protected MessageFormat resolveCode(String code, Locale locale) {
        String msg = getText(code, locale);
        MessageFormat result = createMessageFormat(msg, locale);
        return result;
    }

    @Override
    protected String resolveCodeWithoutArguments(String code, Locale locale) {
        return getText(code, locale);
    }

    private String getText(String code, Locale locale) {
        Map<String, String> localized = properties.get(code);
        String textForCurrentLanguage = null;
        if (localized != null) {
            textForCurrentLanguage = localized.get(locale.getLanguage());
            if (textForCurrentLanguage == null) {
                textForCurrentLanguage = localized.get(Locale.ENGLISH.getLanguage());
            }
        }
        return textForCurrentLanguage != null ? textForCurrentLanguage : code;
    }

    public void reload() {
        properties.clear();
        properties.putAll(loadTexts());
    }

    protected Map<String, Map<String, String>> loadTexts() {

        Map<String, Map<String, String>> m = new HashMap<String, Map<String, String>>();
        Map<String, String> v = new HashMap<String, String>();
        v.put("en", "good");
        v.put("pt", "bom");
        v.put("en_US", "bom");
        m.put("prop", v);

        v = new HashMap<String, String>();
        v.put("en", "bad");
        v.put("pt", "mau");
        v.put("en_US", "bom");
        m.put("pror", v);
        return m;
    }
} 
```

这是一个自定义的 EL 解析器，我也在论坛中找到了它。如果基础是 MessageSource 的实例，它会尝试收集消息。如果不是，它将解析传递给默认的 Spring EL 解析器：

```
public class MessageSourcePropertyResolver extends SpringBeanFacesELResolver {

    public Object getValue(ELContext elContext, Object base, Object property)
        throws ELException {

        if (base instanceof MessageSource && property instanceof String) {
            String result = ((MessageSource) base).getMessage(
                (String) property, null, getLocale());

            if (null != result) {
                elContext.setPropertyResolved(true);
            }

            return result;
        }

        return super.getValue(elContext, base, property);
    }

     private Locale getLocale() {
        FacesContext context = FacesContext.getCurrentInstance();
        return context.getExternalContext().getRequestLocale();
     } 
```

}

自定义 EL 解析器在 faces-config.xml 中定义：

```
<el-resolver>pt.teste.pojo.MessageSourcePropertyResolver</el-resolver> 
```

最后在 Spring 配置中，我将 messageSource bean 定义为：

```
<bean id="messageSource" class="pt.teste.pojo.TesteResBundle">
</bean> 
```

我可以确认 messageSource bean 已正确实例化，并且 HashMap 在应用程序启动时已正确加载。我可以确认正在调用自定义处理程序并将所有不是资源消息且正确解析的 EL 传递给默认 Spring 解析器。

当我在 xhtml JSF 2.0 页面中使用资源包时，我是这样做的：

```
<h:outputText value="#{messageSource.prop}" /> 
```

在 EL 解析期间，自定义解析器正确地将基础检测为 MessageSource 实例，但在以下情况下失败：

```
String result = ((MessageSource) base).getMessage((String) property, null, getLocale()); 
```

除了以下情况：

```
org.springframework.context.NoSuchMessageException: No message found under code 'prop' for locale 'en_US'.
org.springframework.context.support.DelegatingMessageSource.getMessage(DelegatingMessageSource.java:65)
pt.teste.pojo.MessageSourcePropertyResolver.getValue(MessageSourcePropertyResolver.java:18)
com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
org.apache.el.parser.AstValue.getValue(AstValue.java:169)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
javax.faces.component.UIOutput.getValue(UIOutput.java:169)
com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

我认为我可能在这里遗漏了一些东西，特别是在 Spring 配置中的 messageSource bean 定义中。我怀疑这是因为在解析资源包时没有调用 TesteResBundle 的方法。

感谢您为此主题提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:57:27.567

我实际上设法为这个问题设计了一个解决方法。由于我在 Spring 中做了我的第一个婴儿步骤，如果 Spring 专家可以审查这种方法会很好，因为我认为它不是以“Spring 方式”完成的。但是，如果其他一切都失败了，我会坚持这个不太漂亮的解决方法。

我的 Web 应用程序中通常有一个单例来保存配置工件。现在它实际上只是持有对 Spring 应用程序上下文的引用：

```
public class ApplicationConfig {

    private static ApplicationConfig instance = new ApplicationConfig();

    private ApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");

    private ApplicationConfig(){

    }

    public static ApplicationConfig instance(){
        return instance;
    }

    public ApplicationContext getApplicationContext(){
        return context;
    }
} 
```

我放弃了之前的 Resource Bundle 实现，而是扩展了 AbstractMessageSource：

```
public class TesteMessageSource extends AbstractMessageSource {

    @Override
    protected MessageFormat resolveCode(String key, Locale locale) {
        // This is just a dummy method.
        // It should lookup in a Map created in this same 
        // class for the correct key/locale resource value
        return createMessageFormat(key, Locale.US);
    }

    @Override
    protected String resolveCodeWithoutArguments(String key, Locale locale){
        // This is just a dummy method.
        // It should lookup in a Map created in this same 
        // class for the correct key/locale resource value
        return "dummyString";
    }
} 
```

然后我注意到传递给自定义 EL 解析器的基本参数实际上是 DelegatingMessageSource 的一个实例。根据 Spring 文档：“将所有调用委托给父消息源的空消息源”。所以我修改了自定义 EL 解析器，从单例中获取 Spring 应用上下文，然后获取 messageResource bean 并将其设置为 DelegatingMessageSource 实例的父 MessageSource：

```
public class MessageSourcePropertyResolver extends SpringBeanFacesELResolver /*implements MessageSourceAware */{

    public Object getValue(ELContext elContext, Object base, Object property)
        throws ELException {

        if (base instanceof MessageSource && property instanceof String) {
            DelegatingMessageSource delegatingMessageSource = (DelegatingMessageSource) base;
            BeanFactory factory = ApplicationConfig.instance().getApplicationContext();
            MessageSource messageSource = (MessageSource) factory.getBean("messageSource");
            delegatingMessageSource.setParentMessageSource(messageSource);

            String result = delegatingMessageSource.getMessage((String) property, new Object[] {}, getLocale());
            if (result != null) {
                elContext.setPropertyResolved(true);
            }

            return result;
        }

        return super.getValue(elContext, base, property);
    }

    private Locale getLocale() {
        FacesContext context = FacesContext.getCurrentInstance();
        return context.getExternalContext().getRequestLocale();
    }
} 
```

Spring messageSource bean 配置变为：

```
<bean id="messageSource" class="pt.teste.pojo.TesteMessageSource">
</bean> 
```

Facelets xml 组件中的消息资源访问变为：

```
<h:outputText value="${messageSource['prop.aaa']}" /> 
```

其中 prop.aaa 作为“属性”参数传递给自定义 EL 解析器，我们只需查找该“属性”和也传递给解析器的区域设置。

这样一切正常，但我几乎可以肯定这可以以更好和正确的方式完成，例如将已配置的 MessageSource 传递给自定义 EL 解析器。我的意思是传递一个自定义 MessageSource 的实例，或者至少是一个默认 MessageSource，其父级已经设置为自定义 MessageSource。

# scala - Scala Play 2.0.2 多文件上传

> ID：12309765
> 
> 赞同：6
> 
> 时间：2012-09-06T23:20:41.197
> 
> 标签：scala, playframework-2.0

我是 Play 和 scala 的新手。我的要求是提供一个浏览按钮，我们可以在其中选择多个文件并上传这些文件。这是我写的代码：

在 scala.html 文件中：

```
<input type="file" name="files" multiple="multiple" id="files" size="30"> 
```

在控制器中：

```
def upload = Action(parse.multipartFormData) { request =>
  request.body.file("files").map { picture =>
    import java.io.File
    val filename = picture.filename 
    val contentType = picture.contentType
    picture.ref.moveTo(new File("/tmp/picture"))
    Ok("File uploaded")
  }.getOrElse {
    Redirect(routes.Application.index).flashing(
      "error" -> "Missing file"
    )
  }
} 
```

但我无法上传多个文件。知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:50:33.730

首先你不需要

```
="multiple" 
```

这等效地工作

```
<input type="file" name="files" multiple id="files" size="30"> 
```

* * *

要加载多个文件，在定义表单时必须具有该属性

```
enctype="multipart/form-data" 
```

例如，如果使用助手

```
@helper.form(action = routes.MyController.submit(), 'enctype -> "multipart/form-data", 'id -> "myform") 
```

或者如果你不是

```
<form action=... enctype="multipart/form-data" id="myform"> 
```

在您的控制器中，您想尝试这样的事情（对于 Java，我确信它在 Scala 中类似）

```
//Get all files bound to the form when submitted 
List<FilePart> plate_files = request().body().asMultipartFormData().getFiles();
//Get files from a specific name or id
FilePart myfile = request().body().asMultipartFormData().getFile("files"); 
```

然后您可以使用这些迭代 FilePart 对象

希望它在scala中相似

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T10:50:04.397

如果你喜欢，你也可以这样尝试：

```
def uploadFiles: Action[AnyContent] { request =>
  val files: Option[Seq[FilePart[TemporaryFile]]] = request.body.asMultipartFormData.map(_.files)
   val filesJavaIO: Option[Seq[File]] = files map { fileSeq => fileSeq map { file =>
    file.ref.moveTo(new File("/tmp/myFiles"))
  }
  }
Ok("File uploaded")

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T10:06:21.077

非常简单，只要看看这个工作代码 -

```
def uploadAll = Action(parse.multipartFormData) { implicit request =>
  val files = request.body.files.toArray
  files.foreach(file => {
    val filename = Paths.get(file.filename).getFileName
    file.ref.moveTo(Paths.get(s"C:/Users/tusharw/Documents/Play Uploads/$filename"), replace = true)
  })
  Ok("Files uploaded")
} 
```

**或者，正如@robor78 所说，这是更简单的方法 -**

```
def uploadAll = Action(parse.multipartFormData) { implicit request =>
  request.body.files map { file =>
    file.ref.moveTo(Paths.get("C:/Users/tusharw/Documents/Play Uploads/"+file.filename), replace = true)
  }
  Ok("Files uploaded")
} 
```

并添加`multiple`到您的输入中。而已！

> 请注意，这里`Paths`属于`java.nio.file.Paths`. 你可以`new File("/somepath")`改用。

# c# - 如何确定我的 Azure 连接字符串是否有效

> ID：12309767
> 
> 赞同：1
> 
> 时间：2012-09-06T23:20:58.263
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

第一次联系 azure 时，错误的 Azure 连接字符串会无限期地挂起我的应用程序；在我的情况下`blobContainer.CreateIfNotExist();`。

其他关于连接检查的 SO 帖子提到了设置超时，但它仍然无限期挂起，超时为 2 秒：`blobContainer.CreateIfNotExist(new BlobRequestOptions() { Timeout = new TimeSpan(0, 0, 2) });`

检查 Azure 连接字符串是否有效的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:36:54.660

我以为默认的重试策略只进行了 3 次尝试？

在任何情况下，假设重试策略是导致长时间挂起的原因，您可能完全禁用重试。在断定连接字符串无效之前，您仍然需要确保您确实得到了服务器的响应。（网络错误可能会导致失败，并且关闭重试后，这种情况更有可能发生。）

代码将类似于以下内容（完全未经测试，甚至不确定它是否会编译）：

```
container.CreateIfNotExists(new BlobRequestOptions {
    RetryPolicy = RetryPolicies.NoRetry }); 
```

# desire2learn - 实用程序帐户的身份验证令牌已意外更改

> ID：12309768
> 
> 赞同：-1
> 
> 时间：2012-09-06T23:21:07.497
> 
> 标签：desire2learn

在周一（2012 年 9 月 3 日）的 D2L 中断之后，我们的应用程序一直从 Valence API 收到错误。我们使用实用程序帐户访问此非交互式应用程序的 API，我们发现此帐户的 UserID 和 UserKey 已意外更改。该帐户和应用程序是最近才创建的。我们没有更改此帐户的密码，并且我们已经将 DOME 中的“d2l.Security.Api.TokenTimeout”设置为 -1（永不过期）。

有没有人看到这个问题？更改是由意外的系统中断引起的吗？还是我们的设置中仍然缺少某些东西？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:06:22.360

有几种情况会导致用户身份验证令牌翻转：

*   TokenTimeout 期限（如果已设置）已过期。

*   用户更改了密码，或其他人（管理员）更改了密码。

*   管理员已提示系统强制令牌过期（通过使用用户管理工具选择一个或多个用户并为该用户“撤销应用程序访问权限”——这将使当前用户令牌无效，强制用户的第三方应用程序重新验证并请求新令牌）。

*   数据库还原发生在包含用户令牌时间戳条目的数据版本*之前的检查点*

请注意，在将 TokenTimeout 期限设置为无穷大*之前发布的任何用户令牌**仍受制于首次发布时的超时期限*。换句话说，如果您为实用程序帐户生成令牌，*然后*将 TokenTimeout 期限设置为 -1，您的实用程序帐户的令牌*将*过期（在创建它们的期限到期之后）。

根据您的问题，听起来这些似乎都与您的情况无关。是否还有*其他*用户帐户仍有可用的令牌？如果您需要确切地确定在这种特殊情况下您的这个特定实用程序帐户的令牌到期值发生了什么，您需要使用 D2L 打开一个支持事件，因为它需要检查您的服务及其数据库。

# css - 将 Compass/Sass 与另一个 CSS 框架一起使用

> ID：12309773
> 
> 赞同：2
> 
> 时间：2012-09-06T23:21:57.760
> 
> 标签：css, frameworks, compass-sass, sass

我最近开始使用 Compass/Sass 进行 CSS 编码，并且效果很好。我现在正在考虑尝试不同的框架（Skeleton、Foundation、Bootstrap 等）。对于那些有使用 Compass 经验的人，我的问题是，当您安装一个新框架时，它包括它自己的带有现成类的 css 文件。当你使用 Compass 时，它有你用来修改类和变量的 scss 文件。让我感到困惑的是，我需要转到 css 文件来修改任何默认类，然后返回到 scss 文件以执行 mixins、变量等，这似乎真的是多余且耗时的.

我应该剪切 css 文件中的所有内容并将其粘贴到 scss 文件中以使其更容易吗？或者，如果我想使用带有 Compass 的 Bootstrap 等框架，我应该采取不同的方法吗？

顺便说一句，我还有 compass.app，它允许我一键安装 Foundation 和 Bootstrap。我刚刚发现了另一个名为 Susy 的框架，它看起来也很酷。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T05:08:42.500

如果您更改扩展名，任何 CSS 文件都是有效的 scss，所以我不会太纠结于这些文件之间的差异。您可以轻松地将 Compass 与任何框架一起使用，并且许多框架已被移植到 Compass 以实现更好的集成。

另一方面，我认为 Compass 改变了框架可以/应该是什么的想法。CSS 框架很难维护和使用，因为 CSS 构建时没有考虑到框架抽象。结果是臃肿的、非语义的 API，它们试图做所有事情，但在此过程中偷工减料。你可以做得更好。

Compass 旨在促进更小、更集中的“插件”的共享。Susy 是这些插件之一，还有更多。你会注意到 Susy 不像 Foundation 或 Bootstrap：它只做网格，而且它以一种没有 Sass 不可能实现的方式来做。这对 API 的可能性产生了很大的影响。许多其他插件也是如此。

我使用自己的 Compass 插件组合来构建适合我需要的框架。我建议你也这样做。不要编写所有自己的代码，但要找到自己喜欢的插件来构建自己的框架。我的看起来像这样：

总是：

*   罗盘
*   苏西
*   模块化秤
*   断点

如所须：

*   指南针-rgbapng
*   动画
*   solarized（不是插件，但易于复制/粘贴）
*   时髦的按钮
*   还有很多很多...

您可以获得快速开发的所有好处，但更多的控制和更好的长期代码。

# java - 如何通过单击上一个和下一个按钮在 primefaces 轮播上动态加载内容

> ID：12309775
> 
> 赞同：1
> 
> 时间：2012-09-06T23:21:59.370
> 
> 标签：java, jsf-2, primefaces

在 primefaces 3.3 上有一个名为 carousel 的组件。他们的示例表明，他们一次从支持 bean 的构造函数加载了所有数据。如果您的内容很少，这很好

显然，如果我说要显示 3000 个项目，它会将所有项目都转储到浏览器中，从而使服务器甚至客户端都难以导航。

我想做的是。当用户单击轮播的上一个或下一个按钮时，我想在某种 ajax 中动态传递最后一个内容的索引并获取新内容，假设它是否从 1 到 5 可见，并且用户按下支持 bean 上的下一步按钮发送 5，所以我可以获取 6 t0 10。我该怎么做呢，这个功能实际上可以在 jsf 2.0 和 primefaces 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:38:47.643

正如 Damien 所指出的，PrimeFaces 的 Carousel 不支持延迟加载。然而，PrimeFaces 的 DataTable 确实支持这一点，并且具有类似的外观和感觉。

有关延迟加载的 DataTable 的出色示例，[请参阅 PrimeFaces 的展示](https://www.primefaces.org/showcase/ui/data/datatable/lazy.xhtml)。

当然你可以尝试修改 PrimeFaces 的源代码，因为它是一个开源项目。但我认为 DataTable 替代方案更容易。;-)

# java - 由于 Netbeans 的自动生成代码，在 Java 中的 JFrame 的背景中设置图像

> ID：12309777
> 
> 赞同：0
> 
> 时间：2012-09-06T23:22:05.297
> 
> 标签：java, swing, netbeans, image

由于 Netbeans 自动生成的代码，我想在我的 JFrame 上设置图像背景。

不幸的是，我正面临这个确切的问题： [http ://www.areaofthoughts.com/2011/08/netbeans-jframe-properties-iconimage.html](http://www.areaofthoughts.com/2011/08/netbeans-jframe-properties-iconimage.html)

当我尝试以图形方式添加它时，在 iconImage 的详细信息中，出现此错误：“不支持此属性的自定义编辑”

我尝试了上面链接中给出的解决方案，但不幸的是，这段代码不起作用：

```
public ArrayList<Image> getIconImages() {
   ArrayList<Image> imageList = new ArrayList();
   imageList.add(getClass().getResource("/<resource_path>" +
     "/image.png")).getImage());
   return imageList;  
} 
```

这段代码有什么问题，我该如何解决这个背景问题（无论如何？）。

请注意，当我使用 Netbeans 为标签做这件事时，我做这件事没有任何问题。例如，生成的代码如下：

```
jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/main/myimage/img.png"))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:49:00.247

您通常有两种选择。

1-创建一个自定义`JPanel`，可以将图像绘制为背景的一部分，然后将其添加到您的框架中（编译后，可以将其拖到设计器中），看看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

2- 设置`JFrame`to的布局，`BorderLayout`在框架中添加一个 JLabel。为标签分配图像/图标。将标签的布局设置为您需要的任何内容以及您的组件。

您可能需要调整标签内图标的水平和垂直位置以满足您的需要

例如，查看这个先前的答案[Place JLabel on top of JLabel with image in](https://stackoverflow.com/questions/12253979/place-jlabel-on-top-of-jlabel-with-image-in/12254063#12254063)

# javascript - 一个朴素的 jQuery(identifier).datepicker() 失败了。我做错了什么基础知识？

> ID：12309778
> 
> 赞同：0
> 
> 时间：2012-09-06T23:22:15.717
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我运行 jquery-1.8.0-min.js 和 jquery-ui-1.8.23.custom.min.js 的安装 <script>；后者被设置为包括所有内容，尤其是日期选择器。

之后，我有运行的 JavaScript：

```
jQuery(function()
    {
    jQuery('#event_date').datepicker();
    }); 
```

在 Chrome 中，这给出了错误：

```
Uncaught TypeError: Object #<Object> has no method 'datepicker' logistic.js:777
(anonymous function) logistic.js:777
p.Callbacks.k jquery.js:2
p.Callbacks.l.fireWith jquery.js:2
p.extend.ready jquery.js:2
D 
```

当我在浏览器中检查它时，当我单击应该被日期选择器替换的文本字段时，没有发生任何有趣的事情；它只是得到关注。

有什么想法（不是？）这里发生了什么？

# memory - 带有 NSMutableArrays 和 OData 对象的 NSKeyedArchiver 导致内存泄漏

> ID：12309780
> 
> 赞同：0
> 
> 时间：2012-09-06T23:22:25.590
> 
> 标签：memory, nsmutablearray, odata, memory-leaks, nskeyedarchiver

我在使用 OData 时遇到了内存泄漏问题，其中从 OData Web 服务检索的数据以`NSMutableArray`, 即的形式返回`return [response getResult]`，然后使用`NSKeyedArchiver`如下方式存储：

```
QueryOperationResponse *response = [dropDownQuery execute];

...

NSData *data = [NSKeyedArchiver archivedDataWithRootObject:[response getResult]]; 
```

当我从 Xcode 运行 Memory Leak Instrument 时，我在 NSKeyedArchiver 行上发现了很多泄漏。

我在想我需要如何确保从 OData 检索并返回的数据`NSMutableArray`符合`NSCoding`协议？我得到的数据只是字符串和整数。

我可以为此提供一些帮助吗？如果有人对使任何对象`NSMutableArray`符合要求有任何建议`NSCoding`，那就太好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T10:08:51.857

解决方法是修改从 OData 创建的代理类，因为它需要修改以符合 NSCoding 协议。

# html - IE9 h2 li 标签不显示

> ID：12309787
> 
> 赞同：1
> 
> 时间：2012-09-06T23:22:53.940
> 
> 标签：html, css, internet-explorer-9

我们的博客网站似乎在所有浏览器上都能正常工作。最近一位读者报告说他无法在此页面上看到问题：[Java 博客页面](http://www.fromdev.com/2008/05/java-threading-questions.html)

我用BrowserShots调试了一下，发现IE9和IE10都有这个问题

[http://browsershots.org/screenshots/1f1d2c6aa3b54e1423f5c344d2b1e21e](http://browsershots.org/screenshots/1f1d2c6aa3b54e1423f5c344d2b1e21e)

我确信这是 CSS 的一些问题，而 IE 可能对它处理得不好。

我可以处理任何已知问题或错误吗？

我已经尝试过两个相关的问题

[所以线程](https://stackoverflow.com/questions/6400511/h1-and-h2-classes-not-showing-up-in-internet-explorer)

[其他论坛](http://www.webmasterworld.com/css/4327604.htm)

到目前为止似乎没有任何效果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:32:24.790

主要问题似乎是您的文档的结构是为了实现自动编号。但是，这是否真的是对有序列表的适当使用是值得商榷的。

想到了两个解决方案：

*   手动编号（这不是一个大列表）
*   [基于 CSS 的计数器](http://www.w3.org/TR/CSS21/generate.html#counters)

如果您决定继续使用有序列表，则将[标记修复为有效](http://validator.w3.org/check?uri=http://www.fromdev.com/2008/05/java-threading-questions.html&charset=%28detect%20automatically%29&doctype=Inline&group=0)。至少，`LI`必须是 的直接子级`OL`，而不是嵌套在其他元素中。

更正了验证的标记示例：http: [//jsfiddle.net/adCz7/](http://jsfiddle.net/adCz7/)

```
<ol>
    <li>
        <h2>Test</h2>
        <p>Here is a paragraph</p>
    </li>
    <li>
        <h2>Test</h2>
        <p>Here is a paragraph</p>
    </li>
</ol> 
```

# python - 添加 list_filter 时，如何在 django modeladmin 更改列表中修复/设置列宽？

> ID：12309788
> 
> 赞同：8
> 
> 时间：2012-09-06T23:22:52.863
> 
> 标签：python, django, django-admin, django-admin-filters

我正在努力改进 django 项目中的 admin.py，虽然我对表格在 list_diplay 中的三个字段如何出现并不完全满意，但至少它比只获得一个默认对象列表要好跨越整个页面的列...

无论如何，我要问的是为什么：

```
class FieldAdmin(admin.ModelAdmin):
    list_display = ('name', 'label', 'standard',  ) 
```

看起来像这样：

![没有 list_filter](../Images/0b27c6569a2004051cf04d139edf3d3e.png)

当我添加 list_filter 时，如下所示：

```
class FieldAdmin(admin.ModelAdmin):
    list_display = ('name', 'label', 'standard',  )
    list_filter = ['standard',] 
```

为什么它看起来像这样？

![伊姆古尔](../Images/d5236e1d708da6141e7966a0091abce7.png)

有没有办法让列重新增长以填充宽度，就像添加过滤器之前一样？我一直在阅读文档和谷歌搜索，但它似乎没有内置？我正在做的项目目前正在使用 django 1,2,3,final。

FWIW，导致这种情况的 css 在这里：

```
.change-list .filtered table, .change-list .filtered .paginator, 
.filtered #toolbar, .filtered div.xfull {
    margin-right: 160px !important;
    width: auto !important;
} 
```

禁用宽度样式规范可以修复它，但如果有的话，我宁愿以 django 方式做事 - 我希望也许有一种方法可以从 FieldAdmin 类自定义过滤器视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T03:23:27.237

你可能想参考这个：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-vs-replacing-an-admin-template](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-vs-replacing-an-admin-template)

基本上，change_list.html 需要被覆盖。

你可以这样做：

```
templates/
  admin/
    app/
      change_list.html 
```

您可以从以下位置获取 change_list.html 的副本`django/contrib/admin/templates/admin/`

并以您想要的方式更新 css。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-26T06:59:55.473

管理员.py：

```
class MyClassAdmin(admin.ModelAdmin):

    class Media:
        css = {
            'all': ('fancy.css')
        } 
```

花式.css：

```
.column-foo {
    width: 20px;
} 
```

其中“foo”是一个字段名。

来源：[https ://docs.djangoproject.com/en/3.0/topics/forms/media/](https://docs.djangoproject.com/en/3.0/topics/forms/media/)

# search - Google Enterprise Search 与 Lucene/Solr/Nutch 在搜索私人文档方面的搜索相关性如何？

> ID：12309792
> 
> 赞同：1
> 
> 时间：2012-09-06T23:23:56.797
> 
> 标签：search, solr, lucene, nutch

GES 是否具有优势，因为它可以通过统计分析访问大量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T20:34:25.203

如果 Google Enterprise Search 是 Google Search Appliance：[http](http://www.google.com/enterprise/search/solutions_productivity.html) ://www.google.com/enterprise/search/solutions_productivity.html ，那么我相信答案是否定的，那就是利用 Google.com 所代表的世界的所有综合知识.

Google Search Appliance 不是 Google.com，它拥有这些服务所拥有的所有搜索专业知识、自定义算法和神奇的调整。它只是抓取您的数据，然后根据它在您的 Intranet 上找到和索引的内容进行匹配。

它的设置要简单得多，但是我们已经与许多最终在以下情况下迁移出去的人进行了交谈：

1.  被索引的文档数量增长到 GSA 变得非常昂贵的程度
2.  对搜索结果进行更多控制的愿望压倒了 GSA 公认的易于设置！在相关性方面，GSA 完全是一个黑匣子。

# svn - 使用 Bamboo 构建定义父 POM 的 Subversion/Maven 项目

> ID：12309797
> 
> 赞同：2
> 
> 时间：2012-09-06T23:24:29.130
> 
> 标签：svn, maven, bamboo

我有一个复杂的项目结构，如下所示：

```
- root (no pom)
     - parent(parent pom.xml)
     + project A (pom.xml)
     + project B (pom.xml)
     - project C (pom.xml)
         - subproject 1 (pom.xml)
         - subproject 2 (pom.xml)
     + project N (pom.xml) 
```

我需要`subproject 2`使用 Bamboo 服务器构建。我使用 Bamboo 来签出`subproject 2`代码，但是当我运行它时`mvn install`，它会失败并显示“不可解析的父 POM”消息。

当所有代码都在一个位置时，构建运行良好。我不想在`root`级别上签出代码，因为我不想签出大量项目（在我的示例中，项目 A、B、N 和子项目 1）

我尝试检查父项目、项目 C/pom 和子项目 2 的代码 3 次，但代码被放置在彼此无关的单独目录中，因此那里没有太多帮助

PS我没有使用任何模块，尽管我确实尝试过使用模块并且没有任何区别。我没有发布实际的 POM，因为它们非常微不足道，基本上子 pom 具有`parent`元素，这就是所有关系。

所有上游项目都部署到本地和远程仓库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:01:16.263

mvn 将在三个地方查找依赖项，在本地文件系统的相对路径中，在本地机器上的 m2 存储库中缓存，或在外部存储库中。如果您将所有依赖项安装在竹子可以访问的存储库上，您的构建可能会工作。

为了测试这一点，在您的本地机器上，您可以从根目录执行 mvn install（将所有依赖项放在您机器上的 m2 repo 中），然后在单独的目录中检出 subproject2，然后 mvn install subproject2？

如果可行，那么子项目 2 的依赖项需要位于竹子可以访问的 maven 存储库中。在使用竹子进行 mvn install 之前，使用诸如[artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)之类的东西来部署它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:15:54.470

我们有一个非常相似的项目结构，我刚刚验证了我能够创建一个 Jenkins 作业，该作业只检查等效项`subproject1`并使用`mvn -U clean install`. 我无法访问 Bamboo 实例，但 Jenkins 和 Bamboo 都只是在后台调用 Maven，所以这里应该没有区别。

正如您所提到的，另一个可行的选项是检出整个存储库（或包含根目录和所有模块的目录）并`mvn -U clean install -pl subproject1 -am`在父 POM 上运行。

**为了帮助您解决这个问题，我们确实需要更多信息。** 您在其中一条评论中提到“所有 [上游] 依赖项都已部署到 repo”。您是指您的本地存储库（即 .m2/repository）吗？您应该仔细检查该目录是否包含所有父 POM。您是否从代理（即 Artifactory/Nexus）解析所有工件？如果是这样，还要检查那里的 POM 是否可用。

您当前的结构图未显示 POM 的位置。我假设您已正确设置它，但我见过人们将子模块放在奇怪位置的情况，这可能会导致问题。POM的[相对位置很重要](http://www.sonatype.com/books/mvnex-book/reference/multimodule-sect-simple-parent.html)（除非您进行了一些自定义）。您能否`tree`在根目录上运行并清理输出，以便我们准确知道您的 POM 彼此之间的关系？例如：

```
parentProject
|-- projectA
|   |-- pom.xml
|
|-- projectB
|   |-- pom.xml
|   |
|   |-- subProject1
|   |   |-- pom.xml
|   |    
|   |-- subProject2
|       |-- pom.xml
|
|-- pom.xml 
```

最后，您能否导航到您尝试构建的子项目/模块并发布输出`mvn help:effective-pom`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T22:34:17.643

每个 maven 模块都应该是自包含的，使用谈论 ../parent 的相关链接打破了这种设计。

尝试通过 GAV 属性显式定义父项，然后确保`install`在本地 maven 存储库中编辑这些 pom，您将能够构建子项目。

我们运行 15 个模块，构建了 3 个级别，这一切都是可能的。

您遇到的唯一问题是，当您升级版本时，您必须启动根 pom 文件的安装以引导解决过程。

# jakarta-ee - Tomcat 和代理设置

> ID：12309800
> 
> 赞同：11
> 
> 时间：2012-09-06T23:24:58.963
> 
> 标签：jakarta-ee, tomcat, proxy, tomcat7

在 tomcat7 上运行了一个 servlet，它对第三方网站进行 web 服务调用。该调用在 Windows 机器上运行良好，但从 tomcat 运行时失败。Tomcat 不会自动使用 Windows 的代理设置吗？我添加了

```
set JAVA_OPTS=%JAVA_OPTS% "-Dhttp.proxySet=true"
set JAVA_OPTS=%JAVA_OPTS% "-Dhttp.proxyHost=IP"
set JAVA_OPTS=%JAVA_OPTS% "-Dhttp.proxyPort=8080" 
```

到 CATALINA.BAT 和

```
http.proxyHost=IP
http.proxyPort=8080 
```

到 catalina.properties 但仍然没有任何变化。我们如何将 Tomcat 设置为使用 windows 的代理设置，有没有办法检查 tomcat 是否正在获取指定的代理设置？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-22T08:41:53.663

我不同意`java.net.Proxy`.

如果你需要改变它会发生什么？新版本，新版本。代理的设置应该很容易。它适用于系统属性或 tomcat JAVA_OPTS。我以两种方式使用它。请注意并确保您知道加载了哪些 JAVA_OPTS，使用了哪些 java 等等，因为有些 tomcat 有自己的 java 版本。关于上一篇文章，在加载之前无法使用 java :)。所以Tomcat在使用系统属性之前不能使用它......只有当tomcat使用另一个不读取系统属性的JRE时。

我只是测试这个设置：

```
set "JAVA_OPTS=%JAVA_OPTS% -Dhttp.proxyHost=proxy.com -Dhttp.proxyPort=8080 " 
```

在 catalina.bat 中运行良好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T08:07:19.343

在指定代理设置时，您必须定义代理服务器名称，如下所示：

```
"-Dhttp.proxyHost=proxy.example.com" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-16T22:01:44.317

创建 /bin/setenv.sh（对于 WINDOWS \bin\setenv.bat）：

```
JAVA_OPTS="-Dhttp.proxySet=true -Dhttp.proxyHost=<proxy_hostname> -Dhttp.proxyPort=<port_number> -Dhttp.nonProxyHosts=<domain_one>|<domain two> $JAVA_OPTS" 
```

**注意**：如果你已经有 setenv.sh/setenv.bat，你可以添加一行上面的命令。Tomcat 启动脚本会在启动一个 tomcat 实例之前自动运行 setenv 脚本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-04T07:22:03.897

您也可以在 Tomcat 中实现 HTTP 代理、HTTPS 代理和 HTTP/HTTPS 非代理主机。您需要更新两个文件，即`bin/Catalina.sh`和`conf/catalina.properties`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T12:16:53.970

不，Tomcat 不会自动使用系统代理设置。

我建议你看看提供的设施`java.net.Proxy`。这允许您在运行时动态指定代理。系统属性有效，但它们只被读取一次，如果 Tomcat`HttpURLConnection`在您设置它们之前已经将其用于自己的目的，那就结束了：设置无效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-04T08:23:11.943

您可以使用 jProxyLoader 库。使用此库，您可以将 Tomcat 配置为仅将代理用于与特定主机的连接。在您的情况下，您可以将 Tomcat 配置为仅通过代理连接到服务于 Web 服务的主机（所有其他连接将由 Tomcat“正常”方式处理 - 没有代理）。

项目网站上解释了完整的设置：http: [//jproxyloader.sourceforge.net/examples/web-application-on-tomcat.html](http://jproxyloader.sourceforge.net/examples/web-application-on-tomcat.html)

# comments - 识别 JLex 上没有特定结尾的评论

> ID：12309815
> 
> 赞同：0
> 
> 时间：2012-09-06T23:26:31.630
> 
> 标签：comments, lex

我必须使用 JLex 识别这样的评论：

```
;this is a comment 
```

如您所见，它没有可识别的结局。我到处搜索，根据我发现的内容，我应该使用以下内容之一：

```
COMMENT = [;]([^\n])*
COMMENT = [;]([^\r\n])* 
```

但是当一个正常的词出现在评论之后（在下一行）我得到一个错误。我的解析器很好，我确定我的问题出在我的 JLex 上。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:18:13.303

尝试在评论开始时进入新状态，并在评论结束时离开该状态。

这是来自 JLexPHP 的示例。

```
<?php
include 'jlex.php';
%%
%state COMMENTS
%%

<YYINITIAL> ";" {
    $this->yybegin(self::COMMENTS);
}
<COMMENTS> [^\n] {
    return $this->createToken();
}
<COMMENTS> [\n] {
    $this->yybegin(self::YYINITIAL);
} 
```

# javascript - jQuery延迟怪异

> ID：12309822
> 
> 赞同：2
> 
> 时间：2012-09-06T23:27:31.897
> 
> 标签：javascript, jquery, asynchronous, jquery-deferred

我正在编写一个实现延迟的小脚本，并遇到了一些与我期望的 Javascript 不同的代码。

```
var dfd = $.Deferred()
  , view  = $.get("filename.tmpl");

$.get("filename.json")
  .always(function (model) {
    dfd.resolve(model);
  });

$.when(view, dfd)
  .done(function (view, model) {
    // do stuff with view - even if there is no model
  }); 
```

这很好用，但是当我对此进行重构时，它会停止工作：

```
var dfd = $.Deferred()
  , view  = $.get("filename.tmpl");

$.get("filename.json").always(dfd.resolve);

$.when(view, dfd)
  .done(function (view, model) {
    // do stuff with view - even if there is no model
  }); 
```

我看不出有任何理由不应该这样做。该函数期望第一个参数是模型或未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:35:23.620

当你这样做时：

```
$.get("filename.json").always(dfd.resolve); 
```

而不是这个：

```
$.get("filename.json")
  .always(function (model) {
    dfd.resolve(model);
}); 
```

`this`你会得到一个不同的对象作为方法的指针传递`resolve()`。第二个将在`dfd`. 第一个将把它称为从你返回的延迟对象的上下文，`$.get()`这是不同的。

重要的是要记住，在传递回调时`dfd.resolve`只会获得指向方法的指针。它不会设置`resolve`将被调用的上下文。这是在方法内部设置的`.always()`。

# javascript - 如何修复：当 javascript 更改 DOM 时，iOS 会丢弃 CSS 文件

> ID：12309825
> 
> 赞同：0
> 
> 时间：2012-09-06T23:28:20.003
> 
> 标签：javascript, css, ios, dom, innerhtml

当我使用、innerHTML、appendChild 和 removeChild 更改文档时，我在 iOS 中遇到了一个持续存在的问题，我的 CSS 声明被完全剥离，我得到了页面的无样式版本。

经过几个小时的谷歌搜索后，我什至无法找到任何与此非常接近的东西。尽管我只在 Android Galaxy s2 和 iPad 2 上进行了测试，但我无法在其他移动设备上复制该问题。

我知道这不是专门的 safari，因为我已经在 PC 上测试了所有主要浏览器，并且 CSS 加载完全正常。这似乎与 iOS 的 javascript 实现有关。

这是我录制的关于该问题的视频（2 分钟长）：
[http ://www.facebook.com/photo.php?v=4573014247189](http://www.facebook.com/photo.php?v=4573014247189)

编辑：我已经能够使用最低限度的复制行为在实时站点上复制它。
[http://mlkart.com/ios_bug](http://mlkart.com/ios_bug)

编辑：发现问题，目前正在寻找替代方案，将在找到解决方案时发布，但这是 iOS 中出现问题的原因：

```
document.documentElement.innerHTML = document.documentElement.innerHTML.replace(oldStuff, newStuff); 
```

最终发生的事情是身体标签之外的所有东西都被错误地剥离了。这可能是一个 iOS javascript 错误或只是一个怪癖，但据我所知，这应该是一个有效的选择器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:49:50.487

你为什么不在 w3c [http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)中验证你的 html有时当 html 出现错误时，一些浏览器会纠正错误而其他浏览器不会。

根据浏览器的不同，javascript 也可以以不同的方式工作。一旦我有一个完美的 jQuery 代码在 fireFox 而不是在 IE 中。错误是我正在获取一个元素的宽度，但最初这个元素没有宽度，所以对于 IE 它是 0，对于 fireFox 它取决于它里面的元素。

尝试在您的 PC 中的 safari 中对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:48:50.770

在 iOS 中，关于“documentElement”的 javascript 函数实现存在问题。使用此代码会破坏您在 iOS 环境中的站点，但我不知道这个问题是在 Oracle 方面还是在 Apple 方面。

```
document.documentElement.innerHTML = document.documentElement.innerHTML.replace(oldStuff, newStuff); 
```

这已经删除了我在 iOS 中的 HTML 文档中的所有内容，包括 body 标签。

我接受的解决方案是替换所有出现的

```
document.documentElement.innerHTML 
```

和

```
document.body.innerHTML 
```

解决方案经过测试，似乎在我可以访问的所有现代可用测试途径中都有效。

# ios - iOS - 将 sqlite 复制到 CoreData 的捆绑包

> ID：12309828
> 
> 赞同：1
> 
> 时间：2012-09-06T23:29:05.423
> 
> 标签：ios, sqlite, core-data, app-bundle

这是我所做的：使用填充版本的应用程序创建了 sqlite 文件。将该文件复制到我的应用程序包中，确保目标已设置并且它存在于“复制包资源”中

然后我尝试像这样填充核心数据：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{  

if (_persistentStoreCoordinator != nil) {
    return _persistentStoreCoordinator;
}
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"TestModel.sqlite"];

if( ![[NSFileManager defaultManager]
      fileExistsAtPath:[storeURL path]] ) {
    // If there’s no Data Store present (which is the case when the app first launches), identify the sqlite file we added in the Bundle Resources, copy it into the Documents directory, and make it the Data Store.
    NSString *sqlitePath = [[NSBundle mainBundle]
                            pathForResource:@"TestModel" ofType:@"sqlite"
                            inDirectory:nil];
    NSError *anyError = nil;
    BOOL success = [[NSFileManager defaultManager]
                    copyItemAtPath:sqlitePath toPath:[storeURL path] error:&anyError];

    if(success){
        NSLog(@"sucess, loading into store");
        NSError *error = nil;
        _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
        if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }else{
            NSLog(@"error with sqlite file");
        }
    }
}

return _persistentStoreCoordinator; 
```

}

但我得到这个错误：

```
NSFileManager copyItemAtPath:toPath:error:]: source path is nil 
```

我究竟做错了什么？是说在捆绑包中找不到sqlite文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:00:33.707

我认为这是因为当我将文件从 Finder 导入 Xcode 时，它​​被命名为“TestModel”而不是“TestModel.sqlite”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:47:26.460

从文档

> bundlePath -- 顶级捆绑目录的路径。这必须是有效路径。例如，要为 Mac 应用程序指定捆绑目录，您可以指定路径 /Applications/MyApp.app。

*编辑：我想我用错了方法:(，不过还是试试这个！->为什么不使用`- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)extension`？跳过目录（因为你不想要一个）。

# objective-c - LSSharedFileListInsertItemURL 无法在 10.7 及更早版本中将图标分配给 Finder 侧边栏项目

> ID：12309830
> 
> 赞同：4
> 
> 时间：2012-09-06T23:29:11.337
> 
> 标签：objective-c, macos, cocoa

我正在尝试在 Finder 侧边栏中添加指向文件夹的链接。它在所有其他操作系统中都可以正常工作，但是当我尝试在 Mac OS X 10.7 或 Mac OS X 10.8 中将图标添加到此项目时，什么也没有发生。然而，在 10.6 中，我的代码运行良好。

```
CFURLRef url = (CFURLRef)[NSURL fileURLWithPath:self.syncFolderPath]; 
IconRef iconRef;
FSRef fref;

CFURLRef iconURLRef = (CFURLRef)[NSURL fileURLWithPath:@"/pathTo/icon.icns"];
CFURLGetFSRef(iconURLRef, &fref);
RegisterIconRefFromFSRef('SSBL', 'ssic', &fref, &iconRef);

// Create a reference to the shared file list.
LSSharedFileListRef favoriteItems = LSSharedFileListCreate(NULL, kLSSharedFileListFavoriteItems, NULL);

if (favoriteItems) {
    LSSharedFileListItemRef item = LSSharedFileListInsertItemURL(favoriteItems, kLSSharedFileListItemBeforeFirst, NULL, iconRef, url, NULL, NULL);

    if (item){
        CFRelease(item);
    }
}   

CFRelease(favoriteItems); 
```

有人可以给我建议吗？我的代码有什么问题？

# c# - 如何将我的设置公开给其他类

> ID：12309834
> 
> 赞同：2
> 
> 时间：2012-09-06T23:29:52.047
> 
> 标签：c#, silverlight, architecture, prism

我有一个应用程序。

我登录。

我打了一个网络电话，得到了一堆设置。

我发布了一个 eventtaggregator 事件，将这些设置发送到任何其他想要监听和获取它们的类。

对我来说，这似乎是错误的设计。对于松散耦合的项目，在一个类中共享一堆设置的最佳方式是什么？我知道我可以制作一个静态全局变量，但这听起来也不是松散耦合的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T23:33:04.213

您可以定义`ISettingsProvider`接口并使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[IoC 容器](http://en.wikipedia.org/wiki/Inversion_of_control)（如[Unity](http://unity.codeplex.com/)或[Autofac](http://code.google.com/p/autofac/)）将此接口实现注入您想要的任何类并在那里使用它。
它将是松散耦合的，因为您将不依赖于实际设置提供程序的实现，并且可以轻松地更改实现（例如，用于单元测试）。

# deployment - 将 SSAS 多维数据集部署到环境

> ID：12309835
> 
> 赞同：1
> 
> 时间：2012-09-06T23:30:05.557
> 
> 标签：deployment, configuration, ssas, xmla

我们在本地（在我们的工作站上）使用 BIDS 2008 来开发我们的 OLAP 对象/多维数据集。到了推广到开发的时候，我们可以通过 BIDS 进行部署。但是，当需要手动部署时（例如，到 UAT 或 Live），我们正在生成一个 XMLA 文件。这（生成的 XMLA 文件）当然包含特定于环境的信息（例如服务器名称、数据库名称等）。如果我们想自动生成 XMLA 文件以部署到每个环境，是否有配置类型过程来参数化这些值（如 .NET：web.config：appSettings*或*SSIS：dtsConfig）。

请注意，我们可以解析 XMLA 文件并根据环境替换这些值（例如，通过 xmlpoke），但这有点混乱并且取决于 XML 路径结构，因此宁愿避免这种方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:16:46.740

这应该为您指明正确的方向：[http ://blog.kejser.org/2006/11/28/automating-build-of-analysis-services-projects/](http://blog.kejser.org/2006/11/28/automating-build-of-analysis-services-projects/)

以下是有关部署实用程序和命令行开关的更多信息：http: [//msdn.microsoft.com/en-us/library/ms162758 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms162758(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:02:28.000

```
before using Micrsoft.analysisservice.deplyement to generate the XMLA file to deply in an AS istance, we need update the files bellows to change all connection string, deployment option,

project.asdatabase
project.deploymenttargets
project.configsettings
project.deploymentoptions

regards, 
```

# php - 这段 PHP 是做什么的？（密码解密）

> ID：12309836
> 
> 赞同：0
> 
> 时间：2012-09-06T23:30:11.267
> 
> 标签：php, passwords, md5, sha1, encryption

> **可能重复：**
> [我可以 md5(sha1(password)) 吗？](https://stackoverflow.com/questions/9143101/can-i-md5sha1password)

```
$pass = md5($_POST["pass"].sha1($_POST["pass"])) 
```

我在某个地方看到了这个并且很困惑。这是否读取密码并使用 sha1 然后 md5 或反向解密？还是我还缺少其他一些东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T23:32:22.197

它`$_POST['pass']`使用`sha1`算法进行散列，然后将该散列与 组合`$_POST['pass']`，然后使用算法对生成的组合字符串进行散列`md5`。

为什么，我不知道。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T23:32:48.567

它所做的是将密码与它的 sha1 散列版本（其中之一是盐）连接起来，然后将其散列成一个 MD5 值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T23:32:03.637

实际上它对密码进行哈希处理。

它将明文密码与 sha1'd 密码连接起来。然后它 Md5 整个事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T23:31:46.243

它使用 MD5 对其进行哈希处理。

从表单中获取您的密码，添加盐并对整个内容进行哈希处理。

**笔记：**

“盐”是另一个哈希。这样做**不是一个好主意**，盐应该是您制作的*随机值*，以确保密码安全。

# java - 能够在热交换类时避免在 tomcat 中重新加载 spring 上下文

> ID：12309837
> 
> 赞同：2
> 
> 时间：2012-09-06T23:30:23.887
> 
> 标签：java, eclipse, spring, tomcat, maven

作为大多数开发人员，我们对方法的主体进行了微小的更改，并希望在不必停止和启动容器的情况下对其进行测试。雄猫。JVM 提供的热交换功能看起来很有希望，我们希望确保 Tomcat 和 Spring 上下文都不会重新加载。当我们有一个单一的模块 maven 项目时，这非常有效。但是，当我们处理风格的多模块 maven web 项目时

```
kilo
-kilo-business
-kilo-common
-kilo-dao
-kilo-web 
```

并且我们希望更改依赖模块中的类的方法体（例如`kilo-business`模块所`kilo-web`依赖的模块），热交换会导致重新加载tomcat的上下文，因此也会重新加载spring的上下文。`kilo-web`如果对模块本身的类进行了更改，则不会重新加载上下文。这让我相信，因为我有一个现在已经修改的 jar `WEB-INF/lib`，Tomcat 处理它的方式与`WEB-INF/classes`. 当然，这种推论是经验性的——如果有人能指出真实的来源及其推理，那就太好了。

更重要的是，有什么想法可以避免这种情况发生吗？如果我们有依赖 jar 的内容，这个问题会消失`WEB-INF/classes`吗？我无法找到一种方法让 eclipse WTP 插件将依赖项目部署为`WEB-INF/classes`.

我们听说过 JRebel 提供的好东西，但想确保充分利用 JVM 本身可以提供的功能。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:57:14.900

实际上，tomcat 实例是通过 eclipse 在调试模式下运行的。当我在 中更改类的方法体时`kilo-web`，JVMTI 进行了热代码交换，因此更改反映在输出中，但 WEB-INF/classes 中的类本身没有被修改（从上次修改的时间戳验证）。依赖模块也会发生同样的情况，`kilo-common`尽管我间歇性地注意到它（但仍然有效）。毕竟这是一条红鲱鱼 - 我很抱歉。

更一般地说，在听了[Jevgeni Kabanov 关于类加载器的演讲](http://zeroturnaround.com/labs/video-do-you-really-get-class-loaders-a-jazoon-talk-by-jevgeni-kabanov/)之后，Tomcat 使用的重新加载类的普通方法需要重新加载上下文，因为创建了一个全新的类加载器，它从现有的类加载器中复制状态（并遇到相关泄漏的怪癖） . 总的来说，一个很棒的视频。

# c++ - 记忆中的视觉模式？

> ID：12309838
> 
> 赞同：25
> 
> 时间：2012-09-06T23:30:24.067
> 
> 标签：c++, windows, debugging, memory

今天在运行在 VMWare 中的 Win 7 机器上开始远程调试 C++ 项目，并惊讶地看到随机内存位置上的以下模式：

![在此处输入图像描述](../Images/1426ba39afc7b54c084f27c21327a8a5.png)

谁可以编写此代码（不是我！）以及出于什么原因？只是好奇是否有人见过这样的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T23:35:15.593

它看起来像使用 8bpp 的字体的渲染掩码（字体中的每个字符（字体 + 大小 + 样式）在内存中渲染一次，然后 blitted 到输出表面），这表明您已启用字体抗锯齿功能.

我假设您的项目涉及 GUI，您可能正在查看 GDI 用于存储光栅化字体的共享内存区域。

如果不是，那么这可能只是前一个进程或操作系统组件的剩余内存，在被您的应用程序使用之前未归零。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T23:35:21.120

很难说。可能内存用于缓冲某些字体（在本例中为零），甚至缓冲打印机或屏幕内容。

# git - Git合并分支的最后一次提交/提交者

> ID：12309841
> 
> 赞同：1
> 
> 时间：2012-09-06T23:31:01.330
> 
> 标签：git, git-merge, git-commit, git-log, git-show

可能已经有人问过了，但我在这里找不到。

我有一个分支`FEATURE`合并到一个分支中`STABLE`，目前当我`git show`从`STABLE`获得最后一次提交时

```
commit 265d684b67e66ba762bd438c44e49881f7fd571b
Merge: 5285837 78d9687
Author: xxxxx
Date:   Thu Sep 6 18:58:46 2012 -0400

    Merge branch 'FEATURE' into STABLE 
```

无法弄清楚`FEATURE`在合并到分支之前如何找到最后一次提交对分支的更改的人`STABLE`？

这是向最后提交一些更改的提交者发送通知所必需的。

让我知道是否需要任何进一步的信息以及任何帮助/建议将不胜感激？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-31T16:39:21.817

不完全是您要查找的内容，但要打印出所有远程分支及其最后提交的作者，我在 Bash 上使用了以下命令：

```
IFS=$'\n' && for branch in $(git branch --all | grep "remotes/origin" | sed "s/->.*$//" | sort); do echo "$(git log --format=format:"%an" ${branch//[[:space:]]/} | head -n 1) - ${branch//[[:space:]]/}"; done | sort && unset IFS 
```

一定要先做`git fetch --all`，以便将所有公共分支镜像到您的本地存储库中。

对于旧版本的 Git（1.9.x 及更早版本）， git branch 的输出有所不同，它没有在箭头（“->”）之后打印本地跟踪分支。

```
IFS=$'\n' && for branch in $(git branch --all | grep "remotes/origin" | sort); do echo "$(git log --format=format:"%an" ${branch//[[:space:]]/} | head -n 1) - ${branch//[[:space:]]/}"; done | sort && unset IFS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:40:52.523

在您的情况下，合并前的最后一次提交具有 78d9687 哈希。它是提交消息中的第二个。所以如果你知道是谁做的试试

```
$ git show 78d9687 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:42:26.810

您可以使用相对提交表示法来显示提交。在您的示例中，由于您将 FEATURE 合并到 STABLE 中，因此 STABLE 上的最后一次提交是`HEAD^1`（第一个父级），而 FEATURE 上的最后一次提交是`HEAD^2`（第二个父级）。

因此，要显示 FEATURE 引入的最后更改，您可以使用：

```
git show HEAD^2 
```

在此之前显示一个：

```
git show HEAD^2~1 
```

等等。

# sql - 连接表并返回 2 个具有 NULL 值的单独条目

> ID：12309843
> 
> 赞同：-1
> 
> 时间：2012-09-06T23:31:43.573
> 
> 标签：sql, join, union

我有 4 个表，并希望以最有效的方式返回表，其中键映射到正确的条目。

表 A 列：

```
[ SVC_PREFIX | SVC_CD | ... ] 
```

表 B 列：

```
[ SVC_PREFIX | SVC_CD | SVC_ID |... ] 
```

表 C 列：

```
[ SVC_ID | ... ] 
```

表 D 列：

```
[ SVC_ID | ... ] 
```

表 A 通过 SVC_PREFIX 和 SVC_CD 映射到表 B 然后表 B 负责通过 SVC_ID 检索表 C 和 D 表 C 和 D 几乎相同，除了表 D 比 C 少一些列 例如，C 可能有一个 isGood 和isSilly 但 D 只会有 isSilly。是否可以检索条目，以便 D 将被提取为 isSilly 的 NULL 值，而 C 将带来相应的数据？

这是一个示例：表 A 列：

```
[ SVC_PREFIX | SVC_CD | anotherData ]
[ 111 | 123 | AAA ] 
```

表 B 列：

```
[ SVC_PREFIX | SVC_CD | SVC_ID ]
[ 111 | 123 | 007] 
```

表 C 列：

```
[ SVC_ID | isGood | isHappy ]
[ 007 | Y | Y ] 
```

表 D 列：

```
[ SVC_ID | isGood ]
[ 007 | Y ] 
```

我要检索的数据：

```
[ SVC_PREFIX | SVC_CD | anotherData | SVC_ID | isGood | isHappy ] 
```

实际数据

```
[ 111 | 123 | AAA | 007 | Y | Y ]
[ 111 | 123 | AAA | 007 | Y | NULL ] 
```

我想将 C 和 D 的表都显示为单独的行。

目前，我有一个隐式连接，但没有达到我想要的结果......

```
SELECT *
FROM A,B,C,D
WHERE A.SVC_PREFIX = B.SVC_PREFIX
AND A.SVC_CD = B.SVC_CD
AND B.SVC_ID = C.SVC_ID
AND B.SVC_ID = D.SVC_ID
AND C.SVC_ID = D.SVC_ID 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:50:44.807

您可以使用 UNION。我相信这将在 SQL Server 中工作。

```
SELECT A.SVC_PREFIX, B.SVC_CD, A.anotherData, CD.SVC_ID, CD.isGood, CD.isHappy  
FROM A
JOIN B ON B.SVC_PREFIX = A.SVC_PREFIX AND B.SVC_CD = A.SVC_CD
JOIN
(
  SELECT SVC_ID, isGood, isHappy
  FROM C

  UNION

  SELECT SVC_ID, isGood, NULL AS isHappy
  FROM D
) AS CD ON CD.SVC_ID = B.SVC_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:42:11.100

尝试加入（内部联接）：

```
SELECT *
FROM A
JOIN B ON B.SVC_PREFIX = A.SVC_PREFIX
JOIN C ON C.SVC_ID = B.SVC_CD
JOIN D ON D.SVC_ID = C.SVC_CD 
```

# objective-c - 读取符号文件

> ID：12309852
> 
> 赞同：0
> 
> 时间：2012-09-06T23:32:21.827
> 
> 标签：objective-c, ios, xcode, symbols

我正在我们的 iOS 应用程序中收集未捕获的异常，并试图象征回溯。不幸的是，我捕获的不是 xcode 期望的崩溃报告的标准格式，所以我试图自己从符号文件中解码符号。我正在尝试研究符号文件的格式，以便实现这一点。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:39:23.100

Gwynne Raskind 有[足够的信息](http://mikeash.com/pyblog/friday-qa-2012-04-27-plcrashreporter-and-unwinding-the-stack-with-dwarf.html)来阻止你这样做。您应该真正使用现有解决方案之一。

如果你还是决定这样做，祝你好运。

# c# - 从 SQL Server 迁移数据到哪里？

> ID：12309856
> 
> 赞同：1
> 
> 时间：2012-09-06T23:32:43.927
> 
> 标签：c#, sql-server, winforms, entity-framework, data-access-layer

我正在开发一个以前使用 EF、SQL Server、C# 和 WinForms 开发的应用程序。由于某些原因，我们需要删除 SQL Server 并使用一些数据并将数据放入其他容器中，如 XML、Excel 表或内存类中。

DAL 是使用带有存储库和 UOW 模式的 EF 设计的。您能否建议我什么是最好的迁移方式以及什么格式可以轻松传输数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:22:54.353

由于数据访问被分离到存储库中，您应该能够编写一个新的存储库实例，允许您以新格式检索数据。具体来说，如果您想以 XML 格式保存数据，您可以编写一个使用 Linq-to-XML 检索数据的新存储库。

我不知道将数据从 SQL Server 传输到 XML 的快速方法。如果我这样做，我可能会编写一些自定义应用程序来进行转换，但我怀疑对于这种类型的迁移有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:25:23.220

你的问题重复了这个问题：

*   [带有 XML 文件的实体框架](https://stackoverflow.com/questions/608477/entity-framework-with-xml-files)
*   [如何将 Entity Framework 4.0 与 Xml 或内存存储（非 SQL）一起使用](https://stackoverflow.com/questions/4017332/how-to-use-entity-framework-4-0-with-xml-or-in-memory-storage-non-sql)

似乎有 virtuoso xml 的提供者：

*   [http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtAdoNet35Provider](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtAdoNet35Provider)

一些提示可以在这里找到：

*   [http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/6f6164f6-fced-43de-b3fc-eccbd74dd482](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/6f6164f6-fced-43de-b3fc-eccbd74dd482)
*   [http://blogs.msdn.com/b/adonet/archive/2009/11/05/model-first-with-the-entity-framework-4.aspx](http://blogs.msdn.com/b/adonet/archive/2009/11/05/model-first-with-the-entity-framework-4.aspx)
*   [http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)

EF ist 基本上是为数据库抽象而开发的。如果您尝试存储 XML，则需要编写自己的 xml 数据库提供程序。

您的选择是：

*   迁移到 SQL compact（但不在 XML 中）
*   使用 XPath 并重写您的代码
*   将 Xpath 用于您自己的数据库提供程序

请注意，您的 xml 文件大小和速度取决于数据量！使用多个 xml 文件最终会一团糟。

# javascript - 使用 Javascript 向后循环 XML

> ID：12309866
> 
> 赞同：0
> 
> 时间：2012-09-06T23:35:25.610
> 
> 标签：javascript, xml, loops, xpath

这是我关于堆栈溢出的第一个问题，希望你们能帮助我。

这是我的xml

```
<?xml version="1.0"?>
<RecentPhotoUploads>
<PHOTO><SOURCE>6171.jpg</SOURCE></PHOTO>
<PHOTO><SOURCE>6173.jpg</SOURCE></PHOTO>
<PHOTO><SOURCE>6895.jpg</SOURCE></PHOTO>
<PHOTO><SOURCE>Tulips.jpg</SOURCE></PHOTO>
</RecentPhotoUploads> 
```

这是我的 javascript 代码

```
 var xml=loadXMLDoc("../upload.xml");
    var source="/RecentPhotoUploads/PHOTO/SOURCE"

    var nodes=xml.evaluate(source, xml, null, XPathResult.ANY_TYPE, null);
    var result=nodes.iterateNext();

                while (result)
                {
                document.write("<h2>" + result.childNodes[0].nodeValue + "</h2>");
                document.write("<a href='../pics/" + result.childNodes[0].nodeValue + "</a>");
                result=nodes.iterateNext();
                } 
```

我将如何向后循环这个 xpathresult？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:45:52.340

为什么要向后导航？您可以向后打印...

```
var xml=loadXMLDoc("../upload.xml");
var source="/RecentPhotoUploads/PHOTO/SOURCE"

var nodes=xml.evaluate(source, xml, null, XPathResult.ANY_TYPE, null);
var result=nodes.iterateNext();

var buffer = "";
while (result) {
    buffer = "<h2>" + result.childNodes[0].nodeValue + "</h2>"
           + "<a href='../pics/" + result.childNodes[0].nodeValue + "'>"
           + result.childNodes[0].nodeValue + "</a>"
           + buffer;
    result=nodes.iterateNext();
}
document.write(buffer); 
```

无需借助 documentFragment 和类似的现代工具；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:03:52.327

首先更改 XPathResult 的设置。您需要一个有序的快照类型。iterateNext() 不起作用，因为它没有数字键。

```
var result = document.evaluate(source, xml, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null); 
```

然后像这样向后循环。

```
for (var i = result.snapshotLength - 1; i >= 0; i--){
    document.write("<h2>" + result.snapshotItem(i).textContent + "</h2>");
    document.write("<a href='../pics/" + result.snapshotItem(i).textContent + "'>" 
    + result.snapshotItem(i).textContent + "</a>");

} 
```

PS：您的`<a>`标签代码中缺少“>”。不知道你的目标是什么输出，所以我猜了一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:47:14.020

这是一篇文章，展示了一种排序和迭代的方式：

[http://blogs.msdn.com/b/kaevans/archive/2006/04/17/577456.aspx](http://blogs.msdn.com/b/kaevans/archive/2006/04/17/577456.aspx)

# google-app-engine - 使用 GAE Search API 时如何删除搜索索引中的文档？

> ID：12309868
> 
> 赞同：0
> 
> 时间：2012-09-06T23:35:41.977
> 
> 标签：google-app-engine, full-text-search, google-search-api

我创建了一个搜索索引，用文档填充它，它按设计工作。现在我想使用开发控制台从索引中删除文档。

这样做时，我遇到了错误。

```
'Index' object has no attribute 'delete_documents' 
```

完整的堆栈跟踪如下：

```
Traceback (most recent call last):
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
  rv = self.handle_exception(request, response, e)
      File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
  rv = self.router.dispatch(request, response)
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
  return route.handler_adapter(request, response)
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
  return handler.dispatch()
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
return method(*args, **kwargs)
File "C:\Program Files\Google\google_appengine\google\appengine\ext\admin\__init__.py", line 133, in xsrf_required_decorator
method(self)
File "C:\Program Files\Google\google_appengine\google\appengine\ext\admin\__init__.py", line 1766, in post
index.delete_documents(docs)
AttributeError: 'Index' object has no attribute 'delete_documents' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:00:12.363

这似乎是一个错误。我建议您在[外部问题跟踪器](http://code.google.com/p/googleappengine/issues/list)中创建一张票。我将创建一个内部的。

同时编辑文件的第 1766 行`C:\Program Files\Google\google_appengine\google\appengine\ext\admin\__init__.py`，替换`index.delete_documents(docs)`为`index.remove(docs)`.

# django - 没有名为metron的模型

> ID：12309870
> 
> 赞同：0
> 
> 时间：2012-09-06T23:35:53.757
> 
> 标签：django, pinax

我希望使用 Pinax 来帮助加快在 Django 中创建网站的过程。

我开始按照以下指南进行操作。

```
[***@vps-1087814-7905 sites]# virtualenv mysite-env
[***@vps-1087814-7905 sites]# source mysite-env/bin/activate 
(mysite-env)[root@vps-1087814-7905 sites]# django-admin.py startproject --template=https://github.com/pinax/pinax-project-account/zipball/master Project_x
(mysite-env)[root@vps-1087814-7905 sites]# cd Project_x
(mysite-env)[root@vps-1087814-7905 Project_x]# pip install -r requirements.txt

(mysite-env)[***@vps-1087814-7905 Project_x]# pip install metron
Requirement already satisfied (use --upgrade to upgrade): metron in /****/mysite-env/lib/python2.7/site-packages 
```

所以。我哪里做错了？Metron 显然已安装，但出于某种愚蠢的原因，它声称未安装。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T21:44:29.287

在您的 settings.py 中的应用程序变量中包含 metron。:)

```
INSTALLED_APPS = (...,"metron") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T06:57:26.167

尝试在您的虚拟环境中安装 Metron。
点安装metron

# ruby-on-rails - 升级 twitter-bootstrap-rails 后，Rails 3 应用程序无法在生产环境中运行

> ID：12309877
> 
> 赞同：1
> 
> 时间：2012-09-06T23:36:13.800
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

最近我通过删除所有引导资产并重新安装它来升级[twitter-bootstrap-rails 。](https://github.com/seyhunak/twitter-bootstrap-rails)该应用程序现在在开发模式下工作正常，但是当我发布到 heroku 时它不起作用，并且出现“出现问题..”页面错误。所以我想我的某些东西没有正确配置为生产模式，或者我在尝试修复这个错误时搞砸了一些配置。（即环境设置）

这是我在本地生产模式下运行时得到的结果。我还将在[此处粘贴环境设置](http://pastie.org/4676929)。有人可以告诉我设置有什么问题吗？

```
me@home:~/workspace/myappname$ rails s -e production
=> Booting WEBrick
=> Rails 3.2.8 application starting in production on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server

[DEVISE] Devise.apply_schema is deprecated and has no effect. Please remove it.

[DEVISE] Devise.use_salt_as_remember_token is deprecated and has no effect. Please remove it.

DEPRECATION WARNING: ActiveAdmin::Dashboard is deprecated and will be removed in the next version
[2012-09-07 00:16:52] INFO  WEBrick 1.3.1
[2012-09-07 00:16:52] INFO  ruby 1.9.3 (2012-02-16) [i686-linux]
[2012-09-07 00:16:52] INFO  WEBrick::HTTPServer#start: pid=4774 port=3000

Started GET "/" for 127.0.0.1 at 2012-09-07 00:16:59 +0100
Processing by PhotosController#index as HTML
  Rendered collection (0.0ms)
  Rendered photos/index.html.erb within layouts/application (53.0ms)
Compiled bootstrap_and_overrides.css  (1006ms)  (pid 4774)
Compiled application.css  (1018ms)  (pid 4774)
  Rendered layouts/_head.html.erb (5352.6ms)
Completed 500 Internal Server Error in 5529ms

ActionView::Template::Error (undefined method `[]' for nil:NilClass
  (in /home/me/workspace/myappname/app/assets/stylesheets/application.css)):
    8:  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    9:  <![endif]-->
    10:         <!-- Le styles -->
    11:         <%= stylesheet_link_tag "application", :media => "all" %>
    12:         <%= javascript_include_tag "application" %>
    13:         <link href="images/favicon.ico" rel="shortcut icon">
    14:         <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
  app/views/layouts/_head.html.erb:11:in `_app_views_layouts__head_html_erb___806530288_90965610'
  app/views/layouts/application.html.erb:3:in `_app_views_layouts_application_html_erb___795323884_92505740'
  app/controllers/photos_controller.rb:8:in `index' 
```

# java - 基于位置在java中格式化字符串

> ID：12309879
> 
> 赞同：0
> 
> 时间：2012-09-06T23:36:48.763
> 
> 标签：java

我有一个包含很多单词的字符串。
必须根据位置显示单词。

例子，

```
 String str = "Australia Canberra Adellide "; 
```

上面的字符串应该是，

澳大利亚应该从 0 开始，到 20 结束

堪培拉应该从 20 开始，到 30 结束

阿德利德应该从 30 开始，到 50 结束

我将在 jtextarea 中显示

java中有没有可用的格式化程序？还是应该使用填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:43:28.890

这个例子很难理解：Canberra 和 'Adellide' 的长度相同，那么为什么 Canberra 只有 10 个字符，而 Adellide 却有 20 个字符？

无论如何，您可以使用[格式化程序](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)吗？如果需要，您可以[拆分](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)包含列表的输入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:55:35.003

像这样？

```
String str = String.format("%20s%10s%20s", "Australia", "Canberra", "Adellide"); 
```

或者，如果您想要左对齐：

```
String str = String.format("%-20s%-10s%-20s", "Australia", "Canberra", "Adellide"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:55:49.873

[`String.format()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)您可以使用`%-ns`格式说明符填充字符串。

```
String s = String.format("%-20s%-10s%-20s","Hello","to","you.");
// "Hello               to        you.                " 
```

如果您想在单个字母之间散布字母，最好的选择可能是一个简单的正则表达式（即，`s.replaceAll(".", "$0 ")`）。

# git - 对 git 子模块进行更改，然后将其添加到我的主项目中

> ID：12309884
> 
> 赞同：3
> 
> 时间：2012-09-06T23:37:45.597
> 
> 标签：git, github, git-submodules

我有一个 git 项目 P。在我的项目 P 中有一个子模块 Q，它是从第 3 方库的主分支中克隆出来的。

```
P
|
 - src
 - Vendor
    |
     - Q 
```

我无权对 3rd 方库的远程仓库进行任何更改。

我做了一些修复，`Q`现在我希望将它们推送到`master`我的项目分支中，`P`以便我的团队成员也可以使用它们。
目前我正在我的' `dev`'分支上开发。

我从内部尝试了以下步骤`P`：

1.  `cd Vendor/Q`
2.  `git branch my-fixes`
3.  `git checkout my-fixes`
4.  进行修复
5.  `git add`
6.  `git commit -m 'My fixes to 3rd Party Library Q'`
7.  `cd ../..`
8.  `git add Vendor/Q`
9.  `git commit -m 'Changes/fixes made to submodule Q'`
10.  `git push`

但是，这似乎并不能解决我的问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:12:23.677

使用子模块的替代方法是[git-subtree](https://github.com/apenwarr/git-subtree)（不要与子树合并策略混淆）。与子模块相比，它的主要优点是 Q 成为 P 的历史和 repo 的一部分，同时保留将 Q 的更改推送回供应商的能力。此外，不关心 Q 来自哪里的用户甚至不需要安装 git-subtree。

虽然 git-subtree 不是核心 git 的一部分，但它最近被[合并](https://github.com/git/git/tree/master/contrib/subtree)到主要的 git 发行版中，这使它成为半官方的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:51:25.077

如果您推送项目 P，没有人将能够从第 6 步获得提交，因为您无权对第三方库的远程仓库进行任何更改。

您是否考虑过创建一个存储库来存储贵公司对 Q 的更改，而不是将子模块注册到第 3 方的远程？这样您就可以将您对 Q 的更改保存到您公司的服务器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T05:58:45.753

考虑到您将两个 repo（Q 和您的项目）集成在一起，而无需将任何修复推回 GitHub Q repo（因为 Q 不再在 GitHub 上更新），您可以：

*   **[子树将](https://stackoverflow.com/questions/266245/git-how-to-merge-commits-from-a-remote-to-a-different-path/12243677#12243677)**两个 repos 合并在一起
*   进行修复
*   将您的项目（其中包含 Q）推回给您的开发人员使用

# jquery - JQuery GET，如何使火和忘记

> ID：12309887
> 
> 赞同：0
> 
> 时间：2012-09-06T23:37:53.753
> 
> 标签：jquery, ajax, get

我有一个搜索结果页面，并且在页面准备就绪时，我有 ajax GET 来预先请求每个结果项 url，以便预先缓存这些页面。

例如。

```
$('.link').each(function(){
  $.get($(this).attr('href'));
}); 
```

抛开这是否是正确方法的争论，我如何在 jQuery 中发出请求页面的 ajax GET 请求，等待状态代码更改然后中止请求（换句话说，不需要接收内容)?

我遇到过[这篇文章](http://ajaxian.com/archives/ajaxian-fire-and-forget-pattern)，但我不知道如何将其合并到 jQuery GET 函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:53:49.020

也许您正在寻找一个**同步的 AJAX 调用。**您的脚本将等待请求完成，然后才能继续运行。然后您可以检查[`status`AJAX 对象的属性。](http://api.jquery.com/jQuery.ajax/)

```
var ajaxCall = $.ajax({
    type: "GET",
    async:false,
    url: "server.php",
    data: "name=James&location=Auckland",
});
if (ajaxCall.status == 200){
  // request executed successfully 
} 
```

> ### 异步
> 
> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:44:41.887

如果您想在发送 AJAX 调用后简单地中止它。您也许可以使用该`abort()`功能。您可能会发现AJAX 对象的其他[属性很有用。](http://api.jquery.com/jQuery.ajax/)

```
var ajaxCall = $.ajax({
    type: "GET",
    url: "server.php",
    data: "name=James&location=Auckland",
    success: function(response){
       alert( "Response: " + response );
    }
});

//abort the request
ajaxCall.abort(); 
```

如果您只想触发 AJAX 请求并处理 statusCode 更改，则此代码可能很有用。

```
$.ajax({
  statusCode: {
    200: function() {
      alert("request successful");
    }
  }
}); 
```

`200`此回调在设置状态代码时触发- 一个完整的请求。您可以将此代码更改为您要检测的任何状态代码。在该回调中，您可以调用该`abort()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:45:19.720

我要做的是：

```
var $page = $('<div>').load('/somepage body', function() {
    // code to do something when its loaded
}); 
```

如果您不放置选择器，它将在其中触发脚本。您也可以这样做，但您必须相应地编写脚本。

但要回答您的具体问题：

```
var pages = [];

function allLoaded() {
   console.log('all pages loaded');
}

$('.link').each(function(){
    var $page = $('<div>'), href = $(this).attr('href');
    $page.load(href + ' body', function() {
       pages.push({href: href, html : $page.html()});
       if (pages.length === $('.link').length) {
          allLoaded();
       }
    }
}); 
```

你不只是喜欢闭包吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T19:24:15.800

如果这个问题的最终目标是发出请求，获取 url 的状态，然后不下载内容，那么最好的办法是不要覆盖 AJAX GET HTTP 方法，而是使用 HEAD HTTP 方法。

堆栈溢出：

[如何在 jQuery 中测试 URL](https://stackoverflow.com/questions/1051272/how-to-test-a-url-in-jquery)

JQuery Docs（查看“类型”属性）：

[http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

# mysql - 左连接中的mysql子查询

> ID：12309892
> 
> 赞同：20
> 
> 时间：2012-09-06T23:38:40.793
> 
> 标签：mysql, subquery, left-join

我有一个查询需要来自名为`tbl_emails_sent`.

该表包含发送给客户的所有电子邮件。大多数客户记录了几到数百封电子邮件。我想提取一个显示最新的查询。

例子：

```
SELECT c.name, c.email, e.datesent
FROM `tbl_customers` c
LEFT JOIN `tbl_emails_sent` e ON c.customerid = e.customerid 
```

我猜会使用带有子查询的 LEFT JOIN，但我并没有深入研究子查询。我的方向正确吗？

目前，上面的查询没有针对指定表中的最新记录进行优化，所以我需要一点帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-06T23:42:25.480

应该是这样的，你需要有一个单独的查询来获取电子邮件发送的最大日期（或最晚日期）。

```
SELECT  a.*, b.*
FROM    tbl_customers a
            INNER JOIN tbl_emails_sent b
                ON a.customerid = b.customerid
            INNER JOIN
            (
                SELECT      customerid, MAX(datesent) maxSent
                FROM        tbl_emails_sent
                GROUP BY    customerid
            ) c ON  c.customerid = b.customerid AND
                    c.maxSent = b.datesent 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T00:06:57.150

这行不通吗？

```
SELECT t1.datesent,t1.customerid,t2.email,t2.name
FROM
(SELECT max(datesent) AS datesent,customerid
FROM `tbl_emails_sent`
) as t1
INNER JOIN `tbl_customers` as t2
ON t1.customerid=t2.customerid 
```

那么你唯一的问题是如果两个日期相同，那么选择一个的决定因素是什么？

# c# - 使用蒙版文本框复制到剪贴板

> ID：12309896
> 
> 赞同：0
> 
> 时间：2012-09-06T23:39:15.007
> 
> 标签：c#, winforms

C# 新手，如果我在这里遗漏了一些简单的东西，请原谅我。

我正在尝试设置标签链接（单击时）以将蒙版文本框（电话号码）的文本复制到剪贴板减去蒙版。我已将 maskedtextbox 中的属性设置为仅包含文字。如果我选择文本并按 ctrl+c 效果很好。虽然我已经尝试过`Clipboard.SetText(custBtnText.Text);`并且它会运行但它给了我 000-000-0000 并且我需要 0000000000，但我无法让它在按钮单击上工作。对此的任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:41:08.243

我没有使用该控件，但在这种情况下，您可以随时尝试这样的操作：

```
Clipboard.SetText(custBtnText.Text.Replace("-", ""); 
```

但是在处理用户输入时，我会更加彻底。例如，如果我真的只想要数字，我可能会遍历每个字符并只保存那些数字。不过要看你的要求了。

```
string GetDigits(string s)
{
    StringBuilder sb = new StringBuilder();
    foreach (var c in s)
    {
        if (Char.IsDigit(c))
            sb.Append(c);
    }
    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T23:46:19.953

只需设置`masked.TextMaskFormat=MaskFormat.ExcludePromptAndLiterals`然后调用 .Text

# facebook - xfbml 表单不呈现

> ID：12309897
> 
> 赞同：-1
> 
> 时间：2012-09-06T23:39:20.560
> 
> 标签：facebook, xfbml

我正在尝试使用 javascript sdk 在我们的网站上呈现 XFBML 表单，但我不断收到

无法加载 的注册表单。您之前可能在 Facebook 上屏蔽了此应用。转到您的 Facebook 隐私设置以取消阻止此应用。（错误：'client_id' 无效。）

我的应用程序已注册并具有正确的 ID。

代码看起来像：

```
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '118446328234891', // App ID
      channelUrl : '//www.sakshum.org/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<script src="https://connect.facebook.net/en_US/all.js#appId=118446328234891&xfbml=1"></script>

<fb:registration fields="name,birthday,gender,location,email" redirect-uri="http%3A%2F%2Fwww.sakshum.org%2FFbValidation" width="530">
</fb:registration> 
```

如果我只使用 iframe 使用非 xfbml 版本，那么一切都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:34:24.070

看起来问题是使用编码的redirect_uri。将其更改为正常 url 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:37:53.340

重定向 uri 必须与 Facebook 应用程序中的“站点 URL”设置相匹配。

# css - 如何在屏幕中央浮动一个 div

> ID：12309900
> 
> 赞同：2
> 
> 时间：2012-09-06T23:40:12.070
> 
> 标签：css

我正在尝试在 HTML5 中创建一个由`div`'s 组成的视图，该视图显示在页面中心，而背景显示为灰色。类似于 Silverlight 子窗口的东西。我很难让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:44:18.457

您可以使用一些基本的 css 轻松地做到这一点。这只是 css 部分而不是 javascript 动画或切换。但这应该足以让您入门。

**CSS**

```
.div {
    position:absolute;
    top:300px;
    width:300px;
    height:260px;
    left:50%;
    z-index:1000;
    margin-left: -150px; /* negative half the width of the div */
}

.background {
    background:#000;
    opacity:0.5;
    position:fixed:
    width:100%;
    height:100%;
    z-index:999;
} 
```

**HTML**

```
<div class="div">
   My Content
</div>
<div class="background "></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:44:26.130

这是为了使页面以 900px 宽度为中心，您将其添加到您的`div`元素中：

```
 width:900px;margin-right:auto;margin-left:auto; 
```

对于背景，您需要将以下样式添加到您的`body`元素

```
 color:gray;padding:0px;margin:0px; 
```

* * *

您必须包含宽度才能使元素居中。`margin-right:auto; margin-left:auto;`如果您没有包含宽度，将无法工作！

# android - 如何避免在 Eclipse/ADT 中出现“用户操作正在等待”对话框

> ID：12309902
> 
> 赞同：5
> 
> 时间：2012-09-06T23:40:28.483
> 
> 标签：android, eclipse, adt

![在此处输入图像描述](../Images/14dccf73a53cd8ad34b39e0a9402e0b2.png)

如图所示，当我使用自动构建开发 Android 应用程序时，有时会显示此对话框。有什么办法可以避免这种情况并让它在后台完成这个过程？

它并不总是显示，但当它显示时，我需要等待 5-10 秒。这很烦人，特别是考虑到当项目变得更大时，它会变得更慢。

**更新：** 我做了一些研究：

[Android编译慢（使用Eclipse）](https://stackoverflow.com/questions/2883635/android-compilation-is-slow-using-eclipse)

[Android：eclipse工作区需要很长时间才能构建？](https://stackoverflow.com/questions/4596445/android-eclipse-workspace-takes-a-long-time-to-build)

[http://groups.google.com/group/android-developers/browse_thread/thread/a16202975510de39](http://groups.google.com/group/android-developers/browse_thread/thread/a16202975510de39)

[http://oae9.wordpress.com/2011/03/22/android-workaround-for-slow-building-workspace-problem-in-eclipse/](http://oae9.wordpress.com/2011/03/22/android-workaround-for-slow-building-workspace-problem-in-eclipse/)

[http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html)

有没有不使用 ANT 的更简单的解决方案？或者任何其他可以轻松应用的最佳 ANT 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:03:56.933

您如何取消选中“自动构建”选项。这不会加快构建过程，但不会在每次保存文件时都这样做。

您仍然需要花费一些时间进行构建 - 但只有在您真正想要编译项目时才会这样做（而不是每次更改代码时）。

# ruby-on-rails - Rails 3.2.8 不触发 ajax 回调

> ID：12309907
> 
> 赞同：1
> 
> 时间：2012-09-06T23:40:52.147
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, callback

我在使用 rails 3.2.8 和 ajax 回调时遇到问题......似乎那些根本没有触发......我已经尝试与 Jquery 代码绑定（我可以在 chrome 工具箱上看到 js 脚本）并且我我什至尝试将 :success => 'alert("bla")' 放在 link_to 行上，但它仍然没有做任何事情......控制器工作，因为我的行实际上已被删除......但无法绑定到回调！请帮忙！

这是我的观点：

```
<td><%= link_to 'Destroy', pet, :method => :delete, :remote=>true, :class => 'delete_pet' %></td> 
```

这是我的控制器动作

```
def destroy
    @pet = Pet.find(params[:id])
    @pet.destroy

    respond_to do |format|
      format.html { redirect_to(pets_url) }
      format.js { render :nothing => true }
    end
  end 
```

这是我的js代码：

```
jQuery(function($) {
    $('.delete_pet').bind("ajax:before", function(){alert('bla2');})
                    .bind("ajax:success", function(){alert('bla2');})
                    .bind("ajax:failure", function(){alert('bla2');})
                    .bind("ajax:complete", function(){alert('bla2');});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:46:18.727

代替

```
 format.js { render :nothing => true } 
```

和

```
 format.json { render :nothing => true } 
```

并替换

```
<%= link_to 'Destroy', pet, :method => :delete, :remote=>true, :class => 'delete_pet' %> 
```

和

```
<%= link_to 'Destroy', pet, :method => :delete, :remote=>true, 'data-type'=>'json', :class => 'delete_pet' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T01:02:01.287

我一直有与`respond_to`块类似的问题。我通过检查临时解决了它`request`。例如，您的代码如下所示：

```
def destroy
  @pet = Pet.find(params[:id])
  @pet.destroy

  if request.xhr? 
    # the request was received via an AJAX request
    render :nothing => true
  else
    redirect_to(pets_url)
  end
end 
```

不像`resond_to`块那么优雅，但它似乎可以按预期可靠地工作。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T01:51:41.687

问题是在我的 application.js 上，我手动包含了一个 jquery 文件......就像这样......

```
//= require jquery-ui-1.8.23.custom 
```

真丢脸！

# python - 如何处理淹没的看不见的消息

> ID：12309917
> 
> 赞同：0
> 
> 时间：2012-09-06T23:42:50.973
> 
> 标签：python, gmail, imap, imaplib

我在 python 中编写了一个电子邮件解析机制。

它会找到一封新电子邮件并正确传递数据。我 99.999% 确定我的代码运行正常，所以那里应该没有问题。问题是有时，Gmail 收件箱会被视为“看不见”的邮件淹没。在这一点上，我的代码无能为力。

它失败了：

> imaplib.error: FETCH 命令错误: BAD ['Could not parse command']

这很令人痛苦，我很想拥有

1.  一种检查看不见的消息是否已溢出到此状态的方法，或者
2.  一种手动（通过 imaplib）将所有消息标记为已读的方法，包括检测此特定错误的方法。

关于如何做到这一点的任何想法？

这是我的代码：

```
#!/usr/bin/env python

import imaplib, re, sys, time, OSC, threading, os

iparg = 'localhost' 
oportarg = 9000
iportarg = 9002
usern = 'myusrname@gmail.com'
gpass = 'mypass' 
kill_program = False

server = imaplib.IMAP4_SSL('imap.googlemail.com', 993)
oclient = OSC.OSCClient()
email_interval = 2.0

def login():
    server.login(usern, gpass)
    oclient.connect((iparg, oportarg))

def logout_handle(addr, tags, stuff, source):
    print 'received kill call'
    global kill_program
    kill_program = True

def filter_signature(s):  #so annoying; wish i didn't have to do this
    try:
    a_sig = re.sub(r'Sent|--Sent', '', s)
    b_sig = re.sub(r'using SMS-to-email.  Reply to this email to text the sender back and', '', a_sig)
    c_sig = re.sub(r'save on SMS fees.', '', b_sig)
    d_sig = re.sub(r'https://www.google.com/voice', '', c_sig)
    no_lines = re.sub(r'\n|=|\r?', '', d_sig) #add weird characters to this as needed
    except:
    nolines = s
    return no_lines

def parse_email(interval):
    while True:
    server.select('INBOX')
    status, ids = server.search(None, 'UnSeen')
    print 'status is: ', status

    if not ids or ids[0] is '':
        print 'no new messages'
    else:
        try:
        print 'found a message; attempting to parse...'
        latest_id = ids[0]
        status, msg_data = server.fetch(latest_id, '(UID BODY[TEXT])')
        raw_data = msg_data[0][1]
        raw_filter = raw_data

        print 'message result: ', raw_filter
    time.sleep(interval)

#execute main block
while not kill_program:
    login()
    parse_email(email_interval)

st.kill()
sys.exit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:01:14.813

根据错误，我会非常仔细地检查您传递给 fetch 的参数。Gmail 告诉您它无法解析您发送给它的命令。

此外，您可以执行 STORE +FLAGS \SEEN 将消息标记为已读。

# objective-c - KVO 和更改 UI 的值已更改

> ID：12309921
> 
> 赞同：0
> 
> 时间：2012-09-06T23:43:37.413
> 
> 标签：objective-c, ios, thread-safety, key-value-observing

如果我添加一个观察者来观察 UILabel 的“突出显示”属性，我可以在观察回调块中更改另一个 UIView 吗？即：我能保证这个回调块总是在主线程上执行吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T23:49:09.823

`observeValueForKeyPath:...`您将在更改您正在观察的属性的线程上收到消息。

UIKit 仅支持在主线程上更改视图的属性。只要您遵循该规则，您只会在主线程上收到通知。

如果您需要`highlighted`从另一个线程更改标签的属性，您应该分派到主线程来执行此操作。例如，您可以从任何线程安全地执行此操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    myLabel.highlighted = YES;
}); 
```

# delphi - 确保在 EditBox 中以特定方式输入数字

> ID：12309922
> 
> 赞同：1
> 
> 时间：2012-09-06T23:43:50.033
> 
> 标签：delphi

有没有办法确保以特定格式将数字输入到 EditBox 中？即当有人键入 11 时，它会添加一个 . 在它之后，所以如果有人输入 1124 它会在它到达第二个 1 的末尾时重新更正并添加一个 . 使它成为 11.24。这是用于货币的。这是为 TEdit 制作的 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:06:38.220

最简单的方法是为此使用 a [`TMaskEdit`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Mask.TMaskEdit.EditMask)；这就是它的设计目的。

```
MaskEdit1.EditMask := '00.00';  // requires two digits before and after
                                // the decimal point 
```

[`TEditMask`](https://stackoverflow.com/q/12309922/62576)有关可以使用的掩码字符类型的更多信息，请参阅文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T00:05:02.467

是的，“掩码”属性。检查帮助。

# javascript - 找到包含当前脚本的 div

> ID：12309923
> 
> 赞同：1
> 
> 时间：2012-09-06T23:44:01.553
> 
> 标签：javascript, ajax, include

> **可能重复：**
> [如何引用加载当前执行脚本的脚本标签？](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)

我正在尝试通过 AJAX 在页面上创建一个包含 html 文档的 javascript 函数，作为一种没有服务器端交互的 PHP 式 include() 的方式。我希望脚本将文件包含在调用函数的页面上的位置。这是我的函数（假设 ajax 是一个有效的 xmlhttp 对象）：

```
function include(src, elem){
    ajax.open('GET', src, false);
    ajax.send(null);
    elem.innerHTML = ajax.responseText;
} 
```

所以这将在单击时在 div 中打印“src.html”的内容：

```
<div onclick="include('src.html', this);"> </div> 
```

但我希望它在页面加载时加载。考虑到 div 没有 onload 事件，我必须将脚本包含在 div 中，这很好：

```
<div id=write>
    <script>include('src.html', this);</script>
</div> 
```

但是脚本没有引用它调用的 div。当然我可以在 div 上放一个 id 并将其传递给函数，但我不想这样做。我希望能够从任何身份不明的元素中调用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:53:25.413

您可以更改 div （或其他元素）以使用`data-`属性来指定要运行的脚本：

```
<div data-include="src.html"></div> 
```

然后运行页面的脚本 onload（或在结束标记之前的脚本块中`</body>`）找到具有该属性的所有元素。

```
var elements = document.querySelectorAll("[data-include]");
for (var i = 0; i < elements.length; i++)
    include(elements[i].getAttribute("data-include"), elements[i]); 
```

这是上面的演示（带有一个虚拟`include()`函数，它只是将所需的源 url 字符串放入元素中，而不是执行 Ajax，但它显示元素已正确选择）：http: [//jsfiddle.net/nnnnnn/gm2LN/](http://jsfiddle.net/nnnnnn/gm2LN/)

为简单起见，我习惯于`querySelectorAll()`选择元素，但请注意， IE7和更早版本[不支持它。](http://www.quirksmode.org/dom/w3c_core.html#t13)但显然，如果您想要或需要支持旧版浏览器，您可以替换您喜欢的任何其他元素选择方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:53:38.890

当页面被加载时，所有脚本将被顺序执行，一旦它们被解析。因此，您只需要获取 DOM 中显示的最后一个脚本即可获取当前执行的脚本：

```
var script = document.scripts[document.scripts.length-1];
ajax(url, function successCallback(html) {
    script.insertAdjacentHTML("afterend", html);
}); 
```

（[要测试的演示](http://jsfiddle.net/jEFuJ/)- 注意[`document.scripts`](https://developer.mozilla.org/en-US/docs/DOM/document.scripts)需要 FF 9+）

但是，我认为没有理由不使用 serverside `include()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:53:59.233

这里：

```
<div id=write>
    <script>include('src.html', this);</script>
</div> 
```

“this”指向窗口对象。我想在脚本元素中添加一个 id 并执行以下操作：

```
<div id=write>
    <script id='test'>include('src.html', document.getElementById('test').parentNode);</script>
</div> 
```

现在 "include" 函数中的 elem 将指向包含脚本元素的 div。在这种情况下，您仍然依赖 id 但不在 div 方面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T00:39:18.463

nnnnnn 是在赚钱，但我对它进行了如此轻柔的修改。我最终制作了一个带有 src 属性的包含标签。在页面加载时，我遍历所有“包含”标签，并用它们的 src 属性中的数据填充它们：

```
function include(src, elem){
    ajax.open('GET', src, false);
    ajax.send(null);
    elem.innerHTML = ajax.responseText;
}

window.onload = function(){
    var includes = document.getElementsByTagName('include');

    for(var i = 0; i <= includes.length; i++){
        var elem = includes[i];     
        var src = elem.getAttribute('src');
        include(src, elem);
    }

} 
```

然后在任何我想包含 html 文件的地方，我只包含我的自定义元素：

```
<include src='includeme.html'> </include> 
```

在实践中，这会产生一些弹出窗口，但对于我的应用程序来说这很好。

谢谢您的帮助！

# jquery - 如何禁用水平滚动？（不移除水平滚动条）

> ID：12309933
> 
> 赞同：0
> 
> 时间：2012-09-06T23:44:47.903
> 
> 标签：jquery, css, scroll

我正在制作一个网站，并以一种特殊的方式设计它，它具有非常宽的 div（绝对位置），其中包含每个菜单按钮的所有内容。

一些这些 div 比其他 div 有更多的内容，所以有一个垂直滚动条 - （我很好） - 我禁用了水平滚动条，但是！随着技术的发展，一些邪恶的公司发明了电脑鼠标的水平滚动功能，智能手机用户可以横向滑动。

这个鼠标功能并没有真正破坏我的设计理念，但是如果可以禁用使用任何按钮/鼠标/等进行水平滚动的能力，那将是非常棒的。这可以用 CSS/Javascript/HTML 完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:56:35.337

我想说最好的答案是改变你的方法。
浏览器“可能”允许这种事情 - 并且随之而来的是混乱 - 这就是他们不允许的原因。

用不同的方法重新设计你的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:51:18.167

它看起来像一个奇怪的网站，如果没有看到它，人们可能会很难接受他们的建议。

似乎修复它的正确方法是确保没有任何东西超出屏幕边缘。如果您不希望某些东西可见，请将其隐藏（例如，使用`display: none`） - 而不是试图将其从屏幕边缘移开。

我想，其他任何事情都是令人讨厌的黑客行为。您*可以*尝试通过观察“滚动”事件并每次重置滚动位置来有效地禁用滚动，但这样做是错误的。

如果屏幕右侧或底部有一些东西，浏览器会想让人们滚动到它。

但是再一次，没有看到该站点，我在这里感到黑暗。不知道你在解决什么问题。

# android - Android 2.3 AudioTrack 问题（obtainbuffer 超时 - cpu 挂钩？）

> ID：12309943
> 
> 赞同：0
> 
> 时间：2012-09-06T23:47:02.060
> 
> 标签：android, streaming, cpu, aac, audiotrack

我正在编写一个音频流应用程序来缓冲 AAC 文件块，将这些块解码为 PCM 字节数组，并将 PCM 音频数据写入 AudioTrack。有时，当我尝试跳到另一首歌曲、调用 AudioTrack.pause() 或 AudioTrack.flush() 时，会收到以下错误：

```
obtainbuffer timed out -- is cpu pegged? 
```

然后会发生一瞬间的音频继续播放。我尝试从 sdcard 读取一组 AAC 文件并得到相同的结果。我期待的行为是音频立即停止。有谁知道为什么会这样？我想知道它是否是 Android 2.3 的音频延迟问题。

编辑：AAC 音频包含一个 ADTS 标头。标头 + 音频有效负载构成了我所说的 ADTSFrame。它们一次一帧地馈送到解码器。从 C 层返回到 Java 层的结果 PCM 字节数组被馈送到 Android 的 AudioTrack API。

编辑 2：我今天得到了我的 nexus 7（Android 4.1 操作系统）。将相同的应用程序加载到设备上。根本没有这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:44:54.933

采样率很有可能。您的一台设备可能支持您使用的采样率，而另一台则不支持。请检查一下。我有同样的问题，它与采样率有关。请使用 44.1kHz (44100) 并重试。

# javascript - 有没有办法将属性的值附加到另一个属性？

> ID：12309945
> 
> 赞同：1
> 
> 时间：2012-09-06T23:47:21.437
> 
> 标签：javascript, jquery, html, css

我觉得这是一个愚蠢的简单问题，但我最近做了这么多 CSS 工作，感觉有点生疏。所以，我有几个带有 classname: 和 class: 属性的按钮。基本上，我要做的就是获取类名属性的值并将其附加到类。只有带有 className 的按钮需要附加其内容。

```
classname="blah_btn blah_btnGrey" class="blah blah blah foo foo" 
```

我会写类似的东西：

```
if ($('#ui-button').has("className")) {
$(("className").val()).appendTo("class"); 
```

或者更多类似的东西：

```
$("button").each(function() {
//do stuff 
```

});

还是我完全错了？再次，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:52:49.767

首先，请不要使用属性调用`className`。这是保留作为处理`class`属性的方式，因为`class`它是 javascript 中的保留字。因此，如果您使用名称为`class`and的属性`className`，您最终可能很难在 javascript 中单独访问它们。这可能是一团糟。为实际上不是的名称选择一个更独特的名称`class`。

要添加类属性，您只需使用`.addClass()`：

```
$('#ui-button').addClass("blah_btn") 
```

jQuery 的 `addClass() 足够聪明，如果它已经存在就不会添加它。

* * *

如果要获取属性并将其添加到实际类中，可以这样做：

```
$('#ui-button').addClass($(elem).attr("myAttribute")); 
```

* * *

如果您只想将一个属性添加到另一个属性上，您可以这样做：

```
var target = $('#ui-button');
target.attr(target.attr("myAttribute") + $(elem).attr("myAttribute")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:50:38.370

这就是你需要的？

```
$.each($('#ui-button.className'), function() {
    var $element = $(this);
    $element.addClass($element.val());
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T23:54:41.153

这个怎么样？

```
$('button[className]').each(function(){
   var classNameValue = $(this).attr('className');
   var classValue = $(this).attr('class');
   $(this).attr('class', classValue + classNameValue);
}); 
```

# speech-recognition - 目前语音识别的一般状态是什么？

> ID：12309947
> 
> 赞同：1
> 
> 时间：2012-09-06T23:47:34.763
> 
> 标签：speech-recognition

我目前正在评估语音识别 (SR) 技术的 cyrrebt 状态，似乎有不少 API 和服务如雨后春笋般涌现。

我自己对 SR 的经验是，关键字匹配适用于多个说话者，而听写在非常受控的环境中对训练有素的说话者也很有效。这仍然是真的吗？是否有任何好的方法可以对任意音频文件的文本进行语音 - 可能是从音频流中匹配关键字以进行索引，或者可能是尝试完全转录。

有人对细微差别与其他引擎与开源解决方案的比较有任何评论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:39:18.093

虽然围绕语音识别设计的更新和更友好的应用程序将继续被编写，但语音识别本身已经达到了一堵墙。即使是最好的引擎的准确性也会在存在噪音的情况下迅速下降，这对于经常在嘈杂环境中使用该技术的智能手机用户来说是一个大问题。

一个更大且相关的问题是语音识别器无法从一屋子的声音中识别出一个声音（鸡尾酒会问题），这是大多数人相对容易处理的问题。除非有人解决这个问题，否则语音识别技术恐怕不会有太大进步。这是一个十亿美元的问题，因为一个解决方案将使每个现有的语音识别引擎几乎在一夜之间过时。

# ios - iOS：找到很多带有地址或邮政编码的位置

> ID：12309948
> 
> 赞同：1
> 
> 时间：2012-09-06T23:47:37.317
> 
> 标签：ios, mapkit, reverse-geocoding

在我的应用程序中，我有很多关于很多地方（例如餐厅、博物馆等）的数据，但我没有协调，只有地址或邮政编码；我想知道地址或邮政编码是否可以获取我所有数据的坐标。我知道我可以使用反向地理编码器做到这一点，但我有大量数据；我知道谷歌不允许提出很多请求......还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:37:40.040

您可以使用使用 Google API 的 javascript 编写一个简单的网页。它会将地址/邮政编码发送到 Google 的地理编码器并将结果打印到文本字段中以获取它们的坐标。

# python - Django 链接和 is_secure()

> ID：12309952
> 
> 赞同：0
> 
> 时间：2012-09-06T23:48:21.360
> 
> 标签：python, django, https, ssl

我正在将 ssl 添加到 django 应用程序中，并且我的链接从 https 重定向到 http 时遇到了一些问题。

最终我会让 nginx 将所有 http 请求重定向到 https，但现在我允许两者。

所以如果你去[https://www.mysite.com](https://www.mysite.com)一切都很好。但是，单击“关于链接”： href='/about' 会将您重定向到[http://www.mysite.com/about](http://www.mysite.com/about)。

About 是一个超级基本（静态）页面。这是 urls.py 中的条目：

```
(r'^about/$', 'search.views.about'), 
```

这是视图功能：

```
def about(request):
    return render_to_response('search/about.html') 
```

django 不应该将我的用户定向到[https://www.mysite.com/about/](https://www.mysite.com/about/)吗？我相信这与 request.is_secure() 方法有关。对我来说总是返回错误。我已经读到我需要设置 os.environ['HTTPS'] = "on" 以使其返回 true。我该怎么做呢？还有什么我需要做的吗？我应该将 https 硬编码到我的所有链接中吗？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:02:05.040

原来我使用的 nginx 代码把一切都搞砸了。代替：

```
if ($http_x_forwarded_port != 443) { rewrite ^ https://$http_host/; } 
```

利用：

```
if ($http_x_forwarded_port != 443) { rewrite ^(.*) https://$host$1 permanent; 
```

做重定向。作为第一个丢弃除主机之外的所有内容。

# sql-server - Sql Server 替换功能

> ID：12309960
> 
> 赞同：2
> 
> 时间：2012-09-06T23:48:56.180
> 
> 标签：sql-server

我正在尝试运行以下语句，但它没有按预期工作。

它旨在获取子查询值并将其从注释字段中删除（替换为空字符串）。

我已经检查了子查询是否返回了我期望的正确值，但是替换函数没有像我期望的那样工作。有人有什么想法吗？

先感谢您。

```
update contacts set comment = 
replace(comment,
   (select 'Specialty: ' + a.categoryname
    from contacts c
    join categories a
    on c.categorycode = a.categorycode
    where contacts.contactid = c.contactid)
, '') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:57:49.313

我猜应该这样做

```
update contacts 
set    comment = replace(comment,'Speciality :' + categories.categoryname,'')
from   contacts inner join categories 
on     contacts.categorycode=categories.categorycode
and    contacts.contactid=categories.contactid 
```

[在 sqlfiddle](http://sqlfiddle.com/#!3/b6dc7/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:02:04.387

这是替换功能：

```
REPLACE ( string_expression , string_pattern , string_replacement ) 
```

你确定`string_pattern`匹配中的东西`string_expression`吗？

这是指向相同信息的[链接](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

# mysql - hibernate 不会在 mysql 中的删除级联上生成用于映射 HashMap

> ID：12309969
> 
> 赞同：2
> 
> 时间：2012-09-06T23:50:00.500
> 
> 标签：mysql, hibernate, hashmap, cascade, cascading-deletes

我在使用 hibernate 生成 mysql 模式时遇到问题。我已经搜索了我的问题的答案，但我没有找到它（许多类似的问题，但不完全是我的问题）。

我需要将状态图映射到mysql（或转换表）中，并级联删除状态。一个州可能有多个州作为子代（多对多关系）。我成功地映射了 State 类和“下一个状态”关系，但没有在 DELETE CASCADE 上生成正确的 SQL 选项。

Java类如下：

```
public class State {
private Integer version;
private Integer oid;
private String name;
private Map<String, State> nextStates;

public State(String name) {
    super();
    this.name = name;
    this.nextStates = new HashMap<String, State>();
}

/**
 * Adds some state to the transitions table. 
 * The table is indexed by states names.
 * 
 */
public void addNextState(State s) {
    this.nextStates.put(s.getName(), s);
}
(...) 
```

休眠配置是：

```
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost/testStatesDB</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">pass</property>
    <property name="hibernate.connection.pool_size">10</property>
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>     
    <property name="dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <property name="hibernate.hbm2ddl.auto">create-drop</property>
    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>       
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <mapping resource="State.hbm.xml" />
</session-factory>
</hibernate-configuration> 
```

状态映射如下：

```
<hibernate-mapping>
<class name="State" table="state" optimistic-lock="version">
    <id name="oid" column="OID">
        <generator class="increment" />
    </id>
    <version column="version" name="version" unsaved-value="null"/>     

    <property name="name" type="java.lang.String"/>

    <map name="nextStates" table="nextStates" cascade="delete" optimistic-lock="true"> 
            <key column="parentState_oid" /> 
            <index column="children_stateName" type="java.lang.String"/> 
            <many-to-many column="children_oid" class="State" /> 
    </map>
</class>
</hibernate-mapping> 
```

它创建了以下架构：

```
Hibernate: 
create table nextStates (
    parentState_oid integer not null,
    children_oid integer not null,
    children_stateName varchar(255) not null,
    primary key (parentState_oid, children_stateName)
) ENGINE=InnoDB

Hibernate: 
create table state (
    OID integer not null,
    version integer not null,
    name varchar(255),
    primary key (OID)
) ENGINE=InnoDB

Hibernate: 
alter table nextStates 
    add index FKB4A102D5587BDC23 (parentState_oid), 
    add constraint FKB4A102D5587BDC23 
    foreign key (parentState_oid) 
    references state (OID)

Hibernate: 
alter table nextStates 
    add index FKB4A102D5F71F7FB (children_oid), 
    add constraint FKB4A102D5F71F7FB 
    foreign key (children_oid) 
    references state (OID) 
```

例如，考虑运行以下测试代码，

```
State pend   = new State("Pending");
State dev   = new State("In development");
State finali = new State("Finalized");

Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();

pend.addNextState(dev);
dev.addNextState(finali);
dev.addNextState(pend);

session.save(pend);
session.save(dev);
session.save(finali);
session.getTransaction().commit();

session.beginTransaction();
dev = (State)session.load(State.class, 3);
session.delete(dev);
session.getTransaction().commit(); 
```

我收到以下错误消息：

```
Cannot delete or update a parent row: a foreign key constraint fails (`testStatesDB`.`nextstates`, CONSTRAINT `FKB4A102D5F71F7FB` FOREIGN KEY (`children_oid`) REFERENCES `state` (`OID`)) 
```

如果我转到数据库并将属性 ON DELETE CASCADE 添加到生成的外键中，该示例将按我的需要工作。

问题是：这是使用 HashMaps 映射多对多关系的正确方法吗？如果正确，如何使用休眠 xml 映射生成 ON DELETE CASCADE 选项？

我一直在处理这个问题很长时间，但我没有找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:14:18.087

我已经部分解决了这个问题：我使用了 State 和 State 类之间的双向关系（是的，递归关系有效）。在每个州，我都有一张用于图表中下一个州的地图，还有一张用于父州的地图。

delete="cascade" 选项没有像我希望的那样生成 ON DELETE CASCADE，但是，只要我保持状态内的集合同步，我就可以级联删除。“同步”是指如果状态 S1 将 S2 作为下一个状态，那么如果您删除 S1 中的下一个状态 S2，您还必须让 S2 知道 S1 不再是其父状态。

我希望这对某人有所帮助......我被这个问题困扰了很长时间。

谢谢你。伊格纳西奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:08:47.920

您可以在键上设置 on delete 级联

```
<key column="parentState_oid" on-delete="cascade" /> 
```

# python - 如何在 Python 中将列表转换为带有空格的字符串？

> ID：12309976
> 
> 赞同：112
> 
> 时间：2012-09-06T23:50:35.760
> 
> 标签：python, string, list, spaces

如何在 Python 中将列表转换为空格分隔的字符串？

例如，我想转换这个列表：

```
my_list = [how,are,you] 
```

进入字符串`"how are you"`

空间很重要。`howareyou`到目前为止，我不想像我尝试使用的那样得到

```
"".join(my_list) 
```

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-09-06T23:51:25.233

```
" ".join(my_list) 
```

您需要加入空格，而不是空字符串。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-11-24T01:09:33.097

我将把它作为一个替代品，只是为了它，尽管与`" ".join(my_list)`字符串相比它几乎没用。对于非字符串（例如整数数组），这可能会更好：

```
" ".join(str(item) for item in my_list) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-23T11:33:00.267

对于非字符串`list`，我们也可以这样做

```
" ".join(map(str, my_list)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-28T09:57:38.283

所以为了达到想要的输出，我们首先应该知道函数是如何工作的。

python文档中描述的方法语法`join()`如下：

`string_name.join(iterable)`

需要注意的事项：

*   它返回一个`string`与 的元素连接的`iterable`。元素之间的分隔符是`string_name`.
*   中的任何非字符串值`iterable`都会引发`TypeError`

现在，要添加*空格*，我们只需要用`string_name`a`" "`或 a替换`' '`它们，它们都可以工作并放置`iterable`我们想要连接的。

因此，我们的函数将如下所示：

```
' '.join(my_list) 
```

但是，如果我们想在 中的元素之间添加特定数量的`white spaces`in`iterable`怎么办？

我们需要添加这个：

```
str(number*" ").join(iterable) 
```

在这里，`number`将是用户输入。

所以，例如如果`number=4`。

然后，`str(4*" ").join(my_list)`will 的输出是`how are you`，所以在每个单词之间有 4 个空格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-10T07:12:13.850

`"".join([i for i in my_list])`

这应该像你问的那样工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-07T19:08:57.187

你可以遍历它来做到这一点

```
my_list = ['how', 'are', 'you']
my_string = " "
for a in my_list:
    my_string = my_string + ' ' + a
print(my_string) 
```

输出是

```
 how are you 
```

你可以剥离它来获得

```
how are you 
```

像这样

```
my_list = ['how', 'are', 'you']
my_string = " "
for a in my_list:
    my_string = my_string + ' ' + a
print(my_string.strip()) 
```

* * *

## 回答 #7

> 赞同：-11
> 
> 时间：2014-01-12T14:34:13.197

为什么不在列表本身的项目中添加一个空格，例如：
`list = ["how ", "are ", "you "]`

# php - 绑定参数导致警告

> ID：12309979
> 
> 赞同：0
> 
> 时间：2012-09-06T23:51:01.943
> 
> 标签：php, mysqli

> **可能重复：**
> [不能在 mysqli_stmt 对象上使用 call_user_func_array](https://stackoverflow.com/questions/12003890/cannot-use-call-user-func-array-on-mysqli-stmt-object)

我有一段 mysqli 代码在这行代码中输出警告：

```
if (!$stmt = $mysqli->prepare($questionquery)) {
  die("Error preparing statement: $mysqli->error"); 
} 
```

警告是：

```
Warning: Wrong parameter count for mysqli_stmt::bind_param() in ... line 80 
```

下面是主要代码：

```
// Make the referenced array
$referencedArray = make_values_referenced(array_merge(
  array(str_repeat("ss", $numTerms)), // types
  $termArray,                         // where
  $termArray                          // order by
));

// ...or die() is evil in production but I shall assume we are debuggin so I won't complain
if (!$stmt = $mysqli->prepare($questionquery)) {
  die("Error preparing statement: $mysqli->error"); 
}

// Bind parameters
if (!$stmt->bind_param($referencedArray)) {
  die("Error binding parameters: $stmt->error"); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:55:13.507

您可以直接调用该方法：

```
$stmt->bind_param($referencedArray); 
```

编辑：其实我错了。您需要`call_user_func_array`可变数量的参数。请参阅此答案以获取解决方案：[https ://stackoverflow.com/a/5108167/163024](https://stackoverflow.com/a/5108167/163024)

# android - ContentObserver 与 BroadCastReceiver：电池使用情况、内存、CPU？

> ID：12309981
> 
> 赞同：4
> 
> 时间：2012-09-06T23:51:19.953
> 
> 标签：android, broadcastreceiver, battery, contentobserver

由于对应用程序的电池使用、内存和 cpu 使用有如此必要的关注，那么多个 contentobservers 与多个广播接收器的开销是多少？

> 示例 1：
> 
> 使用 START_STICKY 运行的服务，使用 5 个正确注册/取消注册的内容观察器。
> 
> 示例 2：
> 
> 从清单中设置的 5 个广播接收器触发的服务。
> 
> 示例 3：
> 
> 使用 5 个注册广播接收器以 START_STICKY 运行的服务。

观察者和接收者之间的电池使用量/内存/cpu 的真正区别是什么？任何专业人士都可以对此发表意见吗？我假设 1 个实例不会有太大的不同，但让我们以上面的示例为例，同时运行 5 个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T12:58:47.160

**`Service`跑步 vs 不`Service`跑步**

每个应用程序至少有一个[`Process`](http://developer.android.com/guide/components/processes-and-threads.html)在您的应用程序运行时启动。该过程至少使用一些内存，人们喜欢使用任务杀手来释放它，尽管 Android 会在实际需要内存时自动执行此操作。这种内存对于`Service`本案来说绝对是一个劣势。

CPU / 电池使用量仅在发生某些事情并因此主动使用 CPU 或当您的应用程序强制系统保持资源启用时（例如，当您保持[`WakeLock`](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html). 如果您不执行任何此操作，您的应用程序使用大约 0 CPU / 电池，并且其行为就像一个停止的应用程序，它保存在内存中以加快重新启动它的速度。如果您的代码正在运行，那么您无意中使用某些资源的可能性肯定会更高。

如果根本没有`Service`/`Activity`正在运行，并且您只需[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)在清单中注册 a ，您基本上就是告诉系统将您的接收器包含在它在发送广播时检查的接收器列表中。非常少的额外工作。

清单接收器还具有在内存压力很高时系统不会被杀死的优点。那些接收器只是工作，你根本不需要关心。如果您愿意，您甚至[可以启用/禁用它们。](http://developer.android.com/training/monitoring-device-state/manifest-receivers.html)

**`ContentObserver`对比`BroadcastReceiver`**

两者都应该使用[`ActivityThread`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/ActivityThread.java)//通常称为“UI 线程”的机制，它将所有事件传递到您的应用程序并调用所有[`Looper`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/Looper.java), etc方法。当这些方法出现问题时，当您查看堆栈跟踪时很容易看到：[`MessageQueue`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/MessageQueue.java)`onCreate``onTouch`

```
AndroidRuntime(521): FATAL EXCEPTION: main
AndroidRuntime(521): java.lang.RuntimeException: MotionEvent{405215b0 action=0 x=66.0 y=78.0 pressure=1.0 size=0.0} recycled twice!
AndroidRuntime(521):     at android.view.MotionEvent.recycle(MotionEvent.java:659)
AndroidRuntime(521):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1880)
AndroidRuntime(521):     at android.os.Handler.dispatchMessage(Handler.java:99)
AndroidRuntime(521):     at android.os.Looper.loop(Looper.java:123)
AndroidRuntime(521):     at android.app.ActivityThread.main(ActivityThread.java:3647) 
```

如果不发送广播或内容更改通知，则该线程只是等待。等待不使用 CPU（即一直在循环中主动循环），但告诉系统它不需要为该线程安排处理时间。那时 CPU 使用率实际上约为 0。因此，IMO 在运行时注册两者之一完全没有区别。

唯一可以为其中一种方法带来优势的区别是，如果这些方法更频繁地触发。

**其中1对5**

不要紧。系统中有如此多的接收者/观察者，添加 1 或 5 并不重要。如果添加 1000，您可能会注意到

附带说明：不要阻止 UI 线程完成它的工作。尽管接收器和服务没有 UI，但它们的回调方法在 UI 线程上执行。因此，如果您执行任何长时间运行的操作，例如在任何`onReceive`/ `Service#onCreate`etc 方法中下载内容，这将导致[ANR](http://developer.android.com/guide/practices/responsiveness.html)，就像在`Activity#onCreate`.

# facebook-javascript-sdk - 需要更新其他用户创建的应用程序设置

> ID：12309983
> 
> 赞同：0
> 
> 时间：2012-09-06T23:51:24.667
> 
> 标签：facebook-javascript-sdk

不再参与该项目的开发人员创建了我们的网站当前用于链接 Facebook 的应用程序/应用程序 ID。

我想更新应用程序的设置，因为我们已经重新命名/更改了我们的域名，但我不知道如何访问它。

只知道如何向与该应用程序关联的电子邮件联系人发送电子邮件可能会有所帮助，但我也想知道如何将应用程序从他的帐户移至我的帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:49:38.923

除了让他将您添加为应用程序的管理员之外，别无选择。

# wso2 - WSO2 ESB 在特定 XSLT 转换中的最佳实践是什么

> ID：12309984
> 
> 赞同：1
> 
> 时间：2012-09-06T23:51:34.200
> 
> 标签：wso2, wso2esb, wso2carbon

我正在 MAC OS X Lion (10.7.4) 上开发 WSO2 ESB 4.0.3

我想知道 WSO2 ESB 4.0.3 开发的最佳实践是什么。

目前我正在其中使用数据服务功能，并且我们正在尝试移植到 WSO2 ESB 的现有 tomcat 应用程序在 2-3 秒内执行 SQL 查询，而具有数据服务功能的 WSO2 ESB 4.0.3 大约需要 16-17 秒.

如果有人可以让我知道 WSO2 的最佳实践，特别是 XSLT 转换，我将不胜感激。

希望得到答复。

谢谢

嗨，Prabath 这是我使用 WSO2 ESB 4.0.3 和 Data Services Feature 3.2.2 的环境。代理服务前端是 DS 服务。数据源在 datasources.properties 中定义为碳数据源。我尝试在 WSO2 Data Services Server 2.6.3 中运行相同的服务，其性能与现有的 tomcat 应用程序相当，但带有 Data Services Feature 3.2.2 的 ESB 4.0.3 比 tomcat 应用程序花费的时间多 8 倍。看起来 XSLT 不是我之前认为的问题。我在调用此 DS 的代理服务中有所有错误处理和输入验证。我也尝试将其更改为本地以进行传输，但仍然存在相同的性能问题。此外，我必须确保在端点定义中转发的 XML 的格式是 SOAP 12，否则代理服务不会通过本地传输转发。您能否建议我可以将 WSO2 ESB 与 Data Services Feature 3.2.2 一起使用并获得可比的性能？

帮助真的很感激。谢谢阿比吉特

嗨，普拉巴斯

谢谢您的回复。

代理服务验证和转换不是问题。查看日志，在 ESB 中部署的具有数据服务功能的数据服务似乎比 tomcat 应用程序花费的时间多 8 倍。所以我认为这是数据服务功能的问题，而不是代理服务。

即使我们删除了您将在其中进行输入验证和错误处理的代理服务？

请告诉我。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T04:54:44.520

我希望普拉巴斯已经回答了你的问题。

但是，不建议使用这些中介来执行非常复杂的查询，例如带有“OUT 和 INOUT”参数的存储过程等，因为 WSO2 DSS 专门设计用于服务于任何类型的复杂查询。然而，这（使用数据服务）**是以网络延迟为代价的**。因为，您正在通过网络调用数据服务端点，这显然会增加完成任务所需的端到端时间的网络延迟。但是，**如果您使用 WSO2 ESB 中安装的数据服务功能，您始终可以选择使用“本地”传输而不是“http/https”**，后者会执行 JVM 内调用，因此不会通过网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:31:56.433

阿比吉特，

我不太清楚这个问题是否与使用 dbReport/dbLookup 中介执行 SQL 与在 ESB 中安装数据服务功能或在 ESB 层使用 XSLT 转换响应与在 DSS 层执行相同的事情有关。

如果是前者，那么您应该能够有效地使用 db mediator 对（即 dbLookup 和 dbreport）来执行简单的 SQL 查询，例如 SELECT、INSERT、UPDATE、DELETE 等。但是，不建议使用这些调解器执行许多复杂的查询，例如具有“OUT 和 INOUT”参数的存储过程等，因为 WSO2 DSS 专门设计用于服务于任何类型的复杂查询。然而，这（使用数据服务）是以网络延迟为代价的。因为，您正在通过网络调用数据服务端点，这显然会增加完成任务所需的端到端时间的网络延迟。但是，如果您使用 WSO2 ESB 中安装的数据服务功能，则始终可以选择使用“本地”传输而不是“http/https”

如果这与后者有关，也就是说，如果您参考 XSLT 转换，我相信这样做没有那么硬和快速的规则，这完全取决于您的要求和用例。例如，如果您只使用 WSO2 DSS 并希望将某些请求转换为客户端期望的特定格式，那么您只需在 WSO2 DSS 层完成它就足够了。因为，仅为了完成 XSLT 转换而将其分派到 ESB 中，会给您的任务的端到端完成时间增加额外的不必要的开销。另一方面，如果您将其作为 ESB 端配置流的一部分来执行，那么在流本身内部使用 XSLT 调解器之类的东西是完全可以的。

希望这可以帮助！

问候。普拉巴斯

# javascript - 单击时禁用图像链接

> ID：12309985
> 
> 赞同：2
> 
> 时间：2012-09-06T23:51:44.343
> 
> 标签：javascript, html

我有一个链接到页面的图像。这是一个进程按钮，最多可能需要 20 秒才能运行。我想防止用户多次推送它。

我将如何编写一个 Javascript，当按下按钮时，它会跟随超链接，但按钮的链接会禁用，并且图像会改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:40:04.773

```
<script>
function buttonClicked()
{
    document.getElementById('buttonImage').src = 'new-image.jpg';
    document.getElementById('buttonId').disabled = true;
}
</script>

<a id="buttonId" href="next-page.html" onclick="return buttonClicked()"><img id="buttonImage" src="image1.jpg"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:04:24.593

从您的问题来看，听起来您的“按钮”是您单击的图像......如果这是真的，那么您可以使用以下内容：

```
<a id="my_link" href="/page_to_vist_onclick"><img id="my_image"></a> 
```

那么你的javascript将是：

```
document.getElementById('my_link').onclick = function() {
  document.getElementById('my_link').disabled = true;
  document.getElementById("my_image").src='the_path_to_another_image';
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T02:29:59.070

单击时，从元素中删除`href`属性。`a`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T03:28:34.323

这是一个非常简单的

在你的 JS

```
function Create(){ 
document.write('<INPUT disabled TYPE="button" value="Click Me!">'); 
} 
```

在您的 HTML 中

```
<INPUT TYPE="button" value="Click Me!" onclick="Create()"> 
```

如果您准备好使用 jQuery，那么这里有另一个解决方案。

```
$("selectorbyclassorbyIDorbyName").click(function () {
  $("selectorbyclassorbyIDorbyName").attr("disabled", true).delay(2000).attr("disabled", false);
}); 
```

选择按钮并通过其 id 或文本或类...它只是在第一次单击后禁用并在 20 毫秒后启用

非常适合回发 n 将其放在母版页中，适用于所有按钮，而无需像这样隐式调用`onclientClick`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T05:49:35.443

你可以用这个。

```
<script>
function hideme()
{
    $("#buttonImage").hide();
}
</script>

<a id="buttonId" href="next-page.html" onclick="return hideme()"><img id="buttonImage" src="image1.jpg"></a> 
```

如果您不想隐藏图像，请使用此..

```
$('#buttonImage').click(function(e) {
    e.preventDefault();
    //do other stuff when a click happens
}); 
```

这将阻止超链接的默认行为，即访问指定的 href。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T06:07:00.903

我最终选择了以下内容：

```
$(document).ready(function() {
  var isSubmitted = false;
  $("#submit").click(function(e) {
    if ( ! isSubmitted ) {
      isSubmitted = true;
      var src = $(this).attr("src").replace("gold","red");
      $(this).attr("src", src);    
    } else {
      e.preventDefault();
    }
  });
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-09T18:53:24.623

让我们制作一个 jquery 插件：

```
 $.fn.onlyoneclick=function(o){
      var options=$.extend({src:"#"},o);
      $(this).click(function(evt){
        var $elf=$(this);
        if( $elf.data("submitted") ){
          evt.preventDefault();
          return false;        
        }
        $elf.attr("src", typeof(options.src) == 'function' ? 
                          options.src($elf.attr("src"))
                        : options.src
                ).data("submitted",true);
      });
    }

    $(".onlyoneclick").onlyoneclick({
      src : function( src ){
          return  src.replace("gold","red");
      }
    }) 
```

在应该只触发一次的任何按钮上：

```
 <button ... class="onlyoneclick">tatatata... </button> 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-06-13T10:49:45.120

它很简单......只有一行代码:)

```
Onclick return false. 
```

# actionscript-3 - 在 Flash Builder 中打开 IntelliJ .idea Flex 项目

> ID：12309986
> 
> 赞同：1
> 
> 时间：2012-09-06T23:51:46.247
> 
> 标签：actionscript-3, apache-flex, intellij-idea, flash-builder

我已经看过很多关于在 IntelliJ 中打开 Flash Builder 项目文件的帖子，但我没有发现任何关于其他方式的问题。

有谁知道在 Flash Builder 中打开 IntelliJ Flex 项目是否可行？是否有任何解决方案可以允许此工作流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:22:40.977

你不走运：FlashBuilder 无法导入 IntelliJ 项目。
您唯一能做的就是在 FlashBuilder 中创建一个新项目并将其`Project location`文件夹指向 IntelliJ 项目文件夹。
链接依赖项和设置源路径必须手动完成。默认情况下，FlashBuilder 项目的主要源文件夹是`/src`。`src/main/flex`因此，如果它与您的 IntelliJ 项目类似，请确保也对其进行调整。

# flash - stage3d中顶点着色器中的纹理访问？

> ID：12309987
> 
> 赞同：0
> 
> 时间：2012-09-06T23:52:01.547
> 
> 标签：flash, shader, gpu, stage3d

是否可以在 stage3d 和 flash 11.4/air 3.4 的顶点着色器中执行纹理访问？

如果不可能，是否有另一种方法可以实现从帧到帧的高效“有状态内存”，同时在 stage3d 的 GPU 上保持 100%？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:38:55.350

可能不是。我对stage3d一无所知，但我猜它在后台使用OpenGL或DirectX。它需要为 OpenGL 使用顶点纹理提取 (VTF) (http://www.opengl.org/wiki/Vertex_Texture_Fetch) 或为 DirectX 使用顶点纹理采样器 (http://msdn.microsoft.com/en-us/library) /windows/desktop/bb206339(v=vs.85).aspx)。两者都是利基功能。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:04:43.070

可悲的是，但这是不可能的。而且恐怕没有任何方法可以保存数据并在另一帧中使用它。

# c++ - 初始化虚拟继承层次结构

> ID：12309989
> 
> 赞同：1
> 
> 时间：2012-09-06T23:52:10.460
> 
> 标签：c++, inheritance, c++11, virtual-inheritance

考虑以下虚拟继承层次结构

```
#include <string>
#include <iostream>

struct base
{
  base() = default;
  base( std::string const& s ) : s_(s) {}

  std::string print() { return s_; }

private:
  std::string s_;
};

struct derived : virtual base
{
  derived( std::string const& s ) : base( "cool formatting: " + s ) {}
};

struct more_derived : virtual derived
{
  more_derived( std::string const& s ) : derived( "even cooler formatting: " + s ) {}
};

int main()
{
  std::cout << more_derived( "foo" ).print() << std::endl;
} 
```

期望的输出：

```
cool formatting: even cooler formatting: foo 
```

该代码不打印任何内容，因为`more_derived`没有显式调用`base`采用字符串的构造函数，因此`base`调用了默认构造函数。此外，由于`virtual`继承`derived`的初始化`base`被忽略。

如何在保持虚拟继承且不必显式调用每个基类构造函数的同时获得所需的输出？

**编辑：**
我意识到由于虚拟继承，使用构造函数调用继承层次结构是不可能的。我希望有人可以提供一种替代方法，在构建`most_derived`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:03:23.517

你要求两个相互矛盾的目标。一方面，您希望维护虚拟继承（您真的需要它吗？），另一方面，您希望不直接从最派生的类型调用构造函数。

你不能两者都得到，所以选择一个。您当然可以从最派生的类型中传递*所需*的字符串，但我猜测该点不是实际值，而是该值是自下而上构造的事实......