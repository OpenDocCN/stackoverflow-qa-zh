# StackOverflow 问答 10642000-10642999

# java - Java HashMap 未返回预期结果

> ID：10642004
> 
> 赞同：0
> 
> 时间：2012-05-17T19:08:32.940
> 
> 标签：java, hashmap, linkedhashmap

我对使用 Stax Parser 读取 xml 有一个疑问。预期结果：

> hq_seq_mast {SEQ_VAL=SEQ_VAL, 1=column,LAST_SEQ_VAL=LAST_SEQ_VAL, 2=column} db_sequence_info{TNAME=TNAME, 3=column, CNAME=CNAME, 4=column}

实际结果：

> {hq_seq_mast={}, db_sequence_info={}}

我犯了什么错误。

```
import javax.xml.stream.XMLStreamReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.LinkedHashMap;

public class SaxDiffChecker {
public static LinkedHashMap<String,LinkedHashMap<String,String>>FirstxmlCollection=new LinkedHashMap<String,LinkedHashMap<String,String>>();
public static LinkedHashMap<String,String> firstXml=new LinkedHashMap<String,String>();

public static String tableName=null;
public static String tableendElement=null;
public static String columendElement=null;
public static String characterElement=null;
public static String tempendElement=null;
public static String tempName=null;
public static String ntempName=null;
public static int key=0;

public void print(String fileLocation) {
    try {

        FileInputStream fileInputStream = new FileInputStream(fileLocation);
        XMLStreamReader xmlStreamReader =    XMLInputFactory.newInstance().createXMLStreamReader(fileInputStream);
        while (xmlStreamReader.hasNext()) {
            printEventInfo(xmlStreamReader);
           }
        System.out.print("======="+FirstxmlCollection);
        xmlStreamReader.close();
    } catch (XMLStreamException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } catch (FileNotFoundException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
}

 private static void printEventInfo(XMLStreamReader reader) throws XMLStreamException {

    int eventCode = reader.next();

    switch (eventCode) {

        case 1 :

            //System.out.println("event = START_ELEMENT");
            //System.out.println("Localname = "+reader.getLocalName()+" Attribute Name"+reader.getAttributeValue(0));

            if("table".equalsIgnoreCase(reader.getLocalName())){

                tableName=reader.getAttributeValue(null,"name");
                tableendElement=reader.getLocalName();
            }else if("column".equalsIgnoreCase(reader.getLocalName())){
                columendElement=reader.getLocalName();
                firstXml.put(reader.getAttributeValue(0),reader.getAttributeValue(0));
            }else{
                tempendElement=reader.getLocalName();
            }
            break;
        case 2 :

            //System.out.println("event = END_ELEMENT");
            //System.out.println(tableendElement+"Localname = "+reader.getLocalName());
            if(tableendElement.length()>0 && tableendElement!=null && tableendElement.equalsIgnoreCase(reader.getLocalName())){
                System.out.println(tableName+"Heeee"+firstXml);
               FirstxmlCollection.put(tableName,firstXml);
               firstXml.clear();

            }else if(columendElement.length()>0 && columendElement!=null && columendElement.equalsIgnoreCase(reader.getLocalName())){
                firstXml.put(""+key++,columendElement);
            }
            break;
        case 3 :

            //System.out.println("event = PROCESSING_INSTRUCTION");
            //System.out.println("PIData = " + reader.getPIData());
            break;
        case 4 :

            //System.out.println("event = CHARACTERS");characterElement

            //System.out.println("Characters = " + reader.getText());
            break;
        case 5 :

            //System.out.println("event = COMMENT");
            //System.out.println("Comment = " + reader.getText());
            break;
        case 6 :

            System.out.println("event = SPACE");
            System.out.println("Space = " + reader.getText());
            break;
        case 7 :

            System.out.println("event = START_DOCUMENT");
            System.out.println("Document Started.");
            break;
        case 8 :

            //System.out.println("event = END_DOCUMENT");
            System.out.println("Document Ended");
            break;
        case 9 :

            //System.out.println("event = ENTITY_REFERENCE");
            //System.out.println("Text = " + reader.getText());
            break;
        case 11 :

            //System.out.println("event = DTD");
            //System.out.println("DTD = " + reader.getText());

            break;
        case 12 :

            //System.out.println("event = CDATA");
            //System.out.println("CDATA = " + reader.getText());
            break;
    }
}

public static void main(String[] args) {
    SaxDiffChecker eventsPrinter = new SaxDiffChecker();
    eventsPrinter.print("C:\\Users\\vellikutti\\Desktop\\bala.xml");

 } 
```

}

```
xml:
<data-dictionary name="hq">
 <table engine-type="InnoDB" name="hq_seq_mast" scope="HQ">
 <columns>
  <column name="SEQ_VAL">
  <data-type>int(10)</data-type> 
  <nullable>false</nullable> 
 </column>
 <column name="LAST_SEQ_VAL">
   <data-type>int(10)</data-type> 
   <nullable>false</nullable> 
  </column>
 </columns>
 </table>
 <table engine-type="InnoDB" name="db_sequence_info" scope="HQ">
 <columns>
 <column name="TNAME">
 <data-type>varchar(30)</data-type> 
 <nullable>false</nullable> 
 </column>
 <column name="CNAME">
 <data-type>varchar(30)</data-type> 
 <nullable>false</nullable> 
  </column>
  </columns>
  </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:33:55.650

这是你的问题`firstXml.clear()`。正在清除数据。您可能希望将 firstXml 设为局部变量或将其设置为`firstXml = new LinkedHashMap<String,String>();`，而不是清除它。

代码更改：

```
//create new map instead of clearing saved map (remember - obj passed by ref)
firstXml=new LinkedHashMap<String,String>();//firstXml.Clear(); 
```

结果：

```
hq_seq_mastHeeee [SEQ_VAL:SEQ_VAL, 0:column, LAST_SEQ_VAL:LAST_SEQ_VAL, 1:column]
db_sequence_infoHeeee [TNAME:TNAME, 2:column, CNAME:CNAME, 3:column]
Document Ended
=======[hq_seq_mast:[SEQ_VAL:SEQ_VAL, 0:column, LAST_SEQ_VAL:LAST_SEQ_VAL, 1:column], db_sequence_info:[TNAME:TNAME, 2:column, CNAME:CNAME, 3:column]] 
```

# javascript - navigator.buildID 对每个访问者来说都是唯一的吗？

> ID：10642005
> 
> 赞同：0
> 
> 时间：2012-05-17T19:08:38.670
> 
> 标签：javascript

每个访问者都是`navigator.buildID`唯一的（我想用它来跟踪访问者）？

如果是，Chrome、Safari 和 IE 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:15:57.590

> navigator.buildID 对每个访问者来说是唯一的吗

不，[这是浏览器的版本号](https://developer.mozilla.org/en/DOM/window.navigator.buildID)，特别是 Gecko 浏览器（如 Firefox）。它用于识别浏览器的版本，因此根本不会使其唯一。

> 我想用它来跟踪访客

如果您想跟踪用户，您可以使用其他机制，例如要求注册、cookie 等。

# html - 单击时更改 span 元素的背景颜色

> ID：10642010
> 
> 赞同：1
> 
> 时间：2012-05-17T19:08:49.593
> 
> 标签：html, css

为了在悬停期间更改颜色，我有一个 css 语句，例如`span:hover{......}`. 是否有任何可用的直接 css 选项（不是 javascript）来指定单击 span 元素的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:10:16.633

您是否尝试过使用：活动？

```
span:active 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:10:34.350

`span:active`，但是大多数版本的 Internet Explorer 将忽略此规则

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:17:49.437

您将需要捕获和处理`click`事件，即 javascript。纯 HTML/CSS 无法做到这一点。

`:active`CSS psuedoclass 不会在点击后保留其样式。

# ios4 - CGContextShowTextAtPoint 如何从下到上水平书写文本？

> ID：10642011
> 
> 赞同：0
> 
> 时间：2012-05-17T19:09:05.130
> 
> 标签：ios4, ios5, core-graphics

我想在CGContext中从下到上水平写一个文本？我做了以下。

```
 CGContextSelectFont(cgContext, "Arial", 8, kCGEncodingMacRoman);
 CGContextSetTextMatrix(cgContext, CGAffineTransformMakeRotation  (M_PI /2));
 CGContextShowTextAtPoint(cgContext, xval, yval, "transd", 6); 
```

文本是水平制作的，但它会显示反转的文本。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:08:55.017

CGContextSetTextMatrix(cgContext, CGAffineTransformMake(1, 0, 0, -1, 0, 0));

代替：

CGContextSetTextMatrix(cgContext, CGAffineTransformMakeRotation (M_PI /2));

对我有用，希望它对你有用

# c# - 在 C# 中滚动查看子窗体

> ID：10642012
> 
> 赞同：3
> 
> 时间：2012-05-17T19:09:06.130
> 
> 标签：c#, winforms

在 winform 中，它有子表单，我使用这些代码进行排序：

```
this.LayoutMdi(MdiLayout.TileHorizontal); 
```

但是有问题。此表单有 4 个子表单，当我使用该代码时，它将被排序，但子表单中没有滚动或其他内容，因此可以让用户看到所有表单控件。我想知道如何使用滚动条，当表单较小时，我们可以滚动子表单并查看其所有控件。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:12:30.187

将 Forms AutoSCroll 属性设置为 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:12:38.707

您应该能够打开[AutoScroll](http://msdn.microsoft.com/en-us/library/a62htd5x)为`Form`您添加滚动条功能。此技术适用于许多 Windows 窗体对象（任何派生自[ScrollableControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol)的对象）。

# java - 如何使用 j2me APIBridge 访问移动收件箱、通话记录、照片库？

> ID：10642013
> 
> 赞同：2
> 
> 时间：2012-05-17T19:09:12.150
> 
> 标签：java, api, java-me, nokia

我正在寻找方法或某种示例，通过它们我可以访问我的手机通话记录或消息收件箱。但是，我没能找到，因为在所有的博客中，甚至在这个站点（堆栈溢出）中，每个人都在说，这是不可能的。今天，我找到[了这个答案](https://stackoverflow.com/questions/7793696/reading-sms-from-inbox-in-j2me)，这增加了我想做的希望。正如 Lucifer 所说，使用[APIBridge](http://www.developer.nokia.com/Resources/Tools_and_downloads/Other/APIBridge/)我们可以实现这一点。

然后，我找到[了这个例子](http://www.developer.nokia.com/Community/Wiki/File:J2MEBridgeExamples.zip)，其中已经解释了访问通话记录和照片库。但是，当我试图在我的手机上使用这个例子时，它试图访问互联网。我检查了代码，但没有在其中找到任何 URL。谁能帮助我理解或如何将这个示例用于我的手机？

我正在开发诺基亚 6700 Classic S40 系列手机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:27:52.890

**APIBridge** Jar 基于 Symbian 操作系统手机，主要是 S60 系列。因此，在您的情况下，您无法使用`APIBridge.jar`.

我在这里阅读了[API Bridge Interface](http://www.developer.nokia.com/Community/Wiki/J2ME_API_Bridge_Interface)的详细信息。它这么说。APIBridge 是一个 Symbian 服务器，它公开了一个 HTTP 接口，用于服务器与其客户端之间的通信。可以通过对 APIBridge 侦听的本地主机端口进行 http 调用来使用 APIBridge。以下架构图解释了系统的不同部分：

![在此处输入图像描述](../Images/4cd0c5d37680a45a953da492143ee7b6.png)

*   **访问层 J2ME API：**
    *   J2ME API 为Java 应用程序提供了APIBridge 服务的基于函数的接口。它执行以下活动： 使用网桥进行身份验证
    *   从函数调用到 APIBridge 的 HTTP 请求，从应用程序开发人员那里抽象出这种复杂性；
*   **框架层 APIBridge 服务器：**
    *   APIBridge Server负责对客户端进行认证，接收请求，将请求路由到相应的APIBridge插件执行，并返回结果。
*   **ECOM 插件层插件：**
    *   插件负责分析请求中的参数，调用适当的 Symbian API 来执行它，并创建 HTTP 响应。

所以，从上面的描述中你可以看到它在 APIBridge 接口中使用了 HTTP 连接，这就是你的应用程序试图访问 Internet 连接的原因。

# linear-algebra - 当基础几乎完成时，有效计算线性基础的扩展完成（理想情况下使用 LAPACK 例程）

> ID：10642023
> 
> 赞同：1
> 
> 时间：2012-05-17T19:09:37.487
> 
> 标签：linear-algebra, numerical-methods, lapack, numerical-analysis

我有一个带有正交列的 $p \times n$ 矩阵 $B$（其中 $n < p$），并且希望找到一种数值有效的方法来扩展此矩阵以获得完整的 $p$ 维正交基。换句话说，我想通过 $pn$ 互补矩阵 $W$ 计算 $p$ 以便

$[黑白|宽]$

是正交的。

目前我正在计算秩 $pn$ 投影矩阵的 QR 分解

$P=I-BB^T= QR$

使用 LAPACK 例程`dgeqp3`并`dorgqr`丢弃 $Q$ 的尾随 $p$ 列。我确信必须有一种更有效的方法，因为在我的应用程序中，$B$ 几乎是一个完整的基础，即 $pn$ 很小。

我想知道如何通过 $P$ 的列递归地构建一个互补的基础 $R$。仅当 $\det([R|C]^T[R|C)\neq0$ 时，在每一步将 $C$ 列添加到当前 $R$。在 $R$ 中有 $pn$ 独立向量后，我可以将 $W$ 形成为 $W=(R^TR)^{-1/2} R$。但是，我不确定这是否是一个数值稳定的解决方案，或者是否有另一种更有效的方法。

理想情况下，我想要一种可以使用标准 LAPACK 例程实现的方法。

# android - 从 GPS 修复中删除高度

> ID：10642024
> 
> 赞同：0
> 
> 时间：2012-05-17T19:09:41.487
> 
> 标签：android, google-maps, altitude

嗨，我正在使用带有 Android 增强现实框架的用户位置开发一个 Android 增强现实应用程序。我的问题是，在高度为 0 的硬修复中，我可以很好地看到所有标记，但是当我得到 gps 时，标记会向上或向下移动，我必须转动设备才能看到它们。是否有任何工作方法可以从我的 gps 修复中删除高度并将其设置为 0 与标记相同以解决此问题？

我正在使用，`removeAltitude()`但它似乎不起作用。

我使用位置管理器来请求 GPS 定位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:19:47.167

你不能在你的标记类中忽略高度吗？

# c# - DynamoDB 查询多个哈希键

> ID：10642025
> 
> 赞同：0
> 
> 时间：2012-05-17T19:09:42.653
> 
> 标签：c#, nosql, amazon-web-services, amazon-dynamodb

我正在努力解决如何在 DynamoDB 中为查询建模。让我们以推特为例，我想回答的问题是，给我关注的人展示最近的 20 条推文。

我有 3 个 Dynamo 表：

```
Users
UserUID - Hash
Handle

Following
UserUID - Hash
FollowingUserUID - Range

Tweets
UserUID - Hash
Tweet
PostedDate - Range 
```

我需要采取哪些步骤来回答这个问题，因为 UserUID 1234 关注的人显示了 20 条最新的推文。

我有的步骤：

第 1 步：获取 UserUID 1234 关注的所有人的列表。

第 2 步（我迷路的地方）：对于该 ID 列表，向我显示 20 条最近的推文。

我不确定如何构造第二个查询，因为我需要过滤 Id 列表上的哈希键，并使用限制和可能的范围过滤器。因此，我认为我不能使用 BatchGetItemRequest。这是可能的还是我让问题变得比需要的更难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:44:16.523

> 第 2 步（我迷路的地方）：对于该 ID 列表，向我显示 20 条最近的推文。

这个问题没有直接的答案，因为我们不能只查询“ORDER BY PostedDate”

在 DynamoDB 中有效地进行如此复杂的映射的唯一可能解决方案是存储冗余数据。当然，您可以只获取每个朋友的最新 20 条推文，然后像您已经提议的那样在您的 web 应用程序中对其进行排序。但是猜想有人关注了 1000 个用户，这将导致对一个用户请求进行 1000 次查询。

所以我想出的一个可能的解决方案如下：

```
Users
 UserUID - Hash
 Handle

Following
 UserUID - Hash
 FollowingUserUID

FollowedBy
 UserUID - Hash
 FollowedByUserUID

RecentTweetsOfFriends
 UserID - Hash
 PostedDate - Range
 TweetUUID

RecentTweetsOfUser
 UserID - Hash
 PostedDate - Range
 TweetUUID

Tweets
 TweetUUID - Hash
 Tweet
 UserID
 PostedDate 
```

将新推文添加到数据库的过程：

1.  通过为其创建新的 UUID 将推文写入 Tweets 表
2.  从“FollowedBy”表中获取所有关注提交新推文的用户的用户
3.  在“RecentTweetsOfUser”和“RecentTweetsOfFriends”表中链接新推文

对于这个解决方案，您不需要“Following”表，但我把它留在了那里，因为将它保存在两个方向可能很整洁。

# php - 从 C 应用程序到 php 的实时视频流

> ID：10642027
> 
> 赞同：0
> 
> 时间：2012-05-17T19:09:51.213
> 
> 标签：php, javascript, c

我有一个用 C 语言编写的应用程序，它通过网络摄像头捕获图像，对其进行一些处理，然后通过套接字将生成的图像发送到客户端应用程序，该应用程序也是用 C 语言编写的，位于另一台计算机上。我想做类似的事情，但使用网页作为客户端。有没有办法使用 php 或 javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:16:38.067

您显然可以使用接受捕获的图像然后通过 http 请求提供它们的中间服务器。（想想 flickr.com 或 photobucket.com）您不必用 PHP 编写该服务器的代码，您可以使用任何服务器端语言。

碰巧的是，现代标准实际上正在推动一种称为“Websockets”的东西：

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

但是，如果您只提供带有处理的单个图像，那么听起来使用 websocket 方法将是矫枉过正。（您说“视频”，但随后谈到发送“图像......”）

历史上，大多数人使用 Flash 客户端在 Web 上制作视频，这些客户端具有可用的套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:16:13.897

我的理解是您希望客户端使用浏览器获取结果。你不需要 PHP，简单的 HTML 就可以了。您可以在您的 c 程序（捕获图像的程序）中实现一个非常简单的 http 服务器，该服务器为文件请求提供服务。[这是 C 中的示例](http://www.paulgriffiths.net/program/c/webserv.php)。捕获的图像将保存在本地磁盘上，并根据要求提供。或者，一旦请求到达并提供给请求的客户端，它们就可以被捕获。当然，如果你需要获取频繁的图片，你也可以在客户端有一个java脚本来刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:15:35.510

目前没有办法完全使用 PHP 和 JavaScript 来做到这一点，因为 PHP 在服务器端运行（因此无法访问客户端的摄像头），并且大多数浏览器*目前不通过 JavaScript 公开网络摄像头。

不过，Flash 文件确实可以访问网络摄像头。Flash 也具有网络访问权限，因此将视频捕获和网络传输组件都写入其中可能是最有意义的。

*：奇怪的例外是 Opera。但这并没有真正广泛使用，不足以使其成为一个重要的例外。

# java - 使用属性打开/关闭 Proguard

> ID：10642030
> 
> 赞同：2
> 
> 时间：2012-05-17T19:09:59.270
> 
> 标签：java, android, ant, proguard

在我的 project.properties 文件中有一个属性 proguard.config，当我运行 ant 时，它将运行 proguard。以下所有将导致 proguard 运行

```
 proguard.config
 proguard.config=
 proguard.config=proguard.cfg 
```

属性文件中有没有办法打开/关闭proguard？

否则，我将需要编写一个脚本来添加/删除或重命名 proguard.config 属性来控制它。我宁愿只获取/设置属性。我想要最好的解决方案。现在我正在编码 replaceregexpr 以将 proguard.config 重命名为要关闭的其他名称。寻找更好的解决方案并想知道其他人是如何控制的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T19:16:19.510

一个更简单的方法是只有这条线

```
#proguard.config=proguard.cfg 
```

甚至更好的是完全不使用它！这样 proguard 根本不会运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T00:33:55.823

这是如何完成的：

不要在 project.properties 文件中设置 proguard.config=proguard.cfg。

在您的 build.properties 文件集中

```
 proguarded=on    # or whatever variable you chose 
```

如果您正在构建 Android，请定义这些宏，以便始终关闭调试：

```
 <macrodef name="set-app-debuggable">
    <sequential>
        <echo>Updating AndroidManifest.xml with debuggable set to true</echo>           
       <replaceregexp file="./AndroidManifest.xml"
                            match='android:debuggable="(.*)"'
                            replace='android:debuggable="true"'
                            byline="false">         
        </replaceregexp>
    </sequential>
</macrodef>
<macrodef name="set-app-not-debuggable">
    <sequential>
        <echo>Updating AndroidManifest.xml with debuggable set to false</echo>          
        <replaceregexp file="./AndroidManifest.xml"
                            match='android:debuggable="(.*)"'
                            replace='android:debuggable="false"'
                            byline="false">         
        </replaceregexp>
    </sequential>
</macrodef> 
```

然后设置这些条件或类似于这些条件，具体取决于您是否要在 proguard 构建之外保留调试：

```
<target name="-set-mode-check">
    <echo> set mode checking properties ... </echo>
    <echo> Proguard Property  value is '${proguard.config}' </echo>
    <echo> Proguard Property  value is '${proguarded}' </echo>
    <condition property="proguard.config" value="proguard.cfg">
       <isset property="proguarded"/>
   </condition>
    <echo> Proguard Property  value after condition set is '${proguard.config}' </echo>
     <if condition="${proguarded}">
        <then>
            <echo>****  This build is proguarded so setting debuggable off  ****</echo>
            <set-app-not-debuggable />
        </then>
        <else>
            <echo>****  This build is not proguarded so setting debuggable on ****</echo>
            <set-app-debuggable />
        </else>
    </if>

</target> 
```

根本不需要在 project.properties 文件中设置 proguard.config。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-20T06:47:18.643

设置此属性

```
minifyEnabled false 
```

在您的应用中`build.gradle`

像这样在调试和发布中禁用：

```
 buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        debug {
            minifyEnabled false 
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

    } 
```

# jquery - 不要在孩子身上触发悬停事件

> ID：10642033
> 
> 赞同：8
> 
> 时间：2012-05-17T19:10:09.300
> 
> 标签：jquery, css

我有一个带有瓷砖（草、水等）的容器，其中一些我有物品（边框精灵、树木和一般物品）。由于精灵的性质，所有项目都是 64x64，而瓷砖只有 32x32。

我的问题是我想在图块上触发悬停事件，但它们有时会被另一个图块的项目遮蔽。

下图显示了问题。当我想悬停树砖时，厚厚的绿色区域是**真正悬停的瓷砖。**

[问题 http://upload.cip.nu/pfile.php?file_id=2327](http://upload.cip.nu/pfile.php?file_id=2327)

CSS：

```
#map_canvas .tile{
    height: 32px;
    position: absolute;
    width: 32px;
}
#map_canvas .tile .item{
    background-position: bottom right;
    background-repeat: no-repeat;
    bottom: 0;
    display: inline-block;
    height: 64px;
    margin: 0;
    padding: 0;
    position: absolute;
    right: 0;
} 
```

HTML，简化：

```
<div class="tile" style="background-image: url(grass.png);"></div>
<div class="tile" style="background-image: url(grass.png);"></div>
<div class="tile" style="background-image: url(grass.png);">
    <div class="item" style="background-image(top-left-border.png);"></div>
</div> 
```

这是现场演示[http://sleavely.com/tiles/](http://sleavely.com/tiles/)

我什至不知道如何表达这个问题，但这里是：

是否可以仅在父元素 (.tile) 上触发事件，以便溢出的子元素 (.item) 不会混淆我真正悬停的图块？

**编辑：感谢@Brilliand，我实现了以下**

```
function figureOutTile(e){
    var $source = jQuery(e.srcElement);
    if($source.hasClass("item")){
        var $parent = $source.parent();
        var posx = $parent.attr("col");
        var posy = $parent.attr("row");
        if(e.offsetY <= 32){
            if(e.offsetX <= 32){
                return jQuery(".tile[col="+ (posx-1) +"][row="+ (posy-1) +"]");
            }else{
                return jQuery(".tile[col="+ posx +"][row="+ (posy-1) +"]");
            }
        }else{
            if(e.offsetX <= 32){
                return jQuery(".tile[col="+ (posx-1) +"][row="+ posy +"]");
            }else{
                return $parent;
            }
        }
    }else{
        return $source;
    }
}
jQuery("#map_viewport").on({
    mouseenter: function(e) {
        var $target = figureOutTile(e);
        $target.addClass('hovered');
    },
    mouseleave: function() {
        jQuery(".tile.hovered").removeClass('hovered');
    }
}, '.tile');​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:14:18.483

```
$(".tile").children().on('mouseenter', function(e) { 
   e.stopPropogation(); 
}); 
```

或者

```
$(".tile").on('mouseenter', function(e) { 
   if (this===e.target) {
      //do stuff
   }
}); 
```

编辑：

```
$("#map_viewport").on({
    mouseenter: function(e) {
        if (this===e.target) {
            $(element).addClass('someClass')
        }
    },
    mouseleave: function() {
        $(element).removeClass('someClass')
    }
}, '.tile'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:40:34.947

就您的浏览器而言，将鼠标悬停在从磁贴伸出的东西上与将鼠标悬停在它伸出的磁贴上是一样的，而不是悬停在被遮盖的任何东西上。要在您的特定情况下解决此问题，我建议将悬停功能放在#map_canvas 上，并在该功能中确定悬停在哪个图块上。对于矩形网格中的瓷砖，这是简单的算术。

当然，要使其工作，您需要包含一个 mousemove 事件（以检测鼠标何时从一个磁贴移动到另一个磁贴），并且您可能应该包含代码以在用户仍将鼠标悬停在同一磁贴上时退出该函数。

编辑：虽然这个答案已经被接受，但这是基于我的评论的解决方案：

```
$(".tile").append($("<div/>", {
    css: {
        position: "absolute",
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        "z-index": 50
    }
})); 
```

这似乎解决了所有带有项目的瓷砖的问题，尽管它搞砸了你的 :empty 声明。我之所以提到它，主要是因为它更接近于按要求回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:13:31.183

编辑：如果确实是事件冒泡的问题并且您使用的是 jQuery，请查看[event.stopPropagation 方法](http://api.jquery.com/event.stopPropagation/)。

你试过加`z-index`es吗？

```
 #map_canvas .tile{
        height: 32px;
        position: absolute;
        width: 32px;
        z-index: 1;
    }
    #map_canvas .tile .item{
        background-position: bottom right;
        background-repeat: no-repeat;
        bottom: 0;
        display: inline-block;
        height: 64px;
        margin: 0;
        padding: 0;
        position: absolute;
        right: 0;
        z-index: 2;
    } 
```

# ruby-on-rails - REST API 文档生成

> ID：10642036
> 
> 赞同：6
> 
> 时间：2012-05-17T19:10:27.037
> 
> 标签：ruby-on-rails, ruby, rest

是否有提供用于编写​​ REST API 文档的标记的库？我见过几家公司使用类似的文档模式，例如：

[http://api.teamlab.com/2.0/](http://api.teamlab.com/2.0/)

[http://www.fullcontact.com/docs/?category=person](http://www.fullcontact.com/docs/?category=person)

我想知道他们是否使用相同的库或服务。本质上，该库应该基于标记文本生成用于 API 导航、搜索和显示的页面（很像 Ruby 文档的 YARD）。

这是我到目前为止发现的：

*   [rapi_doc 宝石](https://github.com/elc/rapi_doc)。这是[一篇](http://www.rubyglob.com/generating-api-documentation-with-rapi_doc/)讨论用法的文章。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T16:48:48.027

你绝对应该看看[**Swagger**](http://developers.helloreverb.com/swagger/)。

它是开源的，被数百个 API 使用，3scale 也在其 API 管理解决方案中使用 Active Docs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:46:30.177

查看 Mashery 的[IO/Docs](http://mashery.com/solution/iodocs)。

> Mashery I/O Docs，下一代 API 文档和探索，让开发人员可以直接从您的文档执行实时 API 调用。Think docs 满足测试和调试的需求，所有这些都在一个方便的交互式界面中。

查看[Parse API Docs](https://parse.com/docs/rest)以获取另一个优秀文档的示例。

此外，我们花了很多时间设计[FullContact API 文档](http://www.fullcontact.com/docs/)。我们也使用[Apigee Live API 控制台](http://apigee.com/node/187)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T05:16:42.160

这是 api 文档（Rails4 和 Rails5）的有用 gem

ApiDoco [https://rubygems.org/gems/apidoco/versions/1.2.0](https://rubygems.org/gems/apidoco/versions/1.2.0)。

它非常易于设置并具有良好的用户体验。

# java - 旋转缓冲图像（对角线文本）

> ID：10642038
> 
> 赞同：1
> 
> 时间：2012-05-17T19:10:39.823
> 
> 标签：java, rotation, affinetransform

（对不起链接，我是新手，我不能发布图片）

我想完成以下任务：创建一个顶部带有图例的表格，并以对角线方式。

![http://i.stack.imgur.com/HqtJL.png](../Images/39f1e00bf9d156b77f546fd2cb5a772e.png)

但我遇到了一些问题，我有以下图像，我正在尝试将其旋转 45º（结果在右侧），

![http://i.stack.imgur.com/KOlIK.png](../Images/bb6e210386f25f4b996ce2a560d80e50.png)

这是我的代码：

```
//just some labels
ArrayList<String> labels = new ArrayList<String>();
labels.add("Juan");
labels.add("QWERTYYY");
labels.add("ANA");

// margin
int margin=3;

//diagonal = 45º
// value to shift each label 
int diagonalShift = (int)(cellSizeWidth / Math.sqrt(2d));

// height, width represent the size of the final image
// heightSub, widthSub represent the size of the image to be rotated taking into account the shift for each label
int widthSub = height + (diagonalShift * labels.size());
int heightSub = width;

// image to Display 
BufferedImage image = new BufferedImage(height, width, BufferedImage.TYPE_INT_RGB);
Graphics2D imageGraphics = (Graphics2D) image.getGraphics();

// tempImage: subImage to rotate and place in image
BufferedImage tempImage = new BufferedImage(widthSub, heightSub, BufferedImage.TYPE_INT_RGB);
Graphics2D tempImageGraphics = (Graphics2D) tempImage.getGraphics();
tempImageGraphics.setColor(Color.BLUE);
tempImageGraphics.drawRect(0, 0, widthSub-1, heightSub-1);

// I'd like to use antialias, but it's giving bad results
// tempImageGraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);

// drawing labels
// as we're designing a table cellSizeWidth and CellSizeHeight represent the dimensions for each cell
tempImageGraphics.setColor(Color.WHITE);
for (int i = 0; i < labels.size(); i++) {
    String label = labels.get(i);
    tempImageGraphics.drawString(label,
                                 margin + (i * diagonalShift),
                                 (int) (i * cellSizeWidth) + fontSize + centerDistance);
} 
```

我尝试了以下方法：

```
//rotating
AffineTransform fontAfineTransform = new AffineTransform();
// fontAfineTransform.rotate(verticalTextDirection.rotationAngle()); 
```

结果是第二个图像[2中的右侧图像](https://i.stack.imgur.com/KOlIK.png)

所以我需要应用翻译才能把它放到正确的位置

```
// Math.sqrt(2d) because I'm working with 45º and the height becomes the hypotenuse
// fontAfineTransform.translate(-height/Math.sqrt(2d),height/Math.sqrt(2d));

//drawing into image
imageGraphics.drawImage(tempImage, fontAfineTransform, null); 
```

有人可以解释一下 affineTransform 是如何工作的，或者我怎样才能让文本以对角线的方式呈现。

谢谢

# ruby-on-rails-3 - rails 3.0.11 javascript_include_tag 自动包含一个额外的 JS 文件

> ID：10642041
> 
> 赞同：0
> 
> 时间：2012-05-17T19:10:57.033
> 
> 标签：ruby-on-rails-3, unobtrusive-javascript

**导轨 3.0.11，红宝石 1.9.3**

当我在视图文件中使用 javascript_include_tag("js/datepicker") 时，它包含 2 个文件。

```
<script src="/js/datepicker.js?1336410184" type="text/javascript"></script>
<script src="/javascripts/widgets/tooltip.js?1332959153" type="text/javascript"></script> 
```

*注意我没有指定的第二个，它仍然被包括在内。*

我有以下文件夹和文件：

```
/public/javascripts
/public/javascripts/widgets
/public/javascripts/widgets/tooltip.js

/public/js
/public/js/datepicker.js 
```

我的应用程序使用 Prototype 和 jQuery。datepicker.js 实际上是 Protoplasm Datepicker 控件。

**/config/application.rb**

```
config.action_view.javascript_expansions[:defaults] = %w(jquery jquery_ujs jquery.prettyPhoto) 
```

**任何人都可以让我了解/javascripts/widgets/tooltip.js**自动包含的原因是什么？

谢谢，

吉涅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:33:07.837

好的，我找到了答案。

以下是我的应用程序中包含的插件：

rails-widgets-jquery (http://github.com/paolodona/rails-widgets/wikis)

这个插件的一个名为**core.rb的文件位于****rails-widgets-jquery/lib/widgets/core.rb**

重新定义导致我的问题中提到的行为的 javascript_include_tag 。

源代码如下：

```
module ActionView
 module Helpers
   module AssetTagHelper

  # We redefine javascript_include_tag in order to auto-magically include
  # the widgets javascripts. If you hame more than one javascript_include_tag
  # call, the widgets javascripts gets included only once.
  def javascript_include_tag_with_widgets(*sources)
    unless @__widgets_has_already_included_its_js
      options = sources.last.is_a?(Hash) ? sources.pop : {} # remove options
      sources << 'widgets/tooltip'
      sources << options # add previously removed option
      @__widgets_has_already_included_its_js = true
    end 
    javascript_include_tag_without_widgets(*sources)
  end
  alias_method_chain :javascript_include_tag, :widgets 
  end
 end
end 
```

感谢@Salil 的回复。这些帮助我得到了以上答案。

谢谢，吉涅什

# c - 二维数组。第一个索引错误，其他所有正确

> ID：10642042
> 
> 赞同：3
> 
> 时间：2012-05-17T19:11:00.700
> 
> 标签：c, arrays, visual-studio-2010, pointers

我有一个奇怪的问题，我不知道如何解决它。

我正在读取一个 50x50 字符的文本文件，并希望将其写入一个 50x51 的动态数组（用 '\0' 填充第 51 个插槽）。

之后我将整个阵列打印到控制台上。它应该显示 50 行，每行 50 个字符，因为这是输入。

它也很好用——除了第一行。由于某种原因总是错误的。

```
#define FIELD_SIZE 50
int main(int argc, char** args){
    char* data = ReadFile("start.txt");

    char** map = (char**) malloc( FIELD_SIZE );

    if(map==NULL)
        __debugbreak();

    {
        int i;
        for(i = 0; i < FIELD_SIZE; i+=1){
            map[i] = (char*) malloc(FIELD_SIZE+1);

            if(map[i]==NULL)
                __debugbreak();
            //(FIELD_SIZE+1) in order to skip the '\n' at the end of each line.
            memcpy( &map[i][0], &data[i*(FIELD_SIZE+1)], FIELD_SIZE);
            map[i][FIELD_SIZE] = '\0';
        }
    }

    {
        int i;
        for(i = 0; i < FIELD_SIZE; i+=1){
            printf("%s\n", map[i]); //<-- prints something bad for i==0
        }
    }

    free(data);

    return 0;
} 
```

这是程序执行后我的控制台的样子： ![在此处输入图像描述](../Images/68dadcce26868808258214895f1282cf.png) 第一行也应该是“aaaaaaaaaaaaa ...”。所以这似乎是一个坏指针或什么的。

但是，如果我将 FIELD_SIZE 减小到 20（并分别读取 20x20 文本文件），它可以正常工作。

我没有看到数组大小和第一个索引之间的联系不起作用。由于 malloc 从未返回 0，因此分配没有问题。

我正在使用 VS2010 C++ 编译程序，但我必须将自己限制在 C 子集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:26:29.350

char** map = (char**) malloc( FIELD_SIZE );

char** map = (char**) malloc( FIELD_SIZE * sizeof(char*));

我不知道这是否是您代码中的错误。您分配 50 个字节，但在 map 中需要 50 个字节 x 4 个字节/指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:23:37.107

很快就注意到了。在这种情况下，它可能是无用的。Memcpy 将指针的地址而不是引用的值作为其来源，因此通常您不应该按照您的方式使用它。据我所知，您正在尝试一次复制一行。

```
memcpy( map[i], &data[i*(FIELD_SIZE+1)], FIELD_SIZE); 
```

尝试一下，尽管它可能无法解决您的问题。

# facebook - App Center Web Preview 未显示权限。

> ID：10642043
> 
> 赞同：2
> 
> 时间：2012-05-17T19:11:06.703
> 
> 标签：facebook, center

在编辑应用程序的应用中心页面并在提交前使用预览将其签出时，权限值未显示。

这是在提交过程之后发生的事情，还是这里出了问题？

# javascript - Backbone - 从 json 填充集合并更新视图

> ID：10642045
> 
> 赞同：3
> 
> 时间：2012-05-17T19:11:19.397
> 
> 标签：javascript, backbone.js, firebug, backbone-events, backbone-views

我正在尝试使用 JSON 文件中的数据填充集合。我是骨干初学者，所以我的问题可能很容易解决。但是整天都在为此苦苦挣扎-所以现在我正在寻求指导。

我正在创建一份问卷，并希望从本地存储的 JSON 文件中加载问题（稍后我将从服务器获取问题）。

我不确定我的集合是否完全被填充，或者问题是否是视图没有更新。我已经阅读了很多教程，并且从不同的地方得到了一些想法。

好吧..这是我的javascript代码：

```
$(function(){

var Question = Backbone.Model.extend({

    defaults: {
        q: "Empty question..."
    },

    initialize: function() {
        if (!this.get("q")) {
            this.set({"q": this.defaults.q});
        }
    }
});

var QuestionList = Backbone.Collection.extend({
    model: Question,
    url: "question.json"
});

var Questions = new QuestionList;

var QuestionView = Backbone.View.extend({

    tagName:  "li",

    template: _.template($('#item-template').html()),

    initialize: function() {
        _.bindAll(this, 'render', 'remove');
        this.model.bind('change', this.render);
    },

    render: function() {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
});

var AppView = Backbone.View.extend({

    el: $("#questionnaire_app"),

    itemTemplate: _.template($('#item-template').html()),

    initialize: function() {
        _.bindAll(this, 'addOne', 'addAll', 'render');

        Questions.bind('reset',   this.addAll);
        Questions.fetch();
    },

    addOne: function(question) {
        var view = new QuestionView({model: question});
        this.$("#question-list").append(view.render().el);
    },

    addAll: function() {
        Questions.each(this.addOne);
    }
});

var App = new AppView;

}); 
```

我有以下 HTML 代码：

```
<div id="questionnaire_app">
    <div class="title">
        <h1>Questions</h1>
    </div>
    <div class="content">
        <div id="questions">
            <ul id="question-list"></ul>
        </div>
    </div>
</div>

<script type="text/template" id="item-template">
    <div class="question">
        <div class="display">
            <p class="question-content"><%= q %></p>
        </div>
    </div>
</script> 
```

JSON 文件如下所示：

```
[
    {
        "q": "How were your meeting with Dr. Apfelstrudel?"
    },
    {
        "q": "What do you think of the movie Die Hard 4.0"
    },
    {
        "q": "Are people from Mars really green?"
    }
] 
```

**奖励问题：**我使用萤火虫，但发现调试这些东西非常困难。如果我在控制台中写入`console.log(Questions);`，我会得到**ReferenceError: Questions is not defined**。这是为什么？

**更新：**问题解决了。我以前没有使用过网络服务器，现在我使用了（我只是在浏览器中打开了文件）。代码工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:20:16.447

我测试了你的代码，它似乎对我来说运行良好。

**编辑**：这是一个指向您的代码的工作[小提琴](http://jsfiddle.net/rzYLU/)的链接，只是修改了它而不是获取模型我手动添加列表（因为我看不到如何在 jsfiddle 中复制它）。也许您的问题在于您的 JSON 文件（只读，位置错误）。

在 firebug 中出现引用错误的原因是问题引用超出了文档就绪函数末尾的范围，如果将其分配给某些内容，您将能够记录它。

例如

```
var q = {};

$(function() {

  // Your code
  var Questions = new QuestionList;
   q.Questions = Questions
 //the rest of your code
}); 
```

现在您可以使用 console.log(q.Questions) 将其登录到 firebug；

# android - 安卓数据库

> ID：10642047
> 
> 赞同：-1
> 
> 时间：2012-05-17T19:11:26.127
> 
> 标签：android, sqlite, emulation

我创建了一个包含 3 个表的数据库。检索数据库的内容并显示为 listview**在模拟器中工作正常**。但在设备中，列表视图为空。我用过“DBHelper”。为什么我无法查看设备中现有数据库的内容？

```
public class DatabaseHelper{
   private static final String TAG = "DBAdapter";    
public static final String column_1="CategoryName";
public static final String row_id="_id";
public static final String wordcolumn="word";
public static final String row_idword="_id";
public static final String row_idfor="CategoryId";
private DatabaseHelperDB dDbhelper;
private SQLiteDatabase dDb;
private DatabaseAdapter dbAdapt;
private static final String Database_CreateCat="create table if not exists categorys (_id integer primary key, CategoryName text not null);";
private static final String Database_CreateWord="create table if not exists wordss (_id integer primary key autoincrement, "
    + "CategoryId integer, word text not null, foreign key(CategoryId) references categorys(_id));";
private static final String Database_Name="idea_generator_db2_1";
private static final String Database_TableCat="categorys";
private static final String Database_TableWord="wordss";
private final Context dctx;
private static final int database_version=1;

public DatabaseHelper(Context ctx)
{
    this.dctx=ctx;
    dDbhelper=new DatabaseHelperDB(ctx);
}
private static class DatabaseAdapter extends SQLiteOpenHelper
{
    DatabaseAdapter(Context context)
    {
        super(context,Database_Name,null,database_version);
    }
    public void onCreate(SQLiteDatabase db)
    {
        try{
            db.execSQL(Database_CreateCat);
            db.execSQL(Database_CreateWord);
            //db.execSQL(sql)
        }catch(SQLException e)
        {
            e.printStackTrace();
        }
    }
    public void onUpgrade(SQLiteDatabase db,int oldversion,int newversion)
    {
        Log.w(TAG, "Database upgradation from version "+oldversion+" to "+newversion);
    db.execSQL("DROP TABLE IF EXISTS "+Database_TableCat);
    db.execSQL("DROP TABLE IF EXISTS "+Database_TableWord);
    onCreate(db);
    }
}

public DatabaseHelper open()throws SQLException{
    dDbhelper= new DatabaseHelperDB(dctx);
    dDb=dDbhelper.getWritableDatabase();        
    return this;

}

public void close()
{
    dDbhelper.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:26:44.670

1）你把数据放在表里了吗？

# string - 在 UNIX 中基于分隔符分割行

> ID：10642050
> 
> 赞同：8
> 
> 时间：2012-05-17T19:11:30.533
> 
> 标签：string, unix, split

我有一些由一些 SQL 查询返回的数据，如下所示。我正在尝试根据分隔符分隔行并将其发送到新行。如何在 UNIX 中执行此操作。我尝试使用 shell-脚本，但无法通过...

```
ALB|1001|2012-04-15 ALB|1001|2012-04-14 ALB|1001|2012-04-16 ALB|1001|2012-04-17

ALB|1001|2012-04-15
ALB|1001|2012-04-14 
ALB|1001|2012-04-16 
ALB|1001|2012-04-17 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-17T19:17:32.573

对于那个特定的例子，`tr ' ' '\n' < file`应该工作：

```
echo "ALB|1001|2012-04-15 ALB|1001|2012-04-14 ALB|1001|2012-04-16 ALB|1001|2012-04-17" | tr ' ' '\n' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T19:19:53.487

xargs 是一个简单的单一程序，您可以使用它来执行此操作，如：

```
$ echo "ALB|1001|2012-04-15 ALB|1001|2012-04-14 ALB|1001|2012-04-16 ALB|1001|2012-04-17"|xargs -d' ' -n1
ALB|1001|2012-04-15
ALB|1001|2012-04-14
ALB|1001|2012-04-16
ALB|1001|2012-04-17 
```

# wpf - IIS 和 WPF 视频流

> ID：10642053
> 
> 赞同：2
> 
> 时间：2012-05-17T19:11:39.553
> 
> 标签：wpf, iis, streaming

我需要有人在 WPF 视频流中的两个 Silverlight 中指出正确的方向。

我有两个项目，一个是 Silverlight 网页，另一个是 WPF 项目。目标是，在 WPF 应用程序上，用户能够将视频上传到服务器，Silverlight 网页使用任何 Web 协议（很可能是 http）对其进行流式传输。

我正在使用 Expression Encoder SDK 构建重新编码视频文件的代码（因为原始视频文件会非常大，每个超过 1gb），到目前为止我认为我做对了，但现在我需要将其流式传输到网络上，而我无法这样做。

silverlight 网页托管在带有 IIS 7.0 的 Windows Server 2008 R2 上。

我一直在阅读有关 IIS 流的信息，但是我发现的所有内容都表明，每次用户想要添加视频时，都必须转到 IIS 界面并手动添加，这不是唯一的方法，因为用户对它一无所知IIS。

如果可能的话，我想要一些关于如何通过 IIS 实现流式传输的代码示例，以及一些关于我可以做什么或做错了什么的指针......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T09:17:20.283

我不明白为什么用户每次都必须在 IIS 中手动执行此操作。从您的 WPF 应用程序中，使其将您的视频存储在 IIS 内的特定位置。还要在您的 IIS 中进行一次性配置以交付您正在上传的视频扩展，如果它是 mp4 或 wmv，请为其提供 MIME 类型“application/octet-stream”，因此当用户请求它时，它将由IIS。

不，配置您的 silverlight 应用程序以从 IIS 目录中读取文件（您必须首先知道它保存在 IIS 中的文件名。）

如果您需要“流媒体”体验，IIS 是不够的，您必须使用流媒体服务器，如 windows 媒体服务器或 flash 媒体服务器。

希望这可以帮助。

# sql-server - ADO 2.5 调用 SQL Server 存储过程从标量函数返回空白数据

> ID：10642068
> 
> 赞同：2
> 
> 时间：2012-05-17T19:12:40.420
> 
> 标签：sql-server, vb6, ado

我有一个用 VB6 编写的遗留应用程序，它使用 ADO 2.5 与 SQL Server 2008 数据库通信。其中包含一个从存储过程中获取数据的报告。存储过程调用 UDF，该 UDF 将`varchar`结果作为结果集中的一列返回。当从 SQL Server Management Studio 调用它时，它会正确填充该列，但是当从 VB6 应用程序中调用它时，它会返回一个空值。是否有任何可能导致此问题的兼容性问题？

这是UDF：

```
ALTER FUNCTION dbo.TransferNoteAgreementSummary(@ClientID int, @Year int) 
RETURNS varchar(3000) AS
BEGIN
    DECLARE @ret varchar(3000)
    SET @ret=''

    SELECT @ret = @ret +  
        + CONVERT(varchar, F.NumBins) + ' of ' + B.[Name]+', '+CONVERT(varchar, F.DaysPerWeek)+' lifts, ' + CF.Frequency 
        + ' from ' + CONVERT(varchar, F.StartDate,106)+' to '+CONVERT(varchar, F.EndDate, 106) + dbo.CrLf()
    FROM Accounts A
        JOIN AccountFragments F ON A.AccountID=F.AccountID
        JOIN BinTypes B ON A.BinTypeID=B.BinTypeID
        JOIN ContractFrequencies CF ON F.FrequencyID=CF.FrequencyID
    WHERE A.ClientID=@ClientID AND A.ContractYear=@Year
    ORDER BY B.[Name], A.AccountID, F.StartDate

    RETURN @ret
END 
```

这是存储过程的相关部分：

```
ALTER PROC [dbo].[sp_PrintRoundsReport]
AS

          DECLARE @Year int
    DECLARE @Results TABLE([Route] VARCHAR(100), Town VARCHAR(200), ClientID INT, Customer VARCHAR(400), [Address] VARCHAR(MAX),
                                                    [Item Code] VARCHAR(50), Bins INT, [Type] VARCHAR(40), Volume INT, BinDesc VARCHAR(3000), 
                                                    CollectDay VARCHAR(20), DayOrder int)

[ irrelevant lines removed ]                                                    

    SELECT [Route], Town, Customer, [Address], [Item Code], Bins, [Type], Volume, 
        dbo.TransferNoteAgreementSummary(ClientID, @Year) AS BinDesc, CollectDay
    FROM @Results
    ORDER BY DayOrder, [Route], Town, [Address], Volume 
```

最后，这里是被调用的代码：

```
 Set cmd = New ADODB.Command
  Set cmd.ActiveConnection = GetConnectionString() 

  cmd.CommandType = adCmdStoredProc
  cmd.CommandText = "sp_PrintRoundsReport"

  Dim rs As New Recordset

  Call rs.Open(cmd) 
```

问题似乎出在功能上。如果我将其更改为返回一个常量字符串，那么该值将正确传递

这会为任何人敲响警钟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:22:16.940

你不是失踪了吗？

```
cmd.Parameters.Add("@RETURN_VALUE") 
```

# css - Chrome，Linux Mint 中的衬线与“衬线”

> ID：10642070
> 
> 赞同：1
> 
> 时间：2012-05-17T19:12:46.897
> 
> 标签：css, google-chrome, fonts, typography

我不确定这会影响其他版本的 Chrome，我现在正在使用 Linux Mint 12。

似乎字体系列`serif`与`"serif"`（带引号）显示的字体稍大？

我只是觉得这很奇怪，我想不通。任何帮助将不胜感激，尽管这是定义。低优先级。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:16:08.030

[不应引用通用字体系列名称，](http://www.w3.org/TR/CSS21/fonts.html#value-def-generic-family)因为它们被视为关键字，而不是字符串。

我的猜测是：

*   Linux Mint 包含一个名为“serif”的字体系列，当您在 CSS 中将名称作为字符串引用时，Chrome 会使用该字体系列；或者

*   它*不*包含这样的字体，在这种情况下，Chrome 会退回到其他一些系统字体，这些字体可以是分配给浏览器的默认衬线字体，也可以完全是其他字体。

它不会*直接*退回到*仅基于单词“serif”的*默认衬线字体。换句话说，它的解释与未引用的关键字不同`serif`。

# javascript - 从 html 事件调用 javascript 类方法的正确方法

> ID：10642074
> 
> 赞同：4
> 
> 时间：2012-05-17T19:13:01.433
> 
> 标签：javascript, class, oop, events, dom-events

我有一个类 Foo，它有一个生成显示 HTML 的方法。我希望 HTML 有一个`onclick`事件处理程序，它调用`Foo.clickHandler`. 问题是我不知道这个特定实例的`Foo`名称是什么。同样，`onclick`事件无法知道如何访问`Foo`. 这是一些代码：

```
function Foo(){
    this.nonStaticVariable='Something non-static (different for every instance of Foo).';
    this.getHTML=function(){
        return '<a href="javascript:void(0);" onclick="/* How do I call Foo.clickHandler? */">Click Me!</a>';
    }
    this.clickHandler=function(){
        alert(nonStaticVariable);
    }
} 
```

非静态函数的要点是表明`onclick`需要调用正确的实例`Foo`。

我曾考虑过将一个字符串传递给`Foo`包含包含的变量名`Foo`，但这似乎是反 OOP：

```
function Foo(container){
    this.container=container;
    this.nonStaticVariable='Something non-static (different for every instance of Foo).';
    this.getHTML=function(){
        return '<a href="javascript:void(0);" onclick="'+container+'.clickHandler();">Click Me!</a>';
    }
    this.clickHandler=function(){
        alert(nonStaticVariable);
    }
}

var fooInstance=new Foo('fooInstance'); 
```

你有什么建议？

我也对 jQuery 解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:43:53.403

我希望我能理解你的问题。我认为您遇到了是否使用单例的问题？

我个人会选择我要去的地方，例如：

单身人士：

```
<!-- HTML -->
<a href="javascript:Foo.clickHandler(this)">singleton click</a>

//Javascript

// blah blah Foo = ....
this.clickHandler = function(what)
{
   alert(what);
} 
```

或者

原型：

```
// blah blah setup Foo & perhaps prototype

var element = document.createElement("a"); // or getelementbyid etc
element.onClick = function()
{
   alert(this);
} 
```

不确定我是否解释得很好。

也许看看这里： [http ://www.selfcontained.us/2008/12/23/javascript-widget-approaches-singleton-vs-prototype/](http://www.selfcontained.us/2008/12/23/javascript-widget-approaches-singleton-vs-prototype/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:51:55.033

在?之外是否可以访问`nonStaticVariable`并且`clickHandler`需要访问`Foo`？如果没有，你可以简单地做这样的事情：

```
function Foo(){
    //changed these to private variables only accessible from within Foo
    var nonStaticVariable='Something non-static (different for every instance of Foo).';
    var clickHandler = function(){
        alert(nonStaticVariable);
    }
    this.getHTML=function(){
        return $('<a href="#">Click Me!</a>').click(clickHandler);
    }
}

var fooInstance = new Foo();

var button = fooInstance.getHTML();

$("#container").html(button);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:28:07.727

嗯...我不是最好的 OO 程序员，但你可以传递一个哈希，它和你得到的一样

```
var fooHash = {name: "nameHere", type: "xxx", whatever: "whatever"};
var fooInstance = new Foo(fooHash); 
```

然后在你的 Foo 对象中你只需要添加类似的东西

```
function Foo(o){
    this.name = o.name;
    this.type = o.type; // etc....
} 
```

所以基本上你用this.name替换容器。可能有更好的方法，但这就是我所得到的

# nested - ARM Cortex M3 GPIO 中断 - 每个端口一个 ISR，有 8 个引脚 - 如何处理所有引脚？

> ID：10642078
> 
> 赞同：1
> 
> 时间：2012-05-17T19:13:05.940
> 
> 标签：nested, arm, interrupt, gpio

我正在使用 Luminary LM3S8962 微控制器及其包含的库指南，但这应该与任何具有嵌套向量中断的 ARM Cortex-M3 相关。

整个 GPIO 端口只能注册一个中断服务例程函数。一个 GPIO 端口通常有 8 个引脚，每个引脚都可以配置一个中断。对于每个引脚，您可以测试其上是否“发生”中断（待处理），对吗？对于每个引脚，您都可以清除挂起的中断，对吗？

如果 GPIO 端口上的引脚触发了 ISR，则处理器处于 ISR 中。那么当我们在 ISR 中时，如果同一端口上的另一个引脚触发中断会发生什么？我们假设代码检测到哪些引脚有待处理的中断。- 这个 ISR 是否被中断并开始新的 ISR，使用相同的代码，但更新了 PinInterruptStatus 寄存器？（我希望不会） - 这个 ISR 是否一直执行到完成，然后立即执行另一个引脚的中断？（我知道 ARM Cortex M3 实现了中断的尾链） - 或者是否必须有一个 while 循环循环直到所有引脚都被清除，在处理完一个引脚后清除它？

也许这会有所帮助：

[http://www.ti.com/lit/gpn/lm3s8962](http://www.ti.com/lit/gpn/lm3s8962)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:50:19.737

如评论中所述：通常 ISR 应采取措施防止重入。在 PIC 之类的东西中，这可能就像在 ISR 的“顶部”禁用中断并在“底部”启用中断一样简单。M3 的 NVIC 有点复杂。本白皮书 (http://www.arm.com/files/pdf/IntroToCortex-M3.pdf) 在第 7 页陈述如下：

> NVIC 支持中断的嵌套（堆栈），允许通过施加更高的优先级来更早地处理中断。它还支持中断的动态重新优先级。优先级可以在运行时由软件更改。在中断服务程序完成之前，正在服务的中断被阻止进一步激活，因此可以更改它们的优先级，而不会出现意外重新进入的风险。

上面的讨论直接解决了相同中断重入的可能性，并且它还引入了优先级的概念来处理中断 ISR 的更高优先级的中断。

这个参考很好：http: [//infocenter.arm.com/help/topic/com.arm.doc.dui0552a/DUI0552A_cortex_m3_dgug.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.dui0552a/DUI0552A_cortex_m3_dgug.pdf)。在页。在图 4-9 中，您将找到启用/禁用中断的说明。在第 4-6 页，您将找到对中断清除挂起寄存器的描述。使用这些，您可以确定哪些中断正在挂起。如果您真的想对中断启用/禁用控制感兴趣，请查看 BASEPRI 和 BASEPRO_MAX 寄存器。

话虽如此，我不确定我是否同意您的说法，即您的问题与任何 Cortex-M3 相关。Keil（我的 Cortex-M3 风格）提到 EXTI（外部中断控制器）处理 GPIO 引脚中断。有趣的是，ARM 文档简要讨论了“EXTI”，但并未像 Keil STM32 文档那样将其称为“控制器”。在“STM32 EXTI”上的快速谷歌搜索会产生很多点击，在“Luminary EXTI”上进行类似搜索并不会产生很多结果。鉴于此，我猜这个特定的控制器是 ARM 留给第 3 方的外围设备之一。

本文档支持该观点： http: [//www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/REFERENCE_MANUAL/CD00171190.pdf](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/REFERENCE_MANUAL/CD00171190.pdf)。这里提到了几个 AFIO_EXTI 寄存器。这些允许将 GPIO 线映射到中断。不幸的是，我在 Luminary 文档中找不到类似的东西。

那么这是什么意思？看起来您的中断只有端口级粒度。因此，您的 ISR 必须确定哪个引脚转换（假设您正在寻找边缘）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T06:44:33.477

在 Cortex-M3 中，如果两个中断的优先级相同（对于所有 GPIO 引脚），则前者不会被中断。稍后到来的中断将处于挂起状态。

当发生 GPIO 中断时，您可以检查 GPIO 的 Rising/Falling IO0IntEnR/IO0IntEnF 中断状态（取决于 ）以查找相应位以找到导致中断的引脚。

# sql - SQL触发器防止位列从1更新为0？

> ID：10642083
> 
> 赞同：2
> 
> 时间：2012-05-17T19:13:52.163
> 
> 标签：sql, sql-server-2008

给定 SQL Server 2008 中位类型的列，如何编写触发器以允许从 0 更新到 1，但不允许从 1 更新到 0？

换句话说，一旦该位设置为 1，它就应该始终为 1。

触发器必须适用于多个更新，例如：

```
UPDATE Table SET BitField = 0 
```

对于 BitField = 1 的任何行都应该失败。

编辑：为了提供一些背景，有问题的位/标志标记是否需要处理货币交易。如果该位 =1，则该事务已被处理。如果该位重置为 0，则事务可能重复，因此我需要在数据库级别强制该位不能重置为 0。

我需要防止针对数据库运行的直接查询以及应用程序级错误。我不能确定是否总是使用存储过程来更新表，所以我相信触发器是强制执行此逻辑的唯一方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:20:32.727

看起来你需要一个简单的后触发器

```
CREATE TABLE YourTable(
    PK int Primary key,
    bitCol bit
)

CREATE TRIGGER YourTableTrigger
   ON  YourTable
   AFTER UPDATE
AS 

    DECLARE @nrOfViolations int 

    select @nrOfViolations = count(*) from deleted  d
    join YourTable t on d.PK = t.PK
    where d.bitCol = 1 and t.bitCol = 0

    if @nrOfViolations > 0
    BEGIN
        RAISERROR('Failed', 16, 1);
        ROLLBACK TRANSACTION
    END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:43:17.127

一种方法是代替触发器，它允许所有更新通过，除了一旦它等于 1 就改变位域的任何东西。在这种情况下，它允许除了位域改变之外的所有更新。

```
CREATE TRIGGER OneWayBitChange
   ON YourTable
   INSTEAD OF UPDATE
AS 
BEGIN   
UPDATE YourTable SET  /* update all fields from original update except bitfield */
    Field1 = i.Field1,
    Field2 = i.Field2,
    Field3 = i.Field3
FROM YourTable 
INNER JOIN Inserted i ON i.PrimaryKey = YourTable.PrimaryKey

UPDATE YourTable SET  /* update bitfield only if it's not already a 1 */
    BitField = i.BitField
FROM YourTable
INNER JOIN Inserted i ON i.PrimaryKey = YourTable.PrimaryKey
WHERE IsNull(YourTable.BitField,0) < 1 
END
GO 
```

以上将允许所有更新在从 1 变为其他任何值（0 或 null）时接受一个字段。

如果您想在尝试对位字段进行尝试时取消对该行的任何更新，您可以像这样修改正文：

```
UPDATE YourTable SET  /* update all except bitfield changes from 1 to 0 */
    Field1 = i.Field1,
    Field2 = i.Field2,
    Field3 = i.Field3,
    BitField = i.BitField
FROM YourTable 
INNER JOIN Inserted i ON i.PrimaryKey = YourTable.PrimaryKey
      WHERE IsNull(BitField,0) = 0 OR IsNull(i.BitField,0) = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:57:54.567

我不会把它埋在触发器中。我会让您更新表的存储过程 (SP) 对值进行检查。例如：

```
CREATE PROCEDURE dbo.proc_update_my_table 
    @id             AS INT,
    -- Whatever other params you need
    @the_bit_field  AS BIT
AS
BEGIN

SET NOCOUNT ON;

DECLARE @existing_value AS BIT

SELECT @existing_value = the_bit_field FROM dbo.Table1 t WHERE t.id = @id

IF @existing_value = 1 AND @the_bit_field = 0
    BEGIN
    RAISERROR('Fail.', 10, 1)
    RETURN -1
    END

-- Update the table as normal.

END
GO 
```

使用触发器有点像在小偷（错误）通过敞开的前门（SP 的查询）进入后试图让他离开房子。而是锁上前门；）

# scala - 播放框架和 scala.tools.nsc

> ID：10642084
> 
> 赞同：2
> 
> 时间：2012-05-17T19:13:57.453
> 
> 标签：scala, sbt, playframework-2.0

我必须在 Play Framework 应用程序中使用 scala 解析器。

```
import scala.tools.nsc._

trait Foo
class Parser {
    def parse(code: String) = {
        val settings = new Settings
        settings.embeddedDefaults[Foo]
        val interpreter = new Interpreter(settings)
        interpreter.parse(code)
    }
} 
```

我在 Build.scala 中有以下依赖项

```
"org.scala-lang" % "scala-compiler" % "2.9.1" 
```

此代码在使用 SBT 构建时有效。在 Play 中，它以 NullPointerException 结束，并且：

> 无法初始化编译器：找不到对象 scala。
> 
> ** 请注意，从 2.8 开始，scala 不假定使用 java 类路径。
> 
> ** 对于旧行为，将 -usejavacp 传递给 scala，或者如果使用设置
> 
> ** 对象编程，settings.usejavacp.value = true。

**构建.scala**

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "com.qwerty.utils"
    val appVersion      = "1.0-SNAPSHOT"
    val scalaVersion    = "2.9.1"

    val appDependencies = Seq(
        "org.scala-lang" % "scala-compiler" % "2.9.1"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here

    )

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:47:04.483

有关背景`embeddedDefaults`，请参阅[原始提案](https://gist.github.com/404272)。

容器（Play）必须定义“app.class.path”和“boot.class.path”资源，然后`embeddedDefaults`使用它们为环境正确配置解释器。因此，这是对 Play 的增强。

如果您可以将必要的类路径传递到您的应用程序中，您可以自己显式配置类路径和类加载器，例如：

```
val settings = new Settings
settings.classpath.value = "<classpath>"
settings.bootclasspath.value =
  settings.bootclasspath.value + File.pathSeparator +
  "<extra-bootclasspath>"
val interpreter = new Interpreter(settings) {
    override def parentClassLoader = classOf[Foo].getClassLoader
}
interpreter.parse(code) 
```

引导类路径通常应包含 scala-library.jar，而类路径应包含应用程序 jar。

# css - 分级评论系统

> ID：10642086
> 
> 赞同：0
> 
> 时间：2012-05-17T19:14:06.750
> 
> 标签：css, css-selectors

我现在正在做前端设计并与几个后端程序员一起工作——这个过程对我来说是新的。

我们正在尝试建立一个完整的评论系统，其中包含回复的层次结构。我认为设置不同级别样式的最简单方法是使用第 n 个子列表和嵌套列表，但我无法完全理解如何做到这一点。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T23:16:41.427

正如 Ian 所说，nth-child 一次只能在一个级别上工作。如果您想更好地了解 nth-child，这里有一些资源：

*   [http://reference.sitepoint.com/css/pseudoclass-nthchild](http://reference.sitepoint.com/css/pseudoclass-nthchild)
*   [http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)
*   [http://www.impressivewebs.com/css3-pseudo-class-expressions/](http://www.impressivewebs.com/css3-pseudo-class-expressions/)
*   [http://lea.verou.me/demos/nth.html](http://lea.verou.me/demos/nth.html) - 这个很棒，因为它是交互式的

无论如何，您可能需要考虑以下几点：在分层评论的情况下可能会令人讨厌的一件事是，从某个级别来看，它们可能会变得如此狭窄以至于看起来很糟糕，甚至会让阅读有点更加困难。这就是为什么我赞成限制层数的原因——上面提到的 disqus 提供了限制嵌套层数的选项。

如果您的关卡数量有限，比如三个或五个，您可以为每个关卡添加类 ( `top-level`, `second-level`, `third-level`) 并设置不同的样式。您拥有的另一个选项，并且这个选项不依赖于限制级别的数量，是通过在生成 HTML 时添加一些`odd-level`/类来以不同的方式设置奇数和偶数级别的样式。`even-level`

基本上，你会有这样的事情：

```
<ul class="comments">
    <li class="comment first-level">
        <div class="comment-data">[date, time, comment author, link]</div>
        <div class="comment-body">[whatever is said in the comment]</div>
        <div class="comment-footer">[reply option, show/hide comment thread option]</div>
        <ul class="comment-thread">
            <li class="comment second-level">
                <div class="comment-data">[date, time, comment author, link]</div>
                <div class="comment-body">[whatever is said in the comment]</div>
                <div class="comment-footer">[reply option, show/hide comment thread option]</div>
                <ul class="comment-thread">
                    [... and so on...]
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

如果我想得更好，无论你有多少级别，你都可以添加像`level-1`, ,... 这样的类。`level-2`

# bash - 如何使用命令行 FTP 上传多个文件和目录？

> ID：10642092
> 
> 赞同：2
> 
> 时间：2012-05-17T19:14:35.847
> 
> 标签：bash, shell, ftp

> **可能重复：**
> [你如何在linux中递归地ftp一个文件夹](https://stackoverflow.com/questions/113886/how-do-you-recursively-ftp-a-folder-in-linux)

我想简单地从命令行以递归方式上传一个目录及其所有内容。从命令行执行此操作比诉诸 FileZilla 或其他一些窗口应用程序要容易得多。

我的解决方法是压缩，然后通过 FTP 上传 zip，然后 SSH 并解压缩...

有没有办法使用 BASH 命令行 ftp 上传多个文件和目录？

查看可用的命令，只有 put 和 send 只允许单个文件而没有目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:26:26.277

如果你可以访问 SSH，你也可以使用 scp 吗？如果是这样，请尝试以下操作：

```
scp -r local_dir you@server:remote_dir 
```

-r 标志允许您递归地复制到您的目的地。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:26:39.803

这是一种不使用 ftp 的技术，因为您已经拥有 ssh 访问权限：

```
tar czf - [your files here] | ssh user@host 'cd /dir && tar xzf -' 
```

在 stdout 上创建一个 tar 文件，并通过管道连接到 ssh，它将从 stdin 解压缩。

# sharepoint - 使用 Power Pivot 中的数据时作为属性的度量

> ID：10642094
> 
> 赞同：0
> 
> 时间：2012-05-17T19:14:57.300
> 
> 标签：sharepoint, attributes, powerpivot, dax, measures

我创建了一个 Power Pivot 工作簿，其中包含来自我们商店的信息（计划是连接到此文档并使用数据），基本上是这样的。

客户 ID | 购买数量产品A | 购买数量B | QtyPurchasedProductC ...

当我将 Power Pivot 数据用作数据透视表时，一切正常，但是当我将工作簿上传到 SharePoint 网站并从另一个工作簿连接到 PowerPivot 时，所有度量值（QtyPurchasedProductA、QtyPurchasedProductB、QtyPurchasedProductC）都显示为属性而不是度量。

这发生在从我的数据库中提取以及自定义 DAX 字段中。

知道为什么会这样吗？有没有一种方法可以在我的 Power Pivot Central 文档中指定？（我上传到sharepoint的那个）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:42:50.250

当使用基于工作簿本地 PowerPivot 容器的数据透视表（或数据透视图）时，Excel 将“自动”将聚合函数（计数、总和等）应用于放置在值/详细信息部分的任何字段。我的猜测是，这个“功能”旨在使 PowerPivot 对普通商业用户更加用户友好……但我认为会助长不良习惯。

因此，您需要返回 PowerPivot 工作簿的本地副本并明确定义度量。最简单的方法是选择列并从列出的聚合函数之一中进行选择（见下文）：

![在此处输入图像描述](../Images/3f57a7baf999318112637b179beabac1.png)

对于复杂度量，您可以在计算区域中使用 DAX 表达式来定义计算度量。

![在此处输入图像描述](../Images/c5617aaf275a7cc6870dbb4b83cb8b82.png)

完成后，将 PowerPivot 工作回复上传回 SharePoint，当您连接到它并尝试将其用作其他工作簿中的数据源时，您应该会看到这些措施。

# google-apps-script - 有没有办法更新谷歌网站上的谷歌脚本应用程序以保持多个用户的输入同步，而无需每次点击刷新按钮？

> ID：10642097
> 
> 赞同：1
> 
> 时间：2012-05-17T19:15:04.697
> 
> 标签：google-apps-script, google-sites

我在 Google 站点页面上的 Google 脚本应用程序的 UI 中有复选框，并且希望查看同一 Google 站点页面的其他用户的复选框在其中一个用户单击它时也被选中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:53:21.640

不，这是不可能的。至少，不是我们想要的方式。

您可以应用一些“讨厌的”解决方法。例如响应您的应用程序内的鼠标移动。但这存在当用户移动鼠标时会产生夸大事件的问题，如果他移出脚本窗口或者他更像是键盘用户，则根本没有任何事件。

此外，您可以将多个处理程序添加到同一个按钮，其中每个处理程序具有不同的睡眠时间，因此稍后更新 GUI。但这有一个脚本执行可能持续的最长时间（5 分钟）的限制。在“最后一个”处理程序上，您可以通知您的用户他必须再次单击才能开始另一轮 5 分钟的更新。

无论哪种方式，两种解决方法都包括手动检查值是否在某处（例如电子表格单元格）发生了变化。它不是“事件触发的”，因此会非常“计算机密集型”，这很可能会使您的脚本达到各种[配额](https://docs.google.com/macros/dashboard)中的一个或多个。

[如果这很重要，您应该在 Apps 脚本问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中打开“增强请求”并说明您的使用情况。

# c# - C# 标签在 GroupBox 中不可见

> ID：10642102
> 
> 赞同：1
> 
> 时间：2012-05-17T19:15:40.090
> 
> 标签：c#, .net, winforms

我有一个应该通过 DataTable 的循环，并为每一行创建一个新的 GroupBox，将其文本设置为一列中的值，在该 GroupBox 中，我想在表中放置一个带有文本的标签，类似于另一列。这只是代码的一部分！

```
for (int i = 0; i < tab.Rows.Count; i++)
{
    lblbox[i] = new GroupBox();
    lblbox[i].Text = tab.Rows[i]["text"].ToString();
    lblbox[i].Name = "box no " + i.ToString();
    lblbox[i].Visible = true;        
    this.Controls.Add(lblbox[i]);
    lblbox[i].Location = new Point(5, 55 * i);
    lblbox[i].Height = 50;
    lblbox[i].SendToBack();
    importancelbl[i] = new Label();
    importancelbl[i].Text = "Importance: " + tab.Rows[i]["importance"].ToString();
    importancelbl[i].Name = "implbl" + i.ToString();
    importancelbl[i].Visible = true;
    lblbox[i].Controls.Add(importancelbl[i]);
    importancelbl[i].BringToFront();
    Point locP = new Point();
    locP.X = lblbox[i].Location.X + 5;
    locP.Y = lblbox[i].Location.Y + 15;
    importancelbl[i].Location = locP; 
```

}

当我运行代码时，它会正确创建三个（我的表中有三行）GroupBoxes 并创建所有标签，**但只有第一个标签**在其 Groupbox 中可见。当我将这些标签添加到表单而不是 GroupBox 时，它们都是可见的，但我希望它们在框中......我已经尝试了几乎所有东西，但我仍然很困惑（尤其是行为第一个标签）。我知道这个错误可能很明显而且很愚蠢，但我就是找不到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:21:15.630

[Control.Location](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)相对于其父级，因此将`Location`标签设置为 (5, 15)。

```
locP.X = 5;
locP.Y = 15; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:20:27.123

我的猜测是它们以某种方式重叠并以某种方式使彼此消失。

您可以尝试在表格有效和无效时发布表格的图片吗？还要添加所有代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:22:16.497

尝试添加

```
lblbox[i].Controls.Add(importancelbl[i]);
this.Controls.Add(lblbox[i]); 
```

设置完所有属性后

# ios - 定期从 SOAP 服务中提取数据的最佳方法？- 苹果手机

> ID：10642107
> 
> 赞同：0
> 
> 时间：2012-05-17T19:16:03.590
> 
> 标签：ios, web-services, soap

我有一个应用程序可以访问 SOAP Web 服务以下载它的一些数据。我的问题是我需要定期执行此操作。目前，用户按下“更新”按钮以下载数据，但我希望无需用户按下按钮即可完成。

在这种情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:31:31.470

只要您的下载已经设置好，您似乎只需要使用`NSTimer`. 例如，如果您希望它每 30 秒触发一次下载，您可以输入以下代码：

```
[NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(doDownload:) userInfo:nil repeats:YES]; 
```

你会有一个像

```
-(void) doDownload:(NSTimer*) timer 
```

如果你完成了下载，在`doDownload`函数中，你会调用

```
[timer invalidate]; 
```

关闭计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:30:05.343

**您可能需要澄清我需要定期执行此**操作是什么意思。您的应用程序需要多长时间更新一次（例如，您是否需要每秒、每分钟、每小时更新一次……）。或者当有可用更新时，它不是周期性的并且由服务器驱动。

如果您认为更新数据的决定是在服务器端实现的（例如，某些内容可能已经更新并且服务器现在需要更新客户端），请考虑使用 Apple 的推送通知系统。另一方面，如果所需的更新只是周期性的，请考虑数据更新频率和设备带宽/电池之间的最佳折衷并继续努力。

# algorithm - Programming Pearls，第 2 版中关于二分搜索的问题

> ID：10642108
> 
> 赞同：2
> 
> 时间：2012-05-17T19:16:03.847
> 
> 标签：algorithm

我正在阅读 Jon Bentley 的 Programming Pearls，第 2 版的第 9.3 节。

在第 94 页，Jon 给出了改进的二分搜索算法的实现，利用 n 为 1000 的事实（搜索 1000 个数字以找到目标）。

在程序的最后，它是：

```
if p > 1000 || x[p] != t
    p = -1 
```

我的问题是，如果 p 正好是 1000 怎么办？似乎当 p 为 1000 时，它也应该出错，例如：

```
if p >= 1000 || x[p] != t
    p = -1 
```

无论如何，这部分代码是从第 93 页上的代码翻译过来的，最后：

```
if p >= n || x[p] != t
    p = -1 
```

我的理解正确吗？我只是想知道这是否是一个错字，或者真的没有必要在条件中包含案例 p 是 1000 。

另一个问题是，在第 94 页自下而上的第 5~6 行中，它说：当第一次测试失败并且 l 保持为零时，程序按顺序计算 p 的位，最高有效位在前。

这里是什么意思？当第一次测试失败时，我不应该是-1，而不是0吗？

任何人都可以详细说明这个说法吗？

PS 我找不到 Jon 的电子邮件地址，否则，我会把这些问题发给他。:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:03:48.183

这是错字。l 的最大值是 999 (1000 - 512 + 256 + .. + 1, )，所以 p = l+1 的最大值是 1000。对于 binsearch 的硬编码版本（清单 9.8）很清楚。

我们可以在这里看到真正的 C 代码（不是伪代码）[（Alg.4）](http://netlib.bell-labs.com/cm/cs/pearls/search.c)，**如果 (p >= n ||**

# javascript - 在页面加载时使用 onclick 或连接点击处理程序更好吗

> ID：10642113
> 
> 赞同：1
> 
> 时间：2012-05-17T19:16:28.907
> 
> 标签：javascript

假设我有这样的标记：

```
<form action="foo">
    <input name="bar" />
    <button type="button">Save</button>
</form>

<script>
    function baz() {
        // Submit form via AJAX
    }
</script> 
```

将其添加到以下内容是否更好`<button>`：

```
onclick="baz()" 
```

或将其添加到`<script>`（假设 jQuery）：

```
$(function(){
    $('button').on('click', baz);
}); 
```

我已经看到很多关于禁止内联 javascript 的最佳实践的争论，我倾向于同意。但是我想知道文档加载/准备好的手动接线是否会混淆正在发生的事情，因为它会删除使用 onclick="baz" 时存在的所述接线的上下文。

无论哪种方式都存在可维护性问题吗？这两种方法的其他优点/缺点？我的核心问题是业界对使用内联 javascript 的这一特定方面的共识是什么（鉴于一般来说这不是一个好的编码实践）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:20:41.683

第二种方式被认为更好

```
$(function(){
    $('button').on('click', baz);
}); 
```

它被称为[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，您可以在其中将功能/行为与页面结构分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:38:30.073

作为一名专业开发人员，我完全不相信第二种方法完全可以将 javascript 从页面结构中分离出来。它们在功能上是等效的，并且添加不必要的抽象层只会混淆问题。

功能等效：

*   他们都对要附加的javascript做出假设。
    *   前者假定存在 baz()
    *   后者假定存在 $('button').on('click', baz);
*   如果没有说 javascript，它们也不会做任何事情——它们完全被破坏了。

更重要的是，他们每个人都有自己的问题。我支持内联 javascript，有几个原因：

*   以可读方式传入参数 [onClick="baz(this)"] 的能力允许您生成更多可变代码，而不会出现 javascript 带来的所有一般不可读性。
*   可维护性飙升。我所要做的就是在我的脚本中找到“function baz(”，并且我已经开始调试，而不是前者，它可以通过任何选择项目的方法附加——IDS 可能出现在你的代码、类中和其他 CSS 选择器。
*   我相信服务器端确实应该做尽可能多的工作。在您的服务器上进行升级和错误测试很容易。很难想象您*的*客户可能拥有的每个可能的测试用例。你的计算机做的工作越多，你对功能执行的控制就越多。
*   它使人们免于动态生成 JS 的可怕诱惑。

# iphone - 适用于 iOS 设备的精灵

> ID：10642115
> 
> 赞同：2
> 
> 时间：2012-05-17T19:16:30.163
> 
> 标签：iphone, objective-c, ios

我正在尝试为我计划制作的下一款游戏做一些研究，只是想知道是否有人可以给我一点方向。

我想使用精灵来显示动画、人物行走等，所以我的问题是这样的。什么游戏引擎处理精灵最好？

每秒可以显示多少个精灵？假设我有一个角色行走并希望它看起来很流畅，我能获得 60fps 吗？还是那样高？

最后一个问题..对不起！如果一个精灵有更多的颜色和复杂性，但文件大小与更简单的文件大小相同，是否需要更多的处理能力来显示复杂的文件？

谢谢！詹姆士。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:27:32.000

我强烈推荐[cocos2d](http://www.cocos2d-iphone.org/)用于精灵动画。如果您已经了解objective-c，则很容易上手。它非常适合使用精灵。动画非常流畅，当您在 iOS 模拟器中测试应用程序时，它会在左下角告诉您每秒帧数。每秒帧数通常在 60 左右。关于精灵文件大小，我相信如果两个精灵之间的文件大小相同，那么它们需要相同数量的处理能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:24:21.097

用于精灵、声音和其他事物的[Sparrow 引擎](http://gamua.com/sparrow/)是一个很好的引擎，因为它很简单。没有理由不能获得 60fps。至于你的最后一个问题，这不会有什么不同。

# android - WebView 应用打开 YouTube 应用？

> ID：10642118
> 
> 赞同：0
> 
> 时间：2012-05-17T19:16:46.333
> 
> 标签：android, webview, youtube

我有一个 Android WebView 应用程序，其中嵌入了 YouTube 视频。我已经到处寻找答案，但找不到。当他们查看我网站上的视频时，有没有办法让 YouTube 应用程序打开？是的，我知道有些人没有 YouTube 应用，但这是一个适用于小镇当地卡丁车赛道的应用，所以每当有人遇到问题时，我都可以提供指导。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:31:15.197

这仅仅是因为您已将其设置为 user 。

转到 Settings and Applications ，然后在浏览器的设置中单击 clear-Defaults 按钮，它现在应该会询问您如何打开视频链接。

然而，如果你想让应用不听用户的设置，你也可以这样做，使用“ [setComponent](http://developer.android.com/reference/android/content/Intent.html#setComponent%28android.content.ComponentName%29) ”。

您还可以通过以下方式了解如何打开应用程序的主要活动：

```
getPackageManager().getLaunchIntentForPackage(...); 
```

# jquery - jQuery：无法访问对象的某些键

> ID：10642124
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:07.873
> 
> 标签：jquery, object, each

使用 jQuery，我已将一些数据加载到由`var tmp={}`.

数据将以某种方式显示`console.dir(tmp)`，但我无法通过直接访问它来获取某些值（例如`tmp.val`）！

我存储数据的对象`tmp`在以下示例中被调用。不幸的是，我无法展示如何收集数据的完整代码，因为它太多了。我能呈现的是输出。

```
console.log(tmp)

$.each(tmp,function(key,val){
    console.log(key);
}); 
```

第一行将显示：

```
Object
  class: "modul7"
  class_name: "Some kind of class name."
  collectionRelevant: 1 
```

第二个代码将显示：

```
class
class_name 
```

`collectionRelevant`失踪了。

我知道我的问题很模糊。

有没有人偶然发现这样的事情？我不知道在哪个方向寻找错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:28:56.993

我认为本机 JavaScript 应该足以完成这项任务。

```
for( var key in tmp ) {
  // key
  console.log(key);
  // value
  console.log(tmp[key]);
}​​​​​ ​ 
```

# search - 推特。在 home_timeline 中获取旧推文

> ID：10642126
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:12.073
> 
> 标签：search, twitter

请任何人帮助我...我如何按日期访问 home_timeline 中的推文？不是按id，而是按日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:22:43.027

Twitter 的 ID 算法基于 Snowflake，其中前 41 位为时间戳。您应该能够反转 Snowflake 算法并找到一些 ID 用作搜索条件。

[https://github.com/twitter/snowflake](https://github.com/twitter/snowflake)

请注意，Twitter 根本不会为您提供旧的`home_timeline`回复。你不能回到一年，甚至可能不会超过几天。

# mathjax - MathJAX 未显示在网页上

> ID：10642128
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:20.337
> 
> 标签：mathjax

我正在尝试在我的网页上启用 MathJax，但它不起作用。

我首先尝试了一个简单的空 HTML 页面，如下所示：

```
 <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <div style="offsetWidth: 720; offsetHeight: 54; width: 714px; height: 48px; position: static; top: auto; right: auto; bottom: auto; left: auto; margin-top: 0px; margin-right: 0px; margin-bottom: 6px; margin-left: 0px; color: #000000; display: block; visibility: visible">
    <p>
    </p><p>When $a \ne 0$, there are two solutions to \(ax^2 + bx + c = 0\) and they are<br>$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$</p>
    <p></p>
</div> 
```

以上显示正常。

但是当我在网页上加入相同的内容时，其中还有其他元素和一些 CSS，然后我得到一个“错误准备 HTML-CSS 输出（预处理）”并且公式被 [MathProcessingError] 替换。

我不知道要为这个问题提供什么更多信息。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T16:28:19.040

我今天遇到了一个类似的问题，我在消息日志中收到“错误准备 HTML-CSS 输出（预处理）”。我发现我有一个名为“Error”的全局 javascript 函数正在捕获来自 MathJax 的“restart”消息。

删除全局错误函数允许 MathJax 无错误地呈现我的标签。

# python - python“with”命令和csv阅读器

> ID：10642129
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:29.063
> 
> 标签：python, csv

我有 csv 读者和作家。我了解您必须打开和关闭底层对象。一种方法是首先创建文件对象 f，使用 csv 阅读器，然后使用 f.close()。

但是，我似乎无法执行以下操作：

```
with open(outputpath) as f_outputfile:

    outputfile = csv.writer(f_outputfile)

OTHER CODE HERE 
```

我想做的是一次打开一堆阅读器和一堆作者，然后让它们都自动关闭。但是，这是否意味着我有一个嵌套的“With”块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:27:04.193

写作：

```
with open(outputpath) as f_outputfile:
    outputfile = csv.writer(f_outputfile)

OTHER CODE HERE 
```

本质上是一样的：

```
f_outputfile = open(outputpath)
try:
    outputfile = csv.writer(f_outputfile)
finally:
    f_outputfile.close() 

OTHER CODE HERE 
```

如果`OTHER CODE HERE`依赖于打开的文件，它将无法正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T19:24:31.863

[您可以在with 语句](http://docs.python.org/reference/compound_stmts.html#index-15)中堆叠多个项目，如下所示（看起来这是 2.7.x 及更高版本的功能）：

```
with open(foo) as f_foo, open(bar) as f_bar:
    # do something 
```

> 7.5。with 语句
> 
> 2.5 版中的新功能。
> 
> with 语句用于使用上下文管理器定义的方法包装块的执行（请参阅 With Statement Context Managers 部分）。这允许封装常见的 try...except...finally 使用模式以方便重用。

```
with_stmt ::=  "with" with_item ("," with_item)* ":" suite
with_item ::=  expression ["as" target] 
```

# regex - 正则表达式全名验证

> ID：10642133
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:38.917
> 
> 标签：regex, validation, nspredicate

是否有一个定义明确且完整的正则表达式字符串示例，可以验证全名。

我希望字符串能够验证大多数名称，例如：

*   堆栈溢出
*   约翰 P. 示例
*   马丁路德金
*   和各种外国信件（如果可能的话）

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:30:05.137

这是无法做到的，因为没有数据集就无法确定字符串是单词还是名称。您可以做的最好的事情是匹配**可能是**名称的字符串，然后根据数据集检查这些阳性结果以进行确认。

# css - CSS 下拉菜单在 IE7 的 DIV 中不可见

> ID：10642136
> 
> 赞同：0
> 
> 时间：2012-05-17T19:17:50.063
> 
> 标签：css

这是显示问题的链接：[http](http://www.ukrainetraveling.com) ://www.ukrainetraveling.com 。

CSS 下拉子菜单不可见。我在所有的 div 中都将 z-index 设置为“1”，将“200”用于有菜单的 div，但没有结果。在 chrome 中，它按预期工作。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:36:15.600

众所周知，IE7 在使用`position`和时会出现堆叠元素的问题`z-index`。你需要做的就是一步步告诉浏览器他应该做什么。

**试试这个：**

```
// menu
ul.pureCssMenu {
  position: relative;
} 
```

**如果还不够，您可以：**

```
// parent of .pureCssMenu
div {
  position: relative;
} 
```

* * *

**注意：** 您的菜单在 IE8 或 IE9 上也不起作用。

* * *

# 已编辑

请注意，您的文档不包含[DOCTYPE](http://www.w3.org/QA/Tips/Doctype)，请参阅[此链接](http://www.w3.org/QA/2002/04/valid-dtd-list.html)以设置适当的文档类型。

这是一个重要的因素，因为任何浏览器都需要知道你是如何编写代码的，而 DOCTYPE 就是这样做的，它告诉浏览器“*我是这样写的，所以请使用这组特定的规则来告诉我*”。

与 IE6、7、8、9 等相关......它进入了他们所谓的“*兼容模式*”，这与使用 IE5 标准（已过时）相同。有关更多信息，请参阅[此链接](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)。

# java - HQL查询麻烦

> ID：10642140
> 
> 赞同：3
> 
> 时间：2012-05-17T19:18:00.603
> 
> 标签：java, hibernate, hql

我有一个 java 应用程序，有 2 个对象：User.java 和 Review.java。

每个用户可以有许多评论。

Review 对象上有一个 User 对象（例如：review.getUser()）

我需要一个 hql 查询来获取所有没有评论的用户。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:02:30.253

尝试

```
from User u where u.reviews is empty 
```

假设您的 User 类有一系列评论，当然......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:28:12.270

```
from User u where not exists (from Review r where r.user = u) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:22:35.013

我不知道你的表和这些表中的列，但无论如何你应该有如下查询：

```
select *
from User 
where not exists (select Review where Review.userId = User.id ) 
```

# orchardcms - 在 Orchard CMS 中，即使在生产服务器上，图像的路径也会更改为 localhost

> ID：10642143
> 
> 赞同：1
> 
> 时间：2012-05-17T19:18:10.857
> 
> 标签：orchardcms

## 问题

我使用内置工具上传了一张图片并将其添加到博客文章中。所有这些都在生产服务器上，横跨美国蒙大拿州的池塘。

它在博客文章的预览中显示良好（使用正确的绝对路径：“/Media/Default/BlogPost/...”）。但是一旦我发布它，我会在实时站点中看到一个损坏的图像。原因是路径呈现为：

http://localhost:[端口号]/Media/Default/BlogPost/...

显然，如果在开发机器上运行，这仍然可以工作，但是一旦在实时 Web 服务器上，这将不再工作。

## 历史

我将 WebMatrix 下载到我的机器上，下载了 orchard，安装了 Minty 主题，制作了一个使用 Minty 作为 BaseTheme 的新主题。然后，一旦一切就绪，上传到实时网络服务器。

我看不出这会如何影响服务器解释绝对路径的方式，但也许我遗漏了什么？

## 捏造的解决方案

我可以通过使用站点的 URL 来伪造解决方案，即我打开图像选择器并在我放置的图像资源文本框的 URL 中：

[http://blogs.mysite.co.uk/Media/Default/BlogPost/](http://blogs.mysite.co.uk/Media/Default/BlogPost/) ...

有了这个完整的 URL，问题就消失了，但这是一个软糖，我不需要这样做。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:41:34.753

Orchard 讨论页面中的@gelistir 回答了这个问题。

它是由 Vanderlay 相对 URL 过滤器模块引起的。禁用模块（我没有使用过，甚至不确定它做了什么......）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T10:43:39.337

不管这值多少钱，自提出问题以来已经过去了 2 年多。无论如何，如果此处描述的问题发生在您身上，请在仪表板上进入“设置”并在“常规”下，将您的基本 URL 设置为“ [http://www.yourdomain.com](http://www.yourdomain.com) ”，而不是“ [http://localhost ” [端口号]](http://localhost[portnumber]) “。这是 Vanderlay 模块获取要重写的 url 的地方。

问候，

# php - PHP - 如何生成带有控制字符或二进制数据的字符串？

> ID：10642153
> 
> 赞同：2
> 
> 时间：2012-05-17T19:18:58.917
> 
> 标签：php, string, unit-testing

出于测试目的，我需要字符串，例如：

```
"test\x00string" 
```

我想循环控制字符（00-1F）并自动生成字符串，这样我就不必像这样用 31 行代码弄乱我的代码，但不知道如何在 php.ini 中实现这一点。

另外为了测试格式错误的 utf，我可能想将其他字节序列插入字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:37:15.793

对于某些字符，有[预定义的转义序列](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)，可以在双引号中使用：

```
$nullByte = "\0"; 
```

但是，如果您要循环，最好的选择是[`chr()`](http://www.php.net/manual/en/function.chr.php)：

```
$string = '';

foreach (range( 0x00, 0x1F ) as $i)
{
    $string .= chr($i);
} 
```

作为单线：

```
$string = implode('', array_map('chr', range(0x00, 0x1F))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:21:24.203

```
$nullByte = chr(0); 
```

您可以仅连接字节以制作多字节字符串。

# javascript - 此代码是否需要在 document.ready 中？

> ID：10642156
> 
> 赞同：32
> 
> 时间：2012-05-17T19:19:15.407
> 
> 标签：javascript, jquery

用于在`document.ready`DOM 完全加载后执行代码。这可用于将事件处理程序附加到页面上的元素，例如

```
$(function(){ 
    $('#somediv').click(function(){ 

    }); 
}) 

<div id="somediv"> </div> 
```

在内部，jQuery 连接[`DOMContentLoaded`](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)并`window.onload`作为后备。~~在 IE 的情况下[，尝试一遍又一遍地滚动视口，直到成功](https://github.com/jquery/jquery/blob/master/src/core.js#L869)~~。

我有几个问题，我的第一个问题是，当将事件处理程序绑定到`document`自身时，是否有必要将该代码放入`document.ready`? 我一直在编写下面的代码而不将其包装在`document.ready`

```
$(document).keydown(function(e){
    if (e.which == 39) { 
       alert( "right arrow pressed" );
       return false;
    }
}); 
```

如您所见，它[有效](http://jsfiddle.net/dPBTZ/4/)。我的理解是，由于此代码不与文档中的任何元素挂钩，而是与文档本身挂钩，因此无需将其包装在`document.ready`处理程序中。我不包装它的另一个原因是因为我曾经在 vanilla javascript 中做同样的事情，相当于下面的代码，它也可以[工作](http://jsfiddle.net/dPBTZ/5/)。

```
document.onkeydown = function(){
var keyCode = event.keyCode || event.which;   
    if (keyCode == 39) { 
       alert( "right arrow pressed" );
       return false;
    }
} 
```

我看过很多帖子，人们将它包装在一个`document.ready`中，不包装此代码有什么缺点`document.ready`吗？

另外我认为这个问题源于我不清楚在构建 DOM 期间会发生什么，所以如果有人可以解释在 DOM 准备好之前的这段时间会发生什么。对我来说，当 html 被解析并转换为 DOM 树时， 文档就*准备好了，或者还有更多内容吗？*

总之，这是我的问题

1.  将事件处理程序绑定到`document`自身时，是否有必要将该代码放在`document.ready`.
2.  不将代码包装在 中是否有任何缺点`document.ready`？
3.  `document.ready`在构造文档时，在触发 之前，会发生什么事件序列？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-17T19:22:11.230

如果您要绑定到文档本身，则无需等到它准备好。在这种情况下，不将其包装在 document.ready 中应该没有任何缺点。

当浏览器触发 DOMReady 事件时，或者对于不支持 DOMReady 事件的浏览器版本的特定测试成功时，document.ready 会被触发。

**附加信息。** *（2012 年 5 月 22 日）*

大多数现代浏览器都实现了[DOMContentLoaded](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)事件，该事件在文档上定义的所有元素都准备好被 javascript 操作时触发。其他浏览器要么依赖 setTimeout 循环来不断检查文档的就绪状态，要么直接绑定到文档的 onreadystatechanged 方法（取自[jquery core](http://code.jquery.com/jquery-latest.js)）。在执行 javascript 之前，文档本身已准备好进行操作，因此直接绑定到文档时无需等待。

这里唯一的问题是，如果代码与文档以外的元素交互，则有可能在这些元素存在之前在文档上触发事件。这不太可能发生，但它可能发生。`$(document).ready()`如果您的代码可能会发生这种情况，那么将其放置在其中以防止这种情况是有意义的。您的样品不保证放在`$(document).ready()`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T19:22:47.353

的重点`$(document).ready`是在整个文档被解析之后执行代码。

仅当您想使用尚不存在的元素时才需要使用它。
（例如，如果您的脚本在 中`<head>`）

如果您正在使用的元素已经存在（因为它们是全局的，或者因为您`<script>`在它们之下），那么您就不需要它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T19:21:42.117

不将事件绑定到`document.ready`块中的文档的唯一缺点是可以在所有页面内容加载之前触发事件，这可能不是您想要的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T12:36:07.457

> 此事件在 DOM 层次结构完全构建时触发，即所有资产~~比如图片~~已完全收到。

您询问：

*   将事件处理程序绑定到文档本身时，是否有必要将该代码放入 document.ready 中？
    *   **回答**：没有。`document.ready()`在使用依赖 CSS 样式属性值的代码时，在引用代码所在的脚本之前或在块之前引用外部样式表或嵌入样式元素非常重要。

* * *

*   不将代码包装在 document.ready 中是否有任何缺点？
    *   **回答**：不。但是当您必须使用 JavaScript 在文档中创建元素时，应该等到您的 DOM 准备好。为此，您应该将代码放在`document.ready()`块中。

* * *

*   在构造文档时，在 document.ready 被触发之前，会发生什么事件序列？
    *   **答案**：在 document.ready 被触发之前，`DOMContentLoaded`已经被浏览器触发了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T19:26:59.850

当对元素使用操作或调用它们（将在 DOM 中生成或尚不存在）时，您需要使用`$(document).ready`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T19:40:23.927

除了答案之外：您可以仅使用 jquery *live*功能（而不是 keydown 等）来摆脱“必须完成 DOM 元素”的情况。

所以下一个必须正常工作：

```
$( "#somediv" ).live( 'keydown', function(){ ... } ); 
```

在这种情况下，jQuery 会在可能的情况下绑定事件。将所有绑定放在一个（*就绪*）函数中并不费力，您的绑定可以放置在 HTML 页面或 Javascript 文件的独立部分中。

*因此，结果答案是：不，当您使用上述函数*时，您不需要将代码放在 document.ready中。

**更新**

在**jQuery** (>= 1.7) 的最后一个版本中，使用[on()](http://api.jquery.com/on/)函数而不是[live()](http://api.jquery.com/live/)因为最后一个已被贬低。因此，没有必要将事件绑定放入 ready()。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-24T15:12:56.820

**1\. 将事件处理程序绑定到文档本身时，是否有必要将该代码放入 document.ready 中？**

不。事实上，JQ 中用于绑定的“on”方法可以委托给文档，因此您可以在任何时候安全地在任何元素上使用这些方法，只要在容器元素上使用 stopPropagation 不会停止很多冒泡。

**2\. 不将代码包装在 document.ready 中是否有任何缺点？**

只有头部中的脚本可能会尝试访问尚不存在的 HTML。相反，HTML 可能在文档准备好之前就已经准备好并从用户那里获取事件。请参阅“on”方法或谷歌“事件委托”，以便在涉及事件的地方吃蛋糕和吃蛋糕（警告是愚蠢地使用 stopPropagation 的库）。document.ready 主要只是一种确定您的代码在 HTML 准备好被击中时触发的方法。除非（也许）您正在用某些东西击中 body 本身，否则位于 body 标签底部的代码没有必要。

**3\. 在构造文档时，在触发 document.ready 之前，会发生什么事件序列？**

在 document ready 被触发时，所有标签都已被解析并且布局尺寸已被确定。图像不需要完全加载，我只是猜测，但我怀疑影响 CSS 的非布局可能在某些浏览器中尚未生效。当 HTML 解析器读取并执行元素的结束标记时，该元素被视为“就绪”。脚本标签中的 JS 必须由解释器处理，然后才能继续进行 HTML 解析，这就是为什么我们现在倾向于将代码放在文档底部的原因，以加快感知加载时间。

# html - 带有 `float:left` 的框在下方而不是向左移动到下一个可用位置

> ID：10642159
> 
> 赞同：1
> 
> 时间：2012-05-17T19:19:29.870
> 
> 标签：html, css, css-float

[这](http://jsfiddle.net/bDUnW/)似乎应该很容易，但我无法让它工作：/所有元素的总宽度小于 100%，那么为什么它们不能很好地彼此相邻呢？

**编辑**对不起，如果我不清楚。为什么第 3 个蓝色`.square`在下方并停留在右侧 - 而不是被推回左侧到第 1 个蓝色下方`.square`？

任何帮助将不胜感激！

```
<div class="outer">
    <div class="square"></div>

    <div class="bigsquare"></div>

    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
</div>

.outer {position:absolute;width:80%;left:10%;height:100%;border:solid black 2px;
}
.square {
    height: 16%;width: 19%;border-radius: 0px;border:solid 1px #262626;float: left;margin:0px;overflow: hidden;position: relative;padding:0px;background-color:blue;
}

.bigsquare { height: 50%;    width: 57%;border-radius: 6px;background-color:green;border:solid 0px #262626;float: left;    overflow: hidden;position: relative;
    padding:0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:24:56.093

更新：

“Float: left” 不会使它们成为左边距的元素，它们会尽可能地向左移动，直到遇到另一个元素来阻止它们。在这种情况下，蓝色 div 向左浮动，直到遇到绿色 div。

您可以使用绝对定位或排列为 3 个“列”： left col with blue div; 带有蓝色 div、绿色 div、蓝色 div 的中间 col；最后一个带有蓝色 div 的 col

更新 2：

也许如果您将它们视为构建块，它可能会有所帮助。蓝绿蓝适合顶行。下一个蓝色没有，所以它向下移动。它试图越过左边距，但绿色块挡住了它，它不能*穿过*绿色块。那有意义吗？

# java - this.getClass().getPackage() 在 Tapestry 中返回 null？

> ID：10642171
> 
> 赞同：1
> 
> 时间：2012-05-17T19:20:09.627
> 
> 标签：java, class, maven, null, tapestry

我在 Maven 中使用 Tapestry 5.3 框架。我有这个用例，我正在添加一些基于包的配置。那里有抽象的 BasePage，以及继承它的各种包中的其他页面。

```
public abstract class BaseTypePage {

    public String getPackage() {
        return this.getClass().getPackage().getName();
    }
}

public class Index extends BaseTypePage {} 
```

当我导航到该索引页面时，我得到 NullPointerException，其中 getPackage() 返回 null。

当简单地将方法从摘要移动到索引页面时，它可以工作，但只有在第二次加载之后。

我想这种情况可能是 ClassLoader 没有收集有关给定类的所有信息。但是我该如何解决呢？

# asp.net-mvc - Asp.net mvc html.raw 无法解析

> ID：10642176
> 
> 赞同：0
> 
> 时间：2012-05-17T19:20:42.650
> 
> 标签：asp.net-mvc

```
@Html.Raw(HttpUtility.HtmlDecode(Model.Id.ToString())) 
```

始终在“EditorTemplates”文件夹下的 Index.cshtml 文件中返回 0

我做错了什么吗

我在页面顶部定义的模型为

```
@model [Namespace].ViewModel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:27:44.263

如果 id 是数字，则根本没有理由使用`Html.Raw`。值中没有应避免正常 HTML 编码的 HTML 代码。

只需使用：

```
@Model.Id 
```

该值将隐式转换为字符串，因此`ToString`也不需要调用。

如果它没有显示预期值，你就知道它一开始就不存在。

# android - 7“和10”平板电脑的值文件夹中的dimens.xml，如何？

> ID：10642179
> 
> 赞同：6
> 
> 时间：2012-05-17T19:20:53.477
> 
> 标签：android, xml, resources, dimensions

我尝试过：

```
values-mpdi, values-land-mpdi, values-hpdi and values-land-hdpi 
```

这在手机屏幕上运行良好，问题是 7" 平板电脑可能会从 values-mdpi 和 10" 平板电脑中获取值，但结果不一样，我猜是因为屏幕尺寸（虽然是相同的分辨率和相似的密度）所以我尝试了：

```
values-sw600dp-hdpi
values-sw600dp-port-hdpi
values-sw600dp-mdpi
values-sw600dp-port-mdpi
values-sw720dp-hdpi
values-sw720dp-port-hdpi
values-sw720dp-mdpi
values-sw720dp-port-mdpi 
```

但应用程序崩溃，因为它没有找到所需的资源......

任何帮助都感激不尽

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-25T06:21:34.290

基本上存在三个主要的设备类别，Android 应用程序需要支持：

1.  听筒（电话）
2.  小片剂（7“类别）
3.  大片剂（10 英寸及以上）。

**Android 3.2 之前的限定符：**

Google在创建**限定符以按设备分隔资源的****第一次**尝试是创建几个大小的存储桶：**small、normal、large、xlarge**。最初，这很成功，因为**手机**设备属于小型/普通类别，市场上的前**7 英寸平板电脑**很大，而前**10 英寸平板电脑**是超大的。

 ********Android 3.2 及以上版本的预选赛：**

然而，随着越来越多的设备开始以新的屏幕尺寸出现在市场上，并且设备可能出现在哪里的界限开始变得模糊。**Android 3.2 中提出了针对该问题的新解决方案，以****新限定符**的形式根据设备当前的宽度/高度或**“最小”宽度**选择资源；后者是设备尺寸的新名称，它以屏幕最短边的宽度（以与密度无关的像素或 dp 为单位）来表示。

使用新范式，将小型平板电脑定义为最小宽度为 600dp 和大型平板电脑为 720dp 已变得很普遍，而手机则是低于该线的所有东西。

**在最低支持低于 3.2 且目标高于或等于 3.2 时使用限定符 对于至少** 以 Android 3.2 或更高版本为目标的应用程序，此新系统运行良好。但是，如果开发人员希望创建在手机和平​​板电脑上运行的通用应用程序，则必须支持不高于 2.2 或最多 2.3 的最低 Android 版本，那么在这种情况下，在具有旧大小的目录中创建每个资源的副本限定符并将其放置在另一个具有相应最小宽度限定符的目录中。

例如，在和中保存相同的`dimens.xml`文件。因此，在低于 3.2 的 android 版本上运行的设备将从中获取值，在高于或等于 3.2 的 android 版本上运行的设备将从`values-large``values-sw600dp``values-large``values-sw600dp`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T07:59:19.890

//您需要在 API 级别 3.2 及更高版本中运行它。

对于 <3.2，您需要声明正常的 values-large 和 values-xlarge******

# spring - 没有 AspectJ getter/setter -- 将 Roo 从 1.1.5 升级到 1.2.1

> ID：10642182
> 
> 赞同：0
> 
> 时间：2012-05-17T19:21:05.210
> 
> 标签：spring, jpa, aspectj, spring-roo

我正在将当前项目从 Roo 1.1.5 升级到 1.2.1。

我注意到 Roo 1.2.1 中有一些新功能可以促进 JPA 功能，即 @RooEntity 到 @RooJpaActiveRecord，但我认为当我在 STS 中打开 Roo shell 时，它可以自动处理转换......我仍然可以手动实现但是，在我更改注解名称后，无论我现在使用poll还是重新构建项目，由于没有AspectJ注入，所有getter/setter/finder/entityManager都报错了，实际上我可以看到aspectJ文件生成, STS 只是无法用实体 java 文件识别它们。突然间，整个项目分崩离析。

请在堆栈上的天才，让我知道如何解决这个问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:37:15.877

我想出了解决方案：

简单地说：确保将项目作为 Maven 项目运行。

方法：右键项目->配置->转换为Maven项目。然后运行右键单击项目 - > Maven - > 更新项目配置。

Maven 将使用切面注入再次构建项目。我认为问题是以前我的项目是在 Spring Tools -> Update Maven Dependencies 下编译的，如果 STS/AspectJ 工具停止工作，那么项目将遭受缺少方面注入的影响（仍然认为这可能是 STS 的剩余错误，这个问题可能非常具体，但 STS 仍然无法完成工作）。

对不起，我必须回答我自己的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:25:40.667

确保你清理了你的项目 eclipse 风格。那就是运行项目->清理。

# xml - 从一个 XML 文件中提取元素并将其填充到另一个 XML 文件中

> ID：10642183
> 
> 赞同：0
> 
> 时间：2012-05-17T19:21:05.733
> 
> 标签：xml, xslt, copy

在单个 XSLT 文件中是否有一种方法可以首先打开一个 XML 文件并提取一个带有子元素的元素，然后将该元素填充到第二个 XML 文件中？

如果不能在一个 XSLT 中完成，那么我选择的语言将是 vb 脚本。

我在这里看到了很多不同的例子，但我只是很困惑，不理解其中的大多数。

这是我用于从 XML1 中提取节点的 XSL：

```
 <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output 
      method="xml"
      omit-xml-declaration="yes" 
      indent="yes"
      encoding="ISO-8859-1"/>
    <xsl:template match="/">
    <xsl:copy-of select="root/Collection/Item/." />
    </xsl:template> 
    </xsl:stylesheet> 
```

我想获取生成的项目并将其附加到 XML2 中的相同 XPATH、根/集合中。

我有一个来自这个答案的 vb 脚本[How to save XML to a file](https://stackoverflow.com/questions/10628361/how-to-save-xml-to-a-file) (Thank you Andrew Cooper)，它将 XML 返回到 memvar。

XML1：

```
<root>
 <collection1>
  <item attr1, attr2...>  ---this is what I am getting
   <more>
   </more>
  </item>
 <collection1>
 <collection2>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection2>
 ...
 <collection_n>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection_n>
</root> 
```

XML2：

```
<root>
 <collection1>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
---- i want to insert node from XML1 here, only in collection1
 <collection1>
 <collection2>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection2>
 ...
 <collection_n>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection_n>
</root> 
```

所以新的 XML2：

```
<root>
 <collection1>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection1>
 <collection2>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection2>
 ...
 <collection_n>
  <item attr1, attr2...>
   <more>
   </more>
  </item>
 <collection_n>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:05:12.090

您将使用该`document()`函数加载外部文档，以便将它们与您正在运行转换的文档合并。`xsl:param`或者，如果您在调用 XSLT 时将它们作为内存中的 DOM 树，则可以将它们作为节点集提供给模板参数 ( )。

看看我一周前回答的[**这个问题。**](https://stackoverflow.com/questions/10477524/how-to-concatenate-two-or-more-xml-files-using-xslt-and-maintain-the-order)这正是关于如何从多个文档中合并位于同一合并点（认为相同的 XPath）的内容。

希望能帮助到你。如果没有，请询​​问更具体的问题，包括哪些内容不清楚、您尝试过哪些内容以及哪些内容不适合您

# c# - 如果我创建了隐式类型转换运算符，我可以让 Raven DB 像字符串一样序列化对象吗？

> ID：10642184
> 
> 赞同：6
> 
> 时间：2012-05-17T19:21:08.593
> 
> 标签：c#, json, json.net, ravendb

我有一个看起来像这样的类：

```
public class MyClass
{
    string _value;

    public static implicit operator MyClass (string value)
    {
        return new MyClass(value);
    }

    MyClass(string value)
    {
        // Do something...
        _value = value;
    }

    public override string ToString()
    {
         // Do something...
         return _value;
    }
} 
```

因此，我可以像这样使用这个类：

```
MyClass a = "Hello!"; 
```

但在 Raven DB 中，它只会像这样存储

```
"SomeProperty": {} 
```

因为它没有公共属性。这是完全没用的。

为了解决这个问题，我将 _value 私有成员改为公共属性，如下所示：

```
public string Value { get; set; } 
```

Raven DB 将存储

```
"SomeProperty": { "Value": "Hello!" } 
```

它将是可反序列化的。

但我不想要这个公共财产。我可以以某种方式使 Raven DB 像字符串一样对类进行序列化和反序列化吗？像：

```
"SomeProperty": "Hello!" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T00:38:25.413

嗨，我知道这已经过时了，但我想我会在 Ayendes 的回复中添加一些内容，以帮助喜欢我的人遇到同样的问题并花费数小时在论坛上寻找答案（其中有一些但没有任何例子你可以跟随），这并不难弄清楚，但举个例子，我可以在 10 分钟内解决这个问题，而不是花几个小时。

我的问题是我们的应用程序中有自定义值类型结构，我将使用的示例是 EmailAddress。不幸的是，在 Ravendb 中，如果不定义自定义序列化程序，我们就无法对这些类型运行查询。

我们的值类型看起来像这样：

```
[DataContract(Namespace = DataContractNamespaces.ValueTypes)]
public struct EmailAddress : IEquatable<EmailAddress>
{
    private const char At = '@';

    public EmailAddress(string value) : this()
    {
        if (value == null)
        {
            throw new ArgumentNullException("value");
        }

        this.Value = value;
    }

    public bool IsWellFormed
    {
        get
        {
            return Regex.IsMatch(this.Value, @"\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*");
        }
    }

    public string Domain
    {
        get
        {
            return this.Value.Split(At)[1];
        }
    }

    [DataMember(Name = "Value")]
    private string Value { get; set; }

    public static bool operator ==(EmailAddress left, EmailAddress right)
    {
        return left.Equals(right);
    }

    public static bool operator !=(EmailAddress left, EmailAddress right)
    {
        return !left.Equals(right);
    }

    public override bool Equals(object obj)
    {
        if (obj == null)
        {
            return false;
        }

        return this.Equals(new EmailAddress(obj.ToString()));
    }

    public override int GetHashCode()
    {
        return this.Value.GetHashCode();
    }

    public override string ToString()
    {
        return this.Value;
    }

    public bool Equals(EmailAddress other)
    {
        return other != null && this.Value.Equals(other.ToString(), StringComparison.OrdinalIgnoreCase);
    }
} 
```

我们想要保存和查询的文档类型看起来像这样

```
public class Customer
{
    public Guid Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public EmailAddress Email { get; set; }
} 
```

自定义序列化器将我们的电子邮件存储为原始字符串，然后在检索时将其转换回其值类型，如下所示：

```
public class EmailConverterTest : JsonConverter
{

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(EmailAddress);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        EmailAddress actualAddress =  new EmailAddress(reader.Value.ToString());

        return actualAddress;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        EmailAddress actualAddress = (EmailAddress)value;
        string stringEmail = actualAddress.ToString();
        writer.WriteValue(stringEmail);
    }
} 
```

最后我把它连接起来，并且能够查询所有内容，如下所示：

```
 public static void serializercustom(Newtonsoft.Json.JsonSerializer serialiser)
    {
        serialiser.Converters.Add(new EmailConverterTest());
    }

    public static void TestCustomer()
    {
        using (var documentStore = new DefaultDocumentStore())
        {
            documentStore.ConnectionStringName = Properties.Settings.Default.SandBoxConnection;
            documentStore.Initialize();
            documentStore.Conventions.CustomizeJsonSerializer = new Action<Newtonsoft.Json.JsonSerializer>(serializercustom);

            var customer = new Customer
            {
                Id = Guid.NewGuid(),
                FirstName = "TestFirstName",
                LastName = "TestLastName",
                Email = new EmailAddress("testemail@gmail.com")
            };

            // Save and retrieve the data
            using (var session = documentStore.OpenSession())
            {
                session.Store(customer);
                session.SaveChanges();
            }

            using (var session = documentStore.OpenSession())
            {
                var addressToQuery = customer.Email;
                var result = session.Query<Customer>(typeof(CustomerEmailIndex).Name).Customize(p => p.WaitForNonStaleResults()).Where(p => p.Email == addressToQuery);

                Console.WriteLine("Number of Results {0}", result.Count()); // This always seems to return the matching document
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T07:33:05.533

您可以编写一个 JsonConverter 并教 RavenDB 如何存储数据。编写转换器后，将其注册到 store.Conventions.CustomizeSerializer 事件中。

# versioning - 发布基于 Web 的应用程序的最佳方法/工具/实践

> ID：10642185
> 
> 赞同：0
> 
> 时间：2012-05-17T19:21:13.750
> 
> 标签：versioning, release-management, software-release

所以我在 PHP/Zend Framework/SVN 上从头开始一个 web 项目，并希望以非常结构化的方式开始它。我知道所有关于 SVN 分支、开发分支、热修复分支等的知识（至少我认为我知道）。

我的问题是将来发布我的软件新版本的最佳方法是什么，而不是仅仅做一个`svn update`. 例如。将新版本部署到测试服务器以进行暂存，然后再发布到生产环境等。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:40:49.917

作为第 1 步，我不会使用为管理部署源代码版本控制而构建的工具，我会推荐一个可以为此目的管理/部署版本的工具：)

我是[BuildMaster](http://inedo.com/buildmaster)的支持分析师，该工具可以完全满足您的需求（如果您的团队 <= 5 人，它对您是免费的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:28:25.213

这实际上取决于您的基础架构的外观。如果您要部署到很多节点，我认为使用 BitTorrent 是一个不错的选择

# excel - 如何将单元格复制到最后一行并粘贴到另一个工作表？

> ID：10642192
> 
> 赞同：0
> 
> 时间：2012-05-17T19:21:26.607
> 
> 标签：excel, vba

我有一个 ActiveSheet 脚本，在其中获取原始数据将数据移动到 Q:V 行。我有一个运行并显示最后一行的 VBA 脚本，在这种情况下，最后一行是 77。

```
lastrow = .Cells(.Rows.Count, "Q").End(xlUp).Row 
```

我想将它放在从 Q 到 V 最后一行的位置，复制并将其粘贴到工作表 1 中...

我猜它看起来像这样，但我想先在这里验证......因为我去的正常站点由于某种原因而停机维护。

```
Sub test()
         Dim wsPOD As Worksheet
    Dim wsPOT As Worksheet
    Dim wsPOA As Worksheet
    Dim cel As Range
    Dim lastrow As Long, i As Long, Er As Long

    Set wsPOD = Sheets("PO Data")
    Set wsPOT = Sheets("PO Tracking")
    Set wsPOA = Sheets("PO Archive")

        With ActiveSheet
            .AutoFilterMode = False
            Intersect(.UsedRange, .Columns("A")).Cut .Range("Q1")
            Intersect(.UsedRange, .Columns("D")).Cut .Range("R1")
            Intersect(.UsedRange, .Columns("C")).Cut .Range("S1")
            Intersect(.UsedRange, .Columns("B")).Cut .Range("T1")
            Intersect(.UsedRange, .Columns("G")).Cut .Range("U1")
            Intersect(.UsedRange, .Columns("F")).Cut .Range("V1")
            lastrow = .Cells(.Rows.Count, "N").End(xlUp).Row
            Intersect (.UsedRange.Range("Q:V" & lastrow).Copy)
            Intersect (wsPOT.Range("B3:H" & lastrow).PasteSpecialxlPasteFormats)
         End With
End Sub 
```

这显然是行不通的，如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:53:32.370

这是你正在尝试的吗>

```
 With ActiveSheet
    .AutoFilterMode = False
    '
    '~~> Rest of the code
    '
    lastRow = .Range("N" & Rows.Count).End(xlUp).Row
    .Range("Q1:V" & lastRow).Copy
    wsPOT.Range("B3").PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
 End With 
```

`xlPasteFormats`只会粘贴格式而不是值。如果要粘贴值，请更改`xlPasteFormats`为`xlPasteValues`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:15:19.533

```
Option Explicit
Sub copylocation()
  Dim EC As Long
  Dim X As Long
  Dim Y As Long
  X = Range("B1").End(xlUp).Offset(1, 0).Row
  EC = Range("b1").End(xlToLeft).Offset(0, X).Column
  Windows("Book2").Activate
  Range("b1:AB" & EC).Select
  Selection.Copy
  Windows("Book1").Activate
  Range("b1").Select
  ActiveSheet.Paste
End Sub 
```

# c# - 在进度条中闪烁文本？

> ID：10642196
> 
> 赞同：0
> 
> 时间：2012-05-17T19:21:48.993
> 
> 标签：c#, progress-bar, visual-c#-express-2010

我做了一个很酷的进度条，中间有文字。这是我的代码：

```
private void timer2_Tick(object sender, EventArgs e)
{
    progressBar1.Increment(+1);
    int percent = progressBar1.Value;
    progressBar1
        .CreateGraphics()
        .DrawString(
            percent.ToString() + "%", 
            new Font("Arial", (float)8.25, FontStyle.Regular), 
            Brushes.Black, 
            new PointF(progressBar1.Width / 2 - 10, 
            progressBar1.Height / 2 - 7)
        );
    if (progressBar1.Value >= 99)
    {
        timer2.Stop();
        this.Close();
    }
} 
```

出于某种原因，文本出现然后消失和其他奇怪的东西。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:24:34.830

尝试将绘图代码移动到 Paint 事件中，您基本上是在修改控件的视觉效果，因此您需要处理这个而不是默认的绘画行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:25:46.340

每当重新绘制控件时，您的绘图就会被删除。

相反，您需要设置一个标志，指示是否立即绘制文本，然后处理该`Paint`事件，如果标志为真，则绘制文本。

在计时器滴答处理程序中，切换标志并调用`Invalidate()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:34:53.670

另一种方法是创建一个 UserControll 并在进度条顶部使用一个标签，并分别使用每个标签，这可能更容易做到，几乎不需要任何额外的代码。

# django - 带有 Webassets 0.7 的 Django 1.3：assets.py 被忽略了吗？

> ID：10642202
> 
> 赞同：1
> 
> 时间：2012-05-17T19:22:21.633
> 
> 标签：django

我正在尝试让现有的 Django 项目在我的 mac 上运行。我设法配置所有内容并在 PyCharm 中打开项目。

当我运行时，我收到错误：

TemplateSyntaxError at / Caught BundleError while rendering: 'stylesheets' not found (使用静态文件查找器)

我们使用 Django 1.3 和 Webassets 0.7（刚刚从早期版本更新）。我在定义各种捆绑包的应用程序文件夹中定义了 assets.py。

关于解决这个问题的任何建议？

**编辑：**好的，再进一步......我将我的 project.assest 添加到设置中，现在我没有 Bundle 错误。我还有另一个问题： *Caught BundleError while rendering: 'styles/libs/jquery-ui-timepicker-addon.css' not found*

路径看起来ok，collectstatic作品，副本，文件就位...

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:11:00.107

`assets.py`不再自动读取项目范围内的文件（而不是应用程序目录中的文件），您现在需要通过`ASSETS_MODULES`设置来定义此类文件。

如果您使用的是静态文件，请注意除非 Django 处于调试模式（settings.DEBUG=True），否则不会使用静态文件查找器。在生产模式下，webassets 将假定 collectstatic 已首先运行。

在 settings.DEBUG=True 模式下，反之亦然：仅使用 Django 静态文件查找器。您可以尝试打开 shell ( `./manage.py shell`) 并查看以下内容是否找到您的文件：

```
 from django.contrib.staticfiles import finders
 finders.find('styles/libs/jquery-ui-timepicker-addon.css') 
```

如果是这样，那么网络资产也应该如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T03:31:47.037

我出现了类似的错误

```
'[BUNDLE_NAME]' not found (using staticfiles finders) 
```

这不是一个很有帮助的消息，所以最终调查`./manage.py shell`并运行

```
>>> from django.conf import settings
>>> from [ASSETS_FILE_PATH.assets] import [BUNDLE_NAME]
>>> [BUNDLE_NAME] 
```

如果这不存在，它可能会给您另一条消息。

# php - 验证码干扰表单处理程序

> ID：10642209
> 
> 赞同：0
> 
> 时间：2012-05-17T19:22:55.907
> 
> 标签：php, warnings, recaptcha, contact-form

我正在尝试使用 reCaptcha 将验证码添加到我的一个网站上的联系表单中。验证码工作正常。联系表格在没有验证码的情况下工作正常 - 但是当我添加代码来验证验证码时，它会导致问题。

它给了我以下错误信息：

> 警告：无法修改标头信息 - 标头已由 /home/liveoutl/domains/mydomainsample.com/public_html/ 中的（输出开始于 /home/liveoutl/domains/mydomainsample.com/public_html/bids/verify.php:1）发送第 53 行的 bids/verify.php

在我看来，标题被干扰了 - 但本身没有标题。我试图让它在提交表单时加载一个“谢谢”页面。这一直适用于联系表单处理程序脚本，但现在验证码验证脚本导致问题。

有没有更好的方法来加载感谢页面？

应注意以下几点：我对 PHP 不是很熟悉我正在使用 iframe 将“contact-form.php”嵌入到实际站点中

这是我在 verify.php 中的完整代码：

```
<!-- begin code for including captcha validation-->    
<?php
      require_once('recaptchalib.php');
      $privatekey = "private_key";
      $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);

      if (!$resp->is_valid) {
        // What happens when the CAPTCHA was entered incorrectly
        die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
             "(reCAPTCHA said: " . $resp->error . ")");
      } else {
        // Your code here to handle a successful verification
      }
      ?>
      <!-- from here down handles the actual processing and sending of the form-->
      <?php 
    $errors = '';
    $myemail = 'name@domain.com';//<-----Put Your email address here.
    if(empty($_POST['name'])  || 
       empty($_POST['email']) ||
       empty($_POST['phone']) ||
       empty($_POST['message']))
    {
        $errors .= "\n Error: all fields are required";
    }

    $name = $_POST['name']; 
    $email_address = $_POST['email']; 
    $phone_number = $_POST['phone'];
    $message = $_POST['message']; 

    if (!preg_match(
    "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
    $email_address))
    {
        $errors .= "\n Error: Invalid email address";
    }

    if( empty($errors))
    {
        $to = $myemail; 
        $email_subject = "Contact form submission: $name";
        $email_body = "You have received a new message. ".
        " Here are the details:\n Name: $name \n Email: $email_address \n Phone: $phone_number \n Message \n $message"; 

        $headers = "From: $myemail\n"; 
        $headers .= "Reply-To: $email_address";

        mail($to,$email_subject,$email_body,$headers);
        //redirect to the 'thank you' page
        header('Location: contact-form-thank-you.html');
    } 
    ?>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
    <html>
    <head>
        <title>Contact form handler</title>
    </head>

    <body>
    <!-- This page is displayed only if there is some error -->
    <?php
    echo nl2br($errors);
    ?>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:41:18.117

您尝试发送 HTTP 标头`verify.php`：

```
header('Location: contact-form-thank-you.html'); 
```

在第一行发送 HTML 注释后，被视为响应，从现在开始发送任何标题都会发出这样的警告。

如果您确实需要该评论，请将其放在标签之前`<!DOCTYPE`或`<body>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:24:17.557

尝试删除评论后的空格

```
<!-- begin code for including captcha validation-->    
                                                   ____
                                            ^^ Spaces here ^^ 
```

如果不解决，则需要删除注释，并可以放入`<?php`标签内：

*验证.php*

```
<?php
// begin code for including captcha validation

[...] // Lots of code 
```

# wpf - WPF datagrid 单元格文本框控件

> ID：10642212
> 
> 赞同：1
> 
> 时间：2012-05-17T19:23:18.620
> 
> 标签：wpf, textbox, textchanged, datagridcell

我有数据网格单元格，在它下面我有一个文本框控件。如何使用路由事件调用该文本框控件的文本更改事件？我尝试了 EventSetter 但它不起作用。

这是代码：

```
<Style TargetType="{x:Type DataGridCell}" x:Key="DatagridCellWithTextbox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Grid Background="{TemplateBinding Background}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                        <TextBox x:Name="txtCell" Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Text}" VerticalContentAlignment="Top" TextChanged="">                                
                        </TextBox>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
     </Style> 
```

谢谢迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:37:17.573

我测试过

```
<TextBox x:Name="txtCell" TextChanged="txtCell_TextChanged"> 
```

它正在工作。你给你的风格一个`x:Key`。你应用了样式吗？

```
<DataGrid.Columns>
    <DataGridTemplateColumn CellStyle="{StaticResource DatagridCellWithTextbox}" />
</DataGrid.Columns> 
```

# python - 将成本字符串分解为整数值

> ID：10642215
> 
> 赞同：0
> 
> 时间：2012-05-17T19:23:30.660
> 
> 标签：python, string

假设我有一个格式为`$(Integer) - $(Integer)`或`$(Integer)`. 将它们分解并将它们转换为整数值的最简单方法是什么？如果字符串采用格式，则`$(Integer) - $(Integer)`取两个数字的平均值。

示例字符串：`$20 - $40`将转换为 30（这是一个范围）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:27:59.570

```
>>> string = '$20 - $40'  #'$20' will also work
>>> x = re.findall(r'\$(\d+)', string)
>>> 1\. * sum(map(int, x)) / len(x)
30.0 #convert to int if you want 
```

# matlab - MATLAB 中的低通/带通滤波器设计

> ID：10642224
> 
> 赞同：2
> 
> 时间：2012-05-17T19:24:13.027
> 
> 标签：matlab, communication, lowpass-filter

对于 MATLAB 中的模拟通信系统设计，首先我需要进行以下两个设计：

1.  设计一个低通滤波器，以赫兹为单位过滤截止频率和采样频率的`[slow]=lowpassfilter(s,fcut,fs)`输入信号。`s``fcut``fs`

2.  设计一个带通滤波器，它过滤具有截止频率和以赫兹为单位的采样频率的`[sband]=bandpassfilter(s,fcutlow,fcuthigh,fs)`输入信号。`s``fcutlow``fcuthigh``fs`

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-23T22:09:09.433

我发现这个问题有很多观点，但仍然没有很好的答案。

以下代码将满足您的需求。由于没有指定过滤器类型，我使用了一个巴特沃斯过滤器来演示它。`s`是输入信号，`x`是滤波后的信号。`fs`是以赫兹为单位的采样率。

```
% Design and apply the lowpass filter
order = 4;
fcut  = 8000;
[b,a] = butter(order,fcut/(fs/2),'low');
x     = filter(b,a,s);

% Design and apply the bandpass filter
order    = 10;
fcutlow  = 1000;
fcuthigh = 2000;
[b,a]    = butter(order,[fcutlow,fcuthigh]/(fs/2), 'bandpass');
x        = filter(b,a,s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:03:42.083

Matlab 具有`fdatool`用于滤波器设计的目的。[这](http://www.mathworks.com/help/toolbox/signal/ref/fdatool.html)是文档。您可以使用`fdatool`信号处理工具箱来完成所有这些任务。

# javascript - 为什么我的子域结构会禁用 javascript？

> ID：10642229
> 
> 赞同：0
> 
> 时间：2012-05-17T19:24:23.293
> 
> 标签：javascript, subdomain

我有一个可以通过两种方式访问​​的网站：

[http://austin.101mobility.com/](http://austin.101mobility.com/)
[http://101mobility.com/austin/](http://101mobility.com/austin/)

您会注意到具有子域结构的那个会禁用右上角的幻灯片 - 具有文件夹结构的那个可以正常工作。为什么是这样？

一切都是一样的，因为它们都指向同一个位置。然而，我的目标是将文件夹版本 301 重定向到子域版本 - 但在幻灯片修复之前我不能。

我觉得我错过了一些非常简单的东西。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:29:51.843

您是否为您的主域打开了热链接保护并且您的 javascript 库是否驻留在那里？

# c++ - 为什么无法创建堆栈大小小于默认大小的线程？

> ID：10642233
> 
> 赞同：1
> 
> 时间：2012-05-17T19:24:52.583
> 
> 标签：c++, multithreading, pthreads

我编写了一个小程序来创建线程并更改它们的默认堆栈大小，但在我的情况下。当我在更改属性后打印堆栈大小时，我仍然将堆栈大小显示为默认堆栈大小。

```
 # include<iostream>
        # include<pthread.h>
        # include<stdio.h>
        # define size 10
        using namespace std;
        pthread_attr_t attr;

        void* sum(void * threadid)
        {
          static int sum =0;
          sum=sum+5;
          long id=(long)threadid;
          size_t mystacksize;
          pthread_attr_getstacksize(&attr,&mystacksize);
          cout << " stack size  "<< mystacksize <<endl;
        }
        int main()
        {
         int rc;
         long t=0;
         pthread_t threads[5];  //number of different thread to br creatd
         size_t stacksize;
         pthread_attr_init(&attr);
         pthread_attr_getstacksize(&attr,&stacksize);   //gets the default stack size 
                                                        //allocated for thread
         cout <<" Default stack size is : " << stacksize <<endl; 
         stacksize=size;
         pthread_attr_setstacksize(&attr,stacksize);  //sets a new stacksize for thread
           for(t=0;t<5;t++)
            {
              rc=pthread_create(&threads[t],&attr,sum,(void*)t);
              if(rc)
              cout << "thread creation failed with id : " << t <<endl;
            }
         pthread_exit(NULL);
        return 0;
        } 
```

输出是： -

```
 Default stack size is : 8388608
           stack size  : 8388608
           stack size  : 8388608
           stack size  : 8388608
           stack size  : 8388608
           stack size  : 8388608 
```

另请注意，如果我尝试增加`stacksize`比`default size`我成功的能力更大的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:38:32.213

期望能够使用十字节的堆栈大小是很疯狂的。

你读过`pthread_attr_setstacksize`手册页吗？你检查了调用的返回值`pthread_attr_setstacksize`吗？

在我的系统（GNU/Linux）上，手册页说：

```
 pthread_attr_setstacksize() can fail with the following error:

   EINVAL The stack size is less than PTHREAD_STACK_MIN (16384) bytes. 
```

# sql-server - 仅针对当前插入的行的 SQL 触发器

> ID：10642234
> 
> 赞同：1
> 
> 时间：2012-05-17T19:24:52.850
> 
> 标签：sql-server, triggers

我有一个触发器，MyTrigger，我想让它只更改 TABLEA 中最近插入的行的描述字段 [描述]。如图所示，我有它的基础知识，但它目前只会扫描整个表以查找 TABLEA 上的每个 INSERT。

触发器在下方............

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER MyTrigger  
   ON  TABLEA
   AFTER INSERT
AS 
BEGIN

SET NOCOUNT ON;

UPDATE TABLEA
SET [DESCRIPTION] = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DESCRIPTION], '…' , '...'),'–','-'),'’',''''),'½','1/2'),'•','+'),'”','"'),'“','"'),'‘',''''),'—','-'),'é','e')
WHERE  DESCRIPTION LIKE '%…%' 
    OR DESCRIPTION LIKE '%–%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%½%'
    OR DESCRIPTION LIKE '%•%'
    OR DESCRIPTION LIKE '%”%'
    OR DESCRIPTION LIKE '%“%'
    OR DESCRIPTION LIKE '%‘%'
    OR DESCRIPTION LIKE '%—%'
    OR DESCRIPTION LIKE '%é%'

END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:21:36.703

I would suggest doing this in an `INSTEAD` OF trigger, thus only actually performing one DDL action against the table (you can also ignore the `WHERE` clause here and just apply the replace calls to everything in `inserted`).

```
DROP TRIGGER MyTrigger ON TABLEA;
GO

CREATE TRIGGER dbo.MyTrigger  
   ON  TABLEA
   INSTEAD OF INSERT
AS 
BEGIN
  SET NOCOUNT ON;

  INSERT TABLEA(col1, col2, ..., Description)
    SELECT col1, col2, ...,
    REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
    REPLACE(REPLACE(REPLACE([DESCRIPTION], '…' , '...'),'–','-'),'’','''')
    ,'½','1/2'),'•','+'),'”','"'),'“','"'),'‘',''''),'—','-'),'é','e')
    FROM inserted;
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:27:23.687

为什么您不使用`INSERTED`AND之类的表，`DELETED`而不是扫描整个表并更新最后一条记录....

检查这个：[使用插入和删除的表](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:31:02.030

我会使用该表并不使用`inserted`触发器（示例如下）。`INSTEAD OF``AFTER`

```
SET NOCOUNT ON;

DECLARE     @temp       table   --temp table that can be modified
(
    Column1
    , Column1
    , Column1
    , [DESCRIPTION]     --this table should mimic your TABLEA schema
)

INSERT INTO @temp
SELECT      *
FROM        inserted

UPDATE @temp
SET [DESCRIPTION] = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DESCRIPTION], '…' , '...'),'–','-'),'’',''''),'½','1/2'),'•','+'),'”','"'),'“','"'),'‘',''''),'—','-'),'é','e')
WHERE  DESCRIPTION LIKE '%…%' 
    OR DESCRIPTION LIKE '%–%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%½%'
    OR DESCRIPTION LIKE '%•%'
    OR DESCRIPTION LIKE '%”%'
    OR DESCRIPTION LIKE '%“%'
    OR DESCRIPTION LIKE '%‘%'
    OR DESCRIPTION LIKE '%—%'
    OR DESCRIPTION LIKE '%é%'

INSERT INTO TABLEA
            (
                Column1
                , Column1
                , Column1
                , [DESCRIPTION]
            )
SELECT      Column1
            , Column1
            , Column1
            , [DESCRIPTION]
FROM        @temp

END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:40:06.207

请参考代码中的最后一行 - 使用表的唯一标识符/（主键？）更改标识符。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER MyTrigger  
   ON  TABLEA
   AFTER INSERT
AS 
BEGIN

SET NOCOUNT ON;

UPDATE TABLEA
SET [DESCRIPTION] = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DESCRIPTION], '…' , '...'),'–','-'),'’',''''),'½','1/2'),'•','+'),'”','"'),'“','"'),'‘',''''),'—','-'),'é','e')
WHERE  (DESCRIPTION LIKE '%…%' 
    OR DESCRIPTION LIKE '%–%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%’%'
    OR DESCRIPTION LIKE '%½%'
    OR DESCRIPTION LIKE '%•%'
    OR DESCRIPTION LIKE '%”%'
    OR DESCRIPTION LIKE '%“%'
    OR DESCRIPTION LIKE '%‘%'
    OR DESCRIPTION LIKE '%—%'
    OR DESCRIPTION LIKE '%é%')
    AND EXISTS (SELECT * FROM Inserted i WHERE i.Identifier = TableA.Identifier)

END
GO 
```

# php - PHP checkdnsrr（）函数没有给出预期结果

> ID：10642236
> 
> 赞同：3
> 
> 时间：2012-05-17T19:25:17.270
> 
> 标签：php, function

我在 PHP 中尝试了 checkdnsrr() 函数来测试给定的主机名是否有效。

下面是PHP代码：

```
$url = "this_is_a_wrong_url.com";
if (checkdnsrr($url, 'A')) 
{
    echo "Domain exists.";
}
else
{
     echo "Domain doesnot exists.";
} 
```

但即使对于无效的 url，它也会返回 true。

我究竟做错了什么？我正在使用 PHP 5.3.5

编辑：**此代码在具有相同 PHP 版本的 Linux 机器上运行良好。它仅在 Windows 机器上给出无效结果。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:01:57.197

一些 ISP 会将无效域重定向到他们自己的搜索服务器。TimeWarner/RoadRunner 就是这样一种 ISP。您的代码工作正常，但您可能需要检查以确保它们不会解析到您的 ISP 的搜索服务器。首先使用 gethostbyname 检查无效域，然后使用它进行检查。

```
if (checkdnsrr($url, 'A') && gethostbyname($url) != '204.232.137.207' && gethostbyname($url) !='66.152.109.110') 
```

或者更好的是

```
if(checkdnsrr($url,'A') && !in_array(gethostbyname($url),gethostbynamel('this_is_a_wrong_url.com'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T07:52:05.310

感谢@aynber 的回答。它对我有很大帮助。但我认为这对我来说并不完整。我已经稍微修改了您检查电子邮件域是否有效的答案。实际上，它不适用于 .co、.co.in、.in 域。所以，我稍微扩展你的答案:)

```
$email = trim($_GET['email']);

// take a given email address and split it into the username and domain.
list($userName, $mailDomain) = split("@", $email);
$tld = explode('.', $mailDomain,2)[1];//for php>=5.4.0
if(checkdnsrr($mailDomain,'A') && !in_array(gethostbyname($mailDomain),gethostbynamel('this_is_a_wrong_url_xx_xx_xx.' . $tld))) {  
echo "Domain exists.";  
} else { 
echo "Domain not exists.";  
} 
```

@aynber，+1 的答案:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:36:33.870

尝试这个

```
 $url = "this_is_a_wrong_url.com";
    if(checkdnsrr(($url),"A"))
{
    echo "Domain exists.";
}
else
{
     echo "Domain doesnot exists.";
} 
```

所以`$url`刹车

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-14T14:42:01.037

我在这里找到：

[http://php.net/manual/en/function.checkdnsrr.php](http://php.net/manual/en/function.checkdnsrr.php)

变更日志

版本说明

5.3.0 此功能现已在 Windows 平台上可用。

5.2.4 TXT 类型增加。

添加了 5.0.0 AAAA 类型。

这意味着您不能在 windows 上的 php < 5.3 下调用此函数

# c# - 使用存储在证书存储中并使用 BouncyCastle 和 C# 标记为不可导出的 X509Certificate2 的 PrivateKey

> ID：10642237
> 
> 赞同：1
> 
> 时间：2012-05-17T19:25:22.623
> 
> 标签：c#, certificate, bouncycastle, private-key, x509certificate2

我正在尝试使用 bouncycastle 建立一个小型证书颁发机构。

证书是使用 BouncyCastle 生成的，并与私钥一起存储在当前用户的证书存储中。

但是出于安全原因，密钥被标记为不可导出。我知道绕过这一点很容易，但它意味着一个额外的障碍。

现在，如果要签署新证书，我需要访问证书的私钥。我尝试使用此代码：

```
X509Certificate2 caCert = GetRootKey(); // Fetches the certificate from the store
AsymmetricCipherKeyPair caPrivKey = DotNetUtilities.GetKeyPair(caCert.PrivateKey); 
```

不幸的是，我得到了 CryptographicException - 因为私钥被标记为不可导出，这就是我的意图；-)

我的问题是：如何在不访问证书的情况下使用证书的私钥？我很确定我错过了一些重要的点，因为没有任何方式存储私钥是没有任何意义的......

我现在为此搜索了几个小时，但在 stackoverflow 或 Google 上找不到任何东西。

谁能告诉我我做错了什么？有没有另一种方法来签署一些东西？！

提前致谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:05:52.547

简短的回答：没有 BouncyCastle。

您不能将密钥放入 BouncyCastle（或 OpenSSL 或任何其他）库并从那里使用它。如果不绕过“禁止导出”标志并将其导出，就没有办法做到这一点，正如您所指出的，如果您是管理员并且拥有必要的 Fu，那么这是可能的。

您可以做的是获取密钥的 CryptoAPI 句柄，并要求 CryptoAPI 为您执行签名或加密操作。DotNet 加密类封装了 CyptoAPI。

所以基本上你需要的是一个关于如何使用 DotNet 加密类的教程。有很多，例如这篇 MSDN 杂志文章有一个大约四分之三的数字签名示例：

[http://msdn.microsoft.com/en-us/magazine/cc163454.aspx](http://msdn.microsoft.com/en-us/magazine/cc163454.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-11T01:55:10.597

我不想将 C++/CLI 添加到我的项目中，因此想出了一个使用 System.Security.Pkcs.SignedCms 的纯 C# 解决方案。与 Searcher 的答案类似，这提供了 ISignatureFactory 的实现，可用于在 BouncyCastle 中签署证书。

```
using Org.BouncyCastle.Asn1.X509;
using Org.BouncyCastle.Cms;
using Org.BouncyCastle.Crypto;
using System.IO;
using System.Linq;
using System.Security.Cryptography.X509Certificates;

public class WindowsSignatureFactory : ISignatureFactory
{
    public AlgorithmIdentifier Algorithm { get; }
    public X509Certificate2 Cert { get; }

    public object AlgorithmDetails => Algorithm;

    public WindowsSignatureFactory(AlgorithmIdentifier algorithm,
            X509Certificate2 cert)
    {
        Algorithm = algorithm;
        Cert = cert;
    }

    public IStreamCalculator CreateCalculator()
    {
        return new WindowsStreamCalculator(Algorithm, Cert);
    }

    private class WindowsStreamCalculator : IStreamCalculator
    {
        public AlgorithmIdentifier Algorithm { get; }
        public X509Certificate2 Cert { get; }
        private MemoryStream MemoryStream { get; } = new MemoryStream();
        public Stream Stream => MemoryStream;

        public WindowsStreamCalculator(AlgorithmIdentifier algorithm,
                X509Certificate2 cert)
        {
            Algorithm = algorithm;
            Cert = cert;
        }

        public object GetResult()
        {
            var signer = new System.Security.Cryptography.Pkcs.CmsSigner(Cert);
            // This maps e.g. "rsa with sha256" (OID 1.2.840.113549.1.1.11) to
            // "sha256" (OID 2.16.840.1.101.3.4.1)
            var hashAlgorithm = new DefaultDigestAlgorithmIdentifierFinder().find(Algorithm);
            var hashOid = hashAlgorithm.Algorithm.Oid;
            signer.DigestAlgorithm = new System.Security.Cryptography.Oid(hashOid);

            var dataToSign = MemoryStream.ToArray();
            var info = new System.Security.Cryptography.Pkcs.ContentInfo(dataToSign);
            var cms = new System.Security.Cryptography.Pkcs.SignedCms(info, true);
            cms.ComputeSignature(signer, true);

            // This is the tricky part: usually you would call cms.Export() to get a signed
            // message, but we only want the signature
            var cmsSigner = cms.SignerInfos
                .Cast<System.Security.Cryptography.Pkcs.SignerInfo>().ToArray().Single();
            var signatureData = cmsSigner.GetSignature();

            return new SimpleBlockResult(signatureData);
        }
    }
} 
```

它可以用作 Asn1SignatureFactory 的替代品，如下所示：

```
public static Org.BouncyCastle.X509.X509Certificate SignCertificate(
        X509V3CertificateGenerator generator,
        X509Certificate2 nonExportableSigningCertificate)
{
    var signer = new WindowsSignatureFactory(
        new AlgorithmIdentifier(X9ObjectIdentifiers.ECDsaWithSha256),
        nonExportableSigningCertificate);

    var signed = generator.Generate(signer);

    // Make sure it worked
    var signingCertBouncy = DotNetUtilities.FromX509Certificate(nonExportableSigningCertificate);
    signed.Verify(signingCertBouncy.GetPublicKey());

    return signed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T21:01:41.157

这个问题正是我需要的，但答案有一个不起作用的链接。在搜索了一段时间后，我使用 NCrypt 库找到了这个实现： [https ://github.com/Microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/security/cryptoapi/CertSign/CPP/Sign.cpp](https://github.com/Microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/security/cryptoapi/CertSign/CPP/Sign.cpp)

不幸的是，这是用 C 编写的，而我需要一个 C# 实现。所以我创建了这个可用于托管 C# 代码的 C++\CLI 包装器 (SignerWrapper.h)： [https ://github.com/DmitriNymi/StoreCertificateSigner](https://github.com/DmitriNymi/StoreCertificateSigner)

我还编写了一个自定义 ISignatureFactory 以在 BouncyCastle 中使用，请参阅同一 repo 中的 PksAsn1SignatureFactory.cs。它只是为了创建我的自定义 ISigner （我的班级： PksEcdsaSigner ）。

现在，您可以将 PksAsn1SignatureFactory 作为 ISignatureFactory 传递给 BouncyCastle 以创建新证书，例如，请参阅单元测试 PksAsn1SignatureFactoryTest.cs - 显式调用 ISignatureFactory 和 CertificateIssuerTest.cs - 使用帮助程序类创建由来自商店中另一个证书的私钥签名的新证书

# java - 带有泛型和可变参数的模棱两可的重载 java 方法

> ID：10642241
> 
> 赞同：46
> 
> 时间：2012-05-17T19:25:35.187
> 
> 标签：java, generics, variadic-functions

我试图了解 java 如何处理函数调用中的歧义。在下面的代码中，对的调用`method`是模棱两可的，但`method2`不是！！！。

我觉得两者都是模棱两可的，但是为什么当我注释掉对 的调用时会编译`method`？为什么`method2`不模棱两可？

```
public class A {
    public static <K> List<K> method(final K arg, final Object... otherArgs) {
        System.out.println("I'm in one");
        return new ArrayList<K>();
    }

    public static <K> List<K> method(final Object... otherArgs) {
        System.out.println("I'm in two");
        return new ArrayList<K>();
    }

    public static <K, V> Map<K, V> method2(final K k0, final V v0, final Object... keysAndValues) {
        System.out.println("I'm in one");
        return new HashMap<K,V> ();
    }

    public static <K, V> Map<K, V> method2(final Object... keysAndValues) {
        System.out.println("I'm in two");
        return new HashMap<K,V>();
    }

    public static void main(String[] args) {
        Map<String, Integer> c = A.method2( "ACD", new Integer(4), "DFAD" );
        //List<Integer> d = A.method(1, "2", 3  );
    }
} 
```

编辑：这出现在评论中：到目前为止，许多 IDE 都报告为模棱两可 - IntelliJ 和 Netbeans。但是，它可以从命令行/maven 编译得很好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T15:06:03.250

一个直观的测试是否`method1`比`method2`查看是否`method1`可以通过`method2`使用相同参数调用来实现更具体的方法

```
method1(params1){
    method2(params1);   // if compiles, method1 is more specific than method2
} 
```

如果有可变参数，我们可能需要扩展一个可变参数，以便 2 个方法具有相同数量的参数。

让我们检查`method()`一下示例中的前两个

```
<K> void method_a(K arg, Object... otherArgs) {
    method_b(arg, otherArgs);   //ok L1
}
<K> void method_b(Object arg, Object... otherArgs) { // extract 1 arg from vararg
    method_a(arg, otherArgs);   //ok L2
} 
```

（返回类型不用于确定特异性，因此省略）

两者都编译，因此每个都比另一个更具体，因此模棱两可。您`method2()`的 s 也是如此，它们比彼此更具体。因此，对的调用`method2()`是模棱两可的，不应该编译；否则它是一个编译器错误。

* * *

这就是规范所说的；但这合适吗？当然，`method_a`看起来比`method_b`. 实际上，如果我们有一个具体的类型而不是`K`

```
void method_a(Integer arg, Object... otherArgs) {
    method_b(arg, otherArgs);   // ok
}
void method_b(Object arg, Object... otherArgs) {
    method_a(arg, otherArgs);   // error
} 
```

then only`method_a`比 更具体`method_b`，反之则不然。

这种差异源于类型推断的魔力。`L1`/`L2`调用没有显式类型参数的泛型方法，因此编译器尝试推断类型参数。类型推断算法的*目标*是找到类型参数*以便代码编译*！难怪 L1 和 L2 编译。L2实际上是推断为`this.<Object>method_a(arg, otherArgs)`

类型推断试图猜测程序员想要什么，但有时猜测肯定是错误的。我们真正的意图其实是

```
<K> void method_a(K arg, Object... otherArgs) {
    this.<K>method_b(arg, otherArgs);   // ok
}
<K> void method_b(Object arg, Object... otherArgs) {
    this.<K>method_a(arg, otherArgs);   // error
} 
```

# iis - 从命令行将服务器（带端口）添加到 IIS Web 场

> ID：10642242
> 
> 赞同：0
> 
> 时间：2012-05-17T19:25:40.893
> 
> 标签：iis, iis-7.5, load-balancing, web-farm-framework

我有一个正确的网络场设置，上面有 7 个服务器，我使用 IIS Webfarm GUI 添加这些服务器。现在我想使用命令提示符，因为我必须添加超过 50 台服务器并且不想手动执行该任务。以下是我在命令提示符下看到的命令，但不幸的是我无法找到 httpPort 号的属性。

```
 appcmd.exe set config  -section:webFarms /+"[name='myServerFarm'].[address='127.0.0.1']" /commit:apphost 
```

我用“port”、“httpPort”属性尝试了这个命令，但无济于事。

谁能告诉我添加带有 HTTP 端口的服务器的命令。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:46:43.723

您应该可以使用 powershell 和 Web Farm Framework cmdlet 来完成。

[网络农场框架 Cmdlet](http://learn.iis.net/page.aspx/934/web-farm-framework-20-for-iis-cmdlets-for-windows-powershell/ "Web Farm 框架 CmdLets")

查找标题“使用 cmdlet 将服务器添加到服务器场”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T19:23:25.613

这是一个对我有用的例子：

> appcmd.exe 设置配置 -section:webFarms -[name='myServerFarm'].[address='127.0.0.1'].applicationRequestRouting.httpPort:8000

# php - 将选择列表转换为 Jquery UI 自动完成

> ID：10642245
> 
> 赞同：0
> 
> 时间：2012-05-17T19:26:00.490
> 
> 标签：php, javascript, jquery, jquery-ui, xhtml

我有以下选择框，我用 Jquery 自动完成替换：

```
<select name="selectarea" onchange="findCity(this.options[this.selectedIndex].value);" id="sel" /> 
```

Jquery UI 自动完成代码是：

```
$(document).ready(function() {
    $( "#sel" ).autocomplete({
            source: "xml/states.php"
    });

    $( "#sel"  ).autocomplete('option','minLength',0);

    $( "#sel"  ).bind("click", function(event, ui) { 
    $( "#sel"  ).autocomplete( "search" , '' );

    }); 

}); 
```

问题是我不知道在哪里调用 Jquery 代码中的“findCity”javascript。它收到的 json 响应来自一个 php 文件，数组如下所示：

```
$STATES = array("scAllBusinesses"=>"All Businesses", 
"scAppraisals"=>"Appraisals", 
"scArchitect"=>"Architect", 
"scArtGallery"=>"Art Gallery", 
"scAttorney"=>"Attorney", 
"scBallet"=>"Ballet", 
"scBanks"=>"Banks", 
"scBar"=>"Bar",
); 
```

自动完成工作正常并填充，只是不确定在哪里放置 javascript 调用（findCity）。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:59:12.133

My best guess is you need to add a select handler to the options passed to autocomplete like so:

```
$(document).ready(function() {
    $( "#sel" ).autocomplete({
        source: "xml/states.php",
        minLength: 0,

        select: function(event, ui) {
            findCity(ui);
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:31:56.930

绑定到自动完成的更改事件。[从 jquery ui 文档](http://jqueryui.com/demos/autocomplete/#default)：

> 当字段模糊时触发，如果值发生了变化；ui.item 是指选中的项目。
> 
> 代码示例
> 
> 提供一个回调函数来处理更改事件作​​为初始化选项。

```
 $( ".selector" ).autocomplete({
   change: function(event, ui) { ... }
}); 
```

按类型绑定到更改事件：autocompletechange。

```
$( ".selector" ).bind( "autocompletechange", function(event, ui) {
  ...
}); 
```

# linux - 无法从远程主机连接到 linux tcp 套接字应用程序

> ID：10642246
> 
> 赞同：0
> 
> 时间：2012-05-17T19:26:00.647
> 
> 标签：linux, sockets, tcp, gnu

我编写了一个使用 GNU C 套接字库中的 TCP 套接字的应用程序。它基本上只是在套接字上侦听传入请求。我可以在本地主机上使用 telnet 连接到套接字，但是当我尝试从另一台机器连接时没有响应。我正在运行 Fedora 13 并禁用了我的防火墙，但它仍然无法正常工作。

套接字代码被封装在一个由其他组织编写的库中，并且应该已经可以工作，但这里是它的核心：

```
...
fd_ = ::socket(AF_INET, SOCK_STREAM, 0);
if (fd_ < 0)
{
   perror("socket");
   return -1;
}

int val = 1;
int rc = setsockopt(fd_, SOL_SOCKET, SO_REUSEADDR, &val, sizeof(val));

if (rc < 0)
{
   perror("sesockopt");
   close();
   return -1;
}

rc = setsockopt(fd_, IPPROTO_TCP, TCP_NODELAY, &val, sizeof(val));

if (rc < 0)
{
   perror("sesockopt");
   close();
   return -1;
}

const int flags = ::fcntl(fd_, F_GETFL, 0);
::fcntl(fd_, F_SETFL, flags | O_NONBLOCK);

rc = ::bind(fd_, addr, addr.size_);

if (rc < 0)
{
   perror("bind");
   close();
   return -1;
}

rc = ::listen(fd_, 10);

if (rc < 0)
{
   perror("bind");
   close();
   return -1;
}

return 0; 
```

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:12:20.623

为了接受连接，您实际上必须调用[`accept(2)`](http://kernel.org/doc/man-pages/online/pages/man2/accept4.2.html)该 TCP 套接字。如给定的那样，代码仅准备用于侦听网络的套接字。

此外，由于您将该套接字标记为*non-blocking*，因此您可能希望将其包装在某种[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)循环中。

# java - 根据当前文本压缩修订历史

> ID：10642247
> 
> 赞同：0
> 
> 时间：2012-05-17T19:26:08.320
> 
> 标签：java, perl, node.js, compression

我知道 gzip 和其他压缩例程使用字节级重复数据删除操作。我只是想知道是否有像后半部分 gzip 这样的标准编写程序。

具体来说，对于修订历史。当前文本将是纯文本，而以前的修订将在压缩的 blob 中。有没有办法将当前纯文本设置为压缩中的起始文本，而实际上不包括压缩结果中的当前文本。因此，压缩文本和起始文本将一起用于解压缩。

我对 Java、Perl、Node.JS 和我想是 C/C++ 感兴趣，因为有一些方法可以使用上述语言之一调用编译文件。在这种情况下，我将在 UNIX 上构建 C 文件。

是否存在这样的例程，是否有一种重要/可用的语言不止一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:43:59.730

使用 Zip，您可以包含 2 个单独的文件，而不是压缩其中一个

我知道 Java 有处理 zip 文件的工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:33:17.323

> 有没有办法将当前纯文本设置为压缩中的起始文本，而实际上不包括压缩结果中的当前文本。

有两种方法。您可以使用[zlib](http://zlib.net/)为压缩器`deflateSetDictionary()`提供最多 32K 的历史记录，压缩器将使用它来压缩输入的内容。32K 不包含在压缩数据中，解压器会要求以某种方式可以使用该 32K 才能成功解压。

也许更有效，尤其是对于超过 32K 的文本，使用 Unix`diff`生成修订版和当前文本之间的差异，并压缩`diff`. 您可以`diff`对多个修订进行连续的 's，然后将其全部压缩。

# c# - 在 XAML 属性声明中绑定到父级？

> ID：10642249
> 
> 赞同：2
> 
> 时间：2012-05-17T19:26:13.220
> 
> 标签：c#, wpf, xaml

我试图在 XAML 的“属性设置器”中绑定到一个属性。在此位置的绑定似乎与在“正常”位置绑定的层次结构不同。有谁知道如何在那里绑定东西？

我也尝试过使用 RelativeSource 来获取父级（这更好，因为这是我真正想要做的，而不是复制它）但没有骰子。

```
<loc:MyType Target="{Binding ElementName=Editor, Path=TextArea, Converter={loc:EditorAdapterConverter}}">
    <loc:MyType.PopupActions>
        <loc:BackspaceHideAction Target="{Binding ElementName=Editor, Path=TextArea, Converter={loc:EditorAdapterConverter}}" /> //Binding doesn't work
        <loc:KeyAction Action="Show" Key="Space" Modifiers="LeftCtrl" />
        <loc:KeyAction Action="Hide" Key="Escape" />
    </loc:MyType.PopupActions>
</loc:MyType> 
```

相关信息：`BackspaceHideAction`继承自`FrameworkElement`并具有一个名为 Target 的依赖属性（实际上与 相同`MyType`）。`Target`我也需要访问`BackspaceHideAction`它——它也不一定是 DP 属性。

`MyType.PopupActions`是 MyType 上的一个依赖属性，声明为`PopupActionList : List<PopupAction>`.

我目前假设我无法绑定的原因是我嵌套在属性实例化中。类似的绑定在其他地方也有效（就在上面的那一行），所以绑定的类型不应该是问题。只是上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:55:20.190

做了一些进一步的测试，我发现了为什么它不起作用。

`PopupActions`on的依赖属性`MyType`被声明为`PopupActionList`- 没什么特别的。但是属性不会自动输入到 WPF 元素的类似“DOM”的结构中，这并不奇怪（在你弄清楚之后，一如既往）。

但是，通过添加一些代码来调用`MyType.AddLogicalChild`每个单独的 PopupAction 作为项目，一切正常！（至今）

# iphone - 在另一个类接口文件中实现委托

> ID：10642250
> 
> 赞同：1
> 
> 时间：2012-05-17T19:26:22.693
> 
> 标签：iphone, objective-c, ios, cocoa-touch, delegates

我正在尝试通过在另一个类接口文件中实现委托来实现委托，如下所示：

**ImageScrollView.h**

```
#import <UIKit/UIKit.h>

@protocol ImageScrollViewDelegate <NSObject>

- (void)scrollViewDidScroll:(UIScrollView *)scrollView;
- (void)scrollViewDidZoom:(UIScrollView *)scrollView;

@end

@interface ImageScrollView : UIScrollView <UIScrollViewDelegate>
{
    id <ImageScrollViewDelegate> _imageScrollViewDelegate;
}

@property(nonatomic, assign) id <ImageScrollViewDelegate> imageScrollViewDelegate;

@end 
```

**图像滚动视图.m**

```
#import "ImageScrollView.h"

@implementation ImageScrollView

@synthesize imageScrollViewDelegate = _imageScrollViewDelegate;

...

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self.imageScrollViewDelegate scrollViewDidScroll:scrollView];

}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView;
{
    [self.imageScrollViewDelegate scrollViewDidZoom:scrollView];
}

...

@end 
```

然后我有一个实现 ImageScrollViewDelegate 的 viewController：

**ViewControllerSubClass.h**

```
#import <UIKit/UIKit.h>

@protocol ImageScrollViewDelegate;

@interface ViewControllerSubClass : UIViewController <ImageScrollViewDelegate> //warning is here
{
}

@end 
```

**视图控制器子类.m**

```
#import "ViewControllerSubclass.h"
#import "ImageScrollView.h"

@implementation ViewControllerSubClass

- (void)loadView
{
    ...

    [[self scrollView] setImageScrollViewDelegate:self];

    ...

- (void) scrollViewDidScroll:(UIScrollView *)scrollView
{
    ...   
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    ...
} 
```

在@interface`@interface ViewControllerSubClass : UIViewController <ImageScrollViewDelegate>`中`ViewControllerSubclass.h`，我收到警告：“找不到“ImageScrollViewDelegate”的协议定义四次，但代码仍在工作。

任何人都知道如何摆脱警告，或者如何正确实现委托（更好地使用单独的文件？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:31:17.867

您不能转发声明您正在实施的协议。你需要`#import` `ImageScrollView.h`而不是声明`@protocol ImageScrollViewDelegate`. 它起作用的原因是因为该方法在运行时调用时存在于您的实现中，而出现警告的原因是因为编译器在编译时不知道协议中有哪些方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:34:41.373

将`#import "ImageScrollView.h"`from移动`ViewControllerSubClass.m`到`ViewControllerSubClass.h`。完成此操作后，您可以删除`@protocol ImageScrollViewDelegate;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:33:46.513

在 ViewControllerSubclass.h 文件中写入 #import "ImageScrollView.h" 并从 ViewControllerSubclass.m 文件中删除相同的内容。

# c++ - C++ 中的 StringStream/c_str() 损坏

> ID：10642253
> 
> 赞同：0
> 
> 时间：2012-05-17T19:26:36.387
> 
> 标签：c++, string, stringstream, c-strings

我在使用 std::cout、std::stringstream 和 std::string.c_str() 时遇到了一些问题。主要是，似乎有些东西被困在某处的缓冲区中，我不知道如何解决这个问题。

如果你不喜欢阅读 StackOverflow 中的代码，这里是我的 github 的相关链接：[TLString 类](https://github.com/tomthorogood/TurnLeftLib/tree/0517/utils/src/tlstring)、[测试类](https://github.com/tomthorogood/TurnLeftLib/blob/0517/utils/src/test.h)和[单元测试](https://github.com/tomthorogood/TurnLeftLib/blob/0517/tests/tlstring_test.cpp)——你可以跳到我陈述我更简洁的问题的最后。

在我的单元测试中，我有以下代码：

```
 Test <std::string> strtest; // A unit test object expecting strings.
    Test <const char*> chtest; // A unit test object expecting const char*s
    // ...

    TurnLeft::Utils::TLString str3("Exterminate.");
    // ...

    /* Basically, name() and expect() will use the passed arg. 
     * in the output in order to
     * display output such as the following:
     * str(): expecting 'Exterminate.' | Actual 'Exterminate.' => PASS
     */
    strtest.name("str()").expect("Exterminate.").test( str3.str() );

    /* To try and determine where the corruption was occuring, I did a 
     * simple cout here, and got what should be the expected result of 
     * the next test,
     * meaning that the actual test should be succeeding.
     */
    std::cout << str3.c_str() << std::endl //outputs Exterminate. normally.

    /* But when I try to invoke that same method (c_str()) within the test
     * object, it simply copies the argument passed in for name().
     */
    chtest.name("c_str()").expect("Exterminate.").test( str3.c_str() );
    // Should output 'Exterminate.' as in the saatement before, but instead
    // outputs 'c_str()'. 
```

下面是 Test 类的代码：

```
namespace unittest{
static std::string status[2] = {"FAIL", "PASS"};

    template <class ExpectedResult>
    class Test
    {
     private:
        ExpectedResult  expected;
        ExpectedResult  actual;
        std::string     testName;
     public:
        Test();
        Test <ExpectedResult>& expect (ExpectedResult value);
        Test <ExpectedResult>& name   (std::string);
        void test   (ExpectedResult value);
    };

template <class ExpectedResult> Test <ExpectedResult>&
Test<ExpectedResult>::expect(ExpectedResult value)
{    
    expected = value;
    return *this;
}

template <class ExpectedResult>
Test <ExpectedResult>&
Test<ExpectedResult>::name(std::string aName)
{
    testName = aName;
    return *this;
}

    template <class ExpectedResult>
    void Test<ExpectedResult>::test(ExpectedResult value)
    {
        actual = value;
        std::cout << testName << ": ";
        std::cout << "Expecting: " << expected << " | ";
        std::cout << "Actual: " << actual;
        std::cout << " => " << status[actual==expected] << std::endl;
    } 
```

TLString 类是我正在编写的类，它将为 C++ 中的字符串提供一些更流畅的操作（例如，连接）。它使用字符串流来处理这些操作。该`TLStream::c_str()`方法实际上只是这样做：`return stream.str().c_str();`

所以，我真的很困惑如何`actual`分配`testName`. 我不确定冲突发生在哪里，因为变量接近交互的唯一时间是它们都输出到 CLI，甚至在这种情况下，这两个是不同的数据类型。

我编写了 c_str() 功能，因为很简单，您永远不知道某些第三方库何时会依赖 C 字符串而不是 C++ 字符串，并且没有理由限制我的类。即使在 std::ios 中，您也需要为某些事情使用 c 字符串。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T19:34:07.243

`std::stringstream.str()`返回类型的临时对象`std::string`。返回时这个临时值超出范围`TLStream::c_str()`，使返回的`char const*`指针指向已释放的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:48:48.403

```
 std::cout << " => " << status[actual==expected] << std::endl; 
```

这`==`会将`const char*`指向字符串文字的指针`"Exterminate"`与`const char*`指向的指针进行比较`str3.c_str()`

这些指针是不同的。

您需要使用类似的东西来比较它们`strcmp`，而不是通过指针相等。

# c# - 手机模拟WPF

> ID：10642259
> 
> 赞同：-2
> 
> 时间：2012-05-17T19:27:02.280
> 
> 标签：c#, wpf

我必须编写简单的手机模拟器、简单的键盘和 LCD，菜单中有几个选项。

我的问题是：在这里实现 MVVM 模式是否值得？显示不同 LCD 状态的最佳方式是什么？制作几个网格（LCD）样式并切换它，取决于单击哪个按钮？或者更改网格中包含的每个控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:06:15.993

您想首先创建实际的模拟引擎，然后考虑图形部分，所以是的，像 MVVM 这样的模式将是一个好主意。根据您的“LCD”尺寸，网格将是一个坏主意 - 您想使用图片框或类似的东西。此外，您可能想使用 Lua 之类的脚本引擎来编写模拟的东西。

它应该有多灵活？

笔和纸在早期设计阶段真的很有帮助。

# java - 正则表达式替换查询参数中的值

> ID：10642269
> 
> 赞同：6
> 
> 时间：2012-05-17T19:27:51.380
> 
> 标签：java, regex

我通过说 request.queryString() 从 url 得到一个查询字符串 -

```
supplyId=123456789b&search=true 
```

我想用新值替换**“supplyId”**的值。**“supplyId”**可以出现在查询字符串中的任何位置。可能的正则表达式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T19:34:47.587

我实际上不会为此使用正则表达式，而是使用字符串操作。在 URL 中搜索“supplyId=”的位置，然后抓取所有内容，直到字符串结尾或“&”，以先到者为准。

如果您必须使用正则表达式，请尝试以下方法之一：

```
(?<=supplyId=)[^&]+

supplyId=([^&]+) 
```

确保关闭区分大小写。如果您使用第二种模式，您想要的值将在捕获组 1 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T19:34:41.067

我认为你应该能够做这样的事情：

```
String queryString = "supplyId=123456789b&search=true";
String anyStringIlike = "someValueIlike";
String newQueryString = queryString.replaceAll("supplyId=[^&]+","supplyId=" + anyStringIlike);
System.out.println(queryString);
System.out.println(newQueryString); 
```

这应该打印：

> 供应ID=123456789b&search=true
> 
> supplyId=someValueIlike&search=true

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:58:30.927

在 perl 中你可以做这样的事情。

perl -le '@m = ( "garbare=i123123123asdlfkjsaf&supplyId=123456789b&search=true" =~ /supplyId=(\d+\w+)&/g ); 为@m 打印

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T11:21:03.510

```
public static String updateQueryString (String queryString, String name, String value) {
if (queryString != null) {
      queryString = queryString.replaceAll(name + "=.*?($|&)", "").replaceFirst("&$", "");
   }
 return addParameter(queryString, name, value);
}

public static String addParameter(queryString, name, value) {      
  return StringUtils.isEmpty(queryString) ? (name + "=" + value) : (queryString + "&" + name + "=" + value);

} 
```

你这样称呼：`updateQueryString("supplyId=123456789b&search=true", "supplyId", "newValue");`

输出： `search=true&supplyId=newValue`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-08T06:37:09.860

```
public class TestQueryStringValReplace {    
   public static String replace(String queryString, String propName, String newVal) {
       return queryString.replaceAll(propName+"=[^&]+", propName+"=" + newVal);
   }

   public static void main(String[] args) {
       Assert.assertEquals("supplyId=newVal&search=true", replace("supplyId=oldVal&search=true", "supplyId","newVal"));
       Assert.assertEquals("supplyId=newVal", replace("supplyId=oldVal", "supplyId","newVal"));
       Assert.assertEquals("search=true&supplyId=newVal&3rdprop=val", replace("search=true&supplyId=oldVal&3rdprop=val", "supplyId","newVal"));
   } 
```

}

# .net - 通过设置 Scope-Application 在运行时设置 Settings.settings 中的用户首选项

> ID：10642276
> 
> 赞同：1
> 
> 时间：2012-05-17T19:28:21.117
> 
> 标签：.net, windows, winforms, application-settings, settings.settings

> 是否可以通过设置 Scope-Application 在运行时使用应用程序设置文件 [Settings.settings] 保存用户首选项，就像我们可以通过设置 Scope-User 一样？

请建议？

# c++ - WM_KEYDOWN 消息未发送

> ID：10642280
> 
> 赞同：1
> 
> 时间：2012-05-17T19:28:43.793
> 
> 标签：c++, windows, winapi, spy++

我一直在试图找出我的程序中的一个错误。我注意到，每当我按住向上和向左箭头键并按空格键时，我的 WndProc 永远不会接收或处理 WPARAM 为 VK_SPACE 的 WM_KEYDOWN 消息。

我有点好奇，所以我打开了 Spy++ 并开始查看发送到我窗口的消息。我注意到，当我按住向左和向上箭头键并按另一个键时，比如 A，WM_KEYDOWN（以及 WM_CHAR）消息被发送到我的窗口。

但是，如果我按住向上和向左箭头键并按空格键，则不会将空格键命中的 WM_KEYDOWN 消息发送到我的窗口。

这是什么原因？谁能确认这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:32:55.540

发生这种情况是因为您的键盘正在执行所谓的[重影](http://www.microsoft.com/appliedsciences/antighostingexplained.mspx)。这对于当今人们使用的大多数键盘来说是正常的。它被连接起来，因此生产起来要便宜得多，因此，这样的事情总是会发生。

基本上当同时按下同一行/列中的三个键时，它们不能都被唯一标识，导致至少一个不通过。您唯一能做的就是购买防重影键盘，或重新设计控件以避免冲突。

在个人层面上，我在展示我的游戏前一两天发现了这一点，最终不得不将控件设置为 P1：SZXC 和空间以及 P2：/789 和 +。提前知道真的是一件好事。

# ruby - 下载 RVM 错误

> ID：10642283
> 
> 赞同：0
> 
> 时间：2012-05-17T19:28:57.913
> 
> 标签：ruby, rvm

我尝试下载 RVM，但收到以下错误消息：

> 错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败
> 
> 更多细节在这里：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)
> 
> curl 默认使用证书颁发机构 (CA) 公钥（CA 证书）的“捆绑”执行 SSL 证书验证。默认捆绑包名为 curl-ca-bundle.crt；`--cacert`您可以使用该选项指定备用文件。如果此 HTTPS 服务器使用捆绑包中表示的 CA 签名的证书，则证书验证可能由于证书问题而失败（证书可能已过期，或者名称可能与 URL 中的域名不匹配）。如果您想关闭 curl 对证书的验证，请使用`-k`（或`--insecure`）选项。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:21:24.290

您需要阅读输出并按照说明进行操作！

或者，如果您不关心安全性，请执行以下操作：

```
echo insecure >> ~/.curlrc 
```

顺便说一句。这是重复的问题！（和我的回答）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T19:43:17.517

看起来他们最近更改了命令。尝试这个：

```
 bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"' >> ~/.bashrc
. ~/.bashrc 
```

您也可以添加`-k`到您的命令中。我认为他们的证书很糟糕。Github的很好。

# java - 什么时候只抽象类而不是接口

> ID：10642284
> 
> 赞同：-1
> 
> 时间：2012-05-17T19:28:58.853
> 
> 标签：java

> **可能重复：**
> [何时使用抽象类或接口？](https://stackoverflow.com/questions/1221512/when-to-use-abstract-class-or-interface)

我知道抽象类和接口。但我想知道一个实时场景，我们只需要使用抽象类而不需要接口，只需要使用接口而不是抽象类。任何人都可以给我一些这样的例子吗？

我猜第二个是在需要多重继承时使用的，即一个类已经继承了某个类，所以我们不能在这里使用抽象类。我们只需要使用接口。同样，我需要一个示例，其中我们仅使用抽象而不使用接口。

已编辑

只是为界面添加更多点。

考虑 java 库集合

```
 Collections

            List                                Set 
```

所有 3 都是接口，但最重要的是，尽管它们具有常见的功能，即 add、addAll、contains、containsAll 等。 List 以自己的方式实现，而 set 以另一种方式实现（讲述重复）。设置不允许重复列表允许重复。

所以我想说的是，当超级接口的子接口没有共同特征时，我们必须去接口

但是，如果有一些共同的功能，那么两者都将其保留为抽象类。

我需要一个用java api完成的实际例子。谢谢。信德胡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:35:11.297

抽象类适用于通用功能，这与定义 API 的接口没有太大关系。

如果除了抽象类的子类之外永远没有实现，则可以跳过接口。我真的想不出一个实际的例子，因为我总是想要接口，所以我可以为单元测试创​​建模拟实现。

跳过抽象类更为常见。在这种情况下，每个项目都遵循一个接口，但不共享任何实现。您可能有一个带有 JDBC、FTP 等实现的“ConnectionService”接口，其中这些实现是如此特定于它们的协议，以至于抽象类没有增加任何价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:35:16.077

通常，当您希望您的类能够从链中的前一个类继承时，您会使用超类层次结构。

超类可能是动物

动物可以是草食动物，也可以是肉食动物。

草食动物可以是马。

肉食动物可以是狼。

马可以是牧神。

狼可以是幼崽。

等等。

您通常仅在您想要强制添加某些功能时才实现接口，但会因情况而异，因为接口仅实现方法签名而不是实际功能。你必须这样写。

# ruby-on-rails - 在 Rails 自定义表单中使用设计表单

> ID：10642285
> 
> 赞同：0
> 
> 时间：2012-05-17T19:29:00.410
> 
> 标签：ruby-on-rails, forms, devise

我在当前项目中使用 Devise gem 进行身份验证。我遇到了在我的自定义表单中使用设计注册和登录表单的问题，我不确定如何在我的项目中实现它。

此自定义表单有 20-25 个字段，如果当前用户未登录，我想在同一视图中包含设备登录和注册表单。因此，当用户点击表单的保存按钮时，控制器将首先验证或注册用户，然后再保存表单。

```
class BookController < ApplicationController
    def new
        @book = Shop::Book.new
    end

    def create
        @book = Book.new(params[:book])

        # TODO::
        # validate / register the user if not currently logged-in

        if @book.save
            redirect_to :action => 'list'
        else
            @subjects = Subject.find(:all)
            render :action => 'new'
        end   
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:31:05.667

查看 Digi_Cazter 的链接，然后在检查 signed_in 后添加表单？

在您的 create 方法中，这样的东西应该可以工作：

```
 @user = User.new(:email => 'test@example.com', :password => 'password',    #values from params   
   :password_confirmation => 'password')
   @user.save
   sign_in @user  #if you want to do this

       if @book.save
            redirect_to :action => 'list'
        else
            @subjects = Subject.find(:all)
            render :action => 'new'
        end 
```

# sql - SQL - 删除和子查询

> ID：10642286
> 
> 赞同：2
> 
> 时间：2012-05-17T19:29:06.157
> 
> 标签：sql, relational-database, embedded-sql

以下是我编写的一个 sql 查询，用于删除放置表中的所有记录，其中`placement.op_number`= 返回记录的列表。

子查询单独工作正常，只返回`OP_NUMBER`列（两行）。

我得到的错误是：

> 子查询最多可以返回一条记录

```
DELETE
FROM PLACEMENT
WHERE PLACEMENT.OP_NUMBER = (SELECT OP_NUMBER
                             FROM Opening
                             WHERE opening.qual_code = "SEC-45"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:30:34.143

使用`IN`而不是等于：

```
delete
from PLACEMENT
where PLACEMENT.OP_NUMBER in (
        select OP_NUMBER
        from Opening
        where opening.qual_code = "SEC-45"
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:30:57.320

```
DELETE
FROM PLACEMENT
WHERE EXISTS (SELECT OP_NUMBER FROM Opening
               WHERE opening.qual_code = "SEC-45" 
              AND OP_NUMBER = PLACEMENT.OP_NUMBER); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:33:16.043

当前，您正在将 PLACEMENT.OP_NUMBER 与记录集进行比较 - Int 与记录集。您将需要使用 IN 关键字来将条件与多个值进行比较

您的新查询应如下所示 -

```
DELETE
FROM PLACEMENT
WHERE PLACEMENT.OP_NUMBER IN (SELECT OP_NUMBER
                             FROM Opening
                             WHERE opening.qual_code = "SEC-45"); 
```

# coffeescript - 在生态模板中获取循环索引

> ID：10642287
> 
> 赞同：21
> 
> 时间：2012-05-17T19:29:08.273
> 
> 标签：coffeescript, eco

是否可以使用 eco 模板引擎获取当前循环索引？

例如在 Jinja2 你可以做

```
{% for var in array %}
    {{ loop.index0 }}
{% endfor %} 
```

如果没有，是否有更惯用的方法来获取索引？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-17T19:54:56.203

来自[CoffeeScript 网站](http://coffeescript.org/#loops)：

```
# Fine five course dining.
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake']
menu i + 1, dish for dish, i in courses 
```

也可以写成

```
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake']
for dish, i in courses
  menu i + 1, dish 
```

对于生态模板，应该这样做：

```
<% for val, idx in @varName: %>
<span>The index is <%= idx %> and value is <%= val %></span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:16:18.030

是的，只需将 CoffeeScript 用于（但要注意额外的`:`）：

```
<% for thing, i in @things: %>
  <%= i %>: <%= thing %>
<% end %> 
```

[jsFiddle 示例](http://jsfiddle.net/8J8ff/)。

# javascript - 给定 URL，将 HTML 内容作为字符串返回。Javascript 函数

> ID：10642289
> 
> 赞同：47
> 
> 时间：2012-05-17T19:29:09.647
> 
> 标签：javascript, html

我想编写一个 javascript 函数，将 HTML 内容作为给定 URL 的字符串返回给函数。我在 Stackoverflow 上找到了类似的答案。

我正在尝试使用[此答案](https://stackoverflow.com/a/4033310/536890)来解决我的问题。

但是，好像`document.write()`什么都没写。当我加载页面时，我得到一个空白屏幕。

```
<html>
<head>
</head>
<body>  
  <script type="text/JavaScript">
  function httpGet(theUrl)
  {
    var xmlHttp = null;

    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false );
    xmlHttp.send( null );
    return xmlHttp.responseText;
  }
  document.write(httpGet("https://stackoverflow.com/"));
  </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-17T19:35:43.813

您需要在 readystate==4 时返回，例如

```
function httpGet(theUrl)
{
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            return xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", theUrl, false );
    xmlhttp.send();    
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-26T15:19:30.280

我为跨站点找到的唯一一个是此功能：

```
<script type="text/javascript">
var your_url = 'http://www.example.com';

</script>

<script type="text/javascript" src="jquery.min.js" ></script>
<script type="text/javascript">
// jquery.xdomainajax.js  ------ from padolsey

jQuery.ajax = (function(_ajax){

    var protocol = location.protocol,
        hostname = location.hostname,
        exRegex = RegExp(protocol + '//' + hostname),
        YQL = 'http' + (/^https/.test(protocol)?'s':'') + '://query.yahooapis.com/v1/public/yql?callback=?',
        query = 'select * from html where url="{URL}" and xpath="*"';

    function isExternal(url) {
        return !exRegex.test(url) && /:\/\//.test(url);
    }

    return function(o) {

        var url = o.url;

        if ( /get/i.test(o.type) && !/json/i.test(o.dataType) && isExternal(url) ) {

            // Manipulate options so that JSONP-x request is made to YQL

            o.url = YQL;
            o.dataType = 'json';

            o.data = {
                q: query.replace(
                    '{URL}',
                    url + (o.data ?
                        (/\?/.test(url) ? '&' : '?') + jQuery.param(o.data)
                    : '')
                ),
                format: 'xml'
            };

            // Since it's a JSONP request
            // complete === success
            if (!o.success && o.complete) {
                o.success = o.complete;
                delete o.complete;
            }

            o.success = (function(_success){
                return function(data) {

                    if (_success) {
                        // Fake XHR callback.
                        _success.call(this, {
                            responseText: data.results[0]
                                // YQL screws with <script>s
                                // Get rid of them
                                .replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi, '')
                        }, 'success');
                    }

                };
            })(o.success);

        }

        return _ajax.apply(this, arguments);

    };

})(jQuery.ajax);

$.ajax({
    url: your_url,
    type: 'GET',
    success: function(res) {
        var text = res.responseText;
        // then you can manipulate your text as you wish
        alert(text);
    }
});

</script> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-17T19:39:26.287

收到响应后，只需调用此函数即可将数据附加到您的正文元素

```
function createDiv(responsetext)
{
    var _body = document.getElementsByTagName('body')[0];
    var _div = document.createElement('div');
    _div.innerHTML = responsetext;
    _body.appendChild(_div);
} 
```

@satya 代码修改如下

```
function httpGet(theUrl)
{
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            createDiv(xmlhttp.responseText);
        }
    }
    xmlhttp.open("GET", theUrl, false);
    xmlhttp.send();    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-02T15:13:33.213

这是已接受答案的一个版本，即 1）`returns`来自函数的值（错误修复），以及 2）在使用时不会中断`"use strict";`

当用户加载页面时，我使用此代码将文件预加载`.txt`到我的文件中。`<textarea>`

```
function httpGet(theUrl)
{
    let xmlhttp;

    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            return xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", theUrl, false);
    xmlhttp.send();

    return xmlhttp.response;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-10T00:15:37.563

在某些网站上，`XMLHttpRequest`可能会向您发送类似`<script src="#"></srcipt>`. 在这种情况下，请尝试使用类似以下脚本的 HTML 文档：

```
<html>
  <body>
    <iframe src="website.com"></iframe>
    <script src="your_JS"></script>
  </body>
</html> 
```

现在您可以使用 JS 从 HTML 中获取一些文本，例如`getElementbyId`.

但这可能不适用于某些具有跨域阻止功能的网站。

# iphone - 在两个精灵之间创建距离缓冲区

> ID：10642290
> 
> 赞同：1
> 
> 时间：2012-05-17T19:29:13.517
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我有两个精灵，一个“轨道”并跟随另一个。我已经开始工作了，所以一条鱼会跟随屏幕周围的气泡（它会朝该方向旋转并朝它移动）。这是关于它如何工作以及我想要发生的事情的图表：

![在此处输入图像描述](../Images/863c6a8927081e26ca7bce05c119006a.png)

我试图弄清楚如何将我的鱼“缓冲”到远离气泡中心的正确（x，y），但我不确定如何。这是我的代码，它按计划运行（60 * 秒）：

```
- (void) nextFrame:(ccTime)dt {

    float dx = bubble.position.x - fish.position.x;
    float dy = bubble.position.y - fish.position.y;
    float d = sqrt(dx*dx + dy*dy);
    float v = 200;

    if (d >  1){
        fish.position = ccp( fish.position.x + dx/d * v *dt, 
                               fish.position.y + dy/d * v *dt);
    } else {
        fish.position = ccp(bubble.position.x, bubble.position.y);
    }

    float angle = CC_RADIANS_TO_DEGREES(atan2f(dx, dy));
    angle -= 90;

    fish.rotation = angle;
    if(bubble.position.x < fish.position.x){
        fish.flipY = YES;
    } else {
        fish.flipY = NO;
    }
} 
```

任何想法或帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:57:06.907

您已经在除零检查中找到了解决方案的种子。您希望鱼在更长的距离处停止移动，因此将条件更改为`d`。将您的第一个 if/else 替换为：

```
if (d > radiusOfBubblePlusRadiusOfFish){
    fish.position = ccp( fish.position.x + dx/d * v *dt, 
                           fish.position.y + dy/d * v *dt);
} 
```

并保持其他一切不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:33:56.473

不要将鱼的位置计算为鱼的中心，而是以嘴前的位置计算。

所以移动直到fish.position + offset = bubble.position。

# java - 如何比较非常大的 csv 文件中的差异

> ID：10642298
> 
> 赞同：5
> 
> 时间：2012-05-17T19:30:11.783
> 
> 标签：java, csv, large-files

我必须比较两个 csv 文件，每个文件大小为**2-3 GB**，包含在 Windows 平台中。

我试图将第一个放在 HashMap 中以将其与第二个进行比较，但结果（如预期的那样）是非常高的内存消耗。

目标是在另一个文件中获取差异。

这些行可能会以不同的顺序出现，也可能会丢失。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:52:07.810

假设您希望通过编程在 Java 中执行此操作，答案会有所不同。

两个文件都排序了吗？如果是这样，那么您不需要读取整个文件，只需从两个文件的开头开始，然后

1.  如果条目匹配，则推进两个文件中的“当前”行。
2.  如果条目不匹配，请确定哪个文件的行会先出现，显示该行，然后推进该*文件中*的当前行。

如果您没有订购文件，那么也许您可以在 diff 之前订购文件。同样，由于您需要低内存解决方案，因此不要读取整个文件来对其进行排序。将文件切成可管理的块，然后对每个块进行排序。然后使用插入排序来组合块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:47:50.810

[unix 命令 diff](http://linux.about.com/library/cmd/blcmdl1_diff.htm) *可以*用于完全匹配。

您也可以使用`-b`标志运行它以忽略仅空格的差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-20T10:37:31.230

使用[uniVocity-parsers](https://github.com/uniVocity/univocity-parsers)，因为它带有最快的 Java CSV 解析器。您可以毫无问题且非常快速地处理大至 100 GB 的文件。

为了比较大型 CSV 文件，我建议您使用自己的[RowProcessor](https://github.com/uniVocity/univocity-parsers/blob/master/src/main/java/com/univocity/parsers/common/processor/RowProcessor.java)实现并将其包装在[ConcurrentRowProcessor](https://github.com/uniVocity/univocity-parsers/blob/master/src/main/java/com/univocity/parsers/common/processor/ConcurrentRowProcessor.java)中。

披露：我是这个库的作者。它是开源和免费的（Apache V2.0 许可证）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T19:40:27.533

我建议您逐行比较，而不是将整个文件上传到内存中。或者尝试只上传一组行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T12:04:37.673

有一个用于解析 CSV 文件的 Java 库[OpenCSV 。](http://opencsv.sourceforge.net/)可以构建文件的延迟加载。检查[这篇文章](http://java.dzone.com/articles/incrementally-readstream-csv)。希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-30T11:52:04.003

这是关于 Stack Overflow 的另一篇类似帖子，其中我给出了一个解决方案的概要，该解决方案只需要将两个文件中较小的一个存储在内存中：

[如何比较两个大型 CSV 文件并获取差异文件](https://stackoverflow.com/questions/38120211/how-to-compare-two-large-csv-files-and-get-the-difference-file)

这是不需要订购文件的通用解决方案，因为您在问题中指出行的顺序可能不同。

无论如何，即使这样也可以避免。我不想在这里重复解决方案，但想法是索引一个文件，然后遍历另一个文件。您可以通过仅保存哈希表和索引中每一行的位置来避免将整个较小的文件存储在内存中。这样，您将不得不多次访问磁盘上的文件，但不必将其保存在内存中。

该算法的运行时间为 O(N + M)。内存消耗为 O(min(N, M))。

# android - 手机和平板电脑摄像头是否足以读取一维条码？

> ID：10642305
> 
> 赞同：0
> 
> 时间：2012-05-17T19:30:35.357
> 
> 标签：android, hardware, barcode, zxing

我在我的项目中使用 ZXing 条码扫描仪，但遇到一维条码问题。扫描条形码的平均成功率为 10 次中的 6 次。6 次代码正确，但其中 4 次数字全部打乱。所以问题是，我应该尝试更改要求并使用 QR 码（相机永远不会无法读取 QR 码），还是有解决方法，例如某种验证，以便我可以发出错误消息？

提前致谢。

编辑：代码 128 是我从一开始就应该使用的代码。设备读取代码没有问题。感谢您提供所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:52:39.470

听起来您选择了没有校验和的一维格式——比如 Code 39？结果很容易被误读。使用 Code 128，或者更好的是 QR 码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:39:03.290

相机绰绰有余。一维条码很难阅读。如果可能的话，我会切换到二维码。以下是一些您可能会发现有用的链接：[https ://stackoverflow.com/a/4648938/517561](https://stackoverflow.com/a/4648938/517561) [http://www.scandit.com/2011/10/13/barcode-101-upc-ean-code128-vs- qr-datamatrix/](http://www.scandit.com/2011/10/13/barcode-101-upc-ean-code128-vs-qr-datamatrix/)

# c++ - 如何使用调试符号构建 openssl？[添加 libeay.pdb]

> ID：10642310
> 
> 赞同：5
> 
> 时间：2012-05-17T19:30:54.513
> 
> 标签：c++, build, openssl, pdb

我正在使用 openssl，在构建过程中我收到很多关于缺少**libeay.pdb**的警告。有人可以建议如何添加它吗？

build.cmd 看起来像这样（我认为重要的部分）：

```
...
perl util\mk1mf.pl debug dll no-asm VC-WIN64A >ms\ntdll64.dbg.mak
perl util\mkdef.pl 32 libeay > ms\libeay32.def
nmake -f ms/nt64.dbg.mak 
```

我阅读了 INSTALL.W32，上面写着“如果您使用平台 debug-VC-WIN32 而不是 VC-WIN32，那么将编译调试符号。” 我试图用 debug-WIN64A 替换 VC-WIN64A（与 32 相同），并且构建给了我一个错误

```
Unknown option --debug-VC-WIN64A 
```

谢谢你。

编辑：当我在 mak 之后添加 /DEBUG
再次编辑时它起作用了： /DEBUG 不是必需的，命令中的**调试**字完成了工作。
如何使用 Visual Studio 构建它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:50:36.503

当您在 Windows 上使用 Visual Studio 构建 OpenSSL 时，库的符号文件名为`lib.pdb`，它位于`tmp32`目录中，因此您可能需要手动将其复制到`out32`目录中。

从 1.0.0g 版本开始的 Win32 配置也是如此；从那时起，这可能发生了变化，Win64 可能会有所不同。

# asp.net - ASP.Net 重新部署 - 仅 bin 文件夹

> ID：10642312
> 
> 赞同：0
> 
> 时间：2012-05-17T19:30:57.490
> 
> 标签：asp.net, web-deployment

我在 Visual Studio 2010 中有一个网站。当我发布网站（不可更新，没有固定命名等 - 只是一个简单的发布）时，它会为我创建整个网站，每个 aspx 和 ashx 等仅作为标记。bin 文件夹是所有内容的实际所在位置。

如果我更改网站代码（仅在代码文件中） - 当我再次发布网站时，我只能重新部署 bin 文件夹，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:33:27.803

是的，如果更改仅在后面的代码中，您可以只在 bin 中部署 dll

# c - Arduino阵列定义

> ID：10642315
> 
> 赞同：1
> 
> 时间：2012-05-17T19:31:03.957
> 
> 标签：c, arduino

我正在阅读一些 Arduino 示例的代码，我遇到了这一行：

`uint16_t pulses[100][2];`

看来这是在定义一个 100x2 数组——对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T19:33:23.933

你是对的。它定义了一个 100x2 的无符号 16 位整数数组。

# sql - 我可以在 SQL Server 上进行实时查询吗？

> ID：10642319
> 
> 赞同：3
> 
> 时间：2012-05-17T19:31:17.180
> 
> 标签：sql, sql-server-2008, arduino

我正在开发一个开源项目，我正在使用 Arduino 控制器来播放光输出。我要提供的数据源正在实时记录到[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)数据库中。我想观察数据，将其提供给控制器，以便我可以直观地观察放入数据库的数据发生了什么。这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:39:23.243

让您的查看应用程序每隔 50 毫秒轮询一次数据库中的新日志项。让您的查看应用程序记住从数据库中获取的最后一条记录的 ID，并将此 ID 包含在您的查询中，如下所示：

```
select *
from LogItems
where ID > @lastSeenID 
```

这是我能想到的最简单的解决方案。

# javascript - URL 中的尾随哈希 (#) 会破坏一些 Javascript？

> ID：10642323
> 
> 赞同：2
> 
> 时间：2012-05-17T19:31:34.107
> 
> 标签：javascript, url, magento

我最近在尝试调试我们的 Magento 商店的问题时遇到了一个真正的问题。其中一个模板文件中的一些内联 javascript 没有运行，我不知道为什么。它在查看不同产品的页面的另一个实例中运行良好，但在查看我遇到问题的页面时却没有。不知何故，在我的调试过程中，一个井号 (#) 被添加到 URL 的末尾。出于某种原因，这导致 Javascript 无法运行。我删除了哈希，一切都按预期工作。我知道 URL 中的散列用于链接到锚点，您也可以使用散列做其他花哨的事情，我不熟悉但在寻找解决方案时遇到了这些事情。谁能解释这里发生了什么以及为什么斜杠会破坏我的一些javascript？还，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:40:58.797

您使用的 js 很可能会解析 URL 并尝试将结尾部分（查询或诸如此类）与特定字符串匹配。一旦添加了 # ，字符串就不再匹配，因此它不起作用。

当然，也可能是其他事情，但没有看到我首先想到的示例代码

# python-3.x - Python Pygame 有效地改变表面

> ID：10642331
> 
> 赞同：0
> 
> 时间：2012-05-17T19:32:37.947
> 
> 标签：python-3.x, pygame, pixels

我正在制作一个有趣的小游戏，并且有一个事件可以让你控制敌人（muhahaha 我可以接管他们的小程序头脑）我想将部分图像从红色转换为蓝色。

1.  我是否应该使用`surface.set`来更改颜色值，

2.  还是我应该将新图像加载到表面中，例如`"red_man.png"`最初加载然后当他改变侧面加载`"blue_man.png"`？

哪个更有效率？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:15:16.450

所以 Ian Mallett 是正确的：

> 效率如何？.set_at 将更节省空间，但显然您每次想要更改时都在设置单个像素。在启动时加载一个全新的图像会更快，但你会使用更多的空间。我猜你想要第二个，但是。. .

我想要第二个，更快（即使以更多空间为代价）。所以最好加载整个“蓝色”图像以及“红色”图像，然后根据需要在它们之间切换。

谢谢伊恩！

# jquery-plugins - 你会如何将 Backbone.js 与这个 jQuery 插件一起使用？

> ID：10642333
> 
> 赞同：1
> 
> 时间：2012-05-17T19:32:53.420
> 
> 标签：jquery-plugins, backbone.js

我最近继承了一个严重依赖 Backbone.js 的应用程序。我的应用程序覆盖 Backbone.sync() 函数以使用 Qt（允许应用程序在嵌入桌面应用程序的浏览器中执行 AJAX 请求）；因此，AJAX 最好尽可能使用 Backbone。

我想在[这里](http://jquery.bassistance.de/treeview/demo/async.html)使用 jQuery Treeview 插件并使用 Backbone 与我的 API 进行数据交互。为了异步加载节点，这使用了一个覆盖 toggle() 的[附加插件](http://jquery.bassistance.de/treeview/jquery.treeview.async.js)，使其使用 $.ajax 来请求新的节点数据。

将 Backbone 与此插件一起使用是否有意义，您将如何去做？我认为这将涉及编写一个直接使用 Backbone 的替代“异步”插件？

这是我到目前为止所拥有的：

```
;(function($) {

var proxied = $.fn.treeview;
$.fn.treeview = function(settings) {
    // if (!settings.url) {
        // return proxied.apply(this, arguments);
    // }
    var container = this;

    var TreeNodeCollection = Backbone.Collection.extend({
        url: '/api/subfolder_list',
        tagName: 'ul',

        initialize: function() {
        },

        parse: function(response) {
            container.empty();
            $.each(response, this.createNode, [container]);
        //$(container).treeview({add: container});
        },

      createNode: function(parent) {
            var current = $("<li/>").attr("id", this.id || "").html("<span>" + this.text + "</span>").appendTo(parent);
            if (this.classes) {
                current.children("span").addClass(this.classes);
            }
            if (this.expanded) {
                current.addClass("open");
            }
            if (this.hasChildren || this.children && this.children.length) {
                var branch = $("<ul/>").appendTo(current);
                if (this.hasChildren) {
                    current.addClass("hasChildren");
                    if (typeof branch.collection == 'undefined') {
                      branch.collection = new TreeNodeCollection();
                    }
                    branch.collection.createNode.call({
                        classes: "placeholder",
                        text: "&nbsp;",
                        children:[]
                    }, branch);
                }
                if (this.children && this.children.length) {
                    if (typeof branch.collection == 'undefined') {
                      branch.collection = new TreeNodeCollection();
                     }
                    $.each(this.children, parent.collection.createNode, [branch])
                }
            }

            $(parent).treeview({add: container});
        }
    });

    container.collection = new TreeNodeCollection();

    if (!container.children().size()) {
        container.collection.fetch();
    }
    var userToggle = settings.toggle;
    return proxied.call(this, $.extend({}, settings, {
        collapsed: true,
        toggle: function() {
            var $this = $(this);

            if ($this.hasClass("hasChildren")) {
                var childList = $this.removeClass("hasChildren").find("ul");
                //load(settings, this.id, childList, container);
                container.collection.fetch();
            }
            if (userToggle) {
                userToggle.apply(this, arguments);
            }
        }
    }));
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:45:59.363

我意识到您可能正在这样做作为进入 Backbone 的练习，这不是一件坏事，但我确实觉得您需要一些提示。

1.  通常集合与 DOM*没有任何关系。*该`parse`方法存在于您要建模的数据的解析、展平和/或归零的默认方法的情况下。
2.  要处理与 DOM 相关的操作和事件委托，您将使用 Backbone View（实际上是从 Backbone.View 扩展创建的新实例，但我认为您已经明白了）。

在您的情况下，事情可能很棘手，因为您可能正在处理分层（多级）JSON 数据，而 Backbone 并没有开箱即用地处理这些数据。（也可以说，它不需要，尽管如果开发一些约定来处理这些事情可能会很好。**） [这个问题](https://stackoverflow.com/questions/6150378/backbone-with-a-tree-view-widget)涉及一些。我认为 Derick Bailey（他回答了这个问题）实际上可能已经编写了一个 Backbone 模块来处理这些事情，但我自己并没有调查过它（特别是他的任何解决方案或那个问题）。[这](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)可以参考一个特定的解决方案。

** 这并不是说那里没有任何约定，我个人只是不知道任何约定。

# jquery - jQuery Smooth Div Scroll - 右热点未激活

> ID：10642334
> 
> 赞同：0
> 
> 时间：2012-05-17T19:32:53.937
> 
> 标签：jquery, html, scroll, smooth

我遇到了一个问题，鼠标悬停时似乎没有激活正确的热点。不过，左边似乎工作正常。[http://christophermoulder.alykee.com/lighting/](http://christophermoulder.alykee.com/lighting/)

这是我正在使用的代码以及css：

```
$(document).ready(function() {
    $("#makeMeScrollable").smoothDivScroll({ 
        mousewheelScrolling: true,
        visibleHotSpotBackgrounds: 'onstart',
        hotSpotsVisibleTime:5000,
        hotSpotScrollingStep:2,
        hotSpotScrollingInterval:1,
        autoScrollingMode: "",
        autoScrollingDirection: "endlessloopright",
        manualContinuousScrolling: true
    });
}); 
```

是否有任何可能导致此问题的跳出？

谢谢！担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:32:35.630

因此，您需要一些（正好两个）CSS 样式来解决您的问题：

首先，“makeMeScrollable”容器必须有相对位置：

```
div#makeMeScrollable {
position: relative;
} 
```

现在，将“scrollingHotSpotRight”的右位置设置为 0：

```
div.scrollingHotSpotRight {
right: 0;
} 
```

就这样。

PS：我有同样的问题。;)

# scala - Scala 中有迭代版本的 groupBy 吗？

> ID：10642337
> 
> 赞同：3
> 
> 时间：2012-05-17T19:32:55.977
> 
> 标签：scala, scala-collections

我有很多项目的迭代器，所以我不能将它转换为 iterable for groupBy 并且不想将所有结果都存储在内存中。但我知道所有对象都是按 groupBy 字段排序的，所以似乎可以为排序的迭代器实现 groupBy ...... scala 集合中是否已经有一些方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:25:17.327

我的解决方案：

```
 def iterativeGroupBy[T, B](iterO: Iterator[T])(func: T => B): Iterator[List[T]] = new Iterator[List[T]] {
    var iter = iterO
    def hasNext = iter.hasNext

    def next = {
      val first = iter.next()
      val firstValue = func(first)
      val (i1,i2) = iter.span(el => func(el) == firstValue)
      iter = i2
      first :: i1.toList
    }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T22:30:40.727

奇怪的`groupBy`是没有打开`Iterator`，但是这个怎么样？

```
val it = Iterator(1, 2, 3)
new Iterable[Int] { def iterator = it }.groupBy(_ % 2 == 0) 
```

它似乎有效（尽管它不能保证，因为每次*都应该*产生相同的迭代器`Iterable`）。

# json - 用 JSON 显示阿拉伯字符

> ID：10642340
> 
> 赞同：2
> 
> 时间：2012-05-17T19:33:04.403
> 
> 标签：json, unicode, utf-8, arabic

我正在尝试使用 php 创建一个阿拉伯 json 文件，但问题是我得到了奇怪的字符而不是通常的阿拉伯字母 (Ø§Ø¨Ùˆ Ù...ÙŠØ²Ø§Ù†)。

我正在使用 mysql_query("SET NAMES 'utf8'");

我试图找到问题的解决方案，但我被困住了我已经测试过在 php 文件上输出字符串并且它正在工作，并且正在显示阿拉伯字母，并且 json 字符串是我想要的。

但是每当我放置 json 标头时， header('Content-type: application/json'); 我得到了奇怪的字符

谁能帮忙这与我的php（5.1.6）版本有关吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:39:19.310

以这种方式设置标题：-

```
header( 'Content-Type: application/json; charset=utf-8' ); 
```

# mysql - 具有特定属性的 MySQL 数据库关系

> ID：10642343
> 
> 赞同：1
> 
> 时间：2012-05-17T19:33:20.177
> 
> 标签：mysql, database-design, relationships

我正在创建一个度假村数据库和后端。

此后端允许管理员创建新度假村，然后指定度假村中包含哪些设施。

设施可以是：网球场、游泳池等。

听起来很容易对吧？我遇到的问题是每个便利设施都需要一个属性：[near by] 或 [on location]。

我想这样做的方式是：

```
CREATE TABLE IF NOT EXISTS `amenity_resort_assn` (
  `amenities_id` int(10) unsigned NOT NULL,
  `resorts_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`amenities_id`,`resorts_id`),
  KEY `IDX_amenityresortassn_1` (`amenities_id`),
  KEY `IDX_amenityresortassn_2` (`resorts_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

```
CREATE TABLE IF NOT EXISTS `resorts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
   PRIMARY KEY (`id`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT ;

CREATE TABLE IF NOT EXISTS `amenities` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `amenities_onsite_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_amenities_1` (`amenities_onsite_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT ;

CREATE TABLE IF NOT EXISTS `onsite_type` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `IDX_amenitiesonsitetype_1` (`name`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:26:10.487

除了“在位置”和“附近”之外，您可以保留一些不同的现场属性的可能性是正确的。也许您稍后会添加“20 英里内”或“在您的房间内”。

所以我建议这样做表格：

```
RESORTS: id, name
AMENITIES: id, name
ONSITE_TYPE: id, name
AMENITY_RESORT_ASSN: id, resorts_id, amenities_id, onsite_type_id 
```

这似乎是这些事物之间的关系在现实生活中的运作方式——这些特征中的每一个都独立于其他特征。这使得度假村有可能在现场和附近都有餐厅。

# mysql - 使用 MySQL 的时间间隔 SQL 查询

> ID：10642344
> 
> 赞同：3
> 
> 时间：2012-05-17T19:33:22.670
> 
> 标签：mysql, sql, group-by

我在数据库中有一个按时间存储日志数据的表。一天之内，数据库中可能有一百万行。时间没有任何固定的间隔。它有几个索引，包括时间。我想要做的是构建一个查询，该查询将返回一组行，每个时间间隔一行。例如，我可以执行查询以在一天内每 15 分钟返回 1 行。这将返回 24*60=96 行。返回的每一行实际上是请求间隔之前数据库中最近的行（因为数据库中的数据将不等于请求的间隔）。

我不知道该怎么做。我不能只为一组特定的索引和时间间隔查询所有行，因为它会将超过 1 GB 的数据加载到内存中，这太慢了。有没有任何有效的方法可以使用 SQL 来做到这一点。我正在使用 MySQL 数据库。我愿意更改表索引/等...

```
TIME

11:58
12:03
12:07
12:09
12:22
12:27
12:33
12:38
12:43
12:49
12:55 
```

如果我想从 12:00 到 1:00 每隔 15 分钟查询一次，我会回复：

```
11:58 (nearest 12:00)
12:09 (nearest 12:15)
12:27 (nearest 12:30)
12:43 (nearest 12:45)
12:55 (nearest 1:00) 
```

如果它更容易，我还可以将时间存储为数字（即自 1970 年以来的毫秒）。在上面的查询中，这将是 900000 毫秒的间隔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:01:30.787

所以，我想过这样的事情：

```
SELECT 
  MIN(timeValue)
FROM e
GROUP BY (to_seconds(timeValue) - (to_seconds(timeValue) % (60 * 5))) 
```

..会为你做，但这只会返回整个表的 MIN(timeValue)。如果四舍五入到最接近的 5 分钟的秒数在其自己的列中，则它可以工作。

请参阅[SQL 小提琴](http://sqlfiddle.com/#!2/370e2/3)

根据安迪里编辑，这有效：（[http://sqlfiddle.com/#!2/bb870/6](http://sqlfiddle.com/#!2/bb870/6)）

```
SELECT MIN(t)
FROM e
GROUP BY to_seconds(t) DIV (60 * 5) 
```

但这只是给出了一行：（[http://sqlfiddle.com/#!2/bb870/7](http://sqlfiddle.com/#!2/bb870/7)）

```
SELECT MIN(t)
FROM e
GROUP BY to_seconds(t) - (to_seconds(t) % (60 * 5)) 
```

有谁知道为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:59:30.960

I can't think of a good way to do it all in one query. Perhaps someone else can think of a better way, but perhaps you could use something like this:

```
$startTime = mktime(12, 0);
$endTime = mktime(13, 0);
$queries = array();
for ($i = $startTime; $i <= $endTime; $i += 900)
    $queries[] = "SELECT MAX(timeValue) FROM table1 WHERE timeValue < '". date("G:i", $i) ."'";

$query = implode("\nUNION\n", $queries); 
```

* * *

I just realized that this assumes that you are using PHP. If you are not, then just use the resulting query, which will look like:

```
SELECT MAX(timeValue) FROM table1 WHERE timeValue < '12:00'
UNION
SELECT MAX(timeValue) FROM table1 WHERE timeValue < '12:15'
UNION
SELECT MAX(timeValue) FROM table1 WHERE timeValue < '12:30'
UNION
SELECT MAX(timeValue) FROM table1 WHERE timeValue < '12:45'
UNION
SELECT MAX(timeValue) FROM table1 WHERE timeValue < '13:00' 
```

Not sure if the `<` comparison will work 100% correctly with these string values, but I definitely think it would be a good idea to switch them to unix timestamps (or ms since 1970, if you need that much granularity). I have found it's always easier to work with integer values for date/time instead of strings.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:47:48.030

我认为使用函数非常容易，而且我没有注意到很大的性能影响，尽管游标可能会更好地执行，具体取决于两次之间的行数。

```
CREATE TABLE TEST_TIMES (EventTime datetime)
-- skipping INSERTS of your times

CREATE FUNCTION fn_MyTimes ( @StartTime datetime, @EndTime datetime, @Minutes int )
    RETURNS @TimeTable TABLE (TimeValue datetime)
AS BEGIN
    DECLARE @CurrentTime datetime
    SET @CurrentTime = @StartTime
    WHILE @CurrentTime <= @EndTime
    BEGIN
        INSERT INTO @TimeTable VALUES (@CurrentTime)
        SET @CurrentTime = DATEADD(minute, @Minutes, @CurrentTime)
    END
    RETURN
END

CREATE FUNCTION fn_ClosestTime ( @CheckTime datetime )
    RETURNS datetime
AS BEGIN
    DECLARE @LowerTime datetime, @HigherTime datetime

    SELECT @LowerTime = MAX(EventTime)
    FROM TEST_TIMES
    WHERE EventTime <= @CheckTime

    SELECT @HigherTime = MAX(EventTime)
    FROM TEST_TIMES
    WHERE EventTime >= @CheckTime

    IF @LowerTime IS NULL RETURN @HigherTime -- both null?  then null
    IF @HigherTime IS NULL RETURN @LowerTime

    IF DATEDIFF(ms, @LowerTime, @CheckTime) < DATEDIFF(ms, @CheckTime, @HigherTime)
        RETURN @LowerTime
    RETURN @HigherTime
END

SELECT TimeValue, dbo.fn_ClosestTime(TimeValue) as ClosestTime
FROM fn_MyTimes('2012-05-17 12:00', '2012-05-17 13:00', 15) 
```

结果：

```
TimeValue               ClosestTime
----------------------- -----------------------
2012-05-17 12:00:00.000 2012-05-17 11:58:00.000
2012-05-17 12:15:00.000 2012-05-17 12:09:00.000
2012-05-17 12:30:00.000 2012-05-17 12:27:00.000
2012-05-17 12:45:00.000 2012-05-17 12:43:00.000
2012-05-17 13:00:00.000 2012-05-17 12:55:00.000 
```

# python - 仅在 Python 中替换未引用的单词

> ID：10642346
> 
> 赞同：3
> 
> 时间：2012-05-17T19:33:27.540
> 
> 标签：python

我正在寻找一种替换单词的方法，但是只有当它没有被引号包围时。

例如替换`Hello`为`Hi`

`Hello 'Hello' Nothing`→`Hi 'Hello' Nothing`

由于`'Hello'`在引号中，它不会被替换，但第一个会被替换，`Hello`因为它没有被引号包裹。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:44:19.943

正则表达式很棒：

```
>>>import re

>>>expression = re.compile("(?!(\"|'))Hello(?!(\"|'))")
>>>expression.sub("Hi",'This string says "Hello" and Hello')

This string says "Hello" and Hi 
```

唯一的问题是它也无法替换“Hello and Hello”，如果这成为问题，您可以为它们添加特定案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:42:49.480

考虑使用[正则表达式](http://docs.python.org/library/re.html)（不是唯一的方法，但我会这样做）。

```
In [2]: print s
Hello 'Hello' Nothing
In [3]: import re
In [4]: re.sub("(?<!')Hello(?!')", 'Hi', s)
Out[4]: "Hi 'Hello' Nothing" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:50:58.643

使用正则表达式：

```
>>> import re
>>> re.sub(r'([^"\']|^)Hello([^"\']|$)', r'\1Hi\2', "Hello mate")
'Hi mate'
>>> re.sub(r'([^"\']|^)Hello([^"\']|$)', r'\1Hi\2', "'Hello' mate")
"'Hello' mate" 
```

`'([^"\']|^)Hello([^"\']|$)'`表示“ *Hello*字符串被不同于单引号或双引号的东西包围，或者位于行的开头或结尾”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:45:10.590

这适用于您的测试用例。

```
import re
foo = "Hello 'Hello' Nothing"
mt = re.search(r"[^']Hello(\s+.*)", foo)
if mt:
   foo = 'Hi' + match.group(1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T19:41:43.680

尝试这个：

```
import re

def callback(match):
   rep = 'Hi'
   return match.group(1)+rep+match.group(2)

your_string = "Hello 'Hello' Nothing"
print re.sub("([^\']|^)Hello([^\']|$)", callback, your_string) 
```

这将匹配`Hello`被任何内容包围的单词，除了`'`（`^`in`[]`表示除此之外的任何内容）。我还添加了`|^`and`|$`来匹配字符串末尾或开头的单词`Hello`。

它将替换为括号中的第一部分以及 Hi 和第二部分（无论它们是什么）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T19:42:58.580

使用 substring 函数查找要替换的单词的所有出现，对于每个单词，查看 substring 函数返回的内容之前的一个索引，并查看它是否是引号。

例如。“”你好'你好'没什么”

子字符串函数返回 0 -- 所以当然没有引号 子字符串函数返回 6 -- 检查字符串 [5] -- 有一个引号，寻找下一次出现

您如何继续使用 substring 函数进行检查？像这样的东西：

```
startindex=0
while(!done):
      index=substr(string, startindex)
      if(str[index-1] == "'")
            startindex=index 
            continue 
```

从这里你会明白的

# fonts - 替代字体和文字自动化

> ID：10642357
> 
> 赞同：1
> 
> 时间：2012-05-17T19:34:07.713
> 
> 标签：fonts, office-interop, postscript

我有一个使用非标准字体的 word 文档。它不是嵌入式的，而是安装在有问题的机器上。在 Word 2010 中，当我在指定某个打印机驱动程序（HP Color LaserJet 2800 系列 PS）的同时将其打印到后期脚本文件时，该字体被嵌入（子集）就好了。那就是我从 Word 应用程序本身执行此操作。

如果我尝试使用 msword::_Document::Printout 以编程方式执行此操作并指定相同的打印机驱动程序，则相关字体将被其他字体替换。我知道在这两种情况下都使用相同的打印机驱动程序。为这两种方法生成的 .ps 文件在顶部列出了打印机驱动程序名称。是否有某种原因以这种方式通过自动化会替代字体但通过应用程序本身却不会？

```
CComVariant vIgnore; 
vIgnore.vt = VT_ERROR;
vIgnore.scode = DISP_E_PARAMNOTFOUND;

CComVariant vFalse = false;
CComVariant vTrue = true;
CComVariant vOutputFile(m_csTempOutputFile);
CComVariant vOneCopy((int)1);  

 ...
 ....

 m_piApp->SetActivePrinter( (LPCTSTR) csPrinterName); 

 m_Doc.PrintOut(
        &vFalse,//Background, return control while printing? FALSE
        &vFalse,//Append, append output to existing file? FALSE, overwrite file
        &vIgnore,//Range, the page range
        &vOutputFile,//OutputFileName, name of printtofile file
        &vIgnore,//From, starting page (ignored)
        &vIgnore,//To, ending page (ignored)
        &vIgnore,//Item, what content to print, DEFAULT
        &vOneCopy,//Copies, number of
        &vIgnore,//Pages, page range
        &vIgnore,//PageType, even only, odd only, etc
        &vTrue,//PrintToFile, TRUE
        &vIgnore,//Collate,
        &vIgnore,//ActivePrinterMacGX, (mac feature only)
        &vIgnore,//ManualDuplexPrint,
        &vIgnore,//PrintZoomColumn, (printing several pages on one page)
        &vIgnore,//PrintZoomRow,
        &vIgnore,//PrintZoomPaperWidth,
        &vIgnore);//PrintZoomPaperHeight, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:00:00.657

在我看到这一点的某些系统上，重新启动服务器解决了我的问题。有时在安装真字体后，您似乎需要重新启动服务器。

事实上，在我的某些系统上，重新启动后，我确实看到字体被嵌入了。为什么通过 Word 应用程序做同样的事情不需要重新启动，但通过自动化却需要 - 我不知道。

[http://www.idautomation.com/kb/ttf-printing.html](http://www.idautomation.com/kb/ttf-printing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:19:16.610

您使用的打印机驱动程序有各种影响字体处理的设置。他们控制...

*   ...是否嵌入字体（*“将字体下载到打印机”*或*“使用打印机字体”*）和
*   ...**如果**它是嵌入的，那​​么它是如何完成的（*'As TrueType'*、*'Convert to Outlines'*、*'使用替换表'*等）

**警告：**我现在无法在真正的 Windows 系统上查找它，我从记忆中引用了这些要点。

现在这些打印机驱动程序设置可以由管理员设置，这将使它们成为所有用户的默认设置。

反过来，每个用户也可以将这些设置更改为不同的模式。

现在我的*理论*来了：

*   当您从 Word 应用程序进行测试时，您肯定会在以特定用户身份登录时进行测试，并且该用户的设置将应用于生成的 PostScript。

*   当您以编程方式进行测试时，您可能会遇到此过程作为*另一个*不同的用户运行的情况，该用户启用了不同的设置。

这条赛道当然值得关注，即使只是为了排除这种可能性......

# asp.net - 避免动态创建控件的回发

> ID：10642358
> 
> 赞同：0
> 
> 时间：2012-05-17T19:34:11.360
> 
> 标签：asp.net

我有一个页面，当用户浏览一系列问题时，动态生成控件。

当他们完成表单时，他们单击提交按钮，我收集他们输入的信息并将其存储在数据库中。

目前，我正在创建其中的几个控件

```
.AutoPostBack = True 
```

因此，每次用户将文本和选项卡更改到下一个字段时，都会发生回发，并且下一个字段会失去焦点。

如果我设置

```
.AutoPostBack = False 
```

然后焦点问题就消失了，但是最后当我收集数据时，用户在这些控件中输入的任何内容实际上都不适用于客户端代码，因为它还没有发布。

我想做以下其中一项：

1.  最后有一个大回发
2.  在我离开控件时进行标准回发，而不会失去对控件的关注
3.  还有什么我没想到的……？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:49:44.980

自从我弄乱这些已经有一段时间了，但我记得需要重新添加动态控件（页面加载或初始化？我忘记了），确保我保证每个动态添加的控件的 ID 与它获得时相同在我可以访问任何用户从 ViewState 输入的数据之前添加。

我还记得使用 SessionState 来跟踪我添加的内容，因此我知道我需要为 ViewState 构建什么。

当时感觉就像现在描述它听起来一样笨拙。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:25:16.040

动态创建控件的关键是***在***页面生命周期中添加控件。要保留视图状态并让动态控件维护发布的值，需要在不迟于`OnInit()`.

***此外，需要在每次***页面加载时重新添加控件，无论是否回发。关于@KennyZ 所说的保证每个控件的 ID 相同，只要您以相同的顺序添加相同数量的控件，.NET 将保证 ID 相同。

关于`AutoPostBack`属性，通常只有当我们想要执行一些由用户更改控件值触发的操作时才将其设置为 True。一个常见的例子是下拉列表；根据用户选择的内容，不同的数据会被加载到页面的详细信息部分。因此，每次用户更改值时，我们都希望回发并获取新数据以进行显示。

根据我对您的用例的理解，我建议对整个表单进行一次回发。

# facebook - Facebook Js FB.ui 如何更改消息参数？

> ID：10642359
> 
> 赞同：0
> 
> 时间：2012-05-17T19:34:16.790
> 
> 标签：facebook, facebook-ui

```
var obj = {
 method: 'feed',
 link: mylinkt,
 picture: 'http://fbrell.com/f8.jpg',
 name: 'Poonkt.us - My new Quote!',
 message: 'Test?', //<<--cant I access this?
 description: desc
};

FB.ui(obj); 
```

有没有可能我可以更改 Facebook 提要对话框的消息参数？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:59:03.720

`Message` is not a parameter according to the [docs](https://developers.facebook.com/docs/reference/dialogs/feed/) and it does even show up during the feed

Using api you cannot have a default value in message box

[DEMO](https://apps.facebook.com/fbrelll/saved/cfe42246d6f3fc302c60ae10c80c7263) (the demo is to say that even with a message parameter the feed does not contain any message)

Hope this helps

# c# - 网页抓取 - 如何读取基于 swf 的网站内容

> ID：10642373
> 
> 赞同：0
> 
> 时间：2012-05-17T19:35:32.190
> 
> 标签：c#, web-scraping

要阅读我使用 WebClient 的 html 站点的内容：

```
WebClient client = new WebClient();
byte[] html      = client.DownloadData(url);
UTF8Encoding utf = new UTF8Encoding();
return utf.GetString(html); 
```

当网站像 www.bet365.com 时的问题。赔率以瑞士法郎显示。我如何阅读赔率？我无法通过 Ctrl+U 或 Firebug 在 Mozilla 中显示网站内容。在 IE (F12) 中检查工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:45:26.327

据我所知，您无法抓取 Flash 内容。

但是，您可以做的是尝试使用代理工具（例如[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/) ）嗅探 .swf 发起的 HTTP 流量，并祈祷它没有被加密。

通过分析这些 HTTP 请求，您将能够提取检索数据的请求并使用`WebClient`或自动化它们`HttpWebRequest`。

但是，在自动提取数据之前，请确保它被允许并且您没有违反任何网站条款和条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:34:05.047

他们有一个 xml 提要，他们提供给附属公司，没有人在抓取他们的实际网站

# java - 读取 excel 文件和文本文件有什么区别吗？

> ID：10642374
> 
> 赞同：0
> 
> 时间：2012-05-17T19:35:38.113
> 
> 标签：java, excel, text

我有一个 Excel 类型的文件，我正在尝试读取它并用每一行创建一个对象并将其插入到我的数据结构中。我知道如何使用常规文本文档来完成所有这些工作。Excel文件是否相同？我可以在哪里使用第一个垂直行作为第一个变量，第二个作为第二个变量，就像我在文本文档中阅读一样？

这似乎比它的价值要麻烦得多。有没有一种不用复制粘贴就可以将excel转成word的方法？该文件很大，当我尝试复制和粘贴时会冻结单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:39:25.510

excel（和大多数其他类型）文件是二进制文件，它们有自己的结构，您必须：

*   知道它的内部结构才能达到内容。

*   使用外部库 API 来处理它（google for java excel api）

您不能仅仅将其视为文本文件，因为它不是。

更新：另一种方法是使用 excel 文件作为 ODBC 源并使用 SQL 来访问它，如果它足够规则的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:37:57.570

它们当然不同于文本文件。如果您希望能够将它们视为电子表格，您将需要一个可以读取和解释它们的库。

我建议使用像 Andy Khan 的 JExcel 或 Apache POI 之类的东西来读取 Excel 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:38:14.123

您需要使用 Apache-POI 来读取 excel 文件，而且一次也需要一个单元格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:38:18.347

Excel 支持许多文件，包括 CSV，它是一个文本文件。

最常见的 Excel 文件以 .XLS 结尾，这是一种二进制编码，这是一种奇特的说法，即您从文件中读出的内容并不总是文本。这意味着您需要了解 .xls 文件格式的结构，才能将特定位置的位映射到特定含义。

# c# - 需要为 C++/CLI 创建什么类型的项目？

> ID：10642375
> 
> 赞同：5
> 
> 时间：2012-05-17T19:35:43.767
> 
> 标签：c#, visual-studio-2008, visual-c++, c++-cli

我正在为 C++/CLI 中的本机 C++ 方法编写一个包装器，它将它们暴露给 C#。现在我正在使用 Visual Studio 2008。任何人都可以告诉我我需要创建什么类型的项目，以便我的包装器可以暴露给 C#。我在 Visual Studio 2008 中看到 Visual C++ 下有不同类型的项目--->CLR---->

```
class library,
CLR Empty Project,
Windows form control library,
CLR Console Application,
Windows Forms Application,
Windows Service 
```

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T19:41:03.047

您必须创建类库类型的项目。最重要的是在Project Properties -> Configuration Properties -> General中指定“Common Language Runtime Support”选项（设置为“Common Language Runtime Support (/clr)”）

这将允许您使用

```
#pragma managed
... use your native stuff here
#pragma unmanaged 
```

编译指示和与本机 .lib 文件的链接。

有关详细信息，请参阅此链接

[http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867/Consuming-Unmanaged-C-Class-Libraries-from-NET-Clients.htm](http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867/Consuming-Unmanaged-C-Class-Libraries-from-NET-Clients.htm)

64 位构建有一个问题（本文未提及）。对于 64 位，“链接器->输入- >强制符号引用”必须设置为“ *_DllMainCRTStartup”，对于*32 位，必须设置为“_DllMainCRTStartup@12”。

# c# - 处理来自外部系统的结果代码查找 - 如果需要，抛出异常

> ID：10642377
> 
> 赞同：2
> 
> 时间：2012-05-17T19:35:57.630
> 
> 标签：c#, design-patterns, exception-handling

我有一个使用 xml 消息使用 http post/get 的应用程序界面。接口系统返回带有结果代码和请求数据的消息。结果代码分为 3 部分，代码和按类型分组的子代码（登录、请求...）。一些代码/子代码是登录成功等消息，其他是无效登录或无效消息请求等异常。

我正在尝试找到一种方法来处理结果代码并在需要时抛出带有消息的异常。如果结果代码仅供参考，只需将我的返回消息中的消息应用到 api 使用者即可。我正在查看责任链，但在试图通过它时遇到了脑块。

示例代码
类型....代码..子代码....描述
登录...0.....0..........请求成功
登录...0.....nn .........登陆成功。距离到期还有“nn”天
登录...21....1..........登录失败。（用户名/密码错误）。
登录...21....4........已经登录
登录...21....5..........系统资源不可用。分配安全对象失败
Request.50....2........service Invalid syntax
Request.50....3..........service Invalid attributes
Request. 50....4........服务批处理文件已存在

带有结果代码（代码、子代码）的结果消息：
loginmanagerresult 0, 0 是信息性的，all good
loginresult 0, 24855 是帐户好，
如果 loginresult 有 1、2 则不会过期，抛出异常帐户被锁定

```
<?xml version="1.0" encoding="UTF-8"?>  
    <loginmanagerresult sessionname="ALBHMROC9040RL1" code="0" subcode="0">
        <loginresult code="0" subcode="24855" sectoken="f1044f0aaad65ef2e28d4edc0663716f00000000"></loginresult>
    </loginmanagerresult> 
```

我将对象反序列化为以下内容：无法更改、扩展\继承，但没有其他属性\函数。

```
public class LoginResult
{

    private string code = "";
    [XmlAttribute("code")]
    public string Code
    {
        get { return code; }
        set { code = value; }
    }

    private string subCode = "";
    [XmlAttribute("subcode")]
    public string SubCode
    {
        get { return subCode; }
        set { subCode = value; }
    }

    private string secToken = "";
    [XmlAttribute("sectoken")]
    public string SecToken
    {
        get { return secToken; }
        set { secToken = value; }
    }

}

[XmlRoot("loginmanagerresult")]
public class LoginManagerResult
{

    private string sessionName = "";
    [XmlAttribute("sessionname")]
    public string SessionName
    {
        get { return sessionName; }
        set { sessionName = value; }
    }

    private string code = "";
    [XmlAttribute("code")]
    public string Code
    {
        get { return code; }
        set { code = value; }
    }

    private string subCode = "";
    [XmlAttribute("subcode")]
    public string SubCode
    {
        get { return subCode; }
        set { subCode = value; }
    }

    private LoginResult loginResult = null;
    [XmlElement("loginresult", IsNullable = true)]
    public LoginResult LoginResult
    {
        get { return loginResult; }
        set { loginResult = value; }
    }

    private QueryCapabilitiesResult queryCapabilitiesResult = null;
    [XmlElement("querycapabilitiesresult", IsNullable = true)]
    public QueryCapabilitiesResult QueryCapabilitiesResult
    {
        get { return queryCapabilitiesResult; }
        set { queryCapabilitiesResult = value; }
    }

    private GetMotdResult getMotdResult = null;
    [XmlElement("getmotdresult", IsNullable = true)]
    public GetMotdResult GetMotdResult
    {
        get { return getMotdResult; }
        set { getMotdResult = value; }
    }

    private LogOutResult logOutResult = null;
    [XmlElement("logoutresult", IsNullable = true)]
    public LogOutResult LogOutResult
    {
        get { return logOutResult; }
        set { logOutResult = value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:00:08.510

您要实现的是“模式匹配”机制，责任链模式是 OOP 中同一事物的另一种名称。C# 中没有内置的方法来进行结构模式匹配，尽管您可以在 SO 或其他地方查看，[但有一些通用的想法](https://stackoverflow.com/questions/156467/switch-pattern-matching-idea)。

如果这只是一次性的事情，您可以尝试制作一个规则列表，看起来像是成对的（谓词，动作）。然后你的 Match 方法会一个一个的遍历规则，第一个 Predicate 返回 true 的规则是匹配的，它的 Action 会被执行。

为什么这可能比责任链更好？好吧，您不需要很多额外的对象，您可以使用匿名 lambda 来指定谓词和操作，然后您的规则列表将恰好适合一页代码，易于阅读、更改和审查。

下面是一个可以进一步改进的快速示例。当您将添加更多规则时，您可以通过将一些常见谓词或部分谓词以及一些操作或部分操作提取到命名委托中来进一步提高可读性。

```
public class LoginResult
{
    public string Code { get; set; }
    public string SubCode { get; set; }
    public string SecToken { get; set; }
}

public static IDictionary<Predicate<LoginResult>, Func<LoginResult, string>> rules =
    new Dictionary<Predicate<LoginResult>, Func<LoginResult, string>>
        {
            { lr => lr.Code == "0" && lr.SubCode != "0", result => "Login successful, days left till expiration: " + result.SubCode },
            { lr => lr.Code == "0", _ => "Login successful" },
            { lr => lr.Code == "21", _ => ThrowInvalidOperation("Login failed. (Userid/password wrong).") },
        };

static string ThrowInvalidOperation(string message)
{
    throw new InvalidOperationException(message);
}

static string Match(LoginResult result)
{
    foreach (var rule in rules)
    {
        if (rule.Key(result))
        {
            return rule.Value(result);
        }
    }

    throw new ArgumentException("Matching rule not found", "result");
} 
```

# mysql - 如何避免这种复杂的查询？

> ID：10642378
> 
> 赞同：0
> 
> 时间：2012-05-17T19:35:59.877
> 
> 标签：mysql, database, database-design

我正在设计一个像 pinterest 这样的网站（用于学习），我想知道我必须在主页上做什么查询才能显示用户的流。

我创建了这 6 个表：

```
users
boards
pictures
boards_pictures ( many-to-many table )
followers
comments 
```

在家里，我做这个查询来获取所有关注者的照片。

```
SELECT users.username, pictures.link, comments.comment, boards.title
FROM boards_pictures, pictures, followers, users, comments, boards 
WHERE ( boards_pictures.id_user = followers.id_following ) 
  AND ( boards_pictures.id_picture = pictures.id ) 
  AND ( followers.id_user = $_session['userid'] ) 
  AND ( users.id = followers.id_following )
  AND ( comments.picture_id = pictures.id )
  AND ( boards.id = boards_pictures.boards_id ) 
```

有没有办法避免这种复杂的查询（6 个表的 JOIN）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:15:18.907

以下是从您的查询中推导出的 DDL 语句：

```
CREATE TABLE users (id integer, username varchar(30));
CREATE TABLE boards (id integer, title varchar(30));
CREATE TABLE pictures (id integer, link varchar(90));
CREATE TABLE boards_pictures (
  id_user integer,
  id_picture integer,
  boards_id integer);
CREATE TABLE followers (id_user integer, id_following integer);
CREATE TABLE comments (picture_id integer, comment varchar(350)); 
```

您在此处混合列命名样式，比较、`users.id`和（最后 2 个非常具有误导性）。您拥有的表越多，您就越需要关注列的命名方式。最好坚持一个共同的模式，或者在我看来是最合适的。`followers.id_user``comments.picture_id``board_pictures.id_picture``picture_id``user_id`

您的查询并不复杂，除非您使用的是[隐式连接表示法](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)。这不是推荐的方式，因为有可能会错过一些谓词并最终得到 2 个（或更多）表的[笛卡尔积](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)。

您的查询可以这样重写：

```
SELECT u.username, p.link, c.comment, b.title
  FROM boards_pictures bp
  JOIN pictures p ON p.id = bp.id_picture
  JOIN followers f ON bp.id_user = f.id_following
  JOIN users u ON u.id = f.id_following
  JOIN comments c ON c.picture_id = p.id
  JOIN boards b ON b.id = bp.boards_id
WHERE f.id_user = $_session['userid']; 
```

正如您现在看到的，查询非常简单，并且只有一个谓词。我在[SQL Fiddle](http://www.sqlfiddle.com/#!2/cea8b/2)上创建了一个没有数据的测试平台。

在我看来，您的结构非常好。无需更改表设计或此查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:39:27.617

它实际上是一个非常简单的查询，只是很多表。

我不会尝试在一个大查询中检索所有内容，这会导致输出中出现大量重复数据，我会执行一个查询来检索用户/董事会/图片信息，另一个查询关注者，另一个查询来获取评论。

此外，您可以使用 ANSI 语法以获得更好的可读性。

# iphone - UISwipeGestureRecognizer 的异常行为

> ID：10642383
> 
> 赞同：0
> 
> 时间：2012-05-17T19:36:26.177
> 
> 标签：iphone, objective-c, ios, ipad

我遇到了一些不寻常的行为`UISwipeGestureRecognizer`。第一次滑动被正确检测到，但第二次滑动没有。然后正确检测到第三次滑动，但未正确检测到第四次。我有两个滑动手势识别器，一个用于左侧，一个用于右侧。这是代码：

**.h 文件**

```
- (IBAction)handleSwipe:(UISwipeGestureRecognizer *)recognizer; 
```

**.m 文件**

```
- (IBAction)handleSwipe:(UISwipeGestureRecognizer *)recognizer {
    if (recognizer.direction == UISwipeGestureRecognizerDirectionLeft) {
        NSLog(@"you swiped left");
        [self spinSunCounterClockwise];
    } else {
        NSLog(@"you swiped right");
        [self spinSunClockwise];
    }

} 
```

因此，例如，如果我第一次*向左滑动*`spinSunCounterClockwise`，则调用，但如果我*再次向左滑动*，`spinSunClockwise`则调用。

另一个例子是，如果我第一次*向左滑动*`spinSunCounterClockwise`，就会调用。如果我*向右滑动*，`spinSunCounterClockwise`会再次调用。

请问有什么帮助吗？

**编辑1：**一种纺纱方法

```
-(void) spinSunCounterClockwise
{
    [UIView animateWithDuration:2.0f animations:^{
        imgSun.transform = CGAffineTransformRotate(imgSun.transform, 3.142);
    } completion:^(BOOL finished) {

    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:08:31.877

当您将视图旋转 180° 时（顺便说一句，您应该使用`M_PI`而不是`3.142`），之后视图会颠倒过来，所以之前左边的现在是右边，反之亦然。

因此，当您第一次向左滑动时，第二次向左滑动（从您的角度来看）实际上被识别为向右滑动，而向右滑动实际上是向左滑动，这解释了您观察到的行为。

在两个手势（360° 旋转）之后，您的视图再次处于其原始方向，因此第三个手势的识别再次“正常”。

# labview - LabVIEW步进电机

> ID：10642394
> 
> 赞同：0
> 
> 时间：2012-05-17T19:37:44.747
> 
> 标签：labview

您好，我必须在LabVIEW中编写一个程序来控制步进电机。我正在使用 LabVIEW 版本 11，并且我有一个用 LabVIEW 版本 5 编写的图表（我相信），但我无法找到（识别）那里的所有功能。有人可以给我指出来吗，拜托。我将上传图表的屏幕截图： [labview 5 http://desmond.imageshack.us/Himg6/scaled.php?server=6&filename=diagramu.jpg&res=landing](http://desmond.imageshack.us/Himg6/scaled.php?server=6&filename=diagramu.jpg&res=landing) 这就是我所拥有的： [labview mine http://desmond .imageshack.us/Himg710/scaled.php?server=710&filename=diagram2.jpg&res=landing](http://desmond.imageshack.us/Himg710/scaled.php?server=710&filename=diagram2.jpg&res=landing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:44:48.927

左边的东西是一个数组，你有一个数组常量，里面没有数据类型。它似乎只是十六进制常量 - 只需拖放它们并用您需要的数据填充它们（基本上是步进电机模式的表格）。

下一张我认不出来了，图片太模糊了，但是如果上面有I8，那就是一个指标，数据类型是I8。TF 是布尔数组输出的旧外观。您已将该 AA 或其他任何内容（取决于模式/查看这些表格）转换为布尔数组，这是您提供给电机的数据。

粉红色的零是一个字符串常量，其中包含零。从上下文来看，我会说您使用它来访问第 0 个通道或第 0 个测量卡。DigPort 可能是一种非常古老的 DAQ 通信方式，但我不太确定，已经有几年了。你用NI的一些测量卡吗？如果是这样，您现在需要寻找 DAqmx。您似乎还缺少第一个模数的 8 。而且模数 10 代码似乎是一些毫无意义的装饰。

无论如何，我敦促您以不同的方式执行此操作，并实际尝试了解您发送到端口/您的卡/您的输出模式是什么类型的数据。旧代码看起来好像可以工作，但这不是您编写清晰易读的现代 LV 代码的方式。如果您使用的是 NI 硬件，只需将 google DAQmx 与步进电机结合使用即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:26:31.040

旧代码通过设置单相来移动步进电机。这是通过在每次迭代时通过*Dig 端口*VI 输出位掩码来完成的。这些位由蓝色数组表示为十六进制数：我想它有 8 个项目，因为它是模 8 访问的。

这反过来意味着两件事：

1.  数组的内容是基本的，如果硬件已经修改，需要更改；
2.  如果您更改了处理数字输出的方式（或者如果没有任何更改，则可以访问旧的*Dig 端口*VI） ，您应该使用正确的 VI 而不是*Dig 端口*。

 *您标记的其他内容是调试汤。

可以在此处找到使用“代码”和描述的更简洁的方式来处理步进电机：

[http://forums.ni.com/t5/Digital-IO/Drive-Stepper-Using-Digital-output-with-Pulse-sequence/td-p/683725](http://forums.ni.com/t5/Digital-I-O/Drive-Stepper-Using-Digital-output-with-Pulse-sequence/td-p/683725)*

# amazon-emr - 使用 aws emr 定期处理数据

> ID：10642398
> 
> 赞同：1
> 
> 时间：2012-05-17T19:38:05.450
> 
> 标签：amazon-emr, emr

[我想我有一个与此线程](https://stackoverflow.com/questions/9838652/amazon-mapreduce-best-practices-for-logs-analysis)中提出的问题类似的问题，但我会尝试更具体...

使用 aws 定期处理数据的最佳方法是什么？例如，我想每分钟处理一次聚合到 S3 中的一些报告。最好的方法是通过一些脚本每分钟向现有作业添加一个步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:04:22.177

好吧，现在我将编写一个脚本：

*   从 aws 获取作业流详细信息
*   如果作业处于等待状态 - 向作业添加新步骤
*   由于我使用的是 aws PHP AmazonEMR，因此我将添加一些代码来处理最大 256 步的限制（例如，使用相同的参数创建新的作业流程，如果我有超过 200 个步骤，则终止现有的作业流程）。

一旦我准备好代码，我会更新这个线程，稍后我会在看到它在生产中保持几周的情况后更新这个线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:43:57.807

我会使用引导操作在主节点上安装 cron 作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T22:20:52.357

考虑一下（新的）AWS Lambda 服务。您上传脚本并设置要监控的 S3 存储桶/文件夹。每次将新输入添加到文件夹时都会运行该代码，并根据需要启动 EC2 实例以满足需求。

[https://aws.amazon.com/lambda/](https://aws.amazon.com/lambda/)

# asp.net-mvc-3 - 从视图将值传递给控制器 函数

> ID：10642401
> 
> 赞同：0
> 
> 时间：2012-05-17T19:38:13.600
> 
> 标签：asp.net-mvc-3, jquery

我正在尝试创建一个视图，用户可以在其中选择一天要玩多少小时（游戏应用程序）以及从哪个小时开始以及以哪个间隔开始。但我正在努力从视图中执行控制器操作方法。出了什么问题，因为如果我点击按钮什么也没有发生

我的观点：

```
<script type="text/javascript">
   $('#genhours').click(function () {
        var selectedId=$('#dayID').val();
        var count = $('#count').val();
        var starttime = $('#starttime').val();
        var interval = $('#interval').val();
        var dayId=

        $.ajax({
            url: "../Day/MakeHours",
            data: { 'dayId': selectedId, 'count': count,'starttime':starttime, 'interval':interval },
            type: "post",
            cache: false,
                       },
            error: function (xhr, ajaxOptions, thrownError) {
                $('#lblError').text("Error encountered while saving the comments.");
            }
        });
    });

</script> 
```

形式：

```
<div id="dayID" >
   @Html.HiddenFor(model => model.dayID)
</div>

<div class="display-label">
    Hour per Day 
</div>
<div class="display-field">
    <input id="count" />
</div>

<div class="display-label">
    StartTime 
</div>
<div class="display-field">
    <input id="starttime" />
</div>

<div class="display-label">
    Interval 
</div>
<div class="display-field">
    <input id="interval"/>
</div>
<br />
</div>
<p>
    <input type="submit" id="genhours" value="Generate Hours"  />
    <input type="button" id ="cancel" title="cancel" onclick="location.href='@Url.Action("Index")'" />
</p> 
```

我的控制器功能：

```
 [HttpPost]
 public ActionResult MakeHours(int dayId, int count, string starttime, int interval)
 {
     for (int i = 0; i < count; i++) 
     {
         Hour hour = new Hour();
         hour.day = db.Days.Find(dayId);
         if( i==0)
             hour.time = starttime;
         else
             hour.time = starttime+interval;
             hour.booked = false;
             db.Hours.Add(hour);
             db.SaveChanges();
         }
         return RedirectToAction("Hour/Index");   
     } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:36:14.610

我知道这有点老了......

javascript 中有几个语法错误 - 请参阅我为使其正常工作所做的更改。我已经对参数进行了硬编码，但它应该会有所帮助。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#genhours').click(function () {
            var selectedId = 1;
            var count = 2;
            var starttime = 3;
            var interval = 4;
            var dayId = 5;

            $.ajax({
                url: "../Test/MakeHours",
                data: { 'dayId': selectedId, 'count': count, 'starttime': starttime, 'interval': interval },
                type: "post",
                cache: false,
                error: function (xhr, ajaxOptions, thrownError) {
                    $('#lblError').text("Error encountered while saving the comments.");
                }
            });
        });
    });
</script> 
```

# iphone - UIActionSheet 在 UIPopoverController 中有 20 多个选项

> ID：10642414
> 
> 赞同：1
> 
> 时间：2012-05-17T19:39:19.670
> 
> 标签：iphone, ios, ipad, uipopovercontroller, uiactionsheet

在一个通用应用程序中，我有一个 UIView，它显示在 iPad 上的 iPhone 屏幕大小的弹出框控制器中，以及 iPhone/Touch 上的模态视图控制器中。

如果用户点击特定按钮，该 UIView 会显示一个包含 20 多个条目的 UIActionSheet。在 iPhone 上，操作表充满了屏幕，带有一个可滚动的“滚轮”式选项列表。然而，在 iPad 上，行为不正常：操作表再次呈现为轮式列表，但非常高；它将弹出框扩展到最大可能的高度，但操作表仍然高于弹出框。所以你最终得到的是一个高得离谱的弹出框，带有一个在顶部被部分切断的轮式列表，无法到达列表顶部的项目。请参阅下面的图片。

无论如何：理想情况下，我希望与您在 iPhone 中看到的完全相同的内容显示在该弹出框内，而无需更改弹出框的大小。那可行吗？

图片：展示操作表后的 iPhone 版本：

![提交操作表后的 iPhone 版本](../Images/bd19ed6b1d1bbcce6d8173db8b506a6f.png)

iPad 版本显示原始 UIview 与按钮按下：

![iPad 版本显示原始 UIview 与按钮按下](../Images/bf81486272d6ecc8f2c40ac7ec178dce.png)

按下按钮后的 iPad 版本，显示操作表：

![按下按钮后的 iPad 版本，显示操作表](../Images/9d7ff1a1b8a13b787c303db2750ba66a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:24:06.417

编辑：我在这里整理了一个更完整的解决方案[https://github.com/brandonschlenker/BSActionSheet](https://github.com/brandonschlenker/BSActionSheet)

这有点痛苦，老实说，我不确定这是否值得。如果 Apple 更改 UIActionSheet，所有这些都可能会中断。无论如何，这可能是一个解决方案......

您将需要继承 UIActionSheet 并根据其调整所有子视图和超级视图的大小。

在布局子视图中，我们将遍历视图并开始调整元素的大小以满足我们的需求。我首先注销了子视图列表以查找哪个元素是哪个元素。到目前为止，我已经找到了表格视图、圆角的表格视图框架、弹出框等。您仍然需要找到取消按钮并移动它。

```
- (void)layoutSubviews
{
    CGRect tableViewFrame = CGRectZero;
    for (id item in [self subviews])
    {
        if ([item isKindOfClass:[UIView class]])
        {
            UIView *v = (UIView *)item;
            v.frame = CGRectMake(v.frame.origin.x, v.frame.origin.y, self.frame.size.width, 320);

            for (UIView *subItem in [v subviews])
            {
                //table view of options
               if ([subItem isKindOfClass:[UITableView class]])
               {
                   subItem.frame = CGRectMake(subItem.frame.origin.x, subItem.frame.origin.y, subItem.frame.size.width, someNewHeightHere);
                   tableViewFrame = subItem.frame;
               }

                //table view image frame. this rounds the bottom corners
                if ([subItem isKindOfClass:[UIView class]] && subItem.tag == 3334)
                {
                    subItem.frame = CGRectMake(subItem.frame.origin.x, tableViewFrame.origin.y, subItem.frame.size.width, someNewHeightHere);
                }

                //this is the cancel buttons label. never could get this to do anything
                if ([subItem isKindOfClass:NSClassFromString(@"UIButtonLabel")])
                {
                        if (subItem.frame.size.width == 66)
                        {

                        }
                }
            }
        }
    }

    UIViewController *v = [self viewController];
    v.contentSizeForViewInPopover = CGSizeMake(self.frame.size.width, someNewHeightHere);    
} 
```

我还有一个方便的方法来获取视图父视图控制器。

```
 - (UIViewController *)viewController 
    {
        UIResponder *responder = self;
        while (![responder isKindOfClass:[UIViewController class]]) {
            responder = [responder nextResponder];
            if (nil == responder) {
                break;
            }
        }
        return (UIViewController *)responder;
    } 
```

# vb.net - Crystal 报告抛出“无效的打印机”错误，但仅适用于某些用户且仅适用于一份报告

> ID：10642416
> 
> 赞同：1
> 
> 时间：2012-05-17T19:39:23.563
> 
> 标签：vb.net, printing, crystal-reports

我们有一个应用程序允许用户打印使用水晶报表生成的批量文档。批次的打印报告有所不同，但批次总是通过重复以下步骤进行：生成报告，将其发送到打印机，更新屏幕以通知用户，并重置变量。

将打印机名称分配给该报告时，包含一个特定报告的批次会引发“无效的打印机”错误，但仅适用于某些用户并且仅在他们使用特定打印机时。使用完全相同的桌面和完全相同的打印机，许多用户可以在 100% 的时间内很好地打印此报告，而其他用户则有 %100 的时间失败。

从表面上看，这似乎是追踪权利问题的简单问题，但一旦深入挖掘，就会变得混乱。. .

没有此问题的用户可以在所有打印机上毫无问题地打印所有文档。有此问题的用户可以在除一台以外的所有打印机上打印除一台以外的所有文档。他们可以在出现故障的打印机上打印所有其他文档，还可以在任何其他打印机上打印故障报告。

这到底是怎么回事？似乎答案是报告设置和打印机访问的某种组合，但它没有任何逻辑意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T14:43:23.020

我要回答我自己的问题。. .

事实证明，如果您的机器上安装了 Visual Studio IDE，它会在打印非标准字符集时干扰某些打印机驱动程序。在我们的案例中，答案是根本不尝试从开发机器打印该文档。

# linq - 在 linq 连接中使用相等和不相等

> ID：10642421
> 
> 赞同：8
> 
> 时间：2012-05-17T19:39:40.957
> 
> 标签：linq, entity-framework

我正在尝试将以下 SQL 查询转换为 linq；

```
select Or.Amount, Usr.Name, Usr.Email
from [order] as Or
left join vw_AllUsers as Usr on Usr.UserId = Or.UserId and Usr.RoleName <> 'Admin' 
```

我找不到在同一个连接中使用**相等**和**不相等**的方法。如果**Usr.RoleName <> 'Admin'**是**Usr.RoleName = 'Admin'**，则 linq 语句可以这样写

```
var result =  from Or in context.orders
              join Usr in context.vw_AllUsers on 
              new { userid = Or.UserId, role = "Admin"}
              equals
              new { userid = Usr.UserId, role = Usr.RoleName}
              select ........ 
```

或者我可以在 linq 的一部分中处理它以获得相同的结果，如下所示

```
where !Usr.RoleName.Equals("Admin") 
```

但是可以在 linq 的连接部分中处理这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T19:44:14.747

LINQ 仅支持相等连接，没有办法在其`join`自身中使用不同的运算符。

正如您所指出的，您可以只使用一个`where`语句来达到相同的效果。如果您没有要加入的相等比较，则可以使用多个`from`子句。

[来自 MSDN](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/join-clause)：

> 运营`equals`商
> 
> * * *

子句执行`join`等值连接。换句话说，您只能基于两个键的相等性进行匹配。不支持其他类型的比较，例如“大于”或“不等于”。为了明确所有连接都是等连接，该`join`子句使用`equals`关键字而不是 == 运算符。`equals`关键字只能在子句中使用，`join`它与 == 运算符在一个重要方面不同。使用`equals`时，左键消耗外部源序列，而右键消耗内部源。外部源仅在左侧范围`equals`内，内部源序列仅在右侧范围内。

> 非等值连接
> 
> * * *

`from`您可以通过使用多个子句将新序列独立地引入到查询中来执行非等值连接、交叉连接和其他自定义连接操作。有关更多信息，请参阅[如何：执行自定义联接操作（C# 编程指南）](https://docs.microsoft.com/dotnet/csharp/linq/perform-custom-join-operations)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T10:41:14.483

可以实现不相等的连接，例如，

```
var result =  from Or in context.orders
          join Usr in context.vw_AllUsers on 
          new { userid = Or.UserId, IsNotAnAdmin = true}
          equals
          new { userid = Usr.UserId, IsNotAnAdmin = (Usr.RoleName != "Admin") }
          select ........ 
```

上述 linq 的 sql 等效项将在连接条件中有一个 case 语句。

# python - 多处理：将 python 函数移植到集群

> ID：10642422
> 
> 赞同：3
> 
> 时间：2012-05-17T19:39:43.577
> 
> 标签：python, multiprocessing, cluster-computing

我想知道我是否可以通过网格/集群上的多处理包而不是在同一台本地机器上执行/运行 python 函数。它将帮助我创建 100 个必须使用相同功能的工作，并通过 DRMAA 将它们分流到我们的本地集群。我不确定这对于子进程/分叉是否可行或有意义。

任何示例或建议都会有所帮助。

PS：交叉张贴在python-list上

谢谢！-阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:45:30.803

通常为此我们使用类似 MPI 的东西。

有一个仲裁者，他的唯一工作是为节点分配任务并检查节点的活跃度。（池）每个脚本应该是相同的，并且包含您需要的所有代码并分发到所有节点。

设置完成后，为每个节点维护一个任务和参数队列（方法名 + 参数）以完成并将结果排队返回仲裁器。

天真的例子：

```
def do_something(arg1, arg2):
  return arg1 + arg2

def get_next_task():
  task, args = server.retrieve_task()
  result = task(args)
  server.queue_result(result, node_id)

if __name__ == '__main__':
  if sys.argv[1] == '-a': # arbiter
    arbiter()
  if sys.argv[1] == '-n': # node
    run_node() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:02:56.197

另一种可能的选择是[iPython](http://ipython.org/)。他们有一个很好的并行处理教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T23:09:33.750

该`multiprocessing`模块*主要*在本地机器上工作。[远程管理器](http://docs.python.org/2/library/multiprocessing.html?highlight=multiprocessing#using-a-remote-manager)是个例外。

使用远程管理器的优势在于，除了标准的 python 安装之外，您不需要任何额外的东西。但是您必须处理诸如将客户端代码分发到所有机器等问题。当然，所有机器都需要安装 python。

在集群等上运行有许多不同的选项。请参阅 Python wiki 上的[并行处理](http://wiki.python.org/moin/ParallelProcessing)页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:32:43.647

[并行 Python](http://www.parallelpython.com/)可能是您所需要的。

# javascript - JS 或 jQuery 或窗口调整大小或当窗口宽度小于 npx

> ID：10642424
> 
> 赞同：8
> 
> 时间：2012-05-17T19:39:48.477
> 
> 标签：javascript, jquery, resize, window

如何检测用户何时调整浏览器窗口的大小？

我正在寻找一个脚本，它可以在用户调整窗口大小或窗口宽度小于例如 900 像素时执行某些操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T19:44:25.893

### 嗯，你可以使用 jQuery，但是......

您可以像这样订阅窗口调整大小事件：

```
$(window).on("resize", function(event){
  console.log( $(this).width() );
}); 
```

请注意这一点，因为当宽度小于*n*时执行代码的 if 语句会在调整满足这些条件的窗口大小时执行该代码的次数非常可笑。最好在文档中设置一些标志或添加类，并将这些作为您的条件的一部分。

### CSS 媒体查询就*在这里*！

但是，您要问的问题听起来最适合使用[CSS Media Queries](http://msdn.microsoft.com/en-us/library/windows/apps/hh453556.aspx)解决。例如，如果我们想在窗口小于 900px 时更改 body 背景颜色：

```
@media screen and (max-width: 900px) {
  body {
    background: #ccc;
  }
} 
```

旧版本的 IE 甚至还有一个很棒的 polyfill：[https ://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T19:41:31.377

jQuery：

```
$(window).resize(function() {
    //do something

    var width = $(document).width();
    if (width < 900) {
       // do something else
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T19:42:27.117

您可以使用`$(window).resize()`如下

```
$(window).resize(function() {
     if($(this).width() < 900)
       //do whatever you want
  }); 
```

这是[$.resize的文档](http://api.jquery.com/resize/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-17T19:42:42.910

```
$(window).resize(function() {
  $('body').prepend('<div>' + $(window).width() + '</div>');
  // Do stuff
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-17T19:47:31.753

根据您的需要，这可以在窗口大小小于 900px 时处理：

```
 $(window).on("resize", function(event){
      console.log('User is using resize!');
      var w = $(this).width();
      if(w < 900)
        console.log('Your window is ' + w + 'px (less than 900px)');
 });​ 
```

# apache - .htaccess 将子域重写到目录

> ID：10642426
> 
> 赞同：87
> 
> 时间：2012-05-17T19:39:56.363
> 
> 标签：apache, .htaccess, url-rewriting, dns, subdomain

是否可以使用 .htaccess 将子域重写到目录？

例子：

*   [http://sub.domain.com/](http://sub.domain.com/)

显示的内容

*   [http://domain.com/subdomains/sub/](http://domain.com/subdomains/sub/)

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-17T19:56:48.403

尝试将其放入您的 .htaccess 文件中：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteRule ^(.*)$ /subdomains/sub/$1 [L,NC,QSA] 
```

对于更一般的规则（适用于任何子域，而不仅仅是`sub`），将最后两行替换为：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com
RewriteRule ^(.*)$ subdomains/%1/$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-12-04T22:54:22.887

我不是 mod_rewrite 专家，并且经常为此苦苦挣扎，但我已经在我的一个网站上做到了这一点。根据您的情况，它可能需要其他标志等。我正在使用这个：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^subdomain\.example\.com$
RewriteCond %{REQUEST_URI} !^/subdomains/subdomain
RewriteRule ^(.*)$ /subdomains/subdomain/$1 [L] 
```

站点其余部分的任何其他重写规则必须在之后执行，以防止它们干扰您的子域重写。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-01-18T15:03:22.377

[您可以在.htaccess](https://en.wikipedia.org/wiki/.htaccess)中使用以下规则将子域重写到子文件夹：

```
RewriteEngine On

 # If the host is "sub.domain.com"
 RewriteCond %{HTTP_HOST} ^sub.domain.com$ [NC]
 # Then rewrite any request to /folder
 RewriteRule ^((?!folder).*)$ /folder/$1 [NC,L] 
```

逐行解释：

```
 RewriteEngine on 
```

上面的行告诉服务器打开引擎以重写 URL。

```
 RewriteCond %{HTTP_HOST} ^sub.domain.com$ [NC] 
```

此行是 RewriteRule 的条件，我们使用正则表达式模式匹配 HTTP 主机。条件是如果主机是**sub.domain.com**则执行规则。

```
 RewriteRule ^((?!folder).*)$ /folder/$1 [NC,L] 
```

该规则匹配*[http://sub.domain.com/foo](http://sub.domain.com/foo)*并在内部将其重定向到*[http://sub.domain.com/folder/foo](http://sub.domain.com/folder/foo)*。

将*sub.domain.com*替换为您的子域，将文件夹替换为您要将子域指向的文件夹的名称。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-17T10:25:44.590

我遇到了同样的问题，在[http://www.webmasterworld.com/apache/3163397.htm找到了详细的解释](http://www.webmasterworld.com/apache/3163397.htm)

我的解决方案（子域内容应该在一个名为的文件夹中`sd_subdomain`：

```
Options +FollowSymLinks -MultiViews

RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} subdomain\.domain\.com
RewriteCond $1 !^sd_
RewriteRule (.*) /sd_subdomain/$1 [L] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-12T02:17:45.687

这会将同一文件夹重定向到子域：

### .httaccess

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://domain\.com/subdomains/%1 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-30T02:39:21.040

尝试将此*.htaccess*文件放在子域文件夹中：

```
RewriteEngine On

RewriteRule ^(.*)?$ ./subdomains/sub/$1 
```

当您只希望它显示*[http://sub.example.org/](http://sub.example.org/)*时，它会重定向到*[http://example.org/subdomains/sub/](http://example.org/subdomains/sub/)*。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-27T06:04:38.487

重定向子域目录：

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.(archive\.example\.com)$ [NC]
RewriteRule ^ http://%2/%1%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-12T22:11:18.980

对于任何子域请求，请使用：

```
RewriteEngine on 
RewriteCond %{HTTP_HOST} !^www\.band\.s\.co 
RewriteCond %{HTTP_HOST} ^(.*)\.band\.s\.co 
RewriteCond %{REQUEST_URI} !^/([a-zA-Z0-9-z\-]+) 
RewriteRule ^(.*)$ /%1/$1 [L] 
```

只需制作一些与您需要的子域名相同的文件夹。文件夹必须像这样存在：*domain.com/sub* for *sub.domain.com*。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-17T05:03:24.827

编辑文件*.htaccess*：

```
RewriteEngine On 
RewriteCond %{HTTPS} off 
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# mysql - 错误：#1071 - 指定的密钥太长；最大密钥长度为 1000 字节 - mysql 5.0.91

> ID：10642429
> 
> 赞同：1
> 
> 时间：2012-05-17T19:40:07.253
> 
> 标签：mysql, mysql-error-1071

我正在使用 mysql 5.0.91，我需要保存 URL（有些很小，有些很长）。我想使用`varchar(2000)`，但出现错误：

> #1071 - 指定的密钥太长；最大密钥长度为 1000 字节

使用 mysql 5.0.91 在我的主机上保存 URL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:50:34.300

你`unique=True`在你的 urls 列上使用吗？MySQL 正在该列上构建唯一索引，每个字符使用的字节数取决于编码。

例如，如果它是 UTF-16，它将使用每个字符 2 个字节，因此您的`varchar(2000)`列将是 4000 个字节，并且如错误消息所述，最大密钥长度为 1000 个字节。

因此，您可以切换到 UTF-8 并改用它`varchar(900)`来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:20:16.207

我跑了那个错误，因为我在 db 中选择了 utf-16 排序规则 - 切换回 utf-8 general-ci - 它消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T08:46:55.090

Laravel 默认使用 utf8mb4 字符集，其中包括支持在数据库中存储“表情符号”。如果您运行的 MySQL 版本早于 5.7.7 版本或 MariaDB 版本早于 10.2.2 版本，您可能需要手动配置迁移生成的默认字符串长度，以便 MySQL 为其创建索引。**您可以通过在AppServiceProvider**中调用 **Schema::defaultStringLength**方法来配置它：

 **```
use Illuminate\Support\Facades\Schema;

/**
 * Bootstrap any application services.
 *
 * @return void
 */
public function boot()
{
    Schema::defaultStringLength(191);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T13:35:02.930

重写您的电子邮件字段，例如：

```
$table->string('email', 250)->unique(); 
```**

# haskell - 通过使用名称阴影来避免临时变量

> ID：10642430
> 
> 赞同：6
> 
> 时间：2012-05-17T19:40:17.873
> 
> 标签：haskell, syntax, composition

我在 Haskell 中创建了很多临时变量：

```
main = do
    let nums'' = [1..10]
    let nums' = a . bunch . of_ . functions $ nums''
    let nums = another . bunch . of_ . functions $ nums'
    print nums 
```

也就是说，我不想像这样编写一长串函数：

```
let nums = another . bunch . of_ . functions . a . bunch . of_ . functions $ [1..10] 
```

因为它对我来说变得不可读，所以我尝试根据它们的作用对函数进行分组。在这个过程中，我最终创建了一堆丑陋的临时变量，比如`nums''`and `nums'`（我可以给它们起更有意义的名字，但重点仍然存在......每一个新行都意味着一个新变量）。在这种情况下，阴影变量会导致代码更清晰。我想做类似的事情：

```
let nums = [1..10]
nums = a . bunch . of_ . functions $ nums
nums = another . bunch . of_ . functions $ nums 
```

即与上面完全相同，但没有临时变量。在 Haskell 中有什么方法可以做到这一点吗？也许整个事情可以包装在一个“交易”中：

```
atomically $ do
  (...this code...)
  return nums 
```

让 Haskell 知道本节中的代码包含阴影变量，它应该只担心最终结果。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T19:43:51.410

这种风格很常见：

```
let nums = another
         . bunch
         . of_
         . functions
         . a
         . bunch
         . of_
         . functions
         $ [1..10] 
```

它清楚地描述了代码；while`.`代替临时变量名。

并且它避免了当你开始隐藏变量名时可能发生的危险问题——不小心引用错误`x`迟早会给你带来麻烦。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T21:49:02.280

这是我不时使用的其他人没有给出的建议：您可能喜欢命名您的函数而不是命名您的值！例如，也许你可以写：

```
let runningSum = a . bunch . of_ . functions
    weight     = another . bunch . of_ . functions
in weight . runningSum $ [1..10] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T20:25:53.687

如果你绝对必须，这是可能的，但不是惯用的。改用 Don 或 luqui 的建议。

```
main = do
    nums <- return [1..10]
    nums <- return $ a . bunch . of_ . functions $ nums
    nums <- return $ another . bunch . of_ . functions $ nums
    print nums 
```

如果你不在 monad 中，你总是可以在 identity monad 中启动一个新的 do 块。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-17T20:44:15.943

由于您的名称 ( `nums`, `nums'`, `nums''`, ...) 没有传达有关分组的信息，因此您可以使用换行符对功能进行分组并传达相同的信息：

```
main =
    let nums = a . bunch . of_ . functions
             . another . bunch . of_ . functions
             $ [1..10]
    in print nums 
```

但是，我建议不要这样做，而是给子计算名称*传递*信息，例如。`normalizedNums`,`average`等。然后没有丑陋的阴影问题，因为您使用的是不同的名称。

# asp.net - 在没有行数据绑定事件的网格视图的空模板内查找服务器端控件

> ID：10642436
> 
> 赞同：1
> 
> 时间：2012-05-17T19:40:41.027
> 
> 标签：asp.net

我有一个网格视图，其中一个文本框出现在页脚和编辑模板中，用户可以从中更新数据。我在网格的空模板内制作了一个表格，并在其上添加了一个服务器端文本框，以便用户可以在网格中没有记录时将数据插入网格中。网格外有一个服务器端按钮，单击该按钮时，我会保存用户通过网格插入或更新的数据。现在我面临的问题是在保存数据的同时找出网格的空模板中存在的控件。

我的代码如下所示：

```
<asp:GridView ID="grwBrandInfo" runat="server" Width="100%" HeaderStyle-CssClass="gridheaderstyle"
                                    GridLines="Vertical" AutoGenerateColumns="false" ShowFooter="True" BackColor="White"
                                    OnRowCommand="grwBrandInfo_RowCommand" OnRowEditing="grwBrandInfo_RowEditing"
                                    OnRowDeleting="grwBrandInfo_RowDeleting" OnRowUpdating="grwBrandInfo_RowUpdating"
                                    OnRowDataBound="grwBrandInfo_RowDataBound" OnRowCancelingEdit="grwBrandInfo_RowCancelingEdit"
                                    BorderStyle="None">
                                    <Columns>
                                        <asp:TemplateField HeaderText="Quarts">
                                            <ItemTemplate>
                                                <%#Eval("QUARTS")%>
                                                <asp:HiddenField ID="hdnPERMIT_QUANTITY_ID" runat="server" Value='<%#Eval("PERMIT_QUANTITY_ID") %>' />
                                                <asp:HiddenField ID="hdnQuarts" runat="server" />
                                            </ItemTemplate>
                                            <FooterTemplate>
                                                <asp:HiddenField ID="hdnPERMIT_QUANTITY_ID" runat="server" Value='<%#Eval("PERMIT_QUANTITY_ID") %>' />
                                                <asp:TextBox ID="txtFootQuarts" runat="server" CssClass="txtfields" MaxLength="4"></asp:TextBox>
                                            </FooterTemplate>
                                            <EditItemTemplate>
                                                <asp:HiddenField ID="hdnPERMIT_QUANTITY_ID" runat="server" Value='<%#Eval("PERMIT_QUANTITY_ID") %>' />
                                                <asp:TextBox ID="txtEditQuarts" runat="server" EnableViewState="false" Text='<%#Eval("QUARTS")%>'
                                                    CssClass="txtfields" MaxLength="4"></asp:TextBox>
                                            </EditItemTemplate>
                                            <HeaderStyle HorizontalAlign="Center" />
                                            <ItemStyle HorizontalAlign="Center" />
                                            <FooterStyle HorizontalAlign="Center" />
                                        </asp:TemplateField>
                                        <asp:TemplateField>
                                            <FooterTemplate>
                                                <asp:LinkButton ID="lbtnInsert" runat="server" Text="Insert" CssClass="hypfield"
                                                    CommandName="Insert" ValidationGroup="save"></asp:LinkButton>
                                            </FooterTemplate>
                                            <FooterStyle HorizontalAlign="Center" />
                                            <HeaderStyle HorizontalAlign="Center" />
                                        </asp:TemplateField>
                                        <asp:CommandField ShowEditButton="True" HeaderText="Action" ShowDeleteButton="true"
                                            ValidationGroup="save">
                                            <ItemStyle CssClass="hypfield" HorizontalAlign="Center" VerticalAlign="Top" />
                                            <ControlStyle CssClass="hypfield" />
                                            <HeaderStyle HorizontalAlign="Center" />
                                        </asp:CommandField>
                                    </Columns>
                                    <EmptyDataTemplate>
                                        <table border="1" cellpadding="5" cellspacing="0" width="100%">
                                            <tr align="Left" bgcolor="#726E6D">
                                                <td>
                                                    <b>
                                                        <asp:HiddenField ID="hdnPERMIT_QUANTITY_ID" runat="server" Value='0' />
                                                        <asp:Label ID="lblQuarts" runat="server" ForeColor="white" Text="Quarts" CssClass="lblfields"></asp:Label></b>
                                                </td>
                                            </tr>
                                            <tr align="left" id="trEntryNotCompleted" runat="server" bgcolor="#FFFFEE">
                                                <td>
                                                    <asp:TextBox ID="txtQuarts" runat="server" CssClass="txtfields5char" MaxLength="4"></asp:TextBox>
                                                </td>
                                                                                           </tr>
                                        </table>
                                    </EmptyDataTemplate>
                                    <FooterStyle BackColor="#CCCC99" />
                                    <RowStyle BackColor="#F7F7DE" />
                                    <SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />
                                    <PagerStyle BackColor="#F7F7DE" ForeColor="Black" HorizontalAlign="Right" />
                                    <HeaderStyle BackColor="#6B696B" CssClass="gridheaderstyle" Font-Bold="True" ForeColor="White" />
                                    <AlternatingRowStyle BackColor="White" />
                                </asp:GridView> 

   <asp:Button ID="btnSave" runat="server" Text="Save" ValidationGroup="save" OnClick="btnSave_Click" /> 
```

所以问题是我在保存数据时如何找到空模板中存在的 txtQuarts 的值

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-18T08:27:44.393

> Dim txtId As String = CType(gridHelpDesk.Controls(0).Controls(0).FindControl("txtId"), TextBox).Text

# php - PHP - 如何多次并行运行脚本

> ID：10642437
> 
> 赞同：0
> 
> 时间：2012-05-17T19:40:42.243
> 
> 标签：php

我想并行运行以下脚本的多个实例：

```
for($i = 0; $i < 1000; ) {
   echo "It works! Woohoo.<br/>";
   sleep(1);

   flush();
   ob_flush();
 } 
```

我已将 httpd-mpm.conf 包含在 Apache 的 httd.conf 中，但它仍然不起作用。我在 Windows7 中使用 WAMP。有没有办法让这个工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:47:05.533

PHP 是单线程的，但是为了将繁重的任务卸载到后台，有一些技巧可以获得多个线程。一种是使用 Gearman，另一种是使用 PHP 5.4 中引入的新事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:46:38.730

不要使用 PHP 使用 CGI 或 Java Servlet。

# entity-framework - 实体框架 4.3 在现有“共享”数据库上的迁移

> ID：10642442
> 
> 赞同：2
> 
> 时间：2012-05-17T19:41:15.347
> 
> 标签：entity-framework, database-schema, entity-framework-4.3, entity-framework-migrations

我们有一个庞大的数据库，其中包含用于不同 Web 应用程序的不同数据库模式。例如：WebApp1 使用 Schema1.Tables。WebApp2 使用 Schema2.Tables 等等。

现在，我正在开发一个新的 Web 应用程序 (WepApp3)，它将使用 Entity Framework 4.3.1。WebApp3 应该只关心 Schema3 并且只使用那些属于 Schema3 的数据库对象。如果我在 WepApp3 中创建一些实体，如何将这些实体作为 schema3.tables 迁移到数据库？我还需要进行初始迁移吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:54:04.843

我认为在同一个数据库中不可能有多个 EF 模型。EF 不应尝试接触与其模型无关的表，但如果您想将另一个 EF 应用程序添加到同一个数据库中，您会遇到麻烦，因为它们会尝试共享相同的 MetaData 表。

使用代码优先生成新模型时，您可以指定它们应属于 DbContext 的哪个模式：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<MyEntity>().ToTable("MyEntity", "Schema3");
} 
```

如果没有共享应用程序，是否可以将架构迁移到不同的数据库中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:50:23.583

它似乎工作。我从一个现有的数据库开始。创建了一个带有几个模型的 mvc 应用程序（ **app1 ）。**然后我在数据库中为这个应用程序创建了一个模式。我根据您的评论为模型指定了架构。然后我使用基于代码的迁移脚本来更新数据库。迁移脚本在新架构下创建了 2 个表，而不会破坏现有内容。我注意到 EF 创建了带有更改信息行的 __MigrationHistory 表。然后我创建了另一个应用程序，一个新架构并重复了迁移过程，并对迁移脚本进行了一些调整。该脚本具有重新创建 2 个**app1表的代码**. 我从脚本中删除了该代码。然后，EF 成功地在新架构下创建了新表，并在 __MigrationHistory 表中创建了新行，其中包含有关新更改的信息。所有现有的东西都保持不变，包括数据。

# asp.net - 在运行时将位图图像添加到 cshtml mvc

> ID：10642444
> 
> 赞同：1
> 
> 时间：2012-05-17T19:41:18.727
> 
> 标签：asp.net, asp.net-mvc, bitmap, barcode

我有一个将在运行时生成的位图图像。我没有它的本地 url，因为它是在运行时以这种方式生成并返回给我的。有没有办法在运行时将此图像添加到 cshtml 文件或 html 文件？

```
public Bitmap GetBarcodeImage(string inputString)
    {

        Bitmap bitmap = new Bitmap(200,100);

        Graphics graphics = Graphics.FromImage(bitmap);

        graphics.Clear(Color.White);

        graphics.DrawString(inputString, new Font("Free 3 of 9",60,FontStyle.Regular), Brushes.Black, new PointF(0, 0));

        return bitmap;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:03:01.620

您可以创建一个 asp.net mvc 操作，该操作返回将返回位图的 FileContentResult。像这样的东西：

```
public FileContentResult imageGenerate(string s)
    {
        Bitmap b = getBarcodeImage(s);
        ... get byte array from bitmap ...
        return new FileContentResult(bytes, "image/bmp");
    } 
```

然后在您查看另一个操作时，您将使用 imageGenerate 操作引用图像

```
<img src="<%=Url.Action("imageGenerate","SomeController", new {s = "asdf"}) %>" /> 
```

# c++ - 在 xcode (c++) 中自己处理内存分配

> ID：10642445
> 
> 赞同：-2
> 
> 时间：2012-05-17T19:41:29.220
> 
> 标签：c++, xcode, memory, automatic-ref-counting, allocation

我在我的 Xcode 4.3.2 中关闭了自动引用计数 (ARC)，并认为我掌握得很好。然后我写了这个小程序：

```
int main()
{
    int *a = new int(3);
    delete a;
    printf("%i",*a);
    return 0;
} 
```

这是打印 3，但它应该打印垃圾。看起来编译器会处理我所有的内存分配，我不希望它这样做。我该怎么做才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:49:30.477

你用 new 给你的程序一个堆上的地址。它恰好是该地址处值为 3 的整数。当您使用 delete 释放该堆区域时，它不会立即设置为某个垃圾值，它仍然包含 3。您的打印语句转到地址 a 并尝试打印那里的整数，它找到 3 并打印它。

如果在 xcode 中可行，您可以尝试添加编译器警告，我知道 gcc 和其他命令行编译器提供此功能，以避免在程序对您大喊大叫的情况下发生这些令人困惑的未定义行为。

# html - CSS - body 100% 有两个 div，一个 100% 高度，第二个是固定高度

> ID：10642453
> 
> 赞同：0
> 
> 时间：2012-05-17T19:42:00.667
> 
> 标签：html, css

我希望#main 为100%，但不受#upper 的影响——下推39px 并使页面可滚动。溢出：隐藏在身体上不会为我做，因为我需要在底部看到内容。我该如何解决？类似于粘性页脚的东西，或者？我似乎不明白。

```
<body>
<div id="upper"></div>
<div id="main">
    <div id="box"></div>    
</div>
</body>

html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
    height: 100%;
}
#upper {
    height: 39px;
    width: 100%;
    background: #212121;
}
#main {
    display: block;
    width: 100%;    
    min-height: 100%;
    margin: 0 auto;
    background: blue;
} 
```

外观图片[http://i46.tinypic.com/25k1jcn.jpg](http://i46.tinypic.com/25k1jcn.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:51:59.853

@Zoltan 答案的替代方案：

```
html, body {
  margin: 0;
  padding: 0;
  min-height: 100%;
  height: 100%;
}
#upper {
  height: 39px;
  width: 100%;
  background: #212121;
  position: fixed;
  top: 0;
  left: 0;
}
#main {
  display: block;
  width: 100%;    
  margin: 0 auto;
  background: lightblue;
  position: fixed;
  top: 39px;
  bottom: 0;
}
```

```
<div id="upper"></div>
<div id="main">
  <div id="box">Hi</div>    
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:49:25.390

试试这个 - [http://jsfiddle.net/ax7nq/](http://jsfiddle.net/ax7nq/)

```
html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
    height: 100%;
}
#upper {
    height: 39px;
    width: 100%;
    background: #212121;
    position: absolute;
}
#main {
    display: block;
    width: 100%;    
    min-height: 100%;
    margin: 0 auto;
    background: lightblue;
}

#box {
    padding-top: 39px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:58:03.860

尝试将 #upper 更改为：

```
#upper
{
    height: 39px;
    width: 100%;
    background: #212121;
    position:absolute;
    left:0;
    top:0;
} 
```

# javascript - 我需要一些帮助承诺和 q 库

> ID：10642459
> 
> 赞同：0
> 
> 时间：2012-05-17T19:42:17.483
> 
> 标签：javascript, node.js, promise, q

我需要一些关于语法的帮助`node.js promises`。`node.js`在名为 q [https://github.com/kriskowal/q](https://github.com/kriskowal/q)的模块的自述文件中写了一些我不明白的东西。

为什么他们总是`return`先写`promise`？

```
return Q.fcall(eventualAdd, 2, 2); 
```

如何将带有回调的异步函数转换为返回的函数`promise`？我试试

```
function doThis(a,b, callback) { var result = a+ b; setTimeout( callback, 2000, result);}
Q.ncall(doThis, 2,3).then( function(result) { alert(result); }); 
```

我认为 2000 年之后它必须以 5 警报，但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:09:55.583

1.  原因是在这种情况下，他们希望将承诺返回给当前函数的调用者。

2.  我已经在我自己的程序中完成了这个，它是这样完成的：

    *   首先注意第二个参数`Q.ncall([function], [this], [arguments,...])`是`this`。
    *   其次请注意，给`Q.ncall`定函数的回调参数与所有其他 node.js 回调相同，`(error, result)`因此需要将回调`null`作为成功时的错误。

        ```
        var Q = require('q');

        function doThis(a,b, callback) { 
          var result = a + b;
          setTimeout(function () { callback(null, result) }, 2000);
        }

        Q.ncall(doThis, null, 2, 3).then(function(result) { console.error(result); }); 
        ```

    *   此代码按您的描述工作；注意差异。

# ios - 从 UIStoryBoard 中的 UIAlertView 打开 UIViewController

> ID：10642467
> 
> 赞同：0
> 
> 时间：2012-05-17T19:42:59.550
> 
> 标签：ios, xcode, uiviewcontroller, uialertview

如何在 a 中打开一个新的（`UIViewController`ViewController4）？`UIAlertView``UIStoryBoard`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:20:59.440

为情节提要中的视图控制器提供一个标识符。

在 uialertview 的委托方法（[设置按下按钮行为的方法](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)）上，执行以下操作：

*   通过要求“故事板”为您提供具有标识符的控制器来实例化视图控制器以检索它。[https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)

*   呈现这个视图控制器模式。[https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# twitter - Twitter 应用程序如何联系他们的用户？

> ID：10642472
> 
> 赞同：0
> 
> 时间：2012-05-17T19:43:20.743
> 
> 标签：twitter

鉴于 Twitter 不向应用程序提供用户的电子邮件地址 [1]，Twitter 应用程序如何联系其用户？

我们所做的一件事是为我们的应用程序建立一个相应的 Twitter 帐户，每当有新用户通过 Twitter 注册我们的应用程序时，我们都会关注他们。但即便如此，除非他们关注我们，否则我们无法从该帐户向他们发送 DM。我们可以向他们“发推文”（通过提及），但对于私人通知来说，公共推文是不可能的，即使不是这种情况，用户也不会收到提及的通知，除非他们也关注我们。

Twitter应用程序可以联系其用户，还有其他可能的方式吗？

*[一种很好的可能性是，如果应用程序可以 DM 其用户。这仍然与该应用程序是否可以访问其用户的 DM 无关。这将让应用程序通知用户（这是许多应用程序的重要要求），同时仍然让 Twitter 保护其用户的电子邮件地址。]*

[1] [https://dev.twitter.com/docs/faq#6718](https://dev.twitter.com/docs/faq#6718)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:46:17.293

这个问题的答案很简单：你不能。

当然，不完全正确。您的开发平台提供@mentions、DM 和任何通知功能，例如智能手机上的推送通知。然后是电子邮件（只需向用户提供时事通讯）。但 Twitter 不会向您提供此功能，而且可能不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:14:58.867

您可以让新用户关注您的应用程序帐户 - 然后您就可以 DM 他们。

让人们自动关注您可能[违反了 Twitter 条款和条件](https://support.twitter.com/articles/76915-automation-rules-and-best-practices#)。因此，您需要将此作为可选步骤。

1.  用户登录您的应用
2.  您提供一个屏幕，要求他们关注您 - 如果他们不想，则提供一个链接
3.  你现在可以给他们发私信了。

# qtp - 对 2 个不同的环境使用相同的 QTP 脚本

> ID：10642473
> 
> 赞同：1
> 
> 时间：2012-05-17T19:43:21.360
> 
> 标签：qtp

我编写了一个指向我的 QA 环境 URL 的脚本；效果很好。我假设我可以使用相同的脚本来简单地通过参数化来指向我的 PROD 环境 URL。

我在数据表中添加了一个“环境”列，其中包含两个值；QA 的 URL 和 PROD 的 URL。

我首先向每个页面对象添加一个描述属性（通过对象存储库）并参数化“url”。当我开始这个时，我很快发现这可能需要相当长的时间，并认为可能有更好的方法；在那儿？

此外，我还有近 70 个动作，每个动作都使用一个“Page”和“Page 2”对象。希望只有一个地方可以切换这两个对象的 URL：有吗？

感谢您提供任何有用的提示。整个星期，这个论坛对我非常有帮助，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:06:26.190

我不明白为什么您需要`Page`s 描述中的 URL，页面通常没有任何描述。

取决于哪个是开放的，相同的对象存储库是否适用于生产和测试环境？只需在测试开始时导航到一个参数化的 URL，其他一切都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:14:29.527

任何操作/测试都可以获取参数，您可以通过向其发送带有请求 URL 的输入参数来开始测试，并使用`obj().SetTOProperty`函数修改您的对象存储库。

# c# - 防止 Visual Studio 编辑器重新格式化 #if ... #endif

> ID：10642475
> 
> 赞同：9
> 
> 时间：2012-05-17T19:43:34.613
> 
> 标签：c#, visual-studio, visual-studio-2008

假设我在 C# 中有以下代码：

```
void Func () {
    int i=3;

    #if DEBUG
    ...
    #endif

    for (int j=0;j<i;j++) {
        ...
    }
} 
```

如果我使用`Edit->Advanced->Format document`，它会被重新格式化（使用我当前的代码格式设置）：

```
void Func ()
{
    int i = 3;

#if DEBUG
    ...
#endif

    for ( int j = 0; j < i; j++ )
    {
        ...
    }
} 
```

有没有办法防止`#if`和`#endif`线移动到最左边？我找不到这些设置，但我希望有一个注册表设置可以控制它的工作方式。

任何建议将不胜感激 - 这种行为让我发疯，因为我的代码有数百个这样的块，它们不断被 VS 破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:01:14.470

我一直在使用的一种风格是像这样在 # 标签中添加空间

```
void Func ()
{
    int i = 3;

#   if DEBUG
    ...
#   endif

    for ( int j = 0; j < i; j++ )
    {
        ...
    }
} 
```

..if 块看起来与代码正确对齐，并且重新格式化代码不会移动预处理器标签。

# android - 随处捏缩放

> ID：10642476
> 
> 赞同：0
> 
> 时间：2012-05-17T19:43:50.167
> 
> 标签：android, zooming, pinch

是否可以在 Android 中实现应用程序/服务，它可以随时随地进行缩放缩放，例如 Windows 中的放大镜等缩放桌面？这将很有用，因为并非所有应用程序都支持捏缩放，例如 gmail。[我在https://play.google.com](https://play.google.com)上没有找到这样的应用，是不是无法实现？我在 iOS 上看到了这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:23:01.710

不，它不是，它会违反 android 操作系统的安全性，你只有你的应用程序的范围。否则你必须制作一个root mod，这需要刷到你的手机上

# fft - 从过滤的 FFT 中取回数据

> ID：10642480
> 
> 赞同：1
> 
> 时间：2012-05-17T19:43:53.550
> 
> 标签：fft, ifft

我已经对一些我想使用 Matlab 处理的数据应用了 FFT。产生的频率非常嘈杂，因此我对频率/幅度向量应用了移动平均滤波器。现在我有兴趣根据这个过滤的频域数据获取时域数据，以便稍后在光谱仪中使用。

为了获得频率/幅度分量，我使用了 Mathworks 示例中的以下代码：

```
NFFT=2^nextpow2(L); 
A=fft(a,NFFT)/L; %a is the data
f=Fs/2*linspace(0,1,NFFT/2+1); 
```

并使用以下方法绘制：

```
plot(f,2*abs(A(1:NFFT/2+1)) 
```

您能推荐一种从过滤的 FFT 结果中获取时域数据的方法吗？是否涉及逆 FFT？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:29:32.217

IFFT 是 FFT 的逆。如果您不更改频率数据，您应该从同一个库的 ifft(fft(x)) 中获取相同的数据。

如果你改变了数据，想要得到真实的数据，你必须过滤所有的虚部以及复数 FFT 结果的实部，并确保频域数据仍然是复共轭对称的。 IFFT。如果仅使用幅度，则会丢弃相位信息，从而极大地扭曲结果。

# mysql - mysql将1：n关系收集到一条记录中

> ID：10642485
> 
> 赞同：2
> 
> 时间：2012-05-17T19:44:16.017
> 
> 标签：mysql, select, database-relations

我有一个 1:n 的关系：

```
Rule  1:n  Examples 
```

为简化起见，您可以假设 Rule 和 Examples 仅包含一个字符串属性。我正在寻找一个 sql 语句，在其中我得到一个包含以下列的表：

```
rule; example_1; example_2; example_3 
```

我不在乎示例 4 及更高版本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:35:25.643

我觉得有一种更好的方法可以做到这一点，但我忽略了，但这似乎工作正常。我正在自加入有序`examples`表，其中每个连续的示例值必须大于前一个（因此产生前三个中的每一个）。

```
SELECT
  r.rule,
  e1.example AS example_1,
  e2.example AS example_2,
  e3.example AS example_3
FROM rules r
LEFT JOIN (SELECT * FROM examples e ORDER BY example) e1
  ON e1.ruleID = r.ruleID
LEFT JOIN (SELECT * FROM examples e ORDER BY example) e2
  ON e2.ruleID = r.ruleID
  AND e2.example > e1.example
LEFT JOIN (SELECT * FROM examples e ORDER BY example) e3
  ON e3.ruleID = r.ruleID
  AND e3.example > e2.example
GROUP BY r.ruleID 
```

结果：

```
|  RULE | EXAMPLE_1 | EXAMPLE_2 | EXAMPLE_3 |
|-------|-----------|-----------|-----------|
| rule1 |       ex1 |       ex2 |       ex3 |
| rule2 |       ex5 |       ex6 |       ex7 |
| rule3 |       ex8 |    (null) |    (null) |
| rule4 |    (null) |    (null) |    (null) | 
```

样本数据：

```
/* rules table */
| RULEID |  RULE |
|--------|-------|
|      1 | rule1 |
|      2 | rule2 |
|      3 | rule3 |
|      4 | rule4 |

/* examples table */
| EXAMPLE | RULEID |
|---------|--------|
|     ex1 |      1 |
|     ex2 |      1 |
|     ex3 |      1 |
|     ex4 |      1 |
|     ex5 |      2 |
|     ex6 |      2 |
|     ex7 |      2 |
|     ex8 |      3 | 
```

这是一个有效的[SQL Fiddle 示例](http://sqlfiddle.com/#!2/5fcd8/12)。

# c++ - 如何解决 CMake + XCode 4 路径依赖项？

> ID：10642486
> 
> 赞同：3
> 
> 时间：2012-05-17T19:44:17.630
> 
> 标签：c++, xcode, xcode4, build-process, cmake

我的项目结构如下：

```
Libs/
Apps1/
Apps2/ 
```

每个文件夹中都有一个`CMakeLists.txt`. 我想为每个文件夹和每个`AppsN`引用生成一个项目文件`Libs`。我这样做的方法是调用 CMake`add_subdirectory(../Libs/Source/LibN)`等。

现在当我这样做时，CMake 说`add_subdirectory`必须为二进制输出文件夹指定一个唯一的绝对路径。

看到这个帖子：

[跨不同构建目录的 Xcode 依赖项？](https://stackoverflow.com/questions/1456806/xcode-dependencies-across-different-build-directories)

当每个目标的构建输出文件夹是唯一的时，XCode*无法处理依赖项。*它需要一个文件夹。CMake 默认情况下会这样做，它只是在文件夹不是子目录时拒绝。

创建目标后，我尝试更改和更改输出路径。这会将对象构建到输出文件夹，XCode 会看到它们，但是 CMake 脚本中对该目标的所有引用都将使用唯一路径。

建议的解决方案是：

*   在不相关的位置包含项目文件`App1/Projects/Subdir`和复制项目
*   将我的文件夹重新组织到一个共享的父文件夹以避免这种 CMake 疯狂，这给我带来了一些安全问题（因为一些目录是不公开的）
*   永远不要通过其 CMake 名称来引用目标，而是使用共享路径名。不确定如何正确执行此操作
*   尝试以某种方式在 CMake 方面进行修补
*   切换到预制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:50:37.147

尝试将以下内容添加到 root `CMakeLists.txt`：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8.0)
PROJECT (ContainerProject)

SET (LIBRARY_OUTPUT_PATH ${ContainerProject_BINARY_DIR}/bin CACHE PATH
  "Single output directory for building all libraries.")
SET (EXECUTABLE_OUTPUT_PATH ${ContainerProject_BINARY_DIR}/bin CACHE PATH
  "Single output directory for building all executables.")
MARK_AS_ADVANCED(LIBRARY_OUTPUT_PATH EXECUTABLE_OUTPUT_PATH)

# for common headers (all project could include them, off topic)
INCLUDE_DIRECTORIES(ContainerProject_SOURCE_DIR/include)

# for add_subdirectory:
# 1) do not use relative paths (just as an addition to absolute path),
# 2) include your stuffs in build order, so your path structure should
#    depend on build order,
# 3) you could use all variables what are already loaded in previous
#    add_subdirectory commands.
#
# - inside here you should make CMakeLists.txt for all libs and for the
# container folders, too.
add_subdirectory(Libs)

# you could use Libs inside Apps, because they have been in this point of
# the script
add_subdirectory(Apps1)
add_subdirectory(Apps2) 
```

在`Libs` `CMakeLists.txt`：

```
add_subdirectory(Source) 
```

在`Source` `CMakeLists.txt`：

```
add_subdirectory(Lib1)
# Lib2 could depend on Lib1
add_subdirectory(Lib2) 
```

这样所有人都`Apps`可以使用所有库。所有二进制文件都将制作成您的二进制文件`${root}/bin`。

一个示例库：

```
PROJECT(ExampleLib)
INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
)
SET(ExampleLibSrcs
  ...
)
ADD_LIBRARY(ExampleLib SHARED ${ExampleLibSrcs}) 
```

一个示例可执行文件（具有依赖项）：

```
PROJECT(ExampleBin)
INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${ExampleLib_SOURCE_DIR}
)
SET(ExampleBinSrcs
  ...
)
# OSX gui style executable (Finder could use it)
ADD_EXECUTABLE(ExampleBin MACOSX_BUNDLE ${ExampleBinSrcs})
TARGET_LINK_LIBRARIES(ExampleBin
  ExampleLib
) 
```

[这是一个愚蠢而有效的例子。](https://github.com/naszta/QSimpleDB)

# node.js - 在通过 API 公开的路由中使用everyauth 的身份验证方法？

> ID：10642490
> 
> 赞同：1
> 
> 时间：2012-05-17T19:44:28.813
> 
> 标签：node.js, express, mongoose, everyauth

将 express.js 和everyauth 与 mongoose-auth 一起使用，如何为我正在创建的 API 创建外部身份验证路由？我想这样做是为了根据我的 MongoDB 中的用户记录对原生 iOS 应用程序进行身份验证。

例如，这里有一些半仿代码：

```
app.post('/api/auth', function(req, res){
  if(everyauth.authenticate(req.username, req.password)){
    res.json({success:true});
  }
}); 
```

所以我的问题是，如何从everyauth 的典型方法和视图之外利用everyauth/mongoose-auth 的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:24:05.767

在进行更多挖掘后回答我自己的问题。

以下似乎适用于我的需要。如果认证成功则返回用户记录。我只是用一个基本的成功真/假消息来响应测试目的。这假定这`User`是您用于 mongoose-auth 的模型。

```
User.authenticate(req.body.email, req.body.password, function(err, userdoc){
  if (userdoc){
    res.json({success:true});
  }
  else {
    res.json({success:false});
  }
}); 
```

# mysql - CASE zip LIKE MySQL

> ID：10642492
> 
> 赞同：1
> 
> 时间：2012-05-17T19:45:00.313
> 
> 标签：mysql

我正在创建一个“简单”的搜索查询。如果指定列 LIKE('test')，我想选择一个值为 1 的列，这有点难以解释。

我想做的是这样

```
SELECT *,(CASE mycol LIKE('%test%') as match THEN 1 END) FROM mytable 
```

因此，如果 mycol 符合条件，则 match=1，否则为 0。我该怎么做？对不起，如果难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:46:34.387

您快到了，但是您犯了四个错误并使用了一种不好的做法：

*   添加`ELSE 0`您的 CASE 表达式。
*   `CASE`表达式需要一个或多个`WHEN`表达式。
*   将别名放在正确的位置 - 在表达式结束之后。
*   不要使用[保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html) `match`作为别名。

另外，不要使用`SELECT *`.

尝试这个：

```
SELECT
    col1,
    col2,
    ...,
    coln,
    CASE WHEN mycol LIKE '%test%' THEN 1 ELSE 0 END AS zipmatches
FROM mytable 
```

但是 MySQL 中不需要 CASE 表达式，因为 TRUE 和 1 是等价的：

```
SELECT
    col1,
    col2,
    ...,
    coln,
    mycol LIKE '%test%' AS zipmatches
FROM mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:28:42.793

这是另一种表达方式

```
SELECT *, IF(mycol LIKE('%test%'),1,0) is_a_match FROM mytable; 
```

# javascript - Google 电子表格脚本使用 javascript 将数据写入多个电子表格

> ID：10642495
> 
> 赞同：-1
> 
> 时间：2012-05-17T19:45:15.300
> 
> 标签：javascript, google-sheets, google-apps-script

我正在尝试从以下内容扩展脚本：“教程：使用 JavaScript 对象编写电子表格数据” [https://developers.google.com/apps-script/articles/writing_spreadsheet_data](https://developers.google.com/apps-script/articles/writing_spreadsheet_data)

我已经在我们自己的电子表格中实现了这个脚本，并且能够读取我们的源电子表格并写入目标电子表格。不幸的是，我已经达到了该教程的极限，这恰好与我对 javascript 的了解程度不谋而合。

我们的目标： 1) 我们不需要将数据写入与教程中使用的“部门”匹配的工作表，而是需要使用与部门匹配的工作表写入特定的目标电子表格。2）我们需要循环脚本以将每个部门写入唯一的电子表格。

出于我们的目的，我们有大约 100 个“部门”，我们正在寻找的结果应该是 100 个电子表格 - 每个部门 1 个 [就像在教程中创建的工作表一样] 脚本不需要动态创建新的电子表格，虽然那很酷......我们只需要将它写入适当的电子表格。

非常感谢任何帮助/建议或方向。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T16:50:11.537

所以我是 Javascript、谷歌表格和这个网站的新手。但我想我会分享一些你可能会感兴趣的东西。这是我制作的一个脚本，用于根据月份将数据从工作表移动到各种目标工作表中。

它的工作原理是逐个遍历`targetSheetNames`，查看某个数据的月份值是否与数组中工作表名称的索引号匹配。

所以在这种情况下，数组从 0-11 开始，这很方便，因为 Javascript 中的月份也是 0-11。

出于您的目的，您可能需要添加更多位，以检查它是否是正确的数据等。但它为您提供了一个在同一个电子表格中将数据移动到多个工作表的示例。

```
function splitByMonth(){

  var targetSheetNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; // Sheet names, in month order. Order is important. Name is not. Sheets must exist. This will not create them.
  var sourceSheet = "Archive"; // Name of sheet with data in it.
   var dateColumn = 1; // Column number with date in it. A = 1, B = 2, C = 3, etc

  var ss, sheet, values, valuesLength, counter, archive = [];

  for (var i = 0; i < targetSheetNames.length; i++){

 ss = SpreadsheetApp.getActiveSpreadsheet();
 sheet = ss.getSheetByName(sourceSheet);
 values = sheet.getDataRange().getValues();
 valuesLength = values.length;
 counter = 1; // This starts at one because it assumes a header row.
 archive = [];

  while (counter < values.length){

    var d = new Date(values[counter][dateColumn - 1]);
    var m = d.getMonth();

    if (m == i  ){

      archive.push(values.splice(counter, 1)[0]); 
    }

    else

    {     
      counter++;
    }

  }  

  var archiveLength = archive.length;
  if (!archiveLength) {continue;}
  var dataSs = SpreadsheetApp.getActiveSpreadsheet();
  var targetSheet = dataSs.getSheetByName(sourceSheetKeys[i]);
  var lastRow = targetSheet.getLastRow();
  var requiredRows = lastRow + archiveLength - targetSheet.getMaxRows();
  if (requiredRows > 0) targetSheet.insertRowsAfter(lastRow, requiredRows);
  targetSheet.getRange(lastRow + 1, 1, archiveLength, archive[0].length).setValues(archive);
 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:18:01.943

您需要在某处存储的是从部门名称到电子表格 ID 的映射。这可以通过在包含该映射的主电子表格中创建一个特殊工作表来完成：

```
Department     Spreadsheet Id
Sales          123
HR             456 
```

当您准备好写出数据时，您可以查找给定部门的电子表格 ID。您可以使用[SpreadsheetApp.openById()](https://developers.google.com/apps-script/class_spreadsheetapp.html#openById)打开电子表格并向其写入数据。

# apache - 如何使 URL 不区分大小写

> ID：10642498
> 
> 赞同：2
> 
> 时间：2012-05-17T19:45:29.750
> 
> 标签：apache, .htaccess, mod-rewrite

我面临重复链接的问题（根据谷歌网站管理员工具）

例如，谷歌列出了 4 种 URL 作为实际 URL 的副本

```
1) mysite.com/k-Summer Season-10.htm
2) mysite.com/k-Summer%20Season-10.htm
3) mysite.com/k-summer-season-10.htm (actual link)
4) mysite.com/K---10.htm 
```

现在如果你看一下第 4 个链接的结构，它清楚地表明无论你在 /k- 和 -10.htm 之间写什么，你都会得到第 10 页的内容，可以是下面的任何内容。

```
1) mysite.com/k-Summer Season-10.htm
2) mysite.com/k-Bummer%20Season-10.htm
3) mysite.com/k-Dumber-season-10.htm
4) mysite.com/K-Mars-&-Earth-Season-10.htm 
```

那么有没有办法禁止打开其余的 URL（区分大小写和空格）并给出 404 错误或将它们重定向到实际链接？

下面是我的 .htaccess 的代码

```
RewriteEngine On

RewriteRule ^lightbox.htm$ lightbox.php?%{QUERY_STRING}
RewriteRule ^lightbox.([0-9]+).htm$ lightbox.php?page=$1&%{QUERY_STRING}
RewriteRule ^search.htm$ search.php?%{QUERY_STRING}
RewriteRule ^search.([0-9]+).htm$ search.php?page=$1&%{QUERY_STRING}
RewriteRule ^postcard([a-zA-Z0-9]+).htm$ postcards.php?postcard_id=$1&%{QUERY_STRING}
RewriteRule ^postcard.img([0-9]+).htm$ postcards.php?image_id=$1&%{QUERY_STRING}
RewriteRule ^k-(.*)-([0-9]+).htm categories.php?cat_id=$2&%{QUERY_STRING}
RewriteRule ^cat.htm$ categories.php?%{QUERY_STRING}
RewriteRule ^r-(.*)-([0-9]+).htm details.php?image_id=$2&%{QUERY_STRING}
RewriteRule ^r([0-9]+).search.htm details.php?image_id=$1&%{QUERY_STRING}

ErrorDocument 404 /404.php

RewriteRule ^sitemap.xml$ google.php 
```

亲切的问候

乔杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:50:49.027

尝试指定一个`<link rel="canonical" />`标签：

```
<link rel="canonical" href="http://mysite.com/k-summer-season-10.htm" /> 
```

StackOverflow 就是这样做的——看看这个页面的源代码。更多信息[在这里](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。

* * *

或者，在您的 PHP 脚本中，您可以根据真实 URL 检查原始 URL，并在必要时将用户重定向到真实 URL。有关如何在任何重写规则之前获取原始 URL 的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/5493075/apache-rewrite-get-original-url-in-php)

* * *

最后，为什么你在所有的 URL 中都使用`.htm`后缀？URL 重写方案的好处之一是您不需要这样的东西来弄乱您的 URL。

# sql - ORA-38101: INSERT VALUES 子句中的列无效：

> ID：10642509
> 
> 赞同：0
> 
> 时间：2012-05-17T19:46:20.580
> 
> 标签：sql, oracle, plsql

因此，我正在通过创建一个工具来对数据进行去规范化以进行比较来测试我的规范化数据的准确性。在这样做的同时，我正在研究这个工具的新技术，而不是我通常会做的事情（使用游标并循环插入/更新）所以我遇到了两个我想尝试的项目，它们是批量集合和合并语句. 我的问题是我在寻找利用批量收集的最佳方式时遇到了一些麻烦。

**编辑：**

好的，所以我在批量收集时找到了我的问题/解决方案。这实际上是我获取它的方式。我没有使用 forall 语句，而是将其更改为 for 并在其下方添加了一个循环。这导致发现更多错误。我试图调用存储在 indx 中的值的方式是错误的，所以我已经纠正了。现在我似乎遇到的唯一问题是标题中提到的错误。由于某种原因，在我的合并中，我尝试在插入中使用的第一个值会引发以下错误：

> PL/SQL：ORA-38101：INSERT VALUES 子句中的列无效：“TMI”。“MACHINE_INTERVAL_ID” ORA-06550：第 92 行，第 7 列：

所以我现在想知道的是为什么我会收到这个错误。我理解我的插入值无效的概念。但我不完全理解为什么会这样。

这是有问题的合并语句：

```
MERGE INTO TEST_MACHINE_INTERVAL TMI
      USING (SELECT * FROM TEST_MACHINE_INTERVAL) OTMI
      ON (TMI.MACHINE_INTERVAL_ID = OTMI.MACHINE_INTERVAL_ID)
      WHEN MATCHED THEN
        UPDATE SET  TMI.MACHINE_INTERVAL_ID = OTMI.MACHINE_INTERVAL_ID, TMI.START_DATE_TIME = OTMI.START_DATE_TIME,
                    TMI.INTERVAL_DURATION = OTMI.INTERVAL_DURATION,  TMI.CALC_END_TIME = OTMI.CALC_END_TIME, 
                    TMI.MACHINE_NAME = OTMI.MACHINE_NAME, TMI.SITE_NAME = OTMI.SITE_NAME, 
                    TMI.OPERATOR_INSTANCE = OTMI.OPERATOR_INSTANCE, TMI.OPERATOR_INSTANCE2 = OTMI.OPERATOR_INSTANCE2,
                    TMI.OPERATOR_INSTANCE3 = OTMI.OPERATOR_INSTANCE3, TMI.SHIFT_NAME = OTMI.SHIFT_NAME,
                    TMI.INTERVAL_CATEGORY = OTMI.INTERVAL_CATEGORY, TMI.NTP_CATEGORY_NAME = OTMI.NTP_CATEGORY_NAME,
                    TMI.MACHINE_MODE = OTMI.MACHINE_MODE, TMI.JOB_LOAD_STATE_NAME = OTMI.JOB_LOAD_STATE_NAME,
                    TMI.RAW_SOURCE_MSG_TYPE = OTMI.RAW_SOURCE_MSG_TYPE  
       WHEN NOT MATCHED THEN
        INSERT (TMI.MACHINE_INTERVAL_ID, TMI.START_DATE_TIME, TMI.INTERVAL_DURATION, TMI.CALC_END_TIME, 
                TMI.MACHINE_NAME, TMI.SITE_NAME, TMI.OPERATOR_INSTANCE, TMI.OPERATOR_INSTANCE2,
                TMI.OPERATOR_INSTANCE3, TMI.SHIFT_NAME, TMI.INTERVAL_CATEGORY, TMI.NTP_CATEGORY_NAME,
                TMI.MACHINE_MODE, TMI.JOB_LOAD_STATE_NAME, TMI.RAW_SOURCE_MSG_TYPE )
        VALUES (MACHINE_INTERVAL_ID, START_DATE_TIME, INTERVAL_DURATION, CALC_END_TIME, 
                MACHINE_NAME, SITE_NAME, OPERATOR_INSTANCE, OPERATOR_INSTANCE2, OPERATOR_INSTANCE3,
                SHIFT_NAME, INTERVAL_CATEGORY, NTP_CATEGORY_NAME, MACHINE_MODE,
                JOB_LOAD_STATE_NAME, RAW_SOURCE_MSG_TYPE); 
```

以下是我新修改的代码的完整版本：

```
-- Denormaliztion of machine_interval Table.
-- Is used to take all intervals from interval_table and convert it from 
-- foreign keys to corresponding names.
DECLARE

START_DATE_TIME TIMESTAMP(6) WITH TIME ZONE;
CALC_END_TIME TIMESTAMP(6) WITH TIME ZONE;
MACHINE_NAME VARCHAR2(256);
SITE_NAME VARCHAR2(256);
OPERATOR_INSTANCE VARCHAR2(256);
OPERATOR_INSTANCE2 VARCHAR2(256);
OPERATOR_INSTANCE3 VARCHAR2(256);
SHIFT_NAME VARCHAR2(256);
INTERVAL_CATEGORY VARCHAR2(256);
NPT_CATEGORY_NAME VARCHAR2(256);
MACHINE_MODE VARCHAR2(256);
JOB_LOAD_STATE_NAME VARCHAR2(256);
RAW_SOURCE_MSG_TYPE VARCHAR2(256);
INTERVAL_DURATION NUMBER;
MACHINE_INTERVAL_ID NUMBER;

--step one: Get all the intervals and store them into a cursor
CURSOR INTERVAL_CUR IS 
SELECT * 
FROM MACHINE_INTERVAL 
ORDER BY START_DATE_TIME ASC;

TYPE TOTAL_MACHINE_INTERVALS IS
TABLE OF interval_cur%rowtype
INDEX BY PLS_INTEGER;

MACHINE_INTERVAL_ROW TOTAL_MACHINE_INTERVALS;

BEGIN 
--step two: Make sure Test_Machine_interval is empty.
  DELETE FROM TEST_MACHINE_INTERVAL;

  OPEN INTERVAL_CUR;
  LOOP
    FETCH INTERVAL_CUR BULK COLLECT INTO MACHINE_INTERVAL_ROW LIMIT 100;
--step three: Loop through all the intervals. 
    FOR INDX IN 1..MACHINE_INTERVAL_ROW.COUNT 
    LOOP
--step four: Gather all datavalues needed to populate test_machine_interval. 

      MACHINE_INTERVAL_ID := MACHINE_INTERVAL_ROW(indx).MACHINE_INTERVAL_ID;
      START_DATE_TIME := MACHINE_INTERVAL_ROW(indx).START_DATE_TIME;
      CALC_END_TIME := MACHINE_INTERVAL_ROW(indx).CALC_END_TIME;
      INTERVAL_DURATION := MACHINE_INTERVAL_ROW(indx).INTERVAL_DURATION;
      INTERVAL_CATEGORY := MACHINE_INTERVAL_ROW(indx).INTERVAL_CATEGORY;
      RAW_SOURCE_MSG_TYPE := MACHINE_INTERVAL_ROW(indx).RAW_SOURCE_MSG_TYPE;

      SELECT M.MACHINE_NAME INTO MACHINE_NAME 
      FROM MACHINE M  
      WHERE MACHINE_ID = MACHINE_INTERVAL_ROW(indx).MACHINE_ID; 

      SELECT S.SITE_NAME INTO SITE_NAME 
      FROM SITE S  
      LEFT OUTER JOIN MACHINE M ON M.SITE_ID = S.SITE_ID 
      WHERE M.MACHINE_ID = MACHINE_INTERVAL_ROW(indx).MACHINE_ID;  

      SELECT O.OPERATOR_NAME INTO OPERATOR_INSTANCE 
      FROM OPERATOR_INSTANCE OI  
      LEFT OUTER JOIN OPERATOR O ON OI.OPERATOR_ID = O.OPERATOR_ID
      WHERE OI.OPERATOR_INSTANCE_ID = MACHINE_INTERVAL_ROW(indx).OPERATOR_INSTANCE_ID; 

      SELECT O.OPERATOR_NAME INTO OPERATOR_INSTANCE2 
      FROM OPERATOR_INSTANCE OI  
      LEFT OUTER JOIN OPERATOR O ON OI.OPERATOR_ID = O.OPERATOR_ID
      WHERE OI.OPERATOR_INSTANCE_ID = MACHINE_INTERVAL_ROW(indx).OPERATOR_INSTANCE_ID_2; 

      SELECT O.OPERATOR_NAME INTO OPERATOR_INSTANCE3 
      FROM OPERATOR_INSTANCE OI  
      LEFT OUTER JOIN OPERATOR O ON OI.OPERATOR_ID = O.OPERATOR_ID
      WHERE OI.OPERATOR_INSTANCE_ID = MACHINE_INTERVAL_ROW(indx).OPERATOR_INSTANCE_ID_3; 

      SELECT NPT_CATEGORY_NAME INTO NPT_CATEGORY_NAME 
      FROM NPT_CATEGORY 
      WHERE NPT_CATEGORY_ID = MACHINE_INTERVAL_ROW(indx).NPT_CATEGORY_ID;

      SELECT S.SHIFT_NAME INTO SHIFT_NAME
      FROM SHIFTS S  
      LEFT OUTER JOIN SHIFT_TBL STBL ON S.SHIFT_ID = STBL.SHIFT_NAME_FK 
      WHERE STBL.SHIFT_ID_PK = MACHINE_INTERVAL_ROW(indx).SHIFT_ID; 

      SELECT MACHINE_MODE_NAME INTO MACHINE_MODE 
      FROM MACHINE_MODE MM 
      WHERE MM.MACHINE_MODE_ID = MACHINE_INTERVAL_ROW(indx).MACHINE_MODE_ID;

      SELECT JLS.JOB_LOAD_STATE_NAME INTO JOB_LOAD_STATE_NAME 
      FROM JOB_LOAD_STATE JLS 
      WHERE JLS.JOB_LOAD_STATE_ID = MACHINE_INTERVAL_ROW(indx).JOB_LOAD_STATE_ID;

    --step five: merge record into test_machine_interval.
      MERGE INTO TEST_MACHINE_INTERVAL TMI
      USING (SELECT * FROM TEST_MACHINE_INTERVAL) OTMI
      ON (TMI.MACHINE_INTERVAL_ID = OTMI.MACHINE_INTERVAL_ID)
      WHEN MATCHED THEN
        UPDATE SET  TMI.MACHINE_INTERVAL_ID = OTMI.MACHINE_INTERVAL_ID, TMI.START_DATE_TIME = OTMI.START_DATE_TIME,
                    TMI.INTERVAL_DURATION = OTMI.INTERVAL_DURATION,  TMI.CALC_END_TIME = OTMI.CALC_END_TIME, 
                    TMI.MACHINE_NAME = OTMI.MACHINE_NAME, TMI.SITE_NAME = OTMI.SITE_NAME, 
                    TMI.OPERATOR_INSTANCE = OTMI.OPERATOR_INSTANCE, TMI.OPERATOR_INSTANCE2 = OTMI.OPERATOR_INSTANCE2,
                    TMI.OPERATOR_INSTANCE3 = OTMI.OPERATOR_INSTANCE3, TMI.SHIFT_NAME = OTMI.SHIFT_NAME,
                    TMI.INTERVAL_CATEGORY = OTMI.INTERVAL_CATEGORY, TMI.NTP_CATEGORY_NAME = OTMI.NTP_CATEGORY_NAME,
                    TMI.MACHINE_MODE = OTMI.MACHINE_MODE, TMI.JOB_LOAD_STATE_NAME = OTMI.JOB_LOAD_STATE_NAME,
                    TMI.RAW_SOURCE_MSG_TYPE = OTMI.RAW_SOURCE_MSG_TYPE  
       WHEN NOT MATCHED THEN
        INSERT (TMI.MACHINE_INTERVAL_ID, TMI.START_DATE_TIME, TMI.INTERVAL_DURATION, TMI.CALC_END_TIME, 
                TMI.MACHINE_NAME, TMI.SITE_NAME, TMI.OPERATOR_INSTANCE, TMI.OPERATOR_INSTANCE2,
                TMI.OPERATOR_INSTANCE3, TMI.SHIFT_NAME, TMI.INTERVAL_CATEGORY, TMI.NTP_CATEGORY_NAME,
                TMI.MACHINE_MODE, TMI.JOB_LOAD_STATE_NAME, TMI.RAW_SOURCE_MSG_TYPE )
        VALUES (MACHINE_INTERVAL_ID, START_DATE_TIME, INTERVAL_DURATION, CALC_END_TIME, 
                MACHINE_NAME, SITE_NAME, OPERATOR_INSTANCE, OPERATOR_INSTANCE2, OPERATOR_INSTANCE3,
                SHIFT_NAME, INTERVAL_CATEGORY, NTP_CATEGORY_NAME, MACHINE_MODE,
                JOB_LOAD_STATE_NAME, RAW_SOURCE_MSG_TYPE);

    /*
      EXECUTE IMMEDIATE 'INSERT INTO TEST_MACHINE_INTERVAL
                                           (MACHINE_INTERVAL_ID, START_DATE_TIME, INTERVAL_DURATION, CALC_END_TIME, 
                                            MACHINE_NAME, SITE_NAME, OPERATOR_INSTANCE, OPERATOR_INSTANCE2,
                                            OPERATOR_INSTANCE3, SHIFT_NAME, INTERVAL_CATEGORY, NTP_CATEGORY_NAME,
                                            MACHINE_MODE,JOB_LOAD_STATE_NAME,RAW_SOURCE_MSG_TYPE )
                                     VALUES(:1, :2, :3, :4, :5, :6, :7, :8, :9, :10, :11, :12, :13, :14, :15)' 
                                     USING  MACHINE_INTERVAL_ID, START_DATE_TIME, INTERVAL_DURATION,
                                            CALC_END_TIME, MACHINE_NAME, SITE_NAME, 
                                            OPERATOR_INSTANCE, OPERATOR_INSTANCE2, OPERATOR_INSTANCE3,
                                            SHIFT_NAME, INTERVAL_CATEGORY, NTP_CATEGORY_NAME,
                                            MACHINE_MODE,JOB_LOAD_STATE_NAME,RAW_SOURCE_MSG_TYPE;
     */
    END LOOP;
  EXIT WHEN MACHINE_INTERVAL_ROW.COUNT = 0; 
END LOOP;
END; 
```

我 75% 确定我的问题在于我如何尝试获取上面代码中显示的批量集合。所以我的问题是：我应该如何从批量集合中获取值以用于数据合并？

非常感谢您提出建议或意见。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:37:24.090

*   如果您使用`FORALL`，则需要遵循一条 SQL 语句，您将把整个集合传递给该语句。如果您只是想遍历集合中的元素，您将使用`FOR`循环。
*   引用集合的第 n 个元素的语法是`collection_name(index).column_name`.

所以，如果你想逐个迭代集合中的元素，你会想要类似的东西

```
FOR indx IN MACHINE_INTERVAL_ROW.FIRST..MACHINE_INTERVAL_ROW.COUNT 
LOOP
  MACHINE_INTERVAL_ID := machine_interval_row(indx).MACHINE_INTERVAL_ID;
  START_DATE_TIME     := machine_interval_row(indx).START_DATE_TIME;

  <<more code>>
END LOOP; 
```

但是，如果您要重构代码，我不确定使用局部变量`MACHINE_INTERVAL_ID`而不是仅使用`machine_interval_row(indx).MACHINE_INTERVAL_ID`. 我也不确定为什么要执行六个单独`SELECT`的语句，每个语句都返回一行，而不是编写一个`SELECT`将所有这些表连接在一起并填充您想要的任何局部变量的语句。

你`MERGE`也会有问题——a 的源和目标是同一个表是没有意义的——`MERGE`我希望你得到一个错误，即 Oracle 无法生成一组稳定的行如果它试图执行该语句。您可以将查询的源更改为针对`DUAL`选择您已填充的所有局部变量的查询，我猜，即

```
 MERGE INTO TEST_MACHINE_INTERVAL TMI
  USING (SELECT machine_interval_row(indx).MACHINE_INTERVAL_ID,
                machine_interval_row(indx).START_DATE_TIME
           FROM dual) OTMI
  ON (TMI.MACHIN_INTERVAL_ID = OTMI.MACHINE_INTERVAL_ID) 
```

但是，如果`TEST_MACHINE_INTERVAL`要从空开始，听起来你最好不要使用 a `MERGE`，不要使用 a `BULK COLLECT`，而只是编写一个`INSERT ... SELECT`来提取你想要提取的所有数据。就像是

```
INSERT INTO test_machine_interval( machine_interval_id,
                                   start_date_time,
                                   <<more columns>> )
  SELECT machine_interval_id,
         last_value(start_date_time) over (partition by machine_interval_id
                                               order by start_date_time asc
                                           rows between unbounded preceding 
                                                    and unbounded following ) last_start_date_time,
         <<more columns>>
    FROM machine_interval 
```

# sql-server - 在 SQL Server 2008 中访问 C# .dll

> ID：10642510
> 
> 赞同：1
> 
> 时间：2012-05-17T19:46:21.967
> 
> 标签：sql-server, sql-server-2008, dll, sqlclr

我有一个 DLL，其中包含我想在运行时从 SQL Server 访问的方法

```
create assembly ClassLibrary2
from 'D:\UtilityMethods.dll'
go 
```

我收到此错误：

> 程序集 'UtilityMethods' 引用程序集 'teste, version=1.0.0.0,culture=neutral, publickeytoken=429d4908cc20f9a0.'，当前数据库中不存在。SQL Server 尝试从引用程序集所在的同一位置定位并自动加载引用的程序集，但该操作失败（原因：2（未能检索此错误的文本。原因：15105））。请将引用的程序集加载到当前数据库中，然后重试您的请求。

里面`UtilityMethods.dll`有一个参考`teste`。但是，DLL 在没有程序集的情况下在控制台项目中工作`teste`，那么为什么 SQL Server 需要它，我怎样才能让它工作呢？

# html - 如何使用 lxml 针对变量列表解析 HTML 表？

> ID：10642513
> 
> 赞同：1
> 
> 时间：2012-05-17T19:46:29.733
> 
> 标签：html, lxml, python

我正在尝试使用 lxml 解析 HTML 表。在`rows = outhtml.xpath('//tr/td/span[@class="boldred"]/text()')`获取结果时，我试图仅在以我的配置文件中的变量开头时提取列内容。例如，如果 a`<td>`以“Street 1”开头，那么我想获取该标签的`<span>`内容。`<td>`这样，我可以拥有一个元组的元组（负责处理 None 值），然后我可以将其存储在数据库中。

**lxml_parse.py**

```
import lxml.html as lh

doc=open('test.htm', 'r')
outhtml=lh.parse(doc)
doc.close()

rows = outhtml.xpath('//tr/td/span[@class="boldred"]/text()')
print rows 
```

**测试.htm**

```
<tr>

    <td></td>

    <td colspan="2">

        Street 1:<span class="required"> *</span><br />

        <span class="boldred">2100 5th Ave</span>

    </td>

    <td colspan="2">

        Street 2:<br />

        <span class="boldred">Ste 202</span>

    </td>

</tr>

<tr>

    <td></td>

    <td>

        City:<span class="required"> *</span><br />

        <span class="boldred">NYC</span>

    </td>

    <td>

        State:<br />

        <SPAN CLASS="boldred2"></SPAN><br/><SPAN CLASS="boldred">NY</SPAN>

    </td>

    <td>

        Country:<span class="required"> *</span><br />

        <SPAN CLASS="boldred2"></SPAN><br/><SPAN CLASS="boldred">USA</SPAN>

    </td>

    <td>

        Zip:<br />

        <span class="boldred">10022</span>

    </td>

</tr> 
```

**输出 ：**

```
$ python lxml_parse.py 
['2100 5th Ave', 'Ste 202', 'NYC', 'NY', 'USA', '10022'] 
```

**解析一堆变量是我遇到的问题：**

```
import lxml.html as lh

desiredvars = ['Street 1','Street 2','City', 'State', 'Zip']

doc=open('test.htm', 'r')
outhtml=lh.parse(doc)
doc.close()

myresultset = ((var, outhtml.xpath('//tr/td[child::*[text()=var]]/span[@class="boldred"]/text()')) for var in desiredvars)
print myresultset 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:52:49.310

旨在制作这本词典：

```
{'City:': 'NYC', 
 'Zip:': '10022', 
 'Street 1:': '2100 5th Ave', 
 'Country:': 'USA', 
 'State:': 'NY', 
 'Street 2:': 'Ste 202'} 
```

您可以使用此代码。然后很容易查询字典以获得您想要的值：

```
import lxml.html as lh

test = '''<tr>
    <td></td>
    <td colspan="2">
        Street 1:<span class="required"> *</span><br />
        <span class="boldred">2100 5th Ave</span>
    </td>
    <td colspan="2">
        Street 2:<br />
        <span class="boldred">Ste 202</span>
    </td>
</tr>
<tr>
    <td></td>
    <td>
        City:<span class="required"> *</span><br />
        <span class="boldred">NYC</span>
    </td>
    <td>
        State:<br />
        <SPAN CLASS="boldred2"></SPAN><br/><SPAN CLASS="boldred">NY</SPAN>
    </td>
    <td>
        Country:<span class="required"> *</span><br />
        <SPAN CLASS="boldred2"></SPAN><br/><SPAN CLASS="boldred">USA</SPAN>
    </td>
    <td>
        Zip:<br />
        <span class="boldred">10022</span>
    </td>
</tr>'''

outhtml = lh.fromstring(test)
ks = [ k.strip() for k in outhtml.xpath('//tr/td/text()') if k.strip() != '' ]
vs = outhtml.xpath('//tr/td/span[@class="boldred"]/text()')

result = dict( zip(ks,vs) )

print result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:34:38.097

**lxml_tempsofsol.py**：

```
import lxml.html as lh

desiredvars = ['Street 1','Street 2','City', 'State', 'Zip']

doc=open('test.htm', 'r')
outhtml=lh.parse(doc)
doc.close()

myresultset = ((var, outhtml.xpath('//tr/td[contains(text(), "%s")]/span[@class="boldred"]/text()'%(var))[0]) for var in desiredvars)

for each in myresultset:
    print each 
```

**输出 ：**

```
$ python lxml_tempsofsol.py
('Street 1', '2100 5th Ave')
('Street 2', 'Ste 202')
('City', 'NYC')
('State', 'NY')
('Zip', '10022') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T08:52:26.720

我搜索了同样的东西，发现了你的问题，没有“正确”的答案，所以我要补充几点：

*   要在 XPath 中引用变量，您应该使用[$var 语法](http://www.w3.org/TR/xpath20/#id-variables)，
*   在 lxml 中，变量作为关键字参数传递给[xpath()](http://lxml.de/xpathxslt.html#the-xpath-method)，
*   使用是错误的，因为您直接在;`child::*`中搜索文本。已经搜索文本子节点，`<td/>``text()`
*   由于空格，您需要使用[contains() XPath 函数。](http://www.w3.org/TR/xpath-functions/#func-contains)

考虑到这些，您更正的代码如下所示：

```
import lxml.html as lh

desiredvars = ['Street 1','Street 2','City', 'State', 'Zip']

doc=open('test.htm', 'r')
outhtml=lh.parse(doc)
doc.close()

myresultset = [(var, outhtml.xpath('//tr/td[contains(text(), $var)]/span[@class="boldred"]/text()', var=var)) for var in desiredvars]
print myresultset 
```

# velocity - 如何在 Velocity 模板中使用 java String.matches(str) 方法

> ID：10642517
> 
> 赞同：3
> 
> 时间：2012-05-17T19:46:46.220
> 
> 标签：velocity, liferay-velocity

我正在尝试在速度模板中对用户代理进行匹配。

$ua 确实打印出来但匹配！才不是。我究竟做错了什么？

```
#set( $ua = $request.getHeader('User-Agent'))
<p>$ua</p>
#if( $ua.matches('/Windows.(NT|XP|ME|9)/')) 
<p>Matches!</p>
#end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:28:35.777

I know this is old, but the solution to this problem is that the regex provided to matches must match the ENTIRE string in order to return true. So, for example:

```
$ua.matches('Windows.(NT|XP|ME|9)') 
```

returns false, but

```
$ua.matches('.*Windows.(NT|XP|ME|9).*') 
```

will behave as you expect, returning true if Windows.(...) is in the string.

This is a bit odd and really stymied me for a while today.

PS - no slashes are required in the regex!

# .net - 公共代表int比较中的“in”是什么意思

> ID：10642518
> 
> 赞同：1
> 
> 时间：2012-05-17T19:46:48.753
> 
> 标签：.net, generics, delegates, comparison

msdn 文档 ( [http://msdn.microsoft.com/en-us/library/tfakywbh.aspx](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx) ) 报告了比较德尔门的语法，看起来像关键字“in”。

```
public delegate int Comparison<in T>(
    T x,
    T y
) 
```

“in”有什么实际意义吗？那里可能会出现其他关键字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:50:14.457

`in`表示泛型参数是逆变的。这意味着，在这种情况下，您可以将 a 分配`Comparison<Base>`给 a `Comparison<Derived>`。

您可以这样做，因为`Comparison<Derived>`变量可以接受采用`Base`类型参数的方法。当您调用 a`Comparison<Derived>`时，您需要将`Derived`变量传递给接受参数的方法，这些变量恰好是有效`Base`参数。这意味着将 a 分配给 a 是有意义`Comparison<Base>`的`Comparison<Derived>`。

的反义词`in`是（自然）`out`。这意味着参数是协变的，并且可以将泛型分配给`Derived`泛型`Base`。例如，这将用于指定委托的返回类型。

一种方便的方法来记住哪个是哪个：

`in`应该只用于只传入的类型。`out`只应该用于只传出的类型。

在这里阅读更多：

[in（通用修饰符）（C# 参考）](http://msdn.microsoft.com/en-us/library/dd469484.aspx)

[协变和逆变（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/ee207183.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:51:11.633

如果您熟悉[文档](http://msdn.microsoft.com/en-us/library/dd469484.aspx)，为什么不使用它们？

它将参数指定为[逆变器](http://msdn.microsoft.com/en-us/library/ee207183.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T22:05:14.510

此委托是*逆变*的，`in`关键字表示`T`仅用作输入类型。逆变的意思是定义了这个委托类型：

```
public delegate int Comparison<in T>(T x, T y); 
```

你可以这样做：

```
Comparison<Control> comp1 = (a, b) => (a.Width*a.Height - b.Width*b.Height);
Comparison<TextBox> comp2 = comp1; 
```

如果没有`in`关键字，它会抱怨第二行说它不能将一种类型转换为另一种类型。但是因为我们知道它`T`仅用于输入，所以将处理的委托分配给`Control`预期提供 (input) 的委托指针应该是合法的`TextBox`。毕竟`TextBox`会*适合*`Control`。_

另一方面存在*协方差*。它还依赖于*适合*其他类型的类型，但这次是为了结果（在这种情况下是委托的结果）。

统称为方差的协变和逆变不仅适用于泛型委托，也适用于泛型类和接口。Variance 也适用于非泛型委托和数组，但以隐式方式，因此不需要特殊关键字 - 它可以正常工作。

方差不是一个简单的主题，我无法将我的解释与 Eric Lippert 的[系列博客文章](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)进行比较。尽管它是从 2007 年开始的，并且他在那里谈到了将来时的 .NET4 C#，但它仍然是一本非常好的读物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T23:11:47.353

将“in”声明应用于类型参数意味着编译器将允许一个例程，该例程期望一个接受派生类型对象的委托，如果给定一个接受基类型对象的委托，它将很高兴。例如，从编译时的角度来看，如果给定一个可以处理所有 Animals 的委托，一个期望委托处理 Zebras 的例程将非常高兴。

然而，需要注意的重要一点是，由于不幸的实现方式`MulticastDelegate`，`Delegate.Combine`尝试将协变委托与任何`Delegate.Combine`可能导致运行时崩溃的代码一起使用，因为`Delegate.Combine`需要两个完全相同类型的委托. 如果有一个通用方法来组合不同类型的委托，那就太好了（方法本身必须被赋予一个可以被两个委托都满足的类型），尽管这种组合的产品不能是`MulticastDelegate`（因为实例该类的仅保存一种委托类型的类型信息）。然而，到目前为止，还没有这样的方法。

# css - 如果在 Firefox 中的图像上应用边框框会发生什么

> ID：10642519
> 
> 赞同：2
> 
> 时间：2012-05-17T19:46:53.047
> 
> 标签：css, firefox

我在 Firefox 中遇到了一个问题，如果将边框框应用于图像，则会在右侧创建一个间隙。

```
<div id="sl">
  <img class="der" src="https://www.google.com/logos/2012/francois_truffaut-2012-hp.jpg"/>
</div> 
```

```
#sl
{
  background-color: #ff0;
  display: inline-block; 
}

body
{
  background-color: #f00;
}

.der
{
  height: 60px;   
  display: block;
  border: 1px solid #00f;
  -moz-box-sizing: border-box;
} 
```

仅限火狐：http: [//jsfiddle.net/r2GLU/](http://jsfiddle.net/r2GLU/)

问题是为什么会出现这种行为？我想这`border-box`不应该首先应用于图像，但我认为它也不被禁止，Firefox 是唯一有问题的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:14:54.973

我认为您在 Firefox 中遇到了错误。原始的、未调整大小的图像是 163 像素高 x 421 像素长。

现在，看看 Firebug 中的计算样式，`img`有这些值（我添加了注释来显示它们是如何计算的）：

```
height: 58px;      /* img-height = box-height - box-border = 60 - 2 = 58 */
width: 149.8px;    /* img-width = img-height * aspect-ratio = 58 * (421 / 163) = 149.8 */ 
```

并且 div 具有以下值：

```
height: 60px;      /* div-height = img-height + box-border = 58 + 2 = 60 */
width: 156.967px;  /* div-width = div-height * aspect-ratio + box-border = 60 * (421 / 163) + 2 = 156.967 */ 
```

错误是最后的计算。它应该是：

```
width: 151.8px;  /* div-width = img-height * aspect-ratio + box-border = 58 * (421 / 163) + 2 = 151.8 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:12:03.650

发现问题是因为没有指定*宽度*引起的；

```
.der
{
    width:421px;
    display:block;
    border:1px solid #00f;
    -moz-box-sizing: border-box;
} 
```

这仍然是一个明显的错误。

# delphi - Delphi Chromium 组件中的 onBeforeBrowse 事件

> ID：10642520
> 
> 赞同：0
> 
> 时间：2012-05-17T19:46:59.713
> 
> 标签：delphi, delphi-xe2, tchromium

我正在尝试在带有 Chromium 组件（版本 306）的 Delphi XE2 中使用以下过程：

```
procedure TForm1.Chromium1BeforeBrowse(Sender: TObject;
  const browser: ICefBrowser; const frame: ICefFrame;
  const request: ICefRequest; navType: TCefHandlerNavtype; isRedirect: Boolean;
  out Result: Boolean); 
```

但它不起作用。Delphi 无法识别 onBeforeBrowse 事件。Chromium 似乎已正确安装，示例正在运行，我正在尝试在 GuiClient 示例中添加 onBeforeBrowse 事件处理... Delphi Chromium 组件中是否有该事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T23:14:33.157

由于您已将问题描述为*not working*，请完成所有步骤：

*   步骤1 -[`Where to check or create event handler`](https://i.stack.imgur.com/aPxxS.png)
*   第2步 -[`What happens when you don't have source paths configured`](https://i.stack.imgur.com/sPc92.png)
*   第 3 步 -[`How to configure paths to the Chromium library source code`](https://i.stack.imgur.com/MO2oy.png)
*   第4步 -[`Don't forget to include the binaries into a project's visible place`](https://stackoverflow.com/a/9587241/960757)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:02:54.547

是的..这个事件存在。您可以在 unit 中找到它的用法`cefvcl`。它的类型在`cefgui`,中声明`TOnBeforeBrowse`。

![在此处输入图像描述](../Images/df9002e934661eeb559492c7ed3d04db.png)

*稍后我可能会删除我的答案..只是为了分享屏幕截图...*

我打开 Demo 项目...双击事件 OnBeforeBrowse 并添加了`showmessage`你可以看到

关于屏幕截图..不要相信`TEdit`..我只更改本身的`DefaultUrl`属性`TChromium`;o）

# c# - 如何使用 LINQ 过滤对象列表并从函数返回

> ID：10642521
> 
> 赞同：2
> 
> 时间：2012-05-17T19:47:03.337
> 
> 标签：c#, list

我正在尝试使用 linq 过滤 C# 中的 Chord 对象（类）列表。

我在课堂上有以下功能

```
public List<Chord> FilterDictionary_byKey<Chord>(string theKey)
{
    var filteredList = from item in _chords
                       where item.KeyName == theKey
                       select item;

    return (List<Chord>)filteredList;
} 
```

上面的Chord是一个对象类型，_chords是一个List类型的类变量。

然后从我的调用代码中我尝试了以下操作：

```
List<Chord> theChords = globalVariables.chordDictionary.FilterDictionary_byKey("A"); 
```

显然试图从类中返回经过过滤的 Chord 对象列表

然而，当我编译编译器返回

错误 1 ​​无法从用法中推断方法“ChordDictionary.chordDictionary.FilterDictionary_byKey(string)”的类型参数。尝试明确指定类型参数。C:\Users\Daniel\Development\Projects\Tab Explorer\Tab Explorer\Forms\ScaleAndChordViewer.cs 75 37 Tab Explorer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:05:03.873

...<code>select LINQ 查询的推断类型`from`实际上是 an `IEnumerable<T>`，它不是填充列表或集合，而是将按需枚举的序列。将其转换为`List<T>`不会导致此枚举；相反，您应该调用`ToList()`or `ToArray()`。

要解决您遇到的错误：您的方法声明不应具有泛型类型参数，因为它的返回类型和它的任何参数都不是泛型的。只需删除`<Chord>`以下方法名称。

```
public List<Chord> FilterDictionary_byKey(string theKey)
{
    var filteredList = from item in _chords
                       where item.KeyName == theKey
                       select item;

    return filteredList.ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:49:04.543

```
List<Chord> theChords = globalVariables.chordDictionary.FilterDictionary_byKey<Chord>("A"); 
```

# java - 使用组启动 testng xml 期间出现 NullPointerException

> ID：10642523
> 
> 赞同：1
> 
> 时间：2012-05-17T19:47:19.227
> 
> 标签：java, selenium, webdriver, selenium-rc, testng

我对 TestNG 有一个非常不愉快的问题。当我尝试使用分配给它们的组启动一些测试时，会发生 NullPointerException。

测试示例：

```
public class DemonstrationTest01 extends FundamentalTest {

    private static final String LOGIN = "Fruzenshtein";
    private static final String PASSWORD = "111111";

    @Test(priority=1, groups="foo")
    public void test01() throws InterruptedException {
        basePage.logIn(LOGIN, PASSWORD)
            .checkTextPresent("Welcome, "+LOGIN+"!")
            .clickSiteLogo()
            .checkTextPresent("Welcome, "+LOGIN+"!")
            .logOut();

    }

} 
```

第二次测试：

```
public class DemonstrationTest03 extends FundamentalTest {

    @Test(priority=1, groups="foo")
    public void test03() throws InterruptedException {
        ProductPage productPage = basePage.navToCategory("Homewear")
            .checkCategoryTitle("Mugs")
            .navToProductPage(2)
            .checkTextPresent("0 items")
            .addToCart()
            .checkTextPresent("1 items");

        Assert.assertEquals(basePage.getShoppingCartTotal(), productPage.getProductPrice());

        productPage.addToCart()
            .checkTextPresent("2 items");

        Assert.assertEquals(basePage.getShoppingCartTotal(), 2*productPage.getProductPrice());
    }

} 
```

这是一个基础测试：

```
public class FundamentalTest {

    protected BasePage basePage;

    @BeforeClass
    @Parameters({ "testServer" })
    public void init(String testServer) {
        basePage = PageFactory.initElements(new FirefoxDriver(), BasePage.class);
        basePage.driver.manage().timeouts().implicitlyWait(10000, TimeUnit.MILLISECONDS);
        basePage.driver.get(testServer);
    }

    @AfterClass
    public void destruct() throws InterruptedException {
        Thread.sleep(5000);
        basePage.driver.close();
    }

} 
```

最后我的 xml 启动器：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="SingleTestSuite" >
  <parameter name="testServer"  value="https://shop.shakhtar.com/en/"/>
  <test name="StandAloneTest">
    <groups>
        <run>
            <include name="foo"></include>
        </run>
    </groups>
    <packages>
        <package name="com.shakhtar.qa.tests" />        
    </packages>         
  </test>      
</suite> 
```

NullPointerException 的原因是什么？我该如何解决？这是我的项目的[链接](http://dl.dropbox.com/u/29572172/Shakhtar.rar)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-14T12:05:22.250

只需将 (alwaysRun = true) 添加到 @BeforeClass 注释。

所以你的基础课程应该看起来像 -：

公共类 FundamentalTest {

```
protected BasePage basePage;

@BeforeClass(alwaysRun = true)
@Parameters({ "testServer" })
public void init(String testServer) {
    basePage = PageFactory.initElements(new FirefoxDriver(), BasePage.class);
    basePage.driver.manage().timeouts().implicitlyWait(10000, TimeUnit.MILLISECONDS);
    basePage.driver.get(testServer);
}

@AfterClass
public void destruct() throws InterruptedException {
    Thread.sleep(5000);
    basePage.driver.close();
} 
```

}

非常感谢，这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:32:29.953

似乎问题在于`Function_Library(FundamentalTest)`您需要在访问方法之前先运行它。

# iphone - 解析自定义字符串给出错误的日期

> ID：10642524
> 
> 赞同：0
> 
> 时间：2012-05-17T19:47:23.770
> 
> 标签：iphone, ios, nsstring, nsdateformatter

我有一个日期格式为的字符串，`HH:mm`例如它可以`12:00`或，我通过将其设置为日期格式将其`22:00`输入到我的中。`NSDateFormatter`我只需要构建一个自定义日期。问题是当我完成此操作时，我得到解析`2012-05-17 12:00:00 +0000`的字符串，就好像日期是 5 月 17 日一样。

```
NSDate *today = [NSDate date];
NSDateFormatter *output = [[NSDateFormatter alloc] init];
[output setDateFormat:[NSString stringWithFormat:@"yyyy-MM-d %@:00 +0000",@"12:00"]];
NSString *finalTodayString = [output stringFromDate:today];
parsedDateString = [NSString stringWithString:finalTodayString]; 
```

问题是当我再次解析它以包含`HH:mm`我得到完全不同的东西时。例如，如果我有这个代码。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-d HH:mm ZZZ"];
NSDate *date = [dateFormatter dateFromString:fullDateString];

NSDateFormatter *dateFormmater2 = [[NSDateFormatter alloc] init];
[dateFormmater2 setDateFormat:@"HH:mm"];
NSString *string =[dateFormmater2 stringFromDate:date]; 
```

然后`string` **应该**是`12:00`，而是变成了`14:00`。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:51:43.443

从第一个代码中删除格林威治子午线时间“+0000”

# matlab - 从 m 文件设置 Simulink 模型 Inport 值

> ID：10642526
> 
> 赞同：0
> 
> 时间：2012-05-17T19:47:36.130
> 
> 标签：matlab, model, simulink

在过去的几个小时里，我一直在做大量的研究，但我似乎无法弄清楚如何获取和设置 Inport 框的值。我有一个简单的模型，它有一个入口和一个出口，它们相互连接。我想将输入端口值设置为 2 并运行我的模拟，看看我的输出端口是否设置正确。我读到您不能使用 set_param 来设置该值，但您必须使用 sim()，但我对此没有任何运气。因此，如果有人知道如何查看输入框中的数据和/或如何设置它，我将不胜感激。谢谢！

卢卡斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:57:23.057

端口`in`和`out`Simulink 中的功能并不像您想象的那样工作。当您创建子系统时需要它们 - 您自己的 Simulink 模块，而不是您的`in`和`out`端口。

但是当你只是想要一个模型，并在其中传递一些数据，然后将结果传递给 Matlab，那么你需要`To workspace`和`From workspace`块。在他们的选项中分配了一些变量名，因此您可以从`.m`文件中设置输入数据并在 matlab 变量中获取结果。

Block`From workspace`接受矩阵变量，但如果你只想传递一个数字，你可以使用 block`Const`并用变量名填充它的值。

这是一个屏幕截图、一个`in`、和块的示例： 在示例中`out`， 我有输入参数*x* (block )、子系统和输出参数 y (block )。在子系统内部，我使用和块来获取和返回值。`to workspace``const`![在此处输入图像描述](../Images/bbe772a95103ed0f024a989606115b69.png)*`const``Gain5``To workspace``in``out`*

# c#-4.0 - 如何配置 HttpClient 在收到 301 HTTP 状态码时不自动重定向？

> ID：10642528
> 
> 赞同：58
> 
> 时间：2012-05-17T19:47:59.237
> 
> 标签：c#-4.0, asp.net-web-api, dotnet-httpclient

考虑一个重定向的 ASP.NET Web API 服务

```
public class ThisController : ApiController
{
    /* more methods */

    public override HttpResponseMessage Post()
    {
        var result = new HttpResponseMessage(HttpStatusCode.MovedPermanently);
        // Post requests should be made to "ThatController" instead.
        string uri = Url.Route("That", null);
        result.Headers.Location = new Uri(uri, UriKind.Relative);
        return result;
    }
} 
```

尝试验证将数据发布到“api/this”会将您重定向到“api/that”，我有以下测试方法：

```
[TestMethod]
public void PostRedirects()
{
    using (var client = CreateHttpClient("application/json"))
    {
        var content = CreateContent(expected, "application/json");
        using (var responseMessage = client.PostAsync("api/this", content).Result)
        {
            Assert.AreEqual(HttpStatusCode.MovedPermanently, responseMessage.StatusCode);
            Assert.AreEqual(new Uri("https://api.example.com/api/that"), responseMessage.Headers.Location);
        }
    }
}

protected HttpClient CreateHttpClient(string mediaType)
{
    var client = new HttpClient();
    client.BaseAddress = new Uri("http://api.example.com/");
    MediaTypeWithQualityHeaderValue headerValue = MediaTypeWithQualityHeaderValue.Parse(mediaType);
    client.DefaultRequestHeaders.Accept.Add(headerValue);
    client.DefaultRequestHeaders.AcceptEncoding.Add(StringWithQualityHeaderValue.Parse("gzip"));
    client.DefaultRequestHeaders.AcceptEncoding.Add(StringWithQualityHeaderValue.Parse("deflate"));
    client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue(new ProductHeaderValue("MyProduct", "1.0")));
    client.MaxResponseContentBufferSize = 1024*1024*8;
    return client;
}

protected ObjectContent CreateContent(T model, string mediaType)
{
    var requestMessage = new HttpRequestMessage();
    MediaTypeFormatter mediaTypeFormatter = null;
    switch (mediaType)
    {
        case "application/json":
            mediaTypeFormatter = new JsonMediaTypeFormatter();
            break;

        case "application/xml":
        case "text/xml":
            mediaTypeFormatter = new XmlMediaTypeFormatter();
            break;

        default:
            Assert.Fail();
            break;
    }

    return requestMessage.CreateContent(
        model,
        new[] { mediaTypeFormatter },
        new FormatterSelector());
} 
```

真正发生的情况是 HTTP 状态代码使用正确的 Location 标头发送到客户端，然后 HttpClient 会自动在该 URI 上执行 GET。结果，我的测试从未通过。

如何将 HttpClient 配置为在收到 301 时不自动重定向，以便我可以验证我的服务器响应？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-18T05:38:59.220

尝试：

```
var handler = new HttpClientHandler() 
{
    AllowAutoRedirect = false
};

HttpClient client = new HttpClient(handler); 
```

# javascript - Javascript“预设”一个变量？

> ID：10642529
> 
> 赞同：6
> 
> 时间：2012-05-17T19:48:01.693
> 
> 标签：javascript, jquery, variables

我正在尝试声明一个变量，其值是当时未设置的另一个变量。

```
var add = 1 + three;
var three = 3;
document.getElementById('thediv').innerHTML = add;
//results in "NaN" 
```

[http://jsfiddle.net/seSMx/1/](http://jsfiddle.net/seSMx/1/)

有没有办法使用 Jquery/Javascript 做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T19:51:32.590

你可以把 add 变成一个函数，

[http://jsfiddle.net/seSMx/3/](http://jsfiddle.net/seSMx/3/)

```
function add() {
   return 1 + (three || 0);
}

var three = 3;
document.getElementById('thediv').innerHTML = add(); 
```

虽然，在我看来，这很难理解。我会更进一步，并提出`three`一个论点`add`

```
function add(three) {
   return 1 + (three || 0);
}

document.getElementById('thediv').innerHTML = add(3); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T19:52:05.087

这是你的目的吗？

```
var add = "1 + three";
var three = 3;
document.getElementById('thediv').innerHTML = eval(add); 
```

# php - 包含使用相对路径的类

> ID：10642530
> 
> 赞同：2
> 
> 时间：2012-05-17T19:48:19.750
> 
> 标签：php, include, relative-path

我正在尝试在我的一个类中使用一个库，即 PHPass 库。

这是我的基本目录结构：

```
/ (root)
    / mysite
        /application
            /models
                User_model.php
            /libraries
                PasswordHash.php 
```

我想包含`PasswordHash.php`在`User_model.php`. 我试过这样做：

```
// Load PHPass library
include_once('..\libraries\PasswordHash.php');
$hasher = new PasswordHash(8, TRUE); 
```

但是PHP找不到文件：

```
Message: include_once(..\libraries\PasswordHash.php) [function.include-once]: failed to open stream: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:52:11.467

您应该使用 / 而不是 \。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:52:29.883

这取决于您当前的工作目录，而不是它现在实际解析的脚本。尝试倾倒

```
getcwd() 
```

函数输出找出当前的工作目录。为了使用当前文件路径，您可以尝试

```
realpath(__FILE__) 
```

然后构造它的相对路径。此外，为了不混淆斜线，您可以使用 DIRECTORY_SEPARATOR 常量来分隔文件夹，例如：

```
require_once(realpath(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR.'classes'.DIRECTORY_SEPARATOR.'class.php') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:55:41.427

```
include_once('../libraries/PasswordHash.php'); 
```

尝试使用“/”而不是“\”。

# ios - 通知是否可以增加徽章计数而不是将其设置为绝对值？

> ID：10642533
> 
> 赞同：0
> 
> 时间：2012-05-17T19:48:45.570
> 
> 标签：ios

我正在排队本地通知并将徽章计数设置为 1。

如果我排队几个然后退出应用程序，那么当他们触发每个应用程序时，将徽章计数设置为 1，而不是增加它。即假设我排队 3，然后在他们全部触发后，应用程序上的徽章计数将显示为 1。

有没有一种方法可以在每次触发时使徽章计数增加一？

设置通知时检查 applicationIconBadgeNumber 不是一个选项 - 因为考虑这样的场景：

应用程序安排通知 A 1 分钟，当前徽章计数为 0，因此 notification.count = 1

应用程序安排通知 B 10 分钟，最后一个徽章计数为 1，因此 notification.count = 2

应用程序安排通知 C 5 分钟，最后一个徽章计数为 2，因此 notification.count = 3

但是通知 C 在 B 之前触发，因此当它触发时，徽章计数将设置为 3，这是不正确的，然后当 B 触发时，计数变为 2，这也是不正确的。

如果没有自动增加计数的方法，那么应用程序将不得不实现一个复杂的方案，在该方案中它会记住排队的所有内容以及每个的时间。有简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:29:18.673

```
int num = [[UIApplication sharedApplication]applicationIconBadgeNumber];

    if (num == 0) {
         [[UIApplication sharedApplication]setApplicationIconBadgeNumber:1];
    }

    else if (num >= 1) {
        [[UIApplication sharedApplication]setApplicationIconBadgeNumber:num + 1];
    } 
```

我认为这将解决它。

# wcf - HttpWebRequest 有效。WebClient.UploadFile 没有

> ID：10642536
> 
> 赞同：1
> 
> 时间：2012-05-17T19:48:57.753
> 
> 标签：wcf, file-upload, httpwebrequest, webclient

我以为我找到了一种通过**使用 WebClient.UploadFile 而不是 HttpWebRequest**来简化代码的方法，但是我最终在服务器端得到了一个文件，该文件太短且损坏了几十个字节。知道错误在哪里吗？

谢谢

**使用 HttpWebRequest（工作正常）：**

```
 HttpWebRequest req = (HttpWebRequest)HttpWebRequest
                                 .Create("http://" +
                                  ConnectionManager.FileServerAddress + ":" +
                                  ConnectionManager.FileServerPort +
                                  "/binary/up/" + category + "/" +  
                                  Path.GetFileName(filename) + "/" + safehash);

        req.Method = "POST";
        req.ContentType = "binary/octet-stream";
        req.AllowWriteStreamBuffering = false;
        req.ContentLength = bytes.Length;
        Stream reqStream = req.GetRequestStream();

        int offset = 0;
        while (offset < ____)
        {
            reqStream.Write(bytes, offset, _________);
             _______
             _______
             _______

        }
        reqStream.Close();

        try
        {
            HttpWebResponse resp = (HttpWebResponse) req.GetResponse();
        }
        catch (Exception e)
        {
            _____________
        }
        return safehash; 
```

**使用 WebClient（服务器端损坏的文件）：**

```
 var client = new WebClient();
      client.Encoding = Encoding.UTF8;
      client.Headers.Add(HttpRequestHeader.ContentType, "binary/octet-stream");

      client.UploadFile(new Uri("http://" +
              ConnectionManager.FileServerAddress + ":" +
              ConnectionManager.FileServerPort +
              "/binary/up/" + category + "/" +
              Path.GetFileName(filename) + "/" + safehash), filename);

      return safehash; 
```

服务器端是一个 WCF 服务：

```
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "up/file/{fileName}/{hash}")]

    void FileUpload(string fileName, string hash, Stream fileStream); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:31:08.477

`WebClient.UploadFile`以 multipart/form-data 格式发送数据。您想要使用与使用 HttpWebRequest 的代码等效的`WebClient.UploadData`方法是：

```
var client = new WebClient();
client.Encoding = Encoding.UTF8;
client.Headers[HttpRequestHeader.ContentType] = "application/octet-stream";
byte[] fileContents = File.ReadAllBytes(filename);
client.UploadData(new Uri("http://" + ConnectionManager.FileServerAddress + ":" +
       ConnectionManager.FileServerPort +
       "/binary/up/" + category + "/" +
       Path.GetFileName(filename) + "/" + safehash), fileContents); 
```

# iphone - 如何显示一条 iPhone 消息（警报？），它看起来像在您切换静音模式时显示的那样

> ID：10642542
> 
> 赞同：2
> 
> 时间：2012-05-17T19:49:33.987
> 
> 标签：iphone, ios, cocoa-touch

当您将 iPhone 切换到静音模式或从静音模式切换时，或通过按侧边按钮调整音量时，屏幕中间会出现一个图标。Cocoa Touch 是否允许开发人员使用这种样式的警报？如果是这样，它叫什么？

![在此处输入图像描述](../Images/5b377faf7035c94aa138076f4ef4eeee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:51:18.590

你应该看看[`MBProgressHUD`](https://github.com/jdg/MBProgressHUD "MBProgressHUD")

它实际上是称为 UIProgressHUD 的未记录的私有 iOS 代码的复制品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:52:49.063

您不需要progressHUD，但更多的是StatusHUD。在这里查看一个好的：[https ://github.com/samvermette/SVStatusHUD](https://github.com/samvermette/SVStatusHUD)

就像 sam（StatusHUD 的创建者）所说：

> SVStatusHUD 模仿了 iOS 上方向锁定、静音和音量变化上显示的 HUD。它只能用于响应硬件或其他重要通知（例如，当您的应用检测到配件时）。如果您只是想显示操作的进度或成功，您应该查看 SVProgressHUD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:37:37.947

请注意，您不应该使用像 UIProgressHUD 这样的私有 API，否则 Apple 会在您提交应用时拒绝您的应用。我建议您通过操作视图并将其添加为子视图来构建自己的设计，或者使用这样做的免费库。如果你做自己的视图（就像我在我的应用程序中所做的那样），你可以通过使用 alpha 属性轻松地显示和隐藏它。这是一个例子：

首先创建一个 NIB 文件并根据需要进行设计。记得重新调整它的大小（比如 260*200 或任何你喜欢的），让它看起来像一个通知。添加您想要的组件并为其提供标签，以便您以后可以访问它们。假设在我的示例中我只添加了一个`UILabel`.

在您想使用自定义通知的视图中，`UIView`在 .h 文件中创建一个对象（这里我称之为`pleaseWait`）并在 .m 文件中（通常在`viewDidLoad`）中加载它，如下所示：

```
NSArray *nibMyNiceAlert = [[NSBundle mainBundle] loadNibNamed:@"myNiceAlertNibName" owner:self options:nil];
((UILabel*)[[nibMyNiceAlert objectAtIndex:0] viewWithTag:1]).text = NSLocalizedString(@"The text the user will see", @"my explanation of this text!");
pleaseWait = [nibConnecting objectAtIndex:0];
pleaseWait.frame = CGRectMake(30, 70, 260, 200);
pleaseWait.alpha = 0;
pleaseWait.clipsToBounds = YES;
pleaseWait.layer.cornerRadius = 20;
[self.view addSubview:pleaseWait]; 
```

请注意，`clipsToBounds`需要`cornerRadius`库`QuartzCore/QuartzCore.h`并用于使视图的边缘变圆。请注意，alpha 从 0 开始，因为我不想在加载时看到我的警报。

现在每次您想显示此通知时：

```
[UIView beginAnimations:@"FadeIn" context:nil];
[UIView setAnimationDuration:0.2];
pleaseWait.alpha = 0.65;
[UIView commitAnimations]; 
```

并删除它：

```
[UIView beginAnimations:@"FadeOut" context:nil];
[UIView setAnimationDuration:0.2];
pleaseWait.alpha = 0;
[UIView commitAnimations]; 
```

请记住，您可以在查看通知标签之前随时更改通知标签中的文本，方法是在标签 1 处访问对象，就像我在加载阶段所做的那样。

我希望这对你有所帮助。

# mysql - 如何在 mySQL 中复制一堆记录

> ID：10642552
> 
> 赞同：0
> 
> 时间：2012-05-17T19:50:40.820
> 
> 标签：mysql, sql, records

如何在 mySQL 中复制一堆记录？

我有这样的记录：

```
ID - name - year
-----------------
1 jasmine - 1999
2 peter   - 1999
3 fleur   - 1999 
```

如何`WHERE year='1999'`在新的一年中将所有名称复制到新行？

```
ID - name - year
-----------------
1 jasmine - 1999
2 peter   - 1999
3 fleur   - 1999
4 jasmine - 2000
5 peter   - 2000
6 fleur   - 2000 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:51:57.870

```
INSERT INTO mytable (name, year)
SELECT (name, 2000) FROM mytable WHERE year = 1999; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:24:39.400

请试试这个。代替`2000`你可以随意使用。

```
INSERT INTO duplicate_entry (name, year) 
SELECT name, '2000' FROM duplicate_entry where year='1999' 
```

祝你好运。

# .net - 在 .Net 项目中配置和使用 Broker API

> ID：10642554
> 
> 赞同：4
> 
> 时间：2012-05-17T19:50:50.463
> 
> 标签：.net, tridion, tridion-content-delivery

有人可以向我指出有关设置代理 API 以从 .Net 应用程序使用的文档吗？我已经查看了关于 livecontent 的文档，但是我没有看到任何关于设置和配置要从 .net 项目中使用的代理 API 的具体内容：文档都与服务器相关。

我试图通过检查 OData 服务的设置方式将其拼凑起来，但我不断收到下面列出的错误。所以我错过了一步，但是哪一步呢？我需要更新一些 CD_*_CONF.xml 配置文件吗？

还有一个问题。是我还是 Tridion 文档有些不完整？关于如何使用产品的关键 API 之一的基本说明似乎是一个合理的要求。如果此文档存在，我提前道歉，但我错过了。

我遇到的错误

无法初始化类 com.tridion.storage.StorageManagerFactory

或者

ClassNotFoundException：com.tridion.broker.querying.Query

[链接到实时内容上的“安装”主题](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=InstallationOverview.xml&docid=concept_A4D40A60D4DF46BBBF24ED9D748EC979&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocconcept_A4D40A60D4DF46BBBF24ED9D748EC979)

更新

感谢您及时的回复。我查看了“将服务器角色安装为 .net...”一文。看起来我已按照这些步骤操作，但我的应用程序找不到 JAR 文件。在这种情况下，cd_broker.jar 位于我的 .net 项目的 root/bin/lib 目录中

Java.Lang.ClassNotFoundException：com.tridion.broker.querying.Query

更新 2

我正在使用 Tridion 2011 SP1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:09:12.907

我现在假设您使用的是 SDL Tridion 2011 SP1，所以我认为这是您正在寻找的链接：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_708AA488429D4457AC303DD121B22183](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_708AA488429D4457AC303DD121B22183)

您需要在应用程序的 bin 目录中创建一个 lib 和 config 文件夹。*.config 文件放在 config 文件夹中，而 install 文件夹中角色的 jar 文件放在 lib 目录中。

您需要确保您有一个可访问的有效许可文件，并确保您的所有配置文件都指向它（或者您可以将文件保存在配置文件夹本身中）。

如果您使用的是 OData，我建议您将其设置为单独的 Web 应用程序并从您的应用程序中查询它。文档在这里：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930)

您将需要更新所有配置文件以设置正确的绑定等，并指向您的代理数据库或文件系统。这是描述here：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_005JJFGGGD8858699HHFHJF](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_005JJFGGGD8858699HHFHJF)

希望有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T20:34:42.193

如果您在服务器上设置了 Tridion Content Delivery，那么您有两种广泛的方法可以从 .NET 应用程序与该服务器进行交互。

1.  您可以使用 Content Delivery .NET API
2.  您可以使用内容交付 OData Web 服务

选项 1 意味着您的代码必须在安装了相关 Tridion Content Delivery 模块的机器上运行。克里斯给出的指示应该可以帮助你。您还可以从[此处](https://www.sdltridionworld.com/images/Content%20Delivery%20ASP.NET%20API_tcm89-20005.chm)获取 CHM 格式的 API 参考（首先登录 SDLTridionWorld，然后访问 URL）。

选项 2 意味着您的代码可以在任何地方运行，您只需通过 OData Web 服务与 Tridion 的内容交付进行交互。[Andrew 在这篇关于 SDL Tridion World](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/using-odata-with-tridion-and-net.aspx)的文章中介绍了该设置。

许多 Microsoft 技术与 OData 服务紧密集成，因此设置列出某个模式的组件表示的 ASP.NET Web 服务在很大程度上可以通过连接现有的 ASP.NET 控件来完成。

如果您感觉特别有管理能力：Excel 还可以连接到 OData 服务并从那里读取其源数据。如果您想快速计算 Content Delivery Storage 中某些项目类型的数量，这很有趣。

# jdbc - 通过 Dropbox 与两个开发人员一起使用 JDBC

> ID：10642558
> 
> 赞同：0
> 
> 时间：2012-05-17T19:51:07.030
> 
> 标签：jdbc, dropbox, derby

我是一名计算机科学专业的学生，​​也是我的项目合作伙伴，我正在开展一个项目，我们需要为我们的软件开发数据库 (JDBC)。我们有能力做到这一点，但在大门外撞到了一堵砖墙。我们的整个项目都存储在我们的共享访问保管箱帐户中，因此我们可以处理相同的类等。在我们尝试开发存储在保管箱上的数据库之前，这一直很好。每次我们尝试在我们的 IDE 中打开我们的项目时，我们都会收到一个需要解决的问题：找不到 derby.jar 因此，我们每个人都会为项目的 derby 文件创建冲突的路径名，因为 Dropbox 存储在我们每台单独的机器上。例如 "C:..\DropBox\Project\derbyclient.jar" 这反过来会阻止彼此的 IDE 与我们创建的数据库同步。真是一团糟，任何帮助（或替代方法）将不胜感激。本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:00:38.850

如何确保您的保管箱文件夹在两台计算机上具有完全相同的路径。这可能需要您重新安装或重新配置 Dropbox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:05:18.347

考虑使用真正的源代码控制，例如 Subversion、Git、Mercurial 等。如果您需要返回到早期版本的代码，这也很方便。记录更改也很棒。

# z3 - z3中的叉积

> ID：10642565
> 
> 赞同：1
> 
> 时间：2012-05-17T19:51:33.533
> 
> 标签：z3

z3 是否为两个列表提供了叉积函数？如果不是，是否可以在不使用高阶函数或使用提供的列表函数的情况下定义一个？我一直无法尝试定义一个。我知道如何使用 map 定义一个，但我认为 z3 不支持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:53:48.370

您可以在 SMT 2.0 中声明叉积函数。但是，任何非平凡的财产都需要归纳证明。Z3 目前不支持归纳证明。因此，它只能证明非常简单的事实。顺便说一句，通过列表的交叉产品，我假设您想要一个给定列表`[a, b]`并`[c, d]`返回列表或对的函数`[(a, c), (a, d), (b, c), (b, d)]`。这是一个定义`product`函数的脚本。该脚本还演示了 SMT 2.0 语言的一些限制。例如，SMT 2.0 不支持参数公理或函数的定义。所以，我使用未解释的排序来“模拟”它。我还必须定义辅助功能`append`和`product-aux`. 您可以在线尝试此示例：[http ://rise4fun.com/Z3/QahiP](http://rise4fun.com/Z3/QahiP)

该示例还证明了以下微不足道的事实，即 if `l = product([a], [b])`, then`first(head(l))`必须是`a`。

如果您有兴趣证明非平凡的属性。我看到两个选项。我们可以尝试使用 Z3 来证明基本案例和归纳案例。这种方法的主要缺点是我们必须手动创建这些案例，并且可能会出错。另一种选择是使用交互式定理证明器，例如[Isabelle](http://www.cl.cam.ac.uk/research/hvg/Isabelle/)。顺便说一句，Isabelle 有更丰富的输入语言，并提供了调用 Z3 的策略。

有关 Z3 中代数数据类型的更多信息，请访问在线教程[http://rise4fun.com/Z3/tutorial/guide（Section](http://rise4fun.com/Z3/tutorial/guide) Datatypes）。

```
;; List is a builtin datatype in Z3
;; It has the constructors insert and nil

;; Declaring Pair type using algebraic datatypes
(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))

;; SMT 2.0 does not support parametric function definitions.
;; So, I'm using two uninterpreted sorts.
(declare-sort T1)
(declare-sort T2)
;; Remark: We can "instantiate" these sorts to interpreted sorts (Int, Real) by replacing the declarations above
;; with the definitions
;; (define-sort T1 () Int)
;; (define-sort T2 () Real)

(declare-fun append ((List (Pair T1 T2)) (List (Pair T1 T2))) (List (Pair T1 T2)))
;; Remark: I'm using (as nil (Pair T1 T2)) because nil is overloaded. So, I must tell which one I want.
(assert (forall ((l (List (Pair T1 T2)))) 
                (= (append (as nil (List (Pair T1 T2))) l) l)))
(assert (forall ((h (Pair T1 T2)) (t (List (Pair T1 T2))) (l (List (Pair T1 T2))))
                (= (append (insert h t) l) (insert h (append t l)))))

;; Auxiliary definition
;; Given [a, b, c], d  returns [(a, d), (b, d), (c, d)] 
(declare-fun product-aux ((List T1) T2) (List (Pair T1 T2)))
(assert (forall ((v T2))
                (= (product-aux (as nil (List T1)) v)
                   (as nil (List (Pair T1 T2))))))
(assert (forall ((h T1) (t (List T1)) (v T2))
                (= (product-aux (insert h t) v)
                   (insert (mk-pair h v) (product-aux t v)))))

(declare-fun product ((List T1) (List T2)) (List (Pair T1 T2)))

(assert (forall ((l (List T1)))
                (= (product l (as nil (List T2))) (as nil (List (Pair T1 T2))))))

(assert (forall ((l (List T1)) (h T2) (t (List T2)))
                (= (product l (insert h t))
                   (append (product-aux l h) (product l t)))))

(declare-const a T1)
(declare-const b T2)
(declare-const l (List (Pair T1 T2)))

(assert (= (product (insert a (as nil (List T1))) (insert b (as nil (List T2))))
           l))

(assert (not (= (first (head l)) a)))

(check-sat) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:23:19.057

smt-lib 格式没有#include 指令。Z3 提供了几种其他方式来提供输入。Python 输入格式利用了所有 Python，因此自然支持导入文件。[在http://rise4fun.com/z3py](http://rise4fun.com/z3py)上有一个关于 Z3Py 的教程

# android - 如何在 Android 应用程序中为 Webview 使用谷歌翻译 api？

> ID：10642569
> 
> 赞同：2
> 
> 时间：2012-05-17T19:51:44.253
> 
> 标签：android, webview, google-translate

如何使用 google translate api 翻译 android Webview 中的网站内容。

## 解释

我在我的应用程序 throw webview 中显示网页。我想根据 android 设备的 Locale 翻译网页内容

请任何人告诉它是否可能是的意思是如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:03:26.393

API 现在仅供付费开发人员使用（可悲，但不可避免），但它是可用的。见这里：[https ://developers.google.com/translate/](https://developers.google.com/translate/)

# php - php 通过 page1 的链接发送参数并在第 2 页启动 javascript

> ID：10642571
> 
> 赞同：0
> 
> 时间：2012-05-17T19:51:56.237
> 
> 标签：php, javascript

在第 1 页上，我尝试通过 url 将一些参数传递给 page2。我想启动 page2 并选择选项，就像我在 page2 上选择它们一样。

如何从第 1 页传递 #divOptionToTake、#divSelectChannel_btnSubmit、#selected_channel_new、#selChannels、#frmSelectChannel 并执行它？谢谢。

**第1页**

...../page2.php?selected_channel=facebook&option_to_take

**第2页**

```
<html>

  <script type="text/javascript">        
    $(document).ready(function() {

        <?php if($option_to_take == ""){ ?>
        $.blockUI({ message: $('#divOptionToTake'), css: { width: '420px' } }); 
        <?php } ?>

        // SELECT CHANNEL
        $('#divSelectChannel_btnSubmit').click(function() {                
            $.unblockUI();
            $('#selected_channel_new').val($('#selChannels').val())
            $('#frmSelectChannel').submit();
            //return true;               
        });            

    });  
  </script>

</html> 
```

**表格的代码在这里。**

```
<form name="frmSelectChannel" id="frmSelectChannel" action="" method="POST">
<input type="hidden" name="task" value="select_channel" />
<input type="hidden" name="option_to_take" value="new campaign" />
<input type="hidden" name="selected_channel" id="selected_channel_new" value="facebook" />
<div id='divSelectChannel'>
        <select id='selChannels' class='span3'>
                        <option value="facebook" <?php echo (($selected_channel == "facebook") ? "selected='selected'" : ""); ?>>facebook</option>
                        <option value="twitter" <?php echo (($selected_channel == "twitter") ? "selected='selected'" : ""); ?>>twitter</option>                                                         
        </select>
            <input class='btn btn-primary' type='submit' id='divSelectChannel_btnSubmit' value='Submit' />
        &nbsp;&nbsp;
              <input class='btn' type='button' id='divSelectChannel_btnBack' value='Back' />
        </div>
   </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:21:42.917

您需要使用`$_GET`全局变量检索 url 的值；如何执行此操作的示例：

```
<?php
if (isset($_GET['option_to_take']) {
    $option_to_take = $_GET['option_to_take'];
}
else {
    $option_to_take = '';
}
?> 
```

如果我误解了您想要的内容，请告诉我，以便我修改此答案。

# java - 一个创造人的小程序

> ID：10642576
> 
> 赞同：0
> 
> 时间：2012-05-17T19:52:05.813
> 
> 标签：java

我想制作一个程序来创建人员并显示这些人员的列表，但不知道我是否做得很好，也没有使用“arraylist”来打印结果的逻辑任何人都可以帮助我？非常感谢。

```
package person;
import java.util.*;

public class Person {
    public int Id;
    public String Name;
    public boolean Show;
    public ArrayList people;

    public Person(
            int identificator,
            String thename,
            boolean showornot
            ){
        this.Id = identificator;
        this.Name = thename;
        this.Show = showornot;
    }

    public void InsertPerson(Person person, ArrayList list){
        this.people = list;
        list.add(person);
    }

} 
```

主要的：

```
package person;
import java.util.*;

public class Trying {

    public static void main(String[] args) {
     Scanner stdin = new Scanner(System.in);
     Scanner stdin2 = new Scanner(System.in);
     Scanner stdin3 = new Scanner(System.in);
     Scanner stdin4 = new Scanner(System.in);

     ArrayList list_of_people;
     list_of_people = new ArrayList();

     int option = 0;
     int identificador = 0;
     String name = "";
     boolean show = true;    

    name = “Toni”;

         Person person1 = new Person(identificador, name, true);
         person1.InsertPerson (person1, list_of_people);
         Iterator ite = list_of_people.iterator();
         while(ite.hasNext()){
             System.out.println(list_of_people);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:55:53.337

**问题：**您正在创建数组列表“人”作为每个“人”的属性（也就是说，每个人都有一个人列表）

**Quickfix：****转到**`public ArrayList people;`您的 Trying课程。也转到您的Trying 课程。**`public void InsertPerson(Person person, ArrayList list)`**

 ****更好的解决方法：** 我建议使用 PeopleManager 类——它包含数组列表“人”和 InsertPerson 方法。然后，您在**尝试**构建您的人员列表中使用**PeopleManager 。**

 **```
public class PersonManager
{
    ArrayList<Person> people;

  public PersonManager()
  {
      people = new ArrayList<Person>();
  }

  public void InsertPerson(Person person)
  {
      people.add(person);
  }     
} 
```

然后，您可以从 Person 中删除 arraylist，并从 Person 中删除方法 InsertPerson。您需要在 Trying 类中创建一个 PersonManager。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:59:54.800

What everyone else is saying is true, but I think theoretically your code should still work. There is a problem with this line however...

```
while(ite.hasNext()){
    System.out.println(list_of_people);
} 
```

You are outputting the whole list every iteration and probably infinite looping. Change it to something like this...

```
while(ite.hasNext()){
    Person curPerson = (Person)ite.next(); 
    System.out.println(curPerson.Name);
} 
```

A slightly more elegant solution is to ditch the iterator for a foreach loop...

```
for (Person person : list_of_people) {
    System.out.println(person.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:55:05.060

`public ArrayList people;`不属于 Person 类。我建议使用您的客户端代码（Trying 类）或创建一个继承自 ArrayList 的类 People。然后，您可以根据需要向该类添加一个 InsertPerson 函数。

我还建议为您的集合使用 ArrayList 而不是 ArrayList。在此处查看[通用集合教程](http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html)。您还应该创建 getter/setter 方法，而不是使用公共字段。

因此，您的课程将是：

```
public class Person { // ...

public class People extends ArrayList<Person> {
    public void InsertPerson(Person person) {
        this.add(person); 
    }
 // ... 
```****

# python - 用于 python 的高效 oodbms？

> ID：10642580
> 
> 赞同：1
> 
> 时间：2012-05-17T19:52:38.497
> 
> 标签：python, database, web-applications, object-oriented-database

谁能告诉我并描述一下 oodbms 实现可用于在其上存储所有持久数据的生产性 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:00:10.097

也许你应该给[ZODB](http://www.zodb.org/)看看。即使用户社区不像其他一些 DBMS 那样大，它也很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:35:34.480

经过一些研究和基准测试。我发现[MongoDB 很有](http://www.mongodb.org/)效率，因为：

MongoDB（来自“humongous”）是一个可扩展的、高性能的开源 NoSQL 数据库。MongoDB 用 C++ 编写，具有以下特点：

1.  面向文档的存储 » 具有动态模式的 JSON 样式文档提供了简单性和强大功能。

2.  完全索引支持 » 任何属性的索引，就像您习惯的那样。

3.  复制和高可用性 » 跨 LAN 和 WAN 镜像，以实现规模化和高枕无忧。

4.  自动分片 » 在不影响功能的情况下水平扩展。

5.  查询 » 丰富的基于文档的查询。

6.  快速就地更新 » 用于无争用性能的原子修饰符。

7.  Map/Reduce » 灵活的聚合和数据处理。

8.  GridFS » 存储任何大小的文件，而不会使您的堆栈复杂化。

9.  商业支持 » 提供企业级支持、培训和咨询。

编辑1：

在 python 中提供 mongodb 的包：

*   **Humongolus** Humongolus 是一个用于 Python 和 MongoDB 的轻量级 ORM 框架。这个名字来自 MongoDB 和 Homunculus（一个微型但完全成形的人体的概念）的组合。Humongolus 允许您创建具有强大验证的模型/模式。它尝试尽可能地 Pythonic，并尽可能公开 pymongo 游标对象。代码可在 github 下载。GitHub 上也提供了教程和使用示例。

*   **MongoKit** MongoKit 框架是 PyMongo 之上的一个类似 ORM 的层。还有一个 MongoKit 谷歌组。

*   **Ming** Ming (the Merciless) 是一个库，它允许您在 Python 应用程序中对 MongoDB 数据库强制执行模式。它是由 SourceForge 在迁移到 MongoDB 的过程中开发的。有关更多详细信息，请参阅介绍性博客文章。

*   **MongoAlchemy** MongoAlchemy 是 PyMongo 之上的另一个类似 ORM 的层。它的 API 受到 SQLAlchemy 的启发。代码在 github 上可用；有关详细信息，请参阅教程。

*   **MongoEngine** MongoEngine 是 PyMongo 之上的另一个类似 ORM 的层。它允许您使用受 Django ORM 启发的语法为文档和查询集合定义模式。代码在 github 上可用；有关详细信息，请参阅教程。

*   **Minimongo** minimongo 是 MongoDB 的轻量级、pythonic 接口。它保留了 pymongo 的查询和更新 API，并提供了许多附加功能，包括简单的面向文档的接口、连接池、索引管理以及集合和数据库命名助手。源码在github上。

# templates - 从不同的资源 scala 模板组成一个页面 在玩！2.0

> ID：10642581
> 
> 赞同：0
> 
> 时间：2012-05-17T19:52:39.920
> 
> 标签：templates, playframework, playframework-2.0

如果我有一个由多个部分（标题、主、侧面等）组成的主页，每个部分都是从不同的 URL 加载的，比如标题是由 /head 组成的，侧部分是从 /side 加载的，我们以前`Include`在其他框架。我该怎么做？2.0 我用 Jquery 来做，但不能在本地完成

```
$.get("/hello", function(result){
      $("#xxx").html(result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:02:17.230

正如马库斯所说，这在[官方文档](http://www.playframework.org/documentation/2.0.1/ScalaTemplateUseCases)中有详细说明。

实际上，您不会将来自不同 URL 的结果粘贴在一起。您在模板中定义必须使用哪些模板。

您可以使用以下方法包含其他模板：

```
<h1>Home</h1>

<div id="side">
  @common.sideBar()
</div> 
```

但是如果你打算在你的页面周围有一个全局框架，你应该看看`extended template`：

```
@otherTemplate("Title"){

   //Html content here ...

} 
```

**Update** :

if what you are trying to do is retrieve an absolute URL from a controller, you have to use the [reverse routing](http://www.playframework.org/documentation/2.0/ScalaRouting):

```
@routes.Application.hello("Bob").absoluteUrl() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:54:53.727

```
<div id="side">
  @common.sideBar()
</div> 
```

顺便说一句，它来自[官方文档](http://www.playframework.org/documentation/2.0.1/ScalaTemplateUseCases)。

# javascript - 是否有与 Java 的 deepToString() 等效的 JavaScript？

> ID：10642582
> 
> 赞同：1
> 
> 时间：2012-05-17T19:52:39.997
> 
> 标签：javascript, arrays

我正在调试一些 javascript，并继续运行 javascript `[object]`（例如，当我显示带有值的警报时，它会显示为`[object]`或`NaN`）。我正在尝试读取此对象的内容。我知道在 Java 中，这将是一个完美的工作`deepToString();`是否有任何与该方法等效的 javascript？

这是生成上述对象的代码...

```
e = document.getElementById("contServer");  // contServer is an integer variable  
var valueCS = parseInt(e.options[e.selectedIndex].value); 
    //Value CS is a four-byte variable calculated from e 
```

关于“解码”这个对象变量的 JavaScript 方法的任何想法，以便我可以看到里面的*实际*内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:56:54.327

`select`使用元素时似乎有些混乱。

确保您有正确的标记：

```
​&lt;select id="contServer">
  <option value="0">Zero</option>
  <option value="10">Ten</option>
  <option value="100" selected>Hundred</option>
  <option value="1000">Thousand</option>
</select>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我们将值存储在元素的`value`属性中。`option`如果该属性不存在，则将是位于开始标记和结束标记`value`的文本。`option``option`

接下来，像上面这样的“整数”值实际上并不是整数——它们是字符串。因此，必须先对它们进行解析，然后才能将它们用于任何数学运算。在下面的简短演练中，我解释了获取选定值并将其解析为整数的过程。请仔细阅读它，我认为它会消除很多困惑：

```
// We now have a reference to the select object (with all of its object members)
var cServer = document.getElementById("contServer");

// Now we have a reference to all of the options within the select object
var options = cServer.options;

// Now a reference to the selected option
var selected = options[ cServer.selectedIndex ];

// And now the value of the selected option
var selValue = selected.value;

// Let's get the type of this value
var selType = typeof selValue;

// Convert this String to an Integer
var iSelType = parseInt( selType, 10 );

// We can also get the value from the select object itself
var cServerVal = cServer.value;

// But we would still need to parse it to an integer
var iCServerVal = parseInt( cServerVal, 10 ); 
```

我相信您的问题`NaN`来自尝试解析非数值。例如，我们尝试将一个单词解析为一个整数：

```
parseInt( "Hundred" ); 
```

结果将是`NaN`。这很可能是发生在你身上的事情。确保将您的号码存储在`option`标签之间或`value`每个`option`标签的属性内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:56:27.143

使用[JSON.stringify()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)函数将对象输出为 JSON 字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:07:18.220

JavaScript 中没有内置的“对象转储器”。正如其他人所说，一种快速简便的方法是`JSON.stringify()`. 如果你想要一些变化并把它踢老派......你可以使用递归函数`for (var key in obj) {}`。

我在我的 JS 工具箱中随身携带这样的东西......

```
var MAX_DUMP_DEPTH = 10;
function dumpObj(obj, name, indent, depth) {
    if (depth > MAX_DUMP_DEPTH) {
        return indent + name + ":  Over Max Depth\n";
    }
    if (typeof obj == "object") {
        var child = null;
        var output = indent + name + "\n";
        indent += "\t";

        for (var item in obj) {
            try {
                child = obj[item];
            } catch (e) {
                child = "wtf was that?";
            }

            if (typeof child == "object") {
                output += dumpObj(child, item, indent, depth + 1);
            } else {
                output += indent + item + ": " + child + "\n";
            }
        }
        return output;
    } else {
        return obj;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T20:01:30.393

好的，所以在查看了您的原始 html 代码之后

```
 <select id="contServer" name="contServer">
        <option valueCS=1000>Up</option>
        <option valueCS=0>Down</option>
    </select> 
```

这是无效的 html，下面是选项的外观

```
<option selected="selected" value="1000">Up</option> 
```

如果您执行相同的代码，这将返回 1000，这是 value 属性

如果你有类似下面的东西

```
<option selected="selected" value="0">1000</option> 
```

您的代码将返回 0，因为 value 设置为 0。这应该可以帮助您更正我们的代码

# apache - SVN，Location 指令中的尾随斜杠在浏览器上有效，但如果删除会出现 403 错误

> ID：10642583
> 
> 赞同：1
> 
> 时间：2012-05-17T19:52:41.373
> 
> 标签：apache, svn

我在 Red Hat Linux 机器上设置 SVN。我的场景是我在同一个目录中有两个项目：

*   `/var/www/svn/proj1`
*   `/var/www/svn/proj2`

我的 subversion.conf 有以下配置：

```
<Location /svn/proj1>
    DAV svn
    SVNPath /var/www/svn/proj1
    AuthzSVNAccessFile /etc/svn_proj1-acl-conf
    AuthType Basic
    AuthName "Subversion repos"
    AuthUserFile /etc/svn-auth-conf
    Require valid-user
</Location>

<Location /svn/proj2/>
    DAV svn
    SVNParentPath /var/www/svn/proj2
    SVNListParentPath on
    AuthzSVNAccessFile /etc/svn_proj2-acl-conf
    AuthType Basic
    AuthName "Subversion repos"
    AuthUserFile /etc/svn-auth-conf
    Require valid-user
</Location> 
```

对于 project1 我的 URL [http://www.example.com/svn/proj1](http://www.example.com/svn/proj1)工作得很好，但是对于 project2 我需要在 URL 的末尾添加斜杠[http://www.example.com/svn/proj2/](http://www.example.com/svn/proj2/)否则它不会返回用户/密码窗口。

如果我从位置指令中删除尾部斜杠，

```
<Location /svn/proj2> 
```

然后它开始给出`403 Forbidden`错误，无论我是否在浏览器中使用斜线。

我将它与 TortoiseSVN 一起使用，但 project2 根本不起作用。

我应该在配置中查看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:06:48.987

使困惑。使困惑。使困惑...

但是，我很容易混淆...

你有两个项目。您使用的第一个：

```
SVNPath /var/www/svn/proj1 
```

以及您使用的第二个：

```
SVNParentPath /var/www/svn/proj2 
```

为什么是一个`SVNPath`和另一个`SVNParentPath`？有区别。您指定`SVNPath`何时引用特定存储库。`SVNParentPath`当您引用包含***多个***存储库的目录时使用。

那么，您的设置到底是什么？我有一种感觉，他们都应该是`SVNPath`。

顺便说一句，我注意到你有相同的用户列表，但不同的`AuthzSVNAccessFile`访问文件。你只是阻止人们提交，还是阻止人们阅读特定的文件和目录？

通常的做法是允许用户查看所有文件，但阻止提交访问。在这种情况下，您可能希望在 Apache httpd 之外使用我的[pre-commit hook](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)来执行此操作。这允许您做两件事：

*   关闭加速 Subversion 的目录检查访问。
*   在不重新启动 Apache httpd 的情况下更改提交权限。

然后，您可以在一个配置中配置这两个目录：

```
<Location /svn>
    DAV svn
    SVNParentPath /var/www/svn
    SVNListParentPath on
    AuthType Basic
    AuthName "Subversion repos"
    AuthUserFile /etc/svn-auth-conf
    SVNPathAuthz off
    Require valid-user
</Location> 
```

当然，如果您使用 AuthzPath 来阻止读取访问，则必须使用该`AuthzSVNAccessFile`参数。但是，它会使事情变得更复杂，并且会减慢您的速度。我通常不建议使用它，除非用户不应该能够查看彼此的存储库（这非常罕见）。

而且，还有一件事……您的用户有 LDAP 或 Windows Active Directory 帐户吗？如果是这样，您可以使用[它](http://httpd.apache.org/docs/2.2/mod/mod_authnz_ldap.html)来确定 Subversion 存储库访问权限：

```
 LoadModule authnz_ldap_module   modules/authnz_ldap.so

 <Location /svn>
    DAV svn
    SVNParentPath /var/www/svn
        SVNListParentPath on
    AuthType basic
    AuthName "Subversion Repository"
    AuthBasicProvider ldap
    AuthzLDAPAuthoritative off
    AuthLDAPURL "ldap://windomain.mycorp.com:3268/dc=mycorp,dc=com?sAMAccountName" NONE
    AuthLDAPBindDN "CN=svn_user,OU=Users,DC=mycorp,DC=com"
    AuthLDAPBindPassword "swordfish"
    Require ldap-group CN=developers,CN=Users,DC=mycorp,DC=com
</Location> 
```

这样，如果用户拥有 Windows 帐户（或在您的 LDAP 数据库中），并且该用户在*开发人员*组中，他们将自动有权访问您的 Subversion 存储库（请注意存储库`SVNParentPath`和任何未来的存储库）。这样，您就不会不断地在 SVN 授权文件中添加和减去用户。另外，您不会经常找回忘记的密码。

现在，这就是您的 Windows 管理员的全部责任。这是魔法。我让你的任务成为他们的工作。用户没有 Subversion 访问权限？不再是你的问题。有更多时间玩愤怒的小鸟。

还有一件小事：我感觉您不想将存储库放在下面`/var/www`，原因很简单，可能是您的文档根目录。如果您不小心，您可能会授予对 Subversion 存储库目录的直接访问权限。

你最好把它们放在别处并改变`SVNParentPath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:18:21.513

`Location`and指令应该有相同的`SVNParentPath`斜杠规则：有或没有。

所以应该是：

```
<Location /svn/proj2/>            <--- Here trailing slash (or not)
    [..]
    SVNPath /var/www/svn/proj2/  <--- Here same like Location
    [...]
</Location> 
```

# javascript - 通过 scrollOffset 找到最近的锚点 href

> ID：10642587
> 
> 赞同：11
> 
> 时间：2012-05-17T19:53:30.790
> 
> 标签：javascript, uiwebview, anchor

我有一个`UIWebView`完全加载的 HTML 页面。`UIWebView`具有 320 x 480 的框架并水平滚动。我可以获得用户当前所在的当前偏移量。我想使用 XY 偏移找到最近的锚点，这样我就可以“跳转到”该锚点位置。这是可能吗？有人可以指出我在 Javascript 中执行此操作的资源吗？

```
<a id="p-1">Text Text Text Text Text Text Text Text Text<a id="p-2">Text Text Text Text Text Text Text Text Text ... 
```

**更新**

我超级难过的 JS 代码：

```
function posForElement(e)
{
    var totalOffsetY = 0;

    do
    {
        totalOffsetY += e.offsetTop;
    } while(e = e.offsetParent)

    return totalOffsetY;
}

function getClosestAnchor(locationX, locationY)
{
    var a = document.getElementsByTagName('a');

    var currentAnchor;
    for (var idx = 0; idx < a.length; ++idx)
    {
        if(a[idx].getAttribute('id') && a[idx+1])
        {
            if(posForElement(a[idx]) <= locationX && locationX <= posForElement(a[idx+1])) 
            {
                currentAnchor = a[idx];
                break;
            }
            else
            {
                currentAnchor = a[0];
            }
        }
    }

    return currentAnchor.getAttribute('id');
} 
```

Objective-C

```
float pageOffset = 320.0f;

NSString *path = [[NSBundle mainBundle] pathForResource:@"GetAnchorPos" ofType:@"js"];
NSString *jsCode = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
[webView stringByEvaluatingJavaScriptFromString:jsCode];

NSString *execute = [NSString stringWithFormat:@"getClosestAnchor('%f', '0')", pageOffset];
NSString *anchorID = [webView stringByEvaluatingJavaScriptFromString:execute]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T14:25:45.327

**[更新]**我重写了代码以匹配所有具有 id 的锚点，并简化了`sortByDistance`函数中向量范数的比较。

检查我[在 jsFiddle 上](http://jsfiddle.net/3bdk6/8/embedded/result/)的尝试（前一个在[这里](http://jsfiddle.net/Denzen/3bdk6/3/embedded/result/)）。

javascript部分：

```
// findPos : courtesy of @ppk - see http://www.quirksmode.org/js/findpos.html
var findPos = function(obj) {
    var curleft = 0,
        curtop = 0;
    if (obj.offsetParent) {
        curleft = obj.offsetLeft;
        curtop = obj.offsetTop;
        while ((obj = obj.offsetParent)) {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        }
    }
    return [curleft, curtop];
};

var findClosestAnchor = function (anchors) {

    var sortByDistance = function(element1, element2) {

        var pos1 = findPos( element1 ),
            pos2 = findPos( element2 );

        // vect1 & vect2 represent 2d vectors going from the top left extremity of each element to the point positionned at the scrolled offset of the window
        var vect1 = [
                window.scrollX - pos1[0],
                window.scrollY - pos1[1]
            ],
            vect2 = [
                window.scrollX - pos2[0],
                window.scrollY - pos2[1]
            ];

        // we compare the length of the vectors using only the sum of their components squared
        // no need to find the magnitude of each (this was inspired by Mageek’s answer)
        var sqDist1 = vect1[0] * vect1[0] + vect1[1] * vect1[1],
            sqDist2 = vect2[0] * vect2[0] + vect2[1] * vect2[1];

        if ( sqDist1 <  sqDist2 ) return -1;
        else if ( sqDist1 >  sqDist2 ) return 1;
        else return 0;
    };

    // Convert the nodelist to an array, then returns the first item of the elements sorted by distance
    return Array.prototype.slice.call( anchors ).sort( sortByDistance )[0];
}; 
```

当 dom 准备好时，您可以像这样检索和缓存锚点： `var anchors = document.body.querySelectorAll('a[id]');`

我还没有在智能手机上测试过它，但我看不出它为什么不起作用的任何原因。 [这](https://github.com/shichuan/javascript-patterns/blob/master/general-patterns/function-declarations.html#L16)就是我使用`var foo = function() {};`表单的原因（[更多 javascript 模式](http://shichuan.github.com/javascript-patterns/)）。

这`return Array.prototype.slice.call( anchors ).sort( sortByDistance )[0];`条线实际上有点棘手。

`document.body.querySelectorAll('a['id']')`返回一个 NodeList，其中包含当前页面正文中具有属性“id”的所有锚点。遗憾的是，NodeList 对象没有“排序”方法，并且无法使用`sort`Array 原型的方法，[因为它与其他一些方法一起使用，例如 filter 或 map](http://javascriptisawesome.blogspot.fr/2012/05/sharing-prototypes-in-js.html)（`NodeList.prototype.sort = Array.prototype.sort`本来真的很好）。

[这篇文章](http://shifteleven.com/articles/2007/06/28/array-like-objects-in-javascript)更好地解释了为什么我曾经`Array.prototype.slice.call`将我的 NodeList 变成一个数组。

最后，我使用该`Array.prototype.sort`方法（以及自定义`sortByDistance`函数）将 NodeList 的每个元素相互比较，我只返回第一项，这是最接近的一项。

要查找使用固定定位的元素的位置，可以使用以下更新版本`findPos`：[http](http://www.greywyvern.com/?post=331) ://www.greywyvern.com/?post=331 。

我的答案可能不是更有效（drdigit 的必须比我的更高），但我更喜欢简单而不是效率，我认为它是最容易维护的。

**[还有一个更新]**

这是一个经过大量修改的 findPos 版本，适用于 webkit css 列（没有间隙）：

```
// Also adapted from PPK - this guy is everywhere ! - check http://www.quirksmode.org/dom/getstyles.html
var getStyle = function(el,styleProp)
{
    if (el.currentStyle)
        var y = el.currentStyle[styleProp];
    else if (window.getComputedStyle)
        var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
    return y;
}

// findPos : original by @ppk - see http://www.quirksmode.org/js/findpos.html
// made recursive and transformed to returns the corect position when css columns are used

var findPos = function( obj, childCoords ) {
   if ( typeof childCoords == 'undefined'  ) {
       childCoords = [0, 0];
   }

   var parentColumnWidth,
       parentHeight;

   var curleft, curtop;

   if( obj.offsetParent && ( parentColumnWidth = parseInt( getStyle( obj.offsetParent, '-webkit-column-width' ) ) ) ) {
       parentHeight = parseInt( getStyle( obj.offsetParent, 'height' ) );
       curtop = obj.offsetTop;
       column = Math.ceil( curtop / parentHeight );
       curleft = ( ( column - 1 ) * parentColumnWidth ) + ( obj.offsetLeft % parentColumnWidth );
       curtop %= parentHeight;
   }
   else {
       curleft = obj.offsetLeft;
       curtop = obj.offsetTop;
   }

   curleft += childCoords[0];
   curtop += childCoords[1];

   if( obj.offsetParent ) {
       var coords = findPos( obj.offsetParent, [curleft, curtop] );
       curleft = coords[0];
       curtop = coords[1];
   }
   return [curleft, curtop];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T06:47:26.990

我找到了一种不使用 scrollOffset 的方法。这有点复杂，所以如果您有任何问题要理解，请发表评论。

HTML：

```
<body>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<a />Text Text Text Text Text Text Text Text Text
<br /><br /><br /><br /><br />
<a />Text Text Text Text Text Text Text Text Text
</body> 
```

CSS：

```
body
{
    height:3000px;
} 
```

JS：

```
var tempY;

function getClosestAnchor(e)
{
    if((window.event?event.keyCode:e.which)!=97)return;
    var allAnchors=document.getElementsByTagName("a");
    var allDiff=[];
    for(var a=0;a<allAnchors.length;a++)allDiff[a]=margeY(allAnchors[a])-tempY;
    var smallest=allDiff[0];
    for(var a=1;a<allDiff.length;a++)
    {
        if(Math.abs(smallest)>Math.abs(allDiff[a]))
        {
            smallest=allDiff[a];
        }
    }
    window.scrollBy(0,smallest);
}

function margeY(obj)
{
    var posY=0;
    if(!obj.offsetParent)return;
    do posY+=obj.offsetTop;
    while(obj=obj.offsetParent);
    return posY;
}

function update(e)
{
    if(e.pageY)tempY=e.pageY;
    else tempY=e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop;
}

window.onkeypress=getClosestAnchor;
window.onmousemove=update; 
```

这是一个小提琴演示：http: [//jsfiddle.net/jswuC/](http://jsfiddle.net/jswuC/)

**奖励：**您不必为所有锚指定 id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T20:55:22.540

呸！我完成了！

JS：

```
var x=0,y=0;//Here are the given X and Y, you can change them
var idClosest;//Id of the nearest anchor
var smallestIndex;
var couplesXY=[];
var allAnchors;
var html=document.getElementsByTagName("html")[0];
html.style.width="3000px";//You can change 3000, it's to make the possibility of horizontal scroll
html.style.height="3000px";//Here too

function random(min,max)
{
    var nb=min+(max+1-min)*Math.random();
    return Math.floor(nb);
}
function left(obj)//A remixed function of this site http://www.quirksmode.org/js/findpos.html
{
    if(obj.style.position=="absolute")return parseInt(obj.style.left);
    var posX=0;
    if(!obj.offsetParent)return;
    do posX+=obj.offsetLeft;
    while(obj=obj.offsetParent);
    return posX;
}
function top(obj)
{
    if(obj.style.position=="absolute")return parseInt(obj.style.top);
    var posY=0;
    if(!obj.offsetParent)return;
    do posY+=obj.offsetTop;
    while(obj=obj.offsetParent);
    return posY;
}

function generateRandomAnchors()//Just for the exemple, you can delete the function if you have already anchors
{
    for(var a=0;a<50;a++)//You can change 50
    {
        var anchor=document.createElement("a");
        anchor.style.position="absolute";
        anchor.style.width=random(0,100)+"px";//You can change 100
        anchor.style.height=random(0,100)+"px";//You can change 100
        anchor.style.left=random(0,3000-parseInt(anchor.style.width))+"px";//If you changed 3000 from
        anchor.style.top=random(0,3000-parseInt(anchor.style.height))+"px";//the top, change it here
        anchor.style.backgroundColor="black";
        anchor.id="Anchor"+a;
        document.body.appendChild(anchor);
    }
}
function getAllAnchors()
{
    allAnchors=document.getElementsByTagName("a");
    for(var a=0;a<allAnchors.length;a++)
    {
        couplesXY[a]=[];
        couplesXY[a][0]=left(allAnchors[a]);
        couplesXY[a][1]=top(allAnchors[a]);
    }
}
function findClosestAnchor()
{
    var distances=[];
    for(var a=0;a<couplesXY.length;a++)distances.push(Math.pow((x-couplesXY[a][0]),2)+Math.pow((y-couplesXY[a][1]),2));//Math formula to get the distance from A to B (http://euler.ac-versailles.fr/baseeuler/lexique/notion.jsp?id=122). I removed the square root not to slow down the calculations
    var smallest=distances[0];
    smallestIndex=0;
    for(var a=1;a<distances.length;a++)if(smallest>distances[a])
    {
        smallest=distances[a];
        smallestIndex=a;
    }
    idClosest=allAnchors[smallestIndex].id;
    alert(idClosest);
}
function jumpToIt()
{
    window.scrollTo(couplesXY[smallestIndex][0],couplesXY[smallestIndex][1]);
    allAnchors[smallestIndex].style.backgroundColor="red";//Color it to see it
}

generateRandomAnchors();
getAllAnchors();
findClosestAnchor();
jumpToIt(); 
```

小提琴：http: [//jsfiddle.net/W8LBs/2](http://jsfiddle.net/W8LBs/2)

PS：如果你在智能手机上打开这个小提琴，它不起作用（我不知道为什么）但是如果你在智能手机上复制这个代码，它可以工作（但你必须指定`<html>`和`<body>`部分）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T20:08:44.197

**这个答案没有得到足够的重视。**

完整的示例，快速（二进制搜索），缓存位置。

固定高度和宽度，最近锚点的 id 和滚动到

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta>
<title>Offset 2</title>
<style>
body { font-family:helvetica,arial; font-size:12px; }
</style>
<script>
var ui = reqX = reqY = null, etop = eleft = 0, ref, cache;
function createAnchors()
{
    if (!ui)
    {
        ui = document.getElementById('UIWebView');
        reqX = document.getElementById('reqX');
        reqY = document.getElementById('reqY');
        var h=[], i=0;
        while (i < 1000)
            h.push('<a>fake anchor ... ',i,'</a> <a href=#>text for anchor <b>',(i++),'</b></a> ');
        ui.innerHTML = '<div style="padding:10px;width:700px">' + h.join('') + '</div>';
        cache = [];
        ref = Array.prototype.slice.call(ui.getElementsByTagName('a'));
        i = ref.length;
        while (--i >= 0)
        if (ref[i].href.length == 0)
            ref.splice(i,1);
    }
}
function pos(i)
{
    if (!cache[i])
    {
        etop = eleft = 0;
        var e=ref[i];
        if (e.offsetParent)
        {
            do
            {
                etop += e.offsetTop;
                eleft += e.offsetLeft;
            } while ((e = e.offsetParent) && e != ui)
        }
        cache[i] = [etop, eleft];       
    }
    else
    {
        etop = cache[i][0];
        eleft = cache[i][1];
    }
}
function find()
{
    createAnchors();
    if (!/^\d+$/.test(reqX.value))
    {
        alert ('I need a number for X');
        return;
    }   
    if (!/^\d+$/.test(reqY.value))
    {
        alert ('I need a number for Y');
        return;
    }
    var
        x = reqX.value,
        y = reqY.value,
        low = 0,
        hi = ref.length + 1, 
        med,
        limit = (ui.scrollHeight > ui.offsetHeight) ? ui.scrollHeight - ui.offsetHeight : ui.offsetHeight - ui.scrollHeight;
    if (y > limit)
        y = limit;
    if (x > ui.scrollWidth)
        x = (ui.scrollWidth > ui.offsetWidth) ? ui.scrollWidth : ui.offsetWidth;
    while (low < hi)
    {
        med = (low + ((hi - low) >> 1));
        pos(med);
        if (etop == y)
        {
            low = med;
            break;
        }
        if (etop < y)
            low = med + 1;
        else
            hi = med - 1;
    }
    var ctop = etop;
    if (eleft != x)
    {
        if (eleft > x)
            while (low > 0)
            {
                pos(--low);
                if (etop < ctop || eleft < x)
                {
                    pos(++low);
                    break;
                }
            }
        else
        {
            hi = ref.length;
            while (low < hi)
            {
                pos(++low);
                if (etop > ctop || eleft > x)
                {
                    pos(--low);
                    break;
                }
            }
        }
    }
    ui.scrollTop = etop - ui.offsetTop;
    ui.scrollLeft = eleft - ui.offsetLeft;
    ref[low].style.backgroundColor = '#ff0';
    alert(
        'Requested position: ' + x + ', ' + y + 
        '\nScrollTo position: ' + ui.scrollLeft + ', '+ ui.scrollTop + 
        '\nClosest anchor id: ' + low
        );
}
</script>
</head>
<body>
<div id=UIWebView style="width:320px;height:480px;overflow:auto;border:solid 1px #000"></div>
<label for="req">X: <input id=reqX type=text size=5 maxlength=5 value=200></label>
<label for="req">Y: <input id=reqY type=text size=5 maxlength=5 value=300></label>
<input type=button value="Find closest anchor" onclick="find()">
</body>
</html> 
```

# c# - 解析 JSON 页面

> ID：10642590
> 
> 赞同：0
> 
> 时间：2012-05-17T19:53:47.973
> 
> 标签：c#, json

一直试图弄清楚如何从twitter 搜索页面中解析出**“in_reply_to_status_id_str -> id_str” ：**

[https://twitter.com/phoenix_search.phoenix?q=hello&headers%5BX-Twitter-Polling%5D=true&headers%5BX-PHX%5D=true&since_id=203194965877194752&include_entities=1&include_available_features=1&contributor_details=true&mode=relevance&query_source=unknown](https://twitter.com/phoenix_search.phoenix?q=hello&headers%5BX-Twitter-Polling%5D=true&headers%5BX-PHX%5D=true&since_id=203194965877194752&include_entities=1&include_available_features=1&contributor_details=true&mode=relevance&query_source=unknown)

任何人都可以写一个小例子来展示它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:02:39.340

使用[Json.Net](http://json.codeplex.com/)

```
dynamic jObj = JsonConvert.DeserializeObject(new WebClient().DownloadString("your url"));
foreach (var item in jObj.statuses)
{
    Console.WriteLine("{0} {1}", item.in_reply_to_status_id_str, item.id_str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:05:56.570

所以这里是我拉我的 Json 的地方，这是我的清单的制作地点，你们都准备好了：

```
public JsonResult AllStatuses() //from the json called in the _client view
    {
        var buildStatuses = new List<BuildStatus>();
        var projects = Client.AllProjects();           

        foreach (var project in projects)
        {                
            try 
            {
                var buildConfigs = Client.BuildConfigsByProjectId(project.Id);

                foreach (var buildConfig in buildConfigs)
                {
                    var b = new BuildStatus();
                    var build = Client.LastBuildByBuildConfigId(buildConfig.Id);
                    var status = build.Status; // Used to loop through BuildConfigID's to find which is a FAILURE, SUCCESS, ERROR, or UNKNOWN

                    var change = Client.LastChangeDetailByBuildConfigId(buildConfig.Id); // Provides the changeID
                    var changeDetail = Client.ChangeDetailsByChangeId(change.Id); // Provides the username, this one populates the usernames

                    if (changeDetail != null)
                        b.user = changeDetail.Username;

                    b.id = buildConfig.Id.ToString();

                    // If the date isn't null place the start date in long format
                    if (build.StartDate != null)
                        b.date = build.StartDate.ToString();

                    // If block; set the status based on the BuildconfigID from the var status
                    if (status.Contains("FAILURE")){
                        b.status = "FAILURE";
                    }
                    else if (status.Contains("SUCCESS")){
                        b.status = "SUCCESS";
                    }
                    else if (status.Contains("ERROR")){
                        b.status = "ERROR";
                    }
                    else{
                        b.status = "UNKNOWN";
                    }
                    buildStatuses.Add(b);
                }

            } catch { }

        }
        var query = buildStatuses.OrderBy(x => x.status); // Create a sorted list from Error - Unknown               

        return Json(query, JsonRequestBehavior.AllowGet); 
```

然后我复制了我也链接你的 JsonConverter。

在我的网站上，我终于拆开了 Json 的列表。

```
 public JsonResult AllStatuses() //from the json called in the _client view
    {
        List<Client> clients = storeDB.Clients.Include("Projects").Include("Projects.Builds").ToList();
        var buildStatuses = new List<BuildStatus>();

        foreach (var client in clients) {
            // Network credentials
            // Used to get the Json Service request                         // URL here: client.ClientURL
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:81/Status/AllStatuses");
            var response = request.GetResponse();
            var reader = new StreamReader(response.GetResponseStream());
            var responseString = reader.ReadToEnd();

            var serializer = new JavaScriptSerializer();
            serializer.RegisterConverters((new[] { new DynamicJsonConverter() }));
            dynamic obj = serializer.Deserialize(responseString, typeof(object)) as dynamic;

            foreach (var objects in obj) // Pull apart the dynamic object
            {
                var id = objects.id;
                var status = objects.status;
                var date = objects.date;
                var user = objects.user;

                var bs = new BuildStatus();
                try
                {
                    bs.status = status;
                    bs.date = date;
                    bs.id = id;
                    bs.user = user;
                }
                catch { throw; }
                buildStatuses.Add(bs);
            }
        }              

        return Json(buildStatuses, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:56:56.457

使用 jQuery 方法：

```
var obj = jQuery.parseJSON(jsonString);
alert(obj.in_reply_to_status_id_str.id_str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:56:59.543

您可以使用[此](http://json.codeplex.com/)json 库来完成此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T20:11:51.963

添加对 System.Runtime.Serialization 的引用后，您还可以使用 .NET 中可用的 DataContractJsonSerializer 类。

您需要做的就是创建两个 DataContract 类。就像是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.Text;

namespace MyNamespace
{
   [DataContract]
   public class TwitterObject
   {
      [DataMember(Name = "statuses")]
      public TwitterStatus[] Statuses { get; set; }
   }

   [DataContract]
   public class TwitterStatus
   {
       [DataMember(Name = "in_reply_to_status_id_str")]
       public string InReplyToStatusIdStr { get; set; }

       [DataMember(Name = "id_str")]
       public string IdStr { get; set; }
   }
} 
```

然后从您希望的任何其他方法中，您只需使用 DataContractJsonSerializer 将您的 JSON 构建到 .NET 对象中：

```
DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(TwitterObject));

// assume the twitterResponse is the JSON you receive
MemoryStream memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(twitterResponse));

var twitterJson = jsonSerializer.ReadObject(memoryStream) as TwitterObject; 
```

可能有一些错别字，但这应该会给你提示。我目前正在研究服务器应用程序和网站之间的广泛同步，这是我目前用于两者之间的 JSON 通信的方法。我发现 DataContracts 和 DataContractJsonSerializer 的组合比 3rd 方库更易于使用。

# sql - 涉及多个连接的子查询

> ID：10642593
> 
> 赞同：1
> 
> 时间：2012-05-17T19:54:07.487
> 
> 标签：sql

仍在尝试习惯编写查询，但我遇到了问题。

```
Select count(region)
where (regionTable.A=1) in
(
select jxn.id, count(jxn.id) as counts, regionTable.A
from jxn inner join
               V on jxn.id = V.id inner join
               regionTable on v.regionID = regionTable.regionID
group by jxn.id, regionTable.A
) 
```

内部查询在一列中给出一个 ID 号，它们出现在表中的次数，如果它们在区域 A 中，则给出一个位属性。外部查询有效，但我得到的错误是`incorrect syntax near the keyword IN`。在内部查询中，我想知道其中有多少在区域 A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:03:58.557

您必须在查询中在 where 之前指定表名

```
 Select count(region)
    from table
    where (regionTable.A=1) in 
```

你必须选择其中之一。

```
where regionTable.A = 1 
```

或者

```
where regionTable.A in (..) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:17:27.940

您的查询有几个语法错误。根据您的评论，我认为不需要子查询，而您想要这样：

```
select jxn.id, count(jxn.id) as counts, regionTable.A
from jxn inner join
               V on jxn.id = V.id inner join
               regionTable on v.regionID = regionTable.regionID
where regionTable.A = 1
group by jxn.id, regionTable.A 
```

可以进一步简化为：

```
select jxn.id, count(jxn.id) as counts
     , 1 as A                             --- you can even omit this line
from jxn inner join
               V on jxn.id = V.id inner join
               regionTable on v.regionID = regionTable.regionID
where regionTable.A = 1
group by jxn.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:58:54.643

You are getting the error because of this line:

`where (regionTable.A=1)`

You cannot specify a condition in a `where in` clause, it should only be column name

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:06:29.690

像这样的东西可能是你想要的：

```
SELECT COUNT(*)
FROM 
    (
        select jxn.id, count(jxn.id) as counts, regionTable.A 
        from 
            jxn inner join
            V on jxn.id = V.id inner join
            regionTable on v.regionID = regionTable.regionID 
        group by jxn.id, regionTable.A
    ) sq
WHERE sq.a = 1 
```

# c++ - 在 C++11 中是否有在模板中获取成员指针类型？

> ID：10642594
> 
> 赞同：7
> 
> 时间：2012-05-17T19:54:08.497
> 
> 标签：c++, templates, c++11, decltype, member-pointers

我知道这在 C++03 中是不可能的，但我希望有一些新的巫毒教可以让我这样做。见下文：

```
template <class T>
struct Binder
{
    template<typename FT, FT T::*PtrTomember>
    void AddMatch();
};
struct TestType
{
    int i;
};
int main(int argc, char** argv)
{
    Binder<TestType> b;
    b.AddMatch<int,&TestType::i>(); //I have to do this now
    b.AddMatch<&TestType::i>(); //I'd like to be able to do this (i.e. infer field type)
} 
```

有没有办法在 C++11 中做到这一点？decltype 有帮助吗？

** 更新：使用 Vlad 的示例我在想这样的事情会起作用（警告：我没有编译，因为我现在正在构建具有 decltype 支持的编译器）

```
template <class T>
struct Binder
{
    template<typename MP, FT ft = decltype(MP)>
    void AddMatch()
    {
        //static_assert to make sure MP is a member pointer of T
    }
};
struct TestType
{
    int i;
};
int main()
{
    Binder<TestType> b;
    b.AddMatch<&TestType::i>();  
} 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:09:11.440

您尝试做的事情无法完成，也就是说，除非您有类型，否则您不能将成员指针用作常量表达式。也就是说，必须提供非类型模板参数的类型，或者换句话说，模板参数没有类型推断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:20:45.190

How about this ( as a kicker it works in c++03 ):

```
#include <iostream>
#include <typeinfo>

template< typename T > struct ExtractMemberTypeHelper;
template< typename R, typename T >
struct ExtractMemberTypeHelper< R(T::*) >
{
    typedef R Type;
    typedef T ParentType;
};

template< typename T >
struct ExtractMemberType : public ExtractMemberTypeHelper< T > {};

struct foo
{
    int bar;
    template< typename T >
    void func( const T& a_Arg )
    {
        std::cout << typeid( typename ExtractMemberType< T >::Type ).name( ) << " " << typeid( typename ExtractMemberType< T >::ParentType ).name( ) << std::endl;
    }
};

int main()
{
    foo inst;
    inst.func( &foo::bar );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T21:22:47.303

您可以让“T”提供此信息。

```
template <class ...T>
struct BoundTypes { };

template <class U, class T>
struct BinderDecls { 
  void AddMatch();
};

template <class U, class T, class ...Ts>
struct BinderDecls<U, BoundTypes<T, Ts...>>
  :BinderDecls<U, BoundTypes<Ts...>>
{ 
  using BinderDecls<U, BoundTypes<Ts...>>::AddMatch;

  template<T U::*PtrTomember>
  void AddMatch();
};

template <class T>
struct Binder : BinderDecls<T, typename T::bound_types> 
{ } 
```

然后就变得容易了

```
struct TestType {
    typedef BoundTypes<int, float> bound_types;

    int i;
    float j;
};

int main(int argc, char** argv)
{
    Binder<TestType> b;
    b.AddMatch<&TestType::i>();
    b.AddMatch<&TestType::j>();
} 
```

* * *

或者，您可以使用友元函数定义

```
template <class ...T>
struct BoundTypes { };

template <class U, class T>
struct BinderDecls {
  template<T U::*ptr>
  friend void addMatch(BinderDecl &u) {
   // ...
  }
};

template <class U, class ...Ts>
struct BinderDecls<U, BoundTypes<Ts...>> : BinderDecls<U, Ts>...
{ };

template<typename = void> 
void addMatch() = delete;

template <class T>
struct Binder : BinderDecls<T, typename T::bound_types> 
{ } 
```

然后你可以写

```
struct TestType {
    typedef BoundTypes<int, float> bound_types;

    int i;
    float j;
};

int main(int argc, char** argv)
{
    Binder<TestType> b;
    addMatch<&TestType::i>(b);
    addMatch<&TestType::j>(b);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:59:23.270

```
template <class T>
struct Binder
{
    template<typename FT>
    void AddMatch();
};

struct TestType
{
    int i;
};

int main()
{
    Binder<TestType> b;
    b.AddMatch<decltype(&TestType::i)>();
} 
```

# wcf - 用于压缩的 WCF 自定义绑定

> ID：10642600
> 
> 赞同：3
> 
> 时间：2012-05-17T19:55:37.637
> 
> 标签：wcf, .net-4.0, compression, http-compression, wcf-endpoint

按照Microsoft的[压缩示例。](http://msdn.microsoft.com/en-us/library/ms751458.aspx)我已将编码器、编码器工厂和绑定元素添加到我的解决方案中。与他们的示例不同的是，我们不通过配置文件（要求）注册端点，而是使用自定义服务主机工厂。

服务主机：

```
protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
{
     ServiceHost host = base.CreateServiceHost(serviceType, baseAddresses);

     if (host.Description.Endpoints.Count == 0)
     {
          host.AddDefaultEndpoints();
     }

     host.Description.Behaviors.Add(new MessagingErrorHandler());      

     return host;
} 
```

因此，我尝试将自定义绑定添加到我的端点，但是要将该端点注册到绑定中，看起来我必须使用，`AddServiceEndpoint`但这将需要一个未知的接口。我知道我可以获得 serviceType 实现的所有接口并执行 a `getInterfaces()[0]`，但这对我来说似乎是一种不安全的方法。那么有没有办法用自定义绑定注册我的端点并且不知道接口，或者我应该采取更好的方法。

我尝试添加自定义绑定：

```
CustomBinding compression = new CustomBinding();
compression.Elements.Add(new GZipMessageEncodingBindingElement());
foreach (var uri in baseAddresses)
{
     host.AddServiceEndpoint(serviceType, compression, uri);//service type is not the interface and is causing the issue
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:57:24.393

您的自定义绑定需要一个传输绑定元素；目前您只有一个消息编码绑定元素。您可能还需要将 a 添加`HttpTransportBindingElement`到您的自定义绑定中：

```
CustomBinding compression = new CustomBinding(
    new GZipMessageEncodingBindingElement()
    new HttpTransportBindingElement()); 
```

至于从服务类型中找到接口，没有内置的逻辑。WebServiceHostFactory 中使用的逻辑类似于下面显示的逻辑（此代码深入 1 个继承/实现级别，但理论上您也可以更深入。

```
 private Type GetContractType(Type serviceType) 
    { 
        if (HasServiceContract(serviceType)) 
        { 
            return serviceType; 
        } 

        Type[] possibleContractTypes = serviceType.GetInterfaces() 
            .Where(i => HasServiceContract(i)) 
            .ToArray(); 

        switch (possibleContractTypes.Length) 
        { 
            case 0: 
                throw new InvalidOperationException("Service type " + serviceType.FullName + " does not implement any interface decorated with the ServiceContractAttribute."); 
            case 1: 
                return possibleContractTypes[0]; 
            default: 
                throw new InvalidOperationException("Service type " + serviceType.FullName + " implements multiple interfaces decorated with the ServiceContractAttribute, not supported by this factory."); 
        } 
    } 

    private static bool HasServiceContract(Type type) 
    { 
        return Attribute.IsDefined(type, typeof(ServiceContractAttribute), false); 
    } 
```

# ejb-3.0 - 如何减少 ejb3 远程客户端中的网络上传？

> ID：10642601
> 
> 赞同：0
> 
> 时间：2012-05-17T19:55:38.180
> 
> 标签：ejb-3.0, jndi, jboss6.x, networkstream

我写了一个ejb3客户端，使用jndi与远程服务器通信，但是，每次调用远程方法，都会上传大约2KB的数据，即使我在做原子操作。

我试图减少远程类的维度，但没有任何成功。

我可以在哪里优化我的上传性能？（应用服务器为Jboss AS6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:08:46.667

我把jboss升级到7.1.1，客户端上传的数据量**暴跌20倍**。

# .htaccess - .htaccess 将目录重定向到单个页面

> ID：10642602
> 
> 赞同：4
> 
> 时间：2012-05-17T19:55:38.073
> 
> 标签：.htaccess, redirect, url-rewriting, web

我想将目录中的**所有**页面重定向`.com/blog`到`.com/error`目录。

我在网上搜索过，发现了很多不同的方法，但我希望它重定向到一个**页面**。

我尝试过的所有东西都重定向到相同的文件名，但在不同的目录中。例如，`.com/blog/index.nonexisting`重定向到`.com/error/index.nonexisting`.

我希望第一个目录中的所有文件都重定向到某个文件，所以如果你去`.com/blog/whatever.php`它会去`.com/error/index.php`，如果你去`.com/blog/random.xml`你会被重定向到`.com/error/index.php`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T20:13:54.790

试着把它放在你的 .htaccess 中：

```
RewriteEngine on
RewriteRule ^blog/(.+) error/index.php [L,R] 
```

如果您想要 301 重定向，请替换`R`为，如果您不想要外部重定向，请完全`R=301`摆脱。`R`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T19:32:05.290

在 wordpress 中，我将它用于多站点上的 subdmoain。

所以“subdomain.domain.org/wp_super_faq/AnyAndAllTextAtAll”将重定向到“subdomain.domain.org/faqs”

```
RewriteCond %{HTTP_HOST} ^subdomain\.domain\.org [NC]
RewriteRule ^wp_super_faq.*$ https://subdomain\.domain\.org/faqs/ [R=301,L] 
```

# jquery - wordpress jquery滑块不起作用

> ID：10642604
> 
> 赞同：0
> 
> 时间：2012-05-17T19:55:52.393
> 
> 标签：jquery, wordpress

在我的主页上添加了一个滚动条/滑块。当我在它自己的页面上构建它时它正在工作，但是当复制到 Wordpress 时它不会动画/滚动。不确定是什么问题。

[http://aerodynamicmusic.com/wordpress/](http://aerodynamicmusic.com/wordpress/)

这是CSS：

```
/* js-disabled class - set image sizes so they all fit in the viewer */
.js-disabled img { width:100px; height:100px; display:block; float:left; margin:30px 0 0; }

#outerContainer { width:642px; height:202px; margin:auto; position:relative; }
#imageScroller { width:642px; height:202px; position:absolute; left: 10px; top: 567px;      background:#000000 url(../images/imageScrollerBG.png) no-repeat; }
#viewer { width:622px; height:182px; overflow:hidden; margin:auto; position:absolute; top:10px; }
#imageScroller a:active, #imageScroller a:visited { color:#000000; }
#imageScroller a img { border:0; }
#controls { width:634px; height:47px; background:url
(../images/controlsBG.png) no-repeat; position:absolute; top:4px;
left:4px; z-index:10;}
#controls a { width:37px; height:35px; position:absolute; top:3px; }
#controls a:active, #controls a:visited { color:#0d0d0d; }
#title { color:#ffffff; font-family:arial; font-size:100%;
font-weight:bold; width:100%;text-align:center; margin-top:10px; }
#rtl { background:url(../images/rtl.png) no-repeat; left:100px; }
#rtl:hover { background:url(../images/rtl_over.png) no-repeat; left:99px; }
#ltr { background:url(../images/ltr.png) no-repeat; right:100px; }
#ltr:hover { background:url(../images/ltr_over.png) no-repeat; } 
```

和html：

```
<div id="outerContainer">
            <div id="imageScroller">
                <div id="viewer" class="js-disabled">
<a class="wrapper" href="hhttp://aerodynamicmusic.com/wordpress/portfolio/sxsw-march-12/" title="SXSW March 12, 2012"><img class="logo" id="sxsw12" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/sxsw12_slider.jpg" alt="SXSW March 12, 2012"></a><a class="wrapper" href="http://aerodynamicmusic.com/wordpress/portfolio/sxsw-march-14/" title="SXSW March 14, 2012"><img class="logo" id="sxsw14" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/sxsw14_slider.jpg" alt="SXSW March 14, 2012"></a><a class="wrapper" href="http://aerodynamicmusic.com/wordpress/portfolio/sxsw-march-16/" title="SXSW March 16, 2012"><img class="logo" id="sxsw16" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/sxsw16_slider.jpg" alt="SXSW March 16, 2012"></a><a class="wrapper" href="http://aerodynamicmusic.com/wordpress/portfolio/sxsw-march-17/" title="SXSW March 17, 2012"><img class="logo" id="sxsw17" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/sxsw17_slider.jpg" alt="SXSW March 17, 2012"></a><a class="wrapper" href="http://aerodynamicmusic.com/wordpress/portfolio/sxsw-march-18/" title="SXSW March 18, 2012"><img class="logo" id="sxsw18" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/sxsw18_slider.jpg" alt="SXSW March 18, 2012"></a><a class="wrapper" href="http://aerodynamicmusic.com/wordpress/portfolio/releases1/" title="Men at Work"><img class="logo" id="menatwork" src="http://aerodynamicmusic.com/wordpress/wp-content/uploads/2012/05/men_slider.jpg" alt="Men at Work"></a>
            </div>
                </div>
        </div>

        <script type="text/javascript">
            jQuery(function() {

              //remove js-disabled class
                jQuery("#viewer").removeClass("js-disabled");

              //create new container for images
                jQuery("<div>").attr("id", "container").css({ position:"absolute"}).width(jQuery(".wrapper").length * 170).height(170).appendTo("div#viewer");

                //add images to container
                jQuery(".wrapper").each(function() {
                    jQuery(this).appendTo("div#container");
                });

                //work out duration of anim based on number of images (1 second for each image)
                var duration = jQuery(".wrapper").length * 2000;

                //store speed for later (distance / time)
                var speed = (parseInt(jQuery("div#container").width()) + parseInt(jQuery("div#viewer").width())) / duration;

                //set direction
                var direction = "rtl";

                //set initial position and class based on direction
                (direction == "rtl") ? jQuery("div#container").css("left", jQuery("div#viewer").width()).addClass("rtl") : jQuery("div#container").css("left", 0 - jQuery("div#container").width()).addClass("ltr") ;

                //animator function
                var animator = function(el, time, dir) {

                    //which direction to scroll
                    if(dir == "rtl") {

                      //add direction class
                        el.removeClass("ltr").addClass("rtl");

                        //animate the el
                        el.animate({ left:"-" + el.width() + "px" }, time, "linear", function() {

                            //reset container position
                            jQuery(this).css({ left:jQuery("div#imageScroller").width(), right:"" });

                            //restart animation
                            animator(jQuery(this), duration, "rtl");

                            //hide controls if visible
                            (jQuery("div#controls").length > 0) ? jQuery("div#controls").slideUp("slow").remove() : null ;          

                        });
                    } else {

                      //add direction class
                        el.removeClass("rtl").addClass("ltr");

                        //animate the el
                        el.animate({ left:jQuery("div#viewer").width() + "px" }, time, "linear", function() {

                            //reset container position
                            jQuery(this).css({ left:0 - jQuery("div#container").width() });

                            //restart animation
                            animator(jQuery(this), duration, "ltr");

                            //hide controls if visible
                            (jQuery("div#controls").length > 0) ? jQuery("div#controls").slideUp("slow").remove() : null ;          
                        });
                    }
                }

                //start anim
                animator(jQuery("div#container"), duration, direction);

                //pause on mouseover
                jQuery("a.wrapper").live("mouseover", function() {

                    //stop anim
                    jQuery("div#container").stop(true);

                    //show controls
                    (jQuery("div#controls").length == 0) ? jQuery("<div>").attr("id", "controls").appendTo("div#outerContainer").css({ opacity:0.7 }).slideDown("slow") : null ;
                    (jQuery("a#rtl").length == 0) ? jQuery("<a>").attr({ id:"rtl", href:"#", title:"rtl" }).appendTo("#controls") : null ;
                    (jQuery("a#ltr").length == 0) ? jQuery("<a>").attr({ id:"ltr", href:"#", title:"ltr" }).appendTo("#controls") : null ;

                    //variable to hold trigger element
                    var title = jQuery(this).attr("title");

                    //add p if doesn't exist, update it if it does
                    (jQuery("p#title").length == 0) ? jQuery("<p>").attr("id", "title").text(title).appendTo("div#controls") : jQuery("p#title").text(title) ;
                });

                //restart on mouseout
                jQuery("a.wrapper").live("mouseout", function(e) {

                    //hide controls if not hovering on them
                    (e.relatedTarget == null) ? null : (e.relatedTarget.id != "controls") ? jQuery("div#controls").slideUp("slow").remove() : null ;

                    //work out total travel distance
                    var totalDistance = parseInt(jQuery("div#container").width()) + parseInt(jQuery("div#viewer").width());

                    //work out distance left to travel
                    var distanceLeft = (jQuery("div#container").hasClass("ltr")) ? totalDistance - (parseInt(jQuery("div#container").css("left")) + parseInt(jQuery("div#container").width())) : totalDistance - (parseInt(jQuery("div#viewer").width()) - (parseInt(jQuery("div#container").css("left")))) ;

                    //new duration is distance left / speed)
                    var newDuration = distanceLeft / speed;

                    //restart anim
                    animator(jQuery("div#container"), newDuration, jQuery("div#container").attr("class"));

                });

                //handler for ltr button
                jQuery("#ltr").live("click", function() {

                    //stop anim
                    jQuery("div#container").stop(true);

                    //swap class names
                    jQuery("div#container").removeClass("rtl").addClass("ltr");

                    //work out total travel distance
                    var totalDistance = parseInt(jQuery("div#container").width()) + parseInt(jQuery("div#viewer").width());

                    //work out remaining distance
                    var distanceLeft = totalDistance - (parseInt(jQuery("div#container").css("left")) + parseInt(jQuery("div#container").width()));

                    //new duration is distance left / speed)
                    var newDuration = distanceLeft / speed;

                //restart anim
                animator(jQuery("div#container"), newDuration, "ltr");
            });

            //handler for rtl button
            jQuery("#rtl").live("click", function() {

                //stop anim
                jQuery("div#container").stop(true);

                //swap class names
                jQuery("div#container").removeClass("ltr").addClass("rtl");

                //work out total travel distance
                var totalDistance = parseInt(jQuery("div#container").width()) + parseInt(jQuery("div#viewer").width());

                //work out remaining distance
                var distanceLeft = totalDistance - (parseInt(jQuery("div#viewer").width()) - (parseInt(jQuery("div#container").css("left"))));

                //new duration is distance left / speed)
                var newDuration = distanceLeft / speed;

                //restart anim
                animator(jQuery("div#container"), newDuration, "rtl");
            });
        });
    </script> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:10:44.243

首先，修复你的 JS 错误。将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或者在 Chrome 或 Safari 或 IE8 中使用开发人员工具来查看您的站点上加载了哪些 JS，并使用错误控制台来查找/修复错误。

也修复你的 html 错误：[[Invalid] Markup Validation of aerodynamicmusic.com wordpress - W3C Markup Validator](http://validator.w3.org/check?uri=http%3A//aerodynamicmusic.com/wordpress/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654)。在验证报告中向下滚动以查看行号和源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:13:22.977

在上面的提示旁边，检查您到 video-js/skins - 文件夹的路径。您当前有两个返回 404 的请求，因此您的皮肤（可能是视频滑块的样式表）似乎没有正确加载。当前路径是“http://aerodynamicmusic.com/wp-content/plugins/videojs-pro/video-js/skins/none”，这不是文件的有效路径。

# security - 不需要 CSRF 保护？

> ID：10642608
> 
> 赞同：0
> 
> 时间：2012-05-17T19:55:58.093
> 
> 标签：security

引用：

> 自从 CSRF 成为“大事”以来，Web 发生了很大变化，用于 CSRF 攻击的策略也变得过时了。
> 
> 我个人不保护 CSRF，主要是因为我不使用公然不安全的身份验证方法。

他有什么意义吗？

请给我一些论据如果我是正确的，为什么这个人在我试图表达观点时会（固执？）或没有清楚地思考，但我实际上并不知道如何表达它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T22:35:49.423

引用的论点按原样没有意义，但大概还有其他一些我们遗漏的上下文。

目前尚不清楚您的同事提出的身份验证形式“不会明显不安全”，不会出现 CSRF 问题。

有一些可能性，例如在完全由 AJAX 驱动的应用程序中，您可能会将身份验证令牌作为输入参数传递，而不是依赖会话。在这种情况下，您不需要额外的反 CSRF 措施，因为身份验证令牌已经是攻击者无法获得的秘密。

但总体而言，CSRF 并没有消失。浏览器还没有增加神奇的功能来阻止它的发生。对于使用浏览器持久性身份验证模型（cookies、HTTP 身份验证）的典型 webapp 模型，您肯定仍然需要以某种方式解决它。

# java - 从 JSNI 原生函数访问 div 内容

> ID：10642610
> 
> 赞同：0
> 
> 时间：2012-05-17T19:56:01.240
> 
> 标签：java, gwt, html, jsni

我正在尝试的是`elem.innerHtml`，我也尝试过`elem.innerText`，但结果是一个空字符串。我可以`HTMLDivElement`从 GWT JSNI 函数内部访问内容吗？我想摆脱深奥的 UiBinder 工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:02:04.073

假设您要访问的部门在 DOM 中并且有一个 id，您可以使用

```
Document.get().getElementById("id") 
```

来自java，或

```
$doc.getElementById(String) 
```

来自 javascript :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:46:48.073

[GQuery](http://code.google.com/p/gwtquery/)可以帮助您做到这一点（假设您的 div 的 id 等于 myDiv）：

```
import static com.google.gwt.query.client.GQuery.$

...

String innerText = $("#myDiv").text();
String innerHtml = $("#myDiv").html(); 
```

# html - 将 div 置于底部

> ID：10642611
> 
> 赞同：0
> 
> 时间：2012-05-17T19:56:13.640
> 
> 标签：html, css

我正在尝试将 div 定位为父 div 内的页脚。

```
<div>
...some content...
<div id='footer'>
<span style='float:left'>Left text</span>
<span style='float:right'>Right text</span>
</div>
</div> 
```

现在左右元素都可以了，但是页脚 div 并没有与包含 div 的底部对齐，而是与其内容的底部对齐。

但是，如果我尝试为页脚放置 position:absolute，它会失去对父 div 宽度的把握，因此左右跨度会一个接一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:03:15.963

[http://jsfiddle.net/ch4Hw/](http://jsfiddle.net/ch4Hw/)

`position:relative;`在容器和`position:absolute; bottom:0; height:auto;`页脚上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:58:17.250

您正在寻找的是（我认为）一个粘性页脚。在这里查看一个好的技术：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T22:12:15.713

如果你还在寻找，我在这里实现了我认为你想要的：

[http://www.facebookanswers.co.uk/code/fullheight/demo2.htm](http://www.facebookanswers.co.uk/code/fullheight/demo2.htm)

它是一个独立的文件，IE 所有的 CSS 都带有标记，所以你应该能够看到发生了什么。

完整的文章在这里：

[http://facebookanswers.co.uk/?p=312](http://facebookanswers.co.uk/?p=312)

给你的是一个页眉、两列和一个页脚。

一列用于导航，另一列用于主要内容。页脚位于主列的底部。如果内容小于全屏，页脚将保留在屏幕底部。但是，一旦您获得的内容多于屏幕，它将与其余数据一起滚动。

# silverlight - ？我们如何阻止 IE9 总是从缓存中检索过期数据？

> ID：10642613
> 
> 赞同：0
> 
> 时间：2012-05-17T19:56:30.850
> 
> 标签：silverlight, iis, caching, internet-explorer-9, pivotviewer

我们的项目使用 Silverlight 4 和 Microsoft Pivot Viewer，这是一个在 Silverlight 中工作的数据呈现工具。

Microsoft Pivot Viewer 可以更轻松地以强大、信息丰富且有趣的方式与大量数据进行交互。Microsoft Live Labs 试图退后一步，设计一种交互模型，以适应信息的复杂性和规模，而不是传统的 Web 结构。

我们应用程序中使用 Siliverlight 和 Microsoft Pivot Viewer 的模块有很多缓存问题。

我们应用程序中使用 Siliverlight 和 Microsoft Pivot Viewer 的模块在运行时动态检索图像，以便在 Siliverlight 和 Microsoft Pivot Viewer 中将图像呈现给用户。

我们遇到的问题是 IE9 在 Siliverlight 和 Microsoft Pivot Viewer 中缓存图像。

IIS 上的 HTTP 响应标头配置为 Web 内容立即过期。 ![包含 Silverlight XAP 的 ClientBin 文件夹的 HTTP 响应标头设置](../Images/87f10d35697040daf23f1cef4b552e4f.png)

只要您添加任何 URL 参数（例如“?v1”或代码中动态生成的参数），浏览器就会关闭客户端缓存，除非明确设置了到期日期。

我们在 Siliverlight 和 Microsoft Pivot Viewer Host ASPX 文件中尝试了以下操作：

```
 <div id="silverlightControlHost">
    <object id="pivotViewer" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="900">   
<%
    HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
    HttpContext.Current.Response.Cache.SetValidUntilExpires(false);
    HttpContext.Current.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    HttpContext.Current.Response.Cache.SetNoStore();
    string orgSourceValue = @"ClientBin/SilverlightPivotViewer.xap";

string param;

if (System.Diagnostics.Debugger.IsAttached)

param = "<param name=\"source\" value=\"" + orgSourceValue + "\" />";

else

{

string xappath = HttpContext.Current.Server.MapPath(@"") + @"\" +     orgSourceValue;

DateTime xapCreationDate = System.IO.File.GetLastWriteTime(xappath);

param = "<param name=\"source\" value=\"" + orgSourceValue + "?ignore="

+ xapCreationDate.ToString() + "\" />";

}

Response.Write(param);

%>
      <param name="onError" value="onSilverlightError" />
      <param name="background" value="white" />
      <param name="minRuntimeVersion" value="4.0.50401.0" />
      <param name="autoUpgrade" value="true" />

      <param name="initParams" value="cxml=Resources.cxml" />

      <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50401.0" style="text-decoration:none">
          <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
      </a>
    </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div> 
```

Google Chrome 和 Mozilla Firefox 似乎运行良好。但是，IE9 失败，因为它不断从 Silverlight 缓存中获取过期数据。

我们的以下努力未能解决缓存问题：

1) 即使在 IIS 上的 HTTP 响应标头配置为 Web 内容立即过期后，用户的 IE9 仍会缓存。2) 即使在我们确保 Silverlight XAP url 附加了动态生成的参数之后，用户的 IE9 仍会缓存。

有人可以提供一些关于我们应该如何解决问题的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:11:32.843

一个非常临时的修复 - 您只能在开发期间使用 - 是在网页上按 F12 以调出开发人员工具。然后从菜单中选择缓存 > 始终从服务器刷新。

我希望我知道如何更永久地解决这个问题。

# ruby-on-rails-3 - Rails 3.2.3 路由错误（尝试添加文章）

> ID：10642617
> 
> 赞同：0
> 
> 时间：2012-05-17T19:56:50.260
> 
> 标签：ruby-on-rails-3, routes

我是 rails 3 的新手（以及一般的 rails）...我为一个朋友乐队建立了一个网站骨架，现在他想在他的网站上添加文章...

到目前为止，我所构建的只是页面：（主页、节目、媒体、联系人）和页眉和页脚部分......所以还没有什么太花哨的东西。

到目前为止，这是我为添加文章所做的工作：

```
rails g scaffold article title:string body:text
rake db:migrate 
```

但是当我访问 localhost:3000/articles 时，我收到以下错误消息：

```
ActionController::RoutingError in Articles#new
no route matches {:action=>"home", :controller=>"articles"} 
```

它说错误是在第 28 行的 app/views/layouts/ **_header.html.erb中引发的：**

```
25:   <h1>Title</h1>  
26: <ul id="nav">
27: <ul>
28:         <li><%= link_to image_tag("home.jpg",:class=> 'hoverImages'), :action => 'home' %></li>
29:         <li><%= link_to image_tag("shows.jpg", :class=> 'hoverImages'), :action => 'shows' %></li>
30:         <li><%= link_to image_tag("media.jpg", :class=> 'hoverImages'), :action => 'media' %></li>
31:         <li><%= link_to image_tag("contact.jpg", :class=> 'hoverImages'), :action => 'contact' %></li> 
```

这是我的**路线.rb**

```
CsmlSite::Application.routes.draw do

resources :articles

match '/shows', :to => 'pages#shows'
match '/media', :to => 'pages#media'
match '/contact', :to => 'pages#contact'
match '/articles', :to => 'articles#index'
root :to => "pages#home"

end 
```

为什么我不能查看 localhost:3000/articles ？任何有用的提示都会非常感激！

编辑：这是我的**rake route**任务的输出

```
root        /(.:format)                  {:controller=>"pages", :action=> "home"}
articles GET    /articles(.:format)          {:action=>"index", :controller=>"articles"}
POST   /articles(.:format)          {:action=>"create", :controller=>"articles"}
new_article GET    /articles/new(.:format)      {:action=>"new", :controller=>" articles"}
edit_article GET    /articles/:id/edit(.:format) {:action=>"edit", :controller=>"articles"}
article GET    /articles/:id(.:format)      {:action=>"show", :controller=>"articles"}
PUT    /articles/:id(.:format)      {:action=>"update", :controller=>"articles"}
DELETE /articles/:id(.:format)      {:action=>"destroy", :controller=>"articles"}
shows        /shows(.:format)             {:controller=>"pages", :action=>"shows"}
media        /media(.:format)             {:controller=>"pages", :action=>"media"}
contact        /contact(.:format)           {:controller=>"pages", :action=>"contact"}
contacts POST   /contacts(.:format)          {:action=>"create", :controller=>"contact_us/contacts"}
new_contact GET    /contacts/new(.:format)      {:action=>"new", :controller=>"contact_us/contacts"}
contact_us        /contact_us(.:format)        {:action=>"new", :controller=>"contact_us/contacts"}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:18:15.080

使用路径而不是 :action 重写您的视图：

```
<h1>Title</h1>  
<ul id="nav">
  <li><%= link_to image_tag("home.jpg",:class=> 'hoverImages'), root_path %></li>
  <li><%= link_to image_tag("shows.jpg", :class=> 'hoverImages'), shows_path %></li>
  <li><%= link_to image_tag("media.jpg", :class=> 'hoverImages'), media_path %></li>
  <li><%= link_to image_tag("contact.jpg", :class=> 'hoverImages'), contact_path %></li>
</ul> 
```

您的路线中还有一件事：

```
CsmlSite::Application.routes.draw do

  root :to => "pages#home"

  resources :articles

  match '/shows', :to => 'pages#shows'
  match '/media', :to => 'pages#media'
  match '/contact', :to => 'pages#contact'

  # the route below is not necessary (it is generated by `resources :articles`)
  # match '/articles', :to => 'articles#index' 
```

结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:49:56.053

Nvm...想通了。我的路线与我安装的宝石发生冲突......特别是`gem 'contact_us', '~> 0.2.0'`。

一旦我移除了那个宝石，我就可以使用`shows_pages_path`et。全部

# android - Android相机横向到纵向方向问题

> ID：10642619
> 
> 赞同：1
> 
> 时间：2012-05-17T19:56:54.503
> 
> 标签：android, camera, orientation, landscape, portrait

我在 Android 应用程序中遇到相机方向问题。它一直在展示风景。我`camera.setDisplayOrientation(90)`在项目中看不到选项。我正在使用 Android SDK 2.1。

这是我到目前为止所尝试的。

```
Camera.Parameters parameters = camera.getParameters();
parameters.setRotation(90);       
parameters.setPictureSize(640, 480);
this.camera.setParameters(parameters); 
```

这也没有帮助。请问有人知道我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:05:27.243

我会让您的相机方向始终为横向。Android 相机应用程序将 Activity 方向锁定为横向，因为这是相机传感器的自然方向（对于所有兼容的 Android 设备都是如此）。但它将检测到的设备旋转写入 EXIF，以便查看器应用程序可以正确显示照片。

# java - 带有数组列表的 Java HashMap

> ID：10642623
> 
> 赞同：1
> 
> 时间：2012-05-17T19:57:05.450
> 
> 标签：java, oop

我有 2 个哈希图，其中包含两者的键和值。我的目标是找出其中一个哈希图中的重复项，如果检测到重复项，我将提取 KEY。我可以知道如何在哈希图中做到这一点吗？

基本上，第一个哈希图存储车站 ID，第二个哈希图存储车站名称，在某些时候也会被拦截以换乘火车。我如何对其进行编码，如果用户进入火车 1 号线的登机站和火车 2 号线的下车站，它会返回告诉您您必须更改火车以到达该位置位置在另一条火车线上。

对不起，解释它，它有点混乱。

如果你能帮忙就好了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:32:12.803

如果您在两个不同的地图中寻找重复的*键*，那很容易。

```
Set set1 = new SomeKindOfSet(map1.getEntrySet());  // makes a copy, important!
Set set2 = map2.getEntrySet();
set1.retainAll(set2); 
```

但是，如果您正在寻找重复的*值*，那就更难了。有一些第三方的“双向”地图。但是因为我不明白你真正想要什么，所以很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:59:54.673

You mean duplicate in the values, right? And I'll assume that means ALL values for all keys.

I'm sorry, but I think you might be using the wrong level of abstraction here. Don't contort your code to accomplish this with two hash maps. Create an abstration using an object - Java's an object-oriented language - that represents the thing you're trying to model and build an API to make that easy for users to deal with.

# python - 如何为表单中的字段启动值以在模板中进行编辑

> ID：10642625
> 
> 赞同：1
> 
> 时间：2012-05-17T19:57:12.597
> 
> 标签：python, django, django-forms, django-templates, django-views

我知道您可以使用[这个问题](https://stackoverflow.com/questions/657607/setting-the-selected-value-on-a-django-forms-choicefield)中的类的`initiate`参数。`Form`

我正在创建一个编辑表单，并试图弄清楚如何从预先存在的对象中启动值。

我是在模板级别还是在视图级别执行（我什至不知道如何在模板级别执行）？或者我可能需要将实际对象传递给表单并在表单级别启动？

最佳做法是什么？

* * *

**编辑：**

对于@Bento：在我的原作`Form`中，我正在做这样的事情

```
class OrderDetailForm(forms.Form):
    work_type = forms.ChoiceField(choices=Order.WORK_TYPE_CHOICES)
    note = forms.CharField(widget=forms.Textarea)

    def __init__(self, creator_list=None, place_list=None, *args, **kwargs):
        super(OrderCreateForm, self).__init__(*args, **kwargs)

        if creator_list:
            self.fields['creator'] = UserModelChoiceField(
                queryset=creator_list,
                empty_label="Select a user",
            )

    def clean(self):
        super(OrderCreateForm, self).clean()

        if 'note' in self.cleaned_data:
            if len(self.cleaned_data['note']) < 50:
                self._errors['note'] = self.error_class([u"Please enter a longer note."])

                del self.cleaned_data['note']

        return self.cleaned_data 
```

我该怎么做`ModelForm`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:15:27.937

假设您使用的是 ModelForm，它实际上相当简单。任务是这样的：检索您要为其填充“编辑”的模型对象，基于您的 ModelForm 创建一个新表单，然后使用“实例”使用该对象填充它。

这是您的观点的骨架：

```
def view(request): 
  obj = Model.objects.get(pk = objectpk)
  form = MyModelForm(instance = obj)

  return render (request, "template", {'form' = form}) 
```

您可以使用以下方法访问“初始”值：

```
form.fields['fieldname'].initial = somevalue 
```

然后你会返回上面的表格。

# matlab - 在一张图中绘制三个图表

> ID：10642628
> 
> 赞同：3
> 
> 时间：2012-05-17T19:57:29.770
> 
> 标签：matlab

我怎样才能绘制这样的图：![在此处输入图像描述](../Images/4ab6331fad9e1045c748c2372f2e5d1c.png)

我的问题不是关于“子图”功能。我有一个用于 x 轴的“x”数组和三个用于 y 轴的“y”数组。我想在上面的图中绘制所有 (x,y) 图表。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T20:36:42.160

您可以使用[`subaxis`](http://www.mathworks.com/matlabcentral/fileexchange/3696-subaxis-subplot). 我在下面写了一个示例代码：

```
x = 0:0.1:10;
spacing = 0.0;
subaxis(3,1,1,'Spacing',spacing);
plot(x,rand(size(x)),'k')
legend('D','Location','NorthWest')
ylim([-0.2 1])
set(gca, 'box','off')
set(gca,'XAxisLocation','top')

subaxis(2,'Spacing',spacing);
plot(x,rand(size(x)),'r')
legend('C','Location','NorthWest')
ylim([-0.2 1])
set(gca,'xtick',[],'box','off','xcolor','w')

subaxis(3,'Spacing',spacing);
plot(x,rand(size(x)),'b')
legend('B','Location','NorthWest')
set(gca, 'box','off') 
```

![在此处输入图像描述](../Images/063b88184b2a32e4ddcb21e0e80ab8a0.png)

# objective-c - 克隆一个 git repo（深入）

> ID：10642629
> 
> 赞同：9
> 
> 时间：2012-05-17T19:57:30.573
> 
> 标签：objective-c, c, git, git-clone

**如何克隆一个仓库（使用[libgit2](https://github.com/libgit2/libgit2)）**

我想做的正是`git clone`除了`libgit2`. 我可能要问的是`git clone`真正深入的地方。

到目前为止，这就是我正在做的事情：

1.  初始化一个仓库
2.  调整配置文件以添加远程
3.  创建一个`git_remote`
4.  下载一个包文件
5.  索引包文件并写入索引（给我们一个 .idx 文件）
6.  （编辑）将所有不同的分支写入磁盘。
7.  （编辑）`git checkout`以某种方式做。

~~现在我不知道该怎么办。我唯一的猜测是加载`.idx`到 a`git_index`并使用`git_repository_set_index`，但这也没有显示任何文件。~~

**编辑**

我测试`git checkout master`了在半克隆的 repo 上运行，并且完成了这项工作。现在我只需要找出如何使用 libgit2 来完成它，而且问题跟踪器中似乎有一些有用的信息。

**编辑 2**

我现在将添加我当前的代码，希望有一天有人会发现它有用，希望成为我从未找到的快速启动代码。注意：我在这里使用`Obj-C`和`Objective-Git`，但它主要是普通的 c。

```
+ (GTRepository *)cloneFromRemoteURL:(NSURL *)remoteURL toLocalURL:(NSURL *)localURL
{   
// Let's suppose the URL looks like: https://github.com/libgit2/libgit2.git
// Then we need to get a URL like this too: git://github.com/libgit2/libgit2.git
// This may be a bit dodgy, but it will do for now.
const char *gitURL = [remoteURL.absoluteString stringByReplacingOccurrencesOfString:@"https://github.com/" withString:@"git://github.com/"].UTF8String;

//Setup
int error;
git_repository *repo
git_config *cfg;
git_remote *remote;

NSURL *gitDirURL = [localURL URLByAppendingPathComponent:@".git"];

error = git_repository_open(&repo, gitDirURL.path.UTF8String);
    if (error != GIT_SUCCESS) {

    git_repository_init(&repo, gitDirURL.path.UTF8String, 1);

    //Config
    git_repository_config(&cfg, repo);
    git_config_set_int32 (cfg, "core.repositoryformatversion", 0);
    git_config_set_bool (cfg, "core.filemode", 1);
    git_config_set_bool (cfg, "core.bare", 0);
    git_config_set_bool (cfg, "core.logallrefupdates", 1);
    git_config_set_bool (cfg, "core.ignorecase", 1);
    git_config_set_string (cfg, "remote.origin.url", gitURL);
    git_config_set_string (cfg, "remote.origin.fetch", "+refs/heads/*:refs/remotes/origin/*");
    git_config_set_string (cfg, "branch.master.remote", "origin");
    git_config_set_string (cfg, "branch.master.merge", "refs/heads/master");

    git_repository_set_workdir(repo, localURL.path.UTF8String);

    error = git_remote_new(&remote, repo, "A remote", gitURL, "origin");

    git_repository_free(repo);
    git_repository_open (&repo, localURL.path.UTF8String);
}

git_repository_config(&cfg, repo);

// connect to repo
error = git_remote_load(&remote, repo, "origin");

error = git_remote_connect(remote, GIT_DIR_FETCH);
// get pack file

git_off_t bytes;
git_indexer_stats stats;
error = git_remote_download(remote, &bytes, &stats);

NSURL *packFolderURL = [localURL URLByAppendingPathComponent:@".git/objects/pack"];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *array = [fileManager contentsOfDirectoryAtURL:packFolderURL includingPropertiesForKeys:nil options:0 error:nil];
NSLog(@"Dictionary:%@",array);
NSString *result;
for (NSURL *url in array) {
    if ([url.path rangeOfString:@".pack"].location != NSNotFound) {
        result = url.path;
    }
}
const char *packname = [result UTF8String];

// unpack pack file
if (packname != NULL) 
{
    git_indexer *indexer;
    git_indexer_stats stats2;
    int error;
    char hash[GIT_OID_HEXSZ + 1] = {0};

    error = git_indexer_new(&indexer, packname);
    error = git_indexer_run(indexer, &stats2);
    error = git_indexer_write(indexer);

    // Get the packfile's hash (which should become it's filename)
    git_oid_fmt(hash, git_indexer_hash(indexer));

    NSString *hashStr = [NSString stringWithCString:hash encoding:NSUTF8StringEncoding];
    hashStr = [NSString stringWithFormat:@"pack-%@.idx",hashStr];
    const char *indexPath = [hashStr UTF8String];

    puts(hash);
    git_index *index;
    git_index_open(&index, indexPath);
    git_index_read(index);
    git_repository_set_index(repo, index);

    git_indexer_free(indexer);
    git_remote_update_tips(remote, update_cb2); //No idea what it does, but it seems like it's important… It does make the branches appear in .git/refs/remotes/origin

} 
```

// 不知何故 git checkout master 在这里

```
return [GTRepository repositoryWithURL:localURL error:nil];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T23:45:29.530

由于 libgit2 没有在其[问题列表中](https://github.com/libgit2/libgit2/issues)[明确提及 git clone](https://github.com/libgit2/libgit2/issues/search?q=clone) ，因此要遵循的一条线索是在原始 git 项目的源代码中：

*   [`builtin/clone.c`](https://github.com/git/git/blob/master/builtin/clone.c)
*   [`contrib/examples/git-clone.sh`](https://github.com/git/git/blob/master/contrib/examples/git-clone.sh)

最后一个脚本将指导您完成`git clone`.

# php - 如何将准备好的语句与 Transactions with PHP 结合使用？

> ID：10642635
> 
> 赞同：8
> 
> 时间：2012-05-17T19:58:08.647
> 
> 标签：php, mysql, pdo

我的目标是同时使用事务和准备好的语句，以实现数据的完整性和防止 SQL 注入。

我有这个：

```
 try {
        $cnx = new PDO($dsn,$dbuser,$dbpass);   
        $cnx->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        $cnx->beginTransaction();
        $cnx->query("SELECT * FROM users WHERE username=$escaped_input");
        $cnx->query("SELECT * FROM othertable WHERE some_column=$escaped_input_2");

        $cnx->commit();
    }

    catch (Exception $e){
           $cxn->rollback();
           echo "an error has occured";

    } 
```

我想将查询与准备好的语句合并：

```
$stmt=$cxn->prepare("SELECT * FROM users WHERE username=?");
$stmt->execute(array($user_input));

$stmt_2=$cxn->prepare("SELECT * FROM othertable WHERE some_column=?");
$stmt_2->execute(array($user_input_2)); 
```

我怎样才能做到这一点？

## 编辑

我收到此错误：

> PHP Parse 错误：语法错误，意外的 T_CATCH

这是我更新的代码：

```
try 
{
    $cnx = new PDO($dsn,$dbuser,$dbpass);   
    $cnx->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $cnx->beginTransaction();
    $stmt=$cnx->prepare("SELECT * FROM users WHERE username=?");
    $stmt->execute(array($username));

    $cnx->commit();

    while ($row=$stmt->fetch(PDO::FETCH_OBJ)){
    echo $stmt->userid;

}

catch(Exception $e) { 
    if (isset($cnx)) 
        $cnx->rollback();
       echo "Error:  " . $e; 
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T20:07:09.500

只需在调用“beginTransaction”后调用“execute”即可。

您在哪里称呼“准备”并不重要。

这是一个完整的例子：

[http://php.net/manual/en/pdo.begintransaction.php](http://php.net/manual/en/pdo.begintransaction.php)

例子：

```
 try {
    $cnx = new PDO($dsn,$dbuser,$dbpass);   
    $cnx->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $cnx->beginTransaction();

    $stmt=$cxn->prepare("SELECT * FROM users WHERE username=?");
    $stmt->execute(array($user_input));

    $stmt_2=$cxn->prepare("SELECT * FROM othertable WHERE some_column=?");
    $stmt_2->execute(array($user_input_2));

    $cnx->commit();
  }
  catch (Exception $e){
    $cxn->rollback();
    echo "an error has occurred";
  } 
```

PS：1）我当然假设 $user_input 和 $user_input_2 立即可用。您不希望您的交易在不必要的时间内挂起；）

2）根据您上面的评论回复，我认为您可能会混淆“执行”和“开始传输/提交”。请看我的链接。

3）你甚至*需要*交易吗？你只是在做两个“选择”。

4）最后，为什么不做一个“加入”（或联合，如果兼容）而不是两个“选择”？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T20:06:42.627

```
try 
{
    $cnx = new PDO ($dsn,$dbuser,$dbpass);   
    $cnx->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $cnx->beginTransaction ();

    $stmt = $cnx->prepare ("SELECT * FROM users WHERE username=?");
    $stmt->execute(array($username));

    $cnx->commit();

    while ($row = $stmt->fetch (PDO::FETCH_OBJ)){
        echo $row->userid;
    }
}

catch (Exception $e) { 
    if (isset ($cnx)) 
        $cnx->rollback ();
       echo "Error:  " . $e; 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:19:23.137

你是这个意思吗？

```
try {
    $cnx = new PDO($dsn,$dbuser,$dbpass);   
    $cnx->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $cnx->beginTransaction();
    $stmt=$cnx->prepare("
        SELECT * FROM users, othertable 
        WHERE users.username=? 
        AND othertable.some_column=?");

    $stmt->execute(array($user_input,$user_input_2));

    $cnx->commit();
}
catch (Exception $e){
       $cnx->rollback();
       echo "an error has occured";
} 
```

那是假设两个表数据没有重复的字段名称，否则您将不得不使用：

```
SELECT users.field1 as u_field1, othertable.field1 as o_field1 FROM users, othertable 
WHERE users.username=? 
AND othertable.some_column=? 
```

# java - 如何获取对股票启动器活动对象的引用？

> ID：10642636
> 
> 赞同：0
> 
> 时间：2012-05-17T19:58:11.270
> 
> 标签：java, android, reflection, launcher

我想在启动器的屏幕上读出快捷方式和小部件的位置和名称。由于每个启动器都不一样，所以我暂时将重点放在Android的库存启动器上。我还没有找到执行此操作的 API，因此我正在尝试使用 Java 的 Reflection API 运气。到目前为止，我已经能够获取类并读出保存桌面上名为 mDesktopItems 的项目的变量的类型：http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google .android/android-apps/2.2.2_r1/com/android/launcher2/Launcher.java#201](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2.2_r1/com/android/launcher2/Launcher.java#201)但是要读出变量的内容，我需要一个对启动器活动对象的引用。很明显，这个对象不必存在，但我可能会定期检查，一旦它存在，我会获取数据。

那么如何获得对启动器活动对象的引用呢？或者您能想出一种更好的方法来获取所需的数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:13:40.203

我认为这不会通过反射起作用。启动器是与您的应用程序不同的应用程序，在其自己的 VM 中的不同用户下的不同进程中运行。您将无法获得对启动器活动对象的引用。这是设计使然。如果任何应用程序可以读取任何其他应用程序变量的内容，请考虑安全隐患。

# java - OAuth: Authenticating Android user on google app engine using Facebook SSO

> ID：10642643
> 
> 赞同：1
> 
> 时间：2012-05-17T19:58:39.177
> 
> 标签：java, google-app-engine, authentication, single-sign-on, facebook-oauth

I am trying to implement facebook SSO on my Android app. Once the user logs into the app using facebook he will make calls to my web service running on Google App Engine(GAE). Currently I am able to obtain the access_token from facebook on my android app. Then I add this access_token as a cookie to my http request to GAE . But I am not sure how would I authenticate the request from the user using the cookie, on GAE. Currently I am trying:-

```
User user = OAuthServiceFactory.getOAuthService().getCurrentUser();
String email = user.getEmail(); 
```

But my GAE web service is throwing this exception:-

```
org.restlet.resource.UniformResource doCatch: Exception or error caught in resource
com.google.appengine.api.oauth.InvalidOAuthParametersException 
```

Is this the correct way of authenticating the user? If yes, then what am I missing here which is causing this exception.

Thank for the help!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:55:57.743

这是失败的，因为您没有使用 OAuth。您正在获取 Facebook 连接身份验证令牌 - 它也不使用 OAuth - 并将其附加到您对 App Engine 应用程序发出的请求中。

如果您想在您的应用中使用 OAuth，则需要对您的 App Engine 应用进行身份验证。如果你想重用你的 Facebook 凭证，你将不得不使用 Facebook 提供的任何 API 来验证身份验证令牌（如果有的话），而不是 OAuth API。

# haskell - 如何从 xmonad 默认配置中删除“完整”布局中的边框？

> ID：10642644
> 
> 赞同：2
> 
> 时间：2012-05-17T19:58:41.473
> 
> 标签：haskell, configuration, xmonad

目前我使用

```
import XMonad.Layout.NoBorders
...
xmonad $ defaultConfig { layoutHook = noBorders  $  layoutHook defaultConfig } 
```

但这使得`noBorder`所有布局，而不仅仅是“ `Full`”。

我知道，我可以简单地`layoutHook`从默认配置中复制定义并`noBorder`在“ `Full`”之前添加，但我想要漂亮的方式，希望 Haskell 为它提供一些方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T20:01:35.110

除了使用`noBorders`，您可以使用[`smartBorders`](http://hackage.haskell.org/packages/archive/xmonad-contrib/latest/doc/html/XMonad-Layout-NoBorders.html#v:smartBorders)，当只有一个窗口（或浮动窗口覆盖整个屏幕）时隐藏边框。这与仅在布局中隐藏它并不完全相同`Full`，但它可能足够接近您的目的。

如果做不到这一点，最好的选择可能是复制默认的`layoutHook`. 它不是很大，无论如何，您将来很可能想要对其进行自定义。您也许可以编写一个类型类，其中包含适用于 的所有标准 es 的实例，[`LayoutClass`](http://hackage.haskell.org/packages/archive/xmonad/latest/doc/html/XMonad-Core.html#t:LayoutClass)但它比简单地复制默认值更难看。`noBorders``Full``layoutHook`

# iphone - CDMA cell data interruption on iPhone. NSError code?

> ID：10642645
> 
> 赞同：1
> 
> 时间：2012-05-17T19:58:48.920
> 
> 标签：iphone, ios, nserror, cdma

I have a scenario where a NSURLConnection is in progress.

As we all know, CDMA phones (think Verizon, Sprint) can't handle data and phone calls at the same time. Does anyone know what, if any, NSError is returned when the connection is interrupted by a phone call?

Is there any error handling? Does didFailWithError get called or does it automatically go into the background?

Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:07:54.227

这是一个很好的问题。虽然我不知道这个案例的具体答案，但如果你实现了这个 NSURLConnection 函数：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

并在使用 xcode 调试的设备上运行您的代码，您应该能够自己看到。

编辑：

添加到另一个答案中，我找到了所有 URL 错误的列表，因此希望您可以缩小要查找的范围。 [错误](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)

**投稿前编辑：我找到了！错误是：NSURLErrorCallIsActive**

> 当电话呼叫在不支持同时电话和数据通信（EDGE 或 GPRS）的网络上处于活动状态时尝试连接时返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:09:33.647

//连接：didFailWithError：错误

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
 //handle error here
    if([error code] == NSURLErrorCallIsActive)//error code for NSURLErrorCallIsActive = -1019
    {
        //if we can identify the error
    }else{
        //otherwise handle the error generally
    }
} 
```

# postgresql - Overlapping box with infinite edge coordinate

> ID：10642646
> 
> 赞同：0
> 
> 时间：2012-05-17T19:58:54.490
> 
> 标签：postgresql, postgis

I try to understand how does overlapping box with infinity works

Why does the following exemple doesn't work. It works fine except when i try to introduce two infinite values.

This exemple should return true.

```
SELECT box '((1,1),(infinity, 1))' && box '((2, 1),(infinity, 1))' AS overlap;
overlap 
---------
f 
```

The two exemples below works

```
SELECT box '((1,1),(4, 1))' && box '((2, 1),(infinity, 1))' AS overlap;
overlap 
---------
t

SELECT box '((1,1),(4, 1))' && box '((2, 1),(5, 1))' AS overlap;
overlap
---------
t 
```

So my question is : Is there something i'm doing wrong or that i don't understand?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:31:15.650

我在 postgresql buglist 上问过：

汤姆莱恩给了我这个答案：

对此的测试涉及

```
FPge(box1->high.x, box2->high.x) 
```

其中 FPge 定义为

```
#define FPge(A,B)    ((B) - (A) <= EPSILON) 
```

当两个 high.x 值都是无穷大时，你有无穷大减去无穷大，这在 IEEE 算术中产生 NaN，因此与 epsilon 的比较结果是错误的。

总的来说，我不认为我们保证涉及无限端点的几何运算会表现良好。除了这个之外，可能还有一大堆角落案例需要修复，然后我们才能将其视为受支持的案例。

# wcf-ria-services - How to check the version of wcf ria services installed on a computer?

> ID：10642649
> 
> 赞同：2
> 
> 时间：2012-05-17T19:59:03.973
> 
> 标签：wcf-ria-services

Wcf ria services installed by Silverlight x Tools for visual studio 201x SPx, but how to check what the version of wcf ria service installed on a computer?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:59:51.027

我这样做了：去添加/删除程序并寻找“ria”

# c# - 在 C# 中将某些字符串转换为 DateTime

> ID：10642652
> 
> 赞同：1
> 
> 时间：2012-05-17T19:59:15.237
> 
> 标签：c#, datetime, datetime-format

如何在 C# 中将以下格式的字符串转换为 DateTime：

1.  格林威治标准时间 5 月 17 日下午 4:52+01:00
2.  美国东部时间 5 月 17 日下午 3:57

.NET 是否支持转换这些字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:02:03.347

不幸的是`DateTime.Parse`不会理解那些时区。三个字母的缩写不是指定时区的好方法，因为有很多不明确的缩写。例如，“CST”可以表示“中部标准时间”或“中国标准时间”。

除非您知道时区来自哪个国家（我猜您不知道），否则您可能不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:10:09.757

`DateTime.Parse()`不会识别其中任何一种格式。但是，如果您使用[ParseExact()](http://msdn.microsoft.com/en-us/library/w2sa9yss)代替，您可以指定自定义格式。有关如何指定 DateTime 格式字符串的信息在[这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

例如，第一种格式的格式字符串是`"MMMM dd, h:mmtt 'GMT'zzz"`.

无法使用 DateTime 格式字符串捕获非数字时区指定，因此第二种格式有点棘手。我可能会提前检查这种情况。当它这样做时，您可能只需将最后 3 个字母从末尾剪掉，然后使用查找表将它们转换为 GMT 偏移量，以应用于您从解析字符串的第一部分获得的 DateTime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:01:15.877

`Convert.ToDateTime(yourDateTimeString);`

[MSDN资料](http://msdn.microsoft.com/en-us/library/xhz1w05e.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:02:06.300

尝试 DateTime Parse 方法：

*   [http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx](http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx)
*   [http://msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

# sql - 获取列的值并显示在标签字段中

> ID：10642662
> 
> 赞同：0
> 
> 时间：2012-05-17T19:59:40.057
> 
> 标签：sql, sqlite, blackberry

我想在标签字段中显示表格列的值（显示总量）。

这是我在开发标签时使用的代码

```
 Border myBorder = BorderFactory.createBitmapBorder( 
    new XYEdges(20, 16, 27, 23),
    Bitmap.getBitmapResource("border.png"));
    LabelField myField = new LabelField("Total Amount Owed: Rs ",LabelField.USE_ALL_WIDTH | LabelField.FIELD_HCENTER)
    {
      protected void paint(Graphics g) {
        g.setColor(Color.BLUE);
        super.paint(g);
    }
    };  

   myField.setBorder(myBorder);  
   add(myField); 
```

这是我想用来从表中获取值的 sql 语句：

```
 Statement statementG56 = db.createStatement("SELECT owe FROM GTemp5");
                    statementG56.prepare();
                    statementG56.execute(); 
```

如何将该选择语句包含到我的标签字段中，以便提取的数量位于标签标题旁边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:47:39.987

这就是我实施的方式。希望对以后的读者有所帮助。

```
 try
                  {
                  //Open or create the database
                    Database db = DatabaseFactory.openOrCreate("database1.db"); 

                    Statement statementGF55 = db.createStatement("CREATE TABLE IF NOT EXISTS GTemp5(owe INTEGER)");
                    statementGF55.prepare();
                    statementGF55.execute();       
                    statementGF55.close();

                    Statement statementGF56 = db.createStatement("SELECT owe FROM GTemp5");
                    statementGF56.prepare();
                    statementGF56.execute();

                   Cursor c = statementGF56.getCursor();

                  while(c.next()) 
                  {

                                      System.out.println("Inside while for fetching total owed value"); 
                                        Row r;
                                        r = c.getRow();

                                         Border myBorder = BorderFactory.createBitmapBorder( 
                                         new XYEdges(20, 16, 27, 23),
                                         Bitmap.getBitmapResource("border.png"));
                                         String pp = "" + r.getObject(0);
                                        LabelField myField = new LabelField("Total Amount: Rs    " +pp,LabelField.USE_ALL_WIDTH | LabelField.FIELD_HCENTER)
                                            {
                                                  protected void paint(Graphics g)
                                                   {
                                                     g.setColor(Color.RED);
                                                      super.paint(g);
                                                    }
                                               };  

                                   myField.setBorder(myBorder);  
                                   vfm.add(myField); 

                                    }     

                      }
                      catch(Exception e) 
                      {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();     
                      } 
```

# php - Sort php array by key in arrays array

> ID：10642665
> 
> 赞同：0
> 
> 时间：2012-05-17T20:00:00.317
> 
> 标签：php, arrays, sorting

I'm searching for help. I found `ksort` and other sort methods for php. But i got an Array in an Array with an key called `order`. And this i want to be the order of the array

```
array(
   array("obj" => $objPage, "id" => "LogIn", "order" => 3),
   array("obj" => $objPage, "id" => "Home", "order" => 1),
   array("obj" => $objPage, "id" => "Register", "order" => 2),
   array("obj" => $objPage, "id" => "Imprint", "order" => 4), /* ... */
) 
```

Now i want the array objects to sort as this:

```
array(
   array("obj" => $objPage, "id" => "Home", "order" => 1),
   array("obj" => $objPage, "id" => "Register", "order" => 2),
   array("obj" => $objPage, "id" => "LogIn", "order" => 3),
   array("obj" => $objPage, "id" => "Imprint", "order" => 4), /* ... */
) 
```

Can you give me a hint how to solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:19:48.107

`array_multisort` may be valid for you:

Suposing your array is called $myArray

```
foreach ($myArray as $key => $row) {   
    $order[$key] = $row['order'];
}

array_multisort($order, SORT_ASC, $myArray) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:02:48.277

```
function cmp($a, $b)
{
    if ($a ['order'] == $b ['order']) {
        return 0;
    }
    return ($a ['order'] < $b ['order']) ? -1 : 1;
}

usort($array, "cmp");

print_r ($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:07:11.373

一个相当简单的解决方案是使用数组索引本身来存储顺序，然后使用`sort`对数组进行排序，然后`array_values`重新索引它？

# hibernate - hibernate object references an unsaved transient instance

> ID：10642668
> 
> 赞同：0
> 
> 时间：2012-05-17T20:00:20.840
> 
> 标签：hibernate, jpa

Im confused with the JPA manytoone relationship, i have a class 'judgement' which has many 'judges', when i tried to store a judgement instance into postgres db, it threw error message as:

```
Caused by: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.dyihi.evaluation.model.Judgement.judge -> com.dyihi.evaluation.model.User 
```

the judgement class:

```
@Entity
@Table(name = "JUDGEMENTS")
public class Judgement implements Serializable, Cloneable {

    /**
     * 
     */
    private static final long serialVersionUID = -7049957706738879274L;

    @ManyToOne(cascade = { CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumn(name = "user_id")
    private User judge; 
```

and my service class:

```
public Long store(Judgement judgement) throws RepositoryException {

        EntityManager em = null;
        EntityTransaction tx = null;
        try {
            em = _emf.createEntityManager();
            tx = em.getTransaction();
            tx.begin();
            em.persist(judgement);
            tx.commit();
            return judgement.getId();
        }
        finally {
            if (tx != null && tx.isActive()) {
                tx.rollback();
            }
            if (em != null) {
                em.close();
                em = null;
            }
        }
    } 
```

and in my db i have tables Judgement and User, do i need to create a table as Judgement_User for the ManyToOne relationship?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:01:22.323

首先，如果如您所说，您正在寻找一个有很多法官的判决，那么您的情况就落后了。正如kem 在他的评论中所建议的那样，您现在编码的方式*许多*判断有*一个*判断，相反的是*一个*判断可能有*很多*判断。

在回答您的问题时，与您试图挽救的判决相关的法官本身并没有得救。您的级联定义不允许将持久性级联到法官中，因此JPA别无选择，只能抛出异常。您可以更改级联定义，或手动保存判断。如果法官是持久的，但分离的，那么您可能需要先将其合并以将其重新附加到实体管理器。

# mysql - mysql, trigger on insert to limit the number of expired passwords stored

> ID：10642670
> 
> 赞同：1
> 
> 时间：2012-05-17T20:00:32.663
> 
> 标签：mysql, triggers

I am requiring that the user's current password cannot match the last five used passwords. The expired passwords will be stored in a table similar to this.

```
################################################################
#                             table_A                          #
################################################################
# id #     label    # attr_string #    attr_datetime    # u_id #
################################################################
#  1 # expired_pass #  some_hash  # YYYY-MM-DD HH:MM:SS #  1   #
#  2 # expired_pass #  some_hash  # YYYY-MM-DD HH:MM:SS #  1   #
#  3 # expired_pass #  some_hash  # YYYY-MM-DD HH:MM:SS #  1   #
#  4 # expired_pass #  some_hash  # YYYY-MM-DD HH:MM:SS #  1   #
#  5 # expired_pass #  some_hash  # YYYY-MM-DD HH:MM:SS #  1   #
################################################################ 
```

Now I am wanting a trigger that upon input checks if there are >= 5 expired passwords already stored if so then remove the oldest password. This is what I have come up with so far.

```
DELIMITER //
    CREATE TRIGGER removePass AFTER INSERT ON `user_attributes`(
        SET @user_id := SELECT u_id FROM `user_attributes` WHERE id = LAST_INSERT_ID()//
        SET @num := SELECT COUNT(id) FROM `user_attributes` WHERE u_id = @user_id AND label = 'expired_password'//
        IF @num >= 5 THEN
            DELETE FROM `user_attributes`
            WHERE id IN(
                SELECT id
                FROM `user_attributes`
                WHERE u_id = @user_id
                AND label = 'expired_pass'
                ORDER BY attr_datetime DESC
                LIMIT 1

            )
        END IF
    )//
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:15:04.283

您可以避免使用`attr_datetime`和依赖`id`s：

```
DELETE FROM `user_attributes`
            WHERE id = (
                SELECT MIN(id)
                FROM `user_attributes`
                WHERE u_id = @user_id
                AND label = 'expired_pass'
            ) 
```

PS 感谢@sixlettervariables 的[评论](https://stackoverflow.com/questions/10642670/mysql-trigger-on-insert-to-limit-the-number-of-expired-passwords-stored#comment13799473_10642670)和 Brock 的[建议](https://meta.stackexchange.com/questions/132870/question-deleted-by-the-poster-because-the-issue-is-resolved#comment368166_132870)。

# javascript - Increment variable by more than 1?

> ID：10642671
> 
> 赞同：18
> 
> 时间：2012-05-17T20:00:32.740
> 
> 标签：javascript, increment

Here's my script :

```
function itemQuantityHandler(operation, cart_item) {
  var v = cart_item.quantity;

  //add one
  if (operation === 'add' && v < settings.productBuyLimit) {
    v++;
  }

  //substract one
  if (operation === 'subtract' && v > 1) {
    v--;
  }

  //update quantity in shopping cart
  $('.item-quantity').text(v);

  //save new quantity to cart
  cart_item.quantity = v;
} 
```

What I need is to increase `v` (`cart_item.quantity`) by more than one. Here, it's using `v++`, but it's only increasing by 1\. How can I change this to make it increase by 4 every time I click on the plus icon?

I tried

```
v++ +4 
```

But it's not working.

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-17T20:03:24.887

使用复合赋值运算符：

```
v += 4; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-17T20:02:32.623

用于`variable += value;`增加一个以上：

```
v += 4; 
```

它也适用于其他一些运算符：

```
v -= 4;
v *= 4;
v /= 4;
v %= 4;
v <<= 1;
v >>= 4; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T20:02:04.253

将 v 增加 n：v += n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:01:53.630

尝试这个：

```
//event handler for item quantity in shopping cart
    function itemQuantityHandler(p, a) {
        //get current quantity from cart
        var filter = /(\w+)::(\w+)/.exec(p.id);
        var cart_item = cart[filter[1]][filter[2]];
        var v = cart_item.quantity;

        //add four
        if (a.indexOf('add') != -1) {
            if(v < settings.productBuyLimit) v += 4;
        }
        //substract one
        if (a.indexOf('subtract') != -1) {
            if (v > 1) v--;

        }
        //update quantity in shopping cart
        $(p).find('.item-quantity').text(v);
        //save new quantity to cart
        cart_item.quantity = v;
        //update price for item
      $(p).find('.item-price').text((cart_item.price*v).toFixed(settings.numberPrecision));
        //update total counters 
        countCartTotal();
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-15T04:16:05.410

`var i = 0; function buttonClick() { x = ++i*10 +10; }`

# vb.net - 用于 Windows 手机“system.xml.linq.xelement”的 VB silverlight

> ID：10642673
> 
> 赞同：0
> 
> 时间：2012-05-17T20:00:48.567
> 
> 标签：vb.net, silverlight, windows-phone-7

您好，我遇到了这个问题：我正在使用 linq 库从 xml 下载数据，这些数据我想将它们添加到文本块项目中

```
TextBlock1.Text = TextBlock1.Text & result 
```

但它有一个错误：

> 错误 1 ​​运算符 '&' 没有为类型 'String' 和 'System.Xml.Linq.XElement' 定义。

当我将此行更改为：

```
TextBlock1.Text = TextBlock1.Text & result.Tostring 
```

它有效，但它添加了这些数据：

```
"<"data> data <"/data> 
```

代替 ：

```
hello 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:04:48.537

你可能想要`result.Value`：

```
TextBlock1.Text = TextBlock1.Text & result.Value 
```

您可以查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.value.aspx)以获取有关`XElement.Value`.

另一方面，您可以使用：

```
TextBlock1.Text &= result.Value 
```

作为一种较短的书写方式。

# java - 如何使其他服务器适配器可见？

> ID：10642675
> 
> 赞同：0
> 
> 时间：2012-05-17T20:00:52.380
> 
> 标签：java, eclipse, webserver, adapter

我安装了 Eclipse EE Indigo，当我第一次检查“新服务器向导”时，我看到了 JBoss、Tomcat 等服务器。但是，由于我对 Jetty 或 Glassfish 感兴趣，我为它们安装了额外的适配器（通过 Eclipse 中的“下载额外的服务器适配器”）。

我重新启动了 Eclipse，但列表没有改变——仍然是 JBoss、Tomcat 和其他旧东西。另一方面，我在“下载其他...”窗口中看不到 Jetty 和 GF。

由于拼命尝试我安装了Jetty WTP，重启，没有任何变化。

**如何使新安装的适配器可见？**毕竟我想使用那些服务器（Jetty 或 GF）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:28:24.090

有时在安装新插件后使用 -clean 选项启动 eclipse 会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:17:14.753

也许您可以尝试将它们安装为新软件安装：[http ://wiki.eclipse.org/Jetty_WTP_Plugin/Jetty_WTP_Install](http://wiki.eclipse.org/Jetty_WTP_Plugin/Jetty_WTP_Install)

我像这样安装了码头适配器，现在它在 Eclipse 服务器中可见。

# php - 从 public_html 上传文件

> ID：10642678
> 
> 赞同：1
> 
> 时间：2012-05-17T20:01:14.997
> 
> 标签：php, file-upload

出于安全原因，我想从 *public_html* 目录上传文件，但我不能这样做，因为它给了我以下错误消息：

> **警告：** move_uploaded_file() [[function.move-uploaded-file]](http://www.acslibertygroup.com/beta/admin/function.move-uploaded-file)：无法访问 /opt/share/www/a/domainname/safety-download/file/20120517215405-2012-05-16--1-27-51。 png 在**/opt/share/www/a/domainname/public_html/beta/admin/dokumentum.php**第**29行**

我不想使用 MySQL - BLOB 文件上传，因为我的 MySQL 服务器中没有足够的空间来上传超过 3000 个文件，文件大小超过 5 MB，但我想拒绝用户访问这些文件，因为它们包含个人详细信息。

谢谢你的回答，
巴拿巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:07:11.817

您确定您有权在该文件夹中写入吗？

肮脏的修复

```
chmod a+w /opt/share/www/a/domainname/safety-download/file/ 
```

或者您可以授予 apache 在此文件夹中写入的权限。通过将文件夹的组更改为 apache 的组

并确保您以正确的顺序调用 move_uploaded_file `$src, $dest`：

# wpf - 如何将对象的内部属性从 UI 更新到 VM？(WPF MVVM)

> ID：10642680
> 
> 赞同：0
> 
> 时间：2012-05-17T20:01:22.470
> 
> 标签：wpf, xaml, mvvm

我的 ViewModel 中有一个属性，我将其称为“项目”，其中包含多个嵌套列表。由于我可以使用触发器和绑定在 xaml 中显示所有内容，因此这些列表都没有在视图模型中关联的属性。我的 xaml 在树视图中显示项目层次结构，并在几个视图中显示其详细信息（内容控件根据在树视图中选择的项目选择正确的视图）。其中一个“详细信息”是嵌套列表之一中包含的对象的属性，我在文本框中显示它，以便用户可以编辑它，我遇到的问题是我没有看到该属性已更新一旦我在文本框中对其进行了更改，就在 VM 的 Project 属性中。有人告诉我，我必须在 VM 中为我要编辑的特定对象的属性创建一个属性，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:20:26.780

常见的错误是：

**使用 OneWay 绑定模式而不是 TwoWay**

在 XAML 中：

```
<TextBox Text="{Binding Path=Name, Mode=TwoWay}" /> 
```

**直到 TextBox 失去焦点后才意识到更新不会传播到 VM。**

这是文本框的默认设置：

```
<TextBox Text="{Binding Path=Name, UpdateSourceTrigger=LostFocus}" /> 
```

您可以将其更改为：

```
<TextBox Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}" /> 
```

# java - Jackson 性能和线程安全的更好选择是什么？

> ID：10642681
> 
> 赞同：0
> 
> 时间：2012-05-17T20:01:29.450
> 
> 标签：java, multithreading, json, jackson

在多线程系统中使用 Jackson 序列化的更好方法是什么：

*   为每个请求创建一个新的序列化程序对象，或者
*   将序列化程序工厂创建为 bean 并发出所有请求以集中使用它

它在序列化/脱盐过程中是否有同步块，会影响运行时性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:08:49.443

请参阅[http://jira.codehaus.org/browse/JACKSON-570?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](http://jira.codehaus.org/browse/JACKSON-570?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)。这取决于您使用的版本。

# asp.net - 在 GridView 中显示之前编辑数据

> ID：10642684
> 
> 赞同：3
> 
> 时间：2012-05-17T20:01:35.713
> 
> 标签：asp.net, gridview, webforms

所以基本上我有从数据库中提取的数据，我希望它显示在网格视图中。不幸的是，星期几存储为整数，因此星期一等于 0，星期二等于 1，依此类推。

基本上，我如何在输出数据时更改该数据，以便将数字转换为正确的星期几。

我有一个网格视图，如下所示，目前我用 onrowdatabound 设置了它：

```
 <asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
                        AutoGenerateColumns="False" DataSourceID="SqlDataSource2" Width="721px"  
                        onrowdatabound="GridView_RowDataBound" 
                        > 
```

那么 GridView_RowDataBound 后面的代码是：

```
 protected void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {

        }

    } 
```

我假设我只需要在那里输入正确的代码。但是，由于某种原因，我不能对单个单元格执行任何操作，而只能对特定列中的每个单元格执行任何操作。所以我可以将一列中的每个单元格更改为粗体，但不能单独更改一个单元格。我确定有办法，但无法理解如何做到这一点！

任何帮助将非常感激！

谢谢

```
 protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int days = (int)GridView1.Rows[e.Row.RowIndex].Cell[2].Text;
            if (days == 0) GridView1.Rows[e.Row.RowIndex].Cell[2].Text = "Monday";
            if (days == 1) GridView1.Rows[e.Row.RowIndex].Cell[2].Text = "Tuesday";
            if (days == 1) GridView1.Rows[e.Row.RowIndex].Cell[2].Text = "Wednesday";
            if (days == 1) GridView1.Rows[e.Row.RowIndex].Cell[2].Text = "Thursday";
            if (days == 1) GridView1.Rows[e.Row.RowIndex].Cell[2].Text = "Friday";

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:05:59.850

你可以试试这个。

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
     string days = e.Row.Cells[2].Text;
     if (days == "0") e.Row.Cells[2].Text = "Monday";
     if (days == "1") e.Row.Cells[2].Text = "Tuesday";
     if (days == "2") e.Row.Cells[2].Text = "Wednesday";
     if (days == "3") e.Row.Cells[2].Text = "Thursday";
     if (days == "4") e.Row.Cells[2].Text = "Friday";
} 
```

# c++ - std::set 在插入时起作用。

> ID：10642692
> 
> 赞同：0
> 
> 时间：2012-05-17T20:02:03.273
> 
> 标签：c++, set

这可能非常简单。我已经`std::set<int> my_set;`为某些类添加了一个到我的头文件中。然后，在那个类的实现中，我尝试插入到这个集合中。举个例子，只是做`my_set.insert(1);` 这不是编译，这是非常奇怪的行为。这是我的编译器错误：

```
error C2663: 'std::_Tree<_Traits>::insert' : 4 overloads have no legal conversion for 'this' pointer 
```

我包含使用 set 的文件是`#include <set>`. 我做错了什么？我没有在代码的其他任何地方调用该集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:06:14.060

由于您收到关于 的错误`this`，但您正在尝试插入`int`，因此我会在这里冒险并猜测您正在尝试在`const`方法中执行此操作。

```
class A
{
    std::set<int> my_set;
    void foo() 
    {
       my_set.insert(1); //OK
    }
    void foo() const
    {
       my_set.insert(1); //not OK, you're trying to modify a member
                         //std::set::insert is not const, so you can't call it
    }
}; 
```

删除`const`. 这似乎是合乎逻辑的事情，因为您正在修改成员。

# facebook-javascript-sdk - 将查询布局与反应式模板 + 异步数据源集成的好方法？

> ID：10642708
> 
> 赞同：0
> 
> 时间：2012-05-17T20:03:11.990
> 
> 标签：facebook-javascript-sdk, meteor, handlebars.js, jquery-layout

我正在开发一个从 Facebook 获取数据的 Meteor 应用程序，我想使用 jquery-layout 进行演示。我怀疑在尝试使用 jquery 修改响应式模板中的 HTML 时可能会有一些“微妙之处”，所以我设置了一个相对简单的测试用例，类似于这样（为了简洁起见）......

```
<body>
{{> mainTemplate}}
</body>

<template name="mainTemplate">
  {{#with userInfo}}  
  {{> partialNorth}}  
  {{> partialWest}}  
  {{> partialCenter}}  
  {{> partialEast}}  
  {{/with}}  
  {{layItOut}}  
</template> 
```

Template.mainTemplate.userInfo 返回 Session 变量的内容，该变量以默认值开头，并使用来自 Facebook 的信息异步更新。

Template.mainTemplate.layItOut 使用回调 fcn 设置对 Meteor.defer 的调用，该回调 fcn 实际执行 5 行 jquery-layout 代码。

这似乎工作得很好......

*   初始显示符合预期/预期（尽管有一段短暂的时间没有布置页面）

*   对响应式上下文的任何更新都会导致重新执行布局（再次，w/brief-but-visible re-layout）

那么，我为什么要发牢骚呢？大多数情况下，我想找到一种更简洁的方法来消除明显的重新布局活动。

我*可以*使反应式上下文更加细化，但我不确定这是否真的有帮助。

或者，我想我可以尝试直接控制渲染（例如，通过 Meteor.ui.render() ，但这听起来需要做很多工作 ;-)

我想我真正想要的是

a) 一种挂钩 Meteor 渲染事件的方法

或者更好

b) 一种将查询布局连接到模板的更简洁的方法

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:31:47.457

因此，我设法对自己进行了足够的教育，以回答我自己的问题，以防其他人发现它有用。底线是我在几个层面上都错了。使反应上下文更细化*是*答案（或至少*是*答案）。

在我给出的示例中，我通过将所有渲染放在 #each 构造中来使整个页面具有反应性。我现在要做的是尝试使响应式上下文尽可能小，以便在任何响应式更改时仅重新渲染页面的（相对）一小部分，并且*所有响应**式*元素都包含在下方（或下方） jquery ui 元素的级别。

即，像这样：

```
<body>
{{> mainTemplate}}
</body>

<template name="mainTemplate"> 
```

~~{{#with userInfo}}~~

```
{{> partialNorth}} 
{{> partialWest}}  
  ... 
```

~~{{/和}}~~

```
 {{layItOut}}  
</template>  

<template name="partialNorth">
  <div class="ui-layout-north">  <-- definition for jquery-layout north panel
    <h1>This is the north pane</h1>
    <p>The user data go next:</p><br />
    {{> templateUserData}}
  </div>
</template>

<template name="templateUserData">
  <div>
    {{#with theUserData}}  <-- Assumes a helper function 'theUserData' for this template
      <p>First name: {{first_name}}</p>
      <p>Last name: {{last_name}}</p>
      ...
    {{/with}}
  </div>
</template> 
```

一旦你在 jquery ui 元素下面有了反应元素（到目前为止我已经用面板、选项卡、手风琴、按钮和弹出窗口尝试了它），整个事情就像它在闪亮的小册子中所说的那样工作！;-)

# javascript - Javascript不写正斜杠

> ID：10642710
> 
> 赞同：4
> 
> 时间：2012-05-17T20:03:24.747
> 
> 标签：javascript, html

我有以下内容：http: [//jsfiddle.net/mVs9T/13/](http://jsfiddle.net/mVs9T/13/)

有人可以告诉我为什么输出正在打印

```
<br> 
```

代替：

```
<br/> 
```

像这里： http: [//f.imgtmp.com/Xjoq3.png](http://f.imgtmp.com/Xjoq3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:05:00.273

是的，因为这就是 chrome 解释`<br />`标签的方式。这只是审美；你不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:12:30.453

我们添加了`alert(txt);`它，它给了我们`<br/>`- 看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:05:37.853

那是浏览器的行为。这不应该是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:06:59.187

由于`<br>`标签之间不能有任何内容，`/>`因此不需要该部分。这可能是浏览器不显示它的原因。

# regex - 如何在';'之后抓取一个字母 用正则表达式？

> ID：10642712
> 
> 赞同：0
> 
> 时间：2012-05-17T20:03:25.837
> 
> 标签：regex, python-2.7

`;`使用正则表达式后如何抓取字母？例如：

```
c ; d
e ; f ; m ; k ; s 
```

* * *

```
import re
f = open('file.txt')
regex = re.compile(r"(?<=\; )\w+")
for line in f:
    match = regex.search(line)
    if match: 
        print match.group() 
```

此代码仅抓取`d`和`f`. 我需要你看起来像的结果：

```
d
f
m
k
s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:17:38.753

将所有出现的*“;”*替换为*换行符*并修剪每行末尾的所有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:36:44.367

而不是`regex.search`使用`regex.findall`. 这将为您提供每行的匹配列表，然后您可以在单独的行上进行操作和打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:06:24.497

如果您想将“;”“列入黑名单”，请使用与此类似的正则表达式 特点：

```
[;] 
```

我对 python 不太了解，但在这里你将如何在 JavaScript 中使用它：

```
var desired_chars = myString.replace(/[;]/gi, '') 
```

# c# - 将结构数组传递给 COM 接口

> ID：10642713
> 
> 赞同：0
> 
> 时间：2012-05-17T20:03:26.393
> 
> 标签：c#, com, parameter-passing

我有一个带有 IDL 文件的 COM 接口，其中声明了以下内容：

```
typedef [uuid(D7B6C495-FFF3-11E0-8A39-08002700D831)]
struct PORT_CONFIG
{
  unsigned char  rack;
  unsigned short port;
  unsigned char  offset;
} PORT_CONFIG;

[object, uuid(D7B6C492-FFF3-11E0-8A39-08002700D831), dual, nonextensible, pointer_default(unique)]
interface IMED704 : IDispatch
{
  [id(5), helpstring("method PortConfig")] HRESULT PortConfig([in] SAFEARRAY(PORT_CONFIG) portCfg, [in, defaultvalue(-1)] VARIANT_BOOL clearInputs);
}; 
```

现在在我的 C# 程序中，我试图调用 PortConfig 方法：

```
PORT_CONFIG[] portCfg = new PORT_CONFIG[12];

// ...Initialize code goes here

dig704.PortConfig(portCfg, true); 
```

但是，当调用该方法时，程序会抛出异常。我究竟做错了什么？

例外是：

```
The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

如果我尝试以下操作，可以获得更多信息：

```
IntPtr pointer = Marshal.GetITypeInfoForType(typeof(PORT_CONFIG)); 
```

我收到的例外是：

```
The specified type must be visible from COM.\r\nParameter name: t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:17:24.200

我现在有了自己问题的答案。由于某种原因，当嵌入互操作类型时，互操作层在 SAFEARRAY 参数上失败（VS2010 中的默认值）。要解决此问题，请右键单击对 COM 对象的引用并将 Embed Interop Type 设置为 False。

我希望我能把这个答案归功于我，但这个功劳属于迈克尔·泰勒：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1325d24c-db0f-43a1-9780-b68a843d816b](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1325d24c-db0f-43a1-9780-b68a843d816b)

# java - 如何从对象中获取布尔值

> ID：10642716
> 
> 赞同：6
> 
> 时间：2012-05-17T20:03:42.653
> 
> 标签：java, classcastexception

我尝试了不同的方法来解决这个问题，但我无法解决它。我正在尝试获取在复选框的此方法中传递的**对象的布尔值：**

```
public boolean onPreferenceChange(Preference preference, Object newValue) 
{
    final String key = preference.getKey();
    referenceKey=key;
    Boolean changedValue=!(((Boolean)newValue).booleanValue()); //ClassCastException occurs here
} 
```

我得到：

> java.lang.ClassCastException：java.lang.String 不能转换为 java.lang.Boolean

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T20:04:45.000

而不是铸造它，你可以做类似的事情

```
 Boolean.parseBoolean(string); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T20:11:46.020

这是java中布尔类的一些源代码。

```
// Boolean Constructor for String types.
public Boolean(String s) {
    this(toBoolean(s));
}
// parser.
public static boolean parseBoolean(String s) {
    return toBoolean(s);
}
// ...
// Here's the source for toBoolean.
// ...
private static boolean toBoolean(String name) { 
    return ((name != null) && name.equalsIgnoreCase("true"));
} 
```

如您所见，您需要传递一个值为“true”的字符串，以使布尔值为真。否则是假的。

```
assert new Boolean( "ok" ) == false; 
assert new Boolean( "True" ) == true;
assert new Boolean( "false" ) == false;

assert Boolean.parseBoolean( "ok" ) == false; 
assert Boolean.parseBoolean( "True" ) == true;
assert Boolean.parseBoolean( "false" ) == false; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T20:15:48.630

从您发布的代码和您看到的结果来看，newValue 看起来不像是布尔值。因此，您尝试转换为布尔值，但它不是布尔值，因此会发生错误。

目前尚不清楚您要做什么。理想情况下，您会将 newValue 设为布尔值。如果你不能这样做，这应该工作：

```
boolean newValue;
if (newValue instanceof Boolean) { 
    changedValue = newValue; // autoboxing handles this for you
} else if (newValue instanceof String) {
    changedValue = Boolean.parseBoolean(newValue);
} else { 
    // handle other object types here, in a similar fashion to above
} 
```

请注意，此解决方案并不理想，而且有些脆弱。在某些情况下这没问题，但最好重新评估方法的输入以使它们更清晰。如果你不能，那么上面的代码将起作用。这实际上只有您可以在解决方案的上下文中决定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T20:18:17.390

如果你知道你的`Preference`is a `CheckBoxPreference`，那么你可以调用[isChecked()](http://developer.android.com/reference/android/preference/TwoStatePreference.html#isChecked%28%29)。它返回 a `boolean`，而不是 a `Boolean`，但这可能已经足够接近了。

以下是[APIDemos 设备管理](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/DeviceAdminSample.html)示例 (DeviceAdminSample.java) 中的一些代码。

```
private CheckBoxPreference mDisableCameraCheckbox;

public void onResume() {
    ...
    mDPM.setCameraDisabled(mDeviceAdminSample, mDisableCameraCheckbox.isChecked());
    ...
}

public boolean onPreferenceChange(Preference preference, Object newValue) {
...
    boolean value = (Boolean) newValue;
...
    else if (preference == mDisableCameraCheckbox) {
        mDPM.setCameraDisabled(mDeviceAdminSample, value);
        reloadSummaries();
    }
    return true;
} 
```

# iphone - 如何从另一个视图控制器调用方法

> ID：10642719
> 
> 赞同：3
> 
> 时间：2012-05-17T20:04:05.763
> 
> 标签：iphone, objective-c, ios, facebook-graph-api

我想调用这个方法：

```
- (void)getUserFriendTargetDialogRequest {
    currentAPICall = kAPIFriendsForTargetDialogRequests;
    [self apiGraphFriends];
} 
```

从另一个视图控制器中的这个条件语句：

```
if (idx == 2) {
        NSLog(@"you touched menu 2");

        APICallsViewController *apiViewController = [APICallsViewController alloc];
        [self.navigationController pushViewController:apiViewController animated:YES]; 
    } 
```

任何人都可以帮助解决这个问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T20:13:50.340

首先，您可能还想通过以下方式初始化您的 APICallsViewController：

```
 APICallsViewController *apiViewController = [[APICallsViewController alloc] initWithNibName:nil bundle:nil]; 
```

那么如果那个 getUserFriend... 是 APIViewController 的一个方法，你可以这样做：

```
 [apiViewController getUserFriendTargetDialogRequest]; 
```

但是，由于您没有从其他视图控制器传递任何参数，您可以考虑在 init 方法或 APICallsViewController 的 viewDidLoad 方法中调用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T20:13:15.133

```
OtherViewController *viewController = [[OtherViewController alloc]         
                                           init];
[viewController methodName];
[viewController release]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T20:18:52.117

1>只需分配方法所在的类，然后通过该类的对象调用它。

```
ViewControllWithMethod *view=[ViewControllWithMethod  alloc]]init];
[view getUserFriendTargetDialogRequest]; 
```

2>您可以将其作为类方法而不是实例方法，然后您就可以通过它来调用它`className.getUserFriendTargetDialogRequest`

# jquery - 使用 jQuery 添加/删除元素（ckeditor）

> ID：10642720
> 
> 赞同：0
> 
> 时间：2012-05-17T20:04:12.717
> 
> 标签：jquery, ckeditor

我需要对此代码进行一些更改[http://jsfiddle.net/Ddtnw/](http://jsfiddle.net/Ddtnw/)。

我想要

*   逐行删除一键删除当前行

*   字段集的 id 和图例更改（例如：如果我们删除第二个块，则第三个块的 id 更改为第二个）

*   而不是字段集，我想用 CKEditor 做同样的事情。

你能帮我吗？

PS：对不起我的英语；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:17:12.570

我没有更改您的其余代码，但是我猜这个小提琴可以满足您的要求：http: [//jsfiddle.net/Ddtnw/5/](http://jsfiddle.net/Ddtnw/5/)

# javascript - JS 排序 - 确定是否有任何变化？

> ID：10642729
> 
> 赞同：1
> 
> 时间：2012-05-17T20:04:55.217
> 
> 标签：javascript, sorting

我正在使用 array.sort 对对象数组进行排序。

除了自己进行比较之外，有没有办法确定这些对象的顺序是否发生了变化？一些内置的 JS 功能？我不需要知道更改的数量，只需知道至少有 1 个更改。

**更新：**

我正在对自定义对象进行排序，例如：

```
[
 { 'value' : 5, 'name' : 'foo'},
 { 'value' : 3, 'name' : 'bar'},
 { 'value' : 10, 'name' : 'js'}
] 
```

**更新 2：**

我正在考虑在生成对象时添加一个额外的自定义属性“order”，然后在.sort 之后检查“order”是否是连续的。有更快/更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:16:19.957

没有任何内置功能可以满足您的要求。如果它是一个简单的数组，您可以使用 join/toString() 并比较两个最终字符串。如果数组包含对象，可能会使用 JSON.stringify 并进行比较。

```
var myArray1 = [1,2,3,4,5],
    myArray2 = [2,1,3,4,5],
    myArray1_sorted = myArray1.slice().sort(),
    myArray2_sorted = myArray2.slice().sort();

//Check to see if the strings are the same or different
console.log( myArray1_sorted.toString() === myArray1.toString() ); //true - sort should not change anything
console.log( myArray2_sorted.toString() === myArray2.toString() ); //false - sort should have changed order 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:18:04.253

来自[Array.sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)文档：

```
array.sort([compareFunction]) 
```

所以很明显，没有内置的解决方案/方法来检测至少一个元素在排序过程中是否改变了它的位置。所以你需要编写自己的方法：

```
function isAnyElementChangedItsPosition( unsortedArray, sortedArray ){
   for( var i = 0; i < unsortedArray.length; ++i){
       if( unsortedArray[i] !== sortedArray[i] ){
           return true;
       }
   } 
   return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:41:16.557

如果您不想弄乱数组的两个副本，请在开始排序之前检查数组。

您可以遍历数组并在每个项目都处于其排序位置时返回 true（比较“小于”下一个项目）或在检测到一个项目位于错误位置时返回 false。

由于您使用的是对象，因此比较代码取决于您对对象进行排序的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:16:08.987

您必须以某种方式比较数组。您可以轻松克隆数组并进行检查：

```
 var arr = [5, 4, 1, 6]
  var arrBefore = arr.slice(0);
  arr.sort()

  for(var i =0; i< arr.length; i++) { 
    if (arrBefore[i] !== arr[i]) {
      // a change was made
    }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T20:17:41.603

简而言之：没有内置函数，你必须检查是否相等。

这是检查相等性的一种方法：

```
function arraysEqual(a, b) {

    // Are the lengths the same?
    var i = a.length;
    if (i !== b.length)
        return false;

    // Are all the values the same?
    while (i --) {
        if (a[i] !== b[i])
            return false;
    }

} 
```

请注意，这*不会*检查它们是否是数组；`arraysEqual("abc", ["a", "b", "c"])`是真的。如果需要，您可以添加此检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T20:17:50.840

没有内置功能可以做你想做的事。

这个怎么样：

```
function isArraySorted(array) {
    if (!array.length) {
        return true;
    }
    var lastElement = array[0];
    for (var i = 1; i < array.length; i++) {
        if (array[i] <= lastElement) {
            return false;
        }
        lastElement = array[i];
    }
    return true;
}

alert(isArraySorted([1,2,3]) + " " + isArraySorted([1,2,3,2.5]));

var array = [1,2,3];

if (!isArraySorted(array)) {
    // No need to do the sort if the array is already sorted.
    array.sort();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T20:28:25.670

不复制数据，因为字符串和并行数组会这样做。

```
function chkOrder(a) {
  for(var i =1; i< a.length; i++)
    if (a[i-1] > a[i]) return false;
  return true;
} 
```

如果您颠倒顺序，您可能需要处理 th ">" 符号，这也将在第一次出现时返回 false（未排序）

如果我们可以控制包含的对象，那么我们就可以控制对象的变化并触发父排序

```
function O(parent,data) {//initialize with parent and value array/object
  this.parent=parent;
  this.data=data;
  //shortcurt to sort parent
  this.sort=function()
    {console.log("sortingparent");this.parent.sort(this.parent.sortfunc);}
  this.setData=function(data) {
  this.data=data;
  this.sort();
}
//if changes can be groupped then is more efficient to signal parent dirty and sort latter
this.setKey=function(key,value) {//change value in the data
  if (key==parent.sortkey&&value!=this.data[key]) {
    this.data[key]=value;
    this.sort();
  } else this.data[key]=value;
}
this.parent.push(this);
  this.sort();
  return this;
}
//-------
//using a simple array, this could also be and object and have specific func's
var arr=[];
//example, sort by name, ascending
arr.sortkey="name";
//closure to build a sort predicate bound to the used key
function setkey(key) {return function(a,b) {return a.data[key]>b.data[key];}}
arr.sortfunc=setkey(arr.sortkey);
var b=new O(arr,{name:"B",value:0});
var c=new O(arr,{name:"C",value:2});
var a=new O(arr,{name:"A",value:1});
var d=new O(arr,{name:"D",value:3});
console.log("changing value");
a.setKey("value",100);//when not sorting by value its the same as a.data.value=100
console.log("changing name");
a.setKey("name","X");//this will fire parent sort
for(n=0;n<arr.length;n++) console.log(arr[n].data.name,"=",arr[n].data.value); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-17T20:11:16.550

```
var data = [
    { 'value' : 5, 'name' : 'foo'},
    { 'value' : 3, 'name' : 'bar'},
    { 'value' : 10, 'name' : 'js'}
];

var changed = sortAndReport(data, byValue);

// sortAndReport :: [a], (a, a -> Number) -> Boolean
// Sorts an array according to the provided Array.prototype.sort
// compare function and returns a Boolean indicating whether
// sorting changed the order of the array.
function sortAndReport(a, fn) {
    var changed = false;

    a.sort(function (a, b) {
        var sortResult = fn(a, b);
        changed        = sortResult > 0;
        return sortResult;
    });

    return changed;
}

// byValue :: { value :: Number }, { value :: Number } -> Number
function byValue(a, b) {
    return a.value - b.value;
} 
```

# android - 在 Android 上的 HTML 5 应用程序上检测和应用当前系统语言

> ID：10642737
> 
> 赞同：1
> 
> 时间：2012-05-17T20:05:35.827
> 
> 标签：android, html, cordova, backbone.js

我正在开发一个使用 PhoneGap 和 Backbone JS 的 HTML5 应用程序。

问题是通过设置在 Android 设备上更改的语言没有进入我的 HTML 5 应用程序，尽管我可以看到它在独立的浏览器实例中发生了更改。

为了支持应用程序的全球化，我使用 i18n 插件为应用程序选择当前语言。我的应用程序在 iOS 上运行良好。但是，当我在 Android 上尝试此操作时，用户选择的语言不会得到反映例如，如果我从系统设置中选择法语作为我的语言并尝试查看 window.navigator.language 的值是什么，它仍然是**en**与**fr**相反，这在 iOS 上得到了完美的体现。仅供参考，正如 PhoneGap 推荐的那样，在 Android 上我正在打电话

```
`public class myApp extends DroidGap {
    private String pageURl = "somepath";
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl(pageUrl); // this will load my app's main html page.
    }
}` 
```

有人可以帮我找出问题所在吗？

谢谢大O

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T06:29:16.180

尝试使用以下补丁从用户代理字符串中获取语言，它应该可以工作：

```
 var lang;
    if (navigator
            && navigator.userAgent
            && (lang = navigator.userAgent
                    .match(/android.*\W(\w\w)-(\w\w)\W/i))) {
        lang = lang[1];
    }

    if (!lang && navigator) {
        if (navigator.language) {
            lang = navigator.language;
        } else if (navigator.browserLanguage) {
            lang = navigator.browserLanguage;
        } else if (navigator.systemLanguage) {
            lang = navigator.systemLanguage;
        } else if (navigator.userLanguage) {
            lang = navigator.userLanguage;
        }
        lang = lang.substr(0, 2);
    }

    console.log("current language is", lang); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T07:15:39.790

选定的答案似乎不适用于 Cordova-Crosswalk 项目。实际上使用 Moto G2 和 Cordova-Crosswalk 返回“99”，因为 userAgent 是这样的：

[![userAgent 与 Cordova-Crosswalk 和 Moto G2](../Images/c40c09347a2c535d57a11e4474d0111d.png)](https://i.stack.imgur.com/0ns0h.png)

我建议使用[Cordova 全球化插件](https://github.com/apache/cordova-plugin-globalization)或使用 Java 方法制作自己的简单插件：Locale locale = Locale.getDefault();

# spring - 春天地图注射

> ID：10642742
> 
> 赞同：1
> 
> 时间：2012-05-17T20:05:55.913
> 
> 标签：spring, velocity, code-injection, map

我一直在尝试以下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:util="http://www.springframework.org/schema/util"
................
>

<bean id="dateBean" class="org.apache.velocity.tools.generic.NumberTool"/>

<bean id="service" class="package.xyz">
    <property name="toolMap">
    <util:map map-class="java.util.HashMap">
        <entry key="number"><ref:bean="dateBean"/></entry>
    </util:map>
    </property>
</bean> 
```

如您所见，这是针对速度工具配置的。

我得到这个例外：

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'util:map'.

cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be   found for element 'util:map'. 
```

谁能帮我解决这个问题？

**更新**：我添加了 XML 声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:10:50.000

您的 XML 标头应如下所示（注意正确的标头声明）：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<!-- ... --> 
```

如[C.2.2 util schema](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util)中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:17:48.203

不要`<util:map>`用于此用例。这实际上是 a 的别名`MapFactoryBean`。改用经典`<map>`元素，它应该可以工作。

# python - Python - 对数组列表进行分类第 2 部分

> ID：10642747
> 
> 赞同：2
> 
> 时间：2012-05-17T20:06:17.537
> 
> 标签：python, arrays, logic

我希望有人可以帮助我解决我（再次）遇到的问题。

如果我有坐标：

```
 x = array[0,1,2,3,4,3,2,3,-2,-4,-7,2,2]
 y = array[0,1,2,3,4,5,6,7,8,9,10,11,12] 
```

并在[对 python 中的数组列表进行分类的](https://stackoverflow.com/questions/10633831/categorizing-the-list-of-array-in-python#comment13784044_10633831)帮助下，我可以：

```
x = [(0, 1, 2, 3, 4), (4, 3, 2), (2, 3), (3, -2, -4, -7), (-7, 2), (2, 2)] 
```

问题是，我应该如何让 y 变成这样：

```
y = [(0,1,2,3,4),(4,5,6),(6,7),(7,8,9,10),(10,11),(11,12)] 
```

因为，x 和 y 实际上是坐标并且它们彼此有界。

我曾尝试使用循环功能，但我意识到代码仍然是错误的

```
se = []
for i in range(len(z)):
        k = z[i]
        for i in range(len(k)):
                se.append(y[i]) 
```

最好的祝福，

格伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:28:15.653

我从[您之前](https://stackoverflow.com/questions/10633831/categorizing-the-list-of-array-in-python#comment13784044_10633831)的问题中引用了@jamylak 的答案，并显示了一些细微的修改。

虽然您可以尝试将结果的模式与您的 匹配`x`，`y`但您也可以修改原始解决方案以将 x 和 y 视为点 (x,y)：

```
from itertools import groupby

x = [0,1,2,3,4,3,2,3,-2,-4,-7,2,2]
y = [0,1,2,3,4,5,6,7,8,9,10,11,12]

def slope(a,b): #Returns 1 for inc, 0 for equal and -1 for dec
    return (a > b) - (a < b) 

def groups(nums):
    # 
    # Change the call to slope() to assume 2d point tuples as values
    #
    for k,v in groupby(zip(nums,nums[1:]), lambda (x,y): slope(x[0],y[0])):
        yield next(v) + tuple(y for x,y in v) 

#
# Pass in a zipped data structure
#
print list(groups(zip(x,y)))
# result
[((0, 0), (1, 1), (2, 2), (3, 3), (4, 4)),
 ((4, 4), (3, 5), (2, 6)),
 ((2, 6), (3, 7)),
 ((3, 7), (-2, 8), (-4, 9), (-7, 10)),
 ((-7, 10), (2, 11)),
 ((2, 11), (2, 12))] 
```

虽然我不确定生成的格式是否适合您。

以下是如何将它们分开：

```
from operator import itemgetter

result = list(groups(zip(x,y)))
x = [map(itemgetter(0), points) for points in result]
y = [map(itemgetter(1), points) for points in result]
print x
# [[0, 1, 2, 3, 4], [4, 3, 2], [2, 3], [3, -2, -4, -7], [-7, 2], [2, 2]]
print y
# [[0, 1, 2, 3, 4], [4, 5, 6], [6, 7], [7, 8, 9, 10], [10, 11], [11, 12]] 
```

或者按照@jamylak 的建议：

```
x,y = zip(*[zip(*points) for points in result]) 
```

为了说明@jamylak 所说的内容，关于对`groups()`方法的修改如何允许 N 维点或数据集：

```
z = ['foo',1,2,'bar',4,5,6,'foo',8,9,10,'bar',12]
print list(groups(zip(x,y,z)))
# result
[((0, 0, 'foo'), (1, 1, 1), (2, 2, 2), (3, 3, 'bar'), (4, 4, 4)),
 ((4, 4, 4), (3, 5, 5), (2, 6, 6)),
 ((2, 6, 6), (3, 7, 'foo')),
 ((3, 7, 'foo'), (-2, 8, 8), (-4, 9, 9), (-7, 10, 10)),
 ((-7, 10, 10), (2, 11, 'bar')),
 ((2, 11, 'bar'), (2, 12, 12))] 
```

您可以看到它可以是任意数据集，并且它总是只对每个数据集的第一个元素进行分组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:28:31.307

以下是您想要的：

```
x = [(0, 1, 2, 3, 4), (4, 3, 2), (2, 3), (3, -2, -4, -7), (-7, 2), (2, 2)]
y = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]

s = map(len, x)
s = [0] + [sum(s[:i])-i for i in range(1, len(s))] + [len(y)]
y = [tuple(y[a:b+1]) for a, b in zip(s, s[1:])] 
```

结果：

```
>>> y
[(0, 1, 2, 3, 4), (4, 5, 6), (6, 7), (7, 8, 9, 10), (10, 11), (11, 12)] 
```

`y`这基本上构建了一个将被拆分的位置列表。我们使用 中的每个元组的长度来计算`x`这一点，但它有点棘手，因为集合的最后一个元素包含在下一个集合中作为下一个元素。

这是可能有助于阐明其工作原理的中间值之一：

```
>>> zip(s, s[1:])
[(0, 4), (4, 6), (6, 7), (7, 10), (10, 11), (11, 13)] 
```

我们使用它来构造新的`y`，如下所示：

```
[(0, 4), (4,  6), (6,  7), (7, 10), (10, 11), (11, 13)]
   \ |     \   \    \_  \
   | |      \  |      \  |
[y[0:4+1], y[4:6+1], y[6:7+1], ...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:27:54.297

有点难看，但它有效：

```
se = []
y2 = [y[0]]
i = 1
for xrun in x:
    first = True
    for xv in xrun:
        if first:
            first = False
            continue
        y2.insert( len(y2), y[i] )
        i += 1
    se.insert( len(se), tuple(y2) )
    y2 = [y[i-1]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T22:31:37.197

这个使用 numpy 怎么样，它同时解决了你的第一个问题。

```
将 numpy 导入为 np

x=(0, 1, 2, 3, 4, 3, 2, 3, -2, -4, -7, 2, 2)
y=范围(13)

#一阶微分，求斜率
dx = list((np.diff(x)>0)*1)

#一阶差分丢失了第一个值，但我们总是想保留它
#只需决定它是低于还是高于第二个值

d0=((x[0]-x[1])>0)*1

#将一阶微分添加到二阶微分（峰值）
ddx = [d0,]+list(np.abs(np.diff(dx)))

p=0
rx=[]
ry=[]

对于 enumerate(ddx) 中的 n,v：
    如果 v==1：
        rx.append(元组(x[p:n+1]))
        ry.append(元组(y[p:n+1]))
        p=n

打印接收
打印

```

# c# - 排除通用约束中的类型（可能吗？）

> ID：10642751
> 
> 赞同：14
> 
> 时间：2012-05-17T20:06:41.933
> 
> 标签：c#, .net, generics, constraints

是否可以从可用于泛型参数的可能类型集中排除特定类型？如果有怎么办。

例如

```
Foo<T>() : where T != bool 
```

表示除 bool 类型之外的任何类型。

**编辑**

为什么？

以下代码是我尝试强制执行负面约束。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      var x1=Lifted.Lift("A");
      var x2=Lifted.Lift(true);
    }
    static class Lifted
    {
      // This one is to "exclude" the inferred type variant of the parameter
      [Obsolete("The type bool can not be Lifted", true)]
      static public object Lift(bool value) { throw new NotSupportedException(); }
      // This one is to "exclude" the variant where the Generic type is specified.
      [Obsolete("The type bool can not be Lifted", true)]
      static public Lifted<T> Lift<T>(bool value) { throw new NotSupportedException(); }
      static public Lifted<T> Lift<T>(T value) { return new Lifted<T>(value); }
    }

    public class Lifted<T>
    {
      internal readonly T _Value;
      public T Value { get { return this._Value; } }
      public Lifted(T Value) { _Value = Value; }
    }
  }
} 
```

正如您所看到的，它涉及对正确的重载解决方案的一些信心，以及一些@jonskeet -esque 邪恶代码。

注释掉处理推断类型示例的部分，它不起作用。

拥有排除的通用约束会好得多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T20:10:33.227

不，您不能使用类型约束进行一次性排除。您可以在运行时执行此操作：

```
public void Foo<T>()
{
     if (typeof(T) == typeof(bool))
     {
         //throw exception or handle appropriately.
     }
} 
```

# php - 如何将变量从一个表单拉到同一网页上的另一个表单

> ID：10642755
> 
> 赞同：0
> 
> 时间：2012-05-17T20:06:49.863
> 
> 标签：php

我有一个 php 网页，上面有 2 个单独的表单，它们都在页面底部显示结果。第一个表单使用一个下拉菜单（标题为 Quickshow），其中有 6 个选项，在选择时过滤结果，顶部选项是打开页面时的默认选项。第二种形式有 6 个下拉菜单，每个都有多个选项，一旦单击“过滤结果”按钮，就会过滤结果。

我的问题是，当使用第二种形式时，它使用第一种形式的默认选择，而不是使用第一种形式的选择。我了解将第一个选项设为默认值的代码，并且还允许它针对第一个表单进行更改，但是我如何保留（调用？）第二个表单的可选选项？下面是用于两种形式的代码。第一部分是网页 (.php) 页面部分，第二部分是在被拉到网页的模板 (.tpl) 页面上。我没有写页面，但正在尝试修复它的过滤器。

**.php 页面** 函数 enumRequests() {

```
$getQuickShow = 1;

if (!$_REQUEST['feature_quickshow'] == '') {
        $getQuickShow = (int)$_REQUEST['feature_quickshow'];
}

$quickShow = eval(quickShow($getQuickShow));
$whereArray[] = (string)$quickShow;

if ($_REQUEST['resultsFiltered']) {
    $quickShow = eval(quickShow($getQuickShow));
    //$whereArray[] = (string)$quickShow;
    foreach ($_REQUEST AS $key => $val) {
        if ($val) {
            $val = mysql_real_escape_string($val);
            if (strpos($key, 'fld_') === 0) {
                $newKey = str_replace('fld_','',$key);
                $whereFragment = "{$newKey} = '{$val}'";
                $whereArray[] = (string)$whereFragment;
            }
        }
    }
} 
```

}

**.tpl 页面**

快速显示：
[@quickshow]

提前感谢我收到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:11:48.867

你可以随时参考`document.forms[1].mytxt.value = document.forms[0].utxt.value`

# ios - 计算位置的度数

> ID：10642759
> 
> 赞同：1
> 
> 时间：2012-05-17T20:07:06.213
> 
> 标签：ios, math, gps, core-location, direction

我正在构建一个应该向某个位置显示箭头的应用程序。例如，如果我在位置 X 并且目标设置为位置 Y，它应该显示一个直接指向该位置的箭头。

在搜索和搜索之后，我发现有一些花哨的计算公式，但是我似乎一遍又一遍地弄错了。

这是我的问题。虽然它似乎找到了正确的初始位置，但只要我转动我的设备，“箭头”就会转向相反的方向或它应该转向的方向。所以，如果我顺时针转动我的设备，箭头也会顺时针转动……反之亦然。

这是我的一些代码：

```
@implementation CompassViewController

BOOL firstPositionFound = NO;
float lastPosition = 0;
float currentHeading = 0;

[...]

#pragma mark - 
#pragma mark Core Location Methods

- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    if (newHeading.headingAccuracy > 0) {
        CLLocationDirection theHeading = newHeading.magneticHeading;

        currentHeading = theHeading;

        [self fixPointer:theHeading];
    }
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    self.currentLocation = newLocation;

    [self fixPointer:currentHeading];
}

- (void)fixPointer:(float)heading
{
    float degree = [self calculateDegree:self.currentLocation];

    degree = heading - degree;

    NSLog(@"heading: %f, Degree: %f", heading, degree);

    NSLog(@"Degree 2: %f", degree);

    self.arrowView.transform = CGAffineTransformMakeRotation(degreesToRadians(degree));
}

#pragma mark -
#pragma mark Delegate methods

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark Other methods

- (float)calculateDegree:(CLLocation *)newLocation
{
    CLLocationCoordinate2D from = newLocation.coordinate;
    CLLocationCoordinate2D to;
    to.latitude = APP_DESTINATION_LAT;
    to.longitude = APP_DESTINATION_LON;

    float res = atan2(sin((to.longitude*M_PI/180)-(from.longitude*M_PI/180))*cos(to.latitude*M_PI/180),
                      cos(from.latitude*M_PI/180)*sin(to.latitude*M_PI/180)-sin(from.latitude*M_PI/180)*cos(to.latitude*M_PI/180)*cos((to.longitude*M_PI/180)-(from.longitude*M_PI/180)));

    res = res/M_PI*180;

    if (res < 0)
        res = 360.0f + res;

    return res;
}

#pragma mark - 
```

我只是迷路了，有人可以指出我哪里出错了吗？我想它是一些简单的事情，我目前正在盲目地看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:40:16.880

看看这个 Stack Overflow 问题的答案：

[CLLocation 类别，用于计算带半正弦函数的轴承](https://stackoverflow.com/questions/3925942/cllocation-category-for-calculating-bearing-w-haversine-function)

具体来说，这部分：

**如果您得到负方位角，请将 2*M_PI 添加到弧度轴承的最终结果中（如果您在转换为度数后执行此操作，则添加 360）。atan2 返回 -M_PI 到 M_PI（-180 到 180 度）范围内的结果，因此您可能希望使用类似于以下代码的内容将其转换为罗盘方位**

```
if(radiansBearing < 0.0)
    radiansBearing += 2*M_PI;** 
```

此外，航向信息需要针对设备方向和角度进行调整，除非您始终以纵向方式握住设备。将您的设备慢慢转到横向模式，您将看到您的航向值变化 90°。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:20:29.703

看看这个 [维基百科 - 关于旋转矩阵](http://en.wikipedia.org/wiki/Coordinate_rotation#Matrix_algebra)

据我了解，您可以从代码中获得 sin 元素和给定 (x,y) 坐标的 cos 元素之间的角度。[基本上由 (tan(x,0)/(0,y)) 给出]

让我们称这个角度为θ。

你应该做的是把这个坐标乘以

![抄送维基百科](../Images/0c4f1b582a5aa95c3fd5257b34574249.png)

让我们调用新坐标 (x',y')

![X'](../Images/de4696a890ea72188018496c72c3fce2.png)

![你'](../Images/7087263e3d98f36fa63be3c436cceb87.png)

希望这可以帮助。

# java - Java JTree：清除选择状态（重置引用）

> ID：10642764
> 
> 赞同：0
> 
> 时间：2012-05-17T20:07:21.097
> 
> 标签：java, swing, garbage-collection, jtree

在我的 java 应用程序中，当我关闭一个打开的模型时，一些对象没有被垃圾收集。我正在使用 Eclipse MAT 来检测到 GC 根目录的路径，并确保在模型关闭后将引用设置为 null，以便 GC 可以清理内存。

我无法清除以下参考资料（Eclipse MAT 输出的摘录）。

```
myTree javax.swing.JTree
    uiTreeExpansionListener, keyListener, focusListener javax.swing.plaf.basic.BasicTreeUI$
          HandlerpressedPath javax.swing.tree.TreePath
             lastPathComponent myClass

```

如果**myTree** (JTree) 没有重置/清除侦听器中的值，则在**lastPathComponent中维护对****myClass**对象的引用，并且它不会被垃圾收集。

关于如何告诉树不维护引用的任何想法？

编辑：我已经使用以下方法来清除引用，但它并没有清除所有（上面提到的）引用。

```
    公共无效清除（）{
        取消编辑（）；
        全部收缩（）;
        清空选项（）;
        clearToggledPaths();
        重置键盘操作（）；
        fireTreeCollapsed(null);
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:03:17.327

我找到了一种解决方法（不是一个干净而优雅的解决方案），至少可以解决我的问题。下面的代码完成了释放所有（已知）引用的工作。

```
公共无效清除（）{
   取消编辑（）；
   清空选项（）;
   clearToggledPaths();
   重置键盘操作（）；
   更新UI();
}

```

由于我需要在关闭模型时执行上述方法，因此性能可能不会受到太大影响。但如果可能的话，我更喜欢更优雅（并且在概念上正确）的解决方案。

# javascript - 使用javascript重复（组合）的变化代码？

> ID：10642765
> 
> 赞同：0
> 
> 时间：2012-05-17T20:07:24.420
> 
> 标签：javascript, combinatorics, variations

有没有人有 Javascript 代码来生成所有重复的变体？

重复变化的例子：

```
(size=3, input=A,B)
AAA, AAB, ABA, BAA, ABB, BAB, BBA, BBB 
```

我需要对 0-9 作为输入的数字和 6 位长度作为大小的数字执行类似的操作（根据我的示例）。

只是要知道，我使用 Java 中的代码以及基于此项目的 .NET 中的代码（检查链接）。我需要的所有重复变化都会产生 1000000 个值。

[http://www.codeproject.com/KB/recipes/Combinatorics.aspx](http://www.codeproject.com/KB/recipes/Combinatorics.aspx)

是否可以在 Javascript 中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:27:12.690

你从组合学中选择了最简单的情况......

```
var i, n = 1000000;
for (i = 0; i < n; i++)
  console.log(('' + (i + n)).substring(1)); 
```

将在 6 个点 (1000000 === `Math.pow(10, 6)`) 中为您提供 0-9 的所有组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:25:18.733

我刚刚写了它，它需要更多的测试和优化，但这应该让你开始：

```
​var input = "ABCD";
var size = 3;
var results = [];

function solve(i, elt) {
    if(elt.length == size) { 
       results.push(elt);
       return;        
    }
    for(var j = 0; j < input.length; j++) {
       solve(j, elt+input[j]);
    }        
}​​​​​​

solve(0, "");
​console​.log(results);​ 
```

# c# - 实体框架：现有数据库 -> 数据模型 -> 新数据库

> ID：10642770
> 
> 赞同：0
> 
> 时间：2012-05-17T20:08:11.157
> 
> 标签：c#, database, asp.net-mvc-3, entity-framework

我创建了一个新的 MVC3 项目并使用 ADO.NET 实体数据模型来映射我现有的数据库。效果很好。

现在，这是我在开发 Web 应用程序时不想影响的数据库，所以我现在希望将该数据模型附加到本地数据库（尚未选择一个，欢迎提出建议。我在想 SQL服务器 CE 或 MySQL）。

有人对如何做到这一点有任何想法吗？我很乐意将现有的连接字符串保留到我的实时数据库以及这个开发数据库环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:05:56.263

您可以使用您想要的任何技术生成另一个匹配的数据库（尽管最好让它们与您的生产数据库相似），然后进行 Web.Debug 和 Web.Release 设置。

如果您考虑换出配置，web.config 文件的连接字符串部分，您可以轻松地从开发切换到生产。

[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

这为您的 Web.config 文件中的转换语句提供了相关信息，但是从它的声音中，您可以简单地交换 web.config 的连接部分并获得您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:06:50.623

现有数据库是在您的机器上，还是在某处的服务器上？

如果它在您的机器上，只需将其备份并将其恢复到不同的数据库；即，如果您的数据库名为 XYZ，请将其备份并恢复到名为 XYZ-Testing 的数据库中。然后，您可以连接并使用 XYZ 测试而不影响 XYZ。

如果现有数据库在某处的服务器上，最简单的解决方案是在您的机器上安装 SQL Express，然后在服务器上备份数据库并在您的机器上恢复它。

这样做会使您的生活比尝试使用不同的数据库类型（SQL CE 或 MySQL）容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:40:56.503

另一种选择是使用[免费下载](http://msdn.microsoft.com/en-us/data/gg427686)的 SQL Server Data Tools (SSDT)，添加到 VS 或独立（如果没有 VS），然后创建[本地数据库项目](http://msdn.microsoft.com/en-us/library/hh272703%28v=vs.103%29.aspx)进行开发。我也写了[一篇](http://lynnlangit.wordpress.com/2011/11/21/sql-server-2012sql-server-data-tools/)关于使用 SSDT 的博客文章。

# ruby-on-rails-3 - 多次fork会影响性能吗？

> ID：10642773
> 
> 赞同：3
> 
> 时间：2012-05-17T20:08:23.997
> 
> 标签：ruby-on-rails-3, postgresql, amazon-ec2

我需要使用 fastercsv 读取日志文件（.CSV）并将其内容保存在数据库中（每个单元格值都是一条记录）。问题是每天需要读取大约 20-25 个日志文件，而且这些日志文件非常大（每个 CSV 文件超过 7Mb）。我已经分叉了阅读过程，因此用户不必等待很长时间，但仍然阅读 20-25 个该大小的文件需要时间（超过 2 小时）。现在我想分叉读取每个文件，即将创建大约 20-25 个子进程，我的问题是我可以这样做吗？如果是，它会影响性能吗？fastcsv 是否能够处理这个问题？前任：

```
for report in @reports
  pid = fork {
   .
   .
   .
   }
  Process.dispatch(pid)
end 
```

PS：我正在使用 rails 3.0.7，它将发生在运行在亚马逊大型实例中的服务器上（7.5 GB 内存，4 个 EC2 计算单元（2 个虚拟内核，每个内核有 2 个 EC2 计算单元），850 GB 本地实例存储，64 位平台）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:21:47.537

If the storage is all local (and I'm not sure you can *really* say that if you're in the cloud), then forking isn't likely to provide a speedup because the slowest part of the operation is going to be disc I/O (unless you're doing serious computation on your data). Hitting the disc via several processes isn't going to speed that up at once, though I suppose if the disc had a big cache it might help a bit.

Also, 7MB of CSV data isn't really that much - you might get a better speedup if you found a quicker way to insert the data. Some databases provide a bulk load function, where you can load in formatted data directly, or you could turn each row into an INSERT and file that straight into the database. I don't know how you're doing it at the moment so these are just guesses.

Of course, having said all that, the only way to be sure is to try it!

# list - 在haskell中列出递归

> ID：10642776
> 
> 赞同：1
> 
> 时间：2012-05-17T20:08:35.837
> 
> 标签：list, haskell

我有一个清单。我需要创建一个新列表，如下例所示： `[3, 3, 1, 3]`to `[3, 3, 3, 1, 1, 3, 3]`. 谁能告诉我的代码有什么问题？

```
add xs
   = let
      adding (x : xs) as
         =
            if x == head(xs) && length(xs) >= 1
               then adding xs (x : as)
               else adding xs (x : x : as)
      adding _ as
         = as
   in
   adding xs [] 
```

ghci 告诉总是有空列表是`xs`，但我有`xs length`控制权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:35:39.777

我不确定您最终要做什么，但我可以帮助您避免“空列表”问题。

当列表`(x:xs)`中只剩下一项时，`xs == []`. （例如，如果`(x:xs)`仅包含项目`1`，则`x == 1`，和`xs == []`）。在这种情况下，由于未为空列表定义而`head xs`导致异常。`head`

换行试试

```
if x == head(xs) && length(xs) >= 1 
```

到

```
if length(xs) >= 1 && x == head(xs) 
```

在此更改之后，当`xs == []`,`length(xs) >= 1`评估为`False`。因为`False && p == False`对于 all `p`，Haskell 跳过了对另一个表达式 ( `x == head(xs)`) 的求值，并且避免了异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:41:59.143

试试这个：

```
import Data.List
add xs = concat $ map (\(x:xs) -> x:x:xs) $ group xs 
```

# php - PHP：如何在不扫描整个目录的情况下从目录中获取单个文件？

> ID：10642777
> 
> 赞同：15
> 
> 时间：2012-05-17T20:08:37.877
> 
> 标签：php, file, directory

我有一个包含 130 万个文件的目录，我需要将这些文件移入数据库。我只需要从目录中获取一个文件名而不扫描整个目录。我抓取哪个文件并不重要，因为我会在完成后删除它，然后继续下一个。这可能吗？我能找到的所有示例似乎都将整个目录列表扫描到一个数组中。我只需要一次抓一个来处理……而不是每次130万。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T20:14:04.117

这应该这样做：

```
<?php
$h = opendir('./'); //Open the current directory
while (false !== ($entry = readdir($h))) {
    if($entry != '.' && $entry != '..') { //Skips over . and ..
        echo $entry; //Do whatever you need to do with the file
        break; //Exit the loop so no more files are read
    }
}
?> 
```

***[读目录](http://www.php.net/manual/en/function.readdir.php)***

> 返回目录中下一个条目的名称。这些条目按照文件系统存储它们的顺序返回。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T11:39:00.663

只需获取目录迭代器并查找作为文件的第一个条目：

```
foreach(new DirectoryIterator('.') as $file)
{
    if ($file->isFile()) {
        echo $file, "\n";
        break;
    }        
} 
```

这也确保您的代码在某些其他文件系统行为上执行，而不是您期望的行为。

见[`DirectoryIterator`](http://php.net/DirectoryIterator)和[`SplFileInfo`](http://php.net/SplFileInfo)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T20:11:39.750

[readdir](http://php.net/manual/en/function.readdir.php)可以解决问题。检查该页面上的示例，但不要在循环中执行 readdir 调用，只需执行一次。您将获得目录中的第一个文件。

注意：您可能会收到“.”、“..”和其他类似的响应，具体取决于服务器，因此您可能希望至少循环直到获得有效文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T19:49:33.880

你想返回第一个目录还是第一个文件？两个都？用这个：

使用 2 个参数（地址和模式目录或文件？）创建函数“pickfirst”

```
function pickfirst($address,$file) { // $file=false >> pick first dir , $file=true >> pick first file
$h = opendir($address);

     while (false !== ($entry = readdir($h))) {

          if($entry != '.' && $entry != '..' && ( ($file==false && !is_file($address.$entry)) || ($file==true && is_file($address.$entry)) )  )
          { return $entry; break; } 

} // end while
} // end function 
```

如果你想在你的地址中选择第一个目录设置`$file`为false，如果你想在你的地址中选择第一个文件设置`$file`为true。

祝你好运 ：）

# validation - Struts 1 验证字段 x OR y 必填

> ID：10642787
> 
> 赞同：0
> 
> 时间：2012-05-17T20:09:28.913
> 
> 标签：validation, struts-1

对于 Struts 1 验证 XML 文件，是否可以说字段 x 或字段 y 是必需的？

这是我在 xml 文件中的语法：

```
<form name="/save">
    <field property="email" depends="required">
            <arg0 key="Email" resource="false"/>
        </field>
    <field property="phone" depends="required">
        <arg0 key="Phone" resource="false"/>
    </field>
</form> 
```

上面的代码段需要填写电子邮件和电话。我想要求电子邮件或电话。

这在 Struts 1 验证器中是否可行？我知道我可以在 java 代码中做到这一点，但我很好奇它是否可以在 struts 1 validation.xml 文件中完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:00:48.170

[作为一种解决方法，我根据stackoverflow 上的这篇文章中的](https://stackoverflow.com/a/951704/1108487)说明使用自定义逻辑向我的 ActionForm 添加了一个 validate 方法。

```
public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {
  ActionErrors errors = new ActionErrors();
  if ((phone==null) && (email == null)) 
      errors.add("email", new ActionError("error.phoneOrEmail"));
  return errors;
} 
```

# email - 使用支持 oauth 2 的 php lib 获取电子邮件

> ID：10642790
> 
> 赞同：0
> 
> 时间：2012-05-17T20:09:51.467
> 
> 标签：email, oauth, google-api, imap

我正在尝试通过 oauth 授权从 google 获取邮件（imap）。我已获得工作授权，但我无法检索电子邮件。据我了解，这应该是可能的。但是谷歌没有任何 api 来检索邮件（？）。但是，我发现了以下内容：

[https://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

说的是：

> 为方便起见，通常使用现有的 IMAP 和 SMTP 库来使用 IMAP 访问邮件和使用 SMTP 发送邮件。只要这些库支持简单身份验证和安全层 (SASL)，它们就应该与 Gmail 支持的 OAuth 机制兼容。除了使用支持 IMAP 和 SMTP 的库之外，开发人员还希望使用众多现有库之一来处理 OAuth

有谁知道我可以使用的现有库并且也有一些文档。我正在使用 google-api-php-client。

编码

```
session_start();
ini_set('display_errors',1); 
error_reporting(-1);
require_once '../../src/apiClient.php';

$client = new apiClient();
$client->setApplicationName('Mailendar');
$client->setScopes("http://www.google.com/m8/feeds/");
// Documentation: http://code.google.com/apis/gdata/docs/2.0/basics.html
// Visit https://code.google.com/apis/console?api=contacts to generate your
// oauth2_client_id, oauth2_client_secret, and register your oauth2_redirect_uri.
 $client->setClientId('secret');
 $client->setClientSecret('secret');
 $client->setRedirectUri('secret');
 $client->setDeveloperKey('secret');

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
  echo "token is set";
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {

  unset($_SESSION['token']);
  $client->revokeToken();
}

if ($client->getAccessToken()) {

 MAGIC HAPPENS HERE!!!...but is unkown for me ofc

  // The access token may have been updated lazily.
  $_SESSION['token'] = $client->getAccessToken();
} else {
  $auth = $client->createAuthUrl();
}

if (isset($auth)) {
    print "<a class=login href='$auth'>Connect Me!</a>";
  } else {
    print "<a class=logout href='?logout'>Logout</a>";

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:54:36.790

Google 目前不允许您使用 oauth 2.0 检索邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T13:49:27.543

现在您可以使用 OAuth 获取邮件。
实现了一个简单的库。删除邮件功能尚未添加。但是你可以看看它是否满足你的需要。
试试例子。[https://github.com/vmuthal/VivOAuthIMAP](https://github.com/vmuthal/VivOAuthIMAP)

# applescript - 使用 applescript 在服务器上创建新文件夹

> ID：10642794
> 
> 赞同：2
> 
> 时间：2012-05-17T20:10:05.587
> 
> 标签：applescript

我正在尝试在服务器上创建一个新文件夹，其名称取自用户。这是我到目前为止所拥有的

```
display dialog "Please enter your augnet username" default answer "username"
set username to (text returned of result)

mount volume "smb://orgs.augsburg.edu"

tell application "Finder"
    make new folder at "orgs.augsburg.edu/Information Technology/www/kb_images/Migration Testing" with properties {name:username}
end tell 
```

我收到一条错误消息，说“无法制作类型项目”，非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:58:17.107

你有一个错误，因为：

1 - 此路径的类型为“posix path”，**Finder**无法识别此类型，斜杠应替换为冒号

2-当您在 Finder 中使用字符串（路径）时，您必须指定类（**文件夹、文件、磁盘**...）

```
display dialog "Please enter your augnet username" default answer "username"
set username to (text returned of result)

mount volume "smb://orgs.augsburg.edu"
tell application "Finder"
    make new folder at folder "orgs.augsburg.edu:Information Technology:www:kb_images:Migration Testing:" with properties {name:username}
end tell 
```

# javascript - 结合内联css和悬停状态，有可能吗？

> ID：10642795
> 
> 赞同：3
> 
> 时间：2012-05-17T20:10:07.460
> 
> 标签：javascript, css, hover

我发现如果我们编写内联 css（或使用 JavaScript 添加它），那么我们就会失去 css hover 的价值。有可能改变这种行为吗？

**简单的例子**

* * *

```
<div id="test" style="color: red">test</div>
<style>
#test:hover {
    color:blue;
}
</style> 
```

在这种情况下，悬停不起作用。

**更新**

我不能使用`!important`，因为之后我将无法通过 JavaScript 更改该属性。

我也动态生成样式，所以我不能通过 JavaScript 添加特定的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:12:05.880

因为内联 css 会覆盖文件中的 css 样式，如果你有

```
color: blue !important 
```

它会起作用但不推荐，尽管哈哈，你总是可以使用 jquery 来删除内联样式标签

更新：

使用 jquery 或使用 javascript 时删除样式标签...添加 !important 以便内联 css 很重要

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:12:15.463

> 我不能使用！important，因为之后我将无法通过 javascript 更改该属性。

您仍然可以使用`!important`，只需使用 JavaScript 添加一个类并随时删除它。

## [演示](http://jsfiddle.net/Thvq4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T20:30:08.970

最简单的方法如下

```
$(selector).hover(function() {
                $st = $(this).attr("style");
                $(this).attr("style","");
            },function() {
                $(this).attr("style",$st);
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:15:07.193

在 CSS 中，该`style`属性将覆盖任何`style`元素或`stylesheets`. 如果您无法更改该`style`属性，则必须使用`!important`. 如果您可以`style`完全删除该属性并将所有内容放在`style`元素中。甚至更好的是，`stylesheet`您的问题将单独解决。

PS 该`type`属性是`style`元素所必需的。这不会解决您的问题，但您应该更改`<style>`为`<style type="text/css">`

# ios - 如何让 Core Plot 显示每个时间点的 x 轴标签？

> ID：10642797
> 
> 赞同：0
> 
> 时间：2012-05-17T20:10:13.043
> 
> 标签：ios, xcode, core-plot

除了我试图修复 atm 的问题之外，我想知道如何使 x 轴标签在绘制点的任何地方绘制。正如您在屏幕截图中看到的那样，有三个时间点。因此，我想要三个标签，而不是标签“1/10/54”（是的，即 54 年）无处浮动，每个点下方一个。（注意 3 个点仅用于说明，需要可扩展。）

![在此处输入图像描述](../Images/a2739895be53a92634654939acb55083.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:09:15.340

如果标签之间的间距会像您的示例屏幕截图一样不规则，您需要将轴标签策略更改为`CPTAxisLabelingPolicyNone`or `CPTAxisLabelingPolicyLocationsProvided`。这两项政策都要求您提供打勾位置。第一个策略还要求您制作不必与刻度线位于相同位置的自定义标签，而第二个策略将使用标准标签格式化程序自动在每个刻度线位置制作标签。

# c# - 以另一种形式从控件更改图像

> ID：10642799
> 
> 赞同：1
> 
> 时间：2012-05-17T20:10:30.140
> 
> 标签：c#

我有一个主要形式，我的大部分交互都发生在它上面。我还有另一种形式，其中只有一个图片框。当我单击 form1 上的按钮时，我想显示我已经可以做的第二个表单。但是，我在将图像从 form1 设置为 form2 中的图片框时遇到问题。这是我的代码

```
public Image picboximage {

        get { return pictureBox23.Image; }
        set { picboximage = value; }
    }

//in form 1

    Form2 otherform = new Form2();

    therform.picboximage = Image.FromStream(lxFS); 
```

然而，这给了我一个stackoverflow异常

```
set { picboximage = value; } 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:17:21.423

在“picboximage”属性的“set”中，您设置了错误的属性。实际上，您正在一遍又一遍地调用“set”，直到调用堆栈溢出（这就是为什么您会遇到异常）。

试试这个：

```
public Image picboximage 
{
    get { return pictureBox23.Image; }
    set { pictureBox23.Image = value; }
} 
```

# javascript - Javascript Facebook SDK 语法

> ID：10642807
> 
> 赞同：1
> 
> 时间：2012-05-17T20:10:53.357
> 
> 标签：javascript, facebook-javascript-sdk

我正在使用 Facebook javascript SDK 来允许我网页的用户更新他们的状态。我在我的登录代码中收到“未捕获的语法错误：意外的令牌”以获得我的权限：

```
FB.login(function(response) 
{
    if (response.authResponse) 
    {
        alert('Logged in and accepted permissions!');
    }
}, {scope:'publish_stream', 'offline_access', 'manage_pages'}); 
```

任何想法为什么会这样？我很确定语法是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:19:20.267

您以错误的方式编写权限，

用这个，

```
FB.login(function(response) 
{
    if (response.authResponse) 
    {
        alert('Logged in and accepted permissions!');
    }
}, {scope:'publish_stream, offline_access,manage_pages'}); 
```

**参考：http:** [//developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:12:38.050

这不是一个有效的 JS 字典文字：

`{scope:'publish_stream', 'offline_access', 'manage_pages'}`

如果您希望这三个项目作为 key 下的列表`scope`，请将它们括在`[]`：

`{scope: ['publish_stream', 'offline_access', 'manage_pages']}`

# ios - 如何修复编译 Mach-O 链接器错误

> ID：10642808
> 
> 赞同：0
> 
> 时间：2012-05-17T20:10:58.313
> 
> 标签：ios, xcode, compiler-errors

我正在尝试将此 iOS 库[PTImageAlbumViewController](https://github.com/exalted/PTImageAlbumViewController)添加到我正在处理的现有项目中，但出现编译错误。包含一个示例项目，它依赖于其他几个库。示例项目工作得很好，但我无法将它迁移到我自己的项目中而不会出现错误。我尝试通过将文件从项目拖到项目直接从项目中提取文件，但它仍然无法正常工作

有什么我想念的吗？

> 对于建筑的ARMv7未定义的符号： “_OBJC_METACLASS _ $ _ NetworkPhotoAlbumViewController”，从引用：_OBJC_METACLASS _ $ _ PTImageAlbumViewController在PTImageAlbumViewController.o “_OBJC_CLASS _ $ _ NIPhotoAlbumScrollView”，从引用：_OBJC_CLASS _ $ _ PTImageAlbumView在PTImageAlbumView.o “_OBJC_CLASS _ $ _ NetworkPhotoAlbumViewController”，从引用：_OBJC_CLASS _ $ _ PTImageAlbumViewController在 PTImageAlbumViewController.o "_NIPathForBundleResource" 中，引用自：-[PTImageAlbumViewController viewDidLoad] in PTImageAlbumViewController.o "_OBJC_METACLASS_$_NIPhotoAlbumScrollView"，引用自：_OBJC_METACLASS_$_PTImageAlbumView in PTImageAlbumView.o ld：未找到架构 armv7 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:24:57.970

它找不到的是 nimbus 文件。

如果您已将 nimbus 和 SDURLCache 文件添加到项目中，那么只需确保它们包含在应用程序的目标中即可。

确保所有文件都进入您的项目并且位于正确的目标中。例如，第一个错误与 NetworkPhotoAlbumViewController.m 有关。该文件是否在您的项目和正确的目标中？

如果是这样，另一种可能性是，出于某种原因，它根本不是为这种架构构建的。您可以通过将树从 DerivedData 目录导航到目标文件的存储位置并使用 nm 在目标文件中搜索丢失的符号来查找。

我的机器上的示例：

```
cd /Users/username/Library/Developer/Xcode/DerivedData/AlbumDemo-eyqszubjyqhczreurkblqktoxjja/Build/Intermediates/AlbumDemo.build/Debug-iphonesimulator/AlbumDemo.build/Objects-normal/i386

nm NetworkPhotoAlbumViewController.o | grep _NetworkPhotoAlbumViewController
00000000 t -[NetworkPhotoAlbumViewController shutdown_NetworkPhotoAlbumViewController]
0000e0fc s -[NetworkPhotoAlbumViewController shutdown_NetworkPhotoAlbumViewController].eh
0000cde8 S _OBJC_CLASS_$_NetworkPhotoAlbumViewController
0000c9b4 S _OBJC_IVAR_$_NetworkPhotoAlbumViewController._activeRequests
0000c9bc S _OBJC_IVAR_$_NetworkPhotoAlbumViewController._highQualityImageCache
0000c9b0 S _OBJC_IVAR_$_NetworkPhotoAlbumViewController._queue
0000c9b8 S _OBJC_IVAR_$_NetworkPhotoAlbumViewController._thumbnailImageCache
0000cdfc S _OBJC_METACLASS_$_NetworkPhotoAlbumViewController
0000cfe0 s l_OBJC_$_INSTANCE_METHODS_NetworkPhotoAlbumViewController
0000d084 s l_OBJC_$_INSTANCE_VARIABLES_NetworkPhotoAlbumViewController
0000d0e0 s l_OBJC_$_PROP_LIST_NetworkPhotoAlbumViewController
0000d100 s l_OBJC_CLASS_RO_$_NetworkPhotoAlbumViewController
0000cfb8 s l_OBJC_METACLASS_RO_$_NetworkPhotoAlbumViewController 
```

这些符号在第二列中没有“U”这一事实意味着它们是在此目标文件中定义的。[您可以从nm 手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/nm.1.html)中找到所有 nm 输出的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T16:06:40.257

有时当你创建一个新的 Class 文件时，Xcode 不会将它添加到“Compiled Sources”中

选择项目图标 > 目标 > 构建阶段 > 编译源

然后单击 + 按钮添加 Class *.m 文件。

# apex-code - 我正在尝试使用视觉力来动态过滤报告，首先过滤条件通过，其他 3 不

> ID：10642810
> 
> 赞同：0
> 
> 时间：2012-05-17T20:11:23.793
> 
> 标签：apex-code

客户电路 - 相关的活动客户电路是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:32:20.720

尝试编辑您的报告设置三个过滤条件并保存。然后尝试再次传递您的标准值。我认为诀窍是让报告期待三个参数。

# html - 新队

> ID：10642815
> 
> 赞同：8
> 
> 时间：2012-05-17T20:11:43.480
> 
> 标签：html, css, newline

所以我需要帮助的是如何在`<li>`and or之后删除换行符`<ul>`

这是我的CSS：

```
 #ranks li {
    background: url(/img.png) no-repeat top left;
}
#ranks .sprite-admin{ background-position: 0 0; width: 157px; height: 44px; } 
#ranks .sprite-banned{ background-position: -207px 0; width: 157px; height: 44px; } 
```

这是html：

```
<ul id="ranks"><li class="sprite-admin"></li></ul> 
```

当只有一个存在时，这一切都很好`<ul id ="etc">`，但是如果有多个，它将​​创建一个新行并“堆叠”它们..是否可以让它们不堆叠，而从左到右？谢谢

编辑：

演示：/已删除/

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T20:14:53.460

你有几个选择：

```
#ranks li {
  float: left;
} 
```

这会将您的所有列表项浮动到左侧，不换行，直到水平屏幕空间不再可用。或者，

```
#ranks li {
  display: inline-block;
} 
```

这也将使您的元素并排放置，但将它们作为块级元素处理。如果您不关心块级样式，则可以使用直接内联显示：

```
#ranks li {
  display: inline;
} 
```

它将像任何其他内联元素（例如`<span>`or `<a>`）一样对待列表项。

列表项及其列表父项上还存在一些其他固有样式，您可能需要取消这些样式。一定要签出`margin`，和`padding`。

演示：http: [//jsbin.com/iconud/edit#html,live](http://jsbin.com/iconud/edit#html,live)

### 向前看！

当您的列表项并排放置时，您可能会发现它们之间存在难看的间隙。这是内联列表的常见问题。一种解决方案是删除关闭和打开列表项标签之间的换行符空格：

```
<ul id="ranks"><li>
  Index</li><li>
  Contact</li><li>
  Portfolio</li>
</ul> 
```

或者让它们全部内联，不太明显：

```
<ul id="ranks">
  <li>Index</li><li>Contact</li><li>Portfolio</li>
</ul> 
```

这对眼睛来说有点难。使用 HTML，由于并不总是需要结束标签，因此您也可以不使用结束标签（尽管这让我有点紧张）：

```
<ul id="ranks">
  <li>Index
  <li>Contact
  <li>Portfolio
</ul> 
```

### 多个列表也内联！

从 OP 的一些评论来看，他们似乎不仅试图将列表项内联，而且还会列出自己。如果是这种情况，请将上述相同的规则应用于列表本身：

```
#ranks,
#specs {
  margin: 0;
  padding: 0;
  display: inline-block;
}
#ranks li,
#specs li {
  display: inline-block;
  border: 1px solid #CCC;
  padding: 5px 10px;
} 
```

这里已经使用搜索 id 和标签的选择器确定了两组规则。您可以通过将一个公共类应用于列表，或将选择器基于一个公共父元素来简化这一点。接下来是标记：

```
<ul id="ranks">
  <li>Index</li>
  <li>Contact</li>
  <li>Portfolio</li>
</ul>

<ul id="specs">
  <li>Foo</li>
  <li>Bar</li>
</ul> 
```

这导致两个列表及其项目都以水平方式显示。

演示：http: [//jsbin.com/iconud/2/edit](http://jsbin.com/iconud/2/edit)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T20:14:42.777

有一些CSS

```
 <style type="text/css">
 #ranks li { display:block; float:left; }
</style> 
```

*   更新为评论：显示：块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:14:49.500

`ul li{ display:inline;}`做这个把戏？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:22:00.407

This is a basic example of horizontal UL's

HTML

```
<ul id="list">
    <li class="item">Item 1</li>
    <li class="item">Item 2</li>
    <li class="item">Item 3</li>
</ul>
<span class="clearFloats"> 
```

​​CSS

```
.item {
    float: left;
}

.clearFloats {
    clear: both;   
} 
```

​</p>

​JSFiddle Example: [http://jsfiddle.net/peterf/DEUBf/](http://jsfiddle.net/peterf/DEUBf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-01T20:19:31.527

另一种选择是在 ul 中设置 font-size: 0，然后在 li 标签中恢复所需的字体大小。我更喜欢它，因为它包含在 ul 标记中，不需要像 clear:both 这样的进一步技巧，并且更好地解释了样式的含义（隐藏不在列表项中的任何内容）。

```
ul {
    list-style-type: none;
    font-size: 0;
}
li {
    display: inline-block; /* Or inline, as you like */
    font-size: 16px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T20:14:59.170

`<li>`默认情况下，`display:block;` 如果你给它`display:inline;`或者`diplay:inline-block;`应该删除换行符

# module - 播放框架中可能的模块（1.2.4版本）

> ID：10642824
> 
> 赞同：0
> 
> 时间：2012-05-17T20:12:06.917
> 
> 标签：module, playframework, jodatime, playframework-1.x

我想知道你们中是否有人在使用 Play 框架时遇到过一个模块，该模块显示一个时间戳，例如，一个 blogpost ，形式为（再次举个例子）“昨天 11 点： 23" 等等。尽管使用了 joda time（内置在 Play Framework 中），但我实际上已经设法构建了一些朝着这个方向工作的东西。

仍然只是好奇是否存在模块......

辛格。卡勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:01:31.563

不是模块，而是 Date 对象的 JavaExtension，称为`since()`. 它的核心部分。

[http://www.playframework.org/documentation/1.2.4/javaextensions#date](http://www.playframework.org/documentation/1.2.4/javaextensions#date)

它不准确，但接近。要准确地创建这个功能应该是一个简单的 JavaExtension。

# asp.net - 对齐多个 DotNet.HighCharts

> ID：10642826
> 
> 赞同：1
> 
> 时间：2012-05-17T20:12:10.313
> 
> 标签：asp.net, asp.net-mvc-3, highcharts

DotNet.HighCharts 似乎不支持 Render 方法，这使得在同一页面中对齐多个图表变得困难。我能够在同一页面上填充多个图表，但我无法将它们彼此对齐。但是，它们将一个接一个地显示。有谁知道如何相邻显示 2 个图表？甚至是 4 个图表作为一个块？

注意：我使用的是 ASP.Net Mvc3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:19:32.357

为什么不创建一组 DIV，每个 DIV 将包含一个图表 DIV 容器。使用您决定的布局（并排或其他）。然后将每个图表发送到您想要的“主”容器？

这是一些伪代码，因为我对 MVC 不太熟悉。

在显示页面（aspx 等）中创建带有可寻址元素的表格或其他结构化容器。然后在其中一个元素（即表格单元格）中分别为每个图表添加文字标签。在代码隐藏中创建您的个人图表而不是什么系列的图表。所以像：

```
<table>
<cell1>
<asp:literal id="ltrchart1">
</cell1>
<cell2>
<asp:literal id="ltrchart2">
</cell2>
<cell3>
<asp:literal id="ltrchart3">
</cell3>
<cell4>
<asp:literal id="ltrchart4">
</cell4>
</table> 
```

然后在您的代码隐藏中执行以下操作：

```
chart1 as new highcharts("chart1").....
ltrchart1.Text = chart1.ToHtmlString()

chart2 as new highcharts("chart2").....
ltrchart2.Text = chart2.ToHtmlString()

chart3 as new highcharts("chart3").....
ltrchart3.Text = chart3.ToHtmlString()

chart4 as new highcharts("chart4").....
ltrchart4.Text = chart4.ToHtmlString() 
```

这并不漂亮，但它完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:41:27.107

这是[jsFiddle的一个例子](http://jsfiddle.net/minagabriel/TRLmv/)

如果您只是最大化结果面板，您将看到它们彼此相邻

# bundler - 不带命令运行捆绑包

> ID：10642828
> 
> 赞同：1
> 
> 时间：2012-05-17T20:12:18.767
> 
> 标签：bundler

调用时正在运行什么命令`bundle`？它只是`bundle install`在引擎盖下调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:21:24.873

Just running `bundle` calls the bundle script with it's last parameter-set. Suppose, in your project, you initially did `bundle install` and then changed your Gemfile. To update the gems, you need not repeat `bundle install` again (though, you still can), you can simply run:

```
bundle 
```

Similarly, if you initially used `bundle install --binstubs` (with binstubs flag), using `bundle` later in the project, will trigger the former command again.

Good luck. :)

# field - Add field in DataObject in PowerBuilder

> ID：10642832
> 
> 赞同：1
> 
> 时间：2012-05-17T20:12:48.113
> 
> 标签：field, powerbuilder, datawindow

I am new to PowerBuilder and I need to add a new column to a DataObject. The DataObject has several fields which retrieves data using select statement. So if I add a column in the select statement I get another field with a name `compute_0041` along with the added column field. When i try to remove the `compute_0041` field I cannot see any value in the field representing a new column. How do I remove the `compute_0041` that gets automatically added?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:12:12.190

In Datawindow if you accidentally put a `0` or `''` in one of the rows in the tab called Computed Columns then these columns may come in. Of course, you can also have a computed column yourself by specifying it there but since it seems you think you didnt do anything and it came up on its own it appears to be an accidental issue.

You can of course check for it by going to the SQL mode and checking for it there. Also, the last tab in the design view it shows the complete generated SQL where you can easily see a select column that is not chosen by you.

Hope the above will aid you to identify the issue. Please let me know if you still have the issue.

# css - CSS 列表精灵对齐

> ID：10642833
> 
> 赞同：0
> 
> 时间：2012-05-17T20:12:49.250
> 
> 标签：css, list, navigation, alignment, sprite

我不能为我的生活弄清楚这一点。我已经制作了一个列表，并正在使用它来创建一个基于图像的精灵导航器。我已经完成了所有悬停效果并显示了它，但无论我尝试什么，我都无法让它与页面中心对齐。HTML：

```
<body>
    <div id = 'logo'></div>

    <ul id="navbar">
        <li id="nav-bio"><a href="#">Bio</a></li>
        <li id="nav-music"><a href="#">Music</a></li>
        <li id="nav-video"><a href="#">Video</a></li>
        <li id="nav-press"><a href="#">Press</a></li>
        <li id="nav-shows"><a href="#">Shows</a></li>
        <li id="nav-shop"><a href="#">Shop</a></li>
    </ul>

    <div class = 'wrapper'>

    <div id = 'blog'>

    </div>

    </div>

</body> 
```

CSS：

```
 #logo{
    width: 100%;
    height: 190px;
    background:url('Loons-Title.png');
     background-position:center top ;
    background-size:contain;
    background-repeat:no-repeat;
    }

div.wrapper{
    width: 100%;
    height: 5000px;
    margin-left: 0%;
    margin-right: 10%;
    }

#navbar {
    height: 65px;
    width: 700px;
    list-style:none;
    padding: 0;
    margin:0;
    overflow: hidden;
}

#navbar li {
    float: left;
}
#navbar a {
    display: block;

    padding-top: 66px;
    text-decoration: none;
}

#nav-bio { width: 79px;
    background-image: url(Loons-menu-sprite.png);
}
#nav-bio:hover {
    width: 79px;
    background-position: 0px -66px;
}
#nav-music { width: 137px;
    background-image: url(Loons-menu-sprite.png);
    background-position: -79px 0px;}
#nav-music:hover {
    width: 137px;
    background-position: -79px -66px;
}
#nav-video {
    width: 121px;
    background-image: url(Loons-menu-sprite.png);
    background-position: -216px 0px;
 }
#nav-video:hover {
    width: 121px;
    background-position: -216px -66px;
}
#nav-press {
    width: 140px;
    background-image: url(Loons-menu-sprite.png);
    background-position: -337px 0px;
 }
 #nav-press:hover {
    width: 140px;
    background-position: -337px -66px;
}
#nav-shows {
    width: 129px;
    background-image: url(Loons-menu-sprite.png);
    background-position: -477px 0px;
}
#nav-shows:hover {
    width: 129px;
    background-position: -477px -66px;
}
#nav-shop {
    width: 94px;
    background-image: url(Loons-menu-sprite.png);
    background-position: -606px 0px;
 }
 #nav-shop:hover {
    width: 94px;
    background-position: -606px -66px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:18:32.757

```
#navbar {
    height: 65px;
    width: 700px;
    list-style:none;
    padding: 0;
    margin:0 auto; /* change */
    overflow: hidden;
} 
```

# drupal-7 - 在 Drupal 7 公开视图下拉选择器过滤器中更改默认“-Any-”

> ID：10642836
> 
> 赞同：2
> 
> 时间：2012-05-17T20:13:07.633
> 
> 标签：drupal-7, views, drupal-exposed-filter

我想更改 Drupal 7 视图用于公开下拉过滤器的默认“-Any-”的文本。

根据this thread中的答案，

[如何更改 Drupal 视图中公开过滤器的默认值 (-Any-) 的标签？](https://stackoverflow.com/questions/4668266/how-to-change-the-label-of-the-default-value-any-of-an-exposed-filter-in-dru)

我创建了一个名为 any_exposed 的模块，带有一个钩子形式 alter：

```
function any_exposed_form_alter(&$form, &$form_state, $form_id) {
  if ($form['#id'] == 'views-exposed-form-vendors-page') {
$form['field_vendor_type_tid']['#options']['ALL'] = t('Everything'); } } 
```

但所做的只是在下拉列表中为“Everything”添加另一个选项，它不会覆盖/翻译“-Any-”。只是为了测试我补充说：

```
$form['submit']['#value'] = t('Search'); 
```

这会将提交按钮的文本从“应用”更改为“搜索”，并且效果很好。万一你不知道，我不是一个程序员，但我想我一定错过了一些简单的东西。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:50:50.917

这是一篇旧帖子，但如果您仍在寻找或寻找任何来此寻找答案的人。'ALL' 必须是 'All'，如

```
$form['field_vendor_type_tid']['#options']['All'] = t('Everything'); 
```

由于数组有一个成员 'All' 但不是 'ALL' （这里大小写很重要），当你想覆盖 'All' 时，你正在添加一个成员 'ALL'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T17:59:00.530

使用 hook_form_views_exposed_form_alter 而不是 hook_form_alter。

```
function hook_form_views_exposed_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == 'views_exposed_form') {
      $form['tid']['#options']['All'] = t('Search');
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T23:51:54.417

```
function any_exposed_form_alter(&$form, &$form_state, $form_id) {
  if ($form['#id'] == 'views-exposed-form-vendors-page') {
$form['field_vendor_type_tid']['#options']['ALL'] = t('Everything'); } } 
```

更改`ALL`为后完美运行`All`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T20:03:15.773

我推荐使用[Better Exposed Filters](https://www.drupal.org/project/better_exposed_filters)模块，它允许您通过 Views UI 界面简单地做到这一点。

1.  安装和启用模块
2.  编辑您的视图，然后单击“公开表单 > 公开表单样式”
3.  选择“更好的暴露过滤器”
4.  点击“更多选项”
5.  更改“覆盖“任何”选项标签”的值

# python - 如何通过它的值获取键名，因为它们在 python 文件中列出？

> ID：10642839
> 
> 赞同：0
> 
> 时间：2012-05-17T20:13:25.847
> 
> 标签：python, import

我有一个名为“parameters.py”的python文件：

```
good = '100'
bad = '110'
ok = '120' 
```

我想导入这个文件，并通过它的值找到键名。

就像是：

```
import parameters
for k, v in parameters.iteritems():
    if v == '110':
        print str(k) 
```

这不是真的有效（方法没有成员iteritems ...）

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:15:55.677

您可以循环`dir(parameters)`获取密钥，或`vars(parameters).iteritems()`. 但是，您将不得不跳过一些成员：

```
>>> dir(settings)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'bad', 'good', 'ok'] 
```

对于实际使用，我建议将 wrapping`good`和存储在模块中：`bad``ok``dict``parameters`

```
# parameters.py

HAM = {  # or whatever this represents
    good: '100',
    bad: '110',
    ok: '120',
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:19:24.900

`vars(parameters)`将为您提供包含模块中所有顶级定义的键值对的字典。正如 larsmans 所说，您必须跳过一些，因为它将包括`__doc__`其他特殊变量。

# jquery - 选择后禁用一个选项

> ID：10642842
> 
> 赞同：0
> 
> 时间：2012-05-17T20:13:44.913
> 
> 标签：jquery, html

我试图将这两个代码想法绑定在一起，但它不起作用。

我想在选择后禁用第一个选项。

[这是我想要的行为](http://jsfiddle.net/rlemon/dq97z/57/)；做出选择后，第一个选项被禁用。

这[是我的代码](http://jsfiddle.net/dq97z/54/)，我希望在选择后续元素时禁用第一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:19:52.497

[更新答案]

[http://jsfiddle.net/N9JEx/2/](http://jsfiddle.net/N9JEx/2/)

```
function displayVals() {
    var singleValues = $("select option:selected").text();
    if (!isNaN(singleValues )) {
        $("#hiddenselect").val(singleValues);
        $("<p></p>").html("Percent of : &nbsp" + singleValues).appendTo('body');
    }
}

$(document).ready(function() {
    $("select").change(function() {
        displayVals();
        if (this.selectedIndex > 0) {
            var option = $('option:selected', this);
            option.prop('disabled', true);
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:31:18.017

我相信这回答了您的询问：

[http://jsfiddle.net/dq97z/66/](http://jsfiddle.net/dq97z/66/)

在里面`displayVals`我执行了以下操作：

```
if ($("#menucompare").prop("selectedIndex") !== "0") {
    // Within the select (you could be more specific) find
    // the first (direct descendant) option value and 
    // disable it to make it unselectable
    $("select > option:first").prop("disabled", "disabled")
} 
```

此段找出您的选择菜单的选定索引是什么，如果用户选择了除初始索引 (0) 以外的其他内容，它将第一个选项设置为禁用。

**更新**：http: [//jsfiddle.net/dq97z/72/](http://jsfiddle.net/dq97z/72/)

[根据文档](http://api.jquery.com/prop/)和@silkster 的建议禁用时更改`attr()`为。谢谢`prop()`

此外，如果您不希望在开始时选择该选项，您甚至可以在没有 if 语句的情况下执行此操作，如此[处所示](http://jsfiddle.net/dq97z/75/)。

```
function displayVals() {
    var singleValues = $("select option:selected").text();
    ....
    $("select > option:first").prop("disabled", "disabled")
} 
```

加载 DOM 后发生禁用（第一个*未*禁用），因此选择仍然可以选择“请选择”。哇...这是很多“选择”。

如果您想将 if 语句保留在那里（这意味着“选择一个”是可选择的，直到实际选择另一个），您的 if 语句需要是这样的：

```
if ($("#menucompare").prop("selectedIndex") !== 0) // with no quotes around zero 
```

# android - Android错误中的SQLite数据库：没有这样的列：标题

> ID：10642846
> 
> 赞同：0
> 
> 时间：2012-05-17T20:13:58.937
> 
> 标签：android, sqlite

运行我的应用程序时出现此错误：

> 01-09 17:44:29.317：E/AndroidRuntime(3697)：原因：android.database.sqlite.SQLiteException：没有这样的列：标题：，编译时：SELECT title，_id FROM Kwl

我查找了其他解决方案，但它们都是由于缺少“_id”列，我有。

这是我的活动中的相关片段：

```
final DatabaseHelper db = new DatabaseHelper(this);
Cursor c = db.getKwlNames();
startManagingCursor(c);

String[] from = new String[] { DatabaseHelper.KWL_TITLE, DatabaseHelper.KWL_ID };
int[] to = new int[] { R.id.titleLI_title, R.id.titleLI_id };
SimpleCursorAdapter sca = new SimpleCursorAdapter(this,
        R.layout.title_list_item, c, from, to);
listView.setAdapter(sca); 
```

以及来自我的 DatabaseHelper 的代码：

```
public class DatabaseHelper extends SQLiteOpenHelper {

public static final String DATABASE_NAME = "KWL_DB";
public static final String KWL_TABLE = "Kwl";
public static final String CHART_TABLE = "Chart";
public static final int DATABASE_VERSION = 1;

public static final String KWL_TITLE = "title";
public static final String KWL_ORDER = "seq";
public static final String KWL_HASE = "hase";
public static final String KWL_ID = "_id";

public static final String CHART_TYPE = "type";
public static final String CHART_ORDER = "seq";
public static final String CHART_VALUE = "val";
public static final String CHART_KWL_TITLE = "title";

static final String CREATE_KWL = "CREATE TABLE " + KWL_TABLE + " (" + KWL_ID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KWL_TITLE
        + " TEXT, " + KWL_ORDER + " INTEGER, " + KWL_HASE
        + " INTEGER)";

static final String CREATE_CHART = "CREATE TABLE " + CHART_TABLE + " (" + CHART_KWL_TITLE
        + " TEXT, " + CHART_VALUE + " TEXT, " + CHART_ORDER
        + " INTEGER, " + CHART_TYPE + " TEXT)";

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    db.execSQL(CREATE_KWL); 
    db.execSQL(CREATE_CHART);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public Cursor getKwlNames() {
    SQLiteDatabase db = this.getReadableDatabase();
    return db.rawQuery("SELECT " + KWL_TITLE + " , " + KWL_ID + " FROM " + KWL_TABLE, null);
}
} 
```

# .net - System.Timer 总是在 Threadpool 线程上有一个回调。如何使其成为具有高优先级的非线程池线程？

> ID：10642850
> 
> 赞同：1
> 
> 时间：2012-05-17T20:14:23.947
> 
> 标签：.net, timer, clr, threadpool, appdomain

如何在单独的线程池或专用线程上进行 System.Timer 回调？

**背景**

我有一个使用 System.Timer 的关键应用程序的轻量级监视器，但无法弄清楚如何使回调不在 ThreadPool 中，并以高优先级运行。

原因如下：

*   如果关键应用程序没有响应，ThreadPool 将向挂起的线程发送取消令牌、Thread.Abort 或 Win32 Abort（不运行终结器）。

*   如果应用程序受 CPU 限制，那么我的监控线程应该以最高优先级运行，以防止拒绝对我的显示器提供服务

*   线程池可能由于线程过多或[MaxThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getmaxthreads.aspx)值过低而耗尽

*   无法为线程池中的线程设置优先级（AFAIK）

因此，我认为有必要有一个 Timer 并且它在一个单独的线程上回调，尽管我不知道如何实现这一点。

如果这可以通过创建单独的 AppDomain 来实现，CLR 是否仍允许我向不同 AppDomain 中的其他线程发出命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:00:06.367

我想你可以通过`Thread.Sleep`在专用线程上使用来做到这一点。那是：

```
void MonitorProc(object state)
{
    while (!ShutdownSignaled)
    {
        Thread.Sleep(MonitorFrequency);
        // Do monitor stuff here
    }
} 
```

如果您将该线程设置为高优先级，它很可能会按预期工作。不过，这不是一个很好的解决方案。

但是，您仍然会遇到一个问题，即您的一个线程可能会崩溃，这会导致整个应用程序瘫痪——包括监视器。

您可能会考虑使监视器成为一个单独的应用程序，该应用程序以高优先级运行，并使用套接字或 WCF 或其他一些通信通道向主应用程序发送命令。这样，如果主应用程序崩溃，监视器就不会死机。您可以编写主应用程序以在启动时自动启动监视器（如果它不存在的话）。

不过，我想知道您列出的条件实际发生的可能性有多大。让我们来看看名单。

我不明白你在这里的第一点，除非是说程序可能会崩溃。在这种情况下，您应该只编写一个单独的监视器应用程序。

如果应用程序受 CPU 限制，如果所有线程都具有相同的优先级，您的监视器线程仍将获得时间片。即使其他线程处于更高的优先级，您的监视器仍然会不时地获得一个时间片。除非线程处于实时优先级。而[你不想那样做](http://blogs.msdn.com/b/oldnewthing/archive/2010/06/10/10022675.aspx)。

如果您的线程用完了，那么您的程序就存在一个根本问题——您可能应该在将其投入生产之前发现这个问题。

进行此监控的最可靠方法是使用单独的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:20:01.480

我不知道使用`System.Timer`. 但是，您可以使用 a`System.Windows.Forms.Timer`来让计时器在您以这种方式创建的特定线程中运行，从而允许您明确设置其优先级。

这是有效的，因为`Tick`a 的事件`System.Windows.Forms.Timer`总是在创建它的线程中触发，通常是 UI 线程，但是你可以让一个没有 UI 的线程运行消息循环并实现相同的效果。

看看以下是否可以接受：

```
static void Main(string[] args)
{
    var monitorContext = new System.Windows.Forms.ApplicationContext();

    var monitor = new Thread(Monitor) { Priority = ThreadPriority.Highest };

    monitor.Start(monitorContext); // Start monitor

    Thread.Sleep(5500); // ...

    monitorContext.ExitThread(); // Terminates monitor
}

public static void Monitor(object context)
{
    var timer = new System.Windows.Forms.Timer()
    {
        Enabled = true,
        Interval = 1000
    };

    timer.Tick += new EventHandler(Monitor_Tick);

    System.Windows.Forms.Application.Run(
        (System.Windows.Forms.ApplicationContext)context);
}

private static void Monitor_Tick(object sender, EventArgs e)
{
    Debug.WriteLine(
        "{0}|{1}", 
        DateTime.UtcNow.ToString(),
        Thread.CurrentThread.Priority);
} 
```

您唯一需要考虑的是，如果在前一个事件仍在处理时触发了一个滴答事件，那么它将被丢弃，因此请确保您在滴答事件中所做的事情不会超过为计时器配置的时间间隔.

# c# - 加载和更新表单数据时出错

> ID：10642851
> 
> 赞同：0
> 
> 时间：2012-05-17T20:14:24.957
> 
> 标签：c#, asp.net

我在 ASP.NET 中有一个表单，如果用户存在数据，它会加载数据，然后允许他们更新。所以在`Page_Load`我有：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!CheckAndAddRecord(_currentUser.UserID))
        {
            CreateEntryPoint(_currentUser.UserID);
        } 
        else
        {
            DataView dv = LoadApplicationData(_currentUser.UserID);
            foreach (DataRowView rowView in dv)
            {
                DataRow row = rowView.Row;

                _applicationId = row["id"].ToString();

                txtProjectNumber.Text = row["ProjectNumber"].ToString();
                  if (String.IsNullOrEmpty(chkSignedNDANo.ToString()) ||  String.IsNullOrEmpty(chkSignedNDAYes.ToString()))
                  {
                     chkSignedNDANo.Checked = Convert.ToBoolean(row["SignedNDAOnFile"]);
                     chkSignedNDAYes.Checked = Convert.ToBoolean(row["SignedNDAOnFile"]);
                  }
                  txtDateWritten.Text = row["DateWritten"].ToString();
            }
        }
    } 
```

它调用这个方法：

```
 public bool CheckAndAddRecord(int UserId)
    {
        string connStr = ConfigurationManager.ConnectionStrings["SiteSqlServer"].ConnectionString;
        SqlConnection conn = new SqlConnection(connStr);
        SqlCommand cmd = new SqlCommand("CheckUserInTemp", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@SubmittedBy", UserId));
        SqlDataAdapter dap = new System.Data.SqlClient.SqlDataAdapter(cmd);
        DataSet ds = new DataSet();

        // open conn
        if (conn.State == ConnectionState.Closed)
            conn.Open();

        // fill
        dap.Fill(ds);

        // close the conn
        if (conn.State == ConnectionState.Open)
            conn.Close();

        bool boolRecordExist = false;

        if (ds.Tables[0].DefaultView.Count == 0)
        {
            boolRecordExist = false;
        } 
        else
        {
            boolRecordExist = true;
        }

        return boolRecordExist;
    } 
```

这似乎可以正常工作并正确填充字段。但后来更新我调用了一个按钮点击，它调用了这个方法：

```
 public void UpdateRecordInTemp(int appId, string projectNumber)
    {
        string connStr = ConfigurationManager.ConnectionStrings["SiteSqlServer"].ConnectionString;
        SqlConnection conn = new SqlConnection(connStr);
        SqlCommand cmd = new SqlCommand("CPC_ProposalUpdateTemp", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@id", appId);
        cmd.Parameters.AddWithValue("@ProjectNumber", txtProjectNumber.Text);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            throw new Exception("Exception adding coupon. " + ex.Message);
        }
        finally
        {
            conn.Close();
        }
    } 
```

问题是传递的字段总是包含旧值。因此，如果进入页面时的值为“123”，我将其更改为“abc”并单击按钮，则传递“123”而不是“abc”。

抱歉发了这么长的帖子，我想了解所有细节。我对此感到困惑。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:26:58.170

在页面加载检查`IsPostBack`属性`if`。您的代码似乎在每次页面加载时都在执行。

```
if(!IsPostBack)
{
       // Do your work
} 
```

更新

`UpdateRecordInTemp(int appId, string projectNumber)`在您没有使用的代码方法中，`projectNumber`您正在使用`txtProjectNumber.Text`

# c - glibc中哪个函数调用主函数

> ID：10642852
> 
> 赞同：8
> 
> 时间：2012-05-17T20:14:28.177
> 
> 标签：c, linux, gcc, glibc

我试图了解 Linux 如何启动程序。我在某处读到 glibc 中的某些函数调用主函数。使用 callgrind 进行分析并查看 Kcachegrind 中的调用图，我看到`below main`了哪些调用 main。但我不明白这一点，一个函数不能这样命名。所以我的问题是 glibc 中的哪个函数实际上启动了 main 函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T20:24:55.643

在 valgrind 自己的帮助下，您会找到对选项*--show-below-main*的解释：

> 默认情况下，错误的堆栈跟踪不会显示出现在 main 下方的任何函数，因为大多数时候它是无趣的 C 库内容和/或 gobbledygook。或者，如果 main 不存在于堆栈跟踪中，堆栈跟踪将不会显示任何低于 main 类函数的函数，例如 glibc 的 __libc_start_main。此外，如果跟踪中存在类似 main 的函数，则将它们归一化为（低于 main），以使输出更具确定性。

因此，**在 main 下面**不是调用 main 本身的函数，而是**__libc_start_main**。

# android - Android 上 textarea 的难点

> ID：10642858
> 
> 赞同：0
> 
> 时间：2012-05-17T20:14:55.990
> 
> 标签：android, android-webview

我有一个 html/javascript/css 项目，我正在尝试制作一个 Android 应用程序。除了在 html 文件中使用标签外，一切都运行良好。我有一个带有多个 textarea 标签的 html 文件，每当我运行应用程序并尝试点击 textarea 以输入输入时，焦点仍保留在此 textarea 中，之后我无法在任何其他 textarea 中输入任何输入。

有什么帮助吗？

PS：我对Android开发不是很有经验...

这是我的java代码：

```
 package com.ai.shiftpuzzle;

    import android.app.Activity;
    import android.os.Bundle;
    import android.webkit.WebChromeClient;
    import android.webkit.WebView;

    public class ShiftPuzzleXOOMActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            WebView webView = (WebView)findViewById(R.id.webView);
            webView.getSettings().setJavaScriptEnabled(true);
            webView.setWebChromeClient(new WebChromeClient());
            webView.loadUrl("file:///android_asset/myFiles/main_menu.html");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:35:59.713

也许您的问题与 Android 网站中记录的错误有关：[http ://code.google.com/p/android/issues/detail?id=7189](http://code.google.com/p/android/issues/detail?id=7189)

显然有一个旁路，您可以尝试：

```
webview.requestFocus(View.FOCUS_DOWN);
webview.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_UP:
                if (!v.hasFocus()) {
                    v.requestFocus();
                }
                break;
         }
         return false;
    }
}); 
```

# video - FFMPEG 视频叠加与远程叠加源

> ID：10642862
> 
> 赞同：2
> 
> 时间：2012-05-17T20:15:11.603
> 
> 标签：video, ffmpeg, overlay

我正在尝试使用 ffmpeg 实现覆盖，从“远程”视频编码器获取**覆盖源。**

只是为了测试，我正在使用随机在线视频源。

正如您将在源代码下方的代码中注意到的那样，叠加层是相同的。那不是问题。

我目前使用的命令如下：

```
ffmpeg -f mjpeg -i http://81.20.148.158/anony/mjpg.cgi  -vf "movie=http://81.20.148.158/anony/mjpg.cgi [mv]; [in][mv] overlay=0:0" output.avi 
```

这是一个易于阅读的版本：

```
ffmpeg 
-f mjpeg
-i http://81.20.148.158/anony/mjpg.cgi  
-vf "movie=http://81.20.148.158/anony/mjpg.cgi [mv]; [in][mv] overlay=0:0" 
output.avi 
```

我收到此错误：

```
Missing key or no key/value separator found after key '//81.20.148.158/anony/mjpg.cgi' 
```

如果我使用**“本地”视频源**，例如

```
ffmpeg 
-f mjpeg
-i http://81.20.148.158/anony/mjpg.cgi  
-vf "movie=a.flv [mv]; [in][mv] overlay=0:0" 
output.avi 
```

我感觉双斜杠//或者更可能是 http://... 中的 : 有问题

谢谢，弗朗西斯科。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:16:26.127

你怀疑这些不寻常的角色是对的。似乎 FFmpeg 试图解析为传递给电影过滤器`//81.20.148.158/...`的键的值，因为格式过滤器用于其参数。`http``key:value`

解决方案更多引用。将您的电影过滤器行更改为：

```
-vf "movie='http://81.20.148.158/anony/mjpg.cgi' [mv]; [in][mv] overlay=0:0" 
```

那应该解决它。

# java - BufferedInputStream 到 byte[] 以通过 Socket 发送到数据库

> ID：10642864
> 
> 赞同：8
> 
> 时间：2012-05-17T20:15:19.677
> 
> 标签：java, arrays, io, bufferedinputstream, bufferedoutputstream

我一直在寻找这个问题的答案，但实际上找不到任何东西。今天早些时候，我问我如何通过字节数组将文件变成字符串，然后再返回，以便稍后检索。

人们告诉我，我必须只存储字节数组，以避免讨厌的编码问题。所以现在我已经开始努力了，但我现在碰壁了。

基本上，我之前使用无缓冲流将文件转换为字节数组。这在理论上很有效，但它会占用大量内存，最终会抛出堆大小异常。我应该改用缓冲流（或者我被告知），我现在遇到的问题是从 BufferedInputStream 到 byte[]。我尝试复制和使用本文档中的方法

[http://docs.guava-libraries.googlecode.com/git/javadoc/index.html?com/google/common/io/package-summary.html](http://docs.guava-libraries.googlecode.com/git/javadoc/index.html?com/google/common/io/package-summary.html)

我将无缓冲流交换为缓冲流。唯一的问题是，我不能直接将缓冲的输出流转换为字节数组，就像使用无缓冲的流一样。

帮助？:)

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

public final class BufferedByteStream {

    private static final int BUF_SIZE = 1024000;

    public static long copy(BufferedInputStream from, BufferedOutputStream to) throws IOException { 
        byte[] buf = new byte[BUF_SIZE];
        long total = 0;
        while(true) {
            int r = from.read(buf);
            if(r == -1) {
                break;
            }
            to.write(buf, 0, r);
            total += r;
        }
        return total;
    }

    public static byte[] toByteArray(BufferedInputStream in) throws IOException {
        BufferedOutputStream out = new BufferedOutputStream(new ByteArrayOutputStream());
        copy(in, out);
        return out. // <--- Problem is here
    }
} 
```

编辑：

我仍然收到堆空间错误。所以我现在将发布所有代码：

main.java

```
import java.io.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import jserver.io.BufferedByteStream;
/**
*
* @author Vipar
*/
public class main {
    public static void main(String[] args) {
    File f = new File("<doesn't matter>");
        try {
            byte[] buf;
            try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(f))) {
                buf = BufferedByteStream.toByteArray(bis);
                bis.close();
            }
            File f2 = new File("<doesn't matter>");
            try (FileOutputStream fos = new FileOutputStream(f2)) {
                fos.write(buf);
                fos.close();
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

BufferedByteStream.java

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

public final class BufferedByteStream {

    private static final int BUF_SIZE = 1024000;

    public static long copy(BufferedInputStream from, BufferedOutputStream to) throws IOException { 
        byte[] buf = new byte[BUF_SIZE];
        long total = 0;
        while(true) {
            int r = from.read(buf);
            if(r == -1) {
                break;
            }
            to.write(buf, 0, r);
            total += r;
        }
        return total;
    }

    public static byte[] toByteArray(BufferedInputStream in) throws IOException {
        ByteArrayOutputStream bytesOut = new ByteArrayOutputStream();
        BufferedOutputStream out = new BufferedOutputStream(bytesOut);
        copy(in, out);
        return bytesOut.toByteArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T20:19:55.367

Have a look at ByteArrayOutputStream: [Java 7 API java.io.ByteArrayOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)

```
bytesOut = new ByteArrayOutputStream();
byte[] bytes = bytesOut.toByteArray(); 
```

Update: If you insist on doing what you are doing you can just assign the intermediate ByteArrayOutputStream to a variable and get hold of the array that way:

```
ByteArrayOutputStream bytesOut = new ByteArrayOutputStream()
BufferedOutputStream out = new BufferedOutputStream(bytesOut);
copy(in, out);
return bytesOut.toByteArray(); 
```

Update 2: The real question seems to be how to copy a file without reading it all into memory first:

1) Manually:

```
 byte[] buff = new byte[64*1024]; //or some size, can try out different sizes for performance
    BufferedInputStream in = new BufferedInputStream(new FileInputStream("fromFile"));
    BufferedOutputStream out = new BufferedOutputStream(new FileoutputStream("toFile"));
    int n = 0;
    while ((n = in.read(buff)) >= 0) {
        out.write(buff, 0, n);
    }
    in.close();
    out.close(); 
```

2) Efficiently by the OS and no loop etc:

```
FileChannel from = new FileInputStream(sourceFile).getChannel();
FileChanngel to = new FileOutputStream(destFile).getChannel();
to.transferFrom(from, 0, from.size());
//or from.transferTo(0, from.size(), to);
from.close();
to.close(); 
```

3) If you have Java 7 you can simplify exception and stream closing or just copy the file with the new APIs i in java 7:

```
java.nio.file.Files.copy(...); 
```

[see java.nio.file.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T20:39:21.390

DataFetcher 将是完美的：

[http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/io/DataFetcher.java?revision=34&view=markup](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/io/DataFetcher.java?revision=34&view=markup)

如果内存不足，可以使用 clearBuffer 清除读取之间的缓冲区

您还需要 Timeout 类 - 它在同一个包中的同一个项目中。

# spring - 持久性单元未找到托管实体

> ID：10642868
> 
> 赞同：2
> 
> 时间：2012-05-17T20:15:39.763
> 
> 标签：spring, hibernate, jpa-2.0, jboss5.x

`@PersistenceContext`实体管理器找不到在容器启动期间似乎已处理的/任何实体类。

在持久性单元设置期间，容器似乎找到并注册了实体：

```
2012-05-17 15:28:21,978 INFO  [org.hibernate.cfg.annotations.Version] (main) Hibernate Annotations 3.4.0.GA
2012-05-17 15:28:21,997 INFO  [org.hibernate.annotations.common.Version] (main) Hibernate Commons Annotations 3.1.0.GA
2012-05-17 15:28:22,004 INFO  [org.hibernate.ejb.Version] (main) Hibernate EntityManager 3.4.0.GA
2012-05-17 15:28:22,039 INFO  [org.hibernate.ejb.Ejb3Configuration] (main) Processing 
PersistenceUnitInfo [
    name: dashboardPu
    ...]
2012-05-17 15:28:22,069 WARN  [org.hibernate.ejb.Ejb3Configuration] (main) Persistence provider caller does not implement the EJB3 spec correctly. PersistenceUnitInfo.getNewTempClassLoader() is null.
2012-05-17 15:28:22,146 INFO  [org.hibernate.cfg.AnnotationBinder] (main) Binding entity from annotated class: scholastic.dashboard.dto.ReportRequest
2012-05-17 15:28:22,161 INFO  [org.hibernate.cfg.annotations.QueryBinder] (main) Binding Named query: ReportRequest.getReportsByUser => from ReportRequest where userId = :userId 
```

但是，稍后使用该实体的尝试失败。通过放入调试器并查看 entitymanager>factory>persistenceUnit，我已经验证了 entitymanager 确实在使用 dashboardPu（这个耳朵中有 3 个持久性单元）。

```
2012-05-17 15:28:54,730 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-2) Opening JPA EntityManager in OpenEntityManagerInViewFilter
2012-05-17 15:28:54,731 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-1) Using EntityManagerFactory 'dashboardEntityManagerFactory' for OpenEntityManagerInViewFilter
2012-05-17 15:28:54,731 DEBUG [org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter] (http-127.0.0.1-8080-1) Opening JPA EntityManager in OpenEntityManagerInViewFilter
2012-05-17 15:28:54,775 DEBUG [scholastic.dashboard.dao.ReportRequestDao] (http-127.0.0.1-8080-2) Get reports for secretuserid
2012-05-17 15:28:54,797 WARN  [org.hibernate.hql.QuerySplitter] (http-127.0.0.1-8080-2) no persistent classes found for query class: from scholastic.dashboard.dto.ReportRequest where user_id = secretuserid 
```

我首先让它无法使用 找到`"ReportRequest.getReportsByUser"`查询`em.createNamedQuery()`，然后尝试使用实体类的完整路径名进行`from ReportRequest where userId = :userId`查询，然后在上面的最后一个代码块行中进行查询。

使用 JBoss 5.1、JPA 2、Hibernate 3.3 或 3.6、Spring 3.0.5。

代码片段：

```
@Entity
@Table(name="td_report_request")
@NamedQueries({
@NamedQuery(name=ReportRequestDao.GET_REPORTS_BY_USER, 
        query="from ReportRequest where userId = :userId"),
})
public class ReportRequest extends SlmsGuidAbstract {...}

...
@Repository
public class ReportRequestDao {

    @PersistenceContext
    private EntityManager em;

    public List<ReportRequest> getReportRequests(String userId) {
    // TODO uncomment this line and remove the one after when we go to JBoss >= 6
//      TypedQuery<ReportRequest> query = em.createNamedQuery(GET_REPORTS_BY_USER, ReportRequest.class);
//      Query query = em.createNamedQuery(GET_REPORTS_BY_USER);
    Query query = em.createQuery("from scholastic.dashboard.dto.ReportRequest where user_id = " + userId);

...
<bean id="dashboardEntityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
      <property name="dataSource" ref="lycea.ds.jndi-MySqlDS" />
      <property name="persistenceUnitName" value="dashboardPu"/>
</bean>
...
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
         version="2.0">
<persistence-unit name="dashboardPu" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/MySqlDS</jta-data-source>
    <properties>
        <property name="jboss.entity.manager.factory.jndi.name" value="java:/dashboardPu"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.query.factory_class" value="org.hibernate.hql.ast.ASTQueryTranslatorFactory"/>
        <property name="hibernate.connection.release_mode" value="auto"/>
        <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" />
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
</persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:41:33.747

`persistance.xml`尝试在内部标签中添加带注释的 jpa 类`<class/>`

# javascript - 如何仅将 jquery 调用应用于单击的图像，而不是整个页面

> ID：10642869
> 
> 赞同：0
> 
> 时间：2012-05-17T20:15:43.153
> 
> 标签：javascript, jquery, html, xslt

我正在使用 xslt 和 javascript 来显示数据表。我的表格数据之一是我用作按钮的图像，此按钮位于 for-each 标记中，因此它出现在 xml 数据的每个实例中。我使用jquery在单击时隐藏此按钮以显示更多工作正常的按钮链接，唯一的问题是当我只想将其应用于被单击的图像时，它对页面上的每个按钮都执行此操作。考虑到我正在处理一个 xsl 文件，我该如何解决这个问题，所以每个按钮都不会因为每个标签都有唯一的 id？

有关更多背景信息，我使用了 class 属性并在 jquery 中选择了它，但我愿意完全实现不同的解决方案。

任何帮助是极大的赞赏，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:18:00.213

假设您有 的处理程序`button`，您应该使用

`$(this).hide()`代替`$('.buttonclass').hide()`

基本上在处理程序内部，使用`this`哪个是触发事件的元素。使用它你可以访问相应的元素、元素的父元素、兄弟元素等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:26:16.617

假设您的 HTML/XML 是这样的

```
<ul class="someClass">
    <li><img src="/some/path" /></li>
    <li><img src="/some/path" /></li>
</ul> 
```

使用 jQuery 1.7+，你可以做这样的事情

```
$('ul.someClass').on( 'click', 'img', function( event ) {
    var imgElement = this;

    $(imgElement).hide();
}); 
```

在上面的 JavaScript 代码中，`ul.someClass`指的是**所有**图像元素的公共父级，并且`img`指的是应该触发处理程序的元素。在处理程序本身中，变量`this`设置为触发事件的元素，在您的情况下，它指的是一个`img`元素。这段代码使用了事件委托，非常强大和有用。

如果你使用 jQuery 1.4+（当然是在 1.7 之前），你可以这样做：

```
$('ul.someClass').delegate( 'img', 'click', function( event ) {
    var imgElement = this;

    $(imgElement).hide();
}); 
```

如果你的版本早于 1.4，那么你应该**更新它**，或者你可以这样做：

```
$('ul.someClass').find('img').bind('click', function( event ) {
    var imgElement = this;

    $(imgElement).hide();
}); 
```

此代码段不会使用事件委托。

如果你根本不使用 jQuery，你可以这样做（这里是一个工作演示 [http://jsfiddle.net/pomeh/u6etD/](http://jsfiddle.net/pomeh/u6etD/)）：

```
function hideElement( element ) {
    // code to hide "element" variable
}

function hideImageHandler( event ) {
    var target = event.target || event.srcElement;

    // make sure the click happened on an <img /> element
    if ( target && target.nodeType === 1 && target.tagName.toLowerCase() === 'img' ) {
        hideElement( target );
    }

}

var ul = document.getElementsByTagName('ul')[0];

if ( ul.addEventListener ) {
    ul.addEventListener( 'click', hideImageHandler, false );
}
else if ( ul.attachEvent ) {
    ul.attachEvent( 'onclick', hideImageHandler);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:17:39.800

您应该传递点击的引用。

例如：

`<img onclick="hideImage(this)" />`

然后在函数中：

```
function hideImage(img){
  //img is your image
} 
```

或者更好的是，为了避免每个图像发生事件，您可以将事件委托给父节点，可能是表：

`<table onclick="hideImage(event)">`

然后在函数中：

```
function hideImage(ev){
  var elm = ev.target || ev.srcElement;
  if(elm.tagName !== 'IMG'){
    elm = elm.getElementsByTagName('IMG')[0];
  }
  //elm is your image
} 
```

# linux - 调试 smtp 连接

> ID：10642875
> 
> 赞同：0
> 
> 时间：2012-05-17T20:15:57.063
> 
> 标签：linux, perl, proxy, smtp

我正在使用 perl 模块 Net::Smtp_auth 使用端口 25 上的 web.de SMTP 服务器向自己发送邮件（未加密）。它在我的电脑上运行良好。但我想使用相同的脚本在我没有 root 权限的另一台机器上发送有关已完成作业的通知消息。在这台机器上，我的连接超时。我想知道连接以哪种方式被阻止，阻止它的原因可能是什么（防止垃圾邮件发送者？）以及是否有办法绕过这个问题。我有一些可用的 linux 工具，但没有 nmap。连接可能会受到代理设置的影响，如果是，我如何将其告知 SMTP_auth？

perl 脚本基本上是来自 cpan 的 SMTP_auth 示例。但我不认为它在这里是相关的：

```
#!/usr/bin/perl -w

use Net::SMTP_auth;

$message=$ARGV[0];

$smtp = Net::SMTP_auth->new('smtp.web.de') or die "Failed to open SMTP connection: $!";
$smtp->auth('CRAM-MD5', 'adress', 'password');

$smtp->mail('adress@web.de');
$smtp->to('adress@web.de');

$smtp->data();
$smtp->datasend("To: adress\@web.de\n");
$smtp->datasend("From: adress\@web.de\n");
$smtp->datasend("\n");
$smtp->datasend("$message\n");
$smtp->dataend();

$smtp->quit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:01:52.843

如果其他机器与您的家用机器位于不同的网络中，则很可能那里的 ISP 阻止了传出端口 25 到除它们自己的 SMTP 服务器之外的任何东西，因为这是一种常见的垃圾邮件缓解技术。既定的惯例是，对于通过网络发送的邮件，应该使用端口 587（仅 SMTP 提交端口）。

验证问题是否是您的程序的一种简单方法是尝试远程登录到该主机和端口。如果 telnet 没有连接但其他服务可以连接，则您的 ISP 正在过滤端口 25。

# objective-c - 在 UITableView 标头中包含的 UIImageView 上设置accessibilityLabel

> ID：10642877
> 
> 赞同：10
> 
> 时间：2012-05-17T20:16:03.763
> 
> 标签：objective-c, ios, cocoa-touch, accessibility, voiceover

我有一个`UITableView`我内置的`loadView`. 我所做的其中一件事`loadView`是创建一个`UIView`作为表头并将 a 填充`UIImageView`到其中的内容。图像视图包含一个风格化标题的图像，因此我想为 VoiceOver 用户添加一个可访问性标签。但是，我无法让 VoiceOver 在图像上“聚焦”以读取标签，并且辅助功能检查器不会响应在模拟器中单击图像。我的（缩写）代码如下：

```
... in -loadView ...
// Make header view
UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(...)];
UIImageView *titleImageView = [[UIImageView alloc] initWithImage:[self titleImage]];
titleImageView.accessibilityLabel = [self accessibilityLabelForTitleImage];
[headerView addSubview:titleImageView];

// Make table view
self.tableView = [[UITableView alloc] initWithFrame:CGRect(...) style:UITableViewStylePlain];
self.tableView.tableHeaderView = headerView;
... code continues ... 
```

我已经进入 gdb 并`accessibilityLabelForTitleImage`返回一个字符串。`po [titleImageView accessibilityLabel]`打印出正确的字符串，但我仍然无法专注于图像视图。请注意，视图本身会根据需要显示和响应。

我错过了什么吗？有没有办法强制 VoiceOver 确认图像视图？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T20:46:43.367

在 Voice-Over 中，为了使元素可访问：-

1.  您必须将 setIsAccessibilityElement 属性设置为 true，我在您的代码中找不到。

2.  另一个重要的一点是，要使子元素（子视图）可访问，您必须单独使它们可访问，而父元素不应该是可访问的（您还必须指定这一点）。

3.  在您的自定义单元中实现 UIAccessibilityContainer 协议。

如果我继续下去，这将是一个大故事。请参考[苹果的这个无障碍语音](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW5)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-05T03:16:18.273

我使用 KIF 来测试我的 IOS 应用程序。在我的 tableview 中，我为 tableview.accesssibilityIdentifier 而不是 tableview.accessibilityLabel 分配了值。它对我有用。想试试吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-11T14:50:24.213

画外音有时会变得令人讨厌，仅通过设置`isAccessibilityElement`可能无法正常工作。

在这种情况下，尝试设置`accessibilityElements`父视图并将子视图包含在数组中，如下所示：

```
parentView.accessibilityElements = [childView1, childView1, childView1] 
```

这样做还可以确保以您想要的顺序读取可访问性项目。

# java - 无法连接到 hsqldb 数据库

> ID：10642882
> 
> 赞同：2
> 
> 时间：2012-05-17T20:16:18.427
> 
> 标签：java, database, hsqldb

我正在使用以下命令使用 windows 命令创建数据库并连接到它，但`java.net.SocketException: Unrecognized Windows Sockets error: 0: JVM_Bind`出现错误。

用于创建名为**xdb**的数据库并连接到它的命令：

```
java -cp ./lib/hsqldb.jar org.hsqldb.Server -database.0 file:mydb -dbname.0 xdb 
```

完全错误：

```
[Server@83cc67]: [Thread[main,5,main]]: checkRunning(false) entered
[Server@83cc67]: [Thread[main,5,main]]: checkRunning(false) exited
[Server@83cc67]: Startup sequence initiated from main() method
[Server@83cc67]: Loaded properties from [C:\Home\hsqldb\server.properties]
[Server@83cc67]: Initiating startup sequence...
[Server@83cc67]: [Thread[HSQLDB Server @83cc67,5,main]]: run()/openServerSocket(
):
java.net.SocketException: Unrecognized Windows Sockets error: 0: JVM_Bind
        at java.net.PlainSocketImpl.socketBind(Native Method)
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)
        at java.net.ServerSocket.bind(ServerSocket.java:319)
        at java.net.ServerSocket.<init>(ServerSocket.java:185)
        at java.net.ServerSocket.<init>(ServerSocket.java:97)
        at org.hsqldb.HsqlSocketFactory.createServerSocket(Unknown Source)
        at org.hsqldb.Server.openServerSocket(Unknown Source)
        at org.hsqldb.Server.run(Unknown Source)
        at org.hsqldb.Server.access$000(Unknown Source)
        at org.hsqldb.Server$ServerThread.run(Unknown Source)
[Server@83cc67]: Initiating shutdown sequence...
[Server@83cc67]: Shutdown sequence completed in 6 ms.
[Server@83cc67]: 2012-05-18 01:31:59.184 SHUTDOWN : System.exit() is called next 
```

有人可以帮助我理解为什么会出现此错误以及如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:36:36.217

hsqldb 的默认端口是 9001

运行`netstat -an`检查以查看端口 9001 上是否有东西正在侦听

`netstat -an | grep LISTENING`检查所有监听传入连接的服务器

`netstat -an | grep 9001`检查特定的端口号。

如果已经存在某些东西，那么您尝试启动的新 hsqldb 将无法[将套接字绑定](http://en.wikipedia.org/wiki/Berkeley_sockets#Socket_API_functions)到 9001 端口。

在 Windows 7 上，您可以运行[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437)来查看当前正在侦听“过度拥挤”端口的进程。然后决定终止使用 9001 的进程或重新配置 hsqldb 和您的客户端应用程序以使用不同的（未使用的）端口。

可以使用 --port XXXX 更改 hsqldb 侦听的端口，其中 XXXX 是新的端口号。

同样从`java -cp ./lib/hsqldb.jar org.hsqldb.Server --help`输出...

```
The server looks for a 'server.properties' file in the current directory and loads properties from it if it exists. Command line options override those loaded from the 'server.properties' file. 
```

此错误还有其他可能的原因，因此了解 hsqldb 正在运行的操作系统会很有用。

无法绑定到套接字是一个可能影响**任何服务器应用程序**的问题，因此您可以查看为返回此错误的其他服务器软件提供的答案，例如此处询问的有关 JBOSS 的问题...

[java.net.SocketException：无法识别的 Windows 套接字错误：0：JVM_Bind (JBOSS)](https://stackoverflow.com/questions/3947555/java-net-socketexception-unrecognized-windows-sockets-error-0-jvm-bind-jboss)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:23:53.303

看起来您尝试绑定到端口 0 并且它不存在。尝试配置不同的端口

# xp-cmdshell - xp_cmdshell 远程数据库连接错误

> ID：10642886
> 
> 赞同：0
> 
> 时间：2012-05-17T20:17:08.950
> 
> 标签：xp-cmdshell

我有两台装有 SQL 服务器的 VM 服务器 (A&B)。我已经从服务器 A（集群 SQL 服务器的节点）连接到 B 上的远程 SQL 服务器。我可以通过 DB 连接使用 xp_cmdshell 重命名服务器 B 上的文件吗？

当我尝试此命令 exec xp_cmdshell 'RENAME S:\Test\test.txt test1.txt' 时，我收到以下错误消息

Msg 121, Level 20, State 0, Line 0 从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 – 信号量超时期限已过。）

在此先感谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:45:21.233

让我回答我自己的问题，它也可能对其他人有用。该问题与 SQL Server 无关，与网络有关。服务器 B 的默认网关与服务器 A 不同。服务器 A 使用动态 IP，服务器 B 使用静态 IP。修复上述两件事后，我可以使用 xp_cmdshell 重命名文件。

-乔

# emacs - emacs orgmode 中 #+begin_src 块中的语法突出显示不起作用

> ID：10642888
> 
> 赞同：41
> 
> 时间：2012-05-17T20:17:14.337
> 
> 标签：emacs, syntax-highlighting, org-mode

我尝试了许多不同的语言并复制了各种示例，但是我在 orgmode 中的代码块都没有获得语法高亮显示。这是我正在尝试的：

```
#+begin_src python

def main():
  print "Hello %s" % ("what's the problem")

#+end_src

#+begin_src c++

for (int i = 0; i < 30; i++) 
{
  cout << "Hello" << endl;
}

#+end_src 
```

当导出为 HTML 时，它显示在源代码块中，但也没有突出显示。

我正在使用最新的组织（7.8.10）。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-17T20:36:29.190

你有这个吗？

```
(setq org-src-fontify-natively t) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T20:09:34.593

我遇到了类似的问题，尽管添加了 htmlize.el，但在导出到 html 时无法突出显示代码语法。然后我发现了这篇非常有用的帖子，并按照以下步骤操作：

[使用 Emacs 在 WordPress 中突出显示 R 代码的语法](http://vzemlys.wordpress.com/2009/10/16/syntax-highlighting-r-code-in-wordpress-using-emacs/)

只是重申一下步骤：

1.  我在 ~/.emacs.d/ 目录中复制了 htmlize.el
2.  在 org 模式下，输入 Mx byte-compile-file 并导航到 htmlize.el 所在的目录，选择它并按 enter。这将编译 htmlize.el 文件。
3.  重新启动 emacs 并导出一个包含代码块的文件。导出的 html 文件现在将具有语法突出显示的代码。

# mobile - Sencha Touch 2 原生构建与在 Phonegap 中包装 Sencha Touch 2

> ID：10642897
> 
> 赞同：6
> 
> 时间：2012-05-17T20:17:46.580
> 
> 标签：mobile, cordova, sencha-touch-2

我知道 Sencha Touch 2 与 Phonegap 之间存在一些问题，这不是我的意思。我一直在计划使用 Sencha Touch 2 构建我的 Webapp 并将其包装在 Phonegap 中；但我刚刚发现 Sencha Touch 2 还允许您使用命令行工具为 Android 和 ios 构建原生版本的 Web 应用程序。为什么我没有听到太多关于这个解决方案的消息？这样做有什么限制？还有什么更好，使用 Sencha Touch 2 的原生构建功能或使用 Sencha Touch 2 + Phonegap 路线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:48:28.227

我猜 Sencha Touch 2 原生封装仍将使用 UIWebViews（如 PhoneGap），因此性能将相似。就我个人而言，我会坚持使用 PhoneGap/Cordova，因为它是一个更成熟的产品，拥有更大的用户群。您仍然可以使用 Sencha Touch 2 框架，但仍然可以使用 xcode 捆绑/发布应用程序。

# css - CSS重叠元素没有绝对定位

> ID：10642907
> 
> 赞同：4
> 
> 时间：2012-05-17T20:18:43.310
> 
> 标签：css, position, overlap, absolute

我想要一个父类（`ul`标签）来保存一堆`li`相互重叠的标签，这是我的代码：

```
<ul class="overlap">
    <li>
        Overlap One
    </li>
    <li>
        Overlap Two
    </li>
    <li>
        Overlap Three
    </li>
</ul> 
```

我不希望它们被绝对定位，因为我有一个具有背景边框和颜色的父元素，但是当我绝对定位子元素时，父元素不会拉伸，这是完整的代码。

```
<blockquote>
 <ul class="overlap">
    <li>
        Overlap One
    </li>
    <li>
        Overlap Two
    </li>
    <li>
        Overlap Three
    </li>
</ul>
</blockquote> 
```

标签上有背景颜色，这`blockquote`就是为什么孩子不能绝对定位的原因。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:24:03.263

像这样？[http://jsfiddle.net/2N8Jz/](http://jsfiddle.net/2N8Jz/)

```
<blockquote class="clearfix">
  <ul class="overlap">
    <li>Overlap One</li>
    <li>Overlap Two</li>
    <li>Overlap Three</li>
  </ul>
</blockquote>
​

blockquote {
    border: 1px solid black;    
    padding: 10px;
}

.overlap {
    padding-left: 10px;
}

.overlap li {
    border: 1px solid grey;
    float: left;
    margin: 0 0 0 -10px;
}

.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:28:37.163

给出`<li>`'a 负数`margin`应该可以解决问题。

这是一个例子：http: [//jsfiddle.net/wvEms/1/](http://jsfiddle.net/wvEms/1/)

# wordpress - 我已经尝试了一切，请帮助。移动 Wordpress 后，分类档案被破坏

> ID：10642912
> 
> 赞同：0
> 
> 时间：2012-05-17T20:19:07.817
> 
> 标签：wordpress, .htaccess, categories, permalinks

我刚刚将我的 Wordpress 网站移动到不同的服务器和 url。所有帖子都显示在仪表板中，我可以在网站上单独查看它们，但它们没有显示在类别档案中。

例如，当我在管理面板中查看“宣传”类别时，它说它包含 8 个帖子，但是当我单击“查看”时，类别存档页面显示“未找到”。

知道如何解决这个问题吗？抱歉，如果这是一个写得不好的问题，但我完全不知道为什么会这样。

你可以在这里查看：http: [//www.carolinafarmstewards.org/cfsa-test/](http://www.carolinafarmstewards.org/cfsa-test/)

更新***_* __ *_* __**

我已经阅读了移动 WordPress 方向并尝试了那里列出的解决方案。我试过检查[.htaccess 文件](http://wordpress.org/support/topic/permalinks-broken-after-blog-move?replies=7)，[重置永久链接](http://wordpress.org/support/topic/after-moved-wordpress-to-new-domain-category-038-permalinks-broken?replies=2)，甚至将这段[代码添加到 wp-config.php 文件](http://jeffsebring.com/fixing-broken-permalinks-when-moving-wordpress/)中。没有什么帮助。我不知所措。

另一个更新***_* __ *_* __**

我尝试替换旧网址的每个实例。我使用了 Search and Replace 和 Velvet Blue Update Urls。它修复了很多实例，但一切仍然被破坏。

又一次更新 ***_* ____**

我尝试在新服务器上使用干净的 wordpress 安装并使用 wordpress 的导入工具导入数据。结果相同。您可以在此处查看该版本：(carolinafarmstewards.org/newsite)

再次更新 ***_* __ *_* _**

今天早上我再次完成了所有的修复。只是为了确保我没有错过任何东西。不用找了。有没有人有任何想法？

我刚刚注意到一些事情 ***_* __ *_* __ *_* ___**

这基本上是描述问题的另一种方式，但我只是注意到了这一点，并认为它可能有助于诊断正在发生的事情。在管理面板中，当我查看帖子列表时，所有帖子都说它们已分配到类别，但是当我尝试按任何类别过滤帖子列表时，它会显示“未找到帖子”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:18:11.537

所以，我觉得自己像个白痴，我仍然不知道为什么它坏了，但是......

如果我使用不同的主题，则类别会起作用。我有点不安，因为我的主题在搬家之前就已经奏效了。我仍然不确定为什么该主题似乎在新服务器上打破了类别，但确实如此。

# ruby-on-rails - Testing "output" with rspec and rails

> ID：10642920
> 
> 赞同：1
> 
> 时间：2012-05-17T20:19:45.953
> 
> 标签：ruby-on-rails, ruby, rspec

I'm having a hard time learning how to implement appropriate testing with rspec and rails.

Speaking generally, how does one test the "hard cases" such as did a file get generated or was an image properly resized? Currently, to me it seems that unit testing is designed for testing the transformation of values rather than making sure data is processed and output appropriately.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:34:26.273

**TL;DR**您应该探索不同的工具，并且不要回避可能看起来不像传统“单元测试”的“困难案例”。困难的案例通常*是*可测试的。

测试绝对是一个兔子洞。从表面上看，它看起来很漂亮和干净，但是当你进入它时，兔子洞会很深，这是一个例子：你如何测试这些东西？您希望确信您的代码正在做正确的事情，但您也不希望创建过于复杂和难以管理的测试，也不希望测试过于细粒度。

但是，对于您的具体问题，我确实有一些您可能希望了解的想法。

为了测试文件是否生成，您可以检查该文件最初是否不存在（ruby has `File.exists?`），然后您可以通过某种方法检查它是否存在。当然，您会遇到诸如“内容正确吗？”、“完成完成了吗？”之类的问题，您*也可以*通过打开文件并检查来测试这些内容。

对于图像，您可能可以找到允许您检查图像属性的工具（也许是回形针？从未使用过它，但它是一个众所周知的宝石）。所以你可以做这样的事情（在某种伪代码中，因为我不知道有什么工具可以做到这一点）：

```
it "resizes the image" do
    img = Image.open_image("pic.png")
    img[:size].should eq [100, 100]
    img.close

    resize_image

    image = Image.open_image("pic.png")
    imge[:size].should eq [25, 25]
    img.close
end 
```

测试通常依赖于找到越来越有用的宝石/工具来处理情况。是的，“单元”测试只会检查单元级代码，它们*可能*非常简单，但并非总是如此。但是随后您开始查看库规范、请求规范、路由规范、验收测试、控制器规范等。那里有很多工具，研究是关键。

但同样，您列出的示例可能不是您认为的*单元*测试。如果您的调整大小或文件生成是在模型之外完成的，那么是的，它是一个单元测试，但您不再编写那么简单的代码（如访问器和修改器）。很多时候，刚接触彻底测试的人不会认为一切都是可测试的，而且可能不是，但如果你四处玩耍和探索，你通常可以找到一种方法来做到这一点。

# android - 如果缓冲区已满，startMethodTracing() 是否会返回错误？

> ID：10642922
> 
> 赞同：4
> 
> 时间：2012-05-17T20:19:50.463
> 
> 标签：android, debugging, profiling, android-traceview

`Debug.startMethodTracing()`默认情况下使用 8MB 的“缓冲区大小”。我有很多关于这个缓冲区的问题。

1.  如果缓冲区填满，是否会引发错误，或者它是否只是停止记录？
2.  无论写入多少数据，缓冲区是否保持固定的 8MB？
3.  如果我手动指定`bufferSize`参数，单位是什么？字节？兆？
4.  我尝试将缓冲区大小增加到 20MB 左右，然后应用程序退出。我需要记录大约 20 秒的实时计算。有没有办法记录超过 20MB 左右的数据？我假设它首先存储在内存中，否则将其存储到 SD 卡中没有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:26:59.710

我进行了一些测试，发现：

1.  如果缓冲区已满，则会显示以下“信息”级别 LogCat 消息：`TRACE STOPPED (NOTE: overflowed buffer): writing X records`

2.  缓冲区在 0 到 8MB 之间，具体取决于写入的数据量。

3.  该`bufferSize`参数以字节为单位指定。

4.  要增加模拟设备内存的数量，请打开 AVD 管理器并编辑您的虚拟设备。单击新硬件按钮并选择设备内存大小。在我的机器上，我可以输入的最大容量是 1GB（值 1000）。

# sql - Sort by number of mutual friends

> ID：10642923
> 
> 赞同：3
> 
> 时间：2012-05-17T20:19:51.250
> 
> 标签：sql, language-agnostic

I have the following tables

*   user (id, name, email)
*   friendships (id, user_id, friend_id)

And I given user_id of the current user, I would like to show a list of all the users in the database by the number of mutual friends. I have no trouble writing an SQL query to get the mutual friends between two particular. I am stumped on how to get the mutual friends for all the users in one query.

Here's the query for getting mutual friends between user A and user B

```
SELECT users.* FROM friendships AS a
    INNER JOIN friendships AS b
        ON a.user_id = :a_id AND b.user_id = :b_id AND a.friend_id = b.friend_id
    INNER JOIN users ON users.id = a.friend_id 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:41:50.630

你可以试试这样的

```
set nocount on;

-- Your existing table
declare @user table (id int, name varchar(25), email varchar(25)) 
insert into @user select 1,'user a','a@a.com'
insert into @user select 2,'user b','b@b.com'
insert into @user select 3,'user c','c@c.com'
insert into @user select 4,'user d','d@d.com'
insert into @user select 5,'user e','e@e.com'

-- Your existing table
declare @friendships table (id int identity, user_id int, friend_id int)
insert into @friendships select 1,2
insert into @friendships select 1,3
insert into @friendships select 1,4
insert into @friendships select 1,5

insert into @friendships select 2,1
insert into @friendships select 2,4

insert into @friendships select 3,1
insert into @friendships select 3,2
insert into @friendships select 3,5

insert into @friendships select 4,1
insert into @friendships select 4,2
insert into @friendships select 4,5

insert into @friendships select 5,1
insert into @friendships select 5,2
insert into @friendships select 5,3

/* Find users with mutual friends */
declare @id int;set @id=4;

-- My friends
declare @myfriends table (userid int)
insert into @myfriends
select friend_id 
from @friendships 
where user_id=@id
--select * from @myfriends

-- All other users who have mutual friends with me
;with cteMutualFriends (userid, mutualfriendcount) as (
    select user_id,COUNT(*) as mutual 
    from @friendships 
    where friend_id in (select userid from @myfriends) and user_id not in (@id)
    group by user_id
) select u.*,cteMutualFriends.mutualfriendcount 
from cteMutualFriends 
inner join @user u on cteMutualFriends.userid=u.id
order by cteMutualFriends.mutualfriendcount desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:29:26.297

```
SELECT
    users.id,
    users.name,
    users.email,
    count(distinct facebook_friendships.user_id)
FROM users
JOIN friendships AS a ON users.id = a.friend_id
JOIN facebook_friendships AS b
    ON b.user_id = a.user_id AND a.friend_id = b.friend_id
GROUP BY 1,2,3
ORDER BY 4 DESC 
```

我不确定你的其他表的列是什么，但这个查询应该是关闭的

# xquery - Xquery traverse tree

> ID：10642924
> 
> 赞同：0
> 
> 时间：2012-05-17T20:19:52.163
> 
> 标签：xquery, traversal

i am new to xquery. I have the following xml document :

```
<?xml version="1.0" encoding="UTF-8"?>
     <lines>
        <line>
            <id>1</id>
            <par>1</par>
        </line>
        <line>
            <id>2</id>
            <par>1</par>
        </line>
        <line>
            <id>3</id>
            <par>2</par>
        </line>
        <line>
            <id>4</id>
            <par>2</par>
        </line>
        <line>
            <id>5</id>
            <par>1</par>
        </line>
        <line>
            <id>6</id>
            <par>5</par>
        </line>
        <line>
            <id>7</id>
            <par>5</par>
        </line>
        <line>
            <id>8</id>
            <par>5</par>
        </line>
    </lines> 
```

I would like to create a function that would get as input a certain id , and would return all the line elements - descendants of this id , including the one given as input. For example giving as input 1 it would return the line elements with ids 1,2,3,4,5,6,7,8\. I know i can go to depth 1 using the following: `lines/line[par=id_given]`, but what if i would like to fetch all descendants?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:35:53.687

您必须定义一个递归遍历树的函数。这个确实可以按级别工作：

```
declare function local:traverse($tree as element(lines), $id as xs:integer*) as element(line)* {
 let $level := $tree//line[par=$id][id!=$id]
 return
  if ($level)
  then ($level, local:traverse($tree, $level/id))
  else ()
}; 
```

您可以使用`local:traverse(/lines, 0)`.

但是此函数不会处理您的示例 XML，因为这不是树：根元素中有一个不允许的循环。您将不得不引入一些新的唯一根 id 或从根中删除父级以获得真正的树。

```
<lines>
    <line>
        <id>1</id>
        <par>0</par>
    </line>
    [snip] 
```

您还可以更改上面的代码以处理这些自引用：将谓词添加`[id!=$id]`到定义的末尾`$level`，这将排除自引用。现在您的根节点已从结果中排除，将其重新包含在函数调用中：`(/lines/line[id=1], local:traverse(/lines, 1))`。

# git - 如何在 GitHub 上拉请求 wiki 页面？

> ID：10642928
> 
> 赞同：192
> 
> 时间：2012-05-17T20:19:55.860
> 
> 标签：git, github, wiki

[我在GitHub 上](http://en.wikipedia.org/wiki/GitHub)看到了一个未打开编辑的 wiki 页面。然后我分叉了这个项目，在“我的结束”上对其进行了编辑，并尝试做一个拉取请求。事实证明，*wiki*不在项目中，也没有办法对其进行更改。

在这种情况下，如果我想建议对 wiki 进行更改，除了电子邮件之外，还有其他方法可以继续吗？

^(在这一点上，我在“具有相似标题的问题”下发现了一个[看起来像是替代方案](https://stackoverflow.com/questions/6941688/how-to-integrate-a-github-wiki-into-the-main-project)的东西，但是我还不能用它来做拉取请求，所以我不确定子模块是否是实现这个目的的好方法。我现在看到我可能会以某种方式分支它......所以这是要走的路吗？)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-07-14T07:27:52.153

GitHub[不支持对 wiki 存储库的拉取请求](https://github.com/gollum/gollum/issues/265)，仅支持主存储库（这有点可惜，IMO，但我能理解）。

这是一个项目管理其 wiki 的社区更新的一种有趣方式，同时仍保持严格的控制，至于源代码：

> 我建议的工作流程是这样的：
> 
> 1.  在您的 Github 帐户上手动创建 Taffy wiki 的分支：
>     *   在您的 github 帐户上创建一个新的存储库。我们称之为“Taffy-Wiki”。
>     *   将 Taffy wiki repo 克隆到本地计算机的某个位置：`git clone git@github.com:atuttle/Taffy.wiki.git`
>     *   删除原始的“origin”遥控器并将您的 github repo 添加为新的“origin”`git remote rm origin`和`git remote add origin git@github.com:<YOUR_USERNAME>/Taffy-Wiki.git`
> 2.  在本地进行您提议的更改，然后将它们推送到您的 github 帐户：`git push -u origin master`（'-u origin master' 仅第一次需要；之后只需执行`git push`）
> 3.  向官方 Taffy 问题跟踪器提交工单，要求我审查您的更改并将其合并。**请确保包含指向您的存储库的链接并描述您所做的更改。**
> 4.  转到#2

（来自 *[如何为 Taffy 文档做出贡献](http://fusiongrokker.com/post/how-you-can-contribute-to-taffy-documentation)*。）

如果是我，我会在主存储库（即您分叉的存储库）中创建一个问题，建议对 wiki 进行更新。如果未启用问题，那么电子邮件是我能想到的唯一其他选项。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-11-04T11:36:47.870

到目前为止，我们在[https://devonfw.com](https://devonfw.com)中找到了该问题的最佳解决方案：

1.  将您的文档与文档文件夹中的代码一起放入 git 存储库。
2.  使用一些魔法扩展您的 travis-ci 构建，该魔法会将该文档文件夹中的所有更改分阶段并将转换应用于 wiki git。请参阅下面的最后一个示例链接。
3.  将 wiki 视为文档的只读视图。请注意，使用 github.com，您仍然可以查看和直接编辑文档文件夹中的文件。因此，您仍然可以在几秒钟内修复浏览器中的拼写错误（即使在没有 repo 权限的情况下作为 PR）——只是不是通过 wiki。
4.  当贡献者分叉时，他还拥有包含代码的文档。他可以在一个 PR 中同时更改所有内容，并在同一过程中对所有内容进行审核，因此在合并后代码和文档保持同步。你仍然有更好的用户体验来阅读带有侧边栏等的 wiki 文档。

由于我们是 100% 的 OSS，因此我们喜欢​​分享我们为实现这一伟大解决方案所做的努力。以下是链接示例：

*   [https://devonfw.com/website/pages/docs/master-devon4j.asciidoc_introduction.html](https://devonfw.com/website/pages/docs/master-devon4j.asciidoc_introduction.html)
*   [https://github.com/devonfw/devon4j/wiki/architecture](https://github.com/devonfw/devon4j/wiki/architecture)
*   [https://github.com/devonfw/devon4j/blob/develop/documentation/architecture.asciidoc#architecture](https://github.com/devonfw/devon4j/blob/develop/documentation/architecture.asciidoc#architecture)
*   [https://repo1.maven.org/maven2/com/devonfw/java/doc/devon4j-doc/3.2.0/devon4j-doc-3.2.0.pdf](https://repo1.maven.org/maven2/com/devonfw/java/doc/devon4j-doc/3.2.0/devon4j-doc-3.2.0.pdf)
*   [https://github.com/devonfw/devon4j/blob/develop/.travis.yml](https://github.com/devonfw/devon4j/blob/develop/.travis.yml)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-06T11:19:53.943

我对此采取了不同的方法，即将完全相同的内容推送到主 repo 和 wiki 中。这不会符合每个人的口味，但[Risk-First](https://github.com/risk-first/website/wiki)主要是一个 wiki，主 repo 中有一些 Jekyll 页面。

这意味着拉取请求/分叉过程可以正常工作。但是，在合并拉取请求后，我必须执行额外的步骤，即拉取到本地存储库，然后推送到主存储库和 wiki，git 支持多个源 URL：

```
localhost:website robmoffat$ git remote show origin
* remote origin
  Fetch URL: git@github.com:risk-first/website.git
  Push  URL: git@github.com:risk-first/website.wiki.git
  Push  URL: git@github.com:risk-first/website.git
  HEAD branch: master 
```

为了实现这一点，我合并了两个 repos 的提交，如下所示：

[如何合并两个 Git 存储库？](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories#10548919)

然后像这样推送到两个仓库：

[Git - 将代码推送到两个遥控器](https://stackoverflow.com/questions/14290113/git-pushing-code-to-two-remotes)

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-28T17:00:21.637

您不能发出拉取请求，但您可以打开一个问题，将链接粘贴到您的 wiki 页面，然后让他们在您的 wiki 页面中合并到他们的 wiki 页面。

# 简而言之：

他们只需要克隆您的 wiki 页面 repo ( `git clone YOUR_FORKED_REPO.wiki.git`)，将您的所有 wiki 提交压缩为一个大提交，然后将这个大的压缩提交精选到他们的 repo 中。这会将您所有的 wiki 更改引入他们的 wiki。

# 完整说明：

（从 Larry Botha 的 github 要点这里复制：[https](https://gist.github.com/larrybotha/10650410) ://gist.github.com/larrybotha/10650410 ）：

> # 从分叉的 Github 存储库中合并 Wiki 更改
> 
> [这是受 Roman Ivanov 的How To Merge Github Wiki Changes From One Repository To another](http://roman-ivanov.blogspot.com/2013/11/how-to-merge-github-wiki-changes-from.html)的启发（或基本上是复制的），并用于确保如果原始文章发生某些事情，信息在这里仍然很好且安全。
> 
> ### 术语
> 
> **OREPO** : original repo - 由所有者创建或维护的repo
> 
> **FREPO**：可能对其 wiki 进行了更新的分叉存储库，但尚未在**OREPO上**
> 
> ## 贡献
> 
> 如果您想为已分叉的仓库的 wiki 做出贡献，请执行以下操作：
> 
> *   分叉回购
> *   仅将 wiki 克隆到您的计算机： `$ g clone [FREPO].wiki.git`
> *   更改您的本地分叉 wiki 存储库
> *   将您的更改推送到 GitHub
> 
> 一旦您准备好让作者知道您有更改，请执行以下操作：
> 
> *   **在OREPO**上打开一个问题
> ***   提供指向您 wiki 的 git 存储库的直接链接，以便于合并：即 [ **FREPO** ].wiki.git**
> 
>  **## 合并更改
> 
> 作为**OREPO**的所有者，您现在收到一条消息，说明您的 wiki 在其他人的**FREPO**上有更新。
> 
> 如果 wiki 更改是从最新的**OREPO** wiki 派生的，您可以执行以下操作：
> 
> ```
> $ git clone [OREPO].wiki.git
> $ cd [OREPO].wiki.git
> 
> # squashing all FREPO changes
> $ git pull [FREPO].wiki.git master
> 
> $ git push origin master 
> ```
> 
> 如果**OREPO** wiki 领先于**FREPO**的分支，请执行以下操作：
> 
> ```
> $ git clone [OREPO].wiki.git
> $ cd [OREPO].wiki.git
> $ git fetch [FREPO] master:[FREPO-branch]
> $ git checkout [FREPO-branch]
> 
> #checkout to last OREPO commit
> $ git reset --hard [last-OREPO-commit-hash]
> 
> # do massive squash of all FREPO changes
> $ git merge --squash HEAD@{1}
> $ git commit -m "Wiki update from FREPO - [description]"
> $ git checkout master
> 
> # cherry-pick newly squashed commit
> $ git cherry-pick [OREPO-newly-squashed-commit]
> $ git push 
> ```**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-21T14:35:10.710

如果您可以拥有一个单页长文档（我实际上更喜欢它），您可以劫持`README.MD`并将 wiki 的内容放在那里。

它不仅将作为正常存储库的一部分进行跟踪，还将显示在主页上。

可以从快速参考开始，然后进入更详细的描述/说明，以便普通用户首先点击更通用的信息。**

# wpf - How can I hold a WPF storyboard animation for a second, before continuing?

> ID：10642930
> 
> 赞同：8
> 
> 时间：2012-05-17T20:20:05.790
> 
> 标签：wpf, animation, storyboard, timing

We have a color animation that blends from red to white. Currently, this is a linear fade. We know we can play with the `Storyboard` class's BeginTime and such, but that simply delays the start of the entire animation. We've also looked at the ease-in/ease-out side of things, but they don't seem to work either.

Specifically, we'd like to hold a value of red for one second, then fade from red to white over the next. Can that be done in pure XAML? If not, can it be done in code-behind manually setting up a storyboard? ...or do we have to use two separate storyboards and play them in sequence?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T00:30:45.570

Several ways to do this.

**with key frames:**

```
<Storyboard>
    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="Background.Color">
        <DiscreteColorKeyFrame Value="Red" KeyTime="0:0:0" />
        <DiscreteColorKeyFrame Value="Red" KeyTime="0:0:1" />
        <LinearColorKeyFrame Value="White" KeyTime="0:0:2" />
    </ColorAnimationUsingKeyFrames>
</Storyboard> 
```

**with two animations in sequence:**

```
<Storyboard>
    <ColorAnimation Storyboard.TargetProperty="Background.Color"
                    From="Red" To="Red" Duration="0:0:1" />
    <ColorAnimation Storyboard.TargetProperty="Background.Color"
                    To="White" BeginTime="0:0:1" Duration="0:0:1" />
</Storyboard> 
```

**with a custom easing function:**

```
<Storyboard>
    <ColorAnimation Storyboard.TargetProperty="Background.Color"
                    From="Red" To="White" Duration="0:0:2">
        <ColorAnimation.EasingFunction>
            <local:CustomEasingFunction />
        </ColorAnimation.EasingFunction>
    </ColorAnimation>
</Storyboard> 
```

In this case a function that shows the transition in the first half of duration and holds the value in the second half. Because the default EasingMode is EaseOut this function will then 'play' backwards.

```
public class CustomEasingFunction : EasingFunctionBase
{
    public CustomEasingFunction() : base()
    { }

    protected override double EaseInCore(double normalizedTime)
    {
        return (normalizedTime < 0.5)
            ? normalizedTime * 2
            : 1;
    }

    protected override Freezable CreateInstanceCore()
    {
        return new CustomEasingFunction();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:57:30.123

根据您编写动画的方式，您可以添加一个从“红色”到“红色”的过渡，在开始时需要一秒钟。所以从技术上讲，动画正在运行，但它什么也没做。这可以在纯 XAML 中完成。

# android - ProGuard broke my Android code

> ID：10642931
> 
> 赞同：2
> 
> 时间：2012-05-17T20:20:17.410
> 
> 标签：android, proguard

I added ProGuard to my Android project using default settings, and it broke my code.

On the first screen, I have a Button like this:

```
 <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="onSaveButtonClick" /> 
```

And I have a method in the Class:

```
public void onSaveButtonClick(View view){
 // some code 
} 
```

When ProGuard disabled, everything works just fine. When enabled, on clicking the button I get this error:

> 05-17 16:04:54.099: E/AndroidRuntime(1181): java.lang.IllegalStateException: Could not find a method onSaveButtonClick(View) in the activity class xxxx for onClick handler on view class android.widget.Button with id 'xxxxx'

Any ideas why this happened?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:36:53.503

Proguard 正在将您的方法“onSaveButtonClick”更改为“a”。它不会更新您的 XML 文件，因此 Android 无法再找到它。您应该以编程方式设置您的点击处理程序（在视图上使用 setOnClickListener）或遵循 Keyser 发布的 SO 问题中链接的建议。

# joomla - 没有管理菜单的组件

> ID：10642936
> 
> 赞同：1
> 
> 时间：2012-05-17T20:20:49.260
> 
> 标签：joomla, joomla1.5, joomla-extensions, joomla2.5

有谁知道如何创建一个不在管理菜单中创建部分的 Joomla 组件？

我已经删除了清单中的所有菜单条目，但它仍然创建了一个管理菜单项：

```
<administration>
            <files folder="admin">
                    <filename>index.html</filename>
                    <filename>gallery.php</filename>
                    <filename>controller.php</filename>
                    <folder>views</folder>
                    <folder>models</folder>
            </files>
</administration> 
```

有任何想法吗？

注意：这是关于 J2.5，但 1.5 也很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T01:32:43.967

Joomla 会在安装时自动插入这些菜单项，但如果你真的想的话，你可以通过各种方式去掉它们。

最简单的方法是`client_id`在菜单表中更改组件行的字段。管理菜单项有`client_id = 1`，但如果您将其更改为诸如 之类的废话`client_id = 10`，它们将不会显示在管理站点中。

或者，您可以直接删除它们。因为菜单表使用嵌套集模型，所以不应该只删除行。可能你最好的方法是使用`MenusModelMenu`类的删除功能。

如果您的安装程序包含具有`postflight`函数的脚本，则可以在组件安装期间完成上述任何一项操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:55:28.033

这是我最终用于删除管理菜单中的条目的代码。

首先，我创建了一个安装脚本，在名为 script.php 的文件中实现了飞行后方法：

```
<?php
//No direct access
defined('_JEXEC) or die;');

class com_mycomponentInstallerScript{
    function postflight($type, $parent){
        // $parent is the class calling this method
    // $type is the type of change (install, update or discover_install)
        $componentName = 'myComponent'; //The name you're using in the manifest
        $extIds = $this->getExtensionIds($componentName);
        if(count($extIds)) {
            foreach($extIds as $id) {
                if(!$this->removeAdminMenus($id)) {
                    echo JText::_(COM_MYCOMPONENT_POSTFLIGHT_FAILED);
                }
            }
        }
    }

    /**
    * Retrieves the #__extensions IDs of a component given the component name (eg "com_somecomponent")
    *
    * @param   string   $component The component's name
    * @return   array   An array of component IDs
    */
    protected function getExtensionIds($component) {
        $db = JFactory::getDbo();
        $query = $db->getQuery(true);
        $query->select('extension_id');
        $query->from('#__extensions');
        $cleanComponent = filter_var($component, FILTER_SANITIZE_MAGIC_QUOTES);
        $query->where($query->qn('name') . ' = ' . $query->quote($cleanComponent));
        $db->setQuery($query);
        $ids = $db->loadResultArray();
        return $ids;
    }

     /**
   * Removes the admin menu item for a given component
   *
   * This method was pilfered from JInstallerComponent::_removeAdminMenus()
   *
   * @param   int      $id The component's #__extensions id
   * @return   bool   true on success, false on failure
   */
   protected function removeAdminMenus(&$id)
   {
      // Initialise Variables
      $db = JFactory::getDbo();
      $table = JTable::getInstance('menu');
      // Get the ids of the menu items
      $query = $db->getQuery(true);
      $query->select('id');
      $query->from('#__menu');
      $query->where($query->qn('client_id') . ' = 1');
      $query->where($query->qn('component_id') . ' = ' . (int) $id);

      $db->setQuery($query);

      $ids = $db->loadColumn();

      // Check for error
      if ($error = $db->getErrorMsg())
      {
         return false;
      }
      elseif (!empty($ids))
      {
         // Iterate the items to delete each one.
         foreach ($ids as $menuid)
         {
            if (!$table->delete((int) $menuid))
            {
               return false;
            }
         }
         // Rebuild the whole tree
         $table->rebuild();
      }
      return true;
   }

} 
```

接下来，我在组件清单中添加了一个条目，以在安装组件后运行脚本：

```
<scriptfile>script.php</scriptfile> 
```

# jqgrid - jqgrid, group header columns get mis-aligned on resize

> ID：10642941
> 
> 赞同：2
> 
> 时间：2012-05-17T20:21:18.667
> 
> 标签：jqgrid

I am using group headers on a set of columns. These seem to work OK as long as I dont' resize the grids. If and when I resize the grid to be smaller than it's actual width the data columns seem to be misaligned and do not line up properly with the column heading. Is there a fix for this.

Thank You

Chandra

Edited to add example and picture.

```
jQuery("#mbboAbboList").jqGrid('setGroupHeaders', {
    useColSpanStyle: false,
    groupHeaders:[
     {startColumnName: 'mbboInfo.bidSize', numberOfColumns: 4,titleText: '<em>MBBO</em>'},
     {startColumnName: 'abboInfo.bidSize', numberOfColumns: 4, titleText: '<em>ABBO</em>'}
   ]
}); 
```

![Picture shows difference between normal and mis-aligned columns](../Images/83963e15c48ce23e80a84f4c6d9e0d35.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:33:03.257

我刚刚遇到了同样的问题，我最终解决这个问题的方法是在页面调整大小时破坏标题，然后在页面调整大小后再次重新加载它们。然后标题正确对齐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T01:25:07.570

这是一个更通用的解决方法。它还解决了 jqGrid 不调整大小的问题。以下代码将调整作为“grid-stretch-container”类元素的子元素的所有 jqGrid 的大小，并将修复组标题问题。我这样做是为了创建一个带有 class="grid-stretch-container" 和适当拉伸样式的 div。包含的 jqGrid 将随着父 div 调整大小而调整大小。

```
$(document).ready(function () {
    // Bind the window resize event.
    // The timer prevents multiple resize events while resizing. 
    // You might want to play with the 20ms delay if you're getting
    // multiple events or noticeable lag.
    var resizeTimer;
    $(window).bind("resize", function () {
             clearTimeout(resizeTimer);
             resizeTimer = setTimeout(resizeApp, 20);
         });

    // Trigger an initial resize so everything looks good on load.
    $(window).trigger("resize");
}

function resizeApp() {
    // Resize all visible jqGrids that are children of ".grid-stretch-container" elements.
    // Note: You should call resizeApp when any grid visibility changes.
    $(".grid-stretch-container:visible .ui-jqgrid-btable").each(function (index) {
        // Resize the grid to it's parent.
        var container = $(this).closest(".grid-stretch-container");
        $(this).jqGrid().setGridWidth(container.width());
        // The grid height does not include the caption, pagers or column headers
        // so we need to compute an offset.
        // There's probably a better method than accessing the jqGrid "gbox".
        var gbox = $(this).closest("#gbox_" + this.id);
        var height = $(this).getGridParam("height") + (container.height() - gbox.height());
        $(this).jqGrid().setGridHeight(height);

        // Destroy and recreate the group headers to work around the bug.
        var groupHeaders = $(this).jqGrid("getGridParam", "groupHeader");
        if (groupHeaders != null) {
            $(this).jqGrid("destroyGroupHeader").jqGrid("setGroupHeaders", groupHeaders);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:09:43.493

我按照阿尔瓦罗所说的做了，这很奏效..

这是我的代码...

在窗口调整大小事件中，

```
 $("#grid").jqGrid('destroyGroupHeader');
     if($('#grid_container').attr("id")!==undefined)
         $("#grid").setGridWidth($('#grid_container')[0].offsetWidth,true);
     grid_reconstruct_GroupHeaders(); 
```

grid_container 是一个 div，其中存在我的网格，我将 offsetwidth 作为剩余元素的宽度以百分比表示。

我的 grid_reconstruct_GroupHeaders() 函数看起来像....

```
$("#grid").jqGrid('setGroupHeaders', {
      useColSpanStyle: false, 
      groupHeaders:[
        {startColumnName: 'organisation', numberOfColumns: 1, titleText: '<span>Order/Ready Completion</span>'},
        {startColumnName: 'Order', numberOfColumns: 12, titleText: '<span>Manual Queue</span>'},
        {startColumnName: 'Process', numberOfColumns: 1, titleText: '<span>Automated Queue</span>'},
        {startColumnName: 'Total', numberOfColumns: 1, titleText: '<span>TOTAL</span>'}
      ] 
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T03:06:49.903

我有完全相同的问题，经过一些测试，我发现 jqgrid 与 jquery 1.8 不兼容（我假设你使用的是那个版本）

当我使用 jquery 1.7.2 并且问题消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-21T14:28:49.923

我遇到了同样的问题，标题在 jQGrid 4.6 版中没有对齐。我可以通过绑定到窗口调整大小功能来解决这个问题，就像 moomoo 一样。我想发布这个答案，因为它还修复了重新调整列的大小。

```
var $this = $(this);

            // Resize helper
            $(window).bind('resize', function () {

                //logic to restyle double headers to be responsive
                if ($this.getGridParam('groupHeader') != null) {
                    var gridId = $this.attr('id');

                    var headerTable = $("#gview_" + gridId + " > div.ui-state-default.ui-jqgrid-hdiv > div > table");

                    headerTable.css('width', 'auto');

                    var objHeader = $("#gview_" + gridId + " > div.ui-state-default.ui-jqgrid-hdiv > div > table tr[role=rowheader] th");

                    for (var i = 0; i < objHeader.length; i++) {
                        var col = $("table[id=" + gridId + "] td[aria-describedby=" + objHeader[i].id + "]");
                        var width = col.outerWidth();

                        $(objHeader[i]).css("min-width", width);
                    }
                }

            }).trigger('resize');

//call the resize function when someone resizes a column on the screen
         $this.jqGrid('setGridParam', {
                resizeStop: function (newwidth, index) {
                    $(window).trigger('resize');
                }
            }); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-02T02:19:02.637

检查`jquery.jqGrid.js`文件：

```
setGroupHeaders : function ( o ) { 
.
.
.
$("< th >", {role: 'gridcell'}).css(thStyle).addClass("ui-first-th-"+ts.p.direction).appendTo($firstHeaderRow); 
```

这一行注释掉。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-17T09:35:15.093

在`jquery.jqGrid.js`文件中：

```
setGroupHeaders : function ( o ) { 
.
.
.
change the row
thStyle = { height: '0px', width: ths[i].width+ 'px', display: (cmi.hidden ? 'none' : '')};
to 
thStyle = { height: '0px', width: ths[i].width*0.99+ 'px', display: (cmi.hidden ? 'none' : '')}; 
```

# python - Python ftplib error

> ID：10642950
> 
> 赞同：1
> 
> 时间：2012-05-17T20:22:03.340
> 
> 标签：python, ftp

I have a python program which basically just moves files around between remote FTP server and local machine. I have a bit of code to delete a file on the FTP site, similar to

```
try:
    ftplib_obj.delete(some_file)
except ftplib.error_perm, e:
    print str(e)
    raise 
```

I'm getting a "550: Delete operation failed", and I have no idea why. The most baffling thing is that I can log in manually, with the same credentials, and delete the file no problem. Any idea what the issue could be, or at least, is there a way I can get a more descriptive error message?

NOTE: I've gone through some possible causes of this error, such as file not existing or permission denied, but none of these apply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:07:47.117

你可以做几件事：

1.  设置调试级别（使用 ftplib_obj.set_debuglevel(9)），这可能会对问题提供一些见解。
2.  使用函数运行您在交互模式下运行的 FTP 命令

    ```
    ftplib_obj.voidcmd('DEL *filename*') 
    ```

# javascript - How to get copy styled width from one element to another

> ID：10642951
> 
> 赞同：2
> 
> 时间：2012-05-17T20:22:10.347
> 
> 标签：javascript, width

I know this sounds simple, but here's what i got that's not working.

```
<style type="text/css">#graphelement{width:800px;height:300px;}</style>
<div id="graphlabel2">Right Axis Label</div>
<div id="graphelement"></div>

<script type="text/javascript">
var graphwidth = document.getElementById('graphelement').style.width;
document.getElementById('graphlabel2').style.width = graphwidth;
</script> 
```

My problem is that 'graphwidth' always comes up empty. If i just grab the element's width (element.width), i get 'undefined' in 'graphwidth. All code above is within the body tag, even the initial style tag.

This is part of a larger script, but i can figure the rest out if i can get a width from and element and set it to another. My overall goal: i have an element whose width is set in inline styles. If the page is viewed on a handheld (i.e., screen width is smaller than graphwidth), then i want to set the width of the element and associated elements to screen.width. I seem to be having trouble retrieving and setting element.style.width though.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:36:29.320

`style.width`一个元素是空的*，除非*你通过 javascript 分配它。相反，你想要的是`computedStyle`. 这是一些[文档](https://developer.mozilla.org/en/DOM/window.getComputedStyle)。

`window.getComputedStyle(document.getElementById('graphelement').width)`.

请注意，旧版本的 IE 使用[`currentStyle`](http://msdn.microsoft.com/en-us/library/aa703980%28VS.85%29.aspx). （看来只有 IE9+ 支持 getComputedStyle） `document.getElementById('graphelement').currentStyle.width`

这是一个[jsFiddle](http://jsfiddle.net/9WAXs/)演示如何支持两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:37:00.960

我认为您需要使用[window.getComputedStyle()](https://developer.mozilla.org/en/DOM/window.getComputedStyle)

```
var gLabel = document.getElementById("graphelement");
var style = window.getComputedStyle(gLabel , null);

document.getElementById('graphlabel2').style.width = style.getPropertyValue("height"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:42:10.447

> .style 属性用于获取直接放置在元素上的样式。它不会从您的样式表中计算样式。

**请参考：** [为什么 javascript this.style[property] 返回一个空字符串？](https://stackoverflow.com/questions/9444751/why-javascript-this-styleproperty-return-an-empty-string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:35:23.937

使用`document.getElementById`，您无法获取 css 值，只能设置它们。

我想[这](https://stackoverflow.com/questions/6338217/get-a-css-value-with-javascript)就是你要找的。

# c++ - C++编程打开外部exe（用于处理协议）

> ID：10642952
> 
> 赞同：0
> 
> 时间：2012-05-17T20:22:16.333
> 
> 标签：c++, firefox, sip

我已经下载了一个名为 Express Talk 的软件电话，该程序缺少的一件事是能够使用 sip 协议轻松单击拨号。所以我想我会尽力创建一个简单的 c++ 程序，它会接受点击的号码，然后将该信息传递给 Express Talk 以自动拨打号码，我尝试了一些通常会导致我死掉的事情结尾。我对 c++ 不太熟悉，所以希望这里有人可以帮助我找出问题所在，该文件位于 C:/Program Files/NCHSoftware/Talk/talk.exe 中。为了使用命令行拨打号码，我可以输入 /talk.exe -dial "5555555555" 这将打开程序并拨打号码。

该程序有效，名为 dial.exe（与 talk.exe 位于同一文件夹中）：

```
 #include <stdlib.h>
    #include <windows.h>

    int main ()
    {
        system("start talk.exe -dial 5555555555");
    } 
```

现在的问题：如果我指示 firefox (12.0) 处理到 dial.exe 的 sip 链接，然后尝试单击一个 sip 链接，我会收到错误消息：“Windows 找不到 'talk.exe'。确保您输入了正确的名称，然后再试一次”

在这一点上，我什至不关心将电话号码变量传递给talk.exe，因为我只想确保当我单击一个sip链接时它会打开。我想也许它很难找到talk.exe的原因是因为某种原因mozilla可能会改变程序的目录？我不太确定，所以现在我试图将talk.exe的完整路径放入程序中，所以我尝试了

```
 #include <stdlib.h>
    #include <windows.h>

    int main ()
    {
        system("start \"C:\\Program Files\\NCHSoftware\\Talk\\talk.exe -dial 5555555555\"");
    } 
```

所有这些只是打开一个命令提示符窗口而不实际执行程序。当然，如果我能以某种方式在 Firefox 的应用程序窗口中传递参数，这一切都可以解决，但这是不允许的。任何人都可以帮助我调试吗？我只是不知道该怎么办了。

这是当前代码：

```
 #include <stdlib.h>
    #include <windows.h>
    #include <direct.h>
    #include <string.h>
    #include <string>

    //Written to implement click-to-dial functionality for soft phones (assuming softphones allow arguments to be passed to dial the phone.)
    int main ()
    {
        _chdir("C:\\Program Files\\NCHSoftware\\Talk\\");
    if (argc > 1 && _strnicmp(argv[1], "sip:", 4))
        { // match "sip:" prefix, case insensitive
     std::string cmd = "start talk.exe -dial " + std::string(argv[1]+4);
     system(cmd.c_str());
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:29:49.583

你有你的报价在错误的地方：

```
system("start \"C:\\Program Files\\NCHSoftware\\Talk\\talk.exe\" -dial 5555555555"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:36:51.083

Windows 命令处理器`start`命令有一个怪癖，使使用包含空格的命令行变得困难。

如果第一个参数包含在空格中，则将其视为标题，而不是命令。解决方案是提供一个带引号的虚拟标题：

```
system("start \"caption\" \"C:\\Program Files\\NCHSoftware\\Talk\\talk.exe\" -dial 5555555555"); 
```

或者，只需事先更改工作目录：

```
#include <direct.h>
#include <string.h>
#include <string>

_chdir("C:\\Program Files\\NCHSoftware\\Talk\\");
if (argc > 1 && _strnicmp(argv[1], "sip:", 4)) { // match "sip:" prefix, case insensitive
    std::string cmd = "start talk.exe -dial " + std::string(argv[1]+4);
    system(cmd.c_str());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:08:21.937

最好的方法是使用 Windows API。

查看 MSDN 文档中的 CreateProcess() 示例：

[http://msdn.microsoft.com/en-us/library/ms682512.aspx](http://msdn.microsoft.com/en-us/library/ms682512.aspx)

# jquery - 移动 Safari 链接在触摸后保持焦点

> ID：10642953
> 
> 赞同：34
> 
> 时间：2012-05-17T20:22:25.197
> 
> 标签：jquery, css, ipad, mobile-safari

我的导航很简单。我有一个悬停状态，它为某些文本添加了边框和透明渐变 png 背景，还有一个附加类，当由 jQuery 添加时，它在透明图像后面添加颜色。

如果您在 Web 浏览器中单击以切换类，您会看到颜色进出，但如果您从不将鼠标从按钮上移开，则背景图像会保留。这是预期的行为。

我的问题是，当使用 iPad 时，触摸似乎保持悬停状态，并且 :hover 属性永远不会消失，除非您单击另一个按钮，在这种情况下，持久性 :hover 属性会添加到该按钮，直到按下另一个按钮。

我无法想象我是第一个遇到这个问题的人，但是搜索没有发现任何问题。

帮助？

![在此处输入图像描述](../Images/4d89c95d4e270ae42294037a84340a83.png)

正常 - 悬停 - 活动（通过 addClass() ）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-01T20:42:17.783

如果您使用的是 Modernizr，则非触摸类将添加到非触摸设备的根 html 元素中。然后你可以这样做：

```
a.myclass {
   color:#999;
}

.no-touch a.myclass:hover,
a.myclass:active {
   color:#ccc;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-29T15:31:11.357

Hover 是一个 CSS 伪类，旨在使用指针而不是触摸事件。您通常希望完全避免使用悬停，因为它在移动设备上毫无意义。处理此问题的最简单方法之一是将悬停 CSS 放在媒体查询中。您可以通过定位平板电脑或桌面屏幕来做到这一点，这里有两种解决方案：

1- 针对 iPad：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
    RE.no-touch .my-element:hover {
         /* in here you cancel all hover styles you applied for desktop */ 
    }
} 
```

2- 针对桌面：

```
@media only screen 
and (min-width : 1224px) {
    RE.no-touch .my-element:hover {
         /* in here you apply hover styles that will only work on desktop */ 
    }
} 
```

无论哪种方式都是有效的。如果您注意到 CSS 在某些设备中被错误触发，您可以更改最小和最大宽度的值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-08-08T19:59:12.920

这是一篇旧帖子，但我在 2019 年的今天一直在努力解决这个问题，我找到了这个干净的解决方案，我想与大家分享。

```
<a href="#">Try hovering over me!</a>

@media (any-hover: hover) {
  a:hover {
    background: yellow;
  }
} 
```

基本上我们在这里所做的是在任何具有指针机制的设备中使用悬停。现在有一些带有 html 阅读器的软件可以更好地访问网站，这不应该是一个好主意，停用所有移动设备的 :hover。需要明确的是，任何没有指向机制的设备悬停都不会生效，否则我们应用了 :hover 样式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T10:09:13.977

这就是我通过悬停为我的列表修复它的方式：

CSS：

```
ul {background-color:#f3f3f3;}
li:hover {background-color: #e7e7e7} 
```

jQuery：

```
$(document).ready(function () {
    $('li').on('touchstart', function () { $(this).css('background-color', ''); });
    $('li').on('touchend', function () { $(this).css('background-color', 'inherit'); });
}); 
```

并修复了悬停在后退按钮导航上的问题...

```
<body onunload="$('a').blur();"> 
```

或者

```
$(window).unload( function () { $('a').blur(); } ); 
```

对于初学者来说，卸载事件发生在浏览器离开页面之前。通过在卸载时模糊页面中的所有链接，我能够解除悬停状态。使用后退按钮返回原始页面会显示默认状态下单击的链接。

不幸的是，onclick 事件似乎不会触发卸载，但在 iOS 5 中会刷新？！

卡住：悬停 - [http://www.aaronpinero.com/articulated/2011/05/28/stuck-on-hover/](http://www.aaronpinero.com/articulated/2011/05/28/stuck-on-hover/) 使用 jQuery 替换 - [http://www.nerdboy.co.uk/2009/01/使用 jquery-to-replace-body-onunload/](http://www.nerdboy.co.uk/2009/01/use-jquery-to-replace-body-onunload/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-14T21:30:01.013

我也遇到过这个问题。我的问题出在 iPad 上，如果我点击锚点并稍微滚动，点击事件不会触发，但元素会保留悬停状态 CSS。我认为 iPad 实际上保留了焦点状态并应用 :hover CSS 样式来模拟桌面体验。

一个非 JS 且实用的解决方法是在不需要时不向触摸设备提供悬停样式。触摸设备没有“真正的”悬停状态，但是当元素被聚焦或点击并滚动时，它似乎是模拟悬停。

因此，加载了[Modernizr.js](http://modernizr.com/)后，我将悬停样式移到了 .no-touch 的范围内 -

IE

```
/* Only deliver hover styles to non-touch devices */
.no-touch .my-element:hover {
  /* hover styles */
} 
```

然后，当单击该元素时，我将在其上切换一个活动类。

```
.my-element.active {
  /* active styles */
} 
```

唯一的负面影响是你没有得到“被点击状态”。我还没有研究解决方案，因为它对我的应用程序并不重要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T20:51:42.443

您需要捕捉以下事件

touchstart - 当您的手指触摸屏幕时

touchend - 当你的手指离开屏幕时

考虑悬停和取消悬停，如果您可以发布一些代码，如果您不明白我在说什么，我们可以为您提供更多帮助

```
$('element').on('touchstart', function(){
    // apply hover styles, or better yet addClass() of hover styles
});

$('element').on('touchend', function(){
    // removeClass or remove styles, in here you set it to default so even if it is focused, it makes no difference
}); 
```

给出一些示例代码，touchstart和end应该可以解决问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-11T09:26:51.897

如果您使用的是 SCSS，我建议您执行以下操作：

```
// primary-buttons
.primary-button, .primary-button:visited,
.primary-button:focus {
    background: red;
    color: white;
}

.primary-button:hover {
    background: green; // Only for big screens
    @media(max-width: 768px) {
        background: red;
    }
} 
```

如果您将背景的值重置为初始值，您将不再遇到在设备上按下按钮的问题 <= 768px 分辨率

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2014-09-16T14:36:00.680

这是一种解决方法：

```
var btn = jQuery(".nav-menu ul li:first");
var btn_new = btn.clone(true);
btn.remove();
jQuery(".nav-menu ul").append(btn_new); 
```

# html - Print text within two RegEx

> ID：10642957
> 
> 赞同：0
> 
> 时间：2012-05-17T20:22:49.377
> 
> 标签：html, perl

How can I print the text starting at the occurence of the reg expression $START_REGEX till $END_REGEX?

```
#!/usr/bin/perl -w

use strict;
use warnings;

package HTMLStrip;
use base "HTML::Parser";
use LWP::Simple;

my $START_REGEXP = 'To the current program';
my $END_REGEXP = 'Please choose';

sub text {
    my ($self, $text) = @_;
    print $text;
}

my $p = new HTMLStrip;
$p->parse_file("index.html");
$p->eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:26:37.253

您可以只使用组来获取两个短语之间的值：

```
To the current program(.*)Please choose 
```

然后，该值将存储在`$1,$2, etc`

[这是红字](http://rubular.com/r/ISt70fSsOX)

对于更多perl-cut-and-paste的东西（[来自this SO question](https://stackoverflow.com/questions/3039920/regex-indexed-arrayed-named-capture-groups)）

```
my @values = ($text=~/$START_REGEXP(.*)$END_REGEXP/gm);
print "The first value is $values[0]\n"; 
```

我不是 PERL 开发人员，所以我在推断。如果某种语法关闭，您将不得不自己做进一步的研究。

# c++ - How to evaluate any given expression

> ID：10642959
> 
> 赞同：1
> 
> 时间：2012-05-17T20:22:59.360
> 
> 标签：c++, data-structures, binary-tree

How do you, given any string expression, populate a tree?

I have an assignment that I am stuck on.

I need to evaluate the following expression `(( 5 * 10 ) /2 - (( 2 + 3) + 6))` using any data structure.

Using a stack, I am able to verify that the string is well formed. But how can I add the various values into a tree and then evaluate them in order.

Please give me any hints you may have on how I can read the string `((( 490 * 9 ) / 2)/5/6 - (( 2/4 + 3) + 6 * 5))`

For instance, How do I get the (`-`) to be the root of the three when it is the 15th substring in the input expression? How do I make sure that the (`/`)6 expression happens after (`/`)5 etc.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:28:19.383

您正在寻找的内容在这里提供：http: [//www.codeproject.com/Articles/88435/Simple-Guide-to-Mathematical-Expression-Parsing](http://www.codeproject.com/Articles/88435/Simple-Guide-to-Mathematical-Expression-Parsing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T22:57:59.173

> 评估任何字符串 [表示数学] 表达式

你需要做三件事：

*   为代表您的语言的抽象语法树定义一个类型
*   为您的语法编写递归下降解析器
*   为你的语法写一个解释器

你可以很容易地做到这一点。

我将使用 Haskell 表示法，因为它很简洁，但如果你愿意，你可以翻译它。

适合您语言的类型：

```
data Exp = Op BinOp Exp Exp
         | Lit Int

data BinOp = Plus
           | Times
           | Div
           | Sub 
```

现在，我们可以为这种语言的表达式编写一个解释器：

```
eval :: Exp -> Int
eval (Lit n)      = n
eval (Op o e1 e2) = 
   let v1 = eval e1
       v2 = eval e2
   in case o of
       Plus  -> v1 + v2
       Times -> v1 * v2
       Sub   -> v1 - v2
       Div   -> v1 / v2 -- note, may fail! 
```

好的。这就是您的语言中术语的评估器。现在写一个递归下降解析器......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:58:59.057

这里的其他答案包括将表达式树读入内存，但它们不包括在构建树后评估树。

评估树的一般策略是树应该由节点和叶子组成，其中节点是有孩子的运算符，叶子是常数值。例如，表达式 (((490 * 9) / 2) / 5 / 6 - ((2 / 4 + 3) + 6 * 5)) 转换为树

```
                      -
                  / \
                 / \
              div +
             / \ / \
          格 6 + *
         / \ / \ / \
      分区 5 分区 3 6 5
     / \ / \
    * 2 2 4
  / \
450 9

```

要评估这棵树，请从根开始。您首先递归地评估左子树和右子树，然后将运算符应用于两个子树评估的结果。每个叶子（数字）都对自己进行评估。

在这种情况下，您将从根 (-) 开始，将左子树评估为 73.5，将右子树评估为 33.5，然后减去得到最终结果 40。

作为一个更精确的例子，让我们看看在进行了几层递归调用之后，树最左边的节点。叶 450 计算为 450，叶 9 计算为 9，节点`(* 450 9)`（以类似 Lisp 的前缀表示法编写树的节点）计算为 4050。因此，从节点 开始`(/ (* 450 9) 2)`，左递归调用计算为 4050，而右递归调用计算为 4050递归调用的计算结果为 2，这意味着整个节点的计算结果为 2025。只要在组合值之前从节点进行递归调用，并确保每个叶子都对自身进行计算，树的计算就很简单了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T20:32:56.733

编辑第二个：操作澄清，查看其他答案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T20:30:08.633

括号表示操作的顺序，因此类似于您使用堆栈来确保所有匹配的内容，您可以解析出这些匹配项并将它们用作树中的元素来创建用于评估的层次结构，其中运算符是每个宽度的子级 -括号匹配的明智级别。

# google-drive-api - Google 驱动器 oauth 令牌错误

> ID：10642971
> 
> 赞同：0
> 
> 时间：2012-05-17T20:24:01.480
> 
> 标签：google-drive-api

我正在运行 dredit 示例，第一次启动应用程序时，sql 表为空，应用程序插入了一个值，一切正常，但我截断了表，现在“refresh_token”为空，应用程序崩溃。为什么现在为空？是不是和第一次跑的情况一样？为什么截断使身份验证崩溃？

> [2012 年 5 月 15 日 22:56:59] 验证和授权用户时出错：获取 OAuth2 访问令牌时出错，消息：'invalid_grant'
> 
> [2012 年 5 月 15 日 22:57:00] 从数据库检索用户或更新刷新令牌时出错：SQLSTATE[23000]：违反完整性约束：1048 列“刷新令牌”不能为空
> 
> [2012 年 5 月 15 日 22:57:00] PHP 致命错误：未捕获的异常 'PDOException' 带有消息'SQLSTATE [23000]：完整性约束违规：1048 列 'refresh_token' 不能为 null' 在 /var/www/drivecrypt/ www/auth_handler.php:214
> 
> 堆栈跟踪：
> 
> #0 /var/www/drivecrypt/www/auth_handler.php(214): PDOStatement->execute()
> 
> #1 /var/www/drivecrypt/www/auth_handler.php(244): AuthHandler->CreateUserInDb(Object(Userinfo), NULL)
> 
> #2 /var/www/drivecrypt/www/auth_handler.php(293): AuthHandler->GetUser(Object(Userinfo), NULL)
> 
> #3 /var/www/drivecrypt/www/index.php(48): AuthHandler->VerifyAuth() #4 {main}
> 
> 在第 214 行抛出 /var/www/drivecrypt/www/auth_handler.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:51:36.970

您应该在 AuthHandler->GetUserFromDb 中捕获异常并将 null 返回给 AuthHandler->GetUser。但是，这样做会在会话中创建一个带有空刷新令牌的新用户条目，并且后续请求将失败并返回 401。

要解决此问题，您需要确保在访问[https://code.google.com/p/google-drive-sdk-samples/source/browse/php/auth_handler时未设置 $_SESSION['credentials'] .php#335](https://code.google.com/p/google-drive-sdk-samples/source/browse/php/auth_handler.php#335)，以便用户将被重定向到 OAuth 授权页面并再次授予访问权限以请求新的刷新令牌。

# sql - sql查询获取重复值

> ID：10642975
> 
> 赞同：-2
> 
> 时间：2012-05-17T20:24:16.233
> 
> 标签：sql, sql-server, tsql

嗨，我正在使用以下查询。

```
Create proc [dbo].[usp_getPropertyByWord]  
(@Description nvarchar(200))  
as  

set @Description=replace(@Description,'   ',' ')  
set @Description=replace(@Description,'  ',' ') 

create table #temp(name varchar(100)) 
insert into #temp valueS(@Description)
insert into #temp 
SELECT word FROM dbo.splitStringChars(@Description,' ',',')
delete #temp where name in('',' ',',')

create table #temp1(property_id int,property_number nvarchar(15),name nvarchar(500),short_desciption nvarchar(2000),description nvarchar(4000),address1 nvarchar(200),address2 nvarchar(200),city nvarchar(50),locality nvarchar(100),zip nvarchar(8)) 
insert into #temp1(property_id,property_number,name ,short_desciption,description,address1,address2,city,locality,zip)
SELECT distinct(p.property_id),p.property_number,p.name,p.short_description,p.description,ta.address1,ta.address2,
tc.city_name,cl.City_Locality_Name,ta.zip
FROM tbl_property p  
INNER JOIN 
tbl_PropertyAddress ta on ta.property_id=p.property_id
inner join tbl_City tc on ta.city=tc.city_id
inner join  tbl_City_Locality cl on cl.City_id=tc.city_id
inner join
(SELECT distinct(name) FROM #temp) B  
ON (p.name=@Description or p.name LIKE '%' + B.name + '%' or p.short_description like '%' + B.name + '%' or p.description like '%' + B.name + '%'
or ta.address1 LIKE '%' + B.name + '%' or ta.address2 LIKE '%' + B.name + '%' or tc.City_Name LIKE '%' + B.name + '%')  
where  NOT EXISTS(select t.* from #temp1 t where t.property_id=p.property_id and t.property_number=p.property_number and t.name=p.name and t.short_desciption=p.short_description and t.description=p.description and t.address1=ta.address1 and t.address2=ta.address2 and t.city=tc.City_Name and t.locality=cl.City_Locality_Name and t.zip=ta.zip)

  delete  #temp
  select  *  from #temp1
GO 
```

如果我为@Description 提供**“'hyderbad hyd,hgf,hyds'”**，我将获得 16000 条记录，但我的表中只有 130 条记录。

我从 splitStringChars 函数中获取值

```
hyderbad     
hyd    
hgf    
hyds 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:09:18.200

你知道 TSQL 吗？

```
Create proc [dbo].[usp_getPropertyByWord]  
(@Description nvarchar(200))  
as  

set @Description=replace(@Description,'   ',' ')  
set @Description=replace(@Description,'  ',' ') 

create table #temp(name varchar(100)) 
insert into #temp valueS(@Description)
insert into #temp 
SELECT word FROM dbo.splitStringChars(@Description,' ',',')
delete #temp where name in('',' ',',')

SELECT p.property_id,p.property_number,p.name,p.short_description,p.description
-- ,ta.address1,ta.address2,tc.city_name,cl.City_Locality_Name,ta.zip
FROM tbl_property p  
-- INNER JOIN 
--tbl_PropertyAddress ta on ta.property_id=p.property_id
--inner join tbl_City tc on ta.city=tc.city_id
--inner join  tbl_City_Locality cl on cl.City_id=tc.city_id
inner join
(SELECT distinct(name) FROM #temp) B  
ON (p.name=@Description or p.name LIKE '%' + B.name + '%' or p.short_description like '%' + B.name + '%' or p.description like '%' + B.name + '%'
-- or ta.address1 LIKE '%' + B.name + '%' or ta.address2 LIKE '%' + B.name + '%' 
-- or tc.City_Name LIKE '%' + B.name + '%'
)  
where  NOT EXISTS(select t.* from #temp1 t where t.property_id=p.property_id and t.property_number=p.property_number and t.name=p.name and t.short_desciption=p.short_description and t.description=p.description 
-- and t.address1=ta.address1 and t.address2=ta.address2 and t.city=tc.City_Name and t.locality=cl.City_Locality_Name and t.zip=ta.zip
) 
```

# ruby-on-rails-3 - 来自 Heroku 的 Sendgrid Multipart 电子邮件空白

> ID：10642978
> 
> 赞同：0
> 
> 时间：2012-05-17T20:24:49.363
> 
> 标签：ruby-on-rails-3, heroku, actionmailer, sendgrid

我只使用在我的 Rails 3.1.4 应用程序中工作的 html 电子邮件，但我决定添加纯文本电子邮件以使其成为多部分，现在电子邮件到达空白。我也开始使用 Sendgrid 的 Heroku 插件——不确定这是否是其中的一部分。

当我查看我的 heroku 日志时，我可以看到 .erb 和 .html.erb 这两个视图都成功呈现，并且我没有看到任何错误。电子邮件到达，但 Yahoo! 中的正文是空白的 在Hotmail中它只说（没有做更多的测试）：

```
This is a multi-part message in MIME format...

---- 
```

这是我的邮件：

```
class Notifier < ActionMailer::Base

  helper :application
  default_url_options[:host] = "foo.com"

  # email on new user registration to verify user
  def verification_instructions(user)
     subject       "Email Verification"
     from          'Bar <info@bar.com>'

     @user = user
     recipients    "#{user.first_name} <#{user.email}>"
     sent_on       Time.now
 @url  = "http://bar.com/user_verifications_controller/show/#{user.perishable_token}"
  end 
```

文本版本 (.erb)

```
Hi <%= @user.username %>, thanks for signing up

Please click the following link to verify your email address:                                           
<%= @url %>

If the above URL does not work, try copying and pasting it into your browser. If you continue to have problems, please feel free to contact us. 
```

[我在这里发布了html。](https://gist.github.com/2721360)

此外，当我在开发中从控制台发送电子邮件时，我可以查看日志并查看呈现电子邮件的内容。 [我把输出放在这里。](https://gist.github.com/2765790)尝试了另一封电子邮件，以确保它不是特定于一封电子邮件的问题[2](https://gist.github.com/2765790)

在此先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:15:33.497

我也刚开始使用 Sendgrid....

我正在使用 sendgrid gem

我的邮件有

顶部的“包括 SendGrid”

以及在方法结束时对 mail(subject: "Yadda", to: "recipient@mail.com") 的 exclpicit 调用。

# javascript - Eclipse中的PhoneGap Android项目参考

> ID：10642980
> 
> 赞同：1
> 
> 时间：2012-05-17T20:25:01.117
> 
> 标签：javascript, android, eclipse, cordova

我正在尝试使用 PhoneGap 一次完成三个项目——一个移动网站、一个 Android 应用程序和一个 iOS 应用程序。我现在开始这个项目的 Andriod 部分，当我在 Eclipse 中构建我的 Android 应用程序时，我不想将文件从我的移动站点项目复制到 PhoneGap assets/www 目录中。Android 和移动站点项目都在 Eclipse 中的同一个工作区中。有没有一种方法可以引用我的移动站点项目，以便在我在 Eclipse 中构建时在 Android PhoneGap 项目的 assets/www 文件夹中构建它？这是 Eclipse 的本机功能还是我将不得不使用一些构建脚本？有任何想法吗？

![在此处输入图像描述](../Images/3f228f57b882ab41042c0d5e9367d6d1.png)

所以在这张图片中，我希望 www 文件夹在构建时被另一个整个项目替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:18:16.937

如果您使用的是基于 UNIX 的系统，则可以将 www 符号链接到您的移动网站的内容。但是，Eclipse 在检测文件在其环境之外发生更改方面确实很糟糕，因此您需要经常执行项目-> 刷新以确保您拥有最新的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:21:59.447

我不认为您可以将 Web 项目的引用创建到资产/www。

但我可以建议你一件事可以实现：- 在 www 文件夹中制作 web 项目的副本，现在在此文件夹中对 web 和 android 进行所有编辑。

你甚至可以在网站上使用 www 文件夹。

# ruby - 在课堂上使用haml_tag、haml_concat？

> ID：10642984
> 
> 赞同：0
> 
> 时间：2012-05-17T20:25:40.743
> 
> 标签：ruby, haml

我`class`在 Haml 中定义了一个，我希望能够在这个类中使用 Haml 助手。例如：

```
- class Whatever
  - def self.write
    - haml_concat "something"

- Whatever.write 
```

理想情况下，`Whatever.write`会输出`"something"`到模板，但它只是以`undefined method 'haml_concat' for Haml::Engine::Whatever:Class`.

完整的堆栈跟踪：

```
haml_test.haml:5:in `write': undefined method `haml_concat' for Haml::Engine::Whatever:Class (NoMethodError)
    from haml_test.haml:8:in `block in render'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/lib/haml/engine.rb:191:in `eval'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/lib/haml/engine.rb:191:in `render'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/lib/haml/exec.rb:281:in `process_result'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/lib/haml/exec.rb:41:in `parse'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/lib/haml/exec.rb:21:in `parse!'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/gems/haml-3.1.4/bin/haml:9:in `<top (required)>'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/bin/haml:19:in `load'
    from /home/fraser/.rvm/gems/ruby-1.9.3-p125/bin/haml:19:in `<main>' 
```

我怎样才能让它正常工作？我试过同时使用`extend`and `include` `Haml::Helpers`，但它们也都失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:37:47.223

尝试这个：

```
- @self = self
- class Whatever
  - def self.write
    - @self.haml_concat "something"

- Whatever.write 
```

但是，[同样](https://stackoverflow.com/a/10627658/986282)，HAML 是一种标记语言，您不应该在其中声明类。这也违反了MVC的原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:45:20.363

传递事物本身不是更容易吗？

```
= "something #{@my_object.my_method}"
= @my_object.my_other_method 
```

我错过了什么？我不清楚你想要完成什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:34:55.003

您可以尝试传入haml上下文。我不知道这是否可行，不知道它是否适合您的目的，但这是一个想法（我没有办法测试它）。

```
- class Whatever
  - def self.write(ctx)
    - ctx.haml_concat "something"

- Whatever.write(self) 
```

如果这确实有效（同样，我真的不知道），您还可以尝试将上下文作为 What 类级别的实例变量传递，这样您就可以使用您的 What writer，而不必每次都传递 haml 上下文。

# android - json async load msgs first 15 然后在列表末尾再加载 15 个，依此类推..直到最后

> ID：10642985
> 
> 赞同：0
> 
> 时间：2012-05-17T20:25:43.347
> 
> 标签：android, json, asynchronous

我有异步列表视图，其中 json 被解析并显示在列表中。

1.我想先加载15条消息。2.在列表的末尾应该有一个页脚 3.单击页脚或到达页脚后，它应该从不同的 url 加载下一个 15 条消息，而不是第一个 url。

如何在同一个列表中加载下一个 15 条消息，但这次从不同的 url 异步加载。

到目前为止我提到的链接：http: [//p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/)

附上代码：

```
public class btn extends ListActivity {
    /** Called when the activity is first created. */
    SimpleAdapter adapter;
    JSONArray  earthquakes;
    String jString;
    ArrayList<HashMap<String, String>> mylist;
    String magni;
    ProgressDialog pd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);
        mylist = new ArrayList<HashMap<String, String>>();

        new loadsomestuff().execute();

    }

    public class loadsomestuff extends AsyncTask<String, Integer, String>{

        protected void onPreExecute() {
            pd=new ProgressDialog(btn.this);
            pd.setTitle("Loading......Please wait");
            pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pd.show();

        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            jString="{\"earthquakes\": [{ \"eqid\": \"c0001xgp\", \"magnitude\": 8.8, \"lng\": 142.369, \"src\": \"us\", \"datetime\": \"2011-03-11 04:46:23\", \"depth\": 24.4,\"lat\": 38.322 },{ \"eqid\": \"2007hear\",\"magnitude\": 8.4,\"lng\": 101.3815,\"src\": \"us\", \"datetime\": \"2007-09-12 09:10:26\",\"depth\": 30,\"lat\": -4.5172},{ \"eqid\": \"2007hear\",\"magnitude\": 8.5,\"lng\": 101.3815,\"src\": \"us\", \"datetime\": \"2007-09-12 09:10:26\",\"depth\": 30,\"lat\": -4.5172},{ \"eqid\": \"2007hear\",\"magnitude\": 8.6,\"lng\": 101.3815,\"src\": \"us\", \"datetime\": \"2007-09-12 09:10:26\",\"depth\": 30,\"lat\": -4.5172},{ \"eqid\": \"2007hear\",\"magnitude\": 8.7,\"lng\": 101.3815,\"src\": \"us\", \"datetime\": \"2007-09-12 09:10:26\",\"depth\": 30,\"lat\": -4.5172}]}";
            //   JSONObject  json=JSONfunctions.getJSONfromURL(jString);
            JSONObject jObject = null;
            try {
                jObject = new JSONObject(jString);
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
            try{

                earthquakes = jObject.getJSONArray("earthquakes");

                for(int i=0;i<earthquakes.length();i++){                        
                    HashMap<String, String> map = new HashMap<String, String>();    
                    JSONObject e = earthquakes.getJSONObject(i);

                    magni= e.getString("magnitude");

                    map.put("id",  String.valueOf(i));
                    map.put("name", "Earthquake name:" + e.getString("eqid"));
                    map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
                    mylist.add(map);

                    publishProgress(((int) ((i / (float) earthquakes.length()) * 100)));
                }   
                adapter = new SimpleAdapter(getBaseContext(), mylist , R.layout.main, 
                        new String[] { "name", "magnitude" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

            }catch(JSONException e)        {
                Log.e("log_tag", "Error parsing data "+e.toString());
            }

            return null;
        }
        protected void onProgressUpdate(Integer...integers) {

            pd.incrementProgressBy(integers[0]);

        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            setListAdapter(adapter);

            pd.dismiss();

            final ListView lv = getListView();
            lv.setTextFilterEnabled(true);  
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {  
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                    Toast.makeText(btn.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

                }
            });
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:34:14.497

只需下载新消息，将它们添加到适配器的 myList 列表中，然后在 listView 上运行 notifyDataSetChanged()。请记住，更改适配器的数据集（将项目添加到 ArrayList，或者只是通知适配器）应该在 UI 线程中进行。

# asp.net-mvc - 似乎分号有时在 WebForms 视图引擎中是可选的

> ID：10642986
> 
> 赞同：1
> 
> 时间：2012-05-17T20:25:49.853
> 
> 标签：asp.net-mvc

为什么我需要一个分号来结束一个

```
<% Html.BeginForm(); %> 
```

但结束时不需要分号

```
<%= Html.TextBox("Name") %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:28:11.490

您的第一个示例是调用 Html 扩展方法，它具有写出内容的副作用。

你的第二个例子是 using `=`，它是`Response.Write()`. `.TextBox()`没有写入响应的副作用，因此您必须使用`=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:31:10.140

代码块可以有很多行代码，所以需要分号。

```
<% Html.BeginForm();
   DoSomeThingElse();
%> 
```

当您使用时，`<%= %>`您正在评估单个语句并输出结果。

# php - 如何为此页面创建一个 PHP“编辑”表单，以便用户可以编辑他们的选择？

> ID：10642988
> 
> 赞同：-1
> 
> 时间：2012-05-17T20:26:03.143
> 
> 标签：php, html

我了解如何在开始时包含数据库连接以及如何将此信息发送到数据库。

我的问题是检索编辑信息，包括数据库中值为“数组”的复选框。（可能是一个单独的问题）

```
 <html>
 <body>
 <form action="a php page" method="post">
 <center>First Name:<input type="text" size="12" maxlength="12" name="FirstName"><br />
 <center>Last Name:<input type="text" size="12" maxlength="12" name="LastName"><br />
 <br/>
 <br/>
 <p>
 How many Things?
 <select name="Things">
 <option value="1">1</option>
 <option value="2">2</option>
 <option value="3">3</option>
 </select>
 <br/>
 <br/>
 </p>
 <br/>
 <center>Stuff<br />
 Yes<input type="radio" value="Yes" name="Stuff"><br />
 No<input type="radio" value="No" name="Stuff"></center>
 <br />
 <br />
 Extras<br />
 <center>
 <input type="checkbox" name="Extras[]" value="E1" />Peppers<br />
 <input type="checkbox" name="Extras[]" value="E2" />Onions<br />
 <input type="checkbox" name="Extras[]" value="E3" />Lettuce<br />
 </center>
 <br/>
 <br/>
 Others?
 <select name="Stuff">
 <option value="That">That</option>
 <option value="Third">Third</option>
 </select>
 </p>
 <br/>
 <input type="submit" name="formSubmit" value="Click to Submit Order" />
 <center
 </form>

 <center> <the server">Click Here for Orders<center>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:32:42.867

发送信息 `SET`；从数据库中获取信息是`SELECT`，编辑数据库中的信息是`UPDATE`

# ios - 如果在 App Store 证书/密钥对代码签名过程中存在任何“永久搞砸”情况怎么办？

> ID：10642989
> 
> 赞同：6
> 
> 时间：2012-05-17T20:26:03.747
> 
> 标签：ios, app-store, certificate, private-key, public-key

我的公司与其他几家公司合作处理他们的 iPhone 开发需求，在许多情况下，其他公司已经在 App Store 上拥有一些现有的应用程序。

我们也为他们处理 App Store 提交，并且在他们已经拥有现有应用程序的情况下，他们的 iOS 开发中心帐户已经创建了分发证书。在这种情况下，我们必须获取他们（或他们雇用的第三方开发人员）创建证书时生成的密钥对。我一直认为这是与 App Store 合作的必要过程。

但随着时间的推移，我发现自己想知道一些事情

1.  证书过期时会发生什么？我知道我们创建了新的应用程序，但这意味着 App Store 上的应用程序使用与创建它们的证书/密钥对不同的证书/密钥对进行签名。这很重要吗？或者即使使用新的证书/密钥对（来自同一个 iOS 开发中心帐户），我仍然可以更新 App Store 上的现有应用程序吗

2.  如果现有证书的密钥对丢失会怎样？假设该公司之前制作了一个应用程序，但他们之前使用的 Macintosh 被陨石击中。当然没有备份。我必须撤销并重新创建证书 - 这对现有已发布的应用程序意味着什么？如果我拥有该应用程序的源代码并且必须发布更新，我能做到吗？

基本上我在问：是否有任何与 iOS 开发和分发证书有关的“永久搞砸”场景会阻止您更新现有应用程序？我知道，如果您不备份 Android 开发中的密钥库，那么您只会在发布更新方面感到厌烦，但是有没有办法完全搞砸 iOS 开发？

还有一个额外的问题：如果我可以撤销开发证书并重新颁发它们而不会产生任何后果，它是否一直这样工作？还是他们修改了流程？我可以看到“证据链”总是与 iOS 开发中心代理帐户相关联，这将是事情的根源，但这是新事物吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T22:40:53.287

分发证书仅用于提交到 iTunes Connect（和 Ad Hoc 的东西）。一旦获得批准，Apple 会在将应用程序放入 App Store 之前使用不同的未过期证书对应用程序进行签名，因此开发人员的分发证书的状态不再重要。

即使开发人员的证书和 iOS 注册过期，下载或购买的应用程序仍将在客户的设备上运行。但是，如果开发人员希望他们的应用在 App Store 中保持可见，他们必须及时重新注册（每年 99 美元）。

通常，分发证书每年到期一次，可能会更频繁一些，可以创建新的，并且可以使用最新（和有效）的分发证书提交现有应用程序的更新。

如果您丢失了密钥对，团队负责人将不得不撤销并生成新的证书和配置，并更新他们所有的钥匙串和 Xcode 配置以及可能的项目/目标设置。哪些证书和规定是有效的，哪些是无效的，这让一些开发人员非常头疼。

# mysql - MySQL全文搜索：如何找出在哪一列中找到了搜索查询？

> ID：10642993
> 
> 赞同：1
> 
> 时间：2012-05-17T20:26:24.033
> 
> 标签：mysql, full-text-search

这是我的查询：

```
$sql = "SELECT *
          MATCH(textEN,textDE,textPT,titlePT,titleDE,titleEN) AGAINST('$search') AS score
          FROM $main_db.ff_pages
        WHERE MATCH(textEN,textDE,textPT,titlePT,titleDE,titleEN) AGAINST('$search')
        ORDER BY score DESC"; 
```

一切正常。如您所见，我有一个多语言网站，这就是为什么我需要知道在哪些列中找到了搜索表达式。例如，我想知道在“textEN”列中找到了“Solar system”这个表达，以便在搜索结果中显示该网站的英文版本。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:45:16.883

我认为您必须分别[`MATCH() ... AGAINST`](http://dev.mysql.com/doc/en/fulltext-search.html#function_match)为每一列执行（尽管这样做的一个优点是您可以量化每列对总分的贡献）。

最大限度地利用 MySQL 相关性分数的附加性质及其对确定性函数的缓存，我会这样做：

```
SELECT   *,
         MATCH(textEN)  AGAINST('$search') AS score_textEN,
         MATCH(textDE)  AGAINST('$search') AS score_textDE,
         MATCH(textPT)  AGAINST('$search') AS score_textPT,
         MATCH(titleEN) AGAINST('$search') AS score_titleEN,
         MATCH(titleDE) AGAINST('$search') AS score_titleDE,
         MATCH(titlePT) AGAINST('$search') AS score_titlePT,
FROM     $main_db.ff_pages
WHERE    MATCH(textEN)  AGAINST('$search')
      OR MATCH(textDE)  AGAINST('$search')
      OR MATCH(textPT)  AGAINST('$search')
      OR MATCH(titleEN) AGAINST('$search')
      OR MATCH(titleDE) AGAINST('$search')
      OR MATCH(titlePT) AGAINST('$search')
ORDER BY score_textEN  + score_textDE  + score_textPT
         score_titleEN + score_titleDE + score_titlePT DESC 
```

# .net - .net 中的错误：已用尽允许的 157286400 字节内存大小（尝试分配 10528769 字节）

> ID：10642994
> 
> 赞同：1
> 
> 时间：2012-05-17T20:26:24.110
> 
> 标签：.net, web-services, memory, soap, size

我正在尝试使用来自我们第三方网络服务之一的网络方法到我的 vb.net 代码中，以使用他们的 .net API 检索信息。

当我尝试

```
Dim records() As WEB_API.DBRecord
records = api.GetView(guid, viewid, dbid, offset, 10000) 
```

我从 webservice(SOAP) 得到错误说：

```
System.Web.Services.Protocols.SoapHeaderException: Allowed memory size of 157286400 bytes 
   exhausted (tried to allocate 10528769 bytes)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage 
     message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at comp.WEB_API.XYZ.GetView(String db_guid, Int32 view_db, Int32 space_id, Int32 offset, Int32 count) 
```

我有什么需要解决的吗？你认为是什么原因。让我知道如何解决此问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:21:59.320

尝试将内存限制增加到 150Mb 以上，或者尝试每次提取更少的记录。您获得的是 OOM，而不是第三方 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:33:19.413

错误很可能发生在您的第三方 Web 服务上。您正在请求大量数据，但它们没有受到限制，并且内存不足。

# c++ - 相当于 C++ 中的 python:scipy.optimize()？

> ID：10642999
> 
> 赞同：6
> 
> 时间：2012-05-17T20:26:47.907
> 
> 标签：c++, python, optimization, scipy, quantlib

具体来说，我正在寻找像 scipy.optimize.fmin_l_bfgs_b 这样的优化器功能。有人可以帮帮我吗？还是提供指点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T22:00:52.760

dlib C++ 库中有许多优化器，包括 L-BFGS [。](http://dlib.net/optimization.html)它是免费的，而且优化工具只是标题，因此无需安装或配置。还有一个相关的[示例程序](http://dlib.net/optimization_ex.cpp.html)向您展示如何使用 L-BFGS 优化器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-29T20:19:33.877

如果仍然有人在寻找，请使用[LBFGS++](https://lbfgspp.statr.me/)，他们还介绍了最近的 Box-constrained 版本。我已经使用了一段时间。你可以在他们的官方网站上找到一些很好的例子。