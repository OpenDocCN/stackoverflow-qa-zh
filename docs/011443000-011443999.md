# StackOverflow 问答 11443000-11443999

# python - 正则表达式在 Rubular 中通过，但在 Python 中不通过

> ID：11443000
> 
> 赞同：1
> 
> 时间：2012-07-11T23:24:28.420
> 
> 标签：python, regex, python-3.x

```
import re
import urllib.request
file_txt = urllib.request.urlopen("ftp://ftp.sec.gov/edgar/data/1408597/0000930413-12-003922.txt")
pattern_item4= re.compile("(Item\\n*\s*4.*)Item\\n*\s*5")
print(re.search(pattern_item4,bytes.decode(f)))
#Returns None 
```

这个正则表达式以 rubular 形式返回我想要的，但显然它没有达到 Python 的预期效果。有人能帮我解决这个问题吗？正则表达式的目的基本上是提取 item4 和 item5 之间的内容。

谢谢

![在此处输入图像描述](../Images/0470bad7a7022c2bcdbca056fe2522e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:27:12.667

尝试使用原始字符串

```
re.compile (r"(Item\\n*\s*4.*)Item\\n*\s*5") 
```

我猜这与你逃避`\n`. 但是，如果不确切知道您期望匹配的是什么，就不可能说出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:06:40.743

您需要 re.DOTALL 标志，否则`.`与换行符不匹配。要在 EOL 匹配`Item`，您可以使用`$`re.MULTILINE 标志：

```
pattern = re.compile(r"(Item$\s*4.*)Item$\s*5", re.S | re.M) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:48:37.590

知道换行符的位置并不能帮助您找到匹配项，因此无需`\n`专门匹配；它只是另一个空白字符。试试这个：

```
r"(?s)Item\s+4\..*?(?=Item\s+5\.)" 
```

`(?s)`使`.`匹配换行符，因此`.*?`会消耗所有内容，直到前瞻 -`(?=Item\s*\d+\.)`发现下一个“项目”条目的开头。如果您想遍历所有项目，可以将`4`and`5`替换为`\d+`.

# html - 叠加多张图片

> ID：11443002
> 
> 赞同：7
> 
> 时间：2012-07-11T23:25:06.907
> 
> 标签：html, css

我有三个要叠加的图像（使用 HTML + CSS，如果可能，我*不想*使用 javascript）：

![图像1](../Images/6aacc3425bcab129bce4d6e905da5df8.png) ![图2](../Images/a8a481b9ad2e97b9b0c42f42c8cd48f9.png) ![图3](../Images/a08c9b92c4572005e4ba4f0f73c77de7.png)

这是我想要达到的结果： ![我的首选结果](../Images/15cdbf3b22f2c48f0fb4a704026e4ff6.png)
[image4]

这是我尝试过的：

CSS：

```
.imageContainer {
    position: relative;
}

#image1 {
    position: absolute;
    top: 0;
    z-index: 10;

    border: 1px solid blue; 
}
#image2 {
    position: absolute;
    top: 0;
    z-index: 100;

    border: 1px solid fuchsia; 
}
#image3 {
    position: absolute;
    top: 0;
    z-index: 1000;

    width: 10%;
    height: 10%;

    border: 1px solid green; 
} 
```

HTML：

```
<div class="imageContainer">
    <img id="image1" src="http://i.stack.imgur.com/Es4OT.png"/>
    <img id="image2" src="http://i.stack.imgur.com/WQSuc.png"/>
    <img id="image3" src="http://i.stack.imgur.com/Xebnp.png"/>
</div>​ 
```

**image1**：“主”图像（ **image1**应该为*imageContainer 设置最大高度和最大宽度 -*上面的se **HTML**） to image1 [绿色边框]
**`horizontal-align: center;``top: 0;`
**`horizontal-align: center;`**** 

 ****我容易出错的 HTML + CSS 导致了这个： ![在此处输入图像描述](../Images/b65783b3b4c1e4ebf93a1b58850bb3ad.png)

我无法弄清楚我的 CSS 应该如何。我应该怎么做才能获得像 [image4] 这样的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T05:53:42.637

您可以使用一个 div 和更多背景来制作它，例如：

```
#someDiv 
{
  background: url('topImage.jpg') center,
            url('imageInTheMiddle.jpg') 0px 0px,
            url('bottomImage.jpg') /*some position*/;
} 
```

这是显示它的更简单方法。当然，在我放置定位值的地方，您必须添加您的定位值。

**更新**

在您之后所说的情况下，我认为您可以在背景中使用 3 个绝对定位 div，并使用 css3`transform`属性对其进行操作。它使您可以使用元素进行旋转、缩放等等。你也可以用 javascript 来操作它。

[有关 css3 转换的更多信息](http://www.w3schools.com/cssref/css3_pr_transform.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T05:39:52.673

使图像透明

再次为透明问题更新了代码 为图像旋转更新了代码 我已经为量角器图像（image2）应用了图像旋转希望对您有所帮助

```
<style type="text/css">
    .imageContainer {
        position: relative;
        width:165px;
        height:169px;
    }

    #image1 {
        position: absolute;
        top: 0;
        z-index: 10;
        width:120px;
        height:120px;
        border: 1px solid blue; 
    }
    #image2 {
        position: absolute;
        top: 0;
        z-index: 20;
        border: 1px solid fuchsia;
        opacity:0.6;
    filter:alpha(opacity=60); /* For IE8 and earlier */

    /*for adding image rotation */
       -webkit-transform: rotate(90deg); /*//For chrome and safari*/
        -moz-transform: rotate(90deg);  /*//For ff*/
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); /*// For ie */
    /* End for adding image rotation */

    }
    #image3 {
        position: absolute;
        top: 0;
        z-index: 30;
        width: 40%;
        height: 40%;
        border: 1px solid green; 
        left:70px;
        opacity:0.9;
    filter:alpha(opacity=90); /* For IE8 and earlier */

    }

    </style>

    <form name="frmabc"  action="" method="post">
<div class="imageContainer">
    <img id="image1" src="Es4OT.png"/>
    <img id="image2" src="WQSuc.png" />
    <img id="image3" src="Xebnp.png" />
</div>
</form> 
```****

# javascript - 服务器端之前的客户端验证

> ID：11443006
> 
> 赞同：0
> 
> 时间：2012-07-11T23:25:24.163
> 
> 标签：javascript, jquery, asp.net, postback

我的问题：

1) 回发总是发生

2）这是查看 requiredFieldValidator 是否是有效客户端的正确方法吗？

我想要什么：

用户单击可见的单击按钮。

这会调用 isValid()。

如果页面有效，则调用服务器端函数。

如果页面无效，请发出警报。

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" ToolTip="Submit" CausesValidation="true" CssClass="blueNew buttonNew" 
                OnClientClick="isValid(); return false;" />

<div style="display: none;">
    <asp:Button ID="hiddenBtnSubmit" runat="server"  OnClick="btnSubmit_Click" />
 </div>

 <script>
function isValid() {
    if (Page_IsValid) {
        var button = document.getElementByID("<%=hiddenBtnSubmit.ClientID%>");
        button.click();
    } else {
        if (!reqFirstName.IsValid) {
            alert("First name is invalid");
        }
    }      
}
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:32:05.627

不，您只需要像这样添加验证器：

```
<asp:TextBox runat="server" ID="txtEmail" />
<asp:RequiredFieldValidator
    ErrorMessage="The email is required"
    ToolTip="The email is required"
    Text="(*)"
    ControlToValidate="txtEmail"
    runat="server" />
<asp:ValidationSummary runat="server" DisplayMode="BulletList" ShowMessageBox="true" /> 
```

每当您尝试提交表单时，验证都会在客户端执行，您无需手动执行验证

输出将类似于：

![在此处输入图像描述](../Images/633de5b2a742dab6d5589edc7d6618dd.png)

## 编辑 1

```
<script type="text/javascript">
    function validate() {
        var val = Page_ClientValidate('');
        if (!val) {
            for (i = 0; i < Page_Validators.length; i++) {
                if (!Page_Validators[i].isvalid) {
                    $("#" + Page_Validators[i].controltovalidate).qtip();
                }
            }
        }

        return val;
    }
</script>

<asp:Button OnClientClick="return validate();" Text="Post" runat="server" /> 
```

# java - 在循环/尝试/捕获 java 中使用外部变量

> ID：11443007
> 
> 赞同：0
> 
> 时间：2012-07-11T23:25:31.613
> 
> 标签：java

假设我们有：

```
final JList list = new JList(buffer.toArray()); 
```

我想这样声明一个 JList，但是我从 SQL 查询中获取缓冲区变量，因此，在 try 循环中。有什么方法可以使用在其中的 try/catch 之外声明的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:27:47.367

再次，正如我在您的[另一个线程中指出的那样，在循环或块](https://stackoverflow.com/questions/11441963/jlist-not-showing-on-jscrollpane)*之前*声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:31:00.980

通过在 try 块之外声明变量，如下所示：

```
JList list = null;
try {
    list = new JList(buffer.toArray());
} catch (SomeNastyException eekwhatthebleepwentwrong) {
    // at least print some info about the exception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:32:42.353

我想这可能是你所追求的：

```
JList list = null;
try {
    ...
    list = new JList(buffer.toArray());
    final JList finalist = list;
    ... instantiate anonymous class that refers to finalist
} finally {
    if (list != null) {
        ....
    }
} 
```

或者如果`final`try/catch/finally ...

```
JList list = null;
try {
    ...
    list = new JList(buffer.toArray());
} finally {
    if (list != null) {
        ....
    }
}
final JList finalist = list; 
```

唯一在`final`这里使事情稍微复杂化，但是创建具有与非决赛相同值的本地决赛的“技巧”足以处理它。

（如果`final`出于这个原因不需要修饰符，请摆脱它。它只会引起问题。）

# python - 在 Python 脚本中运行终端

> ID：11443011
> 
> 赞同：0
> 
> 时间：2012-07-11T23:25:57.523
> 
> 标签：python, terminal

我正在尝试通过 Python 脚本在终端中运行命令。该命令仅接受三个参数，在终端中执行时可以完美运行。这是在命令行中输入的内容：

```
gpmetis inputfile numberOfSections 
```

无论`inputfile`来自哪里，比如桌面，在执行`outputfile`后都会被转储到相同的位置`gpmetis`（它被命名为`inputfile.part.numberOfSections`）。`gpmetis`仅适用于终端，但出于压缩目的，我想在 Python 脚本中间使用它以节省时间。（我以前只是在终端和 Python 之间来回移动文件）

但这是我遇到问题的地方......这个[问题](https://stackoverflow.com/questions/7574841/open-a-terminal-from-python)和这个[论坛](http://ubuntuforums.org/showthread.php?t=729192)就如何在 Python 中执行终端提供了有用的提示，但是`outputfile`当我运行 python 代码时我仍然没有收到。就像输出被抑制或者我调用终端的方式有问题。

我目前正在调用终端，例如：

```
def Terminal(inputfile, NumParts): 
    os.system("gpmetis inputfile NumParts")

    outputfile = "inputfile.part." + NumParts
    return outputfile 
```

而且我没有从中得到错误，但我也没有收到任何输出文件。我在这里错过了什么，如果你知道你能解释一下吗？我正在尝试学习 Python，因此非常感谢描述我正在搞砸的事情。

`os`已导入。我在脚本中“返回”的方式可能有问题`outputfile`，但我的桌面上也没有看到`outputfile`，这是要处理的第一个问题（一次一步！）

注意：我找到了相关的[文档](http://docs.python.org/library/subprocess.html)，但它会对我有帮助吗？我很难理解它..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T23:43:00.127

首先，您可能会检查`os.system`. 非零返回值通常表示发生了错误。

看起来您正在尝试使用命令中的参数。在这种情况下，它应该如下所示：

```
def Terminal(inputfile, NumParts): 
    command = 'gpmetis ' + inputfile + ' ' + str(NumParts)
    os.system(command)

    outputfile = intputfile + '.part.' + str(NumParts)
    return outputfile 
```

最后，根据[这个](https://stackoverflow.com/questions/89228/how-to-call-external-command-in-python)答案，看起来您最好使用该`subprocess`模块。然后，您可以像这样执行相同的命令：

```
import subprocess
subprocess.call(['gpmetis', inputfile, str(NumParts)]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:34:24.367

这`inputfile`是一个传递给函数的变量，但在命令行参数中，它被当作文件名。

你可能想试试

```
os.system('gpmetis ' + str(inputfile) + ' ' + str(NumParts))
outputfile = intputfile + '.part.' + str(NumParts) 
```

没有调用代码和意图很难说。让我知道它是否有帮助。

# vim - 如何重新映射键盘键以避免 VIM 中的 RSI

> ID：11443012
> 
> 赞同：20
> 
> 时间：2012-07-11T23:26:00.963
> 
> 标签：vim, keyboard, ergonomics

*我希望这不会被视为纯粹为了这样做而试图引发对话。*

我经常使用 vim（每天 5-10 小时），我注意到我的左手腕首先开始疼痛。标准键盘布局（见下图）几乎肯定会给你带来关节炎。

![标准键盘](../Images/8c6800c1571bd58f9531909603b901d9.png)

目前，我已经重新映射

*   `Ctrl`至`Shift`
*   `Shift`至`Caps Lock`
*   `Caps Lock`至`Ctrl`

这**有助于**使用诸如`Ctrl``f`或`Shift``2`( `@`) 之类的常用命令，但我仍然需要扭动手腕才能获得这些组合。无论如何要重新映射键以避免左手腕上的这种扭曲（也许使用`Tab`键）？我只是觉得奇怪的是，对于专门为程序员设计的文本编辑器，它会大量使用这些不碍事的键。我考虑过重新映射到旧的键盘布局（见下图），但我不想知道它是否会出现与我当前的重新映射相同的基本问题。

![旧键盘布局](../Images/cadc858462ebc3aa5a3b01e9f5e97549.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T01:04:59.100

## 注意：我不是医生，只是另一个手腕疼痛的打字员。

* * *

根据我的经验，只需映射`Caps`到（或者如果你*必须*有 a`Ctrl`则交换两者）并使用+而不是有很大的不同。 +在 vi​​m 中不需要额外的映射，因为它等同于. 如果你能自学这个小改变，那么当你考虑在 vim 中使用的频率时，你的动作就会大大减少。*`Caps``Ctrl``[``Esc``Ctrl``[``Esc``Esc`*

 *`Caps`to`Ctrl`映射不能在 vim 中完成，必须在系统范围内进行，但是，在`Ctrl`更方便的位置也有助于其他使用`Ctrl`组合的应用程序。根据您使用的操作系统，有不同的重新映射密钥的方法。一些常见的选项是：

*   [xmodmap](http://linux.die.net/man/1/xmodmap) (GNU/Linux)
*   [KeyRemap4Macbook](http://pqrs.org/macosx/keyremap4macbook/) (OSX)
*   按键调整（Windows）

虽然这可能会改善您的情况，但如果您的疼痛持续存在，您确实应该考虑去看医生和/或购买更符合人体工程学设计的键盘。我拥有一个旧版本的[Kinesis Advantage](http://kinesis-ergo.com/advantage.htm)，我在 Ebay 上以大约 100 美元（美元）的价格购买了它，我非常高兴。可以直接在键盘上对按键进行编程，因此无需软件来交换按键或为经常使用的按键创建自己的键盘宏。

* * *

编辑：我在您的帖子中看到您还提到了`Ctrl`+`f`和`Shift`+之类的组合，`2`需要您扭动手腕才能按下。在我看来，您只使用键盘左侧的`Ctrl`和键。`Shift`你真的应该使用这两组键，使用你正在修改的键的另一侧。那将否定这种手腕运动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T22:35:41.810

`caps`在系统范围内使用`ctrl`。（你多久剪切/复制/粘贴一次？）

这也使得`ctrl``[`在 vim 中工作。

除了我使用 vim 'arpeggio' 插件。

**Arpeggio**允许您定义同时按下两个键时激活的 vim 绑定。
`j``k`按下为我服务`ESC`。

' **surround.vim** ' 插件可能对你来说很有趣。

消除了我所有的手腕疼痛。

后脚本：
使用' **vundle** '！
它是迄今为止最好的 vim 插件管理器，你会想知道你怎么能没有，特别是如果你在多台机器上使用定制的 vim。如果您最初设置时遇到困难，请不要害怕，慢慢来。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T05:51:37.790

我切换到[Kinesis Advantage 键盘](http://www.kinesis-ergo.com/advantage.htm)，并将 Caps Lock 重新映射为 Esc。这有效地消除了我作为 vim 用户所感受到的任何手腕疼痛。再一次不是医生，但看看我的手是如何移动的，即使我按下 Shift 键，我也没有看到我的手腕扭曲。

您可能可以对拇指键进行一些很好的重新映射，以进一步减少紧张感，但说实话，我从来没有觉得有必要。

恐怕不是 0 美元的解决方案，但它对我来说非常有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-01T00:54:57.323

我将 Escape（单击）和 Ctrl（按住）都映射到 CapsLock：

```
xmodmap -e "remove Lock = Caps_Lock"
xmodmap -e "remove Control = Control_L"
xmodmap -e "keysym Control_L = Caps_Lock"
xmodmap -e "keysym Caps_Lock = Control_L"
xmodmap -e "add Control = Control_L"
xcape -t 1000 -e "Control_L=Escape" # Fire nothing if 1000ms hold time out 
```

可能我在这里搞砸了，但`xmodmap`无论如何都不是修改映射的最佳选择，所以我将其更改为纯 xkb 配置。

我也交换了 : 与 ; 和 ` 和 ~，因为我更经常使用 : 和 ~：

```
xmodmap -e "keycode 47 = colon semicolon"
xmodmap -e "keycode 49 = asciitilde grave" 
```

我还使用[Compose Key](http://en.wikipedia.org/wiki/Compose_key)来输入 ūmlauts 等。

在 vim 中，我做过的最有用的改变是空间到领导者的映射。各种领导键组合将使您的生活更轻松。

我无法习惯使用 H 和 L 来表示 _ 和 $，因为它似乎不适用于 round.vim 和人们建议的其他一些技巧。

只是不要使用箭头！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T05:28:16.587

如果可以的话，我会将此部分作为对 Randy 的回答的评论`Esc`，但这需要更多的空间。有一个重要的用例，您不能只重新映射 Windows 键：没有管理员权限的 Windows 7。这在企业环境中很常见；至少，它描述了我和图片中的那个键盘。[keymapper 的 repo](http://code.google.com/p/keymapper/)在这个问题上有不错的信息：

> **Windows 7 用户的重要说明**
> 
> Windows 7 不支持每用户键映射。在 Key Mapper 的下一个版本之前，您必须从 Mappings 菜单手动切换到“Boot”映射，重新启动以更改映射，并且您需要对计算机具有管理访问权限才能设置在 Windows 中工作的键映射7.

任何 Microsoft 工具、KeyTweak、SharpKey 等都是如此。

所以你必须使用像[AutoHotkey](http://www.autohotkey.com/)这样的东西。我个人更喜欢将 Caps Lock 直接映射到 Vim 的 Esc，而我在将它映射到 Ctrl 时遇到了问题：

```
#IfWinActive ahk_class Vim
*CapsLock::Esc
#IfWinActive 
```

我喜欢的另一种选择是`inoremap jj <Esc>`. 除非你打算写一篇关于朝觐之类的文章，否则它工作得很好。

* * *

### 更符合你的观点

无论如何，您是否考虑过执行上述操作以轻松转义，然后将一些难以到达的插入模式命令重新映射到`Alt`（用拇指敲击它），然后使用映射到您的领导者？

```
let mapleader=","
nnoremap <leader>f <C-F> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T11:20:31.907

我总是通过卷起我的小指并用第一个指关节按下左 ctrl 键。我发现这需要更少的手部动作。

**更新**

我不觉得`Shift`不舒服，所以我帮不了你。然而`Ctrl`确实困扰着我，即使我的指关节技术我更愿意尽可能避免它。因此，对于插入模式（和命令行模式），我使用前导`;` 而不是`Ctrl`. 例如

```
:map! ;w <C-W>
:map! ;a <C-A>
:map! ;r <C-R>
:ino  ;t <C-T>
:ino  ;d <C-D> 
```

你明白了。

在正常模式下，我使用`v`and`V`而不是`Ctrl+F`and `Ctrl+B`（我只使用可视块模式），尽管我想大多数人更喜欢映射不同的键，例如`<Space>`和`-`用于分页（`-`实际上并不需要）。而不是`F`你可以用 向前搜索`f`，然后点击`,`。

我从来没有真正看到`Ctrl+D`or的意义`Ctrl+U`。但是，我确实发现`z.`,`z<Enter>`和`z-`用于将带有光标的行分别滚动到窗口的中间、顶部和底部。`H`,`M`并且`L`对于在屏幕上移动光标也很有用。但总的来说，我更喜欢使用`/`“incsearch”集进行导航。

这样做没有对错之分，这些只是我个人的喜好，但我希望它能给你一两个想法。尝试试验，看看什么对你有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-19T15:16:07.660

我开发了一个 vim 模块来为这个问题做一些简单的重新映射：

[https://github.com/vim-scripts/vim.ergonomic](https://github.com/vim-scripts/vim.ergonomic)

它所做的最重要的事情是使键入括号集变得更容易。它还使进入命令模式（jj->ESC）变得更加容易

它的运行原理是您在编辑时几乎从未使用过 J 键，但它就在主行中……所以让我们滥用它吧！

从文档中：

```
Remapping commonly used commands
  key combo     mapping         purpose
  ;             :               removes the need to hit Shift to use commands
  jj            <ESC>           can exit edit mode quickly and easily
  Jj            j               can type 'j' when you need to
  JJ            J               can type 'J' when you need to

Making it easier to insert various kinds of braces:
  key combo     mapping         purpose
  JU            ()<left>        easier to create parenthesis
  JI            []<left>        easier to create square brackets
  JM            {}<left>        eaiser to create curly braces
  J<            <><left>        easier to create carrot braces

Make it easier to move small distances (especially useful with braces commands):
  key combo     mapping         purpose
  JL            <left>          move left in insert mode
  JH            <right>         move right in insert mode

Removing any need for enter, backspace or delete:
  key combo     mapping         purpose
  JB            <esc>ldbi       delete the previous word
  JW            <esc>dwi        delete the next word
  JO            <esc>oi         insert line and go to it 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-12T03:19:56.597

我建议重新映射

*   大写锁定到左侧控件
*   左控制逃脱
*   转义为大写锁定

. 如果在 linux中首先可以通过使用`setxkbmap -option '...,ctrl:nocaps'`或更改`XkbOptions`. `/etc/X11/xorg.conf`其次需要使用 of `xmodmap`。在一些 X 服务器更新后，我未能使第三个工作正常，以前也使用`xmodmap`过。

使用针对触摸打字和映射优化的 dvorak 布局（甚至可能是编程）`,s`->`()<Left>`也可能会有所帮助。

注意：我也不是医生。我是打字员，但与@Randy Morris 不同，我从未遭受过手腕疼痛，只是将按键移动到最方便的位置。*

# c++ - 使用 C++ 覆盖文件中的文本

> ID：11443013
> 
> 赞同：1
> 
> 时间：2012-07-11T23:26:11.113
> 
> 标签：c++, ofstream

我对以下代码有疑问：

```
 fstream s("tst.txt" , fstream::binary);
     s.seekp(5, fstream::beg);
     s.write("testing", 7); 
```

它应该保持文件中的前五个字符不变，但事实并非如此！它丢弃了整个旧数据，我必须保留旧数据并只覆盖一个文件数据块，它应该是二进制模式，有人帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:39:10.613

尝试这个：

```
fstream s("tst.txt" , fstream::binary | fstream::in | fstream::out);
s.seekp(5, std::fstream::beg);
s.write("testing", 7); 
```

通过指定 openmode 标志，您将覆盖 fstream 构造函数调用中的默认 openmode。

# asp.net-mvc - 使用 Entity Framework 4 MVC3 显示和保存导航属性

> ID：11443014
> 
> 赞同：0
> 
> 时间：2012-07-11T23:26:23.787
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我无法显示和保存导航属性。

我有 3 张桌子：

**速率配置文件**

*   RateProfileID
*   个人资料名称

**速度**

*   费率ID
*   RateProfileID
*   面板ID
*   数量

**控制板**

*   面板ID
*   面板名称

我有这些模型和外键的导航属性（即`Rates`是 的导航属性`RateProfile`）。我有一个`RateProfile`作为模型的编辑页面。在此页面上，我有一个`PanelID`. 下拉过滤器显示了哪些导航属性（每个`panelID`都有 28 个与之关联的速率）。每当更改下拉列表时，它都会发布到我的`Edit`方法（在继续之前保存现有数据并显示新选择的费率`panelID`）。

我只将所需的费率记录通过`ViewBag`.

我最初使用的是 foreach 循环

```
foreach(PDR.Models.Rate rate in ViewBag.Rates){
                    @Html.HiddenFor(modelItem => rate.RateProfileID)
                    @Html.HiddenFor(modelItem => rate.RateID)
                    @Html.HiddenFor(modelItem => rate.PanelID)

                    @Html.EditorFor(modelItem => rate.Amount)
                    @Html.ValidationMessageFor(modelItem => rate.Amount)
} 
```

使用 foreach 循环，在更改 下拉列表时，所有内容都会正确显示`PanelID`，即它会以每个面板的正确速率显示。但是，我的费率都不会与我的模型一起传递回控制器中的 HTTPPost 编辑方法。传递给我的`RateProfile`控制器的 Rates 导航属性中将有 0 条记录（视图中有 28 条）。

有人建议我将 foreach 循环更改为 for(int i...) 循环。显然 foreach 循环将所有文本框命名为相同的东西，而常规 for 循环根据索引命名它们。

使用 for(int i...) 循环，当传递给 HTTPPost Edit 方法时，Rates 导航属性确实具有所有记录，并且我能够根据输入的内容更新这些记录。

但是...现在使用 for(int i...) 循环，页面将不会显示正确的记录（即使更改`panelID`，它也始终显示默认记录）。`panelID`更疯狂的是，如果我在视图中设置断点，我会看到正确的`Rate`记录仍在传递给视图。我看到正确的`RateID`/ `amount`etc 都被放入 Html 帮助程序中，但是当页面实际显示时，它显示的是在更改下拉列表之前存在的数据，而不是我在调试模式下看到的正确数据。

这是我从 foreach 循环切换到普通 for 循环后使用的视图代码：

```
 @{List<PDR.Models.Rate> rates = ViewBag.rates;
      var count = rates.Count;
      }
    @for (int i = 0; i < count; i++)
    {
                    @Html.HiddenFor(modelItem => rates[i].RateProfileID)
                    @Html.HiddenFor(modelItem => rates[i].RateID)
                    @Html.HiddenFor(modelItem => rates[i].PanelID)

                    @Html.EditorFor(modelItem => rates[i].Amount)
                    @Html.ValidationMessageFor(modelItem => rates[i].Amount)
    } 
```

在我看来，通过在调试模式下检查值，我知道正确的费率正在传递给`ViewBag.rates`基于`panelID`. 问题是，即使我可以在调试中单步执行它并观察它为上述循环中的`RateID,PanelID`和`Amount`每个速率设置正确的值，页面上实际显示的始终是 的值`panelID == 1`，然后是传递给的值我的控制器始终是费率的值，`panelID == 1`而不是我传递给视图的费率。

这是编辑方法的代码。我很确定问题出在视图中，因为`rateprofile`（应该是我视图中的模型）从一开始就永远不会恢复正确的导航属性。

```
[HttpPost]
    public ActionResult Edit(RateProfile rateprofile, int panelID)
    {

        var panels = db.Panels;
        ViewBag.PanelDropDown = new SelectList(panels, "PanelID", "PanelName", panelID);
        ViewBag.PanelID = panelID;

        if (ModelState.IsValid)
        {
            db.Entry(rateprofile).State = EntityState.Modified;

            foreach (Rate rate in rateprofile.Rates)
            {
                db.Entry(rate).State = EntityState.Modified;
            }
            db.SaveChanges();
        }
        rateprofile = db.RateProfiles.Include(a => a.Rates).Where(a => a.RateProfileID == rateprofile.RateProfileID).Single(); //reloads the current rateprofile from the db
        PopulatePanelDropDown(rateprofile, panelID); //populates the ViewBag.rates variable

        return View(rateprofile);
    } 
```

总之：

*   foreach 循环`Rates`：根据 正确显示所有内容`panelID`，但不会将值传递给控制器​​。

*   for(int i...) 循环：将仅显示值`panelID == 1`并且不会基于`panelID`. 将保存，但只保存与 关联的记录`panelID == 1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:24:40.773

在搜索了几个星期并没有找到任何对我有用的答案之后，我终于将我的 HTTPpost 编辑方法更改为重定向到我的 HTTPget 编辑方法，而不是返回视图。我将我的 RateProfileID 和 panelID 传递给我的 HTTPget 编辑方法，当面板下拉列表更改时，它现在显示正确的数据没有任何问题。

# ajax - 如何使用从 ajax jQuery 的响应中传回的数据？

> ID：11443017
> 
> 赞同：0
> 
> 时间：2012-07-11T23:26:44.023
> 
> 标签：ajax, jquery, response

我正在尝试使用来自 jQuery ajax 请求的响应来设置具有特定 id 的 div 的 innerHTML。这是我正在使用的代码：

```
$(".show_comments").click(function(){

var articleName = $(this).closest("article").find(".articlename").attr('id')

$.ajax({
url: "commentView.php",
data: { 'articleName': articleName },
cache: false,
dataType: "html", // so that it will auto parse it as html
success: function(response){
$(this).closest("article").find(".comments").html(response);
}
}); 
```

但是它似乎根本没有做任何事情，我试过谷歌搜索，但我能找到的一切都说按照我的方式做......我已经在 Firebug 中测试过，ajax 请求给了我我也想要它的确切响应...但是我无法访问它来将 div 的 innerHTML 设置为响应！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:31:22.903

在您的 ajax 成功处理程序中，还有另一个范围并`this`指向您的想法。因此，将您的代码更改为：

```
var articleName = $(this).closest("article").find(".articlename").attr('id'),
    that = this;

$.ajax({
    url: "commentView.php",
    data: { 'articleName': articleName },
    cache: false,
    dataType: "html", // so that it will auto parse it as html
    success: function(response){
        $(that).closest("article").find(".comments").html(response);
    }
}); 
```

我所做的更改：我添加`that`了指向`this`实例的变量并在成功处理程序中使用它。

您将如何自己调试它：如果您尝试输出`console.log(this)`并且`console.log($(this).closest("article").find(".comments"));`您会看到它返回一个错误的对象（在第一种情况下），而在第二种情况下什么也没有。

# javascript - 将整数附加到字符串名称

> ID：11443020
> 
> 赞同：-1
> 
> 时间：2012-07-11T23:26:55.900
> 
> 标签：javascript

嗨，我试图在 Impactjs 中从单个字符串（单词列表）中保存的一长串单词中迭代一个 for 循环：

```
var wordlist3 ="hellwhentrysthisbreaks"
var  xc=3;
var word_length = 4;
var words_in_round = 4;             
for ( i=0; i<words_in_round; i++){        
    var num_words = ['wordlist' + xc].length / word_length;
    var random = Math.floor(Math.random() * ((num_words+1) - 0 ));
    n = Math.round(random / word_length) * word_length;
    random_word =(['wordlist' + xc].substring(n,(n+word_length)))
    random_words += random_word;
} 
```

如果我将 wordlist 定义为全局，则上面的代码有效，但是当我将其定义为本地 num_words 时未正确定义并且随机单词抛出此对象没有方法子字符串 ..

我的问题是，因为我在附加字符串名称并调用 .length 时转换为局部变量，所以它给了我新名称的长度（wordlist3.length = 9）而不是 wordlist3 =20 的长度 .. 我也不能在这个对象上调用方法子字符串...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:42:12.267

```
['wordlist' + xc].substring 
```

永远不会起作用（好吧，除非它前面有另一个变量，例如。`foo['wordlist' +xc].substring`）。这是因为，在 Javascript 中`[anything]`意味着“'任何东西'的数组”，并且（正如 Kendall 提到的）数组没有子字符串方法。

尝试：

```
random_word =(('wordlist' + xc).substring(n,(n+word_length))) 
```

反而。

# c++ - 将类转换为模板

> ID：11443022
> 
> 赞同：1
> 
> 时间：2012-07-11T23:27:00.593
> 
> 标签：c++, templates, pointers

我想将一个类转换为一个模板，这个类必须从类型名 T 访问一些数据。在这种情况下，类型名 T 可以是一个对象或指向对象的指针。我如何在模板中判断我是在处理指针还是对象？

我不能使用升压。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:30:33.417

您将使用模板专业化。首先，您将创建将模板参数视为普通类型的模板。

```
template <typename T>
struct Foo {
    T t_;
    Foo () { std::cout << "regular version" << std::endl; }
}; 
```

然后，您将专门用于模板何时是指向类型的指针。

```
template <typename T>
struct Foo<T *> {
    T *t_;
    Foo () { std::cout << "pointer version" << std::endl; }
};

Foo<int> a;
Foo<int *> b; 
```

# xml - 如何使用 -A grep 多个字符串

> ID：11443023
> 
> 赞同：0
> 
> 时间：2012-07-11T23:27:05.673
> 
> 标签：xml, unix, grep

我需要对 XML 文件中包含的数据进行 grep。我需要获取多个元素，最后一个在节点内。我正在研究的元素之间有一堆数据。我可以轻松地 grep 像这样的多个元素：

```
grep -E "<first|<second|<third|<seventh" file.xml 
```

但是因为我有一个看起来像这样的文件结构：

```
<first>First</first>
<second>Second</second>
<third>Third</third>
<fourth>Fourth</fourth>
<fifth>Fifth</fifth>
<sixth flexible="true">
    <low>0.09</low>
    <high>5.90</high>
</sixth>
<seventh flexible="false">
    <low>1.82</low>
    <high>3.14</high>
</seventh> 
```

我没有得到`<seventh>`节点内的数字数据（没想到用那个命令）。所以我试图使用`grep -An`（之后）开关，其中“n”是初始匹配后要匹配的行数，以获得第七个节点的其余部分：

```
grep -E "<first" -E "<second" -E "<third" -E -A3 "<seventh" file.xml 
```

哪个会返回：

```
<first>First</first>
<second>Second</second>
<third>Third</third>
<seventh flexible="false">
    <low>1.82</low>
    <high>3.14</high>
</seventh> 
```

然后我可以对其进行按摩以获得最终结果（实际上只需要来自第七个节点的“高”数据及其关联的第一个、第二个和第三个字符串）。但是，这不起作用，我立即得到前三个元素`<first`，它忽略了命令的其余部分。

我也试过：

```
grep -E "<first|<second|<third" -E -A3 "<seventh" file.xml 
```

这给了我类似的结果，但完全忽略了`-E -A3 "<seventh`命令的“”部分。好吧，我想不会忽略，因为 -A3 仍在向后应用到命令的前面部分。我知道您可以使用命令后开关，但是您可以控制它们回退多远吗？

我通读了 grep 上的手册页，但没有看到如何将命令链接在一起。如果这很重要，我正在使用 Mac，但如果需要，可以轻松访问 Linux 和 Windows 机器。

我怎样才能得到我想要的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:38:08.093

首先，请`man grep`再看一遍，发现`-E`不需要多个，并且不需要多个模式`grep`。

其次，如果你知道你需要上下文`seventh`而不是其他人，只需使用两个命令：

```
$ grep -E '<first|<second|<third' file.xml; grep -A3 '<seventh' file.xml
<first>First</first>
<second>Second</second>
<third>Third</third>
<seventh flexible="false">
    <low>1.82</low>
    <high>3.14</high>
</seventh> 
```

如果您实际上不知道，那么最好使用`xpath`其他 xml 解析工具。

另请参阅[此问题](https://stackoverflow.com/q/11331933/1258041)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:23:51.770

不要使用正则表达式来搜索 XML。它们不是为这项工作而设计的。您的代码将是错误的。例如，如果某些字符串出现在注释或 CDATA 部分中，或者输入包含名为 的元素`<firstly>`，或者换行符的排列方式不同，@Levitsky 给出的代码将失败。（有时代码错误并不重要，因为只有 99% 的时间可以工作，但如果这是你的要求，我希望你能这么说。）

搜索 XML 的方法是使用 XPath，或者对于更精细的搜索，使用 XQuery。

满足您需求的 XPath 解决方案非常简单。假设您提供的 XML 在`wrapper`元素内，则 XPath 2.0 表达式为`wrapper/(first, second, third, seventh)`. 所以这个任务的 XPath 不仅更可靠，而且也更容易。

# gtkmm - 如何使用 gtkmm 抓取和隐藏光标？

> ID：11443024
> 
> 赞同：2
> 
> 时间：2012-07-11T23:27:06.073
> 
> 标签：gtkmm

我正在尝试使用 gtkmm 编写一个应用程序，我希望它在获得焦点时隐藏鼠标光标。所以我尝试的第一步是当光标位于窗口顶部时隐藏鼠标光标，这是成功的。但是为了防止鼠标在我的窗口之外移动时显示，然后我通过不断地将鼠标光标扭曲回我的绘图区域的中心来限制鼠标的移动。

为此，我需要知道窗口位置和窗口大小，使用 Gdk::Window::get_position 和 Gdk::Window::get_size 很容易获得。但是，如果窗口被移动，get_position 将不会返回更新的位置，因此我的光标将冻结在错误的位置！

那么有什么替代方案可以达到我想要的效果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-05T12:17:01.313

只需[抓住](https://developer.gnome.org/gtkmm/stable/classGdk_1_1Seat.html#a38a7f4c70c94256cf274578ef29068d3)指针。

```
//pass all events to window apart LEAVE_NOTIFY_MASK 
MainWindow->set_events(GDK_EXPOSURE_MASK | GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON1_MOTION_MASK | GDK_BUTTON2_MOTION_MASK | GDK_BUTTON3_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK | GDK_KEY_PRESS_MASK | GDK_KEY_RELEASE_MASK | GDK_ENTER_NOTIFY_MASK | GDK_FOCUS_CHANGE_MASK | GDK_STRUCTURE_MASK | GDK_PROPERTY_CHANGE_MASK | GDK_VISIBILITY_NOTIFY_MASK | GDK_PROXIMITY_IN_MASK | GDK_PROXIMITY_OUT_MASK | GDK_SUBSTRUCTURE_MASK | GDK_SCROLL_MASK | GDK_TOUCH_MASK | GDK_SMOOTH_SCROLL_MASK | GDK_TOUCHPAD_GESTURE_MASK);
MainWindow->set_modal(true);
auto display = MainWindow->get_display();
auto window = MainWindow->get_window();
auto grabSuccess = display->get_default_seat()->grab(window, Gdk::SEAT_CAPABILITY_ALL, true);
if(grabSuccess != Gdk::GRAB_SUCCESS)
{
    std::clog<<"grab failed: "<<grabSuccess<<std::endl;
} 
```

# html - 现代浏览器关心 DOCTYPE 吗？

> ID：11443026
> 
> 赞同：8
> 
> 时间：2012-07-11T23:27:25.107
> 
> 标签：html, doctype, w3c

如果您在 XHTML 1.0 Strict 中使用不推荐使用的属性或标签（无弃用属性） `<center>`，现代浏览器（我将以 Chrome 为例）仍然会注意到并使用它们。`<font color="red">``<td valign="top">`

如果您`<video>`在 XHTML 1.0 Strict DOCTYPE 上使用 HTML5，Chrome 仍会识别它 - 并不是他们不会对其进行编程。我使用 Chrome 中的 XHTML 1.0 Strict DOCTYPE 测试了我可以编写的**最糟糕**的弃用、大写和未引用的属性代码以及 HTML5 音频，它完美地呈现。

这是我测试的代码，在 Chrome 中完美运行（红色背景，居中表格，音频播放）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Do browsers care about the DOCTYPE?</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
</head>
<body bgcolor=#ff0000>
 <CENTER>
  <table cellpadding="0" cellspacing=0>
   <tr><td valign=top>test</td></tr>
  </table>
 </CENTER>
 and some HTML5 audio..
 <audio autoplay>
  <source src="http://www.duncannz.com/resources/sound/alarm.mp3" type="audio/mp3">fallback text</audio>
</body>
</html> 
```

所以我的问题是：由于 DOCTYPE， 现代浏览器（翻译：IE 以外的浏览器）是否会给予*任何*关注，或者做*任何不同的事情？*他们甚至会费心阅读和解释它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T23:43:28.630

浏览器确实关心 DOCTYPE - 否则没有任何意义！

您说得对，许多浏览器以正确的方式解释旧/不推荐使用的命令，但这主要是向后兼容性的问题。网络上有如此大量的内容，几乎不可能使所有内容保持最新和符合标准。网络浏览器继续支持这些过时的页面，因为如果它们不支持，网络上的大部分内容看起来会略有偏差。大多数用户不知道 HTML4 和 5 之间的区别，因此责任可能会落在浏览器上，这可能是毁灭性的 - 特别是如果页面在 Firefox 上看起来很糟糕而在 IE 上看起来不错！

DOCTYPE 主要用于验证和确定浏览器是在这种“怪癖模式”（其中许多旧规则仍然有效）还是“标准模式”下运行。许多专业的网页设计师使用 W3C 验证工具来确保他们的网页是有效的 HTML，并且他们网站提供的工具会查看 DOCTYPE 来选择正确的验证规则集。此外，XHTML strict 不允许空标签或其他明显的语法错误。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T23:59:29.850

Try this in Chrome:

```
<!DOCTYPE html>
<title>Test case</title>
<p hidden>My text
<table><tr><td>Hello World</table> 
```

against this

```
<title>Test case</title>
<p hidden>My text
<table><tr><td>Hello World</table> 
```

Only in the former case will the text "Hello World" be visible.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T23:41:21.740

在大多数现代浏览器中，当使用不同的 Doctype 时，您不会注意到太多差异（取决于页面）。您会注意到的最大区别不在于您的标记，而在于您对 CSS 的使用以及元素的布局/定位。Doctype 在验证您的页面时使用，在确定模式时，浏览器会呈现页面。因此，根据您使用的 Doctype，它将确定页面是否以标准模式、Quirks 模式等呈现。在 IE和旧版浏览器，您会发现更多不同。

有关该主题的更深入信息，请查看此链接：[http ://hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T23:40:36.023

是的，他们有。这意味着 Quirks 或 Standard 模式之间的区别，并且会影响 IE 处理盒子容器的方式。

看看这里：
[http ://www.quirksmode.org/css/quirksmode.html](http://www.quirksmode.org/css/quirksmode.html)

还有这里：
[http](http://www.webmasterworld.com/forum21/7975.htm) ://www.webmasterworld.com/forum21/7975.htm他们详细讨论了这个话题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T23:43:01.180

也许名为“DOCTYPES 如何影响渲染”的段落可以帮助您？

[http://www.upsdel​​l.com/BrowserNews/res_doctype.htm](http://www.upsdell.com/BrowserNews/res_doctype.htm)

# java - 如何在 Google Analytics 中找到表 id？

> ID：11443029
> 
> 赞同：5
> 
> 时间：2012-07-11T23:27:38.233
> 
> 标签：java, google-analytics

我在这个链接上做例子（Java）

> [https://developers.google.com/analytics/resources/articles/gdataAnalyticsCsv](https://developers.google.com/analytics/resources/articles/gdataAnalyticsCsv)

请告诉我如何在 Google Analytics 中获取 TABLE_ID。以下链接中的代码使用表 id（第 37 行）：

> [https://code.google.com/p/ga-api-java-samples/source/browse/trunk/src/v2/csvprinter/AnalyticsCsvDemo.java](https://code.google.com/p/ga-api-java-samples/source/browse/trunk/src/v2/csvprinter/AnalyticsCsvDemo.java)

表 id 需要用于其他代码。所以，除非我能得到表ID，否则“其他代码”是行不通的。显然，表 id 的形式是

> ga:[your_profile_id]

但这总是导致应用程序因错误而终止：

> ids 参数的值无效：[my profile id here]

请帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-04T14:49:28.390

在左上角的分析仪表板中单击`ADMIN`，然后转到`View Settings`，您可以在那里找到`View ID`. 最后只是在那个数字前面`ga:`。

所以，最后，你的表 id 将是

```
ga:<view-id> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T01:11:06.203

在 Google Analytics 中，转到管理 -> 个人资料 -> 个人资料设置。

表 ID 是配置文件 ID。GA api以以下形式使用它`ga:1234455`

因此，如果您在表 id 中有正确的配置文件 id，那么其他地方就有问题了。

**更新**

在 Google Analytics 中，转到管理 -> 查看 -> 查看设置。

视图 id 是配置文件 id，配置文件 id 是表 id。感谢谷歌明确这一点。

[![在此处输入图像描述](../Images/ed4246fabc7dfe5c12174b0e9bec43b0.png)](https://i.stack.imgur.com/4lyiT.jpg)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-04T07:23:37.457

在`View`面板中，选择`View Settings`，然后在`Basic Settings`该id 之前`View ID`添加刚刚添加的内容。`ga:`

正确位置如下：[![在此处输入图像描述](../Images/e1373fe09e460cf65728b69200ff3c7e.png)](https://i.stack.imgur.com/dDbiG.png)

# java - EJB 3.0 循环依赖

> ID：11443033
> 
> 赞同：1
> 
> 时间：2012-07-11T23:27:48.233
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0, circular-dependency

我们有数百个 EJB。最近创建了一个新补丁，它没有在我们的 JAS 中正确部署：JBoss 4.2，并在部署时出现如下错误：

--- MBean 等待其他 MBean --- ObjectName：jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=Locator,service=EJB3 状态：NOTYETINSTALLED 我依赖：jboss.j2ee:ear=Ear .ear,jar=Business.jar,name=MaintenanceWorkLoadInterceptor,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=CustomerDao,service=EJB3 jboss.j2ee:ear=Ear.ear,jar =Business.jar,name=DrilldownEquipmentActivityAction,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=GeoLocDao,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar ,name=PackageTaskForInfoTabDao,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=System.jar,name=AutomatedTestLogDao,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=ModstateHistoryDao ,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=System.jar,name=TaskSchedulerCommandHandler,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=CommonSupportValidationController,service=EJB3 jboss.j2ee:ear=Ear.ear,jar=Business.jar,name=AssetEventValidationController,service=EJB3

......还有数百个列出。无论如何，我相信这是由于循环依赖。问题是因为我们实际上有数百个 EJB，手动搜索它们以尝试找到循环依赖项的位置非常耗时。

我正在考虑编写一个工具来检查/查找循环依赖项，但不想重新发明轮子我试图在谷歌搜索这样的工具但没有运气。我不敢相信那里还没有工具。

当您拥有与我们一样多的 EJB 而无需手动检查每个 EJB 时，找到这些问题并修复它们的最佳方法是什么？

# blackberry - 在黑莓中导出外部 jar 但不起作用

> ID：11443035
> 
> 赞同：0
> 
> 时间：2012-07-11T23:27:52.950
> 
> 标签：blackberry, jar

我生成了一个 jar，其中包含我在应用程序中使用的类，但我按照以下步骤将此 jar 添加到项目中：

1.  在项目中右键单击。
2.  特性
3.  建造
4.  图书馆
5.  添加外部罐子或添加罐子
6.  行

我可以在编写代码时使用这些库，但是当我在模拟器或设备中加载我的项目时，它说我的库“未找到”。

请帮忙，在黑莓项目中使用外部jar的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:02:59.280

来自[BlackBerry 开发人员文档](http://docs.blackberry.com/en/developers/deliverables/12002/Add_jar_dependency_923677_11.jsp)：

1.  在 Package Explorer 视图中，右键单击要添加依赖项的项目。
2.  单击**构建路径**>**配置构建路径**。
3.  单击**库**选项卡。
4.  完成以下任务之一：
    *   如果 .jar 文件在当前工作空间中，请单击**添加 JARS 。**
    *   如果 .jar 文件不在当前工作空间中，请单击**添加外部 JARS 。**
5.  选择您希望此项目依赖的 .jar 文件。.jar 文件必须由 Java® 应用程序项目生成。您不能以这种方式添加 Library 类型的 BlackBerry® 应用程序项目。
6.  单击**确定**。

密切注意上面第 4 步中的两个不同选项**，**选择一个适用于您的情况（您的 .jar 文件所在的位置）的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:33:57.257

请尝试以下步骤：

1.  在项目中右键单击。
2.  特性
3.  建造
4.  图书馆
5.  添加外部罐子
6.  选择订单和导出选项卡
7.  复选标记 true 您添加的 .jar 文件
8.  点击确定

# python - python中的XML解析：expaterror格式不正确

> ID：11443036
> 
> 赞同：14
> 
> 时间：2012-07-11T23:28:02.843
> 
> 标签：python, xml, parsing

我正在使用 Python`xml.etree.ElementTree`对文件进行一些 XML 解析。但是，我在文档中途收到此错误：

```
xml.parsers.expat.ExpatError: not well-formed (invalid token): line X, column Y 
```

因此，我转到 vim 中的 X 行 Y 列，我看到一个带有红色背景突出显示的与号 (&)。这是什么意思？

它前面的两个字符也是`>>`，所以也许有什么特别之处`>>&`？

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T23:30:35.230

& 是 XML 中的一个特殊字符，用于字符实体。如果您的 XML 本身有 & 坐在那里，而不是像 or 之类的实体的一部分`&amp;`，`&#1104;`那么 XML 是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-02T02:18:44.677

您可以使用**xml**模块中的**转义**函数

 **```
from xml.sax.saxutils import escape

my_string = "Some string with an &"

# If the string contains &, <, or > they will be converted.
print(escape(my_string))

# Above will return: Some string with an &amp; 
```

参考：[转义字符串以在 XML 中使用](https://stackoverflow.com/questions/1546717/escaping-strings-for-use-in-xml)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-03T12:50:49.110

我通过使用`yattag`来解决它

```
from yattag import indent
print indent(xml_string.encode('utf-8')) 
```**

# python - windows上的python扭曲stdio示例不起作用

> ID：11443040
> 
> 赞同：4
> 
> 时间：2012-07-11T23:28:16.940
> 
> 标签：python, twisted

我开始玩 python/twisted 但是当我在 Windows 上测试[stdin 示例](http://twistedmatrix.com/trac/browser/trunk/doc/core/examples/stdin.py)`cmd.exe`时，该示例不起作用。我正在使用 python 2.7 和 twisted 12.1.0（二进制 msi 包）。我希望这是一个缓冲问题，所以我也尝试使用“python -u stdin.y”运行脚本，但没有任何改变。

显然，这个脚本适用于 Linux 和 OS X。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T00:42:59.353

已经有[一个开放的 Twisted 票可以`twisted.internet.stdio`在 Windows 的控制台上运行](http://twistedmatrix.com/trac/ticket/2157)。甚至还有大量与此票证相关的代码，以及大量的诊断。

简而言之，Windows 命令行是一团糟。它甚至不是与 POSIX 标准命令行不同的界面。这是完全不同*的*事情。在 Linux 或 OS X 上，控制台就像一个微型的假电传打字机，您可以向其发送字节和控制代码。在 Windows 上，控制台更像是一台运行 DOS 的小型假计算机，您可以将其写入视频内存。

尽管如此，请随时为这张票提供帮助！它可以使用更多的兴趣！

# ajax - 在ajax响应中解析dojo tundra dijits

> ID：11443043
> 
> 赞同：0
> 
> 时间：2012-07-11T23:28:45.163
> 
> 标签：ajax, zend-framework, dojo

我在 Zend 框架的 ajax 响应中重新解析我的 dojo 元素时遇到了很多问题。我有一个简单的validationTextBox 和一个提交按钮。首次呈现索引页面时，所有 dojo/dijit tundra 样式/属性等都被正确解析。但是，当我有一个重建 dojo 表单并将其发布回索引视图的 ajax 调用时。表格如果可以发回，但苔原风格不再起作用。我尝试了很多不同的事情，但花了很多时间却一无所获。我提前感谢任何试图提供帮助的人。我在这篇文章中添加了一个最简单的例子来解释。

**布局.phtml**

```
<?php
echo '<?xml version="1.0" encoding="UTF-8"?>';
echo $this->doctype();
?>
<html>
    <head>
    <meta content="text/html; charset=UTF-8" />
    <script>
    function showForm()
    {
    dojo.xhrGet( {
            url: "../public/index.php?ajax=true",
        // The load function is called on successful response from server
        // It inserts the response to the HTML div “put_here” placeholder
        handleAs:"text",
        sync:true,
            load: function(response, ioArgs)
                    { dojo.byId("welcome").innerHTML = response;
                    return response; 
                },
                // The error function displays error message if server does not
        // respond right
            error: function(response, ioArgs)
            {
            console.error("HTTP status code: ", ioArgs.xhr.status);
            return response;
            }
            });

    //     dojo.parser.parse(dojo.byId("welcome"));
    }
    </script>
    <?php
    echo $this->headTitle();
    echo $this->headStyle();
    echo $this->headScript();
    echo $this->dojo()->setDjConfigOption('parseOnLoad', true);
    echo $this->dojo()->addStyleSheetModule('dijit.themes.tundra');
    echo $this->dojo();                
    ?>
</head>
<body class='tundra'>     
    <div id='ajaxcontent'>
    <?php  echo $this->layout()->content; ?>
    </div>
</body> 
```

**索引控制器.php**

```
<?php

//require_once '../public/js/custom.js';
class IndexController extends Zend_Controller_Action
{
public function init()
{
    $ajaxContext = $this->_helper->getHelper('AjaxContext');
$ajaxContext->addActionContext('index', 'html')
                ->initContext();
}

public function indexAction()
{                       

    $form = new Zend_Dojo_Form('dojoForm', array('dojotype'=> 'dijit.layout.ContentPane'));    
    $element = new Zend_Dojo_Form_Element_ValidationTextBox('TestBoxName', 
                                                                array(
                                                                    'id' => 'TextBoxId',
                                                                    'required' => true
                                                                )
                                                                );
    $button = new Zend_Dojo_Form_Element_Button('TestButton',
                                                    array(
                                                        'value'=> 'Button',
                                                        'onclick' => 'showForm()'
                                                    ));                                              
    $form->addElements(array($element,$button));       
        $this->view->form = $form;
}
} 
```

**查看 index.phtml**

```
<div id="welcome" >
<?php
echo $this->form;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:42:25.840

尝试通过[http://validator.w3.org/](http://validator.w3.org/)运行您的页面- 它可能是 DOCTYPE，以及非封闭标签的问题？

行`addStyleSheetModule`简单地添加了一个css文件，你`<body>`断言的类，body下面的所有节点都“继承”了主题（CSS选择器）。然而，选择器高度依赖于结构良好的 DOM（因此验证）

但这里的主要问题似乎是没有设置 dijit 类 - 可能是因为 data-dojo-type 没有初始化。有两种方法

### 1.1 在 layout.phtml 中

```
function showForm() { dijit.byId('welcome').set('href', '../public/index.php?ajax=true'); } 
```

### 1.2 在 index.phtml 中

在您的中创建一个内容窗格（默认为 parseOnLoad）`<div id='welcome'..`

```
<div id="welcome" data-dojo-type="dijit.layout.ContentPane"> 
```

### 2.0 手动调用解析器

```
load: function(response, ioArgs)
   { var domnode = dojo.byId("welcome");
     domnode.innerHTML = response;
     dojo.parser.parse(domnode);
     return response; 
   } 
```

# spring - 表单提交上的“HTTP 状态 405 - 不支持请求方法 'POST'”

> ID：11443045
> 
> 赞同：0
> 
> 时间：2012-07-11T23:28:50.680
> 
> 标签：spring, hibernate, tomcat7

试图在 Spring/Hibernate 中做一个非常简单的表单。它应该向数据库添加一个条目。这是基于一个对我有用的例子，所以很奇怪我会得到这个错误。但是它就是这样啊。

这是带有表单的页面：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<html>
<head><title>Add Owned Game</title></head>
<body>
<h1>Add Owned Game</h1>

<br />
<br />
<c:url var="saveGameeUrl" value="/games/save.html" />
<form:form modelAttribute="game" method="POST" action="${saveGameUrl}">
    <form:label path="title">Game Title:</form:label>
    <form:input path="title" />
    <br />
    <input type="submit" value="Add Game" />
</form:form>

</body>
</html> 
```

这是相关的控制器方法：

```
@RequestMapping(value = "/save", method = RequestMethod.POST)
public ModelAndView saveGame(@ModelAttribute("game") Game game,
        BindingResult result) {
     gameService.addOwnedGame(game);
    return new ModelAndView("redirect:/games/owned.html");
} 
```

如果你还需要看什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:37:30.390

看起来您正在发布到 HTML 页面（应该是静态的），而不是路由到控制器的 /save 页面。还有，是不是笔误？c:url 命名为**saveGameeUrl**，带有两个 E，而动作在 Game 上只有一个 e。

```
<c:url var="saveGameeUrl" value="/games/save.html" />
<form:form modelAttribute="game" method="POST" action="${saveGameUrl}"> 
```

# algorithm - 文本压缩 - 使用什么算法

> ID：11443049
> 
> 赞同：1
> 
> 时间：2012-07-11T23:29:46.670
> 
> 标签：algorithm, text, compression

我需要压缩表单的一些文本数据

```
[70,165,531,0|70,166,562|"hi",167,578|70,171,593|71,179,593|73,188,609|"a",1,3| 
```

数据包含几千个字符（大约 10000 - 50000）。

我阅读了各种压缩算法，但无法决定在这里使用哪一种。

这里重要的是：压缩字符串**应该只包含字母数字字符**（或一些特殊字符，如 +-/&%@$..）我的意思是大多数算法都提供乱码 ascii 字符作为压缩数据，对吗？必须避免这种情况。

有人可以指导我如何在这里进行吗？

PS 文本主要包含`numbers`, `'`和`|`字符。其他字符很少出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T23:37:45.897

实际上，您将输出字符集限制为可打印字符的要求会自动花费您 25% 的压缩增益，因为在每 8 位中，您最终将使用大约 6 位。

但是，如果这是您真正想要的，您始终可以使用 base64 或更节省空间的[base85](http://en.wikipedia.org/wiki/Ascii85)输出将原始字节流重新转换为可打印字符。

关于压缩算法本身，请坚持使用 gzip 或 bzip2 等较知名的算法之一，因为两者都存在经过良好测试的开源代码。

选择“最佳”算法实际上并不容易，这里是您必须问自己的问题列表的摘录：

1.  我是否需要编码或解码方面的最佳速度（例如 bzip 非常不对称）
2.  编码器和解码器的内存效率有多重要？对于嵌入式应用程序可能很重要
3.  代码的大小很重要，也适用于嵌入式
4.  我是否想要预先存在的经过良好测试的编码器或解码器代码，或者两者都只用 C 或另一种语言
5.  等等

这里的底线可能是，从您的数据中抽取一个有代表性的样本，并使用一些现有算法运行一些测试，并根据对您的用例很重要的标准对它们进行基准测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T23:36:37.880

一个想法：你可以独立解决你的两个问题。使用任何算法为您提供最佳压缩（只需在您的数据类型上尝试一些。bz2，zip，rar - 无论您喜欢什么，并检查大小），然后摆脱“乱码 ascii”（那就是实际上只是那里的字节...），您可以使用 Base64 对压缩数据进行编码。

如果你真的花了很多心思，你可能会为你的具体问题找到一个更好的算法，因为你只使用了几个不同的字符，但如果你偶然发现一个，我认为值得一试。

# c# - 从网络下载图像并在存在时使用下载的图像

> ID：11443051
> 
> 赞同：0
> 
> 时间：2012-07-11T23:29:53.747
> 
> 标签：c#

我的 C# 程序需要一次显示许多可能的图像。这些图像在网络上，我为每一个都有一个精确的 URL。程序需要从网络加载图像，或者，如果之前已经加载过，从内存/文件加载它（因为之前从网络加载应该已经将它保存到内存/文件）。我该如何实施？我可以使用 WebRequest 对象从 Web 获取加载，但这还不足以保存它以供以后更快地使用。

```
WebRequest request = WebRequest.Create(imageURL);
Stream stream = request.GetResponse().GetResponseStream();
pictureBoxFirstPack.Image = Image.FromStream(stream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:40:47.663

我很确定你应该能够做到这一点：

```
 MemoryStream ms = new MemoryStream();
 stream.CopyTo(ms);
 Byte[]  data = ms.ToArray(); 
```

一旦你将它作为一个字节数组，你可以将它存储在字典、数据库或任何你真正喜欢的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:41:53.217

使用 Image.Save 方法保存下载的图像（遵循 MSDN 中的示例：http: [//msdn.microsoft.com/en-us/library/9t4syfhh.aspx](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)）

```
// Construct a bitmap from the button image resource.
Bitmap bmp1 = new Bitmap(typeof(Button), "Button.bmp");

// Save the image as a GIF.
bmp1.Save("c:\\button.gif", System.Drawing.Imaging.ImageFormat.Gif); 
```

检查图像是否已存在于本地存储中的一种可能方法是计算每个下载图像的哈希和并将其保存在字典中

```
SHA256Managed sha = new SHA256Managed();
byte[] checksum = sha.ComputeHash(stream);
var hash = BitConverter.ToString(checksum).Replace("-", String.Empty);
// Store hash into a dictionary 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:44:20.393

您可以使用 WebClient 下载文件，如下所示：

```
string fileNameLocally = @"c:\file.jpg";
using(WebClient client = new WebClient())
{
        client.DownloadFile(imageURL, fileNameLocally);
//you can also use DownloadAsyncFile this methods do not block the calling thread.
} 
```

# ios - 如何为foursquare iOS应用程序构建重定向URL

> ID：11443052
> 
> 赞同：0
> 
> 时间：2012-07-11T23:30:16.813
> 
> 标签：ios, foursquare

我正在使用foursquare api开发一个iPhone应用程序。它有一个带有“签入”按钮的场地签入屏幕，当用户单击该按钮时，将打开四方身份验证页面。问题是，在foursquare 成功进行身份验证和签入后，如何返回“地点检查”页面。

我想我必须明智地将 REDIRECT_URL 用于 iphone 应用程序 - 但几乎不知道如何做到这一点。

任何建议都会非常有帮助。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:58:29.297

您应该在嵌入式 Web 视图中打开foursquare auth 流。有关一些示例代码，请参阅[https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController.m](https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController.m)

# r - 分位数输出到数据框

> ID：11443053
> 
> 赞同：4
> 
> 时间：2012-07-11T23:30:20.393
> 
> 标签：r

这是一个相当基本的问题，但在各种论坛上都没有看到好的答案。假设我有一个简单的向量

```
x = runif(10,1,4)
> x
[1] 3.292108 1.388526 2.774949 3.005725 3.904919 1.322561 2.660862 1.400743
[9] 2.252095 3.567267
> 
```

接下来我计算一些分位数，

```
> z = quantile(x,c(0.1,0.8))
> z
 10%      80% 
1.381929 3.347140 
> 
```

我需要这个输出作为数据框。所以我尝试了以下

```
> y = data.frame(id = names(z),values=z)
> y
 id   values
10% 10% 1.381929
80% 80% 3.347140 
```

我看到“%”列重复了。当我尝试

```
> y$id[1]
[1] 10%
Levels: 10% 80% 
```

而我希望它只是“10%”或 0.1 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T23:38:05.840

名字只是概率所以

```
y <- data.frame(id = c(0.1, 0.8), values = z) 
```

会工作。

所以将它包装在一个返回的函数中`data.frame`

```
quantile_df <- function(x, probs, na.rm =F, names = F, type = 7, ...){
  z <- quantile(x, probs, na.rm, names, type)
  return(data.frame(id = probs, values = z))
}

quantile_df(x, probs = c(0.1, 0.8))
##    id   values
## 1 0.1 1.343383
## 2 0.8 2.639341 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T23:35:52.230

你得到了两次名字，因为你给出`data.frame`了两次名字——首先是作为一个向量，然后是作为命名向量的一部分。你得到`level`s 因为默认情况下`stringsAsFactors`is `TRUE`。

```
set.seed(1)
x <- runif(10,1,4)
z <- quantile(x, c(0.1, 0.8))
y <- data.frame(id=names(z), values=unname(z), stringsAsFactors=FALSE)
y
#   id   values
#1 10% 1.563077
#2 80% 3.701060

y$id[1]
#[1] "10%" 
```

# javascript - Javascript 替换 `sq-` 或 `sq.`

> ID：11443059
> 
> 赞同：1
> 
> 时间：2012-07-11T23:30:39.363
> 
> 标签：javascript, regex, replace

我想对包含的字符串进行替换，`sq-`或者`sq.`我正在考虑做这样的事情：

```
var imgSrc = event.dataTransfer.getData('Text');
    imgSrc = imgSrc.replace('sq-', 'mt-') || imgSrc.replace('sq.', 'mt.'); 
```

关于如何让这个工作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:33:38.360

你可以用一个正则表达式来做到这一点......

```
imgSrc = imgSrc.replace(/sq([.-])/g, 'mt$1'); 
```

[js小提琴](http://jsfiddle.net/GHeLf/)。

字符类将匹配一个文字`.`（因为它在字符类中失去了它的特殊含义）和一个文字`-`（看起来不像一个范围，所以它也没有特殊含义）。

匹配项放置在捕获组`1`中，在替换中引用了`$1`.

[一个正则表达式和两个 之间的性能测试](http://jsperf.com/one-regex-vs-two)。

# sql - 如何使用 SQL 创建矩阵

> ID：11443070
> 
> 赞同：5
> 
> 时间：2012-07-11T23:32:15.537
> 
> 标签：sql, sql-server-2008, matrix

使用这样的地理数据记录：

```
START                  |  END

CITY1    |   STATE1    |   CITY2    |  STATE2
----------------------------------------------
New York |    NY       |  Boston    |   MA
Newark   |    NJ       |  Albany    |   NY
Cleveland|    OH       |  Cambridge |   MA 
```

我想输出这样的东西，它计算显示为矩阵的 START/END 配对：

```
 |  MA  |  NJ  |  NY  |  OH
------------------------------
MA |  0   |  0   |  1   |  0
NJ |  0   |  0   |  1   |  0
NY |  1   |  0   |  0   |  0
OH |  1   |  0   |  0   |  0 
```

我可以看到如何`GROUP BY`以及`COUNT`将如何找到数据，但我不知道如何显示为矩阵。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T23:48:25.710

这似乎可以解决问题，并在 PostgreSQL 9.1 上进行了测试。它几乎肯定需要适应 SQL Server（任何人都可以随时更新我的​​答案）。

```
SELECT start AS state,
    SUM((dest = 'MA')::INT) AS MA,
    SUM((dest = 'NJ')::INT) AS NJ,
    SUM((dest = 'NY')::INT) AS NY,
    SUM((dest = 'OH')::INT) AS OH
FROM (
    SELECT state1 AS start, state2 AS dest
        FROM routes
    UNION ALL
    SELECT state2 AS start, state1 AS dest
        FROM routes
) AS s
GROUP BY start
ORDER BY start; 
```

但是请注意，我的输出与您的略有不同——我不确定这是因为您的示例输出错误，还是因为我误解了您的要求：

```
 state | ma | nj | ny | oh 
-------+----+----+----+----
 MA    |  0 |  0 |  1 |  1
 NJ    |  0 |  0 |  1 |  0
 NY    |  1 |  1 |  0 |  0
 OH    |  1 |  0 |  0 |  0
(4 rows) 
```

此查询通过查询表两次来工作，一次用于 state1 -> state2 路由，第二次用于 state2 -> state1 路由，然后将它们与`UNION ALL`.

然后对于每个目标状态，它`SUM()`为该行的原始状态运行一个。

这种策略应该很容易适应任何 RDBMS。

# javascript - 元素（背景图像）不透明度，但没有边框不透明度

> ID：11443071
> 
> 赞同：2
> 
> 时间：2012-07-11T23:32:24.743
> 
> 标签：javascript, html, css

我知道如何做[边框不透明度](https://stackoverflow.com/questions/4062001/css3-border-opacity/4062032#comment15097259_4062032)，如何做[背景图像不透明度](https://stackoverflow.com/questions/4183948/css-set-background-image-with-opacity)，但我想要一个**没有**边框不透明度的元素，打开背景图像不透明度。我不想在图像编辑器中修改图像，所以我正在寻找由 CSS 设置的不透明度。可能的？

在下面的 CSS 中，我想用清晰的不透明边框修改*“禁用”状态。*请指教...

使用示例：[this fiddle](http://jsfiddle.net/49Gdt/)

* * *

***按钮样式：***

```
 div.button, div.button:hover
  {
    background: none;
    border: 2px solid #6C7B8B;
    border-radius: 8px;
    clear: none;
    color: transparent;
    cursor: pointer;
    display: inline-block;
    filter: alpha(opacity=100);
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    float: none;
    height: 24px;
    margin-bottom: 0px;
    margin-left: 3px;
    margin-right: 0px;
    margin-top: 7px;
    opacity: 1;
    -moz-opacity: 1;
    outline: none;
    overflow: hidden;
    padding: none;
    vertical-align: top;
    width: 24px;
  } 
```

***点击效果：***

```
 div.button:active
  {
    left: 1px;
    position: relative;
    top: 1px;
  } 
```

***状态 DISABLED 的额外样式：***

```
 div.disabled, div.disabled:hover
  {
    cursor: default;
    filter: alpha(opacity=50);
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    opacity: 0.50;
    -moz-opacity: 0.50;
  }

  div.disabled:active
  {
    left: 0px;
    position: relative;
    top: 0px;
  } 
```

***状态 ON 的额外样式：***

```
 div.on, div.on:hover
  {
    border: 2px solid #007FFF;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:10:35.357

你的情况和[CSS 一样：用不透明度设置背景图片？](https://stackoverflow.com/questions/4183948/css-set-background-image-with-opacity)- 你想要一个透明的背景，但不透明的内容（边框对谁来说很重要）。

因此，在 CSS3 中没有这样的`background-image-opacity`，您只能构建一个透明图像或将两个元素相互放置，较低的元素包含图像（如那里的答案所建议的那样）。

但在你的情况下，对图像进行着色就足够了。例如，这可以通过从一开始就使用透明图像来完成，但要更改底层`background-color`。或者你会使用

```
<div class="button" title="Zoom!"><img src="icon.gif" alt="glasses" /></div> 
```

和

```
div.button.disabled img { opacity: .5; } 
```

这在语义上也更有意义。你应该远离那些内联样式。

（[更新小提琴](http://jsfiddle.net/49Gdt/1/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:20:31.063

您可以通过放置在按钮顶部的半透明伪元素使背景图像变暗，但不能通过边框：

![在此处输入图像描述](../Images/d861b12eacea08dc583d03c3b8eb7906.png)

```
 div.button {
    ...
    position: relative;
  }

  div.disabled:after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    background: rgba(255,255,255,0.7);
    border-radius: 6px;
  } 
```

请注意，我之所以建议这样做只是因为我喜欢挑战，我仍然认为 Bergi 的回答是这样做的“正确方式”。

[http://jsfiddle.net/NECyg/](http://jsfiddle.net/NECyg/)

# android - 适配器从不进入 getView 方法

> ID：11443072
> 
> 赞同：0
> 
> 时间：2012-07-11T23:32:29.277
> 
> 标签：android, android-tabhost, android-adapter

我有一个布局如下的选项卡应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <RelativeLayout
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:padding="3dp">
       <FrameLayout
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:layout_weight="1" />
       <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_alignBottom = "@android:id/tabcontent"
           />
    </RelativeLayout>
</TabHost> 
```

我想把`ListView`它叫做一个屏幕，所以我这样设计：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

和gridview看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#ffffff">

     <ImageView
        android:id="@+id/imageViewContent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />

        <TextView
        android:id="@+id/textViewCategoryName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:paddingLeft="8dip"
        />

</LinearLayout> 
```

我使用以下方法调用适配器：

```
SectionsAdapter adapter = new SectionsAdapter(Sections.this ,R.layout.sectionviewgridview,
                            appState.MainCategories);
                    // updating listview
                    setListAdapter(adapter); 
```

适配器看起来像：

```
public class SectionsAdapter extends ArrayAdapter<HashMap<String, String>>{

    ArrayList<HashMap<String, String>> mainCategories;

    private final Context context;

    public SectionsAdapter(Context context, int  ResourceId,
            ArrayList<HashMap<String, String>> items)
    {
        super(context, ResourceId);
         this.context = context;
         this.mainCategories = items ;

         Log.d("The count of the hash is",""+items.size()); 

    }

     @Override
public View getView(int position, View convertView, ViewGroup parent) 

{

        Log.d("xxxxxxxxxxxxxxxxxxxxxxxxxxxxx","I'm hereeeeeeeeeeeeeeeeeeeeeeeeee" );

        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.sectionviewgridview, parent, false);

         ImageView ImageViewObject = (ImageView)rowView.findViewById(R.id.imageViewContent);

         try {
                Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new java.net.URL(mainCategories.get(position).get("imageUrl")).getContent());
                 ImageViewObject.setImageBitmap(bitmap); 

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        Log.d(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",mainCategories.get(position).get("name"));

         TextView TextViewObject = (TextView) rowView.findViewById(R.id.textViewCategoryName);

         TextViewObject.setText(mainCategories.get(position).get("name"));

        return rowView;

}

} 
```

它从不记录`getView`方法中的内容。知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:48:57.903

如果您将`ArrayAdapter`调用扩展回超类，`super(context, ResourceId);`那么您必须确保覆盖该`getCount`方法以返回确切的数据大小，否则，适配器将不知道您要使用`mainCategories`作为下划线数据，并将创建一个`List`with大小`0`和`getView`方法不会被调用。我不确切知道您打算如何使用它`ArrayList`，`Maps`但请尝试将其添加到您的`SectionedAdapter`:

```
@Override
public int getCount() {
     return mainCategories.size();
} 
```

如果这不能解决问题，请添加有关您在做什么的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T15:17:24.587

我有同样的问题..

我的布局：

一个Relativelayout中定义的ListView和listview的内容是另外一个Relativelayout中定义的两个textview。

问题：

两个 textviews 的宽度被提到为 0dp，因此 getview 的位置为 0，不显示任何内容。

解决：

通过将两个文本视图的宽度提供给 wrap_content 来解决。

# c++ - 为什么 std::stof 在传递无法转换的参数时不抛出？

> ID：11443074
> 
> 赞同：4
> 
> 时间：2012-07-11T23:32:35.197
> 
> 标签：c++, visual-c++, stl

我正在做一个项目，我想接受表单的输入`{float}{single-letter-identifier}`，例如`15.6E`，或`10W`。

为此，我认为我可以获取输入字符串，去掉最后一个字母，然后检查是否可以使用`std::stof`. 这将嵌套在一个`try-catch`块中，并允许我通知用户输入无效。

[这里](http://open-std.org/JTC1/SC22/WG21/docs/papers/2010/n3126.pdf)的 STL 的开放标准（第 653 页）指出`std::stof`：

> `invalid_argument`如果 wcstod 或 wcstold 报告无法执行转换。

但是，它在传递无法转换的东西时不会抛出，例如`"48East"`. 重现此行为的代码示例如下：

```
std::wstring szString = L"48East";
try{
     float f = std::stof(szString);
} catch( ... )
{
     std::cout << "test" << std::endl;
} 
```

这是在 MSVC10 上以调试模式编译的`/Od`，所以我假设调用没有被优化掉。

我很感激任何帮助（或关于我在哪里误解/误读了规范的指导！）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T23:43:27.507

当我读到它时，它`stof`会尽可能多地转换输入字符串，直到找到它无法转换的东西。如果它不能转换它抛出的*任何东西*`invalid_argument`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T23:43:21.080

MSVC 实现从一开始就解析有效字符并成功转换它们，因此您的结果属于`48F`上述情况。相反，如果您有`"East48"`，您将按预期得到无效的参数异常。

**编辑：**此外，如果您传递可选的 index out 参数，该函数将报告未用于转换的无关紧要字符的索引。在上面的示例中，这将允许您执行以下操作：

```
std::wstring szString = L"48East";
try{
     size_t i(0);
     float f = std::stof(szString, &i);
     std::cout << f << szString.substr(i).c_str() << std::endl;
} catch( ... )
{
     std::cout << L"test" << std::endl;
} 
```

产生输出`48East`

# php - json_decode 返回一个 1 的数组

> ID：11443079
> 
> 赞同：0
> 
> 时间：2012-07-11T23:32:48.813
> 
> 标签：php, json, jsonp

我正在尝试将一些 JSON 解码为 php 数组。这是代码摘录：

```
$getfile="{"fname":"bob","lname":"thomas","cascade":"bthomas","loc":"res","place":"home 2"}";
$arr = json_decode($getfile, true);
$arr['day3'] = $selecter;
echo(print_r($arr)); 
```

唯一返回的是“1”。我检查了 JSONLint 并且它是有效的 json，所以我想知道为什么 json_decode 失败。我还尝试在向它添加 day3 键之前检查数组是什么，但我仍然返回一个“1”。任何帮助表示赞赏！

实际代码：

```
$getfile = "";
    $getfile = file_get_contents($file);
    if ($getfile == "") {
        writeLog("Error reading file.");
    }
    writeLog("getfile is " . $getfile);
    writeLog("Decoding JSON data");
    $arr = json_decode($getfile, true);
    writeLog("Decoded raw: " . print_r($arr));
    writeLog("Editing raw data. Adding data for day " . $day);
    $arr['day3'] = $selecter;
    writeLog(print_r($arr));
    $newfile = json_enconde($arr);
    writeLog($newfile);
    if (file_put_contents($file, $newfile)) {
        writeLog("Wrote file to " . $file);
        echo $newfile;
    } else {
        writeLog("Error writting file");
    } 
```

这些是 $file 的内容（它是一个文本文件）

```
{"fname":"Bob","lname":"Thomas","cascade":"bthomas","loc":"res","place":"home 2"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:43:43.150

~~我们仍然不知道您的文件中有什么。但是，如果：~~

 ~~```
"{"fname":"bob","lname":"thomas","cascade":"bthomas","loc":"res","place":"home 2"}" 
```~~ 

~~然后多余的外部双引号将破坏 JSON~~，[`json_decode`](http://php.net/json_decode)并将返回 NULL。用于[`json_last_error()`](http://php.net/json_last_error)找出。也可能是 UTF-8 BOM 或其他东西......

无论如何，`1`是 的结果[`print_r`](http://php.net/print_r)。print_r 直接输出，不需要回显。也用于调试而不是使用[`var_dump()`](http://php.net/var_dump)

* * *

更具体地说，您希望`print_r`返回输出（而不是布尔成功结果`1`），然后将其写入日志。

所以使用：

```
 writeLog(print_r($arr, TRUE)); 
```

注意`TRUE`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:55:01.927

首先，使用单引号。这将导致解析错误

```
$getfile= '{"fname":"bob","lname":"thomas","cascade":"bthomas","loc":"res","place":"home 2"}'; 
```

我假设你已经声明了 $selecter 并且它已经被分配了一些值。

从`echo(print_r($arr))`你不需要回声中删除回声。print_r 也会输出。如果使用 echo，它将在数组末尾显示 1。

工作代码：

```
$getfile = '{"fname":"bob","lname":"thomas","cascade":"bthomas","loc":"res","place":"home 2"}';
    $arr = json_decode($getfile, true);
    $selecter = 'foobar';
    $arr['day3'] = $selecter;
    print_r($arr); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-15T22:26:52.023

这样做时我遇到了这个问题：

```
if ($arr = json_decode($getfile, true)) {
    $arr['day3'] = $selecter;
    echo(print_r($arr));
} 
```

在 if 之外对其进行解码是解决方案。

# php - codeigniter：为什么每次我设置特定的路由规则时页面的 css/js 都不会被加载？

> ID：11443080
> 
> 赞同：0
> 
> 时间：2012-07-11T23:33:02.207
> 
> 标签：php, codeigniter, url, routing

我正在使用 codeigniter 构建我的网站，这里有一个给我带来麻烦的路由规则示例：

```
$route['updategamepage/(:num)'] = 'maincontroller/main/updategamepage/$1'; 
```

那么规则的格式/结构有什么问题吗？这是使用该规则的示例 url：

[http://www.mydomain.com/ci_website/updategamepage/6](http://www.mydomain.com/ci_website/updategamepage/6)

并且当该页面被加载时，css/js 不会与页面一起加载......知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:43:12.437

你的路由规则应该只适用于通过 CodeIgniter 的 index.php 文件路由的东西。该路由由应用程序的 .htaccess 文件决定。当您不希望它时，您的 htaccess 可能会将请求重定向到您的 .css 文件到 CodeIgniter。

最终，您可能会检查您的 Web 服务器日志，包括可能启用 mod_rewrite 日志记录，以查看实际发生的情况。

这是我用于 CodeIgniter 应用程序的示例 .htaccess：

（请注意，您必须更改顶部附近的 RewriteBase 指令）

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /app/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:58:03.940

`.htaccess`这是我在项目中经常使用的一个简短片段，它更容易理解。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|assets|shared|uploads|robots\.txt)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

它的作用是将每个不包含`index.php`, `assets`, `shared`,`uploads`的`robots.txt`URL 重定向到您的公共文件夹的 URL 之后到您的`index.php`文件，允许您将`$config['index_page']`值设置为 ''，这将使您的 URL 更令人赏心悦目和搜索引擎。没有这个，你就有了类似的 URL `http://www.mysite.com/index.php/pages/about`，有了它，你将拥有`http://www.mysite.com/pages/about`.

我个人将我的`JS`和`CSS`文件保存在`assets`文件夹中，但如果您想将它们保存在根文件夹中，只需将它们的文件夹名称添加到`.htaccess`我提供的文件的第二行，并用`|`符号分隔

```
RewriteCond $1 !^(index\.php|js|css|shared|uploads|robots\.txt) 
```

正如我在几分钟前对您的另一个问题的回答中所建议的那样，您最好删除您的`$config['base_url']`价值内容并让 CodeIgniter 为您完成这项工作 - 他做得非常好。

# facebook - 无法使用 facebook SDK 发布 facebook URL

> ID：11443082
> 
> 赞同：1
> 
> 时间：2012-07-11T23:33:17.183
> 
> 标签：facebook, facebook-graph-api, jsonp, facebook-javascript-sdk

我有一个网络应用程序，我用它来转发现有帖子，如下所示 1）使用[https://graph.facebook.com/UserID_postID?access_token=AAA](https://graph.facebook.com/UserID_postID?access_token=AAA)获取帖子详细信息（工作正常） 2）填写新帖子的数据旧的并尝试重新发送它，但是如果我使用 oldpost.link = newpost.link 它会出现一些奇怪的行为，但如果我使用 oldpost.link="\""newpost.link+"\""作品和帖子出现在 facebook 墙上，但链接显示为 invalid.invalid/

function getPost(userID, postID, token) { jQuery.getJSON("https://graph.facebook.com/" + userID + "_" + postID + "?access_token=" + token, function (post) { 这里是代码任何想法请

```
 var newPost = {};
    newPost.message = "hi";
      if (post.link != "" && post.link != null && post.link != "undefined") {
            newPost.link = "\"" + post.link + "\"";
        }
        if (post.name != "" && post.name != null && post.name != "undefined") {
            newPost.name = "\"" + post.name + "\"";
        }
        if (post.picture != "" && post.picture != null && post.picture != "undefined") {
            newPost.picture = "\"" + post.picture + "\"";
        }
        if (post.description != "" && post.description != null && post.description != "undefined") {
            newPost.description = "\"" + post.description + "\"";
        }

        doPost(newPost);
    });
}

function doPost(newPost) {

    FB.api('/me/feed', 'post',
              newPost, function (response) {
                    if (!response || response.error) {
                        alert(' Denied Access');
                    } else {
                        alert('Success');
                    }
                });
} 
```

# asp.net-mvc - 如何将匿名对象的集合从控制器传递给视图

> ID：11443086
> 
> 赞同：1
> 
> 时间：2012-07-11T23:33:40.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC 的新手，所以如果我的问题听起来很愚蠢或太简单，请原谅。我正在使用实体数据模型进行数据库访问。所以在我的模型文件夹中，我添加了一个 EDMX 文件，我可以从我的控制器和强类型视图中访问模型类。当我在控制器中访问多个表时会出现问题，例如

如果我的数据库中有以下表格：

```
 Departments(DepartmentID, DepartmentName, DepartmentPhone)
 Insurances(InsuranceID, InsuranceName, InsuranceAddress)
 Employees(EmployeeID, EmpFName, EmpLName, DepartmentID, InsuranceID) 
```

我想显示一个员工列表以及他们的部门和保险信息。

在我的控制器的操作方法中，我使用 EDM 访问数据库并以匿名类型获取信息：

```
 using (var context = new MyEntities())
        {
            var model = (from d in context.Departments
                         join e in context.Employees on d.DepartmentID equals e.DepartmentID
                         join I in context.Insurances on I.InsuranceID equals e.InsuranceID

                         select new
                         {
                             DepartmentID = d.DepartmentID,
                             EmployeeID= e.EmployeeID,
                             EmpFName= e.EmpFName,
                             EmpLName= e.EmpLName,
                             DepartmentName= d.DepartmentName,
                             InsuranceName= I.InsuranceName

                         }).ToList();

            return View(model);
        } 
```

我的模型文件夹中没有这种匿名类型的类，因此我无法创建强类型视图。那么将此列表传递给视图的最佳方法是什么？如果集合太大，使用 viewbag 将是一种过度杀伤力。为这个匿名类创建一个新模型听起来不正确，因为如果我在控制器操作方法中更改我的选择，它需要一直更新。

欢迎所有建议。我尝试查看有关 SO 的其他问题，但找不到任何相关内容。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:55:24.627

> 我的模型文件夹中没有这种匿名类型的类，所以我无法创建强类型视图

右键单击您的项目，添加新类 ... 现在您的模型文件夹中有一个类型。这是 ASP.NET MVC => 视图模型的方式。

然后显然你将这种类型传递给你的视图：

```
select new MyViewModel
{
    DepartmentID = d.DepartmentID,
    EmployeeID = e.EmployeeID,
    EmpFName = e.EmpFName,
    EmpLName = e.EmpLName,
    DepartmentName = d.DepartmentName,
    InsuranceName = I.InsuranceName
}).ToList(); 
```

当然现在你的视图变成了这个视图模型的强类型：

```
@model IEnumerable<MyViewModel>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:57:20.257

I'm afraid that predefined strongly-typed ViewModels are the way to go. It is a pain to have to update seemingly duplicate code in multiple places but in my experience it's only a problem for smaller projects. As the project grows you begin to see differences between database model objects (entities) and the viewmodels passed to your views, such as Validation and processing attributes and view-specific data, and when you get to that point you begin to prefer having separate Entity and ViewModel definitions.

However, back on-topic: an alternative solution to your problem is to use reflection to convert an anonymous type into a `Dictionary<String,Object>` object. Note that ASP.NET MVC does this for converting `new { foo = "bar" }`-syntax expressions into dictionaries for Route Values and HTML attributes already. Performance is acceptable, but don't try to do it for 10,000 objects for a single HTTP request otherwise you might get bogged down.

Here's what the code for that would look like:

```
Object anonymousType = new { whatever = "foo" };
Dictionary<String,Object> dict = new Dictionary<String,Object>();

foreach (PropertyDescriptor descriptor in TypeDescriptor.GetProperties(anonymousType )) {
    Object value = descriptor.GetValue(anonymousType );
    dict.Add( descriptor.Name, value );
} 
```

Of course this means that your Views won't benefit from compile-time type-checking and you'll have to maintain a documented list of dictionary keys (assuming you aren't iterating over keys in your view).

I'll note that I am surprised Microsoft didn't make anonymous types automatically implement IDictionary because it seems natural.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:50:57.750

[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)类型是你的朋友。

您可以将视图声明为松散类型，并具有动态模型

```
@model dynamic 
```

您将像在强类型视图中一样访问模型属性

```
<h1>Model.DepartmentId</h1> - <h2>Model.DepartmentName</h2>
<span>Model.EmployeeId</span> 
```

问题认为，动态包含内部属性，如果您使用的是 MVC2，则需要一个小[技巧](https://stackoverflow.com/questions/5120317/dynamic-anonymous-type-in-razor-causes-runtimebinderexception)才能使其工作。但似乎对于 MVC3 及更高版本，它不再需要。

# math - 设计组合学命名约定

> ID：11443092
> 
> 赞同：0
> 
> 时间：2012-07-11T23:34:27.770
> 
> 标签：math, probability, combinatorics

我偶然发现了一个我正在寻找智能解决方案的问题。这基本上是一个组合问题。

我有五个对象，我需要从中选择两个，我可以选择同一个对象两次，我选择它们的顺序无关紧要。这给了我（5 + 2 - 1 选择 2）= 15 种可能的组合。我现在想将每个组合（即 (1,1) 或 (2, 5)）减少到 1 到 15 之间的数字。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:40:11.500

准字典顺序。为每个选择分配其在字典顺序中的位置，第二个组件不小于第一个组件。

```
(i,j) -> (15 - (7-i)*(6-i)/2) + (j - i) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:51:16.870

假设你有一个组合 (i, j)

不失一般性，说 i <= j

```
((7-i)+5)*(i-1)/2 + (j-i+1) 
```

你会有

(1, 1)->1 (2, 2)->6 (3, 3)->10 (4, 4)->13 (5, 5)->15

(1, 2)->2 (2, 3)->7 (3, 4)->11 (4, 5)->14

(1, 3)->3 (2, 4)->8 (3, 5)->12

(1, 4)->4 (2, 5)->9

(1, 5)->5

基本上，您将首先在第 i 列之前获得组合数，然后加上 (j-i+1) 作为行号

# plone - “pip install Plone”安装错误

> ID：11443095
> 
> 赞同：2
> 
> 时间：2012-07-11T23:34:44.563
> 
> 标签：plone, pip

> $ pip install 克隆

安装了很多软件包，但随后因以下错误而中止：

```
 File "/Users/rob/.virtualenvs/plone/bin/../lib/python2.7/site.py", line 172, in addpackage
    exec(line)
  File "string>", line 1, in <module>
KeyError: 'z3c' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T23:34:45.967

`Plone`不支持通过 安装`pip`，即使它可以作为 Python 包与`pip search Plone`.

`#plone`我通过在IRC 频道上提出这个问题发现了这一点。

根据@SteveM 的评论，easy_install 和 setup_tools 无法处理具有与 Plone 一样多的依赖项的应用程序的所有已知良好设置问题。这就是构建的好处。

参考：
[错误的完整跟踪](http://pastebin.com/jhg6KRG0)
[失败的原因](http://plone.293351.n2.nabble.com/pip-install-Plone-td5287792.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T17:50:50.453

问题可能出在没有命名空间声明的 z3c.objpath 1.0 中。在 z3c.objpath 1.1 中修复并发布。

（尝试通过 pip 在 RTD 上构建 Plone 文档时，我遇到了同样的错误。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T11:13:41.887

如果您想使用 pip 安装 Plone，请尝试[plock](https://pypi.python.org/pypi/plock)。

# javascript - 如何创建以下数据结构的集合并使用 socket.io 发送？

> ID：11443097
> 
> 赞同：0
> 
> 时间：2012-07-11T23:34:59.577
> 
> 标签：javascript, node.js, collections, socket.io

我使用 node.js 和 socket.io。

我的mysql表中有这个数据结构：

```
TABLE USERS:
    Id: 1, Name: 'ABC1', ToUserId: 1
    Id: 2, Name: 'ABC2', ToUserId: 1
    Id: 3, Name: 'ABC3', ToUserId: 1
    Id: 4, Name: 'ABC4', ToUserId: 2
    Id: 5, Name: 'ABC5', ToUserId: 2
    Id: 6, Name: 'ABC6', ToUserId: 2
    Id: 7, Name: 'ABC7', ToUserId: 3 
```

我想将行（ID1 - ID3）作为集合发送给 UserId 1 的用户，将行（ID4 - ID6）发送给 UserId 2 的用户，将行（ID7）发送给 UserId 3 的用户。

如何创建集合并将集合发送给用户？

我读取数据如下：

```
getUsers: function(callback)
    {

        client.query(
            'SELECT * FROM users',
            function select(err, results, fields) {
                if (err) {
                    throw err;
                }

                var userslist = {};

                if (results.length > 0) {

                    for (var i = 0; i < results.length; i++) {
                        var row = results[i];                        

                    //Create colletion in object userslist
                    //Emit to specific user ------v                        
                    //io.sockets.socket(USER_ID).emit('sendusers', userslist ) 
                    }

                }
        else
                {
                    userslist = {}; 
                } 

                callback(userslist);
            }
            );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:14:01.013

您将需要存储套接字 ID 和用户 ID 之间的关联。

在您的客户端上，您需要发出当前用户的 USER_ID。

就像是

```
socket= io.connect();
socket.on('connect', function(data){
    socket.emit('init', user_id);
}); 
```

并且在您的服务器上需要设置 user_id。你可以做类似的事情

```
io.sockets.on('connection', function(socket) {
    socket.on('init', function(data) {
        socket.set('user_id', data, function(){
            console.log('user_id', data);
        });
    });
}); 
```

然后在您的控制器中，您可以检索所有套接字并循环它们。

```
//to get all connections
var sockets = io.sockets.clients();

//to get the user_id associated with the socket
socket.get('user_id', function(err, user_id){
    //do whatever you want!
    //ex: if(user_id == ...){ socket.emit('channel', 'value'); }
}); 
```

希望有帮助！

# c++ - 如何在 C++ 中将一列数字与不同长度的字符串行分开？

> ID：11443099
> 
> 赞同：0
> 
> 时间：2012-07-11T23:35:24.033
> 
> 标签：c++

在此先感谢您的帮助。我正在寻找具有以下格式的文件：

```
100      Every line has  
23452    A different number of words  
30       etc 
```

如果我使用逐行阅读的方法：

文件>>数字[i]>>字符串

它显然不起作用，因为字符串有空格。有谁知道我还能如何做到这一点？我只对将数字保存在数组中感兴趣。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:53:18.057

使用 fstream 有一种方法可以读取一行并在给定字符处停止（例如空格）：

来自[fstream 上的 C++ 参考](http://www.cplusplus.com/reference/iostream/istream/getline/)

> ```
> istream& getline (char* s, streamsize n, char delim ); 
> ```
> 
> 如果找到分隔符，则将其提取并丢弃，即不存储，然后开始下一个输入操作。

在此之后，您将拉出该行的第一段，转换为`int`或其他数字格式，使用另一个`getline`来抓取该行的其余部分（它会自动在换行符处分隔），然后重复。

# c++ - 如何实现双向链表？

> ID：11443108
> 
> 赞同：-2
> 
> 时间：2012-07-11T23:36:11.903
> 
> 标签：c++, linked-list, doubly-linked-list

我们在课堂上学习了如何实现单链表。我们的教授有点提到我们做双向链表，但显然它很容易，以至于他真的没有详细解释如何做。我真的很擅长使用单链表，但是有人可以告诉我如何制作双链表吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T23:55:21.803

如果你已经对单链表有了一个明确的定义，那么双链表就很简单了。

在你可能有类似的东西之前

```
struct link{
  struct link* next; //a pointer to the node that comes next
  int value;
} 
```

这将需要更改为

```
struct link{
  struct link* next; //a pointer to the node that comes next
  struct link* prev; //a pointer to the node that comes before
  int value;
} 
```

现在，您基本上可以通过在遍历列表时使用 previous 而不是 next 来反向执行操作。

请记住，在添加或删除时，您需要小心“簿记”，以使事情指向正确的事情。

我总是告诉学生在编写函数时画出链表中添加和删除的每一步。并始终确保您通过某处的指针保留对绘图中所有内容的引用，直到将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T23:42:51.430

@kratenko 有一个很好的观点，但为了便于访问，这里是一个简短的描述。

您的单链表具有向一个方向移动的指针：

头部*-> |数据| -> |数据| -> |数据| -> 空

对于双向链表，在两个方向上实现一个单向链表：

头* <-> |数据| <-> |数据| <-> |数据| <-> 尾巴*

其中 HEAD* 和 TAIL* 都是具有指向它们的 node* 成员的节点（在 DoublyLinkedList 类中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:15:49.340

您应该在头部和尾部添加“虚拟节点”。这将简化您的添加和删除方法（您不必考虑添加和删除头部和尾部，您只会认为“中间情况”）。

在结束程序之前，不要忘记用 NULL 替换您的虚拟节点。

# linux - 如何检查我的 Apache Web 服务器配置中的语法错误

> ID：11443115
> 
> 赞同：8
> 
> 时间：2012-07-11T23:36:59.063
> 
> 标签：linux, apache2, apache

如何检查我的 apache 服务器配置中的语法错误，而无需重新启动或重新加载规则？这最好从终端/命令行完成。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-10-29T02:17:31.607

如果语法没问题：

`sudo apache2ctl configtest`

将回复：

`Syntax OK`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-03T05:49:01.837

如果您没有 httpd，也可以使用它。

```
apachectl configtest 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T23:36:59.580

在 linux 上，你使用

```
/usr/sbin/httpd -t 
```

在 Windows 上，您将使用与 httpd.exe 文件等效的命令

# jquery - jQuery 减少代码以获得更好的可维护性？

> ID：11443119
> 
> 赞同：1
> 
> 时间：2012-07-11T23:37:10.420
> 
> 标签：jquery

在 jQuery 中你可以做

```
$("#id1, #id2").doSomething(); 
```

但是如果你有

```
var $id1 = $("#id1");
var $id2 = $("#id2"); 
```

有没有办法轻松地将它们组合在一起并执行 doSomething()？

```
$($id1, $id2).doSomething(); //ERROR 
```

只有两个元素很好，但如果我有超过 10 个元素。我需要重复做...

```
$id1.doSomething();
$id2.doSomething();
.... 
```

有没有简单的方法将它们分组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:41:53.223

您可以使用[`jQuery.add()`](http://api.jquery.com/add/)：

```
var $allIds = $id1.add($id2);
$allIds.doSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:48:21.830

我有一个提议：也许你可以为这些元素设置新的类。例如：

html代码：

```
<div>
    <div id="id1" class="exampleClass">...</div>
    <div id="id2" class="exampleClass">...</div>
</div> 
```

JavaScript 代码：

```
$(".exampleClass").doSomething(); 
```

这适用于所有元素。

# objective-c - 当我尝试在 XCode 中运行存档命令时出现问题

> ID：11443123
> 
> 赞同：3
> 
> 时间：2012-07-11T23:37:30.920
> 
> 标签：objective-c, facebook, sdk, archive

我正在制作一个带有 Facebook 验证的应用程序。它在模拟器和设备上运行良好。

但是，当我尝试“存档”（产品 => 存档）时，我收到此错误：

```
ld: library not found for -lfacebook_ios_sdk
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这些库没问题，否则它不会在模拟器/设备上编译。

我不知道这些信息是否相关，但我的项目是一个 ARC 项目。

有谁知道这个错误可能意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:20:30.163

我通过从我的链接二进制库中删除“libfacebook_ios_sdk.a”引用并再次添加它解决了这个问题。

我不知道为什么它有效，但有效！

# mysql - 如何选择表并计算其他表

> ID：11443124
> 
> 赞同：2
> 
> 时间：2012-07-11T23:37:34.297
> 
> 标签：mysql, sql, count

假设我有两张桌子：

顾客

```
 Name   |   id   |
-------------------
  Benny  |    1   |
  Wilson |    2   |
  Joe    |    3   |
  Austin |    4   | 
```

订单

```
 Product  |   id   |
---------------------
  TV       |    1   |
  Hifi-set |    1   |
  HTPC     |    1   |
  CD       |    1   |
  DVD      |    1   |
  CD       |    1   |
  DVD      |    1   | 
```

这就是我想要的结果：

```
 Name   | Orders |
-------------------
  Benny  |    7   |
  Wilson |    0   |
  Joe    |    0   |
  Austin |    0   | 
```

我不熟悉 SQL，但我尝试过：

```
SELECT c.Name FROM Customers AS c LEFT JOIN Orders AS o ON c.id=o.id GROUP BY c.Name 
```

但是得到了错误的结果：

```
 Name   | Orders |
-------------------
  Benny  |    4   |
  Wilson |    1   |
  Joe    |    1   |
  Austin |    1   | 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:41:02.270

尝试：

```
select 
   c.Name, 
   (select count(1) from Orders where ID=c.ID) 
from 
   Customers as c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:54:18.773

通过不使用`SubQuery`，您也可以`JOIN`代替。

```
SELECT   a.Name, COUNT(b.id)
FROM     Customers a LEFT JOIN Orders b
            on a.ID = b.ID
GROUP BY a.Name 
```

# jquery - 解决 $(window).resize

> ID：11443128
> 
> 赞同：0
> 
> 时间：2012-07-11T23:37:49.293
> 
> 标签：jquery, browser, resize

我有一个脚本，在 $(window).resize() 上需要隐藏列表中的 div。但是，因为我使用的是较旧的操作系统，所以我的浏览器不会实时调整大小。相反，它会留下一个要调整大小的痕迹，然后放手，它会调整大小。因此，下面的脚本只从列表中删除一个 div 而不是所有的冲突。我怎样才能解决这个问题？

jQuery：

```
$(window).resize(function () {
    movePivots();
});
    function movePivots() {
        var last_pivot = $("ul li:last");
        if ($("#container").width() - $("ul").width() <= 0) {
            last_pivot.remove();
        } else {

        }
    } 
```

CSS：

```
#container 
{
    float: left;
    width: 50%;
    min-width: 450px;
    max-width: 900px;
    height: 1000px;
    background-color: #eee;
}

#nav 
{
    float: left;
    background-color: #ddd;
    min-width: 450px;
    max-width: 900px;
    width: 100%;
}

ul 
{
    float: left;
    margin: 0;
    padding: 0;
    list-style: none;
    background-color: #ccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:41:29.070

使用 while 循环：

```
$(window).resize(function () {
    movePivots();
});
    function movePivots() {
        var last_pivot = $("ul li:last");
        while ($("#container").width() - $("ul").width() <= 0) {
            last_pivot.remove();
            last_pivot = $("ul li:last");
        }
    } 
```

# php - 基于先前选择的下拉选择

> ID：11443130
> 
> 赞同：0
> 
> 时间：2012-07-11T23:37:53.090
> 
> 标签：php, jquery, html

我有一个小问题。我正在几个城市、不同的日期和不同的时间举办一个活动。我正在用 jQuery / PHP / HTML 创建一个注册表单。我希望根据先前的选择显示选项。

我有 3 个城市 **“City1”“City2”“City3”**

而“City1”在
**“7 月 22 日”和“7 月 25 日”**

“7 月 22 日”有 2 场 **“下午 2 点”和“下午 5 点”**

我怎样才能开始使用这样的表格？请给我一个例子。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:57:08.343

Not going to do it for you, but I can give you a few hints. First, your select needs an onchange function, and they each need unique ids. e.g.

```
<select onchange='update' id='box1'> 
```

Next, your onchange function needs to detect the current element, and update the other boxes. I'd suggest storing the data as a multidimensional array. So the update will be something like this:

```
var id = this.options[this.selectedIndex].value;
var b2 = document.getElementById('box2');
while(b2.options.length > 0)b2.remove(0);//remove all options currently present
for(var i in boxoptions[id])b2.options[b2.options.length]=new Option(boxoptions[id]['name'], boxoptions[id]['value']);//add new options 
```

And, of course, you'll need the array of data, but you can figure the rest out yourself. That help?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:03:03.937

演示：http: [//jsfiddle.net/eJn8g/](http://jsfiddle.net/eJn8g/)

```
// data
var data = {
    "New York": ["July 20", "July 21"],
    "Miami": ["July 22", "July 23"],
    "San Francisco": ["July 24", "July 25"],
}

// populate menu1
for (var i in data) {
    $('#menu1').append('<option>' + i + '</option>');
}

// populate menu2 based on menu1's value
$('#menu1').change(function() {
    var key = $(this).val();
    $('#menu2').empty();
    for (var i in data[key]) {
        $('#menu2').append('<option>' + data[key][i] + '</option>');
    }
}).trigger('change'); 
```

# java - Tomcat中的关闭挂钩（必要）未运行

> ID：11443133
> 
> 赞同：4
> 
> 时间：2012-07-11T23:38:09.030
> 
> 标签：java, tomcat, shutdown

我有一个长时间运行的 cpu 和数据库密集型线程（以低优先级运行），可以由我的 tomcat 应用程序由管理员请求触发。

我为这个线程使用了一个关闭钩子，这样如果应用程序被强制停止，它可以在退出之前清理数据库状态。完美地在独立模式下工作，在 Eclipse 控制台中使用 control-C 和取消。

但是当在tomcat下运行时，当我做一个：

$CATALINA_HOME/bin/shutdown.sh

我通过调试日志验证了我的 servlet contextDestroyed 消息是由 tomcat 发送的，但是对于这个线程，消息无法阻止它，重要的是我的关闭挂钩永远不会触发。

我注意到其他人说使用 contextDestroyed 消息，但这对我不起作用，而且一些问题和答案暗示关闭挂钩在 tomcat 中适用于他们。

我正在使用 tomcat 6.0.35。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:50:30.427

> 我注意到其他人说使用 contextDestroyed 消息，但这对我不起作用

好吧，我认为您需要考虑如何**使其发挥作用**。

设置关闭挂钩的 webapp 不是正确的解决方案。

*   当您的 web 应用程序被 web 容器关闭时，关闭钩子将不会运行。这意味着如果您重新启动或重新部署您的 web 应用程序，您将遇到孤立的数据库线程问题。

*   如果你的关闭钩子最终运行，它可能会失败，因为你的 web 应用程序的其余部分已经被 web 容器关闭。例如，webapp 的 JDBC 连接池通常会被 nuked。请注意，作为 Tomcat 在重新部署时避免 PermGen 存储泄漏的策略的一部分，许多“核攻击”发生在幕后……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:32:57.273

> 我有一个长时间运行的 cpu 和数据库密集型线程（以低优先级运行），可以由我的 tomcat 应用程序由管理员请求触发。

为什么不运行这个进程外而不用担心 webapp、上下文事件、关闭钩子或任何腐烂？

关闭挂钩是一个杂物，正如@StephenC 所说，它们不会在您想要它们时触发。

# c++ - 位阵列程序

> ID：11443134
> 
> 赞同：1
> 
> 时间：2012-07-11T23:38:29.143
> 
> 标签：c++, bit-manipulation, bit-shift

所以我正在上暑期 OO 课程，明天我们将围绕这个项目进行测试。基本上，我们需要创建一个包含未指定位数的数组，并编写四个对该数组执行操作的函数- `Set() //set bit with given index to 1`、和。`Unset() //set bit with given index to 0``Flip() // change bit (with given index)``Query() // return true if the given bit is set to 1, false otherwise`

如果有人感兴趣，这里有一个完整的描述：http: [//pastebin.com/v7BCCYjh](http://pastebin.com/v7BCCYjh)和一些示例运行： http: [//pastebin.com/1ijh5p7p](http://pastebin.com/1ijh5p7p)

我遇到的问题是高级概念。我很确定我们打算在数组的每个索引中存储位的字节表示。如果这是真的，那么我完全不知道如何实现这些功能。如果有人能给我一些关于如何解决这个问题的指示（我需要在今晚之前对它有一个很好的理解，因为我必须为明天的期中写一些伪代码）我会非常非常感激。

`.h`如果有帮助，这是我的

```
//   bitarray.h
//
//   BitArray class declaration

#ifndef _BITARRAY_H
#define _BITARRAY_H

#include <iostream>
using namespace std;

class BitArray
{
   friend ostream& operator<< (ostream& os, const BitArray& a);
   friend bool operator== (const BitArray&, const BitArray&);
   friend bool operator!= (const BitArray&, const BitArray&);

public:
   BitArray(unsigned int n);    // Construct an array that can handle n bits
   BitArray(const BitArray&);   // copy constructor
   ~BitArray();                 // destructor

   BitArray& operator= (const BitArray& a);  // assignment operator

   unsigned int Length() const;            // return number of bits in bitarray

   void Set   (unsigned int index);        // set bit with given index to 1
   void Unset (unsigned int index);        // set bit with given index to 0
   void Flip  (unsigned int index);        // change bit (with given index)
   bool Query (unsigned int index) const;  // return true if the given bit
                       //  is set to 1, false otherwise

private:
   unsigned char* barray;          // pointer to the bit array
   int arraySize;
};

#endif 
```

还有我的构造函数：

```
BitArray::BitArray(unsigned int n){
    int size = sizeof(char);

    if(n%(8*size) != 0)
        arraySize = ((n/(8*size))+1);
    else
        arraySize = n/(8*size);

    barray = new unsigned char[arraySize];

    for(int i = 0; i < arraySize; i++)
        barray[i] = 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:47:51.377

对于`Set()`和`Query()`，找到包含您感兴趣的位的单词的位置。（您的代码似乎`char`用作单词。）然后，找到该位在该单词中的位置。创建一个寻址特定位的位掩码，您将需要一个移位运算符。回想一下最终将帮助您完成工作的位运算符。有时按位赋值运算符会更优雅。

你还记得 C++ 中的按位异或运算符吗？将此与从中学到的概念`Set()`一起实施`Flip()`。使用按位否定运算符最终实现`Unset()`.

请注意，您确定数组大小的方法过于复杂。回想一下，`ceil(a/b) == floor((a+b-1)/b)`在这里可能发生的情况。

`std::vector`如果允许，请考虑使用而不是普通数组。**以下剧透！**

> 这门课还有一个有趣的专业。

通过将您的班级变成一个模板来给您的老师留下深刻印象，您可以在其中指定实际的存储单元 ( `char`, `uint16_t`, ...) 作为参数。对于初学者来说，`typedef char WORD_TYPE`当您更改`WORD_TYPE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:57:03.757

您可以将整数数组视为位数组。

说，你有一个数组`A = [0xC30FF0C3, 0xC20FF0C3]`，你想访问*53*。少量。您可以找到包含*53*
的 an 的索引。bit doing which is和在 that doing中的位位置，即 21。`int`*`floor(53 / 32)``1``int``53 % 32`*

 *至于`Flip`功能...

好吧，你已经有了`Query(), Set(), Unset()`。

简单的

```
Flip(i) {
 Query(i) ? Unset(i) : Set(i)
} 
```

会做的工作。*

# jquery - jQuery 选择了错误的表的 colgroup

> ID：11443136
> 
> 赞同：0
> 
> 时间：2012-07-11T23:38:44.780
> 
> 标签：jquery, html, html-table, colgroup

我有以下两张表。我希望使用 jquery 将每个 colgroups 用鼠标悬停来突出显示。

```
<div id="one">
    <table border=1>
        <colgroup><colgroup><colgroup><colgroup>
            <thead>
                <tr>
                        <th>A</th>
                        <th>B</td>
                        <th>C</th>
                        <th>D</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                </tr>
            </tbody>
    </table>
</div>
<div id="two">
    <table border=1>
        <colgroup><colgroup><colgroup><colgroup><colgroup><colgroup>                        
            <thead>
                <tr>
                         <th>A</th>
                         <th>B</th>
                         <th>C</th>
                         <th>D</th>
                         <th>E</th>
                         <th>F</th>
                </tr>
            </thead>
                <tbdoy>
                <tr>
                         <td>1</td>
                         <td>2</td>
                         <td>3</td>
                         <td>4</td>
                         <td>5</td>
                         <td>6</td>
                </tr>
           </tbody>
       </table>
</div> 
```

这是jQuery：

```
$("table").delegate('td, th','mouseover mouseleave', function(e) {
              if (e.type == 'mouseover') {
                $("colgroup").eq($(this).index()).addClass("hover");
              }
              else {
                $("colgroup").eq($(this).index()).removeClass("hover");
              }
          }); 
```

jquery 适用于第一个表，但是当我转到第二个表的第一个列时，第一个表中的第一个列突出显示。表 2 的第 1-4 列都突出显示了表 1 的第 1-4 列。当我在第二个表中执行第五列时，第二个表中的第一列突出显示。第六列使第二列突出显示。

为什么一切都是这样抵消的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:12:38.590

我认为下面的代码将解决您的问题，但这是漫长的一天，所以它可能并不完美 :) 主要是您需要将您的 colgroup 集合减少到仅将鼠标悬停在当前表上。

```
$("table").delegate('td, th','mouseover mouseleave', function(e) {
          var $table = $(this).closest("table");
          if (e.type == 'mouseover') {
            $table.children("colgroup").eq($(this).index()).addClass("hover");
          }
          else {
            $table.children("colgroup").eq($(this).index()).removeClass("hover");
          }
      }); 
```

# javascript - 您如何检测和识别 Javascript/jQuery 冲突？

> ID：11443139
> 
> 赞同：3
> 
> 时间：2012-07-11T23:39:09.860
> 
> 标签：javascript, jquery, detection, conflict

我正在使用多个 jQuery 插件，虽然在单独的实现中尝试和测试了配置脚本，但插件的组合导致它们的行为要么无法按预期运行，要么根本无法运行。

是否有适当的方法或手段来检测 Javascript 中是否存在冲突，并专门识别冲突是什么，以解决它们？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:45:40.847

您需要 Firebug (Mozilla) 或 Web Inspector (Webkit)

# java - 如何通过 lightcouch 从 couchdb 获取 POJO

> ID：11443143
> 
> 赞同：2
> 
> 时间：2012-07-11T23:39:58.237
> 
> 标签：java, couchdb

ublicwith

```
List<User> users = client.view("user-fn/by-group").key(group).query(User.class); 
```

其中client是couchdb客户端，user-fn是设计文档，by-group是视图，

```
...
"by-group": {
       "map": "function(doc) {\n  if (doc.group) {\n    emit(doc.group, doc);\n  }\n}\n"
... 
```

我在列表中获得了正确数量的用户对象，但所有用户字段均为空。用户 pojo 必须是 bean 模式（带有 getter 和 setter），还是只有公共字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:16:36.877

我认为问题是缺少参数，`include_docs`应该设置为true。根据 lightcouch，代码应为：

```
List<User> users = client.view("user-fn/by-group").key(group).includeDocs(true).query(User.class); 
```

# ruby-on-rails - 使用关联和回形针附件复制 rails 对象

> ID：11443148
> 
> 赞同：2
> 
> 时间：2012-07-11T23:40:29.953
> 
> 标签：ruby-on-rails, paperclip, dup

我有一个有几个关联的对象。其中一些关联对象具有存储在 S3 中的回形针附件。如果我复制对象和关联，它可以正常工作，但附件不会被复制。

这在这里工作而无需获取图像：

```
copy_salon = @salon.dup 
copy_salon.about_us_versions = @salon.about_us_versions.collect{|about_us| about_us.dup} 
```

我试图得到这样的图像链接：

```
copy_salon = @salon.dup 
copy_salon.about_us_versions = @salon.about_us_versions.collect{|about_us| 
                                                                  about_us_dup = about_us.dup
                                                                  if about_us.about_us_image then about_us_dup.about_us_image = about_us.about_us_image end
                                                                  if about_us.team_image then about_us_dup.team_image = about_us.team_image end
                                                                  about_us_dup
                                                                } 
```

但后来我收到错误“无法将 nil 转换为字符串”，可能是因为并非所有图像都已设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:53:22.017

明白了，不优雅，但工作。我曾希望 dup 能用所有关联和附件复制我的对象。不是有什么宝石吗？

```
copy_salon = @salon.dup 
copy_salon.about_us_versions = @salon.about_us_versions.collect{|about_us| 
                                                                  about_us_dup = about_us.dup
                                                                  unless about_us.about_us_image.url == "/about_us_images/original/missing.png" then about_us_dup.about_us_image = about_us.about_us_image end
                                                                  unless about_us.team_image.url == "/team_images/original/missing.png" then about_us_dup.team_image = about_us.team_image end
                                                                  about_us_dup
                                                                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T12:33:28.723

通过覆盖`dup`，我得到了它更简单，至少对于回形针附件：

```
def dup
  duplicate = super

  # attachment_definitions is defined if model has paperclip attachments
  return duplicate unless self.class.respond_to?(:attachment_definitions)

  duplicate.tap do |d|
    self.class.attachment_definitions.keys.each do |name|
      d.send("#{name}=", send(name)) if send(name).exists?
    end
  end
end 
```

它可以这样定义，`ApplicationRecord`因此每个模型都可以从中受益。

# asp.net-mvc-3 - 使用 MVC3 网站获取 SQL 数据库错误

> ID：11443152
> 
> 赞同：0
> 
> 时间：2012-07-11T23:41:18.347
> 
> 标签：asp.net-mvc-3

因此，我在 Visual Studio 2010 中创建了一个 MVC3 (Razor) 网站。现在我想将它发布到服务器，但在我将文件发布并上传到服务器后不断收到以下错误消息：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

**堆栈跟踪**

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
  System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5103182
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +260
System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +389
System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject, Boolean withFailover) +197
System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +963
System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +316
System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +5119675
System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
System.Data.SqlClient.SqlConnection.Open() +125
WebMatrix.Data.Database.EnsureConnectionOpen() +44
WebMatrix.Data.<QueryInternal>d__0.MoveNext() +71
System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +4231764
WebMatrix.Data.Database.QuerySingle(String commandText, Object[] args) +103
WebMatrix.WebData.SimpleMembershipProvider.CheckTableExists(Database db, String tableName) +59
WebMatrix.WebData.SimpleMembershipProvider.CreateTablesIfNeeded() +55
WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider sMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +73
WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
ASP._Page__AppStart_cshtml.Execute() in *:\HostingSpaces\***\***.com\wwwroot\_AppStart.cshtml:3
System.Web.WebPages.ApplicationStartPage.<ExecuteInternal>b__3() +65
System.Web.WebPages.ApplicationStartPage.<GetSafeExecuteStartPageThunk>b__a(Action action) +7
System.Web.WebPages.ApplicationStartPage.ExecuteInternal() +78
System.Web.WebPages.ApplicationStartPage.ExecuteStartPageInternal(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +202
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +41

[HttpException (0x80004005): Exception of type 'System.Web.HttpException' was thrown.]
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +88
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application) +287
System.Web.WebPages.WebPageHttpModule.StartApplication(HttpApplication application, Action`1 executeStartPage, EventHandler applicationStart) +113
System.Web.WebPages.WebPageHttpModule.StartApplication(HttpApplication application) +71
System.Web.WebPages.WebPageHttpModule.Init(HttpApplication application) +217
System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +517
System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Exception of type 'System.Web.HttpException' was thrown.]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

这是我的 Web.Config 文件：

```
<configuration>
<system.web>
<customErrors mode="Off"/>
<authentication mode="Forms" />
<roleManager enabled="true" />
<pages maintainScrollPositionOnPostBack="true">
  <controls>
    <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
  </controls>
</pages>
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
  </assemblies>
  <buildProviders>
    <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider" />
  </buildProviders>
</compilation>
</system.web>
<connectionStrings>
<add name="WhimsicalFurnishingEntities" connectionString="metadata=res://*/App_Code.WhimsicalFurnishingModel.csdl|res://*/App_Code.WhimsicalFurnishingModel.ssdl|res://*/App_Code.WhimsicalFurnishingModel.msl;provider connection string=&quot;data source=localhost\sqlexpress;Database=DBNAME;Uid=USERNAME;Password=PASSWORD;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我的项目中是否缺少要添加的内容？我确信 localhost\sqlexpress 的数据源是正确的。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:17:30.420

如果您为 SQL Server 实例提供了正确的数据库连接字符串，那么您可以重新启动您的数据库服务器服务。然后再次尝试发布您的网站。请询问它是否不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:49:18.523

我假设您将其发布到不同的服务器，如虚拟专用主机？如果是这样，那么数据源是sqlexpress是很奇怪的。

Localhost\sqlexpress 用于通常安装在开发人员机器上的 SQLServer Express，如果它在生产服务器上，您通常会有 SQLServer Enterprise 或其他东西。

# xml - XSLT 从其他标签中的值创建新标签

> ID：11443158
> 
> 赞同：0
> 
> 时间：2012-07-11T23:41:36.260
> 
> 标签：xml, xslt, tags

请有人可以帮助一个真正挣扎的新手。我是 XSL 的新手，我无法解决这个问题。我可以将其关闭，但无法对`<Material_Data>`,`<Material>`和 `<Comp_Class>`标签进行排序。以下是源文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Variable_Attributes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\ZZ\Test Var Attribs.xsd">
    <Material>1</Material>
    <Comp_Class>Aerosol - Aluminium</Comp_Class>
    <Material_Data>
        <Field_Name>ZMDM_Diameter</Field_Name>
        <Field_Value>45</Field_Value>
        <Field_Name>ZMDM_Height</Field_Name>
        <Field_Value>60</Field_Value>
        <Field_Name>ZMDM_Supplier</Field_Name>
        <Field_Value>Tony</Field_Value>
        <Field_Name>ZMDM_Brimful</Field_Name>
        <Field_Value>78</Field_Value>
        <Field_Name>ZMDM_Size</Field_Name>
        <Field_Value>440</Field_Value>
    </Material_Data>
    <Material>2</Material>
    <Comp_Class>Aerosol Valves</Comp_Class>
    <Material_Data>
        <Field_Name>ZMDM_UoM</Field_Name>
        <Field_Value>EA</Field_Value>
        <Field_Name>ZMDM_Free_Text</Field_Name>
        <Field_Value>Test Aerosol</Field_Value>
        <Field_Name>ZMDM_Size</Field_Name>
        <Field_Value>18</Field_Value>
    </Material_Data>
</Variable_Attributes> 
```

我需要得到的是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Material_Data>
    <Material>1</Material>
    <Comp_Class>Aerosol - Aluminium</Comp_Class>
    <ZMDM_Diameter>45</ZMDM_Diameter>
    <ZMDM_Height>60</ZMDM_Height>
    <ZMDM_Supplier>Tony</ZMDM_Supplier>
    <ZMDM_Brimful>78</ZMDM_Brimful>
    <ZMDM_Size>440</ZMDM_Size>
    <ZMDM_UoM>EA</ZMDM_UoM>
</Material_Data>
<Material_Data>
    <Material>2</Material>
    <Comp_Class>Aerosol Valves</Comp_Class>
    <ZMDM_Free_Text>Test Aerosol</ZMDM_Free_Text>
    <ZMDM_Size>18</ZMDM_Size>
</Material_Data> 
```

任何帮助将非常感激。

提前致谢

史蒂夫

以下是我迄今为止尝试过的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <Material_Data>
            <xsl:for-each select="/Variable_Attributes/Material_Data/Field_Name">
                <xsl:variable name="val" select="current()"/>
                <xsl:variable name="val2" select="current()/following-sibling::*[1]"/>
                <xsl:element name="{$val}">
                    <xsl:value-of select="$val2"/>
                </xsl:element>
            </xsl:for-each>
        </Material_Data>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:21:30.570

而不是使用`xsl:for-each`, 尝试使用基于模板的方法。

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Variable_Attributes">
        <xsl:copy>
            <xsl:apply-templates select="Material_Data|@*"/>
        </xsl:copy>     
    </xsl:template>

    <xsl:template match="Material_Data">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="preceding-sibling::Material[1]"/>
            <xsl:apply-templates select="preceding-sibling::Comp_Class[1]"/>
            <xsl:apply-templates select="Field_Name"/>
        </xsl:copy>     
    </xsl:template>

    <xsl:template match="Field_Name">
        <xsl:element name="{.}">
            <xsl:apply-templates select="following-sibling::Field_Value[1]"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="Field_Value">
        <xsl:apply-templates select="node()"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<Variable_Attributes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="C:\ZZ\Test Var Attribs.xsd">
   <Material_Data>
      <Material>1</Material>
      <Comp_Class>Aerosol - Aluminium</Comp_Class>
      <ZMDM_Diameter>45</ZMDM_Diameter>
      <ZMDM_Height>60</ZMDM_Height>
      <ZMDM_Supplier>Tony</ZMDM_Supplier>
      <ZMDM_Brimful>78</ZMDM_Brimful>
      <ZMDM_Size>440</ZMDM_Size>
   </Material_Data>
   <Material_Data>
      <Material>2</Material>
      <Comp_Class>Aerosol Valves</Comp_Class>
      <ZMDM_UoM>EA</ZMDM_UoM>
      <ZMDM_Free_Text>Test Aerosol</ZMDM_Free_Text>
      <ZMDM_Size>18</ZMDM_Size>
   </Material_Data>
</Variable_Attributes> 
```

# mysql - MySQL：如何索引我的表以优化此查询？

> ID：11443177
> 
> 赞同：2
> 
> 时间：2012-07-11T23:43:40.407
> 
> 标签：mysql

我的表包含与对象相关的值的历史记录，它看起来像：

```
create table History (
    object_id  bigint  NOT NULL,
    value      int     NOT NULL,
    date       bigint  NOT NULL
); 
```

如何索引它以优化以下查询：

```
select * from History
    where object_id = ? and date < ?
    order by date desc
    limit ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:45:02.220

创建复合索引`object_id + date`

```
CREATE INDEX object_id_date ON History(object_id, `date`); 
```

# c# - 保存列表 到带有 EF 4.3 的数据库

> ID：11443178
> 
> 赞同：0
> 
> 时间：2012-07-11T23:43:40.627
> 
> 标签：c#, .net, entity-framework

我有一个与我的逻辑实体类相关的信息，它存储为`List<KeyValuePair<int,string>>`.

如何在我的 EF 代码优先实体类中反映这一点，以正确将此数据保存到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:02:27.033

当您的列表实体可以是另一个对象时，它可以被解析为一对多关系。所以在数据库中它将是两个具有一二多关系的表。

因此您可以将子实体添加到父实体

```
 Car car = new Car();
        car.Parts.Add(new Part()); 
```

汽车具有零件导航属性的位置定义了一对多零件关系

祝你好运！

# ios - 如何使长文本可访问

> ID：11443180
> 
> 赞同：0
> 
> 时间：2012-07-11T23:43:53.887
> 
> 标签：ios, text, accessibility, uiaccessibility

我正在尝试使我的应用程序更易于访问，但我遇到了问题。我的应用程序的一部分包含一些建议，每个建议都由一个`UIScrollView`长文本组成。（文字是`UIImage`我用Photoshop准备的）。

我想让它易于访问，以便用户可以听取所有建议并随时暂停。我想用，`UIAccessibilityLabel`但文字太长了。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:47:56.847

让我先说我不是 iOS 开发人员，而是一个长期盲目的 iOS 用户。

没有办法轻松地暂停文本阅读并在我知道的完全相同的位置继续阅读。根据文档，我发现`accessibilityLabel`它旨在提供可以在一个句子中传达的可访问性信息。我能想到的一个选项是测试是否使用`UIAccessibilityIsVoiceOverRunning`. 如果这是真的，您可以将您的文本放入文本视图中，并显示它而不是您的`UIImage`.

A`textView`将允许 VoiceOver 用户按字符、单词或行读取文本，这是可用的最佳选项。如果 VoiceOver 没有运行，您的测试将返回 false，`UIImage`将正常显示，用户不会看到任何不同。

# javascript - 使用 GET 方法的 AJAX 代码混淆

> ID：11443181
> 
> 赞同：1
> 
> 时间：2012-07-11T23:43:58.193
> 
> 标签：javascript, html, ajax, windows, web

我买了一本书，开始学习如何使用 AJAX，有人给了我一个练习任务，我必须在一个 div 中输入值，然后向她给我的网站执行 AJAX 获取请求，以便在正确的 div 中接收信息。也许我在这本书之后错误地执行了 AJAX 获取请求。如果有人能指出我正确的方向，我将不胜感激。这不适合学校，我没有网络脚本语言的经验，但愿意学习。看看我的javascript，也许你可以帮助我。我还不确定在收到信息后如何显示信息，但我确定我不想在点击提交按钮时加载另一个页面！

此外，我有一种奇怪的方式来排列我用 C++ 编程的代码大约 4 年了。我已经随着时间的推移开发了它，如果很难理解，我很抱歉。如果是这样，那么我可以将其格式化并重新发布。另外，我正在尝试学习如何使用 AJAX GET 方法，而不是 POST 方法。我想以 JSON 格式返回信息。

```
<html>

    <head>

            <style type="text/css">
                    #header {
                            text-align: left;
                    }
                    #wrapper {

                            margin:bottom;
                            width:100%;

                    }

                    #sub-left {
                            float:left;
                width:225px;
            height:215px;
            border:1px solid black; 
            position: relative;
            text-align: left;
                    }
                    #sub-right {
            padding-left: 52px;
                            float:left;
            width:60%;
            height:45%;
            border:1px solid black; 
            position: relative;
            text-align: left;

                    }
        #sub-leftmost {

                            float:left;
            width:10%;
            height:100%;
            position: relative;
            text-align: left;
                    }

            </style>

    <script type=”text/javascript”&gt;
    // function create GetXmlHttpObject
    function GetXmlHttpObject(){
    if (window.XMLHttpRequest){
    // code for IE7+, Firefox, Chrome, Opera, Safari
    return new XMLHttpRequest();
    }
    if (window.ActiveXObject){
    // code for IE6, IE5
    return new ActiveXObject(“Microsoft.XMLHTTP”);
    }
    return null;
    }

    function submitFormWithAjax(){
    var myAjaxGetrequest = new GetXmlHttpObject();

    var t2lName=document.testForm.namebox.value;
    var t2lEmail=document.testForm.ebox.value;
    var t2lAddress=document.testForm.addbox.value;
    var t2lPhone=document.testForm.phnbox.value;

    var parameters = "name=" + encodeURIComponent(t2lName) 
           + "&email=" +encodeURIComponent(t2lEmail)
           + "&address=" + encodeURIComponent(t2lAddress)
           + "&phone=" +encodeURIComponent(t2lPhone);

    myAjaxGetrequest.open("GET", "websitetosendandgetfrom.com" + parameters, true);
    myAjaxGetrequest.send( );

    if (myAjaxGetrequest.readyState==4){
    if(myAjaxGetrequest.status==200 || window.location.href.indexOf("http")==-1){
    document.getElementById("result").innerHTML=myAjaxGetrequest.responseText
    document.getElementById(“testForm”).style.display = “none”;
    }
    else    {
    document.getElementById(“testForm”).innerHTML=”An error has occured making the request”;
    }
    }
    }
    }   

</script>
    </head>

    <body>

<div id="wrapper">

    <div id="sub-leftmost">

    </div>
</div>

    <div id="wrapper">
    <div id="header"><h1>Quiz</h1></div>
    <div id="sub-left">
<form name = 'testForm'>
<FONT COLOR="CC3300",font size="5">&nbsp;&nbsp;&nbsp;<b>User Info</b></FONT>
<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Full Name: <br /><center><input type="text"  size="25" id =         "namebox" /></center>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email Address: <br /><center><input type="text"  size="25" id = "ebox" /></center>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address: <br /><center><input type="text"  size="25" id = "addbox" /></center>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phone Number: <br /><center><input type="text"  size="25" id = "phnbox" />
<a href=”#” onclick=”submitFormWithAjax();”&gt;Finished!</a>
</form>

    </div>
    </div>
<div id="wrapper">
    <div id="sub-right">

    </div>
</div>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:58:18.977

The request is asynchronous and will only call a callback function when its status changes.

Basically, all the code that depends upon the request's status change needs to be wrapped into the callback of the AJAX request:

```
myAjaxGetrequest.send();

myAjaxGetrequest.onreadystatechange = function() {
  if (myAjaxGetrequest.readyState==4){
    ... 
```

# jquery - 固定标题 - 当点击以下内容时切换到静态或绝对以滚动到屏幕外

> ID：11443191
> 
> 赞同：0
> 
> 时间：2012-07-11T23:45:03.513
> 
> 标签：jquery, scroll, positioning

一个非常基本的设置：*title-shim-container*。*垫片*确保在页面加载时，容器*保持*在窗口底部，以便为后台的视频直播腾出空间。

当*容器*向上滚动并点击*标题*时，标题将被推离屏幕并在其原始位置下降。*容器*由jQuery Isotope 插件相对定位；这是无法改变的。

我[在这里](http://jsfiddle.net/J2zQZ/2/)得到的第一部分。但是如何让第二部分工作呢？我只有这么远:(

```
jQuery.event.add(window, "load", shimming);
jQuery.event.add(window, "resize", shimming);

function shimming() {
    var wheight = $(window).height();
    $('#shim').css('height', (wheight - 63));
} // this part up to here works

$(window).bind("load resize scroll", function () {
    var wheight = $(window).height();
    console.log(wheight);
    var wscrolled = $(window).scrollTop();
    console.log(wscrolled); 
```

我在以前的帖子中要求这个没有提供小提琴，所以我最好删除那些帖子？

谢谢你的建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:23:57.207

我花了一秒钟才弄清楚你在问什么。小提琴中的评论实际上比你在这里的问题更有用，但我认为这抓住了你想要的：

```
if (wscrolled > wheight - 187) {
    $('#title').css('position', 'absolute');
    $('#title').css('top', (wheight - 123));
} else if (wscrolled <= wheight - 187) {
    $('#title').css('position', 'fixed');
    $('#title').css('top', 64);
} 
```

187 来自瓷砖的组合高度和边距以及垫片留下的间隙空间。123 是标题的高度和保持所有内容正确排列的间隙空间。

-- 已编辑 --

在我看来，值得添加一个 else if 条件，以防止在进行大量滚动时重复设置现有设置。

# jar - 如何创建其他人可能使用的 Maven 存储库？

> ID：11443193
> 
> 赞同：2
> 
> 时间：2012-07-11T23:45:43.857
> 
> 标签：jar, maven-3

我有一个托管在 github 上的项目。现在我想要的是，只要包含几行这样的代码，任何人都可以在他们的 maven 项目中使用我的库。

```
>    <dependency>
>       <groupId>org.anahata</groupId>
>       <artifactId>anahata-core</artifactId>
>       <version>1.0</version>    
     </dependency> 
```

我是 Maven 新手，所以请告诉我确切的步骤。它可以从 github 本身托管吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:55:05.390

[您可以按照此处](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)、[此处](http://jroller.com/holy/entry/releasing_a_project_to_maven)和[此处](http://wiki.ivonet.nl/display/JAVA/Get+you+maven+project+into+the+Maven+Central+Repository)发布的提示将您的项目托管在 Maven 中央存储库中。另请参阅[this question](https://stackoverflow.com/questions/1280470/maven-repository-for-google-code-project)和[this one](https://stackoverflow.com/questions/1662546/how-to-deploy-my-open-source-projects-using-mavens-central-repository)。

编辑：也是khmarbaise 建议的[Sonatype 指南](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)（上面的指南引用了它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:15:33.020

不要错过 Sonatype 的指南：

[https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)

# extjs - Extjs4：自定义网格列标题中的下拉菜单

> ID：11443196
> 
> 赞同：2
> 
> 时间：2012-07-11T23:46:51.343
> 
> 标签：extjs, extjs4

我想自定义网格面板中每个列标题的下拉列表。这个想法是为每一列设置一个过滤器（例如：

成绩（下拉菜单显示带有 K、1、2、4 作为过滤器的复选框） K 1 2 K 4

我找到了操纵下拉菜单的解决方案，但问题是这会改变所有下拉菜单，而不是每个下拉菜单。

[在列标题下拉菜单中添加自定义按钮 {EXTJS 4}](https://stackoverflow.com/questions/10348581/add-a-custom-button-in-column-header-dropdown-menus-extjs-4)

我将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:15:21.557

我最终最终使用了“网格过滤器功能 ux”，最好坚持使用 ext 设置的道路。

# java - 模型中的会话在播放框架中

> ID：11443198
> 
> 赞同：1
> 
> 时间：2012-07-11T23:47:10.690
> 
> 标签：java, playframework

在我的模型中，我有

```
 package models;

 import play.*;
 import play.data.validation.*;
 import play.db.jpa.*;
 import play.libs.*;
 import com.google.gson.JsonObject;
 import javax.persistence.*;
 import java.util.*;
 import play.mvc.*;
 public class User extends Model {
   public static void facebookOAuthCallback(JsonObject data){
    String email = data.get("email").getAsString();
    System.out.println(email);
    if(email!=null){
        Session session = new Session();
        session.put("user", user.email);
    }
 }
 } 
```

当执行此操作操作时，它会使**Session 无法解析为 type**。我做错了什么:(

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T07:25:48.150

您是否尝试过不将此代码放入您的模型中，而是将其放入您的控制器中。Session 是一个控制器概念，我认为将它与您的模型混合不是一个好主意。

# bash - 下载没有 wget 或 curl 的文件

> ID：11443199
> 
> 赞同：-1
> 
> 时间：2012-07-11T23:47:18.220
> 
> 标签：bash, download

在不使用 Wget 或 Curl 的情况下如何从命令行下载文件？

这将通过 HTTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:53:15.470

Lynx 也可以下载文件

```
lynx -source example.com > index.html 
```

# android - Android：如何在另一个菜单 xml 中包含一个菜单 xml？

> ID：11443201
> 
> 赞同：6
> 
> 时间：2012-07-11T23:47:19.767
> 
> 标签：android, xml, contextmenu, submenu

简单的问题。

我有我的子项目菜单：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/fp_pitcher"
        android:title="Pitcher">
    </item>
    <item
        android:id="@+id/fp_catcher"
        android:title="Catcher">
    </item>
<!-- SNIP ---> 
</menu> 
```

后来我想把它作为这个菜单的子菜单：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/teameditor_remove"
        android:title="Remove Player from Team">
    </item>

    <item
        android:id="@+id/teameditor_assignbattingposition"
        android:title="Assign Batting Position">
    </item>

    <item
        android:id="@+id/teameditor_assignfieldingposition"
        android:title="Assign Feilding Position">
        <!-- I want to include the submenu here-->
    </item>

</menu> 
```

[这里的问题](https://stackoverflow.com/questions/4337034/include-menu-in-menu-android)回答了这个问题——我不知道如何扩充子菜单。

我在想你在 onContextItemSelected 方法中给它充气 - 但充气需要一个菜单​​对象，它没有传递给 onContextItemSelected。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-09T23:49:41.660

遗憾的是，这在纯 XML 中是不可能的，但是有一种不使用手动`Menu.add*`方法的好方法：这是获取`Menu`实例以将另一个文件包含/膨胀到的方法：

```
inflater.inflate(R.menu.player, menu);
MenuItem fp_menu = menu.findItem(R.id.teameditor_assignfieldingposition);
inflater.inflate(R.menu.positions, fp_menu.getSubMenu()); // needs <menu /> 
```

您可以使用指定的将上述代码放入以下任何内容`inflater`：

*   `Activity.onCreateContextMenu(menu, v, menuInfo)`：`getMenuInflater()`
*   `Fragment.onCreateContextMenu(menu, v, menuInfo)`：`getActivity().getMenuInflater()`
*   `Activity.onCreateOptionsMenu(menu)`：`getMenuInflater()`
*   `Fragment.onCreateOptionsMenu(menu, inflater)`：`inflater`

### 菜单/播放器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/teameditor_remove"
          android:title="Remove Player from Team"
    />
    <item android:id="@+id/teameditor_assignbattingposition"
          android:title="Assign Batting Position"
    />
    <item android:id="@+id/teameditor_assignfieldingposition"
          android:title="Assign Feilding Position">
        <menu><!-- include: positions.xml --></menu>
    </item>
</menu> 
```

***空`<menu />`占位符很重要***，没有那个`getSubMenu()`就行`null`！

### 菜单/位置.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/fp_pitcher"
          android:title="Pitcher"
    />
    <item android:id="@+id/fp_catcher"
          android:title="Catcher"
    />
    <!-- SNIP ---> 
</menu> 
```

### 记下你的`onContextItemSelected`想法

> 我在想你在`onContextItemSelected`方法中膨胀它[...]

我认为如果您在 中为时已晚`onContextItemSelected`，因为您已经在处理将导致显示您是子菜单的事件......它还没有膨胀。你可以尝试同样的 inflate into `getSubMenu()`，但我不确定它会不会出现。最好在应该创建的地方创建菜单。

### 关于在同一菜单中多次包含同一子菜单的注意事项

***未经测试***如果您也需要将其充气，您将在/`positions.xml`遇到。解决它的一种方法是将变量转换为字段并将引用保存到两者`teameditor_assignbattingposition``onOptionsItemSelected``onContextItemSelected``findItem`

```
this.fp_menu = menu.findItem(R.id.teameditor_assignfieldingposition);
inflater.inflate(R.menu.positions, fp_menu.getSubMenu());
this.bp_menu = menu.findItem(R.id.teameditor_assignbattingposition);
inflater.inflate(R.menu.positions, bp_menu.getSubMenu()); 
```

然后在`on*ItemSelected`：

```
switch (item.getItemId()) {
    case R.id.fp_pitcher:
        if (item == fp_menu.findItem(R.id.fp_pitcher)) {
            // selected inside teameditor_assignfieldingposition
        } else if (item == bp_menu.findItem(R.id.fp_picther)) {
            // selected inside teameditor_assignbattingposition
        } else {
            throw new ImLostInMenusException();
        }
        return true;
}
return super.on*ItemSelected(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:58:09.187

这不是很漂亮，但是如果您需要在不复制 XML 内容的情况下执行此操作（这很容易）。当您扩充第二个菜单时，您还可以为`menu.findItem(R.id.teameditor_assignfieldingposition).getSubMenu().add(...)`要添加的每个项目执行 a。如果您在字符串数组资源中有字符串（“Pitcher”和“Catcher”），您可以遍历该数组以添加与原始数组相同的项目。或者，您可能需要解析其他菜单的 XML，我猜您可以通过膨胀它来欺骗它，然后使用它的`size()`and `getItem(int)`.

实际上，您可以将第一个菜单膨胀为 a `Menu`，然后使用`size()`and`getItem(int)`将`MenuItem`s 从中取出。然后，对于每个项目，您可以`add(menuItem.getGroupId(), menuItem.getItemId(), menuItem.getOrder(), menuItem.getTitle())`在`getSubMenu()`第二个菜单的`findItem(R.id.teameditor_assignfieldingposition)`. 这应该将第一个菜单的所有项目添加为该项目的子菜单。这意味着您正在扩充两个 XML 文件，但如果您想使用单独的 XML 文件，这是不可避免的，因为没有`<include>`用于菜单 XML 文件。我可能会正常膨胀第二个菜单（在 中`onCreateOptionsMenu(...)`），然后将第一个菜单添加为中的子菜单`onPrepareOptionsMenu(...)`（它给出了您在 中创建的菜单`onCreateOptionsMenu(...)`）。我认为您可以在 中完成所有操作`onCreateOptionsMenu(...)`，但我认为在 中修改菜单会更好`onPrepareOptionsMenu(...)`。

我认为第二种方法是我能找到的最佳解决方案，我将第一种选择作为替代方案以防万一。

# java - 如何在鼠标事件期间检测指定为菜单快捷方式掩码的按钮是否按下？

> ID：11443202
> 
> 赞同：0
> 
> 时间：2012-07-11T23:47:28.713
> 
> 标签：java, mouseevent

我正在处理一个 Swing 鼠标事件，我想知道在`Toolkit.getMenuShortcutKeyMask()`事件发生时指定的键掩码是否已关闭。我显然不能使用通常的`MouseEvent.isControlDown()`方法，因为我想在 Mac 上使用 Command 键，这在 Mac OS 上无法正常工作。

如果任何其他修饰键被按下，我也不希望它触发。我*只*希望它在 Ctrl/Command 是唯一按下的键时返回 true。我想我需要使用`MouseEvent.getModifiersEx()`，但我不肯定如何构建比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:39:28.973

我设法通过使用`getModifiers()`而不是做到这一点`getModifiersEx()`：

```
public static boolean isMenuShortcutKeyDown(MouseEvent me) {
    return me.getModifiers() == Toolkit.getDefaultToolkit().getMenuShortcutKeyMask();
} 
```

如果 using 有任何缺陷`getModifiers()`，请指出，但这似乎完美无缺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T23:51:26.343

因为修饰符提供了一个位掩码，并且其他修饰符可能同时处于活动状态，所以您不应该使用 ==，而是：

```
public static boolean isMenuShortcutKeyDown(MouseEvent me) {
    return (me.getModifiers() & Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()) != 0;
} 
```

# entity-framework - 实体框架投影：物化附加列表

> ID：11443205
> 
> 赞同：0
> 
> 时间：2012-07-11T23:47:40.877
> 
> 标签：entity-framework, ef-code-first

给定下面的（简化的）对象模型，我需要加载`Schedule`对应于给定的对象，但只加载该人正在使用的`Person`select es。`Class`

我正在使用投影来实现这一点，并且效果很好（除了 EF Profiler 抱怨连接过多）。

现在我有一个新的要求也加载`Person.FunFacts`. 我希望注释掉的代码`//FunFacts = s.Person.FunFacts,`能做到这一点。但是，事实并非如此。

我可以通过`schedule.FunFacts`在上下文仍处于活动状态时访问来实现我的目标。但是，这会创建额外的数据库往返行程。

**问题**：我可以修改我的投影以返回`schedule.FunFacts`而不通过代理延迟加载它吗？

**对象模型**（简化）

```
public class Schedule
{
    public int Id { get; set; }
    public Person Person { get; set; }
    public List<Class> Classes { get; set; }
}

public class Class
{
    public int Id { get; set; }
    public int Name { get; set; }
}

public class Person
{
    public int Id { get; set; }
    public Schedule Schedule { get; set; }
    public List<FunFact> FunFacts { get; set; }
}   

public class FunFact
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Text { get; set; }
} 
```

**实现代码**

```
var desiredPersonId = 42;
var classIds = new List<int> { 2, 3, 5, 7, 11 };
var schedule = (from sFilter in
                (from s in ctx.Schedules
                 where s.Person.Id == desiredPersonId
                 select new
                 {
                     Schedule = s,
                     Person = s.Person,
                     //FunFacts = s.Person.FunFacts,
                     Class = from c in s.Classes where classIds.Contains(c.Id) select c
                 }
                    ).AsEnumerable()
            select sFilter.Schedule).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:31:35.573

事实证明，`FunFacts`确实被选中，只是与 的实例无关`Schedule`。

受[一篇文章的](http://www.thejoyofcode.com/Projection_blows_includes_in_Entity_Framework.aspx)启发，我通过以下更改解决了这个问题：

```
var scheduleProjection = 
            (from s in ctx.Schedules
             where s.Person.Id == desiredPersonId
             select new
             {
                 Schedule = s,
                 Person = s.Person,
                 FunFacts = s.Person.FunFacts,
                 Class = from c in s.Classes where classIds.Contains(c.Id) select c
             }
                ).FirstOrDefault();

var schedule = scheduleProjection.Schedule;
schedule.FunFacts = scheduleProjection.FunFacts; 
```

# php - mysql 真正的转义字符串 - 这是正常的吗？

> ID：11443206
> 
> 赞同：3
> 
> 时间：2012-07-11T23:47:40.803
> 
> 标签：php, mysql, mysqli, mysql-real-escape-string

当我使用 mysqli->real_escape_string 并向数据库添加字符串值（例如“who's”）时，它会添加字符串而不以任何方式修改引号。当我检查数据库时，其中的值是“谁”。

当我不使用 mysqli->real_escape_string 并添加带有单引号的字符串时，例如“who's”，它不会被添加到数据库中。它无处可寻。

这不正常，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:50:47.337

是的。以比这更详细的方式回答这个问题有点困难。

`real_escape_string()`只对数据进行*转义*，以便可以在查询中安全地使用它，它不会以任何方式修改它。如果您不对其进行转义，则查询中会出现语法错误，因此会失败 - 并且不会插入数据。

然而，逃避数据的最安全方法是使用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:53:08.700

这是正常的，*也是*正确的。允许将`real_escape_string`您的字符串添加到数据库中（包括引号）。没有它，撇号会干扰 SQL，因此可能会引发错误，这就是它“无处可寻”的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:31:07.953

所做的是，它**仅在**将必要的字符添加到数据库中时才`real_escape_string`转义这些字符。所以这就像在 PHP 中转义字符串中相同类型的引号，例如：

 **```
$str = 'We escape single quotes like in O\'Connor'; 
```

并且单引号（撇号）是为了防止代码中断，但字符串值实际上并不包含它。同样……</p>

```
INSERT INTO table (`name`) VALUES ('O\'Connor') 
```

在此示例中，反斜杠不会插入行中。当然，这是出于安全原因。检查[Hackipedia 的页面](http://hakipedia.com/index.php/SQL_Injection)以查看一些可能的情况。

希望这是你要问的。**

# c# - 需要从文件中提取路径信息以在同一位置创建新文件

> ID：11443207
> 
> 赞同：0
> 
> 时间：2012-07-11T23:47:40.977
> 
> 标签：c#, filesystems

我正在尝试遍历具有数千个子目录的目录。在每个子目录中都有一个 .nfo 文件。

```
D:\Test\
D:\Test\Dir1\
D:\Test\Dir1\file1.nfo
D:\Test\Dir2\
D:\Test\Dir2\file2.nfo
D:\Test\Dir3\
D:\Test\Dir3\file3.nfo 
```

我正在使用 Xdocument 从中解析一些信息，并且我需要在与源 .nfo 文件相同的位置创建一个新文件。

```
D:\Test\
D:\Test\Dir1\
D:\Test\Dir1\file1.nfo
NEW FILE: D:\Test\Dir1\info.nfo
D:\Test\Dir2\
D:\Test\Dir2\file2.nfo
NEW FILE: D:\Test\Dir2\info.nfo
D:\Test\Dir3\
D:\Test\Dir3\file3.nfo
NEW FILE: D:\Test\Dir3\info.nfo 
```

我想我拥有所有基本部分，但我不知道如何在与源文件相同的位置创建新文件。

这是我到目前为止所拥有的：

```
string strID = null;
string[] filesNFO = Directory.GetFiles(@"D:\Test\", "*.nfo", SearchOption.AllDirectories); 

foreach(string file in filesNFO)  
{
     var doc = XDocument.Load(file);
     strID = doc.Root.Element("id") == null ? "" : doc.Root.Element("id").Value;

     FileStream fs = new FileStream("info.nfo", FileMode.Create);
     StreamWriter info = new StreamWriter(fs);
     info.Write("http://powerhostcrm.com/" + strID);
     info.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:07:48.513

缺少的部分是*将*新文件保存到的位置。如果是这种情况，请`file`从 中`filesNFO`获取并获取目录。我还建议将所有内容都包含在 using 语句中：

```
string strID;
string[] filesNFO = Directory.GetFiles( @"D:\Test\", "*.nfo", SearchOption.AllDirectories );

foreach( string file in filesNFO )
{
    var doc = XDocument.Load( file );
    strID = doc.Root.Element( "id" ) == null ? "" : doc.Root.Element( "id" ).Value;

    string directory = Path.GetDirectoryName( file );
    string infoNfo = Path.Combine( directory, "info.nfo" );

    using( var fs = new FileStream( infoNfo, FileMode.Create ) )
    using( var info = new StreamWriter( fs ) )
    {
        info.Write( "http://powerhostcrm.com/" + strID );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:08:17.327

```
foreach(string file in filesNFO)  
{
   FileInfo info = new FileInfo(file);
   string current_dir = info.DirectoryName;
   string newFileBane = current_dir + @"\newfilename.nfo";

   //open filestream
   //write to filestream
} 
```

# objective-c - 在一个动作中观察多个视图的触摸

> ID：11443213
> 
> 赞同：2
> 
> 时间：2012-07-11T23:48:11.543
> 
> 标签：objective-c, ios, cocoa-touch, events, touch

我有一个带有 3 个独立子视图的父视图。子视图在父视图中展开，没有重叠（并且中间有一些空间）。当用户在屏幕上移动她的手指（不抬起它）时，我想在他们进入和退出每个子视图时跟踪触摸。

**示例**：如果用户开始触摸屏幕上子视图之外的某个位置，然后在子 1 上、从子 1 上、在子 2 上滑动手指，然后松开，我希望这些事件会被触发：

1.  触摸开始
2.  触摸进入孩子 1
3.  触摸退出的孩子 1
4.  触摸进入孩子2
5.  触摸结束

似乎 touchesBegan:withEvent: 和 touchesEnded:withEvent: 方法在这种情况下会有所帮助，但是当我在子视图控制器上定义它们时，它们并没有完全按照我的意愿做——如果用户开始触摸外部子视图，然后在子视图上滑动，子视图本身不会触发任何触摸事件。

**当前解决方案**：我目前正在使用一种感觉非常糟糕的解决方案来完成此任务。我在父级上观察 touchesBegan:withEvent:、touchesEnded:withEvent: 和 touchesMoved:withEvent:，获取每个事件的坐标，并确定它们是否位于子级范围内。如果他们这样做，我会触发上述适当的事件。

这种方法大多有效，但感觉效率很低。感觉框架应该为我处理这项工作。我的状态管理代码有时也会错过“进入”或“退出”触发器，我怀疑这是因为触摸事件要么被丢弃，要么以意外的顺序出现。我在这里错过了更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:15:52.647

最简单的解决方案是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
    [self.view addGestureRecognizer:pan];

    // Do any additional setup after loading the view.
}

- (void)pan:(UIPanGestureRecognizer *)sender
{
    static NSInteger startViewIndex;
    static NSInteger endViewIndex;
    CGPoint location = [sender locationInView:self.view];

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        if (CGRectContainsPoint(self.view0.frame, location))
            startViewIndex = 0;
        else if (CGRectContainsPoint(self.view1.frame, location))
            startViewIndex = 1;
        else if (CGRectContainsPoint(self.view2.frame, location))
            startViewIndex = 2;
        else 
            startViewIndex = -1;
    }
    else if (sender.state == UIGestureRecognizerStateEnded)
    {
        if (CGRectContainsPoint(self.view0.frame, location))
            endViewIndex = 0;
        else if (CGRectContainsPoint(self.view1.frame, location))
            endViewIndex = 1;
        else if (CGRectContainsPoint(self.view2.frame, location))
            endViewIndex = 2;
        else 
            endViewIndex = -1;

        if (startViewIndex != -1 && endViewIndex != -1 && startViewIndex != endViewIndex)
        {
            // successfully moved between subviews!
            NSLog(@"Moved from %1d to %1d", startViewIndex, endViewIndex);
        }
    }
} 
```

也许更优雅一点是定义您自己的自定义手势识别器（这样，如果您不从您的一个子视图中拖动，它将失败，这将允许您在其他地方工作的其他手势识别器......可能除非您使用多个手势识别器，否则这不是问题；它还将手势逻辑的血腥细节与视图控制器的其余部分隔离开来）：

```
@interface PanBetweenSubviewsGestureRecognizer : UIPanGestureRecognizer
{
    NSMutableArray *_arrayOfFrames;
}

@property NSInteger startingIndex;
@property NSInteger endingIndex;

@end

@implementation PanBetweenSubviewsGestureRecognizer

@synthesize startingIndex = _startingIndex;
@synthesize endingIndex   = _endingIndex;

- (void)dealloc
{
    _arrayOfFrames = nil;
}

- (id)initWithTarget:(id)target action:(SEL)action
{
    self = [super initWithTarget:target action:action];
    if (self)
    {
        _arrayOfFrames = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)addSubviewToArrayOfFrames:(UIView *)view
{
    [_arrayOfFrames addObject:[NSValue valueWithCGRect:view.frame]];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];

    for (NSInteger i = 0; i < [_arrayOfFrames count]; i++)
    {
        if (CGRectContainsPoint([[_arrayOfFrames objectAtIndex:i] CGRectValue], location)) 
        {
            self.startingIndex = i;
            return;
        }
    }

    self.startingIndex = -1;
    self.endingIndex = -1;
    self.state = UIGestureRecognizerStateCancelled;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];

    for (NSInteger i = 0; i < [_arrayOfFrames count]; i++)
    {
        if (CGRectContainsPoint([[_arrayOfFrames objectAtIndex:i] CGRectValue], location)) 
        {
            self.endingIndex = i;
            return;
        }
    }

    self.endingIndex = -1;
    self.state = UIGestureRecognizerStateCancelled;
}

@end 
```

然后您可以按如下方式使用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    PanBetweenSubviewsGestureRecognizer *pan = [[PanBetweenSubviewsGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
    [pan addSubviewToArrayOfFrames:self.view0];
    [pan addSubviewToArrayOfFrames:self.view1];
    [pan addSubviewToArrayOfFrames:self.view2];

    [self.view addGestureRecognizer:pan];

    // Do any additional setup after loading the view.
}

- (void)pan:(PanBetweenSubviewsGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded && sender.startingIndex >= 0 && sender.endingIndex >= 0 && sender.startingIndex != sender.endingIndex)
    {
        // successfully moved between subviews!
        NSLog(@"Moved from %1d to %1d", sender.startingIndex, sender.endingIndex);
    }
} 
```

# android - 我可以使用 phonegap 通过听筒扬声器播放音频吗？

> ID：11443218
> 
> 赞同：1
> 
> 时间：2012-07-11T23:48:34.197
> 
> 标签：android, html, cordova

谁能告诉我如何以及在哪里可以修改 Phonegap 源以通过听筒播放音频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:29:59.633

试试这个代码：

```
private AudioManager m_amAudioManager;  
m_amAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
m_amAudioManager.setMode(AudioManager.MODE_IN_CALL); 
m_amAudioManager.setSpeakerphoneOn(false); 
```

还需要添加新权限：

```
MODIFY_AUDIO_SETTINGS 
```

将此代码放在您的活动开始（`onCreate()`）中，或者您需要编写一个插件以根据您对 javascript 的要求启用/禁用它。

查看这篇文章了解更多 [Android - 让音频通过耳机播放](https://stackoverflow.com/questions/2119060/android-getting-audio-to-play-through-earpiece)

# php - 从基于 Web 的 (PHP) 应用程序打开 Windows 资源管理器

> ID：11443219
> 
> 赞同：0
> 
> 时间：2012-07-11T23:48:56.363
> 
> 标签：php, windows, explorer

我正在为我工​​作的公司使用 PHP/MySql/Javascript 开发一个 Web 应用程序。此应用程序需要能够打开 Windows 资源管理器以查看存储在网络 (I:) 驱动器上的文件。

我发现的一切都表明，这在浏览器应用程序中是不可能的——它必须是可能的。我玩过 exec(), , header(Location: I:)...这一切似乎都是简单的解决方案 --- 否定的 Ghostrider。

帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:13:53.570

Internet Explorer 6 可让您通过以下方式执行此操作`window.open('file:///K:/');`（抱歉，这是我在 Linux 机器上能做的最好的事情。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T00:44:13.390

由于安全功能。它不适用于所有浏览器。如果你足够绝望，你可以拼凑一个 java apple 或 flash 来做。但是您可能需要在浏览器上物理设置安全描述符。

# javascript - 使用嵌套 div 对 Jquery 显示/隐藏进行故障排除

> ID：11443220
> 
> 赞同：1
> 
> 时间：2012-07-11T23:49:05.883
> 
> 标签：javascript, jquery, hide, show, show-hide

我已经设法让这个工作：

```
<!--
function resettoggle() {
document.getElementById('imagecarousel').style.display = 'none';

}

function displayImages() {
                document.getElementById$('#imagecarousel').style.display="block";

            }

  $('#imagecarousel').fadeIn("slow", function() {
  // Animation complete

    $('#portfolio').click(function () {
  $("#imagecarousel").toggle();

});
});

--> 
```

并将 onLoad="resettoggle()" 添加到正文标签

我现在只需要两件事的帮助：

1.  我将 div 设置为 fadeIn，但它似乎以光速飞入。

2.  当页面加载时，您会看到幻灯片在消失之前闪烁。不确定如何以使隐藏的 div 完全看不见的方式实现 resettoggle 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:52:30.653

你可以使用[`fadeToggle()`](http://api.jquery.com/fadeToggle/)：

> 通过设置不透明度动画来显示或隐藏匹配的元素。

```
$("#portfolio").click(function () {
   $("#imagecarousel").fadeToggle("slow");
}); 
```

# mysql - 此 CREATE TABLE 语句中的语法错误在哪里？

> ID：11443226
> 
> 赞同：-1
> 
> 时间：2012-07-11T23:49:55.817
> 
> 标签：mysql

```
CREATE TABLE Child (
   chil_id INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
   child_fname VARCHAR(20) NOT NULL,
   child_sname VARCHAR(20) NOT NULL,
   child_dob DATE NOT NULL,
   child_gender ENUM('M','F') DEFAULT 'M',
   parent_id INT NOT NULL),
 CONSTRAINT FOREIGN KEY (parent_id) references Parent (parent_id) )
 ENGINE=InnoDB; 
```

错误信息：

> 您的 sql 语法有错误。检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 8 行的 'CONSTRAINT FOREIGN KEY(parent_id) references Parent (parent_id) ) ENGINE=InnoDB 附近使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:23:20.883

问题出在这一行：

```
parent_id INT NOT NULL), 
```

括号关闭列/约束声明，但在此*之后*包含一个约束，这会引发错误。删除那个括号，你应该被设置。正确的代码应该是这样的：

```
CREATE TABLE `Parent` (
  `parent_id` INT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`parent_id`)
  ) Engine=InnoDB;

CREATE TABLE Child (
   chil_id INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
   child_fname VARCHAR(20) NOT NULL,
   child_sname VARCHAR(20) NOT NULL,
   child_dob DATE NOT NULL,
   child_gender ENUM('M','F') DEFAULT 'M',
   parent_id INT NOT NULL,
 CONSTRAINT FOREIGN KEY (parent_id) references Parent (parent_id) )
 ENGINE=InnoDB; 
```

显然，我在猜测 的表结构`Parent`，因为我只需要一个表来满足`parent_id`. 您可以验证这在[fiddle](http://www.sqlfiddle.com/#!2/806b9)中是否有效。

最后，您确实应该查看[此答案](https://stackoverflow.com/a/11218752/869912)中标题为“**有关如何有条不紊地修复此类错误的更多信息**”的部分，因为它会使调试`CREATE TABLE`语句对您来说更容易（正如之前所建议的那样[）](https://stackoverflow.com/a/11471865/869912)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T02:28:10.673

你有太多的右括号。

行中的最后一个括号

`CONSTRAINT FOREIGN KEY (parent_id) references Parent (parent_id) )`

是多余的。删除它并重试。

# ios - 离线使用 Mapkit

> ID：11443228
> 
> 赞同：2
> 
> 时间：2012-07-11T23:50:12.357
> 
> 标签：ios, mapkit, offline

我想在我的应用程序中离线使用 Mapkit 框架，因此用户不必使用漫游来下载图块。我看过其他使用谷歌地图的地图，并且无需先下载它们就可以在应用程序中使用图块。

怎么可能做到这一点？cached.db 中的缓存切片是否可以保存在项目中的某个位置，以便它们默认存在？我需要创建一个叠加层吗？

我已经看到了许多类似的问题，但我仍然认为那里可能会有答案。谷歌真的不允许离线使用他们的地图图像吗？

我知道我可以使用 mapbox，但我也确信我看到的示例没有使用 mapbox。

我搜索过的许多线程中的一个： [iOS 的离线 MapKit 解决方案](https://stackoverflow.com/questions/10524317/offline-mapkit-solution-for-ios)

非常感谢！安德拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T00:59:02.063

不幸的是，这在 iOS 上是不可能的，既没有用于缓存的 API，也没有在使用条款中允许。正如您已经说过的，允许离线映射的唯一方法是使用其他地图框架，如 Mapbox。然而，MKMapView 会缓存一些切片，只要您在连接互联网时加载它们，您只是无法控制缓存多少切片或缓存多长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T06:56:35.507

您可以使用叠加技术。只需下载一个 geojson 文件并从包含坐标的文件中获取数据。使用叠加绘制这些坐标。此方法将在离线模式下将您的叠加显示为地图。

# persistence - grails：当域类是持久性注释 POJO 时标记字段瞬态

> ID：11443232
> 
> 赞同：1
> 
> 时间：2012-07-11T23:50:32.293
> 
> 标签：persistence, pojo, grails-2.0

我有一个域类的持久性注释 POJO 并且一切正常，但我无法弄清楚如何使其中一个字段瞬态。我在课堂上看到的例子和瞬态领域。这可以在控制器中完成吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:53:10.313

原来我必须在 POJO 本身中注释该字段：

```
@Transient
String someString;
// getters, setters, etc. omitted for brevity 
```

# java - 洗牌链表Java

> ID：11443233
> 
> 赞同：1
> 
> 时间：2012-07-11T23:50:33.610
> 
> 标签：java, random, linked-list, shuffle

我很难为改组算法使用伪代码并将其转换为有效的 Java 代码。我正在尝试对链表进行洗牌。总的来说，该方法获取链表头的指针，并随机返回指向同一个链表头的指针。我想使用我创建的 getLength 和 getItem 方法。

```
public static ListElement shuffle(ListElement head){
  head = head.getLength();
  ListElement head2= null;
  while( head == null) {
    int random = (int) Math.random() *  n;
    for(int i=0;i<random;i++){
        head= head.getNext();
    }
  }
  return head;    
} 
```

伪代码：

```
A list L of length n
A new list R, empty
while L is not empty
   pick a random k 
   such that 0<=k<= (length L)
   remove the kth element of L
      call it e
   prepend e to R 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:06:48.830

```
head = head.getLength(); 
```

看起来应该是`int n = head.getLength();`

```
while( head == null) { 
```

看起来应该是`while (head != null) {`

```
int random = (int) Math.random() *  n;
for(int i=0;i<random;i++){
    head= head.getNext(); 
```

您正在覆盖 head 变量。您需要使用一个新变量来查找列表的第 k 个元素，并让 head 指向旧列表。

找到元素后，您还没有对元素执行任何操作，您需要从旧列表（硬）中提取它并将其添加到新列表中。

```
return head; 
```

您需要返回新列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:08:59.430

我只是稍微重写了代码，使其遵循伪代码。

```
ListElement head2 = null;
int length = head.getLength();

while (head != null) {
    int k = (int) Math.random() * length;

    // Assume there is function deleteAt(index) that removes
    // the element at specified index and returns the deleted
    // element
    ListElement e = head.deleteAt(k);
    // Although I can just give the implementation - I'll leave this
    // as exercise.

    // You can have a function that add element to front
    // head2.addFront(e);
    e.setNext(head2);
    head2 = e;

    // Instead of querying the length again
    // decrement the length
    length--;
}
return head; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:14:13.827

您的伪代码的问题在于，最坏的情况是，每次您想要删除一个元素以将其添加到新列表时，您都必须迭代到原始列表的末尾。

原始列表 o = [a,b,c,d,e,f,g]
新列表：n = []

o = [a,b,c,d,e,f]
n = [g]

o = [a,b,c,d,e]
n = [g,f]

o = [a,b,c,d]
n = [g,f,e]

...

我现在能想到的最佳性能答案是创建一个列表大小的数组并遍历原始链表，将元素插入到随机位置的数组中：

原始列表 o = [a,b,c,d,e,f,g]
新数组 a = [,,,,,,]

o = [b,c,d,e,f,g]
a = [,,a,,,,]

o = [c,d,e,f,g]
a = [,,a,,b,,]

o = [d,e,f,g]
a = [c,,a,,b,,]

o = [e,f,g]
a = [c,,a,,b,d,]

...

将它们放入数组后，循环遍历数组并修复链接。

在原始版本中，您必须调用`getNext()`6 次，然后 5 次，然后 4 次，然后 3 次......

在我的情况下，您调用`getNext()`了 6 次，然后循环通过数组重置您的“下一个”引用。

# java - 带有 httpServer 的 Java 应用程序在退出前挂起 45 秒

> ID：11443235
> 
> 赞同：1
> 
> 时间：2012-07-11T23:51:01.493
> 
> 标签：java, threadpool, httpserver

我一直在玩 Java httpServer 类。当我运行我的测试应用程序时，它会以正确的方式到达 main 中的最后一行（println），但是在关闭应用程序之前它会在那里停留大约 45 秒。为什么它会这样做，有没有办法让它更快结束？谢谢

```
public class TestTester
{
    public static void main(String[] args) throws IOException {
        InetSocketAddress addr = new InetSocketAddress("127.0.0.1", 8780);
        HttpServer server = HttpServer.create(addr, 0);
        server.createContext("/", new MyHandler());
        server.setExecutor(Executors.newCachedThreadPool());
        server.start();

        URL url = new URL("http://localhost:8780/test");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        InputStreamReader(connection.getInputStream()));

        // print out the response headers
        System.out.println("\nHttp Response Headers");
        for (int i=0; ; i++)
        {
            String headerName = connection.getHeaderFieldKey(i);
            String headerValue = connection.getHeaderField(i);

            if (headerName == null && headerValue == null) {
                // No more headers
                break;
            }
            else if (headerName == null) {
                System.out.println( "    " + headerValue);
            }
            else
                System.out.println( "    " + headerName + ": " + headerValue );
        }
        connection.disconnect();

        server.stop(0);
        System.out.println("Stopped Server.");

    } // end main()
}

class MyHandler implements HttpHandler {

    @Override
    public void handle(HttpExchange exchange) throws IOException
    {
        System.out.println("===Enter MyHandler===");
        System.out.println("Http Request Header:");
        // print out the request methode and url
        System.out.println( "    " + exchange.getRequestMethod() + " "
                + exchange.getRequestURI() + " " + exchange.getProtocol());
        // print out the request headers
        Headers requestHeaders = exchange.getRequestHeaders();
        for (String name : requestHeaders.keySet() )
        {
            List<String> values = requestHeaders.get(name);
            for ( String value : values )
            {
                System.out.println( "    " + name + ": " + value);
            }
        }
        // print out the request body if any
        BufferedReader in = new BufferedReader(new InputStreamReader(exchange.getRequestBody()));
        String sCurrentLine;
        System.out.println( "\nHttp Request Body:");
        if ( ! in.ready() )
            System.out.println( "    No Request Body");
        else
        {
            while ((sCurrentLine = in.readLine()) != null) {
                System.out.println("    " + sCurrentLine);
            }
        }

        // set up and send response
        String requestMethod = exchange.getRequestMethod();
        if (requestMethod.equalsIgnoreCase("GET"))
        {
            Headers responseHeaders = exchange.getResponseHeaders();
            responseHeaders.set("Content-Type", "text/html");
            exchange.sendResponseHeaders(200, 0);

            OutputStream responseBody = exchange.getResponseBody();
            responseBody.write("<!DOCTYPE html><html><body><h1>My Response Header</h1><p>And some sample data.</p></body></html>".getBytes());

            responseBody.close();
        }
        exchange.close();
    } // end public void handle()
} // end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:15:30.093

我确实找到了一些似乎可行的方法，尽管我不确定这是否是处理此问题的正确方法。这没有经过广泛的测试，但它确实使它更快地关闭。

我更换了：

```
server.setExecutor(Executors.newCachedThreadPool()); 
```

和：

```
ExecutorService excu = Executors.newCachedThreadPool();
server.setExecutor(excu); 
```

然后就在`server.stop(0);`我添加之前`excu.shutdown();`

# node.js - 在 Windows7 上安装 node-weak 时出错

> ID：11443236
> 
> 赞同：2
> 
> 时间：2012-07-11T23:51:03.443
> 
> 标签：node.js

我似乎无法在 Windows7 上加载 node-weak。我尝试过 Python 2.7、2.5、2.3，但无济于事。看来（从下面的错误），我需要使用 Python2 的一个版本，但更改版本似乎没有帮助。任何帮助表示赞赏。

```
C:\project1\node_modules\weak>node "C:\Program Files (x86)\nodejs\node_modules\npm\
bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
gyp ERR! rebuild error Error: Python executable "c:\Python25\python.exe" is Pyth
on 3, which is not supported.

gyp ERR! rebuild error     at failPython3 (C:\Program Files (x86)\nodejs\node_mo
dules\npm\node_modules\node-gyp\lib\configure.js:90:14)
gyp ERR! rebuild error     at C:\Program Files (x86)\nodejs\node_modules\npm\nod
e_modules\node-gyp\lib\configure.js:79:9
gyp ERR! rebuild error     at ChildProcess.exithandler (child_process.js:534:7)
gyp ERR! rebuild error     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! rebuild error     at maybeClose (child_process.js:634:16)
gyp ERR! rebuild error     at Process._handle.onexit (child_process.js:676:5)
gyp ERR! not ok
npm ERR! weak@0.2.1 install: `node-gyp rebuild`
npm ERR! `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the weak@0.2.1 install script.
npm ERR! This is most likely a problem with the weak package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls weak
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program File
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "weak"
npm ERR! cwd C:\project1
npm ERR! node -v v0.8.1
npm ERR! npm -v 1.1.33
npm ERR! code ELIFECYCLE
npm ERR! message weak@0.2.1 install: `node-gyp rebuild`
npm ERR! message `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\project1\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:47:30.973

显然 node-gyp@0.5.2 有一个错误，它无法正确解析 Python 版本号，但已在 036a730f4a3a95e65d8f390f7f5c4f0d3321e422 (0.5.3) 中修复。为了解决这个问题，我不得不更新 node-gyp：

```
cd "C:\Program Files (x86)\nodejs"
npm install node-gyp 
```

简单的解决方案，但一个难以追踪的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T13:41:53.567

我在 Windows 7 主机的 Linux Mint 上的 Virtual box 上遇到了类似的问题。我通过 apt-get 获得的 nodejs(v0.6.19) 和 npm(v1.1.14) 库已经过时了。[我从这里](http://nodejs.org/download/)通过源代码安装了 npm(v1.3.11) 和 nodejs(v0.10.20) 。

在共享文件夹中编译代码时遇到错误，因为在共享文件夹中禁用了符号链接创建。因此，我提取了 zip，在共享文件夹之外编译并安装了这些文件。这直接解决了这个问题。

# django - sudo /etc/init.d/celeryd start 生成“未知命令：'celeryd_multi'”

> ID：11443245
> 
> 赞同：3
> 
> 时间：2012-07-11T23:51:52.377
> 
> 标签：django, celery, django-celery

我正在使用虚拟环境中的变量设置 celery 以运行守护进程。但是当我跑步时`$ sudo /etc/init.d/celeryd start`，我得到`Unknown command: 'celeryd_multi' Type 'manage.py help' for usage.`

我设置了以下内容：

> CELERYD_CHDIR="/home/myuser/projects/myproject" ENV_PYTHON="/home/myuser/.virtualenvs/myproject/bin/python" CELERYD_MULTI="$ENV_PYTHON $CELERYD_CHDIR/manage.py celeryd_multi"

当我从命令行运行`$ /home/myuser/.virtualenvs/myproject/bin/python /home/myuser/projects/myproject/manage.py celeryd_multi`时，它工作正常。

有任何想法吗？我很乐意发布您需要的任何其他代码:)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T18:21:25.210

也许你只是设置了错误的 DJANGO_SETTINGS_MODULE：

尝试：DJANGO_SETTINGS_MODULE="settings" <-> DJANGO_SETTINGS_MODULE="project.settings"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T00:41:05.577

这里的问题是，当您以用户身份运行它时，virtualenv 已经为您的用户“myuser”激活了适当的环境，并且它从 /home/myuser/.virtualenvs/myproject/...

当您执行 sudo /etc/init.d/celeryd start 时，您将以 root 身份启动 celery，如果这样的事情甚至存在，它可能没有在 /root/.virtualenvs/ 中激活 virtualenv，因此它会在 /usr 中查找 python 包/lib/... 您的默认 python 所在的位置以及未安装 celery 的位置。

您的选择是：

1.  在 root 用户下复制相同的 virtualenv 并像使用 sudo 一样启动它
2.  将 virtualenv 保留在原处，并以您的用户“myuser”（无 sudo）身份启动 celery，而不使用 init 脚本。
3.  编写一个脚本，`su - myuser -c /bin/sh /home/myuser/.virtualenvs/myproject/bin/celeryd`以 myuser 身份从 init.d 调用它。
4.  在 virtualenv 之外安装主管，让它为你做脏活

想法：

1.  避免将 root 用于您不必做的任何事情。
2.  如果您不需要 celery 在启动时启动，那么这很好，可能包含在脚本中。
3.  对我来说简直是骇人听闻，但如果您不想再投入 30 分钟来使用其他东西，则可以使用。
4.  可能是处理所有 python 启动需求的最佳方式，强烈推荐。

# automation - 使用 PRF 文件自动设置 Outlook IMAP 帐户并禁用“记住密码”设置

> ID：11443246
> 
> 赞同：1
> 
> 时间：2012-07-11T23:51:53.780
> 
> 标签：automation, outlook, email-client

根据此处提到的说明和详细信息，我正在使用 PRF 文件在 Outlook 中自动设置用户 IMAP 电子邮件帐户：[http://technet.microsoft.com/en-us/library/cc179062(office.12) .aspx](http://technet.microsoft.com/en-us/library/cc179062(office.12).aspx)。GPO 属性已设置为在用户首次登录计算机时使用其基本详细信息（使用上述 PRF 文件）预配置用户的 Outlook 帐户。我希望用户在首次打开 Outlook 时只需在用户名/密码提示中输入密码即可。然而，这并没有发生。Outlook 正在尝试连接到邮件服务器而不提示用户。我怀疑这是因为创建帐户时选中了“记住密码”选项。因为没有输入密码，所以连接失败。

**首次设置电子邮件帐户时，如何确保此选项默认为“未选中”？**

第 6 节（配置文件属性的映射）中的 PRF 文件中有一个属性，它看起来接近我所追求的：

```
RememberPassword=PT_BOOLEAN,0x6606 
```

但我不知道该怎么办。不幸的是，它不像 TRUE 或 FALSE 那样直截了当。

我还找到了存储此“记住密码”选项值的注册表设置：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\Windows Messaging Subsystem\Profiles\[Profile Name]\9375CFF0413111d3B88A00104B2A6676\[Account Index]\IMAP Remember Passwd 
```

但是，当用户启动 Outlook 并加载 PRF 时，当用户登录到计算机时，我设置为将此值设置为 0（关闭/假）的 GPO 属性被覆盖。

**我看错了吗？你能建议另一种解决方案来实现同样的目标吗？**

我在 Windows 7 上使用 Outlook 2007，通过 Windows Server 2008 和 IMAP 帐户使用 GPO（所以没有 Exchange Server）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T08:14:15.693

为了使用户的过程尽可能简单，并最大限度地减少用户错误，我在 PRF 文件中预先填充了用户名。我希望用户名/密码对话框以已设置的用户名出现。

```
;***************************************************************
; Section 5 - Values for each internet account.
;***************************************************************

[Account1]
...
IMAPUserName=user@domain.com
... 
```

不要这样做。如果设置，即使没有密码，Outlook 也会尝试连接到邮件服务器。它只是简单地连接而不询问......然后失败了。

我已经从 PRF 文件中删除了这个设置，现在 Outlook 首次启动时会显示用户名/密码对话框。用户现在可以在 Outlook 尝试连接到邮件服务器之前输入他们的凭据。不利的一面是，用户必须同时输入用户名和密码，但我可以忍受。

最终结果：

```
;***************************************************************
; Section 5 - Values for each internet account.
;***************************************************************

[Account1]
...
;-- if the below line is uncommented, the password prompt is NOT displayed.
;-- with it commented, the user has to enter both username and password, but at least it works!
;IMAPUserName=user@domain.com
... 
```

# sqlite2 - 将 sqlite2 数据库导出到 SQL

> ID：11443249
> 
> 赞同：0
> 
> 时间：2012-07-11T23:52:17.523
> 
> 标签：sqlite2

您好我想将 sqlite2 数据库中的数据导出到 SQL 中以导入 phpMyAdmin。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:44:44.903

搜索后我找到了 sqlite2

[http://www.sqlite.org/sqlite-2_8_17.zip](http://www.sqlite.org/sqlite-2_8_17.zip)

并将其导出到 SQL 中：

sqlite 数据库.db .dump > output.txt

要停止 phpMyAdmin 中的错误，您需要删除第一行：“BEGIN TRANSACTION;”

# php - PHP - 如果值 2 大于 1，则拆分数组（

> ID：11443250
> 
> 赞同：0
> 
> 时间：2012-07-11T23:52:19.103
> 
> 标签：php, arrays, split

今晚我一直在努力弄清楚如何将我的数组拆分成很多数组，这些数组由数组中的一个值定义

我可以拥有这个价值

```
$array = array ( 
    array ("Apple", 10),
    array("Ball", 5) 
); 
```

然后我希望 Apple 有 10 个值为“Apple”的数组，而 Ball 有 5 个值为“Ball”的数组

然后我想出了这个，但输出看起来很奇怪..

```
$newarray = array();
foreach($array as $val):
    for($i = 1; $i <= $val[1]; $i++):
        $newarray[$i] = $val[0];
    endfor;
endforeach;

print_r($newarray);
// Array ( [0] => Ball [1] => Ball [2] => Ball [3] => Ball [4] => Ball [5] => Ball [6] => Apple [7] => Apple [8] => Apple [9] => Apple [10] => Apple ) 
```

希望大家能理解我的问题，希望有人能解答。

提前，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T23:55:14.750

[`array_fill()`](http://php.net/manual/en/function.array-fill.php)可以在这里提供帮助：

```
$result = array();

foreach ($array as $sub) {
  $result[] = array_fill(0, $sub[1], $sub[0]);
}

print_r($result); 
```

在此处查看实际操作：http: [//viper-7.com/MhnWFt](http://viper-7.com/MhnWFt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:00:07.367

If I understood correctly the purpose is to create an array with 10 "Apples" and another one with 5 "Balls"

```
$array = array ( 
    array ("Apple", 10),
    array("Ball", 5) 
);
$newarray = array();
foreach($array as $key => $val){
    $tmparray = null;
    for($i = 1; $i <= $val[1]; $i++){
        $tmparray[$i] = $val[0];
    }
    $newarray[] = $tmparray;
}
print_r($newarray); 
```

output:

```
Array
(
    [0] => Array
        (
            [1] => Apple
            [2] => Apple
            [3] => Apple
            [4] => Apple
            [5] => Apple
            [6] => Apple
            [7] => Apple
            [8] => Apple
            [9] => Apple
            [10] => Apple
        )

    [1] => Array
        (
            [1] => Ball
            [2] => Ball
            [3] => Ball
            [4] => Ball
            [5] => Ball
        )

) 
```

# android - ActionBarSherlock：java.lang.NoClassDefFoundError：com.actionbarsherlock.R$styleable

> ID：11443262
> 
> 赞同：14
> 
> 时间：2012-07-11T23:54:09.057
> 
> 标签：android, eclipse, actionbarsherlock, noclassdeffounderror

我正在尝试使用 Eclipse Indigo 和 ADT r20 构建一个带有 ActionBarSherlock 4.1 的小型示例应用程序。

我创建了一个带有空白活动的新 Android 项目，将 actionbarsherlock.jar 复制到库并在构建路径中引用它。

该应用程序成功构建，但在模拟器（使用 2.2）或设备（使用 4.0.4）上启动时，它会因错误而崩溃：

```
java.lang.NoClassDefFoundError: com.actionbarsherlock.R$styleable
        at com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:328)
        ... 
```

我没有使用proguard。

我尝试清理 ActionBarSherlock 项目，将新 jar 复制到我的示例项目的库中，然后清理我的示例项目。

我的 MainActivity.java 很简单：

```
package com.example.lrn;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import android.os.Bundle;

public class MainActivity extends SherlockActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

菜单只有一个项目：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="ifRoom" />
</menu> 
```

AndroidManifest.xml 也是 Eclipse 创建它的样子：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.lrn"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

在这一点上，我真的不知道我可能错过了什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T01:53:02.730

我通过以不同的方式将 ActionBarSherlock 添加到我的 Eclipse 项目中自己解决了这个问题。

我没有将 actionbarsherlock.jar 复制到库中并将其添加到构建路径中，而是将其添加为项目属性的 Android 部分中的引用项目。

该应用程序现在可以在模拟器和设备上正确构建和运行。

![在此处输入图像描述](../Images/25996a0adcc27610e639b802007bde75.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-31T00:17:28.013

如果你得到：

```
 ActionBarSherlock: java.lang.NoClassDefFoundError:
         com.actionbarsherlock.R$styleable 
```

异常，那么您可以通过在清单文件中添加 Sherlock 主题来解决该问题。

```
android:theme="@style/Theme.Sherlock.Light.DarkActionBar" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T17:48:36.403

最新的 ADT 21.1 存在一个问题，即使其他一切看起来都正确，也可能导致此错误浮出水面。您可以通过降级到 ADT 21 和工具 r21 来修复它。这是一个包含更多详细信息的错误报告：

[https://code.google.com/p/android/issues/detail?id=42686](https://code.google.com/p/android/issues/detail?id=42686)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T10:03:05.783

请让您的项目的包名和第 3 方 lib 包名相同。

例如，如果第 3 方 lib 包名是 com.actionbarsherlock 并且您的项目的包名是 com.yourproject 当然，您会得到 java.lang.NoClassDefFoundError: com.actionbarsherlock.R$styleable 错误。

要使用 3rd 方库而不使用 Michael Hampton 的回答之类的参考，您应该按照以下步骤操作：

1.  将com.actionbarsherlock的包名重命名为com.yourproject（我假设你的项目的包名是com.yourproject。在你的项目上点击鼠标右键->Android工具->重命名应用程序包）

2.  将 com.actionbarsherlock/bin/xxx.jar 复制到 com.yourproject/libs

3.  从 xxx.jar 复制或合并 com.actionbarsherlock 的 res 中的资源，例如 values、anim、drawable 等。

我也遇到了同样的问题，用上面自己想的方法成功了。如果有更多问题，请询问更多。我希望所有的人都能解决同样的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-17T08:09:08.993

确保 ActionBarSherlock 项目 \gen 文件夹有 R.java 文件

# php - 无法发送会话 cookie - 标头已发送

> ID：11443263
> 
> 赞同：0
> 
> 时间：2012-07-11T23:54:15.793
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

PHP 中的以下代码给出了警告。

```
<?php
    if(!isset($_SESSION))
    {
        session_start();  // line 4
    }

    if(!isset($_SESSION['valid_admin']))
    {
        header("location:Login.php");  //line 9
    }
?> 
```

* * *

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at C:\wamp\www\wagafashion\Order.php:8) in C:\wamp\www\wagafashion\Lock.php on line 4

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at C:\wamp\www\wagafashion\Order.php:8) in C:\wamp\www\wagafashion\Lock.php on line 4

Warning: Cannot modify header information - headers already sent by (output started at C:\wamp\www\wagafashion\Order.php:8) in C:\wamp\www\wagafashion\Lock.php on line 9 
```

我在[谷歌上搜索并在](http://www.google.co.in/#q=Warning:+session_start%28%29+%5Bfunction.session-start%5D:+Cannot+send+session+cookie+-+headers+already+sent+by&hl=en&biw=1366&bih=629&fp=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&cad=b)[这里](https://stackoverflow.com/questions/5757984/warning-session-start-function-session-start-cannot-send-session-cookie)找到了一个问题，但到目前为止我不明白那里提到的内容。我该如何解决？

[我使用上述代码的应用程序运行良好，但几天前系统因*蓝屏错误*而崩溃，我不得不在安装不同版本的 WAMP 的地方重新安装它。是这个问题吗？】

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:56:09.897

```
<?php
    session_start();

    if(!isset($_SESSION['valid_admin']))
    {
        header("location:Login.php");  //line 9
    }
?> 
```

除非您调用 session_start() 否则将永远不会在该 if 语句中设置会话

如果您在 if 语句之前调用 session_start() （就像您应该做的那样），您的条件将始终为真，从而使 if 语句无用。

因此，您可以将 session_start() 放在第一个 if 语句之上，然后删除第一个 if 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T00:05:26.163

您还可以在脚本开头使用[http://php.net/manual/en/function.ob-start.php函数。](http://php.net/manual/en/function.ob-start.php "ob_start")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T23:56:25.560

首先猜测，检查浏览器是否有肉眼无法立即看到的空白输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T23:58:56.437

看来你误解了[session_start()](http://us2.php.net/manual/en/function.session-start.php)函数：

> session_start — 开始新的或恢复现有的会话

无需先检查它是否存在。

```
if(!isset($_SESSION['valid_admin'])){
    header("location:Login.php");  //line 9
} 
```

笔记：

> 从 PHP 4.3.3 开始，在会话之前启动之后调用 session_start() 将导致 E_NOTICE 级别的错误。此外，第二个会话开始将被简单地忽略。

根据您的警告消息，您有两个文件：`Order.php`& `Lock.php`。您发布的代码位于这些文件中的哪一个？由于输出已经存在，包含文件可能会导致冲突。

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。

# string - 与字符串匹配的复杂模式

> ID：11443277
> 
> 赞同：2
> 
> 时间：2012-07-11T23:55:37.030
> 
> 标签：string, haskell

我有一个看起来像这样的字符串列表：

```
xs = ["xabbaua", "bbbaacv", "ggfeehhaa", "uyyttaccaa", "ibbatb"] 
```

我只想在列表中找到具有 和 vocel 后跟两个 b 后跟任何字符后跟元音的字符串。像这样的简单匹配如何在 Haskell 中完成。有没有比正则表达式更好的解决方案？谁能帮我举个例子？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:01:05.903

一种方法是构建一种小型模式匹配语言并将其嵌入到 Haskell 中。

在您的示例中，模式基本上是字符规范列表。让我们定义一种**抽象字符**，其值将用作这样的规范，

```
data AbsChar  =  Exactly Char | Vowel | Any 
```

连同告诉我们字符是否与规范匹配的“解释器”：

```
(=?)  ::  AbsChar -> Char -> Bool
Exactly c' =? c  =  c == c'
Vowel      =? c  =  c `elem` "aeiou"
Any        =? c  =  True 
```

例如，`Vowel =? 'x'`将产生`False`，而`Vowel =? 'a'`将产生`True`。

那么，实际上，模式只是抽象字符的列表：

```
type Pattern  =  [AbsChar] 
```

接下来，我们编写一个函数来测试字符串的**前缀**是否与给定的模式匹配：

```
matchesPrefix  ::  Pattern -> String -> Bool
matchesPrefix []       _         =  True
matchesPrefix (a : as) (c : cs)  =  a =? c && matchesPrefix as cs
matchesPrefix _        _         =  False 
```

例如：

```
> matchesPrefix [Vowel, Exactly 'v'] "eva"
True
> matchesPrefix [Vowel, Exactly 'v'] "era"
False 
```

由于我们不想限制自己匹配前缀，而是匹配单词中的任何位置，所以我们的 next 函数匹配字符串每个**结尾段的前缀：**

```
containsMatch  ::  Pattern -> String -> Bool
containsMatch pat  =  any (matchesPrefix pat) . tails 
```

它使用了`tails`可以在模块中找到的功能`Data.List`，但是我们可以使这个解释自成一体，也可以轻松地定义自己：

```
tails  ::  [a] -> [[a]]
tails []          =  [[]]
tails l@(_ : xs)  =  l : tails xs 
```

例如：

```
> tails "xabbaua"
["xabbaua","abbaua","bbaua","baua","aua","ua","a",""] 
```

现在，最后，您正在寻找的函数，它从包含匹配段的列表中选择所有字符串，简单地写成：

```
select  ::  Pattern -> [String] -> [String]
select  =  filter . containsMatch 
```

让我们在您的示例中对其进行测试：

```
> let pat = [Vowel, Exactly 'b', Exactly 'b', Any, Vowel]
> select pat ["xabbaua", "bbbaacv", "ggfeehhaa", "uyyttaccaa", "ibbatb"]
["xabbaua"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T12:47:49.083

您可以将经典过滤器功能与任何正则表达式库结合使用。您的模式很简单，可以与任何正则表达式库一起使用：

```
filter (=~ "bb.[aeiuy]") xs 
```

Haskell 中正则表达式令人困惑的部分是，有一个非常强大的通用 API（在 regex-base 中）可以以相同的方式对所有特定库和您可能希望的多结果类型（Bool、String、Int）使用它们。 ..)。对于基本用法，它应该主要按您的意思工作（tm）。对于您的特定需求，regex-posix 应该就足够了（并且带有 haskell 平台，因此无需正常安装）。所以不要忘记导入它：

```
import Text.Regex.Posix 
```

如果您有其他需求，本[教程](http://www.serpentine.com/blog/2007/02/27/a-haskell-regular-expression-tutorial/ "简单教程")应该向您展示 regex API 的基础知识，它现在有点过时但基本原理保持不变，只有 regex-base 的细节发生了变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:16:07.870

好吧，你可以试试这个功能，虽然这可能不是最好的方法：

```
elem' :: String -> String -> Bool
elem' p xs = any (p==) $ map (take $ length p) $ tails xs 
```

用法：

```
filter (elem' "bb") ["xxbbaua", "bbbaacv", "ggfeehhaa", "uyyttaccaa", "bbbaab"] 
```

或者

```
bbFilter = filter (elem' "bb") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T02:42:55.713

好吧，如果你绝对反对使用正则表达式，你可以只使用模式匹配和递归来做到这一点，尽管它很难看。

```
xs = ["xabbaua", "bbbaacv", "ggfeehhaa", "uyyttaccaa", "ibbatb"]

vowel = "aeiou"

filter' strs = filter matches strs

matches [] = False
matches str@(x:'b':'b':_:y:xs)
     | x `elem` vowel && y `elem` vowel = True
     | otherwise = matches $ tail str
matches (x:xs) = matches xs 
```

调用`filter' xs`将返回`["xabbaua"]`，我认为这是所需的结果。

# c++ - Winapi shell 扩展覆盖 Windows 命令

> ID：11443282
> 
> 赞同：1
> 
> 时间：2012-07-11T23:56:35.283
> 
> 标签：c++, c, windows, winapi, contextmenu

我为我正在开发的一个小应用程序开发了一个非常基本的 shell 扩展。我已经使用它一段时间了，没有任何问题，但我只是注意到在 Windows xp 中，在开始菜单 -> 所有程序中，如果我右键单击那里的文件夹并选择“打开”或“探索”，我的出现小应用程序而不是资源管理器窗口。你可以想象当我看到这个的时候我是多么的高兴和自豪。我觉得这很奇怪，因为这是唯一发生的地方（到目前为止......）。我在“目录”注册表项下注册了 shell 扩展，因此它仅在右键单击文件夹时显示。

我找到了一些关于 shell 扩展的好文章，并且到目前为止我已经完成了这些，但是在这个 winapi 东西中我离我的舒适区还很远。我对id做了很多摆弄，但我不知道问题出在哪里。

这是我的 querycontextmenu 实现，我希望我在那里犯了一个愚蠢的错误，C++ 大师可以立即发现。任何帮助将不胜感激。

```
STDMETHODIMP ShellExtension::QueryContextMenu(HMENU hMenu,  UINT indexMenu,  UINT idCmdFirst,  UINT idCmdLast, UINT uFlags){
if (CMF_DEFAULTONLY & uFlags)
{
    return MAKE_HRESULT(SEVERITY_SUCCESS, 0, 0);
}

UINT uID = idCmdFirst;

if (!InsertMenu(hMenu, indexMenu, MF_SEPARATOR | MF_BYPOSITION, 0, NULL))
{
    return HRESULT_FROM_WIN32(GetLastError());
}

HMENU hSubmenu = CreatePopupMenu();

InsertMenu (hSubmenu, 0, MF_BYPOSITION, uID++, (this->isFrench ? SET_REF_TEXT : SET_REF_TEXT_EN));
InsertMenu (hSubmenu, 1, MF_BYPOSITION, uID++, (this->isFrench ? SET_COMP_TEXT : SET_COMP_TEXT_EN));

MENUITEMINFO mii = { sizeof(mii) };
mii.fMask = MIIM_FTYPE | MIIM_ID | MIIM_BITMAP | MIIM_SUBMENU | MIIM_DATA | MIIM_STRING;
mii.hSubMenu = hSubmenu;
mii.fType = MFT_STRING;
mii.dwTypeData = (this->isFrench ? MAIN_TEXT : MAIN_TEXT_EN);
mii.hbmpItem = IsRequirePainting() ? HBMMENU_CALLBACK : m_hMenuBmp;
mii.wID = uID++;

if (!InsertMenuItem(hMenu, indexMenu, TRUE, &mii))
{
    return HRESULT_FROM_WIN32(GetLastError());
}

if (!InsertMenu(hMenu, indexMenu, MF_SEPARATOR | MF_BYPOSITION, 0, NULL))
{
    return HRESULT_FROM_WIN32(GetLastError());
}

return MAKE_HRESULT(SEVERITY_SUCCESS, FACILITY_NULL, uID - idCmdFirst);} 
```

谢谢！

编辑：

这是对我有用的解决方案......对于任何在这里绊倒的人：

```
STDMETHODIMP ShellExtension::InvokeCommand(LPCMINVOKECOMMANDINFO lpcmi)
{
    if (!HIWORD(lpcmi->lpVerb))
    {
        UINT idCmd = LOWORD(lpcmi->lpVerb);

        switch (idCmd)
        {
        case 0:
            doStuffForFirstCommand();
            break;
        case 1:
            doStuffForSecondCommand();
            break;
        }

        return S_OK;
    }
    else
    {
        return E_INVALIDARG; //this is what I forgot...
    }
} 
```

感谢您的帮助，抱歉代码缩进，似乎我无法弄清楚代码标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:17:31.313

我将在一个真实的答案中总结上面的讨论：

除了由直接用户操作调用之外，上下文菜单扩展还可以通过其他几种方式调用。当用户在 Windows 资源管理器中右键单击某个项目时选择“打开”或“打印”等 shell 的内置动词之一时，Windows 将依次查询每个已注册的 shell 扩展以找到处理它的那个。[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)如果用户调用以编程方式调用动词，也会发生同样的事情。

这允许第三方开发人员将新动词添加到 shell 的词汇表中，但如果 shell 扩展不能处理这种情况，也会带来问题。

当上下文菜单处理程序的[`InvokeCommand`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776096%28v=vs.85%29.aspx)方法不检查其参数时，就会出现问题。以下是关于该成员的文档[`CMINVOKECOMMANDINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773215%28v=vs.85%29.aspx)必须说的内容`lpVerb`（强调我的）：

> 如果高位字不为零，则此成员是以空字符结尾的字符串的地址，该字符串指定要执行的命令的与语言无关的名称。当应用程序激活命令时，此成员通常是字符串。系统为以下命令字符串提供预定义的常量值。
> 
> 这不是一个固定的集合；上下文菜单处理程序可以发明新的规范动词，应用程序可以调用它们。
> 
> **如果存在规范动词并且菜单处理程序未实现规范动词，则它必须返回失败代码以使下一个处理程序能够处理此动词。不这样做会破坏系统中的功能，包括`ShellExecute`.**

Raymond Chen 的博客文章[“当然，我们这样做：上下文菜单版”](http://blogs.msdn.com/b/oldnewthing/archive/2012/05/16/10305605.aspx)描述了在这种情况下可能发生的事情。他还指出了一个不幸的事实，即足够多的 shell 扩展表现出这种不礼貌的行为，Windows 团队创建了一个[特殊的注册表项](http://social.technet.microsoft.com/Forums/en-US/w7itproui/thread/6a138e65-2834-41ac-bd40-c2344e20b824#209450a5-e1d2-4f3d-bd0f-076e9d7de315)来帮助处理这些错误。

当然，如果您是开发人员，您应该确保检查参数`InvokeCommand`并返回正确的代码，而不是依赖注册表解决方法。

# iphone - 设置 UIButton 字体

> ID：11443283
> 
> 赞同：17
> 
> 时间：2012-07-11T23:56:48.297
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码用于在 UIButton 中设置文本

```
[self.fullListButton_ setTitle:[NSString stringWithFormat:@"%d", [self.newsfeedItem_.newsfeedToSubjects count] - 3] forState:UIControlStateNormal]; 
```

问题是我似乎无法为此设置字体。我该怎么做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-12T00:00:13.867

In the newer version of iOS:

```
UIButton * myButton;
myButton.titleLabel.font = [UIFont systemFontOfSize: 12]; 
```

Or any other font mechanism.

Look here for the UIButton portions:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instp/UIButton/titleLabel](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instp/UIButton/titleLabel)

And here for the UIFont stuff:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)

In your code:

```
self.fullListButton_.titleLabel.font = [UIFont systemFontOfSize: 12]; 
```

or

```
self.fullListButton_.titleLabel.font = [UIFont fontWithName:@"Arial" size:12]; 
```

# android - Do I always need to move Database queries from the UI thread to a separate thread?

> ID：11443290
> 
> 赞同：2
> 
> 时间：2012-07-11T23:57:46.183
> 
> 标签：android, sqlite, background

This question comes from an issue I am having, or really confusion on something. So its frowned upon to query databases on the UI thread. But my issue is, what if what appears on the screen relies on what the result is. Should you still run it in the background, or should you halt the screens output until you know the info you need from the database?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:00:39.363

The way you should set it up is to use an `AsyncTask` to query the database, using the `doInBackground` method. Then use the `onPostExecute` method to update the UI. You can't update the UI on any other thread than the main thread.

Hope that makes sense. If not, here are a couple articles that might help:

[http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

[http://www.peachpit.com/articles/article.aspx?p=1823692&seqNum=3](http://www.peachpit.com/articles/article.aspx?p=1823692&seqNum=3)

Best of luck!

# ruby-on-rails - How do you add an item into an array if passes the logical statement?

> ID：11443291
> 
> 赞同：1
> 
> 时间：2012-07-11T23:57:48.490
> 
> 标签：ruby-on-rails, ruby

I would like to create a new array `B_array` based on an existing array A `A_array`. If that item in `A_array` has a certain field then add it into `B_array`.

Currently this is what I have and its putting everything into `B_array`:

```
B_array = A_array.map {|item| if item.name == 'Josh'} 
```

A_array:

```
[id:0,name:"Josh",email:"josh@josh@gmail.com"],
[id:1,name:"Scott",email:"scott@josh@gmail.com"],
[id:2,name:"Josh",email:"dan@josh@gmail.com"] 
```

Desired output for `B_array`:

```
[id:0,name:"Josh",email:"josh@josh@gmail.com"],
[id:2,name:"Josh",email:"dan@josh@gmail.com"] 
```

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T00:03:05.963

使用[`.select`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-select)：

```
a = [{id:0,name:"Josh",email:"josh@josh@gmail.com"},
     id:1,name:"Scott",email:"scott@josh@gmail.com"}]
b = a.select { |i| i[:name] == 'Josh' } 
```

[`.select`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-select)将根据您给它的条件进行过滤并返回通过测试的元素数组。

# python - 使用 OpenBLAS 集成编译 numpy

> ID：11443302
> 
> 赞同：54
> 
> 时间：2012-07-11T23:59:47.210
> 
> 标签：python, numpy, blas, atlas, openblas

我正在尝试安装`numpy`，`OpenBLAS`但是我不知道如何`site.cfg`编写文件。

当按照[安装过程](http://www.kde.cs.tut.ac.jp/~atsushi/?p=493#)完成安装时，安装没有错误，但是将 OpenBLAS 使用的线程数从 1 增加（由环境变量 OMP_NUM_THREADS 控制）会降低性能。

我不确定 OpenBLAS 集成是否完美。任何人都可以提供一个`site.cfg`文件来实现相同的目标。

PS：OpenBLAS 与其他工具包（如基于 Python 的[Theano ）的集成，在同一台机器上增加线程数量时提供了显着的性能提升。](http://deeplearning.net/software/theano/)

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-18T02:50:38.297

我刚刚`numpy`在`virtualenv`with`OpenBLAS`集成中编译，它似乎工作正常。

这是我的过程：

1.  编译`OpenBLAS`：

    ```
    $ git clone https://github.com/xianyi/OpenBLAS
    $ cd OpenBLAS && make FC=gfortran
    $ sudo make PREFIX=/opt/OpenBLAS install 
    ```

    如果您没有管理员权限，则可以设置`PREFIX=`为您具有写入权限的目录（只需相应地修改下面的相应步骤）。

2.  确保包含的目录`libopenblas.so`位于您的共享库搜索路径中。

    *   要在本地执行此操作，您可以编辑`~/.bashrc`文件以包含该行

        ```
        export LD_LIBRARY_PATH=/opt/OpenBLAS/lib:$LD_LIBRARY_PATH 
        ```

        当`LD_LIBRARY_PATH`您启动新的终端会话时，环境变量将被更新（用于`$ source ~/.bashrc`在同一会话中强制更新）。

    *   另一个适用于多个用户的选项是创建一个包含 line的`.conf`文件，例如：`/etc/ld.so.conf.d/``/opt/OpenBLAS/lib`

        ```
        $ sudo sh -c "echo '/opt/OpenBLAS/lib' > /etc/ld.so.conf.d/openblas.conf" 
        ```

    完成任一选项后，运行

    ```
    $ sudo ldconfig 
    ```

3.  获取`numpy`源代码：

    ```
    $ git clone https://github.com/numpy/numpy
    $ cd numpy 
    ```

4.  复制`site.cfg.example`到`site.cfg`并编辑副本：

    ```
    $ cp site.cfg.example site.cfg
    $ nano site.cfg 
    ```

    取消注释这些行：

    ```
    ....
    [openblas]
    libraries = openblas
    library_dirs = /opt/OpenBLAS/lib
    include_dirs = /opt/OpenBLAS/include
    .... 
    ```

5.  检查配置、构建、安装（可选在 a 内`virtualenv`）

    ```
    $ python setup.py config 
    ```

    输出应如下所示：

    ```
    ...
    openblas_info:
      FOUND:
        libraries = ['openblas', 'openblas']
        library_dirs = ['/opt/OpenBLAS/lib']
        language = c
        define_macros = [('HAVE_CBLAS', None)]

      FOUND:
        libraries = ['openblas', 'openblas']
        library_dirs = ['/opt/OpenBLAS/lib']
        language = c
        define_macros = [('HAVE_CBLAS', None)]
    ... 
    ```

    安装 with比 using`pip`更[可取](https://stackoverflow.com/a/15731459/1461210)`python setup.py install`，因为`pip`它将跟踪包元数据并允许您在将来轻松卸载或升级 numpy。

    ```
    $ pip install . 
    ```

6.  可选：您可以使用[此脚本](https://gist.github.com/alimuldal/eb0f4eea8af331b2a890)来测试不同线程数的性能。

    ```
    $ OMP_NUM_THREADS=1 python build/test_numpy.py

    version: 1.10.0.dev0+8e026a2
    maxint:  9223372036854775807

    BLAS info:
     * libraries ['openblas', 'openblas']
     * library_dirs ['/opt/OpenBLAS/lib']
     * define_macros [('HAVE_CBLAS', None)]
     * language c

    dot: 0.099796795845 sec

    $ OMP_NUM_THREADS=8 python build/test_numpy.py

    version: 1.10.0.dev0+8e026a2
    maxint:  9223372036854775807

    BLAS info:
     * libraries ['openblas', 'openblas']
     * library_dirs ['/opt/OpenBLAS/lib']
     * define_macros [('HAVE_CBLAS', None)]
     * language c

    dot: 0.0439578056335 sec 
    ```

对于更高的线程数，性能似乎有了显着的提高。但是，我没有对此进行非常系统的测试，而且对于较小的矩阵，额外的开销可能会超过更高线程数带来的性能优势。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-04T17:34:26.320

万一您使用的是 ubuntu 或 mint，您可以通过 apt-get as 同时安装 numpy 和 openblas 来轻松地将 openblas 链接到 numpy

```
sudo apt-get install numpy libopenblas-dev 
```

在一个新的 docker ubuntu 上，我测试了从博客文章[“安装 Numpy 和 OpenBLAS”中复制的以下脚本](https://hunseblog.wordpress.com/2014/09/15/installing-numpy-and-openblas/)

```
import numpy as np
import numpy.random as npr
import time

# --- Test 1
N = 1
n = 1000

A = npr.randn(n,n)
B = npr.randn(n,n)

t = time.time()
for i in range(N):
    C = np.dot(A, B)
td = time.time() - t
print("dotted two (%d,%d) matrices in %0.1f ms" % (n, n, 1e3*td/N))

# --- Test 2
N = 100
n = 4000

A = npr.randn(n)
B = npr.randn(n)

t = time.time()
for i in range(N):
    C = np.dot(A, B)
td = time.time() - t
print("dotted two (%d) vectors in %0.2f us" % (n, 1e6*td/N))

# --- Test 3
m,n = (2000,1000)

A = npr.randn(m,n)

t = time.time()
[U,s,V] = np.linalg.svd(A, full_matrices=False)
td = time.time() - t
print("SVD of (%d,%d) matrix in %0.3f s" % (m, n, td))

# --- Test 4
n = 1500
A = npr.randn(n,n)

t = time.time()
w, v = np.linalg.eig(A)
td = time.time() - t
print("Eigendecomp of (%d,%d) matrix in %0.3f s" % (n, n, td)) 
```

没有openblas，结果是：

```
dotted two (1000,1000) matrices in 563.8 ms
dotted two (4000) vectors in 5.16 us
SVD of (2000,1000) matrix in 6.084 s
Eigendecomp of (1500,1500) matrix in 14.605 s 
```

在我安装了 openblas 之后`apt install openblas-dev`，我检查了 numpy 链接

```
import numpy as np
np.__config__.show() 
```

信息是

```
atlas_threads_info:
  NOT AVAILABLE
openblas_info:
  NOT AVAILABLE
atlas_blas_info:
  NOT AVAILABLE
atlas_3_10_threads_info:
  NOT AVAILABLE
blas_info:
    library_dirs = ['/usr/lib']
    libraries = ['blas', 'blas']
    language = c
    define_macros = [('HAVE_CBLAS', None)]
mkl_info:
  NOT AVAILABLE
atlas_3_10_blas_threads_info:
  NOT AVAILABLE
atlas_3_10_blas_info:
  NOT AVAILABLE
openblas_lapack_info:
  NOT AVAILABLE
lapack_opt_info:
    library_dirs = ['/usr/lib']
    libraries = ['lapack', 'lapack', 'blas', 'blas']
    language = c
    define_macros = [('NO_ATLAS_INFO', 1), ('HAVE_CBLAS', None)]
blas_opt_info:
    library_dirs = ['/usr/lib']
    libraries = ['blas', 'blas']
    language = c
    define_macros = [('NO_ATLAS_INFO', 1), ('HAVE_CBLAS', None)]
atlas_info:
  NOT AVAILABLE
blas_mkl_info:
  NOT AVAILABLE
lapack_mkl_info:
  NOT AVAILABLE
atlas_3_10_info:
  NOT AVAILABLE
lapack_info:
    library_dirs = ['/usr/lib']
    libraries = ['lapack', 'lapack']
    language = f77
atlas_blas_threads_info:
  NOT AVAILABLE 
```

它没有显示与 openblas 的链接。但是，脚本的新结果显示 numpy 一定使用过 openblas：

```
dotted two (1000,1000) matrices in 15.2 ms
dotted two (4000) vectors in 2.64 us
SVD of (2000,1000) matrix in 0.469 s
Eigendecomp of (1500,1500) matrix in 2.794 s 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-07T02:24:19.580

这是一种比@ali_m 的答案更简单的方法，它适用于 macOS。

1.  如果没有，请安装 gfortran 编译器。例如在 macOS 上使用自制软件：

    ```
    $ brew install gcc 
    ```

2.  从源代码编译`OpenBLAS`[或使用包管理器]，获取源代码库或[下载版本](https://github.com/xianyi/OpenBLAS/releases)：

    ```
    $ git clone https://github.com/xianyi/OpenBLAS
    $ cd OpenBLAS && make FC=gfortran
    $ sudo make PREFIX=/opt/OpenBLAS install 
    ```

    如果您不/不能sudo，请设置`PREFIX=`到另一个目录并在下一步中修改路径。

    OpenBLAS 不需要在编译器包含路径或链接器库路径上。

3.  创建一个`~/.numpy-site.cfg`包含您在步骤 2 中使用的 PREFIX 路径的文件：

    ```
    [openblas]
    libraries = openblas
    library_dirs = /opt/OpenBLAS/lib
    runtime_library_dirs = /opt/OpenBLAS/lib
    include_dirs = /opt/OpenBLAS/include 
    ```

    `include_dirs`是给编译器的。`library_dirs`用于链接器。`runtime_library_dirs`用于加载程序，可能不需要。

4.  pip-install numpy 和 scipy 从源代码（最好安装到 virtualenv 中），无需手动下载它们[您也可以指定发布版本]：

    ```
    pip install numpy scipy --no-binary numpy,scipy 
    ```

5.  以我的经验，`OPENBLAS_NUM_THREADS`运行时的此设置使 OpenBLAS 更快，而不是更慢，尤其是。当多个 CPU 进程同时使用它时：

    ```
     export OPENBLAS_NUM_THREADS=1 
    ```

    （或者，您可以使用 . 编译 OpenBLAS `make FC=gfortran USE_THREAD=0`。）

有关测试它的方法，请参阅其他答案。

# html - 如何使用 CSS 创建响应式水平布局？

> ID：11443304
> 
> 赞同：5
> 
> 时间：2012-07-12T00:00:00.340
> 
> 标签：html, css, horizontal-scrolling

我在一家创意设计工作室工作，他们喜欢打破范式和惯例来创建独特的网站布局，最近我们开始开发水平网站布局。虽然水平网站布局看起来“很酷”，但我还没有想出如何让它们像开箱即用的基于垂直网格的网站一样流畅和响应。

通常对于带有容器的垂直网站，您的容器元素将具有基于百分比的宽度，然后设置最大宽度。使用响应式布局，您的内容会无限滚动到页面之外，它的宽度可能会有所不同，特别是如果内容是唯一的，因此公式目标/上下文 * 100 并不能真正起作用（或者是吗？）。

是否有一种方法可以在元素上设置响应式高度、填充和边距，使其像基于网格的响应式网站一样工作。我不介意必须使用 Javascript，但 CSS 修复将是理想的。

供您参考我正在尝试创建的布局类型的示例：

![在此处输入图像描述](../Images/b81038b787919310c68a2527b1792e01.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:06:55.447

您可以使用 jQuery 通过计算页面容器 div 的子元素`.outerWidth`并将它们全部添加在一起并将其附加到页面或 div 的`.css('width')`

HTML结构：

```
<div id="main">
    <div><img src="#" /></div>
    <div><img src="#" /></div>
    <div><img src="#" /></div>
</div> 
```

编辑：我忘了添加 css，但这里的重点是你希望子 div`#main`向左浮动。

Javascript：

```
function() {
        var window_width = jQuery(window).width(),
            container = jQuery('#main'),
            page_width = 0;

        // Grab every child element of the "main" container
        container.children().each(function(index){
            var incl_margin = true,
                $this = jQuery(this);

            // Check if each child element has a margin-left or margin-right
            if ( parseInt($this.css('margin-left')) < 0 || parseInt($this.css('margin-right')) < 0 ) {
                var incl_margin = false;
            }

            // Get element's width including margins (if they exist from above)
            var width = $this.outerWidth(incl_margin);
            page_width += width;

        });

        // Add total width of containers elements as the containers width
        if(page_width > 0)
            container.css({'width' : page_width + 'px'});
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:35:48.167

有很多方法可以做到这一点。

如果您知道页面的确切宽度，您可以制作一个包装器 div，设置全宽，然后在包装器内并排浮动您的内容 div，如下所示：

```
<div style="width: 2500px; border: red solid 1px;">
  <div style="width: 500px; float: left;">Content</div>
  <div style="width: 500px; float: left;">Content</div>
  <div style="width: 500px; float: left;">Content</div>
  <div style="width: 500px; float: left;">Content</div>
  <div style="width: 500px; float: left;">Content</div>
</div> 
```

如果您知道确切的宽度，这是最简单的解决方案。

如果宽度未知或变化，您可以使用 JavaScript 计算整个宽度并将其应用于包装器，结果相同。这应该适用于大多数需求。

# php - Symfony2：将 _route 传递给事件侦听器服务

> ID：11443308
> 
> 赞同：0
> 
> 时间：2012-07-12T00:00:41.213
> 
> 标签：php, symfony

我需要将容器中的“_route”以及路由属性传递给事件侦听器。换句话说，我需要侦听器服务能够感知容器，而无需通过将整个 service_container 传递到事件侦听器类的开销。

我见过类似这样的代码示例：

```
services: 
    root.path.locator: 
        class: Acme\Bundle\HelloBundle\Util\RootLocator 
        arguments: ['%kernel.root_dir%'] 
```

在控制器中，我会使用类似下面的代码来获取“_route”：

```
$request = $this->container->get('request');
$routeName = $request->get('_route'); 
```

但是，在事件侦听器中，我没有可用的。

我怎样才能完成上述工作？

谢谢，

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:03:11.833

在服务 xml 标记上设置`scope`为。`request`这将自动注入 Request 对象，然后将 @request 设置为参数。在 yaml 中，设置`scope: request`和`arguments: [@request]`.

# rabbitmq - RabbitMQ Shovel plugin stuck on "starting" status

> ID：11443309
> 
> 赞同：6
> 
> 时间：2012-07-12T00:00:51.470
> 
> 标签：rabbitmq

RabbitMQ starts up just fine, but the shovel plugin status is listed as "starting".

I'm using the following rabbitmq.config:

Each broker is running on a separate AWS instance. The remote server is windows 2008 server, the local server is Amazon Linux.

> ```
> [{rabbitmq_shovel,
>   [{shovels,
>     [{scrape_request_shovel,
>       [{sources,      [{broker,"amqp://test_user:test_password@localhost"}]},
>        {destinations, [{broker, "amqp://test_user:test_password@ec2-###-##-###-###.compute-1.amazonaws.com"}]},
>        {queue, <<"scp_request">>},
>        {ack_mode, on_confirm},
>        {publish_properties, [{delivery_mode, 2}]},
>        {publish_fields, [{exchange, <<"">>},
>                          {routing_key, <<"scp_request">>}]},
>        {reconnect_delay, 5}
>        ]}
>       ]
>    }]
> }]. 
> ```

Running the following command:

> sudo rabbitmqctl eval 'rabbit_shovel_status:status().'

returns:

> [{scrape_request_shovel,starting,{{2012,7,11},{23,38,47}}}]

According to [This question](https://stackoverflow.com/questions/11124526/rabbitmq-shovel-state-always-starting "this question"), this can result if the users haven't been set up correctly on the two brokers. However, I've double-checked that I've set up the users correctly via rabbitmqctl user_add on both machines -- have even tried it with a different set of users, to be sure.

I also ran an nmap scan of port 5672 on the remote host to verify is was up and running on that port.

***UPDATE*** Problem isn't solved but this does appear to be a result of connection problems with the remote server. I changed "reconnect_delay" to 0 in my config file, to avoid having shovel infinitely re-try the connection. Highly recommend others with this problem do this as well, as it allows you to get error messages out of rabbit_shovel_status. In my case I got the following error:

> ```
> [{scrape_request_shovel,
>     {terminated,
>         {{badmatch,{error,access_refused}},
>          [{rabbit_shovel_worker,make_conn_and_chan,1},
>           {rabbit_shovel_worker,handle_cast,2},
>           {gen_server2,handle_msg,2},
>           {proc_lib,init_p_do_apply,3}]}},
>     {{2012,7,12},{0,4,37}}}] 
> ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T20:24:59.873

在这里回答我自己的问题，以防其他人遇到这个问题。这个错误（如果你得到它也是一个超时错误，{{badmatch,{error,etimedout}}, ），几乎可以肯定是两台机器之间的通信问题，很可能是由于端口访问/防火墙设置。

我在这里做了几件愚蠢的事情：

1) 为我的远程 EC2 实例使用了错误的 DNS（D'oh！真的很愚蠢 - 无法告诉你我花了多长时间将头撞在墙上......）。请记住，如果您没有与实例关联的弹性 IP，停止和启动您的实例会生成一个新的 DNS。

2）我的远程实例是一个windows服务器，我意识到你必须在windows防火墙和EC2安全组中打开端口5672——这里有*两个*重叠的访问控制级别，在EC2管理中打开端口如果您的机器是 EC2 上的 windows 服务器，控制台是不够的，因为您还必须配置 windows 服务器防火墙。

# php - PHP 无法在 Mac 上写入 sys_get_temp_dir()

> ID：11443310
> 
> 赞同：3
> 
> 时间：2012-07-12T00:01:01.423
> 
> 标签：php, macos, permissions, osx-snow-leopard, user-permissions

我真的把它简化为：`mkdir(sys_get_temp_dir().'/test', 0777);`返回错误

> 警告：mkdir() [function.mkdir]: Permission denied in

不确定发生了什么（最近我的 Mac 出现了很多问题），尽管它看起来好像是某个地方的简单权限问题。

```
sys_get_temp_dir() = /var/folders/aP/aPaKHnXDGqG-75bSdcDjkk+++TI/-Tmp-

sh-3.2# ls -ld /var/folders/
drwxr-xr-x  4 root  wheel  136 12 Jul 00:51 /var/folders/
sh-3.2# ls -ld /var/folders/aP/
drwxr-xr-x  3 root  wheel  102 12 Jul 00:40 /var/folders/aP/
sh-3.2# ls -ld /var/folders/aP/aPaKHnXDGqG-75bSdcDjkk+++TI/
drwxr-xr-x  4 myuser  staff  136 12 Jul 00:44 /var/folders/aP/aPaKHnXDGqG-75bSdcDjkk+++TI/ 
```

*   使用雪豹 10.6.8
*   带有 Memcache 扩展的 MAMP Pro。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:33:20.923

在你的mac上打开你的终端并输入：

`chmod -R 777 /path/to/directory`

警告：尽管这消除了对此类目录的写/读访问的所有限制，但 777 是一种非常开放且不安全的模式。

# android - Transfer data to new database version android

> ID：11443312
> 
> 赞同：0
> 
> 时间：2012-07-12T00:01:03.100
> 
> 标签：android, upgrade, transfer, alter, sqlite

I'm trying to write a function that will take the current information in the database and place it into the new version with the onUpgrade method. This is what I have.

```
public void updateTable(SQLiteDatabase db) {
    Cursor c = db.rawQuery(
            "select DISTINCT tbl_name from sqlite_master where tbl_name = '"
                    + tableName + "'", null);
    if (c != null && c.getCount() > 0) {
        c = db.rawQuery("select * from " + tableName, null);
        ArrayList<Transaction> tempList = new ArrayList<Transaction>();
        while (c.moveToNext()) {
            Transaction t = createTransaction(c);
            if (t != null)
                tempList.add(t);
        }
        dropTable(db);
        createTable(db);
        for (Transaction t : tempList) {
            addOccurrence(t);
        }
    } else {
        throw new RuntimeException("Couldn't find new table for updating");
    }
} 
```

This method receives the database given to the onUpgrade method.

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  switch (newVersion) {
    case NEW_VERSION_NUMBER:
      transTable.updateTable(db);
    break;
  }
} 
```

The problem is, nothing is in the database that I get from the onUpgrade method! So I just end up erasing my database.... Is there a way to do this or do I have to rely on the limited use of ALTER statements. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:43:35.163

```
public void onUpgrade(SQLiteDatabase new_db, int oldVersion,
                int newVersion) {
            // TODO Auto-generated method stub
            System.out.println("onUpgrade()");
            new_db.execSQL("DROP TABLE IF EXISTS " + TableName + ";");
            onCreate(new_db);
        } 
```

# mysql - How to set IF statement on GROUP BY

> ID：11443314
> 
> 赞同：1
> 
> 时间：2012-07-12T00:01:18.243
> 
> 标签：mysql, group-by

Hi I have query that confusing, this is the query

```
SELECT meta_value, meta_count, post_id
FROM wp_post_meta
GROUP BY IF(ISNULL(target_key), '', target_key) 
ORDER BY `meta_count` DESC 
LIMIT 30 
```

Some of target key is null but some is value exist, how can I make result if target_key is value exist make it GROUP BY but if empty GROUP BY disabled

Anyone can help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:13:38.007

如果`target_key`是，`null`您可以使用对每条记录进行分组的唯一值，以便这些记录最终都在各自的组中。例如，如果`post_id`是表的键，则可以按该键进行分组。如果键可以与字段具有相同的值，您可能需要为不同的值添加前缀`target_key`：

```
GROUP BY IF(ISNULL(target_key), 'x' + post_id, 'y' + target_key) 
```

请注意，您的查询在 上进行分组`target_key`，但您选择的其他字段不使用聚合（最小值、最大值、计数等），因此结果将是每个组中任意记录的值。如果每个组中的所有记录的这些值都不相同，则结果不可预测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T00:15:16.923

```
SELECT meta_value,meta_count,post_id
FROM wp_post_meta
WHERE target_key IS NOT NULL
GROUP BY target_key

UNION ALL

SELECT meta_value,meta_count,post_id
FROM wp_post_meta
WHERE target_key IS NULL

ORDER BY meta_count DESC
LIMIT 30 
```

只是一个粗略的想法。但是，没有经过测试，我不确定这是否是您想要的。

# c++ - Sequential and running in one thread time difference c++

> ID：11443316
> 
> 赞同：-4
> 
> 时间：2012-07-12T00:01:39.067
> 
> 标签：c++, multithreading

Here is my source code for testing multithread performance in C++. Please tell me why is time about 5x smaller for ONE thread running(WaitForMultipleObject()) then first sequential performance. I expect almost same result for sequential performance and running with only one thread. Thanks

[http://pastebin.com/EeJ5qW03](http://pastebin.com/EeJ5qW03)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:14:58.007

操作系统将决定您的线程何时开始运行，它还将决定是否需要调度。除此之外，它还必须为您的线程创建一个单独的堆栈，也许。

阅读有关线程创建的开销。总而言之，开销是系统特定的。

# javascript - xmla4js I keep getting Origin null is not allowed by Access-Control-Allow-Origin ajax header

> ID：11443317
> 
> 赞同：0
> 
> 时间：2012-07-12T00:01:39.490
> 
> 标签：javascript, jquery, xmla

I am using XMLA4JS library.

The url of the xmla service is on another domain. I keep getting error message: **Origin null is not allowed by Access-Control-Allow-Origin ajax header**

I have not modified any of their code and I am using their samples.

I entered url of the OLAP cube that is deployed on another server. I passed userid and password in the url as the query string but no luck...

Please suggest how I should be able to connect to it?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:43:57.760

这是执行 ajax 跨域请求时的标准问题。xmla4js wiki 有一个解释它的页面，并提供了一个解决方案：[http ://code.google.com/p/xmla4js/wiki/SettingUpAnApacheProxy](http://code.google.com/p/xmla4js/wiki/SettingUpAnApacheProxy)

另一种可能有效的方法是在服务器端启用 CORS 标头。请参阅[http://enable-cors.org/](http://enable-cors.org/)

# ruby-on-rails - 为什么 activerecord 找不到具有空列的记录？

> ID：11443319
> 
> 赞同：1
> 
> 时间：2012-07-12T00:01:50.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

所以，如果我这样做：

```
>> User.where("facebook_data IS null")
(0.5ms)  SELECT COUNT(*) FROM `users` WHERE (facebook_data IS null)
=> [] 
```

如果还没有，我会查找我的用户帐户：

```
>> u = User.find(225)
=> #<User id: 225, email: "me@example.com", ...etc>
>> u.facebook_data
=> nil 
```

所以我显然没有`facebook_data`。为什么当我使用 where 子句时这条记录没有出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:35:28.607

好的，所以要深入了解这一点，我进入了 mysql：

```
mysql> select users.facebook_data from users WHERE users.id = 225;
+---------------+
| facebook_data |
+---------------+
| --- 
         |
+---------------+
1 row in set (0.00 sec) 
```

然后在控制台..

```
> User.find(225).facebook_data == nil
User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 225 LIMIT 1
=> true 
```

所以... ActiveRecord 以某种方式在列中放置了“---”而不是“NULL”...... ActiveRecord 将“---”识别为空，但 mysql 不同意。

# c# - NameSpace Manager or XsltContent to parse aspx page

> ID：11443322
> 
> 赞同：2
> 
> 时间：2012-07-12T00:02:53.063
> 
> 标签：c#, asp.net, linq, html-agility-pack

How can I use NameSpace Manager or XsltContent to parse aspx page?

I am using HtmlAgilityPack.

I am trying to parse aspx page to get Button and Label controls IDs. I am getting the following error when I try to select node with **asp:Button** element.

Here is the error message:

**Namespace Manager or XsltContext needed. This query has a prefix, variable, or user-defined function.**

```
 HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

        string filePath = @"C:\webform4.aspx";

        htmlDoc.Load(filePath);

        foreach (HtmlNode div in htmlDoc.DocumentNode.SelectNodes("//div"))
        {
            Response.Write(div.Id);
            foreach (HtmlNode asp in div.SelectNodes("asp:Button"))
            {
                Response.Write(asp.Id);
            }
        } 
```

My aspx page looks as follows:

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm4.aspx.cs" Inherits="WebApplication1.WebForm4" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="mydiv">

            <asp:Button ID="Button1" runat="server" Text="Button on page4" />
        <br />
        <br />
        <asp:Label ID="Label1" runat="server" Text="Label on page 4"></asp:Label>
        <br />
                    <br />
        <asp:Button ID="Button2" runat="server" Text="second button page 4" />

                        <br />
        <asp:Button ID="Button3" runat="server" Text="second button page 4" />

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:17:17.857

我自己使用带有 Agility Pack 的 Linq，而不是 XPath，这个怎么样？

```
HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

string filePath = @"C:\webform4.aspx";

htmlDoc.Load( filePath );

var aspNodes = htmlDoc.DocumentNode.Descendants().Where( n => n.Name.StartsWith( "asp:" ) );

foreach ( var aspNode in aspNodes ) {
    Console.WriteLine( "Element: {0} Id: {1}", aspNode.Name, aspNode.Attributes["Id"].Value );
} 
```

# haskell - 队列的 Haskell 类型类

> ID：11443324
> 
> 赞同：6
> 
> 时间：2012-07-12T00:03:04.780
> 
> 标签：haskell, typeclass

有没有人写过描述 FIFO 队列的 Haskell 类型类（或者是否有类型类的组合）。

[Data.Collection.Sequence](http://hackage.haskell.org/packages/archive/collections-api/1.0.0.0/doc/html/Data-Collections.html#g:6)似乎太强，但另一方面[Data.Collection.Unfoldable](http://hackage.haskell.org/packages/archive/collections-api/1.0.0.0/doc/html/Data-Collections.html#g:2)似乎太弱（因为未定义顺序）。

我只是不想重做别人的工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:37:44.927

在 Haskell 中滚动自己的 FIFO 队列实际上并不太难（也是一个有趣的练习）。我很感激您想为此使用标准类型类，这几乎肯定是您应该做的。但我上周才知道这件事，我太兴奋了，不想写了。

这是一个简单的队列类，它允许您检查队列是否为空，从队列的头部获取第一个元素（并返回队列的其余部分）并将新元素插入队列。

```
class Queue q where
  empty :: q a -> Bool
  get :: q a -> (a, q a)
  ins :: a -> q a -> q a 
```

创建 FIFO 队列的最简单方法是使用列表：

```
instance Queue [] where
  empty = null

  get []     = error "Can't retrieve elements from an empty list"
  get (x:xs) = (x, xs)

  ins x xs = xs ++ [x] 
```

然而，这是非常低效的。如果队列当前有*n 个*元素，则插入一个新元素需要 O( *n* ) 时间。如果要将*m*个元素插入一个空队列，则需要 O( *m* ² ) 时间。我们可以创建一个在 O(1) 时间（或至少 O(1) 分摊时间）内插入和检索元素的队列吗？

诀窍是将队列的前面和后面存储在单独的列表中，队列的后面反向存储：

```
data Fifo a = F [a] [a]

instance Queue Fifo where 
```

如果前面和后面都为空，则队列为空：

```
 empty (F xs ys) = null xs && null ys 
```

要将新元素插入到列表中，我们只需将其添加到后端队列中，这需要 O(1) 时间。

```
 ins y (F xs ys) = F xs (y:ys) 
```

当有元素在队列中等待时，从队列的前面获取元素很容易（如果队列为空，我们会抛出错误）

```
 get (F []     []) = error "Can't retrieve elements from an empty queue"
  get (F (x:xs) ys) = (x, F xs ys) 
```

最后，如果队列的前面没有元素在等待，那么我们将队列的后面反转，放在前面。尽管这需要 O( *n* ) 时间，但我们只需为每个元素执行一次，因此我们的 get 操作平均需要 O(1) 时间：

```
 get (F [] ys) = get (F (reverse ys) []) 
```

你有它 - 以函数式语言摊销 O(1) FIFO 队列。

* * *

**编辑：** Efie 在评论中询问了摊销 O(1) 的性能。摊销常数时间的论点非常简单。

考虑到一个空队列的*n次插入序列，然后是**n*次检索。插入需要时间*n*。在第一次检索时，队列的前面是空的，所以我们必须反转队列的后面，这也需要时间*n*加上 1 来检索元素。最后，接下来的*n* - 1 次检索每次花费时间 1，因此总时间为

*n* + *n* + 1 + *n* - 1 = 3 *n*

我们总共进行了 2 *n*次调用，因此摊销时间为 3 *n* / 2 *n* = 3/2，即 O(1)。无论对`ins`和的调用如何`get`交错，相同的论点都有效 - 在两次调用中，每个元素被 cons'ed 一次，移动一次并 de-cons'ed 一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T00:12:15.770

取决于您想要进行哪些操作。queuelike和[dequeue包具有](http://hackage.haskell.org/packages/archive/dequeue/0.1.5/doc/html/Data-Dequeue.html)[队列](http://hackage.haskell.org/packages/archive/queuelike/1.0.9/doc/html/Data-Queue-Class.html)的类型类。

# javascript - 新建窗口中的 CSS

> ID：11443326
> 
> 赞同：1
> 
> 时间：2012-07-12T00:03:08.763
> 
> 标签：javascript, jquery, html, css

我正在使用 javascript (w/jQuery) 创建一个新窗口，并使用如下代码将一些节点添加到新窗口的主体中：

```
var consoleWindow = window.open('','','width=460,height=345');
$(consoleWindow.document).find('body').append($("#debug_console")); 
```

问题是我天真地假设父窗口的 CSS 规则将应用于子窗口中的节点，而不是我得到未格式化的 HTML。我将如何在新窗口中应用 CSS？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T00:09:37.253

只需使用这样的东西

```
$(consoleWindow.document).find('head').append('<link rel="stylesheet" href="style.css" type="text/css" />'); 
```

但是您必须将链接 href 指向您的 CSS 文件。

# django - 模型多态性和模型视图分离

> ID：11443327
> 
> 赞同：0
> 
> 时间：2012-07-12T00:03:10.010
> 
> 标签：django, model-view-controller, design-patterns, database-design

我在制作 Django 应用程序时遇到了各种困境，但我认为我遇到的问题可能普遍适用于 MVC 模式。我正在制作一个`Question`可用于构建测验或问卷的模型。基`Question`类将是一个简单的免费回答问题。我想支持不同类型的问题，例如多项选择题或滑动比例问题，这些将是`Question`基类的子类，并添加了额外的字段，例如一系列可能的选择。我希望能够扩展我的问题模型以在将来支持更多类型的问题，为此我可以依赖多态性并`Question`在模型层和视图层之间为`Question`.

我遇到的问题是视图必须知道它收到的问题类型才能呈现它。如果它得到一个多项选择问题，它需要绘制单选小部件等。所以现在如果我用更多类型的问题扩展我的模型，我必须将它添加到模型和视图层。这似乎违背了多态性的观点，因为接收`Question`对象的视图总是必须知道接收到的问题的子类类型。我可以通过将呈现问题的责任委托给模型来解决这个问题。如果`Question`模型有一个名为的虚函数`render_question()`如果它的子类覆盖，那么视图层可以调用该函数来获取正确的 HTML 来输出，而不必担心问题的类型。但是现在我遇到了将 HTML 渲染代码与模型绑定的问题。

是否有第三种解决方案没有我想到的解决方案的任何一个缺点？或者这真的是一个必须做出艰难决定的困境吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:25:19.027

模型/视图之间的分离旨在将表示与数据分离。您对多态模型层次结构的初始描述`Question`确实是一种有效的方法。

您在这里真正想做的是考虑使用 Django 的模型继承来处理数据层次结构，即：

```
BaseQuestion <- FreeQuestion, 
                MultipleChoiceQuestion, 
                SlidingScaleQuestion etc. 
```

然后，您可以构建一个`BaseQuestionView`知道如何显示的`BaseQuestion`（例如渲染问题字符串、设置样式以及其他）并使用相同的原理构造：

```
BaseQuestionView <- FreeQuestionView, 
                    MultipleChoiceQuestionView, 
                    SlidingScaleQuestionView 
```

您可以将 BaseQuestionView 抽象为`BaseQuestion`从数据库中提取所有模型实例并调用在每个子类中`render_question`实现的抽象方法。因此知道它与模型一起工作，并且只实现如何为答案（文本字段）呈现小部件。只会实现如何渲染单选框等。`FreeQuestionView``MultipleChoiceQuestionView``SlidingScaleQuestionView``FreeQuestionView``FreeQuestion``MultipleChoiceQuestionView`

换句话说，它几乎与您在第一个案例中呈现的内容完全相同，只是渲染实现位于 View 类而不是 Model 类中。

当您想以不同方式渲染同一类对象时，可以应用相同的原则。

* * *

使用模型继承，您可以使用点符号访问基本实例的任何子类，即：`question.freequestion`。这将返回给您与基本实例关联的 FreeQuestion 实例，或者`Question.DoesNotExist`如果那不是它的类，则引发。

使用基于类的视图，您可以添加可以根据天气以不同方式呈现您的问题的 Mixins，这是一个 FreeQuestion、MultipleChoiceQuestion，使用 python 的 MRO 模式，或者您可以将它们子类化。

据我所知，Django 没有自动的方法来在继承的模型和继承的视图之间建立关联，您必须自己进行映射。

也许最简单的方法是显式请求与您的初始 Question QuerySet 相关的所有实例，分别与 FreeQuestions、MultipleChoiceQuestions 等相关，并将它们投射到列表中，然后再将其提供给您的主渲染器，然后通过 a`map[question.__class__]`从混音。或者，您可以将问题类型保留在基类中，以避免处理类映射并让数据库在这方面为您提供帮助。

但是，通常您不希望您的模型行为为同一个类动态更改（这就是您对 BaseQuestion 所做的有效操作）。在考虑 REST 进行设计时尤其如此，因为您希望显式 URL 映射到显式具体而非抽象类型。

# scheme - 错误：# 的参数数量错误 当我运行以下代码时，我遇到了一个错误： 错误：#cartesian (x)> 的参数数量错误 ;;;; 函数定义 (define (eps-func p) (let* ((p (lattice->cartesian)) (x (vector3-x p)) (y (ve 问问题 问问题 2012-07-12T00:03:30.550 1353 次 This question shows research effort; it is useful and clear -2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当我运行以下代码时，我遇到了一个错误： 错误：#cartesian (x)> 的参数数量错误 ;;;; 函数定义 (define (eps-func p) (let* ((p (lattice->cartesian)) (x (vector3-x p)) (y (vector3-y p)) (z (vector3-z p))) (if (> sin(* 2 pi x y z) 0) (make dielectric (epsilon 12)) (make dielectric (epsilon 1))))) ;;;; 函数调用 (set! default-material (make material-function (material-func eps-func))) 我不知道哪里错了。上面的代码只是控制文件的一部分。 一些背景资料如下： (lattice->cartesian x) 其中 x 是向量3 vector3 是在某处定义的数据类型 三向量函数 (vector3 x y z) 使用给定的组件创建一个新的 3 向量。 (vector3-x v) (vector3-y v) (vector3-z v) 返回向量 v 的对应分量。 material-func [函数] 一个参数的函数，位置向量3 感谢大家。我还发现这很有效： aggregate(as.numeric(df$Replicate), list(exptCount=df$expt),max) scheme 4 2 回答 2 This answer is useful 0 也许你应该(lattice->cartesian))用参数调用？或者这个函数返回 lambda？ 于 2012-07-12T05:27:54.137 回答 This answer is useful 0 对我来说，这里似乎有两个错误。首先@flamingo 已经提到过，但为了清楚起见，我重命名了 let-bound 变量，使其与参数不同。此外，我在 sin 周围添加了缺失的括号。 (define (eps-func p) (let* ((tmp (lattice->cartesian p)) (x (vector3-x tmp)) (y (vector3-y tmp)) (z (vector3-z tmp))) (if (> (sin (* 2 pi x y z)) 0) (make dielectric (epsilon 12)) (make dielectric (epsilon 1))))) 我已经使用虚拟程序对其进行了测试，它似乎可以工作。希望能帮助到你。 于 2012-08-06T20:24:56.150 回答 Related 2 ruby-on-rails - RVM、Ruby 和 Rails 安装中的 gems 问题 1 .net - 是否有.net IoC 可以在调用对象构造函数之前注入属性？ 3 javascript - 用户配置文件显示未正确使用 ajax 1 wpf - 如何绑定到 ResourceDictionary 中的控件元素 2 hibernate - 对闭环外键约束实施完整性约束 1 c - LLVM 优化错误或未定义的行为？ 1 html - 为最后一个表格标题列添加右边框 7 python - 如何链接可能在 Python 中返回 None 的属性查找？ 2 iphone - 如何在目标 c 中向视图添加乘法动画？ 1 android - 将 Facebook 相册添加到 iOS6？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11443330
> 
> 赞同：-2
> 
> 时间：
> 
> 标签：scheme

当我运行以下代码时，我遇到了一个错误： **错误：#cartesian (x)> 的参数数量错误**

;;;; 函数定义

```
(define (eps-func p)
   (let* ((p (lattice->cartesian))
         (x (vector3-x p))
         (y (vector3-y p))
         (z (vector3-z p)))
        (if (> sin(* 2 pi x y z) 0)
            (make dielectric
                    (epsilon 12))
            (make dielectric
                    (epsilon 1))))) 
```

;;;; 函数调用

```
(set! default-material (make material-function (material-func eps-func))) 
```

我不知道哪里错了。上面的代码只是控制文件的一部分。

一些背景资料如下：

```
(lattice->cartesian x) 
```

其中 x 是向量3

vector3 是在某处定义的数据类型

三向量函数

```
(vector3 x y z) 
```

使用给定的组件创建一个新的 3 向量。

```
(vector3-x v)
(vector3-y v)
(vector3-z v) 
```

返回向量 v 的对应分量。

material-func [函数] 一个参数的函数，位置向量3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:27:54.137

也许你应该`(lattice->cartesian))`用参数调用？或者这个函数返回 lambda？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:24:56.150

对我来说，这里似乎有两个错误。首先@flamingo 已经提到过，但为了清楚起见，我重命名了 let-bound 变量，使其与参数不同。此外，我在 sin 周围添加了缺失的括号。

```
(define (eps-func p)
   (let* ((tmp (lattice->cartesian p))
         (x (vector3-x tmp))
         (y (vector3-y tmp))
         (z (vector3-z tmp)))
        (if (> (sin (* 2 pi x y z)) 0)
            (make dielectric (epsilon 12))
            (make dielectric (epsilon 1))))) 
```

我已经使用虚拟程序对其进行了测试，它似乎可以工作。希望能帮助到你。

# scala - scala 要么 & 不处理

> ID：11443332
> 
> 赞同：2
> 
> 时间：2012-07-12T00:04:09.930
> 
> 标签：scala, either

不知道该怎么称呼它，Option 和 Either 一样合适，无论如何我都需要处理第三种情况。

Scalaz 可能已经提供了类似的东西，但我很想知道如何在没有单独的库的情况下简洁地处理以下简单情况：

我需要检查用户会话是否存在，无论是实际用户还是管理员以用户身份登录的场景，后者优先于前者；如果两个条件都不存在，则显示登录屏幕。

实际的用户会话检查如下所示：

```
request.session.get(Security.username) map { id=>
  f(Success(id.toInt, request)) 
} getOrElse( onFail(request) ) // onFail = show login 
```

我需要添加管理员模拟用户案例：

```
request.session.get(Security.impersonate) map { id=>
  f(Success(id.toInt, request)) 
} getOrElse( onFail(request) ) 
```

我可以 getOrElse 这一切，但更愿意清理一下，无论用户或管理员作为用户的情况，操作都是相同的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T00:17:51.080

不是 getOrElse，只是 orElse

```
scala> val userName : Option[String] = None
userName: Option[String] = None

scala> val impersonate = Some("Fred")
impersonate: Some[java.lang.String] = Some(Fred)

scala> userName orElse impersonate
res0: Option[String] = Some(Fred)

scala> val userName = Some("George")
userName: Some[java.lang.String] = Some(George)

scala> userName orElse impersonate
res1: Option[java.lang.String] = Some(George) 
```

所以在你的情况下

```
request.session.get(Security.username) orElse request.session.get(Security.impersonate) map { id=>
  f(Success(id.toInt, request)) 
} getOrElse( onFail(request) ) 
```

# c++ - 无法理解实例变量

> ID：11443335
> 
> 赞同：1
> 
> 时间：2012-07-12T00:04:41.057
> 
> 标签：c++

这是定义：

在使用类的面向对象编程中，实例变量是在类中定义的变量（即成员变量）//我明白了这部分

, 类的每个对象都有一个单独的副本。// 这部分我不明白。

一个对象怎么会有一个单独的副本？什么的单独副本？

抱歉问了一些基本问题，我还是菜鸟。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:09:38.200

**[评论答案]** 实例变量是一个变量，它为声明的每个对象都有一个实例，其中类变量是单个成员变量，对于声明为该类型的所有对象，只有一个成员变量。类变量使用关键字 static，而实例变量则没有！

**[ORIGINAL]** 当你定义一个类时，它有成员声明。

在定义该类类型的变量之前，不会真正实例化对象（或给定内存空间）。

如果您随后定义了两个该类类型，则这些对象将被赋予它们自己的内存空间，并且每个对象的每个成员实际上都有自己的内存（因此该对象的 2 个单独的实例化）。

现在，每组数据（在对象内）都可以并且确实是单独操作的。

类变量：

[http://en.wikipedia.org/wiki/Class_variable](http://en.wikipedia.org/wiki/Class_variable)

实例变量：

[http://en.wikipedia.org/wiki/Instance_variable](http://en.wikipedia.org/wiki/Instance_variable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:05:52.883

如果您有两个对象，则每个对象都将拥有自己的实例变量副本。即`a.x`与 不同`b.x`，即使你给它们相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:29:30.390

我又做了一个可怕的蚀刻草图，只好用它来灼伤你的眼睛。如果它能解决任何理解问题，那就太好了！

![类成员关系](../Images/5e09609a0bb8e1c24eb2d3c745ce3367.png)

所以，我们有一个类，叫它`Foo`。`Foo`有一些静态成员，如图：
`x`, `y`,`z`

在顶部，您会看到非对象访问。这意味着我们可以在没有对象的情况下访问这些静态成员。事实上，一个对象甚至不必在访问它们之前创建，因为它们在开始之前就存在`main`。

```
struct Foo {
    static int x, y, z;
};

int Foo::x = 3;
int Foo::y = 1;
int Foo::z = 8;

int main() {
    std::cout << Foo::y;
    Foo::x = 6;
} 
```

接下来，我们还有其他包含两个对象的实例成员的圆圈：

```
struct Foo {
    int a;
    int b;
    int c;

    Foo (int a2, int b2, int c2) 
        : a (a2), b (b2), c (c2){}
};

int main() {
    Foo obj1 (6, 9, 10);
    Foo obj2 (3, 2, 4);

    std::cout << obj1.a; //outputs 6
    std::cout << obj2.a; //outputs 3 - different

    obj1.z = 100;
    std::cout << obj2.z; //outputs 100 - same
    std::cout << Foo::z; //outputs 100
} 
```

我们还可以放入成员函数和静态函数来访问变量：

```
struct Foo {
    int getA() const {return a;}
    void setA (int newA) {a = newA;}

    static int getX() const {return x;}
    static void setY (int newY) {return y;}
    static void setB (int newB) {
        b = newB; //error: static functions can't access instance members
    }
}

int main() {
    Foo obj1 (6, 9, 10);

    std::cout << obj1.getX(); //outputs 3
    Foo::setY (5);

    obj1.setA (98);
    std::cout << obj1.getA(); //outputs 98
} 
```

回顾一下：

*   每个对象都可以访问自己的实例成员。一个对象的实例成员不会影响另一个（除非它们是有意的，例如引用）。

*   两个对象共享同一个静态成员池。这个池是创建的，并且可以在创建任何对象之前使用`Foo::`语法或之后使用`obj1.`或`obj2.`语法进行操作。在某处更改静态成员会影响所有情况。

*   要控制这些成员的使用，请将它们设为私有并提供访问功能。请注意，静态函数不能访问实例成员。该函数可以在不创建任何对象的情况下使用，那么它应该如何处理实例成员？它没有要更改的特定对象的实例对象池！

*   为了详细说明最后一点，成员函数会获得一个`this`传递给它们的隐式参数，该参数告诉它们在您修改时要修改的变量。`a = newA;`实际上等价于`this->a = newA;`。然而，静态成员函数没有`this`参数，因此无法知道要修改哪个对象。

# javascript - 为什么我的 for-in 循环循环我的数组大小的两倍？

> ID：11443337
> 
> 赞同：2
> 
> 时间：2012-07-12T00:04:51.783
> 
> 标签：javascript, dom, loops, for-in-loop

我正在使用 for-in 循环来迭代两个元素的数组，但这就像它循环两次一样。

我在这里有一个例子：http: [//jsbin.com/etoyac/8/](http://jsbin.com/etoyac/8/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:06:29.080

这是因为返回的结果`getElementsByTagName`不是一个简单的数组——它是一个**NodeList**并且它是“活的”。您对 DOM 所做的更新会立即反映在列表中。

您可以使用 Array 原型上的“slice”方法将 NodeList 转换为数组：

```
var slideArr = [].slice.call(slides, 0); 
```

此外，您应该使用数字索引遍历数组（或 NodeList）：

```
for (var slideIndex = 0; slideIndex < slideArr.length; ++slideIndex) { 
```

# design-patterns - 关于学习软件开发和设计模式的建议

> ID：11443338
> 
> 赞同：-2
> 
> 时间：2012-07-12T00:05:15.320
> 
> 标签：design-patterns, software-design

我已经编程了一段时间，并且了解 Java、C 和 C++ 的基础知识。我知道一点面向对象的编程。目前，我正在努力提高我的知识（我需要使用 C# 进行编程项目）。

但在这条路上，我真的感到迷茫和沮丧。我想学习的不仅仅是语言的基础知识。我想学习设计模式并开发和规划一个软件项目，但我不知道如何进行。

我尝试阅读有关设计模式的书籍，但当我没有特定项目要做时，它们会感觉很抽象。我对此感到非常困惑，您是如何学习面向对象设计和设计模式的？我觉得如果我只是读一本书，我不会学到很多东西。

我觉得 Head First Design Patterns 这本书试图让它过于简单化。而且《四人帮》这本书感觉太理论化了（它说你需要先学习面向对象设计）。我喜欢更直截了当并有一些练习的书籍/资源。

在这种情况下你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:27:51.963

您可能会感兴趣的中间道路（在四人帮的抽象性质和简单的 Head First Design Patterns 之间） - 尝试：

Martin Fowler - 企业应用架构模式（本书）。您可以在[http://martinfowler.com/eaaCatalog/的模式目录预览中看到](http://martinfowler.com/eaaCatalog/)

还要考虑：Michael T. Nygard - Release It - 包含一些与可靠性、可伸缩性和类似问题相关的优秀模式：http: [//pragprog.com/book/mnee/release-it](http://pragprog.com/book/mnee/release-it)

这些书可能比您寻求的更高级别（应用程序架构），但提供了非常具体的问题和解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:36:21.263

您需要阅读一些真正解释正在发生的事情的好书。我会选择[SICP](http://mitpress.mit.edu/sicp/)和[Designing Object-Oriented Software](https://rads.stackoverflow.com/amzn/click/com/0136298257)。这些书不会直接教你设计模式，但你将学习如何为你面临的每一个问题创建出色的设计解决方案。设计模式只是针对少数情况的预先准备好的解决方案。您需要能够自己解决所有可能的问题。在那之后，学习设计模式是小孩子的游戏……

# ruby-on-rails - Rails、SRP 和单元测试

> ID：11443339
> 
> 赞同：2
> 
> 时间：2012-07-12T00:05:18.887
> 
> 标签：ruby-on-rails, unit-testing, solid-principles, acceptance-testing, single-responsibility-principle

**前言**

这是我第一次尝试在考虑 SRP 的情况下构建应用程序，并真正尝试使用测试来驱动网站的代码，而不是从我的数据架构 (ActiveRecord) 开始，然后构建适合的应用程序。

但我遇到了问题。我订阅并观看了很多 Destroy All Software 的截屏视频，理论上我喜欢他所宣扬的内容，但我在实践中遇到了麻烦。

**手头的问题**

我知道我的应用程序的主要功能是根据位置搜索个人资料。因此，我为此编写了一个简单的 Cucumber 功能（暂时不使用路由/控制器/等，以简化手头的任务）。

搜索功能：

```
Feature: Search for profiles

  Scenario: By zipcode
    When I search for 90210
    Then I will see profiles near 90210 
```

search_steps.rb：

```
When /^I search for 90210$/ do
  @profiles = ProfileSearch.new.near_location(90210).all
end

Then /^I will see profiles near 90210$/ do
  pending # express the regexp above with the code you wish you had
end 
```

没问题，现在看规格：

profile_search_spec.rb：

```
require_relative '../../app/services/profile_search'

describe ProfileSearch do  
  it "finds nearby profiles"
  it "does not find far away profiles"
end 
```

profile_search.rb：

```
class ProfileSearch
end 
```

我使用 ProfileSearch 类有几个原因。

1.  将尽可能多的业务逻辑移到 ActiveRecord（单一职责原则）之外似乎是正确的做法。
2.  PORO 可以加快测试速度（不加载 Rails）。
3.  我计划在不久的将来使用 ElasticSearch 或 Solr，并希望界面保持不变。

我不确定下一步该怎么做。`ProfileSearch`显然取决于`Profile`模型，我很确定这将是 ActiveRecord。

所以问题是我是否开始规范和构建`Profile`并开始在我的测试中加载 Rails？这似乎是最简单的选择，但似乎有些错误。我觉得我会设计和构建我的应用程序尚未特别要求的行为。我将不得不考虑字段、关系和存储等，所有这些都是我的应用程序目前不应该关心的。

`Profile`或者我应该对规范中的所有调用使用存根/模拟，`ProfileSearch`并确保调用了正确的方法？这似乎也是错误的，因为那时我不会真正测试该行为，并且在切换到 Solr 或 ElasticSearch 时我必须重写测试，即使预期会有相同的行为。

或者我实际上应该创建一个工作的 Profile 模型，它暂时不使用 ActiveRecord，但可以正确响应 Bob 叔叔在构建他的 wiki 事物时展示的所有正确方法？从理论上讲，这似乎是最好的方法，但知道我将来会使用 ActiveRecord，这似乎也很多余。

或者...去他妈的，把所有东西都扔到 ActiveRecord 模型中：\

有太多的模式、原则和最佳实践在我脑海中浮现，我不知道 WTF 该怎么做。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-14T03:03:20.373

首先，您需要选择测试方法：

*   Cucumber 专为 BDD（由外而内）测试而设计。Cucumber 场景旨在锻炼您的整个堆栈（网页、控制器、模型、数据库——或任何您的堆栈），而不是像您在上面所做的那样用作单元测试。因此，如果您编写的第一件事是 Cucumber 场景，则需要调用所有层以使第一个场景通过。这就是我所做的，无论是使用 Cucumber（我最喜欢的）还是 RSpec 功能规范。完成之后，您可以自由地重构以满足您喜欢的任何设计标准，并且您可以通过单元测试来测试详细的需求。

*   或者，您可以选择堆栈中最棘手的部分，对其进行单元测试，然后在各层上下进行单元测试，最终进行验收测试，直到您拥有整个应用程序。一方面，这可能是一个好主意，可以证明您可以在投资简单的部分之前让棘手的部分工作。另一方面，我发现当我在没有工作验收测试的情况下猜测组件接口时，我总是猜错，所以我不这样做。

无论哪种方式，您的目标都是`ProfileSearch`返回`Profile`实例但不保证它们是 ActiveRecord 对象或任何其他持久性特定的类。在测试中如何处理这些类取决于测试的类型：

*   如果您使用验收规范（Cucumber 或 RSpec 功能规范），它们将不使用存根，它们将使用所有真正的实现类，并且它们将加载 Rails，因为这是它们的重点，也是它们的设计方式。对不起，他们会很慢。除了指定重要场景所需的内容之外，不要编写更多内容。

*   在使用 的类的单元测试中`ProfileSearch`，您可以将其存根并返回 PORO 以提高速度。（如果您使用 rspec-rails，`require 'spec_helper'`而不是`rails_helper`在那些规范中，以避免在您自己运行 Rails 时加载它们。）

*   让自己的单元测试`ProfileSearch`通过的最简单方法可能是只创建`Profile`一个 ActiveRecord 模型并`ProfileSearch`使用`Profile`的 ActiveRecord 功能并返回`Profile`. 这些规格也需要`require 'rails_helper'`。

# api - 为文章或页面上传文件的 API 调用

> ID：11443344
> 
> 赞同：2
> 
> 时间：2012-07-12T00:06:16.973
> 
> 标签：api, shopify

我是新来的，试图从文档中了解如何通过 api 为文章/博客文章上传图片。

我可以看到“资产”资源是我必须处理的资源吗？

存储桶的文件结构如何？

上传到博客的图片可以通过这样的URI访问

[http://cdn.shopify.com/s/files/xxxxxxxxxxxx/files/wwb_drapers_large.jpg](http://cdn.shopify.com/s/files/xxxxxxxxxxxx/files/wwb_drapers_large.jpg)

作为主题资产上传的图像可以通过这样的 URI 访问

[http://cdn.shopify.com/s/files/xxxxxxxxxxxx/assets/logo.png](http://cdn.shopify.com/s/files/xxxxxxxxxxxx/assets/logo.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:28:04.853

Asset 资源将是您可以用来上传图片的唯一 API 资源。

虽然有通过管理界面将图像上传到文章的功能，但它不会通过 API 公开。这仅意味着您不能使用 API 将文件上传到“文件”存储桶中。相反，您将使用 Asset 资源将文件上传到“assets”存储桶。

请参阅标题下的[http://api.shopify.com/asset.html#update](http://api.shopify.com/asset.html#update)：“通过提供 base64 编码的附件创建新图像”以创建资产。然后，您可以在资产上使用“public_url”属性并在文章中使用它。

# networking - 将 IP 地址分配给物理位置

> ID：11443345
> 
> 赞同：0
> 
> 时间：2012-07-12T00:06:19.523
> 
> 标签：networking, ip, cisco, dhcp

有没有办法为连接到 3 级 Cisco 交换机上特定端口的计算机分配 IP 地址？我想制作一个网络地图，可以根据计算机的 IP 地址识别计算机在我们建筑物中的物理位置。如果计算机移动位置，它会获得一个新的 IP 地址。这样，IP 地址被分配给物理位置，而不是 MAC 地址或计算机。

如果我的 IP 地址想法很荒谬，其他能够识别计算机物理位置的想法会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:00:57.680

您需要在您的交换机上支持[基于 DHCP 服务器端口的地址分配的 IOS；](http://www.cisco.com/en/US/docs/switches/lan/catalyst2960/software/release/12.2_55_se/configuration/guide/swdhcp82.html#wp1320905)您还必须从交换机发出 DHCP。假设你已经得到了`Fa1/0/1`并且`Fa1/0/2`在 Vlan120 中。

```
ip dhcp use subscriber-id client-id
ip dhcp subscriber-id interface-name
ip dhcp excluded-address 192.0.2.1 192.0.2.10
!
ip dhcp pool VLAN120
   network 192.0.2.0 255.255.255.0
   default-router 192.0.2.1
   dns-server 192.0.2.5
   reserved-only
   address 192.0.2.101 client-id "Fa1/0/1" ascii
   address 192.0.2.102 client-id "Fa1/0/2" ascii 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T06:56:22.263

您的另一个选择是在交换机上使用 DHCP 选项 82 并在 Windows Server 2012 上配置 DHCP 策略。

有关更多信息，请查看这篇文章[Windows Server 2012 上的 DHCP 策略](http://blogs.technet.com/b/teamdhcp/archive/2012/08/22/granular-dhcp-server-administration-using-dhcp-policies-in-windows-server-2012.aspx)

# ruby-on-rails - Ruby on Rails 内联 around_save 回调产生 LocalJumpError

> ID：11443350
> 
> 赞同：4
> 
> 时间：2012-07-12T00:06:54.783
> 
> 标签：ruby-on-rails, ruby, callback, ruby-1.9

在 Rails 3.0.5 和 Ruby 1.9.3 中，是否可以`around_save`在声明中定义回调的主体`around_save`？

也就是说，我注意到这种情况正常工作：

```
around_save :around_save_body
def around_save_body
  puts 'before save'
  yield 
  puts 'after save'
end

[114] pry(main)> a = Activity.find(57)
=> #<Activity id: 57, ... >

[115] pry(main)> a.save
before save
after save
=> true 
```

而如果我将正文内联，我会得到一个 LocalJumpError：

```
around_save do |activity|
  puts 'before save'
  yield 
  puts 'after save'
end

[117] pry(main)> a = Activity.find(57)
=> #<Activity id: 57, ... >

[118] pry(main)> a.save
before save
LocalJumpError: no block given (yield)
from /home/maksim/hkn/website/app/models/activity.rb:47:in `block in <class:Activity>' 
```

我尝试在第二个示例中更改`yield`为`yield activity`，但得到了相同的结果。是否可以让我的`around_save`身体符合`around_save`声明？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T00:26:14.803

在这种情况下`ActiveRecord`，将 a`Proc`作为第二个参数传递，只需执行以下操作：

```
around_save do |activity, block|
  puts 'before save'
  block.call
  puts 'after save'
end 
```

# jquery - 忽略jQuery中的空href

> ID：11443355
> 
> 赞同：0
> 
> 时间：2012-07-12T00:07:30.717
> 
> 标签：jquery

我试图在 jQuery 函数中忽略带有空 href 属性的 a。这是菜单：

```
<nav id="nav-works-screen" role="navigation">
    <ul id="nav-other-links">
        <li class="nav-title">NICHOLAS<br/> AREHART</li><br/>
        <li><a href="">CV/Bio</a></li>
        <li><a href="">Contact</a></li>
        <li><a href="">News</a></li>
        <li><a href="<?php randLink() ?>">Link???</a></li>
    </ul>
    <ul id="nav-works">
        <li class="nav-title">WORK</li><br/>
        <li class="work"><a href="#the-speech">The Speech</a></li>
        <li class="work"><a href="#forms-derived-from-a-code">Forms Derived from a Code</a></li>
        <li class="work"><a href="#unauthorized-reproduction">Unauthorized Reproduction</a></li>
        <li class="work"><a href="">Newport Ads</a></li>
        <li class="work"><a href="">An Illegally Downloaded Film</a></li>
        <li class="work"><a href="">Hold on to Your Genre</a></li>
        <li class="work"><a href="">Autonomy</a></li>
        <li class="work"><a href="">Ikea Objects</a></li><br/>
        <li id="nav-arrows"> 
            <div class="nav-arrows">
                <a class="nav-arrow-prev" href="">&laquo;</a>
            &emsp;&emsp;
                <a class="nav-arrow-next" href="">&#187;</a>
            </div>
        </li>
    </ul>
</nav> 
```

锚点：

```
<div id="content" class="clrfx">

    <div id="primary" class="clrfx">
        <div id="the-speech" class="page odd the-speech">
            <div class="page-content">
                <h2>The Speech</h2>
            </div>
        </div>

        <div id="forms-derived-from-a-code" class="page even forms-derived-from-a-code">
            <div class="page-content">
                <h2>Forms Derived from a Code</h2>
            </div>
        </div>

        <div id="unauthorized-reproduction" class="page odd unauthorized-reproduction">
            <div class="page-content">
                <h2>Unauthorized Reproduction</h2>
            </div>
        </div>

    </div><!-- #primary -->

</div><!-- #content --> 
```

这是jQuery：

```
<script type="text/javascript">
    $(document).ready( function() {
        $('#nav-works-screen a').smoothScroll();

        $(document).scroll( function(){
            $('nav a').each( function(){
                var workLink = $(this);
                var work = workLink.attr('href');

                if (work != '') {

                    var workTop = $(work).offset().top;
                    var currentPos = $(window).scrollTop();
                    var winHeight = $(window).height();

                    if (currentPos >= workTop) {
                        workLink.css({'background-color':'#38FF4F'});
                        workLink.parent().siblings().children().css({'background-color':'transparent'});
                    }
                    else {
                        workLink.css({'background-color':'transparent'});
                    }
                }
            });
        });
    });
</script> 
```

不幸的是，我不断收到一个错误，即 null 的属性“顶部”无法读取。如果我明确声明应该忽略任何空的工作变量，我不明白为什么工作变量会为空。我确信它真的很简单，但我已经用这个东西把头撞在墙上一个多小时了。任何帮助将非常感激。

编辑 - 这就是问题所在：`<li><a href="<?php randLink() ?>">Link???</a></li>`我猜我的随机链接 php 函数与遍历 DOM 的 jQuery 搞砸了，但我很好奇为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:26:43.043

好吧，这实际上对我有用，但我不得不更改选择器

```
$('nav a').each( function(){ 
```

至

```
$('#nav-other-links a').each( function(){ 
```

因为您的 html 提取中没有“nav”元素。但是你应该放置一个

```
alert(work); 
```

在 if 语句之前并检查在空 href 时“工作”到底是什么，当它不是空字符串时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:40:39.703

```
 $(document).scroll( function(){
        $('nav a').each( function(){
             // if the href evaluates to false then return false
             if(!$(this).attr('href')){return false;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:54:38.027

您是否尝试过**attr not**选择器？

```
$('#nav-other-links a[href!=""').each(function() {
    //
}); 
```

此外，Tomasz 对虚构`NAV`选择器的看法是正确的。

# c# - 模运算符的语义是什么？

> ID：11443358
> 
> 赞同：0
> 
> 时间：2012-07-12T00:07:52.397
> 
> 标签：c#, arrays

我想知道 C# for Programmers 2010 中有一段代码，这里是：

```
for (int i = 0; i < deck.Length; i++)
{
    deck[i] = new Card(faces[i % 13], suits[i / 13] );
} 
```

我知道计数是数组内存中的插槽，新卡将花色和面放在甲板上，它们会返回计数值。我不明白的是你怎么能模数除以零？还是我误会了？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:16:40.417

这个问题听起来模数运算符让您感到困惑。模数 ( `%`) 运算符计算除法的余数。它的结构与除法（分子/分母）相同。看来您看到`i % 13`的是`remainder of 13/i`。那是错的。它是`remainder of i/13`。因此，如果`i`为零，则模运算符将返回 0。您***永远不会在******该***应用程序中除以我的零。

一个例子是`3/2`。`3/2`是1个半。但是，如果您将该结果保存为整数（无小数），则仅`1`保存。那一半去哪儿了？它被扔掉了。如果你想要它，你可以将它保存为`float`or `double`，或者使用模数运算符。`3%2`会给你`1`，剩下的。这是一个示例程序：

```
struct ModulusHelper
{
    public int Quotient;
    public int Remainder;
    public ModulusHelper(int numerator, int denominator)
    {
        Quotient = numerator / denominator;
        Remainder = numerator % denominator;
    }
} 
```

你可以像这样使用它：

```
class Program
{
    static void Main(string[] args)
    {
        ModulusHelper mod = new ModulusHelper(args[0], args[1]);
        Console.WriteLine("Quotient:  {0}", mod.Quotient);
        Console.WriteLine("Remainder: {0}", mod.Remainder);
        Console.ReadKey(); // BATCH `pause`
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:09:41.247

0 % 13 = 0

0 / 13 = 0

这是简单的数学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:11:37.967

您不是除以 0，而是将 0 除以 13。0/13 = 0

# javascript - 使用单击事件 jQuery 停止循环

> ID：11443359
> 
> 赞同：0
> 
> 时间：2012-07-12T00:07:53.197
> 
> 标签：javascript, jquery, loops, each

我正在寻找一种通过单击事件（某种紧急按钮）来停止循环的方法。如果单击该按钮，它应该立即停止。

// 基本思想

```
$.each(someArray, function(index, value){
    setTimeout(function(){
          console.log(index);
     },5000*index);
});

$('#panic-button').click(function(){
    //the code that should stop the looping
}): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:22:06.037

循环开始后，您不能`$.each`使用`click`处理程序中断循环。JavaScript 执行是单线程的，所以`click`处理程序最多只能在线程空闲时排队等待——在循环完成之后。

但是，由于计时器是异步执行的，您可以通过保留和清除它们的每个 ID 来取消它们：

```
var timeouts = [];

$.each(someArray, function(index, value){
    timeouts.push(setTimeout(function(){
          console.log(index);
     },5000*index));
});

$('#panic-button').click(function(){
    $.each(timeouts, function (_, id) {
       clearTimeout(id);
    });

    timeouts = [];
}): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T00:35:51.503

如果你想要一个`in the background`可以终止的循环，你必须模拟它，因为 js 本质上是单线程的，你的循环将阻塞直到它完成，然后你就可以点击一个按钮。

下面是一个例子，它使用settimeout来模拟一个可以点击取消的循环

[小提琴](http://jsfiddle.net/zP3gT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:20:08.517

在 $.each() 之外创建函数返回值，并使用标志变量来确定是否单击了按钮。我一般使用“窗口”来声明全局函数和变量。

```
var panicButtonClicked = false;  
window.panicButtonClicked = panicButtonClicked;
var timeouts = [];
window.timeouts = timeouts;

$.each(someArray, function(index, value){
    if( !panicButtonClicked )
    {
         timeouts.push( setTimeout(function(){
          console.log(index);
         }, 5000*index) );
    }
});

$('#panic-button').click(function(){
    //the code that should stop the looping
    panicButtonClicked = true;
    $.each(timeouts, function (_, id) {
        clearTimeout(id);
    });
}); 
```

我在我的编辑中包含了 Jonathan Lonowski 给出的 for 循环。这个想法是相似的，除了你需要一个额外的变量来防止你的初始循环执行。这能解决你的问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T00:13:50.590

你的答案很简单：

`var $theTimeout =`在您的处理程序中添加`setTimeout`并清除它`click`：`clearTimeout($theTimeout)`.

[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# c# - 如何在 C# 中重新启动 IE WebBrowser 控件

> ID：11443360
> 
> 赞同：1
> 
> 时间：2012-07-12T00:07:58.183
> 
> 标签：c#, internet-explorer, proxy, browser

基本上我已经想出了如何以编程方式更改代理，但现在我希望我的 WebBrowser 使用新的代理。为此，我假设我需要重新启动 IE，并且通过扩展，在我的 C# 应用程序中重新启动基于 IE 的 WebBrowser 控件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:15:13.133

鉴于您在 C# 应用程序中使用 WebBrowser 控件，那么您无法执行重启 IE 之类的操作，因为您在应用程序中使用了它的控件。

但是如何重新加载Webbrowser控件可能是一个新实例，希望这可能对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:10:36.723

WebBrowser 和 Internet Explorer 使用系统中的通用代理设置。您无需重新启动 WebBrowser 或 IE，只要代理更改，它就会被使用。如果您在 WebBrowser 中更改代理设置，它们将立即应用于 IE，反之亦然。我希望我已经正确理解了这个问题。

# loops - 批量循环

> ID：11443362
> 
> 赞同：-2
> 
> 时间：2012-07-12T00:08:01.793
> 
> 标签：loops, batch-file, for-loop

我执行以下批处理以使我的脚本“mvn.bat”在目录下的所有文件夹上执行。如您所见，for 循环将“*”视为输入，并且所有文件夹都被视为执行。

```
FOR /D %%G in ("*") DO (
    D:\maven\bin\mvn.bat jcli:deploy -Dlist.dir="./%%G" -Denv.name=Server1 -Dint.service=Server service
) 
```

我现在希望脚本忽略以 Shared 结尾的文件夹（条件“*Shared”），我尝试了几种方法将 if 循环用于过滤等，但没有任何结果，任何建议或解决方案都会有帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:27:32.107

很难说出你真正在问什么，但我认为你不能在 DOS 批处理脚本中做到这一点，但你可以在 C# 或 Powershell 中做到这一点。你的线索可以在[这里找到](https://stackoverflow.com/questions/136539/determining-if-a-folder-is-shared-in-net)吗？

# ruby-on-rails - rails 3.2.6 路由错误

> ID：11443363
> 
> 赞同：2
> 
> 时间：2012-07-12T00:08:03.457
> 
> 标签：ruby-on-rails, routing, rails-routing

我是 Rails 新手，我遵循了“head first with rails”这本书

这是我做的步骤：

```
$rails tickets

shaun@master ~/Desktop/tickets $ rails generate scaffold ticket name:string seat_id_seg:string address:text price_paid:decimal email_address:string

shaun@master ~/Desktop/tickets $ rake routes
    tickets GET    /tickets(.:format)          tickets#index
            POST   /tickets(.:format)          tickets#create
 new_ticket GET    /tickets/new(.:format)      tickets#new
edit_ticket GET    /tickets/:id/edit(.:format) tickets#edit
     ticket GET    /tickets/:id(.:format)      tickets#show
            PUT    /tickets/:id(.:format)      tickets#update
            DELETE /tickets/:id(.:format)      tickets#destroy

    shaun@master ~/Desktop/tickets $ rake db:migrate
==  CreateTickets: migrating ==================================================
-- create_table(:tickets)
   -> 0.1065s
==  CreateTickets: migrated (0.1069s) =========================================

when i try going to localhost:3000/tickets

it comes out Routing Error and says "No route matches [GET] "/tickets"

> Started GET "/tickets" for 192.168.1.8 at Thu Jul 12 08:45:38 +0800 2012
Connecting to database specified by database.yml

ActionController::RoutingError (No route matches [GET] "/tickets"):
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.6) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.6) lib/rails/commands.rb:55
  railties (3.2.6) lib/rails/commands.rb:50:in `tap'
  railties (3.2.6) lib/rails/commands.rb:50
  script/rails:6:in `require'
  script/rails:6

  Rendered /var/lib/gems/1.8/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (2.8ms) 
```

我该如何解决这个问题？我希望能够看到主页以及所有指向索引、创建新票证、编辑、显示、更新和删除的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:25:16.083

我刚刚完全按照您为新的 Rails 3.2.6 应用程序编写的操作，它对我来说效果很好。您错过的唯一步骤是`rake db:migrate`在脚手架生成之后运行。试试看它是否有效。

# vbscript - ASP 代码中字母数字和数字的条件检查

> ID：11443365
> 
> 赞同：0
> 
> 时间：2012-07-12T00:08:27.190
> 
> 标签：vbscript, asp-classic, conditional-statements

谁能告诉我如何检查以检查 6 位值 5 位可以是字母数字，但第 6 位必须是使用 VB 的 ASP 代码中的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:42:04.830

我会使用正则表达式，因为您可以检查格式和长度，如果需求发生变化，您会很灵活（例如“更改请求：最后一位不能为零”）

```
str = "12aB34"
Set myRegExp = New RegExp
myRegExp.IgnoreCase = True
myRegExp.Pattern = "^[A-Z0-9]{5}\d$"
isValid = myRegExp.Test(str)    ' returns True in this case 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:34:07.000

如果您的值仅固定为 6 位，则可以使用**[Mid](http://www.w3schools.com/vbscript/func_mid.asp)**功能。如果您的值不固定为 6 位并且您需要检查最后一位，您可以使用**[Right](http://www.w3schools.com/vbscript/func_right.asp)**函数和**[isNumeric](http://www.w3schools.com/vbscript/func_isnumeric.asp)**检查。

例如：

```
<%
    is_numeric = isNumeric(Right(myValue,1))
%> 
```

或者

```
<%
    is_numeric = isNumeric(Mid(myValue,6,1))
%> 
```

# design-patterns - 在这个类图中使用什么设计模式？

> ID：11443367
> 
> 赞同：0
> 
> 时间：2012-07-12T00:08:52.403
> 
> 标签：design-patterns, uml

我正在开发应用程序来创建音像商店的类图。在该客户可以订阅零售商以收到新版本的通知。我可以使用观察者设计模式来满足这个要求吗？申请的一些要求是：

1.  为每个类别创建和检索电影的能力
2.  零售商每天为随机选择的客户发送 10% 的折扣券

我做了这个类图，没有任何简单的模式。我想通过将设计模式应用于图表来改进这一点。有什么建议可以使用哪些模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:39:04.377

正如 scriptfromscratch 所说，这个：我做了这个类图，没有任何简单的模式。我想通过将设计模式应用于图表来改进这一点。有什么建议可以使用哪些模式？是一个非常糟糕的主意...设计模式的“好处”是您可以命名在解决问题时遇到的事情，因此更容易传达您所做的事情。没有“通过应用设计模式来改进某些东西”这样的事情。您正在走上滥用设计模式的道路，这是一个非常糟糕的主意。 [http://c2.com/cgi/wiki?DesignPatternsConsideredHarmful](http://c2.com/cgi/wiki?DesignPatternsConsideredHarmful) http://taskinoor.wordpress.com/2011/09/21/the-abuse-of-design-patterns-in-writing-a-hello-world-program /

# spring - 如何确定在 Spring 中使用哪个类？

> ID：11443369
> 
> 赞同：0
> 
> 时间：2012-07-12T00:09:18.290
> 
> 标签：spring

我有一些将文本数据解析为 Java 对象的代码。有几个基于 json 值的解析器可用。例如，当 type=1 时，使用 parser1，type=2 使用 parser2 等。

我的代码如下：

```
interface Parser {
    Data parse(Input data);
}

class Parser1 implements Parser {
}

class Parser2 implements Parser {
}

switch(type)
{
   case 1:
     return parser1.parse(data);
   case 2:
     return parser2.parse(data);
   default:
     return null;
} 
```

我不喜欢手动检查类型和手动选择解析器。有没有办法让spring处理从类型到解析器的映射？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:07:43.800

您无法避免检查映射，您必须以一种或另一种方式告诉 spring 在每个状态中选择什么解析器。

您可以使用具有一个 getParser 方法的 ParserFactory 很好地实现它。例如：

```
public class ParserFactory {

@Autowire
@Qualifier("parser1")
Parser parser1;

@Autowire
@Qualifier("parser2")
Parser parser2;

public static Parser getParser(String value){
    if(value.equals("x")){
        return parser1;
    }else if (value.equals("y")){
        return parser2;
    }
}
} 
```

如果你喜欢，你可以拥有一个 Parser 列表并使用 @Resource 注释对其进行配置。

您可以使用 spring config xml 实例化您的解析器：

```
<bean id="parser1" class="com.myCompany.parsers.Parser1"/>
<bean id="parser2" class="com.myCompany.parsers.Parser2"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:54:02.340

# iphone - 在 ios 应用程序中使用简单的插画形状

> ID：11443375
> 
> 赞同：0
> 
> 时间：2012-07-12T00:10:04.210
> 
> 标签：iphone, ios, cocoa-touch, core-graphics, adobe-illustrator

在我的应用程序中，用户可以在屏幕上拖动一些形状并垂直和水平拉伸。这些形状是我在illustrator 中绘制的简单形状，即椭圆、星形、云。

我在想：

1）我应该如何在我的应用程序中实现这些？导入文件并在图像视图中实例化它会更好吗？或者我应该尝试在某些视图上的 drawRect 中绘制这些形状？

2）如果在核心图形中绘制形状更好，我如何从illustrator文件中获取数据以便我可以在CoreGraphics中轻松绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:21:51.120

我认为如果可能的话，您应该尝试在核心图形中绘制形状，因为它更适合内存并且与分辨率无关。我在 OSX 应用商店找到了一个 40 美元的程序，可以将 SVG 文件转换为 iOS / OSX 代码。它被称为[Qwarkee](http://itunes.apple.com/us/app/qwarkee/id498340809?mt=12)。

# colors - ansicon -i 在 Windows 7 x64 中不起作用

> ID：11443376
> 
> 赞同：3
> 
> 时间：2012-07-12T00:10:07.750
> 
> 标签：colors, cmd, windows-7-x64, ansicon

我已按照此站点[http://softkube.com/blog/ansi-command-line-colors-under-windows/](http://softkube.com/blog/ansi-command-line-colors-under-windows/)上的指示下载 ansicon，以便在命令行中使用彩色文本。我在 64 位系统上运行 Windows 7。我将下载的 zip 文件从我的下载目录中提取到 C:\ansicon。当我 cd 到 ansicon 目录并键入“ansicon -i”时，它会响应

'ansicon' 不是内部或外部命令、可运行程序或批处理文件

这里出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T00:17:45.800

好吧，该页面上的说明有点误导，目录 ansicon 将包含一个用于 x86（32 位）的子目录和一个用于 x64（64 位）的子目录。

在命令窗口（`win`- `r`，cmd）中转到

```
c:\ansicon\x64 
```

并在那里执行

```
ansicon -i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T07:05:00.943

以下步骤应该可以正常工作：

1.  [从https://github.com/adoxa/ansicon/downloads](https://github.com/adoxa/ansicon/downloads)下载并解压最新版本
2.  打开命令提示符并 cd 到您解压缩它的文件夹
3.  现在，cd 进入 x64 并在您的机器上全局安装它（例如，C:\ansicon\x64）
4.  键入`ansicon.exe –i`OR`ansicon -i`并按 Enter
5.  任何打印 ANSI 颜色的程序现在都可以在您的机器上正确显示

# c# - 在实体框架中有时间戳实际上告诉代码更改日期

> ID：11443380
> 
> 赞同：1
> 
> 时间：2012-07-12T00:10:46.377
> 
> 标签：c#, .net, entity-framework

我需要我在 EF 4.3 代码优先环境中的实体知道它们上次更新的时间。是否可以？如果是，那么如何在具有以下属性的实体类中获取最后一次更改的时间：

```
[Timestamp]
public byte[] RowVersion { get; set; } 
```

我需要从同一个实体类中的方法获取更新时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:59:36.450

将一个`DateTime`名为`UpdatedOn`（或其他）的属性添加到您的模型中。

```
public DateTime UpdatedOn { get; set; } 
```

然后在你的代码中，我假设你有一个`Update()`（或类似的）你可以设置它

```
UpdatedOn = DateTime.Now 
```

这样，每次在一行上调用 Update 方法时，UpdateOn 属性都将设置为执行该方法的确切时间。

# jquery-ui - jQuery自动完成：如何显示标签计数？

> ID：11443381
> 
> 赞同：0
> 
> 时间：2012-07-12T00:11:00.243
> 
> 标签：jquery-ui, autocomplete, jquery-ui-autocomplete

With Aotocomplete, I want to display name(count) as auto suggestion, when an item is selected, only the name is printed in the input box.My data format is like this

```
[{"name":"Test","count":"5"},{"name":"Javascript","count":"1"}] 
```

可以显示名称不计数的代码，打印多选项目：

```
jQuery(document).ready(function ($){

    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $("#ctags-input")
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
    .autocomplete({ 

        source: function(req, add){
            var ctags_action = 'ctags_autosuggest';

            $.getJSON(CTags.url+'?callback=?&action='+ctags_action, req, function(data) {   

                var suggestions = [];

                $.each(data, function(i, val){                              
                    suggestions.push(val.name);
                });
                add(suggestions);
            });
        },
        focus: function() { 
            return false;
        },

        select: function( event, ui ) {
            var terms = split( this.value );
            terms.pop();
            terms.push( ui.item.value );
            terms.push( "" );
            this.value = terms.join( ", " );
            return false;
        }
    });

}); 
```

我试过`suggestions.push(val)`了；它不起作用。I also tried `suggestions.push(val.name + "C" + count + ")" );`This can display name(count), but when selected, the (count) also get selected. 如何将显示名称（计数）显示为建议并仅输入名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:38:26.057

查看[自定义数据并显示演示](http://jqueryui.com/demos/autocomplete/#custom-data)。您可以将此示例与您的多值代码结合起来，并将计数与项目的标签一起显示：

```
$("#ctags-input")
    .bind( "keydown", function (event) {
        /* snip */
    })
.autocomplete({ 
    source: function(req, add){
        var ctags_action = 'ctags_autosuggest';

        $.getJSON(CTags.url+'?callback=?&action='+ctags_action, req, function(data) {   
            var suggestions = [];

            $.each (data, function(i, val) {      
                suggestions.push({
                    label: val.name,
                    count: val.count
                });
            });

            add(suggestions);
        });
    },
    /* snip */
}).data("autocomplete")._renderItem = function(ul, item) {
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a>" + item.label + " (" + item.count+ ")</a>")
        .appendTo(ul);
}; 
```

**示例： http:** [//jsfiddle.net/NwRR6/](http://jsfiddle.net/NwRR6/)（不包括远程部分）。

# objective-c - iOS - 访问可修改的原始音乐库数据？

> ID：11443382
> 
> 赞同：0
> 
> 时间：2012-07-12T00:11:28.293
> 
> 标签：objective-c, ios, ios5, audio

我知道现在可以从用户的音乐库中获取一首歌曲并通过更改速度、音高等方式对其进行编辑，但我似乎无法找到有关如何访问歌曲原始数据的有用教程的链接. 有人可以指导我这样做吗，或者是否有这样的图书馆？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:56:28.140

以下是您可以开始使用的一些源代码：

```
- (void) doSomethingWithAssett:(AVURLAsset *)songAsset {

NSError * error = nil;

AVAssetReader * reader = [[AVAssetReader alloc] initWithAsset:songAsset error:&error];

if (error) {
    NSLog(@"%@", [error description]);
}

AVAssetTrack * songTrack = [songAsset.tracks objectAtIndex:0];

NSDictionary* outputSettingsDict = [[NSDictionary alloc] initWithObjectsAndKeys:

                                    [NSNumber numberWithInt:kAudioFormatLinearPCM],AVFormatIDKey,
                                    //     [NSNumber numberWithInt:44100.0],AVSampleRateKey, /*Not Supported*/
                                    //     [NSNumber numberWithInt: 2],AVNumberOfChannelsKey,    /*Not Supported*/

                                    [NSNumber numberWithInt:16],AVLinearPCMBitDepthKey,
                                    [NSNumber numberWithBool:NO],AVLinearPCMIsBigEndianKey,
                                    [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,
                                    [NSNumber numberWithBool:NO],AVLinearPCMIsNonInterleaved,

                                    nil];

AVAssetReaderTrackOutput* output = [[AVAssetReaderTrackOutput alloc] initWithTrack:songTrack outputSettings:outputSettingsDict];

[reader addOutput:output];

UInt32 sampleRate,channelCount;

NSArray* formatDesc = songTrack.formatDescriptions;
for(unsigned int i = 0; i < [formatDesc count]; ++i) {
    CMAudioFormatDescriptionRef item = (__bridge CMAudioFormatDescriptionRef)[formatDesc objectAtIndex:i];
    const AudioStreamBasicDescription* fmtDesc = CMAudioFormatDescriptionGetStreamBasicDescription (item);
    if(fmtDesc ) {

        sampleRate = fmtDesc->mSampleRate;
        channelCount = fmtDesc->mChannelsPerFrame;

        //    NSLog(@"channels:%u, bytes/packet: %u, sampleRate %f",fmtDesc->mChannelsPerFrame, fmtDesc->mBytesPerPacket,fmtDesc->mSampleRate);
    }
}

UInt32 bytesPerSample = 2 * channelCount;
SInt16 normalizeMax = 0;

NSMutableData * fullSongData = [[NSMutableData alloc] init];
[reader startReading];

UInt64 totalBytes = 0; 

SInt64 totalLeft = 0;
SInt64 totalRight = 0;
NSInteger sampleTally = 0;

NSInteger samplesPerPixel = sampleRate / 50;

while (reader.status == AVAssetReaderStatusReading){

    AVAssetReaderTrackOutput * trackOutput = (AVAssetReaderTrackOutput *)[reader.outputs objectAtIndex:0];
    CMSampleBufferRef sampleBufferRef = [trackOutput copyNextSampleBuffer];

    if (sampleBufferRef){
        CMBlockBufferRef blockBufferRef = CMSampleBufferGetDataBuffer(sampleBufferRef);

        size_t length = CMBlockBufferGetDataLength(blockBufferRef);
        totalBytes += length;

        @autoreleasepool {
            NSMutableData * data = [NSMutableData dataWithLength:length];
            CMBlockBufferCopyDataBytes(blockBufferRef, 0, length, data.mutableBytes);

            SInt16 * samples = (SInt16 *) data.mutableBytes; 
```

你有样品，用它们做点什么......

# jquery - 更多行和更多列 jQuery

> ID：11443386
> 
> 赞同：0
> 
> 时间：2012-07-12T00:11:51.550
> 
> 标签：jquery, html

我想要一个“添加行”和“添加列”按钮系统的东西。我的html是：

```
<table border="2" id="the_table">
    <tr>
        <td><input name="value_1[]"/></td>
    </tr>
</table>

<a href="#" rel="add_row">Add Row</a> <a href="#" rel="add_column">Add Column</a> 
```

我的 jQuery：

```
$(document).ready(function(){
    var table_id = "#the_table";

    jQuery.fn.renderTable = function() {
        var rowCount = $(table_id + ' tr').length;
        var colCount = 0;
        $(table_id + ' tr:nth-child(1) td').each(function () {
            if ($(this).attr('colspan')) {
                colCount += +$(this).attr('colspan');
            } else {
                colCount++;
            }
        });

        if($(this[0]).attr("rel") == "add_row") {
            var id = $(table_id + " input:last").attr("name");
            id = id.replace(/value_(\d+)/, function(match, number) {
                return 'value_' + (parseInt(number, 10) + 1);
            });
            var x = 0;
            var result = "<tr>";
            while (x != colCount) {
                result += '<td><input name="' + id + '" /></td>';
                x = x + 1;
            }
            result += "</tr>";
            $(table_id + ' tr:last').after(result);
        }
        if($(this[0]).attr("rel") == "add_column") {

        }
    };

    $('a').click(function(){
        $(this).renderTable();  

        return false;
    });
}); 
```

因此，当我单击添加行时，我希望它添加一行，但增加 php $_POST 的字段名称...并且添加列时，它必须添加一列并向下递增名称。所以我对 2 x 2 表的输出将是：

```
<table border="2" id="the_table">
    <tr>
        <td><input name="value_1[]"/></td>
        <td><input name="value_1[]"/></td>
    </tr>
    <tr>
        <td><input name="value_2[]"/></td>
        <td><input name="value_2[]"/></td>
    </tr>
</table> 
```

有没有办法做到这一点？先感谢您！！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:34:25.933

基本上，您需要`td`为每个现有添加一个新的`tr`：

```
if ($(this[0]).attr("rel") == "add_column") {
 $(table_id + " tr").each(function() {
  var $this  = $(this),
    newInput = $("<input/>", {name:$this.find('td:last input').attr("name")}),
    newTD    = $("<td/>").append(newInput);

  $this.append(newTD);
 });
} 
```

请参阅此工作[小提琴示例](http://jsfiddle.net/zuul/9LRyT/)！

# inno-setup - 在 Inno Setup 中，ewWaitUntilIdle 的准确定义是什么？

> ID：11443387
> 
> 赞同：0
> 
> 时间：2012-07-12T00:11:58.403
> 
> 标签：inno-setup

作为我的安装程序的一部分，我需要调用 DBMS 系统并将其关闭，然后再启动它。如果该 DBMS 由于某种原因挂起，我的安装程序将永远挂起。我调用 Exec 来启动或停止数据库的命令，我的问题是：

ewWaitUntilIdle 的具体定义是什么？如果我启动/停止数据库的命令永远不会返回，什么满足空闲条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:49:08.343

这是来自 Inno 来源的确切代码：

```
procedure HandleProcessWait(ProcessHandle: THandle; const Wait: TExecWait;
  const ProcessMessagesProc: TProcedure; var ResultCode: Integer);
begin
  try
    if Wait = ewWaitUntilIdle then begin
      repeat
        ProcessMessagesProc;
      until WaitForInputIdle(ProcessHandle, 50) <> WAIT_TIMEOUT;
    end;
    if Wait = ewWaitUntilTerminated then begin
      { Wait until the process returns, but still process any messages that
        arrive. }
      repeat
        { Process any pending messages first because MsgWaitForMultipleObjects
          (called below) only returns when *new* messages arrive }
        ProcessMessagesProc;
      until MsgWaitForMultipleObjects(1, ProcessHandle, False, INFINITE, QS_ALLINPUT) <> WAIT_OBJECT_0+1;
      { Process messages once more in case MsgWaitForMultipleObjects saw the
        process terminate and new messages arrive simultaneously. (Can't leave
        unprocessed messages waiting, or a subsequent call to WaitMessage
        won't see them.) }
      ProcessMessagesProc;
    end;
    { Get the exit code. Will be set to STILL_ACTIVE if not yet available }
    if not GetExitCodeProcess(ProcessHandle, DWORD(ResultCode)) then
      ResultCode := -1;  { just in case }
  finally
    CloseHandle(ProcessHandle);
  end;
end; 
```

如您所见，ewWaitUntilIdle 仅使用**WaitForInputIdle**函数-在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)

# flash - 向 MapQuest Flash API Mobile 添加描述

> ID：11443392
> 
> 赞同：0
> 
> 时间：2012-07-12T00:12:47.923
> 
> 标签：flash, apache-flex, mobile, mapquest

基本代码：

```
protected function map_creationCompleteHandler(event:FlexEvent):void
{
  this.geocoder = new Geocoder(this.map.tileMap);
  this.geocoder.addEventListener(GeocoderEvent.GEOCODE_ERROR_EVENT,this.onGeocodeError);
  this.geocoder.addEventListener(GeocoderEvent.REVERSE_GEOCODE_RESPONSE,this.onReverseGeocodeResponse);
  this.geocoder.addEventListener(GeocoderEvent.HTTP_ERROR_EVENT,this.onHttpError);

  cursorManager.setBusyCursor();
  this.map.removeShapes();
  var ll:LatLng = new LatLng(Number('40.053097'), Number('-76.313652'));
  this.geocoder.reverseGeocode(ll);
}

private function onGeocodeError(e:GeocoderEvent):void 
{
  // trace the error..
}

private function onHttpError(e:GeocoderEvent):void 
{
    this.cursorManager.removeBusyCursor();
    this.makeErrorList("HTTP ERROR");
}

private function onReverseGeocodeResponse(event:GeocoderEvent):void 
{
    // Add the descriptive name to the locationg being geocoded.
} 
```

在 onReverseGeocodeResponse 事件中，如何向位置工具提示添加描述性标签，以便当用户关注所指向的位置时，它将显示我添加的标签，包括地图服务定位的完整地址？

还有一种方法可以在位置工具提示上添加一个按钮，以便在单击该按钮时可以执行其他功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:37:53.600

兴趣点是需要修改的属性。

# jquery - 有没有办法让这些 span 元素垂直对齐？

> ID：11443394
> 
> 赞同：0
> 
> 时间：2012-07-12T00:13:18.637
> 
> 标签：jquery, html, jquery-ui

我正在使用带有跨度的 JQuery 可排序控件，现在我无法让元素垂直对齐。通常，使用 Div's，我只需添加填充。在这种情况下，虽然图像居中，但文本太低，需要提高几个像素。

```
 @foreach(var c in companies)
            {
                var company = c.Company;
                <li class="ui-state-default">
                    <span>
                    <img src="..\..\Content\img\udarrow.png"/>
                    </span>
                    <span>
                    @company
                    </span>
                </li>
            } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:15:29.650

在 CSS 中：

```
.ui-state-default span {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:16:07.733

尝试将跨度转换为块元素。

```
.ui-state-default span { display: block; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:18:50.527

我宁愿制作它们，也`inline-block`不愿`block`它们必须彼此对齐。然后只是摆弄边距和填充。

# oauth - XOAuth 与 oauth

> ID：11443401
> 
> 赞同：0
> 
> 时间：2012-07-12T00:14:06.903
> 
> 标签：oauth, oauth-2.0

因此 Gmail 支持 XOauth 协议来授权应用程序使用其数据。我的问题是：

它是否比正常的 OAuth 机制有任何优点，我可以使用其中任何一个来获取访问令牌吗？还是 Gmail 不支持正常的 OAuth 流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:11:33.417

对于 SMTP/IMAP/POP，xoauth 机制允许应用程序使用 oauth 作为这些协议的身份验证机制。您可以（错误，必须 :) 使用标准 oauth 流程让用户授权您的应用程序。

请注意，目前这些协议仅适用于 OAuth 1.0a。还没有对 xoauth 机制的 OAuth 2.0 支持。

# c++ - boost::unordered_map 中的迭代器失效

> ID：11443405
> 
> 赞同：4
> 
> 时间：2012-07-12T00:14:54.723
> 
> 标签：c++, boost, unordered-map

我使用`boost::unordered_map`如下

```
typedef boost::shared_ptr<WriterExeciter> PtrWriter;
typedef std::list<PtrWriter> PtrList; 
boost::unordered_map<std::pair<unsigned int, unsigned long long>, PtrList>  Map
Map instrMap; 
```

现在我正在对`PtrList`循环中的类型列表进行一些更改

```
for(auto it = instrMap.begin(); it != instrMap.end(); ++it)
{
     auto key = it->first();
     auto list& = it->second();    
     //Make some change to an element in list 

      if(list.empty())
      {
            instMap.erase(key); 
      }

} 
```

1.  对列表进行更改是否会使 instrMap 的迭代器失效？

2.  擦除元素将使指向被擦除元素的迭代器无效。如何修改我的代码以便这不会导致任何问题？使用`it++`而不是`++it`帮助？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T00:36:13.573

该`erase()`操作将使迭代器无效。但是，它也会返回一个有效的迭代器到下一个元素。因此，您可以使用以下内容：

```
for(auto it = instrMap.begin(); it != instrMap.end();)
{
     auto key = it->first();
     auto list& = it->second();    
     //Make some change to an element in list 

      if(list.empty())
      {
            it = instMap.erase(it); 
      }
      else {
            ++it;
      }
} 
```

# java - 在 android 模拟器中通过 SMS 发送带有 \n 和 \t 的多行字符串时出错

> ID：11443406
> 
> 赞同：1
> 
> 时间：2012-07-12T00:14:55.360
> 
> 标签：java, android, string, sms, string-formatting

我正在尝试通过短信将多行字符串（我正在使用 \n 和 \t 格式化）从 TextView 发送到第二个模拟器。

**我的问题**是，当我在字符串中有这些格式化运算符时，我在模拟器中收到的短信由希腊字母和其他符号组成（我假设它是字符编码）。

**没有**格式化操作符，只有常规字符，短信没有问题。

这里有什么问题？难道我需要使用“\n”或“\t”以外的东西来格式化字符串吗？或者这只是模拟器的问题？

我用这种方法发送短信。

```
 // SMS Activity
    sendSMS = (Button) findViewById(R.id.bSendSMS);
    sendSMS.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) { 
            sendSMS("5556",mess);
        }

        private void sendSMS(String phoneNumber, String message) {
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, null, null);
        }
    }); 
```

填充文本视图，并将字符串设置为等于文本视图内容。

```
 //Activity
    generate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            inText = "";
        for(int counter=0;counter<=amt.length;counter++){
            if(amt[counter]==0){

            }else{
                String nameMess = name[counter];
                int amountMess = amt[counter];
                inText += "x"+ amountMess + "\t" + nameMess + "\n";
            }
        }
                Summary.setText(""+inText);
                mess = Summary.getText().toString();
        }
    }); 
```

# java - java.net.SocketException：从流中读取时连接重置

> ID：11443413
> 
> 赞同：0
> 
> 时间：2012-07-12T00:15:31.197
> 
> 标签：java, sockets

我开发了一些可以访问 url 并从中读取流的代码，但是当我尝试获取流时，我得到 java.net.SocketException 。这是堆栈跟踪：

```
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:687)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:632)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:652)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1049)
    at utils.AljazemArabicWordsGrabber.grab(AljazemArabicWordsGrabber.java:46)
    at utils.TranslatorThread.run(TranslatorThread.java:39) 
```

这是导致异常的代码：

```
public String[] grab(EnglishWord englishWord) {

    try {
        aljazemURL = new URL(urlLink + englishWord.getLemma());
        connection = aljazemURL.openConnection();

        //connection.connect();
    //    System.out.println("connection:" + connection);
      ////  stream = connection.getInputStream();

    //    reader = new InputStreamReader(stream);
        in = new BufferedReader(new InputStreamReader(connection.getInputStream())); // the exception occurs here..

        while ((decodedString = in.readLine()) != null) {
            if (decodedString.contains("<div class=\"default_to_trans_ar\" style=\"display:block\">")) {
                decodedString = decodedString.replace("<div class=\"default_to_trans_ar\" style=\"display:block\">", "");
                decodedString = decodedString.replace("</div>", "");
                slicedWords = decodedString.split(",");
                for (String slice : slicedWords) {
                    System.out.println(slice);
                }
                //  System.out.println(decodedString);
            }

        }

        in.close();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return slicedWords;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:40:12.627

您确定 GPS 正在发送一条线路（以一条新线路结束）吗？

如果不是，我会重复使用 read() 来获取它发送的所有数据（直到达到 EOF）

# php - 从 kml 获取坐标

> ID：11443414
> 
> 赞同：0
> 
> 时间：2012-07-12T00:15:38.467
> 
> 标签：php, javascript, xml, google-maps-api-3, kml

我有许多 kml 文件，每个文件只有 1 个路径。如何从 kml 获取坐标并将它们转换为一个数组，每组坐标都嵌套在它们自己的数组中？

示例数组：[[lat1, long1],[lat2, long2],[lat3,long3]]

我更喜欢javascript，但我也可以做php。

示例公里：`http://98.214.131.200/Routes/test.kml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:19:14.020

[geoxml3](http://code.google.com/p/geoxml3/)可以用作独立的解析器（尽管在该模式下没有经过特别好的测试）。如果你想要折线，你可能想要 polys 分支而不是树干。

坐标数组与您请求的格式不完全一致，如下所示：

```
placemarks[].LineString[].coordinates[].{lat:Float, lng:Float, alt:Float} 
```

如果您的每个 kml 文件都有一个“路径”，则数组可能是：

```
placemarks[0].LineString[0].coordinates 
```

也可以作为 google.maps.Polyline 对象使用。

这是[geoxml3 显示的](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?http://98.214.131.200/Routes/test.kml)示例 kml ，如果您使用调试器浏览页面，您可以看到坐标数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:57:49.143

使用即在大多数 php 发行版中默认启用标准的 SimpleXMl：

```
 $url = "http://98.214.131.200/Routes/test.kml";
 $contents = file_get_contents($url);
 $xml      = new SimpleXMLElement($contents);
 $value    = (string)$xml->Document->Placemark->LineString->coordinates;
 $values   = explode(" ", trim($value));
 $coords   = array();
 foreach($values as $value) {    
    $args     = explode(",", $value);
    $coords[] = array($args[0], $args[1]);
 }
 echo '<pre>';
 print_r($coords); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T05:36:43.043

```
<?php
$xmlFile = '73---5.kml';
$xmlString = file_get_contents($xmlFile);
$doc = new DomDocument();
$doc->loadXML($xmlString);
$xpath = new DomXpath($doc);
$ward_names=array();
$searchNodes = $doc->getElementsByTagName( "coordinates" );   
foreach( $searchNodes as $searchNode ) 
{ 

   $ward_names [] =  $searchNode->nodeValue; 

}

 $string_version = implode(' ', $ward_names) ;
 $destination_array = explode(' ', $string_version);

echo "<pre>";
 print_r($destination_array);

 ?> 
```

# java - 正则表达式保留引号、单引号、连字符并在空白处分割

> ID：11443416
> 
> 赞同：0
> 
> 时间：2012-07-12T00:16:25.687
> 
> 标签：java, regex

我使用 Java Pattern 类将正则表达式指定为字符串。

例如，我喜欢成为蜘蛛侠：“彼得帕克”

应该将蜘蛛侠和“彼得帕克”列为单独的标记。谢谢

```
try {
     BufferedReader br = new BufferedReader(new FileReader(f));
     StringBuilder sb = new StringBuilder();
     String line = br.readLine();

     while (line != null) {
        sb.append(line);
        line = br.readLine();
     }

    String everything = sb.toString();        
    List<String> result = new ArrayList<String>();
    Pattern pat = Pattern.compile("([\"'].*?[\"']|[^ ]+)");
    PatternTokenizer pt = new PatternTokenizer(new StringReader(everything),pat,0);
    while (pt.incrementToken()) {
     result.add(pt.getAttribute(CharTermAttribute.class).toString());

     }

 }
    catch (Exception e) {
    throw new RuntimeException(e);
   } 
```

所以我猜“某个词”不起作用的原因是因为每个标记本身就是一个字符串。有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:43:31.817

如果它不必是正则表达式并且您在 String 中的数据是正确的（引号的顺序不正确`" ' some data " '`），那么您可以在**一次迭代**中完成它

```
String data="I love being spider-man : \"Peter Parker\" or 'photo reporter'";

List<String> tokens = new ArrayList<String>();
StringBuilder sb=new StringBuilder();
boolean inSingleQuote=false;
boolean indDoubleQuote=false;

for (char c:data.toCharArray()){
    if (c=='\'') inSingleQuote=!inSingleQuote;
    if (c=='"') indDoubleQuote=!indDoubleQuote;
    if (c==' ' && !inSingleQuote && !indDoubleQuote){
        tokens.add(sb.toString());
        sb.delete(0,sb.length());
    }
    else 
        sb.append(c);
}
tokens.add(sb.toString());
System.out.println(tokens); 
```

输出

```
[I, love, being, spider-man, :, "Peter Parker", or, 'photo reporter'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:32:26.500

检查此正则表达式是否是您需要的：

```
"([\"'].*?[\"']|(?<=[ :]|^)[a-zA-Z0-9-]+(?=[ :]|$))" 
```

我假设您在（单/双）引号内没有（单/双）引号。

还有关于分隔符的假设：我只允许空间并`:`作为分隔符工作。什么都不会匹​​配`"foo_bar"`。如果要添加更多分隔符，例如`;`, `.`, `,`, `?`，请将其添加到前瞻和后视断言中的字符类中，如下所示：

```
"([\"'].*?[\"']|(?<=[ :;.,?]|^)[a-zA-Z0-9-]+(?=[ :;.,?]|$))" 
```

尚未对每个输入进行测试，但我已经对此输入进行了测试：

```
"    sdfsdf \" sdfs  sdfsdfs \"   \"sdfsdf\"  sdfsdf   sdfsd  dsfshj sdfsdf-sdf  'sdfsdfsdf  sd f '  "
// I used replaceAll to check the captured group
.replaceAll("([\"'].*?[\"']|(?<=[ :]|^)[a-zA-Z0-9-]+(?=[ :]|$))", "X$1Y") 
```

它对我来说很好。

如果您想要更自由的捕获，但仍然假设引用：

```
"([\"'].*?[\"']|[^ ]+)" 
```

要提取匹配项：

```
Matcher m = Pattern.compile(regex).matcher(inputString);
List<String> tokens = new ArrayList<String>();
while (m.find()) {
    tokens.add(m.group(1));
} 
```

# java - GAE 实例是否限制为 10 个并发请求？

> ID：11443423
> 
> 赞同：9
> 
> 时间：2012-07-12T00:17:09.550
> 
> 标签：java, python, google-app-engine, go

我从多个来源听说 Google App Engine 实例的硬性限制为 10 个并发请求。我想知道是否有人可以澄清这到底是什么意思。

调度程序是否阻止任何超过 10 个的请求，或者这是通过对并发线程的限制来强制执行的？

具体来说，这个限制是否会像影响 Python 和 Java 一样影响 Go 实例？

> 编辑：这是允许 App Engine 实例处理超过 10 个并发请求/线程的功能请求。[允许每个实例的并发请求的可配置限制](http://code.google.com/p/googleappengine/issues/detail?id=7927)。请给它加星。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T00:26:17.317

截至 2012 年 7 月 12 日，是后者。10 个并发限制是通过限制每个运行时的并发线程来实施的。在大多数情况下，我们的调度程序会尝试启动一个新实例。

另请参阅 jonmac 在此线程上的电子邮件： [https ://groups.google.com/d/msg/google-appengine/y-LnZ2WYJ5Q/j_w13F4oSSkJ](https://groups.google.com/d/msg/google-appengine/y-LnZ2WYJ5Q/j_w13F4oSSkJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-21T15:44:52.267

此问题已于 2013 年 11 月 18 日修复。

现在可以通过`max_concurrent_requests`设置配置任何 GAE 实例可以处理的最大请求数，例如：

```
runtime: go
api_version: go1
automatic_scaling:
  max_concurrent_requests: 80

handlers:
  - url: /.*
    script: _go_app 
```

默认值为 8，最大值为 80。

有关详细信息，请参阅[https://cloud.google.com/appengine/docs/python/config/appref#automatic_scaling](https://cloud.google.com/appengine/docs/python/config/appref#automatic_scaling)。

# editor - “预加载附加信息”错误

> ID：11443427
> 
> 赞同：3
> 
> 时间：2012-07-12T00:18:01.610
> 
> 标签：editor, pydev

出于某种原因，每次我启动 aptana studio 时都会弹出警告：

在“预加载附加信息”期间发生内部错误。

知道那是什么吗？

蒂亚！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T14:24:48.740

您的项目文件已损坏。将我的工作区移动到保管箱文件夹并使用两台计算机访问它后，我遇到了同样的问题。

解决方案：

1.  在 Eclipse 中：从 Eclipse 中删除旧项目（不要删除文件！）
2.  在 Finder / Explorer 中：将旧项目文件夹重命名为某个备份名称
3.  在 Eclipse 中：在旧名称下创建一个新项目
4.  在 Finder / Explorer 中：将项目的所有 .py 文件（不是 .PYC！）和辅助文件复制到新的项目文件夹中 (3)
5.  在 Eclipse 中：刷新 (F5) 您的项目
6.  请享用 ;-）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T17:34:42.343

Fedora 17 // 3.6.6-1.fc16.i686 // Eclipse SDK - Juno // 版本：4.2.1

除了其他精彩的帖子之外，我也在两台机器之间使用了一个保管箱，并且我的项目文件被占用了。

1.) 将您的工作区文件夹备份到 workspacebu。重新创建 dir 工作区（空文件夹）。打开eclipse，然后在文件菜单下选择import。

2.) 在 General 选项卡下选择 Existing Projects into Worspace，浏览到您的备份 workspacebu 目录，然后单击确定。从现在填充的“项目：”窗口中，选择要导入的项目。

3.) 最后，选择将项目复制到工作区，然后单击完成。

去应该不错！

最后一点——注意你是如何设置你的布局的。如果你走这条路，你将不得不重新创建你的 Eclipse 透视图布局。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-08T10:17:21.417

尝试在未配置解释器的 Python 编辑器中打开 python 文件时，在 PyDEV 上出现此错误。

在 PyDEV 中添加解释器：

```
Preferences -> PyDEV -> Python Interpreter 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-13T19:21:28.160

我反复遇到这个问题。（zaphorg 的回答每次都会在一两天内纠正我的问题。）我没有保管箱，但我将我的问题跟踪到了 Jungledisk。我怀疑任何文件同步服务都可能导致这种类型的项目文件损坏。

就我而言，Jungledisk 设置为将我的文件夹与云中的网络驱动器合并。不知何故，它破坏了项目文件。

解决方案：我将 Jungledisk 上的同步文件夹配置更改为“使网络驱动器与此文件夹匹配”。（以前是“将此文件夹与网络驱动器合并。”）我最后一次重新应用了zaphorg解决方案，问题从未再次出现。

请注意，我只是将这台计算机同步到网络驱动器作为备份。没有第二台计算机应该更改网络驱动器上的文件并将这些更改推送给我（从而损坏项目文件），但事实仍然是我的项目文件一直被损坏，直到我进行上述更改。

* * *

我为 32 位 Windows 7 和 JungleDisk 版本 3.16 Win32 所做的详细说明

1.  右键单击 Windows 系统托盘中的 JungleDisk 图标。（您可能需要左键单击向上的小箭头：显示隐藏图标）
2.  左键单击配置
3.  在左栏中，通过左键单击“+”号展开您的在线磁盘。（如果您有多个在线磁盘，则需要确定哪些正在同步到包含您的项目文件的文件夹。您可以通过查看下面的第 6 项来找到这一点。）
4.  在左栏中，通过左键单击左侧的“+”号展开您的网络驱动器
5.  在左栏中，左键单击您的同步文件夹设置。
6.  在主要部分中，选择其中包含您的项目文件夹的同步文件夹。
7.  左键单击“文件夹选项”按钮，弹出“同步文件夹配置”窗口。
8.  将“如何同步”部分中的下拉选项更改为“使网络驱动器与此文件夹匹配”

我强烈怀疑我也可以通过使用“编辑通配符...”选项来简单地不同步项目文件来消除我的问题，但我还没有验证这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-28T19:50:30.743

如果你的项目文件被你的操作系统去重，京东搞砸了同步。重解析点（符号链接）数据不再有效，每次 JD“同步”文件夹时都需要删除。他们不知道如何处理去重文件，他们的 CTO 拒绝接受这是他们的问题。

# python - 为什么我的 webapp2 import / Google App Engine "Hello, World" 不起作用？

> ID：11443430
> 
> 赞同：1
> 
> 时间：2012-07-12T00:18:34.853
> 
> 标签：python, google-app-engine, webapp2

虽然我能够让我的“Hello, World”程序在 Google App Engine (GAE) 上运行，但它仅在我创建一个不依赖于 webapp2 导入的版本时才有效。为什么导入不起作用？我需要做什么来修复它？

有效的 helloworld.py 版本：

```
print 'Content-Type: text/plain'
print ''
print 'Hello, World!!' 
```

不工作的 helloworld.py 版本：

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, World!')

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

第二个版本呈现为空白页。

我认为问题在于 webapp2 导入不起作用。当我从命令行从与我的 hello world 程序相同的目录中运行 python 时，我得到以下信息：

```
Brians-MacBook-Air-2:app_engine_hello_world brian$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import webapp2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named webapp2 
```

但是，我在以下目录中看到 webapp2.py：

```
Brians-MacBook-Air-2:webapp2 brian$ pwd
/Users/brian/Repos/app_engine_hello_world/build/webapp2 
```

另外，我正在运行安装在以下位置的 python 2.7：

```
Brians-MacBook-Air-2:app_engine_hello_world brian$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

编辑：添加我的 app.yaml 文件和其他一些可能有用的信息......

```
application: hello-world-cs253
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /.*
  script: helloworld.py 
```

我正在使用 SDK / GAE 启动器的 1.7.0 - 2012-06-26 版本

Chrome、Firefox 和 Safari 中的结果相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T01:39:53.410

您不必安装 webapp2。当您使用项目目录的路径作为参数运行 dev_appserver.py 时，它会处理`webapp2`.

你有一个 app.yaml，它是正确的吗？

对于 Python2.7，您需要指定您使用的是 Python2.7。运行时应该是 python27

```
application: your_app
version: 1
runtime: python27    #important
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: your_app.py 
```

你正在运行什么命令来运行你的程序？

做这个 -

```
you@your-computer:~/GAE_folder$ python dev_appserver.py /path/to/your/project/directory 
```

然后`localhost:8080`在浏览器上打开。

**编辑 -**

我想我知道问题是什么。当我第一次尝试网站上给出的示例时，它也发生在我身上。

最后将这段代码添加到您的`helloworld.py`文件中 -

```
def main():
    app.run()

if __name__=='__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T09:55:21.213

问题出在您的**app.yaml**中：

```
 script: helloworld.py 
```

使用`python27`运行时时，必须将其更改为：

```
 script: helloworld.app 
```

上面建议的解决方案似乎有效，但严格来说这是正确的方法。使用 main 函数是不必要的并且不推荐使用。

# format - 条件 gnuplot tic 格式

> ID：11443431
> 
> 赞同：3
> 
> 时间：2012-07-12T00:18:39.900
> 
> 标签：format, gnuplot

有没有办法使图形的 x/y tic-labels 的格式取决于 tic 的值？我正在设想格式的声明

```
set format y ( ( ( <arg> > 1e-3 ) && ( <arg> < 1e2 ) ) ?  "%2.1f" : "10^{%T}" ) 
```

这样对数比例图将表示为

10^{-4}, 10^{-3}, 0.01, 0.1, 1, 10, 10^{2}

等等，为接近 1 的数字提供更自然的表示。

我知道这可以通过明确声明格式来完成，即

```
set xtics ( "10^{-3}" 1e-3, "0.01" 0.01, "0.1" 0.1, "1" 1, "10" 10, "10^{2)" 1e2 ) 
```

但我想避免如此具体，因为每次图表范围发生变化时，这组标签都会发生变化。我希望这个问题的答案是“不”，但这是希望。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T02:39:56.180

嗯……这取决于你想要制作这个情节的努力程度。这是一个执行您想要的示例的示例。以自动化方式制作的情节有点困难，（您需要调整标题的边距等）但如果您只需要一个漂亮的演示文稿或论文的情节并且有时间花时间让它看起来像您想要的那样，这应该可以正常工作。

```
set termoption enhanced

#for this to work, we need to set ranges explicitly :-(
set xrange [-10:10]
set yrange [1e-4:exp(10)]

#Yippee!!! logscale plots :-)
set logscale y

#We'll make 3 plots.  The first plot is of the data and a piece of the y range tics
# the next two plots have no data, they only add another piece of the range tics.
set multiplot

#for this to work, we have to guarantee that all the plots line up exactly
set lmargin at screen 0.1
set bmargin at screen 0.1
set rmargin at screen 0.9
set tmargin at screen 0.9

set ytics 1e-2,10,90 format "%g"  #center of the range, normal tics.
plot exp(x)+exp(-x)               #looks like a V in logscale.  Neat.
unset xtics                       #already did this once.  don't need to put it on again.
unset border                      #already did this once too...
set ytics 100,10 format "10^{%L}" #Next plot, top end of the tics
plot NaN notitle                  #plots nothing.  Only works if range is set explicitly.
set ytics 1e-5,10,9e-3            #next plot, low end of the tics

#Any additional labels, objects, arrows, the title etc. should go here.  
#Otherwise you'll need to unset them like we did with the xtics and border 
#to prevent them from being plotted twice 
#(objects which are plotted twice sometimes look a little bit darker than they should).

plot NaN notitle
unset multiplot                   #and we're done. 
```

# php - 在文本文件中查找一个字符串，并在 php 中该行的开头添加文本

> ID：11443434
> 
> 赞同：0
> 
> 时间：2012-07-12T00:18:53.920
> 
> 标签：php

我有一个文本文件：

约翰客户
A 迈克尔客户
B 乔客户
A 杰基客户C

如何将“活动”字符串添加到文本的开头并且仅用于“客户A”，因此输出将是

活跃的约翰客户
A 迈克尔客户B
活跃的乔客户
A 杰基客户C

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:39:08.193

这里有一些提示..

1.  使用 fopen 逐行读取将文件存储在数组中（http://www.php.net/manual/en/function.fopen.php）

2.  为该数组运行 foreach 循环并检查字符串末尾是否出现“A”。（有用的函数：strlen、strpos）

3.  如果找到“A”，则在该字符串的开头添加“活动”。($x = '活动'.$x;)

4.  使用 fputs 和 fclose 更新文件。(http://php.net/manual/en/function.fputs.php)

如果您在任何步骤中有任何技术问题，请打开 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:44:14.117

文本文件不是数据库，您不能只转到特定行并更改其中的内容。您可以做的是打开文件，在内存中更改它并用您更改的版本覆盖文件。

像其他评论者一样，我怀疑您会询问数据库解决的并发问题。

假设有一个神奇的函数，比如[http://www.php.net/manual/en/function.file.php](http://www.php.net/manual/en/function.file.php)从文本文件创建一个行数组，我希望你可以通过该数组进行遍历，然后进行基本的字符串搜索和字符串连接，然后使用 fopen 和 fwrite 的组合将行返回到文件的 fopen/fwrite。

更进一步，我基本上会为你编写程序，但你可能会发现使用数据库更容易，即使这是像[http://www.php.net/manual/en/book.sqlite这样的本地数据库.php](http://www.php.net/manual/en/book.sqlite.php)

# css - Chrome 相当于 Firefox Firebug CSS 选择路径

> ID：11443437
> 
> 赞同：11
> 
> 时间：2012-07-12T00:19:16.960
> 
> 标签：css, firefox, google-chrome, path, selector

我已经转向 Chrome，但“Firebug lite”最烦人的功能之一是它不允许您复制对象的 CSS 路径。

要了解我的意思，请在 Firefox 中访问 google.com 并使用 Firebug 检查徽标。右键单击“hplogo”div 并选择“复制 CSS 路径”。你会得到类似的东西：

```
html body#gsr div#main span#body.ctr-p center div#lga div div#hplogo 
```

这是我在 Chrome 上找不到的非常有用的功能，看来您只能复制 Xpath。

有没有办法在 Chrome 中使用这种类型的功能？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-11T10:55:21.193

在 chrome 中，您可以右键单击元素资源管理器视图中的元素，然后选择复制 CSS 路径或复制 Xpath。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T01:03:25.710

在 Chrome 中没有获取此信息的本地方法。您可以使用 jQuery 和书签来做很多技巧，如下所示：http://www.edmondscommerce.co.uk/chrome/tip-copy-css-selector-in-chrome/以及这里：[http](http://www.edmondscommerce.co.uk/chrome/tip-copy-css-selector-in-chrome/) [:// /www.selectorgadget.com/](http://www.selectorgadget.com/)

但是，您可能会发现此扩展更接近您想要的，并且更易于使用：[https](https://chrome.google.com/webstore/detail/lbghbpofdlcecfbpjgmffnkieenjkboi) ://chrome.google.com/webstore/detail/lbghbpofdlcecfbpjgmffnkienjkboi 它将提取 XPath 以及 CSS 路径，并且让您轻松复制文本。

# java - Java中的字符串操作导致“字符串索引超出范围”

> ID：11443439
> 
> 赞同：1
> 
> 时间：2012-07-12T00:19:53.397
> 
> 标签：java, string

嗯，我有一长串需要重写的数据包大小，我不想手动完成，所以我要为它编写一个程序。

```
public static OutcommingPacket aClass198_1993 = new OutcommingPacket(68, 8); 
```

这是其中一行的示例，我需要做的是让程序转到 68，将其存储在数据包字符串中，然后获取数字 8，并将其存储在大小字符串中。

到目前为止，这是我的代码。

```
public class PacketSizeFixer {

public static final String IN = "./out/OldPacketSizes.txt";
public static final String OUT = "./out/PacketSizesFormatted.txt";

public static void main(String[] args) throws IOException {
    BufferedReader reader = new BufferedReader(new FileReader(IN));
    BufferedReader writer = new BufferedReader(new FileReader(OUT));

    String line;
    String packet, size;
    while ((line = reader.readLine()) != null) {
        packet = line.substring(line.indexOf("new OutcommingPacket(", line.indexOf(", ")));
        size = line.substring(line.indexOf(", "), line.indexOf(");"));
    }
}

} 
```

我不确定我这样做是否正确，因为我不断得到一个字符串索引超出范围

请帮忙！

顺便说一句，并非所有数据包都具有相同的名称，有些较长，有些较短，数据包可能是两位数，大小也是如此。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:22:05.280

您可能会收到此错误，因为找不到您要查找的子字符串（返回 -1），然后您在`substring`不检查返回的索引的情况下调用。
尝试：

```
int index1 = line.indexOf("new OutcommingPacket(");
int index2 = line.indexOf(", ");
if (index1 > -1 && index2 > index1)
   packet = line.substring(index1, index2 - index1);
//same for the rest 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T00:25:18.063

我在这里假设很多...

```
while ((line = reader.readLine()) != null) {
    String pair = line.substring(line.lastIndexOf("("), line.lastIndexOf(")"));
    String values[] = pair.split(","); //values[0] == packet, values[1] == size
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T00:32:00.660

从您的示例中，听起来您要提取的信息是：

```
#,# 
```

那么为什么不直接使用正则表达式呢？

```
CharSequence inputStr = "new OutcommingPacket(68, 8)";

String patternStr = "(\\d+),(\\d+)";

// Compile and use regular expression
Pattern pattern = Pattern.compile(patternStr);
Matcher matcher = pattern.matcher(inputStr);
boolean matchFound = matcher.find();

if (matchFound) {
    // Get all groups for this match
    for (int i=0; i<=matcher.groupCount(); i++) {
        String groupStr = matcher.group(i);
    }
} 
```

注意：我还没有测试过这个确切的模式，但它至少应该接近正确......

# c# - 将 aspx 文件加载到 xmldocument

> ID：11443441
> 
> 赞同：1
> 
> 时间：2012-07-12T00:20:13.547
> 
> 标签：c#, asp.net, xml, xmldocument

我希望能够将 aspx 页面加载到 XmlDocument 变量中。我怎么做？这是我尝试过的，它期望的 .xml 文件而不是 .aspx 页面。有什么方法可以将 aspx 页面即时转换为 xml 文档并加载它？谢谢

```
string filePath = @"C:\WebApplication1\webform4.aspx";
XmlDocument document = new XmlDocument();
document.Load(filePath); 
```

我收到以下错误：

**名称不能以 '%' 字符开头，十六进制值 0x25。第 1 行，位置 2。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:29:54.533

您收到该错误的原因：

> 名称不能以 '%' 字符开头，十六进制值 0x25。第 1 行，位置 2。

是因为`.aspx`页面通常不是有效的 XML。ASP.NET`.aspx`页面包含如下指令：

```
<%@ Page Language="C#" [possibly other stuff] %> 
```

`<%@`并且`%>`不是有效的 XML，这就是您无法加载原始 ASPX 页面的原因。

现在，即使您要删除这些指令，也很有可能除非您非常非常严格并且页面上的所有标记都是 XHTML，否则也不会加载。

您可能想尝试使用可通过 NuGet 下载的[HTML Agility Pack加载页面（带有或不带有指令）。](http://html-agility-pack.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:27:54.947

XmlDocument 代表 Xml，所以如果你尝试加载一个 aspx，它会抛出错误，抱怨无效的 xml

但是，如果来自 .aspx 的响应是例如`"<?xml..... ><Employee>dotNetMan</Employee>"`字符串，那么它会起作用

您必须将内容类型设置为`text/xml`

[这是一个很好的例子，如何从 aspx http://www.benhblog.com/2008/07/returning-xml-from-aspx-page.html](http://www.benhblog.com/2008/07/returning-xml-from-aspx-page.html)返回 xml

# php - php、html、javascript ajax 向浏览器喷射代码

> ID：11443447
> 
> 赞同：0
> 
> 时间：2012-07-12T00:21:59.487
> 
> 标签：php, javascript, html, ajax

所以昨天我决定学习php、Javascript和html。我写了一个 php 脚本，当我在终端中使用 php5 运行它时，它会给出正确的输出，但是当我尝试使用 Javascript 将它添加到网页时，它会打印最后 ~1/4 代码的点点滴滴以及表格 I试图打印但没有变量值。即使我从脚本中删除所有 echo 实例，它也会这样做。

这是php：

```
<?php
$foo = $_GET["t"];

$con = mysql_connect('host', 'user', 'pw');
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

$db_selected = mysql_select_db('db', $con);
if (!$db_selected)
{
    die('Can\'t use db: ' . mysql_error());
}

$sql = sprintf("SELECT fun FROM table WHERE op = '%s'", $foo);

$data = mysql_query($sql);
$result = array();
$i = 0;
while($row = mysql_fetch_array($data)){
    $result[$i] = $row[0];
    $i++;
}

$dist = $name = range(min($result), max($result), .5);

for($i=0; $i<count($dist); $i++)
{
$temp = array_fill(0,count($result),0);
    for($j=0; $j<count($result); $j++)
    {
    if ($result[$j] < $dist[$i]) $temp[$j] = 1;
    }
$dist[$i] = array_sum($temp)/count($temp);
}

$temp = array_fill(0,count($dist),0);

for($i=0; $i<count($dist); $i++)
{
if ($dist[$i] < 0.5) $temp[$i] = 1;
}

$best = $name[array_sum($temp)-1];
$less = 0;
$more = 0;

$temp = array_fill(0, count($result), 0);
for($i=0; $i<count($result); $i++)
{
if ($result[$i] < $best) $temp[$i] = 1;
}

$less = array_sum($temp)/count($temp);

$temp = array_fill(0, count($result), 0);
for($i=0; $i<count($result); $i++)
{
if ($result[$i] > $best) $temp[$i] = 1;
}

$more = array_sum($temp)/count($temp);

$equal = 1 - $less - $more;

echo "<table border='1'>
<tr>
<th>Best</th>
<th>Less</th>
<th>Equal</th>
<th>More</th>
</tr>";

echo "<tr>";
echo "<td>  $best  </td>";
echo "<td>  $less </td>";
echo "<td>  $equal  </td>";
echo "<td>  $more  </td>";
echo "</tr>";
echo "</table>";

mysql_close($con);
?> 
```

和我得到的输出。

$best) $temp[$i] = 1; } $more = array_sum($temp)/count($temp); $equal = 1 - $less - $more; 回声“最好的更少平等更多”；回声“”；回声“$最佳”；回声“$less”；回声“$等于”；回声“$更多”；回声“”；回声“”；mysql_close($con); ?>

当我在终端中使用任意输入值运行 php5 时的输出是：

```
<table border='1'>
<tr>
<th>Best</th>
<th>Less</th>
<th>Equal</th>
<th>More</th>
</tr><tr><td>  27  </td><td>  0.48417721518987 </td><td>  0.048523206751055  </td><td>  0.46729957805907  </td></tr></table> 
```

这就是我想要的。

如果有帮助，继承人的 html/javascript。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function hreCalc(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","funCalc.php?t="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="totals" onchange="hreCalc(this.value)">
<option value="">Select a total:</option>
<option value="5.5">5.5</option>
<option value="6">6</option>
<option value="6.5">6.5</option>
<option value="8.5">8.5</option>
</select>
</form>
<br></br>
<div id="txtHint"><b>Total info will be listed here.</b></div>

</body>
</html> 
```

我刚开始学习这些语言，我尝试了我能想到的一切。问题似乎来自 > 标志，但我不知道如何解决它，据我所知，您应该能够在 php 中使用 > 而不会导致 html 出现问题。我使用的是 ubuntu 12.04，所以我可能没有安装我需要的所有东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:44:38.813

你做的一切都是正确的，因为 PHP 命令行工作正常。

这是一个可能的答案：

“大于运算符 (>) 之后的 PHP 代码有被 HTML 编辑器的文本格式化算法破坏的风险。

带有大于号的 PHP 代码可以安全地嵌入到 HTML 中，方法是用一对 HTML 样式的注释分隔符 + 假的 HTML 结束和开始标记，作为 PHP 样式的注释。

例子：

```
<html>
<body>
Safe-<?php
/*><!--*/
    if (4>3) {
        echo "PHP-";
    }
/*--><?*/
?>embedding
</body>
</html>" 
```

所以，简而言之，你降低了代码的可读性，但是通过添加虚假的 html 注释标签，你应该能够欺骗你的解释器做正确的事情。

在这里找到（靠近页面底部）： http: [//php.net/manual/en/language.basic-syntax.phpmode.php](http://php.net/manual/en/language.basic-syntax.phpmode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:21:27.133

您是使用 alert() 来显示整个响应 - 还是直接在浏览器中访问页面 - 您会看到它实际上返回了整个 php 文件；只是您的浏览器将到目前为止的所有内容都解释为一个长 HTML 标记。

这几乎可以肯定是由于您的服务器未设置为使用 application/x-httpd-php mime 类型提供 .php 文件，具体操作说明取决于您的服务器。

**编辑**假设您实际上设置了一个 Web 服务器，而不是直接访问硬盘驱动器上的文件。如果没有，那将是您的问题，您需要安装 Apache 或 IIS。

# sql - 是否可以使用范围方法生成 SQL `OR` 子句？

> ID：11443448
> 
> 赞同：3
> 
> 时间：2012-07-12T00:22:00.950
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, squeel

我正在使用 Ruby on Rails 3.2.2 和 Squeel gem。我想知道是否有一种方法可以使用多个范围方法，以便生成带有`OR`与这些范围方法 SQL 条件相关的子句的 SQL 查询。也就是说，我有：

```
class Article < ActiveRecord::Base
  def self.scope_method_1
    ... # scope_method_1 SQL conditions
  end

  def self.scope_method_2
    ... # scope_method_2 SQL conditions
  end

  def self.scope_method_combination
    # I am looking for something like
    #
    # where{scope_method_1 | scope_method_2} # Note: The '|' means the SQL 'OR' clause in the Squeel context
    #
    # so to generate the following SQL query:
    #
    # SELECT FROM articles WHERE <scope_method_1 SQL conditions> OR <scope_method_2 SQL conditions>
  end
end 
```

是否可以使用范围方法生成 SQL`OR`子句（通过使用或不使用 Squeel gem）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:56:08.497

我们一直在[squeel 问题跟踪器](https://github.com/ernie/squeel/issues/142)上讨论这个问题，基本答案似乎是否定的。至少没有范围；但是，如果您将范围转换为筛子，则可以。

# javascript - 简单的正则表达式问题

> ID：11443449
> 
> 赞同：0
> 
> 时间：2012-07-12T00:22:03.017
> 
> 标签：javascript, regex

我是 Javascript 的初学者，并且正在玩正则表达式。

我试图执行一些匹配操作，但结果相当混乱。

我要做的就是匹配每个网站名称：

> “我去 google.com 搜索，去 facebook.com 分享，去 yahoo.com 发送电子邮件。”

这是我的代码：

```
var text = "I go to google.com to search, to facebook.com to share and to yahoo.com to send an email.";
var pattern = /\w+\.\w+/g;

var matches = pattern.exec(text);

document.write("matches index : " + matches.index + "<br>");
document.write("matches input : " + matches.input + "<br>");
document.write("<br>");
for(i=0 ; i<matches.length ; i++){
    document.write("match number " + i + " : " + matches[i] + "<br>");
} 
```

我的结果：

> 匹配索引：0
> 
> 匹配输入：我去 google.com 搜索，去 facebook.com 分享，去 yahoo.com 发送电子邮件
> 
> 匹配号码 0：google.com

为什么它只匹配*google.com*，而不匹配其他网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:37:53.237

从[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)：

> 如果您的正则表达式使用“ `g`”标志，您可以`exec`多次使用该方法在同一字符串中查找连续匹配项。当您这样做时，搜索从`str`正则表达式的`lastIndex`属性指定的子字符串开始（`test`也将推进该`lastIndex`属性）。

因此，只需执行多次：

```
var match, i = 0;
while(match = pattern.exec(text)) {
    document.write("match number " + (i++) + " : " + match[0] + "<br>");
} 
```

或者，由于您没有捕获组，请使用[`.match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)：

```
var matches = text.match(pattern);
for(i=0 ; i<matches.length ; i++){
    document.write("match number " + i + " : " + matches[i] + "<br>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:08:02.180

我只想提一下，replace 方法有时更适合遍历字符串，即使您实际上并不打算替换任何内容。

以下是它在您的情况下的工作方式：

```
var matches = text.replace(pattern,function($0){alert($0);}); 
```

[现场演示在这里](http://jsfiddle.net/WnfgS/)

# javascript - jquery/javascript如何更快地计算宽度

> ID：11443451
> 
> 赞同：3
> 
> 时间：2012-07-12T00:22:05.037
> 
> 标签：javascript, jquery, performance, width

我有一张有 100 列的表。我正在循环遍历所有 th 元素，以明确设置每个 th 的宽度。

```
var $ths = $("table th");
$ths.each(function (i, th) {
    var $th = $(th);
    var width = $th.width();
    $th.width(width);
}); 
```

对于 100 列，这需要太多时间（超过 60 秒）。每个“获取宽度”调用需要 500-700 毫秒。这是因为它每次都需要生成布局，我得到了宽度。

问题 - 有没有更快的方法来获得宽度？

原因 - 我正在冻结标题。为此，我需要将每个标题的宽度设置为固定像素宽度。一切都是动态的，不能以 px 为单位预先设置每列的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:08:37.633

您可能会考虑为此编写普通的 javascript。可能会节省几毫秒的时间。

```
var cells = myTable.rows[0].children;

for ( var i = 0; i < cells.length; i++ ){
   cells[i].style.width = cells[i].offsetWidth + "px";
} 
```

因为您使用的是 offsetWidth，所以[您将无法摆脱 reflow](https://stackoverflow.com/questions/510213/when-does-reflow-happen-in-a-dom-environment)。但是，根据 TH 中的字符数估计单元格宽度（假设文本不换行并且您使用的是固定的、单一字体的字体）并[创造性地应用 CSS 可以大大减少回流延迟](http://jonraasch.com/blog/javascript-style-node)。

```
// Appends CSS Classes to stylesheet in doc head
function appendStyle(styles) {
  var css = document.createElement('style');
  css.type = 'text/css';

  // Browser compatibility check
  if (css.styleSheet) css.styleSheet.cssText = styles;
  else css.appendChild(document.createTextNode(styles));

  document.getElementsByTagName("head")[0].appendChild(css);
}

var cells       = myTable.rows[0].children;
var cellWidth   = 0;
var letterWidth = 5; // let's assume each letter is 5px wide
var classname   = '';
var styles      = '';

for ( var i = 0; i < cells.length; i++ ){
   classname         = "Cell" + i;
   cell[i].className = classname;
   cellWidth         = (letterWidth * cells[i].innerHTML.length);
   styles           += "." + classname + "{width:" + cellWidth + "px}";
} 

window.onload = function() { appendStyle(styles) }; 
```

[您可以通过使用文档片段（ John Resig 关于性能优势的精彩](http://ejohn.org/blog/dom-documentfragments/)文章）来更进一步，方法是在运行时在 DOM 之外渲染整个内容并在 DOM 加载后交换片段……但说真的，在这一点上你真的要问问自己果汁是否值得挤压。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:28:11.387

您可以在设置宽度的地方分别为每列添加一个 onload 回调。这样，它不会在加载时发生循环，而不是循环。只是一个想法，但它可以工作。

# python - python计算二进制图像中的个数

> ID：11443460
> 
> 赞同：0
> 
> 时间：2012-07-12T00:23:24.970
> 
> 标签：python, scipy

什么是 python 模块来计算二进制图像中的个数？

改写，

我有一个只有 1 和 0 的矩阵，它是 numpy 数组类型，我想知道有多少。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T00:28:01.420

您可以简单地使用`sum`：

```
>>> import numpy
>>> n = numpy.random.randint(0, 2, size=(3,3))
>>> n
array([[1, 0, 1],
       [0, 1, 1],
       [1, 1, 1]])
>>> n.sum()
7 
```

由于对于 False/True，bool 的整数值为 0/1，即使数组中的元素不是 0 或 1，您也可以使用此技巧的变体：

```
>>> n = numpy.random.randint(0, 3, size=(3,3))
>>> n
array([[2, 2, 0],
       [0, 2, 0],
       [1, 1, 0]])
>>> n == 1
array([[False, False, False],
       [False, False, False],
       [ True,  True, False]], dtype=bool)
>>> (n == 1).sum()
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:02:59.643

np.count_nonzero() 也适用于二进制矩阵。

```
In [1]: n = np.random.randint(0, 2, size=(3,3))

In [2]: n
Out[2]: 
array([[0, 1, 1],
       [0, 0, 0],
       [0, 1, 1]])

In [3]: np.count_nonzero(n)
Out[3]: 4 
```

如果 0 表示 False，这将很有用；否则为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:29:53.650

由于您只有 1 和 0，您可以将它们全部加在一起：

```
import numpy as np
import operator as op

count_of_ones = reduce(op.add, np.ravel(your_array)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:12:42.040

对于一种更有效的方法（与 sum() 方法相比），您最好使用索引。举个例子：

```
import datetime
a = datetime.datetime.now()        
sum(spindle_gold)
b = datetime.datetime.now()
len(spindle_gold[(spindle_gold).astype(bool) ] )
c = datetime.datetime.now() 
```

给

```
0:00:02.155000 0:00:00.025000 3870970 
```

因此，这种方法快了大约 100 倍。如果您使用非常大的阵列并且需要良好的性能，这是一个很好的方法。

# python - Couchdb 服务器错误 (500 system_limit)

> ID：11443462
> 
> 赞同：-1
> 
> 时间：2012-07-12T00:23:28.720
> 
> 标签：python, couchdb, ubuntu-12.04

我的程序是用python编写的。我使用 couchdb-python 进行数据存储。但是当程序存储数据时，会报错：

```
File "/home/koc/dnsReputation/dnsDatabase.py", line 45, in checkHashValue
  if len(result) == 0:
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/client.py", line 987, in __len__
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/client.py", line 1003, in rows
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/client.py", line 990, in _fetch
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/client.py", line 914, in _exec
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 399, in post_json
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 381, in post
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 419, in _request
File "/usr/local/lib/python2.6/dist-packages/CouchDB-0.8-py2.6.egg/couchdb/http.py", line 310, in request
couchdb.http.ServerError: (500, ('error', 'system_limit')) 
```

我不明白为什么。任何答案都是适用的。谢谢

13.07 编辑：

在 couch.log 中，这些行是这样写的：

```
{error_report,<0.32.0>,
                    {<0.125.0>,crash_report,
                     [[{initial_call,
                           {mochiweb_socket_server,init,['Argument__1']}},
                       {pid,<0.125.0>},
                       {registered_name,[]},
                       {error_info,
                           {exit,eaddrinuse,
                               [{gen_server,init_it,6},
                                {proc_lib,init_p_do_apply,3}]}},
                       {ancestors,
                           [couch_secondary_services,couch_server_sup,
                            <0.33.0>]},
                       {messages,[]},
                       {links,[<0.95.0>]},
                       {dictionary,[]},
                       {trap_exit,true},
                       {status,running},
                       {heap_size,987},
                       {stack_size,24},
                       {reductions,460}],
                      []]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:26:20.813

检查您的 couchdb 日志以获取更多信息 - 听起来您已经达到了此[错误报告](https://bugs.launchpad.net/ubuntu/+source/couchdb/+bug/459241)中记录的内部 Erlang 限制。

> Erlang 有 1024 个端口的默认限制，其中每个 FD、tcp 连接和链接的驱动程序使用一个端口。你似乎已经超过了这个。您可以使用 ERL_MAX_PORTS 环境变量在运行时更改它。

**附加日志信息后更新：**来自`eaddrinuse`您的日志使您看起来有一些端口冲突或缺少查看服务器在您配置的端口上运行的权限。检查您的 couchdb 端口配置并检查系统上的其他任何东西是否已经在这些端口上运行。

# sql - 添加 cfqueryparam 标记时遇到问题

> ID：11443463
> 
> 赞同：1
> 
> 时间：2012-07-12T00:23:47.223
> 
> 标签：sql, coldfusion, sql-injection, cfqueryparam

我正在尝试保护此代码，但每次添加 cfqueryparam 标记时，我都会收到有关参数绑定的错误。我确定我将`cfsqltype`属性设置为正确的值。最后一个 select 语句是所有地狱都崩溃的地方。

```
<CFQUERY name="getLatestSurveyID" datasource="#REQUEST.dsn#">
    SELECT TOP 1
        SurveyID
    FROM
        TUser_WelcomeHome
    ORDER BY
        SurveyID DESC
</CFQUERY>

    <!--- Throw the Reasons/Subreasons into the DB --->
    <!---adding cfqueryparam tags breaks following CFIF block--->
<CFIF ListLen(SESSION.WHSurveyStruct.reasonString, ";") gt 0>
    <CFQUERY name="insertReasons" datasource="#REQUEST.dsn#">
        INSERT INTO TWelcomeHome_Reason
        (ReasonID, SubReasonID, SurveyID)
        SELECT #sanitize(ListFirst(SESSION.WHSurveyStruct.reasonString, ";"))#, #sanitize(getLatestSurveyID.SurveyID)# <!---error occures if adding cfqueryparam tags on this line--->
        <CFLOOP list="#sanitize(ListRest(SESSION.WHSurveyStruct.reasonString, ';'))#" index="thisReason" delimiters=";">
            UNION ALL
            SELECT #sanitize(thisReason)#, #sanitize(getLatestSurveyID.SurveyID)#
        </CFLOOP>

    </CFQUERY> 
```

上面的代码有效，但如果我做了以下更改，它将不起作用：
`<cfqueryparam value=#sanitize(getLatestSurveyID.SurveyID)# cfsqltype="cf_sql_integer">`

这是参数化导致的错误
`<cfqueryparam value=#sanitize(getLatestSurveyID.SurveyID)# cfsqltype="cf_sql_integer">`

> 执行数据库查询时出错。[Macromedia][SQLServer JDBC 驱动程序][SQLServer]INSERT 语句与 FOREIGN KEY 约束“FK_WelcomeHome_TSupplier”冲突。冲突发生在数据库“d21wca1”、表“dbo.TSupplier”、列“SupplierID”中。错误发生在 D:/Resource/www/dev/ww1test.owktravel.com/welcome_survey/welcome_survey_router.cfm: line 215 Called from D:/Resource/www/dev/ww1test.owktravel.com/welcome_survey/welcome_survey_router.cfm:第 183 行从 D:/Resource/www/dev/ww1test.owktravel.com/welcome_survey/welcome_survey_router.cfm 调用：第 174 行从 D:/Resource/www/dev/ww1test.owktravel.com/welcome_survey/welcome_survey_router.cfm 调用：第 1 行从 D:/Resource/www/dev/ww1test.owktravel.com/welcome_survey/welcome_survey_router.cfm 调用：

编辑：我仍然无法理解循环在做什么。`SELECT`语句不是丢失了`FROM`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:38:46.537

<cfqueryparam> 不能以您使用它的方式在 SELECT 子句中使用。

它只能用于 WHERE 子句或“正常”INSERT 或 UPDATE 的一部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:15:43.877

[我在这里](https://stackoverflow.com/a/11175904/894061)`<cfqueryparam>`所做的关于如何/何时/为什么/等使用的解释可能会有所帮助。为了便于参考，我将在这里复制它。

> 要记住的事情 [...] 是 SQL 语句有两个部分：SQL“命令”和 SQL 命令使用的数据。只有数据可以参数化。如果您考虑一下，那是有道理的：SQL 命令本身不是“参数”。
> 
> 可以在此处的 CF 上下文中进行类比。考虑这个陈述：

```
<cfset variables.foo = "bar"> 
```

> 可以使用传入的值“参数化”它：

```
<cfset variables.foo = URL.foo> 
```

> （其中 URL.foo 在此示例中是一个参数）
> 
> 但人们不能指望这样做：

```
<#URL.tag# variables.foo = "bar"> 
```

> （这是一个非常人为的例子，但它证明了这一点）。
> 
> 我认为就 a 中的 SQL`<cfquery>`而言，水域有些混乱，因为整个事情只是 CF 中的一个字符串，字符串的任何部分都可以用变量（列名、布尔运算符、整个子句， ETC）。因此，通过扩展，人们可能会认为任何变量都可以替换为`<cfqueryparam>`. 正如我们现在所知，情况并非如此，因为就 CF 而言，它只是一个字符串，但它被视为 DB 的*代码*，因此需要符合 DB 的编码语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:15:11.287

我不确定您为什么要使用该语法进行 SQL 查询。您可以使用以下方法插入多行数据：

```
INSERT INTO myTable(column1, column2, column3)
VALUES('a','b','c'), ('d','e','f'); 
```

因为您绝对可以在 VALUES 子句中使用 cfqueryparams。T认为这应该可以解决您的问题。只需在循环中构建 VALUES 子句，而不是所有那些 SELECT/UNIONS。这对你的情况有用吗？

# java - 为什么我的对象没有显示？

> ID：11443469
> 
> 赞同：0
> 
> 时间：2012-07-12T00:24:13.993
> 
> 标签：java, 3d, java-3d

这是我使用 Art of Illusion 制作的 3D 模型：

![在此处输入图像描述](../Images/361130f5932efe43c1fd418351c7857d.png)

我按照本教程为所有感兴趣的人制作了沙漏：

*   [http://www.artofillusion.org/docs/hourglasstut/index](http://www.artofillusion.org/docs/hourglasstut/index)

我将它导出到一个名为 hourglass.obj 的文件中。现在，这是我用来尝试显示对象的代码：

```
public class LoadAnObject extends Applet
{
    public LoadAnObject()
    {
        setLayout(new BorderLayout());
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas = new Canvas3D(config);
        add("Center", canvas);

        BranchGroup content = getScene();
        content.compile();

        SimpleUniverse universe = new SimpleUniverse(canvas);
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(content);
    }

    public BranchGroup getScene()
    {
        BranchGroup group = new BranchGroup();

        ObjectFile object = new ObjectFile();
        Scene scene = null;

        try
        {
            scene = object.load("/Users/John/ArtOfIllusion/Hourglass.obj");
        }catch(Exception e){e.printStackTrace();}

        group.addChild(scene.getSceneGroup());
        return group;
    }

    public static void main(String args[])
    {
        Frame frame = new MainFrame(new LoadAnObject(), 256, 256);
    }
} 
```

当我编译或运行它时没有任何错误，加载时我只是得到一个空白的宇宙。我从这里得到了这段代码：

*   [http://java.sun.com/developer/onlineTraining/java3d/j3d_tutorial_ch3.pdf](http://java.sun.com/developer/onlineTraining/java3d/j3d_tutorial_ch3.pdf) （见第 3 页）

为什么我的对象没有显示在宇宙中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:00:08.843

该对象正在显示，但由于没有光源而无法看到，这是我必须添加的代码以使沙漏可见：

```
public BranchGroup getScene()
{
    BranchGroup group = new BranchGroup();

    ObjectFile object = new ObjectFile();
    Scene scene = null;

    try
    {
        scene = object.load("/Users/John/ArtOfIllusion/Hourglass.obj");
    }catch(Exception e){e.printStackTrace();}

    group.addChild(scene.getSceneGroup());

    Color3f light1Color = new Color3f(1.0f, 1.0f, 1.0f);
    BoundingSphere bounds = new BoundingSphere(new Point3d(0.0,0.0,0.0), 100.0);
    Vector3f light1Direction = new Vector3f(.3f, 0, 0);
    DirectionalLight light1 = new DirectionalLight(light1Color, light1Direction);
    light1.setInfluencingBounds(bounds);
    group.addChild(light1);

    return group;
} 
```

# apache-flex - 如何将动态图像资源加载到 adobe air 中

> ID：11443470
> 
> 赞同：0
> 
> 时间：2012-07-12T00:24:30.333
> 
> 标签：apache-flex, air, flash-builder, swc

我正在开发的应用程序一次显示四个随机图像。这四张图片来自一组五十张图片。如果这是一个标准的 Flex 项目，我只需设置 img.source 属性：

```
this.img1.source ="../assets/img/"+randomname+".png";` 
```

但这不起作用，我得到了一个损坏的图像。另一种解决方法是使用 urlLoader 加载图像，它也不会加载图像（毫不奇怪，因为它是本地资产）

```
loader = new Loader();
var urlReq:URLRequest = new URLRequest("../assets/img/"+randomname+".png");
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaded);
loader.load(urlReq) 
```

所以这也不起作用，我正在考虑将所有图像加载到 swc 中，然后将 swc 链接到项目。这显然不是很好，因为所有资产都在运行时加载到内存中。还有另一种方法吗？

我希望我错过了一些非常简单的东西。

如果 .swc 解决方案是最好的解决方案，有人能指出我正确的方向吗？我忘记了整个业务是如何运作的，因为我使用 Flex/Flash 已经有几年了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:13:01.080

您应该将资产目录添加为“源”目录。

然后您应该知道资产目录的内容将被复制到应用程序的根目录。因此，当您拥有图像“assets/interface/bg.png”时，您应该使用 new URLRequest("interface/bg.png") 加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:20:49.223

你可以试试：

```
var urlReq:URLRequest = new URLRequest("assets/img/"+randomname+".png"); 
```

# objective-c - 数组复制崩溃应用程序

> ID：11443472
> 
> 赞同：0
> 
> 时间：2012-07-12T00:25:04.023
> 
> 标签：objective-c, ios, xcode

```
NSArray *mruSearchItems;
NSMutableArray *mruItems;

self.mruItems = [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] arrayForKey:@"searches"]];

. 
.
 At this point mruItems becomes empty.
.
.
self.mruSearchItems = [[NSArray alloc] initWithArray:self.mruItems]; 
```

最后一行导致崩溃。

```
EXC_BAD_ACCESS 
```

这是为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:38:58.690

为了能够使用点符号语法 ( `self.mruSearchItems`)，您需要创建`mruSearchItems`一个属性。

就像在 .m 文件的 @implementation 行下一样：

```
@property (nonatomic, strong) NSArray *mruSearchItems; 
```

如果您已经有一个属性（并且只是没有在此处显示），请确保它是`strong`（不是`weak`），否则您的数组将被释放。

# graph - 有向邻接表

> ID：11443479
> 
> 赞同：1
> 
> 时间：2012-07-12T00:26:03.103
> 
> 标签：graph, adjacency-list, directed-graph, adjacency-matrix

我以多种方式问过这个问题，首先是：

> 当您有邻接列表时，顺序是否重要？假设我有邻接列表 {1, 2, 5} 是否等同于 {2, 1, 5}？或者顺序是否意味着什么，因此这两个列表不等价？

我收到了几个答案，包括仅在图形是定向的并且顺序表示与顺时针相邻节点排列有关的情况下才重要..？我也被认为没有关系，但是他更希望根据权重（如果使用）对其进行排序，例如互联网的排序方式 - 页面排名算法。尽管我认为我传达了要点，但我不认为要准确地解释这些回答中的任何一个。任何想法表示赞赏。

此外，我已经改进了我的问题，如果得到回答，我认为会给我我所追求的确切答案：

> 假设我有一个有向图的邻接矩阵：
> 
> 0 0 1 0
> 
> 0 0 1 1
> 
> 1 1 0 1
> 
> 0 1 1 0
> 
> 我被告知等效的邻接列表如下，并假设我的老师故意以这种方式列出它，而不是一些任意的重新排序 - 特别是如最后一个列表所示：
> 
> { 2 }
> 
> { 2, 3 }
> 
> { 0, 1, 3 }
> 
> { 2, 1 }
> 
> 最后一个列表是 { 2, 1 }！等效邻接矩阵中的什么提醒我它应该是 { 2, 1 } 而不是 { 1, 2 }？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:56:46.657

**通常，不，邻接列表中的顺序无关紧要。**

...除非明确说明。

由于各种原因，实现可能使列表实际排序：由于图形的创建方式，或者因为您希望以某种顺序处理顶点的邻居。但从概念上讲，顺序并不重要。

我相信在您的*情况*下，答案`{2,1}`是否，与`{1,2}`. 也许你的老师一开始写错了（比如`{2,3}`），改正后没有改变顺序。或者他/她想让你去思考订单是否重要。不确定，除非你问老师。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T05:29:33.053

邻接表中节点的值是一个集合。集合是无序的。因此 {1,2} 与 {2,1} 相同。

# c++ - c++，检查文件是否存在的最快方法？

> ID：11443480
> 
> 赞同：3
> 
> 时间：2012-07-12T00:26:11.757
> 
> 标签：c++, performance

有多种方法可以检查文件是否存在。

我知道的选项是：

1.  `boost::filesystem exists()`
2.  `access()`
3.  `stat()`
4.  `ifstream is_open()`

有谁知道其中哪一个提供了最高的性能？

编辑：假设在访问时间不是一个因素的 /dev/shm 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T00:36:22.300

这里的运行时将由切换到内核模式和文件系统驱动程序的操作主导——甚至忽略磁盘时间。它们中的任何一个都不太可能提供卓越的性能。最好选择提供最佳界面的那个 - `boost::filesystem`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-06T06:52:25.990

**现代 C++ | 更新**

C++17 提供了这个标准函数：

```
#include <filesystem>

int main()
{
    std::filesystem::path FullPath("C:\\Test.txt");

    bool bExists = std::filesystem::exists(FullPath);
} 
```

# ruby-on-rails - 在属性具有特定值后锁定属性

> ID：11443484
> 
> 赞同：1
> 
> 时间：2012-07-12T00:26:28.487
> 
> 标签：ruby-on-rails

我有一个模型，如果它被赋予某种状态，则该状态将永远无法再次更改。我试图通过在模型上放置一个 before_save 来检查状态是什么，如果它被设置为特定状态，则引发异常。

问题是这个——

```
 def raise_if_exported
   if self.exported?
     raise Exception, "Can't change an exported invoice's status"
   end
 end 
```

这工作正常，但是当我最初通过执行以下操作将状态设置为导出时 -

```
 invoice.status = "Exported"
 invoice.save 
```

引发异常是因为状态已经设置为模型而不是数据库上的导出（我认为）

那么，一旦将其设置为“导出”，有没有办法防止该属性被更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:38:22.630

您可以根据您的要求使用验证器

```
class Invoice < ActiveRecord::Base

  validates_each :status do |record, attr, value|
     if ( attr == :status and status_changed? and status_was == "Exported")
       record.errors.add(:status, "you can't touch this")
     end
  end

end 
```

现在

```
invoice.status= "Exported"
invoice.save # success

invoice.status= "New"
invoice.save # error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:34:31.640

您还可以使用`ActiveModel::Dirty`来跟踪更改，而不是检查当前状态：

```
def raise_if_exported
  if status_changed? && status_was == "Exported"
    raise "Can't change an exported invoice's status"
  end
end 
```

仅*当*您真的希望在保存时引发该异常时，请尝试此操作。如果没有，请在验证期间检查它，如@Trip 建议的那样

有关更多详细信息，请参阅[此页面](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:59:19.257

我会混合使用@Trip 和@Sikachu 的答案：

```
validate :check_if_exported

def check_if_exported
  if status_changed? && status_was.eql?("Exported")
    errors.add(:status, " cannot be changed once exported.")
  end
end 
```

使模型无效是比仅仅抛出错误更好的响应，除非你真的*想*要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T00:32:09.810

在你的模型中尝试 Rails 内置验证：

```
validate :check_if_exported

def check_if_exported
  if self.exported?
    errors.add(:exported_failure, "This has been exported already.")
  end
end 
```

# mercurial - Mercurial & Web Development：如何处理发布/部署？

> ID：11443485
> 
> 赞同：2
> 
> 时间：2012-07-12T00:26:41.343
> 
> 标签：mercurial, workflow

在工作中，我们正在从无 SCM 转向 Mercurial。这有点学习曲线，但在搞砸了两天之后，我肯定觉得它更舒服了。

我仍然有一个未解决的大问题：一旦代码完成，我们如何处理实际部署？

我们是否应该在生产（实时）服务器上运行 Mercurial 的副本？或者我们应该设置 rsync 或其他东西来从 repo 同步到 web 目录？这里的最佳做法是什么？

如果我们只是将 apache 指向 repo，我认为这没问题，只要我们小心不要指向`hg update`不同的、不稳定的分支？不过，这对我来说似乎还是有点危险。有没有办法强制它只切换到某些版本？

还是将 apache 指向 repo 只是一个糟糕的主意，而我应该做其他事情？

在一个相关主题上，我还听到一些关于将任何升级脚本（例如 MySQL 的架构更改）置于版本控制之下的讨论，以便在部署版本时可以运行它们。但这将如何作为工作流程的一部分工作呢？我不想保留它和其他所有东西，因为它是一个临时的一次性使用脚本......

感谢你们提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:24:37.930

我最近发现了这个`hg archive`命令，所以我想我们会用这个来代替。我编写了一个 bash 脚本，该脚本更改为“生产”分支的头部，然后将其存档到预定的目的地。似乎工作。

我仍然很感激你们对这是否是一个好主意的任何反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:06:39.020

我认为将 apache 指向 repo 绝对是一个坏主意，如果您只想拍摄开发文件的快照，hg 存档就可以了。

我发现我的开发源文件和部署的应用程序（即使对于不需要编译的 Web 应用程序）通常非常不同，后者是从前者的子集派生的。

我倾向于使用 shell 脚本甚至 Makefile 在开发目录的子目录中“构建”已部署的应用程序，这可能只是创建目录树并复制必要的文件或可能包括压缩脚本等。

这样，您必须有意识地决定是否在部署的版本中包含文件，从而有助于防止将开发实用程序文件意外地留在可能导致安全风险的在线应用程序中。

变化无常的唯一部分是，对于一个主要版本，我创建了一个新的命名分支（例如：1.5），在默认分支上继续开发。如果需要，可以将后续的错误修复或补丁移植到发布分支，如果发布了错误修复发布，我会用新版本（例如：1.5.1）标记发布分支。

# ms-access - 循环访问表

> ID：11443488
> 
> 赞同：1
> 
> 时间：2012-07-12T00:27:01.873
> 
> 标签：ms-access, vba, loops

我在 Access 中创建了一个数据库，该数据库将有许多相同的相似表，并且它们的名称都将按顺序命名，例如 table_0、table_1 ...

我想知道是否有一种方法可以在 VBA 中创建一个循环来首先制作表格，然后它们会改变它们，例如更容易添加一个字段。

因此，如果我要制作表格，这将是过程，但在 VBA 中

```
while(i=0, i<20,i++){
CREATE TABLE  table_i(
field_1 int PRIMARY KEY,
field_2 CHAR(255));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:58:19.790

在 VBA 中，您可以像这样遍历编号的表名...

```
Dim strTable As String
Dim i As Long
For i = 0 To 20
    strTable = "table_" & CStr(i)
    Debug.Print strTable
Next i 
```

但是你想对每个表名做一些事情而不是打印它。所以说你已经完成了你的`CREATE TABLE`陈述。也许它看起来像这样......

```
CREATE TABLE table_name (
field_1 INTEGER PRIMARY KEY,
field_2 TEXT(255)); 
```

因此，您可以将该 DDL 语句加载到一个字符串变量中，然后每次通过您的`For`循环替换`table_name`为 的当前值`strTable`，然后执行该 DDL 语句。

```
Dim strTable As String
Dim i As Long
Dim strSql As String
strSql = "CREATE TABLE table_name (" & vbCrLf & _
    "field_1 INTEGER PRIMARY KEY," & vbCrLf & _
    "field_2 TEXT(255));"
For i = 0 To 20
    strTable = "table_" & CStr(i)
    CurrentProject.Connection.Execute Replace(strSql, _
        "table_name", strTable)
Next i 
```

该`Replace()`功能首先在 Access 2000 中可用。如果您使用的是较旧的 Access 版本，您将需要不同的方法来处理您的 SQL 字符串。

如果你想执行一个`ALTER TABLE`语句，你可以这样做。

所以我认为用 VBA 可以很容易地做你想做的事。但是我不确定你是否*应该*这样做。具有相同结构的多个表通常是表示设计错误的危险信号。没有证据表明您的情况是设计错误。OTOH，没有证据表明这*不是*设计错误。;-)

# firefox - 用于保存密码的 Firefox 3.5+ sqlite 数据库

> ID：11443490
> 
> 赞同：1
> 
> 时间：2012-07-12T00:27:15.670
> 
> 标签：firefox, encryption, sqlite

我的目标是实际将数千个主机名/登录名/密码导入 sqlite 数据库 "signons.sqlite" 。我认为我需要的表是 "moz_logins" 。

对我来说，这个文件位于 ~/.mozilla/RANDOM_STRING.default/signons.sqlite

我试图弄清楚两件事：

1) encryptedUsername 和 encryptedPassword 使用的加密方法是什么？

2) 什么是 guid 列/它的值是如何创建的？

如果答案类似于“您需要阅读源代码”，那很好，这个任务可能比我想象的要大。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:10:32.987

你看过[http://kb.mozillazine.org/Password_Manager](http://kb.mozillazine.org/Password_Manager)吗？里面有很多文章链接。如果需要，密钥应位于主密码后面的 key3.db 中。您需要一种处理密码的方法。

看看[这篇关于加密的帖子](http://www.rohitab.com/discuss/topic/37427-decrypt-firefox-passwords/page__p__10081796#entry10081796)。

Guid 是某种唯一 ID，以某种方式生成:)

有一些可用的备份/解密等程序。而不是 FF 的 rtfs，你可以看看那些。

# android - 有没有办法让广播组水平布局？

> ID：11443492
> 
> 赞同：39
> 
> 时间：2012-07-12T00:27:22.393
> 
> 标签：android

我在一个单选组中有 2 个单选按钮。现在它们是垂直排列的。我试着把它们放在一个水平的容器里，但没有用。

有没有办法让一组单选按钮水平排列？

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<RadioGroup
    android:id="@+id/radioSex"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioChats"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Chats" 
        android:checked="true" />

    <RadioButton
        android:id="@+id/radioPlayers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Players" 
        android:checked="true" />

    </RadioGroup>

<Button android:text="Home" 
    android:id="@+id/buthome"
     android:paddingTop="-15dip"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" />

    <Button android:text="Players" 
       android:id="@+id/butplayers"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" />

  <TextView 
        android:id="@+id/viewActivePlayer" 
      android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
      android:text="TedP" 
      android:layout_gravity="right" 
         android:textColor="#fffff109"
    android:textSize="26dip" /> 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-12T00:31:38.887

添加`android:orientation="horizontal"`到`RadioGroup`标签：

```
<RadioGroup
   android:id="@+id/radioSex"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content" 
   android:orientation='horizontal'> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-01T20:35:50.497

您也可以通过编程方式进行设置：

```
myRadioGroup.setOrientation(LinearLayout.HORIZONTAL); 
```

# scala - Scala 的 MapLike、ListLike、SeqLike 等与 Map、List、Seq 相比如何？

> ID：11443493
> 
> 赞同：21
> 
> 时间：2012-07-12T00:27:32.260
> 
> 标签：scala, collections, traits

有人可以帮我理解 Scala 在集合 API 中的各种“Like”特征。我一直在阅读并试图在没有运气的情况下比较每一个。例如，我想我可以看到 Map 扩展了 MapLike - 添加了 2 个具体方法。但这引出了一个问题，为什么要这样做？为什么不在 Collections API 中只使用 1 个 Map 特征而不是 Map 和 MapLike？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T02:46:31.880

这些细节的最佳来源是[Martin Odersky 和 ​​Lex Spoon 的“Scala 2.8 的新特性：Scala 集合的架构”](http://www.artima.com/scalazine/articles/scala_collections_architecture.html)：

> Scala 集合库避免了代码重复，并通过在所谓的*实现特征*中使用泛型构建器和对集合的遍历来实现“相同结果类型”的原则。这些特征以`Like`后缀命名；例如，`IndexedSeqLike`是 的实现特征`IndexedSeq`，同样， `TraversableLike`是 的实现特征`Traversable`。集合类，例如`Traversable`或`IndexedSeq`从这些特征继承其所有具体方法实现。实现特征有两个类型参数，而不是普通集合的一个。它们不仅对集合的元素类型进行参数化，而且对集合的*表示类型*进行参数化， *即*, 底层集合的类型，例如`Seq[I]`or `List[T]`...

如果您想将自己的集合类与 Collections API 集成，或者如果您只想更深入地了解库的工作原理，整篇文章将非常有用。

# haskell - Haskel 的新手在使用 String -> Double in list 时遇到问题

> ID：11443496
> 
> 赞同：1
> 
> 时间：2012-07-12T00:27:39.227
> 
> 标签：haskell

我很喜欢这种新语言，但有时它很难排除故障。

这是我的教授想要的，他希望我接受用户的数字并计算运行平均值。

现在到目前为止，这就是我所拥有的，除了我的基本编为某些类型错误给出错误。

我是 Comp Sci 的学生，这是一个我正在尝试自己完成的作业问题。

```
 module Main (listM, main) where

   import System.IO  
   import Data.List

   listM = [1, 2, 3]

    main = do

     average listM = realToFrac (sum listM) / genericLength listM   

     putStrLn (show(listM)) 
```

现在我有这个错误，让我发疯...... :S Q1.hs:12:18: parse error on input `='

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:25:46.267

很高兴听到您在学习 Haskell 时玩得很开心！

就你的任务而言：你根本没有做坏事。我会说：你快到了。

正如 Dwilson 在他出色的回答中解释的那样，编译器拒绝您的程序的原因是您的定义`listM`被放在了导入之前。在 Haskell 模块中，您总是从模块头（有时前面有一些 pragma）和导入列表开始，然后是函数的定义：

```
module Main (main) where

import System.IO
import Data.List

... 
```

现在，您提到编译器（或者解释器）由于“类型错误”而拒绝您的程序。但是你得到的实际上是一个“解析错误”。理解两者之间的区别不会有什么坏处：

*   当编译器处理你的程序时，它首先检查你的程序在语法上是否正确。如果不是，它会给你一个解析错误。

*   然后，它检查您是否以一致的方式使用您的函数，即检查类型是否正确。如果不是，您将面临类型错误。

通常，第一类错误很容易处理：编译器几乎总是将您指向程序中您犯了错误或拼写错误的位置（在您的情况下：第一个 import 语句）。第二类错误有时更难处理——但成为一名优秀的 Haskell 程序员需要熟悉类型系统并真正理解那里发生的事情（而不是仅仅尝试一些事情直到它或多或少地工作......）不过不用担心：这并不像您想象的那么难。

看看你的代码，你定义的让我印象深刻

```
average xs = realToFrac (sum listM) / genericLength listM 
```

也就是说，您定义`average`为一个带有参数的函数**，**`xs`但您没有`xs`在定义的右侧使用。`xs`应该是您计算平均值的列表吗？在您的代码中，您的函数始终计算 fix list 的平均值`listM`，无论您提供什么列表作为`average`. 除此之外，您的功能还可以。

现在您唯一需要做的就是如何提示用户输入以及如何根据该输入构建一个数字列表。

祝好运并玩得开心点！;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T02:30:30.030

就您的输入错误而言，这是因为`import System.IO`在`import Data.List`. 在 Haskell 中，缩进很重要，尽管您可以根据需要使用花括号和分号。任何缩进比前一行更远的行都算作该行的延续，因此 ghc 将您的文件解释为`listM = [1, 2, 3] import System.IO`.

现在，如果这是您唯一需要帮助的事情，那么请尽情享受 Haskell！但是，如果您需要有关结构的帮助，您应该澄清您在寻找什么。您对教授想要什么的描述与您期望发生的事情不匹配。具体来说，教授说您应该从用户那里获取数字，这通常意味着您将在命令行中提示它们，但是您说您希望程序对`listM`未从用户输入的数字求和。哪一个？

**编辑**
更新以反映当前状态`parse error on '='`。

GHC 的错误起初可能令人生畏，但我发现当你习惯它们时，它们实际上比其他语言更有帮助。别担心你会到达那里！现在这个错误告诉你的是，GHC 不知道当它`=` 上线时该做什么`average listM = realToFrac (sum listM) / genericLength listM`。这是因为它将其视为`main = do`行的延续，并且在一个`do`块中，所有绑定都`=`必须使用`let`语句完成，如下所示`let average listM = realToFrac (sum listM) / genericLength listM`：现在这可能不是您想要的，因为那样您的函数`average`将仅在 do 块中可用！您应该做的是`average`在块之外定义`do`，然后在`do`块内的某个位置调用它。

几个指针：

*   缩进**非常**重要。Haskell 通过缩进确定范围、行尾等。
*   `ParseError`s 通常意味着您的代码在语法上存在问题。遇到缩进时你应该做的第一件事是检查缩进，然后检查是否缺少括号、括号等。
*   在 do 块中：
    *   `let`并`=`用于绑定*非*一元的东西，例如`let x = length "foobar"`
    *   `<-`运算符用于绑定单子的东西，例如`x <- getChar`

# database - 添加索引后更新表

> ID：11443498
> 
> 赞同：0
> 
> 时间：2012-07-12T00:27:52.230
> 
> 标签：database, indexing, sql-server-express, ssms

我正在使用 SQLExpress 设计一个数据库。我有一个包含三列的表。该表如下所示。

```
CREATE TABLE [dbo].[dummy](
[id] [int] IDENTITY(1,1) NOT NULL,
[someLongString] [text] NOT NULL,
[someLongText_Hash] [binary](20) NOT NULL,
 CONSTRAINT [PK_dummy] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

我已经在这张表中有一些数据。每当我想添加一个新行时，我首先计算一个散列`someLongString`并查询表以查看具有此散列的行是否已经存在。随着表大小的增长，此查询会花费更长的时间，因此我计划按`someLongText_Hash`列对其进行索引。

有人可以建议如何在 SQL Server Management Studio 中执行此操作。另外，添加此索引后，如何索引此表中的现有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:39:16.933

为什么不能将“someLongString”字段设置为唯一的？这样你就不需要保留哈希和额外的主键了吗？

您可以尝试使用 CHECKSUM。

```
CREATE TABLE [dbo].[dummy](
[id] [int] IDENTITY(1,1) NOT NULL,
[someLongString] [text] NOT NULL,
[someLongText_CheckSum] NOT NULL,
CONSTRAINT [UC_someLongText_CheckSum] UNIQUE (someLongText_CheckSum),
 CONSTRAINT [PK_dummy] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

请参阅[此处](http://www.mssqltips.com/sqlservertip/1868/sql-server-unique-constraints-for-large-text-columns/)以获取更多说明

# python - 缺少 mysql.sock；产生 OperationalError: (2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")

> ID：11443504
> 
> 赞同：3
> 
> 时间：2012-07-12T00:28:04.103
> 
> 标签：python, mysql, django, sockets, mysql.sock

首先，我发誓我已经查看了引用此错误的每一个问题。几乎每个人提供的解决方案都是不同的，而且似乎没有人理解错误的系统性原因。我和网络上许多遇到这个常见问题的人需要的是对实际问题的解释。

基本上，当我尝试运行时：

```
python manage.py shell
from django.db import connection
cursor = connection.cursor() 
```

使用 Django 1.4 和 python 2.7.3，我收到以下错误： OperationalError: (2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")

我相信我的 settings.py 文件是正确的。我需要安装的所有东西都已安装。这是settings.py：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'database_name.mwb',                      # Or path to database file if using sqlite3.
    'USER': 'user',                      # Not used with sqlite3.
    'PASSWORD': 'PASS',                  # Not used with sqlite3.
    'HOST': '/tmp/mysql.sock',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
}} 
```

在经历了数周的网络搜索（包括 stackoverflow 上的每个问题）之后，我得出的结论是，我遇到的真正问题是我的计算机上没有 mysql.sock 文件，即使安装了 mysql。所以，真正的问题是我如何得到一个？答案可能简单得令人尴尬。

当我运行时：

```
cd /
sudo find . -name ".sock" 
```

我什么也得不到。是的，我已经在我的 mac osx lion 上安装了 mysql 5.25。它肯定是安装的：

```
sudo launchctl load -w /Library/LaunchDaemons/com.mysql.mysql.plist
com.mysql.mysqld: Already loaded 
```

但是，运行：

```
mysql 
```

产量：

```
-bash: mysql: command not found 
```

找了半天，发现了这个bug：[http](http://bugs.mysql.com/bug.php?id=4174) ://bugs.mysql.com/bug.php?id=4174 ..那有什么办法呢？？

完全披露：我只是一个程序员。我真的对电脑一窍不通。所以，我对mysql、数据库或套接字一无所知。我认为这个问题需要真正懂电脑的人来解决。虽然现在看起来很明显，但将这个错误表述为来自丢失的套接字需要很长时间。网络上 99% 出现此错误的人似乎并没有以这种方式处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:12:35.477

据我所知，这是两件事之一：

1.  您的 MySQL 服务器没有运行，或者
2.  它正在运行，但未配置为`/tmp/mysql.sock`用作其套接字

就 2 而言，我相信这是新安装的 MySQL 的默认设置，但检查一下也无妨。尝试查看`/etc/my.cnf`. 检查是否存在如下所示的行：`socket=/path/to/socket`- where `/path/to/socket`is，正如它所说的套接字的文件路径。如果有这样的条目并且文件路径不同于`/tmp/mysql.sock`，那么您已经找到了问题。更改该行或您的 Django 配置以使其匹配。

**注意：**如果您没有找到`/etc/my.cnf`，您可以自己创建它并添加适当的套接字设置（即只需添加行`socket=/tmp/mysql.sock`），以确保它已正确配置。

就 1 而言，您可以按照[此处](http://www.razorsql.com/articles/mysql_mac_os_x.html)提供的说明进行操作，并确保您的 MySql 服务器正在运行。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T00:36:34.970

您安装了 mysql 客户端，但没有安装处理客户​​端连接的 mysql-server。您需要安装 mysql 服务器并运行它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-05T21:17:27.877

[正如我在这里](https://stackoverflow.com/a/16388227/1299128)回答的那样：

和

```
mysql_config --socket 
```

我发现mysql套接字在哪里，我应用它：

```
'HOST': '/Applications/MAMP/tmp/mysql/mysql.sock', 
```

# java - 如何重命名 java 类型？（字符串到字符串）

> ID：11443506
> 
> 赞同：-4
> 
> 时间：2012-07-12T00:28:27.810
> 
> 标签：java, string, types, reference, rename

我真的习惯在 C# 中使用“字符串”而不是“字符串”。我想知道我能做些什么才能在 Java 中做到这一点。

如果这很重要，我正在使用 Eclipse 的 Java EE IDE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:30:26.930

不。只需使用字符串。你会习惯的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T00:45:29.287

这是不可能的：

*   Java 不允许您重命名或别名类型。每个（类）类型都有一个且只有一个 FQN（即完全限定名称）。任何具有不同 FQN 的类型都是不同的类型。

*   该`String`类型被声明为`final`因此您甚至无法创建便利子类。（即使这样做，它也无济于事，因为您无法更改其余系统库以使用您的类。）

*   在理论上可行的情况下更改系统库是一个非常非常糟糕的想法，因为它会破坏与阳光下所有事物的兼容性，从您的 Java 工具链和 IDE 开始。

*   `String`由于此类、生成的代码和 JVM 内部之间存在交叉依赖关系，因此更改名称会特别困难。特别是，这个类和 JVM 引导进程之间存在一些非常可怕的关系。

*   即使这样做在技术上是可行的，这仍然是一个坏主意……从代码可维护性的角度来看。想想下一个必须阅读和修改您的杂种“Java 看起来像 C#”代码库的人。

> 我真的习惯在 C# 中使用“字符串”而不是“字符串”。

你只需要学会使用`String`……就像其他数百万学过 Java 的 C# 程序员一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T00:32:13.970

`String`在 Java 中是一个~~包装器~~适当的一等类，与 C# 不同，Java 中没有字符串的原始数据类型。

Java 中的编码约定规定类需要以大写字母开头。所以，不，你不能重命名它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T00:31:34.127

即使这不是一个坏主意，我也不认为这是可能的。java中没有typedef，所以你不能给一个类起别名。此外，String 是最终类，因此不能扩展——这意味着您不能扩展 String 并将其称为字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T01:10:50.020

仅适用于 lulz

```
public final class string {
    private final String string;
    public string(String string){
        this.string = string;
    }
    @Override
    public String toString(){
        return string;
    }

    //usage
    public static void main(String args[]){
       string myString = new string("Hello World");
       System.out.println(myString);
    }
} 
```

# visual-studio-2010 - Visual Studio 2010，VisualHg，不断添加 bin、obj 文件夹

> ID：11443507
> 
> 赞同：2
> 
> 时间：2012-07-12T00:29:30.180
> 
> 标签：visual-studio-2010, mercurial, tortoisehg, hgignore, visualhg

3 个月以来一切正常，现在突然当我打开 Visual Studio 时，它会将根解决方案文件夹中的所有未跟踪文件添加到 Hg，即包括 bin 和 obj 文件夹。

脚步：

1.  关闭 VS2010
2.  使用 Tortoise Hg 工作台忘记 VS2010 打开时添加的文件
3.  打开VS2010，所有文件开始重新添加到Hg中，出现“准备解决方案”对话框时似乎发生了

我编辑了根文件夹中的 .hgignore 文件以包含“bin”和“obj”，但这被 VS 忽略了。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:51:18.387

尝试编辑您的忽略文件以包含以下内容：

```
[Bb]in/
[Dd]ebug*/
obj/
[Rr]elease*/ 
```

有时大小写会改变（我不记得到底是什么原因造成的......）

# html - 我无法在 Internet Explorer 上显示背景图片

> ID：11443508
> 
> 赞同：0
> 
> 时间：2012-07-12T00:29:44.273
> 
> 标签：html, css, internet-explorer

```
body {
    margin:0px;
    padding:0;
    background: #777 url(foodwine.png) center fixed;
    background-repeat:no-repeat;    
    text-align:center;
} 
```

我似乎无法在 IE7 上显示此背景图像（我不确定其他 IE）。

我尝试了所有不同类型的变化和间距，但它只是不想出现在 IE 中。

任何帮助将非常感激！

编辑：我正在使用 rails 来提供图像，它可以在 firefox/chrome 中使用。我尝试使用“/images/foodwine.png”指定目录，但现在它没有显示在任何浏览器上。

[http://afternoon-samurai-9254.herokuapp.com/](http://afternoon-samurai-9254.herokuapp.com/)这是我正在处理的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:39:55.680

试试这个：

```
body {
    margin:0;
    padding:0;
    background: #777 url(foodwine.png) no-repeat center fixed;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:36:16.687

我*猜*该图像位于名为`images`或类似的目录中？如果是这样，从您的 Web 根目录调用它是确保正确引用它的最安全方法：

```
background: #777 url('/images/foodwine.png') center fixed; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:36:36.530

尝试使用 margin:0，而不是 0px。正如科尔所说，在图片网址周围添加引号。我想图像存在是因为你在指出资源管理器，所以我认为你尝试了其他浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T01:28:31.040

您需要有严格的文档类型才能在 IE7 上进行固定定位。

```
 <!DOCTYPE htmlPUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T05:01:20.027

似乎 ie7 有一个奇怪的行为（错误？）渲染重图像（在这种情况下为 2.3MB），尝试使用 jpg 图像格式，通常使用 png 来支持我在这种情况下看不到的透明度。

# javascript - 为什么 setTimeout(myFunction, 0) 有效，但运行函数本身不起作用？

> ID：11443517
> 
> 赞同：3
> 
> 时间：2012-07-12T00:31:23.433
> 
> 标签：javascript, jquery

This code should select the contents of a textarea when that textarea is selected. 但是，它本身不起作用：

```
 $("#form").focus(function() {
            $("#form").select();
        }); 
```

只有当我给它一个`setTimeout`0 时它才有效，就像这样：

```
 $("#form").focus(function() {
            setTimeout(function() {
                $("#form").select();
            }, 0);
        }); 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:03:43.067

在处理此类事情时，请始终记住这一点：

浏览器是单线程的。这是一个简单的模型，但可以这样想：等待事件（击键、鼠标、触摸、计时器等）、执行脚本、更新页面，一遍又一遍。

当您`setTimeout(func, 0)`正在做的是告诉浏览器*在下*一次迭代而不是这次迭代时进行。所以它会有时间来解析表单标签。或者，如果您正在处理宽度或高度，它可能有时间显示项目并因此计算其宽度或高度（而不是将它们读取为 0）。

可能正在发生的事情是通过聚焦 textarea 调用的事件级联中的某些内容最终也会取消选择其内容。通过将选择移动到下一次迭代，您可以将其从聚焦、全选、取消全选改为聚焦、取消全选、全选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:45:08.570

看起来第一个代码片段正在选择，然后取消选择文本。我怀疑文本选择是在`focus`事件完成后在幕后处理的，并在事件之后`setTimeout`执行`select`（当幕后的事情已经发生时）。

# cassandra - Cassandra 在繁重的插入工作负载下重置连接

> ID：11443519
> 
> 赞同：4
> 
> 时间：2012-07-12T00:31:33.190
> 
> 标签：cassandra

我有一个 8 个节点的 cassandra 集群，cassandra 1.0.8。

我正在尝试使用 batch_mutate() 在循环中进行大量小插入。一段时间后（约 200K 插入）服务器重置连接，但出现以下异常：

```
org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:147)
at org.apache.thrift.transport.TFramedTransport.flush(TFramedTransport.java:157)
at org.apache.cassandra.thrift.Cassandra$Client.send_batch_mutate(Cassandra.java:998)
at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:986)
at org.scale7.cassandra.pelops.Mutator$1.execute(Mutator.java:46)
at org.scale7.cassandra.pelops.Mutator$1.execute(Mutator.java:42)
at org.scale7.cassandra.pelops.Operand.tryOperation(Operand.java:56)
at org.scale7.cassandra.pelops.Mutator.execute(Mutator.java:51)
    ...
    Caused by: java.net.SocketException: Connection reset
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:145)
... 25 more 
```

否则，集群工作正常。服务器日志是干净的。

什么可能导致这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T13:08:10.223

我找到了原因：批量突变大小超过了 TFramedTransport 的帧大小。可能有两种可能的解决方案：要么增加 cassandra.yaml 中的“thrift_framed_transport_size_in_mb”配置属性，要么使用更小的批量大小。

# asp.net-mvc-3 - 我的小代码第一个项目中的实体框架版本错误

> ID：11443525
> 
> 赞同：1
> 
> 时间：2012-07-12T00:32:01.970
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4.1, ef-code-first, entity-framework-4.3

我正在编写一个小型测试项目，以便首先了解 EF 代码。不幸的是，当我尝试编译时，出现以下错误：

```
Assembly 'Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' uses   
'EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'  
which has a higher version than referenced assembly 'EntityFramework, Version=4.1.0.0,  
Culture=neutral, PublicKeyToken=b77a5c561934e089'   c:\Users\Kevin\Documents\Visual   
Studio 2010\Projects\CFTest\Backend\bin\Debug\Backend.dll   CFTest 
```

出于某种原因，存在版本冲突，但我不知道如何解决它。

编辑：我的 App.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:58:25.233

我的后端项目有一个版本的 EF，而我的 MVC 项目默认有另一个版本。解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:42:28.227

它与您的项目正在使用的 .NET 框架的版本以及编译 EF dll 的 .NET 框架的版本冲突。如果您转到项目的添加引用窗口，清单应该说明什么 . NET Framework 版本，每个 DLL 使用。更改您的项目目标以使用该版本。

# iphone - iOS：如何在主视图之上显示一个小视图？

> ID：11443527
> 
> 赞同：0
> 
> 时间：2012-07-12T00:32:10.777
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我是新来的，不要对我太苛刻:)

学习 iOS 开发并尝试显示一个小视图以向我的应用程序输入一些数据，该应用程序正在使用故事板。

我尝试将其添加为子视图，但我无法将其从左上角移动或使背景褪色。关于如何做到这一点的任何建议？

忘了说这是针对 iPhone 的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:17:12.000

根据您的评论，您似乎对 UIView 和 UIViewController 之间的区别没有清楚的了解。

将 UIViewController 视为您的屏幕。您的屏幕可能会同时显示许多不同的视图，但它们都是 UIViewController 视图的一部分。

而不是呈现一个新的 UIViewController（即屏幕），你想做这样的事情：

```
//Use a XIB for this, not a storyboard
UIView *newView = [[[NSBundle mainBundle] loadNibNamed:@"addData" owner:self options:nil] lastObject];
[self.view addSubview:newView]; 
```

我建议您阅读 Apple 的这两个指南，直到您了解 UIView 和 UIViewController 之间的区别：

[查看编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503)

[查看控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# jquery - 使用 jquery 获取父索引

> ID：11443530
> 
> 赞同：0
> 
> 时间：2012-07-12T00:32:16.737
> 
> 标签：jquery

我知道还有另一个问题可以回答我的问题，但是一个据说较新的解决方案对我不起作用。

所以我有类似的东西：

```
<ul>
 <li><div class="thumb"></div></li>
 <li><div class="thumb"></div></li>
 <li><div class="thumb"></div></li>
</ul>

$("ul li div.thumb").live("click",function(){

alert($(this).parent().index());

}); 
```

我想检索 li 的索引，但是该解决方案对我不起作用。

编辑：

好的，我的实际代码在 div.thumb 中有子代：

```
<ul>
    <li><div class="thumb"><div class="inner">3</div></div></li>
 <li><div class="thumb"><div class="inner">3</div></div></li>
 <li><div class="thumb"><div class="inner">3</div></div></li>
</ul> 
```

我认为这无关紧要，因为单击了 div thumb。点击任何 .thumb 都会得到 -1 ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:36:21.240

是的，它确实有效。请显示一些代码。

您是否将 jQuery 放在 ready() 函数中？

```
$(document).ready( function() {
    $("ul li div.thumb").live("click",function(){
        alert($(this).parent().index());
    });
}); 
```

# c++ - 未定义对 Mysnprintf 的引用

> ID：11443537
> 
> 赞同：0
> 
> 时间：2012-07-12T00:33:00.040
> 
> 标签：c++, codeblocks

我正在使用`CodeBlocks`并试图在里面制作一个钩子dll

`DllMain`

```
#include "main.h"
#include "Asm.h"
#include <stdio.h>
using namespace std;
    static HINSTANCE WINAPI Mysnprintf(char* str, int len, const char* format, ...);

    static void InitDll(){
        Originalsnprintf = (snprintfFn)GetProcAddress(GetModuleHandleA("msvcr90.dll"), "_snprintf");
        Asm code;
        code.JMP((int)Mysnprintf); // where JMP = Asm& JMP(int address){...}
    } 
```

我不知道出了什么问题，因为如果我对它做同样的`Microsoft Visual C++`事情，它将不会出错！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:43:22.973

链接器告诉你函数是*undefined*，这是正确的。您还没有为您的函数编写*定义*。你只是*宣布*了它。

在函数后面加上一些花括号，并告诉编译器您希望该函数*做什么*：

```
static HINSTANCE WINAPI Mysnprintf(char* str, int len, const char* format, ...)
{
  ...
} 
```

# regex - 在另一个正则表达式中使用来自正则表达式的匹配：跳过元字符

> ID：11443547
> 
> 赞同：1
> 
> 时间：2012-07-12T00:35:06.230
> 
> 标签：regex, perl

我有一个正则表达式 (REGEX 1) 加上一些 Perl 代码，可以从一个大文本文档中挑选出一个特定的文本字符串，称之为 START_POINT。这个 START_POINT 是我想从大文本文档中提取的较大文本字符串的开头。我想使用另一个正则表达式 (REGEX 2) 从 START_POINT 提取到 END_POINT。我有一组要在正则表达式 (REGEX 2) 中使用的单词，它们很容易找到 END_POINT。这是我的问题。START_POINT 文本字符串可能包含将被正则表达式以不同方式解释的元字符。我不知道这些将是哪些。我正在尝试处理大量文本文档，START_POINT 因文档而异。

也许这段代码会帮助这更有意义。$START_POINT 在这段代码上方的代码中被识别，是大文本字符串 $TEXT 的提取部分。

```
my $END_POINT = "(STOP|CEASE|END|QUIT)";

my @NFS = $TEXT =~ m/(($START_POINT).*?($END_POINT))/misog; 
```

我曾尝试使用 quotemeta 功能，但没有任何成功。通过添加更改文本的斜杠似乎破坏了 $START_POINT 文本字符串的完整性。

因此，总而言之，我正在寻找某种方法来告诉正则表达式在 $START_POINT 中查找确切的字符串，而不会将任何字符串解释为元字符，同时仍保持字符串的完整性。虽然我可以让quotemeta 工作，但你知道还有其他可用的选项吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:41:48.620

您需要将文本转换为正则表达式模式。就是`quotemeta`这样。

```
 my $start = '*';
 my $start_pat = quotemeta($start);  # * => \*
 /$start_pat/                        # Matches "*" 
```

`quotemeta`可以通过以下方式访问`\Q..\E`：

```
 my $start = '*';
 /\Q$start_pat\E/                    # Matches "*" 
```

为什么要重新实现`quotemeta`？

# php - Javascript 等价于 PHP 代码

> ID：11443548
> 
> 赞同：-4
> 
> 时间：2012-07-12T00:35:09.317
> 
> 标签：php, javascript

我需要一个等效于以下代码的 Javascript。我正在将 php 网站转换为 django 网站，在静态页面上我有以下内容：

```
<li<?if($page == "home") {?> class="active"<?}?>><a href="/home" title="Home">Home</a></li> 
```

问题是我想在这里删除 php 并使用 javascript 在该页面上使用 class="active"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:54:47.713

你不需要javascript。您可以动态地将一个类添加到 body 标记中，如下所示：

```
<body class="blog"> 
```

...并为每个链接添加一个类，如下所示：

```
<a class="home" href="" >...</a>
<a class="blog" href="" >...</a>
<a class="about" href="" >...</a> 
```

...然后将此规则添加到您的CSS：

```
body.blog a.blog, body.home a.home, body.about a.about
{
    // Do stuff that you only want applied to the "active" page link
} 
```

**基本思想是，这仅将您的“活动”样式应用于页面上的元素，并且正文标签类与您想要样式化的元素类之间的正确匹配**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:09:08.403

在 js 中获取当前页面，

```
var currentpage = document.location.href
// this will return the full path e.g. http://www.home/home.html
var homepage = currentpage.search(/home.html/);

if (homepage >-1)... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:49:03.350

如果你真的需要这样做，你可以`.addClass()`在 jquery [http://api.jquery.com/addClass/中使用](http://api.jquery.com/addClass/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T00:38:13.737

没有等效的 CSS。CSS 还不是那么聪明（还）。你可以用 JavaScript 做一些事情，但如果你已经可以用服务器端语言来做，那将是愚蠢的。

**注意**原始标题要求使用 CSS，而不是 JavaScript。它已被编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T00:43:12.083

**`CSS`**是一种用于样式化 HTML 元素的语言。

**`PHP`**是一种服务器端脚本语言。

这有很大的不同。你不能做`CSS`可以做的事情`PHP`，反之亦然。想象一个艺术家和一个工程师。

`JavaScript`是你最接近的方式。它是一种客户端脚本语言。并在 jQuery 中做你想做的事：

```
$('li').addClass('active'); 
```

但是，当然，您需要发布更多代码。

# trigger.io - 如何检测 tabs.openWithOptions 中的 URL 更改？

> ID：11443549
> 
> 赞同：1
> 
> 时间：2012-07-12T00:35:19.803
> 
> 标签：trigger.io

所以我有以下代码：

```
options = {
    url: "http://mywebsite.com/login/" + authService,
    pattern: "http://*mywebsite.com/complete/" + authService + "*",
  };
  forge.tabs.openWithOptions(options, function(data) {
    // We've logged in. Do something now
  }, function(data) {
    forge.logging.error("Error");
  }); 
```

该代码在 iPhone 模拟器上运行良好，但在 Android 模拟器中不会调用成功回调。它似乎没有注册从 Oauth 转到重定向 url。在模拟器中，它确实加载了我的重定向 URL，但它没有记录它。这是在 forge run 中记录的内容：

```
[   INFO] I/Forge   (  393): Loading initial page in webview.

[   INFO] I/Forge   (  393): Application in focus, resuming webview.

[   INFO] D/Forge   (  393): Returning event: {"event":"internal.connectionStateChange","params":{"wifi":false,"connected":true}}

[   INFO] D/Forge   (  393): Native call "tabbar.hide" with task.params: {}

[   INFO] D/Forge   (  393): Returning: {"status":"success","callid":"2C1DB06C-9438-4AFD-841B-C2E3BBF8AA85"}

[   INFO] D/Forge   (  393): Native call "tabbar.addButton" with task.params: {"text":"Events","icon":"img/logo-forge.png"}

[   INFO] D/Forge   (  393): Native call "tabbar.addButton" with task.params: {"text":"Activity","icon":"img/logo-forge.png"}

[   INFO] D/Forge   (  393): Native call "tabbar.addButton" with task.params: {"text":"Me","icon":"img/logo-forge.png"}

[   INFO] D/Forge   (  393): Returning: {"content":"37F88F37-9A08-4541-8B1D-D7D08C2605D8","status":"success","callid":"37F88F37-9A08-4541-8B1D-D7D08C2605D8"}

[   INFO] D/Forge   (  393): Returning: {"content":"FFA69B04-006E-45CB-8BD7-A3CBB7E8403C","status":"success","callid":"FFA69B04-006E-45CB-8BD7-A3CBB7E8403C"}

[   INFO] D/Forge   (  393): Returning: {"content":"99681BEB-E79B-4309-B230-90B731A3DA61","status":"success","callid":"99681BEB-E79B-4309-B230-90B731A3DA61"}

[   INFO] D/Forge   (  393): Native call "internal.hideLaunchImage" with task.params: {}

[   INFO] D/Forge   (  393): Native call "tabbar.setActive" with task.params: {"id":"37F88F37-9A08-4541-8B1D-D7D08C2605D8"}

[   INFO] D/Forge   (  393): Returning: {"status":"success","callid":"23F0D9E1-5F63-4F6A-BFE0-14D674CDEB65"}

[   INFO] D/Forge   (  393): Native call "tabs.open" with task.params: {"url":"http://mywebsite.com/login/twitter","pattern":"^http://*mywebsite.com/complete/twitter.*$","title":"Sign in with Twitter"}

[   INFO] I/Forge   (  393): Displaying modal view.

[   INFO] I/Forge   (  393): subView load http://mywebsite.com/login/twitter/

[   INFO] I/Forge   (  393): subView load http://api.twitter.com/oauth/authenticate?oauth_token=TOKEN&oauth_callback=http%3A%2F%2Fmywebsite.com%2Fcomplete%2Ftwitter%2F 
```

如果我无法始终检测到这些 URL 更改，是否可以在某个时间点获取当前选项卡的 URL？

注意：我在后端使用 django-social-auth。

# c# - python.net：无法使用 winforms 加载 python27.dll，但控制台应用程序可以工作

> ID：11443550
> 
> 赞同：2
> 
> 时间：2012-07-12T00:35:23.060
> 
> 标签：c#, python.net

我正在使用 .net framework 4.5，但与 4.0 的结果相同：

如果我编写一个简单的控制台应用程序来初始化 python.net，它会按预期工作。如果我尝试从 winforms 应用程序执行相同的操作，我会收到“无法加载 DLL 'python27'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”

如果我从 winforms 应用程序引用正常运行的控制台应用程序并调用初始化 python.net 的方法，则会发生同样的事情。构建设置是两个项目的默认设置。

我什至将 python27 直接放入可执行文件夹，但仍然发生相同的错误，所以我猜这可能是 32 位与 64 位的问题，即使两个项目都配置为任何 cpu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:40:28.947

经过一番摸索，我发现了两件事：

将构建目标更改为 x86 解决了丢失的 DLL 错误，但是在调用 PythonEngine.Initialize() 时应用程序仍然神秘地崩溃了。我能够通过确保在执行任何其他代码之前进行初始化来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-08T02:12:58.280

1.  我添加了对 python.runtime.dll 的引用（位于 xxx\Python36\Lib\site-packages）来解决 dll 加载问题。
2.  我将构建目标更改为 x64 解决了我的 PythonEngine.Initialize() 问题。@Bicubic 通过改用 x86 解决了他的问题。所以你不能让c#目标是AnyCPU。尝试两者。
3.  我将我的 xxx.py 移动到 xxx\Python36 文件夹以解决 py.import("xxx") 错误。

我现在可以玩得开心了 :) 希望你们好运，玩得开心！

# javascript - 在 XTemplate 中注册一个事件 - Sencha Touch 2？

> ID：11443555
> 
> 赞同：0
> 
> 时间：2012-07-12T00:36:01.943
> 
> 标签：javascript, sencha-touch-2

我正在尝试设置我的控制器以响应`Ext.XTemplate`事件并避免编写一堆被黑的 javascript 的混乱。

不幸的是，我找不到一种方法来 1) 记录单击事件或 2) 用于`componentQuery`注册 XTemplate。

这是一个基本的控制器配置：

```
config: {
        refs: {         
            reportChooser: 'xtemplate[id=jobReportChooser]'
        },
        control: {
            reportChooser: {
                tap: 'onAnonymousTap'
            }
        }
    }, 
```

有没有办法在控制器中做到这一点，或者至少清理听众？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:47:37.883

`XTemplate`由于没有内置事件，我找不到直接参考，但这里有一个很好的解决方法，它更简洁一些。

**在您看来初始化方法**

```
initialize: function() {
    this.element.on({
        tap: function(e, dom) {

            var el = Ext.get(e.target),
                elParent = Ext.get(e.parent),
                fireEvent;

            window.jobAction = this;
            window.jobEl = el;

            if (el.hasCls('job-start') || el.parent().hasCls('job-start')) {
                fireEvent = 'start';
            } else if (el.hasCls('job-hold') || el.parent().hasCls('job-hold')) {
                fireEvent = 'hold';                    
            }  else if (el.hasCls('job-report') || el.parent().hasCls('job-report')) {
                Ext.Viewport.setMasked({ xtype: 'loadmask' });
                var teamId = APPNAME.currentItem.data.teamId;
                var jobId = APPNAME.currentItem.data.jobId;

                APPNAME.app.dispatch({controller: 'Jobs', action: 'displayReportChooser', args:[teamId,'job',jobId]})
            }

            if (fireEvent) {
                Ext.Viewport.setMasked({ xtype: 'loadmask' });
                this.fireEvent(fireEvent, Alloy.currentJob, el);
            }

        },
        delegate: '.job-info',
        scope: this
    });
} 
```

**这是什么意思**

使用应用程序`dispatch method`。它将使生活变得更轻松，并帮助您仍然在控制器内组织动作。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-dispatch](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-dispatch)

# powershell - 使用 PowerShell 进行复杂的查找/替换

> ID：11443566
> 
> 赞同：0
> 
> 时间：2012-07-12T00:37:14.977
> 
> 标签：powershell

我想在以下示例中添加 html 链接：

1.  Blah Blah Blah BZ#01234 Blah Blah Blah
2.  Blah Blah Blah BZ#0124 Blah Blah Blah
3.  Blah Blah Blah BZ 012345 Blah Blah Blah
4.  Blah Complex Blah BZ#123 , 345, 567,2341 Blah

所以看起来像：

1.  胡说八道 <a href="http://bz.com/show_bug.cgi?id=01234">BZ#01234</a> 胡说八道
2.  废话废话 <a href="http://bz.com/show_bug.cgi?id=0124">BZ#0124</a> 废话废话
3.  Blah Blah Blah <a href="http://bz.com/show_bug.cgi?id=012345">BZ 012345</a> Blah Blah Blah
4.  废话复杂废话 <a href="http://bz.com/show_bug.cgi?id=123">BZ#123</a> , <a href="http://bz.com/show_bug.cgi? id=345">345</a>、<a href="http://bz.com/show_bug.cgi?id=567">567</a>、<a href="http://bz. com/show_bug.cgi?id=2341">2341</a> 废话

所以我想这是一个查找匹配项的正则表达式工作，以及添加 html 链接的一些 PowerShell 魔法。我*认为*正则表达式`((BZ#)|(BZ ))[0-9]+`可以匹配除复杂示例之外的所有内容，但我不太了解正则表达式，无法确定，或者如何在 PowerShell 中对其进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:16:44.857

我认为这可行，这取决于输入的可变性。

```
$inputstring = @'
Blah Blah Blah BZ#01234 Blah Blah Blah
Blah Blah Blah BZ#0124 Blah Blah Blah
Blah Blah Blah BZ 012345 Blah Blah Blah
Blah Complex Blah BZ#123 , 345, 567,2341 Blah
'@

# Split the input into an array of strings
$lines = $inputstring -split '[\r\n]'

# Setup patterns to match against
$pattern1 = "(.*)\sBZ#(\d+) , (\d+), (\d+),(\d+) (.*)"
$pattern2 = "(.*)\sBZ#(\d+)\s(.*)"
$pattern3 = "(.*)\sBZ (\d+)\s(.*)"

# Loop through each line
for($i = 0; $i -lt $lines.count; $i++)
{
    # Start off assuming the current line produces no output
    $output = ""

    # Look for volumes with drive letters
    if($lines[$i] -match $pattern1)
    {
        $output = $matches[1] + " <a href=`"http://bz.com/show_bug.cgi?id=" + $matches[2] + "`">BZ#" + $matches[2] + "</a> , " + 
            "<a href=`"http://bz.com/show_bug.cgi?id=" + $matches[3] + "`">" + $matches[3] + "</a>, " + 
            "<a href=`"http://bz.com/show_bug.cgi?id=" + $matches[4] + "`">" + $matches[4] + "</a>," + 
            "<a href=`"http://bz.com/show_bug.cgi?id=" + $matches[5] + "`">" + $matches[5] + "</a> " + 
            $matches[6]
    }
    elseif($lines[$i] -match $pattern2)
    {
        $output = $matches[1] + " <a href=`"http://bz.com/show_bug.cgi?id=" + $matches[2] + "`">BZ#" + $matches[2] + "</a> " + $matches[3]
    }
    elseif($lines[$i] -match $pattern3)
    {
        $output = $matches[1] + " <a href=`"http://bz.com/show_bug.cgi?id=" + $matches[2] + "`">BZ " + $matches[2] + "</a> " + $matches[3]
    }

    # Write out any output that was produced
    if($output -ne "")
    {
        $output
    }
} 
```

输出：

```
Blah Blah Blah <a href="http://bz.com/show_bug.cgi?id=01234">BZ#01234</a> Blah Blah Blah
Blah Blah Blah <a href="http://bz.com/show_bug.cgi?id=0124">BZ#0124</a> Blah Blah Blah
Blah Blah Blah <a href="http://bz.com/show_bug.cgi?id=012345">BZ 012345</a> Blah Blah Blah
Blah Complex Blah <a href="http://bz.com/show_bug.cgi?id=123">BZ#123</a> , <a href="http://bz.com/show_bug.cgi?id=345">345</a>, <a href="http://bz.com/show_bug.cgi?id=567">567</a>,<a href="http://bz.com/show_bug.cgi?id=2341">2341</a> Blah 
```

# php - 重定向后PHP会话丢失

> ID：11443567
> 
> 赞同：1
> 
> 时间：2012-07-12T00:37:22.063
> 
> 标签：php, session, redirect

我无法解决/只能部分解决的非常烦人的问题。多汁的一款适合您的专业人士。

我已经建立了一个基本的登录系统。像这样：

登录.php：

1.  第 1 行：`session_start();`
2.  检查`if($_SESSION['logged_in'] == true) header("Location: /controls.php);`，如果他们已经输入了他们的详细信息。
3.  如果他们尚未输入，用户输入凭据（如果有效）：`$_SESSION['logged_in'] = true;`
4.  检查数据库凭据并将会话设置为 true 后，使用 PHP 重定向`header("Location: /controls.php);`

请记住，会话现已设置。

控制.php

1.  第 1 行：`session_start();`
2.  第 2 行：`if($_SESSION['logged_in'] != true) {header("Location: /index.php");}`

立即我被带到 index.php 只有在 Chrome 和 Firefox 中。

另外，我有`accounttools.php`，再次需要会话。一旦我尝试访问`accounttools.php`，会话就会被破坏/取消设置，并且任何尝试加载都会`accounttools.php`导致标题重定向到我的 /index.php 页面，再次仅在 Firefox 和 CHROME 中。

我还得补充一点。如果我返回`login.php`并重新登录，一切正常，会话设置正确。这是基于浏览器的错误吗？PHP 在任何数据发送到浏览器之前执行，那么如果 PHP 在到达用户时已经执行，那么这些浏览器到底有什么不同的行为呢？

登录文件：

```
// Login.php
<?php session_start();

if($_SESSION['logged_in'] == true)
{
    header("Location: /controls.php");
    exit();
}

if($_POST['username_login'] && $_POST['password_login'])
{
    // Do necessary database work to check credentials (edited out here).
    // ...    
    // Check re-hashed pass against database hash (password checking)
    if($make_password == $current_user[0]['password'])
    {
        // If this is OK login is a success.
        $_SESSION['logged_in'] = true;
        header("Location: /controls.php");
        exit();
    }
}
?> 
```

控制文件：

```
// controls.php
// This page instantly redirects to index.php
<?php session_start();

// Go to homepage if logging out.
if($_POST['logging_out']) 
{
    unset($_SESSION['logged_in']); 
    header("Location: /index.php"); 
    exit();
} 
// No access unless logged in.
// This session seems to no longer exist at this point. Why??
if($_SESSION['logged_in'] != true)
{
    header("Location: /index.php");
    exit();
}
?> 
```

编辑：我发现了别的东西：如果我登录并手动输入`$_SESSION`-restricted 页面的 URL，`$_SESSION`则不会被破坏。

header() 重定向的某些部分导致 th`$_SESSION`在 Google 和 Mozilla 中被取消设置/销毁。

我也疯狂地在谷歌上搜索，显然这是 PHP 编码人员中的一个常见问题。一定有人知道这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:19:44.153

我发现您在成功登录后重定向的方式存在问题：这是一个 javascript 重定向，因此它只会在所有 php 完成执行并将结果发送到浏览器后才会发生。这意味着重定向后的代码也会被执行。

我建议直到最后才向浏览器输出任何内容并使用：

```
header("Location: /...");
exit(); 
```

在您想要重定向的任何地方组合，以便您确定在重定向代码之后您的会话不会发生任何事情。

为避免`headers already sent`出现问题，我还建议摆脱以下内容：

```
?>
<?php 
```

就像第一行一样`login.php`。

# android - Android：库项目应用程序-> liba-> libb中的资源不可用

> ID：11443570
> 
> 赞同：2
> 
> 时间：2012-07-12T00:37:30.703
> 
> 标签：android, eclipse, adt, library-project

全部，

我正在尝试在我的应用程序中使用现有的开源项目（我们将其称为 A）作为库。项目 A 还带有自己的库项目 (B)。项目 A 编译并运行得很好；但是，当我尝试在我的应用程序中使用 A 时（我检查了 A 中的“Is Library”并将 A 添加到我的应用程序中）我收到几个错误“没有找到属性 'X'in 包中的资源标识符......”这些B 中存在特定属性。我什至检查了它们是否被添加到 A 中的 R 中，事实上，它们是。

我的问题：为什么我的应用程序看不到这些资源存在？

我到处搜索，发现只有一种情况像我一样：

[Android 库没有将其资源拉到其他项目](https://stackoverflow.com/questions/10424199/android-library-not-pulling-its-resources-through-to-other-projects)

但我没有看到我的任何资源都被命名为相同的。

我正在使用带有 ADT v20.0 的 Eclipse

我很感激任何帮助！

编辑：如果有帮助，我正在尝试使用的开源应用程序是 AnySoftKeyboard (ASK)。我也尝试过创建一个新项目并将 ASK 添加为库 - 没有骰子。

EDIT2：使 ASK 成为库的一部分需要将几个 switch 语句转换为 if-else 语句，因为 R Id 未声明为库的最终版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:46:57.357

这些错误显然是由于在您转换为库的 AnySoftKeyboard 项目中使用了自定义属性。我发现[这个答案中提到的](https://stackoverflow.com/a/9884136/1023092)ADT（在 Rev 17 上）最近添加了一个解决方案。

按照指示，我尝试替换所有实例

> “ [http://schemas.android.com/apk/res/com.menny.android.anysoftkeyboard](http://schemas.android.com/apk/res/com.menny.android.anysoftkeyboard) ”

和

> “ [http://schemas.android.com/apk/res-auto](http://schemas.android.com/apk/res-auto) ”

在新转换的库项目中，并且能够构建和运行包含该项目的应用程序（虽然没有真正测试任何功能）。

希望这可以帮助。

# asp.net - 在设计自定义 HTTP 404 错误页面时，如何通知搜索引擎 404 状态？

> ID：11443576
> 
> 赞同：0
> 
> 时间：2012-07-12T00:38:31.273
> 
> 标签：asp.net

搜索引擎需要知道文件不再存在才能更新索引。

我尝试的一种方法是包含`Response.StatusCode = 404`在自定义 404 错误页面的`Page_Load`事件中，但结果是无法加载自定义页面。

在`web.config`文件的`<customErrors>`元素中，有一个`statusCode`属性，这是向搜索引擎通知 404 状态的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:58:57.747

我建议您将它添加到 web.config 中`<customErrors><error....`，因为它很容易在文件中维护，然后在每个页面中进行内联编码。如果需要更改，一个大赢家就是您只需更新配置文件并发布配置而不是整个解决方案

# .htaccess - 根据是否使用 QueryStrings 使用不同的 RewriteRule？

> ID：11443578
> 
> 赞同：0
> 
> 时间：2012-07-12T00:38:52.020
> 
> 标签：.htaccess, mod-rewrite

在我的博客上（我正在重新设计以更有效地显示内容），我有一个 RewriteRule 设置来处理从

`http://new.kn3rdmeister.com/blog.php`

至

`http://new.kn3rdmeister.com/category/blog/`（它也向后工作）

在 .htaccess 中：

```
RewriteEngine On
RewriteRule ^blog\.php$ /category/blog/ [R=301,L]
RewriteRule ^category/blog/?$ blog.php [L]
... 
```

这很管用。现在我想做的是重写

`/blog.php?pagenum=x`

至

`/category/blog/page/x/`

在 .htaccess 中：

```
...
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ blog\.php\?pagenum=([0-9]*)\ HTTP/
RewriteRule ^blog\.php$ /category/blog/page/%2/ [R=301,L]
RewriteRule ^category/blog/page/([0-9]+)/$ blog.php [L] 
```

我所能做的就是第一条规则，它最终起作用了，但它显示的是 QueryStrings 而不是 oh-so-clean 页面目录，就像这样......

`/blog.php?pagenum=2`例如等于

`/category/blog/?pagenum=2`

我希望我的问题已经足够清楚了：/如果您需要任何澄清，请询问，我会更新我的帖子。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:46:20.630

在 RewriteRule 中的目标末尾添加一个问号：

```
RewriteRule ^blog\.php$ /category/blog/page/%2/? [R=301,L] 
```

# jquery - jQuery删除航点

> ID：11443583
> 
> 赞同：3
> 
> 时间：2012-07-12T00:39:46.513
> 
> 标签：jquery

我有一个元素在到达#news div 时向下滑动，并在向上滑动时通过#news 时向上滑动。

```
$(document).ready(function() {
$('#news').waypoint(function(event, direction) {
    if (direction === 'down') {
    $('#menu_list').animate({top: 10},{queue: false, duration:500}) ;}
    else {
    $('#menu_list').animate({top: 50},{queue: false, duration:500}) ;}
       }, {
    offset: '6'  
  });
}); 
```

我想知道如何应用“.waypoint('remove')”？为了使它在离开 div 时向上滑动，甚至进一步向下滑动站点并进入其他 div。通过这种方式，我可以制作类似的动画 - 滑入/停在位置/滑出。

如果航点不是执行此操作的正确插件，我将非常感谢一些指示如何实现这种效果。

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T00:44:08.780

```
$('#news').waypoint('destroy') — Unregister waypoints and unbind all handlers.
$('#news').waypoint('remove') — Unregister waypoints but leave handlers intact. 
```

您是否阅读过 Waypoint 完整文档？

源：http: [//imakewebthings.com/jquery-waypoints/#documentation](http://imakewebthings.com/jquery-waypoints/#documentation)

# hadoop - Hadoop 任务副作用文件示例

> ID：11443585
> 
> 赞同：0
> 
> 时间：2012-07-12T00:39:55.697
> 
> 标签：hadoop, mapreduce

我可以获得如何使用任务副作用文件的示例吗？

```
public class Map0t extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable >{
 public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {

         IntWritable one = new IntWritable(1);
        StringTokenizer tokenizer = new StringTokenizer(value.toString(), ",");

        String x;
        String y;
        String z;

        x = tokenizer.nextToken();
        y = tokenizer.nextToken();
        z = tokenizer.nextToken();

        output.collect(new Text(x+" "+z), one);

      }

} 
```

我想将 new Text(x+" "+y), new Text(z) 作为上述 Mapper 函数中的副作用写入 HDFS 中的不同文件夹。

我搜索但找不到任何关于如何使用任务副作用文件的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:04:34.420

不是最佳方法，但我能想到的一种方法是

> 在映射器的 setup() 中打开 HDFS 中的文件，写入文件，然后在映射器的 clean() 中关闭文件。一种方法是确保在映射器的 setup() 中使用唯一的文件名。

# ubuntu - 奇怪的 opencv.pc (pkg-config) 文件

> ID：11443590
> 
> 赞同：0
> 
> 时间：2012-07-12T00:41:05.447
> 
> 标签：ubuntu, opencv

我在 Ubuntu 12.04 64 位上构建了 opencv。如果我发出以下命令，我可以链接到 opencv 库：

```
g++ `pkg-config opencv --cflags` my_code.cpp  -o my_code `pkg-config opencv --libs` 
```

但是，如果我发出以下命令：

```
gcc -g -O2 -W -Wall -Wno-unused -Wno-multichar  -o main main.o -lcxcore -lcv -lhighgui -lcvaux 
```

我得到：

```
/usr/bin/ld: cannot find -lcxcore
/usr/bin/ld: cannot find -lcv
/usr/bin/ld: cannot find -lhighgui
/usr/bin/ld: cannot find -lcvaux
collect2: ld returned 1 exit status 
```

要解决我发出的问题：

```
pkg-config --libs opencv 
```

并得到：

/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so

我想这解释了这个问题，但我不明白为什么 opencv.pc 不包含库位置的简写“-llib”格式，如通常的 .pc 文件。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:33:28.453

您需要包含 pkg-config 为您提供的库头文件的位置

```
pkg-config opencv --cflags 
```

对我来说，输出是

> -I/usr/local/include/opencv -I/usr/local/include

如果你添加它，它应该可以正常工作

# cocoa - 在 NSAlert 上打开新窗口

> ID：11443596
> 
> 赞同：0
> 
> 时间：2012-07-12T00:41:39.330
> 
> 标签：cocoa, nsalert

我正在使用 NSAlert 要求用户启用辅助设备的辅助功能。是否有可能有一个不关闭 NSAlert 的按钮，我可以用它来打开 UniversalAccess prefpane ？

如果没有，我想我必须自己创建那个窗口。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:06:44.600

通常在按下任何按钮时都会关闭警报。在 Mac OS X 10.5 或更高版本中，您可以使用`setAccessoryView:`将自定义视图插入到警报中，该视图可能包含执行您想要的任何操作的按钮。

但是请注意，您无法指定附件视图的位置。它可能有一个按钮，但该按钮将显示在窗口中间，而不是与其他按钮一起显示在底部。（如果您为自定义按钮选择了不同的按钮样式，例如方形斜角，它可能看起来不那么不合适。）要完全控制布局，您需要制作自己的警报窗口。

# android - Android Building Toolchain 找不到/缺少 STL 头目录

> ID：11443599
> 
> 赞同：0
> 
> 时间：2012-07-12T00:42:14.217
> 
> 标签：android, c++, compiler-construction, toolchain, android-ndk

我已经手动构建了 Android NDK 工具链。一切正常，除了当我使用编译器时，它找不到基本的 STL 东西，比如 . 所以它不能编译包含 STL 的代码，因为它默认不知道在哪里寻找头文件。在使用自定义或预构建工具链之前，我从未遇到过这个问题。但是，如果我手动添加包含目录，例如

```
 -I$(NDK_TOOLCHAIN)/arm-linux-androideabi/include/c++/4.6/ 
```

然后它工作得很好。手动添加每个重要的目录是一件很痛苦的事情（不止这个）。在这个过程中肯定有什么东西坏了。

这些是我构建它所遵循的步骤：

```
 sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl

 Download NDK

 Untar NDK to [SOME_LOCATION], using /opt/ndk/

 Set NDK_ROOT=/opt/ndk/

  ./build/tools/download-toolchain-sources.sh src/

 Download MPC 0.9

 Move mpc tar to ./src/mpc/

 ./build/tools/build-gcc.sh --gmp-version=4.3.2 --mpc-version=0.9 --mpfr-version=2.4.2 --binutils-version=2.21 $(pwd)/src $(pwd) arm-linux-androideabi-4.6

 ./build/tools/build-gcc.sh --gmp-version=4.3.2 --mpc-version=0.9 --mpfr-version=2.4.2 --binutils-version=2.21 $(pwd)/src $(pwd) x86-4.6

 ./build/tools/build-gcc.sh --gmp-version=4.3.2 --mpc-version=0.9 --mpfr-version=2.4.2 --binutils-version=2.21 $(pwd)/src $(pwd) mipsel-linux-android-4.6 
```

所有 STL 文件都存在于正确的位置。如果我在使用这些自定义构建的工具链作为参考后构建独立工具链，则每个版本的所有头文件和编译库。

== 更新

强制 gcc 吐出它的包含搜索路径：

```
 echo "#include <bogus.h> int main(){}" > t.c; /opt/android-9_arm/bin/arm-linux-androideabi-gcc -v t.c; rm t.c 
```

这包含一个搜索路径，包括：

```
 /opt/android-9_arm/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/include 
```

在那个位置确实是以下 ./cxx/4.6/STL_HEADERS

将输出与 google 的 NDK 构建进行比较确实在严重的地方有所不同。现在真正的问题是如何保证我的自定义 GCC 构建指向适当的 G++ STL 标头位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:54:38.543

原来是 make-standalone-toolchain.sh 中的一个错误。解决方法是：

```
mv $NDK_TOOLCHAIN/arm-linux-androideabi/include/c++/4.6 $NDK_TOOLCHAIN/arm-linux-androideabi/include/c++/4.6.x-google 
```

这在很大程度上解决了它。然而，既然 ndkr8b 已经发布了官方的 GCC 4.6 支持，这个 bug 仍然存在（截至 2012 年 7 月 25 日）。有关与独立工具链相关的一些错误的更多详细信息 (http://code.google.com/p/android/issues/detail?id=35279)。

# python - 使用 tor 和 python 抓取 Google Scholar

> ID：11443600
> 
> 赞同：12
> 
> 时间：2012-07-12T00:42:15.307
> 
> 标签：python, web-scraping, tor, google-scholar

我正在做一个项目来分析期刊文章是如何被引用的。我有一个很大的期刊文章名称文件。我打算把它们传给 Google Scholar，看看每个有多少引用。

这是我遵循的策略：

1.  [使用来自http://www.icir.org/christian/scholar.html](http://www.icir.org/christian/scholar.html)的“scholar.py” 。这是一个预先编写的 python 脚本，用于搜索谷歌学者并以 CSV 格式返回第一次命中的信息（包括引用次数）

2.  谷歌学者在一定数量的搜索后阻止你（我有大约 3000 篇文章标题要查询）。我发现大多数人使用 Tor（[如何在 Python 中通过 Tor 发出 urllib2 请求？](https://stackoverflow.com/questions/1096379/tor-with-python)和[防止自定义网络爬虫被阻止](https://stackoverflow.com/questions/7644036/prevent-custom-web-crawler-from-being-blocked)）来解决这个问题。Tor 是一种每隔几分钟就会给你一个随机 IP 地址的服务。

我有学者.py 和 tor 都成功设置和工作。我对 python 或库 urllib2 不是很熟悉，想知道需要对 Academic.py 进行哪些修改，以便通过 Tor 路由查询。

如果存在大规模谷歌学者查询，我也愿意接受更简单（并且可能相当不同）的方法的建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:07:57.430

对我来说，使用 TOR 的最佳方式是[设置一个本地代理，例如 polipo](http://www.pps.univ-paris-diderot.fr/~jch/software/polipo/tor.html)。我喜欢克隆 repo 并在本地编译：

```
git clone https://github.com/jech/polipo.git
cd polipo
make all
make install 
```

但是你可以使用你的包管理器（`brew install polipo`在 Mac 上，`apt install polipo`在 Ubuntu 上）。然后编写一个简单的配置文件：

```
echo socksParentProxy=localhost:9050 > ~/.polipo
echo diskCacheRoot='""' >> ~/.polipo
echo disableLocalInterface=true >> ~/.polipo 
```

然后运行它：

```
polipo 
```

请参阅[urllib 文档了解如何使用代理](https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen)。像许多 unix 应用程序一样，urllib 将尊重环境变量`http_proxy`：

```
export http_proxy="http://localhost:8123"
export https_proxy="http://localhost:8123" 
```

我喜欢使用 requests 库，一个更好的 urllib 包装器。如果您还没有：

```
pip install requests 
```

如果 urllib 正在使用 Tor，则以下单行应该打印 True：

```
python -c "import requests; print('Congratulations' in requests.get('http://check.torproject.org/').text)" 
```

最后一件事，请注意：Tor 网络并不是在 Internet 上做傻事的免费通行证，因为即使使用它，您也不应该假设您是完全匿名的。

# maven - 来自 EclipseLink 的“不是已知实体”错误

> ID：11443602
> 
> 赞同：2
> 
> 时间：2012-07-12T00:42:30.633
> 
> 标签：maven, jpa, weblogic, eclipselink

**使用EclipseLink** (2.0.2)时，我在**Weblogic** (10.3.3)中看到了一个奇怪的行为。

 **这就是我所做的。我使用 Maven 编译一个使用**JPA** (1.0.2) 的项目。在这个项目中，**模块“A”**依赖于**模块“B”**。“B”包含一堆实体（*javax.persistence.Entity*）。但是“ **persistence.xml** ”在“A”中，其中“B”的所有实体都已注册。“B”作为**可选包**部署，“A”通过其 MANIFEST 引用它。

部署成功，但是当我运行应用程序并尝试保留实体时，我在“A”中收到上述错误。

以下操作之一将解决它：

*   重启 weblogic 服务器
*   更新模块 A 的 POM 文件并显式添加对模块 B 的依赖项。最初此依赖项不存在，因为模块 A 中的类接受“对象”并将其传递给 EntityManager（不是显式实体类类型）。添加此依赖项无论如何都不会更改 JAR 文件的清单。它只更新 JAR 文件的 META-INF 文件夹中的“maven”目录。我认为 weblogic 甚至都不关心这个文件夹。

我下载了 EclipseLinks 的源代码并调试了应用程序。似乎出现问题是因为“ ***org.eclipse.persistence.internal.sessions.AbstractSession ”类中的“******描述符***”集合字段没有实体的描述符，因此它不能将其识别为实体。

 *我认为重新启动服务器会更新该缓存。但是第二种解决方案呢？为什么这行得通？JAR 文件的 META-INF 目录中的“maven”目录是否为 weblogic 所知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:49:28.837

听起来您的部署正确地部署了 B 模块并不是谎言。

您是使用容器管理的持久性单元还是应用程序管理？如果您使用的是应用程序管理的持久性单元，则必须在重新部署之前关闭 EntityManagerFactory，否则带有旧类的旧工厂将保留。***

# regex - 需要正则表达式语法建议

> ID：11443604
> 
> 赞同：0
> 
> 时间：2012-07-12T00:42:53.560
> 
> 标签：regex, sed

有人可以告诉我我在这里可能做错了什么：

```
sed 's/&.*?;\s//' 
```

我正在尝试删除除“此文本”之外的所有内容

```
lt;td rowspan="2" width="80" valign="top" &gt;&#xD;
&lt;img src="http://foo.bar/image.jpeg" /&gt;&#xD;
&lt;/td&gt;&#xD;
&lt;td&gt;&#xD;
THIS TEXT&#xD;
&#xD; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:49:47.657

如果您搜索的字符串是恒定的，您可以使用一个简单的`grep`：

```
grep -o "THIS TEXT" file.txt 
```

否则，您可以使用`sed`和一些模式匹配，尝试：

```
sed -e 's/&.*;$//' -e '/^$/d' -e '/^lt;td/d' file.txt 
```

您可能需要包含多个表达式，例如：`-e '/^lt;td/d'`删除数据文件中的其他不需要的行，如果它包含它们。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:46:17.967

你是这个意思吗？

```
bash:/home/tene>cat file
lt;td rowspan="2" width="80" valign="top" &gt;&#xD;
&lt;img src="http://foo.bar/image.jpeg" /&gt;&#xD;
&lt;/td&gt;&#xD;
&lt;td&gt;&#xD;
THIS TEXT&#xD;
&#xD;

bash:/home/tene>sed -e '/^[&l]/d' -e 's/&#xD;$//g' file
THIS TEXT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:55:45.287

您的正则表达式`&.*?;\s`搜索：

*   一个人`&`
*   任意多个任意字符`.*`
*   **一个问号`?`**
*   一个分号`;`
*   **一个空格字符`\s`**

但是示例文本中没有问号，也没有空格`;`。

请注意，`?`默认情况下不会将其解释为重复运算符。如果需要，您需要使用`sed -r`（或`sed -E`在 Mac 上）启用“扩展”正则表达式。这是向后兼容的事情。

# sql - 优化查询

> ID：11443606
> 
> 赞同：0
> 
> 时间：2012-07-12T00:43:02.440
> 
> 标签：sql, oracle

我已经在网上搜索试图解决这个问题，但没有运气。这也是我关于 SO 的第一个 SQL 问题 :-)

我只是一个简单的查询的简单人 - 请允许我演示

```
select asy.aim_student_id, ast.aim_test  
from aim_student_test ast
  join aim_student_absent asa on (asa.aps_yr = ast.aps_yr and asa.aim_test = ast.aim_test and asa.aim_id = ast.aim_id)
  --join aim_student_qst asq on (asq.aps_yr = ast.aps_yr and asq.aim_test = ast.aim_test and asq.aim_id = ast.aim_id)
  join aim_student_yr asy on (asy.aps_yr = ast.aps_yr and asy.aim_student_yr_id = ast.aim_student_yr_id)
    where ast.aps_yr = '2012' 
```

如您所见 - 加入目标学生 qst 已被注释掉。

aim_student_qst 是一个表格，列出了学生对所有问题的回答。所以一个学生在这个表中会有大约 50 个案例。为了测试是什么减慢了我的查询，我只是注释掉了 aim_student_qst 的加入，果然我的查询加速了。

我假设甲骨文正在做的事情是——哦，你想要那些表，让我们把它们放到一张大表中，然后寻找我们想要的。这就是为什么我的查询速度较慢，尽管没有对目标学生 qst 做任何其他事情。它是否正确？

例如，出于我的目的，我只需要为每个学生选择一个问题，而不是全部 50 个问题。有没有办法做到这一点？

谢谢！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:23:35.737

那么可能是这个？

```
select asy.aim_student_id, ast.aim_test  
from aim_student_test ast
  join aim_student_absent asa on (asa.aps_yr = ast.aps_yr and asa.aim_test = ast.aim_test and asa.aim_id = ast.aim_id)
  join aim_student_qst asq on (asq.aps_yr = ast.aps_yr and asq.aim_test = ast.aim_test and asq.aim_id = ast.aim_id)
  join aim_student_yr asy on (asy.aps_yr = ast.aps_yr and asy.aim_student_yr_id = ast.aim_student_yr_id)
where ast.aps_yr = '2012'
  and asq.question_number = 1 -- column name assumed
  and asq.question_answer is NULL -- column name and value assumed
; 
```

# sql - 文本板正则表达式：用 5 个新行替换一组 3 个字符

> ID：11443613
> 
> 赞同：0
> 
> 时间：2012-07-12T00:43:47.653
> 
> 标签：sql, regex, textpad, i2b2

我想用这个工具美化 SQL 代码。在此工具接受之前，我想使用“替换”功能并选择 TextPad 中的“<*>”（不包括双引号）替换每个实例正则表达式。我怎样才能做到这一点？

![在此处输入图像描述](../Images/b61a411d5b77dafddeb32b2a4c9d40a3.png)

[http://www.dpriver.com/pp/sqlformat.htm](http://www.dpriver.com/pp/sqlformat.htm)

```
insert into i2b2demodata.QUERY_GLOBAL_TEMP ( patient_num , panel_count) select patient_num ,1 as panel_count from ( select /*+ index(observation_fact fact_cnpt_pat_enct_idx) */ patient_num from i2b2demodata.observation_fact where concept_cd IN (select concept_cd from i2b2demodata.concept_dimension where concept_path LIKE '\i2b2\Reports\%') AND ( valtype_cd = 'B' AND contains(observation_blob,'Arthritis') > 0 ) group by patient_num ) t <*> insert into i2b2demodata.DX ( patient_num ) select * from ( select distinct patient_num from i2b2demodata.QUERY_GLOBAL_TEMP where panel_count = 1 ) q <*> insert into i2b2demodata.MASTER_QUERY_GLOBAL_TEMP(master_id, patient_num, level_no) select 'masterid:22', patient_num, 0 from i2b2demodata.QUERY_GLOBAL_TEMP where patient_num IN ( select patient_num from i2b2demodata.QUERY_GLOBAL_TEMP where panel_count = 1 ) <*> delete i2b2demodata.DX <*> delete i2b2demodata.QUERY_GLOBAL_TEMP <*> insert into i2b2demodata.QUERY_GLOBAL_TEMP ( patient_num , panel_count) select patient_num ,1 as panel_count from ( select /*+ index(observation_fact fact_cnpt_pat_enct_idx) */ patient_num from i2b2demodata.observation_fact where concept_cd IN (select concept_cd from i2b2demodata.concept_dimension where concept_path LIKE '\i2b2\Diagnoses\Digestive system (520-579)\%') group by patient_num ) t <*> update i2b2demodata.QUERY_GLOBAL_TEMP set panel_count = 2 where i2b2demodata.QUERY_GLOBAL_TEMP.panel_count = 1 <*> update i2b2demodata.QUERY_GLOBAL_TEMP set panel_count = -1 where i2b2demodata.QUERY_GLOBAL_TEMP.panel_count = 2 and exists ( select 1 as panel_count from ( select /*+ index(observation_fact fact_cnpt_pat_enct_idx) */ patient_num from i2b2demodata.observation_fact where concept_cd IN (select concept_cd from i2b2demodata.concept_dimension where concept_path LIKE '\i2b2\Diagnoses\Circulatory system (390-459)\%') group by patient_num having count( distinct patient_num || '|' || encounter_num || '|' || provider_id || '|' || instance_num || '|' ||concept_cd || '|' ||cast(start_date as varchar(50) ) ) >= 3 ) t where i2b2demodata.QUERY_GLOBAL_TEMP.patient_num = t.patient_num group by patient_num ) <*> insert into i2b2demodata.DX ( patient_num ) select * from ( select distinct patient_num from i2b2demodata.QUERY_GLOBAL_TEMP where panel_count = 2 ) q <*> delete i2b2demodata.MASTER_QUERY_GLOBAL_TEMP where master_id = 'masterid:22' and level_no >= 1 <*> <*> insert into i2b2demodata.MASTER_QUERY_GLOBAL_TEMP(master_id, patient_num, level_no) select 'masterid:21', patient_num, 0 from i2b2demodata.QUERY_GLOBAL_TEMP where patient_num IN ( select patient_num from i2b2demodata.QUERY_GLOBAL_TEMP where panel_count = 2 ) <*> delete i2b2demodata.DX <*> delete i2b2demodata.QUERY_GLOBAL_TEMP <*> insert into i2b2demodata.QUERY_GLOBAL_TEMP ( patient_num , panel_count) select patient_num ,1 as panel_count from ( select patient_num from i2b2demodata.MASTER_QUERY_GLOBAL_TEMP where master_id = 'masterid:22' group by patient_num ) t <*> update i2b2demodata.QUERY_GLOBAL_TEMP set panel_count =2 where exists ( select 1 as panel_count from ( select patient_num from i2b2demodata.MASTER_QUERY_GLOBAL_TEMP where master_id = 'masterid:21' group by patient_num ) t where i2b2demodata.QUERY_GLOBAL_TEMP.panel_count = 1 and i2b2demodata.QUERY_GLOBAL_TEMP.patient_num = t.patient_num ) <*> insert into i2b2demodata.DX ( patient_num ) select * from ( select distinct patient_num from i2b2demodata.QUERY_GLOBAL_TEMP where panel_count = 2 ) q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:32:40.190

匹配 <*> 的正则表达式是`<\*>`.

# c++ - c++ 函数返回新对象与将函数结果分配给调用它的对象之间的区别

> ID：11443617
> 
> 赞同：1
> 
> 时间：2012-07-12T00:44:23.687
> 
> 标签：c++

这个问题有点尴尬，但希望我的例子更有意义。

作为参考，我正在编写的程序有一个供用户输入信息的窗口，当用户单击保存时，该窗口会创建一个 Person 对象，使用 populatePerson() 将窗口中的信息填入其中，然后调用Person 类中的函数将信息保存到文件中。

我努力寻找一种方法让窗口类调用 Person 函数，因为我会收到关于无法调用非静态函数的错误，但后来意识到我需要第二个“空”Person 对象调用 savePerson() 函数。我也做了一个类似的设置来从文件中加载一个人。

前任：

```
void Person::savePerson(Person p)
{
    //open file
    //write p to file
    //return
}

Person Person::loadFile(String filename)
{
    //open file
    //make new person
    //put file contents into person
    //return person
} 
```

为了调用这些，我需要做这样的事情

```
Person NewPerson = populatePerson();

Person Save;
Save.savePerson(NewPerson);    

Person Load;
NewPerson = Load.loadPerson("file the person was saved to"); 
```

我认为这有点尴尬，因为除了在他们的类中调用函数之外，我没有将 Save and Load Persons 用于其他任何事情。我关心的对象是NewPerson。

然后我发现我可以使用 *this 来执行 savePerson() 和 loadPerson() 中的操作，而不是传入一个 Person 或返回一个 Person。

前任：

```
void Person::savePerson()
{
    //open file
    //write *this to file

}

void Person::loadPerson(String filename)
{
    //open file
    //read file and put it in *this

} 
```

然后像这样称呼他们

```
Person NewPerson = populatePerson();

NewPerson.savePerson();
NewPerson.loadPerson("file the person was saved to"); 
```

第二种解决方案对我来说似乎更有意义，这两种方式似乎都可以编译和运行。问题基本上是，这些解决方案中的一种是否比另一种更好？有哪一个是不好的吗？任何一种方式都会导致意想不到的问题吗？

另外，首先将保存和加载函数设为静态会更好吗？这样窗口就可以调用它们而不需要 Person 的实例来调用它们？

（抱歉伪代码，实际代码主要是 Qt，这可能会引起混淆，但这似乎更像是一个一般的 C++ 问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:22:45.930

相信你的直觉；第二个是两者中的佼佼者。当您只对一个 Person 感兴趣时，必须创建 3 个 Person 而不是 1 个，这是一个死的赠品。savePerson 显然在编写时非常有意义（“保存我”），并且 loadPerson 运行紧随其后（“从文件中填充我”），尽管如果您为 Person 创建了一个构造函数来加载文件，您可以避免不得不要么在调用 loadPerson 之前未初始化 Person，要么浪费时间初始化它只是为了使用 loadPerson 覆盖它。

# nsis - NSIS：如何在左下角添加自定义按钮并处理它的点击？

> ID：11443620
> 
> 赞同：1
> 
> 时间：2012-07-12T00:44:47.830
> 
> 标签：nsis

我尝试了 ButtonEvent 插件，但是当我运行已编译的示例时，它因内存访问错误而失败。也许它可以通过 Windows API 或其他方式与系统插件有关？谁能展示它是如何做到的？

**UPD：出现错误是因为我尝试在 Unicode NSIS 上使用非 unicode ButtonEvent。现在示例编译并执行正常，但是当我单击 TryMe 按钮时，没有调用回调函数并且没有任何反应。如何确定是什么问题？任何人都可以编译 ButtonEventMUI.nsi 并单击 TryMe 按钮吗？我下载了最新的 ButtonEvent 版本。使用 NSIS 2.46 Unicode**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:29:16.380

系统插件不能这样做，因为它不能子类化窗口。

ButtonEvent 插件对我来说很好用（NSIS 2.46）：

```
Name BtnTest
Outfile test.exe
Installdir "$temp"
RequestExecutionLevel user
BrandingText " " ;Button covers this text
!include nsDialogs.nsh ;For WS_*

Function .onGuiInit
; You are supposed to use ChangeUI (or MUI_UI) and a modified ui file to add new buttons but this example adds the button at run-time...
GetDlgItem $0 $hwndparent 2 ; Find cancel button
System::Call *(i,i,i,i)i.r1
System::Call 'USER32::GetWindowRect(ir0,ir1)'
System::Call *$1(i.r2,i.r3,i.r4,i.r5)
IntOp $5 $5 - $3 ;height
IntOp $4 $4 - $2 ;width
System::Call 'USER32::ScreenToClient(i$hwndparent,ir1)'
System::Call *$1(i.r2,i.r3)
System::Free $1
IntOp $2 $2 + $4 ;x
IntOp $2 $2 + 8  ;x+padding
System::Call 'USER32::CreateWindowEx(i0,t "Button",t "Click Me",i${WS_CHILD}|${WS_VISIBLE}|${WS_TABSTOP},ir2,ir3,ir4,ir5,i $hwndparent,i 0x666,i0,i0)i.r0'
SendMessage $hwndparent ${WM_GETFONT} 0 0 $1
SendMessage $0 ${WM_SETFONT} $1 1

GetFunctionAddress $0 onmybtnclick
ButtonEvent::AddEventHandler 0x666 $0
FunctionEnd

Function onmybtnclick
MessageBox mb_ok "You clicked me!"
FunctionEnd

Page Directory
Page Instfiles

Section
SectionEnd 
```

![例子](../Images/dba0c19942f7b30ffa5bcb09283d3b0a.png)

# c++ - C++ if 语句中的优先级

> ID：11443621
> 
> 赞同：0
> 
> 时间：2012-07-12T00:44:53.440
> 
> 标签：c++, standards, operator-precedence

> **可能重复：**
> [在 C++ 中是否保证短路评估，就像在 Java 中一样？](https://stackoverflow.com/questions/2108467/is-short-circuit-evaluation-guaranteed-in-c-as-it-is-in-java)
> [C++如何处理&&？（短路评估）](https://stackoverflow.com/questions/5211961/how-does-c-handle-short-circuit-evaluation)

我有以下结构定义和一个特定的用例：

```
struct foo
{
   bool boo;
};

int main()
{
  foo* f = 0;
   .
   .
   .
  if ((f) && (f->boo)) // <--- point of contention
   return 0
  else
   return 1;
} 
```

标准是否保证上面 if 语句中的第一组大括号总是在第二组之前被评估？

如果它不是最好的重写上面的代码位是什么？

目前我有以下混乱：

```
if (f)
{
   if (f->boo)
      return 0;
   else
      return 1;
}
else
   return 1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T00:47:04.997

是的，这是有保证的——括号是不必要的。

`&&`和都是`||`短路运算符；他们评估左操作数，然后仅在需要确定结果时才评估右操作数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T00:47:48.703

这可能是风格问题，但你可以说：

```
return (f && f->boo); 
```

...或者更明确地说：

```
return ((f && f->boo) ? 1 : 0); 
```

# java - 二维数组的 NullPointerException

> ID：11443623
> 
> 赞同：0
> 
> 时间：2012-07-12T00:45:13.490
> 
> 标签：java, arrays, nullpointerexception, 2d

```
map = new BufferedImage[width][height];
  for(int i=0;i<height;i++){
      for(int j=0;j<width;j++){    
  if(charMap[j][i] == Mountains.indentifier) {      
    if ( j+1 < width && j-1 >= 0){
        if(charMap[j-1][i] != Mountains.indentifier && charMap[j+1][i] != Mountains.indentifier) {            
            map[j][i]= tileGrid[1][10];
         }
    }    
    else {
        map[j][i]= tileGrid[8][10];
    }
   }
} 
```

这是我用来尝试通过检查单元格周围的每个图块来检查二维数组的代码，但我似乎得到了一个空指针异常我想知道是否有人可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:03:12.543

您只分配了外部数组。

您需要分配每个内部数组。

所以：

```
map = new BufferedImage[width][height];
for (int i = 0; i < width; i++)
{
    map[i] = new BufferedImage[height];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:12:54.920

我怀疑您是从`charMap[j][i] == Mountains.indentifier`线路中获取 NullPointerException 的。

确保按照 Geoff 的建议为 charMap 和 map 初始化内部数组。

# php - php mysql总和两张表

> ID：11443624
> 
> 赞同：0
> 
> 时间：2012-07-12T00:45:21.323
> 
> 标签：php, mysql, sum

当有人选择一个服务号时，它会弹出并只给出一条记录。我希望它从两张桌子中得到总计..

```
<?php

   $qry = mysql_query ("SELECT SUM(fruit) AS total FROM fruitinventory WHERE `fruitcolor` LIKE '%{$_POST['select']}%'");

$row2 = mysql_fetch_assoc($qry);

    echo $row['total'];

?>

<?php

   $qry = mysql_query ("SELECT SUM(fruitsmart) AS total FROM fruitrotten WHERE `fruitcolor` LIKE '%{$_POST['select']}%'");

$row = mysql_fetch_assoc($qry);

    echo $row['total'];

?> 
```

然后

我也希望同时显示两行的总数。

```
<?php 

$total return = $row+$row2 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:03:39.670

假设你想为你的代码保留同样的结构，你可以像这样显示一个总数（注意：MySQLi（i = 改进）函数应该被使用，因为 MySQL 函数已被[弃用](http://news.php.net/php.internals/53799)）：

```
<?php

$qry = mysqli_query ("SELECT SUM(fruit) AS total FROM fruitinventory WHERE `fruitcolor` LIKE '%{$_POST['select']}%'");
$row2 = mysqli_fetch_assoc($qry);
echo $row2['total'];

$qry = mysqli_query ("SELECT SUM(fruitsmart) AS total FROM fruitrotten WHERE `fruitcolor` LIKE '%{$_POST['select']}%'");
$row = mysqli_fetch_assoc($qry);
echo $row['total'];

$total = $row['total'] + $row2['total'];
echo $total;

?> 
```

既然它会出现，我建议您考虑使用[PDO](http://www.php.net/manual/en/book.pdo.php)而不是 mysql_ （或至少将[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)包裹在您的变量周围）来保护您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:27:47.290

您可以将两个数据库调用合并到一个查询中，并使用结果的列作为变量来回显：

```
<?php
    $input = mysql_real_escape_string($_POST['select']);
    $sql = "
        SELECT
            (
                SELECT SUM(fruit) 
                FROM fruitinventory 
                WHERE fruitcolor LIKE '%$input%'
            ) AS totalfruit,
            (
                SELECT SUM(fruitsmart) 
                FROM fruitrotten 
                WHERE fruitcolor LIKE '%$input%'
            ) AS totalfruitsmart";
    $qry = mysql_query($sql);
    $row = mysql_fetch_assoc($qry);

    echo $row['totalfruit'] . '<br />';
    echo $row['totalfruitsmart'] . '<br />';
    echo $row['totalfruit'] + $row['totalfruitsmart'];
?> 
```

请至少使用它`mysql_real_escape_string()`来帮助防止 SQL 注入攻击，这是您的原始代码广泛开放的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:31:14.633

您可以尝试仅使用 SQL 进行求和。如下所示：

```
$qry = mysql_query ("

    SELECT (

        ( SELECT SUM(fruit) AS total FROM fruitinventory WHERE `fruitcolor` LIKE '%{$_POST['select']}%' ) + 

        ( SELECT SUM(fruitsmart) AS total FROM fruitrotten WHERE `fruitcolor` LIKE '%{$_POST['select']}% )

    ) AS total") ;

$row = mysql_fetch_assoc($qry);

echo $row['total']; 
```

# search - Lucene.NET 和外部站点

> ID：11443629
> 
> 赞同：0
> 
> 时间：2012-07-12T00:46:00.963
> 
> 标签：search, indexing, lucene.net

我们已经建立了一个使用 Lucene.NET 进行搜索的网站。我们最近整合了另一个网站，从用户的角度来看，这两个网站似乎只是一个网站！（我们共享母版等）

我们遇到的问题是两个网站托管在不同的位置。因此，当 Lucene.NET 抓取第一个网站时，它不会选择第二个网站的内容。我们想从第二个网站提取内容并将其放入为第一个网站构建的同一索引文件中。

如何让 Lucene.NET 也抓取外部站点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:58:45.810

如果您对第二个系统具有文件系统访问权限，则可以通过提供路径进行索引。如果没有，您将需要编写一个爬虫，您可以使用 HttpWebRequest 从一些基本的东西开始，或者通过使用[一些](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8#hl=en&output=search&sclient=psy-ab&q=.net%20crawler%20web&oq=&gs_l=&pbx=1&fp=4fc1c984211b8d1b&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1600&bih=743)使用链接等递归爬取站点的工具来获得更高级的东西。

# java - Java catch/finally 块完全跳过？

> ID：11443631
> 
> 赞同：0
> 
> 时间：2012-07-12T00:46:05.940
> 
> 标签：java, try-catch, finally

我们有一个 ThreadPoolExecutor-back 任务执行模块。有些任务显然在应用程序代码中完成了，但是工作代码以某种方式跳过了所有的 try/catch/finally 并继续执行下一个任务，导致前一个任务错过了重要的状态报告代码。

就像在这个例子中一样，257832:5 被线程 8 拾取，但这个线程最终只是启动了另一个任务。

```
2012-07-11 15:53:39,389 信息 [pool-1-thread-6]：任务 (258861:5)：开始。
2012-07-11 15:53:39,389 信息 [pool-1-thread-6]: 运行的任务 ### 由应用程序逻辑记录
2012-07-11 15:54:18,186 信息 [pool-1-thread-6]：任务 (258868:5)：开始。###突然捡到一个！
2012-07-11 15:54:18,186 信息 [pool-1-thread-6]: 运行的任务 ### 由应用程序逻辑记录
2012-07-11 15:54:18,445 信息 [pool-1-thread-6]：任务 (258868:5)：从 Task.doWork 返回。
2012-07-11 15:54:18,446 信息 [pool-1-thread-6]：任务 (258868:5)：完成。
2012-07-11 15:54:18,487 信息 [pool-1-thread-6]：任务 (258868:5)：通知状态结果：200。
2012-07-11 15:54:18,487 信息 [pool-1-thread-6]：任务 (258868:5)：已完成

```

ThreadPoolExecutor 的 Runnable 看起来不错。看起来像

```
public void run() {
    log.info(String.format("Task (%s:%s) : Starting.", wfId, taskId));
    try {
        Object result = task.doWork(...); // call the application codes
        log.info(String.format("Task (%s:%s) : returned from Task.doWork.", wfId, taskId));
        status = "DONE";
    } catch (Throwable t) {
        log.error("Error executing task: " + taskId + " - " + className);
    } finally {
        log.info(String.format("Task (%s:%s) : finalizing.", wfId, taskId));
        // notify status to a server
        log.info(String.format("Task (%s:%s) : Finished", wfId, taskId));
    }
}
    // the task framework looks like
    // Use a queue size larger than numThreads, since the ThreadPoolExecutor#getActiveCount() call only returns an approximate count
    this.executor = new ThreadPoolExecutor(numThreads, numThreads, 60, TimeUnit.SECONDS, new ArrayBlockingQueue<Runnable>(numThreads * 2));
    executor.execute(new TaskRunnable(...)); 
```

笔记：

1.  我们捕获了最终的 Throwable 但两个任务之间没有记录异常
2.  没有迹象表明 exit() 被调用或程序重新启动
3.  第一个跳过所有日志行，无论是在调用应用程序代码之后的那个还是在 catch 和 finally 块中的那个，并跳过状态报告代码
4.  这只会以低概率随机发生；但是由于执行的任务量很大，还是让我们很头疼。

就好像线程池执行器只是神奇地驱逐了正在运行的可运行对象（否则它需要一个 InterruptedException，它会被捕获为 Throwable；Java 线程不会以非合作方式停止，除非在关闭/退出期间）并跳过所有块。我检查了 ThreeadPoolExecutor javadoc，没有什么会导致这样的事件发生。

可能发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:43:53.893

没有出现 finally 块的日志消息的一种可能解释是，在 finally 块执行时引发了异常：

*   如果`log`当时为空，您将获得 NPE。（如果`log`声明为`final`您可以将其作为可能的原因消除。）

*   根据对象是什么，您可能会在`wfId`or`taskId`对象的`toString()`方法中获得未经检查的异常。

*   `Logger`物体可能被破坏...

* * *

您也可能出于某种原因查看了错误的源代码。

* * *

另一个理论上的可能性是 Android 平台实现`Thread.destroy()`了实际做某事，并且在线程上调用了它。如果这个 DEPRECATED 方法是根据原始 javadoc 实现的，你会发现`finally`块没有被执行。也可以从 JVM 外部执行等效的操作。但如果这是发生的事情，所有的赌注都没有了！！

# c# - 从函数返回值

> ID：11443632
> 
> 赞同：2
> 
> 时间：2012-07-12T00:46:15.180
> 
> 标签：c#, exception-handling

我有一个请求一个人的函数，返回这个人的 ID。但是，如果方法检测到错误，我想返回错误（带有描述？）。

所以，假设我的功能是：

```
 public int GetPersonId(string username)
 {
     //Logic
     return personId;
 } 
```

在逻辑中，我调用一个 proc，并返回一个 ID。但是，如果没有返回任何结果，我可以返回 -1，并在调用代码中处理它——但觉得这样不好。

创建一个异常并尝试/捕获它会更好，还是什么？我确定我读过一次，为业务类型规则抛出异常并不是一个好习惯。

处理这个问题的最佳方法是什么。

此外，proc 可能会返回其他状态，例如“人存在，但被标记为已删除”、“不存在这样的人”等。我的意思是有多个“异常”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:51:17.700

我能想到2个选项

1.  在函数内抛出异常

    `throw new Exception("Some Message");`

2.  更改返回类型。而不是 int 返回 int?。如果有错误返回`null`else 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:51:58.510

是的，您可以通过继承 Exception 类来创建自己的 Exception，或者也可以这样 `throw new Exception("Error in Person.GetPersonId");`做

如果这是您想用消息报告的唯一地方，请使用我上面显示的内联代码，但如果您经常需要它并希望为不同类型自定义异常，那么请创建您自己的异常作为良好实践

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:54:15.610

我认为您需要非常清楚地区分您的功能中哪些是错误，哪些不是。如果没有找到结果是一个错误（只有你可以定义它是否是），然后抛出一个异常。如果不是错误（因为可能是输出），则返回代码或任何您想要的。调用代码应该管理它。但是不要使用异常处理来处理程序的逻辑。这是不正确的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T00:55:57.270

1.如果您想返回一些消息，您可以将返回类型更改为字符串。您将在 Calling proc 中处理字符串类型。2.你可以用消息抛出异常，比如

```
throw new  Exception("what's wrong") 
```

你可以使用 try/catch 来捕捉它！

# python - 如何使自定义 Number 类可转换为 int 和 float？

> ID：11443633
> 
> 赞同：3
> 
> 时间：2012-07-12T00:46:30.940
> 
> 标签：python, python-3.x, numbers

我在 python 3 中实现了一个数字类。我需要做什么才能做到

```
float(mynumber) 
```

工作正常吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T00:48:47.840

从文档中，[模拟数字类型](http://docs.python.org/py3k/reference/datamodel.html#emulating-numeric-types)：

```
object.__complex__(self) 
object.__int__(self) 
object.__long__(self) 
object.__float__(self) 

Called to implement the built-in functions complex(), int(), long(), and float(). 
Should return a value of the appropriate type. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T00:48:32.473

实施`__float__`或`__int__`或任何你想要的......

还值得注意的是，使用`abc`or`numbers`模块可能对最终用户有用......

# android - admob 使我的应用程序崩溃

> ID：11443636
> 
> 赞同：-1
> 
> 时间：2012-07-12T00:46:54.317
> 
> 标签：android, admob

谁能告诉我这段代码有什么问题？

```
package com.lightcone.simpledialer;

public class SimpleDialer extends Activity implements OnClickListener {

private int entries = 6;
private String phoneNum[];
private String buttonLabels[];

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    phoneNum = new String[entries];
    buttonLabels = new String[entries];

    // Populate the data arrays
    populateArrays();

    // Set up buttons and attach click listeners

    Button button1 = (Button)findViewById(R.id.button1);
    button1.setText(buttonLabels[0]);
    button1.setOnClickListener(this);

    Button button2 = (Button)findViewById(R.id.button2);
    button2.setText(buttonLabels[1]);
    button2.setOnClickListener(this);

    Button button3 = (Button)findViewById(R.id.button3);
    button3.setText(buttonLabels[2]);
    button3.setOnClickListener(this);

    Button button4 = (Button)findViewById(R.id.button4);
    button4.setText(buttonLabels[3]);
    button4.setOnClickListener(this);

    Button button5 = (Button)findViewById(R.id.button5);
    button5.setText(buttonLabels[4]);
    button5.setOnClickListener(this);

    Button button6 = (Button)findViewById(R.id.button6);
    button6.setText(buttonLabels[5]);
    button6.setOnClickListener(this);
}

// Launch the phone dialer

public void launchDialer(String number){
    String numberToDial = "tel:"+number;
     startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(numberToDial)));
}

/** Method to populate the data arrays */

public void populateArrays(){

    /** In a practical application the arrays phoneNum and buttonLabels could be 
     * updated dynamically from the Web in this method.  For this project we just 
     * hard-wire in some values to illustrate how to use such data, once obtained,
     * to make phone calls.*/

    phoneNum[0] = "000-000-0001";
    phoneNum[1] = "000-000-0002";
    phoneNum[2] = "000-000-0003";
    phoneNum[3] = "000-000-0004";
    phoneNum[4] = "000-000-0005";
    phoneNum[5] = "000-000-0006";

    buttonLabels[0] = "Jane D. Arc";
    buttonLabels[1] = "John Doe";
    buttonLabels[2] = "Jane Doe";
    buttonLabels[3] = "Abe Linking";
    buttonLabels[4] = "Mona Liza";
    buttonLabels[5] = "Issac Nuton";
}

/** Process button events */

@Override
public void onClick(View v) {
    switch (v.getId()) {

        case R.id.button1:
            launchDialer(phoneNum[0]);
            break;

        case R.id.button2:
            launchDialer(phoneNum[1]);
            break;

        case R.id.button3:
            launchDialer(phoneNum[2]);
            break;

        case R.id.button4:
            launchDialer(phoneNum[3]);
            break;

        case R.id.button5:
            launchDialer(phoneNum[4]);
            break;

        case R.id.button6:
            launchDialer(phoneNum[5]);
            break;

    }
}

    public void onStart(){
             super.onStart();

             AdView layout = (AdView)this.findViewById(R.id.adView);

             // Initiate a generic request to load it with an ad
             AdRequest adRequest = new AdRequest();
             adRequest.setTesting(true);

             layout.loadAd(adRequest); 
} 
```

}

当我脱下这个

```
public void onStart(){
    super.onStart();

    AdView layout = (AdView)this.findViewById(R.id.adView);

    // Initiate a generic request to load it with an ad
    AdRequest adRequest = new AdRequest();
    adRequest.setTesting(true);

    layout.loadAd(adRequest); 
} 
```

该应用程序启动得很好。谢谢

这是目录

```
 07-12 03:27:41.485: D/AndroidRuntime(10744): Shutting down VM
07-12 03:27:41.485: W/dalvikvm(10744): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
07-12 03:27:41.525: E/AndroidRuntime(10744): FATAL EXCEPTION: main
07-12 03:27:41.525: E/AndroidRuntime(10744): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.lightcone.simpledialer/com.lightcone.simpledialer.adMain}: java.lang.ClassNotFoundException: com.lightcone.simpledialer.adMain in loader dalvik.system.PathClassLoader[/data/app/com.lightcone.simpledialer-2.apk]
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1581)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.os.Looper.loop(Looper.java:123)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at java.lang.reflect.Method.invokeNative(Native Method)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at java.lang.reflect.Method.invoke(Method.java:507)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at dalvik.system.NativeStart.main(Native Method)
07-12 03:27:41.525: E/AndroidRuntime(10744): Caused by: java.lang.ClassNotFoundException: com.lightcone.simpledialer.adMain in loader dalvik.system.PathClassLoader[/data/app/com.lightcone.simpledialer-2.apk]
07-12 03:27:41.525: E/AndroidRuntime(10744):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-12 03:27:41.525: E/AndroidRuntime(10744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
07-12 03:27:41.525: E/AndroidRuntime(10744):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:49:23.907

您有 ClassNotFoundException，我认为这是因为清单中缺少活动声明。此外，在 setcontentview 之后将 onStart 中的代码移动到 onCreate。

# iis-7 - Nginx 反向代理 SSL / 缩小

> ID：11443638
> 
> 赞同：5
> 
> 时间：2012-07-12T00:47:01.557
> 
> 标签：iis-7, nginx, minify, reverse-proxy

我正在尝试使用 NginX 作为一些 IIS 服务器的反向代理。目标是让 NginX 从 IIS / Apache 服务器缓存静态项目，如 CSS / JS / 图像。我还试图让 NginX 使用其 perl 模块自动缩小 js / css 文件。

我在这里找到了一个用于缩小的示例脚本：

[http://petermolnar.eu/linux-tech-coding/nginx-perl-minify-css-js/](http://petermolnar.eu/linux-tech-coding/nginx-perl-minify-css-js/)

使用脚本一切正常，除了反向代理中断。

问题：

1.  我正在努力完成的事情是否可能？我希望 NginX 在将它们保存到缓存之前先缩小脚本。
2.  nginX 可以自动设置正确的过期标头，以便尽可能长时间缓存静态项目，并且仅在更改查询字符串时替换（jquery.js?timestamp=march-2012）
3.  NginX 可以在发送资源之前将其 GZIP。
4.  如果 NGinx 无法连接到后端服务器，它可以转发请求或提供“停机维护页面”。

任何帮助将不胜感激。

到目前为止，这是我的站点启用/默认值。

```
 server {

    location / {

        proxy_pass             http://mywebsite.com;
        proxy_set_header       Host $host;
        proxy_cache            STATIC;
        proxy_cache_valid      200  1d;
        proxy_cache_use_stale  error timeout invalid_header updating
                              http_500 http_502 http_503 http_504;
    }

    location @minify {
                    perl Minify::minify_handler;
            }

            location ~ \.css$ {
                    try_files $uri.min.css @minify;
            }

            location /*.js {
                 expires 30d;
            }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T11:52:42.673

Nginx 是反向代理的理想解决方案，也是 Unix 方式“做一件事，做好”。所以我建议你将内容服务和缩小过程分开，而不是使用第三方插件一次做很多事情。

最佳实践是在进行生产部署之前在本地系统上执行 minify&obfuscate 阶段，这说起来容易做起来也不难，请参阅[google](https://developers.google.com/speed/articles/compressing-javascript)压缩静态资产的方式。一旦你准备好使用资产，我们就可以设置 nginx 配置。

答案：

1.  在将其部署到生产环境之前使用 minify&obfuscate

2.  您可以通过正则表达式（目录名或文件扩展名）查找资产

    位置 ~ ^/(assets|images|javascripts|stylesheets|swfs|system)/ { gzip_static on; 最大过期；add_header 缓存控制公共；add_header Last-Modified ""; add_header ETag ""; 休息; }

3.  使用**gzip on**和**gzip_static on**来提供 gzip 文件，而不是每次请求到来时都压缩它。

4.  使用**try_files**检测维护页面是否存在

    try_files $uri /system/maintenance.html @mywebsite;

    if (-f $document_root/system/maintenance.html) { 返回 503; }

请参阅您的案例的完整 nginx 配置：

```
http {
  keepalive_timeout         70;

  gzip                      on;
  gzip_http_version         1.1;
  gzip_disable              "msie6";
  gzip_vary                 on;
  gzip_min_length           1100;
  gzip_buffers              64 8k;
  gzip_comp_level           3;
  gzip_proxied              any;
  gzip_types                text/plain text/css application/x-javascript text/xml application/xml;

  upstream mywebsite {
    server                  192.168.0.1 # change it with your setting
  }

  server {
    try_files               $uri /system/maintenance.html @mywebsite;

    location @mywebsite {
      proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header      X-Forwarded-Proto $scheme;
      proxy_set_header      Host $http_host;
      proxy_redirect        off;
      proxy_pass            http://mywebsite;
    }

    location ~ ^/(assets|images|javascripts|stylesheets|swfs|system)/ {
      gzip_static       on;
      expires           max;
      add_header        Cache-Control public;
      add_header        Last-Modified "";
      add_header        ETag "";
      break;
    }

    if (-f $document_root/system/maintenance.html) {
      return            503;
    }

    location @503 {
      error_page 405 = /system/maintenance.html;
      if (-f $document_root/system/maintenance.html) {
        rewrite         ^(.*)$ /system/maintenance.html break;
      }
      rewrite           ^(.*)$ /503.html break;
    }

  }

} 
```

# java - 为什么 LogCat 显示“返回的 sqlite：错误代码 = 1，msg = 没有这样的表：personalInfo”

> ID：11443640
> 
> 赞同：1
> 
> 时间：2012-07-12T00:47:08.260
> 
> 标签：java, android, sqlite, logcat

我不明白为什么没有这样的表，即使我已经通过编码创建了它。任何人都知道为什么并且可以帮助解决这个问题吗？

> 07-11 13:41:59.335：I/Database(288)：sqlite 返回：错误代码 = 1，msg = 没有这样的表：personalInfo
> 07-11 13:41:59.345：E/Database(288)：插入不喜欢时出错=瑜伽类型=婚礼日期=15/10/2017 喜欢=虾名=Joanne Liew

```
package main.page;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.provider.BaseColumns;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.Toast;

public class InfoDBAdapter
{
    public static final String  KEY_ROWID        = "_id";
    public static final String  KEY_NAME         = "name";
    public static final String  KEY_DATE         = "date";
    public static final String KEY_TYPE          = "type";
    public static final String KEY_LIKES         = "likes";
    public static final String KEY_DISLIKES      = "dislikes";
    private static final String TAG              = "InfoDBAdapter";

    private static final String DATABASE_NAME    = "AnniversaryDB";
    private static final String DATABASE_TABLE   = "personalInfo";
    private static final int    DATABASE_VERSION    = 2;

    private static final String DATABASE_CREATE  = "create table personalInfo (_id integer primary key autoincrement, "
                                                         + "name text not null, date text not null, type text not null, likes text not null, dislikes text not null);";

    private final Context       context;

    private DatabaseHelper      DBHelper;
    private SQLiteDatabase      db;

    public InfoDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }// end onCreate()

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS info");
            onCreate(db);
        }// end onUpgrade()

    }// end DatabaseHelper

    // ---opens the database---
    public InfoDBAdapter open() throws SQLException
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }// end open()

    // ---closes the database---
    public void close()
    {
        DBHelper.close();
    }// end close()

    // ---insert a contact into the database---
    public long insertContact(String name, String date, String type, String likes, String dislikes)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_DATE, date);
        initialValues.put(KEY_TYPE, type);
        initialValues.put(KEY_LIKES, likes);
        initialValues.put(KEY_DISLIKES, dislikes);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }// end insertContact()

    // ---deletes a particular contact---
    public boolean deleteContact(long rowId)
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }// end deleteContact()

    // ---retrieves all the contacts---
    public Cursor getAllContacts()
    {
        return db.query(DATABASE_TABLE, new String[] 
                { KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, null, null, null, null, null);
    }// end getAllContacts()

    // ---retrieves a particular contact---
    public Cursor getContact(long rowId) throws SQLException
    {
        Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {
                KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, KEY_ROWID + "=" + rowId,
                null, null, null, null, null);
        if (mCursor != null)
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }// end getContact()

    // ---updates a contact---
    public boolean updateContact(long rowId, String name, String date, String type, String likes, String dislikes)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_NAME, name);
        args.put(KEY_DATE, date);
        args.put(KEY_TYPE, type);
        args.put(KEY_LIKES, likes);
        args.put(KEY_DISLIKES, dislikes);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }// end updateContact()

}//end DBAdapter    

package main.page;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

public class PersonalInfo extends Activity
{
    Button btnSave, btnBack;
    EditText txtDate, txtType, txtLikes, txtDislikes;

    Spinner nameSpinner;
    ArrayAdapter<String>adapter;
    String names[] = {"Kanak Priya", "Joanne Liew", "Michelle Lam", "Natasha Akhbar", "Joan Tang", "Teo Kin Hua", "David Yeo"};

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.info);

        /*try{
        String destPath = "/data/data" + getPackageName() +
                "/databases/AnniversaryDB";
        File f = new File(destPath);
        if(!f.exists())
        {
            CopyDB(getBaseContext().getAssets().open("AnniversaryDB"),
                    new FileOutputStream(destPath));
        }
    }catch (FileNotFoundException e)
    {
        e.printStackTrace();
    }catch (IOException e)
    {
        e.printStackTrace();
    }*/

        InfoDBAdapter dbInfo = new InfoDBAdapter(this);

        dbInfo.open();
        long id = dbInfo.insertContact("Kanak Priya", "24/6/1990", "Birthday", "Painting", "Bungee jumping");
        id = dbInfo.insertContact("Joanne Liew", "15/8/1990", "Birthday", "Skating", "Yoga");
        dbInfo.close();

        /*//---get all contacts--
        dbInfo.open();
        Cursor c = dbInfo.getAllContacts();
        if (c.moveToFirst())
        {
            do
            {
                DisplayContact(c);
            } while (c.moveToNext());
        }
        dbInfo.close();*/

        Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
         adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_spinner_item, names);
         nameSpinner.setAdapter(adapter);

        Button btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
            EditText txtDate = (EditText) findViewById(R.id.txtDate);
            EditText txtType = (EditText) findViewById(R.id.txtType);
            EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
            EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);

            Toast.makeText(getBaseContext(),
                    "Your info is saved successfully!",
                    Toast.LENGTH_SHORT).show();

        }
    });

    Button btnBack = (Button) findViewById(R.id.btnMain);
    btnBack.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View arg0)
            {
                finish();

            }
        });

    }// end onCreate()

    /*public void CopyDB(InputStream inputStream,
    OutputStream outputStream)
    throws IOException 
{
        //---copy 1K bytes at a time---
        byte[] buffer = new byte[1024];
        int length;
        while ((length = inputStream.read(buffer)) > 0) 
        {
            outputStream.write(buffer, 0, length);
        }
        inputStream.close();
        outputStream.close();
}*/

    /*public void DisplayContact(Cursor c)
    {
        Toast.makeText(
                this,
                "id: " + c.getString(0) + "\n" + "Name: " + c.getString(1)
                        + "\n" + "Date:  " + c.getString(2) + "\n" + "Type: " + c.getString(3) + "\n" + "Likes: " + c.getString(4)
                       + "\n" + "Dislikes: " + c.getString(5),  Toast.LENGTH_LONG)
                .show();
    }*/

}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/InfoStyle"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/fName"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Full Name"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/nameSpinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <requestFocus />
    </Spinner>

    <TextView
        android:id="@+id/date"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Date"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/txtDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:ems="10"
            android:inputType="date" />

    </RelativeLayout>

    <TextView
        android:id="@+id/type"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Type"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/txtType"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <TextView
        android:id="@+id/bow"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="birthday or wedding"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/likes"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Likes"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <AutoCompleteTextView
        android:id="@+id/txtLikes"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="top" />

    <TextView
        android:id="@+id/dislikes"
        style="@style/InfoStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Dislikes"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <AutoCompleteTextView
        android:id="@+id/txtDislikes"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="top" />

    <Button
        android:id="@+id/btnSave"
        style="@style/main_menu"
        android:layout_width="109dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/red_btn_info"
        android:text="Save" />

    <Button
        android:id="@+id/btnMain"
        style="@style/main_menu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/red_btn_info"
        android:text="Main Menu" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:44:30.040

我不认为在 onCreate() 中创建表是正确的。所以表还没有创建。

您应该在 databasehelper 的不同函数中创建表： `/** * create database if it's not existed * * @throws IOException * */ public void createDataBase() {`

并确保在调用 createDataBase() 之前打开；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:43:05.200

构建目标 2.1 没有错误。我能够插入数据库，用`allContacts()`方法检查插入的信息。你提供了最新的代码吗？我没有看到插入接触的实现`View.onClickListener()`

# android - 当 BroadcastReceiver 运行时，它在哪个线程上运行，系统范围还是仅您的应用程序？

> ID：11443647
> 
> 赞同：4
> 
> 时间：2012-07-12T00:48:34.893
> 
> 标签：android, broadcastreceiver, ui-thread

我有一个使用广播接收器的警报，但我对线程有点困惑。我想让它在一个单独的线程上运行，这样它就不会导致对其他任何东西没有响应，但是在查看 Android 文档时，我仍然不知道是否只有一个主线程，或者每个应用程序都有它的自己的主线程。

例如，如果我的应用程序没有运行，那么如果每个应用程序都运行自己的主线程，那么在 BroadcastReceiver 中运行一个单独的线程又有什么意义，这意味着我不会影响用户的其他进程。由于我的没有运行，它没有做它的事情不会受到伤害。但相比之下，如果所有应用程序都有一个主线程，那么我需要将操作移至单独的线程。我希望我不是在问一个愚蠢的问题。我只是想彻底了解它。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T00:53:59.830

在浏览了 Android 开发者页面之后，我相信 BroadcastReceivers 在主 IO 线程上运行。

BroadcastReceivers 具有 goAsync 功能，它允许

> 将与之相关的工作转移到另一个线程的实现，以避免由于磁盘 IO 而导致主 UI 线程出现故障。

[资源](http://developer.android.com/reference/android/content/BroadcastReceiver.html#goAsync%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T10:58:03.200

android 的基本规则是，android 的所有组件都默认运行在主线程（UI 线程）中。

广播接收器是 android 的非常轻量级的组件，它必须在最多 10 秒内完成其功能（根据 android 文档）。

由于您想从接收器发出警报，我认为这不会对您的用户界面响应能力产生严重影响。所以实际上并不需要启动一个不同的线程来启动接收器的警报。

参考来自[开发者 android](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:55:35.407

广播接收器在它所针对的应用程序下注册到它当前正在运行的系统。具体来说，它不会停止主线程上的任何内容，因为它是异步完成的。这个特定的消息是广播的，然后通过 IntentFilter 传递给注册的任何进程以监听该广播（如果它受到保护，它将需要许可或不可用）。

然而; 好的做法是当你收到广播时，你启动一个 AsyncTask 来运行你想运行的任何过程。

您无需担心广播接收器的工作方式。

# xml - 使用 XQuery 和 Java 将元素插入 XML

> ID：11443649
> 
> 赞同：1
> 
> 时间：2012-07-12T00:48:46.727
> 
> 标签：xml, xquery, saxon, xquery-update

我需要使用 XQuery 插入表达式将新元素插入 XML 文档。我`saxon`用作java api。我是 XQuery 的新手，所以我不确定插入表达式的确切结构。任何人都可以帮助我吗？

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<breakfast_menu>
<food>
 <name>Belgian Waffles</name>
 <price>$5.95</price>
 <description>two of our famous Belgian Waffles with plenty of real maple syrup<description>
 <calories>650</calories>
</food>
 </breakfast_menu> 
```

我用于执行插入的java代码是

```
public void insert() throws XQException{
    String queryString =
            //"declare variable $docName as xs:string external;"  + sep +
            "variable $stores := doc("+"food.xml"+")/*;"+
            "insert node element food {"+
            "element name { \"brnj\" },"+
            "element price { \"$20\" },"+
            "element description { \"whatever\" },"+
            "element calories { 300 },"+
            "} into $stores;";

 XQPreparedExpression expr = conn.prepareExpression(queryString);
 expr.bindObject(new QName("stores"), "food.xml", null);
 XQResultSequence rs = expr.executeQuery();
} 
```

我得到的错误是查询字符串的语法。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:51:02.767

XQJ API 不支持 XQuery 更新。我相信一些供应商已经扩展了 XQJ 以支持更新，但是由于 XQJ 的许可条件对任何试图扩展 API 的人施加了死刑，所以我没有在 Saxon 这样做。（我也不知道有任何定义此类扩展的倡议——XQJ 从一开始就被律师勒死，原因我一直不明白。）

如果您使用 Saxon 作为您的 XQuery 更新引擎，我推荐使用 s9api 接口。这是一个例子：

```
 public void run() throws SaxonApiException {
        Processor proc = new Processor(true);
        XQueryCompiler comp = proc.newXQueryCompiler();
        comp.setUpdatingEnabled(true);
        XQueryExecutable exp = comp.compile(
                "for $p in doc('data/books.xml')//PRICE " +
                "return replace value of node $p with $p + 0.05");

        XQueryEvaluator eval = exp.load();
        eval.run();
        for (Iterator<XdmNode> iter = eval.getUpdatedDocuments(); iter.hasNext();) {
            XdmNode root = iter.next();
            URI rootUri = root.getDocumentURI();
            if (rootUri != null && rootUri.getScheme().equals("file")) {
                try {
                    Serializer out = proc.newSerializer(new FileOutputStream(new File(rootUri)));
                    out.setOutputProperty(Serializer.Property.METHOD, "xml");
                    out.setOutputProperty(Serializer.Property.INDENT, "yes");
                    out.setOutputProperty(Serializer.Property.OMIT_XML_DECLARATION, "yes");
                    System.err.println("Rewriting " + rootUri);
                    proc.writeXdmValue(root, out);
                } catch (FileNotFoundException e) {
                    System.err.println("Could not write to file " + rootUri);
                }
            } else {
                System.err.println("Updated document not rewritten: location unknown or not updatable");
            }
        }
    } 
```

大部分复杂性在于将更新的文档写回文件存储区——当然，这不一定是您想要做的。

请注意，XQuery 更新仅在 Saxon 的商业版本中受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:51:51.243

BaseX XQJ API 支持 XQuery Update Facility 1.0 和 3.0，它允许您更新 BaseX 数据库中的文档。

您还可以通过 MarkLogic XQJ API、Sedna XQJ API 和 eXist XQJ API 更新数据库内文档，但不能通过 XQuery 更新工具，因为这些实现（目前）还不支持 XQUF。

最后，对于您的问题，可能最重要的是，您可能会发现 Ryan Grimm 的“in-mem-update”库模块非常有用 [1]。我当然有，过去无数次。

你可以

*   将库模块与任何 XQuery 处理器 + XQJ 一起使用
*   对内存中的 XML 文档执行更新（无需写入磁盘）。
*   在单个 XQuery 中对文档执行“多个”更新操作
*   可以在 XQResultSequence 中返回更新后的内存中文档（非常适合您）。

另外，为了明确一点，XQJ 1.0 规范并没有禁止供应商支持 XQuery Update Facility。

规范摘录：

"18.6 支持更新和事务

尽管更新功能不是 [XQuery] 的一部分，但 XQJ 预计某些实现将包括一些专有扩展来处理更新功能。”

[1] [https://github.com/marklogic/commons/blob/master/memupdate/in-mem-update.xqy](https://github.com/marklogic/commons/blob/master/memupdate/in-mem-update.xqy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-06T00:41:47.607

现在是可能的。

上传查询：

```
public static void ejecutarConsultaU(String cadenaAConsultar) throws XQException {
    XQExpression consulta;
    consulta = xqc.createExpression();
    System.out.println("Inicio consulta \n");
    System.out.println(cadenaAConsultar);
    System.out.println("fin consulta \n");
    consulta.executeCommand(cadenaAConsultar);} 
```

插入/选择查询：

```
public static void ejecutarConsulta(String cadenaAConsultar) throws XQException {
    XQPreparedExpression consulta;
    consulta = xqc.prepareExpression(cadenaAConsultar);
    XQResultSequence resultado = consulta.executeQuery();
} 
```

# php - 从 Facebook PHP 获取 HTML 表单字段？

> ID：11443655
> 
> 赞同：0
> 
> 时间：2012-07-12T00:50:12.430
> 
> 标签：php, facebook

我有以下 HTML 表单：

```
<div id="online_form">
<form id="online_form_facebook" action="user_form.php" name="online_form_facebook">
<div class="field">
<div class="label">
<label for="user_email">Email:</label></div>
<div class="input">
<input id="user_email" name="user_email" readonly="readonly" type="text" value="<?php echo $user_profile['email'] ?>" /></div>
</div> 
```

请问如何使用来自 Facebook 的用户数据填充电子邮件字段（和其他字段）？

这是我必须从 Facebook 获取值的代码：

```
<?
ob_start();
require_once('library/facebook.php');

$app_id = "247151652061393";
$app_secret = "123456789012345567890";

// Init facebook api.
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => false,
));

//Facebook Authentication part
$user_id = $facebook->getUser();
    $loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'publish_stream,user_likes,offline_access,email,user_birthday'
        )
);

if (!$user_id) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
}

?> 
```

以上不起作用。请问如何填写这样的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:09:33.400

之后您需要进行 API 调用

```
try
{
    $param = array (
            'method'  => 'users.getinfo',
            'uids'    => $uId,
            'fields'  => 'name , first_name , last_name , birthday , sex , email , profile_update_time , pic , pic_square , current_location , username',
            'callback'=> ''
    );
    $result = $facebook->api($param);
    var_dump($result);
}
catch(Exception $o)
{
    var_dump($o);
    exit();
} 
```

# opencv - cvInitUndistortMap() 崩溃

> ID：11443657
> 
> 赞同：1
> 
> 时间：2012-07-12T00:50:41.990
> 
> 标签：opencv, computer-vision, calibration

我正在做 Bradski 的“Learning OpenCV”的示例 11-1。我的实现在尝试使用 cvInitUndistortMap() 时崩溃。

一个类似的帖子（[这里](https://stackoverflow.com/questions/2333868/cvundistort2-and-cvremap-crash "这里")）有关于 cvUndistort2() 和 cvRemap() 使用彩色图像的问题。我不确定这里的问题是否相关。

代码如下：

```
#include "stdafx.h"

#include "opencv\cv.h"
#include "opencv\highgui.h"
#include "stdio.h"
#include "stdlib.h"
#include "iostream"
#include "iomanip"

using namespace std;

int n_boards; 
const int board_dt = 20; // Wait 20 frames per chessboard view
int board_w;
int board_h;

int main(int argc, char* argv[])
{
    board_w = 7;
    board_h = 7;
    n_boards = 10;

    int board_n = board_w * board_h;
    CvSize board_sz = cvSize(board_w, board_h);
    CvCapture* capture = cvCreateCameraCapture(0);
    assert(capture);

    cvNamedWindow("Calibration");

    // Allocate storage
    CvMat* image_points      = cvCreateMat(n_boards*board_n,2,CV_32FC1);
    CvMat* object_points     = cvCreateMat(n_boards*board_n,3,CV_32FC1);
    CvMat* point_counts      = cvCreateMat(n_boards,1,CV_32SC1);
    CvMat* intrinsic_matrix  = cvCreateMat(3,3,CV_32FC1);
    CvMat* distortion_coeffs = cvCreateMat(5,1,CV_32FC1);

    CvPoint2D32f* corners = new CvPoint2D32f[ board_n ];
    int corner_count;
    int successes = 0;
    int step, frame = 0;

    IplImage *image = cvQueryFrame(capture);
    IplImage *gray_image = cvCreateImage(cvGetSize(image),8,1); // subpixel

    // Capture corner views loop until we've got n_boards
    // Successful captures (all corners on the board are found)
    //
    while(successes < n_boards) {
        // Skip every board_dt frames to allow user to move chessboard
        if(frame++ % board_dt == 0){
            //Find chessboard corners:
            int found = cvFindChessboardCorners(
                image, board_sz, corners, &corner_count,
                CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS
            );

            // Get subpixel accuracy on those corners
            cvCvtColor(image, gray_image, CV_BGR2GRAY);
            cvFindCornerSubPix(gray_image, corners, corner_count,
                cvSize(11,11),cvSize(-1,-1), cvTermCriteria(
                CV_TERMCRIT_EPS+CV_TERMCRIT_ITER,30,0.1));

            // Draw it
            cvDrawChessboardCorners(image, board_sz, corners, corner_count, found);
            cvShowImage("Calibration", image);

            // If we got a good board, add it to our data
            if(corner_count == board_n){
                step = successes*board_n;
                for( int i=step, j=0; j<board_n; ++i,++j){
                    CV_MAT_ELEM(*image_points, float, i, 0) = corners[j].x;
                    CV_MAT_ELEM(*image_points, float, i, 1) = corners[j].y;
                    CV_MAT_ELEM(*object_points, float, i, 0) = j/board_w;
                    CV_MAT_ELEM(*object_points, float, i, 1) = j%board_w;
                    CV_MAT_ELEM(*object_points, float, i, 2) = 0.0f;
                }
                CV_MAT_ELEM(*point_counts, int, successes, 0) = board_n;
                successes++;
            }

            //display how many successes we currently have
            printf("\nImages: %d / %d", successes, n_boards);

        } // end skip board_dt between chessboard capture

        // Handle pause/unpause and ESC
        int c = cvWaitKey(15);
        if(c=='p'){
            c = 0;
            while(c!='p' && c != 27){
                c = cvWaitKey(250);
            }
        }
        if(c==27)
            return 0;

        image = cvQueryFrame(capture); // get next image
    } // end collection while loop

    // Allocate matrices according to how many chessboards were found
    printf("\n\n\nAllocating matrices...");
    CvMat* object_points2 = cvCreateMat(successes*board_n,3,CV_32FC1);
    CvMat* image_points2  = cvCreateMat(successes*board_n,2,CV_32FC1);
    CvMat* point_counts2  = cvCreateMat(successes,1,CV_32SC1);
    printf("success!");

    // Transfer the points into the correct size matrices
    /*
    printf("\nTransfering points into the correct size matrices...");
    image_points->rows = object_points->rows = \
        successes*board_n;
    point_counts->rows = successes;
    printf("success!");
    */

    // The above two lines can alternatively be written in the following two loops
    printf("\nTransfering points into the correct size matrices...");
    for(int i=0; i<successes*board_n; ++i){
        CV_MAT_ELEM(*image_points2, float, i, 0)  = CV_MAT_ELEM(*image_points, float, i, 0);
        CV_MAT_ELEM(*image_points2, float, i, 1)  = CV_MAT_ELEM(*image_points, float, i, 1);
        CV_MAT_ELEM(*object_points2, float, i, 0) = CV_MAT_ELEM(*object_points, float, i, 0);
        CV_MAT_ELEM(*object_points2, float, i, 1) = CV_MAT_ELEM(*object_points, float, i, 1);
        CV_MAT_ELEM(*object_points2, float, i, 2) = CV_MAT_ELEM(*object_points, float, i, 2);
    }
    for(int i=0; i<successes; ++i){ //These are all the same number
        CV_MAT_ELEM(*point_counts2, int, i, 0) = CV_MAT_ELEM(*point_counts, int, i, 0);
    }
    printf("success!");

    // At this point, we have all the chessboard corners we need. 
    // Initialize the intrinsic matrix such that the two focal lengths
    //  have a ratio of 1.0
    //
    printf("\nInitializing intrinsic matrix...");
    CV_MAT_ELEM(*intrinsic_matrix, float, 0, 0) = 1.0f;
    CV_MAT_ELEM(*intrinsic_matrix, float, 1, 1) = 1.0f;
    printf("success!");

    // Calibrate the camera
    printf("\nCalibrating camera...");
    cvCalibrateCamera2(
        object_points2, image_points2,
        point_counts2, cvGetSize(image),
        intrinsic_matrix, distortion_coeffs,
        NULL, NULL, 0 //CV_CALIB_FIX_ASPECT_RATIO
    );
    printf("success!");

    // Save the intrinsics and distortions
    printf("\nSaving intrinsic matrix and distortion coefficients..."); 
    cvSave("Instrinsics.xml",intrinsic_matrix);
    cvSave("Distortion.xml",distortion_coeffs);
    printf("success!");

    // Release old objects
    printf("\nReleasing old objects...");
    cvReleaseMat(&object_points);
    cvReleaseMat(&image_points);
    cvReleaseMat(&point_counts);
    cvReleaseMat(&object_points2);
    cvReleaseMat(&image_points2);
    cvReleaseMat(&point_counts2);
    cvReleaseMat(&intrinsic_matrix);
    cvReleaseMat(&distortion_coeffs);
    printf("success!");

    // Example of loading the above matrices back in
    printf("\nLoading intrinsic matrix and distortion coefficients...");
    CvMat *intrinsic  = (CvMat*)cvLoad("Intrinsics.xml");
    CvMat *distortion = (CvMat*)cvLoad("Distortion.xml");
    printf("success!");

    // Build the undistort map that we will use for all subsequent frames
    printf("\nBuilding undistort map...");
    IplImage* mapx = cvCreateImage( cvGetSize(image), IPL_DEPTH_32F, 1);
    IplImage* mapy = cvCreateImage( cvGetSize(image), IPL_DEPTH_32F, 1);
    printf("\nCrash incoming...");
    cvInitUndistortMap( // PROBLEM APPEARS TO BE HERE
        intrinsic,
        distortion,
        mapx,
        mapy
    );
    printf("success!");

    // Just run the camera to the screen, now showing the raw
    //  and the undistorted image.
    printf("Displaying undistorted images...");
    cvNamedWindow("Undistort");
    while(image) {
        IplImage *image = cvQueryFrame(capture);

        IplImage *imageRemapped = cvCloneImage(image);
        cvShowImage("Calibration", image); // Show raw image
        cvRemap(image, imageRemapped, mapx, mapy);     // Undistort image

        cvShowImage("Undistort", imageRemapped);   // Show corrected image

        // Handle pause/unpause and ESC
        int c = cvWaitKey(15);
        if(c=='p'){
            c=0;
            while(c!='p' && c!=27){
                c = cvWaitKey(250);
            }
        }
        if(c==27){
            cvReleaseImage(&image);
            cvReleaseImage(&imageRemapped);
            break;}
        image = cvQueryFrame(capture);
    }
    printf("success!");

    return 0;
} 
```

其中 Intrinsics.xml 和 Distortion.xml 的校准结果如下：

Intrinsics.xml：

```
<?xml version="1.0"?>
<opencv_storage>
<Instrinsics type_id="opencv-matrix">
  <rows>3</rows>
  <cols>3</cols>
  <dt>f</dt>
  <data>
    6.58263672e+002 0\. 3.61270020e+002 0\. 6.50179993e+002
    2.34282578e+002 0\. 0\. 1.</data></Instrinsics>
</opencv_storage> 
```

失真.xml：

```
<?xml version="1.0"?>
<opencv_storage>
<Distortion type_id="opencv-matrix">
  <rows>5</rows>
  <cols>1</cols>
  <dt>f</dt>
  <data>
    -1.43585190e-001 1.10129333e+000 -3.21008405e-003 2.23791786e-002
    -3.69336128e+000</data></Distortion>
</opencv_storage> 
```

我正在使用 OpenCV 2.4、Windows7、Microsoft Visual C++ 2010 Express 和 MBP 网络摄像头。

# django - 如何在 Django 中向 ChoiceField 添加“类”？

> ID：11443658
> 
> 赞同：35
> 
> 时间：2012-07-12T00:50:44.690
> 
> 标签：django

`ChoiceField`我的Django 表单中有一个：

```
gender = forms.ChoiceField(label='', choices=GENDER) 
```

我想`class` `attr`在该字段中添加一个，以便我可以设置它的样式。像下面这样的东西通常有效：

```
forms.Field(label="Display name",help_text='',widget=forms.TextInput(attrs={'class': 'wideInput'})) 
```

但这不适用于 ChoiceField，我收到以下错误：

> TypeError：**init**（）得到了一个意外的关键字参数'attrs'

我`widget`应该使用什么来向我的 ChoiceField 添加一个类？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-12T00:58:59.660

我快速阅读了[https://docs.djangoproject.com/en/1.4/ref/forms/widgets/](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/)

它对小部件很感兴趣 - 显然它们是

> Django 对 HTML 输入元素的表示。小部件处理 HTML 的呈现

然后每个表单字段都绑定到一个小部件 - 阅读：

[https://docs.djangoproject.com/en/1.4/ref/forms/fields/#built-in-fields](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#built-in-fields)

对于 ChoiceField，defaultWidget 是“Select”（如上面的链接中所述）。好的，知道正确的小部件，添加我只需要的类：

```
widget=forms.Select(attrs={'class':'regDropDown'}) 
```

这样我的最后一行就变成了：

```
gender = ChoiceField(label='', choices=SEX, widget=forms.Select(attrs={'class':'regDropDown'})) 
```

嘘！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-19T20:59:18.937

ChoiceField 使用 forms.Select 小部件

```
forms.Select(attrs={"name": "select_0","class": "form-control"}) 
```

# regex - mIRC：$regsub 未在 \1 上评估 $asc

> ID：11443663
> 
> 赞同：0
> 
> 时间：2012-07-12T00:51:40.570
> 
> 标签：regex, ascii, mirc

我有以下代码。

```
on $*:text:/^(!|\.)bypass\b/Si:#:{
 set %bypass.answer $2-
 %bypass.n = $regsub(%bypass.answer,/(.)/g,$chr(38) $+ $chr(35) $+ $asc(\1) $+ $chr(59), %bypass.answer)
 msg $chan %bypass.answer
} 
```

基本上，我想`!bypass <string>`显示字符串的 HTML 字符，但是当我尝试`!bypass abc`它时， 如果我使用 just ，它会显示ascii 代码`&#92;&#92;&#92;`在哪里，但是当我把它放在里面时，它不起作用。`92``\``\1``&#a;&#b;&#c;``$asc( )`

我也试过`$asc( [ \1 ] )`了，没有好的结果。可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:12:23.130

我不知道问题的确切原因，但如果您使用`$regsubex`而不是`$regsub`.

```
on $*:text:/^(!|\.)bypass\b/Si:#:{
  var %answer $regsubex($2-,/(.)/g,$chr(38) $+ $chr(35) $+ $asc(\1) $+ $chr(59))
  msg $chan %answer
} 
```

# javascript - 奇怪的未定义变量

> ID：11443664
> 
> 赞同：0
> 
> 时间：2012-07-12T00:51:54.547
> 
> 标签：javascript, jquery, coffeescript

我有一个包含对象的多维数组，如果对象包含特定属性，我希望从数组中删除它们。

**咖啡脚本**

```
for dataColumn in allDataColumns
    for brentSpiner, i in dataColumn
        console.log i, brentSpiner.refreshRate
        #dataColumn.remove i if brentSpiner.refreshRate is -1 
```

`console.log`当下面的行被注释掉时，上述工作按预期工作

```
for dataColumn in allDataColumns
    for brentSpiner, i in dataColumn
        console.log i, brentSpiner.refreshRate
        dataColumn.remove i if brentSpiner.refreshRate is -1 
```

上面的错误是这样的：`brentSpiner is undefined console.log(i, brentSpiner.refreshRate);`在萤火虫中

第二行的存在究竟如何导致上一行中的变量未定义？

**渲染的 JAVASCRIPT**

失败

```
for (_i = 0, _len = allDataColumns.length; _i < _len; _i++) {
  dataColumn = allDataColumns[_i];
  for (i = _j = 0, _len1 = dataColumn.length; _j < _len1; i = ++_j) {
    brentSpiner = dataColumn[i];
    console.log(i, brentSpiner.refreshRate);
    if (brentSpiner.refreshRate === -1) {
      dataColumn.remove(i);
    }
  }
} 
```

作品

```
for (_i = 0, _len = allDataColumns.length; _i < _len; _i++) {
  dataColumn = allDataColumns[_i];
  for (i = _j = 0, _len1 = dataColumn.length; _j < _len1; i = ++_j) {
    brentSpiner = dataColumn[i];
    console.log(i, brentSpiner.refreshRate);
  }
} 
```

（旁注：.remove 已通过 Resig 添加到 Array 原型中）

**更新**

这是我的一个逻辑错误。查看批准的答案以了解原因。贝娄是我最终做的并且效果很好：

```
for dataColumn in allDataColumns
    i = 0
    len = dataColumn.length
    while i < len
        if dataColumn[i].refreshRate is -1
            dataColumn.remove i
            len--
        i++ 
```

渲染

```
for (_i = 0, _len = allDataColumns.length; _i < _len; _i++) {
  dataColumn = allDataColumns[_i];
  i = 0;
  len = dataColumn.length;
  while (i < len) {
    if (dataColumn[i].refreshRate === -1) {
      dataColumn.remove(i);
      len--;
    }
    i++;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:54:42.473

Coffeescript 将列表的长度“冻结”在`_len1`. 当您删除一个条目时，您将在内部循环中运行列表的末尾。

对我来说似乎是一个错误。（除非有一些语言特性你应该通知 Coffeescript 数组长度可能会改变。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:33:53.303

在被循环的列表中添加/删除元素是一个危险的操作，语言很难自动处理这个问题。如果你需要做这样的事情，你应该避免`for..in`循环并坚持`while`循环。这是我编写该代码的方式：

```
for dataColumn in allDataColumns
    i = 0
    while i < dataColumn.length
        brentSpiner = dataColumn[i]
        console.log i, brentSpiner.refreshRate
        if brentSpiner.refreshRate is -1
            dataColumn.remove i 
            i--
        i++ 
```

我还将逐步转换您的代码，以便我们可以看到我是如何到达那里的：

```
for dataColumn in allDataColumns
    for brentSpiner, i in dataColumn
        console.log i, brentSpiner.refreshRate
        dataColumn.remove i if brentSpiner.refreshRate is -1 
```

首先，我们需要将内部循环变成一个while循环。只要我们的计数器变量小于长度，我们就会循环，并在循环结束时增加计数器。为了保留语法，我们在循环中做的第一件事就是设置循环变量`brentSpiner`。

```
for dataColumn in allDataColumns
    i = 0
    while i < dataColumn.length
        brentSpiner = dataColumn[i]
        console.log i, brentSpiner.refreshRate
        dataColumn.remove i if brentSpiner.refreshRate is -1
        i++ 
```

现在，如果我们从列表中删除一个元素，我们就会遇到问题，因为下一个元素将被跳过。示例：列表是`[1,2,3]`, `i=0`。如果我们决定删除`i`，那么在 while 循环结束时，我们有`[2,3]`, `i=1`。我们要看的下一个项目是`3`，所以我们跳过了`2`。为了解决这个问题，我们每次删除当前计数器处或之前的项目时都会减少计数器。

```
for dataColumn in allDataColumns
    i = 0
    while i < dataColumn.length
        brentSpiner = dataColumn[i]
        console.log i, brentSpiner.refreshRate
        if brentSpiner.refreshRate is -1
            dataColumn.remove i 
            i--
        i++ 
```

如果我们还要添加元素，我们将不得不非常小心。我们可能必须增加计数器，这取决于元素被插入的位置以及是否应该在循环中处理它。

# git - git pull (rebase) 默认只从当前下游分支拉取

> ID：11443665
> 
> 赞同：4
> 
> 时间：2012-07-12T00:51:56.513
> 
> 标签：git

我在执行 git pull时使用的是我发现[的默认拉 --rebase的方法：](http://d.strelau.net/post/47338904/git-pull-rebase-by-default)

现在我想做'git pull' - 默认情况下只拉当前分支：[你如何让git总是从特定分支拉？](https://stackoverflow.com/questions/658885/how-do-you-get-git-to-always-pull-from-a-specific-branch). 但是，当 git 默认配置为 rebase 时，此答案不起作用。

有没有办法让 git pull 总是变基并只拉当前分支？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:14:10.603

考虑到[这个答案](https://stackoverflow.com/a/6314060/6309)提到：

如果你有，`branch.autosetuprebase = always`那么它还会添加：

```
rebase = true 
```

之后，您可以`git branch --set-upstream master origin/master`配置分支的 rebase 属性：

```
git config branch.master.rebase false 
```

# http - 如何解释“连接：保持活动，关闭”？

> ID：11443669
> 
> 赞同：39
> 
> 时间：2012-07-12T00:53:13.933
> 
> 标签：http, standards

据我了解，HTTP 连接可以是`keep-alive`或`close`.

我向服务器发送了一个 HTTP 请求：

```
GET /page1/ HTTP/1.1
Host: server.com
Connection: keep-alive 
```

它的回应是：

```
HTTP/1.1 200 OK
Connection: keep-alive, close 
```

从本质上讲，我相信服务器被窃听是因为类似的响应`keep-alive, close`是模棱两可的。

但是，作为**接收者**，我们应该如何**处理**这样的消息呢？我们应该将此标头值**解释**`keep-alive`为or`close`吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-03-03T09:44:29.050

**TL; DR：Chrome 将此响应标头解释为`keep-alive`并在 Firefox 关闭每个连接时保持永久连接。**

当我试图优化我的网站的页面加载时间时，我偶然发现了这个问题。

在引用的 RFC 中，我没有找到有关如何`Connection`正确处理标头中的多个条目的任何信息。在我看来，实现可以从两种可能性中进行选择：

1.  如果有多个条目，您可以选择最适合您需求的条目
2.  如果有`close`内部，可以在传输后关闭连接

所以，我需要找出答案。让我们做一些更深入的调查：

我注意到 Chrome 总是发送一个 HTTP/1.1 请求，`Connection: keep-alive`而我的 Apache 默认配置总是用一个`Connection: close`标头响应。所以我开始调查并使用 Wireshark 查看 TCP 段。

Chrome 必须获取 14 个元素来显示网站，其中大部分是静态的东西，如图像或 css 文件。它完成了 14 个 TCP 连接，并且花费了很多时间（大约 1.2 秒）。在每次请求图像（例如）之后，都会出现一个`FIN`标志设置为 1 的 TCP 段。

那么 Chrome 与 Firefox 呢？Chrome 似乎有一个服务器的最大并发连接数为 6。Firefox 具有更精细的配置，并区分持久性（最多 6 个，见 about:config）和非持久性（不同来源的最大数量差异很大）。但是等等...... Chrome 和 Firefox 都发送带有 的 HTTP/1.1 请求标头`Connection: keep-alive`，因此两者都应限制为 6（因为这是打开持久连接的请求）。

我决定尝试一个简单的技巧，并将以下几行添加到我`.htaccess`的 web 根文件夹中：

```
<ifModule mod_headers.c>
Header set Connection keep-alive
</ifModule> 
```

服务器现在响应：

```
Connection: keep-alive, close 
```

现在我再次查看了 TCP 段：现在从 Chrome 到我的服务器只有 9 个连接，并且只有 3 个`FIN`标志设置为 1。所以这个技巧似乎奏效了。但是为什么有这3个连接，在数据传输后关闭了连接？`X-Powered-By: PHP/5.4.11`正如 HTTP 标头所确认的，这些是 PHP 请求。

那么火狐呢？还有那14个请求！

如何解决这个问题并让 fcgi 进程也与 keep-alive 一起工作？

我在 httpd.conf 配置的虚拟主机部分添加了以下几行：

```
KeepAlive On
KeepAliveTimeout 5
MaxKeepAliveRequests 100 
```

并删除了添加到`.htaccess`. 现在服务器没有发送任何令人困惑的 - `Connection: keep-alive, close`，但只有`Connection: keep-alive`一切正常！

**结论：**

连接字段设置为的标头

```
HTTP/1.1 200 OK
Connection: keep-alive, close 
```

将被 Chrome 解释为`keep-alive`Firefox 似乎关闭了每个连接。这似乎取决于实际的实现。

因此，如果您愿意实现一个客户端来处理包含 的响应标头，`Connection: keep-alive, close`如果您需要多个请求，我建议您尝试使用 keep-alive。可能发生的最糟糕的事情：服务器将关闭连接，您需要再次连接（这正是您可能拥有的另一个选项！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T01:17:21.717

这意味着服务器不会做持久连接，并且会在这个请求之后关闭连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-02T15:15:58.437

答案在[RFC 7230 — 6.1。连接](https://www.rfc-editor.org/rfc/rfc7230#section-6.1)。它说：

> Connection 标头字段的值具有以下语法：
> 
> ```
>  Connection        = 1#connection-option
>  connection-option = token 
> ```

在 Internet RFC 用语中，这`1#connection-option`意味着至少一个且最多任意数量的`connection-option`. 这意味着可能有多个选项，接收者将在其中选择它喜欢的任何人。这不是模棱两可，这是一种选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-17T12:24:20.543

您正在使用`HTTP/1.1`并且正在指定`Connection: keep-alive`.

默认情况下`HTTP/1.1`，所有连接都是保持活动状态，并且`Connection: keep-alive`标头已被弃用，因此您不应该发送它。

`Connection: keep-alive`是在所谓的`HTTP/1.0+`日子里使用的一个小技巧。（`+`代表“使其工作所需的黑客行为”。）

在*HTTP：O'Reilly 的 Brian Totty、Marjorie Sayer、Sailu Reddy、Anshu Aggarwal、David Gourley 的权威指南中，*我们读到：

> Keep-alive 已被弃用，并且不再记录在当前的 HTTP/1.1 规范中。然而，浏览器和服务器仍然比较普遍地使用保持活动握手，因此 HTTP 实现者应该准备好与之互操作。

服务器可能正在“互操作”并指责您是多余的。

# ruby-on-rails - 在 Rails 中使用 Devise 后如何处理额外的登录

> ID：11443671
> 
> 赞同：0
> 
> 时间：2012-07-12T00:53:26.797
> 
> 标签：ruby-on-rails, authentication, devise

我正在使用设计进行身份验证的rails中构建一个应用程序。当您登录到应用程序时，它会将您重定向到主页。但是，如果您随后按回，您将再次看到登录表单。如果您随后登录到新用户帐户，您将再次被重定向到主页，但仍以原始用户身份登录。

相反，我希望在第二次登录时弹出一个错误，说明我们无法将用户登录到第二个帐户，因为他们已经登录。

从我的研究来看，我应该能够使用自定义控制器来做到这一点，有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:21:39.230

在您的控制器中，检测登录页面上是否已有登录用户。如果有，在登录后重定向到他们应该去的地方。这可以防止任何登录用户看到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:33:50.520

我最终解决的解决方案（这并没有给我完全想要的行为是在登录页面上禁用缓存。我从这篇文章中得到了指针：

[https://stackoverflow.com/a/748646/175830](https://stackoverflow.com/a/748646/175830)

# java - 如何在 Java 中解析字符串？

> ID：11443673
> 
> 赞同：1
> 
> 时间：2012-07-12T00:53:52.143
> 
> 标签：java, string

这是我的代码：

```
 import java.io.*;
   import java.util.*;

   public class Testing {
       public static void main(String[] args) {
           Scanner in = new Scanner(System.in );
           PrintStream out = System.out;

           String input = in .next();
           String output = "";
           char c = 0;
           int count = 0;
           int countInput = input.length();

           for (int i = 0; i < countInput; i++) {
               if (i == 0) {
                   c = input.charAt(i);
                   count++;
               } else {
                   if (c == input.charAt(i)) {
                       count++;
                   } else {
                       output = output + count + "" + c;
                       count = 1;
                       c = input.charAt(i);
                       out.println(output);
                   }
               }
           }
           output = output + count + "" + c;
           out.println(output);
       }
   } 
```

这个程序应该是这样工作的：

输入：

> java测试AAAAAnnnfffkk

输出：

> 5A3n3f2k

我需要以某种方式解决这个问题：

```
String input = in.next(); 
```

我认为`args`必须在某个地方使用，但我不确定在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:12:42.360

你的程序逻辑没问题。但是根据您想做的事情，您将不需要该`Scanner`课程。

如果您希望输入来自参数数组 : `main(String[] args)`，那么您需要将其分配给您的输入：

```
String input = args[0]; 
```

但是，嘿，如果您在不提供参数的情况下运行程序会怎样？它会抛出异常，因此您需要进行某种错误处理：

```
String input = "";
if (args.length > 0) {
    input = args[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:58:50.733

我们可以一步一步来。

首先，编写一个程序来获取输入，然后一次打印一个字符。

原因是您将需要读取输入，并一次处理一个字符，因此第一步是降低循环机制。

一旦你正确循环，我们就可以担心计算重复字母的逻辑。

完成后编辑您的帖子，我将在此处发布更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:05:41.353

在代码示例中：

```
//importing lib
import java.util.Scanner;

//file name "Hello.java"
public class Hello {
    //Main method
    public static void main(String[] args) {
        //input reader
        Scanner input = new Scanner(System.in);
        //output storage
        StringBuilder output = new StringBuilder("");

        //read a line, you can use other command in this class to parse
        output.append(input.nextLine());
        //write a line
        System.out.println(output.toString());
    }
} 
```

编辑：

如果你喜欢使用 args 那么：

```
public class Hello {
    // Main method
    public static void main(String[] args) {
        // output storage
        StringBuilder output = new StringBuilder("");
        // check if there are arguments
        if (args.length > 0) {
            // use string
            output.append(args[0]);
        }
        // write a line
        System.out.println(output.toString());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T00:59:47.987

你肯定需要一个主要的方法。尝试阅读有关主要内容的此链接。希望能帮助到你。 [http://www.dreamincode.net/forums/topic/38921-a-closer-look-at-the-main-method/](http://www.dreamincode.net/forums/topic/38921-a-closer-look-at-the-main-method/)

# c++ - wxSizer 和 wxStaticBitmap 忽略最小尺寸

> ID：11443676
> 
> 赞同：0
> 
> 时间：2012-07-12T00:54:17.213
> 
> 标签：c++, wxwidgets

```
Wizard::Wizard( wxWindow* parent, const wxString& archive )
: wxWizard(parent, wxID_ANY, _("Wizard"))
{    
    this->SetSizeHints( wxSize( -1,-1 ), wxDefaultSize );

    wxWizardPageSimple* rcModWizPageSelect = new wxWizardPageSimple( this );
    m_pages.Add( rcModWizPageSelect );

    wxBoxSizer* bSizer1;
    bSizer1 = new wxBoxSizer( wxVERTICAL );

    m_bitmap2 = new wxStaticBitmap( rcModWizPageSelect, wxID_ANY, wxBitmap( wxT("data/img.jpg"), wxBITMAP_TYPE_ANY ), wxDefaultPosition, wxDefaultSize, 0 );
    m_bitmap2->SetMinSize( wxSize( 586,192 ) );

    bSizer1->Add( m_bitmap2, 0, wxALL|wxEXPAND|wxFIXED_MINSIZE, 5 );

    wxStaticBoxSizer* sbSizer1;
    sbSizer1 = new wxStaticBoxSizer( new wxStaticBox( rcModWizPageSelect, wxID_ANY, _("Select Archive") ), wxVERTICAL );

    rcModArchivePicker = new wxFilePickerCtrl( rcModWizPageSelect, wxID_ANY, wxEmptyString, _("Select a file"), wxT("*.zip"), wxDefaultPosition, wxDefaultSize, wxFLP_DEFAULT_STYLE|wxFLP_FILE_MUST_EXIST|wxFLP_OPEN );
    sbSizer1->Add( rcModArchivePicker, 0, wxALL|wxEXPAND, 5 );

    bSizer1->Add( sbSizer1, 1, wxALL|wxEXPAND, 5 );

    rcModWizPageSelect->SetSizer( bSizer1 );
    rcModWizPageSelect->Layout();
    bSizer1->Fit( rcModWizPageSelect );
    wxWizardPageSimple* rcModWizPageProgress = new wxWizardPageSimple( this );
    m_pages.Add( rcModWizPageProgress );

    wxBoxSizer* bSizer2;
    bSizer2 = new wxBoxSizer( wxVERTICAL );

    m_bitmap1 = new wxStaticBitmap( rcModWizPageProgress, wxID_ANY, wxBitmap( wxT("data/img.jpg"), wxBITMAP_TYPE_ANY ), wxDefaultPosition, wxDefaultSize, 0 );
    m_bitmap1->SetMinSize( wxSize( 586,192 ) );

    bSizer2->Add( m_bitmap1, 0, wxALL|wxEXPAND|wxFIXED_MINSIZE, 5 );

    wxStaticBoxSizer* sbSizer2;
    sbSizer2 = new wxStaticBoxSizer( new wxStaticBox( rcModWizPageProgress, wxID_ANY, _("Please Wait") ), wxVERTICAL );

    rcModInstallProgress = new wxGauge( rcModWizPageProgress, wxID_ANY, 100, wxDefaultPosition, wxDefaultSize, wxGA_HORIZONTAL|wxGA_SMOOTH );
    rcModInstallProgress->SetValue( 0 ); 
    sbSizer2->Add( rcModInstallProgress, 0, wxALL|wxEXPAND, 5 );

    bSizer2->Add( sbSizer2, 1, wxALL|wxEXPAND, 5 );

    rcModWizPageProgress->SetSizer( bSizer2 );
    rcModWizPageProgress->Layout();
    bSizer2->Fit( rcModWizPageProgress );

    this->Centre( wxBOTH );

    for ( unsigned int i = 1; i < m_pages.GetCount(); i++ )
    {
        m_pages.Item( i )->SetPrev( m_pages.Item( i - 1 ) );
        m_pages.Item( i - 1 )->SetNext( m_pages.Item( i ) );
    }
} 
```

我尝试制作一个漂亮的向导对话框，但最小尺寸被忽略了，整体框架比我的图像小得多。图像的大小为 586x192。

wxFormBuilder 中的预览看起来不错，但生成的代码看起来完全不同。这里有 2 张图片： [http :](http://i.stack.imgur.com/B3vVf.png) [//i.stack.imgur.com/tbOzP.png http://i.stack.imgur.com/B3vVf.png](http://i.stack.imgur.com/tbOzP.png)

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:20:12.210

我遇到了同样的问题，并且能够通过在 sizer 上调用 SetItemMinSize() 来解决它，如下所示：

```
sizer->Add(control, 0, 0, 0);
sizer->SetItemMinSize(control, 150, -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:55:08.570

您可能还想检查您的实际父小部件是否遵循其子小部件的大小或识别它们。我认为您的小部件本身（图片）具有正确的大小，但它周围的窗口/框架没有正确的大小，因此显示为“超出范围”。尝试让窗口应用它的孩子的大小变化，在这里查看参考： [http ://docs.wxwidgets.org/trunk/overview_windowsizing.html](http://docs.wxwidgets.org/trunk/overview_windowsizing.html)

和：

[http://docs.wxwidgets.org/trunk/classwx_window.html#a2bf38a6cbd1f82fb46f274396f482994](http://docs.wxwidgets.org/trunk/classwx_window.html#a2bf38a6cbd1f82fb46f274396f482994) [http://docs.wxwidgets.org/trunk/classwx_sizer.html#abad9cedc0cbe9ade2c799da23462d17e](http://docs.wxwidgets.org/trunk/classwx_sizer.html#abad9cedc0cbe9ade2c799da23462d17e)

希望对打招呼有帮助，

罗因

# android - 代码中的 Android 显式意图

> ID：11443681
> 
> 赞同：1
> 
> 时间：2012-07-12T00:55:09.133
> 
> 标签：android, android-intent

如果用户安装了备用拨号器（即他们的电话上有多个拨号器），则隐含意图将要求在它们之间进行选择。

我的问题是我希望在代码中为默认拨号器设置一个明确的意图，因为我不希望显示此选择，但所有操作都转发到内置/默认拨号器，无论它可能是什么。

这是我当前的（隐式）意图代码：

```
Log.i(TAG, "Sending: "+Number); 
Intent dialIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+ Number));

//called from outside of an android.app.Activity Context
dialIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(dialIntent); 
```

如何强制明确意图？

我试过这个 - 但我认为我在这里走错了路......

```
dialIntent.setComponent((new ComponentName("com.android.internal.telephony","com.android.internal.telephony.ITelephony.class"))); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:31:49.630

我认为您使用硬编码的 URI（或任何名称）走在正确的轨道上，但至少可以说，这是一种脆弱的方法。

你试图做的事情违背了 Android 的开放、灵活的设计，违背了 Intent 系统的目的，并且对用户完全怀有敌意。我知道如果一个应用程序强迫我使用蹩脚的默认拨号器，我会有点生气；）

为什么需要使用内置拨号器？

我的建议：使用默认的 Intent。建议您的用户选择内置拨号器，但尽量支持选择使用其他拨号器的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:25:45.160

好吧，而不是调用默认拨号器，您应该调用处理呼叫的自定义电话拨号器中的组件。因为您无法以编程方式为操作设置默认活动

# android - 为什么 Matrix.MutiplyMV 顺时针旋转向量？

> ID：11443682
> 
> 赞同：2
> 
> 时间：2012-07-12T00:55:12.113
> 
> 标签：android, math, vector, matrix

我很困惑为什么android的矩阵类的multiplyMV方法似乎是顺时针旋转我的向量坐标，而我认为它是逆时针的。

在此代码中 pos 是矢量坐标，设置为**<0.0f, 5.0f ,0.0f>**，矩阵将围绕 Z 轴将坐标矢量旋转 -45 度。我希望 <+,+> 象限中的结果向量坐标，即**<3.535534, 3.535534, 0.0>**。但相反，它会以相反的方向旋转坐标，<-,+> 象限，即**<-3.535534, 3.535534, 0.0>**。

```
Matrix4 mtxRot = Matrix4.InitRotateEulerXYZ(0.0f, 0.0f, -45f);
pos.Set(0.0f, 5.0f ,0.0f);
mtxRot.TransformCoordVec(pos); 
```

这是我在 Matrix4.InitRotateEulerXYZ

```
public static Matrix4 InitRotateEulerXYZ(float x, float y, float z)
{
    Matrix4 rotMatrix = new Matrix4();

    /*  XYZ = | cz*cy,   sz*cx + cz*sy*sx,  sz*sx - cz*sy*cx |
              | -sz*cy,  cz*cx - sz*sy*sx,  cz*sx + sz*sy*cx |
              | sy,     -cy*sx,             cy*cx            |  */

    // Convert from degrees to radians
    x = MathHelper.DegreesToRadians(x);
    y = MathHelper.DegreesToRadians(y);
    z = MathHelper.DegreesToRadians(z);

    rotMatrix.GetArray()[0] =  MathHelper.Cos(z) * MathHelper.Cos(y);
    rotMatrix.GetArray()[1] = -MathHelper.Sin(z) * MathHelper.Cos(y);
    rotMatrix.GetArray()[2] =  MathHelper.Sin(y);

    rotMatrix.GetArray()[4] =  (MathHelper.Sin(z) * MathHelper.Cos(x)) + (MathHelper.Cos(z) * MathHelper.Sin(y) * MathHelper.Sin(x));
    rotMatrix.GetArray()[5] =  (MathHelper.Cos(z) * MathHelper.Cos(x)) - (MathHelper.Sin(z) * MathHelper.Sin(y) * MathHelper.Sin(x));
    rotMatrix.GetArray()[6] = -(MathHelper.Cos(y) * MathHelper.Sin(x));

    rotMatrix.GetArray()[8 ] = (MathHelper.Sin(z) * MathHelper.Sin(x)) - (MathHelper.Cos(z) * MathHelper.Sin(y) * MathHelper.Cos(x));
    rotMatrix.GetArray()[9 ] = (MathHelper.Cos(z) * MathHelper.Sin(x)) + (MathHelper.Sin(z) * MathHelper.Sin(y) * MathHelper.Cos(x));
    rotMatrix.GetArray()[10] =  MathHelper.Cos(y) * MathHelper.Cos(x);

    return rotMatrix;
} 
```

这是我的 Matrix4.TransformCoordVec 方法

```
public Vector3 TransformCoordVec(Vector3 vec3)
{
    Matrix4.inVec[0] = vec3.X;
    Matrix4.inVec[1] = vec3.Y;
    Matrix4.inVec[2] = vec3.Z;
    Matrix4.inVec[3] = 1.0f; // homogeneousCoord

    Matrix.multiplyMV(Matrix4.outVec, 0, this.matrix, 0, Matrix4.inVec, 0);     

    vec3.X = Matrix4.outVec[0]; vec3.Y = Matrix4.outVec[1]; vec3.Z = Matrix4.outVec[2];     
    return vec3;
} 
```

任何帮助是极大的赞赏！

**固定的**

需要转置 InitRotateEulerXYZ 和我的四元数 ToMatrix() 方法，以便逆时针旋转正角度。以下是更正的方法。

四元数矩阵

```
/**Converts a quanternion to its equivilant matrix form**/
public Matrix4 ToMatrix()
{       
    // First, lets check if we need to re-normalize our quaternion
    if(normalRegenerationCount <= 1000)
    {
        Normalize();
    }

    float x2 = x * x;
    float y2 = y * y;
    float z2 = z * z;
    float xy = x * y;
    float xz = x * z;
    float yz = y * z;
    float wx = w * x;
    float wy = w * y;
    float wz = w * z;

    Matrix4 result = new Matrix4();

    // This calculation would be a lot more complicated for non-unit length quaternions
    // Note: The constructor of Matrix4 expects the Matrix in column-major format like expected by
    //   OpenGL
    result.Set_11(1.0f - (2.0f * (y2 + z2)));
    result.Set_12(2.0f * (xy + wz)); 
    result.Set_13(2.0f * (xz - wy));        
    result.Set_14(0.0f);        

    result.Set_21(2.0f * (xy - wz));  
    result.Set_22(1.0f - (2.0f * (x2 + z2)));
    result.Set_23(2.0f * (yz + wx));
    result.Set_24(0.0f); 

    result.Set_31(2.0f * (xz + wy)); 
    result.Set_32(2.0f * (yz - wx)); 
    result.Set_33(1.0f - (2.0f * (x2 + y2))); 
    result.Set_34(0.0f);

    result.Set_41(0.0f);
    result.Set_42(0.0f);        
    result.Set_43(0.0f);        
    result.Set_44(1.0f);

    return result;
} 
```

Matrix.InitRotateEulerXYZ

```
public static Matrix4 InitRotateEulerXYZ(float x, float y, float z)
{
    Matrix4 rotMatrix = new Matrix4();

    // Convert from degrees to radians
    x = MathHelper.DegreesToRadians(x);
    y = MathHelper.DegreesToRadians(y);
    z = MathHelper.DegreesToRadians(z);

    rotMatrix.matrix[0] =  MathHelper.Cos(z) * MathHelper.Cos(y);
    rotMatrix.matrix[1] = (MathHelper.Sin(z) * MathHelper.Cos(x)) + (MathHelper.Cos(z) * MathHelper.Sin(y) * MathHelper.Sin(x)); 
    rotMatrix.matrix[2] = (MathHelper.Sin(z) * MathHelper.Sin(x)) - (MathHelper.Cos(z) * MathHelper.Sin(y) * MathHelper.Cos(x));

    rotMatrix.matrix[4] =  -MathHelper.Cos(y) * MathHelper.Sin(z);
    rotMatrix.matrix[5] =  (MathHelper.Cos(z) * MathHelper.Cos(x)) - (MathHelper.Sin(z) * MathHelper.Sin(y) * MathHelper.Sin(x));
    rotMatrix.matrix[6] =  (MathHelper.Cos(z) * MathHelper.Sin(x)) + (MathHelper.Sin(z) * MathHelper.Sin(y) * MathHelper.Cos(x)); 

    rotMatrix.matrix[8 ] =  MathHelper.Sin(y); 
    rotMatrix.matrix[9 ] = -(MathHelper.Cos(y) * MathHelper.Sin(x));
    rotMatrix.matrix[10] =  MathHelper.Cos(y) * MathHelper.Cos(x);

    return rotMatrix;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:44:51.083

简化您创建的矩阵，通过将 X 和 Y 设置为 0 作为 中的参数`InitRotateEulerXYZ`，并乘以 (0, 5, 0, 0) 得到：

```
| cos(θ) sin(θ)    0     0 | | 0 |   | 5*sin(θ) |
|-sin(θ) cos(θ)    0     0 | | 5 |   | 5*cos(θ) |
|    0     0       1     0 | | 0 | = |     0    |
|    0     0       0     0 | | 0 |   |     0    |
```

代入 θ=-π/4，得到的向量由下式给出：

```
| 5*sin(-π/4) |   | -5*sin(π/4) |
| 5*cos(-π/4) |   |  5*cos(π/4) |
|      0      | = |       0     |
|      0      |   |       0     |
```

这正是您所看到的答案。所以，我建议这不是 Android 矩阵乘法例程的问题。您应该重新检查矩阵乘法的推导，或者简单地选择一个[已经在另一个站点](http://en.wikipedia.org/wiki/Euler_rotations#Euler_rotations)推导的矩阵乘法，并相应地调整您的代码。

或者，您可以使用内置的[setRotateEulerM](http://developer.android.com/reference/android/opengl/Matrix.html#setRotateEulerM%28float%5B%5D,%20int,%20float,%20float,%20float%29)方法并让系统为您生成它。您只需要确保矩阵乘法的顺序与您的意图一致，因为有多种方法可以生成这些矩阵。

另一件需要考虑的事情是，使用欧拉旋转矩阵通常是一种较差的广义旋转方法，因为它们会受到诸如万向节锁之类的影响。您可能需要考虑其中一种[Axis/Angle 方法](http://en.wikipedia.org/wiki/Axis-angle_representation)，例如[Rodrigues 的方法](http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)，或使用[quaternions](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)。如果您更愿意使用其中之一，Android 库似乎具有[轴/角度例程的本机实现。](http://developer.android.com/reference/android/opengl/Matrix.html#rotateM%28float%5B%5D,%20int,%20float,%20float,%20float,%20float%29)

# mod-rewrite - RewriteRule 重定向 /pages/view/about 到 index.php?pages/view/about

> ID：11443683
> 
> 赞同：0
> 
> 时间：2012-07-12T00:55:16.607
> 
> 标签：mod-rewrite, redirect

我在我的目录“codeIgniter”下创建了一个 .httaccess 文件

我正在尝试将 http://www.domain.com/codeIgniter/pages/view/about 重定向到 http://www.domain.com/codeIgniter/index.php?pages/view/about

我当前的 .httaccess 文件是

RewriteEngine on +FollowSymLinks RewriteRule ^codeIgniter/pages/(.*)$ [http://www.domain.com/codeIgniter/index.php?pages/](http://www.domain.com/codeIgniter/index.php?pages/) $1 [L]

但我的页面没有重定向。我应该如何更改我的 .httaccess 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:33:07.667

尝试将您的 RewriteRule 替换为以下内容：

```
RewriteRule ^(.*)codeIgniter/pages/(.*)$ http://www.domain.com/codeIgniter/index.php?pages/$2 [L] 
```

我怀疑，通过的 url 在开头有更多的文本，而不仅仅是“codeigniter/pages ...”。插入符号 (^) 表示 RegEx 中字符串的开头。

但是，如果您使用 CodeIgniter，您是否考虑过仅启用 QueryStrings？[http://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)通常，在使用 CodeIgniter 等框架时，您希望采用 MVC，以及自定义 url。

# php - $c1 = ($c1 & 0x03) << 4 是什么意思？

> ID：11443684
> 
> 赞同：0
> 
> 时间：2012-07-12T00:55:29.523
> 
> 标签：php, hex

具体来说，`($c1 & 0x03) << 4`做什么？

0x03 是十六进制表示法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:14:18.500

这确实意味着第一个操作与十六进制值 0x03 进行逻辑与（即十六进制中的 3 或二进制中的 (0011)）。然后左移 4 个位置。示例

让你有 $c = 34。然后首先它执行 $c & 3 这是 (100010 BITWISE AND 000011) 给你 (000010) 然后它在左边位置移动 4 位数字并恢复 $c 中的新值即 (100000)或十进制的 32。

希望它是有帮助的。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:58:00.990

这将取值的低两位`$c1`，并将其向左移动 4 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:58:21.410

是的 0x 是十六进制。这是对 $c1 和十六进制 03 值进行按位与运算，然后将结果左移 4 位（2 的幂）。

# git - 无法确定主机的真实性

> ID：11443687
> 
> 赞同：35
> 
> 时间：2012-07-12T00:57:12.357
> 
> 标签：git, ssh

我第一次做 git pull 并且在 git 中提示无法建立主机的真实性，与我生成的私钥相比，RSA 密钥指纹不正确。我只是想知道如何更新它以便它读取正确的文件，为什么它首先读取错误的指纹？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-01T13:18:59.100

我有类似的问题，这意味着远程主机是未知/不受信任的。解决方法是在 known_hosts 文件中包含远程主机条目。

这就是我所做的：

1.  生成（或使用现有的）RSA 密钥并将它们存储在`<USER.HOME>/.ssh`文件中。如果您使用的是 eclipse，您可以使用 Preferences 生成 RSA 密钥；

    *   常规 -> 网络连接 -> SSH2，然后选择密钥管理。
    *   现在点击`Generate RSA Key...`
    *   然后`Save Private Key...`在 .ssh 文件夹中
2.  现在您`<USER.HOME>/.ssh`将包含文件；私钥、公钥和 known_hosts

3.  与您信任的主机共享您的公钥。
4.  打开 Git Bash Promp（命令提示符）并输入以下命令。
    *   `ssh -vt <user>@<hostname>`
    *   例如：ssh -vt git@mygithub.com
5.  当它提示错误时...您确定要继续连接（是/否）？
6.  说“是”
7.  现在您的远程主机已添加到 known_hosts
8.  完毕。

现在，如果您尝试将文件推送到远程，您不会看到任何错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-19T04:05:00.823

将 ssh 密钥添加到 GitLab 后，当您尝试克隆存储库时，如果`enter`直接按，您将收到以下错误：

```
Cloning into 'hfe-insure-m'...
The authenticity of host 'git.zhonganinfo.com (100.112.23.182)' can't be established.
ECDSA key fingerprint is SHA256:IRLOr2bTvVB2rLgYVgyUibE+oLlZ0pUwU9wycc/5zYU.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
Host key verification failed.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

当你看到下面的句子时确保你输入`yes`，不要`enter`直接按。

> 您确定要继续连接（是/否/[指纹]）？是的

例如

```
Cloning into 'hfe-insure-m'...
The authenticity of host 'git.zhonganinfo.com (100.112.23.182)' can't be established.
ECDSA key fingerprint is SHA256:IRLOr2bTvVB2rLgYVgyUibE+oLlZ0pUwU9wycc/5zYU.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'git.zhonganinfo.com,100.112.23.182' (ECDSA) to the list of known hosts.
remote: Enumerating objects: 31607, done.
remote: Counting objects: 100% (31607/31607), done.
remote: Compressing objects: 100% (10365/10365), done.
remote: Total 31607 (delta 20695), reused 31485 (delta 20604)
Receiving objects: 100% (31607/31607), 21.51 MiB | 581.00 KiB/s, done.
Resolving deltas: 100% (20695/20695), done. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-14T08:37:50.610

我在 Ubuntu 中有同样的问题。只需更改权限并为 ssh-keys 启用它

[![祝你好运。](../Images/cfec1d59d904e59e4a56874dd033613a.png)](https://i.stack.imgur.com/VVfi2.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-11T13:04:54.503

在不妨碍真实性的情况下对问题的一个非常简单的答案是在它提出问题时

> 您确定要继续连接（是/否/[指纹]）？只需从 SHA256 复制字符串：// 此处显示的字符串。并将其粘贴为问题的答案。

希望它也能为大家解决错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T17:54:31.083

我遇到的另一个问题是`known_hosts`文件中的多个条目以及一个`known_hosts2`文件。

我唯一的猜测是，因为我重用了一个主机名`./ssh/config`来指向不同的 IP，所以它混淆了创建的多个条目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-20T19:26:31.913

这里发布了一个更好的答案：

[http://stackoverflow.com/questions/2643502/git-permission-denied-publickey](http://stackoverflow.com/questions/2643502/git-permission-denied-publickey)

这救了我！！！

这些命令仅在 git bash 提示符下有效。对于 Windows，您很可能需要位于 c:/users//.ssh 目录中。并将您的密钥命名为“is_rsa”。密码是可选的，如果您提供，每次拉取时都会提示您输入密码。

祝你好运。

# delphi - TStringList 名称-值对的特殊字符限制？

> ID：11443688
> 
> 赞同：1
> 
> 时间：2012-07-12T00:57:17.417
> 
> 标签：delphi, delphi-7, tstringlist

我有一个加载了几千个名称-值对的 TStringList。其中之一是 `004001000002000=Timbre2 Volume 0~127 4995`

我通过使用字符串'004001000002000'调用IndexOfName来找到一个特定的索引。我希望 ValueFromIndex 返回字符串 'Timbre2 Volume 0~127 4995'

相反，当我使用 ValueFromIndex 访问该值时，它会返回字符串：

```
~127 4995 
```

这是什么原因造成的？波浪号是导致字符串被截断的特殊字符吗？我可以将其设置为其他内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:23:34.310

我无法在`TButton.OnClick`事件中使用以下代码重现问题（Delphi 2007 和 Delphi 7 - Delphi 2007 测试的屏幕截图）：

```
procedure TForm2.Button2Click(Sender: TObject);
var
  SL: TStringList;
  i: Integer;
begin
  SL := TStringList.Create;
  try
    SL.Add('004001000002000=Timbre2 Volume 0~127 4995');
    SL.Add('ABCDEF=Testing 1 2 3');
    i := SL.IndexOfName('004001000002000');
    if i > -1 then
      ShowMessage(SL.ValueFromIndex[i])
    else
      ShowMessage('IndexOfName returned -1');
  finally
    SL.Free;
  end;
end; 
```

这正确显示了预期的对话框：

![显示消息结果](../Images/6cbc774771f70847132e86826b482db2.png)

我还使用更简单的方法进行了测试：

```
 ShowMessage(SL.Values['004001000002000']); 
```

这显示了相同的`ShowMessage`对话框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T01:24:07.793

波浪号不是 的特殊字符`TStringList`，除非您明确将其定义为一个。

`TStringList.IndexOfName()`并且`TStringList.Name[Index]`只查看第一个`NameValueSeparator`字符前面的内容，并`TStringList.ValueFromIndex[Index]`返回第一个`NameValueSeparator`字符之后的所有内容，该值不会以任何方式截断。 `TStringList.NameValueSeparator`默认设置为`'='`。因此，如果您看到发生截断，那么您要么在自己的代码中截断它，要么`TStringList`包含一行实际上说`'004001000002000=~127 4995'`.

# sql - 如何生成具有“AAAAAA”到“ZZZZZZ”值的唯一随机 CHAR(6)？

> ID：11443690
> 
> 赞同：-1
> 
> 时间：2012-07-12T00:57:43.660
> 
> 标签：sql, informix

正如你们中的一些人已经知道的那样，我不是一个成熟的开发人员，但也许你可以帮我做一个粗略的设计？

我想模仿航空公司预订系统为它们的主键随机生成唯一记录定位器的方式。生成的值都不能形成淫秽词、其他指定值或在现有行中重复，因此需要包含禁止值的单独查找表吗？

编辑：最好使用有效键填充表并随机选择尚未使用 key_already_used 标志更新的行以生成值，或者该值是否应该由用户定义的函数随机生成，查找看看它是否不在禁止值表中，然后查找它是否尚未插入到保留表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:49:25.813

[这](http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server)是一个很好的例子。

要将 int 转换为 char 序列：

```
create function CustomerNumber (@id int) 
returns char(5) 
as 
begin 
  return char(@id / power(26,3) % 26 + 65) + 
     char(@id / power(26,2) % 26 + 65) + 
     char(@id / 26 % 26 + 65) + 
     char(@id % 26 + 65) 
end 
```

然后你所要做的就是传递一个唯一的整数，你会得到一个唯一的字符串（或一个**随机**整数，你会得到一个**随机**字符串）

（请记住，**随机**不等于**唯一**）

我猜在informix中它应该是这样的？

```
CREATE FUNCTION CustomerNumber (id int)
RETURNING char(5);
 RETURN integer::char(id / POW(26,3) % 26 + 65) + 
         integer::char(id / POW(26,2) % 26 + 65) + 
         integer::char(id / 26 % 26 + 65) + 
         integer::char(id % 26 + 65) 
END FUNCTION 
```

# shell - 将变量从 shell 脚本导出到 awk

> ID：11443693
> 
> 赞同：2
> 
> 时间：2012-07-12T00:57:56.380
> 
> 标签：shell, awk, grep

我正在将变量从 shell 脚本导出到 awk。程序如下

```
export name="hi"
eval $(awk '{element="bye";name=element"name";print name}')
echo $name 
```

我的预期输出是我需要将名称与 awk 脚本中的元素连接起来，然后在外面显示连接的结果，因此我的输出将是

名字=再见

但我不一样。你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:11:43.027

您可以使用 -v 选项分配变量，而无需将任何内容导出到环境中。例如：

```
name='hi'
name=$(
    awk -v name="$name" 'BEGIN {print "bye" name}'
)
echo "$name" 
```

这将按`byehi`预期返回。

# c# - 以编程方式将图像放置在页面 ASP.net Web 应用程序 c#

> ID：11443697
> 
> 赞同：1
> 
> 时间：2012-07-12T00:58:22.590
> 
> 标签：c#, asp.net, image, web, controls

如何以编程方式移动图像控件？在该页面上的 asp.net Web 应用程序中，我希望以编程方式创建 3 个图像并将它们放置在它们之间有一定距离；

```
int punctX = 50;
            int punctY=50;

            for (int y = 0; y < 2; y++)
            {
                System.Web.UI.WebControls.Image image = new System.Web.UI.WebControls.Image();
                image.ID = "culoare" + y.ToString(); 
```

-- 如何在页面上放置图像？}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:33:12.360

如果您可以使用某种占位符将图像添加到其中，那就更好了。在此示例中，我使用的是 asp.net 面板控件。在后面的代码中，您可以使用相应的属性设置样式属性。

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="StackOverFlow_2._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Panel ID="pnlImages" runat="server"></asp:Panel>
</asp:Content> 
```

如果你有这样的图像

![在此处输入图像描述](../Images/a7c1a96e13f00c496621d52e9b431bcb.png)

你可以做这样的事情（可能不是最干净的代码；但你明白了）

```
using System;
using System.Web.UI;

namespace StackOverFlow_2
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                double punctX = 10;
                double punctY = 10;

                double spacing = 5;

                pnlImages.Style["position"] = "relative";

                for (int y = 0; y < 3; y++)
                {
                    System.Web.UI.WebControls.Image image = new System.Web.UI.WebControls.Image();
                    image.ID = "culoare" + y.ToString();
                    image.Style["position"] = "absolute";
                    image.Style["left"] = punctX.ToString() + "px";
                    image.Style["top"] = punctY.ToString() + "px";
                    image.Width = 100;
                    image.Height = 60;
                    image.ImageUrl = "~/Images/" + image.ID.ToString() + ".jpg";

                    pnlImages.Controls.Add(image);                    

                    punctX += image.Width.Value + spacing;

                }
            }
        }
    }
} 
```

渲染输出看起来像这样（您的图像相距 5px）

![在此处输入图像描述](../Images/240b14996ac10cce44b11ae17487c5be.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:05:07.203

您必须像这样将它们添加到您的页面控件集合中

```
page.Controls.Add(yourImage) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T15:33:18.933

```
 //The image data is from database.
    System.Web.UI.WebControls.Image img = new System.Web.UI.WebControls.Image();
    img.ID = row["id"].ToString();
    img.AlternateText = row["id"].ToString();
    img.ImageUrl = "~/myimage.png";
    img.Style["position"] = "relative";              //here must be "relative"
    img.Style["left"] = row["posX"].ToString() + "px";
    img.Style["top"] = row["posY"].ToString() + "px"; 
```

# amazon-dynamodb - 将对象作为 Json 存储在 Amazon Dynamo 中是个好主意吗？

> ID：11443700
> 
> 赞同：10
> 
> 时间：2012-07-12T00:58:42.387
> 
> 标签：amazon-dynamodb

在查看了 Amazon DynamoDB 之后，我一直试图弄清楚如何存储我在代码中创建并希望保留的复杂对象。我了解如何将这些对象存储在像 MySql 这样的关系数据库中，但我将如何将它们存储在 DynamoDB 中？

我可以想到一种方法....将它们转换为 Json 并将对象的 Json 表示形式存储在 DynamoDB 中。为了让它们再次脱离 DynamoDB，我会将它们从 Json 编组回我的代码中的对象表示。

这是一个例子：

对于这种类型的对象：汽车有一个引擎，它有很多零件。每个部件都有一个序列号、一个使用寿命和一个更换价值。现在我可以把 Car 变成 json，看起来像这样：

```
{
    "engine": {
        "parts": [
            {
                "serialNumber": "1234",
                "lifeSpan": 10,
                "replacementValue": 100
            },
            {
                "serialNumber": "5678",
                "lifeSpan": 1,
                "replacementValue": 200
            }
        ]
    }
} 
```

我应该将上述 Json 作为 Key: CarName 'Jaguar', Value [above json] 存储在 Dynamo 中吗？还是有更好的方法来存储汽车对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-29T16:28:00.843

> I understand how I would store these objects in a Relational Database like MySql but how would I store them in DynamoDB?

The mainstream solution for DynamoDB is pretty similar to the MySql one: you just, change a table row (mysql) with a table item (dynamodb), they both are flat structures, but a dynamodb item could have different attributes from other items in the table, and have a [64KB item size limit](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html) (column/attribute names included).

> Should I just store the above Json in Dynamo as Key: CarName 'Jaguar', Value [above json] ? Or is there a better way to store the Car Object?

No, once your parts array grows you will face the [64KB item size limit](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html). You can store a compressed version of the json to mitigate, but then you will not be able to use any attribute feature (eg. [LSI](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/LSI.html) or [GSI](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html), [updateItem](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_UpdateItem.html)) in dynamodb, nor integrate seamlessly with other AWS products.

You can take a look at the way [dyngodb](https://github.com/aaaristo/dyngodb) stores those objects, shortly: one dynamodb item, for every object. One hash for arrays, with N ranges for the array elements.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-17T23:39:23.323

我认为存储对象很好，只要你不过度使用它。

其他一些回复提到**Item 的最大大小是 400KB**。**但是，对于 fetch 的结果也有一个最大大小，这是比较成问题的，因为这个限制只有 1MB。**

因此，假设您计划存储大量文档，最终每个 Item 消耗 200KB。如果您在数据库中放入超过 5 个项目，那么您超过了 1MB 的限制。这意味着，如果您计划执行需要返回 5 个以上项目的查询，它将无法工作。您只会得到 5 个项目，并且您必须执行第二次查询才能获得剩余的项目。你需要自己巩固这些。最重要的是，它会很慢。

**对于不是真正问题的小型 JSON 消息，您不必担心。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:26:18.927

您可以尝试使用字符串数组/字符串集。这样你就可以一个一个地推入更多的项目，不幸的是你不能只请求一个项目，你需要把它们都拿到。另一种选择是序列化数组（如果您使用的是 php），它将一个不错的 php 数组转换为一个字符串以存储在数据库中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-16T14:17:44.333

我不知道您正在以编程方式访问您的发电机数据库。假设如果您正在这样做，那么下面可能会对您有所帮助。

1.  使用文档模型对 dynamo DB 进行任何数据库操作。如果您在 asp .net core 中执行此操作，那么文档模型绝对是唯一的机会。

2.  在 Dynamo Db 上，您要在其上存储 json 数据的字段/列。选择该**列类型作为 Map**。**Map 类型**的好处 是您可以使用键/值对来索引 json 数据。

关于大小限制图支持 400kb。检查以下链接。 [https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html#limits-data-types](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html#limits-data-types)

关于文档对象模型，您可以查看此链接。 [https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DotNetSDKMidLevel.html](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DotNetSDKMidLevel.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-22T23:51:08.903

项目大小限制已达到 400kb。

[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html)

所以我不认为项目大小限制现在应该是一个大问题。

但是，与其他 AWS 服务集成的问题仍然存在。例如，我相当确定您不能在这些 json 映射字段上使用 cloudsearch。特别是考虑到如果数据太大，您可以将指向 S3 对象的指针存储为字段数据。

我在 dynamo 中使用了一点地图类型，如果您可以接受新的限制，那么与将所有数据存储在字段中相比，它相当方便/干净。如果您使用的是 node/javascript，那么 dynampdb 数据类型库对于让这些东西玩起来很关键。

[https://www.npmjs.com/package/dynamodb-data-types](https://www.npmjs.com/package/dynamodb-data-types)

# html - 为所有表格数据单元格添加底部边框

> ID：11443706
> 
> 赞同：1
> 
> 时间：2012-07-12T00:59:09.363
> 
> 标签：html, css

无论如何我可以避免将边框规范写入每个表格数据单元格吗？

```
<table width='800' bgcolor='grey' cellspacing='0'
style="border-bottom-style:solid; border-bottom-width:1px; border-color:black">  <tr>
<td style="border-bottom-style:solid; border-bottom-width:1px;">
First Name:<td style="border-bottom-style:solid;
 border-bottom-width:1px;"> {$info['firstname']}</td></tr>
 <tr><td style="border-bottom-style:solid; 
border-bottom-width:1px;">Last Name:
<td style="border-bottom-style:solid; border-bottom-width:1px;">
{$info['lastname']}</td> </tr>
<tr><td style="border-bottom-style:solid; border-bottom-width:1px;">
email:<td       style="border-bottom-style:solid; border-bottom-width:1px;">
{$info['email']}</td></tr>
<tr><td>password:<td>********</td></tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T00:59:54.250

这是基本的 CSS。将其放在文档的开头：

```
<style type="text/css">
    td {
      border-bottom-style:solid;
      border-bottom-width:1px;
    }
</style> 
```

这将适用`<td>`于您页面中的所有内容。如果您希望它仅应用于某些表格单元格或某些表格，那么您将需要开始使用更高级的选择器。但是任何 CSS 教程都可以向您展示如何做到这一点。

顺便说一句，你也可以用你的桌子做到这一点：

```
table {
  border-bottom-style:solid; 
  border-bottom-width:1px; 
  border-color:black
} 
```

或使用[速记](http://www.websiteoptimization.com/speed/tweak/shorthand/)：

```
table {
  border-bottom: 1px solid black;
} 
```

您可能想查看[CSS-Tutorial](http://www.brainjar.com/css/using/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:01:11.710

```
<style>
    table td
    {
        border-bottom: 1px solid black;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:23:54.403

使用 CSS。

```
td {
    border-bottom: solid 1px black;
} 
```

建议您在另一个文件中编写 CSS 并将其包含在您的网页中，使用：

```
<link rel=StyleSheet href="example.css"/> 
```

更多关于 CSS 的信息：http: [//www.w3schools.com/css](http://www.w3schools.com/css)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T01:00:40.580

```
table { border-bottom: solid 1px #000000;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T04:27:18.043

你的代码应该是这样的......

```
<html>
  <head>
    <style>
      table{
        background-color: grey;
        width: 800px;
        border-bottom: 1px solid black;
        border-spacing: 0;
        border-collapse: collapse;
      }
      table tr td{
        border-bottom: 1px solid black;
      }
    </style>
  </head>
  <body>
    <table cellspacing='0'>  
      <tr>
        <td>First Name:</td>
        <td> {$info['firstname']}</td>
      </tr>
      <tr>
        <td>Last Name:</td>
        <td>{$info['lastname']}</td> 
      </tr>
      <tr>
        <td>email:</td>
        <td>{$info['email']}</td>
      </tr>
      <tr>
        <td>password:</td>
        <td>********</td>
      </tr>
    </table>
  </body>
</html> 
```

# c# - GetProperty 反射导致在新属性上“找到不明确的匹配”

> ID：11443707
> 
> 赞同：39
> 
> 时间：2012-07-12T00:59:17.647
> 
> 标签：c#, reflection, system.reflection

我怎样才能得到我的财产？当前发生错误`Ambiguous match found`，请参见代码中的注释行。

```
public class MyBaseEntity
{
    public MyBaseEntity MyEntity { get; set; }
}

public class MyDerivedEntity : MyBaseEntity
{
    public new MyDerivedEntity MyEntity { get; set; }
}

private static void Main(string[] args)
{
    MyDerivedEntity myDE = new MyDerivedEntity();

    PropertyInfo propInfoSrcObj = myDE.GetType().GetProperty("MyEntity");
    //-- ERROR: Ambiguous match found
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-12T01:08:42.010

[类型.GetProperty](http://msdn.microsoft.com/en-us/library/kz0a8sxy.aspx)

> 发生 AmbiguousMatchException 的情况...
> 
> ...派生类型通过使用 new 修饰符声明一个隐藏具有相同名称的继承属性的属性

如果你运行以下

```
var properties = myDE.GetType().GetProperties().Where(p => p.Name == "MyEntity"); 
```

您将看到`PropertyInfo`返回了两个对象。一为`MyBaseEntity`一为`MyDerivedEntity`。这就是您收到*不明确匹配发现*错误的原因。

你可以像这样`PropertyInfo`得到`MyDerivedEntity`：

```
PropertyInfo propInfoSrcObj = myDE.GetType().GetProperties().Single(p => 
    p.Name == "MyEntity" && p.PropertyType == typeof(MyDerivedEntity)); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-02-26T19:30:10.717

对于财产：

```
MemberInfo property = myDE.GetProperty(
    "MyEntity",
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly); 
```

对于方法：

```
MemberInfo method = typeof(String).GetMethod(
    "ToString",
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly,
    null,
    new Type[] { },// Method ToString() without parameters
    null); 
```

[BindingFlags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags%28v=vs.110%29.aspx) .DeclaredOnly - 指定只应考虑在提供的类型层次结构级别声明的成员。不考虑继承的成员。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-11-02T16:11:49.163

由于 中的`new`声明而出现歧义`MyDerivedEntity`。要克服这个问题，您可以使用 LINQ：

```
var type = myObject.GetType();
var colName = "MyEntity";
var all = type.GetProperties().Where(x => x.Name == colName);
var info = all.FirstOrDefault(x => x.DeclaringType == type) ?? all.First(); 
```

如果存在，这将从派生类型中获取属性，否则从基类中获取。如果需要，这可以很容易地触发。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-27T20:15:50.940

Kevin 已经指出了这个问题，但您不需要复杂的语句或 LINQ：

```
PropertyInfo propInfoSrcObj = myDE.GetType().
    GetProperty("MyEntity", typeof(MyDerivedEntity)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-10T10:45:13.527

我在浏览器控制台中遇到了这个错误我搜索它，我发现这个异常是针对 c# 并且答案也是针对 c# 然后我尝试查看我的代码，我发现了问题发生的位置：

我有一个 ajax post 方法，当我发布数据时出现此错误，因此我传递的数据将由 c# web 方法收集，所以当我看到该模型时，我有 2 个同名的属性，所以我删除了一个，问题和异常解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-03T20:18:48.430

我的 LocationKey 对象的 MsgPack 序列化遇到了这个问题。最终成为我在 LocationKey 类中定义的运算符。定义这两个运算符会导致`DefaultContext.GetSerializer(obj.GetType());`在尝试序列化时抛出 Ambiguous Match Found。删除一组运算符使问题消失了。

```
public static bool operator ==(int key1, LocationKey key2)
{
    return key1 == key2.Value;
}

public static bool operator !=(int key1, LocationKey key2)
{
    return key1 != key2.Value;
}

public static bool operator ==(LocationKey key1, int key2)
{
    return key1.Value == key2;
}

public static bool operator !=(LocationKey key1, int key2)
{
    return key1.Value != key2;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-21T18:37:07.960

对我来说，在 VB.Net 中，我在将 JS 对象传递给`<WebMethod()>`函数时遇到了这个超级描述性错误。

我的对象由包含对其他实体的引用的 EF 实体组成。将这些引用属性设置为无解决了这个问题。不知道为什么在序列化发送到 JS 时这不会导致循环引用，但它确实存在。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-23T11:10:50.370

FWIW，这是我使用的代码：

```
public static PropertyInfo GetUnambiguousProperty(object component, string name, BindingFlags flags = BindingFlags.Public | BindingFlags.Instance) => GetUnambiguousProperty(component?.GetType(), name, flags);
public static PropertyInfo GetUnambiguousProperty(Type type, string name, BindingFlags flags = BindingFlags.Public | BindingFlags.Instance)
{
    if (type == null)
        throw new ArgumentNullException(nameof(type));

    if (name == null)
        throw new ArgumentNullException(nameof(name));

    return type.GetProperties(flags).Where(p => p.Name == name).FirstOrDefault();
} 
```

# matlab - 结构文件的元胞数组

> ID：11443711
> 
> 赞同：5
> 
> 时间：2012-07-12T00:59:51.593
> 
> 标签：matlab, struct, cell

我创建了一个结构文件的单元格数组，例如：

```
>> res2

res2 = 

  Columns 1 through 7

    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]

  Columns 8 through 10

    [1x1 struct]    [1x1 struct]    [1x1 struct]

>> res2{1}

ans = 

    nchi005_randchi005: 0.1061
          nfdr_randfdr: 0.0011
          nlgt_randlgt: 2.9517e-004
      nphast_randphast: 0.6660
           ndd_rand_dd: 0.0020
    ndd_rand_dd_larger: 1

    >> res2{1}.nlgt_randlgt

ans =

  2.9517e-004

>> res{:}.nlgt_randlgt
??? Bad cell reference operation. 
```

是否有可能一次访问 res2-cellarray 的所有 nlgt_randlgt-fields？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T01:45:43.643

您需要做的就是将您`res2`的单元格数组转换为结构数组（使用`cell2mat`）。然后，您可以完全按照您想要的方式获取结构成员。这是一个示例，其中`cdat`是具有两个成员的结构元胞数组，`s1`而`s2`.

```
cdat = 

    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]    [1x1 struct]

>> dat = cell2mat(cdat)

dat = 

1x10 struct array with fields:
    s1
    s2

>> [dat(:).s1]

ans =

     1     1     1     1     1     1     1     1     1     1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:14:42.927

您可以通过以下方式访问单元格：

```
cellfun(@(r) r.nlgt_randlgt, res2); 
```

# lisp - 武装熊常见的 lisp 有问题 - 从 repl 调用用户定义的类？

> ID：11443714
> 
> 赞同：0
> 
> 时间：2012-07-12T01:00:04.327
> 
> 标签：lisp, common-lisp, abcl

我对 lisp 很陌生，对 java 也很陌生。我正在用 Java 开发一个简单的游戏，我认为与游戏交互会很有趣，因为我正在通过 REPL 对其进行编码。我一直在关注 Practical Common Lisp，并且对基本的函数结构有所了解。我开始使用 armed bear common lisp——一个在 java 虚拟机上运行的实现——并且能够编写一些用于创建 guis 的基本函数，例如：

```
(defconstant +jframe+ "javax.swing.JFrame")

(defun make-frame (length width &key visible)
  "Create a +jframe+"
  (let ((frame (jnew (jconstructor +jframe+))))
    (jcall (jmethod +jframe+ "setSize" "int" "int")
       frame length width)
    (if visible (frame-is-visible t frame))
    frame)) 
```

但是我不知道如何从 lisp 访问用户定义的类。整个实现似乎记录得很差，我发现很难从 lisp 中开始使用 java 特定的东西。例如，我有一个名为“Character”的编译字符类。但是当我调用 (jclass "Character") 时，我得到一个 "class not found" 错误。是否可以让 abcl 从 lisp 中了解我的课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:59:43.653

如果要创建自己编写并打包在 jar 文件中的 Java 类的实例，请使用 add-to-classpath：

```
(add-to-classpath '("Character.jar")) 
```

然后，`(jnew "org.example.Character")`应该给你一个`Character`类的实例（假设它在`org.example`命名空间中）。

# android - 无论如何，从时间得到上午/下午？

> ID：11443722
> 
> 赞同：7
> 
> 时间：2012-07-12T01:01:22.280
> 
> 标签：android

> **可能重复：**
> [在 android 中以 AM/PM 格式显示时间](https://stackoverflow.com/questions/2605470/displaying-the-time-in-am-pm-format-in-android)

我可以使用以下方法获取时间并将其转换为字符串：

```
public static final String TIME_FORMAT = "h:mm a";
       SimpleDateFormat dateTimeFormat = new SimpleDateFormat(TIME_FORMAT);

String getstring = dateTimeFormat.format(when.gettime(); 
```

但是我如何从中获取 am/pm 并将其转换为字符串，因为我需要它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T01:41:43.270

尝试这个

```
Calendar now = Calendar.getInstance();
int a = now.get(Calendar.AM_PM);
if(a == Calendar.AM)
   System.out.println("AM"+now.get(Calendar.HOUR)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:04:01.667

这应该有效：

```
private TimePickerDialog.OnTimeSetListener mTimeSetListener =
 new TimePickerDialog.OnTimeSetListener()

{

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
TextView datehid = (TextView)findViewById(R.id.timehidden);
if(hourOfDay>12)
{

    datehid.setText(String.valueOf(hourOfDay-12)+ ":"+(String.valueOf(minute)+"pm"));
}
if(hourOfDay==12)
{
    datehid.setText("12"+ ":"+(String.valueOf(minute)+"pm"));
}
if(hourOfDay<12)
{
    datehid.setText(String.valueOf(hourOfDay)+ ":"+(String.valueOf(minute)+"am"));
}
}
}; 
```

在[较早的问题](https://stackoverflow.com/questions/2605470/displaying-the-time-in-am-pm-format-in-android)上找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:55:29.483

从您的代码看来，您正在使用 Date 对象。如果可能，我建议改用 Calendar 对象。`getTime()`需要时，您可以通过 Calendar 的方法从 Calendar 对象中获取 Date 对象。

如果您有日历对象，则可以执行以下操作：

```
Calendar cal = ...;
String ampm = DateUtils.getAMPMString(cal.get(Calendar.AM_PM)); 
```

`DateUtils`是 Android 框架的一部分，可返回到 API 级别 3。 `getAMPMString()`返回 AM/PM 的本地化版本。请参阅Android 开发者网站上 的[文档。](http://developer.android.com/reference/android/text/format/DateUtils.html)

如果您没有可用的日历对象，您可以从日期对象创建一个：

```
Date date = ...;
Calendar cal = Calendar.getInstance();
cal.setTime(date); 
```

但是，由于 Calendar 比较重，您最好直接使用 Calendar 对象，而不是创建和丢弃它们。

# javascript - 任何滑块 + Fancybox 复制图像

> ID：11443723
> 
> 赞同：1
> 
> 时间：2012-07-12T01:01:32.467
> 
> 标签：javascript, jquery, fancybox

我正在重建我的网站，在我的投资组合部分使用了 Anythingslider + Fancybox，但它目前重复了两次相同的图像。您可以在这里看到我的意思，向下滚动到作品集部分并单击第一张图片：

[http://francisthedesigner.com/dev/](http://francisthedesigner.com/dev/)

当我将它从任何东西中取出时，fancybox 可以正常工作，而不会复制让我感到困惑的图像，正如您所知，我不擅长解决 javascript 问题，但我非常热衷于解决这个问题。任何帮助将不胜感激。

如果有帮助，这里是 HTML/JS 代码

```
<ul class="slider"> 
                <li> 
                    <a class="fancybox" rel="webfolio" href="images/folio/web_superjellyfish_b1.jpg">
                 <img src="images/folio/web_superjellyfish.jpg" alt="" />
                        </a>
                    <div class="caption-bottom"> 

                        <div>
                            <h3>Description</h3>
                            <p>An extract of my showreel about Go Up Communications’s works for fashion industry.</p>
                        </div>
                        <div>
                            <h3>Role</h3>
                            <p>Art Direction, Graphic Design, HTML5, CSS, Javascript, WP</p>
                        </div>
                        <div>
                            <h3>Client</h3>
                            <p><a href="http://francisthedesigner.com/superjellyfish/&quot; target="_blank">Super Jellyfish</a></p>
                        </div>

                    </div> 
                    <span class="capLeft"></span>
                    <span class="capRight"></span>
                </li> 
```

$(".fancybox").fancybox({ prevEffect : 'true', nextEffect : 'true',

```
 closeBtn  : true,
    arrows    : true,
    nextClick : true,

    helpers: {
        title : {
            type : 'outside'
        },
        overlay : {
            speedIn : 500,
            opacity : 0.95
        },
        thumbs : {
                width: 75,
                height: 50
            },
        title : {
            type : 'inside'
        },
        //buttons   : {}
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:14:25.177

```
<a class="fancybox" rel="webfolio" href="images/folio/web_superjellyfish_b1.jpg" disabled="disabled" name="" style="width: 100%; height: 100%; ">
    <img src="images/folio/web_superjellyfish.jpg" alt="">
</a> 
```

似乎anyslider 正在添加额外的图像并且它们被标记为`rel="webfolio"`，您需要阻止anyslider 这样做。

# imagemagick - ImageMagick 将色彩空间减少为灰色

> ID：11443725
> 
> 赞同：9
> 
> 时间：2012-07-12T01:02:37.583
> 
> 标签：imagemagick, rgb, grayscale

我使用将 RGB 和 CMYK TIFF 图像转换为 RGB JPEG

```
convert a.tif -colorspace rgb a.jpg 
```

如果 TIFF 图像仅包含灰色像素，则生成的 JPEG 的色彩空间是灰色的，而不是 RGB。

如何强制 ImageMagick 始终使用 RGB？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T11:41:49.293

试试这个：

```
convert a.tif -colorspace rgb -type truecolor a.jpg 
```

但是，我不得不问：**您如何确定您的判断*“生成的 JPEG 的色彩空间是灰色的，而不是 RGB”*？！？**

ImageMagick 工具`identify`可以查看文件使用的色彩空间。如果你有`convert`，那么你也会有`identify`：

```
identify -format "%[colorspace]   <== %f\n"  *.png *.jpeg *.pdf *.tif 
```

示例输出：

```
 sRGB   <== fullsize-coalesce-originals.png
 Gray   <== tiffg4.tif
 CMYK   <== cmyk.pdf
 CMYK   <== photoshop.jpeg 
```

# jquery - Jquery验证器文本框不等于默认值

> ID：11443726
> 
> 赞同：0
> 
> 时间：2012-07-12T01:02:42.280
> 
> 标签：jquery

我正在尝试验证我的表单，因为用户在单击按钮时输入信息，而不是提交。我正在尝试制作一些东西来检测文本框中的文本是否是默认值。但是，它不起作用。

我不太熟悉 jquery 验证器。这是我到目前为止所拥有的。

```
$(document).on("click", "#numexercisesbutton, #submitworkout",
                    function() { //adds exercises 
                        jQuery.validator.addMethod("notEqual", function(value,
                                element, param) {
                            return this.optional(element) || value !== param;
                        }, "Please choose a value!");

                        $("#addworkout").validate({

                            rules: {
                                weightinputboxes: {
                                    required: true,
                                    notEqual: "Enter Weight"
                                }
                            },
                            messages: {
                                weightinputboxes: {
                                    notEqual: "please enter a value"
                                } 

                            }

                            }

                        )

                        if ($("#addworkout").valid()) {

                            addexercises.call(this);
                        }
                    }); 
```

不确定为什么它不起作用。我试图模仿这篇文章：[jQuery Validate: Not default value](https://stackoverflow.com/questions/3922168/jquery-validate-not-default-value)

编辑 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

<script type="text/javascript" src="/static/jquery-1.7.2.min.js"> </script>
<script type="text/javascript" src="/static/jquery-ui-1.8.21.custom.min.js"> </script>
<link rel="stylesheet" href="/static/jquery-ui-1.8.21.custom.css"  type="text/css">
<script type="text/javascript" src="/static/jquery.validate.js"> </script>
<script type="text/javascript" src="/static/jquery.validate.min.js"> </script>

<link rel="stylesheet" href="/static/addworkout.css"  type="text/css">
<script type="text/javascript" src="/static/addworkout.js"></script>

</head>
{% extends "masterpage.html" %}
{% block content %}
<body>
<form action="/submitworkout/" method="get" id="addworkout">
<div id="workoutentrycontainer">
<div id="exercisesthisworkout">
<p>Workout Date: </p>
<input type="text" class="required" id="workoutdate" name="workoutdate"> 
<p>Body Weight:</p>
<input type="text" class="textbox" id="weight" name="weight"> 
<p>How many unique exercises</p>
<input type="text" class="textbox required" id="numexercises" name="numexercises"> 
<input type="button" class="button"  value="Add" id="numexercisesbutton"> 
<input type="text" value="Enter Weight" name="weightinputboxes" class="required"> 

</div>
</div>

</form>
</body>
{% endblock %}
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:02:50.107

```
$("#..").validate({..}) 
```

专注于工作的作品开箱即用。你正在结合点击和模糊。

在您的代码中，流程类似于：

1.  单击按钮将激活验证方法。
2.  单击按钮后，当您输入文本框并将焦点移出框时，验证器将验证该值。

# jquery - 需要显示来自MongoDB数据的图表

> ID：11443734
> 
> 赞同：0
> 
> 时间：2012-07-12T01:03:46.830
> 
> 标签：jquery, json, mongodb, charts

我想知道执行以下操作的最佳方法是什么。

我像日志一样存储一个人在 Mongodb 中所做的事情的数据

例如

```
{
 "date":"01-01-2002T08:20:30",
 "task":"contact-lead",
 "user":"username"
} 
```

我需要计算当天完成了多少任务，并将它们放在[像 Highstock 这样的图表中](http://www.highcharts.com/stock/demo/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:34:55.373

下面的命令将汇总/计算每天的任务数：

```
db.col.group({
    $keyf : function(doc) {
        return { "day" : doc.date.getFullYear() + "/" + (doc.date.getMonth()+1) + "/" + doc.date.getDate() };
    },
    initial: {count:0},
    reduce: function(obj, prev) { prev.count++; }
}) 
```

然后，您只需在需要时对其进行格式化并将其发送到 highcharts API，但要小心，因为如果您有大量数据可能会很慢。

另一种选择是使用[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)并定期更新聚合集合并将其用作图形的源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:06:17.590

1.  使用 PHP 或 Python 之类的服务器端脚本使用 mongodb 查询来聚合您的数据。

2.  [count()](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bcount%28%29%7D%7D) , $where , [$gte ,$gt](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%3C,%3C=,%3E,%3E=)将是您可以用来查询在第 x 天完成的任务总数的运算符。

3.  如果您需要查找过去 30 天完成的任务数，执行 30 个查询不是一个好主意，而不是您必须使用 mongodb 的“group by”sql 等效项，该技术称为“ [map reduce](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group) ” '。

然后，您可以根据图表库 Highcharts 的要求，在网页上使用 PHP/Python 以 json/xml 格式呈现图表数据（或者您也可以尝试[jqplot.com](http://www.jqplot.com/)获取基于 jQuery 的图表）。

# xml - 如何同时检索子 XML 节点和父 XML 节点的值？

> ID：11443735
> 
> 赞同：0
> 
> 时间：2012-07-12T01:03:55.030
> 
> 标签：xml, vb.net, winforms, treeview

**示例 XML**

```
<Drawer_System_1>
 <DrawerSystemID>1</DrawerSystemID>
 <DrawerSysName>Drawer_System_1</DrawerSysName>
 <DrawerSysLocation>North Wall (2nd from left)</DrawerSysLocation>
 <Drawers>
  <DrawerID>1-01</DrawerID>`enter code here`
  <Contents>Contents of Drawer 1-01</Contents>
 </Drawers>
 <Drawers>
  <DrawerID>1-02</DrawerID>
  <Contents>Contents of Drawer 1-02</Contents>
 </Drawers>
</Drawer_System_1> 
```

**我的问题**

如何同时检索子 XML 节点和父 XML 节点的值？

我已经用我的 XML 文件填充了 TreeView 控件，并且我想在控件中选择它们时检索节点和子节点之间的某些值（作为字符串）。

**我的预期结果**

如果我选择 Drawer_System_1 节点或任何子节点，我想检索 DrawerSystemID、DrawerSysName 和 DrawerSysLocation 节点之间的值。

如果我选择 Drawer 节点或任何子节点，我想保留前面提到的值并检索 DrawerID 和 Contents 节点的值。

每个节点的值应该显示在单独的标签中，但如果在多行文本框（或标签）中显示我请求的数据更容易，那也可以。

**笔记**

我正在使用 VB.NET，但是如果您能想到 C# 中的解决方案，那也很好——我应该能够使用[在线转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)将答案转换为 VB 。

如有必要，我可以重新构建我的 XML 文件以使我的程序更易于阅读。

**编辑：**到目前为止，这是我的代码：

```
Imports System
Imports System.Xml
Imports System.Xml.Serialization
Imports System.IO

Public Class My_LEGO_Elements
    Private Sub My_LEGO_Elements_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim serializer As New SimpleXmlSerializer()
        Dim data As LEGOElementsData = serializer.DeSerialize(Of LEGOElementsData)(File.ReadAllText("C:\Users\Steven\Documents\Visual Studio 2012\Projects\My_LEGO_Elements\My_LEGO_Elements\Drawer_Systems_5.xml"))
        ListBox1.Items.AddRange(data.DrawerSystems.ToArray())
    End Sub

    Private Sub ListBox1_SelectedValueChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ListBox1.SelectedValueChanged
        Dim drawerSystem As DrawerSystem = CType(ListBox1.SelectedItem, DrawerSystem)
        DrawerSysIDLabel.Text = drawerSystem.Id
        DrawerSysNameLabel.Text = drawerSystem.Name
        DrawerSysLocLabel.Text = drawerSystem.Location
        'retrieve specific drawer system image from resources
        Dim pictureResource = My.Resources.ResourceManager.GetObject(String.Format("{0}", drawerSystem.Id))
        'convert pictureResource to type Image and display in DrawerSysPictureBox
        DrawerSysPictureBox.Image = CType(pictureResource, Image)
    End Sub 'My_LEGO_Elements_Load

    Private Sub ListBox2_SelectedValueChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ListBox2.SelectedValueChanged
        Dim drawer As Drawer = CType(ListBox2.SelectedItem, Drawer)
        DrawerNumberLabel.Text = drawer.Id
        DrawerContentsLabel.Text = drawer.Contents
    End Sub
End Class 'My_LEGO_Elements

Public Class LEGOElementsData
    Public Property DrawerSystems() As List(Of DrawerSystem)
        Get
            Return _drawerSystems
        End Get
        Set(ByVal value As List(Of DrawerSystem))
            _drawerSystems = value
        End Set
    End Property
    Private _drawerSystems As List(Of DrawerSystem)
End Class

Public Class DrawerSystem
    Public Property Id() As String
        Get
            Return _id
        End Get
        Set(ByVal value As String)
            _id = value
        End Set
    End Property
    Private _id As String

    Public Property Name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property
    Private _name As String

    Public Property Location() As String
        Get
            Return _location
        End Get
        Set(ByVal value As String)
            _location = value
        End Set
    End Property
    Private _location As String

    Public Property Drawers() As List(Of Drawer)
        Get
            Return _drawers
        End Get
        Set(ByVal value As List(Of Drawer))
            _drawers = value
        End Set
    End Property
    Private _drawers As List(Of Drawer)

    Public Overrides Function ToString() As String
        Return _name
    End Function
End Class

Public Class Drawer
    Public Property Id() As String
        Get
            Return _id
        End Get
        Set(ByVal value As String)
            _id = value
        End Set
    End Property
    Private _id As String

    Public Property Contents() As String
        Get
            Return _contents
        End Get
        Set(ByVal value As String)
            _contents = value
        End Set
    End Property
    Private _contents As String
End Class

Public Class SimpleXmlSerializer
    Public Function Serialize(ByVal objectToSerialize As Object) As String
        Dim serializer As XmlSerializer = New XmlSerializer(objectToSerialize.GetType())
        Using stream As MemoryStream = New MemoryStream()
            Dim namespaces As XmlSerializerNamespaces = New XmlSerializerNamespaces()
            namespaces.Add("", "")
            serializer.Serialize(stream, objectToSerialize, namespaces)
            Using reader As StreamReader = New StreamReader(stream)
                stream.Position = 0
                Return reader.ReadToEnd()
            End Using
        End Using
    End Function

    Public Function DeSerialize(Of T)(ByVal serializedObject As String) As T
        Dim serializer As XmlSerializer = New XmlSerializer(GetType(T))
        Using reader As StringReader = New StringReader(serializedObject)
            Return CType(serializer.Deserialize(reader), T)
        End Using
    End Function
End Class 
```

我按照建议重新构建了我的 XML 文件。我让抽屉系统信息正确显示。有没有办法在选择抽屉系统时在第二个 ListBox（或其他类型的控件）中显示有关单个抽屉的信息？此外，由于某种原因，我的图像不会显示在 PictureBox 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:11:15.440

听起来像是一种奇怪的方法。我想如果您将 XML 加载到 TreeView 控件中，您会将所有必要的数据存储到`TreeNode.Tag`属性中，或者存储到 TreeView 之外的内存中的某些数据结构中，这样当他们选择一个节点时，您就不会不必返回 XML 来获取子元素的数据。但是，如果这是您想要做的，这是从 XML 中读取该数据的一种方法：

```
Dim xmlText As String = "<Drawer_System_1>...</Drawer_System_1>..."
Dim doc As New XmlDocument()
doc.LoadXml(xmlText)
Dim parentNode As XmlNode = doc.SelectSingleNode("//Drawer_System_1")
Dim drawerSystemID As String = parentNode.SelectSingleNode("DrawerSystemID").InnerText
Dim drawerSysName As String = parentNode.SelectSingleNode("DrawerSysName").InnerText
Dim drawerSysLocation As String = parentNode.SelectSingleNode("DrawerSysLocation").InnerText 
```

该`TreeNode.Tag`属性只是一个`Object`属性，您可以将其设置为您想要的任何内容。您可以将其设置为字符串、列表、数据集、您自己的自定义对象或其他任何内容。无论对你有意义，这就是它的用途。它允许您存储有关树中每个节点的自定义数据，以便您可以在以后访问它（例如在选择节点时）。例如，如果您有自己的课程，如下所示：

```
Public Class DrawerSystem
    Public ID As String
    Public Name As String
    Public Location As String
End Class 
```

然后，当您为抽屉系统创建一个“TreeNode”时，您可以像这样设置它的标签：

```
Private Sub AddNode(drawerSystem As DrawerSystem)
    Dim node As TreeNode = TreeView1.Nodes.Add(drawerSystem.Name)
    node.Tag = drawerSystem
End Sub 
```

然后，如果单击或选择了一个节点，例如，您可以像这样检索该对象：

```
Dim drawerSystem As DrawerSystem = CType(e.Node.Tag, DrawerSystem)
Label1.Text = drawerSystem.ID
Label2.Text = drawerSystem.Location 
```

我不明白为什么需要在 TreeView 的同一层次结构中显示 XML 中的所有元素。一个简单的抽屉系统列表似乎就足够了。Then when an item in the list was selected, you could show all the details about that drawer system in other controls. 此外，我建议不要尝试循环遍历 XML，而是将 XML 反序列化为匹配的数据结构。例如，如果您像这样重新格式化 XML（只是为了使其更有利于反序列化）：

```
<LegoElementsData>
  <DrawerSystems>
    <DrawerSystem>
      <Id>1</Id>
      <Name>Drawer_System_1</Name>
      <Location>North Wall (2nd from left)</Location>
      <Drawers>
        <Drawer>
          <Id>1-01</Id>
          <Contents>Contents of Drawer 1-01</Contents>
        </Drawer>
        <Drawer>
          <Id>1-02</Id>
          <Contents>Contents of Drawer 1-02</Contents>
        </Drawer>
      </Drawers>
    </DrawerSystem>
  </DrawerSystems>
</LegoElementsData> 
```

然后，您可以在代码中创建匹配的数据结构，例如：

```
Public Class LegoElementsData
    Public Property DrawerSystems() As List(Of DrawerSystem)
        Get
            Return _drawerSystems
        End Get
        Set(ByVal value As List(Of DrawerSystem))
            _drawerSystems = value
        End Set
    End Property
    Private _drawerSystems As List(Of DrawerSystem)
End Class

Public Class DrawerSystem
    Public Property Id() As String
        Get
            Return _id
        End Get
        Set(ByVal value As String)
            _id = value
        End Set
    End Property
    Private _id As String

    Public Property Name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property
    Private _name As String

    Public Property Location() As String
        Get
            Return _location
        End Get
        Set(ByVal value As String)
            _location = value
        End Set
    End Property
    Private _location As String

    Public Property Drawers() As List(Of Drawer)
        Get
            Return _drawers
        End Get
        Set(ByVal value As List(Of Drawer))
            _drawers = value
        End Set
    End Property
    Private _drawers As List(Of Drawer)

    Public Overrides Function ToString() As String
        Return _name
    End Function
End Class

Public Class Drawer
    Public Property Id() As String
        Get
            Return _id
        End Get
        Set(ByVal value As String)
            _id = value
        End Set
    End Property
    Private _id As String

    Public Property Contents() As String
        Get
            Return _contents
        End Get
        Set(ByVal value As String)
            _contents = value
        End Set
    End Property
    Private _contents As String

    Public Overrides Function ToString() As String
        Return _id & " - " & _ contents
    End Function
End Class 
```

然后，为了让您的生活更轻松，我建议您制作自己的序列化程序类，以简化流程，例如：

```
Public Class SimpleXmlSerializer
    Public Function Serialize(ByVal objectToSerialize As Object) As String
        Dim serializer As XmlSerializer = New XmlSerializer(objectToSerialize.GetType())
        Using stream As MemoryStream = New MemoryStream()
            Dim namespaces As XmlSerializerNamespaces = New XmlSerializerNamespaces()
            namespaces.Add("", "")
            serializer.Serialize(stream, objectToSerialize, namespaces)
            Using reader As StreamReader = New StreamReader(stream)
                stream.Position = 0
                Return reader.ReadToEnd()
            End Using
        End Using
    End Function

    Public Function DeSerialize(Of T)(ByVal serializedObject As String) As T
        Dim serializer As XmlSerializer = New XmlSerializer(GetType(T))
        Using reader As StringReader = New StringReader(serializedObject)
            Return CType(serializer.Deserialize(reader), T)
        End Using
    End Function
End Class 
```

然后，当您加载数据时，您可以简单地执行以下操作：

```
Public Class My_LEGO_Elements
    Private Sub My_LEGO_Elements_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim serializer As New SimpleXmlSerializer()
        Dim data As LegoElementsData = serializer.DeSerialize(Of LegoElementsData)(File.ReadAllText("C:\Users\Steven\Documents\Visual Studio 2012\Projects\My_LEGO_Elements\My_LEGO_Elements\Drawer_Systems_3.xml"))
        ListBox1.Items.AddRange(data.DrawerSystems.ToArray())
    End Sub

    Private Sub ListBox1_SelectedValueChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ListBox1.SelectedValueChanged
        Dim drawerSystem As DrawerSystem = CType(ListBox1.SelectedItem, DrawerSystem)
        Label1.Text = drawerSystem.Id
        Label2.Text = drawerSystem.Location
        Label3.Text = drawerSystem.Name
        ListBox2.Items.Clear()
        ListBox2.Items.AddRange(drawerSystem.Drawers.ToArray())
    End Sub
End Class 
```

# python - 如何在 Python 中生成指数增长的范围

> ID：11443737
> 
> 赞同：18
> 
> 时间：2012-07-12T01:04:06.153
> 
> 标签：python

我想使用指数增长的值来测试一些代码的性能。因此，当将一个额外的数字添加到 numbers_size 时，增量乘以 10。这就是我到目前为止的做法，但它看起来有点 hacky。在不引入非标准库的情况下提出改进建议？

```
numbers_size = 100
increment = 100
numbers_range = 1000000000
while numbers_size < numbers_range:
    t = time.time()
    test( numbers_size )
    taken_t = time.time() - t
    print numbers_size, test, taken_t

    increment = 10 ** (len(str(numbers_size))-1)
    numbers_size += increment 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-08-10T12:45:39.853

如果您将 numpy 视为标准之一；），您可以使用[numpy.logspace](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logspace.html)因为这是它应该做的......（注意：100=10^2、1000000000=10^9）

```
for n in numpy.logspace(2,9,num=9-2, endpoint=False):
    test(n) 
```

例子2（注：100=10^2, 1000000000=10^9，想走10x步，就是9-2+1分...）：

```
In[14]: np.logspace(2,9,num=9-2+1,base=10,dtype='int')
Out[14]: 
array([       100,       1000,      10000,     100000,    1000000,
         10000000,  100000000, 1000000000]) 
```

示例 3：

```
In[10]: np.logspace(2,9,dtype='int')
Out[10]: 
array([       100,        138,        193,        268,        372,
              517,        719,       1000,       1389,       1930,
             2682,       3727,       5179,       7196,      10000,
            13894,      19306,      26826,      37275,      51794,
            71968,     100000,     138949,     193069,     268269,
           372759,     517947,     719685,    1000000,    1389495,
          1930697,    2682695,    3727593,    5179474,    7196856,
         10000000,   13894954,   19306977,   26826957,   37275937,
         51794746,   71968567,  100000000,  138949549,  193069772,
        268269579,  372759372,  517947467,  719685673, 1000000000]) 
```

在您的情况下，我们使用，`endpoint=False`因为您不想包含端点...（例如`np.logspace(2,9,num=9-2, endpoint=False)`）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-12T01:12:33.800

为什么不

```
for exponent in range(2, 10):
    test(10 ** exponent) 
```

如果我正确地阅读了您的意图。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-12T01:35:34.730

要生成与您的代码相同的数字：

```
numbers_sizes = (i*10**exp for exp in range(2, 9) for i in range(1, 10))
for n in numbers_sizes:
    test(n) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-12T01:11:43.623

最简单的做法是使用指数的线性序列：

```
for e in range(1, 90):
    i = int(10**(e/10.0))
    test(i) 
```

您可以将序列抽象为它自己的生成器：

```
def exponent_range(max, nsteps):
    max_e = math.log10(max)
    for e in xrange(1, nsteps+1):
        yield int(10**(e*max_e/nsteps))

for i in exponent_range(10**9, nsteps=100):
    test(i) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-12T01:25:28.567

我喜欢 Ned Batcheldor 的回答，但我会让它更笼统一些：

```
def exp_range(start, end, mul):
    while start < end:
        yield start
        start *= mul 
```

然后你的代码变成

```
for sz in exp_range(100, 1000000000, 10):
    t = time.time()
    test(sz)
    print sz, test(sz), time.time()-t 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-18T06:13:38.890

OP 写道“在不引入非标准库的情况下提出改进建议？”

为了完整起见，这里有一个生成指数范围的方法——每个元素都是一个比前一个更大的固定因子：

```
from math import exp
from math import log

def frange(start, stop, numelements):
    """range function for floats"""
    incr = (stop - start) / numelements
    return (start + x * incr for x in range(numelements))

def exprange(start, stop, numelements):
    """exponential range - each element is a fixed factor bigger than the previous"""
    return (exp(x) for x in frange(log(start), log(stop), numelements)) 
```

测试：

```
print(", ".join("%.3f" % x for x in exprange(3,81,6))) 
```

输出：

```
3.000, 5.196, 9.000, 15.588, 27.000, 46.765 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T01:16:04.480

使用生成器表达式：

```
max_exponent = 100
for i in (10**n for n in xrange(1, max_exponent)):
    test(i) 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-07-12T01:09:36.247

**“没有正确阅读问题”和“不怎么做”的**例子

```
for i in xrange(100, 1000000000, 100):
    # timer
    test(i)
    # whatever 
```

就像它得到的一样简单......`xrange`相应地调整

# ruby-on-rails - Rails 中的 PostqreSQL：如何使服务器在本地运行并接受 Unix 域套接字上的连接？

> ID：11443738
> 
> 赞同：2
> 
> 时间：2012-07-12T01:04:33.157
> 
> 标签：ruby-on-rails, postgresql, heroku

所以我是 Rails 的新手，之前只使用过 SQLite3，在使用 PostgreSQL 时我什至很难运行一个简单的 rake 命令。

我只是想按照这个截屏视频的前 5 分钟来安装 Postgres：[http ://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

但即使我按照指示完成了所有操作，当我运行时，我也会`rake db:create:all`收到无处不在的错误消息：

```
could not connect to server: Permission denied
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我到处都看到这个，但是有人可以一劳永逸地回答这个问题（如果这样的任务如此简单）？

我使用自制软件安装 PostgreSQL。

当我运行时`which psql`，它说我正在使用 in 中`usr/bin/psql`的那个，我相信它是 Mac OSX Lion 原生的那个（这不是一件坏事吗？我如何切换到由 homebrew 安装的那个，它位于`usr/local/bin/psql`？）。

我相当肯定 Postgres 至少正在运行：当我运行时`ps auxw | grep postgres`，我得到了四个进程，例如：

```
postgres: stats collector process
postgres: autovacuum launcher process
postgres: wal writer process
postgres: writer process 
```

而且我什至能够`pg`很好地安装我的 gem。我整天都在试图让 Postgres 运行，我感谢任何和所有的帮助！

编辑（有解决方案）：

参考这个链接：

[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

确实是路径问题。所以我按照指示编辑了我的 .bash_profile，并从使用我的本地 psql 安装切换`usr/bin/psql`到由 homebrew 安装的.bash_profile `usr/local/bin/psql`。

然后，我卸载了我的 pg gem，然后重新安装它，然后 rake dr:create:all 开始工作。:)

编辑2：

其实我还是有很多问题！这太令人沮丧了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:30:42.850

您的权限可能搞砸了。尝试

```
sudo chmod -R 777 /var/pgsql_socket/ 
```

这为每个人提供了开放权限，因此可以满足您的开发服务器需求。

现在它应该可以工作了。

# javascript - 函数while循环

> ID：11443742
> 
> 赞同：0
> 
> 时间：2012-07-12T01:05:12.647
> 
> 标签：javascript, function, loops, while-loop

我试图让这个功能在javascript中正常工作，它工作正常我可以发生的是底部console.log（工作（“从地毯上提取了加仑的水。”））；我无法得到“从地毯中提取了加仑的水”。显示在同一行代码中。

```
// Global variable
var waterGallons = 40

var work = function(total) {
    var water = 0;
    while (water < waterGallons) {
        console.log("The carpet company was called out to extract " + water + " gallons of water.")
        water+=4;
    };
    return waterGallons;
}

console.log (work(" gallons of water has been extracted from the carpet.")); 
```

所以使用我得到帮助的答案就是我想出来的，因为我需要使用一个全局变量。所以我的故事将通过改变全局变量而改变。

```
var total = 40

var work = function(total) {
    var water = 0;
    while (water < total) {
        console.log("The carpet company was called out to extract " + water + " gallons of water.")
        water+=4;
    };
    return water;
}

console.log (work(total) + " gallons of water has been extracted from the carpet."); 
```

我想再次感谢你们。我还有一个布尔函数，一个使用 for 循环函数的数组，还有一个过程。所以使用这个我应该能够理解如何创建我的作业的下一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:20:43.607

函数的参数`work`对应于形式参数`total`，它从不打印或以其他方式使用。如果要将其打印到控制台，那么，您必须将其打印到控制台。

目前尚不清楚您要做什么，但这是一种可能性：

```
var waterGallons = 40;
var work = function() {
    var water = 0;
    while (water < waterGallons) {
        console.log("The carpet company was called out to extract " + 
                     water + " gallons of water.")
        water += 4;
    };
    return water;
}

console.log(work() + " gallons of water has been extracted from the carpet."); 
```

如果您*确实*想将字符串作为参数传递给该函数*内*`work`的控制台并将其写入控制台，请使用. 请记住保留我在示例中删除的参数。*`console.log(total)``total`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:40:17.390

还有一个基于 lwburk 先前答案的版本（猜测）：

```
var work = function(total) {
    var water = 0;
    while (water < total) {
        console.log("The carpet company was called out to extract " + 
                     water + " gallons of water.")
        water += 4;
    };
    return water;
}

console.log (work(40) + " gallons of water has been extracted from the carpet."); 
```

这将允许被调用者使用“total”参数定义应该提取的总加仑水。*

# javascript - 使用 eval 解析 JSON 字符串

> ID：11443745
> 
> 赞同：0
> 
> 时间：2012-07-12T01:05:32.387
> 
> 标签：javascript, ajax, json, parsing, eval

```
function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser is too old to run me!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
$.post('userfind.php', function(data) {

$("#resultTXT").val(data);

var response = data;

var parsedJSON = eval('('+response+')');
alert('parsedJSON:'+parsedJSON);

var result=parsedJSON.result;

var count=parsedJSON.count;

alert('result:'+result+' count:'+count);

},'json'

);      }
}
    ajaxRequest.open("POST", "userfind.php", true);
    ajaxRequest.send(null); 
} 
```

> Blockquote 所以我得到了我上面的代码，在你们的帮助下。上面的代码将用字符串填充 txtbox，但我无法访问字符串的每个元素。该字符串是使用 Jsone_encode 从 PHP 文件中分页的数组。

数组是这样的。`[{"user_id":"2790","freelancer_name":"","order_id":"9121","orderamount":"0.00"`

我想做的是编写这样的代码：

```
 document.getElementById("_proId").value = user_id;
document.getElementById("_buyerSt").value = freelancer_name;
document.getElementById("_buyerDesc").value = order_id;
document.getElementById("_mngSt").value = orderamount;
  ... etc 
```

> Blockquote 所以我的问题是如何拆分字符串并获取数据。这 2 个变量

```
var result=parsedJSON.result;

    var count=parsedJSON.count;
    alert (""+result);
    alert (""+count); 
```

只提醒我未定义。

请帮我从字符串中获取数据。

该数组是从 mysql 表中获取的，并且很大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:10:52.323

1\. 看起来没有充分的理由使用 eval 自己解析 json。

您可以使用经过验证的 JSON 库作为[json2.js](https://github.com/douglascrockford/JSON-js)或[JSON-js](https://github.com/douglascrockford/JSON-js/)

2\. 您的 JSON [ {"user_id":"123", ... }, {... }, {...} ] 将被解析为数组。

使用 for each 来迭代 Array 中的对象。

# c++ - 引用 STL 向量类型

> ID：11443746
> 
> 赞同：2
> 
> 时间：2012-07-12T01:05:34.787
> 
> 标签：c++, stl, reference, vector

我正在使用其他人的功能：

```
optimise(std::vector<double> &input) 
```

它编辑输入。

我应该如何将向量传递给这个，我试过了：

```
std::vector<double> input;
input.push_back('several points');
optimise(input); 
```

这有一个链接器错误说：

```
undefined reference to optimise(std::vector<double, std::allocator<double> >&) 
```

如果我试试这个：

```
 std::vector<double> &input;
input.push_back('several points');
optimise(input); 
```

然后出现编译错误：

```
'input' declared as reference but not initialised 
```

如何初始化对向量的引用，或者我做错了什么。编辑：

我没有在我的 CMakeLists 中正确链接库。谢谢大家的帮助，我希望我能把你们都标记为正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:15:07.383

您通过的第一种方式`vector`是正确的。编译器识别出该向量是通过从标头中的签名引用传递给函数的，引用您的向量，并将其传递给函数。您看到链接器错误的事实告诉您编译阶段已成功完成。

出现链接器错误是因为您没有包含`optimise`实现该函数的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:19:27.440

由于某些链接器错误，第一次尝试似乎失败了。您必须确保您调用的函数实际上对链接器可用，无论是在某种库中，还是作为单独的翻译单元（源文件）或类似的。仅包含标头对于编译器就足够了，但对链接器没有帮助。

> “输入”声明为引用但未初始化

这是有道理的：引用始终是对存在于别处的某个对象的引用。因此，如果不先告诉它要引用什么，就不能使用引用。最常见的情况是使用引用作为函数参数。通常该对象将是调用者范围内的普通非引用对象，并通过引用传递给被调用者以避免复制。在这方面，您的第一次尝试是正确的。

# jenkins - 从 Github 构建失败

> ID：11443748
> 
> 赞同：0
> 
> 时间：2012-07-12T01:06:10.360
> 
> 标签：jenkins, jenkins-plugins

我们目前正在为我们的 Rails 应用程序设置 CI。代码托管在 github 上。到目前为止，一切都进行得非常顺利，但我们遇到了一个问题，即代码推送到 github 导致构建失败，甚至在代码被检出之前。

这是詹金斯的输出：

```
Started by user Jeremy Rottman
Building in workspace /var/lib/jenkins/jobs/SweetyHigh-Staging/workspace
Checkout:workspace / /var/lib/jenkins/jobs/SweetyHigh-Staging/workspace - hudson.remoting.LocalChannel@46ffed1d
Using strategy: Default
Last Built Revision: Revision a40cbe653169bc73c445f39e09dcd8cfe66e5fe7 (origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@github.com:Sweety-High/sweetyhigh.git
Commencing build of Revision a40cbe653169bc73c445f39e09dcd8cfe66e5fe7 (origin/master)
Checking out Revision a40cbe653169bc73c445f39e09dcd8cfe66e5fe7 (origin/master)
hudson.util.IOException2: Failed to parse changelog
at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:600)
at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
at hudson.model.Run.execute(Run.java:1488)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:236)

Caused by: java.lang.NullPointerException
at jenkins.plugin.assembla.AssemblaSCMListener.onChangeLogParsed(AssemblaSCMListener.java:32)
at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:598)
... 6 more 
```

完成：失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:50:17.517

日志显示您安装了[Assembla 插件](https://wiki.jenkins-ci.org/display/JENKINS/Assembla+plugin)，并且由于该插件 (a `NullPointerException`) 中的错误，您的构建失败。

简要看一下源代码，它似乎失败了，因为您安装了插件，但尚未在全局 Jenkins 配置中配置任何 Assembla 站点。

我将此错误归档为[JENKINS-14431](https://issues.jenkins-ci.org/browse/JENKINS-14431)。

# numpy - 如何使用 scipy 或 lapack 有效地进行特征向量分解？

> ID：11443751
> 
> 赞同：2
> 
> 时间：2012-07-12T01:06:36.050
> 
> 标签：numpy, fortran, scipy, lapack

我想找到密集复矩阵的特征向量分解`A`

```
A = V.diag(lambda).V^-1 
```

我只需要少量的特征向量来准确地再现矩阵以满足我的需要，但是我需要对特征值执行一些非平凡的过滤以确定要包含哪些特征向量。对于我的问题，使用奇异值分解是不合适的，因为特征值/特征向量是我想要处理的具有物理意义的结果。

我正在使用`scipy.linalg.eig`，它只是 lapack`ZGEEV`例程的一个方便的包装器。在数学上，`V^-1`应该可以从左特征向量的适当缩放版本中获得。我本来希望这比反转`V`右特征向量矩阵更有效和更稳定

然而，当我比较这两种方法时，似乎在分解矩阵中同时使用左特征向量比使用反转右特征向量准确得多。大概这是某种舍入或截断错误。我不希望反转右特征向量的矩阵，因为它可能非常大（大约 1000 秒），我需要多次重复此操作。

scipy 中是否有一些可用的例程（或 lapack 或其他一些我可以自己包装的例程）可以有效且准确地进行分解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:15:39.907

我现在已经意识到可以`V^-1`从左侧特征向量中获取`U`，但是诀窍是将 的元素标准化`U`为 的对应元素`V`。我正在对自己的列进行规范化`U`，这是不正确的，但足够接近以至于看起来几乎是正确的。

所以我是正确的，你可以从中得到`V^-1`，`U`这只是我实施中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:35:32.673

如果我理解正确，您想通过执行乘法重新获得（近似值）A，但例程仅返回 V 本身，并且您不想反转 V。

但是，该例程还返回左特征向量 U 的矩阵，并且有可能（正如您在我的原始答案的评论中指出的那样）从 U 获得 V 的倒数，如下所示：

如果我们计算矩阵 U*A*V 的第*ij*个元素，那么它必须等于

```
U_i * lambda_j * V_j 
```

和

```
U_i * lambda_i * V_j 
```

其中 U_i 是 U 的第*i*行，V_j 是 V 的第*j*列（但是请注意，像 zgeev 这样的 lapack 例程将行向量作为 Fortran 列向量返回）。

因此，矩阵 U*V 是对角线，因此，正如您在自己的答案中所说，您可以通过以下方式构造 V^-1

```
V^-1_i = U_i / (U_i * V_i) 
```

其中 U 和 V^-1 上的下标表示行，V 上的下标表示列。

# php - 在 Cakephp 中从 MySQL 调用存储过程只得到第一行结果

> ID：11443753
> 
> 赞同：0
> 
> 时间：2012-07-12T01:07:13.607
> 
> 标签：php, mysql, sql, cakephp

当我调用我的 SP 时，它只给了我第一个结果，而在第二个调用中，它给了我这个：

```
Error: SQLSTATE[HY000]: General error: 2014 Cannot execute queries while other unbuffered queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code is only ever going to run against mysql, you may enable query buffering by setting the PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute. 
```

好吧，我已经按照 Stackoverflow 的建议检查了相关问题。有些人给了我这个想法，但是当我尝试时，它不起作用。

这是调用我的 SP 的函数内部的循环：

```
foreach ($filenames as $value)
    {
    $queryssid = "CALL GetUniqueSSIDByCategoryCombine('$username','$value');";
    $dataUniqueSSID = $this->User->query($queryssid);
    pr($dataUniqueSSID);
    } 
```

这是我的SP：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `GetUniqueSSIDByCategoryCombine`(uid VARCHAR(50),filename VARCHAR(50))
 BEGIN
 SELECT  DISTINCT(transaction_details.essid) AS 'SSID', transaction_details.protocol AS 'protocol', TRANSACTION.filename
 FROM    transaction_details transaction_details, TRANSACTION TRANSACTION  
 WHERE transaction_details.uid_filename_link = TRANSACTION.uid_filename_link AND transaction_details.uid_filename_link = 
     (
         SELECT distinct(transaction.uid_filename_link) FROM TRANSACTION 
         WHERE transaction.uid = uid AND transaction.filename = filename
     ) 
 ORDER BY row_id;
     END 
```

什么可能是解决方案。这是我处理这个错误的第二天，这有点令人沮丧。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:07:27.393

哦，好吧，罪魁祸首是我的 PHP 版本。我从 PHP 5.3.1 升级到最新版本。

# php - Symfony2 / Doctrine中的实体和模型有什么区别

> ID：11443755
> 
> 赞同：19
> 
> 时间：2012-07-12T01:07:20.493
> 
> 标签：php, symfony, fosuserbundle

我正在浏览 FOSUserBundle。

`Model/User.php` 我想了解和之间有什么区别`Entity/User.php`。

模型和实体不能相同吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-12T01:52:33.750

这是关于教义 2 的角色和术语的[最佳总结](http://web.archive.org/web/20110913160658/http://test.ical.ly/2011/05/09/terminology-in-symfony2-and-doctrine2-record-vs-entity-vs-document-vs-model/)。

Entity 被 Doctrine 2.0 ORM（以及 Java 世界的 Hibernate）中的 UnitOfWork 模式使用，也是现实世界中事物的对象表示。它具有与记录相同的属性和方法，但它不知道它的持久性。它基本上是一个 POPO（普通的旧 PHP 对象）。这允许这些类和对象非常轻量级。

模型是事物的概念对象表示。该术语可用于上述所有内容。记录是模型，就像实体或文档一样。该术语描述了事物的对象表示。

因此，如果您想创建一个包含一些模型的包，并且*希望您的包独立于任何持久层，您将创建定义该事物的模型类和接口。*

您将在其中定义和/或实现并非特定于任何持久性实现的所有内容，并且您将通过委托使用相关实体或文档类来处理特定内容。

例如，这是**在定义用户模型的 FOSUserBundle 中完成的**。这个用户模型在整个包中使用，但没有完整的实现来访问它自己的数据（我没有看，但我认为它可能只是一个接口）。*最终实现在实体类中完成，另一个在文档类中完成，因此**无论您使用 MySQL 还是 MongoDB，您仍然可以使用相同的 User 模型**。*您甚至可以在不更改代码的情况下从一个切换到另一个，因为它始终使用独立于实体或文档的模型。

# .net - Silverlight COM 路径问题

> ID：11443758
> 
> 赞同：0
> 
> 时间：2012-07-12T01:08:04.483
> 
> 标签：.net, silverlight, dll, com, native

我目前正在使用一些带有 Silverlight 的 COM dll，我遇到了一个奇怪的问题。我创建了两个正在使用的 .NET COM dll，它们都通过 DllImport 引用其他 dll。他们工作得很好。

然后我在项目中添加了第三个 COM dll。这一个也通过 DllImport 引用其他 dll。我一创建它，其他两个就中断了。他们抛出错误，说找不到他们正在使用的其他 dll。然而，第三个 dll 工作正常。

这就是我创建它们的方式

```
AutomationFactory.CreateObject("Com1");
AutomationFactory.CreateObject("Com2");
AutomationFactory.CreateObject("Com3"); 
```

同样，如果我只使用 Com1 和 Com2，它们工作得非常好。如果我添加 Com3 它工作正常，但其他两个找不到他们的原生 dll。

我什至不调用 Com3 上的任何函数，只是创建它，其他函数停止工作。

有任何想法吗？你认为它可能是本机dll吗？我不明白第三个是如何工作的，但其他人不明白，如果是本机 dll 破坏了某些东西，你会认为它们都会停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:21:54.573

我想出了一个让它工作的方法。我仍然不是 100% 确定为什么需要这样做。

如果我使用 Directory.SetCurrentDirectory 将当前目录设置为具有本机 dll 的目录，则它可以工作。

Com3 似乎没有更改目录，但由于某种原因，它导致其他 COM dll 在当前工作目录中查找，而不是在它们注册的位置。

# security - 文件/文件夹的 Google Drive SDK 权限

> ID：11443759
> 
> 赞同：6
> 
> 时间：2012-07-12T01:08:05.623
> 
> 标签：security, google-drive-api

我们正在创建一个连接到 Google Drive 的桌面应用程序，并对用户选择的图片进行一些处理。请注意，图片以任何方式存储在那里（假设用户使用桌面 Google Drive 同步工具上传它们）。

根据此[https://developers.google.com/drive/apps_overview](https://developers.google.com/drive/apps_overview)，应用程序可以请求对 Drive 应用程序创建的文件或所有文件的权限。

如果您创建一个 Web Google Drive 应用程序，用户似乎可以选择逐个文件授予权限。

但是，我们希望用户向我们的 Google Drive 桌面应用程序授予文件夹权限，这样我们的软件只能看到用户明确授予我们的应用程序的文件夹/文件。

否则我们需要访问他们的所有文件，这对用户来说是一种安全问题（如果他们有各种各样的文件，有些甚至可能是敏感的，如果我们只与一个子集）。

注意：在我的测试中，我使用的是 OAuth 2，它运行良好。只是我们被迫请求完整的权限。我们正在使用 .NET，这并不重要。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T23:38:17.873

正如您提到的，每个文件夹的权限对您来说是理想的。我们知道此功能，并计划在未来的版本中使用它。其他一些有趣的范围是只能访问某些文件类型。不幸的是，所有这些都不可用，与此同时，如果您正在构建桌面应用程序，您将不得不使用完全访问驱动器范围（或只读范围，如果您不需要编辑文件）。

# php - 如何在 PHP 中使用 Blueimp jQuery 文件上传器？

> ID：11443761
> 
> 赞同：1
> 
> 时间：2012-07-12T01:08:27.733
> 
> 标签：php, javascript, jquery, ajax, blueimp

我正在尝试实现 Blueimp jQuery 文件上传器，并且在让它在我的基于 PHP 的站点中工作时遇到了令人沮丧的时间。

我的主要问题是 AJAX。我想做的是上传后，

1.  它会重定向到（比方说）`abc.php`。
2.  上传后（重定向页面之前），我想将文件名保存到 MySQL 数据库。

我知道如何用 PHP 处理数据库，但不知道我不能把我的 PHP 代码放在哪里。

对于第一个问题，我想我需要改变`main.js`

```
$(function () {

'use strict';

// Initialize the jQuery File Upload widget:
$('#fileupload').fileupload();

// Enable iframe cross-domain access via redirect option:
$('#fileupload').fileupload(
    'option',
    'redirect',
    window.location.href.replace(
        /\/[^\/]*$/,
        '/cors/result.html?%s'
    )
);    
    // Load existing files:
    $('#fileupload').each(function () {
        var that = this;
        $.getJSON(this.action, function (result) {
            if (result && result.length) {
                $(that).fileupload('option', 'done')
                    .call(that, null, {result: result});
            }
        });
    });

}); 
```

谢谢百万。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:38:34.600

要进行重定向，您最好只提交表单并通过 PHP 处理所有内容，除非您丢失了我猜的进度指示器。

否则，如果我对您的理解正确，您只需使用回调函数在上传完成时执行 javascript 重定向。您只需向其中一种方法添加选项，例如：

```
$('#fileupload').fileupload({
done: function (e, data) {
    // Do redirect using either href or replace method

   // similar behavior as clicking on a link
   window.location.href = "/abc.php";

    }

}); 
```

请参阅有关重定向的答案：[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# php - 当用户在 Intranet 上时，jQuery 动态添加表单元素数据未发送到数据库

> ID：11443783
> 
> 赞同：0
> 
> 时间：2012-07-12T01:11:35.153
> 
> 标签：php, javascript, jquery, forms, intranet

我有一个有趣的问题。我为跑步者建立了一个表格来报名参加比赛。该表单允许用户添加多个跑步者并一次全部注册。附加的运行器功能是使用 jQuery 编写的。

这是添加额外跑步者的 jQuery ......

```
<script type="text/javascript">
var current= 1;
$(document).ready(function() {
    $("#addrunner").click(function() {
        current++;
        $newrunner= $("#runnerTemplate").clone(true).removeAttr("id").prop("id", "fieldSet" + current).insertBefore("#runnerTemplate");
        $newrunner.find("input").each(function(i) {
            var $currentElem= $(this);
            $currentElem.prop("name",$currentElem.prop("name")+current);
            $currentElem.prop("id",$currentElem.prop("id")+current);
        });
        $newrunner.find("select").each(function(i) {
            var $currentElem= $(this);
            $currentElem.prop("name",$currentElem.prop("name")+current);
            $currentElem.prop("id",$currentElem.prop("id")+current);
        });
        var f = $("#fieldSet"+current);
        f.html(f.html().replace("fieldSetID", "fieldSet"+current));
        $newrunner.appendTo("#mainField");
        $newrunner.removeClass("hideElement");

        var prevvalue=$("#count").prop("value");
        $("#count").prop("value",prevvalue+","+current);

        });

});
</script> 
```

该表单是一个基本的 html 表单。

除非用户在 Intranet 上，否则该表单将按预期工作。如果用户在 Intranet 上，则表单只会提交第一个运行者；通过 jQuery 添加的所有其他跑步者的数据在提交时不会传输。这让我感到困惑。在家里工作，它完美地工作，没有问题。但是，一个客户从他的办公室在 Intranet 上使用它，第一个跑步者可以工作，但添加的其他跑步者不能。

欢迎任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:39:06.637

有些浏览器对 DOM 对象有特殊的安全性，那么您需要将对象转换为 html，然后替换 ID/名称，最好在字段中使用隐藏模板，请遵循以下功能代码：

基于 javascript getTime 的唯一 ID，以及轻松获取后端的数据组

```
<script type="text/javascript" charset="utf-8">
jQuery(document).ready(function($){
    $('a[clone_nested]').on('click', function(){
        // div#runner_build
        var clone_build = $('#' + $(this).attr('clone_nested') + '_build');

        // div#runner_clone
        var clone_placeholder = $('#' + $(this).attr('clone_nested') + '_clone');
        var clone_object = $('.nested_fields:first', $(clone_build)).clone();

        $(clone_object).html($(clone_object).html().replace(/clone_key/g, (new Date().getTime())));
        $(clone_object).find('input[name*="_destroy"]').val(false).end().hide();
        $(clone_placeholder).before($(clone_object));
        $(clone_object).slideDown();
    });
});
</script>

<div>
    <div id="runner_build">
        <div class="nested_fields">
            <input type="text" name="runners[clone_key][name]" value="" id="runner_clone_key_name">
            <input type="text" name="runners[clone_key][address]" value="" id="runner_clone_key_address">
            <input type="text" name="runners[clone_key][phone]" value="" id="runner_clone_key_phone">
            <input type="hidden" name="runners[clone_key][_destroy]" value="true" id="runner_clone_key__hidden">
        </div>
    </div>
    <div id="runner_clone"></div>
    <a href="javascript:void(0)" clone_nested="runner">add runner</a>
</div>

<?php
unset($_REQUEST['runners']['clone_key']);
foreach($_REQUEST['runners'] as $runner){
    if($runner['_destroy'] == true){ continue; }    
}
?> 
```

# android - 如何在主 Activity 未启动时从 AsyncTask 发送通知？

> ID：11443787
> 
> 赞同：0
> 
> 时间：2012-07-12T01:12:16.053
> 
> 标签：android, android-notifications, android-notification-bar

我有一个 AsyncTask 启动时启动（由服务调用）。在某些情况下，我想发送通知以启动主 Activity。当我尝试打电话时，我的问题来了：

```
NotificationManager notManager = (NotificationManager) getSystemService(ns); 
```

eclipse 向我显示一个错误，因为 AsyncTask 没有 getSystemService 方法。任何的想法？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:48:45.133

因为 getSystemService 是 Context 类的方法。[在这里](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)查看。

在调用函数之前，在 AsyncTask 中创建一个 Context 变量。然后在你的构造函数中初始化它，即

```
Context context;

public MyAsyncTask(Context contextin)
{ context = contextin;} 
```

然后使用这个上下文变量来调用你的函数：

```
NotificationManager notManager = (NotificationManager) context.getSystemService(ns); 
```

执行 AsyncTask 时不要忘记输入上下文：

```
MyAsyncTask mytask = new MyAsyncTask(getApplicationContext());
mytask.execute(); 
```

我也觉得 IntentService 会更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:12:46.413

You could start a service that launches your application at the end of the background thread in your asynctask.

# ssis - Sql Server 2008/SSIS：传输 Sql Server 对象失败，未生成有用的调试信息

> ID：11443793
> 
> 赞同：1
> 
> 时间：2012-07-12T01:12:51.050
> 
> 标签：ssis

我正在尝试将 Sql Server 2008 数据库从生产服务器复制到开发服务器。我设置了一个新的空目标数据库，并将 Transfer Sql Server Objects 任务添加到控制流窗格。我将任务配置为使用 SMOServer 连接（两者都测试正常）。我试过复制所有对象和只复制我想要的对象。我已将其设置为首先删除目标对象，即使目标数据库中没有任何内容。

然而它拒绝工作。尽管我已经尝试打开我能找到的每个日志记录选项，但它绝对不会产生任何错误信息。我得到的只是验证阶段的成功，一系列警告说某些类的对象不存在复制（这是正确的），然后是“黄色区域”中的“挂起”（即任务框是以黄色突出显示）。

像复制数据库这样简单、直接和经常完成的事情怎么会如此困难？我究竟做错了什么？除了使用 SSIS，我的意思是:)。

ps 叹息。每一次——每一次——我都尝试使用 SSIS 来做一些应该非常简单的事情，它最终变成了一个皇家 PITA。恕我直言，这是微软对世界造成的最糟糕的开发软件之一。我希望在雷德蒙德负责它的人有一次能坐在我旁边……这样他就可以体验到相当于 10,000 个太阳的愤怒和沮丧的热度 :)。

**编辑：**

为了回应 Diego 的反馈，我应该提到我在源数据库所在的服务器上没有系统管理员权限。它在第 3 方托管服务上。

此外，我针对此问题的“解决方法”涉及从目标服务器上的 SqlServer Management Studio 中执行导入数据。这不是一个好的解决方法——它忽略了所有的键、触发器、存储过程等——但它至少让我的核心数据得到了理解。

但是我在那里也遇到了一个问题，因为我在源服务器上使用了“非集成安全性”，但在目标/目标服务器上使用了集成安全性。向导中没有任何内容可以指出以这种方式做事的问题，但事实证明它会导致生成的 SSIS 包失败。安全方法必须在事务的两个“端”上匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:58:19.457

有时 10,000 个太阳是不够的 :) 我理解您的沮丧，SSIS 在某些情况下确实很难处理，但它是一个非常强大的工具。

无论如何，我会告诉你从检查权限开始。在选择“首先删除目标对象”移动登录名之前，我遇到了问题，并且我的用户没有创建登录名的权限，因此首先删除了它们，当需要重新创建它们时，包失败，留下我的没有登录的实例并将我锁定在 SQL 之外。

真是令人沮丧的情况，我会在组件上写一些东西来检查，在删除之前，如果我有权创建防止这种情况的对象。

是的，无论如何，尝试使用系统管理员用户运行你的包

# c++ - NSIS 插件：无法从参数函数中获取 HWND

> ID：11443794
> 
> 赞同：0
> 
> 时间：2012-07-12T01:12:59.607
> 
> 标签：c++, winapi, nsis

我有自己制作的 NSIS 插件 DLL。该 dll 有一个函数，它将 hwnd id 编号作为参数，然后创建一个编辑框窗口，该 hwnd 作为编辑框的父 hwnd。

**我的问题：**我无法将 HWND 传递给我的 NSIS 插件 DLL。我可以检索 hwnd id，然后识别实际的 hwnd（我认为）但是当我创建我的编辑框时它从未显示在 hwnd 上？

我究竟做错了什么。如何正确找到作为参数传递的 hwnd？

```
 extern "C" void __declspec(dllexport) __cdecl CreateEditbox(HWND hwndParent, int string_size, TCHAR *variables, stack_t **stacktop, extra_parameters *extra)
    {
        g_hwndParent=hwndParent;
        EXDLL_INIT();

        {
            int hwndID = popint();
            HWND hwnd  = GetDlgItem(hwndParent, hwndID);
            HWND a = CreateWindowEx(WS_EX_TRANSPARENT, TEXT("Edit"), text, WS_VISIBLE|WS_CHILD, 20, 20, 100, 20,
            hwnd, NULL, GetModuleHandle(NULL), NULL);
        }
    } 
```

我的 NSIS 代码：

```
 Page custom Start

    Function Start
        nsDialogs::Create 1018
        Pop $0

        tbox::CreateEditbox $0

        nsDialogs::Show
    FunctionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:44:05.920

[nsDialogs::Create 返回内部对话框](https://stackoverflow.com/a/5832395/3501)的 HWND（不是 ID）。

nsDialogs 已经可以创建编辑框，因此您当前的代码毫无意义......

# java - Java - ArrayOutOfBoundsException 帮助我

> ID：11443800
> 
> 赞同：-2
> 
> 时间：2012-07-12T01:14:25.263
> 
> 标签：java, arrays, exception, compiler-errors

```
import java.util.*;

import java.util.Arrays;

public class ScoreCalc {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        char[] alphabet = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
        int[] score = {1,3,3,2,1,4,2,4,1,8,5,1,3,1,1,3,10,1,1,1,1,4,4,8,4,10};
        System.out.println("Enter word: ");
        String word = in.nextLine();
        int totalScore = 0;
        char[] wordArray = word.toCharArray();
        for(int i=0; i<wordArray.length; i++) {
            System.out.println(wordArray[i]);
            int index = Arrays.asList(alphabet).indexOf(wordArray[i]);
            System.out.println(index);
            totalScore = totalScore + score[index];
        }
        System.out.println(totalScore);
    }
} 
```

这在线程“main”java.lang.ArrayIndexOutOfBoundsException中不断出现异常：-1

因为它在数组字母表中找不到任何字符，请有人帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:18:28.003

`indexOf(wordArray[i])`正在返回-1。我怀疑这是由于大写字母和/或特殊字符造成的。首先执行此操作并添加错误检查：

```
word.toLowerCase().toCharArray() 
```

无论如何，我会做这样的事情，因为它更干净：

```
String alphabet = "abcdefghijklmnopqrstuvwxyz"; 
```

进而

```
int index = alphabet.indexOf(wordArray[i]);
if(index == -1) {
    // handle the special character
} else {
    totalScore += score[index];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:28:15.633

所以我要做的第一件事就是让这一切都是面向对象的，如下所示：

```
public class CharacterScore  //name this whatever makes you happy
{  
   int value;  
   char character;  

   public CharacterScore(int value, char character)  
   {  
     this.value=value;  
     this.character=character;  
   }  //getters/setters  
} 
```

然后在您的主程序中，您将执行以下操作：

```
private static List<CharacterScore> characterScores;  
static  
{  
   characterScores = new ArrayList<CharacterScore>();  
   String alphabet = "abcdefghijklmnopqrstuvwxyz";  
   for(char current : alphabet.toCharArray())  
   {  
     characterScores.add(new CharacterScore((int)Math.random() *10), current));
   }  
} 
```

现在，当您获得用户输入时，您可以`word`将其转换为`char[]`执行一些代码，如下所示：

```
for(CharacterScore current : characterScores)  
{  
    for(int i = 0; i <wordArray.length; i++)  
    {  
       if(current.getCharacter() == wordArray[i])  
       {  
             recordScore(current.getValue());  
       }  
    }  
} 
```

这不一定是最好的方法，但我想帮助您理解这些概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:40:22.740

问题的原因是方法的参数`Arrays.asList`是通用可变参数，`(T... a)`并且您使用的是原始字符数组。

解决方案：使用对象`Character[] alphabet = {'a','b', ...}`而不是原语`char[] alphabet = {'a','b', ...}`，因为`T...`它不会威胁`char[] alphabet`作为对象数组，而是作为一个对象，因此您的列表将仅包含对该数组的引用。

# vb.net - Oracle 数据库以编程方式更改用户密码

> ID：11443801
> 
> 赞同：0
> 
> 时间：2012-07-12T01:14:43.530
> 
> 标签：vb.net, oracle, change-password

有没有办法使用 .net 以编程方式重置我的 Oracle 数据库密码？

或者是否有任何 sql 查询来重置我的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:08:01.420

为了扩展@Glenn 的评论，该`ALTER USER`语句用于更改密码。此语句可用于更改活动用户的密码，如果活动用户已被授予 ALTER USER 系统权限，则可用于更改任何用户的密码。请参阅[此处的 ALTER USER 的 Oracle 文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_4003.htm)。

分享和享受。

# bash - bash -c 像 nohup 一样工作吗？

> ID：11443802
> 
> 赞同：5
> 
> 时间：2012-07-12T01:14:46.583
> 
> 标签：bash, daemon, nohup

在 redhat 中使用旧的 initscript 时，我遇到了这样的问题

`daemon --user $USER --pidfile $PIDFILE "cmd >>/var/log/cmd.log 2>&1 &"`

它似乎很可疑，因为它不使用 nohup。但是，程序可以正常工作，即使退出控制终端也能保持运行。进一步调查我发现，`bash -c 'sleep 1000&'`即使退出了调用它的终端，例如命令似乎仍然存在（如果没有 nohup，这应该是不可能的）。我用最新的 ubuntu 验证了这种行为。

所以我的问题是，这种行为众所周知吗？也就是说，我可以在我的初始化脚本中使用它而不是使用 nohup 吗？或者它是bash中的一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:16:37.687

这激起了我的好奇心：SIGHUP 的行为是否像以前一样？第一条线索来自 bash 手册页`shopt`：

> **huponexit**如果设置，bash 将在交互式登录 shell 退出时向所有作业发送 SIGHUP。

在 vanilla Ubuntu 12.04 安装中，即使对于交互式会话，huponexit 也默认为“关闭”。作为一名经验主义者，我希望看到它的实际应用：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>

void
hupped(int i)
{
    fprintf(stderr, "received SIGHUP 0x%x\n", i);
    exit(1);
}

int main(int argc,char * argv[])
{
    fprintf(stderr, "registering SIGHUP handler for PID %d\n", getpid());
    signal(SIGHUP, hupped);
    sleep(3600*5);
    return 0;
} 
```

即使 stdin 和 stdout 绑定到 tty，它也不会在 shell 退出时收到信号，这与文档一致。正如预期的那样，该进程成为 init 的子进程，并且与 pty 的连接被关闭。

从它的默认值来看，SIGHUP 对于 bash 交互式会话来说并不被认为是“有趣的”。然而，一旦你依赖它，你就会找到一个反例，很可能是在最糟糕的时候。

# c++ - 在c ++函数中，指针与索引数组

> ID：11443808
> 
> 赞同：2
> 
> 时间：2012-07-12T01:15:20.933
> 
> 标签：c++, optimization, pointers, compiler-construction, paging

这个问题类似于[之前](https://stackoverflow.com/q/2857055/1273037)提出的问题，但我认为不考虑内存分页。所以，我在这里再次提出类似的问题：

```
// version 1
int nums[100];
int* pNum = nums;
for(int i=0;i<100;i++,pNum++){
  foo(pNum);
}

// version 2
for(int i=0;i<100;i++){
  foo(nums[i]);
} 
```

哪个版本会更快？之前有人说生成的汇编代码会非常相似，因为两个版本都需要递增内存地址的位置，但是考虑到一个非常大的数组，内存分页性能会显着改变吗？因为其中一个需要长移位，而另一个需要从数组的基内存地址移位？我知道它非常依赖于平台/编译器，但仍想了解人们的常见做法，尤其是处理大型数据类型，如图像处理或科学计算？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T01:20:46.117

普遍的共识是，对于原始类型，没有区别。大多数编译器会为此生成完全相同的代码（大概是您的意思`foo(*pNum)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:45:59.167

> 我知道它非常依赖于平台/编译器

确切地

> 但仍想了解人们的普遍做法，尤其是处理图像处理或科学计算等大数据类型？谢谢。

这两种做法都很常见，就像使用向量和迭代器一样。您正在担心一些极有可能无关紧要的事情。使用最能表达您在脑海中可视化算法的方式的方式，因此更容易正确维护和发展。

# javascript - 如何使用 JSP 将 JSON 数据发送到服务器并获取 JSON/XML 作为响应

> ID：11443811
> 
> 赞同：0
> 
> 时间：2012-07-12T01:15:34.743
> 
> 标签：javascript, json, jsp

我是 Web 应用程序的初学者。我在 glassfish 服务器上使用 java EE 创建了一个动态 Web 项目。现在我想让客户端使用 json 向服务器发送数据，并使用 json 或 xml 从服务器接收数据。通过在线搜索，我现在清楚如何在服务器端编程。现在我使用 ajax 发送 json 数据。但是，也许在服务器上编写代码很容易，我找不到任何与服务器相关的代码。我的服务器端应该使用 JSP 读取 json 数据，使用 bean(finished) 生成一些数据并将数据发回。这是代码，我不知道问题出在哪里。任何人都可以给我任何建议吗？你的帮助对我来说意义重大！

这是客户端的ajax代码。我从表格中发送了两个输入数字

```
$(function() {
    $("#myform").submit(function() {
        var lat = $("#num1").val();
        var lon = $("#num2").val();
        alert("form");

        if (num1 == '' || num2 == '') {
            $('.success').fadeOut(200).hide();
            $('.error').fadeOut(200).show();
        } else {
            $.ajax({
                type : "POST",
                url : "marker.jsp",
                contenttype : 'application/json; charset=utf-8',
                data : {
                    "num1" : "wtf",
                    "num2" : $("#num2").val(),
                },

                success : function(msg) {
                    $('.success').fadeIn(200).show();
                    $('.error').fadeOut(200).hide();
                    alert(msg);

                }
            });
        }

        return false;
    });
}); 
```

但是切换到jsp页面后，只发现显示了两个空值，这是服务器上的代码，我一开始打算发送xml，我不确定request.getParameter是否可以工作以及如何发回这些xml 数据或使用 json 格式发回数据。帮助！

```
<?xml version="1.0" encoding="UTF-8"?>
<%@ page contentType="text/xml" %>
<%@ page             import="javax.naming.InitialContext,net.roseindia.ejb3.stateless.*,javax.ejb.EJB,java.util.*"%> 
```

```
<%
        try {

            String s1 = request.getParameter("num1");
            String s2 = request.getParameter("num2");
    %>
            <%=s1%>
            <%=s1%>

    <%
            if (s1 != null && s2 != null) {
                List<String> textdatas = cal.GetTextResults(s1, s2);

                for (String textdata : textdatas) {

                String textLocation= "("+textdata.split("\\t",2)[0]+")";
                System.out.println(textLocation);
    %>
    <text>
        <location><%=textLocation%></location>
        <event> <%=textdata.split("\\t",2)[1]%></event>
    </text>
    <%
                }

                List<String> images = cal.getImage();

                for(String image: images){
                System.out.println(image);
    %>          
    <image>
        <imglocation><%=image.split("\\t",2)[0]%></imglocation>>
        <path><%=image.split("\\t",2)[0]%></path>
    </image>

    <%          
            }
            }
        }// end of try
        catch (Exception e) {
            e.printStackTrace();
            //result = "Not valid";
        }
    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:02:16.780

如果你没有使用任何 MVC 框架，我建议你采用一个。从 JSP 呈现 XML/JSON 似乎不是一个好的/简单的做法。不难看出您的代码变得过于繁琐......并不是说它可能不是有效的代码。

我建议您采用 MVC 框架 - 我使用[VRaptor](http://vraptor.caelum.com.br/en/)，它是一个非常好的和简单的框架，可以让您开发 RESTful Web 应用程序，甚至不知道它。请务必查看此[一分钟指南](http://vraptor.caelum.com.br/documentation/vraptor3-one-minute-guide/)！！！这个框架通过封装[ThoughtWorks XStream 框架](http://xstream.codehaus.org/)使得完成你的任务变得非常简单。看看使用 JSON 对象响应请求需要什么：

```
 import static br.com.caelum.vraptor.view.Results.*;

    @Resource
    public class ClientsController {

    private final Result result;
    private final ClientDao dao;

    //result and dao parameters gets inject by VRaptor that
    //by its turn lets you chose which Dependency Injection framework
    //you wouldd like to be using with - pretty much as a plugin
    public ClientsController(Result result, ClientDao dao) {
        this.result = result;
        this.dao = dao;
    }

    @Get("/client/json")
    public void loadJson(MyParam param) {
        result.use(json()).from(dao.getClient(param.id)).serialize();
    }

    @Get("/client/xml")
    public void loadXml(MyParam param) { 
        result.use(xml()).from(dao.getClient(param.id)).serialize();
    }
} 
```

请注意，Vraptor 从 JSON 反序列化 MyParam 对象，并将其注入到您的控制器操作请求到达！

此示例取自[此页面](http://vraptor.caelum.com.br/documentation/view-and-ajax/)！

# javascript - 限制显示多少动态表单字段并使用 javascript 验证为图像

> ID：11443812
> 
> 赞同：0
> 
> 时间：2012-07-12T01:15:38.490
> 
> 标签：javascript, html

我有以下启用了 jquery 的 javascript：

```
<form>
    <input type="file">
</form>

jQuery(function($) {

  $('form').delegate('input[type=file]', 'change', function() {
    var form = $(this).closest('form');
    form.append('<input type="file">');
  });

}); 
```

当用户添加他们想要上传的文件时，它将动态添加文件上传字段。如何将其限制为仅图像，并在添加 5 张图像后停止添加新字段？

我正在尝试从拥有众多字段中切换，我将其验证为如下图像：

```
var valid_extensions = /(.gif|.jpg|.jpeg|.png)$/i;
function CheckExtension(fld){
  if (valid_extensions.test(fld.value)) return true;
  alert('only gif, png or jpg formats are allowed!');
  fld.select();
  fld.value="";
  fld.focus();
  return false;
}

<input type="file" onChange="return CheckExtension(this);"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:02:46.973

知道你的目标，你应该重写你的函数：

```
var checkExtension;
var valid_extensions = /(.gif|.jpg|.jpeg|.png)$/i;
var limit = 5; // define the limit of rows here
var i = 0;
$('form').delegate("input[type=file]", "change", function () {
    if (i < limit && checkExtension(this)) {
        $('form').append( $("<input>").attr({type: "file"}) );
    }
    i++;
});
checkExtension = function (fld) {
    if (valid_extensions.test(fld.value)) return true;
    alert('only gif, png or jpg formats are allowed!');
    fld.select();
    fld.value="";
    fld.focus();
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:22:28.357

您可以使用 HTML5 的[`accept`](https://developer.mozilla.org/en/HTML/Element/Input)属性来指定您将接受哪些 mimetype。

对于您的限制，一个简单的递增整数和一个三元应该处理它，如下所示：

```
var i = 0;
$('form').delegate('input[type=file]', 'change', function() {
  var form = $(this).closest('form');
  i < 5 ? form.append('<input type="file">') : "";
  i++;
}); 
```

如果你想使用 javascript，谷歌搜索返回了这个 Stack Overflow 答案： [Preview an image before it is upload](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:21:00.560

在@Austin 的帮助下，这是适合我的最终代码。它将动态创建文件输入字段并仅接受图像。我仍在测试，但这**应该**适用于所有支持 js 的浏览器。

```
<form>
<input type="file">

<script>
jQuery(function($) {

    var checkExtension;
    var valid_extensions = /(.gif|.jpg|.jpeg|.png)$/i;
    var limit = 5; // define the limit of rows here
    var i = 1;
    $('form').delegate("input[type=file]", "change", function () {
        if (i < limit && checkExtension(this)) {
            $('form').append( $('<input type="file">') );
        }
        i++;
    });
    checkExtension = function (fld) {
        if (valid_extensions.test(fld.value)) return true;
        alert('only gif, png or jpg formats are allowed!');
        fld.select();
        fld.value="";
        fld.focus();
        return false;
    }

});
</script>
</form> 
```

# objective-c - 再次不平衡调用开始/结束外观转换

> ID：11443813
> 
> 赞同：1
> 
> 时间：2012-07-12T01:15:46.120
> 
> 标签：objective-c, xcode, uiviewcontroller

我知道这个问题已经被提出并回答了，但我找不到解决方案。

即使我没有推动有罪的视图控制器，我也会遇到此错误：

开始/结束外观转换的不平衡调用。

这是我的代码 NewsViewController.m

```
#import "NewsViewController.h"
#import "XMLToObjectParser.h"
#import "UneNews.h"

#define USE_CUSTOM_DRAWING 1

@interface NewsViewController ()

@end

@implementation NewsViewController 
@synthesize imageView;
@synthesize vueDetail;

@synthesize tableauNews,tableViewFluxRSS;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil tableauDeNews:(NSMutableArray *)tableauDeNews
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

        //récupération du tableau de news initialisé
        tableauNews = tableauDeNews;
    }
    return self;
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    tableViewFluxRSS.separatorStyle = UITableViewCellSeparatorStyleNone;
    tableViewFluxRSS.rowHeight = 143;
    tableViewFluxRSS.backgroundColor = [UIColor clearColor];

}

- (void)viewDidUnload
{
    [self setImageView:nil];
    [self setVueDetail:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
}

//Navigation

- (IBAction)goHome:(id)sender{
    [self.navigationController popToRootViewControllerAnimated:YES];    
}

// Override to support row selection in the table view.
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic may go here -- for example, create and push another view controller.
    [vueDetail loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[[tableauNews objectAtIndex:indexPath.row] detail]]]];

}

//gestion du UITableView 

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [tableauNews count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    const NSInteger TOP_LABEL_TAG = 1001;
    const NSInteger BOTTOM_LABEL_TAG = 1002;
    const NSInteger DATE_LABEL_TAG = 1003;
    const NSInteger ANNEE_LABEL_TAG = 1004;
    UILabel *topLabel;
    UILabel *bottomLabel;
    UILabel *dateLabel;
    UILabel *anneeLabel;
    UILabel *enSavoirPlus;

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableViewFluxRSS dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        //
        // Create the cell.
        //
        cell = [[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:CellIdentifier];

        //
        // Configure the properties for the text that are the same on every row
        //
            dateLabel = [[UILabel alloc]
         initWithFrame:
         CGRectMake(6,46,75,57)];

        dateLabel.tag = DATE_LABEL_TAG;
        dateLabel.backgroundColor = [UIColor clearColor];
        dateLabel.textColor = [UIColor whiteColor];
        dateLabel.font = [UIFont systemFontOfSize:28];
        [cell.contentView addSubview:dateLabel];
        //
        // Configure the properties for the text that are the same on every row
        //
        anneeLabel = [[UILabel alloc]
                     initWithFrame:
                     CGRectMake(6,100,70,57)];

        anneeLabel.tag = DATE_LABEL_TAG;
        anneeLabel.backgroundColor = [UIColor clearColor];
        anneeLabel.textColor = [UIColor whiteColor];
        anneeLabel.font = [UIFont systemFontOfSize:31];
        [cell.contentView addSubview:anneeLabel];

        topLabel =
        [[UILabel alloc]
         initWithFrame:
         CGRectMake(94,5,325,20)];

        [cell.contentView addSubview:topLabel];

        //
        // Configure the properties for the text that are the same on every row
        //
        topLabel.tag = TOP_LABEL_TAG;
        topLabel.backgroundColor = [UIColor clearColor];
        topLabel.textColor = [UIColor whiteColor];
        topLabel.font = [UIFont systemFontOfSize:18];

        //
        // Configure the properties for the text that are the same on every row
        //
        bottomLabel =
        [[UILabel alloc]
         initWithFrame:
         CGRectMake(94,30,325,80)];

        bottomLabel.tag = BOTTOM_LABEL_TAG;
        bottomLabel.backgroundColor = [UIColor clearColor];
        bottomLabel.textColor = [UIColor whiteColor];
        bottomLabel.font = [UIFont systemFontOfSize:18];
        [bottomLabel setLineBreakMode:UILineBreakModeWordWrap];
        [bottomLabel setNumberOfLines:0];

        [cell.contentView addSubview:bottomLabel];

        //
        // Create a background image view.
        //
        cell.backgroundView =
        [[UIImageView alloc] init];
        cell.selectedBackgroundView =
        [[UIImageView alloc] init];

        enSavoirPlus =
        [[UILabel alloc]
         initWithFrame:
         CGRectMake(260,121,200,20)];

        [cell.contentView addSubview:enSavoirPlus];

        //
        // Configure the properties for the text that are the same on every row
        //
        enSavoirPlus.tag = TOP_LABEL_TAG;
        enSavoirPlus.backgroundColor = [UIColor clearColor];
        enSavoirPlus.textColor = [UIColor yellowColor];
        //topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        enSavoirPlus.font = [UIFont systemFontOfSize:18];
    }

    else
    {
        topLabel = (UILabel *)[cell viewWithTag:TOP_LABEL_TAG];
        bottomLabel = (UILabel *)[cell viewWithTag:BOTTOM_LABEL_TAG];
        dateLabel = (UILabel *)[cell viewWithTag:DATE_LABEL_TAG];
        anneeLabel = (UILabel *)[cell viewWithTag:ANNEE_LABEL_TAG];

    }

    topLabel.text = [[tableauNews objectAtIndex:indexPath.row] titre];
    bottomLabel.text = [[tableauNews objectAtIndex:indexPath.row] contenu];
    [bottomLabel sizeToFit];
    dateLabel.text = [[tableauNews objectAtIndex:indexPath.row] dateDeParution];
    anneeLabel.text = [[tableauNews objectAtIndex:indexPath.row] annee];
    enSavoirPlus.text = @"En savoir plus...";

    //
    // Set the background and selected background images for the text.
    // Since we will round the corners at the top and bottom of sections, we
    // need to conditionally choose the images based on the row index and the
    // number of rows in the section.
    //
    UIImage *rowBackground;

        rowBackground = [UIImage imageNamed:@"fd-textes-news.png"];
        //selectionBackground = [UIImage imageNamed:@"middleRowSelected.png"];

    ((UIImageView *)cell.backgroundView).image = rowBackground;
    //((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;

    return cell;
}

//fin gestion UITableView

@end 
```

我认为我的问题可能是由于我的初始化实现 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil tableauDeNews:(NSMutableArray *)tableauDeNews;

需要帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:00:03.757

我发现了问题：

为了创建我的按钮，我将它们复制粘贴到 interfaceBuilder 中，复制的按钮保留了它们的旧操作，并且我有一个新的 IBAction。

我复制的按钮有 2 个 IBaction（一个调用 NewsViewController，另一个调用正确的 viewController）。每次我单击复制的按钮时都会弹出该消息。

因此，请检查界面构建器中的按钮，**“开始/结束外观转换的不平衡调用”可能是由具有两个 IBAction 的按钮引起的，相互冲突**（例如同时推送两个不同的视图控制器）。

# bash - 2个字段数字顺序的unix排序

> ID：11443815
> 
> 赞同：5
> 
> 时间：2012-07-12T01:16:04.373
> 
> 标签：bash, unix, sorting, sed, awk

我需要用 unix sort 对一些数据进行排序，但我无法准确地计算出正确的语法，数据看起来像

```
3.9.1 Step 10:
3.9.1 Step 20:
3.8.10 Step 20:
3.10.2 Step 10:
3.8.4 Step 90:
3.8.4 Step 100:
3.8.4 Step 10: 
```

我想首先使用主编号对其进行排序，然后使用步骤编号，例如上面排序的数据看起来像。

```
3.8.4 Step 10:
3.8.4 Step 90:
3.8.4 Step 100:
3.8.10 Step 20:
3.9.1 Step 10:
3.9.1 Step 20:
3.10.2 Step 10: 
```

我在这个网站上找到了按第一个数字排序的方法：

```
sort -t. -k 1,1n -k 2,2n -k 3,3n 
```

但我现在正在努力按第 3 列步骤编号排序，而不会干扰第一次排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:57:26.960

将`Step`and`:`在途中转换为`sort`，然后再转换回来怎么样？我相信这会得到你正在寻找的结果：

```
cat your-file.txt \
    | sed -e 's/ Step \(.*\):$/.\1/g' \
    | sort -t. -k1,1n -k2,2n -k3,3n -k4,4n \
    | sed -e 's/\(.*\)\.\(.*\)$/\1 Step \2:/g' 
```

（`cat`此处仅用于说明目的。如果它只是一个常规文件，则可以将其传递给第一个`sed`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T02:32:12.760

有一篇关于重新设计 Unix 的引人入胜的文章`sort`（'Theory and Practice in the Construction of a Working Sort Routine'，JP Linderman，AT&T Bell Labs Tech Journal，1984 年 10 月），不幸的是，它在互联网上没有，AFAICT（一年多前看了，没找到；刚才又看了一遍，可以找到参考文献，但找不到文章本身）。除其他事项外，该文章证明对于 Unix `sort`，比较时间远远超过移动数据的成本（当您考虑比较必须比较每行确定的字段时，这并不奇怪，但移动“数据”只是一个切换问题周围的指针）。其中一个结果是他们建议做[danfuzz](https://stackoverflow.com/users/387103/danfuzz)建议；映射键以使比较容易。他们表明，即使是一个简单的脚本解决方案也可以比让排序工作变得非常困难更节省时间。

因此，您可以考虑使用不太可能自然出现在数据文件中的字符（例如`Control-A`）作为关键字段分隔符。

```
sed 's/^\([^.]*\)[.]\([^.]*\)[.]\([^ ]*\) Step \([0-9]*\):.*/\1^A\2^A\3^A\4^A&/' file |
sort -t'^A' -k1,1n -k2,2n -k3,3n -k4,4n |
sed 's/^.*^A//' 
```

第一个命令是困难的。它标识了 4 个数字字段，并以所选字符分隔输出它们（`^A`如上所示，键入为`Control-A`），然后输出原始行的副本。然后排序以数字方式作用于前四个字段，最后的`sed`命令从每行的前面剥离，直到最后一个`Control-A`，并再次返回原始行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T04:02:55.657

这可能对您有用：

```
 sort -k3,3n file | sort -nst. -k1,1 -k2,2 -k3,3 
```

或非常不确定：

```
 sort -nt. -k1,1 -k2,2 -k3,3 -k3.7 file 
```

第一个使用两种：

1.  `sort -k3,3n`按步骤排序
2.  `sort -nst. -k1,1 -k2,2 -k3,3`按主要数字排序，但保持步序

第二个有效，但前提是第三个主要数字保持在 100 以下。

也许：

```
sed 's/ /./2' file | sort -nt. -k1,1 -k2,2 -k3,3 -k4,4 | sed 's/\./ /3' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T03:10:23.573

***更新***：

这将生成您指定的输出：

```
sed 's/Step /Step./' data|sort -t. -n -k1,1 -k2,2 -k3,3 -k4|sed 's/Step./Step /' 
```

结果：

```
3.8.4 Step 10:
3.8.4 Step 90:
3.8.4 Step 100:
3.8.10 Step 20:
3.9.1 Step 10:
3.9.1 Step 20:
3.10.2 Step 10: 
```

这种排序的挑战在于排序字段是由`'.'`（用于版本号）和默认空格（用于步骤号）定义的。您不能为同一排序命令指定多个/不同的字段分隔符。将几种类型与不同的字段分隔符结合起来并没有产生正确的输出。

`Step`此解决方案通过将字段后的空格*临时*替换为 a `'.'`，以便所有排序字段可以用相同的字符 ( `'.'`) 分隔。排序完成后，`'.'`再次用空白替换。

# jquery - 动画和回退的 HTML 最佳实践

> ID：11443817
> 
> 赞同：0
> 
> 时间：2012-07-12T01:16:17.970
> 
> 标签：jquery, animation

我必须在 Apple 的 iPhone 主页之类的主页上做一些动画

[http://www.apple.com/iphone/](http://www.apple.com/iphone/)

我的比较简单，只是从左到右滑入（淡入）一个 div，停留几秒钟，滑出和下面的 div 相同的效果。

我打算使用 jQuery 的 .animate() ，因为我在网站上几乎所有其他东西都使用 jQuery，但我有一些疑问：

1.  jQuery 是动画对象的最佳方式吗？我也考虑过使用 CSS3 过渡，但我怀疑 jQuery 与不太现代的浏览器更兼容（IE 咳……咳……）

2.  触发动画的事件是什么？如何确定 div 中的图像在动画之前已加载？

3.  元素的初始状态为 0% 不透明度，然后我可以将它们设置为 100%。如果有人关闭了 javascript 或者页面中有任何错误并且动画功能没有运行，那么这些元素将对他们保持不可见。将初始状态设置为 100% 不透明度，然后将其更改为 0% 以进行动画处理，如果在显示元素之前通过代码将其设置为 0% 时未运行，它将闪烁。我可以防止这种情况吗？

4.  动画计时的最佳方法是什么？有一个 $(element).delay(N)，N 是前面的元素进入、显示和退出所花费的时间似乎不对。

我知道这一切可能会在其他地方覆盖。如果有关于如何实现这一点的好文章或教程，请指出我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:24:38.433

构建自定义滑块比最初看起来要花费更多时间。我建议使用像[nivoslider](http://nivo.dev7studios.com/)或任何其他 jQuery 滑块这样的插件。您可以选择过渡和持续时间以达到所需的效果。

如果你真的想从头开始构建，我肯定会选择 jQuery。

1.  关于兼容性，您是对的，在这方面 jQuery 比 CSS3 更好。

2.  我会去一个 javascript 间隔。看看这里：[简单的图像加载](http://forum.jquery.com/topic/simple-image-load-detection-with-load)

3.  如果用户关闭了 javascript，则您的幻灯片甚至不会动画。为了防止眨眼，您应该在开始动画之前更改不透明度。

您应该查看[jQuery](http://docs.jquery.com/Tutorials) 文档以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:29:15.327

看来您正在尝试实现[jQuery 幻灯片](https://www.google.se/search?q=jquery+slideshow)。我自己没有尝试过，但是[jQuery Cycle Plugin](http://jquery.malsup.com/cycle/)似乎可以做你想做的事。

此外，要解决闪烁/无 javascript 支持问题，您可以在`head`文档部分添加如下内容：

```
<noscript>
  <style type="text/css">
    .hidden { visible: true; !important }
  </style>
</noscript> 
```

# android - Android 启动器上的浮动小部件/覆盖

> ID：11443820
> 
> 赞同：5
> 
> 时间：2012-07-12T01:17:02.730
> 
> 标签：android, overlay

有谁知道如何实施？

一些例子：

*   [https://play.google.com/store/apps/details?id=gpc.myweb.hinet.net.PopupVideo](https://play.google.com/store/apps/details?id=gpc.myweb.hinet.net.PopupVideo)
*   [https://play.google.com/store/apps/details?id=com.milone.floatwidget](https://play.google.com/store/apps/details?id=com.milone.floatwidget)

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T01:51:11.553

无论如何，这是在现有活动之上使用覆盖来完成的。[您可以在我的github](https://github.com/t0mm13b/TouchSoftly)上找到此处的源代码，以演示 android 的[stackexchange.com](https://android.stackexchange.com/questions/25090/cant-scroll-using-hands-are-there-other-options)问题中的概念证明，其中有人患有残疾且无法滑动屏幕滚动并正在寻找一种方便的方法，其中我拼凑了代码以显示“向上翻页/向下翻页”的最小移动，只需点击覆盖在活动顶部的文本（实际上，它是一个按钮）。但由于 Android 和安全性的工作方式，滚动事件无法注入到当前运行的活动中。

它的工作方式是这样的，从`onCreate`活动那里是这样的

```
WindowManager.LayoutParams layOutParams = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
                PixelFormat.TRANSLUCENT); 
```

需要的标志是`WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY`and `WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH`。

责任是确保触摸正在被处理，这意味着当触摸事件“击中”某个区域时要小心并采取相应的行动。通过“监听”视图的`onTouch`事件，即：

```
LayoutInflater layOutInflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
View myView = layOutInflater.inflate(R.layout.myview, null);

myView.setOnTouchListener(new OnTouchListener(){
    @Override
    public boolean onTouch(View v, MotionEvent event) {
      ....
    }
}); 
```

例如，想象该`myview`布局中的一个按钮，因此使用按钮小部件，

```
Button myButton = (Button)myView.findViewById(R.id.myButton);
Rect outRectHit = new Rect();
myButton.getHitRect(outRectHit); 
```

现在我们需要确定触摸边界的“碰撞”，它发生在`onTouch`处理程序内部：

```
float x = event.getX();
float y = event.getY();
if (x > outRectHit.left && x < outRectHit.right &&
    y > outRectHit.top && y < outRectHit.bottom){
     ... Handle this accordingly
} 
```

这个简短的摘要解释了如何在任何活动之上做这样的事情。

只是为了确保代码得到调试并且不会以任何形式或形式干扰显示的任何活动。例如，如果活动实际上是一个 OpenGL 游戏会发生什么，你会怎么做？

这是为了说明需要注意的事项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-05T10:51:25.740

您可能想看看[Tooleap SDK](http://www.tooleap.com)。它提供了将常规 Android 活动转换为浮动小部件的最简单方法。

例如，假设您有一个名为 MyActivity 的 Activity

```
Intent intent = new Intent(context, MyActivity.class);
TooleapPopOutMiniApp miniApp = new TooleapPopOutMiniApp(context, intent);
Tooleap tooleap = Tooleap.getInstance(context);
tooleap.addMiniApp(miniApp); 
```

MyActivity 现在将成为任何其他应用程序之上的浮动小部件。

# opengl - HOpenGL 对于 Haskell 中的其他线程和 TChans 的表现如何？

> ID：11443824
> 
> 赞同：9
> 
> 时间：2012-07-12T01:17:55.397
> 
> 标签：opengl, haskell, concurrency

我正在为一个相当复杂的视频游戏做一些概念验证工作，我想使用 HOpenGL 库在 Haskell 中编写。我首先编写了一个实现基于客户端-服务器事件的通信的模块。当我尝试将它连接到一个简单的程序以在屏幕上绘制点击时，我的问题出现了。

事件库使用一个 TChans 列表组成一个优先级队列进行通信。它返回对应于服务器绑定和客户端绑定消息的“出”队列和“入”队列。使用 forkIO 在不同的线程中发送和接收事件。在没有 OpenGL 部分的情况下测试事件库表明它通信成功。这是我用来测试它的代码：

```
-- Client connects to server at localhost with 3 priorities in the priority queue
do { (outQueue, inQueue) <- client Nothing 3
   -- send 'Click' events until terminated, the server responds with the coords negated
   ; mapM_ (\x -> atomically $ writeThing outQueue (lookupPriority x) x)
           (repeat (Click (fromIntegral 2) (fromIntegral 4)))
   } 
```

这会产生预期的输出，即大量的发送和接收事件。我认为问题不在于事件处理库。

代码的 OpenGL 部分在 displayCallback 中检查传入队列中的新事件，然后调用事件的关联处理程序。我可以让 displayCallback 捕获一个事件（Init 事件，它只是清除屏幕），但之后什么都没有捕获。以下是相关代码：

```
atomically $ PQ.writeThing inqueue (Events.lookupPriority Events.Init) Events.Init
    GLUT.mainLoop

render pqueue =
    do  event <- atomically $
            do  e <- PQ.getThing pqueue
                case e of
                    Nothing -> retry
                    Just event -> return event
        putStrLn $ "Got event"
        (Events.lookupHandler event Events.Client) event
        GL.flush
        GLUT.swapBuffers 
```

所以我关于为什么会发生这种情况的理论是：

*   显示回调在重试时阻塞了所有发送和接收线程。
*   队列未正确返回，因此客户端读取的队列与 OpenGL 部分读取的队列不同。

还有其他原因导致这种情况发生吗？

完整的代码太长了，虽然不是太长（每个 100 行以下 5 个文件），但这里发布的代码太长了，但它都在 GitHub[上](https://github.com/RocketPuppy/PupEvents)。

*编辑 1：*
客户端从 HOpenGL 代码的主函数中运行，如下所示：

```
main =
    do  args <- getArgs
        let ip = args !! 0
        let priorities = args !! 1
        (progname, _) <- GLUT.getArgsAndInitialize
        -- Run the client here and bind the queues to use for communication
        (outqueue, inqueue) <- Client.client (Just ip) priorities
        GLUT.createWindow "Hello World"
        GLUT.initialDisplayMode $= [GLUT.DoubleBuffered, GLUT.RGBAMode]
        GLUT.keyboardMouseCallback $= Just (keyboardMouse outqueue)
        GLUT.displayCallback $= render inqueue
        PQ.writeThing inqueue (Events.lookupPriority Events.Init) Events.Init
        GLUT.mainLoop 
```

我在编译代码时传递给 GHC 的唯一标志是`-package GLUT`.

*编辑 2：*
我清理了 Github 上的代码。我删除了acceptInput，因为它实际上并没有做任何事情，而且客户端代码不应该监听它自己的事件，这就是它返回队列的原因。

*编辑3：*
我稍微澄清一下我的问题。我从@Shang 和@Laar 那里学到了一些东西，然后就跟着跑了。我将 Client.hs 中的线程更改为使用 forkOS 而不是 forkIO （并在 ghc 中使用 -threading），看起来事件正在成功通信，但是在显示回调中没有收到它们。我也尝试`postRedisplay`在显示回调结束时调用，但我认为它不会被调用（因为我认为重试阻塞了整个 OpenGL 线程）。

显示回调中的重试会阻塞整个 OpenGL 线程吗？如果是这样，将显示回调分叉到新线程中是否安全？我不认为它会，因为可能存在多个事物可能同时尝试绘制到屏幕上的可能性，但我可能能够用锁来处理它。另一种解决方案是将`lookupHandler`函数转换为返回包装在 a 中的函数`Maybe`，如果没有任何事件，则什么也不做。我觉得这不太理想，因为我基本上会有一个繁忙的循环，这是我试图避免的事情。

*编辑 4：*
忘了提到我在做 forkOS 时在 ghc 使用了 -threading。

*编辑5：*
我去测试了我的理论，即渲染函数（显示回调）中的重试阻塞了所有的OpenGL。我重写了渲染函数，使它不再阻塞，它就像我想要的那样工作。屏幕上的一次点击给出两点，一个来自服务器，一个来自原始点击。这是新渲染函数的代码（注意：它*不在*Github 中）：

```
render pqueue =
    do  event <- atomically $ PQ.getThing pqueue
        case (Events.lookupHandler event Events.Client) of
            Nothing -> return ()
            Just handler -> 
                do  let e = case event of {Just e' -> e'}
                    handler e
                    return ()
        GL.flush
        GLUT.swapBuffers
        GLUT.postRedisplay Nothing 
```

我在有和没有 postRedisplay 的情况下都试过了，它只适用于它。现在的问题是，这将 CPU 固定在 100%，因为它是一个繁忙的循环。在编辑 4 中，我建议线程化显示回调。我还在想办法做到这一点。

一个注释，因为我还没有提到它。任何想要构建/运行代码的人都应该这样做：

```
$ ghc -threaded -package GLUT helloworldOGL.hs -o helloworldOGL
$ ghc server.hs -o server
-- one or the other, I usually do 0.0.0.0
$ ./server "localhost" 3
$ ./server "0.0.0.0" 3
$ ./helloworldOGL "localhost" 3 
```

*编辑 6：**解决方案***
解决方案！与线程一起，我决定在 OpenGL 代码中创建一个线程来检查事件，如果没有则阻塞，然后调用处理程序，然后调用 postRedisplay。这里是：

```
checkEvents pqueue = forever $
    do  event <- atomically $
            do  e <- PQ.getThing pqueue
                case e of
                    Nothing -> retry
                    Just event -> return event
        putStrLn $ "Got event"
        (Events.lookupHandler event Events.Client) event
        GLUT.postRedisplay Nothing 
```

显示回调很简单：

```
render = GLUT.swapBuffers 
```

而且它有效，它不会将 CPU 固定为 100%，并且事件会得到及时处理。我在这里发布这个是因为没有其他答案我无法做到这一点，而且当答案都非常有帮助时，我很难接受代表，所以我接受@Laar 的回答，因为他的代表较低。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:26:49.140

一种可能的原因可能是使用了线程。

OpenGL 为其上下文使用线程本地存储。因此，所有使用 OpenGL 的调用都应该从同一个 OS 线程进行。HOpenGL（和 OpenGLRaw 也是）是围绕 OpenGL 库的一个相对简单的绑定，并且没有为这个“问题”提供任何保护或解决方法。

另一方面，您是否正在使用`forkIO`创建轻量级的 haskell 线程。不保证该线程保持在同一个操作系统线程上。因此，RTS 可能会将其切换到另一个线程本地 OpenGL 上下文不可用的操作系统线程。为了解决这个问题，有一个`forkOS`函数，它创建了一个绑定的 haskell 线程。这个绑定的 haskell 线程将始终在同一个 OS 线程上运行，因此它的线程本地状态可用。有关此的文档可以在[Control.Concurrent](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html)的“绑定线程”部分找到，[forkOS](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html#v%3aforkOS)也可以在那里找到。

编辑：

使用当前的测试代码，这个问题不存在，因为您没有使用 -thread。（删除了不正确的推理）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T12:08:46.440

你的`render`函数最终只被调用一次，因为显示回调只在有新东西要绘制的地方被调用。要请求重绘，您需要调用

```
GLUT.postRedisplay Nothing 
```

它需要一个可选的 window 参数，或者在您传递`Nothing`. 您通常`postRedisplay`从 a`idleCallback`或 a调用，`timerCallback`但您也可以在结束时调用它`render`以请求立即重绘。

# mysql - Grails 或 Hibernate 不创建丢失的表

> ID：11443826
> 
> 赞同：0
> 
> 时间：2012-07-12T01:18:16.683
> 
> 标签：mysql, grails, grails-orm, grails-domain-class, grails-2.0

我是 Grails 的新手，所以请原谅我的无知——如果其他信息有帮助，我会尽力将其发布。

我创建了一个`ToolKitComponent`定义为的域模型类：

```
class ToolKitComponent {
    String componentName
    String componentVersion
    int componentDownloads
    Date compnentLastUpdate

    static constraints = {

    }
} 
```

我有一个控制器，我只想通过持久化一个示例来测试 ORM，所以这里是控制器的内容：

```
def index() { 
        ToolKitComponent i = new ToolKitComponent()
        i.setComponentName("TestComponent")
        i.setComponentVersion("v1.10")
        i.setComponentDownloads(1)
        i.setCompnentLastUpdate(new Date())
        i.save()
} 
```

我已经安装了 MySql 数据库插件并将我的 DataSource.groovy 更新为：

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
    loggingSql = true
}

// other settings

environments {
    development {
        dataSource {
            String dbCreate = "create"
            String url = "jdbc:mysql://localhost/testDataBase"
            String username = "myUser"
            String password = "myPass"
        }
    }
} 
```

我已经创建了数据库`testDataBase`并将所有权限授予用户名。

当我运行应用程序时，我得到：

```
Hibernate: insert into tool_kit_component (version, compnent_last_update, component_downloads, component_name, component_version) values (?, ?, ?, ?, ?)
| Error 2012-07-11 20:01:52,727 [http-bio-8080-exec-2] ERROR util.JDBCExceptionReporter  - Table "TOOL_KIT_COMPONENT" not found; SQL statement:
insert into tool_kit_component (version, compnent_last_update, component_downloads, component_name, component_version) values (?, ?, ?, ?, ?) [42102-164]
| Error 2012-07-11 20:01:52,752 [http-bio-8080-exec-2] ERROR errors.GrailsExceptionResolver  - JdbcSQLException occurred when processing request: [GET] /TestProject/
Table "TOOL_KIT_COMPONENT" not found; SQL statement:
insert into tool_kit_component (version, compnent_last_update, component_downloads, component_name, component_version) values (?, ?, ?, ?, ?) [42102-164]. Stacktrace follows:
Message: Table "TOOL_KIT_COMPONENT" not found; SQL statement:
insert into tool_kit_component (version, compnent_last_update, component_downloads, component_name, component_version) values (?, ?, ?, ?, ?) [42102-164]
    Line | Method
->>  329 | getJdbcSQLException in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    169 | get                 in     ''
|    146 | get . . . . . . . . in     ''
|   4753 | readTableOrView     in org.h2.command.Parser
|   4731 | readTableOrView . . in     ''
|    954 | parseInsert         in     ''
|    375 | parsePrepared . . . in     ''
|    279 | parse               in     ''
|    251 | parse . . . . . . . in     ''
|    217 | prepareCommand      in     ''
|    415 | prepareLocal . . .  in org.h2.engine.Session
|    364 | prepareCommand      in     ''
|   1121 | prepareCommand . .  in org.h2.jdbc.JdbcConnection
|     71 | <init>              in org.h2.jdbc.JdbcPreparedStatement
|    267 | prepareStatement .  in org.h2.jdbc.JdbcConnection
|   1051 | prepareStatement    in     ''
|    508 | prepareStatement .  in org.apache.commons.dbcp.DelegatingConnection
|    400 | prepareStatement    in org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper
|     11 | index . . . . . . . in TestProject.HomeController
|   1110 | runWorker           in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                 in java.lang.Thread 
```

我正在使用 Grails 2.0.4。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:07:22.890

删除`String`数据源定义中的

```
environments {
    development {
        dataSource {
            dbCreate = "create"
            url = "jdbc:mysql://localhost/testDataBase"
            username = "myUser"
            password = "myPass"

        }
    }
} 
```

# jenkins - 推广 Jenkins Jobs 时传递 GIT_COMMIT

> ID：11443831
> 
> 赞同：2
> 
> 时间：2012-07-12T01:19:04.733
> 
> 标签：jenkins, jenkins-plugins

我有一个 Jenkins CI 系统，它有两个工作。第一个作业是一个标准的 Git 插件作业，只要有东西推送到 master 就会运行。成功可以晋升为第二个职位。第二个作业几乎是一个部署脚本，它需要来自第一个作业的 GIT_COMMIT。我已经检查了“已构建的传递 Git 提交”。但是，在第二个作业中，当我回显 GIT_COMMIT 时，我看不到这些值。

有没有人有任何想法我可能会错过价值？或者如果这甚至是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:22:31.907

我使用参数化[触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)对 SVN 做了类似的事情。只需在第一个作业中添加 GIT_COMMIT=GIT_COMMIT 作为参数即可。

# xml - 使用 my() 会极大地改变 XML::Bare 行为

> ID：11443834
> 
> 赞同：2
> 
> 时间：2012-07-12T01:19:22.010
> 
> 标签：xml, perl

当我运行这个 Perl 脚本时：

```
#!/bin/perl 
use XML::Bare; 
$ob = new XML::Bare(text=>'<xml><name>Bob</name></xml>'); 
for $i (keys %{$ob->{xml}}) {print "KEY: $i\n";} 
```

我没有输出。但是，如果我放入`$ob`一个`my()`：

```
#!/bin/perl 
use XML::Bare; 
my($ob) = new XML::Bare(text=>'<xml><name>Bob</name></xml>'); 
for $i (keys %{$ob->{xml}}) {print "KEY: $i\n";} 
```

我得到这个输出：

```
KEY: _z 
KEY: _i 
KEY: xml 
KEY: _pos 
```

为什么要`my()`如此彻底地改变这种行为，特别是考虑到我处于顶层，`my()`根本不应该有任何影响？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T01:35:12.403

首先，您应该始终以您的 Perl 脚本开头

```
use strict;
use warnings; 
```

这将迫使您声明所有变量，`my`这些变量会捕获许多拼写错误和简单错误。

在您的情况下，实际上并不是`my`导致行为改变的，而是括号，它放在`$ob`列表上下文中。

查看 XML::Bare 的[源码](http://cpansearch.perl.org/src/NIGELM/XML-Bare-0.47/lib/XML/Bare.pm)，我们在构造函数中找到了这个：

```
sub new { 
    ...
    bless $self, $class;
    return $self if ( !wantarray );
    return ( $self, $self->parse() );
} 
```

请注意，第二`return`行为您调用`->parse`了新对象，而您在第一个示例中忘记了这样做，这就是该对象中没有任何数据的原因。

所以你可以说

```
my $obj = XML::Bare->new(text=>'<xml><name>Bob</name></xml>'); # in scalar context
$obj->parse; 
```

或者

```
my ( $obj ) = XML::Bare->new(text=>'<xml><name>Bob</name></xml>'); # in list context 
```

他们应该是等价的。

这是一个非常奇怪的界面选择，但我不熟悉`XML::Bare`.

另请注意，我避免使用间接方法语法（`XML::Bare->new`而不是`new XML::Bare`）。这有助于避免一些[讨厌的问题](https://stackoverflow.com/questions/429657/what-is-the-difference-between-new-someclass-and-someclass-new-in-perl)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T18:33:42.963

XML::Bare 模块被有意设计为以两种不同的方式工作。

方式#1：

```
my $ob = XML::Bare->new( text => "<xml/>" );
my $tree = $ob->parse(); 
```

方式#2：

```
my ( $ob, $tree ) = XML::Bare->new( text => "<xml/>" ); 
```

您正在以未记录的方式使用该模块#3：

```
my ( $ob ) = XML::Bare->new( text => "<xml/>" );
my $tree = $ob->{'xml'}; 
```

第三种方式恰好可行，因为模块将树存储在它自己的对象中。我建议避免以这种方式使用它，因为它会令人困惑，并且可能会在模块的未来版本中发生变化。

# python - 如何在 Cython 中包装 C 结构以在 Python 中使用？

> ID：11443838
> 
> 赞同：8
> 
> 时间：2012-07-12T01:19:48.773
> 
> 标签：python, struct, sdl, cython, word-wrap

为了获得一些学习经验，我正在尝试在 Python 3.2 的扩展中将 SDL（1.2.14）的一些部分包装在 Cython 中。

我在弄清楚如何将 C 结构直接包装到 Python 中时遇到问题，能够直接访问其属性，例如：

```
struct_name.attribute 
```

比如我想取struct SDL_Surface：

```
typedef struct SDL_Rect {
    Uint32 flags
    SDL_PixelFormat * format
    int w, h
    Uint16 pitch
    void * pixels
    SDL_Rect clip_rect
    int refcount
} SDL_Rect; 
```

并且能够在python中像这样使用它：

```
import SDL
# initializing stuff

Screen = SDL.SetVideoMode( 320, 480, 32, SDL.DOUBLEBUF )

# accessing SDL_Surface.w and SDL_Surface.h
print( Screen.w, ' ', Screen.h ) 
```

现在，我已经像这样将 SDL_SetVideoMode 和 SDL_Surface 包装在一个名为 SDL.pyx 的文件中

```
cdef extern from 'SDL.h':
    # Other stuff

    struct SDL_Surface:
        unsigned long flags
        SDL_PixelFormat * format
        int w, h
        # like past declaration...

    SDL_Surface * SDL_SetVideoMode(int, int, int, unsigned )

cdef class Surface(object):
    # not sure how to implement       

def SetVideoMode(width, height, bpp, flags):
    cdef SDL_Surface * screen = SDL_SetVideoMode  

    if not screen:
        err = SDL_GetError()
        raise Exception(err)

    # Possible way to return?...
    return Surface(screen) 
```

我应该如何实施 SDL.Surface？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-12T13:32:43.253

在一个简单的情况下，如果 struct 是不透明的，它很简单：

```
cdef extern from "foo.h":
    struct spam:
        pass 
```

当您想要访问成员时，有几个选项，在文档中有很好的介绍：

[http://docs.cython.org/src/userguide/external_C_code.html#styles-of-struct-union-and-enum-declaration](http://docs.cython.org/src/userguide/external_C_code.html#styles-of-struct-union-and-enum-declaration)

# c# - 为什么不允许在嵌套类中定义扩展方法？

> ID：11443842
> 
> 赞同：14
> 
> 时间：2012-07-12T01:20:20.237
> 
> 标签：c#, extension-methods

我会发现为嵌套类中的类编写我的扩展很方便/合乎逻辑。主要原因是我可以简单地命名该类`Extensions`，并让它的外部命名范围为编译器提供一个唯一的类型名称。

不允许这样的技术原因是什么：

```
public class Foo
{
   ObjectSet<Bar> Bars { get; set; }

   public static class Extensions
   {
      public static Bar ByName(this ObjectSet<Bar> bars, string name)
      {
         return bars.FirstOrDefault(c => c.Name == name);
      }
   }
} 
```

而现在我必须创建一个单独的独立课程。

**更新/注意：**我没想到它是一个内部类的事实会影响扩展方法的可用性范围。我只想用一个单独的名称来解决实际的编码问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:39:57.277

这里的关键点是**嵌套类可以访问**外部类中的私有字段。

所以下面的代码有效：

```
public class Foo
{
    private bool _field;

    public static class Extensions
    {
        public static bool GetField(Foo foo)
        {
            return foo._field;
        }
    }
} 
```

在这里，您显式传递了该类的一个实例，并且允许静态方法访问私有字段...似乎很合理：

```
bool fieldValue = Foo.Extensions.GetField(new Foo()); 
```

* * *

然而，虽然扩展方法只是静态方法的替代语法，但它们的调用方式与非静态实例方法相同。

***现在，如果在嵌套类中允许扩展方法，它们实际上可以访问私有字段，并且它们将更接近于实例方法。***这可能会导致一些意想不到的后果。

总之，如果允许这样做：

```
public class Foo
{
    private bool _field;

    public static class Extensions
    {
        public static bool GetField(*this* Foo foo) // not allowed, compile error.
        {
            return foo._field;
        }
    }
} 
```

然后您可以编写以下代码，使扩展方法的行为更像一个实例方法，而不是应该的：

```
var foo = new Foo();
var iGotAPrivateField = foo.GetField(); 
```

**根据评论进行编辑**

*为什么扩展方法等同于实例方法是个坏主意？*

用[Eric Lippert 的话](https://blogs.msdn.microsoft.com/ericlippert/2008/10/28/the-future-of-c-part-two/)（强调我的）：

> 所以，是的，经常听到的批评“扩展方法不是面向对象的”是完全正确的，但也相当不相关。扩展方法当然不是面向对象的。他们将处理数据的代码远离声明数据的代码，*他们无法打破封装并与*他们似乎是方法的对象的私有状态对话，他们不能很好地处理继承，等等。他们穿着方便的面向对象的衣服进行过程编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:25:36.813

没有技术原因 - 只是实用。如果您的扩展方法的范围仅限于单个类，只需将其定义为您的类中的常规静态方法并删除“this”。扩展用于在多个类之间共享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:24:32.333

我猜想不允许这件事背后的想法是因为扩展方法适用于命名空间中的所有实体。

如果您将创建一个嵌套的扩展方法类，那么它将仅适用于嵌套它的类。在这种情况下，创建扩展方法没有意义。然后任何正常的非扩展方法都可以。

# android - 创建按钮行

> ID：11443844
> 
> 赞同：0
> 
> 时间：2012-07-12T01:20:24.803
> 
> 标签：android

我对 Android 开发比较陌生，所以请耐心等待。我正在创建一个具有许多计算和公式的应用程序，用于天气、距离、速度等。无论如何，我希望创建主菜单，其中包含类似于 iPhone 的按钮行，即你按下一个按钮行它会将您带到一排按钮的下一页。

有点像：

![http://joomlart.s3.amazonaws.com/images/templates/jd_purity_preview/home_iphone_menu.jpg](../Images/37a7a494106a66c350e9998e526be94e.png)

这是使用布局和控件还是菜单完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:28:15.170

您最好的选择是使用列表视图。我这样做了，您将有一个项目列表，类似于您的家、关于 Drupal、排版等，然后当用户单击其中一个按钮时，您将被带到详细信息页面，或者在 Android 的情况下，另一个`Activity`。这是一个很棒的教程，它将向您展示如何实现列表视图：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

希望这可以帮助。

# html - ruby 将对象转储为 html 格式的字符串

> ID：11443848
> 
> 赞同：3
> 
> 时间：2012-07-12T01:20:52.930
> 
> 标签：html, ruby, pretty-print, cfdump

是否有相当于 ColdFusions cfdump 标签的红宝石。

它可以将任何对象转储为 html 格式的输出。

我想用它来将任何对象转储到电子邮件 html 正文中。

我知道那里有漂亮的打印和其他宝石，它们将颜色编码的格式良好的字符串输出到控制台，但我希望能够生成一个 html 字符串，转储出我需要的整个数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:43:01.253

有一个[CodeRay](http://coderay.rubychan.de/)着色器。

```
CodeRay.scan("5.times do\n  puts 'Hello, world!'\nend", :ruby).
        div(:line_numbers => :table) 
```

我用它来突出显示我 wiki 中的 JSON 片段，所以如果你将对象漂亮地打印到 JSON，然后通过 coderay 传递它，它肯定会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:30:29.853

[rails-cfdump](http://code.google.com/p/rails-cfdump/)项目被放弃了，但看起来它的输出与 CF 的`<cfdump>`/非常相似`WriteDump()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T03:08:36.257

我开发的[dom](https://rubygems.org/gems/dom) gem 让您可以从 Ruby 代码编写 HTML 字符串。使用它，您可以执行以下操作：

```
require "dom"
["foo".dom(:span, class: "bold"), "bar"].dom(:div).dom(:body).dom(:html)
# => "<html><body><div><span class=\"bold\">foo</span>bar</div></body></html>" 
```

# excel - 在 Excel 中，如何提取十个字母字符串的最后四个字母？

> ID：11443849
> 
> 赞同：20
> 
> 时间：2012-07-12T01:20:55.823
> 
> 标签：excel, extract, excel-formula

例如，如果我有

```
ABS YUR YUAO   
HFH IWO OQNX  
YQO PQM QUCC 
```

如何提取另一列中的最后四个字母？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-12T01:22:21.523

无需使用宏。假设您的第一个字符串在 A1 中。

```
=RIGHT(A1, 4) 
```

将其向下拖动，您将获得最后四个字符。

编辑：可以肯定的是，如果你曾经有像“ABC DEF”这样的序列并且想要最后四个字母而不是字符，你可能想要使用 trimspaces()

```
=RIGHT(TRIMSPACES(A1), 4) 
```

编辑：根据 brettdj 的建议，您可能需要检查您的字符串实际上是否为 4 个字符长或更多：

```
=IF(TRIMSPACES(A1)>=4, RIGHT(TRIMSPACES(A1), 4), TRIMSPACES(A1)) 
```

# android - 调整大小/缩放图像会导致失真

> ID：11443854
> 
> 赞同：1
> 
> 时间：2012-07-12T01:22:38.793
> 
> 标签：android, android-layout, android-imageview

我有一个应用小部件，在其中我想在右下角显示我的应用图标的缩小版本。图像的尺寸为 36x36，图像在这些尺寸下看起来很好，但我希望图像更小，大约 18x18。但是，如果我在图像编辑器中调整图像大小或尝试在代码中缩放图像，图像会出现失真。

这是图像的正常外观：

![在此处输入图像描述](../Images/deedbc9c3d91de465c9fedac2ed5c619.png)

这是缩放的图像：

![在此处输入图像描述](../Images/cade60f3705ea0bcb88a18235bf4920d.png)

这是`ImageView`我正在使用的代码：

```
<ImageView 
   android:id="@+id/widgetIcon"
   android:src="@drawable/icon"
   android:layout_width="18dp"
   android:layout_height="18dp"
   android:layout_alignParentRight="true"
   android:layout_centerVertical="true"
   android:scaleType="centerCrop"
 /> 
```

**更新：**

我实际上将图像放在不同的可绘制文件夹中，如下所示：

可绘制的 ldpi：36x36

可绘制 mdpi：48x48

可绘制的 hdpi：72x72

可绘制 xdpi：96x96

我截取屏幕截图的设备是 Galaxy Nexus。

**更新 2：**

这是整个布局`ImageView`，如果有区别的话。小部件`RelativeLayout`底部有`ImageView`.

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/widgetLayout"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="@dimen/widget_margin">

    <RelativeLayout
        android:id="@+id/widgetBgLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingTop="10dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:background="@drawable/bg_widget"
         >

        <RelativeLayout
            android:id="@+id/widgetStatusLayout" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_alignParentBottom="true"
            android:paddingTop="10dp"
          >
                <TextView 
                    android:id="@+id/widgetStatus" 
                    style="@style/WidgetStatus"
                    android:layout_centerVertical="true"
                    android:layout_alignParentLeft="true" 
                />

                <ImageView 
                   android:id="@+id/widgetIcon"
                   android:src="@drawable/icon"
                   android:layout_width="18dp"
                   android:layout_height="18dp"
                   android:layout_alignParentRight="true"
                   android:layout_centerVertical="true"
                   android:scaleType="centerInside"
                   android:adjustViewBounds="true"
                 />

            </RelativeLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_above="@id/widgetStatusLayout"       
                    android:layout_alignParentTop="true"
             >      
                    <TextView 
                        android:id="@+id/widgetTitle" 
                        style="@style/WidgetTitle"
                    />

                    <TextView 
                        android:id="@+id/widgetText" 
                        style="@style/WidgetText"
                    />
            </LinearLayout>
    </RelativeLayout>

</FrameLayout> 
```

**更新 3**

问题不在于图像缩放，而是图像上方的布局重叠。虽然不确定解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:35:37.057

您应该将图像放入每个不同的可绘制文件夹（hdpi、ldpi、mdpi、xhdpi）。这应该会有所帮助。另外，将 更改`android:scaleType`为`fitCenter`。

# keyboard-shortcuts - 用崇高文本注释掉一段代码的快捷方式

> ID：11443857
> 
> 赞同：126
> 
> 时间：2012-07-12T01:23:19.793
> 
> 标签：keyboard-shortcuts, sublimetext

我想用崇高的文本注释掉一段代码。

我在 RailsCasts 中看到它，但不要认为他使用 sublime text ... 来执行以下操作...

```
if (uncommented)
  some uncommented example
  # if (commented) 
  #   some commented example code
  # end
end 
```

崇高文本中是否有可用于插入#块的快捷方式？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-07-12T01:29:19.770

*注释掉或*取消注释选定文本*或*当前行的快捷方式：

*   窗户：`Ctrl`+`/`
*   苹果电脑：`Command ⌘</kbd>+`/``
*   Linux: `Ctrl`+ `Shift`+`/`

或者，使用菜单：`Edit > Comment`

对于您可能想要使用的块注释：

*   窗户：`Ctrl`+ `Shift`+`/`
*   苹果电脑：`Command ⌘</kbd>+`Option/Alt`+`/``

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-05-15T16:27:34.497

你正在寻找`toggle_comment`命令。（编辑 > 评论 > 切换评论）

默认情况下，此命令映射到：

*   `Ctrl`+ `/`（在 Windows 和 Linux 上）
*   `Command ⌘</kbd>+`/` (On Mac)`

该命令还带有一个`block`参数，它允许您使用块注释而不是单行注释（例如`/* ... */`，与 JavaScript 中的相反`// ...`）。默认情况下，以下组合键映射到切换块注释：

*   `Ctrl`+ `Shift`+ `/`（在 Windows 和 Linux 上）
*   `Command ⌘</kbd>+`Alt`+`/` (On Mac)`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-11-17T19:08:37.793

对于非美国键盘布局，默认快捷键`Ctrl`+ `/`(Win/Linux) 不起作用。

根据[罗伯特的评论](https://stackoverflow.com/questions/11443857/shortcut-to-comment-out-a-block-of-code-with-sublime-text/23683570#comment54462369_11443903)，我设法将其更改为`Ctrl`+`1`

```
[
{
    "keys": ["ctrl+1"],
    "command": "toggle_comment",
    "args": { "block": false } 
}
,
{   "keys": ["ctrl+shift+1"],
    "command": "toggle_comment",
    "args": { "block": true }
}
] 
```

到`Preferences -> Key Bindings`（在右半部分，用户键盘映射）。

*`[]`注意右边应该只有一组括号（' '）；如果您已经有了一些东西，请将其复制粘贴在括号之间并仅保留最外面的括号。*

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-28T01:37:50.100

`Ctrl`-`/`将插入`//`样式注释，用于 javascript 等
`Ctrl`-`/`将为`<!-- -->`HTML 插入注释，
`Ctrl`-`/`将为`#`Ruby、
.. etc 插入注释

但不能在 HTML`<script>`标签上完美运行。

HTML`<script> ..blah.. </script>`标签：
`Ctrl`- `/` `twice`（即`Ctrl`- `/``Ctrl`- `/`）将有效地注释掉该行：

*   第一个`Ctrl`-`/`添加`//`到行首，
    注释掉脚本标签，但将“ `//`”文本添加到您的网页。
*   第二个`Ctrl`-`/`然后将其包围在 `<!-- -->`样式注释中，从而完成任务。

`Ctrl`--不会在 HTML**上**`Shift`生成多行注释（甚至是单行注释），但会在 Javascript、文本和其他文件格式中 添加样式多行注释。 `/` **`/* */`**

 **--

[我添加为新答案，因为我无法添加评论。
我包含此信息是因为这是我正在寻找的信息，并且这是我的搜索结果中唯一相关的 StackOverflow 页面。
从那以后我发现了`/` `/`HTML 脚本标签的技巧并决定分享这些额外的信息，因为它需要对通常的包罗万象（和上面报告的）
`/`和`Ctrl`——在崇高中注释掉一个人的代码的方法略有不同。`Shift`]`/`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-05-15T16:12:39.753

您可以使用切换块注释

`Ctrl`+ `Shift`+`/`

来源：[http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=2967](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=2967)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-24T23:58:11.067

只是一个重要的说明。如果您有 HTML 注释并且您的取消注释不起作用
（可能是 PHP 文件），所以不要标记所有注释，只需将光标放在注释的末尾或开头（之前）并重试（`Ctrl`+ `/`)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-10-11T02:52:01.237

以防万一有人使用葡萄牙语 ABNT 键盘布局快捷方式是

```
Ctrl + ; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-25T09:13:58.583

在 mac 我做了这个

*   输入您的评论并按 command + D 选择文本
*   然后按 Alt + Command + / 注释掉选定的文本。**

# javascript - 尝试通过 javascript 和 omniauth-facebook 向 facebook 进行身份验证时出现 OAuth 错误

> ID：11443858
> 
> 赞同：4
> 
> 时间：2012-07-12T01:23:27.737
> 
> 标签：javascript, facebook, ruby-on-rails-3, omniauth

试图通过他的 Railscast 实现 Ryan 的 JS 实现 Facebook 登录：[http ://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

服务器端身份验证工作得很好——那里没有问题——但是通过 JS 弹出窗口尝试它总是给我这个错误：

![在此处输入图像描述](../Images/a1597658a8a8226f592beeb83d9512f1.png)

另外，我的服务器输出记录：

```
(facebook) Callback phase initiated.
(facebook) Authentication failure! invalid_credentials: OmniAuth::Strategies::OAuth2::CallbackError, OmniAuth::Strategies::OAuth2::CallbackError 
```

我的直觉告诉我原因是没有数据被传递到回调 URL（来自 ASCIIcast 底部的 Ryan 的 JS 代码）：

```
window.location = '/auth/facebook/callback' if response.authResponse 
```

但我对 Omniauth 的工作原理知之甚少，无法确定。谁能帮我这个？如果您需要我发布特定文件，请告诉我，尽管一切都应该逐字记录 Ryan 在他的截屏视频中已经提到的内容。

* * *

**更新**：所以我刚刚找到[这篇文章](https://stackoverflow.com/questions/7897265/how-to-get-authorization-code-from-facebook-javascript-sdk)，看起来 JS 调用正确，所以我很难过。:(

* * *

**另一个更新**：我似乎可以使用浏览器控制台很好地操纵我的状态。呼叫`FB.login()`会提示我一个窗口，我可以填写该窗口，然后它会登录。运行

```
FB.getLoginStatus(function(resp) { console.log(resp.status); }); 
```

...确认我已使用有效凭据连接。所以现在我真的很困惑为什么这不起作用......

作为参考，这是我加载到页面上的 JS：

```
jQuery ->
  $('body').prepend '<div id="fb-root"></div>'

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: '<%= ENV["FACEBOOK_APP_ID"] %>', cookie: true)

  $('*[data-js="fb_login"]').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse

  $('*[data-js="logout"]').click ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
      true 
```

是的，我已经确认正在`<%= ENV["FACEBOOK_APP_ID"] %>`返回我正确的 Facebook 应用 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:53:26.983

在“标准”端口 80/443 以外的任何端口上使用 JS SDK 都存在一些问题。

尝试设置您的本地测试机器，使其使用这些端口之一（80 用于 HTTP，443 用于 HTTPS），并查看问题是否仍然存在。

# delphi - Delphi 2010 对象检查器网格和 windows dpi

> ID：11443868
> 
> 赞同：1
> 
> 时间：2012-07-12T01:24:55.767
> 
> 标签：delphi, delphi-2010, delphi-ide

我在高分辨率宽屏幕上工作，我将 dpi 设置为 144，这样我可以更好地看到字体。

Delphi 2010 对象检查网格中的问题我看不到网格无法缩放的属性或事件名称的文本！

有什么解决办法吗？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:59:01.773

读完你的帖子后，我问 Uwe Schuster 是否可以用他们伟大的“对象检查专家”解决这个问题，他做到了。

你可以在这里下载：http: [//www.bitcommander.de/blog/index.php/2012/07/15/oi-rev-5/](http://www.bitcommander.de/blog/index.php/2012/07/15/oi-rev-5/)

# objective-c - 从 UITableView 中删除会导致应用崩溃

> ID：11443873
> 
> 赞同：0
> 
> 时间：2012-07-12T01:25:53.923
> 
> 标签：objective-c, ios, xcode, nsmutablearray, nsarray

我有一个 UITableView 并且我实现了从表格滑动方法中删除。
由于某种原因，数组的分配导致应用程序崩溃。
我想知道为什么。

两个属性：

```
@property (nonatomic,retain) NSMutableArray *mruItems;
@property (nonatomic,retain) NSArray *mruSearchItems;
 . 
 .
 .
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle != UITableViewCellEditingStyleDelete)
        return;

    NSString *searchString = [self.mruSearchItems objectAtIndex:indexPath.row];
    [self.mruItems removeObject:searchString];

    [self.mruSearchItems release];

    // This line crashes:
    self.mruSearchItems = [[NSArray alloc] initWithArray:self.mruItems];

    [self.searchTableView reloadData];
   } 
```

就好像mruItems的对象被移除后，就忍不住初始化mruSearchItems了……

谢谢！

编辑：

```
EXC_BAD_ACCESS 
```

`@synthesize mruItems,mruSearchItems;` <--调试器指向这里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:40:59.567

它是双重释放导致崩溃。

```
[self.mruSearchItems release]; 
```

这使得 refcount -1

```
self.mruSearchItems = [[NSArray alloc] initWithArray:self.mruItems]; 
```

这使得 refcount -1

由于 mruSearchItems 在属性属性中具有“保留”，因此您对它的分配将导致另一个 refcount -1。

因此，要么删除发布行，要么在发布之后和分配给它之前将其设置为 nil。

* * *

编辑：这一行

```
self.mruSearchItems = [[NSArray alloc] initWithArray:self.mruItems]; 
```

导致内存泄漏，修复如下：

```
self.mruSearchItems = [[[NSArray alloc] initWithArray:self.mruItems] autorelease]; 
```

或者：

```
NSArray *tmpArray = [[NSArray alloc] initWithArray:self.mruItems];
self.mruSearchItems = tmpArray;
[tmpArray release]; 
```

* * *

再次编辑

财产中的“保留”实际上是做什么的？

以 mruSearchItems 为例，当你分配它时：

```
- (void)setMruSearchItems:(NSArray *)newArray
{
    [newArray retain];
    [mruSearchItems release]; // this lines causes a second release to the old value
    mruSearchItems = newArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:32:04.670

为什么需要释放对象并重新分配它？如果你做`mruSearchItems`一个`NSMutableArray`然后你可以简单地打电话：

```
[mruSearchItems removeAllObjects];
[mruSearchItems addObjectsFromArray:self.mruItems]; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:49:55.490

我认为您在发布数组时遇到问题。我希望这会对您有所帮助

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

```
NSString *searchString = [self.mruSearchItems objectAtIndex:indexPath.row];
 [self.mruSearchItems removeObjectAtIndex:searchString]
[self.searchTableView reloadData]; 
```

}

# android - 如何确定 ListView fling 何时变慢

> ID：11443874
> 
> 赞同：1
> 
> 时间：2012-07-12T01:26:07.950
> 
> 标签：android, performance, android-listview, baseadapter

为了提高列表滚动的性能，我[实施了这个建议](http://www.programmingmobile.com/2012/03/buttery-smooth-list-scrolling-in.html)，它肯定会提高性能。

我的就是这样实现的

```
@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
    switch (scrollState) {
        case OnScrollListener.SCROLL_STATE_IDLE:
            adapter.busy = false;
            adapter.notifyDataSetChanged();
            break;
        case OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:
            adapter.busy = true;
            break;
        case OnScrollListener.SCROLL_STATE_FLING:
            adapter.busy = true;
            break;
    }
} 
```

但是，我想让它在视觉上更具吸引力，只要列表滚动速度超过某个阈值，就将 adapter.busy 设置为 false。但是，我想不出在滚动时确定滚动速度的好方法。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:32:42.207

那么你可以随时获得滚动位置。使用 CountdownTimer 定期检查最新的滚动位置，并与之前的滚动位置进行比较以确定方向和速度。如果它的移动太快根据更新。实施后，请按上述方式发布结果。（可能还有滚动位置更改事件，或者您可能会利用焦点事件更改来确定这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T11:57:00.457

有类似的要求，以下对我有用。只需要尝试最适合 MIN_VELOCITY 的

```
@Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount,
                int totalItemCount) {

            checkFlingVelocitySlowDown(firstVisibleItem, totalItemCount);
        }

int mLastScrollInTopItemPosition = 0;
long mLastTimeTopPositionChanged = System.currentTimeMillis();
final double MIN_VELOCITY = 0.01;
final int TOP_VIEW_ITEMS_RANGE = 3;
final int BOTTOM_VIEW_RANGE = 6;

void checkFlingVelocitySlowDown(int scrollInTopItemPosition, int totalItemCount) {
    try {
        if (mLastScrollInTopItemPosition != scrollInTopItemPosition) {
            long now = System.currentTimeMillis();
            long timeSpan = now - mLastTimeTopPositionChanged;
            double velocity = (timeSpan > 0) ? (1.0 / timeSpan) : 1000000;
            mLastScrollInTopItemPosition = scrollInTopItemPosition;
            mLastTimeTopPositionChanged = now;

            if (velocity <= MIN_VELOCITY ||
                    scrollInTopItemPosition <= TOP_VIEW_ITEMS_RANGE ||
                    (Math.abs(totalItemCount - scrollInTopItemPosition) < BOTTOM_VIEW_RANGE)) {
                // to what ever it should do when scroll closer to top or bottom, or fling is slowing down
            }
        }
    } catch (Exception e) {}
} 
```

# javascript - cakephp 2.2 在控制器中检索 json 数据

> ID：11443875
> 
> 赞同：8
> 
> 时间：2012-07-12T01:26:11.297
> 
> 标签：javascript, json, cakephp

我正在尝试使用 JQuery 从网页发送 JSON 数据，如下所示：

```
$.ajax({
    type: "post",       // Request method: post, get
    url: "http://localhost/ajax/login",
    data: '{username: "wiiNinja", password: "isAnub"}',
    dataType: "json",   // Expected response type
    contentType: "application/json",
    cache: false,
    success: function(response, status) {
        alert ("Success");
    },
    error: function(response, status) {
        alert('Error! response=' + response + " status=" + status);
    }
}); 
```

在 cake2.2 中，我有一个名为 Ajax 的控制器，它有一个名为“login”的方法，如下所示：

```
public function login($id = null)
{
    if ($this->RequestHandler->isAjax())
    {
        $this->layout = 'ajax'; // Or $this->RequestHandler->ajaxLayout, Only use for HTML
        $this->autoLayout = false;
        $this->autoRender = false;

        $response = array('success' => false);

        $data = $this->request->input(); // MY QUESTION IS WITH THIS LINE
        debug($data, $showHTML = false, $showFrom = true);
    }
    return;
} 
```

我只想看看我是否将正确的数据传递给控制器​​。如果我使用这条线：

```
$data = $this->request->input(); 
```

我可以看到调试打印输出：

```
{username: "wiiNinja", password: "isCool"} 
```

我在 CakePHP 手册 2.x 中阅读了“访问 XML 或 JSON 数据”下的内容，它建议使用此调用来解码数据：

```
$data = $this->request->input('json_decode'); 
```

当我调试 print $data 时，我得到“null”。我究竟做错了什么？我从 Javascript 传入的数据是否不正确？还是我没有正确调用解码？

感谢您的任何建议。

=============我自己的编辑========

通过实验发现自己的错误：

通过 Javascript 发布时，而不是这一行：

```
data: '{username: "wiiNinja", password: "isAnub"}', 
```

将其更改为：

```
data: '{"username": "wiiNinja", "password": "isAnub"}', 
```

和

在控制器代码中，更改此行：

```
$data = $this->request->input('json_decode'); 
```

至：

```
$data = $this->request->input('json_decode', 'true'); 
```

有用。

* * *

邓纳姆兹，

当我遵循您的建议并检查控制器代码中的“$this->request->params”数组时，它包含以下内容：

```
array(
    'plugin' => null,
    'controller' => 'ajax',
    'action' => 'login',
    'named' => array(),
    'pass' => array(),
    'isAjax' => true
) 
```

如您所见，我要查找的数据不存在。我已经得到了正确的路线代码。这与 2.x 的文档在这里所说的一致：

[http://book.cakephp.org/2.0/en/controllers/request-response.html](http://book.cakephp.org/2.0/en/controllers/request-response.html)

到目前为止，我发现使其工作的唯一方法是如上文“我自己的编辑”中所述。但是如果向服务器发送 JSon 字符串不是正确的做法，我想解决这个问题，因为最终，我将不得不处理将发送 JSon 对象的第三方代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:21:22.663

您在数据方面苦苦挣扎的原因是因为您使用 jQuery 发送字符串，而不是正确的 javascript 对象 (JSON)。

```
$.ajax({
    type: "post",       // Request method: post, get
    url: "http://localhost/ajax/login",
    data: {username: "wiiNinja", password: "isAnub"}, // outer quotes removed
    dataType: "json",   // Expected response type
    contentType: "application/json",
    cache: false,
    success: function(response, status) {
        alert ("Success");
    },
    error: function(response, status) {
        alert('Error! response=' + response + " status=" + status);
    }
}); 
```

现在数据将作为 PHP 数组在`$this->request->params`.

此外，对于发送 JSON 响应，[请参阅此手册页](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)。您的大部分代码可以减少到只有 2 行...

```
//routes.php
Router::parseExtensions('json');

//Controller that sends JSON
$this->set('_serialize', array('data')); 
```

# powerbuilder - PowerBuilder 标签页

> ID：11443877
> 
> 赞同：1
> 
> 时间：2012-07-12T01:26:24.673
> 
> 标签：powerbuilder

我在 PowerBuilder 中有一个标签页（tab_1），我想做的是每当我单击一个按钮时在该标签页（tab_1）中插入一个标签页。它将通过编码插入标签页。我想复制任何内容（右键单击插入标签页...）有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:10:15.960

要在运行时添加标签页，您需要

*   准备一个包含控件（最好是处理代码）的可视用户对象
*   当按钮单击发生时，使用`OpenTab()`或`OpenTabWithParm()`方法将具有所需内容的新页面添加到选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T09:31:08.567

要动态创建标签页，您可以使用以下任何一种方法。

1.  tabcontrolname.OpenTab (userobjectvar, userobjecttype, index)
2.  tabcontrolname.OpenTabWithParm ( userobjectvar, parameter, index )

请参考： http://infocenter-archive.sybase.com/help/index.jsp?topic=/com.sybase.dc37781_1150/html/psref/ [CAIDCDGJ.htm](http://infocenter-archive.sybase.com/help/index.jsp?topic=/com.sybase.dc37781_1150/html/psref/CAIDCDGJ.htm)

# android - Android 计费 - 在 Security.java 文件中，base64EncodedPublicKey 应该是编码值吗？

> ID：11443880
> 
> 赞同：8
> 
> 时间：2012-07-12T01:26:34.550
> 
> 标签：android, android-billing

我应该将我的应用程序的实际公钥粘贴到这个变量的值中吗？

或者我应该对其进行编码，然后无论编码的字符串是什么，我都会将该字符串变成这个变量的值？

应该是哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T03:25:00.517

您的 Android 开发者控制台中的公钥（可以在“编辑配置文件”下找到）**已经是 Base64 编码**的。只需将密钥的内容复制粘贴到源文件中即可。例如，如果你有这样的事情：

![在此处输入图像描述](../Images/432f44609aae752170c0c0f007088cd3.png)

然后在你的`Security.java`：

```
String base64EncodedPublicKey = "MIIBIjANBgkqhkiG9w0BAQ......"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-27T09:31:03.730

正如 Google 应用内计费示例代码所说，您应该混淆这个公钥。

> 不只是将整个文字字符串存储在这里嵌入程序中，而是在运行时从片段构造密钥或使用位操作（例如，与其他字符串进行异或）来隐藏实际密钥。密钥本身不是秘密信息，但我们不想让攻击者很容易用自己的公钥替换公钥，然后从服务器伪造消息。

我使用非常简单的 Java 代码来生成将返回公钥的 Java 类。基本思想是使用内部静态类使用递归来重新创建密钥。**这只是深思熟虑**。

对于我的利基市场来说，这是一种“足够好”的方法。有关混淆的更多信息，请参阅[此 stackexchange 安全问题](https://security.stackexchange.com/questions/33686/strong-encryption-for-base64-encoded-public-key-in-android)。

```
public static void main(String[] args) throws Exception {
    String className = genClassName();
    PrintWriter writer = new PrintWriter("C:\\" + className + ".java", "iso-8859-1");
    printClass(className, writer, "XXXXXX-YOUR-PUBLIC-KEY-GOES-HERE-XXXXXXX", true);
    writer.close();
}

private static String genClassName() {
    return "Class" + UUID.randomUUID().toString().replaceAll("-", "");
}

private static String printClass(String thisClass, PrintWriter writer, String key, boolean root) {
    int split = key.length() / 2;
    if (split < 10) {
        writer.println("public " + (root ? "" : "static") + " class " + thisClass + " {");
        writer.println("public static String get() {");
        writer.println("return \"" + key + "\";");
        writer.println("}");
        writer.println("}");
    } else {
        String first = key.substring(0, split);
        String last = key.substring(split, key.length());
        writer.println("public " + (root ? "" : "static") + " class " + thisClass + " {");
        String class1 = printClass(genClassName(), writer, first, false);
        String class2 = printClass(genClassName(), writer, last, false);
        writer.println("public static String get() {");
        writer.println("return " + class1 + ".get() + " + class2 + ".get();");
        writer.println("}");
        writer.println("}");
    }

    return thisClass;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T03:56:20.613

您需要程序源代码中的公钥，以便您可以检查签名。是的，破解者会发现它，将其替换为假货，并为您的程序提供虚假购买，这是非零且不可避免的风险。

您无法完全隐藏密钥以防窥探，但可以混淆。您可以将 Base64 字符串分解为不同位置的多个字符串常量，并在使用前将它们连接起来。最好给这些块起不起眼的名字（*不*喜欢`MY_PUBLIC_KEY_PART_4`）。您还可以对其应用额外的软加密层 - 例如 XOR a value。您可以添加完整性检查 - 确保密钥没有被欺骗（例如，将密钥的哈希存储在其他地方并检查）。但这仍然是通过默默无闻的安全性 - 一个足够坚定的黑客会通过。

还可以考虑内置代码混淆工具 ProGuard。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T20:28:05.210

如果你有一个服务器组件作为你的应用程序的一部分，那么你可以将你的大部分安全元素，包括你的公钥，移动到你的服务器上。在服务器上，您可以生成随机数并验证购买（我已将我的移动到 RESTFul WCF 服务）。如果您的服务器组件是基于 .NET 的，那么您可能必须从您的公钥生成一个模数和一个指数，以便您可以使用`RNGCryptoServiceProvider`该类。有一个 Google I/O 视频，其中概述[了应用内计费](http://www.youtube.com/watch?v=TnSNCXR9fbY)等。

# javascript - 等距平铺地图中的 Z 轴

> ID：11443881
> 
> 赞同：2
> 
> 时间：2012-07-12T01:26:35.427
> 
> 标签：javascript, html, canvas, isometric

我正在 JavaScript 和 HTML5 Canvas 中试验 Isometric Tile Map。我将 Tile Map 数据存储在 JavaScript 2D 数组中。

```
// 0 - Grass
// 1 - Dirt
// ...
var mapData = [
    [0, 0, 0, 0, 0],
    [0, 0, 1, 0, 0,
    ...
] 
```

并画

```
for(var i = 0; i < mapData.length; i++) {
    for(var j = 0; j < mapData[i].length; j++) {
        var p = iso2screen(i, j, 0); // X, Y, Z
        context.drawImage(tileArray[mapData[i][j]], p.x, p.y);
    }
} 
```

但是这个函数意味着所有瓦片Z轴都等于零。

```
var p = iso2screen(i, j, 0); 
```

也许有人有想法以及如何做`mapData[0][0]`Z轴等于3的事情；`mapData[5][5]`Z轴等于5；?

我有想法：为草、污垢编写函数并将此函数存储到 2D 数组并绘制和稍后`mapData[0][0].setZ(3);`。但是为每个图块编写函数是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:36:08.083

如果不知道 Z 如何影响瓷砖的位置，很难回答。如果 Z 仅表示绘制顺序（并且由于 HTML5 Canvas 不支持 Z 索引），那么您还应该将图块数据存储在排序数组中，以便您可以在绘制单个图块时对其进行迭代。

对于等距图块，最上面的图块（位于`(0,0)`）的 Z 顺序为 ，`(- mapWidth - mapHeight)`而位于 的任何图块的 Z 顺序`(x,y)`为`( (-mapWidth + x) + (-mapHeight + y))`。

等距平铺地图的另一个概念是图层。可以为图层分配一个高度属性，将其移动到另一图层上方。

# python - python中列表映射列表的所有组合

> ID：11443883
> 
> 赞同：1
> 
> 时间：2012-07-12T01:26:50.500
> 
> 标签：python

嗨，我怎样才能得到一个映射列表来打印所有可能的组合

说 dict 映射是 = {1:[a,b],2:[c,d]......

因此，对于列表 [1,2] 和上面的示例映射，我想将 a,d 对 c,d 对的所有可能组合打印到列表中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T01:28:17.147

[查看itertools 模块](http://docs.python.org/library/itertools.html#module-itertools)中的组合函数。

如果您正在寻找`ab`反对的所有配对`cd`，*产品*功能应该会有所帮助：

```
>>> d = {1: ['a','b'], 2: ['c', 'd']}
>>> for t in product(*d.values()):
        print t

('a', 'c')
('a', 'd')
('b', 'c')
('b', 'd') 
```

如果您一次查看*r*的各种大小的所有组合`abcd`，那么该*组合**函数*应该可以完成工作：

 ***```
>>> for r in range(5):
        for t in combinations('abcd', r):
            print t

()
('a',)
('b',)
('c',)
('d',)
('a', 'b')
('a', 'c')
('a', 'd')
('b', 'c')
('b', 'd')
('c', 'd')
('a', 'b', 'c')
('a', 'b', 'd')
('a', 'c', 'd')
('b', 'c', 'd')
('a', 'b', 'c', 'd') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:31:42.090

```
from itertools import product

mapping = {1:['a','b'], 2:['c','d']}
data = [1, 2]
for combo in product(*(mapping[d] for d in data)):
    print combo 
```

结果是

```
('a', 'c')
('a', 'd')
('b', 'c')
('b', 'd') 
```

**编辑**听起来你*真正*想要的是

```
strings = [''.join(combo) for combo in product(*(mapping[d] for d in data))] 
```

这给出了`strings == ['ac', 'ad', 'bc', 'bd']`.***

# python - Python 中 xml.dom.minidom 的空文本节点问题

> ID：11443884
> 
> 赞同：1
> 
> 时间：2012-07-12T01:27:20.617
> 
> 标签：python, xml, dom, minidom

环境：Python 2.6.5、Eclipse SDK 3.7.1、Pydev 2.3

我正在尝试使用 Python 解析和更改 XML 数据中的值，`xml.dom.minidom`但我遇到了空白文本节点的问题。

当我将 XML 文件解析为 DOM 对象，然后使用 将其转换回字符串`toxml()`时，在所有空白文本节点之后，结束的“描述”标签会变得混乱。

有谁知道问题是什么？

**issue.py 的内容**

```
from xml.dom import minidom  
xml_dom_object = minidom.parse('news_shows.xml')  
main_node = xml_dom_object.getElementsByTagName('NewsShows')[0]  
xml_string = main_node.toxml()  
print xml_string 
```

**news_shows.xml**的内容（注意两个空白文本节点）**：**

```
<NewsShows Planet="Earth" Language="English" Year="2012">
<NewsShow ShowName="The_Young_Turks">
 <Description Detail="Best_show_of_all_time_according_to_many">True</Description>
 <Description Detail="The_only_source_of_truth"></Description>
 <Description Detail="Three_hours_of_truth_per_day">True</Description>
</NewsShow>
<NewsShow ShowName="The_Rachel_Maddow_Show">
<Description Detail="Pretty_great_as_well">True</Description>
<Description Detail="Sucks_badly">False</Description>
<Description Detail="Conveys_more_information_than_TYT"></Description>
</NewsShow>
</NewsShows> 
```

**脚本的输出**（注意 2 个“描述”标签搞砸了）**：**

```
<NewsShows Language="English" Planet="Earth" Year="2012">
<NewsShow ShowName="The_Young_Turks">
 <Description Detail="Best_show_of_all_time_according_to_many">True</Description>
 <Description Detail="The_only_source_of_truth"/>
 <Description Detail="Three_hours_of_truth_per_day">True</Description>
</NewsShow>
<NewsShow ShowName="The_Rachel_Maddow_Show">
<Description Detail="Pretty_great_as_well">True</Description>
<Description Detail="Sucks_badly">False</Description>
<Description Detail="Conveys_more_information_than_TYT"/>
</NewsShow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:29:23.767

下面是来自“python-3.2.3.amd64\Lib\xml\dom\minidom.py”的代码片段。

```
def writexml(self, writer, indent="", addindent="", newl=""):
    # indent = current indentation
    # addindent = indentation to add to higher levels
    # newl = newline string
    writer.write(indent+"<" + self.tagName)

    attrs = self._get_attributes()
    a_names = sorted(attrs.keys())

    for a_name in a_names:
        writer.write(" %s=\"" % a_name)
        _write_data(writer, attrs[a_name].value)
        writer.write("\"")
    if self.childNodes:
        writer.write(">")
        if (len(self.childNodes) == 1 and
            self.childNodes[0].nodeType == Node.TEXT_NODE):
            self.childNodes[0].writexml(writer, '', '', '')
        else:
            writer.write(newl)
            for node in self.childNodes:
                node.writexml(writer, indent+addindent, addindent, newl)
            writer.write(indent)
        writer.write("</%s>%s" % (self.tagName, newl))
    else:
        writer.write("/>%s"%(newl)) 
```

根据该函数，如果“self”变量（即要写入XML 的节点）没有“childNodes”，则编写器将编写一个自关闭标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:59:22.610

这实际上会在某处引起问题吗？根据我对 xml 的所有了解，字符串`<tag></tag>`和`<tag/>`是等价的。

# javascript - jQuery 中的 .files[0] 属性

> ID：11443886
> 
> 赞同：3
> 
> 时间：2012-07-12T01:27:44.360
> 
> 标签：javascript, jquery, multipartform-data

jQuery中是否有与此语句等效的语句？

```
var value = document.getElementById(id).files[0]; 
```

使用附加了 .files[0] 的标准 jQuery 选择器似乎不起作用，而且我找不到与 .files 等效的 jQuery 命令。有什么建议么？

我正在使用它从 input type='file' 表单元素中检索文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T01:32:20.020

```
$('#id').get(0).files[0] 
```

get(0) 返回 DOM 元素

# mysql - 关于如何设计应该存储有关多种类型帖子的数据的数据库（mysql）的任何提示？

> ID：11443887
> 
> 赞同：0
> 
> 时间：2012-07-12T01:27:44.893
> 
> 标签：mysql, rdbms, polymorphic-associations

好的，所以假设数据库应该存储有关多种类型帖子的数据（简单帖子和具有许多表单字段的复杂预格式化帖子）。很明显，这些帖子的数据应该存储在不同的表中。

问题是所有这些帖子表都应该有一些额外的喜欢/评论表链接到它们。这将意味着越来越多的表/查询......

你会推荐这个答案中的多态关联吗？[https://stackoverflow.com/a/2003042/997178](https://stackoverflow.com/a/2003042/997178)或这张图片：

![多态关联的另一个例子](../Images/07ef34634b24d33b2177da9d39cf0980.png) 但是多态关联还有另一个问题，不是所有的帖子（实体）都可以有评论。如果我必须进行搜索才能找到只知道它是 objectid 的帖子（来自评论表的 fk），我将不得不搜索所有帖子表才能找到它......

或者你会推荐具体的方法并有更多的表和查询？
[http://martinfowler.com/eaaCatalog/concreteTableInheritance.html](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)

PS：任何提示将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:59:33.647

不像你描述的那样。考虑购买一本好的数据库书籍并阅读有关范式的部分。粗略地说，这个想法是将数据库想象成一个包含大量空条目的巨大表，然后仔细拆分列集以创建更多表。不需要直觉。对于几种范式中的每一种（BCNF 是一个值得关注的合理形式），都有明确定义的规范化规则可以保证获得良好的结果。当您不需要任何空值来表示数据模型时，您就完成了。在某些情况下，出于性能原因，您将避免进行某些拆分（并保留空值）以避免连接，但这应该仅在基准测试之后或您对您的环境和数据非常有经验的情况下完成。一个做得好的范式数据库是一件美好的事情。

维基[百科页面](http://en.wikipedia.org/wiki/Database_normalization)是一个合理的介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:27:08.770

我找到了部分解决方案...

我将混合使用多态关联/基本父表模型 + 多态关联/反转关系模型，来自这张幻灯片：

[http://www.slideshare.net/billkarwin/practical-object-oriented-models-in-sql](http://www.slideshare.net/billkarwin/practical-object-oriented-models-in-sql)

# spring - 如何通过 URL POST 到数据库

> ID：11443893
> 
> 赞同：0
> 
> 时间：2012-07-12T01:28:22.190
> 
> 标签：spring, hibernate

我正在 Spring/Hibernate 中编写一个处理基本投票功能的 Web 应用程序。我想要一个指向 /vote/{gameId} 的链接，它将将该投票添加到该特定 ID 的数据库中。不过，我真的不知道如何做到这一点。这是我在控制器中尝试过的：

```
@RequestMapping(value="/vote/{gameId}", method = RequestMethod.POST)
public String addVote(@PathVariable("gameId")
Integer gameId) {

    Vote vote = new Vote();
    vote.setGameId(gameId);

    voteService.addVote(vote);
    return "redirect:/games/wanted.html";
} 
```

这是链接在 jsp 中显示的位置：

```
<c:if test="${!empty games}">
    <table>
        <tr>
            <th>Game Title</th>
            <th>Votes</th>
            <th>&nbsp;</th>
        </tr>

        <c:forEach items="${games}" var="game">
            <tr>
                <td><c:out value="${game.title}"/></td>
                <td>Placeholder</td>
                <td><a href="vote/${game.id}">Vote!</a></td>
            </tr>
        </c:forEach>
    </table>
</c:if> 
```

当我尝试这个时，我只是得到一个 404 错误。任何见解都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:38:57.197

这是您使用纯 Javascript[进行后调用的方式：](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)

```
var url = "vote";
var params = "id=1";
http.open("POST", url, true);

//Send the proper header information along with the request
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
        alert(http.responseText);
    }
}
http.send(params); 
```

您需要在点击链接时调用它。

另一方面，例如，如果您使用[jQuery Javascript 库，则要](http://api.jquery.com/jQuery.post/)容易得多：

对于您的特定情况，它将类似于：

```
$.post("vote", { id: "1" } ); 
```

或者完整的 jQuery 答案（记得用你标签的 id 替换 #linkid）：

```
$(document).ready(function() {  //this runs on page load
  // Handler for .ready() called.

   $('#linkid').click(function(event) {  //this finds your <a> and sets the onclick, you can also search by css class by type of tag
     $.post("vote", { id: "1" } );
       return false; //this is important so that the link is not followed
    });

}); 
```

# model-view-controller - MVC、Servlet、JSP、无输出

> ID：11443896
> 
> 赞同：0
> 
> 时间：2012-07-12T01:28:49.640
> 
> 标签：model-view-controller, jsp, servlets

我正在尝试学习 Servlets/JSP。当我尝试以下代码时，我没有得到任何输出。有人可以帮帮我吗？当我运行代码时，我只得到标题，我没有看到下拉列表中显示的值。

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

public class VacationTrackerDAO {

public static List<VactionTrackerBean> list() throws SQLException{
    List<VactionTrackerBean> appr= new ArrayList<VactionTrackerBean>();

    try{

        DBConnection conObj=new DBConnection(); 
        Connection dbCon= conObj.getCon();
        Statement stmt=conObj.getStmt();
        String queryCPList="select * from Capacity_Plan";
        String queryApprList="Select First_Last_Name from Vacation_Approvers";
        PreparedStatement preStmtCPList=dbCon.prepareStatement(queryCPList);//get metadat
        PreparedStatement preStmtApprList=dbCon.prepareStatement(queryApprList);//get names
        //ResultSet rsCPList=preStmtCPList.executeQuery();
        ResultSet rsApprList=preStmtCPList.executeQuery();

        //ResultSetMetaData metaCPList=rsCPList.getMetaData();

        VactionTrackerBean vtBean=new VactionTrackerBean();
        while(rsApprList.next()){
            vtBean.setApprover((rsApprList.getString("First_Last_Name")));
            appr.add(vtBean);
        }

}catch(Exception e){
    System.out.println("In the Vacation TrackerDAO.java class:"+e);
}
return appr;

}
} 
```

豆：

```
 public class VactionTrackerBean {

private String dates;
private String approver;
public String getDate() {
    return dates;
}
public void setDate(String dates) {
    this.dates = dates;
}
public String getApprover() {
    return approver;
}
public void setApprover(String approver) {
    this.approver = approver;
}

} 
```

小服务程序：

```
public class VacationTracker extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {

    doPost(request, response);

}

protected void doPost(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {

    try{

    List<VactionTrackerBean> vacTracker=VacationTrackerDAO.list();
    request.setAttribute("vacTracker", vacTracker);
    request.getRequestDispatcher("WEB-INF/VacationTracker.jsp").forward(request,response);

    }catch (SQLException e){
        System.out.println("Error in VacationTracker.java due to VactionTrackerDA.java:"+e);
        request.getRequestDispatcher("WEB-INF/Error.jsp").forward(request,response);
    }

}
} 
```

JSP 页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01      Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Vacation Tracker</title>  
</head>
<body>

<h1> Vacation Tracker </h1>

 <div id="main">

<c:forEach items="${vacTracker}" var="vacTracker"> 
<select id="myselect" name="mydata" size="10"> 
<option value="${vacTracker.approver}">${vacTracker.approver}</option>
</select>   
</c:forEach>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:13:58.490

检查您是否在列表中获取值。在 DAO 类的 while 循环之后放置一些 SOP。

另外，代码有错误。它应该是

```
<select id="myselect" name="mydata" size="10"> 
<c:forEach items="${vacTracker}" var="vacTracker"> 
  <option value="${vacTracker.approver}">${vacTracker.approver}</option>
</c:forEach>
</select> 
```

否则，它将为每个项目创建新的选择。

# jaxb - 包含另一个映射的对象的 JAXB 解组映射

> ID：11443897
> 
> 赞同：0
> 
> 时间：2012-07-12T01:28:51.717
> 
> 标签：jaxb, hashmap

我已经成功地使用 JAXB 来解组某些 xml 文件，但我还有另一个更复杂的情况。基本上我的 xml 文件如下所示：

```
<BCLCurrenciesInflation>
<currenciesInflation>
    <currency>
        <curencyName>Yen</curencyName>
        <countryName>Japan</countryName>
        <issuingDate>1900-01-01</issuingDate>
        <expirationDate></expirationDate>
        <inflation>
            <year>1900</year>
            <percentage>16</percentage>
        </inflation>
        <inflation>
            <year>1901</year>
            <percentage>17</percentage>
        </inflation>
    </currency>
    <currency>
        <curencyName>Dolar</curencyName>
        <countryName>USA</countryName>
        <issuingDate>1900-01-01</issuingDate>
        <expirationDate></expirationDate>
        <inflation>
            <year>1902</year>
            <percentage>18</percentage>
        </inflation>
        <inflation>
            <year>1903</year>
            <percentage>19</percentage>
        </inflation>
    </currency>
</currenciesInflation> 
```

所以基本上是 a`HashMap<String,BCLCurrency>`和 BCLCurrency 看起来像这样：

```
public class BCLCurrency
{
@XmlElement(name = "currencyName")
public String name;

@XmlElement(name = "countryName")
public String country;

@XmlElement(name = "issuingDate")
public String issuingDate;

@XmlElement(name = "expirationDate")
public String expirationDate;

@XmlElement(name = "inflation")
public Map<String,float> inflationMap;
} 
```

我正在考虑拥有两个适配器，第二个将从第一个适配器调用，但我对那个解决方案感到不舒服。

关于如何解决这个问题的任何想法？

PD：有趣的故事我不能在帖子开头打招呼，系统一直在压制它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:17:55.747

您可以为 map < K,V > 创建/使用通用适配器，而不是创建两个适配器。

# android - Android 用户偏好片段不显示

> ID：11443898
> 
> 赞同：0
> 
> 时间：2012-07-12T01:28:52.060
> 
> 标签：android, android-fragments

我正在尝试为我的 Android 4.0+ 应用程序建立一个设置屏幕。我无法获得两个复选框`vibratePreference`并`soundPreference`显示。我认为`UserPreferencesFragment`永远不会实例化。以下是涉及的文件。我已经为此工作了几个晚上，但我无法弄清楚我错过了什么。我在看什么？

谢谢，解放军

首选项_headers.xml

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >

    <header
        android:fragment="com.hometelco.hfa.activities.UserPreferencesFragment"
        android:summary="Home Field Advantage user settings"
        android:title="User Settings" />

</preference-headers> 
```

首选项.xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="User Settings" >
        <CheckBoxPreference
            android:defaultValue="true"
            android:key="vibratePreference"
            android:summary="Vibrate on adds and updates"
            android:title="Vibrate" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:key="soundPreference"
            android:summary="Play sound on adds and updates"
            android:title="Sound" />
    </PreferenceCategory>

</PreferenceScreen> 
```

UserPreferencesActivity.java

```
package com.hometelco.hfa.activities;

import java.util.List;

import android.preference.PreferenceActivity;
import android.util.Log;

import com.hometelco.hfa.R;

public class UserPreferencesActivity extends PreferenceActivity {
    private static final String TAG = "UserPreferencesActivity";

    public void onBuildHeaders(List<Header> target) {
        Log.i(TAG, "onBuildHeaders before load");
        loadHeadersFromResource(R.xml.preference_headers, target);
        Log.i(TAG, "onBuildHeaders after load");
    }
} 
```

UserPreferencesFragment.java

```
package com.hometelco.hfa.activities;

import android.os.Bundle;
import android.preference.PreferenceFragment;
import android.util.Log;

import com.hometelco.hfa.R;

public class UserPreferencesFragment extends PreferenceFragment {
    private final static String TAG = "UserPreferencesFragment";

    public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "UserPreferencesFragment onCreate");
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T14:58:22.563

我道歉。我的代码实际上一直在工作。我只是没有按设置标题。当我这样做时，我的复选框出现了。这不是我想要的，所以我更改`PreferenceActivity`为下面看到的代码。

```
package com.hometelco.hfa.activities;

import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;
import android.util.Log;

import com.hometelco.hfa.R;

public class UserPreferencesActivity extends PreferenceActivity {
    private static final String TAG = "UserPreferencesActivity";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "onCreate hasHeaders: " + hasHeaders());
         getFragmentManager().beginTransaction().replace(android.R.id.content,
         new UserPreferencesFragment()).commit();
    }
/*
    public void onBuildHeaders(List<Header> target) {
        Log.i(TAG, "onBuildHeaders before load");
        loadHeadersFromResource(R.xml.preference_headers, target);
        Log.i(TAG, "onBuildHeaders after load");
    }
*/
    public static class UserPreferencesFragment extends PreferenceFragment {
        private final static String TAG = "UserPreferencesFragment";

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Log.i(TAG, "fragment onCreate");
            addPreferencesFromResource(R.xml.preferences);
        }
    }
} 
```

感谢所有帮助我发现错误的人。

解放军

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:39:17.743

我想我在这一行中发现了错误：

```
android:fragment="com.hometelco.hfa.activities.UserPreferencesFragment" 
```

查看[文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html)`packaganame.preferenceactivity$preferencefragment`，他们显示使用...的格式调用该行

我相信preferences_headers.xml 中的那一行应该是：

```
android:fragment="com.hometelco.hfa.activities.UserPreferencesActivity$UserPreferencesFragment" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T01:45:42.660

我认为你应该尝试：

```
addPreferencesFromResource(R.layout.preferences); 
```

而不是：

```
addPreferencesFromResource(R.xml.preferences); 
```

您还需要像这样称呼您的复选框：

```
 final CheckBox checkBox = (CheckBox) findViewById(R.id.checkbox_id);
     if (checkBox.isChecked()) {
         checkBox.setChecked(false);
     } 
```

您应该在复选框中添加 ID。这是一个可能对您有所帮助的链接：

[http://developer.android.com/reference/android/widget/CheckBox.html](http://developer.android.com/reference/android/widget/CheckBox.html)

# c# - 如何使用 WatiN 按类查找和抓取？

> ID：11443902
> 
> 赞同：0
> 
> 时间：2012-07-12T01:29:19.360
> 
> 标签：c#, html, winforms, watin, scrape

我正在使用 WatiN 并尝试根据字段类从网络链接中抓取图像 URL。查看站点代码，图像信息显示如下：

```
//images code
<div class="doc-banner-icon">
    <img src="https://website.com/image.jpg">
</div>

//text code
<div id="doc-original-text">
    Once upon a time, in a land far far away...
</div> 
```

我想要做的是使用 WatiN 调用来查找该`img`链接。我想我可以使用类似`Find.ByClass()`调用的方法来专门查找代码的那个区域，但我似乎无法弄清楚如何获取该类中包含的文本行。当我`Find.ById()`在不同的字段上使用并发送到字符串时，它会提取该区域的文本内容。下面是我正在尝试的。

```
using (myIE)
{
    //loads the website
    myIE.GoTo(txtbxWeblink.Text);            

    string infoText = myIE.Div(Find.ByClass("doc-banner-icon")).ToString();

    //This will successfully return the text fields text.
    string imageText = myIE.Div(Find.ById("doc-original-text")).ToString();
} 
```

编辑 - 看来我可能需要使用不同的电话`myIE`，还有`myIE.Image`等等`myIE.Link`，我对这一切都不太了解，所以不确定`Div`这里是否是正确的电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:29:15.427

试试这个...

```
string infoText = myIE.Div(Find.ByClass("doc-banner-icon")).Images.First().Src;
string imageText = myIE.Div(Find.ById("doc-original-text")).Text; 
```

# hadoop - 在 Hadoop 中找不到“KeyValueInputFormat”

> ID：11443905
> 
> 赞同：0
> 
> 时间：2012-07-12T01:29:33.763
> 
> 标签：hadoop, mapreduce

我是 Hadoop 的新手，但已经阅读了 Yahoo 的教程，并且已经写了一些 mapReduce 作业。我之前的所有作品都使用了 TextInputFormat，但我现在需要将其更改为 KeyValueInputFormat。问题是在hadoop 0.20.2中找不到KeyValueInputFormat.class？

我在下面附上我的代码（这是仅更改输入格式的字数示例）

```
package org.myorg;

import java.io.IOException;
import java.util.*;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class WordCount {

  public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
      String line = value.toString();
      StringTokenizer tokenizer = new StringTokenizer(line);
      while (tokenizer.hasMoreTokens()) {
        word.set(tokenizer.nextToken());
        output.collect(word, one);
      }
        }
      } 
    public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
        public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
          int sum = 0;
          while (values.hasNext()) {
            sum += values.next().get();
          }
          output.collect(key, new IntWritable(sum));
        }
      }

      public static void main(String[] args) throws Exception {
        JobConf conf = new JobConf(WordCount.class);
        conf.setJobName("wordcount");

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);

        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);

        conf.setInputFormat(keyValueInputFormat.class);  //The modified input format
        conf.setOutputFormat(TextOutputFormat.class);

        FileInputFormat.setInputPaths(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));

        JobClient.runJob(conf);
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:16:44.553

org.apache.hadoop.mapreduce.lib.input 中有 KeyValueTextInputFormat。

一些旧教程基于旧版本的 Hadoop API。我建议您阅读一些较新的教程。

这就是我在 KeyValueTextInputFormat 上找到源代码时得到的。

```
package org.apache.hadoop.mapreduce.lib.input;

import java.io.IOException;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.JobContext;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;

public class KeyValueTextInputFormat extends FileInputFormat<Text, Text> {

public KeyValueTextInputFormat() {
    //compiled code
    throw new RuntimeException("Compiled Code");
}

protected boolean isSplitable(JobContext context, Path file) {
    //compiled code
    throw new RuntimeException("Compiled Code");
}

public RecordReader<Text, Text> createRecordReader(InputSplit genericSplit,     TaskAttemptContext context) throws IOException {
    //compiled code
    throw new RuntimeException("Compiled Code");
}
} 
```

# mysql - 在 MySQL 中使用 INNER JOIN 时如何返回唯一行？

> ID：11443909
> 
> 赞同：0
> 
> 时间：2012-07-12T01:31:10.693
> 
> 标签：mysql, sql

我有 3 个表：链接、关键字和关键字链接。一个链接可以有多个关键字，多个链接可以有相同的关键字。`keywords_links`用于连接`links`和`keywords`。当我运行以下查询时，由于多个关键字匹配，因此返回了同一链接的多行。如何修改此查询以返回唯一行？

```
SELECT links . * 
FROM  `links` 
INNER JOIN keywords_links ON keywords_links.link_id = id
INNER JOIN keywords ON keywords.id = keywords_links.keyword_id
WHERE keywords.keyword
IN (
'php', 'sql', 'html', 'css'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:32:10.413

最简单的方法是`DISTINCT`在`SELECT`:

```
SELECT DISTINCT links.*
...
... 
```

但也许更有效的解决方案是重写您的查询，以便不必在每一列之间进行区分：

```
SELECT a.*
FROM links a
INNER JOIN
(
    SELECT a.link_id
    FROM keywords_links a
    INNER JOIN keywords b ON
        a.keyword_id = b.id AND
        b.keyword IN ('php', 'sql', 'html', 'css')
    GROUP BY a.link_id
) b ON a.id = b.link_id 
```

# django - 为什么 Gunicorn 使用端口 8000/8001 而不是 80？

> ID：11443917
> 
> 赞同：5
> 
> 时间：2012-07-12T01:32:02.773
> 
> 标签：django, linux, nginx, virtualenv, gunicorn

我忙着使用 Gunicorn（作为 Django 服务）和 NGINX（作为反向代理）为 Django 框架设置开发环境。

当我查看一些[类似 this](http://senko.net/en/django-nginx-gunicorn/)和[this](http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/)的教程时，我发现它们使用端口 8000 和端口 8001（`http://127.0.0.1:8000`和`http://127.0.0.1:8001`）。像任何其他网络服务器一样，不使用端口 80 是否有特殊原因？

端口 8000 经常用于无线电流和恶意软件，那为什么呢？

顺便说一句：我在 Ubuntu 12.04 系统上使用 Virtualenv 运行它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T06:01:01.350

1024 以下的所有端口都是**特权端口**。要绑定到特权端口需要 root 用户权限，通常您不希望使用 root 级别权限运行 gunicorn。

而是允许 nginx 绑定到 127.0.0.1:80，然后使用 nginx 配置将对端口 80 的请求代理到非特权端口（如 8000）：

```
server {
        location / {
                proxy_pass http://127.0.0.1:8000;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:37:05.970

NGINX 监听 80 端口并转发给 Gunicorn。Gunicorn 在 127.0.0.1 IP 而不是 0.0.0.0 上运行，因此它不会公开监听，因此从外部访问该站点的唯一方法是通过端口 80。

# r - ddply() 脚本故障排除

> ID：11443919
> 
> 赞同：0
> 
> 时间：2012-07-12T01:32:16.910
> 
> 标签：r

我正在开发一个用于生存分析的审查因变量。我的目标是找到某人在调查中回答问题的最后时间（“时间”）（例如，“q.time”被编码为“1”，“q.time+1”和 q随后的时间被编码为“0”）。

按照这个逻辑，最后回答的问题应该编码为“1”（q.time）。第一个未回答的问题 (q.time+1) 应编码为“0”。第一个未回答的问题之后的所有问题都应编码为“NA”。然后我想从我的数据集中删除 DV=NA 的所有行。

一位非常慷慨的同事帮助我开发了以下代码，但他现在正在休假，需要更多的爱。代码如下：

```
library(plyr)  # for ddply 
library(stats)  # for reshape(...) 
# From above 
dat <- data.frame( 
  id=c(1, 2, 3, 4), 
  q.1=c(1, 1, 0, 0), 
  q.2=c(1, 0, 1, 0), 
  dv.1=c(1, 1, 1, 1), 
  dv.2=c(1, 1, 0, 1)) 
# From above 
  long <- reshape(dat, 
                direction='long', 
                varying=c('q.1', 'q.2', 'dv.1', 'dv.2')) 
   ddply(long, .(id), function(df) { 
# figure out the dropoff time 
answered <- subset(df, q == 1) 
last.q = max(answered$time) 
subs <- subset(df, time <= last.q + 1) 
# set all the dv as desired 
new.dv <- rep(last.q,1) 
if (last.q < max(df$time)) new.dv <- c(0,last.q) 
subs$dv <- new.dv 
subs 
}) 
```

不幸的是，这会产生错误消息：

```
"Error in `$<-.data.frame`(`*tmp*`, "dv", value = c(0, -Inf)) : 
 replacement has 2 rows, data has 0" 
```

有任何想法吗？问题似乎出在“rep”命令中，但我是 R 的新手。非常感谢！

***更新：请参阅下面的解释，然后参考后续问题***

您好-我完全关注您，非常感谢您花时间帮助我。我回到我的数据中并在一个虚拟 Q 中编码，其中所有受访者的值都为“1” - 但是，发现错误可能真正出在哪里。在我的真实数据集中，我有 30 个问题（即，长格式 30 次）。在我更改数据集后，确保所有 id 变量的 q==1，错误消息变为说

```
"Error in `$<-.data.frame`(`*tmp*`, "newvar", value = c(0, 29)) : replacement has 2 rows, data has 31" 
```

如果问题出在分配给 subs 的行数上，那么错误的根源来自...

```
subs <- subset(df, time <= last.q + 1) 
```

即，`$`time <= last.q + 1`$`将行数设置为等于 last.q+1 的值？

***更新 2：理想情况下，我希望我的新变量看起来像什么！***

```
 id  time q  dv   
 1    1   1   1
 1    2   1   1
 1    3   1   1
 1    4   1   1
 1    5   0   0
 1    6   0   NA
 2    1   1   1
 2    2   1   1
 2    3   0   0
 2    4   0   NA
 2    5   0   NA
 2    6   0   NA 
```

请注意，“q”可以随时间在“0”或“1”之间变化（参见时间=2 时 id=1 的观察结果），但由于生存分析的性质，“dv”不能。我需要做的是创建一个变量，找出“q”在“1”和“0”之间变化的最后时间，然后进行相应的审查。在第 4 步之后，我的数据应如下所示：

```
 id  time q  dv   
 1    1   1   1
 1    2   1   1
 1    3   1   1
 1    4   1   1
 2    1   1   1
 2    2   1   1
 2    3   0   0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T02:19:22.670

简而言之：错误是因为没有`q == 1`when `id == 4`。

* * *

检查这里发生了什么的一个好方法是单独重写函数，并手动测试 ddply 正在处理的每个块。

所以首先像这样重写你的代码：

```
myfun <- function(df) { 
  # figure out the dropoff time 
  answered <- subset(df, q == 1) 
  last.q = max(answered$time) 
  subs <- subset(df, time <= last.q + 1) 
  # set all the dv as desired 
  new.dv <- rep(last.q,1) 
  if (last.q < max(df$time)) new.dv <- c(0,last.q) 
  subs$dv <- new.dv 
  subs
}
ddply(long, .(id), myfun ) 
```

当然，这仍然会出错，但至少现在我们可以手动检查 ddply 正在做什么。

`ddply(long, .(id), myfun )`真正意思：

1.  取名为 long 的数据框
2.  创建多个子集数据帧（每个不同的 id 一个）
3.  将函数 myfun 应用于每个子集数据帧
4.  将结果重新组合到单个数据帧中

因此，让我们尝试手动执行 ddply 自动执行的操作。

```
 > myfun(subset(long, id == 1))
        id time q dv
    1.1  1    1 1  2
    1.2  1    2 1  2
    > myfun(subset(long, id == 2))
        id time q dv
    2.1  2    1 1  0
    2.2  2    2 0  1
    > myfun(subset(long, id == 3))
        id time q dv
    3.1  3    1 0  2
    3.2  3    2 1  2
    > myfun(subset(long, id == 4))
    Error in `$<-.data.frame`(`*tmp*`, "dv", value = c(0, -Inf)) : 
      replacement has 2 rows, data has 0
    In addition: Warning message:
    In max(answered$time) : no non-missing arguments to max; returning -Inf
    > 
```

因此，错误似乎来自 ddply 将函数应用于 id == 4 的步骤。

现在让我们把代码放在函数之外，这样我们就可以检查每个块。

```
> #################
> # set the problem chunk to "df" so we 
> # can examine what the function does
> # step by step
> ################
> df <- subset(long, id == 4)
> 
> ###################
> # run the bits of function separately
> ###################
> answered <- subset(df, q == 1) 
> answered
[1] id   time q    dv  
<0 rows> (or 0-length row.names)
> last.q = max(answered$time) 
Warning message:
In max(answered$time) : no non-missing arguments to max; returning -Inf
> last.q
[1] -Inf
> subs <- subset(df, time <= last.q + 1) 
> subs
[1] id   time q    dv  
<0 rows> (or 0-length row.names)
> # set all the dv as desired 
> new.dv <- rep(last.q,1) 
> new.dv
[1] -Inf
> if (last.q < max(df$time)) new.dv <- c(0,last.q)  
> subs$dv <- new.dv 
Error in `$<-.data.frame`(`*tmp*`, "dv", value = c(0, -Inf)) : 
  replacement has 2 rows, data has 0
> subs
[1] id   time q    dv  
<0 rows> (or 0-length row.names)
> 
```

因此，您得到的错误来自`subs$dv <- new.dv`因为 new.dv 的长度为 2（即两个值 - (0, -Inf)）但 sub$dv 的长度为 0。如果 dv 是一个简单的向量，那将不是问题，但是因为它在`sub`列都有两行的数据框中，所以 sub$dv 也必须有两行。

行数为零的原因`sub`是因为没有`q == 1`when `id == 4`。

最终的数据框应该没有任何内容`id == 4`吗？`q==1`您的问题的答案实际上取决于在没有for 的情况下您想要发生的事情`id`。请告诉我们，我们可以帮助您编写代码。

**更新：**

您得到的错误是因为`subs$dv`其中有 31 个值并且其中`new.dv`有两个值。

在 R 中，当您尝试将较长的向量分配给较短的向量时，它总是会抱怨。

```
> test <- data.frame(a=rnorm(100),b=rnorm(100))
> test$a <- rnorm(1000)
Error in `$<-.data.frame`(`*tmp*`, "a", value = c(-0.0507065994549323,  : 
  replacement has 1000 rows, data has 100
> 
```

但是，当您将较短的向量分配给较长的向量时，只有较短的向量不是较长向量的偶数倍时才会抱怨。（例如 3 不均匀地进入 100）

```
> test$a <- rnorm(3)
Error in `$<-.data.frame`(`*tmp*`, "a", value = c(-0.897908251650798,  : 
  replacement has 3 rows, data has 100 
```

但是如果你尝试这个，它不会抱怨，因为 2 均匀地进入 100。

```
> test$a <- rnorm(2)
> 
```

尝试这个：

```
 > length(test$a)
[1] 100
> length(rnorm(2))
[1] 2
> test$a <- rnorm(2)
> length(test$a)
[1] 100
> 
```

它所做的是默默地重复较短的向量以填充较长的向量。

再一次，您如何解决错误（即使两个向量具有相同的长度）将取决于您要实现的目标。你做`new.dv`的更短，还是`subs$dv`更长？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T02:03:02.710

`.(id)`在 plyr 中相当于

```
> dum<-split(long,long$id)
> dum[[4]]
    id time q dv
4.1  4    1 0  1
4.2  4    2 0  1 
```

你的问题是在你的第四次分裂。你参考

```
answered <- subset(df, q == 1) 
```

在你的功能中。这是一个空集，因为没有`dum[[4]]$q`取值 1

如果您只想忽略此拆分，则类似

```
ans<-ddply(long, .(id), function(df) { 
# figure out the dropoff time 
answered <- subset(df, q == 1) 
if(length(answered$q)==0){return()}
last.q = max(answered$time) 
subs <- subset(df, time <= last.q + 1) 
# set all the dv as desired 
new.dv <- rep(last.q,1) 
if (last.q < max(df$time)) new.dv <- c(0,last.q) 
subs$dv <- new.dv 
subs 
})

> ans
  id time q dv
1  1    1 1  2
2  1    2 1  2
3  2    1 1  0
4  2    2 0  1
5  3    1 0  2
6  3    2 1  2 
```

将是结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:12:21.773

首先，在信用到期时给予信用，下面的代码不是我的。它是与另一位非常慷慨的同事（和工程师）合作生成的，他帮助我解决了我的问题（几个小时！）。

我认为其他负责从调查数据构建删失变量的分析师可能会发现此代码很有用，因此我将解决方案传递下去。

```
library(plyr)
#A function that only selects cases before the last time "q" was coded as "1"
slicedf <- function(df.orig, df=NULL) {
if (is.null(df)) {
    return(slicedf(df.orig, df.orig))
}
if (nrow(df) == 0) {
    return(df)
}
target <- tail(df, n=1)
   #print(df)
   #print('--------')
   if (target$q == 0) {
       return(slicedf(df.orig, df[1:nrow(df) - 1, ]))
   }
if (nrow(df.orig) == nrow(df)) {
    return(df.orig)
}
return(df.orig[1:(nrow(df) + 1), ])
}
#Applies function to the dataset, and codes over any "0's" before the last "1" as "1"
long <- ddply(long, .(id), function(df) {
df <- slicedf(df)
if(nrow(df) == 0) {
return(df)
}
q <- df$q
if (tail(q, n=1) == 1) {
df$q <- rep(1, length(q))
} else {
df$q <- c(rep(1, length(q) - 1), 0)
}
return(df)
}) 
```

感谢所有在线评论您的耐心和帮助的人。

# git - 在 Git 中，origin 在推送之前是否跟踪本地提交？

> ID：11443921
> 
> 赞同：0
> 
> 时间：2012-07-12T01:32:23.087
> 
> 标签：git, commit

长话短说，一位同事的电脑在他上次推送后崩溃并丢失了他的工作。作为最后的手段，我开始考虑在提交从本地推送到源之前，origin 对提交的了解程度。如果源在某个临时位置跟踪此提交，是否有办法将这些提交拉回代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:40:26.667

`origin`在提交之前*不知道提交。*这几乎可以归结为分布式源代码控制系统的“分布式”部分。这些“本地”变化可以随时随地发生；当计算机离线时 - 该`push`步骤*是*通知遥控器有关新更改的过程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:44:29.323

不。git 中的远程仅通过两种*机制“跟踪”来自不同存储库的提交：`fetch`，其中它们显式请求引用，以及`push`，其中从另一个存储库向它们提供引用。

如果整个本地驱动器已损坏，并且您无法再挽救`.git`存储库中的大部分目录，那么可悲的是，您只能使用正常的驱动器恢复方式——除此之外，git 无能为力。对不起 ：（

如果您确实拥有存储库并且它刚刚进入不良状态，那么该`git reflog`命令可以帮助您，或者如果您提供更多细节，您可以对对象数据库进行更深入的研究。

*当然还有其他机制可以做到这一点，但他们利用这些东西和引擎盖下的等效管道。

# java - 如何直接修改 JsonObject / JsonArray 的值？

> ID：11443928
> 
> 赞同：42
> 
> 时间：2012-07-12T01:33:09.310
> 
> 标签：java, json, gson

一旦我将 JSON 字符串解析为 GSON 提供的 JsonObject 类（假设我不希望将其解析为任何有意义的数据对象，但严格希望使用 JsonObject），我如何能够修改一个字段/值直接用钥匙？

我没有看到可以帮助我的 API。

[https://static.javadoc.io/com.google.code.gson/gson/2.6.2/com/google/gson/JsonObject.html](https://static.javadoc.io/com.google.code.gson/gson/2.6.2/com/google/gson/JsonObject.html)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-12T02:01:03.560

奇怪的是，答案是不断添加属性。我有一半期待一种`setter`方法。:S

```
System.out.println("Before: " + obj.get("DebugLogId")); // original "02352"

obj.addProperty("DebugLogId", "YYY");

System.out.println("After: " + obj.get("DebugLogId")); // now "YYY" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-10T07:33:16.313

这适用于使用`JSONObject`. 使用的进口是

```
import org.json.JSONObject; 
```

ex json:(在作为输入时将json文件转换为字符串)

```
{
    "parentkey1": "name",
    "parentkey2": {
     "childkey": "test"
    },
} 
```

代码

```
JSONObject jObject  = new JSONObject(String jsoninputfileasstring);
jObject.getJSONObject("parentkey2").put("childkey","data1");
System.out.println(jObject); 
```

输出：

```
{
    "parentkey1": "name",
    "parentkey2": {
     "childkey": "data1"
    },
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-01T13:40:30.803

从 2.3 版本的 Gson 库开始，JsonArray 类有一个 'set' 方法。

这是一个简单的例子：

```
JsonArray array = new JsonArray();
array.add(new JsonPrimitive("Red"));
array.add(new JsonPrimitive("Green"));
array.add(new JsonPrimitive("Blue"));

array.remove(2);
array.set(0, new JsonPrimitive("Yelow")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:38:28.250

另一种方法是反序列化为 a `java.util.Map`，然后`Map`根据需要修改 Java。这将 Java 端数据处理与数据传输机制 (JSON) 分开，这是我更喜欢组织代码的方式：使用 JSON 进行数据传输，而不是作为替代数据结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-18T11:24:04.457

它实际上都在文档中。
JSONObject 和 JSONArray 都可以用来替代标准的数据结构。
要实现 setter，只需在 a`remove(String name)`之前调用 a `put(String name, Object value)`。

这是一个简单的例子：

```
public class BasicDB {

private JSONObject jData = new JSONObject;

public BasicDB(String username, String tagline) {
    try {
        jData.put("username", username);
        jData.put("tagline" , tagline);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public String getUsername () { 
    String ret = null;
    try {
        ret = jData.getString("username");
    } catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
    return ret;
}

public void setUsername (String username) { 
    try {
        jData.remove("username");
        jData.put("username" , username);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public String getTagline () {
    String ret = null;
    try {
        ret = jData.getString("tagline");
    } catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
    return ret;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-02-08T12:41:01.687

```
public static JSONObject convertFileToJSON(String fileName, String username, List<String> list)
            throws FileNotFoundException, IOException, org.json.simple.parser.ParseException {
        JSONObject json = new JSONObject();
        String jsonStr = new String(Files.readAllBytes(Paths.get(fileName)));
        json = new JSONObject(jsonStr);
        System.out.println(json);
        JSONArray jsonArray = json.getJSONArray("users");
        JSONArray finalJsonArray = new JSONArray();
        /**
         * Get User form setNewUser method
         */
        //finalJsonArray.put(setNewUserPreference());
        boolean has = true;
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            finalJsonArray.put(jsonObject);
            String username2 = jsonObject.getString("userName");
            if (username2.equals(username)) {
                has = true;
            }
            System.out.println("user name  are :" + username2);
            JSONObject jsonObject2 = jsonObject.getJSONObject("languages");
            String eng = jsonObject2.getString("Eng");
            String fin = jsonObject2.getString("Fin");
            String ger = jsonObject2.getString("Ger");
            jsonObject2.put("Eng", "ChangeEnglishValueCheckForLongValue");
            System.out.println(" Eng : " + eng + "  Fin " + fin + "  ger : " + ger);
        }
        System.out.println("Final JSON Array \n" + json);
        jsonArray.put(setNewUserPreference());
        return json;
    } 
```

# jquery - jquery 文件上传 - IE 回调导致对象 Object

> ID：11443930
> 
> 赞同：1
> 
> 时间：2012-07-12T01:33:16.333
> 
> 标签：jquery, internet-explorer, plugins, file-upload

所有，我知道已经有这个问题了： [jquery file upload - IE done callback data.result issue](https://stackoverflow.com/questions/8814068/jquery-file-upload-ie-done-callback-data-result-issue)

但是，我遇到了同样的问题，不知道如何解决。我有一些看起来像这样的工作代码（基于另一篇文章中的建议）：

```
if($.fn.wl_File) $.fn.wl_File.defaults = {
    forceIframeTransport: true,
    onDone: function (e, data) {
    var result = jQuery.parseJSON(data.result);
    var filename = result[0].name;
    }
} 
```

除了 IE 之外，它在 Firefox、Chrome 等中完美地提取了回调信息。但是，我仍然从 IE 中得到一个 [object Object]。当我`console.log(data.result)`在 Chrome 中执行时，我得到以下结果：

```
[{
"name": "1_3266_671641333369_14800358_42187036_5237378_n.jpg",
"size": 35535,
"type": "image\/jpeg",
"url": "\/web\/upload\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
"thumbnail_url": "\/web\/upload\/thumbnails\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
"delete_url": "\/web\/upload.php?file=1_3266_671641333369_14800358_42187036_5237378_n.jpg",
"delete_type": "DELETE",
"upload_type": "video_montage",
"insert_id": "288"
}] 
```

我不知道如何解决这个问题。根据我的代码，谁能指出我正确的方向？

仅供参考，我正在使用以下主题： [http](http://revaxarts-themes.com/?t=whitelabel) ://revaxarts-themes.com/?t= whitelabel 调用 jquery 上传插件，这就是为什么我的代码在顶部看起来有点不同，但它基本上与插件代码。

非常感谢您对这个令人沮丧的问题的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:34:10.963

我从我在问题中提到的帖子中找到了解决方案。但是，为了满足不同的浏览器，我不得不对其进行一些扩展。关于如何从 IE 获取数据的原始答案是正确的，但该方法不适用于其他浏览器。我必须添加一个 if 语句来查看我的浏览器类型并从那里继续。我处理这种情况的代码如下所示：

```
if($.browser.msie){
    var data_to_parse = $( 'pre', data.result ).text();
}else{
    var data_to_parse = data.result;
}
var result = jQuery.parseJSON(data_to_parse);
var filename = result[0].name; 
```

我现在可以操纵从 IE 和其他浏览器获得的响应！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:56:46.377

IE中的console.log不像其他浏览器那样神奇，输出对象Object是正常的。您可以做的是启动开发人员工具 (F12) 并在该行中添加一个断点：

```
 var result = jQuery.parseJSON(data.result); 
```

有关如何调试的更多详细信息： [如何在 IE8 中转储 JavaScript 变量？](https://stackoverflow.com/questions/1956384/how-do-i-dump-javascript-vars-in-ie8)

还值得一读，使用 firebug lite： [jQuery logging in IE: how to get object？](https://stackoverflow.com/questions/2217282/jquery-logging-in-ie-how-to-get-object)

# ruby-on-rails - 使用 ruby 将哈希保存到 mysql 记录中

> ID：11443931
> 
> 赞同：0
> 
> 时间：2012-07-12T01:33:19.290
> 
> 标签：ruby-on-rails, ruby

假设我有一个 ruby​​ 哈希：

```
person={:name=>:Alex,:age=>10} 
```

我希望我可以调用这样的 API：

```
db.save :people, person 
```

它将在 mysql 数据库上执行以下 SQL：

```
insert  nto people (name,age) values ('Alex',10) 
```

这可以通过使用导轨或其他红宝石宝石来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:10:58.343

你可以调用 ClassName.create!(your_hash)，所以在你的场景中它看起来像这样：

```
Person.create!(person) # to create a record right away 
```

或者

```
person = Person.new(person) # to initialize the object first

person.save #  and then save it 
```

无需使用任何外部 gem，这是标准的 ActiveRecord，Rails 核心库之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:41:24.177

类人 < Activerecord::Base end

将 Person 类放在模型文件中。对应的表名应该是persons，它是模型名的复数形式，首字母小写。只需查看 Rails 的约定。

现在试试

```
Person.create!(attributes). 
```

属性就像列名对应的值。

例子

```
{:name => 'sandip'}  #here name is the column name and value is the 'sandip' 
```

# ios - 从不同的 ViewController 更改 NavigationBar 文本

> ID：11443934
> 
> 赞同：1
> 
> 时间：2012-07-12T01:33:36.823
> 
> 标签：ios, objective-c, uiviewcontroller, uitextfield

我在此之前发布了一个类似的问题，但我现在有一个更明确的问题和更多信息以及代码。我目前有一个带有 UITextField 和 UIButton 的 ViewController (SignUpViewController)。我还有另一个具有 UINavigationBar 的 ViewController (ProfileViewController)。我希望能够在 SignUpViewController 的 TextField 中键入用户名，点击 UIButton，然后将 ProfileViewController 中的 naviBar 文本设置为 SignUpViewController 的 TextField 中的文本。问题是，我无法从 ProfileViewController 访问 UITextField。我目前在我的 AppDelegate 中有一个名为“titleString”的 NSString，并试图将其用作某种解决方案。如果我的问题完全让你失望，这是我的代码，

注册视图控制器：

```
- (IBAction)submitButton {

     ProfileViewController *profileVC = [[ProfileViewController alloc] initWithNibName:nil bundle:nil];
     [self presentViewController:profileVC animated:YES completion:nil];

     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
     appDelegate.titleString = @"Profile";

     appDelegate.titleString = usernameTextField.text;

}

- (void)viewDidLoad {

     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

     [super viewDidLoad];
 } 
```

配置文件视图控制器：

```
- (void)viewDidLoad {

     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
     self.title = appDelegate.titleString;

     [super viewDidLoad];
} 
```

在我点击 SignUpViewController 中的 submitButton 之前，一切正常。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:01:08.547

您可以在这里做几件事来在视图控制器之间传递数据。

1）设置委托方法。profileViewController 将是 signInViewController 的代表。当按下登录按钮时，signInViewController 调用 profileViewController 正在侦听的委托方法，该方法将标题传递给 profileViewController。

在 signInViewController.h 中：

```
@protocol SignInDelegate

@required
- (void)didSignInWithTitle:(NSString*)title;

@end

@interface SignInViewController : UIViewController

@property (nonatomic, assign) id<SignInDelegate> delegate; 
```

然后，您的 ProfileViewController 在分配时将被设置为委托：

```
signInViewController.delegate = profileViewController 
```

这是您的 ProfileViewController.h：

```
#import "SignInViewController.h"

@interface ProfileViewController : UIViewController <SignInDelegate> 
```

最后，确保你的 ProfileViewController 实现了 - (void)didSignInWithTitle:(NSString*)title; 方法。

2）您可以使用 NSNotificationCenter 发布带有标题的自定义通知。如果您有几个其他 viewController 想要像配置文件一样设置标题，这将很有用。

```
#define UPDATE_NAVBAR_TITLE @"UPDATE_NAVBAR_TITLE" 
```

当 signInViewController 完成时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:UPDATE_NAVBER_TITLE object:nil]; 
```

然后，确保将 ProfileViewController 添加为观察者：

```
[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(navbarUpdated) name:UPDATE_NAVBAR_TITLE object:nil]; 
```

对于你的要求，我推荐第一个。祝你好运！

# php - PHP/MYSQL - 用户照片 Prev/Next 链接

> ID：11443937
> 
> 赞同：0
> 
> 时间：2012-07-12T01:34:06.573
> 
> 标签：php, image, navigation, hyperlink

我的项目有用户帐户，其中包含属于已上传它们的每个用户的照片

我想为每个用户显示下一张和上一张照片，所以当我转到照片的朋友列表时，我可以导航（显然）到用户下一张上传的照片。我可以将这些作为 photo_id 顺序中的下一张/上一张照片。

您将如何为下一张/上一张照片编写这种查询？

我的表结构是这样的。

```
CREATE TABLE IF NOT EXISTS `userphotos` (
  `photo_id` int(11) NOT NULL auto_increment,
  `photo_ownerid` int(11) NOT NULL,
  `photo_ispublic` int(11) NOT NULL,
  `photo_name` varchar(100) NOT NULL,
  `photo_caption` varchar(100) NOT NULL,
  `photo_imagedata` longblob NOT NULL,
  `album_id` int(11) NOT NULL,
  PRIMARY KEY  (`photo_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=89 ; 
```

我会用这样的东西来选择id吗

上一张图片

```
SELECT field1 FROM tablename WHERE id < $currentid ORDER BY id DESC LIMIT 1 
```

下一张图片

```
SELECT field1 FROM tablename WHERE ID > $currentid ORDER BY id ASC LIMIT 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:41:14.330

这些查询应该适用于您想要完成的任务。尽管您还应该添加所有者 ID 以将浏览的照片限制为用户拥有的照片。

**上一张图片**

```
SELECT field1 FROM tablename 
WHERE id < $currentId AND photo_ownerid = $ownerId 
ORDER BY id DESC LIMIT 1 
```

**下一张图片**

```
SELECT field1 FROM tablename 
WHERE ID > $currentId AND photo_ownerid = $ownerId 
ORDER BY id ASC LIMIT 1 
```

但是，正如对该问题的评论中所暗示的那样，每次您希望查看下一张/上一张照片时，都有比查询数据库更有效的替代方法。例如，您可以一次查询所有照片，然后使用 javascript 库（例如[PrettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)）来整齐地组织和浏览照片。

# django - 如何调试在 TLS/SSL 之上运行的 Django 应用程序？

> ID：11443938
> 
> 赞同：2
> 
> 时间：2012-07-12T01:34:49.257
> 
> 标签：django, https, ssl

调试在 TLS/SSL 之上运行的 Django 应用程序的最佳方法是什么？

背景：

我有一个使用 X.509 客户端证书进行身份验证的 Django Web 应用程序。在 Apache 下运行时，我的应用程序只能通过 HTTPS 访问。连接到应用程序的客户端提供客户端证书，Apache 验证该证书，然后在环境变量中转发到应用程序。该应用程序解析证书并提供访问控制内容。

到目前为止，我只能使用“./manage.py runserver”在常规 HTTP 下调试应用程序。我已经通过在调试模式下使用自定义视图处理程序中间件来模拟 HTTPS 连接。视图处理程序将信息添加到请求中，类似于在 HTTPS 下运行时从实际客户端证书中解析出的信息。

如果我可以使用客户端在通过 HTTPS 连接时提供的实际客户端证书进行调试，这将使调试变得更加容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:13:39.160

我们在 Django 前面使用 nginx，带有客户端证书检查。NGINX 执行 SSL 终止、客户端证书验证和检查吊销列表。客户端证书字段在标头变量中传递到 django 应用程序。

那么我们的 django 应用程序没有收到证书，它只是查看头变量。我认为同样的机制也适用于 Apache。

对于访问开发服务器的客户端（例如'./manage.py runserver'），我们只是在客户端有一个特殊情况。python客户端示例：

```
 if (proto == "https"):
    conn = http.client.HTTPSConnection( "cert."+webhost+":"+port,
                                        key_file = certfile, cert_file = certfile)
    headers = {}
  else:
    # fake client for local connections.  pass cert info in headers, as it would come
    # out of nginx
    conn = http.client.HTTPConnection( webhost+":"+port)
    headers = { 'X_SSL_CLIENT_S_DN':'/C=US/ST=California/O=yyyy/CN=zzzz',
                'X_SSL_CLIENT_I_DN':'/C=US/ST=California/O=xxxx/CN=wwww',
                'X_SSL_CLIENT_SERIAL':hex(serialnum),
                'USER_AGENT':"test client user agent",} 
```

对于单元测试，我们使用 Django 测试客户端做同样的事情：

```
 from django.test.client import Client
  self.client = Client()
  response = self.client.get(url, data,
                **{
                'HTTP_X_SSL_CLIENT_S_DN':'/C=US/ST=California/O=yyyy/CN=zzzz',
                'HTTP_X_SSL_CLIENT_I_DN':'/C=US/ST=California/O=xxxx/CN=wwww',
                'HTTP_X_SSL_CLIENT_SERIAL':hex(serialnum),
                'HTTP_USER_AGENT':"test client user agent",
                }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:05:28.090

我想出了一个对我来说效果很好的解决方法。我仍然使用 HTTP 进行调试，但我通过 HTTP 标头传递客户端证书。因此，当我使用 HTTP 调试 Web 应用程序时，我让客户端将客户端证书复制到 HTTP 标头中。在进入视图之前，Web 应用程序将证书从标头复制到常规位置，当使用 HTTPS 时，Apache 将在该位置传递证书。

客户端证书是 PEM 格式的，因此，为了能够在 HTTP 标头中传递它们，唯一需要做的就是删除客户端上的换行符并将它们重新插入服务器上。

如果使用这种方法，请注意 Apache 对单个 HTTP 标头字段大小的默认限制是 8190 字节，使用该`LimitRequestFieldSize`指令进行配置。对于大于该值的证书，必须更改配置或必须拆分证书并在多个标头中传递。

# php - 返回列数据的数组 MySQL/PHP

> ID：11443939
> 
> 赞同：0
> 
> 时间：2012-07-12T01:34:51.033
> 
> 标签：php, mysql

我知道有 mysql_fetch_assoc 将一行中的所有数据放入一个数组中。将列中的所有数据放入数组中是否有等效的东西？例如标题ID 的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:36:32.543

[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)并且[`explode()`](http://us3.php.net/manual/en/function.explode.php)可能是您正在寻找的东西，因为它可以将所有内容集中在一起。您可以使用逗号对所有值进行分组`GROUP_CONCAT`，然后使用 填充数组`explode()`。

您的 SQL 将包含以下内容：

```
SELECT GROUP_CONCAT(column_name SEPARATOR ',') AS col 
```

你的 PHP 会像这样创建数组（在执行查询之后）：

```
$col_array = explode(',' $row['col']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:40:13.803

这是我的建议：

```
$arr = array();
while ($row = mysql_fetch_assoc($result)) {
  $arr[] = $row['id']; // replace id with your column name.
}

var_dump($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:49:10.643

如果您能够使用外部库，那么可能值得研究 Zend 数据库库。`Zend_Db`提供了一个调用函数[`fetchCol`](http://files.zend.com/help/Zend-Framework/zend.db.html#zend.db.adapter.select.fetchcol)，它将返回一个数组，而无需编写任何额外的代码。

# mysql - 如何通过简单的 AND + OR 查询让 mysql 使用索引？

> ID：11443942
> 
> 赞同：0
> 
> 时间：2012-07-12T01:35:18.383
> 
> 标签：mysql, sql, indexing, mysql5

这是使用 MySQL 5.5。我似乎无法说服 MySQL 为这些查询使用索引，并且它们在 110 万行的表上运行需要 2-10 秒。

桌子：

```
CREATE TABLE `notifiable_events` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`key` varchar(255) NOT NULL,
`trigger_profile_id` int(10) unsigned DEFAULT NULL,
`model1` varchar(25) NOT NULL,
`model1_id` varchar(36) NOT NULL,
`model2` varchar(25) NOT NULL DEFAULT '',
`model2_id` varchar(36) NOT NULL DEFAULT '',
`event_data` text,
`created` datetime DEFAULT NULL,
`modified` datetime DEFAULT NULL,
`deleted` tinyint(1) NOT NULL DEFAULT '0',
PRIMARY KEY (`id`),
KEY `key` (`key`),
KEY `notifiable_events__trigger_profile` (`trigger_profile_id`),
KEY `deleted` (`deleted`),
KEY `noti_evnts__m2` (`model2`),
KEY `noti_evnts__m1` (`model1`),
CONSTRAINT `notifiable_events__trigger_profile` FOREIGN KEY (`trigger_profile_id`) REFERENCES `profiles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1177918 DEFAULT CHARSET=utf8 
```

询问：

```
 SELECT * 
    FROM notifiable_events 
    WHERE (`model1` = 'page' AND `model1_id` = '54321') 
       OR (`model2` = 'page' AND `model2_id` = '12345'); 
```

解释：

```
mysql> EXPLAIN EXTENDED SELECT * FROM notifiable_events WHERE (`model1` = 'page' AND `model1_id` = '922645') OR (`model2` = 'page' AND `model2_id` = '922645')\G

    ****************************** 1\. 行 ************************ *******
               编号：1
      选择类型：简单
            表：notifiable_events
             类型：全部
    可能键：noti_evnts__m2,noti_evnts__m1,noti_evnts__m1_m2
              键：空
          key_len：空
              参考：空
             行数：1033088
         过滤：100.00
            额外：使用 where
    1 行，1 个警告（0.00 秒）

mysql> EXPLAIN EXTENDED SELECT * FROM notifiable_events WHERE (`model1` = 'page' AND `model1_id` = '922645') OR (`model1` = 'page' AND `model1_id` = '922645')\G
****************************** 1\. 行 ************************ *******
           编号：1
  选择类型：简单
        表：notifiable_events
         类型：参考
可能键：noti_evnts__m1,noti_evnts__m1_m2
          键：noti_evnts__m1
      关键长度：77
          参考：常量
         行数：1
     过滤：100.00
        额外：使用 where
1 行，1 个警告（0.00 秒）

mysql> EXPLAIN EXTENDED SELECT * FROM notifiable_events WHERE (`model2` = 'page' AND `model2_id` = '922645') OR (`model2` = 'page' AND `model2_id` = '922645')\G
****************************** 1\. 行 ************************ *******
           编号：1
  选择类型：简单
        表：notifiable_events
         类型：参考
可能的键：noti_evnts__m2
          键：noti_evnts__m2
      关键长度：77
          参考：常量
         行数：428920
     过滤：100.00
        额外：使用 where
1 行，1 个警告（0.00 秒）

```

您可以看到，如果我只使用 model1 或只使用 model2，那么它将使用索引，但是，一旦我尝试将它们一起使用，它就会完全放弃索引并进行全表扫描。我已经尝试过 FORCE INDEX 并且我尝试了多键索引的组合（我为这个表留下了一个作为示例）。我也尝试过重新排列查询中元素的顺序，但这似乎也没有任何效果。

更新：我忘了提到我已经尝试过 ANALYZE 和 OPTIMIZE （每次多次，没有变化）。我还已经尝试了 *_id 上的索引（基数非常糟糕，这些列大多是唯一条目）和一个多索引，查询中使用了所有 4 列。在这两种情况下也没有改进或使用索引。

似乎使用索引来限制这里检查的行应该很容易，所以我希望我只是遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T01:52:23.573

`or`子句有时会搞砸查询优化。

你可以试试工会，像这样的。它可能会重新激活索引。

```
SELECT * 
  FROM notifiable_events 
 WHERE  `model1` = 'page' AND `model1_id` = '54321'
 UNION
SELECT * 
  FROM notifiable_events 
 WHERE `model2` = 'page' AND `model2_id` = '12345' 
```

***编辑，回答评论中的问题***

如果您尝试使用这种选择方案更新记录，您可以尝试以下操作：

```
UPDATE notifiable_events
   SET what=ever,
       what=ever,
       what=else 
 WHERE id IN (
   SELECT id 
     FROM notifiable_events 
    WHERE  `model1` = 'page' AND `model1_id` = '54321'
    UNION
   SELECT id 
     FROM notifiable_events 
    WHERE `model2` = 'page' AND `model2_id` = '12345'
 ) 
```

*（请注意，当您使用 Stackoverflow 来解释您实际尝试做的事情时，这很有帮助。如果可以的话，当然可以将一个复杂的问题简化为一个更简单的问题，但是当您说您正在执行 SELECT 时'实际上是在进行更新，嗯，过于简单化了。）*

# cordova - Phonegap / PlayN 允许使用加速度计

> ID：11443953
> 
> 赞同：1
> 
> 时间：2012-07-12T01:37:34.013
> 
> 标签：cordova, accelerometer, playn

我最近刚刚完成了我的 PlayN 工具的所有设置，并且正在处理我的第一个项目。

我想添加对加速度计的支持。我发现 GWTPhoneGap 项目已经为 webapps 实现了这个，这对我来说很好。

我试图在我的 PlayN Html 类中实例化 PhoneGap。

```
import playn.core.PlayN;
import playn.html.HtmlGame;
import playn.html.HtmlPlatform;
import com.google.gwt.core.client.GWT;
import com.googlecode.gwtphonegap.client.PhoneGap;
import com.googlecode.gwtphonegap.client.PhoneGapAvailableEvent;
import com.googlecode.gwtphonegap.client.PhoneGapAvailableHandler;
import com.googlecode.gwtphonegap.client.PhoneGapTimeoutEvent;
import com.googlecode.gwtphonegap.client.PhoneGapTimeoutHandler;
import com.voidflux.absolutezero.core.AbsoluteZero;

public class AbsoluteZeroHtml extends HtmlGame {

    @Override
    public void start() {
        HtmlPlatform platform = HtmlPlatform.register();
        platform.assets().setPathPrefix("absolutezero/");

        PhoneGap phoneGap = GWT.create(PhoneGap.class);

        phoneGap.addHandler(new PhoneGapAvailableHandler() {

            @Override
            public void onPhoneGapAvailable(PhoneGapAvailableEvent event) {
                // start your app - phonegap is ready
                PlayN.run(new AbsoluteZero());

            }
        });

        phoneGap.addHandler(new PhoneGapTimeoutHandler() {

            @Override
            public void onPhoneGapTimeout(PhoneGapTimeoutEvent event) {
            // can not start phonegap - something is for with your setup
            PlayN.run(new AbsoluteZero());
        }
    });

    phoneGap.initializePhoneGap();
}
} 
```

这感觉倒退了。我应该在这个文件中添加代码吗？有没有更好的地方来启动PhoneGap？一旦我设置了加速度计代码，我就看不到如何让我的回调到核心代码。我怀疑是因为我在错误的区域。我试图将 GWTPhoneGap 代码放入 Core 项目中，但是 GWT.create(PhoneGap.Class) 当然没有 GWT 类。

任何建议都会非常棒。

在此先感谢，斯科特

# clojure - How can I improve this Clojure function?

> ID：11443954
> 
> 赞同：3
> 
> 时间：2012-07-12T01:37:44.917
> 
> 标签：clojure

I just wrote my first Clojure function based on my very limited knowledge of the language. I would love some feedback in regards to performance and use of types. For example, I'm not sure if I should be using lists or vectors.

```
(defn actor-ids-for-subject-id [subject-id]
  (sql/with-connection (System/getenv "DATABASE_URL")
    (sql/with-query-results results
      ["SELECT actor_id FROM entries WHERE subject_id = ?" subject-id]
      (let [res (into [] results)]
        (map (fn [row] (get row :actor_id)) res))))) 
```

It passes the following test (given proper seed data):

```
(deftest test-actor-ids-for-subject-id
  (is (= ["123" "321"] (actor-ids-for-subject-id "123")))) 
```

If it makes a difference (and I imagine it does) my usage characteristics of the returned data will almost exclusively involve generating the union and intersection of another set returned by the same function.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T06:24:05.400

it's slightly more concise to use 'vec' instead of 'into' when the initial vector is empty. it may express the intent more clearly, though that's more a matter of preference.

```
(vec (map :actor_id results)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:48:37.480

the `results` is a `clojure.lang.Cons`, is lazy sequence, return by `clojure.java.jdbc/resultset-seq`. each record is a `map`:

```
(defn actor-ids-for-subject-id [subject-id]
  (sql/with-connection (System/getenv "DATABASE_URL")
    (sql/with-query-results results
      ["SELECT actor_id FROM entries WHERE subject_id = ?" subject-id]
      (into [] (map :actor_id results))))) 
```

# android - 我应该何时启动和停止通知服务？

> ID：11443955
> 
> 赞同：0
> 
> 时间：2012-07-12T01:37:47.680
> 
> 标签：android, android-intent, android-service

我不希望通知服务在用户在应用程序中时工作。截至目前，我从 onCreate 和 onResume 方法开始并在 onPause 方法中停止。那是对的吗？

此外，是否足以指定意图并执行 stopService(intent) 来停止它？start 和 stop 方法之间没有直接关系，除非它们引用同一个类。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:42:09.430

[这](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)是活动生命周期。

正如您将看到的，`onCreate()`并且`onResume()`在创建活动之前被调用，因此您不想在那里启动通知服务。你应该停止它。做一次是个好主意，`onResume()`因为它是您活动的入口点。

`onPause()`是用户离开活动的地方，因此您将要再次启动服务。

# c++ - 如何从 getMemberNames() 修复 JsonCPP 错误？

> ID：11443956
> 
> 赞同：6
> 
> 时间：2012-07-12T01:37:52.250
> 
> 标签：c++, json, jsoncpp

JSON 文件如下所示：

```
{
"strings": [
    {
        "key_one": "value_one!"
    },
    {
        "key_two": "value_two!"
    },
    ]
} 
```

C++ 文件如下所示：

```
Json::Value root;
Json::Reader reader;
bool parsingSuccessful = reader.parse(contents, root);
const Json::Value strings = root["strings"];
std::vector<std::string> list = strings.getMemberNames(); 
```

“strings.getMemberNames()”引起的错误是：

```
Assertion failed: (type_ == nullValue || type_ == objectValue), function getMemberNames, file /projects/.../jsoncpp.cpp, 
```

`strings`是一个数组值，我通过获取它来确认它`ValueType = 6`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T02:09:53.870

正如您所说，字符串是一个数组，而不是一个对象。您需要：（i）将您的字符串 json 转换为一个对象。

```
{
"strings": {
        "key_one": "value_one!",
        "key_two": "value_two!"
    }
} 
```

在这种情况下，您现有的代码会很好。如果您可以控制正在解析的 json，这就是我要做的。

或 (ii) 遍历字符串数组 - 如果 json 由某个第三方指定，我只会这样做 - 它看起来像这样：

```
std::vector<std::string> all_keys;
for ( int index = 0; index < strings.size(); ++index ) {
    std::vector<std::string> cur_keys = strings[index].getMemberNames();
    all_keys.insert( all_keys.end(), cur_keys.begin(), cur_keys.end() );
} 
```

但是，实际上稍后使用 all_keys 中的值来访问字符串数组中的任何内容会很痛苦——因此您可能希望将键值对存储在映射中。

```
std::map<std::string,std::string> key_values;
for ( int index = 0; index < strings.size(); ++index ) {
    std::vector<std::string> cur_keys = strings[index].getMemberNames();
    for( int j=0; j<cur_keys.size(); ++j )
      key_values[cur_keys[j]] = ...
} 
```

或者至少存储找到键的字符串数组的索引。

```
std::vector<std::pair<int,std::string> > all_keys;    std::vector<std::string> all_keys;
for ( int index = 0; index < strings.size(); ++index ) {
    std::vector<std::string> cur_keys = strings[index].getMemberNames();
    for( int j=0; j<cur_keys.size(); ++j )
      all_keys.push_back( std::make_pair(index, cur_keys[j] ) );
} 
```

# objective-c - iOS UIView 动画 (animationWithDuration:) 有多个选项

> ID：11443957
> 
> 赞同：4
> 
> 时间：2012-07-12T01:38:14.987
> 
> 标签：objective-c, ios, animation, objective-c-blocks

我正在尝试使用多个选项来实现`UIView`动画块。`animationWithDuration`它工作正常，只是它似乎只使用我指定的选项之一而不是全部三个。我可以指定的选项数量是否有限制或某些选项组合是否有限制？

下面是我的代码。“starRotator”是我正在旋转`UIImageView`的一个。`UIView`我尝试将选项括在括号中，但这也不起作用。它似乎只选择了`UIViewAnimationOptionRepeat`选项而忽略了其他两个。

```
[UIView animateWithDuration:30.0 
                      delay:0.0 
                    options:UIViewAnimationCurveLinear | UIViewAnimationOptionRepeat | UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
                     starRotator.superview.transform = CGAffineTransformMakeRotation(M_PI);
                 }
                 completion:^(BOOL finished){ }
 ]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T01:51:58.450

您是否注意到您用作选项的两个常量包含“选项”一词，但一个没有？

线性曲线的正确选项常数是`UIViewAnimationOptionCurveLinear`，但您使用了`UIViewAnimationCurveLinear`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:52:41.137

该代码很好，除了您想使用`UIViewAnimationOptionCurveLinear`而不是`UIViewAnimationCurveLinear`. 后者用于 UIView 的旧`+setAnimationCurve:`方法。

尝试改变它，看看你是否有更多的运气。

# javascript - Javascript ActiveElement 和 Keydown 事件监听器

> ID：11443958
> 
> 赞同：0
> 
> 时间：2012-07-12T01:38:25.480
> 
> 标签：javascript

我是 Javascript 新手，我正在尝试进行以下代码扫描，以查看带有 id="lessonNum" 的文本框是否处于活动状态，如果不是，我想发送 .click 到带有当我在键盘上按“a”时，id="A"。现在，当我选择文本框时，我会收到一个警报，但是当我没有选择它时，它不会拿起我的 keydown。请帮忙！

```
function GetActive () {

    if (document.activeElement.id == 'lessonNum') {
        alert('lessonNum is active');
        var b1=new Boolean(1);

    } else {
       var b1=new Boolean(0);
    }
}

document.addEventListener("keydown", keyDownTextField, false);

function keyDownTextField(e) {
    var keyCode = e.keyCode;

    if(keyCode==65) {

        if(b1==0) {
            alert('a has been pressed');
            document.getElementById('A').click();
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:51:47.800

在您的代码中：

```
> function GetActive () {
>     if (document.activeElement.id == 'lessonNum') {
>         alert('lessonNum is active');
>         var b1 = new Boolean(1); 
```

上面的行创建了一个名为 b1 的**局部**变量并分配了一个新的布尔对象。我认为你只想要一个原始的，所以：

```
 var b1 = true; 
```

或者整个 if..else 语句可以替换为：

```
 var b1 =  document.activeElement.id == 'lessonNum';
    if (b1) alert('lessonNum is active'); 
```

请注意，`getActive`它永远不会被调用，所以`b1`无论如何都不会设置。

在*keyDownTextField*你有：

```
> if(b1==0) {
>     alert('a has been pressed'); 
```

但是`b`是本地的，`GetActive`因此将引发参考错误。简单的解决方案是`b`全局化，多做一点工作，但最好将其保持在闭包中。

例如

```
(function(global) {
  var b1;
  var getActive = function () {
    b1 = document.activeElement && document.activeElement.id == 'lessonNum';

    if (b1) alert('lessonNum is active');
  }
  global.getActive = getActive;

  var keyDownTextField = function (e) {
    e = e || window.event;
    var keyCode = e.keyCode || e.which;

    if (keyCode == 65) {
        getActive();  // should it be called here?

        if (b1) {
            alert('a has been pressed'); 
            document.getElementById('A').click();
        }
    }
  }
  global.keyDownTextField = keyDownTextField;
}(this)); 

window.onload = function() {
  addEvent(document, 'keydown', keyDownTextField);
};

// Just a helper    
function addEvent(el, evt, fn){
  if (el.addEventListener) {
    el.addEventListener(evt, fn, false);
  } else if (el.attachEvent) {
    el.attachEvent('on' + evt, fn);
  }
} 
```

# javascript - 在所有页面中搜索具有唯一 ID 的

> ID：11443962
> 
> 赞同：0
> 
> 时间：2012-07-12T01:39:15.707
> 
> 标签：javascript, jquery, html

是否可以在您开发的所有网页（不仅仅是用户所在的当前页面）中搜索具有指定 ID 的正文标签？如果是这样，我将如何在 Javascript 中执行此操作？另外，我将如何将用户重定向到包含具有唯一 ID 的正文的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:54:46.333

如果你真的想这样做，如果你知道页面的 url，你可以这样做：

（使用 jQuery）

```
function searchPages(urls,elem,success,failure){
    nextUrl(urls,0);
    // this calls itself as a callback because $.load is asynchronous
    function nextUrl(i){ // this function tries to load a body#myId for the url 
         $('<div /'>).load(urls[i]+' '+elem,function(){ 
             // if it loaded there'd be html
             if($(this).html()!=='') success.call(this,urls[i]); 
             // if you've loaded all the pages, then you're done
             if(i===urls.length) 
                failure.call(this,urls[i]);
             // otherwise, call the function again for the next url
             else nextUrl(i+1);
           });
    };
}

searchPages(['/url1','/url2','/url3'],'body#myId',function(url){
   console.log(url); // this is the url you want
   console.log($(this)); // $(this) is the div that the body elem was loaded into
},failed);

// this is called if you don't find the page
function failed(){ alert('no page found'); }; 
```

# java - Java小程序无法访问同一网络服务器上的非公共文件

> ID：11443966
> 
> 赞同：0
> 
> 时间：2012-07-12T01:39:44.707
> 
> 标签：java, applet, webserver, file-access

我正在为客户创建一个 Java Applet，我遇到了一个问题，我需要读取/写入他们 Web 服务器上的文件，但在任何情况下，该文件都不能公开访问。

Java Applet 和文件都在同一台服务器上，如果需要，我可以将文件和 .jar 文件放在同一个文件夹中，但我尝试了几种不同的配置，包括将它们放在同一个文件夹中并访问文件与

```
test = WorkbookFactory.create(new File("test.xlsx")) 
```

我试过写出文件的完整路径，但似乎没有任何效果。

我得到的错误是：

```
Caused by: java.security.AccessControlException: access denied ("java.io.FilePermission" "test.xlsx" "read") 
```

在同一台服务器上读取/写入文件的最佳方式是什么，不能公开看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:41:57.970

您似乎对 Java 小程序的工作方式存在根本性的误解。它们不在服务器上运行，而是在客户端、Web 浏览器中运行。如果客户端的 Web 浏览器无权访问该文件，则小程序也无权访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:46:49.380

Applet 不能在服务器上读取或写入文件，因为 Java 代码在*客户端*上运行——即，在 Web 浏览器本身中。实现您正在寻找的最佳方法是创建一个写入文件的*servlet*（或其他服务器端代码模块），并强制执行某种安全性。然后，applet 可以与该 servlet 对话，并以您喜欢的任何方式保护对文件的访问。例如，嵌入小程序的页面可能包含生成的唯一密钥，小程序将使用该密钥访问 servlet。

# .htaccess - 如何制作一个干净的.htaccess？

> ID：11443967
> 
> 赞同：0
> 
> 时间：2012-07-12T01:39:45.077
> 
> 标签：.htaccess

我对 htaccess 有问题，而且不太擅长。我想知道如何使网址干净。

这里是原文

> [http://site.com/page.php?p=index1/index2](http://site.com/page.php?p=index1/index2)

我想要这种类型的网址

> [http://site.com/page/index/index2](http://site.com/page/index/index2)

如果我要从数据库中获取**$_get**它，我如何获得*index1/index2的**p 值*？

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:45:05.187

该模式`([^/]+)`匹配所有内容，但不包括`/`into `$1`，其余部分被捕获`(.*)`into `$2`。

```
RewriteEngine On
# Don't rewrite real existing files & directories (like css,js,img)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Add .php to the first group (like page.php) and stick the rest into p
RewriteRule ^([^/]+)/(.*)$ $1.php?p=$2 
```

在 PHP 内部，检索`p`via 的值：

```
$_GET['p'] 
```***

# ruby-on-rails - 在 Rails 中使用字符串填充输入的未定义方法

> ID：11443975
> 
> 赞同：0
> 
> 时间：2012-07-12T01:41:44.300
> 
> 标签：ruby-on-rails, ruby

我正在尝试将一个字符串从我的 Rails 应用程序中的变量传递到数据库。这是用户的电子邮件地址。我一生都无法弄清楚为什么会出现“未定义的方法‘合并’”错误。

这是有问题的代码：

```
<%= f.email_field :commenter, current_user.email %> 
```

任何帮助肯定会有所帮助。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:48:45.687

Rails 期望第二个参数是一个散列，所以你想做

```
<%= f.email_field :commenter, value: current_user.email %> 
```

或者更好的是，`:commenter`在控制器中的特定模型中设置属性（在你初始化/构建它之后），然后你可以省略这个值 hax。这样，当使用编辑这个、发布表单并获得验证错误时，该值将是用户发布的内容，而不是`current_user.email`.

# jquery - 是否有任何用于 Javascript 的数据查询库？

> ID：11443977
> 
> 赞同：0
> 
> 时间：2012-07-12T01:42:39.050
> 
> 标签：jquery, jquery-ui, jqgrid

[我在http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)上看到了搜索 > 复杂搜索演示，并且非常喜欢高级搜索框，它具有非常接近 Excel 的强大的基于查询的搜索。我想将此高级查询接口重用于其他应用程序和目的，而不是 jqgrid。是否可以在不通过jqgrid的情况下重用它来查询外部json数据？我不知道 jqgrid 是如何构建它的，所以我想知道它是否是一些我不知道的内置 jquery UI 搜索模块或插件。如果您能提供一些提示，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:27:38.277

你喜欢

**XPath**

JSONPath：[http ://goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)

**jQuery**

jfunk [http://code.google.com/p/jfunk/](http://code.google.com/p/jfunk/)

**CSS**

jsonselect [http://jsonselect.org](http://jsonselect.org)

**LINQ**

linq.js [http://linqjs.codeplex.com/](http://linqjs.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:42:42.880

你可能还喜欢

*   [Dollar Q](https://github.com/furf/dollar-q)：具有链接语法（如 jQuery）。
*   [SpahQL](http://angryamoeba.co.uk/spahql-announce/)：类似于 XPath 的语法（[主页](http://danski.github.com/spahql/)，[Github](https://github.com/danski/spahql)
*   [JSONPath](http://goessner.net/articles/JsonPath/)：也类似于 XPath，但具有更多的 javascript 风格。

# jsf - 嵌套 primefaces 布局中的动态页面更新

> ID：11443980
> 
> 赞同：8
> 
> 时间：2012-07-12T01:43:22.387
> 
> 标签：jsf, jsf-2, primefaces, menuitem

我对 JSF 和 PrimeFaces 相当陌生，并且在开发具有多个菜单的全页面布局时遇到了一些问题。

问题 #1

我们有一个使用 PrimeFaces 3.3 的完整页面布局，左侧有嵌套布局单元，如下所示：

```
<p:layoutUnit id="west" position="west" header="Services" resizable="true" closable="true" collapsible="true" effect="drop">
            <p:layout>                                          
                <p:layoutUnit id="inner_center" position="center">                        
                   <h:form id="formMainMenu">
                        <ui:include src="#{menuBean.pageToDisplay}.xhtml" />
                   </h:form>               
                </p:layoutUnit>
                <p:layoutUnit id="inner_south" size="200" position="south">                                       
                    <h:form id="formStartMenu">
                        <p:menu>
                            <p:submenu label="Start Menu">                                    
                                <p:menuitem value="Start" actionListener="#{#menuBean.setPageToDisplay('template/menu/start')}" update=":inner_center" />                                    
                            </p:submenu>
                        </p:menu>
                    </h:form>
                </p:layoutUnit>
            </p:layout>
        </p:layoutUnit> 
```

这是支持bean：

```
@ManagedBean(name = "menuBean")
@SessionScoped
public class menuBean implements Serializable {

private String pageToDisplay = "template/menu/main";

public String getPageToDisplay() {
    return this.pageToDisplay;
}

public void setPageToDisplay(String pageToDisplay) {
    this.pageToDisplay = pageToDisplay; 
} } 
```

当我单击 menuItem 时，整个 LayoutUnit (inner_center) 就会消失。我已经尝试了多种表单和面板控件的组合以及 Ajax，但无法加载第二页和菜单。由于我对 JSF 的了解有限，我的方法可能不正确。我希望这很简单，我只是想念它。

从 menuItem 操作，我想在 inner_center 布局单元中加载另一个 PrimeFaces 菜单 bean。也许我不需要这样做，只需通过 Ajax 调用菜单？

ISSUE #2 使用这些嵌套的布局单元，当页面加载时，父布局单元标题“服务”完全消失。

```
<p:layoutUnit id="west" position="west" header="Services" resizable="true" closable="true" collapsible="true" effect="drop"> 
```

非常感谢任何有关整体方法的帮助或建议！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:52:54.437

这个问题似乎很受欢迎，所以我觉得至少有必要分享一下我们根据许多其他 Stack Overflow Q&A、我自己的实验、JSF 标准、[BalusC](https://stackoverflow.com/users/157882/balusc "栏杆C")以及无数其他人和博客提出的处理整体应用程序设计的解决方案这有助于学习曲线。

背景 -

我们的应用程序是一个企业级服务管理解决方案，附带一个 UI 和任意数量的许可模块。我们审查了 OSGI 和其他重型应用程序框架，但决定使用通过配置文件和数据库设置进行轻量级 .jar 管理的 Enterprise Maven 项目。我们使用由 mySQL 支持的实体对象，仅将对象传递回 UI。

解决方案 -

对于我们的初始版本，我们基于此布局创建了一个 JSF 模板网站： [http ://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/)

这个想法是让 UI 完全动态，如下所示：

1.  JSF 核心应用程序设计

    *   数据驱动的 JavaEE Enterprise Maven 应用程序
    *   主要是通过 Ajax 进行单页处理
    *   安全 PhaseListener（帮助解决全局 Ajax 问题）
    *   错误处理 Phaselistener（帮助解决全局 Ajax 问题）
2.  安全

    *   我们在 Glassfish 上使用基于领域的安全性。使用 JSF 2.2，您可以轻松地对目录、控件、页面和方法进行注释，以实现精细的角色管理。
3.  导航

    *   基于 Realm 中的用户角色从 XML 配置动态构建。

    *   动态导航和表单都根据需要通过作用域 bean 进行管理。此链接包含您将遇到的真正问题的许多很好的答案：http: [//balusc.blogspot.com/2011/09/communication-in-jsf-20.html](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

4.  模板内容和控件

    *   内容通过由实体填充的对象传递。大多数数据来自数据库。只有基本应用程序初始化是通过本地配置文件完成的。

    *   对于需要通过 UI 管理的任何对象数据，控件生成是通过 xml 属性文件完成的。

如您所知，兔子洞有许多隧道。如果我们的应用程序设计中有任何部分与您的相似，并且您想要更多信息和/或代码示例，请随时询问，我将在此线程上发布以供其他人继续学习。

# java - 如何测试 JAX-RS @POST

> ID：11443982
> 
> 赞同：2
> 
> 时间：2012-07-12T01:43:41.023
> 
> 标签：java, rest, jakarta-ee, jax-rs

如何测试@POST 方法？

测试@GET 很容易，因为您需要做的就是访问URL，我如何为@POST 执行此操作？我是否需要实际执行表单提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:42:45.530

以编程方式？像[这样](http://www.exampledepot.com/egs/java.net/post.html)的东西：

```
String data = URLEncoder.encode("key1", "UTF-8") + "=" + URLEncoder.encode("value1", "UTF-8");
data += "&" + URLEncoder.encode("key2", "UTF-8") + "=" + URLEncoder.encode("value2", "UTF-8");

// Send data
URL url = new URL("http://hostname:80/urltopostto");
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush(); 
```

交互式？您可以使用 SoapUI（免费版）进行[REST 测试](http://www.soapui.org/REST-Testing/understanding-rest-parameters.html)

![在此处输入图像描述](../Images/bbb5ba447d1a3524df7d39c785bb5536.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:15:52.973

您可以使用 rest-client (http://code.google.com/p/rest-client/) 之类的工具来测试所有 RESTFull WS

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:18:17.273

Chrome 也有不少 REST 扩展。我使用[简单的 REST 客户端](https://chrome.google.com/webstore/detail/fhjcajmcbmldlhcimfajhfbgofnpcjmb?hl=en-US)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T07:29:23.280

curl 工具 ( [http://curl.haxx.se/](http://curl.haxx.se/) ) 在这里也非常有用。

curl -i -X POST -v --data-urlencode 'key=value' 将发送带有 key=value 的 Post 作为 post 数据。

# php - 在php中打印一个数组

> ID：11443986
> 
> 赞同：-3
> 
> 时间：2012-07-12T01:44:12.317
> 
> 标签：php, arrays, printing

现在我明白你不能只使用 echo 来打印数组的内容，你必须使用 foreach 但由于某种原因这不起作用。有任何想法吗？

```
$rows = $stmt->fetchAll();
foreach ($rows as $key=>$row)
       {
        echo "My value at $key is $row";
       }
} 
```

输出：

```
My value at 0 is ArrayMy value at 1 is ArrayMy value at 2 is Array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T01:53:30.647

看来您已经使用`fetchAll`.

此方法返回一个数组（行）数组。内部数组有`column_name => value`元素。因此，例如，如果您检索到列“firstName”和“lastName”，则第一条记录的这些值将`$rows[0]['firstName']`分别`$rows[0]['lastName']`为。

正确的方法是：

```
$rows = $stmt->fetchAll();
foreach ($rows as $key => $row) {
    foreach ($row as $column => $value) {
        echo "My $column value for row $key is $value\n";
    }
} 
```

Protip：注意括号对齐，这对正确性无关紧要，但会使代码更具可读性:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:47:22.657

对我来说看起来像一个多维数组。尝试[`var_dump`](http://php.net/var_dump)或[`print_r`](http://php.net/print_r)

```
var_dump($rows);
print_r($rows); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:50:24.193

$row 是另一个不能直接转换为字符串的数组。您可以使用此功能检查数组内容。

```
function d($data)
{
    echo '<pre>';
    print_r($data);
    echo '</pre>';
}
d($stmt->fetchAll()); 
```

最好你这样做（如果你忘记删除它的调用不会损害你的网站）

```
define('ENVIRONMENT', 'development');
function d($data)
{
    if(ENVIRONMENT == 'development')
    {
    echo '<pre>';
    print_r($data);
    echo '</pre>';
    }
}
d($stmt->fetchAll()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T01:47:28.637

```
//<pre> tag will give you a well formatted version of var_dump  
echo "<pre>"; 
var_dump($rows);
echo "</pre>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T01:51:29.257

试试这个来调试以下内容`$row`：

```
$rows = $stmt->fetchAll();

foreach ($rows as $key=>$row)
{
    echo "First key: $key | ";

    foreach($row as $subkey => $subrow)
    {
        echo "Subkey: $subkey | Value: $subrow <br />";
    }

} 
```

[此外，使用var_dump()](http://br.php.net/manual/en/function.var-dump.php)、[print_r()](http://br.php.net/manual/en/function.print-r.php)和[var_export()](http://br.php.net/manual/en/function.var-export.php)等函数很重要，它们会为您避免很多问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-04T06:26:00.457

```
//@parram $data-array,$d-if true then die by default it is false
 //@author Your name

 function p($data,$d = false){

     echo "<pre>"; 
         print_r($data);
     echo "</pre>"; 

     if($d == TRUE){
        die();
     } 
} // END OF FUNCTION 
```

每当您需要字符串或数组时使用此功能，它会非常好用。有 2 个参数 1.$data - 它可以是数组或字符串 2.$d - 默认情况下它是 FALSE 但如果你设置为 true 那么它将执行 die() 函数

在你的情况下，你可以这样写..

```
$rows = $stmt->fetchAll();

foreach ($rows as $key=>$row) {
      p($rows);  // to use p function use above code for p() in your code   
} 
```

# android - Android：在模拟器图标中找不到创建的文件

> ID：11443989
> 
> 赞同：0
> 
> 时间：2012-07-12T01:44:55.857
> 
> 标签：android, emulation

完成编码后，我创建了一个新的 android 应用程序，我在模拟器中找不到我的应用程序，没有添加其他图标，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:48:32.323

检查模拟器菜单。它就像一部真正的手机，您的应用程序没有放在主屏幕上。它将在模拟器菜单中，以及所有其他应用程序、设置等。

希望这可以帮助。

# eclipse - 林特：如何忽略“ 没有翻译成 “错误？

> ID：11443996
> 
> 赞同：189
> 
> 时间：2012-07-12T01:45:48.043
> 
> 标签：eclipse, android-studio, localization, android-resources, android-lint

我无法编译/调试我们的 Android 应用程序，因为本地化文件还不完善。

我的 IDE 的验证工具[Lint](http://tools.android.com/tips/lint/)创建错误说：

> newCardsOrderVals 未在 ar、bg、ca、cs 中翻译

使用 Ant 编译/安装/运行可以正常工作，但我想使用我的 IDE 来简化调试。

有没有办法关闭此特定检查，或者理想情况下将其设为警告而不是错误？

我知道在发布之前，我们确实需要正确获取本地化文件，但目前这不是优先事项，因为屏幕本身正在被非常频繁地修改。

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-07-12T02:09:14.093

安卓工作室：

*   “文件”>“设置”并在搜索框中输入“MissingTranslation”

蚀：

*   Windows/Linux：在“窗口”>“首选项”>“Android”>“Lint 错误检查”中
*   Mac：“Eclipse”>“首选项”>“Android”>“Lint 错误检查”

找到该`MissingTranslation`行，并将其设置`Warning`为如下所示：

![缺少翻译，未翻译](../Images/cecf7cc0e1f68ff114ed0b52c354ccb6.png)

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-09-13T08:39:19.667

您可以像这样在定义上设置属性translatable="false"：

```
<string name="account_setup_imap" translatable="false">IMAP</string> 
```

欲了解更多信息：[http ://tools.android.com/recent/non-translatablestrings](http://tools.android.com/recent/non-translatablestrings)

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2014-10-26T18:49:23.843

要在 gradle 构建中忽略这一点，请将其添加到构建文件的 android 部分：

```
lintOptions {
   disable 'MissingTranslation'
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-04-03T19:06:41.453

这将导致 Lint 忽略文件中所有字符串的缺失翻译错误，但如果需要，可以验证其他字符串资源文件。

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="http://schemas.android.com/tools" 
    tools:ignore="MissingTranslation"> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-05-30T22:47:15.420

如果要关闭有关特定字符串的警告，可以使用以下命令：

*字符串.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>    

    <!--suppress MissingTranslation -->
    <string name="some_string">ignore my translation</string>
    ...

</resources> 
```

如果您想对特定字符串发出警告而不是错误，则需要构建自定义 Lint 规则来调整特定事物的严重性状态。

[http://tools.android.com/tips/lint-custom-rules](http://tools.android.com/tips/lint-custom-rules)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-01-31T16:58:50.383

在`lint.xml`文件中插入：

```
<?xml version="1.0" encoding="UTF-8"?>
<lint>
    ...

    <issue
        id="MissingTranslation"
        severity="ignore" />
</lint> 
```

有关更多详细信息：[抑制 Lint 警告](http://tools.android.com/tips/lint/suppressing-lint-warnings)。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-08-09T10:38:37.613

在资源根选项卡中添加 /res/values.xml 文件中的行，如下所示：

```
<resources
xmlns:tools="http://schemas.android.com/tools" 
    tools:locale="en" tools:ignore="MissingTranslation"> 
```

tools:locale 将本地语言设置为英语，以后不需要对所有资源字符串和工具进行语言翻译：忽略让 Lint 忽略资源字符串值的缺失翻译。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-08-16T16:23:40.507

在 android 部分的 gradle 文件中添加以下内容

```
 lintOptions {
       disable 'MissingTranslation'
    } 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-15T02:57:24.763

此外，

不是项目依赖的属性，Eclipse 首选项。
在 Mac 中，Eclipse > 首选项

![在此处输入图像描述](../Images/c648804a2d8ceec1544719aff73a83b1.png)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-06-30T15:29:52.607

另一种方法是指示您打算支持的语言并使用 Gradle 的“resConfigs”选项过滤掉其余语言。

查看[其他答案](https://stackoverflow.com/a/15013558/1145905)以获取详细信息

我认为这更好，因为您不必完全忽略您实际想要支持的语言的合法翻译错误

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-04-25T07:46:23.063

您还可以将不想翻译的资源放入名为`donottranslate.xml`.

示例和解释：[http ://tools.android.com/recent/non-translatablestrings](http://tools.android.com/recent/non-translatablestrings)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-07-07T05:55:47.560

他们中的许多人都有一个不同的工作答案，我也得到了相同的 lint 错误，我通过使用 eclipse 执行以下操作使其忽略。

1.  点击窗口
2.  点击首选项
3.  选择 android > Lint 错误检查。
4.  单击全部忽略 > 应用 > 确定。

就是这样。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-12T07:47:19.090

以下对我有用。

*   点击窗口
*   点击偏好
*   选择 android > Lint 错误检查。
*   查找并选择相关的 Lint 检查和
*   将严重性设置为“忽略”（右下角）

# c# - System.Drawing.Bitmap 包含比预期更多的数据

> ID：11443999
> 
> 赞同：3
> 
> 时间：2012-07-12T01:46:27.590
> 
> 标签：c#, graphics, gdi+

我有一种方法可以将数据从 System.Drawing.Bitmap 中复制出来，如下所示：

```
var readLock = image.LockBits(new Rectangle(0, 0, image.Width, image.Height), ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);
byte[] data = new byte[3 * image.Width * image.Height];
if (data.Length != readLock.Stride * readLock.Height)
    throw new InvalidOperationException("Incorrect number of bytes");
Marshal.Copy(readLock.Scan0, data , 0, data.Length);
image.UnlockBits(readLock); 
```

非常简单，它适用于我的大多数图像。但是对于非常小的图像（14x14），它会遇到异常。在失败的情况下，Stride 是 44，而不是预期的 42 (14 * 3)。

像素格式为 Format24bppRgb，因此图像中的每个像素应该有 3 个字节。这些额外的字节来自哪里，在处理图像数据时如何处理它们？

对于任何感兴趣的人，我正在从高度图生成法线数据，因此我需要能够准确地获取每个像素及其邻居）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T01:56:10.867

的每个像素线都`Bitmap`必须对齐，这就是为什么`stride`并不总是`width * bytes-per-pixel`. 您应该忽略任何额外的字节。这意味着，如果您正在使用具有未对齐数据的字节数组，您可能并不总是能够在一次`Marshal.Copy()`调用中复制所有图像数据。每行像素都开始于`readLock.Scan0 + y * readLock.Stride`并包含`readLock.Width * bytes-per-pixel`有意义的字节。

解决方案：

```
const int BYTES_PER_PIXEL = 3;
var data = new byte[readLock.Width * readLock.Height * BYTES_PER_PIXEL];
if(readLock.Stride == readLock.Width * BYTES_PER_PIXEL)
{
    Marshal.Copy(readLock.Scan0, data, 0, data.Length);
}
else
{
    for(int y = 0; y < readLock.Height; ++y)
    {
        IntPtr startOfLine = (IntPtr)((long)readLock.Scan0 + (readLock.Stride * y));
        int dataOffset = y * readLock.Width * BYTES_PER_PIXEL;
        Marshal.Copy(startOfLine, data, dataOffset, readLock.Width * BYTES_PER_PIXEL);
    }
} 
```