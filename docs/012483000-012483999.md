# StackOverflow 问答 12483000-12483999

# django - 在 Django 模型中调用函数

> ID：12483002
> 
> 赞同：0
> 
> 时间：2012-09-18T18:39:26.070
> 
> 标签：django

我有一个待办事项列表应用程序。为了保留已完成操作的历史记录，我想在任务从完成到未完成的任何时候创建一个新的操作实例。因此，每次操作完成时，我都会有一份副本。

```
class Action(models.Model):
    name = models.CharField("Action Name", max_length=200)
    complete = models.BooleanField(default=False, verbose_name="Complete?")

    # And some other attributes

    # Cache initial version of record to determine before/after differences
    def __init__(self, *args, **kw):
        cached_vars = self.__dict__
        super(Action, self).__init__(*args, **kw)
        var_cache = {}
        for var in cached_vars:
            var_cache[var] = getattr(self,var)
        self.var_cache = var_cache

    def remove_attrs(self):
        self.complete = True
        #Remove some other attributes

    def save(self, **kw):
        if self.complete:
            # Do some stuff
        else:

            if self.var_cache['complete'] != getattr(self,'complete') and self.id is not None:
                new_obj = deepcopy(self)
                new_obj.id = None
                new_obj.save()

                remove_attrs(self) 
```

在上面的代码中，在save方法中，如果Action从完整到不完整，则Action对自身进行深拷贝，然后需要更改其某些属性的值（例如，有一个属性使Action再次发生。我需要将其关闭，否则它将不断尝试从完整状态变为不完整状态）。

当我调用 remove_attrs(self) 时，它似乎不起作用。如何调用 def remove_attrs(self)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:41:05.180

因为它是一个方法，所以在对象上调用它。

```
self.remove_attrs() 
```

# version-control - 如何在不提交的情况下将两个 SubVersion 分支合并到一个工作副本？

> ID：12483006
> 
> 赞同：1
> 
> 时间：2012-09-14T13:46:43.703
> 
> 标签：version-control, svn

我当前的 SubVersion 工作流程是这样的：

1.  主干用于对主要源代码进行小的内容更改和错误修复。
2.  分支用于添加/编辑增强功能和项目。

因此，主干更改可以很快进行、测试、提交和部署。然而，增强功能和项目需要额外的用户测试和批准。

当时，我有两个分支机构需要同时进行测试和批准。在更改完全测试和批准之前，我不想合并到主干并提交。

我需要做的是将两个分支合并到一个工作副本而无需任何提交。

我正在使用 Tortoise SVN，当我尝试合并第二个分支时，我收到一条错误消息：

> **无法合并到具有本地修改的工作副本中**

有没有一种方法可以在不提交合并的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:59:04.940

您目前有主干和 2 个分支 A 和 B（它们都是主干的分支）。我建议您创建另一个名为 AB 的分支，如下所示：

1.  将您的工作文件夹切换到主干，如果还没有的话
2.  更新最新版本并确保您没有本地修改。如果你这样做了，要么提交它们（到主干），要么在适当的时候恢复它们。
3.  从主干对您的工作文件夹进行最后一次更新。请注意您已更新到的修订号（称为修订版 R）。
4.  在 repo 中，将主干的修订版 R 复制到一个名为“AB”的新分支（暂时不要**将**您的工作文件夹切换到 AB）
5.  将您的工作文件夹与 A 合并。
6.  将您的工作文件夹切换到 AB。
7.  提交您的工作文件夹（到 AB）并更新（从 AB）。
8.  将您的工作文件夹切换到主干。
9.  将您的工作文件夹与 B 合并。
10.  将您的工作文件夹切换到 AB。
11.  将您的工作文件夹提交给 AB。
12.  测试并提交对 AB 的任何修复。
13.  当它正常工作并且您准备好将所有内容合并到主干时，请进行最终提交（到 AB），然后更新您的工作文件夹（从 AB）。
14.  将您的工作文件夹切换到主干。
15.  将您的工作文件夹与 AB 合并
16.  测试和修复
17.  当它工作时，将工作文件夹提交到主干。
18.  出去喝啤酒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:02:19.807

Eric，“我可能想一次只部署一个更改......”和“将两个分支合并到一个工作副本而不提交”是不兼容的要求：或者您将在一个分支后测试分支或将两个分支混合在一起.

**版本 A**无论如何 - 您可以**将任何节点与**repo-tree 中的任何节点合并，而不仅仅是带有主干的*某个分支。*即，共同点，@JoelFan 工作流程很好，但是 - 需要较少的操作

1.  将主干的 HEAD 复制到 AB
2.  将 AB 与 A 合并
3.  提交合并集，测试等...
4.  将 AB 与 B 合并
5.  测试合并结果
6.  合并到主干并删除临时AB-branch

**版本 B**是 2-URL 合并。`svn help merge`，“2-URL 合并示例”部分作为开​​始。您可以在一个命令中将 2 个独立的分支合并为第三个`merge BRANCHA[@N] BRANCHB[@M] [TRUNK_WCPATH]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:03:47.990

每个合并操作都在您的本地沙箱中完成。在您提交一些垃圾代码之前，您不必担心。

我不知道您执行的整个部署过程，但您可以做的是：

1.  切换到分支 A
2.  将分支 A 与分支 B 合并
3.  构建应用程序，部署和测试它

如果一切正常，您可以提交所有更改（您在分支 A 上）。然后您可以切换到主干并与分支 A 合并。解决所有冲突后，您可以在主干上提交，仅此而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T19:29:57.473

我们曾经有过类似的工作流程。我最终找到的解决方案是保留多个本地副本，基本上每个分支一个。有时使用共享数据库有点冒险，但总的来说它非常成功。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-15T14:05:03.750

您可以在本地驱动器的不同位置签出要合并到的分支的另一个副本，合并到其中然后提交。然后删除整个第二个工作副本并返回您当前的任务。

但看起来你确实在试图颠覆你自己的工作实践——除非你只想将 2 个分支合并在一起以同时提交所有工作并删除 2 个旧分支......但是，是什么阻止你提交给他们和在这种情况下正常合并？

# javascript - 表单完成提交后执行 javascript

> ID：12483016
> 
> 赞同：6
> 
> 时间：2012-09-18T18:40:11.763
> 
> 标签：javascript, jquery, forms, post, form-submit

我正在尝试使用表单将一些文件提交到我的数据库。该表单具有隐藏 iframe 的目标。当它完成加载时，我想显示一条消息。

```
 $("form#formPost").submit();
 customFunction(); 
```

这个例子似乎在触发*customFunction()*之前没有完成提交，这对我的设计非常不利。

有没有办法做一些在完成发送数据时会触发的事情？我在stackoverflow上环顾四周，并没有很多关于这个的帖子。我觉得我必须进入目标 iframe 并在它准备好时执行那里的代码等。有没有办法让它按照我的意愿去做？

我尝试过的选项：

```
 $("form#formPost").submit(function(){ customFunction(); }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T17:17:27.957

同事创建了一个功能来做到这一点。

```
function SubmitWithCallback(form, frame, successFunction) {
   var callback = function () {
       if(successFunction)
           successFunction();
       frame.unbind('load', callback);
   };

   frame.bind('load', callback);
   form.submit();
} 
```

此函数采用您提交的表单、表单目标 iframe 和一个将在成功时执行的匿名函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T18:42:58.427

如果您以传统方式提交表单，您实际上是在说“我已完成此页面。这里有一堆表单数据供您，Web 服务器，用于呈现我的下一页”。Web 服务器获取表单数据并将下一页返回给浏览器。

如果您不希望页面重新加载，您可以使用 Ajax 提交表单。这对于 jQuery 来说非常简单：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

使用 Ajax，您可以在提交完成、成功和出错时定义明确的事件。

我不推荐针对隐藏 iframe 的方法。Ajax 更适合这种类型的处理。

**更新**

这是一个如何构建 Ajax 的示例

```
<form id='myFormId'>
<!-- Form fields, hidden, file or otherwise -->
</form>

var formVars = $("#myFormId").serialize();
$.ajax({ url: ajaxUrl, cache: false, type: 'POST', data: formVars, 
    success: function (data) { handleSuccessCase }, 
    error: handleAjaxError }); 
```

**更新 2**

基于[https://stackoverflow.com/a/5513570/141172中的评论](https://stackoverflow.com/a/5513570/141172)

你可以试试：

```
var formVars = $('#myFormId').serialize() + '&foo=' + $('#id_of_your_file_input').val() 
```

或者，您可以尝试在评论中建议的插件，这与上面链接的答案中的解决方案相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:43:49.593

也许最简单的做法是在 iframe 上附加一个`onload`事件。当表单完成提交时，该事件将触发。

# wpf - WPF：折叠 GridSplitter？

> ID：12483017
> 
> 赞同：7
> 
> 时间：2012-09-18T18:40:15.300
> 
> 标签：wpf, xaml, gridsplitter

我有一个 WPF 页面，上面有一个 Grid。

有三排。第 0 行包含一个 GridView `Height="*"`。第 1 行包含一个 GridSplitter 和`Height="auto"`. 第 2 行包含一个带有 的详细信息表单`Height="2*"`。

事情是这样的——我有一个按钮可以切换详细信息表单的可见性。这很好用。除了它只是隐藏第 2 行中的表单外，它不会扩展第 0 行中的 Grid 以填充空间。我想要的是按钮在第 0 行切换 GridView 以占用所有空间，然后切换回原来的位置。

显然在行内玩弄表单的可见性不会完成我想要的。

但是我需要玩什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-10-29T23:58:39.057

如果有人想要一个纯粹的 XAML 解决方案，我可以想出一种方法来使用样式、设置器和触发器来隐藏拆分器和相关行。

我为我的风格使用了一个静态资源，它被设置为更改`Height`和`MaxHeight`何时设置特定的绑定布尔值。

```
<Style x:Key="showRow" TargetType="{x:Type RowDefinition}">
  <Style.Setters>
    <Setter Property="Height" Value="*"/>
  </Style.Setters>
  <Style.Triggers>
    <DataTrigger Binding="{Binding MyShowRowBool}" Value="False">
      <DataTrigger.Setters>
        <Setter Property="Height" Value="0"/>
        <Setter Property="MaxHeight" Value="0"/>
      </DataTrigger.Setters>
    </DataTrigger>
  </Style.Triggers>
</Style> 
```

我只是将样式应用于相关的行定义，它就像一个魅力：

```
<Grid.RowDefinitions>
  <RowDefinition Height="*"/>
  <RowDefinition Style="{StaticResource showRow}"/>
  <RowDefinition Style="{StaticResource showRow}"/>
</Grid.RowDefinitions> 
```

值得注意的是，我在没有 MaxHeight 属性的情况下尝试了它，并且它没有正确折叠。添加它似乎对我有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-09T11:12:55.860

假设我有这个 XAML 布局：

```
 <Grid Name="MyGrid">
      <Grid.RowDefinitions>
          <RowDefinition />
          <RowDefinition Height="Auto" />
          <RowDefinition />
      </Grid.RowDefinitions>
      <MyControl1 ... Grid.Row="0" />
      <GridSplitter Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Stretch" ShowsPreview="True" Height="5" />
      <MyControl2 ... Grid.Row="2" />
  </Grid> 
```

然后我可以使用以下代码（相当于`Height="0"`XAML 中的设置）隐藏第二个控件（向下折叠拆分器）：

```
 MyGrid.RowDefinitions[2].Height = new GridLength(0); 
```

并使用以下代码展开它（相当于`Height="1*"`XAML 中的设置，这是 RowDefinition 的默认设置）：

```
 MyGrid.RowDefinitions[2].Height = new GridLength(1, GridUnitType.Star); 
```

当用户移动它时，这就是拆分器所做的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T18:53:36.380

我不得不在我自己的应用程序中引入一个附加依赖属性来处理这个问题：

```
<Grid c:GridSplitterController.Watch="{Binding ElementName=GS_DetailsView}">
    <Grid.RowDefinitions>
        <RowDefinition Height="1*" />
        <RowDefinition Height="200" />
    </Grid.RowDefinitions>

    <SomeControl Grid.Row="0" />

    <GridSplitter x:Name="GS_DetailsView"
                  Height="4"
                  Grid.Row="1"
                  VerticalAlignment="Top"
                  HorizontalAlignment="Stretch"
                  ResizeBehavior="PreviousAndCurrent"
                  ResizeDirection="Rows"
                  Visibility="{Binding ShowDetails,
                                       Converter={StaticResource boolvis}}" />

    <OtherControl Grid.Row="1"
                  Margin="0,4,0,0"
                  Visibility="{Binding ShowDetails,
                                       Converter={StaticResource boolvis}}" />
</Grid> 
```

首先在 a 上定义一个合适的附加属性`DependencyObject`：

```
public static GridSplitter GetWatch(DependencyObject obj)
{
    return (GridSplitter)obj.GetValue(WatchProperty);
}

public static void SetWatch(DependencyObject obj, GridSplitter value)
{
    obj.SetValue(WatchProperty, value);
}

public static readonly DependencyProperty WatchProperty =
    DependencyProperty.RegisterAttached(
        "Watch",
        typeof(GridSplitter),
        typeof(DependencyObject),
        new UIPropertyMetadata(null, OnWatchChanged)); 
```

然后听`IsVisibleChanged`：

```
private static void OnWatchChanged(DependencyObject obj,
    DependencyPropertyChangedEventArgs e)
{
    if (obj == null) return;
    if (obj is Grid)
    {
        var grid = obj as Grid;
        var gs = e.NewValue as GridSplitter;
        if (gs != null)
        {
            gs.IsVisibleChanged += (_sender, _e) =>
                {
                    UpdateGrid(
                        grid,
                        (GridSplitter)_sender,
                        (bool)_e.NewValue,
                        (bool)_e.OldValue);
                };
        }
    }
} 
```

一旦您观察到这些更改，您需要保存或恢复`GridLength`您正在观察的行或列中的值（为简洁起见，我只包括行）：

```
// Given: static Dictionary<DependencyObject, GridLength> oldValues;
private static void UpdateGrid(Grid grid, GridSplitter gridSplitter, bool newValue, bool oldValue)
{
    if (newValue)
    {
        // We're visible again
        switch (gridSplitter.ResizeDirection)
        {
        case GridResizeDirection.Columns:
            break;
        case GridResizeDirection.Rows:
            int ridx = (int)gridSplitter.GetValue(Grid.RowProperty);
            var prev = grid.RowDefinitions.ElementAt(GetPrevious(gridSplitter, ridx));
            var curr = grid.RowDefinitions.ElementAt(GetNext(gridSplitter, ridx));
            if (oldValues.ContainsKey(prev) && oldValues.ContainsKey(curr))
            {
                prev.Height = oldValues[prev];
                curr.Height = oldValues[curr];
            }

            break;
        }
    }
    else
    {
        // We're being hidden
        switch (gridSplitter.ResizeDirection)
        {
        case GridResizeDirection.Columns:
            break;
        case GridResizeDirection.Rows:
            int ridx = (int)gridSplitter.GetValue(Grid.RowProperty);
            var prev = grid.RowDefinitions.ElementAt(GetPrevious(gridSplitter, ridx));
            var curr = grid.RowDefinitions.ElementAt(GetNext(gridSplitter, ridx));
            switch (gridSplitter.ResizeBehavior)
            {
                // Naively assumes only one type of collapsing!
                case GridResizeBehavior.PreviousAndCurrent:
                    oldValues[prev] = prev.Height;
                    prev.Height = new GridLength(1.0, GridUnitType.Star);

                    oldValues[curr] = curr.Height;
                    curr.Height = new GridLength(0.0);
                    break;
            }
            break;
        }
    }
} 
```

剩下的就是一个合适的`GetPrevious`and实现`GetNext`：

```
private static int GetPrevious(GridSplitter gridSplitter, int index)
{
    switch (gridSplitter.ResizeBehavior)
    {
        case GridResizeBehavior.PreviousAndNext:
        case GridResizeBehavior.PreviousAndCurrent:
            return index - 1;
        case GridResizeBehavior.CurrentAndNext:
            return index;
        case GridResizeBehavior.BasedOnAlignment:
        default:
            throw new NotSupportedException();
    }
}

private static int GetNext(GridSplitter gridSplitter, int index)
{
    switch (gridSplitter.ResizeBehavior)
    {
        case GridResizeBehavior.PreviousAndCurrent:
            return index;
        case GridResizeBehavior.PreviousAndNext:
        case GridResizeBehavior.CurrentAndNext:
            return index + 1;
        case GridResizeBehavior.BasedOnAlignment:
        default:
            throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-07T03:32:15.320

此[GridExpander](http://jefuri.wordpress.com/)控件继承表单 GridSpliter，可能适合您正在寻找的工作。[感谢 Shemesh](http://shemesh.wordpress.com/2010/07/10/silverlight-gridsplitter-with-a-collapse%C2%A0button-%E2%80%93-best/)编写了我自己在 WPF 中使用的原始 Silverlight 版本。我发现自己几乎在尝试使用 GridSplitter 的所有地方都想要这个功能，所以它非常方便。

# c# - 使用 QuickPDFLibrary 生成动态 PDF

> ID：12483021
> 
> 赞同：0
> 
> 时间：2012-09-18T18:40:28.720
> 
> 标签：c#, asp.net, .net, pdf-generation

我正在尝试使用 .NET 生成动态 PDF。我找到的图书馆是 QuickPDFLibrary。我知道还有其他几个库可以做到这一点，例如 iTextSharp；但是，它们需要商业应用程序的许可证。QuickPDFLibrary 声明它们支持 ASP.NET；但是，我似乎无法让它工作，也无法在他们的网站上找到一个教程，该教程记录了将它与 ASP.NET 一起使用的文档。我按照程序设置 DLL 和 ActiveX，但无法让它们中的任何一个在 aspx 页面的上下文中工作。我的代码如下。

```
public partial class _Default : System.Web.UI.Page
{
    public QuickPDFAX0816.PDFLibrary qp;
    protected void Page_Load(object sender, EventArgs e)
    {
        qp = new QuickPDFAX0816.PDFLibrary(); 
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        qp.UnlockKey("UNLOCK KEY HERE");

        // This function draws text onto a document

        // Setup the parameters
        string fileName = "drawText.pdf";

        // Check to see if the library has been successfully unlocked
        if (qp.Unlocked() == 1)
        {
            // Set origin co-ordinates to top left of page
            qp.SetOrigin(1);

            // Call the DrawText function
            qp.DrawText(100, 100, "Hello world from C# and the ActiveX edition of Quick PDF Library");

            // Save the changes to the document on the local disk (in the debug folder)
            int result = qp.SaveToFile(fileName);

            if (result == 1)
            {
                Console.WriteLine("IT worked!");
            }
            else
            {
                Console.WriteLine("IT failed!");
            }
            // Open PDF automatically
            //System.Diagnostics.Process.Start(fileName);

        }
        else
        {
            // If library could not be unlocked warn the user
            Console.WriteLine("License key could not be validated. The library was not unlocked.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:16:14.030

试试 PDFSharp [http://www.pdfsharp.net/](http://www.pdfsharp.net/)。它是具有 MIT 许可证的开源软件，因此它对商业产品非常友好，完全是 .Net（没有 ActiveX），并且他们有很好的示例[http://www.pdfsharp.net/wiki/PDFsharpSamples.ashx](http://www.pdfsharp.net/wiki/PDFsharpSamples.ashx)可以帮助您入门

# playframework-2.0 - 玩框架 2.0 演进和创建触发器

> ID：12483025
> 
> 赞同：4
> 
> 时间：2012-09-18T18:41:09.487
> 
> 标签：playframework-2.0

我一直在尝试使用 Play 2.0.3 创建此触发器。如果我手动运行它，它在 MySQL 中运行得非常好，但是在尝试从 Play 运行它时它会失败。

```
delimiter |
    create trigger company_updated before update on company
        for each row begin
            set new.updated = CURRENT_TIMESTAMP;
        end;
    |
delimiter ; 
```

它抛出的错误是这样的：

我们收到以下错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在“分隔符 |”附近使用的正确语法。在尝试运行此 SQL 脚本时，在第 1 行 [ERROR:1064, SQLSTATE:42000] 为每一行更新公司之前创建触发器 company_updated：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T14:42:03.977

这曾经是一个错误，并已在 2.1 中修复。您可以使用双分号进行转义。它记录在这里： [http ://www.playframework.com/documentation/2.1.0/Evolutions](http://www.playframework.com/documentation/2.1.0/Evolutions)

所以你的代码应该改变如下：

```
create trigger company_updated before update on company
    for each row begin
        set new.updated = CURRENT_TIMESTAMP;;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:01:10.880

该`delimiter`关键字不是 SQL 语句，它只在 mysql 命令行客户端中使用。

尝试删除`delimiter`部分：

```
create trigger company_updated before update on company
    for each row begin
        set new.updated = CURRENT_TIMESTAMP;
    end; 
```

[但正如您所提到的，您可能会使用分号](https://play.lighthouseapp.com/projects/82401/tickets/212-evolutions-break-on-semicolons)遇到Play 错误:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:20:36.060

这似乎是一个我们无法真正解决的限制。因此，我们目前只是不支持我们的应用程序中的触发器。相反，我们只是覆盖了模型的保存/更新方法......

```
@Override
public void save() {
    this.updated = new Date();
    this.created = this.updated;
    super.save();
}

@Override
public void update() {
    this.updated = new Date();
    super.update();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T08:04:02.257

不需要分隔符语句。Play 会将您的文件拆分为多个查询，其中一个文件以“;”结尾 特点。

如果你想创建一个复杂的触发器，你不想在分号后分割你的文件，所以你用双分号“;;”转义它。

您以一个分号结束每个查询，并在触发器内以双分号结束您的查询。

例子 ：

```
DROP TRIGGER IF EXISTS invoice_line_insert;
CREATE TRIGGER invoice_line_insert AFTER INSERT
ON invoice_line FOR EACH ROW
BEGIN
    IF NEW.type = "DELIVERY" THEN
        UPDATE invoice
        SET invoice.etdelivery_amount = invoice.etdelivery_amount + NEW.amount
        WHERE invoice.id_invoice = NEW.invoice_parent_id_invoice;;
    ELSE
        UPDATE invoice
        SET invoice.etexpense_amount = invoice.etexpense_amount + NEW.amount
        WHERE invoice.id_invoice = NEW.invoice_parent_id_invoice;;
    END IF;;
    UPDATE invoice
    SET invoice.vatamount = (NEW.amount * (
                SELECT vat.rate
                FROM vat
                WHERE vat.id_vat = NEW.vat_id_vat
    )) + invoice.vatamount
    WHERE invoice.id_invoice = NEW.invoice_parent_id_invoice;;
    UPDATE invoice
    SET invoice.itamount = invoice.vatamount +
            invoice.etdelivery_amount +
            invoice.etexpense_amount
    WHERE invoice.id_invoice = NEW.invoice_parent_id_invoice;;
END; 
```

# c# - 用 C# 组织课程

> ID：12483028
> 
> 赞同：1
> 
> 时间：2012-09-18T18:41:19.877
> 
> 标签：c#, domain-driven-design

什么是一些最佳实践，您应该在哪里/如何组织类，以便开发人员轻松使用，没有任何困难，我正在 C# 静态类库中创建一个框架，为特定域提供一堆功能。

这是我的设计。

我创建了一个静态类：

```
public static class Pages
{
   //static prop to get access HomePage class
   public static HomePage HomePage
   {
       get {
              var _home = new HomePage();
              return _home;
           }
   }
   //static prop to get access Employee class
   public static Employee EmployeePage
   {
       get {
              var _employeePage = new Employee();
              return _employeePage;
           }
   }
   //static prop to get access Employer class
   public static Employer EmployerPage
   {
       get {
              var _employerPage = new Employer();
              return _employerPage;
           }
   }

} 
```

例如，我为 HomePage、Employee、Employer 创建了单独的类（非静态）：

```
//Implementation class 
public class Employee
{    
    public bool Status()
    {
        return true;
    }

.... more code..... 
```

}

这是一个重要的问题：

用户应该能够访问这样的东西。

```
bool _status = Page.Employee.Status();

or

Page.HomePage.SomeMethod(); 
```

我在朝着正确的方向前进吗？

**关注：**我对上述方法的唯一关注是，`Pages`类....我将添加更多类，最终我将在类中拥有实例化类，`Page`这样做可以吗？

或任何其他更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:44:39.687

不，我绝对*不会*那样做。对于构造函数调用来说，拥有一个*只是*语法糖（或者在这种情况下是误导）的静态属性是很奇怪的。如果您真的想隐藏实现类，它会更有意义（尽管我会使用那些静态属性方法）但我看不到这里的好处。

此外，`Status`听起来它应该是一个*属性*，而不是一个方法。哦，对我来说，an听起来`Employee`不像`Page`- 听起来像是员工数据本身。让您的类型名称描述它们所代表的内容。所以你应该有类似的东西：

```
bool status = new EmployeePage().Status; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:57:04.197

Pages 类感觉更像是一个命名空间，而不是一个类。您在那里绘制的属性*创建*了一个页面，而不是获取一些东西。这感觉不对。你所建造的似乎更像是一个工厂。你想要一个工厂还是在Pages类中积累这些属性的目的是什么？

由于您对要实现的目标非常模糊，因此答案也是如此。但是在一个地方有这么多静态会立即感觉很奇怪，也许除了常量。

# javascript - 滚动到特定位置后隐藏固定内容？

> ID：12483029
> 
> 赞同：0
> 
> 时间：2012-09-18T18:41:29.597
> 
> 标签：javascript, css, wordpress, css-float, jquery-events

我使用这个 ( [https://github.com/cheald/floatingFixed](https://github.com/cheald/floatingFixed) ) Javascript 在我的网站上创建社交分享栏。它工作得很好，但我不想在它滚动到页脚时显示它。这该怎么做？这是我网站的一个页面[http://thedripple.com/1384/lg-optimus-g-launch-price/](http://thedripple.com/1384/lg-optimus-g-launch-price/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:53:53.283

非常简单，因为您已经包含了 jQuery：

```
$(window).scroll(function() { //when scrolled
    var flt = $(".floater");
    var offset = flt.offset().top + flt.height(); //get the current offset of the floater
    var footertop = $("#footer").offset().top; //and the footer's top offset
    if(offset > footertop) { //if you scrolled past the footer
        flt.hide(); //hide the sharing tab
    }
    else {
        flt.show(); //show it
    }
}); 
```

# javascript - 使用javascript提交时将复选框值从子表单传递到父表单

> ID：12483032
> 
> 赞同：0
> 
> 时间：2012-09-18T18:41:53.087
> 
> 标签：javascript, coldfusion

我在coldfusion父表单中有以下代码。单击复选框时，将打开一个子窗口 (abc.cfm)，其中包含与父窗口上的复选框相关的例如 5 个复选框。

```
<input type="checkbox" name="inq" id="inq" value="#item_code#"     onClick="window.open('abc.cfm?inq=#item_code#');">#item_description#  
 <span class="style6">Click the checkbox for the list</span> 
```

用户选中子窗口上的 1 个或多个复选框并在 abc.cfm 页面上点击提交；子页面将关闭，并且选择的值需要显示在 parent.cfm 页面上。谁能让我知道该怎么做。

这是在我的父 cfm 页面上。

```
 <td colspan="2"  class="trr3"><textarea cols="30" rows="5"  name="narr"></textarea>    </td>
  <td width="32" valign="top"  class="trr3">Brief</td>
  <td width="499" valign="top"  class="trr3"><input type="text" name="brief" size="30"></td> 
```

我在子 abc.cfm 页面上有以下代码。

```
<SCRIPT LANGUAGE="JavaScript">

 function figure_this_out(){
   var boxes = document.form1.cat;
    var display = "";
     var t = document.getElementById("category_id").value;
    for (i = 0; i < boxes.length; i++){
    if (boxes[i].checked == true){
   display = display + boxes[i].value + ", ";
   t = display;
  //alert(t);
  window.opener.document.getElementById("category_id").value=t;
  window.opener.document.getElementById("narr").value =          document.getElementById("narr").value;
 window.opener.document.getElementById("brief").value =                    document.getElementById("brief").value;
       }
         }
        window.close();
            } 
             </script>

       <table>
      <cfloop query="nature_compl"> 
         <cfif nature_compl.currentrow mod 3 EQ 1>      
        <tr>
     </cfif>
    <td class="trr3">

    <input type="checkbox" id="cat" name="cat" value="#category_id#"   onClick="if (this.checked) this.form.category_id.value=this.value; else    this.form.category_id.value=''" >
     #category_description#

     </td>
        </cfloop>

         <input  type="hidden" name="category_id" id="category_id"   value="">
        <tr>
     </td> 
</tr>
<tr>
<td class="trr3">
Brief &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" name="brief" size="38">
</td>
</tr>
<tr>
<td class="trr3">
Narrative
<textarea cols="30" rows="5"  name="narr"></textarea>
</td>

</tr>
 <tr>
 <td><input type="button" class="groovybutton2" value="SUBMIT" name="save"   onClick="figure_this_out();" > 

     </td>

  <td colspan="3">&nbsp;</td>
  </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:12:53.163

您没有将类别描述分配给 javascript 可以引用的对象。尝试将其放入带有 ID 的 div 中。

# ruby-on-rails - 设计路由错误：没有路由匹配 [PUT]

> ID：12483037
> 
> 赞同：1
> 
> 时间：2012-09-18T18:42:12.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我试图让我所有的设计路线都成为我想要的方式：

```
devise_for :users, :controllers => { :registrations => 'registrations' }
  devise_scope :user do
    get 'join' => 'devise/registrations#new', :as => :new_user_registration
    post 'join' => 'devise/registrations#create', :as => :user_registration
    get 'login' => 'devise/sessions#new', :as => :new_user_session
    post 'login' => 'devise/sessions#create', :as => :user_session
    delete 'logout' => 'devise/sessions#destroy', :as => :destroy_user_session
    get 'account_settings' => 'devise/registrations#edit', :as => :edit_user_registration
    put 'account_settings' => 'devise/registrations#update', :as => :update_user_registration
    get 'forgot_password' => 'devise/passwords#new', :as => :new_user_password
    get 'user', :to => 'user_pages#home', :as => :user_root
  end

  match '/user' => 'user_pages#home', :as => :user_root 
```

当我转到帐户设置（或设计编辑注册）并尝试更新它时。我得到错误：

```
Routing Error

No route matches [PUT] "/join" 
```

它应该回到主页。为什么我会收到此错误？我如何解决它？

**编辑**

这是所有设计路线和我制作的路线：

```
new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        registrations#cancel
       user_registration POST   /users(.:format)               registrations#create
   new_user_registration GET    /users/sign_up(.:format)       registrations#new
  edit_user_registration GET    /users/edit(.:format)          registrations#edit
                         PUT    /users(.:format)               registrations#update
                         DELETE /users(.:format)               registrations#destroy
   new_user_registration GET    /join(.:format)                devise/registrations#new
       user_registration POST   /join(.:format)                devise/registrations#create
        new_user_session GET    /login(.:format)               devise/sessions#new
            user_session POST   /login(.:format)               devise/sessions#create
    destroy_user_session DELETE /logout(.:format)              devise/sessions#destroy
  edit_user_registration GET    /account_settings(.:format)    devise/registrations#edit
       new_user_password GET    /forgot_password(.:format)     devise/passwords#new 
```

我很难看到这个，看看我需要改变什么。因此，如果有人知道这将有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:48:45.253

做一行更改，我在这里写完整的代码：

```
devise_for :users, :controllers => { :registrations => 'registrations' }
  devise_scope :user do
    get 'join' => 'devise/registrations#new', :as => :new_user_registration
    put 'join' => 'devise/registrations#create', :as => :user_registration
    get 'login' => 'devise/sessions#new', :as => :new_user_session
    post 'login' => 'devise/sessions#create', :as => :user_session
    delete 'logout' => 'devise/sessions#destroy', :as => :destroy_user_session
    get 'account_settings' => 'devise/registrations#edit', :as => :edit_user_registration
    put 'account_settings' => 'devise/registrations#update', :as => :update_user_registration
    get 'forgot_password' => 'devise/passwords#new', :as => :new_user_password
    get 'user', :to => 'user_pages#home', :as => :user_root
  end

  match '/user' => 'user_pages#home', :as => :user_root 
```

在上面我改变了行

```
post 'join' => 'devise/registrations#create', :as => :user_registration 
```

到

```
put 'join' => 'devise/registrations#create', :as => :user_registration 
```

或提出您的请求**发布**请求。

# bit-manipulation - 清除从 MSB 到 i（包括）的所有位

> ID：12483038
> 
> 赞同：0
> 
> 时间：2012-09-18T18:42:12.903
> 
> 标签：bit-manipulation, bit

下面是关于通过 i（包括）清除所有 MSB（最高有效位）的代码

```
public int clearBitsMSBThrough(int num, int i) {
    int mask = ( 1 << (i + 1) ) - 1;
    return num & mask;
} 
```

我对“包容性”感到困惑。例如，如果数字是 0011 1010 并且 i = 3。掩码将是 0000 1111，结果是 0000 1010，但位置 3 的位不会被清零。

我误解了这个问题吗？我认为应该是：

```
int mask = (1 << i) - 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-29T01:32:37.947

```
public int clearBitsMSBThrough(int num, int i) {    
   int mask = (1 << i) - 1;
   return num & mask;
} 
```

在这方面略读[二元减法](http://www.helpwithpcs.com/courses/binary-numbers.htm)可能会有所帮助。

# java - 如何使它 ListView 不在 Android 中发出点击声音？

> ID：12483043
> 
> 赞同：1
> 
> 时间：2012-09-18T18:42:31.740
> 
> 标签：java, android, eclipse, android-listview

我的 Android 应用程序中有一个 ListView 可以部分点击......前 10 行不执行任何操作（仅显示数据），后 10 行可点击并打开一个新 Activity。

整个 ListView 实际上是可点击的，我只是在检测到超出某个位置的单元格触摸时才打开一个 Activity。这是正确的方法吗？

此外，正因为如此，当有人触摸任何行时，设备上会播放点击声音，而不仅仅是打开活动的行。如何阻止某些行发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:46:44.120

覆盖 isEnabled，如下所示。

```
class MenuAdapter extends ArrayAdapter<String> {

    ....

    public boolean isEnabled(int position) {
        return position >= 10;
    }
} 
```

此方法来自[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled%28int%29)类。

# bash - Bash 脚本 - 守护进程

> ID：12483048
> 
> 赞同：0
> 
> 时间：2012-09-18T18:43:01.757
> 
> 标签：bash, shell

我不是程序员，也不是安全专家。我使用 CheckPoint，我有以下代码，由我开发用于 CheckPoint 日志管理：

```
#!/bin/bash -

# Necessario carregar as variaveis do CheckPoint:
. /etc/profile.d/CP.sh

# Description:
# Log management

# Crontab:
#0 */1 * * * nohup /etc/scripts/log start 0<&- 1>> /var/log/LOG 2>&1 &

# Vars:
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/etc/scripts
FILE=/var/log/LOG
SLEEP=600
RUN_TIME=01
LOG_DIR=$FWDIR/log
GZIP_RET=1
SCP_RET=1
SCP_USR=openssh
SCP_DEST_DIR=LOGS_RJ
SCP_IP=192.168.1.41
TIME=$(clock | awk {'print $4'} | cut -d ':' -f 1)
CHECK=$(ps aux | grep 'log start' | grep -v grep | wc -l)
DATE=$(date +%y%m%d)

# Functions:

usage() {
    echo "Usage: $0 [start|stop]" >&2
    exit 1
}

do_launch() {
    if [ "$CHECK" -eq 2 ] ; then
        set -x
        #exec >> /var/log/LOG 2>&1
    else
        exit
    fi
}

do_compression() {
    SEARCH=`find "$LOG_DIR" -name '20*' -daystart -follow -mtime +$GZIP_RET | grep -v gz`
    for i in $SEARCH ; do
        gzip -f -9 $i ;
    done
}

do_scp() {
    SEARCH=`find "$LOG_DIR" -name '20*' -daystart -follow -mtime +$SCP_RET`
    for i in $SEARCH ; do
        scp $i $SCP_USR@$SCP_IP:$SCP_DEST_DIR && rm $i || break 1;
    done
}

# Work
if [ "$#" -ne 1 ]
then
    usage
else
    case "$@" in
        start)
            while true ; do
                do_launch
                while true ; do
                    if [ "$TIME" -eq "$RUN_TIME" ] ; then
                        do_scp
                    else
                        do_compression
                    fi
                    sleep $SLEEP
                done
            done
            ;;
        stop)
            pkill -x log
            ;;
        *)
        usage
    esac
fi

exit 
```

该脚本在手动运行时运行良好，但是当我放入 crontab`nohup /etc/scripts/log start 0<&- 1>> /var/log/LOG 2>&1 &`甚至从终端运行并注销并登录时，脚本无法循环/运行，但它仍然从`ps`.

有人能帮我吗？

此外，来自 CheckPoint 的 bash 版本是 2.05b，但如果手动操作一切正常，我认为版本不是原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:58:23.637

鉴于文件列表的顶部：

```
SLEEP=600
RUN_TIME=01
...
TIME=$(clock | awk {'print $4'} | cut -d ':' -f 1) 
```

这有点令人惊讶：

```
if [ "$TIME" -eq "$RUN_TIME" ] ; then 
```

没有什么能改变这些值，所以要么你很幸运，并且`clock`（不是我熟悉的命令）的输出匹配，`01`要么不匹配。如果匹配，则循环将执行该`do_scp`操作；否则，它将执行该`do_compression`操作。但是，一旦启动，我看不到任何东西可以使它执行其他操作。

要修复，您可能需要在每次迭代时评估 TIME。您还需要考虑处理两个动作之间的切换所选择的方法是否合适；我认为这是值得怀疑的。

# c#-4.0 - ASP.Net mvc 4 DropDownListFor 未选择选定值

> ID：12483050
> 
> 赞同：0
> 
> 时间：2012-09-18T18:43:08.440
> 
> 标签：c#-4.0, asp.net-mvc-4

```
public class TestViewModel
{
    private IUserRepository _userRepository = new UserRepository();

    public int UserID { get; set; }

    public IEnumerable<SelectListItem> users
    {
        get
        {
            var result =  _userRepository.GetAllUsers()
                .Select(x => new SelectListItem
                {
                   Value = x.UserID,
                   Text = x.Name
                });
            return result;
        }
    }
} 
```

测试视图.cshtml

```
@model TestNamespace.TestViewModel

<h2>Test</h2>
@Html.DropDownListFor(x =>x.UserID,
    new SelectList(Model.users,"Value","Text"), "--Select User--"       
) 
```

当我在下拉列表中选择值时，该值没有被选中。我写了一个`.change()`没有被提出的jquery。$("#UserID").change();

它显示*"The field UserID must be a number"*。

```
<script type="text/javascript">

$(document).ready(function () {

    $("#UserID").change(function () {
        alert("Test");
    });
}); 
```

# sql-server - 查询在查询分析器中运行很快，但在 C# 应用程序中运行缓慢

> ID：12483064
> 
> 赞同：2
> 
> 时间：2012-09-18T18:43:54.417
> 
> 标签：sql-server, sql-server-2005, ssms, query-analyzer

> **可能重复：**
> [sql 在 ssms 中运行速度很快，在 asp.net 中运行缓慢](https://stackoverflow.com/questions/10175422/sql-runs-fast-in-ssms-slow-in-asp-net)

使用 SQL Server 2005，在几个大表上有一个 sql 查询，它在程序中超时。但是，当我在查询分析器中运行它时，它会在大约 30 秒内完成。

为什么有区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T18:45:52.450

通常这些是SET设置的差异，导致不同的计划。在 Management Studio 中，该过程可能使用与创建时*相同*的设置运行。

查看 sys.dm_exec_sessions 用于您的 ASP.Net 应用程序和 SSMS 会话。我会冒险猜测您的设置中至少有一个`SET`是不同的。这可能会促成不同的计划（最终这归因于参数嗅探），并且应用程序端通常会变得更糟。

有关更多详细信息，请参阅这些其他问题：

*   [从 Web 调用存储过程时速度慢，从 Management Studio 调用时速度快](https://stackoverflow.com/questions/6585417/stored-procedure-is-very-slow-only-when-called-from-web-but-fast-if-executed-di)
*   [过程在 ADO.NET 中超时，但在 SSMS 中没有](https://stackoverflow.com/questions/7096728/sproc-time-out-from-ado-net-but-not-in-ssms-on-a-specific-db)
*   [从 Web 执行时查询超时，但从 SSMS 执行时超快](https://stackoverflow.com/questions/2248112/sql-server-query-times-out-when-executed-from-web-but-super-fast-when-executed)
*   [ADO .NET 与 SQL Server Management Studio - ADO 性能更差](https://stackoverflow.com/questions/7273033/ado-net-vs-sql-server-management-studio-ado-performs-worse)
*   [sql 在 ssms 中运行快 在 asp.net 中运行缓慢](https://stackoverflow.com/questions/10175422/sql-runs-fast-in-ssms-slow-in-asp-net)

并阅读 Erland Sommarskog 的文章，[应用程序慢，SSMS 快？](http://www.sommarskog.se/query-plan-mysteries.html)

# javascript - 在 android 应用程序的谷歌地图上放置数千个图钉

> ID：12483065
> 
> 赞同：0
> 
> 时间：2012-09-18T18:44:19.517
> 
> 标签：javascript, android, algorithm, maps, markerclusterer

我正在与我的程序员一起工作，并且遇到了一个问题，我们正试图找到一个简单/开源的解决方案，因为我相信其他人之前也遇到过同样的问题......

简单来说，我们试图在 android 应用程序中的谷歌地图上放置数千个图钉......

我们设法解决了在 xcode 中的谷歌地图上放置数千个图钉的问题，方法是使用聚类算法将它们放置在集群中并给出特定区域的图钉数量，然后当您放大时，图钉会特别出现在它们的地点。

但是，当尝试在 android 空间中使用相同的算法时，我们发现它缓慢且不稳定，应用程序崩溃并变得无法使用。

显然，只是试图填充地图上的所有图钉位置不是解决方案，而是在不同缩放级别时沿着聚类或加载图钉线的另一种解决方案....如果您可以通过指导我了解其他人所做的事情来提供帮助解决这个问题或提出解决方案，我将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:17:23.083

你可以看到这个答案[AndroidMapCluster](https://stackoverflow.com/a/7447998/1050058)和另一个项目[SampleClusterMapActivity](http://code.google.com/p/android-playground-erdao/source/browse/trunk/SampleClusterMap/src/com/erdao/android/SampleClusterMap/SampleClusterMapActivity.java?r=226)

# python - 打印一个 unicode 字符串与打印每个字符，它不匹配什么？

> ID：12483068
> 
> 赞同：2
> 
> 时间：2012-09-18T18:44:29.707
> 
> 标签：python, unicode, utf-8, utf-16, utf8-decode

```
s = u'\U0001031e\U0001031d\U0001015c\U0001015d\U00010170\U0001014b\U00010169\U0001016a\U0001016c\xa6\U0001d32c\U0001010c\U0001013a\U00010109\U0001010b\U0001010d\U0001010f\U0001011c\U0001d1ca\U000201b3\U0001016d\U00010184\U00010184'
print s
for a in s: print a, repr(a) 
```

我使用 mac os x lion，python 272，字符串打印正常，但循环打印 '???' 以及不正确的 u'\u' unicode 值。

这是打印的值：

```
u'\ud800' u'\udf1e' u'\ud800' u'\udf1d' u'\ud800' u'\udd5c' u'\ud800' u'\udd5d' u'\ud800' u'\udd70' u'\ud800' u'\udd4b' u'\ud800' u'\udd69' u'\ud800' u'\udd6a' u'\ud800' u'\udd6c' u'\xa6' u'\ud834' u'\udf2c' u'\ud800' u'\udd0c' u'\ud800' u'\udd3a' u'\ud800' u'\udd09' u'\ud800' u'\udd0b' u'\ud800' u'\udd0d' u'\ud800' u'\udd0f' u'\ud800' u'\udd1c' u'\ud834' u'\uddca' u'\ud840' u'\uddb3' u'\ud800' u'\udd6d' u'\ud800' u'\udd84' u'\ud800' u'\udd84' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:47:07.420

您正在 UCS2 Python 构建中打印 4 字节 Unicode 字符，这些字符在内部存储为每个 2 个字符，一个[UTF-16 代理对](https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)。副作用之一是上面的任何 Unicode 字符`\uffff`都被打印成这样的对；前导字符是一个介于to范围内的值`\uD800`，`\uDBFF`后跟第二个字符。`\uDC00``\uDFFF`

您需要重新编译您的 python 以支持宽 Unicode 字符，或升级到 python 3.3，它具有新的内部 Unicode 表示，可根据需要在 1、2 和 4 字节宽字符之间切换。

您可以通过查看来测试您的 python unicode 支持`sys.maxunicode`；如果该系统值等于`65535`您的窄（默认）构建，则在宽构建中该值为 1114111。

Mac 的默认 python 是窄的 Unicode 构建；最新的 Linux 发行版启用了宽 unicode 标志。

# deployment - Clojure/Ring：如何将我的 clojure 应用程序与我无法控制的 java 构建过程集成？

> ID：12483083
> 
> 赞同：6
> 
> 时间：2012-09-18T18:45:28.263
> 
> 标签：deployment, clojure, war, amazon-elastic-beanstalk, ring

我有一个独特的构建情况。我正在使用`lein uberwar`我的环应用程序构建战争并部署到 beanstalk。这一切都很好。现在出现了一个要求，我们需要将代码推送到一个 svn 存储库，在那里他们将管理构建，它对 clojure（仅 java）一无所知。这是一个庞大的官僚组织，他们的构建过程已经到位，所以让他们安装`lein`在他们的服务器上目前是不可能的。我知道 lein 在引擎盖下使用了 maven，所以我知道这在理论上可行，但我仍然对这个过程的几个步骤持怀疑态度。

我经历了[lein-ring](https://github.com/weavejester/lein-ring/blob/master/src/leiningen/ring/war.clj)中的战争构建过程，我看到的主要问题是生成了 servlet 和 listener 类，以及 web.xml。我觉得我可以提供执行此任务的 java 文件，但不清楚这些 java 文件将包含什么以及它们最终将存在于项目结构中的什么位置。查看最终战争中生成的 servlet.clj 和 listener.clj 文件，它们看起来非常简单，可能已经存在这方面的示例？

我看到的另一个大障碍是战争进程调用`clojure.core/compile`了项目命名空间，它从 clojure 源生成所有类文件。在从 maven 构建期间是否有某种方法可以触发此编译？我几乎在想象一个 java 类，它将编译外包给 clojure.core/compile，但我不确定从 java 调用 clojure 的来龙去脉，而不是反之亦然（通常的流动方向），或者如何插入这一步进入一个基本的 Maven 构建过程。

任何关于从哪里开始的见解都将受到欢迎！谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T19:21:47.347

查看[Zi maven 插件](http://palletops.com/zi-the-maven-plugin-in-clojure/)。您将它指定为子项目中的插件`pom.xml`，然后它填充与 javac 插件在项目其余部分中所做的相同的滚动。项目之外的任何人都不需要知道 Clojure 的存在。

查看[自述文件了解详细信息](https://github.com/pallet/zi)

```
 <build>
  <plugins>
    <plugin>
      <groupId>org.cloudhoist.plugin</groupId>
      <artifactId>zi</artifactId>
      <version>0.5.5</version>
      <executions>
        <execution>
          <id>default-compile</id>
          <goals>
            <goal>compile</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <excludes>
          <exclude>**/test.clj</exclude>
        </excludes>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T23:58:42.550

您可能对我的名为 ring-java-servlet 的库感兴趣。

它提供的是一个已经 AOT 编译的通用 servlet 类，然后可以在 web.xml 中将其声明为常规 servlet。它使用常规的 servlet 初始化参数来声明必须将 servlet 服务调用委托给的处理程序的名称空间和 var 名称。

[https://github.com/laurentpetit/ring-java-servlet](https://github.com/laurentpetit/ring-java-servlet)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:09:11.733

或者你可以看看[maven clojure 插件](https://github.com/talios/clojure-maven-plugin)

# c# - 如何在 C# 中获取我本地时间的 UTC 等价物

> ID：12483084
> 
> 赞同：15
> 
> 时间：2012-09-18T18:45:31.950
> 
> 标签：c#, datetime

我的机器在 PDT 上，如果我说 DateTime.Now，那么我会得到一个本地时间，相当于 2012 年 9 月 18 日上午 6:00:00。我想获得此日期时间实例的 UTC 等效值。UTC 时间将比 PDT 早 7 小时，比 PST 早 8 小时。我想自动考虑夏令时。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-18T18:46:40.637

您可以使用

```
var now = DateTime.UtcNow; 
```

要转换现有的 DateTime，*假设它具有时区信息*，您可以使用[DateTime.ToUniversalTime()](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)。如果您使用例如获取 DateTime 实例

```
var localNow = DateTime.Now;  // Has timezone info 
```

它将有时区信息。如果您创建它，例如使用滴答计数，它将不包含时区信息，除非您明确提供它。

```
var unspecifiedNow = new DateTime(someTickCount); // No timezone info 
```

值得一提的是，.NET 中的时区处理并不是最佳的。如果您需要做任何涉及时区的详细操作，您可能希望查看[Noda Time](http://code.google.com/p/noda-time/)（[Jon Skeet的一个项目）。](https://stackoverflow.com/users/22656/jon-skeet)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-18T18:48:48.203

使用日期时间。[ToUniversalTime](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-18T18:49:13.290

如果要将任何日期从您的时区转换为 UTC，请执行以下操作：

```
TimeZone.CurrentTimeZone.ToUniversalTime(myLocalDateTime) 
```

如果要将其从 UTC 转换回来：

```
TimeZone.CurrentTimeZone.ToLocalTime(myUtcDateTime) 
```

# html - 使用 css 设置段落元素的样式

> ID：12483085
> 
> 赞同：-2
> 
> 时间：2012-09-18T18:45:35.197
> 
> 标签：html, css

出于某种原因，我的文字上写着“让这张照片成为片刻？” 溢出而不显示正确？我可能做错了什么？

这是我的来源和 JSFiddle：

[http://jsfiddle.net/tPSfy/](http://jsfiddle.net/tPSfy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:52:20.060

而不是宽度：70px

```
#share-action.moment p
    {
    ...
    width: auto;
    ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:17:30.547

您需要从以下 CSS ID (#share-action.moment p & #share-action p) 中删除宽度，检查以下代码。固定宽度是其格式不正确的原因。

```
#share-action.moment p {
    color: #444444;
    float: left;
    font-family: Verdana,Geneva,sans-serif;
    font-size: 12px;
    line-height: 20px;
    margin: 0;
    padding: 0;
 /*   width: 70px; */
}
#share-action p {
    float: left;
    font-family: Verdana,Geneva,sans-serif;
    font-size: 12px;
    line-height: 20px;
    margin: 0;
    padding: 0;
 /*   width: 70px; */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:48:26.167

为了快速修复，您可以将`p`标签替换为`span`标签，如果您想将其保留`p`在其中，请删除 的宽度`70px`，这就是将文本推到 div 下方的原因。

```
#share-action.moment p /* remove width or place width: auto */ 
```

进一步检查，你有两个`share-action` `ids`是不允许的；`ids`是独一无二的，`classes`可以重复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:48:43.023

删除`<p>`周围的文本，或将`width`分配更改为`<p>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T18:49:48.157

它是 float:left 所以它的大小对其容器没有影响。您可以添加一个空元素`clear:both`来扩展容器

# vb.net - 我需要帮助将 VB.Net 代码转换为 VBA

> ID：12483086
> 
> 赞同：0
> 
> 时间：2012-09-18T18:45:36.600
> 
> 标签：vb.net, vba, powerpoint

我在幻灯片中插入了一个列表视图控件。在下一步中，我尝试使用以下代码显示所有文件和文件夹 + 图标：

```
For Each fileName In IO.Directory.GetFiles("C:\")
    ImageList21.Images.Add (Icon.ExtractAssociatedIcon(fileName))
    ListView31.Items.Add (system.IO.Path.GetFileName(fileName)) , _
        ImageList21.Images.Count - 1)
Next fileName 
```

它在 Visual Studio 2008 上完美运行，但在 VBA（使用 VB6）上，我得到了很多错误，例如：

> 对于每个控制变量必须是变体或对象

还有，这行代码变红了，报错

```
ListView31.Items.Add (system.IO.Path.GetFileName(fileName)) , ImageList21.Images.Count - 1) 
```

> 预期：语句结束

谁能解释如何将代码转换为 VB6/VBA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:54:42.100

尝试使用 FileSystemObject。 [在 MSDN 上](http://msdn.microsoft.com/en-us/library/aa711216%28v=VS.71%29.aspx)

这是与您的 VB.NET 代码等效的 VBA（使用 FSO）：

```
Dim fso, objFolder, objFile, strTemp
Set fso = CreateObject("Scripting.FileSystemObject")
Set objFolder = fso.GetFolder("c:\")
For Each objFile in objFolder.Files
    'might need some other VBA call to extract an icon from these files
    'ImageList21.Images.Add Icon.ExtractAssociatedIcon(objFile.Name)
    ListView31.Items.Add objFile.Name, ImageList21.Images.Count - 1)
Next 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-18T20:12:40.330

这看起来像 VB.NET 代码。VBA 文件处理例程非常简单，但是您可以通过添加对它的引用从 VBA 调用 FileSystemObject。

您需要添加对“Microsoft Scripting Runtime”的引用。您可以在我相信的 VB 编辑器中执行此操作（已经有一段时间了）。

tgolisch 的代码示例应该是一个很好的起点。只要确保你有参考集。

# ruby-on-rails - Rails_Admin - 如何在 Post 视图中更改文本字段的大小

> ID：12483088
> 
> 赞同：7
> 
> 时间：2012-09-18T18:45:47.223
> 
> 标签：ruby-on-rails, ruby, rails-admin

Rails Admin 中帖子“正文”上输入区域的默认高度非常小。我想弄清楚如何增加高度。有什么建议么？

```
config.model Post do
 label 'Blog'
 weight 0
 edit do
   field :user
   field :title
   field :body_format
   field :body do 
     (something here?)
  end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T01:45:54.580

```
configure :description do
  html_attributes rows: 20, cols: 50
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-04T20:58:09.367

在 Rails Admin 中增加文本字段长度的另一种方法是：

```
field :description, :text do
  html_attributes do
    {:maxlength => 600}
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:57:38.470

它与您的模型没有任何关系，您需要做的是更改该元素的 CSS。许多 Rails 引擎倾向于对您“隐藏” css，但通常最好不要管它们，并在您自己的 custom.css 文件（或 custom.css.scss，如果您使用 SASS）中进行更改。

最简单的方法是在 Chrome 中查看页面，右键单击“body”元素，当弹出菜单显示时，转到 Inspect Element。Chrome 开发者工具窗口将在下方打开，该元素将突出显示。查看右侧的 css 类，看看调用的是什么。

进入您的 custom.css 文件并编写该 css 类的新版本。您可能会使用完全相同的名称，但最好编写自己的类并将其添加到该特定 html 元素，否则您将覆盖比您想要的更多的名称。

```
input, textarea .yourclassname {
  height: 200px;
} 
```

如果这样的事情不起作用。添加！重要。（如果不需要，最好将其排除在外。）

```
input, textarea .yourclassname {
  height: 200px !important;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-14T21:04:29.653

如果是文本字段，你会这样做

```
field :permalink do
  { max_length: 1000 }
end 
```

在文本区域的情况下

```
field :description do
  html_attributes rows: 5, cols: 100
end 
```

正如我为自己的网站所做的那样，即[https://www.wiki11.com](https://www.wiki11.com) 希望这会对您有所帮助。请记住，由于文本字段只能包含 255 个字符，因此它不能达到文本区域的宽度。为了达到文本区域的宽度，您需要更改其字符的长度或使其成为文本区域。

# django - 多对多过滤器的可读性或效率

> ID：12483099
> 
> 赞同：0
> 
> 时间：2012-09-18T18:46:54.083
> 
> 标签：django

要检查某个东西是否是多线程的成员，我有两个选择：

```
if something.members.filter(username = user.username).count() > 0: 
```

或者

```
if user in something.members.all(): 
```

第二个对我来说更具可读性，但第一个似乎更有效率。我应该做哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:00:22.113

我宁愿这样做：

```
something.members.filter(username=user.username).exists() 
```

如果您的模型允许，甚至类似（更快）：

```
something.members.filter(user=user).exists() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:00:05.600

这样做更*pythonic*：

```
if something.members.filter(username = user.username): 
```

# node.js - 使用毫秒设置日期

> ID：12483100
> 
> 赞同：7
> 
> 时间：2012-09-18T18:46:54.380
> 
> 标签：node.js, express

我目前在客户端有一个日期选择器。选择日期后，以毫秒为单位的日期将发送到我的节点应用程序。问题是我得到新日期的无效日期（毫秒）

发送的毫秒数看起来像这样（1347433200000）我的代码是休闲

```
app.get('/dashboard/date/:date', function(req, res){
    console.log(new Date(req.params.date));
    var start = new Date(req.params.date);
    var end = new Date(req.params.date).add({hours:23, minutes:59, seconds: 59, milliseconds: 999});
    console.log(start);
    console.log(end);

    Appointments.find({'scheduled' : {"$gte": start, "$lt": end}}, function(err, list){
        res.render('templates/list',{ layout: false, appointments: list });
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T18:58:35.697

`req.params.date`是一个字符串，因此您需要在将其传递给`Date`构造函数之前将其转换为数字。试试这个：

```
var start = new Date(Number(req.params.date)); 
```

# android - 通过网络打印到 Android 设备

> ID：12483105
> 
> 赞同：1
> 
> 时间：2012-09-18T18:47:11.497
> 
> 标签：android, printing, windows-xp, port, network-printers

运行 Jelly Bean 的 Android 手机是否可以模拟网络可发现打印机？

手机上的应用程序的目标是模拟打印机并让 Windows XP 计算机通过网络发现打印机。我将添加打印机并使用通用文本打印机对其进行配置。当文件通过网络发送到手机时，应用程序将接收文件并将其作为文件存储在存储卡上。

有谁知道这是否可能？

# extjs - extjs 与 Ext.Create 一起闪烁，如何避免？

> ID：12483106
> 
> 赞同：0
> 
> 时间：2012-09-18T18:47:12.900
> 
> 标签：extjs, jetty

当我刷新它时使用下面的代码（使用 Jetty/Chrome FYI）我看到：

你好世界
你好！！！

使用默认的 css。

然后出现延迟和“单击我”按钮以及引用的 css。知道为什么吗？如您所见， myDiv 被立即添加。如果我注释掉 onDocumentReady 块，那么页面会立即出现。

我认为这一切都是为 Ext 按钮引入额外的 js，但无论出于何种原因，我都想知道实现稳定页面刷新的好方法。我知道我可以将 body 设置为 diplay:none 或 visibility:hidden 并在最后打开它，但想知道是否还有其他更好的方法？

谢谢。

* * *

```
<html>
<head>
    <title>Hello Ext</title>

    <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="extjs/ext-debug.js"></script>
</head>
<body>
<h1>Hello World</h1>
</body>
<script>
    var myDiv=Ext.DomHelper.append(Ext.getBody(), {tag: 'div', cls: 'new-div-cls', id: 'new-div-id',html:'Hello!!!'});

    Ext.onDocumentReady(function(){
    var button=Ext.create('Ext.Button', {
        text: 'Click me',
        renderTo: Ext.getBody(),
        handler: function() {
            alert('You clicked the button!');
        }
    })
    })
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:54:58.377

使用 Ext.onReady 代替 Ext.onDocumentReady 应该可以解决问题，但如果 Ext 写入所有内容，大多数 Ext 应用程序工作得最好。当 JavaScript 库加载时，Ext 将样式添加到整个文档。

在标题标签下方，您可以添加一个样式标签，在加载和应用 Ext 之前阻止文本显示。

在您的 html 标头中：

```
<title>Hello Ext</title>

<style>
    body {
        color: #fff;
    }
</style> 
```

在您现有的脚本标签中：

```
Ext.onReady(function(){
    var myDiv = Ext.DomHelper.append(Ext.getBody(), {
         tag: 'div', 
         cls: 'new-div-cls', 
         id: 'new-div-id',
         html:'Hello!!!'
    });

    var button = Ext.create('Ext.Button', {
        text: 'Click me',
        renderTo: Ext.getBody()
    });

    button.on('click', function() {
        alert('You clicked the button!');
    });

}) 
```

# php - 如何在 MySQL 中使用外键进行查询？

> ID：12483109
> 
> 赞同：17
> 
> 时间：2012-09-18T18:47:29.747
> 
> 标签：php, mysql, foreign-keys, mysqli

现在我有一个小型数据库，其中有两个表，如下所示：

```
 users table
    ====================
    id  name   status_id
    1   Bobby  3
    2   James  2 
```

和

```
 statuses table
    =============
    id  value
    1   Waiting
    2   Approved
    3   Other 
```

status_id 设置为状态表中 id 的外键约束。我的查询看起来像这样：

```
SELECT *
FROM `users`
WHERE `status_id` = 2"; 
```

当我显示`$row['status_id']`它的输出`2`但我希望它显示`Approved`为时，实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-18T18:51:55.270

```
SELECT u.*, s.*
FROM users u
    inner join statuses s on u.status_id = s.id
WHERE u.status_id = 2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T18:52:20.700

你需要的是这个

```
SELECT *
FROM `users`
JOIN statuses ON statuses.id = users.status_id
WHERE `status_id` = 2"; 
```

然后你可以参考

```
$row['value']; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T18:49:39.607

最简单的方法是通过连接：

```
select *
from User u join Status s on u.status_id = s.id; 
```

（如果您根本不需要 status-id，您可以在 select-clause 中指定您想要的列。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:50:01.290

您的用户表中没有已批准的值。它在您的状态表中。当您请求 status_id 时，您将从该查询中获取该值。我认为你必须做一个`JOIN ON status_id`才能完成这项工作。或者进行第二次查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T18:51:12.263

你不是在这里[加入：](http://www.w3schools.com/sql/sql_join.asp)

```
SELECT *
FROM Users U, Statuses S
WHERE S.id=U.status_ID
AND status_id = 2; 
```

# database - 默认 getdate() 值错误 SQL AZURE

> ID：12483118
> 
> 赞同：1
> 
> 时间：2012-08-14T15:29:14.450
> 
> 标签：database, sql, datetime, azure

`Save Changed`当我在 SQL AZURE 上的表中尝试时收到此错误

> 应用更改时遇到错误。执行 Transact-SQL 语句时发生异常：

```
ALTER TABLE [dbo]. [TbUser] 
  ALTER COLUMN [DtUpdated] DATETIME NOT NULL 
```

> 无法将值`NULL`
> 插入列`'DtUpdated', table 'AudiData.dbo. TbUser';`
> 不允许空值。`UPDATE`失败。
> 该语句已终止。

我将默认值`getdate()`放在设计器页面`management portal - sql database`中。

如何将`getdate()`默认值`null`放在sql azure的列中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:00:31.717

该表可能`null`在该列中有值。`not null`在应用约束之前删除或更新它们。

# c# - 如何检查特定字符串是否在存储在 SQL 数据库中的一系列字符串中

> ID：12483120
> 
> 赞同：-1
> 
> 时间：2012-09-18T18:48:07.690
> 
> 标签：c#, sql

所以实际上我正在使用 TCP/IP 编写客户端/服务器程序。在这种情况下，客户端可以上传文件并选择文件是共享给公共、群组还是私人。问题是当客户选择将文件共享给组（其他客户/成员）时。作为初学者，我不知道将包含所选成员名称的字符串数组存储到 SQL 数据库中。所以，我决定创建一个长字符串，如下例所示。

```
//assume this is the long string stored in column called "member"

 //this is row1// "Lexus,Mitsubishi,Bmw,Audi,Ford"

//this is row2// "12345678,456789,54321,87654321,Lexus" 
```

然后我想检查“雷克萨斯”是否在上面的那些字符串中。如果它存在，那么我将显示这两行。

所以重点是，我真的很想知道在这种情况下如何编写 SQL Query，也许你有解决这个问题的最好方法。

感谢您帮助我，目前它正在与“LIKE”运营商合作。

```
 SELECT * FROM TABLENAME WHERE ROW1 LIKE '%LEXUS%' 
```

但我认为即使它正在工作，问题仍未解决，因为我仍在使用单个长字符串。我同意 Tim 的建议，即我需要创建另一个表，但我认为我需要更多关于使用主键和外键连接两个表的教程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:54:18.170

不幸的是，当您决定存储一个长字符串时，您犯了一个错误。在单个列中存储多个数据是违反数据库规范化原则的。

正确的方法是，每个单独的值都放在一个表中自己的行中，该表只是为了存储这些值而创建的。该表中的每一行都有两个值，一个指向原始表的键值和一个您存储的单个文本值。

最好的解决方案是尽早重构您的数据库，以避免将更多的编程时间投入到只会让您头疼的设计中。

如果这不可能，我们需要更多地了解您正在使用的数据库产品。其中一些已经内置函数来处理这种查询（例如 MySQL 中的 FIND_IN_SET），但这些变通办法从来没有良好的性能，并且从一个产品到另一个产品都是非标准的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:51:28.483

您是否尝试过使用`LIKE`运营商？

`SELECT * FROM TABLENAME WHERE ROW1 LIKE '%LEXUS%'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:53:19.720

你可以试试`LIKE`

```
SELECT * FROM TABLE WHERE COLUMN LIKE '%Lexus%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:14:13.810

探索 SQL**全文搜索**并将成员列声明为全文列，然后使用 WHERE CONTAIN 谓词在该全文列中查找某些字符串。使用链接

```
msdn.microsoft.com/en-us/library/ms142571.aspx 
```

# python - Pandas read_csv 索引异常

> ID：12483121
> 
> 赞同：0
> 
> 时间：2012-09-18T18:48:17.160
> 
> 标签：python, csv, pandas, import-from-csv

我正在使用 pandas 函数`read_csv`来读取没有索引列的 CSV。

```
read_csv("file.csv", header=1) 
```

我期待 PANDAS 会根据[文档为每一行生成一个索引](http://pandas.pydata.org/pandas-docs/dev/io.html#csv-text-files)

> index_col：列号、列名或列号/名称列表，用作生成的 DataFrame 的索引（行标签）。默认情况下，它将不使用任何列对行进行编号，除非数据列比标题多一个，在这种情况下，第一列被视为索引。

但是，在加载它抛出的文件时，

```
Exception: Reindexing only valid with uniquely valued Index objects 
```

我不知道为什么会这样。是什么导致了这个异常？

我也尝试过传递`skiprows`，`nrows`并且发生了同样的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:05:32.283

问题是该`header`参数不是`True`/`False`类型参数。相反，它指定标题的行号。由于它被指定为`1`使用第二行作为标题并考虑到该行包含实际数据，因此这些值不一定是唯一的。

将命令更改为

```
read_csv("file.csv") 
```

或者

```
read_csv("file.csv", header=0) 
```

解决问题。这是一个“duh”的时刻，但习惯于 RI 错误地认为`header=1`是指定读取标题。啊。

为了将来参考，例外

```
Reindexing only valid with uniquely valued Index objects 
```

与不唯一的标头值有关。

# bash - 在同一行显示 IP 和 ns[1,2].* 的脚本

> ID：12483123
> 
> 赞同：1
> 
> 时间：2012-09-18T18:48:25.837
> 
> 标签：bash, for-loop, dig

`dig +trace -x`我在一个名为“ips”的文件中拥有我想要的所有 IP 。

我只想查看 IP 的 ns1（和/或）ns2 记录，并将 IP 和 ns1 或 ns2 记录输出在同一行，如下所示：

```
1 - $IP - $NS
2 - $IP - $NS
etc. 
```

现在，我只有一个我称之为“digdug”的脚本，它看起来像这样......

```
for i in `cat ips`
do
dig +trace -x $i | tail -n7
done 
```

然后我可以通过运行看到它正在挖掘的 IP：`bash -x digdug`

但是，我真正需要的是 IP 和 ns 记录在一行，然后列表中的下一个 IP 和 ns 记录在下一行。然后下一个以此类推。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:28:08.683

bash 4 中的另一个解决方案：

```
while read ip; do
    while read ns; do
       echo -e "$ip\t$ns";
    done < <(dig +trace -x $ip | grep -i "ns[12]")
done < ips 
```

我更喜欢使用，`while TEST; do CMD; done < file`因为它没有分叉子外壳。

这`< <(cmd)`是用于功能替换。与`<`重定向一样，bash 不会创建子 shell。

例如，这是 google IP (173.164.67.9[1-5]) 的结果：

```
173.194.67.91   194.173.in-addr.arpa.   86400   IN      NS      NS1.GOOGLE.COM.
173.194.67.91   194.173.in-addr.arpa.   86400   IN      NS      NS2.GOOGLE.COM.
173.194.67.92   194.173.in-addr.arpa.   86400   IN      NS      NS2.GOOGLE.COM.
173.194.67.92   194.173.in-addr.arpa.   86400   IN      NS      NS1.GOOGLE.COM.
173.194.67.92   67.194.173.in-addr.arpa. 60     IN      SOA     ns1.google.com. dns-admin.google.com. 1497777 21600 3600 1209600 10800
173.194.67.93   194.173.in-addr.arpa.   86400   IN      NS      NS2.GOOGLE.COM.
173.194.67.93   194.173.in-addr.arpa.   86400   IN      NS      NS1.GOOGLE.COM.
173.194.67.94   194.173.in-addr.arpa.   86400   IN      NS      NS2.GOOGLE.COM.
173.194.67.94   194.173.in-addr.arpa.   86400   IN      NS      NS1.GOOGLE.COM.
173.194.67.95   194.173.in-addr.arpa.   86400   IN      NS      NS1.GOOGLE.COM.
173.194.67.95   194.173.in-addr.arpa.   86400   IN      NS      NS2.GOOGLE.COM. 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:32:45.093

也许是这样的？

```
for ip in `cat ips`; do
  ns=`dig +trace -x $ip | tail -n7 | awk '/NS/ {print $NF}'`
  echo "$ip - $ns" | tr '\n' ' '
  echo ""
done 
```

# android - 游标不返回列值

> ID：12483132
> 
> 赞同：0
> 
> 时间：2012-09-18T18:49:04.497
> 
> 标签：android, sqlite

即使光标中有数据，我也会收到带有“prntln 需要消息”错误的 NullPointerException。我可能在这里缺少什么？

```
 databaseHelper = new DatabaseHelper(this);
 db = databaseHelper.getWritableDatabase();

 Cursor c = db.rawQuery("SELECT name, group FROM " +
             "groupWorksheet", null);

 if (c != null ) {

 if  (c.moveToFirst()) {
     Log.v(TAG, "has data");
       do {
            String myName = c.getString(c.getColumnIndex("name"));
            Log.v(TAG, myName);

       }while (c.moveToNext());
 }
 }else {

Log.v(TAG, "no data");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:54:39.533

根据文档[Cursor.getString()](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29)可以返回 null。

您需要检查结果是否为空，如果是，请正确处理。仅知道行存在并不能验证数据是否存在于行本身中。

# php - php mod_rewrite 查询字符串成真字

> ID：12483134
> 
> 赞同：1
> 
> 时间：2012-09-18T18:49:07.957
> 
> 标签：php, mod-rewrite

我有一个`mysite.com/?local=1`本地查询字符串从 1 到 600 不等。

每个本地都是一个城市名称。如何重写 url 以使其显示`mysite.com/cityname/`。我不介意为每个场景编写一个场景，例如 if (local ==1){cityname = boston;}。

我所要求的甚至可能吗？所以我想把`mysite.com/?local=1`它变成`mysite.com/boston/`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:50:32.510

如果您希望 URL 在浏览器中实际更改，则需要重定向而不是重写。在这种情况下，您可以从号码中查找名称并`header("Location...");`根据需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:05:14.463

索引.php：

```
<?php
$map = array(
    1 => 'city',
    2 => 'Portland',
    3 => 'Kaunas',
    4 => 'Hokaido',
    .....
);
if (isset($_GET['local']) && intval($_GET['local']) < 600 && intval($_GET['local']) > 0) {
    header('Location: mysite.com/' . $map[intval($_GET['local'])]);
    die(); // Redirect to use the pretty url
}
$path = explode('/', explode('?', $_SERVER['REQUEST_URI'])[0]); // might need to expand if php version < 5.4
$city = $path[1]; 
```

.ht 访问：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [PT,L]
</IfModule> 
```

Basically what this combo does is if a GET string with variable 'local' is passed it will do a redirect with the city id converted to a name. After that you just take the query string and do whatever you want with it

# asp.net-webpages - 方法“get_IsBindingRedirectSupported”没有实现

> ID：12483136
> 
> 赞同：6
> 
> 时间：2012-09-18T18:49:13.623
> 
> 标签：asp.net-webpages

因此，我尝试在 Visual Studio 2012 中创建一个 ASP.NET 网站（Razor v2）网站，但在运行该网站时出现此错误。

```
Method 'get_IsBindingRedirectSupported' in type 'System.Web.WebPages.Administration.PackageManager.WebProjectSystem' from assembly 'System.Web.WebPages.Administration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' does not have an implementation. 
```

在尝试与我亲爱的朋友 Google 找到任何有用的东西后，我不知所措。

有谁知道这个错误的原因以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-09T21:08:43.533

将 NuGet.Core.dll 从版本 1.6.30117.9648 更新到版本 2.11.1.812 后，我开始收到此错误

补救措施（由[Kirschstein](https://stackoverflow.com/users/15691/kirschstein)建议）是从我的 bin 目录中删除 System.Web.WebPages.Administration.dll 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T20:40:37.130

当遇到问题时，这些是我为解决它们而采取的步骤。

1.  从您的项目中删除 System.Web.WebPages.Administration 引用。
2.  导航到项目中的此文件夹：YourProject/YourProject 并找到 xml 配置文件 Packages.
3.  打开该文件并删除包含 System.Web.WebPages.Administration 的行。
4.  导航到解决方案中的 Packages 文件夹，找到名为“Microsoft.AspNet.WebPages.Administration*”/lib/net40 的文件夹。
5.  删除 System.Web.WebPages.Administration.dll

# mysql - 使用列数据作为键的数组的 Perl 哈希

> ID：12483138
> 
> 赞同：1
> 
> 时间：2012-09-18T18:49:16.463
> 
> 标签：mysql, arrays, perl, hash

我的 SQL 数据库有三列；`Key`, `Topic`, 和`Value`. 存在具有不同值的重复主题。这是一个示例：

```
 Key    Topic  Value
 -----  -----  -----
 1      Book      20
 2      Toy       10
 3      Toy       30
 4      Pet      100
 5      Book      15
 .      .          .
 .      .          . 
```

使用 Perl，我如何从列`Topic`( `%Topic`) 创建一个散列，该列使用每个唯一键`Topic`作为数组，其元素具有相应的值：`@Book = 20, 15, ...`, `@Toy = 10, 30, ...`, `@Pet = 100, ...`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:10:25.447

我认为您想要一个由主题键控的哈希，其中值是对具有该主题值的数组的引用。

```
my %values_by_topic;
my $sth = $dbh->prepare('SELECT Topic, Value FROM Table');
$sth->execute();
while (my $row = $sth->fetch()) {
   my ($topic, $value) = @$row;
    push @{ $values_by_topic{$topic} }, $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:09:16.990

mysql端：

```
select Topic, group_concat(Value) as Value
from t
group by Topic 
```

# python - 如何关闭日志语句而不从代码中删除它们

> ID：12483144
> 
> 赞同：9
> 
> 时间：2012-09-18T18:49:54.097
> 
> 标签：python, logging, xdebug

如果整个代码库中都有日志记录语句，我该如何设置记录器，以便在将代码部署到生产环境时不必注释掉对记录器的每个调用？

这是我当前的代码：

```
import logging

logging.basicConfig(filename='./example.log', level=logging.DEBUG, 
                    format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',
                    datefmt='%m-%d %H:%M')

logging.debug('debug failed')
logging.info('info failed')
logging.warning('A warning') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:07:11.487

除了使用 之外`basicConfig`，您还可以根据任何条件使用所需的处理程序更明确地设置记录器。

```
import logging

log = logging.getLogger("FOO")
log.setLevel(logging.DEBUG)

# needs a handler
log.info('info')
#No handlers could be found for logger "FOO"

ch = logging.StreamHandler()
log.addHandler(ch)
log.info('info')
# info

log.removeHandler(ch)

noop = logging.NullHandler()
log.addHandler(noop)
# nothing happens here
log.info('info') 
```

如果您在调试模式下运行，您可以有一个条件语句来添加您想要的处理程序，或者您可以添加一个`NullHandler`仅吸收日志消息的处理程序。您还可以单独配置每个处理程序的级别，以便您始终看到警告及以上。除了主记录器之外，每个处理程序都可以有自己的级别。

您可以[参考](http://docs.python.org/howto/logging.html#logging-basic-tutorial)有关如何更具体地使用级别、处理程序和格式的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T01:16:36.027

这里有几个非常简单的答案。第一种是简单地注释掉`basicConfig(...)`语句。这将产生不设置任何记录器、处理程序或格式化程序的效果，这意味着您的 debug()、info() 等调用将实际上是无操作的。

另一个简单的答案是将`basicConfig()`调用中的日志记录级别设置为高于`DEBUG`. `CRITICAL + 1`将确保您永远不会看到日志消息。

但是，您提到了将这段代码投入生产的一些事情，所以您可能想要做的是提供`-q`命令`-v`行选项（假设这是一个 CLI 工具）。我通常的方法是从`WARNING`级别开始，每次`-q`通过增加过滤级别来实现更安静的日志记录。相反，对于每个`-v`，都朝着更详细的日志记录方向发展。这是一段代码，正是这样做的。

```
from argparse import ArgumentParser
from logging import basicConfig, CRITICAL, ERROR, WARNING, INFO, DEBUG

parser = ArgumentParser()
parser.add_argument("-v", "--verbose", action="count")
parser.add_argument("-q", "--quiet", action="count")

arguments = parser.parse_args()

raw_log_level = 2 + (arguments.verbose or 0) - (arguments.quiet or 0)
if raw_log_level <= 0: 
    log_level = CRITICAL
elif raw_log_level == 1:
    log_level = ERROR
elif raw_log_level == 2:     # default
    log_level = WARNING
elif raw_log_level == 3: 
    log_level = INFO
else:         
    log_level = DEBUG

basicConfig(level=log_level) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:05:16.963

有记录级别。根据日志记录级别的严重性，它将打印它。

```
Level   Numeric value
CRITICAL    50
ERROR   40
WARNING     30
INFO    20
DEBUG   10
NOTSET  0 
```

根据日志记录级别，它将打印语句。

您在此处指定的级别是 level=logging.DEBUG。所以除了未设置的日志级别之外的所有日志级别都应该打印出来。如果您只想打印关键级别，请更改 level=logging.CRITICAL

[http://docs.python.org/release/2.5/lib/module-logging.html](http://docs.python.org/release/2.5/lib/module-logging.html)有更多信息

# asp.net - 在 asp.net 中是否可以部署 JIT 编译代码？

> ID：12483145
> 
> 赞同：0
> 
> 时间：2012-09-18T18:49:56.283
> 
> 标签：asp.net, jit

我知道 JIT 代码是特定于机器的。是否可以在已发布的机器上创建 JIT 代码并让 IIS 使用它（而不是 dll）？我问的原因是每次应用程序池重新启动时，应用程序的加载都会出现延迟。这种延迟是由于 JIT 编译的代码正在加载到工作进程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:45:07.530

ASP.NET 很棒，除了 looooooooooong 应用程序初始化时间 - 但是所说的时间不仅仅是 JIT 编译，还有其他延迟，不幸的是无法解决。您会发现没有单个 *.aspx 文件（例如原始 IHttpHandler）的 ASP.NET 应用程序仍然有很长的初始化时间。

唯一的解决方案是变通方法：获取计划任务（`cron`*nix 术语中的作业）或第三方网络轮询服务，每隔一段时间向您的网站发送无害的 GET 请求。IIS 也（有）提供了一个预热扩展，但由于某种原因它已经离开了。

# emacs - 为自定义标题自定义速度栏

> ID：12483148
> 
> 赞同：0
> 
> 时间：2012-09-18T18:50:01.577
> 
> 标签：emacs, emacs-speedbar

我一直在保存带有以下标题的注释文件

```
＃＃＃ - - 部分
##-- 小节
#- 小节

```

有没有办法自定义速度条来导航这些？现在 Mx speedbar 只是给我目录列表。到目前为止，我一直为此目的使用“Mx 发生 #-”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:07:32.947

您可以使用简单的派生模式和 imenu。例如，假设您的笔记位于扩展名为“.notes”的文件中：

```
(define-derived-mode notes-mode text-mode "notes"
  "Mode for editing my notes."
  (setq imenu-generic-expression (list '(nil "^\\s-*[#]+[-]+\\s-*\\(.+\\)" 1))))

(add-to-list 'auto-mode-alist '("\\.notes" . notes-mode))

(eval-after-load "speedbar"
  '(speedbar-add-supported-extension ".notes")) 
```

正则表达式有点粗糙，但你明白了。如果你想让它们脱颖而出，你也可以对标题进行字体锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:19:38.963

添加`-*- mode: outline-mode; outline-regexp: "#+" -*-`文件的第一行（连同`(eval-after-load "speedbar" '(speedbar-add-supported-extension ".notes"))`scottfrazer 建议的），您应该已设置好。

但正如 event_jr 所提到的，您最好用“.org”扩展名重命名文件并将“#”字符替换为“*”。

组织模式基本上是大纲模式的（更大的）超集。

# javascript - 在 Dojo 请求错误时访问 http 正文

> ID：12483149
> 
> 赞同：3
> 
> 时间：2012-09-18T18:50:09.060
> 
> 标签：javascript, ajax, dojo, request

我的网络服务将有关发生错误的详细信息放在 http 正文中。如何在 dojo 请求中访问此详细信息。

例如，http 错误如下所示：

```
HTTP/1.1 500 Internal Server Error
Transfer-encoding: chunked
Content-type: application/json
Date: Tue, 18 Sep 2012 18:47:31 GMT

15
This is my exception!
0 
```

我的 Dojo 请求如下所示：

```
require(["dojo/dom", "dojo/on", "dojo/request",
        "dojo/json", "dojo/domReady!"],
    function(dom, on, request, JSON){
        // Results will be displayed in resultDiv
        var resultDiv = dom.byId("errorResult");

        // Attach the onclick event handler to the makeRequest button
        on(dom.byId('errorButton'),"click", function(evt){
            request.get("./rest/test/error", {
                // Parse data from JSON to a JavaScript object
                handleAs: "json"
            }).then(function(data){
                resultDiv.innerHTML = "Username: " + data.name + "</br>Role:" + data.role;
            },
            function(error){
                // Display the error returned
                resultDiv.innerHTML = error;
            });
        });
    }
); 
```

中显示的错误是：

```
RequestError: Unable to load ./rest/test/error status: 500 
```

我想要的是正文中的文字：

```
This is my exception! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:23:39.350

看看我对[如何检索 AMD 化 Dojo 的 XHR 响应代码（+时间戳）的回答？](https://stackoverflow.com/questions/12154748/how-to-retreive-xhr-response-code-timestamp-of-amdized-dojo/12155418#12155418)

使用`deferred.response.then`代替`deferred.then`：

```
var deferred = request.get("./rest/test/error", { handleAs: "json" });

deferred.response.then(
    // success
    function(response) {
        console.log("data:", response.data);      // parsed json
        console.log("http body:", response.text); // raw text
    },
    // error
    function(error) {
        var response = error.response;
        console.log("http body:", response.text);
    }
); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/SGh5M/](http://jsfiddle.net/phusick/SGh5M/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:31:02.133

当我将dojo 用于Ajax 请求时，错误方法总是有多个参数。我认为第一个参数是发送的请求，第二个参数是响应或异常。

尝试在您的方法中添加第二个参数，看看它是否包含您需要的内容。

# ios - 在第一个视图控制器的表视图中显示数组中的数据

> ID：12483158
> 
> 赞同：0
> 
> 时间：2012-09-18T18:50:55.490
> 
> 标签：ios, objective-c, arrays, xml, xcode

我正在尝试将一些 XML 数据解析为一个数组，然后在第一个视图控制器的表视图中显示该数组。可以看到我已经把数据解析成我需要的了，然后就全部设置在数组中了。我只是不知道如何让它发送到 GUI 中的表视图。这是我的数组：

```
 NSString* mountPoint1 = [mountArray objectAtIndex: 11];
    NSString* mountPoint2 = [mountArray objectAtIndex: 17];
    NSString* mountPoint3 = [mountArray objectAtIndex: 23];
    NSString* mountPoint4 = [mountArray objectAtIndex: 29];
    NSString* currentSong1 = [mountArray objectAtIndex: 16];
    NSString* currentSong2 = [mountArray objectAtIndex: 22];
    NSString* currentSong3 = [mountArray objectAtIndex: 28];
    NSString* currentSong4 = [mountArray objectAtIndex: 34];
    NSString* listeners1 = [mountArray objectAtIndex: 14];
    NSString* listeners2 = [mountArray objectAtIndex: 20];
    NSString* listeners3 = [mountArray objectAtIndex: 26];
    NSString* listeners4 = [mountArray objectAtIndex: 32];
    NSLog(@"mountpoint1 should be dev = %@", mountPoint1);
    NSLog(@"All data = %@", mountArray);
    // First mount is 11
    NSLog(@"First mount point = %@", mountPoint1);
    NSLog(@"Currrent Song playing on mount Dev = %@", currentSong1);
    NSLog(@"Currrent listeners on mount Dev = %@", listeners1);
    NSLog(@"Second mount point = %@", mountPoint2);
    NSLog(@"Currrent Song playing on mount Metal = %@", currentSong2);
    NSLog(@"Currrent listeners on mount Metal = %@", listeners2);
    NSLog(@"Third mount point = %@", mountPoint3);
    NSLog(@"Currrent Song playing on mount OrienLive = %@", currentSong3);
    NSLog(@"Currrent listeners on mount OrienLive = %@", listeners3);
    NSLog(@"Fourth mount point = %@", mountPoint4);
    NSLog(@"Currrent Song playing on mount Rock = %@", currentSong4);
    NSLog(@"Currrent listeners on mount Rock = %@", listeners4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:03:32.173

你到底想做什么？您可以执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //.. after initial setup
    NSInteger position = indexPath.row * 6;
    cell.mountLabel.text = [self.mountArray objectAtIndex:position + 11];
    cell.songLabel.text = [self.mountArray objectAtIndex:position + 16];
    cell.listenerLabel.text = [self.mountArray objectAtIndex:position + 14];
    //.. continue with other setup
} 
```

类似的东西？

# jquery - 在特定的 html 元素之间切换

> ID：12483160
> 
> 赞同：1
> 
> 时间：2012-09-18T18:51:01.943
> 
> 标签：jquery, html

我在尝试`<p>`在 JQuery 中的两个标签之间切换时遇到问题，我有一个看起来像...的标记

```
<td>
   <p>paragraph 1 <a class="descriptionToggle">Click</a></p>
   <p style="display:none;">paragraph 2 <a class="descriptionToggle">Click</a</p>
</td>

<td>
   <p>paragraph 1 <a class="descriptionToggle">Click</a></p>
   <p style="display:none;">paragraph 2 <a class="descriptionToggle">Click</a</p>
</td> 
```

每次单击 .descriptionToggle 链接时，它都应该在相邻`<p>`标签之间切换，我尝试了以下...但它不起作用...

```
$("a.descriptionToggle").on("click",function(){
   $(this).parent().parent().("p").toggle();
}); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:53:07.707

你必须在`.`. 用于[`.find()`](http://api.jquery.com/find/)获取后代元素

```
$("a.descriptionToggle").on("click",function(){
   $(this).parent().parent().find("p").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:52:54.177

试试这个：

```
$("a.descriptionToggle").on("click",function(){
   $(this).parents('td').find("p").toggle();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/JJ68d/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T18:53:26.003

试试这个你的切换：

`$(this).parent().parent().find("p").toggle();`

小提琴在行动中展示它：http: [//jsfiddle.net/Dwwtk/](http://jsfiddle.net/Dwwtk/)

# php - mysql join 没有正确执行

> ID：12483162
> 
> 赞同：0
> 
> 时间：2012-09-18T18:51:04.800
> 
> 标签：php, mysql, join, left-join

```
$sql = mysql_query("
    SELECT * 
    FROM forum_posts 
    LEFT JOIN mymembers ON forum_posts.post_author_id = mymembers.id 
    WHERE section_id='$sid' ORDER BY date_time DESC LIMIT 25
");
$dynamicList = "";
$numRows = mysql_num_rows($sql);

while($row = mysql_fetch_array($sql)){
    $reply_author_id = $row["post_author_id"];
    $author = $row["username"];
    $id = $row["id"];
    $anon = $row["anon"];
    $post_body=$row["post_body"];
    $post_author_id = $row["post_author_id"];
    $date_time = $row["date_time"];
    $thread_title = $row["thread_title"]; 
```

这是我正在执行的 mysql 查询。问题是表 mymembers 和 forum_posts 都有 id 字段，所以当我使用 $id 并保存“id”时，成员的 id 被存储在其中。以下是我正在显示的代码

```
$displayList .= '<a href="view_thread1.php?id=' . $id .'"> 
```

' . $thread_title 。'' 。$作者。';

我想将 $reply_author 中成员的 id 和线程的 id 保存到 $id 变量中。

有没有一种方法可以在不更改表中的列名的情况下做到这一点。

完成更改查询工作。现在代码看起来像

```
$sql = mysql_query(
"SELECT forum_posts.post_author_id AS post_author_id, forum_posts.id AS id,    mymembers.username, forum_posts.anon,forum_posts.post_body,forum_posts.thread_title, forum_posts.date_time FROM forum_posts LEFT JOIN mymembers ON forum_posts.post_author_id=mymembers.id WHERE section_id='$sid' ORDER BY date_time DESC LIMIT 25"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:54:37.473

最好的做法是列出查询中的所有字段。

而不是使用 SELECT * 将其更改为：

```
SELECT mymembers.id as id, forum_posts.id as fpID, etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:01:26.433

无需更改数据库中的列名，只需在查询中重命名即可：

```
SELECT members.id as reply_author
       members.username,
       [... other membes columns listed as the above ...]
       forum_posts.*
FROM   forum_posts
       LEFT JOIN mymembers
              ON forum_posts.post_author_id = mymembers.id
WHERE  section_id = '$sid'
ORDER  BY date_time DESC
LIMIT  25 
```

# matlab - 在 Octave 中创建分类变量（实现 dummyvar）

> ID：12483164
> 
> 赞同：1
> 
> 时间：2012-09-18T18:51:13.443
> 
> 标签：matlab, octave

因此，在我想传递给八度函数的数据文件中，我有一个分类字段，如下所示：

```
group =

msie-7
msie-8
msie-7
msie-8
msie-9
firefox-15
chrome-21
chrome-21
firefox-15
msie-7
msie-8
msie-9
.. 
```

我想把它变成一系列虚拟变量（类似于 R 中的因子函数）。但由于某种原因，我安装的 Octave 无法识别该`dummyvars`功能。

```
octave-3.2.4.exe:16> dummyvars(group)
error: `dummyvars' undefined near line 16 column 1
octave-3.2.4.exe:16> dummyvar(group)
error: `dummyvar' undefined near line 16 column 1 
```

1.  知道为什么会这样吗？
2.  我将如何编写一个函数来解决这个问题？我有为正则化逻辑回归分析设计的八度函数，但是无法处理分类变量是一个很大的挫折。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-15T18:56:59.953

我通过使用**cat2bin**解决了这个问题。这个函数在 Octave-Forge 的 'nan' 包中可用。

要安装软件包，请使用**pkg install -forge nan**。安装完成后，使用**pkg load nan**加载包。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:54:31.493

`dummyvar`来自 Matlab 统计工具箱。

要了解如何实现类似的东西，请搜索“指标矩阵”。例如：[创建指标矩阵](https://stackoverflow.com/questions/6150174/creating-indicator-matrix/6150845#6150845)

# c# - 解析SQL查询并拉出列名和表名

> ID：12483173
> 
> 赞同：4
> 
> 时间：2012-09-18T18:51:49.517
> 
> 标签：c#, sql, parsing, antlr

我有一个这样的查询脚本：

> SELECT View1.OrderDate,View1.Email,SUM(View1.TotalPayments) FROM dbo.View1 WHERE (View1.OrderStatus = 'Completed') GROUP BY View1.OrderDate,View1.Email HAVING (SUM(View1.TotalPayments) > 75);

有什么方法可以从 SQL 查询中提取一些关键信息？如表名和列名，我有2个问题：

1.  我进行了搜索，发现了一些解析器，例如 ANTLR ，但我找不到解释在 C# 语言中使用此解析器的文档。
2.  有什么方法可以使用 Entity Frame Work 来解析 sql 查询？我的查询是完全动态的，它们是在运行时创建的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:58:00.180

我认为最好的答案是使用 Irony 解析器：http: [//irony.codeplex.com/](http://irony.codeplex.com/)

Hanselman 有一个很好的链接来说明如何使用它来解析 SQL： [http ://www.hanselman.com/blog/TheWeeklySourceCode59AnOpenSourceTreasureIronyNETLanguageImplementationKit.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode59AnOpenSourceTreasureIronyNETLanguageImplementationKit.aspx)

我希望这会有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:33:49.523

您可以使用一些系统表来获取您正在寻找的信息。

```
select p.name ParentTable, r.name ReferencedTable, k.name KeyName
from sys.foreign_keys k
join sys.tables p on k.parent_object_id = p.object_id
join sys.tables r on k.referenced_object_id = r.object_id 
```

根据您的数据库的一致性，您可以对 Key Name 做出假设。因此，如果引用表是 [User]，您可以假设您正在引用 UserId，如果您的表中有多个键，这将不是您要寻找的答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T19:19:26.973

您可以像这样在实体框架中构建动态查询

```
If(case1)
{
    var query = db.x.where(x => x).toList();
}
else
{
   var query = db.x.where(y => y).toList()
} 
```

# ruby-on-rails - 提交远程表单时Rails 3.2下载文件

> ID：12483175
> 
> 赞同：0
> 
> 时间：2012-09-18T18:51:51.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在静态页面上有这个远程表单。

```
<%= form_tag(reports_products_path, :method => "post", :action => "products", :remote => true)  do%>
   <%= submit_tag "Generate Product Report" %>
<% end %> 
```

这是提交该表单时触发的我的控制器操作：

```
def products
  @products = Product.joins(:client).all
  respond_to do |format|
    format.html
    format.pdf
    format.js do
      pdf = PrintedProductPdf.new(@products)
      File.open("public/product_report/product#{Date.today}.pdf", "wb") { |f| f << pdf.render }
      send_data pdf.render, 
        file_name: "public/product_report/product#{Date.today}.pdf",
        :type => "application/pdf", 
        :disposition => "attachment"
  end
end 
```

结尾

单击表单链接时文件会写入。但是，我希望能够在单击表单中的提交按钮时下载文件。发送数据功能好像是把附件发送到啦啦乐园

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:27:32.147

为您的方法尝试此代码。

```
def products
  @products = Product.joins(:client).all
  respond_to do |format|
    format.html
    format.pdf
    format.js do
      pdf = PrintedProductPdf.new(@products)
      send_data pdf.render,
                :disposition => "attachment; filename=product_#{Date.today.to_s}.pdf",
                :type => "application/pdf"
    end
  end
end 
```

PS我放弃将pdf文件保存到公共目录，因为您似乎只为下载链接创建它。

# html - 如何在 HTML 中制作三角形？

> ID：12483178
> 
> 赞同：10
> 
> 时间：2012-09-18T18:52:08.343
> 
> 标签：html, css, css-shapes

我想使用基本的 CSS 在 HTML 页面中制作三角形。我正在使用需要时间加载的三角形图片，因此，我想减少页面的加载时间。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-18T18:58:44.150

HTML 是不可能的，但 CSS 是不可能的。例子：

```
<div class="triangle></div> 
```

```
.triangle {
    width: 0;
    height: 0;
    border: solid 30px;
    border-color: transparent transparent black transparent;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/GR4Kj/)**

*   `30px`在`border`属性中定义大小：宽度和高度。如果你想要一个更小或更大的三角形，你可以改变它。
*   如果要旋转三角形，请在属性中切换`black`和的位置。见**[jsFiddle](http://jsfiddle.net/GR4Kj/2/)**`transparent``border-color`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-18T18:58:59.230

这是关于如何创建 CSS 三角形的最佳解释：[http ://www.uselesspickles.com/triangles/](http://www.uselesspickles.com/triangles/)

通过创建没有宽度或高度的 div，当您将某些边框保留为透明时，边框最终会创建一个三角形。

**信用**该页面是由一位同事写的，远在其他人想出这个技巧之前。

```
#tri {
  width: 0;
  height: 0;
  border-top-width: 20px;
  border-top-style: solid;
  border-top-color: transparent;
  border-right-width: 20px;
  border-right-style: solid;
  border-right-color: red;
}
```

```
<div id="tri"></div>
```

**[jsFiddle 演示](http://jsfiddle.net/6zEuL/)**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-27T14:59:54.563

这将形成一个三角形

```
<svg width="100" height="100">
    <polygon points="50, 50, 100, 100, 0, 100" fill="yellow" />
</svg>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-18T19:00:47.997

制作 CSS 三角形背后的技巧是

1.  创建一个空`div`
2.  使其高度和宽度为0。
3.  给 2 个相对的边相同的边框宽度并使其透明。
4.  给第三个相同的边框宽度，给它一个纯色。

希望这可以帮助。

检查这个[jsFiddle](http://jsfiddle.net/mdtareque/mUaq4/1/)

# java - 如何在保留初始索引的同时对这些值进行排序？

> ID：12483188
> 
> 赞同：0
> 
> 时间：2012-09-18T18:52:29.730
> 
> 标签：java, c++, c, arrays, sorting

我想在剧院里安排 4 人一组，这样他们就可以坐成一排，或者让最多的人并排坐在一起。我有一个行数组，其中索引表示存储该行中有多少可用座位的行。如果我使用排序方法，那么它将对可用座位进行排序，但我会丢失它对应的行。显然，我可以遍历它来寻找我想要的最大座位数量，如果我没有找到，我可以减少我的数量等等，但这不是最佳的。

行：1 2 3 4

可用：2 3 1 4

可用排序：4 3 2 1

对应行：4 2 1 3 <-这就是我想要的

```
//this is one way to do it but i want a better way
int[] row = {0, 2, 3, 1, 4};
double[] rowDouble = new double[row.length];

for (int i = 0; i < row.length; i++)
{
    String rowString = Integer.toString(row[i]) + "." + Integer.toString(i);
    rowDouble[i] = Double.valueOf(rowString);
}

Arrays.sort(rowDouble);
String sortedRowString = Arrays.toString(rowDouble);
sortedRowString = sortedRowString.substring(1, sortedRowString.length()-1);

System.out.println(sortedRowString);
String[] finalSortedRowString = sortedRowString.split(", ");

for (int i = finalSortedRowString.length-1; i > 0; i--)
{
    System.out.println(finalSortedRowString[i].split("\\.")[1]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:01:37.183

我认为你是用错误的范式来解决这个问题的。Java 是一种面向对象的语言，您应该这样使用它。

```
public Class Row {
    private int available;
    private int rownum;
    public Row(int avail, int rown) { /*...*/ }
    public int compareTo(Row otherRow) { /*...*/ }
    public int checkAvailable() { /*...*/ }
    public int addPerson() { /*...*/ }
    public int addSeat() { /*...*/ }
    public int addParty(int size) { /*...*/ }
} 
```

然后，您可以使用许多可用的 Java 集合之一来按您喜欢的方式保存和排序它们。这是一些额外的编码，但它将允许更健壮和可扩展的实现。例如：如果您的行有两个座位可用，但它们在两端怎么办？您当前的实现必须完全清除。在这里，您只需要更改几个地方的逻辑，然后 BAM，您就获得了 v2。

请强烈考虑使用该语言对您有利。不要使用 java 作为脚本语言，这不是它的用途。

# r - 创建数据框

> ID：12483190
> 
> 赞同：3
> 
> 时间：2012-09-18T18:52:57.067
> 
> 标签：r, dataframe, regression

我的数据是这样设置的：

```
site    date      amb   ppm1   ppm2   ppm3   time0   time1   time2   time3
A       5/6/12     350   370    380   385     0       3        6       9 
```

我需要它的格式有 2 列（一个是浓度，另一个是时间）

```
conc   time
350      0
370      3
380      6
385      9 
```

这样我就可以对其进行回归。或者帮助如何在原始设置上运行回归会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:31:42.657

使用您的示例数据，并假设您`data.frame`被称为“mydf”，您可以使用`stack`每个“组”列来获取您显示的输出：

```
setNames(data.frame(stack(mydf[, grep("^ppm|^amb", names(mydf))])[-2], 
                    stack(mydf[, grep("^time", names(mydf))])[-2]), 
         c("conc", "time"))
#   conc time
# 1  350    0
# 2  370    3
# 3  380    6
# 4  385    9 
```

*   `grep`被使用，只是作为一个例子，如果你有许多类似命名的列并且不想计算来识别它们的列索引。如果这确实代表您的数据，`stack`也可能只是`stack(mydf[, 3:6])[-2]`和`stack(mydf[, 7:10])`。
*   `setNames`只是重命名输出中的列名的便捷功能。
*   只是从每个命令中`[-2]`删除第二列`stack`（这是从中获取值的列名的列）。

* * *

如果您不介意将“abm”的变量名更改为“ppm0”，另一种选择是使用`reshape`：

```
names(mydf)[3] <- "ppm0"
reshape(mydf, direction = "long", idvar = 1:2, 
        timevar = "measure", varying = 3:ncol(mydf), sep = "")
#            site   date measure ppm time
# A.5/6/12.0    A 5/6/12       0 350    0
# A.5/6/12.1    A 5/6/12       1 370    3
# A.5/6/12.2    A 5/6/12       2 380    6
# A.5/6/12.3    A 5/6/12       3 385    9 
```

当然，您可以非常轻松地删除前三列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:34:48.320

如果您的数据是单个向量：

```
> mydata <- c("A", "5/6/12", 350, 370, 380, 385, 0, 3, 6, 9) 
```

你的名字加了：

```
> names(mydata) <- c("site", "date", "amb" ,"ppm1","ppm2","ppm3","time0","time1","time2","time3") 
```

有点像你上面描述的：

```
> mydata
  site     date      amb     ppm1     ppm2     ppm3    time0    time1    time2    time3 
  "A"  "5/6/12"    "350"    "370"    "380"    "385"      "0"      "3"      "6"      "9" 
```

并对其进行改造，您可以这样做：

```
> data.frame(conc=mydata[3:6],time=mydata[7:10]) 
```

这将导致

```
 conc time
  amb   350    0
  ppm1  370    3
  ppm2  380    6
  ppm3  385    9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:06:23.633

您应该使用正则表达式来拆分字符串以获得两个向量（浓度和时间）。如果您使用的是 R，您只需调用即可创建一个数据框

```
data.frame(concentration=concentration,time=time) 
```

在你的两个向量上。

# ruby-on-rails - 添加具有重复信息的多条记录Rails Ajax？

> ID：12483193
> 
> 赞同：1
> 
> 时间：2012-09-18T18:53:00.400
> 
> 标签：ruby-on-rails, ajax

我正在尝试找到一种方法来添加多个记录，这些记录将共享信息，而用户无需每次都输入相同的信息。

我正在创建一个图书馆，用户可以在其中添加一本书。表格将出现：

类型 作者

标题出版商 ISBN

我希望用户能够填写类型和作者，然后在该类型和作者下创建多本书，而不必一次创建一本书并且必须填写类型和作者。我希望表格具有：

类型 作者

标题出版商 ISBN

标题出版商 ISBN

用户能够添加和删除更多“标题出版商和 ISBN”部分，以便在用户单击创建时。它将创建许多记录（在本例中为 2），这些记录将具有相同的流派和作者，但标题的出版商和 ISBN 不同。我假设这需要在 AJAX 中完成？当谈到 js 和 ajax 时，我是一个完全的新手，所以如果你能指出我的教程或一些会有所帮助的东西，那就太好了。我目前正在观看有关嵌套模型形式的 railscast：[http](http://railscasts.com/episodes/196-nested-model-form-part-1) ://railscasts.com/episodes/196-nested-model-form-part-1但这涉及多个模型。这只是我认为会更容易的一个，但只是不知道我应该寻找什么策略。

谢谢乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:43:40.423

我通过 ryanb [https://github.com/ryanb/nested_form安装了 Nested_forms](https://github.com/ryanb/nested_form)

这可以满足我的需要。

# excel - Excel 查找和替换工具

> ID：12483197
> 
> 赞同：0
> 
> 时间：2012-09-18T18:53:16.610
> 
> 标签：excel, cell, replace

我正在尝试修复我在 excel 文件中的一堆电子邮件地址。出于某种原因，过去，某些导入程序决定删除一些太长的电子邮件地址，或者以某种方式删除了最后一个字母。这是我们公司的通讯列表。

因此，我的列表中有 100 封以 .ne 或 .co 或 .or 结尾的电子邮件，而不是 .net、.com 或 .org。

我可以使用 Excel 的替换实用程序通过使用 *.ne 的搜索词并选择仅查找完全匹配项来查找损坏的电子邮件。

但是当我表示我想用 *.net 替换找到的项目时，违规者的实际内容将替换为：*.net 而不是电子邮件地址的第一部分。

在这种情况下是否有任何功能或者我可以使用该工具来查找和替换？

问候; 瑞奇

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:15:23.903

I just wrote this macro and tested it on three different email addresses ending in .com, .net, and .org. There is no error-checking and this macro assumes that the email addresses are somewhere within the columns A-Z. It might also try and append an 'm', 't', or 'g' to other data matching the ".co" etc. criteria.

This macro basically scans for cells between A1 and Z30000 (as you mentioned you had a number of addresses) and looks for anything ending in .co .ne or .or. It appends the proper letter to make the address 'complete'. I hope this helps.

```
Sub Fix_Email()

Dim i As Integer
Dim rngEmail As Range
Set rngEmail = Range("A1:A30000")

For i = 1 To 30000

   'Checks to see if the last 3 characters of a cell's value end in .co, .ne, or .or

    If Right(rngEmail(i).Value, 3) = ".co" Then
        rngEmail(i).Value = rngEmail(i).Value & "m"

    ElseIf Right(rngEmail(i).Value, 3) = ".ne" Then
        rngEmail(i).Value = rngEmail(i).Value & "t"

    ElseIf Right(rngEmail(i).Value, 3) = ".or" Then
        rngEmail(i).Value = rngEmail(i).Value & "g"

    ElseIf Right(rngEmail(i).Value, 2) = ".c" Then 
        rngEmail(i).Value = rngEmail(i).Value & "om" 

    ElseIf Right(rngEmail(i).Value, 2) = ".n" Then 
        rngEmail(i).Value = rngEmail(i).Value & "et"

    ElseIf Right(rngEmail(i).Value, 2) = ".o" Then
        rngEmail(i).Value = rngEmail(i).Value & "rg"

    End If

Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T19:11:02.780

只需要遍历单元格并将其拆分为'。' 然后检查变量数组中的最后一个元素是否正确。沿着这些思路。

```
Sub fixEmails()
ScreenUpdating = False
For Each cell In ActiveSheet.Cells
Dim v As Variant
    If cell.Value <> "" Then
    v = Split(cell.Value, ".")
        If v(UBound(v)) = "ne" Then
        cell.Value = cell.Value + "t"
        Else
            If v(UBound(v)) = "co" Then
                cell.Value = cell.Value + "m"
            Else
                If v(UBound(v)) = "or" Then
                    cell.Value = cell.Value + "g"
                End If
            End If
        End If
    End If
Next

ScreenUpdating = True

End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T18:59:06.437

我建议添加一个使用公式来显示所需字母的列。然后再使用一列进行连接。然后在原始列上做一个大的“粘贴值”。

```
=IF(RIGHT(A1,3)=".ne", "t",IF(RIGHT(A1,3)=".co", "m","")) 
```

这给了你这个想法。让 A 列成为您的电子邮件，并且您已经处理了`net`和`com`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T21:08:50.567

Simply when using find and replace in Excel you don't need to use a wildcard. If you run find '.ne' and replace with '.net' and so on for '.co' and '.or' this will work.

However you may face another problem where email addresses may have .ne, .co or .or appearing earlier.

To avoid this I would expand on Smandoli's solution and use the following function alongside your email addresses:

`=IF(RIGHT(A1,3)=".ne", A1&"t",IF(RIGHT(A1,3)=".co", A1&"m",IF(RIGHT(A1,3)=".or",A1&"g",A1)))`

And then copy and paste values the column afterwards.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T19:13:23.667

如果 A 是电子邮件地址的列，请提供更多详细信息，您将 B 列设置为：=IF(RIGHT(A3,2)="co","m", IF(RIGHT(A3,2)="ne" , "t", IF(RIGHT(A3,2)="or", "g")))

和列 C 为 =CONCATENATE(A3,B3)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T07:43:41.053

For this type of task, looping over cells is inherintly quite slow. Using a variant array is *much* faster

```
Sub email()
    Dim v As Variant
    Dim rng As Range
    Dim i As Long
    Set rng = Range([A1], [A1].End(xlDown)) ' assuming no blank cells in the list
    v = rng
    For i = 1 To UBound(v, 1)
        Select Case Right(v(i, 1), 3)
            Case ".co"
                v(i, 1) = v(i, 1) & "m"
            Case ".ne"
                v(i, 1) = v(i, 1) & "t"
            Case ".or"
                v(i, 1) = v(i, 1) & "g"
        End Select
    Next
    rng = v
End Sub 
```

executes in < 0.5 sec on ~60,000 rows

# wordpress - 将 html 转换为 wordpress

> ID：12483199
> 
> 赞同：-1
> 
> 时间：2012-09-18T18:53:21.670
> 
> 标签：wordpress, wordpress-theming

我是wordpes的新手。我已经成功地安装了 wordpress。我希望将 html 或 php 页面加载到 wordpress 中，以便更快地编辑内容。如何在 wordpress 中进一步打开它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:28:46.093

页面存储在数据库中，而不是 HTML/PHP 文件中。如果要自定义页面内容的布局，则必须将 page-.php 模板添加到主题目录。

[http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T22:42:00.683

您可能想阅读[http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)基本上，您只需要两个文件来构建基本主题：index.php 和 style.css。style.css 文件的顶部至少必须有以下注释：

```
/*
Theme Name: Whatever you call it
*/ 
```

index.php 至少应该是这样的：

```
<html>
<head>
<title>Whatever your title</title>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('stylesheet_url'); ?>" />
</head>
<body>
</body>
</html> 
```

将包含这两个文件的文件夹压缩在一个 zip 文件中，使用主题上传来上传文件，瞧。您的第一个“hello world”Wordpress 主题已上线。我建议您多学一点，因为您可能放入文件中的许多代码可能会中断，除非是带有硬编码链接的静态 html（这超出了 Wordpress 的目的）和样式表中的普通 css。

如果您想要将自己的代码添加到已经存在的主题中，则有一个选项卡可用于在页面或帖子中添加 HTML 片段![wordpress HTML 编辑更多](../Images/0b29fe419c570764a78761e77b0f0ef9.png)

你不能添加php，除非你去外观面板上的主题编辑器。

如果您想将自己的页面添加到主题中，您需要将 page-example.php 上传到主题文件夹并在仪表板上添加一个名为 example 的新页面。要在您的站点中找到您的主题文件夹，您必须在 wp-content 文件夹中挖掘您的主题文件夹。顺便说一句，我不推荐这个，只是让你知道你能做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:06:16.350

您可以使用编辑器直接将 html 添加到您的 wordpress 中以执行您的意图。

这是一个图像样本。

![编辑](../Images/99fa37efcdc9a59263be86bf44d219c0.png)

# javascript - 在下拉列表中加载表格

> ID：12483200
> 
> 赞同：1
> 
> 时间：2012-09-18T18:53:25.160
> 
> 标签：javascript, drop-down-menu, html-table, onchange

我有一个下拉列表，我想根据所选选项在其下方显示不同的表格。

我已经在这里看到了： [Javascript - <option> 中的 onchange](https://stackoverflow.com/questions/368219/javascript-onchange-within-option/12478169)

我能够复制它，但我真的不知道如何添加更多选项/表格。

有人可以帮忙吗？这是到目前为止的代码：

```
<html>
<head>
<script type="text/javascript">
window.onload = function() {
    var eSelect = document.getElementById('transfer_reason');
    var optOtherReason = document.getElementById('otherdetail');
     eSelect.onchange = function() {
        if(eSelect.value === "other") {
            optOtherReason.style.display = 'block';
            } else {
            optOtherReason.style.display = 'none';
        }
    }
    var optOtherReason = document.getElementById('other2');
     eSelect.onchange = function() {
        if(eSelect.value === "z") {
            optOtherReason.style.display = 'block';
            } else {
            optOtherReason.style.display = 'none';
        }
    }
}
</script>
</head>
<body>
<select id="transfer_reason" name="transfer_reason">
<option value="">Motivo</option>
    <option value="x">Reason 1</option>
    <option value="y">Reason 2</option>
    <option value="z">Reason 3</option>
    <option value="other">Other Reason</option>
</select>
<br>
<table border="1" id="otherdetail" style="display: none;">
<tr>
<th>Versão 11</th><th>Versão 12</th><th>Justificativas</th>
</tr>
<tr>
<td> 1</td><td>Angelina</td><td>Delhi</td>
</tr>
</table>

<table border="1" id="other2" style="display: none;">
<tr>
<th>Versão 11</th><th>Versão 12</th><th>Justificativas</th>
</tr>
<tr>
<td> 1</td><td>Galeno</td><td>Delhi</td>
</tr>
</table>
</body>
</html> 
```

就像现在一样，只有 id="other2" 的表正确加载，而另一个表没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:10:47.870

有比示例中存在的更好的方法。如果您在下拉列表中使用表 ID 值，那么整个事情会变得更容易。

```
<script type="text/javascript">
    window.onload = function() {
    var eSelect = document.getElementById('transfer_reason');
    var selVal;
    hideTables();
    eSelect.onchange = function() {
        hideTables();    
         selVal = eSelect[eSelect.selectedIndex].value;
        document.getElementById(selVal).style.display = "block";
    }

}

function hideTables() {
     var tables = document.getElementsByTagName("table");
    for(var x=0;x<tables.length;x++) {
        tables[x].style.display = "none";
    }
}    
 </script> 
```

HTML：

```
 <select id="transfer_reason" name="transfer_reason">
        <option value="">Motivo</option>
        <option value="Table1">Reason 1</option>
        <option value="Table2">Reason 2</option>
        <option value="Table3">Reason 3</option>
        <option value="Table4">Other Reason</option>
</select>

<table id="Table1"><tr><td>#1#</td></tr></table>

<table id="Table2"><tr><td>#2#</td></tr></table> 

... etc ... 
```

# c# - 无法反序列化 XML 对象

> ID：12483206
> 
> 赞同：0
> 
> 时间：2012-09-18T18:53:50.100
> 
> 标签：c#, xml, xml-deserialization

这是我的 XML 字符串：

```
 <Surveys>
   <Survey>
      <SurveyID>33</SurveyID>
      <CulvertID>5</CulvertID>
      <PRNo>599422</PRNo>
      <MP>5.243</MP>
      <RefMiles>1.500</RefMiles>
      <PtID>ABCGEFGH</PtID>
      <FWVersion>10</FWVersion>
      <SurveyDate>2012-08-21</SurveyDate>
      <FutureComments>a33537e2-6c2a-4bde-ac99-4da82a93c598</FutureComments>
      <Erosions>
         <Erosion>
            <ID>158</ID>
            <SurveyID>33</SurveyID>
            <Location>Test Erosion - 8/21/2012 - 10:16:10 AM</Location>
         </Erosion>
         <Erosion>
            <ID>159</ID>
            <SurveyID>33</SurveyID>
            <Location>Test Erosion - 8/21/2012 - 10:16:10 AM</Location>
         </Erosion>
      </Erosions>
      <Spans>
         <Span>
            <ID>86</ID>
            <SurveyID>33</SurveyID>
            <Material>Test Span - 8/21/2012 - 10:16:10 AM</Material>
         </Span>
         <Span>
            <ID>87</ID>
            <SurveyID>33</SurveyID>
            <Material>Test Span - 8/21/2012 - 10:16:10 AM</Material>
         </Span>
      </Spans>
   </Survey>
   <Survey>
      <SurveyID>35</SurveyID>
      <CulvertID>5</CulvertID>
      <PRNo>587180</PRNo>
      <MP>5.243</MP>
      <RefMiles>1.500</RefMiles>
      <PtID>ABCGEFGH</PtID>
      <FWVersion>10</FWVersion>
      <SurveyDate>2012-08-27</SurveyDate>
      <FutureComments>7c36fe43-78cb-436e-81cf-f416aa63c8fc</FutureComments>
      <Erosions>
         <Erosion>
            <ID>160</ID>
            <SurveyID>35</SurveyID>
            <Location>Test Erosion - 8/27/2012 - 1:19:04 PM</Location>
         </Erosion>
         <Erosion>
            <ID>161</ID>
            <SurveyID>35</SurveyID>
            <Location>Test Erosion - 8/27/2012 - 1:19:04 PM</Location>
         </Erosion>
      </Erosions>
      <Spans>
         <Span>
            <ID>88</ID>
            <SurveyID>35</SurveyID>
            <Material>Test Span - 8/27/2012 - 1:19:04 PM</Material>
         </Span>
         <Span>
            <ID>89</ID>
            <SurveyID>35</SurveyID>
            <Material>Test Span - 8/27/2012 - 1:19:04 PM</Material>
         </Span>
      </Spans>
   </Survey>
</Surveys> 
```

这是我的课..

民意调查：

```
namespace DNR.CulvertInventory.SERVICE
{
    [XmlRoot(Namespace="",
     ElementName = "Survey",
     DataType = "string",
     IsNullable = true)]
    public class Survey: BOBase
    {
        public int SurveyID { get; set; }
        public int CulvertID { get; set; }
        public string County { get; set; }
        public string RoadName { get; set; }
        public int PRNo { get; set; }
        public decimal MP { get; set; }
        public decimal RefMiles { get; set; }
        public string PtID { get; set; }
        public short FWVersion { get; set; }
        public double? Latitude { get; set; }
        public double? Longitude { get; set; }
        public string Waterway { get; set; }
        public string SiteID { get; set; }
        public string Observers { get; set; }
        public DateTime SurveyDate { get; set; }
        public string AdjacentLandowner { get; set; }
        public string LocationComments { get; set; }
        public short? CrossingType { get; set; }
        public string StructureShape { get; set; }
        public string InletStructure { get; set; }
        public string OutletStructure { get; set; }
        public string OutletType { get; set; }
        public string SubstrateInStructure { get; set; }
        public string GeneralCondition { get; set; }
        public short? PluggedPercent { get; set; }
        public string PluggedLocation { get; set; }
        public short? CrushedPercent { get; set; }
        public string CrushedLocation { get; set; }
        public bool? IsRustedThrough { get; set; }
        public string StructureInterior { get; set; }
        public decimal? StructureWaterDepthInlet { get; set; }
        public decimal? StructureWaterDepthOutlet { get; set; }
        public decimal? StructureEmbeddedDepthInlet { get; set; }
        public decimal? StructureEmbeddedDepthOutlet { get; set; }
        public decimal? StructureWaterVelocityInlet { get; set; }
        public decimal? StructureWaterVelocityOutlet { get; set; }
        public decimal? StructureWaterVelocityMeasured { get; set; }
        public string StructureWaterVelocityMeasuredWith { get; set; }
        public bool? IsPerched { get; set; }
        public decimal? PerchHeight { get; set; }
        public string StreamFlow { get; set; }
        public bool? IsScourPoolPresent { get; set; }
        public decimal? ScourPoolLength { get; set; }
        public decimal? ScourPoolWidth { get; set; }
        public decimal? ScourPoolDepth { get; set; }
        public bool? IsUpstreamPondPresent { get; set; }
        public decimal? UpstreamPondLength { get; set; }
        public decimal? UpstreamPondWidth { get; set; }
        public decimal? RiffleWaterDepth { get; set; }
        public decimal? RiffleBankfullWidth { get; set; }
        public decimal? RiffleWettedWidth { get; set; }
        public decimal? RiffleWaterVelocity { get; set; }
        public string RiffleMeasuredWith { get; set; }
        public string RiffleSubstrate { get; set; }
        public string RoadSurface { get; set; }
        public string RoadCondition { get; set; }
        public decimal? RoadWidth { get; set; }
        public string LocationOfLowPoint { get; set; }
        public string RunOffPath { get; set; }
        public decimal? FillDepthUpStream { get; set; }
        public decimal? FillDepthDownStream { get; set; }
        public string SlopeUpStream { get; set; }
        public string SlopeDownStream { get; set; }
        public decimal? ApproachLengthLeft { get; set; }
        public decimal? ApproachLengthRight { get; set; }
        public string ApproachSlopeLeft { get; set; }
        public string ApproachSlopeRight { get; set; }
        public string VegetationDitchLeft { get; set; }
        public string VegetationDitchRight { get; set; }
        public bool? IsErosionPresent { get; set; }
        public bool? IsErosionCorrectable { get; set; }
        public string ErosionExtent { get; set; }
        public string ErosionNotes { get; set; }
        public bool? IsPrioritySite { get; set; }
        public string PriorityReason { get; set; }
        public string PriorityComments { get; set; }
        public bool? FutureVisit { get; set; }
        public string FutureComments { get; set; }
        public bool? NonNativeInvasiveSpecies { get; set; }
        public string SpeciesObserved { get; set; }
        public bool? IsHeadChanged { get; set; }
        public string HeadChangeComments { get; set; }
        public bool? IsBackwatered { get; set; }
        public string BackwaterComments { get; set; }
        public bool? IsOvertopping { get; set; }
        public string OvertoppingComments { get; set; }
        public bool? IsSubstrateEntireLength { get; set; }
        public decimal? CalculatedPassability { get; set; }
        public decimal? DefinedPassability { get; set; }
        public string PassabilityComments { get; set; }
        public byte[] PhotoInlet { get; set; }
        public byte[] PhotoOutlet { get; set; }
        public byte[] PhotoUpstream { get; set; }
        public byte[] PhotoDownstream { get; set; }
        public byte[] PhotoRoadApproachLeft { get; set; }
        public byte[] PhotoRoadApproachRight { get; set; }
        public List<Erosion> Erosions { get; set; }
        public List<Span> Spans { get; set; }
    }
} 
```

侵蚀：

```
namespace DNR.CulvertInventory.SERVICE
{
    [XmlRoot(Namespace = "",
     ElementName = "Erosion",
     DataType = "string",
     IsNullable = true)]
    public class Erosion : BOBase
    {
        public int ID { get; set; }
        public int SurveyID { get; set; }
        public string Location { get; set; }
        public decimal? Length { get; set; }
        public decimal? Width { get; set; }
        public decimal? Depth { get; set; }
        public bool? IsReachingStream { get; set; }
        public string MaterialEroded { get; set; }
    }
} 
```

跨度：

```
namespace DNR.CulvertInventory.SERVICE
{
    [XmlRoot(Namespace = "",
     ElementName = "Span",
     DataType = "string",
     IsNullable = true)]
    public class Span
    {
        public int ID { get; set; }
        public int SurveyID { get; set; }
        public short? SpanNumber { get; set; }
        public decimal? Length { get; set; }
        public decimal? Width { get; set; }
        public decimal? Height { get; set; }
        public string Material { get; set; }
    }
} 
```

这是我用来反序列化 xml 的方法：

```
public static T GetObjectFromXMLString<T>(string xml) where T: new()
        {
            T myObject = new T();

            XmlSerializer serializer = new XmlSerializer(myObject.GetType());

            StringReader stream = new StringReader(xml); // read xml data
            XmlTextReader reader = new XmlTextReader(stream);  // create reader

            object deserialized = serializer.Deserialize(reader);

            myObject = (T)deserialized;

            return myObject;
        } 
```

这是我称之为的代码：

```
 command.Connection.Open();
                using (XmlReader reader = command.ExecuteXmlReader())
                {
                    while (reader.Read())
                    {
                        string s = reader.ReadOuterXml();
                        // do something with s
                        List<T> myList = Helpers.GetObjectFromXMLString<List<T>>(s);
                        BOList = myList;
                    }
                } 
```

当我尝试执行此操作时，出现以下错误：

```
"<Surveys xmlns=''> was not expected." 
```

我究竟做错了什么？我假设它与命名空间有关，我尝试将命名空间更改为“”，从“XmlRoot”属性中完全删除命名空间属性，并完全删除“XmlRoot”属性。但这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:56:05.940

你可以删除

```
[XmlRoot(Namespace="",... 
```

因为您的文件不包含`namespace`:`xmlns`不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:01:08.353

您是否可以通过以下方式传入命名空间：

```
var ns = new XmlSerializerNamespaces();
ns.Add("", ""); 
```

也许这也可以：

```
var settings = new XmlWriterSettings { OmitXmlDeclaration = true, Encoding = new UnicodeEncoding(false, false) }; 
```

我一直用它来将我的类序列化为字符串，而不是将它反序列化回一个对象，所以 YMMV。

- 编辑 -

你能试一下吗：

```
namespace DNR.CulvertInventory.SERVICE
{
    [XmlRoot("Span")]
    public class Span
    {
        public int ID { get; set; }
        public int SurveyID { get; set; }
        public string Material { get; set; }
    }
} 
```

看看这是否会正确反序列化。如果它确实开始添加您的 L、W、H，然后添加额外的属性，直到一切正常或失败。我会逐课做这门课，看看它是否有效，或者哪个课失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:20:03.447

您的问题与命名空间无关。您的 xml 中的根标记是`Surveys`

所以只需更换

```
 XmlSerializer serializer = new XmlSerializer(myObject.GetType()); 
```

和

```
 XmlSerializer serializer = new XmlSerializer(myObject.GetType(), 
                                                 new XmlRootAttribute("Surveys")); 
```

# c++ - 无论 CRT 版本如何，这是在库中提供 STL 函数的有效方法吗？

> ID：12483209
> 
> 赞同：1
> 
> 时间：2012-09-18T18:53:57.880
> 
> 标签：c++, visual-studio, dll, stl, crt

我正在尝试将一些静态 C++ 库迁移到具有 C 接口的 DLL 中，因此我不需要为我们想要支持的每个版本的 Visual Studio（即 CRT）构建一个单独的库版本。不过，我确实喜欢在某些函数调用中使用 STL 对象的便利性。我想出了一些似乎可行的方法，但想知道是否可能有一些我没有想到的隐藏的东西。

这是我在保持 Visual Studio 独立性的同时获得函数的 STL 版本的方法。

原库函数：

```
//library.h
...
std::wstring GetSomeString();
...
StringGenerator* mStrGen; //assume forward declared for pimpl implementation

//library.cpp
std::wstring library::GetSomeString()
{
  return mStrGen->GetString(); //returns a wstring;
} 
```

首先，我创建了一个提供 C 接口的私有函数

```
//library.h
__declspec(dllexport) void GetSomeStringInternal(wchar_t* pSomeString);

//library.cpp
void library::GetSomeString(wchar_t*& pSomeString)
{
    if(pSomeString!= nullptr) {
        delete [] pSomeString; //assumes allocated by the DLL
    }

    std::wstring tmpString(mStrGen->GetString());

    size_t stringLength(tmpString.size());

    stringToReturn = new wchar_t[stringLength + 1];

    wcscpy_s(pSomeString, stringLength + 1, tmpString.c_str());
} 
```

接下来，我添加了一个私有函数，用于释放 DLL 分配的内存

```
//library.h
__declspec(dllexport) void FreeArray(void* arrayPtr);

//library.cpp
void library::FreeArray(void* arrayPtr)
{
 if(arrayPtr) {
   delete [] arrayPtr; 
  }
} 
```

最后，我把原来的返回字符串的C++函数转换成调用内部C接口函数的函数

```
//library.h

std::wstring GetSomeString()
{
  std::wstring someString(L"");
  wchar_t* pSomeString= NULL;

  GetSomeStringInternal(pSomeString);
  someString = pSomeString;

  FreeArray(pSomeString);
  return someString;
}

//library.cpp
//removed GetSomeString from cpp since it is defined in header 
```

我的想法是，由于每次包含头文件时都会对其进行编译，因此使用不同版本 CRT 的应用程序将使用其 CRT 实现来编译该函数。传入和传出库的所有数据都使用 C 接口来保持兼容性，并且内存由库分配和释放，因此您不会遇到 CRT 的一个版本试图从不同版本释放内存。

它似乎按我的意图执行：

*   该库可供使用多个版本的 Visual Studio 编译的程序使用。
*   没有内存泄漏或访问冲突
*   如果我修改代码以便在标头的 GetSomeString 函数中分配内存，则在尝试释放该内存时确实会出现内存访问错误。
*   GetSomeString 函数由库编译并包含在 DLL 中，但它永远不会被调用，因为它是 1) 未导出和 2) 编译程序将始终选择它的版本，因为它是内联的。

有什么我遗漏的吗，或者这是为 Visual Studio 版本独立的库提供 C++ 接口的有效方法？

旁注：如果我有一个使用 a 的程序，我会遇到一些删除问题`std::shared_ptr<library>`，但没有对该问题进行足够的研究，并且可能会有关于该问题的后续问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:42:26.357

我可以看到成为问题的一件事是，如果您出于性能原因确实需要通过引用传递大型对象。您通过将所有数据复制到兼容格式和从兼容格式复制来处理二进制兼容性问题，这很好，直到它成为性能问题。

# c++ - 给定不同大象的寿命，找出最大数量的大象生活的时期

> ID：12483213
> 
> 赞同：7
> 
> 时间：2012-09-18T18:54:27.723
> 
> 标签：c++

我遇到了一个面试问题：

“给定不同大象的寿命。找出最大数量的大象活着的时期。” 例如：
输入：，，`[5, 10]`输出 ：（3只大象）`[6, 15]``[2, 7]`
`[6,7]`

我想知道这个问题是否与“n”个字符串的最长子字符串问题有关，这样每个字符串都代表一个时间段的连续范围。

例如： `[5,10] <=> 5 6 7 8 9 10`

如果没有，什么可以很好地解决这个问题？我想用 C++ 编写代码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T19:50:28.467

对于每头大象，创建两个事件：大象出生，大象死亡。按日期对事件进行排序。现在浏览事件并计算有多少大象还活着；每次达到新的最大值时，记录开始日期，每次从最大值下降时记录结束日期。

此解决方案不依赖于整数日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:07:23.480

如果我是你在面试中，我会创建一个`std::array`最大`age`的大象，然后为每头大象增加元素数量，例如：

`[5,10] <<``5 to 10`从数组中的索引递增所有元素 。

然后我会排序并找到最大的数字在哪里。

有可能使用`std::map`类似`map<int,int>` （第 1 期，第 2 期 - 大象数量）。它将默认排序。

我想知道您是否知道更好的解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:04:08.957

这类似于检查是否缺少括号的程序。它还与日期范围重叠有关。这个主题在 StackOverflow 和其他地方被打死。这里是：

[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)

我通过将所有开始/结束范围放在一个结构（或类）向量中然后对它们进行排序来实现这一点。然后你可以遍历向量并检测大象级别的转换。（大象的数量——说明问题的有趣方式！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T19:23:28.227

从您的输入中，我发现所有时间段都是重叠的，那么在这种情况下，解决方案很简单

我们被指定为 [start end]

所以答案将是所有开始的最大值和所有结束的最小值。

只需遍历每个时间段并找到所有开始的最大值和所有结束的最小值

注意：当所有时间段都超过一圈时，此解决方案适用

在您的示例中，所有输入的最大值 = 6 所有输出的最小值 = 7

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-01T09:01:39.573

我就做两个阵，一个是大象出生的时候，一个是大象死的时候。对两个数组进行排序。

现在保留一个计数器（最初为零）。开始遍历两个数组并不断从两个数组中获取最小元素。如果我们从 start 数组中获取一个元素，则递增 counter ，否则递减 counter。通过这种方法，我们可以很容易地找到最大值和时间。

# ios - iOS performSelector onThread 与对象

> ID：12483214
> 
> 赞同：0
> 
> 时间：2012-09-18T18:54:31.137
> 
> 标签：ios, performselector

是否可以使用此方法并传递一个对象？使用此代码，我收到此错误：

```
-[myApp hideUpdateView]: unrecognized selector sent to instance 0x8b6a880
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[myApp hideUpdateView]: unrecognized selector sent to instance 0x8b6a880' 
```

它永远不会到达 hideUpdateView 方法......

代码：

```
NSArray *array = [NSArray arrayWithObjects:@"1", @"2", nil];
[self performSelector:@selector(hideUpdateView) onThread:[NSThread mainThread] withObject:array waitUntilDone:YES];

- (void) hideUpdateView: (NSArray *) inputArray
{
    int catCount = [[inputArray objectAtIndex:0] intValue];
    //hide it
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:56:50.993

您缺少选择器名称末尾的冒号。（请阅读 Objective-C 教程。冒号是选择器名称的一部分。）

```
[self performSelector:@selector(hideUpdateView:) onThread:[NSThread mainThread] withObject:array waitUntilDone:YES];
                                              ^
                                     Note the colon here 
```

# ember.js - 在 Jade 中使用 Ember.js 和 Handlebars.js 视图

> ID：12483217
> 
> 赞同：3
> 
> 时间：2012-09-18T18:54:37.440
> 
> 标签：ember.js, pug, handlebars.js

我正在尝试在jade中使用handlebars.js添加一个余烬视图。当我使用此代码时

```
script(type='text/x-handlebars') 
    {{view App.LoginView}} 
        {{view Ember.TextField valueBinding="username" placeholder="Enter your username"}} 
```

它呈现为：

```
<div id="ember194" class="ember-view"></div>
<input id="ember204" class="ember-view ember-text-field" placeholder="Enter your username" type="text"> 
```

我似乎无法将文本字段包含在视图中。我想知道是否有一个技巧可以在翡翠模板中正确使用车把。

我想要的结果是：

```
<div id="ember194" class="ember-view">
    <input id="ember204" class="ember-view ember-text-field" placeholder="Enter your username" type="text">
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T21:30:52.123

尝试：

```
script(type='text/x-handlebars') 
    {{#view App.LoginView}} 
        {{view Ember.TextField valueBinding="username" placeholder="Enter your username"}}
    {{/view}} 
```

Jade 将您从 HTML 结束标记中拯救出来，但车把块必须完好无损，并且您要求的内容需要`Ember.TextField`位于`{{#view}}`块内。

[编辑] 仅供参考[http://emblemjs.com/](http://emblemjs.com/)

# python - OpenCV 错误：参数错误（数组应为 CvMat 或 IplImage）文件 C:\slave\WinInstallerMegaPack\src\opencv\modules\core\src\array.cpp，第 1238 行

> ID：12483221
> 
> 赞同：4
> 
> 时间：2012-09-18T18:54:53.223
> 
> 标签：python, simplecv

刚刚安装了 SimpleCV 版本 1.3 Superpack (Python 2.7) 并尝试使用 SimpleCV 的实用计算机视觉中的 Hello Word 应用程序

```
from SimpleCV import Camera, Display, Image
import time

# Initialize the camera
cam = Camera()

# Initialize the display
display = Display()

# Snap a picture using the camera
img = cam.getImage() 
```

在最后一行它失败了

```
OpenCV Error: Bad argument (Array should be CvMat or IplImage) in unknown function, file C:\slave\WinInstallerMegaPack\src\opencv\modules\core\src\array.cpp, line 1238

---------------------------------------------------------------------------
error                                     Traceback (most recent call last)
C:\Python27\lib\site-packages\SimpleCV\Shell\Shell.pyc in <module>()
----> 1 img = cam.getImage()

C:\Python27\lib\site-packages\SimpleCV\Camera.pyc in getImage(self)
    584
    585         frame = cv.RetrieveFrame(self.capture)
--> 586         newimg = cv.CreateImage(cv.GetSize(frame), cv.IPL_DEPTH_8U, 3)
    587         cv.Copy(frame, newimg)
    588         return Image(newimg, self)

error: Array should be CvMat or IplImage 
```

我在 Windows 7 PC 上通过 CL-Eye 驱动程序使用 PS3 Eye 相机。那是通过usb。否则相机工作正常。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:00:36.670

cv.CreateImage 想要一个图像或一个数组。我猜你`cv.GetSize(frame)`没有返回一个数组（你应该检查一下为什么会这样）。

你也可以试试

```
 newimg = cv.CreateImage(frame, cv.IPL_DEPTH_8U, 3) 
```

根据文档，哪里`frame`应该是 IplImage。

[http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-retrieve](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-retrieve)

但是检查`RetrieveFrame`是否由于某种原因没有失败。例如，有报告称摄像头访问因与 Skype 视频聊天功能发生冲突而被拒绝。您是否正在运行一些可能会访问相机的软件？

您可以尝试下载 Process Explorer，并检查（查找 > 句柄或 DLL）是否有任何进程的句柄包含字符串“DeviceClasses”。

**更新**：*我的错，本节仅适用于 PCI 卡和 PSEye 是 USB* { 作为一个绝望的措施，您可以使用系统还原拍摄快照，并安装 FGeng 的适用于 Windows 7 的通用视频支持驱动程序。然后检查 OpenCV 是否将其识别为相机连接器。

[http://www.fgeng.com/drivers.htm](http://www.fgeng.com/drivers.htm)

如果没有，您可以使用系统还原将其清除。这是一个绝望的措施，因为任何占用相机的东西都可能占用 WDM，所以成功的机会很小，但你永远不知道。}

**更新**：做了一些研究。事实证明，用于 PSEye 的 CL-Eye 驱动程序并非没有问题，具体取决于访问它的应用程序。较新的驱动程序已经解决了一些问题（2012 年 2 月的线程，可能已过时）。有时，相机许可可能是一个问题 ( [http://nuigroup.com/forums/viewthread/13699/](http://nuigroup.com/forums/viewthread/13699/) )。

您可以尝试使用 CL-Eye SDK 而不是驱动程序，因为前者明确列出了平台中的 OpenCV，而后者没有。

如果您已经安装了 SDK，您可能需要检查相机编号（#0、#1），以防系统中注册了另一个成像外围设备。

另一种可能性是运行 DxDiag 实用程序来诊断可能的 DirectShow 障碍。

这里的问题是系统没有太多信息。

您可能希望将“C:\Python27\lib\site-packages\SimpleCV\Camera.py”复制到备份文件中，并将其修改为提供更多信息，例如`print frame`在第 585 行和第 586 行之间临时添加一个（注意：行必须完全按照上面的缩进）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:45:35.910

SimpleCV 没有问题。你的相机一定有问题。尝试重新安装 OpenCV。安装最新版本的 OpenCV(OpenCV 2.4.2)

要查看您的相机是否适用于 OpenCV，

```
import cv2
c = VideoCapture(0)
val, img = c.read()
print val #this should be True
print img #this should not be all 0s 
```

# annotations - Tomee+ JAX-RS：Jackson 注释被忽略

> ID：12483224
> 
> 赞同：0
> 
> 时间：2012-09-18T18:55:16.583
> 
> 标签：annotations, cxf, jackson, apache-tomee

我遇到了在 Tomee+ v1 中似乎被忽略的 Jackson 注释问题。我使用 Jackson 将我的 REST 响应序列化为 JSON。我打开它设置：
**openejb.cxf.jax-rs.providers = org.codehaus.jackson.jaxrs.JacksonJsonProvider** in system.properties

Jackson 序列化工作正常，除了似乎完全忽略的所有 Jackson 注释。事件像 @JsonIgnore 或 @JsonProperty 这样的基本事件对 json 响应没有影响。我也尝试过 Mix-ins，但它们也不起作用。

我尝试使用 Jackson 1.X 和 Jackson 2.x。

唯一影响 JSON 结构的是 Jaxb 注释（如 @XmlTransient）。

有人在 Tomee+ 中工作吗？？？非常感谢任何反馈

干杯，qmacpit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:41:13.120

事实证明，它在 TomEE+ v 1.0 中无法正常工作。如果你想让它运行，你必须使用更高版本（目前它是快照版本）。在官方tomEE论坛上查看我的原始帖子。 [http://openejb.979440.n4.nabble.com/TomEE-Jackson-ignored-annotations-td4657511.html#a4657518](http://openejb.979440.n4.nabble.com/TomEE-Jackson-ignored-annotations-td4657511.html#a4657518)

# c# - C#/VB.Net 任务 vs 线程 vs BackgroundWorker

> ID：12483229
> 
> 赞同：7
> 
> 时间：2012-09-18T18:55:24.240
> 
> 标签：c#, vb.net, multithreading, backgroundworker, task

我有“谷歌搜索”但仍然对任务、线程和后台工作人员感到困惑.....

1.  “任务是在当前线程上运行的高级 API”是否正确？

2.  如果 1 是正确的，为什么我需要在同一线程中使用调用来更改任务内的 UI？

3.  Backgroundworker 只在应用程序中获得最低优先级？所以 backgroundworker 的性能低于 task 和 thread ？对 ？

4.  最后，在我的应用程序中，我需要使用“HttpWebRequest”从服务器获取字符串，然后解析字符串并更新 UI。如果我使用“HttpWebRequest.BeginGetResponse”等待异步结果并触发一个完整的事件来更新UI，我需要使用invoke方法来调用UI线程控件，但是我可以使用后台worker来代替吗？我可以简单地在“RunWorkerCompleted”事件中更改 UI，有什么缺点吗？

对不起我的泳池英语，谢谢你的帮助......！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T23:50:25.293

1）不，任务默认情况下在线程池线程上运行。不过，您可以提供另一个可以以不同方式运行任务的调度程序。

3) 默认情况下优先级没有区别。`BackgroundWorker`也在线程池线程上运行。

4) Using[`TaskFactory.FromAsync`](http://msdn.microsoft.com/en-us/library/dd321311.aspx)是一种处理异步 Web 请求的相当简单的方法：

```
Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, null)
    .ContinueWith(
        t =>
        {
            using (var response = (HttpWebResponse)t.Result)
            {
                // Do your work
            }
        },
        TaskScheduler.FromCurrentSynchronizationContext()
    ); 
```

Using`TaskScheduler.FromCurrentSynchronizationContext`确保回调 in`ContinueWith`在当前线程上被调用。因此，如果任务是在 UI 线程上创建的，则会在后台检索响应，然后在 UI 线程上进行处理。

# teamcity - TeamCity Build Agent 不会升级

> ID：12483230
> 
> 赞同：18
> 
> 时间：2012-09-18T18:55:24.960
> 
> 标签：teamcity, teamcity-7.0

我们正在尝试设置构建代理，每次启动它时，日志都会显示以下消息：

```
[2012-09-18 12:52:01,805]   INFO -    jetbrains.buildServer.AGENT - Starting agent shutdown sequence, reason: Restart agent, failed to download upgrade from server 
[2012-09-18 12:52:01,821]   INFO -    jetbrains.buildServer.AGENT - Host configuration for downloading updates: HostConfiguration[host=http://localhost:8000] 
[2012-09-18 12:52:01,821]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/teamcity-agent.xml ==> E:\buildAgent\temp\m8a1mAwTuLIngev3yRUMPUuaYWZFmMSh 
[2012-09-18 12:52:01,849]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/agentSystemInfo.zip ==> E:\buildAgent\update\plugins\agentSystemInfo.zip 
[2012-09-18 12:52:01,880]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/amazonEC2.zip ==> E:\buildAgent\update\plugins\amazonEC2.zip 
[2012-09-18 12:52:01,921]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/ant.zip ==> E:\buildAgent\update\plugins\ant.zip 
[2012-09-18 12:52:02,056]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/antPlugin.zip ==> E:\buildAgent\update\plugins\antPlugin.zip 
[2012-09-18 12:52:02,078]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/assembly-info-patcher.zip ==> E:\buildAgent\update\plugins\assembly-info-patcher.zip 
[2012-09-18 12:52:02,098]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/clearcase-agent.zip ==> E:\buildAgent\update\plugins\clearcase-agent.zip 
[2012-09-18 12:52:02,106]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/commandLineRunner.jar ==> E:\buildAgent\update\plugins\commandLineRunner.jar 
[2012-09-18 12:52:02,118]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/coveragePlugin.zip ==> E:\buildAgent\update\plugins\coveragePlugin.zip 
[2012-09-18 12:52:02,151]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/crashDetector.zip ==> E:\buildAgent\update\plugins\crashDetector.zip 
[2012-09-18 12:52:02,163]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/cvsAgent.zip ==> E:\buildAgent\update\plugins\cvsAgent.zip 
[2012-09-18 12:52:02,183]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/dotCover.zip ==> E:\buildAgent\update\plugins\dotCover.zip 
[2012-09-18 12:52:02,308]   INFO -    jetbrains.buildServer.AGENT - Downloading http://localhost:8000/update/plugins/dotNetPlugin.zip ==> E:\buildAgent\update\plugins\dotNetPlugin.zip 
[2012-09-18 12:52:03,830]   INFO - agent.impl.AgentPortFileWriter - Delete agent runtime file from E:\buildAgent\logs\buildAgent.port 
[2012-09-18 12:52:03,831]   INFO -    jetbrains.buildServer.AGENT - Unregistering from build server: 5 
```

有没有人见过这样的事情？我们查看了服务器日志，但没有看到任何表明可能出现问题的内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-19T21:26:20.993

我遇到了同样的问题。构建代理和服务器都安装在 Windows Server 2012 上。

我停止了构建代理服务并从 BuildAgent\logs 中删除了日志，然后重新启动了构建代理服务，这样我就可以看到一个新的日志了。

upgrade.log 显示构建代理收到了来自 teamcity 服务器的升级呼叫。该日志还显示以下内容：

“请检查 TeamCity 构建代理服务用户是否有足够的权限来停止和启动该服务。”

使用本地安全策略，我授予构建代理服务用户“作为服务登录”的权限，但这不足以启动和停止服务。默认情况下，只有管理员组的成员才能启动、停止、暂停、恢复或重新启动服务。在我将构建代理服务用户添加到管理员组并重新启动构建代理服务后，升级成功完成并再次连接代理。

或者，如 BatteryBackupUnit 和[https://web.archive.org/web/20171019005501/http://windowsitpro.com/security/letting-user-start-and-stop-services-without-granting-user-administrator所述-privileges](https://web.archive.org/web/20171019005501/http://windowsitpro.com/security/letting-user-start-and-stop-services-without-granting-user-administrator-privileges)，可以授予 TeamCity Windows 用户帐户对 TeamCity Build Agent 服务的启动、停止和暂停权限。文章说，像

```
subinacl /service spooler /grant=contoso\cortana=top 
```

就足够了。

或者，如果您不想使用 Microsoft 不再提供的工具，则可以使用 Process Explorer，如[https://superuser.com/a/315709/12337](https://superuser.com/a/315709/12337)中所述。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-05-05T20:16:54.853

在 Ubuntu 18.04 上使用 systemd 运行代理时遇到了这个问题。升级时代理以代码 143 退出，这被解释为错误。它需要添加到可接受的错误代码列表中`SuccessExitStatus=143 0`

这是完整的配置：

```
[Unit]
Description=TeamCity Build Agent
After=network.target

[Service]
Type=forking
RemainAfterExit=yes
PIDFile=/build-agent/logs/buildAgent.pid
ExecStart=/build-agent/bin/agent.sh start
ExecStop=/build-agent/bin/agent.sh stop
User=build
Group=build

Restart=on-failure
RestartSec=5s

# agent will exit with 143 during upgrade process
SuccessExitStatus=143 0

[Install]
WantedBy=multi-user.target 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-28T09:11:21.823

TeamCity 构建代理有时可能需要很长时间才能升级。如果您认为升级时间过长而没有积极结果，请执行以下操作：

1.  卸载构建代理
2.  从您的服务器下载构建代理包
3.  重新安装代理

在此之后升级过程应该会更快。如果没有帮助，最好联系 JetBrains 技术支持。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-17T12:01:54.610

如果您的企业安全策略不允许您将用户添加到“管理员”组，但您登录的用户确实具有提升的权限，这是一种非常简单的方法。通过 Services.msc 停止服务运行，然后在代理 bin 目录中打开命令提示符（具有提升的权限）并运行

```
agent.bat start 
```

让代理使用此用户进行更新，然后一旦完成，您就可以在 Teamcity UI 中看到它已成功注册。终止进程并重新启动服务。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-31T01:27:59.897

如果您像我们一样使用“被监禁”的构建用户，您会看到“请检查 TeamCity 构建代理服务用户是否有足够的权限来停止和启动该服务。”

有解决方法，但没有优雅的解决方案。原因如下：

*   *解决方法 1：* “TCBuildAgent”服务需要“入狱”需要分配给它的启动/停止服务凭证访问权限。SubinACL 是您分配这个的最佳工具（[冗长但完整的讨论](https://serverfault.com/questions/357424/how-do-i-grant-permissions-to-remotely-start-stop-a-service-using-powershell)）。
    *   TeamCity*删除*了“TCBuildAgent”并安装了一个新的，有效地消除了分配给它的服务凭证。因此，每次升级时都必须发出 SubinACL 授权访问命令。笨拙和烦人
*   *解决方法 2：*将“jailed”添加到 Administrators 组的上述提示是可行的，并且允许正确升级，但违反了“jailed”用户的概念。

在**多次**摆弄 SubinACL 之后，我放弃了，只是暂时将“jailed”添加到管理员组以进行升级过程，然后将其删除。

我相信 Jetbrains 不会对 TCBuildAgent 做一些可怕和恶意的事情……无论如何，不​​会在升级期间；）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-04T00:26:22.387

I had a similar problem. helped me to reinstall the antivirus.

[http://devnet.jetbrains.com/thread/440728](http://devnet.jetbrains.com/thread/440728)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-30T13:34:33.007

1.  停止代理：

    > ./agent.bat 停止

2.  重新安装代理。

3.  启动代理：

    > ./agent.bat 开始

# python - 为什么 Python 多处理管道不安全？

> ID：12483231
> 
> 赞同：10
> 
> 时间：2012-09-18T18:55:38.960
> 
> 标签：python, multiprocessing, pipe, unsafe

我不明白为什么[`Pipes`](http://docs.python.org/library/multiprocessing.html#multiprocessing.Pipe)当有多个发送者和接收者时说不安全。

[`Queues`](http://docs.python.org/library/multiprocessing.html#multiprocessing.Queue)如果是这种情况，如何将以下代码转换为代码？`Queues`关闭时不要扔`EOFError`，所以我的进程不能停止。我是否应该无休止地发送“毒药”消息来告诉他们停止（这样，我确信我的所有进程都至少收到一种毒药）？

我想保持管道`p1`打开，直到我另有决定（这里是我发送 10 条消息的时间）。

* * *

```
from multiprocessing import Pipe, Process
from random import randint, random
from time import sleep

def job(name, p_in, p_out):
    print(name + ' starting')
    nb_msg = 0
    try:
        while True:
            x = p_in.recv()
            print(name + ' receives ' + x)
            nb_msg = nb_msg + 1
            p_out.send(x)
            sleep(random())
    except EOFError:
        pass
    print(name + ' ending ... ' + str(nb_msg) + ' message(s)')

if __name__ == '__main__':
    p1_in, p1_out = Pipe()
    p2_in, p2_out = Pipe()

    proc = []

    for i in range(3):
        p = Process(target=job, args=(str(i), p1_out, p2_in))
        p.start()
        proc.append(p)

    for x in range(10):
        p1_in.send(chr(97+x))
    p1_in.close()
    for p in proc:
        p.join()
    p1_out.close()
    p2_in.close()

    try:
        while True:
            print(p2_out.recv())
    except EOFError:
        pass

    p2_out.close() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T20:37:37.297

本质上，问题在于它`Pipe`是围绕平台定义的管道对象的薄包装器。`recv`只需重复接收字节缓冲区，直到获得完整的 Python 对象。如果两个线程或进程`recv`在同一管道上使用，则读取可能会交错，使每个进程都有半个腌制对象，从而破坏数据。`Queue`以增加复杂性为代价，在进程之间进行适当的同步。

正如`multiprocessing`文档所说：

> 请注意，如果两个进程（或线程）尝试同时读取或写入管道的同一端，则管道中的数据可能会损坏。当然，同时使用管道的不同端的进程没有损坏的风险。

不必无休止地送毒丸；您只需要每个工人一个。每个工人在离开前都拿起一粒毒丸，因此工人不会以某种方式错过消息的危险。

您还应该考虑使用`multiprocessing.Pool`而不是重新实现“工作进程”模型——`Pool`有很多方法可以很容易地在多个线程之间分配工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T22:13:31.273

*我不明白为什么当有多个发送者和接收者时，管道被称为不安全。*

假设您同时将水从源 A 和 B 注入管道。在管道的另一端，你不可能找出哪一部分水来自 A 或 B，对吧？:)

管道在字节级别传输数据流。如果没有通信协议，它不知道消息是什么，因此无法确保消息的完整性。因此，使用具有多个发送者的管道不仅是“不安全的”。这是一个主要的设计缺陷，很可能会导致沟通问题。

但是，队列是在更高级别上实现的。它们是为传递**消息**（甚至是抽象对象）而设计的。队列用于保持消息/对象自包含。多个来源可以将对象放入队列中，并且多个消费者可以拉出这些对象，同时 100% 确保作为一个单元进入队列的任何内容也作为一个单元从队列中出来。

*一段时间后编辑：*

我应该在字节流中补充一点，所有字节的检索顺序与发送的顺序相同（保证）。多个发送者的问题是发送顺序（输入顺序）可能已经不清楚或随机，即多个流可能以不可预测的方式混合。

一个通用的队列实现保证单个消息保持完整，即使有多个发送者。消息也按发送顺序检索。然而，对于多个竞争的发送者并且没有进一步的同步机制，同样不能保证输入消息的顺序。

# c++ - 混合静态库和共享库时的链接器依赖关系

> ID：12483232
> 
> 赞同：2
> 
> 时间：2012-09-18T18:55:40.433
> 
> 标签：c++, perl, linker, makefile, xs

我对 Linux 上的链接有以下疑问：

假设我有一个使用 Qt 的类 Foo。要构建这个类，我必须使用 qmake 来生成 Makefile。

稍后我想将这个类 Foo 用于 Perl 模块，它是一个共享库。但是，要构建它，我必须使用 Perl 的 MakeMaker 来生成它自己的 Makefile。

我现在这样做的方式是将类 Foo 构建为静态库，并且在构建 Perl 模块的共享库时，我将它与 Foo 的静态库链接。

问题是在构建 Perl 模块的共享库时，我必须将它与 Foo 的静态库所链接的所有 Qt 库链接。

所以问题是：

1.  这种方法还有意义吗？！

2.  是否可以在构建 Perl 模块的共享库时以不必指定所有依赖项的方式构建 Foo 的静态库？（因为将所有这些依赖项添加到模块的 Makefile 有点困难）

3.  如果 Foo 的库是共享的，而不是静态的，会有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:09:34.853

1）您不能将静态库链接到共享库。

2) 如果它本身是 DSO，则不需要显式链接`Foo`'s 依赖项`Foo`

3) 您可以轻松修改 Makefile.PL`LIBS`部分以添加额外的链接器依赖项。

4）无论如何，Qt 静态链接是一个彻头彻尾的痛苦。除非你有特定的版本依赖和操作系统/平台限制，否则你最好只做整个动态 shebang。提示：即使你有 Qt 的“静态”构建，这个“静态”构建也不会包含它可能决定需要作为可加载模块存在的东西。到过那里。

5）我相信有一个提供Qt4绑定的CPAN模块（有点新）。我从未使用过它，也不知道它的状态，但它可能值得一试。

但是你最好的选择是制作`Foo`一个动态库......然后每个人都很开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:09:03.717

1）这取决于你的目标是什么。

2）如果是为了尽量减少构建它的麻烦，您可以将 Qt 的静态库作为静态库包含到您的 Foo 库中。重要的是您在 Foo 中引用的符号可以在运行时找到。这样你就不需要在你的 PerlMake 中包含 Qt 库了。

3）如果它是关于最小化可执行文件大小，你必须去共享库。然后您应该将所有内容构建为共享库。

静态构建具有独立于目标平台上安装的共享库的优点，同时具有可执行文件大小膨胀和库不可重用性的缺点（加载两个相同的可执行文件需要更多内存）。

链接共享的优点是代码更小，但同时必须在目标平台上安装正确的共享库。

# ruby-on-rails - 如何将博客文章连接到社交媒体流？

> ID：12483233
> 
> 赞同：1
> 
> 时间：2012-09-18T18:55:52.027
> 
> 标签：ruby-on-rails, social-networking

我想连接一个博客，这样每个帖子都会在不同的注册社交媒体流中产生相应的帖子（推文、状态更新……）。

是否有一种宝石可以抽象出不同社交媒体服务的特殊性，并且只允许我通过一些配置来做到这一点？

该博客是在 RoR 3 中完成的，所以显然，我更喜欢 gem，但如果 javascript 中有一个组件可以做到这一点，或者一个 web 服务，那也可以。

有任何想法吗？

# c++ - 意外模板扣减

> ID：12483234
> 
> 赞同：1
> 
> 时间：2012-09-18T18:55:54.830
> 
> 标签：c++, templates

```
template< typename T >
void addVarCB(const std::string &name,
              TwSetVarCallback setCallback, TwGetVarCallback getCallback,
              void * clientData, const std::string &def = "" );

template< class C, typename T >
void addVarCB(const std::string &name,
              C * _this, T(C::*getter)(void), const std::string &def = ""); 
```

以下代码将在运行时编译并崩溃：

```
bar_->addVarCB<MyClass, unsigned>("foo", this, &MyClass::MyClassFn, nullptr); 
```

我实际上希望它根本不会编译，因为没有将其参数作为参数的函数！（请注意，“MyClass，未签名”是不必要的，但只是为了清楚......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:00:14.480

可悲的是，可以从[这里](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)`std::string`构造`nullptr`，具体来说：`(5)`

```
basic_string( const CharT* s, // <== 'nullptr' matches here
              const Allocator& alloc = Allocator() ); 
```

笔记：

> 5) 用 指向的以空字符结尾的字符串的内容构造字符串`s`。字符串的长度由第一个空字符确定。**`s`不能是`NULL`指针。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T19:02:36.303

第一个评论是这与模板推导无关。因为您提供了模板参数，所以没有使用任何推论，而是使用了第二个模板。

函数调用编译，因为有一个转换 from `nullptr`to`const char*`可用于调用构造函数，该`std::string`构造函数采用`const char*`. 该构造函数的合同要求指针有效并指向一个以空字符结尾的字符序列，这在您的代码中是错误的。

# c# - .NET Web 服务参数在序列化之前是 int[]，但之后是 ArrayOfInt？

> ID：12483239
> 
> 赞同：0
> 
> 时间：2012-09-18T18:56:14.970
> 
> 标签：c#, web-services

我有一个 .NET Web 服务，我想接受它`List<int> foo`或`int[] foo`. 我尝试将参数声明为这些类型中的每一种，但是在通过序列化程序运行后它被转换为 ArrayOfInt 。

我有另一个以不同方式实现的 Web 服务（旧的，移动到新结构），因此，它不使用 System.Runtime.Serialization 来生成它的引用。这具有不将 int[] 参数转换为 ArrayOfInt 的有益副作用。

有趣的是，我的 Web 服务的方法很高兴地返回 int[]。它只是不接受 int[] 作为参数：

```
[WebMethod(Description = "Gets a list of Tasks from a list of Order IDs.")]
public List<TaskDto> GetTasksByIDList(int[] idList)
{
    return new List<TaskDto>();
}

[Test]
public void GetTasksByIDList()
{
    Task taskDto = WorkflowServices.CreateInstallTask(OrderID, TaskTemplateID, SiteID, DataCenterID,
                                                         DeviceTemplateID, DeviceName, Username);

    Task secondTaskDto = WorkflowServices.CreateInstallTask(OrderID, TaskTemplateID, SiteID, DataCenterID,
                                             DeviceTemplateID, DeviceName, Username);

    ArrayOfInt idList = new ArrayOfInt{ taskDto.ID, secondTaskDto.ID };

    List<Task> tasks = WorkflowServices.GetTasksByIDList(idList).ToList();

    if (tasks.Count() != idList.Count())
        throw new Exception(string.Format("Failed to find {0} tasks by ID. Received: {1}", idList.Count(), tasks.Count()));
} 
```

关于如何说服我的服务接受 int[] 而不是 ArrayOfInt 的任何想法？我不希望最终用户必须了解 ArrayOfInt 集合对于某些场景而不是其他场景是什么/为什么是必需的。

**更新：**

这是有关此问题的更多信息。首先，我认为正确生成的 Web 服务的屏幕截图。请注意，WSDL 声明指示 ArrayOfInt，但它仍被解释为 int[]：

![在此处输入图像描述](../Images/7fd6fcb4b3b08a5cd6801543ff62d041.png) 现在，相比之下：

![在此处输入图像描述](../Images/967e9a534977f53d6fb70c8cd161d296.png)

这是他们每个 Reference.cs 文件的顶部。请注意，“好”服务引用是使用 ServiceModel 生成的，但“坏”服务引用不会。

```
namespace CableSolve.Web.Api.Tests.ComponentServicesProxy {
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ServiceModel.ServiceContractAttribute(Namespace="http://www.cormant.com/cswebapi", ConfigurationName="ComponentServicesProxy.ComponentServicesSoap")]
public interface ComponentServicesSoap {

namespace CableSolve.Web.Api.Tests.WorkflowServicesProxy {
    using System.Runtime.Serialization;
    using System;
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="Order", Namespace="http://www.cormant.com/cswebapi")]
    [System.SerializableAttribute()] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:03:44.727

我不确定您是否可以像这样直接传递一个数组并让代码识别它。我已经能够传递一个包含数组的自定义对象而没有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:02:45.730

解决方案是确保我的 WebService 中至少有一个复杂类型派生自一个类，或者是一个抽象类。没有抽象类会导致序列化程序选择 System.Runtime.Serialization 作为选择的序列化引擎，但是通过包含抽象类，它被迫使用 System.ServiceModel。

# python - 如何用字符串仅替换字符串中的整数

> ID：12483241
> 
> 赞同：2
> 
> 时间：2012-09-18T18:56:28.480
> 
> 标签：python

如何用字符串仅替换字符串中的整数

我的脚本：

```
x="the number 1234, today the 909090 of the value of the 90.94"
# by the way the has to be proposed to get the123abd 123the" by a string "ItWasanINT""

re.sub(r'\b\d+(?!\.\d+)\b','ItWasanINT',x) 
```

...不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:02:02.543

您可能希望排除前面都没有“数字”的数字。组合并且后面没有“.number”组合：

```
re.sub(r'\b(?<!\d\.)\d+(?!.\d)\b','ItWasanINT', x) 
```

结果：

```
>>> import re
>>> x="the number 1234, today the 909090 of the value of the 90.94"
>>> re.sub(r'\b(?<!\d\.)\d+(?!\.\d)\b','ItWasanINT',x)
'the number ItWasanINT, today the ItWasanINT of the value of the 90.94' 
```

# objective-c - UIImageViews、xib 和后缀（@2x、~iphone、~ipad）

> ID：12483243
> 
> 赞同：0
> 
> 时间：2012-09-18T18:56:34.580
> 
> 标签：objective-c, ios

> **可能重复：**
> [在 Xcode 中为 iPad 指定图像，例如为 iPhone 4 指定 @2x](https://stackoverflow.com/questions/5535630/specify-images-for-ipad-in-xcode-like-2x-for-iphone-4)

我无法找到有关如何根据设备类正确使用图像的最新结论性信息（Apple 文档就像一个扭曲走廊的迷宫，都一样）。我的感觉是，随着时间的推移，这已经发生了一些变化。假设我想支持具有不同图像的非视网膜和视网膜 iphone 和 ipad。

以下是我能想到的所有文件名排列：

```
image.png
image@2x.png

image~iphone.png
image~ipad.png
image@2x~iphone.png
image@2x~ipad.png 
```

我可以这样做：

```
myview.xib
myview~ipad.xib 
```

假设我有四台设备，iPhone 3GS、iPhone 4、iPad 2、iPad 3（或纯粹主义者的“新 iPad”）。

让我们谈谈我将如何设置我的 xib（即我添加一个 UIImageView，我为图像选择什么？）以使用适当的图像，以及如果我使用代码，`[UIImage imageNamed:@"image"]`它将如何表现。

我的理解是，在代码中我可以依靠，`UI_USER_INTERFACE_IDIOM()`但我不相信我需要这样做。

如果有人能解释什么会起作用，什么不会起作用，我知道这对我会有帮助，而我怀疑其他人。如果我以某种方式重复了另一个我找不到的 SO 问题，那么我们可以关闭它并链接到它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:03:11.970

在 iphone xib 中你必须使用 image~iphone。在 ipad xib 上你必须使用 image~ipad。@2x 是在需要文件时自动选择的。

# android - Eclipse：覆盖 project.properties 中定义的库路径

> ID：12483244
> 
> 赞同：8
> 
> 时间：2012-09-18T18:56:43.273
> 
> 标签：android, eclipse, android-library

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)作为库。我们尚未将 ABS 包含到我们的存储库中，因此参与[我们项目](https://bitbucket.org/saibotd/bitbeaker)的每个人都必须单独下载并安装它。ActioBarSherlock 是一个 Android 库项目，我通过在同一个 Eclipse 的工作区中打开它和我的项目来运行它（它们都没有被复制到工作区，它们都存在于另一个文件夹中）并按照以下步骤将其添加到我**[的](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)**`project.properties`中： **[图书馆项目](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)**。

`project.properties`该参考路径是相对的，由于每个人可能在不同的文件夹中都有 ABS，我们在 Eclipse 的文件中也有不同的路径，如`android.library.reference.1`. **有什么方法可以在本地覆盖该库路径，以便我们可以`project.properties`在我们的仓库中使用，但 Eclipse 将在本地使用其他路径？**目前，由于路径不同，每次从我们的存储库中提取时，我都必须手动修复该路径。

存在[其他 *.properties 文件](http://developer.android.com/tools/projects/index.html)，但 Eclipse 会忽略它们：

> **本地属性**
> 
> 构建系统的可定制的计算机特定属性。如果您使用 Ant 构建项目，则它包含 SDK 安装的路径。由于该文件的内容特定于 SDK 的本地安装，因此不应在源版本控制系统中维护 local.properties。*如果您使用 Eclipse，则不使用此文件。*
> 
> **蚂蚁属性**
> 
> 构建系统的可定制属性。您可以编辑此文件以覆盖 Ant 使用的默认构建设置，还可以提供您的密钥库和密钥别名的位置，以便构建工具可以在以发布模式构建时签署您的应用程序。该文件是项目的组成部分，因此请将其保存在源代码修订控制系统中。*如果您使用 Eclipse，则不使用此文件。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:11:17.020

选项：

*   **project.properties**：您可以在每个用户的主文件夹中创建一个链接，`libs`并在`project.properties`参考`~/libs`

*   **使用公共库**：创建一个名为“common”的库项目。在设置中，让它导出 jar。在您的 Android 应用程序中，导入 jar。

我个人认为使用 maven 配置是最好的，但第二个选项是最快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:39:58.477

如果您忽略 repo 中的 project.properties 怎么办？这样每个用户都可以保留自己的，而您不需要一直覆盖它。我不认为你可以在本地覆盖它。

简化事情的另一个选择是您可以将项目导出为 JAR 文件，而不是将其作为库项目引用。如果您不需要修改 ABS 代码，您可以右键单击项目 -> java -> jar 文件，所有开发人员都可以将其保存在同一个地方，以简单起见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:00:46.217

让每个人把它放进去`projectroot/libs`。较新的（ADT 17 及更高版本，IIRC）版本的 ADT 将自动选择它并将其编译到您的应用程序中。请注意，该文件夹是`libs`, 带有`s`, 而不是`lib`。使用`/lib`将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:06:36.853

编辑：我们的项目不再需要这个问题，因为我们从 Eclipse 迁移到 Android Studio 和 Gradle 构建系统。正如@bgs 所建议的，带有 Maven 的 Eclipse 也应该可以工作。

我们之前的做法：

仍在寻找更好的替代方案，但到目前为止，我们最终保留`project.properties`了我们的回购协议。`project.properties`如果拉动时没有对其进行更改，则不会被覆盖。我们还在我们的自述文件中建议用户添加这个

```
[alias]
commit = commit -X project.properties 
```

到他们的`.hg/hgrc`配置文件，以防止意外提交该文件的更改。

这种方法至少有一个缺点：在合并时，`abort: cannot partially commit a merge (do not specify files or patterns)`即使您使用`hg commit -m 'merge'`. 如果发生这种情况，请暂时禁用该别名。

# php - CakePHP 空字段与非空字段验证

> ID：12483245
> 
> 赞同：2
> 
> 时间：2012-09-18T18:56:44.693
> 
> 标签：php, cakephp, cakephp-2.0

我对文件有以下验证规则：

**模型文件.php**

```
public $validate = array(
    'image' => array(
        'maxWidth' => array(
            'rule' => array('maxWidth', 2000),
        ),
        'maxHeight' => array(
            'rule' => array('maxHeight', 2000),
        ),
        'extension' => array(
            'rule' => array('extension', array('gif', 'jpg', 'png', 'jpeg')),
        ),
        'filesize' => array(
            'rule' => array('filesize', 5120000),
        )
    )
); 
```

如果图像为空，是否有办法跳过验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:12:40.923

您可能需要调整检查图像是否为空/未上传的方式 - 我不确定我所拥有的是否正确。但这个想法是检查和取消设置验证规则。

```
public function beforeValidate($options = array()) {
    if (empty($this->data[$this->alias]['image']['name'])) {
        unset($this->validate['image']);
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:07:03.687

见以下网址

[cakePHP 文件上传的可选验证](https://stackoverflow.com/questions/3146933/cakephp-optional-validation-for-file-upload)

或者试试

```
"I assign $this->data['Catalog']['image'] = $this->data['Catalog']['imageupload']['name'];" 
```

因此，当您保存数据数组时，我假设它看起来像这样：

```
array(
    'image' => 'foobar',
    'imageupload' => array(
        'name' => 'foobar',
        'size' => 1234567,
        'error' => 0,
        ...
     )
) 
```

这意味着，imageupload 验证规则正在尝试处理这些数据：

```
array(
    'name' => 'foobar',
    'size' => 1234567,
    'error' => 0,
    ...
 ) 
```

即它试图验证的值是一个数组，而不仅仅是一个字符串。这不太可能通过指定的验证规则。它也可能永远不会“空”。

您可以创建一个可以处理此数组的自定义验证规则，或者您需要在控制器中进行更多处理，然后再尝试验证它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:00:40.210

好的，据我所知，没有这样的代码可以在您的 $validate 变量中设置它。所以你要做的是：

在对应模型的 beforeValidate 中添加如下代码：

```
<?php   
# Check if the image is set. If not, unbind the validation rule
# Please note the answer of Abid Hussain below. He says the ['image'] will probably
# never be empty. So perhaps you should make use of a different way to check the variable
if (empty($this->data[$this->alias]['image'])){
    unset($this->validate['image']);
} 
```

我使用[http://bakery.cakephp.org/articles/kiger/2008/12/29/simple-way-to-unbind-validation-set-remaining-rules-to-required](http://bakery.cakephp.org/articles/kiger/2008/12/29/simple-way-to-unbind-validation-set-remaining-rules-to-required)作为我的主要文章。但是这个函数似乎不是一个默认的 cake 变量。上面的代码应该可以工作。

# macos - 如何在 OSX 中禁用帮助键和上下文相关帮助模式，尤其是使用 Qt

> ID：12483252
> 
> 赞同：4
> 
> 时间：2012-09-18T18:57:08.963
> 
> 标签：macos, cocoa, qt, keyboard, nsapplication

我有一个跨平台的 Qt 应用程序，它在 OSX 中遇到了一些麻烦。OSX 有一个我什至不知道存在的功能——“帮助”键。我的 MBP 没有，一年前购买的 Apple 有线键盘也没有。似乎这主要是较旧的 Mac 拥有的东西。显然，它会生成与 PC 键盘上的 Insert 键相同的扫描代码。

无论如何，当按下 Help 键时，我们的应用程序（或任何接收到 Help 键事件的应用程序）上的光标会变成一个小问号。这似乎是所谓的“上下文相关帮助模式”的一部分，如[NSHelpManager 的 setContextHelpModeActive: 方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSHelpManager_Class/Reference/Reference.html#//apple_ref/occ/clm/NSHelpManager/setContextHelpModeActive%3a)和[NSApplication 的 activateContextHelpMode: 方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/activateContextHelpMode%3a)文档中所述。从文档：

> 在此模式下，光标变为问号，用户单击的任何用户界面项目都会显示帮助。
> 
> 大多数应用程序不使用此方法。相反，当用户按下帮助键时，应用程序会进入上下文相关模式。显示帮助窗口后，应用程序在第一个事件时退出上下文相关帮助模式。

有多少 Cocoa 开发人员真正了解这一点？我假设用这个问号光标单击应用程序中的某些东西应该会显示一条帮助消息，但我还没有找到一个 Cocoa 应用程序实际上它根本没有做任何事情 - 甚至 Apple 的应用程序也没有做任何事情. 事实上，它甚至似乎将很多应用程序置于启用光标文本选择的奇怪模式。

问题是，当我们在这种帮助问题光标模式下以编程方式在 Qt 中更改应用程序光标时，会发生不好的事情。具体来说，我们的应用程序实际上崩溃了。崩溃发生在 NSApplication 的 NSHelpManager 中的 Cocoa 深处。我想知道为什么我们会看到这种崩溃，但实际上我更感兴趣的是我们如何抑制这种“帮助”模式。Qt 或 Cocoa 中没有任何东西可以阻止它，除了可能拦截和压缩一个我还没有尝试过的事件。

有人知道更多吗？

# ruby-on-rails - last_response.body 在 Rack::Test rspec 测试中为空（但在实际应用中不是）

> ID：12483253
> 
> 赞同：2
> 
> 时间：2012-09-18T18:57:19.860
> 
> 标签：ruby-on-rails

我已经为此苦苦挣扎了几个小时。我正在使用 Rack::Test 为我的 Rails 3.2 应用程序编写 API 测试。

不管我做什么，last_response 的主体都是空的（嗯，特别是它有“{}”，所以有 2 个字符）。

以下是测试：

```
describe "updating a product set with JSON" do
  def app
    ProductSetsController.action(:update)
  end

  let(:update_json) { ... }

  before do
    @product_set = FactoryGirl.build(:product_set)
  end
  it { @failures.should == 0 }

  it "should not increment the product set count" do
    expect { put :update, update_json }.to_not change(ProductSet, :count).by(1)
  end

  it "should increment the conditions count" do
    expect { put :update, update_json }.to change(@product_set.conditions, :count).by(2)
  end

  context "response should be valid" do
    before do
      put :update, update_json
    end
    subject { last_response }
    it { should be_ok }
  end
end 
```

所有这些测试都通过了。但身体是空的。

奇怪的是，如果我运行实际的应用程序，响应体肯定不是空的。它有关于更新的 product_set 的 JSON。

所以我以某种方式错误地设置了测试。我敢打赌我忽略了一些非常愚蠢的事情，因为这是我第一次使用 Rack::Test。有什么想法吗？

只是想到我*可能*没有正确设置请求标头。我也在使用 RABL 进行生成。

更新：问题确实出在 RABL 上。还没有找到解决方案，但如果我使用：

```
respond_with(@product_set.update_attributes(get_properties(params)),
  file: 'app/views/product_sets/update.json.rabl', :handlers => [:rabl]) 
```

代替：

```
respond_with(@product_set.update_attributes(get_properties(params))) 
```

然后它在测试中工作，而两者都在开发或生产中工作。此外，我已经确认这不是 Gemfile 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T23:26:11.300

找到了答案。简而言之，确保在 rspec 文档的根 describe 块顶部使用关键字“render_views”，以确保正确呈现视图。

这是有用的文章： [https ://github.com/nesquena/rabl/wiki/Testing-with-rspec](https://github.com/nesquena/rabl/wiki/Testing-with-rspec)

# c# - AutoMapper 不适用于派生类的集合

> ID：12483255
> 
> 赞同：6
> 
> 时间：2012-09-18T18:57:35.733
> 
> 标签：c#, automapper, automapper-2

在处理包含派生类集合的对象时，我遇到了 AutoMapper 2.1.267.0 的问题。我使用以下类在更简单的场景中隔离了我的问题：

```
public class ClassABase
{
    public string Name { get; set; }
}

public class ClassA : ClassABase
{
    public string Description { get; set; }
}

public class ClassBBase
{
    public string Title { get; set; }
}

public class ClassB : ClassBBase
{
    public string Text { get; set; }
}

public class ContainerA
{
    public IList<ClassA> ClassAList { get; set; }
    public ClassA ClassA { get; set; }
}

public class ContainerB
{
    public IList<ClassB> ClassBList { get; set; }
    public ClassB ClassB { get; set; }
} 
```

和这些映射

```
public class ClassABaseToClassBBase : Profile
{
    protected override void Configure()
    {
        CreateMap<ClassABase, ClassBBase>()
            .Include<ClassA, ClassB>()
            .ForMember(dest => dest.Title, opt => opt.MapFrom(src => src.Name));

        Mapper.AssertConfigurationIsValid();
    }
}

public class ClassAToClassB : Profile
{
    protected override void Configure()
    {
        CreateMap<ClassA, ClassB>()
            .ForMember(dest => dest.Text, opt => opt.MapFrom(src => src.Description));

        Mapper.AssertConfigurationIsValid();
    }
}

public class ContainerAToContainerB : Profile
{
    protected override void Configure()
    {
        CreateMap<ContainerA, ContainerB>()
            .ForMember(dest => dest.ClassBList,
                       opt => opt.MapFrom(src => Mapper.Map<IList<ClassA>, IList<ClassB>>(src.ClassAList)))
            .ForMember(dest => dest.ClassB, opt => opt.MapFrom(src => src.ClassA));

    }
} 
```

这里是初始化

```
Mapper.Initialize(x =>
    {
        x.AddProfile<ClassABaseToClassBBase>();
        x.AddProfile<ClassAToClassB>();
        x.AddProfile<ContainerAToContainerB>();
    }); 
```

和一个总结一切的图表（红色箭头代表 AutoMapper 映射）

![在此处输入图像描述](../Images/f85cfdd7a44a3107cc70f7086875167e.png)

我已将 ContainerA 实例映射到 ContainerB。第一种情况可以正常工作。目标对象已完全填充，如下图所示：

![在此处输入图像描述](../Images/f59a4faeee0a7a2112f80b713e51931f.png)

* * *

但是如果我添加这个映射

```
public class ClassBBaseToClassB : Profile
{
    protected override void Configure()
    {
        CreateMap<ClassBBase, ClassB>()
            .ForMember(dest => dest.Text, opt => opt.Ignore());

        Mapper.AssertConfigurationIsValid();
    }
}

Mapper.Initialize(x =>
    {
        x.AddProfile<ClassABaseToClassBBase>();
        x.AddProfile<ClassAToClassB>();
        x.AddProfile<ClassBBaseToClassB>();
        x.AddProfile<ContainerAToContainerB>();
    }); 
```

![在此处输入图像描述](../Images/88ef84b0324110732747da11fcd2dcba.png)

结果是

![在此处输入图像描述](../Images/e3fe2c21576884f62a6df611c6d3cfb8.png)

集合的所有元素的“文本”属性变为空。正如您在图像中看到的，containerB.ClassB 对象的“Text”属性仍然被正确映射。这只发生在集合中。我不知道发生了什么。有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:19:01.800

你好，

尝试以这种方式更改容器之间的映射：

```
 public class ContainerAToContainerB : Profile
    {
        protected override void Configure()
        {
            CreateMap<ContainerA, ContainerB>()
                .ForMember(dest => dest.ClassBList,opt=>opt.MapFrom(src=>src.ClassAList))
                .ForMember(dest => dest.ClassB, opt => opt.MapFrom(src => src.ClassA));

        }
} 
```

# apache - 使用 Apache 为 DocumentRoot 之外的目录提供服务

> ID：12483257
> 
> 赞同：1
> 
> 时间：2012-09-18T18:57:46.123
> 
> 标签：apache, mod-rewrite, apache2

我想`exampleapp.com/clientapp/`在中执行 index.php `/usr/local/apache/htdocs/clientapp`。

这个stackoverflow问题概述了类似于我想做的事情：[https ://stackoverflow.com/a/8454/173630](https://stackoverflow.com/a/8454/173630)

我在让这个工作时遇到了一些麻烦。这是我的 VirtualHost 设置的开始：

```
<VirtualHost exampleapp.com:80>

DocumentRoot /home/platform/src/serverapp/public

RewriteEngine On

Alias /clientapp/ "/usr/local/apache/htdocs/clientapp"
<Directory "/usr/local/apache/htdocs/clientapp">
    FallbackResource index.php
    <IfModule mod_suphp.c>
        suPHP_UserGroup nobody nobody
    </IfModule>
</Directory>

RewriteRule ^/clientapp/(.*)$ /clientapp/$1 [PT] 
```

我正在使用 Apache 2.2.22。我知道这是一种令人困惑的设置——我这样做的原因是为了避免从 clientapp 到 serverapp 的跨域 AJAX 请求。

使用此配置，我没有收到任何错误，它只是落入服务器应用程序。

**更新** 问题是我在 上设置了 BasicAuth `/usr/local/apache/htdocs/clientapp`，并且在访问时没有提示输入密码`exampleapp.com/clientapp/`，它只是默默地失败了。我现在取下了 BasicAuth，让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:32:23.207

在尝试了一些事情之后，看起来这只是 mod_alias 被延迟了，要么盲目地将文件路径和 URI 路径混合在一起，要么将文件路径 ( `/usr/local/apache/htdocs/clientapp`) 误认为 URI 路径（不确定如何）。无论哪种方式，您都可以做两件事中的一件，看起来像。

1.  在文件路径中添加一个斜杠：

    ```
    Alias /clientapp/ "/usr/local/apache/htdocs/clientapp/" 
    ```

2.  从 URI 路径中删除尾部斜杠：

    ```
    Alias /clientapp "/usr/local/apache/htdocs/clientapp" 
    ```

两者似乎都可以解决问题，但我建议使用第二个选项，因为它会匹配对`exampleapp.com/clientapp`（没有尾随斜杠）的请求，并且 mod_dir 会正确地将其识别为目录并将您重定向到`exampleapp.com/clientapp/`. 而如果您选择第一个选项，则只`exampleapp.com/clientapp`会给您一个 404（或文档根目录中的某些内容最终会处理它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:12:38.920

更改`<Directory ...>...</Directory>`并`<Location /clientapp>...</Location>`保留其中的所有内容。

# html - HTTP 元标记定义 - 是否可互换？

> ID：12483259
> 
> 赞同：0
> 
> 时间：2012-09-18T18:57:51.443
> 
> 标签：html, validation, meta-tags

我们有一个与 HTTP 元标记相关的非常特殊的问题。必须将内容语言元标记添加到我们的网站，但我们被迫使用的平台不允许我们以预期/正确的格式添加它，如下所示：

```
<meta http-equiv="content-language" content="en-US" /> 
```

但是，我们可以添加自定义标签，因此可以添加如下：

```
<meta name="content-language" content="en-US" /> 
```

有人确定这两个是否都有效还是必须是http-equiv？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:30:40.723

该标记`<meta name="content-language" content="en-US" />`是 XHTML 中的有效标记。这并没有使它有用。（就像`<meta name="I just invented this!" content="whatever ☺" />`是有效的一样。）可能没有通用软件会关注它。

使用`<meta http-equiv="content-language" content="en-US" />`也可能无关紧要。一些浏览器可能会使用它来确定内容的语言，在没有`xml:lang`和`lang`属性的情况下，但这反过来对任何东西几乎没有影响。在某些情况下，以这种方式声明语言会影响默认字体，但是网页让浏览器使用默认字体的频率如何？

所以关键问题是你应该通过使用这些标签来实现什么。

# javascript - 在 Window.onKeyDown 之后在 HTML 模板上创建文本

> ID：12483264
> 
> 赞同：0
> 
> 时间：2012-09-18T18:58:27.840
> 
> 标签：javascript, html

**更新 0**

收到此错误消息：未捕获的 ReferenceError：$ 未定义

**更新 0**

**更新 1 个最新源**

```
<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
      <title>Reservations</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/style.css">
  </head>
  <body>
      <center><h1>Reservations</h1></center>
    <div class="wrapper">

<p> You can start over at the beginning <a href="/">here.</a> </p>
<big>Reserve some courts online  </big> <br />
<script type="text/javascript" language="JavaScript">
    $( document ).keypress(function() {
    $("#timeStamp span").text("Timestamp is no-longer correct");
});
</script>
<form action="" method="post" >
       <input type="hidden" name="ID" value="Rogers"></input>
       <input type="hidden" name="weekday" value="Tuesday"></input>
       <input type="hidden" name="nowweekday" value="1"></input>
       <input type="hidden" name="month" value="September"></input>
       <input type="hidden" name="nowmonth" value="9"></input>
       <input type="hidden" name="day" value="18"></input>
       <input type="hidden" name="year" value="2012"></input>
       <input type="hidden" name="startTime" value="[15, 0]"></input>
       <input type="hidden" name="endTime" value="[20L, 0L]"></input>

       <input type="hidden" name="court" value="court1"></input>

       <input type="hidden" name="court" value="court2"></input>

       <h1>Tuesday, September 18, 2012 at Rogers Neighborhood Club</h1> 
   <div class="timeStamp" ><h1 id="timeStamp">15:07:24.657430<span></span></h1></div> <br /> 
```

**更新 1 个最新源**

我在页面加载时创建的页面上有一个时间戳。

我想更改时间戳的相邻文本标签，以表明`keyDown`当`window`.

可以用javascript轻松完成吗？

```
<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
      <title>Reservations</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/style.css">
  </head>
  <body>
      <center><h1>Reservations</h1></center>
    <div class="wrapper">

<p> You can start over at the beginning <a href="/">here.</a> </p>
<big>Reserve some courts online  </big> <br />
<script type="text/javascript" language="JavaScript">
    $("*").keypress(function() {
    $("#timeStamp").text("Modified");
    });
</script>

<form action="" method="post" >
       <input type="hidden" name="ID" value="Rogers"></input>
       <input type="hidden" name="weekday" value="Tuesday"></input>
       <input type="hidden" name="nowweekday" value="1"></input>
       <input type="hidden" name="month" value="September"></input>
       <input type="hidden" name="nowmonth" value="9"></input>
       <input type="hidden" name="day" value="18"></input>
       <input type="hidden" name="year" value="2012"></input>
       <input type="hidden" name="startTime" value="[14, 30]"></input>
       <input type="hidden" name="endTime" value="[20L, 0L]"></input>

       <input type="hidden" name="court" value="court1"></input>

       <input type="hidden" name="court" value="court2"></input>

       <h1>Tuesday, September 18, 2012 at Rogers Neighborhood Club</h1> 
   <div class="timeStamp" id="timeStamp"><h1>text14:49:30.274646</h1></div> <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:02:15.320

是的，就像这样：

假设您使用的是 jQuery 并且有这样的时间戳 HTML：

```
<p id="timeStamp">2012-09-18 20:08 <span></span></p>
<!-- the span is where the message will be inserted --> 
```

...以及 jQuery 代码本身：

```
$( document ).keypress(function() {
    $("#timeStamp span").text("Timestamp is no-longer correct");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:08:47.523

像这样改变你的身体元素：`<body onload="document.body.focus()" onkeyup="key()">`......每次按下键时它都会执行键功能。在那里做你想做的一切..

# php - PHP CSV 到关联数组

> ID：12483279
> 
> 赞同：4
> 
> 时间：2012-09-18T18:59:55.073
> 
> 标签：php, arrays, csv, associative-array

我有一个需要导入关联数组的 CSV 文件。数据如下所示：

```
 "General Mills Cereal",http://sidom.com/dyn_li/60.0.75.0/Retailers/Saws/120914_20bp4_img_8934.jpg,$2.25,"9-17.12 oz., select varieties","Valid Sep 14, 2012 - Sep 20, 2012",Saws,"Grocery" 
```

我想将此数据转换为一个数组，我可以在其中获取如下值：

```
 $items[$row]['title'];
 $items[$row]['imgurl'];
 $items[$row]['itemprice'];
 $items[$row]['itemsize'];
 $items[$row]['expir'];
 $items[$row]['storename'];
 $items[$row]['storetype']; 
```

上面的元素对应于我的 CSV 文件。如何将此文件导入这样的数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:05:46.570

我建议使用内置函数[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)
还有一个简单的用法示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T19:37:44.640

[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)会给你一个数字索引的数组。

一旦您阅读了所有记录 to say `$rawData`，其结构如下：

```
$rawData = array(0 => array(0 => "General Mills Cereal",
                            1 => "http://sidom.com/dyn_li/60.0.75.0/Retailers/Saws/120914_20bp4_img_8934.jpg"
                            2 => "$2.25",
                            3 => "9-17.12 oz.",
                            4 => "select varieties",
                            5 => "Valid Sep 14, 2012 - Sep 20, 2012",
                            6 => "Saws",
                            7 => "Grocery"),
                 ...); 
```

要将此`$rawData`数组转换为您想要的，您可以执行以下操作：

```
$fields = array('title', 'imgurl', 'itemprice', 'itemsize',
                'expir', 'storename', 'storetype');

$data = array_map(function($cRow) uses ($fields) {
            return array_combine($fields, $cRow);
        }, $rawData); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T19:02:46.310

见以下网址

[CSV 到关联数组](https://stackoverflow.com/questions/4801895/csv-to-associative-array)

试试看

逐行遍历 csv 文件，然后插入到数组中，如：

```
$array = array();
$handle = @fopen("file.csv", "r");
if ($handle) {
    while (($line = fgetcsv($handle, 4096)) !== false) {

       $array[$line[0]][$line[1]][$line[2]] = $line[3];
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
} 
```

# java - struts2 如果大于/小于等于等

> ID：12483280
> 
> 赞同：2
> 
> 时间：2012-09-18T18:59:57.247
> 
> 标签：java, jsp, struts2, tags, logic

我觉得这在 struts2 中是个坏主意：

```
<s:if test="%{#someVar >= 60}">Hello</s:if> 
```

这真的合法吗？如果不是，那么在 JSP 中检查某些值的更好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-20T06:38:36.393

尖括号 ie在struts 标签`>`内是合法的。`if`从@rees 共享的[链接中，在](http://commons.apache.org/proper/commons-ognl/language-guide.html)**附录：OGNL 语言参考 > 运算符**部分下，您可以看到以下示例：

> e1 >= e2, e1 gte e2
> 大于等于比较

在你的情况下：

```
<s:if test="%{#someVar gte 60}">Hello</s:if> 
```

并且您不需要，`%{}`因为该标志已经告诉*Struts*`#`去查找. 更好的是，如果*someVar*位于 上，即使用 getter 和 setter 在 Action 类中声明为属性，则不需要符号。*`ActionContext``#`*`Value Stack`**

 **这不起作用：
<s:if test="%{#someVar ~~***>e;***~~ 60}">Hello</s:if>**

# jquery - JQuery UI 组合框禁用

> ID：12483283
> 
> 赞同：1
> 
> 时间：2012-09-18T19:00:06.070
> 
> 标签：jquery, jquery-ui

我希望这不是一个重复的问题。我已经在 Stackoverflow 上进行了足够多的搜索，以找到我最简单问题的答案。

我有一组单选框，根据单选框的值，我需要禁用/启用用户从组合框中选择一个。

无论我做什么，我都无法将组合框设为只读或禁用。我通过将 JQueryUI 直接链接到[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js)来使用它。为 jQuery 制作普通组合框的代码如下：-

```
$('#cbCountry").combobox(); 
```

我尝试了在网上不同地方指定的不同方法。似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:13:28.933

轻松修改组合框库以使用：

```
$("#cbCountry").combobox('disable'); 
$("#cbCountry").combobox('enable'); 
```

在您的 combobox.js 文件中添加：

1.  在**_create: function()**添加局部变量“a”（在*var 输入后，**a**，* ...）。
2.  更改`input = $("<input>")`为`input = this.input = $("<input>")`。
3.  更改`a = $("<a>")`为`a = this.a = $("<a>")`。
4.  *在销毁功能*后插入：

--

```
disable: function() {
    this.input.prop('disabled',true);
    this.input.autocomplete("disable");
    this.a.button("disable");
},
enable: function() {
    this.input.prop('disabled',false);
    this.input.autocomplete("enable");
    this.a.button("enable");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:04:41.513

我刚刚检查过，你说得对，禁用组合框比我们想象的要复杂。

所以，我为你做了一个小提琴，你可以在这里找到：http: [//jsfiddle.net/S77xa/61/](http://jsfiddle.net/S77xa/61/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:07:17.890

Boulliou 的答案是更好的答案。这是另一种方式：

如果你确实使用`$.autocomplete`那么：

```
$('#cbCountry").autocomplete( "option", "disabled", true ); 
```

# javascript - 事件监听器阻止另一个事件监听器触发

> ID：12483284
> 
> 赞同：0
> 
> 时间：2012-09-18T19:00:07.293
> 
> 标签：javascript, jquery, javascript-events

我有一个使用事件侦听器（单击）在其中移动的导航，然后我有一个禁用导航的“开始”按钮，以便发生一些自动化。我的问题是，当您加载页面时，单击“开始”按钮，导航事件处理程序会按预期删除事件。但是当我重新加载页面时，在我点击“开始”之前点击导航，之后“开始”按钮将不再起作用 - 它甚至根本不会触发（经过一些警报测试）

导航代码：

```
var hrNav = document.getElementById('hrNav');
    var startButton = document.getElementById('startButton');

    //Check to see if the user is on an iPad or iPhone
    var isiPad = (navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i)) != null;

//EVENT LISTENER FOR NAVIGATION 
//If the user is on an iphone or ipad, use the touchstart event listener rather than click. Use click otherwise, or use onclick for IE users.
    if (isiPad == true) {
        hrNav.addEventListener('touchstart', highlight);
    } else {
        if(hrNav.addEventListener){  
            hrNav.addEventListener('click', highlight); 
            } else {  
                hrNav.attachEvent('on'+'click', highlight);
        }
    }

    //EVENT LISTENER FOR START BUTTON
if (isiPad == true) {
    startButton.addEventListener('touchstart', start);
} else {
    if(startButton.addEventListener){  
        startButton.addEventListener('click', start);
        } else {  
            startButton.attachEvent('on'+'click', start);
    }
}

    //Function for start button
function start(e) {
hrNav.removeEventListener('click', highlight);
}

    //Function for navigation
    function highlight(ev) {
     //Do Stuff
    } 
```

# java - 删除字符串中的空格字符

> ID：12483288
> 
> 赞同：0
> 
> 时间：2012-09-18T19:00:24.843
> 
> 标签：java

我正在读取文本文件中的每一行，对文件执行一些操作并使用 Java 写回同一个文件。而且，行中每个值的位置（索引）很重要。所以我需要保留每个值的位置。

如何删除特定位置（索引）的“空格”字符？

说，下面是我读到的那一行，

```
.... ABC   123....  --There are 3 spaces between ABC and 123 
```

基本上，我想让上面的行写成 ABC 和 123 之间的 2 个空格。

起初，我只是使用字符串的 replaceAll ，但这只是将值向右移动一个，仍然是 3 个空格。所以，我认为我需要的不仅仅是replaceAll。

现在，我得到了找到 ABC 的位置，并试图删除该 1 个空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:02:42.527

你不能搜索整个字符串吗？第一个参数有三个空格，第二个参数有两个空格

```
replaceAll("ABC   123", "ABC  123"); 
```

或者如果 ABC 是您的关键输入

```
replaceAll("ABC   ", "ABC  "); 
```

第一个参数有 3 个空格，后两个在 ABC 之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:05:27.400

由于您知道要删除的字符串 s 的位置 n（从零开始）：

```
s = s.substring(0, n) + s.substring(n + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:05:51.083

您可以将字符串转换为 char 数组并循环它，但这不是一个好方法。

或者你可以这样做：

```
myString = myString.substring(0,(position of first space))+
                myString.substring((position of first space)+1, myString.length); 
```

或类似的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:19:25.100

如果要删除单个字符，只需使用`StringBuilder.deleteCharAt`.

```
final int pos = ...;
str = new StringBuilder(str).deleteCharAt(pos).toString(); 
```

我明确建议你*不*要这样做`substring`。

# xml - 将斜体 XML 标签转换为 WordML 标签 II

> ID：12483294
> 
> 赞同：0
> 
> 时间：2012-09-18T19:00:42.610
> 
> 标签：xml, xslt, wordml

我已经在这些 XSL WordML XML“世界”中生活了好几个星期了，而且，我对所谓的“XSLT 处理器”处理事情的方式*感到非常失望。*

关于一个[老问题](https://stackoverflow.com/questions/234215/xml-to-wordml-using-xslt-1-0-replace-html-tags-within-xml-content-with-wordml "将 XML 标签替换为 WordML")，目的是（如果我们仍然可以称之为简单的话）将 Light Word XML 文件转换为格式良好的 WordML 文件。

对于扩展的问题，我很抱歉，但我想没有其他方法可以解释。

我有以下**XML 文档**：

```
<?xml version="1.0" encoding="utf-8" ?>
<body>
    <heading>
        This is the <bold><italic>standard</italic> text</bold> run.
    </heading>
    <copyright/>
</body> 
```

目的是根据 WordML 文档分别格式化每个*段落*和*字符*样式：

*   WordML*段落*样式元素是“普通”和“标题”（这里只有标题），并被“w:p”标签所包含
*   WordML*字符运行*样式元素是“斜体”、“粗体”和“下划线”（这里只有斜体和粗体），并且包含在“w:r”标签中
*   WordML*文本*节点包含在“w:t”标签中

因此，预期的**WordML 文档**输出如下：

```
<w:wordDocument xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml" 
    xml:space="preserve">
    <w:body>
        <w:p>
            <w:pPr><w:pStyle w:val="Heading"/></w:pPr>
            <w:r>
                <w:t>This is the </w:t>
                <w:rPr><w:b w:val="on"/></w:rPr>
                <w:rPr><w:i w:val="on"/></w:rPr>
                <w:t>standard </w:t>
                <w:rPr><w:i w:val="off"/></w:rPr>
                <w:t>text </w:t>
                <w:rPr><w:b w:val="off"/></w:rPr>
                <w:t>run.</w:t>
            </w:r>
        </w:p>
    </w:body>
</w:wordDocument> 
```

使用以下**XSL 模板文件**（将根据您的反馈进行更正）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"
    xml:space="preserve">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="body">
        <w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml" 
            xmlns="http://www.w3.org/1999/xhtml" 
            xml:space="preserve">
            <w:body>
                <xsl:apply-templates match="normal|heading"/>
            </w:body>
        </w:wordDocument>
    </xsl:template>

    <xsl:template match="heading">
            <w:p>     
            <w:pPr><w:pStyle w:val="Heading"/></w:pPr>
            <w:r>
                <xsl:apply-templates match="italic|bold"/>
            </w:r>
        </w:p>
        <xsl:apply-templates match="heading"/>
    </xsl:template>

    <xsl:template match="bold">
        <w:rPr><w:b w:val="on"/></w:rPr>
        <xsl:apply-templates match="text()"/>
        <w:rPr><w:b w:val="off"/></w:rPr>
        <xsl:apply-templates match="italic|bold"/>
    </xsl:template>

    <xsl:template match="italic">
        <w:rPr><w:i w:val="on"/></w:rPr>
        <xsl:apply-templates match="text()"/>
        <w:rPr><w:i w:val="off"/></w:rPr>
        <xsl:apply-templates match="italic|bold"/>
    </xsl:template>

    <xsl:template match="text()">
        <w:t><xsl:value-of select="."/></w:t>
    </xsl:template>

</xsl:stylesheet> 
```

它们根本*不起作用*，XSLT 处理器完全省略了“匹配”语句。注意双重apply-template是必要的，因为根据段落的类型-字符内容，模板的嵌套位置不同。

**通常的错误结果是在WordML 文档**中获取此类内容：

```
 ...
    <w:p>
        <w:r>
            <w:t>run.</w:t>
        </w:r>
    </w:p>    

    <w:t>This is </w:t>
    ... 
```

这是完全合法的 XML，但完全不能接受，在任何段落之外都有文本，从而导致 WordML 文档损坏。此外，模板在逻辑上是正确的，如果那些 apply-template & match 真的能完成他们的工作的话。

请，任何建议（包括抛出所有这些“模板”并重新开始使用任何标准语言程序）都是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:58:13.407

我很惊讶您没有收到语法错误，因为以下 XSLT 无效

```
 <xsl:apply-templates match="italic|bold"/> 
```

**match**属性对**xsl:apply-templates**无效。应该**选择**

```
<xsl:apply-templates select="italic|bold"/> 
```

我认为主要问题在于您的**粗体**和**斜体**模板

```
<xsl:template match="bold">
     <w:rPr><w:b w:val="on"/></w:rPr>
     <xsl:apply-templates match="text()"/>
     <w:rPr><w:b w:val="off"/></w:rPr>
     <xsl:apply-templates match="italic|bold"/>
</xsl:template> 
```

除了使用**match**而不是**select**之外，您还在关闭**w:b**元素后寻找**斜体**或**粗体**元素。你真正需要做的是，是这个。

 **```
<xsl:template match="bold"> 
   <w:rPr>
      <w:b w:val="on"/>
   </w:rPr>
   <xsl:apply-templates />
   <w:rPr>
      <w:b w:val="off"/>
   </w:rPr>
</xsl:template> 
```

因此，不是显式搜索某些元素，而是搜索任何元素，并使用其他模板来处理匹配。

这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml" xml:space="preserve"> 
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="body"> 
      <w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml" xmlns="http://www.w3.org/1999/xhtml" xml:space="preserve"> 
         <w:body> 
            <xsl:apply-templates select="normal|heading"/>
         </w:body>
      </w:wordDocument>
   </xsl:template>

   <xsl:template match="heading"> 
      <w:p> 
         <w:pPr>
            <w:pStyle w:val="Heading"/>
         </w:pPr>
         <w:r> 
            <xsl:apply-templates />
         </w:r>
      </w:p>
   </xsl:template>

   <xsl:template match="bold"> 
      <w:rPr>
         <w:b w:val="on"/>
      </w:rPr>
      <xsl:apply-templates />
      <w:rPr>
         <w:b w:val="off"/>
      </w:rPr>
   </xsl:template>

   <xsl:template match="italic"> 
      <w:rPr>
         <w:i w:val="on"/>
      </w:rPr>
      <xsl:apply-templates />
      <w:rPr>
         <w:i w:val="off"/>
      </w:rPr>
   </xsl:template>

   <xsl:template match="text()"> 
      <w:t>
         <xsl:value-of select="."/>
      </w:t>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<w:wordDocument xml:space="preserve" xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml" xmlns="http://www.w3.org/1999/xhtml"> 
   <w:body> 
      <w:p> 
         <w:pPr> 
            <w:pStyle w:val="Heading"/>
         </w:pPr>
         <w:r> 
            <w:t> This is the </w:t>
            <w:rPr> 
               <w:b w:val="on"/>
            </w:rPr>
            <w:rPr> 
               <w:i w:val="on"/>
            </w:rPr>
            <w:t> standard </w:t>
            <w:rPr> 
               <w:i w:val="off"/>
            </w:rPr>
            <w:t> text </w:t>
            <w:rPr> 
               <w:b w:val="off"/>
            </w:rPr>
            <w:t> run. </w:t>
         </w:r>
      </w:p>
   </w:body>
</w:wordDocument> 
```**

# r - 我的函数在 R 控制台中有效，但在 R 脚本中无效

> ID：12483298
> 
> 赞同：2
> 
> 时间：2012-09-18T19:00:55.017
> 
> 标签：r

我尝试编写一些函数来使用非中心参数计算 anova 功率和样本大小。

R中有一些非常好的功能，但我的功能是从生物统计学书籍中学习和重现思路......

尽管涉及数学，但我的“nc”和“fpower”函数运行良好，正如预期的那样：

```
nc <- function(diff,n,sd) {
  nonc <- (diff^2/2)*(n/sd^2)
  return(nonc)
}

fpower <- function(k,n,diff,sd,alpha=0.05) {
  nonc <- nc(diff,n,sd)
  dfn <- k - 1
  dfd <- k*(n-1)
  f1 <- qf(1-alpha,dfn,dfd)
  f2 <- pf(f1,dfn,dfd,nonc)
  return(1-f2)
} 
```

但是，我的“fsample”只是没有按预期工作。返回 2，即序列中的第一个 n。

```
fsample <- function(k,diff,sd,alpha=0.05,power=0.9){
  for(n in 2:5000){
    if ( fpower(k,n,sd,alpha) >= power) break
  }
  return(n)
} 
```

但是，如果我“手动”在控制台中运行此代码，它会按预期工作！并返回正确的 n 值。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:05:26.627

您没有将`diff`参数传递给`fpower`，因此参数不是您认为的顺序。 `fsample`应该：

```
fsample <- function(k,diff,sd,alpha=0.05,power=0.9){
  for(n in 2:5000){
    if ( fpower(k,n,diff,sd,alpha) >= power) break
  }
  return(n)
} 
```

请注意，如果您在调用时命名了参数，这不会成为问题，`fpower`因为您会收到有关`diff`丢失且没有默认值的错误：

```
# this will error
fsample <- function(k,diff,sd,alpha=0.05,power=0.9){
  for(n in 2:5000){
    if ( fpower(k=k,n=n,sd=sd,alpha=alpha) >= power) break
  }
  return(n)
} 
```

此外，您可能希望避免为数据对象赋予与函数相同的名称（例如`diff`、`sd`和`power`也是函数），否则您可能会感到困惑。

# html - 垂直对齐 div，外部 div 不增长

> ID：12483299
> 
> 赞同：0
> 
> 时间：2012-09-18T19:00:56.310
> 
> 标签：html, css

我有几个嵌套的`divs`，我需要将其中一个嵌套垂直居中`divs`。通常我会通过给外部`div`的 css 属性`position: relative`和内部`div`的属性来做到这一点`position: absolute`。然后我可以轻松地使用`top`和`left`定位`div`.

但我无法用我目前的结构完成它。这是一个例子：

[http://jsfiddle.net/Epmd4/2/](http://jsfiddle.net/Epmd4/2/)

所以基本上从那个例子来看，带有蓝色边框的 div 应该在绿色 div 内垂直居中。但我无法完成它。

任何人都知道如何做到这一点？

PS。我**只能**将 css 属性添加到`.item`div 和其中的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:04:14.463

试试这个：

```
.item {
    /*position: relative;*/
    background: #00FF66;
    min-height: 60px;
    display:table-cell;
    vertical-align:middle;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Epmd4/4/)**

要使其在 IE7 中工作，需要 JavaScript hack：

```
$(document).ready(function(){
  if($.browser.msie && $.browser.version == 7) {
      $(".tablecell").wrap("<td />");
      $(".tablerow").wrap("<tr />");
      $(".table").wrapInner("<table />");
  }
}); 
```

只需将`.table*`类替换为适当的类即可。

# iphone - NSString 具有代表空白的奇怪字符

> ID：12483300
> 
> 赞同：-1
> 
> 时间：2012-09-18T19:00:59.770
> 
> 标签：iphone, ios, nsstring, whitespace

我在位于资源文件夹中的 Plist 文件中有一个字符串数组。每个索引处的字符串将是通过 POST 请求提交给我的服务器的参数。我从我的服务器收到无法识别参数的错误。

然后我 NSLog 字符串出来，我看到一些奇怪的字符代表空白。那就是问题所在。

```
ECELL¬†¬†¬†10100 (U) - Gen (3.0 min, 3.0 hrs) 
```

它应该是这样的

```
ECELL   10100 (U) - Gen (3.0 min, 3.0 hrs) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:25:17.557

您可以通过 Command+F 检查字符串中的空格是否实际上是空格字符，然后在其中键入“空格”。如果不是，那么只需简单地替换为实际的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:12:33.590

您还应该检查字符串的编码。创建 plist 文件时您使用的是哪一个？NSString 实例？在你的服务器上？检查它是否在所有地方都保持一致

# ajax - Jquery：ajax解释代码

> ID：12483306
> 
> 赞同：0
> 
> 时间：2012-09-18T19:01:25.640
> 
> 标签：ajax, jquery

这是我在课程后编写的一些代码：

```
$(document).ready(function(){
    $.ajax({
        type: 'GET',
        dataType: 'XML',
        url: 'user_timeline.xml',
        success: processXML
    });

    function processXML(response){
        var status = $(response).find("status");
        for (var i=0; i < status.length; i++){
            var text = $("text",status[i]).text();
            $('#status').append("<p>" + text + "</p>");
        };
    }
}); 
```

它工作正常，但有人可以解释一下：

```
$("text",status[i]) 
```

它是否搜索/选择键“文本”的状态数组？

我想知道我在做什么，而不仅仅是做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:07:53.217

该特定行正在寻找`text`内部的元素`status[i]`。请参阅关于此的 jQuery 文档：

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

选择器上下文

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以使用 $() 函数的可选第二个参数为搜索提供替代上下文。例如，要在事件处理程序中进行搜索，可以像这样限制搜索：
> 
> $('div.foo').click(function() { $('span', this).addClass('bar'); });
> 
> 当对 span 选择器的搜索仅限于 this 的上下文时，只有单击元素内的 span 才会获得附加类。
> 
> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

# javascript - 在 Chrome DevTools 中使用闭包库

> ID：12483308
> 
> 赞同：1
> 
> 时间：2012-09-18T19:01:33.127
> 
> 标签：javascript, google-chrome, google-chrome-devtools, google-closure, google-closure-library

[我已经按照 instructred](https://developers.google.com/closure/library/docs/gettingstarted)的形式检查了 Closure 库，但找不到在控制台中使用该库的方法（即 goog.require('math') 只是为了尝试和测试目的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:43:17.733

加载Closure 库的[base.js后，您可以在 Chrome 开发工具控制台中引用该库。](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js)

### 闭包测试.html（加载 base.js）

```
<!doctype html>
<html>
<head>
  <title>Closure Library Test</title>
  <script src="http://closure-library.googlecode.com/svn/trunk/closure/goog/base.js"></script>
</head>

<body>
<h1>Closure Library Test</h1>

</body>
</html> 
```

### Chrome 开发工具控制台

```
> goog.require('goog.math');
<* undefined 
```

观察`Resources | Frames | (closure-test.html) | Scripts`，math.js 将被加载。

```
> goog.math.modulo(-1, 8);
<* 7 
```

# operating-system - 实时任务周期

> ID：12483315
> 
> 赞同：2
> 
> 时间：2012-09-18T19:02:11.127
> 
> 标签：operating-system, scheduled-tasks, real-time, multitasking, scheduler

我对“任务期”的确切含义有点困惑

例如，假设有一个任务，

```
Task(){

while(1) 
  { 
    //do something
    //sleep 6 time units
  }

} 
```

假设它在时间 0 被释放并且它的总执行时间是 4 个时间单位（“做某事”部分）并且这个执行的截止日期是时间 7

假设这个任务在执行周期内没有被抢占，那么这次的周期是4 + 6 = 10，所以下次它会在时间10被释放，所以T = 10

现在假设这个任务在时间 3 被另一个抢占，然后在时间 5 回来，所以它有足够的时间（直到时间 7）执行剩余部分（1 个时间单位）

所以它在时间 6 结束，因此这次，它的周期将是 6 + 6 = 12，所以下一次它将在时间 12 释放，所以 T = 12

那么什么是任务期呢？在 RM 调度中，任务优先级是根据任务周期分配的，那么任务周期的哪些值被考虑？

在进度表上，周期性任务总是显示为具有固定的周期，例如周期为 5，如果任务应该在 0、5、10、15、20 等时间发布，那么如果在 0 发布，它应该完成直到5，等等
如果它在 2 完成，我如何保证下一个版本在 5？
或者假设它在 15 发布，并在 16 和 18 之间执行，我如何保证下一个发布是在 20？
好吧，在这个例子中，很明显，截止日期是由这个所谓的“任务周期”定义的，即 5 的倍数，因为任务不能晚于其下一个预期发布时间完成，任务周期由所需的发布时间定义，但是我不明白这些发布时间如何保持为 5 的倍数

正如我们在开头的示例中看到的那样，同一任务的下一个版本可能会有所不同，具体取决于情况（10 和 12），但只要执行完成直到时间 7 都无关紧要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:16:02.383

*RM是一种静态优先级调度算法，它为每个任务分配与其周期成反比的优先级，即周期越小，优先级越高。...*在[多处理器速率单调调度的最小和最大利用率界限中。](http://libgen.org/scimag/get.php?doi=10.1109/tpds.2004.25)[何塞 M. L'opez 等。人。2003]

必须阅读与 rm 调度相关的问题**。**

另一个资源：[...实时调度算法...](http://www.cs.unc.edu/~anderson/diss/overton.pdf) [Ed Overton et。人。1997]

所以你上面的想法是关于创建一个所谓的`soft deadline aperiodic task`. 为了实现这一点，需要添加一些修改：

```
Task(){

  while(1) 
  { 
    capture_time(start_time)
    //do something
    capture_time(end_time)
    //sleep 6 time units
    // rather than sleeping a fixed time: Sleep the remaining 
    // time until the tasks deadline
    Sleep(desired_period + start_time - end_time) 
  }

} 
```

# javascript - 如何在jquery中解析以下天气api

> ID：12483318
> 
> 赞同：0
> 
> 时间：2012-09-18T19:02:14.747
> 
> 标签：javascript, jquery

我想解析 Weather API (URL) 城市名称、温度等。

我的 JSON 数据如下：

```
{
    "data": {
        "current_condition": [{
            "cloudcover": "25",
            "humidity": "70",
            "observation_time": "04:21 PM",
            "precipMM": "0.3",
            "pressure": "1007",
            "temp_C": "30",
            "temp_F": "86",
            "visibility": "4",
            "weatherCode": "113",
            "weatherDesc": [{
                "value": "Clear"}],
            "weatherIconUrl": [{
                "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png"}],
            "winddir16Point": "S",
            "winddirDegree": "180",
            "windspeedKmph": "7",
            "windspeedMiles": "4"}],
        "request": [{
            "query": "Ahmedabad, India",
            "type": "City"}],
        "weather": [{
            "date": "2012-09-18",
            "precipMM": "2.1",
            "tempMaxC": "32",
            "tempMaxF": "89",
            "tempMinC": "25",
            "tempMinF": "76",
            "weatherCode": "176",
            "weatherDesc": [{
                "value": "Patchy rain nearby"}],
            "weatherIconUrl": [{
                "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0009_light_rain_showers.png"}],
            "winddir16Point": "SSW",
            "winddirDegree": "203",
            "winddirection": "SSW",
            "windspeedKmph": "12",
            "windspeedMiles": "8"},
        {
            "date": "2012-09-19",
            "precipMM": "3.4",
            "tempMaxC": "32",
            "tempMaxF": "89",
            "tempMinC": "25",
            "tempMinF": "76",
            "weatherCode": "176",
            "weatherDesc": [{
                "value": "Patchy rain nearby"}],
            "weatherIconUrl": [{
                "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0009_light_rain_showers.png"}],
            "winddir16Point": "SW",
            "winddirDegree": "223",
            "winddirection": "SW",
            "windspeedKmph": "12",
            "windspeedMiles": "7"}]
    }
}​ 
```

如何解析这些数据并获取城市名称和温度..我不知道..提前谢谢。

===============输出========================

我想获取这样的数据并在文本框上设置

```
Date        2012-09-18    2012-09-19

tempMaxC    32               32
tempMinC    25               25

tempMaxF    89               89
tempMinF    76               76 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:08:26.827

如果您已将此 JSON 作为字符串检索，则将此字符串传递给`JSON.parse()`*****，然后访问检索到的值作为常规 JavaScript 对象：

```
var jsonStr = '{ "data": { "current_condition": [ {"cloudcover": "25", "humidity": "70", "observation_time": "04:21 PM", "precipMM": "0.3", "pressure": "1007", "temp_C": "30", "temp_F": "86", "visibility": "4", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "S", "winddirDegree": "180", "windspeedKmph": "7", "windspeedMiles": "4" } ],  "request": [ {"query": "Ahmedabad, India", "type": "City" } ],  "weather": [ {"date": "2012-09-18", "precipMM": "2.1", "tempMaxC": "32", "tempMaxF": "89", "tempMinC": "25", "tempMinF": "76", "weatherCode": "176",  "weatherDesc": [ {"value": "Patchy rain nearby" } ],  "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0009_light_rain_showers.png" } ], "winddir16Point": "SSW", "winddirDegree": "203", "winddirection": "SSW", "windspeedKmph": "12", "windspeedMiles": "8" }, {"date": "2012-09-19", "precipMM": "3.4", "tempMaxC": "32", "tempMaxF": "89", "tempMinC": "25", "tempMinF": "76", "weatherCode": "176",  "weatherDesc": [ {"value": "Patchy rain nearby" } ],  "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0009_light_rain_showers.png" } ], "winddir16Point": "SW", "winddirDegree": "223", "winddirection": "SW", "windspeedKmph": "12", "windspeedMiles": "7" } ] }}',
    jsonObj = JSON.parse(jsonStr);
    console.log(jsonObj.data.current_condition[0].temp_F); 
```

否则，如果您已检索此 JSON，例如作为某些 jQuery`$.ajax()`成功回调的参数并且它已经是一个对象，则无需调用`JSON.parse()`，而只需直接检索对象的值：

```
$.getJSON("http://example.com/weather.json", function(jsonObj) {
    // The response string is already parsed with $.parseJSON(),
    // so you don't need to parse it yourself.
    // Therefore just go ahead and access the properties of JavaScript object.
    console.log(jsonObj.data.current_condition[0].temp_F);
}); 
```

*****如果您打算支持不支持 JSON.parse/stringify 的旧版浏览器（例如 IE7），则需要包含[JSON 库](https://github.com/douglascrockford/JSON-js/)。

**更新：**

[](http://jsfiddle.net/f0t0n/Jv6Gk/)**特定案例的[**演示**](http://jsfiddle.net/f0t0n/Jv6Gk/)**

# image-processing - 使用 cuda 反转图像时出现未知错误

> ID：12483321
> 
> 赞同：0
> 
> 时间：2012-09-18T19:02:25.943
> 
> 标签：image-processing, opencv, cuda

我开始使用 cuda 实现一些简单的图像处理，但我的代码中有错误当我将像素从设备复制到主机时发生错误

这是我的尝试

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <stdio.h> 
using namespace cv;

unsigned char *h_pixels;
unsigned char *d_pixels;
int bufferSize;
int width,height;

const int BLOCK_SIZE = 32;
Mat image;

void get_pixels(const char* fileName)
{
    image = imread(fileName);
    bufferSize = image.size().width * image.size().height * 3 * sizeof(unsigned char);
    width = image.size().width;
    height = image.size().height;
    h_pixels = new unsigned char[bufferSize];
    memcpy(h_pixels,image.data,bufferSize);
}

__global__ void invert_image(unsigned char* pixels,int width,int height)
{
    int row = blockIdx.y * BLOCK_SIZE + threadIdx.y;
    int col = blockIdx.x * BLOCK_SIZE + threadIdx.x;
    int cidx = (row  * width + col) * 3;
    pixels[cidx] = 255 - pixels[cidx]; 
    pixels[cidx + 1] = 255 - pixels[cidx + 1]; 
    pixels[cidx + 2] = 255 - pixels[cidx + 2]; 

}
int main()
{
    get_pixels("D:\\photos\\z.jpg");

    cudaError_t err = cudaMalloc((void**)&d_pixels,bufferSize);
    err =  cudaMemcpy(d_pixels,h_pixels,bufferSize,cudaMemcpyHostToDevice);
    dim3 dimBlock(BLOCK_SIZE,BLOCK_SIZE);
    dim3 dimGrid(width/dimBlock.x,height/dimBlock.y);

    invert_image<<<dimBlock,dimGrid>>>(d_pixels,width,height);

    unsigned char *pixels = new unsigned char[bufferSize];

    err= cudaMemcpy(pixels,d_pixels,bufferSize,cudaMemcpyDeviceToHost);// unknown error 
    const char * errStr = cudaGetErrorString(err);
    cudaFree(d_pixels);
    image.data = pixels;
    namedWindow("display image");
    imshow("display image",image);
    waitKey();
    return 0;
} 
```

另外我如何找出cuda设备中发生的错误感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:49:25.803

*   首先确保正确读取图像文件。
*   检查是否使用 CUDA_SAFE_CALL(cudaMalloc(..)) 分配了设备内存
*   检查图像的尺寸。如果图像的尺寸不是 BLOCKSIZE 的倍数，那么您可能会丢失一些索引并且图像没有完全反转。
*   在内核调用后调用 cudaDeviceSynchronize 并检查其返回值。
*   在不调用内核的情况下运行代码时是否出现任何错误？
*   您没有释放 h_pixels 并且可能存在内存泄漏。
*   您可以使用“blockDim.x”，而不是在内核中使用 BLOCKSIZE。所以计算像“blockIdx.x * blockDim.x + threadIdx.x”这样的索引
*   尽量不要触及内核代码中的内存区域，即注释掉内核中的内存更新（访问像素数组的行）并检查程序是否继续失败。如果它没有继续失败，您可能会越界访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:01:45.590

OpenCV 图像不是连续的。每行是 4 字节或 8 字节对齐的。您还应该`step`将 Mat 的字段传递给 CUDA 内核，以便您可以`cidx`正确计算。计算输出指数的通用公式是：

`cidx = row * (step/elementSize) + (NumberOfChannels * col);`

在您的情况下，它将是：

`cidx = row * step + (3 * col);`

参考图像的对齐方式，您的缓冲区大小等于`image.step * image.size().height`.

接下来是@phoad 在第三点中指出的。您应该创建足够数量的线程块来覆盖整个图像。

这是网格的通用公式，它将为任何图像大小创建足够数量的块。

`dim3 block(BLOCK_SIZE,BLOCK_SIZE);`

`dim3 grid((width + block.x - 1)/block.x,(height + block.y - 1)/block.y);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:04:55.487

在内核调用后立即使用此命令打印内核错误：

```
printf("error code: %s\n",cudaGetErrorString(cudaGetLastError())) 
```

# c# - ASP .NET 系统设计建议。

> ID：12483322
> 
> 赞同：3
> 
> 时间：2012-09-18T19:02:29.477
> 
> 标签：c#, asp.net, .net, wcf, service

我正在开发一个系统（.NET 网站），该系统使用类库来操作位于 MS SQL 服务器上的数据。最近，我一直想知道放弃这些类并使用 WCF 进行数据操作。这样我就可以使用 Android、Java 等中的服务......

好吧，有些类会返回大量数据，比如一个 125x10000 的数据表……我担心 WCF 无法处理……或者系统性能会受到太大影响。

你们有什么感想？WCF 是否可以用于在多用户系统上检索/更新大量数据？如果没有，还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:43:08.993

也许我误解了您想要实现的目标，但听起来您的建议是将数据库负载转移到应用程序端 - 将整个数据表拉到应用程序以运行您可能的数据库操作。这就是 SQL 服务器的设计目的。

通过这样做，您将所有负载都放在了应用程序服务器上，并且未充分利用所关注的数据库区域。编写一些代码来处理锁定，然后让数据库完成它的工作。你最终会编写更多的过程，但这是正常的，从长远来看会更好，因为你可以在后端编辑它们而无需重新编译应用程序代码。IMO 在存储过程中执行所有数据库操作，并通过 WCF 返回较小的结果集。

我的意思是……你真的打算通过 WCF 服务将那么多信息传送到手机上吗？！

# c++ - 继承的 POD 类型的值初始化

> ID：12483323
> 
> 赞同：2
> 
> 时间：2012-09-18T19:02:33.230
> 
> 标签：c++

假设如下：

```
struct POD1 { int a; };
struct POD2 : POD1 { int b; };

int main() {
    POD2 p2 = POD2();
    return 0;
} 
```

定义后两者都`p2.a`等于`p2.b`0吗？`p2`基本上我不确定值初始化规则是否也适用于 POD 类型的基类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:06:21.283

~~POD2 p2();~~

~~这并不符合您的期望，而是通过名称声明一个`p2`不带参数并返回 a的函数`POD2`。~~

现在，稍微不同的情况是：

```
POD2 p2 = POD2(); 
```

表达式的右侧`POD2()`表示创建一个*值初始化*的临时值[5.2.3/2]。*没有用户定义构造函数的用户定义类型的值初始化*是*零初始化*[8.5/7]，并且该类型的零*初始化*将*零初始化*每个成员和基数 [8.5/5] 保证两个成员为 0。

# python - 在 Python 的嵌套元组中查找字符串是否存在

> ID：12483330
> 
> 赞同：4
> 
> 时间：2012-09-18T19:03:02.417
> 
> 标签：python, python-2.7

在 Python 2.7.x 中，检查嵌套元组中是否存在字符串（或任何其他数据类型）的最佳（也是最快）方法是什么？

例如：

```
RECIPES = (
    ('apple', 'sugar', 'extreme_Force'),
    ('banana', 'syrup', 'magical_ends'),
    ('caramel', 'chocolate', 'pancake_MONSTER'),
    ('banana',('someAnother','banana'))
) 
```

需要检查此元组是否`banana`出现在任何嵌套元组中并返回位置索引，在这种情况下`1,0`。

此外，元组可以嵌套到任何深度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T19:18:07.287

递归多位置索引：

```
import sys
from collections import Sequence,defaultdict

#making code python3-compatible
if sys.version_info[0] == 3:
    basestring = str

def buildLocator(tree):
    locator = defaultdict(list)
    def fillLocator(tree, locator,location):
        for index,item in enumerate(tree):            
            if isinstance(item,basestring):
                locator[item].append(location+(index,))
            elif isinstance(item,Sequence):
                fillLocator(item,locator, location+(index,))
    fillLocator(tree,locator,())
    return locator

RECIPES = (
    ('apple', 'sugar', 'extreme_Force'),
    ('banana', 'syrup', 'magical_ends'),
    ('caramel', 'chocolate', 'pancake_MONSTER'),
    ('banana',('someAnother','banana'))
)
locator = buildLocator(RECIPES)

print(locator['banana']) 
```

印刷

```
[(1, 0), (3, 0), (3, 1, 1)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T19:07:59.377

如果您只需要第一个匹配项，则生成器可以很好地做到这一点：

```
def find_location(text):
    try:
        return next((i, j) 
            for i, t in enumerate(RECIPES)
            for j, v in enumerate(t)
            if v == text)
    except StopIteration:
        return (None, None)  # not found 
```

用法：

```
>>> find_location('banana')
(1, 0)
>>> find_location('apple')
(0, 0)
>>> find_location('chocolate')
(2, 1)
>>> find_location('spam')
(None, None) 
```

注意第一个值是整个`RECIPES`序列的索引，第二个是单个元组的索引；`RECIPES[1][0] == 'banana'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:10:11.297

使用 for 循环查找该项目是否存在，并在找到后立即中断循环。

```
In [48]: RECIPES = (
   ....:     ('apple', 'sugar', 'extreme_Force'),
   ....:     ('banana', 'syrup', 'magical_ends'),
   ....:     ('caramel', 'chocolate', 'pancake_MONSTER'),
   ....: )

In [49]: for i,x in enumerate(RECIPES):
   ....:     if 'banana' in x:
   ....:         print i,x.index('banana')
   ....:         break
   ....:         
   ....:         
1 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:16:30.923

为什么不试试`numpy`？

```
import numpy as np
RECIPES = (
    ('apple', 'sugar', 'extreme_Force'),
    ('banana', 'syrup', 'magical_ends'),
    ('caramel', 'chocolate', 'pancake_MONSTER'),
)
np_recipes = np.array(recipes)
indices = zip(*np.where( np_recipes == 'banana' ) ) #[(1, 0)] 
```

这适用于您的示例，因为数据排序良好。我想应该注意的是，这不适用于您所要求的任意嵌套（但我会留在这里，以防其他人发现这个问题有类似的、更受限制的问题）。

# javascript - 是否可以通过几个保留其结构的较小文件来拆分巨大的 javascript 文件？

> ID：12483333
> 
> 赞同：0
> 
> 时间：2012-09-18T19:03:13.930
> 
> 标签：javascript

我有相当大的 javascript 类，其中有一堆方法存储在一个 js 文件中。这些方法可以在逻辑上分类为常用方法、过滤数据的方法、导航方法等。现在我希望这个类被单独的文件分割，每个文件都包含自己的特定类别方法，并将所有属性和常用方法留在当前文件中。简而言之，我需要使用 c#`partial`关键字的东西。

我想避免使用`prototype`，因为这意味着我必须为每个函数键入类名，`class.prototype.functionname = function () { ... }`这样看起来不太好。

**更新**：这就是我的班级的样子

```
function MyClass() {
    var self = this;
    self.common = function() {...}
    self.filterData = function() {...}
    self.navigate = function() {...}
} 
```

我不知道如何`self`正确处理原型或扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:10:02.623

# ruby-on-rails - 带有另一个浏览器字符串的 Rails 应用程序

> ID：12483335
> 
> 赞同：0
> 
> 时间：2012-09-18T19:03:21.363
> 
> 标签：ruby-on-rails

我对 Rails 中的浏览器字符串有疑问。

例如，我有带有路线的 rails 应用程序：

```
resources :posts 
```

这个资源创建：

```
post/:id

post/21
post/167
post/356 
```

但我创建了一个简单的博客，我想将 ':id' 重命名为

```
post/some-name
post/another-name
post/another-different-name 
```

在帖子中我有标题，文本字段，但我不知道怎么做

我知道这可以通过操纵 :id 来实现

你能发布一些关于这个问题的详细答案的链接，或者一些简单的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:29:42.847

你当然可以在 URL 中放任何你想要的东西，实际上有关于它的 railcast： [http ://railscasts.com/episodes/63-model-name-in-url](http://railscasts.com/episodes/63-model-name-in-url)

最好（阅读：更容易）也将 model.id 保留在 URL 中，或者这意味着帖子名称必须是唯一的，否则您可以放置​​任何您想要的内容：

```
/post/2465-my-pretty-post-name 
```

此外，还有 gem [friendly_id](https://github.com/norman/friendly_id)和相关的 railcast： [http: //railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:13:41.683

为什么要更改 /post/:id ？您可以实现类似 /post/:id/comments

你可以在你的 routes.rb 中使用这样的嵌套资源来做到这一点

资源 :posts 做资源 :comments end

在此处查看更多详细信息 [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:33:50.460

如果您将 to_param 方法添加到模型中，那么您可以在您的 URL 系统中使用它。

```
class SomeModel < ...

  def to_param
    self.title
  end

end 
```

然后在您的控制器中，设置一个过滤器以使用 title 属性而不是用于 find 方法的 ID 属性来获取模型。

```
before_filter :setup_record

def setup_record
  @record ||= Record.find_by_title(params[:id])
end 
```

您必须确保您的标题保持唯一，如果您更改它，您将不得不丢弃所有其他以前的 URL 或保留旧名称的历史记录。

# gwt - GWT 代码如何在开发代码中运行

> ID：12483341
> 
> 赞同：2
> 
> 时间：2012-09-18T19:03:54.680
> 
> 标签：gwt

在 GWT web/production 模式下，Java 代码被编译成在浏览器中呈现的 Javascript 代码。

另外，我一直认为在 GWT 开发模式下，GWT 开发者插件将我的 Java 代码编译成 JavaScript 以在浏览器中呈现。但是在阅读了一些网站之后，我才知道没有将代码编译为 JavaScript 以在开发模式下在浏览器中查看它。

所以，我想知道：如果它们不是 JavaScript 代码，我在这种模式下在浏览器中看到的所有这些小部件是什么？我不明白。

请帮助理解这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T20:03:14.580

开发模式的关键在于您的代码在 Java 中运行。如果您可以使用标准 Java 调试器，这是一个先决条件。[您将在GWT 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideDevMode)中找到高级概述。

魔术发生在[JSNI 方法](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)和[覆盖类型](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)上：当一个类被加载时，它的所有 JSNI 方法都被提取，它们的 JS 主体被发送到浏览器，准备好执行（然后是 JavaScript），并且这个类被动态*重写*重新实现 JSNI 方法以调用浏览器（*通过*您安装在那里的 Dev Plugin 并由`?gwt.codesvr=`URL 中）执行相应的 JS 函数。这就是为什么 Java 对象在 JSNI 方法中被视为不透明句柄的原因；它们被分配了一个数字 ID，以便将 Java 对象与服务器端的虚拟 JS 对象配对。对覆盖类型进行了类似但更复杂的重写，并且在将 JS 对象传递给 Java 代码（作为覆盖类型）时使用相同的 ID 映射。

顺便说一句，[超级开发模式（几乎）](https://developers.google.com/web-toolkit/articles/superdevmode)*即时*编译为 JavaScript 。

# c# - is 关键字不适用于继承（ baseClass 是 DerivedObject ）= true “我怎么能避免这种情况”

> ID：12483343
> 
> 赞同：3
> 
> 时间：2012-09-18T19:04:01.997
> 
> 标签：c#, inheritance, polymorphism

我有课

```
Interface IVehicle
{
    int numberOfWheels;
    bool CanCross(string obstacle);
    // etc
}

class Car : IVehicle
{
    public int numberOfWheels = 4;
    public bool CanCross(string obstacle)
    {
       switch(obstacle) 
       {
          case "river":
              return false;
          case "grass":
              return true;
          // etc
       }
    }
}

class RaceCar: Car
{
    public int numberOfWheels = 4;
    public bool CanCross(string obstacle)
    {
       switch(obstacle) 
       {
          case "river":
              return false;
          case "grass":
              return false;
          // etc
       }
    }
} 
```

**然后我有方法：**

```
 public object Foo(IVehicle vehicle, string obstacle)
 {                              
      if(vehicle.CanCross(obstacle)==false)
      {
          if(vehicle is Car)
             return Foo(new RaceCar(), obstacle);
          else if(vehicle is RaceCar)
             return Foo(new OldCar(), obstacle);
         // etc
          else
             return null;
      }

      // implementation

      return someObject;
 } 
```

请注意，如果车辆无法越过障碍物，我会再次递归调用相同的方法以尝试使用不同的车辆。**我的问题是**为什么如果 vehicle = SpeedCar 然后`if (vehicle is Car)`评估为**true**？可能是因为它继承自它。我如何检查车辆是否是 SpeedCar 而不是 Car。我现在可以调用 ToString() 方法然后执行正则表达式，但是如果我重命名我的类，我会破坏我的代码......

换句话说，如果我通过的车辆无法通过并且它恰好是汽车或 SpeedCar，我将进入无限循环......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T19:23:14.537

您可以使用运算符来执行此`is`操作 - 实际上，它比使用`GetType()`.

您的继承层次结构是`IVehicle`-> `Car`-> `RaceCar`，所以任何 a`RaceCar`也将是 a`Car`和 an `IVehicle`。如果您首先测试基类，您的代码将永远无法达到更具体的测试，因为基类无论如何都会匹配 - 这就是您遇到问题的原因。

在需要为继承链中的类做不同事情的场景中进行测试的正确方法是首先测试更具体（更多派生）的类，最后测试基类。

```
if (vehicle is RaceCar)
{
    // code
}
else if (vehicle is Car)
{
    // code
}
else
{
    // code
} 
```

[丹尼斯的回答](https://stackoverflow.com/a/12483409/682404)是正确的，使用虚函数可以简化这些情况，因为在大多数情况下，当您拥有虚函数时，您可以避免此类测试 - 只是所有派生类都可以提供自己的函数实现（或依赖基本实现而不覆盖在适当的时候使用）。如果有一个基实现没有意义，您可以使用`abstract`关键字来指示派生类必须提供一个实现而不依赖于基类。然后这些派生类`override`用于实现这些抽象函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-18T19:08:50.777

> 我如何检查车辆是否是 SpeedCar 但不是汽车

```
vehicle.GetType() == typeof(SpeedCar) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-18T19:49:46.720

虽然其他人已经回答了您的问题，但我想向您推荐另一种生成 Foos 的方法。使用[多态性](https://en.wikipedia.org/wiki/Polymorphism_(computer_science))摆脱无休止的 if-else 链（或 switch 语句），让车辆实现一个方法`CreateAlternateVehicle`

```
public interface IVehicle
{
    bool CanCross(string obstacle);

    IVehicle CreateAlternativeVehicle();
} 
```

A`Car`将创建 a `RaceCar`， a `RaceCar`an`OldCar`等等。链条中的最后一辆车可以返回`null`。例如，该类`Car`将像这样实现它：

```
public IVehicle CreateAlternativeVehicle()
{
    return new RaceCar();
} 
```

然后你的 Foo 创作变成

```
public object Foo(IVehicle vehicle, string obstacle)
{                              
    if(!vehicle.CanCross(obstacle)) {
        var altVehicle = vehicle.CreateAlternativeVehicle();
        if (altVehicle == null) {
            return null;
        }
        return Foo(altVehicle, obstacle);
    }
    ...
} 
```

很多时候，if-else 链和 switch 语句是一种暗示，可以以更面向对象的方式完成某些事情。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-18T19:08:05.113

您应该只检查是否（车辆是 RaceCar）

# c# - 无论如何，将消息从集线器类发布到另一个集线器的 javascript 处理程序函数

> ID：12483344
> 
> 赞同：0
> 
> 时间：2012-09-18T19:04:01.153
> 
> 标签：c#, asp.net, signalr, signalr-hub

我有 2 个集线器类：集线器 A 和集线器 B。

在 hubA 我有一个执行任务的函数：

```
public void doSomething(string test){
    Clients[Context.ConnectionId].messageHandler(test);
} 
```

我不希望这个函数发回 `hubA.messageHandler = function(){...}` 我希望能够发回消息`hubB.messageHandler = function(){...}`，但我是从我的`hubA`集线器类内部调用它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:44:51.833

如果两个集线器都托管在同一个应用程序中，您应该能够使用：

```
GlobalHost.ConnectionManager.GetHubContext<HubB>() 
```

现在的诀窍是，您似乎想向 HubB 上的特定客户端发送消息，问题是`Context.ConnectionId`HubA 的 ID 与 HubB 的 ID 不同。因此，您需要做的是从 ConnectionId 到 HubA 和 HubB 中的某种逻辑用户的某种映射。然后，当您需要“弥合差距”时，您可以通过 HubA 的 ConnectionId 从 HubA 查找逻辑用户，然后找到 HubB 的 ConnectionId。此时您的代码可能如下所示：

```
public void DoSomething(string test)
{ 
    // Get HubB's ConnectionId given HubA's ConnectionId (implementation left to you)
    string hubBConnectionId = MapHubAConnectionIdToHubBConnectionId(Context.ConnectionId);

    // Get the context for HubB
    var hubBContext = GlobalHost.ConnectionManager.GetHubContext<HubB>();

    // Invoke the method for just the current caller on HubB
    hubBContext.Clients[hubBConnectionId].messageHandler(test); 
} 
```

# c# - 用于 Html5 的 .Net 网络摄像头媒体服务器

> ID：12483348
> 
> 赞同：0
> 
> 时间：2012-09-18T19:04:35.693
> 
> 标签：c#, webcam, signalr

我正在尝试创建一个 Html5 媒体服务器，它可以接收和流式传输网络摄像头视频，并且需要更多的指导。通过 Html5 的网络摄像头可以通过哪些方式流式传输到服务器，服务器应如何将其流式传输回客户端？有没有办法通过像 SignalR 这样的东西来做到这一点？是否有任何实时压缩服务器端 .net dll 可用于获取传入视频并将其流式传输到客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:32:42.927

HTML5`<video>`标签与协议无关。这意味着它不关心视频格式。

您遇到的问题是了解哪些浏览器支持流格式。一些浏览器支持 RTP 或 ASF 流。目前没有所有浏览器都支持的流格式。HTML5 不是当今流媒体的最佳选择。

# vb.net - Gridview - 使用页脚添加行按钮

> ID：12483349
> 
> 赞同：0
> 
> 时间：2012-09-18T19:04:36.803
> 
> 标签：vb.net, gridview, visual-studio-2012

我正在寻找有关添加行按钮的帮助，我在插入数据时遇到了问题。

这是我收到的错误：

> 错误 1：方法 'Protected Sub SqlDataSource2_Inserting(sender As Object, e As System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs)' 无法处理事件'Public Event Inserting(sender As Object, e As System.Web.UI.WebControls.SqlDataSourceCommandEventArgs)'因为它们没有兼容的签名。C:\Users\Administrator\Documents\Visual Studio 2012\Projects\Certificates\Certificates\WebForm1.aspx.vb 17 161 证书

html代码：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="Certificates.WebForm1" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <br />
        <br />
        <br />
        <br />
        <asp:GridView ID="Laboratory" runat="server" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="LaboratoryID" DataSourceID="SqlDataSource2" ShowFooter="True">
            <Columns>
                <asp:TemplateField ShowHeader="False">
                    <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:Button ID="AddRow" runat="server" CommandName="Insert" Text="Add" />
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Name" SortExpression="Name">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtName" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Address" SortExpression="Address">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Address") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtAddress" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label2" runat="server" Text='<%# Bind("Address") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Providence" SortExpression="Providence">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("Providence") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtProvidence" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label3" runat="server" Text='<%# Bind("Providence") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="City" SortExpression="City">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("City") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtCity" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label4" runat="server" Text='<%# Bind("City") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="ZipCode" SortExpression="ZipCode">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("ZipCode") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtZipCode" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label5" runat="server" Text='<%# Bind("ZipCode") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Country" SortExpression="Country">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox6" runat="server" Text='<%# Bind("Country") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtCountry" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label6" runat="server" Text='<%# Bind("Country") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Phone" SortExpression="Phone">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox7" runat="server" Text='<%# Bind("Phone") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtPhone" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label7" runat="server" Text='<%# Bind("Phone") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Fax" SortExpression="Fax">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("Fax") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtFax" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label8" runat="server" Text='<%# Bind("Fax") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Email" SortExpression="Email">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox9" runat="server" Text='<%# Bind("Email") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtEmail" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label9" runat="server" Text='<%# Bind("Email") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString1 %>" DeleteCommand="DELETE FROM [Laboratory] WHERE [LaboratoryID] = @LaboratoryID" InsertCommand="INSERT INTO [Laboratory] ([Name], [Address], [Providence], [City], [ZipCode], [Country], [Phone], [Fax], [Email]) VALUES (@Name, @Address, @Providence, @City, @ZipCode, @Country, @Phone, @Fax, @Email)" SelectCommand="SELECT * FROM [Laboratory]" UpdateCommand="UPDATE [Laboratory] SET [Name] = @Name, [Address] = @Address, [Providence] = @Providence, [City] = @City, [ZipCode] = @ZipCode, [Country] = @Country, [Phone] = @Phone, [Fax] = @Fax, [Email] = @Email WHERE [LaboratoryID] = @LaboratoryID">
            <DeleteParameters>
                <asp:Parameter Name="LaboratoryID" Type="Int32" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="Name" Type="String" />
                <asp:Parameter Name="Address" Type="String" />
                <asp:Parameter Name="Providence" Type="String" />
                <asp:Parameter Name="City" Type="String" />
                <asp:Parameter Name="ZipCode" Type="String" />
                <asp:Parameter Name="Country" Type="String" />
                <asp:Parameter Name="Phone" Type="String" />
                <asp:Parameter Name="Fax" Type="String" />
                <asp:Parameter Name="Email" Type="String" />
            </InsertParameters>
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String" />
                <asp:Parameter Name="Address" Type="String" />
                <asp:Parameter Name="Providence" Type="String" />
                <asp:Parameter Name="City" Type="String" />
                <asp:Parameter Name="ZipCode" Type="String" />
                <asp:Parameter Name="Country" Type="String" />
                <asp:Parameter Name="Phone" Type="String" />
                <asp:Parameter Name="Fax" Type="String" />
                <asp:Parameter Name="Email" Type="String" />
                <asp:Parameter Name="LaboratoryID" Type="Int32" />
            </UpdateParameters>
        </asp:SqlDataSource>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />

    </div>
    </form>
    </body>
    </html> 
```

这是我的vb代码：

```
Public Class WebForm1
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Private Sub GridView1_RowCommand(sender As Object, e As GridViewCommandEventArgs) Handles  Laboratory.RowCommand
    ' Insert data if the CommandName == "Insert"
    ' and the validation controls indicate valid data...
    If e.CommandName = "Insert" AndAlso Page.IsValid Then
        ' Insert new record...
        SqlDataSource2.Insert()
    End If
End Sub

    ' Sub to reference footer text cells and Insert them into new row in database
Protected Sub SqlDataSource2_Inserting(ByVal sender As Object, ByVal e As  System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs) Handles SqlDataSource2.Inserting
    ' Programmatically reference Web controls in the inserting interface...
    Dim NewName As TextBox = Laboratory.FooterRow.FindControl("txtName")
    Dim NewAddress As TextBox = Laboratory.FooterRow.FindControl("txtAddress")
    Dim NewProvidence As TextBox = Laboratory.FooterRow.FindControl("txtProvidence")
    Dim NewCity As TextBox = Laboratory.FooterRow.FindControl("txtCity")
    Dim NewZipCode As TextBox = Laboratory.FooterRow.FindControl("txtZipCode")
    Dim NewCountry As TextBox = Laboratory.FooterRow.FindControl("txtcountry")
    Dim NewPhone As TextBox = Laboratory.FooterRow.FindControl("txtPhone")
    Dim NewFax As TextBox = Laboratory.FooterRow.FindControl("txtFax")
    Dim NewEmail As TextBox = Laboratory.FooterRow.FindControl("txtEmail")

    ' Set the ObjectDataSource's InsertParameters values...
    e.InputParameters("Name") = NewName.Text
    e.InputParameters("Address") = NewAddress.Text
    e.InputParameters("Providence") = NewProvidence.Text
    e.InputParameters("City") = NewCity.Text
    e.InputParameters("ZipCode") = NewZipCode.Text
    e.InputParameters("Country") = NewCountry.Text
    e.InputParameters("Phone") = NewPhone.Text
    e.InputParameters("Fax") = NewFax.Text
    e.InputParameters("Email") = NewEmail.Text
End Sub

Protected Sub GridView1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles    GridView1.SelectedIndexChanged

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:08:35.793

Did you check here?

[http://forums.codeguru.com/showthread.php?385892-RESOLVED-Adding-rows-to-GridView-programatically](http://forums.codeguru.com/showthread.php?385892-RESOLVED-Adding-rows-to-GridView-programatically)

# android - 向 android.graphics 包中的形状添加事件侦听器

> ID：12483353
> 
> 赞同：1
> 
> 时间：2012-09-18T19:04:47.253
> 
> 标签：android

我是 android 编程的新手，我正在尝试创建一个简单的程序，我可以在其中处理不同形状上的拖动和触摸事件。

从android API，我了解到向小部件（例如：ImageView）添加事件侦听器很容易。但是对于 RectF 或 Circle 等图形，我该如何做呢？

由于我是新手，如果有人能用更简单的术语解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T03:18:56.870

您可以覆盖视图的 onTouch 方法

每当有触摸时，获取触摸的坐标

使用 Rect.contains(x,y) 来检测触摸是否在特定的 Rect 内

相应地执行操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:14:59.690

[OnClickListeners](http://developer.android.com/reference/android/view/View.OnClickListener.html)之类的东西只能添加到[View](http://developer.android.com/reference/android/view/View.html)类的子集中。

但是，对于形状等，您可以覆盖基本布局的 onTouch() 方法。然后在[MotionEvent.ACTION_DOWN](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_DOWN)中获取触摸点的坐标，并查看它们是否与您的任何形状相交。如果它与形状相交，则用户单击该形状，您可以实现所需的任何代码。

# asp.net-mvc-3 - 带有 Ajax 和参数的网格上的 Kendoui DropDownList (ASP.NET MVC)

> ID：12483358
> 
> 赞同：2
> 
> 时间：2012-09-18T19:05:24.417
> 
> 标签：asp.net-mvc-3, kendo-ui

我有一个使用下拉列表的 KendoUI 网格。所以网格的每个元素都有一个下拉列表。DropDownList 在局部视图中定义。

```
@(Html.Kendo().DropDownList()
    .Name("positions")
    .DataValueField("EmpId")
    .DataTextField("EmpName")
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("_AjaxGetEmps", "Emp", new { Empid = <empid of currently selected grid row> });
        }).ServerFiltering(true);
    })
) 
```

我在哪里放什么？我要做的是从当前选定行的网格中引用一个字段。网格的每一行在下拉列表中可以有不同的值，我需要将值传递给 AjaxGetEmps 方法。我正在使用带有 Razor 视图引擎的 ASP.NET MVC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:10:04.930

您必须`Empid`通过 Data 方法传递参数，而不是像这样直接提供参数：

```
@(Html.Kendo().DropDownList()
    .Name("positions")
    .DataValueField("EmpId")
    .DataTextField("EmpName")
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("_AjaxGetEmps", "Emp")
                .Data("getCurrentEmpid"); // this links to a javascript function 
                                          // which will get the current emp id
        }).ServerFiltering(true);
    })
) 
```

并且javascript函数应该这样实现：

```
function getCurrentEmpid() {
    var grid = $("#idGrid").data("kendoGrid"); // where "idGrid" is the id of your grid

    return {
        Empid: grid.dataItem(grid.select()).Empid
    }
} 
```

此处`grid.select()`返回网格中选定的行并`grid.dataItem(row)`获取与该行关联的数据。所以这里`Empid`应该是你的模型类的 id。另请注意，如果你有标志`GridSelectionMode`，`Multiple`你将不得不循环抛出`grid.select()`数组......

# javascript - 将选择选项值设置为变量

> ID：12483367
> 
> 赞同：0
> 
> 时间：2012-09-18T19:05:56.003
> 
> 标签：javascript, object, methods, mootools, option

是否可以将 Select Option 的值设置为等于预定义变量，然后使用其方法？这是一个例子：

```
<select class='hidden' id='teamChoice' onchange='chooseTeam()'>
<option value="" selected>What team</option>
    <option value='bostonCeltics'>Boston Celtics</option>
</select>

var bostonCeltics = {
    conferencePA: "5=Conference=Eastern",
    divisionPA: "5=Division=Atlantic"
}

function chooseTeam() {
    switch ($('teamChoice').selectedIndex) {
        case 0:
            break;
        case 1:
            $('PAType=Name=Value3').innerHTML = this.conferencePA;
            break;
    }
} 
```

理想情况下，在选择名为 Boston Celtics 的选项时，我可以使用一种方法来访问变量对象 bostonCeltics 的不同属性。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:47:10.133

我不是 Mootools 用户，但我想我理解您的意思，并且相信我可以为您指明正确的方向。

在 Javascript 中，您可以访问任何对象属性目录，或者使用数组表示法。换句话说，给定`foo = { bar: 1, baz: 2 }`，以下是等价的：

```
console.log( foo.bar );      // prints 1
console.log( foo["bar"] );   // prints 1
var s = "bar";
console.log( foo[s] );       // prints 1 
```

事情变得更加棘手，因为您定义`bostonCeltics`为 a `var`，这意味着它不一定是任何对象的属性。尽管不鼓励`eval`使用 ，但您仍然可以完成您想要的操作：`eval`

```
var s = "bostonCeltics";
console.log( eval( s + ".conferencePA" ) );    // prints "5=Conference=Eastern" 
```

就个人而言，我会`bostonCeltics`进入一个父对象，并使用数组表示法来访问它的属性，那么你想要做的就很简单了。以机智：

```
var teams = {
    bostonCeltics = {
        conferencePA: "5=Conference=Eastern",
        divisionPA: "5=Division=Atlantic"
    }       
    // more teams go here
}

function chooseTeam() {
    var tc = $('teamChoice');
    var val = tc[tc.selectedIndex].value;
    console.log( teams[val].conferencePA );    // prints "5=Conference=Eastern"
} 
```

这是一个 jsFiddle 的实际操作：http: [//jsfiddle.net/sQvBZ/](http://jsfiddle.net/sQvBZ/)

我希望这能触及你所问的核心。

# vb.net - 如何在 Visual Basic 中制作模数系列？

> ID：12483369
> 
> 赞同：0
> 
> 时间：2012-09-18T19:05:59.780
> 
> 标签：vb.net, visual-studio-2010, modulus

对于我的问题，我需要弄清楚如何使模除法问题的其余部分继续到 Visual Basic 中的另一个计算中。这真的很难说，所以我将尝试使用一个例子：

用户输入 4500。4500 mod 1000 = 4 次，余数为 500。

现在我需要 500 来继续下一个计算。

500 模 100 = 5

然后输出可能为： Boxes of 1000: 4 Boxes of 100: 5

谁能解释我如何在 Visual Basic 中编写与此类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:14:21.097

```
Dim dividend As Integer = 4500/1000         ' results to 4
Dim remainder As Integer = 4500 Mod 1000    ' results to 500
Dim subdividend As Integer = remainder/100  ' results to 5 
```

# c# - C# 通过网络发送请求并等待任何响应？

> ID：12483374
> 
> 赞同：2
> 
> 时间：2012-09-18T19:06:28.940
> 
> 标签：c#, .net, networking

我可能希望通过网络发送一个数据包或某种请求，但不是针对任何特定的。一台机器或可能的多台机器将安装一个软件来监听这个特定的数据包或请求和响应。大型机服务器将知道它也有 x 台服务器来分担工作。

我可以使用某种形式的 UDP 广播或 TCP 数据包来实现这种事情吗？我将使用 C# .NET 来执行此操作。

这个问题的最终结果将是拥有一个主服务器，它有任务要完成，但如果有的话，它喜欢在多台机器上共享工作，但它永远不会知道关于它们的任何事情。它会发出请求说“我需要完成一些工作”，机器会响应“我空闲”+ IP 地址，然后主机将能够使用 TCP 连接来交付工作（我可以轻松实现这部分） . 我只需要通过网络发出初始盲请求。

我希望这是有道理的，如果我必须想出另一种方法让主机知道它的所有工人，那么我会，但我也不希望。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:09:15.883

听起来您想要进行多播，这可以通过 UDP 而不是 TCP 很好地完成。

我发现一篇文章描述了你会如何做这样的事情。

[http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C](http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:11:16.390

您可以尝试使用此代码 - 基于`TcpClient`类

```
 TcpClient tcpclnt = new TcpClient();
            Console.WriteLine("Connecting.....");

            tcpclnt.Connect("...",8001);
            // use the ipaddress as in the server program

            Console.WriteLine("Connected");
            Console.Write("Enter the string to be transmitted : ");

            String str=Console.ReadLine();
            Stream stm = tcpclnt.GetStream();

            ASCIIEncoding asen= new ASCIIEncoding();
            byte[] ba=asen.GetBytes(str);
            Console.WriteLine("Transmitting.....");

            stm.Write(ba,0,ba.Length);

            byte[] bb=new byte[100];
            int k=stm.Read(bb,0,100);

            for (int i=0;i<k;i++)
                Console.Write(Convert.ToChar(bb[i]));

            tcpclnt.Close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T22:18:55.247

您可能会考虑使用[ZeroConf](http://www.zeroconf.org/)（又名[Apple Bonjour](https://developer.apple.com/bonjour/)，Apple 有适用于 Windows 的 Bonjour SDK）。ZeroConf/Bonjour 的一部分是**服务发现**。其 RFC 是：

*   [RFC 2608，服务定位协议，版本 2](https://www.rfc-editor.org/rfc/rfc2608)
*   [RFC 3224，服务定位协议的供应商扩展，版本 2](https://www.rfc-editor.org/rfc/rfc3224)

这两个 RFC 都是 IETF 提议的标准。

这是关于它的维基百科文章：[http ://en.wikipedia.org/wiki/Zero_configuration_networking](http://en.wikipedia.org/wiki/Zero_configuration_networking)

此外，Daniel Steinberg 和 Stewart Cheshire 所著的 O'Reilly 书《[*零配置网络：权威指南》*](http://shop.oreilly.com/product/9780596101008.do)将大部分相关信息收集在一个地方。

![封面](../Images/3082fabeda85cc799c34c6ef5728fe5d.png)

# math - 幂函数是否在恒定时间内运行？

> ID：12483379
> 
> 赞同：5
> 
> 时间：2012-09-18T19:06:57.197
> 
> 标签：math, time-complexity, bezier

当我在 C# 中使用 Math.Pow(double x, double y) 或 C++ 中的 math.h pow-function 等幂函数时，这些函数会在恒定时间内运行吗？

我问的原因是因为我想知道 (1-t)^n*p0 + ... + t^(n) * pN 形式上的“预先计算的”贝塞尔函数是否可以在线性时间内运行，这可以那么比以控制点和 t 作为参数的 De Casteljaus 算法的实现要快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:16:28.113

我认为这些方法使用基于迭代的处理来获得结果，并且只有当两次迭代的值之间的差异低于给定的误差常数时才会停止。

有一些迭代方法可以非常快速地收敛到幂运算的结果......所以我认为它们接近恒定时间。

这个问题有很多很好的解释： [Math.Pow() 如何在 .NET Framework 中实现？](https://stackoverflow.com/questions/8870442/how-is-math-pow-implemented-in-net-framework)

**编辑**

[我在http://math.stackexchange.com](http://math.stackexchange.com)中找到了很多可以使用的好材料。

*   [计算 e^x 到任意小数位数的最快方法？](https://math.stackexchange.com/questions/18445/fastest-way-to-calculate-ex-upto-arbitrary-number-of-decimals)
*   [如何使用标准计算器计算 e^x](https://math.stackexchange.com/questions/55830/how-to-calculate-ex-with-a-standard-calculator)
*   [如何计算非整数指数？](https://math.stackexchange.com/questions/62203/how-can-i-calculate-non-integer-exponents)
*   [数值估计 a^b](https://math.stackexchange.com/questions/133690/numerically-estimate-ab)
*   [e^(-x) 的近似值](https://math.stackexchange.com/questions/71357/approximation-of-e-x)

这个非常有趣，因为它解释了一种使用人类语言计算幂的方法：

*   [如何使用定点计算幂](http://www.ehow.com/how_6563047_use-fixed-point-calculate-exponentiation.html)

**想法**

我不是数学天才，但据我所知，所花费的时间很大程度上取决于您选择的值，而是取决于您想要的精确位数。我想说的是它取决于论点，但有一个最大值。

另外，为了支持这个理论，看看这个算法（由 Sun 实现）： http: [//pastebin.com/LDjS5mAR](http://pastebin.com/LDjS5mAR)。没有循环，只有 ifs。我认为这是因为实现它的人选择了他们想要的固定精度……然后扩展了保证该精度所需的所有迭代。

例如，一个迭代次数不变的循环可以很容易地展开，如下所示：

```
for (int it = 0; it < 5; it++)
    a *= a; 
```

是相同的：

```
a *= a; a *= a; a *= a; a *= a; a *= a; 
```

# jquery - 动态加载html后重新附加jquery函数

> ID：12483381
> 
> 赞同：3
> 
> 时间：2012-09-18T19:07:06.767
> 
> 标签：jquery, ajax, javascript-events

我已经搜索和试验了几个小时，我认为解决方案在于 jquery 中的 .on() 函数。但我似乎无法弄清楚正确的实现。

我有一个选项卡式菜单，我想将内容作为下拉菜单添加到其中一个选项卡，内容应该在 document.ready 加载

```
<div id="container" class="layout" style="border: 1px solid">
   <ul class="tabs">
    <li><a id="go_archives" href="#">Archives</a> </li>
    <li><a id="go_answers" href="#">Puzzle Answers</a>
    <ul class="dropdown">
      <li><a href="#">One</a></li>
      <li><a href="#">Two</a></li>
      <li><a href="#">Three</a></li>
      <li><a href="#">Four</a></li>
      <li><a href="#">Five</a></li>
      <li><a href="#">Six</a></li>
    </ul>
    </li>
</div> 
```

这是相关的CSS

```
/* menu tab styling */

ul.tabs {
  display: table;
  margin: 0;
  padding: 0 0 20px 2px;
  list-style: none;
  position: relative;
  border-bottom: 1px solid #00AEDB;
}

ul.tabs li {
  margin: 0;
  padding: 0;
  list-style: none;
  display: table-cell;
  float: left;
  position: relative;
}

ul.tabs a {
  position: relative;
  display: block;
  font-size: 13px;
  line-height: 14px;
  font-weight: normal;
  margin: 0 7px 4px 2px;
  padding-bottom: 2px;
  text-decoration: none;
  color: #fff;
}

ul.tabs a:hover {
  border-bottom: 3px solid #FFF;
  padding-bottom: 2px;
}

/* dropdown styling */

ul.dropdown {
  margin: 0;
  padding: 0;
  display: none;
  position: absolute;
  z-index: 999;
  top: 100%;
  left:0;
}

ul.dropdown ui.dropdown {
  top: 0;
  left: 95%;
}

ul.dropdown li {
  margin: 0;
  padding: 0;
  float: none;
  position: relative;
  list-style: none;
  display: block;
}

ul.dropdown li a {
  font-size: 13px;
  line-height: 14px;
  font-weight: normal;
  display: block;
  width: 100%;
} 
```

和 JS

```
$('.dropdown').parent().mouseenter(function () {
    $('.dropdown', this).slideToggle('fast');
  });

$('.dropdown').parent().mouseleave(function () {
    $('.dropdown', this).slideUp('fast');
  }); 
```

所有这些都可以很好地滑出 go_answers LI 下的 UL

在萤火虫我运行以下

```
$.get("shite.html", function(result){
    $("#go_archives").parent().append(result);
  }); 
```

加载shite.html

```
<ul class="dropdown">
        <li><a href="#">one</a></li>
        <li><a href="#">two</a></li>
        <li><a href="#">three</a></li>
        <li><a href="#">four</a></li>
        <li><a href="#">five</a></li>
        <li><a href="#">six</a></li>
</ul> 
```

它会更新 DOM（我认为这是正确的术语），但是当我将鼠标悬停在 Archives 链接上时，它不会滑出。

我错过了什么让它滑出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:12:39.083

你可以这样实现 .on() 方法：

```
$("#container").on({
    mouseenter: function (event) {    
       $('.dropdown', this).slideToggle('fast');
    },            
    mouseleave: function (event) {
       $('.dropdown', this).slideUp('fast');   
    },
    mousedown: function (event) {
       //Do stuff
    }
    },
    ".dropdown"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:12:10.117

当您像这样动态地重新加载 DOM 元素时，您需要重新附加事件。您应该将 mouseenter 和 mouseleave 命令放在一个函数中，并在文档准备好和 get 中调用该函数。

[我在这里](http://jsfiddle.net/WHgNP/)设置了一个小提琴来演示如何设置它。您所呈现的结果是我刚刚存储在一个隐藏的 div 中的 ajax 调用的返回结果，当您单击测试按钮时，它会将 div 内容添加到您的列表项中。一旦新的 DOM 元素就位，我们重新运行您的 jquery 以让选择器拾取新元素并在操作 css 类之后，以便您获得预期的演示文稿，您的下拉菜单可以正常工作。

总体要点是要记住，您从 Jquery 选择器分配给结果的事件仅添加到在运行时与选择器匹配的那些元素。如果您将与选择器匹配的新元素插入到 DOM 中，这并不意味着您的新元素也会选择附加的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T13:34:56.247

我面临同样的问题

jQuery

```
$(function() {
    $(".mytable").on('click', '.toggle', function () {
    alert("toggle Clicked");
    });
}); 
```

ajax之前的HTML

```
<div class="tabs">
    <ul class="tab-links" id="tab-links">

    </ul>

    <div class="tab-content" id="tab-content">

    </div>
</div> 
```

ajax后的HTML

```
<div class="tabs">
    <ul class="tab-links" id="tab-links">
        <li class="active"><a href="#tab1">Tab #1</a></li>        
    </ul>

    <div class="tab-content" id="tab-content">
        <div id="tab1" class="tab active" >
            <table id="mytable1" class="mytable">
                <tr data-depth="0" class="expand level0">
                    <td>
                    <span class="toggle expand">+</span>
                    Everything Else [<a class="link">99</a>]
                    </td>   
                    <td> 1$</td>    
                </tr>
            </table>
        </div>
    </div>
</div> 
```

它不起作用，然后我将其更改为

jQuery

```
$(function() {
    $(document).on('click', '.mytable .toggle', function () {
    alert("toggle Clicked");
    });
}); 
```

现在工作正常。

# algorithm - 将行列排序的二维数组转换为排序的一维数组

> ID：12483383
> 
> 赞同：1
> 
> 时间：2012-09-18T19:07:10.967
> 
> 标签：algorithm, matrix, array-algorithms

给定一个 n*n 元素的二维数组：

*   所有行都已排序
*   所有列都已排序

例如：

```
1 5 7
2 6 8
3 9 10 
```

将其转换为一维排序数组。有没有比`O(nlog(n))`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T19:21:27.597

嗯，它不能低于`n^2`复杂性，因为你有一些`n^2`元素，你必须每个元素至少检查一次。

执行此操作的算法是标准的 k 路合并，其复杂度为`N log k`，其中`N`是要合并的项目总数，`k`是序列数。

在您的`n*n`数组中，您有`n*n`要合并的项目和`n`序列（即行）。因此，代入上述等式：

```
N log k
N = (n*n)
k = n
(n*n) log n 
```

将您的 2D 数组转换为已排序的 1D 数组是`n^2 log n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T20:25:50.103

我认为这将是我将采取的方法：

1）从第一行开始 - “1 5 7”。我们知道，在开始时，行是排序的，所以我们保证最左边的元素是最少的，不需要比较。输出 1，并将第一列向上移动，得到“2 5 7”。

2) 现在比较前两个元素。只要第一个元素小于第二个元素，就继续输出第一个元素并将其各自的列向上移动。这给了我们 2 和 3 的输出，结果数组是“5 7”（因为第一列现在是空的）。

3) 对剩下的两列继续做同样的事情。这将为我们提供 5 和 6 的输出，然后我们会遇到第一种不同的情况——此时我们的数组将包含“9 7”。

4) 在这种情况下，我们将输出最后一列的值并将其上移，在输出 7 后给出“9 8”。我们再次遇到第一个元素更大的情况，因此我们将输出第二个并将该列向上移动，留下“9 10”。

还没有彻底分析它，但我认为这是 O(N)，因为您可以对各个列之间的关系做出假设，因此最多有 N 次比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T17:59:24.053

你可以在 O(n) 中做到这一点。我不同意这不可能比 n^2 更快，因为在这种情况下 n*n=n 因为当您谈论时间复杂度时，您指的是列表中元素的数量。这是 O(n) 解决方案，其中 n = min-max。为此，您需要知道可能在列表中的最小数字和最大数字。你不需要知道它们只是最低和最高的可能。

```
 int[] Sorted1dArray(int[][] arr, int min, int max)//basically counting sort
    {
       int index = 0;
       int rowColSize = arr[0].Length;
       int[] newArr = new int[max-min];
       int[] ret = new int[rowColSize *rowColSize ];
       for(int i=0;i<rowColSize ;i++)//
       {
          for(int j=0;j<rowColSize ;j++)
             newArr[arr[i][j]]++;
       }
       for(int i=0;i<newArr.Length;i++)
       {
          for(int j=0;j<newArr[i];j++)
          {
             ret[index++]=newArr[j];
          }
       }
       return ret;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T18:58:06.067

我有时间：O(n*n log(2n)) 空间 O(2n) 算法。

基本思路如下

a[0][0] 肯定是最小的元素。因为元素是按行和按列排序的，所以下一个最小的元素将是 min( a[0][1], a[1][0] )。比如说，a[0][1] 是两者中最小的，下一个候选者将是 min(a[0][2],a[1][1],a[1][0])

等等，

**算法：**

选择最小的候选元素，打印它。将元素推到最小元素的右侧和底部作为潜在候选者。（检查 out 或 bound。）这样做直到没有更多的候选元素存在。

**需要 DS：**

候选元素可以使用堆来维护（顶部是最小元素）但是你需要确保你不要两次推送相同的元素。（y 可能在 x 的右侧和 z 的底部）。在你推送到堆之前，你需要知道元素是否已经被推送。

这两个要求都由 set 优雅地处理（这是有序的）（我在 c++ 中编写代码）

在集合中存储索引将使我能够轻松地将下一个候选元素推送到候选 Ds。
在我的候选 ds 中，我在任何时间点都保持不超过 n+n 个元素以下是我使用的比较函数。

```
bool operator()(const int& a,const int& b) const{
        int ai=a/m,aj=a%m;
        int bi=b/m,bj=b%m;
        if(input[ai][aj]!=input[bi][bj])
        return input[ai][aj]<input[bi][bj];
        else
        return a<b;
    } 
```

示例实现在这里：http: [//ideone.com/w208Af](http://ideone.com/w208Af)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T22:50:51.977

您应该发布您的`O(n log n)`解决方案：事实是，没有这样的解决方案真的是可能的。这就是为什么。你有`n*n`元素。所以你能做的最好的就是`n^2`你必须至少访问每个元素一次。考虑一下。您必须填充一个长度为一维数组`n*n`（即二维数组的每个元素都必须存在于新的一维数组中）。因此，您无法在`O(n log n)`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T19:17:20.113

您可以使用函数 f(x,y) = (f(x),f(y)) 来降低复杂性并展平二维数组。它还对一维数组重新排序。因为它是一个函数，它更像是一个散列算法，也许不是你想要的？

# javascript - dijit.Editor 在重新添加后被清除

> ID：12483385
> 
> 赞同：0
> 
> 时间：2012-09-18T19:07:19.850
> 
> 标签：javascript, dom, dojo

我对 dijit.Editor 有疑问。从文档中删除它的 DOM 并重新附加它后，它的值被清除。

对此的测试在[此小提琴](http://jsfiddle.net/joshuaboshi/WTU6H/)中：根据示例中的注释警报，附加后将清除该值。删除编辑器后它仍在内存中。

我试图将“重新加载”代码添加到`onLoadDeferred`. 但是在重新添加编辑器时不会调用它。

我自己不能轻易调用 reload ，因为我在我的应用程序中重新附加了整个表单。我对表单的内容一无所知。

另外，我很确定这是 dijit.Editor 的问题。我测试了重新附加 javascript 生成的 Iframe（[这里的示例](http://jsfiddle.net/joshuaboshi/PPtTN/)）并且它正在工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:13:59.833

我修改了您的[iframe javascript 测试](http://jsfiddle.net/phusick/zHGVt/)，因此它只向 iframe 文档写入一次，并且它的行为似乎与 Dijit 编辑器的行为相同。

我认为您每次都必须设置编辑器的值`placeAt`，但您不必手动进行，您可以使用以下之一：

1.  [`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect)：

    ```
    aspect.after(editor, "placeAt", lang.hitch(editor, function() {
        this.set("value", this.get("value"));
    })); 
    ```

2.  [`dojo/declare`](http://livedocs.dojotoolkit.org/dojo/_base/declare)：

    ```
    var Editor = declare([DijitEditor], {
        placeAt: function() {
            this.inherited(arguments);
            this.set("value", this.get("value"));
        }
    }); 
    ```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/PXZk5/](http://jsfiddle.net/phusick/PXZk5/)

# mysql - 使用 GROUP_CONCAT 从外部表中检索标题列表

> ID：12483388
> 
> 赞同：0
> 
> 时间：2012-09-18T19:07:50.207
> 
> 标签：mysql

这是我的数据库结构：

![观察记录 - 数据库结构](../Images/df9c741ef8cf40f3e2d9f65f7503e704.png)

这是我正在尝试的 SQL 语句：

```
SELECT
 t1.Name AS Teacher_Name,
 t2.Name AS Observer_Name,
 o.Datetime AS Datetime,
 o.Type AS Type,
 o.Year_Group AS Year_Group,
 o.Class_Name AS Class_Name,
 c.Title AS Course_Name,
 GROUP_CONCAT(f.Focus_ID) AS Focus,
 o.Achievement_Grade AS Achievement_Grade,
 o.Behaviour_Grade AS Behaviour_Grade,
 o.Teaching_Grade AS Teaching_Grade,
 o.Notes AS Notes
FROM observations o
INNER JOIN teachers t1 ON o.Teacher_ID = t1.Teacher_ID
INNER JOIN teachers t2 ON o.Observer_ID = t2.Teacher_ID
INNER JOIN courses c ON o.Course_ID = c.Course_ID
INNER JOIN foci f ON f.Observation_ID = o.ID
ORDER BY `Datetime` DESC LIMIT 0,10 
```

**我想要实现**的是，在上述语句中，检索`Foci`带有`,`分隔符的列表，例如`Appraisal,Post 16,Teaching and Learning`.

这可以通过检索**Foci 表中 Foci.Observation_ID 与 Observations.ID 相遇的每一行来实现** *，然后* **如果 Foci.Focus_ID 与 Focus_Labels.ID 匹配，则从 Focus_Labels.Title 检索每个焦点的名称**。

在上面的声明中，我没有尝试检索`Focus_Labels.Title`，因为我什至无法`Foci.ID`正常工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:16:24.043

我建议从 an 稍微更改`INNER JOIN`为 a`LEFT JOIN`因为除非您确定所有表中都存在某些行，否则您将不会返回结果：

```
SELECT
     t1.Name AS Teacher_Name,
     t2.Name AS Observer_Name,
     o.Datetime AS Datetime,
     o.Type AS Type,
     o.Year_Group AS Year_Group,
     o.Class_Name AS Class_Name,
     c.Title AS Course_Name,
     GROUP_CONCAT(l.title) AS Focus,
     o.Achievement_Grade AS Achievement_Grade,
     o.Behaviour_Grade AS Behaviour_Grade,
     o.Teaching_Grade AS Teaching_Grade,
     o.Notes AS Notes
FROM observations o
LEFT JOIN teachers t1 
    ON o.Teacher_ID = t1.Teacher_ID
LEFT JOIN teachers t2 
    ON o.Observer_ID = t2.Teacher_ID
LEFT JOIN courses c 
    ON o.Course_ID = c.Course_ID
LEFT JOIN  foci f
    ON o.ID = f.Observation_ID
LEFT JOIN focus_labels l
    on f.focus_id = l.id
GROUP BY o.id
ORDER BY `Datetime` 
DESC LIMIT 0,10 
```

# css - 水平列表问题

> ID：12483391
> 
> 赞同：0
> 
> 时间：2012-09-18T19:08:03.513
> 
> 标签：css

我正在尝试创建一个使用 vh 或 vw 或填充百分比的水平列表。这样它就可以自动缩放到没有 js 的窗口。我不太担心向后兼容性。但是，每当我这样做时，列表项之间总是存在差距。

[http://jsfiddle.net/P3f7P/](http://jsfiddle.net/P3f7P/)

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:28:54.377

只需添加`display: block`到您的链接 -[**演示**](http://jsfiddle.net/P3f7P/2/)

```
ul#topMenu li a:link, #topMenu li a:link {
    color: #7C7C7C;
    text-decoration: none;
    background: #252525;
    border-right: 1px solid #313131;
    padding: 1vh 2vw;
    text-shadow: 1px 1px #000;
    font-size: 2vw;
    display: block;
} 
```

# hibernate - 即使 mysqld 未启动，会话似乎也存在

> ID：12483394
> 
> 赞同：0
> 
> 时间：2012-09-18T19:08:05.317
> 
> 标签：hibernate, unit-testing

一些有点奇怪的事情发生在我身上。我有一个项目，我正在测试我的数据访问层，好吗？但是我进行了测试，他通过了。后来我发现我的 Mysql Diamond 没有运行。可能会发生什么？

// 测试代码

```
public class AppTest {

static final Logger log = Logger.getLogger(AppTest.class);

@Test
public void sessionTest() { // Passed
    Session s = HibernateUtil.getSessionFactory().openSession();
    Assert.assertTrue(s.isOpen());
}

@Test
public void fetchEvent() { // Failed
    EventDao edao = new EventDao();
    Event e = null;
    try {
        e = edao.find(1);
    } catch (Exception ex) {
        log.fatal(ex.getMessage());
    }
    Assert.assertNotNull(e);
}

@Test
public void fetchAll() { // Failed
    EventDao edao = new EventDao();
    List<Event> e = null;
    try {
        e = edao.all(); // I have 6 rows on the Event table
    } catch (Exception ex) {
        log.fatal(ex.getMessage());
    }
    Assert.assertEquals(e.size(), 6);
} 
```

}

// HibernateUtil

```
public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
    try {
        // Create the SessionFactory from standard (hibernate.cfg.xml) 
        // config file.
        sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
    } catch (Throwable ex) {
        // Log the exception. 
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
} 
```

}

// src/main/resources/hibernate.cfg.xml 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <!-- Connection settings -->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/MyDB</property>
    <property name="hibernate.connection.username">root</property>

    <!-- Class mappings -->
    ...
    <mapping class="br.siseventos.siseventosmaventest.model.Event"/>
    ...
</session-factory> 
```

// EventDao 代码

```
public class EventDao extends BaseDao<Event> {

} 
```

// BaseDao 代码

```
public abstract class BaseDao<T> implements Dao<T> {
// Fields

private Class actualClass;

// Constructor
public BaseDao() {

    // Fetching generic class parameter
    actualClass = (Class) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
}

// Getters e Setters
public Class getActualClass() {
    return actualClass;
}

public void setActualClass(Class actualClass) {
    this.actualClass = actualClass;
}

// Service
public T find(int id) throws Exception {
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction t = null;
    T o = null;
    try {
        t = session.beginTransaction();
        o = (T) session.get(actualClass, new Integer(id));
        t.commit();
    } catch (Exception e) {
        if (t != null) {
            try {
                t.rollback();
            } catch (Exception ex) {
            }
        }
        throw e;
    } finally {
        if (session != null) {
            session.close();
        }
    }
    return o;
}

public List<T> all() throws Exception {
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction t = null;
    List<T> o = null;
    try {
        t = session.beginTransaction();
        o = (List<T>) session.createQuery("from " + getActualClassName()).list();
        t.commit();
    } catch (Exception e) {
        if (t != null) {
            try {
                t.rollback();
            } catch (Exception ex) {
            }
        }
        throw e;
    } finally {
        if (session != null) {
            session.close();
        }
    }

    return o;
}

// Util
public String getActualClassName() {
    return getActualClass().getSimpleName();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T02:07:37.047

> AFAIK 打开会话并不意味着打开连接。第一次使用时打开

# ruby-on-rails - 访问使用 ActiveRecord.find 找到的对象的属性

> ID：12483395
> 
> 赞同：1
> 
> 时间：2012-09-18T19:08:09.760
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在为一个看似简单的概念而苦苦挣扎。使用 ActiveRecord 查询获取单个项目后，我想访问该项目的属性，但我得到**nil:NilClass 的未定义方法“msg”**

我使用的模型如下：

```
class Provider < ActiveRecord::Base
  attr_accessible :alias, :name
  validates :name,  :presence => true
  has_many :histories

  def lastActive
   return History.where(:provider_id => self.id).last
  end
end 
```

和

```
class History < ActiveRecord::Base
  belongs_to :provider
  attr_accessible :available, :msg

  scope :active, where(:available => true)
  scope :recent, :limit => 1, :order => 'created_at DESC'

end 
```

因此，我有 2 种不同的方法来获取给定 Provider 的最新历史记录项：Provider.lastActive 和 provider.histories.active.recent.first。两者都无法获取正在返回的 History 对象的任何属性。

在 erb 方法中使用 Provider.lastActive，如下所示：

```
<%= provider.lastActive.msg  %> 
```

为 nil:NilClass产生**未定义的方法“msg”**

但，

```
<%= provider.lastActive.inspect  %> 
```

产生类似的东西：

```
> #<History id: 35, available: true, when: nil, msg: "my message", provider_id: 1, created_at: "2012-09-18 07:12:50", updated_at:
> "2012-09-18 07:12:50"> 
```

使用历史范围的相同结果，例如：

```
provider.histories.active.recent.first & provider.histories.active.recent.first.inspect 
```

我在这里想念什么？做完 Model.find.last 为什么我不能访问返回的模型的属性？

在这种我真的只想要1个属性的情况下，会有什么问题：

```
Model.find.last.some_attribute 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:38:36.367

您肯定要删除该行：

```
attr_accessible :available, :msg 
```

这是不对的，会引起问题。

我不明白为什么它会为 nil:NilClass 错误提供一个未定义的方法“msg”，但把它拿出来看看是否能解决它。

如果你得到最后一个，也不是你应该有一个订购方法。

最后，一旦你让它工作，因为你有历史关联，你可以定义 lastActive 如下：

```
def last_active
  return histories.order(:id).last
end 
```

# java - 从 Hibernate 生成的查询中删除下划线

> ID：12483397
> 
> 赞同：1
> 
> 时间：2012-09-18T19:08:20.857
> 
> 标签：java, sql, oracle, hibernate, toad

Hibernate 正在生成这样的查询：

```
SELECT DISTINCT
backhaul0_.BACKHAUL_ID AS BACKHAUL1_3_0_, dc1_.DC_NBR AS DC1_32_1_
FROM BACKHAUL backhaul0_
LEFT OUTER JOIN DC dc1_ ON backhaul0_.TRAILER_DROP_DC_NBR = dc1_.DC_NBR
WHERE driverday3_.DRIVER_ID = 732 
```

但是在尝试将查询输入到 SQL 优化器时，尾部的下划线是有问题的，因为优化器倾向于认为别名是一个变量。有没有办法告诉 Hibernate 在生成查询时不要使用下划线作为别名？

# ruby-on-rails - 序列化我的哈希时，ActiveRecord 将符号键转换为字符串

> ID：12483398
> 
> 赞同：6
> 
> 时间：2012-09-18T19:08:21.913
> 
> 标签：ruby-on-rails, activerecord, yaml

我有一个带有序列化 Hash 属性的 Rails 模型类，如下所示：

```
class Action
  serialize :metadata, Hash
  # . . .
end 
```

该列存储在`text`具有 YAML 编码的列中。问题是，当我将`metadata`值传递给`create!`方法时，哈希键会从符号转换为字符串，但其他时候不会发生这种转换。例如：

```
$ rails console
> a = Action.create!(:metadata => {:foo => "bar"})
> a.metadata
 => {"foo"=>"bar"}
> a.metadata[:fizz] = "buzz"
> a.metadata
 => {"foo"=>"bar", :fizz=>"buzz"} 
```

现在，当我保存模型时，数据库将具有以下文本值：

```
---
foo: bar
:fizz: buzz 
```

任何建议如何解决这个问题？

（这适用于 Rails 3.0.16。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:16:36.490

```
class Action < ActiveRecord::Base
  def metadata
    self[:metadata].try :symbolize_keys
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T20:10:04.747

我自己来回答这个问题，@Mori 的建议变体：

```
class Action < ActiveRecord::Base
  def metadata=(v)
    self[:metadata] = v.try(:symbolize_keys!)
  end
end 
```

据我所知，这可以解决问题而不会破坏其他地方的界面。我想如果我*想要*一个键是一个字符串，这种方法会给我一个令人讨厌的惊喜，但事实并非如此，所以我更愿意接受它而不是其他提议的解决方案带来的惊喜。

顺便说一句，如果有人可以提出一个根本不需要这种解决方法的解决方案，我会很乐意接受它作为正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T14:27:07.133

我最终选择了另一条路线。`HashWithIndifferentAccess`当我访问该属性时，我确保我得到了回报：

```
def metadata
  return self[:metadata] if self[:metadata].is_a?(HashWithIndifferentAccess)
  self[:metadata] = HashWithIndifferentAccess.new(self[:metadata])
end 
```

一个额外的好处是如果`metadata`没有设置我得到一个空的哈希而不是`nil`

# c - 获取核心数量（*不是* HT 线程）

> ID：12483399
> 
> 赞同：3
> 
> 时间：2012-09-18T19:08:25.080
> 
> 标签：c, linux, bsd

我试过`sysconf(_SC_NPROCESSORS_ONLN)`and ，但它们都返回（[英特尔在他们的 CPU 文档中称之为](http://ark.intel.com/products/53469)`sysconf(_SC_NPROCESSORS_CONF)`）线程的总数（如：超线程线程），而不是物理内核（在提到的英特尔网站上称为核心）。

有没有办法获得物理核心的数量，而不是逻辑？计数中的条目`/proc/cpuinfo`给出 8，类似于 call `sysconf`，我的处理器是上面链接的那个。

我对在 Linux 和 BSD 上工作的答案感兴趣，最好是 C API 的形式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T22:39:39.030

另一种解决方案是使用[hwloc](http://www.open-mpi.org/projects/hwloc/ "hwloc")。这是一个简单的例子：

```
#include <hwloc.h>
#include <stdio.h>

int main(){

  // Allocate, initialize, and perform topology detection
  hwloc_topology_t topology;
  hwloc_topology_init(&topology);
  hwloc_topology_load(topology);

  // Try to get the number of CPU cores from topology
  int depth = hwloc_get_type_depth(topology, HWLOC_OBJ_CORE);
  if(depth == HWLOC_TYPE_DEPTH_UNKNOWN)
    printf("*** The number of cores is unknown\n");
  else
    printf("*** %u core(s)\n", hwloc_get_nbobjs_by_depth(topology, depth));

  // Destroy topology object and return
  hwloc_topology_destroy(topology);
  return 0;
} 
```

我在一个运行 Red Hat 4.1.2-48 和 GCC 4.1.2 的 Linux 机器上，以及一个运行 OS X 10.8.1 和 GCC 4.2.1 的 Apple 上测试了这个

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T19:19:50.940

它不是 C API，它可能仅适用于 Linux。但这就是我所知道的，也许你会发现这很有用。

`/proc/cpuinfo`的 CPU 描述有几个字段：`physical id`是物理 CPU 标识符`core id`， 是物理内核标识符。如果你计算唯一`(physical id, core id)`对的数量，你会得到你想要的。

您还可以检查`cpu cores`列出的每个物理 CPU 的字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T20:52:46.060

中的文件`/sys/devices/system/cpu/cpu<n>`更容易解析此类信息，并包含有关拓扑的其他信息。它仍然不是预包装的 API，但如果您要查找的只是 CPU 计数以及可能哪些线程属于哪些内核属于哪些芯片，那么编写一些东西来解析它不会太糟糕。我知道有一些库（例如这些`cgroups`东西）已经解析了这个，所以有一些参考点可以找到解决它的好方法，如果你愿意，甚至可能有一种方法可以只使用这些库的一部分。

# html - CSS 下拉菜单自动宽度

> ID：12483404
> 
> 赞同：2
> 
> 时间：2012-09-18T19:08:41.663
> 
> 标签：html, css, drop-down-menu

我有一个菜单，其中一些项目是非下拉菜单，而其他项目是。

我遇到的问题是，当其中一个下拉菜单出现时，它会将所有相邻的菜单项推过。然后，当下拉菜单消失时，它们会返回到正常位置。

以下是菜单示例：

```
<ul id="ulnav">
<li id="nav1" class="dropdown">
<a><i><img src="images/dandy-white/16/pencil.png" width="16"/></i>Payments In<i>
<span class="mbullet"></span></i></a>
    <ul class="dropdownmenu">
    <span class="droptop"></span>
    <li><a href="Advanced">Advanced</a></li>
    <li><a href="Account">Account</a></li>
    </ul>
</li>

<li id="nav2" class="dropdown">
<a><i><img src="images/dandy-white/16/pencil.png" width="16"/></i>Payments Out<i> <span class="mbullet"></span></i></a>
</li>
</ul> 
```

以及相关的 CSS：

```
ul {
list-style:none;
padding:0;
margin:0;
}

#ulnav li, #useroptions li {
    float:left;
    display:block;
    height:42px;
    width:110px;
}
#ulnav li a, #useroptions li a {
    float:none;
    padding:10px;
    display:block;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
    opacity:0.9;
} 
```

在上述情况下，如果我点击“付款”，下拉菜单将出现并推动“付款”。

如何使顶级菜单项具有自动宽度，但在出现下拉菜单时不让它们移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:18:02.340

尝试在您的下拉菜单容器上使用`position:absolute;`和。`z-index: ;`

例如..类似...

```
#nav1 {
position:absolute;
z-index:9;
}

#nav2 {
position:absolute;
z-index:9;
} 
```

# c++ - 创建具有指定字符数的字符串

> ID：12483406
> 
> 赞同：48
> 
> 时间：2012-09-18T19:08:42.133
> 
> 标签：c++, c, string, variables

有没有办法在使用 c++ 初始化时创建一个 256 个字符的字符串？

我的部分任务要求我“1\. 创建一个 256 个字符的字符串。使用你的名字的重复。”

除了使用循环之外，我不太确定如何做到这一点，但我觉得有一种更简单的方法。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-18T19:29:04.970

看一下[构造函数参考`basic_string`](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)，可以看出没有简单的方法来重复一个完整的*字符串*。对于单个字符，您可以这样使用`(2)`：

```
std::string s(5, 'a'); // s == "aaaaa" 
```

要生成字符串重复，您需要一些解决方法。通过简单地用例如`std::generate`（玩弄算法）填充字符串来执行此构建后的操作会更容易。

```
#include <string>
#include <algorithm>

// ...

std::string pattern("Xeo ");
auto pattern_it = pattern.begin();
std::string s(256, '\0');
std::generate(s.begin(), s.end(),
    [&]() -> char { 
      if(pattern_it == pattern.end())
        pattern_it = pattern.begin();
      return *pattern_it++; // return current value and increment
    }); 
```

[活生生的例子。](http://liveworkspace.org/code/f1cb4a490c879bfe875cf2a5f085d78d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T13:36:11.273

如果你想要一个很长的字符串，你可以通过加倍来减少循环重复的次数。

```
#include <string>
using std::string;

string repeatToLength ( unsigned len, string s ) {
  string r, si = s;

  // add all the whole multiples of s.
  for ( unsigned q = len / s.size(); q > 0; q >>= 1 ) {
    if ( q & 1 ) r += si; // add si to r if the low bit of q is 1
    si +=  si; // double si
  }
  r += s.substr ( 0, len - r.size() ); // add any remainder
  return r;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:25:53.080

```
const string myName = "Blivit";
int numLeftOver = 256 % myName.length();

string Names;
for ( int Index = 0; Index < (256 / myName.length() ); ++Index ) {
   Names += myName;
}
Names += myName.substr(0, numLeftOver); 
```

这是如果你想生成字符串。我相当确定有一种更短的方法可以做到这一点......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:26:52.323

[http://www.cplusplus.com/reference/string/string/](http://www.cplusplus.com/reference/string/string/)

据我了解，您只想保留 256 个元素。

它没有构造函数，您不能在初始化时设置 capacity() 。可能您想在初始化后使用 .reserve 。注意储备（）：

> 这可以扩大或缩小字符串中存储空间的大小，但请注意，调用此函数后的结果容量不一定等于 res_arg，但可以等于或大于 res_arg，因此缩小请求可能会也可能不会在特定库实现中产生分配空间的实际减少。

也许你需要不同的类型？

如果您只想填写字符串而不是使用：

[http://en.cppreference.com/w/cpp/string/basic_string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string/basic_string) 第二个。

* * *

## 回答 #5

> 赞同：-22
> 
> 时间：2012-09-18T19:16:37.423

没有足够的信息说真的。从您所说的来看，仅使用您的文本编辑器制作一个长度为 256 且您的姓名重复的字符串听起来是有效的。

```
std::string name = 
    "Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan "
    "Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan "
    "Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan "
    "Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan Zan "; 
```

完毕。

# c - 共享头文件中定义的变量？

> ID：12483407
> 
> 赞同：3
> 
> 时间：2012-09-18T19:08:45.550
> 
> 标签：c, header-files

在头文件“foo.h”中，有如下语句，

```
int foo; 
```

在源文件“ac”和“bc”中，包含头文件。

```
#include "foo.h" 
```

两个地方是否有两个独立的 foo，或者“ac”和“bc”之间只有一个 foo 共享？我看到这发生在其他人的共享代码中。如果您能理解这一点，请提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:10:22.693

多次定义外部对象会出错。

`extern int foo;`在头文件和`int foo;`一个文件中使用`.c`。

文件范围内的`extern`说明符（如果没有初始化程序）声明而不定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:13:27.160

预处理器只是将 替换为`#include "foo.h"`的内容`foo.h`。

它完全等同于`a.c`并`b.c`包含两者`int foo;`

# asp.net-mvc - asp.net MVC 空字符串参数

> ID：12483411
> 
> 赞同：0
> 
> 时间：2012-09-18T19:09:11.393
> 
> 标签：asp.net-mvc

我正在尝试发回 categoryId 并使用新的强类型对象更新页面。出于某种原因，cateogryId 以 null 的形式出现...

```
$(function () {
    $('#hhh').change(function () {
        var url = $(this).data('url');
        var categoryId = $(this).val();
        $.ajax({
            url: url,
            type: 'GET',
            cache: false,
            data: { categoryId: categoryId },
            success: function (result) {
                // TODO: manipulate the result returned from the controller action
            }
        });
    });
}); 
```

```
<h2>Index</h2>
@Html.ActionLink("Create New Listing", "Create")
<br/>
<strong>Filter Listings</strong>
@Html.DropDownListFor(
    m => m.SelectedCategoryGuid, 
    Model.Categories, 
    "Select a Category", 
    new {
        id = "hhh",
        data_url = Url.Action("SortListing", "Listing") 
    }
) 
```

控制器代码：

```
public ActionResult SortListing(string categoryGuid)
    {
        var listingCategory = new ListingCategory();
        listingCategory.Id = _tourismAdminService.GetByGuid<ListingCategory>(Guid.Parse(categoryGuid)).Id;
        var listings = new List<Listing>();

        foreach (var listing in _tourismAdminService.ListAllEntities<Listing>())
        {
            if (listing.CategoryId == listingCategory.Id)
            {
                listings.Add(listing);
            }
        }

        return RedirectToAction("Index", "Listing", listings);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:13:21.517

啊，这有帮助。将您的 javascript 更改为：

```
$(function () {
    $('#hhh').change(function () {
        var url = $(this).data('url');
        var categoryId = $(this).val();
        $.ajax({
            url: url,
            type: 'GET',
            cache: false,
            data: { categoryGuid: categoryId },
            success: function (result) {
                // TODO: manipulate the result returned from the controller action
            }
        });
    });
}); 
```

请注意，我更改了`data: {...}`您的 javascript 中的行。您希望将`data`行中的参数名称与 Action 方法中的参数匹配，以使绑定起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:14:09.580

您的操作方法需要一个名为的参数`categoryGuid`，但您传递的参数名称与您的 ajax 代码不同。在您的 javascript 代码中，更改

```
 data: { categoryId: categoryId }, 
```

至

```
data: { categoryGuid: categoryId }, 
```

# f# - 使用 Excel 互操作混合字符串和数字

> ID：12483414
> 
> 赞同：0
> 
> 时间：2012-09-18T19:09:16.523
> 
> 标签：f#, excel-interop

我正在使用 F# 和 Excel 互操作。我正在做类似的事情：

```
workbook.Range("A1:A10").Value2 <- [| "foo"; "3"; "bar"; "6"; "8" |] 
```

当我查看生成的电子表格时，它将“3”、“6”和“8”存储为字符串而不是数字。这意味着公式等失败。有没有办法让 Excel 在适当的地方将字符串转换为数字？

我目前的解决方法是这样的：

```
workbook.Range("A1:A10").Value2 <- [| "foo" :> obj
                                      3 :> obj
                                      "bar" :> obj
                                      6 :> obj
                                      8 :> obj |] 
```

它产生了预期的效果，但很尴尬。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T19:15:19.953

```
let a : obj[] = [| "foo"; 3; ... |] 
```

给数组一个类型注释，它会自动向上转换元素。

# google-chrome - 在 Chrome 中显示请求/响应信息

> ID：12483416
> 
> 赞同：2
> 
> 时间：2012-09-18T19:09:22.797
> 
> 标签：google-chrome, google-chrome-extension

是否可以在 Google Chrome 中显示给定页面的请求/响应标头？我知道可以使用内置开发人员工具中的出色网络选项卡，但是，它需要事先激活......但有时需要显示已经发生的独特事件的信息。

Chrome/Chromium 是否提供此类信息？（我从 chrome://about 中查看了一些相关的资源，但找不到。）

如果没有，你会推荐什么扩展？

（在 Firefox 中，可以使用 Live HTTP 标头插件，标头在页面信息窗口中显示为附加选项卡）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:11:01.657

使用[提琴手](http://www.fiddler2.com/fiddler2/)。它向您显示所有传出/传入的 http 请求，并让您检查几乎所有/任何您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:12:58.927

您可以从这里安装 chrome-extension：[https ://chrome.google.com/webstore/search/Live%20HTTP?hl=ru](https://chrome.google.com/webstore/search/Live%20HTTP?hl=ru)

# c# - 页面刷新后如何选择单选按钮

> ID：12483419
> 
> 赞同：0
> 
> 时间：2012-09-18T19:09:35.970
> 
> 标签：c#, .net, radio-button

我有一个单选按钮列表，当用户选择一个按钮时，页面会重新加载并出现正确的信息，但按钮消失了。

有没有办法避免这种情况？

这是HTML：

```
 <div class="checkBoxesColumn">
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="viewAll" value="0" runat="server" />View All</label>
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="journey" value="1" runat="server"  />My MBC Journey</label>
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="challenges" value="2" runat="server"  />Challenges</label>
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="advice" value="3" runat="server"  />Positive Outlooks &amp; Advice</label>
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="thanks" value="4" runat="server"  />Giving Thanks</label>
            <label><input class="videoWallRadioCls" name="videoWallRadio" type="radio" id="perspective" value="5" runat="server"  />Family / Friend Perspective</label>
        </div> 
```

这是代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
    {
        // HIDE UNTIL 10/13
        if (DateTime.Now > new DateTime(2012, 9, 12))
        {
        mbcRadioList.Visible = true;
        }

    video myVideo = new video();

    string categoryID = "0";
    if (!string.IsNullOrEmpty(Request["category_id"])) categoryID = Request["category_id"];

    Hashtable ht = myVideo.ListingForWall(categoryID);
    //Response.Write("Test: " + ht.Count);
    //Response.Write("Test: " + ht["B-01"]);

    StringBuilder myStringbuilder = new StringBuilder();

    for (int i = 1; i <= 36; i++)
    {
        string iStr = i.ToString();

        if (iStr.Length == 1) iStr = iStr.PadLeft(2, '0');

        //Response.Write("A-" + iStr + "<br />");             
        //Response.Write("TEST: " + ht["A-" + iStr] + "<br />");

        string videoClass = "videoWallThumb thumb" + iStr;

        if (ht["A-" + iStr] != null)
        {
            string[] tmp = ht["A-" + iStr].ToString().Split('|');

            if (tmp[2] == "0") videoClass += " disabled ";

            myStringbuilder.AppendLine("<a class=\"" + videoClass + "\" href=\"videoWallDetail.aspx?video_id=" + tmp[0] + "\"><img src=\"images/video_images/" + tmp[1] + "\" alt=\"\"/></a>");
        }
        else
        {
            videoClass += " incomplete ";
            myStringbuilder.AppendLine("<a class=\"" + videoClass + "\" href=\"#\"><img src=\"images/placeholder.jpg\" alt=\"\"/></a>");
        }

    }

    mosaicA.Text = myStringbuilder.ToString();
} 
```

如果我提供的代码不够或令人困惑，请告诉我，我正在努力解决这个小问题，以便继续处理下一个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:25:32.553

我认为这是一个 ViewState 问题。只有 Web 控件维护了视图状态，即在回发之间保留信息。

检查一下： [哪些控件维护了 ViewState？](https://stackoverflow.com/questions/606887/which-controls-have-viewstate-maintained)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:15:20.827

您是否尝试在选中复选框时设置会话变量？这样在页面重新加载时，您可以看到选择了哪个并将其设置为 true。

因此，您可以尝试使用单选按钮的 Id 设置会话变量，当它返回时，您读取变量并将会话变量持有的任何 Id 设置为 true。

我不确定是否有更好的方法来解决这个问题，但这是我想到的第一件事。

我唯一可以建议的另一件事是，如果您要使用 AJAX 调用进行部分更新，这样整个网页就不会重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:34:25.120

没关系，我在 category_id 上使用了开关盒...

```
 switch ((Request["category_id"]))
    {
        case "0": viewAll.Checked = true; break;
        case "1": journey.Checked = true; break;
        case "2": challenges.Checked = true; break;
        case "3": advice.Checked = true; break;
        case "4": thanks.Checked = true; break;
        case "5": perspective.Checked = true; break;
    } 
```

# c - 计算 C 中的行数、单词和字符

> ID：12483420
> 
> 赞同：-1
> 
> 时间：2012-09-18T19:09:46.897
> 
> 标签：c

下面是我计算行数、单词数和字符数的函数 -

```
void count(char* file) {

int fd;
long end=0;
char c;
long words=0;
long lines=0;

if((fd=open(file, O_RDONLY))>0){
    end=lseek(fd, 0, SEEK_END);
    lseek(fd, 0, SEEK_SET);
    while(read(fd, &c, 1)==1){
        if(c == ' ')
            words++;
        if(c == '\n') {
            lines++;
            words++;
        }
    }

    printf("The Number of characters in file is: %ld\n",end);   
    printf("The Number of lines in file is: %ld\n",lines);
    printf("The Number of words in file is: %ld\n",words);

    close(fd);
}
else{
    printf("Error: ",strerror(errno));
}
} 
```

我在行数和字符数上是正确的，但在字数上是错误的。如您所见，我正在计算空格数，如果有多个空格，如何计算单词（我不想使用 f* 函数，例如带有文件指针的 fscanf）？wc 命令如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:04:36.447

why you don't use `strpbrk()` standard libc function? Do some thing alse:

```
 char keys[] = " \n";
    ...
    while( expression ){

        ret = read(fd, buf, BUF_LEN - 1);

        if (ret == -1)
            /*do errno*/
        else if ( ret ) {

            char* p = buf;
            buf[ ret ] = '\0';

            while( (p = strpbrk(p, keys)) ) {
                if (*p == key[1])
                    ++lines;
                ++words;
                ++p;
            }
        }
        else
            /* do close file */
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:14:30.517

有很多方法可以处理这个问题。一种可能是使用布尔标志来指示最后一个字符是否为空格字符。然后，如果当前字符是空格*并且*最后一个字符*不是*空格等，则仅更新单词计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:16:17.677

是的，这看起来不太对劲。如果单词之间有多个空格会怎样？另外，如果单词被制表符或换行符分隔会发生什么？

相反，您应该跟踪状态。你应该检查空白字符是否与`isspace()`. 当你碰到一个不是空格的字符时，设置 IsInWord = true。然后，当您点击空白字符集时，IsInWord = false。但是，当您点击空格字符并且 IsInWord 为真时，首先计算单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T20:07:13.113

您需要一个用于单词的简单状态机和一个用于行的状态机。（您的行数也可能是错误的。例如，如果最后一行没有`'\n'`怎么办？）

您的单词状态机需要说明：（1）单词之间和（2）单词内部。如果您在状态 1 中得到一个非空格，则转换到状态 2 并增加您的计数器。当您在状态 2 中获得空间时，转换回状态 1。

# c++ - 混合 C++11 std::thread 和 C 系统线程（即 pthreads）

> ID：12483425
> 
> 赞同：14
> 
> 时间：2012-09-18T19:10:02.800
> 
> 标签：c++, c, multithreading, c++11

我正在编写一个多线程 C++ 程序并希望使用多线程 C 库。
这个库希望我使用本机系统方法为其创建一些工作线程，并使用如下代码将控制权传递给它的 run() 函数：

```
void system_specific_thread_init();
#ifdef _WIN32
    DWORD WINAPI system_specific_thread_run( LPVOID unused )
    {
        library_run();
        return 0;
    }

    void system_specific_thread_init()
    {
        Createthread(NULL, 0, system_specific_thread_run, NULL, 0, NULL);
    }
#else
    void* system_specific_thread_run(void *unused)
    {
        library_run();
        return NULL;
    }

    void system_specific_thread_init()
    {
        pthread_t id;
        pthread_create(&id, NULL, system_specific_thread_run, NULL);
    }
#endif
system_specific_thread_init(); 
```

之后它将使用相关的本机系统互斥方法对其他本机系统线程调用其函数，同时继续进行自己的工作。

但是，我使用 C++11`<thread>`库来创建和管理我的所有线程。我希望创建工作线程`std::thread(library_run)`并从其他此类线程调用库函数。

这样做安全吗，还是 DS9K 会让恶魔从我的鼻子里飞出来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T19:16:36.587

C++11 线程可能有也可能没有名为`native_handle()`;的成员函数。它是否存在由实现定义。如果存在，则返回类型为 的对象`native_handle_type`；它是由实现定义的，这种类型的对象可以用于什么。因此，请阅读您的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T20:15:08.683

C++ 标准没有指定 C++ 线程如何与任何其他线程库交互，但总的来说，我希望 C++ 实现使用底层系统线程库，因此您的使用应该是安全的。

能够使用使用系统线程库锁定原语的第三方库是一个非常常见的用例，它应该可以工作（否则 C++ 线程支持在许多实际情况下几乎是无用的）。正如 Pete 指出的那样，任何涉及线程句柄/id 的事情都可能更加棘手（但阅读您的问题时不应该要求这样做）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T19:20:08.163

这取决于图书馆实际在做什么。使用`pthreads`静音等应该不是问题。但是，如果库实际上尝试使用诸如 之类的函数来管理线程`pthread_join`，则可能会导致问题。它可能仍然适用于`pthread`标准（unix等）的系统，因为`std::thread`可以作为一个非常薄的包装器来实现`pthreads`，但这显然是非常依赖于实现的，即使对于相同的未来版本，我也不指望工作编译器。可以为`CreateThread`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T21:48:44.400

新的 C 和 C++ 标准（C11 和 C++11）都实现了相同的线程模型，并且它们的接口应该是兼容的。因此，无论平台为您提供 C++11 线程的实现，都应该能够在 C 中为您提供相同的实现。如果不能，那肯定只是暂时的。

如果您在将 pthread 作为本机线程模型的平台（可能是 POSIX 平台）上，那么 C++11 线程几乎肯定是在它之上构建的。但请注意，这两种线程模型之间的调用约定只是相似，而不是相等。例如，线程函数的返回值`void*`用于 pthread 和`int`C++11/C11。

但是，如果您赶时间，并且迫不及待地希望您的编译器供应商也提供 C11 接口，您可以自己围绕 C++ 函数实现浅接口。这样做应该没什么大不了的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-21T11:19:24.010

> 这样做安全吗，还是 DS9K 会让恶魔从我的鼻子里飞出来？

我不会尝试将它用于关键任务软件。在 std::thread 上尝试 WinApi 调用后`FreeLibraryAndExitThread`，它退出了线程但没有释放 dll。（它与 CreateThread 一起工作）

# php - 我可以在 magento 中使用我的属性脚本设置默认商店视图标签吗

> ID：12483431
> 
> 赞同：4
> 
> 时间：2012-09-18T19:10:19.207
> 
> 标签：php, magento, entity-attribute-value

我正在使用一个模块在客户模型上创建一个新属性。有谁知道如何使用我的设置脚本设置默认商店视图？

![管理员截图](../Images/6a52c2ca6df36f48097724afb7a84449.png)

我当前的脚本：

```
$setup = new Mage_Customer_Model_Resource_Setup('customer_setup');

if (! $setup->getAttribute('customer', 'dob_month')) {
    $setup->addAttribute('customer', 'dob_month', array(
        'label'     => 'Month',
        'type'      => 'varchar',
        'input'     => 'select',
        'source'    => 'eav/entity_attribute_source_table',
        'required'  => true,
        'position'  => 1,
        'option'    => array (
            'values' => array (
                'January',
                'February',
                'March',
                'April',
                'May',
                'June',
                'July',
                'August',
                'September',
                'October',
                'November',
                'December'
            )
        )
    ));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-07T14:40:59.013

据我所知，直接在`addAttribute()`通话中执行此操作是不可能的。但是您可以通过以下方式在保存属性后设置商店标签：

```
$attributeId = $this->getAttributeId('customer', 'dob_month');
$attribute = Mage::getModel('eav/entity_attribute')->load($attributeId);
$attribute->setStoreLabels(array(store_id => 'Store label'))
    ->save(); 
```

# c# - 使用 LINQ 查询嵌套集合时出现 InvalidCastException

> ID：12483434
> 
> 赞同：1
> 
> 时间：2012-09-18T19:10:31.583
> 
> 标签：c#, linq-to-sql

我有一个与此问题类似的问题：[linq question: querying nested collections](https://stackoverflow.com/questions/721395/linq-question-querying-nested-collections)

我有一个带有 a 的产品`ICollection<Category>`，我想通过 id 获取一个类别。我通过 IProductsRepository 完成所有工作。

我已经尝试过这两种方法`products.SelectMany(p => p.Categories).Where(c => c.CategoryID == categoryId)`以及我自己尝试过的`products.SelectMany(p => p.Categories).First(c => c.CategoryID == categoryId)`许多其他变体。但是我没有让它工作。

在运行时我收到 InvalidCastException。Category.CategoryID 和 categoryId 都是 int。

创建一个 ICategoriesRepository 会更好吗？也许它也有性能优势？我显然是 LINQ 的新手，所以不确定如何正确地做事。

编辑（代码示例）：

```
public interface IProductsRepository
{
    IQueryable<Product> Products { get; }
}

public class ProductsController : Controller
{
    public int PageSize = 4;
    private IProductsRepository productsRepository;

    public ProductsController(IProductsRepository productsRepository)
    {
        this.productsRepository = productsRepository;
    }

    public ViewResult ListById(int categoryId, int page = 1)
    {
        Category cat;
        // What do I need here to get the Category with the categoryId regardless of which Product it is connected to?
        return List(cat, page);
    }

    private ViewResult List(Category category, int page = 1) { //this code works }
}

[Table(Name = "products")]
public class Product
{
    [HiddenInput(DisplayValue = false)]
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int ProductID { get; set; }

    [Column]
    public string Name { get; set; }

    [Column(Name = "info")]
    public string Description { get; set; }

    public float LowestPrice 
    {
        get { return (from product in ProductSubs select product.Price).Min(); }
    }

    private EntitySet<Category> _Categories = new EntitySet<Category>();
    [System.Data.Linq.Mapping.Association(Storage = "_Categories", OtherKey = "CategoryID")]
    public ICollection<Category> Categories
    {
        get { return _Categories; }
        set { _Categories.Assign(value); }
    }
}

[Table(Name = "products_types")]
public class Category
{
    [HiddenInput(DisplayValue = false)]
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int CategoryID { get; set; }

    [Column(Name = "id")] // Temp solution, real name is localized in a separate table
    public string Name { get; set; }

    private EntitySet<Product> _Products = new EntitySet<Product>();
    [System.Data.Linq.Mapping.Association(Storage = "_Products", OtherKey = "ProductID")]
    public ICollection<Product> Products
    {
        get { return _Products; }
        set { _Products.Assign(value); }
    }
} 
```

编辑：

我尝试通过 ICategoriesRepository 来实现，但我得到了同样的错误。这是一个完整的堆栈跟踪：

[InvalidCastException: 指定的强制转换无效。] System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult) + 1191 System.Data.Linq.SqlClient.SqlProvider.ExecuteAll（表达式查询，QueryInfo[] queryInfos，IObjectReaderFactory 工厂，Object[] userArguments，ICompiledSubQuery[] subQueries）+118 System.Data.Linq.SqlClient.SqlProvider.System.Data。 Linq.Provider.IProvider.Execute(Expression query) +342 System.Data.Linq.Table `1.System.Linq.IQueryProvider.Execute(Expression expression) +58 System.Linq.Queryable.First(IQueryable`1 source, Expression `1 predicate) +287 MaxFPS.WebUI.Controllers.ProductsController.ListById(Int32 categoryId, Int32 page) in d:\Filer\Documents\Dropbox\ZkilfinG\webbutveckling\MaxFPS\VS Projects\MaxFPS\MaxFPS\Controllers\ProductsController.cs:26 lambda_method(Closure , ControllerBase , Object[] ) +140 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 参数) +182 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult _) +10 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +32 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +58 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +225 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +34 System.Web.Mvc.Async。 <>c__DisplayClass2a.b__20() +24 System.Web.Mvc.Async.<>c__DisplayClass25.b__22(IAsyncResult asyncResult) +99 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc。 Controller.EndExecuteCore(IAsyncResult asyncResult) +39 System.Web.Mvc.Async.<>c__DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9 System.Web.CallHandlerExecutionStep.System .Web.HttpApplication.IExecutionStep.Execute() +9629708 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

编辑：

当 categoryId 设置为不在数据库中的 id 时，我得到一个空序列。这对我来说表明比较代码是正确的，但我不明白无效转换的原因或内容。

[InvalidOperationException：序列不包含元素] System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult) +1191 System .Data.Linq.SqlClient.SqlProvider.ExecuteAll（表达式查询，QueryInfo[] queryInfos，IObjectReaderFactory factory，Object[] userArguments，ICompiledSubQuery[] subQueries）+118 System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq。 Provider.IProvider.Execute（表达式查询）+342 System.Data.Linq.Table `1.System.Linq.IQueryProvider.Execute(Expression expression) +58 System.Linq.Queryable.First(IQueryable`1 源，表达式`1 predicate) +287 MaxFPS.WebUI.Controllers.ProductsController.ListById(Int32 categoryId, Int32 page) in d:\Filer\Documents\Dropbox\ZkilfinG\webbutveckling\MaxFPS\VS Projects\MaxFPS\MaxFPS\Controllers\ProductsController.cs:28 lambda_method(Closure , ControllerBase , Object[] ) +140 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 参数）+182 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult _) +10 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +32 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +58 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +225 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +34 System.Web.Mvc.Async。 <>c__DisplayClass2a.b__20() +24 System.Web.Mvc.Async.<>c__DisplayClass25.b__22(IAsyncResult asyncResult) +99 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc。 Controller.EndExecuteCore(IAsyncResult asyncResult) +39 System.Web.Mvc.Async.<>c__DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9 System.Web.CallHandlerExecutionStep.System .Web.HttpApplication.IExecutionStep.Execute() +9629708 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:33:39.140

一旦我弄清楚了，这个错误就很简单了。在我的真实数据库中，我有一个 LocalizedCategory 来获取本地化的类别名称。在实施时，我想我可以跳过使用它来简化事情。所以我用这段代码给 Name 一个值：

```
 [Column(Name = "id")]
    public string Name { get; set; } 
```

但是，由于数据库中的 id 是 int ，所以我遇到了异常。我现在将尝试立即使其与 LocalizedCategory 一起使用，尽管我遇到了另一个问题：[为什么我会根据我对它的 LINQ 方式从我的 EntitySet 中获得不同的值？](https://stackoverflow.com/questions/12566058/why-do-i-get-different-values-from-my-entityset-depending-on-how-i-linq-to-it)

# android - PhoneGap 句柄OpenUrl 和Android

> ID：12483435
> 
> 赞同：2
> 
> 时间：2012-09-18T19:10:32.397
> 
> 标签：android, cordova

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    final String invokeString = getIntent().getDataString();
    if(invokeString != "" && invokeString != null) {
        this.sendJavascript("handleOpenURL('" + invokeString + "');");
        System.out.println(invokeString);
    }
} 
```

我在这个网站上找到了这段代码：http: [//blog.cttapp.com/p/phonegap-handleopenurl-for-android/](http://blog.cttapp.com/p/phonegap-handleopenurl-for-android/)。

它不会执行handleOpenURL，我知道这一点，因为否则它会重定向页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:52:20.163

我有同样的问题。似乎 webview 还没有准备好。

这是我如何让它工作的：重写这个`onMessage`函数，因为到那时它似乎已经准备好听你的了：

```
@Override
public Object onMessage(String id, Object obj) {

    if (id.equals("onPageStarted")) {

        final Intent intent = getIntent();
        if(intent.getDataString()!= "" && intent.getDataString()!= null){
            String url = intent.getDataString();
            this.sendJavascript("handleOpenURL('" + url + "');");
        }

    }
    return super.onMessage(id, obj);
} 
```

我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/L63TTsngjiU)找到了这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T19:52:04.217

我遇到了同样的问题，并想为可能不想自己构建 Cordova 的任何人分享一个*更糟糕的（据我所知）解决方案......*

就在行前

```
this.sendJavascript("handleOpenURL('" + url + "');"); 
```

添加这个

```
try{
    Thread.sleep(5000);
   } catch (Exception e) {
   // nothing
   } 
```

我知道这不是最佳选择，但我真的没有时间扩展 Cordova 本身......

另外：由于上面（更好）答案中的链接缺少一些信息（解决方案线程中的一些论坛消息已被删除），[这是](https://github.com/apache/cordova-android/blob/c509c8e7e53bdd0dd78481c6f0bdada8bf0800ee/framework/src/org/apache/cordova/CordovaActivity.java)您必须覆盖其 onMessage 的文件......祝你好运！

# c++ - 分叉子进程

> ID：12483438
> 
> 赞同：0
> 
> 时间：2012-09-18T19:10:58.943
> 
> 标签：c++, linux, fork

使用一个简单的下载器，它将下载数组中的文件项。

目前它会下载数组中的第一个项目，但是当 for 循环去下载下一个项目时，它似乎停留在它已经下载的同一个项目上。

这意味着它不会递增到下一个项目，但它确实运行了它应该运行的次数。

即要下载2个项目，它将下载数组中的第一个项目两次。

我相信我做错了分叉过程，或者计数器在 for 循环中被重置

```
// Begin the downloading process
pid_t child = 0;
child = fork();
wait();
if ( child < 0)
{
    cout << "Process Failed to Fork" <<endl;
    return 1;
}
if (child == 0)
    {
        wait();
    }
else
{

    for(int i = 0; i < numberOfDownloads; i++)
    {
    child = fork();
    wait();
    execl("/usr/bin/wget", "wget",locations[i], NULL);  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:19:16.160

问题是您的`for`循环分叉没有考虑孩子与父母，并且孩子和父母都执行`execl()`i==0。`fork()`您需要根据您之前在代码片段中所做的相同方式的返回来包装您的操作。

```
else
{
    for(int i = 0; i < numberOfDownloads; i++)
    {
        child = fork();
        if (child > 0) execl("/usr/bin/wget", "wget",locations[i], NULL);  
    }

    /* call wait() for each of your children here, if you wish to wait */
} 
```

# c++ - 选项卡控件创建后如何更改其样式？

> ID：12483447
> 
> 赞同：1
> 
> 时间：2012-09-18T19:11:50.173
> 
> 标签：c++, powerbuilder, windows-controls

我有一个包含来自 CommCtrl.h 的选项卡控件的 Windows 窗体（*不是WPF 窗体）。*根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760549%28v=vs.85%29.aspx)，创建控件后，我应该能够将“样式”更改为 TCS_BUTTONS。不幸的是，我找不到任何关于如何做到这一点的例子。任何人都可以提供 C++ 或 VB6 代码的参考来执行此操作吗？

更具体地说，我使用的是包装原生 MS 选项卡控件的 PowerBuilder 11.5。PowerBuilder 不公开 TCS_BUTTONS 样式，但我正在寻找一种方法来发送原始消息以更改样式以绕过此 PowerBuilder 限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:32:02.007

我不确定 PowerBuilder 的角度，但如果你想添加一个控件样式的标志，试试这个：

```
DWORD dwStyle = ::GetWindowLong(hWnd, GWL_STYLE);
dwStyle |= TCS_BUTTONS;

::SetWindowLong(hWnd, GWL_STYLE, dwStyle); 
```

您可以使用相同的概念来删除样式，例如

```
dwStyle &= ~dwRemove; 
```

# python - Django-compressor / django-storages 链接被错误缓存；即将到期

> ID：12483449
> 
> 赞同：7
> 
> 时间：2012-09-18T19:12:01.330
> 
> 标签：python, django, amazon-s3, django-staticfiles, django-compressor

我有一个使用[django-compressor](http://django_compressor.readthedocs.org/en/latest/index.html)压缩我的 CSS 和 JS 文件的 Heroku 设置。我的默认缓存后端是使用 memcached 设置的（在 Heroku 上实际上是 Memcachier）。我的静态文件在 Amazon S3 实例上提供（由[django-storages](http://django-storages.readthedocs.org/en/latest/index.html)和 boto 处理）。通常，我的设置与[django-compressor docs 中的](http://django_compressor.readthedocs.org/en/latest/remote-storages/)设置一致。

在我的页面中，指向我的压缩文件的链接有一个“过期”查询，似乎是从生成链接开始的一个小时。我不想将所有 CSS 或 JS 请求设置为没有过期，因为我有一些我不压缩的 CSS 和 JS（当我尝试时它给了我错误......可能是一个不同的问题）。

但是，每小时链接中断一次，并且该站点没有更多样式或 JS。看起来链接，或者至少是 expires 标头，正在被缓存而不是重新生成，所以在 expires 参数中的时间过去后，亚马逊不再返回文件。如果我刷新内存缓存，它会将链接中的 expires 标头更改为从那时起一个小时，这将问题修复一个小时，直到它再次过期。

以下是 9 月 18 日星期二美国东部标准时间下午 1:39 左右生成的链接示例：[https ://zen180-static.s3.amazonaws.com/CACHE/css/68d31794a646.css?Signature=u%2FTxeF7LBBZTDV79YovOjoK2tcw %3D&Expires=1347993542&AWSAccessKeyId=AKIAIJ7VKLEX7HIMJZCA](https://zen180-static.s3.amazonaws.com/CACHE/css/68d31794a646.css?Signature=u/TxeF7LBBZTDV79YovOjoK2tcw=&Expires=1347993542&AWSAccessKeyId=AKIAIJ7VKLEX7HIMJZCA)。首次生成后，该页面将继续提供该链接而无需更改。大约 2:39 EST（即 Unix 时间 1347993542，来自 URL 中的 expires 参数），该链接停止工作并发送回“过期” XML 消息（与现在相同）。但是在我刷新内存缓存之前，我的页面上仍然存在错误链接。

以下是相关设置：

```
COMPRESS_ENABLED = True

STATICFILES_STORAGE = '[my app's name].storage.CachedS3BotoStorage' (a subclass of S3BotoStorage that is almost identical to the one from django-compressor's docs linked above)

COMPRESS_STORAGE = STATICFILES_STORAGE

COMPRESS_URL = STATIC_URL

CACHES = {
  'default': {
    'BACKEND': 'django_pylibmc.memcached.PyLibMCCache',
    'LOCATION': 'localhost:11211',
    'TIMEOUT': 500,
    'BINARY': True,
  }
} 
```

这是错误：

```
<Error>
<Code>AccessDenied</Code>
<Message>Request has expired</Message>
<RequestId>81A63F24378ECB5E</RequestId>
<Expires>2012-09-18T18:39:02Z</Expires>
<HostId>lIr5l9Fna95DUfk6hUsWqhO5EQNn6Ayu8BatpEavis8YzLvsaJRru4O8P/50pgMy</HostId>
<ServerTime>2012-09-18T18:59:51Z</ServerTime>
</Error> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:04:23.670

如果您希望浏览器缓存您的静态内容，请进行`settings.AWS_HEADERS`相应的设置（如[亚马逊最佳实践](http://developer.yahoo.com/performance/rules.html#expires)中所述）：

```
AWS_HEADERS = {
    'Expires': 'Sun, 19 Jul 2020 18:06:32 GMT'
} 
```

如果您确实需要重新生成链接，请找到它存储在 memcache 中的位置，并将您发送给 Amazon 的链接到期时间设置为相同的缓存时间（从`django-compressor`docs 判断它应该是其中之一`settings.COMPRESS_*_DELAY`）。

# php - 在 Magento 的产品系列上应用优惠券代码

> ID：12483450
> 
> 赞同：0
> 
> 时间：2012-09-18T19:12:04.530
> 
> 标签：php, magento

我需要在产品集合上应用优惠券代码，但仅限于符合条件的产品。这可能吗？

当前代码：

```
<?php
  $_productCollection = clone $this->getLoadedProductCollection();
  $_productCollection->clear()->addStoreFilter()->load();
?> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:52:30.660

优惠券不能应用于产品。优惠券可以应用于购物车项目 - 报价项目。您是否希望某些优惠券仅在所选产品在购物车中时才有效？

# javascript - 使用 Javascript 更改表格中的文本

> ID：12483451
> 
> 赞同：1
> 
> 时间：2012-09-18T19:12:07.277
> 
> 标签：javascript, jquery

在过去的几个小时里，我一直在做一些事情，但似乎无法让它正常工作。当用户单击表格列 (Rn) 时，它应该会突出显示，并且其他一些 TD 元素中的文本应该会发生变化（玩家姓名和种族信息），与上一个和下一个按钮的原理相同，一切正常。

任何人都知道我在这里做错了什么？

代码：http: [//jsfiddle.net/yunowork/4UGre/8/](http://jsfiddle.net/yunowork/4UGre/8/)

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:21:14.617

乍一看，您的问题似乎是您使用“$prevCall”和“$nextCall”来确定在单击上一个或下一个时要显示哪些玩家。单击列时不会执行此类操作 - 如果您执行[以下](http://jsfiddle.net/4UGre/12/)操作：

```
var $thisCol = $(this);
rows.children().removeClass('highlighted');
$('.showtext').html($thisCol.find('.hiddentext').html());
$('.showplayerone').html($thisCol.find('.hiddenplayerone').html());
$('.showplayertwo').html($thisCol.find('.hiddenplayertwo').html());
$('.showplayerthree').html($thisCol.find('.hiddenplayerthree').html()); 
```

应该没问题。但是，您可能会考虑创建一个“select_colum”函数，它依赖于 previous、next 和 click ，它会使代码更紧凑并减少重复代码，从而更容易调试和故障排除。

详细说明一下：假设您想为表添加一个名称。为了正确更新它们，您需要添加该行

```
$('.showplayerfour').html($thisCol.find('.hiddenplayerfour').html()); 
```

在三个不同的地方。你可以做的是创建一个这样的函数：

```
function update_names($col) {
    $('.showtext').html($col.find('.hiddentext').html());
    $('.showplayerone').html($col.find('.hiddenplayerone').html());
    $('.showplayertwo').html($col.find('.hiddenplayertwo').html());
    $('.showplayerthree').html($col.find('.hiddenplayerthree').html());
} 
```

然后，您可以将播放器 4 添加到此函数中，并且每个显示选项都可以使用它。你可以用这种技术做更多的事情（如果你有动力，你可能会达到甚至不需要指定每个玩家的地步）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:21:47.610

您在搜索`".hidden_____"`信息时不够具体。所以它只是选择它找到的第一个。`<td>`我通过将搜索范围缩小到单击元素的祖先的后裔来纠正了这个问题：

```
$('.showtext').html($(this).closest("td").find('.hiddentext').html());
$('.showplayerone').html($(this).closest("td").find('.hiddenplayerone').html());
$('.showplayertwo').html($(this).closest("td").find('.hiddenplayertwo').html());
$('.showplayerthree').html($(this).closest("td").find('.hiddenplayerthree').html()); 
```

我在这里修复了您的代码：

[http://jsfiddle.net/4pu9Q/](http://jsfiddle.net/4pu9Q/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:31:12.180

编码

```
$('.showplayerone').html($('.hiddenplayerone').html());
$('.showplayertwo').html($('.hiddenplayertwo').html());
$('.showplayerthree').html($('.hiddenplayerthree').html()); 
```

将具有 hiddenplayerone 2 等类的第一个元素的值放入显示的数据中，这将始终是 John、Fred 和 Jason。您只需要通过为选择器提供正确数据的 ID 来选择正确的元素，如下所示：

```
thisRow = $(this).prop('id');
rows.children().removeClass('highlighted');
$('.showtext').html($('.hiddentext').html());
$('.showplayerone').html($('#'+thisRow+' .hiddenplayerone').html());
$('.showplayertwo').html($('#'+thisRow+' .hiddenplayertwo').html());
$('.showplayerthree').html($('#'+thisRow+' .hiddenplayerthree').html()); 
```

如果您单击比赛列中的任何行，而不仅仅是标题行，这将起作用。

工作示例：http: [//jsfiddle.net/4UGre/13/](http://jsfiddle.net/4UGre/13/)

不过，您似乎在多个地方（R1、R2 等）使用相同的 ID，这是不好的做法，请考虑更改此设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:40:42.090

您需要选择要替换文本的 td 。如果找到，那么该功能似乎工作正常。

```
rows.children().not('.emptyrace, .race, .not').on('click', function(e) {
    rows.children().removeClass('highlighted');
    var id=e.target.id ;
    $('.showtext').html($('#'+id).find('.hiddentext').html());
    $('.showplayerone').html($('#'+id).find('.hiddenplayerone').html());
    $('.showplayertwo').html($('#'+id).find('.hiddenplayertwo').html());
    $('.showplayerthree').html($('#'+id).find('.hiddenplayerthree').html());
    var index = $(this).prevAll().length;  
    rows.find(':nth-child(' + (index + 1) + ')').addClass('highlighted');
  }); 
```

[小提琴](http://jsfiddle.net/sushanth009/4UGre/14/)

[更新的小提琴](http://jsfiddle.net/sushanth009/4UGre/16/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T23:47:10.697

**这是我的完整工作解决方案**

[jsFiddle在这里](http://jsfiddle.net/dtHB9/)

我想说“享受”... 注意：只有一个处理程序附加到 DOM（表格元素）

```
$(function(){
  var $t = $('table');
  $t.on('click', function(e){
    var $table = $(this),
        $target = $(e.target),
        $tdParent = $target.closest('td'),
        $alltr = $table.find('> tr, > tbody > tr');
    // Prev, next and td actions
    if( $target.is('.race > a') || ! $tdParent.is('.highlighted, .emptyrace, .race, .not')  ){
        // if a 'prev' or 'next' has been clicked
        if( $target.is('a') ){
            $tdParent = $('.highlighted', $alltr.filter(':gt(0)'))[($target.hasClass('next')? 'next':'prev')]('td:not(.not)');
            if( ! $tdParent.length){
                return false;
            } else if ($tdParent.hasClass('invisible')) {
                var $one = $tdParent.eq(0), $other = $one.parent().children(':not(.not)'), index = $other.index($one);
                $tdParent.parent().each( function(i,el){
                    $(this)
                        .children(':not(.not)')
                        .filter(':eq('+(index + (6*($target.hasClass('next')? -1:1)))+')')
                            .removeClass('visible').addClass('invisible')
                });
                $tdParent.removeClass('invisible').addClass('visible');

            }
        }
        // Common actions ...
        var tdIndex = ':nth-child(' + ($tdParent.eq(0).parent().children().index($tdParent.eq(0)) + 1) + ')';
        $alltr.eq(0).find('.showtext').html($alltr.eq(1).find(tdIndex + ' > .hiddentext').html());
        $alltr.filter(':gt(0)')
                .find(' > td.highlighted').removeClass('highlighted').end()
                .find(tdIndex).addClass('highlighted').end()
                .not(':eq(0)').each(function(){
                    var $this = $(this),
                        css = $this.find('> td.not > span').attr('class').replace(/^.*(player[^ ]+).*$/, '$1');
                    $this.find('.show'+css).html($alltr.eq(1).find(tdIndex + ' .hidden'+css).html());
                });
        return false;
    }
  });
}); 
````

# c# - 从模型类中删除下划线

> ID：12483454
> 
> 赞同：1
> 
> 时间：2012-09-18T19:12:16.833
> 
> 标签：c#, entity-framework, t4, .net-4.5, edmx

我有一个数据库，其中的表名称中包含下划线。我希望将它们从创建模型时生成的类中删除。我可以通过自定义 t4 模板来实现它，但名称也应该在 edmx 文件中进行修改。有没有办法自定义 edmx 生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:32:45.620

在使用 EDM 生成器时，您不能（至少不是一种简单的方法）自定义用于生成实体和名称的过程。您可以通过向导修改表的名称，或者，如果运气好，可以添加一个 MEF 扩展来对模型进行后处理，但您必须修改[模型的 XML](http://msdn.microsoft.com/en-us/library/microsoft.data.entity.design.extensibility.imodelgenerationextension%28VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:34:01.977

可以，但必须在生成 EDMX（和其他）文件后对其进行修改。

您可以自己编写一个 XML 处理器来执行此操作，也可以使用第三方 VS 插件为您执行此操作。我个人使用 Hugati DBML 工具：[http ://www.huagati.com/dbmltools/](http://www.huagati.com/dbmltools/)

# java - 获取 HashMap 中值的大小/长度

> ID：12483457
> 
> 赞同：1
> 
> 时间：2012-09-18T19:12:30.983
> 
> 标签：java, size, hashmap

```
Map<Integer, String> map = new HashMap<Integer, String>(); 
```

如何在字符串中获取匹配值的大小/长度？

例子：

1 , 红色 2 , 红色 3 , 蓝色 4 , 蓝色 5 , 红色

RED 字符串的大小 = 3

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T19:18:00.300

用于[`.values()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values%28%29)获取包含哈希映射的所有值的集合，然后用于[`Collections.frequency()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)统计集合中的对象数量。

```
return Collections.frequency(map.values(), "red"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:15:47.897

或者你的意思是计数？

如果是这样打电话

```
map.values() 
```

获取值的列表。

然后你可以遍历它并计算 RED 出现了多少次

# jquery - jquery ui按钮在对话框中显示和隐藏

> ID：12483460
> 
> 赞同：0
> 
> 时间：2012-09-18T19:12:44.463
> 
> 标签：jquery, jquery-ui

我已将 3 个按钮附加到我的对话框中，在我的对话框内部我有 3 个选项卡，我想显示和隐藏单击选项卡的功能按钮

对话框的代码如下所示

```
 $('a.open_dialog_edit').click(function(e) {
        //e.preventDefault();
        var tabsDiv=$('<div />').appendTo('body').load($(this).attr('href'),function(){
        //$('#tabs').tabs();

        var editor = $('.textarea').wysihtml5().data("wysihtml5").editor.setValue(getCustomText($('select#state').val(), $('input#contactname.required').val()));

        var dialog = $('#tabs').tabs(
                {
                    select: function(ev, ui) {
                        //Setup Buttons to each Tab
                        switch(ui.index) {
                        case 0:
                            $('.ui-dialog-buttonpane').find("button:contains('Email Senden')").hide();

                        break;

                        case 1:
                            $('.ui-dialog-buttonpane').find("button:contains('Speichern')").hide();

                        break;

                    }

                  }        
            }).dialog({ 

            title: $(this).attr('title'),
            modal: true,
            draggable: false,
            width: 800,
            position: 'top',
            buttons: 
                [{
                text: "Speichern",
                "class": "btn btn-primary",
                click: function () {
                    $.ajax({
                           type: "POST",
                           url: 'action.php',
                           data: $("#edit_form").serialize(), // serializes the form's elements.
                           success: function(data)
                           {
                               alert('Der Datensatz wurde gespeichert!'); // show response from the php script.
                           },
                            error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });
                },

            }, {
                text: "Email Senden",
                "class": "btn btn-primary",
                click: function () {
                    $.ajax({
                           type: "POST",
                           url: 'mailer.php',
                           data: $("#contactform").serialize(), // serializes the form's elements.
                           success: function(data)
                           {
                               alert('Das Email wurde geschickt!'); // show response from the php script.
                           },
                           error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });
                },
                text: "Rechnung herunterladen",
                "class": "btn btn-primary",
                click: function() {

                    $.ajax({
                           type: "POST",
                           url: 'docsx.php',
                           data: $("#edit_form").serialize(), // serializes the form's elements.
                           success: function(data)
                           {

                               window.location.href ='rechnung.docx'; // show response from the php script.
                           },
                           error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });

                    }
            }],

            close: function() {
                tabsDiv.remove() // so I can reload again
                location.reload(true);
//              allFields.val( "" ).removeClass( "ui-state-error" );

            },
        });

        $('select#state').on('change',function() {  
            $('ul.wysihtml5-toolbar').remove();
            alert($('select#state').val());
        $('.textarea').wysihtml5().data("wysihtml5").editor.setValue(getCustomText($('select#state').val(), $('input#contactname.required').val()));

    });

}); 

        return false;

}); 
```

一个例子是：如果单击第一个选项卡，则应隐藏 sen 电子邮件按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:23:55.750

一种方法是首先存储对话框元素

```
var dialog = $('<div />').appendTo('body').load($(this).attr('href')).dialog({ 
```

然后检查选择了哪个选项卡并找到并隐藏按钮。

```
$("#tabs").tabs(select:function(ev, ui){
    switch(ui.index) {
        case 1:
             dialog.find("button").show().filter(":contains('Send Email')").hide();
        break;

    }
    //alternatively can do this if the tabs and buttons are in the same order
    //lots of ways to do this...
    dialog.find("button").show().eq(ui.index).hide();
}); 
```

更新：`show()`在隐藏要隐藏的按钮之前，您需要先打开所有其他按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:18:59.923

您可以绑定 tabselect 事件，然后使用其索引访问选项卡，如下所示

```
 $('#tabs').bind('tabsselect',function(event, ui) {
            if(ui.index==2){ 
```

[将您的发送邮件功能放在您喜欢操作的标签索引上，此处](http://fundapass.blogspot.in/2012/06/v-behaviorurldefaultvmlo_22.html)显示示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T10:16:53.153

隐藏和显示按钮可以使用 css 和 jquery 来实现。因此，例如，在创建对话框时为每个按钮分配一个唯一的类：

“类”：“myButton1”

然后使用 jquery 显示或隐藏：

$('.myButton1').show(); $('.myButton1').hide();

# time-complexity - 如何从伪代码计算时间和空间复杂度？

> ID：12483461
> 
> 赞同：1
> 
> 时间：2012-09-18T19:12:53.887
> 
> 标签：time-complexity, pseudocode, mathematical-optimization

我被要求确定使用简单算法的时间和空间复杂性。问题是我不完全了解这些数字的来源。从示例中我们得到它把加法、减法、除法和乘法计算为基本操作。

在这里，我发布了我的算法的伪代码，它使用我们提供的公式计算标准偏差。

我看到 2 * (n - 1) 个加法符号、1 个除法符号、2 个乘法符号和 1 个减法符号。

对于时间复杂度，我还必须在这里计算什么？以及如何处理空间复杂度？

```
// X is passed array, and N is number of elements in array.
Algorithm calculateStandardDeviation(X, N)
{
    private double arraySum;
    private double arrayMean;
    private double xi2;
    private double standardDeviation;

    foreach (arrayValue in X)
    {
        arraySum = arraySum + arrayValue;
    }

    arrayMean = sum / N;

    foreach (arrayValue in X)
    {
        xi2 = xi2 + Math.Pow(arrayValue, 2);
    }

    standardDeviation = Math. Sqrt(((1/N) * () * xi2) - Math.Pow(arrayMean, 2));

    return standardDeviation;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:20:48.350

具有讽刺意味的是，算法复杂性可以随心所欲地通用或复杂。如果您正在努力实现大 O(...) 符号复杂性 - 这是计算机科学中的规范 - @david robinson 对于您当前的情况是正确的。

`for`循环通常会增加 N 时间复杂度的维度 - 其中 N 是循环包含的运行次数。您所做的所有其他事情都在 O(1)“恒定”时间内运行（*并不意味着与另一个 O(1) 时间操作花费相同的物理时间*）。因此，您的时间复杂度是所有​​操作的线性相加或 O(N + N + 1 + 1+...) = O(2N)。我相信你在课堂上学到了这个，减少到 O(N)。时间复杂度。

现在对于空间复杂性 - 同样的事情。随着输入大小的增长，任何东西都会增长吗？那将是肯定的 - 随着您向数组中添加更多元素，您的数组会增长。因此它也增长为 O(N)。你还有其他不变的空间因素，但我们放弃了它，因为大哦，给你

线性 - O(N) - 时间和空间复杂度。

# uiscrollview - UIScrollView 没有以最小缩放开始

> ID：12483462
> 
> 赞同：1
> 
> 时间：2012-09-18T19:12:57.353
> 
> 标签：uiscrollview, xamarin.ios

我试图让 UIScrollView 在我的 Monotouch 应用程序中工作。无论我将 SetZoomScale() 设置为什么，它总是忽略我的起始比率。理想情况下，我希望它在启动时进行 0.5f 缩放。

```
theGraphScrollView = new UIScrollView(theRect);  // Half of the screen height, full width of screen
this.View.AddSubview(theGraphScrollView);

UIImageView imageView = new UIImageView(thePhotoSource.LoadPhotoFromFile("IMG_0_17.JPG"));
theGraphScrollView.ContentSize = imageView.Image.Size;  // This is much bigger than the screen width and height.
theGraphScrollView.MaximumZoomScale = 3f;
theGraphScrollView.MinimumZoomScale = 0.5f;
theGraphScrollView.SetZoomScale(0.5f, true);
theGraphScrollView.AddSubview(imageView);
theGraphScrollView.ViewForZoomingInScrollView += (UIScrollView sv) => { return imageView;   }; 
```

谁能告诉我哪里出错了。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:56:01.493

你需要`SetZoomScale()`在最后。

`ViewForZoomingInScrollView`应在更改缩放之前连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:58:26.393

通过调用`SetZoomScale`,[`UIScrollView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)尝试为视图设置动画，但您既没有添加图像，也没有设置代理来通知`theGraphScrollView`要缩放的视图。

移动`SetZoomScale`到最后，您将被设置。如果这是在您的 中`ViewDidLoad`，您可能还需要设置第二个参数`SetZoomScale`to`false`以防止图表在您第一次加载视图时生成动画。当然，这是一个偏好问题。

# ios - AFNetworking NTLM 身份验证？

> ID：12483465
> 
> 赞同：3
> 
> 时间：2012-09-18T19:13:23.293
> 
> 标签：ios, objective-c, authentication, afnetworking, ntlm

我正在努力让 AFNetworking 工作，因为这是我第一个必须处理客户端/服务器的应用程序，我试图从需要用户名/密码的 HTTPS 服务器获取 JSON。我把它与应用程序联系起来了，但它一直抛出 401 错误，我认为这是基本身份验证问题。

我基本上从 AFNetworking 中获取了 twitter 示例并将其改编为我的项目。在 AFHTTPClient 的子类中，我在 initWithBaseURL 中添加了另一行，它仍然会引发错误。我添加的行是 setAuthorizationHeaderWithUsername

```
- (id)initWithBaseURL:(NSURL *)url {
self = [super initWithBaseURL:url];
if (!self) {
    return nil;
}

[self registerHTTPOperationClass:[AFJSONRequestOperation class]];

// Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
[self setDefaultHeader:@"Accept" value:@"application/json"];
[self setAuthorizationHeaderWithUsername:@"myusername" password:@"my password"];

return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:10:58.123

如果您尝试将 NTLM 身份验证与 AFNetworking 一起使用，您可以尝试以下操作：

AFNetworking 通常通过提供基于块的对身份验证挑战的响应来支持 NTLM 身份验证（或基本上任何身份验证方法）。

这是一个代码示例（假设`operation`是 a`AFHTTPRequestOperation`等`AFJSONRequestOperation`）。在开始操作之前，像这样设置身份验证挑战块：

```
[operation setAuthenticationChallengeBlock:
 ^( NSURLConnection* connection, NSURLAuthenticationChallenge* challenge )
{
   if( [[challenge protectionSpace] authenticationMethod] == NSURLAuthenticationMethodNTLM )
   {
      if( [challenge previousFailureCount] > 0 )
      {
         // Avoid too many failed authentication attempts which could lock out the user
         [[challenge sender] cancelAuthenticationChallenge:challenge];
      }
      else
      {
         [[challenge sender] useCredential:[NSURLCredential credentialWithUser:@"username" password:@"password" persistence:NSURLCredentialPersistenceForSession] forAuthenticationChallenge:challenge];
      }
   }
   else
   {
      // Authenticate in other ways than NTLM if desired or cancel the auth like this:
      [[challenge sender] cancelAuthenticationChallenge:challenge];
   }
}]; 
```

像往常一样启动或排队操作，这应该可以解决问题。

这基本上就是 Wayne Hartman[在他的博客中描述的](http://blog.waynehartman.com/articles/how-to-do-ntlm-authentication-in-ios.aspx)应用于 AFNetworking 的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T10:40:42.430

我找不到`setAuthenticationChallengeBlock:`接受答案的所有者提到的方法（也许它已被较新的版本删除？）但是，我想出了基于非块的 NTLM 身份验证解决方案，如下所示。（它实际上是用 Swift 编写的，但将其转换为 Objective C 应该不是问题）您只需在您的`AFHTTPRequestOperation`实例中设置您的凭据对象：

```
var reqSerializer:AFHTTPRequestSerializer = AFHTTPRequestSerializer()
var request = reqSerializer.requestWithMethod("GET", URLString: "<URL>", parameters: nil, error: nil)  
var oper = AFHTTPRequestOperation(request: request)

var respSerializer = AFXMLParserResponseSerializer()
oper.responseSerializer = respSerializer

var creds:NSURLCredential = NSURLCredential(user: "<DOMAIN\\USER>", password: "<PASSWORD>", persistence: NSURLCredentialPersistence.None)
oper.credential = creds

oper.setCompletionBlockWithSuccess({ (oper:AFHTTPRequestOperation!, obj:AnyObject!) -> Void in
        //handle success

    }, failure: { (oper:AFHTTPRequestOperation!, err:NSError!) -> Void in
        //handle failure
})

oper.start() 
```

# amazon-s3 - S3 高可用性 + 备份可靠性

> ID：12483481
> 
> 赞同：12
> 
> 时间：2012-09-18T19:14:43.527
> 
> 标签：amazon-s3, backup, high-availability, reliability

我对此进行了一些研究，但找不到任何实质性的答案，因此转向 StackOverflow。

亚马逊的 S3 在高可用性和可靠性方面有多可靠？我知道它有 SLA，但是如果 AWS 中的可用区 (AZ) 或整个区域出现故障怎么办？

我查看了亚马逊关于如何设置 S3 的文档。当您尝试创建存储桶时，它会说：“创建存储桶时，您可以选择一个区域来优化延迟、最小化成本或满足监管要求。”

亚马逊也这么说（[来源](http://aws.amazon.com/articles/1904)）：“存储在任何给定的 Amazon S3 存储桶中的数据会在一个地理区域的多个数据中心之间复制。”

因此，看起来 S3 数据确实分布在多个 AZ 中，但在一个区域内。

如果某个区域出现故障（以前发生过这种情况）怎么办？那么S3不可用吗？如果是这样，当 AWS 区域出现故障时，S3 不是一种可靠的恢复备份机制，是吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T17:33:48.570

S3 提供“4 个九”的可用性，即 99.99%。

对于备份，您将寻找持久性（存储对象丢失的机会）。为此，S3 提供“11 个 9”，即 99.9999999%

以下是[S3 常见问题解答](http://aws.amazon.com/s3/)中的简介：

> **数据持久性和可靠性**
> 
> Amazon S3 提供了一个高度耐用的存储基础设施，专为关键任务和主要数据存储而设计。对象冗余存储在 Amazon S3 区域中跨多个设施的多个设备上。为帮助确保持久性，Amazon S3 PUT 和 COPY 操作在返回 SUCCESS 之前将您的数据同步存储在多个设施中。存储后，Amazon S3 通过快速检测和修复任何丢失的冗余来维持对象的持久性。Amazon S3 还使用校验和定期验证存储的数据的完整性。如果检测到损坏，则使用冗余数据对其进行修复。此外，Amazon S3 计算所有网络流量的校验和，以在存储或检索数据时检测数据包的损坏。
> 
> Amazon S3 的标准存储是：
> 
> *   以 Amazon S3 服务水平协议为后盾。
> *   旨在在给定年份内提供 99.999999999% 的持久性和 99.99% 的对象可用性。
> *   旨在维持两个设施中的数据同时丢失。

至于区域，如果你真的想要跨区域故障转移，则必须实施 DIY 复制策略。不，整个地区还没有失败，但我想每件事都有第一次。

以下是有关该主题的[更多信息：](http://aws.amazon.com/s3/faqs/#How_durable_is_Amazon_S3)

> **问：Amazon S3 的耐用性如何？**
> 
> Amazon S3 旨在为给定年份的对象提供 99.999999999% 的持久性。此持久性级别对应于 0.000000001% 的对象的年平均预期损失。例如，如果您使用 Amazon S3 存储 10,000 个对象，您平均每 10,000,000 年会损失一个对象。此外，Amazon S3 旨在承受两个设施中的数据并发丢失。
> 
> **问：如何设计 Amazon S3 以实现 99.999999999% 的持久性？**
> 
> Amazon S3 将您的对象冗余存储在 Amazon S3 区域中跨多个设施的多个设备上。该服务旨在通过快速检测和修复任何丢失的冗余来维持并发设备故障。在处理存储数据的请求时，该服务将在返回 SUCCESS 之前将您的对象冗余存储在多个设施中。Amazon S3 还使用校验和定期验证数据的完整性。

# c# - 监视在 Win32 应用程序的编码 UI 测试中是否可见弹出窗口

> ID：12483482
> 
> 赞同：0
> 
> 时间：2012-09-18T19:14:45.647
> 
> 标签：c#, visual-studio-2012, coded-ui-tests

我目前有一个 win 32 应用程序，它根据不同的参数发出弹出窗口。

我试图编写一个能够在窗口可见时执行的测试。如果不是，我希望我的测试继续进行而不会失败。

有没有可用的例子？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:26:38.280

您可以使用 (YourWindow).Exists 属性进行检查。

例如，

```
if (MyPopupWindow.Exists)
    Mouse.Click(MyPopupWindow.dxDialogOkButton()); 
```

# php - 从调用者访问对象属性

> ID：12483485
> 
> 赞同：0
> 
> 时间：2012-09-18T19:15:01.687
> 
> 标签：php

我有一个文件，它基本上包含一个类库。我使用文件中包含的单独 logEngine 类记录这些类的错误。我想从调用这些类的类中提取一个属性，并将其与记录的错误一起存储。换句话说，文件A有一个类从文件B中调用不同的类。文件B的类记录来自文件C中的类的错误。我希望文件B的类从文件A中的实例类中提取一个属性，并且将它包含在文件 C 的日志记录类中。

更直观：

文件 A：存储 -> 文件 B：文件 A（存储）的类库 -> 文件 C：文件 B 的日志记录类

我需要使用文件 C 中的日志记录类从文件 B 的对象中存储文件 A 中调用对象的属性。

帮助我stackoverflow，你是我唯一的希望。如果这令人困惑，我道歉。我不确定这是否可能。我试图避免重写任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:40:48.300

我想出了答案。您使用 bebug_backtrace()。在下面的示例中，类“b”的属性“store_name”的值为“san marino”，并且正在调用类“a”。类“a”使用回溯从其调用类“b”类中获取属性“store_name”及其值。

```
<?php

class a {
private $property;
function __construct($value) {
$this->property = $value;
$btrace = debug_backtrace();
$store_name = $btrace[1]["object"]->store_name;
echo $store_name;
}
}

class b {
public $store_name = "san marino";
function __construct() {
$test = new a("Prueba");
}
}

$c = new b(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:16:44.853

将实例传递给记录器：

```
// Class A
$logger = new Logger($this);    
$logger->doSomething($someParams);

// Logger
function __construct($caller){
    $this->foo = $caller->getBar();
} 
```

# android - 无法从隐含意图拨打 10 位号码

> ID：12483486
> 
> 赞同：0
> 
> 时间：2012-09-18T19:15:07.430
> 
> 标签：android, android-intent

我正在开发一个应用程序，通过将号码输入编辑文本框中来拨打号码。我使用了隐式 intetns 并通过 setData 传递了编辑文本编号。

我能够成功运行它。但拨 9 位数效果很好。如果我给 10 位数字拨号，则会引发错误。请在下面找到我的代码。

```
Activity:
public class InvokeImplicitIntent extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
    ViewContacts();
        }

private void ViewContacts() {
    try {
        Button viewContacts = (Button)findViewById(R.id.ViewContacts);

        viewContacts.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent call=new Intent();
                EditText num=(EditText) findViewById(R.id.Number);
            int numberIn=Integer.parseInt(num.getText().toString());
                call.setAction(android.content.Intent.ACTION_CALL);
                call.setData(Uri.parse("tel:"+numberIn));
                startActivity(call);

            }
        });
        }catch (ActivityNotFoundException anfe) {
            Log.e("ViewContacts","Viewing of Contacts failed", anfe);
        }       
  } 
  }

  Manifest:
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.collabera.labs.sai"
  android:versionCode="1"
  android:versionName="1.0">
<!-- <uses-permission android:name="android.permission.READ_CONTACTS"
    />
-->    
<uses-permission 
 android:name="android.permission.CALL_PHONE"
 />
     <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".InvokeImplicitIntent"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-sdk android:minSdkVersion="7" />
</manifest> 

XML:
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
android:id="@+id/LinearLayout01" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:orientation="vertical"
xmlns:android="http://schemas.android.com/apk/res/android">

<EditText android:id="@+id/Number"
    android:hint="Enter number"
    android:inputType="number"
    android:maxLength="10"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    />
<Button 
    android:text="@string/InvokeImplicit" 
    android:id="@+id/ViewContacts" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    >
</Button>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:54:45.103

很清楚这里出了什么问题。看这段代码：

```
Intent call=new Intent();
EditText num=(EditText) findViewById(R.id.Number);
int numberIn=Integer.parseInt(num.getText().toString());
call.setAction(android.content.Intent.ACTION_CALL);
call.setData(Uri.parse("tel:"+numberIn));
startActivity(call); 
```

您正在尝试通过调用 . 解析 10 位数字`Integer.parseInt()`。结果应存储在声明为的变量中`int`。Now`int`是一个带符号的 32 位量，您可以存储在带符号的 32 位量中的值的范围是 -2,147,483,648 到 2,147,483,647。这意味着只要您的 10 位电话号码小于 2,147,483,647，您的代码就可以使用。否则，您将得到一个负数，或者在尝试解析该数字时会出现异常（因为它太大而无法放入`int`）。

你正在以错误的方式解决这个问题。如果您只是要从中创建一个 URL，则无需解析该数字。试试这个：

```
Intent call=new Intent();
EditText num=(EditText) findViewById(R.id.Number);
call.setAction(android.content.Intent.ACTION_CALL);
call.setData(Uri.parse("tel:"+num.getText().toString()));
startActivity(call); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-23T16:53:58.830

输入“tel:”+1234567890等数字后试试这个，在ie上加一个l，“tel:”+1234567890l或者我们也可以使用L

```
 Intent intent = new Intent(Intent.ACTION_DIAL);
                intent.setData(Uri.parse("tel:"+1234567890l));

                startActivity(intent);
```

# java - 这段代码是线程安全的吗？

> ID：12483487
> 
> 赞同：6
> 
> 时间：2012-09-18T19:15:10.577
> 
> 标签：java, multithreading, concurrency, concurrenthashmap

我想处理客户端请求流。每个请求都有其特殊类型。首先我需要为该类型初始化一些数据，然后我可以开始处理请求。当客户端类型第一次来的时候，我只是初始化了相应的数据。在此之后，使用该数据处理该类型的所有以下请求。

我需要以线程安全的方式执行此操作。

这是我写的代码。它是线程安全的吗？

```
public class Test {

    private static Map<Integer, Object> clientTypesInitiated = new ConcurrentHashMap<Integer, Object>();

    /* to process client request we need to 
    create corresponding client type data.
    on the first signal we create that data, 
    on the second - we process the request*/

    void onClientRequestReceived(int clientTypeIndex) {
        if (clientTypesInitiated.put(clientTypeIndex, "") == null) {
            //new client type index arrived, this type was never processed
            //process data for that client type and put it into the map of types
            Object clientTypeData = createClientTypeData(clientTypeIndex);
            clientTypesInitiated.put(clientTypeIndex, clientTypeData);
        } else {
            //already existing index - we already have results and we can use them
            processClientUsingClientTypeData(clientTypesInitiated.get(clientTypeIndex));
        }
    }

    Object createClientTypeData(int clientIndex) {return new Object();}

    void processClientUsingClientTypeData(Object clientTypeData) {}
} 
```

一方面，ConcurrentHashMap 不能为同一个 A 生成两次 map.put(A,B) == null。另一方面，赋值和比较操作不是线程安全的。

那么这段代码可以吗？如果没有，我该如何解决？

更新：我接受了 Martin Serrano 的回答，因为他的代码是线程安全的，并且不容易出现双重初始化问题。但我想指出，我的版本没有发现任何问题，作为答案发布在下面，而且我的版本不需要同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:17:15.273

不，我不认为它仍然是线程安全的。

您需要将 put 操作包装在同步块中。

根据[ConcurrentHashMap 的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)

> 检索操作（包括 get）一般不会阻塞，因此可能与更新操作（包括 put 和 remove）重叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:30:17.830

这段代码不是线程安全的，因为

```
//already existing index - we already have results and we can use them
processClientUsingClientTypeData(clientTypesInitiated.get(clientTypeIndex)); 
```

有机会获得您在看跌支票中临时插入的“”值。

因此，可以使此代码成为线程安全的：

```
public class Test {

    private static Map<Integer, Object> clientTypesInitiated = new ConcurrentHashMap<Integer, Object>();

    /* to process client request we need to 
       create corresponding client type data.
       on the first signal we create that data, 
       on the second - we process the request*/

void onClientRequestReceived(int clientTypeIndex) {
    Object clientTypeData = clientTypesInitiated.get(clientTypeIndex);
    if (clientTypeData == null) {
        synchronized (clientTypesInitiated) {
          clientTypeData = clientTypesInitiated.get(clientTypeIndex);
          if (clientTypeData == null) {
              //new client type index arrived, this type was never processed
              //process data for that client type and put it into the map of types
              clientTypeData = createClientTypeData(clientTypeIndex);
              clientTypesInitiated.put(clientTypeIndex, clientTypeData);
          }
        }
    }
    processClientUsingClientTypeData(clientTypeData);
}

Object createClientTypeData(int clientIndex) {return new Object();}

void processClientUsingClientTypeData(Object clientTypeData) {} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T19:20:40.513

你应该在这里使用 putIfAbsent，这个操作的语义类似于 CAS，它肯定是原子的。并且由于它是原子的 - 那么您对内部分配和比较没有问题。

当前代码不是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T10:00:03.740

ConcurrentHashMap 被创建为不使用同步块，虽然使用它作为同步块的锁是可以的，但效率不高。如果一定要使用`ConcurrentHashMap`，正确的用法如下；

```
private static Map<Integer, Object> clientTypesInitiated = new ConcurrentHashMap<Integer, Object>();

void onClientRequestReceived(int clientTypeIndex) {
    Object clientTypeData = clientTypesInitiated.get(clientTypeIndex);
    if (clientTypeData == null) {
        Object newClientTypeData = createClientTypeData(clientTypeIndex);
        clientTypeData = clientTypesInitiated.putIfAbsent(clientTypeIndex, newClientTypeData);
        // if clientTypeData is null, then put successful, otherwise, use the old one
        if (clientTypeData == null) {
            clientTypeData = newClientTypeData;
        }
    }
    processClientUsingClientTypeData(clientTypeData);
} 
```

老实说，上面的代码可能会创建`clientTypeData`多次（因为竞态条件），尽管它没有使用`synchronized`块。因此，您应该衡量创建`clientTypeData`它的成本，如果它太昂贵以至于它掩盖了不使用`synchronized`块，那么您甚至不需要使用`ConcurrentHashMap`. 使用正常`HashMap`和`synchronized`阻塞。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T19:29:46.220

我认为代码根本无法按预期工作。看：

```
void onClientRequestReceived(int clientTypeIndex) {
     // the line below ensures the existing data is lost even if was not null
    if (clientTypesInitiated.put(clientTypeIndex, "") == null) {
        Object clientTypeData = createClientTypeData(clientTypeIndex);
        clientTypesInitiated.put(clientTypeIndex, clientTypeData);
    } else {
        processClientUsingClientTypeData(clientTypesInitiated.get(clientTypeIndex));
    }
} 
```

我猜你宁愿想要一个 get 方法调用。

我建议这样一种方法：

```
void onClientRequestReceived(int clientTypeIndex) {
    Object clientTypeData;
    synchronized (clientTypesInitiated) {
        if ((clientTypeData = clientTypesInitiated.get(clientTypeIndex)) == null) {
            clientTypeData = createClientTypeData(clientTypeIndex);
            clientTypesInitiated.put(clientTypeIndex, clientTypeData);
        } 
    }
    processClientUsingClientTypeData(clientTypeData);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T19:29:24.960

当前代码不是线程安全的，因为在 if 和 next put 之间可能发生上下文切换。您需要将其设置`clientTypesInitiated`为 ConcurrentHashMap 类型，而不是接口 Map。然后使用[putIfAbsent](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent%28K,%20V%29)方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T20:43:02.673

putIfAbsent 效果很好，但有时需要多次初始化。带有双重检查锁定的同步块可能可以解决这个问题。

但这是基于 AtomicIntegerArrays 的另一种选择：

```
public class Test {

    private static Map<Integer, Object> clientTypesInitiated = new ConcurrentHashMap<Integer, Object>();

    private static final int CLIENT_TYPES_NUMBER = 10;
    private static AtomicIntegerArray clientTypesInitStarted = new AtomicIntegerArray(CLIENT_TYPES_NUMBER);
    private static AtomicIntegerArray clientTypesInitFinished = new AtomicIntegerArray(CLIENT_TYPES_NUMBER);

    void onClientRequestReceived(int clientTypeIndex) {

        int isInitStarted = clientTypesInitStarted.getAndIncrement(clientTypeIndex);
        int isInitFinished = clientTypesInitFinished.get(clientTypeIndex);

        if (isInitStarted == 0) {
            //new client type index arrived, this type was never processed
            //process data for that client type and put it into the map of types
            Object clientTypeData = createClientTypeData(clientTypeIndex);
            clientTypesInitiated.put(clientTypeIndex, clientTypeData);
            clientTypesInitFinished.getAndIncrement(clientTypeIndex);
        } else if (isInitFinished > 0) {
            //already existing index - we already have results and we can use them
            processClientUsingClientTypeData(clientTypesInitiated.get(clientTypeIndex));
        }
    }

    Object createClientTypeData(int clientIndex) {
        return new Object();
    }

    void processClientUsingClientTypeData(Object clientTypeData) {
    }
} 
```

有什么意见吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T19:20:35.817

不，不是，如果您需要整个方法是线程安全的，请将其声明为同步，或者使用同步块来放置您的关键代码。

# objective-c - 文本字段文本内容比较不起作用

> ID：12483491
> 
> 赞同：0
> 
> 时间：2012-09-18T19:15:25.350
> 
> 标签：objective-c, xcode, ios5

我有这段代码：

```
 if (email.text == emailComfirm.text) {
        UIAlertView *emailAllertView = [[UIAlertView alloc] initWithTitle:@"Succes" message:@"Yaaay, je kan nu gebuik gaan maken van Vogelspotter." delegate:self cancelButtonTitle:@"Direct aanmelden" otherButtonTitles: nil];
        [emailAllertView show];
        // Doing some other code here
        [self dismissModalViewControllerAnimated:YES];
    }else{
        NSLog(@"email: %@", email.text);
        NSLog(@"email: %@", emailComfirm.text);

        UIAlertView *emailAllertView = [[UIAlertView alloc] initWithTitle:@"Foutmelding" message:@"De opgegeven email adressen komen niet met alkaar overeen" delegate:self cancelButtonTitle:@"Probeer het nog eens" otherButtonTitles: nil];
        [emailAllertView show];
    } 
```

不知何故，我没有输入文本字段，如果我输入 ee/ee 或 ee/ff，is 语句总是转到 else。有人可以告诉我我做错了什么吗？

tnx 提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:25:16.563

您想用来`[email.text isEqualToString:emailComfirm.text]`比较 2 个 NSString* 对象的内容。使用 == 将比较 2 个对象的地址，而不是对象的内容。这就是指针的工作原理[指向指针的指针如何在 C 中工作？](https://stackoverflow.com/questions/897366/how-do-pointer-to-pointers-work-in-c)

# php - 使用 php 获取 ajax 发送的 FormData() 值

> ID：12483494
> 
> 赞同：1
> 
> 时间：2012-09-18T19:15:28.757
> 
> 标签：php, javascript, ajax

我创建了运行良好的 FormData()，因为我使用 jQuery.ajax 对其进行了测试。但是因为我想要上传进度条，所以当我使用 jQuery.ajax 时我无法创建它。所以我决定直接使用ajax并发布表单数据。但是使用 php 获取表单数据是行不通的。

**javascript**

```
xhr.open("POST","assets/php/upload.php?action=uploadFiles");
xhr.setRequestHeader('Cache-Control', 'no-cache');
xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
xhr.setRequestHeader('Content-Type', 'multipart/form-data');
xhr.send(newFormData); 
```

**php**

```
print_r($_FILES); //output, empty array 
```

这是我的问题，为什么我不能使用 php 获取表单数据？

**编辑：：**

这是我尝试使用 jquery 制作进度条，但效果不佳。进度条将很快完成，文件尚未上传。

```
function updateProgress(evt)
{
    // evt is an ProgressEvent.
    if (evt.lengthComputable)
    {
        var percentLoaded = Math.round((evt.loaded / evt.total) * 100);
        // Increase the progress bar length.
        $(".progress > div").css(
        {
            width: percentLoaded + '%'
        });

    }
}

$.ajax(
{
    url: 'assets/php/upload.php?action=uploadFiles',
    type: 'POST',
    data: newFormData,
    cache: false,
    xhr: function ()
    {
        myXhr = $.ajaxSettings.xhr();
        if (myXhr.upload)
        {
            myXhr.upload.addEventListener('progress', updateProgress, false);
        }
        return myXhr;
    },
    contentType: false,
    processData: false,
}); 
```

**编辑：：**

我终于找到了为什么我无法使用 $_FILES 获取 ajax 请求。发生这种情况是因为我设置了内容类型，现在如果我从请求中删除它，我可以获得 ajax 请求。但是现在进度条很快就会完成，而上传文件还没有完成。我的代码哪里出了问题？

谢谢你，阿里雷萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:58:40.423

检查[HTML5-powered Ajax 文件上传](http://blog.new-bamboo.co.uk/2010/7/30/html5-powered-ajax-file-uploads)和这个项目：[HTML5 AJAX File Uploader](https://github.com/mockenoff/HTML5-AJAX-File-Uploader)。

> 该文件提供了一个 JavaScript 对象，以简化 HTML5 文件 API 用于 AJAX 上传的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:50:55.437

您可以使用 plupload 来执行此操作。

涵盖如何使用 procent 更新元素的示例在这里[http://www.plupload.com/example_custom.php](http://www.plupload.com/example_custom.php)

如果您下载该模块，它还包含与块一起使用的 php 代码（这是您完成所需文件上传行为所需要的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:24:08.327

实际上我没有看到任何产生 $_FILES 的东西。还有更重要的事情，你不能直接在 PHP 中使用 AJAX……如果你使用 javascript，那是`print_r($_FILES)`什么？浏览器发送 AJAX 请求而不是 php。因此，当浏览器加载页面时，您无法使用 $_FILES 直接读取输出。您的其他页面应读取 $_FILES... 并使用 AJAX 上传使用[jsupload](http://valums.com/ajax-upload) ...

# mysql - 如何使用分隔符从 MySQL 中的文本文件中读取

> ID：12483496
> 
> 赞同：1
> 
> 时间：2012-09-18T19:15:53.343
> 
> 标签：mysql

我知道您可以使用 MySQL 中的 LOAD DATA 命令将文件中的数据加载到数据库表中，但这是使用默认的空格分隔符。

我正在从包含单词和标点符号的文件中加载文本。我需要在数据库中加载单词但忽略任何标点符号。在像 C# 这样的语言中，我只会指定一个只抓取字母数字字符并忽略其他符号的正则表达式。

有没有办法在 MySQL 命令中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:32:53.360

我认为您需要在文件中将字符串括在引号中并指定

```
ENCLOSED BY '"' 
```

可选参数。例如，您的数据将是

```
"xxx","Some text, and some more!", ... 
```

我不知道在 MySQL 中执行此操作的另一种方法。

请参阅本文档的封闭部分：http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# javascript - 页面加载后如何显示页面内容？

> ID：12483497
> 
> 赞同：0
> 
> 时间：2012-09-18T19:15:55.260
> 
> 标签：javascript, jquery, ajax, html

我的页面有问题。我有很多内容要在 jQuery 表中显示给用户。然而，当页面加载时，表格显示所有行，页面将像 10000 行长而不是 10 行（和分页）。

所以我想隐藏表格，直到它加载所有数据（可能在那里放一个加载图像），当它加载时我想显示表格及其加载的内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:22:26.010

我通常将样式“display:none”应用于目标容器，然后您可以使用 .load() 函数并使用回调来显示填充了数据的容器。

基本上 ：

```
$('#target').hide();
$('#target').addClass("loading-layer");
$('#target').load('toto.php',function(){
    $('#target').removeClass("loading-layer");
    $('#target').show();
}); 
```

**编辑**

我今天早上刚刚尝试仅在加载后显示数据表，您可以这样做：

```
 <div id="data-container" class="hidden">
        <table id="table-courses" cellpadding="0" cellspacing="0" border="0" class="display  ex_highlight data-table table-font" >
            ...
        </table>
    </div>

<script type="text/javascript">
    $(document).ready(function() {        
        $('#data-container').show();
        //Data table creation     
        oTable = $('#my-table').dataTable({                       
            "bJQueryUI": true
        });  
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:21:33.553

您应该隐藏表格，以便浏览器在开始时（甚至在加载时）不会呈现它：

```
<table id="data" style="display:none;"> 
```

（请注意，这会使您的页面对非 js 用户无法使用，也许以下会更好：

```
<script type="text/javascript"><![CDATA[
    document.write("<style>hidden { display:none; }</style>");
]]></script>
<table id="data" class="hidden"> 
```

然后，一旦表被加载（`onDOMready`），您可以动态删除一些列，然后显示其余列：

```
$(document).ready(function() {
// wait for images and other included objects to load, use
// $(window).load(function() {
    var table = $("#data");
    table.startPageViewer(); // or whatever

    table.show();
    // or, respectively:
    table.removeClass("hidden");
}); 
```

您还可以动态创建整个表格，并以更短的（非 HTML）格式提供数据，从而加快加载速度，尤其是在并行异步完成的情况下。

顺便说一句：你提到了分页——这比同时加载所有数据要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:00:36.953

[http://jsfiddle.net/jklm313/hfUSg/1/](http://jsfiddle.net/jklm313/hfUSg/1/) 使用以下方法在页面加载后从正文中删除带有“显示：无”的类：

```
$("window").load(function() {
  $("body").removeClass("preload");
}); 
```

至于禁用 javascript 的浏览器：

```
<noscript>
    <style>        
        .preloader {display: block;}
    </style>
</noscript> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T20:12:04.233

我猜你陷入了 FOUC（无样式内容的 Flash）

克服此问题的典型方法是将包含表的 div 设置为

可见性：隐藏；虽然dom仍在浏览器中处理，一旦完成

文件准备好你取消隐藏你的 div

```
$('#customtabs').css('visibility','visible'); 
```

你可以看到这个[例子](http://fundapass.blogspot.in/2012/06/v-behaviorurldefaultvmlo_22.html)

# android - GridView.setAdapter 的问题

> ID：12483498
> 
> 赞同：1
> 
> 时间：2012-09-18T19:15:58.423
> 
> 标签：android, android-widget

我正在使用 GridView 元素，并尝试执行该行：

```
gv.setAdapter(adp); 
```

当 gv 是 GridView 的实例，而 adp 是 ListAdapter。但我收到一个 lint 警告说：

> 调用需要 API 级别 11（当前最低为 7）：android.widget.AbsListView#setAdapter

现在，[AbsListView#setAdapter](http://developer.android.com/reference/android/widget/AbsListView.html#setAdapter%28android.widget.ListAdapter%29)需要 API 级别 11 是正确的，但是[GridView#setAdapter](http://developer.android.com/reference/android/widget/GridView.html#setAdapter%28android.widget.ListAdapter%29)从 API 级别 1 开始可用。那么为什么 lint 会警告我，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:26:07.810

通过从 BaseAdapter 扩展而不是使用 ListAdapter 创建您自己的适配器。那应该可以正常工作。

# android - ListView 上的 setEmptyView 未在 android 应用程序中显示其视图？

> ID：12483508
> 
> 赞同：45
> 
> 时间：2012-09-18T19:16:35.150
> 
> 标签：android, listview

我对 ListView 中的 setEmptyView 方法有疑问。

这是我的Java代码：

```
ListView view = (ListView)findViewById(R.id.listView1);
view.setEmptyView(findViewById(R.layout.empty_list_item));

ArrayAdapter<Session> adapter1 = new ArrayAdapter<Session>(this, android.R.layout.simple_list_item_1, 
        android.R.id.text1, MainController.getInstanz().getItems());
view.setAdapter(adapter1); 
```

空列表项：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="@string/emptyList" >

</TextView> 
```

列表显示：

```
<ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" > 
```

我的代码有什么问题？当我有项目时，我会在列表中看到它们。但是当列表为空时，我看不到`TextView`.

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-09-18T19:47:39.517

你的 TextView 应该放在 ListView 项目的正下方，其可见性设置为消失（android:visibility="gone"），不要将它放在另一个布局中。这就是您的主要布局的样子

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listViewFangbuch"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>
    <TextView
        android:id="@+id/empty_list_item"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone"
        android:text="@string/emptyList" >
    </TextView>

</LinearLayout> 
```

这就是您的代码的样子

```
ListView view = (ListView)findViewById(R.id.listViewFangbuch);
view.setEmptyView(findViewById(R.id.empty_list_item));

ArrayAdapter<Session> adapter1 = new ArrayAdapter<Session>(this, android.R.layout.simple_list_item_1, 
        android.R.id.text1, MainController.getInstanz().getItems());
view.setAdapter(adapter1); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-18T19:43:20.797

问题是，我必须做一个 addContentView：

```
View empty = getLayoutInflater().inflate(R.layout.empty_list_item, null, false);
addContentView(empty, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
view.setEmptyView(empty); 
```

现在很好

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-07-23T10:16:35.537

对我来说，这些答案都不适合我。我必须做的是手动（膨胀）将空视图添加到 Listview 的“父”视图中：

```
ListView my_list = (ListView) findViewById(R.id.my_list);
View emptyView = getLayoutInflater().inflate(R.layout.empty_view,null);
((ViewGroup)my_list.getParent()).addView(emptyView); 
listView.setEmptyView(emptyView); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-18T19:24:39.870

最简单的使用方法`setEmptyView()`是将“空” TextView 和 ListView 放在相同的布局中，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/empty_list_item"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/emptyList"
        android:visibility="gone" />

</LinearLayout> 
```

现在您可以使用：

```
view.setEmptyView(findViewById(R.id.empty_list_item)); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-11-09T20:02:51.827

在尝试了此处提供的所有解决方案并进行了试验之后，我相信下面的代码是当您的 ListView 和空 View 在设置了自动 ID 的布局中没有并排时使用的最佳方法。

```
ViewGroup parentGroup = (ViewGroup)getListView().getParent();
View empty = getActivity().getLayoutInflater().inflate(R.layout.list_empty_view,
                                                       parentGroup,
                                                       false);
parentGroup.addView(empty);
getListView().setEmptyView(empty); 
```

推理：

*   通过将父组传递给 inflate，您的空视图布局的 layout_* 属性得到尊重
*   通过不在 inflate 中附加视图（false 参数），将返回空视图。否则，inflate 将返回父级，要求我们使用 parentGroup.findViewById(empty_view_id) 来获取与 setEmptyView() 一起使用的空视图。在这里，我们避免了额外的查找、对另一个 id 的需要以及在我们的代码中公开该 id 的需要。如果我们不需要保留对空的引用，告诉 inflate 附加将是消除对 addView 调用的需要的正确操作。
*   反模式 addContentView() 不是正确的方法。只要您的 ListView 占据了 Activity 的所有可见空间，它就会显示为等价的。而不是您的空视图成为您的 ListView 的兄弟，它最终成为您 Activity 中其他根级布局的兄弟。它似乎可以工作，因为它在活动中的所有其他视图之上浮动（z 顺序）。请参阅：[Activity.addContentView(View) == ViewGroup.addContentView(View)？](https://stackoverflow.com/questions/9979648/activity-addcontentviewview-viewgroup-addcontentviewview)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-10-02T19:04:04.987

问题的核心在于 AdapterView 类实际上并没有将你传递给 setEmptyView() 的视图添加到任何容器中。它只是改变了可见性。正如其他答案所描述的，有很多方法可以将您的“空视图”对象放入容器中。

AdapterView 的文档确实应该更新以反映这一点，因为它并不明显。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-04T08:47:35.150

在 XML 中创建一个布局，指定`ListView`要使用的视图和空视图。如果你给它们 ID`@android:id/list`和，当列表为空时`@android:id/empty`，android 会自动使用视图。`id:empty`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-23T21:09:10.153

有一些正确的解决方案，但我认为这是最好的方法！

```
View emptyView = getLayoutInflater().inflate(R.layout.empty_list_cart, null);
addContentView(emptyView, listView.getLayoutParams()); // You're using the same params as listView
listView.setEmptyView(emptyView);
listView.setAdapter(adapter); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-30T09:00:40.990

这两种方法也帮助我显示空视图：

```
 adapter.notifyDataSetChanged();
    list.invalidateViews(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-22T12:00:08.467

只需使用，

```
View emptyView = getLayoutInflater().inflate(R.layout.empty_view, null);
((ViewGroup)listView.getParent()).addView(emptyView); 
```

代替`listView.setEmptyView(emptyView);`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-25T07:21:09.617

我的问题是，我添加了一个似乎不适用于空视图的页脚视图。删除页脚视图后，将显示空视图。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-29T00:48:05.730

我刚刚学习了 android，但来自[https://developer.android.com/guide/topics/ui/layout/listview.html](https://developer.android.com/guide/topics/ui/layout/listview.html)的片段 描述了一些不同的方法：

```
// Create a progress bar to display while the list loads
ProgressBar progressBar = new ProgressBar(this);
progressBar.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
        LayoutParams.WRAP_CONTENT, Gravity.CENTER));
progressBar.setIndeterminate(true);
getListView().setEmptyView(progressBar);
// Must add the progress bar to the root of the layout
ViewGroup root = (ViewGroup) findViewById(android.R.id.content);
root.addView(progressBar); 
```

**ViewGroup root = (ViewGroup) findViewById(android.R.id.content);**

# python - python multiprocessing apply_async 只使用一个进程

> ID：12483512
> 
> 赞同：18
> 
> 时间：2012-09-18T19:16:40.437
> 
> 标签：python, multiprocessing

我有一个脚本，其中包括从列表中打开一个文件，然后对该文件中的文本执行某些操作。我正在使用 python 多处理和 Pool 来尝试并行化此操作。脚本的抽象如下：

```
import os
from multiprocessing import Pool

results = []
def testFunc(files):
    for file in files:
        print "Working in Process #%d" % (os.getpid())
        #This is just an illustration of some logic. This is not what I'm actually doing.
        for line in file:
            if 'dog' in line:
                results.append(line)

if __name__=="__main__":
    p = Pool(processes=2)
    files = ['/path/to/file1.txt', '/path/to/file2.txt']
    results = p.apply_async(testFunc, args = (files,))
    results2 = results.get() 
```

当我运行它时，每次迭代的进程 ID 的打印输出都是相同的。基本上我要做的是获取输入列表的每个元素并将其分叉到一个单独的进程中，但似乎一个进程正在完成所有工作。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-18T19:55:20.313

*   `apply_async`将一项任务分配给池。您需要 `apply_async`多次调用才能使用更多处理器。
*   不要让两个进程都尝试写入同一个列表， `results`. 由于池工作人员是独立的进程，因此两者不会写入同一个列表。解决此问题的一种方法是使用输出队列。您可以自己设置，也可以使用`apply_async`'s 回调为您设置队列。`apply_async`函数完成后将调用回调。
*   您可以使用`map_async`而不是`apply_async`，但随后您会得到一个列表列表，然后您必须将其展平。

所以，也许试试类似的东西：

```
import os
import multiprocessing as mp

results = []   

def testFunc(file):
    result = []
    print "Working in Process #%d" % (os.getpid())
    # This is just an illustration of some logic. This is not what I'm
    # actually doing.
    with open(file, 'r') as f:
        for line in f:
            if 'dog' in line:
                result.append(line)
    return result

def collect_results(result):
    results.extend(result)

if __name__ == "__main__":
    p = mp.Pool(processes=2)
    files = ['/path/to/file1.txt', '/path/to/file2.txt']
    for f in files:
        p.apply_async(testFunc, args=(f, ), callback=collect_results)
    p.close()
    p.join()
    print(results) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T19:56:10.077

也许在这种情况下你应该使用`map_async`：

```
import os
from multiprocessing import Pool

results = []
def testFunc(file):
    message =  ("Working in Process #%d" % (os.getpid()))
    #This is just an illustration of some logic. This is not what I'm actually doing.
    for line in file:
        if 'dog' in line:
            results.append(line)
    return message

if __name__=="__main__":
    print("saddsf")
    p = Pool(processes=2)
    files = ['/path/to/file1.txt', '/path/to/file2.txt']
    results = p.map_async(testFunc, files)
    print(results.get()) 
```

# php - 为什么在mysql中插入已经是UTF8的字符串之前必须使用utf8_decode？

> ID：12483513
> 
> 赞同：0
> 
> 时间：2012-09-18T19:16:43.277
> 
> 标签：php, json, utf-8

我遇到了一个问题，我设法通过简单地尝试不同的选项来解决这个问题，但我不明白为什么它会起作用，这对我来说没有意义......

就是这样，我从 Facebook 接收 UTF8 编码的 JSON，我的表在 utf8_general_ci 中，我的数据库连接也是 UTF8 编码的。

如果我不做任何特别的事情，则将字符串插入为

> 法比安

但是如果我在插入之前将其 utf8_decode 它插入为

> 法比安

当我在我的字符串上调用 mb_detect_encoding 时，它返回 UTF8。

谁能解释为什么我必须使用 utf8_decode 才能工作？或者更好的是，如何修复我的代码，这样我就不必调用 utf8_decode？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-11T14:11:21.997

如果您的数据库/表/字段是**utf8_general_ci**并且字符串是**UTF-8**，则在插入之前不应转换字符串。

您应该从数据库中进行选择，在以 HTML 打印之前，您应该使用以下代码将 UTF-8 转换为 Latin1 (iso-8859-1)：

```
 mb_convert_encoding($selected_string, 'utf-8', 'iso-8859-1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:28:38.563

发现问题，在使用 PDO 建立与 DB 的连接后，您必须执行命令“SET NAMES utf8”。我正在使用旧版本的 PHP (5.3.6)，并且 charset=utf8 在连接字符串中被忽略...

看到这个问题：[PHP PDO: charset, set names?](https://stackoverflow.com/questions/4361459/php-pdo-charset-set-names)

# powershell - 响应 (500) 内部服务器错误

> ID：12483515
> 
> 赞同：2
> 
> 时间：2012-09-18T19:16:44.617
> 
> 标签：powershell

我如何应对 500 内部服务器错误？可以说我有以下代码：

```
$webpage = $webclient.DownloadString("http://moocow/Addfoo.asmx/roflmao?inputFoofoo=$variable") 
```

就我而言，我有一个返回一些信息的页面；但是，有时页面会关闭并返回 500 内部服务器错误。如果是这种情况，我如何告诉脚本执行另一个操作？以下是我得到的错误：

```
Exception calling "DownloadString" with "1" argument(s): "The remote server returned an error: (500) Internal Server Error."
At \\ASERVER\AFOLDER\ASCRIPT.ps1:112 char:57
+                 $global:webpage = $webclient.DownloadString <<<< ("http://moocow/Addfoo.asmx/roflmao?inputFoofoo=$variable")
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:28:07.013

谈到 php，你可能会想类似.. 如果主机关闭，$webpage 可能会返回 false。

你可以像这样执行你的操作：

```
if($webpage)
{
   perform operations
}
else
{
   exceptional case
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:29:16.740

您可以使用 try/catch 块：

```
$webPage = $null

try
{
  $webPage = $webClient.DownloadString(...)
}
catch
{
  "Error getting webpage!"
}

if($webPage)
{
   "Getting the webpage worked!"
} 
```

# matlab - 在 MATLAB/Octave 中矢量化三角形扫描线

> ID：12483516
> 
> 赞同：2
> 
> 时间：2012-09-18T19:16:44.883
> 
> 标签：matlab, graphics, octave, vectorization, rasterizing

我是 Octave/MATLAB 的新手。我想为一个三角形矢量化一个简单的扫描线填充。这是我要消除的 while 循环：

```
 #Iterate over all the scan lines from bottom to top
 while(yCurr <= 200)

    #VARIABLES: 
    #  img - Zero matrix used as an image. Zero is black. Assume 320x200 pixels.
    #  leftIdx - Vector that contains the left-most pixel to fill in each
    #      scanline. Dim is 1x200\. Each element represents x-coord of a pixel.
    #  rightIdx - Vector that contains the right-most pixel to fill in each
    #      scanline. Dim is also 1x200\. Each element represents x-coord of a pixel.
    #  yCurr - The current row being scanned.    

    #Fill all the pixels in one scan line 
    img(leftIdx(yCurr) : rightIdx(yCurr), yCurr) = color;

    #Increment the row
    yCurr++;

 endwhile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:45:05.693

简单的解决方案 - 您可以将循环直接更改为一个 arrayfun 调用。arrayfun 是一种编写循环的奇特方式——它为所有提供的参数调用用户定义的函数。需要注意的是，通常与 arrayfun 一起使用的匿名函数不能分配变量。但是，您可以编写一个普通函数，将颜色分配给 img 并将其作为参数传递给 arrayfun：

```
 function doAllWork(img, rightIdx, leftIdx)

 arrayfun(@fill, 1:size(img, 1));

    function fill(i)
      img(leftIdx(i):rightIdx(i), i) = color;
    end
 end 
```

我已经在 doAllWork 中将 fill 函数定义为本地函数，以便它可以访问 img、leftIdx、rightIdx。

**复杂的解决方案**通常在这种情况下，要一次性进行分配，您希望使用 sub2ind 来获得矩阵的线性索引（简而言之，在 C 中您会写 sth. like j*nx+i）。然后你写 img(ind) 而不是 img(indrow, indcol)。问题是每一行在不同的地方都有不同数量的非零。

（复杂的）想法是创建一个明确的列索引数组 Ii{row} = [leftIdx(row):rightIdx(row)] 和相应的行索引数组 Ij{row} = [row*ones(1, lenght(Ii{行}))] 为所有行。没有可以使用 arrayfun 完成的循环。一旦你有了这个，你可以在对应的 Ii/Ij 条目上使用 sub2ind 构造一个线性索引到你的 img 中，也称为使用 arrayfun。代码看起来像这样

```
nrows=1:size(img, 1);
Ii=arrayfun(@(i)(leftIdx(i):rightIdx(i)), nrows, 'UniformOutput', false);
Ij=arrayfun(@(i)(i*ones(1,length(Ii{i}))), nrows, 'UniformOutput', false);
lin=arrayfun(@(i)(sub2ind(size(A), Ij{i}, Ii{i})), nrows, 'UniformOutput', false);
img([lin{:}])=color; 
```

这种方法在您的情况下没有多大用处 - 它太复杂了。但它对 arrayfun 可以做什么具有指导意义，并且 sub2ind 的技巧通常非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:39:28.013

*虽然不是 OP 的主要问题（即如何矢量化光栅扫描）*，但 MATLAB 中用于填充三角形值的干净外观解决方案可以来自使用`poly2mask`指定三角形内部的区域、使用三角形顶点和使用逻辑索引赋值。

```
% Example values
yCurr = 1:200;
img = zeros(320, 200);
leftIdx = ones(1,200);
rightIdx = 1:200;
color = 1;

% Define polygon vertices and get mask
x = [leftIdx(1) leftIdx(200) rightIdx(1) rightIdx(200)];
y = [1 1 200 200];
bw = poly2mask(x,y,320,200);
% Assign color values
img(bw) = color; 
```

由于`poly2mask`很可能使用了一些底层`for,`，因此它不是光栅化扫描的矢量化版本。但是，它提供了处理更复杂的多边形区域的好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T20:49:25.470

我认为您最初的基于循环的解决方案是最好的解决方案。为什么？

1.  因为在您没有完成分析之前，您无法知道矢量化解决方案是否实际上更快。
2.  因为您使用 for 循环的代码对读者来说很清楚！它只包含 4 行代码，一看就知道它的用途。

我唯一要改变的是`while`->`for`

```
for yCurr = 1:200
    img(leftIdx(yCurr) : rightIdx(yCurr), yCurr) = color;
 end 
```

# php - 如何使用表单数据更新数据库

> ID：12483518
> 
> 赞同：1
> 
> 时间：2012-09-18T19:16:57.087
> 
> 标签：php, mysql, codeigniter

我是 Code Igniter 的新手，我正在尝试从表单更新用户数据。插入、显示和删除数据工作正常，但我无法让更新功能工作。

数据保存在两个表中：`users`和`users_info`。

**我的模型：**

```
function getuser($id) {
  $this->db->join('users_info','users.user_id = users_info.user');

  $query = $this->db->get_where('users', array('user_id'=> $id));

  return $query->result_array();
 }

function edituser($id) {

  $update_user = array(
    'username' => $this->input->post('username'),
    'password' => md5($this->input->post('password')),     
    'email' => $this->input->post('email'),
    'level' => $this->input->post('role')                                       
  );

  $this->db->where('user_id', $id);
  $this->db->join('users_info','users.user_id = users_info.user' );
  $this->db->update('users', $update_user);

  $affected_rows1 = $this->db->affected_rows() ? TRUE : FALSE;

  $update_info = array(
    'name' => $this->input->post('first_name'),
    'surname' => $this->input->post('surname'),
    'address' => $this->input->post('address'),         
    'city' => $this->input->post('city'),
    'phone' => $this->input->post('phone'),
    'mobile' => $this->input->post('mobile'),
    'am' => $this->input->post('am'),           
    'vat' => $this->input->post('vat')                              
  );

  $this->db->where('user', $id);
  $this->db->update('users_info', $update_info); 
  $affected_rows2 = $this->db->affected_rows() ? TRUE : FALSE;

  return ($affected_rows1 && $affected_rows2) ? TRUE : FALSE;

} 
```

**我的控制器：**

```
function edituser() {
  if ($this->session->userdata('is_logged_in')) {
    $this->load->helper('form');  
    $this->load->helper('html');   
    $this->load->model('users_model');
    $id=$this->uri->segment(3);
    $this->users_model->edituser($id);  

  if ((int)$id > 0) {

    $query = $this->users_model->getuser($id);   

    $data['fid']['value']         = $id;
    $data['fusername']['value']   = $query['username'];
    $data['fpassword']['value']   = $query['password'];
    $data['femail']['value']      = $query['email'];
    $data['frole']['value']       = $query['role'];
    $data['ffirst_name']['value'] = $query['first_name'];
    $data['fsurname']['value']    = $query['surname'];
    $data['faddress']['value']    = $query['address'];
    $data['fcity']['value']       = $query['city'];
    $data['fphone']['value']      = $query['phone'];
    $data['fmobile']['value']     = $query['mobile'];
    $data['fam']['value']         = $query['am'];
    $data['fvat']['value']        = $query['vat'];
  }

  $data['main_content'] = 'pages/edit_user';
  $this->load->view('templates/template', $data);  

  } else {
    redirect('login/index');
  }
} 
```

**我的观点**

```
<div class="form-grid">

  <?php
    $attributes= array('class' => 'leftLabel', 'id' => 'form1');
    echo form_open('users/edituser',  $attributes);
  ?>
  <? echo form_hidden('id',$fid['value']); ?>

  <ul>
    <li>
      <label class="fldTitle">Name<abbr title="Required Field" class="require">*</abbr></label>

      <div class ="fieldwrap">
        <span class="fldcol left">
        <input name="ffirst_name" type="text" tabindex="13" value="<?php echo set_value('ffirst_name',$ffirst_name); ?>"class="full">
        <label class="fldLabel">First Name</label>
        <?php echo form_error('first_name');   ?>   
        </span><span class="fldcol right">
        <input name="fsurname" type="text" tabindex="14" value="<?php echo set_value('fsurname'); ?>" class="full">
        <label class="fldLabel">Surname</label>
        <?php echo form_error('surname');   ?>   
        </span>
      </div>
    </li>
    <li>
      <label class="fldTitle">Login info<abbr title="Required Field" class="require">*</abbr></label>
      <div class ="fieldwrap">

        <span class="fldcol left">
          <input name="username" type="text" tabindex="13"  class="full">
          <label class="fldLabel">Username</label>
          <?php echo form_error('username');   ?>   
        </span>

        <span class="fldcol right">

        <select name="role" tabindex="12" id="combobox" value="<?php echo set_value('role'); ?>">
          <option value="first"<?php echo set_select('role', 'first', TRUE); ?>>First</option>
          <option value="second"<?php echo set_select('role', 'second'); ?>>Second</option>
          <option value="third"<?php echo set_select('role', 'third'); ?>>Third</option>
        </select>

        <label class="fldLabel">Choose user role</label>

        <?php echo form_error('role');   ?> 

        </span><span class="fldcol left">

        <input name="password" type="password" tabindex="13" class="full">
        <label class="fldLabel">Password</label>
        <?php echo form_error('password');   ?> 

        </span> 

        <span class="fldcol right">
          <input name="password2" type="password" tabindex="13" class="full">
          <label class="fldLabel">Comfirm Password</label>
          <?php echo form_error('password2');   ?>   
        </span>
      </div>
    </li>
    <li class="cmplxFld error">
      <label class="fldTitle">User info<abbr title="Required Field" class="require">*</abbr></label>
      <div class ="fieldwrap">
        <span class="full">
        <input name="address" type="text" tabindex="15" value="<?php echo set_value('address'); ?>" class="full">
        <label class="fldLabel">Street Address</label>
        <?php echo form_error('address');   ?>   
        </span>
        <span class="fldcol left">
        <input name="city" type="text" tabindex="17" value="<?php echo set_value('city'); ?>" class="full">
         <label class="fldLabel">City</label>
        <?php echo form_error('city');   ?> 
        </span>
         <span class="fldcol right">
        <input name="email" type="text" tabindex="18" value="<?php echo set_value('email'); ?>" class="full">
        <label class="fldLabel">email</label>
        <?php echo form_error('email');   ?>   
        </span>
        </span>
        <span class="fldcol left">
        <input name="phone" type="text" tabindex="17" value="<?php echo set_value('phone'); ?>"  class="full">
        <label class="fldLabel">Phone</label>
        <?php echo form_error('phone');   ?>   
        </span>
        <span class="fldcol right">
        <input name="mobile" type="text" tabindex="18" value="<?php echo set_value('mobile'); ?>" class="full">
        <label class="fldLabel">Mobile</label>
        <?php echo form_error('mobile');   ?>   
        </span>
        </span>
        <span class="fldcol left">
        <input name="am" type="text" tabindex="17" value="<?php echo set_value('am'); ?>" class="full">
        <label class="fldLabel">AM</label>
        <?php echo form_error('am');   ?>   
        </span>
        <span class="fldcol right">
        <input name="vat" type="text" tabindex="19" value="<?php echo set_value('vat'); ?>" class="full">
        <label class="fldLabel">VAT</label>
        <?php echo form_error('vat');   ?>   
        </span>
      </div>
    </li>
    <li class="buttons bottom-round noboder">
      <div class ="fieldwrap">
        <input name="submit" type="submit" value="Submit" class="submit-button">
      </div>
    </li>
  </ul>

</form>
</div> 
```

谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:42:17.467

你需要做的是传递第三个参数

```
$this->db->update('users', $update_user); 
```

所以它看起来像这样

```
$this->db->update('users', $update_user,array('field_name'=>$id)); 
```

第三个参数采用字符串数组作为查询的 where 部分。它生成这个查询：

```
UPDATE users SET (...) WHERE field_name = content_of_$id_variable 
```

**编辑：**我重新阅读了您的问题，并注意到您在第一次更新时添加了一个 join 子句。这段代码应该可以工作。

**模型 ：**

```
function edituser($id) {

    $this->db->trans_start();

    $update_user = array(
        'username' => $this->input->post('username'),
        'password' => md5($this->input->post('password')),     
        'email' => $this->input->post('email'),
        'level' => $this->input->post('role')                                       
    );

    $this->db->update('users', $update_user,array('user_id'=>$id));

    $update_info = array(
        'name' => $this->input->post('first_name'),
        'surname' => $this->input->post('surname'),
        'address' => $this->input->post('address'),         
        'city' => $this->input->post('city'),
        'phone' => $this->input->post('phone'),
        'mobile' => $this->input->post('mobile'),
        'am' => $this->input->post('am'),           
        'vat' => $this->input->post('vat')                              
    ); 

    $this->db->update('users_info', $update_info,array('user',$id)); 

    $status = $this->db->trans_status();

    $this->db->trans_complete();

    return $status;
} 
```

告诉我进展如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:26:47.700

您的 CI 语法看起来是正确的。

我会检查

1.  结果查询是否正确。您可以使用 last_query() 函数来查看它。[http://codeigniter.com/user_guide/database/helpers.html](http://codeigniter.com/user_guide/database/helpers.html)
2.  所需参数是否正确通过您的表单发布

# google-drive-api - 在 Google Drive PDF 文件中搜索文本

> ID：12483519
> 
> 赞同：3
> 
> 时间：2012-09-18T19:17:00.657
> 
> 标签：google-drive-api

是否可以在自己的应用程序中通过 Google API 搜索位于 Google 驱动器上的 pdf 文件中的文本？如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T14:13:14.800

您可以通过将`q`参数添加到请求 URL 并使用该`fullText`字段来搜索文件中的文本，如以下示例搜索查询所示：

```
fullText contains 'hello' 
```

有关 Google Drive 查询语言的更多详细信息，请查看[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

# c# - WPF 应用程序上的 MaxLength 不适用于韩语

> ID：12483527
> 
> 赞同：0
> 
> 时间：2012-09-18T19:17:40.233
> 
> 标签：c#, wpf, internationalization, textbox, maxlength

当我使用带有韩语的屏幕键盘时，我在尝试让 WPF 中 TextBox 的 MaxLength 属性工作时遇到问题。

它只是没有限制，也不会给我除 TextChanged 以外的任何事件，所以我没有找到避免将字符写在屏幕上的方法。

此外，如果我尝试在插入后立即删除字符并将插入符号位置更改到末尾，则应用程序在调试期间会崩溃而没有任何异常。

如果您对如何修复它有任何想法，我将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:55:16.350

第一，

```
textbox.PreviewTextInput += textbox_PreviewTextInput;

void textbox_PreviewTextInput(object sender, TextCompositionEventArgs e)
{
   TextBox box = (TextBox) sender;
   e.Handled = box.Text.Length > 5;
} 
```

2、向 MS Connect 发布错误

3rd，启用所有异常Debug-Exceptions，然后在选项中可能没有JustMyCode，看看会发生什么。

# android - 在 Android 中创建线程

> ID：12483534
> 
> 赞同：0
> 
> 时间：2012-09-18T19:18:19.610
> 
> 标签：android, eclipse, multithreading

如何在主文件中创建一个新线程并启动 SrcGrabber.grabSource() ？我应该使用什么类型的线程？如果没有另一个线程，此代码将不起作用。
在主文件中，我只需要执行 SrcGrabber.grabSource() 并继续返回 mBuffer.toString()。

```
public class SrcGrabber {
private HttpGet mRequest;
private HttpClient mClient;
private BufferedReader mReader;

private DocumentBuilder mBuilder;

private StringBuffer mBuffer;
private String mNewLine;

public SrcGrabber() {
    mRequest = new HttpGet();
    mClient = new DefaultHttpClient();
    mReader = null;

    try {
        DocumentBuilderFactory factory = DocumentBuilderFactory
                .newInstance();
        factory.setIgnoringComments(true);
        mBuilder = factory.newDocumentBuilder();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    }

    mBuffer = new StringBuffer(2000);
    mNewLine = System.getProperty("line.separator");
}

public String grabSource(String url) throws ClientProtocolException,
        IOException, URISyntaxException {
    mBuffer.setLength(0);

    try {
        mRequest.setURI(new URI("http://www.bash.im"));
        HttpResponse response = mClient.execute(mRequest);
        mReader = new BufferedReader(new InputStreamReader(response
                .getEntity().getContent()));

        String line = "";
        while ((line = mReader.readLine()) != null) {
            mBuffer.append(line);
            mBuffer.append(mNewLine);
        }
    } finally {
        closeReader();
    }

    return mBuffer.toString();
}

private void closeReader() {
    if (mReader == null)
        return;

    try {
        mReader.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:30:12.043

最好阅读这篇博客文章：[Android Painless Threading](http://android-developers.blogspot.co.at/2009/05/painless-threading.html)。

它解释了 Android 中可能的不同方式。

# c++ - 没有openCV的c ++中的网络摄像头访问

> ID：12483541
> 
> 赞同：6
> 
> 时间：2012-09-18T19:19:24.990
> 
> 标签：c++

我可以在不使用 opencv（并且没有其他外部库）的情况下制作一些 c++ 网络摄像头程序吗？我的想法是从网络摄像头获取数据并将其显示在窗口上，就像实时视频一样。你能给我举个例子吗？对不起，我的英语不好。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T23:02:57.043

长话短说：对于 Windows 和 C/C++，最直接的方法是使用 DirectShow。

这里有一个很好的 DirectShow framegrabber 包装器：http: [//www.muonics.net/school/spring05/videoInput/](http://www.muonics.net/school/spring05/videoInput/)

是的，您仍然需要安装 DXSDK，但实际上我设法将所需的 DShow 接口提取到单个 100kb 文件中。所以我的建议是：使用 videoInput 库。

在 linux 上，Video4Linux(2) 库稍微简单一些。一切都是通过类似文件的 API 完成的。

在 MacOS X 上，您有[QTKit](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/QTKitApplicationProgrammingGuide/UsingQTKit/UsingQTKit.html)。使用实时摄像机流制作一个简单的窗口是轻而易举的事。该示例在 Apple 的文档中是正确的。

# assembly - MIPS 中的浮点寄存器数

> ID：12483548
> 
> 赞同：0
> 
> 时间：2012-09-18T19:19:58.953
> 
> 标签：assembly, mips

$f0、$f1 等是 MIPS 中的浮点寄存器。其中有 32 个。只有 32 个寄存器的机器怎么样？$s0 和 $t0 等其他寄存器在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:32:19.993

MIPS 架构具有不同的寄存器集：

*   通用寄存器（编号 0 到 31）
*   浮点寄存器（16个双精度寄存器）
*   一些特殊寄存器（程序计数器 PC（在架构上不可见）、LO 和 HI 寄存器用于保存乘法和除法的结果）

通用寄存器也有同义词：

*   $1 被命名为 $at
*   $2-$3 被命名为 $v0 和 $v1
*   $4-$7 被命名为 $a0-$a3
*   $8-$15 被命名为 $t0-$t7
*   $16-$23 被命名为 $s0-$s7
*   $24-$25 被命名为 $t0 和 $t1
*   $26-$27 被命名为 $k0, $k1
*   $28 是 $gp（全局指针）
*   $29 是 $sp（堆栈指针）
*   $30 是 $fp（帧指针，不要与浮点寄存器混淆）
*   $31 是 $ra（返回地址）

另请注意，$0 硬连线到常量零

您必须在每条指令中查看可以使用哪个寄存器集（例如，浮点运算将使用浮点寄存器集）。

# linux - 如何从字符类的范围中排除字符？

> ID：12483553
> 
> 赞同：2
> 
> 时间：2012-09-18T19:20:17.800
> 
> 标签：linux, bash, unix, wildcard

如何将以下几行组合为一个字符：

```
> ls file[1-5]
> ls file[!3] 
```

产生与以下相同的结果：

```
> ls file[1-2,4-5] 
> file1 file2 file4 file5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:22:54.100

范围的正确语法是

```
ls file{[1-2],[4-5]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:42:45.810

它肯定会因上下文而异。在`zsh`中，您可以执行以下操作：

```
$ set -o EXTENDED_GLOB
$ ls file([1-5]~3) 
```

# node.js - 无法在 express 3.x 中使用 express-validator

> ID：12483554
> 
> 赞同：2
> 
> 时间：2012-09-18T19:20:22.570
> 
> 标签：node.js, express

我正在尝试将 express-validator 与 express 3.0 一起使用，当我调用时它会出错：

```
expressValidator = require("express-validator") 
app.use(expressValidator)

req.assert(req.body.password,'Enter Password').notEmpty()
errors = req.validationErrors() 
```

我得到错误：

> 500: TypeError: Object # has no method 'validationErrors'

如何使用快速验证器？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:38:35.253

确保使用以下命令安装 express-validator：

```
npm install express-validator 
```

你应该这样做：

```
var expressValidator = require("express-validator");
app.use(expressValidator());

app.post('/', function(req, res) {
  req.assert(req.body.password,'Enter Password').notEmpty();
}
var errors = req.validationErrors(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T06:13:01.540

版本问题。

```
npm i --save express-validator@4 
```

然后

```
node app.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T08:33:57.073

版本问题

```
npm i --save express-validator@4 
```

和

```
npm start 
```

# .net - VS2012 无法运行测试

> ID：12483557
> 
> 赞同：10
> 
> 时间：2012-09-18T19:20:33.383
> 
> 标签：.net, visual-studio-2012, mstest, visual-studio-express

尝试在 Visual Studio Express 2012 For Web 中运行单元测试时，是否有人遇到以下错误？：

> MSTestAdapter 无法发现测试，因为经典模式帮助程序不可用。如果已选择 TestSettings 文件，请取消选择并重试。

我在 Visual Studio 2012 RC 中有一个解决方案，其中包含几个应用程序、几个类库和几个单元测试项目。当 Visual Studio 2012 发布时，我改用 Express For Web。一切都在编译和运行良好，但每当我尝试运行单元测试时，都会出现上述错误。

作为测试，我卸载了单元测试项目并删除了 TestSettings 文件，并添加了一个带有一个测试的新单元测试项目，这是一个简单的真断言。但是，错误仍然存​​在。

谷歌搜索并没有为我找到太多东西。各种网站上的一些相关帖子，但还没有实质性内容。（也许其他人有更多的运气？）看起来测试框架在尝试调用 MSTest 之前就失败了，但同样奇怪的是我在机器上找不到`mstest.exe`。

有没有人遇到这个并解决了它？我想我可以转移到 NUnit（尽管他们的网站没有响应，这并没有给项目灌输很大的信心）或类似性质的东西，尽管我更愿意尽可能减少工具的数量。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-22T11:28:47.553

我遇到了同样的问题。我已经删除了一些测试设置文件，它现在正在工作。要删除的文件：

*   本地.testsettings

*   解决方案名称.vsmdi

*   TraceAndTestImpact.testsettings

脚步：

*   从解决方案中删除所有 3 个文件

*   从解决方案文件夹中删除所有 3 个文件

*   在 VS12 中关闭解决方案并重新打开它

[http://dailywebtips.blogspot.co.uk/2012/09/visual-studio-2012-express-error.html](http://dailywebtips.blogspot.co.uk/2012/09/visual-studio-2012-express-error.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T09:13:29.257

很棒的答案，安德烈克鲁兹！帮了我很多！但是，当我尝试运行测试时，它抱怨：

> 无法为 WavverTests.UnitTest1 类设置 TestContext 属性。错误：System.ArgumentException：“Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestContextImplementation”类型的对象无法转换为“Microsoft.VisualStudio.TestTools.UnitTesting.TestContext”类型。

我尝试更改类型，因为错误似乎暗示 - 好像命名空间已更改。但这不起作用，并给出了一个更加模糊的错误。

相反，删除此属性！对我来说，删除 TestContext 属性解决了这个问题。

希望这对其他人有帮助。

# google-chrome - 新的 Chrome 打包应用程序的最小/最大按钮在哪里？

> ID：12483563
> 
> 赞同：5
> 
> 时间：2012-09-18T19:21:01.370
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

我正在使用 Chrome 的 dev-channel v23，并且正在使用新的[Chrome 打包应用程序](http://developer.chrome.com/dev/apps/about_apps.html)平台。

新平台的一个目的是将打包的应用程序“从浏览器中取出”，并为打包的应用程序提供顶级窗口状态。我有很多工作要做，但 Chrome 为我打开的窗口没有标题栏，也没有最小化、最大化按钮。它确实有 chrome 的自定义关闭按钮（就像设置对话框等内部窗口上的那个）。

您可以隐藏关闭按钮，并在 html/js 中提供自定义最小/最大/关闭功能，但它会破坏功能和外观上的 UX。如果 chrome 的目标是让我的应用程序的外观和功能与其他所有顶级窗口一样，那么系统特定的标题栏（带有窗口状态按钮）在哪里？

我错过了什么吗？这可以通过我没有看到的某种 API 来完成吗？

谢谢，蒂姆

***我知道我可以使用“无”框架类型，并创建自己的标题栏，但无法考虑所有平台的变化。这是一扇窗户。我的意思是，如果目标是像任何其他顶级窗口一样，那么打开一个标准平台特定窗口并给我一个客户区来使用。我会说自定义是次要的标准窗口，与特定操作系统上所有其他窗口的功能和外观一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:31:08.117

目前您可以创建两种类型的窗口：[frame: "chrome"]（默认）和 [frame:"none"]。您可能正在使用框架：“无”，对吗？在该窗口类型中，您必须绘制所需的所有装饰，包括窗口控件。如果您使用默认框架类型（“chrome”），您将获得一个带有原生标题栏的窗口，但没有自定义选项。

话虽如此，请放心，我们正在研究其他选项来帮助您引导您的应用程序。正在评估的选项之一是模拟平台标题栏但可以由您自定义的 HTML 组件。

# javascript - 结合客户端值和 Ajax 验证表单数据

> ID：12483564
> 
> 赞同：1
> 
> 时间：2012-09-18T19:21:07.430
> 
> 标签：javascript, jquery, ajax

我花了很多时间试图自己解决这个问题，但对使用 jquery 和 ajax 很陌生，这可能很简单......

我有一个要提交的报价请求表，我想在提交前验证详细信息。其中一些可以用简单的 javascript 完成，并且这部分工作正常。我还需要从 mysql 数据库中取回一些值并验证那些我遇到问题的地方。

在我的 HTML 表单上，我有这一行

```
<form id="quoteform" onsubmit=" return validateHire()" method="post" action="quote-results.php"> 
```

它调用一个验证脚本，该脚本包含在一个单独的文件中，该文件包含在包含表单的页面中。

validateHire 脚本如下：

```
 function validateHire(){

alert("Hire Validation Script Being Called!");

// set the colllection date and time
var collectionDate = new Date ($("#collectiondate").datepicker('getDate'));
var collectionHour = ($("#collectionTime").val()).substr(0,2);
collectionDate.setHours(collectionHour);
var collectionMinute = ($("#collectionTime").val()).substr(3,4);
collectionDate.setMinutes(collectionMinute);

// set the return date and time
var returnDate = new Date ($("#returndate").datepicker('getDate'));
var returnHour = ($("#returnTime").val()).substr(0,2);
returnDate.setHours(returnHour);
var returnMinute = ($("#returnTime").val()).substr(3,4);
returnDate.setMinutes(returnMinute);

// calculate the length of hire and add additional day if necessary
var timeDiff = returnHour - collectionHour
var totaldays = Math.floor(((returnDate - collectionDate)/1000)/60/60/24);

if(totaldays <1 && totaldays >-1){
totaldays=1;
}

// if(timeDiff > 2){
totaldays = totaldays + 1;
alert(totaldays)
}

// get the collection and return day to check if it is a weekend hire
var collectionDay = collectionDate.getDay();
var returnDay = returnDate.getDay();

// validate if the hire is a friday or saturday it meets minimum length
if(collectionDay == 5 && totaldays <3){
$("#errorbox").slideDown('fast');
$("#errormessage").html("Hires Starting on a Friday Must be a Minimum of 3 Days");
return false;
}

if(collectionDay == 6 && totaldays <2){
$("#errorbox").slideDown('fast');
$("#errormessage").html("Hires Starting on a Saturday Must be a Minimum of 2 Days");
return false;
}

checkServerSide();
function checkServerSide()
{
alert("now checking server side!");
$.post("sproc-test.php",{q: totaldays, cdt: collectionDate, cTime: collectionTime, cLoc: CollectionLocation, cDay: collectionDay, cDas: collectionDateAsString, rDate: returnDate, rTime: returnTime, rLoc: returnLocation, rDay: returnDay, rdas: returnDateAsString},
function(data){
var minHire = data.minhire;
alert(minHire); 

$('#testvalue').val(minHire);

          }, "json"); 
alert("This is the end of the check server side function");
}

if($('#testvalue').val() == 1){
$("#errorbox").slideDown('fast');
$("#errormessage").html("The Hire is not long enough to meet the requried minimum!");
return false;
}

} 
```

第一部分工作正常并提示用户正确的错误消息并且表单未提交但是当涉及到 checkServerSide 函数时我有问题。

php 脚本应返回一个数组，然后我尝试在发布后访问该数组并获取一个值并将其设置为隐藏的表单字段，以便我可以对此进行验证，但是根据 Firebug，实际上没有任何内容发布到页面我也在尝试提交表单，所以想知道我的 $post 语法是否错误？另外， $post 调用之前的警报有效，但之后的警报也不会让我怀疑我是否在这里搞砸了？尽管在 firefox 错误控制台中查看时，没有报告错误。

我希望我已经充分解释了我想要实现的目标，但我还不够清楚，请告诉我。另外，正如我所提到的，我对此很陌生，所以我非常感谢一个易于理解的解释我做错了什么以及是否有更好的方法来实现这一点。

非常感谢您的帮助！:)

亲切的问候

麦克风

# git - Cygwin 上的 Intellij Diff and Merge 工具

> ID：12483567
> 
> 赞同：2
> 
> 时间：2012-09-18T19:21:19.703
> 
> 标签：git, intellij-idea, cygwin, git-merge, git-diff

如何配置 git 以使用 cygwin 进行差异和合并工具。

我可以在 Windows 命令提示符下的命令行上成功调用 diff，但不能用于 cygwin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:12:15.753

经过大量的摆弄，我发现以下设置在 msysgit 中运行良好（所以在 Cygwin 中是 YMMV，但我打赌它也可以在那里工作）。

只需将其放在您的`.gitconfig`文件中：

```
[diff]
    tool = intellij
[difftool "intellij"]
    cmd = cmd.exe //c "\"C:/Program Files (x86)/IntelliJ IDEA Community Edition 12.0/bin/idea.bat\" diff \"$LOCAL\" \"$REMOTE\""
[merge]
    tool = intellij
[mergetool "intellij"]
    cmd = cmd.exe //c "\"C:/Program Files (x86)/IntelliJ IDEA Community Edition 12.0/bin/idea.bat\" merge \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\"" 
```

不需要 Linux IntelliJ 的 .sh 脚本（无论如何，我认为它不能在更最小的 msysgit 环境中正常运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T14:06:55.370

我想做同样的事情：`IntelliJ Diff tool`从`Cygwin`没有开始的情况下运行`IntelliJ Idea`，并从 Cygwin（不是 msysgit）安装 Git。

设法通过以下方式做到这一点：

*   运行以下命令：`chmod +x idea.bat`
*   添加“ `...Intellij Idea/bin`”路径到`Path`windows环境变量（重启Cygwin）
*   创建以下脚本并输入`c:\cygwin\bin\`：

> ```
> #!/bin/sh
> FILE1=`cygpath -w -a "$1"`  
> FILE2=`cygpath -w -a "$2"`  
> idea.bat diff $FILE1 $FILE2 
> ```

*   编辑以下内容`.gitconfig`（如 ytpete 建议的那样）：

```
[差异]
    工具 = 智能
[difftool“智能”]
    cmd = intellij_idea.sh $LOCAL $REMOTE
```

希望，这会帮助那里的人。

# c# - taglib 锐利的 id3v1 标签，问号而不是俄文字母

> ID：12483570
> 
> 赞同：0
> 
> 时间：2012-09-18T19:21:25.990
> 
> 标签：c#, taglib-sharp

我正在运行以下代码：

```
TagLib.File f = TagLib.File.Create(path);
f.Tag.AlbumArtists = f.Tag.Artists = new string[] { "артист" };
f.Tag.Title = "песня";
f.Save(); 
```

`id3v1`和标签都已`id3v2`设置，但只有`id3v2`标签设置正确。v1 标签只显示“????????” 问号而不是字母。

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:41:13.163

ID3v1 是旧标准，仅支持[ANSI 字符](http://www.medcalc.org/manual/ansi_character_set.php)。

[在此处](http://www.assistanttools.com/articles/id3v1-tags.shtml)查看更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:20:24.057

不幸的是，TagLib 在里面做了一些编码。我已经测试了 100 多个 mp3 文件。我真的很困惑：为什么我可以用 TAG 内的 CYR 文本更新其中一些，但同时其中一些有“？？？？？？”。相同的代码！

我已经结合了标签和属性 - 没有什么不同。但！有些文件有 2 个标签“集合”：ID3v2、ID3v2 和 ID3v1。在这种情况下，我可以使用 CYR 字符更改标签。这意味着“ID3v2，ID3v2”我没有解开。为什么 2 相同 - 没有答案。

我看了一下 TagLib# 的一些代码，并喜欢那里的“this.encoding = ...”。之后，我停止分析“为什么”和“在哪里”。

Vlad L，只需对这些文件使用 Translit。我的东西 TagLib# 检测字符集，让你没有机会改变它（1251！= 1252 等）

# optimization - 具有快速初始化的 JVM 脚本语言

> ID：12483578
> 
> 赞同：2
> 
> 时间：2012-09-18T19:21:55.163
> 
> 标签：optimization, scripting, jvm-languages

我有一个简单的 java 应用程序，它获取 jmx 连接 url、对象名称和属性名称作为输入和输出属性值。此应用程序每分钟运行数百次，并具有严格的运行时间限制。最近出现了许多极端情况（将毫秒转换为秒、折叠列表等），重新编译和重新分发此应用程序变得乏味。所以我决定切换到一些支持 JMX 的脚本语言。

我尝试过 groovy、jython 和 clojure，发现它们的初始化时间很长（groovy/clojure/jython 大约为 0.9/1.2/3.5）。

有没有更快的初始化速度，或者有没有办法减少这些语言的初始化时间而不从java加载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:28:37.537

现在，[jark](http://icylisper.in/jark/started.html)似乎是一个不错的解决方案。

写一个clojure脚本，比如

```
(ns jarkserver)

(require '[clojure.tools.nrepl :as nrepl])

(defn -main
[& args]
(nrepl/start-server 9000)
(.join (Thread/currentThread))) 
```

从以下开始：

```
 lein run -m jarkserver 
```

然后使用以下命令启动 REPL：

```
 jark repl 
```

或使用以下命令运行您的 clojure 脚本：

```
 jark <path_to_clojure_script> 
```

或者只是内联执行一些 clojure 代码：

```
 jark -e "(+ 1 1)" 
```

**编辑**：启动 Jark 服务器的更简单方法是：

```
jark -cp lib/*:lib/dev/*:* -p 9000 server start 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:14:02.370

我找到了一个适用于所有 java 脚本语言的解决方案，它是[nailgun](http://www.martiansoftware.com/nailgun/)。它与其他答案中建议的 jerk 和 cake 具有相同的原理，但它运行任意 Java 类。

[这篇](http://fwierzbicki.blogspot.com/2007/05/playing-with-nailgun.html)博客文章对如何使用 nailgun 运行 jython 脚本进行了很好的说明，我相信它可以应用于其他脚本语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:00:09.690

显然，对于 Clojure，Cake (https://github.com/flatland/cake) 包含一个 Clojure 脚本启动器，它使用在后台运行的已经初始化的 JVM。您必须自己查找详细信息，因为我从未使用过它，也不知道有关它的任何具体信息。但显然它大大缩短了启动时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-10T20:20:22.973

其他选项（我不熟悉）：

*   [https://kobo.github.io/groovyserv/](https://kobo.github.io/groovyserv/)
*   [https://leiningen.org/grench.html](https://leiningen.org/grench.html)
*   [https://github.com/fizzed/blaze](https://github.com/fizzed/blaze)

其他值得探索的途径（降低前景）：

*   [https://github.com/eraserhd/rep](https://github.com/eraserhd/rep)（不是真的为脚本制作，但也许可以适应它）
*   cljs（lumo 或 planck）
*   格拉尔
*   [https://github.com/analyticbastard/clj-on-k8s-quickstart](https://github.com/analyticbastard/clj-on-k8s-quickstart)
*   [http://blog.gilliard.lol/2017/10/04/AppCDS-and-Clojure.html](http://blog.gilliard.lol/2017/10/04/AppCDS-and-Clojure.html)

# asp.net - vb.net 错误：由于其保护级别而无法访问

> ID：12483579
> 
> 赞同：8
> 
> 时间：2012-09-18T19:21:54.833
> 
> 标签：asp.net, vb.net, visual-studio-2010

我是第一次使用 vb.net 代码，但我有 5 年的 C# 经验。

从以前的开发人员那里，我被告知服务器上的代码运行良好，没有任何错误，但是当我打开网站文件夹（网站没有解决方案文件）时，我尝试构建网站，我得到了大量错误说：

> 'labelControl' 未声明。由于其保护级别，它可能无法访问。

到目前为止，我打开的两个页面上的所有控件都发生了这种情况。

以下是其中一个文件的部分标记、逻辑和设计器代码：

标记：

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Site.Master" CodeBehind="OverriedCalcValues.aspx.vb" Inherits="Homevesters.Overried_Calc_Values" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">       
    </asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
         <table  cellpadding="5" border="1">                            
         <tr>
                  <td class="style15"><asp:label ID="lblDoorJam1" runat="server" Font-Bold="true" Text="Door Jamb"/><br />Cost per door jamb replacement</td>
                  <td class="style38"><asp:label ID="lblFactorType1" runat="server"  Text="$/Each"/></td>
                  <td class="style41"><asp:label ID="lblDoorJam" runat="server"  Text=""/></td>
                  <td class="style32"><asp:CheckBox ID="ckDoorJam" runat="server"/></td>
                  <td class="style35">$<asp:TextBox ID="txtDoorJam" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style16"><asp:label ID="lblExtDoor1" runat="server" Font-Bold="true"  Text="Exterior Door"/><br />Cost per exterior door replacement</td>
                  <td class="style39"><asp:label ID="lblFactorType2" runat="server"  Text="$/Each"/></td>
                  <td class="style42"><asp:label ID="lblExtDoor" runat="server"  Text=""/></td>
                  <td class="style33"><asp:CheckBox ID="ckExtDoor" runat="server"/></td>
                  <td class="style36">$<asp:TextBox ID="txtExtDoor" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style15"><asp:label ID="lblGarageSingle1" runat="server" Font-Bold="true" Text="Garage (1 Single)"/><br />Cost to replace one single garage door</td>
                  <td class="style38"><asp:label ID="lblFactorType3" runat="server"  Text="$/Each"/></td>
                  <td class="style41"><asp:label ID="lblGarageSingle" runat="server"  Text=""/></td>
                  <td class="style32"><asp:CheckBox ID="ckGarageSingle" runat="server"/></td>
                  <td class="style35">$<asp:TextBox ID="txtGarageSingle" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style16"><asp:label ID="lblGarageDouble1" runat="server" Font-Bold="true"  Text="Garage (1 Double)"/><br />Cost to replace one double garage door</td>
                  <td class="style39"><asp:label ID="lblFactorType4" runat="server"  Text="$/Each"/></td>
                  <td class="style42"><asp:label ID="lblGarageDouble" runat="server"  Text=""/></td>
                  <td class="style33"><asp:CheckBox ID="ckGarageDouble" runat="server"/></td>
                  <td class="style36">$<asp:TextBox ID="txtGarageDouble" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style15"><asp:label ID="Label1" runat="server" Font-Bold="true" Text="Interior Door"/><br />Cost per interior door replacement</td>
                  <td class="style38"><asp:label ID="Label2" runat="server"  Text="$/Each"/></td>
                  <td class="style41"><asp:label ID="lblInteriorDoor" runat="server"  Text=""/></td>
                  <td class="style32"><asp:CheckBox ID="ckInteriorDoor" runat="server"/></td>
                  <td class="style35">$<asp:TextBox ID="txtInteriorDoor" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style16"><asp:label ID="Label4" runat="server" Font-Bold="true"  Text="Patio Door"/><br />Cost to replace one patio door</td>
                  <td class="style39"><asp:label ID="Label5" runat="server"  Text="$/Each"/></td>
                  <td class="style42"><asp:label ID="lblPatioDoor" runat="server"  Text=""/></td>
                  <td class="style33"><asp:CheckBox ID="ckPatioDoor" runat="server"/></td>
                  <td class="style36">$<asp:TextBox ID="txtPatioDoor" runat="server"  Text="" Width="80px" /></td>
         </tr>

         <tr>
                  <td class="style15"><asp:label ID="Label3" runat="server" Font-Bold="true" Text="Patio Glass"/><br />Cost per patio glass replacement</td>
                  <td class="style38"><asp:label ID="Label6" runat="server"  Text="$/Each"/></td>
                  <td class="style41"><asp:label ID="lblPatioGlass" runat="server"  Text=""/></td>
                  <td class="style32"><asp:CheckBox ID="ckPatioGlass" runat="server"/></td>
                  <td class="style35">$<asp:TextBox ID="txtPatioGlass" runat="server"  Text="" Width="80px" /></td>
         </tr>

                 <tr>        
                  <td class="style16"><asp:label ID="Label7" runat="server" Font-Bold="true" Text="Dishwasher"/><br />Cost to replace one dishwasher</td>
                  <td class="style39"><asp:label ID="Label8" runat="server"  Text="$/Each"/></td>
                  <td class="style42"><asp:label ID="lblDishWasher" runat="server"  Text=""/></td>
                  <td class="style33"><asp:CheckBox ID="ckDishwasher" runat="server"/></td>
                  <td class="style36">$<asp:TextBox ID="txtDishwasher" runat="server"  Text="" Width="80px" /></td>
         </tr>                 
</table>                
</asp:Content> 
```

逻辑：

```
Imports Homevesters

Public Class Overried_Calc_Values
    Inherits System.Web.UI.Page

    Dim clsValueOrganization As New clsCalcValues
    Dim clsValueDefaults As New clsCalcValues

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If IsUserLoggedIn(Me) = False Then
            Response.Redirect("~/Account/Login.aspx")
            Exit Sub
        End If

        If IsPostBack = False Then

            clsValueOrganization.Load("", False, Session("OrgID"))

            clsValueDefaults.Load("", False, "DEFAULT")

            ' c is dollar format with dollar symbol
            lblDoorJam.Text = clsValueDefaults.dDoorJamb.ToString("c")
            lblExtDoor.Text = clsValueDefaults.dExtDoor.ToString("c")
            lblGarageSingle.Text = clsValueDefaults.dGarageDoorSgl.ToString("c")
            lblGarageDouble.Text = clsValueDefaults.dGarageDoorDbl.ToString("c")
            lblInteriorDoor.Text = clsValueDefaults.dIntDoor.ToString("c")
            lblPatioDoor.Text = clsValueDefaults.dPatioDoor.ToString("c")
            lblPatioGlass.Text = clsValueDefaults.dPatioGlass.ToString("c")
            lblDishWasher.Text = clsValueDefaults.dDishwasher.ToString("c")
            lblFans.Text = clsValueDefaults.dFans.ToString("c")
            lblLightFixtures.Text = clsValueDefaults.dLightFixture.ToString("c")
            lblServicePanel.Text = clsValueDefaults.dServicePanel.ToString("c")
            lblRange.Text = clsValueDefaults.dRange.ToString("c")
            lblRefrigerator.Text = clsValueDefaults.dRefrigerator.ToString("c")
            lblStoveTop.Text = clsValueDefaults.dStoveTop.ToString("c")
            lblVentHood.Text = clsValueDefaults.dVentHoods.ToString("c")
            lblElectricalWiring.Text = clsValueDefaults.dWiringReplace.ToString("c")
            lblFloorCovering.Text = clsValueDefaults.dFloorCover.ToString("c")
            lblTileFloor.Text = clsValueDefaults.dTileFloor.ToString("c")
            lblOldHouse4150.Text = clsValueDefaults.dOldHouse1.ToString("c")
            lblOldHouse2140.Text = clsValueDefaults.dOldHouse2.ToString("c")
            lblOldHouse0020.Text = clsValueDefaults.dOldHouse3.ToString("c")
            lblOldHouse1900.Text = clsValueDefaults.dOldHouse4.ToString("c")

            ckMedWood.Checked = Not (clsValueOrganization.dMdWoodWindow = clsValueDefaults.dMdWoodWindow)
            ckSmallMet.Checked = Not (clsValueOrganization.dSmMetalWindow = clsValueDefaults.dSmMetalWindow)
            ckSmallPane.Checked = Not (clsValueOrganization.dSmGlassPanes = clsValueDefaults.dSmGlassPanes)
            ckSmallWood.Checked = Not (clsValueOrganization.dSmWoodWindow = clsValueDefaults.dSmWoodWindow)

        End If

    End Sub

End Class 
```

设计师：

```
'------------------------------------------------------------------------------
' <auto-generated>
'     This code was generated by a tool.
'
'     Changes to this file may cause incorrect behavior and will be lost if
'     the code is regenerated. 
' </auto-generated>
'------------------------------------------------------------------------------

Option Strict On
Option Explicit On

Partial Public Class Override_Calc_Values

    '''<summary>
    '''lblDoorJam1 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblDoorJam1 As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''lblFactorType1 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblFactorType1 As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''lblDoorJam control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblDoorJam As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''ckDoorJam control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents ckDoorJam As Global.System.Web.UI.WebControls.CheckBox

    '''<summary>
    '''txtDoorJam control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents txtDoorJam As Global.System.Web.UI.WebControls.TextBox

    '''<summary>
    '''lblExtDoor1 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblExtDoor1 As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''lblFactorType2 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblFactorType2 As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''lblExtDoor control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblExtDoor As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''ckExtDoor control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents ckExtDoor As Global.System.Web.UI.WebControls.CheckBox

    '''<summary>
    '''txtExtDoor control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents txtExtDoor As Global.System.Web.UI.WebControls.TextBox

    '''<summary>
    '''lblGarageSingle1 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblGarageSingle1 As Global.System.Web.UI.WebControls.Label

    '''<summary>
    '''lblFactorType3 control.
    '''</summary>
    '''<remarks>
    '''Auto-generated field.
    '''To modify move field declaration from designer file to code-behind file.
    '''</remarks>
    Protected WithEvents lblFactorType3 As Global.System.Web.UI.WebControls.Label

End Class 
```

以下是我遇到的一些错误：

![截屏](../Images/d40a3d5d5eb99ec24e0ab095848d261b.png)

你认为这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:38:38.133

如果您的代码是逐字复制的，那么逻辑块中的类名拼写错误，并且与设计器文件中的名称不匹配。这会导致它被解释为两个单独的类，从而导致错误。一个文件中的代码无法引用另一个文件中定义的对象。

修复逻辑块中的类名以匹配设计器块，错误应该会消失。

**编辑**：我注意到它在标记文件的第一行也拼错了。一定要在那里修复类名。

# mysql - 识别 2 个表中的不同行

> ID：12483582
> 
> 赞同：2
> 
> 时间：2012-09-18T19:22:16.433
> 
> 标签：mysql, join, group-by, distinct

假设我有两个结构相同的表，分别称为 A 和 B。此问题关注的唯一列是 product_type、price 和 volume。

product_type 和 price 的每个组合可以在每个表中以不同的数量重复多次。我试图在一个表中找到与另一个表中具有不同 TOTAL 卷的组合实例。

这将包括表 A 中的组合未在表 B 中表示的情况，反之亦然。

====================

例子：

表 A：

```
ID   Product_type   Price  Volume
---  ------------   -----  ------
1         X           $1     10
2         X           $1     11
3         Z           $2     10 
```

表 B：

```
ID   Product_type   Price  Volume
--   -------------  -----  -------
1         X           $1     21
2         Y           $1     5
3         Z           $2     7
4         Z           $2     4 
```

请注意，表 A 中 X @ $1 的总和为 21，与表 B 匹配。Y @ $1 出现在表 B 中，但不在 A 中。Z @ $2 出现在两个表中，但它们的总和不同。我希望查询返回违反规则的每个产品类型和价格组合（即 Y @ $1 和 Z @ $2）。

我尝试过使用 GROUP、UNION、DISTINCT、子查询和上述各种组合，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:41:21.190

我相信以下是您正在寻找的。我为奇怪的 where/not 语法道歉，concat 中的子查询似乎是最易读的方法。

```
(
SELECT
  "TableA",
  TA.*

FROM TableA AS TA

WHERE CONCAT(product_type, price,
             (SELECT SUM(volume) FROM TableA WHERE product_type = TA.product_type AND price = TA.price))

NOT IN (SELECT CONCAT(product_type, price, SUM(volume)) FROM TableB GROUP BY product_type, price)
)

UNION

(
SELECT
  "TableB",
  TB.*

FROM TableB AS TB

WHERE CONCAT(product_type, price,
             (SELECT SUM(volume) FROM TableB WHERE product_type = TB.product_type AND price = TB.price))

NOT IN (SELECT CONCAT(product_type, price, SUM(volume)) FROM TableA GROUP BY product_type, price)
)

#ORDER BY <column> 
```

输出：

```
TableA  ID  Product_type  Price  Volume
TableA  3   Z             $2     10
TableB  2   Y             $1     5
TableB  3   Z             $2     7
TableB  4   Z             $2     4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:41:10.713

```
create table a (ID integer, Product_type char(1), Price float, Volume integer);
create table b (ID integer, Product_type char(1), Price float, Volume integer);

insert into a (ID, Product_type, Price, Volume) values
(1, 'X', 1, 10),
(2, 'X', 1, 11),
(3, 'Z', 2, 10)
;
insert into b (ID, Product_type, Price, Volume) values
(1, 'X', 1, 21),
(2, 'Y', 1, 5),
(3, 'Z', 2, 7),
(4, 'Z', 2, 4)
;

select 
    a.Product_type as Product_type_a,
    a.Price as Price_a,
    a.Volume as Volume_a,
    b.Product_type as Product_type_b,
    b.Price as Price_b,
    b.Volume as Volume_b
from (
        select Product_type, Price, sum(Volume) as Volume
        from a
        group by Product_type, Price
    ) a
    full outer join (
        select Product_type, Price, sum(Volume) as Volume
        from b
        group by Product_type, Price
    ) b on a.Product_type = b.Product_type and a.Price = b.Price
where 
    a.Volume != b.Volume
    or a.Volume is null or b.Volume is null
;
 product_type_a | price_a | volume_a | product_type_b | price_b | volume_b 
----------------+---------+----------+----------------+---------+----------
 Z              |       2 |       10 | Z              |       2 |       11
                |         |          | Y              |       1 |        5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:46:33.723

这似乎[对我有用](http://sqlfiddle.com/#!2/401ed/3)：

```
SELECT a.Product_type, a.volume, b.Product_type, b.volume
FROM
  (SELECT Product_type, SUM(volume) AS volume
  FROM tbl1 GROUP BY Product_type) a
INNER JOIN
  (SELECT Product_type, SUM(volume) AS volume
  FROM tbl2 GROUP BY Product_type) b ON b.Product_type = a.Product_type
WHERE a.volume <> b.volume 
```

**结果**

```
| PRODUCT_TYPE | 音量 | PRODUCT_TYPE | 音量 |
-------------------------------------------------
| Z | 10 | Z | 11 |
```

# php - 找到带有某个单词的 url 并将 url 保存在数组元素 0 中

> ID：12483586
> 
> 赞同：-2
> 
> 时间：2012-09-18T19:22:46.190
> 
> 标签：php, regex, arrays, url, preg-match

我有一堆网址。通过使用正则表达式 pregmatch，我想找到带有**artifact**这个词的 url 。然后我想将带有 word **artifact**的 url 保留在一个数组中。

**我使用的语言是 PHP**

这些是网址

```
https://ct.soa-gw.canadapost.ca/ers/29d0bab4738a301d/10238/0 
https://ct.soa-gw.canadapost.ca/ers/artifact/29d0bab4738a301d/10238/0 
https://ct.soa-gw.canadapost.ca/ers/abc/29d0bab4738a301d/10238/0 
```

有人可以指导我。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:26:36.230

```
$matches = array();
foreach ($someURLs as $url) {
    if (strstr($url, "artifact") != FALSE) {
        // found URL, store to array
        $matches[] = $url;
        // may or may not need a break here
        // edit: MAY
        break;
    }
} 
```

# css - Blackberry Bold 9900 上的调试网站

> ID：12483588
> 
> 赞同：0
> 
> 时间：2012-09-18T19:22:54.333
> 
> 标签：css, blackberry

在 BB Bold 9900 OS 版本 7.0.0 上查看网站时，我遇到了一个奇怪的问题，我确信这只是一个 CSS 问题，但我已经尝试了几天来纠正无济于事。

它只是出现在 2 个 div 之间的网站上的一条黑线。

奇怪的是，该网站在所有主要浏览器上都能完美呈现，包括旧版 BB 曲线和 Iphone。

如果有人有在此特定设备上进行调试的解决方案，我将不胜感激。我在 Mac 上运行，所以模拟器是不可能的，我无权访问这个特定的设备。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:55:21.143

使用 Web Inspector 连接到设备，同时浏览页面。然后使用鼠标突出显示 HTML 选项卡中的元素并即时转动/添加样式以查看导致黑线的原因。

有关 Web Inspector 的更多信息，请访问[https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html](https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html)

# javascript - 使用 javascript 监听事件

> ID：12483589
> 
> 赞同：1
> 
> 时间：2012-09-18T19:22:58.507
> 
> 标签：javascript, jquery, events, jquery-plugins

我正在使用一个名为“ [backstretch](https://github.com/srobbin/jquery-backstretch) ”的 jQuery 插件。在描述中，它说`backstretch.show`每次更改图像时都会调用它。我将如何去监听这个事件并在它被调用时让它执行另一个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:26:11.883

假设：

```
$(".foo").backstretch("..."); 
```

然后：

```
$(".foo").on("backstretch.show", function () {
    /* My code here */
}); 
```

如果您使用的是静态版本：

```
$.backstretch("...") 
```

您可能必须将事件处理程序绑定到正文：

```
$(document.body).on("backstretch.show", function () { ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:28:55.020

一个事件需要两件事来知道要监听什么，事件类型（在本例中为`"backstretch.show"`，以及目标。看起来您应用`.backstretch()`到了一个 jQuery 集，因此您可能希望在该集的元素上注册您的处理程序以用于目标，[这是获取事件的内容](https://github.com/srobbin/jquery-backstretch/blob/master/src/jquery.backstretch.js#L215-217)。

所以我推荐类似的东西：

```
$("something").backstretch(/* ... */).on("backstretch.show", function () { 
     //do something
}); 
```

# php - 在 Wordpress 菜单管理器中向菜单项添加自定义选项

> ID：12483590
> 
> 赞同：2
> 
> 时间：2012-09-18T19:23:04.393
> 
> 标签：php, wordpress

我期待在 wordpress 中向菜单块添加自定义选项。

例如，当我们在 WP 中使用菜单管理器添加菜单项时，可折叠面板内会出现很少的文本框，例如标题、标签等。

我想通过开发插件将我的自定义选项添加到菜单项中。

我浏览了核心代码，但找不到任何可用于完成此任务的钩子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:59:47.313

在向 WP 菜单管理器中添加自定义选项时发现了这个很棒的 tuts。

[如何在高级菜单属性中添加自定义字段？](https://wordpress.stackexchange.com/questions/33342/how-to-add-a-custom-field-in-the-advanced-menu-properties)

# facebook - 如何让我的博客正确列出 Facebook 上的 OG 信息

> ID：12483591
> 
> 赞同：0
> 
> 时间：2012-09-18T19:23:08.767
> 
> 标签：facebook, coldfusion, facebook-opengraph, railo, cfwheels

我想知道是否有人可以在这里帮助我。我一直在调试和调试。我尝试在框架内的多个位置在页面上放置中止，包括控制器和视图级别。但我仍然不明白为什么它应该给出错误。

我正在运行一个博客网站（ColdFusion on Railo 与 CFWheels 作为框架）并试图让我的 facebook opengraph 标签工作，但目前 LINT 工具只是向我抛出 500 个错误。这很奇怪，因为 URL 对普通的网络访问者来说工作正常。W3Cvalidator 也可以读取 url。只是 Facebook 不想阅读它。即使没有定义 opengraph 标签，它也会在没有任何调试的情况下引发错误。

请参阅[Facebook 对象调试器](https://developers.facebook.com/tools/debug/og/object?q=http://www.gamemistress.eu/weblog/article/a343f)或该网站上的任何其他文章。

提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:51:06.200

当 Facebook 试图为 Open Graph 元标记抓取您的页面时，它会在 http 请求中使用特定的用户代理 - 即 facebookexternalhit/1.1 (+https://www.facebook.com/externalhit_uatext.php)。

只要存在此用户代理，您的服务器就会返回 500 内部错误。您应该修改服务器配置以正确处理此用户代理。然后 Facebook 抓取工具和调试工具将能够抓取您的页面。

# netbeans - 将 Jackrabbit 与 glassfish 和 jcr-2.0.jar 库一起使用

> ID：12483592
> 
> 赞同：0
> 
> 时间：2012-09-18T19:23:11.740
> 
> 标签：netbeans, glassfish, jackrabbit, jcr

我正在尝试从我的 glassfish 服务器中访问 jackrabbit 存储库。因此，我将 jcr-2.0.jar 粘贴到我的 domain/{$mydomain}/lib/ 目录中。当我尝试在 netbeans 中设置*存储库*实例时，我找不到导入 javax.jcr.repository，所以 glassfish 也没有它可用吗？或者我是否还必须将 jcr-2.0.jar 导入我的本地项目库文件夹，以便让 netbeans 知道我将使用它？我发现无法通过 glassfish-admin ui 或任何其他方式查看哪些库已安装到我的应用程序容器中。我也尝试了 asadmin add-library jcr-2.0.jar 但仍然在 netbeans 中无法解析导入。（我也尝试重新启动 glassfish 服务器）。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:45:57.703

`jcr-2.0.jar`只包含接口，你也需要jackrabbit jars。

我使用 maven 并将所有内容打包到一个准备部署到任何容器的 war 文件中。对我来说效果很好，这就是我推荐使用它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:57:40.907

敬启者，

我自己解决了这个问题。Netbeans 无法访问服务器库，您必须使用本地副本。因此点击菜单中的“工具”，然后通过“Ant Libraries”添加库。接下来单击“新库”并指定您的库。将“库类型”更改为“服务器库”很重要。那应该这样做。

# objective-c - 如何将 NIB 文件与自定义 NSView 类相关联？

> ID：12483596
> 
> 赞同：0
> 
> 时间：2012-09-18T19:23:31.340
> 
> 标签：objective-c, macos, cocoa-touch

我有一个自定义`myCustomNSView`课程。我还为它创建了一个 nib 文件。如何将两者链接在一起，以便我可以实例化 myCustomNSView 类并将其添加为其他视图的子视图？[这个](https://stackoverflow.com/questions/5056219/uiview-and-initwithframe-and-a-nib-file-how-can-i-get-the-nib-file-loaded/5056886#5056886)问题提供的答案是完美的，除了我使用的是 OSX 而不是 iOS。

查看[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSBundle_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000401-CJBGDIFB)，我看到以下内容：

![在此处输入图像描述](../Images/de477502cc216b89569b18bef01cb690.png)

OSX 如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:16:40.847

如果你查看 header `NSNib.h`，你会看到新的官方方法是：

```
- (BOOL)instantiateWithOwner:(id)owner topLevelObjects:(NSArray **)topLevelObjects 
```

它与 UIKit 非常相似。我不知道，为什么它的记录如此糟糕。

# python - E40: 无法在 Windows 上打开错误文件 C:\DOCUME~1\[...]

> ID：12483597
> 
> 赞同：6
> 
> 时间：2012-09-18T19:23:41.353
> 
> 标签：python, windows, vim, pylint

我正在尝试`pylint.vim`在 Windows 上使用。

我在目录中有[https://github.com/orenhe/pylint.vim](https://github.com/orenhe/pylint.vim)版本`C:\Program Files\Vim\vimfiles\compiler`。我补充说：

```
autocmd FileType python compiler pylint 
```

要`C:\Program Files\Vim\_vimrc`归档，pylint 在我的系统中也被识别为命令。

但是当我保存 python 源代码时，我得到的不是 pylint 输出：

```
"file.py" 199L, 5876C written
Error detecded while processing function Pylint:
line 11:
E40: Can't open errorfile C:\DOCUME~1\xxx\LOCALS~1\Temp\VIeAA.tmp 
```

我该如何解决这个问题？

**编辑：** 正如lunaryorn所建议的那样，我确实尝试过合成。但是我遇到了类似的问题，也找到了关于它的线程：[https](https://github.com/scrooloose/syntastic/issues/29) ://github.com/scrooloose/syntastic/issues/29但仍然不知道如何解决它。

# android - 如何从 Preference Activity 为 Tab 动态设置内容？

> ID：12483602
> 
> 赞同：0
> 
> 时间：2012-09-18T19:24:02.680
> 
> 标签：android, static, tabs, android-tabhost, preferenceactivity

我是 android 开发的菜鸟，我想为特定选项卡动态设置内容。在 onCreate 期间，我将内容设置为：

```
 specs2 = th.newTabSpec("tag2");
    specs2.setContent(R.id.tab2);
    specs2.setIndicator("NEWS",getResources().getDrawable(R.drawable.news)); 
```

但是，我没有运气从 PreferenceActivity 切换内容。这是我的代码：

```
 SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String selectednewsfeed = getPrefs.getString("list", "1");
    if(selectednewsfeed.contentEquals("1")){
        try{
            MyActivity.newsfeed.loadUrl("http://feeds.feedburner.com/GoldMoneyGoldResearch");
            MyActivity.specs2.setContent(R.id.tab5);
            }catch (Exception e){
                e.printStackTrace();
            }
    }
} 
```

我在 MyActivity 中更改内容没有任何问题，它只是试图从 PreferenceActivity 中完成这一点，这就是问题所在。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:38:55.590

最简单的方法是使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)。这允许您在启动的活动中接收来自已启动活动的信息。

快速示例，启动您的 PreferenceActivity：

```
// in MainActivity
startActivityForResult(new Intent(this, PrefsActivity.class), 0); 
```

然后在你的 PreferenceActivity 中，设置一些数据返回到 MainActivity：

```
// in PreferenceActivity
Intent returnData = new Intent();
returnData.putExtra("com.your.package.name.DATA", R.id.tab5);
setResult(Activity.RESULT_OK, returnData);
finish(); 
```

回到 MainActivity 内部，覆盖 onActivityResult()：

```
@Override
protected void onActivityResult (int requestCode, int resultCode, Intent data){
    switch(requestCode){
    case 0:
        if (resultCode == Activity.RESULT_OK){
            int tabResource = data.getIntExtra("com.you.package.name.DATA", -1);
            specs2.setContent(tabResource);
        }
        break;
    }
} 
```

# java - Java：将字符串表示解析为树表示

> ID：12483604
> 
> 赞同：3
> 
> 时间：2012-09-18T19:24:16.637
> 
> 标签：java, string, parsing, tree, representation

我需要使用 Java，所以不能使用脚本语言支持。

我需要解析的字符串表示形式如下：

```
op1 (t1,t2,t3,...) 
```

其中 t1, t2, t3 等可以再次是类似`op2 (t11,t12,t13 ...)`或只是一个原子单位（不能由元素本身组成）

一个具体的例子是：

```
op1 (op2 (t1 t2) t3) 
```

我想在树状结构中解析它（分层）

```
op1
 op2
  t1
  t2
 t3 
```

假设 op1 是树的根，op2 是 op1 的左子，t3 是 op1 的右子。t1 和 t2 分别是 op2 的子子项。

我怎样才能在Java中做到这一点？具有挑战性的部分是生成的树不能是二叉树。一个节点可以有任意数量的子节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:35:04.850

如果您不能使用 JavaCC，那么您可以查看[StringTokenizer](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String,%20boolean%29)类。你可以在几次通行证中完成。首先，对括号进行标记，创建一个第一遍树。然后，您可以遍历树并在空间上标记化，为那些只有叶子而没有嵌套树的节点进一步充实树节点（即没有包含括号的子节点）

`op1 (op2 (t1 t2) t3)`当在 '(' 和 ')' 上进行标记时，将给出标记（假设您要求包含标记）`op1, (, op2, (, t1 t2, ), t3, )` 从中您可以遍历标记。你知道你的第一个是父母。其次是父母，所以你知道你有一个复杂的孩子。所以你的树是：

```
op1
  op2 
```

然后你打了另一个paren，意思是一个新的复杂的孩子。第二个开放括号之后的下一个标记是`t1 t2`你的树

```
op1
  op2
    t1 t2 
```

然后你得到一个接近的括号标记，所以你结束了 op2 的复杂子代，你的下一个标记是 op1 的下一个子代​​，这意味着你的树看起来像

```
op1
  op2
    t1 t2
t3 
```

最后，您点击了最后一个关闭括号，它结束了 op1 的复杂子代。

现在您可以遍历树，在空间上拆分子节点。第一个节点是 op1，所以没有分裂，与 op2 相同。't1 t2' 分裂成 't1' 和 't2' 所以你最终将该节点分成两个所以你的树看起来像

```
op1
  op2
    t1
    t2
  t3 
```

您可能可以轻松地将空间拆分放入第一种方法中，这样您就不必两次遍历树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:27:38.903

一般来说，这种解析器很容易用[JavaCC](http://javacc.java.net/)创建，只需创建简单的语法（做一些研究的主题 - 查看这个[链接](http://javacc.java.net/doc/simpleREADME.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:40:33.383

首先，我建议您将此问题拆分为两个子问题，第一个 - 解析输入，第二个 - 创建树。

您可以对第一个使用字符串标记器和堆栈，您可以跳过“op1”，因为通常您的问题看起来像 ((t1 t2) t3)。因此，当您当前的元素将是 = ")" 时，您应该从堆栈中弹出元素，直到您到达 "(" 并从该元素中创建新节点并将其放回堆栈。另一个问题是您的数据类型是什么将存储在堆栈中，显然它不会是字符串，因此您可能必须创建一些可以放置在那里的元素层次结构，例如 StringElement、NodeElement、StartQuoteElement。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T20:51:37.677

只是为了好玩，一个非常快速且非常肮脏且可证明有问题的解决方案。嘿，至少它解决了你的例子！！！！

```
package parser;

import java.util.Collection;
import java.util.ArrayList;
import java.util.Arrays;

/**
 *
 * @author gpeche
 */
public class Parser {

    private static abstract class Node {
        String name;

        String getName() { return name; }

        abstract boolean isComposite();

        Node(String name) { this.name = name; }        
    }

    private static class PrimitiveNode extends Node { 
        @Override boolean isComposite() { return false; }

        PrimitiveNode(String name) { super(name); }

        @Override public String toString() { return "PrimitiveNode(\"" + name + "\")"; }        
    }

    private static class CompositeNode extends Node { 
        Collection<Node> children = new ArrayList<Node>();

        void addChild(Node childNode) { children.add(childNode); }

        Collection<Node> getChildren() { return new ArrayList<Node>(children); }

        @Override boolean isComposite() { return false; }

        CompositeNode(String name) { super(name); }

        @Override public String toString() { 
            StringBuilder sb = new StringBuilder();
            sb.append("CompositeNode(\"");
            sb.append(name);
            sb.append("\") { ");
            boolean isFirstNode = true;
            for (Node node: children) {
                if (!isFirstNode) {
                    sb.append(", ");
                }
                sb.append(node.toString());
                isFirstNode = false;                   
            }
            sb.append(" }");
            return sb.toString();
        }        
    }

    // Parser state
    int pos = 0;

    String[] tokens;

    static final String OPENING_PAR = "(";
    static final String CLOSING_PAR = ")";
    static final String OP_PLUS = "+";
    static final String OP_MINUS = "-";
    static final String OP_MULTIPLY = "*";
    static final String OP_DIVIDE = "/";
    static final String OP_MODULUS = "mod";
    static final String OP_INT_DIVIDE = "div";

    static final Collection<String> PARENTHESIS = Arrays.asList(OPENING_PAR, CLOSING_PAR);

    static final Collection<String> OPERATIONS = Arrays.asList( OP_PLUS,
                                                                OP_MINUS,
                                                                OP_MULTIPLY,
                                                                OP_DIVIDE,
                                                                OP_MODULUS,
                                                                OP_INT_DIVIDE);

    public Node parse(String treeRepresentation) {
        tokenize(treeRepresentation);
        return parseNode();
    }

    private void tokenize(String treeRepresentation) {
        treeRepresentation = treeRepresentation.replace("(", " ( ");
        treeRepresentation = treeRepresentation.replace(")", " ) ");
        tokens = treeRepresentation.split("\\s+");
    }

    private Node parseNode() {
        // check that current token is not a "syntax" token
        String currentToken = tokens[pos];
        if (PARENTHESIS.contains(currentToken)) {
            throw new IllegalArgumentException(String.format("Invalid token %d, expected identifier. got %s", pos + 1, currentToken));
        }

        boolean isComposite = currentToken != null && 
                              (currentToken.startsWith("op") ||  // Accept identifiers as operations (function support :P)
                               OPERATIONS.contains(currentToken));
        return isComposite? parseComposite() : parsePrimitive();
    }

    private Node parseComposite() {
        CompositeNode composite = new CompositeNode(tokens[pos]);
        pos++;                

        if (!OPENING_PAR.equals(tokens[pos])) {
            throw new IllegalArgumentException(String.format("Invalid token %d, expected '(', got %s", pos + 1, tokens[pos]));
        } else {
            // Ignore opening parenthesis
            pos++;
        }

        boolean nextIsIdentifier;
        do {
            composite.addChild(parseNode());
            nextIsIdentifier = !PARENTHESIS.contains(tokens[pos]);            
        } while (nextIsIdentifier);

        if (!CLOSING_PAR.equals(tokens[pos])) {
            throw new IllegalArgumentException(String.format("Invalid token %d, expected ')', got %s", pos + 1, tokens[pos]));
        } else {
            pos++;
        }

        return composite;
    }

    private Node parsePrimitive() {
        // Create primitive node and advance position
        Node result = new PrimitiveNode(tokens[pos]);
        pos++;
        return result; 
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Parser parser = new Parser();
        Node parsedNode = parser.parse("op1 (op2 (t1 t2) t3)");
        System.out.println(parsedNode.toString());
    }
} 
```

# winforms - Winforms 用户输入验证

> ID：12483606
> 
> 赞同：1
> 
> 时间：2012-09-18T19:24:23.253
> 
> 标签：winforms, entity-framework, validation

我的大部分工作是使用 winforms 的 SQL 数据库驱动的桌面应用程序。我现在使用实体框架 - Code First 与典型的程序 (UI)、模型和数据访问层。我一直使用 errorprovider 在 UI 级别进行数据验证。使用实体框架，我现在可以进行一些验证，例如实体上的必需条目。我仍然需要在 UI 级别进行一些验证。问题 1：这样拆分验证可以还是不建议？问题 2：我应该在每个表单类中进行表单验证还是让所有表单都使用单独的验证类？

# java - 每次更改时自动更新 jTextFields 的总和（Java）

> ID：12483608
> 
> 赞同：4
> 
> 时间：2012-09-18T19:24:37.417
> 
> 标签：java, swing, jtextcomponent, documentlistener

作为我学习java的一部分，我使用netbeans制作了一个jForm，其中包含三个jTextFields供用户输入一些数字，然后这些数字的总和显示在另一个jTextField中。当然，这非常简单，但我希望能够在没有任何按钮的情况下做到这一点。每次修改 3 个文本字段中的任何一个时，我都不知道如何“更新”总和。谁能帮我？

这是我的代码（表单是在设计模式下使用 netbeans 完成的）：

```
package sumfields;

public class Frame extends javax.swing.JFrame {

    public Frame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        n1 = new javax.swing.JTextField();
        n2 = new javax.swing.JTextField();
        n3 = new javax.swing.JTextField();
        sum = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("n1");

        jLabel2.setText("n2");

        jLabel3.setText("n3");

        jLabel5.setText("result");

        jButton1.setText("Opperate");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel1)
                            .addComponent(jLabel2)
                            .addComponent(jLabel3)))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jLabel5)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(30, 30, 30)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap())
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(n1, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(n2, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(n3, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(32, 32, 32)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(n1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel1))
                        .addGap(10, 10, 10)
                        .addComponent(n2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel2))
                .addGap(20, 20, 20)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(n3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1)
                    .addComponent(jLabel5))
                .addContainerGap(38, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        int r=Integer.parseInt(n1.getText())+Integer.parseInt(n2.getText())+Integer.parseInt(n3.getText());
        sum.setText(""+r);

    }

    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Frame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JTextField n1;
    private javax.swing.JTextField n2;
    private javax.swing.JTextField n3;
    private javax.swing.JTextField sum;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:29:30.710

您正在寻找的是[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)。

为您的每个注册一个侦听器`JTextFields` `n1`，`n2`并`n3`调用您的方法`jButton1ActionPerformed`来更新结果字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T19:41:18.437

如`@Reimeus`建议的那样，您需要将文档侦听器添加到每个文本字段。由于您在`jButton1ActionPerformed()`方法中执行添加，因此每当您的文本字段发生更改时，我都会通知侦听器调用此方法。

**注意**：*根据评论，我更新了我的代码以仅包含一个`DocumentListener`，还添加了一个`DocumentFilter`以仅接受数字输入。我还删除了原始代码中存在的按钮以执行求和*

这是您更新的代码：

```
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class Frame extends javax.swing.JFrame {

    public Frame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        n1 = new javax.swing.JTextField();
        n2 = new javax.swing.JTextField();
        n3 = new javax.swing.JTextField();
        sum = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();

        DocumentListener documentListener = new DocumentListener() {

            @Override
            public void removeUpdate(DocumentEvent e) {
                performSummation(null);
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                performSummation(null);
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
            }
        };

        DocumentFilter numericFilter = new DocumentFilter(){

            @Override
            public void insertString(FilterBypass fb, int offset,
                    String string, AttributeSet attr)
                    throws BadLocationException {
                fb.insertString(offset, string.replaceAll("[^\\d]", ""), attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length,
                    String text, AttributeSet attrs)
                    throws BadLocationException {

                fb.replace(offset, length, text.replaceAll("[^\\d]", ""), attrs);
            }
        };

        ((AbstractDocument) n1.getDocument()).setDocumentFilter(numericFilter);
        ((AbstractDocument) n2.getDocument()).setDocumentFilter(numericFilter);
        ((AbstractDocument) n3.getDocument()).setDocumentFilter(numericFilter);

        n1.getDocument().addDocumentListener(documentListener);
        n2.getDocument().addDocumentListener(documentListener);
        n3.getDocument().addDocumentListener(documentListener);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("n1");
        jLabel2.setText("n2");
        jLabel3.setText("n3");
        jLabel5.setText("result");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel1)
                            .addComponent(jLabel2)
                            .addComponent(jLabel3)))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jLabel5)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(30, 30, 30)
                        .addContainerGap())
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(n1, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(n2, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(n3, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(32, 32, 32)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(n1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel1))
                        .addGap(10, 10, 10)
                        .addComponent(n2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel2))
                .addGap(20, 20, 20)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(n3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5))
                .addContainerGap(38, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void performSummation(java.awt.event.ActionEvent evt) {
        int total = 0;
        if(n1.getText().trim().length() > 0){
            try{
                total += Integer.parseInt(n1.getText());
            }catch(NumberFormatException nbx){
            }
        }

        if(n2.getText().trim().length() > 0){
            try{
                total += Integer.parseInt(n2.getText());
            }catch(NumberFormatException nbx){
            }
        }

        if(n3.getText().trim().length() > 0){
            try{
                total += Integer.parseInt(n3.getText());
            }catch(NumberFormatException nbx){
            }
        }

        sum.setText(""+total);

    }

    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Frame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JTextField n1;
    private javax.swing.JTextField n2;
    private javax.swing.JTextField n3;
    private javax.swing.JTextField sum;
    // End of variables declaration
} 
```

几个指针：

*   永远不要相信来自用户的输入。用户可能会输入不正确的值（*比如不是 Integer*的值）。因此，验证您的输入并检查是否可以实际解析输入始终是一个好主意。记住这一点，我已经更新了你的`jButton1ActionPerformed()`方法

*   另一种选择是使用[格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T20:31:03.723

这种替代[方法](https://stackoverflow.com/a/8703807/230513)使用 a`PropertyChangeListener`和 a`FocusListener`对`update()`使用 的值求和`JFormattedTextField`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T00:33:57.843

您可以使用焦点侦听器，也可以对输入使用动作侦听器[`JTextField`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html/)

# architecture - 推送事件的缩放 - 最佳拓扑？

> ID：12483609
> 
> 赞同：3
> 
> 时间：2012-09-18T19:24:38.157
> 
> 标签：architecture, scalability, topology

我已经构建了一个 TCP 服务器来处理来自客户端的 RPC（请求/回复）类型的请求，但它也允许服务在临时时间下推事件。

如果我将来需要扩展，RPC 的东西很容易，比如 Web 基础设施，我只需添加更多节点和负载平衡。

为了扩展推送消息，我需要所有服务器进行协调，因为订阅事件的客户端可以在任何服务器上。

我的选择是：

1.  使用 UDP 多播/广播（例如 emcaster）将事件广播到所有服务器
2.  使用 TCP 将服务器完全互连
3.  发送所有事件的中央服务器，所有工作服务器都连接到该服务器
4.  [3] 但用几层来形成一棵树

我倾向于选择 [1]，因为它很简单，并且可能适用于多达 20-30 个节点。对于不同范围的 N（其中 N 是节点数）的最佳策略是什么，是否达成共识？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:05:36.823

您应该查看 zeromq 指南。如果您需要该 udp 广播来补偿丢失的数据包，那么 zeromq 将是一个不错的选择。它是为提高效率而构建的轻量级消息传递接口。这是 C（库语言）和 python 的介绍指南：

C: [http://zguide.zeromq.org/page:all](http://zguide.zeromq.org/page:all)
Python: [http://zguide.zeromq.org/py:all](http://zguide.zeromq.org/py:all)

这些示例还被翻译成 C++、C#、CL、Erlang、F#、Felix、Haskell、Java、Objective-C、Ruby、Ada、Basic、Clojure、Go、Haxe、Node.js、ooc、Perl、Scala 的包装器、Lua、Haxe 和 PHP。

- - 更新 - -

抱歉，这些链接似乎并未将所有代码示例从 C 更改为 python，但您可以获得替代语言翻译...

专门针对您的推送拓扑，他们有一个关于如何在 zeromq 中实现 pub/sub 的页面：[http ://www.zeromq.org/whitepapers:0mq-3-0-pubsub](http://www.zeromq.org/whitepapers:0mq-3-0-pubsub)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:43:30.467

在不了解更多细节的情况下，很难建议哪种策略是最佳策略。也许可能有帮助的是列出每个项目要考虑的一些事项：

1.  UDP广播

    *   正如您所提到的，这将是最容易实现的。
    *   为什么限制 20-30 个节点？该限制是否符合您的要求？如果是这样，那就去吧。
    *   UDP广播消息是否会受到防火墙等NW元素的影响？
2.  互连 TCP NW

    *   此选项似乎是配置和维护一致的 IP 地址列表的维护噩梦。
    *   特定服务器如何知道下一个将消息发送到哪个服务器？这种逻辑可能会变得复杂。
3.  中央服务器

    *   就个人而言，我认为这是 [1.] 之后的第二种可能的解决方案。
    *   这个中央服务器可能需要一些相当复杂的处理才能知道将消息发送到哪里。
4.  有树的中央服务器

    *   配置和维护的噩梦
    *   使用此解决方案，4 中提到的复杂逻辑将变得更糟。

就个人而言，我会查看每种解决方案的优缺点，并考虑每种解决方案如何满足需求。希望这一课能让你更容易做出决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:12:04.010

尝试在中间使用一些已经发明的开源软件。我当时只能想到一个，但我 900% 肯定市场上会有成堆的模仿者。

Redis 是一个很好的例子，可扩展、快速并且已经有很多玩具、插件和客户端。使用或多或少 3 行代码，您可以实现发布者/订阅者的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T01:32:02.033

您的客户是唯一可识别的吗？如果是这样，您可以将它们划分到各个服务器上，并将连接到哪个服务器的逻辑（UNIQUE_ID mod N？）集成到每个客户端/服务器中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T01:20:56.547

我会选择#3 - 中央服务器。它将比其他选项更好地扩展，并且可以设计为像路由器表一样运行，以确保仅在必要时向服务器生成流量。可以即时添加其他服务器节点。

出于好奇，你用什么语言开发你的服务器？

# c++ - 使用 Valgrind 检查时，Libzip 示例包含未初始化的值

> ID：12483612
> 
> 赞同：7
> 
> 时间：2012-09-18T19:24:41.370
> 
> 标签：c++, zip, valgrind

我一直在使用 libzip 来处理 zip 文件，并且我的代码基于 rodrigo 对[这个问题](https://stackoverflow.com/questions/10440113/simple-way-to-unzip-a-zip-file-using-zlib)的回答中的示例。这是他的代码，供快速参考：

```
#include <zip.h>

int main()
{
    //Open the ZIP archive
    int err = 0;
    zip *z = zip_open("foo.zip", 0, &err);

    //Search for the file of given name
    const char *name = "file.txt";
    struct zip_stat st;
    zip_stat_init(&st);
    zip_stat(z, name, 0, &st);

    //Alloc memory for its uncompressed contents
    char *contents = new char[st.size];

    //Read the compressed file
    zip_file *f = zip_fopen(z, "file.txt", 0);
    zip_fread(f, contents, st.size);
    zip_fclose(f);

    //And close the archive
    zip_close(z);
} 
```

我将随后从 Valgrind 得到的错误追溯到这段代码——当使用“zip_fopen()”打开压缩的“file.txt”时，它抱怨一个未初始化的值。

```
==29256== Conditional jump or move depends on uninitialised value(s)
==29256==    at 0x5B4B290: inflateReset2 (in /usr/lib/libz.so.1.2.3.4)
==29256==    by 0x5B4B37F: inflateInit2_ (in /usr/lib/libz.so.1.2.3.4)
==29256==    by 0x4E2EB8C: zip_fopen_index (in /usr/lib/libzip.so.1.0.0)
==29256==    by 0x400C32: main (main.cpp:24)
==29256==  Uninitialised value was created by a heap allocation
==29256==    at 0x4C244E8: malloc (vg_replace_malloc.c:236)
==29256==    by 0x5B4B35B: inflateInit2_ (in /usr/lib/libz.so.1.2.3.4)
==29256==    by 0x4E2EB8C: zip_fopen_index (in /usr/lib/libzip.so.1.0.0)
==29256==    by 0x400C32: main (main.cpp:24)
==29256==
==29256==
==29256== HEAP SUMMARY:
==29256==     in use at exit: 71 bytes in 1 blocks
==29256==   total heap usage: 26 allocs, 25 frees, 85,851 bytes allocated
==29256==
==29256== 71 bytes in 1 blocks are definitely lost in loss record 1 of 1
==29256==    at 0x4C24A72: operator new[](unsigned long) (vg_replace_malloc.c:305)
==29256==    by 0x400BEE: main (main.cpp:19) 
```

我看不到这段代码中未初始化的值来自哪里。任何人都可以追踪这一点，还是 libzip 本身的问题？我应该切换到另一个 zip 库吗？例如 Minizip？

编辑：这 71 个字节是 file.txt 的内容，最后读取的 intagged`delete[] contents;`将消除这一点。

（我会对原始答案发表评论以引起对该问题的关注，但我没有必要的代表。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T21:26:03.417

你让我看起来:)

是的，这是 zlib 内部的错误（由 libzip 使用），因为内存的分配和使用都在`inflateInit2_`同一个调用中。您的代码甚至没有机会访问该内存。

我可以使用 zlib 1.2.3 重复该问题，但在 1.2.7 中不再出现。我没有可用的 1.2.3 的代码，但如果你正在查看它，我会检查它的初始化`state`以及它在内部的使用方式`inflateReset2`。

编辑：追查问题，我下载了zlib（1.2.3.4）的Ubuntu源包，违规行是；

```
if (state->wbits != windowBits && state->window != Z_NULL) { 
```

`wbits`在此之前没有初始化，并且会导致警告。奇怪的是，原来的 zlib 1.2.3 或 1.2.4 都没有这个问题，这似乎是 Ubuntu 独有的。1.2.3甚至没有inflateReset2这个功能，1.2.4是对的；

```
if (state->window != Z_NULL && state->wbits != (unsigned)windowBits) { 
```

由于`window`之前已初始化为 Z_NULL，因此`wbits`不会发生未初始化的读取。

# javascript - $.fn.fancybox 和 $.fancybox 之间的区别

> ID：12483613
> 
> 赞同：0
> 
> 时间：2012-09-18T19:24:55.217
> 
> 标签：javascript, jquery, ajax, fancybox

请告诉我以上两者的区别。它们彼此有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:54:06.667

$.fn 是用于从 $("...") 创建的 jQuery 对象的原型。所以通过调用 .fn 您正在扩展默认值。

$ 是 jQuery 工厂和命名空间。

对于 Fancybox 2.0，“.fn”被删除。

# image - 如何对要插入 .jsp 的图像进行编码

> ID：12483615
> 
> 赞同：0
> 
> 时间：2012-09-18T19:25:12.773
> 
> 标签：image, jsp, binary, hex, oraclereports

我有一个.jsp，我需要添加一个十六进制的图像，但问题是我不知道图像必须首先采用哪种格式才能在转换后被识别。

这是代码：

`<image name="B_1">`

`<geometryInfo x="0.50000" y="0.00000" width="1.43750" height="0.68750"/>`

`<advancedLayout printObjectOnPage="allPage" basePrintingOn="anchoringObject"/>`

`<visualSettings fillPattern="transparent" fillBackgroundColor="black" linePattern="transparent" lineBackgroundColor="black"/>`

`<points>`

```
<point x="0.00000" y="0.00000"/>
      <point x="1.43750" y="0.68750"/>
      <point x="0.50000" y="0.00000"/>
      <point x="1.43750" y="0.68750"/>
    </points>

<binaryData encoding="hexidecimal" dataId="image.B_1"> 
```

`here goes the encoded image (which format should it be?... .tif, .bmp, .jsp, .gif?`

`</binaryData>`

`</image>`

任何事情都会有所帮助！

谢谢！

# android - 如何将图库按钮添加到有意打开的相机？

> ID：12483617
> 
> 赞同：2
> 
> 时间：2012-09-18T19:25:16.263
> 
> 标签：android, android-intent, android-camera, android-camera-intent

在我的应用程序中，用户可以使用相机拍照。我使用意图开始它：

```
Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

现在，当打开的相机缺少图库按钮时，该按钮允许用户从他的 SD 卡中选择一张现有图像。是否可以显示此按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:18:36.053

如果您真的希望在用户处于相机视图时有一个链接到图库的按钮，那么您可能需要创建一个自定义相机活动。Android 文档对如何开始有很好的解释：http: [//developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:40:49.677

您无法真正更改相机意图必须提供的东西，如果您确实找到了相机应用程序可以让您访问画廊的设备，我不会依赖它。

我建议每当您的用户点击按钮或启动相机意图时，启动一个对话框，要求您选择“新照片”或“现有照片”。如果他们选择现有，则启动图库意图。

这是画廊意图的一个非常好的教程。

[http://www.helloandroid.com/tutorials/gallery-intent-tutorial](http://www.helloandroid.com/tutorials/gallery-intent-tutorial)

祝你好运！

# grails - grails gradle 插件

> ID：12483623
> 
> 赞同：3
> 
> 时间：2012-09-18T19:25:52.727
> 
> 标签：grails, gradle, grails-2.1

我是 Grails/Gradle 的新手。我正在尝试编写一个简单的 build.gradle 来构建我的示例项目。我有一个任务“构建”，它在内部应该按照给定的顺序执行以下操作。

1.  干净的
2.  编译
3.  运行测试
4.  创建一个战争文件

我正在使用这里提到的 gradle/grails 插件和 build.gradle，[Gradle/Grails 插件](https://stackoverflow.com/questions/12027313/gradle-grails-application/12170741#12170741)。该插件默认提供清理、测试和组装任务。使用这个插件是我的 build.gradle 的样子，

```
import org.grails.gradle.plugin.GrailsTask

buildscript {
        repositories {
            mavenCentral()
            mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo' 
        }
        dependencies {
            classpath "org.grails:grails-gradle-plugin:1.1.1-SNAPSHOT"
        }
}
repositories {
    mavenCentral()
    mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo' 
}
version = "1.0"
grailsVersion = "2.1.0"
apply plugin: "grails"
dependencies {
    ['dependencies', 'resources', 'core', 'hibernate', 'plugin-datasource', 'plugin-domain-class', 'plugin-tomcat', 'plugin-services'].each { plugin ->
        compile "org.grails:grails-$plugin:2.1.0"
    }
    bootstrap "org.codehaus.groovy:groovy-all:1.8.7"
}

task build (dependsOn: [clean,test,assemble]) {     
println "building the project..." } 
```

从命令提示符执行“gradle build”时，我遇到了以下异常。

```
12:03:28.631 [ERROR] [org.gradle.BuildExceptionReporter] Caused by: java.lang.Un
satisfiedLinkError: Native Library C:\Users\smore\AppData\Local\Temp\jline_.dll
already loaded in another classloader
12:03:28.635 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Windows
Terminal.loadLibrary(WindowsTerminal.java:322)
12:03:28.638 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Windows
Terminal.initializeTerminal(WindowsTerminal.java:240)
12:03:28.642 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Termina
l.setupTerminal(Terminal.java:75)
12:03:28.646 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Termina
l.getTerminal(Terminal.java:26)
12:03:28.649 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Console
Reader.<init>(ConsoleReader.java:174)
12:03:28.653 [ERROR] [org.gradle.BuildExceptionReporter]        at jline.Console
Reader.<init>(ConsoleReader.java:169)
12:03:28.657 [ERROR] [org.gradle.BuildExceptionReporter]        at grails.build.
logging.GrailsConsole.createConsoleReader(GrailsConsole.java:167)
12:03:28.660 [ERROR] [org.gradle.BuildExceptionReporter]        at grails.build.
logging.GrailsConsole.<init>(GrailsConsole.java:133)
12:03:28.664 [ERROR] [org.gradle.BuildExceptionReporter]        at grails.build.
logging.GrailsConsole.createInstance(GrailsConsole.java:267)
12:03:28.668 [ERROR] [org.gradle.BuildExceptionReporter]        at grails.build.
logging.GrailsConsole.getInstance(GrailsConsole.java:244)
12:03:28.672 [ERROR] [org.gradle.BuildExceptionReporter]        ... 71 more
12:03:28.675 [ERROR] [org.gradle.BuildExceptionReporter]
12:03:28.679 [LIFECYCLE] [org.gradle.BuildResultLogger]
12:03:28.683 [LIFECYCLE] [org.gradle.BuildResultLogger] BUILD FAILED 
```

这是正确的方法吗，任何帮助将不胜感激。

谢谢，交换。

# php - 获取用户的推文数量

> ID：12483626
> 
> 赞同：0
> 
> 时间：2012-09-18T19:26:04.810
> 
> 标签：php, twitter, count, tweets

有没有办法从 Twitter 用户那里获取推文总数？我只想显示推文的数量，我尝试过这样，但我总是得到 0：

```
<?php
$twit = file_get_contents('http://twitter.com/users/show/matejlatin.xml');
$begin = '<statuses_count>'; $end = '</statuses_count>';
$page = $twit;
$parts = explode($begin,$page);
$page = $parts[1];
$parts = explode($end,$page);
$tcount = $parts[0];
if($tcount == '') { $tcount = '0'; } 
echo '<h3 id="tweets">'.$tcount.'</h3>';  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:59:29.293

Twitter 结果 ( `$twit`) 是否符合您的预期？如果 Twitter API 返回错误的结果，您将无法显示正确的内容。

但是，您最好使用另一个端点。[Twitter 将在 2012 年 9 月 25 日删除很多端点，](https://dev.twitter.com/discussions/10803)并且您的端点 ( `GET http://twitter.com/users/:user_name_or_id.xml`) 计划在 6 天内删除，因为它不在**api** .twitter.com 上并且它不包含版本号（`/1`我猜是你） . 你的 bug 现在可能是由于这个**，但在 6 天后它肯定会成为它的原因之一**。

因此，将您的端点更改为以下之一：

*   `GET https://api.twitter.com/1.1/users/show.json`（[文档](https://dev.twitter.com/docs/api/1.1/get/users/show)）。这是 API 的（有争议的）1.1 版本使用的端点，它将是未来唯一可用的端点。
*   `GET http://api.twitter.com/1/users/show.format`（[文档](https://dev.twitter.com/docs/api/1/get/users/show)）。使用 1.0 版本的 Twitter API 将在不到 6 个月的时间内删除此端点。
*   `GET http://api.twitter.com/1/users/:user_name_or_id.format`（[文档](https://dev.twitter.com/docs/api/1/get/users/show)）。使用 1.0 版本的 Twitter API 将在不到 6 个月的时间内删除此端点。

# mongodb - MongoDB 通过 Mongoose JS - findByID 是什么？

> ID：12483632
> 
> 赞同：73
> 
> 时间：2012-09-18T19:26:11.727
> 
> 标签：mongodb, mongoose

我正在用 ExpressJS、PassportJS、MongoDB 和 MongooseJS 编写一个 NodeJS 服务器。我只是设法让 PassportJS 使用通过 Mongoose 获得的用户数据进行身份验证。

但要让它工作，我必须使用如下所示的“findById”函数。

```
var UserModel = db.model('User',UserSchema);

UserModel.findById(id, function (err, user) { < SOME CODE > } ); 
```

`UserModel`是猫鼬模型。我之前声明了模式`UserSchema`。所以我想`UserModel.findById()`是猫鼬模型的一种方法吗？

**问题**

有什么作用`findById`，是否有相关文档？我用谷歌搜索了一下，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-09-18T19:34:26.103

`findById`是 Mongoose 提供的模型上的一种便捷方法，用于通过其 _id 查找文档。它的文档可以在[这里](http://mongoosejs.com/docs/api.html#model_Model.findById)找到。

例子：

```
// Search by ObjectId
var id = "56e6dd2eb4494ed008d595bd";
UserModel.findById(id, function (err, user) { ... } ); 
```

从功能上讲，它与调用相同：

```
UserModel.findOne({_id: id}, function (err, user) { ... }); 
```

请注意，Mongoose 会将提供的`id`值转换`_id`为模式中定义的类型（默认为 ObjectId）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-23T06:56:06.370

如果 id 的模式不是**ObjectId**类型，则不能使用函数操作： **findbyId()**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-28T23:25:47.887

与 find() 可以返回 1 个或多个文档相反，findById() 只能返回 0 或 1 个文档。文档可以被认为是记录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-11T15:53:38.700

我是 Mongoose 的维护者。`findById()`是猫鼬模型的内置方法。`findById(id)`等效于`findOne({ _id: id })`，但有一点需要注意：`findById()`参数为 0 时等效于`findOne({ _id: null })`.

您可以阅读有关[`findById()`Mongoose 文档](https://mongoosejs.com/docs/api.html#model_Model.findById)和[本`findById()`教程](https://masteringjs.io/tutorials/mongoose/find-by-id)的更多信息。

# javascript - 未捕获的 ReferenceError，我的函数未定义

> ID：12483633
> 
> 赞同：0
> 
> 时间：2012-09-18T19:26:19.507
> 
> 标签：javascript, jquery

我正在创建一个动态滚动 div，它在 Jsfiddle 上运行良好，如此处所示 --> [http://jsfiddle.net/9zXL5/19/embedded/result/](http://jsfiddle.net/9zXL5/19/embedded/result/)但在浏览器上我得到：

> 未捕获的类型错误：无法将属性“onscroll”设置为 null

所以然后我添加`$(document).ready(function (){`到我的代码中并得到了

> 未捕获的 ReferenceError：未定义 yHandler

我不明白为什么我会收到这些错误，但它在 jsfiddle 上流畅。如果有人能告诉我我不理解或遗漏的内容，我将不胜感激。有问题的代码如下

```
var movelist = document.getElementById('movelist');
    $(document).ready(function (){
    function  yHandler (){
        var contentHeight = movelist.scrollHeight;
        var yOffset = movelist.clientHeight;
        var y = yOffset + movelist.scrollTop;
        if(y >= contentHeight){
            movelist.innerHTML += '<div class ="newData">hey look at me</div>';
        }
    }
});
movelist.onscroll = yHandler; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:27:59.273

放

```
var movelist = document.getElementById('movelist'); 
```

和

```
movelist.onscroll = yHandler; 
```

在您的 document.ready 调用中。

或者，摆脱 document.ready 调用（无论如何，您似乎没有任何 jQuery）并将您的代码放在文档末尾的脚本块中，位于结束 body 标记之前。

**[jsFiddle 示例](http://jsfiddle.net/j08691/9zXL5/20/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:28:09.943

您需要在标签之外定义您的功能 `$(document).ready(function (){...});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:29:32.663

它在你的小提琴中工作，因为一切都在同一个范围内。你`movelist`在你的`$(document).ready`. 将`var movielist = ...`和移动`movielist.onscroll = yHandler;`到您的`$(document).ready`.

您还可以将您的`yHandler`功能移到您的`$(document).ready`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:30:40.977

您应该将所有代码移动到 onload 处理程序中

```
$(document).ready(function (){
    var movelist = document.getElementById('movelist');
    function  yHandler (){  
        var contentHeight = movelist.scrollHeight;
        var yOffset = movelist.clientHeight;
        var y = yOffset + movelist.scrollTop;

        if(y >= contentHeight){
            movelist.innerHTML += '<div class ="newData">hey look at me</div>';
        }          
    }
    movelist.onscroll = yhandler
}); 
```

现在您`yhandler`与使用它的地方在同一范围内。在您的示例中，它被定义为内部函数，并且您试图从函数外部访问它。定义内部函数时，它们就像局部变量一样，只能由函数本身访问。

# security - 如何隐藏 PowerShell 模块中的单个函数？

> ID：12483634
> 
> 赞同：0
> 
> 时间：2012-09-18T19:26:20.340
> 
> 标签：security, powershell, code-access-security

我有一个模块，其中包含一个带有一些应该保护的私有数据的函数。如果可能的话，我不希望不断编译整个模块的麻烦。

我希望能够调用该函数并从中获取信息，但我需要将此脚本放在可以访问它的各种机器上，并且代码由不应该拥有用于派生输出的信息的人读取.

我看到了一些关于编译 PowerShell 脚本的东西。编译后，它们是否可以作为模块提供的命令包含在内？

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:24:58.067

没有好的方法可以做到这一点，特别是如果您对麻烦的容忍度如此之低，以至于编译 C# 模块是不可能的。

如果您的代码在脚本中，那么即使您混淆了秘密数据（可能使用 base64 编码或其他方式），您也需要某种去混淆代码，用户当然可以看到这些代码。然后他们可以简单地自己去混淆秘密。或者在私有函数中设置一个断点，看看他们想要什么。

即使您编译 C# cmdlet，逆向工程仍然非常容易。像 Reflector 这样的工具几乎可以向您展示任何已编译程序集的源代码。

因此，除非您愿意投资构建一个完整的加密解决方案，否则用户将能够轻松查看您的秘密，如果他们愿意的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:51:44.767

基本的答案是 PowerShell 从来都不是为混淆而设计的。没有办法开箱即用地保护您的代码。在某种程度上，这是非常有意的——我们希望人们阅读、验证和利用/扩展代码以获得最大的可重用性。

正如拉特金所建议的那样。最好的方法是使用 c# 编译代码——但即使这样也可以使用反射来查看。[http://blogs.msdn.com/b/ericgu/archive/2004/02/24/79236.aspx](http://blogs.msdn.com/b/ericgu/archive/2004/02/24/79236.aspx)提供了一些关于如何混淆 C# 代码的提示。

如果您的代码具有商业敏感性，那么您需要确定敏感程度并采取相应措施。将您的代码转换为 C# 并不难（假设您有 VS 并且知道 C#！），虽然建议在 C++ 中编码然后使用互操作调用它似乎很难，但这完全取决于您所保护的代码的价值. 所以如果代码真的很敏感，你有选择，但它们并不容易。

抱歉，如果这不是您想要的答案。

# ajax - ExtJS Combobox 发布 hiddenName 值

> ID：12483636
> 
> 赞同：2
> 
> 时间：2012-09-18T19:26:26.673
> 
> 标签：ajax, extjs, combobox, extjs4.1

我试图让 ExtJS 组合框返回值而不是显示值。

这是我的问题。我正在使用 ajax 来获取组合框字段的数据，同时使用 getForm().load 来加载组合框的选定值。在模型中，我返回了一个显示值和代码值。显示值分配给“名称”，代码值分配给“隐藏名称”。当我提交数据时，提交的是显示值而不是“隐藏名称”字段中的代码值。

更改组合框的选择后，正在提交代码值。

这是代码：

```
{
            xtype: 'combobox',
            fieldLabel: 'Type',
            name: 'DataType',
            hiddenName: 'DataTypeCde',
            store: Ext.create('Ext.data.JsonStore', {
                proxy: {
                    type: 'ajax',
                    actionMethods: { create: 'POST', read: 'POST', update: 'POST', destroy: 'POST' },
                    url: '@Url.Content("~/{URL}/DataType")',
                    reader: {
                        type: 'json'
                    }
                },
                fields: ['Id', 'Name']
            }),
            valueField: 'Id',
            displayField: 'Name',
            typeAhead: true,
            mode: 'remote',
            emptyText: 'Select a data type...',
            anchor: '96%'
        }, 
```

另一件事是，当我将“名称”设置为“DataTypeCde”时，代码值会显示，但是一旦加载了组合框的 ajax 数据，显示值就会被显示值替换。

因此，我可以获取“hiddenName”来加载 DataTypeCde 值并将该值回发，或者获取组合框数据以在表单渲染上预加载。

有人可以指出是否有办法或我做错了什么来防止代码值被回发。

**更新：** *更新 4：（*添加 POST 响应示例）* *

让我更好地解释我想要实现的目标。

(1) 使用上面的代码将显示以下内容...如果 DataType = Shopping 和 DataTypeCde = SP 渲染后的组合框将显示 Shopping，这就是我想要的样子。但是，一旦我将此结果提交回控制器，就会返回“购物”而不是“SP”……这不是我想要的。

POST 响应示例...

> `id=1&DataType=Shopping`

(2) 将名称字段设置为“DataTypeCde”，这将是以下结果...如果 DataType = Shopping 和 DataTypeCde = SP 渲染后的组合框将显示 SP，这不是我想要的，因为我想显示文本不是代码。但是一旦我将结果提交回控制器，就会返回代码“SP”，这就是我的意图。

POST 响应示例...

> `id=1&DataTypeCde=SP`

(3) 使用第二种方法将name字段设置为“DataTypeCde”，我们将得到代码显示的结果，直到组合框数据被加载。因此，为了解决这个问题，我将“autoLoad”功能设置为 true，因此组合框数据将在渲染时自动加载。此时ExtJS会将显示的“SP”代码替换为“Shopping”的显示值。但是这个解决方案的一个问题是，要求所有的组合框在开始时加载会显着减慢页面加载速度。

POST 响应示例...

> `id=1&DataTypeCde=SP`

(Q) 我的问题是......有没有办法在不加载组合框数据的情况下为组合框设置显示值，但是让代码值而不是显示值被回发。

**更新2：**

很抱歉造成混淆，我忘了提到我正在使用带有 ExtJs 的 ASP.NET MVC4。在我提到将发布响应返回给控制器的情况下。我的意思是 MVC 控制器。我认为后端与这个问题无关。

**更新3：**

为了更全面地了解我的实现，这里是我用来加载表单的代码和数据示例。

```
 example2.getForm().load({
    url: '@Url.Content("~/{URL}/Data/")',
    params: {
        id: window.record.data['id']
    },
    method: 'POST'
}); 
```

上面加载了一个类似于这个的 json 对象的集合......

> `{"success":true,"data":{"id":"1","DataType":"Shopping","DataTypeCde":"SP"}}`

这是为组合框 ajax 数据的代码...

```
store: Ext.create('Ext.data.JsonStore', {
            proxy: {
                type: 'ajax',
                actionMethods: { create: 'POST', read: 'POST', update: 'POST', destroy: 'POST' },
                url: '@Url.Content("~/{URL}/DataType")',
                reader: {
                    type: 'json'
                }
            },
            fields: ['Id', 'Name']
        }), 
```

使用这样的结果 json 对象...

> `[{"Id":"SP","Name":"Shopping"}]`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:57:22.873

我不太确定你真正想要什么...

**[name](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-name)** *当在 form.submit() 中包含字段值时，它用作参数名称。如果未配置名称，则回退到 inputId。要防止字段包含在表单提交中，请设置 submitValue: false （这适用于任何字段类型）。*

**[hiddenName](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-hiddenName)** *将与组合的基础****值******同步的******基础隐藏****字段**的名称。*

 ********[valueField](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-valueField)** *基础字段的名称，其中包含要提交的值以及 name 属性。*

**[displayField](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-displayField)** *包含要显示的值的基础字段的名称。*

通过您的设置，您应该提交两个值：

`submitValue: true`

*   DataType 与 valueField 的值（*为了防止设置`submitValue: false`*）
*   DataTypeCde 与 displayField 的值（*为了防止删除`hiddenName`*）

**基于编辑的评论**

> ...将此结果提交回控制器...

提交给控制器是什么意思？你的问题听起来不常见，我认为你只是做错了......“购物”是你商店的 Name 字段的值，而 SD 是 Id 字段的值吗？

**编辑**

> 有没有办法在不加载组合框数据的情况下设置组合框的显示值

基本上不是......您可以设置 value 属性，该属性是显示的属性，但在这种情况下将是提交的属性。

> 但是让代码值而不是显示值被回发。

不，没有代码值。基本上有一个 valueField 将是该字段的值。

对于以下内容，我假设组合商店加载了以下值`{"id":"SP","Name":"Shopping"}`

该字段的行为类似于原生 HTML 字段，这意味着您在接收*值时具有**名称*和值。现在，当您使用 hiddenName 时，在您的情况下为*DataType*以及名称，在您的情况下为*DataTypeCde*，您可以设置此字段，从而显示服务。为什么 -> 该值会导致在商店内进行查找。如果未找到记录，则将显示密钥。这意味着如果您将此组合设置为没有值，则可以找到这将导致组合显示。***`DataType=SP``DataType=AP``AP`***

 ***你的回报

`{"success":true,"data":{"id":"1","DataType":"Shopping","DataTypeCde":"SP"}}`

包含重复数据。您应该只提交组合名称以及 valueField 值。它应该看起来像

`{"success":true,"data":{"id":"1","DataType":"SP"}}`

这将导致组合显示购物，因为它会自动在商店中查找键`SP`

**不要忘记：**

*   不建议使用字符串作为 Id 字段。
*   默认`idProperty`设置为`id`。在您的情况下，这可能会导致任何查找失败。我建议您将`idProperty`商店内阅读器设置为`idProperty: 'Id'`

    `reader: { type: 'json', idProperty: 'Id' }`*********

# sql - 多个 SQL Join 并覆盖

> ID：12483637
> 
> 赞同：1
> 
> 时间：2012-09-18T19:26:31.913
> 
> 标签：sql, database-performance, recursive-query

假设我有一个表示文档的表，它有一个复合主键：一个 id 和一个版本。一个文档的多个版本可以同时存在于表中。

```
create table document (id bigint not null, version int not null, 
    data varchar(255), primary key(id, version)); 
```

还有另一个包含视图层次结构的表。（在此示例中，我省略了外键和其他约束，但它们会适用）。

```
create table view (id bigint primary key, parent_id bigint); 
```

还有另一个表，其中包含每行将视图与一组文档相关联的行。假设 view_doc.view_id 和 view_doc.doc_id 存在唯一约束，因此给定文档在给定视图中可能不会出现多次。

```
create table view_doc (id bigint primary key, view_id bigint not null, 
    doc_id bigint not null, doc_version int); 
```

从逻辑上讲，视图包含它定义的所有文档/版本。子视图（具有非空 view.parent_id）包含其父视图中的所有文档/版本，以及本身的任何文档。如果在子视图及其父视图中定义了不同版本的文档，则只有在子视图中指定的该文档的版本应该是可见的。如果在具有 NULL doc_version 的子视图中指定了文档，则该文档应被视为不存在于该子视图中，即使它存在于其父视图中。

我想构建给定 view.id 的 SQL，它将为我提供视图中所有文档及其各自版本的列表，如上述规则所定义（无论它是否是子视图）。我知道这最终可能会导致递归查询，但如果这样可以简化事情，我也愿意接受严格的两级层次结构（换句话说，子视图的 parent_id 总是可以假定为空）。

我需要在 Oracle、DB2 和 SQL Server 中表示这一点。它不需要在所有三个数据库中都是完全相同的查询，尽管那肯定很好。

您将如何编写此查询以使其快速运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:40:08.920

不同的 DBMS 处理递归的方式是完全不同的。这是一个专门针对 SQL Server 的有效查询，不一定很快。（请注意，除非您应用查询提示，否则 sql server 将递归嵌套限制为 100 级）：

```
--Flatten views
;with thisView as (
    select ID, 0 as nestingLevel, parent_ID
    from #view
    where id = @viewID
union all
    select v.ID, tv.nestingLevel + 1 as nestingevel, v.parent_ID
    from #view v
        inner join thisView tv on v.ID = tv.parent_id
),--Determine documents/versions to present
docSets as (
    select doc_ID, doc_version, ROW_NUMBER() over(partition by doc_id order by nestingLevel) as docSequence
    from #view_Doc
        inner join thisView tv on view_id = tv.ID
)--filter documents
select *
from docSets
where docSequence = 1
    and doc_version is not null; 
```

您在问题的末尾提到了速度，但您没有提供任何必要的细节来确定实现速度的最佳方法是什么。在 Sql Server 中使用递归通常效率不高。此外，最有效的方法可能在 DBMS 之间有所不同。对于 Sql Server 2008，查找 HierarchyID 数据类型：[http ://www.codeproject.com/Articles/37171/HierarchyID-Data-Type-in​​-SQL-Server-2008](http://www.codeproject.com/Articles/37171/HierarchyID-Data-Type-in-SQL-Server-2008)

# asp.net-mvc - ASP.NET MVC 空参数

> ID：12483640
> 
> 赞同：0
> 
> 时间：2012-09-18T19:26:47.077
> 
> 标签：asp.net-mvc

我将一个`List<Listing>`对象传递给另一个操作方法，并使该方法使用参数调用 View。

出于某种原因，我传递的参数为空。

以下工作正常：

```
 public ActionResult SortListing(string categoryGuid)
    {
        var listingCategory = new ListingCategory();
        listingCategory = _tourismAdminService.GetByGuid<ListingCategory>(Guid.Parse(categoryGuid));
        var listings = new List<Listing>();

        foreach (var listing in _tourismAdminService.ListAllEntities<Listing>())
        {
            if (listing.CategoryId == listingCategory.Id)
            {
                listings.Add(listing);
            }
        }

        return RedirectToAction("Index", "Listing", listings);
    } 
```

下面显示了一个为空的参数。

```
 public ActionResult Index(List<Listing> listing)
    {
        var model = new ListListingsViewModel();
        IEnumerable<ListingCategory> categories = _service.ListAllEntities<ListingCategory>();

        if (categories != null)
        {
            model.Categories =
                categories.Select(
                    cat =>
                    new SelectListItem
                        {
                            Text =
                                cat.GetTranslation(stringA,
                                                   stringB).Name,
                            Value = cat.Guid.ToString()
                        }).ToList();
        }
        model.Listings = listing ?? _service.ListAllEntities<Listing>();

        return View(model);
    } 
```

**编辑**

错误信息：

具有键“SelectedCategoryGuid”的 ViewData 项属于“System.Guid”类型，但必须属于“IEnumerable”类型。

在：

```
@Html.DropDownListFor(
m => m.SelectedCategoryGuid, 
Model.Categories, 
"Select a Category", 
new {
    id = "hhh",
    data_url = Url.Action("SortListing", "Listing") 
}
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:30:25.203

[`RedirectToAction`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)方法向浏览器返回一个 Http 302 响应，这导致浏览器向指定的操作发出 GET 请求。

记住**HTTP 是无状态的。**你不能像那样传递如此复杂的对象。

您应该传递一个查询字符串（一个 Id）并再次获取第二个操作中的值，或者在调用之间将数据保存在持久性介质中。您可以考虑为此使用 Session 或`TempData`（会话是它的备份存储）。

[http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

**编辑：** *根据评论*。是的，您可以从第一个方法本身调用视图。下面的代码会将字符串集合传递给`Index`视图（index.cshtml）。

```
public ActionResult SortedList(string categoryGuid)
{
   var listings = new List<Listing>();
   //fill the collection from the data from your db
   return View("Index",listings)
} 
```

如果要将数据传递给不同控制器中的视图，可以在调用 View 方法时指定完整路径。

```
return View("~/Views/User/Details.cshtml",listings) 
```

假设您的视图被强输入到这样的列表`strings`中

```
@model List<string>
foreach(var item in Model)
{
 <p>@item</p>
} 
```

# c# - 为什么类似的命名空间类不共享 using 指令？

> ID：12483641
> 
> 赞同：0
> 
> 时间：2012-09-18T19:26:48.450
> 
> 标签：c#, namespaces

将新类添加到命名空间时，这就是我得到的（这是在 mvc3 项目中）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Foo.Models
{
 public class Bar
 {
 }
} 
```

在命名空间 Foo.Models 中还有其他类。但是，最好通过将内容放在不同的 .cs 位置来分隔内容。我认为这是相当标准的。我知道编译器无论如何都会发挥它的魔力来组合所有这些。这就是我的问题的来源。如果命名空间是稍后组合的，那么为什么需要始终重新定义类正在使用的内容？如果它已经在命名空间中的某个地方可用，那么是否有必要`using System;`在每个`.cs`文件中定义命名空间内的类？有人可以为我解释一下吗，也许还可以阐明一种可能的方式来实现这一点那些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:30:14.890

这些`using`语句的范围仅限于您正在使用的特定 .cs 文件。

它们只是在该类文件的上下文中提供了一个方便的快捷方式，允许您仅使用类的名称，而不是在您使用它们的任何地方完全限定类名称。

存在命名空间是因为不同的团队不可避免地会为不同的类使用相同的类名（我想知道有多少 Util 类）。

您的项目中可能有两个不同的类，它们想要使用具有相同名称的不同对象。在每个文件中拥有不同`using`语句的能力使您可以方便地做到这一点。

请注意，您始终可以编辑新类的模板，以在所有类中预填充`using`您需要的语句。

# php - 推特 php 状态/更新

> ID：12483645
> 
> 赞同：0
> 
> 时间：2012-09-18T19:27:25.847
> 
> 标签：php, twitter

我正在使用[这个 php 库](https://github.com/themattharris/tmhOAuth)发布推文。如何发布链接，使其显示为正确的链接？

当我使用 urlencode 时，我得到这个结果 http%3A%2F%2Flocalhost%2Fnew_poedu%2Fdefault%2Fride%2Fview%2F18。如果我不使用它，结果是`http://localhost/new_poedu/default/ride/view/13`，只是简单的文本而不是链接。

# java - @Nullable 被 guice 忽略

> ID：12483650
> 
> 赞同：1
> 
> 时间：2012-09-18T19:27:49.460
> 
> 标签：java, guice

我有一个像这样的构造函数

```
@Inject
public FxManagerFactory(DataServicesClientAPI dsApi,
                        OptimisationHorizon horizon,
                        Logger logger,
                        ModelScenario modelScenario,
                        @Nullable LimDataProvider limDataProvider ){...} 
```

我收到了这个错误

```
null returned by binding at com.eet.mpm.portopt.domainmodel.modelrunners.PomModule.bindFactories(PomModule.java:171)
 but parameter 4 of com.eet.mpm.portopt.domainmodel.marketdata.FxManagerFactory.<init>() is not @Nullable
  while locating com.eet.mpm.pricecurves.LimDataProvider
    for parameter 4 at com.eet.mpm.portopt.domainmodel.marketdata.FxManagerFactory.<init>(FxManagerFactory.java:30)
  while locating com.eet.mpm.portopt.domainmodel.marketdata.FxManagerFactory
  at com.eet.mpm.portopt.domainmodel.modelrunners.PomModule.bindFactories(PomModule.java:172)
  while locating com.eet.mpm.portopt.intf.domainmodel.marketdata.IFxManager 
```

在此处显示的第二个绑定处

```
private void bindFactories() {
    bind(LimDataProvider.class).toProvider(LimDataProviderFactory.class).asEagerSingleton();
    bind(IFxManager.class).toProvider(FxManagerFactory.class).asEagerSingleton(); 
```

它在本地运行（“在我的电脑上工作”），当我调试它但在不同的环境中执行时，会发生错误。

我知道一个[类似的问题](https://stackoverflow.com/questions/8226310/guice-ignoring-nullable-on-injected-constructor-parameter)，但它似乎与 eclipse 有关，我认为这与这个问题无关，因为我没有使用 eclipse。

# javascript - 将javascript对象数组转换为数组

> ID：12483656
> 
> 赞同：0
> 
> 时间：2012-09-18T19:27:59.997
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

所以我创建了一个巨大的对象，它通过一个数据库表并收集所有具有适当列名的行，如下所示（sx 是一个输出到 javascript 的字符串）：

```
if (i == 0)
{
   sx += "SearchAutocomplete['"+ s.Key + "'] = {};";
}
sx += "SearchAutocomplete['" + s.Key + "'][" + i + "] = '" + s.Value + "';"; 
```

（上面是 C# 代码，但错误是 javascript 部分）。

我的目标是使用这个巨大的对象将它放在 JQuery UI 的 autocomplete() 函数中，基于列名......

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

```
htmltable += sx + "$('#mySearchBox').autocomplete({" +
                "source: jQuery.makeArray(SearchAutocomplete['" + columnName + "'])" +
                "});" 
```

我尝试使用 jQuery.makeArray，但无论我尝试什么，它都无法将 SearchAutocomplete['columnName'] 识别为值数组。

自动完成不起作用。

我猜解决方案是以某种方式循环并将对象转换回数组。但是有没有更简单的方法？

**尝试修复 #1：**

```
if(list_fields.ContainsKey(s.Key)){
   if (i == 0)
   {
      sx += "SearchAutocomplete['"+ s.Key + "'] = [];";
   }
   sx += "SearchAutocomplete['" + s.Key + "'].push('" + s.Value + "');";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:31:30.573

也许试试这个改变：

```
//Outside your loop:
sx += "SearchAutocomplete['" + s.Key + "'] = [];";
//... Inside your loop:
sx += "SearchAutocomplete['" + s.Key + "'].push('" + s.Value + "');"; 
```

这样，`SearchAutocomplete[columnName]`是一个原生数组启动。

# php - Htaccess 破坏了 $_SERVER['PATH_INFO']

> ID：12483659
> 
> 赞同：1
> 
> 时间：2012-09-18T19:28:11.743
> 
> 标签：php, .htaccess

我有一个 .htacess 文件，例如；

```
RewriteRule ^(.*)$ index.php/$1 [NC,QSA,L] 
```

假设我有一个网址：`www.example.com/index/action`。当我在 index.php 中打印`$_SERVER['PATH_INFO']`时，我看到了`/action`

但如果我的网址是`www.example.com/index1/action`我可以看到的`/index1/action`

但我想在这两种情况下都看到完整的路径。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:32:23.223

如果你想在重写之前看到 URL，相信你正在寻找：

```
$_SERVER['REQUEST_URI'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:34:35.240

尝试`$_SERVER['REQUEST_URI']`

这段有用的代码将插入用户当前所在页面的地址，因此如果您在“http://test.com/pages/test/”上，代码将复制“/pages/test/”。要在代码中使用它：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:32:37.403

您可能正在寻找`$_SERVER['PHP_SELF']`.

因为`www.example.com/index/action`，你会得到`/index.php/index/action`

因为`www.example.com/index1/action`，你会得到`/index.php/index1/action`

# macos - 可以在 PDFThumbnailView 中关闭标签吗？

> ID：12483660
> 
> 赞同：2
> 
> 时间：2012-09-18T19:28:12.927
> 
> 标签：macos, quartz-graphics, pdfview

MacOS 提供了一组非常方便的类和对象来显示 PDF 文档。

PDFThumbnailView 用于显示缩略图的滚动集合，这些缩略图代表在 PDFDocument 中管理的 PDF 文档的每一页（并且在全尺寸 PDFView 中可见，位于我的 PDFThumbnailView 的右侧）。这就是我的 UI（带有 PDFThumbnailView 和 PDFView）的样子：

![我的PDF缩略图视图](../Images/a6a953fa2cbd29f42a9a3e58e1b9860a.png)

这是我关于 PDFThumbnailView 标签的问题（我在下图中圈出了其中的三个）：

PDFThumbnailView 提供了一种[方便的方法来更改缩略图标签的字体](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/PDFThumbnailView_Class/Reference/Reference.html#//apple_ref/occ/instm/PDFThumbnailView/setLabelFont:)；但是有没有办法真正自定义这些标签中出现的内容，或者更好的是，完全关闭该标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:42:50.403

好吧，既然这个问题为我赢得了 StackOverflow 上的“风滚草”徽章，我不妨用我最终做的（*非常非最佳*）解决方案来回答这个问题，以防一两个其他灵魂遇到这个问题问题。

[PDFThumbnailView 有一个 " `setLabelFont:`" 方法](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/PDFThumbnailView_Class/Reference/Reference.html#//apple_ref/occ/instm/PDFThumbnailView/setLabelFont%3a)，您可以为其分配一个极小的字体（想想 1 点或更少）。

是的，这意味着眼尖的用户会在每个页面下方看到一个像素。

据我所知，没有办法为该字体设置字体颜色（即清晰的颜色、与背景匹配的灰色）。

我已经向 Apple 提交了 Radar 增强请求 ( rdar://12631489 )，要求他们提供一个 API 来关闭这些标签，但我不知道他们是否真的会对此采取有利的行动。

# jquery - 单选按钮列表单击显示隐藏标签控件

> ID：12483662
> 
> 赞同：0
> 
> 时间：2012-09-18T19:28:29.707
> 
> 标签：jquery, asp.net

如果单选按钮列表值为“N”，我正在尝试显示/隐藏标签控件。代码工作正常，但是当我取消选中单选按钮时，标签控件不会隐藏。另外我正在使用 Jquery mousedown 事件来清除选择。请建议。

```
var radioList = "#<%= radioLst1.ClientID %>";
  var lblID = document.getElementById('<%=LblIDNumber.ClientID%>');

    $(radioList + " input:radio").click(function (e) {
        if ($('#<%= radioLst1.ClientID %> input:checked').val() == "N") {
            lblID.style.display = $(this).attr("checked") ? 'inline' : 'none';
        }
        else {
            lblID.style.display = 'none';
        }
    }); 
```

我正在使用以下代码来清除单选按钮列表的选择。

```
 $(radioList + " input:radio").mousedown(function (e) {
        if ($(this).attr("checked") == true) {
            setTimeout("$('input[id=" + $(this).attr('id') + "]').removeAttr('checked');", 200);
            lblID.style.display = 'none';
        }
        else {
            return true
        }
    });

                <asp:Label ID="LblIDNumber" style="display:none" runat="server">Number</asp:Label>

                <asp:RadioButtonList ID="radioLst1" runat="server">
                    <asp:ListItem Value="U">Unknown</asp:ListItem>
                    <asp:ListItem Value="N">Not Applicable</asp:ListItem>
                </asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:46:57.327

您不应该将事件附加到您的`radioLst1.ClientID`这将被 asp.net 翻译成表格

您可以像这样简化流程

```
var lblID = $('#mylabel');

 $('input:radio').on('click', function(){

   if($(this).val() == 'N')
   {
   lblID.hide();
  }else{
  lblID.show();
  }       

 }); 
```

你控制

```
<label id="mylabel">This is a label</label>

 <input id="radioLst1_0" type="radio" value="U" name="radioLst1">
  <label for="radioLst1_0">Unknown</label>

 <input id="radioLst1_1" type="radio" value="N" name="radioLst1">
     <label for="radioLst1_1">Not Applicable</label> 
```

这是一个工作[小提琴](http://jsfiddle.net/xnV9t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:14:03.000

您可以将所有这些包装到 UpdatePanel 中。然后为每个按钮单击触发事件背后的代码（您可以将它们全部订阅到同一个事件），然后将标签绑定到按钮的 .Checked 属性。UpdatePanel 将使一切异步。

我建议将此作为 javascript/jquery 的替代方案。它将更清洁，更易于管理。开始时多加一点标记，但随后进行更改将非常容易。

# c++ - 将基本结构分配给派生结构

> ID：12483663
> 
> 赞同：7
> 
> 时间：2012-09-18T19:28:30.927
> 
> 标签：c++

我使用结构来表示写入文件的数据。如果我需要向这个结构添加成员（即保存额外的数据），我会创建一个从原始结构派生的新结构（这代表数据集的新版本）。例如：

```
struct data1
{
   int stuff1;
   int stuff2;
};

struct data : data1
{
   int stuff3;
}; 
```

通过检查我们是否正在加载来保持向后兼容性，如果是`data1`，则将其转换为`data`（并且仅对 中的那些新成员进行值初始化`data`）。最好的方法是什么？这是我开始的：

```
if( loaded_data.size() == sizeof(data1) ) {
    // Old data format detected, upgrade to new structure
    data d = data(); // value-initialize everything
    // TODO: Assign 'data1' to 'data'
} 
```

我曾想过将构造函数放入`data`从 a 中复制`data1`，但这会破坏我得到的自由值初始化（那时我必须实现自己的默认构造函数）。我应该使用 memcpy()，还是有更好的内置方式（可能是一些复制语义的技巧）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-13T08:13:41.660

```
#include <cstdio>

struct A {
  int a;
};

struct B : A {
  int b;
};

int main()
{
  A a;
  a.a = 42; 
  B b;
  b.a = 0;
  b.b = 42;
  (A&)b = a;

  printf("%s\n", b.a == b.b?"it works":"nope");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:37:58.453

我不喜欢这个设计，我相信你不应该继承（例如，这会使你的类型不是聚合），并且有比检查实体大小更好的序列化/反序列化方法。话虽如此，在您强制初始化后，您可以分配。将定义隐式声明的复制构造函数并复制成员：

```
data d = { 1, 2 };         // Can use this as it is an aggregate
data1 d1 = data1();
d1 = d; 
```

同样，我会完全避免这种情况......

如果您使用组合而不是继承，那么您可以使用聚合初始化并避免对基进行双重初始化`data1`：

```
struct data1 {
  data base;
  int extra;
};
data d   = { 1, 2 };
data1 d1 = { d, 5 };   // or { d, 0 } 
```

> 我曾考虑将构造函数放入数据中以从 data1 复制，但这会破坏我得到的自由值初始化（那时我必须实现自己的复制和默认构造函数）。

不完全正确。您将需要提供一个默认构造函数，因为构造函数的存在`data`将禁止默认构造函数的隐式声明。但是复制构造函数仍然会隐式生成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:43:30.870

您希望为您的成员提供默认 ctor，但仍希望能够利用默认副本 ctor。我想你可以用组合来做到这一点。

```
struct Data1 {
  /**/
};

struct Data2 { // this is your extension
  /**/
};

struct Data3 { // possibly the next extension.
  /**/
};

template <typename Base, typename Derived>
struct ExtendData : Base, Derived {
  ExtendData(Base const& base, Derived const& derived)
    : Base(base), Derived(derived) {}
};

typedef ExtenData<Data1,Data2> FullData2;
typedef ExtenData<FullData2,Data3> FullData3; 
```

这允许您使用 POD`struct`的所有默认构造函数：

```
FullData2 data2 = {Base{/**/},Derived{/**/}}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:43:38.437

如果您想避免/隐藏 的丑陋`memcpy()`，您可以创建全局函数来初始化您的结构 - 在这些函数中，您可以使用`memcpy()`或简单地一个一个地分配字段。

这样，如果您的初始化语义发生变化，您只需要更新您的初始化函数并保持结构中的成员函数干净（也就是说，如果您喜欢/需要，它们仍然看起来像普通的数据结构）。例如：

```
void InitData ( data& oData, data1& oInitializer )
{
    memcpy ( ... );
} 
```

当您不断添加新成员和新结构时，您可以为每种新类型覆盖此函数。

如果您更喜欢（有点）类似 C++ 的方法，可以将这些函数转换为`data`结构的公共静态成员。然后你会称它为

```
data::InitFrom ( data1 ); 
```

这使您可以保持结构干净（没有虚函数等），但您仍然可以获得更好的类型安全性，并且低级细节仍然对其余代码隐藏。这些全局/静态函数还将保留结构的当前语义。

但请记住，C++ 纯粹主义者可能不喜欢这个选项。

# php - 获取正确的分数（php）

> ID：12483665
> 
> 赞同：1
> 
> 时间：2012-09-18T19:28:37.033
> 
> 标签：php, sql

我是 PHP 新手，我需要一些帮助。我似乎无法为学生获得正确的分数。

场景：

*   输入对应分数的考试答案（答案键）
*   输入该考试的学生答案
*   获取学生的总分。

我的PHP代码：

```
for ($count = 1; $count <= $num_ans; $count++)
{
    $answer = $_POST['answer'][($count + 1) - 1];
    $sqlB = "SELECT * FROM paper WHERE id=$count and test_name = '$test_name' and subject='$subject'";
    $qryB = mysql_query($sqlB);
    $rowB = mysql_fetch_array($qryB);
    $anskey = $rowB['answer'];
}
if ($answer = $anskey)
{
    $sqlA = "SELECT points FROM paper WHERE test_name = '$test_name' and subject='$subject' and answer='$answer'";
    $qryA = mysql_query($sqlA);
    while ($rowA = mysql_fetch_array($qryA))
    {
        $correctAns += $rowA['points'];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:33:06.467

尝试

```
 for ($count=1; $count<=$num_ans; $count++) {            
        $answer = $_POST['answer'][$count]; 
        $sqlB = "SELECT answer FROM paper WHERE id=$count and test_name = '$test_name' and    subject='$subject'";
        $qryB = mysql_query($sqlB);
        $rowB = mysql_fetch_array($qryB);
        $anskey = $rowB['answer'];

        if ($answer == $anskey) { 
        $sqlA = "SELECT points FROM paper WHERE test_name = '$test_name' and subject='$subject' and answer='$answer'";
        $qryA = mysql_query($sqlA);
         //considering each unique answer would have specific points, while-loop is not required
        //while($rowA = mysql_fetch_array($qryA)) {
        $correctAns += $rowA['points'];
       // }
        }  
} //end of for-loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:45:59.667

我认为您的数据库查询中缺少某些内容。

```
$query = "SELECT points FROM paper WHERE test_name = '$test_name' and subject='$subject' and answer='$answer'";
$qryA = mysql_query($query);
while($rowA = mysql_fetch_array($qryA)) {
   $correctAns += $rowA['points'];
} 
```

请检查 ：

```
 $rowA['points'] = ??// if any value return from db or not. 
```

因为 SQL 查询，请传递问题 id/（行中唯一的东西） answer = '$answer' 可能是重复的，所以它不能返回实际值。

希望你能理解。

# php - InvalidArgumentException 与 UnexpectedValueException

> ID：12483667
> 
> 赞同：41
> 
> 时间：2012-09-18T19:28:40.403
> 
> 标签：php, exception, spl

我应该何时使用[InvalidArgumentException](http://www.php.net/manual/en/class.invalidargumentexception.php)以及何时使用[UnexpectedValueException](http://www.php.net/manual/en/class.unexpectedvalueexception.php)？它们在我看来是一样的。

[请注意](http://php.net/manual/en/spl.exceptions.php#spl.exceptions.tree)，一个扩展了 LogicException，另一个扩展了 RuntimeException，因此 IMO 的区别不应该那么细微。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-26T23:14:42.267

仔细查看手册页上的描述：

### [无效参数异常](https://www.php.net/manual/en/class.invalidargumentexception.php)

> *如果参数不是预期的类型，则会*引发异常。

[（描述`Exception thrown if an argument does not match with the expected value.` [直到 2014 年年中](https://web.archive.org/web/20140119224439/http://us2.php.net/invalidargumentexception)，但[在 PHP 5.6 引入时发生了](https://web.archive.org/web/20140606205440/http://us2.php.net:80/invalidargumentexception)变化）]

### [意外值异常](https://www.php.net/manual/en/class.unexpectedvalueexception.php)

> *如果一个值与一组值不匹配，*则会引发异常。通常，当一个函数调用另一个函数并期望返回值是某种类型或 value[,] 不包括算术或缓冲区相关错误时，就会发生这种情况。

由此，我们可以得出结论，`InvalidArgumentException`旨在*检查*传递给函数的参数类型，而`UnexpectedValueException`旨在*验证值与有效值集*，可能在函数的内部计算期间（例如从其他函数返回的值）。

请注意，检查参数的值是一种灰色区域；可以说，因为`InvalidArgumentException extends LogicException`，它应该只处理这样的情况，[`should lead directly to a fix in your code.`](https://www.php.net/manual/en/class.logicexception.php#Introduction)因为在超出范围的输入值的情况下抛出异常可能是完全预期的*运行时*行为，所以在这种情况下，这使得`UnexpectedValueException`（扩展`RuntimeException`）成为唯一的候选者。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-18T23:05:22.887

我想最大的区别是“论据”与“价值”。

我看到的方式`InvalidArgumentException`是 for (passed) *arguments*，而`UnexpectedValueException`适用于 (returned) *values*。“无效”和“意外”之间还有一个微妙但重要的区别——这也解释了为什么第一个是 LogicException 而第二个是 RuntimeException。

例如：假设我有一个使用 Twitter-api 的函数，称为：`getLastMessageDate($userid)`：您传递一个（数字）用户 ID，它将该用户的最后一条消息的日期作为 yyyy-mm-dd 字符串返回。

现在，假设我使用字符串而不是数字作为参数调用此函数。此时我可以调用 InvalidArgumentException，因为提供的参数对于此函数无效。这些检查可以通过*逻辑*来完成——因为变量要么是数字，要么不是。因此它是一个 LogicException。

但是，函数的*返回值*可能无法通过逻辑验证——尤其是在处理（第三方）动态内容时。因为您永远无法确切知道您的函数将返回什么。（如果你愿意，这可以说会使你的功能无用。）

所以，这次我用（有效的）用户 ID 调用我的函数，我的函数获取该用户最后一条消息的日期。有了这个日期，我想做一些事情，比如一些格式。

现在想象一下 Twitter 的人做错了什么，而不是我*预期* 的 yyyy-mm-dd 日期字符串，我得到一个空字符串或一个不同的字符串，上面写着“blaaaa”。在这一点上，我可以抛出一个`UnexpectedValueException`.

我不能说这个值是“无效的”——我要求一个字符串，我得到了一个字符串。但它不是我所期待的“字符串类型”：因此出现**意外**的 ValueException。

希望这可以解决问题。这是我的第一篇文章——到目前为止，我了解到写下我脑海中的想法并不是最简单的事情（英语也不是我的母语）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-18T21:30:29.500

我的理解是，`InvalidArgumentException`如果[`LogicException`](http://php.net/class.logicexception)您根据可能值范围的固定列表检查参数，则应该使用 , 。例如，检查用户输入的数据是否仅包含数字。程序*逻辑*可以处理这些值范围。

`UnexpectedValueException`，作为一个[`RuntimeException`](http://php.net/class.runtimeexception)（*只能在运行时发现/无法在编译时检测到的错误*），将用于发生在可预见和指定输入范围之外的异常（可能作为上述“逻辑”检查后的最后手段）。

回答这个问题的关键可能是`Unexpected...`在`UnexpectedValueException`. `Unexpected`意味着在程序逻辑中没有处理这个值。`Invalid`，另一方面，表明该值已被处理。

# php - apache日志中的wkhtmltopdf错误

> ID：12483673
> 
> 赞同：1
> 
> 时间：2012-09-18T19:29:11.990
> 
> 标签：php, wkhtmltopdf

```
exec("wkhtmltopdf test.html output.pdf"); 
```

在 php 命令行中它可以工作，但如果我尝试从 apache 调用它，它不会创建 pdf 文件，并且日志显示如下：

```
$ tail -f  /var/log/apache2/error.log
wkhtmltopdf: cannot connect to X server 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:33:13.923

您可以使用[Xvfb](http://en.wikipedia.org/wiki/Xvfb)来模拟 x 环境

```
<?php exec("xvfb-run -a wkhtmltopdf test.html output.pdf"); 
```

或者

```
<?php exec("startx -- `which Xvfb` :1 -screen 0 800x600x24 && DISPLAY=:1 && wkhtmltopdf test.html output.pdf"); 
```

我为自己制作了这个脚本，让 wkhtml 在 centos 6+ 上运行：

```
 yum install xorg-x11-server-Xvfb
    nano /etc/init.d/xvfbd
    #paste this:
    #!/bin/bash

#
# /etc/rc.d/init.d/xvfbd
#
# chkconfig: 345 95 28
# description: Starts/Stops X Virtual Framebuffer server
# processname: Xvfb
#

. /etc/init.d/functions

[ "${NETWORKING}" = "no" ] && exit 0

PROG="/usr/bin/Xvfb"
PROG_OPTIONS=":1 -screen 1 1024x768x24 -nolisten tcp"
PROG_OUTPUT="/tmp/Xvfb.out"

case "$1" in
start)
echo -n "Starting : X Virtual Frame Buffer "
$PROG $PROG_OPTIONS>>$PROG_OUTPUT 2>&1 &
disown -ar
/bin/usleep 500000
status Xvfb & >/dev/null && echo_success || echo_failure
RETVAL=$?
if [ $RETVAL -eq 0 ]; then
/bin/touch /var/lock/subsys/Xvfb
/sbin/pidof -o %PPID -x Xvfb > /var/run/Xvfb.pid
fi
echo
;;
stop)
echo -n "Shutting down : X Virtual Frame Buffer"
killproc $PROG
RETVAL=$?
[ $RETVAL -eq 0 ] && /bin/rm -f /var/lock/subsys/Xvfb
/var/run/Xvfb.pid
echo
;;
restart|reload)
$0 stop
$0 start
RETVAL=$?
;;
status)
status Xvfb
RETVAL=$?
;;
*)
echo $"Usage: $0 (start|stop|restart|reload|status)"
exit 1
esac

exit $RETVAL

#END
chmod 550 /etc/init.d/xvfbd
chkconfig xvfdb on
service xvfdb start

#Compile wkhtml compelety:
http://code.google.com/p/wkhtmltopdf/wiki/compilation

./configure -nomake examples,demos,docs,translations -opensource -webkit -prefix "../wkqt"

#Install fonts:
yum install xorg-x11-fonts* 
```

之后在 PHP 中运行它：

```
exec("DISPLAY=:1  timeout 60 wkhtmltoimage --height 1024 --width 1280 --quality 80 \"" . $site . "\" " . $filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:56:01.060

它的网站上有更新版本的 wkhtmltopdf (0.11)，不需要运行 X 服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-09T18:56:07.573

对于其他一切，都有 shell 脚本。

```
 #!/bin/bash
    if [[ $EUID -ne 0 ]]; then
      echo "This script must be run as root" 1>&2
      exit 1
    fi
    apt-get install xvfb wkhtmltopdf
    mv /usr/bin/wkhtmltopdf /usr/bin/wkhtmltopdfbin
    echo 'xvfb-run -a -s "-screen 0 640x480x16" wkhtmltopdfbin $*' > /usr/bin/wkhtmltopdf.sh
    ln -s /usr/bin/wkhtmltopdf.sh /usr/bin/wkhtmltopdf 
```

# windows-8 - 通过 SkyDrive FilePicker 选择共享文件？

> ID：12483674
> 
> 赞同：0
> 
> 时间：2012-09-18T19:29:16.060
> 
> 标签：windows-8, live, onedrive

有谁知道是否可以在 Windows 8 的 SkyDrive 文件选择器中从其他人的 SkyDrive 中选择与我共享的文件？当我在应用程序中调用文件选择器时，似乎我可以选择从 SkyDrive 应用程序中选择，但我认为我只能选择我自己的 SkyDrive 中的文件，而不是从其他人那里与我共享的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:04:09.443

答案是你还不能。希望这将出现在适用于 Windows 8 的更高版本的 SkyDrive 应用程序中。

# sql - SQL Oracle - 将两个结果集合二为一

> ID：12483678
> 
> 赞同：0
> 
> 时间：2012-09-18T19:29:28.393
> 
> 标签：sql, oracle

我有以下查询：

```
Select TRUNC(create_dtime) as Day, Count(Create_Dtime) As SinS_Tot
  From player_chkin_hist
 Where Product_Id Is Not Null
   And Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
   And Trunc(Create_Dtime) < To_Date('2012-sep-19','yyyy-mon-dd')
 Group By Trunc(Create_Dtime)
 Order By 1 Asc 
```

和

```
Select TRUNC(Create_Dtime) As Day, Count(Create_Dtime) As Sins_Tot
  From Player_Chkin
 where Product_Id Is Not Null
   And Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
   And Trunc(Create_Dtime) < To_Date('2012-sep-19','yyyy-mon-dd')
 Group By Trunc(Create_Dtime)
 Order By 1 Asc 
```

查询 1 结果：

```
Day          SinS_Tot
01-Sep-12      10000
02-Sep-12       9000 
```

查询两个结果：

```
 Day          SinS_Tot
03-Sep-12      11500
04-Sep-12       9800 
```

有没有一种简单的方法可以组合这两个查询以便我看到所有数据？我考虑过使用连接，但由于日期不重叠，所以没有什么可以将内部连接设置为相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:32:31.740

您正在寻找的是[`UNION`](http://www.w3schools.com/sql/sql_union.asp)（或`UNION ALL`，取决于您是否要消除重复项）：

```
Select 
trunc(create_dtime) as Day, Count(Create_Dtime) As SinS_Tot
From player_chkin_hist
Where
Product_Id Is Not Null And
Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
And Trunc(Create_Dtime) < To_Date('2012-sep-19','yyyy-mon-dd')
Group By Trunc(Create_Dtime)

UNION

Select Trunc(Create_Dtime) As Day, Count(Create_Dtime) As Sins_Tot
From Player_Chkin
where
Product_Id Is Not Null And
Trunc(Create_Dtime) >= To_Date('2012-sep-01','yyyy-mon-dd')
And Trunc(Create_Dtime) < To_Date('2012-sep-19','yyyy-mon-dd')
Group By Trunc(Create_Dtime)
Order By 1 Asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:33:01.033

你可以`UNION ALL`得到两个结果

```
<<query 1>>
UNION ALL
<<query 2>> 
```

您也可以使用 a `UNION`，但这会更昂贵，因为它会迫使 Oracle 查找并消除重复的行。如果您知道这两个查询永远不会返回同一行，或者如果您想要两行，这是不必要的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:32:40.940

也许`UNION`他们之间？将查询保留在`ORDER BY`外部，将其放在第二个查询的末尾

```
Query1
 UNION
Query2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:34:27.463

您只需要使用 UNION 组运算符。

[查询1] UNION ALL [查询2]

# java - 使用单选按钮切换自动完成源

> ID：12483685
> 
> 赞同：0
> 
> 时间：2012-09-18T19:29:50.867
> 
> 标签：java, jquery, jquery-ui

我有一个表格，可以跟踪校园某些地方允许携带的物品。单选按钮组控制所讨论的区域是物理房间还是更一般的“项目”。任何一个都将其值输入到数据库中的同一字段中。

房间和项目存储在单独的表中。我想在这里利用 jQuery UI 的自动完成功能。到目前为止，无线电组上的更改事件切换了房间和项目的适当文本，并切换了“roomAC”类。'roomAC' 类是自动完成的选择器。

我想当我删除课程时，它不再让自动完成工作，但它确实如此。这是因为事件仍然绑定到 DOM 元素。我想知道是否有办法绑定/取消绑定自动完成事件？还是我被困在我的 if 语句（无线电组之一）中重新创建事件处理程序？

**我的**

```
//ROOM FIELD JQUERY-UI AUTO-COMPLETE
$(".roomAC").autocomplete({
    source: "autocomplete.cfm",
    minLength: 4
}); 
```

**tl;博士**

如何绑定和取消绑定 jQuery UI 自动完成事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:56:21.493

关于您关于解除绑定自动完成控件的问题，您可以禁用它或使用`.autocomplete( "option" , optionName , [value] )`语法更改源。

但是，如果我正确理解您的情况，您实际上希望同时发送搜索词和来源标识符。它可以通过使用回调作为源（在您的自动完成选项中）来实现。文档说：

> 第三种变体，回调，提供了最大的灵活性，可用于将任何数据源连接到自动完成。回调有两个参数：
> 
> 一个请求对象，具有一个名为“term”的属性，它指的是文本输入中当前的值。例如，当用户在城市字段中输入“new yo”时，自动完成项将等于“new yo”。
> 
> 响应回调，它期望单个参数包含要向用户建议的数据。此数据应根据提供的术语进行过滤，并且可以采用上述简单本地数据的任何格式（字符串数组或具有标签/值/两个属性的对象数组）。在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

这是我与 jQuery UI 自动完成一起使用的功能：

```
function initSuggest(){
    var cache = {},
        lastXhr;
    $( ".Mjesto" ).each( function() {
        $( this ).autocomplete( {
            minLength: 2,
            source: function( request, response ) {
                var sourceId = $("#DrzavaId option:selected").text();
                var term = request.term;
                if ( term in cache ) {
                    response( cache[term] );
                } else {
                    try {
                        lastXhr = $.getJSON( "autocomplete2.cfm", { c: sourceId, t: term }, 
                            function( data, status, xhr ) {
                                cache[term] = data;
                                if ( xhr === lastXhr ) {
                                response( data );
                            }
                        });
                    } catch( ex ) {
                        response( null );
                    }
                }
            },
            autoFocus: true
        } );
    } );
} 
```

此函数还缓存响应。如果您忽略这一点，那么诀窍就在 try/catch 块中。

# .net - 如何在可移植类库中使用 MEF？

> ID：12483686
> 
> 赞同：4
> 
> 时间：2012-09-18T19:29:54.687
> 
> 标签：.net, mef, visual-studio-2012, portable-class-library, windows-store-apps

我有针对 .NET 4.5 和 Windows Store App 的可移植类库。[根据 MSDN，此设置应提供 MEF](http://msdn.microsoft.com/en-us/library/gg597391.aspx)，但事实并非如此。命名空间`System.ComponentModel.Composition`不可用（我什至尝试过`System.Composition`但没有运气）。也不能使用`Microsoft.Composition`适用于 Windows Store App 的 NuGet 包。

安装[NuGet 版本](https://nuget.org/packages/microsoft.composition)时的错误是：

> 'Microsoft.Composition 1.0.15' 已安装。无法安装包“Microsoft.Composition 1.0.15”。
> 
> 您正在尝试将此包安装到以“.NETPortable,Version=v4.5,Profile=Profile7”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:51:07.993

您需要从包中手动添加对二进制文件的引用。我通常将包安装到特定于平台的项目（例如 .NET Framework 4.5），然后只需手动从便携式引用。

这将在下一个版本的 NuGet (2.1) 中得到修复，我们将更新 MEF 包以与其相吻合。

# playn - 如何在 playn (1.3) 中用径向渐变填充图层？

> ID：12483687
> 
> 赞同：4
> 
> 时间：2012-09-18T19:29:56.177
> 
> 标签：playn

我正在尝试开始使用 playn 1.3（我应该使用 1.4 吗？），但在如何简单地用径向渐变填充某种图层的问题上，我很早就失败了。graphics().createRadialGradient 告诉我它创建了一个图案，但它只是创建了一个我不能在 setFillPattern 上使用的渐变。不推荐使用 createCanvasLayer，因此我正在尝试使用 ImageLayer 和 SurfaceLayer，但我找不到从渐变或类似的东西创建实际图案的方法，最终用我的渐变填充图层。当然，我肯定只是忽略了一些东西，所以我很乐意在这里提供提示，因为 playn 对我来说真的很有希望:)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:13:13.723

在 PlayN 1.4 中测试：

```
CanvasImage canvasImage = graphics().createImage(100, 100);
Canvas canvas = canvasImage.canvas();
Gradient radialGradient = graphics().createRadialGradient(50, 50, 50, 
        new int[]{Color.rgb(255, 0, 0), Color.argb(0, 255, 0, 0)}, 
        new float[]{0, 1});
canvas.setFillGradient(radialGradient);
canvas.fillRect(0, 0, 100, 100);
ImageLayer imageLayer = graphics().createImageLayer();
imageLayer.setImage(canvasImage);
imageLayer.setDepth(1);
graphics().rootLayer().addAt(imageLayer, graphics().width() / 2, graphics().height() / 2); 
```

# jquery - jQuery UI 对话框需要的最小 css？

> ID：12483688
> 
> 赞同：3
> 
> 时间：2012-09-18T19:29:57.770
> 
> 标签：jquery, css, jquery-ui, jquery-ui-dialog

我正在浏览 css 并结合声明。

例如，对话框的标题位于 ui-widget-header 和 ui-dialog-titlebar 中。

问题是当我有 jquery UI 选项卡时，例如，在对话框中。即使它们都被限定为不同的 css 选择器 - 仍然存在一些冲突，因为选项卡继承了一些父样式。

UI 附加了这么多的类，把它全部看完是一件很头疼的事（我很乐意这样做）。

我想知道是否有人将对话框 css 缩减为仅需要的 css（不考虑其他 UI 元素）。所以将声明合并为一个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:19:03.357

对于带有标签的 jquery UI 对话框，您所要做的就是：

HTML;

```
<div id='unique_id'>
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Nunc tincidunt</a></li>
            <li><a href="#tabs-2">Proin dolor</a></li>
            <li><a href="#tabs-3">Aenean lacinia</a></li>
        </ul>
        <div id="tabs-1">
            <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
        </div>
        <div id="tabs-2">
            <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
        </div>
        <div id="tabs-3">
            <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
            <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
        </div>
    </div>
</div> 
```

jQuery：

```
$('#tabs').tabs();
$('#unique_id').dialog(); 
```

在此处查看示例：http: [//jsfiddle.net/qR8gK/21/](http://jsfiddle.net/qR8gK/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:45:39.283

我最近使用了 UI 滑块，我只使用了与脚本一起使用的选择器，我能够将其减少到两个。他们中的大多数你可以报废..比如“ui-corners”。所做的一切都是在拐角处。我的建议是在 jsFiddle 中创建一个，看看你只需要功能，然后应用你自己的样式。

或者您可以通过网络检查器，编辑 HTML 并开始将它们一一破解，以查看哪些实际上与脚本挂钩。

另一种选择是在内容周围放置一个包装器 DIV 并用您自己的样式覆盖 CSS。

最好的选择可能是查看文档，您可以看到它所依赖的内容，并在主题选项卡下说明使用了哪些类......

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

不是一个很好的答案，但也许会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:15:45.720

大多数小部件实际上并不需要很多 css 样式。

*   对话框不需要任何东西。

*   Resizable 需要它的大部分样式，因为手柄需要大小以便它们可以被拖动。

*   Tabs 只需要为隐藏面板`.ui-tabs-hide`设置的类。`display:none`

请注意，所有小部件都有一个 css 样式，其名称（即`.ui-dialog`）应用于它们的根元素，并且任何小部件特定样式都在其下命名。

# c - 如何定义 MPI_Type_struct 结构中涉及通用指针的位置

> ID：12483689
> 
> 赞同：2
> 
> 时间：2012-09-18T19:30:00.490
> 
> 标签：c, mpi

考虑以下结构

```
 typedef struct{
       void *data;
       int len;
    }item_t; 
```

它允许我将**item_t**传递给一个名为**map_functions(item_t dt , item_t (*f_ptr)(item_t) )** 的函数，该函数接受 item_t 和函数指针。

**map_functions()然后将通过将****item_t**传递给它来调用作为参数传递的函数。请记住，有不同的函数会调用**map_functions()**，每个函数都有不同的 item_t 内容，**并**传递他们想要调用的相应函数。

所有这一切对我来说都很好。

现在，我想用 MPI 做同样的事情。我首先想到的是：

如何定义用户定义的 MPI_Datatype（特别是 MPI_Type_struct），其中结构中涉及通用指针（如**void* 数据**）？即将上述结构转换为用户定义的 MPI 数据类型等价物。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:36:35.320

您不能在进程之间传递指针，它们不共享内存。

你必须传递真实的信息，或者什么都不传递。指针仅与进程相关。

# php - 从 json 创建一个数组并引用 id 来键入

> ID：12483690
> 
> 赞同：0
> 
> 时间：2012-09-18T19:30:02.270
> 
> 标签：php, arrays, foreach, json

我如何从这个 json 创建一个将 ATTRIBUTE_TYPE 关联到 ATTRIBUTE ID 的数组。现在我被返回以下json：

```
(
    [success] => 1
    [ATTRIBUTES_COUNT] => 106
    [ATTRIBUTES] => Array
        (
            [0] => Array
                (
                    [ATTRIBUTE_TYPE] => email
                    [DATA_TYPE] => CHAR
                    [COMPARE_COUNT] => 2
                    [COMPARE] => Array
                        (
                            [0] => Array
                                (

                                    [ATTRIBUTE_ID] => 4222
                                    [DESCR] => Equals
                                )

                            [1] => Array
                                (

                                    [ATTRIBUTE_ID] => 4223
                                    [DESCR] => Not Equal
                                )

                        )

                )

            [1] => Array
                (
                    [ATTRIBUTE_TYPE] => interest
                    [DATA_TYPE] => MONEY
                    [COMPARE_COUNT] => 7
                    [COMPARE] => Array
                        (
                            [0] => Array
                                (

                                    [ATTRIBUTE_ID] => 4006
                                    [COMPARE_DESCR] => Not Equal
                                )

                            [1] => Array
                                (

                                    [ATTRIBUTE_ID] => 4000
                                    [COMPARE_DESCR] => Equals
                                )

                            [2] => Array
                                (

                                    [ATTRIBUTE_ID] => 4001
                                    [COMPARE_DESCR] => Greater Than
                                )

                       )

                )
) 
```

现在我想创建一个数组，它会在 json_decode 之后返回如下内容：

```
{
    "DETAILS": [
        {

            "ATTRIBUTE_ID": "4222",
            "ATTRIBUTE_TYPE": "email",

        },
        {

            "ATTRIBUTE_ID": "4006",
            "ATTRIBUTE_TYPE": "interest",

        }
    ]
} 
```

同一个属性类型可以有多个属性ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:56:11.513

它不是特别优雅，但试一试（$inputArray 是您在问题顶部发布的深度嵌套数组）：

```
$desiredArray = array("DETAILS" => array());

foreach($inputArray["ATTRIBUTES"] as $attribute)
{
    foreach($attribute["COMPARE"] as $compare)
    {
        $desiredArray["DETAILS"][] = array("ATTRIBUTE_ID" => $compare["ATTRIBUTE_ID"],
            "ATTRIBUTE_TYPE" => $attribute["ATTRIBUTE_TYPE"]);
    }
}

$desiredJson = json_encode($desiredArray); 
```

# perl - 接收到 SUSPEND 和 APMRESUME 消息时执行代码

> ID：12483705
> 
> 赞同：1
> 
> 时间：2012-09-18T19:30:40.803
> 
> 标签：perl, windows-7, message

如何使用 perl 在 Windows 中“捕获”一个 SUSPEND 和一个 APMRESUME 消息？

目标是制作一个程序，在该程序中，只要有可能就向服务器发出用户断开连接的警告是个好主意。

我已经尝试在很多地方搜索如何做到这一点。我只能找到如何在.net 中使用/或 C# 但我找不到 perl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:04:50.477

I presume you mean the *Windows Advanced Power Management* API? The closest I can find is [`Sys::Apm`](https://metacpan.org/module/Sys%3a%3aApm), but that provides only for fetching current status values and will not handle events

Since ACPI has superseded APM I don't think a module is likely to be written that does what you want, but perhaps you could use [`Win32::API`](https://metacpan.org/module/Win32%3a%3aAPI) to write a Perl interface to the relevant DLL

I'm afraid that's all I can suggest

# f# - 与 F# 中的地图匹配的模式

> ID：12483707
> 
> 赞同：9
> 
> 时间：2012-09-18T19:30:48.060
> 
> 标签：f#

给定地图：

```
let myMap = Map.ofArray [| (1,"A");(2,"B") |] 
```

有没有一种方法可以使用类似于列表 cons 运算符的模式匹配？

像这样的东西：

```
match myMap with      //doesn't work
    (1, value) -> ()
  | _          -> () 
```

或者：

```
match myMap with      //doesn't work 
    1::value -> ()
  | _        -> () 
```

我不想做的是：

```
match myMap.TryFind(1) with      //boring
    Some value -> ()
  | _          -> () 
```

如何使用地图进行模式匹配？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T20:18:52.203

正如您所指出的，匹配`TryFind`是标准方法，我想不出有什么令人信服的理由用活动模式包装它以进行简单的密钥检查。但是，如果您要进行列表解构之类的操作（即返回找到的值和映射的其余部分），则应该可以：

```
let (|Found|_|) key map =
  map
  |> Map.tryFind key
  |> Option.map (fun x -> x, Map.remove key map)

let map = Map.ofList [1, "A"; 2, "B"]
match map with
| Found 1 (x, rest) -> printfn "Value: %A, Remaining: %A" x rest
| _ -> ()

//prints: Value: "A", Remaining: map [(2, "B")] 
```

# c# - SerialData.Eof 情况

> ID：12483711
> 
> 赞同：10
> 
> 时间：2012-09-18T19:30:59.650
> 
> 标签：c#, .net-4.0

在我的[`SerialPort.DataReceived`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived%28v=vs.100%29.aspx)事件处理程序中，我正在检查[`SerialData.Eof`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialdata%28v=vs.100%29.aspx)：

```
void DataReceived(object sender, SerialDataReceivedEventArgs e) {
    if (e.EventType == SerialData.Eof)
        throw new NotImplementedException("SerialData.Eof");
    // ... Read
} 
```

到目前为止，在我的整个开发过程中，我从未遇到过这个异常。但是今天，在处理协议的不同部分时，它成功了。

我的问题是，究竟是什么`SerialData.Eof`意思？MSDN 说：

> 接收到文件结尾字符并将其放入输入缓冲区。

**我正在处理二进制数据。什么是“文件结尾字符”？**

* * *

这个[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6aaf1c70-46c6-485b-a769-2389da7684ee)指出

> 成员[`DCB.EofChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363214.aspx)总是被初始化为 0x1A (Ctrl+Z)

在该课程的[参考资料](http://referencesource.microsoft.com/)`SerialStream`中，在第 1343 行，我们确实看到：

```
dcb.EofChar = NativeMethods.EOFCHAR; 
```

并在`Microsoft.Win32.NativeMethods`：

```
internal const byte EOFCHAR = (byte) 26; 
```

那么这是否意味着只要我的设备发送一个 0x1A 字节，我就会收到一个`SerialData.Eof`事件？如果是这种情况，我应该完全停止测试吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T07:39:45.340

我在那篇 MSDN 帖子中的原始分析是正确的。然而，参考源揭示了答案，来自 SerialStream.cs：

```
dcb.EofChar = NativeMethods.EOFCHAR;

//OLD MSCOMM: dcb.EvtChar = (byte) 0;
// now changed to make use of RXFlag WaitCommEvent event => Eof WaitForCommEvent event
dcb.EvtChar = NativeMethods.EOFCHAR; 
```

呃，他们使用 DCB 的 EvtChar 设置来检测 Ctrl+Z。这是一个非常糟糕的主意，因为无法更改它并且 0x1a 字节值肯定会出现在二进制协议中。在实践中，这几乎总是有一个好的结果，因为当事件触发时会有一些东西可以阅读。然而，现在有一个竞争条件可以触发*另一个*事件，这次是 SerialData.Chars，因为上一个事件导致所有字节都被读取，所以没有什么可读取的。这将使 Read() 调用阻塞，直到一个字节可用。这通常可以解决，但确实增加了 Close() 调用死锁的几率。一个长期的 SerialPort 问题。

处理这个问题的正确方法是：

```
void DataReceived(object sender, SerialDataReceivedEventArgs e) {
    if (e.EventType == SerialData.Eof) return;
    // ... Read
} 
```

# dns - 224.0.0.251 上的多播在做什么？

> ID：12483717
> 
> 赞同：45
> 
> 时间：2012-09-18T19:31:21.163
> 
> 标签：dns, debian, mdns

在我的 debian 服务器上（挤压）我每隔几秒就会收到一条消息：

> 9 月 18 日 21:28:14 myhost 内核：[7903784.720091] AIF:UNPRIV 连接尝试：IN=eth0 OUT= MAC= SRC= **my_serverip_eth0** DST=224.0.0.251 LEN=72 TOS=0x00 PREC=0x00 TTL=255 ID=0 DF PROTO=UDP SPT=5353 DPT=5353 LEN=52

数据包来自我的服务器内部（我将其替换为**my_serverip_eth0**）并且似乎被阻止到目的地 224.0.0.251。

所以我的服务器内的一些任务正在联系 224.0.0.251，这被我的`arnos_firewall`.

我怎样才能找出谁或哪个任务正在尝试这样做，以及它是否有用？

如果我不需要它，那我该如何压制该消息呢？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-18T21:00:49.980

对我来说，这些看起来很像[Bonjour / mDNS](http://en.wikipedia.org/wiki/Bonjour_%28software%29)请求。这些数据包使用多播 IP 地址 224.0.0.251 和端口 5353。

最有可能的来源是[Apple iTunes](http://support.apple.com/kb/HT1601)，它预装在 Mac 电脑上（并且在 Windows 机器上也很流行）。Apple iTunes 使用它来发现同一 WiFi 网络中的其他 iTunes 兼容设备。

mDNS 还用于（主要由 Apple 的 Mac 和 iOS 设备）发现与 mDNS 兼容的设备，例如同一网络上的打印机。

如果这是一个 Linux 机器，那么它可能是[Avahi 守护进程](http://en.wikipedia.org/wiki/Avahi_%28software%29)。Avahi 与[ZeroConf/Bonjour 兼容](http://wiki.debian.org/ZeroConf)并默认安装，但如果您不使用 DNS-SD 或 mDNS，则可以将其禁用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-29T14:07:19.570

如果您没有安装avahi，那么它可能是杯子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T21:49:51.693

我停用了我的“Arno 的 Iptables 防火墙”进行测试，然后消息消失了

# android - adb - 如何在不保留数据的情况下重新安装应用程序？

> ID：12483720
> 
> 赞同：49
> 
> 时间：2012-09-18T19:31:37.687
> 
> 标签：android, apk, adb, command-prompt

```
adb install foo.apk 
```

使用此命令时，如果 apk 存在，我应该得到错误 *Failure [INSTALL_FAILED_ALREADY_EXISTS]*

```
 adb install -r myapp-release.apk 
```

在这种情况下，现有的 apk 将被替换，根据文档保留旧数据，

> '-r' 表示重新安装应用程序，保留其数据

现在我如何重新安装应用程序，但以前的所有数据都应该被删除？

**编辑**

我知道我们可以做到

```
adb uninstall com.package.foo & adb install foo.apk 
```

我只是想知道adb本身是否有命令或其他东西。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-06-27T11:26:48.337

在安装之前**清理数据**，如下所示：

```
adb shell pm clear com.package.foo 
```

然后您可以使用以下命令正常安装：

```
adb install foo.apk 
```

或者只是运行你的 IDE

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-18T19:35:08.243

尝试`adb uninstall yourpackage.whatever.com`，然后重新安装。或者为该应用程序选择清除手机上的数据。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-18T20:13:19.260

是的`adb uninstall com.package.foo && adb install foo.apk`，但是如果该应用程序是无法卸载的系统应用程序，则卸载将不起作用。有`adb shell pm clear packageName`清除某个应用程序数据的命令，但它可能需要 root。像往常一样重新安装apk`adb install -r app.apk`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-11-02T07:00:14.027

```
adb install [-l] [-t] [-r] [-s] <file> - push this package file to the 
   device and install it
   ('-t' uses for install debug apk)
   ('-l' means forward-lock the app)
   ('-r' means reinstall the app, keeping its data)
   ('-s' means install on SD card instead of internal storage)

adb uninstall [-k] <package> - remove this app package from the device
   ('-k' means keep the data and cache directories) 
```

如果你想安装`debug.apk`没有`clear the data`：

```
adb install -t -r D:/debug.apk 
```

如果你想安装`debug.apk`文件`clear the data`：

```
adb shell pm clear com.package.app
adb install -t D:/debug.apk 
```

并通过 adb 命令在设备上启动应用程序：

```
adb shell am start -n com.package.app/com.package.app.activity.MainActivity 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-18T19:35:26.873

不，没有（记录的）方法可以使用该`adb install`命令执行此操作。相反，您应该这样做：

```
adb uninstall com.your.package
adb install foo.apk 
```

# perl - perl 行之间的行匹配

> ID：12483722
> 
> 赞同：0
> 
> 时间：2012-09-18T19:31:48.323
> 
> 标签：perl, shell, grep

我有一个文件。

```
Sun Sep  9 12:34:42 2012 : Sun Sep  9 12:34:42 2012 : [Req] Send Bcast 
Sun Sep  9 12:34:32 2012 : RX FROM :152.14.189.4 MESG: 
Sun Sep  9 12:34:32 2012 : info  
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.4 
Sun Sep  9 12:34:32 2012 : RX FROM :13 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.13  
Sun Sep  9 12:34:32 2012 : RX FROM :9 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.9  
Sun Sep  9 12:34:32 2012 : RX FROM :14 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.14 
Sun Sep  9 12:34:32 2012 : RX FROM :5 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.5 
Sun Sep  9 12:34:35 2012 : Reply back to 9 
Sun Sep  9 12:34:35 2012 : Reply back to 13
Sun Sep  9 12:34:36 2012 : Reply back to 14
Sun Sep  9 12:34:37 2012 : Reply back to 1.1.1.4 
Sun Sep  9 12:34:37 2012 : Reply back to 5 
Sun Sep  9 12:34:42 2012 : Sun Sep  9 12:34:42 2012 : [Req] Send Bcast 
Sun Sep  9 12:34:32 2012 : RX FROM :152.14.189.4 MESG: 
Sun Sep  9 12:34:32 2012 : info  
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.5 
Sun Sep  9 12:34:32 2012 : RX FROM :13 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.9  
Sun Sep  9 12:34:32 2012 : RX FROM :9 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.4  
Sun Sep  9 12:34:32 2012 : RX FROM :14 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.13 
Sun Sep  9 12:34:32 2012 : RX FROM :5 
Sun Sep  9 12:34:32 2012 : #ip=1.1.1.14 
Sun Sep  9 12:34:35 2012 : Reply back to 9 
Sun Sep  9 12:34:35 2012 : Reply back to 14
Sun Sep  9 12:34:36 2012 : Reply back to 13
Sun Sep  9 12:34:37 2012 : Reply back to 4 
Sun Sep  9 12:34:37 2012 : Reply back to 5 
```

在两行“Bcast”之间，我需要搜索一个值，比如 1.1.1.4，如果它同时出现在 ip=1.1.1.1 和回复 1.1.1.4。然后我需要忽略那组。否则我需要将差异写在两个单独的文件中。我尝试在 perl 中这样做。当我在 Bcast 和 Bcast 之间搜索时，没有打印任何内容。我错过了什么吗？这是我写的

```
open my $in,'<',$ARGV[0];
open my $out,'>',"File2.txt";
my $Flag =0;
while(<$in>){
        if (/Bcast/ .. /Bcast/)
        {
          print ;
          if ( ($_ =~ m{ ip=1\.1\.1\.4 }xms) )
          {
                  $Flag=$Flag+1;
                  print " \nMatch is Found !!! Hurray \n" if ($Flag==2);
          }       
        } 
      $Flag=0;
} 
```

请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:47:25.757

`/Bcast/ .. /Bcast/`将在同一条线上开始和停止。`/Bcast/ ... /Bcast/`更有希望，但随后您意识到您正在跳过每个第二个块。

实际上，一旦找到第一个，您总是处于 Bcast 块中，因此您不应该尝试使用触发器来确定您是否处于 Bcast 块中。

```
# 0: Haven't see Bcast
# 1: Haven't seen "#ip=1.1.1.4" in this Bcast.
# 2: Haven't seen "Reply to 1.1.1.4" in this Bcast.
# 3: Found match
my $state = 0;  
while (<>) {   
    if (/Bcast/) {
       $state = 1;
    }

    if ($state == 1) {
       if (/ : \#ip=(\S+)/ && $1 eq '1.1.1.4') {
          $state = 2;
       }
    }
    elsif ($state == 2) {
       if (/ : Reply back to (\S+)/ && $1 eq '1.1.1.4') {
          $state = 3;
          print("Found match\n");
       }
    }
} 
```

请注意，您的原始代码可能会意外匹配`1.1.1.43`。

# c - expat 函数 XML_StartElementHandler - 如何使用它？

> ID：12483724
> 
> 赞同：2
> 
> 时间：2012-09-18T19:32:09.620
> 
> 标签：c, parsing, xml-parsing, expat-parser

我正在使用 expat 编写 xml 解析器。刚看到这个：

```
XML_SetElementHandler
     XML_Parser parser,
     XML_StartElementHandler start,
     XML_EndElementHandler end 
```

我不明白它应该做什么我看到它是一个指向函数的指针：

```
typedef void (*XML_StartElementHandler)(void *userData,
                    const XML_Char *name,
                    const XML_Char **atts); 
```

但我在任何地方都找不到它应该怎么做很想得到一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:25:19.320

您给解析器（指向）两个函数，其中一个在解析器看到 XML 元素的开始时调用（即，一旦它读取开始标记），另一个在它看到结束时调用元素（即读取结束标签）（您必须真正了解元素和标签之间的区别才能进行 XML 解析）。

解析器在元素开头调用的函数使用三个参数调用：

1.  一个通用 ( `void *`) 指针，指向您最初作为“用户数据”传递给解析器的任何内容（如果您确实传递了它）。这是您想要用来在回调之间保持状态的任何内容。
2.  指向包含元素名称文本的字符数组（即字符串）的指针。
3.  一个指向字符串数组的指针（好吧，我在这里不是学究式的正确），其中与元素关联的属性值对的每个部分都有一个成员（即开始标记中列出的属性）。所以，如果`atts[i]`是属性，那么`atts[i+1]`就是它的值。

为元素结尾调用的函数具有较短的参数签名（同样是 IIRC），因为它不会获取属性列表。

对于最常用的 XML，您还需要一个字符处理函数来处理字符数据（即位于开始标记和结束标记之间的内容），并且您需要反复提醒自己一般情况下它*不会*, 一次调用所有字符数据；该数据可能来自几个单独的“块”。

# c - C通过指针将多个int数组存储到另一个数组中

> ID：12483728
> 
> 赞同：1
> 
> 时间：2012-09-18T19:32:19.463
> 
> 标签：c, arrays, pointers, multidimensional-array

如果这令人困惑，我很抱歉......到目前为止，我正在将十进制数转换为二进制数。这样做时，我将二进制表示的数字存储到一个 int 数组中。

EX：对于数字 4。（这是在下面的 dec2bin 中完成的）

```
 temp[0] = 1
    temp[1] = 0
    temp[2] = 0 
```

我想将此数组存储到另一个数组（例如 BinaryArray）中，该数组将包含多个“临时”数组。

我希望 BinaryArray 声明为 main，传递给 dec2bin，并保存当前临时数组的副本。然后转到下一个号码。

我无法弄清楚指针和不需要的东西。如果有人可以帮助我如何在 main 中声明所需的数组以及如何从 dec2bin 添加到它。

谢谢！主要的：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    int main()
    {      

      void dec2bin(int term, int size);

      int size, mincount;
      int * ptr;
      int x;
      x=0;

      scanf("%d %d", &size, &mincount);
      printf("Variables: %d\n", size);
      printf("Count of minterms: %d\n", mincount);

      int input[mincount+1];

      while(x < mincount){
        scanf("%d", &input[x]);
        x++;
      }
      x = 0;

      while(x < mincount){
        dec2bin(input[x], size); 
```

十二月二箱：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #define SIZE 32

    void
    dec2bin(int term,int size){
      int i, j, temp[size], remain, quotient;
      quotient = term;
      i = size-1;
      // set all temp to 0
      for(j=size-1;j>=0; j--){
        temp[j] = 0;
        }

      //change to binary
      while(quotient != 0){
        remain = quotient % 2;
        quotient/=2;
        if(remain != 0){
          temp[i] = 1;
         } else {
          temp[i] = 0;
         }
         i--;
        }

        //print array
        for(i=0; i<size; i++)
          printf("%d", temp[i]);

        printf("\n");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T21:50:26.463

不确定我是否理解您想要做什么，但您似乎想要创建一个“int 数组数组”。例子：

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    int i;
    int n;
    int **myArray;

    n = 10;
    myArray = (int**)malloc(n*sizeof(int*));

    //Usage example
    int myIntArray[] = {1,2,3,4,5};

    myArray[0] = myIntArray;

    //This call should print "4"
    printf("%d\n",myArray[0][3]);

    return;
} 
```

这样，您将拥有一个数组 (myArray)，其中每个元素都是一个整数数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:21:14.167

要“将所有温度设置为 0”，请使用 memset()。我假设您想以二进制显示整数。您可以通过执行逻辑和 0x80000000 然后左移变量来检查每个位。这是一个粗略的例子：

```
int x = 27;
string bin;

for ( int index = 0; index < sizeof(int) * 8; ++index ) {
if ( x & 0x80000000 ) {
    bin += '1';
} else {
    bin += '0';
}
x = x << 1;
}
cout << bin << endl; 
```

为什么要将整数的二进制表示形式存储在整数数组中？我想不出这样做的理由。

# wcf - Tridion 2011 CoreService 连接

> ID：12483731
> 
> 赞同：6
> 
> 时间：2012-09-18T19:32:36.250
> 
> 标签：wcf, tridion, tridion-2011

我正在使用 Tridion 2011 SP1 并使用此处的代码连接到 CoreService：

[http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)

但是当我尝试做任何简单的操作时，例如：

```
XElement resultXml = _coreService.GetListXml(publicationId, filterData); 
```

我收到以下错误消息。

"{"由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'http://www.sdltridion.com/ContentManager/CoreService/2011/ICoreService/Create' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。"}"

有任何想法吗？

完整代码在这里：

```
 RepositoryItemsFilterData filterData = new RepositoryItemsFilterData();
            filterData.ItemTypes = new[]
                           {
                             ItemType.Component,
                             ItemType.Schema
                           };
            filterData.Recursive = true;

             ICoreService _coreService = GetNewClient(); 
             XElement resultXml = _coreService.GetListXml(publicationId, filterData);

       private ICoreService GetNewClient()
        {
            var binding = new BasicHttpBinding()
            {
                MaxBufferSize = 4194304, // 4MB
                MaxBufferPoolSize = 4194304,
                MaxReceivedMessageSize = 4194304,
                ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()
                {
                    MaxStringContentLength = 4194304, // 4MB
                    MaxArrayLength = 4194304,
                },
                Security = new BasicHttpSecurity()
                {
                    Mode = BasicHttpSecurityMode.TransportCredentialOnly,
                    Transport = new HttpTransportSecurity()
                    {
                        ClientCredentialType = HttpClientCredentialType.Windows,
                    }
                }
            };
            _hostname = string.Format("{0}{1}{2}", _hostname.StartsWith("http") ? "" : "http://", _hostname, _hostname.EndsWith("/") ? "" : "/");
            var endpoint = new EndpointAddress(_hostname + "webservices/CoreService.svc/basicHttp_2010");
            ChannelFactory<ICoreService> factory = new ChannelFactory<ICoreService>(binding, endpoint);
            factory.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential(_username, _password);
            return factory.CreateChannel();
        } 
```

**更新：** 感谢 Nuno 和 Frank 的回复，我现在通过添加服务引用使其工作，只是有点好奇为什么我的代码不起作用，因为它创建了以下绑定，据我所知（我很可能错过了一些东西）上面的代码
同样适用于 Nuno 的方法 - 谢谢 Nuno。

`<basicHttpBinding> <binding name="basicHttp_2010"> <security mode="TransportCredentialOnly"> <transport clientCredentialType="Windows" /> </security> </binding> </basicHttpBinding>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:48:35.567

这不是您问题的答案，但这是我现在与核心服务客户打交道的方式：

1.  添加对 [Tridion]\bin\client\Tridion.ContentManager.CoreService.Client.dll 的引用
2.  将[Tridion]\bin\client\Tridion.ContentManager.CoreService.Client.dll.Config的内容复制到我自己的app.config中

然后在代码中这样做：

```
SessionAwareCoreServiceClient client = new SessionAwareCoreServiceClient("netTcp_2011"); 
```

完毕。

PS - 根据 Frank 的建议，将此添加到 Tridion Practice wiki：[http ://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithConfigFile](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithConfigFile)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:48:09.127

看起来您创建的绑定不符合服务器的预期。查看 TCM 服务器上的 .config 并确保客户端创建相同类型的绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:23:53.807

您正在连接到错误的端点。您无法使用“2011”客户端连接到“2010”版本的核心服务。

您应该改为连接到 2011 端点 (.../webservices/CoreService2011.svc/basicHttp)

当然，您也可以更改对 2010 版客户端的引用，但除非您遇到问题，否则我不会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-02T20:52:06.860

我通过在我的应用程序配置中将 /CoreService/2012/ 更改为 /CoreService/2013/ 修复了同样的错误：

```
<endpoint name="netTcp_2012" address="net.tcp://localhost:2660/CoreService/2013/netTcp" binding="netTcpBinding" bindingConfiguration="netTcp" contract="Tridion.ContentManager.CoreService.Client.ISessionAwareCoreService" /> 
```

我怀疑我最初在 Tridion 2011 中创建了我的核心服务应用程序，然后我尝试使用 Tridion 2013 运行它。

# ruby-on-rails - 您如何使用 capistrano 进行滚动部署？

> ID：12483737
> 
> 赞同：5
> 
> 时间：2012-09-18T19:32:44.580
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, capistrano, load-balancing

我们在负载均衡器后面有 2 个实例，与乘客运行相同的 rails 应用程序。当我们部署时，服务器启动时间会导致请求超时。因此，我们有一个脚本，它通过从 LB 中取出一个 Web 服务器来单独更新每个 Web 服务器，使用 cap 进行部署，测试动态页面加载，然后将其放回 LB。

我们怎样才能让 capistrano 用一个命令为我们做这件事呢？我已经能够将其设置为同时部署到所有实例，但它们都同时重新启动并导致站点在 20 秒内不可用。

我在这里想念什么？似乎这应该是一种常见的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-10T01:53:21.173

在 capistrano 中序列化部署实际上并不是那么简单，它喜欢在服务器之间并行化其所有操作。重申一下这个问题，您似乎有几台服务器，并且希望按顺序使每台服务器脱机以更新部署。

`deploy:create_symlink`诀窍是在部署配置中覆盖任务：

```
def perform_task_offline options
  sudo "take_this_server_offline", options
  yield
  sudo "put_this_server_online", options
end

def create_symlink_task options
  # does what your existing deploy:create_symlink did, something like:
  run "rm -f /web/current && ln -s #{release_path} /web/current", options
end

namespace :deploy do

  task :create_symlink, {once: true, except: {no_release: true}} do
    deployed_servers = Array.new

    roles[:app].servers.each do |current_server|
      options = {hosts: current_server}
      deployed_servers.push current_server
      perform_task_offline(options) { create_symlink_task options }
    end
  end
end 
```

在这种情况下`perform_task_offline`，包括在指定的服务器上执行的命令，这些命令`options`将其从负载均衡器中删除，而它`yield`是块`create_symlink_task`，包括 创建部署符号链接。

然后您应该能够运行标准`cap`命令进行部署，您会看到服务器依次离线，创建“当前”符号链接，然后重新启动。

请注意，上面的代码跟踪已成功部署到的服务器`deployed_servers`。如果您希望能够仅在先前已部署到的服务器上回滚活动失败的部署（即，失败发生*在*`on_rollback do`部署本身），您将需要在块内进行类似的循环，但仅在`deployed_servers`.

# django - Django 确认电子邮件。将值从 false 更改为 true

> ID：12483742
> 
> 赞同：3
> 
> 时间：2012-09-18T19:33:04.423
> 
> 标签：django, django-views, django-email

这是我的模型：

```
from django.db import models

class Meeting(models.Model):
    name = models.CharField(max_length=255)
    time = models.DateTimeField()
    confirmed = models.BooleanField(default=False) 
```

这是我的表格：

```
from django import forms

class MeetingForm(forms.Form):
    name = forms.CharField(max_length=100)
    time = forms.DateTimeField()
    user_name = forms.CharField(max_length=100)
    user_email = forms.EmailField() 
```

如何创建一个视图，通过链接向用户发送邮件，并且当用户单击此链接时，confrimed 字段会将值更改为 true？

链接是我最大的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:52:04.577

你可以做这样的事情

模型

```
import random
import string

class Meeting(models.Model):
    name = models.CharField(max_length=255)
    time = models.DateTimeField()
    confirmed = models.BooleanField(default=False)
    key = models.CharField(max_length=32) 

    def save(self, *args, **kwargs):
        '''
        On save generate key which will be sent in email
        '''
        self.key = ''.join(random.choice(string.letters) for i in xrange(32))
        super(Meeting, self).save(*args, **kwargs)
        return self 
```

视图.py

```
def confirm(request, key):
    try:
        meeting = Meeting.objects.get(key=key)
    except Meeting.DoesNotExist:
        # wrong key, do something, redirect to somewhere etc
        template = 'error.html'
    else:
        meeting.confirmed = True
        meeting.save()
        template = 'success.html'
    render(request, template)

def send_email(request):
    email = request.user.email
    meeting = Meeting.objects.get(...your condition here...)
    send_mail('Confirmation email',
              # this is a link you wanted to
              '<a href="%s">confirm</a>' % reverse('user_confirm',
                                                   kwargs={'key': meeting.key}),
              'from@youremail.com', [email])
    render(request, 'mailsent.html') 
```

网址.py

```
urlpatterns = patterns('',
    url(r'^confirm/(?P<key>[\w]{32})/$', 'yourapp.views.confirm',
        name='user_confirm'),
    ) 
```

# .htaccess - RewriteRules 的可能改进

> ID：12483746
> 
> 赞同：1
> 
> 时间：2012-09-18T19:33:18.997
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

所以，我只是设法为我不久前开发的一个自定义网站编写了一些内容`RewriteCond`，`RewriteRule`由于我是这一切的初学者，我希望有人会审查我的代码并告诉我是否有任何需要改进的地方它本来就很好。

我想要实现的是从`/?mod=x`to`/x`和 from `/?mod=x&type=y-z`to转换`/x/y-z`

这就是我现在所做的：

```
# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

RewriteCond %{REQUEST_URI} /([a-z]+)/([a-z\-]+)$ [NC]
RewriteRule ^([^/]*)/([^/]*)$ /?mod=$1&tipo=$2 [NC,L]

RewriteCond %{REQUEST_URI} /([a-z]+)/?$ [NC]
RewriteRule ^([^/]*)$ /?mod=$1 [NC,L] 
```

那么，一切都好吗？或者，还有改进的余地吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:34:36.860

您可以合并这些行并删除`RewriteCond`：

```
RewriteCond %{REQUEST_URI} /([a-z]+)/([a-z\-]+)$ [NC]
RewriteRule ^([^/]*)/([^/]*)$ /?mod=$1&tipo=$2 [NC,L]

RewriteCond %{REQUEST_URI} /([a-z]+)/?$ [NC]
RewriteRule ^([^/]*)$ /?mod=$1 [NC,L] 
```

至：

```
RewriteRule ^([a-z]+)/([a-z\-]+)$ /?mod=$1&tipo=$2 [NC,L]

RewriteRule ^([a-z]+)$ /?mod=$1 [NC,L] 
```

否则，这看起来不错。

* * *

> 我正在尝试添加最后一项改进（关于 htaccess），那就是我希望它将 /?mod=inicio 重定向到 /inicio。所以我试图用下面的代码来做，但它一直像这样 /inicio?mod=inicio 构建 url

此规则与您的其他规则直接冲突。它们将相互重写，因为一条规则的目标是另一条规则的正则表达式匹配。此外，您需要`?`在目标末尾添加 a 来删除实际的查询字符串。您需要匹配实际请求：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?mod=([a-z]+)
RewriteRule ^ /%1? [L] 
```

# java - 用 Java 劫持音频？

> ID：12483747
> 
> 赞同：4
> 
> 时间：2012-09-18T19:33:20.880
> 
> 标签：java, audio, audio-recording

我一直在尝试修改[此页面底部的](http://www.java-tips.org/java-se-tips/javax.sound/capturing-audio-with-java-sound-api.html)一些代码，以便使用 Java 劫持系统音频。这是我在 captureAudio() 中修改的部分：

```
Mixer mixer = AudioSystem.getMixer(mixerInfo[0]); // "Java Sound Audio Engine"
final TargetDataLine line = (TargetDataLine) mixer.getLine(info); 
```

现在当我运行这段代码时，它会抛出这个：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Line unsupported: interface TargetDataLine supporting format PCM_SIGNED 44100.0 Hz, 16 bit, mono, 2 bytes/frame, big-endian 
```

我尝试更改我的格式以适应所需的格式，但异常没有发生并且没有记录任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:37:59.137

试试以下

```
TargetDataLine line;
DataLine.Info info = new DataLine.Info(TargetDataLine.class, 
    format); // format is an AudioFormat object
if (!AudioSystem.isLineSupported(info)) {
    // Handle the error.
    }
    // Obtain and open the line.
try {
    line = (TargetDataLine) AudioSystem.getLine(info);
    line.open(format);
} catch (LineUnavailableException ex) {
        // Handle the error.
    //... 
} 
```

它取自[http://docs.oracle.com/javase/tutorial/sound/accessing.html](http://docs.oracle.com/javase/tutorial/sound/accessing.html)

要创建 AudioFormat ，请使用

> new AudioFormat(float sampleRate, int sampleSizeInBits, int channels, boolean signed, boolean bigEndian); 采样率 = 44100f；sampleSizeInBits = 16; 频道 = 2; 签名=真；bigEndian = true/false 哪个有效

以上配置大多适用于大多数平台，包括Linux和windows，目前还没有尝试过Mac

# jquery - 将页脚置于底部

> ID：12483748
> 
> 赞同：3
> 
> 时间：2012-09-18T19:33:24.517
> 
> 标签：jquery, css

我想将页脚放在页面底部。

例如在没有太多内容的页面上，我仍然需要底部的页脚，但是如果内容长于页面的高度，则必须将页脚向下推。

可以只用 CSS 完成还是我需要添加一些 jQuery 魔法？

![在此处输入图像描述](../Images/0a51573eb43190f8589c803217ce5721.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:35:29.677

您应该使用其中一种[粘性页脚](http://ryanfait.com/sticky-footer/)技术

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:36:30.463

这可以使用 CSS 来完成。

1) 在您的 HTML 中设置页脚

```
<body>
  ...
  <div id="footer">...</div>
</body> 
```

2）使用CSS定位将其放置在底部。

```
html {
  padding-bottom:50px;
  position:relative;
}

body {
  position:relative;
  min-height:100%;
}

#footer {
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:50px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T17:59:31.343

所有以前的 CSS 解决方案都要求页脚高度保持不变。对于所有合适的浏览器，以下解决方案解决了动态更改页脚高度的问题。

```
html { height: 100%; }

body {
    margin        : 0;
    min-height    : 100%;
    display       : flex;
    flex-direction: column;
}

body > .content { flex-grow:   1; background: ghostwhite; }
body >  footer  { flex-shrink: 1; background: gold; }
```

```
<div class="content"> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean sagittis luctus mauris nec lacinia. Maecenas egestas, nisl sed volutpat consectetur, urna orci bibendum lorem, sit amet maximus dolor massa et mi. Duis elit neque, interdum nec euismod sed, interdum ac dui. Maecenas non ornare nibh. Vestibulum malesuada et sem quis mattis. Phasellus a justo non dolor porta faucibus sed id lectus. Nullam imperdiet, velit eu convallis ornare, ipsum augue vestibulum lectus, finibus bibendum nulla libero a augue. Aenean eleifend sapien eu placerat facilisis. Vestibulum pulvinar pretium neque, in ullamcorper orci semper nec. Donec rhoncus velit magna, eget dapibus augue cursus quis. Proin in nisi ut tortor finibus tristique vitae vel libero. Aliquam placerat diam nec consectetur tristique. Praesent bibendum diam id velit pellentesque facilisis. In quis odio nec tortor cursus commodo in eu nisl. Nullam non interdum enim, a faucibus metus. Mauris posuere erat id vestibulum eleifend.  </div>
<footer> {{ footer }} </footer>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T19:48:19.813

像这样在您的页脚上方创建另一个 div 并为其添加 clear ，它将推动您的页脚：

```
<style type="text/css">
.push{
clear:both;
height:5px;
width:5px;
display:block;
position:relative;
margin:0 auto;
}
</style>

  //HTML CODE
  <div class="push"></div>     
  <div class="fotter">
  </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T19:38:17.537

应用这篇文章中描述的技术：http: [//matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)。

我发现自己面临同样的情况，我认为这是使用粘性页脚的最全面描述的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-06T15:22:11.510

这可以仅使用 CSS 来完成。

这是包含导航、主要和页脚的 HTML 文件的主要部分。

```
...
<nav class="nav"> ... </nav>
<main class="main"> ... </main>
<footer class="footer"> ... </footer>
... 
```

在您的 CSS 中添加以下行

```
...
.main {
    ...
    min-height: calc(100vh - <height of your footer>)
}
... 
```

现在，如果 main 中没有内容，则 min-height 将确保使 main 占据整个视口，如果 main 中有任何内容，则 min-height 无关紧要。

# ios5 - DaveJohnson Phonegap/Facebook 插件问题

> ID：12483751
> 
> 赞同：0
> 
> 时间：2012-09-18T19:33:34.860
> 
> 标签：ios5, cordova, xcode4.3, phonegap-plugins

我正在尝试将 facebook 集成到我的 cordova 1.8.1 应用程序中。我尝试了几个不同的插件，却发现它们不支持cordova 1.8。DaveJohnson 的插件据说支持cordova 1.8，但我遇到了问题。当我单击示例索引页面中的登录按钮时，我遇到了很多错误：

```
2012-09-18 14:44:00.327 LCBCChurch[4597:707] Multi-tasking -> Device: YES, App: YES
2012-09-18 14:44:00.337 LCBCChurch[4597:707] Multi-tasking -> Device: YES, App: YES
2012-09-18 14:44:02.625 LCBCChurch[4597:707] CDVPlugin class FacebookConnectPlugin (pluginName: org.apache.cordova.facebook.Connect) does not exist.
2012-09-18 14:44:02.629 LCBCChurch[4597:707] ERROR: Plugin 'org.apache.cordova.facebook.Connect' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-09-18 14:44:02.630 LCBCChurch[4597:707] FAILED pluginJSON = {"className":"org.apache.cordova.facebook.Connect","methodName":"init","arguments":["org.apache.cordova.facebook.Connect1","appid"]}
2012-09-18 14:44:02.632 LCBCChurch[4597:707] CDVPlugin class FacebookConnectPlugin (pluginName: org.apache.cordova.facebook.Connect) does not exist.
2012-09-18 14:44:02.634 LCBCChurch[4597:707] ERROR: Plugin 'org.apache.cordova.facebook.Connect' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-09-18 14:44:02.635 LCBCChurch[4597:707] FAILED pluginJSON = {"className":"org.apache.cordova.facebook.Connect","methodName":"getLoginStatus","arguments":["org.apache.cordova.facebook.Connect2"]}
2012-09-18 14:44:16.426 LCBCChurch[4597:707] CDVPlugin class FacebookConnectPlugin (pluginName: org.apache.cordova.facebook.Connect) does not exist.
2012-09-18 14:44:16.428 LCBCChurch[4597:707] ERROR: Plugin 'org.apache.cordova.facebook.Connect' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-09-18 14:44:16.429 LCBCChurch[4597:707] FAILED pluginJSON = {"className":"org.apache.cordova.facebook.Connect","methodName":"login","arguments":["org.apache.cordova.facebook.Connect3","email"]} 
```

我什至遵循了 T 的视频教程，但我遇到了这些失败。有谁知道这些是什么意思以及我如何解决它们。非常感谢您提供的任何帮助，谢谢！

- - - 更新 - - - -

我认为这是我加载 .m 和 .h 文件的方式。我没有使用“引用”，而是将其添加为目标。

但是现在我遇到了另一个错误。登录按钮将我引导至 facebook，但现在我在 fb 中收到错误“发生错误。请稍后再试。” 任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:08:30.903

确保您已在 eventlistener 代码片段中添加了 facebook id（就在 index html 的末尾。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:41:50.947

确保将条目添加到 Cordova.plist。“org.apache.cordova.facebook.Connect”作为键，FacebookConnectPlugin 作为值。

然后，确保您已经创建了一个 Facebook 应用程序并将您的捆绑包 ID 放入 Native IOS 应用程序部分。不要忘记也启用登录。

# visual-studio-2010 - QT：使用 QPixmap 将图像更新为 QLabel

> ID：12483752
> 
> 赞同：1
> 
> 时间：2012-09-18T19:33:42.583
> 
> 标签：visual-studio-2010, qt, user-interface

我正在使用 Visual Studio 2010 中的 QT 集成设计器来设计一个简单的 GUI。这是我想要做的：我想单击一个名为“**更新”**的按钮并使用它来更改显示的图像。我已经验证我能够通过按下更新来触发信号并使用文本字段上的插槽来清除。但似乎无法更改使用 Signal/Slot 方法显示的图像....

这是相关的代码片段（GUI.cpp）：

```
 void GUI::changeImage() 
 {
     ui.Image->updatesEnabled();
     ui.Image->setPixmap(QPixmap("D:\\Documents\ and\ Settings\\Image.jpg"));
     ui.Image->update();
 }

GUI::GUI(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);

    connect(ui.updateButton, SIGNAL(clicked()), ui.textField, SLOT (clear()) );
    connect(ui.updateButton, SIGNAL(clicked()), ui.Image, SLOT ( changeImage() ) );
}

GUI::~GUI()
{

} 
```

难道我做错了什么？

编辑：gui.h 的代码

```
#include <QtGui/QMainWindow>
#include "ui_gui.h"

class GUI : public QMainWindow
{
    Q_OBJECT

public:
    GUI(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~GUI();

private:
    Ui::GUIClass ui;
    void changeImage() ;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:49:21.993

slot 属于`GUI`类实例，不属于`ui.Image`，因此您应该在调用`this`中用作目标。`connect`

```
connect(ui.updateButton, SIGNAL(clicked()), this, SLOT ( changeImage() ) ); 
```

插槽必须在“插槽”部分下声明：

```
private slots:
    void changeImage() ; 
```

# c++ - 如何在 C++ 中定义匿名函数？

> ID：12483753
> 
> 赞同：47
> 
> 时间：2012-09-18T19:33:43.690
> 
> 标签：c++, function, syntax, inline

我可以在 C++ 内联中定义函数吗？我不是在谈论 lambda 函数，而不是`inline`导致编译器优化的关键字。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-18T19:37:13.813

C++11为该语言添加了[lambda 函数。](https://en.wikipedia.org/wiki/Anonymous_function#C++_(since_C++11))该语言的早期版本（C++98 和 C++03）以及所有当前版本的 C 语言（C89、C99 和 C11）都不支持此功能。语法如下：

```
[capture](parameters)->return-type{body} 
```

例如，要计算向量中所有元素的总和：

```
std::vector<int> some_list;
int total = 0;
for (int i=0;i<5;i++) some_list.push_back(i);
std::for_each(begin(some_list), end(some_list), [&total](int x) {
  total += x;
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-18T19:38:13.993

在 C++11 中，您可以使用闭包：

```
void foo()
{
   auto f = [](int a, int b) -> int { return a + b; };

   auto n = f(1, 2);
} 
```

在此之前，您可以使用本地类：

```
void bar()
{
   struct LocalClass
   {
       int operator()(int a, int b) const { return a + b; }
   } f;

   int n = f(1, 2);
} 
```

两种版本都可以引用环境变量：在本地类中，可以添加引用成员，并在构造函数中绑定；对于闭包，您可以将*捕获列表*添加到 lambda 表达式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-18T19:37:11.540

我不知道我是否理解你，但你想要一个 lambda 函数？

[http://en.cppreference.com/w/cpp/language/lambda](http://en.cppreference.com/w/cpp/language/lambda)

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <functional>

    int main()
    {
        std::vector<int> c { 1,2,3,4,5,6,7 };
        int x = 5;
        c.erase(std::remove_if(c.begin(), c.end(), [x](int n) { return n < x; } ), c.end());

        std::cout << "c: ";
        for (auto i: c) {
            std::cout << i << ' ';
        }
        std::cout << '\n';

        std::function<int (int)> func = [](int i) { return i+4; };
        std::cout << "func: " << func(6) << '\n'; 
    } 
```

如果您没有 c++11x，请尝试：

[http://www.boost.org/doc/libs/1_51_0/doc/html/lambda.html](http://www.boost.org/doc/libs/1_51_0/doc/html/lambda.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-18T19:39:32.633

在 C++11 之前，如果要将函数*本地化*为函数，可以这样做：

```
int foo () {
    struct Local {
        static int bar () {
            return 1;
        }
    };
    return Local::bar();
} 
```

或者如果你想要更复杂的东西：

```
int foo (int x) {
    struct Local {
        int & x;
        Local (int & x) : x(x) {}
        int bar (int y) {
            return x * x + y;
        }
    };
    return Local(x).bar(44);
} 
```

但是，如果您想要 C++11 之前的真正函数文字，那是不可能的。

# google-apps-script - UiApp 中的布局与非布局面板

> ID：12483758
> 
> 赞同：0
> 
> 时间：2012-09-18T19:33:52.977
> 
> 标签：google-apps-script

通过阅读 GWT 文档，我知道诸如 DockLayoutPanel 之类的“布局”面板适用于*标准*模式，而诸如 DockPanel 之类的“非布局”面板适用于*怪癖*模式。

并且这两个类都在[UI Service API](https://developers.google.com/apps-script/service_ui)中定义。但是UiInstance只有createDockPanel方法，没有createDockLayoutPanel方法？！那么如何创建布局面板呢？其实只有Split Layout在UiInstance中有create方法！？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:26:00.497

这似乎是一个错误，您应该在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1841)上提交问题。

# vbscript - 尝试使用 WMI 显示系统上网络适配器的 MTU 值

> ID：12483760
> 
> 赞同：0
> 
> 时间：2012-09-18T19:34:02.140
> 
> 标签：vbscript, wmi, mtu

我有这个只显示空行的子程序。

```
'*************************************************************************
' Check MTU
'*************************************************************************
Sub CheckMTU()
   WScript.Echo("Check if MTU Size is set to 1300")
   WScript.Echo("------------------------------------")
   Set colNetwork = objWMISrvc.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration WHERE IPEnabled = True")
   For Each objItem in colNetwork
      WScript.Echo(objItem.MTU & vbCrLf)
   Next
End Sub 
```

我想测试一下网络适配器的 MTU 值是否为 1300。这将在多台机器上运行，我遇到的问题是注册表中网络适配器的名称总是不同的。如果我的实现有效，那就太好了......

有任何想法吗？

编辑：我将子程序更改为此，但它不起作用。

```
'*************************************************************************
' Check MTU
'*************************************************************************
Sub CheckMTU()
   Dim intResult
   WScript.Echo("Verify MTU Size is 1300\. Changes MTU Size to 1300 ")
   WScript.Echo("------------------------------------")
   Set colNetwork = objWMISrvc.ExecQuery("SELECT * FROM Win32_NetworkAdapter WHERE IPEnabled = True") 'WHERE IPEnabled = True
   For Each objItem in colNetwork
      WScript.Echo objItem
      intResult = objItem.SetMTU(1300)
      WScript.Echo intResult
   Next
   If intResult = 0 or intResult = 1 Then
      WScript.Echo("Network Adapter MTU Value is set to 1300\. Test PASSED" & vbCrLf)
   Else
      WScript.Echo("Network Adapter MTU Value can't be set to 1300\. Test FAILED" & vbCrLf)
   End If
End Sub 
```

它甚至没有打印出 intResult 或 objItem。几乎感觉好像它没有从 colNetwork 获得任何东西。

有什么建议么？我应该发一个新帖子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:04:16.540

改变：

```
WScript.Echo(objItem.MTU & vbCrLf) 
```

到：

```
WScript.Echo objItem.MTU 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:26:28.773

不是 100% 确定为什么没有 MTU 值。但是您始终可以调用**SetMTU**方法设置 MTU 值：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa393463(v=vs. 85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393463(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T22:42:43.703

我认为是因为这个值是用来覆盖默认值的。

```
"Overrides the default Maximum Transmission Unit (MTU) for a network interface." 
```

如果为null，则使用默认值，如果不是，则覆盖默认值。您可以使用以下 netsh 命令查看驱动程序报告的默认 MTU 值：

```
netsh interface ip show subinterfaces 
```

# php - 从谷歌搜索中删除并保护 /admin/

> ID：12483761
> 
> 赞同：1
> 
> 时间：2012-09-18T19:34:04.767
> 
> 标签：php, html

我有一个为我的网站定制设计的脚本，并且 /admin/ 出现在谷歌搜索中。我怎样才能使 /admin/ 对其他人不可见和不可知。至少在谷歌或可搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:37:20.250

正如 andrewsi 所述，您创建一个 robots.txt 文件并输入以下内容：

```
User-agent: *

Disallow: /admin 
```

将其放在您网站的根目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:37:28.843

创建一个名为的文件`robots.txt`并将其放在您网站的根目录中。添加以下内容：

```
User-agent: *
Disallow: /admin/ 
```

[这一切都在robotstxt.org](http://www.robotstxt.org/robotstxt.html)上进行了更详细的解释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:37:32.847

使用`robots.txt`具有以下内容的文件：

```
User-agent: *
Disallow: /admin/ 
```

然而，并不是所有的爬虫都遵守这个文件。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T19:38:32.143

我所做的是返回 a `404 not found`，除非用户已经登录。将登录 url 放在 /admin 上方。

结合[robots.txt](http://www.robotstxt.org/robotstxt.html)应该可以解决这个问题。

但是，使用 robots.txt 会提醒那些不怀好意的人（黑客等）您有一个要攻击的 url。我从未将管理仪表板放在 robots.txt 中——我只是否认它们存在。

```
<?php

$loggedIn = false; // replace with how you track logged in status
if ( ! $loggedIn )
{
    header( 'HTTP/1.0 404 Not Found' );
    echo '<h1>404 - Not Found</h1>';
    exit();
} 
```

# r - 查找与点图匹配的函数

> ID：12483762
> 
> 赞同：0
> 
> 时间：2012-09-18T19:34:15.530
> 
> 标签：r, ggplot2

```
 ggplot(test,aes(x=timepoints,y= mean,ymax = mean + sde, ymin = mean  - sde)) + 
       geom_errorbar(width=2) +
       geom_point() +
       geom_line() +
       stat_smooth(method='loess') + 
       xlab('Time (min)') +
       ylab('Fold Induction') +          
       opts(title = 'yo') 
```

![在此处输入图像描述](../Images/db3e8b9286f88b571ed23b48b7c61dbe.png)

我可以绘制蓝色的“黄土”线。但是有没有办法找到蓝色“黄土”线的数学函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:27:36.033

Rule Number One: not all distributions have a (closed-form) function which generates them. Yes, you can create a close fit by way of splines, or calculating moments (mean, variance, skew, etc) and building the series, so your choice depends on whether you intend to interpolate, extrapolate, or just "view" the resultant function.

In the scientific world, it's more common to have a theory, or premise, about the behavior behind your data. You can then do standard (e.g. `nls`) fitting methods to see how well the proposed fit function can be made to match your data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:22:00.427

要了解如何计算黄土线，请参阅`loess.demo`TeachingDemos 包中的函数。这是一个交互式图形演示，它将显示如何根据数据和带宽参数为每个 x 值计算每个点的 y 值（它还显示了原始黄土拟合和通常拟合的样条曲线的差异黄土估计）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:38:25.520

您可以获得常规序列的预测：

```
 fit <-loess( mean ~ timepoints, data=test)
 fit.points <- predict(fit, newdata=  data.frame(
                  speed = seq(min(timepoints), max(timepoints), length=100)), 
              se = FALSE)
 fitdf <- dataframe(x = seq(min(timepoints), max(timepoints), length=100)
                    y = fit.points) 
```

然后，您可以使用适当程度的样条曲线拟合该组点。三次样条拟合可以`loess`比拟合更容易描述。将答案同步到您提供的数据示例以使用的变量名称会更容易。该图似乎不是用该代码创建的。

# java - 河内塔递归算法

> ID：12483764
> 
> 赞同：2
> 
> 时间：2012-09-18T19:34:16.860
> 
> 标签：java, algorithm, recursion

我在理解这个汉诺塔递归算法时遇到了问题：

```
public class MainClass {
  public static void main(String[] args) {
    int nDisks = 3;
    doTowers(nDisks, 'A', 'B', 'C');
  }

  public static void doTowers(int topN, char from, char inter, char to) {
    if (topN == 1){
      System.out.println("Disk 1 from " + from + " to " + to);
    }else {
      doTowers(topN - 1, from, to, inter);
      System.out.println("Disk " + topN + " from " + from + " to " + to);
      doTowers(topN - 1, inter, from, to);
    }
  }
} 
```

输出是：

```
Disk 1 from A to C
Disk 2 from A to B
Disk 1 from C to B
Disk 3 from A to C
Disk 1 from B to A
Disk 2 from B to C
Disk 1 from A to C 
```

我不明白我们如何得到：

```
Disk 1 from C to B
Disk 3 from A to C
Disk 1 from B to A 
```

有人可以解释一下吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T22:41:08.040

将 N-1 个（除最后一个之外的所有磁盘）塔从 A 移动到 B，然后将第 N 个磁盘从 A 移动到 C，最后将之前移动到B，从 B 到 C。这适用于任何时候移动具有多个磁盘的塔，对于 1 个磁盘的塔，您只需移动其唯一的磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:39:23.647

如果我没记错的话，您可以每转移动 1 个磁盘一个钉子，对吗？因此，您将第一个磁盘从 a 移动到 b，然后将 b 移动到 c。也就是2个动作。然后我们现在可以将磁盘 2 从 a 移动到 b。现在我们可以将磁盘 1 从 c 移回 b。现在磁盘 3 在 A 上，磁盘 2 和 1 在 a 上。现在我们将磁盘 1 从 a 移动到 b，然后再移动到 c。不，我们需要以正确的顺序在磁盘 3 上获取磁盘 1 和 2。因此，我们通过将磁盘 1 从 B 移动到 A 来清除磁盘 1。这允许我们将磁盘 2 从 B 移动到 C。现在我们将磁盘 1 从 a 移动到 b，然后移动到 c，这样就完成了。

这是否回答你的问题？

# javascript - 填充表单字段的多个 AJAX 请求？

> ID：12483765
> 
> 赞同：2
> 
> 时间：2012-09-18T19:34:18.967
> 
> 标签：javascript, ajax, backbone.js

假设我的基于 Backbone.js 的 Web 应用程序有一个包含多个下拉菜单的表单，每个下拉菜单包含不同类型的数据，通过 API 数据填充。

当我使用 Backbone.js 时，我的应用程序逻辑完全位于客户端。因此，我不想通过典型的服务器端 MVC 方法来填充这些下拉列表，即通过服务器端将数据注入 MVC 视图；相反，我希望 Backbone 检索这些下拉列表的数据。

所以，我的问题是：要填充三个不同的下拉菜单，我会向我的 API 执行三个不同的 AJAX 请求吗？例子：

1.  获取/类别/
2.  获取/国家/
3.  获取/车辆/模型

或者从 RESTful 的角度来看，将这些组合成一些“元”API 方法是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:49:20.840

我认为 Backbone 对此非常不可知论。如果您不介意提出三个请求，那么这样做当然可以。如果您想对您的 API 进行一次调用，将所有三组数据编译在一起并返回它们，那么在返回时进行处理也是完全合法的。

# java - 持久性范围失败？

> ID：12483767
> 
> 赞同：0
> 
> 时间：2012-09-18T19:34:25.263
> 
> 标签：java, hibernate, ejb, persistence

我确实完全按照搜索 8.2.2 Persistence Unit Scope 之一中的规范进行操作，但它未能抛出异常，例如

```
15:08:09,956 WARNING [FileZippedJarVisitor] Unable to find file (ignored): file:entities1.jar
java.io.FileNotFoundException: entities1.jar (The system cannot find the file specified)
...similarly other one too 
```

这是耳朵的结构：

```
 |-ear--
           |-lib--|... some libs ...
           |      |--my-persistence-xml.jar
              |--entities1.jar
              |--entities2.jar

           |-ejb-1.jar
           |-web-1.war 
```

这是坚持：

```
 <persistence-unit name="pu" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/mypu</jta-data-source>
        <jar-file>entities1.jar</jar-file>
        <jar-file>entities2.jar</jar-file>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true" />
        </properties>
     </persistence-unit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:32:54.000

`persistence.xml`应该放在模块的`META-INF`文件夹中`ejb-jar`。在这种情况下，您可以`persistence.xml`不使用`<jar-file>`. 所有实体都将自动注册。

如果你想使用`<jar-file>`，那么路径应该是

```
<jar-file>../../entities1.jar</jar-file>
<jar-file>../../entities2.jar</jar-file> 
```

什么意思`my-persistence-xml.jar`。是`jar`或`xml`？

# android - 基本的 Android XML 错误

> ID：12483770
> 
> 赞同：0
> 
> 时间：2012-09-18T19:34:28.687
> 
> 标签：android, xml

这是与我遇到的错误有关的屏幕截图

我怎样才能解决这个问题 ？

![错误](../Images/c0772bde73965070d5b534f57e50e886.png)

我真的很感激一些帮助

这是 XML 代码：

```
 <?xml​version="1.0" ​encoding="utf-8"?>
    <LinearLayout​xmlns:android="http://schemas.android.com/apk/res/android"
​​​    android:orientation="vertical"
​​​​    android:layout_width="fill_parent"
​​​    ​android:layout_height="fill_parent"​&gt;
    <TextView​​
​​​​    android:layout_width="fill_parent"​
​​​​    android:layout_height="wrap_content"​
​​​​    android:text="@string/hello"​/>
​​​​
    <TextView
​​​​    android:layout_width="fill_parent"
​​​​    android:layout_height="wrap_content"
​​​​    android:text="This is my first Android Application!" />
    <Button
​​​​    android:layout_width="fill_parent"
​​​​    android:layout_height="wrap_content"
​​​​    android:text="And this is a clickable button!" />
​​​​
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:36:02.617

`Strings.xml`我相信（在 res->values 中）没有名为“hello”的字符串。

请检查，可能这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:48:29.780

```
LinearLayout​xmlns:android="http://schemas.android.com/apk/res/android" 
```

需要是

```
LinearLayout ​xmlns:android="http://schemas.android.com/apk/res/android" 
```

没有那个空格，第一个 XML 标记是无效的。

完整的 XML 将是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is my first Android Application!" />

    <Button android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="And this is a clickable button!" />

</LinearLayout> 
```

# eclipse - Eclipse：在导出为可运行 jar 时包含源代码

> ID：12483771
> 
> 赞同：9
> 
> 时间：2012-09-18T19:34:30.740
> 
> 标签：eclipse, jar

我了解如何在 eclipse 中创建可运行的 .jar 文件时包含其他需要的库或外部资源，但我没有看到也包含 src .java 文件的选项。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T19:39:43.817

在`Export --> Jar File` 对话框中，您可以选择包含源文件和资源。

![在此处输入图像描述](../Images/bf9f7e49ef4fceeaa6364a48674cd933.png)

要使标准 Jar 文件可运行，您只需要自己添加/包含适当的[MANIFEST.MF](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html) ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T07:19:55.173

导出到可运行的 jar。使用 WinRAR 打开可运行 Jar。单击添加按钮，选择 src.zip 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T11:19:03.303

我知道这是答案很晚了，但对于那些还在读这个的人：

Eclipse 有这个选项。你可能只是没有注意到它。从什么版本开始我就没有检查过，Eclipse Luna 肯定有。

*   `Export --> Jar File`
*   然后不要点击`Finish`，而是点击`Next`。
*   你有更多的选择。
*   您可能必须单击`Next`两次才能进行`Main Class`选择。

# java - 在 Android 布局上插入列行

> ID：12483772
> 
> 赞同：2
> 
> 时间：2012-09-18T19:34:32.627
> 
> 标签：java, android, android-layout, layout, user-interface

我正在尝试在 Android 应用程序上插入垂直线，但在操作上遇到问题。

我的布局目前设计为已经完成的表格和行布局。谁能建议在布局上插入跨越多个表格行的垂直线的最佳方法？我不能做一个背景颜色，因为最后一个是不同的颜色和虚线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T13:27:33.213

我不确定，但会尝试使用此代码。如

用于水平线

```
 <View
            android:layout_width="fill_parent"
            android:layout_height="1dip"
            android:layout_marginBottom="3dp"
            android:layout_marginTop="3dp"
            android:background="#000000" /> 
```

对于垂直线

```
 <View
            android:layout_width="1dip"
            android:layout_height="fill_parent"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp"
            android:background="#000000" /> 
```

在这里，您可以控制边距，填充可满足您的需求。祝你好运。

# perl - 如何从大哈希中实例化 Moose 类

> ID：12483775
> 
> 赞同：3
> 
> 时间：2012-09-18T19:34:47.853
> 
> 标签：perl, moose

我有一个很多层次的大哈希，我想把这个哈希变成一组 Moose 类。

哈希看起来像这样：

```
my %hash = (
    company => {
        id => 1,
        name => 'CorpInc',
        departments => [
            {
                id => 1,
                name => 'Sales',
                employees => [
                    {
                        id => 1,
                        name => 'John Smith',
                        age => '30',
                    },
                ],
            },
            {
                id => 2,
                name => 'IT',
                employees => [
                    {
                        id => 2,
                        name => 'Lucy Jones',
                        age => '28',
                    },
                    {
                        id => 3,
                        name => 'Miguel Cerveza',
                        age => '25',
                    },
                ],
            },
        ],
    }
); 
```

还有驼鹿类：

```
package Company;
use Moose;

has 'id'   => (is => 'ro', isa => 'Num');
has 'name' => (is => 'ro', isa => 'Str');
has 'departments' => (is => 'ro', isa => 'ArrayRef[Company::Department]');
1;

package Company::Department;
use Moose;

has 'id'   => (is => 'ro', isa => 'Num');
has 'name' => (is => 'ro', isa => 'Str');
has 'employees' => (is => 'ro', isa => 'ArrayRef[Company::Person]');
1;

package Company::Person;
use Moose;

has 'id'         => (is => 'ro', isa => 'Num');
has 'first_name' => (is => 'ro', isa => 'Str');
has 'last_name'  => (is => 'ro', isa => 'Str');
has 'age'        => (is => 'ro', isa => 'Num');
1; 
```

将此哈希转换为 Company 对象的最佳方法是什么？

到目前为止我考虑过的选项是：

1.  手动循环 %hash，找到最深的“类”（例如 Person），首先创建这些，然后手动将它们添加到新创建的更高级别的类（部门）中，依此类推。
2.  为每个类添加某种强制功能，这让我可以执行 Company->new(%hash) 之类的操作，并使每个类创建自己的“子类”（通过强制）
3.  将 %hash 转换为类似于 MooseX::Storage 序列化的结构，然后使用 MooseX::Storage 为我实例化所有内容......

还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:05:23.107

您可以有一个[BUILDARGS](https://metacpan.org/module/Moose%3a%3aManual%3a%3aConstruction#BUILDARGS)处理程序，它将这些插槽中的未受祝福的引用转换为对象。强制可能是最好的，但它需要做更多的事情。（除非这一切都来自 RDBMS，在这种情况下使用[`DBIx::Class`](http://p3rl.org/DBIx%3a%3aClass)）。

```
#!/usr/bin/env perl

use warnings;
use strict;

package Company;
use Moose;

has 'id'   => (is => 'ro', isa => 'Num');
has 'name' => (is => 'ro', isa => 'Str');
has 'departments' => (is => 'ro', isa => 'ArrayRef[Company::Department]');

sub BUILDARGS {
  my $self = shift;
  my $args = $self->SUPER::BUILDARGS(@_);
  @{ $args->{departments} } = 
    map { eval{ $_->isa('Company::Department') } ? $_ : Company::Department->new($_) }
    @{ $args->{departments} };

  return $args;
};

package Company::Department;
use Moose;

has 'id'   => (is => 'ro', isa => 'Num');
has 'name' => (is => 'ro', isa => 'Str');
has 'employees' => (is => 'ro', isa => 'ArrayRef[Company::Person]');

sub BUILDARGS {
  my $self = shift;
  my $args = $self->SUPER::BUILDARGS(@_);
  @{ $args->{employees} } = 
    map { eval{ $_->isa('Company::Person') } ? $_ : Company::Person->new($_) }
    @{ $args->{employees} };

  return $args;
};

package Company::Person;
use Moose;

has 'id'         => (is => 'ro', isa => 'Num');
has 'name'       => (is => 'ro', isa => 'Str');
has 'age'        => (is => 'ro', isa => 'Num');

package main;

my %hash = (
    company => {
        id => 1,
        name => 'CorpInc',
        departments => [
            {
                id => 1,
                name => 'Sales',
                employees => [
                    {
                        id => 1,
                        name => 'John Smith',
                        age => '30',
                    },
                ],
            },
            {
                id => 2,
                name => 'IT',
                employees => [
                    {
                        id => 2,
                        name => 'Lucy Jones',
                        age => '28',
                    },
                    {
                        id => 3,
                        name => 'Miguel Cerveza',
                        age => '25',
                    },
                ],
            },
        ],
    }
);

my $company = Company->new($hash{company});
use Data::Dumper;
print Dumper $company; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:48:40.680

I've used your option 2 several times and it worked fine for me. Last instance was inflating JIRA REST API results into real objects. Note that with coercions you can also lookup an existing instance by id and create only if it does not exist.

**Edit:** Here is some code to demonstrate those coercions:

```
package Company::Types;
use Moose::Util::TypeConstraints;

subtype 'Company::Departments', as 'ArrayRef[Company::Department]';
coerce  'Company::Departments', from 'ArrayRef', via {
    require Company::Department;
    [ map { Company::Department->new($_) } @$_ ]
};

subtype 'Company::Persons', as 'ArrayRef[Company::Person]';
coerce  'Company::Persons', from 'ArrayRef', via {
    require Company::Person;
    [ map { Company::Person->new($_) } @$_ ]
};

no Moose::Util::TypeConstraints; 
```

and in those classes:

```
use Company::Types;

has 'departments' => (is => 'ro', isa => 'Company::Departments', coerce => 1);
has 'employees'   => (is => 'ro', isa => 'Company::Persons', coerce => 1); 
```

then you can pass whole structure into `Company` constructor and all gets inflated properly.

# javascript - 离线 Web 应用程序和数据库同步

> ID：12483777
> 
> 赞同：1
> 
> 时间：2012-09-18T19:34:58.153
> 
> 标签：javascript, architecture, web, sync, offline

我需要征求一些关于离线 Web 应用程序和数据库同步的建议。

离线场景

我们有一个网站 (HTML5)，需要在离线模式下长时间运行复杂的数据，产品所有者不希望将数据放入本地存储。

在我看来，我们有两个选择；

1.  使用 javascript 来检测我们是否离线，如果是，则将 url 指向本地 Web 服务器，该服务器复制数据中心的堆栈并写入离线数据库

◦最大的绊脚石是如何在第一次加载时（如果您处于离线状态）获取本地 Web 服务器的位置（URL）？即用户去www.xyz.com，但你离线所以

问题 1：第一次调用时如何通过 javascript 将他重定向到 localhost.xyz.com

1.  将客户端的所有调用（无论是否离线）都指向 wcf 服务，该服务检查 NIC 的离线状态并将每个 Web 和服务调用重定向到正确的位置 ◦ 似乎是一项艰巨的工作，

问题 2：你们知道有什么产品/开源项目可以做到这一点吗？

同步场景

•他们想使用MS同步框架

◦但是他们有许多客户端同步到不同的数据库，因此您需要每个客户端 1 个同步服务或某种方式来识别客户端同步是谁并将它们指向正确的位置

◦需要在同步期间尽量减少锁定，因为其他客户端在同步期间使用相同的表

问题 3：同步框架是否可以扩展到甚至做到这一点 问题 4：MS 平台上的数据库同步还有哪些其他选项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:42:06.250

如果用户将 URL 放入他们的浏览器，他们就会去那个 URL。那时没有javascript。加载页面后，您将只有 Javascript。您将不得不寻找更好的解决方案。

这里有一个想法：用户总是去本地网站，如果远程网站已经启动，那么你重定向他们。

就 MS 同步而言，我不知道它是什么，所以我无法帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:55:08.237

同步框架在同步时不会锁定表。

根据您要在客户端上使用的客户端数据库，您可以使用与 MS 数据库（SQL CE、SQL Express、LocalDB、SQL Server、SQL Azure）一起使用的 Sync Framework 本身，也可以使用[Sync Framework Toolkit](http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e)

无论您选择哪个平台，我都建议您简单地写入本地商店并同步它，而不是动态选择何时使用哪个商店。

例如，如果您下线并写信给本地商店。然后您的网络监视器检测到您重新在线并将您重定向到在线服务，您将如何处理本地存储的数据？或者您在网上进行了交易，然后突然下线了，本地商店的最新/更新时间是多少，您才能真正开始对抗它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T23:46:37.687

关于 MS 平台上的数据库同步还有哪些其他选项：还有 SQL Azure Data Sync，一个 Windows azure Web 服务。它实际上是建立在您所指的 Microsoft Sync Framework 之上的。

Leonard Lobel & Andrew Brust (MS Press) 所著的“Programming Microsoft SQL Server 2012”一书中有一个示例——第 13 章介绍了构建包含 SQL Azure Data Sync、Windows Azure 和 Windows Phone 7 开发平台的偶尔连接的系统。在示例解决方案中，在后端，本地 SQL Server 数据库使用 SQL Azure 数据同步与云中面向公众的 SQL Azure 数据库保持同步。云数据库使用 WCF 数据服务（也通过部署到 Windows Azure 托管在云中）公开，并由运行在 Windows Phone 7 设备上的移动客户端应用程序通过 OData 使用。本章中详细介绍的示例解决方案演示了这些技术如何在本地 SQL Server、云中的 SQL Azure 数据库中保持数据同步，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T08:01:26.113

您可以使用 Service-Workers 在用户离线时使网站正常工作。请参阅：[使用 Service Worker 使 PWA 脱机工作](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Offline_Service_workers)。这允许您的网站在用户离线时为他们工作（他们需要至少每 24 小时上网一次）。

Service-Workers 还允许您检测用户何时离线或在线，例如，您可以使用 IndexedDB 存储离线更改，然后在用户再次在线时同步它们。

我不知道微软同步。

# node.js - 无法启用 Azure Node.js 日志记录

> ID：12483782
> 
> 赞同：2
> 
> 时间：2012-09-18T19:35:19.150
> 
> 标签：node.js, azure, iisnode

我无法让日志记录为我部署到 Windows Azure 的节点应用程序工作。我正在使用 iisnode.yml 文件选项覆盖 web.config。

这是 yml 文件的内容：

```
node_env: development
nodeProcessCountPerApplication: 1
maxConcurrentRequestsPerProcess: 1024
maxNamedPipeConnectionRetry: 24
namedPipeConnectionRetryDelay: 250
maxNamedPipeConnectionPoolSize: 512
maxNamedPipePooledConnectionAge: 30000
asyncCompletionThreadCount: 0
initialRequestBufferSize: 4096
maxRequestBufferSize: 65536
watchedFiles: *.js;iisnode.yml
uncFileChangesPollingInterval: 5000
gracefulShutdownTimeout: 60000
loggingEnabled: true
logDirectory: iisnode
debuggingEnabled: true
debuggerPortRange: 5058-6058
debuggerPathSegment: debug
maxLogFileSizeInKB: 128
maxTotalLogFileSizeInKB: 1024
maxLogFiles: 20
devErrorsEnabled: true
flushResponse: false
enableXFF: false 
```

这是被覆盖的 web.config 文件的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="false" />
        <iisnode configOverrides="iisnode.yml" debuggingEnabled="true" loggingEnabled="true" logDirectory="iisnode" devErrorsEnabled="true" nodeProcessCommandLine="&quot;%programfiles(x86)%\nodejs\node.exe&quot;"  />
        <handlers>
            <add name="iisnode" path="server.js" verb="*" modules="iisnode" />
        </handlers>
        <rewrite>
            <rules>
                <clear />
                <rule name="app" enabled="true" patternSyntax="ECMAScript" stopProcessing="true">
                    <match url="server\.js.+" negate="true" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="server.js" />
                </rule>
                <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
                    <match url="iisnode"/>
                </rule>
                <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">
                    <match url="^server.js\/debug[\/]?" />
                </rule>
                <rule name="StaticContent">
                    <action type="Rewrite" url="public{{REQUEST_URI}}"/>
                </rule>
                <rule name="DynamicContent">
                    <conditions>
                        <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True"/>
                    </conditions>
                    <action type="Rewrite" url="server.js"/>
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

我很确定我已经启用了我可以在两者中使用的每个日志记录选项，但是在部署期间以及当我访问典型的日志记录位置[http://mysite.com/iisnode/index.html](http://mysite.com/iisnode/index.html)或[http://mysite.com/iisnode/](http://mysite.com/iisnode/)我收到 404 错误。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:18:27.020

如果您使用的是 express，请将其添加到您的静态文件夹位置下

```
app.use(express.static(__dirname + '/../iisnode')); 
```

或者定义你自己的日志路由，如下所示。在这里你可以得到幻想，只显示错误等。

```
//logging routes
var fs = require('fs');
app.get('/iisnode', function(req, res){
  var _index = fs.readFileSync('./iisnode/index.html', 'utf8');
  var index = _index.replace("logCell.innerHTML = '<a href=\"' + logFile.file + '\">log</a>';", "logCell.innerHTML = '<a href=\"/iisnode/' + logFile.file + '\">log</a>';");
  res.send(index);
});

app.get('/iisnode/:log', function(req, res){
  var _log = fs.readFileSync('./iisnode/' + req.route.params['log'], 'utf8');
  res.contentType('text/plain');
  res.send(_log);
}); 
```

您可以将 app.get 替换为您正在使用的任何路由解决方案。

请记住在生产中启动应用程序之前删除。

# sql - 在 SQL Server 中创建 XML 时，如何将值包装在 CDATA 标记中？

> ID：12483786
> 
> 赞同：2
> 
> 时间：2012-09-18T19:35:33.080
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如何将 OldValue 包装在 CDATA 中？

```
SELECT
1 AS Tag,
0 AS Parent,
(
    SELECT PositionDescription AS 'data()'
     FROM dbo.Project where ID = 32
     FOR XML PATH('')
) AS 'PositionDescription!1!OldValue!CDATA'
FOR XML EXPLICIT, TYPE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T21:59:37.570

只需删除 TYPE 关键字。并在子查询中使用原始字符串而不是 XML

```
SELECT
1 AS Tag,
0 AS Parent,
(
    SELECT PositionDescription
      FROM dbo.Project where ID = 32
) AS [PositionDescription!1!OldValue!CDATA]
FOR XML EXPLICIT 
```

样品和输出

```
create table Project (PositionDescription varchar(100), id int)
insert project select 'abc<test>', 32
---

<PositionDescription>
  <OldValue><![CDATA[abc<test>]]></OldValue>
</PositionDescription> 
```

# ios - 当我尝试在我的 iphone 上安装 ipa 时，它显示“kAMDDeviceFamilyNotSupported”

> ID：12483789
> 
> 赞同：-1
> 
> 时间：2012-09-18T19:35:52.733
> 
> 标签：ios, app-store-connect, ipa

我正在通过 iTunes 安装 ipa，它显示此错误 - kAMDDeviceFamilyNotSupported

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:38:46.287

刚刚检查了 xcode 设置，在 project summary->Devices 下，选择了 ipad 并在 iphone 上安装构建。

它现在工作。

# ruby-on-rails - session_store 初始化程序在生产中工作，但不在开发中

> ID：12483791
> 
> 赞同：0
> 
> 时间：2012-09-18T19:35:54.573
> 
> 标签：ruby-on-rails, session, initializer

我有一个包含多个子域的站点，并已`:domain => :all`按如下方式添加到我的会话存储中，以便我的登录信息在所有子域中持续存在。

```
`MyApp::Application.config.session_store :cookie_store, key: '_MyApp_session', :domain => :all` 
```

尽管这似乎在生产中有效，但在开发时我无法让我的会话跨域工作。什么可能导致这种情况，我可以从我的配置或环境文件中添加/删除什么以使我的开发会话与我的生产会话匹配？

请让我知道是否有需要检查的特定代码行，我会这样做（或将它们粘贴到此处）。非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:39:14.503

您可能只需要解决问题。

1）检查反引号是否导致问题。

2) 检查是否有任何其他初始化程序或 Rails 相关的初始化问题导致应用程序在您的生产服务器上启动时无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:31:48.607

我正在使用@dimuch[链接](http://excid3.com/blog/sharing-a-devise-user-session-across-subdomains-with-rails-3/)中的解决方案，并将域设置为`:all`在生产期间并将其设置为我在开发期间的开发 url `'lvh.me'`。

# html - 在我的垂直菜单中悬停时遇到边框问题

> ID：12483794
> 
> 赞同：1
> 
> 时间：2012-09-18T19:36:01.733
> 
> 标签：html, css, user-interface

我创建了一个垂直菜单，并希望它在悬停和选定项目上有一个右红色边框。

但是，由于我的 li 边框底部似乎弄乱了悬停状态，所以在悬停时我似乎无法正确处理。底部边框与右侧边框略微重叠。

这是小提琴中的代码。

[http://jsfiddle.net/4KBE4/1/](http://jsfiddle.net/4KBE4/1/)

HTML：

```
<div class="messaging">

    <div class="sideMenu"> 
        <ul class="messagesMenu">
            <li class="selected"><a href="#">Inbox<span>14</span></a></li> 
            <li><a href="#">Outbox</a></li> 
            <li><a href="#">Address Book</a></li> 
            <li><a href="#">Trash</a></li> 
        </ul>
    </div> 

    <div class="messagesWrapper">
    </div>

</div> 
```

CSS：

```
.messaging {
    width: 500px;
    margin-bottom: 20px;
}
.sideMenu {
    display: inline-block;
    width: 200px;
    float: left;    
}
.messagesWrapper {
    background: honeydew;
    width: 300px;
    height: 200px;
    float: right;    
    min-height: 500px;
}
.messagesMenu {
    background: #FFF;
    padding-bottom: 20px;
}
.messagesMenu li {
    padding: 5px;
    border-top: 1px solid #d4d4d4;
    height: 3em;
    display: block;
    position: relative;
    border-right: 5px solid #d4d4d4;
}
.messagesMenu li:first-child { border-top: none; }
.messagesMenu li:last-child { border-bottom: 1px solid #d4d4d4; }
.messagesMenu li a {
    line-height: 3em;
    font-size: 1em;
    text-transform: uppercase;
    text-decoration: none;
    padding-left: 5px;
    color: #c4c4c4;
    cursor: pointer;
}
.messagesMenu li a span {
    color: #FFF;
    font-size: 1em;
    text-transform: uppercase;
    text-decoration: none;
    background: #999;
    border-radius: 5px;
    margin-left: 100px;
    padding: 2px 6px;
}
.messagesMenu li:hover { border-right-color: #ed1c24; }
.messagesMenu li.selected { 
    border-right-color: #ed1c24;
    border-bottom: none;
}
.messagesMenu li.selected a { color: #2f3239; }
.clearfix { zoom: 1; }
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}​ 
```

希望有人能帮忙！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:49:09.450

给出链接`display: block`，删除它们的宽度：100%，从 中删除`padding`、 the`height`和*水平*边框，`li`并将它们添加到链接上。

# [演示](http://jsfiddle.net/4KBE4/11/)

```
.messagesMenu li { border-right: 5px solid #d4d4d4; }
.messagesMenu li:first-child a { border-top: none; }
.messagesMenu li:last-child a { border-bottom: 1px solid #d4d4d4; }
.messagesMenu li a {
    display: block;
    line-height: 3em;
    font-size: 1em;
    text-transform: uppercase;
    text-decoration: none;
    color: #c4c4c4;
    cursor: pointer;
    height: 3em;
    padding: 5px 5px 5px 10px;
    border-top: 1px solid #d4d4d4;
} 
```

# html - 将 Flash Player 发送到背景或将 div 放在 Flash Player 顶部

> ID：12483795
> 
> 赞同：1
> 
> 时间：2012-09-18T19:36:15.540
> 
> 标签：html, flash

我知道 Flash Player 实际上是最终呈现在 html 页面顶部的浏览器插件，但是我希望有一种方法可以以某种方式将 Flash 播放器发送到背景或将 div 放在 Flash 顶部。

在这个示例代码中，我希望在“flashHeader”上显示“divPanel”。

```
<object id="flashHeader" style="position: relative; top: 0px; left: 0px; z-index:3;" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
    codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"
    width="820" height="255" id="Untitled-1" align="middle">
    <param name="allowScriptAccess" value="sameDomain" />
    <param name="movie" value="my.swf" />
    <param name="quality" value="high" />
    <param name="wmode" value="transparent">
    <embed src="my.swf"
        quality="high" bgcolor="#ffffff" width="820" height="255" name="Untitled-1" align="middle"
        allowscriptaccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
</object>
<div id="divPanel" style="width: 100px; height: 100px; background-color: red; position: relative;
    top: -50; z-index:4;">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:37:45.627

将de 参数更改`wmode`为“不透明”。[更多信息](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)

# .net - 具有 Excel 互操作性的公式

> ID：12483798
> 
> 赞同：7
> 
> 时间：2012-09-18T19:36:38.170
> 
> 标签：.net, f#, excel-interop

我正在使用 F# 和 Excel 互操作将数据输出到 Excel 电子表格。我的第一种方法是单独设置每个单元格：

```
worksheet.Range(range1).Value2 <- "=sum(a1:a10)"
worksheet.Range(range2).Value2 <- "=min(a1:a10)"
worksheet.Range(range3).Value2 <- "=max(a1:a10)"
(* etc *) 
```

但是，当有大量公式时，这太慢了，所以我切换到一个数组：

```
worksheet.Range(range).Value2 <- [| "=sum(a1:a10)"
                                    "=min(a1:a10)"
                                    "=max(a1:a10)" |] 
```

或者

```
worksheet.Range(range).Formula <- [| "=sum(a1:a10)"
                                     "=min(a1:a10)"
                                     "=max(a1:a10)" |] 
```

但是，现在 Excel 只在单元格中显示这些字符串，而不是计算公式的值。我也试过：

```
worksheet.Range(range).FormulaArray <- [| "=sum(a1:a10)"
                                          "=min(a1:a10)"
                                          "=max(a1:a10)" |] 
```

但这与每个公式的目标范围相混淆。我不确定那里发生了什么。（Excel 没有将其保留为`"a1:a10"`，而是根据公式所在的位置翻译了目标范围。）

有一个更好的方法吗？

**更新**：我也尝试使用“=MIN($G$2:$G$5)”，但产生了相同的效果，其中 Excel 只是显示字符串而不评估公式。

对于它的价值，当我输入单元格时，擦除然后重新添加公式中的任何字符，当我点击“输入”时，Excel 将对其进行评估。

**更新 2**：我还尝试了以下方法：

```
worksheet.Range(range).FormulaR1C1 <- [| "=sum(R2C[0]:R4C[0])"
                                          "=average(R2C[0]:R4C[0])"
                                          "=min(R2C[0]:R4C[0])"
                                          "=max(R2C[0]:R4C[0])" |] 
```

但我遇到了同样的问题：Excel 将它们呈现为字符串而不是评估公式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T20:42:11.020

丹尼尔的回答应该有效，但我发现使用 R1C1 格式的公式更容易。您的代码应如下所示才能使用它：

```
ws.Range(range).FormulaR1C1 <- [| "=sum(R1C1:R10C1)";
                                  "=min(R1C1:R10C1)"; 
                                  "=max(R1C1:R10C1)" |] 
```

这将生成具有绝对地址的公式。您可以使用 R[vertical_offset]C[horizo​​ntal_offset] 构建相对地址。选择整行或整列也很容易：R1 是整个第一行，C4 是整个“D”列。

使用纯 F# 中的 String.Format 或 sprintf 轻松构建 R1C1 地址。

**编辑：**我快速检查了 vba，它不起作用。Excel 将第一个数组元素放在范围内的每个单元格中。无论如何，R1C1 寻址点仍然有效。它就像标题公式的魅力（即 ws.Range(headerRange).FormulaR1C1 <- "=sum(R2C[0]:R10C[0]")），所以我将保持答案不变。

**EDIT2：**我认为 ArrayFormula 是用于[数组公式](http://www.cpearson.com/excel/ArrayFormulas.aspx)的，所以它也不起作用。

**EDIT3：**我做了一些研究，找到了我认为不可能的事情的答案:)。

首先，将此字符串作为公式，将它们向上转换为对象：

```
let formulas : obj[] = [| "=sum(R1C1:R10C1)";
                          "=min(R1C1:R10C1)"; 
                          "=max(R1C1:R10C1)" |] 
```

然后把它放在FormulaR1C1中：

```
ws.Range(range).FormulaR1C1 <- formulas 
```

第二，重要部分：上面的例子假设范围是三个单元格的水平范围（即F3：H3）。如果您尝试将其放在垂直范围内（即 F3:F5），您会注意到，该求和公式在范围内的每个单元格中重复。我敢打赌，在这种情况下，公式应该是二维对象数组，外部数组的第一行是公式数组，但是我在尝试将其放入 range.FormulaR1C1 时得到了 SafeArrayTypeObjectExtension。看看[这个 msdn 文档](http://msdn.microsoft.com/en-us/library/office/bb213527%28v=office.12%29.aspx)：

> 如果范围是一维或二维范围，则可以将公式设置为相同维度的 Visual Basic 数组。同样，您可以将公式放入 Visual Basic 数组中。

稍后我将再次查看此异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:17:48.400

假设您的第一种方法有效，并且*速度慢意味着**输入*速度太慢（不*执行*），那么像这样更新一堆单元格可能会更快/更容易

```
[
  range1, "=sum(a1:a10)"
  range2, "=min(a1:a10)"
  range3, "=max(a1:a10)"
  ...
]
|> List.iter (fun (range, value) -> worksheet.Range(range).Value2 <- value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T21:26:35.087

或者，您可能会从 fsnip.net [http://fssnip.net/aV](http://fssnip.net/aV)上的这个片段中得到一些想法，它为 Excel 实现了一些高阶函数。（这比使用电子表格设备在性能方面具有更长远的优势，尽管该片段与性能无关。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T21:20:09.893

如果您无法在 Excel 中解决性能问题，您可能需要考虑 SpreadsheetGear (http://www.spreadsheetgear.com/)。它几乎复制了整个 Excel API，但速度更快。（另一个优点 - 如果您正在开发要在服务器上运行的东西，则不必在服务器上安装 Excel。）

# apache - 将子域匹配到一个位置，然后如果尾部斜杠匹配到另一个位置

> ID：12483801
> 
> 赞同：1
> 
> 时间：2012-09-18T19:36:43.597
> 
> 标签：apache, .htaccess, mod-rewrite

我的子域是动态的，如果它们是顶级的，则需要由一个规则处理，如果它们不是，则它们包含第二个处理程序。

这是我所拥有的：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} !^(www\.)?(www|ftp|mail|webmail)\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-]+)\.domain\.com$ [NC]
#This is successful
RewriteRule (.*) displaylist.php?shorturl=%2 [NC,QSA]
#NOT WORKING
RewriteRule /id/([0-9+])$ viewpage.php?id=$1 [NC,QSA] 
```

所以 subdomain.domain.com 可以正常工作，但 subdomain.domain.com/id/1230/ 不能。

捕获下一行的规则不起作用，只显示 displaylist.php，所有相关链接都已损坏。

编辑：

新规则，重写工作，但没有一个相关文件是完整的

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} !^(www\.)?(www|ftp|mail|webmail)\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-]+)\.domain\.com$ [NC]
#This is successful
RewriteRule (.*) displaylist.php?shorturl=%2 [NC,QSA]
#Working, but relative files (like css) aren't loading correctly
RewriteCond %{THE_REQUEST} id/([0-9]+)/?
RewriteRule ^(.*) viewpage.php?id=%1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:51:08.270

> 重写工作，但没有一个相关文件是完整的

`viewpage.php`将此添加到由（`<head> </head>`标签之间）生成的内容的标题中：

```
<base href="/" /> 
```

# svg - 带有标签和轴的箱线图，适合具有固定尺寸的 div

> ID：12483802
> 
> 赞同：2
> 
> 时间：2012-09-18T19:36:48.587
> 
> 标签：svg, d3.js, boxplot

按照[提供的示例](http://mbostock.github.com/d3/ex/box.html)，我构建了一个函数，该函数将箱形图绘制到 jQuery 手风琴选项卡上，该选项卡具有一定的固定高度和宽度。不同类别的数量因输入数据而异。目前我想在绘图中实现以下目标：

1）添加轴和显示标签，[就像这张图片](http://support.sas.com/documentation/cdl/en/statug/63347/HTML/default/images/det1out.png)

2) 始终使盒子适合容器的宽度和高度。目前我看到如果类别太多，其中一些在第二行结束，确保它们没有被完全看到。在图片中，div 包含 7 个框，但一行中只有 4 个： ![在此处输入图像描述](../Images/9d8c0ffe7aef549d9a7895bfec08e64b.png)

问题是这两个如何实现？我什至想不出一种方法来可靠地减少盒子之间的填充而不吃到盒子上的边号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T08:32:42.893

我采用了原始的 d3.js 示例来包含轴：

[http://bl.ocks.org/jensgrubert/7789216](http://bl.ocks.org/jensgrubert/7789216)

不像 Mike 的实现那样使用单独的 svg 元素，这里所有的箱线图都在一个根元素中呈现。这使得添加轴变得容易。

最好的，延斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:02:09.987

目前我正在使用在 Highcharts 论坛（[此处](http://jsfiddle.net/amergin/ZVydP/)为 jsfiddle ）中找到的 hack。还有一个用 Raphael.js 制作的箱线图实现，看起来很酷（[github](https://github.com/sioked/Raphael-Box-Plot-Library)，[示例](http://hustle.slalomchi.com/#/results/2)）

# android - 是否可以使用 Sencha Touch 2 构建相机 + 上传图片应用程序？

> ID：12483805
> 
> 赞同：0
> 
> 时间：2012-09-18T19:36:56.290
> 
> 标签：android, ios, mobile, camera, extjs

我需要开发一个能够使用设备的相机拍摄的移动应用程序。然后它应该能够将该照片上传到服务器以在网站前端显示。这种范式类似于大多数照片共享社交网站，如 Instagram。

我的问题是这是否可以使用 Sencha Touch 2 框架。即使可能，这是推荐的方法吗？使用其他框架或使用 iOS SDK 将其开发为本机应用程序会更好吗？

如果您有任何代码可以作为示例，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:44:54.567

这第一个答案是肯定的。以下是文档：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.device.Camera](http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Camera)

我已经使用 Titanium、Native iOS 和 JS/HTML5 完成了上述操作。您所追求的功能是一个简单而经典的功能，它适用于大多数框架。如果您不熟悉 Objective-C，另一个“更简单”的框架听起来不错。如果您认为 Sencha 看起来很酷，请尝试一下 :) 我自己没有使用过它的框架。

# ruby - 在 Ubuntu 上使用 Ruby，我如何检查默认浏览器是什么？

> ID：12483806
> 
> 赞同：1
> 
> 时间：2012-09-18T19:37:07.317
> 
> 标签：ruby, ubuntu, browser

我正在用 Ruby 制作一个程序，我需要知道用户的默认浏览器（实际上，我想知道他/她的默认浏览器是 Chrome*还是*Chromium（以及哪个））。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:03:28.583

您可以使用 bash 命令找出默认用户浏览器，然后检查包含`chrome`或`chromium`子字符串。像这样的东西。

```
1.9.3p194 :001 > mimelist = `cat ~/.local/share/applications/mimeapps.list | grep text/html`
 => "text/html=google-chrome.desktop\n"
1.9.3p194 :004 > mimelist.include?('chrome')
 => true 
1.9.3p194 :005 > mimelist.include?('chromium')
 => false 
```

# google-apps-script - 是否可以使用 Apps 脚本创建 Google 协作平台页面以及子页面？

> ID：12483807
> 
> 赞同：0
> 
> 时间：2012-09-18T19:37:08.250
> 
> 标签：google-apps-script, google-apps, google-sites

使用“Site”类中的“createWebPage”方法，我知道我可以使用Apps Scripts 创建一个页面。我想要做的是为第一页创建子页面。以下面的结构为例：

*   动物
    *   狗
        *   西施
        *   斗牛犬
    *   猫
        *   孟加拉
        *   暹罗

我该如何去创造这个？任何做过类似事情的人，请告诉我如何开始。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:59:37.450

是的，Page 类还有一个 createWebPage 方法，允许页面将页面创建为子页面（子页面）。所以你的代码看起来像这样：

```
//...get a site first and then
var animalPage = mySite.createWebPage("title", "name", "some html");
var dogPage = animalPage.createWebPage("title", "name", "some html");
var shihtzuPage = dogPage.createWebPage("title", "name", "some html"); 
```

让我们知道你的进展。

# html - 网站开头的 16px 空间

> ID：12483810
> 
> 赞同：0
> 
> 时间：2012-09-18T19:37:15.110
> 
> 标签：html

真是奇怪的问题。我有一个非常基本的布局（你可以在这里看到它：[https](https://geardev.de/test/test.html) ://geardev.de/test/test.html ），但是徽标上方有一个 16px 的空间，不应该在那里。

我完全不知道是什么原因造成的。供您参考：[https](https://geardev.de/test/style.css) ://geardev.de/test/style.css是样式表，定义从第 350 行开始，然后才使用 Normalize.css 重置内容。

卸载 HTML 并没有真正产生结果——也许我只是错过了一些愚蠢的东西。我注意到的唯一一件事是删除 Doctype 正在解决问题 - 但它在技术上是错误的。顺便说一句，它通过了 W3C 验证器： http://validator.w3.org/check?uri=https%3A%2F%2Fgeardev.de%2Ftest% [2Ftest.html](http://validator.w3.org/check?uri=https%3A%2F%2Fgeardev.de%2Ftest%2Ftest.html)

你有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:38:53.693

如果你使用 web 开发工具，你会看到 ul 元素顶部有 16px 的边距。你把它设置为零，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:43:21.867

这将解决它： `<ul style="margin-top: 0px;">`

# c# - mvc4 ajax 更新同一页面

> ID：12483812
> 
> 赞同：1
> 
> 时间：2012-09-18T19:37:15.247
> 
> 标签：c#, asp.net-mvc, jquery

我在页面上有一个用户列表，当我单击选项卡（easytabs）时，它们会在 ajax 事件期间加载。然后，我将 ajax 加载到同一选项卡中的创建新用户部分视图。然后我使用此表单创建一个新用户，但我不知道如何使用新的用户列表（包括新创建的用户）重新加载第一个部分视图。

**用于加载带有用户列表的选项卡面板的 HTML：**

```
<%= Ajax.ActionLink("Manage Users", "tabsUsers", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "ManageUsersPartial", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { data_target = "#tabs-users" })%> 
```

**控制器：**

```
[HttpGet]
public PartialViewResult tabsUsers()
{
    return PartialView("UsersPartial", userManager.GetUsers());
} 
```

**用户部分视图**

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<LMS.Data.User>>" %>

<p>
    <%: Ajax.ActionLink("Create New", "Create", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "CreateUserPartial", InsertionMode = InsertionMode.Replace })%>
</p>
<table>
    <tr>
        <th>
            <%: Html.DisplayNameFor(model => model.UserName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.FirstName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.LastName) %>
        </th>
        <th>
            <%: Html.DisplayNameFor(model => model.Email) %>
        </th>
        <th>Actions</th>
    </tr>

<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: Html.DisplayFor(modelItem => item.UserName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.FirstName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.LastName) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Email) %>
        </td>
        <td>
            <%: Html.ActionLink("Edit", "Edit", new { id = item.UserID })%> |
            <%: Html.ActionLink("Details", "Details", new { id=item.UserID }) %> |
            <%: Html.ActionLink("Delete", "Delete", new { id=item.UserID }) %>
        </td>
    </tr>
<% } %>

</table>

<br />

<div id="CreateUserPartial"></div> 
```

这很好用，每次我单击选项卡时，数据都会按预期重新加载。

现在，

在 UsersPartial 视图中，我有另一个 Ajax Actionlink 将另一个局部视图加载到此局部视图中，以创建一个新用户：

**来自 UsersPartial 视图的 HTML Ajax Actionlink：**

```
<%: Ajax.ActionLink("Create New", "Create", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "CreateUserPartial", InsertionMode = InsertionMode.Replace })%> 
```

这会在 UsersPartial 视图中加载以下**CreateUserView视图：**

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<LMS.Data.User>" %>

<script src="<%: Url.Content("~/Scripts/jquery-1.6.2.min.js") %>"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"></script>

<script type="text/javascript">
    $(function () {
        $('form').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $('#result').html(result);
                    }
                });
            }
            return false;
        });
    });
</script>

<div id="result"></div>

<% using (Html.BeginForm())
   { %>
<%: Html.ValidationSummary(true, "Could not create new user.") %>
<fieldset>
    <legend>User</legend>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.UserName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.UserName) %>
        <%: Html.ValidationMessageFor(model => model.UserName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.FirstName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.FirstName) %>
        <%: Html.ValidationMessageFor(model => model.FirstName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.LastName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.LastName) %>
        <%: Html.ValidationMessageFor(model => model.LastName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.Password) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Password) %>
        <%: Html.ValidationMessageFor(model => model.Password) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.Email) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Email) %>
        <%: Html.ValidationMessageFor(model => model.Email) %>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
<% } %>
<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div> 
```

最后，在控制器 **CreateUserPartial 控制器代码中调用 CreateUser 的代码：**

```
[HttpPost]
    public ActionResult Create(AccountUser user)
    {
        if (ModelState.IsValid)
        {
            try
            {
                user.Password = user.Password.Encrypt();
                userManager.AddUser(user);
            }
            catch (DbEntityValidationException dbex)
            {
                foreach (var validationErrors in dbex.EntityValidationErrors)
                {
                    foreach (var validationError in validationErrors.ValidationErrors)
                    {
                        ModelState.AddModelError(validationError.PropertyName, validationError.ErrorMessage);
                    }
                }
            }
            catch (DbUpdateException dbuex)
            {
                if (dbuex.InnerException != null)
                    if (dbuex.InnerException.InnerException != null)
                        if (dbuex.InnerException.InnerException.Message.Contains("Cannot insert duplicate key row in object"))
                            return Content("User already exists!", "text/html");
                else
                    ModelState.AddModelError("", "An unknown error occured when creating the user.");
            }
            catch (Exception)
            {
                ModelState.AddModelError("", "An unknown error occured when creating the user.");
            }
        }

        return Content("User created!", "text/html");
    } 
```

这一切都有效......当创建用户时，它说用户创建！正如预期的那样。

现在我的问题是，如何使用新用户重新加载 UsersPartial 视图中的列表？我无法弄清楚这部分。我感觉它与 jQuery ajax 成功方法有关，但我不知道如何重新加载用户列表，包括这个新创建的用户列表。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:01:28.657

**请不要回发表格。而不是调用ajax调用**

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<LMS.Data.User>" %>

<script src="<%: Url.Content("~/Scripts/jquery-1.6.2.min.js") %>"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"></script>

<% using (Html.BeginForm())
 <%: Ajax.BeginForm("Create",new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "ManageUsersPartial", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { data_target = "#tabs-users" })
   { %>
<%: Html.ValidationSummary(true, "Could not create new user.") %>
<fieldset>
    <legend>User</legend>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.UserName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.UserName) %>
        <%: Html.ValidationMessageFor(model => model.UserName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.FirstName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.FirstName) %>
        <%: Html.ValidationMessageFor(model => model.FirstName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.LastName) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.LastName) %>
        <%: Html.ValidationMessageFor(model => model.LastName) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.Password) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Password) %>
        <%: Html.ValidationMessageFor(model => model.Password) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.Email) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Email) %>
        <%: Html.ValidationMessageFor(model => model.Email) %>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
<% } %>
<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div> 
```

**然后方法应该返回 paratail 视图而不是 Content Type**

```
 public ActionResult Create(AccountUser user)
    {
        if (ModelState.IsValid)
        {
            try
            {
                user.Password = user.Password.Encrypt();
                userManager.AddUser(user);
            }
            catch (DbEntityValidationException dbex)
            {
                foreach (var validationErrors in dbex.EntityValidationErrors)
                {
                    foreach (var validationError in validationErrors.ValidationErrors)
                    {
                        ModelState.AddModelError(validationError.PropertyName, validationError.ErrorMessage);
                    }
                }
return PartialView("CreateUserPartial", user);
            }
            catch (DbUpdateException dbuex)
            {
                if (dbuex.InnerException != null)
                    if (dbuex.InnerException.InnerException != null)
                        if (dbuex.InnerException.InnerException.Message.Contains("Cannot insert duplicate key row in object"))
                            return Content("User already exists!", "text/html");
                else
                    ModelState.AddModelError("", "An unknown error occured when creating the user.");
return PartialView("CreateUserPartial", user);
            }
            catch (Exception)
            {
                ModelState.AddModelError("", "An unknown error occured when creating the user.");
return PartialView("CreateUserPartial", user);
            }

return PartialView("UsersPartial", userManager.GetUsers());
        }

        return PartialView("UsersPartial", userManager.GetUsers());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:53:12.733

您必须在创建后返回一个新列表。代替：

```
return Content("User created!", "text/html"); 
```

你应该做：

```
return PartialView("UsersPartial", userManager.GetUsers()); 
```

编辑：您的部分想要一个`IEnumerable`用户。如果您需要消息，请通过`ViewBag`.

# objective-c - 当 UISplitViewController 上的菜单滑动时，收缩细节视图控制器动画

> ID：12483819
> 
> 赞同：0
> 
> 时间：2012-09-18T19:37:52.597
> 
> 标签：objective-c, ios, xcode, ipad, uisplitviewcontroller

我正在 iPad 上使用 UISplitViewController 并希望覆盖它的行为。当用户点击栏按钮时，屏幕左侧有幻灯片菜单。但它与细节视图控制器重叠。我可以让它在菜单出现时详细视图控制器缩小动画并在菜单消失时展开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:42:49.473

我不认为这本身就是可能的，所以我想到了两种方法

1 - 尝试和错误：研究拆分委托调用以查看何时应该缩小细节中的内容并对其进行调整，直到看起来平滑

2 - 创建您自己的“拆分”控制器并自行调整大小/呈现

# iphone - 导航控制器内的选项卡栏控制器，可以吗？

> ID：12483823
> 
> 赞同：0
> 
> 时间：2012-09-18T19:38:04.217
> 
> 标签：iphone, ios, xcode

我需要在导航控制器的分支末尾有一个标签栏导航，如下图所示。（我使用故事板构建结构，并以编程方式完成其他所有操作。）

1.  这是可以接受和稳定的吗？（Xcode 似乎没有异议。）
2.  我可以在初始选项卡栏导航内放置*另一个*选项卡栏导航吗，所以会有 3 层：
    导航控制器 > 选项卡栏 > 选项卡栏

感谢您的任何建议和建议。

![在此处输入图像描述](../Images/74994571f3b3af6f955b393e04c19711.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:47:11.500

我相信你可以。标签栏和导航控制器都是容器控制器，它们可以用来包含任何类型的控制器：容器控制器或内容控制器。查看[参考](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html#//apple_ref/doc/uid/TP40007457-CH101-SW1)文档以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:51:10.310

你*可以*做到这一切。Xcode 不会反对。各种视图控制器都可以相互包含，并且会（大部分）按照您的预期行事。

您可能想考虑是否*应该*执行所有这些操作。[View Controller Catalog](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html#//apple_ref/doc/uid/TP40011313-CH6-SW1)提到标签栏总是包装导航控制器的事实，而不是相反，类似的语句出现在 View Controller Programming Guide 中。

更重要的是，Apple 提供的特定视图控制器通常具有预期的用户界面，用户已经非常习惯于在其他应用程序中看到这种界面。组合多个标签栏控制器可能会打破这些期望 - 像这样的分层内容通常包含在导航控制器中。在继续此结构之前，请考虑通读[人机界面指南。](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:46:19.433

不是真的AFAIK。但是您可以在任何地方使用 UITabBar 而不是 UITabBarController。请参阅此博客文章：[http ://www.alexmedearis.com/uitabbarcontroller-inside-a-uinavigationcontroller/](http://www.alexmedearis.com/uitabbarcontroller-inside-a-uinavigationcontroller/)

# c# - 指定的令牌太长。最大长度为 128 个字符

> ID：12483825
> 
> 赞同：3
> 
> 时间：2012-09-18T19:38:09.663
> 
> 标签：c#, sql

我正在 C# 中创建一个数据集成工具，它将数据从一个数据库移动到一个中介然后到最终，我将所需的数据库查询存储在 SQL CE 数据库中，尝试将其中一个查询插入到表中我收到：

> 主要错误 0x80040E14，次要错误 25508 “Myquery” 指定的令牌太长。最大长度为 128 个字符。[令牌的最大大小（如果知道）= 128，令牌（如果知道）=“我的一些查询”

询问：

```
update SqlQueries Set Query = "CREATE TABLE [dbo].[ASI_SYBranch](
BranchName char(255),
BranchLogoName char(255),
NoteText TEXT,
BranchID char(30),
Active bit,
CoLocationName char(255),
City char(50),
Country char(2),
State char(50),
CoNoteText TEXT,
CoLocationID char(10),
Warehouse char(10),
LocationName char(255),
TaxRegID char(50),
TaxZoneID char(10),
ShipComplete bit,
LocationID char(10),
SameasMainInfo bit,
BranchAddrLine1 char(50),
BranchAddrLine2 char(50),
BranchCity char(50),
BranchCountry char(2),
BranchState char(50),
BranchPostalCode char(20),
BranchBusinessName char(255),
BranchAttention char(255),
BranchEmail char(255),
BranchWeb char(255),
BranchPhone1 char(50),
BranchPhone2 char(50),
BranchFax char(50),
SameasMainAddr bit,
LocBusinessName char(255),
LocAttention char(255),
LocEmail char(255),
LocWeb char(255),
LocPhone1 char(50),
LocPhone2 char(50),
LocFax char(50),
LocAddrLine1 char(50),
LocAddrLine2 char(50),
LocCity char(50),
LocCountry char(2),
LocState char(50),
LocPostalCode char(20),
DefaultCountry char(2),
AccessRole char(64),
LocTaxRegID char(50),
SalesSub char(30),
ExpenseSub char(30),
FreightSub char(30),
DiscountSub char(30),
CuryGainLossSub char(30),
Description char(60),
CurySymbol char(10),
DecimalPrecision smallint,
BaseCurrencyID char(5),
PhoneMask char(50))
GO" Where RefNum = 3 
```

表架构：

```
RefNum          Int
Description     nvarchar
Query           ntext (I tried nvarchar max also) 
```

我发现相互矛盾的文章指出这可能/不可能是因为我的 SQL 语句的长度

问题：

1\. 这是真的吗？
2\. 如果是这样，我该如何解决？

回答：

> 它最终是因为我的 SQL 语句中的制表符和换行符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:48:15.423

听起来您对数据库中的文本字段有长度限制。您需要将文本分成 128 个字符的长字符串，或修改表的架构以允许更长的字符串。

您能否向我们展示您的表架构和您尝试插入的数据示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:53:01.073

SqlCe 是一个纯 unicode 数据库。因此，如果您使用 VARCHAR 字段，主要是在 CREATE TABLE 操作中，您必须更改为 NVARCHAR 数据类型。否则你会得到那个错误。

编辑：对于 CHAR 字段也是如此......

# asp.net - 何时在 gridview 中使用动态字段？

> ID：12483826
> 
> 赞同：1
> 
> 时间：2012-09-18T19:38:09.533
> 
> 标签：asp.net

请允许我问一个关于动态场的愚蠢问题。何时以及为何使用它？先感谢您！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-18T19:40:54.340

表示在使用 ASP.NET 动态数据功能的数据绑定控件中显示的数据字段。

ASP.NET Dynamic Data 是一个框架，可以让您轻松创建数据驱动的 ASP.NET Web 应用程序。为此，它会自动元数据数据模型和运行时推断用户界面的行为。

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.dynamicdata.dynamicfield.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.dynamicdata.dynamicfield.aspx)

# javascript - 根据单击的链接在下一页上运行功能

> ID：12483827
> 
> 赞同：-2
> 
> 时间：2012-09-18T19:38:11.333
> 
> 标签：javascript, function, hyperlink, load

我有一个页面“mysite.com/NUMBERS” ，[点击](http://jsfiddle.net/shqpA/4/)功能可以更改数字的类别。我将如何在“mysite.com/HOME”上创建这样的链接，它上面只有数字“1 2 3 4 5”，如果你点击“1”，它会带你到“mysite.com/NUMBERS”并运行`$(#1).addClass('numOn');`因此“1111111”在页面加载时处于活动状态，如果您单击“2”它加载的数字页面`$(#2).addClass('numOn');`等等。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:40:47.477

您可以在哈希标记之后将数据添加到 URL，并在页面加载时使用 javascript 检查它。

即 mysite.com/NUMBERS#1 在页面加载检查它：

```
if(window.location.hash) {
    //call the 'addClass' method on the appropriate ID
} 
```

# actionscript-3 - Flash AS3 - 不同颜色的彩色用户名列表框

> ID：12483828
> 
> 赞同：1
> 
> 时间：2012-09-18T19:38:12.453
> 
> 标签：actionscript-3, flash, list

我找到了几个关于 CellRenderer 的教程，它们将更改整个列表或选定的项目，但我对 AS3 还不是很好，需要一些帮助。我正在从 xml 文件加载用户列表。一切都加载得很好，但我想做的实际上是按组着色。

再次，它很好地加载到列表中，我要做的是在从 xml 文件添加它们的循环中，如果它的管理员将其设为红色字体，mod 为绿色字体，成员为黑色。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:37:10.343

有几个注意事项需要注意：

1.  如果您打算使用字体格式，还需要[将渲染器样式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/SelectableList.html#setRendererStyle%28%29) [embedFonts](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/LabelButton.html#style%3aembedFonts)设置为 true
2.  由于您想为单个单元格设置样式，首先您需要等待列表被填充（完成它是组件生命周期的内部数据设置部分）。这可以通过调用[drawNow()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/core/UIComponent.html#drawNow%28%29)或[invalidate()来强制](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/core/UIComponent.html#invalidate%28%29)
3.  最后，在[渲染处理程序中，通过](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event%3arender)[itemToCellRender()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/SelectableList.html#itemToCellRenderer%28%29)方法访问单个单元格渲染器以设置样式。

这是一个基本示例（并将 a、b、c 想象为 admin、mod、member）：

```
//in a setup function
{
//some dummy data
            var data:XML = <users>
                            <user name="user 1" group="a" />
                            <user name="user 2" group="a" />
                            <user name="user 3" group="a" />
                            <user name="user 4" group="b" />
                            <user name="user 5" group="b" />
                            <user name="user 6" group="b" />
                            <user name="user 7" group="c" />
                            <user name="user 8" group="c" />
                            <user name="user 9" group="c" />
                           </users>
            //create a list
            var list:List = addChild(new List()) as List;
            list.setSize(600,400);
            list.move(0,400);
            //setup a font AND set embefFonts to true
            list.setRendererStyle("textFormat",new TextFormat("Siemens Sans SC Black",11,0xFF9900));
            list.setRendererStyle("embedFonts",true);
            //populate list
            for(var i:int = 0 ; i < data.user.length(); i++) list.addItem({label:String(data.user[i].@name),group:String(data.user[i].@group)});
            list.invalidate();//tell list to refresh itself
            list.addEventListener(Event.RENDER,listUpdated);//listen for the refresh
}
        //after the list refreshed
        private function listUpdated(event:Event):void{
            //setup text formats
            var formats:Dictionary = new Dictionary();
            formats["a"] = new TextFormat("Siemens Sans SC Black",11,0x990000); 
            formats["b"] = new TextFormat("Siemens Sans SC Black",11,0x009900); 
            formats["c"] = new TextFormat("Siemens Sans SC Black",11,0x000099);

            var list:List = List(event.currentTarget);
            for(var i:int = 0 ; i < list.dataProvider.length; i++) {
                var item:Object = list.getItemAt(i);
                var cr:CellRenderer = CellRenderer(list.itemToCellRenderer(item));//get the individual cell renderers
                cr.setStyle("textFormat",formats[item.group]); //set styles per cell
            }
            list.removeEventListener(Event.RENDER,listUpdated);//clear listener
        } 
```

# android - 未指定内容类型时，Web 服务返回 SOAP

> ID：12483830
> 
> 赞同：4
> 
> 时间：2012-09-18T19:38:14.330
> 
> 标签：android, .net, web-services, spring, content-type

几年前，我们为移动应用程序开发了一个 .NET Web 服务。iPhone/Android/Blackberry/WindowsPhone 和第三方开发的所有本机应用程序正在调用此服务。我们添加了对 JSON 的支持，因此一些应用程序使用 JSON 调用访问此服务，而一些应用程序使用 SOAP。

仅当使用 HTTP 标头发送请求时，Web 服务才会返回 JSON `Content-type: application/json`。

我们遇到了一个 Android 平台（特别是 Galaxy Nexus）的问题，其中`Content-Type`缺少 GET 请求的标头。我们的第三方应用程序开发人员尝试了许多解决方案，但找不到强制发送 GET 请求的 Content-Type 的方法。

但是，我们确实注意到`Accept`标头设置正确并已发送，但我发现无法更改 Web 服务以使用该标头而不是`Content-Type`在这些情况下返回 JSON。

这是示例请求，它产生 XML 响应，而不是所需的 JSON。

```
GET /mobile/service.asmx/Logon?system=2&username='test'&password='1234' HTTP/1.1
Accept: application/json
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)
Connection: Keep-Alive 
```

摘自网络服务代码：

```
 [WebMethod(
        BufferResponse = false,
        CacheDuration = 0
        )]
    [ScriptMethod(UseHttpGet = true,ResponseFormat = ResponseFormat.Json) ]
    public LogonResponse Logon(int system, string username, string password)
    {
        return service.Logon(system, username, password);
    } 
```

有没有办法以某种方式强制 JSON 响应，或者检查`Accept`标头来这样做？（除了迁移到 WCF 之外？）

如果没有，应用程序开发人员告诉我他们使用 Spring 框架来发出 HTTP 请求。如果有关于如何使其在应用程序端工作并强制发送`Content-Type`GET 请求的标头的解决方案，我们也将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:05:51.343

你可以试试这个（目前无法测试）。

```
public LogonResponse Logon(int system, string username, string password)
{

    string accept = HttpContext.Current.Request.Headers("Accept");
    if (!string.IsNullOrEmpty(accept)) {
        if (accept.ToLower.EndsWith("application/json")) {
            HttpContext.Current.Response.ContentType = "application/json";
        }
    }    
    return service.Logon(system, username, password);
} 
```

编辑：更新了响应请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:17:59.260

谢谢回复。

虽然设置内容类型并没有解决问题，但它确实为我指明了正确的方向。

以下为我解决了它：

```
[WebMethod( 
        BufferResponse = false, 
        CacheDuration = 0 
        )] 
    [ScriptMethod(UseHttpGet = true,ResponseFormat = ResponseFormat.Json) ] 
    public LogonResponse Logon(int system, string username, string password) 
    { 
        return SetOutput<LogonResponse>(service.Identify(username, password));
    } 
```

和实际转换：

```
 public static T SetOutput<T>(object response)
    {
        var accept = HttpContext.Current.Request.Headers["Accept"];
        var ctype = HttpContext.Current.Request.ContentType;

        if (string.IsNullOrEmpty(ctype) && !string.IsNullOrEmpty(accept)) 
            if (accept.ToLower().EndsWith("application/json"))
            {
                var serializer = new JavaScriptSerializer();
                var json = serializer.Serialize(response); 
                HttpContext.Current.Response.ContentType = "application/json"; 
                HttpContext.Current.Response.Write(json); 
                HttpContext.Current.Response.End();
            }
        return (T)response;
    } 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:00:56.243

使用以下内容也可以用预期的“d”元素包装整个事物：

```
 public static T SetOutput<T>(T response)
    {
        var accept = HttpContext.Current.Request.Headers["Accept"];
        var ctype = HttpContext.Current.Request.ContentType;

        if (string.IsNullOrEmpty(ctype) && !string.IsNullOrEmpty(accept)) 
            if (accept.ToLower().EndsWith("application/json"))
            {
                var wrapper = new JSONWrapper<T> {d = response};
                var serializer = new JavaScriptSerializer();
                var json = serializer.Serialize(wrapper);
                HttpContext.Current.Response.ContentType = "application/json";
                HttpContext.Current.Response.Write(json);
                HttpContext.Current.Response.End();
            }

        return response;
    }

    public class JSONWrapper<T> 
    {
        public T d { set; get; }
    } 
```

# objective-c - 使用 UISegmentedControl 使某些 UIButtons 消失

> ID：12483832
> 
> 赞同：1
> 
> 时间：2012-09-18T19:38:18.170
> 
> 标签：objective-c, ios, xcode, uibutton, uisegmentedcontrol

我的故事板中有一组`UIButtons`和`UISegmentedControl`3 个片段。
的部分`UISegmentedControl`应按以下方式工作；
选择第一个时，显示所有按钮，
选择第二个时，隐藏**Button - Button1**和**Button - Button2**，
（选择第三个时，隐藏**Button - Button1**、**Button - Button2**和**Button - Button3**）。

我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:44:01.263

1.  将视图控制器指定为分段控件的目标并实现操作消息。您可以在 IB 中执行此操作，也可以使用[`addTarget:action:forControlEvents:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget%3aaction%3aforControlEvents%3a)并将事件类型设置为`UIControlEventValueChanged`.
2.  在值更改操作方法中，使用[隐藏](http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/hidden)属性隐藏或显示您想要的按钮。

# android - 调用 Toast 时出现未知的充气错误

> ID：12483841
> 
> 赞同：4
> 
> 时间：2012-09-18T19:38:41.270
> 
> 标签：android

我有一个已发布的应用程序，它得到了一些奇怪的用户反馈。因此，对于堆栈跟踪，在尝试调用`Toast` `show()`方法时出现了膨胀错误。堆栈如下：

```
android.view.InflateException: Binary XML file line #21: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:596)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:644)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
at android.view.LayoutInflater.inflate(LayoutInflater.java:457)
at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
at android.widget.Toast.makeText(Toast.java:247)
at my.app.name.Launcher$ActionDecider.onPostExecute(Launcher.java:155) 
```

在第 155 行，我只调用了 Toast 的 show()：

```
Toast.makeText(LauncherAct.getContext(), "Some random string here", Toast.LENGTH_SHORT).show(); 
```

有人知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T11:04:20.363

我有同样的问题。突然，我的 Toast 调用开始出现此错误`Binary XML file line #21: Error inflating class`。我在同一方法中再次调用我的方法，直到从网络提供商获得所需的 gps 值。当我删除自己的回忆时，问题就消失了。我没有得到他们之间的关系，但那有效。

```
public void getLocation()
{
    if(gps.canGetLocation())
    {
        latitude = gps.latitude;
        longitude = gps.longitude;
        if((latitude < 0) || (longitude < 0))
        {
            Toast.makeText(CharityGPS.this, "Konumunuz saptanıyor lütfen bekleyiniz.", Toast.LENGTH_SHORT).show();
            getLocation(); //recalling is here. when I remove it, problem has gone.
        }
        else
        {

           ...
        }
} 
```

希望这可以帮助。

# c - 测试位板是否只有一位设置为 1

> ID：12483843
> 
> 赞同：19
> 
> 时间：2012-09-18T19:38:45.363
> 
> 标签：c, bitboard

我有一个位板，如果只有一个位设置为 1，我想检查 C。

```
#include <stdint.h>
typedef uint64_t bboard;
bboard b = 0x0000000000000010;
if (only_one_bit_set_to_one (b)) // in this example expected true
  // do something... 
```

任何想法编写函数`int only_one_bit_set_to_one (bboard b)`？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-18T19:40:41.267

当然，这很容易：

```
int only_one_bit_set_to_one (bboard b)
{
    return b && !(b & (b-1));
} 
```

说`b`设置了任何位，最低有效位是位数`k`。然后具有与上面的索引`b-1`相同的位，一个 0 位在位，1 位在不太重要的位置，因此按位并从 中删除最低有效位。如果只设置了一位，则结果为 0，如果设置了更多位，则结果为非零。`b``k``k``b``b``b`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:43:26.167

这可能有点幼稚，但我会从 0 循环到 63，清除相关位，然后查看结果是否为 0：

```
if (b != 0) {
    for (i = 0; i < 64; ++i) {
        if (b & ~(1 << i)) == 0) {
            return 1;
        }
    }
    return 0;
} 
```

它远没有其他发布的答案那么聪明，但它具有易于理解的优点。

# java - Spring select标签生成隐藏字段

> ID：12483849
> 
> 赞同：1
> 
> 时间：2012-09-18T19:39:02.430
> 
> 标签：java, spring, spring-mvc

我对 Spring 标签不是很熟悉，似乎我对一些我现在无法理解的问题感到震惊。

我在我的 jsp 中显示了两个选择标签，它们由 Arraylist 支持，这里的 map 是它们的代码

```
<form:select path="prsBTOData[${status.index}].colors" items="${prsBTOData.colors}" 
cssClass="productDetailsSelect"/> 
```

和

```
<form:select path="prsBTOData[${status.index}].fonts" items="${prsBTOData.fonts}" 
cssClass="productDetailsSelect" > 
```

颜色由数组列表支持，而字体由 Map 支持。下面是生成的 HTML

```
<select multiple="multiple" class="productDetailsSelect" name="prsBTOData[0].colors" 
    id="prsBTOData0.colors">
     <option selected="selected" value="Red">Red</option>
     <option selected="selected" value="Green">Green</option>
     <option selected="selected" value="Black">Black</option>
</select>
<input type="hidden" value="1" name="_prsBTOData[0].colors"> 
```

我不知道为什么它会这样做`multiple="multiple"`并且没有显示任何下拉列表，而仅显示`RED`为选定值，而我期待一个带有下拉选项的列表。甚至不确定为什么会生成这个隐藏字段以及它的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:56:38.743

属性中是需要在选择框中显示的项目列表`form:select`。属性是与选定值绑定的属性`items`。`path`

当您给出一个数组列表（具有多个值）作为路径时，spring 假设您想要一个选择多个值的下拉列表。

你可能想给这样的（假设你`color`有财产`prsBTOData`）

```
<form:select path="prsBTOData.color" items="${prsBTOData.colors}"/> 
```

并考虑使用单独的模型对象来维护静态/参考数据（颜色、字体），如下所示：

```
<form:select path="prsBTOData.color" items="${referenceData.colors}"/> 
```

# python - 为什么这个小小的 pygame 程序会死机并且什么也不做？

> ID：12483850
> 
> 赞同：3
> 
> 时间：2012-09-18T19:39:06.697
> 
> 标签：python, pygame

这个程序无限循环。什么也没做。不会接受输入或打印任何内容。想法？

```
import pygame

pygame.init()

running = 1
while(running):
   for event in pygame.event.get():
      if event.type == pygame.KEYDOWN:
         if event.key == pygame.K_ESCAPE:
            print "hi"
            running = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:50:50.593

尝试以下操作：

```
import pygame, sys

pygame.init()
pygame.mixer.init(22050, -16, 2, 3072)
pygame.mixer.music.load("Kundara_Lake-of-Dust-320.mp3")
pygame.mixer.music.play(1, 0.0)

running = 1
while(running):
   for event in pygame.event.get():
      if event.type == pygame.KEYDOWN:
         if event.key == pygame.K_ESCAPE:
             pygame.mixer.music.stop()
             pygame.quit()
             running = 0 
```

来自[http://www.pygame.org/docs/ref/pygame.html](http://www.pygame.org/docs/ref/pygame.html)

> **pygame.quit**
> 
> 取消初始化之前已初始化的所有 pygame 模块。当 Python 解释器关闭时，无论如何都会调用此方法，因此您的程序不需要它，除非它想终止其 pygame 资源并继续。多次调用此函数是安全的：重复调用无效。
> 
> 请注意， pygame.quit 不会退出您的程序。考虑让你的程序以与普通 python 程序相同的方式结束。

`pygame.quit()`由于`while(1)`. _

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:44:50.857

您的脚本的问题仅仅是没有可以捕获事件的窗口。

您必须先创建并初始化一个窗口[`pygame.display.set_mode`](http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode)。

```
import pygame

pygame.init()

# create a window that will capture the events
pygame.display.set_mode((200, 200))

running = 1
while(running):
   for event in pygame.event.get():
      if event.type == pygame.KEYDOWN:
         if event.key == pygame.K_ESCAPE:
            print "hi"
            running = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:23:19.570

您需要更新屏幕。试试看

```
screen = pygame.display.set_mode((640,360),0,32) 
```

在循环中，写

```
pygame.dispay.flip() 
```

要完全关闭窗口，您可以使用

```
sys.exit() 
```

只需确保在您的导入中包含 sys

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T13:13:24.193

pygame 无法识别术语“输入”或“打印”。如果是这样就简单多了！！相反，要将文本显示到屏幕上，您必须使用 'drawText('message',font,surface,(xpos,ypos) 将您自己的文本放入 'message'，将您自己的表面名称放入 'surface' 以及 x 和 y 'xpos' 和 'ypos' 中的坐标。

# python - 如何为自定义类实现默认序列化方法？

> ID：12483851
> 
> 赞同：2
> 
> 时间：2012-09-18T19:39:06.333
> 
> 标签：python, json, encoding

我正在尝试编写一个使用 json 对象进行通信的程序，并且在使用自定义类时遇到了麻烦。基本上，我传递给 json.dumps 的对象是一个大字典，主要使用基本类（字符串、列表和其他字典），但在某些情况下，我必须将字符串映射到自定义类 A 的对象。

当我使用这些对象时，我会收到如下消息：

```
TypeError: <module.A object at 0x01659110> is not JSON serializable 
```

我想做的是为 A 类型的对象编写一个默认的编码方法。对象非常简单，只包含一个标签（str 类型）和一些不同的整数。标签足以唯一标识A，所以如果json单独使用标签，那很好。

在网上阅读了许多类似的问题后，我最终得到：

```
class AEncoder(json.JSONEncoder):
    def default(self, o):
        if isinstance(o, A):
            return o.label
        else:
            return super(AEncoder, self).default(o) 
```

问题是，我从所有人那里得到的消息来源包括一个电话，例如：

```
AEncoder().encode(object) 
```

这需要在将对象传递到 json.dumps() 之前调用，但我没有事先访问该对象。它藏在前面提到的大字典中，有时我无法访问。我也尝试过实现 A 的`__repr__`功能，但我得到了同样的错误。

所以......尝试一个总结版本：`json.dumps()`当我无权访问传递到的特定对象时，我如何判断如何处理自定义类`json.dumps()`？

如果需要任何澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:51:00.067

您将`cls`参数传递给[转储](http://docs.python.org/library/json.html#json.dump)函数：

```
json.dumps(obj, cls=AEncoder) 
```

这是一个示例用法：

```
>>> class Something(object):
...    def __init__(self, v):
...       self.v = v
... 
>>> import json
>>> class SEncoder(json.JSONEncoder):
...    def default(self, obj):
...       if isinstance(obj, Something):
...          return {'classtype': 'Something', 'v': obj.v}
...       return json.JSONEncoder.default(self, obj)
... 
>>> s1 = Something(3)
>>> s2 = Something(4)
>>> o = [s1, s2, 6, "hello"]
>>> print json.dumps(o, cls=SEncoder, indent=2)
[
  {
    "classtype": "Something", 
    "v": 3
  }, 
  {
    "classtype": "Something", 
    "v": 4
  }, 
  6, 
  "hello"
] 
```

# python - Django - 来自抽象基类的外键

> ID：12483854
> 
> 赞同：1
> 
> 时间：2012-09-18T19:39:26.930
> 
> 标签：python, django, inheritance, model

> **可能的重复：**
> [Django 模型中的多态性](https://stackoverflow.com/questions/5360995/polymorphism-in-django-models)

我有一个约束抽象基础模型，它有一个组的外键。几个模型从 Constraint 继承，以各种不同的方式运行。这是我所拥有的（非常简化的）版本：

```
class Constraint(models.Model):
    group = models.ForeignKey(Group)

    def get_constraint_type(self):
        return 'Base'

    class meta:
        abstract = True

class UserConstraint(Constraint):
    user = models.ForeignKey(User)

    def get_constraint_type(self):
        return 'User'

class ProjectConstraint(Constraint):
    project = models.ForeignKey(Project)

    def get_constraint_type(self):
        return 'Project' 
```

给定一个组，我需要能够提出一个指向它的约束模型实例列表。

例如，如果我这样做

```
group = ...
constraints = group.constraint_set.all()
for c in constraints:
    print c.get_constrait_type() 
```

现在，它会打印 'Base' 很多次，而不是 'User'、'Project'、'User' 等。

一个非常 hacky 的解决方案是在基类中实现这样的函数：

```
def get_child(self):
    try:
        return self.usercontraint
    except UserConstraint.DoesNotExist:
        pass
    try:
        return self.projectcontraint
    except ProjectConstraint.DoesNotExist:
        pass
    # etc... 
```

但这似乎真的很糟糕。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:50:01.357

所以，你的意思是你有 Group 模型的实例，并且你想拥有与 UserConstraint 或 ProjectConstraint 相关的查询集？

有解决方案可以`related_name`在 ForeignKey 字段中使用适当的参数来实现这一点。详细信息可在[docs](https://docs.djangoproject.com/en/dev/topics/db/models/#be-careful-with-related-name)中找到。

我认为你应该像这样定义约束模型：

```
class Constraint(models.Model):
    group = models.ForeignKey(Group, related_name="%(class)s_set")

    def get_constraint_type(self):
        return 'Base'

    class Meta:
        abstract = True 
```

并像这样使用它：

```
user_constraints = group.userconstraint_set.all()
project_constraints = group.projectconstraint_set.all() 
```

**编辑：**

我已将`related_name`from更改`"%(class)s"`为`"%(class)s_set"`. 以前的值不起作用，我不知道为什么。

# java - Vaadin：几个浏览器选项卡，没有初始重新加载

> ID：12483855
> 
> 赞同：1
> 
> 时间：2012-09-18T19:39:31.623
> 
> 标签：java, vaadin

这是 Vaadin 对多标签和不同步问题的官方解决方案： [https ://vaadin.com/web/joonas/wiki/-/wiki/Main/Supporting+Multible+Tabs#_36_messageScroll1791001](https://vaadin.com/web/joonas/wiki/-/wiki/Main/Supporting+Multible+Tabs#_36_messageScroll1791001)

如果我删除线

w.open(new ExternalResource(w.getURL()));

在提供的代码中，打开其他选项卡时应用程序网页没有刷新，我没有得到应用程序选项卡的不同 url，到目前为止我没有遇到“不同步”错误。

我没有看到拥有单独的窗口类（并在此类中隔离特定于窗口的状态）与为打开应用程序的每个选项卡具有不同的应用程序 URL 的事实之间的关系。

上面的代码是必需的吗？

提前致谢。

# php - Codeigniter/PHP 检查是否可以连接到数据库

> ID：12483861
> 
> 赞同：6
> 
> 时间：2012-09-18T19:40:10.717
> 
> 标签：php, mysql, codeigniter, database-connection

我想用我的主数据库备份我的只读副本（即从属）数据库，但是我做的这个简单的布尔值失败了：

```
$config['hostname'] = "myReadReplicaDatabase.com";
//...$config['other_stuff']; other config stuff...
$db_obj=$CI->load->database($config, TRUE);

if(!$db_obj){
     $config['hostname'] = "myMasterDatabase.com";
     $db_obj=$CI->load->database($config, TRUE);
} 
```

终止我的只读副本数据库后，我希望布尔值评估为`FALSE`，然后脚本使用我的主数据库。不幸的是，我得到了以下 PHP 错误：

```
Unable to connect to your database server using the provided settings.
Filename: core/Loader.php 
```

我想要的只是连接返回真或假，有人知道如何在 Codeigniter 中执行此操作吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T17:42:48.563

我的问题[在 Codeigniter 论坛上的这个线程上](http://codeigniter.com/forums/viewthread/224522/)得到了回答。

关键是**不要**自动初始化数据库：

```
$db['xxx']['autoinit'] = FALSE; 
```

要抑制错误，您可以设置此

```
$db['xxx']['db_debug'] = FALSE; 
```

然后在检查数据库状态的代码中，检查 initialize() 函数的 TRUE/FALSE：

```
$db_obj = $this->database->load('xxx',TRUE);
  $connected = $db_obj->initialize();
  if (!$connected) {
  $db_obj = $this->database->load('yyy',TRUE);
} 
```

这是我的整个配置文件以供将来参考：[https](https://gist.github.com/3749863) ://gist.github.com/3749863 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:44:36.513

根据这里所说的： [Codeigniter switch to secondary database if primary is down](https://stackoverflow.com/questions/7789045/codeigniter-switch-to-secondary-database-if-primary-is-down)

您可以`conn_id`在`$db_obj`

```
if ($db_obj->conn_id === false) {
    $config['db_debug'] = true;
    $config['hostname'] = "myMasterDatabase.com";
    $db_obj=$CI->load->database($config, TRUE);
} 
```

这应该有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T13:15:58.473

当您连接到数据库时，它在成功的情况下返回带有连接 ID 的连接对象，否则返回 false。

您可以检查它以确保数据库连接是否完成。

```
$db_obj=$CI->load->database($config, TRUE);
if($db_obj->conn_id) {
    //do something
} else {
    echo 'Unable to connect with database with given db details.';
} 
```

试试这个，让我知道，如果你有任何其他问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T19:57:11.820

```
try { 

// do database connection

} catch (Exception $e) {
  // DO whatever you want with the $e data, it has a default __toString() so just echo $e if you want errors or default it to connect another db, etc.
  echo $e->getMessage();

// Connect to secondary DB.
} 
```

对于那些反对我的人，你可以这样做。异常将捕获 PDOException。

```
try {

    $pdo = new PDO($dsn, $username, $password);

} catch(PDOException $e) {

    mail('webmaster@example.com', 'Database error message', $e->getMessage());

    // and finally... attempt your second DB connection.

   exit;

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-21T20:11:01.470

我测试了我发现的所有东西，没有任何东西，我发现的唯一方法是使用 dbutil 检查数据库是否存在，如下所示：

```
$this->load->database();
$this->load->dbutil();

// check connection details
if( !$this->dbutil->database_exists('myDatabase'))
    echo 'Not connected to a database, or database not exists'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T19:58:01.187

```
$readReplica = @$CI->load->database($config, TRUE); // ommit the error
if ($readReplica->call_function('error') !== 0) {
    // Failed to connect
} 
```

我不确定错误代码（不确定它是否是 int/string）并且附近没有 CI 来测试它，但这个原则应该有效

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-28T11:12:33.140

```
$this->load->database();

print_r($this->db); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-24T13:41:24.427

它为我工作

```
$config['xxx'] = xx;
        ...    
$config['db_debug'] = false;
$db_obj = @$this->load->database($config,true);
if(!@$db_obj->initialize()){
    echo "Unable to connect database";
    die;
} 
```

# grails - 在 Grails 中检索 HTTP 参数

> ID：12483863
> 
> 赞同：-1
> 
> 时间：2012-09-18T19:40:37.273
> 
> 标签：grails

请求是从 HTML 表单发送的，请求正文包含表单数据，我如何在我的 Grails 应用程序中检索该数据。下面是我需要检索数据的 URL。我是 Grails 中的新手，所以请帮忙我用这个。

```
hxxp//localhost:8080/copypolicyNumber/loginaction.jsp?fname=Roger&lname=wallace&city=Des+Moines&pnum=123456&submit=Submit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:06:30.890

当您刚开始使用 Grails 时，我建议您查看[Grails 网站上提供的截屏视频](http://grails.org/screencasts)，并查看免费的电子书[Grails 入门](http://www.infoq.com/minibooks/grails-getting-started)（需要注册）。

Grails 使用[参数](http://grails.org/doc/2.1.0/ref/Controllers/params.html)映射来处理 GET 和 POST 请求。此外，它使用您需要注意的特殊[url 映射。](http://grails.org/doc/2.1.0/guide/single.html#urlmappings)

因此，假设您有一个带有操作登录的登录控制器并考虑到您调用了 url：`myapp/login/login?fname=Roger&lname=wallace&city=Des+Moines&pnum=123456`

```
class LoginController {

  def login() {
    println params.fname //Roger
    println params.lname //wallace
    println params.city //Des Moines
    println params.pnum //123456
  }  

} 
```

# html - 下拉菜单在 ebay 上不起作用

> ID：12483874
> 
> 赞同：0
> 
> 时间：2012-09-18T19:41:11.167
> 
> 标签：html, css, drop-down-menu, menu

我有以下下拉菜单：[http://jsfiddle.net/McKgU/](http://jsfiddle.net/McKgU/)如您所见，它工作正常。然而，当在 eBay 上时，布局到处都是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:48:29.700

您正在为所有无序列表和列表项设置样式。什么！？您需要使您的选择器非常具体，这样您就不会干扰页面上的现有样式。

您可以将所有内容包装在一个 div 中，然后使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)选择 ul 和 li。

或者，既然您已经有一个 ul#menu，请在 CSS 中使用它。`ul#menu { ... }`这只会对具有“菜单”ID 的 ul 元素进行样式设置。如果页面也有带有菜单 id 的 ul，我仍然会将 id 从菜单更改为更具体的内容。

参考：[选择器](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:29:06.497

试试这个：http: [//jsfiddle.net/McKgU/5/](http://jsfiddle.net/McKgU/5/)

我做了什么：

1) 在你的“菜单”`id`前面加上#NOINTERFERE00_

为什么？由于“菜单”是 ids/classes/whatever 的一个相当常见的名称选择，因此页面上存在具有相同名称的另一个元素的可能性非常高。这可确保您的“菜单”与页面上任何其他 ID 为“菜单”的元素之间没有干扰（css 或 js）。

2) 我在每个 CSS 声明的末尾添加了 !important。

为什么？您插入此页面的作者也很可能具有针对 ul、li 和 a 的样式。这可以确保您的优先（除非作者在他自己的样式表上使用了重要的。在大多数情况下他不应该，但可能会。）

我没有做的：

3）将原作者的样式表应用的所有样式重置为ul、li和a的。（我仍在寻找更好的方法）

[Scoped CSS](http://css-tricks.com/saving-the-day-with-scoped-css/)以更优雅的方式解决了问题 1 和 2。但是，我相信目前只有 Chrome 支持。

# java - IzPack 错误：jenkins-ci 上的基目录无效

> ID：12483878
> 
> 赞同：1
> 
> 时间：2012-09-18T19:41:30.160
> 
> 标签：java, maven, jenkins, izpack

首先我不确定这个问题是属于这里还是属于服务器故障。我正在为我们的项目使用 IzPack。在我的本地机器上一切正常。不幸的是我的詹金斯我有以下错误：

```
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] com.izforge.izpack.api.exception.CompilerException: Invalid base directory: /root/.jenkins/jobs/installer-izpack/workspace/target/staging 
```

我在用：

```
<groupId>org.codehaus.izpack</groupId>
<artifactId>izpack-maven-plugin</artifactId>
<version>5.0.0-beta8</version> 
```

jenkins 安装在 debian 挤压机上。当我远程登录服务器并验证目标/目录时，从 maven 创建的 jar 在那里，但没有“暂存”目录。老实说，我认为问题在于詹金斯无法创建临时存储库。像往常一样感谢您的宝贵时间。

我如何进行：我正在构建其他一些 jar（其他 jenkins 工作），然后启动安装程序以打包所有内容。我不知道这是否足够的信息。如果您需要更多信息或有什么不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:14:58.627

这是一个权限问题，请确保 jenkins 具有创建临时目录的权限。

# java - 如何在 AlertDialog 之后显示 ProgressDialog

> ID：12483884
> 
> 赞同：0
> 
> 时间：2012-09-18T19:42:14.060
> 
> 标签：java, android, android-asynctask, android-alertdialog, progressdialog

我在无法隐藏的警报对话框中遇到问题。

当用户按下按钮时，我会显示一个使用此代码创建的对话框：

```
new AlertDialog.Builder(this)
            .setTitle(R.string.enterPassword)                
            .setView(textEntryView)          
            .setPositiveButton(R.string.ok, 
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            String password = pwdText.getText().toString();
                            dialog.dismiss();
                            processUserAction(password,targetUri);
                        }
                    })
            .setNegativeButton(R.string.cancel, 
                    new DialogInterface.OnClickListener() {                    
                        public void onClick(DialogInterface dialog, int whichButton) {
                            }                
                        })             
            .
            create(); 
```

在“processUserAction”方法中执行了一些繁重的操作，在其中我使用了一个显示 ProgressDialog 的 AysncTask。

我遇到的问题是提示输入密码的对话框永远不会离开屏幕（我尝试过用dismiss（），cancel（））。我猜它会一直留在那里，直到 onClick 方法完成。

所以，我的问题是如何关闭那个 AlertDialog，所以我可以显示 ProgressDialog？

我一直在尝试的另一种方法是在 AlertDialog 中设置 DismissListener 并从那里调用繁重的操作，但我没有运气（它没有被调用）。

**编辑**：添加 AsyncTask 代码

```
public class BkgCryptOperations extends AsyncTask<File,Void,Integer>{

    @Override
    protected Integer doInBackground(File... files) {
        if (files!=null && files.length > 0){
            File source = files[0];
            File target = files[1];
            return cryptAction.process(source,password, target);
        }

        return Constants.RetCodeKO;
    }

    CryptAction cryptAction;
    String password;
    ProgressDialog progressDialog;

    public BkgCryptOperations (CryptAction cryptAction,String password,ProgressDialog progressDialog){
        this.cryptAction=cryptAction;
        this.password=password;
        this.progressDialog=progressDialog;
    }

    @Override
    protected void onPreExecute() {
        if (progressDialog!=null){
            progressDialog.show();
        }
    }
    protected void onPostExecute(Integer i) {
        if (progressDialog!=null){
            progressDialog.dismiss();
        }
    }

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:11:45.353

这是我如何做的一个例子：

```
public void daten_remove_on_click(View button) {
        // Nachfragen
        if (spinadapter.getCount() > 0) {
            AlertDialog Result = new AlertDialog.Builder(this)
                    .setIcon(R.drawable.icon)
                    .setTitle(getString(R.string.dialog_data_remove_titel))
                    .setMessage(getString(R.string.dialog_data_remove_text))
                    .setNegativeButton(getString(R.string.dialog_no),
                            new DialogInterface.OnClickListener() {
                                public void onClick(
                                        DialogInterface dialogInterface, int i) {
                                    // Nicht löschen
                                    dialogInterface.cancel();
                                }
                            })
                    .setPositiveButton(getString(R.string.dialog_yes),
                            new DialogInterface.OnClickListener() {
                                public void onClick(
                                        DialogInterface dialogInterface, int i) {
                                    String _quellenName = myCursor.getString(1);
                                    deleteQuellenRecord(_quellenName);
                                    zuletztGelöscht = _quellenName;
                                }
                            }).show();
        } else {
            // Keine Daten mehr vorhanden
            Toast toast = Toast.makeText(Daten.this,
                    getString(R.string.dialog_data_remove_empty),
                    Toast.LENGTH_SHORT);
            toast.show();
        }
    } 
```

这是deleteQuellenRecord的代码：

```
private void deleteQuellenRecord(String _quellenName) {
        String DialogTitel = getString(R.string.daten_delete_titel);
        String DialogText = getString(R.string.daten_delete_text);
        // Dialogdefinition Prograssbar
        dialog = new ProgressDialog(this) {
            @Override
            public boolean onSearchRequested() {
                return false;
            }
        };
        dialog.setCancelable(false);
        dialog.setTitle(DialogTitel);
        dialog.setIcon(R.drawable.icon);
        dialog.setMessage(DialogText);
        // set the progress to be horizontal
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        // reset the bar to the default value of 0
        dialog.setProgress(0);
        // set the maximum value
        dialog.setMax(4);
        // display the progressbar
        increment = 1;
        dialog.show();
        // Thread starten
        new Thread(new MyDeleteDataThread(_quellenName)) {
            @Override
            public void run() {
                try {
                    // Datensatz löschen
                    myDB.execSQL("DELETE ... ');");
                    progressHandler
                            .sendMessage(progressHandler.obtainMessage());
                    myDB.execSQL("DELETE ...);");
                    // active the update handler
                    progressHandler
                            .sendMessage(progressHandler.obtainMessage());
                    myDB.execSQL("DELETE ...;");
                    // active the update handler
                    progressHandler
                            .sendMessage(progressHandler.obtainMessage());
                    // Einstellung speichern
                    try {
                        settings.edit().putString("LetzteQuelle", "-1")
                                .commit();
                    } catch (Exception ex) {
                        settings.edit().putString("LetzteQuelle", "").commit();
                    }

                } catch (Exception ex) {
                    // Wait dialog beenden
                    dialog.dismiss();
                    Log.e("Glutenfrei Viewer",
                            "Error in activity MAIN - remove data", ex); // log
                                                                            // the
                                                                            // error
                }
                // Wait dialog beenden
                dialog.dismiss();

            }
        }.start();
        this.onCreate(null);
    } 
```

使用异步任务我这样做：

```
private class RunningAlternativSearch extends
            AsyncTask<Integer, Integer, Void> {

        final ProgressDialog dialog = new ProgressDialog(SearchResult.this) {
            @Override
            public boolean onSearchRequested() {
                return false;
            }
        };

        @Override
        protected void onPreExecute() {
            alternativeSucheBeendet = false;
            String DialogTitel = getString(R.string.daten_wait_titel);
            DialogText = getString(R.string.dialog_alternativ_text);
            DialogZweiteChance = getString(R.string.dialog_zweite_chance);
            DialogDritteChance = getString(R.string.dialog_dritte_chance);
            sucheNach = getString(R.string.dialog_suche_nach);
            dialog.setCancelable(true);
            dialog.setTitle(DialogTitel);
            dialog.setIcon(R.drawable.icon);
            dialog.setMessage(DialogText);
            dialog.setOnDismissListener(new OnDismissListener() {
                public void onDismiss(DialogInterface arg0) {
                    // TODO Auto-generated method stub
                    cancleBarcodeWorker();
                    if (alternativeSucheBeendet==false){
                        // Activity nur beenden wenn die Suche
                        // nicht beendet wurde, also vom User abgebrochen
                        Toast toast = Toast.makeText(SearchResult.this, SearchResult.this
                                .getString(R.string.toast_suche_abgebrochen),
                                Toast.LENGTH_LONG);
                        toast.show();
                        myDB.close();
                        SearchResult.this.finish();
                    }
                }
            });
            dialog.show();
        }

        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:04:29.807

你能显示 processUserAction(..) 的代码吗？没有必要包括解雇。我做了一些非常相似的事情并且没有问题......这是代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Export data.\nContinue?")
            .setCancelable(false)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            String file = getObra().getNome();
                            d = new ProgressDialog(MenuActivity.this);
                            d.setTitle("Exporting...");
                            d.setMessage("please wait...");
                            d.setIndeterminate(true);
                            d.setCancelable(false);
                            d.show();
                            export(file);
                        }
                    })
            .setNegativeButton("No",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show(); 
```

在 export(file) 我打开线程：

```
private void export(final String file) {

    new Thread() {
        public void run() {
            try {
                ExportData ede = new ExportData(
                        getApplicationContext(), getPmo().getId(),
                        file);
                ede.export();
                handlerMessage("Done!!");
            } catch (Exception e) {
                handlerMessage(e.getMessage());
                System.out.println("ERROR!!!" + e.getMessage());
            }
        }
    }.start();
} 
```

在 handlerMessage 中，我关闭了 progressDialog 并显示最终消息。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:37:32.477

您可以在 AlertDialog 之外创建一个侦听器，以抽象出 OnClickListener 中肯定按钮的逻辑。这样，可以通知侦听器，并且 AlertDialog 将立即关闭。然后，对来自 AlertDialog 的用户输入的任何处理都可以独立于 AlertDialog 进行。我不确定这是否是实现这一目标的最佳方式，但过去它对我来说效果很好。

据我所知，我没有看到您的 AsyncTask 代码有任何明显的问题。

```
public interface IPasswordListener {
    public void onReceivePassword(String password);
}

IPasswordListener m_passwordListener = new IPasswordListener {
    @Override
    public void onReceivePassword(String password) {
        processUserAction(password,targetUri);
    }
}

public void showPasswordDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(R.string.enterPassword);
    builder.setView(textEntryView);
    builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            m_passwordListener.onReceivePassword(pwdText.getText().toString());
            dialog.dismiss();
        }
    });
    builder.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            dialog.cancel();
        }
    });
    builder.show();
} 
```

# visual-studio-2010 - MSBuild - 远程代理 URL 错误

> ID：12483888
> 
> 赞同：1
> 
> 时间：2012-09-18T19:42:50.763
> 
> 标签：visual-studio-2010, msbuild, teamcity, web-deployment, webdeploy

我在 VS2010 中使用“发布 Web”对话框已经一年多了。在“服务 URL”部分，我有：

[http://server.workapps.com](http://server.workapps.com)

...而且我的部署对我的所有应用程序都没有问题。

现在我正在尝试使用 Teamcity 创建一个 CI 环境，并遇到了我声明的属性的问题：

```
/p:MsDeployServiceUrl="http://server.workapps.com" 
```

...开始出错。

为了调试，我开始使用命令行 MSBuild.exe，直到我得到正确的设置，但这里 MSBuild 再次转换我的属性：

"/p:MsDeployServiceUrl="http://server.workapps.com"

...进入一个错误的请求：

```
"Remote agent (URL https://server.workapps.com:8172/msdeploy.axd?site=uat.workapps.com) could not be contacted. 
```

仅供参考，服务器 Web Deploy 设置为在 http:80 上运行，我正在尝试部署 MVC Web Applciation (c#)。

谁能告诉我为什么它不使用我提供的 URL 并添加 https 和端口？

请看我下面的参数：

```
/p:Configuration=Debug
/p:DeployOnBuild=True
/p:DeployTarget=MSDeployPublish
/p:MsDeployServiceUrl="http://server.workapps.com" 
/p:username=Administrator 
/p:password=NotOriginalPassword
/p:AllowUntrustedCertificate=True 
/P:CreatePackageOnPublish=True 
/p:DeployIisAppPath=uat.workapps.com 
/p:MSDeployPublishMethod=WMSVC 
```

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:11:49.600

看来我需要使用以下内容：

```
/p:MSDeployPublishMethod=RemoteAgent 
```

与 WMSVC 不同。

# .net - 如何同时操作 UI 线程上的两个不同控件？

> ID：12483895
> 
> 赞同：1
> 
> 时间：2012-09-18T19:43:20.003
> 
> 标签：.net, winforms, multithreading

如何在保持应用程序 UI 线程响应的同时持续操作标签的文本？我正在 Visual Studio 2010 中创建一个 Windows 窗体应用程序。此外，如果您可以在 vb.net 或 c# 中发布您的示例，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:48:11.843

您必须从另一个线程执行此操作，使用`BeginInvoke`，这将改变 UI 线程上的 UI 控件的状态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T20:34:06.997

如果您使用的是 .NET Framework 4，则可以使用异步任务。

这段代码将在一个新线程上启动一些东西：

```
var myBackgroundTask = Task.Factory.StartNew(() => MyBackGroundMethod()); 
```

你说你要更新用户界面（UI），好吧，因为UI上的控件是在主线程上创建的，直接从另一个线程访问它们会抛出跨线程异常。但是，您可以从后台线程启动一个新任务并告诉它在主线程上运行，如下所示：

```
private void MyMethod()
{
   var uiTaskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
   var myBackgroundTask = Task.Factory.StartNew(() => MyBackGroundMethod(uiTaskScheduler));
}

private void MyBackGroundMethod(TaskScheduler uiTaskScheduler)
{
    Task.Factory.StartNew(
            () => { TextBox1.Text = "Hello from separate thread"; },
            CancellationToken.None,
            TaskCreationOptions.None,
            uiTaskScheduler);
} 
```

如果你想在任务完成后做某事，你可以像这样使用延续：

```
var finishedTask = myBackgroundTask.ContinueWith(
                    x => Label1.Text = "Task 1 completed sucessfully",
                    CancellationToken.None,
                    TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion,
                    uiTaskScheduler); 
```

注意 TaskContinuationOptions - 您可以指定仅在没有错误时继续，或者仅在取消、未取消等（更多）时继续。

如果要允许取消长时间运行的进程，可以使用 CancellationToken。

这是一个使用后台任务、更新进度、允许取消以及在完成、出错、取消或完成时报告的完整示例。

它是一个带有 2 个按钮、1 个标签和 1 个进度条的表单。分别命名为StartButton、StopButton、ProgressBar、InformationLabel。

```
public partial class MainForm : Form
{
    CancellationTokenSource cancelTokenSource;

    public MainForm()
    {
        InitializeComponent();
    }

    private void StartButton_Click(object sender, EventArgs e)
    {
        InformationLabel.Text = "Task 1 running...";
        var uiTaskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
        cancelTokenSource = new CancellationTokenSource();

        this.StopButton.Enabled = true;
        this.StartButton.Enabled = false;

        var someWork = Task.Factory.StartNew(
            () => { DoWork(uiTaskScheduler); },
            cancelTokenSource.Token,
            TaskCreationOptions.None,
            TaskScheduler.Default);

        var someWorkFinished = someWork.ContinueWith(
                x => InformationLabel.Text = "Task 1 completed sucessfully",
                CancellationToken.None,
                TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion,
                uiTaskScheduler);

        var someWorkErrored = someWork.ContinueWith(
                x => InformationLabel.Text = "Task 1 Errored",
                CancellationToken.None,
                TaskContinuationOptions.OnlyOnFaulted,
                uiTaskScheduler);

        var someWorkCancelled = someWork.ContinueWith(
                x => InformationLabel.Text = "Task 1 Cancelled",
                CancellationToken.None,
                TaskContinuationOptions.OnlyOnCanceled,
                uiTaskScheduler);

        var resultTasks = new List<Task>();
        resultTasks.Add(someWorkFinished);
        resultTasks.Add(someWorkErrored);
        resultTasks.Add(someWorkCancelled);

        Task.Factory.ContinueWhenAny(
            resultTasks.ToArray(),
            x => this.Reset(),
            CancellationToken.None,
            TaskContinuationOptions.None,
            uiTaskScheduler);
    }

    private void Reset()
    {
        this.StopButton.Enabled = false;
        this.StartButton.Enabled = true;
    }

    private void DoWork(TaskScheduler uiTaskScheduler)
    {
        for (int i = 0; i < 10; i++)
        {
            cancelTokenSource.Token.ThrowIfCancellationRequested();

            Thread.Sleep(500);
            i++;

            // Update progress
            Task.Factory.StartNew(
                () => { UpdateProgress(ProgressBar, i * 10); }, 
                CancellationToken.None, 
                TaskCreationOptions.None, 
                uiTaskScheduler);
        }
    }

    private void UpdateProgress(ProgressBar progressBar, int i)
    {
        progressBar.Value = i;
    }

    private void StopButton_Click(object sender, EventArgs e)
    {
        cancelTokenSource.Cancel();
    }
} 
```

# php - Javascript生成的PHP表单数组未解析

> ID：12483906
> 
> 赞同：2
> 
> 时间：2012-09-18T19:44:02.290
> 
> 标签：php, javascript, arrays, forms

我创建了一个简单的 PHP 表单，每次用户单击“添加”按钮时，它都会通过调用 javascript 函数来附加一个字段。

表格代码：

```
<form name="academicForm" method="post" action="send.php">
  <script src="addInput.js" language="Javascript" type="text/javascript"></script>
  <tr>
    <td align="center" valign="middle">
      <div id="dynamicInput"> 
        <span id="dynamicInput">Entry #1</span><br />

          <input type="text" name="myInputs[]"/>
          <select name="formGender[]">
            <option value="">Choose one...</option>
            <option value="First">first</option>
            <option value="Second">second</option>
            <option value="Third">third</option>
          </select> <br>
          <input type="submit" value="Submit">

          <input type="button" value="Add fields" onclick="addInput('dynamicInput');"/>
              </div>
    </td> 
  </tr>
</table>
</form> 
```

javascript代码：

```
var counter = 1;
function addInput(divName){
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry #" + (counter + 1) + "<br><input type='text' name='myInputs[]'> <select name='formGender[]'> <option value=''>Chose one...</option><option value='First'>first</option><option value='Second'>second</option><option value='Third'>third</option></select>";
         newdiv.setAttribute('id', divName);
         document.getElementById(divName).appendChild(newdiv);

          counter++;
     }
} 
```

然后，当按下提交按钮时，将定向到 send.php，其中将解析表单中使用的 $_POST 变量：

```
$myInputs = $_POST["myInputs"];
$formGender = $_POST["formGender"];

foreach ($myInputs as $eachInput) {
    $output .=  $eachInput . "\n";
}

foreach ($formGender as $eachInput2) {
    $output .=  $eachInput2 . "\n";
} 
```

然后，每当我运行它时，只会打印第一个表单条目的结果。插入到由 Javascript 生成的表单字段中的所有数据，尽管指向相同的变量，都不存在。

谁可以帮我这个事？

**更新**

Javascript 和 PHP 代码都已更改，以解决重复 ID 和“添加”位置：

Javascript：

```
newdiv.setAttribute('id', divName+counter);
document.getElementById(divName).appendChild(newdiv); 
```

PHP：

```
<form name="academicForm" method="post" action="send.php">
  <script src="addInput.js" language="Javascript" type="text/javascript"></script>
  <tr>
    <td align="center" valign="middle">
      <div id="dynamicInputForm"> 

<input type="button" value="Add fields" onclick="addInput('dynamicInput');"/>

        <span id="dynamicInput">Entry #1</span><br />

          <input type="text" name="myInputs[]"/>
          <select name="formGender[]">
            <option value="">Choose one...</option>
            <option value="First">first</option>
            <option value="Second">second</option>
            <option value="Third">third</option>
          </select> <br>
          <input type="submit" value="Submit">

              </div>
    </td> 
  </tr>
</table>
</form> 
```

这是向表单添加 3 个新元素的结果，如 Chrome Inspector 中所示：

```
<div id="dynamicInputForm"> 

                    <input type="button" value="Add" onclick="addInput('dynamicInputForm');">
                          <br>
                          <br>

        <span id="dynamicInput">Entry #1</span><br>
          <input type="text" name="myInputs[]">
          <select name="formGender[]">
                <option value="">Choose one...</option>
                <option value="First">first</option>
                <option value="Second">second</option>
                <option value="Third">third</option>
              </select>
          </select> <br>

    <div id="dynamicInputForm1"> /*HTML code above*/ </div>
    <div id="dynamicInputForm2"> /*HTML code above*/</div>
    <div id="dynamicInputForm3">/*HTML code above*/</div>
</div>

<input type="submit" value="Submit"> 
```

print_r($_POST); 的结果

```
Array ([myInputs] => Array ( [0] => firstEntry ) [formGender] => Array ( [0] => Third ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:53:14.543

一方面，您有两个具有相同 ID 的元素。ID 必须是唯一的。其次，您将新的输入元素添加到 div 容器的末尾，而不是在表单中。我相信这就是你的问题所在。尝试将它们添加到您的提交按钮上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:52:08.490

在您的代码中，您对多个元素使用相同的 Id

```
var counter = 1;
function addInput(divName){
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry #" + (counter + 1) + "<br><input type='text' name='myInputs[]'> <select name='formGender[]'> <option value=''>Chose one...</option><option value='First'>first</option><option value='Second'>second</option><option value='Third'>third</option></select>";

        /// newdiv.setAttribute('id', divName); //*** Element with id 'dynamicInput' already exist in the dom.
         document.getElementById(divName).appendChild(newdiv);

          counter++;
     }
} 
```

# jqgrid - jqGrid：无法使用键盘来聚焦和操作图标以进行编辑/删除/页面导航

> ID：12483908
> 
> 赞同：2
> 
> 时间：2012-09-18T19:44:09.510
> 
> 标签：jqgrid

您不能 <TAB> 进入编辑/删除/页面导航的图标和 <ENTER> 来执行相应的操作。当您在不同的“可操作”项目（例如链接、输入元素）上时，这些图标不会获得焦点。如何实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T19:12:15.983

我不确定这是否回答了您的问题，但我遇到了类似的问题。这就是我最终要做的。在我的链接格式化程序中，我将链接更改为按钮，并且现在可以使用 kepboard 导航和驱动。

在下面显示的“姓氏”的 colModel 中，我有一个“lastNameFormatter”的链接格式化程序

```
 colModel: [
        { name: 'RequestDate', index: 'RequestDate', search: false, width: 110, fixed: true, editable: false, align: 'left', cellStyle:'padding-left:5px', title: false, formatter: ndateFormatter },
        { name: 'LastName', index: 'LastName', search: false, width: 110, title: false, formatter: lastNameFormatter },
        { name: 'DlNum', index: 'DlNum', search: false, width: 130, align: 'left', title: false },
        { name: 'DlState', index: 'DlState', search: false, width: 50, align: 'left', title: false },
        { name: 'UserName', index: 'UserName', search: false, width: 180, align: 'left', title: false, resizable: true },
        { name: 'AuthCode', index: 'AuthCode', search: false, hidden: false, width: 85, sortable: false, formatter: viewLinkFormatter, align: 'left', title: true},
        { name: 'ProbationDescription', index: 'ProbationDescription', search: false, sortable: false, hidden: true, title: false}
    ], 
```

然后执行以下操作：

```
function lastNameFormatter(cellval, opts, rwdat, _act) {
var probationDescription = rwdat.ProbationStatusDescription;
if ((probationDescription == null) ||
    (probationDescription.toLowerCase() == "accepted")) {
    return "<button type='button' class='jqGridButton' onclick='submitView(\"" + rwdat.AuthCode + "\"); return false;' >" + cellval + "</button>";
} else {
    return cellval;
} 
```

所以......在这里使用一个按钮似乎可以解决jqGrid链接的键盘导航问题。

也许不是一个确切的答案，但希望你在这里找到一些有用的东西。

# git - 修复由于大二进制文件而变慢的 git 存储库

> ID：12483910
> 
> 赞同：20
> 
> 时间：2012-09-18T19:44:24.160
> 
> 标签：git

我们有一个包含源代码和二进制文件的 git 存储库。裸仓库现已达到约 9GB，克隆它需要很长时间。大部分时间都花在“远程：压缩对象”上。在使用较大二进制文件的新版本提交后，获取需要很长时间，还需要在服务器上压缩对象。

在没有远程压缩对象的情况下阅读[git pull](https://stackoverflow.com/questions/7102053/git-pull-without-remotely-compressing-objects)后，我怀​​疑二进制文件的增量压缩也会伤害我们，但我不是 100% 确定如何解决这个问题。

在服务器上修复裸仓库的具体步骤是什么？我猜：

*   为我想要添加到 .git/info/attributes 的所有扩展名添加类似 '*.zip -delta' 的条目
*   运行“git repack”，但有什么选项？-adF 会重新打包所有内容，并给我留下一个没有对指定文件类型进行增量压缩的存储库吗？
*   运行“git prune”。我认为这是自动完成的，但是当我玩弄上述 repo 的裸克隆时运行它，大小减少了约 2GB
*   克隆 repo，添加并提交一个 .gitattributes，其条目与我在裸 repo 的 .git/info/attributes 中添加的条目相同

我在做某事吗？

**更新：**

一些有趣的测试结果。今天我开始对有问题的 repo 进行一个简单的克隆。我们的 4GB 内存的不那么强大的服务器内存不足并开始交换。3小时后我放弃了...

然后我从我的最新工作副本中克隆了一个裸仓库。在工作站之间克隆那个需要大约 5 分钟。然后我将它作为新的仓库推送到服务器。克隆*那个*repo 只用了 7 分钟。

如果我正确地解释了这一点，即使没有禁用二进制文件的增量压缩，一个更好的打包 repo 性能也会更好。我想这意味着上述步骤确实是我短期内想要做的，但另外我需要找出如何限制 git 允许在服务器上用于打包/压缩的内存量，这样我就可以避免交换。

以防万一：服务器运行 git 1.7.0.4，工作站运行 1.7.9.5。

**更新 2：**

我在我的 testrepo 上执行了以下步骤，并认为我将有机会在服务器上执行它们（备份后）

*   打包对象时限制内存使用

    *git config pack.windowMemory 100m*
    *git config pack.packSizeLimit 200m*

*   禁用某些扩展的增量压缩

    *echo '*.tar.gz -delta' >> 信息/属性*
    *echo '*.tar.bz2 -delta' >> 信息/属性*
    *echo '*.bin -delta' >> 信息/属性*
    *echo '*.png -delta ' >> 信息/属性*

*   重新打包存储库并收集垃圾

    *git repack -a -d -F --window-memory 100m --max-pack-size 200m*
    *git gc*

**更新 3：**

此操作后的一些意外副作用：[尝试重新打包 git repo 以提高性能后的问题](https://stackoverflow.com/questions/13367431/issues-after-trying-to-repack-a-git-repo-for-improved-performance)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T20:36:22.477

虽然您的问题询问如何使您当前的回购更有效率，但我认为这是不可行的。

听从群众的建议：

1.  将您的大型二进制文件移出您的存储库
2.  将您的开发环境移动到虚拟机映像：[https ://www.virtualbox.org/](https://www.virtualbox.org/)
3.  使用这个 Python 脚本来清理那些大型二进制 blob 的存储库（我在我的存储库中使用它并且效果很好） [https://gist.github.com/1433794](https://gist.github.com/1433794)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:26:55.750

你应该使用不同的机制来存储大二进制文件，如果它们是从你不能存储它们的东西生成的，只是生成它们的代码，否则我建议将它们全部移动到一个目录并使用 rsync 或 svn 管理它取决于你的需要。

# php - 链接名称中带有空格的图像

> ID：12483912
> 
> 赞同：0
> 
> 时间：2012-09-18T19:44:41.570
> 
> 标签：php, html

我有一个小的图片库，客户可以在其中上传图片和预览。我正在使用“灯箱”来制作 jquery 预览。

该脚本适用于任何图像名称，除了带有空格的图像名称（超过 1 个单词。例如“Sin titulo.jpg”）

我将img的名称保存在db中，并将img的名称保存在服务器中。两者相等，并且都有空白。

管理空间的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:47:01.123

我不知道这个的 php 版本，但你所追求的是一种叫做编码的东西。它很可能被称为 htmlEncode 之类的东西。

基本上它将“Sin titulo.jpg”变成“Sin%20titulo.jpg”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:47:29.673

您需要对数据库中的名称进行编码，以便它们使用 %20 而不是空格。这应该使它们在所有浏览器中都能正常工作。见[urlencode()](http://us.php.net/manual/en/function.urlencode.php)

# mysql - 从带有连接的 MySQL 数据库中选择 2 列

> ID：12483913
> 
> 赞同：1
> 
> 时间：2012-09-18T19:44:42.447
> 
> 标签：mysql, sql

我有以下表格：

**团队**

```
+------+--------------+--------------+
| id   |  team_name   |  team_code   |
+------+--------------+--------------+
|  1   |  Wales       | WAL          |
|  2   |  England     | ENG          |
|  3   |  New Zealand | NZL          |
+------+--------------+--------------+ 
```

**火柴**

```
+------+-----------+-----------+
| id   |  team_a   |  team_b   |
+------+-----------+-----------+
|  1   |  WAL      | ENG       |
|  2   |  ENG      | NZL       |
|  3   |  WAL      | NZL       |
+------+-----------+-----------+ 
```

我知道联接是如何工作的，但我不知道如何通过从数据库`Matched.id`中获取两个团队的团队名称来查询`Teams`数据库。让我解释得更好

*   对于每场比赛，我需要确定球队名称
*   我会查询`Matches.id`
*   所以对于匹配：1 我需要选择“威尔士”和“英格兰”

希望我已经足够清楚地解释了我的问题，但如果我还没有，请随时提出更多问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:47:04.677

数据库结构对我来说似乎是“关闭”的。

您应该同时拥有`team_a`和`team_b`作为表主键的*外键。*`Teams`

然后，您可以加入 ID（两次）以获取全名。

**比赛**：

```
+------+-----------+-----------+
| id   |  team_a   |  team_b   |
+------+-----------+-----------+
|  1   |  1        | 2         |
|  2   |  2        | 3         |
|  3   |  1        | 3         |
+------+-----------+-----------+

SELECT T1.team_name, T2.team_name
FROM Matches M
  INNER JOIN Teams T1
    ON M.team_a = T1.id
  INNER JOIN Teams T2
    ON M.team_b = T2.id
WHERE M.id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:47:31.823

```
Select
    matches.*, 
    teamA.team_name as TeamA_Name, 
    teamB.team_name as TeamB_Name
from matches
   inner join teams teamA on matches.team_a = TeamA.team_code
   inner join teams teamB on matches.team_b = TeamB.team_code
where 
   matches.id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:50:10.623

```
select 
    m.id, 
    t1.team_name, 
    t2.team_name
from 
    Matches m
    inner join Teams t1 on m.team_a = t1.team_code
    inner join Teams t2 on m.team_b = t2.team_code 
```

# ruby-on-rails - Rails 应用程序不适用于 Nginx + 乘客

> ID：12483918
> 
> 赞同：3
> 
> 时间：2012-09-18T19:44:57.880
> 
> 标签：ruby-on-rails, nginx, passenger

我有一个 Rails 应用程序

```
/home/myuser/webapps/myapplication/ 
```

我已经安装并配置了Passenger 和Nginx，但我的rails 应用程序无法正常工作。如果我使用 WEBrick 启动应用程序，它就可以正常工作......

这是这个应用程序的 nginx.conf 文件...

```
server {
    listen 8080;
    server_name www.mydomain.com.ar;
    root /home/myuser/webapps/myapplication/public;
    rails_env production;
    passenger_enabled on;
} 
```

如果将静态 index.html 放在 /home/myuser/webapps/myapplication/public/ 中，它可以正常工作。但由于我的应用程序不使用它作为 root 我猜 Nginx 无法加载我的应用程序。

我错过了什么？[从这里](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_a_rack_app)开始我读了很多

谢谢

**更新：**我正在使用 Ubuntu 12.04、rvm 1.15.8、ruby 1.9.3、rails 3.2.8、Phusion Passenger 3.0.17、Passenger 的 Nginx 模块。

我没有使用任何部署工具。我刚刚将根应用程序文件夹复制到服务器指向的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:54:27.797

出于某种原因，我在安装passenger-nginx-module 时选择的openssl 支持让我很难受。

`libcurl4`我在一个全新的环境中使用而不是重新安装和配置了乘客和 nginx `libgnutls`，我的问题消失了。

# c# - 将 XML 文件添加到 XNA 项目

> ID：12483923
> 
> 赞同：2
> 
> 时间：2012-09-18T19:45:14.973
> 
> 标签：c#, xna

我正在创建一个 XNA 游戏。我已经做到了，因此我可以在 XML 文件中指定所有关卡详细信息，然后将其反序列化并用于设置关卡详细信息。

目前，它只是引用我计算机上的一个文件 - 我的问题是，我如何更一般地引用它？

在我的内容文件夹中添加 xml 会引发大量关于架构等的投诉，这让我认为这可能不是正确的路线。

有什么建议么？

我尝试从 XNA 中删除所有条目，这给出了：

尝试访问该方法失败：System.IO.StreamReader..ctor(System.String)

编辑：

xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<XnaContent>
  <Asset Type = "RDrop.Level[]">
  <Item>
    (stuff)
  </Item>
  <Item>
    (stuff)   
  </Item>
  </Asset>
</XnaContent> 
```

编辑：

我已经开始了一个新的 Windows Phone 项目——前一个不是。我已经复制了所有内容并在本教程中添加了“dataTypes”：

[http://msdn.microsoft.com/en-us/library/ff604979.aspx](http://msdn.microsoft.com/en-us/library/ff604979.aspx)

游戏项目参考 -> 内容，MyDataTypes。内容参考 -> MyDataTypes。

XML 与之前的编辑一样，并通过 Add-> Existing Item-> Level.XML 包含在内容文件夹中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:21:14.933

您可以将构建操作保留为“编译”。一种方法来做你想做的事如下：

创建一个 xml 将要描述的类。示例：Level.cs

然后像这样构造你的xml文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<XnaContent>
    <Asset Type="The_Level_class_namespace.Level">
        <Property1>Value</Property1>
        <Property2>Value</Property2>
        <Property3>Value</Property3>
        <Property4>Value</Property4>
    </Asset>
</XnaContent> 
```

如果您希望 xml 描述一组对象，您可以像这样构造 xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<XnaContent>
    <Asset Type="The_Level_class_namespace.Level[]">
        <Item>
            <Property1>Value</Property1>
            <Property2>Value</Property2>
            <Property3>Value</Property3>
            <Property4>Value</Property4>
        </Item>
    </Asset>
</XnaContent> 
```

从那里你只需要确保你的值是正确的格式。例如 vector2 对象将是这样的：

```
<Vector2Property>x_value y_value</Vector2Property> 
```

确保您的内容项目引用了游戏项目或库项目。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:50:28.423

打开 XML 文档的属性（右键单击内容文件夹）。您可以将构建操作设置为：无。

这样，编译器不会分析您的模式，因此不会产生任何警告。

（我对此并不完全确定，只是我的第一个猜测）

# c# - Visual Studio 2010 $(PlatformName) 宏与 MSBuild.exe 不兼容

> ID：12483924
> 
> 赞同：4
> 
> 时间：2012-09-18T19:45:19.620
> 
> 标签：c#, visual-studio-2010, msbuild, pre-build-event

我在 Visual Studio 2010 中有一个 C# 项目，在预构建事件命令行中有这个：

```
echo "$(Configuration)" - "$(PlatformName)" - "$(Platform)"
exit 1 
```

结果是：

```
"Debug" - "AnyCPU" - "AnyCPU" 
```

即使该窗口的宏部分建议`PlatformName`应该`Any CPU`在这种情况下出现（带空格）：http: [//i.imgur.com/xb3Y8.png](http://i.imgur.com/xb3Y8.png)（尽管 MSDN 似乎暗示 http 没有空格[： //msdn.microsoft.com/en-us/library/42x5kfw4.aspx](http://msdn.microsoft.com/en-us/library/42x5kfw4.aspx)）。

```
msbuild /property:Configuration="Debug" /property:Platform="AnyCPU"
1>MyProgram.sln.metaproj : error MSB4126: The specified solution configuration "Debug|AnyCPU" is invalid. 
```

这里发生了什么？不幸的是，`"AnyCPU"`这不是命令行上的有效平台，所以我无法继续。以上适用于`/property:Platform="Any CPU"`（带空格）。

是否有另一个我可以使用的宏，或者一些标志让 MSBuild 接受平台？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T20:01:24.707

看起来您遇到了[MSBuild 错误 503935](http://connect.microsoft.com/VisualStudio/feedback/details/503935/msbuild-inconsistent-platform-for-any-cpu-between-solution-and-project)：

## 报告：

> msbuild Platform 属性对于 Any CPU 具有不同的值，具体取决于您是构建解决方案还是构建项目。
> 
> 解决方案使用 Platform="Any CPU" - 空间
> 
> 项目使用 Platform="AnyCPU" - 没有空间

## 回复：

> Microsoft 于 2009 年 11 月 2 日下午 7:22 发布
> 
> 感谢您抽出宝贵时间向我们发送您的反馈。
> 
> 不幸的是，刚刚发布了 Beta 2，此时进行调整为时已晚。我们应该使这两者相同是完全有道理的。看起来我们应该对两者都使用“AnyCPU”。我们还需要确保我们向后兼容，因此我们必须考虑到这一点。
> 
> 在下一轮中，我们希望围绕解决方案开展工作，我们或许可以在该周期内解决这个问题。对于这个周期，我将此错误解决为“无法修复”。
> 
> 谢谢，
> 
> 查克英格兰
> 
> Visual Studio 平台程序管理器 - MSBuild

## 最终决议：

> 因无法修复而关闭

# pointers - 通过另一个函数分配多 GPU

> ID：12483929
> 
> 赞同：0
> 
> 时间：2012-09-18T19:45:38.797
> 
> 标签：pointers, cuda

使用 CUDA，我想为不同的数组分配内存，每个 GPU 的内存来自与 main() 不同的函数，但我一定错过了指针运算方面的一些东西。这是我的想法，

```
void InitThisMemory(int***, int N, int Nout, size_t* pitch, int height, int width); // This function's purpose is to initialize A and the pitch

int main(void){
   int** A;
   int N = 10; 
   int NOut = 2;
   int height = 2, width = 2;
   size_t pitch;
   InitThisMemory(&A, N, NOut, &pitch, height, width);
   return 0;
}

InitThisMemory(int ***A, int N, int Nout, size_t* pitch, int height, int width){
  int i;
  *A = (int**)malloc(Nout * sizeof(int*));
  for(i = 0;i < Nout;i++){
      cudaSetDevice(i);
      cudaMallocPitch((void**)&(*A[i]), &(*pitch), width, height);
  }
} 
```

免责声明：不是我的实际代码，但这应该会重现错误。如果我错过了某处的变量分配，请告诉我。

为什么我认为问题出在算术上？`Nout = 1`仅仅是因为如果（这意味着我只使用一个设备），这很好用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T23:15:45.277

我认为你的错误是写`(void**)&(*A[i])`而不是`(void **) (&(*A)[i])`，但我建议你重构如下：

1.  使用本地 int ** 变量来保存`malloc()`返回值；
2.  在您的呼叫中使用该本地`cudaMallocPitch()`；
3.  `malloc()`仅当所有`cudaMallocPitch()`调用都成功 时才传回返回值。

如果你做了这些事情，那么在其中一个`cudaMallocPitch()`调用失败的情况下编写正确的清理代码会更简单，并且你不需要传播回传，除非一切都成功了。

# python - SQLalchemy 0.7 的任何示例，使用 from_statement() 进行更新

> ID：12483930
> 
> 赞同：3
> 
> 时间：2012-09-18T19:45:54.667
> 
> 标签：python, mysql, sqlalchemy

我正在编写一个快速的一次性迁移脚本，该脚本更新具有半百万行的表中的单个字段。

由于我没有计划为要获取初始 ~25000 行数据的连接编写完整模型，因此我一直试图弄清楚如何使用 from_statement() 调用和使用来执行 UPDATE 语句我自己的原始 sql，但我找不到任何示例。

与此同时，SQLalchemy 抛出了一个错误。这是我的调用和错误的示例：

```
mydb = self.session()
mydb.query().from_statement(
    """
    UPDATE my_table
    SET settings=mysettings
    WHERE user_id=myuserid AND setting_id=123
    """).params(mysettings=new_settings, myuserid=user_id).all() 
```

我得到的错误：

```
Traceback (most recent call last):
  File "./sample_script.py", line 111, in <module>
    main()
  File "./sample_script.py", line 108, in main
    migrate.set_migration_data()
  File "./sample_script.py", line 100, in set_migration_data
    """).params(mysettings=new_settings, myuserid=user_id).all()
  File "/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py", line 1267, in all
    return list(self)
  File "/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py", line 1361, in __iter__
    return self._execute_and_instances(context)
  File "/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py", line 1364, in _execute_and_instances
    result = self.session.execute(querycontext.statement, params=self._params, mapper=self._mapper_zero_or_none())
  File "/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py", line 251, in _mapper_zero_or_none
    if not getattr(self._entities[0], 'primary_entity', False):
IndexError: list index out of range 
```

**更新**

我正在使用 MySQL。

根据 Samy 的建议，我尝试了这个：

```
mydb.execute(
    "UPDATE mytable SET settings=:mysettings WHERE user_id=:userid AND setting_id=123",
    {'userid': user_id, 'mysettings': new_settings}
    ) 
```

这没有效果。我没有收到任何错误，但该语句似乎并没有真正执行，因为该行没有改变。如果我手动剪切并粘贴从 echo=True 选项记录的查询，数据库中的行更新就好了。

**更新 - 已解决**

Samy 的建议是正确的，但 .execute() 调用仅适用于“引擎”，而不适用于“会话”，因此效果很好：

```
self.engine.execute(
    "UPDATE mytable SET settings=:mysettings WHERE user_id=:userid AND setting_id=123",
    {'userid': user_id, 'mysettings': new_settings}
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T20:52:07.410

好吧，这很奇怪，根据文档，[from_statement](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html?highlight=from_statement#sqlalchemy.orm.query.Query.from_statement)用于`SELECT`语句。

> 执行给定的 SELECT 语句并返回结果。

我可能正在查看错误的函数，或者可能使用其他类型的语句，我不太确定。

您可以只使用`execute`它，因为它可以执行任何类型的语句，这是一个简单的示例。

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

session = sessionmaker(bind = create_engine('sqlite://'), autocommit = True)()

_ = session.execute('CREATE TABLE my_table (user_id int, setting_id int, settings string)')
for id in xrange(200):
    _ = session.execute('INSERT INTO my_table (user_id, setting_id) VALUES (:user_id, :setting_id)',
        {'user_id':id, 'setting_id':id})

_ = session.execute(
"""
    UPDATE my_table
    SET settings = :mysettings
    WHERE user_id = :user_id AND setting_id = 123
""", {'user_id':123, 'mysettings':'test'})

r = session.execute('SELECT * FROM my_table WHERE user_id = :user_id', {'user_id':123}).fetchall()
print r

[(123, 123, u'test')] 
```

请注意，这并不是真正的最佳使用方式`sqlalchemy`，它旨在创建一个干燥的环境，与特定的数据库后端分离，尽管您可能有理由使用原始 sql 而不是其 ORM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T19:52:29.797

您需要使用正确的参数语法；格式完全取决于您的数据库适配器。例如，一些适配器支持`:name`参数，在这种情况下，您会在查询中丢失这些冒号：

```
mydb.query().from_statement(
    """
    UPDATE my_table
    SET settings=:mysettings
    WHERE user_id=:myuserid AND setting_id=123
    """).params(mysettings=new_settings, myuserid=user_id).all() 
```

DBAPI [2.0 规范](http://www.python.org/dev/peps/pep-0249/)支持多种格式，包括带有`?`和`%s`占位符的位置参数，以及上述格式的命名参数和`%(name)s`格式。您需要查看数据库适配器文档以了解支持的内容。

# jsf - 获取树中选定节点的类类型

> ID：12483933
> 
> 赞同：0
> 
> 时间：2012-09-18T19:46:07.873
> 
> 标签：jsf, primefaces, facelets

我创建了一棵树，在我的情况下，树的每个级别都代表一种对象，所以我有（级别 1：Family，级别 2：TestList，级别 3：Test），我想获取所选节点的类型树 ：

```
if (selectedNode != null) {
      if (selectedNode instanceof Family) {
         pFamily = (Family)selectedNode;
          new DefaultTreeNode(newSuite.getName(),selectedNode); 
      } else if (selectedNode instanceof TestList) {
         pFamily = (((TestList)selectedNode).getFamilyFromModel());
          new DefaultTreeNode(newSuite.getName(),selectedNode.getParent()); 
      } else if (selectedNode instanceof Test) {
         pFamily = (((Test)selectedNode).getTestListFromModel().getFamilyFromModel());
          new DefaultTreeNode(newSuite.getName(),selectedNode.getParent().getParent()); 
      } 
```

但是每次我在运行时得到这个值 DefaultTreeNode 时：

```
system.out.println( selectedNode.getClass()); 
```

（所选节点的类类型）

这是我在树中添加 Family 类型的节点的方法：

```
List <Family> familyList =DataLoader.getCurrentProject().getFamilyListFromModel();
    for (int i=0 ;i<familyList.size();i++)
    {   family=familyList.get(i);
        familyNode= new DefaultTreeNode(family.getName(), testPlanNode);  } 
```

那么有可能做到这一点吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:01:39.667

发生这种情况是因为您`selectedNode`的确实是`DefaultTreeNode`.

你想要的是你的节点持有的**数据**，你可以通过调用`selectedNode.getData()`. 检索到的值是您应该比较的值。

* * *

您构建节点的方式将**始终**为您提供 a `String`，这仅仅是因为您**告诉**它持有 a `String`，这是家族的名称：`new DefaultTreeNode(family.getName(), testPlanNode)`

相反，您应该这样做：`new DefaultTreeNode(family, testPlanNode)`，并在视图上：

```
<p:tree var="node">
    <p:treeNode>
        <h:outputText value="#{node.name}"/>
    </p:treeNode>
</p:tree> 
```

并确保节点持有的任何类型的对象都具有该`getName()`方法。一个接口会很好。

* * *

确保您阅读[PrimeFaces 文档](http://www.primefaces.org/documentation.html)并将其用作我们最好的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:34:47.300

您只需进行此更改：

```
 <p:treeNode  value="#{node}">
      <h:outputText value="#{node}" />
 </p:treeNode> 
```

并以对象的形式检索选定的节点，请执行以下操作：

```
 Family family =(Family)(selectedNode.getData()); 
```

# java - 接受多个客户端的服务器 - 不工作

> ID：12483936
> 
> 赞同：1
> 
> 时间：2012-09-18T19:46:24.353
> 
> 标签：java

下面是有一个服务器接受多个客户端连接并响应的代码。服务器能够接收客户端的消息，但客户端没有接收服务器消息。我在服务器上使用了多线程概念。我还观察到，除了标有#### 的行之外，没有任何效果（甚至是 println 语句）。可能是那个客户端被阻止了..有什么想法吗？服务器代码：public static void main(String argv[]) throws Exception {

```
 ServerSocket welcomeSocket = new ServerSocket(10000);

     while(true)
     {

        Socket connectionSocket = welcomeSocket.accept(); 

        Thread t = new Thread(new acceptconnection(connectionSocket));
        t.start();}}

   class acceptconnection implements Runnable{
            BufferedReader inFromClient,inn;
                DataOutputStream ds;
             Socket clientsocket;
        //constructor
        acceptconnection (Socket socket) throws IOException{
        this.clientsocket = socket;
        inn = new BufferedReader (new InputStreamReader(System.in));
        inFromClient =new BufferedReader(new  InputStreamReader(clientsocket.getInputStream()));
        ds = new DataOutputStream(clientsocket.getOutputStream());

         public void run (){
         try {
        String clientSentence, inp;
         while(( clientSentence = inFromClient.readLine())!=null)
         {
               System.out.println("from client" + clientSentence);
               ds.writeBytes("hi from server");**// THIS DOES NOT WORK**
         }

    }

  Client code:

     public static void main(String argv[]) throws Exception
   {

  Socket clientSocket;
   while(true)
  {
   // clientSock
    clientSocket = new Socket("localhost", 10000);
  BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));

  DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
  BufferedReader inFromServer = new BufferedReader(new    InputStreamReader(clientSocket.getInputStream()));

  System.out.println("Enter something:"); 
  sentence = inFromUser.readLine();  
  outToServer.writeBytes(sentence + '\n');// THIS WORKS - thats why server receives it

  **####** modifiedSentence = inFromServer.readLine();**// THIS DOES NOT WORK -client unable to receive** 

  System.out.println("FROM SERVER: " + modifiedSentence + "remote sock add: "+      clientSocket.getRemoteSocketAddress()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:53:49.110

您应该在服务器端刷新流

```
 ds.writeBytes("hello world".getBytes());
 ds.flush(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:00:17.223

当您`BufferedReader.readLine()`在客户端中使用时，请确保在写出数据时使用换行符：

```
ds.writeBytes("hi from server\n"); 
```

而且，如前所述，记得冲洗...

```
ds.flush(); 
```

# css - Sass中的双插值（变量内部的变量）

> ID：12483940
> 
> 赞同：3
> 
> 时间：2012-09-18T19:46:49.950
> 
> 标签：css, styles, compass-sass, sass

是否可以在 Sass 中使用另一个变量来引用一个变量？我想做这样的事情：

```
$gray = #ccc;
$white = #fff;

@each $color in gray, white {
    div_#{$color} {            // works fine
        color: #{$#{$color}};  // fails
    }
} 
```

我尝试了所有我能想到的变化来使插值起作用并且没有骰子。有谁知道这是否可能？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-16T05:21:39.443

[Sass 现在有 maps](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#maps)，所以你可以这样做：

```
$colors: (gray: gray, white: white); 
```

然后循环通过它。

但是您不能在插值中进行插值。

# elmah - 使用 SQL Server 2008 设置 Elmah

> ID：12483942
> 
> 赞同：11
> 
> 时间：2012-09-18T19:46:57.237
> 
> 标签：elmah

我将 MVC 3 与 SQL Server 2008 R2 DB 一起使用。

我安装了 elmah 1.2.2 和 SQL Server 脚本。

可能有人有一些关于如何使用 SQL Server 2008 设置 Elmah 的详细信息。

我在网上查了一下，但没有找到详细的信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T11:50:23.863

由于您已经运行了 SQL Server 设置脚本并在 MVC 应用程序中安装了 Elmah，您只需将以下内容添加到您的 web.config 以让 Elmah 将其日志发送到您的 sql 服务器实例。

```
<elmah>

 ...

   <errorLog type="Elmah.SqlErrorLog, Elmah" 
      connectionStringName="<definedConnectionString>" 
      applicationName="MyAppName"/>

 ...

</elmah> 
```

请记住，您需要替换为从您的 web.config 部分`"<definedConnectionString>"`指向您的 SQl 2008 实例的连接字符串的名称。`<connectionStrings>`

我还建议通读以下 5 部分系列：[使用 ELMAH 和 MVC 3 记录错误](http://joel.net/logging-errors-with-elmah-in-asp.net-mvc-3--part-1--setup)，它包含很多关于将 ELMAH 与 MVC 一起使用的好建议。您也可以考虑使用安装[Elmah.MVC NuGet 包](http://nuget.org/packages/elmah.mvc)来更改 Elmah 在 MVC 应用程序中的默认行为。

# ios - 列表中的活动指示器

> ID：12483947
> 
> 赞同：0
> 
> 时间：2012-09-18T19:47:17.897
> 
> 标签：ios, uitableview, uiactivityindicatorview

我正在创建一个房地产应用程序。我有一个屏幕，它显示所有条目的列表，旁边有一个缩略图和一个小文本。这些是我在应用程序启动时从服务器加载的。每个条目最多可以有 5 张照片，出于明显的原因，我没有预先加载这些照片。我的问题是……当用户选择一个条目时，应用程序会从服务器下载较大的照片。根据具体情况，这可能需要几秒钟。现在，该应用程序只挂起那几秒钟。我不知道在列表中使用活动指示器的任何实用方法。标题空间似乎只是用于显示“正在加载...”的浪费空间。任何人都知道我可以做些什么来让用户知道加载正在进行中？

澄清：一旦从列表中选择了一个条目，我就会加载另一个 Table View Controller，它的选择列表中有照片。我目前使用 ViewDidLoad 加载照片

```
NSData *myPhoto = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:myURL]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:01:07.123

你可以：

1.  用于`UIActivityIndicatorView`在最终加载图像的精确位置显示旋转活动指示器。

2.  在单独的队列中下载图像。虽然下面的代码使用[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，但实际上使用起来要好得多，`NSOperationQueue`因为在慢速网络上，使用 GCD 会消耗所有可用的工作线程，从而对应用程序的性能产生不利影响。A`NSOperationQueue`带一个合理的`maxConcurrentOperationCount`（比如 4 或 5）要好得多。

3.  下载完成后，将 UI 的更新分派回主队列（例如关闭活动指示器并设置图像）。

这是来自画廊应用程序的示例代码，展示了您可以如何做到这一点。这可能比您需要的更复杂，并且可能很难通过剪切和粘贴来重新调整用途，但该`loadImage`方法显示了解决方案的基本元素。

```
@interface MyImage : NSObject

@property (nonatomic, strong) NSString *urlString;
@property (nonatomic, strong) UIImageView *imageView;
@property (nonatomic, strong) UIActivityIndicatorView *activityIndicator;
@property (nonatomic, strong) UIView *view;
@property BOOL loading;
@property BOOL loaded;

@end

@implementation MyImage

// I find that I generally can get away with loading images in main queue using Documents
// cache, too, but if your images are not optimized (e.g. are large), or if you're supporting
// older, slower devices, you might not want to use the Documents cache in the main queue if
// you want a smooth UI. If this is the case, change kUseDocumentsCacheInMainQueue to NO and
// then use the Documents cache only in the background thread.

#define kUseDocumentsCacheInMainQueue NO

- (id)init
{
    self = [super init];
    if (self)
    {
        _view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, IMAGE_WIDTH, IMAGE_HEIGHT)];
        _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, IMAGE_WIDTH, IMAGE_HEIGHT)];
        _imageView.contentMode = UIViewContentModeScaleAspectFill;
        _imageView.clipsToBounds = YES;
        [_view addSubview:_imageView];
        _loading = NO;
        _loaded = NO;
    }
    return self;
}

- (void)loadImage:(dispatch_queue_t)queue
{
    if (self.loading)
        return;

    self.loading = YES;

    ThumbnailCache *cache = [ThumbnailCache sharedManager];

    if (self.imageView.image == nil)
    {
        // I've implemented a caching system that stores images in my Documents folder
        // as well as, for optimal performance, a NSCache subclass. Whether you go through
        // this extra work is up to you

        UIImage *imageFromCache = [cache objectForKey:self.urlString useDocumentsCache:kUseDocumentsCacheInMainQueue];
        if (imageFromCache)
        {
            if (self.activityIndicator)
            {
                [self.activityIndicator stopAnimating];
                self.activityIndicator = nil;
            }

            self.imageView.image = imageFromCache;
            self.loading = NO;
            self.loaded = YES;
            return;
        }

        // assuming we haven't found it in my cache, then let's see if we need to fire
        // up the spinning UIActivityIndicatorView

        if (self.activityIndicator == nil)
        {
            self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            self.activityIndicator.center = CGPointMake(self.view.frame.size.width / 2.0, self.view.frame.size.height / 2.0);
            [self.view addSubview:self.activityIndicator];
        }
        [self.activityIndicator startAnimating];

        // now, in the background queue, let's retrieve the image

        dispatch_async(queue, ^{
            if (self.loading)
            {
                UIImage *image = nil;

                // only requery cache for Documents cache if we didn't do so in the main 
                // queue for small images, doing it in the main queue is fine, but apps 
                // with larger images, you might do this in this background queue.

                if (!kUseDocumentsCacheInMainQueue)
                    image = [cache objectForKey:self.urlString useDocumentsCache:YES];

                // if we haven't gotten the image yet, retrieve it from the remote server

                if (!image)
                {
                    NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:self.urlString]];

                    if (data)
                    {
                        image = [UIImage imageWithData:data];

                        // personally, I cache my image to optimize future access ... you might just store in the Documents folder, or whatever

                        [cache setObject:image forKey:self.urlString data:data]; 
                    }
                }

                // now update the UI in the main queue

                dispatch_async(dispatch_get_main_queue(), ^{
                    if (self.loading)
                    {
                        [self.activityIndicator stopAnimating];
                        self.activityIndicator = nil;
                        self.imageView.image = image;
                        self.loading = NO;
                        self.loaded = YES;
                    }
                });
            }
        });
    }
}

// In my gallery view controller, I make sure to unload images that have scrolled off
// the screen. And because I've cached the images, I can re-retrieve them fairly quickly.
// This sort of logic is critical if you're dealing with *lots* of images and you want 
// to be responsible with your memory.

- (void)unloadImage
{
    // remove from imageview, but not cache

    self.imageView.image = nil;

    self.loaded = NO;
    self.loading = NO;
}

@end 
```

顺便说一句，如果您正在下载的图像在`UIImageView`最后`UITableViewCell`更新回表中，则可能需要检查单元格是否仍在屏幕上（以确保它没有出队，因为`UITableViewCell`滚出屏幕）。在这种情况下，成功下载图像后的最终 UI 更新可能会执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^{

    // if the cell is visible, then set the image

    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if (cell)
    {
        cell.imageView.image = image;
    }
}); 
```

请注意，这是使用`UITableView`方法`cellForRowAtIndexPath`，不应与`UITableViewController`方法混淆`tableView:cellForRowAtIndexPath`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:40:46.173

对于我的一个项目，我将这个自定义类用于 UIImageView： [https ://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

小教程位于：http: [//www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

只需几行代码，我就成功实现了图像的异步加载、缓存等。看看吧。

# c++ - CRichEditCtrl 和 Unicode BOM

> ID：12483949
> 
> 赞同：0
> 
> 时间：2012-09-18T19:47:20.803
> 
> 标签：c++, unicode, mfc

我正在读取一个 UTF-16LE 文件作为字节并将其发送到 CRichEditControl。我发现如果 BOM 存在，则编辑控件无法正确显示其上下文。

我的问题：剥离 BOM 是我的责任，还是我需要在编辑控件上设置不同的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:53:52.070

您应该始终将数据作为 UTF-16 LE 发送到富编辑控件，因为这是 Windows 用于所有字符串的标准。BOM 不是有效的 UTF-16 字符，因此您应该将其去掉。

# .net - 什么是 .NET 可移植子集（旧版）？

> ID：12483951
> 
> 赞同：15
> 
> 时间：2012-09-18T19:47:21.473
> 
> 标签：.net, mef, visual-studio-2012, portable-class-library

Visual Studio 2012 中的对象浏览器为可移植类库提供了两种不同的组件集：

*   .NET 可移植子集
*   .NET 可移植子集（旧版）

当我创建可移植类库时，它使用 .NET 可移植子集。第二组是什么，我该如何使用它？它包含[在 .NET Portable Subset 中不可用的](https://stackoverflow.com/questions/12483686/how-to-use-mef-in-portable-class-library)MEF 。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-21T21:52:59.210

是的，这很令人困惑，基本上是因为对象浏览器没有一个好的方法（并且我们无法在这个版本中添加一种方法而无需进行重大重写）来表示可移植子集。

为了帮助阐明这一点，请考虑下图：

![API 交叉口](../Images/848bad56d681261685b9b88e19b322a7.png)

圆圈代表各个平台的 API 表面积（未按比例）。在可移植性中，我们有效地公开了存在于重叠区域中的 API。例如，当针对上述所有三个时，我们让您针对所有三个平台相交的表面区域（即最中心）进行构建。当面向 Windows 应用商店和 .NET Framework 时，我们允许您针对这两个平台相交的交叉点（即中心和右下角）进行构建。瞄准更多平台，你可以使用的可用表面积减少，瞄准更少的平台，你可以使用的表面积增加。如果您考虑一下，这是有道理的，您组合的平台越多，它们的共同点就越少。

**这与您在对象浏览器中看到的内容有什么关系？**

在对象浏览器中，我们没有一种简单的方法来公开这些单独的交叉点（当您考虑平台数量 + 单独版本时，有很多！）。因此，相反，我们所做的是抓取便携式设备中的所有可用表面区域（即所有交叉点的组合），然后将其暴露出来。这意味着对象浏览器向您展示了我们认为跨所有平台“可移植”的所有 API 的组合。

这就是您看到 MEF 的原因。MEF 在您以 .NET Framework 和 Silverlight 为目标时可用，但一旦您将 Phone 或 Windows Store 添加到您的目标，您就会失去它，因为这些平台不支持它。

**.NET 可移植子集和 .NET 可移植子集（旧版）有什么区别？**

在可移植性方面，我们有两种启用可移植性的方法，具体取决于您是针对我们所说的旧平台还是新平台。

对于遗留平台（Phone 7.x、SL4/5、.NET 4、Xbox），当我们想出多个平台之间的交集时，我们需要物理生成代表通用 API 的实际程序集。例如，当您将 Windows Phone 7 和 .NET Framework 结合起来时，我们会生成（这些是在我们这边在 Microsoft 中生成的）一个实际的 mscorlib、system、system.core 等，其中包含这些共享的 API。这不仅非常耗时，而且还非常有问题，因为它可能会生成不太有用的子集。例如，当我们第一次为跨平台的网络堆栈生成子集时，甚至没有一种方法可以创建通用的方法来创建 HttpWebRequest 连接。这是因为在较旧的平台上（无论出于何种原因），没有人考虑过可移植性。

对于新平台（.NET 4.5、Windows Store、Phone 8），我们退后一步，从一开始就设计了可移植性。我们没有尝试将可移植性作为事后的想法，而是设计了我们所谓的合约（基本上是程序集），它代表一个独立的代码单元，平台要么支持全部，要么不支持。这意味着当您在 .NET Framework 4.5 上看到“System.IO 4.0.0.0”时，它支持的 API 与您在 Windows Phone 8 上看到的完全相同。这使得可移植性非常容易，而不需要生成自定义程序集来表示平台的交集，我们只是在程序集边界处设置子集。例如，假设平台 1 支持 System.Runtime.dll、System.Reflection.dll 和 System.Reflection.Emit.dll，平台 2 支持 System.Runtime.dll 和 System.Reflection.dll。当您将这些平台定位为便携式时，我们只需选择 System.Runtime.dll 和 System.Reflection.dll。从长远来看，这使得可移植性更容易理解，因为您可以根据程序集而不是单个 API 来思考。

为旧平台公开的表面积（基于 Mscorlib）由*.NET Portable Subset (Legacy)*表示，而对于新平台，则由*.NET Portable Subset*表示。

使用便携式时，我们会尝试隐藏这两个表面区域，但在幕后，我们会根据您的目标平台将您的目标对准第一个或第二个表面区域。

这比我计划的要长得多，但请随时提出澄清问题，在过去的 3 年里我一直在生活和呼吸，所以我倾向于跳过一些事情而不考虑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:51:41.197

在过去，当它只是 .NET Framework 与 .NET Compact Framework 时，这要简单得多，但微软只需要添加 XNA/360、Silverlight 和 Windows Phone 就可以了。

我找不到“可移植子集（旧版）”的任何官方描述，但有关“可移植子集”的文档不包括紧凑框架的提及，所以我的猜测是“旧版”子集指的是紧凑框架，如果它是非传统子集是指 XNA、SL 和 WP7 的情况。

# sql-server - 如何拆分 SQL Server 事务日志

> ID：12483952
> 
> 赞同：1
> 
> 时间：2012-09-18T19:47:23.323
> 
> 标签：sql-server, database-design, transaction-log

我的数据库服务器刚刚用完了磁盘空间。事务日志占用了 100GB 以上的空间，而我只有 30GB 的可用空间。因此，一些交易需要无限的时间来处理，从而导致 9002 错误。

我想问有没有一种方法可以拆分此事务日志并删除其中一个以获得一些可用空间。现在我无法通过添加另一个磁盘来进行备份或增加磁盘空间。

如果有人有比拆分事务日志更好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:26:53.730

有很多关于处理从这里链接到的大型日志的好资源：

[https://sqlblog.org/2009/07/27/oh-the-horror-please-stop-telling-people-they-should-shrink-their-log-files](https://sqlblog.org/2009/07/27/oh-the-horror-please-stop-telling-people-they-should-shrink-their-log-files)

基本上，您要么需要获得更多空间、备份日志，要么在数据库上切换到简单恢复模式。每种方法都有其起伏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:38:36.350

在实践中

数据、日志和操作系统应该在不同的磁盘上……比如说 C 代表 OS，E 代表数据，L 代表日志。

如果您的事务日志在事务备份后没有缩小，那么您可能需要检查您的设置。FULL 或 Simple（不收缩日志）。

强制收缩其中数据库设置为简单的日志是：

```
Alter database <databasename>set Recovery simple   /* if database is set to FULL */
USE <databasename>
DBCC SHRINKFILE (<log_name>, 0, TRUNCATEONLY)
GO
Alter database <databasename> set Recovery full  /* if database is set to FULL */ 
```

希望这可以帮助

# php - 将 PHP 数组转换为 ExtJS TreePanel 格式

> ID：12483954
> 
> 赞同：0
> 
> 时间：2012-09-18T19:47:25.617
> 
> 标签：php, cakephp, extjs

我的数据库吐出这样的数据层次结构数组：

```
Array(
    [0] => array(
        [level] => 0
        [wo_number] => foo1
        [parent] => NULL
    )
    [1] => array(
        [level] => 1
        [wo_number] => foo2
        [parent] => foo1
    )
    [2] => array(
        [level] => 2
        [wo_number] => bar1
        [parent] => foo2
    )
    [3] => array(
        [level] => 2
        [wo_number] => bar2
        [parent] => foo2
    )
    [4] => array(
        [level] => 2
        [wo_number] => bar3
        [parent] => foo2
    )
    [5] => array(
        [level] => 2
        [wo_number] => bar4
        [parent] => foo2
    )
    [6] => array(
        [level] => 2
        [wo_number] => bar5
        [parent] => foo2
    )
) 
```

每个数组节点都有一个父键，它引用数组中的另一个节点。

我需要将数组转换为如下格式：

```
Array(
    [0] => array(
        [level] => 0
        [wo_number] => foo1
        [parent] => NULL
        [children] => array(
            [0] => array(
                [level] => 1
                [wo_number] => foo2
                [parent] => foo1
                [children] => array(
                    etc etc etc
                )
            )
        )
    )
) 
```

这样我就可以对其进行 json_encode 编码，并在 ExtJS TreePanel 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:34:37.307

使用稍微改变的功能（来自我在评论中链接的内容）：

```
/**
 * Helper function
 * 
 * @param array  $d flat data, implementing a id/parent id (adjacency list) structure
 * @param mixed  $r root id, node to return
 * @param string $p parent id index
 * @param string $k id index
 * @param string $c children index
 * @return array
 */
function flat2nested($d, $r = 0, $p = 'parent', $k = 'id', $c = 'children') {
  $m = array();
  foreach ($d as $e) {
    isset($m[$e[$p]]) ?: $m[$e[$p]] = array();
    isset($m[$e[$k]]) ?: $m[$e[$k]] = array();
    $m[$e[$p]][] = array_merge($e, array($c => &$m[$e[$k]]));
  }

  return $m[$r]; // removed the `[0]` here
} 
```

您可以打一个简单的电话，例如：

```
flat2nested($input, null, $p = 'parent', $k = 'wo_number'); 
```

虽然目前没有`leaf`设置索引，但似乎总是`false`这样，在输入数组中设置它会更容易。

演示：[http ://codepad.viper-7.com/IKRLUO](http://codepad.viper-7.com/IKRLUO)

`flat2nested`如果您对（或）的内部运作有疑问，`makeRecursive`请发表评论，我会扩展我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:26:56.077

我有同样的问题，在 struct 的存储扩展接收到数据后，它在 javascript 下非常简单地解决了`{DictDataArray: [{Id, parentId, Name}]}`

```
appendRawData: function(data){
            var me = this;
            var rNode = me.getRootNode();
            data = (Ext.isString(data) && Ext.decode(data)) || data;
            function ParentFilter(element, index, array){
                return element.ParentId == this.filterId;
            };

            function BuildTree(list, filter){
                var tmp = list.filter(ParentFilter, filter);
                if(tmp && tmp.length)
                {
                    var node= (filter.filterId && me.getById(filter.filterId)) || rNode;
                    node && node.appendChild && node.appendChild(tmp);
                }
                for(var item in tmp){
                    BuildTree(list, {filterId: tmp[item].Id});
                    var node= me.getById(tmp[item].Id);
                    node.set('leaf', !node.hasChildNodes());
                }
            };
            data && data.DictDataResult && BuildTree(data.DictDataResult, {filterId: null});
        }, 
```

并在加载简单调用后

```
store.appendRawData(response) 
```

但另一种方法是创建自己的阅读器并通过重载这个读取原始数据并根据需要转换它的函数将数据表示为 loadData

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T21:02:02.510

我修改了 Yoshi 指向我的 makeRecursive() 函数来执行以下操作：

```
 public function makeRecursive($d, $r = 0, $pk = 'parent', $k = 'wo_number', $c = 'children') {
            $m = array();
            foreach ($d as $e) {
                    isset($m[$e[$pk]]) ?: $m[$e[$pk]] = array();
                    isset($m[$e[$k ]]) ?: $m[$e[$k ]] = array();
                    $m[$e[$pk]][] = array_merge($e, array($c => &$m[$e[$k]]));
            }
            $final = array(
                    'wo_number'=>$r,
                    'leaf'=>false,
                    'children'=>$m[$r]
            );
            return $final;
    } 
```

这解决了我的问题！

# jquery - 使用rails 3.2从通过ajax部分呈现的提交按钮不会重定向

> ID：12483958
> 
> 赞同：1
> 
> 时间：2012-09-18T19:47:39.267
> 
> 标签：jquery, ruby-on-rails, ajax, redirect, partial

我遇到了这个问题，我可以通过单击单选按钮来呈现局部视图，但是当我单击局部内部的提交按钮以创建新用户时，用户已成功创建，但表单不会重定向到用户页面，它只是在后台创建一个新用户，因此您只有在刷新页面后才能看到新用户。有谁知道如何获取它，所以当我单击提交按钮时，它会重定向到一个页面？

index.html.erb

```
Listing users
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th></th>
    <th></th>
    <th></th>
</tr>
<% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>
<%= form_tag({:action => 'preview'}, :remote => true, :'data-update-target' => 'update-container') do %>
<%= label_tag :gender, 'male' %>
<%= radio_button_tag :gender, 'male', false, :class => 'submit' %><br/>
<%= label_tag :gender, 'female' %>
<%= radio_button_tag :gender, 'female', false, :class => 'submit' %>
<%=# submit_tag 'Submit', :disable_with => 'Please wait...', :class => 'submit' 
%> 
```

users_controller.rb

```
class UsersController < ApplicationController
def index
  @users = User.all
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @users }
  end
end
def show
  @user = User.find(params[:id])
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @user }
  end
end
def new
  @user = User.new
  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @user }
  end
end
def edit
  @user = User.find(params[:id])
end
# POST /users
# POST /users.json
def create
  @user = User.new(params[:user])
  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'User was successfully created.' }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end
# PUT /users/1
# PUT /users/1.json
def update
  @user = User.find(params[:id])
  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to @user, notice: 'User was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end
# DELETE /users/1
# DELETE /users/1.json
def destroy
  @user = User.find(params[:id])
  @user.destroy
  respond_to do |format|
    format.html { redirect_to users_url }
    format.json { head :no_content }
  end
end
def preview
  if params[:gender] == "male"
    @userd = User.new
    render :partial => 'preview', :object => @userd
  elsif params[:gender] == "female"
    @userd = User.new
    render :partial => 'preview', :object => @userd
  end
end
end 
```

_preview.html.erb

```
<%= form_for(@userd, remote: true) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

和我的 application.js

```
$(function() {
/* Convenience for forms or links that return HTML from a remote ajax call.
The returned markup will be inserted into the element id specified.
*/
  $('form[data-update-target]').live('ajax:success', function(evt, data) {
    var target = $(this).data('update-target');
    $('#' + target).html(data);
  });
  $('input.submit').click(function(){ $(this).parent().submit(); return true; });
  }); 
```

# panel - 如何在 1.0 中安装管理面板

> ID：12483962
> 
> 赞同：0
> 
> 时间：2012-09-18T19:47:58.680
> 
> 标签：panel, admin, red5

我正在尝试安装它，但没有成功。步骤： 1\. 将 admin.jsp 复制到 /red5/webapps/root 2\. 将 adminplugin-1.0.zip 中的所有 jar 粘贴到 /red5/plugins 3\. 启动服务器。错误：

```
[INFO] [main] org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1fa490e: defining beans [global.clientRegistry,global.serviceInvoker,global.mappingStrategy,global.context,global.handler,global.scope,red5.scopeResolver]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@be49e0
[WARN] [main] org.red5.server.ContextLoader - Context destroy failed for: default.context
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'default.context' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

那是什么程序，我找不到。我整整一个月都在努力实现这一目标！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:57:16.087

您应该检查管理面板是否适用于您正在使用的 red5 版本。你从哪里下载管理面板？我想您可能会联系邮件列表以查找管理面板的作者。

您可以看到管理应用程序的最后一次提交/更改已在 2008 年完成： [https ://code.google.com/p/red5/source/browse/#svn%2Fflash%2Ftrunk%2Fadmin](https://code.google.com/p/red5/source/browse/#svn%2Fflash%2Ftrunk%2Fadmin)

我认为它目前没有得到积极的维护，所以如果你需要它，让它运行并调试它实际上是你的工作。

# android - 当时钟可见时，ScrollingTextView 不起作用

> ID：12483972
> 
> 赞同：0
> 
> 时间：2012-09-18T19:48:36.350
> 
> 标签：android

我的应用程序中有一个显示当前时间的 TextView，我是这样实现的

```
private Handler handler = new Handler();

private Runnable runnable = new Runnable() 
{

public void run() 
{
   batteryLevel();
     if(clock_on == true) {

         Handler clockUpdate = new Handler(); 
         clockUpdate.postDelayed(new Runnable() { 
              public void run() {
                  executeClock();
              } 
         }, 500);

     }
     handler.post(this);

}

public void executeClock() {

    TextView timeTv = (TextView) findViewById(R.id.time);

    long currentTime=System.currentTimeMillis();
    Calendar cal=Calendar.getInstance();
    cal.setTimeInMillis(currentTime);
    String timeFormat24 = "%1$tH:%1$tM";   
 //   String timeFormat12 = "%1$tI:%1$tM";
    String showTime=String.format(timeFormat24,cal);
    timeTv.setText(showTime);

} 
```

在我的应用程序中，我也有一个 ScrollingTextView，ScrollingtextView.java

```
public class ScrollingTextView extends TextView {

public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public ScrollingTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ScrollingTextView(Context context) {
    super(context);
}
@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    if(focused)
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
}

@Override
public void onWindowFocusChanged(boolean focused) {
    if(focused)
        super.onWindowFocusChanged(focused);
}

@Override
public boolean isFocused() {
    return true;
} 
```

}

```
<com.doublep.example.ScrollingTextView
            android:id="@+id/txt_lcd_message"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:textColor="#f82424"
            android:textSize="30dp" /> 
```

如果时钟 TextView 可见，则 ScrollingTextView 不起作用，当我使时钟的可见性消失时，ScrollingTextView 工作正常

为什么会这样？我该如何解决？

编辑：如果我延迟 ScrollingTextView 开始工作的时钟，但是一旦时钟 TextView 设置为当前时间，则 ScrollingTextView 停止工作

更新：经过一些测试后，我注意到 ScrollingTextView 正在工作，但是每次 executeClock() 方法运行时，ScrollingTextView 动画都会重置并再次开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:18:20.943

Do you have your clock textview and scrolltextview in the same viewgroup?? so for example are they all child views of the same linear or relative layout?? Try to separate them and make them child of different viewgroups. That worked for me once and may work for you too

# android - Android：签名的 Apk 文件不包含外部库并抛出“java.lang.ExceptionInInitializerError”

> ID：12483973
> 
> 赞同：4
> 
> 时间：2012-09-18T19:48:49.650
> 
> 标签：android, actionbarsherlock, apk

我最近签署了一个在 Google Play 上发布的 apk 文件，当我在 Google Play 上下载该应用程序并安装它时，它会抛出 java.lang.ExceptionInInitializerError。

我和我的同事怀疑该库没有被添加到我们签名的 apk 文件中。

我们通过将附加库添加到项目的构建路径中来将其添加到项目中。

此外，我们尝试添加到项目中的库是 ActionBarSherlock。

我们的库没有包含在我们签名的 apk 文件中是否有原因，因为我们注意到我们签名的 apk 的文件大小比我们的未签名版本小很多？

谁能指出我们正确签署我们的apk文件的正确方向，以便它包含我们添加到构建路径中的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:02:44.497

我有完全相同的错误，缺少**android.support.v4** jar 文件。如果您查看 ActionBarSherlock 网站，deeJ 是对的，它告诉您在 proguard 文件中添加以下内容：

```
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepattributes *Annotation* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T14:52:24.033

我发现问题在于 Proguard 不能很好地与 ActionBarSherlock 配合使用。尝试使用此处给出的提示：

[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:12:56.340

不确定您的确切构建过程，我的建议是使用 Maven 进行构建。可能是您的依赖项仅用于您的调试版本而不是您的发布版本。我建议的另一件事是，在将某些内容放到应用商店之前，请使用 Android 调试桥 (adb) 在设备上手动安装它并检查这些类型的错误。

# sql-server-2008-r2 - 当一个表可能没有行时如何对不同表进行总计

> ID：12483974
> 
> 赞同：1
> 
> 时间：2012-09-18T19:48:49.953
> 
> 标签：sql-server-2008-r2

如果数据存在于该表中，我正在尝试将 table1 中两列的结果相互减去，并从 table2 中添加总数。table2 中并不总是有数据，所以如果没有任何内容，我需要使用“0”。到目前为止，这是我在 table2 中有数据时返回错误数量的内容。

```
SELECT 
    CONVERT(CHAR(10),table1.PostingDate, 120) AS business_date, 
    table1.Location AS store_number, 
    (CASE WHEN COUNT(table2.Document) > 0 THEN 
          SUM(table1.Total - table1.TipAmount + table2.Total)
          Else 
                SUM(table1.Total-table1.TipAmount) 
    END) AS net_sales_ttl
FROM table1 
    left join table2 
        on CONVERT(CHAR(10),table1.PostingDate, 120) = CONVERT(CHAR(10),table2.PostingDate, 120)
WHERE table1.PostingDate between '2012-09-09' and '2012-09-16'
GROUP BY CONVERT(CHAR(10),table1.PostingDate, 120), table1.Location 
```

结果如下：

```
business_date   store_number    net_sales_ttl
2012-09-09  xxx         1699.61
2012-09-10  xxx             923.56
2012-09-11  xxx             1230.93  <--This should be 1399.93
2012-09-12  xxx             874.98
2012-09-13  xxx             1342.21
2012-09-14  xxx             1609.6
2012-09-15  xxx             2324.31 
```

由于某种原因，查询没有正确进行数学运算并返回错误的值。table2 唯一具有值的日期是 09-11-12，而该金额仅为 -1.00。它给了我 1230.93，它是正确值的 -169。我不知道-169 应该是-1.00 是从哪里来的。table1 中的原始金额为 1400.93，应从 -1.00 中减去 table2，结果为 1399.93。

```
 Sample data:
    table1 has date, location, and sales
    09-09 1111 5.00
    09-10 1111 3.00
    09-11 1111 7.00
    09-12 1111 10.00
    table2 has refunds
    09-11 1111 -1.00

    Return set would look like this:
    09-09 1111 5.00
    09-10 1111 3.00
    09-11 1111 6.00   <--Reflecting the refund from table2
    09-12 1111 10.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:57:32.450

~~尝试~~

 ~~```
SELECT  
    CONVERT(CHAR(10),table1.PostingDate, 120) AS business_date,  
    table1.Location AS store_number,  
    SUM (table1.Total - table1.TipAmount + isnull(table2.Total,0))
FROM table1   
    left join table2  
    on CONVERT(CHAR(10),table1.PostingDate, 120) = CONVERT(CHAR(10),table2.PostingDate, 120)  
WHERE table1.PostingDate between '2012-09-09' and '2012-09-16'  
GROUP BY CONVERT(CHAR(10),table1.PostingDate, 120), table1.Location 
```~~  ~~此外，一些样本数据会有所帮助 - 单独的总数无济于事

根据您的示例数据，试试这个。

```
Select date, location, sum(sales)
from 
(
    select date, location, sales from table1 
    union
    select date, location, refunds from table2 
) v
group by date, location 
```~~

# html - 可以用 CSS 重建表格吗？

> ID：12483976
> 
> 赞同：0
> 
> 时间：2012-09-18T19:49:00.823
> 
> 标签：html, css, responsive-design

是否可以重建一个如下所示的表：

```
<table>
    <tr>
        <td>information 1</td>
        <td>information 2</td>
    </tr>
</table> 
```

用 CSS 做这样的事情？：

```
<table>
    <tr>
        <td>information 1</td>
    </tr>
    <tr>
        <td>information 2</td>
    </tr>
</table> 
```

为什么我要问是因为当我最小化移动显示器时，这个充满内容的表格`div`看起来不太好。`div`

更新，我需要这样做的原因：我们正在为需要响应式设计的客户建立一个网站。“问题”是客户不知道 html/css 那么好，所以他/她在向页面提供内容时使用 WYSIWYG 编辑器。当然，他/她了解 Microsoft Office，并像在该程序中那样使用表格构建内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T19:55:52.213

`td`您可以通过使用媒体查询和应用 css 将单元格浮动到下一行来有效地包装s。不过，您需要提供一些漂亮的视觉队列来帮助人们弄清楚他们所看到的内容。[这是一个小提琴演示](http://jsfiddle.net/crowjonah/7Jvnw/)——调整预览窗口的大小。

使用您的原始标记并应用以下 CSS 将`td`在窗口小于 400 像素宽时包裹第二个：

```
td {width: 200px; border: 1px solid black;}
@media screen and (max-width: 400px) {
    td {
        width: 100%;
        float: left;
    }
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:52:25.333

你不能用 css 做到这一点（至少不容易），因为这只会影响标记的呈现。当然，如果您检测到用户使用移动浏览器访问您的网站，您当然可以使用 javascript 来完成。但是，您如何做这些事情的问题远远超出了您最初问题的范围。

很多网站都有手机版和非手机版。那里有预先编写的脚本来检测 PHP、Javascript 等中的用户代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:56:47.427

我理解你的问题，这将解决它。（丑陋的修复）

```
td {
  display: block;
  clear: both;
} 
```

而是使用 div 和 css，而不是表；）

# jquery - 如何捕获 jQuery.ajax() 中未找到的 405 方法

> ID：12483979
> 
> 赞同：2
> 
> 时间：2012-09-18T19:49:12.170
> 
> 标签：jquery, ajax, web-services, webservice-client, jqxhr

我试图捕捉网站是否意外进行跨域调用（例如，如果用户在 url 而不是域中键入 IP。（这是一个商业的可安装应用程序，所以我没有 IIS 控制设置任何转发等）。这不起作用：

```
 error: function (x, e) {
                    // If the web service failed for any of the reasons below, then we
                    // call the custom error dialog display function with the response
                    // text passed back from the erro
                    if (x.status === 405) {
                       alert("405 error")
                    } 
                } 
```

javascript中有什么方法可以捕获405错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:51:42.617

您是否尝试过使用[.ajaxError()](http://api.jquery.com/ajaxError/)方法？

# mysql - 多表更新 - 每个表的同一列

> ID：12483980
> 
> 赞同：0
> 
> 时间：2012-09-18T19:49:12.830
> 
> 标签：mysql

我有大量具有相同列结构的动态表。我希望用一个查询来更新所有这些行中的某些行。我发现的任何多表 UPDATE 示例都与在不同表中执行不同列以及根据另一个表中的值更新一个表有关。我的问题是我在所有表中都有相同的列，并且它是动态数量的表。

例如，我将有 table_a、table_b 和 table_c。所有三个表都将共享相同的结构：id 和 status。

我想一次将所有三个中的状态列更新为已知值。

这是我想在此示例中基本结合的查询。

```
UPDATE table_a SET status = 'closed' WHERE id = 5
UPDATE table_b SET status = 'closed' WHERE id = 5
UPDATE table_c SET status = 'closed' WHERE id = 5 
```

由于表的数量是动态的，我觉得这对于单个查询来说是最干净的。我在 PHP 中有一个表名数组（为此系统动态加载），并且可以迭代它们以形成连接或在需要时连接字符串。

这是我*认为*可行的示例。

```
UPDATE table_a, table_b, table_c
SET status = 'closed'
WHERE id = 5 
```

这个查询的问题是我得到一个关于列名歧义的错误。

我需要让它像这样吗？

```
UPDATE table_a, table_b, table_c
SET table_a.status = 'closed', table_b.status = 'closed', table_c.status = 'closed
WHERE table_a.id = 5 OR table_b.id = 5 OR table_c.id = 5 
```

我假设这会起作用并且可能不会太糟糕，因为预期的表格数量实际上可能在 1-10 之间。但是，我真的希望有一种更有效的方法。用这么少的查询触发单个查询可能不是那么糟糕，但在一个大系统中，每一点优化都很重要！

感谢您的任何帮助。

请注意，具有相同方案的多个表的结构是设计使然，因为它是一个分隔多个位置的跟踪器系统。例子只反映了我需要实现的idea的基本结构；实际情况要复杂得多。此外，存储过程将不是此项目中的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:12:54.580

是的，如果它们使用相同的逻辑名称，您需要限定要更新的每个表/列。

查询看到您正在寻找“状态”的逻辑名称，但您已将“状态”定义为数据库中 3 个不同物理位置的逻辑名称。你说的是哪一个？当涉及多个表时，可以做很多事情。因此，让数据库假设您要更新所有这些将是非常糟糕的。

# file-upload - apache commons fileupload 是否支持分块上传？

> ID：12483986
> 
> 赞同：2
> 
> 时间：2012-09-18T19:49:42.053
> 
> 标签：file-upload, apache-commons, http-chunked

我们已经开始使用 PLupload 进行文件上传，发现它可以支持“分块”文件上传。问题是我们的服务器将一个大文件上传视为多个小文件来自多个 POST 请求。

有人知道 Apache Commons FileUpload 是否支持分块上传吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:04:54.193

FWIW 看着 PLupload 网页，他们正在谈论的“分块”不是“HTTP 分块”。 [http://www.plupload.com/index.php](http://www.plupload.com/index.php)

他们的营销术语“分块”是他们在小的和单独的 HTTP 请求中发送大量有效负载的概念。服务器需要具有对所有小部件进行分组、拼接和验证的逻辑。你最好在他们的论坛上获得帮助。你没有理由不能在服务器端创建这个逻辑，也许他们有实现它的示例 Java 代码。

有用的信息和指向他们的 upload.php 示例的指针（也许您转换为 Java 并在 Apache Commons FileUpload 之上）：

[http://www.plupload.com/punbb/viewtopic.php?id=1484](http://www.plupload.com/punbb/viewtopic.php?id=1484)

您所观察到的文件的小段就像它们是单独的文件一样到达，这正是“PLupload Chunking”机制的工作原理。这种技术没有在任何标准中定义，但它也不是它所解决的问题的常见解决方案。

“HTTP 分块”是定义如何使用 HTTP 传输编码在点击/服务器之间传输单个 HTTP 请求（和/或 HTTP 响应）的标准。所有网络服务器和所有浏览器都支持这一点，并且已经存在了很长时间（从 HTTP/1.1 开始）。

# asp.net-mvc - RedirectToAction / 保存表单并从按钮打印 PDF

> ID：12483987
> 
> 赞同：0
> 
> 时间：2012-09-18T19:49:44.250
> 
> 标签：asp.net-mvc, itextsharp, actionresult

我的应用程序是 MVC3（ASPX 视图）。我有一个表单，在编辑视图中我有保存按钮，用于保存表单并返回到索引页面，以及另一个按钮，用于从与编辑相同的控制器中的另一个 ActionResult 打印 PDF；有没有一种方法可以通过一个按钮保存和打印 PDF？这是我的编辑视图脚本：

```
 public ActionResult EditCTAH(long learnerID = 0, long caseListID = 0)
    {

        ViewBag.caseListID = (long)Session["_CTA_CaseListId"];
        try
        {
            CTAHFormEdit ctform = _learnerscaseListsSvc.GetCTAHForm(learnerID, caseListID);
            return View(ctform);
        }
        catch
        {
            return null;
        }
    }

    [HttpPost]
    public ActionResult EditCATH(CTAHFormEdit ctform)
    {
        if (ModelState.IsValid)
        {
            _learnerscaseListsSvc.EditCTAHForm(ctform);
            long courseId = (long)Session["_CTA_CourseId"];
            long caseId = (long)Session["_CTA_CaseId"];
            long caselistId = (long)Session["_CTA_CaseListId"];
            return RedirectToAction("Index", new { courseId = courseId, caseId = caseId, caselistId = caselistId });
        }

        return View(ctform);
    } 
```

这是打印 PDF 的脚本：

```
 public ActionResult EvaluationCATH_PDF(long learnerID = 0, long caseListID = 0)
        {
            try
            {
.....
    pdfStamper.Close();
                byte[] byteInfo = workStream.ToArray();
                SendPdfToBrowser(byteInfo, cth.Learner_ID, cth.StudyCase_ID);
                return null;
            }
            catch
            {
                return null;
            }
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:57:47.563

如果您想在保存编辑操作时获取 PDF，您可以重定向到将 PDF 返回到浏览器的操作方法

```
[HttpPost]
public ActionResult EditCATH(CTAHFormEdit ctform)
{
    if (ModelState.IsValid)
    {
     //Saved succesfully, lets show the pdf in browser.
      return RedirectToAction("Print",new { id=someIdValue});
    }
    return View(ctform);
}
public ActionResult Print(string id)
{
   byte[] pdfByteArray=GetByteArrayFromPassedID(id);
   return File(pdfByteArray,"application/pdf","somefriendlyname.pdf");
} 
```

# reporting-services - 具有多个数据集的 SSRS 2005 报告需要更改参数

> ID：12483990
> 
> 赞同：1
> 
> 时间：2012-09-18T19:49:59.913
> 
> 标签：reporting-services, reportingservices-2005

全部，

我一直在研究使用多个数据集（准确地说是 8 个）的自定义时间表报告。每个数据集通过当前作为参数输入的相同 ID 字段选择数据。它像那样工作得很好。但是现在我被告知最终用户想要输入一个日期并打印出该日期的所有报告，而不是每次都输入一个 ID。每个时间表为 2 - 3 页。它旨在模拟一个表单并包含一些数据，但有很多空白区域，以允许该领域的人员写入已发生的任何更改。

我的问题是：满足新要求的最佳方式是什么？我应该将其全部构建为一个大数据集并使用日期作为参数吗？

我是否应该创建一个提示日期的包装报告，然后将现有报告用作子报告？那还能用吗？

有什么方法可以创建一个新的日期参数并将其放在 ID 参数之前并让它们像这样打印出来？我在正文中有一些隐藏的参数字段，它们在页眉中使用并用于链接一些数据集。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:08:52.183

实现这一点的最简单方法确实是使用日期参数创建包装报告。然后，此报告中的数据集将获取与用户查询匹配的所有项目（带有 ID）。然后，报表可以包含该数据集的列表，并将原始报表作为子报表。如果您将 ID 参数从数据集传递到子报表，您几乎不需要更改原始报表中的任何内容。

需要注意的两件事：

*   不呈现子报表中的报表页眉和页脚 - 这些仅为包装报表呈现
*   您可能需要在子报表和包装报表的新列表中调整分页符，以便每个新表单从新页面开始

# c# - 一个 httphandler 上的两个不同的 processrequests

> ID：12483993
> 
> 赞同：0
> 
> 时间：2012-09-18T19:50:18.860
> 
> 标签：c#, jquery, asp.net, ajax

我可以做两个不同的吗

```
public void ProcessRequest(HttpContext context) 
```

和

```
public void ProcessRequest2(HttpContext context) 
```

同一个httphandler上的方法，所以我可以处理不同的数据？

（我通过 jQuery json 发布）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:58:19.980

我建议你避免创建两种方法，

`IHttpHandler`只包含一个`ProcessRequest`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ihttphandler.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ihttphandler.aspx)

注意：您可以创建两个处理程序

# mysql - 在多个字段上使用 GROUP_CONCAT

> ID：12483994
> 
> 赞同：0
> 
> 时间：2012-09-18T19:50:22.933
> 
> 标签：mysql

这是我的数据库结构的图片：

![观察记录——数据库结构](../Images/1aab51d87f2cf874b34faab81ef8ca84.png)

在此处用户的帮助下，我设法使用以下方法组合了一个相当复杂的 SQL 语句`GROUP_CONCAT`：

```
SELECT
     t1.Name AS Teacher_Name,
     t2.Name AS Observer_Name,
     o.Datetime AS Datetime,
     o.Type AS Type,
     o.Year_Group AS Year_Group,
     o.Class_Name AS Class_Name,
     c.Title AS Course_Name,
     GROUP_CONCAT(l.Title) AS Focus,
     o.Achievement_Grade AS Achievement_Grade,
     o.Behaviour_Grade AS Behaviour_Grade,
     o.Teaching_Grade AS Teaching_Grade,
     GROUP_CONCAT(cl1.Title) AS Positive,
     GROUP_CONCAT(cl2.title) AS Development,
     o.Notes AS Notes
FROM observations o
LEFT JOIN teachers t1 
    ON o.Teacher_ID = t1.Teacher_ID
LEFT JOIN teachers t2 
    ON o.Observer_ID = t2.Teacher_ID
LEFT JOIN courses c 
    ON o.Course_ID = c.Course_ID
LEFT JOIN  foci f
    ON o.ID = f.Observation_ID
LEFT JOIN focus_labels l
    on f.focus_id = l.id
LEFT JOIN  criteria c1
    ON o.ID = c1.Observation_ID
LEFT JOIN criteria_labels cl1
    on c1.Criteria_ID = cl1.ID AND c1.Type = 'P'
LEFT JOIN  criteria c2
    ON o.ID = c2.Observation_ID AND c2.Type = 'D'
LEFT JOIN criteria_labels cl2
    on c2.Criteria_ID = cl2.ID
GROUP BY o.id
ORDER BY `Datetime` DESC"; 
```

这似乎工作正常，除了`Focus`,`Positive`和`Development`每个都根据具有最多连接数的字段重复。

例如，如果`Positive`has `Pace,Progress,Attainment`but `Focus`is only `Appraisal`，它将重复 3 次 ( `Appraisal,Appraisal,Appraisal`)。

![观察记录 - 复杂的连接结构](../Images/faef277130b27f0a9f95aef56befa2f4.png)

我已经查过了，我认为这可能是因为我需要这些中的`GROUP`每一个`GROUP_CONCAT JOINs`。但是，我不知道该怎么做。

任何人都可以帮忙吗？提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:52:51.433

[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)具有可用于删除重复项的 DISTINCT 属性。

```
SELECT
     t1.Name AS Teacher_Name,
     t2.Name AS Observer_Name,
     o.Datetime AS Datetime,
     o.Type AS Type,
     o.Year_Group AS Year_Group,
     o.Class_Name AS Class_Name,
     c.Title AS Course_Name,
     GROUP_CONCAT(DISTINCT l.Title) AS Focus,
     o.Achievement_Grade AS Achievement_Grade,
     o.Behaviour_Grade AS Behaviour_Grade,
     o.Teaching_Grade AS Teaching_Grade,
     GROUP_CONCAT(cl1.Title) AS Positive,
     GROUP_CONCAT(cl2.title) AS Development,
     o.Notes AS Notes
FROM observations o
LEFT JOIN teachers t1 
    ON o.Teacher_ID = t1.Teacher_ID
LEFT JOIN teachers t2 
    ON o.Observer_ID = t2.Teacher_ID
LEFT JOIN courses c 
    ON o.Course_ID = c.Course_ID
LEFT JOIN  foci f
    ON o.ID = f.Observation_ID
LEFT JOIN focus_labels l
    on f.focus_id = l.id
LEFT JOIN  criteria c1
    ON o.ID = c1.Observation_ID
LEFT JOIN criteria_labels cl1
    on c1.Criteria_ID = cl1.ID AND c1.Type = 'P'
LEFT JOIN  criteria c2
    ON o.ID = c2.Observation_ID AND c2.Type = 'D'
LEFT JOIN criteria_labels cl2
    on c2.Criteria_ID = cl2.ID
GROUP BY o.id
ORDER BY `Datetime` DESC"; 
```