# StackOverflow 问答 11164000-11164999

# graphics - 强光，柔光，颜色减淡，颜色燃烧的混合模式公式？

> ID：11164000
> 
> 赞同：5
> 
> 时间：2012-06-22T20:56:07.023
> 
> 标签：graphics, alphablending, porter-duff

我正在尝试为 CSS 实现穷人的混合模式，以期待浏览器推出支持。（我使用的 CSS 预处理器是 Stylus，这对讨论并不重要。）我从 W3C SVG 规范中找到[了混合模式计算的来源](http://dev.w3.org/SVG/modules/compositing/master/)，但有些方程给出的结果与预期的结果大不相同 -具体来说，`hard-light`、`soft-light`、`color-dodge`和`color-burn`。

有谁知道有关混合模式的更正确、更可靠的公式？我将每种颜色的 RGB 通道与它们的 alpha 相乘。

这是我到目前为止所得到的。 [https://github.com/pdaoust/stylus-helpers/blob/master/blend.styl](https://github.com/pdaoust/stylus-helpers/blob/master/blend.styl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T20:22:02.827

按照这个链接。公式非常简单。

[http://en.wikipedia.org/wiki/Blend_modes](http://en.wikipedia.org/wiki/Blend_modes)

*   柔光有完整的描述。
*   HardLight 与 Overlay 相同，但图像是倒置的。遵循叠加公式。
*   *“颜色减淡混合模式将底层除以倒置顶层”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-12T06:59:26.760

[https://mouaif.wordpress.com/2009/01/05/photoshop-math-with-glsl-shaders/](https://mouaif.wordpress.com/2009/01/05/photoshop-math-with-glsl-shaders/)

下载 PhotoShopMathFp.hlsl 所有方程都不存在于 OPengl es

# ruby - Ruby 是否具有用于 nil 值的安全导航运算符的语法，例如在 Groovy 中？

> ID：11164004
> 
> 赞同：22
> 
> 时间：2012-06-22T20:56:24.777
> 
> 标签：ruby, null, operators

在 Groovy 中，有一个很好的语法来处理空值。

例如，我可以做一个 if 语句：

```
if (obj1?.obj2?.value) {

} 
```

即使 obj1 为 null（它将评估为 false），这也不会引发 NullPointerException。

这是非常方便的东西，所以想知道是否有我错过的 Ruby 等价物。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T21:11:29.060

在 Rails 应用程序中有`Object#try`

所以你可以做

```
obj1.try(:obj2).try(:value) 
```

或带有块（如以下评论所述）

```
obj.try {|obj| obj.value} 
```

**更新**

在 ruby​​ 2.3 中有这样的操作符：

```
obj&.value&.foo 
```

这与`obj && obj.value && obj.value.foo`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-23T16:55:19.023

[这已添加](https://bugs.ruby-lang.org/issues/11537)到 Ruby 2.3。

语法是`obj1&.meth1&.meth2`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-13T11:33:32.083

Ruby 2.3 将支持安全导航运算符：

```
obj1&.obj2&.value 
```

[https://www.ruby-lang.org/en/news/2015/11/11/ruby-2-3-0-preview1-released/](https://www.ruby-lang.org/en/news/2015/11/11/ruby-2-3-0-preview1-released/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-18T19:05:10.250

`try` was the only standard way to do this before Ruby 2.3\. With Ruby 2.3 you can do:

```
if obj1&.obj2&.value

end 
```

Also, if you have a hash structure, you can use the `_.` operator with [Hashie](https://github.com/intridea/hashie):

```
require 'hashie'
myhash = Hashie::Mash.new({foo: {bar: "blah" }})

myhash.foo.bar
=> "blah"    

myhash.foo?
=> true

# use "underscore dot" for multi-level testing
myhash.foo_.bar?
=> true
myhash.foo_.huh_.what?
=> false 
```

# ios - 从 xcode 关闭 iPhone 模拟器

> ID：11164005
> 
> 赞同：0
> 
> 时间：2012-06-22T20:56:29.130
> 
> 标签：ios, xcode

> **可能重复：**
> [当应用程序在 Xcode 中停止时自动关闭 iOS 模拟器](https://stackoverflow.com/questions/9490238/automatically-close-ios-simulator-when-application-is-stopped-in-xcode)

就像标题说的那样，是否可以让 Xcode 应用程序中的代码在完成后停止并关闭模拟器？我问的原因是如果我忘记手动关闭模拟器并让 Xcode 在模拟器运行的情况下运行，Macbook 会因为运行模拟器的 CPU 周期要求而变热。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:34:10.633

使用 applescript 关闭模拟器：

```
tell application "/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app"
quit
end tell 
```

并像这样从您的应用程序启动它：

```
NSString * pstrScript= @"tell application \"/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app\"\nquit\nend tell";
if(!pstrScript)
{
    NSLog(@"Error ReadAlbumArtitunesOperation::runWIthParameters:: if(!pstrScript)\n");
    return nil;
}

_script = [[NSAppleScript alloc] initWithSource:pstrScript];
if(!_script)
{
    NSLog(@"ERROR ReadAlbumArtItunesOperation:: runWithParameters::  if(!_script)\n");
    return nil;
}

NSAppleEventDescriptor* desc= [_script executeAndReturnError:&_errorInfo];

if( _errorInfo ) 
{
     NSLog(@"Couldn't run script: err=%@",[_errorInfo description]);
} 
```

# actionscript-3 - 更快的方法来判断一个精灵是否在另一个精灵附近？

> ID：11164007
> 
> 赞同：2
> 
> 时间：2012-06-22T20:56:49.700
> 
> 标签：actionscript-3, apache-flex, flex4.5

当我的一个精灵被拖动（四处移动）时，我正在画布上的其他精灵循环，检查它们是否在范围内，如果是，我在它们上设置背景光晕。这是我现在的做法：

```
//Sprite is made somewhere else
public var circle:Sprite;

//Array of 25 sprites
public var sprites:Array;

public function init():void {
    circle.addEventListener(MouseEvent.MOUSE_DOWN, startDrag);
}

private function startDrag(event:MouseEvent):void {
    stage.addEventListener(MouseEvent.MOUSE_MOVE, glowNearbySprites);
    stage.addEventListener(MouseEvent.MOUSE_UP, stopDrag);

    circle.startDrag();
}

private function stopDrag(event:MouseEvent):void {
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, glowNearbySprites);
    stage.removeEventListener(MouseEvent.MOUSE_UP, stopDrag);

    circle.stopDrag();
}

private function glowNearbySprites(event:MouseEvent):void {
    for (var i = 0; i < sprites.length; i++) {
        var tSprite = sprites.getItemAt(i) as Sprite;
        if (Math.abs(tSprite.x - circle.x) < 30 && 
                   Math.abs(tSprite.y - circle.y) < 30) { 
            tSprite.filters = [new GlowFilter(0xFFFFFF)];
        }
        else {
            tSprite.filters = null;
        }
    }
} 
```

基本上，每次触发 MOUSE_MOVE 事件时，我都会循环浏览每个精灵。这很好用，但是拖动精灵时的延迟非常明显。有没有一种更有效、没有或更少滞后的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T23:06:40.017

好吧，根据您拥有的精灵数量的大小，这可能是微不足道的。但是，如果您要处理超过 1k 个精灵——使用数据结构来帮助您减少检查量。看看这个[QuadTree 演示](http://lab.polygonal.de/?p=202)

基本上，您必须为所有精灵创建索引，这样您就不会检查所有精灵。由于您的阈值为 30，因此当精灵移动时，您可以将其放入 int(x / 30)、int(y / 30) 的行/列索引中。然后您可以只检查鼠标位置的行/列索引周围 9 列中存在的精灵。

虽然这看起来更麻烦，但如果你有更多的项目，它实际上会更有效率——即使你添加更多的精灵，检查的数量也保持一致。使用这种方法，我假设您可以运行 10k 个精灵而不会出现任何问题。

其他性能优化将是：

*   使用精灵的向量/数组而不是 getChildAt
*   预增量 i (++i)
*   存储一个静态单实例发光过滤器，因此它只是一个数组，而不是为所有精灵创建一个单独的过滤器。
*   GlowFilter 是相当 CPU 密集型的。一次将所有精灵绘制在一起，然后对它应用一次 GlowFilter 可能是有意义的——（这当然取决于你如何设置东西——对你自己的位图进行 blit 可能更麻烦）。
*   使你的变量声明 var sprite:Sprite = .... 如果你不是很难键入它，它必须通过字符串而不是通过更快的 getlex 操作码来进行“过滤器”变量查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T23:07:12.430

尝试根据您的原始代码将其他人的建议编译成解决方案，到目前为止，我只创建了一次 GlowFilter 并重新使用，其次我将循环更改为使用 for each 而不是基于迭代的循环，第三，我已经更新为使用 ENTER_FRAME 事件而不是 MOUSE_MOVE。到目前为止，我看到的唯一建议是使用 Vector，我的知识几乎为零，所以在我进行一些自学之前我不会建议或尝试它。**另一个编辑**

只是将精灵的声明更改为 Vector 类型，这里没有代码来说明它是如何填充的，但下面的文章说你基本上可以像数组一样对待，因为它实现了所有相同的方法，但有一些你应该注意的警告，即你向量中不能有空点，因此如果有可能，您必须用大小声明它。鉴于它知道对象的类型，这可能会从能够在恒定时间内计算数组中任何元素的确切位置（sizeOfObject*index + baseOffset = item 的偏移量）中获得性能提升。确切的性能影响并不完全清楚，但似乎这总是会导致至少与 Array 时间一样好，如果不是更好的话。 [http://www.mikechambers。](http://www.mikechambers.com/blog/2008/08/19/using-vectors-in-actionscript-3-and-flash-player-10/)

```
//Array of 25 sprites
public var sprites:Vector.<Sprite>;
private var theGlowFilterArray:Array;
public function init():void
{
    theGlowFilterArray = [new GlowFilter(0xFFFFFF)];
    circle.addEventListener(MouseEvent.MOUSE_DOWN, startDrag);
}

private function startDrag(event:MouseEvent):void
{
    stage.addEventListener(MouseEvent.MOUSE_UP, stopDrag);
    addEventListener(Event.ENTER_FRAME, glowNearbySprites);

    circle.startDrag();
}

private function stopDrag(event:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_UP, stopDrag);
    removeEventListener(Event.ENTER_FRAME, glowNearbySprites);

    circle.stopDrag();
}

private function glowNearbySprites(event:Event):void
{
    var circleX:Number = circle.x;
    var circleY:Number = circle.y;
    for each(var tSprite:Sprite in sprites) {
        if (Math.abs(tSprite.x - circleX) < 30 && Math.abs(tSprite.y - circleY) < 30)
            tSprite.filters = theGlowFilterArray;
        else 
            tSprite.filters = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T23:11:06.750

我会合并 The_asMan 建议的所有改进。此外，这一行：

```
tSprite.filters = [new GlowFilter(0xFFFFFF)]; 
```

可能真的很糟糕，因为您只是一遍又一遍地创建相同的 GlowFilter，并且创建新对象总是很昂贵（并且每次 mouse_move 触发时您都在 for 循环中执行此操作！）。而是在创建此类并将其分配给变量时创建一次：

```
var whiteGlow:GlowFilter = new GlowFilter(0xFFFFFF);

...

tSprite.filters = [whiteGlow]; 
```

如果在此之后仍然存在性能问题，请考虑每次调用时只检查一半（甚至更少）的对象`glowNearbySprites`（设置某种类型的标志，让它知道在下一次调用时从哪里继续（数组的前半部分）或下半场）。您可能不会在视觉上注意到任何差异，并且您应该能够将性能提高几乎一倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T21:25:38.867

您的问题是，在每个鼠标更改事件上进行至少线性 O(n) 的计算是非常低效的。

一种减少计算次数的简单启发式方法是保存与最近精灵的距离，只有在鼠标移动该距离后，您才会重新计算潜在的崩溃。这可以在恒定时间 O(1) 内计算出来。

请注意，这仅在一个精灵一次移动时才有效。

# c# - 使用 LINQ ExpressionVisitor 将原始参数替换为 lambda 表达式中的属性引用

> ID：11164009
> 
> 赞同：13
> 
> 时间：2012-06-22T20:56:57.067
> 
> 标签：c#, linq, lambda, expression, visitor-pattern

我正在为我们系统的一部分编写数据层，它记录每天运行的自动化作业的信息——作业的名称、运行的时间、结果等。

我正在使用实体框架与数据库交谈，但我试图将这些细节隐藏在更高级别的模块中，并且我不希望实体对象本身被暴露。

但是，我想让我的界面在用于查找工作信息的标准方面非常灵活。例如，用户界面应该允许用户执行复杂的查询，例如“给我所有名为 'hello' 的作业，在上午 10:00 到上午 11:00 之间运行但失败了”。显然，这看起来像是动态构建`Expression`树的工作。

所以我希望我的数据层（存储库）能够做的是接受类型的 LINQ 表达式`Expression<Func<string, DateTime, ResultCode, long, bool>>`（lambda 表达式），然后在幕后将该 lambda 转换为我的实体框架`ObjectContext`可以用作`Where()`子句中的过滤器的表达式.

简而言之，我正在尝试将类型的 lambda 表达式转换`Expression<Func<string, DateTime, ResultCode, long, bool>>`为`Expression<Func<svc_JobAudit, bool>>`，其中`svc_JobAudit`Entity Framework 数据对象对应于存储作业信息的表。（第一个delegate中的四个参数分别对应job的名字，什么时候运行，结果，在MS里用了多长时间）

我在课堂上取得了很好的进步，`ExpressionVisitor`直到我碰壁并收到`InvalidOperationException`以下错误消息：

> 从“VisitLambda”调用时，重写“System.Linq.Expressions.ParameterExpression”类型的节点必须返回相同类型的非空值。或者，覆盖“VisitLambda”并将其更改为不访问此类型的子项。

我完全感到困惑。为什么它不允许我将引用参数的表达式节点转换为引用属性的节点？还有其他方法可以解决这个问题吗？

这是一些示例代码：

```
namespace ExpressionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Expression<Func<string, DateTime, ResultCode, long, bool>> expression = (myString, myDateTime, myResultCode, myTimeSpan) => myResultCode == ResultCode.Failed && myString == "hello";
            var result = ConvertExpression(expression);
        }

        private static Expression<Func<svc_JobAudit, bool>> ConvertExpression(Expression<Func<string, DateTime, ResultCode, long, bool>> expression)
        {
            var newExpression = Expression.Lambda<Func<svc_JobAudit, bool>>(new ReplaceVisitor().Modify(expression), Expression.Parameter(typeof(svc_JobAudit)));
            return newExpression;
        }
    }

    class ReplaceVisitor : ExpressionVisitor
    {
        public Expression Modify(Expression expression)
        {
            return Visit(expression);
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            if (node.Type == typeof(string))
            {
                return Expression.Property(Expression.Parameter(typeof(svc_JobAudit)), "JobName");
            }
            return node;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T21:56:32.647

问题有两个方面：

*   我误解了如何访问 Lambda 表达式类型。我仍然返回一个匹配旧委托的 lambda，而不是返回一个新的 lambda 来匹配新委托。

*   我需要保存对新`ParameterExpression`实例的引用，而我没有这样做。

新代码如下所示（注意访问者现在如何接受对`ParameterExpression`匹配实体框架数据对象的引用）：

```
class Program
{
    const string conString = @"myDB";

    static void Main(string[] args)
    {
        Expression<Func<string, DateTime, byte, long, bool>> expression = (jobName, ranAt, resultCode, elapsed) => jobName == "Email Notifications" && resultCode == (byte)ResultCode.Failed;
        var criteria = ConvertExpression(expression);

        using (MyDataContext dataContext = new MyDataContext(conString))
        {
            List<svc_JobAudit> jobs = dataContext.svc_JobAudit.Where(criteria).ToList();
        }
    }

    private static Expression<Func<svc_JobAudit, bool>> ConvertExpression(Expression<Func<string, DateTime, byte, long, bool>> expression)
    {
        var jobAuditParameter = Expression.Parameter(typeof(svc_JobAudit), "jobAudit");
        var newExpression = Expression.Lambda<Func<svc_JobAudit, bool>>(
            new ReplaceVisitor()
               .Modify(expression.Body, jobAuditParameter), jobAuditParameter);
        return newExpression;
    }
}

class ReplaceVisitor : ExpressionVisitor
{
    private ParameterExpression parameter;

    public Expression Modify(Expression expression, ParameterExpression parameter)
    {
        this.parameter = parameter;
        return Visit(expression);
    }

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        return Expression.Lambda<Func<svc_JobAudit, bool>>(Visit(node.Body), Expression.Parameter(typeof(svc_JobAudit)));
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        if (node.Type == typeof(string))
        {
            return Expression.Property(parameter, "JobName");
        }
        else if (node.Type == typeof(DateTime))
        {
            return Expression.Property(parameter, "RanAt");
        }
        else if (node.Type == typeof(byte))
        {
            return Expression.Property(parameter, "Result");
        }
        else if (node.Type == typeof(long))
        {
            return Expression.Property(parameter, "Elapsed");
        }
        throw new InvalidOperationException();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-06T20:56:45.640

接受的答案是对某些特定类型的“硬编码”。这是一个更通用的表达式重写器，它不能用参数替换任何其他表达式（lambda、常量、...）。在 lambda 表达式的情况下，表达式的签名需要更改以包含替换值所需的参数。

```
public class ExpressionParameterSubstitute : System.Linq.Expressions.ExpressionVisitor
{
    private readonly ParameterExpression from;
    private readonly Expression to;
    public ExpressionParameterSubstitute(ParameterExpression from, Expression to)
    {
        this.from = from;
        this.to = to;
    }

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        if (node.Parameters.All(p => p != this.from))
            return node;

        // We need to replace the `from` parameter, but in its place we need the `to` parameter(s)
        // e.g. F<DateTime,Bool> subst F<Source,DateTime> => F<Source,bool>
        // e.g. F<DateTime,Bool> subst F<Source1,Source2,DateTime> => F<Source1,Source2,bool>

        var toLambda = to as LambdaExpression;
        var substituteParameters = toLambda?.Parameters ?? Enumerable.Empty<ParameterExpression>();

        ReadOnlyCollection<ParameterExpression> substitutedParameters
            = new ReadOnlyCollection<ParameterExpression>(node.Parameters
                .SelectMany(p => p == this.from ? substituteParameters : Enumerable.Repeat(p, 1) )
                .ToList());

        var updatedBody = this.Visit(node.Body);        // which will convert parameters to 'to'
        return Expression.Lambda(updatedBody, substitutedParameters);
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        var toLambda = to as LambdaExpression;
        if (node == from) return toLambda?.Body ?? to;
        return base.VisitParameter(node);
    }
} 
```

# video - 基维视频流

> ID：11164013
> 
> 赞同：4
> 
> 时间：2012-06-22T20:57:13.643
> 
> 标签：video, camera, streaming, kivy

我是 Kivy 的新手，希望将视频流式传输到我正在制作的显示器上。我正在从外部摄像机流式传输视频，所以我只有它的 IP 地址，它不会直接连接到计算机。有谁知道我如何使用视频或相机小部件或任何其他方式来显示流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-18T02:15:52.990

只要媒体后端支持流式传输和视频的媒体类型，您就可以使用[`Video`小部件流式传输视频。](http://kivy.org/docs/api-kivy.uix.video.html)在桌面上，您只需键入以下命令行：

```
python -m kivy.uix.video http://www.debone.com/VivVilConGminorRV578.mpg 
```

它会播放（如果支持）。在 Ubuntu 14.04 上为我工作。

这`App`是运行的`kivy.uix.video`：

```
class VideoApp(App):
    def build(self):
        self.v = Video(source=sys.argv[1], state='play')
        self.v.bind(state=self.replay)
        return self.v

    def replay(self, *args):
        if self.v.state == 'stop':
            self.v.state = 'play' 
```

如果你需要在移动设备上测试它，你可以做一个简单的`main.py`：

```
from kivy.uix.video import VideoApp
VideoApp().run() 
```

# apache - 如何允许客户在他们的域中展示我网站的一部分？

> ID：11164014
> 
> 赞同：0
> 
> 时间：2012-06-22T20:57:16.380
> 
> 标签：apache, redirect, dns

我有一个包含公司简介的网站。这些个人资料在我的网站中有很多页面，例如产品、服务等。我的一些用户希望将他们在我网站上的个人资料用作他们的网页。

例如。去 www.mycustomerswebsite.com 会在我的网站上加载他们的个人资料，但不会重定向到我的网址。

我想让他们简单地通过将他们的 DNS 指向我的服务器来做到这一点。我正在寻找的行为类似于在托管 wordpress 上可以做的事情。我在 Linux CentOS 上运行 Apache 作为我的 Web 服务器。

**我有哪些设置选项？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:14:31.323

只有 apache 提供静态文件，您可以按照以下方式创建通配符虚拟主机： [http ://httpd.apache.org/docs/2.0/vhosts/mass.html](http://httpd.apache.org/docs/2.0/vhosts/mass.html)

如果（更有可能）我们正在讨论动态生成页面的脚本，则应编写该脚本以检查 SERVER_NAME 以确定要生成的内容 - 伪代码：

```
names = {
  'customer1.example.org': 1,
  'customer2.example.org': 2,
};

if ($ENV[SERVER_NAME] == 'www.example.com') {
  regularHome();
}
else {
  produceHome(names[$ENV[SERVER_NAME]]);
} 
```

无论哪种方式，您都必须在 mycustomerswebsite.com 和您的姓名之间为同一客户建立关联 - 也许他们必须将他们的域输入到您网站上的设置中，或者您可能已经设置了他们的域。

毕竟（并且可能是最困难的）是让他们进行 DNS 更改 - 他们是唯一可以这样做的人 - 以便 www 被 CNAME 到您的主机。您可能希望创建一个特殊的主机记录“customers.example.com”或一些严格用于此目的的主机记录。为您的客户创建一些类似于 wordpress 的文档：

[http://en.support.wordpress.com/domain-mapping/map-existing-domain/#instructions-for-mapping-an-existing-domain](http://en.support.wordpress.com/domain-mapping/map-existing-domain/#instructions-for-mapping-an-existing-domain)

# c++ - 静态提升 darwin，包括 libstdc++？

> ID：11164016
> 
> 赞同：0
> 
> 时间：2012-06-22T20:57:33.803
> 
> 标签：c++, boost, stl, static, darwin

为什么 STL 代码似乎静态链接到 Darwin 上的 Boost 动态库？

当我在 OS X 上使用 gcc 4.6.1 和 toolset=darwin 构建 Boost 1.42/1.46.1/1.49 时，我发现生成的库静态包含大量 STL 代码，例如 std::basic_string<char> 和 std: :basic_string<wchar_t>。

在 OS X 10.6.8 上构建，我得到以下结果：

```
% otool -L /usr/local/boost-1.46.1/lib/libboost_system.dylib
boost-1.46.1/lib/libboost_system.dylib:
    libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11)
    /usr/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0) 
```

根据`'otool -L'`输出，很明显 libstdc++ 没有与库动态链接。相比之下，在 Ubuntu 12.04 LTS 上，libboost_system.so 1.46.1 显示以下链接：

```
% ldd /usr/local/lib/libboost_system.so
    linux-vdso.so.1 =>  (0x00007fff495ff000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fec4edb4000)
    libstdc++.so.6 => /usr/local/lib64/libstdc++.so.6 (0x00007fec4ea82000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fec4e788000)
    libgcc_s.so.1 => /usr/local/lib64/libgcc_s.so.1 (0x00007fec4e573000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fec4e355000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fec4df98000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fec4f1e4000) 
```

在这种情况下，libstdc++ 显然是动态链接的。在 OS X 方面，这就是我知道 STL 代码已直接包含在 Boost 库中的方式：

```
% nm -gfj /usr/local/boost-1.46.1/lib/libboost_system.dylib | c++filt --format=gnu-v3 | egrep "^std::basic_string"
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_disjunct(char const*) const
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_last_of(char const*, unsigned long) const
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_last_of(char const*, unsigned long, unsigned long) const
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_last_of(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) const
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_last_of(char, unsigned long) const
... [180 more lines] ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:51:38.870

仅举一个例子： `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_last_of(char const*, unsigned long) const`

std::basic_string is a template class, and does not exist in libstdc++.dylib. It was instantiated when the boost library was compiled, and (rightly) included there - because Boost.System uses it.

I suspect (but don't know) that this is true for all of the calls you see.

# android - SQLite 查询和 LocationListener 中的 NullPointerException

> ID：11164021
> 
> 赞同：0
> 
> 时间：2012-06-22T20:57:53.673
> 
> 标签：android, locationlistener

我想获取用户位置并将其与我的数据库中的位置进行比较，这是我想出的代码，但它仍然无法正常工作，它在这一行中给了我空指针异常：

```
Cursor cursor = database.query(MySQLiteHelper.TABLE_Hotel,
            new String[]{MySQLiteHelper.H_ID, MySQLiteHelper.H_Name, MySQLiteHelper.H_Longitude, MySQLiteHelper.H_Latitude}, null, null, null, null, null); 
```

这是整个班级：

```
public class locationFinder extends ListActivity implements LocationListener {

    List<Hotel> hotelsInRange = new ArrayList<Hotel>();
    MySQLiteHelper mySQL;
    SQLiteDatabase database;
    EgyptDataSource datasource;
    Location locObject;
    String loc;
    double lat;
    double longi;
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
            }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

        setListOfHotelsInRange(location);
    }

    private void setListOfHotelsInRange(Location userLocation)
    {
        Cursor cursor = database.query(MySQLiteHelper.TABLE_Hotel,
                new String[]{MySQLiteHelper.H_ID, MySQLiteHelper.H_Name, MySQLiteHelper.H_Longitude, MySQLiteHelper.H_Latitude}, null, null, null, null, null);

        while(cursor.moveToNext())
        {
            double longi = cursor.getDouble(cursor.getColumnIndex(MySQLiteHelper.H_Longitude));
            double lat = cursor.getDouble(cursor.getColumnIndex(MySQLiteHelper.H_Latitude));

            Location currentHotelLocation = new Location("Current Hotel");
            currentHotelLocation.setLatitude(lat);
            currentHotelLocation.setLongitude(longi);

            double distanceInMeters = userLocation.distanceTo(currentHotelLocation);

            if (distanceInMeters < 500000000)
            {
                //hotel is in range
                Hotel hotel = new Hotel();
                hotel.set_id( cursor.getInt(0));
                hotel.setName(cursor.getString(0));
                hotelsInRange.add(hotel);
            }

        }
        ArrayAdapter<Hotel> adapter = new ArrayAdapter<Hotel>(this,
                android.R.layout.simple_list_item_1, hotelsInRange);
                setListAdapter(adapter);

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

这是 LogCat：

```
06-22 22:55:32.984: E/AndroidRuntime(2378): FATAL EXCEPTION: main
06-22 22:55:32.984: E/AndroidRuntime(2378): java.lang.NullPointerException
06-22 22:55:32.984: E/AndroidRuntime(2378):     at egypt.interfaceAct.locationFinder.setListOfHotelsInRange(locationFinder.java:99)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at egypt.interfaceAct.locationFinder.onLocationChanged(locationFinder.java:93)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:191)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:124)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:140)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.os.Looper.loop(Looper.java:143)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at android.app.ActivityThread.main(ActivityThread.java:4914)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at java.lang.reflect.Method.invokeNative(Native Method)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at java.lang.reflect.Method.invoke(Method.java:521)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
06-22 22:55:32.984: E/AndroidRuntime(2378):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:31:32.803

该成员`database`永远不会被初始化。你应该在你`onCreate()`的`locationFinder`活动中初始化它。就像@DGomez 提到的

```
public void onCreate(Bundle icicle){
  super.onCreate(icicle);

  mySQL = new MySQLiteHelper();
  database = mySQL.getWriteableDatabase();

  LocationManager locManager = (LocationManager)  etSystemService(Context.LOCATION_SERVICE);
  locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:31:57.780

作为 DGomez，您没有获得用于查询的数据库实例。

假设`MySQLiteHelper`扩展`SQLiteOpenHelper`做如下的事情......

在`onCreate(...)`方法...

```
mySQL = new MySQLiteHelper(this, "my-database-name", null, 1); 
```

然后在`setListOfHotelsInRange(...)`您查询数据库之前的方法中...

```
database = mySQL.getWriteableDatabase(); 
```

# node.js - 服务器上的 Ember.js

> ID：11164022
> 
> 赞同：7
> 
> 时间：2012-06-22T20:57:54.737
> 
> 标签：node.js, ember.js

我正在通过 ember.js 开发一个非常动态的 Web 应用程序。客户端与服务器端 JSON API 进行通信。用户可以做出各种选择，并从各种角度查看切分和过滤的数据，其中所有这些数据都来自所述 API。

问题是，我还需要从相同的数据生成静态页面（Google 可以理解）。这些静态页面代表预定义的视图，不允许太多交互；它们旨在充当来自搜索引擎的用户的登录页面。

自然，我想尽可能多地从我的动态 Web 应用程序中重用来生成这些静态页面，所以我想到的自然方向是实现一个服务器端模块来呈现这些页面，该模块将尽可能多地重用可能是我的 Ember.js 视图和代码。

但是 - 我找不到任何材料。Ember 的文档说“虽然可以在服务器端使用 Ember.js，但这超出了本指南的范围。”

谁能指出什么可以在服务器端重用，以及设计应用程序以实现最大程度的重用的最佳实践？

当然，如果您认为我在这里的想法没有意义，我也很高兴听到这个（以及为什么）:-)

谢谢！C。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T22:01:39.423

[Handlebars](http://handlebarsjs.com/) - Ember 的模板引擎 - 确实在服务器上运行（至少在 Node.js 下）。我在自己的项目中使用过它。

在为页面提供 HTTP 请求时，您很可能会使用现有模板：从数据库中提取相关数据，将其按摩到 JSON 对象中，将其与正确的模板一起提供给把手，然后将结果发送到客户端.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:32:21.560

看看[http://phantomjs.org/](http://phantomjs.org/) 您可以使用它在服务器上呈现页面并返回纯 html 版本。

你必须让它遵循谷歌的 ajax 抓取指南：[https ://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

# eclipse - Play Framework + Eclipse：ReverseApplication 的未定义方法

> ID：11164024
> 
> 赞同：7
> 
> 时间：2012-06-22T20:58:01.657
> 
> 标签：eclipse, playframework

在将 Play Framework 与 Eclipse 一起使用时，我遇到了一些麻烦（实际上更像是一种烦恼）。

我正在按照[本教程](http://www.playframework.org/documentation/2.0.1/JavaTodoList)开始使用 Play。在教程的某个时刻，它要求我们输入以下代码：

```
public static Result index() {
  return redirect(routes.Application.tasks());
} 
```

**这在运行应用程序时按预期工作**。问题是 Eclipse 不喜欢它。它说：

> 未为 ReverseApplication 类型定义方法 tasks()

同时用红色虚线强调*任务。*发生这种情况有原因吗？我尝试清理和编译项目（通过 Play 终端）并在 Eclipse 中刷新项目，但无济于事。

有什么我可以做的吗？

我正在使用 Eclipse Juno，构建 20120606-2254

太感谢了！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T18:41:39.597

由于视图是 Scala 代码，它们由 Scala 编译器（即通过 sbt 的 Play 控制台）编译。所以 Eclipse 无法编译并找到这些。

因此，您最好的选择是配置 Eclipse，使其[自动刷新工作区](https://stackoverflow.com/a/6049245/320180)并确保文件夹“target/scala-2.9.1/classes_managed”在您的构建路径中（应该由“eclipsify”命令完成） .

如果在所有这些步骤之后仍然无法正常工作，请尝试“clean”、“compile”和“eclipsify”（适用于 Play 2.0.x）或“eclipse”（适用于 Play 2.1.x）并刷新您的项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T16:46:03.807

在 Eclipse 中关闭并打开您的项目。这对我有用（Eclipse Juno）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T17:32:52.023

以前的建议都不适合我，但是当我对**目标进行刷新时**文件夹进行刷新时，我的视图引用上的红色下划线消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-05T20:40:09.423

播放命令曾经被称为“eclipsify”。它现在被称为“日食”。

通常，我会执行以下操作，并且它与 Eclipse 配合得很好

```
-at the start of the day, start the play console in your project dir and do 'clean' and 'run'  
-open a web browser point to the app (localhost:9000)  
-launch eclipse  
-make code changes...  
-Play will rebuild the app whenever code changes occur. So refreshing the app in
   the browser.  
-back in eclipse, Refresh the project to reload the files that play rebuild just made. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T19:48:29.133

我知道@nico_ekito 的回答已经过去一年了，但我只是想补充一下。添加 /target/scala-2.10/classes_managed 并确保 Eclipse 自动刷新为我修复的工作区。谢谢@nico_ekito

使用Eclipse Kepler，玩框架2.2.2

# c# - 具有绑定能力和手动编辑的表格

> ID：11164028
> 
> 赞同：0
> 
> 时间：2012-06-22T20:58:26.883
> 
> 标签：c#, wpf, data-binding

我想要的是有一个表，第一列是我一个一个命名的每一行，而不是绑定到某个属性。但是第二列的所有内容都应该绑定到一个属性。我不能用 gridview 做这两个，因为它只进行绑定并且不允许我手动编写一些东西。另一方面，我还没有看到有人提到绑定的任何流文档表教程。那么适合实现上述两件事的合适对象是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:22:11.007

`ListView`并且`GridView`应该满足您的要求。`GridViewColumns`您可以使用`DisplayMemberPath`或 在 中设置绑定`CellTemplate`。您也可以选择不在列中使用绑定。

以此为例：

```
<ListView ItemsSource="{Binding NameValuePairs}">
    <ListView.Resources>
        <DataTemplate x:Key="FirstCellTemplate">
            <Grid Width="100">
                <TextBox Width="75"/>
            </Grid>
        </DataTemplate>
    </ListView.Resources>
    <ListView.View>
        <GridView>
            <GridViewColumn CellTemplate="{StaticResource FirstCellTemplate}"/>
            <GridViewColumn DisplayMemberBinding="{Binding Name}"/>
            <GridViewColumn DisplayMemberBinding="{Binding Value}"/>
        </GridView>
    </ListView.View>
 </ListView> 
```

NameValuePairs 是一个`ObservableCollection<NameValuePair>`and`NameValuePair`是一个具有 a`Name`和`Value`属性的视图模型。第一列是`TextBox`每行包含 a，第二列是 a`TextBlock`和`Name`，第三列是 a`TextBlock`和`Value`。

# c++ - 性能：循环中的声明 VS 循环中的重新初始化

> ID：11164030
> 
> 赞同：1
> 
> 时间：2012-06-22T20:58:34.090
> 
> 标签：c++, performance, for-loop

我一直在想，也找不到关于这个问题的明确答案。

想象以下两个例子。

```
int i;
for(i=0;i<maxLimit;i++)
{
    //code here
} 
```

第二个例子

```
for(int i=0;i<maxLimit;i++)
{
    //code here
} 
```

基本上，如果他们是那样的，我相信两者的行为会完全相同，但是在考虑到这一点时，我的质疑就到位了

```
while(!file.EOF)
{
    for(int i=0;i<maxLimit;i++)
    {
        //code here
    }
} 
```

当第二个示例在循环内部时，它如何执行？事先声明它并简单地将其放回 0 更有效还是执行时间与在内部声明它相同？

就我个人而言，我通常把它放在第 2 位，因为我发现它在视觉上更好。但我想知道它是否在一个循环内它会产生什么影响。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:01:07.270

大多数现代编译器都非常复杂，以至于您在此级别做出的任何决定都可能没有任何区别（澄清一下，经过分析，编译器可能已将两者转换为相同的内部表示 - 这是最有效的实现）。但是，如果您不相信，这种情况下的黄金法则是使用分析器进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:03:43.180

是否在 -loop 之前声明它并不重要，因为*即使*`for`您在其中声明变量也会发生这种情况。第一个表达式之前的任何表达式**；***在循环体之前*执行，因此生成的汇编代码应该完全相同。

实际上，`for`在循环之前、循环之前的数百行或 for 循环主体内声明变量并不重要。程序行为保持*完全相同*，因此编译器可以并且通常会知道如何优化这些琐碎的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:02:28.190

我认为这两种情况都没有重大的性能问题。我通常也更喜欢使用示例 2，主要是因为我知道变量的确切范围，而且我最终不会给自己带来麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T21:09:33.790

对于一个`int`值，这将具有完全零影响。如果变量有一个重要的构造函数，它可能会有所作为。正如其他人所说，首先编写代码，分析代码，然后考虑优化。这种变化充其量几乎总是一种微优化。

# r - 使用 xtable 覆盖行名重命名重复项

> ID：11164044
> 
> 赞同：3
> 
> 时间：2012-06-22T21:00:16.180
> 
> 标签：r, xtable

我希望 xtable 不会覆盖我重复的行名条目。考虑以下 MWE：

```
> require(xtable)
> foo <- matrix(0, 2,2)
> rownames(foo) = rep("bar", 2)
> foo
    [,1] [,2]
bar    0    0
bar    0    0
> xtable(foo)
% latex table generated in R 2.15.0 by xtable 1.7-0 package
% Fri Jun 22 13:59:36 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & 1 & 2 \\ 
  \hline
1 & 0.00 & 0.00 \\ 
  2 & 0.00 & 0.00 \\ 
   \hline
\end{tabular}
\end{center}
\end{table}
Warning message:
In data.row.names(row.names, rowsi, i) :
  some row.names duplicated: 2 --> row.names NOT used 
```

我希望它们成为我原来的“bar”和“bar”，而不是让 rownames 成为 1 和 2。有没有办法覆盖 xtable 的重复替换方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:27:18.523

这是**xtable**解决方案（以非常紧凑的形式）：

```
> print(xtable(data.frame(row = rownames(foo),data.frame(foo))),include.rownames = FALSE)
% latex table generated in R 2.14.2 by xtable 1.6-0 package
% Fri Jun 22 14:24:59 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{lrr}
  \hline
row & X1 & X2 \\ 
  \hline
bar & 0.00 & 0.00 \\ 
  bar & 0.00 & 0.00 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

这仍然会发出警告，并且很难让您的列标题正确。另一种选择是使用`latex`Hmisc**包**，它更灵活（但也更复杂；你可以关闭多列的东西）：

```
library(Hmisc)
> latex(foo,file = "")
% latex.default(foo, file = "") 
%
\begin{table}[!tbp]
\begin{center}
\begin{tabular}{lrr}
\hline\hline
\multicolumn{1}{l}{foo}&\multicolumn{1}{c}{}&\multicolumn{1}{c}{}\tabularnewline
\hline
bar&$0$&$0$\tabularnewline
bar&$0$&$0$\tabularnewline
\hline
\end{tabular}
\end{center}
\end{table} 
```

对不起，简短的评论。当时我正抱着一个婴儿。

# php - 如何删除无序列表的开始项目符号

> ID：11164046
> 
> 赞同：0
> 
> 时间：2012-06-22T21:00:23.013
> 
> 标签：php, html, css

我正在尝试使用 php 和 css 设计图片库。我已将图像放在无序列表中，例如，

```
<ul style="list-style-type:none;">
<?
while($data=mysql_fetch_row($result))
 {
 $pic=$data[2];
  if ($pic)
  {
 $path="http://www.myworkdemo.com/pecifica/photos/".$pic;
 }
 ?>
 <li style="list-style-type:none; float: left; margin-left:4px; margin-top:5px; margin-bottom:5px;">
<img src=<?=$path?> width=300 height=240></img>
  <!--<td class='delete'><a href='addproject.php?ProjId=<?=$data[0]?>&action=edit' >Edit</a></td>-->
 <div class='delete'><a href='images.php?picid=<?=$data[0]?>&action=delete' class="ask">Delete</a></div>
 </li>
 </ul> 
```

我得到了所有图像，但没有从列表中删除一个项目符号（开始）。我的css格式化后的画廊就像

![在此处输入图像描述](../Images/dbb567973fa8305367135f09a1352cf5.png) 由于那个子弹，我失去了第一行图像的对齐方式。请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:01:14.620

非常简单地：

```
list-style-type: none; 
```

还要考虑`list-style: none;`子弹是否实际上是浏览器未渲染的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:16:30.187

它位于您的两个 CSS 文件中。

第 514 行 [http://www.myworkdemo.com/pecifica/admin/css/style1.css](http://www.myworkdemo.com/pecifica/admin/css/style1.css)

```
.block .block_content ul li {
    background: url("../images/li.gif") no-repeat scroll 0 7px transparent; 
```

第 523 行， [http://www.myworkdemo.com/pecifica/admin/css/style.css](http://www.myworkdemo.com/pecifica/admin/css/style.css)

```
.block .block_content ul li {
    background: url("../images/li.gif") no-repeat scroll 0 7px transparent; 
```

用 firebug 禁用这两个消除了项目符号（这实际上是一个自定义 gif 文件）。您需要查看您是如何使用相关课程的。

# c# - 内存缓冲区和 IO 操作

> ID：11164051
> 
> 赞同：0
> 
> 时间：2012-06-22T21:00:44.483
> 
> 标签：c#, performance, io

以下两个代码示例在性能方面是否相等？

代码示例 1：

```
var count = 9999999999;

using(var sw = new StreamWriter())
{
   for(int i=0;i<count;i++)
   {
      var result = SomeRelativeLongOperation(i);
      sw.WriteLine(result);    
   }
} 
```

代码示例 2：

```
var count = 9999999999;
var resultCollection = new ....

using(var sw = new StreamWriter())
{
   for(int i=0;i<count;i++)
   {
      resultCollection.Add(SomeRelativeLongOperation(i));

      if(resultCollection.Count%100==0)
      {
         WriteBlock(sw,resultCollection);    
         resultCollection.Clear();
      }
   }
} 
```

我知道 Windows 使用内存缓冲区进行 IO 操作。所以，当我调用该`StreamWriter.WriteLine`方法时，它首先将数据存储在内存中，然后刷新到硬盘驱动器，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:11:05.270

StreamWriter 已经被缓冲了，所以添加一个额外的缓冲区只会降低它的效率。

# c++ - 实时视频捕获 c++ lib

> ID：11164052
> 
> 赞同：0
> 
> 时间：2012-06-22T21:00:49.153
> 
> 标签：c++, rtsp

你能给我建议任何库，它可以帮助我从 IP 摄像头捕获 rtsp 流。我已经使用 ffmpeg 和 openCV 来完成这项任务，但是 ffmpeg 在使用 AXIS IP 摄像机时存在问题，并且 openCV 在解压缩之前无法给我压缩数据（但我必须将它们保存在存档中）。我在 windows 和 Qt 上开发，如果有一些现成的二进制 lib 文件，那就太好了，因为如果构建如此复杂的话，会有很多 lib。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:49:07.330

尝试使用 Red5 服务器。你会得到你想要的。干杯

阅读更多：[http ://red5wiki.com/wiki/SteamStream](http://red5wiki.com/wiki/SteamStream)

# javascript - 我可以使用 WebSockets 连接到 irc、icq、sip 等服务，前提是我在 JavaScript 中对这些协议进行了某种实现吗？

> ID：11164055
> 
> 赞同：6
> 
> 时间：2012-06-22T21:00:58.597
> 
> 标签：javascript, websocket

我想使用 WebSockets 连接到 irc、icq、sip 等服务。假设我在 JavaScript 中有这些协议的某种实现？那可能吗？与常规套接字相比，我似乎不了解 WebSockets 的局限性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T21:02:46.787

不，你不能，至少不能直接。

WebSockets 允许在浏览器和 WebSocket 服务器之间进行实时消息传递，但它们有自己的第 7 层协议来封装这些消息。

它们*不*提供对可以实现现有协议的纯 TCP（或 UDP）套接字的访问。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T22:38:05.120

**绝对地！**

需要注意的是，您需要在浏览器的 WebSocket 传输协议和现有服务的原始 TCP 套接字之间架起桥梁。例如，类似[websockify](https://github.com/kanaka/websockify)（免责声明：我创建了 websockify）。另一个警告是 websockify 只支持 TCP 目标（WebSocket 现在只是 TCP，所以支持 UDP 目标无论如何都会有点奇怪）。

websockify 项目实际上包括两个概念验证 HTML/Javascript 页面，用于与 IRC 和 telnet 通信。如果您有兴趣利用 websockify 为一些常见的 TCP 协议构建 HTML/Javascript 客户端，我什至可以将它们作为示例拉入 websockify 存储库（假设它们编码良好并且在开源许可下。

websockify 的替代方法是将 websocket 服务器端支持直接集成到您希望与之通信的服务器中。添加支持并不是那么困难。WebSocket 有一个非常简单的框架，虽然握手与 HTTP 服务器兼容，但它实际上受到更多限制和简单，并且不需要完整的 HTTP 解析器。例如，libvncserver 0.9.9 现在支持常规 VNC 连接和基于 WebSocket 的 VNC 连接。这允许 noVNC（我也创建）直接连接到基于 libvncserver 的 VNC 服务器，而不需要 websockify。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-02T21:41:26.990

Inspircd 有一个可以安装的非官方模块，称为`m_websockets`，以允许连接。安装并设置模块的服务器将允许您通过 webbsockets 连接到服务器。

[https://github.com/barosl/inspircd-m_websocket](https://github.com/barosl/inspircd-m_websocket)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T23:28:25.103

扩展@kanaka 的 websockify，这个项目似乎做到了：

> 使用 websocket 和 websockify 制作的 HTML5 irc 客户端。
> 
> [已] 支持自动加入、privmsg 频道、主题、加入、用户列表、部分、昵称。

[https://github.com/confact/dunirc](https://github.com/confact/dunirc)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-21T14:27:12.363

不，不是 websockets，但你可以使用 http。

[Samy Kamkar 对此进行了黑帽讨论。](https://www.youtube.com/watch?v=O5xRRF5GfQs&feature=youtu.be&t=30m20s)

# google-chrome - Chrome：带背景的 img 上未显示框阴影

> ID：11164058
> 
> 赞同：3
> 
> 时间：2012-06-22T21:01:13.890
> 
> 标签：google-chrome, background, image, css

我的网站上有一个带有`background`（加载指示器，但在任何背景下都会发生）的图像，半年前效果很好。但是几个月以来，Chrome 不再显示盒子阴影了。

我已经设置了一个小提琴来尝试将其简化为必需品。它只发生在某些图像上（可能与透明度有关？），有时它只发生在图像被重绘（选择、移动）之后。当我删除背景时，阴影是可见的。

[http://jsfiddle.net/PJ7f5/5/](http://jsfiddle.net/PJ7f5/5/)

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:33:50.633

**更新 2**请参阅下面的@arttronics 评论。

[http://jsfiddle.net/z89x9/37/](http://jsfiddle.net/z89x9/37/)

```
.img {
    background-color: red;
    width:100px;
    height:100px;
    box-shadow:2px 2px 8px rgba(0, 0, 0, 1);
    padding-left: 1px;
    margin-left: -1px;
}
.img:hover {
    margin:2px;
}
​ 
```

# wordpress - WP 分子内的 PHP 代码

> ID：11164062
> 
> 赞同：0
> 
> 时间：2012-06-22T21:01:23.363
> 
> 标签：wordpress

我需要在 WP 的分子内添加一个 PHP 片段。WP Editor 允许插入`<code> </code>` ，但即使我用它包装 PHP，它似乎也无济于事。

我只希望它插入当前年份，所以我可以使用 PHP 或 JS 或 WP 支持的任何其他内容。

有人有过这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:10:22.837

想到了两个插件。一个是**wp-syntax** [http://wordpress.org/extend/plugins/wp-syntax/](http://wordpress.org/extend/plugins/wp-syntax/)，一个功能丰富的代码显示插件。您必须切换到代码编辑视图才能使用 PHP 代码段插入您的`<code>`or标记。`<pre>`

另一个是我的低技术自制软件，“**包含自定义字段**”： http: [//pp19dd.com/wordpress-plugin-include-custom-field/](http://pp19dd.com/wordpress-plugin-include-custom-field/)

homebrew 是一个简码插件，可让您将任意代码或数据放入自定义字段中，然后使用 [include mycode1] 之类的内容将其注入帖子中。请注意，您可以将其编码到可以显示的位置，或者将其修改为像代码荧光笔一样的位置（可以使用 highlight_string 轻松完成。）

我喜欢我的 brew 版本的原因是因为它 a) 将博客文章与代码分开，并且 b) 经受了许多编辑周期和/或导入。所有其他内联解决方案都让我烦恼不已。

# c# - 如何设置安全性以远程停止和启动 WCF 服务？

> ID：11164063
> 
> 赞同：0
> 
> 时间：2012-06-22T21:01:25.750
> 
> 标签：c#, wcf, servicecontroller

这是一篇很长的帖子，所以这是我的问题的主要内容：我想使用 C# 中的 ServiceController 类来控制另一台计算机上的服务，但看起来我需要在服务主机上模拟一个帐户遵守 .NET 如何管理安全性。我怎么做？

* * *

细节：

我们有一些 WCF 服务托管在服务器和依赖于它们的客户端应用程序上。（一切都是用 .NET 4.0 C# 编写的。）客户端上有一个仪表板，显示哪些服务正在运行，如果有任何服务出现故障，我们希望让用户尝试远程重新启动它们。经过一番研究，看起来 ServiceController 可以做我们希望的事情。我已经开始玩它了，这就是我到目前为止所写的：

```
/// Called when the user clicks a button in the system health dashboard view
///to restart a broken service
private void RestartService()
{
    var servcntrls = ServiceController.GetServices(HostName);
    //TODO finish method
} 
```

显然，这实际上并没有重新启动服务。我想我知道如何使用`ServiceController.Start()`和`.Stop().`当执行这么多代码时，但是，在调用时会引发异常`GetServices()`：

```
Type = System.InvalidOperationException
Message = Cannot open Service Control Manager on computer '/* computer name snipped */'. This operation might require other privileges.
Data:
System.Object = 

Stack Trace:
at System.ServiceProcess.ServiceController.GetDataBaseHandleWithAccess(String machineName, Int32 serviceControlManaqerAccess)
at System.ServiceProcess.ServiceController.GetDataBaseHandleWithEnumerateAccess(String machineName)
at System.ServiceProcess.ServiceController.GetServicesOfType(String machineName, Int32 serviceType)
at System.ServiceProcess.ServiceController.GetServices(String machineName)
at Client.Organizer.SystemHealth.ViewModels.ClientStatusViewModel.RestartService() in C:\Source\X\Trunk\Client\Organizer\SystemHealth\ViewModels\ClientStatusViewModel.cs:line 38
at GalaSoft.MvvmLight.Command.RelayCommand.Execute(Object parameter)
at MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(ICommandSource commandSource, Boolean userInitiated)
at System.Windows.Controls.Primitives.ButtonBase.OnClick()
at //Snip

==== Inner Exception ====
Type = System.ComponentModel.Win32Exception
Message = Access is denied 
```

我对此进行了一些研究并发现了这些线程：
[如何使用 ServiceController 远程控制 Windows 服务？](https://stackoverflow.com/questions/2996282/how-to-remotely-control-a-windows-service-with-servicecontroller/2997541#2997541)
[http://social.msdn.microsoft.com/Forums/en-US/clr/thread/18c34a5c-8637-4e85-b9ee-d9052bb12a34/](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/18c34a5c-8637-4e85-b9ee-d9052bb12a34/)
[Windows 7 服务控制器权限中的 ServiceController](https://stackoverflow.com/questions/3892088/servicecontroller-permissions-in-windows-7)
[权限](https://stackoverflow.com/questions/1913429/servicecontroller-permissions)
[http://social.msdn.microsoft.com /论坛/en/wcf/thread/c35e75c4-de7d-409d-bc82-4533e4982264](http://social.msdn.microsoft.com/Forums/en/wcf/thread/c35e75c4-de7d-409d-bc82-4533e4982264)

我从他们那里收集到的是，当 ServiceController 与服务交互时，它需要具有适当的权限才能与它们对话。我发现的文章建议在服务器上模拟具有适当权限的用户帐户。

不幸的是，我对 .NET 如何管理安全问题完全陌生，所以我不知道该怎么做。所以这是我的问题：
1\. 在服务器上模拟帐户是解决此问题的适当方法吗？我阅读的线程中的一个人认为它引发了太多安全漏洞。
2\. 如何模拟账户？某处有一篇文章有​​一个很好的代码示例吗？
3\. 有什么方法可以在不配置服务器和客户端计算机的情况下模拟用户？我们在客户的环境中设置我们的系统，我不想在安装中添加一个晦涩的步骤。

**编辑：**根据 AvkashChauhan 的回答，我们的 WCF 服务作为 Windows 服务托管。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:47:52.983

WCF 服务可以托管在 1) IIS Web 服务器、2) WAS 服务器、3) 自托管和最后 4) Windows 服务上，如果您的 WCF 服务仅托管在**Windows 服务**上，那么您可以使用 ServicesController 类来控制服务. 虽然基于 IIS 和 WAS 的 WCF 服务通过应用程序域和进程提供控制，但是 Windows 服务托管的 WCF 服务是通过 ServiceController 类进行管理的。

我只是想确保您的 WCF 服务作为 Windows 服务托管，因为您的问题并不清楚。上面的链接主要处理 Windows 服务（不是 WCF 服务）。

您还可以通过 HTTP/netpipe 或其他方式将 WCF 服务托管为 Windows 服务，因此取决于您使用的通信通道，安全设置将基于此，您知道它是什么吗？

使用 WCF 服务，您可以先尝试使用 IP 地址而不是机器名称来获取托管服务，因为这是非常常见的问题。另请查看以下 SO 讨论：

[WCF：StackoverFlow 异常](https://stackoverflow.com/questions/4450435/wcf-stackoverflow-exception)

[Windows 服务通过 HTTPS 托管 WCF](https://stackoverflow.com/questions/3688342/windows-service-hosted-wcf-over-https?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:10:54.960

你可以在你的工具中使用

PsExec 工具，用于在远程机器上执行命令行进程。

# jquery - 带有文本框值的 Jquery 文本框验证

> ID：11164065
> 
> 赞同：0
> 
> 时间：2012-06-22T21:01:40.343
> 
> 标签：jquery, validation, onblur, onfocus

我有几个文本框，其中包含值。当用户单击文本框时，我正在使用 onfocus 和 onblur 清除值。我也在尝试验证文本框，但由于框中已经有一个值，因此验证不起作用。有没有办法让验证忽略该值（即名字）？

谢谢！

```
<script type="text/javascript">

 var j = jQuery.noConflict();

    j(document).ready(function() {

        j("#ContactUs_Solutions_EN2012").validate({

        rules: {
 realname: "required",
 email: {
   required: true,
   email: true
 }
 },
messages: {
 realname: "<p style='color:red; font-size:12px; margin:-10px 0 0px 0; padding:10px 0px 10px 10px ; text-align:right;'>Please specify your name</p>",
 email: {
   required: "<p style='color:red; font-size:10px; margin:-10px 0 0px 0; padding:0; text-align:right;'>We need your email address to contact you</p>",
   email: "Your email address must be in the format of name@domain.com"
  }
}
        });
    });
</script>

<input style="WIDTH: 275px" id="First_Name" name="realname" class="required" size="25" minlength="2" value="First Name" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:11:45.897

您可以创建一个全局布尔变量并将其初始化为 false。在您的“onfocus”功能中，只需将布尔值更改为 true。仅当您的布尔变量为真时才显示错误消息。

或者，您可以使用 HTML 5 属性“占位符”

这实际上为您完成了焦点部分，而实际上并没有在文本框中输入一个值。

有关详细信息，请参阅[http://www.w3schools.com/html5/att_input_placeholder.asp 。](http://www.w3schools.com/html5/att_input_placeholder.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:16:06.790

由于您在文本框中设置了一个值，因此您的验证将不起作用。将值更改为占位符。您无需使用 onfocus 和 onblur 来清除值，因为占位符会为您完成。

```
<input style="WIDTH: 275px" id="First_Name" name="realname" class="required" size="25" minlength="2" placeholder="First Name" > 
```

# time - 当您所拥有的只是一个偏移量（从 GMT 开始）时，向用户显示本地时间

> ID：11164072
> 
> 赞同：2
> 
> 时间：2012-06-22T21:01:59.697
> 
> 标签：time, gmt

我知道，在给定时区与 GMT 的偏移量的情况下，向用户显示本地时间非常容易（例如，太平洋夏令时间为 -7 小时）。

但是，如果我想在很长一段时间内（比如 1 年）继续显示正确​​的本地时间怎么办。仅给定与 GMT 的偏移量，您不知道用户所在的时区。例如，给定 -7，用户可能居住在美国或加拿大（或其他一些国家/地区）。这些国家/地区在一年中的不同时间点可能有不同的当地时间（例如，如果美国在 3 月更改为白天时间，在 4 月更改为加利福尼亚时间）。

我的问题是，上面的段落是否正确？有没有一种标准的方法来获取 GMT 偏移量并很好地猜测用户所在的时区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-15T22:54:45.067

您的结论是正确的：没有可靠的方法可以从[offset-from-UTC识别](https://en.wikipedia.org/wiki/UTC_offset)[时区](https://en.wikipedia.org/wiki/Time_zone)。

对于您的偏移量示例，我在[当前列表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)`-07:00`中计算了大约*三打*可能的时区，包括：、、和。[`America/Boise`](https://en.wikipedia.org/wiki/America/Boise)[`America/Chihuahua`](https://en.wikipedia.org/wiki/America/Chihuahua)[`America/Edmonton`](https://en.wikipedia.org/w/index.php?title=America/Edmonton&action=edit&redlink=1)

**时区实际上是偏移量的*集合***，记录了随着时间的推移所做的更改，该偏移量在该区域使用了一定的时间段，然后在另一个特定的时间段内发生了变化。

例如，`America/Los_Angeles`每年的部分时间有一个偏移量，`-08:00`而一年的另一部分有`-07:00`. 因此，该时区每年累积至少两次偏移的历史记录。相比之下，使用时区的相邻区域`America/Phoenix`并*没有*`-07:00`累积其偏移量的变化，几十年来一直保持相同的偏移量。

所以我们在偏移量和时区之间存在多对多的关系。偏移量可能出现在一个或多个时区。并且每个时区可以有一个或多个偏移量（已经改变了历史）。

# 包括时区名称

这就是为什么 java.time 类的设计者[`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)冒昧地让其[`toString`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html#toString--)方法扩展标准[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式，仅使用偏移量，并将时区名称附加在方括号中。

例如，`2007-12-03T10:15:30+01:00`该类生成的不是简单地生成标准格式：，而是附加`2007-12-03T10:15:30+01:00[Europe/Paris]`了区域[Europe/Paris的名称。](https://en.wikipedia.org/wiki/Europe/Paris)

```
ZonedDateTime.now( ZoneId.of( "America/Montreal" ) )
             .toString() 
```

> 2007-12-03T10:15:30+01:00[欧洲/巴黎]

我希望这种附加时区名称的做法能够流行起来。缺少时区名称是标准委员会的一个令人惊讶的遗漏，否则这些标准委员会在设计 ISO 8601 方面做得非常出色。

您可以使用业务场景上下文中的线索来*猜测时区。*但我不建议这样做。猜测是有风险的，特别是因为世界各地的政治家都喜欢频繁地重新定义时区。

# 世界标准时间

存储、序列化和交换日期时间值的最佳实践通常是调整为[UTC](https://duckduckgo.com/Coordinated_Universal_Time)。假设日期时间库的[tzdata](https://en.wikipedia.org/wiki/Tz_database)是最新的，调整为 UTC 可提供始终正确且明确的可靠值。

例如，在 Java 中，这意味着使用或提取`Instant`对象。该类表示[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的时刻，分辨率为[纳秒](https://en.wikipedia.org/wiki/Nanosecond)（最多九 (9) 位小数）。

```
Instant instant = Instant.now(); 
```

……或者……</p>

```
ZonedDateTime zdt = ZonedDateTime.now( ZoneId.of( "America/Montreal" ) );
Instant instant = zdt.toInstant(); 
```

表示此类值的标准 ISO 8601 格式字符串使用 a`Z`作为 UTC 的缩写`Zulu`，表示 UTC。

> 2007-12-03T09:15:30Z

# `OffsetDateTime`

如果给定一个表示只有偏移量的日期时间的字符串，请将其解析为[`OffsetDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html)对象。

```
OffsetDateTime odt = OffsetDateTime.parse( "2007-12-03T10:15:30+01:00" ); 
```

> odt.toString(): 2007-12-03T10:15:30+01:00

从那里您可以提取一个 UTC 值，一个`Instant`.

```
Instant instant = odt.toInstant(); 
```

> 即时.toString(): 2007-12-03T09:15:30Z

或者您可以调整到所需的时区以获得与对象相同的时刻[`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)。

```
ZoneId z = ZoneId.of( "Asia/Kolkata" );
ZonedDateTime zdt = odt.atZoneSameInstant( z ); 
```

> zdt.toString(): 2007-12-03T14:45:30+05:30[亚洲/加尔各答]

# 术语：“本地”</h1>

我建议您在提及调整为区域特定[挂钟时间](https://en.wikipedia.org/wiki/Wall-clock_time)的日期时间时避免使用“本地”一词。java.time 类和其他上下文中的“本地”一词表示*任何*地方，而不是特定的地方。本地日期时间*不是*时间线上的特定时刻，只是关于一系列可能时刻的粗略概念。

例如，今年圣诞节开始的当地日期时间是`2017-12-25T00:00:00`，但奥克兰的午夜时刻比加尔各答早得多，在巴黎还要晚几个小时，而在蒙特利尔则更晚几个小时。

我建议您改用这些术语`zoned`，或者`wall-clock time`当您指的是通过特定时区的镜头看到的特定时刻时。

# 提示：偏移文字

`-7`这个问题在提到偏移量时碰巧使用了这些字母。我总是建议：

*   根据 ISO 8601 的要求，使用带有填充零的两位数
*   正如某些库和格式所期望的那样，同时使用小时和分钟。

所以使用`-07:00`而不是`-7`.

# javascript - 如何在谷歌地图上放置图标标记，图标数量是否有配额？

> ID：11164073
> 
> 赞同：0
> 
> 时间：2012-06-22T21:02:02.147
> 
> 标签：javascript, geolocation, maps, geospatial

如何在 Google 地图 JavaScript 中说：“我想在这个纬度和经度上放置一个标记，带有动画，以及这个 30x20 的图标 [带有图标所需的任何信息]？”

我可以拥有多少个不同的图标有任何限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:06:27.863

我认为您正在寻找这个：[Google Maps API - Overlays](https://developers.google.com/maps/documentation/javascript/overlays)

那里有一些非常好的例子......

通常有一个用于覆盖的图标和一个用于阴影的图标，但您可以覆盖此行为...

编辑：添加了更多内容：

没有默认阴影。如果您使用自定义图标，则需要为阴影提供图标和图像。我过去曾使用[自定义标记生成器](http://powerhut.co.uk/googlemaps/custom_markers.php)来生成阴影图像。

这是来自 Google 的一些示例代码。注意图像和阴影都被指定了......

```
function initialize() {
    var myOptions = {
        zoom: 10,
        center: new google.maps.LatLng(-33.9, 151.2),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"),
                            myOptions);

    setMarkers(map, beaches);
}

/**
 * Data for the markers consisting of a name, a LatLng and a zIndex for
 * the order in which these markers should display on top of each
 * other.
 */
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
];

function setMarkers(map, locations) {
  // Add markers to the map

  // Marker sizes are expressed as a Size of X,Y
  // where the origin of the image (0,0) is located
  // in the top left of the image.

  // Origins, anchor positions and coordinates of the marker
  // increase in the X direction to the right and in
  // the Y direction down.
  var image = new google.maps.MarkerImage('images/beachflag.png',
      // This marker is 20 pixels wide by 32 pixels tall.
      new google.maps.Size(20, 32),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is the base of the flagpole at 0,32.
      new google.maps.Point(0, 32));
  var shadow = new google.maps.MarkerImage('images/beachflag_shadow.png',
      // The shadow image is larger in the horizontal dimension
      // while the position and offset are the same as for the main image.
      new google.maps.Size(37, 32),
      new google.maps.Point(0,0),
      new google.maps.Point(0, 32));
      // Shapes define the clickable region of the icon.
      // The type defines an HTML <area> element 'poly' which
      // traces out a polygon as a series of X,Y points. The final
      // coordinate closes the poly by connecting to the first
      // coordinate.
  var shape = {
      coord: [1, 1, 1, 20, 18, 20, 18 , 1],
      type: 'poly'
  };
  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        shadow: shadow,
        icon: image,
        shape: shape,
        title: beach[0],
        zIndex: beach[3]
    });
  }
} 
```

此处示例：[复杂图标示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex)

# vb.net - 运行时的 ContextMenuStrip 事件处理程序

> ID：11164074
> 
> 赞同：3
> 
> 时间：2012-06-22T21:02:07.827
> 
> 标签：vb.net

我在运行时创建上下文菜单取决于 datagridview 选定单元格中的文本。
像这样：

```
 With ContextMenuStrip1
            .Items.Clear()
            Dim Str As String = DataGridView1.Item(1, DataGridView1.CurrentRow.Index).Value

            Dim strArr() As String = Str.Split(" ")
            For count As Integer = 0 To strArr.Length - 1
                If strArr(count).Length > 1 Then
                    .Items.Add(strArr(count))
                End If
            Next

            .Items.Add("-")
            .Items.Add("Common operation ...")
            .Items.Add("Second common operation ...")
            AddHandler .Click, AddressOf cMenu_Click

            .Show(New Point(Cursor.Position.X, Cursor.Position.Y))
        End With
etc... 
```

然后我添加这样的事件处理程序：

```
Private Sub cMenu_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim mytext As String
    mytext = (CType(sender, ContextMenuStrip).Text)
    Debug.Print(mytext)

    'after all...
    RemoveHandler ContextMenuStrip1.Click, AddressOf cMenu_Click
End Sub 
```

作为使用此代码的 vbnet 初学者，我无法在事件处理程序中获取已触发菜单项的文本。
所以请帮助获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:55:05.930

每个菜单项都需要处理程序。

试试这种方式（通过添加快捷键更新）：

```
For count As Integer = 0 To strArr.Length - 1
  If strArr(count).Length > 1 Then
    Dim newMenu As New ToolStripMenuItem(strArr(count), _
                                         Nothing, AddressOf cMenu_Click)
    newMenu.ShortcutKeys = Keys.Control Or Keys.C
    .Items.Add(newMenu)
  End If
Next 
```

您的 click 方法应改为处理 a `ToolStripMenuItem`：

```
Private Sub cMenu_Click(ByVal sender As Object, ByVal e As EventArgs)
  Dim mytext As String
  mytext = DirectCast(sender, ToolStripMenuItem).Text
  Debug.Print(mytext)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:43:44.427

为 ContextMenuStrip 的所有子项的 Click 事件添加一个处理程序（指向相同的方法）。然后在您的方法中将其转换为 ToolStripMenuItem 或 MenuItem 类（无论您使用什么）以查找单击项目的文本。

# .net - 何时通过 NuGet 使用 MVC 脚手架与通过 MVC3 工具更新使用 MVC 脚手架

> ID：11164075
> 
> 赞同：4
> 
> 时间：2012-06-22T21:02:13.230
> 
> 标签：.net, asp.net-mvc-3, visual-studio, scaffolding

我对 MVC3 的各种不同的“主流”脚手架选项有点困惑。有一个名为[MVCScaffolding](http://nuget.org/packages/MVCScaffolding)的 NuGet 包。它于 2011 年 1 月首次出现，但似乎很活跃并且最近有更新，由 Scott Hanselman 等人开发。然后在 2011 年 5 月出现了[MVC3 工具更新](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)。这*似乎*将最初的脚手架想法融入了“开箱即用”的脚手架选项。但是，此后一直没有更新。

那么 - 这两个脚手架（如果有的话）之间的关系是什么。是否存在应该使用一个而不是另一个的情况，或者这只是一个品味问题？Visual Studio 2012 或 MVC4 是否会改变游戏规则？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T03:09:03.803

从我目前的调查来看：

**MVC脚手架**：

*   旨在使用 Code First EF 实现*，带有 DBContext 数据上下文和 POCO 模型
*   提供了一种使用存储库数据访问模式创建 MVC Web 应用程序构建的非常快速的方法

**MVC3 工具脚手架**

*   一种为模型创建控制器和视图的方法，使用 EF 数据库优先或 EF 代码优先方法
*   它创建的控制器直接使用数据上下文（而不是通过像存储库这样的数据访问抽象）

*有[一种方法可以让 MVCScaffolding 与 Database First 一起工作](http://weblogs.asp.net/paullitwin/archive/2011/08/11/use-mvc-scaffolding-in-database-first-mode.aspx)，但你必须稍微努力一下。

**我的结论（主观）**

*   代码首先，使用 MVCScaffolding。
*   数据库 首先，使用 MVC3 Tools 脚手架。

总的来说，Code First & MVC3 Scaffolding 似乎是一种更“最佳实践”的方法。存储库为单元测试创​​造了更干净的机会，而 POCO 意味着没有跨应用程序层的数据访问代码泄露。

至于MVC4，我不确定。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T14:49:39.293

**MVC Scaffolding**在 MVC 4 上运行良好。过去几周我一直在使用 Visual Studio 2012 在一个新的 ASP.NET MVC 4 项目中使用它，一切似乎都很好。

这篇文章展示了一个很好的例子： http: [//www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and)。

它是开源的，用于检查变更集，即链接： http: [//mvcscaffolding.codeplex.com/SourceControl/list/changesets](http://mvcscaffolding.codeplex.com/SourceControl/list/changesets)

# c# - 将值四舍五入为 0.5

> ID：11164078
> 
> 赞同：1
> 
> 时间：2012-06-22T21:02:18.893
> 
> 标签：c#, .net

有明显的怪癖，`Math.Round`但有没有办法`Math.Round`为评级系统实现这种类型的操作。

如果大于`.0`小于等于`.5`，显示半颗星

如果大于`.5`小于等于`.0`显示整颗星

所以很明显半颗星会是`.5`一个完整的开始将是下一个完整的价值。

我不知道去半整数的舍入方法。

我应该只写 if 语句来控制舍入吗？

**编辑/解决方案

从下面的答案我想出了。

```
double roundedRating = (Math.Ceiling(2 * currentRating)) / 2; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T21:04:05.780

我建议乘以 2，执行`Math.Ceiling`并除以 2 以得到最接近的一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:08:35.570

您将要确保最终对整数而不是浮点数执行检查。

首先将数字乘以 2。继续这样做，直到它是一个整数值（小数部分没有值）。

现在，不断除以 2，直到得到一个小于或等于原始数字的数字。如果结果小数部分大于 .0 且小于或等于 0.5，则显示半颗星。如果它大于 .5 且小于或等于 +.0，则显示一整颗星。

实际上，请接受马特的回答。; )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:37:31.013

这能行吗？

将数字乘以 10 例如`0.1x10, 0.2x10`得到 n

```
Math.Ceil(n / 5) / 2 
where n = 1, 2, 3 instead of - .1, .2, .3 
```

例子：

```
1,2,3,4,5 = 1/2 = 0.5
6,7,8,9,10 = 2/2 = 1
11,12,13,14,15 = 3/2 = 1.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:17:29.737

如果效率不成问题，可以使用以下方法：

```
Number *= 10;
Number % 10 = remainder;
if(remainder <=5 && remainder != 0)
  //Half star
else
  //Whole star 
```

但是，该代码有点难看，但我认为它为您提供了总体思路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T06:15:55.603

```
double roundedRating = (int)(currentRating * 2D + 0.999999999999999) / 2D 
```

# asynchronous - WinRT 异步处理程序中的 WrongThreadException

> ID：11164090
> 
> 赞同：0
> 
> 时间：2012-06-22T21:03:02.613
> 
> 标签：asynchronous, windows-runtime

WinRT 项目，C++/CX。我正在尝试将 PNG 文件加载到 WriteableBitmap 中。我将`Source`属性设置为`IRandomAccessStream`. 要从文件中获取流，必须使用异步操作 - WinRT 中没有打开同步文件。

我的异步完成处理程序似乎是在随机工作线程上执行的。在那个处理程序中，最无辜的操作（比如构造一个新的 WriteableBitmap）会导致 WrongThreadException。从运行到运行是不可重现的。

这是怎么回事？我应该把它归结为预发布的时髦吗？

Visual Studio 2012 RC，Windows 8 构建 8400。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:26:36.633

当您与 UI 元素交互时，它们需要在 UI 线程上执行。确保您在 UI 线程上的最简单方法是使用 PPL 延续 - 如果您使用创建流异步 API，则传递给“.then”方法的 lambda 应该在原始线程的线程上下文中运行- 通常是 UI 线程。

如果您无法通过 PPL 回到 UI 线程，请使用 CoreDispatcher.RunAsync() 并在传递给 RunAsync 的 lambda 中完成您的工作 - 这将始终在 UI 线程上运行。

# css - 颜色属性在 Chrome 中添加彩色边框

> ID：11164093
> 
> 赞同：2
> 
> 时间：2012-06-22T21:03:33.183
> 
> 标签：css, google-chrome

首先让我说，我喜欢 chrome 用于输入的边框，我的问题出现在 textarea 上。textarea 使用 color 属性作为边框以及为输入的文本着色的预期功能。这是我的CSS：

`select, textarea, input{ font-size:25px; font-weight:bold; color: #FF4500;}`

正如我所说，我想要 chrome 制作的边框，我只是不想要它出于某种原因只放在 textarea 周围的彩色边框。有什么方法可以将颜色应用于文本，或者阻止颜色属性更改边框颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:56:32.100

删除设置边框属性的设置（在您发布的部分以外的代码中）`textarea`，例如`border-width`或`border-radius`。

原因是这样的设置可能会使 Chrome（或其他浏览器）在元素周围使用正常的边框，由其上的 CSS 属性确定，而不是使用不受 CSS 影响的特殊例程绘制的默认边框。效果因浏览器和属性而异。例如，使用您的示例代码，在 Chrome 上，如果您添加`border-style: solid`，则`input`元素会获得橙红色边框，但会`select`保留`textarea`其默认的灰色边框。但是，如果您`border-radius: 8px`改为添加，则`input`保留其默认边框颜色（尽管带有圆角），而两者都`select`获得`textarea`橙红色边框。

# web-services - KSOAP2 可以发送复杂类型但不能接收回来

> ID：11164098
> 
> 赞同：1
> 
> 时间：2012-06-22T21:03:46.707
> 
> 标签：web-services, java-me, ksoap2, java1.4

我正在开发一个需要访问第 3 方 dotNet WebService 的项目。

我正在使用 ksoap2-j2se-full-2.1.2.jar （Java 1.4 兼容）。我不能使用 java > 1.4（平台限制）。

它使用了很多复杂的数据类型。有一个特定的方法可以接收复杂的对象并返回相同的对象类型（可能已修改）。

序列化工作正常，但反序列化不起作用。“属性”标签导致错误。

有谁知道是否可以在两种方式中使用相同的注册数据类型，或者至少比手动方式更好（我必须为很多方法做）？

抱歉，很长很长的消息。但我必须包括与此相关的所有内容。对不起，草率的代码。这只是一个测试。

非常感谢。

这是请求 XML：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
    <v:Header/>
    <v:Body>
        <iniciarExecucaoProcessoComTicket xmlns="http://tempuri.org/" id="o0" c:root="1">
            <ticketAutenticacao>4FSejSSb5JY8N5Sy+nwYDOxNaBsPhFuyF9Dsws8AiNQvwN0nGOUP8w==</ticketAutenticacao>
            <idProcesso>10074</idProcesso>
            <parametrosIniciais>
                <n0:KeyValue xmlns:n0="http://schemas.datacontract.org/2004/07/MyWS.WS.EXT">
                    <n0:key>pnNome</n0:key>
                    <n0:value i:type="d:string">Person1</n0:value>
                </n0:KeyValue>
                <n1:KeyValue xmlns:n1="http://schemas.datacontract.org/2004/07/MyWS.WS.EXT">
                    <n1:key>pnNumero</n1:key>
                    <n1:value i:type="d:string">7001832700</n1:value>
                </n1:KeyValue>
                <n2:KeyValue xmlns:n2="http://schemas.datacontract.org/2004/07/MyWS.WS.EXT">
                    <n2:key>pnTipoSAP</n2:key>
                    <n2:value i:type="d:string">Z005</n2:value>
                </n2:KeyValue>
                <n3:KeyValue xmlns:n3="http://schemas.datacontract.org/2004/07/MyWS.WS.EXT">
                    <n3:key>CodCanal</n3:key>
                    <n3:value i:type="d:string">5</n3:value>
                </n3:KeyValue>
            </parametrosIniciais>
        </iniciarExecucaoProcessoComTicket>
    </v:Body>
</v:Envelope> 
```

这是答案 XML：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
        <iniciarExecucaoProcessoComTicketResponse xmlns="http://tempuri.org/">
            <iniciarExecucaoProcessoComTicketResult xmlns:a="http://schemas.datacontract.org/2004/07/MyWS.WS.EXT" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                <a:atributos>
                    <a:KeyValue>
                        <a:key>pnNome</a:key>
                        <a:value xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">Person 1</a:value>
                    </a:KeyValue>
                    <a:KeyValue>
                        <a:key>pnNumero</a:key>
                        <a:value xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">7001832700</a:value>
                    </a:KeyValue>
                    <a:KeyValue>
                        <a:key>pnTipoSAP</a:key>
                        <a:value xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">Z005</a:value>
                    </a:KeyValue>
                    <a:KeyValue>
                        <a:key>CodCanal</a:key>
                        <a:value xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">5</a:value>
                    </a:KeyValue>
                </a:atributos>
                <a:dominio>0</a:dominio>
                <a:ds xmlns:b="http://schemas.datacontract.org/2004/07/MyWS.DTO" i:nil="true"/>
                <a:idInstanciaProcesso>66806</a:idInstanciaProcesso>
                <a:idProcesso>10074</a:idProcesso>
                <a:instanciaEmExecucao xmlns:b="http://schemas.datacontract.org/2004/07/MyWS.DTO" i:nil="true"/>
                <a:nomeUsuario>7001832700</a:nomeUsuario>
                <a:revisao>15076</a:revisao>
                <a:statusInstanciaProcesso>NaoIniciado</a:statusInstanciaProcesso>
            </iniciarExecucaoProcessoComTicketResult>
        </iniciarExecucaoProcessoComTicketResponse>
    </s:Body>
</s:Envelope> 
```

这是一个例外：

```
Unknown Property: KeyValue
java.lang.RuntimeException: Unknown Property: KeyValue
 at org.ksoap2.serialization.SoapSerializationEnvelope.readSerializable(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.readSerializable(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.readSerializable(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(Unknown Source)
 at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(Unknown Source)
 at org.ksoap2.SoapEnvelope.parse(Unknown Source)
 at org.ksoap2.transport.Transport.parseResponse(Unknown Source)
 at org.ksoap2.transport.HttpTransportSE.call(Unknown Source)
 at ServicoSegundaVia.iniciarExecucaoProcessoComTicket(ServicoSegundaVia.java:194)
 at ServicoSegundaVia.main(ServicoSegundaVia.java:25)
Exception in thread "main" java.lang.NullPointerException
 at ServicoSegundaVia.main(ServicoSegundaVia.java:30)
Java Result: 1 
```

这是我正在使用的代码：

```
// Calling code
public static DadosInstanciaProcessoDTO iniciarExecucaoProcessoComTicket(){
    //Get Ticket
    String ticket = "XYZ"; // Got from somewhere else

    //Conect on Service.......
    String sNAMESPACE   = "http://tempuri.org/";
    String sMETHOD_NAME = "iniciarExecucaoProcessoComTicket";
    String sURL         = "http://192.168.0.197:88/WFPExecutorService.svc";
    String sSOAPAACTION = "http://tempuri.org/IWFPExecutorService/iniciarExecucaoProcessoComTicket";

    SoapObject request = new SoapObject(sNAMESPACE, sMETHOD_NAME);

    request.addProperty("ticketAutenticacao", ticket);
    request.addProperty("idProcesso", "10074");

    ParametrosIniciais parIni = new ParametrosIniciais();
    parIni.add(new KeyValue("pnNome", "Person 1"));
    parIni.add(new KeyValue("pnNumero","7001832700"));
    parIni.add(new KeyValue("pnTipoSAP","Z005"));
    parIni.add(new KeyValue("CodCanal","5"));

    PropertyInfo info = new PropertyInfo();
    info.name = "parametrosIniciais";
    info.type = ParametrosIniciais.class;
    request.addProperty(info, parIni);

    //ENVELOPE
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.implicitTypes = true;
    envelope.setOutputSoapObject(request);

    envelope.addMapping(sNAMESPACE, "iniciarExecucaoProcessoComTicketResponse", IniciarExecucaoProcessoComTicketResponse.class);        
    envelope.addMapping(sNAMESPACE, "iniciarExecucaoProcessoComTicketResult", DadosInstanciaProcessoDTO.class);        
    envelope.addMapping("http://schemas.datacontract.org/2004/07/MyWS.WS.EXT", "atributos", Atributos.class);        
    envelope.addMapping("http://schemas.datacontract.org/2004/07/MyWS.WS.EXT", "KeyValue", KeyValue.class);        

    //Creates a conection, using a String URL..
    HttpTransportSE myHttpTransport = new HttpTransportSE(sURL);
    myHttpTransport.debug = true;

    try {
        myHttpTransport.call(sSOAPAACTION, envelope);
        IniciarExecucaoProcessoComTicketResponse response = (IniciarExecucaoProcessoComTicketResponse)envelope.bodyIn;
        DadosInstanciaProcessoDTO dto = response.getDadosIniExecProc();
        System.out.println(dto.getAtributo("pnNome"));
        return dto;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    return null;
} 
```

数据类型：

```
package data;

import java.util.Hashtable;
import java.util.Vector;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class Atributos extends Vector implements KvmSerializable {

    public Object getProperty(int i) { return this.get(i); }

    public int getPropertyCount() { return this.size(); }

    public void setProperty(int i, Object o) { this.add(o); }

    public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo pi) {
        pi.name = "KeyValue";
        pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
        pi.type = KeyValue.class;
    }
} 
```

--

```
package data;

import java.util.Hashtable;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class DadosExecucaoDTO  implements KvmSerializable {

    private Atributos atributos = null;
    private String sDominio = "";
    private Object oDs = null;
    private String sIdInstanciaProcesso = "";
    private String sIdProcesso = "";
    private Object oInstanciaEmExecucao = null;
    private String sNomeUsuario = "";
    private String sRevisao = "";
    private String sStatusInstanciaProcesso = "";

    public Object getProperty(int i) {
        switch (i) {
            case 0: return atributos;
            case 1: return sDominio;
            case 2: return oDs;
            case 3: return sIdInstanciaProcesso;                
            case 4: return sIdProcesso;
            case 5: return oInstanciaEmExecucao;
            case 6: return sNomeUsuario;
            case 7: return sRevisao;
            case 8: return sStatusInstanciaProcesso;
        }
        return null;    
    }

    public int getPropertyCount() {
        return 9;
    }

    public void setProperty(int i, Object o) {
        switch (i) {
            case 0: this.atributos = (Atributos)o; break;
            case 1: this.sDominio = o.toString(); break;                
            case 2: this.oDs = o; break;
            case 3: this.sIdInstanciaProcesso = o.toString(); break;                
            case 4: this.sIdProcesso = o.toString(); break;
            case 5: this.oInstanciaEmExecucao = o; break;
            case 6: this.sNomeUsuario = o.toString(); break;
            case 7: this.sRevisao = o.toString(); break;                
            case 8: this.sStatusInstanciaProcesso = o.toString(); break;                 
        }           
    }

    public void getPropertyInfo(int i, Hashtable hshtbl, PropertyInfo pi) {
        switch (i) {
            case 0:
                pi.name = "atributos"; pi.type = Atributos.class;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break;
            case 1:
                pi.name = "dominio"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break; 
            case 2:
                pi.name = "ds"; pi.type = PropertyInfo.OBJECT_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.DTO";
                break;                 
            case 3:
                pi.name = "idInstanciaProcesso"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break; 
            case 4:
                pi.name = "idProcesso"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break; 
            case 5:
                pi.name = "instanciaEmExecucao"; pi.type = PropertyInfo.OBJECT_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.DTO";
                break; 
            case 6:
                pi.name = "nomeUsuario"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break;             
            case 7:
                pi.name = "revisao"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break; 
            case 8:
                pi.name = "statusInstanciaProcesso"; pi.type = PropertyInfo.STRING_CLASS;
                pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                break; 
        }        
    }
} 
```

--

```
package data;

import java.util.Hashtable;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class IniciarExecucaoProcessoComTicketResponse implements KvmSerializable {
    private DadosInstanciaProcessoDTO iniciarExecucaoProcessoComTicketResult;

    public DadosInstanciaProcessoDTO getDadosIniExecProc() {
        return iniciarExecucaoProcessoComTicketResult;
    }

    public Object getProperty(int i) {
        switch (i) {
            case 0: return iniciarExecucaoProcessoComTicketResult;
        }
        return null;
    }

    public int getPropertyCount() {
        return 1;
    }

    public void setProperty(int i, Object o) {
        switch (i) {
            case 0: this.iniciarExecucaoProcessoComTicketResult = (DadosInstanciaProcessoDTO)o; break;
        }
    }

    public void getPropertyInfo(int index, Hashtable hshtbl, PropertyInfo info) {
        switch (index) {
            case 0:
                info.type = DadosInstanciaProcessoDTO.class;
                info.name = "iniciarExecucaoProcessoComTicketResult";
                break;
        }
    }
} 
```

--

```
package data;

import java.util.Hashtable;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class KeyValue implements KvmSerializable {

    private String sKey = "";
    private String sValue = "";

    public KeyValue(String k, String v){
        this.sKey = k; this.sValue = v;
    }

    public Object getProperty(int i) {
        switch (i) {
            case 0: return sKey;
            case 1: return sValue;
        }
        return null;
    }

    public int getPropertyCount() {
        return 2;
    }

    public void setProperty(int i, Object o) {
        switch (i) {
            case 0: this.sKey = o.toString(); break;
            case 1: this.sValue = o.toString(); break;                
        }       
    }

    public void getPropertyInfo(int i, Hashtable hshtbl, PropertyInfo pi) {
        switch (i) {
            case 0:
                pi.name = "key"; pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                pi.type = PropertyInfo.STRING_CLASS;
                break;
            case 1:
                pi.name = "value"; pi.namespace = "http://schemas.datacontract.org/2004/07/MyWS.WS.EXT";
                pi.type = PropertyInfo.OBJECT_CLASS;
                break;                
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:34:53.973

You must add the getters and setters to all the classes that implement `KvmSerializable`.

# c# - 用户控件上的 aspx OnSaveStateComplete 等效项

> ID：11164104
> 
> 赞同：1
> 
> 时间：2012-06-22T21:04:19.470
> 
> 标签：c#, asp.net, user-controls, code-behind

在我的 aspx 中，我有：

```
protected override void OnSaveStateComplete(EventArgs e)
{
    int pagecount = rvReports.LocalReport.GetTotalPages();
} 
```

不，我希望能够在我的用户控件（ascx）代码隐藏中做同样的事情，我试过了

```
protected virtual void OnSaveStateComplete(EventArgs e)
{
    int pagecount = rvReports.LocalReport.GetTotalPages();
} 
```

但它什么也没做，因为 ascx 我应该使用其他东西而不是 OnSaveStateComplete 吗？

# php - 使用 PHP、MySQL 和 XML 导入大数据

> ID：11164105
> 
> 赞同：0
> 
> 时间：2012-06-22T21:04:19.330
> 
> 标签：php, mysql, xml

我正在构建一个脚本，将数据从上传的 XML 文件导入 MySQL，但不是直接导入。该函数本身只有一个查询，但它总是超时。该查询必须连接两个表才能找到一个 ID，该 ID 将与 XML 数据一起插入到第三个表中。

这是执行此操作的函数：

```
public function imprtTVLApi($file) {
    global $db, $user;
    $ext = pathinfo($file, PATHINFO_EXTENSION);
    $message = '';
    $text = '';
    $streaming_websites = array(
        'megavideo.com' => '1',
        'vidxden' => '2',
        'videobb.com' => '4',
        'veevr.com' => '5',
        'vureel.com' => '6',
        '2gb-hosting.com' => '7',
        'videoweed.com' => '9',
        'divxhosting.net' => '11',
        'movshare.net' => '12',
        'novamov.com' => '13',
        'ovfile.com' => '14',
        'videozer.com' => '15',
        'putlocker.com' => '16',
        'sockshare.com' => '17',
        'videoweed.es' => '18',
        'uploadc.com' => '19',
        'wupload.com' => '20',
        'vidbux.com' => '21',
        'veoh.com' => '22',
        'mixturevideo.com' => '23',
        'youtube.com' => '24',
        'filebox.com' => '25',
        'filenuke.com' => '26',
        'hostingbulk.com' => '27',
        'zalaa.com' => '28',
        'nowvideo.eu' => '29',
        'vidhog.com' => '30',
        'bitshare.com' => '31',
        'muchshare.net' => '32',
        'allmyvideos.net' => '33',
        'gorillavid.in' => '34',
        'daclips.in' => '35',
        'movpod.in' => '36',
        'stream2k.eu' => '37'
    );
    if ( $ext == "xml") :
        $tv  = new DomDocument();
        $tv->recover = TRUE;
        $tv->load($file) or die("Could not load the file! " .$file);
        $tvSearch = $tv->getElementsByTagName( "url" );
        $count = 0;

        foreach( $tvSearch as $tv ) {   

            // name
            $names = $tv->getElementsByTagName('name');
            $name = $names->item(0)->nodeValue;

            // seasons
            $seasons = $tv->getElementsByTagName('season');
            $season = $seasons->item(0)->nodeValue;

            // episode
            $episodes = $tv->getElementsByTagName('episode');
            $episode = $episodes->item(0)->nodeValue;

            // episode
            $links = $tv->getElementsByTagName('loc');
            $link = $links->item(0)->nodeValue;

            $user = $user->uid;
            $url  = $db->escape($link);
            $stream1 = $this->getHostFromURL($url);
            $stream = $streaming_websites[$stream1];
            $added = time();
            $status = "ok";
            $sql = 'SELECT e.id AS epid FROM ' .$this->epTable. ' AS e INNER JOIN ' .$this->tvTable. ' AS t ON e.show_ID = t.id WHERE t.title = "' .$name. '" AND e.season = "' .$season. '" AND e.episode = "' .$episode. '" LIMIT 1';
            $row = $db->first($sql);

            if( isset($row['epid'])) {

                $data = array(
                    'user_ID' => $user,
                    'url' => sanitize($url),
                    'stream_ID' => $stream,
                    'e_ID' => intval($row['epid']),
                    'added' => intval($added),
                    'status' => $status
                );

                $text .= "INSERT IGNORE INTO " .$this->lkTable. " (`user_ID`, `url`, `stream_ID`, `e_ID`, `added`, `status`) VALUES ('" .$data['user_ID']. "', '" .$data['url']. "', '" .$data['stream_ID']. "', '" .$data['e_ID']. "', '" .$data['added']. "', '" .$data['status']. "')";

            } else {
                $message = "Show not found";
            }
            $count++;

        }
        $myFile =  "export_" .$user->uid. "_" .time(). ".sql";
        $fh = fopen($myFile, 'w') or die("can't open file");
        $stringData = $text;
        fwrite($fh, $stringData);
        fclose($fh);
        parse_mysql_dump($myFile);
        unlink($myFile);
        $message = "Links: " .$count. ", Your links were added and they will show up on the site in a minute!";
    else :
        $message = "Incorrect file format! Must be XML!";
    endif;
    print($message);
} 
```

这是数据库结构：

```
--
-- Table structure for table `episodes2`
--

CREATE TABLE IF NOT EXISTS `episodes2` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(80) NOT NULL DEFAULT 'Untitled',
  `show_ID` int(11) unsigned NOT NULL,
  `episode` bigint(3) unsigned NOT NULL DEFAULT '1',
  `season` bigint(3) unsigned NOT NULL DEFAULT '1',
  `description` text NOT NULL,
  `thumbnail` varchar(100) NOT NULL,
  `tvragepage` varchar(80) NOT NULL,
  `airdate` int(15) unsigned DEFAULT '0',
  `added` datetime DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2000117 ;

-- --------------------------------------------------------

--
-- Table structure for table `tvshows2`
--

CREATE TABLE IF NOT EXISTS `tvshows2` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `imdbid` varchar(10) CHARACTER SET latin1 NOT NULL,
  `tvrageid` varchar(125) CHARACTER SET latin1 NOT NULL,
  `poster` varchar(256) CHARACTER SET latin1 NOT NULL,
  `slider` varchar(225) NOT NULL,
  `title` varchar(128) NOT NULL,
  `tagline` varchar(128) CHARACTER SET latin1 NOT NULL,
  `plot` text CHARACTER SET latin1 NOT NULL,
  `year` year(4) NOT NULL,
  `released` varchar(18) CHARACTER SET latin1 NOT NULL,
  `country` varchar(256) CHARACTER SET latin1 NOT NULL,
  `channel` smallint(3) NOT NULL DEFAULT '0',
  `runtime` char(6) CHARACTER SET latin1 NOT NULL,
  `storyline` text CHARACTER SET latin1 NOT NULL,
  `genres` varchar(256) CHARACTER SET latin1 NOT NULL,
  `actors` text CHARACTER SET latin1 NOT NULL,
  `votes` varchar(10) CHARACTER SET latin1 NOT NULL,
  `timezone` varchar(10) CHARACTER SET latin1 NOT NULL,
  `oscars` tinyint(4) NOT NULL,
  `seasons` int(4) NOT NULL,
  `mpaa` enum('TV-14','TV-Y','TV-PG','TV-MA') CHARACTER SET latin1 NOT NULL DEFAULT 'TV-14',
  `trivia` text CHARACTER SET latin1 NOT NULL,
  `status` enum('never_aired','cancelled_ended','returning_series','new_series','on_hiatus','tbd','pilot_rejected','in_development','pilot_ordered') CHARACTER SET latin1 NOT NULL DEFAULT 'returning_series',
  `permalink` varchar(125) NOT NULL,
  `classification` varchar(35) CHARACTER SET latin1 NOT NULL DEFAULT 'Unavailable',
  `airtime` varchar(150) CHARACTER SET latin1 NOT NULL DEFAULT 'Unavailable',
  `airday` varchar(80) CHARACTER SET latin1 NOT NULL DEFAULT 'Monday',
  `ended` varchar(20) CHARACTER SET latin1 NOT NULL,
  UNIQUE KEY `id_2` (`id`),
  UNIQUE KEY `permalink` (`permalink`),
  KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=31994 ;

-- --------------------------------------------------------

--
-- Table structure for table `tv_links`
--

CREATE TABLE IF NOT EXISTS `tv_links` (
  `link_ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_ID` int(11) NOT NULL DEFAULT '0',
  `url` varchar(225) CHARACTER SET latin1 NOT NULL,
  `stream_ID` int(11) NOT NULL,
  `e_ID` int(11) NOT NULL DEFAULT '1',
  `added` int(11) DEFAULT NULL,
  `status` enum('ok','broken','deleted','pending') CHARACTER SET latin1 NOT NULL DEFAULT 'ok',
  PRIMARY KEY (`link_ID`),
  UNIQUE KEY `url` (`url`),
  KEY `e_ID` (`e_ID`)
) ENGINE=InnoDB 
```

循环创建 .sql 文件后，数据将发送到 MySQL。这里的关键是找到将在链接表中导入的剧集 ID。

您对如何使其更快或有任何想法有什么建议吗？

# jquery - Prettyphoto 在 iframe 中显示全尺寸图像

> ID：11164116
> 
> 赞同：0
> 
> 时间：2012-06-22T21:04:46.443
> 
> 标签：jquery, iframe, prettyphoto

我有一个网站，其中缩略图位于 iframe 中，目前当他们单击缩略图时，它只打开与 iframe 一样大，我如何制作它，所以当单击图像时，它会显示为整个网站的全屏，而不仅仅是iframe 区域？我正在使用 prettyphoto 脚本

这是我上传以显示问题的缩略图页面，当我单击缩略图时，它仅以 iframe 的大小全屏显示？（我的内容区）

[http://callofdutylink.freehostia.com/](http://callofdutylink.freehostia.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:48:48.863

您不能将 iframe 中的任何内容从框架中取出。iframe 是位于其中的所有对象的限制。

而不是 iframe 使用 DIV 和 JQUERY 来做你现在正在做的事情

```
<div id="DynamicFrame"></div>

$('#DynamicFrame').load('htmlPageToLoad.html'); 
```

# asp.net - ASP.NET - 关闭浏览器选项卡上的注销用户

> ID：11164119
> 
> 赞同：0
> 
> 时间：2012-06-22T21:05:22.700
> 
> 标签：asp.net, forms, authentication, forms-authentication

当浏览器选项卡关闭时，我需要在 ASP.NET 中可靠地注销经过身份验证的用户。推荐的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:09:16.820

通常，您会在会话结束时执行注销逻辑。但是，如果您必须检测页面何时关闭，请使用：

```
<body onunload="performMyLogoutLogic();">
...
...
</body> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T05:47:51.110

您可以使用通用处理程序来终止会话并在卸载之前调用它，如下所示：

```
function CloseSession( )
{
    location.href = 'KillSession.ashx?task=1'; 
}
window.onbeforeunload = CloseSession; 
```

在您的 KillSession.ashx 中执行此操作

```
 public void ProcessRequest(HttpContext context)
            {
                if(!String.IsNullOrWhiteSpace(Request.QueryString["task"].toString()))
                {
                 if(Request.QueryString["task"].toString()=="1")
                  {
                    Session["User"]==null;
                    context.Response.ContentType = "text/plain";
                    context.Response.Write("Good Bye!");
                   }
                }
            } 
```

# jquery - jQuery 迷你图遍历 div

> ID：11164122
> 
> 赞同：0
> 
> 时间：2012-06-22T21:05:48.213
> 
> 标签：jquery, javascript, sparklines

我有一个 div 数组，我想遍历每个 div 并将其传递给迷你图。像这样：

```
var divs = $("#wrapper>div");
var data = ["1:2:3:4", "4:3:2:3:1"];
var i;

for(i = 0; i<data.length; i++){
   divs[i].sparkline(data[i]);
} 
```

我收到错误“divs[i].sparkline”不是函数。但如果我这样做

```
divs.sparkline([1,2,3,4]); 
```

很好，所有 div 都得到了线图，但数据相同。

有没有人有任何建议，但在迭代 div 时如何使用迷你图？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:13:46.610

尝试更改`divs[i]`为`$(divs[i])`

```
for(i = 0; i<data.length; i++){
   $(divs[i]).sparkline(data[i]);
} 
```

`sparkline`jQuery 对象上的作品，`divs[i]`将是 dom 节点。所以试着把它包在里面`$(..)`。

# php - 如何在php中构建一个json返回？

> ID：11164124
> 
> 赞同：4
> 
> 时间：2012-06-22T21:06:01.617
> 
> 标签：php, ajax, arrays, json

我有一个看起来像这样的功能。

```
function startChatSession($items) {

    foreach ($test as $chatbox => $void) {
            $items .= $this->chatBoxSession($chatbox);
        }

    if ($items != '') {
        $items = substr($items, 0, -1);
    }

    header('Content-type: application/json');
    ?>
    {
        "username": "<?php echo $_SESSION['username'];?>",
       "items": [
            <?php echo $items;?>
        ]
    }

    <?php
    exit(0);
} 
```

我对此功能的第二部分感兴趣。我想把它翻译成这样的：

```
 echo json_encode(array(
            'username'=>$_SESSION['username'], 
            'items'=>$items
        )); 

    exit; 
```

这种作品，但不完全。

响应应如下所示：

```
{
    "username": "johndoe",
    "items": [{
        "s": "1",
        "f": "janedoe",
        "m": "dqwdqwd"
    }, {
        "s": "1",
        "f": "janedoe",
        "m": "sdfwsdfgdfwfwe"
    }, {
        "s": "1",
        "f": "janedoe",
        "m": "werwefgwefwefwefweg"
    }]
} 
```

就我而言，它看起来像：

```
{
    "username": "johndoe",
    "items": "\t\t\t\t\t   {\r\n\t\t\t\"s\": \"1\",\r\n\t\t\t\"f\": \"babydoe\",\r\n\t\t\t\"m\": \"test\"\r\n\t   },\t\t\t\t\t   {\r\n\t\t\t\"s\": \"1\",\r\n\t\t\t\"f\": \"\",\r\n\t\t\t\"m\": \"\"\r\n\t   }"
} 
```

有任何想法吗？

谢谢

编辑：

如果我转储`$items`i 类似的东西：

```
{
    s: 1,
    f: babydoe,
    m:  test
}, {
    s: 1,
    f: babydoe,
    m:  test
}, {
    s:1,
    f: babydoe,
    m:  test
}, {
    s: 1,
    f: babydoe,
    m:  test
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:09:41.370

尝试这个：

```
 echo json_encode(array(
        'username'=>$_SESSION['username'], 
        'items'=>array($items)
    )); 
```

您需要一个多级数组。

例如，参见[键盘。](http://codepad.org/ZCD2aLlP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:17:21.123

您的 $items 数组应如下所示：

```
<?php
$items = array(
  0 => array('s'=>1, 'f'=>'janedoe', 'm'=>'dqwdqwd'),
  1 => array('s'=>1, 'f'=>'janedoe', 'm'=>'sdfwsdfgdfwfwe'),
  2 => array('s'=>1, 'f'=>'janedoe', 'm'=>'werwefgwefwefwefweg')
);

echo json_encode(array(
        'username'=>$_SESSION['username'], 
        'items'=>$items
    ));
?> 
```

[http://codepad.org/mZk4hsKq](http://codepad.org/mZk4hsKq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:00:23.130

改变

```
$items = substr($items, 0, -1); 
```

至：

```
foreach($items as $index => $d){
$items[$index] = substr($d, 0, -1);
} 
```

# java - 限制 JTable 中的行选择

> ID：11164130
> 
> 赞同：2
> 
> 时间：2012-06-22T21:06:33.883
> 
> 标签：java, swing, jtable, listselectionlistener

有没有一种简单的方法来限制 JTable 中行的总选择？我的意思是我想让用户使用 shift 和 ctrl 来选择最多 X 行。如果他再次单击一行，它将取消所有选择。排序它当前的行为方式，但同时限制所选行的总数。

这是我当前的实现，我对如何以图形方式限制选择一无所知。

```
public class RoomsListView extends AbstractViewPanel {

public RoomsListView(DefaultController controller)
{
    this.controller = controller;
    initUI();
}

private void initUI() 
{
    tableT = new JTable(RoomsModel.getInstance());
    sorter = new TableRowSorter<RoomsModel>(RoomsModel.getInstance());
    tableT.setRowSorter(sorter);

    tableT.setPreferredScrollableViewportSize(new Dimension(CUSTOM_TABLE_WIDTH, CUSTOM_TABLE_HEIGHT));

    tableT.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            rowClickedPerformed(e);
        }
    });
}

private void rowClickedPerformed(MouseEvent e) 
{

}

public void modelPropertyChange(PropertyChangeEvent evt) 
{
}

public JTable getTable()
{
    return tableT;
}

private final int CUSTOM_TABLE_WIDTH = -1;
private final int CUSTOM_TABLE_HEIGHT = 150;

private JTable tableT;
private DefaultController controller;
private TableRowSorter<RoomsModel> sorter; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:11:28.627

对于您的情况

```
.addMouseListener(new MouseAdapter() {
   public void mouseClicked(MouseEvent e) {
     int row = m_table.getSelectedRow();
     int col = m_table.getSelectedColumn();
  }
}); 
```

只需检查`last - first < X`

或者像这样

```
SelectionListener listener = new SelectionListener(table);
table.getSelectionModel().addListSelectionListener(listener);
table.getColumnModel().getSelectionModel()
    .addListSelectionListener(listener);

public class SelectionListener implements ListSelectionListener {
    JTable table;

    // It is necessary to keep the table since it is not possible
    // to determine the table from the event's source
    SelectionListener(JTable table) {
        this.table = table;
    }
    public void valueChanged(ListSelectionEvent e) {
        // If cell selection is enabled, both row and column change events are fired
        if (e.getSource() == table.getSelectionModel()
              && table.getRowSelectionAllowed()) {
            // Column selection changed
            int first = e.getFirstIndex();
            int last = e.getLastIndex();
        } else if (e.getSource() == table.getColumnModel().getSelectionModel()
               && table.getColumnSelectionAllowed() ){
            // Row selection changed
            int first = e.getFirstIndex();
            int last = e.getLastIndex();
        }

        if (e.getValueIsAdjusting()) {
            // The mouse button has not yet been released
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T05:05:09.457

这可能有助于将行选择限制为一个选择

> table.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);

# math - 编译和链接 KISSFFT

> ID：11164131
> 
> 赞同：2
> 
> 时间：2012-06-22T21:06:35.353
> 
> 标签：math, linker, math.h, kissfft

我在编译和链接“开箱即用”的kissfft库时遇到了一个新手问题。我已经下载了 Kissfft 库并将其解压缩到一个测试目录。进入目录并运行“make testall”后，我收到以下错误，看起来 std c 数学库没有正确链接。

```
sharkllama@quaaludes:~/KISSFFT/kiss_fft129$ make testall
# The simd and int32_t types may or may not work on your machine 
make -C test DATATYPE=simd CFLAGADD="" test
make[1]: Entering directory `/home/sharkllama/KISSFFT/kiss_fft129/test'
cd ../tools && make all
make[2]: Entering directory `/home/sharkllama/KISSFFT/kiss_fft129/tools'
cc -o fft_simd -Wall -O3 -W -Wall -Wstrict-prototypes -Wmissing-prototypes -Waggregate-return -Wcast-align -Wcast-qual -Wnested-externs -Wshadow -Wbad-function-cast -Wwrite-strings  -I.. -DUSE_SIMD=1 -msse -lm ../kiss_fft.c fftutil.c kiss_fftnd.c kiss_fftr.c kiss_fftndr.c
/tmp/ccFbS0yK.o: In function `kiss_fft_alloc':
kiss_fft.c:(.text+0xd17): undefined reference to `sincos'
kiss_fft.c:(.text+0xd6b): undefined reference to `floor'
kiss_fft.c:(.text+0xe07): undefined reference to `sincos'
kiss_fft.c:(.text+0xeba): undefined reference to `sqrt'
/tmp/ccbYqDcf.o: In function `kiss_fftr_alloc':
kiss_fftr.c:(.text+0x118): undefined reference to `sincos'
kiss_fftr.c:(.text+0x188): undefined reference to `sincos'
collect2: ld returned 1 exit status
make[2]: *** [fft_simd] Error 1
make[2]: Leaving directory `/home/sharkllama/KISSFFT/kiss_fft129/tools'
make[1]: *** [tools] Error 2
make[1]: Leaving directory `/home/sharkllama/KISSFFT/kiss_fft129/test'
make: *** [testall] Error 2
sharkllama@quaaludes:~/KISSFFT/kiss_fft129$ 
```

显然，由于包含了 -lm 选项，makefile 正试图链接到数学库。无法理解这一点。我以前编译过许多正确链接到数学库的程序。任何帮助，将不胜感激。谢谢，-B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:55:42.803

Kissfft 并不是像其他库那样需要制作和安装的东西。如果你需要复杂的fft，那么你需要做的就是在你的项目中编译kiss_fft.c。如果您需要更专业的东西，例如多维或真正的 ffts，那么您还应该从 tools 目录编译适当的文件。

make 目标主要用于 Kissfft 的开发测试。进行该测试有很多系统要求。除非您更改 Kissfft 的内部结构，否则您不需要使用这些测试目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-18T12:01:14.563

只是想分享一个关于如何使用来自[Kissfft](https://github.com/mborgerding/kissfft)的 1D FFT/IFFT 构建简单应用程序的实际示例：

```
g++ example.cpp -o example -I kissfft kissfft/kiss_fft.c 
```

**示例.cpp**：

```
#include "kissfft/kiss_fft.h"

int main()
{
    // initialize input data for FFT
    float input[] = { 11.0f, 3.0f, 4.05f, 9.0f, 10.3f, 8.0f, 4.934f, 5.11f };
    int nfft = sizeof(input) / sizeof(float); // nfft = 8

    // allocate input/output 1D arrays
    kiss_fft_cpx* cin = new kiss_fft_cpx[nfft];
    kiss_fft_cpx* cout = new kiss_fft_cpx[nfft];

    // initialize data storage
    memset(cin, 0, nfft * sizeof(kiss_fft_cpx));
    memset(cout, 0, nfft * sizeof(kiss_fft_cpx));

    // copy the input array to cin
    for (int i = 0; i < nfft; ++i)
    {
        cin[i].r = input[i];
    }

    // setup the size and type of FFT: forward
    bool is_inverse_fft = false;
    kiss_fft_cfg cfg_f = kiss_fft_alloc(nfft, is_inverse_fft, 0, 0); // typedef: struct kiss_fft_state*

    // execute transform for 1D
    kiss_fft(cfg_f, cin , cout);

    // transformed: DC is stored in cout[0].r and cout[0].i
    printf("\nForward Transform:\n");
    for (int i = 0; i < nfft; ++i)
    {
        printf("#%d  %f %fj\n", i, cout[i].r,  cout[i].i);
    }

    // setup the size and type of FFT: backward
    is_inverse_fft = true;
    kiss_fft_cfg cfg_i = kiss_fft_alloc(nfft, is_inverse_fft, 0, 0);

    // execute the inverse transform for 1D
    kiss_fft(cfg_i, cout, cin);

    // original input data
    printf("\nInverse Transform:\n");
    for (int i = 0; i < nfft; ++i)
    {
        printf("#%d  %f\n", i, cin[i].r / nfft); // div by N to scale data back to the original range
    }

    // release resources
    kiss_fft_free(cfg_f);
    kiss_fft_free(cfg_i);
    delete[] cin;
    delete[] cout;

    return 0;
} 
```

要使用 2D 变换，请包含适当的标头`"kissfft/tools/kiss_fftnd.h"`并将构建命令调整为：

```
g++ example.cpp -o example -I kissfft kissfft/kiss_fft.c kissfft/tools/kiss_fftnd.c 
```

够简单！

# android - RESTful Web 服务的最佳实践

> ID：11164141
> 
> 赞同：0
> 
> 时间：2012-06-22T21:07:27.487
> 
> 标签：android, web-services, rest, ios5

试图在网上搜索并没有走得很远，所以我在这里问。人们在构建具有宁静服务的网站时遇到了哪些最佳实践？将它们合并为一个或将它们作为两个单独的应用程序是好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:50:45.003

虽然这取决于很多事情什么是最好的，但我可能会做的是，我将拥有一组“后端”功能来做“业务”的事情，而网络应用程序将调用这些函数“直接”，它们也将作为 Web 服务调用导出。在 Java 中，有很多方便的框架使这变得非常容易——比如 Spring + Jackson——我相信其他语言也是如此。

# python - Return 语句的奇怪 Try-Except-Else-Finally 行为

> ID：11164144
> 
> 赞同：106
> 
> 时间：2012-06-22T21:07:35.780
> 
> 标签：python, try-except

这是一些行为特殊的代码。这是我编写的行为的简化版本。这仍然会证明奇怪的行为，我对为什么会发生这种情况有一些具体的问题。

我在 Windows 7 上使用 Python 2.6.6。

```
def demo1():
    try:
        raise RuntimeError,"To Force Issue"
    except:
        return 1
    else:
        return 2
    finally:
        return 3

def demo2():
    try:
        try:
            raise RuntimeError,"To Force Issue"
        except:
            return 1
        else:
            return 2
        finally:
            return 3
    except:
        print 4
    else:
        print 5
    finally:
        print 6 
```

结果：

```
>>> print demo1()
3
>>> print demo2()
6
3 
```

*   为什么演示一返回 3 而不是 1？
*   为什么演示 2 打印 6 而不是打印 6 w/4 或 5？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-06-22T21:09:04.977

因为`finally`语句**保证**会被执行（好吧，假设没有断电或 Python 无法控制的任何事情）。这意味着在函数返回之前，它必须运行 finally 块，该块返回一个不同的值。

[Python 文档](http://docs.python.org/reference/compound_stmts.html#the-try-statement)状态：

> 当在 try…finally 语句的 try 套件中执行 return、break 或 continue 语句时，finally 子句也会在“退出时”执行。</p>
> 
> 函数的返回值由最后执行的 return 语句决定。由于 finally 子句总是执行，因此在 finally 子句中执行的 return 语句将始终是最后一个执行的语句：

这意味着当您尝试返回时，将`finally`调用该块，返回它的值，而不是您本来拥有的值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-31T12:05:40.473

执行顺序为：

1.  try block all 正常完成 -> finally block -> 函数结束
2.  try 块运行并进入异常 A -> finally 块 -> 函数结束
3.  try 块生成返回值并调用 return -> finally 块 -> 弹出返回值 -> 函数结束

因此，finally 块中的任何返回都会提前结束这些步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-29T12:35:56.837

请注意，已经有[PEP601](https://www.python.org/dev/peps/pep-0601/)禁止从 finally 子句中返回语句，但它已被拒绝。然而，它已被添加到[PEP8](https://www.python.org/dev/peps/pep-0008/#id51)的样式指南中，应该避免使用它。

# iphone - “完成”按钮在模态视图中不可见

> ID：11164146
> 
> 赞同：1
> 
> 时间：2012-06-22T21:07:36.583
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller, modalviewcontroller

我试图从我的一个视图中呈现一个模态视图。演示者视图已从自定义视图显示为模式。我的问题是我无法在新的模态视图中看到“完成”按钮。下面是我的代码。我错过了什么吗？

```
 UIViewController *aViewController = [[UIViewController alloc] init];
    UINavigationController *aNavigationController = [[[UINavigationController alloc] initWithRootViewController:aViewController] autorelease];
    [aNavigationController.navigationBar setBarStyle:UIBarStyleBlack];
    UIBarButtonItem *aBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissMe)];
    [aNavigationController.navigationItem  setLeftBarButtonItem:aBarButtonItem];
    MyView *aView = [[MyView alloc] initWithFrame:self.view.frame];
    [aViewController.view addSubview:aView];
    [self presentModalViewController:aNavigationController animated:YES];
    [aViewController release];

- (void)dismissMe {
    [self dismissModalViewControllerAnimated:YES];
} 
```

![在此处输入图像描述](../Images/4e7265f26080bc79b67ad5ba9fb8be26.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:17:01.057

如果我理解这个问题，你可以尝试这样的解决方案：在你想从实际视图中显示的模态视图控制器的or方法中
写下这个：`viewDidLoad``init`

```
UIBarButtonItem *done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self selector:@selector(dismissMe)];
self.navigationController.leftBarButtonItem = done; 
```

并实现你`dismissMe`的方法。
取而代之的是，在演示者控制器中写下您想要呈现新模态控制器的位置：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controllerYouWantToShow];
[self presentModalViewController:navController animated:YES]; 
```

显然，`controllerYouWantToShow`是指向您要显示的视图控制器的指针/变量...我通常这样做是为了解决像您这样的问题...但是，请检查代码，因为我尚未对其进行测试:)
希望对您有所帮助！

# html - 如何居中和下移一些文本？

> ID：11164147
> 
> 赞同：-1
> 
> 时间：2012-06-22T21:07:45.640
> 
> 标签：html, css, alignment, block, center

我正在尝试将底部导航栏与

```
#main-nav{ margin-left: auto; margin-right: auto;} 
```

但它不起作用。我什至`<center></center>`在 html 文件中做了，它没有居中。

这就是它的样子：http: [//jsfiddle.net/EZJwM/8/](http://jsfiddle.net/EZJwM/8/)

我认为这与它有关`&copy; 2012 Bin.xxx, All Rights Reserved`，并且它位于同一个街区或其他地方。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:12:08.373

尝试添加这个：

> 显示：内联块；*显示：块；缩放：1；文本对齐：中心；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:09:43.773

试试这个：

```
#main-nav{ margin-left: auto; margin-right: auto;text-align:center} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:44:02.590

你可以试试这个标记和css

```
<section class="container"><nav id="main-nav">&copy; 2012 Bin.xxx, All Rights Reserved</nav></section>

.container { width: 100%}
#main-nav{ width:50%; margin: 0 auto;} 
```

希望它会帮助你！

# python - Python 闭包 + 全局陌生

> ID：11164149
> 
> 赞同：10
> 
> 时间：2012-06-22T21:07:55.287
> 
> 标签：python

我希望这个小片段能打印出*“为什么这不起作用？”* 有人可以帮我理解为什么这不能按我的预期工作吗？如果这很重要，我正在使用 Python 2.6。

```
class WhyDoesntThisWork(object):
  def outer(self):
    acc = ''
    def inner(msg):
      global acc
      acc = acc + msg
    inner("Why doesn't")
    inner(" this work?")
    print acc
WhyDoesntThisWork().outer() 
```

*   如果我包含`global`声明，我会得到一个`NameError: global name 'acc' is not defined` .
*   如果我不包括`global`声明，我会得到一个`UnboundLocalError: local variable 'acc' referenced before assignment`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T22:19:20.583

I don't know why so many comments above contain the correct answer and no one dared to write an actual answer, so I'll do it hereby.

```
class ThisWorksNow(object):
  def outer(self):
    acc = []
    def inner(msg):
      acc.append(msg)
    inner("Why doesn't")
    inner(" this work?")
    print "".join(acc)
ThisWorksNow().outer() 
```

What is the difference?

Assigning a name to an object which is in the closure doesn't work in Python 2.x, because the Py3 keyword `nonlocal` is missing, so we have to find a workaround.

If we have to keep the name-to-object-binding constant, we have to change something else. In this case, it is the object, to which we add the content to be added.

The `print` line is not very elegant; maybe an object which prints its contents concatenated might be more suitable.

```
class StringBuilder(list): # class name stolen from Java
    def __str__(self):
        """this makes the object printable in a way which represents the concatenated string"""
        return "".join(self)
    @property
    def string(self):
        """this gives us a property which represents the concatenated string"""
        return "".join(self)
 # use whatever suits you better, one or both 
```

With this, we can do that:

```
class ThisWorksNow(object):
  def outer(self):
    acc = StringBuilder()
    def inner(msg):
      acc.append(msg)
    inner("Why doesn't")
    inner(" this work?")
    print acc
    print acc.string # depending on what you take above
ThisWorksNow().outer() 
```

Edit (append): Why does `global` not work?

We could achieve this with `global` as well, with 2 downsides.

1.  `acc` would have to be made global on both places we use it

    ```
    class WhyDoesntThisWork(object):
      def outer(self):
        global acc
        acc = ''
        def inner(msg):
          global acc
          acc = acc + msg 
    ```

    Hereby we "lift" both `acc` occurrences to "`global`" level.

2.  `acc` could be modified from outside.

    If we do `global acc` somewhere else, or we use `acc` on module level, our process can be tampered with. This should be avoided.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:32:54.690

您可以创建一个如下所示的辅助闭包类，以将变量显式标记为闭包。不确定这样的实用程序是否已经存在。

```
class closure:
    def __init__(self, val = None):
        self.val = val
    def __call__(self, val = None):
      if val:
        self.val = val
      return self.val
class WhyDoesntThisWork(object):
  def outer(self):
    acc = closure('')
    def inner(msg):
      acc(acc() + msg)
    inner("Why doesn't")
    inner(" this work?")
    print acc
WhyDoesntThisWork().outer() 
```

# php - MySQL（和php）中实体的修订跟踪框架？

> ID：11164151
> 
> 赞同：1
> 
> 时间：2012-06-22T21:07:59.623
> 
> 标签：php, mysql, database, versioning

我必须在 MySQL 和 PHP 中设置一个 CMS 来为显示信息的网站提供动力。该网站不会遇到太多流量。为简单起见，假设该网站将显示有关学校和学生的信息。

我正在考虑的要求之一是数据库中某些实体的版本控制。以下是我肯定需要的一些实体：

*   学校 - 大约有 100 所学校
*   School_Pictures - 每个学校都有很多图片
*   学生 - 可以有 100 000 名学生，每个学生只属于一所学校

我知道，当内容编辑者想要编辑学校的信息时，他很可能会编辑学校实体中的记录和学校的所有图片。所以学校信息和学校图片都应该是版本控制的，在内容编辑明确发布school和school_pictures中的相关记录之前，什么都不应该直播。但是，学生信息和他们去的学校不应受到版本控制 School 和 School_pictures 的影响。

我在其他地方读到，在 SQL Server 2008 中，他们有 CDC 之类的东西。MySQL是否有等价物？或者 CDC 相关技术是否适用于我的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:26:25.363

我不认为 MySQL 以如此友好的形式存在，但是您可以使用触发器相对轻松地[构建等效的 CDC。](http://www.artfulsoftware.com/infotree/Transaction%20time%20validity%20in%20MySQL.pdf)

另请注意，CDC 并非旨在处理人工批准的更改，即使使用 SQL Server 2008 仍将在您的应用程序逻辑中实现。

# jquery - 使用缩略图助手手动打开 fancyBox

> ID：11164153
> 
> 赞同：0
> 
> 时间：2012-06-22T21:08:09.140
> 
> 标签：jquery, fancybox, fancybox-2

我想制作一个只有一张预览图片和缩略图助手的画廊。我使用了作者为画廊提供的片段，只有一张预览图片，然后我添加了显示缩略图助手的代码，*[以这种方式](http://jsfiddle.net/loru88/9wAdV/365/)*，但它不显示缩略图....我想是因为当你手动打开fancybox你没有指定缩略图在哪里，怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:58:29.757

正如 JFK 所提到的，您需要在页面 DOM 中拥有 jQuery 和所有 FancyBox 文件！

在你可以尝试这样的事情来加载 FancyBox 元素的点击事件之后，whois ID 是“myButton”（例如）

```
$("#myButton").bind("click", function() {

    var jumpto = 0, //Change to load non zeroth Image
        data = [
        {   
            "href": "http://farm2.staticflickr.com/1019/3174174579_e2620a6c75_o.jpg",
            "title": "Kongen og Dronningen, Bispen, Norway",
            "thumbnail": "http://farm2.staticflickr.com/1019/3174174579_0c6a63ca70_s.jpg"
        },
        {   
            "href": "http://farm9.staticflickr.com/8029/8067360578_1c86b97745_b.jpg",
            "title": "Make my dream come true...",
            "thumbnail": "http://farm9.staticflickr.com/8029/8067360578_1c86b97745_s.jpg"
        },
        {   
            "href": "http://farm8.staticflickr.com/7134/7104102841_377648a7bb_b.jpg",
            "title": "Twilight",
            "thumbnail": "http://farm8.staticflickr.com/7134/7104102841_377648a7bb_s.jpg"
        }
    ];

    $.fancybox.open(data, {
        index: jumpto,
        padding: 10,
        transitionIn: 'none',
        transitionOut: 'none',
        type: 'image',
        changeFade: 0,
        mouseWheel: true,
        helpers: {
            overlay: {
                closeClick: false,
                speedOut: 200,
                showEarly: true,
                css: {},
                locked: true
            },
            title: {
                type: 'float' // 'float', 'inside', 'outside' or 'over'
            },
            thumbs: {
                width: 50,
                height: 50,
                source: function (image) {
                    return image.thumbnail;
                },
                position: 'bottom'  //'top', 'bottom'
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:36:03.633

您还需要包含`fancybox-thumbs`CSS 和 JS 文件。它们包含在下载`helpers`目录下

# objective-c - 动态 UIPopoverController 大小？

> ID：11164154
> 
> 赞同：2
> 
> 时间：2012-06-22T21:08:30.543
> 
> 标签：objective-c, ipad, uipopovercontroller

我的应用程序中有一个 UIPopoverController，它只是在彼此旁边显示两个 UILabel，每个 UIPopoverController 中都有一个单词列表。然而，有时每个列表中只有几个单词，这意味着弹出视图中有大量的空白。

我怎样才能使至少高度的弹出视图动态适应我的标签中有多少行单词？

任何帮助总是很感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:06:57.970

如果在弹出框显示之前指定了标签中的文本，您可以通过在方法中使用类似的代码来实现`viewDidLoad`：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // ...

    CGFloat height = [label.text sizeWithFont:label.font 
                                     forWidth:label.frame.size.width 
                                lineBreakMode:label.lineBreakMode].height;

    // This calculates only height of the label, you may want to add some margins, etc. 

    CGSize size = CGSizeMake(self.view.frame.size.width, height);
    self.contentSizeForViewInPopover = size;
} 
```

# php - PHPMailer 附件，无需物理文件即可

> ID：11164167
> 
> 赞同：24
> 
> 时间：2012-06-22T21:09:48.563
> 
> 标签：php, phpmailer

所以：

```
// Setup mail class, recipients and body
$mailer->AddAttachment('/home/mywebsite/public_html/file.zip', 'file.zip');
The AddAttachment function has four arguments:

AddAttachment(PATH_TO_FILE, FILENAME, ENCODING, HEADER_TYPE) 
```

我曾经使用 xmail()，当我在这里添加附件时，我传递了文件名和内容，应该在里面。

像这样：

```
$xmail->addAttachment('myamazingfile.pdf', $content); 
```

我怎样才能让它以同样的方式工作，所以当我`AddAttachment()`从 PHPmailer 类调用时，我可以传递相同或类似的东西，所以我不需要在我的服务器上有一个实际的文件来发送？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-22T21:20:30.477

```
AddStringAttachment($string,$filename,$encoding,$type) 
```

例如

```
$mail = new PHPMailer();
$mail->AddStringAttachment($string,$filename,$encoding,$type); 
```

[http://phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#method_addStringAttachment](http://phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#method_addStringAttachment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:11:51.997

由于 AddAttachment() 函数需要一个路径而不是字节数据，因此您应该执行 php 转换为临时文件函数，然后将该路径字符串传递给您的函数

```
$prefix     = 'ConvertMediaArgs_'.time().'_';
$tempfile   = tempnam( $this->tempdir, $prefix );

// Args file create failure: kill script with TEMPFILEFAIL error
if($tempfile === false) {
    die('file could not be created');
}

// Write args as Key=Val (\n) to file
$fullpath   = $this->tempdir.$tempfile;
$content    = $someContent // <---------------- this is your file's data
$handle     = fopen( $tempfile, "w");
fwrite( $handle, $content );

// $fullpath is the path you wanna pass to your function
$xmail->addAttachment( $fullpath, $content ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T13:15:12.113

```
$mail->addStringAttachment($content, $filename); 
```

对我来说效果很好。

完整参考： http: [//phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#method_addStringAttachment](http://phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#method_addStringAttachment)

# java - java初学者-我应该在哪个文件夹中放置“database.properties”文件

> ID：11164170
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:04.063
> 
> 标签：java, properties

我阅读了一些关于如何从 database.properties 文件中读取数据的教程，该文件基本上存储了键值对。

我想知道的是，我应该将这个文件放在哪个文件夹中？它是在根目录（即“src”）还是在一个包中......如果它放在“src”中，我如何访问这个文件 - 我的代码将在一个包中（并且包的目录将在src)- 那么如何从包中的类访问“src”中的属性文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:12:23.880

理想情况下，它应该与 .java 一起位于外部文件夹（src/main/resources）中。使用 ResourceBundle 来阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:13:26.190

最好的方法是在**src/main/resources**下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:13:48.923

将文件放在哪里是一个主观问题（我不是专家。）但是，您应该记住您的类路径隐含地从您的项目文件夹开始。此外，您可以像访问操作系统上的文件夹一样访问您的包。

因此，您的 src 包中名为 foo.txt 的文件将是： loadingMethod("src/foo.txt")

# html - Opera 和 IE8 - 身体下方的间隙

> ID：11164171
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:06.487
> 
> 标签：html, css, internet-explorer-8, opera

在[http://www.duncannz.com](http://www.duncannz.com)我有一个问题只发生在~~歌剧~~ *Opera v12.0 和 IE 8 之前的版本*。如果您打开其中任何一个浏览器，请访问该网站并尝试向下滚动...它会。即使身体只有 100% 的宽度。当您滚动时，您会看到一个间隙，它是`<html>`元素的一部分，而不是`<body>`元素的一部分，从额外位的背景看起来如何判断。

![歌剧问题](../Images/2831560db8951290b2c5ce7011566072.png)

为什么向下滚动时 Opera 底部会出现空白？也出现在 IE 8 中。

有任何想法吗？
谢谢

编辑：这不是由您看到的页脚引起的 - 如果您访问较长的页面，例如[http://www.duncannz.com/pages/text-to-code.php](http://www.duncannz.com/pages/text-to-code.php)并向下滚动，那么差距就在那里。

编辑 2：所以这个问题似乎在 Opera 12 中得到修复，以及`img border-radius`不工作的错误。但我使用的是旧版本，而且我经常`apt-get update && apt-get upgrade`. 如果我使用的是旧版本并且从未被告知过新版本，我相信其他人也是如此。另外还需要 IE 8 修复。

编辑 3：

我找到了原因，但不是完全的解决方案。我`box-shadow`的[.](http://www.css3pie.com) _ `body`_ 当您对 a 应用模糊时`box-shadow`，阴影会扩大。这种膨胀会导致阴影下降到身体下方，并且看不见。然而，旧版 Opera 和 IE8 中的这个故障导致身体下方的阴影模糊不清，而是创建了一个可滚动区域，以便您可以看到整个`box-shadow`.

如果不清楚[，这里有一个演示](http://css3gen.com/box-shadow/)- 将第一个值 - “角度”设置为`0deg`，将第三个值 - “模糊”设置为`0px`并查看。然后增加模糊，你会看到阴影的模糊在矩形下方。不幸的是，在 IE8 上，这种模糊会在身体下方产生一个间隙（因此用户可以看到整个模糊）

如果我删除模糊，则没有可滚动区域。但是我想要模糊 - 没有它看起来很可怕。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:06:58.480

你有什么理由选择

```
body {min-height: 100%;} 
```

代替

```
body {height: 100%;} 
```

顺便说一句，当您慢慢调整窗口大小时，它有时仍会在 Opera 12.0 中出现。有些州正在发生这种情况。我会说它必须在代码中遇到诸如舍入错误之类的东西。

我也会稍微增加底部的身体填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:27:29.567

您需要删除 hr 的边距：

```
hr.blackhr {
  margin: 0px;
} 
```

更一般地说，您需要的是[CSS 重置](http://www.cssreset.com/)来避免此类问题。

# jquery - Bootstrap collapse() 和未隐藏内容的闪烁

> ID：11164172
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:11.930
> 
> 标签：jquery, twitter-bootstrap, collapse

使用 Twitter Bootstrap 框架，我正在使用`$('#foo').collapse()`可折叠的答案制作一个常见问题解答，这些答案默认隐藏，然后在您单击问题时可见。

问题是我在`.collapse()`初始化之前得到了所有内容的闪光。

我不能提前隐藏内容（通过`display: none`），否则折叠功能不知道框的高度并且折叠/展开不起作用。

`$('#foo').collapse()`我认为如果不对最初的崩溃进行动画处理，并且立即隐藏元素，则可以解决此问题。关于如何做到这一点（或其他解决方案）的任何想法？

这是一个可以玩的小提琴：http: [//jsfiddle.net/DHZNv/44/](http://jsfiddle.net/DHZNv/44/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:21:05.920

这是你想要的行为吗？

> [http://jsfiddle.net/DHZNv/45/](http://jsfiddle.net/DHZNv/45/)

# php - 获取重力形式输入值

> ID：11164173
> 
> 赞同：3
> 
> 时间：2012-06-22T21:10:19.797
> 
> 标签：php, forms, wordpress, gravity-forms-plugin

如何在[重力形式](http://www.gravityforms.com/)`gform_after_submission`的钩子内获取特定输入元素的值？我可以得到标签

```
foreach($form['fields'] as $k=>$v)
{
    $label=$form['fields'][$k]['label'];
} 
```

但我如何获得价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T07:41:35.777

遵循 Gravity 指南，您可以设置挂钩来调用您自己的函数 - 在下面的情况下，函数是 after_submission()。

您可以使用它们的 ID 访问单个表单元素的输入值，如下所示；

```
add_action("gform_after_submission", "after_submission", 10, 2);

function after_submission($entry, $form){

    $name = $entry["2"];
    $address = $entry["17"] . ', '. $entry["18"] .', '. $entry["19"];

} 
```

ID 都在后端的表单字段标题中，只需将鼠标悬停在每个字段上，它就会为您提供类型和 ID（即“单行文本：字段 ID 2”）。

[http://www.gravityhelp.com/documentation/page/Gform_after_submission](http://www.gravityhelp.com/documentation/page/Gform_after_submission)

# python - C++ 到 python 的通信。多个io流？

> ID：11164176
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:24.773
> 
> 标签：python, process, communication, iostream

一个 python 程序打开了一个 C++ 程序的新进程，并正在读取进程标准输出。到目前为止没有问题。

但是有可能有多个这样的流进行通信吗？如果我也滥用 stderr，我可以得到两个，但不能更多。破解它的简单方法是使用临时文件。有没有更优雅的东西不需要绕道文件系统？

PS：也欢迎*nix特定的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:58:10.710

在 unix 系统上；打开子进程的常用方法是 with `fork()`，这将在子进程和父进程中保留任何打开的文件描述符（代表打开文件或套接字的小整数），然后`exec()`，这也允许新的可执行文件使用文件描述符在旧进程中打开的。此功能保留在`subprocess.Popen()`调用中（可通过`close_fds`参数调整）。因此，您可能想要做的是使用`os.pipe()`创建成对的套接字进行通信，然后使用`Popen()`启动另一个进程，并使用先前调用返回的每个 fd 的参数`pipe()`来告诉它应该使用哪个 fd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:47:23.240

听起来你想要的是使用套接字进行通信。两种语言都允许打开原始套接字，但您可能还想查看[zeromq](http://www.zeromq.org/)项目，它对消息传递有一些额外的优势。[在c++](http://zguide.zeromq.org/cpp%3ahwclient)和[python](http://zguide.zeromq.org/py%3ahwclient)中查看他们的 hello world 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T23:16:51.100

假设Windows机器。您可以尝试使用剪贴板在 python 进程和 C++ 之间交换信息。

分配一些唯一的进程ID，然后是您的信息并将其写入python端的剪贴板.....现在只需解析C++端的字符串。它类似于使用临时文件，但都在内存中完成.....但缺点是您不能将剪贴板用于任何其他应用程序。希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:11:45.133

使用传统的同步编程和标准 Python 库，您的要求很难完成。相反，如果您考虑使用异步编程模型和[Twisted](http://twistedmatrix.com/trac/)库，那简直是小菜一碟。[Using Processes HOWTO](http://twistedmatrix.com/documents/current/core/howto/process.html)描述了如何轻松地与任意数量的进程通信。诚然，Twisted 有一些学习曲线，但值得付出努力。

# python - python now, next, n 迭代

> ID：11164177
> 
> 赞同：6
> 
> 时间：2012-06-22T21:10:27.470
> 
> 标签：python, function, iterator

编写一个通用函数，可以迭代任何现在返回的可迭代对象，下一组。

```
def now_nxt(iterable):
    iterator = iter(iterable)
    nxt = iterator.__next__()
    for x in iterator:
        now = nxt
        nxt = x
        yield (now,nxt) 

for i in now_nxt("hello world"):
    print(i)

('h', 'e')
('e', 'l')
('l', 'l')
('l', 'o')
('o', ' ')
(' ', 'w')
('w', 'o')
('o', 'r')
('r', 'l')
('l', 'd') 
```

我一直在考虑编写一个可以设置每个元组中项目数的函数的最佳方法。

例如，如果它是

```
func("hello",n=3) 
```

结果将是：

```
('h','e','l')
('e','l','l')
('l','l','o') 
```

我是使用 timeit 的新手，所以请指出我在这里做错了什么：

```
import timeit

def n1(iterable, n=1):
    #now_nxt_deque
    from collections import deque
    deq = deque(maxlen=n)
    for i in iterable:
        deq.append(i)
        if len(deq) == n:
            yield tuple(deq)

def n2(sequence, n=2):
    # now_next
    from itertools import tee
    iterators = tee(iter(sequence), n)
    for i, iterator in enumerate(iterators):
        for j in range(i):
            iterator.__next__()
    return zip(*iterators)

def n3(gen, n=2):
    from itertools import tee, islice
    gens = tee(gen, n)
    gens = list(gens)
    for i, gen in enumerate(gens):
        gens[i] = islice(gens[i], i, None) 
    return zip(*gens)

def prin(func):
    for x in func:
        yield x

string = "Lorem ipsum tellivizzle for sure ghetto, consectetuer adipiscing elit."

print("func 1: %f" %timeit.Timer("prin(n1(string, 5))", "from __main__ import n1, string, prin").timeit(100000))
print("func 2: %f" %timeit.Timer("prin(n2(string, 5))", "from __main__ import n2, string, prin").timeit(100000))
print("func 3: %f" %timeit.Timer("prin(n3(string, 5))", "from __main__ import n3, string, prin").timeit(100000)) 
```

结果：

```
$  py time_this_function.py 
func 1: 0.163129
func 2: 2.383288
func 3: 1.908363 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:24:10.843

我的建议是，

```
from collections import deque

def now_nxt_deque(iterable, n=1):
    deq = deque(maxlen=n)
    for i in iterable:
        deq.append(i)
        if len(deq) == n:
            yield tuple(deq)

for i in now_nxt_deque("hello world", 3):
    print(i)

('h', 'e', 'l')
('e', 'l', 'l')
('l', 'l', 'o')
('l', 'o', ' ')
('o', ' ', 'w')
(' ', 'w', 'o')
('w', 'o', 'r')
('o', 'r', 'l')
('r', 'l', 'd') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T21:30:29.053

这是一个非常简单的方法：

*   `n`使用 using克隆您的迭代器时间[`itertools.tee`](http://docs.python.org/library/itertools.html#itertools.tee)
*   推进第`i`th 次迭代器`i`时间
*   `izip`他们都在一起

```
import itertools

def now_next(sequence, n=2):
    iterators = itertools.tee(iter(sequence), n)
    for i, iterator in enumerate(iterators):
        for j in range(i):
            iterator.next()
    return itertools.izip(*iterators) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T21:24:59.633

我的解决方案：

```
def nn(itr, n):
    iterable = iter(itr)

    last = tuple(next(iterable, None) for _ in xrange(n))
    yield last
    for _ in xrange(len(itr)):
        last = tuple(chain(last[1:], [next(iterable)]))
        yield last 
```

这是为 Python 2 制作的，如果你想在 Python 3 中使用它，请替换`xrange`为`range`.

`next`, 有一个很好的`default`参数，它将返回而不是提高 a `StopIteration`，您也可以将此默认参数添加到您的函数中，如下所示：

```
def nn(itr, n, default=None):
    iterable = iter(itr)

    last = tuple(next(iterable, default) for _ in xrange(n))
    yield last
    for _ in xrange(len(itr)):
        last = tuple(chain(last[1:], [next(iterable, default)]))
        yield last 
```

我用它玩了更多，例如使用`itr.__class__()`默认值，但这对于列表和元组来说似乎是错误的，它对字符串有意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T23:39:37.843

使用切片的 Eric 技术的一种变体

```
from itertools import tee, islice, izip

def now_next(gen, n=2):
  gens = tee(gen, n)
  gens = list(gens)
  for i, gen in enumerate(gens):
    gens[i] = islice(gens[i], i, None) 
  return izip(*gens)

for x in now_next((1,2,3,4,5,6,7)):
  print x 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T07:49:29.243

基于 cravoori 的回答的单行代码：

```
from itertools import tee, islice, izip

def now_next(gen, n=2):
    return izip(*(islice(g, i, None) for i, g in enumerate(tee(gen, n)))) 
```

# ios - 在 iOS 5 的 iPad 上的拆分视图控制器中禁用详细视图控制器

> ID：11164179
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:35.693
> 
> 标签：ios, ipad, uisplitviewcontroller, master-detail

我的 iPad 应用程序中有一个拆分视图控制器。它在左侧有一个商场的租户列表，在右侧有有关所选租户的详细信息。

当您按下主视图控制器（租户列表）上的编辑按钮时，它应该禁用右视图控制器（租户的详细视图）。我该如何做到这一点？

我唯一能想到的是添加一个具有半透明背景的 UIImageView 并在主调用它的 setEditing 时隐藏/显示它。

此功能随 iPad 提供。如果您打开 Messages.app 并点击主视图（左）中的编辑按钮，对话或详细视图（右）将变为灰色并禁用，并且您无法与其交互，直到您点击左侧的“完成”。如何在我的应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:27:02.627

只要正确的视图控制器是 master 的委托（无论如何都应该为您创建它，因为这就是 UISplitViewController 对象应该被使用的方式），它就是对您自己定义的方法的简单调用。也许通过一些布尔值来指示编辑，并为黑色 CALayer 的 alpha 属性设置动画作为响应。

# javascript - JavaScript：将插入符号位置设置为第一段的开头（Opera 错误）

> ID：11164180
> 
> 赞同：2
> 
> 时间：2012-06-22T21:10:38.250
> 
> 标签：javascript, opera

在用户按下 CTRL+Home 时的 contenteditable 元素中，我试图让每个浏览器将插入符号位置移动到第一段的开头。

让我们假设整个页面都是可编辑的，除了手头的直接目标之外，我们不考虑其他任何事情。

这在 Firefox、Safari 和 IE 10 中运行良好，但 Opera 12 拒绝服从。这是代码...

```
var s = window.getSelection();

if (e.ctrlKey && e.keyCode==36)
{
 var p0 = document.getElementsByTagName('p')[0];

 if (p0.firstChild.nodeName.toLowerCase()=='#text')
 {//<p>text
  var p = p0.firstChild;
 }
 else if (p0.firstChild.firstChild.nodeName.toLowerCase()=='#text')
 {//<p><em>text
  var p = p0.firstChild.firstChild;
 }

 if (typeof p=='object')
 {
  s.getRangeAt(0).setStart(p,0);
  s.getRangeAt(0).setEnd(p,0);
  s.collapseToStart();
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:16:28.663

这个问题是由 Opera 中段落的 CSS 边距引起的。为什么？我完全不知道，只是这个最小的测试用例重现了它。

变通方法是主观的，边距和填充有不同的用途，在我的情况下，我无法使用填充代替边距，因此使我依赖 Opera 修复此错误。

**例子.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Opera Contenteditable margin CTRL+Home/End Bug</title>
<style type="text/css">
p
{
 /*margin: 0px 20px 14px 24px;*/
 margin-top: 0px;
 margin-right: 20px;
 margin-bottom: 14px;
 margin-left: 24px;
}
</style>
</head>

<body>

<div contenteditable="true">
<p>Paragraph one.</p>
<p>Paragraph two.</p>
</div>

</body>
</html> 
```

# java - Java：在多个线程上等待/通知

> ID：11164183
> 
> 赞同：0
> 
> 时间：2012-06-22T21:10:59.313
> 
> 标签：java, multithreading, wait, notify

我有一个类，它包含对通过 TCP 接收对象的工作线程的引用集合（每个客户端 1 个）。

我正在尝试`getMessage()`在我的类中创建一个方法，等待任何工作线程收到消息并返回它。

我现在得到的是一个轮询系统：

```
public Object getMessage() {  
    while (true) {  
        for (Worker w : workers.values())  
             if (w.msgNumber() != 0)  
                 return w.getLastMsg();  
        Thread.sleep(100);  
    }  
} 
```

它有效，但我认为它的可扩展性不是很高。

我知道我可以`wait(timeout)`对每个工人做一个，但问题仍然存在。

是否有某种等待/通知机制等待多个线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:16:16.873

您可以查看使用阻塞队列进行线程之间的通信。工作线程将插入队列，而`getMessage()`函数从队列中提取消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:19:22.990

怎么样：

```
 try {
        ServerSocket srv = new ServerSocket(port);

        // Wait for connection from client.
        while (true) {
            System.out.println("Listening...");
            // Waits for connection
            new Thread(new ServerWorkerThread(srv.accept())).start(); 

        }
    } catch (IOException e) {
      //handle
    } 
```

# visual-studio-2008 - 在 MS VS 2008 中构建项目时出错

> ID：11164187
> 
> 赞同：0
> 
> 时间：2012-06-22T21:11:21.047
> 
> 标签：visual-studio-2008, hyperlink, compiler-errors

我有一个 .sln 文件，下面有 30 多个 .vcprojs。当我第一次构建我的解决方案时，我得到了很多链接错误。但是，如果我重复此操作 - 清理项目然后重建它 - 错误就会消失。为什么会这样？请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:37:37.527

如果某些项目依赖于其他项目并且构建顺序不正确，则可能会发生这种情况。这里有一些关于 SO 的答案：[Visual Studio 2010：如何在解决方案中强制执行项目的构建顺序？](https://stackoverflow.com/q/3653973/484072)

# c++ - 扣减失败

> ID：11164189
> 
> 赞同：0
> 
> 时间：2012-06-22T21:11:23.890
> 
> 标签：c++, templates, gcc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:03:29.703

If it doesn't find the `operator>>` in the namespace it is called from, the compiler looks for the operator in namespaces associated with the parameters you use. In this case they all come from namespace std, and not from the global namespace. Therefore the global namespace is not searched.

When you explicitly call `::operator>>(istream, array)`, it *does* look in the global namespace (as you specifically asked it to).

# c++ - 当我从 Windows 请求“Miriam”字体时，我得到了“Arial”字体。这怎么可能，因为我的系统中存在字体文件“mriam.ttf”？

> ID：11164192
> 
> 赞同：2
> 
> 时间：2012-06-22T21:11:32.307
> 
> 标签：c++, winapi, windows-7, fonts

在下面的代码中，`Miriam`字体是在 in 中创建的，`WM_CREATE`并且它的家族名称是在 static 中获得的`OUTLINETEXTMETRIC struct`，由`s_potm`. 然后我在 中展示`otmpFamilyName`这个结构的成员，并在窗口客户区打印`WM_PAINT`字符串，而不是. 但是这种字体替换没有理由，因为字体文件存在于 Windows 7 中。有什么解释吗？`Arial``Miriam``mriam.ttf`

```
#include <windows.h>

LRESULT CALLBACK WndProc(HWND, UINT, UINT, LONG);

int APIENTRY WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR pszCmdLine, int nCmdShow)
{
    WNDCLASSEX  wndclassx;

    wndclassx.cbSize        = sizeof(WNDCLASSEX);
    wndclassx.style         = CS_HREDRAW | CS_VREDRAW;
    wndclassx.lpfnWndProc   = WndProc;
    wndclassx.cbClsExtra    = 0;
    wndclassx.cbWndExtra    = 0;
    wndclassx.hInstance     = hInstance;
    wndclassx.hIcon         = 0;
    wndclassx.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wndclassx.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);
    wndclassx.lpszMenuName  = 0;
    wndclassx.lpszClassName = L"WndProc";
    wndclassx.hIconSm       = 0;

    if( !RegisterClassEx(&wndclassx) ) return 0;

    HWND hWnd = CreateWindow(L"WndProc", 0, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
                             0, 0, hInstance, 0);

    ShowWindow(hWnd, SW_SHOWNORMAL);
    UpdateWindow(hWnd);

    MSG msg;

    while( GetMessage(&msg, NULL, 0, 0) )
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    //  Retorna msg.wParam

    return (int)msg.wParam;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, UINT wParam, LONG lParam)
{
    static OUTLINETEXTMETRIC* s_potm;

    switch ( message )
    {
        case WM_CREATE:
        {
            HDC hDC;
            if( !(hDC = CreateIC(L"Display", nullptr, nullptr, nullptr)) ) return -1;

            LOGFONT lf;
            memset(&lf, 0, sizeof(LOGFONT));
            lf.lfHeight = 20;
            lf.lfOutPrecision = OUT_TT_ONLY_PRECIS;
            wcscpy_s(lf.lfFaceName, LF_FACESIZE, L"Miriam");

            HFONT hFont;
            if( !(hFont = CreateFontIndirect(&lf)) )
            {
                DeleteDC(hDC);
                return -1;
            }

             hFont = (HFONT)SelectObject(hDC, hFont);

             int ix = GetOutlineTextMetrics(hDC, 0, nullptr);

             s_potm = (OUTLINETEXTMETRIC*)new char[ix];

             GetOutlineTextMetrics(hDC, ix, s_potm); 

             DeleteObject(SelectObject(hDC, hFont));
             DeleteDC(hDC);
        }
        break;

        case WM_PAINT:
        {
            PAINTSTRUCT ps;
            BeginPaint(hwnd, &ps);
            wchar_t* p = (wchar_t*)((BYTE*)s_potm + (int)s_potm->otmpFamilyName);
            TextOut(ps.hdc, 10, 20, p, wcslen(p)); 
            EndPaint(hwnd, &ps);
        }
        break;

        case WM_DESTROY:

        PostQuitMessage(0);
        break;

        default:

        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

**编辑：**字体也会发生同样的事情`MT Extra`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:04:11.417

当您向 Windows 询问字体时，它会尽力匹配您在 LOGFONT 结构中列出的*所有条件。*某些字段优先于其他字段。您已将大部分值保留为零。

我认为在这种情况下，`lfCharSet`让你失望的是这个领域。零等于`ANSI_CHARSET`，但 Miriam 看起来不像 ANSI 字体。

MSDN 文档说`lfCharSet`：

> 这个参数在字体映射过程中很重要。为确保结果一致，请指定特定字符集。如果在 lfFaceName 成员中指定字体名称，请确保 lfCharSet 值与 lfFaceName 中指定的字体字符集匹配。

# c - 知道最大字符的行 (C)

> ID：11164193
> 
> 赞同：0
> 
> 时间：2012-06-22T21:11:38.910
> 
> 标签：c, file, getc

我用**C**编写了一个程序，以查找具有**最大字符数的****行**。

 **这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

int main (int argc, char *argv[])
{
    char c;                              /* used to store the character with getc */
    int c_tot = 0, c_rig = 0, c_max = 0; /* counters of characters*/
    int r_tot = 0;                       /* counters of rows */

    FILE *fptr;

    fptr = fopen(argv[1], "r");

    if (fptr == NULL || argc != 2)
    {
        printf ("Error opening the file %s\n'", argv[1]);
        exit(EXIT_FAILURE);
    }

    while ( (c = getc(fptr)) != EOF)
    {
        if (c != ' ' && c != '\n')
        {
            c_tot++;
            c_rig++;
        }

        if (c == '\n')
        {
            r_tot++;

            if (c_rig > c_max)
                c_max = c_rig;

            c_rig = 0;
        }
    }

    printf ("Total rows: %d\n", r_tot);          
    printf ("Total characters: %d\n", c_tot);
    printf ("Total characters in a row: %d\n", c_max);
    printf ("Average number of characters on a row: %d\n", (c_tot/r_tot));
    printf ("The row with max characters is: %s\n", ??????)

    return 0;
} 
```

我可以很容易地找到字符数最多的行，但是如何**打印**出来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:14:22.837

您需要将具有最高字符数的行存储在一个数组中。

如果您可以对行长做出假设，请声明两个字符数组：

```
char currentLine[255];
char maxLine[255]; 
```

用 读取每个字符后`getc`，将其放入`line`数组中。处理完该行后，如果当前行的计数较高，则将其内容复制`currentLine`到中`maxLine`，使用`memcpy`. 您已经将这两个数组的长度跟踪为`c_tot`和`c_max`。

如果你不能对行长做出假设，你可以使用相同的技术，但是当你遇到比初始大小更长的行时，你需要`malloc`和你的缓冲区。`realloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:17:03.997

您应该将当前行也存储在 a 中`char *`并具有最大的字符串`char *`。在确定最大大小的测试中，您还应该将当前行复制到最大的字符串。

不要忘记将最大的字符串初始化为“”，以避免在零长度文件的情况下出错。**

# python - 如何捕捉谷歌翻译结果（个人使用）？旧技术不再适用

> ID：11164201
> 
> 赞同：1
> 
> 时间：2012-06-22T21:12:17.577
> 
> 标签：python, html, url, urllib2

我编写了一个 python 脚本（仅供个人使用）来使用 linux 上的终端翻译文本。

我试过了：

```
#!/usr/bin/python
import urllib,urllib2

url="http://translate.google.com/#en|pt|love"
#url="http://www.google.com"
request=urllib2.Request(url)
answer=urllib2.urlopen(request).read()

print "request:\n",request,"\n\n"
print "answer:\n",answer,"\n\n" 
```

但它不起作用。如果我们取消注释该行 `#url="http://www.google.com"`并评论`url="http://translate.google.com/#en|pt|love"`所有作品，这是事实。

这很奇怪，因为如果我们`url="http://translate.google.com/#en|pt|love"`在浏览器中复制并粘贴，该 url 将起作用。

那么，我该如何解决这个问题来捕捉结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:19:39.063

您的 URL 包含`en|pt|love`作为片段的字符串（在 之后`#`）。片段用于客户端 (JavaScript) 处理。它不会发送到服务器。换句话说，谷歌翻译在你的浏览器中运行的客户端 JavaScript 中完成它的工作或其中的一部分，但当然不是在你的 Python 脚本中。

Google 提供[Translate API](https://developers.google.com/translate/)作为付费服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:29:52.120

尝试 Selenium，[http:](http://seleniumhq.org/) //seleniumhq.org/ 或使用 PyQT webkit

```
#! /usr/bin/python

import sys
from PyQt4.QtCore import QUrl
from PyQt4.QtWebKit import QWebView
from PyQt4.QtGui import QApplication

app = QApplication(sys.argv)
web = QWebView()
web.load(QUrl("http://translate.google.com/#en|pt|love"))
web.show()
app.exec_()
print web.page().mainFrame().toPlainText().toUtf8() 
```

当你关闭应用程序窗口时，你会看到你想要的

# iphone - 故事板，将连接从一个视图控制器拖到下一个视图控制器的位置

> ID：11164208
> 
> 赞同：0
> 
> 时间：2012-06-22T21:13:01.057
> 
> 标签：iphone, uistoryboard, uistoryboardsegue

我对故事板的工作方式感到困惑。

所以我创建了一个简单的应用程序，其中根视图控制器是一个导航控制器。
我将一个按钮拖到 NavigationController 的 rootViewController 上。
我将另一个视图控制器拖到屏幕上，使其背景为橙色，并使其成为 OrangeViewController 的子类。
我将连接从 rootViewController 的状态栏区域拖到 OrangeViewController。我制作了这个 Segue Push 并将其命名为 ShowOrange。我为我的按钮创建了一个动作，它具有：

```
- (IBAction)push:(id)sender {
    [self performSegueWithIdentifier:@"ShowOrange" sender:self];
} 
```

这就是它所做的一切。所以当我按下按钮时，它确实显示了 OrangeViewController。然后，当我按回来时，它使我的背景保持橙色。标题确实变成了 ViewController，并且没有返回按钮，但是背景是橙色的。我想知道为什么会这样？

我的另一个问题是拖拽segues的通用问题。我似乎可以从按钮本身或状态栏中拖动它。有区别吗？当建立这种联系时，到底发生了什么？谢谢。

编辑：包括图片 ![在此处输入图像描述](../Images/9c4dedf1482ee265fcce3e8e5299f266.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:26:05.313

这个特定的答案仅适用于您的第二个问题：

从按钮拖动类似于将按钮的操作设置为执行转场。从视图控制器对象拖动（这是我认为从“状态栏”拖动时发生的情况，如果您在进一步缩小时从视图控制器或从列表视图中的视图控制器拖动也会发生这种情况） ，您只是将其设置为在代码中使用（在这种情况下，它*必须*具有标识符。按钮 segue 不需要标识符）。

# c++ - memset 的行为

> ID：11164221
> 
> 赞同：-5
> 
> 时间：2012-06-22T21:14:04.050
> 
> 标签：c++

此功能是否具有相同的行为`memset`？

```
inline void SetZeroArray( void *vArray[], unsigned int uArraySize )
{
       for(unsigned i=0; i<=uArraySize; i++ )
                    vArray[i] = NULL;
}

int main( int argc, char *argv[] )
{

        unsigned int uLevels[500];
        SetZeroArray( (void**)uLevels, 500 );

        unsigned int ulRLevels[500];
        memset( &ulRLevels, 0, sizeof( ulRLevels ) );

    system("pause>nul");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:17:14.793

不，您的功能与`memset`. 您的函数将指针设置为 NULL 并将`memset`数据*的值设置为提供的值。*

完全不同的东西。

# doctrine - ZF1 + Doctrine 2 ODM：调用未定义的方法 AnnotationReader::setDefaultAnnotationNamespace

> ID：11164222
> 
> 赞同：0
> 
> 时间：2012-06-22T21:14:05.257
> 
> 标签：doctrine, doctrine-orm, doctrine-odm

我正在尝试设置一个 zf1 + 学说 mongo odm 1.0.0BETA4-DEV 项目。我正在使用[https://github.com/Bittarman/zf-d2-odm](https://github.com/Bittarman/zf-d2-odm)分支，但是当我将教义版本从 1.0.0BETA3 更新到 1.0.0BETA4-DEV 时，出现以下错误：

```
 SCREAM: Error suppression ignored for
 ( ! ) Fatal error: Call to undefined method Doctrine\Common\Annotations\AnnotationReader::setDefaultAnnotationNamespace() in C:\htdocs\zf-d2-odm\library\Lupi\Resource\Odm.php on line 34
 Call Stack
 #  Time    Memory  Function    Location
 1  0.0007  139368  {main}( )   ..\index.php:0
 2  0.0217  659008  Zend_Application->bootstrap( )  ..\index.php:25
 3  0.0217  659104  Zend_Application_Bootstrap_BootstrapAbstract->bootstrap( )  ..\Application.php:355
 4  0.0217  659120  Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap( ) ..\BootstrapAbstract.php:586
 5  0.0314  1127240 Zend_Application_Bootstrap_BootstrapAbstract->_executeResource( )   ..\BootstrapAbstract.php:626
 6  0.0314  1127368 Lupi_Resource_Odm->init( )  ..\BootstrapAbstract.php:683 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:04:57.470

我在最新的原始文档中发现了新方法的使用

```
 https://github.com/doctrine/mongodb-odm-documentation 
```

首先，您应该调用 AnnotationDriver::registerAnnotationClasses() 将注释类注册到公共注册表。

```
AnnotationDriver::registerAnnotationClasses(); 
```

然后正常配置所有路径并使用注释驱动程序 AnnotationDriver::create() 的工厂方法设置元数据驱动程序

```
$config = new Configuration();
$config->setProxyDir('/path/to/generate/proxies');
$config->setProxyNamespace('Proxies');
$config->setHydratorDir('/path/to/generate/hydrators');
$config->setHydratorNamespace('Hydrators');
$config->setMetadataDriverImpl(AnnotationDriver::create('/path/to/document/classes'));

$dm = DocumentManager::create(new Connection(), $config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:22:36.757

那个方法已经不存在了。您需要`Lupi_Resource_Odm::init()`使用更新的 API 调用进行修改。

# javascript - 所有事件都显示在左上角（Jquery Full Calender）

> ID：11164223
> 
> 赞同：2
> 
> 时间：2012-06-22T21:14:07.623
> 
> 标签：javascript, jquery, fullcalendar

所以我想知道是什么原因导致完整 jquery 日历的所有事件都显示在左上角。即使有一个，它也会显示在您有“星期天”的选项卡中，它可能会安排在下星期一

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:03:16.533

我的修复在我的 css 文件中如下所示：

```
#calendar * {
    position: static;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:30:51.130

我遇到了同样的问题，但只有当天的事件才会这样做。

这是由 CSS 冲突引起的 - 我在自定义 jQuery UI CSS 文件中有一条规则导致事件服从位置：相对，而 fullCalendar 取决于具有位置：绝对的事件。

我的第一个建议是尝试将主题选项设置为 true 和 false，看看在这两种情况下是否有相同的问题。

接下来，尝试禁用您在页面上使用的任何其他 CSS 文件，而不是默认的 jQuery UI CSS 和 fullcalendar CSS。

如果您注意到变化，这应该可以为您提供一些关于问题所在的证据。如果不是......我不知道该告诉你什么:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:57:18.653

ithcy 是对的。尝试禁用其他 css。

我也遇到过这种情况。所有事件都在左上角堆叠在一起。

我尝试停用所有其他 wp 插件以关闭所有 js。这些都没有奏效。

它最终成为css。在我的 css 文件重置中，我有一个将 div 定位为相对的规则。我把它取下来，它修好了。

# google-drive-api - Google Drive 列表、搜索和删除文件

> ID：11164227
> 
> 赞同：3
> 
> 时间：2012-06-22T21:14:32.927
> 
> 标签：google-drive-api

我正在构建一个与 Google Drive 集成的网络应用程序，我想知道是否有办法列出、搜索或删除文件。

我从[https://developers.google.com/drive/v1/reference/files#resource](https://developers.google.com/drive/v1/reference/files#resource)看到有 4 个操作。如果没有列表和搜索功能，则应用程序有责任处理文件 ID 的管理。

我应该使用其他 API 吗？这些功能正在开发中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:30:46.747

[Drive API v2](https://developers.google.com/drive/)昨天*上线*，现在支持列表、搜索等全文件操作。

查看[参考文档](https://developers.google.com/drive/v2/reference/)。

# python - 使用python将文本文件中的单词替换为值

> ID：11164228
> 
> 赞同：1
> 
> 时间：2012-06-22T21:14:33.803
> 
> 标签：python, python-3.x

我一直在尝试用一个值（比如 1）替换文本文件中的一个单词，但是我的输出文件是空白的。我是 python 的新手（我学习它只有一个月的时间）。

我的文件比较大，但我现在只想用值 1 替换一个单词。这是文件的一部分：

```
NAME SECOND_1

ATOM 1 6 0 0 0 # ORB 1

ATOM 2 2 0 12/24 0 # ORB 2

ATOM 3 2 12/24 0 0 # ORB 2

ATOM 4 2 0 0 4/24 # ORB 3

ATOM 5 2 0 0 20/24 # ORB 3

ATOM 6 2 0 0 8/24 # ORB 3

ATOM 7 2 0 0 16/24 # ORB 3

ATOM 8 6 0 0 12/24 # ORB 1

ATOM 9 2 12/24 0 12/24 # ORB 2

ATOM 10 2 0 12/24 12/24 # ORB 2

#1

#2

#3 
```

我想首先用值 1 替换单词 ATOM。接下来我想用空格替换 #ORB。到目前为止，这是我正在尝试的。

```
input = open('SECOND_orbitsJ22.txt','r')
 output=open('SECOND_orbitsJ22_out.txt','w')
for line in input:
    word=line.split(',')
    if(word[0]=='ATOM'):
        word[0]='1'
        output.write(','.join(word)) 
```

任何人都可以提供任何建议或帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:17:51.887

问题是输入后面没有逗号`ATOM`，所以`word[0]`不等于`ATOM`. 您应该按空格而不是逗号分隔。

你也可以`split()`不带参数使用。

由于您仅`output.write`在找到匹配项时才执行此操作，因此输出保持为空。

`with`PS打开文件时尽量使用语句：

```
with open('SECOND_orbitsJ22.txt','r') as input,
    open('SECOND_orbitsJ22_out.txt','w') as output:
   ... 
```

此外，Alexander 建议了正确的替换工具：`str.replace`. 但是，请谨慎使用它，因为它不是位置感知的。`re.sub`是一种更灵活的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T21:19:13.540

使用[`replace`](http://docs.python.org/library/stdtypes.html#str.replace).

```
line.replace("ATOM", "1").replace("# ORB", " ") 
```

未经测试的代码：

```
input  = open('inp.txt', 'r')
output = open('out.txt', 'w')
clean  = input.read().replace("ATOM", "1").replace("# ORB", " ")
output.write(clean) 
```

[工作示例](http://codepad.org/C5rIuQIy)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:18:43.627

根据您在此处粘贴的文件段，您需要用空格而不是逗号分隔每一行。如果没有逗号，`line.split(',')`则无效，并且`word[0]`为空。您的输出文件是空的，因为您永远不会写入它，因为它`ATOM`永远不会等于空字符串。

# ruby - 将 Sinatra 应用程序部署到暂存环境的问题

> ID：11164230
> 
> 赞同：4
> 
> 时间：2012-06-22T21:14:48.277
> 
> 标签：ruby, sinatra, capistrano

我有一个小型 Sinatra 应用程序，在运行 Nginx 的单个服务器上同时具有登台和生产环境。为了部署，我使用 Capistrano 和 capistrano-ext 轻松部署到不同的位置。

暂存环境始终使用 app.rb 文件中指定的生产配置运行的问题。

```
configure :staging do
  # staging settings
  set :foo, "bar"   # will never be set to this
end

configure :production do
  # prod settings
  set :foo, "rab"
end 
```

我得出的结论是， deploy.rb 文件中的 capistrano :environment 变量不会以任何方式配置 Sinatra。我也尝试将 ENV["RACK_ENV"] 设置为“staging”，但无济于事。

配置/部署/staging.rb

```
server "10.10.100.16", :app, :web, :db, :primary => true
set :deploy_to, "/var/www/staging.my_app" 
set :environment, "staging"
set :env, "staging"          
ENV["RACK_ENV"] = "staging" 
```

有任何想法吗？

** 更新：我应该补充一点，我也在使用乘客。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:55:12.567

在 nginx 中设置 rack_env 变量似乎可以解决问题。

[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#RackEnv](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#RackEnv)

# sql-server - 如何消除 TSQL 中的 NULL 字段

> ID：11164232
> 
> 赞同：0
> 
> 时间：2012-06-22T21:14:55.930
> 
> 标签：sql-server, tsql, null, sql-server-2008-r2

我正在为 SQL Server 2008 R2 开发一个 TSQL 查询。我正在尝试开发此查询以识别一个记录/客户。因为其中一些值是 NULL，所以我目前正在对大多数表进行 LEFT JOINS。但是 LEFT JOIN 的问题是，现在我为某些客户获得了 > 1 条记录。

但是，如果我将其更改为 INNER JOIN，则某些客户端将被完全排除，因为它们对这些列具有 NULL 值。无论 NULL 值如何，如何将查询结果限制为仅一个记录/客户端？如果有非 NULL 值，那么我希望它选择具有非 NULL 值的记录。这是我当前的一些输出：

```
group_profile_id    profile_name    license_number  is_accepting    is_accepting_placement  managing_office region  vendor_name vendor_id   applicant_type  Office Address  status_description  Cert Date2  race    ethnicity_desc  religion
9CD932F1-6BE1-4F80-AB81-0CE32C565BCF    Atreides Foster Home 1  Atreides1               1   Yes Manchester, NH  Gulf Atlantic   Atreides1   00000007                Treatment Foster Home   4042 Arrakis Avenue, Springfield, VT  05156 Open/Re-opened  2011-06-01 00:00:00.000 NULL    NULL    NULL
DCE354D5-A7CC-409F-B5A3-89BF664B7718    Averitte, Leon and Sandra   00000044                1   Yes Birmingham, AL  Gulf Atlantic   AL Averitte, Leon and Sandra    00000044                Treatment Foster Home   3816 5th Avenue, Bessemer, AL  35020, (205)482-4307 Open/Re-opened  2011-08-05 00:00:00.000 NULL    NULL    NULL
DCE354D5-A7CC-409F-B5A3-89BF664B7718    Averitte, Leon and Sandra   00000044                1   Yes Birmingham, AL  Gulf Atlantic   AL Averitte, Leon and Sandra    00000044                Treatment Foster Home   3816 5th Avenue, Bessemer, AL  35020, (205)482-4307 Open/Re-opened  2011-08-05 00:00:00.000 Caucasian/White Non Hispanic    NULL
AD02A43C-6F38-4F35-8C9E-E12422690BFB    Bass, Matthew and Sarah 00000076                1   Yes Jacks    on, MS Central Gulf Coast  MS Bass, Matthew and Sarah  00000076                Treatment Foster Home   506 Eagelwood Drive, Florence, MS  39073, (601)665-7169 Open/Re-opened  2011-04-01 00:00:00.000 NULL    NULL    NULL
AD02A43C-6F38-4F35-8C9E-E12422690BFB    Bass, Matthew and Sarah 00000076                1   Yes Jackson, MS Central Gulf Coast  MS Bass, Matthew and Sarah  00000076                Treatment Foster Home   506 Eagelwood Drive, Florence, MS  39073, (601)665-7169 Open/Re-opened  2011-04-01 00:00:00.000 Caucasian/White NULL    Baptist 
```

您可以看到 Averitt 和 Bass 的个人资料名称都有一条记录，其中种族、民族、宗教为 NULL。如何消除这些行（第 2 行和第 4 行）？

这是我目前的查询：

```
select distinct
        gp.group_profile_id,
        gp.profile_name,
        gp.license_number,
        gp.is_accepting,
        case when gp.is_accepting = 1 then 'Yes'
             when gp.is_accepting = 0 then 'No '
                        end as is_accepting_placement,
        mo.profile_name as managing_office,
        regions.[region_description] as region,     
        pv.vendor_name,
        pv.id as vendor_id,
        at.description as applicant_type,
        dbo.GetGroupAddress(gp.group_profile_id, null, 0) as [Office Address],
        gsv.status_description,
        ri.[description] as race,
        ethnicity.description as ethnicity_desc,
        religion.description as religion
from  group_profile gp With (NoLock)
    --Office Information
        inner join group_profile_type gpt With (NoLock) on gp.group_profile_type_id = gpt.group_profile_type_id and
                    gpt.type_code = 'FOSTERHOME' and gp.agency_id = @agency_id and gp.is_deleted = 0
        inner join group_profile mo With (NoLock) on gp.managing_office_id = mo.group_profile_id
        left outer join payor_vendor pv With (NoLock) on gp.payor_vendor_id = pv.payor_vendor_id
        left outer join applicant_type at With (NoLock) on gp.applicant_type_id = at.applicant_type_id and at.is_foster_home = 1
        inner join group_status_view gsv With (NoLock) on gp.group_profile_id = gsv.group_profile_id and gsv.status_value = 'OPEN' and gsv.effective_date =  
                            (Select max(b.effective_date) from  group_status_view b  With (NoLock)
                            where gp.group_profile_id = b.group_profile_id)
        left outer join regions With (NoLock) on isnull(mo.regions_id, gp.regions_id) = regions.regions_id
left join enrollment en on en.group_profile_id = gp.group_profile_id
        join event_log el on el.event_log_id = en.event_log_id
    left join people client on client.people_id = el.people_id
    left join   race With (NoLock) on el.people_id = race.people_id
    left join group_profile_race gpr with (nolock) on gpr.race_info_id = race.race_info_id
    left join race_info ri with (nolock) on ri.race_info_id = gpr.race_info_id
    left join ethnicity With(NoLock) On client.ethnicity = ethnicity.ethnicity_id
    left join religion on client.religion = religion.religion_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:53:24.647

尝试按 group_profile_id 分组并选择每隔一列的 MAX() 。MAX 将选择每个重复条目的非空值（如果存在一个，或者如果存在多个，则为最大值）。虽然更有效的解决方案将涉及整理数据中额外的 NULL 行，乍一看。

# javascript - Node.js / Express：通过 ajax 下载文件

> ID：11164235
> 
> 赞同：1
> 
> 时间：2012-06-22T21:15:06.120
> 
> 标签：javascript, node.js, get

我正在尝试通过 GET ajax 调用动态请求下载文件。我有以下客户端代码：

```
$(function() {
    $('#submit').click(function() {
        $.ajax({
            type: "GET",
            url: "/download/" + "filename",
            dataType: "json",
            contentType: "application/json",
            complete: function() {
                console.log('Complete');
            },
            success: function() {
                console.log('Success');
            },
            error: function() {
                console.log('Error');
            }
        });
    });
}); 
```

在节点服务器上，我还有以下行（请注意，我不知道这是否是正确的方法）

```
app.get('/download/:filename', function(req, res) {
    console.log(req.params);
    res.write(fs.readFileSync(__dirname + "/../public/javascripts/main.js", 'utf8'));
}); 
```

所以我想实际下载那个javascript文件（最终是动态的）。我将如何正确地做到这一点？有些东西告诉我我需要指定标题/内容类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:23:07.777

您应该返回内容类型和处置设置为：

```
Content-Type: application/octet-stream
Content-Disposition: attachment;filename=\"main.js\" 
```

我相信你必须重定向到这个文件。如果我没记错的话，您不能通过 AJAX 调用强制下载文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:23:12.260

您是否打算将 .js 文件解释并应用于下载页面？

如果是这样，您可能最终会使用 write() 来分页，无论您如何获取它，这都不是最佳实践。

而是查看[require.js](http://requirejs.org/)。这是异步和动态加载脚本并在运行时应用它们的更好方法。

使用手动解决方案下载动态 .js 文件时会遇到的一个困难是依赖关系。在依赖于另一个的 .js 文件上会导致盲目的 js 未定义错误。

此外，在将同步包含文件转换为异步包含文件时，还可以获得运行时性能优化。

[Require.js](http://requirejs.org/)很好地解决了这些问题。

希望有帮助。一切顺利！克林特

# ruby - 如何拆分包含定界符和转义定界符的字符串？

> ID：11164236
> 
> 赞同：4
> 
> 时间：2012-06-22T21:15:10.717
> 
> 标签：ruby, regex

我的字符串分隔符是`;`. 分隔符在字符串中转义为`\;`. 例如，

```
irb(main):018:0> s = "a;b;;d\\;e"
=> "a;b;;d\\;e"
irb(main):019:0> s.split(';')
=> ["a", "b", "", "d\\", "e"] 
```

有人可以建议我使用正则表达式，以便 split 的输出是`["a", "b", "", "d\\;e"]`？我正在使用 Ruby 1.8.7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:56:21.193

1.8.7 没有 Oniguruma （可能被编译）没有负面的后视。

1.9.3；耶：

```
> s = "a;b;c\\;d"
=> "a;b;c\\;d"
> s.split /(?<!\\);/
=> ["a", "b", "c\\;d"] 
```

带有 Oniguruma 的 1.8.7 不提供微不足道的拆分，但您*可以获得*匹配偏移量并以这种方式拉开子字符串。我认为有更好的方法可以做到这一点，我不记得了：

```
> require 'oniguruma'
> re = Oniguruma::ORegexp.new "(?<!\\\\);"
> s = "hello;there\\;nope;yestho"
> re.match_all s
=> [#<MatchData ";">, #<MatchData ";">]
> mds = re.match_all s
=> [#<MatchData ";">, #<MatchData ";">]
> mds.collect {|md| md.offset}
=> [[5, 6], [17, 18]] 
```

其他选项包括：

*   对结果进行拆分`;`和后处理以寻找尾随`\\`，或
*   做一个逐字符循环并保持一些简单的状态，然后手动拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:13:04.020

正如@dave-newton 回答的那样，您可以使用否定的lookbehind，但这在1.8 中不受支持。在 1.8 和 1.9 中都可以使用的替代方法是使用[String#scan](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)而不是 split，其模式接受 not（分号或反斜杠）或以反斜杠为前缀的 anychar：

```
$ irb
>> RUBY_VERSION
=> "1.8.7"
>> s = "a;b;c\\;d"
=> "a;b;c\\;d"
s.scan /(?:[^;\\]|\\.)+/
=> ["a", "b", "c\\;d"] 
```

# java - 无法让 runtime.exec 在 android 上工作

> ID：11164237
> 
> 赞同：2
> 
> 时间：2012-06-22T21:15:29.753
> 
> 标签：java, android, runtime.exec

我似乎无法让 runtime.exec 在我的 android 应用程序中工作。我已经尝试了许多 shell 实用程序，这是我正在使用的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    filesPrinter = (Button) findViewById(R.id.print_files);
    filesPrinter.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                Process proc = Runtime.getRuntime().exec("ls");
                out = new BufferedWriter(new OutputStreamWriter(proc.getOutputStream()));
                in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
                String line;
                while((line = in.readLine()) != null) {
                    System.out.println(line);
                }
                System.out.println("Done reading");
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
 } 
```

我没有收到错误，但也没有在 logcat 中得到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:46:04.903

问题最终成为 eclipse logcat 的一个错误。使用 adb logcat，我可以看到应该输出的所有内容。出于某种原因，eclipse 上的 logcat 显示它已连接但没有从模拟器接收任何应用程序级别的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:22:16.037

也许您当前的工作目录（即`ls`不带任何参数的扫描目录）根本不包含文件。尝试提供路径作为命令参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:42:34.117

认为您缺少[proc.waitFor](http://developer.android.com/reference/java/lang/Process.html#waitFor%28%29) ()....

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    filesPrinter = (Button) findViewById(R.id.print_files);
    filesPrinter.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                Process proc = Runtime.getRuntime().exec("ls");
                out = new BufferedWriter(new OutputStreamWriter(proc.getOutputStream()));
                in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
                String line;
                while((line = in.readLine()) != null) {
                    System.out.println(line);
                }
                System.out.println("Done reading");
                //
                proc.waitFor(); // THIS!!!
                //
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
 } 
```

# javascript - 用于检测 CSV 文件类型的 Javascript 正则表达式？

> ID：11164238
> 
> 赞同：4
> 
> 时间：2012-06-22T21:15:39.637
> 
> 标签：javascript, regex

似乎有很多问题要求使用正则表达式来检测 CSV 文件类型，但对于 javascript 却没有。

鉴于图像的正则表达式看起来像`/^image\/(gif|jpeg|png)$/`，有谁知道 CSV 的正则表达式会是什么样子？

**编辑**更清楚一点，寻找“如何”来正则表达式检查文件是否为 CSV 以及相关的常见扩展名。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T21:17:36.123

CSV 文件扩展名通常为`.csv`. 所以尝试匹配：

`.+(\.csv)$`

# yii - CGridView 中的格式化日期过滤器

> ID：11164239
> 
> 赞同：0
> 
> 时间：2012-06-22T21:15:40.307
> 
> 标签：yii

我在 CGridView 中将我的日期显示为：“22.6.2012 22:53”，其中：

```
array('name' => 'date',
            'value' => date("j.n.Y G:i", strtotime($model->date))
        ), 
```

但是在我的过滤器中，我需要以这种格式（在数据库中）进行搜索以获得结果：“2012-06-22 22:53”。

如何使我的过滤器以 CGridView 中显示的格式工作？我已经搜索了答案，但没有找到答案，我还尝试在我的模型 search() 中为此属性添加日期函数：

```
$criteria->compare('date', date("j.n.Y G:i", strtotime($this->date), true); 
```

但后来我得到一个空列表:)

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:28:22.237

首先，您不应该使用该`value`属性来控制日期的格式。正确的方法是将[`type`](http://www.yiiframework.com/doc/api/1.1/CDataColumn#type-detail)属性设置为`'date'`，如果您还没有这样做，则设置[`CApplication.language`](http://www.yiiframework.com/doc/api/1.1/CApplication#language-detail)为以适当的语言环境为目标。

对于过滤器，最好使用`CJuiDatePicker`小部件让用户直观地选择日期；[这里](http://www.yiiframework.com/wiki/318/using-cjuidatepicker-for-cgridview-filter/)有一个关于如何做到这一点的简短而中肯的指南。

### 更新：

使用 格式化列`type == 'date'`是通过 完成[`CGridView.formatter`](http://www.yiiframework.com/doc/api/1.1/CGridView#formatter)的，如果您没有明确设置值，则默认值是`'format'`应用程序组件的任何内容。因此，您可以在现场指定和配置 a [`CFormatter`](http://www.yiiframework.com/doc/api/1.1/CFormatter)，或者如果您想使用应用程序的格式化程序，但只需稍作修改即可

```
$formatter = clone Yii::app()->format;
$formatter->dateFormat = 'whatever'; // or $formatter->dateTimeFormat 
```

然后将此实例分配给`CGridView.formatter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:28:06.407

compare() 用输入生成一个 sql 语句，所以我不得不将输入更改为我想要的格式。

我的功能：

```
function changeDateToDBformat($datum) {
        if (strstr($datum, '.') || strstr($datum, ':')) {
            $formats = array('!j.n', '!j.n.Y', '!j.n.Y H:i', '!n.Y H:i', '!n.Y', '!H:i', '!j.n.Y H', '!n.Y H', '!Y H:i', '!Y H');
            $date = false;

            foreach ($formats as $format) {
                $date = DateTime::createFromFormat($format, $datum);
                if (!($date === false)) {
                    $izbraniFormat = $format;
                    break;
                }
            }

            if (!$date === false) {
                $datum1 = $date->format('Y-m-d H:i');
                $date2 = DateTime::createFromFormat(substr($izbraniFormat, 1, strlen($izbraniFormat)), $datum);
                $datum2 = $date2->format('Y-m-d H:i');

                $datumcas1 = explode(' ', $datum1);
                $datumcas2 = explode(' ', $datum2);

                $prvidatum = explode('-', $datumcas1[0]);
                $drugidatum = explode('-', $datumcas2[0]);
                $koncniDatum = '';
                for ($a = 0; $a < sizeof($prvidatum); $a++) {
                    if ($prvidatum[$a] == $drugidatum[$a])
                        $koncniDatum .= '-' . $prvidatum[$a];
                }
                $koncniCas = '';
                $prvicas = explode('-', $datumcas1[1]);
                $drugicas = explode('-', $datumcas2[1]);
                for ($a = 0; $a < sizeof($prvicas); $a++) {
                    if ($prvicas[$a] == $drugicas[$a])
                        $koncniCas .= ':' . $prvicas[$a];
                }
                $koncniDatum = substr($koncniDatum, 1, strlen($koncniDatum));
                if (strlen($koncniCas) > 0)
                    $koncniDatum .= ' ' . substr($koncniCas, 1, strlen($koncniCas));

                $datum = $koncniDatum;
            }
        }
        return $datum;
    }
//translations:
//izbrani == selected
//datum == date
//cas == time
//koncni == end
//prvi == first
//drugi == second 
```

有了这个，用户可以输入“jnY H:i”格式的日期，也可以输入这种格式的一部分（jn，nY，YH：i，...）。

我要感谢 Jon 和 nickb 的帮助！[关联](https://stackoverflow.com/questions/11227510/format-datetime-from-input-string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T09:47:51.627

像许多其他人一样，我也为此苦苦挣扎，很好地显示网格不是问题，但在本地化日期时间中过滤是！所以我创建了自己的格式化程序，在`search()`我的模型函数中使用它（当将搜索参数传递给时`compare()`），它就像一个魅力。我现在可以过滤任何本地化中的日期/日期时间字段（我使用荷兰语）：

```
"30-12-2018" becomes "2018-12-30"
">30-12-2018" becomes ">2018-12-30"
"30-12-2018 23:59:49" becomes "2018-12-30 23:59:49"
">=30-12-2018 23:59:49" becomes ">=2018-12-30 23:59:49" 
```

我的本地化：

```
// dateFormat['short'] = 'dd-MM-yyyy'
// timeFormat['medium'] = 'HH:mm:ss'
Yii::app()->format->datetimeFormat = strtr(Yii::app()->locale->dateTimeFormat, 
                            array("{0}" => Yii::app()->locale->getTimeFormat('medium'),
                                  "{1}" => Yii::app()->locale->getDateFormat('short')));
       Yii::app()->format->dateFormat = 'short';
       Yii::app()->format->timeFormat = 'medium'; 
```

我的 CGridView 包含以下日期时间列：

```
'mutation_date_time:dateTime' 
```

和（一个片段）我自己的格式化程序有一些方便的功能：

```
class Formatter extends CLocalizedFormatter
{
    public function formatWithoutSearchOperator($value)
    {
        // This snippet is taken from CDbCriteria->compare()
        if(preg_match('/^(?:\s*(<>|<=|>=|<|>|=))?(.*)$/',$value,$matches))
        {
            $value=$matches[2];
            $op=$matches[1];
        }
        else
            $op='';

        return $value;
    }

    public function formatOnlySearchOperator($value)
    {
        // This snippet is taken from CDbCriteria->compare()
        if(preg_match('/^(?:\s*(<>|<=|>=|<|>|=))?(.*)$/',$value,$matches))
        {
            $value=$matches[2];
            $op=$matches[1];
        }
        else
            $op='';

        return $op;
    }

    /*
    * Format a localized datetime back to a database datetime (Y-m-d H:i:s).
    * If a comparison operator is given, it is preserved. So strip it if you need to save the date in the database.
    * If no time given, it's also not returned (MySQL database appends '00:00:00' as time to it upon saving).
    * With this function the following localized datetimes just work like the stock datetime filters:
    *   - "30-12-2018" becomes "2018-12-30"
    *   - "30-12-2018 " becomes "1970-01-01" (note the extra space in input)
    *   - ">30-12-2018" becomes ">2018-12-30"
    *   - "30-12-2018 23:59:49" becomes "2018-12-30 23:59:49"
    *   - ">=30-12-2018 23:59:49" becomes ">=2018-12-30 23:59:49"
    * 
    * For save() and afterFind() integration see:
    * https://github.com/YetOpen/i18n-datetime-behavior
    */
    public function formatToDatabaseDatetime($value)
    {
        // get the comparison operator from the string:
        $comparator = $this->onlySearchOperator($value);

        // get the datetime without the comparison operator:
        $datetime = $this->withoutSearchOperator($value);

        // parse the given datetime according to the locale format to a timestamp
        $datetime_parsed = CDateTimeParser::parse(
            $datetime, 
            strtr(
                Yii::app()->locale->datetimeFormat, 
                array(
                    "{0}" => Yii::app()->locale->getTimeFormat(Yii::app()->format->timeFormat),
                    "{1}" => Yii::app()->locale->getDateFormat(Yii::app()->format->dateFormat)
                )
            )
        );

        // if its not a valid date AND time, check if it can be parsed to a date only:
        if($datetime_parsed === false)
        {
            $date_parsed = CDateTimeParser::parse(
                $datetime, 
                Yii::app()->locale->getDateFormat(Yii::app()->format->dateFormat)
            );
        }

        // If no time part given, also output only the date
        if($datetime_parsed===false)
        {
            $transformed = date(
                'Y-m-d', 
                $date_parsed
            );
        }
        else
        {
            $transformed = date(
                'Y-m-d H:i:s', 
                $datetime_parsed
            );
        }

        return  $comparator . $transformed;
    }
} 
```

在`search()`我的 CActiveRecord 模型的函数中，我使用以下内容将本地化的日期时间与数据库中的记录进行比较：

```
$criteria->compare('mutation_date_time',Yii::app()->format->toDatabaseDateTime(trim($this->mutation_date_time)),true); 
```

请注意`trim()`，这是设计使然（请参阅函数描述 formatToDatabaseDateTime()）。

直接以正确的数据库格式过滤的一大区别：无效日期转换为“1970-01-01”！

我非常感谢反馈，我真的希望我的代码可以帮助别人！

# javascript - jQuery：从 AJAX 请求调用函数

> ID：11164247
> 
> 赞同：1
> 
> 时间：2012-06-22T21:16:08.413
> 
> 标签：javascript, jquery, ajax, datatables, generic-handler

当我从我的 ajax 调用中获得成功时，我试图调用一个函数，但它不起作用。这是我到目前为止所尝试的。

```
function dtMRPReasonCode(dt) {
    var data = null;

    jQuery.ajax({
        type: "POST",
        data: {},
        url: "Index.aspx/getMRPReasonCodeReport",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success: function(msg) {
            if (msg.d) {
                console.log(dt);
                console.log(msg.d);
                buildTableBody(dt, msg.d);
            }
        },

        error: function(xhr, ajaxOptions, thrownError) {
            alert("Error: dtMRPReasonCode");
        }
    });

    return false;

}

function buildTableBody(dt, obj) {   
    dt.fnClearTable();
    data = [];

    $(obj).each(function(index, value) {
        element = [];

        element.push(value.Metric);
        element.push(value.Region);
        element.push(value.Plant);
        element.push(value.Customer);
        element.push(value.IMAC);
        element.push(value.NotFilled);
        element.push(value.Filled);
        element.push(value.Total);

        data.push(element);
    });

    dt.fnAddData(data);
} 
```

![在此处输入图像描述](../Images/cca4062b6df5bfc0dc5ccf26c78e950d.png) 提前致谢！

# 编辑#1

我用来`console.log`向你展示我从中得到了什么`dt`（`msg.d`图片）

# 编辑#2

`buildTableBody`如果我将函数中的命令粘贴到`success:`处理程序中，而不是在处理程序中调用`buildTableBody`函数，`success:`它实际上可以工作：

```
function dtMRPReasonCode(dt) {
    var data = null;

    jQuery.ajax({
        type: "POST",
        data: {},
        url: "Index.aspx/getMRPReasonCodeReport",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success: function(msg) {
            dt.fnClearTable();
            data = [];

            $(msg.d).each(function(index, value) {
                element = [];

                element.push(value.Metric);
                element.push(value.Region);
                element.push(value.Plant);
                element.push(value.Customer);
                element.push(value.IMAC);
                element.push(value.NotFilled);
                element.push(value.Filled);
                element.push(value.Total);

                data.push(element);
            });

            dt.fnAddData(data); 
        },

        error: function(xhr, ajaxOptions, thrownError) {
            alert("Error: dtMRPReasonCode");
        }
    });

    return false;
} 
```

但这对我来说毫无意义，因为这实际上应该以两种方式起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:20:20.943

很确定你的函数调用有错字

```
buildTableBody(td, msg.d); 
```

应该

```
buildTableBody(dt, msg.d); 
```

还有什么是返回类型`Index.aspx/getMRPReasonCodeReport`？如果是`string`，则必须先对字符串进行转义，然后才能将其视为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:21:22.643

尝试`contentType : "application/json utf-8"`从您的 AJAX 调用中删除。那是发送到服务器的数据类型。您可能需要默认内容类型。

除非您的服务器端资源配置为接受它可能接受的 json`application/x-www-form-urlencoded`

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# .net - .NET IHttpHandlers - 每个 AJAX 请求中的不同会话

> ID：11164253
> 
> 赞同：0
> 
> 时间：2012-06-22T21:17:00.367
> 
> 标签：.net, ajax, session, jsonp, ihttphandler

我正在编写一个 jQuery Mobile 应用程序，该应用程序向`IHttpHandler`我的服务器上的几个不同类发出多个 AJAX 请求。处理程序都返回 JSON 或 JSONP，并包含`context.Session.SessionID`在 JSON 中，用于调试目的。我向第一个处理程序发出一个请求，并取回会话 ID“2jysbehwyxlne0knatltcb2z”。我向另一个处理程序发出另一个请求，并取回会话 ID“qy3v251fxrxesbgqeobqvaza”。这是在几秒钟之内。到底是怎么回事？我希望会话 ID 是相同的，直到会话在延长时间后过期。

当我在他们自己的选项卡中打开请求时，而不是通过同一选项卡中的 AJAX，我得到相同的会话 ID。因此，对于我的身份验证请求和其他检索数据的请求，当这些请求作为页面中的 AJAX 请求发生时，会话 ID 是不同的。当我浏览 Chrome 控制台中的网络选项卡并右键单击，在新选项卡中打开链接每个请求时，它们按预期运行，具有相同的会话 ID。

如果这很重要，我正在运行 jQuery Mobile 应用程序`http://localhost`，并向处理程序发出请求`https://localhost`。我所有的处理程序都实现了`IRequiresSessionState`. [这个问题](https://stackoverflow.com/questions/3526502/preserve-session-variables-across-httphandlers)看起来和我的一样，它唯一的答案是实现`IRequiresSessionState`，我已经在做。

**编辑：** [这个问题](https://stackoverflow.com/questions/779455/using-jquery-jsonp-internet-explorer-isnt-saving-the-asp-net-sessionid)可能是相关的，但我在 Chrome 中观察到这种行为。

**编辑：**我正在使用 jQuery 的`getJSON`函数来发出 AJAX 请求。 [这个](https://stackoverflow.com/questions/6930650/jquery-getjson-doesnt-send-cookies)关于`getJSON`cookie 的问题可能是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:44:39.813

我想我的问题可能是我使用 jQuery 的[getJSON](http://api.jquery.com/jQuery.getJSON/)方法来发送 AJAX 请求。我最终添加`<sessionState cookieless="true" />`到我的 Web.config，所以现在我的处理程序坚持`S(the_session_id))`到 URL。当我向处理程序发送第一个请求时，我将在我的 JSON 中返回的会话 ID 存储在 HTML 5 本地存储中。所有后续请求，我都会在 URL 中传递该会话 ID。这不是一个理想的解决方案，我可能会进一步调查，看看是否可以再次将 cookie 用于我的会话。

# ruby - 如何使用黄瓜在场景之间共享状态

> ID：11164255
> 
> 赞同：5
> 
> 时间：2012-06-22T21:17:07.100
> 
> 标签：ruby, tdd, cucumber, bdd

我有一个功能“从外部网站导入文章”。在我的第一个场景中，我测试从外部网站导入链接列表。

```
Feature: Importing articles from external website
  Scenario: Searching articles on example.com and return the links
    Given there is an Importer
    And its URL is "http://example.com"
    When we search for "demo"
    Then the Importer should return 25 links
    And one of the links should be "http://example.com/demo.html" 
```

在我的步骤中，我在一个`@result`数组中有 25 个链接。

在我的第二种情况下，我想获取其中一个链接并测试我正确解析文章的事实。

现在显然我不想每次都去外部网站，尤其是现在第一个场景已经过去了。

如何在此处继续进行，以便在不为第一个场景发出 HTTP 请求的情况下继续测试？或者我应该运行一次并`@result`在其余场景中保留数组，以便我可以继续使用实际结果集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T08:16:01.827

这是故意很难做到的！在测试之间共享状态通常是一件非常糟糕的事情，尤其是因为它迫使你的测试按顺序运行（你的第一个场景必须在后续的场景之前运行，而不是 Cucumber 明确支持的东西）。

我的建议是重新考虑您的测试策略。在测试中使用外部服务是使它们运行缓慢且不可靠的好方法（当外部服务出现故障时会发生什么？）。在这种情况下，我建议使用[webmock](https://github.com/bblimke/webmock)或[vcr](https://github.com/myronmarston/vcr)之类的东西来创建外部站点的假版本，它返回的响应与您对真实站点的期望相同，但是您可以在没有担心性能或不可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-01T23:42:17.013

我发现在技术上可以使用

@@global_variable 在步骤定义中共享全局状态。

但是，就像其他人指出的那样，这可能不是一个好主意。

我试图避免在类似情况下重复登录步骤。同样，这可能不是一个好习惯。在真正需要的时候使用这个技巧

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T08:50:44.380

您不应该在场景之间共享状态。场景描述了整个系统的预期行为，应该可以只运行一个场景。例如，如果您已经运行了整个测试套件，并且发现一个场景失败了，那么您应该能够只运行那个场景来调查出了什么问题。

您的问题出现是因为您尝试联系外部系统。这是不可取的。它不仅使您的测试套件运行得更慢，而且还使测试依赖于您无法控制的外部系统。如果外部系统未运行，则您的测试未运行。如果外部测试不包含您期望的数据，即使您自己的系统中没有错误，您的测试也会失败。你最终让你的测试由你期望在外部系统中的内容来控制，而不是根据你需要测试的内容来控制外部系统中的内容。

相反，您应该模拟外部系统，并让您的场景控制模拟系统将提供的内容：

```
Scenario: Query external system
    # These two lines setup expected data in a mocked version of the external system
    Given there the system x contains an article named "y"
    And the article contains the text "Lorep ipsum"
    When I query for article "y"
    Then I should see the text "Lorem ipsum" 
```

此场景独立于外部系统中的任何实际数据，因为它明确指定了需要存在的内容。更重要的是，它清楚地描述了您自己的系统应该如何运行。

这种形式的场景也可以传达给利益相关者，他们可以验证场景，而无需对这些外部系统中存在的任何测试数据有任何先验知识。

运行适当的框架可能需要一些时间，但最终，这是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T16:45:17.917

我用一个文件。我有一个创建新用户的案例，然后我想注销并在其他功能中使用同一用户重新登录。

我生成用户：

```
@randomName = [*('a'..'z')].sample(8).join 
```

然后我将用户保存到一个文件中：

```
File.open("randomName.txt", 'w') {|f| f.write("#{@randomName}") } 
```

后来，当我在其他功能中需要该数据时，我使用：

```
@randomName = data = File.read("randomName.txt") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-06T14:58:56.950

我还没有看到任何让我想使用这些 DI 小框架的东西。我只是在存储会话数据的类中创建了一个静态初始化程序，并让所有步骤定义类扩展该类。它可以工作，我不必在我的项目中添加更多库。

```
public class MyAbstractClass {
    public static final Object param1;
    public static final Object param2;
    public static final Object param3;

    static {
        // initialize params here
    }

public class MyStepDefinition extends MyAbstractClass {} 
```

如果您需要可以随时间变化的数据，只需将它们声明为非静态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-12T10:36:50.437

使场景依赖或在场景之间共享数据不是一个好的做法。

一些解决方案 1) Cucumber 提供**Background**标签来运行每个场景的前提条件。

2) Cucumber 提供了钩子@Before 和@after，可以为每个场景定制。

# javascript - 在这种情况下 .fail() 或 .timeout() 更好吗？

> ID：11164256
> 
> 赞同：3
> 
> 时间：2012-06-22T21:17:12.187
> 
> 标签：javascript, jquery, ajax, mobile, jquery-mobile

我需要处理对 jQueryMobile 项目的 $.ajax() 调用的超时。做一些研究，我遇到了两种可行的方法。

~~`.error()`~~ `.fail()`似乎是通用的：如果调用因任何原因失败，那么我将被踢回一个错误堆栈，然后编写函数调用来处理我需要的任何事情。

`.timeout`，似乎让我专门处理超时并指定我可以等待的时间段，如果我没有收到答案，则调用超时并引发错误。

我的问题是在移动环境中，处理`.timeout()`通话超时会更好吗？或者我应该用函数覆盖所有调用并在错误回调中处理超时？~~`.error()`~~ `.fail()`

使用移动设备时，预计用户可能会走出覆盖区域，因此如果呼叫永远不会返回，我的直觉会说实现超时功能。错误回调是否有内置超时？我想优雅地处理所有错误，所以似乎一个快乐的媒介会同时实现这两者，并指定超时以直接与超时回调一起工作。

有什么我可能在这里遗漏的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:57:28.923

**超时事件将触发`fail()`-function！**

`$.ajax()`您应该为-request设置超时值。

```
$.ajax({
     timeout: 15000 // 15sec
    }); 
```

如果 ajax-request 在这段时间内没有收到响应，它将执行在 -function 中传递的`.fail()`函数。

```
$.ajax()
  .fail(function(jqXHR, textStatus, errorThrown) { 
        if(textStatus === 'timeout') {
             alert("$.ajax failed!"); 
        {
  }); 
```

# c# - 如何在C#中自动对按钮单击进行文本框验证

> ID：11164266
> 
> 赞同：0
> 
> 时间：2012-06-22T21:17:43.017
> 
> 标签：c#, winforms, validation

Windows 窗体应用程序 C#

我`TextBox`在 windows 上有四个`Form`。我已经编写了代码来处理`Text_Validating`每个文本框的事件。现在，当用户单击提交时，`Button`我希望那些 text_validating 事件自动触发。

Button 的Enabled`CausesValidation`属性。

我们在 ASP.net 中有一个叫做 validationGroup 属性的东西，它是如何在 Windows 应用程序中实现的

请帮我解决这个问题

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:25:10.817

`Winforms`此外，您可以使用以下验证器编写自己的验证器控件，例如 asp.net：- 。

```
RequiredFieldValidator  
RegularExpressionValidator  
CompareValidator    
RangeValidator  
CustomValidator 
```

这是关于如何使用自定义验证库扩展 Winforms 的分步说明和演练 - [http://msdn.microsoft.com/en-us/library/ms950965.aspx](http://msdn.microsoft.com/en-us/library/ms950965.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:19:38.383

一种选择是简单地调用传入必要参数的验证方法（空值可能会起作用 - 显示代码将有助于确定是否有必要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:27:25.833

我相信 Text_Validating 事件仅在控件的焦点更改时触发。如果您对提交验证感兴趣，您可以执行用户 Bruce 在[这篇](https://stackoverflow.com/questions/769184/winform-ui-validation)文章中提出的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T00:04:32.600

单击按钮时，请使用：

```
if(ValidateChildren())
{
      //do stuff
} 
```

# variables - 需要帮助创建一个通用函数来检查值

> ID：11164271
> 
> 赞同：0
> 
> 时间：2012-06-22T21:18:14.663
> 
> 标签：variables

任何人都对如何创建一个通用函数以更短的方式执行此操作有任何想法？

```
if (($item['Quantity'] > 9) && ($item['Quantity'] < 20)) {  $bogo_item = 1; }
else if (($item['Quantity'] > 19) && ($item['Quantity'] < 30))  { $bogo_item = 2; } else if (($item['Quantity'] > 29) && ($item['Quantity'] < 40))  { $bogo_item = 3; } else if (($item['Quantity'] > 39) && ($item['Quantity'] < 50))  { $bogo_item = 4; }
... 
```

等等......基本上，我想创建一个函数来检查和比较变量 $item['Quantity'] 并查看它是否适合其中一种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:39:25.663

这是一个典型的查找问题......

您可以创建一个三元组数组：（我不是 PHP 程序员，但这里有一些 JavaScript）

```
// position 0=lower limit, position 1=upper limit, position 2=bogo item value
var values = [ [9, 20, 1], [19, 30, 2], [29, 40, 3], [39, 50, 4] ]; 
```

然后你可以编写一个通用循环：

```
for (var i= 0; i < values.length; ++i) {
    if ((item.quantity > values[i][0] && (item.quantity < values[i][1]) {
        return values[i][2];
    }
} 
```

高温高压

# java - 光标在两个字段中闪烁 (JTextField)

> ID：11164273
> 
> 赞同：1
> 
> 时间：2012-06-22T21:18:25.197
> 
> 标签：java, swing, focus, jtextfield, caret

你好？有人遇到过这样的问题：光标一次在多个字段中闪烁？在我的情况下，会发生以下情况：当您双击字段 JTextField 时，会打开一个 JDialog，因此在关闭此字段后，焦点会回到打开屏幕之前单击的字段。

发生的情况是执行此操作后，两个字段同时闪烁（通常是第一个字段屏幕，以及 efetuei 双击的字段）。这种媒介是随机的，在某些情况下它不会发生。

在调试内部类 Handler 时，包含在类 DefaultCaret 中，更具体地说是 actionPerformed 方法，意识到：时间是一个字段，时间是另一个字段，它们正是闪烁的字段（q 似乎很明显我知道）。但它们是调用该方法的 Java 内部类。

使用 Tab 越过字段时，光标 false 消失。

我正在使用 JDK 6

* * *

我在 invokeLater() 中返回了焦点，但没有解决。现在两者同步闪光

第一个可聚焦的 JComponent 是不正确闪烁的字段之一

我正在使用自己的 FocusTraversalPolicy，这可能会产生影响吗？有趣的是，我的班级并没有什么特别奇怪的待遇。

我注意到标准 Java 类，使用 Syncronized getFirstComponent() 中的方法，但添加了相同的控件，但仍然不行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T08:06:12.487

实际上这对我来说是焦点问题。

通常当`JTextComponent`失去焦点`setCaretVisible(false)`/`setSelectionVisible(false)`被调用并且当焦点获得相反的事情发生。

关闭后`JDialog`尝试返回 Focus 里面`invokeLater()`。还要检查' 的父级`JComponent`中的第一个焦点是什么。`JDialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:18:03.767

出现这种情况是因为我正在开发的项目比较大，所以不要拿到小实现的例子

该项目有许多组件，表和容器，需要同时关注。

原来Swing，把很多线程放到一个队列中执行，然后dispatch就去，趁他还没跑完，就塞着grabFocus()或者requestFocus()，不哭，首先他必须完成所有事情，然后运行我的请求焦点。

使用 Swing SwingUtilities.invokeLater(...); 姑息性地解决了这种情况；

感谢您的提示。

# jquery - jquery ui 可拖动包含如何工作？

> ID：11164274
> 
> 赞同：3
> 
> 时间：2012-06-22T21:18:29.800
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

**编辑**我终于弄清楚了我在我的网站上遇到的问题，在这个例子中得到了证明：http: [//jsfiddle.net/DerNa/10/](http://jsfiddle.net/DerNa/10/)。您在这里看到的是#frame 容器从 0/0 位置（到 50/50 位置）移动。由于某种原因，图片是相对于“窗口”而不是父容器的。有谁知道我如何使它相对于父容器？

**旧问题如下**

我不知道这是如何工作的，例如：http: [//jsfiddle.net/DerNa/4/](http://jsfiddle.net/DerNa/4/)

基本上我的问题来自我在网上找到的内容，通过玩这个例子我可以推断出 [container_width-image_width, container_height-image_height, ? ?]。前两个是您希望将可拖动对象包含在其中的不可见容器的左上边缘是有道理的。但是，我不确定最后两个值是如何工作的，它们是右/下或宽度/高度，但在提供的示例中似乎都没有多大意义。

如果有人能对此有所了解，将不胜感激！

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:27:24.787

根据[http://api.jqueryui.com/draggable/#option-containment](http://api.jqueryui.com/draggable/#option-containment)

遏制：

> 将拖动限制在指定元素或区域的范围内。可能的字符串值：'parent'、'document'、'window'、[x1, y1, x2, y2]。

所以数字是 X,Y 格式的开始和结束坐标。在你的小提琴中，你有：

```
containment:[-500,-127,0,0] 
```

转换为 -500、-127 和 0,0。所以基本上包含设置为左侧 500 像素和起始位置上方 127 像素的位置，结束包含 0,0 或者更确切地说是图像最初所在的位置。

# c# - 如何将 cookie 添加到 WebRequest？

> ID：11164275
> 
> 赞同：36
> 
> 时间：2012-06-22T21:18:30.517
> 
> 标签：c#, .net, unit-testing

我正在尝试对一些代码进行单元测试，我需要替换它：

```
 HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create( uri );
  httpWebRequest.CookieContainer = new CookieContainer(); 
```

和

```
 WebRequest webRequest = WebRequest.Create( uri );
  webRequest.CookieContainer = new CookieContainer(); 
```

基本上，如何在不使用 HttpWebRequest 的情况下将 cookie 放入请求中？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-22T21:37:55.457

根据您的评论，您可能会考虑编写[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)：

```
public static bool TryAddCookie(this WebRequest webRequest, Cookie cookie)
{
    HttpWebRequest httpRequest = webRequest as HttpWebRequest;
    if (httpRequest == null)
    {
        return false;
    }

    if (httpRequest.CookieContainer == null)
    {
        httpRequest.CookieContainer = new CookieContainer();
    }

    httpRequest.CookieContainer.Add(cookie);
    return true;
} 
```

然后你可以有这样的代码：

```
WebRequest webRequest = WebRequest.Create( uri );
webRequest.TryAddCookie(new Cookie("someName","someValue")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T21:28:25.977

尝试这样的事情：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.contoso.com/default.html");
request.CookieContainer = new CookieContainer();
request.CookieContainer.Add(new Cookie("ConstoCookie", "Chocolate Flavour")); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-22T21:39:17.190

WebRequest 是一个没有 CookieContainer 属性的抽象类。此外，您不能使用 Headers 集合（未实现的异常），因此任何尝试 webRequest.Headers.Add("Cookie", "...") 都会失败。

抱歉，您没有机会在 WebRequest 中使用 cookie。

坚持使用 HttpWebRequest 并使用其 Headers 集合添加/编辑任意数量的 cookie！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-19T09:46:58.137

dlev 的回答最终奏效了，但我在实现解决方案时遇到了问题（“参数 '{0}' 不能是空字符串。”），所以我决定编写完整的代码以防其他人遇到类似问题。

我的目标是将 html 作为字符串获取，但我需要将 cookie 添加到 Web 请求中。这是使用 cookie 下载字符串的函数：

```
public static string DownloadString(string url, Encoding encoding, IDictionary<string, string> cookieNameValues)
{
    using (var webClient = new WebClient())
    {
        var uri = new Uri(url);
        var webRequest = WebRequest.Create(uri);
        foreach(var nameValue in cookieNameValues)
        {
            webRequest.TryAddCookie(new Cookie(nameValue.Key, nameValue.Value, "/", uri.Host));
        }                
        var response = webRequest.GetResponse();
        var receiveStream = response.GetResponseStream();
        var readStream = new StreamReader(receiveStream, encoding);
        var htmlCode = readStream.ReadToEnd();                
        return htmlCode;
    }
} 
```

我们正在使用 dlev 答案中的代码：

```
public static bool TryAddCookie(this WebRequest webRequest, Cookie cookie)
{
    HttpWebRequest httpRequest = webRequest as HttpWebRequest;
    if (httpRequest == null)
    {
        return false;
    }

    if (httpRequest.CookieContainer == null)
    {
        httpRequest.CookieContainer = new CookieContainer();
    }

    httpRequest.CookieContainer.Add(cookie);
    return true;
} 
```

这是您使用完整代码的方式：

```
var cookieNameValues = new Dictionary<string, string>();
cookieNameValues.Add("varName", "varValue");
var htmlResult = DownloadString(url, Encoding.UTF8, cookieNameValues); 
```

# opengl - 如何在没有 glDrawPixels 的情况下将缓冲区对象渲染/绘制到帧缓冲区

> ID：11164276
> 
> 赞同：7
> 
> 时间：2012-06-22T21:18:33.613
> 
> 标签：opengl

根据 opengl 规范 4.0 glDrawPixels 已被弃用。

对于 cuda 互操作性，似乎最好使用“opengl 缓冲区对象”。（替代方法可能是纹理或表面，但它们存在缓存/并发问题，因此不适用于我的 cuda 内核）。

我只是想创建一个 cuda 内核，它使用这个映射的 opengl 缓冲区对象并将其用作“像素数组”或一块保存像素的内存，稍后缓冲区未映射。

然后，我希望 opengl 程序将缓冲区对象绘制到帧缓冲区。我想使用未弃用的 opengl api。

还有哪些其他方法/api可以将缓冲区对象绘制到帧缓冲区？（也不能使用渲染缓冲区，因为它们可能与 cuda 数组/缓存问题有相同的问题，所以这排除了帧缓冲区对象/扩展？！？）。

现在 glDrawPixels 已被弃用，opengl 4.0 中是否存在差距/缺失功能？还是有替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:45:16.643

`glDrawPixels`已从GL 3.2 及更高版本中*删除*（未弃用。弃用的意思是“可用但将来会删除”）。它被删除是因为它通常不是将像素数据绘制到屏幕上的快速方法。

最好的办法是使用[`glTexSubImage2D`](http://www.opengl.org/wiki/GLAPI/glTexSubImage2D)将[其上传到纹理](http://www.opengl.org/wiki/Pixel_Buffer_Object)，然后将其绘制到屏幕上。或者使用[`glBlitFramebuffer`](http://www.opengl.org/wiki/GLAPI/glBlitFramebuffer).

# c# - ASP.NET Server.MapPath 和 SharePoint 文档库

> ID：11164277
> 
> 赞同：2
> 
> 时间：2012-06-22T21:18:41.707
> 
> 标签：c#, asp.net, sharepoint

我有一个 C# 应用程序，它需要在特定的 SharePoint Web 环境中填充所有文件名的列表，其中有一个特定的文档库，我必须从中读取所有文件名。

假设相关文档库的 URL 是“http://example.com/lib.aspx”。

如果我像这样使用 Server.MapPath ：

```
Directory.GetFiles(Server.MapPath("http://example.com/lib.aspx"), SearchOption.TopDirectoryOnly); 
```

这将有效地将文档库视为物理路径名并成功填充文件名数组，对吗？

我目前没有能力对此进行测试，我想知道这个操作是否有效；换句话说，文件名（很可能）会被成功编入索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:24:08.240

那根本行不通。库中的文档不在服务器的文件系统中。

如果要枚举库中的所有文件，则可以使用[库的](http://msdn.microsoft.com/en-us/library/ms460729)[Items](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.items)属性，对于每个项目，使用[File](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.file)属性来检索与该项目关联的[SPFile 。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile)

# structuremap - StructureMap 依赖解析：手动从 ActionFilter 获取实例

> ID：11164281
> 
> 赞同：2
> 
> 时间：2012-06-22T21:19:30.827
> 
> 标签：structuremap, asp.net-web-api

我正在尝试使用 StructureMap 遵循本教程：http: [//iridescence.no/post/Constructor-Injection-for-ASPNET-MVC-Action-Filters.aspx](http://iridescence.no/post/Constructor-Injection-for-ASPNET-MVC-Action-Filters.aspx)

我想弄清楚的是这一行的 StructureMap 等价物：

```
var container = (ICanResolveDependencies) HttpContext.Current.ApplicationInstance; 
```

我想取回容器，所以我可以手动解决那里的依赖关系。

这就是我在 global.asax 中设置依赖解析器的方式

```
 GlobalConfiguration.Configuration.ServiceResolver.SetResolver(
            new StructureMapDependencyResolver(container)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:51:50.290

您可能只需要`IContainer`在您的操作过滤器的构造函数中依赖。如果它不是由 自动注册的`StructureMap`，您可以使用以下方式注册它：

```
For<IContainer>().Use<Container>(); 
```

* * *

**编辑**

**选项1：**你不能只使用类似的东西：

```
GlobalConfiguration.Configuration.ServiceResolver.GetService(...)
// or (not sure what would be the right syntax)
GlobalConfiguration.Configuration.ServiceResolver.Current.GetService(...) 
```

一旦你设置了它，就必须有某种方法来检索当前的服务解析器。

**选项 2：**使用常规 MVC，您可以获得当前的解析器，如下所示：

```
DependencyResolver.Current 
```

并像这样使用它：

```
DependencyResolver.Current.GetService() 
```

看起来 WebAPI 不使用 DependencyResolver，但根据[这篇博](http://slynetblog.blogspot.com/2012/03/using-aspnet-mvc-4-webapi-with.html)文，你可以这样设置：

```
DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
// this override is needed because WebAPI is not using DependencyResolver to build controllers
GlobalConfiguration.Configuration.ServiceResolver.SetResolver(
    DependencyResolver.Current.GetService,
    DependencyResolver.Current.GetServices); 
```

现在尝试`DependencyResolver.Current`从您的操作过滤器中使用。

**选项 3：**直接使用`ObjectFactory.GetInstance`- 在 MVC 项目中可能不是最好的主意，因为它应该已经封装在 IDependencyResolver 实例中。

# php - 困惑于为什么 PHP 在 if 语句上给出简单的逻辑错误

> ID：11164283
> 
> 赞同：0
> 
> 时间：2012-06-22T21:19:34.760
> 
> 标签：php

就像标题所说的那样，PHP 在一个简单的 if 比较语句上真的让我感到困惑，它返回的结果与它应该返回的相反。我正在尝试比较首先转换为字符串的 2 个日期时间：

```
//Fetched db query, this returns 2012-06-23 16:00:00
$databaseDateTime = strtotime($row['time']);
//This now returns 1340481600

//today's date and time I'm comparing to, this returns 2012-06-22 17:14:46 
$todaysDateTime = strtotime(date("Y-m-d H:i:s"));
//this now returns 1340399686 
```

太好了，到目前为止一切正常。现在这是事情变得多毛的地方：

```
if ($databaseDateTime < $todaysDateTime) { $eventType = 'past'; } 
```

这会返回“过去”，这当然不应该。请告诉我我错过了什么。我的项目类型取决于此功能是密封的。

******编辑***** 感谢大家抽出时间来帮助我。让我发布整个代码，因为你们中的一些人需要更多上下文。请求来自 IOS5 到我的后端代码，并且 json 被发送回手机。**

 **```
<?php
 //all included files including $link to mysqli_db and function sendResponse()

 function getEvents($eventType, $eventArray) {
   global $link;
   global $result;
   global $i;
   global $todaysDateTime;
   foreach ($eventArray as $key => $value) {
       $sqlGetDeal = mysqli_query($link, "SELECT time FROM deals WHERE id='$value' AND  active='y' LIMIT 1") or die ("Sorry there has been an error!");

    while ($row = mysqli_fetch_array($sqlGetDeal)) {

       //compare times to check if event already happened
       $databaseDateTime = strtotime($row['time']);
       if ($databaseDateTime < $todaysDateTime) { $eventType = 'past'; }

      $result[$i] = array(
        'whenDeal' => $eventType,
        'time' => $databaseDateTime,
      );
      $i++;
    }//end while

  }//end foreach
 }

 if (isset($_GET['my'])) {
   //$_GET['my'] comes in as a string of numbers separated by commas e.g. 3,2,6,3
   $myDeals = preg_replace('#[^0-9,]#', '', $_GET['my']);
   $todaysDateTime = strtotime(date("Y-m-d H:i:s"));
   $result = array();

   $kaboomMy = explode(",", $myDeals);

   $i = 1;
   if ($myEvents != "") {
     getEvents('future', $kaboomMy);
   }//end if

   sendResponse(200, json_encode($result));

 } else {
   sendResponse(400, 'Invalid request');
 } //end $_POST isset

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:26:37.067

找到了一个快速解决这个问题的方法。我刚刚在我的函数中添加了一个局部变量并重新排列了我的比较语句

```
//added local variable $eventTyppe to function
$eventTyppe; 
```

更改比较：

```
 if ($databaseDateTime < $todaysDateTime) { $eventType = 'past'; } 
```

到：

```
if ($todaysDateTime < $databaseDateTime ) { 
     $eventTyppe = $eventType; 
  } else { 
     $eventTyppe = 'past'; 
  } 
```

请注意，如果我重新排列比较：

```
if ($databaseDateTime < $todaysDateTime ) { 
   $eventTyppe = 'past'; 
 } else { 
   $eventTyppe = $eventType; 
 } 
```

我仍然得到同样的错误。这是我见过的最奇怪的事情，也是我遇到的第一个 PHP 错误（我假设它是一个 PHP 错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:01:15.303

你能打印出这一行之前的时间值吗？

if ($databaseDateTime < $todaysDateTime) { $eventType = '过去'; }

既然那个被宣布为全球性的，我想知道它是否会错误地返回。**

# python - Pythonic，优雅的动态定义静态定义函数列表的方式？

> ID：11164286
> 
> 赞同：4
> 
> 时间：2012-06-22T21:19:47.427
> 
> 标签：python, dynamic, scripting, static

我最近才开始学习 Python。让我解释一下我要完成的工作。我有这个 .py 脚本，它基本上有几个函数（硬编码到脚本中），都需要添加到一个列表中，这样我就可以通过简单地使用索引运算符来获得我需要的函数，如下所示：

需要函数 = 函数列表[需要函数索引]

我第一次尝试实现这一点导致了以下代码结构：

```
(imports)
function_list = []
(other global variables)

def function_0 = (...)
function_list.append(function_0)

def function_1 = (...)
function_list.append(function_1)

def function_2 = (...)
function_list.append(function_2)

(rest of code) 
```

但我不喜欢那个解决方案，因为它不是很优雅。我的目标是能够简单地将函数定义添加到脚本中（没有附加调用），脚本会自动将其添加到函数列表中。

我曾想过在另一个函数中定义所有函数，但我不认为我会得到这些。我想也许用装饰器“标记”每个函数，但我意识到装饰器（如果我理解正确的话）在每次调用函数时都会被调用，而不仅仅是一次。

一段时间后，我想出了这个解决方案：

```
(imports)
(global variables)

def function_0 = (...)

def function_1 = (...)

def function_2 = (...)

function_list= [globals()[x] for x in globals() if re.match('^function_[0-9]+$', x)]

(rest of code) 
```

作为一种解决方案，我更喜欢它，但我唯一的疑虑是，出于整洁的目的，我更愿意在脚本顶部完全定义 function_list。但是，我不能这样做，因为在脚本顶部调用 globals() 将不包含这些函数，因为它们尚未定义。

也许我应该简单地满足于一个不太优雅的解决方案，或者也许我没有以惯用的方式编写我的脚本。无论如何，任何输入和建议都将受到赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T21:23:55.370

你误会了装饰器。它们在定义函数时被调用一次，然后它们返回的函数就是分配给函数名称的值，并且每次调用的都是该函数。你可以在装饰器中做你想做的事，而不会产生运行时开销。

```
my_functions = []

def put_in_list(fn):
    my_functions.append(fn)
    return fn

@put_in_list
def function1():
    pass

@put_in_list
def function2():
    pass 
```

PS：无论如何，您可能不需要担心运行时开销。

PPS：你也在尝试优化奇怪的东西，你最好只在文件中维护一个列表。您添加功能的频率是多少，并且很少考虑？在源文件中更新列表并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:29:24.070

使用不会给函数调用增加任何开销的装饰器的示例：

```
my_list = []

def add_to_my_list(func):
    print 'decorator called'
    my_list.append(func)
    return func

@add_to_my_list
def foo():
    print 'foo called'

@add_to_my_list
def bar():
    print 'foo called'

print '-- done defining functions --'
my_list[0]()
my_list[1]() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:28:38.067

解决此问题的一种方法是将所有这些函数放入一个容器中，然后从容器中提取函数以构建您的列表。

最 Pythonic 的容器是`class`. 我并不是说要让它们成为类的成员函数。只需在类中定义它们。

```
class MyFunctions(object):
    def func0():
        pass
    def func1():
        pass

lst_funcs = [x for x in MyFunctions.__dict__ if not x.startswith('_')] 
```

但我更喜欢装饰器方法；这可能是最 Pythonic 的解决方案。

# sql - SQL 数据实体 实体关联

> ID：11164289
> 
> 赞同：1
> 
> 时间：2012-06-22T21:20:03.357
> 
> 标签：sql, database, database-design

我有大约 8 个实体，它们都与一个公共实体具有一对一的关系。

客户端没有从预定义的数据中进行选择，因此没有必要应用 FK 来用作约束。

有问题的主表称为完成表，它包含从客户端发送到服务器的四种未知十六进制颜色。

例如，当一扇门建成时，门的不同部分的颜色和它的外部都可以有不同的颜色。因此，所有这些有问题的表，它们的数据总是来自客户端的新数据，而不是从下拉列表中选择的，也不是从我提供给客户的其他一些预定义数据中选择的。

我的问题是，将这个完成实体与其他需要表达完成的实体相关联的最佳方式是什么？

我正在添加我正在处理的图表的屏幕截图，这些不是所有实体，只是现在有问题的实体，并且有助于向其他人阐明我需要解决方案的内容。

我还包括了一些脚本。

```
 /****** Object:  Table [dbo].[Finish]    Script Date: 06/22/2012 15:08:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Finish](
    [ID] [int] NOT NULL,
    [Left] [varchar](30) NULL,
    [Right] [varchar](30) NULL,
    [Top] [varchar](30) NULL,
    [Bottom] [varchar](30) NULL,
    [Note] [varchar](150) NULL,
 CONSTRAINT [PK_Finish] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Horizontal]    Script Date: 06/22/2012 15:08:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Horizontal](
    [ID] [int] IDENTITY(11,1) NOT NULL,
    [Name] [varchar](15) NOT NULL,
    [Floor] [smallint] NOT NULL,
    [SizeID] [int] NOT NULL,
    [GlassPocket] [decimal](5, 3) NULL,
    [IsFiller] [bit] NOT NULL,
    [Note] [varchar](150) NULL,
 CONSTRAINT [PK_Horizontal] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Door]    Script Date: 06/22/2012 15:08:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Door](
    [ID] [int] IDENTITY(421,1) NOT NULL,
    [BayID] [int] NOT NULL,
    [Position] [tinyint] NOT NULL,
    [HasJamb] [bit] NOT NULL,
    [HasThreshold] [bit] NOT NULL,
    [IsAutoShowroom] [bit] NOT NULL,
    [IsSingle] [bit] NOT NULL,
    [Type] [varchar](10) NOT NULL,
    [SizeID] [int] NOT NULL,
    [Note] [varchar](150) NULL,
 CONSTRAINT [PK_Door] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Leaf]    Script Date: 06/22/2012 15:08:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Leaf](
    [ID] [int] IDENTITY(21,1) NOT NULL,
    [DoorID] [int] NOT NULL,
    [Position] [tinyint] NOT NULL,
    [Stile] [varchar](10) NOT NULL,
    [Bottomrail] [decimal](5, 3) NOT NULL,
    [Hand] [varchar](5) NOT NULL,
    [IsActive] [bit] NOT NULL,
    [Swing] [varchar](5) NOT NULL,
    [SizeID] [int] NOT NULL,
    [Note] [varchar](150) NULL,
 CONSTRAINT [PK_Leaf] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Bay]    Script Date: 06/22/2012 15:08:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Bay](
    [ID] [int] IDENTITY(1213,1) NOT NULL,
    [ElevationID] [int] NOT NULL,
    [Position] [tinyint] NOT NULL,
    [SizeID] [int] NOT NULL,
    [Note] [varchar](150) NULL,
 CONSTRAINT [PK_Bay] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO 
```

下面的每个实体都需要与完成表相关联。每个实体新记录都只有一个完成关系。是否可以关联这些并且仍然能够在 DELETE 上进行级联，而不会出现循环引用问题？

![模式候选](../Images/b651cfb8ede033532115ce36282c3945.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:53:58.527

是的，这是可能的。

您将在与其有关系的每个表中添加对 Finish 实体的引用。

您将使用与 referenced_table_name 和 id 相同的数据类型（通常）定义列。在我们的商店中，column_name 将是 [finish_id]。（我在这里看到您使用的是 CamelCase 样式。）

无论如何，我建议您将其定义为外键。

您说没有必要，但根据您的描述，这正是需要外键约束的情况。

当完成表中的 id 更新或删除时，您需要决定操作。（你想禁止更新还是删除？你想保留现有的关系吗？）我希望你会想要默认的 ON DELETE RESTRICT。您可以使用 ON UPDATE CASCADE 允许更新并保留关系。）

我看不出循环引用有任何潜在问题，只要完成表是父表（所有其他表都引用它，并且完成表没有对其他表的任何引用。）

# c# - WPF中的画中画视频聊天

> ID：11164291
> 
> 赞同：1
> 
> 时间：2012-06-22T21:20:11.230
> 
> 标签：c#, wpf, flash

我正在将视频聊天组件添加到具有画中画功能的现有应用程序中。我的问题是，由于“空域”问题，如何实现画中画？

我有两个 activeX 控件，一个用于远程视频源，一个用于本地视频源。它们都包裹在自己的边界中，我想在较大的远程视频源的角落显示本地视频及其边界。本地视频在远程视频上渲染得很好（虽然我对此有点困惑，因为我认为由于空域，你不能在 activeX 控制器上放置任何东西）但是包含本地视频的边框被渲染在所有东西的后面，这样你就看不到它了。我试过设置边框的 ZIndex，但是，这不起作用。

我只是想知道如何实现一种类似于 Skype 或 Microsoft Lync 中使用的 PiP 形式。

编辑：是否可以简单地为 PiP 使用弹出窗口？您可以很容易地制造出它不是弹出窗口的错觉。弹出窗口可以呈现在 activeX 控件的顶部，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:26:23.420

升级到.net 4.5。据说他们解决了“空域”问题[（空域已解决链接）。](http://www.jonathanantoine.com/2011/09/24/wpf-4-5-%E2%80%93-part-8-no-more-airspace-problems-integrating-wpf-with-win32/) 但是，鉴于您在这里发帖，我猜您不能使用 .net 4.5？

# spring-mvc - 从 Spring MVC/Jasper 应用程序静默打印

> ID：11164292
> 
> 赞同：2
> 
> 时间：2012-06-22T21:20:11.613
> 
> 标签：spring-mvc, printing, jasper-reports

这是一个非常抽象的问题。

我正在开发一个必须连续处理大量发票打印的 Spring MVC Web 应用程序。当前保存发票时，spring 控制器将发票 id 委托给准备 pdf 的 jasper pdf 生成服务。pdf下载后，用户手动打印。

我需要一种在用户保存发票时静默打印发票的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:48:44.053

由于您要导出为 PDF，因此这是可能的。您需要使用 value 向您的实例添加一个`JRPdfExporterParameter.PDF_JAVASCRIPT`参数。例如：`JRPdfExporter``"this.print({bUI: true,bSilent: false,bShrinkToFit: true});"`

```
protected static byte[] exportReportToPdf(JasperPrint jasperPrint) throws JRException{
    JRPdfExporter exporter = new JRPdfExporter();       
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
    exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, baos);
    exporter.setParameter(JRPdfExporterParameter.PDF_JAVASCRIPT, "this.print({bUI: true,bSilent: false,bShrinkToFit: true});");     
    exporter.exportReport();        
    return baos.toByteArray();
} 
```

这实际上将 JavaScript 添加到 PDF。当 PDF 打开时，它会运行，并将其发送到打印队列。应该注意的是，这应该谨慎使用，因为通常认为自动为您的用户执行此操作并不好。当我在应用程序中使用它时，我们必须为每个报告设置按钮。一个`Export`不包含 JavaScript 的按钮和一个包含 JavaScript 的`Print`按钮。这样，希望它只打印它的用户就会这样做，而那些想要数字副本的用户也可以这样做。

# javascript - 删除表中的列javascript

> ID：11164295
> 
> 赞同：2
> 
> 时间：2012-06-22T21:20:27.793
> 
> 标签：javascript, html, css

我正在使用 Google Visualization API 开发一个 JavaScript 应用程序。我写了一个事件监听器，所以每当用户点击该列时，如果他不想看到它，他可以选择隐藏它。

```
google.visualization.events.addListener(table, 'select',
            function selectHandler(){
                var data_table = table.getDataTable();
                confirm("hide column?", "Yes", "No");
                alert(data_table.removeColumn(0));

            }
    ); 
```

我收到以下错误：

```
data_table.removeColumn is not a function    
alert(data_table.removeColumn(0)); 
```

API 描述可以在[这里](https://developers.google.com/chart/interactive/docs/reference#DataTable_removeColumn)看到。有趣的是，为什么第一个警报告诉我“30”，即表中的列数，而`removeColumn(index)`函数根本不做任何事情。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:22:34.693

是因为您的代码片段调用`removeColum`而不是`removeColumn`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:22:48.720

我假设您是说后两个警报不会发生。

如果是这样，可能是因为这个错字......

```
 // -----------------------v
alert(data_table.removeColum(1)); // missing "n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:20:05.713

I suspect that perhaps `data_table` is not, in fact, not the type of object you expect.
Have you used `console.dir` to look at the methods available on it?

# mercurial - ISO Mercurial“属性” - 应用于多个变更集的标签，在变更集之后应用

> ID：11164296
> 
> 赞同：4
> 
> 时间：2012-06-22T21:20:30.100
> 
> 标签：mercurial, dvcs

**简短的**

如何在 Mercurial 中使用相同的标签标记多个变更集？可能在同一个分支上，也可能在不同的分支上。

例如，类似标签的东西表明完整的 QA 测试是否运行。

我可以通过编辑文件来创建标签的多个实例，但 hg 工具几乎总是忽略除第一个之外的所有实例。

**细节**

我正在寻找我称之为变更集“属性”的东西——我在其他 CVS 和 DVCS 中使用过的概念，但在 Mercurial 中似乎找不到。

基本上，一个属性非常像一个标签，但是一个标签应该只引用一个单一的变更集，一个属性可能适用于多个变更集。

问：有人知道怎么做吗？

类似地：在创建变更集之后，有没有办法将描述附加到变更集。请注意，我不想重写历史记录：我不想删除或更改或替换原始签入消息。我只是想添加更多的东西——让更多的东西出现在像 hg log 这样的查询中。例如，“我忘记添加一个文件来提交 df..a3 - 改为提交 8f..77，我在其中签入了丢失的文件。

**极致细节**

我知道 - 您可以执行 hg tag -f 强制标签应用于多个变更集。但是许多其他与 hg 标签相关的功能实际上只适用于每个标签的单个更改。或者每条下降线至少只有一个变更集 - 即每头。

因此，您可以永远定义一个标签。我喜欢将日期或其他上下文放在这样的标签中 - 例如 tests-pass-2012-01-14。

或者你可以有一个向上移动的“浮动标签” - 例如“所有慢速测试通过的最新版本”，我可以简单地称之为“测试通过”。

（顺便说一句，您可以在签入后应用此类属性或标签 - 特别是如果您的 QA 流程较慢，可能是快速冒烟测试，然后是较慢的全套测试，可能需要一周才能完成。所以您签入, 然后, 稍后, 返回并应用属性, uniqified dated 标记。您可能稍后需要返回并修改这样的标记, 例如如果添加更多测试, 以便用于通过所有测试的变更集没有更长的时间。例如 all-tests-pass-2012-01-14 和 all-tests-pass-2012-01-15 可能适用于相同的变更集。）

但是必须将这样的固定标签统一起来是很繁重的。因此，我称之为属性：适用于多个变更集的标签，它是受版本控制的。因此，您可以将 all-tests-pass 应用于 rev 105，然后再应用于 106 和 107。但随后您意识到新测试在 106 上失败，因此您回复。

那么属性历史可能看起来像

```
105:
    tagged all-tests-pass on 2012-01-14-10h00 (in changeset XXX)
    tagged all-tests-pass on 2012-01-15-10h00 (in changeset YYY)

106:
    tagged all-tests-pass on 2012-01-14-13h00 (in changeset XXX)
    tagged not-all-tests-pass on 2012-01-15-13h00 (in changeset YYY)

107:
    tagged all-tests-pass on 2012-01-14-14h00 (in changeset XXX)
    tagged all-tests-pass on 2012-01-15-10h00 (in changeset YYY) 
```

和一个修订集查询，如

```
 105::107 and current_attribute_tag(all-tests-pass) 
```

= 最晚返回 105 和 107，在 YYY 位于 repo 中或之后 = 但如果克隆则返回 105、106、107，以免包含 YYY

尽管

```
 105::107 and attribute_tag_at_any_time(all-tests-pass) 
```

=如果 repo 持有 XXX，则随时返回 105 106 和 107

===

我希望能够做类似的事情

*   运行 hg bisect，但仅在标记为测试通过的变更集上运行。

*   从 hg log 和 glog 中排除某些日志消息

等等

===

顺便说一句，我拒绝为此目的使用阶段和书签，因为它们不受版本控制。而且我希望这些属性标签是 VCed，这样我就可以按照上面提到的所有测试通过的潮起潮落。

分支几乎是我想要的，因为 Mercurial 分支实际上是变更集属性，而不是分支。但我不认为与变更集关联的分支可以在提交后更改。

（我真的希望您可以在提交变更集后将其切换到分支。我将其称为希望功能“追溯分支”。）

===

这是我为什么需要属性的一个经典示例：您是否曾经忘记将文件添加到 VCS？然后有一个无法构建的变更集？在后续更改中添加文件？...

我希望能够追溯地将变更集标记为 will-not-build--missing-files。然后让 bisect 甚至不用费心查看这些变更集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:12:40.033

看看这个：[Mercurial 中的自定义修订属性？](https://stackoverflow.com/questions/4583957/custom-revision-properties-in-mercurial)

没有对属性的原生支持。您可以编写一个扩展程序（有一个`extra`属性字典与变更集一起保存）。

或者您可以将它与每个标签的多个变更集一起破解（如您所建议的）。

或者你可以将它与一个新的 all-tests-pass 分支一起破解，并在所有测试通过时让你的 CI 服务器合并到该分支（然后 bisects 是默认的尖端和所有测试通过的尖端）。

但简短的回答仍然是没有现有的本地方法可以做到这一点。

# r - 将 R 函数作为带有参数的命令行脚本运行

> ID：11164298
> 
> 赞同：1
> 
> 时间：2012-06-22T21:20:35.523
> 
> 标签：r, command-line

假设我有以下脚本

```
k <- as.numeric(readline("Start Index: "))
tot <- NULL

for (i in 1:k){
    tot <- c(tot, i)
}
write.csv(tot, "test.csv") 
```

我想从命令行运行这个脚本。我怎样才能运行它以便它仍然要求用户输入（`k`）。或者我可以`k`在 CMD 命令中添加值作为参数吗？我在 Linux 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:29:19.467

您可能会发现这些信息`?commandArgs`很有帮助。

从描述：

```
 Provides access to a copy of the command line arguments supplied
 when this R session was invoked. 
```

# git - Git 中的什么与 ClearCase 中的只读组件等效？

> ID：11164299
> 
> 赞同：5
> 
> 时间：2012-06-22T21:20:37.193
> 
> 标签：git, clearcase, git-submodules

我的公司正在将我们的版本控制工具从 Rational ClearCase 更改为 Git。我们有以下开发场景，我们很好奇 Git 是否可以遵循适当的模式来实现我们在 ClearCase 中的相同行为。

以下是关于我们情况的一些基本要点：

> 1.  我们有许多离散的应用程序。我们将它们称为 AppA、AppB 和 AppC。
> 2.  我们还有所有项目通用的某些文件（构建脚本等）。我们称之为工具。
> 3.  对于 AppA、AppB 或 AppC 代码的任何给定剪切，我们需要工具代码的特定剪切。
> 4.  我们的大多数开发人员从不修改工具代码。

对于 ClearCase，我们这样建模：

> 组件：app_a、app_b、app_c、工具
> 
> 项目：AppA、AppB、AppC、工具
> 
> 项目 AppA 包括 app_a 作为读/写组件和工具作为只读组件。
> 
> 项目 AppB 包括 app_b 作为读/写组件和工具作为只读组件。
> 
> Project AppC 包括 app_c 作为读/写组件和工具作为只读组件。
> 
> 项目工具包括作为读/写组件的工具。
> 
> App* 项目的每个基线都引用了 app_* 和工具组件的基线。当开发人员重新设置为推荐的基线时，他们会从*两个*组件中提取更改。

对于 Git，我们认为子模块可能是最接近正确答案的东西。但是，在拉取/重新定位存储库时，听起来需要一个额外的步骤来更新子模块代码。理想情况下，我们希望是透明的。此外，我们不一定关心从父存储库的角度知道子模块中发生了什么变化；我们只关心整个子模块的一个时间点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:44:09.700

首先，一定要了解 ClearCase 中的（类 UCM）配置和 git 之间的区别（请参阅“[灵活与静态分支（GIT 与 Clearcase/Accurev）](https://stackoverflow.com/questions/763099/flexible-vs-static-branching-git-vs-clearcase-accurev/764219#764219) ”）。
查看[ClearCase 和 Git 之间的差异](https://stackoverflow.com/questions/645008/what-are-the-basic-clearcase-concepts-every-developer-should-know/645771#645771)时，每个 UCM 组件都必须在 Git 中表示为存储库。

如果修改子模块，则需要额外的步骤，如“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”中所述。
但是他们记录了一个特定的 SHA1，这是你在拉每个“ `APP`”时想要的。
[gitslave](http://gitslave.sourceforge.net/)将允许您与 ' ' 保持`Tools`更紧密的联系`Appx`，但我认为它不适合您的情况。

请注意，使用子模块将：

*   使 ' ' 成为 ' '`Tools`的子目录`APPx`
*   使其可修改。
    git 没有“只读”组件：如果您可以访问存储库，则可以推/拉。
    如果您确实需要强制执行读取访问，那么您需要添加一个额外的“授权层”，称为**[gitolite](http://sitaramc.github.com/gitolite/index.html#what)**。

# java - 编写自定义 Eclipse 调试器

> ID：11164306
> 
> 赞同：13
> 
> 时间：2012-06-22T21:21:05.967
> 
> 标签：java, eclipse, debugging, eclipse-plugin

**编辑：**必须有某种方法可以在不编写全新调试器的情况下解决此问题。我目前正在研究在现有 java 调试器之上构建的方法。如果有人对如何获取 Java 调试器已有的信息（关于堆栈帧、变量、原始数据等）有任何想法，那将非常有帮助。

--

我想要做的是我有这个基于 Java 的框架/API，我想编写一个针对我的框架定制的 Eclipse 插件调试器。这是一个简单的例子：

我有两个类，一个叫作用域，一个叫变量。范围包含变量映射。代码全部在 java 中，但我使用这种范围变量关系几乎就像一种新语言，并且想要一个变量调试选项卡，它为我提供当前活动范围的列表以及当前存储在其中的变量。这是一些代码：

```
import java.util.Hashtable;

public class Scope {
    private Hashtable<String, Variable> variableList = new Hashtable<String, Variable>();

   // constructor 
    public Scope(){

    }

    public void put(String key, Variable v){
        variableList.put(key, v);
    }

    public Variable get(String key){
        return variableList.get(key);
    }

}

public class Variable {

    private String value;
    private String name;

    public Variable(String aName, String aValue){
        name = aName;
        value = aValue;
    }

    public String getValue(){
        return value;
    }

    public String getName(){
        return name;
    }

    public void setValue(String aValue){
        value = aValue;
    }
} 
```

这显然是一个非常简单的例子，但我想完成与此类似的事情，我可以获得一个变量窗口，设置一个断点，并让一个“调试器”列出我的活动范围对象和里面的变量对象。

我一直在尝试阅读和理解： http: [//www.eclipse.org/articles/Article-Debugger/how-to.html](http://www.eclipse.org/articles/Article-Debugger/how-to.html)

并且它非常密集（以及非常过时），但我会尝试花一些时间来理解它。我只是想看看是否有人对如何解决此类问题有任何高级建议，因为我在 eclipse 中开发插件或制作调试器的经验很少。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T22:15:42.393

这不是一件容易的事。我认为那篇文章仍然是主要参考资料。旧的，但没有过时。试着消化它，最好让它发挥作用。在此之前，您应该具有开发 Eclipse 插件的最少经验。

图中有很多部分，但首先你必须了解的是，当 Eclipse 调试某些东西时（假设我们使用的是标准调试模型），我们有两个独立的“世界”：Eclipse 端和解释器端（或者，如果您愿意，“本地”和“远程”边）。

在 Eclipse 方面，编程涉及到一些 Eclipse 核心类和你自己的一些类之间的合作，这些类扩展或实现了一些 Eclipse 类/接口：

*   一个“ **launchConfigurationType** ”（plugin.xml 中的扩展点），当您单击“Debug As -> New Configuration”时会导致出现新的自定义配置；这与定义“Tabs”对话框的一些“launchConfigurationTabGroups **”**定义一起使用这将出现在您的自定义启动配置中（[例如](http://www.stlinux.com/sites/default/files/attach_debugger_to_userspace_apptn.png)）（每个选项卡通常都有自己的类）。

*   launchConfigurationType通常与**LaunchDelegate**类相关联，该类是您的引导类：它负责在 Eclipse 端和“解释器”（或“远程”）端创建和启动运行/调试实例.

*   在 Eclipse 方面，运行/调试实例由 **IDebugTarget**对象及其子对象表示（实现是您的责任）；这是由 LaunchDelegate 创建的，并在启动时“附加”到远程运行的进程。

*   远程端，即您实际调试的解释器或程序，可以是任何东西：二进制可执行文件、perl 脚本、在某个站点中运行的某个应用程序（可能也是本地 Java 程序；但是，即使在这种情况下，这也可能在它自己的 JVM 中运行，而不是在调试的 Eclipse JVM 中运行！）。您的 IDebugTarget 对象必须知道如何与“远程解释器”（例如，通过 TCP）通信并执行典型的调试器任务（放置断点、步进、运行、请求变量等）——但这里的协议取决于您，这完全是任意的。

*   正在运行的 Eclipse 调试器将使用的自定义类的层次结构不是任意的：这些应该有一个 IDebugTarget 作为根，并且应该实现“调试模型”（参见文章中的[图](http://www.eclipse.org/articles/Article-Debugger/images/debug_model.gif)）。如上所述，IDebugTarget 对象了解如何在 EClipse 端和远程端之间进行转换（参见[此图](http://www.eclipse.org/articles/Article-Debugger/images/get_variable_value.gif)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T09:17:42.657

在 eclipse edc 调试器上工作过，听起来编写一个完整的调试器并不是你想要的。

听起来在运行调试器时，您将可以访问具有您感兴趣的变量和范围的对象。

您可以在类本身中使用 toString() 或使用详细格式化程序来显示所需信息的变体。toString() 调用可以非常详细并嵌套到调用中，显示整个数组等。详细格式化程序也可能非常复杂。

请参阅[http://www.robertwloch.net/2012/01/eclipse-tips-tricks-detail-formatter/](http://www.robertwloch.net/2012/01/eclipse-tips-tricks-detail-formatter/)。这是几个 URL 中最好的一个（我与作者没有关联）。

一旦您对 Variable 和 Scope 对象的输出感到满意，您应该能够添加将始终在您的表达式窗口中显示它们的监视表达式（因此您不必依赖堆栈帧中的局部变量，您可能是在）。

这应该会为您提供您正在跟踪的框架中的变量和范围列表……希望无需编写整个 Eclipse 调试器插件即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:58:57.163

好的，我将在此处添加第二个答案……我想我对您的环境状态不够熟悉，无法知道为什么自定义详细信息格式化程序无法解决问题。在大多数情况下，我认为他们会为您提供您正在寻找的东西。

但如果您真的有兴趣创建另一个包含这些项目的视图，那么您可以查看[eclipse jdt 项目](http://www.eclipse.org/projects/project.php?id=eclipse.jdt)。它提供的扩展点完全有可能让您访问您想要添加的内部变量和堆栈帧信息，以及一些可以让您的工作更轻松的 UI。

换句话说，您可能不必编写一个全新的调试器插件，但也许是一个可以与 jdt 一起工作的插件。

该站点有指向项目计划、源存储库、bugzilla 问题跟踪数据库（用于错误跟踪和新功能讨论）的指针。也许一些 jdt 专家可以帮助权衡他们对什么最适合您的需求的意见。

# asp.net-mvc - ASP.NET MVC 3 结构 - 在另一个项目中查看

> ID：11164309
> 
> 赞同：5
> 
> 时间：2012-06-22T21:21:36.577
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下项目设置

项目A（主要）

1.  商业
2.  数据
3.  查看（asp.net mvc 3 项目）

项目 N

1.  商业
2.  数据
3.  查看（asp.net mvc 3 项目）

我如何从项目 A 调用项目 N 中的视图并从 N 调用回 A。基本上我要做的是将每个项目 N 打包为拥有自己的单独 MVC，因为它来自不同的来源并将其插入主项目，然后让它导航到正确的视图。

这可以做到吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:24:29.890

您可以编写自定义[虚拟路径提供程序](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)。这是一篇[不错的博客文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，其中显示了此类虚拟路径提供程序的示例，允许您将 Razor 视图作为资源嵌入到程序集中并在多个应用程序中重用它们。

不幸的是，如果没有自定义虚拟路径提供程序，您将无法在多个 ASP.NET MVC 应用程序之间交叉引用视图。仅在当前应用程序内部查找视图的默认提供程序根本不允许这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:27:40.583

如果可能的话，我确实建议另一种方法。如果我理解正确，这些项目在某种程度上是 ike 插件，但它们不是独立的应用程序。而且它们现在相互关联，因此它们是耦合的。这很棘手，但我只会使用 1 个 asp.net mvc 项目（web ui）。属于其他项目的所有 UI 位我都会让它们成为助手（几乎是小部件）。这意味着，每个项目只包含将用于构造视图的助手。

如果您只想将视图保留在每个项目中只是为了将它们托管在不同的程序集中，我认为这是一个架构问题。采用小部件的方式可能看起来很有效，但我认为您可以获得最大的控制权和所需的分离级别。唯一的问题是你没有定义完整的视图，但是如果它们只在一个地方使用，为什么你想要在不同的地方拥有完整的视图（部分，布局）？！

现在，如果每个项目确实是一个插件，独立于其他插件，那么使用编译视图是最好的方法。但是如果项目B知道项目N的观点，那么我认为上面的解决方案更合适。那个或整个应用程序设计得太过分了。当它没有创建一个全新的丛林来导航它时，分离是好的。

# cordova - PhoneGap 应用程序的来电号码

> ID：11164314
> 
> 赞同：1
> 
> 时间：2012-06-22T21:22:32.903
> 
> 标签：cordova

我是PhoneGap的初学者。我以前在我的移动应用程序中使用过 CoronaSdk 和 APPInventor。我想要PhoneGap。我正在构建一个呼叫号码的移动应用程序，但我不知道该怎么做？

我需要一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:34:35.160

使用电话：URI。它将调用具有指定号码的本机拨号应用程序。

这适用于所有 PhoneGap 平台。

```
<a href="tel:18008888888">Bob Smith</a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T05:38:38.337

没有办法自动呼叫号码（至少在 IOS 中）。请记住 phonegap 是一个可以访问本机功能的 Web 视图。您仍然需要直接的用户交互来拨打号码。

# sql-server - 将旧的“+”连接转换为 SQL Server 语法？

> ID：11164320
> 
> 赞同：2
> 
> 时间：2012-06-22T21:23:07.490
> 
> 标签：sql-server, oracle

我是老派，一直使用“+”号来表示外部，但是这个 sql 在 sql server 中不起作用。有人可以帮我将以下 sql 转换为新的“左外连接”格式。

```
select frdonmst.FRID, 
       fradrmst.adrseq, 
       fax.phone   as fax, 
       phone.phone as phone 
from   frdonmst, 
       fradrmst, 
       frphnmst fax, 
       frphnmst phone 
where  frdonmst.frid = fradrmst.frid 
       and frdonmst.adrseq = fradrmst.adrseq 
       and ( frdonmst.frid = fax.frid(+) 
             and frdonmst.adrseq = fax.adrseq(+) 
             and fax.phtyp(+) = 'FAX1' ) 
       and ( frdonmst.frid = phone.frid(+) 
             and frdonmst.adrseq = phone.adrseq(+) 
             and phone.phtyp(+) = 'D1' ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:31:17.267

我会试一试，但我从未见过以这种身份使用加号。:)

```
SELECT a.FRID
    , b.adrseq
    , fax.phone AS fax
    , phone.phone AS phone
FROM frdonmst a
JOIN fradrmst b
    ON a.adrseq = b.adrseq
LEFT JOIN frphnmst fax
    ON a.frid = fax.frid
    AND a.adrseq = fax.adrseq
    AND fax.phtyp = 'FAX1'
LEFT JOIN frphnmst phone
    ON a.frid = phone.frid
    AND a.adrseq = phone.adrseq
    AND phone.phtyp = 'D1' 
```

PS刚刚手动输入，我会礼貌地建议使用单词来命名事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:31:43.333

我希望这是您正在寻找的：

```
select 
frdonmst.FRID, 
fradrmst.adrseq, 
faxTable.phone as fax, 
phoneTable.phone as phone 
FROM (((frdonmst LEFT JOIN fradrmst ON frdonmst.adrseq = fradrmst.adrseq and frdonmst.adrseq = fradrmst.adrseq)
                 LEFT JOIN frphnmst AS faxTable ON frdonmst.frid = faxTable.frid AND frdonmst.adrseq = faxTable.adrseq)
                 LEFT JOIN frphnmst AS phoneTable ON frdonmst.frid = phoneTable.frid AND frdonmst.adrseq = phoneTable.adrseq)
WHERE faxTable.phtyp='FAX1' AND phoneTable.phtyp='D1' 
```

# java - 向服务器发送http请求有时会发生异常

> ID：11164324
> 
> 赞同：0
> 
> 时间：2012-06-22T21:23:19.440
> 
> 标签：java, ssl, network-programming, httpwebrequest

```
URL oauth = new URL(URL);
URLConnection oauth_connection = oauth.openConnection();

BufferedReader in = new BufferedReader(new InputStreamReader(
            oauth_connection.getInputStream()));

String inputLine = "";

String line;

//System.out.println(in.readLine());
while((line = in.readLine()) != null)
    inputLine += line;

in.close(); 
```

`BufferedReader`在该行引发异常：

> 线程“主”javax.net.ssl.SSLHandshakeException 中的异常：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 sun.security 中找到请求目标的有效证书路径.ssl.Alerts.getSSLException(Unknown Source) at sun.security.ssl.SSLSocketImpl.fatal(Unknown Source) at sun.security.ssl.Handshaker.fatalSE(Unknown Source) at sun.security.ssl.Handshaker.fatalSE(Unknown源) 在 sun.security.ssl.ClientHandshaker.serverCertificate(Unknown Source) 在 sun.security.ssl.ClientHandshaker.processMessage(Unknown Source) 在 sun.security.ssl.Handshaker.processLoop(Unknown Source) 在 sun.security.ssl sun.security.ssl.SSLSocketImpl 的 .Handshaker.process_record（未知来源）。readRecord(Unknown Source) at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source) at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) at sun。 net.www.protocol.https.HttpsClient.afterConnect(Unknown Source) at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source ) 在 sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source) 的 HttpsClient.afterConnect(Unknown Source) sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) sun.net.www。协议.https.HttpsURLConnectionImpl.getInputStream（未知来源）sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source) 的 HttpsClient.afterConnect(Unknown Source) sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) sun.net.www。协议.https.HttpsURLConnectionImpl.getInputStream（未知来源）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:28:45.883

您可能拥有自签名证书或链式证书，其中链的某些部分不受信任。

您可以将证书导入您的信任库，请参阅[数字证书：如何将 .cer 文件导入到 .truststore 文件中？](https://stackoverflow.com/questions/373295/digital-certificate-how-to-import-cer-file-in-to-truststore-file-using)

或者您可以忽略此问题，如[在 Java 中请求 URL 时忽略证书错误](https://stackoverflow.com/questions/2694281/ignore-certificate-errors-when-requesting-a-url-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:27:37.603

如果您的客户端是用 Java 编写的，那么您需要做的就是将服务器证书添加到受信任的 Java 密钥库中。

请参阅此页面。 [https://blogs.oracle.com/gc/entry/unable_to_find_valid_certification](https://blogs.oracle.com/gc/entry/unable_to_find_valid_certification)

# sql - 尝试将数据从一个表复制到另一个表时得到 ORA 01722 无效数字

> ID：11164335
> 
> 赞同：0
> 
> 时间：2012-06-22T21:24:15.303
> 
> 标签：sql, oracle

我必须管理两个表中的列之间存在细微差别。但我认为那是次要的。

表 Source 具有三个属性

```
Amount     NUMBER(10,2)
SHORTNAME  VARCHAR2(3)
NAME       VARCHAR2(40) 
```

表 Target 具有相同的属性集，但对其类型的约束略有不同

```
Amount     NUMBER
SHORTNAME  VARCHAR2(255)
NAME       VARCHAR2(255) 
```

我认为表`Target`应该对其容量有更大的容忍度，但是当我运行查询时

```
insert into DB_B.Target select * from DB_A.Source ; 
```

不幸的是，我得到了流行的 01722 错误：

> SQL 错误：ORA-01722：无效号码 -- 01722.00000 -“无效号码”

因此，当我们说从具有相同架构的两个表中复制数据时，我们是在谈论 100% IDENTICAL 甚至在 TYPE CONSTRAINT 上吗？

请帮忙。

# 更新

在雷雨袭击办公室之前，我不得不提一下，两张桌子上的列顺序是不同的。感谢@a_horse_with_no_name 帮助我思考这个问题并给出完美的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:28:48.250

也许两个表中列的顺序并不相同。

尝试明确列出这些列，以确保它们不会由于某种原因而混淆：

```
insert into db_b.target 
    (amount, shortname, name) 
select amount, shortname, name 
from db_a.source; 
```

请注意，*不*列出插入子句中的列并以`select *`这种方式使用通常被认为是不好的风格（即使这不是问题的原因）

# html - 判断，浏览器是否支持canvas（paperjs）

> ID：11164340
> 
> 赞同：1
> 
> 时间：2012-06-22T21:24:30.203
> 
> 标签：html, canvas, paperjs

请告诉我如何确定浏览器是否支持画布（paperjs）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:13:45.550

我建议使用[Modernizr](http://modernizr.com/)进行 html5 画布支持检测。使用 Modernizr，它就像

```
if(Modernizr.canvas) {
    //HTML5 canvas action
} 
```

在所有浏览器中进行可靠和一致的检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:52:34.740

`var canvasExists = document.createElement('canvas').getContext !== undefined;`

将`true`在 Chrome、`false`IE8 等中。

你也可以检查`window.HTMLCanvasElement !== undefined`

# objective-c - renderInContext：不渲染 CALayer 应用了变换？

> ID：11164342
> 
> 赞同：0
> 
> 时间：2012-06-22T21:25:20.763
> 
> 标签：objective-c, cocoa, core-animation, calayer

这是下面的代码：不确定我做错了什么，在这里。当我从 NIB 文件渲染图层时，它曾经工作过。我试图通过以编程方式创建视图来改变它。现在它渲染图层但没有应用任何变换。

```
- (NSBitmapImageRep*)getCurrentFrame
{
  CGContextRef    bitmapContext = NULL;
  CGColorSpaceRef colorSpace;
  int bitmapByteCount;
  int bitmapBytesPerRow;

  int pixelsHigh = (int)[fixedWidthStringView bounds].size.height;
  int pixelsWide = (int)[fixedWidthStringView bounds].size.width;

  bitmapBytesPerRow   = (pixelsWide * 4);
  bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

  colorSpace = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);

  bitmapContext = CGBitmapContextCreate (NULL,
                                       pixelsWide,
                                       pixelsHigh,
                                       8,
                                       bitmapBytesPerRow,
                                       colorSpace,
                                       kCGImageAlphaPremultipliedLast);
  if (bitmapContext== NULL)
  {
        NSLog(@"Failed to create bitmapContext.");
        return nil;
  }

  CGColorSpaceRelease( colorSpace );

  [CATransaction setDisableActions:YES];
  fixedWidthStringView.layer.transform = CATransform3DScale(fixedWidthStringView.layer.transform, .5, 1, 1);
  [CATransaction commit];

  [fixedWidthStringView.layer renderInContext:bitmapContext];

  CGImageRef img = CGBitmapContextCreateImage(bitmapContext);
  NSBitmapImageRep *bitmap = [[NSBitmapImageRep alloc] initWithCGImage:img];
  CFRelease(img);

  return bitmap;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:02:46.517

自己修好了。事实证明，只要我将我的 NSView 添加到另一个 NSView 并渲染容器，它就可以工作。

# entity-framework - 跨多个连接使用 Sql Azure 时替代 TransactionScope for Entity Framework

> ID：11164345
> 
> 赞同：4
> 
> 时间：2012-06-22T21:25:56.660
> 
> 标签：entity-framework, azure-sql-database

我正在使用 EF 访问 Sql azure。在一种情况下，我需要对两个数据库进行更改，通常我会使用 TransactionScope 并将其升级为 MSDTC。现在Sql Azure 不支持MSDTC，所以不能使用TransactionScope。

还有另一种方法可以做到这一点吗？（除了没有分布式事务并且必须以某种方式手动回滚状态之外）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:22:55.763

**在不使用TransactionScope**类的情况下编写代码的一种方法是使用**SqlTransaction**。SqlTransaction 类不使用事务管理器，它在调用 Commit() 方法时提交的本地事务中包装命令。

我建议您查看[SQL Azure](http://social.technet.microsoft.com/wiki/contents/articles/handling-transactions-in-sql-azure.aspx)文章中的处理事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T06:06:13.707

Azure SQL DB 现在支持 TransactionScope。请参阅我对以下帖子的回答：[TransactionScope() in Sql Azure](https://stackoverflow.com/questions/2604941/transactionscope-in-sql-azure)。这也适用于您使用 EF 时。

# google-chrome-extension - 是否可以使用 chrome 扩展的背景页面发出 oauth 2.0 请求？

> ID：11164350
> 
> 赞同：1
> 
> 时间：2012-06-22T21:26:25.283
> 
> 标签：google-chrome-extension, oauth-2.0, google-api-client

我在调用 Google api 的 chrome 扩展程序的后台页面中运行了 javascript 代码。下面的代码本质上是请求 oAuth2 令牌。

```
function init(){
gapi.client.setApiKey(apiKey);
console.log("Initializing...");
gapi.auth.init(function() { setTimeout(authenticate,100)});
}
function authenticate(){
console.log("Initialized. Now AUthenticating");
gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false},api);    
} 
```

身份验证窗口按预期打开，但是在用户登录并允许我的应用程序后，页面只是冻结。回调 (api()) 从未进行过，我也没有收到令牌。是因为我从后台页面调用它而身份验证窗口无法发送回响应吗？

如果是，解决方法/解决方案是什么？

如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:12:04.687

您可以使用[Boris Smus 的 OAuth 2.0 Library for Chrome Extension](http://smus.com/oauth2-chrome-extensions/)。它在我的扩展中效果很好。

无法在 chrome 扩展中使用 OAuth2.0 的原因：

> Chrome 扩展程序无法直接使用 OAuth 2.0 服务器端或客户端流程，因为它们位于 chrome-extension:// URLs

# c# - 在gridview中找不到控件

> ID：11164353
> 
> 赞同：0
> 
> 时间：2012-06-22T21:26:34.810
> 
> 标签：c#, asp.net, gridview, findcontrol, templatefield

我想在gridview 中找到控件（超链接）。根据控件的值，我想启用或禁用超链接。我试过这样。但我总是变得空虚。

```
protected void gridResult_RowDataBound(object sender, GridViewRowEventArgs e) { 
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        HyperLink  status = e.Row.FindControl("id") as HyperLink;
        if ( status != null && status.Text == "AAAA" ) {
            status.Enabled = false; 
        }
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:37:49.203

您的“id”值非常可疑。我的钱是因为您提供了错误的控件名称：`FindControl("id!!!!!!!")`.

我希望看到类似的东西：

```
HyperLink  status = e.Row.FindControl("hlStatus") as HyperLink; 
```

如果您确实提供了正确的控件名称 (yuck)，那么可能是您的超链接控件嵌套得太深，在这种情况下，您需要“爬取”您的控件层次结构来寻找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:21:04.850

@dlev 是绝对正确的，控件通常是嵌套的，因此您需要创建自己的各种函数来查找您要查找的内容，您可以将此函数传递给您的控件集合（e.Row.Controls()）和您的 id

```
 private HyperLink FindControl(ControlCollection page, string myId)
    {
        foreach (Control c in page)
        {
            if ((HyperLink)c.ID == myId)
            {
                return (HyperLink)c;
            }
            if (c.HasControls())
            {
                FindControl(c.Controls, myId);
            }
        }
        return null; //may need to exclude this line
    } 
```

# c++ - 在空指针的情况下，shared_ptr 和 unique_ptr 的删除器的标准行为是否不同？

> ID：11164354
> 
> 赞同：30
> 
> 时间：2012-06-22T21:26:48.610
> 
> 标签：c++, c++11, shared-ptr, unique-ptr, nullptr

好的，首先是一些可能相关的事情：

我在 C++11 模式下使用 Clang 3.1 编译器，标准库设置为 libc++。

我正在尝试让自己熟悉 C++11，在这样做的过程中，我遇到了看起来很奇怪的行为。这可能是 Clang 或 libc++ 的一个怪癖，但我不会说 C++ 标准语言，而且我无法访问其他支持 C++11 的编译器，所以我无法真正检查它，我已经搜索了互联网和 Stack Overflow尽我所能，没有找到任何相关的东西……所以我们开始吧：

当使用 shared_ptr / unique_ptr 为简单资源实现 RAII 时，它们的行为似乎在删除时针对空指针而有所不同。我意识到通常没有必要删除空指针，但我曾期望该行为至少在两个 STL 智能指针之间匹配。

对于特定情况，请考虑以下代码：

```
{
    auto Deleter = [](void *){cout << "It's later!" << endl;};
    shared_ptr<void> spDoSomethingLater(nullptr, Deleter);
    unique_ptr<void, void (*)(void *)> upDoSomethingLater(nullptr, Deleter);
    cout << "It's now!" << endl;
} 
```

我本来期望从中得到以下输出之一：

a) 如果两个删除器都被调用，即使指针为空：

```
"It's now!"
"It's later!"
"It's later!" 
```

b) 如果因为指针为空而没有调用删除器：

```
"It's now!" 
```

但我没有观察到这两种情况。相反，我观察到：

```
"It's now!"
"It's later!" 
```

这意味着正在调用一个而不是另一个删除器。经过进一步调查，我发现shared_ptr的删除器被调用，无论它是否持有空值，但unique_ptr的删除器只有在它不持有空值时才会被调用。

我的问题：这实际上是标准规定的正确行为吗？如果是这样，为什么两种 STL 类型之间的指定行为会以这种方式有所不同？如果不是，这是我应该向 libc++ 报告的错误吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-22T21:37:28.033

观察到的行为符合标准。

对于`unique_ptr`，20.7.1.2.2/2（析构函数）说

> 效果：如果`get() == nullptr`没有效果。否则 `get_deleter()(get())`。

对于`shared_ptr`， 20.7.2.2.2/1 表示即使包装了空指针，也应该调用删除器：

> 效果：
> 
> *   如果 *this 为空或与另一个 `shared_ptr`实例 ( `use_count() > 1`) 共享所有权，则没有副作用。
> *   **否则，如果 *this 拥有一个对象`p`和一个删除器`d`，`d(p)`则调用。**
> *   否则， *this 拥有一个指针`p`，并被`delete p`调用。

这里重要的细节是表达“拥有一个对象`p`”。20.7.2.2/1 说“如果一个`shared_ptr`对象不*拥有*指针，它就是*空的”。*20.7.2.2.1/9（相关构造函数）说它“构造一个拥有对象和删除器的对象”。*`shared_ptr``p``d`*

 *据我所知，该调用在技术上使`shared_ptr` *自己*成为空指针，这导致删除器被调用。将此与无参数构造函数进行对比，后者据说会留下`shared_ptr`“*空*”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-22T21:41:14.697

是的，这是正确的行为。

§20.7.1.2.2[unique.ptr.single.dtor]/2：

> ### `unique_ptr`析构函数
> 
> *效果*：如果`get() == nullptr`没有效果。否则`get_deleter()(get())`。

§20.7.2.2.2[util.smartptr.shared.dest]/1：

> ### `shared_ptr`析构函数
> 
> *效果*：
> 
> *   如果`*this`为*空*`shared_ptr`或与另一个实例共享所有权( `use_count() > 1`)，则没有副作用。
> *   否则，如果`*this` *拥有*一个对象`p`和一个删除器`d`，`d(p)`则调用。
> *   否则，`*this` *拥有*一个指针，并调用`p`delete 。`p`

所以应该没有效果，因为 shared_ptr 是空的？错误，因为提供 a 指针会使 shared_ptr*不*为空，即使指针为空。

§20.7.2.2.1[util.smartptr.shared.const]/8-10

> `shared_ptr`构造函数
> 
> ```
> template<class Y, class D> shared_ptr(Y* p, D d);
> template<class Y, class D, class A> shared_ptr(Y* p, D d, A a);
> template <class D> shared_ptr(nullptr_t p, D d);
> template <class D, class A> shared_ptr(nullptr_t p, D d, A a); 
> ```
> 
> *要求：* `p`应可转换为`T*`. …</p>
> 
> *效果：*构造一个*拥有*该对象`shared_ptr`和删除器的对象。*`p``d`*
> 
>  **后置条件：* `use_count() == 1 && get() == p` .*

 *这意味着 shared_ptr*拥有*nullptr。因此，当 shared_ptr 被销毁时，将调用删除器。**

# jquery - 将绝对 div（高度可变）定位在内容上方

> ID：11164358
> 
> 赞同：0
> 
> 时间：2012-06-22T21:27:03.483
> 
> 标签：jquery, css

请看看我的[小提琴](http://jsfiddle.net/sexywebteacher/am2dR/7/)：

.pos_absolute div 在 .content div 下，但使用 CSS 我已将 id 显示在顶部。

问题是，在我的场景中，我知道**.pos_absolute div 的高度，**我可以**为 .content div 设置 margin-top**。

当 .pos_absolute div 的高度发生变化时，我该怎么办？有CSS修复吗？还是我需要使用jquery？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:36:10.560

你可以使用 jQuery 来做到这一点：

```
$(".content").css("marginTop", $(".pos_absolute").height() + 32 +"px"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:47:34.847

使用 JQuery 执行此操作。

​参考这个**[LIVE DEMO](http://jsfiddle.net/SivaCharan/am2dR/11/)**

## 查询：

```
$('.pos_absolute').css('top', 0);
var tempHeight = $('.pos_absolute').height();
$('.content').css('margin-top', (tempHeight+2)+"px"); 
```

## CSS：

```
.content {
    background-color:#FF2E2E;
}
.pos_absolute {
    position:absolute;
    left:0;
    background-color:#000;
    color:#FFF
}
​ 
```

## HTML：

```
<div class="content">
    Content div <br/>
    Content div <br/>
    Content div <br/>
    Content div <br/>
    Content div <br/>
</div>
<div class="pos_absolute">
    Pos absolute div <br/>
    Pos absolute div <br/>
    Pos absolute div <br/>
</div>
​ 
```

# ajax - JSF2：表单 ajax 操作使另一个表单的视图状态丢失

> ID：11164361
> 
> 赞同：1
> 
> 时间：2012-06-22T21:27:06.697
> 
> 标签：ajax, forms, jsf, jsf-2, viewstate

我有一个由两种形式组成的简单页面。它们不能同时显示（一个切换另一个）。这是代码：

```
<h:body>

    <ui:composition template="/elements/templateWithMenu.xhtml">            
        <ui:define name="content">

            <p:dialog id="question1DialogId" widgetVar="question1Dialog" resizable="false" closable="false" visible="true">                             

                <h:panelGroup id="questionStep1Group">
                    <h:form id="questionStep1Form" rendered="#{newPoll2.displayQuestionStep1}">

                        <h:commandLink value="next" action="#{newPoll2.questionStep1Completed()}" class="btn" >
                            <f:ajax execute="@form" render=":questionStep2Form :questionStep1Group :questionStep2Group"/>
                        </h:commandLink>

                    </h:form>
                </h:panelGroup>

                <h:panelGroup id="questionStep2Group">
                    <h:form id="questionStep2Form"  rendered="#{newPoll2.displayQuestionStep2}">

                        <h:commandLink value="cancel" action="#{newPoll2.questionStep2Cancelled()}" class="btn" >
                            <f:ajax execute="@form" render=":questionStep1Form :questionStep1Group :questionStep2Group" />
                        </h:commandLink>

                    </h:form>
                </h:panelGroup>

            </p:dialog>

        </ui:define>
    </ui:composition>

</h:body> 
```

*questionStep1Completed()*和*questionStep2Cancelled()只是切换**渲染*属性中使用的布尔值。

问题在于视图状态。首次加载页面时，单击“下一步”将起作用，并将替换为“取消”链接。但是当我单击“取消”链接时，需要单击两次才能将其替换为“下一个”链接。我可以看到第一次单击发出没有视图状态的请求，第二次（成功）发出请求。

我看到了[这个](https://stackoverflow.com/questions/7807334/rendering-other-form-by-ajax-causes-its-view-state-to-be-lost-how-do-i-add-this)问题和[这个](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)链接，正如你所看到的，我在*渲染*属性中添加了表单 ID，但它仍然不起作用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:14:20.573

您正在有条件地呈现表单本身，因此在准备 ajax 请求时，其他表单在 HTML DOM 树中实际上是不可用的。如果您将表单的内容包装在另一个中`<h:panelGroup>`并将`rendered`属性移动到那里，那么它应该可以工作。

# php - PHP 静态类成员范围

> ID：11164363
> 
> 赞同：1
> 
> 时间：2012-06-22T21:27:15.030
> 
> 标签：php, oop, scope, static-members

让我先说一下，我来自 Java 背景。

PHP中静态类成员的范围是什么？*即：请求、会话、服务器生命周期等*

我目前的理解是，除非卡在会话中，否则一切都是**请求。**我在[语言指南](http://php.net/manual/en/language.variables.scope.php)中没有发现任何反驳或证实的内容。

## 例子

```
class MyKlass {
    public static $K_PAGE_SIZE = 50;
    public static $K_WITH_SPRINKLES = true;
}

if (isset($_GET['NO_SPRINKLES'])) {
    MyKlass::$K_WITH_SPRINKLES = false;
}

var_dump(MyKlass::$K_WITH_SPRINKLES); 
```

**情况1**

如果我要访问带有此代码的页面，而查询行中没有任何内容，我应该会看到

```
bool(true) 
```

**案例2**

如果我要使用此代码访问页面并`?NO_SPRINKLES=true`在查询行中，我应该看到

```
bool(false) 
```

**案例3**

如果我访问`?NO_SPRINKLES=true`查询行中的页面，然后访问没有它的页面，**我应该总是看到** `bool(true)` **对吗？**

**案例4**

使用 访问页面后，访问该页面的`?NO_SPRINKLES=true`其他**人应该仍然看到** `bool(true)` **正确？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:32:45.533

除非您使用会话，否则 PHP 不会保留任何信息。因此，当您加载页面时，会在代码开头创建一个变量，并在发送代码时在代码末尾销毁。

与类及其成员相同。您可以随意编辑它们，它会保留信息，但在脚本的最后，它会丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:33:00.643

这不是关于 PHP，而是关于 HTTP 请求-响应周期。看，HTTP 被明确定义为无状态协议。这意味着每个新请求都会被处理，因为它之前没有任何内容（之后也将什么都没有，但这听起来太悲观了）。

是的，有几种机制可以减少这种“无状态”——cookie，它们存储在客户端；会话，它使用 cookie 或某些参数作为存储在服务器端的信息的键。但总的来说，您的理解是非常正确的：PHP 使用的每个实体的时间跨度（不存储在数据库/文件或会话中）只是一个**Request**。

# maven - maven 原型：由 org.apache.maven.plugin.MojoFailureException 引起的生成失败

> ID：11164370
> 
> 赞同：4
> 
> 时间：2012-06-22T21:27:51.357
> 
> 标签：maven, ubuntu, maven-2, maven-plugin, maven-3

我已经安装了 maven 2 并按照下面链接中提到的教程进行操作

maven.apache.org/guides/getting-started/maven-in-five-minutes.html

但是在执行 archetype:generate 命令时，

```
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false" 
```

我收到以下错误

```
[INFO] Trace
org.apache.maven.BuildFailureException: Error merging velocity templates
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:715)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoFailureException: Error merging velocity templates
at org.apache.maven.archetype.mojos.CreateProjectFromArchetypeMojo.execute(CreateProjectFromArchetypeMojo.java:211)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
... 17 more 
```

有关信息，

我正在使用 Sun OpenJDK 1.6.0、Maven 2 和 Xubuntu 平台。

任何有关上述错误的建议性帮助将不胜感激。

谢谢，

索姆纳特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T19:09:22.337

文件夹访问似乎有问题。检查您尝试创建项目的文件夹是否受写保护？如果是这样，则将其权限更改为 777 并检查它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T18:23:40.750

我也遇到了同样的问题，但我仍然拥有创建文件夹和文件所需的所有权限。但事实证明，archetype.xml 中有一个错误——我试图添加一个没有任何文件的文件夹——

```
 <testResources>
   <resource>src/test/resources/</resource>
 </testResources> 
```

更正archetype.xml后，构建成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T04:04:01.703

是的，这绝对是权限错误。花了 2 天时间，然后使用 sudo 简单地对其进行了纠正：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:27:39.250

我遇到了同样的错误：D，我所做的是修改了我在其中创建项目文件夹的文件夹的权限（在你的情况下是“我的应用程序”）。事实上，当我遇到这个错误时，我只是在遵循 maven 教程的指导方针。

将 '/usr/local/apache-maven/' 文件夹权限更改为 775 或 777 应该可以！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-26T18:21:04.123

**如果您在使用 IDE（例如 Eclipse）时遇到此错误，请关闭并重新打开 IDE 并重试。**

`Error merging velocity templates`在创建项目然后将项目删除到目标文件夹，然后将我的 Maven 项目创建到目标文件夹后，我在使用 Eclipse 的 Windows 10 上收到此错误 ( )。首先，我尝试通过我的管理员帐户放松文件夹的安全性——但是，我被拒绝访问！最后，在关闭 Eclipse 后，我看到该文件夹​​在 Windows Explorer 中消失了。

我假设我的 IDE 专门持有该文件夹的句柄，因此在 Windows 上通常值得注意的是，您可能必须关闭其他程序（或重新启动）才能解决此问题。

# javascript - 正则表达式匹配单词，除非它们前面有一个字符

> ID：11164375
> 
> 赞同：1
> 
> 时间：2012-06-22T21:28:31.783
> 
> 标签：javascript, regex

我有这个检测主题标签的正则表达式。它不应该匹配前面有字母的东西，所以我们在正则表达式的开头有一个空格字符：

`/( #[a-zA-Z_]+)/gm`

问题是它不再匹配句子开头的单词。我怎样才能修改这个正则表达式，而不是匹配空格，它根本不匹配前面有字母的东西。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:29:29.577

~~在开头使用`\b`以指示[单词边界](http://www.regular-expressions.info/wordboundaries.html)。~~ `\b`行不通，因为`#`它不是一个单词启动器。

只需检查字符串的开头*或*之前的空格：`(?:^|\s)(\#[a-zA-Z_]+)`

另外，请确保您转义了`#`，因此它不会被解释为评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:42:37.720

没有**后视**：

```
 pattern = /(?:^|[^a-zA-Z])#[a-zA-Z]+/​​​​​​​​​​​​​​​​​​ 
```

**向后看**（但在**Javascript**中不允许）：

```
 pattern = "(?:^|(?<![a-zA-Z]))#[a-zA-Z]+" 
```

# php - 将 HTML 表单提交为 PDF

> ID：11164376
> 
> 赞同：6
> 
> 时间：2012-06-22T21:28:36.283
> 
> 标签：php, html, forms, pdf

我们有一个高分辨率的 PDF（用于打印），上面有一些表单域。我们希望有一个提交到 PDF 的 HTML 表单，然后将其放入相应的字段中。

我在谷歌上找到了一个解决方案：http: [//koivi.com/fill-pdf-form-fields/](http://koivi.com/fill-pdf-form-fields/)

但是，使用该解决方案，您只会得到一个 FDF 文件……而且该演示对我不起作用，打开 FDF 文件只会下载另一个 FDF 文件。

由于此 PDF 将向公众提供，我们希望使其尽可能简单。如果我们必须打开我们的原始 PDF 并导入这个 FDF 文件，我们需要一个不同的解决方案（我不确定 FDF 文件的用途，因为它不起作用）。

一篇关于 .net 框架的相关帖子也有同样的想法，但只有付费的商业解决方案：[从 HTML 表单到 PDF](https://stackoverflow.com/questions/5613392/from-html-form-to-pdf)

到目前为止，我发现的 PHP 解决方案是用于创建新的 PDF，这不是我需要的。我们的 PDF 是使用 Adob​​e Illustrator（或类似的 adobe 产品）创建的，具有嵌入字体、svg 和图像内容的高分辨率。

表单元素已经到位，我们只需要将数据获取到那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:34:07.760

**2013 年 4 月 11 日更新：**

自从发布此问题以来，我一直在需要实现此目标的多个项目中使用[FPDF 。](http://www.fpdf.org/)尽管它似乎无法将模板 PDF 与提供的数据“合并”，但它可以从头开始创建 PDF。

我用过的一个例子，我有一个用于打印的高分辨率 PNG（类似于最初的问题），我们必须在中心清楚地写下客户的姓名和今天的日期。我只是使用[FPDF->Image()](http://www.fpdf.org/)制作了 PDF 的背景，然后使用[FPDF->Text()](http://www.fpdf.org/)编写了文本。

毕竟这非常简单，您需要查看纸张尺寸以确定图像的 X、Y、W、H，然后将您的文本字段与这些数字相关。

甚至还有一个[表单填写扩展](http://www.fpdf.org/)，但我无法让它工作。

* * *

似乎我应该回答我自己的问题，尽管 Visions 的答案可能会更好（似乎被删除了？）。我使用了 Vasiliy Faronov 的链接，这是对我的主要问题的评论：[https ://stackoverflow.com/a/1890835/200445](https://stackoverflow.com/a/1890835/200445)

在这里，我找到了如何安装[pdftk](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/&ei=L_rrT-vqCsW7rQHXx_HpBQ&usg=AFQjCNH475DC2HpzfDJGcn3AGTmkWbcC_Q&sig2=PPJPpTl8dn9HeHU5wDUKOw)并运行命令来合并（展平）我的 FDF 和 PDF 文件。我仍然使用“hacky”方式使用[Koivi 的 FDF 生成器生成 FDF](http://koivi.com/fill-pdf-form-fields/)，但它在大多数情况下都有效。

需要注意的是，某些字符（如单引号和双引号）未正确插入。这可能是转义字段的问题，但我找不到答案。

无论如何，我的 PDF 表单生成器正在*运行*，但任何有类似问题的人都应该寻找更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:18:15.657

有许多工具没有像 itextsharp 那样付费。尝试以下[http://www.4guysfromrolla.com/articles/030211-1.aspx](http://www.4guysfromrolla.com/articles/030211-1.aspx)希望此代码对您有所帮助。我已经尝试过它对我有用。如果您可以付款，那么有许多付费工具可以将 HtML 转换为 PDF，例如 ABCPDF 等。此示例位于 Asp.net 中，我相信您是否可以将其转换为 PHP，它也适用于您。

# c# - 每个循环启动新线程，同时控制线程数不超过x-amount

> ID：11164378
> 
> 赞同：0
> 
> 时间：2012-06-22T21:28:38.690
> 
> 标签：c#, winforms, multithreading

我已经写了几个月的“线性”winforms，现在我正在尝试找出线程。

这是我的循环，它有大约 40,000 行，在这一行上执行任务大约需要 1 秒：

```
foreach (String CASE in MAIN_CASES_LIST)
{
//bunch of code here
} 
```

我如何能

1.  将每个循环放入单独的线程中
2.  同时维护不超过x个线程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:37:22.713

如果您使用的是 .NET 4，则可以使用[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd992001.aspx)

```
Parallel.ForEach(MAIN_CASES_LIST, CASE => 
{ 

    //bunch of code here 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T23:35:30.617

要混合上述答案，并为创建的最大线程数添加限制，您可以使用此重载调用。只需确保添加“使用 System.Threading.Tasks;” 在顶部。

```
LinkedList<String> theList = new LinkedList<string>();

ParallelOptions parOptions = new ParallelOptions();

parOptions.MaxDegreeOfParallelism = 5; //only up to 5 threads allowed.

Parallel.ForEach(theList.AsEnumerable(), parOptions , (string CASE) => 
{ 

    //bunch of code here 

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:41:40.280

有一个很棒的库叫做 SmartThreadPool 在这里可能很有用，它用线程和队列做了很多有用的东西，从你那里抽象出大部分

不确定它是否会对您有所帮助，但您可以将大量工作项排队，限制线程数等

[http://www.codeproject.com/Articles/7933/Smart-Thread-Pool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

当然，如果你想用多线程弄脏你的手或使用 Parallel 去尝试它，这只是一个建议:)

# java - 组合和排序两个数组Java？

> ID：11164383
> 
> 赞同：4
> 
> 时间：2012-06-22T21:28:59.163
> 
> 标签：java, arrays, sorting

所以基本上有两个单独的预排序数组，你必须组合它们并对它们进行排序（当然没有 sort() 方法）。这是我的代码：

```
public static void main(String[] args) {

    int a [] = {3,5,7,9,12,14, 15};
    int b [] = {6 ,7, 10};
    int j = 0;

    //output array should be 3,5,6,7,7,9,10,12,14,15

    int c [] = new int[a.length+b.length];//10 values

    for (int i = 0;i<b.length;i++){
        while(b[i]>a[j]){
            c[j] = a[j] ;
            j++;    
         }

        if(b[i] == a[j]){
            c[j] = b[i];
            c[j+1] = a[j];
        }

        c[j] = b[i];
        j++;
    }

    for(int i = 0;i<c.length;i++)
        System.out.println(c[i]);
    } 
```

我猜我得到的零是由于其中一个布尔值（<＆>）中的错误造成的，但我似乎无法弄清楚。前 4 个效果很好，但是一旦我到达重复的 7 个，它就会变得疯狂。

请帮助我理解，不要只是更改代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:44:01.097

这应该是一种简单的方式：

```
public static void main(String[] args) {

    int a [] = {3,5,7,9,12,14, 15};
    int b [] = {6 ,7, 10};
    int j = 0, k = 0;

    //output array should be 3,5,6,7,7,9,10,12,14,15

    int c [] = new int[a.length+b.length];//10 values

    // we're filling c with the next appropriate number
    // we start with checking a[0] and b[0] till we add
    // all the elements
    for (int i = 0; i < c.length; i++) {
        // if both "a" and "b" have elements left to check
        if (j < a.length && k < b.length) {
            // check if "b" has a smaller element
            if (b[k] < a[j]) {
                // if so add it to "c"
                c[i] = b[k];
                k++;
            }
            // if "a" has a smaller element
            else {
                // add it to "c"
                c[i] = a[j];
                j++;
            }       
        }
        // if there are no more elements to check in "a"
        // but there are still elements to check in "b"
        else if (k < b.length) {
            // add those elements in "b" to "c"
            c[i] = b[k];
            k++;
        }
        // if there are no more elements to check in "b"
        // but there are still elements to check in "a"
        else {
            // add those elements in "a" to "c"
            c[i] = a[j];
            j++;
        }
    }

    for(int i = 0; i < c.length; i++)
        System.out.println(c[i]);
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:53:35.327

你可以试试这段代码。

```
public static void main(String[] args) {
    int a[] = { 3, 5, 7, 9, 12, 14, 15 };
    int b[] = { 6, 7, 10 };

    // output array should be 3,5,6,7,7,9,10,12,14,15

    int alen = a.length;
    int blen = b.length;
    int c[] = new int[a.length + b.length];// 10 values

    int s[] = null;
    int[] l = null;

    if (alen < blen) {
        s = a;
        l = b;
    } else {
        s = b;
        l = a;
    }
            // Constructing Combined Array
    for (int i = 0, p = 0; i < c.length; i++, p++) {
        if (i == s.length) {
            p = 0;
        }
        if (i < s.length) {
            c[i] = s[p];
        } else {
            c[i] = l[p];
        }
    }
            //Sorting the C array 
    for (int i = 1; i < c.length; i++) {
        int j = i;
        int B = c[i];
        while ((j > 0) && (c[j - 1] > B)) {
            c[j] = c[j - 1];
            j--;
        }
        c[j] = B;
    }

    for (int i = 0; i < c.length; i++)
        System.out.print(c[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:37:45.537

使用`ai`and`bi`作为源数组`ci`中的索引和目标数组的索引。

你只需要一个循环。

尽量保持这一点非常清晰，并`c`在每次迭代中精确地推进一个元素。

在循环中，检查是否到达了一个数组的末尾。如果是这样，只需从另一个数组中获取一个元素。否则，只取 and 的较小元素`a[ai]`并`b[bi]`增加相应的索引。

在合并排序中（或在任何需要并行遍历两个数组的代码中）很容易犯错误，通过思考“嘿，我可以使用 while 循环而不是只做一个 if”，但是你通常有两个循环嵌套在第三个循环中，并且对于每个循环，您都必须进行正确的边界检查，并且通常不会显着提高性能。

ps 做一个主循环，然后在主循环之后做两个清理循环就可以了，如果没有必要，请避免嵌套循环，特别是在面试中，这也可能在计算运行时时引起混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:31:07.407

实际上最好说*合并*（而不是*组合*）两个数组。

将排序数组**A**和**B[0..n-1]**合并到结果**C[0..m+n-1] 的**简单算法（取自这篇[文章](http://www.algolist.net/Algorithms/Merge/Sorted_arrays)） ：

 ******1.  相应地引入读取索引**i**，**j**来遍历数组**A[0..m-1]**和**B**。引入 write-index **k**来存储结果数组中第一个空闲单元格的位置。默认情况下**i** = **j** = **k** = 0。
2.  在每一步：如果两个索引都在范围内（**i** < **m**和**j** < **n ），则选择（** **A[i]**，**B[j]** ）的最小值并将其写入**C[k]**。否则转到步骤 4。
3.  将位于最小值处的算法的数组的**k**和索引增加一。重复步骤 2。
4.  将数组中的剩余值（索引仍在范围内）复制到结果数组中。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T21:34:12.070

试试这个，你的错误是你对数组 A 和数组 C 使用相同的细胞索引：

```
public class MainClass {
      public static void main(String[] args) {
        int[] arrayA = { 23, 47, 81, 95 };
        int[] arrayB = { 7, 14, 39, 55, 62, 74 };
        int[] arrayC = new int[10];

        merge(arrayA, arrayA.length, arrayB, arrayB.length, arrayC);
        for (int i : arrayC) {
          System.out.println(i);

        }
      }

      public static void merge(int[] arrayA, int sizeA, int[] arrayB, int sizeB, int[] arrayC) {
        int arrayAIndex = 0, arrayBIndex = 0, arrayCIndex = 0;

        while (arrayAIndex < sizeA && arrayBIndex < sizeB)
          if (arrayA[arrayAIndex] < arrayB[arrayBIndex])
            arrayC[arrayCIndex++] = arrayA[arrayAIndex++];
          else
            arrayC[arrayCIndex++] = arrayB[arrayBIndex++];

        while (arrayAIndex < sizeA)
          arrayC[arrayCIndex++] = arrayA[arrayAIndex++];

        while (arrayBIndex < sizeB)
          arrayC[arrayCIndex++] = arrayB[arrayBIndex++];
      }
    } 
```

这是另一个版本

```
// size of C array must be equal or greater than
// sum of A and B arrays' sizes
public void merge(int[] A, int[] B, int[] C) {
      int i, j, k, m, n;
      i = 0;
      j = 0;
      k = 0;
      m = A.length;
      n = B.length;
      while (i < m && j < n) {
            if (A[i] <= B[j]) {
                  C[k] = A[i];
                  i++;
            } else {
                  C[k] = B[j];
                  j++;
            }
            k++;
      }
      if (i < m) {
            for (int p = i; p < m; p++) {
                  C[k] = A[p];
                  k++;
            }
      } else {
            for (int p = j; p < n; p++) {
                  C[k] = B[p];
                  k++;
            }
      }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-19T11:42:17.553

```
public class Combinearray {

    public static void main(String[] args) {
        int[] array1= {5,4,6,2,1};
        int[] array2= {2,5,8,4,1,6,4};
        int m=array1.length;
        int n=array2.length;
        int[] array3=new int[m+n];
        int a=1;
        for(int i=0;i<m;i++) {

            array3[i]=array1[i];//array1 is copied to array3
        }
        for(int i=0;i<n;i++) {
            array3[m-1+a]=array2[i];//array2 is copied to array3
            a++;
        }
        //array3 is combined array
         int l=array3.length;
            int temp[]=new int[l];
            for(int i=0;i<l;i++) {
                for(int j=i+1;j<l;j++) {
                    if(array3[i]>array3[j]) {
                        temp[i]=array3[i];
                        array3[i]=array3[j];
                        array3[j]=temp[i];
                    }
                }
            }
            System.out.println("sorted array is ");
            System.out.print("[");
            for(int i=0;i<l;i++) {
                System.out.print(array3[i]+" ");  
            }
            System.out.print("]");

    }

} 
```******

# c++ - 具有空初始化的构造函数初始化列表

> ID：11164394
> 
> 赞同：9
> 
> 时间：2012-06-22T21:29:37.890
> 
> 标签：c++

_currentHandle() 下面是什么意思？

```
template<class SpiHandleT>
class SpiHandleIterator : public ISpiHandleIterator<SpiHandleT>
{
public:
    SpiHandleIterator() : _currentHandle()
    {
    }
    ...
protected:
    SpiHandleT _currentHandle;
}; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-22T21:31:58.577

这称为*值初始化*。来自 C++03 标准，§8.5/7：

> 初始值设定项为空括号集的对象，即 ()，应进行值初始化。

从 §8.5/5 开始：

> 对类型对象进行*值初始化*`T`意味着：
> 
> *   if`T`是具有用户声明的构造函数的类类型，则调用 for 的默认构造函数（如果没有可访问的默认构造函数`T`，则初始化格式错误）；`T`
> *   如果`T`是没有用户声明的构造函数的非联合类类型，则每个非静态数据成员和基类组件`T`都是值初始化的；
> *   如果`T`是数组类型，则每个元素都是值初始化的；
> *   否则，对象被零初始化
> 
> 对类型对象进行*零初始化*`T`意味着：
> 
> *   如果`T`是标量类型，则将对象设置为`0`（零）转换为的值`T`；
> *   如果`T`是非联合类类型，则每个非静态数据成员和每个基类子对象都进行零初始化；
> *   如果`T`是联合类型，则对象的第一个命名数据成员）为零初始化；
> *   如果`T`是数组类型，则每个元素都初始化为零；
> *   如果`T`是引用类型，则不执行初始化。

因此，在您的情况下，这取决于以下定义`SpiHandleT`：

*   如果它是一个标量，它将被零初始化
*   *如果它是一个没有*用户声明的构造函数的类类型，它的子对象将（递归地）值初始化
*   *如果它是具有*用户声明的构造函数的类类型，它将是默认构造的

# android - Android 使用 HTTP 多部分表单数据将视频上传到远程服务器

> ID：11164398
> 
> 赞同：10
> 
> 时间：2012-06-22T21:30:07.843
> 
> 标签：android, http, multipartform-data

我在当前项目的某个部分遇到了麻烦，感觉自己现在被卡住了。我正在尝试使用 HTTP 帖子和多部分表单数据进行视频上传。我觉得我在理解 HTTP 协议，特别是多部分表单数据方面遇到了障碍。

[我有一个以http://videoupload.thecompany.com/VideoApp.xml?method=upload&objectType=person&objectId=777777](http://videoupload.thecompany.com/VideoApp.xml?method=upload&objectType=person&objectId=777777)格式上传视频的 URL 。当然，我还需要包含标题、描述和视频文件。这些是“多部分数据”吗？

我已尝试调整此解决方案以满足我的需求 将[视频从 Android 上传到服务器？](https://stackoverflow.com/questions/5017093/upload-video-from-android-to-server)，并在所有其他 conn.setRequestProperty() 调用之后设置额外数据，如下所示：

```
conn.setRequestProperty("title", "video title");
conn.setRequestProperty("description", "video description"); 
```

但这对我不起作用。代码的原作者有一个注释要在大约 30 行之后添加多部分表单数据，但我不明白为什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-22T21:35:29.960

这是我想出的两步解决方案，主要来自[此处](https://stackoverflow.com/questions/3360957/how-use-multipart-form-data-upload-picture-image-on-android)的信息和链接。这个解决方案对我来说比一些相关 SO 帖子中的 upload2server() 方法更容易掌握。希望这对其他人有帮助。

1) 从图库中选择视频文件。

创建一个变量`private static final int SELECT_VIDEO = 3;`——你使用什么数字并不重要，只要那是你以后检查的那个。然后，使用意图来选择视频。

```
Intent intent = new Intent();
intent.setType("video/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,"Select a Video "), SELECT_VIDEO); 
```

使用 onActivityResult() 启动 uploadVideo() 方法。

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if (requestCode == SELECT_VIDEO) {
            System.out.println("SELECT_VIDEO");
            Uri selectedVideoUri = data.getData();
            selectedPath = getPath(selectedVideoUri);
            System.out.println("SELECT_VIDEO Path : " + selectedPath);

            uploadVideo(selectedPath);
        }      
    }
}

private String getPath(Uri uri) {
    String[] projection = { MediaStore.Video.Media.DATA, MediaStore.Video.Media.SIZE, MediaStore.Video.Media.DURATION}; 
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    cursor.moveToFirst(); 
    String filePath = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA));
    int fileSize = cursor.getInt(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.SIZE));
    long duration = TimeUnit.MILLISECONDS.toSeconds(cursor.getInt(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DURATION)));

    //some extra potentially useful data to help with filtering if necessary
    System.out.println("size: " + fileSize);
    System.out.println("path: " + filePath);
    System.out.println("duration: " + duration);

    return filePath;
} 
```

2) 访问[http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)，下载最新的 HttpClient jar，将其添加到您的项目中，并使用以下方法上传视频：

```
private void uploadVideo(String videoPath) throws ParseException, IOException {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(YOUR_URL);

    FileBody filebodyVideo = new FileBody(new File(videoPath));
    StringBody title = new StringBody("Filename: " + videoPath);
    StringBody description = new StringBody("This is a description of the video");

    MultipartEntity reqEntity = new MultipartEntity();
    reqEntity.addPart("videoFile", filebodyVideo);
    reqEntity.addPart("title", title);
    reqEntity.addPart("description", description);
    httppost.setEntity(reqEntity);

    // DEBUG
    System.out.println( "executing request " + httppost.getRequestLine( ) );
    HttpResponse response = httpclient.execute( httppost );
    HttpEntity resEntity = response.getEntity( );

    // DEBUG
    System.out.println( response.getStatusLine( ) );
    if (resEntity != null) {
      System.out.println( EntityUtils.toString( resEntity ) );
    } // end if

    if (resEntity != null) {
      resEntity.consumeContent( );
    } // end if

    httpclient.getConnectionManager( ).shutdown( );
} // end of uploadVideo( ) 
```

一旦你让它工作，你可能想把它放在一个线程中并添加一个上传对话框，但这会让你开始。在我尝试 upload2Server() 方法失败后为我工作。这也适用于图像和音频，只需稍作调整。

# mysql - 为什么我的 MySQL 唯一键失败了？

> ID：11164399
> 
> 赞同：3
> 
> 时间：2012-06-22T21:30:17.627
> 
> 标签：mysql, unique-index

```
INSERT INTO `ree`.`media` 
(`CREATEDATE`, `FILETYPE`, `MIMETYPE`, `MLSNUMBER`, `MODIFYDATE`, `POSITION`, `URL`) VALUES 
('2011-12-27T15:00:16', 'PRIMARY PHOTO', 'image/jpeg', 5030011414, '2011-12-27T15:00:16', 1, 'http://image.realcomponline.com/photos.rps?PATH=PROPERTY/57FA/57FAA44C48854C/3QQGONGA03I7CN.jpg&g=100&sp=0&l=0&t=0&r=10000&b=10000&o=0&1cf=0&w=320&h=240'),
('2011-12-27T15:00:18', 'PRIMARY PHOTO', 'image/jpeg', 5030011507, '2011-12-27T15:00:18', 1, 'http://image.realcomponline.com/photos.rps?PATH=PROPERTY/6FC7/6FC7B6F88D8F45/3SQGONGA01RXH1.jpg&g=100&sp=0&l=0&t=0&r=10000&b=10000&o=0&1cf=0&w=320&h=240') 
```

**错误：** *键“uneek”的重复条目“2147483647-1”*

似乎我的 MLSNUMBER 唯一键在区分两个插入之前没有解析整个数字。

两者都以 5030011 开头...

**这是我构建密钥的方法：** *ADD UNIQUE `uneek`( `MLSNUMBER`, `POSITION`)*

有没有办法构建这个密钥，所以它接受整个 10 位而不是前 7 位？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:37:12.763

您已经超出了 int 的范围。2147483647 = 2^31 - 1 您可以将该字段上的这个 int 更改为例如 64 位：

```
ALTER TABLE media MODIFY COLUMN MLSNUMBER BIGINT NOT NULL;
(Modify unsigned and not null for your needs). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T23:00:57.820

您似乎已将 MLSNUMBER 列定义为整数类型，并且大值被截断为最大的 32 位有符号值，即 2147483647。

我通过尝试将值 5030011507 添加到 Int 列来验证这一点，它最终存储了值 2147483647。这与错误消息中的数字相匹配。当值被截断时，我也收到了警告。

您可以尝试将列类型更改为 BIGINT，这将允许值高达 9223372036854775807。

# javascript - 试图重构这个 Javascript 并失败

> ID：11164401
> 
> 赞同：1
> 
> 时间：2012-06-22T21:30:39.013
> 
> 标签：javascript, html, css

我正在开发一个网站，部分内容将是一个实时的“出发板”代码，例如：

![离境板](../Images/a2e8bcb07c63bc483e6edb89a71c975f.png)

我在 C# 方面非常有经验，但对 Javascript 完全没有经验。

我[在 SO 上](https://stackoverflow.com/questions/4869405/best-implementation-of-airport-train-station-departure-board-html-css-jquery)找到了以下 Javascript，它几乎可以满足我的要求：

```
<script type="text/javascript">

    $.fn.ticker = function (options) {

        options = $.extend({
            speed: 30
        }, options);

        var alph = 'ABCDEFGHIJKLMNOPQRSTUVXYZ01234567890,.:+=/();!- ';

        return this.each(function () {
            var k = 1,
            elems = $(this).children(),
            arr = alph.split(''),
            len = 0,
            fill = function (a) {
                while (a.length < len) {
                    a.push(' ');
                }
                return a;
            },
            texts = $.map(elems, function (elem) {
                var text = $(elem).text();
                len = Math.max(len, text.length);
                return text.toUpperCase();
            }),
            target = $('<div>'),
            render = function (print) {
                target.data('prev', print.join(''));
                fill(print);
                print = $.map(print, function (p) {
                    return p == ' ' ? '&#160;' : p;
                });
                return target.html('<span>' + print.join('</span><span>') + '</span>');
            },
            attr = {}

            $.each(this.attributes, function (i, item) {
                target.attr(item.name, item.value);
            });

            $(this).replaceWith(render(texts[0].split('')));

            target.click(function (e) {

                var next = fill(texts[k].split('')),
                prev = fill(target.data('prev').split('')),
                print = prev;

                $.each(next, function (i) {
                    if (next[i] == prev[i]) {
                        return;
                    }
                    var index = alph.indexOf(prev[i]),
                    j = 0,
                    tid = window.setInterval(function () {
                        if (next[i] != arr[index]) {
                            index = index == alph.length - 1 ? 0 : index + 1;
                        } else {
                            window.clearInterval(tid);
                        }
                        print[i] = alph[index];
                        render(print);
                    }, options.speed)
                });
                k = k == texts.length - 1 ? 0 : k + 1;
            });
        });
    };

    // Assign functions
    $('#mainfeatureslist').ticker();

    // Click it now
    $('#mainfeatureslist').click();

</script> 
```

...结合必要的 JQuery 和适当的 HTML：

```
<div id="mainfeatureslistcontainer">
<ul id="mainfeatureslist">
<li>Live bus arrivals</li>
<li>Another feature here</li>
<li>Name of third feature</li>
</ul>
</div> 
```

此代码生成一个列表，单击该列表时，将转换到下一个列表项。

但是，我希望列表以设定的时间间隔自动转换，而无需单击。

我试过一个简单的软糖，即

```
setInterval($('#mainfeatureslist').click(), 6000); 
```

...但这似乎出于某种原因混淆了它；它会中断该过程并“跳转”到某个项目，然后不会再发生任何事情。

尽管对代码的作用有一个合理的了解，但我绝对不知道如何重构它来做我想做的事！生成自己的 .click 方法似乎很难实现——事实上，它是一段非常出色且紧凑的代码。

如何将其重构为每 5 秒“翻转”一次列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:32:38.893

[`setInterval`需要一个*函数*](https://developer.mozilla.org/en/DOM/window.setInterval)- 现在您正在传递某个函数调用的返回值（在本例中为 jQuery 对象）。改用包含您要执行的代码的匿名函数：

```
setInterval(function() {
    $('#mainfeatureslist').click();
}, 6000); 
```

# sql - sql 在一个循环中多次调用函数。postgres 8.3

> ID：11164409
> 
> 赞同：2
> 
> 时间：2012-06-22T21:31:26.937
> 
> 标签：sql, postgresql

我有一个以“键”变量为参数的函数。

我想为一系列键值调用此函数。

这个我试过了，不行。。。

```
BEGIN
for i IN 773..775 LOOP
  test_count(i);
end LOOP;
end; 
```

SQL 错误：错误：“for”第 2 行或附近的语法错误：for i IN 773..775 LOOP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:25:54.547

@Mihai 已经解释过，您不能在函数或匿名代码块之外使用`DO`.

您的语法仍然会失败，因为您不能在*任何地方*调用函数而不注意返回值。如果您想丢弃可能的返回值，请[**`PERFORM`**](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)在这样的函数中使用（适用于 PostgreSQL 8.3）：

```
创建或替换函数 foo()
  返回无效语言 plpgsql AS
$身体$
开始

对于我在 773 .. 775
环形
   执行test_count (i);
结束循环；

结尾;
$身体$;

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:38:34.617

PostgreSQL 8.3 不能运行匿名过程/函数或在过程/函数之外创建变量。

从 version 开始，该[`DO`](http://www.postgresql.org/docs/devel/static/sql-do.html)构造被添加为对匿名过程的支持`9.0`。

您应该在函数中运行代码。因为您收到的错误消息表明这`FOR`是全局上下文中的意外关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T21:39:49.493

为您的键使用**记录类型**

```
DO $BODY$
DECLARE tmp_row record;
BEGIN

  FOR tmp_row IN (SELECT key from my_keys_table)
   LOOP
     PERFORM test_function(tmp_row.key);
  END LOOP;

END;
$BODY$; 
```

# javascript - 可以重命名与其他类上的函数同名的 JS 函数的 IDE

> ID：11164414
> 
> 赞同：2
> 
> 时间：2012-06-22T21:31:55.283
> 
> 标签：javascript, ide, refactoring

我想知道是否有人知道具有重构工具（例如“重命名函数”或“查找所有引用”）的 IDE，它们不会被不同类上具有相同名称的两个函数混淆。

也就是说，如果你有一个带有 Foo.prototype.myFunc 的类 Foo 和一个带有 Bar.prototype.myFunc 的类 Bar 我希望能够右键单击类似的调用

```
var b = new Bar();
b.myFunc(); 
```

并让它提供仅适用于 Bar.myFunc() 而不适用于 Foo.myFunc() 的重构工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:51:18.313

Visual Studio 和 JetBrains ReSharper 的结合提供了许多智能的[JavaScript 重构](http://www.jetbrains.com/resharper/webhelp/ReSharper_by_Language__JavaScript__Refactorings.html)工具，它们应该可以做到这一点：

# c# - Telerik OpenAccess - 覆盖生成的属性

> ID：11164418
> 
> 赞同：0
> 
> 时间：2012-06-22T21:32:04.970
> 
> 标签：c#, .net, orm, overriding, telerik-open-access

我想验证通过 Telerik OpenAccess Mapper 生成的属性（IDataErrorInfo）。

像这样。

```
public partial class Etage
{
    private long _version;
    public virtual long Version 
    { 
        get
        {
            return this._version;
        }
        set
        {
            this._version = value;
        }
    }... 
```

现在我想像这样在我的第二类 Etage（也是部分）中覆盖属性“版本”。

```
public partial class Etage : IComparable
{

    public override long Version
    {
        get { return _version; }
        set { _version = value+200; }
    }

    // Some Validation in the Setter later...
    public override string ToString()
    {
        return String.Format("{0}", Version);
    }
} 
```

然后我得到以下错误：

“Inventar.Model.Etage.Version”和“Inventar.Model.Etage.Version”之间的歧义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:33:55.233

没有办法覆盖部分类中的属性，您需要在派生类中进行。但是，使用派生类可能无济于事，因为 OpenAccess 上下文将从基类中检索实例，并且没有一种简单的方法可以将这些实例转换为新类型。

您可以做的是添加一个具有不同名称的属性（在部分类中），它会进行必要的计算。但是，这意味着您将同时暴露在模型上。为了解决这个问题，您可以通过可视化设计器更改生成属性的访问修饰符。只需找到该属性并将其在属性窗格中的访问修饰符更改为与公共不同的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:25:29.513

[您可以通过修改其使用的TT 模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)来控制 OpenAccess 代码生成器如何创建其代码。以下是一些可以让您走上正轨的链接：

*   [Telerik TV：在 OpenAccess ORM 中自定义代码生成模板](http://tv.telerik.com/watch/orm/customing-code-generation-templates-in-openaccess-orm)
*   [如何：实现`INotifyPropertyChanging/ed`接口 (C#)](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-model-tools-use-code-generation-templates-implement-inotifypropertychanged.html)
    *   *这在概念上与实现`IDataErrorInfo`*.
*   [如何：实现`INotifyPropertyChanging/ed`接口 (VB.NET)](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-model-tools-use-code-generation-templates-implement-inotifypropertychanged-vbnet.html)
*   [自定义代码生成](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-customise-code-generation-overview.html#Best_Practices_for_Customizing_the_Code_Generation_Templates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:50:19.183

这可能有效：

```
public partial class SubEtage : Etage
{

    public override string Beschreibung
    {
        get { return base.Beschreibung; }
        set { base.Beschreibung = value + "GEHT"; }
    }

    public override string ToString()
    {
        return String.Format("{0}", Beschreibung);
    }
} 
```

并查看链接：

[http://www.telerik.com/help/openaccess-orm/openaccess-tasks-howto-single-class-single-table.html](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-howto-single-class-single-table.html)

# python - Django 帮助：AttributeError：“模块”对象没有属性“Charfield”

> ID：11164420
> 
> 赞同：12
> 
> 时间：2012-06-22T21:32:07.577
> 
> 标签：python, django

我已经看到了几个类似的其他属性的帖子，但不是这个。Python 和 Django 的新手——我已经完成了几个教程的第一部分，包括 Django 的“民意调查”教程，当我为我的应用程序同步数据库时，我总是得到 'AttributeError: 'module' object has no attribute CharField .

在模型中，我完全按照教程所述复制：

从 django.db 导入模型

```
class Poll(models.Model):
    question = models.Charfield(max_length=200)
    pub_date = models.DateTimeField('date published')
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
# Create your models here. 
```

'polls' 也被添加到已安装的应用程序中，我使用的是 sqlite3、windows 7、python 2.7。

非常感谢任何帮助！（我正在努力学习！）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-22T21:33:02.617

也就是说`CharField`，使用大写的“f”，而不是`Charfield`像您的代码中那样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-31T09:37:52.973

我认为您正在使用 forms.py

```
from django.forms import forms 
```

请使用这个

```
from django import forms 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-06T16:55:11.437

更改`charfield`为：

```
CharField(max_length = 10) 
```

两者都`C`应该`F`大写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T10:49:06.217

用这个 `from django.db import models`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-09T16:09:29.630

我有同样的错误，但以下代码对我有用：

```
from django.db import models
#Create your models here.

class Question(models.Model):
    question_text = models.CharField(max_length=100)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    choice_text = models.CharField(max_length = 200)
    votes = models.IntegerField(default =0)
    question = models.ForeignKey(Question, on_delete=models.CASCADE) 
```

只需将 charfield() 更改为 charField() ..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T07:03:08.900

这个 ：

```
 question = models.CharField(max_length=200) 
```

代替 ：

```
 question = models.Charfield(max_length=200) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-17T11:23:17.917

在 model`Poll`中，of 的拼写`CharField`格式不正确。即你用小写字母`f`代替大写字母`F`。所以，替换`Charfield`为`CharField`。你可以看到下面的代码：

```
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published') class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

# c++ - std::list 在 libev 回调中崩溃

> ID：11164424
> 
> 赞同：1
> 
> 时间：2012-06-22T21:32:17.383
> 
> 标签：c++, list, crash, segmentation-fault, libev

我有一个 libev 写回调函数，它检查要发送到客户端的待处理数据。待处理的数据缓冲区看起来像

```
struct PendingData{
  unsigned short data_size;
  char data[4096];
};
typedef std::list<PendingData*> PendingBuf;

class Client{
private:
  int sock;
  PendingBuf data_list;
public:
  ev::io cl_io;
  void write_cb(ev::io &watcher, int events);
}; 
```

并且回调函数通过以下方式检查容器中是否有任何数据：

```
void Client::write_cb(ev::io &watcher, int events){
  PendingData* pd = NULL;
  int ires = 0;
  if(!data_list.empty()){
    pd = data_list.front();
    ires = send(sock, pd->data, pd->data_size, 0);
    if(ires == pd->data_size){
      delete pd;
      data_list.pop_front();
      return;
    }
    // .... additional checking here 
  }
} 
```

程序因分段错误而崩溃

```
if(!data_list.empty()) 
```

有时在

```
pd = data_list.front(); 
```

在第二种情况下，empty() 返回 false，但调试器显示，该列表没有数据成员

它在单独的线程中运行（缓冲区是从同一个线程读取和写入的）我还尝试将其移动到主线程而不启动任何其他线程，但效果相同。

操作系统是 Ubuntu 12.04，编译器是 g++ 4.6 我在我的项目中也启用了 c++0x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:01:33.040

也许您只需要在访问 std::list 时使用锁（互斥锁）

```
// near list
class Client {
 /// ...
    PendingBuf data_list;
    std::mutex list_lock;
 /// ...
}

void Client::write_cb(ev::io &watcher, int events){
   std::lock_guard<std::mutex> lock(list_lock);
   if(!data_list.empty()){
 /// ...
} 
```

并且在写入此列表时也使用锁。此外，还可以使用读锁和写锁。写锁总是排他所有其他人（读和写）。对于并发读取，可以在同一时刻多次获取读取锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:45:08.737

libstdc++'s`std::list`在 c++98 和 c++11/c++0x 模式之间不兼容。见[http://gcc.gnu.org/wiki/Cxx11AbiCompatibility](http://gcc.gnu.org/wiki/Cxx11AbiCompatibility)

原因是在 c++98 中它不需要为`std::list::size()`O(1)，而 libstdc++ 将其实现为 O(n)。在 C++11 中，它必须为 O(1)，因此在 C++11 模式`size_t`中存在一个额外的成员`std::list`，这会改变对象的大小。

如果您的应用程序使用 C++11，那么通常您链接到的所有库也应该这样做。

编辑：抱歉，我刚刚意识到你说的是 GCC 4.6，它还没有`std::list::size()`改变，所以你的问题一定是别的。

# bash - 将文本文件的行替换为 bash 命令

> ID：11164425
> 
> 赞同：0
> 
> 时间：2012-06-22T21:32:34.963
> 
> 标签：bash, curl

我想为文本文件的每一行运行一次 bash 命令。

如果我做：

```
while read l; do 
  echo $l; 
done < myfile.txt 
```

我得到每一行的回声。

但是当我使用我的实际命令时：

```
while read l; do 
  curl -X POST http://somedomain -H "Content-Type: application/json" -d $l
done < myfile.txt 
```

我得到错误。我认为这可能与文本文件中的转义字符有关，但我没有尝试过任何工作。为文本文件的每一行运行一次 curl 表达式的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:37:37.280

使用引号。

```
foocmd ... "$l" 
```

# java - OSGI 环境中的依赖注入

> ID：11164432
> 
> 赞同：38
> 
> 时间：2012-06-22T21:33:03.693
> 
> 标签：java, dependency-injection, osgi, guice, apache-felix

首先是一些背景：

我正在开发一些基于[Apache Sling](http://sling.apache.org/site/index.html)的 webapp 原型代码，该代码基于 OSGI 并在 Apache Felix 上运行。尽管我认为我现在已经掌握了大多数概念，但我对 OSGI 还是比较陌生。然而，令我困惑的是，我一直无法找到一个“完整的”依赖注入 (DI) 框架。我已经使用声明式服务 (DS) 成功地使用了基本的 DI。但我的理解是 DS 是用来引用的——我该怎么说呢？-- OSGI 将服务和组件注册在一起。为此它工作得很好，但我个人使用像[Guice](http://code.google.com/p/google-guice/)这样的 DI 框架将整个对象图连接在一起并将对象放在正确的范围内（想想`@RequestScoped`或`@SessionScoped`例如）。然而，我看过的 OSGI 特定框架似乎都不支持这个概念。

我已经开始阅读有关[OSGI 蓝图](http://www.ibm.com/developerworks/opensource/library/os-osgiblueprint/index.html)和[iPOJO 的内容](http://felix.apache.org/site/apache-felix-ipojo.html)，但这些框架似乎更关心将 OSGI 服务连接在一起，而不是提供完整的 DI 解决方案。我不得不承认我还没有做过任何样品，所以我的印象可能不正确。

作为 Guice 的扩展，我已经尝试过[Peaberry](http://code.google.com/p/peaberry/)，但是我发现文档很难找到，虽然我得到了基本的 DI 工作，但很多 guice-servlet 的高级功能（自动注入过滤器、servlet 等）没有根本不工作。

所以，我的问题如下：

1.  声明式服务与 Guice 或 Spring 等“传统”DI 相比如何？他们是解决同一个问题还是针对不同的问题？
2.  到目前为止，我看到的所有 OSGI 特定解决方案都缺少 DI 范围的概念。例如，Guice + guice-servlet 具有请求范围的依赖关系，这使得编写 Web 应用程序非常干净和容易。我只是在文档中错过了这一点，还是这些框架中的任何一个都没有涵盖这些问题？
3.  [JSR 330](http://www.jcp.org/en/jsr/detail?id=330)和基于 OSGI 的 DI 是两个不同的世界吗？例如，iPOJO 带来了[自己的注释](http://felix.apache.org/site/how-to-use-ipojo-annotations.html)，而[Felix SCR 注释](http://felix.apache.org/site/scr-annotations.html)似乎是一个完全不同的世界。
4.  有人有构建基于 OSGI 的系统和 DI 的经验吗？甚至可能在 github 上有一些示例代码？
5.  是否有人同时使用 Guice 和 iPOJO 等不同的技术，或者这只是一个疯狂的想法？

抱歉，这个问题很长。

非常感谢任何反馈。

* * *

**更新**

*范围注入*：范围注入是一种有用的机制，可以自动注入来自特定生命周期的对象。例如，您的某些代码依赖于作为 servlet 过滤器的一部分创建的 Hibernate 会话对象。通过标记依赖关系，容器将自动重建对象图。也许只是有不同的方法？

*JSR 330 vs DS*：从您所有出色的答案中，我看到这是两件不同的事情。这就提出了一个问题，当在 OSGI 上下文中使用时，如何处理使用 JSR 330 注释的第三方库和框架？什么是好方法？在 Bundle 中运行 JSR 330 容器？

感谢您的所有回答，您对我很有帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-23T12:21:03.687

## 整体方法

使用 Apache Sling 进行依赖注入的最简单方法是使用[maven-scr-plugin](http://felix.apache.org/site/apache-felix-maven-scr-plugin.html) ，也是整个代码库中使用的方法。

您可以注释您的 java 类，然后在构建时调用 SCR 插件，可以作为 Maven 插件，也可以作为 Ant 任务。

例如，要注册一个 servlet，您可以执行以下操作：

```
@Component // signal that it's OSGI-managed
@Service(Servlet.class) // register as a Servlet service
public class SampleServlet implements Servlet {   
   @Reference SlingRepository repository; // get a reference to the repository    
} 
```

## 具体答案

> 声明式服务与 Guice 或 Spring 等“传统”DI 相比如何？他们是解决同一个问题还是针对不同的问题？

他们解决了同样的问题——依赖注入。但是（见下文）它们的构建还考虑了服务可以随时出现或消失的动态系统。

> 到目前为止，我看到的所有 OSGI 特定解决方案都缺少 DI 范围的概念。例如，Guice + guice-servlet 具有请求范围的依赖关系，这使得编写 Web 应用程序非常干净和容易。我只是在文档中错过了这一点，还是这些框架中的任何一个都没有涵盖这些问题？

我还没有在 SCR 世界中看到任何添加会话范围或请求范围服务的方法。但是，SCR 是一种通用方法，可以在更具体的层处理范围。

由于您使用的是 Sling，我认为几乎不需要会话范围或请求范围的绑定，因为 Sling 为每个请求提供了内置对象，这些对象是为当前用户适当创建的。

一个很好的例子是 JCR 会话。它是使用正确的权限自动构建的，实际上它是一个请求范围的 DAO。Sling resourceResolver 也是如此。

如果您发现自己需要按用户工作，最简单的方法是让服务接收 JCR`Session`或 Sling`ResourceResolver`并使用它们来执行您需要的工作。结果将根据当前用户的权限自动调整，无需任何额外的努力。

> JSR 330 和基于 OSGI 的 DI 是两个不同的世界吗？例如，iPOJO 带来了自己的注释，而 Felix SCR 注释似乎是一个完全不同的世界。

是的，它们是不同的。您应该记住，虽然 Spring 和 Guice 更主流，但 OSGi 服务更复杂，支持更多用例。在 OSGi 中，捆绑包（以及隐含的服务）可以随时来来去去。

这意味着当您有一个依赖于刚刚变得不可用的服务的组件时，您的组件将被停用。或者当您收到一个组件列表（例如，Servlet 实现）并且其中一个被停用时，您会收到通知。据我所知，Spring 和 Guice 都不支持这一点，因为它们的接线是静态的。

这是 OSGi 为您提供的极大灵活性。

> 有人有构建基于 OSGI 的系统和 DI 的经验吗？甚至可能在 github 上有一些示例代码？

[Sling Samples SVN 存储库](http://svn.apache.org/repos/asf/sling/trunk/samples/)中有大量示例。你应该在那里找到大部分你需要的东西。

> 是否有人同时使用 Guice 和 iPOJO 等不同的技术，或者这只是一个疯狂的想法？

如果你有配置了 JSR 330 注释的框架，那么在运行时使用 Guice 或 Spring 或任何适合你的东西来配置它们是有意义的。然而，正如 Neil Bartlett 所指出的，这不会跨捆绑工作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-24T16:49:21.033

我只想为罗伯特的出色答案添加更多信息，特别是关于 JSR330 和 DS。

声明式服务、蓝图、iPOJO 和其他 OSGi“组件模型”**主要**用于注入 OSGi 服务。这些比常规依赖项更难处理，因为它们可以随时来来去去，包括响应外部事件（例如网络断开）或用户操作（例如删除捆绑包）。因此，所有这些组件模型都在纯依赖注入框架之上提供了一个额外的**生命周期**层。

这是 DS 注释与 JSR330 不同的主要原因...... JSR330 没有提供足够的语义来处理生命周期。例如，他们什么也没说：

*   *什么时候*应该注入依赖？
*   当依赖项当前不可用时我们应该怎么做（即它是可选的还是强制的）？
*   当我们正在使用的服务消失时，我们应该怎么做？
*   我们可以动态地从一个服务实例切换到另一个实例吗？
*   ETC...

不幸的是，因为组件模型主要关注服务——即捆绑包*之间的链接——它们在捆绑捆绑包**内*的依赖关系方面相对简陋（尽管蓝图确实为此提供了一些支持）。

使用现有的 DI 框架来连接包内的依赖项应该没有问题。例如，我有一个客户使用 Guice 来连接一些声明式服务组件的内部部件。然而我倾向于质疑这样做的价值，因为如果你在你的包中需要 DI，这表明你的包可能太大而且不连贯。

请注意，不要使用传统的 DI 框架在包**之间连接组件，这一点非常重要。**如果 DI 框架需要从另一个包访问一个类，那么另一个包必须公开其实现细节，这破坏了我们在 OSGi 中寻求的封装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T16:03:21.927

我有一些使用 Aries Blueprint 构建应用程序的经验。它有一些关于 OSGi 服务和配置管理支持的非常好的特性。

如果您搜索一些出色的示例，请查看 Apache Karaf 的代码，该代码使用蓝图进行所有布线。见[http://svn.apache.org/repos/asf/karaf/](http://svn.apache.org/repos/asf/karaf/)

我的网站上还有一些 Blueprint 和 Apache Karaf 的教程： [http ://www.liquid-reality.de/display/liquid/Karaf+Tutorials](http://www.liquid-reality.de/display/liquid/Karaf+Tutorials)

在您使用嵌入式 felix 的环境中，它会有点不同，因为您没有 Karaf 的管理功能，但您只需要安装相同的包，它应该可以很好地工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T08:53:59.107

我可以推荐 Bnd，如果你也特别使用 Eclipse IDE Bndtools。这样您就可以避免在 XML 中描述 DS 并改用注释。DI有一个特殊的`Reference`注释。这个还有一个过滤器，您只能在其中引用一个特殊的服务子集。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T21:44:24.977

我在当前项目中使用 osgi 和 DI，我选择了双子座蓝图，因为它是[SPRING DYNAMIC MODULES](http://www.springsource.org/osgi)的第二个版本，基于此信息，我建议您阅读[Spring Dynamic Modules in Action](https://rads.stackoverflow.com/amzn/click/com/1935182307)。这本书将帮助你理解一些部分和要点如何构建架构以及它为什么好:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T21:59:29.737

在这里遇到类似的架构问题 - 正如罗伯特在他的回答中提到的那样：

> 如果您发现自己需要每个用户的工作，最简单的方法是让服务接收 JCR Session 或 Sling ResourceResolver 并使用它们来执行您需要的工作。结果将根据当前用户的权限自动调整，无需任何额外的努力。

从中推断（以及我目前正在编码的内容），一种方法是添加`@param resourceResolver`到任何`@Service`方法中，以便您可以传递适当的请求范围对象以在执行链中使用。

具体来说，我们有一个`XXXXService`/`XXXXDao`层，从`XXXXServlet`/ `XXXXViewHelper`/ JSP 等价物调用。因此，通过 OSGI 注释管理所有这些组件`@Service`，我们可以轻松地连接整个堆栈。

这里的缺点是你需要在你的界面设计中乱扔参数`ResourceResolver`或`Sessions`参数。

最初我们尝试注入`ResourceResolverFactory`到 DAO 层，这样我们就可以很容易地通过工厂随意访问会话。但是，我们在层次结构中的多个点与会话交互，并且每个请求多次。这导致了会话关闭异常。

*有没有办法`ResourceResolver`可靠地处理每个请求，而不必将其传递给每个服务方法？*

使用服务层上的请求范围注入，您可以改为将 ResourceResolver 作为构造函数 arg 并使用实例变量。当然，这里的缺点是您必须考虑请求范围与原型范围的服务代码并相应地分开。

*这似乎是一个常见问题，您希望将关注点分离到服务/dao 代码中，将 JCR 交互留在 DAO 中，类似于 Hibernate，您如何轻松获得`Session`执行 repo 操作的每个请求？*

# scala - 在scala和play2中添加一个类

> ID：11164436
> 
> 赞同：1
> 
> 时间：2012-06-22T21:33:59.463
> 
> 标签：scala, playframework

我在哪里放置一个新的类文件，以及如何在应用程序控制器中导入它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T22:26:02.977

Play 2 的 Java 和 Scala 版本的新类都将成为`app/models/`包的一部分。并且导入将只是`import models.className`.

你应该查看他们在 PlayFramework 网站上列出的教程，它应该对你有用，可以在这里找到：[http ://www.playframework.org/documentation/2.0.1/ScalaTodoList](http://www.playframework.org/documentation/2.0.1/ScalaTodoList)

# php - PHP上传图片复制

> ID：11164440
> 
> 赞同：1
> 
> 时间：2012-06-22T21:34:22.607
> 
> 标签：php

我正在使用带有 PHP 的 AgileUploader 来允许用户上传图像。我的脚本检查文件夹是否存在，如果不存在，则根据用户会话 ID 创建文件夹。从那里它允许用户上传一个文件，该文件将该文件复制到 3 种不同的大小。

在 99.8% 的时间里，一切都很好，但是，现在有两次（成千上万次），我有一个上传文件夹复制根图像文件夹。我的文件夹结构是：

```
temp/images/sessionid/large
temp/images/sessionid/medium
temp/images/sessionid/thumbnails 
```

该问题有时会导致：

```
temp/images/sessionid/sessionid/sessionid/ALL OTHER FOLDERS IN temp/images/ 
```

我认为这可能是会话问题，但正在使用有效的会话 ID 创建文件夹。

我正在运行 3 个网络服务器，它们都相互同步，并且复制问题导致同步有效图像的一些延迟，因为它复制了根临时/图像中的每个文件夹和文件。

然后我认为这可能是我的调整器放弃路径的问题：

```
$listing_image = glob($temp_main_folder . "/large/*.{jpg,gif,png}", GLOB_BRACE);
if(count($listing_image) < 7){
    if(move_uploaded_file($tmp_name, "$temp_main_folder/large/$name")){
        $resizeObj = new resize("$temp_main_folder/large/$name"); 
        $resizeObj -> resizeImage(350, 350, 'auto');
        $resizeObj -> saveImage("$temp_main_folder/medium/$name", 90);
        $resizeObj -> resizeImage(120, 120, 'auto');
        $resizeObj -> saveImage("$temp_main_folder/thumbnails/$name", 90);
    }
} 
```

无论如何，就像我说的那样，它可以工作 99.8%，所以我不认为它是任何代码的问题……但话又说回来，它失败了两次。

我的问题是，PHP 有没有办法在使用 mkdir 或限制子文件夹和文件的数量时限制文件夹大小？或者在上传文件时关于其他一些验证技术的任何建议。

每个文件夹总是有 3 个子文件夹，每个子文件夹最多有 6 个文件，每个文件的大小最大为 1mb。

# ruby - 对单个路由使用 HTTP Digest 身份验证

> ID：11164449
> 
> 赞同：1
> 
> 时间：2012-06-22T21:35:17.380
> 
> 标签：ruby, sinatra, rack, digest-authentication, http-digest

我想在我的模块化 Sinatra 应用程序中对特定路由使用 HTTP Digest 身份验证。

[sinatra recipes 网站](http://recipes.sinatrarb.com/p/middleware/rack_auth_basic_and_digest)中列出的示例仅描述了如何为整个应用程序启用摘要身份验证。为使其适用于特定路由而提出的解决方案是创建两个单独的应用程序，（一个具有摘要身份验证，另一个没有）将受保护和不受保护的路由放置在各自的应用程序中。

这将需要以下内容：

```
require 'sinatra/base'

class Protected < Sinatra::Base
  use Rack::Auth::Basic, "Protected Area" do |username, password|
    username == 'foo' && password == 'bar'
  end

  get '/' do
    "secret"
  end
end

class Public < Sinatra::Base
  get '/' do
    "public"
  end
end 
```

这对我来说似乎有点矫枉过正。

有没有一种方法可以保护模块化 sinatra 应用程序中的单个路由，而无需创建全新的应用程序？

[常见问题解答](http://www.sinatrarb.com/faq.html#auth)中有一个示例，其中引用了创建 Rack::Auth::Basic::Request 的实例并传入环境，但是使用摘要身份验证执行此类操作会大不相同，并且更像是手动身份验证过程。

这是基本的身份验证示例：

```
def authorized?
  @auth ||=  Rack::Auth::Basic::Request.new(request.env)
  @auth.provided? && 
    @auth.basic? && 
    @auth.credentials &&
    @auth.credentials == ['admin', 'admin']
end 
```

有人对如何做到这一点有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:23:53.503

使用[前置过滤器](http://www.sinatrarb.com/intro#Filters)。您是否需要对同一条路线采取不同的行为？

# c# - 通过MEF导出类时如何正确退出带有循环的后台线程？

> ID：11164452
> 
> 赞同：0
> 
> 时间：2012-06-22T21:35:39.980
> 
> 标签：c#, .net, mef

我实现了用作 TcpCLient 服务器的类。看起来像这样：

```
{

[Export]
public class MessageListener
{
    private readonly TcpListener tcpListener;
    private readonly Thread listenThread;

    private DataRepository DataRepository { get; set; }

    private IEventAggregator EventAggregator { get; set; }

    [ImportingConstructor]
    public MessageListener(DataRepository dataRepository, IEventAggregator eventAggregator)
    {
        this.DataRepository = dataRepository;
        this.EventAggregator = eventAggregator;

        // TODO: Need to put proper Port number
        this.tcpListener = new TcpListener(IPAddress.Any, 3000);
        this.listenThread = new Thread(this.ListenForClients);
        this.listenThread.Start();
    }

    private void ListenForClients()
    {
        this.tcpListener.Start();

        while (true)
        {
            // blocks until a client has connected to the server
            var client = this.tcpListener.AcceptTcpClient();

            // create a thread to handle communication with connected client
            var clientThread = new Thread(this.HandleClientComm);
            clientThread.Start(client);
        }
    } 
```

这个监听器导入到我的 Shell 视图模型中。效果很好。

当我关闭 WPF 窗口时 - MEF 不会处理此对象。Windows 关闭但进程仍在运行。如何正确关闭此“服务器”？它等待`var client`..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:41:28.243

在所有前台线程完成之前，该进程不会退出。

在这种情况下，由于您正在启动一个新线程，您可以将其设为后台线程：

```
this.listenThread = new Thread(this.ListenForClients);
this.listenThread.IsBackground = true;
this.listenThread.Start(); 
```

后台线程不会使进程保持活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:12:13.487

将您的类标记为 implementation `IDisposable`，并在 implementation 中设置一个`disposed`标志`Dispose`。然后改变你的循环，你接受这样的连接：

```
 while (!this.disposed)
    {
        Thread.Sleep(1); // to avoid spinning a core 100%
        if (this.tcpListener.Pending)
        {
            // shouldn't block because we checked tcpListener.Pending
            var client = this.tcpListener.AcceptTcpClient();
            var clientThread = new Thread(this.HandleClientComm);
            clientThread.Start(client);
        }
    } 
```

MEF 将负责调用`Dispose`它创建的任何一次性组件，前提是您在应用程序退出时处置 MEF 容器本身。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T21:42:22.080

它不会因为无限循环而停止。您需要使用标志、互斥锁或类似的东西，以便循环停止并且线程将返回并正确停止。

# css - Grails Twitter Bootstrap 和谷歌地图集成

> ID：11164453
> 
> 赞同：0
> 
> 时间：2012-06-22T21:35:41.493
> 
> 标签：css, google-maps, grails, twitter-bootstrap

我正在使用 Grails 构建一个 Web 应用程序并希望实现一个谷歌地图。我正在使用 Twitter Bootstrap。

因此，我将以下行放入我的 BuildConfig.groovy：

```
compile ":twitter-bootstrap:2.0.2.25"
runtime ":fields:1.1" 
```

为了在我的代码中使用谷歌地图，我写：

```
<div class="map" id="mapCanvas"> 
```

问题是，当使用 Twitter Bootstrap 时，这条线不会出现，但在不使用 Twitter Bootstrap 时会出现。解决方案是在 twitter 引导 css 中进行一些更改，但在 Grails 中我无法编辑它，因为它是一个插件。那么我能做什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:41:21.747

[插件文档](https://github.com/groovydev/twitter-bootstrap-grails-plugin/blob/master/README.md)告诉你如何使用 less 来自定义 CSS 。

# android - htc one 的摄像头获取帧失败，如何获取？

> ID：11164457
> 
> 赞同：0
> 
> 时间：2012-06-22T21:36:27.270
> 
> 标签：android, camera, frame

我是 Android 编程新手。我在安卓手机上做了一个项目。它适用于我的 HTC 渴望 a8181。因为我希望我的软件运行得更快，所以我得到了一个 htc one 。然后程序无法从相机获取帧。以前有人遇到过这样的问题吗？请帮我。（我使用 onPreviewFrame 在我的软件中获取框架。）

```
public class CopyOfCameraPreview extends SurfaceView implements
    SurfaceHolder.Callback, PreviewCallback {
private SurfaceHolder mHolder;
private Camera mCamera;
private boolean preview = false;
public static int w, h, l;

public CopyOfCameraPreview1(Context context) {
    super(context);
    mCamera = getCameraInstance();  
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {

    if (mHolder.getSurface() == null) {

        return;
    }

    try {
        mCamera.stopPreview();
        preview = false;
    } catch (Exception e) {

    }

    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();
        preview = false;

    } catch (Exception e) {
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
}

public void surfaceCreated(SurfaceHolder holder) {

    try {
        mCamera.setPreviewDisplay(holder);
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(960, 544);
        parameters.setPreviewFormat(PixelFormat.YCbCr_420_SP);

        mCamera.setParameters(parameters);
        mCamera.setPreviewCallback(this);

        mCamera.startPreview();
        preview = true;
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }

}

public void surfaceDestroyed(SurfaceHolder holder) {
    if (mCamera != null) {

        if (preview) {
            mCamera.stopPreview();
            preview = false;

        }
        mCamera.release();
        mCamera = null;

    }

}

public static Camera getCameraInstance() {
    Camera c = null;
    try {
        c = Camera.open();
    } catch (Exception e) {

    }
    return c; 
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    camera.setPreviewCallback(null);
    if (data != null) {
        Camera.Parameters parameters = mCamera.getParameters();
        int imageFormat = parameters.getPreviewFormat();
        if (imageFormat == ImageFormat.NV21) {
            // Bitmap image = null;
            w = parameters.getPreviewSize().width;
            h = parameters.getPreviewSize().height;
            l = data.length;
            decodeYUV420SP(data, w, h);
        }

    }

    camera.setPreviewCallback(this);
} 
```

}

```
06-22 17:41:51.159: I/QCameraHWI(191):  setPreviewWindow : X, mPreviewState = 0
06-22 17:41:51.159: I/CameraService(191): Destroying camera 0
06-22 17:41:51.159: I/QualcommCamera(191): Qint android::close_camera_device(hw_device_t*): device =0x14e1270 E
06-22 17:41:51.159: I/QCameraHWI(191): ~QCameraHardwareInterface: E
06-22 17:41:51.169: I/drawView(16359): Drwaed
06-22 17:41:51.169: E/mm_camera_poll_thread(191): mm_camera_poll_thread_release: err, poll thread of channel  0s not running. cam_id=0
06-22 17:41:51.169: E/mm_camera_poll_thread(191): mm_camera_poll_thread_release: err,   poll thread of channel  1s not running. cam_id=0
06-22 17:41:51.169: E/mm_camera_poll_thread(191): mm_camera_poll_thread_release: err, poll thread of channel  2s not running. cam_id=0
06-22 17:41:51.169: E/mm_camera_poll_thread(191): mm_camera_poll_thread_release: err, poll thread of channel  3s not running. cam_id=0
06-22 17:41:51.169: E/mm-camera(206): config_shutdown_pp Camera not in streaming mode. Returning. 
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_read_pipe Got EXIT 
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: E
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 0 num 0 count = 0 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 1 num -1 count = -1 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 2 num 0 count = 0 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 3 num 0 count = 0 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 4 num 0 count = 0 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: Check for image mode 5 num 0 count = 0 data = 0x0
06-22 17:41:51.169: E/mm-camera(206): mctl_pp_clear_buf: X 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:05:41.690

相机预览管理有点棘手 - 只有在创建并调用了 surfaceChanged() 后，表面视图才可用于相机预览。您还应记住在活动 onPause() / onResume() 生命周期中停止预览和释放相机。这就是为什么最好将相机管理与活动而不是查看课程结合起来。

Nd 无需在 onPreviewFrame() 回调中查询相机参数 - 它们不会改变，因为您的应用程序仅具有相机。

您可以查看此项目中的示例，了解它应该如何工作：

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

（查看源代码并查看 demos 子目录 - 除非您对图像处理内容感兴趣）

# php - 获取当前文件 PHP 的父文件夹

> ID：11164459
> 
> 赞同：26
> 
> 时间：2012-06-22T21:36:58.250
> 
> 标签：php

我已经做了很多搜索，所以如果这是一个骗局，我很抱歉。
无论如何，我需要获取当前文件所在文件夹的名称。例如，我想将类似的东西转换`example.com/folder/subfolder/file.php`为`subfolder`.
我当前的代码是`dirname($_SERVER['PHP_SELF'])`，但返回`/folder/subfolder`而不是`subfolder`. 谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-22T22:02:35.933

最简单的方法是：

```
basename(__DIR__); 
```

[https://www.php.net/manual/en/language.constants.magic.php](https://www.php.net/manual/en/language.constants.magic.php)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-22T21:39:21.607

您需要将现有代码`dirname()`与调用相结合[`basename()`](http://php.net/manual/en/function.basename.php)：

```
$parent = basename(dirname($_SERVER['PHP_SELF'])); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T21:40:18.813

`dirname()`使用 with`basename()`会工作......如果你想全部获得它们，这也是：

```
$folders = explode ('/', $_SERVER['PHP_SELF']); 
```

现在 $folders 将包含所有文件夹名称的数组。

干杯。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-10T12:48:48.697

```
$folder = basename(dirname(__FILE__)); 
```

# java - loadDataWithBaseURL 不加载属于 html 页面的图像

> ID：11164472
> 
> 赞同：0
> 
> 时间：2012-06-22T21:37:55.163
> 
> 标签：java, android, image, http, webview

我与这个问题斗争了很长时间，在谷歌和 SO 周围挖掘，但仍然没有运气。最后，我在这里得到您的帮助，请建议或帮助。

我对以下源代码的问题是它只显示图像不显示的字符串内容，而是显示白色矩形或有时带有问号的蓝色图像。

问：如何显示图像？

这是我的代码：

```
private void openURL() {

    DefaultHttpClient client = new HttpsRequest(getApplicationContext());
    HttpGet get = new HttpGet(getUrlField().getText().toString());
    // Execute the GET call and obtain the response
    HttpResponse getResponse;
    try {
        getResponse = client.execute(get);
        HttpEntity responseEntity = getResponse.getEntity();

        String content = EntityUtils.toString(responseEntity);
        getWebView().loadDataWithBaseURL(null, content, "text/html", "utf-8",
                null);

    } catch (ClientProtocolException e) {
        WSLog.e(THIS_FILE, "HTTP Error.");
        e.printStackTrace();
    } catch (IOException e) {
        WSLog.e(THIS_FILE, "Url Load Error.");
        e.printStackTrace();
    }
} 
```

网络视图输出：

![在此处输入图像描述](../Images/98050e2349158705383335d520092449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:10:50.950

在 Vasarat 的帮助下，我身边的一些修改帮助我回答了这个问题。我已将以下代码行修改为

```
getWebView().loadDataWithBaseURL("http://mywebSite.com/parent_dir_to_iamges/", content, "text/html", "UTF-8","about:blank"); 
```

这种修改给了我预期的完美输出。

请放松评论以了解有关该问题的详细信息。

**注意**：我在基本 url 中使用了 http 而不是 https .....如果我可以使用 https，请告诉我。 `webview.Loadurl()`如果 API 级别为 10 或更高，则使用 https url 可以正常工作，但它显示 API 级别 8 的空白页面。

# network-programming - ZeroMQ 中的消息阻塞

> ID：11164474
> 
> 赞同：3
> 
> 时间：2012-06-22T21:38:02.900
> 
> 标签：network-programming, message-queue, zeromq

我在使用 ZeroMQ 时遇到了一个奇怪的问题，其中一些消息被卡住了，而当新消息到达时才被卡住。就像新消息将卡住的消息推到门上一样（可怕的比较，我知道）。

我的代码很简单：

代表.php

```
$context = new ZMQContext;
$receiver = new ZMQSocket($context, ZMQ::SOCKET_PULL);
$receiver->connect("tcp://localhost:8022");
$receiver2 = new ZMQSocket($context, ZMQ::SOCKET_PULL);
$receiver2->connect("tcp://localhost:8024");

for (;;) {
    echo $receiver->recv() . PHP_EOL;
    echo $receiver2->recv() . PHP_EOL;
} 
```

cnt.php 和 cnt2.php（相同的代码，不同的端口）

```
$context = new ZMQContext;
$work = new ZMQSocket($context, ZMQ::SOCKET_PUSH);
$work->bind('tcp://*:8022');
$work->send('Hello World'); 
```

cnt.php 发送到 8022，cnt2.php 发送到 8024。它们会时不时地执行并向 rep.php 发送消息。但是，有些消息会卡住。如果我从 cnt.php 发送 4 条消息，则没有收到任何消息，但是当我从 cnt2.php 发送 1 条消息时，我一次收到 5 条消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:56:49.883

我在这里不是 PHP 专家，但在猜测语法和功能。如果我错了请纠正我

```
echo $receiver->recv() . ' - ' . $receiver2->recv(); 
```

recv() 应该是一个阻塞调用。

1.  `$receiver->recv()`阻塞，直到收到一些消息。
2.  但`echo`不会立即回显消息
3.  你又被屏蔽了`$receiver2->recv()`
4.  只有当您从另一个文件发送消息时才会回显工作，因为它正在等待`$receiver2->recv()`

由于您想独立处理套接字 recv()，您应该使用轮询或基于事件的异步 I/O。

[**尝试的解决方案**]

```
$poll = new ZMQPoll();
$poll->add($receiver, ZMQ::POLL_IN);
$poll->add($receiver2, ZMQ::POLL_IN);
$readable = $writeable = array();
while(true) {
     $events = $poll->poll($readable, $writeable);
     foreach($readable as $socket) {
               $message = $socket->recv();
               echo $message, PHP_EOL;
     }
} 
```

改编自：http: //zguide.zeromq.org/php: [rrbroker](http://zguide.zeromq.org/php:rrbroker)

# asp.net - 使用 ASP.NET Web API 时，ASP.NET MVC 应用程序还剩下什么？

> ID：11164476
> 
> 赞同：-1
> 
> 时间：2012-06-22T21:38:25.180
> 
> 标签：asp.net, asp.net-mvc-3, rest, asp.net-web-api

作为一个学习练习，我想创建一个简单的 web api 并使用 web 客户端（asp.net mvc）和桌面客户端（winform）来使用它。Web api 必须处理类别、产品，当然还有用户/角色，如下所示：

*   每个人都可以浏览类别和产品
*   普通用户可以插入/更新/删除产品
*   管理员可以插入/更新/删除类别和产品

关于第一个消费者，asp.net mvc 应用程序，我有以下问题：

1.  在控制器中，除了*ViewResults*之外还有什么，因为据我所知，所有 http 请求都是由 javascript 发出的？

2.  那么身份验证和授权呢？由于我们谈论的是 RESTFUL 服务，因此调用之间没有任何联系，用户必须在每个请求中发送一些数据来识别自己。

    2.1 使用 HTTPVerbs 有什么意义（在 ASP.NET MVC 应用程序中）？

    2.2 FormsAuthentication呢？

    2.3 如何安全地将凭据发送到 web.api？

一切对我来说都如此模糊，是否有任何带有一些 web api 的示例，独立托管在 iis 中并由网站（ASP.NET WebForms 或 ASP.NET MVC）使用，因为我看到的所有示例都不是那么清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:42:15.873

> 1) 在控制器中，除了 ViewResults 之外还有什么，因为据我了解，所有 HTTP 请求都是由 JavaScript 发出的？

不必要。您可以完美地使用[HttpClient](http://johnnycode.com/2012/02/23/consuming-your-own-asp-net-web-api-rest-service/)（Web API 客户端类）直接从您的标准 ASP.NET MVC 操作中使用您的 RESTful 操作。例如，您可以拥有一个使用 HttpClient 使用 ASP.NET MVC Web API 方法来获取数据而不是查询关系数据库的存储库。您不必将 WEB API 方法暴露给客户端 JavaScript。它们可以作为您访问数据的网关。当然有很多可能的情况。

> 2) 身份验证怎么样？既然我们谈论的是 RESTFUL 服务，调用之间没有连接，用户必须在每个请求中发送一些数据来识别自己。

有许多方法可以执行身份验证。其中之一是使用表单身份验证，这是一种涉及 cookie 的成熟机制。因此，在这种情况下，将从客户端发送来识别自己的数据实际上是一个 cookie。

> 2.1) 使用 HTTPVerbs 有什么意义吗？

当然。REST 都是关于 HTTP 动词的。在 ASP.NET Web API 的情况下，它是 HTTP 谓词，它根据约定确定要调用哪个 API 控制器操作。您当然可以通过覆盖默认路由设置来违反此约定。

> 2.2) FormsAuthentication 怎么样？

见第 2 点）

# java - 在 Java 中连接到 oracle 数据库 g11 第 2 版时出错

> ID：11164480
> 
> 赞同：0
> 
> 时间：2012-06-22T21:38:36.680
> 
> 标签：java, oracle

我正在尝试使用以下代码连接到 Java 中的远程 oracle 数据库服务器：

```
public static Connection getConexionOracle () {
    Connection con = null;
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        con = DriverManager.getConnection("jdbc:oracle:thin:@//oracle.vital.com.mx:1521:XE","username","password");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return con;
} 
```

我正在使用 Oracle g11 Releas 2，并且我已经在构建路径中包含了 ojdbc.jar。尝试建立连接时，出现以下堆栈跟踪错误：

```
java.sql.SQLException: Error de E/S: The Network Adapter could not establish the connection
 [java]     at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:458)
 [java]     at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:546)
 [java]     at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:236)
 [java]     at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
 [java]     at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
 [java]     at java.sql.DriverManager.getConnection(Unknown Source)
 [java]     at java.sql.DriverManager.getConnection(Unknown Source)
 [java]     at vital.tde.general.Conexion.getConexionOracle(Conexion.java:22)
 [java]     at vital.tde.general.Prueba.doGet(Prueba.java:35)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
 [java]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
 [java]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
 [java]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
 [java]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
 [java]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
 [java]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
 [java]     at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
 [java]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
 [java]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
 [java]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
 [java]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
 [java]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
 [java]     at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
 [java]     at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 [java]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 [java]     at java.lang.Thread.run(Unknown Source)
 [java] Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
 [java]     at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:392)
 [java]     at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:434)
 [java]     at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:687)
 [java]     at oracle.net.ns.NSProtocol.connect(NSProtocol.java:247)
 [java]     at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1102)
 [java]     at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)
 [java]     ... 26 more
 [java] Caused by: java.net.UnknownHostException: //oracle.vital.com.mx
 [java]     at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
 [java]     at java.net.InetAddress$1.lookupAllHostAddr(Unknown Source)
 [java]     at java.net.InetAddress.getAddressesFromNameService(Unknown Source)
 [java]     at java.net.InetAddress.getAllByName0(Unknown Source)
 [java]     at java.net.InetAddress.getAllByName(Unknown Source)
 [java]     at java.net.InetAddress.getAllByName(Unknown Source)
 [java]     at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:117)
 [java]     at oracle.net.nt.ConnOption.connect(ConnOption.java:133)
 [java]     at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:370)
 [java]     ... 31 more 
```

我已经尝试了以下方法，但仍然出现错误：

1.  Ping oracle.vital.com.mx（获得响应）
2.  Telnet oracle.vital.com.mx 1521（获得响应）
3.  禁用服务器防火墙

您对这个问题有什么建议？我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:00:03.390

```
 [java] Caused by: java.net.UnknownHostException: //oracle.vital.com.mx 
```

尝试删除连接字符串中的“//”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:48:09.497

我有同样的问题，我试试这个并且它有效：

-- 从您的 Oracle 服务器机器 $lsnrctl services 执行此命令，它为您提供可分配的服务。

-- 将外部服务的“HOST”和“PORT”的值（该服务的名称类似于“XDB.your.domain”）放在你的java url字符串连接上。

祝你好运！

PS：对不起我的英语。

我看到你解决了连接问题。好吧，如果将来您在远程连接方面遇到问题，您有我的答案。

# sql - 通过 raster2pgsql 导入栅格，但出现 sql 语法错误

> ID：11164481
> 
> 赞同：3
> 
> 时间：2012-06-22T21:38:43.823
> 
> 标签：sql, postgresql, import, postgis, raster

我尝试按照本教程 [http://www.postgis.org/documentation/manual-svn/using_raster.xml.html][1] 将光栅文件导入我的 postgres 数据库

**环境：** windows7、Postgres 8.4、postgis 2.0。

我的命令行是：

```
cd C:\Program Files (x86)\PostgreSQL\8.4\bin
raster2pgsql -s 4236 -I -G -M kiwi.jpg -F -t 100x100 public.gis > out.sql
psql -U postgres -d mydb2 -f out.sql 
```

名为“kiwi”的图片位于“C:\Program Files (x86)\PostgreSQL\8.4\bin”文件夹中。可以成功生成out.sql。但是输入 "psql -U postgres -d mydb2 -f out.sql" 后，出现错误。

> psql：out.sql：98：错误：“可用”处或附近的语法错误
> 
> 第 1 行：可用的 GDAL 栅格格式：

谢谢！这是查询的内容：（我对postgis很新，所以我无法弄清楚这里出了什么问题。因为我只是按照教程进行的，它应该可以工作）

```
 Available GDAL raster formats:
      Virtual Raster
      GeoTIFF
      National Imagery Transmission Format
      Raster Product Format TOC format
      ECRG TOC format
      Erdas Imagine Images (.img)
      CEOS SAR Image
      CEOS Image
      JAXA PALSAR Product Reader (Level 1.1/1.5)
      Ground-based SAR Applications Testbed File Format (.gff)
      ELAS
      Arc/Info Binary Grid
      Arc/Info ASCII Grid
      GRASS ASCII Grid
      SDTS Raster
      DTED Elevation Raster
      Portable Network Graphics
      JPEG JFIF
      In Memory Raster
      Japanese DEM (.mem)
      Graphics Interchange Format (.gif)
      Graphics Interchange Format (.gif)
      Envisat Image Format
      Maptech BSB Nautical Charts
      X11 PixMap Format
      MS Windows Device Independent Bitmap
      SPOT DIMAP
      AirSAR Polarimetric Image
      RadarSat 2 XML Product
      PCIDSK Database File
      PCRaster Raster File
      ILWIS Raster Map
      SGI Image File Format 1.0
      SRTMHGT File Format
      Leveller heightfield
      Terragen heightfield
      USGS Astrogeology ISIS cube (Version 3)
      USGS Astrogeology ISIS cube (Version 2)
      NASA Planetary Data System
      EarthWatch .TIL
      ERMapper .ers Labelled
      NOAA Polar Orbiter Level 1b Data Set
      FIT Image
      GRIdded Binary (.grb)
      Raster Matrix Format
      EUMETSAT Archive native (.nat)
      Idrisi Raster A.1
      Intergraph Raster
      Golden Software ASCII Grid (.grd)
      Golden Software Binary Grid (.grd)
      Golden Software 7 Binary Grid (.grd)
      COSAR Annotated Binary Matrix (TerraSAR-X)
      TerraSAR-X Product
      DRDC COASP SAR Processor Raster
      R Object Data Store
      Portable Pixmap Format (netpbm)
      USGS DOQ (Old Style)
      USGS DOQ (New Style)
      ENVI .hdr Labelled
      ESRI .hdr Labelled
      Generic Binary (.hdr Labelled)
      PCI .aux Labelled
      Vexcel MFF Raster
      Vexcel MFF2 (HKV) Raster
      Fuji BAS Scanner Image
      GSC Geogrid
      EOSAT FAST Format
      VTP .bt (Binary Terrain) 1.3 Format
      Erdas .LAN/.GIS
      Convair PolGASP
      Image Data and Analysis
      NLAPS Data Format
      Erdas Imagine Raw
      DIPEx
      FARSITE v.4 Landscape File (.lcp)
      NOAA Vertical Datum .GTX
      NADCON .los/.las Datum Grid Shift
      NTv2 Datum Grid Shift
      ACE2
      Snow Data Assimilation System
      Swedish Grid RIK (.rik)
      USGS Optional ASCII DEM (and CDED)
      GeoSoft Grid Exchange Format
      Northwood Numeric Grid Format .grd/.tab
      Northwood Classified Grid Format .grc/.tab
      ARC Digitized Raster Graphics
      Standard Raster Product (ASRP/USRP)
      Magellan topo (.blx)
      SAGA GIS Binary Grid (.sdat)
      Kml Super Overlay
      ASCII Gridded XYZ
      HF2/HFZ heightfield raster
      OziExplorer Image File
      USGS LULC Composite Theme Grid
      Arc/Info Export E00 GRID
      ZMap Plus Grid
      NOAA NGS Geoid Height Grids

I have no idea about this error after searching a lot. I really appreciate that if you can give me some suggestions.

  [1]: http://www.postgis.org/documentation/manual-svn/using_raster.xml.html
  [2]: http://i.stack.imgur.com/YxjNJ.png 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T21:09:06.383

PostgreSQL 中的`psql`实用程序用于处理 SQL 命令。您显示的文件不包含 SQL 命令，它似乎包含帮助某人选择`raster2pgsql`程序选项的信息。快速的网络搜索在这里找到了文档：

[http://www.postgis.org/documentation/manual-svn/using_raster.xml.html](http://www.postgis.org/documentation/manual-svn/using_raster.xml.html)

请注意，该`-G`选项用于“打印支持的光栅格式”。您用于运行程序的命令行包括该开关。如果您的目标是生成 SQL 语句，那么这不是您应该包括的选项。我不知道是否需要对你的命令进行任何其他调整，但你可以先放弃它，看看你得到了什么。

# visual-studio-2010 - VSPackage Builder 搜索对话框

> ID：11164484
> 
> 赞同：1
> 
> 时间：2012-06-22T21:38:56.067
> 
> 标签：visual-studio-2010, vs-extensibility, vspackage

我想在当前文档的右上角添加一个搜索对话框弹出窗口，实际上只是一个文本框或其他内容。我已经搞砸了 VSPackage 构建器，它很容易，但是我很难找出我应该查看哪些 UI 元素。

我不认为 ToolWindow 不太适合 - 我希望我正在做的事情是无边界的。我尝试单独使用自定义 WPF 窗口，但这与 IDE 配合得不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:40:43.963

听起来您所追求的是编辑器视口装饰。

这是一种扩展类型，其类继承自`Microsoft.VisualStudio.Text.Editor.IWpfTextViewCreationListener`

要创建装饰，您可以使用*Visual C#\Extensibility下的***Editor Viewport Adornment**项目模板。

 *试试这个例子：

[http://www.codeproject.com/Articles/55196/Code-InfoBox-Visual-Studio-Extension-VSX-2010](http://www.codeproject.com/Articles/55196/Code-InfoBox-Visual-Studio-Extension-VSX-2010)*

# ios - 确定 iOS 定位服务的更新模式

> ID：11164485
> 
> 赞同：0
> 
> 时间：2012-06-22T21:38:59.013
> 
> 标签：ios, cllocationmanager

我正在构建一个小原型应用程序来测试位置服务。我的应用同时使用 -startUpdatingLocation 和 -startMonitoringSignificantLocationChanges（用于后台处理）。

在这两种情况下，我都试图将一个 json 对象发送到服务器，其中包含我获得的位置数据，但我还希望能够发送某种标识符，以便我可以确定使用哪种定位服务模式获取数据（GPS、wifi、塔或至少如果它是通过上述两种服务之一。

如果这有什么不同，我将在 AppDelegate 中设置我的 CLLocationManager。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:20:32.583

The sources that `CLLocationManager` uses are not provided. However, you can determine whether GPS is allowed to turn off by setting the `desiredAccuracy` property. As the documentation notes, an accuracy of 1 kilometer *may* have the GPS turn off.

> For example, setting the desired accuracy for location events to one kilometer gives the location manager the flexibility to turn off GPS hardware and rely solely on the WiFi or cell radios. Turning off GPS hardware can lead to significant power savings.

You don't exactly control the GPS because other apps may be requesting a greater accuracy in the background.

You can roughly guess what was used for determining your location by examining your `CLLocation` object. Each `CLLocation` object has a property called `horizontalAccuracy`. This value is measured in meters. If it is less than 1 kilometer then GPS was *probably* used.

# parsing - 如何使用批处理从文件中获取文本块

> ID：11164491
> 
> 赞同：0
> 
> 时间：2012-06-22T21:39:24.420
> 
> 标签：parsing, text, batch-file

我试图从我已经创建的文件中获取一块文本并将该信息存储到一个新文件中。要解析的文本文件 id 设置如下：

主机名：xxxxxx

（大约8行信息）

主机名：xxxxxx

我遇到的最大问题是在文本块之间我专门寻找“管理员”这个词。我能够找到并返回其中包含单词 admin 的行，现在我需要编写一个循环来获取上面和下面的信息，如果在该文本块中找到单词 admin（我打算使用一个空行作为分隔符，这在我的文件中是一致的）。

我写了一些 for 循环，但没有一个给我 id 喜欢的内容。任何帮助，将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:39:15.043

下面的程序做你想做的事：

```
@echo off
setlocal EnableDelayedExpansion
rem Create the info removing empty lines
(for /F "delims=" %%a in ('schtasks /query /fo list /v') do echo %%a) > schtasks.txt
rem Add an additional "HostName:" line at end as delimiter
echo HostName: >> schtasks.txt
rem Create a vector of number of lines containing "HostName:"
set i=0
for /F "delims=:" %%a in ('findstr /N "HostName:" schtasks.txt') do (
   set /A i+=1
   set header[!i!]=%%a
)
rem Seek for the LINES containing "admin"
for /F "delims=:" %%a in ('findstr /N /I "administrator" schtasks.txt') do (
   rem Seek for the NEXT section that contains "admin" line
   for /L %%i in (1,1,%i%) do if %%a gtr !header[%%i]! set thisSection=%%i
   rem Locate that section
   set /A start=header[!thisSection!], nextSection=thisSection+1
   set /A end=header[!nextSection!]-1
   rem ... and show it
   set line=0
   for /F "delims=" %%a in (schtasks.txt) do (
      set /A line+=1
      if !line! geq !start! if !line! leq !end! echo %%a
   )
   echo ----------------------------------------------
)
del schtasks.txt 
```

PS - 当然，MS-DOS/Windows Batch 是一种编程语言！

# java - apache FileUpload，tmp文件过早删除

> ID：11164493
> 
> 赞同：0
> 
> 时间：2012-06-22T21:39:30.807
> 
> 标签：java, apache, servlets, file-upload

从我的服务器日志中，当我尝试在 FileItem 上调用 getInputStream 时：

```
6/22/12 14:31:14 ERROR c.s.u.WizardUploadReceiver:225          | Jumploader: Problem uploading zip13afcchr.psd - Failed to handle post properly
java.io.FileNotFoundException: uploadtemp\upload__3e026c78_13815404c62__7ff2_00000141.tmp (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method) ~[na:1.6.0_23]
    at java.io.FileInputStream.<init>(FileInputStream.java:106) ~[na:1.6.0_23]
    at org.apache.commons.fileupload.disk.DiskFileItem.getInputStream(DiskFileItem.java:236) ~[commons-fileupload-1.2.2.jar:1.2.2]
... 
```

据我所知，我已经验证了关联的 File 和 FileItem 以及 DiskFileItemFactory 直到我的 servlet 方法返回后才超出范围（有资格进行垃圾收集）。

我只是在寻找可能导致 FileUpload 过早删除这些临时文件的其他潜在情况。

附加信息：我只在特定客户端上传文件时看到此问题。发送到其他客户端上的相同 servlet 的相同文件似乎不会导致此问题。我还没有发现有问题的客户和没有问题的客户之间的区别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-01T10:57:58.447

文件大小可能超过 10 Kb（默认阈值）。当您使用 DiskFileItemFactory 解析请求时，您应该设置一个新的阈值，例如：

```
DiskFileItemFactory factory = new DiskFileItemFactory();

ServletFileUpload upload = new ServletFileUpload(factory);

**factory.setSizeThreshold(102400);**

List /* FileItem */ items = upload.parseRequest(request); 
```

# jpa - 在 JPA 2.0 JPQL 中，当返回一个 NEW 对象时，如何使用 FETCH JOIN？

> ID：11164496
> 
> 赞同：5
> 
> 时间：2012-06-22T21:39:53.323
> 
> 标签：jpa, jpql

我的一位同事有以下（显然无效）JPQL 查询：

```
SELECT NEW com.foobar.jpa.DonationAllocationDTOEntity(a.id, a.campaign, a.campAppeal, a.campDivision, a.divisionFund)
FROM DonationAllocation a JOIN a.donation d JOIN a.allocationType t
JOIN FETCH a.campaign
WHERE d.id = :donationId
AND (t.code = 'Pledge' OR t.code = 'MatchingPledge') 
```

值得注意的是（稍后在本消息中）`DonationAllocation`与实体的关系`Campaign`是多对一的，并被标记为`FetchType.LAZY`。我的同事对此查询的意图是（除其他外）确保它`a.campaign`是“膨胀的”（急切地获取）。

当面对这个查询时，Hibernate（显然只是几个 JPA 实现中的一个）说：

> `query specified join fetching, but the owner of the fetched association was not present in the select list`

这是有道理的，因为选择列表仅包含`NEW DonationAllocationDTOEntity()`，并且 JPA 2.0 规范的第 4.4.5.3 节说：

> FETCH JOIN 子句右侧引用的关联必须是从作为查询结果返回的实体或可嵌入对象引用的关联或元素集合。

因此，由于没有“作为查询结果返回的实体或可嵌入对象”（它是使用`NEW`运算符构造的 DTO），因此 FETCH JOIN 没有可能的关联来引用，因此该查询无效.

考虑到这一限制，在这种情况下，应该如何构造一个 JPQL 查询，以便`a.campaign`-- 传递到构造函数表达式 -- 被急切地获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:57:44.483

我将简单地选择实体及其关联，然后翻转结果以显式调用 DTO 构造函数。您将获得编译时检查和可重构代码的额外优势：

```
select a from DonationAllocation a 
JOIN a.donation d 
JOIN a.allocationType t
JOIN FETCH a.campaign
WHERE d.id = :donationId
AND (t.code = 'Pledge' OR t.code = 'MatchingPledge')

...

for (DonationAllocation a : list) {
    result.add(new DonationAllocationDTOEntity(a.id, 
                                               a.campaign,
                                               a.campAppeal, 
                                               a.campDivision, 
                                               a.divisionFund));
} 
```

编辑：

此查询还应选择需要的内容，并避免选择整个 DonationAllocation 实体：

```
select a.id, a.campaign, a.campAppeal, a.campDivision, a.divisionFund
from DonationAllocation a 
JOIN a.donation d 
JOIN a.allocationType t
WHERE d.id = :donationId
AND (t.code = 'Pledge' OR t.code = 'MatchingPledge') 
```

如果需要，您可以在查询中添加 DTO 构造函数：

```
select new com.foobar.jpa.DonationAllocationDTOEntity(a.id, a.campaign, a.campAppeal, a.campDivision, a.divisionFund)
from DonationAllocation a 
JOIN a.donation d 
JOIN a.allocationType t
WHERE d.id = :donationId
AND (t.code = 'Pledge' OR t.code = 'MatchingPledge') 
```

a.campaign 在 select 子句中的事实应该足以告诉 Hibernate 加载实体。至少在我的测试中它是这样的。

# asp.net - 使用 asmx Web 服务返回 [object Object] 而不是 true/false 的 jQuery 远程验证

> ID：11164499
> 
> 赞同：0
> 
> 时间：2012-06-22T21:40:24.087
> 
> 标签：asp.net, json, web-services, jquery-plugins, jquery-validate

我正在使用 jQuery Validate 来确保输入的报告编号在 SQL 数据库中有效。我正在使用 asmx Web 服务执行此操作，该服务在传递报告编号时返回真/假布尔值。Web 服务运行良好，并返回 JSON 编码响应，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<boolean xmlns="http://tempuri.org/">true</boolean> 
```

或者

```
<?xml version="1.0" encoding="UTF-8"?>
<boolean xmlns="http://tempuri.org/">false</boolean> 
```

但是，当我尝试在下面的 jQuery 中调用它时，它会一直返回 [object Object] 而不是我期望的 true/false 布尔值。

```
$(function() {
        $("#form1").validate({
            rules: {
                tbAuto: {
                    remote: function () {
                        var r = {
                            url: "ReportList.asmx/ValidateInReports",
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            data: "{'ReportNumberSearch': '" + $('#tbAuto').val() + "' }",
                            dataFilter: function (data) { return (JSON.parse(data)).d; }
                        }
                        $("#txtID").val(r);
                       // return r;
                    }
                }
            },
            messages: {
                tbAuto: { remote: "check" }
            }
        });
    }); 
```

我已经注释掉了返回行并将它返回到文本框只是为了看看它返回了什么。当返回 r; 在他们身上，它表现得好像它一直在回归真实。

这目前不在我的生活应用程序中，只是试图让它在测试环境中工作。这是我与上面的 jQuery 一起使用的测试代码：

```
<form id="form1" runat="server">
  <div class="demo">
   <div class="ui-widget">
     <label for="tbAuto">Report Number: </label>
      <asp:TextBox ID="tbAuto" class="tb" runat="server">
      </asp:TextBox><br />
     <label for="txtID">ID: </label>
      <asp:TextBox ID="txtID" CssClass="tbb" runat="server" />
   </div>
  </div>
</form> 
```

提前感谢您的任何想法或建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T22:36:05.433

我最终使用模糊而不是验证走了一条完全不同的路线。我也遇到了麻烦，但最终能够解决。可以在[此处](https://stackoverflow.com/questions/11301642/jquery-blur-to-check-webservice-for-match-and-return-data-to-set-multiple-textbo)找到带有该分辨率的帖子。

# sencha-touch - 在 Chrome/Firefox Javascript 控制台中获取商店转储？

> ID：11164500
> 
> 赞同：0
> 
> 时间：2012-06-22T21:40:33.220
> 
> 标签：sencha-touch, sencha-touch-2

我在我的应用程序中使用了很多煎茶商店。有没有办法将它们转储到 Chrome/Firefox 中的 Javascript 控制台，以便我可以在我的应用程序运行时快速查看我在任何给定控制台中加载的内容？

```
分机应用程序（{
    名称：'煎茶'，

    模型：['一'，'二'，'三'，...]，

    商店：['一'，'二'，'三'，...]，

    意见：[...]，

    控制器：[...]，

    启动：函数（）{
        Ext.Viewport.add(Ext.create('Sencha.view.MainView'));
    }
});

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:00:06.020

您可以使用`Ext.getStore`：

```
Ext.getStore('One'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:58:35.077

我建议你看看[Ext.data.StoreManager](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.StoreManager)。从那里您可以访问您在应用程序中创建的每个商店。

希望这可以帮助

# iphone - 我需要应用内截图并附加到文本而不保存到照片库中？

> ID：11164504
> 
> 赞同：0
> 
> 时间：2012-06-22T21:40:41.607
> 
> 标签：iphone, xcode, sdk, sms, screenshot

如何编写应用内屏幕截图，然后将其附加到文本中，而无需将其保存到照片库中？我已阅读“应用内屏幕截图并附加到电子邮件而不保存到库中”，这很有帮助，但仍然不是我需要的。我需要它出现在文本消息框中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:12:11.553

[这是来自 Apple 网站](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)的应用内屏幕截图 的方法：

```
- (UIImage*)snapshot:(UIView*)eaglview
{
    GLint backingWidth, backingHeight;

    // Bind the color renderbuffer used to render the OpenGL ES view
    // If your application only creates a single color renderbuffer which is already bound at this point, 
    // this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
    // Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, _colorRenderbuffer);

    // Get the size of the backing CAEAGLLayer
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    NSInteger x = 0, y = 0, width = backingWidth, height = backingHeight;
    NSInteger dataLength = width * height * 4;
    GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));

    // Read pixel data from the framebuffer
    glPixelStorei(GL_PACK_ALIGNMENT, 4);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // Create a CGImage with the pixel data
    // If your OpenGL ES content is opaque, use kCGImageAlphaNoneSkipLast to ignore the alpha channel
    // otherwise, use kCGImageAlphaPremultipliedLast
    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                    ref, NULL, true, kCGRenderingIntentDefault);

    // OpenGL ES measures data in PIXELS
    // Create a graphics context with the target size measured in POINTS
    NSInteger widthInPoints, heightInPoints;
    if (NULL != UIGraphicsBeginImageContextWithOptions) {
        // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
        // Set the scale parameter to your OpenGL ES view's contentScaleFactor
        // so that you get a high-resolution snapshot when its value is greater than 1.0
        CGFloat scale = eaglview.contentScaleFactor;
        widthInPoints = width / scale;
        heightInPoints = height / scale;
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(widthInPoints, heightInPoints), NO, scale);
    }
    else {
        // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
        widthInPoints = width;
        heightInPoints = height;
        UIGraphicsBeginImageContext(CGSizeMake(widthInPoints, heightInPoints));
    }

    CGContextRef cgcontext = UIGraphicsGetCurrentContext();

    // UIKit coordinate system is upside down to GL/Quartz coordinate system
    // Flip the CGImage by rendering it to the flipped bitmap context
    // The size of the destination area is measured in POINTS
    CGContextSetBlendMode(cgcontext, kCGBlendModeCopy);
    CGContextDrawImage(cgcontext, CGRectMake(0.0, 0.0, widthInPoints, heightInPoints), iref);

    // Retrieve the UIImage from the current context
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    // Clean up
    free(data);
    CFRelease(ref);
    CFRelease(colorspace);
    CGImageRelease(iref);

    return image;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:10:11.587

我浏览了互联网和文档，与电子邮件版本不同，MFMessageComposeViewController 没有“附件”属性，因此您无法发送任何内容。这在另一篇 SO 帖子中也得到了进一步证实 -[我的应用如何发送带有照片的彩信？](https://stackoverflow.com/questions/6262881/how-can-my-app-send-mms-with-a-photo).

乔纳森

# wpf - 使用 WPF ContextMenu 为 RichTextBox 加载大型数据集

> ID：11164507
> 
> 赞同：1
> 
> 时间：2012-06-22T21:41:03.337
> 
> 标签：wpf, performance, contextmenu, ui-virtualization

我遇到的情况是 ContextMenu 的项目数已达到 3000 左右。在这种情况下，ContextMenu 会花费大量时间来加载自身。我正在尝试进行 UI 虚拟化，但没有任何运气。

示例代码如下：

```
 <RichTextBox x:Name="FMWpfPopupControlHost" ScrollViewer.CanContentScroll="True" VirtualizingStackPanel.IsVirtualizing="True"  HorizontalAlignment="Left" Width="300" Height="600" Focusable="True" Loaded="onLoaded1">
        <RichTextBox.ContextMenu >
            <ContextMenu VirtualizingStackPanel.IsVirtualizing="True" ItemsSource="{Binding GetLabel, Source ={StaticResource model}}" ScrollViewer.CanContentScroll="True">
                <ContextMenu.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Initialized="TextBlock_Initialized" Text="{Binding getLabel}"/>
                    </DataTemplate>
                </ContextMenu.ItemTemplate>
                <ContextMenu.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel IsItemsHost="True" IsVirtualizing="True" VirtualizationMode="Recycling"/>                        
                    </ItemsPanelTemplate>
                </ContextMenu.ItemsPanel>
                <ContextMenu.Template>
                    <ControlTemplate>
                        <Border BorderThickness="{TemplateBinding Border.BorderThickness}" Padding="{TemplateBinding Control.Padding}" BorderBrush="{TemplateBinding Border.BorderBrush}" Background="{TemplateBinding Panel.Background}" SnapsToDevicePixels="True">
                            <ScrollViewer Padding="{TemplateBinding Control.Padding}" Focusable="False">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </ContextMenu.Template>
            </ContextMenu>
        </RichTextBox.ContextMenu>
    </RichTextBox> 
```

请指导我如何解决这个问题？

谢谢！

苛刻的古普塔

# php - 在包含的 php 文件中使用绝对路径的替代方法

> ID：11164509
> 
> 赞同：1
> 
> 时间：2012-06-22T21:41:19.530
> 
> 标签：php, include, absolute-path

我有一个名为“header.php”的文件，我包含在我网站上的每个页面上，并且该文件包含指向我服务器上其他文件的链接，例如 css 文件、jquery 插件等。现在我正在使用绝对路径这些链接，因此它们将使用与 header.php 文件不在同一目录中的文件，这有效，但正如您在下面的示例中所见，如果您使用 header.php 文件，事情开始变得非常难以管理包含很多链接（我的链接）所以我想知道是否有任何其他替代方法可以像我在这里所做的那样在 header.php 文件中使用绝对路径。

**头文件.php**

```
<? 
 $base_url = "http://example.com";
?>
    <html>
      <head> 
       <title> <? echo($title); ?> </title>

        <link rel="stylesheet" type="text/css" href="<? echo($base_url); ?>/styles/some_css_file.css" media="all"/>
        <link rel="stylesheet" type="text/css" href="<? echo($base_url); ?>styles/another_css_file.css" media="all"/>
        <link rel="stylesheet" type="text/css" href="<? echo($base_url); ?>styles/another_css_file.css" media="all"/>
        ...
        ...
        ...

        <script type="text/javascript" src="<? echo($base_url); ?>/scripts/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="<? echo($base_url); ?>/scripts/some_jquery_plugin.js"></script>
        <script type="text/javascript" src="<? echo($base_url); ?>/scripts/another_jquery_plugin.js"></script>
        ...
        ...
        ...
      </head> 
```

**一些包含 header.php 的文件**

```
<? 
  $title = "some page title";
  include("header.php"); 
?>

      <body>
        PAGE CONTENTS
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:48:07.330

绝对路径是去这里的方式。但是，如果您有很多要打印的链接，可以通过将路径存储在数组中并循环遍历数组来简化它。

```
$base = "http://www.example.com/"
$links = array( "styles/file1.css", "styles/file2.css", ... );

foreach ( $links as $link ) {
    echo '<link rel="stylesheet" href="' . $base . $link . '" type="text/css" media="all" />';
} 
```

作为旁注，你所拥有的并不是很好的练习。尝试合并其中一些文件会更好、更高效，因为这将减少浏览器必须向服务器发出的 HTTP 请求数量。[http://developer.yahoo.com/performance/rules.html#num_http](http://developer.yahoo.com/performance/rules.html#num_http)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:44:25.627

使用 HTML 基础标记来定义站点的基础。

```
<base href="<?php echo $base_url; ?>" />
<link rel="style.css" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:50:47.780

我在我的一个项目中也有同样的疑问，我已经按照下面的代码完成了。由于路径以“/”开头，文件将在根目录中找到，在这种情况下无需指定域，如果您要重写 URL，它将使事情变得更容易维护并防止出现问题使用（[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）。希望它也能帮助到你！

```
<html>
  <head> 
   <title> <? echo($title); ?> </title>

    <link rel="stylesheet" type="text/css" href="/styles/some_css_file.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="/styles/another_css_file.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="/styles/another_css_file.css" media="all"/>

    <script type="text/javascript" src="/scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="/scripts/some_jquery_plugin.js"></script>
    <script type="text/javascript" src="/scripts/another_jquery_plugin.js"></script>
  </head>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:45:56.380

这不是您问题的直接答案，但它可能会对您有所帮助。

如果您包含那么多 css 和 JS 文件，您应该考虑使用 Minify。Minify 将获取一堆 css/js 文件并将它们压缩/组合成一个文件，这将大大加快您网站的加载速度。

使用它还可以帮助您解决路径问题，因为您可以非常轻松地指定目录和组。

您可以在此处找到有关它的信息： [缩小](http://code.google.com/p/minify/)

# sbt - Play / SBT / com.typesafe.Config - 排除捆绑的 com.typesafe.Config 0.2.1 类并使用更新的 0.4.1 Config

> ID：11164513
> 
> 赞同：1
> 
> 时间：2012-06-22T21:41:32.633
> 
> 标签：sbt, playframework-2.0, typesafe-stack

我有一个 sbt 多项目（sbt 0.11.3），其中一个子项目是使用 play sbt-plugin 2.0.1 的 PlayProject），另一个是我的应用程序逻辑。我的应用程序需要使用 com.typesafe.Config 的 0.4.1 版本，但我相信 play 插件似乎嵌入了旧版本 0.2.1，当我执行其中一种新方法的 dist（创建 jar）时会导致冲突在 0.2.1 中不存在。

我想知道是否有一种方法可以排除旧版本而只使用新版本。我已经厌倦了许多方法但没有成功（排除，过滤[如果我做得正确的话]等..）

提前感谢向导，他可以明确地告诉我如何实现这一点，或者告诉我这不会发生以及为什么会发生的小伙子。

答：没有什么好办法。唯一的方法是打开 jar 删除 akka 中的配置类并重新打包。这对我们不起作用，所以我使用了旧版本的配置。

# ajax - 没有 PHP 插件的 Google ReCaptcha

> ID：11164517
> 
> 赞同：0
> 
> 时间：2012-06-22T21:42:06.783
> 
> 标签：ajax, json, recaptcha

我了解使用 ajax 尝试从另一个网站获取信息时的跨域错误，但根据 jQuery，您应该能够改用 jsonp 请求。在尝试显示 recaptcha 时，我很难做到这一点。问题是我无法使用插件来实现这一点，这会使它变得容易得多。

```
<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
<script type="text/javascript">
          function showRecaptcha() {
            Recaptcha.create("// removed for example", 'captchadiv', { 
                tabindex: 1,
                theme: "red",
                callback: Recaptcha.focus_response_field
            });
          }

jQuery(document).ready(function(){
  showRecaptcha('recaptcha_div');

  jQuery('#contact-form').submit(function(){
      var challenge = Recaptcha.get_challenge();
      var response = Recaptcha.get_response();
      var ip = "<?php print $_SERVER['REMOTE_ADDR'] ?>";
      var private = "// removed for example";

       var requestUrl = "http://www.google.com/recaptcha/api/verify?privatekey=" + private + "&remoteip=" + ip + "&challenge=" + challenge + "&response=" + response;

       jQuery.getJSON(requestUrl, function(json) {
           alert("what");
       });

   })
});
</script>

<form id="">

// Form stuff

</form>
<div id="captchadiv"></div>
<input type="submit" name="submit" id="form-submit"> 
```

我应该如何将其调用到谷歌服务器并获得正确的回调。它基本上会返回一个真或假。我要么得到臭名昭著的 Access-Control-Allow-Login，要么得到关于纯文本的错误。有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:37:57.130

1) 谷歌不支持 JSONP 输出。为什么？转到 2)。

2) reCAPTCHA 旨在在服务器端代码上进行验证。为什么？转到 3)。

3) 垃圾邮件发送者可以轻松绕过您的客户端验证代码，从而使任何 CAPTCHA 解决方案毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T03:15:03.400

你可以试试这个方法，Invisible reCAPTCHA

[https://developers.google.com/recaptcha/docs/invisible](https://developers.google.com/recaptcha/docs/invisible)

# asp.net - 将 gridview 模板字段转换为 pdf iTextSharp

> ID：11164518
> 
> 赞同：0
> 
> 时间：2012-06-22T21:42:15.160
> 
> 标签：asp.net, vb.net, gridview, itextsharp, templatefield

我有一个 GridView，它是从数据库（不是 SqlDataSource 等）以编程方式填充的。当我格式化它们的文本时，有 4 列是 TemplateFields。它们是日期和时间，这是它们的 TemplateField 之一：

```
<ItemTemplate>
     <asp:Label ID="Label1" Text='<%# FormatDate(Eval("tDate")) %>' runat="server"></asp:Label>
</ItemTemplate> 
```

这是格式化该日期的函数：

```
Function FormatDate(objTime As Object) As String
    Dim d As String
    If objTime.Equals(DBNull.Value) Then
        d = ""
    Else
        d = Convert.ToDateTime(objTime).ToString("MM-dd-yyyy")
    End If
    Return d
End Function 
```

我一直在使用这篇[文章中的方法，该方法从](https://stackoverflow.com/questions/11157835/gridview-templatefield-to-pdf-using-itextsharp/11157996#11157996)[这里](https://stackoverflow.com/questions/10463553/how-to-print-a-grid-view-using-itextsharp)转换为 VB 代码，以使用 iTextSharp 将 GridView 转换为 PDF。

我的问题是，在将 GridView 数据添加到 PDF（在 For 循环内）时，我在这里遇到了空引用异常：

```
Dim lc As DataBoundLiteralControl = TryCast(gvReport.Rows(rowNo).Cells(colNo).Controls(0), DataBoundLiteralControl)
s = lc.Text.Trim() 
```

如果我删除这个 If 语句并在这里运行 Else 部分：

```
s = gvReport.Rows(rowNo).Cells(colNo).Text.Trim()
ph = New Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL))
mainTable.AddCell(ph) 
```

这些日期/时间列在 PDF 上显示为空，而所有其他列显示没有问题。

我对如何解决这个问题非常迷茫，并且在网上找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:08:18.920

虽然我无法修复上面跟进的解决方案，但我找到了一种从 TemplateField 访问数据的不同方法：

```
Dim s As String = CType(gvReport.Rows(rowNo).FindControl("Label1"), Label).Text 
```

这使我可以访问指定列中的数据。现在我只需要找出一种方法遍历行并获取每个不同的 TemplateFields，这可能涉及重新处理我的 For 循环和 Select Case 语句。

# jquery - jQuery UI 两个对话框抛出 Uncaught TypeError: Object [object Object] has no method 'dialog'

> ID：11164523
> 
> 赞同：0
> 
> 时间：2012-06-22T21:42:31.867
> 
> 标签：jquery, jquery-ui, user-interface, types, undefined

```
<div id="message-form" title="Send Message">
<p class="validateTips">All form fields are required</p>
<form id="send-form" action="" type="POST">
    <label for="to" id="to-label">To:</label>
    <textarea id="to" name="name" class="mention" required></textarea> <br />
    <label for="body" id="body-label">Message:</label><br />
    <textarea name="body" id="body-message"></textarea>
    <div id="success"></div>
    <input type="hidden" name="u_id" id="hidden_val"value=""> 
</form>
</div> 
```

```
$(document).ready(function() {

    $('.view-messages').each(function() {
        var $dialog = $('<div></div>').load($(this).attr('href')).dialog({
            autoOpen: false,
            title: $(this).attr('title'),
            width: 500,
            height: 300
        });
        $('.view-button').button().click(function() {
            $dialog.dialog('open');
            return false;
        });
    });

    $(function() {
        var name = $("#to"),
            message = $("#body-message"),
            allFields = $([]).add(name).add(message);
        $('#message-form').dialog({
            autoOpen: false,
            height: 450,
            width: 500,
            modal: true,
            buttons: {
                "Send": function() {
                    $('textarea.mention').mentionsInput('val', function(text) {
                        var value = text;
                        $("#hidden_val").val(value);
                    });
                    var request = $.ajax({
                        type: "POST",
                        url: "/post",
                        data: $('#send-form').serialize(),
                        success: function() {
                            $('#success').append("<p id='append'>Message Sent</p>");
                        }
                    });
                },
                Cancel: function() {
                    $(this).dialog("close");
                    allFields.val("");
                    $('#append').empty().remove();
                }
            },
            close: function() {
                allFields.val("");
                $('#append').empty().remove();

            }
        });

        /**
         *open the dialog box upon clicking
         */
        $("#message-user").button().click(function() {
            $("#message-form").dialog("open");
            return false;
        });

        $("#delete").button().click(function() {
            //
        });

        $("#sent").button().click(function() {

        });

    });
});​ 
```

问题是这样的：我有一个名为 compose 的按钮，它可以在对话框中打开一个表单，之前它工作正常。关键是我还希望我的动态视图消息链接将两个人之间的对话打开到一个对话框中，而不是重定向到一个新的完整页面。上面的代码仅适用于打开视图消息，它破坏了我的撰写按钮功能。我被这件事难住了。视图消息是 PHP 通过 db 加载到站点中的。

# c# - jquery调用后如何刷新页面

> ID：11164527
> 
> 赞同：0
> 
> 时间：2012-06-22T21:42:41.433
> 
> 标签：c#, javascript, jquery

清除 cookie 后，我试图让用户进入登录页面。我正在对我的控制器进行 jquery 调用以清理 cookie，但是我不知道如何将他重定向到登录页面。

我目前在我的 javascript 中有这段代码：

```
 function()
    {
    $.post('/Home/Action', function(result) {

                                    });
              window.location="login";
      }
public Action()
{
    cookie cleaning code;
} 
```

但问题是刷新和cookie清理是同时完成的。我想在 cookie 清理后带用户。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:50:05.703

你为什么把`window.location`外部`$.post`回调？试试这个：

```
function() {
    $.post('/Home/Action', function(result) {
        window.location.href = "login";
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:51:52.943

```
function CleanCookiesAndGotoLogin()
{
    $.post('/Home/Action', function(result) {
         //you put the relocation here so that it waits for the callback
        window.location="/ControllerName/ActionName";
    });
}; 
```

# jquery - jQuery：load() 加载页面但不关注文本框

> ID：11164531
> 
> 赞同：1
> 
> 时间：2012-06-22T21:43:02.020
> 
> 标签：jquery

我有一个小提琴：http: [//jsfiddle.net/SDr3F/10/](http://jsfiddle.net/SDr3F/10/)

**目前：**

onclick，它会发出警报

```
alert('hi') 
```

**必需的：**

onclick，它会加载一个`search.html`带有搜索文本框和`focus`文本框的

*搜索.html*

```
<input id="search-input" type="text" class="input-medium search-query span4"> 
```

**我如何设置焦点？**

```
$(function(){
  $("#search").click(function(){
      $('#feature').load('templates/search.html');
      $('#search-input').focus();
      alert("hi");
  });
}); 
```

**问题**

*   它加载页面但不关注文本框，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:45:23.780

在您的示例中，您在发出 Ajax 请求后立即关注元素，而不是*在请求成功完成时*。因此，您尝试关注尚未加载的元素。

您应该添加[**完整**](http://api.jquery.com/load/)的处理程序。以下应该有效：

```
$("#search").click(function() {
    $("#feature").load("templates/search.html", function() {
        $("#search-input").focus();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:48:07.110

您需要一个回调，以便它在尝试设置焦点之前知道页面内容已完全加载。

# php - 尝试根据下拉列表结果运行 SELECT sql 查询。我的SQL php

> ID：11164533
> 
> 赞同：3
> 
> 时间：2012-06-22T21:43:34.677
> 
> 标签：php, mysql, select, drop-down-menu, recordset

我已经有 3 年没有设计网站了，所以至少可以说我很生疏。我必须依靠 Dreamweaver CS5 来帮助我。对...

我想要一个新闻页面，用户/客户将从下拉菜单中选择日期（1 月、2 月、3 月、4 月等）现在，我的 mySQL 数据库中有一个名为“新闻”的表，其中每一行由这些日期引用。我已经为日期设置了一个动态列表（一个下拉列表。）

我想要的是让客户从下拉列表中选择日期，并将结果显示在下面的记录集中。我假设 SQL 查询需要按照以下方式编写：

SELECT date, subject, message FROM news WHERE date = $ XXXXXDROPDOWNLIST XXX $

正如你所看到的，我做了最后一行，因为我不太明白它应该如何运作。我认为下拉列表需要采用 POST 的形式，结果表需要采用 GET 的形式。

比我更技术的人可以启发我的困境吗？

谢谢，罗伯。

代码

```
mysql_select_db($database_rcc, $rcc);
$query_dropdowndate = "SELECT DATE_FORMAT(date, '%M %Y') AS FORMATTEDDATE FROM news GROUP BY FORMATTEDDATE ORDER BY Date DESC  ";
$dropdowndate = mysql_query($query_dropdowndate, $rcc) or die(mysql_error());
$row_dropdowndate = mysql_fetch_assoc($dropdowndate);
$totalRows_dropdowndate = mysql_num_rows($dropdowndate);

mysql_select_db($database_rcc, $rcc);
$query_newsitems = "SELECT `Date`, Subject, Message FROM news WHERE date = $_POST['dropdowndate']";
$newsitems = mysql_query($query_newsitems, $rcc) or die(mysql_error());
$row_newsitems = mysql_fetch_assoc($newsitems);
$totalRows_newsitems = mysql_num_rows($newsitems);
?>

<form id="choosedate" name="choosedate" method="post" action="#">
  <label for="dropdowndate"></label>
  <select name="dropdowndate" id="dropdowndate">
    <?php
do {  
?>
    <option value="<?php echo $row_dropdowndate['FORMATTEDDATE']?>"<?php if (!(strcmp($row_dropdowndate['FORMATTEDDATE'], $row_dropdowndate['FORMATTEDDATE']))) {echo "selected=\"selected\"";} ?>><?php echo $row_dropdowndate['FORMATTEDDATE']?></option>
    <?php
} while ($row_dropdowndate = mysql_fetch_assoc($dropdowndate));
  $rows = mysql_num_rows($dropdowndate);
  if($rows > 0) {
      mysql_data_seek($dropdowndate, 0);
      $row_dropdowndate = mysql_fetch_assoc($dropdowndate);
  }
?>
  </select>
  <input type="submit" name="submit" id="submit" value="Submit" />
</form>
<p>&nbsp;</p>
<form id="form1" name="form1" method="get" action="">
  <table border="0" cellpadding="5" cellspacing="2">
    <tr>
      <td>Date</td>
      <td>Subject</td>
      <td>Message</td>
    </tr>
    <?php do { ?>
      <tr>
        <td><?php echo $row_newsitems['Date']; ?></td>
        <td><?php echo $row_newsitems['Subject']; ?></td>
        <td><?php echo $row_newsitems['Message']; ?></td>
      </tr>
      <?php } while ($row_newsitems = mysql_fetch_assoc($newsitems)); ?> 
```

其中一些可能看起来很奇怪，所以让我解释一下... 动态列表（下拉列表）称为“dropdowndate”，表单称为“choosedate”。有一个名为“submit”的按钮可以提交表单。FORMATTEDDATE 是记录集的名称，它为下拉菜单提供动态列表。

我希望在用户 POST 时将动态列表中的值插入到我提到的查询中... SELECT `Date`, Subject, Message FROM news WHERE date = $_POST['dropdowndate']"; （这可能是错误的）

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:50:22.880

```
SELECT date, subject, message FROM news WHERE date = $_POST['fieldvalue'] 
```

$_POST 变量包含表单发布时发送的所有数据。字段值应与您为选择字段指定的名称相对应。

这可能会被注入，因此请确保您使用合理的安全措施。

如果您希望在不刷新的情况下获取数据，则需要使用 AJAX 以下解释得很漂亮[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using -jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)如果您需要更多信息，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:46:55.507

HTML 下拉菜单示例

```
<form method="POST">
<select name="animal">
    <option value="dog">Dog</option>
    <option value="cat">Cat</option>
</select>
</form> 
```

如何使用 php 捕获信息的示例

```
<?php
    echo $_POST['animal'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:51:03.533

您希望在用户从下拉列表中选择某些内容时加载记录，还是希望它与页面一起加载？

在第一种情况下，您需要使用 Ajax，将记录带到后台。

在另一种情况下，您可以像在页面加载时发布的那样做一个声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T04:47:55.423

```
$select = $_POST['dropdowndate'];
$sql = "SELECT * FROM table WHERE attribute = '$select'" or die (mysql_error()); 
```

# javascript - 使用 javascript 在 Joomla 中获取活动菜单 itemid

> ID：11164537
> 
> 赞同：0
> 
> 时间：2012-06-22T21:44:02.550
> 
> 标签：javascript, joomla, menuitem

我需要使用 javascript 来获取 Joomla 中当前页面的 itemid。有没有办法做到这一点？网址是 sef 所以我不能只使用网址...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:46:59.047

没有提到版本，但我过去在 PHP 中使用过这个。没有直接的 javascript 方式，因此您需要将其回显到您的脚本中，或者将其放入隐藏的表单字段或其他一些机制中。

```
$currentMenuId = JSite::getMenu()->getActive()->id ; 
```

# android - 如何从 ListView 中提取对象 - getItemAtPosition 不起作用

> ID：11164543
> 
> 赞同：6
> 
> 时间：2012-06-22T21:44:20.840
> 
> 标签：android, android-listview, android-adapter

我为我的`ListView`. 如何从特定列表项中提取对象。这是我的自定义适配器的外观：

MyCustomAdapter.java

```
public class MyCustomAdapter extends ArrayAdapter<DashboardBean> {

Context context;
int layoutResourceId;
DashboardBean currentMRB;
Vector<DashboardBean> data;

public MyCustomAdapter(Context context, int layoutResourceId, Vector<DashboardBean> data) 
{
    super(context,layoutResourceId,data);
    this.layoutResourceId = layoutResourceId;
    this.context=context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;
    MyStringReaderHolder holder;

    if(row==null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent,false);

        holder= new MyStringReaderHolder();

        holder.project = (TextView)row.findViewById(R.id.project);
        holder.workRequest = (TextView)row.findViewById(R.id.work_request);
        holder.startDate  = (TextView)row.findViewById(R.id.start_date);
        holder.status = (TextView) row.findViewById(R.id.status);

        row.setTag(holder);
    }
    else
    {
        holder=(MyStringReaderHolder) row.getTag();
    }

    DashboardBean mrb =data.elementAt(position);
    System.out.println("Position="+position);

     holder.project.setText(mrb.project);
    holder.workRequest.setText(mrb.workRequest);
    holder.startDate.setText(mrb.startDate);
    holder.status.setText(mrb.status);
    return row;
}

static class MyStringReaderHolder {
     TextView project, workRequest, startDate, status;

   }
} 
```

这是 DashboardBean.java

```
 public class DashboardBean {

    public String project;
    public String workRequest;
    public String startDate;
    public String status;   

    public DashboardBean(String project,String workRequest,String startDate,String status)
    {
        this.project = project;
        this.workRequest = workRequest;
        this.startDate = startDate;
        this.status = status;
    }
} 
```

这是我调用 onClickListener() 的 java 片段：

```
mListView.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> myAdapter, View myView, 
            int myItemInt, long mylng) {
        TableRow tableRow = (TableRow) (mListView.getItemAtPosition(myItemInt));

        String project = ((TextView) tableRow.findViewById(R.id.project)).getText().toString();
        String workRequest = ((TextView) tableRow.findViewById(R.id.work_request)).getText().toString();
        String startDate = ((TextView) tableRow.findViewById(R.id.start_date)).getText().toString();
        String status = ((TextView) tableRow.findViewById(R.id.status)).getText().toString();

          showWorkRequest(project, workRequest, startDate, status);

      }

  }); 
```

和xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabRow1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/BodyRow"
    android:gravity="center_horizontal" >

    <RelativeLayout 
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/status"
        android:layout_width="wrap_content"
        style="@style/BodyText"
        android:layout_height="wrap_content"

        android:layout_alignParentRight="true"
         android:textColor="@color/textColor"
        android:text="TextView" />

    <TextView
        android:id="@+id/start_date"
        style="@style/HourText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="TextView"  android:textColor="@color/textColor" android:textSize="10sp"/>

    <TextView
        android:id="@+id/project"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/start_date"
        android:gravity="center_horizontal"
        style="@style/LeftHeaderText"
        android:text="TextView" android:layout_marginLeft="5dp"
        android:textColor="@color/textColor" android:textStyle="bold"/>

    <TextView
        android:id="@+id/work_request"
        android:layout_width="wrap_content"
        style="@style/BodyText"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/project"
        android:layout_below="@+id/project"
        android:text="TextView"
         android:textColor="@color/textColor" />

</RelativeLayout>
</TableRow> 
```

我想我不能像通常使用的那样使用 onClickListener，因为我是扩展自定义适配器。在这种情况下，它们可能是一个问题

```
public void onItemClick(AdapterView<?> myAdapter, View myView, 
            int myItemInt, long mylng) 
```

但是日志说：DashboardBean 的 ClassCastException。

无论如何，我无法修复它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T22:25:31.253

这`ClassCastException`是由您的以下行引起的`OnItemClickListener`：

```
TableRow tableRow = (TableRow) (mListView.getItemAtPosition(myItemInt)); 
```

那是因为您的适配器充满了`DashboardBean`实例。该`getItemAtPosition`方法返回一个属于适配器使用的数据结构的对象，*而不是*显示该对象的图形小部件（`TableRow`我假设）的实例。只写：

```
DashboardBean board = (DashboardBean) (mListView.getItemAtPosition(myItemInt)); 
```

代替违规行就可以了。然后，您可以直接使用`DashboardBean`对象中的字段，而不是通过`TextView`s 和类似的 UI 元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T21:55:04.563

您应该能够像这样在 onItemclick 中获取 DashboardBean 对象：

```
DashboardBean bean = (DashboardBean) mListView.getItemAtPosition(myItemInt); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T22:29:34.990

如果您只想提取对象，那么`OnItemClickListener`您的任务会更容易。您可以查看行的实例。您可以从中提取内容。

改变

```
mListView.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> myAdapter, View myView, 
            int myItemInt, long mylng) {
        TableRow tableRow = (TableRow) (mListView.getItemAtPosition(myItemInt));

        String project = ((TextView) tableRow.findViewById(R.id.project)).getText().toString();
        String workRequest = ((TextView) tableRow.findViewById(R.id.work_request)).getText().toString();
        String startDate = ((TextView) tableRow.findViewById(R.id.start_date)).getText().toString();
        String status = ((TextView) tableRow.findViewById(R.id.status)).getText().toString();

          showWorkRequest(project, workRequest, startDate, status);

      }

  }); 
```

至此

```
mListView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView <? > myAdapter, View myView, int myItemInt, long mylng) {

        String project = ((TextView) myView.findViewById(R.id.project)).getText().toString();
        String workRequest = ((TextView) myView.findViewById(R.id.work_request)).getText().toString();
        String startDate = ((TextView) myView.findViewById(R.id.start_date)).getText().toString();
        String status = ((TextView) myView.findViewById(R.id.status)).getText().toString();

        showWorkRequest(project, workRequest, startDate, status);

    }

}); 
```

# c# - 指数数组的边界之外。c# OleDbDataReader

> ID：11164546
> 
> 赞同：0
> 
> 时间：2012-06-22T21:44:35.847
> 
> 标签：c#, oledbdatareader

有人可以告诉我我在这里做错了什么。我已经编译了我的代码，我让它读取 ROWS 并返回计数。但是，当我将它传递给这行代码时，当我说“索引超出数组的范围”时出现错误：rowData += dbReader.GetValue(iRow).ToString();

```
 //Create SQL strings
            string sql = "SELECT 'Computers' FROM [Sheet1$]";

            //Create the instances
            OleDbConnection dbConnection;
            OleDbDataAdapter dbAdapter;
            OleDbCommand dbCommand;
            OleDbDataReader dbReader;
            DataTable dataTable;

            //Call the instance
            dbConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + @"\\slcnpr97\Desktop\Game Changers\\computers.xls" + "';Extended Properties='Excel 12.0 Xml;HDR=YES'");
            dbConnection.Open();
            dbAdapter = new OleDbDataAdapter(sql, dbConnection);
            dbCommand = new OleDbCommand(sql, dbConnection);
            dataTable = new DataTable();
            dbReader = dbCommand.ExecuteReader();
            dbAdapter.Fill(dataTable);

            //Method Variable
            int iRow = dataTable.Rows.Count;
            string rowData = null;

            while (dbReader.Read())
            {

                for (int i = 0; i < iRow; i++)
                {
                    rowData += dbReader.GetValue(iRow).ToString();
                }

            }
            //Close Connections 
            dbReader.Close();
            dbConnection.Close();
            MessageBox.Show(rowData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:53:18.520

你应该修改

> int iRow = dataTable.Rows.Count;

至

```
int numFields = dbReader.FieldCount; 
```

你的 for 循环然后变成

```
for (int i = 0; i < numFields; i++)
{
    rowData += dbReader.GetValue(numFields).ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:48:19.043

```
try with (Set dbReader.GetValue(0).ToString())

while (dbReader.Read())
            {

                for (int i = 0; i < iRow; i++)
                {
                    rowData += dbReader.GetValue(0).ToString();
                }

            } 
```

# iphone - 在 iTunes 的播客部分中用于 iPhone 导航的控制器是什么？

> ID：11164547
> 
> 赞同：-1
> 
> 时间：2012-06-22T21:44:58.517
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uistoryboard

iphone iTunes 应用程序的播客部分中使用的控制器的名称是什么，用于在“whats Hot”、“top 10”、“categories in”之间导航。我搜索了它，但我没有得到关于 UIViewControllers [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid之间的这种导航的任何信息/TP40007457-CH112-SW10](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid/TP40007457-CH112-SW10)。我发现这种导航在我的应用程序中非常有用，并希望实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:48:44.193

请原谅我之前的回答，误解了这个问题。

无论如何，您正在寻找的是[UISegmentedControl](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

默认情况下，它不是视图控制器，因此您必须为其编写代码以在其值更改时处理视图。

# http - 使用 QNetworkAccessManager 测量 HTTP 请求加载时间

> ID：11164556
> 
> 赞同：0
> 
> 时间：2012-06-22T21:45:43.603
> 
> 标签：http, networking, qt4, qtwebkit

我正在尝试使用 QtWebKit（通过扩展 Ghost.py）实现简单的 webprofiler。我需要测量每个 HTTP 请求何时开始和结束。

我可以使用`finished`信号`QNetworkAccessManager`来获取请求何时结束，但我如何知道请求何时开始？`QNetworkAccessManager`发出异步请求并使用队列，但没有`started`信号。请求何时实际开始以及如何附加到此事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:36:24.643

一种可能的解决方案是在下创建子类`QNetworkAccessManager`并将其传递给`QWebPage`. 继承的类应该重写method `createRequest`，它可以测量HTTP请求的开始时间。

# windows-server-2008-r2 - 以编程方式启用 RemoteApp 完整桌面

> ID：11164560
> 
> 赞同：1
> 
> 时间：2012-06-21T19:25:06.677
> 
> 标签：windows-server-2008-r2, powershell, wmi

我正在编写一个 powershell 脚本来设置一些 HyperV VM，但是有一个步骤我无法自动化。如何选中该框以允许以编程方式从 RemoteApp 设置访问远程桌面？

![在此处输入图像描述](../Images/0908a2b4ea16403576199453e23109f2.png)

我可以通过以下方式设置我需要的所有自定义项

```
#build the security descriptor so the desktop only shows up for people who should be allowed to see it
$remoteDesktopUsersSid = New-Object System.Security.Principal.SecurityIdentifier($remoteDesktopUsersGroup.objectSid[0],0)

#get a copy of the WMI instance
$tsRemoteDesktop = Get-WmiObject -Namespace root\CIMV2\TerminalServices -Class Win32_TSRemoteDesktop

#set settings
$tsRemoteDesktop.Name=$ServerDisplayName
$tsRemoteDesktop.SecurityDescriptor= "O:WDG:WDD:ARP(A;CIOI;CCLCSWLORCGR;;;$remoteDesktopUsersSid)"
$tsRemoteDesktop.IconPath = $IconPath
$tsRemoteDesktop.IconIndex = $IconIndex

#push settings back to server
Set-WmiInstance -InputObject $tsRemoteDesktop -PutType UpdateOnly 
```

但是，在您选中上述框之前，该 WMI 对象的实例不存在。

我尝试使用`Set-WmiInstance`同时实例化和设置设置，但我不断收到如下错误：

```
Set-WmiInstance : 
At line:53 char:16
+ Set-WmiInstance <<<<  -Namespace root\CIMV2\TerminalServices -Class Win32_TSRemoteDesktop -Arguments @{Alias='TSRemoteDesktop';Name=$ServerDisplayName;ShowInPortal=$true;SecurityDescriptor=$securityDescriptor}
    + CategoryInfo          : NotSpecified: (:) [Set-WmiInstance], ArgumentException
    + FullyQualifiedErrorId : System.ArgumentException,Microsoft.PowerShell.Commands.SetWmiInstance 
```

（同样在运行命令并收到错误后，如果它已经退出，它将删除实例`Win32_TSRemoteDesktop`并取消选中属性设置中的框）

有没有办法以编程方式检查该框，或者任何人都可以帮助解决为什么`Set-WmiInstance`会引发该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:37:21.587

如果您运行的是 Windows Server 2008 R2，则可以使用 Windows PowerShell 模块的远程桌面服务提供程序。

您可以在 technet 上阅读有关它的信息，请参阅[链接](http://technet.microsoft.com/en-us/library/ee791871%28v=ws.10%29.aspx)。

我使用本[指南](http://blogs.msdn.com/b/rds/archive/2009/01/28/managing-remote-desktop-services-aka-terminal-services-using-windows-powershell.aspx)来满足我的所有需求。

# ios - 具有多个输出的 iOS 片段着色器

> ID：11164561
> 
> 赞同：1
> 
> 时间：2012-06-22T21:46:04.437
> 
> 标签：ios, opengl-es, glsl, fragment-shader

是否可以在 iOS 下编写 GLSL ES 片段着色器来生成多个 RGB 输出并且（例如）一个发送到屏幕，一个发送到纹理？

在正常的 GLSL 下，我想这可以通过从片段着色器写入 gl_FragColor[i] 来完成。但是，GLSL ES 2.0 似乎只支持单色输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:25:26.597

OpenGL ES 2.0 不支持具有多个渲染目标的 FBO。因此，GLSL ES 也不支持它。

NVIDIA[有一个扩展](http://www.khronos.org/registry/gles/extensions/NV/GL_NV_draw_buffers.txt)，但显然它只适用于 NVIDIA 的硬件。

# php - preg_replace_callback() - 当前对象实例内的回调

> ID：11164563
> 
> 赞同：1
> 
> 时间：2012-06-22T21:46:07.383
> 
> 标签：php

警告：preg_replace_callback() [function.preg-replace-callback]：需要参数 2，'info'，在 [...]

```
public function getDisplay(){
    $info = array_merge($this->info,array());

    return  preg_replace_callback('!\{\{(\w+)\}\}!', 'info', $this->display);
} 
```

在“MyClass”的一个公共函数中，当我从另一个班级转到这个班级时停止工作。这是：

```
public function getEdit( $type){
    $all_info = $this->info;

    return preg_replace_callback('!\{\{(\w+)\}\}!', 'all_info', $edit_contents);
} 
```

两者都被清理了，现在我无法重新测试以前的课程，因为它已经很久了。

我确定不允许使用变量**，**但它正在工作，所以我一无所知。

当我这样做时，正如一些stackoverflow线程中所建议的那样，但显然它**不是**在对象中使用的：

```
public function getDisplay(){
    $display_info = $this->info;

    function display_info($matches) {
        global $display_info;
        return $display_info[$matches[1]];
    }

    return  preg_replace_callback('!\{\{(\w+)\}\}!', 'display_info', $this->display);
} 
```

所以我需要一些爱和指导，因为本周 php 让我发疯......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T07:35:24.360

除了使用匿名函数或更复杂的方法，您可以只使用一种支持传递回调的方法（[请参阅回调文档](http://php.net/manual/en/language.types.callable.php)）：

> 实例化对象的方法作为数组传递，该数组包含索引 0 处的对象和索引 1 处的方法名称。

要将当前对象的“info”方法作为回调传递，只需执行以下操作：

```
array($this, 'info') 
```

并将它传递到您想要使用“info”方法作为对象之一的其他方法中的回调的任何地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T21:56:37.423

*正确*的方法是使用闭包：

```
public function getDisplay() {

    // While $this support in closures has been recently added (>=5.4.0), it's
    // not yet widely available, so we'll get another reference to the current
    // instance into $that first:
    $that = $this;

    // Now we'll write that preg... line of which you speak, with a closure:
    return  preg_replace_callback('!\{\{(\w+)\}\}!', function($matches) use($that) {
        return $that->info[$matches[1]];
    }, $this->display);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T21:46:07.790

这解决了它：

```
public function getDisplay(){
    return  preg_replace_callback('!\{\{(\w+)\}\}!', array(get_class($this), '_preg_replace_callback'), $this->display);
}

private function _preg_replace_callback($matches){
    return $this->info[$matches[1]];
} 
```

我之前确实尝试过这种方法，但没有使用`get_class()`wrap 函数`$this`。哦麻烦...

# c++ - 使用函数中的复制构造函数创建实例的副本，该函数将实例作为基对象传递

> ID：11164565
> 
> 赞同：0
> 
> 时间：2012-06-22T21:46:17.243
> 
> 标签：c++, c++11, copy-constructor

```
class A {...}  
class B : public A {...}  
class C : public A {...}  
void M(A* a) {
  A* aa = new B(* a)
  ...
}  
int main()  
{  
  B b = new B();  
  M(b);  
  ...
} 
```

所以我想要做的是调用传递给 M 的对象（“a”）的复制构造函数，而不必知道它是 B 类型还是 C 等类型（而不是上面的“new B(a)” ）。

当然，我可以使用动态强制转换并检查 null ptr 等或使用 typeid，但必须有更简单的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:54:43.227

* * *

获得相同效果的一种方法是使用该`clone()`模式。给类 A 一个复制它的虚函数，在每个子类中覆盖该函数。通过引用将 A 的实例传递给您的函数，然后`clone`在该函数中传递。有点乱，但有效。

# html - 有没有办法减缓悬停效果？

> ID：11164567
> 
> 赞同：14
> 
> 时间：2012-06-22T21:46:23.903
> 
> 标签：html, css, wordpress, hover

有没有办法减缓悬停效果？我的网站上有一个悬停效果（已删除），它在图像悬停时显示文本。我想把效果放慢一点。画面切换的速度有点令人震惊。

我该怎么做？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-22T21:54:41.753

您可以添加 css3 过渡：

```
-webkit-transition: all 500ms ease;
-moz-transition: all 500ms ease;
-ms-transition: all 500ms ease;
-o-transition: all 500ms ease;
transition: all 500ms ease; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T21:55:03.443

这取决于您如何显示文本。如果您要更改 CSS 属性，您可以使用[CSS3 transitions](http://www.w3schools.com/css3/css3_transitions.asp)来做到这一点。下面是一个例子。

**HTML：**

```
<div id="A"></div><div id="B"></div> 
```

**CSS：**

```
div {
    height: 100px;
    width: 100px;
    position: absolute;
    top: 0;
    left: 0;

    -moz-transition: opacity 4s; /* Firefox */
    -webkit-transition: opacity 4s; /* Safari and Chrome */
    -o-transition: opacity 4s; /* Opera */
    transition: opacity 4s;
}
#A {
    background: red;
    opacity: 1;
    z-index: 1;
}
#B {
    background: blue;
    opacity: 0;
    z-index: 2;
}
#B:hover {
    opacity: 1;
} 
```

**[演示](http://jsfiddle.net/nwmbm/2/)**

**编辑：**大卫托马斯告诉我，你不能用过渡来改变显示。我已更新上述内容以使用不透明度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-26T16:53:56.223

我知道这有点晚了，但看看 CSS3 动画。我在我的一个 Garry's Mod 加载屏幕上使用了动画。

```
/* Styles go here */

button {
  margin-left: 50%;
  margin-right: 50%;
}
button:hover {
  -webkit-animation: breathing 5s ease-out infinite normal;
  animation: breathing 5s ease-out infinite normal;
}
@-webkit-keyframes breathing {
  0% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
  25% {
    -webkit-transform: scale(1.5);
    transform: scale(1.5);
  }
  50% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
  75% {
    -webkit-transform: scale(1.5);
    transform: scale(1.5);
  }
  100% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}
@keyframes breathing {
  0% {
    -webkit-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
  }
  25% {
    -webkit-transform: scale(1.5);
    -ms-transform: scale(1.5);
    transform: scale(1.5);
  }
  50% {
    -webkit-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
  }
  75% {
    -webkit-transform: scale(1.5);
    -ms-transform: scale(1.5);
    transform: scale(1.5);
  }
  100% {
    -webkit-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
  }
}
```

```
<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css">
  <script src="script.js"></script>
</head>

<body>
  <h1>Hello Plunker!</h1>
  <p>Below I have a button that changes size on mouse hover useing CSS3</p>
  <button>Hover over me!</button>
</body>

</html>
```

我知道这不是您要寻找的结果，但我相信您和其他人会发现这很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T22:36:18.160

如果你愿意，你可以使用 jQuery .fadeIn() [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

> **.fadeIn( [duration] [, callback] )**
> **持续时间**字符串或数字确定动画将运行多长时间。
> **动画完成后调用的回调**函数。

# objective-c - 在 ARC 中向上和向下传递块

> ID：11164568
> 
> 赞同：0
> 
> 时间：2012-06-22T21:46:27.640
> 
> 标签：objective-c, memory-management, objective-c-blocks, block

您能否澄清一下 Apple 文档的这一部分：[Transitioning to ARC Release Notes - 常见问题](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> **块如何在 ARC 中工作？**
> 
> 当您在 ARC 模式下将块向上传递时，块“正常工作”，例如在返回中。您不必再调用 Block Copy。在将堆栈“向下”传递到 arrayWithObjects: 和其他执行保留的方法时，您仍然需要使用 [^{} copy]。

什么是在堆栈上下传递块？这是否意味着我必须复制从 MRC 中的函数或方法返回的块，但在 ARC 中我不必这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:50:35.300

> 什么是在堆栈上下传递块？

它们意味着将块作为参数传递给另一个方法（或函数）并返回一个块作为方法（或函数）的结果。

> 这是否意味着我必须复制从 MRC 中的函数或方法返回的块，但在 ARC 中我不必这样做？

我相信这是对的。

# excel - 如何在 MS Excel 2010 的 Web 查询中添加变量（来自单元格）？

> ID：11164569
> 
> 赞同：1
> 
> 时间：2012-06-22T21:46:28.293
> 
> 标签：excel, ms-office, redmine, excel-2010

所以，我有从 web API 调用中提取数据的 excel 表，它以 xml 格式响应。我可以成功地拉动它、填充它并使用它。而且由于它是一个带有一些附加到查询的参数的 get 调用，我希望这些参数来自单独工作表中的单元格（在同一个工作簿中），以便用户可以更改单元格而不是查询本身。

可能吗？我该怎么做？当该单元格的内容被修改或用户必须单击刷新时，它是否会进行新的 API 调用以获取数据？

提前致谢！

**更新**：我尝试使用类似这样的东西：`http://finance.yahoo.com/q?s=[“symbol”, “Enter ticker symbol”]`like defined [here](http://www.aaii.com/computerized-investing/article/using-excel-web-queries-to-retrieve-data)，但是当我单击导入时，它给了我 404，我只是不知道该怎么做。

我正在做的 API 调用是对我们的 Redmine 机器的，我正在使用[这个 Redmine API 调用](http://www.redmine.org/projects/redmine/wiki/Rest_Issues)

# android - Android - 获得支持的色彩效果

> ID：11164576
> 
> 赞同：3
> 
> 时间：2012-06-22T21:47:20.747
> 
> 标签：android, android-camera

所以

有一个 API：[Camera.Parameters.html#getSupportedColorEffects](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedColorEffects%28%29) 但它不能在我的三星 Galaxy S Plus 上正常工作。它返回 9 种颜色效果，但实际上只支持其中的三种。

我在启动“原生”相机应用程序后得出了这个结论——那里只有三种效果（棕褐色、负片和黑白）。这些在我的应用程序中有效。当我尝试从 getSupportedColorEffects() 返回的列表中应用其他表单时 - 没有任何反应。

有人知道如何找到支持的颜色效果吗？

以下是我如何获得这些效果：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

    Camera.Parameters parameters = mCamera.getParameters();

    List<Size> sizes = parameters.getSupportedPreviewSizes();
    List<String> effects = parameters.getSupportedColorEffects();
    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:25:16.873

我认为您可能在 Android 中发现了一个错误，或者至少在该设备上发现了它。听起来其他人在不同的设备上遇到了类似的问题：[android camera samsung galaxy i9003 setParameters failed](https://stackoverflow.com/questions/5779261/android-camera-samsung-galaxy-i9003-setparameters-faild)。

一种可能的解决方法是：您是否能够成功设置不起作用的颜色效果？也就是说，您是否在调用后检查`getColorEffect()`了`null`它`setColorEffect()`？如果你得到`null`那些不起作用的，你可以`getSupportedColorEffects()`用一个循环来跟进你的每一个。

如果这不起作用，而是设备声称支持它默默忽略的效果，那么我不确定你能做些什么。

# ios - 新手 IOS 5：如何让 Facebook 返回当前登录用户的“关于我”数据？

> ID：11164579
> 
> 赞同：0
> 
> 时间：2012-06-22T21:47:43.707
> 
> 标签：ios, facebook

我的 Facebook 身份验证在 IOS 5 上运行良好，但需要下拉登录用户的数据。我已经阅读了 facebook 的教程，但缺乏实现 FBRequestDelegate 来处理我的请求的知识。

你能证明这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:15:51.747

您应该`user_about_me`在访问之前获得用户数据权限。
仅供参考：[用户对象](https://developers.facebook.com/docs/reference/api/user/)

然后您可以使用以下代码调用图形 API。

> [facebook requestWithGraphPath:@"me?fields=bio" andDelegate:self];

仅供参考：[https ://developers.facebook.com/docs/mobile/ios/build/#graph](https://developers.facebook.com/docs/mobile/ios/build/#graph)

> 成功的请求将在您的委托中回调 request:didLoad:。如果有多个结果，传递给您的委托的结果可以是 NSArray，如果只有一个结果，则可以是 NSDictionary。

[FBRequestDelegate](https://developers.facebook.com/docs/reference/iossdk/FBRequestDelegate/)

使用 FBRequestDelegate 协议来处理委托。参考这个[链接](https://developers.facebook.com/docs/mobile/ios/build/#appnotifications)

# c# - 使用 jQuery 在 MVC3 中调用操作时出现 404

> ID：11164584
> 
> 赞同：0
> 
> 时间：2012-06-22T21:48:13.623
> 
> 标签：c#, javascript, asp.net-mvc-3, jquery

在我的 MVC3 应用程序中，我使用 $.ajax 调用 JsonResult 类型的方法来获取要显示的数据：

```
 function GetData(e) {
    var ordersId = e.row.cells[0].innerHTML; //this is fine
    $.ajax({
         type: "POST",
         url: "/Documents/GetDocumentData",
         contentType: "application/json; charset=utf-8",
         data: "{'id': '"+ordersId +"'}",
         dataType: "json",
         success: function (result) {
        //load window
         },
         error: function (result) {
            if (!result.success)
        //show error
         }
     }); 
```

这是我的行动：

```
 [HttpPost] 
        public JsonResult GetDocumentData(string id)
    {
           //my code
           return Json(new { success = true});

        } 
```

当我在我的开发机器上调试时，它工作正常。我将它部署到我的测试网络服务器上，我得到'404 page not found dev/testwebsite/Documents/GetDocumentData' 如果出现问题，我应该在调试时得到这个，但我没有。为什么我会收到此错误？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:58:54.693

如果 dev/testwebsite/Documents/GetDocumentData 是服务器上的 URL，则您在 javascript 中的 URL 是错误的。

您应该使用 @Url.Action() 在 cshtml 页面中自动形成这些 URL。

例子：

```
@Url.Action("actionName","controllerName"  ) 
```

因此，对于您的具体情况，它将是：

```
@Url.Action( "GetDocumentData", "Documents" ) 
```

在 javascript 中，它看起来像这样：

```
function GetData(e) {
    var ordersId = e.row.cells[0].innerHTML; //this is fine
    $.ajax({
        type: "POST",
        url: '@Url.Action("GetDocumentData","Documents")',
        contentType: "application/json; charset=utf-8",
        data: "{'id': '"+ordersId +"'}",
        dataType: "json",
        success: function (result) {
        //load window
    },
    error: function (result) {
        if (!result.success)
        //show error
    }
}); 
```

# python - 在 SQLAlchemy 中，如何输入一个列表并获取表中符合条件的项目？

> ID：11164589
> 
> 赞同：1
> 
> 时间：2012-06-22T21:48:53.780
> 
> 标签：python, sql, django, sqlalchemy

表 A 有两列：`ID`和`name`

我想输入 3 个 ID 并获得 3 个名字，我的方式看起来像

```
ID_list = [1,3,4]
DBSession.query(TableA).filter(or_(TableA.id == input_ID_list[0], TableA.id == input_ID_list[1], TableA.id == input_ID_list[2]) 
```

这看起来很愚蠢。

在 SQLAlchemy 中是否有更清洁的方法来完成这项工作，例如：

```
DBSession.query(TableA).filter(TableA.id.in_(input_ID_list)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:07:11.447

已经知道答案了，有`in_`功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:14:03.190

尝试：

```
ID_list = [1,3,4] 
DBSession.query(TableA).filter(TableA.id.in_(ID_list)) 
```

# redirect - 是否可以从 https 发送 301 重定向（如果未使用）？

> ID：11164590
> 
> 赞同：0
> 
> 时间：2012-06-22T21:48:55.050
> 
> 标签：redirect, seo, web-hosting, http-status-code-301

我的网站托管在 HTTP 协议上，但是当通过 HTTPS 访问时，我的托管服务提供了一个默认页面。由于我没有使用 SSL，从 SEO 的角度来看，哪个更正确？a) 为我的网站切换 https 并执行 301 重定向到 http://？b）就这样（来自网络托管公司的默认 https 页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:23:55.553

A 将是最干净的解决方案，但它并不重要。除了你自己，还有谁会尝试 https 页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:01:20.333

对于域权限很小的网站，或者对于使用 https 链接到结帐然后再链接回 https 而不是 http 的网站，我已经看到了 https 与 http 的问题。

我们建议客户端使用 301 到 http 版本，以防万一这会导致问题。

试试这个 Mod 重写代码：

```
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} 
```

# c++ - 绕行 LoadLibraryA 时应用程序崩溃

> ID：11164591
> 
> 赞同：0
> 
> 时间：2012-06-22T21:49:07.077
> 
> 标签：c++, winapi, detours

我绕过了 LoadLibraryA，以阻止该函数被调用到我的应用程序中。它旨在阻止'dll注入'。如果您从未见过这些，请参考著名的 CDetour 库。

它钩住了加载库函数，甚至成功返回，也阻止了未知的dll被加载到内存中。有小费吗？

```
bool ( __stdcall* LoadLibraryA ) ( LPCSTR );

bool LoadLibraryADetoured( LPCSTR szMsg )
{
    if( strcmp( szMsg, "MyAllowedDll.dll" ) )
        return TRUE;

    return FALSE;
}

INT APIENTRY DllMain( HMODULE hModule, DWORD dwReason, LPVOID Reserved )
{
    switch( dwReason )
    {
        case DLL_PROCESS_ATTACH:
            {
                DWORD dwRetAddress = (DWORD)GetProcAddress( GetModuleHandleA( "kernel32.dll" ), "LoadLibraryA" );
                ZChatInput = ( bool ( __stdcall* ) ( ) )LoadLibraryA( ( PBYTE )dwRetAddress, ( PBYTE )LoadLibraryADetoured );
                DisableThreadLibraryCalls( hModule );
                break;
            }
        case DLL_THREAD_ATTACH:
        case DLL_PROCESS_DETACH:
            DetourRemove( ( PBYTE )dwRetAddress, ( PBYTE )LoadLibraryADetoured );
        case DLL_THREAD_DETACH:
            break;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:56:46.660

根据 MSDN，您可以在`DllMain()`. `LoadLibrary()`那里肯定不安全。

来自[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)：

> 因为当调用入口点函数时，Kernel32.dll 被保证加载到进程地址空间中，所以在 Kernel32.dll 中调用函数不会导致在执行其初始化代码之前使用 DLL。因此，入口点函数可以调用 Kernel32.dll**中不加载其他 DLL**的函数。例如，DllMain 可以创建临界区和互斥锁等同步对象，并使用 TLS。不幸的是，Kernel32.dll 中没有安全函数的完整列表。

（粗体强调是我的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:32:03.207

您的 detour 需要使用与被 detoured 的函数相同的调用约定。 `LoadLibraryA()`使用`__stdcall`，但您的绕道使用编译器默认值，通常是`__cdecl`。

# android - Android：拖动或轻弹时抑制onClick

> ID：11164594
> 
> 赞同：1
> 
> 时间：2012-06-22T21:49:21.010
> 
> 标签：android

我有一个要添加 onClickListener 的视图。麻烦的是，即使用户执行拖动操作，侦听器也会触发。如何在用户拖动时抑制单击，并且仅在单击而不拖动时进行处理？

为了完整起见，我正在使用类似下面的东西来添加 onClickListener -

```
private void installClickHandler(final GraphicalView x) {
    x.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent(getApplicationContext(), BillTablesActivity.class);
            startActivity(myIntent);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:26:39.473

设置一个[onTouchListener()](http://developer.android.com/reference/android/view/View.html#setOnTouchListener%28android.view.View.OnTouchListener%29)，如果你拖动它返回 true，或者返回 false 否则允许你的[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)处理事件。换句话说，由您决定是否将触摸视为点击。

要确定某事是单击还是拖动（或长按），您的[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)的实现将必须跟踪事件，`ACTION_DOWN`并`ACTION_UP`比较两者之间的时间。短时间间隔是单击，较长时间间隔是拖动或长按。

具体实现留给读者练习:)

# ajax - 从 serialize() 再发送一个参数

> ID：11164596
> 
> 赞同：0
> 
> 时间：2012-06-22T21:49:30.993
> 
> 标签：ajax, jquery

在我的 AJAX 代码的“数据”行中，我想从 serialize() 再发送一个参数（称为“动作”）。“数据”行看起来像这样（显然它不起作用）：

```
 $('.input_inscription').blur(function(){
        var myInput = $(this);

        $.ajax({
                    dataType: 'json',
                    type: "POST",
                    url: "my_url.php",
                    data:myInput.serialize()+"&action='input_control'",
                    success: function(data){
                       if (data.a == true){
                            $(".inscription_form_ctrl").text( data.b );                                 
                       }else{
                            $(".inscription_form_ctrl").text( data.b );
                       }
                    }
        });             

    }); 
```

Ps：我序列化一个输入字段，而不是一个表单！所以我需要“手动”添加“动作”参数（例如，它不能是隐藏输入）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:59:18.587

您能否分享更多代码以更清楚地了解您在做什么？

无论如何，如果您确实希望通过 url 传递数据，如果您正在使用表单，您不妨将 &action="input_control" 附加到表单操作属性中，就像这样

```
<form action="next.php?action='input_control'" method="POST" > 
```

# azure - 使用 Lucene 索引私有数据，我应该为每个用户创建单独的索引还是单个索引

> ID：11164597
> 
> 赞同：1
> 
> 时间：2012-06-22T21:49:45.953
> 
> 标签：azure, lucene

我正在开发一个基于 Azure 的网站，我想使用 Lucene 提供搜索功能。（结构化的 json 对象将被索引并存储在 Lucene 中，而其他内容（如 Word 文档等）将在 lucene 中被索引但存储在 blob 存储中）我希望搜索是安全的，这样一个用户将永远不会看到属于的文档给另一个用户。我想允许用户输入的临时搜索。最后，我想以编程方式查询以返回预定义的数据集，例如“用户 X 的所有注释”。我想我了解如何为每个文档添加属性以实现这三个目标。（我在这里列出它们，所以如果有人愿意回答，他们会更好地了解我想要做什么）

我的问题围绕着性能和安全性。

我可以通过为每个用户设置单独的索引来提高文档安全性，还是在每次搜索中将用户 ID 作为参数包含在内就足够了？

我可以通过为每个用户设置单独的索引来提高系统的索引速度和总吞吐量吗？我的想法是，拥有单独的索引可以让我通过让多个索引编写器（甚至可能在不同的服务器实例上）同时工作来扩展系统，每个编写器都有自己的索引。

任何见解将不胜感激。

问候，

内特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:13:41.713

当然，一个指标。通过使用 ManifoldCF（知道如何处理 Solr 的 Apache 产品）来管理安全性，您甚至可以做得比您建议的更好。

还有一个题外话，不知情的建议：我宁愿使用 CloudBees 或 Heroku（或亚马逊）而不是 Azure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:12:34.887

在您使用多台机器进行索引之前，我想使用单个索引更方便。Lucene 社区做了大量工作以使索引过程尽可能高效。因此，除非您有意实现分布式索引，否则我不建议您拆分索引。

但是，您想要拆分索引有几个原因：

*   如果您的机器有多个可以并行使用的 IO 设备。在这种情况下，如果您受 IO 限制，那么拆分索引是个好主意。
*   在索引之间拆分文档字段（这`ParallelReader`是应该的）。这是一种更奇特的拆分形式，但如果使用不同的字段组执行搜索可能是个好主意。假设我们有两种搜索查询类型：第一种是使用字段`name`和`type`，第二种是使用字段`price`和`discount`。如果这些字段以不同的速率更新（我猜，名称更新比价格更新要少得多），那么仅更新部分索引将需要更少的 IO 资源。这将为系统提供更多的整体吞吐量。

# regex - 很基础的正则表达式，是什么意思？

> ID：11164607
> 
> 赞同：1
> 
> 时间：2012-06-22T21:50:58.223
> 
> 标签：regex

好的，我的一个朋友用他在一段代码中找到的正则表达式与我对质，我一点经验都没有。我试图弄清楚，我真的认为它很基本，但我遇到了麻烦。

表达式为：`^(.*?){0,1}>$`

所以这是我从各种教程和定义中收集到的：

*   `^`代表“开始”和`$`结束，因此它们之间的表达式必须描述完整的字符串才能被选中。
*   `*?`是一个惰性运算符（意​​味着它首先尝试取前面字符的 0，如果不匹配，则取 1、2、3 等）。
*   `(.*?)`所以这必须意味着“尽可能少的字符”。
*   `(.*?){0,1}`: 现在我的麻烦开始了。“尽可能少取字符，零次还是一次”？
*   `^(.*?){0,1}>$`：“尽可能少的字符，零次或一次，字符 > 后跟结束”？

这基本上意味着“选择所有内容，如果 > 在字符串的末尾”？我很困惑......如果有人能对这个（我猜是非常基本的）问题有所了解，我将不胜感激......

编辑：好的，为了防止误解，在这种情况下使用正则表达式：

```
.replace(/^(.*?){0,1}>$/,"$1/>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:55:18.487

你所拥有的相当于以下内容：

```
^(.*)>$ 
```

首先写它的人可能很着急，并没有意识到他们在里面放了这么多无关紧要的东西。

* * *

澄清你的用例后，只需使用这个：

```
.replace(/>$/, '/>'); 
```

它会在结束`>`标记之前添加一个斜杠（如果有的话）。

* * *

如果您只想在斜线不存在时添加斜线，请使用：

```
.replace(/([^\/])>$/, '$1/>'); 
```

# asp.net-mvc - MVC3隐藏的价值不在表单回发之间持续存在

> ID：11164608
> 
> 赞同：0
> 
> 时间：2012-06-22T21:51:02.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个问题，我在操作方法中设置的值如下，并且隐藏的值在视图中可用。现在，当我将表单发布到操作方法时，隐藏字段值消失了。对此有什么想法吗？

```
 @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

        @Html.HiddenFor(model => Model.OutputStoredFileName)

        <button name="submit" class="art-button" type="submit" value="Populate" style="width: 100px">
                Attach</button>
    }

 [HttpPost]
public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1)
        {
        if(submit == "Populate")
         {
               //Runlogentry is the model
               if ((System.IO.File.Exists(runLogEntry.OutputStoredFileName)))
                            System.IO.File.Delete(runLogEntry.LoadListStoredFileName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:01:45.860

尝试更换

`@Html.HiddenFor(model => Model.OutputStoredFileName)`

和

`@Html.HiddenFor(model => model.OutputStoredFileName)`

在 FireBug 或 Fiddler 中确认该值已在请求中发布到服务器。

# c++ - 这个 & 运算符在这里是什么意思？

> ID：11164617
> 
> 赞同：2
> 
> 时间：2012-06-22T21:51:57.903
> 
> 标签：c++, bitwise-operators

我正在阅读一些关于 qt 中 openGL 的教程。其中一个鼠标事件槽中包含以下代码：

```
if (event->buttons() & Qt::LeftButton) {    
    rotationX += 180 * dy;
    rotationY += 180 * dx;
    updateGL();
} 
```

if 语句中 & 运算符的作用是什么？它与 == 完全相同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:52:48.077

它不一样`==`。它是*按位与*运算符。该表达式的作用是它从 中获取返回值`event->buttons()`并按*位与*它与由 表示的值相乘`Qt::LeftButton`。如果结果值非零，则正在执行块。

本质上，它检查 指定的按钮`Qt::LeftButton`是否被按住。

`bitwise AND`此处使用运算符的原因是一种称为*位掩码*的东西。这意味着返回值`event->buttons()`只是一个值，它的位代表不同类型的状态。& 运算符在这里所做的是检查某些位（由 表示`Qt::LeftButton`）是否在返回的值中被设置（1）或未设置（0）`event->buttons()`。如果没有设置测试位，则返回值为零，如果设置了至少一个测试位，则返回值非零。

可以在此处找到有关按位运算如何工作的更多详细信息：[有关按位运算的维基百科文章](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:05:31.890

这将测试值 event=>buttons() 是否具有位 Qt::LeftButton。

如果没有那个位，结果将是 0。和一个 Qt::LeftButton 如果它确实包含那个位。

它是检查数字上是否存在标志或位值的比较

```
0001 == 1
0010 == 2
0011 == 3

1 & 2 == 0 (false)
1 & 3 == 1 (true)
2 & 3 == 2 (true) 
```

本质上，它是两个值的位值匹配。

```
 (0001) 
& (0010)
---------
  (0000) //Neither have the same bit

  (0011)
& (0010)
---------
  (0010) //both have bit 2

  (0101)
& (0110)
---------
  (0100) // Both have the 3rd bit

  (0111)
& (0110)
---------
  (0110) // Both have the 2nd and 3rd bit 
```

C 语言中的布尔值是 0 表示假。任何非零都是真的。

这证明了数字 3 中的第 1 位和第 2 位可用。但是 1 和 2 没有匹配的位。

查看按位运算符。以获得更好的理解。

[http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:16:57.620

这是按位与运算符。更好的问题是：**AND 运算符在这里****的*工作是什么？*为什么我们在这里使用这种“低级”的方法？**

我们在这里有一组标志。按住的按钮集由 表示`event->buttons()`。这意味着，它是所有按下的按钮的总和。但是每个按钮都是唯一的 2 次幂，因此所有按下的按钮的总和是整数中的一组位。我希望你能理解这一点，因为这是我们如何在 C/C++ 中表示简单的有限元素集的重要部分。

关键是，所谓的 bitset 中的每一位都代表集合中的一个元素。每个元素都有一个唯一的编号，我们必须能够针对 bitset 进行测试（如果它包含在 bitset 中）。

如果要测试在事件期间是否按住了左键，则必须检查 bitset 中是否设置了该位。这是使用按位 AND 运算符完成的，因为它使用布尔 AND 运算逐位组合了操作数的所有位。正如您应该知道的，当且仅当两个输入位都为真时，AND 运算才返回真。因此，*按位*与运算用作输入位的**掩码**。右操作数“过滤掉”右操作数中存在的左操作数位。

由于`if`当且仅当值不等于 0 时，条件才被解释为真，这等于右操作数的位是否也出现在左操作数中的问题。在这个具体场景中，这意味着：值是否`Qt::LeftButton`按位包含在值中`event->buttons()`，或者：由 表示的位是否`Qt::LeftButton`包含在由表示的位集中`event->button()`？

或者简单地说：**左键是否被按住？**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:56:17.130

这是按位与运算符。

```
 0011
& 0101
------
  0001 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T22:02:53.440

`event->buttons()`大概返回一个值，该值是位的组合，其中每个位代表一个按钮。`Qt::LeftButton`将是一个值，可能在对应于“左键”的位置上只设置了一个位。在这里使用按位与 (&) 对这两个值的各个位进行与，如果结果非零，则条件将被视为真。

由于 中只有一位`Qt::LeftButton`，因此获得非零值的唯一方法是`event->buttons()`设置相同的位。（它也可能设置了其他位，但是当它们与 中的那些位置的零位进行与运算时，这些位就会消失`Qt::LeftButton`。那么，有效地，表达式的意思是“当且仅当`event->buttons()`包含由`Qt::LeftButton`”表示的位时才为真。

# c - 计算系统的总物理内存使用量

> ID：11164618
> 
> 赞同：0
> 
> 时间：2012-06-22T21:51:59.917
> 
> 标签：c, windows

我想计算系统的总物理内存使用量。这是我的代码：

```
float totalmem(){

    DWORDLONG totalVirtualMem;
    MEMORYSTATUSEX memInfo;
    float virtualMemUsed;

    memInfo.dwLength = sizeof(MEMORYSTATUSEX);
    GlobalMemoryStatusEx(&memInfo);
    totalVirtualMem = memInfo.ullTotalPageFile;
    virtualMemUsed = (double) (memInfo.ullTotalPageFile - memInfo.ullAvailPageFile) / memInfo.ullTotalPageFile * 100;
    return virtualMemUsed;
} 
```

但答案与 Windows 任务管理器或进程资源管理器显示的不同。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:00:22.080

正确的代码：

```
float totalmem(){

DWORDLONG totalVirtualMem;
MEMORYSTATUSEX memInfo;
float virtualMemUsed;

memInfo.dwLength = sizeof(MEMORYSTATUSEX);
GlobalMemoryStatusEx(&memInfo);
//totalVirtualMem = memInfo.ullTotalPageFile;
virtualMemUsed = (double) (memInfo.ullTotalPhys - memInfo.ullAvailPhys) / memInfo.ullTotalPhys * 100;
return virtualMemUsed;
} 
```

# python - Python：如何区分这两个函数

> ID：11164620
> 
> 赞同：-3
> 
> 时间：2012-06-22T21:52:25.760
> 
> 标签：python, function

```
def a():
    """ Need to write something here."""

def test1():
    return a()

def test2(x):
    return x 
```

我想在 python 解释器中这样做：

```
test1()

test2(a()) 
```

所以我需要做的是我写一个（）来让这两个函数（test1（），test2（x））返回不同的结果。

例如，我希望 test1 返回数字 1，而 test2 返回除数字 1 之外的其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:04:38.670

```
import inspect

def a():
    s = inspect.stack()
    if s[1][3] == '<module>':
        return "From test2"
    else:
        return "Not from test2" 
```

# c - 使用预处理器在 C 中进行模板化

> ID：11164621
> 
> 赞同：2
> 
> 时间：2012-06-22T21:52:27.023
> 
> 标签：c, templates, c-preprocessor

我想知道为什么我以前从未见过以下在 C 中实现模板的方法。我的想法是使预处理器用于模板工作。

**容器.h**：

```
#ifndef TEMPLATE_TYPE
    #error "missing decalaration TEMPLATE_TYPE"
#endif

#define _CONCAT(a, b) a##b
#define _EVALUATOR(a, b) _CONCAT(a, b)
#define MAKE_NAME(a, b) _EVALUATOR(a, b)

typedef struct {
    TEMPLATE_TYPE   data;
} MAKE_NAME(Container_, TEMPLATE_TYPE); 
```

**主.c**：

```
#define TEMPLATE_TYPE int
#include "container.h"

int main() {
    Container_int c;
    c.data = 99923;
} 
```

那么，到底是怎么回事？

1.  这只是被认为是“坏风格”
2.  太明显了，没有人会写一篇关于它的文章
3.  有很多文章，只是google man！

当您不打算回答 #3 时，我将不胜感激有关此技术的评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:18:38.387

你可以用预处理器做一些不可思议的事情（好的和坏的）。它是否被认为是糟糕的风格是一种判断，它在很大程度上取决于产生的代码的质量、可读性和可维护性。复杂的预处理器宏很难编写、调试和维护。但是，最好的 C 代码是您*不*编写的代码，而宏非常适合自动生成主题的变体。

以下是一些使用预处理器 (ab) 的好例子：

*   [SimpleScalar 处理器模拟器的 machine.def 文件](http://www.simplescalar.com/agreement.php3?simplesim-3v0e.tgz) （它是 C 代码，尽管有扩展名）
*   规范的[queue.h](http://fxr.watson.org/fxr/source/sys/queue.h)链表头

SimpleScalar 代码使用上面您建议的模式，其中#include 前面有一个#define，它为标题提供了一些方向。

如果您正在考虑认真使用预处理器，您应该查看[Boost 预处理器库](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)。（不要被 Boost 的 C++ 根源所推迟，预处理器宏与 C 一起工作得很好。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T22:28:30.613

代替

```
typedef struct {
    TEMPLATE_TYPE   data;
} MAKE_NAME(Container_, TEMPLATE_TYPE) 
```

你可能想做

```
#define MAKE_CONTAINER(type) typedef struct MAKE_NAME(Container_, type) { type data; } MAKE_NAME(Container_, type) 
```

为了能够做到

```
#include "container.h"
MAKE_CONTAINER(int);
MAKE_CONTAINER(double);

int main() {
    Container_int c; // one way to go
    struct Container_double d; // my preferred way: don't typedef when not needed; let the structs be obvious.

    c.data = 99923;
    d.data = 3.5;
} 
```

# apache - .htaccess 重写高级规则

> ID：11164624
> 
> 赞同：0
> 
> 时间：2012-06-22T21:52:36.333
> 
> 标签：apache, .htaccess

我想要一个 .htaccess 重写规则，但我不知道如何制作它。

例子

www.example.com/index.php => www.example.com/index.php

www.example.com/folder/profile.php => www.example.com/profile.php

www.example.com/文件夹 => www.example.com

一种重写规则，可以在顶层提供来自特定文件夹的文件，同时仍然提供顶级文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:55:37.737

给你！试试这个

编辑：进行了更改以排除 index.php！

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/folder/
RewriteRule ^(.*)$ folder/$1 [L] 
```

我对我的 Zend Framework 项目做同样的事情，我将所有请求从我的[http://domain.com/public/](http://domain.com/public/)路由到[http://domain.com/](http://domain.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:58:05.053

要在文件不存在时重定向，请执行此操作

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /folder/$1 [R] 
```

# c# - 缓存技术不会触发 .Net Windows 服务中的垃圾收集器

> ID：11164625
> 
> 赞同：0
> 
> 时间：2012-06-22T21:52:38.760
> 
> 标签：c#, caching, windows-services, garbage-collection, pass-by-reference

我目前遇到一个问题，我的一个基于 .Net 的 Windows 服务占用了太多内存。

我几乎肯定它与缓存实现有关，我决定使用“数据库”缓存技术，而问题在于我在服务启动时最初加载缓存值的方式。

这里的概念...

*   **类别**：服务 **操作**：开始

*   **类**：Cacheloader **操作**：LoadCache

*   **类**：DataAccessLayer **操作**：Store_Cache_in_DB

……别问我为什么，但是……

*   A) Cacheloader 在服务“启动”方法中作为局部变量“新增”。
*   B）DataAccessLayer 对服务是静态的（通过 IOC 的单例）

所以代码有点像这样

**服务**：

```
start()
{
    _cacheLoader = new Cacheloader(_dataAccessLayer); 
    _cacheLoader.LoadCache();
} 
```

**缓存加载器**：

```
LoadCache()
{
    var entities = _dataAccessLayer.FindEntitiesForCache(); 
    _dataAccessLayer.Store_Cache_in_DB(entities); 
} 
```

**数据访问层**：

```
Store_Cache_in_DB(List<Entity> entities)
{
    using(someConnection)
    {
        stored entities in datatable
        pass database to sproc that stores each entity
    }       
} 
```

因此，我关心的是通过 Store_Cache_in_DB 方法传递给静态 DataAccessLayer 对象的“实体”。我想知道垃圾收集器是否不会以某种方式清理这些，因为它们以某种方式被静态类引用？如果是这种情况，首先将实体分配给局部变量是否会有所帮助...

数据访问层：

```
Store_Cache_in_DB(List<Entity> entities)
{
    var cachedEntities = entities;

    using(someConnection)
    {
        stored cachedEntities in datatable
        pass database to sproc that stores each entity
    }       
} 
```

...希望这能解决我的问题。如果这不是我的内存消耗如此之高的原因，还有其他想法吗？同样，我确信这种缓存技术是肇事者。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:57:03.760

> 如果是这种情况，首先将实体分配给局部变量是否会有所帮助...

拥有一个本地不会改变任何东西 - 用户代码可以访问相同的对象实例。

唯一*可能*阻止它被垃圾收集的部分是这里发生的事情：

```
using(someConnection)
{
    stored cachedEntities in datatable
    pass database to sproc that stores each entity
} 
```

如果`entities`保存在一个持续存在的变量中，它将阻止它们以后被收集。

> 如果这不是我的内存消耗如此之高的原因，还有其他想法吗？

我建议在内存分析器下运行它，因为它会告诉你究竟是什么保留在你的内存中。

# internet-explorer-8 - IE8 和 IE9 :before 和 :after 元素绝对位置被隐藏

> ID：11164634
> 
> 赞同：11
> 
> 时间：2012-06-22T21:54:04.257
> 
> 标签：internet-explorer-8, internet-explorer-9, css-position, pseudo-element

我正在尝试创建一个两端带有“caps”的按钮和一个重复的背景，以使按钮保持灵活的大小。

为了做到这一点，我在 CSS 中使用了`:before`和`:after`伪元素，`position:absolute`并将其置于主按钮的背景覆盖空间之外（使用负值）。

它适用于 FF 和 Chrome，但它看起来像在 IE8 和 9 中，图像在那里，但在按钮“外部”，因此是隐藏的。有谁知道如何将这些伪元素“弹出”按钮，以便它们呈现？

我想将 HTML 保留为元素，并且*正在*`<button></button>`使用 SASS。你可以在这里看到一个 jsFiddle：http: [//jsfiddle.net/Dqr76/8/](http://jsfiddle.net/Dqr76/8/)或下面的代码：

```
button {
    display: inline-block;
    zoom: 1;
    *display: inline;
    border:0;
    background-image: url(../images/btn_bg.png);
    background-repeat: repeat-x;
    color: #fff;
    font-weight: bold;
    height: 22px;
    line-height: 22px;
    position: relative;
    margin: 0 5px;
    vertical-align: top;

    &:before {
        display: inline-block;
        height: 22px;
        background-image: url(../images/btn_left.png);
        width: 5px;
        position: absolute;
        left: -5px;
        top: 0;
        content: "";
    }

    &:after {
        display: inline-block;
        height: 22px;
        background-image: url(../images/btn_right.png);
        width: 5px;
        position: absolute;
        right: -5px;
        top: 0;
        content: "";
    }
} 
```

*只是一个旁注，在有人提出之前，我知道这些伪元素在 < IE8 中不起作用，并且已经创建了一个不影响这个问题的解决方法。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T13:14:58.543

添加`overflow: visible;`到按钮元素，它就会显示出来。在这个[jsFiddle上演示](http://jsfiddle.net/Dqr76/9/)

我发誓我已经试过了，但我想没有。 [感谢这个问题](https://stackoverflow.com/questions/10560138/anyone-know-why-this-after-css-isnt-working-in-ie9?rq=1)

# c++ - 通过显卡端口设置显示设置

> ID：11164641
> 
> 赞同：0
> 
> 时间：2012-06-22T21:54:32.240
> 
> 标签：c++, winapi, multiple-monitors

我正在编写一个信息亭应用程序，它有 6 个显示器连接到 1 台 PC，带有 2 个 3 头卡。显示器只能支持一种分辨率 1024x768。无论出于何种原因，Windows 7 都将它们检测为分辨率为 1600x1200 的显示器。桌面区域必须按顺序排列，显示器1在左边，6在右边。这是一个在实验室中解决的简单解决方案，只需使用 windows 显示控制面板手动重新排列桌面即可。在我交付驱动信息亭的软件后，在现场这将不起作用，因为如果说显示器出现故障并被更换，Windows 将重新排列桌面和分辨率。我的软件需要以编程方式安排桌面和分辨率。

在一个完美的世界中，我希望能够进行一系列 win32 调用，我可以将它们包装在一个函数中来执行：

```
Set the resolution of display plugged into video card 0 port 0 to 1024x768
Set the workspace position of display plugged into video card 0 port 0 to 0,0

Set the resolution of display plugged into video card 0 port 1 to 800x600
Set the workspace position of display plugged into video card 0 port 1 to 1024,0

Set the resolution of display plugged into video card 0 port 2 to 1600x1200
Set the workspace position of display plugged into video card 0 port 2 to 1824,0

Set the resolution of display plugged into video card 1 port 0 to 640x480
Set the workspace position of display plugged into video card 1 port 0 to 3424,0

Set the resolution of display plugged into video card 1 port 1 to 1024x768
Set the workspace position of display plugged into video card 1 port 1 to 4448,0

Set the resolution of display plugged into video card 1 port 2 to 1920x1080
Set the workspace position of display plugged into video card 1 port 2 to 6368,0 
```

然后，我会保证视频卡 0 中的端口 0 在左侧，视频卡 1 上的端口 2 在右侧

有谁知道我如何在 C++ 中做到这一点？

编辑 1：更新了决议以更清楚问题的性质

编辑 2：再次更新示例以包含问题的工作区部分

编辑 3：拼写

# linux - 如何在 Python 中检测我的 RAM 可用空间和总空间？

> ID：11164651
> 
> 赞同：0
> 
> 时间：2012-06-22T21:55:23.443
> 
> 标签：linux, python-2.7

所以，标题描述*了几乎*所有必要的回答我。还有一件事：**请回复默认安装 Python 的库**，因为我正在开发的应用程序是 Ubuntu App Showdown 的一部分。

运行 Python 2.7、Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:55:04.493

您要求的是一个几乎无法计算且价值很小的数字。

任何运行一段时间的 Linux 系统都几乎没有可用的“空闲”内存。只是 cat `/proc/meminfo`-`MemFree`条目通常只有几兆字节。

那么，那段记忆去哪儿了？

对于初学者，内核缓存所有磁盘访问。这通常在`Cached`条目中可见。当您需要更多内存时，磁盘缓存将被修剪，因此您*可以*将该数字添加到`MemFree`.

但是，如果应用程序`malloc()`在恰好有 2 GB RAM 的系统上分配（用 C 语言）2 GB，通常只会被授予：您会得到一个有效的指针。但是，实际上并没有为您的应用程序保留任何 RAM - 只有当您的应用程序开始接触内存页面时才会发生这种情况 - 每个接触的页面都会被分配。您可以要求的最大尺寸为`CommitLimit`.

但是应用程序代码本身也可能不在 RAM 中 - 二进制文件和库是 mmapp()ed，因此只有被触摸的页面才会加载到 RAM 中。

如果你运行一个工具`top`，你会得到每个进程的各种内存信息，包括 VIRT、RES 和 SHR。

*   VIRT 用于“虚拟”——应用程序需要的所有内存页面，如果它要求它要求的所有页面。
*   RES 是“常驻的”——实际使用的内存量
*   SHR 是“共享的”——与其他应用程序共享的页面数量，例如在多个应用程序中加载的库。

那么，知道有多少可用内存有什么价值呢？您可以启动一个*可能*需要比您的系统更多的 RAM 的应用程序，但它仍然运行......您甚至可以运行该应用程序两次或三次 - 代码页无论如何都是共享的......

**注意：**上述答案切入了很多角落，真正的机制要复杂得多。而且我什至还没有开始将交换空间带入故事中。但这对你有用，我希望......

# asp.net-mvc-3 - 将自定义方法集成到 LINQ to Entities 查询中

> ID：11164655
> 
> 赞同：3
> 
> 时间：2012-06-22T21:56:02.490
> 
> 标签：asp.net-mvc-3, linq, entity-framework, linq-to-entities

我有一个自定义方法，可以对一组数据执行一些计算：

```
 private int GetPercentages(int OriginalValue, int TotalValue)
        {
            var newValue = (int)Math.Round(((decimal)OriginalValue / (decimal)TotalValue) * 100);

            return newValue;
         } 
```

我需要能够在 LINQ to Entities 查询中运行此方法：

```
var data = from SurveyResponseModel in db.SurveyResponseModels
                       group SurveyResponseModel by SurveyResponseModel.MemberId into resultCount
                       select new ResultsViewModel()
                       {
                           MemberId = resultCount.Key,
                           PatientFollowUpResult = db.SurveyResponseModels.Count(r => r.PatientFollowUp),
                           PatientFollowUpResultPct = GetPercentages(db.SurveyResponseModels.Count(r => r.PatientFollowUp),totalResponsesResult),
                           ChangeCodingPracticeResult = db.SurveyResponseModels.Count(r => r.ChangeCodingPractice),
  }; 
```

我需要在查询内的大约 20 行以上运行它，所以仅仅将它嵌入内联似乎不是一个好选择。我知道它需要转换成 SQL 语法，但是我还能做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T23:58:52.437

您需要创建一个计算百分比的 lambda 表达式，如下所示：

```
Expression<Func<int, int, int>> calcPercentage =
    (OriginalValue, TotalValue) => (int)Math.Round(((decimal)OriginalValue / (decimal)TotalValue) * 100); 
```

并像这样使用它：

```
var data = from SurveyResponseModel in db.SurveyResponseModels.ToExpandable()
           group SurveyResponseModel by SurveyResponseModel.MemberId into resultCount
           select new ResultsViewModel()
           {
               MemberId = resultCount.Key,
               PatientFollowUpResult = db.SurveyResponseModels.Count(r => r.PatientFollowUp),
               PatientFollowUpResultPct = calcPercentage.Invoke(db.SurveyResponseModels.Count(r => r.PatientFollowUp), totalResponsesResult),
               ChangeCodingPracticeResult = db.SurveyResponseModels.Count(r => r.ChangeCodingPractice),
           }; 
```

有关在 LINQ 查询中调用函数的更多信息，请[点击此处](http://tomasp.net/blog/linq-expand.aspx)。

# css - 使 gwt 工具栏更好看

> ID：11164656
> 
> 赞同：0
> 
> 时间：2012-06-22T21:56:04.337
> 
> 标签：css, gwt, toolbar

我正在从事一个已经开始开发的项目。在某些页面上，有一些 textarea 和一个使用 gwt 的文本编辑器，我对此一无所知。事实是工具栏的风格非常简朴。有谁知道使这个工具包更好的方法，有什么文档吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:33:30.803

这是[有关样式 GWT 的综合指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss)。

# c - 长度为 4-20 的数组？

> ID：11164660
> 
> 赞同：-2
> 
> 时间：2012-06-22T21:56:26.733
> 
> 标签：c, arrays, types, declaration

我希望我的数组具有使用简单格式的设定长度。请让我知道这是如何完成的。

**我已经拥有的：** `arr[100]`

**伪代码：我想要的：** `arr[4-20]`或`arr[$min_int THROUGH $max_int]`

其他详细信息编辑： int 应在 range 内`array = (4, 20)`。输入可能包含前导零。我想限制数组的长度（即 9 或 10 个字符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:00:49.640

数组在 C 中根本无法以这种方式工作。您需要自己实现它，方法是仅循环遍历有效索引（并在过程中浪费内存）或使用更适合该工作的数据结构，如地图（您将必须在库中查找或自己编写，因为它在语言中不存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T00:10:59.853

```
#define ARRMINIDX 4
#define ARRMAXIDX 20
int arrmem[ARRMAXIDX+1-ARRMINIDX];
#define arr(x) arrmem[ARRMINIDX+(x)]

// process elements of arr
for( i = ARRMINIDX; i <= ARRMAXIDX; i++ )
    dosomething(arr(i)); 
```

OTOH，鉴于您的评论，这根本不是您想要的

> 我想要一个包含 0-1 个元素的数组：一个有限的 int 或有限的“numeric int”——模仿一个 int 的字符串。

在这种情况下，我无法做出正面或反面。你是说你想要一个代表整数的 4-20 个字符的字符串吗？

# python - 绑定在 for 循环中创建的计时器事件的最佳方法

> ID：11164661
> 
> 赞同：0
> 
> 时间：2012-06-22T21:56:31.270
> 
> 标签：python, events, timer, wxpython, bind

我正在尝试编写一个 python 代码，它在 for 循环中创建和初始化*n 个*计时器并将它们绑定到一些事件。下面的代码是我这样做的一个例子：

```
import wx

#dm1 = {a dewell times values dictionary}
#screens = [a list of dm1 keys]
trials = range(1, 3)
timers = range(0, 4)

class DM1(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        panel = wx.Panel(self)

        self.Go = wx.Button(panel, label = 'Go!', pos = (600, 450))
        self.Bind(wx.EVT_BUTTON, self.BuildTimers, self.Go)

    def BuildTimers(self, event):
        self.timers = {} 
        cum_timer = 0

        for trial in trials:
            for timer in timers:
                key = (timer, trial)
                new_timer = wx.Timer(self)
                cum_timer += dm1[screens[timer]]
                new_timer.Start(cum_timer * 1000, False)

                new_timer.mykey = key 
                self.timers[key] = new_timer

        self.Bind(wx.EVT_TIMER, self.Screens)

    def Screens(self, event):
        if event.GetEventObject() == self.timers[event.GetEventObject().mykey]:
            print event.GetEventObject().mykey
            if event.GetEventObject().mykey[0] == 0:
                print 'You bastard!'

            if event.GetEventObject().mykey[0] == 1:
                print 'you vicious...'                

            if event.GetEventObject().mykey[0] == 2:
                print 'heartless bastard!'

            if event.GetEventObject().mykey[0] == 3:
                print 'Oh It makes me mad!'

app = wx.App()
frame = DM1(None, title = 'IG', size = (wx.DisplaySize()))
frame.Show()
app.MainLoop() 
```

计时器不会在我指定的时间开始：第二个循环`trial`似乎覆盖了第一个。例如，`print event.GetEventObject().mykey`完整代码中的语句打印

(0, 1) (1, 1) (1, 2) (2, 1) (3, 1) (0, 2) (3, 1) (2, 1)

代替

(0, 1) (1, 1) (2, 1) (3, 1) (0, 2) (1, 2) (2, 2) (3, 2)

我想问题出在 中`GetEventObject`，但我不知道将计时器绑定到事件的更好方法。有人有想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:42:56.800

使用 wxPython 时，我发现让小部件使用默认参数生成自己的 id 更明智。然后，您只需向小部件询问其小部件 ID。这是一种危险的做法，意味着调试非常棘手，使用手动幻数 id 值并将小部件的 id 值发送到该值，特别是对于 4000 以下的 id，因为在低范围内定义了一堆区域。例如，一些内部方法会要求“给我带有 id 1 的小部件”，而不是获取一些内部默认小部件，该方法将获取您的计时器小部件。

使用诸如 TIMER_ID = 4000 或更难以捉摸的错误 TIMER_ID = 4000 + someoffset 之类的预定义，会为代码增加额外的维护成本。

我发现最灵活、最可靠的方法是使用 id=-1 或 id=wx.NewId()。然后说

```
ident = myTimer.GetId()
self.timers[ ident ] = myTimer 
```

或者

```
self.timers[ myTimer ] = myTimer 
```

或者

```
self.timers.append( myTimer ) 
```

维护顺序并且索引的行为就像您在代码中使用 ID 字段的方式一样。

另一个好的做法是避免使用“id”作为临时变量，因为有 Python 内置函数 id() 并且在 wx 中，小部件也有一个 id 属性：

```
w=Widget(..., id=int) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:02:49.597

你做错了，根据[这个线程](http://www.velocityreviews.com/forums/t359908-wxpython-using-more-than-1-timer.html)，你应该将一个 id 参数传递给计时器。对于您的情况，这就是我能想到的：

```
def BuildTimers(self, event):
    self.timers = {} 
    cum_timer = 0

    i = 0
    for trial in trials:
        for timer in timers:
            i += 1
            key = (timer, trial)
            new_timer = wx.Timer(self, id=i)
            cum_timer += dm1[screens[timer]]
            new_timer.Start(cum_timer * 1000, False)

            self.timers[i] = key

            self.Bind(wx.EVT_TIMER, lambda event, i=i: self.Screens(event, the_id=i), id=i)

def Screens(self, event, the_id=None):
    print "In the timer id =", the_id, "which is", self.timers[the_id] 
```

**为什么你所做的不起作用**

您正在设置 Timer 实例的属性，然后在您的函数中使用`GetEventObject()`. 显然， Timer 不是一个事件对象......你这样做的方式，所有的定时器都会调用同一个函数，而它却无法知道哪个函数正在调用它。所以我传递了一个独特的参数`id`，我认为它需要是一个 int 。为此，我使用了 lambda。它应该工作，但我没有测试它。

此外，正如我在[这里](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)看到的，您甚至可能不需要 id，只需将其绑定到计时器，但您可能需要直接将密钥作为参数传递。像（没有`i`）：

`self.Bind(wx.EVT_TIMER, lambda event, k=key: self.Screens(event, the_key=k), new_timer)`

# string - 如何使用 R 删除字符串中的重复字符？

> ID：11164667
> 
> 赞同：22
> 
> 时间：2012-06-22T21:56:53.337
> 
> 标签：string, r

我想实现一个`R`删除字符串中重复字符的函数。例如，假设我的函数名为`removeRS`，所以它应该以这种方式工作：

```
 removeRS('Buenaaaaaaaaa Suerrrrte')
  Buena Suerte
  removeRS('Hoy estoy tristeeeeeee')
  Hoy estoy triste 
```

我的函数将与用西班牙语编写的字符串一起使用，因此查找具有三个以上连续元音的单词并不常见（或至少正确）。不用担心他们背后可能存在的情绪。尽管如此，有些单词可以有两个连续的辅音（尤其是 ll 和 rr），但我们可以从函数中跳过它。

所以，总而言之，这个函数应该用那个字母替换连续出现至少 3 次的字母。在上述示例之一中，`aaaaaaaaa`替换为`a`。

你能给我任何提示来完成这项任务`R`吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-22T23:59:50.047

我没有仔细考虑这一点，但这是我在正则表达式中使用引用的快速解决方案：

```
gsub('([[:alpha:]])\\1+', '\\1', 'Buenaaaaaaaaa Suerrrrte')
# [1] "Buena Suerte" 
```

`()`首先捕获一个字母，`\\1`指该字母，`+`表示匹配一次或多次；将所有这些部分放在一起，我们可以匹配一个字母两次或更多次。

要包含除字母数字以外的其他字符，请替换`[[:alpha:]]`为匹配您希望包含的任何内容的正则表达式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T22:52:38.147

我认为您应该注意问题描述中的歧义。这是第一次尝试，但它显然不能以您想要的方式与“Good Luck”一起使用：

```
removeRS <- function(str) paste(rle(strsplit(str, "")[[1]])$values, collapse="")
removeRS('Buenaaaaaaaaa Suerrrrte')
#[1] "Buena Suerte" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-09T03:54:33.197

由于您要替换至少出现 3 次的字母，因此这是我的解决方案：

```
gsub("([[:alpha:]])\\1{2,}", "\\1", "Buennaaaa Suerrrtee")
#[1] "Buenna Suertee" 
```

如您所见，4 "a" 已缩减为仅 1 a，3 r 已缩减为 1 r，但 2 n 和 2 e 未更改。如上所述，您可以将 替换为`[[:alpha:]]`任何组合或类似的组合，如果您希望代码仅影响 y 和 Q 的重复，`[a-zA-KM-Z]`甚至可以在`|`方括号内使用“或”运算符。`[y|Q]`

```
gsub("([a|e])\\1{2,}", "\\1", "Buennaaaa Suerrrtee")
# [1] "Buenna Suerrrtee"
# triple r are not affected and there are no triple e. 
```

# facebook - Facebook使用的IP空间列表

> ID：11164672
> 
> 赞同：37
> 
> 时间：2012-06-22T21:57:33.477
> 
> 标签：facebook, facebook-graph-api, routes, cidr

我正在寻找 Facebook 使用的 IP 空间的权威列表。我需要它来支持一个锁定的开发人员环境，该环境对出站连接有非常严格的限制。

今天我发现 api 和 graph.facebook.com 开始解析为 69.171.224.0/19，这以前不在我的过滤器中。我已经更新了它，但我想知道我缺少哪些其他 IP 空间允许规则。

这是我目前所拥有的。您可以列出的任何其他 IP 块都会很棒。谢谢大家。

```
69.63.176.0/20
69.171.224.0/19
66.220.144.0/20
204.15.20.0/22 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-22T22:05:53.380

2020-05-23 的名单是：

```
31.13.24.0/21
31.13.64.0/18
45.64.40.0/22
66.220.144.0/20
69.63.176.0/20
69.171.224.0/19
74.119.76.0/22
102.132.96.0/20
103.4.96.0/22
129.134.0.0/16
147.75.208.0/20
157.240.0.0/16
173.252.64.0/18
179.60.192.0/22
185.60.216.0/22
185.89.216.0/22
199.201.64.0/22
204.15.20.0/22 
```

获取此列表的方法已记录在[Facebook 的开发者网站上](https://developers.facebook.com/docs/sharing/webmasters/crawler)，您可以进行 whois 调用以查看分配给 Facebook 的所有 IP：

```
whois -h whois.radb.net -- '-i origin AS32934' | grep ^route 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-07T14:21:38.193

```
# Bloqueio facebook
for ip in `whois -h whois.radb.net '!gAS32934' | grep /`
do
  iptables -A FORWARD -p all -d $ip -j REJECT
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-11T19:40:25.860

截至 2013 年 6 月 11 日的更新列表

204.15.20.0/22
69.63.176.0/20

66.220.144.0/20
66.220.144.0/20
69.63.184.0/21
69.63.176.0 / 21 74.119.76.0 / 22 69.171.255.0 / 24
173.252.64.0
/
18/18
69.171.224.0/19
69.171.224.0/20
103.4.96.0/22
69.63.176.0/24
173.252.64.0/1911.252.70.0/24
31.64.0 /18 31.64.0/18
31.13.24.0/21
66.220.152.0/21
66.220.152.0/24
66.220.159.0/24
69.171.239.0/24
69.171.240.0/20
31.13.64.0/19
31.13.64.0/24
31.13.65.0/24
31.13.67.0/24
31.13.68.0/24
31.13.69.0/24
31.13.70.0/24
31.13.71.0/24
31.13.72.0/24
31.13.73.0/24
31.13.74.0/24
31.13.75.0/24
31.13.76.0/24
31.13.77.0/24
31.13.96.0/19
31.193.66.9/6.0/24/24
_
69.63.178.0/24
31.13.78.0/24
31.13.79.0/24
31.13.80.0/24
31.13.82.0/24
31.13.83.0/24
31.13.84.0/24
31.13.85.0/24
31.13.878.0/24.13.87.0/24
_
31.13.89.0/24
31.13.90.0/24
31.13.91.0/24
31.13.92.0/24
31.13.93.0/24
31.13.94.0/24
31.13.95.0/24
69.171.253.0/24
624.63.186.0/
204.15.20.0/22
69.63.176.0/20
69.63.176.0/21
69.63.184.0/21
66.220.144.0/20
69.63.176.0/20

# java - Java中的可变字符串

> ID：11164675
> 
> 赞同：12
> 
> 时间：2012-06-22T21:57:47.980
> 
> 标签：java, string, reflection

几乎每个人都知道 Java 中的字符串是不可变的。最近我发现了一些可能表明它并不总是正确的东西。让我们试试这段代码：

```
System.out.println("-------- BEFORE MODIFICATIONS --------");
String beforeTest = new String("Original");
System.out.println(beforeTest);
java.lang.reflect.Field valueField = String.class.getDeclaredField("value");
valueField.setAccessible(true);
valueField.set("Original", "Modified".toCharArray());
System.out.println("-------- AFTER MODIFICATIONS --------");
System.out.println(beforeTest);
System.out.println("Original");
String test = new String("Original");
System.out.println(test);
String test2 = new String("Original 2");
System.out.println(test2); 
```

输出将是：

```
-------- BEFORE MODIFICATIONS --------
Original
-------- AFTER MODIFICATIONS --------
Original
Modified
Modified
Original 2 
```

这个技巧是如何工作的？JVM 如何知道哪些对象应该更改，哪些不应该更改？这个技巧的背后是什么机制？为什么已经创建`beforeTest`的字符串没有改变？这个把戏真的有损`strings are immutable`原则吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T22:04:39.347

字符串文字被嵌入到一个池中。这意味着当你写

```
String s1 = "Foo";
String s2 = "Foo";
String s3 = new String("Foo"); 
```

s1 和 s2 指的是同一个 String 对象，而 s3 指的是另一个，由另一个 char 数组支持。

在您的代码中，您通过修改包含“原始”字符串文字实例的字符的私有 char 数组来违反字符串的不变量。但是由于`beforeTest`引用了另一个 String 实例，所以它没有被修改。

不变性是通过将字段私有到对象中来实现的，并且不提供任何方法来修改此私有状态。通过使用反射，您打破了所有封装规则，因此您可以违反不变性。

# visual-studio-2008 - 在 Visual C++ 中将项目符号显示为密码字符

> ID：11164679
> 
> 赞同：0
> 
> 时间：2012-06-22T21:58:07.327
> 
> 标签：visual-studio-2008, visual-c++

我似乎无法在 Visual C++ 表单应用程序中将项目符号显示为密码字符。我正在使用 Visual Studio 2008 Pro。

我创建了一个文本框并将 PasswordChar 属性更改为“\u2022”（子弹的 unicode）。它在表单设计器属性框中显示为项目符号，但在应用程序运行时不在文本框中。我只是得到那些“缺少字符”的空框字符。我尝试了多种不同的字体，根据[www.fileformat.info都支持这个字符](http://www.fileformat.info/info/unicode/char/2022/fontsupport.htm)

我究竟做错了什么？显然我可以使用星号或其他字符，但除非我知道它为什么不工作，否则这会让我感到烦恼...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:47:19.090

不是一个真正的解决方案，但对 Visual C++ 越来越失望，我在 C# 中重新启动，一切正常。我猜一定是VS2008中的一个错误。

# c# - 域名验证正则表达式 - 如何扩展到多行验证？

> ID：11164685
> 
> 赞同：0
> 
> 时间：2012-06-22T21:59:01.970
> 
> 标签：c#, regex, asp.net-mvc, asp.net-mvc-3, validation

这是我目前的情况；我是一个近乎完全的正则表达式文盲，我的任务是扩展我们网站的一部分，该网站向用户请求域名以获得客户帐户。现在它是一行，一个域名，下面的正则表达式效果很好。

```
(?i)^(?!.{257,})(?!.*-\\.)(?!.*?-\\.)(?:[a-zA-Z0-9-]{1,64}\\.)+(?:[a-zA-Z]{2,6})\\b 
```

我需要做的是允许用户在框中输入多个域名。每行一个。基本上我需要做的就是包装这个正则表达式，以便逐行应用验证，而不是在整个集合上应用。

我知道这件事使用负面展望，尽管我不知道这些是什么。我发现的每个教程似乎都避开了我需要的想法和概念。我本周末可以学习的任何想法、链接或评论将不胜感激。

顺便说一句，我在 .Net MVC 3.0 中实现了这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:44:17.653

许多 Regexp 框架提供了一组扩展选项来修改匹配的整体行为。

以下两个链接包含对 .NET 和 Javascript 的引用：

*   [.NET 正则表达式选项](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx ".NET 正则表达式选项")
*   [JavaScript 正则表达式参考](http://www.w3schools.com/jsref/jsref_obj_regexp.asp "JavaScript 正则表达式参考")

在这两种情况下，如果将整个多行字符串输入正则表达式，则*m*选项可能就是您要查找的选项。

此外，就负面预测而言，Python regexp 模块中的这个小片段给出了一个简洁的示例（来自[Python Regex Module](http://docs.python.org/library/re.html#regular-expression-syntax "Python 正则表达式参考")）：

> （？！...）
> 
> 如果 ... 下一个不匹配，则匹配。这是一个否定的前瞻断言。例如，Isaac (?!Asimov) 将匹配 'Isaac ' 仅当它后面没有 'Asimov' 时。

# python - 在 Google App Engine 上在线生成 CSV 文件

> ID：11164686
> 
> 赞同：6
> 
> 时间：2012-06-22T21:59:03.463
> 
> 标签：python, google-app-engine, csv

我正在使用 Google App Engine (python)，我希望我的用户能够下载使用数据存储中的一些数据生成的 CSV 文件（但我不希望他们下载整个内容，因为我重新排序了列和东西）。

我必须使用 csv 模块，因为可能有包含逗号的单元格。但是如果我这样做，我将需要编写一个文件，这在 Google App Engine 上是不允许的

我目前拥有的是这样的：

```
 tmp = open("tmp.csv", 'w')
    writer = csv.writer(tmp)
    writer.writerow(["foo", "foo,bar", "bar"]) 
```

所以我想我想做的是要么用逗号处理单元格..要么使用 csv 模块而不编写文件，因为这在 GAE 中是不可能的..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T22:11:44.783

我找到了一种在 GAE 上使用 CSV 模块的方法！这里是：

```
self.response.headers['Content-Type'] = 'application/csv'
writer = csv.writer(self.response.out)

writer.writerow(["foo", "foo,bar", "bar"]) 
```

这样你就不需要写任何文件

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-05T18:13:28.733

这是在 GAE中使用[Python CSV 模块](http://docs.python.org/2/library/csv.html)的完整示例。我通常使用它从 gql 查询创建 csv 文件并提示用户保存或打开它。

```
import csv

class MyDownloadHandler(webapp2.RequestHandler):
  def get(self):

    q = ModelName.gql("WHERE foo = 'bar' ORDER BY date ASC")
    reqs = q.fetch(1000)

    self.response.headers['Content-Type'] = 'text/csv'
    self.response.headers['Content-Disposition'] = 'attachment; filename=studenttransreqs.csv'
    writer = csv.writer(self.response.out) 
```

创建行标签

```
 writer.writerow(['Date', 'Time','User' ]) 
```

遍历查询，将每个实例作为一行返回

```
 for req in reqs:
        writer.writerow([req.date,req.time,req.user]) 
```

添加适当的映射，以便在单击链接时打开文件对话框

```
('/mydownloadhandler',MyDownloadHandler), 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T22:03:08.780

```
import StringIO

tmp = StringIO.StringIO()
writer = csv.writer(tmp)

writer.writerow(["foo", "foo,bar", "bar"])
contents = tmp.getvalue()

tmp.close()
print contents 
```

# iphone - 如何在网格中显示图像，如 iOS 上的 iphone 照片库

> ID：11164688
> 
> 赞同：1
> 
> 时间：2012-06-22T21:59:10.233
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我正在开发一个 iphone 应用程序，并希望有一个页面在多个网格中显示多个图像（每个网格都有一个图像，当用户对其进行标签时会做出响应），就像默认的 iphone 照片库应用程序会显示图像缩略图一样。

我首先想到的是带有自定义单元格的表格视图。每个单元格将显示一些按钮，每个按钮代表一个图像并将单元格设置为不可选择。因此，用户可以选择按钮（图像），但不能选择单元格本身。但这是最好的方法吗？内置照片应用程序是这样的吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:06:11.980

有几个开源网格视图。

[AQGridView](https://github.com/AlanQuatermain/AQGridView)

之前也在这里回答过：

[以前的答案](https://stackoverflow.com/questions/3866766/how-to-create-a-gallery-on-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:51:04.807

您可能想等待 iOS 6（提示，提示）。

登录 developer.apple.com 并观看[WWDC 2012 视频](https://developer.apple.com/videos/wwdc/2012/)（即 Cocoa Touch 的新功能）。

# php - 使用 .one() 和 .get()

> ID：11164691
> 
> 赞同：3
> 
> 时间：2012-06-22T21:59:38.203
> 
> 标签：php, javascript, jquery

**问题：**将 .get() 与 .one() （或 .live()）结合使用以使外部 php 文件仅附加一次的正确方法是什么？

最近的编辑： **解决方案**

```
<script>
$(document).ready(function(){
$('.tree li a').one("click", function() {
    var currentAnchor = $('.tree li a').attr('href');
    if(!currentAnchor){
        var query = "page=1";
    }
    else
    {
    var splits = currentAnchor.substring(1).split('&');
    //Get the section
    var page = splits[0];
    delete splits[0];
    var query = "page=" + page;
    alert ("page=" + page);
    }
    //Send the petition
    $("#loading").show();
    $.get("callbacks.php",query, function(data){
        $("#content").append(data);
        $("#loading").hide();
    });       
    return false;
 });
});
</script> 
```

进一步来说：

我正在使用 Javascript 和 PHP 将一些外部 PHP 页面加载为我的主模板中的部分。

我正在使用 switch 和 append() ，因此包含的文件会不断附加。我需要每个文件只能附加一次。这是我希望发生的情况

1）点击下载链接

2) 出现downloads.php

3) 单击错误链接

4) errors.php 出现在 downloads.php 下面

5) 再次点击下载链接

6) 页面只滚动到 downloads.php 的顶部

[我需要与 .one()文档页面](http://api.jquery.com/one/)上的示例相同的功能，其中每个 div 只能单击一次。

我还查看了[Using .one() with .live() jQuery](https://stackoverflow.com/questions/3796207/using-one-with-live-jquery)，我特别喜欢在接受的答案中使用的方法。

Iried 使用如下建议的布尔标志，但它所做的只是将我对同一链接的连续点击限制为一个。因此，如果我`link 1`多次单击它只会显示第 1.php 页一次，但是如果我单击链接 1，然后单击链接 2，然后再次单击链接 1，它将显示第 1.php 页，然后附加第 2.php 页并附加另一个第 1.php 页。

我开始认为 setInterval 是错误的，我可以将 .one() 用于整个`checkAnchor()`函数并将其绑定到`<a>`标签。我试过这个，但它也不起作用:(((

**core.js** - 使用 .one()

```
var currentAnchor = null;
//$(document).ready(checkAnchor);
//Function which chek if there are anchor changes, if there are, sends the ajax petition checkAnchor
$("a").one("click", function (){
//Check if it has changes
if(currentAnchor != document.location.hash){
    currentAnchor = document.location.hash;
    //if there is not anchor, the loads the default section
    if(!currentAnchor){
        query = "page=1";
    }
    else
    {
        //Creates the  string callback. This converts the url URL/#main&id=2 in URL/?section=main&id=2
        var splits = currentAnchor.substring(1).split('&');
        //Get the section
        var page = splits[0];
        delete splits[0];
        var query = "page=" + page;

    }
    alert ("hello");
    //Send the petition
    $("#loading").show();

    $.get("callbacks.php",query, function(data){
        $("#content").append(data);
        $("#loading").hide();
        });

}
}); 
```

作为一种方法，我喜欢的另一件事是将页面名称添加到数组中，然后检查该数组以确保页面尚未显示。我设法使用 .push() 用页面名称填充数组，但是在查找其中的值时遇到了死胡同。如果你有一个想法应该是怎样的，那也会非常有帮助。

**核心.js**

```
///On load page
var contentLoaded;
$().ready(function(){
contentLoaded = false;
setInterval("checkAnchor()", 300);
    alert (contentLoaded);
});
var currentAnchor = null;

//Function which chek if there are anchor changes, if there are, sends the ajax petition
function checkAnchor(){
//Check if it has changes
if(currentAnchor != document.location.hash){
    currentAnchor = document.location.hash;
    //if there is not anchor, the loads the default section
    if(!currentAnchor){
        query = "page=1";
    }
    else
    {
        //Creates the  string callback. This converts the url URL/#main&id=2 in URL/?section=main&id=2
        var splits = currentAnchor.substring(1).split('&');
        //Get the section
        var page = splits[0];
        delete splits[0];
        var query = "page=" + page;

    }
    alert ("hello");
    //Send the petition
    $("#loading").show();

    alert (contentLoaded);

    if (!contentLoaded){
    $.get("callbacks.php",query, function(data){
        $("#content").append(data);
        $("#loading").hide();
        });

        alert (contentLoaded);

    }
    contentLoaded = true;

}
} 
```

这是我的

**回调.php**

```
<?php  
//Captures the petition and load the suitable section  
switch($_GET['page']){  
case "4100errors" : 
  include 'template/4100errors.php';
  break;
case "4100downloads" :      
 include 'template/4100downloads.php';
  break;
}
?> 
```

还有我的主文件

**4100.php**

```
<?php
include 'template/header.php';
include 'template/4100menu.php';
include 'template/log.php';
include 'template/links.php';
include 'template/4100breadcrumbs.php';
?>
<div class="left-widget">
<div style="display:none; position:absolute; top:-9999; z-index:-100;">
<a href="4100.php?page=4100downloads"></a>
<a href="4100.php?page=4100errors"></a>
</div>

<div id="side-nav-bar" class="Mwidget">
    <h3>Contents</h3>
        <ul class="tree">
            <li><a href="#4100downloads" class="links" >Downloads</a>        </li>
            <li><a href="#4100errors" class="links">Error  Troubleshooting</a></li>
        </ul>
   </div>
   </div>

    <div id="content" style="margin-top:100px; margin-left:300px;">  
  <?
switch ($_GET['page']) 
{
case "4100downloads": include 'template/4100downloads.php'; break;
case "4100errors": include 'template/4100errors.php'; break;

}
?>

</div>

</body>  
</html> 
```

**4100dowloads.php**

```
Downloads test page 
```

**4100error.php**

```
Errors test page 
```

您也可以在这里查看测试页面[http://period3designs.com/phptest/1/4100.php](http://period3designs.com/phptest/1/4100.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:13:57.427

> *“将 .get() 与 .one() （或 .live()）结合使用以使外部 php 文件仅附加一次的正确方法是什么？”*

`.one()`和`live()`真的没什么关系`$.get`。它们仅用于事件处理。

如果您打算按`50ms`原样运行代码，但想*替换*当前内容，请使用`.html()`代替`.append()`.

```
$("#content").html(data); 
```

这将覆盖旧内容。

* * *

我假设您已经意识到这一点，但可以肯定的是，您的代码会因此而间隔运行......

```
$().ready(function(){
    setInterval("checkAnchor()", 50); // better--> setInterval(checkAnchor, 50);
}); 
```

如果您只想在文档加载时使用一次，请执行此操作...

```
$(document).ready(checkAnchor); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:14:25.097

只需使用布尔标志来确定您是否加载了数据。在页面加载时将其设置为 false，并在调用后将其`$.get`设置为 true。然后，`$.get`用`if (!contentLoaded) { $.get ... }`.

这样，您将`$.get`只执行一次。

顺便说一句：`$.one`用于将事件绑定到一个元素，该元素将只执行一次，然后将其与它自身解除绑定。

# windows - 我是否需要下载 subversion 二进制文件才能使用 SmartSVN？

> ID：11164692
> 
> 赞同：0
> 
> 时间：2012-06-22T21:59:43.080
> 
> 标签：windows, svn, smartsvn

我正在使用 Windows 7 64 位，我想知道是否需要 subversion 二进制文件才能使用 smartsvn .. 等待答案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:40:22.280

不，SmartSVN 使用 SVNKit 库与 Subversion 一起工作并将其包含在其发行版中。不需要二进制文件。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-22T22:03:34.840

smartsvn 是服务器，你需要在你的 Windows 机器上使用类似[http://tortoisesvn.net/](http://tortoisesvn.net/)的东西来连接 smartsvn 服务。

# python - PyGTK：从以前的组合框下拉菜单更改组合框下拉菜单

> ID：11164709
> 
> 赞同：0
> 
> 时间：2012-06-22T22:01:57.737
> 
> 标签：python, gtk, pygtk

我是 python 和 Pygtk 的新手，我不知道如何从以前的下拉菜单项更新下拉菜单项。我正在尝试设置组合框（cb2）的列表存储，这取决于先前组合框（cb1）的选择。所以我认为这是一个动态的 cb2，因为它取决于 cb1 用户的选择。

cb1 有 C1 和 C2 项。如果我选择 C1，我希望 cb2 项目为 2,3 和 4。如果我选​​择 C2，我希望 cb2 项目为 2,3,4 和 6。

有人能帮我吗？

这是我到目前为止的测试用例代码。但是更改不起作用！

```
import pygtk
pygtk.require("2.0")
import gtk

class test:
    def __init__(self):
        self.window = gtk.Window(type=gtk.WINDOW_TOPLEVEL)
        self.window.connect("destroy", lambda w: gtk.main_quit())

        self.vbox_setup = gtk.VBox(False, 0)
        self.vbox_setup.set_border_width(10)
        self.window.add(self.vbox_setup)
        self.conf_1()

        self.window.show_all()
        gtk.main()

    def conf_1(self):
        self.obs_box = gtk.VBox(False, 0)
        self.vbox_setup.pack_start(self.obs_box, False, True, 0)
        self.label = gtk.Label('Conf1')
        self.obs_box.pack_start(self.label, False, True, 3)
        self.label_lat = gtk.Label('Latitude: ?')
        self.combobox_1 = gtk.ComboBox()
        self.liststore = gtk.ListStore(str)
        self.cell = gtk.CellRendererText()
        self.combobox_1.pack_start(self.cell)
        self.combobox_1.add_attribute(self.cell, 'text', 0)
        self.obs_box.pack_start(self.combobox_1, False, True, 3)
        self.liststore.append(['Select:'])
        self.liststore.append(['C1'])
        self.liststore.append(['C2'])
        self.combobox_1.set_model(self.liststore)
        self.combobox_1.connect('changed', self.conf1_choice)
        self.combobox_1.connect('changed', self.conf2_choice)
        self.combobox_1.set_active(0)
        self.obs_box.pack_start(self.label_lat, False, True, 3)

    def conf1_choice(self, combobox):
        model = combobox.get_model()
        index = combobox.get_active()
        if model[index][0] == 'C1':
            self.latitude = -4.23
        elif model[index][0] == 'C2':
            self.latitude = 45.22
        else :
            self.latitude = 0
        lat_dgr = int(self.latitude)
        lat_mn = int((self.latitude %1)*60.)
        lat_s = ((self.latitude %1)*60\. %1)*60.
        self.label_lat.set_label('Latitude: '+str(lat_dgr)+u'\u00B0 '+
                             str(lat_mn)+u'\u0027 '+str(round(lat_s,2))+u'\u0027\u0027' )

    def conf2_choice(self, widget):
        self.configuration_box = gtk.VBox(False, 0)
        self.vbox_setup.pack_start(self.configuration_box, False, True, 0)
        self.label = gtk.Label('Configuration')
        self.configuration_box.pack_start(self.label, False, True, 3)
        self.combobox_2 = gtk.ComboBox()
        self.liststore = gtk.ListStore(str)
        self.cell = gtk.CellRendererText()
        self.combobox_2.pack_start(self.cell)
        self.combobox_2.add_attribute(self.cell, 'text', 0)
        self.configuration_box.pack_start(self.combobox_2, False, True, 3)
        self.liststore.append(['Select:'])
        model = self.combobox_1.get_model()
        index = self.combobox_1.get_active()
        if model[index][0] == 'C1':
            self.liststore.append(['2'])
            self.liststore.append(['3'])
            self.liststore.append(['4'])
        if model[index][0] == 'C2':
            self.liststore.append(['2'])
            self.liststore.append(['3'])
            self.liststore.append(['4'])
            self.liststore.append(['6'])
        self.combobox_2.set_model(self.liststore)
        self.combobox_2.set_active(0)
        self.combobox_2.connect('changed', self.conf3_choice)

    def conf3_choice(self, widget):
        pass

if __name__ == "__main__":
    uv = test() 
```

此外，我还希望选择 cb1=C1 和 cb2=2 创建 2 个带有项目 T1、T2 和 T3 的其他组合框，或者如果我选择 cb1=C1 和 cb2=4，它将创建其他 4 个带有项目 T1、T2 的组合框和 T3。cb1=C2 相同，但项目 U1、U2、U3 和 U4。在这种情况下，我对 *conf3_choice* 的实现是：

```
def conf3_choice(self, widget):
    model_1 = self.combobox_1.get_model()
    index_1 = self.combobox_1.get_active()
    model_2 = self.combobox_2.get_model()
    index_2 = self.combobox_2.get_active()
    self.new_box_1 = gtk.VBox(False, 0)
    self.vbox_setup.pack_start(self.new_box_1, False, True, 0)
    self.new_box_2 = gtk.VBox(False, 0)
    self.vbox_setup.pack_start(self.new_box_2, False, True, 0)
    self.combobox_3 = gtk.ComboBox()
    self.liststore = gtk.ListStore(str)
    self.cell = gtk.CellRendererText()
    self.combobox_3.pack_start(self.cell)
    self.combobox_3.add_attribute(self.cell, 'text', 0)
    self.liststore.append(['Select:'])
    if model_1[index][0]=='C1':
        self.liststore.append(['T1'])
        self.liststore.append(['T2'])
        self.liststore.append(['T3'])
        self.combobox_3.set_model(self.liststore)
        self.combobox_3.set_active(0)
        if model_2[index][0]=='2':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
        if model_2[index][0]=='3':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
        if model_2[index][0]=='4':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
    if model_1[index][0]=='C2':
        self.liststore.append(['U1'])
        self.liststore.append(['U2'])
        self.liststore.append(['U3'])
        self.liststore.append(['U4'])
        self.combobox_3.set_model(self.liststore)
        self.combobox_3.set_active(0)
        if model_2[index][0]=='2':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
        if model_2[index][0]=='3':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
        if model_2[index][0]=='4':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
        if model_2[index][0]=='6':
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3)
            self.configuration_box.pack_start(self.combobox_3, False, True, 3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:58:02.750

您与每个组合框共享相同的模型 (self.liststore)。与 self.cell 类似。你应该为它们使用局部变量，如果你以后需要它们，你可以使用**get_model()**等。其次，每次组合框更改时创建小部件听起来不是一个好主意；更好的方法是在开始时创建小部件并根据需要启用/禁用它们。在所有情况下，您只需要更新模型 ( *liststore* )。

我重新安排了一些您的代码，以便将相关功能放在一起。通过使用局部变量和正确的顺序，您会注意到现在代码可以工作了。您可以在此处推断代码以使第 3 个和第 4 个组合框工作。

最后但并非最不重要的一点是，在您想添加项目时，有必要为第二个组合框**清除（）模型。**

```
import pygtk
pygtk.require("2.0")
import gtk

class test:
    def __init__(self):
        self.window = gtk.Window(type=gtk.WINDOW_TOPLEVEL)
        self.window.connect("destroy", lambda w: gtk.main_quit())

        self.vbox_setup = gtk.VBox(False, 0)
        self.vbox_setup.set_border_width(10)
        self.window.add(self.vbox_setup)
        self.create_comboxbox()

        self.window.show_all()
        gtk.main()

    def create_comboxbox(self):
        # Main Combo box
        liststore = gtk.ListStore(str)
        liststore.append(['Select:'])
        liststore.append(['C1'])
        liststore.append(['C2'])

        self.obs_box = gtk.VBox(False, 0)
        self.vbox_setup.pack_start(self.obs_box, False, True, 0)
        label = gtk.Label('Conf1')
        self.label_lat = gtk.Label('Latitude: ?')

        self.combobox_1 = gtk.ComboBox()
        cell = gtk.CellRendererText()
        self.combobox_1.pack_start(cell)
        self.combobox_1.add_attribute(cell, 'text', 0)
        self.combobox_1.set_model(liststore)
        self.combobox_1.set_active(0)
        self.combobox_1.connect('changed', self.conf1_choice)
        self.combobox_1.connect('changed', self.conf2_choice)

        self.obs_box.pack_start(label, False, True, 3)
        self.obs_box.pack_start(self.combobox_1, False, True, 3)
        self.obs_box.pack_start(self.label_lat, False, True, 3)

        # Secondary Combo box
        liststore = gtk.ListStore(str)
        liststore.append(['Select:'])

        label = gtk.Label('Configuration')
        self.combobox_2 = gtk.ComboBox()

        cell = gtk.CellRendererText()
        self.combobox_2.pack_start(cell)
        self.combobox_2.add_attribute(cell, 'text', 0)
        self.combobox_2.set_model(liststore)
        self.combobox_2.set_active(0)
        #self.combobox_2.connect('changed', self.conf3_choice)

        self.obs_box.pack_start(label, False, True, 3)
        self.obs_box.pack_start(self.combobox_2, False, True, 3)

    def conf1_choice(self, combobox):
        model = combobox.get_model()
        index = combobox.get_active()
        if model[index][0] == 'C1':
            self.latitude = -4.23
        elif model[index][0] == 'C2':
            self.latitude = 45.22
        else:
            self.latitude = 0
        lat_dgr = int(self.latitude)
        lat_mn = int((self.latitude %1)*60.)
        lat_s = ((self.latitude %1)*60\. %1)*60.
        self.label_lat.set_label('Latitude: '+str(lat_dgr)+u'\u00B0 '+
                             str(lat_mn)+u'\u0027 '+str(round(lat_s,2))+u'\u0027\u0027' )

    def conf2_choice(self, widget):
        model = self.combobox_1.get_model()
        index = self.combobox_1.get_active()
        liststore = self.combobox_2.get_model()
        liststore.clear()
        liststore.append(['Select:'])
        if model[index][0] == 'C1':
            liststore.append(['2'])
            liststore.append(['3'])
            liststore.append(['4'])
        if model[index][0] == 'C2':
            liststore.append(['2'])
            liststore.append(['3'])
            liststore.append(['4'])
            liststore.append(['6'])
        self.combobox_2.set_model(liststore)
        self.combobox_2.set_active(0)

if __name__ == "__main__":
    uv = test() 
```

# css - 在 DIV 按钮中居中文本的正确方法是什么

> ID：11164711
> 
> 赞同：1
> 
> 时间：2012-06-22T22:02:11.330
> 
> 标签：css, coding-style

我一直想知道在 div 中放置文本的“最佳”方式是什么

1）在文本周围的元素上放置填充，并从元素的高度/宽度中减去填充。

```
<div class="button">
    Activate
</div><!-- button -->

.button
{
    height: 20px;   /* -10px from padding for text */
    width: 90px;    /* -10px from padding for text */
    padding-left:10px;
    padding-right:10px; 
} 
```

2）在文本周围放置一个跨度，并将其定位为自己的元素。

```
<div class="button2">
    <span class="button2-text">
        Activate
    </span>
</div><!-- button2 -->

.button2
{
    height: 30px
    width: 100px
}
.button2-text
{
    padding-left:10px;
    padding-top:10px;
} 
```

我总是选择 1)，因为它的代码更少，但我觉得 2) 更合适或者想知道我是否以任何方式使用方法 1) 是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:14:31.337

您的第二个选项不会将高度/宽度与填充混合。

如今的浏览器都遵循相同的盒子模型（这是您在选项 1 中的定位方式）。这相当于拥有`box-sizing: content-box`.

Internet Explorer 最高 6 版本和 Quirks 模式没有，而是使用了替代方案，其中包括填充作为宽度的一部分，相当于`box-sizing: border-box`.

为了正确定位两种模型，使用选项 2 是最安全的。

如果您检查[http://jsfiddle.net/stb5a/](http://jsfiddle.net/stb5a/)，`box-sizing`则设置为`content-box`. 将其更改为`border-box`不会更改文本的位置；

所以基本上，选项 2 将用于与旧版本的 Internet Explorer（现在几乎没有了）的兼容性，以及用于为这些版本编码的开发人员，使用与他们一直做的相同的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:14:01.243

最好的方法是使用`<button>`

## *[jsBin 演示](http://jsbin.com/isehij/edit#javascript,html,live)*

```
<button class="button">Activate</button> 
```

CSS：

```
 .button{
    border: 1px solid #888;
    background:#eee;
    padding:5px 30px;
    border-radius:4px;
  } 
```

而且您将有空闲时间玩颜色:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T22:13:48.540

我会选择 1) 。2）`<span>`标签在语义上是无用的。除非您没有其他内容，否则`<div>`不要编译您的标记。

[KISS](http://en.wikipedia.org/wiki/KISS_principle) - 保持简单愚蠢

# java - 有没有办法在 Java 1.4 中拥有相当于结构的方法？

> ID：11164722
> 
> 赞同：4
> 
> 时间：2012-06-22T22:04:16.237
> 
> 标签：java, struct

使用 Point (x, y) 对象的常见示例，有没有办法将它作为 Java 1.4 中的结构？优点是不会为 Point 对象分配单独的内存，因为结构将是包含对象的一部分。但它仍然有成员函数来访问它。

我有 98% 的把握答案是否定的，但希望永远存在……

什么/为什么：在我们的代码中，我们有 100,000 多个对象（大约占总内存占用的 12-14%），它们是一个 int 和一个布尔值。如果这是对象内部的 C# 结构，它将减少对象的数量。而且...我们正在考虑将其设置为 int，其中 0x40000000 是布尔值。但是，如果我们有该 int 的成员方法并将其视为结构，则处理起来会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:22:32.693

现在 Java 上没有 struct 等价物，尽管我相信它们已被暗示用于未来的版本。仍然看看享元模式，可能是你正在寻找的[http://en.wikipedia.org/wiki/Flyweight_pattern](http://en.wikipedia.org/wiki/Flyweight_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:18:43.390

No, you have to use `Object`s for general "structs".

However for simple data structures like pairs of `int`s, you can use a bit of trickery in order to save memory and increase speed.

```
int a = 9;
int b = 10;
long pair = (a << 32)|b; 
```

This packs the 32 bits of `a` and `b` into a `long`. Here's how you extract them:

```
a = (int)(pair >> 32);
b = (int)pair; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T22:21:26.070

[tkuzzy 的答案](https://stackoverflow.com/a/11164862/874577)的补充：另一种可能性是将`int x`和`int y`字段从`Point`类提升到任何需要存储点值的类中。

根据评论进行编辑：

您可以做的一件事是让每个需要存储单点值的类扩展一个`Point`类。`Point`不存在逻辑上的 is-a 关系，但它使您可以通过单个接口访问对象。不过，这对于任何需要存储多个点值的类都不起作用（我不认为）。

# javascript - HTML5 拖放内容类型？

> ID：11164729
> 
> 赞同：1
> 
> 时间：2012-06-22T22:04:45.413
> 
> 标签：javascript, html, drag-and-drop

我需要知道被拖放到拖放区域的数据的内容或类型。如果它选择的文本或文件。对于文件，我可以通过扩展名来判断，但我无法区分它的文本还是文件。伊玛JS菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:10:26.713

您实际上无法将选定的文本拖放到任何地方。你可以放下*它的容器*。

无论如何，您必须更具体地说明您到底需要什么：课程？

如果您使用 html5 拖放，您可以发送放置事件接收者将收到的文本数据。例如，您可以传递拖动元素的对象类型，以便之后可以使用它。

# android - 我试图重新排列我的 android 应用程序中的一些按钮，但它们的功能不适合它们

> ID：11164733
> 
> 赞同：0
> 
> 时间：2012-06-22T22:05:03.950
> 
> 标签：android, button, swap

所以我在 android 主页上有 5 个按钮，我想切换它们，所以我编辑了 main.xml，真正交换的只是按钮上的标签。

我有主要的活动代码，比如

```
View showc = findViewById(R.id.showtheclients);
showc.setOnClickListener(this); 
```

和

```
public void onClick(View v) {
    switch (v.getId()) {
         case R.id.showtheclients:
  ... 
```

我已经在 main.xml 中进行了更改，但它们仍然具有旧功能。任何有关如何解决此问题的建议将不胜感激。

如果有帮助，我正在运行 Eclipse 和 Android 1.6。

编辑：好的，我按照建议将所有视图更改为按钮，还更改了 main.xml 中的一个 ID（以及主要活动中的所有调用），最后似乎注册我已经更改了按钮（自从有人问起我第一次交换了 ID）。另外我在模拟器上重新安装了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:43:11.890

尝试`R.java`手动清除文件，然后尝试它会起作用。我在我的应用程序中遇到了同样的问题，这个技巧也对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:13:01.027

你说你改变的只是标签。我假设您的意思是您只更改了按钮上的文本，并将它们的 ID 保留为旧的。

Android 使用这些 ID 来识别您的视图。如果要更改特定按钮的功能，则还需要更改该 ID 的 case 语句的代码。

PS：最好用

```
Button showc = (Button) findViewById(R.id.showtheclients); 
```

代替

```
View showc = findViewById(R.id.showtheclients); 
```

# facebook - facebook打开图表上的个人资料数据类型

> ID：11164736
> 
> 赞同：1
> 
> 时间：2012-06-22T22:05:33.560
> 
> 标签：facebook, cocos2d-iphone, facebook-opengraph

我正在做一个 iphone 应用程序并试图在其中包含一些 facebook OG 操作。我有一个名为“用户”的对象。我为名为“朋友”的“用户”创建了一个自定义属性，该属性属于数据类型配置文件。

现在，如何在我的 cocos 2D 应用程序中定义该数据类型？还是我应该在 php 页面上做？即使在 php 页面上执行此操作，我也应该向该页面发送一些参数。那么，如何定义此配置文件数据类型？

# android - 从 mysql 数据库中填充两个相互依赖的微调器

> ID：11164744
> 
> 赞同：1
> 
> 时间：2012-06-22T22:06:46.740
> 
> 标签：android, mysql

我有 2 个微调器，一个用于省，另一个用于市，如果我在省微调器中选择豪登省，第二个微调器必须显示约翰内斯堡、比勒陀利亚、百夫长，如果我在省中选择 KZN，我希望第二个微调器显示彼得马里斯堡、德班、乌伦迪

这是我尝试使用但根本无法使用的代码。我会感谢您的帮助

```
int ct_id;
    String[] ct_name = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.extras);

        provins = (Spinner) findViewById(R.id.spinprovince);
        city = (Spinner) findViewById(R.id.spincity);

        save = (Button) findViewById(R.id.btnsave);

            String result = null;
            InputStream is = null;
            StringBuilder sb = null;
            // http post
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://10.0.2.2/php/ttz.php");
                // httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection" + e.toString());
            }
            // convert response to string
            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(
                        is, "iso-8859-1"), 8);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            // paring data
            JSONArray jArray;
            try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                ct_name = new String[jArray.length()];
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    ct_id = json_data.getInt("idprovince");
                    ct_name[i] = json_data.getString("provincename");

        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,ct_name);

         aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                    provins.setAdapter(aa);

                }
            } catch (JSONException e1) {
                Toast.makeText(getBaseContext(), "No City Found", Toast.LENGTH_LONG)
                        .show();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:40:36.643

试试这个代码...

```
 public class MainActivity extends Activity {
InputStream is=null;
String result=null;
String line=null;

String[] roll_no,name;  

Spinner spinner1,spinner2;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

spinner1 = (Spinner) findViewById(R.id.spinner1);
spinner2 = (Spinner) findViewById(R.id.spinner2);
final List<String> list1 = new ArrayList<String>();
final List<String> list2 = new ArrayList<String>();

Button b=(Button) findViewById(R.id.button1);

b.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v)
{
                // TODO Auto-generated method stub

try
{
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://10.0.2.2/spinner.php");
HttpResponse response = httpclient.execute(httppost);
Log.e("Fail 1", "3");

HttpEntity entity = response.getEntity();
Log.e("Fail 1", "4");

is = entity.getContent();
Log.e("Pass 1", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 1", e.toString());
Toast.makeText(getApplicationContext(), "Invalid IP Address",Toast.LENGTH_LONG).show();
finish();
}    

try
{
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
StringBuilder sb = new StringBuilder();
while ((line = reader.readLine()) != null)
{
sb.append(line + "\n");
}
is.close();
result = sb.toString();
}
catch(Exception e)
{
Log.e("Fail 2", e.toString());
}    

try
{
JSONArray JA=new JSONArray(result);
JSONObject json= null;
roll_no = new String[JA.length()];       
name = new String[JA.length()];

for(int i=0;i<JA.length();i++)
{
json=JA.getJSONObject(i);
roll_no[i] = json.getString("roll_no");
name[i]=json.getString("name");
}
Toast.makeText(getApplicationContext(), "sss",Toast.LENGTH_LONG).show();

for(int i=0;i<roll_no.length;i++)
{
list1.add(roll_no[i]);
list2.add(name[i]);
}

spinner_fn();

}
catch(Exception e)
{

Log.e("Fail 3", e.toString());
//login.this.finish();

}
}
});

}

private void spinner_fn() {
// TODO Auto-generated method stub

ArrayAdapter<String> dataAdapter1 = new ArrayAdapter<String>(getApplicationContext(),
                                android.R.layout.simple_spinner_item, roll_no);
dataAdapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner1.setAdapter(dataAdapter1);

ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(getApplicationContext(),
                                android.R.layout.simple_spinner_item, name);
dataAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner2.setAdapter(dataAdapter2);

spinner1.setOnItemSelectedListener(new OnItemSelectedListener()
{
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id)
{
// TODO Auto-generated method stub

spinner2.setSelection(position);

}

@Override
public void onNothingSelected(AdapterView<?> arg0)
{
// TODO Auto-generated method stub
}

});

spinner2.setOnItemSelectedListener(new OnItemSelectedListener() {

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long arg3) {
// TODO Auto-generated method stub

spinner1.setSelection(position);

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
// TODO Auto-generated method stub
}
});

} 
```

不要忘记授予 Androidmanifest 权限：

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

还有你的 spinner.php 文件：

```
 <?php
$host='127.0.0.1';
$uname='root'_name;
$pwd='password';
$db='android';
$con = mysql_connect($host,$uname,$pwd) or die("connection failed");
mysql_select_db($db,$con) or die("db selection failed");
$r=mysql_query("select * from class",$con);
while($row=mysql_fetch_array($r))
{
$cls[]=$row;
//echo $fin."<br>";
}
print(json_encode($cls));
mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T19:19:40.227

请参阅[本教程](http://androidappcode.wordpress.com/2014/01/03/dropdownlist-android-spinner-from-php-and-mysql-using-json/)如何在下拉菜单中从 MYSQL 获取数据 [DropDownList / Android Spinner from PHP and MySQL using JSON

# c# - 如果未设置参数，如何防止 EntityDatasource 查询数据库？

> ID：11164746
> 
> 赞同：0
> 
> 时间：2012-06-22T22:07:08.970
> 
> 标签：c#, asp.net, entity-framework

这是我的实体数据源：

```
<asp:EntityDataSource ID="edsUsers" runat="server"
ConnectionString="name=kdEntities" DefaultContainerName="kdEntities" EnableDelete="True"
EnableFlattening="False" EnableInsert="True" EnableUpdate="True" 
EntitySetName="Users" AutoGenerateWhereClause="true">
<WhereParameters>
    <asp:SessionParameter Name="UsrID" SessionField="UsrID" DefaultValue="-1" Type="Int32" />
</WhereParameters> 
```

我假设我需要使用 EntityDatasource 的 OnSelecting 事件，但我还没有弄清楚如何检查参数值。

如果值为 -1，我想取消查询，但我更愿意检查数据源而不是参数使用的 Session 字段。

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:17:06.373

您可能会考虑添加一个 Object 类型的自定义参数。这有望解决您的问题。

```
<WhereParameters>
            <cmsParameter:CustomParameter Name="UsrID" />
</WhereParameters> 
```

然后你可以添加一个新的自定义参数类，比如

```
public class CustomParameter : Parameter
{
    protected override object Eval(HttpContext context, Control control)
    {
        MembershipUser cur_User = Membership.GetUser();
        return cur_User.ProviderUserKey;
    }
} 
```

这实际上被分配给我们指定的“UsrID”自定义参数。

# java - JXTreeTable - 我的节点是可编辑的，但其他单元格不是

> ID：11164749
> 
> 赞同：0
> 
> 时间：2012-06-22T22:07:12.507
> 
> 标签：java, swing, swingx, jxtreetable

这真的让我很困惑。到目前为止，我将展示我的代码。我正在尝试使某些字段可编辑。这是最终目标，但我只是尝试放入一个 JCheckBox 来进行测试。但即使这样似乎也行不通。

你能看看这个。我真的很感激。

JXTreeTable 所做的只是让我的节点可编辑。如果我确实更改了我的节点，我不想要它，它的编辑将保存整个行，这也是我真的不想要的。

这是我所做的：

**初始化**

```
JXTreeTable table = new JXTreeTable(Shared.model);
table.setDefaultEditor(Object.class, new ComplexCellEditor());
table.setRootVisible(false);
table.setEditable(true);
table.getColumnModel().getColumn(0).setPreferredWidth(200);
table.setColumnControlVisible(true); 
```

**这是我的 ComplexCellEditor.java**

```
class ComplexCellEditor extends DefaultCellEditor{
public ComplexCellEditor() {
    super(new JTextField());
    Console.t("here");
}
public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean a, boolean b, int row)
{
    Component component = super.getTreeCellEditorComponent(tree, value, isSelected, a , b, row);

        Console.t("here");   <--**//THIS DOESN'T EVEN GET PRINTED**
        JCheckBox chk= new JCheckBox();
        return chk;
} 
```

}

感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:34:22.223

确保您的`TreeTableModel`回报为真`isCellEditable`。

# mysql - 如何构建条件 SQL 查询

> ID：11164752
> 
> 赞同：0
> 
> 时间：2012-06-22T22:07:37.450
> 
> 标签：mysql, sql

我有点不确定如何为 MySQL 数据库构建以下查询。

我的表有两个 int 字段，`startDate`它们`endDate`包含 UNIX 时间戳。`endDate`可以`NULL`，这意味着没有结束日期。

我想获取当前时间戳在该范围内的所有记录。

在`endDate`有价值的情况下，我可以这样做：

`SELECT * FROM table WHERE startDate < NOW() AND endDate > NOW()`

如果`endDate`是NULL，我可以这样做：

`SELECT * FROM table WHERE`开始日期`< NOW()`

我的问题是，如何将上述两个查询组合成一个单一的条件查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:10:51.047

```
SELECT * FROM table 
WHERE startDate < NOW() AND (endDate IS NULL OR endDate > NOW()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:10:44.383

简单的：

```
SELECT * FROM table WHERE startDate < NOW() AND
                          (endDate IS NULL OR endDate > NOW()) 
```

# java - 如何为 JWS 应用程序添加库。？

> ID：11164755
> 
> 赞同：0
> 
> 时间：2012-06-22T22:07:55.377
> 
> 标签：java, jakarta-ee, glassfish, glassfish-3, java-web-start

我正在部署一个需要一些外部库才能运行的摆动客户端。如何使它们可以通过`<jar href="library.jar"/>`JNLP 下载？是否有使它们可用的配置或可以放置它们的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T03:07:45.977

[如此处](https://stackoverflow.com/a/11129876/230513)所述，JAR 必须可以使用`href`属性中指定的相对路径进行访问。[这里](https://stackoverflow.com/a/9443588/230513)有一个相关的答案。

# java - Java中泛型参数类的反射？

> ID：11164756
> 
> 赞同：9
> 
> 时间：2012-06-22T22:07:57.780
> 
> 标签：java, generics, reflection, types

想象以下场景：

```
class MyClass extends OtherClass<String>{

   String myName;
   //Whatever

}

class OtherClass<T> {

   T myfield;

} 
```

我正在专门使用反射分析 MyClass `(MyClass.class).getDeclaredFields()`，在这种情况下，我将获得以下字段（和类型，使用字段的 getType() ）：

```
myName --> String
myField --> T 
```

我想获取 T 的实际类型，由于扩展表示法中的显式“字符串”在运行时已知，我该如何获取 myField 的非遗传类型？

编辑解决：

似乎答案是“你不能”。对于那些以后可能会看到这个问题的人，我建议使用 Jackson（我试图这样做以生成 JSON）并以这样的方式注释您的类和字段，以便 Jackson 知道继承层次结构并可以自动执行什么下面建议的正确答案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T22:39:34.503

这只能通过反射来实现，因为您明确使用了`String`，否则此信息将由于类型擦除而丢失。

```
ParameterizedType t = (ParameterizedType) MyClass.class.getGenericSuperclass(); // OtherClass<String>
Class<?> clazz = (Class<?>) t.getActualTypeArguments()[0]; // Class<String> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-20T12:32:22.663

[我在这里](http://tutorials.jenkov.com/java-reflection/generics.html)找到了一个很好的解释：

> 在运行时检查可参数化类型本身时，例如 java.util.List，无法知道已参数化为什么类型。这是有道理的，因为可以将类型参数化为同一应用程序中的各种类型。但是，当您检查声明使用参数化类型的方法或字段时，您可以在运行时看到参数化类型被参数化为什么类型。

简而言之：

您无法在类型本身上看到它被参数化到运行时的类型，但您可以在使用和参数化它的字段和方法中看到它。

在代码中：

你看不到`T`这里：

```
class MyClass<T> { T myField; } 
```

你可以在`T`这里看到“”：

```
class FooClass {
    MyClass<? extends Serializable> fooField;
} 
```

在这里，您将能够分辨`fooField`. 参见和`getGeneric*()`的方法。`Class``Method`

顺便说一句，我经常看到这个（缩短）：

```
Class fieldArgClass = (Class) aType.getActualTypeArguments()[0]; 
```

这是不正确的，因为`getActualTypeArguments()`可能并且经常会返回`TypeVariable`而不是 class - 那是泛型`<? extends SomeClass>`而不是 just的时候`<SomeClass>`。它可以更深入，想象一下：

```
class FooClass {
    MyClass<? extends Map<String, List<? extends Serializable>>> fooField;
} 
```

所以你得到一棵`Type`s 的树。但这有点跑题了。享受 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-20T13:02:31.357

这是一个典型的例子，说明为什么反射不是一个好主意。

**您可以通过反射从程序中获得的只是该语言的编译器人员选择提供的那些事实。**

而且他们通常负担不起提供所有东西。他们不得不保留原始程序文本。

因此，反映者无法获得有关您的代码的所有其他事实。

解决此问题的方法是*跳出*语言并使用*可以*提供有关代码的任意信息的工具。此类工具称为[程序转换系统 (PTS)](http://en.wikipedia.org/wiki/Program_transformation)。

PTS 解析源代码并构建代表它的 AST。一个好的 PTW 将构建一个 AST，它基本上包含有关代码的所有内容（运算符、操作数、标点符号、注释），以便可以对其进行检查。通常，PTS 将记录语言标记的行/列位置，因此可以获得甚至布局信息；极端 PTS 将记录标记之间的空白，或者至少知道如何在必要时读取原始文本文件（如果被问及）。这个 AST 本质上相当于我所说的需要的全文，但以更方便的形式处理。

（PTS 还有一个非常好的特性：它们可以*修改*AST 并为修改后的程序重新生成代码。但这超出了反射范围，因此我不会在这方面进一步评论）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T22:15:23.970

泛型类型在运行时是未知的*。*只有编译器知道它们，检查你的程序是否输入正确，然后删​​除它们。

在您的特定情况下，调用`MyClass.class.getGenericSuperclass()`可能会为您提供所需的信息，因为出于某种奇怪的原因，继承时使用的具体类型保存在类描述符中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-09T08:22:31.457

伟大的工作在[这里](http://gafter.blogspot.com/2006/12/super-type-tokens.html)。它被称为“Gafters Gadget”模式。它被杰克逊和谷歌图书馆如番石榴使用。

/** * 引用一个泛型类型。* * @author crazybob@google.com (Bob Lee) */

```

公共抽象类 TypeReference {

`private final Type type;
private volatile Constructor<?> constructor;

protected TypeReference() {
    Type superclass = getClass().getGenericSuperclass();
    if (superclass instanceof Class) {
        throw new RuntimeException("Missing type parameter.");
    }
    this.type = ((ParameterizedType) superclass).getActualTypeArguments()[0];
}

/**
 * Instantiates a new instance of {@code T} using the default, no-arg
 * constructor.
 */
@SuppressWarnings("unchecked")
public T newInstance()
        throws NoSuchMethodException, IllegalAccessException,
               InvocationTargetException, InstantiationException {
    if (constructor == null) {
        Class<?> rawType = type instanceof Class<?>
            ? (Class<?>) type
            : (Class<?>) ((ParameterizedType) type).getRawType();
        constructor = rawType.getConstructor();
    }
    return (T) constructor.newInstance();
}

/**
 * Gets the referenced type.
 */
public Type getType() {
    return this.type;
}

public static void main(String[] args) throws Exception {
    List<String> l1 = new TypeReference<ArrayList<String>>() {}.newInstance();
    List l2 = new TypeReference<ArrayList>() {}.newInstance();
}` 

}

            回答 #6

赞同：-5

时间：2012-06-22T22:14:32.803

[由于Type Erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，没有直接的方法来获取实际类型。但是，您可以使用以下方式：

在您的 中`OtherClass<T>`，编写以下抽象方法：

```
protected abstract class<T> getClazz(); 
```

然后在 中`MyClass`，实现方法：

```
@Override
protected Class<String> getClazz(){
    return String.class;
} 
```

然后你可以打电话`getClazz()`来上课。

```

# sql - 这个 SQL 语句是做什么的？选择内插入？

> ID：11164759
> 
> 赞同：1
> 
> 时间：2012-06-22T22:08:43.277
> 
> 标签：sql, tsql, coldfusion, code-injection

我的指示是在将变量传递到`insert`语句中时调用函数以防止代码注入。以下代码做了什么以及实际插入数据库的内容是什么？为什么这没有声明，而且里面`value`似乎有一个？`select``insert`

```
<CFQUERY NAME="Survey1" DATASOURCE="#APPLICATION.mainDSN#">
    INSERT INTO TWHSurvey_QA
    (Comment, QuestionID, SurveyID, Rank)
    <cfloop from="1" to="#SESSION.lastPage#" index="curPage">
        <cfloop from="1" to="#ArrayLen(SESSION.HQQuestionStruct.pagesQuestions[curPage])#" index="curQuestion">
            SELECT  
                <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Type eq 1>
                    <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans neq "">
                        '#SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans#',
                    <cfelse>
                        NULL,
                    </cfif>
                <cfelse>
                    <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Comment_Val neq "">
                        '#SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Comment_Val#',
                    <cfelse>
                        NULL,
                    </cfif>
                </cfif>

                #SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].QuestionID#,
                #getLatestSurveyID.SurveyID#,

                <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Type eq 2>
                    <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans neq "" AND SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans neq 0>
                        #SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans#
                    <cfelse>
                        NULL
                    </cfif>
                <cfelseif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Type eq 3>
                    <cfif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans eq "Yes">
                        1
                    <cfelseif SESSION.HQQuestionStruct.pagesQuestions[curPage][curQuestion].Cur_Ans eq "No">
                        0
                    <cfelse>
                        NULL
                    </cfif>
                <cfelse>
                    NULL
                </cfif>
            <CFIF curPage eq SESSION.lastPage AND curQuestion eq ArrayLen(SESSION.HQQuestionStruct.pagesQuestions[curPage])>
            <CFELSE> 
                UNION ALL
            </CFIF>
        </cfloop>
    </cfloop>
</CFQUERY> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:31:40.697

上面的答案很好地解释了 SQL 和 CFML 如何在这里协同工作。彼得的评论也很重要。

但是，它错过了您的部分问题。

您询问有关防止代码注入的问题，而您在这里没有做到这一点。我假设这些会话变量最初来自一个表单 - 基于它们的名称 - 这意味着注释变量可以包含任何内容，只需像这样直接在数据库中拍打它，就可以将自己暴露在代码注入中。

这里最快的胜利是永远不要将动态值硬编码到 SQL 字符串中，而是通过`<cfqueryparam>`. 这具有将更统一的 SQL 传递给 DB 的额外好处，因此 DB 有机会维护更少的已编译 SQL 语句，这也会给您带来轻微的（但通常是有形的）性能提升。

此外，在您的情况下，使用`<cfqueryparam>`标签可以简化/澄清是否传递 null 的逻辑：根据您的条件设置摘要变量，然后将该变量`null`用作`<cfqueryparam>`.

但是，这不是您唯一需要做的事情：它只是保护您免受 SQL 注入。在该评论字段中，您也可能对 JS 注入持开放态度。你也需要考虑处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:25:24.343

使用时`INSERT`有两种方式：

```
INSERT INTO yourTable (col1, col2)
VALUES (val1, val2) 
```

或者

```
INSERT INTO yourTable (col1, col2)
SELECT col1, col2
FROM table1 
```

您的查询是*Inserting* into your table `TWHSurvey_QA`，但它是*Selecting* variables ，但是您将要插入的某些值周围有 If 语句。

基本上它是选择变量：

```
INSERT INTO TWHSurvey_QA (Comment, QuestionID, SurveyID, Rank)
SELECT 
    If statement to decide the comment value
    , QuestionId
    , SurveyID
    , If statement to decide the Rank value 
```

# ruby-on-rails - 在 Ubuntu 12.04 上使用 RVM 来使用 Rails。当前未安装程序“rails”

> ID：11164765
> 
> 赞同：25
> 
> 时间：2012-06-22T22:09:20.057
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu, rvm

我按照官方网站上的安装指南从头开始安装 RVM。我安装了 Rails，创建了一个虚拟应用程序，一切正常。

我关掉了我的机器。

第二天早上，我再次打开机器（冷启动）并尝试`rails -v`从控制台运行“”，但我收到以下错误消息：

> sergio@Sergio-work ~ $ rails -v
> 
> 当前未安装程序“rails”。您可以通过键入安装它： sudo apt-get install rails

我可以正常运行`ruby -v`，并收到以下消息：

> sergio@Sergio-work ~ $ ruby​​ -v
> 
> ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]

我也可以正常运行`gem list`，输出：

```
sergio@Sergio-work ~ $ gem list

*** LOCAL GEMS ***

actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
erubis (2.7.0)
execjs (1.4.0)
faraday (0.8.0)
google_drive (0.3.0)
hike (1.2.1)
httpauth (0.1)
i18n (0.6.0)
journey (1.0.3)
jquery-rails (2.0.2)
json (1.7.3)
libv8 (3.3.10.4 x86_64-linux)
mail (2.4.4)
mime-types (1.18)
multi_json (1.3.6, 1.3.5)
multipart-post (1.1.5)
mysql2 (0.3.11)
nokogiri (1.5.0)
oauth (0.4.6)
oauth2 (0.7.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.2)
rvm (1.11.3.3)
sass (3.1.19, 3.1.18)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.4) 
```

为什么我的`rails -v`命令不再起作用？我曾经有过这种“hack”，我需要在终端中运行一个命令，“ `source something something`”一次，然后 rails 将被“识别”为实际命令。每个终端我都必须这样做一次，这意味着如果我关闭一个终端，我必须在打开一个新的窗口终端后重新运行它。

我似乎在 RVM 的帮助部分（我最初找到它的地方）上再也找不到这个命令了，而且由于我对 Linux 有点陌生，这些高级配置对我来说很复杂。

有任何想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-22T22:12:43.490

您需要`source ~/.rvm/scripts/rvm`在尝试使用 Rails 之前输入。

我相信 RVM 安装建议将这条线（或类似的东西）放在你的`.bashrc`.

在终端中运行以下命令：

```
echo "source \$HOME/.rvm/scripts/rvm" >> ~/.bashrc 
```

这会将行附加`source \$HOME/.rvm/scripts/rvm`到`.bashrc`文件的末尾。

这样做可以确保每次打开终端时都能正确加载 RVM。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-23T00:42:54.117

正确的解决方法是[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

您不应该添加`source ~/.rvm/scripts/rvm`，`~/.bashrc`您可以在此处找到更多详细信息：[https ://rvm.io/support/faq/#shell_login](https://rvm.io/support/faq/#shell_login)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T18:56:58.230

这是另一种可能性。这发生在我身上。一切都运行良好，并且 sudo'ed 进入了根目录。我让航站楼开着，几天后又回来了。

铁轨不起作用。就像你说的那样，它存在于宝石中。事实证明，我只需要退出 root 用户并返回到我的普通用户，rails 就可以了。

# javascript - 调用使用 jquery 选择的元素的方法

> ID：11164767
> 
> 赞同：1
> 
> 时间：2012-06-22T22:09:34.557
> 
> 标签：javascript, jquery, function, object, methods

我有一个具有用户定义方法的元素。该元素是作为更大对象的一部分创建的，并在加载文档时插入。如果我通过直接从对象中寻址元素来调用该方法，我可以随时调用该方法。

元素是`tabs[0].bubbles[0].element`，方法是`.expand()`

（这个对象中有多个元素，每个元素都有自己的 .expand() 方法）

所以，线

```
tabs[0].bubbles[0].element.expand(); 
```

调用该元素的方法。但是，当发生特定事件时，会调用一个函数，我可以从中选择元素，如下所示：

```
bubble = $(this).parent(); // the bubble element is the event handlers parent 
```

然而，线条

```
bubble.expand();
// or 
$(bubble).expand();
// or
$(bubble)[0].expand(); 
```

不要调用该方法。

线

```
tabs[0].bubbles[0].element.expand(); 
```

确实调用了该方法。但是，我不能使用这一行来调用该方法，因为有许多不同的元素，并且我无法从函数中找到数组元素的索引号。

我认为我可能没有选择正确的元素，但是

```
($(bubble)[0] === $(tabs[0].bubbles[0].element)[0]) 
```

返回 true （显然这只发生在`bubble`应该对应的元素时`tabs[0].bubbles[0].element`）。

`tabs[0].bubbles[0].element`不等于`$(bubble)[0]`or `$(bubble)[0]`。

如何从使用 JQuery 选择的函数中调用该方法？

***编辑***

我认为问题在于我如何创建对象。对象的元素字段是在这样的构造方法中创建的。

```
this.element = $('<div class="bubble ' + this.type + '">\
    <div class="bubbleCentre ' + this.state + ' "> \
        <img class="bubbleIcon" src="img/dash/' + this.icon + '"> \
        <span class="status">' + text + '</span> \
    </div> \
</div>'); 
```

该`.expand()`函数是这样创建的。

```
this.element.expand = function ()
{
    // method
    alert('method executing');
} 
```

我可以这样调用方法

```
tabs[0].bubbles[0].element.expand(); 
```

但`bubble.get(0).expand();`或`bubble.expand();`什么都不做。

但是，如果我这样定义方法：

```
this.element.get(0).expand = function ()
{
    // method
    alert('method executing');
} 
```

我现在可以按照您的期望调用该方法

```
bubble.get(0).expand(); // expands bubble as you would expect 
```

当方法被调用时，这就足够了。似乎应该有一种更直接的方法来做到这一点。除了在事件回调函数中选择气泡外，我不明白为什么需要涉及 jQuery。有什么想法吗？

我尝试在定义时从字符串周围删除 $() （并在定义方法时`.element`取出），但是无论我尝试什么方式，我都无法调用该方法。`.get(0)``.expand()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:41:25.313

问题在于元素是如何创建的。

我现在创建这样的元素：

```
this.element = document.createElement('div');                                                               // first create DOM element

// append child elements
$(this.element).addClass('bubble ' + this.type);
$('<div class="bubbleCentre ' + this.state + ' "></div>').appendTo(this.element)                            // append centre
.append('<img class="bubbleIcon" src="img/dash/' + this.icon + '" title="' + type.capitalize()  + '">')     // append icon to centre
.append('<span class="status">' + text + '</span>')                                                         // append status to centre
.parent().append('<div class="subbubbles"><div style="position: relative;"></div></div>');                  // append subbubbles box 
```

我这样定义方法：

```
this.element.expand = function ()
{
    // method running
    alert('method running');
} 
```

我这样调用方法：

```
bubble.get(0).expand(); 
```

这一切似乎都奏效了。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:56:52.850

如果您想为匹配集的每个元素调用一个方法和/或获取最后一个匹配的值，您可以创建一个新的 jquery 函数。

```
$.fn.invoke = function(name) {
    var args = Array.prototype.slice.call(arguments, 1);
    var ret;

    this.each(function() {
        ret = this[name].apply(this, args);
    });

    return typeof ret !== 'undefined' ? ret : this;
}; 
```

[http://jsfiddle.net/eQLHT/](http://jsfiddle.net/eQLHT/)

# android - 如何对长格式 mp3 文件进行编码，以便它们不会在音频中的随机位置停止和重置？

> ID：11164768
> 
> 赞同：0
> 
> 时间：2012-06-22T22:09:38.967
> 
> 标签：android, encoding, mp3, reset

我有这种情况，我用 iTunes、FFmpeg 或 LAME 编码的 mp3 都有一个问题，如果你将它们流式传输到 Android 设备，它们几乎总是会在 15-25 分钟左右停止播放。当我再次按播放时，它会重置回开始。

我正在寻找的是一种可以纯粹在编码中实现的解决方案。这可能是 Android 的股票音频播放器的软件错误，但我对此几乎没有控制权。

mp3 一般是 45 分钟左右。我以 64 kbps、44.1 kHz 和立体声对它们进行编码。有什么我想念的吗？

# .htaccess - 将查询字符串 url 重定向到非查询字符串

> ID：11164770
> 
> 赞同：0
> 
> 时间：2012-06-22T22:09:42.833
> 
> 标签：.htaccess, redirect, query-string

我正在尝试重定向 /cgibin/webdata_pro.pl?_cgifunction=form&_layout=jobs.pl

至

[http://compliancesearch.com/compliance_jobs.html](http://compliancesearch.com/compliance_jobs.html)

在jobs.pl之后通常有一个查询字符串。我尝试了很多东西，包括：

```
RewriteEngine on 
RewwriteRule /cgibin/webdata_pro.pl?_cgifunction=form&_layout=jobs.pl(.*) http://compliancesearch.com/compliance_jobs.html [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:51:58.760

You can't match against the query string in a RewriteRule. You need to use the %{QUERY_STRING} variable.

```
RewriteEngine on
RewriteCond %{QUERY_STRING} _cgifunction=form&_layout=jobs.pl
RewriteRule ^cgibin/webdata_pro.pl http://compliancesearch.com/compliance_jobs.html? [R=301,L] 
```

The better place to do this, however, is probably in the `webdata_pro.pl` script.

# javascript - 使用对象构造函数管理 cssClasses 时出错

> ID：11164772
> 
> 赞同：0
> 
> 时间：2012-06-22T22:10:01.483
> 
> 标签：javascript, oop, constructor, object-literal

我编写了一个对象来使用 javascript 管理 css 类选择器。

使用文字对象正在工作，但不使用另一种 OOP 方式。

对象字面量

```
var className = {
    getList : function(element,cssClass){
        return element.className.split(' ');
    },
    has : function(element,cssClass){
        var classList=element.className.toLowerCase().split(' ');
        return classList.has(cssClass.toLowerCase());
    },
    add : function(element,cssClass){
        if(className.has(element,cssClass)==false){
            element.className+=' '+cssClass;
        }
    },
    remove : function(element,cssClass){

        var index = element.className.toLowerCase().split(' ').indexOf(cssClass.toLowerCase());

        if( index > -1 ){ //found
            var classList=element.className.split(' ');

            classList.splice(index,1);
            element.className=classList.join(' ');
        }
    }
} 
```

构造对象。（不工作）

```
var cssClass = new function(element){
    var that=this;

    this.getList = function(){
        return element.className.split(' ');
    }

    this.has = function(className){
        var classList=element.className.toLowerCase().split(' ');
        return (classList.indexOf(className.toLowerCase())>-1);
    }

    this.add = function(className){
        if(that.has(className)==false){
            element.className = className+' '+element.className;
        }
    }

    this.remove = function(className){

        var index = element.className.toLowerCase().split(' ').indexOf(className.toLowerCase());

        if( index > -1 ){ //found
            var classList=element.className.split(' ');

            classList.splice(index,1);
            element.className=classList.join(' ');
        }
    }
} 
```

我收到此错误：

`cssClass(d1).add('class1');`

行：2 消息：“'[object Object]' 不是函数（评估'cssClass（d1）'）”sourceId：4600193304

奖金问题：这是使用 javascript 管理 css 类的最佳方式吗？有标准的api吗？我应该使用单独的普通函数来写这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:09:42.783

您需要`new`从`new function`一开始就删除，因为您正在做的是创建一个构造函数，然后立即调用它。相反，您需要在将要使用的元素传递给构造函数时调用它。例如

```
var cssClass = function(element) {
...
} 
```

接着：

```
new cssClass(d1).add('class1'); 
```

这是一个 JSFiddle：http: [//jsfiddle.net/55jkr/1/](http://jsfiddle.net/55jkr/1/)

要回答额外的问题，处理 CSS 类的最佳方法是使用标准库，例如 jQuery，因为这些库将在初始实现期间为您节省时间，并且已经过测试。如果这不是一个选项，那么你的方法很好。

# php - PHP Cookie 未正确过期

> ID：11164773
> 
> 赞同：0
> 
> 时间：2012-06-22T22:10:06.347
> 
> 标签：php, cookies, setcookie

我相信我有一个 cookie，它设置为在创建后 1 秒过期（用于测试目的）。然而，这需要 5 秒。如果我将它设置为 0.5，它会下降到大约 3 秒。我已将脚本简化为基础，但仍然存在此问题。

```
 <?php setcookie("test", "daily_deals_cookie", time() + 1); ?>
 <?php
    if (!isset($_COOKIE['test'])) {
       echo "COOKIE NOT SET";
    } else {
       echo "<h3 style=\"font-family: sans-serif; \">Please come back again!</h3>";
    }
  ?> 
```

有人看到我在这里缺少的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:25:12.533

服务器和最终用户计算机之间的时间差。最终用户计算机的处理队列。

测试时，尽量保持 15 秒左右，这样你的浏览器可以在队列中更准确的时间修补它。

Cookie 生命周期是一个相当低优先级的管理过程，很容易被撞到后面以重绘视口或其他业务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:46:52.840

当谈到 Web 开发时，您通常不得不期望任务不会在被要求时完全完成。这可能是由于许多原因造成的，例如客户端机器上的负载，我发现的一个大问题是 settimeout 通常不会在请求的时间间隔内调用。

因此，您应该在您的应用程序中构建一些灵活性，以处理浏览器上的时间延迟。

# javascript - 拉斐尔没有附加到 div

> ID：11164785
> 
> 赞同：0
> 
> 时间：2012-06-22T22:11:05.257
> 
> 标签：javascript, raphael

我正在尝试使用 Raphael 建立一个网站。[你可以在这里看到我的网站是什么样子](http://i.imgur.com/aNZph.png)（我使用 Google Chrome 检查器突出显示画布的制作位置）。我创建了一个 id 标签为“clock”的 div（在示例图像中为红色）。以下是javascript代码。

```
$(function() {
    var paper = Raphael('clock', 50, 50, 0, 0);
    var c = paper.circle(17, 17, 15);
}); 
```

拉斐尔做错了几件事。首先，它不在 div 中，也不在我告诉它的大小中。其次，所有的 xml 代码都放在页面底部`</body>`标签之前。第三也是最奇怪的是，圆圈出现在每一页上。即使是那些没有“圆圈” div 的。

我不知道这是否重要，但这个网站是在 liftweb 框架上开发的。我注意到它如何更改文件中的字符，因此我使用了外部托管的 Raphael 文件。它没有任何区别。

谢谢阅读

# data-structures - 窗口管理器使用什么数据结构将鼠标在特定点的点击映射到窗口？

> ID：11164786
> 
> 赞同：1
> 
> 时间：2012-06-22T22:11:12.223
> 
> 标签：data-structures, window-managers

我目前正在准备关于串树[（Edelsbrunner、Haring 和 Hilbert）](http://www.cs.duke.edu/~edels/Papers/1986-J-05-RectangularPointLocation.pdf)的演示文稿，并且正在努力寻找这种数据结构的实际应用。我的教授建议，窗口管理器使用串树来查找鼠标单击的目标窗口。

这对我来说似乎有点矫枉过正，我会认为窗口管理器使用列表来表示屏幕上的窗口。

二维串叉树可以在 O(n log n) 时间内构建，并且需要 O(log^2 n) 时间来查找哪个矩形包含给定点。n 是存储在树中的矩形的数量。

# c++ - 如何在 C++（无 .NET）中将 PDF 转换为位图（光栅化）

> ID：11164787
> 
> 赞同：0
> 
> 时间：2012-06-22T22:11:33.817
> 
> 标签：c++, pdf, bitmap, rasterize

如何使用 C++ 以一种适用于 Mac 和 Windows 的方式将 PDF 转换为位图（如像素数组，而不是 .bmp 文件格式）？在 Mac 上，我也许可以使用 CoreGraphics 来做到这一点，但这并没有给我一个 Windows 解决方案。我发现了许多声称需要 .NET 的库，但这也不是一种选择。

我需要：

*   支持多页 PDF 并为我可以处理的每个图像获取位图
*   在 Windows 和 Mac 上执行此操作。我在 Mac 上有一个解决方案，所以在最坏的情况下，一个仅限 Windows 的解决方案是可以接受的。
*   不与 GPL 许可证绑定
*   保持尺寸尽可能小；这是从浏览器插件中使用的，因此调用外部应用程序或具有大量依赖项将是很大的缺点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:44:43.197

我不知道在 Windows 上，但在 Mac OS X 上，系统内置了对呈现 PDF 的支持。您可以简单地创建一个[`NSImage`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208-SW16)由[`NSPDFImageRep`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPDFImageRep_Class/Reference/Reference.html).

# javascript - 当我的函数完成时，使用 JavaScript（或 jQuery）触发自定义事件

> ID：11164789
> 
> 赞同：7
> 
> 时间：2012-06-22T22:11:39.463
> 
> 标签：javascript, jquery, node.js, events, eventemitter

我不想在 JS 中嵌套回调，而是想触发并监听我自己的自定义事件。我不需要或不想访问 DOM。这是一个例子：

```
function doSomething(){
//...
$.trigger('finished-doSomething'); //fire the event 'finished-doSomething'
}

//when the event 'finished-doSomething' is fired -> execute the function in the second  param 
$.live('finished-doSomething', function(){
   alert("I finished-doSomething");
}); 
```

是否可以使用普通的 JavaScript 代码或像 jQuery 这样的库来做到这一点？如果不是，那么避免嵌套回调的好方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T22:13:53.800

好吧，您可以在某些常见元素上使用自定义事件，例如`document.body`.

```
// Subscribe
$(document.body).on('nifty.event', function() {
    // Handle it
});

// Publish
$(document.body).trigger('nifty.event'); 
```

[无偿的活生生的例子](http://jsbin.com/ujukuq)| [来源](http://jsbin.com/ujukuq/edit)

或者为了与 DOM 完全断开连接，有几个 pub/sub jQuery 插件，[比如这个](https://gist.github.com/661855).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:57:10.630

```
$('#foo').on('custom', function(event, param1, param2) {
  alert(param1 + "\n" + param2);
});
$('#foo').trigger('custom', ['Custom', 'Event']); 
```

来源：[http ://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# c# - CompositionContainer 通过 DirectoryCatalog 加载错误的目录

> ID：11164797
> 
> 赞同：1
> 
> 时间：2012-06-22T22:12:26.657
> 
> 标签：c#, .net, mef

我在 MEF 的组合容器和目录目录中遇到了一个奇怪的问题，我将完整路径传递给包含程序集的文件夹：

在 C:\Program Files\MyCompany\MyApp\Bin

> 程序集A：ExportedTypeA、ExportedTypeB
> 
> 组装 B：BaseExportedTypeA、BaseExportedTypeB

从另一个位置执行 (C:\users\Me\dev\project\foo\bar\bar2\bin\debug\OtherApp.Exe)

在我调用的应用程序中：

```
string ProviderPhysicalPath = @"C:\Program Files\MyCompany\MyApp\Bin";
using (DirectoryCatalog catalog = new DirectoryCatalog(ProviderPhysicalPath))
using (CompositionContainer container = new CompositionContainer(catalog))
{
     container.ComposeParts(this);
} 
```

在`container.ComposeParts(this)`我得到以下异常：

> 合成产生了一个单一的合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 找不到路径“C:\USERS\Me\dev\project\foo\bar\bar2\BIN\DEBUG\BIN\”的一部分。

令人困惑的是两个部分：

1.  为什么它在我没有指定的目录中查找？
2.  为什么要将 \bin\ 附加到执行目录来执行此操作？

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:15:57.523

你可能会遇到这个问题：

> 使用 DirectoryCatalog 或将路径传递给 AssemblyCatalog 构造函数时，MEF 将尝试在默认加载上下文中加载程序集。但是，如果程序集不在探测路径或 GAC 中，则这是不可能的，MEF 将在加载源上下文中加载它们。

`@"C:\Program Files\MyCompany\MyApp\Bin"`可能不在探测路径中。我不能说我经历过这个问题或探索了很多。有关详细信息，请参阅 Daniel Plaisted 的博客，向下滚动到“装配负载问题”部分

[如何调试和诊断 MEF 故障](http://blogs.msdn.com/b/dsplaisted/archive/2010/07/13/how-to-debug-and-diagnose-mef-failures.aspx)

# php - 会话不粘在linux服务器上

> ID：11164798
> 
> 赞同：1
> 
> 时间：2012-06-22T22:12:27.063
> 
> 标签：php, session

我刚刚将开发站点移至我的 linux 服务器进行生产，但会话似乎并没有持续很长时间。我猜这是服务器设置而不是 php，因为它与 plesk 面板做同样的事情。每当执行脚本时，会话似乎都未设置。我在错误日志中什么也没看到，所以不确定它是什么。在 wamp 上一切正常。无论如何，我上传了 wamp 服务器中的 php.ini 文件，因为它具有我需要的所有设置，并且所有设置都在本地主机上工作。不知道问题是什么，这是我在投入生产之前必须解决的最后一件事。并且添加会话正在开始，因为它们会持续一段时间，只是不要长时间停留。

这是我的登录脚本的相关部分，以防万一代码有问题：

```
 // if login is ok then we add a cookie 
if($flag == 0) {
 $pass = htmlspecialchars(mysql_real_escape_string($_POST['pass']));
 $username = htmlspecialchars(mysql_real_escape_string($_POST['username']));

  $_SESSION['username']=$username;
  $_SESSION['password']=$pass; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:14:45.000

在 php.ini 文件中为 session.gc_maxlifetime 设置更高的值。

你做了 session_start(); 某处？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:17:37.750

请确保您使用 session_start() 开始了会话（只是为了确定）

您应该查看设置 (PHP.ini/phpinfo())： session.cookie_lifetime 它定义了 cookie 的生命周期以跟踪会话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T03:11:39.713

确保启用 cookie

如果您使用的是 Firefox，请使用 firebug/cookie monster 检查您的 Cookie。

确保在任何输出开始之前使用 session_start()

# random - Big Server 在没有有效负载的情况下随机启动滞后

> ID：11164801
> 
> 赞同：0
> 
> 时间：2012-06-22T22:12:35.717
> 
> 标签：random, lag, gentoo

我有一台带有真正大型硬件的服务器。（32 核，24Go Ram，MegaSAs Raid....）。

它正在运行带有 memcached 的 LAMP 服务器。它正在运行一个新的和最新的 gentoo 服务器，带有自定义内核 在某些“随机”时间（我说随机，因为这似乎与 loadAvg、磁盘/io 峰值或客户端数量无关）服务器似乎落后。

交付简单的资产文件可能会花费很多秒，例如 js Mysql 似乎冻结了，有很多线程，都停在“发送数据”上。

几秒钟后，一切都可以恢复正常。很多监控，但这里没有什么明显的。没有网络错误，DNS 配置正常，没有磁盘瓶颈......

在这种情况下，有什么好怀疑的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:18:17.083

CPU 风扇（对于 32 个内核来说加热太少，因此速度变慢），或者 SAS 出现一些故障并从中恢复。尝试将其置于省电模式。也许你有不可靠的硬盘，例如不是 SAS，而是一些具有省电功能的绿色桌面版。

# firefox - Firefox 动画硬件加速像素化边缘

> ID：11164806
> 
> 赞同：2
> 
> 时间：2012-06-22T22:13:06.887
> 
> 标签：firefox, animation, css

似乎Firefox上的css动画正在像素化元素的边缘：

这是一个简化的案例 -

```
.test {
    width: 100px;
    height: 100px;
    border-radius: 0 0 14px 14px;
    left: 150px;
    top: 150px;
    background-color: black;
    -webkit-animation: move 4s ease 0ms both infinite;
    -moz-animation: move 4s ease 0ms both infinite;
}
@-moz-keyframes move {
    from { -moz-transform: rotate(0deg); }
    to { -moz-transform: rotate(10deg); }
}
@-webkit-keyframes move {
    from { -webkit-transform: rotate(0deg); }
    to { -webkit-transform: rotate(10deg); }
}
```

```
<div class="test"></div>
```

这在 webkit 上看起来不错，但在 Firefox 中就废了……有人有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T22:22:42.427

尝试将其添加到元素的样式中：

```
outline: 1px solid transparent; 
```

这是一个非常奇怪的解决方法，但应该适用于您的情况。

# python - 为什么 virtualenv 不创建一个裸环境？

> ID：11164807
> 
> 赞同：4
> 
> 时间：2012-06-22T22:13:12.743
> 
> 标签：python, virtualenv

我刚开始使用virtualenv，直到昨天才正常工作。现在，似乎无处不在，它无法区分我的系统环境和我设置的任何环境。例如，

```
$ virtualenv some_env
New python executable in some_env/bin/python
Installing setuptools............done.
Installing pip...............done.

$ source some_env/bin/activate
(some_env)
$ yolk -l
Box2D           - 2.0.2b2      - active 
Django          - 1.4          - active 
Fabric          - 1.3.3        - active 
Markdown        - 2.1.1        - active 
[...and so on, listing all my system installs] 
```

首先，蛋黄甚至不应该起作用。最初，我将 yolk 安装到 env 中，它只会显示大约 5 个包。现在就是一切。

另外，在有人问之前，我有最新版本的 virtualenv，所以 --no-site-packages 是默认的。如果我明确使用该选项，我会得到相同的结果。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:21:55.003

virtualenv 的工作原理是将 bin 文件夹放在`PATH`环境变量开头的 virtualenv 中，这样每当您运行 python 时，它就会重新路由到有限的 python 环境。

但是，在您的情况下，我怀疑蛋黄脚本可能已安装到`/usr/local/bin/`或类似的位置-激活 virtualenv 后仍然可以访问。该脚本可能在顶部有一个指向您的全局 Python 解释器的 shebang，因此将在您的全局 Python 环境而不是您的 virtualenv 中运行。

如果您要在您的 virtualenv 中安装 yolk，那么该版本的 yolk 脚本将在路径中获得优先权，并且一切都会按预期工作。

# ruby-on-rails - Ubuntu 12.04 上的 Ruby on Rails 分段错误

> ID：11164808
> 
> 赞同：1
> 
> 时间：2012-06-22T22:13:20.193
> 
> 标签：ruby-on-rails, ruby, ubuntu, openssl

```
$ rails new rails_example 
```

...

```
run  bundle install
/usr/lib/ruby/1.8/openssl/buffering.rb:238: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

Aborted (core dumped)
Fetching gem metadata from https://rubygems.org/......... 
```

我应该跟踪我尝试过的事情。最近的是：

```
gem install bundler
gem pristine --all 
```

Ubuntu 12.04，红宝石 1.8.7，导轨 3.2.4.rc1

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:14:29.053

没有太多可做的，但希望您使用 ruby​​ 管理器（RVM 或 rbenv 和 ruby​​-build）来安装 rubies，而不是通过 apt-get。将 Rails 3.2 与 Ruby 1.8.7 一起使用并不是一个好主意。

我整理了一份用于在 Ubuntu 12.04 上构建 Rails 开发设置的步骤清单。使用 rbenv，我将 ruby​​ 1.8.7、1.9.2 和 1.9.3 并排安装并运行 Rails。您可以同样使用 RVM - 您的选择。也许这可以帮助您清除一些事情。请务必查看“安装公共库”部分......也许你错过了那里的一些东西。

[https://gist.github.com/2706272](https://gist.github.com/2706272)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T04:57:30.080

我会推荐以下步骤：

1.  检查实际执行的 ruby​​ 和 gem 二进制文件的版本：

    ```
    $ which ruby
    /usr/bin/ruby

    $ which gem
    /usr/bin/gem 
    ```

2.  通常这些是指向实际可执行文件的链接。要检查链接的可执行文件：

    ```
    $ ls -o /usr/bin/gem
    lrwxrwxrwx 1 root 21 Dec 11 10:14 /usr/bin/gem -> /etc/alternatives/gem
    $ ls -o /etc/alternatives/gem
    lrwxrwxrwx 1 root 17 Dec 11 11:38 /etc/alternatives/gem -> /usr/bin/gem1.9.3
    $ ls -o /usr/bin/gem1.9.3
    lrwxrwxrwx 1 root 8 Nov 27 02:48 /usr/bin/gem1.9.3 -> gem1.9.1
    $ ls -o /usr/bin/gem1.9.1
    -rwxr-xr-x 1 root 547 Nov 27 02:50 /usr/bin/gem1.9.1 
    ```

    在这种情况下，实际执行的二进制文件是 /usr/bin/gem1.9.1，它是绿色的（在我的屏幕上）。**对红宝石**做同样的事情

***   如果您没有看到上述配置，请使用 ln（链接）实用程序将 /etc/alternatives/gem 链接到 /usr/bin/gem1.9.3。请参阅 ln 实用程序的联机帮助页。** 

 **干杯**

# php - PHP - Facebook API（无效的 OAuth 访问令牌签名）

> ID：11164809
> 
> 赞同：-1
> 
> 时间：2012-06-22T22:13:20.553
> 
> 标签：php, facebook, api, authentication, sdk

我正在尝试使用 facebook API 在我的粉丝页面中上传照片。我下载了准备好的代码（[https://www.box.com/s/a116a94bff8cb2a46634](https://www.box.com/s/a116a94bff8cb2a46634)）。它工作得很好，但是，当我编辑并设置我的设置来上传照片时，我有这个错误......

**注意：未定义的变量：第 101 行 /home/sistemasfox/www/enc/face/uploadtopage.php 中的 fanpage_token 致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 543 行的 /home/sistemasfox/www/enc/face/library/facebook.php 中抛出**

页面ID：239132959534036 / 相册ID：241768162603849

我从这里复制了令牌：face book.com/tools/access_token/

我在这里做测试：http: [//sistemasfox.com.br/enc/face/uploadtopage.php](http://sistemasfox.com.br/enc/face/uploadtopage.php)

是否需要在 facebook 应用程序中指定一些配置？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:35:09.853

复制并粘贴第 63 行`uploadtopage.php`，粘贴后将变量从 更改`$access_token`为`$fanpage_token`

看看有没有效果？

IE：

`$access_token = 'AAAAARH40cT0BANFh5V7Cn8dlXciZCbonSmGQZCeX3kUKIx2OMmvrqKUsHIBBj6bYi2vV25lMj6ZA5UDOaJpAxJXBEMOjZAcZD';`

`$fanpage_token = 'AAAAARH40cT0BANFh5V7Cn8dlXciZCbonSmGQZCeX3kUKIx2OMmvrqKUsHIBBj6bYi2vV25lMj6ZA5UDOaJpAxJXBEMOjZAcZD';`

# tfs - TFS 构建工作流 InvokeProcess PsExec

> ID：11164811
> 
> 赞同：0
> 
> 时间：2012-06-22T22:13:34.860
> 
> 标签：tfs, build-process, build-automation, psexec, automated-deployment

我试图在从 TFS 构建工作流构建期间自动运行批处理文件。我添加了一个 InvokeProcess 活动，其中包含以下内容：

```
 Arguments: "\\" + agent + " /accepteula -u username -p password -d C:\HelloWorld.bat"
    FileName: "PsExec.exe"
    OutputEncoding: System.Text.Encoding.GetEncoding(System.Globalization.CultureInfo.InstalledUICulture.TextInfo.OEMCodePage)
    WorkingDirectory: "C:\PSTools" 
```

我确保构建代理和构建控制器都可以访问有问题的“代理”。我还确保 PsExec.exe 位于定义的“C:\PSTools”文件夹中。

执行构建时出现错误“找不到文件：PsExec.exe”有谁知道在这种情况下会导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:25:58.173

您可以尝试使用 FileName: "C:\PSTools\PsExec.exe"

# python - 丢番图方程实现

> ID：11164812
> 
> 赞同：1
> 
> 时间：2012-06-22T22:13:38.080
> 
> 标签：python

我被要求做以下事情：如果有可能购买 x、x+1、...、x+5 套 McNuggets，对于一些 x，那么有可能购买任意数量的 McNuggets >= x，给定McNuggets 有 6 包、9 包和 20 包。编写一个迭代程序，找出不能以确切数量购买的最大数量的 McNuggets。

这是我想出的代码，但它陷入了无限循环：

```
count = 0
n = 1
while count < 6:
    six_consequtive = True
    for a in range(n):
        for b in range(n):
            for c in range(n):
                if 6*a + 9*b + 20*c == n:
                    six_consequtive = False
    if six_consequtive:
        count += 1
    else:
        count = 0

    n += 1

print("Largest number of McNuggets that cannot be bought in exact quantity: %d." % (n - 5)) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:27:32.023

问题出在哪里似乎很清楚：只有`count`在可以获得确切数量时才增加。任何时候你不增加`count`你都会将它重置为 0，并且循环只会在超过 6 时停止。这可能需要一段时间。

你写了一个三重嵌套`for`循环，所以越大`n`，这些循环越慢。如果您让它运行足够长的时间，它可能会成功并在某天完成；但是您的基本算法太慢了。

您可以通过使用 print 语句检测循环来了解更多信息。当我尝试它时，我没有得到输出；我认为这可能是由于缓冲问题，所以我编写了一个简单的输出函数，它输出一个字符串，然后刷新以确保我可以立即看到输出。

这是您编辑的程序：

```
import sys

def out(s):
    sys.stdout.write(s + "\n")
    sys.stdout.flush()

count = 0
n = 1
while count < 6:

    six_consecutive = True
    for a in range(n):
        for b in range(n):
            for c in range(n):
                #out("a: %d b: %d c: %d  n: %d" % (a, b, c, n))
                if 6*a + 9*b + 20*c == n:
                    six_consecutive = False

    out("n == %d  count == %d  six_consecutive == %s" %
            (n, count, str(six_consecutive)))

    if six_consecutive:
        count += 1
    else:
        count = 0

    n += 1

print("Largest number of McNuggets that cannot be bought in exact quantity: %d." % (n - 5)) 
```

我还修正了“six_consecutive”的拼写。

那么，你应该如何解决这个问题？我认为你应该把它扔掉，用更好的算法重写。您可能想查看其他人如何解决此问题或类似问题。当给定一组不同面额的硬币时，这让我觉得与如何找零的经典问题非常相似。

注意：找零的经典问题通常假设一组合理的硬币，包括一个价值为 1 的硬币。一个简单的“贪婪”算法，从最大的硬币开始，向下工作，总是会成功。这有点有趣，因为“硬币”集合很奇怪，并且有些值无法找到，所以也许经典的硬币问题并不像我想象的那么重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:28:12.737

对不起，我刚刚意识到我的布尔值颠倒了。循环开始时的第一个 Six_consequtive 应分配为 False，第二个为 True。再次，我很抱歉这个愚蠢的问题。

# ruby-on-rails-3 - AuthLogic 似乎为一个请求多次更新用户记录

> ID：11164820
> 
> 赞同：5
> 
> 时间：2012-06-22T22:14:13.907
> 
> 标签：ruby-on-rails-3, session, authlogic

对于一个操作请求，我看到大约 6 个计数似乎与用户模型的 AuthLogic 相关记录更新。我想知道这是否正常，或者是否有其他人遇到过这种情况，我该怎么办。我仍在尝试追查其原因，但我高度怀疑它与 AuthLogic 相关。

正如您所看到的，对记录的更新非常缓慢，并且所有这些都发生在一个请求中是令人担忧的！

```
SQL (0.1ms)  BEGIN
  AREL (0.6ms)  UPDATE `users` SET `last_request_at` = '2012-06-22 22:02:43', `perishable_token` = 'rGvsUjfDYw4lrFk6bYJu', `updated_at` = '2012-06-22 22:02:43' WHERE `users`.`id` = 6697
  SQL (91.8ms)  COMMIT
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 6697 LIMIT 1
  SQL (0.2ms)  BEGIN
  AREL (0.5ms)  UPDATE `users` SET `last_request_at` = '2012-06-22 22:02:43', `perishable_token` = 'CHSKWhMmNHB5h8HeAWI', `updated_at` = '2012-06-22 22:02:43' WHERE `users`.`id` = 6697
  SQL (43.2ms)  COMMIT
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 6697 LIMIT 1
  SQL (0.2ms)  BEGIN
  AREL (0.5ms)  UPDATE `users` SET `last_request_at` = '2012-06-22 22:02:44', `perishable_token` = 'yDEGFCy4JrKrLVOKhwP', `updated_at` = '2012-06-22 22:02:44' WHERE `users`.`id` = 6697
  SQL (43.4ms)  COMMIT

User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 6697 LIMIT 1
  SQL (0.1ms)  BEGIN
  AREL (0.3ms)  UPDATE `users` SET `last_request_at` = '2012-06-22 22:02:44', `perishable_token` = 'TSrzZCKL2C0R5BPJAkVA', `updated_at` = '2012-06-22 22:02:44' WHERE `users`.`id` = 6697
  SQL (36.6ms)  COMMIT
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 6697 LIMIT 1
  SQL (0.1ms)  BEGIN
  AREL (0.3ms)  UPDATE `users` SET `last_request_at` = '2012-06-22 22:02:44', `perishable_token` = 'hfRuoHYvIQZCdd8obtA', `updated_at` = '2012-06-22 22:02:44' WHERE `users`.`id` = 6697
  SQL (38.4ms)  COMMIT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T22:31:20.367

我四处寻找并找到了解决方案：

> `UserSession.last_request_at_threshold = 10.minutes`

据我了解设置这个的地方 - 在 UserSession 中。（这也可以在初始化程序中设置，如 authlogic.rb）

有多个更新的原因是每次您对 current_user 进行某种检查时，它都会更新**last_request_at 。**例如，当您将登录状态用于某种工作流程时 - 即仅为已登录的用户显示菜单项或页面的一部分。

一旦您将 last_request_at 设置为更大的阈值 - 您就可以摆脱这些更新。对我来说，摆脱了大约 10 个更新语句 - 每个大约需要 0.5 毫秒 - 不是很大，但考虑到我有 100 个用户（内部应用程序） - 一直在使用这个应用程序，我不需要跟踪他们的最后一个请求（他们要么在大楼内），我可以限制它甚至完全停止跟踪它 - 在一天中，我不需要对数据库进行数十万次额外更新 -并使阅读日志更容易。

**更新**

即使您将其设置为仅 1 秒 - 这仍然会有所帮助 - 因为现在它只会在每个请求中更新一次（假设您的应用程序没有超过一秒的请求 - 如果您这样做可能是另一个迹象问题）即使您在同一个请求中多次检查 current_user。我怀疑是否有人可以在同一秒内执行多个不同的请求。

希望这可以帮助

PS：这是让我走上正确道路的 q：[AuthLogic perishable_token resets on each request](https://stackoverflow.com/questions/2901644/authlogic-perishable-token-resets-on-every-request)

# actionscript-3 - Event.COMPLETE 或 Event.INIT 用于顺序加载程序

> ID：11164828
> 
> 赞同：0
> 
> 时间：2012-06-22T22:14:58.743
> 
> 标签：actionscript-3, loader

所以，我正在制作自己的顺序加载程序。它对 SWF、FLV 和图像文件具有不同的功能。现在，为了使其顺序化（一个接一个地加载），我将使用 loader.contentLoaderInfo 事件，这两个事件称为 COMPLETE 和 INIT。经过一番[阅读](http://www.republicofcode.com/tutorials/flash/as3loader/)，我了解到这两个事件在加载的“完整性”方面都有一些弱点。INIT 似乎是图像的更好选择，而 COMPLETE 则适用于 SWF（我不确定哪个更适合 FLV）。差异很小，但我担心未来的问题。你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:34:14.623

我使用完整事件作为图像已为批处理图像加载器加载的标志，我将其作为演示项目放在一起尝试为游戏预加载数据，代码可以在这里看到（抱歉项目命名不佳，他们总是从别的东西开始:)

[http://www.shaunhusain.com/DrawTextRandomly/srcview/](http://www.shaunhusain.com/DrawTextRandomly/srcview/)

演示在这里：[http ://www.shaunhusain.com/DrawTextRandomly/](http://www.shaunhusain.com/DrawTextRandomly/)

在 src/util/imageLoading/BatchImageLoader.as

我基本上设置了这个类，所以我会给它一个从中加载图像的文件夹和一个要填充的集合，然后告诉它图像集的开始和结束编号是什么，这些图像是由 Blender 使用它的默认文件命名方案生成的每帧使用 0 填充计数，因此我能够使从搅拌机导出的动画轻松加载到集合中，以后可以用来制作翻书式动画。

让我知道这是否有帮助，或者您正在寻找我可能能够回答的更具体的内容。我通常使用 complete 来了解何时加载数据，而不管数据类型如何，并且没有遇到任何问题（加载的图像、mp3、flvs、xml，我非常依赖 COMPLETE 来了解数据何时可以毫无问题地进行操作，所以到目前为止，总是可能有我没有遇到过的边缘情况）。

从文章中的一些内容来看，似乎 init 在完整数据可用之前可能会在完成之前被触发，除非您担心尽早操作对象，否则我认为 COMPLETE 可能是一种更安全的方法。我相信等待 INIT 的问题仅在于您尝试使用 SWFLoader 等本身，而不是直接来自 Loader 的数据（尽管这只是基于文章的猜测）。

# iphone - 将 char 转换为 int 的奇怪错误（目标 C）

> ID：11164829
> 
> 赞同：5
> 
> 时间：2012-06-22T22:15:08.317
> 
> 标签：iphone, objective-c, ios, char, int

我设置了一个应用程序，在其中将 NSString 转换为 char 变量数组，并且尝试将一些字符转换为整数（基本上是为了解析字符串中的数字）。但是当我尝试将它们转换为 int 变量时，它们会突然改变值。

例如：

```
char thechar = array[7]; //to make sure the issue isn't related to the array

NSLog(@"%c %i %i",thechar,(int) thechar, [[NSNumber numberWithUnsignedChar:thechar] intValue]); 
```

返回这个：

```
3 51 51 
```

转换它的两种方法（我发现）似乎都将值更改为 51。有谁知道可能发生什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T22:38:24.213

我想通了：只需将其转换为 NSString，然后获取 intValue。

```
[[NSString stringWithFormat:@"%c", thechar] intValue]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T22:21:05.763

51 是文字字符“3”的数值。它可以追溯到 ASCII 标准，尽管许多常见的 Unicode 编码也保留了该值。

您可以非常可靠地减去 48（或“0”）来获得数字：

```
int num = (int)(numAsChar - '0'); 
```

或者，如果要转换整个字符串，可以使用[atoi](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)：

```
int num = atoi(myNumberString); 
```

# google-api - 使用 API 时对 google 文档权限添加的抑制通知

> ID：11164836
> 
> 赞同：1
> 
> 时间：2012-06-22T22:15:34.610
> 
> 标签：google-api, google-docs-api, email-notifications

我试图在使用 api 时隐藏电子邮件通知，以便向 google 文档添加权限。例如，使用 API，我创建了一个新文档并添加了另一个文档查看器。目前，其他查看者会收到一封来自谷歌的电子邮件，通知他该文档。

我想通过 API 隐藏电子邮件。

我可以[在这里](https://developers.google.com/google-apps/documents-list/#email_notifications_of_acl_changes)看到，有一种方法可以在**更新**acl 时使用 send-notification-emails 标志而不是在创建时使用。我曾尝试在创建时使用该标志，但正如预期的那样，它什么也没做。有没有另一种方法来抑制创建通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:29:43.753

好的 - 用户错误。实际上，它在我们正在使用的 ruby​​ gem 的深处，它正在切断 URL 中的参数。我必须以不同的方式传递参数，而不仅仅是在“？”之后的 URL 上。对于那些使用 Fiddler 或 Wireshark 偶然发现此测试以确保您的参数保存在 POST 中的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:11:41.853

读到有人在 GDocs 的 python 接口中遇到类似问题。他们只是在请求中添加“?send-notification-emails=false”，没有意识到它已经有一个“？”。所以，他们最终不得不测试“？” 在当前 url 中，如果存在则使用“&”。

# android - 如何为按钮的应用程序设置动画？

> ID：11164840
> 
> 赞同：0
> 
> 时间：2012-06-22T22:15:53.663
> 
> 标签：android, button, android-animation

我想创建一个带有动画按钮的应用程序？我能怎么做？点击后我想旋转或隐藏一个按钮..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:55:53.777

干得好

> 为按钮设置动画

创造

> 旋转.xml

在`anim`文件夹中：

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="90"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="0"
    android:duration="1200"
    android:fillAfter="true"
    android:fillEnabled="true" /> 
```

在你的java代码里面：

```
 Button myButton = (Button)findViewById(R.id.button);
    myButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        myButton.startAnimation(AnimationUtils.loadAnimation(AbcActivity.this, R.anim.rotate));

    }
}); 
```

> 隐藏按钮

```
button.setVisibility(View.INVISIBLE); 
```

或者

```
button.setVisibility(View.GONE); 
```

# ruby-on-rails - 为什么设计邀请不发送一些电子邮件

> ID：11164841
> 
> 赞同：2
> 
> 时间：2012-06-22T22:15:55.140
> 
> 标签：ruby-on-rails, ruby, devise

我正在使用 devise 和[devise_invitable](https://github.com/scambra/devise_invitable)

```
gem 'devise',           '>= 2.0.0'
gem 'devise_invitable', '~> 1.0.0' 
```

我在网站的管理部分有一个链接，该链接会自动向用户发送邀请电子邮件

```
 = link_to 'Send Invitation', invite_user_path(@user), :remote => true, :title => "Sends an email directly to the user" 

def invite
   @user = User.find(params[:id])
   User.invite!(:email => @user.email)
   flash.now[:success] = "Invitation email has been sent"
   respond_to do |format|
     format.js
   end
 end 
```

这会向数据库中 user.invitation_token 不为 NULL 的用户发送电子邮件，但会跳过向其他用户发送电子邮件....为什么会这样，我该如何纠正。同样在[devise_invitable](https://github.com/scambra/devise_invitable)的文档中，这是他们所说的调用邀请的方式！

```
User.invite!(:email => "new_user@example.com", :name => "John Doe") 
```

但是当我这样做时，他们说我不能批量分配属性名称

任何帮助将不胜感激

我注意到如果用户invitation_token 字段中有任何内容，电子邮件将会发出，但我最初如何创建它

更新...这是我的整个用户模型

```
class User < ActiveRecord::Base
  delegate :can?, :cannot?, :to => :ability

  has_many :roles, :through => :role_users
  has_many :role_users
  has_many :notifications, :through => :subscriptions
  has_many :subscriptions
  has_many :companies, :through => :positions
  has_many :positions
  has_many :notification_histories
  has_many :sites, :through => :site_users
  has_many :site_users

  scope :admins, joins(:roles).where("roles.name = 'SuperAdmin' or roles.name = 'SubAdmin'")  
  scope :regular, joins(:companies).where('positions.regular_user = 1').group('users.id')
  scope :employee, joins(:companies).where('positions.regular_user = 0').group('users.id')
  scope :current, :conditions => { :active => true }, :order => 'LOWER(first_name), LOWER(last_name) ASC'

  default_scope :order => 'LOWER(first_name) ASC'

  has_many :feedbacks do
    def for_playlist(id)
      find_or_create_by_playlist_id(id)
    end
  end

  def name
    "#{self.first_name} #{self.last_name}"
  end

  has_many :ratings, :through => :feedbacks do
    def for_playlist(id)
      where('feedbacks.playlist_id = ?', id)
    end
  end

  Role::TYPES.each do |role|
    define_method(role + '?') do
      self.has_role?(role)
    end
  end

  def has_role?(role_name)
    role_name = role_name.name if role_name.is_a?(Role)
    self.roles.where(:name => role_name.to_s).exists?
  end

  accepts_nested_attributes_for :roles, :notifications, :allow_destroy => true 

  def company
    self.companies.first
  end

  def site
    self.sites.first
  end

  validates :first_name, :presence => true
  validates :last_name, :presence => true
  validates :email, :presence => true
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create, :if => :email_present?
  validates_uniqueness_of :email
  validates_format_of :phone_number, :with => /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/, :allow_nil => true
  validates_format_of :password, 
                      :with => /^.*(?=.{6,})(?=.*[a-z])(?=.*[A-Z])(?=.*[\d\W]).*$/, 
                      :message => "must be at least 6 characters, have one number and one capital letter",
                      :if => Proc.new { |user| !user.password.blank? }

  before_validation :clear_empty_attrs
  before_validation :clean_data

  # Include default devise modules
  devise :database_authenticatable, :recoverable, :rememberable, :trackable, :invitable

  # Setup accessible (or protected) attributes for devise support
  attr_accessible :email, :password, :password_confirmation, :remember_me, :active,
    :company_id, :first_name, :last_name, :phone_number, :role_ids, :notification_ids, :name

  def role?(role)
    return !!self.roles.find_by_name(role.to_s.camelize)
  end

  def ability
    @ability ||= Ability.new(self)
  end

  def name
    "#{first_name} #{last_name}"
  end

  def list_companies
    companies.map(&:name).try(:join, ", ").try(:titlecase)
  end

  def email_present?
    !self.email.blank?
  end

protected
  def clear_empty_attrs
    @attributes.each do |key,value|
      self[key] = nil if value.blank?
    end
  end

  def clean_data
    self.email.downcase! unless self.email.nil?
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T06:37:53.950

根据`config/environments`您希望完整的电子邮件功能在什么环境下工作，设置 ActionMailer 配置是先决条件。例如，如果您希望在开发中发送电子邮件，这些应该出现在`development.rb`（`production.rb`用于生产）中：

```
 # change to true to allow email to be sent during development
  config.action_mailer.perform_deliveries = false

  config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "example.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"], # you can use ordinary gmail username here
    password: ENV["GMAIL_PASSWORD"]   # you can use your gmail password here, but don't push the changes
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T23:11:14.683

设计邀请文档说明您需要

```
devise :database_authenticatable, :confirmable, :invitable 
```

让它工作。您已经放弃了`:confirmable`某个地方，这是设计的一部分，它会为还没有令牌的用户自动生成该令牌。模型中的那一行应该是：

```
devise :database_authenticatable, :recoverable, :rememberable, :trackable, :confirmable, :invitable 
```

# wcf - 有没有办法只在 WCF 中添加时间戳安全标头？

> ID：11164843
> 
> 赞同：1
> 
> 时间：2012-06-22T22:16:13.427
> 
> 标签：wcf, security, binding, interop, timestamp

我正在尝试处理来自服务器的响应消息，该消息仅向安全标头添加时间戳元素。为了互操作，我正在创建一个行为类似于生产服务器的 WCF 服务，并且我只想拥有这样的安全标头。我能够配置除时间戳之外的所有内容，它添加了一个签名，包括时间戳元素（但我不想要那个）。

仅将 Timestamp 元素添加到标头的 binging 配置是什么？这可能吗？

如果 WCF 接收到带有仅带有 Timestamp 元素的 Security 标头的消息，会发生什么情况？如果 EnableUnsecuredResponse 设置为 true，它将处理此类消息？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:08:06.973

不确定是否有这样的约束力。时间戳非常简单，因此我建议您放弃任何安全配置并使用自定义[消息检查](http://msdn.microsoft.com/en-us/library/aa717047.aspx)器来生成时间戳并自己将其推送到消息中。

# android - 是否可以按照我尝试的方式启动应用程序？

> ID：11164846
> 
> 赞同：0
> 
> 时间：2012-06-22T22:16:45.360
> 
> 标签：android, android-intent

我目前正在制作一个 Android 启动器，并且在 Stackoverflow 上花了很多时间来研究如何做不同的事情。但是，我在打开自己的应用程序时遇到了障碍。我使用的代码是从关于这个主题的其他问题拼凑而成的。我现在有一个已安装应用程序的列表，但是当单击时，我自己的应用程序会重新打开。我认为我以错误的方式使用了错误的意图，但不知道如何解决问题。所以我的问题是：打开选定应用程序的更好方法是什么？下面是使用的代码。注意：我是编码初学者。

```
PackageManager pm = this.getPackageManager();
Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);

List < String > myList = new ArrayList < String > ();
ArrayList < ResolveInfo > list = (ArrayList < ResolveInfo > ) pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
for (ResolveInfo rInfo: list) {
    System.out.println("Installed Applications " + rInfo.activityInfo.applicationInfo.loadIcon(pm).toString() + rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
    myList.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());

}

ListView lists = (ListView) findViewById(R.id.content);
ArrayAdapter < String > aa = new ArrayAdapter < String > (this, android.R.layout.simple_list_item_1, myList);
lists.setAdapter(aa);

lists.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView <? > parent, View view, int position, long id) {
        Intent i = new Intent("android.intent.action.MAIN");
        i.addCategory("android.intent.category.LAUNCHER");
        PackageManager pm = getPackageManager();
        i = pm.getLaunchIntentForPackage(getPackageName());

        startActivity(i);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:44:40.350

你写了很棒的代码，但你犯的唯一错误是

```
i = pm.getLaunchIntentForPackage(getPackageName());
startActivity(i); 
```

在这里，您所有的努力都白费了，因为您完美地显示了所有应用程序名称，但是您正在执行上面的代码的应用程序名称的 onClick。但是`getPackageName()`无论您单击哪个项目，它都会返回当前的活动包名称，它将重新启动您的应用程序。

所以只要改变

```
 i = pm.getLaunchIntentForPackage(getPackageName()); 
```

至此

```
i = pm.getLaunchIntentForPackage(list.get(position).activityInfo.packageName); 
```

它将启动您单击的应用程序！。

# python - 卷曲大文件作为 POST 请求

> ID：11164847
> 
> 赞同：1
> 
> 时间：2012-06-22T22:16:57.357
> 
> 标签：python, unix, curl

我在本地计算机上有许多 ~10MB xml 文件。对于每个文件，我需要将其发送到远程服务器进行处理。我尝试这样做的方法是使用`curl`POST 到函数：

```
curl MyIP -d @my_file.xml 
```

`MyIP`执行 xml 处理的函数的 url 在哪里。但是，这似乎是有问题的，因为大多数 POST 数据由于某些限制而被切断（尽管我不确定这个限制是什么）。

将〜10MB文件发送到远程服务器进行文本处理的建议方法是什么？我可以使用 curl & a function 设置上述方式来工作吗？我应该设置一个 FTP，然后在该文件夹上运行一个 cron 作业吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:19:30.787

Use POST

```
curl -X POST -d @my_file.xml http://user:pass@myhost/ 
```

By default curl uses "GET" verb. You have to specify the HTTP verb using option `-X`

# windows-phone-7 - WP7 SQL Server CE 插入顺序

> ID：11164850
> 
> 赞同：0
> 
> 时间：2012-06-22T22:17:01.680
> 
> 标签：windows-phone-7, sql-server-ce

在编写应用程序时，我假设将项目添加到表中的顺序将是通过查询获取它们的顺序。

今天经过小的重构，我发现排序有点坏了。物品的订购方式略有不同。

例如，如果我`1,2,3,4,5,6`在 db 中有名称相同的实体，它们将被保存为`1,2,4,3,5,6`. 类似的东西。

任何想法为什么会发生这种情况？这种假设肯定是不好的，但它有效并节省了很多时间。

# c++ - 检查指针是否指向标准 C/C++ 中的数组内

> ID：11164852
> 
> 赞同：4
> 
> 时间：2012-06-22T22:17:12.470
> 
> 标签：c++, c, pointers

> **可能重复：**
> [检查指针是否指向数组](https://stackoverflow.com/questions/4657976/checking-if-pointer-points-within-an-array)

如果我有一个数组和一个大小，并且我想检查给定的指针是否指向数组内的元素，那么在标准 C 或 C++ 中是否有任何方法可以在不调用 UB 的情况下这样做？

这行得通吗？

```
bool is_inside(someType * array, int size, someType * other_pointer){
    for (int i = 0; i < size; i++)
        if (array + i == other_pointer)
            return true;
    return false;
} 
```

`==`编辑：据我了解，除了和`!=`对于没有 UB 的不指向同一个数组的指针之外，您不能使用比较（尽管实际上它按预期工作）。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:35:38.380

这取决于你所说的UB是什么意思。

具体来说，对于指针比较，C++ 标准的第 5.9 节“关系运算符”说：

> 如果相同类型的两个指针 p 和 q 指向不同的对象，它们不是同一对象的成员或不同的函数，或者如果其中只有一个为空，则、`p<q`和的结果未指定。`p>q``p<=q``p>=q`

请注意，行为是*未指定*的（意味着比较的结果可能是`true`或`false`- 换句话说，结果不会告诉您任何有用的东西 - 但实现不需要指定哪个）而不是*未定义*（意味着编译器或生成的程序可以做任何事情）。

然而，到目前为止，我只看到一个系列的实现没有像基里尔这样的代码做预期的事情：

```
bool inside = (other_pointer >= array) && (other_pointer < array+size); 
```

这些实现是用于构建 MS-DOS 实模式程序的编译器，其中地址具有段落和偏移部分。地址 FF00:0010 和 FF01:0000 指向相同的内存位置，但如果我没记错的话，编译器不能保证以预期的方式运行，除非为某些内存模型（当然是*HUGE*模型，但可能还有其他）进行编译。

但是，如果要么`p`或`q`不指向现有对象（例如因为指针被释放），那么无论你做什么，行为都将是未定义的。所以你不能用这种方法来判断一个指针是否仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:19:47.343

Arrays are guaranteed to be contiguous in memory, so just check that the pointer is within the bounds of the address of the first element and the last.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:19:56.387

Your solution will work but is not optimal as it contains an unnecessary loop.

What you should do, is to take a pointer to the array, the array size in bytes, and check if the pointed address falls within the address space occupied by that array.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T22:20:51.600

You can simply write:

```
bool inside = (other_pointer >= array) && (other_pointer < array+size); 
```

This is legal check.

# bison - 更改野牛错误消息的格式？

> ID：11164854
> 
> 赞同：2
> 
> 时间：2012-06-22T22:17:32.273
> 
> 标签：bison

有没有办法改变 Bison 错误信息的格式？例如，不要`syntax error, unexpected T_ID, expected ';' or T_IMPORT`说`unexpected id, expected a semicolon or import`-double so with 之类的东西`$end`。

我知道在最坏的情况下我可以进行字符串操作来修复字符串，但这似乎有点荒谬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-08T20:26:14.760

为了得到更好的东西

```
syntax error, unexpected T_ID 
```

代替

```
%token T_ID 
```

做

```
%token T_ID "identifier" 
```

消息将是

```
syntax error, unexpected identifier 
```

在特定情况下`$end`，请执行以下操作：

```
%token T_EOF 0 "end of file" 
```

如果您需要国际化支持，请使用`_(...)`：

```
%token T_ID _("identifier")
%token T_EOF 0 _("end of file") 
```

从 Bison 3.6 开始，您可以更进一步并自己生成错误消息。解析器将为您提供预期令牌的列表，而您将负责伪造传递给的消息`yyerror`。有关详细信息，请参阅文档中[的语法错误报告功能`yyreport_syntax_error`](https://www.gnu.org/software/bison/manual/html_node/Syntax-Error-Reporting-Function.html)。

# javascript - passing variables form ruby to javascript

> ID：11164863
> 
> 赞同：-1
> 
> 时间：2012-06-22T22:18:49.637
> 
> 标签：javascript, ruby-on-rails, ruby

I am trying to get the value user selected from search prompt and pass it to javascript. in my search controller it's stored in @result. I am then finding what I need with (params[:query_id]

Wanted to make prompt for unsigned users a bit fancier by adding their selection to prompt. Tried it a simple way -

```
var selected = getElementById('#query').value; 
```

But got this error message: ReferenceError: Can't find variable: getElementById

Tried to get this variable from a ruby array:

```
var selected= <%= @result.to_json %>; 
```

But it returns null

Adding searh controller's code, as suggested:

def index respond_to do |format| format.html {render :text => "html"}

```
 format.js  do
    @search = SearchItem.search{ keywords params["query"] }

    @result = []
    @search.each_hit_with_result do |hit, item|
      @result << {:name => hit.stored(:name), :id => item.id}
    end

    render :json => @result.to_json

  end

end 
```

Then in search html I have

```
#search
  = form_tag find_from_query_entries_path, :remote => true, :id => "search_form" do
    = text_field_tag :query, nil
    = hidden_field_tag :query_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:26:29.253

`getElementById`未在全局对象中定义。它是 a 的属性`document`。

尝试：

```
var selected = document.getElementById('#query').value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:57:14.243

Rails 自带 jQuery，为什么不使用它呢？

我想这就是你想要的。

`$('query').val()`

但是您应该在浏览器中跳转到呈现的 html 以检查您是否要选择作为名称查询的节点（我认为这是 rails 所做的或您认为的 id 查询

# php - Eliminating the need for Mod Rewrite with PHP

> ID：11164864
> 
> 赞同：2
> 
> 时间：2012-06-22T22:18:53.097
> 
> 标签：php, mod-rewrite, routing

At the moment using .htaccess in my PHP Application to choose which page I'm rendering, so for example if the URL is url.com/register, it is actually url.com/index.php?page=register and it gets the content of /Theme/register.html.

Here it is:

```
RewriteEngine On
RewriteRule ^(|/)$ index.php?page=$1
RewriteRule ^([a-zA-Z0-9/_-]+)(|)$ index.php?page=$1
RewriteRule ^(.*)\.htm$ $1.php [NC] 
```

Thing is, I am not happy with this since if I want to use another GET parameter I'd lose this 'pretty url'. I have seen other frameworks that do it without the need of Mod rewrite and I'd like it if someone could give me a simple and/or proper example of how to do it, or explain it.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:28:42.850

通常的方法是将**所有内容***重定向到应用程序的主 boostrap 文件`index.php`。

*   当我说一切时，我指的是不是公共文件系统中的文件或目录的每个 URL。

通过这种方式，PHP 获得了解析 URL 并（动态地）确定应该呈现哪些页面以及传递了哪些参数的令人愉快的工作。

这就是 MVC 路由器发挥作用的地方，它们的任务是将 URL 分解为段，并确定哪些段表明您应该使用某个控制器，哪些段表明控制器应该调用某个方法和哪些段是应该传递给方法调用的参数。

例如，这种方法在 WordPress 中使用，并且 URL 解析是根据您可以在管理员中指定的 URL 结构完成的。

CakePHP 也使用它是一个 MVC 框架，它允许默认为以下 URL 结构：`controller_name/method_name/parameter_1:value_1/parameter_2:value_2/`. 但可以在任何程度上进行定制，例如定义从 URL 中提取参数的 RegEx。

下面的代码是 WordPress 生成的默认 .htaccess。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:24:44.993

您总是使用`mod_rewrite`但您不确定规则中的页面名称。您只需将其发送到 php，然后您可以使用它根据模式从 PATH_INFO 中解析出正确的详细信息。它被称为路由器。我不知道任何独立的示例，因为它们通常与控制器实现密切相关。

您可以查看我对[这个类似问题](https://stackoverflow.com/questions/6968034/how-do-extended-urls-work/6968077#6968077)的回答，以查看一些实现作为示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:22:25.483

您可以只定义应将哪些类型的请求传递给 index.php（即：注册、删除等）。如果您在 htaccess 中对其进行硬编码，您仍然可以在您的 url 中使用其他子目录。或者在您的 htaccess 中添加一个子目录来定义此类请求，例如 www.yoursite.com/page/register

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T22:22:34.193

您可以像这样在 url 中传递一些信息：

```
url.com/Theme/register 
```

看到[这个页面](https://stackoverflow.com/questions/975498/using-apaches-mod-rewrite-to-parse-seo-friendly-urls)

# ios - UISearchBar not being set to UITableView.tableHeaderView

> ID：11164865
> 
> 赞同：3
> 
> 时间：2012-06-22T22:18:58.107
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller

I'm having trouble programmatically creating a UISearchBar and UISearchDisplayController for my UITableView. I've set up my UISearchBar and UISearchDisplayController and then set the self.tableview.tableHeaderView to self.searchBar. The tableHeaderView is still NULL but the searchBar and the searchDisplayController are not. How do I get the UISearchBar to not be null and appear in the table header?

This is what I have set up:

```
- (void)viewDidLoad {
[super viewDidLoad];

/*other things here*/

//Search Bar
self.searchedDancerData = [[NSMutableArray alloc] init];
self.searchBar = [[UISearchBar alloc] init];
self.searchBar.delegate = self;
[self.searchBar sizeToFit];
self.searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
[self.tableView setTableHeaderView:self.searchBar];
self.tableView.tableHeaderView.frame = CGRectMake(0, 0, tableView.frame.size.width, 44);

self.searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:self.searchBar contentsController:self];
[self.searchDisplayController setDelegate:self];
[self.searchDisplayController setSearchResultsDataSource:self];
[self.tableView reloadData];
NSLog(@"%@", self.tableView.tableHeaderView); //Returns NULL
}

- (void)viewWillAppear:(BOOL)animated
{
/*other things*/

//set Content offest
[self.tableView setContentOffset:CGPointMake(0, 44)]; 
}

#pragma mark UISearchDisplayControllerDelegate

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
[self.searchedDancerData removeAllObjects];

for (NSDictionary *dancer in self.dancerData) {
    NSRange range = [[dancer objectForKey:@"Name"] rangeOfString:searchString options:NSCaseInsensitiveSearch];
    if (range.location != NSNotFound) {
        [self.searchedDancerData addObject:[dancer copy]];
        [self.searchedDancerData sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
    }
}
return YES;
}

- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
[self.searchDisplayController.searchResultsTableView setDelegate:self];
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
[self.tableView setContentOffset:CGPointMake(0, 44) animated:YES];
}

-(void)searchBar:(id)sender
{
[self.searchDisplayController setActive:YES animated:YES];
} 
```

And all of my UITableViewDelegate methods include this to populate the search table:

```
if (self.searchDisplayController.searchResultsTableView == theTableView) {
    return something;
} else {
    return somethingElse
} 
```

I feel like I've set this UP correctly, can someone help me out please.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T10:53:51.337

尝试在 tableView 的标题视图中将 searchBar 设置为 UISearchDisplayController 的 SearchBar。

```
[self.tableView setTableHeaderView:self.searchDisplayController.searchBar]; 
```

# php - Need help in appending a new child to existing XML in php

> ID：11164866
> 
> 赞同：0
> 
> 时间：2012-06-22T22:19:01.613
> 
> 标签：php, xml, dom

This is my xml file. I want to add a new element to all books called 'price'. I don't know how to loop through all the books and append a child in them in PHP. Please help.

```
<book>
<title>title 1</title>
<author>author 1</author>
</book>

<book>
<title>title 2</title>
<author>author 2</author>
</book> 
```

Expected output:

```
<book>
<title>title 1</title>
<author>author 1</author>
<price>20</price>
</book>

<book>
<title>title 2</title>
<author>author 2</author>
<price>20</price>
</book> 
```

This is what I have written so far:

```
 $dom = new DomDocument;

    $dom->preserveWhiteSpace = FALSE;
    $dom->loadXML($xmlFile);
    $books = $dom->getElementsByTagName('book'); // Find Books

    foreach ($books as $book) //go to each book 1 by 1
    {
        $price = $dom->createElement('price');
        $price  = $dom->appendChild($price );

        $text = $dom->createTextNode('20');
        $text = $dom->appendChild($text);
    }
     $dom->saveXML(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:47:57.863

用于操作的`PHP`库`DOM`是面向对象的，不是功能/程序的。

您不会生成`DOMDocument`然后在**任何地方**使用它来调用**每个方法**，每个节点都有自己的方法。您使用 DOMDocument 创建新元素，但之后您使用元素的方法将元素附加到另一个元素。

[尝试从PHP 文档](http://www.php.net/manual/en/book.dom.php)中查看以下类 DOMDocument、DOMElement、DOMAttr 和 DOMText，以及它们的共同祖先 DOMNode 。这应该可以弄清楚您正在处理哪种对象以及可以使用哪些方法。

```
$xmlFile = '/path/to/filename.xml';
$xmlString = file_get_contents($xmlFile);

$dom = new DomDocument;
$dom->preserveWhiteSpace = FALSE;
$dom->loadXML($xmlString);
$books = $dom->getElementsByTagName('book'); // Find Books

foreach ($books as $book) //go to each book 1 by 1
{
    $price = $dom->createElement('price');
    $book->appendChild($price);

    $text = $dom->createTextNode('20');
    $price->appendChild($text);
}
$dom->saveXML(); 
```

# assembly - Can't get 16 bit assembly program to jump to 0x1000:0x0000

> ID：11164873
> 
> 赞同：2
> 
> 时间：2012-06-22T22:19:42.057
> 
> 标签：assembly, x86, x86-16, bootloader

I know I succeed in writing my code to that address using `int 13h` because I can see it at that memory location. What I can't do is jump there.

I put `0x1000` (three zeros there) into `es` and `0x0000` into `bx` and I know that `[es:bx]` means the address calculated by `(es * 0x10) + bx` which does equal `0x10000` (four zeros there). But `eip`, the instruction pointer, never does go there.

I've tried `jmp [es:bx]`, `jmp 0x1000:0x0000`, and a bunch of other permutations that `NASM` doesn't even accept.

My boot loader as it currently is (which still isn't working) is [here](https://docs.google.com/document/d/1J2vNReGoeXz7PoBzYHg3bwNpXeeOKkSmS3rmmd_yxmY/edit). I booted it up in Qemu and did a memsave on the first 50 bytes at `0x10000`, opened it up with tweak, and saw my "kernel" code there (simple . But `EIP` still refuses to be `0x10000`, or reach it and then hang where I want it, is what I mean). Full images of the situation [here](https://docs.google.com/document/d/1pjeP_NXKeuZQb8zmeLaMlWyh5YqWD34jZIQcxBBzPf0/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:53:01.083

远跳转不能使用仅用于段的内存位置。您可以通过以下几种方法来做到这一点：

1) 段和偏移量的简单硬编码地址。

```
jmp 0x1000:0 
```

2）使用全地址间接跳转：

```
entry dw 0x0000 ; offset
      dw 0x1000 ; segment

jmp far dword ptr [entry] ; far jump (syntax might differ) 
```

3）远回报

```
push SYSADDR ; segment
push 0       ; offset
retf         ; far return 
```

在 DOS 时代使用的一个常见技巧是修补指令：

```
 mov ax, SYSADDR
  mov word ptr [myjump+3], ax
myjump:
  jmp 0x0000:0x0000 
```

或使用其中的一部分作为变量：

```
myjump:
  db 0xEA           ; far jmp opcode 
  dw 0x0000         ; offset part
  SYSADDR dw 0x1000 ; segment part 
```

免责声明：以上所有内容均来自记忆，我可能弄错了某些部分（例如，段/偏移量的顺序非常混乱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:27:58.683

你应该能够做你正在尝试的事情。这是一个做同样事情的例子，大概是出于同样的原因：

```
; http://www.free2code.net/tutorials/view/writing_your_own_operating_system-12/page1.html
...
mov bx,0x1000  ;Es and Bx put together are where to load the program too 
               ; (see jmp x1000:0x00)
mov es,bx
mov bx,0x00
int 13h        ;Int 13 is all functions for disks
... 
```

# ios - Is there a way export xcode build settings to .xcconfig file?

> ID：11164876
> 
> 赞同：41
> 
> 时间：2012-06-22T22:19:52.607
> 
> 标签：ios, xcode, xcconfig

Is it possible to export xcode build settings to .xcconfig file? Other than just copy-paste it to text file line-by-line. Thanks!

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-12-31T20:41:08.313

这个[SO](https://stackoverflow.com/questions/14484338/how-can-i-save-all-my-build-settings-from-1-xcode-project-and-use-them-on-other)答案帮助了我。

通过在 finder 中单击两根手指来显示项目文件 (MyProject.xcodeproj) 的包内容，然后在文本编辑器中打开“project.pbxproj”文件。

查找 XCConfigurationList 部分。它以`/* Begin XCConfigurationList section */`. 您将找到所有目标及其各自的 builConfigurations。现在在长十六进制 ID 上执行 find (command - f) 以查找 project.pbxproj 中的其他出现，您还应该在其中找到您的 buildSettings。将 buildSettings 括号之间的所有内容复制并粘贴到您的 xcconfig 文件中。然后，您将需要调整一些变量，特别是搜索路径列表。

或者，您可以从命令行使用 xcodebuild：

首先列出您的方案：

`xcodebuild -list`

然后导出所需方案的设置：

`xcodebuild -scheme "schemeName" -showBuildSettings >> mynew.xcconfig`

然后，您需要删除第一行或将其注释掉

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T18:52:26.353

您不必逐行复制和粘贴。您可以一次全选并复制所有行。唯一的限制是您不能将行复制`<multiple values>`为值。也就是说，如果您有一个设置为 和 指定了不同的值`Debug`，`Release`等等，您只需取消选择该行（cmd-click）即可复制。

# c# - Simple Selecting a row from gridview in asp.net web application

> ID：11164878
> 
> 赞同：5
> 
> 时间：2012-06-22T22:19:53.650
> 
> 标签：c#, asp.net, gridview, web, row

I know this question had been asked a hundred times, but I have difficulties implementing different solutions.I need to retrieve a selected row from a grid view in asp.net web application C#.I've done the databinding.I don't want to use edit/update buttons or checkboxe/radio button, just to select it by clicking on the row.Please help, I'm a little stuck, and I would like not to implement javascript based solutions.Thanks.

```
if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes.Add("OnMouseOver", "this.style.cursor='pointer';this.style.textDecoration='underline';");
            e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
            e.Row.ToolTip = "Click on select row";
            e.Row.Attributes["OnClick"] = Page.ClientScript.GetPostBackClientHyperlink(this.SingleSelectGrid, "Select$" + e.Row.RowIndex);

            LinkButton selectbutton = new LinkButton()
            {
                CommandName = "Select",
                Text = e.Row.Cells[0].Text
            };
            e.Row.Cells[0].Controls.Add(selectbutton);
            e.Row.Attributes["OnClick"] = Page.ClientScript.GetPostBackClientHyperlink(selectbutton, "");

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T22:26:22.793

如果我做对了，这应该做你想要的：

.aspx：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"    
  DataKeyNames="id" onselectedindexchanged="GridView1_SelectedIndexChanged"> 
```

后面的代码：

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = Convert.ToInt16(GridView1.SelectedDataKey.Value);

} 
```

这应该做你想要的。.index 会给你选择的行 ID，由`DataKeyNames`你的 .aspx 页面中的属性提供。但是，这确实需要检查“启用选择”。（转到您的 .aspx 页面，设计器，单击您的网格视图，您应该会看到“启用选择”属性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:21:56.163

如果要从文件后面的代码中添加**DataSource** ，则必须将名为“ **AutoGenerateSelectButton** ”的属性设置为**True**。这将使您能够选择一行。

# alignment - ShareThis Buttons Alignment

> ID：11164881
> 
> 赞同：0
> 
> 时间：2012-06-22T22:20:27.803
> 
> 标签：alignment, sharethis

I am trying to to align all the buttons FB Like, tweet, G+ on the same line. But it looks Misaligned.

Trying to add CSS properties doesn't help because it uses an i-frame.

[http://mink7.com/projects/startupradar/](http://mink7.com/projects/startupradar/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:33:44.233

当我在 Safari 的检查器中进行检查时，我可以看到应用于 #mainBody 和 #contentHeader 的行高为 80px，并且也被解析为这些元素的行高。请参阅下面第一个屏幕截图中的最后一个检查器块。

将此值更改为 0px 会使它们对齐，尽管有点太高了。你必须使用你的 CSS 来获得你想要的东西，但无论如何这是一个线索......

前：

![之前的版本](../Images/52b82398126ca145ae3374b342d7eded.png)

后：

![在此处输入图像描述](../Images/51ea9884e09d421e1a2c58ca5fbd1cb0.png)

希望能帮助到你！

# android - Android: cannot run app on connected phone, using Ubuntu in VM in Windows 7

> ID：11164882
> 
> 赞同：0
> 
> 时间：2012-06-22T22:20:28.710
> 
> 标签：android, debugging, ubuntu

I'm trying to develop an Android app. I'm developing in Eclipse which is running in an Ubuntu VM hosted on Windows 7.

I can run the app in the emulator just fine. However, if I connect my phone to the PC via USB, when I run the app I don't see it listed in Android Device Chooser.

I have followed the instructions in [http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html). Running

```
adb devices 
```

...shows an empty list of devices. Ubuntu just doesn't know it's there.

I wonder if it's because I'm running ultimately on Windows. When I plug the phone in, Windows responds to it, so it's not like there's no driver installed. If Windows knows it's there, does that mean it's somehow 'hidden' from the VM?

Can anyone help me diagnose the problem?

The phone is a Galaxy SII by the way. I hear they're pretty tricky to debug on.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:26:40.303

您使用的是什么虚拟机应用程序？

如果您在 VirtualBox、VMWare 等中，则需要使用 USB 图标（通常位于 VM 窗口的右下方），并将设备虚拟连接到虚拟机中。

然后，就可以调试了。

# data-binding - 如何在 knocketout.js 中绑定 json 数组中的数据？

> ID：11164890
> 
> 赞同：0
> 
> 时间：2012-06-22T22:21:03.653
> 
> 标签：data-binding, view, knockout.js, viewmodel, knockout-2.0

我有下面的 View 和 ViewModel 的代码，以及一些数据未绑定到视图的方式

[http://jsfiddle.net/vZdJz/](http://jsfiddle.net/vZdJz/)

数据应该是特定格式吗？

如果json是以下格式怎么样

```
{
  "0": {1,2,3},
  "1": {2,3,4},
  "2": {3,4,5},
  "3": {4,5,6}
} 
```

而不是下面的数组

```
[
  {1,2,3},
  {2,3,4},
  {3,4,5},
  {4,5,6}
] 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:29:01.407

好的，所以你有一些语法错误。首先，复选框需要使用`checked`绑定，而不是`value`绑定。您还有一个具有两个数据绑定属性的元素，这是无效的。看看[这个小提琴](http://jsfiddle.net/vZdJz/4/)看看一个工作版本（我去掉了未使用的属性，它们是杂乱无章的东西）。您还应该注意，将复选框绑定到`id`属性并没有多大意义。

注意，我使用的是 Knockout2.0，jsfiddle 有一个框架。使用您链接到的最新版本时，我仍然遇到错误。我无法弄清楚为什么，特别是考虑到它适用于 2.0。

# php - PHP AJAX - 具有特定实时状态检查和操作的按钮

> ID：11164893
> 
> 赞同：0
> 
> 时间：2012-06-22T22:21:23.457
> 
> 标签：php, ajax, button, status

我需要按钮的实时循环“状态检查”。按钮“class”或“id”名称将根据从 txt 文件中获取的值进行更改。然后将使用 CSS 处理此类/id 名称。此外，这个按钮类或 id 取决于名称应该触发/调用函数只是为了运行特定的 php 文件。

之前：我只使用 PHP 完成了它，但没有实时“状态检查”：< 看起来像这样：

```
<?php
if(isset($_POST['run1']))
{exec('run1.bat');}?>         // In this part it is waiting a button push with specific                 
<?php                        //  class name and then runs some bat file which runs some                   
if(isset($_POST['run2']))   //   command and writes output to R1.txt
{exec('run2.bat');}?>
<?php

$r1 = "R1.txt";                   //This part reads txt file R1.txt  ...
$fr1 = fopen($r1, "a+");         
$sizer1 = filesize($r1);
$tr1 = fread($fr1, $sizer1);
sscanf($tr1, "SOMERANDOM TEXT(%d)", $nr1);   // ...and gets value 1 or none
fclose($fr1);
?>
<form action="" method="post">   //This part is a form
<?php
if ($nr1=="1")                  //Here it check's value from txt and load specific
{                               //  type of button.
 echo '<input type="submit" class="runing1" name="run1" value="">' . "\n";
}
else
{
 echo '<input type="submit" class="runing2" name="run2" value="">' . "\n";
}
?> 
```

* * *

现在我认为它的结构是这样的：会有 check.php 类似的东西

```
 <?php
    $r1 = "R1.txt";                   //This part reads txt file R1.txt  ...
    $fr1 = fopen($r1, "a+");         
    $sizer1 = filesize($r1);
    $tr1 = fread($fr1, $sizer1);
    sscanf($tr1, "SOMERANDOM TEXT(%d)", $nr1);   // ...and gets value 1 or none
    fclose($fr1);
    ?>
    <?php
    $r2 = "R2.txt";                   //This part reads txt file R2.txt  ...
    $fr2 = fopen($r2, "a+");         
    $sizer2 = filesize($r2);
    $tr2 = fread($fr2, $sizer2);
    sscanf($tr2, "SOMERANDOM TEXT(%d)", $nr2);   // ...and gets value 1 or none
    fclose($fr2);
    ?> 
```

这个 PHP 文件应该 POST 那些 $nr1 和 $nr2 值在 Ajax 的外部。然后会有 index.php/htm 有几个按钮，它们通过 check.php 运行某种循环并获取按钮的值并在按钮上应用指定的类或 id。像是/否或开/关等。然后根据按钮状态类/ID，它应该运行特定的功能。在“完美”中，如果在 AJAX 的帮助下类或 id 可能是可变的，那就太好了，因为它可以发布到另一个具有类似代码的 run.php 文件......

```
<?php
if(isset($_POST['$class-name-from-button']))
{exec('($_POST['$class-name-from-button']).bat');}?>                          
<?php 
```

我认为它可以节省很多“重复同一行代码”的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T21:47:47.360

您可以使用 $.post、$.get 或更通用的 $.ajax（您可以在此处手动指定数据是否应该以 post 或 get 格式发送）。

我将演示 $.post 格式。

```
var url = "yourserver.com/check.php";
var data = "checking=true";
$.post(url, data, function(result){
if(result == "1")
$("input").removeClass("runing2").addClass("runing1");
else
$("input").removeClass("runing3").addClass("runing2");

}); 
```

您的 check.php 应该包含以下代码：

```
<?php
if(isset($_POST["checking"])){
$r1 = "R1.txt";                   //This part reads txt file R1.txt  ...
$fr1 = fopen($r1, "a+");         
$sizer1 = filesize($r1);
$tr1 = fread($fr1, $sizer1);
sscanf($tr1, "SOMERANDOM TEXT(%d)", $nr1);   // ...and gets value 1 or none
fclose($fr1);

echo $nr1;
}
?> 
```

以下是一些参考资料：

[http://api.jquery.com/jquery.post/](http://api.jquery.com/jquery.post/)

[http://api.jquery.com/jquery.get/](http://api.jquery.com/jquery.get/)

[http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)

# sql-server-2008 - 在 SaveChanges() 自动生成 GUID

> ID：11164894
> 
> 赞同：0
> 
> 时间：2012-06-22T22:21:23.563
> 
> 标签：sql-server-2008, entity-framework-4

在生成实体模型时，是否有任何解决方案或更新可以使 EntityFramework 检测`uniqueidentifier`具有默认值的列？`newid()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:30:12.873

不。EF 不支持（还？）定义自定义约定。（最早的 CTP 之一`DbContext`包含自定义约定的第一个提案，但由于此功能的复杂性，它们已在最终版本中删除。我不知道它们是否或何时会在以后的版本中返回。）你有遵守可用的标准约定，他们说`Guid`默认情况下类型属性不是数据库生成的。您必须使用数据注释或 Fluent API 显式标记`Guid`属性以覆盖此默认值。

# winapi - getmodulefilename 可能会阻塞什么？

> ID：11164897
> 
> 赞同：1
> 
> 时间：2012-06-22T22:21:53.847
> 
> 标签：winapi, deadlock, getmodulefilename, loaderlock

我们有一个多线程应用程序。其中一个工作线程调用 GetModuleFilename 进行日志记录，我们已经看到了一个死锁，工作线程在调用 GetModuleFilename 之前持有一个锁，这将永远阻塞。

我们可以并且已经从这个锁中删除了 GetModuleFilename 调用，但仍然对死锁是如何发生的非常感兴趣。

在线阅读：http: [//blogs.msdn.com/b/oldnewthing/archive/2004/01/28/63880.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/28/63880.aspx)

似乎 GetModuleFilename 将获得 loaderlock，这似乎是一个很好的死锁候选者。

但通常 loaderlock 中的线程不会执行我们自己的任何代码，除了上面链接的 dllmain 中。

可能会在 loaderlock 和另一个正在创建或销毁的工作线程上调用 dll_thread_attach 或 detach，但我看不出有任何方法会尝试获取我们正在使用的锁。

主线程也有可能尝试获取 GetModuleFilename 线程所持有的锁，而第三个线程正在持有 loaderlock 并在主线程上执行 sendmessage 或类似的阻塞？在这里，我也没有发现会发生这种情况的任何情况。

我怀疑的其他线程之一是使用 com 对象的线程。线程在开始时调用coinitialize，因此应该在单线程单元中。这里有任何与 loaderlock 交互的可能性吗？

无论如何，我们无法确定这种死锁发生的确切方式。因此，我希望获得一些想法，或者在其他情况下获得有关 loaderlock 的更多信息，以及是否有任何其他场景在可能阻塞的 loaderlock 中执行代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:46:16.443

只是一些随机的想法：

*   如果有 C++（不仅仅是 C）代码，那么在系统持有负载锁的同时，也可能在 DLL 上执行静态分配对象的构造函数。您不在任何地方使用此类对象的构造函数/析构函数中的锁吗？

*   Perhaps the bug might be there despite your lock, and using the lock may actually just "unhide" a race by e.g. changing some timing of actions in some thread. `DllMain()` and threads may be tricky. See [http://blogs.msdn.com/b/oldnewthing/archive/2007/09/04/4731478.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2007/09/04/4731478.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:50:38.247

Well, turns out the problem i described was merely the symptom of a different problem in a library we used. The library apparently used some wininet apis in two different threads, one of which was in dllmain and inside the loaderlock. These two threads deadlocked which subsequently locked up our thread which called GetModuleFileName.

That's about as much as i know for now, but i'll update this once we get some more details back from the vendor of the library.

# c++ - 我应该安装什么样的 c++ 运行时可再发行包？

> ID：11164899
> 
> 赞同：0
> 
> 时间：2012-06-22T22:21:55.223
> 
> 标签：c++, windows

我想在我的应用安装程序中包含 VC 8.0 运行时可再发行包。我应该在客户端计算机上安装什么样的 C++ 运行时可再发行包？

我的应用程序处于 32 位模式。如果操作系统是 64 位，我应该安装 x86 还是 x64 版本？

我想我应该安装 x64，因为我的应用程序会调用 x64 版本的包装器，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:28:15.330

32 位->64 位包装通常只对系统库进行，并且由操作系统完成，因此任何 32 位用户模式组件都可以不加改变地运行。

为此，您只需提供程序使用的 32 位版本的用户模式库，包括标准库 dll（即 VC++ redist）。

# entity-framework - 通过 WebApi 插入/检索关联实体？

> ID：11164901
> 
> 赞同：0
> 
> 时间：2012-06-22T22:22:05.797
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-web-api

我是 WebAPI 和 EF 世界的新手。我仍然不太清楚关联实体是如何工作的。

假设我想检索并返回 a`Car`及其关联实体`Driver`，如果我只是这样做`return dbContext.Cars`，是否也会`Drivers`包含在响应中？

如果我通过 JSON 将`Cars`带有嵌套`Driver`对象的实体传递到 WebAPI 中，asp.net 会自动将其解释为两个关联对象并插入到我的数据库中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:00:24.160

**1** 如果您希望包括相关的驱动程序，则必须返回

```
return dbContext.Cars.Include(c => c.Drivers); 
```

**2** 是的，一旦你的 JSON 属性被正确命名

# django - 如何有效更新基于反向关系的计算字段？

> ID：11164902
> 
> 赞同：2
> 
> 时间：2012-06-22T22:22:12.620
> 
> 标签：django

```
class A(models.Model):
    def calculate(self):
        # calculate some field based on all self.b_set instances

class B(models.Model):
    a = models.ForeignKey(A) 
```

我想保存一个实例`B`以使函数触发`A`，但有效。

一个简单的实现是连接实例`post_save`发出的信号然后运行，但它会调用N 次。`B``b.a.calculate()``a.calculate()`

有人对如何更有效地实施这一点有任何建议吗？

我遇到了障碍，因为我不确定如何确定最后一个 B 实例何时成功更新，之后我希望 A 实例运行其可能昂贵的 calculate() 函数。

到目前为止，我最好的想法可能是打开一个“已更改”的标志，`A`并让一个 cron 工作来确定哪些`A`模型需要更新，但我希望它可以更准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:21:58.253

如果您有一个公式`x = a+b+c`，那么您总是希望在任何参数 a、b 或 c 更改后重新计算 x。在上面的模型中，如果模型 A 中的计算字段值取决于模型 B 中的关系，那么您总是希望在 B 实例之一更改后重新计算。但是，这并不意味着 post_save 将运行 N 次。每次保存 B 个实例之一时，它只会运行一次。

如果 B 有许多不影响昂贵的 A.calculate() 函数的字段，则在 B 的字段周围添加一个临时校验和，以计算并将值存储为新的 B 字段。然后您的 post_save 可以重新计算校验和以查看 A.calculate() 是否需要再次运行。

# php - 再次在 30 秒内重试 POST 或 GET 表单的自定义 500 错误 php 页面？

> ID：11164903
> 
> 赞同：0
> 
> 时间：2012-06-22T22:22:18.930
> 
> 标签：php, .htaccess, http-redirect

我们正在尝试构建一个自定义的 500 错误 php 页面，该页面在 30 秒内再次重试 POST 或 GET 表单，我们使用moodle进行考试，但有时我们有很多学生在做同样的考试，知道如何解决这个问题吗？到目前为止，如果参数像 xxx.php?name=doe 一样，我们可以重试，但如果它们以像 $_post 这样的数组形式出现，则不能重试

```
<?php
    function my_url(){

        $url = (!empty($_SERVER['HTTPS'])) ?   "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];

        echo "<meta http-equiv=\"refresh\" content=\"30;url=$url\"/>";
    }
    my_url();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:29:48.823

您可以使用 Javascript（如果客户端已启用）尝试重新加载页面。这将重新提交 POST 数据。问题是（至少在 Firefox 中）当脚本执行时，浏览器会弹出询问他们是否要重新提交数据，这样可能会造成混淆。

不过，这会起作用：

```
<script type='text/javascript'>
    setTimeout('window.location.reload()', 30000);
</script> 
```

根据您拥有的 POST 数据类型，您可以将所有 POST 字段转换为隐藏元素，并在页面上重新填充另一个表单，并为他们提供在一段时间后重新提交的选项。您将无法尝试重新上传他们提交的任何文件，但正常的表单数据应该可以工作。

正如 Sam 在评论中所说，您可以使用类似的代码重新提交隐藏表单，而不是调用`window.location.reload()`. 这应该可以防止大多数浏览器出现“您确定要重新提交数据”弹出窗口。

# python - Python Regex 找不到子字符串，但它应该

> ID：11164911
> 
> 赞同：1
> 
> 时间：2012-06-22T22:23:19.417
> 
> 标签：python, regex

我正在尝试使用 BeautifulSoup 解析 html 以尝试提取网页标题。有时这不起作用，因为网站写得不好，例如 Bad End 标签。当这不起作用时，我会去手动正则表达式

我有文字

```
<html xmlns="http://www.w3.org/1999/xhtml"\n      xmlns:og="http://ogp.me/ns#"\n      xmlns:fb="https://www.facebook.com/2008/fbml">\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>\n    <title>\n                    .@wolfblitzercnn prepping questions for the Cheney intvw. @CNNSitRoom today. 5p. \n            </title>\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />... 
```

我正在尝试获取`<title>`and`</title>`标签之间的值。它应该相当简单，但它不起作用。这是我的python代码。

```
result = re.search('\<title\>(.+?)\</title\>', html)
if result is not None:
    title = result.group(0) 
```

无论出于何种原因，这都不适用于此文本。它返回 result.group() 作为 None 或者我得到一个 AttributeError。AttributeError：“NoneType”对象没有属性“组”

我已经将此文本 C&P'd 到在线 python 正则表达式开发人员中，并尝试了所有选项（re.match、re.findall、re.search），它们在那里工作，但无论出于何种原因，在我的脚本中它都无法在两者之间找到任何东西这些标签。甚至尝试其他正则表达式，例如

```
<title>(.*?)</title> 
```

ETC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:28:27.900

您也应该使用[dotall 标志](http://docs.python.org/library/re.html#re.DOTALL)来`.`匹配换行符。

```
result = re.search('\<title\>(.+?)\</title\>', html, re.DOTALL) 
```

正如文档所说：

> ...没有此标志，`'.'`将匹配*除*换行符以外的任何内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:28:12.393

如果你想在`<title>`and`<\title>`标记之间获取测试，你应该使用这个正则表达式：

```
pattern = "<title>([^<]+)</title>"

re.findall(pattern, html_string) 
```

# php - 如何从 Smarty 模板构造新对象？

> ID：11164913
> 
> 赞同：3
> 
> 时间：2012-06-22T22:23:54.383
> 
> 标签：php, smarty

我想做的是：

```
{myfunc myattribute=new MyClass('arg1', 'arg2')} 
```

但是当我尝试时它给了我一个错误，说函数 MyClass 没有定义。

我一直在使用的解决方法是创建一个像这样的顶级函数：

```
function MyClass($arg1, $arg2) { return new MyClass($arg1, $arg2); } 
```

然后在模板中做：

```
{myfunc myattribute=MyClass('arg1', 'arg2')} 
```

但是有没有办法避免为每个我想从 Smarty 对比的类创建一个新的顶级函数？

我想我也可以创建一个只使用类名的函数来让我构造任何类，但这是一种丑陋的解决方案。

编辑：对于每个告诉我违反最佳实践的人，也许这会让你感觉更好：

我正在构建的对象是一个用于呈现一些 html 的小部件。实际代码如下所示：

```
{render_widget widget=new MyWidget() id="myid" name="myname"} 
```

另外，不幸的是，我目前停留在 PHP 5.2 上，所以我不能使用闭包。我可以使用最新版本的 Smarty3，虽然我目前使用的是 Smarty 3.0 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:51:15.650

来自[http://www.smarty.net/best_practices](http://www.smarty.net/best_practices)

1.  不要嵌入 PHP
2.  保持 PHP 结构分离
3.  保持业务逻辑分离

在您的情况下，您将表示逻辑与业务逻辑混合在一起 - 这很糟糕。

但是，您可以编写自定义 Smarty 插件（包装器）来创建自定义对象 - 并且（我认为）它是更合适的“Smarty-way”解决方案。

请参阅[http://www.smarty.net/docsv2/en/plugins.tpl](http://www.smarty.net/docsv2/en/plugins.tpl)和[http://www.smarty.net/docsv2/en/plugins.functions.tpl](http://www.smarty.net/docsv2/en/plugins.functions.tpl)

例如。

定义：

```
function smarty_function_custom_class($params, &$smarty)
{
    $class = $params['class'];       
    $smarty->assign($params['var'], new $class());  
} 
```

用法：

```
{custom_class var='myObject' class='MyClass'} 
```

* * *

**更新**

所以，如果你有这样的结构：

```
{render_widget widget=new MyWidget() id="myid" name="myname"} 
```

您可以`render_widget`通过以下方式更改您的：

```
function smarty_function_render_widget($params, &$smarty)
{
    $class = $params['widget'];       

    $id = $params['id'];
    $name = $params['name'];

    $widget = new $class($id, $name);

    /**
     *  if you need object in your template, assign it to same variable:
     */
    $smarty->assign($params['widget'], $widget);
    // rest of your code    
} 
```

之后，您可以通过以下方式使用它：

```
{render_widget widget="MyWidget" id="myid" name="myname"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:36:02.440

使用[闭包](http://php.net/manual/en/functions.anonymous.php)怎么样？

```
{myfunc myattribute=function() { return new MyClass('arg1', 'arg2'); }} 
```

这不是最漂亮的东西，但它应该可以完成工作。（作为旁注，您可能需要考虑在将来某个时候切换到[PHP 模板语言）](http://phptemplatinglanguage.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T23:00:40.340

除非我严重误读了你正在以错误的方式处理它的问题。Smarty 应该只保存 html 和 smarty 变量（很少有例外）。你会想用 PHP 编写你的类并在那里实例化一个对象并将它传递给 smarty。这是一个例子：

php：

```
class Class_name
{
    private $int;

    public function funtion_name()
    {
        $this->int = 1;
        return $this->int;
    }
}

//instantiate the object  

$obj = new Class_name();

$smarty->('smarty_variable_name', $obj); 
```

聪明的：

```
$smarty_variable_name->funtion_name()} 
```

这应该输出 1。

也请耐心等待，我在手机上写了这个:(

# c++ - 如何为 C++ 函数生成包装？

> ID：11164914
> 
> 赞同：1
> 
> 时间：2012-06-22T22:23:57.380
> 
> 标签：c++, boost, boost-mpl, boost-fusion

我正在尝试创建一种通用的方法来包装 C++ 函数（来自不同的语言）。我有一个参数列表（和一个迭代器）和一个要在参数列表上调用的特定 C++ 函数。我试图找到某种方式将参数列表解压缩为我的函数的参数。

我目前的做法是：

1.  使用 Boost::FunctionTypes 以序列的形式获取函数的参数。
2.  使用参数类型的值进行转换，创建一个包含参数值的 Boost::Fusion 列表。
3.  使用 boost::fusion 的调用使用创建的列表调用函数。

步骤 (1) 和 (2) 看起来都相当简单。但是，我不知道如何进行第二步（或者如果它甚至可能——混合编译时和运行时似乎有点奇怪）。

有没有人知道如何做第二步，或者解决这个问题的更好方法？

我知道 Boost::Python 必须做类似的事情，但是代码有点密集，以便很好地了解正在发生的事情。

**更新**

我有一个部分解决方案，它适用于（至少）简单的情况。处理参考仍然存在问题。

希望有人可以发布更好的解决方案。

该列表包含指向基类 A 的指针，所有其他使用的类都从该基类派生。我有两个子类 B 和 C，它们包含不同的值类型（int 和 string）。

运算符 convert 接受给定的类并获取基础值。这些值通过转换收集到一个序列中，然后将其提供给调用。

```
class A {
public:
    A() {}
    virtual ~A() {} 
};

class B: public A {
protected:
    int value;
public:
    B() {}  
    B(int v): value(v) {}

    int getValue() { return value; }
};

class C: public A {
protected:
   string value;
public:
    C() {}  
    C(const string &v): value(v) {}

    string &getValue() { return value; }
};

// this pattern was copied from the test files from the fusion library
struct convert {
    // keep a reference to the parameter we're going to unpack
    list<A *>::iterator &param;

    convert(list<A *>::iterator &param): param(param) {}

    template<typename Sig>
    struct result;

    template <typename T>
    struct result<convert(T)> {
        typedef T type;
    };

    // this must be specialized in order to properly deal with the return types
    template <typename T>
    T operator ()(T type) const {}  
};

template <>
int convert::operator ()(int type) const {
    B *b = dynamic_cast<B *>(*param++);
    if (b != NULL) return b->getValue();
    throw error("illegal cast");
}

template <>
string convert::operator ()(string type) const {
    C *c = dynamic_cast<C *>(*param++);
    if (c != NULL) return c->getValue();
    throw error("illegal cast");
} 
```

最后，调用一个函数：

```
// create a parameter list (usually this would be passed to us)
list<A *> params;
params.push_back(new B(2));
params.push_back(new C("test"));

// point to beginning of parameter
list<A *>::iterator pos = params.begin();

// foo is the function we're going to call,
typedef BOOST_TYPEOF(foo) params_type;

// use the parameter list of foo to unpack the parameter list
auto passedParams = fusion::as_list(fusion::transform(function_types::parameter_types<params_type>(), trans(pos)));

// finally, call foo with the sequence that was created by the transform
fusion::invoke(foo, passedParams); 
```

# xml - 通过 XSLT 转换 XML

> ID：11164918
> 
> 赞同：1
> 
> 时间：2012-06-22T22:25:03.553
> 
> 标签：xml, xslt

我有一个 XML

**编辑：**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="xsl.xslt"?> 
<CATALOG>
<CD>        
</CD>   
</CATALOG> 
```

我有 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    xmlns:xs="http://www.w3.org/2001/XMLSchema" >
<xsl:output exclude-result-prefixes="xsl xs" indent="yes"/>

 <xsl:template match="*">      
<xsl:element name="{lower-case(local-name())}">
    <xsl:apply-templates/>
</xsl:element>
</xsl:template>    

</xsl:stylesheet> 
```

我想检查我认为应该是的输出

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
<cd>        
</cd>   
</catalog> 
```

我可以在哪里检查或验证输出是否正确。我需要为此使用任何工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:31:59.557

添加

```
<?xml-stylesheet type="text/xsl" href="xsl.xslt"?> 
```

到 xml dec 下的 xml 文件并在 Web 浏览器中打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T19:52:24.547

您可以将它放在 XML 数据的顶部并在浏览器中运行它。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
<?xml-stylesheet type="text/xsl" href="Your_xslt_file.xsl"?> 
```

让我知道这是否有帮助.. :)

# c# - 为什么 HttpListener Start 方法 Dispose 异常的东西？

> ID：11164919
> 
> 赞同：1
> 
> 时间：2012-06-22T22:25:03.550
> 
> 标签：c#, .net, httplistener

HttpListener 有一些我真的不明白的地方。

下面的代码不言自明，并以一种方式暴露了“问题”。

我只是用相同的单个前缀实例化两个不同的 HttpListener。然后我启动第一个侦听器，当然当我尝试启动第二个侦听器（相同的前缀）时我得到一个 HttpListenerException .. 到目前为止一切都很好。

好的，我的错（或者如果我们正在使用配置工具，则是最终用户的错）。不用惊慌，我将清除第二个侦听器的前缀并指定一个新的...或停止第一个侦听器并尝试重新启动第二个侦听器，或者其他...

但不能做到这一切，因为一旦我尝试访问第二个侦听器前缀或其他任何内容，我就会得到一个 ObjectDisposedException（无法访问已处置的对象。对象名称：'System.Net.HttpListener'）。

我的问题是为什么？我在 HttpListener 文档中看不到任何内容，说明在 HttpListenerException 上，一些 HttpListener 对象的内部内容以某种方式被处置，并且该对象从那时起就没有用了......

所以这意味着如果我启动一个 HttpListener 并得到一个 HttpListenerException ，无论如何我都必须重新创建一个全新的 HttpListener 对象？对我来说似乎有点奇怪（但可能有另一种方式或一个很好的理由）。

提前感谢您的回答！

```
var listener1 = new HttpListener();
listener1.Prefixes.Add("http://localhost:8080/MyHandler/");
listener1.Start();

var listener2 = new HttpListener();
listener2.Prefixes.Add("http://localhost:8080/MyHandler/");

try
{
   listener2.Start();
}
catch (HttpListenerException ex)
{
  listener2.Prefixes.Clear(); // BAM ! ObjectDisposedException
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:29:50.070

异常意味着出现了可怕的错误。它不会允许毫无戒心的消费者继续使用可能损坏且不稳定的对象，而是自行处置。只需创建新的侦听器，并且很高兴您不必担心使用可能无用的对象。

# c# - 在 GridView 中构建超链接字段

> ID：11164921
> 
> 赞同：1
> 
> 时间：2012-06-22T22:25:12.720
> 
> 标签：c#, asp.net, gridview

我正在创建一个数据表，然后将其链接到我的 ASP.NET 网页上的 GridView，此 GridView 中有两列，我希望将第二列显示为超链接字段。这是代码

```
 protected void btnSearch_Click(object sender, EventArgs e)
{

    DataTable SearchTable = new DataTable();
    DataColumn Title = new DataColumn("Title", typeof(System.String));
    DataColumn url = new DataColumn("url", typeof(System.String));
    SearchTable.Columns.Add(Title);
    SearchTable.Columns.Add(url);
    DataRow ResultRow = null;

    var bingContainer = new Bing.BingSearchContainer(new Uri("https://api.datamarket.azure.com/Bing/Search/"));
    var accountKey = "MyKey";

    // the next line configures the bingContainer to use your credentials.
    bingContainer.Credentials = new NetworkCredential(accountKey, accountKey);

    // now we can build the query
    var webQuery = bingContainer.Web(this.txtSearch.Text, null, null, null, null, null);

    var webResults = webQuery.Execute();

    foreach (var result in webResults)
    {

        ResultRow = SearchTable.NewRow();
        ResultRow["Title"] = result.Title;
        ResultRow["url"] = result.Url;  //I want this Field as a HyperLink

        SearchTable.Rows.Add(ResultRow);
    }

    grdResult.DataSource = SearchTable;
    grdResult.DataBind();

} 
```

知道如何将“Url”字段作为超链接字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:59:58.920

由于您的字段是字符串类型，您可以将超链接添加为文本：

```
ResultRow["url"] = string.format("<a href='{0}'>{0}</a>", result.Url); 
```

您最好让视图处理此问题并仅存储 url：

```
 <asp:TemplateField>
        <ItemTemplate>
            <a href='<%# Eval("url") %>'><%# Eval("url") %></a>
        </ItemTemplate>
     </asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:01:16.260

```
DataTable SearchTable = new DataTable();
DataColumn Title = new DataColumn("Title", typeof(System.String));
DataColumn url = new DataColumn("url", typeof(System.String));
SearchTable.Columns.Add(Title);
SearchTable.Columns.Add(url);
DataRow ResultRow = null;

var bingContainer = new Bing.BingSearchContainer(new Uri("https://api.datamarket.azure.com/Bing/Search/"));
var accountKey = "MyKey";

// the next line configures the bingContainer to use your credentials.
bingContainer.Credentials = new NetworkCredential(accountKey, accountKey);

// now we can build the query
var webQuery = bingContainer.Web(this.txtSearch.Text, null, null, null, null, null);

var webResults = webQuery.Execute();

foreach (var result in webResults)
{

    ResultRow = SearchTable.NewRow();
    ResultRow["Title"] = result.Title;
    ResultRow["url"] = result.Url;  //I want this Field as a HyperLink

    SearchTable.Rows.Add(ResultRow);
}

grdResult.DataSource = SearchTable;
grdResult.DataBind(); 
```

这就是你如何将标题和 URL 与 Grid 绑定

```
<asp:GridView ID="grdResult" runat="server" AutoGenerateColumns="False">
        <Columns>
            <asp:TemplateField HeaderText="Title">
                <HeaderTemplate>
                    Title
                </HeaderTemplate>
                <ItemTemplate>
                    <%#DataBinder.Eval(Container.DataItem, "Title")%></span>
                </ItemTemplate>
                <FooterTemplate>
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="URL">
                <HeaderTemplate>
                    URL
                </HeaderTemplate>
                <ItemTemplate>
                    <a href="<%#DataBinder.Eval(Container.DataItem, "url")%>" target="_blank">
                        <%#DataBinder.Eval(Container.DataItem, "url")%></a><br />
                </ItemTemplate>
                <FooterTemplate>
                </FooterTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

希望这可以帮助。您也可以访问此链接，让您清楚了解使用 Bing API [Buena Digital](http://www.buenadigital.com/blog/2012/05/25/Search-the-web-using-the-new-Bing-API#.T-TzHpH4IWY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T13:54:15.137

`<asp:HyperLinkField HeaderText="URL" DataTextField="URLName" runat="server" DataNavigateUrlFields ="URLName"//This must be present DataNavigateUrlFormatString ="{0}"/>`

这应该可以解决您的问题或其他有类似问题的人

# python - 奇怪的 Python 函数作用域行为

> ID：11164930
> 
> 赞同：6
> 
> 时间：2012-06-22T22:26:06.550
> 
> 标签：python

我对这种范围行为感到困惑：

```
class Bar:
    def __init__(self):
        for fn in ["open","openW","remove","mkdir","exists","isdir","listdir"]:
            print "register", fn
            def func_wrapper(filename):
                print "called func wrapper", fn, filename
            setattr(self, fn, func_wrapper)

bar = Bar()
bar.open("a")
bar.remove("b")
bar.listdir("c") 
```

这给出了输出：

```
register open
register openW
register remove
register mkdir
register exists
register isdir
register listdir
called func wrapper listdir a
called func wrapper listdir b
called func wrapper listdir c 
```

但我原以为`func_wrapper`这总是正确的功能。我知道的范围`func_wrapper`是整个函数，但我在每次循环迭代中重新定义它，最后一个实例被保存在属性中。我也尝试在`func_wrapper = None`下面添加，`setattr`但这没有帮助（我也会想知道......）。

我瞎了吗？我什至不知道如何解决/解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T22:33:22.007

要么与

```
class Bar:
    def __init__(self):
        for fn in ["open","openW","remove","mkdir","exists","isdir","listdir"]:
            print "register", fn
            def func_wrapper(filename, fn=fn):
                print "called func wrapper", fn, filename
            setattr(self, fn, func_wrapper) 
```

或者，更稳健地，使用

```
def mkwrapper(fn):
    def func_wrapper(filename):
        print "called func wrapper", fn, filename
    func_wrapper.__name__ = fn
    return func_wrapper

class Bar:
    def __init__(self):
        for fn in ["open","openW","remove","mkdir","exists","isdir","listdir"]:
            print "register", fn
            func_wrapper = mkwrapper(fn)
            setattr(self, fn, func_wrapper) 
```

在您的原始示例中，所有生成的函数都访问相同的外部变量`fn`，该变量在每次循环运行时都会发生变化。在更正的示例中，可以防止这种情况发生。

# android - Android强制密码锁定？

> ID：11164935
> 
> 赞同：2
> 
> 时间：2012-06-22T22:26:36.273
> 
> 标签：android, enterprise, mdm

是否可以在强制最终用户使用密码锁的 Android 设备上部署移动配置文件？与使用 iOS 设备的公司可以部署移动配置 XML 文件的方式类似，该文件强制执行密码锁定要求等设置。android 有没有类似的东西？如果是这样，哪些版本的android支持这个？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:48:55.543

是的。你这样做的方式是使用 Android 的[设备管理](http://developer.android.com/guide/topics/admin/device-admin.html)工具。

> Android 2.2 通过提供 Android 设备管理 API 引入了对企业应用程序的支持。设备管理 API 在系统级别提供设备管理功能。这些 API 允许您创建在企业环境中有用的安全感知应用程序，其中 IT 专业人员需要对员工设备进行丰富的控制。

简而言之，您通过一个简短的工作流程向用户发送要求他们以设备管理员身份批准您的应用程序的活动，然后您可以使用[DevicePolicyManager](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html) API 来定义设备的安全策略（例如密码策略）。

我提供的第一个链接非常好，它会引导您完成整个过程，所以我不会尝试在这里复制它。

# php - 如何在 PHP 中使用 % （模数）来挑选每一个第一个、第二个和第三个结果？

> ID：11164937
> 
> 赞同：1
> 
> 时间：2012-06-22T22:26:43.247
> 
> 标签：php, mysql, modulus

我正在使用 PHP while 循环从数据库中获取数据。忽略我从数据库中检索的数据并专注于我获取的记录数量，即 4。

我希望能够获取第一条记录并将其插入名为“div1”的 div 并获取第二条记录并将其插入名为“div2”的 div 中，获取第三条记录并将其插入名为“div3”的 div .

当涉及到第 4 条记录时，我想将它插入到名为“div1”的 div 中，依此类推。

我已经设法获得了每第三个结果，因此跳过了第一条和第二条记录，并能够使用以下代码中的代码片段对第三条记录进行处理：

```
if ($i % 3 < 2) { 
```

我很难适应它来做我想做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:29:41.823

你想要的是一些变化

```
$targetDivNumber = ($i % 3) + 1; 
```

[**看到它在行动**](http://ideone.com/S54XI)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:29:05.530

尝试类似（伪代码）

```
if ($i % 3 = 0) {put in div1}
if ($i % 3 = 1) {put in div2}
if ($i % 3 = 2) {put in div3} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T22:33:19.460

使用以下代码，您也可以这样做：

```
$cont = 1;

while( fetch results from query )
{
     if($cont == 1)
         put in div 1;
     else if($cont == 2)
         put in div 2;
     else if($cont == 3)
         put in div3;

     $cont = $cont <= 3 ? $cont += 1 : 1;
} 
```

# google-apps-script - GAS - ScriptProperties.setProperty("myName", null) 的数据错误；

> ID：11164939
> 
> 赞同：0
> 
> 时间：2012-06-22T22:27:09.770
> 
> 标签：google-apps-script

我正在尝试了解 GAS 中的 ScriptProperties 对象。

我尝试将属性设置为 null，但出现错误。

我可以理解是否像 JavaScript 一样，设置 null 值会取消定义该属性。

但是你为什么不允许这个值呢？允许脚本取消定义脚本（或用户）属性似乎是合理的（对我来说）。

关于 ScriptProperties 的另一个问题（我假设 UserProperties 也是如此），为什么当我显示未定义属性的值时它显示为“未定义”，但是当我尝试测试值“未定义”（不带引号）时它确实不匹配？

看来，如果您要引入“未定义”的新特殊属性值，它应该在整个系统中保持一致。如果“未定义”是指 null，那么为什么不使用“null”一词来显示它呢？

我只是想了解这个新环境。感谢所有帮助。谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:17:26.280

有一个[开放的功能请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=236)来添加对删除属性的支持，您可以为更新加注星标。

“未定义”值不是字符串，而是 JavaScript 内置的特殊值。您可以将其称为“null”：

```
if (foo == undefined) { ... 
```

更多信息可在[w3schools 页面上找到](http://www.w3schools.com/jsref/jsref_undefined.asp)。

# java - 使用 Nutch 爬行...显示 IOException

> ID：11164940
> 
> 赞同：6
> 
> 时间：2012-06-22T22:27:10.987
> 
> 标签：java, open-source, web-crawler, nutch, ioexception

我已经开始使用 Nutch，一切都很好，直到我遇到`IOException`异常，

```
$ ./nutch crawl urls -dir myCrawl -depth 2 -topN 4
cygpath: can't convert empty path
solrUrl is not set, indexing will be skipped...
crawl started in: myCrawl
rootUrlDir = urls
threads = 10
depth = 2
solrUrl=null
topN = 4
Injector: starting at 2012-06-23 03:37:51
Injector: crawlDb: myCrawl/crawldb
Injector: urlDir: urls
Injector: Converting injected urls to crawl db entries.
Exception in thread "main" java.io.IOException: Failed to set permissions of path: \tmp\hadoop-Rahul\mapred\staging\Rahul255889423\.staging to 0700
    at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:682)
    at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:655)
    at      org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
    at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
    at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
    at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:116)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at org.apache.nutch.crawl.Injector.inject(Injector.java:217)
    at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

* * *

@jeffery --- 我降级了我的 nutch 版本 n 遇到了一个新问题，这超出了我的理解范围......请帮助......

```
$ ./nutch crawl urls -dir myCrawl -depth 4 -topN 5
cygpath: can't convert empty path
solrUrl is not set, indexing will be skipped...
crawl started in: myCrawl
root UrlDir = urls
threads = 10
depth = 4
solrUrl=null
topN = 5
Injector: starting at 2012-06-23 22:30:28
Injector: crawlDb: myCrawl/crawldb
Injector: urlDir: urls
Injector: Converting injected urls to crawl db entries.
Exception in thread "main" java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1252)
    at org.apache.nutch.crawl.Injector.inject(Injector.java:217)
    at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

这个tym有什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:47:08.510

几天前我也遇到了这个问题。较新版本的 Hadoop 在与 Windows 交互方面存在问题。您可以切换到 *nix 平台（您可能应该这样做，几乎所有对 Nutch 的支持都针对 *nix 用户）或降级您的 Nutch 版本。我发现在 Windows Server 2008 上工作的最新版本的 Nutch 是[1.2](http://archive.apache.org/dist/nutch/)。

# sqlite - SQLite FTS 有必要吗？

> ID：11164945
> 
> 赞同：0
> 
> 时间：2012-06-22T22:27:48.037
> 
> 标签：sqlite, full-text-search

我正在将 Python 与`sqlite3`.
如果我只想在一列中搜索单词，或者我可以只使用 FTS3 或 FTS4，那么使用 FTS3 或 FTS4 是否有优势`LIKE "%word%"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:04:11.683

虽然是的，但您可以使用 处理最简单的情况`LIKE '%word%'`，FTS 允许用户查询，例如`clown NOT circus`（匹配谈论小丑而不是马戏团的行）。它处理词干（嗯，用英语），以便`break`匹配`breaks`但不匹配`breakdance`。它还以不同的方式构建索引，因此这种查询的搜索速度要快得多，并且不仅可以返回匹配发生的位置，还可以返回匹配文本的片段。

最后，这些潜在复杂的用户查询的所有解析都为您完成；那是您根本不必编写的代码。

# c# - 如何更新绑定到文本框的属性？

> ID：11164948
> 
> 赞同：0
> 
> 时间：2012-06-22T22:28:08.513
> 
> 标签：c#, windows-phone-7, mvvm, focus

我有一个绑定到文本框的字符串属性。在同一屏幕上，应用栏中有 2 个按钮，其中一个是接受按钮。现在，如果我开始在文本框中输入内容并点击接受按钮而不使文本框失去焦点，那么当我在我的视图模型中访问该属性时，它会说它是空的。但是，如果我在文本框外点击并且它失去焦点，则属性会更新。

有没有办法手动更新绑定，以便它可以准确地显示在文本框中输入的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:48:45.730

我已经通过直接使用 TextBox Text 属性来处理这个问题。

```
 private void SaveButton_Click(object sender, EventArgs e)
    {
        if (NameTextBox.Text == _originalName) return;

        Model.Name = NameTextBox.Text;
        Model.Save();

        if(NavigationService.CanGoBack) NavigationService.GoBack();
    } 
```

即使我的 TextBox 绑定到 Name 属性。这确保它始终是最新的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:25:05.440

尝试使用[此处](http://www.dotnetcurry.com/ShowArticle.aspx?ID=737)的行为。在之前的答案中，MVVM 会更多。

# c# - WP7 - 应用程序被停用和重新激活后导航停止工作

> ID：11164953
> 
> 赞同：0
> 
> 时间：2012-06-22T22:28:29.787
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1, windows-phone

我最近将应用程序从 WP7 7.0 升级到 7.1。现在，每次应用程序被停用和重新激活时（我按下主页按钮，然后按下后退按钮）导航将完全停止工作。NavigationService 将返回“true”并且不抛出任何异常，而导航将被简单地忽略，从而破坏应用程序。

我不知道是什么导致了问题。RootFrame_NavigationFailed 也没有捕获任何东西，并且该事件被简单地忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:24:15.187

是直接升级到7.1还是新建了项目

# vba - 重新启动计算机后引入 VBA 1004 运行时错误

> ID：11164957
> 
> 赞同：0
> 
> 时间：2012-06-22T22:28:47.777
> 
> 标签：vba, excel

我一直在尝试编写一个 VBA 脚本，它可以解析出其他文件中的特定数据，然后我可以将这些文件输入到当前打开的 Excel 工作簿中。这些文件都是制表符分隔的，并且位于与当前打开的工作簿不同的目录中。下面的代码一直有效，直到我重新启动计算机，现在我总是收到“1004 运行时错误”。当代码命中 DeliminateCSV 子例程的“select.TextToColumns”行时，总是会发生此错误。发生错误是因为程序正在选择空单元格。我相信该程序正在选择当前打开的当前为空的工作簿。我相信 ParseSummaryReport 中的 CSV 变量可能打开了错误的工作簿，但我在调试模式下观看了它，它似乎有正确的文件路径可以打开。有什么想法吗？

```
Option Explicit
    Sub PopulateSpreadSheet()

    Dim fso             As Object
    Dim fPath As String
    Dim fsoFolder As Scripting.folder
    Dim startingFolder As Scripting.folder
    Dim iNumFiles As Integer

        Set fso = CreateObject("Scripting.FileSystemObject")

        'Get path of current workbook
        fPath = ActiveWorkbook.Path
        Set fsoFolder = fso.GetFolder(fPath)

        'Move up one directory
        Set startingFolder = fsoFolder.ParentFolder

        iNumFiles = 0

        Call RecursiveFileCheck(startingFolder, iNumFiles)

    End Sub

    Sub ParseSummaryReport(ByRef i As Integer, fileName As String)
    Dim CSV As Workbook
    Dim Excel As Excel.Application

    'Data From CSV To Put In Tracking
    Dim ES_Number As String
    Dim custodian As String
    Dim EDoc_Size As Double
    Dim Email_Size As Double

    Set Excel = New Excel.Application

    'Set CSV = Excel.Workbooks.Open(fileName)
    Set CSV = Excel.Workbooks.Open(fileName, , , , , , , , "    ")

    'Deliminate the CSV File
    'Call DeliminateCSV(CSV)

    Call CSV.Close(False)

    End Sub

    Sub RecursiveFileCheck(ByRef folder As Scripting.folder, ByRef iNumFiles As Integer)
    Dim nextFolder As Scripting.folder
    Dim fileName As String
    Dim nextFile, files, subFolders

    Set files = folder.files
    Set subFolders = folder.subFolders

    'Search through all the files in this folder
    For Each nextFile In files

        'Check if this is one of the files we want
        If nextFile Like "*_SummaryReport.csv" Then

            'Summary Report Found, Parse It
            fileName = nextFile
            Call ParseSummaryReport(iNumFiles, fileName)
        End If

    Next nextFile

    'Search through all the subfolders recursively
    For Each nextFolder In subFolders
        Call RecursiveFileCheck(nextFolder, iNumFiles)
    Next nextFolder

    End Sub

    Sub DeliminateCSV(ByRef wrkBook As Workbook)
        With wrkBook
            Columns("A:A").Select
            Selection.TextToColumns Destination:=Range("A1"), DataType:=xlDelimited, _
                TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
                Semicolon:=False, Comma:=False, Space:=False, Other:=False, FieldInfo _
                :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True
        End With
    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:57:47.067

当你使用

```
With wrkBook
...
End with 
```

那么你应该添加一个“。” 在属于该工作簿的任何属性或方法之前

```
With wrkBook
    Columns("A:A").Select             
    Selection.TextToColumns Destination:=Range("A1")...
End With 
```

应该

```
With wrkBook
    .Columns("A:A").Select             
    Selection.TextToColumns Destination:=.Range("A1")...
End With 
```

您不需要选择：

```
.Columns("A:A").TextToColumns Destination:=.Range("A1")... 
```

也将工作

# java - 从 Google Documents List Api (gdata-java-client) 中的路径获取 FileEntry

> ID：11164958
> 
> 赞同：0
> 
> 时间：2012-06-22T22:28:52.783
> 
> 标签：java, google-docs, gdata

如何从其路径中获取 Google Docs FileEntry？

一旦我从 Google Docs 中的条目中获取路径，例如：

[https://doc-04-20-docs.googleusercontent.com/docs/secure/m71240U1?h=1630126&e=download&gd=true](https://doc-04-20-docs.googleusercontent.com/docs/secure/m71240U1?h=1630126&e=download&gd=true)

以后如何获取它们对应的FileEntries？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:06:40.437

在经过身份验证的 DocsService 上调用 getEntry 方法。

```
String rootUrl = "https://docs.google.com/feeds/default/private/full";
String path = //file entry's id
FileEntry entry = _service.getEntry(new URL(rootUrl + "/" + URLEncoder.encode(path, "UTF-8")), FileEntry.class); 
```

# grails - 重命名 Grails 域类中显示的字段名称

> ID：11164967
> 
> 赞同：6
> 
> 时间：2012-06-22T22:29:44.863
> 
> 标签：grails, grails-domain-class

鉴于以下 Grails 域类，我如何将 isbn 的显示字段名称重命名为“ISBN”（而不是默认的“Isbn”）和作者为“Author(s)”（而不是默认的“作者”）？

```
class Book {
    String name
    String isbn
    static hasMany = [ authors: Author ]
}

class Author {
    String name
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:44:23.840

您可以为此使用 messages.properties 文件。转到 grails-app --> i18n --> messages.properties

并定义如下消息：

```
'<full packagePath>.<domain name>.<propertyName>.<attribute>' = <message> 
```

book.isbn.label = ISBN

# eclipse - Eclipse Pro blem View 显示我已过滤掉的错误类型

> ID：11164970
> 
> 赞同：0
> 
> 时间：2012-06-22T22:29:54.050
> 
> 标签：eclipse

我有类似 27001 的错误，它们都来自输出文件夹中生成的文件。其中 90% 是 HTML 问题。我已经进入“配置内容”并在类型下取消选择“HTML 问题”，但它们仍然存在。然后，我去取消选择所有类型，它们仍然存在。我是否误解了“类型”是什么，或者这是一个错误？

是否有解决方案或任何解决方法，可能从 eclipse 检查警告的路径中删除特定文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:39:43.293

解决方案：当我从视图中删除 HTML 问题时，它一定已经停止检查与 HTML 问题有关的任何事情。这包括删除现有的。从问题视图中手动删除所有错误就可以消除它们。

# django - 在视图中返回函数调用而不是 HTTP 响应

> ID：11164971
> 
> 赞同：0
> 
> 时间：2012-06-22T22:29:57.610
> 
> 标签：django, django-views

我认为我没有看到任何说你不允许这样做（或者你是）的东西，但是你有什么理由不应该这样做吗？它似乎工作正常。

```
def get_page(request, topic_slug = 'home', tag_slug = None, form = None):

    #...

    if form is None:
        form = CommentForm()
    d = {'topic':topic, 'topics':topics, 'tags':tags, 'comments':comments, 'form':form}

    d.update(csrf(request))
    return render_to_response('page.html', d)

def save_comment(request, topic_slug):

    if request.method == 'POST':
        form = CommentForm(request.POST)

        if form.is_valid():
            #...save
        else:
            kwargs = {'topic_slug':topic_slug}
            kwargs['form'] =form
            return get_page(request, **kwargs) #<-------------- this

    return HttpResponseRedirect(reverse('get_page', kwargs = {'topic_slug':topic_slug})) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:31:18.427

`render_to_response`只是一个捷径。调用它的结果仍然`HttpResponse`是实例。

作为证明，请参阅`render_to_response()`Django 源代码中的声明：

```
def render_to_response(*args, **kwargs):
    """
    Returns a HttpResponse whose content is filled with the result of calling
    django.template.loader.render_to_string() with the passed arguments.
    """
    httpresponse_kwargs = {'mimetype': kwargs.pop('mimetype', None)}
    return HttpResponse(loader.render_to_string(*args, **kwargs),
        **httpresponse_kwargs) 
```

很不言自明。

通过这样写：

```
return get_page(request, **kwargs) 
```

你实际上做了类似的事情：

```
return render_to_response(request, kwargs) 
```

（但参数略有改变`kwargs`）。

# cocoa-touch - 点击手势识别器是否会覆盖按钮点击事件？

> ID：11164973
> 
> 赞同：10
> 
> 时间：2012-06-22T22:30:17.500
> 
> 标签：cocoa-touch, events, uigesturerecognizer

我有一个按钮，如果点击按钮以外的任何东西，我想让它消失。所以我为删除按钮设置了目标：动作：

```
[self.deleteButton addTarget:self action:@selector(deleteButtonTapped:) forControlEvents:UIControlEventTouchUpInside]; 
```

随后将点击手势识别器添加到包含视图中：

```
[self.superview addGestureRecognizer:self.tapOutsideDelete]; 
```

当我这样做时，不会执行 deleteButton 的操作，就好像无法识别按钮点击一样。在这种情况下，手势识别器确实有效。但是当我点击 deleteButton 时它也有效，这让我认为点击手势识别器优先于按钮点击。

如果我删除手势识别器，deleteButton 可以正常工作。

我显然不明白如何一起处理这两个事件。我需要做什么？

（deleteButton 正在模仿表格视图单元格的删除按钮，但在这种情况下，我将它放在标题视图中。当我点击表格中除按钮本身之外的任何位置时，我希望调用一个方法使删除按钮消失，与在单元格中的工作方式相同。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T22:35:11.473

是的，轻按手势首先会在轻按时出现。您需要实现该`gestureRecognizer:shouldReceiveTouch:`方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
            shouldReceiveTouch:(UITouch *)touch {

    if (touch.view == self.deleteButton) {
        return NO;
    }
    return YES;
} 
```

# r - R在地图上绘制填充的经纬度网格单元

> ID：11164974
> 
> 赞同：5
> 
> 时间：2012-06-22T22:30:19.150
> 
> 标签：r, plot, ggplot2, geospatial

我有一个包含许多`(x,y,z)`数据点的数据框，`(x,y)`是一个大小的经纬度单元格的右下角坐标`w`（例如 1 度网格）。该`z`值已在此单元格上平均。

我想在 R 中绘制这些点，以便整个网格单元填充一些从`z`.

结果将类似于以下图像之一： ![经纬度网格单元格填充](../Images/4e442b904d4e104f92dbb72e64713081.png)

投影本身（例如兰伯特保角圆锥，等角）并不重要，只是网格单元格绘图。

我的数据很稀疏：并非每个经纬度单元格都有与之关联的数据。

我希望是一个类似于

```
library(maps)
map("state")
grid_points(my_data,c("x","y","z"),0.5) 
```

其中 0.5 是上面的网格分辨率，表示一个 0.5 度的单元格。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T11:03:43.740

使用`spplot`或的替代方法`image`是使用`ggplot2`. 相关的几何形状是`geom_raster`和[`geom_tile`](http://had.co.nz/ggplot2/geom_tile.html)。第一个应该性能更好并产生更小的文件，第二个更标准。以下示例调用：

```
ggplot(aes(x = x, y = y, fill = value), data = dat_grid) + geom_tile() + 
  geom_path(data = ant_ggplot) 
```

源自我的[这篇博](http://www.numbertheory.nl/2011/11/08/drawing-polar-centered-spatial-maps-using-ggplot2/)文。此外，还支持通过封装`ggplot2`进行一系列投影，详情请参阅。[`mapproj`](http://cran.r-project.org/web/packages/mapproj/index.html)[`coord_map`](http://had.co.nz/ggplot2/coord_map.html)

以下是一个工作示例（前提是您已定义`YOUR_DATA`具有 x、y、z 列）：

```
library(ggplot2)
library(maps)
us_states <- map_data("state")
(ggplot(aes(x=x,y=y,fill=z),data=YOUR_DATA) + geom_tile())+geom_polygon(data=us_states,aes(x=long, y=lat, group=group), colour="black", fill="white", alpha=0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T22:43:06.333

如果你的 data.frame 是“x”，试试这个：

```
library(sp)
coordinates(x) <- c("x", "y", "z")
gridded(x) <- TRUE
image(x, col = terrain.colors(256), useRaster = TRUE) 
```

要获得真正准确的答案，您应该提供数据样本，希望是整个 data.frame 或您下载的源以及您用来将其读入 R 的代码。

如果上面的代码在这`gridded()<-`一步失败，那么很可能你的`x`and`y`值实际上并没有提供一个规则的网格，这是你的图所暗示的。如果它们确实是网格化的经度/纬度值，并且您需要将它们投影到图像中的值，那么请查看`raster`包，或更一般地说是`rgdal`包。

```
library(raster)
?projectRaster

library(rgdal)
?project
?spTransform 
```

（在我看来，这些图就像“北美的阿尔伯斯等面积和兰伯特等角圆锥投影”之一，如本网站所示：http: [//www.colorado.edu/geography/gcraft/notes/mapproj/mapproj_f.html](http://www.colorado.edu/geography/gcraft/notes/mapproj/mapproj_f.html)）。

请参阅[http://spatialreference.org](http://spatialreference.org)以获取投影的 PROJ.4 字符串，您可以在`sp`或中使用它`raster`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T07:02:00.857

我最近尝试做那种地图，最后在绘图之前使用`interp`库`akima`的功能将我的 z 数据内插到规则网格中（任何类型的投影都必须在使用之前完成`interp`）：

```
library(akima)
interp(x,y,z,xo=seq(min(x),max(x),by=0.5),yo=seq(min(y),max(y),by=0.5),extrap=FALSE,linear=TRUE) -> xygrid
image(xygrid,breaks=seq(min(z),max(z),length=10), col=1:10) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T03:32:07.637

你可以这样做：

```
library(raster)
r <- rasterFromXYZ(xyz)
plot(r) 
```

# http - 如何根据 Content-Length 标头检查实际内容长度？

> ID：11164976
> 
> 赞同：5
> 
> 时间：2012-06-22T22:30:28.647
> 
> 标签：http, node.js

用户可以将文档发布到我们的 Web 服务。我们将其流式传输到其他地方。但是，在流式传输结束时，我们需要确保他们没有在 Content-Length 上撒谎。

我假设如果`headerContentLength > realContentLength`，请求将等待他们发​​送其余的，最终超时。所以这可能没问题。

如果`headerContentLength < realContentLength`呢？即，如果他们说完成后继续发送数据怎么办？

这是否由 Node.js 以任何方式处理？如果没有，有什么好的检查方法？我想我可以只计算一些`data`事件侦听器内部的字节数——即`req.on("data", function (chunk) { totalBytes += chunk.length; })`. 不过，这似乎是一个kludge。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T22:42:39.307

要检查请求的实际长度，您必须自己添加。`data`块是`Buffer`s 并且它们具有您可以添加的属性`.length`。

如果您使用 指定编码`request.setEncoding()`，则您的`data`块将`String`改为 s。在这种情况下，调用`Buffer.byteLength(chunk)`以获取长度。（`Buffer`是节点中的全局对象。）

将每个块的总数加起来，您就会知道发送了多少数据。这是一个粗略的（未经测试的）示例：

```
https.createServer(function(req, res) {
    var expected_length = req.headers['content-length']; // I think this is a string ;)
    var actual_length = 0;
    req.on('data', function (chunk) {
        actual_length += chunk.length;
    });
    req.on('end', function() {
        console.log('expected: ' + expected_length + ', actual: ' + actual_length);
    });
}); 
```

注意：`length`指的是`Buffer`'s 内容的最大长度，而不是实际长度。但是，它在这种情况下是有效的，因为块缓冲区总是以完全正确的长度创建的。如果您在其他地方使用缓冲区，请注意这一点。

# mysql - MySQL / Ruby on Rails 设置问题

> ID：11164978
> 
> 赞同：0
> 
> 时间：2012-06-22T22:31:03.283
> 
> 标签：mysql, ruby-on-rails, macos

我正在尝试让 ruby​​ on rails 在 Mac OS X 10.7.4 上与 MySQL 很好地配合使用。我遇到了以下问题（我的 Gemfile 中有 gem 'mysql2'）：

```
dlopen(/Users/Ringo/.rvm/gems/ruby-1.9.3-p194@gemset/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib 
```

几个潜在的问题：我已经安装了带有 dmg 的 mysql：http: [//dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)

我不知道我是否需要一些特定的 mysql 客户端库或什么。即使我安装了它，我也不必指定 mysql 用户名/密码。我确实安装了它附带的 prefpane，声称 mysql 正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:43:29.383

这是一个简单的：

```
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib 
```

# c++ - std::ostringstream 未返回有效字符串

> ID：11164982
> 
> 赞同：6
> 
> 时间：2012-06-22T22:31:54.877
> 
> 标签：c++, winapi, std, ostringstream

我正在尝试使用 std::ostringstream 将数字转换为字符串（char *），但它似乎不起作用。这是我的代码：

```
#include <windows.h>
#include <sstream>

int main()
{
    std::ostringstream out;
    out << 1234;

    const char *intString = out.str().c_str();

    MessageBox(NULL, intString, intString, MB_OK|MB_ICONEXCLAMATION);

    return 0;
} 
```

结果消息框中根本没有文本。

这让我相信调用`out.str().c_str()`返回的是无效字符串，但我不确定。由于到目前为止我已经将这个程序精简了但仍然遇到问题，我一定犯了一个令人尴尬的简单错误。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T22:36:21.877

`out.str()`返回 a `std::string` *by value*，这意味着您正在`.c_str()`临时调用。因此，在`intString`初始化时，它已经指向无效（已破坏）的数据。

缓存结果`.str()`并使用它：

```
std::string const& str = out.str();
char const* intString = str.c_str(); 
```

# polynomial-math - 计算非常高次多项式的根

> ID：11164985
> 
> 赞同：1
> 
> 时间：2012-06-22T22:32:07.023
> 
> 标签：polynomial-math, numerical-computing

这是我的问题；对于我的研究，我相信我正在查看的复数正是一些高次多项式的（非常大的）根集，度数为 $\sim 2^n$ (~ 2^n) 其中 $1 \le n \le 10 \sim 15$ (1 <= n <= 10 ~ 15)。Mathematica 已经在我的计算机上运行了一整天，我想知道是否有任何其他程序会比 Mathematica 更快，以便我可以计算更多的这些根。如果我有更多的例子，那真的很有帮助。我需要程序能够做的事情很简单：我给你一个非常高次的多项式，我想用数字绘制它的复数根。我不在乎多样性。

提前致谢，

# iphone - Objective-C - 如何保存和加载包含图像的数组

> ID：11164986
> 
> 赞同：0
> 
> 时间：2012-06-22T22:32:08.627
> 
> 标签：iphone, objective-c, ios, persistence

大家晚上好，我希望你能帮助我解决我的一个 Objective-C 问题。

在我的应用程序中，我有一个包含 16 个对象的可变数组；对象是图像。

我想保存并加载数组，以便在用户退出程序时保留图像。

我是数据持久性的新手，我可以看到有几种保存和加载数据的方法，并且我熟悉保存和加载数据的 NSUserDefaults 方法。我知道您不能以这种方式保存带有图像的数组。

有人可以解释一下，也许是一个保存和加载图像数组的最佳和最简单方法的例子？任何帮助都会很棒，因为我不确定最好的方法。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:37:58.867

考虑使用`NSKeyedArchiver`.

```
// Archive
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:theArray];
NSString *path = @"/Users/Anne/Desktop/archive.dat";
[data writeToFile:path options:NSDataWritingAtomic error:nil];

// Unarchive
NSString *path = @"/Users/Anne/Desktop/archive.dat";
NSMutableArray *theArray = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; 
```

通过这种方式，您可以确保未归档的数组与原始数组相同。
所有符合 NSCoding 协议的类都可以被`NSKeyedArchiver`.

注意：您可以使用任何扩展名。

**回复评论：**

以下应该适用于 iOS：

```
// The Array
NSMutableArray * array = [[NSMutableArray alloc] init]; 

// Determine Path
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [ [paths objectAtIndex:0] stringByAppendingPathComponent:@"archive.dat"];

// Archive Array
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:array];
[data writeToFile:path options:NSDataWritingAtomic error:nil];

// Unarchive Array
NSMutableArray *theArray = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; 
```

# linux - 将linux时间设置为毫秒精度

> ID：11164988
> 
> 赞同：3
> 
> 时间：2012-06-22T22:32:33.923
> 
> 标签：linux, date, system, time-precision

我有一个嵌入式 Linux 设备，它通过串行通信协议与另一个“主”设备接口。主设备会定期将其日期传递给从设备，因为稍后从设备会将需要准确时间戳的信息返回给主设备。但是，Linux 的“日期”命令仅将系统日期设置为一秒以内。这对我们的用途来说是不够的。

有人知道如何将 Linux 机器的时间设置为比 1 秒更精确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T23:00:42.297

其他答案中给出的`settimeofday(2)`方法有一个严重的问题：它完全按照您所说的去做。:)

直接立即更改系统时间的问题在于，如果调整为负数，它会混淆获取更改前后时间的程序。也就是说，他们可以感知时间倒退。

解决这个问题的方法`adjtime(3)`是简单且可移植，或者`adjtimex(2)`复杂、功能强大且特定于 Linux。这两个调用都使用复杂的算法在一段时间内缓慢调整系统时间，仅向前，直到实现所需的更改。

顺便说一句，你确定你不是在这里[重新发明](https://secure.wikimedia.org/wikipedia/en/wiki/Network_Time_Protocol)[轮子](http://www.synclab.org/radclock/)吗？我建议您阅读 Julien Ridoux 和 Darryl Veitch 的 ACM 队列论文[《互联网上的鲁棒时序原理》](http://queue.acm.org/detail.cfm?id=1773943)。您正在研究嵌入式系统，所以我预计图 5 中的铃声会让您不寒而栗。你能说“阻尼振荡器”吗？`adjtime()`并`adjtimex()`使用这个有问题的算法，所以在某种意义上我反对我自己上面的建议，但米尔斯算法仍然比步进调整非算法好。如果您选择实施 RADclock，那就更好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T22:46:24.197

系统调用采用[`settimeofday()`](http://www.unix.com/man-page/FreeBSD/2/settimeofday/)并使用微秒精度。您必须编写一个简短的程序才能使用它，但这很简单。

```
struct timeval tv;
tv .tv_sec = (some time_t value)
tv .tv_usec = (the number of microseconds after the second)
int rc = settimeofday (&tv, NULL);
if (rc)
        errormessage ("error %d setting system time", errno); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T22:48:36.090

*   可以使用`settimeofday(2)`系统调用；接口支持微秒级分辨率。

    ```
    #include <sys/time.h>

    int gettimeofday(struct timeval *tv, struct timezone *tz);
    int settimeofday(const struct timeval *tv, const struct timezone *tz);

       struct timeval {
           time_t      tv_sec;     /* seconds */
           suseconds_t tv_usec;    /* microseconds */
       }; 
    ```

*   可以使用`clock_settime(2)`系统调用；接口提供多个时钟，接口支持纳秒级分辨率。

    ```
    #include <time.h>

    int clock_getres(clockid_t clk_id, struct timespec *res);

    int clock_gettime(clockid_t clk_id, struct timespec *tp);

    int clock_settime(clockid_t clk_id, const struct timespec
    *tp);

       struct timespec {
           time_t   tv_sec;        /* seconds */
           long     tv_nsec;       /* nanoseconds */
       };

    CLOCK_REALTIME
          System-wide real-time clock.  Setting this clock
          requires appropriate privileges.

    CLOCK_MONOTONIC
          Clock that cannot be set and represents monotonic time
          since some unspecified starting point.

    CLOCK_MONOTONIC_RAW (since Linux 2.6.28; Linux-specific)
          Similar to CLOCK_MONOTONIC, but provides access to a
          raw hardware-based time that is not subject to NTP
          adjustments.

    CLOCK_PROCESS_CPUTIME_ID
          High-resolution per-process timer from the CPU.

    CLOCK_THREAD_CPUTIME_ID
          Thread-specific CPU-time clock. 
    ```

    这个接口提供了`clock_getres(2)`调用的精确性，它可以准确地告诉你分辨率*是*什么——仅仅因为接口接受纳秒并不意味着它实际上可以*支持*纳秒分辨率。（我有一个模糊的记忆，20 ns 大约是许多系统的极限，但没有参考支持这一点。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T22:51:34.700

如果您在串行链路上运行支持 IP 的网络协议（例如，哦，PPP），您可以在“主”主机上运行 ntpd，然后在嵌入式设备上使用 ntpd 或 ntpdate 同步时间. NTP 会照顾你。

# bash - 在bash中将函数参数从大写转换为小写

> ID：11164989
> 
> 赞同：1
> 
> 时间：2012-06-22T22:33:01.503
> 
> 标签：bash, case-sensitive, tr

当我不小心打开大写锁定并尝试运行一些区分大小写的工具时，我正在尝试制作一个方便的功能来解决问题。

例如，我偶尔会发现自己在打字`MAKE DEBUG`而不是`make debug`.

我现在所拥有的非常简单：`alias MAKE="make"`编辑生成文件以复制规则，例如`DEBUG: debug`.

我更喜欢一种适用于论点的解决方案，而无需修改所涉及的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:57:51.550

### 使用 GNU sed

如果您只想让 makefile 中的所有内容都为小写，则可以使用 GNU sed 将整个内容小写：

```
sed -i 's/.*/\L&/' Makefile 
```

您还可以构建一个更具区分性的 sed 脚本，但[\L 替换转义](http://www.gnu.org/software/sed/manual/html_node/The-_0022s_0022-Command.html)是您的朋友。

### 使用 tr

由于您使用 tr 标记了您的问题，因此您可能还需要 tr 解决方案。这有点麻烦，因为 tr 不会进行就地翻译，但您可以随机播放临时文件或使用来自*moreutils*的海绵。例如：

```
tr '[[:upper:]]' '[[:lower:]]' < Makefile | sponge Makefile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:14:04.700

使用@Clayton Hughes 的`casefixer`解决方案，这里有一个解决方案可以处理有趣的事情，比如参数中的空格（`$*`搞砸了）：

```
casefixer() { eval "$(printf "%q " "$@" | tr '[:upper:]' '[:lower:]')"; }
alias MAKE='casefixer make' 
```

注意：这是一件相当危险的事情，因引起[真正奇怪的错误](https://stackoverflow.com/questions/9308606/usr-bin-find-cannot-build-its-arguments-dynamically/9322047#9322047)`eval`而享有当之无愧的声誉。然而，在这种情况下，双引号和编码命令及其参数与 %q 的组合*应该可以*防止出现问题。至少，我找不到它做任何意外的案例。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T22:39:28.867

这涉及一个脚本，但避免了我之前尝试的 Ctrl-D 问题：

对于每个命令，别名如

```
alias MAKE="casefixer make" 
```

然后是我在以下位置创建的以下文件`/usr/local/bin/casefixer`：

```
#!/bin/bash
command=`echo $1 | tr '[:upper:]' '[:lower:]'`       # convert 1st arg to lowercase, it's the command to invoke
shift                                                # remove 1st arg from $*
$command `echo "$*" | tr '[:upper:]' '[:lower:]'`    # convert arguments to lowercase, and invoke the command with them 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T23:13:38.257

这里值得一提的是`readline`命令“downcase-word”（默认绑定）。`M-u`假设您输入了“MAKE DEBUG”。如果在按回车之前捕获它，则可以使用 将光标移动到行首`C-a`。（否则，请先使用向上箭头返回命令）。然后，每次点击`M-u`，光标后面的单词都会变为小写，光标会移动到下一个单词的开头。

这有点费力，而且我看不到一次将整行小写的方法。也许有人可以改进这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T22:34:03.860

这是一个解决方案，尽管它并不完美：

```
alias MAKE="make `tr '[:upper:]' '[:lower:]`" 
```

它可以工作，但有一个不幸的问题是我需要在开始执行任何操作之前按 Ctrl-D 发送 EOF。*

# vb.net - 使用visual basic查找主板的名称和硬盘驱动器的名称

> ID：11164991
> 
> 赞同：0
> 
> 时间：2012-06-22T22:33:14.000
> 
> 标签：vb.net

我试图创建一个程序来收集有关用户个人电脑的信息。到目前为止，我已经能够收集到诸如操作系统、处理器、硬盘大小和图形信息之类的信息，我只是想知道如何收集他们正在使用的主板的名称（或型号）以及制造商他们机器中的硬盘驱动器。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:43:33.850

You can use the [WMI Code Creator](http://www.microsoft.com/en-us/download/details.aspx?id=8572) to look into what is available with WMI. Bear in mind that all of the information you want might not be available. You can try `Win32_BaseBoard` for your Motherboard information.

Example code from the Creator for Disk Drive Model information:

```
Imports System
Imports System.Management
Imports System.Windows.Forms

Namespace WMISample

    Public Class MyWMIQuery

        Public Overloads Shared Function Main() As Integer

            Try
                Dim searcher As New ManagementObjectSearcher( "root\CIMV2", "SELECT * FROM Win32_DiskDrive") 

                For Each queryObj As ManagementObject in searcher.Get()

                    Console.WriteLine("-----------------------------------")
                    Console.WriteLine("Win32_DiskDrive instance")
                    Console.WriteLine("-----------------------------------")
                    Console.WriteLine("Model: {0}", queryObj("Model"))
                Next
            Catch err As ManagementException
                MessageBox.Show("An error occurred while querying for WMI data: " & err.Message)
            End Try
        End Function
    End Class
End Namespace 
```

# registry - 未从 reg 文件设置默认值

> ID：11164996
> 
> 赞同：2
> 
> 时间：2012-06-22T22:33:40.080
> 
> 标签：registry

```
Windows Registry Editor Version 5.00

[registry\data\key]
@="Test Value" 
```

当我导入上述值时，如果我包括例如

```
"example"=dword:00000001 
```

所有数据均已正确插入，但（默认）未设置为 reg 文件中的内容，它仍然只是显示（未设置值）

```
@="Test Value" 
```

根据文档应该可以设置它，但事实并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-29T13:00:51.703

我也遇到了这个问题（例如 dword:00000001 工作和字符串（REG_SZ 类型）没有）。

通过在字符串中使用“\\”而不是“\”来解决：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\Python.exe]
 @="C:\\Programming\\Python25\\Python.exe" 
```

# .net - 识别 DataAdapter.Fill 上更改的行

> ID：11164998
> 
> 赞同：0
> 
> 时间：2012-06-22T22:33:42.127
> 
> 标签：.net, dataadapter

我有一个由多个用户同时运行的应用程序。datagridview 绑定到通过 DataAdapter 定期刷新的数据表。

是否有一种简单的方法可以识别 DataTable 的哪些行在 期间更新`DataAdapter.Fill`？

我想我可以在填充之前存储表格的副本，然后将其与更新后的表格进行比较，但我不确定是否有内置/更有效的方法来完成这项工作。