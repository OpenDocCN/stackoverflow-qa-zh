# StackOverflow 问答 11085000-11085999

# jquery - 动态替换内容

> ID：11085000
> 
> 赞同：-3
> 
> 时间：2012-06-18T14:29:20.370
> 
> 标签：jquery, ajax, html, plugins, css

我正在开发一个包含产品目录的单页网站。

这些是基本特征：

*   一页网站，带有页眉、内容和页脚 (HTML5/CSS3)
*   通过加载产品目录和每个部分而不加载整个页面来动态更改内容
*   深层链接

最好的解决方案是什么？插件？jQuery，... ?!?!

理想的解决方案是将每个内容部分放在一个单独的页面中，该页面将按需动态加载到主页。这样我就可以根据内容本身在每个页面中进行不同的设计（包括应用 jquery 插件的可能性）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:02:02.507

这个问题可能会引起辩论，但是，您可以使用 jquery 中的标准 $.ajax 调用甚至是带有回调的 $.get 调用来做您想做的事情。如

```
$.get("/link/to.php",function(data)
{
   $("#newcontent").html(data);
}); 
```

要将其绑定到链接，请使用类似于：

```
<a href="/path/to.php" data-remote="true">Link</a> 
```

然后在您的脚本中使用：

```
 $(document).ready(function(){
     $("a[data-remote]").bind("click",function()
     {
         event.preventDefault();
         $.get("/link/to.php",function(data)
         {
             $("#newcontent").html(data);
         });
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:11:44.343

抱歉之前的法语回答。

据我所知，如果后端是用 Java 完成的，[GWT](https://developers.google.com/web-toolkit/)是一个很好的解决方案，通过“地点和活动”模块，您可以轻松设置 Web 应用程序的公共部分和根据页面变化的动态部分。该模块还支持深度链接。

对于纯客户端解决方案，带有 rooter 模块的新 javascript 框架 google [angularjs](http://angularjs.org)似乎可以解决您项目的所有限制。这个框架是为轻松制作 MVC 组件而设计的，它可以是一个额外的参数。这个框架非常年轻，你可能对框架的小 Bencher 不感兴趣，以确保它足以满足你当前和未来的需求。

更一般地说，我认为您应该搜索 RIA javascript 框架。也可能是我以外的其他人会给你带来更多的答案。

希望它可能会有所帮助。

# c - 安装 c api (md5)

> ID：11085004
> 
> 赞同：0
> 
> 时间：2012-06-18T14:29:27.983
> 
> 标签：c, md5

我从之前的问题中了解到，我需要安装 C API 才能获得 md5 函数。但是我从[这里](http://userpages.umbc.edu/~mabzug1/cs/md5/md5-c-100.tar.gz)得到的文件没有自述文件。

我是个菜鸟，我知道我是个菜鸟，而且我知道很多人会喜欢告诉我我的问题有多愚蠢，但是我已经在 Google 上搜索了如何安装 C 库，但大多数结果都出现了C# 和 C++。如何安装库，重要的是，没有任何文档，我怎么知道如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:34:57.433

在这种情况下，您只需`make`在命令行上键入，它就会自动编译。看到这个关于这个概念：[http ://tldp.org/LDP/LG/current/smith.html](http://tldp.org/LDP/LG/current/smith.html)

如果没有文档，您必须自己弄清楚该库是如何工作的。顺便说一句，在这种特定情况下，它不会非常困难。计算 MD5 校验和是一项非常具体且非常狭窄的任务，因此很可能您所要做的就是类似

```
void *data = // whatever
const char *md5_checksum = calculate_md5(data, length_of_data); 
```

（伪代码）。否则你可以看看库的头文件；编写良好的库是自记录的，并且头文件中的注释使其易于使用。

# ios - 屏幕锁定时iOS背景音频停止

> ID：11085007
> 
> 赞同：8
> 
> 时间：2012-06-18T14:29:35.987
> 
> 标签：ios, audio, background, multitasking

我正在尝试让我的音频应用程序在后台播放。到目前为止，我在 info.plist 中将“应用程序播放音频”添加到了“所需的背景模式”中，并且在启动我的声音生成器之前添加了以下代码：

```
AudioSessionInitialize(NULL, kCFRunLoopDefaultMode, &interruptionListener, sgD);
AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, &routeChangeListener, sgD);

// select "Playback" audio session category
NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryError];

OSStatus propertySetError = 0;
UInt32 category = kAudioSessionCategory_MediaPlayback; 
propertySetError = AudioSessionSetProperty ( kAudioSessionProperty_AudioCategory, sizeof (category), &category );

AudioSessionSetActive(true); 
```

但是，这仅在我切换到另一个应用程序或 iPod 的主屏幕时才有效。当我关闭屏幕时，它也会关闭我的音频输出，这绝对不是我想要的。但是，stackoverflow 上的所有教程/文档/问题的答案似乎都表明，当您让背景音频工作时，在屏幕关闭时保持音频运行会自动发生。有人对我有提示吗？提前非常感谢！弗里茨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-21T19:41:49.320

这篇文章解释了这个问题：

[技术问答 QA1606 音频单元处理图 - 确保屏幕锁定时继续播放音频](https://developer.apple.com/library/ios/qa/qa1606/_index.html)

基本上，您只需要确保将所有 AudioUnit 设置为支持 4096 个切片：

```
// set the mixer unit to handle 4096 samples per slice since we want to keep rendering during screen lock
UInt32 maxFPS = 4096;
AudioUnitSetProperty(
    mMixer,
    kAudioUnitProperty_MaximumFramesPerSlice,
    kAudioUnitScope_Global,
    0,
    &maxFPS,
    sizeof(maxFPS)); 
```

# jenkins - 在 Linux 上等待 webdriver

> ID：11085018
> 
> 赞同：1
> 
> 时间：2012-06-18T14:30:03.340
> 
> 标签：jenkins, webdriver, watir

我们在 as5 服务器上使用了 watir webdriver、firefox 和 jenkins 的组合来测试我们的前端。我目前有 15 多个不同的事务测试，每几分钟运行一次。由于锁定端口未在合理的时间内释放，我经常遇到 watir 无法打开 Firefox 浏览器的问题。我已经设置了随机睡眠延迟和额外的启动（如果第一次失败）来帮助缓解这些问题，但这仍然是一个大问题。

无论如何让firefox运行并让测试简单地打开一个新选项卡，运行他们的步骤并在完成后关闭选项卡？在加载的服务器上，启动浏览器最多需要 20 秒。

如果没有，有没有更好的方法来启动 Firefox，所以它不是那么重？

我知道我们并没有以预期的方式使用 watir，但我们希望使其成为可能非常昂贵的商业解决方案的可行替代方案。

感谢您提供的任何意见。

# c# - 如何将带有空格的字符串作为程序的起始参数传递

> ID：11085023
> 
> 赞同：10
> 
> 时间：2012-06-18T14:30:26.663
> 
> 标签：c#, process

我有一个控制台项目，我想从一些参数开始`argc`。我想从我的计算机传递一条路径，比如说`C:\\My Folder`. 我怎样才能通过空格？

当我尝试阅读它时，我会得到类似`C:\\My`. 我读过我可以使用`"`. 如果是这样，我如何将它们传递给字符串（`"C:\My Folder"`），因为我是通过使用`Process.Start`and`ProcessStartInfo`命令来启动这个程序的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T14:33:50.290

将参数用双引号括起来：

```
"c:\My Folder\some.exe" /a="this is an argument" 
```

作为传递给 Process.Start 的字符串：

```
process.StartInfo.Aguments = "\"this is an argument\""; 
```

查看[此帖子和答案](https://stackoverflow.com/questions/3299444/process-start-parameter-containing-spaces-has-problems-on-xp)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:02:45.410

您可以使用分隔字符串。使用分隔字符串，您可以传递空格、换行符或任何其他字符，如斜杠、反斜杠等。

```
 example:      string path = @"\"C:\\My Folder\"";

          string name = @" sudhansu    sekhar"; 
```

# c++ - 非控制台应用程序项目中的 c++ 控制台

> ID：11085025
> 
> 赞同：3
> 
> 时间：2012-06-18T14:30:31.260
> 
> 标签：c++, windows, visual-c++

我正在使用 C++ 开发一个 Windows 应用程序，我想`cout`用于调试目的。
似乎 的效果`cout`被隐藏了，是否有一个配置选项可以让控制台窗口打开我的调试信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:35:55.327

你有几个合理的选择。一种是将入口点从 重命名`WinMain`为`main`，以便将其构建为控制台应用程序。那仍然可以使用`RegisterClass`和`CreateWindow`就好了。

显而易见的替代方法是使用`OutputDebugString`而不是`cout`. 其输出将显示在调试器中，或者任何数量的专门为显示其产生的程序而构建的程序中（基本上是不提供其他调试功能的小型调试器）。

我认为不太合理的第三种解决方案是调用`AllocConsole`分配一个控制台，然后写入它。如果您不介意使用 Windows 原生控制台函数（、、等）进行所有写作，`WriteFile`那`WriteConsoleOutput`很好。不幸的是，它不会初始化 C++ 流以与控制台一起使用，因此您需要打开指向控制台的文件流，或者找到并使用为控制台初始化流库的（未记录的）函数。虽然这可以工作，但您最终会做额外的工作来编写不可移植的代码，并且几乎没有（如果有）弥补它的优势（在这种情况下，“不可移植”甚至可能包括不使用同一编译器的其他版本，至少在您调用库的初始化函数时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:39:49.233

要将控制台窗口添加到 GUI 应用程序，您可以使用[`AllocConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)API。

然后您只需要打开特殊文件名`"CONOUT$"`并将您的流附加到它（`cout`,`cerr`等）

请参阅MSDN 上的[此说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682528%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T08:18:40.087

我相信接受的答案实际上不是您想要的。你说你只需要它来调试，而不是发布。您的最佳选择是：

a) 重定向`stdout`到`stderr`一个文件，然后检查该文件。这个你可以在 VS 项目中设置`Properties > Configuration Properties > Debugging > Command Arguments`：你应该输入`>out.txt 2>&1`. 这将输出`stdout`和`stderr``out.txt`

b）将您的调试（您说您只需要它用于调试）配置`Properties > Configuration Properties > Linker > System > SubSystem`设置为`Console (/SUBSYSTEM:CONSOLE)`. 然后您可以使用 运行该项目`F5`，但是当您的应用程序完成时它将隐藏控制台窗口。如果你运行它`Ctrl+F5`（但你不会附加调试器），那么它不会被隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:37:00.850

最简单的方法是从头开始启动控制台应用程序：

在 VisualStudio 中，**文件**>**新建项目**。选择**Win32 控制台应用程序**。选择各种选项并创建新项目。

请注意，虽然它说的是*Win32*控制台应用程序，但您可以不受限制地创建 x64 版本。

此时您有一个应用程序外壳。如果您已经有代码并且想要将其引入这个新项目，只需执行**Project** > **Add Existing Item...**并选择要包含在项目中的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:01:02.353

从 GUI 程序管理控制台是非常混乱的，我建议你用另一种方式来做。例如，如果您需要实时查看消息，则将它们显示在窗口中；如果没有，请将它们写入文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-21T08:30:41.403

只需使用`OutputDebugString()`，但请记住将您的字符集设置为多字节，或者如果您不想这样做，您可以这样编写代码：

```
// with multibyte character set:

   OutputDebugString("Failed to do something");

// without multibyte character set:

   OutputDebugString(L"Failed to do something"); 
```

# assembly - gas .org 与 nasm 中的 ORG 不同？

> ID：11085027
> 
> 赞同：2
> 
> 时间：2012-06-18T14:30:49.527
> 
> 标签：assembly, nasm, gnu-assembler

我正在使用 gnu 作为简单的引导。是这样的：

```
.text
.org 0x7c00
start:
    movw $0x7c0, %ax
    movw %ax, %ds
    movw %ax, %es
    leaw greeting_msg, %si
    call prtstr
....

end:
    .fill 510-(end - start), 1, 0
    .word 0xAA55 
```

而输出的hexdump是：

```
○ → hexdump bare.o 
0000000 0000 0000 0000 0000 0000 0000 0000 0000
*
0007c00 c0b8 8e07 8ed8 8dc0 7f36 e87c 0046 02b8
0007c10 bb4f 4115 10cd f883 754f a133 4f01 3e8d
0007c20 7c97 15b9 cd41 8310 4ff8 2275 8b66 9b16 
```

哪一个与 nasm 中的 ORG 不同？如果我使用 NASM，它会输出如下内容：

```
 ○ → hexdump test_org
0000000 c031 d88e 14be ac7c c008 0674 0eb4 10cd
0000010 f5eb feeb 6557 636c 6d6f 2065 6f74 4d20
0000020 6361 6e69 6f74 6873 0a0d 0000 0000 0000
0000030 0000 0000 0000 0000 0000 0000 0000 0000 
```

这里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:39:46.300

没有错，只是`.org`在 GAS 中不在`.org`NASM 中。`.org`在 GAS 中表示当前位置计数器前进多少，如下所示：

```
.org expr, fill 
```

其中 fill 是用于填充的内容，如果未指定，则默认为零（[此处有更多信息](http://tigcc.ticalc.org/doc/gnuasm.html#SEC112)）

`.org`在 NASM 中表示该模块将被放置的*内存地址*（从而生成正确的分支和跳转指令）（[更多信息在这里](http://www.nasm.us/doc/nasmdoc7.html#section-7.1.1)）

我建议您将 NASM 用于此类平面二进制文件，这对我来说总是很有吸引力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:32:03.113

您正在将二进制文件（来自 Nasm）与来自 (G)as 的可链接 .o 文件进行比较。我认为，如果您将“bare.o”与 ld...“ld -o bare.bin -oformat binary bare.o”（不确定语法）链接起来，您会想出更接近您期望的东西。或者......只需使用 nasm。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-05T16:09:41.440

使用`ld -Ttext 0x7c00 --oformat=binary boot.o -o boot.bin`.

# orchardcms - ContentManager.Create 什么都不做

> ID：11085028
> 
> 赞同：0
> 
> 时间：2012-06-18T14:30:53.100
> 
> 标签：orchardcms

我正在尝试在 Orchard 中构建一项服务，该服务允许我通过页面上的自定义表单创建内容。服务和内容类型定义对我来说看起来不错，但不知何故，尽管我在 Orchard 日志文件中没有收到任何错误或其他迹象，但使用 IContentManager 创建新内容对我没有任何帮助。

## 涉及的零件

接受表单值的控制器

```
[HttpPost]
public ActionResult Create(CreateSopViewModel viewModel)
{
    if(!ModelState.IsValid)
    {
        var shape = _shape.CreateContent();
        shape.Header = _shape.Parts_Title(Title: "New item");

        // Add the original fields to the shape.
        shape.Title = viewModel.Title;
        shape.Description = viewModel.Description;
        shape.InitialComments = viewModel.InitialComments;

        return new ShapeResult(this, shape);
    }

    // Store the new procedure in the database
    _service.CreateContentItem(
        viewModel.Title,viewModel.Description,viewModel.InitialComments);

    // Redirect the user back to the homepage.
    return Redirect("~/");
} 
```

包含 CreateContentItem 方法的服务：

```
public void CreateContentItem(string title, string description, string initialComments)
{
    // Initialize a new content item based on the SOP type
    var customPart = _services.ContentManager.New<MyCustomPart>("CustomContentType");

    customPart.Description = description;
    customPart.Identifier = BuildIdentifier(title);
    customPart.ContentItem.As<TitlePart>().Title = title;

    _services.ContentManager.Create(customPart.ContentItem);
} 
```

内容部分+记录

```
public class MyCustomPart: ContentPart<MyCustomPartRecord>
{
    [Required]
    public string Identifier
    {
        get { return Record.Identifier; }
        set { Record.Identifier = value; }
    }

    [Required]
    public string Description
    {
        get { return Record.Description; }
        set { Record.Description = value; }
    }
}

public class MyCustomPartRecord: ContentPartRecord
{
    public virtual string Identifier { get; set; }

    public virtual string Description { get; set; }
} 
```

迁移

```
SchemaBuilder.CreateTable(typeof(MyCustomPartRecord).Name, table => table
    .ContentPartRecord()
    .Column<string>("Description")
    .Column<string>("Identifier"));

ContentDefinitionManager.AlterPartDefinition("StandardOperationalProcedurePart", builder => builder
        .Attachable(true));

ContentDefinitionManager.AlterTypeDefinition("CustomContentType", builder => builder
    .DisplayedAs("Custom Content Type")
    .WithPart("TitlePart")
    .WithPart("MyCustomPart")
    .Creatable(true)); 
```

## 问题

同样，我没有收到任何错误，不是在日志中，也不是在 Visual Studio 中。但是，我的新内容项没有被创建，或者至少，我在内容下的站点管理部分中看不到它。

发生了什么，我该如何调试这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:27:03.457

我有一个类似的问题，当我使用采用枚举值的重载`Create`方法时解决了这个问题：`VersionOptions`

`content.Create(customPart.ContentItem, VersionOptions.Published);`

即使内容项不可创建，这也应该有效，因为我的不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T11:09:51.617

我有一个类似的问题。就我而言，该项目最终确实出现了，但不是马上出现。

我的解决方案是：

```
_contentManager.Flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T14:43:55.223

我遇到了这个问题，在我的情况下，我实际上在数据库中有一个错误（试图将 100 多个字符放入一个只能容纳 100 个字符的字段中！）。

我发现我得到的错误（Orchard.Indexing.Models.IndexingTaskRecord 条目中的空 id（发生异常后不要刷新会话）），实际上掩盖了这个问题。我不得不在日志中寻找真正的问题。

所以无论如何，我的建议是，如果您看到 contentmanager.create 似乎什么也没做，并且任何错误似乎都没有帮助，请仔细检查日志。它们可以在 Orchard.Web 主项目的 appdata 文件夹的日志子文件夹中找到。因为正如我在过去 48 小时内发现的那样，答案通常就在那里。

# html - HTML Table 列和 ruby 数组创建附加列

> ID：11085033
> 
> 赞同：0
> 
> 时间：2012-06-18T14:31:23.490
> 
> 标签：html, ruby-on-rails

我正在为考试结果创建一个 html 表格，看起来应该是这样的。总成绩和最终成绩是一个行跨度（测试数组的计数）

Test1、2、3都属于一个数组，即测试，使用ruby array.each语法显示。问题是每次测试都会重复总成绩和最终成绩列，因此表格显示如下

我如何限制表为每个数组元素创建额外的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:11:41.460

表键和值点可以通过两者的使用轻松分离

```
<tr>(table row)</tr> 
```

和

`<td>(table data)</td>`

我建议阅读：[http ://www.w3schools.com/html/html_tables.asp](http://www.w3schools.com/html/html_tables.asp)

玩得开心

# ios - 是否可以使用 MFMessageComposeViewController 查看传出短信的内容？

> ID：11085034
> 
> 赞同：2
> 
> 时间：2012-06-18T14:31:36.000
> 
> 标签：ios

如果我使用 MFMessageComposeViewController 将 SMS 撰写屏幕呈现给具有预填充 SMS 正文的用户，那么如果用户在调用委托时编辑 SMS 的内容：

```
- (void) messageComposeViewController:(MFMessageComposeViewController*) controller didFinishWithResult:(MessageComposeResult) result 
```

然后 controller.body 是原始正文，而不是在 SMS 中发送的更改后的正文。

有没有办法找出发送的短信正文实际上是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:06:26.947

不，对不起，这不能做。即使您遍历`MFMessageComposerViewController`'s 视图的所有子视图，您也无法访问用户输入消息的视图。

# java - ReentrantReadWriteLock 挂起

> ID：11085035
> 
> 赞同：1
> 
> 时间：2012-06-18T14:31:54.753
> 
> 标签：java, java.util.concurrent, reentrantreadwritelock

知道为什么这个构造函数无限期挂起吗？我正在尝试创建一个线程安全的单例。

```
private RWLockedSingleton() {
    lock.writeLock().lock();
    System.out.println("we're done!");
    isComplete = true;
    lock.writeLock().unlock();
} 
```

顺便说一句，我意识到将锁放在静态吸气剂中可能会更好；我只是想知道在构造函数中使用锁是否本质上是错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:40:21.080

恕我直言，锁定构造函数几乎总是不正确的。您不能添加`synchronized`到构造函数中是有充分理由的。您应该锁定调用构造函数的方法。

如果你持有 readLock()，你可以让 writeLock() 永远等待，即使它在同一个线程中。

创建延迟加载的线程安全单例的最简单且通常最有效的方法是使用`enum`

```
enum Singleton {
    INSTANCE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:39:07.320

刚刚注意到，在静态 getter 中，我在放入构造函数之前获得了 lock.readLock 上的锁。

根据 JavaDoc，如果线程具有读锁，则不允许升级为写锁。我本来预计会出现异常或错误，但在 readLock 解锁之前停止线程可能是有效的用途。作为参考，如果构造函数尝试获取 writeLock，则以下内容将不起作用

```
public static RWLockedSingleton getSingleton() {
    lock.readLock().lock();
    RWLockedSingleton ref = null;
    if (singleton == null) {
        singleton = new RWLockedSingleton();
        ref = singleton;
    }
    lock.readLock().unlock();
    return ref;
}; 
```

# mysql - cake php中的查询函数

> ID：11085039
> 
> 赞同：0
> 
> 时间：2012-06-18T14:32:13.880
> 
> 标签：mysql, cakephp, syntax

我正在用 php 编写代码，基本上将数据从 mySQL 数据库“映射”到另一个数据库。我使用的代码如下：

```
$results = $this->query("select PT_FS_DATA_ID from PATIENT_FLOWSHEET_DATA where 
    DT_LAST_UPDATED_TIME = (select top 1 DT_LAST_UPDATED_TIME from PATIENT_FLOWSHEET_DATA 
    order by DT_LAST_UPDATED TIME desc) group by PT_FS_DATA_ID;"); 
```

但是，我收到一个错误：

```
syntax error, unexpected T_VARIABLE, expecting T_FUNCTION 
```

在我看来，这似乎是正确的语法。我在这里缺少什么吗？我也尝试将控制器放在那里`$this->controllerName->query`，但这也不起作用。

完整代码：

```
class CaExtraFlowsheetFields extends CaBase {
public $name = 'CaExtraFlowsheetFields';

/*
NOTE: This is to take all the fields in flowsheet and
maps their id's.
*/
//public $useTable = 'ANSWER_ENTRY';
public $useTable = 'PATIENT_FLOWSHEET_DATA';
public $primaryKey = 'PT_FS_DATA_ID';

protected function getPrimaryKeyValue(
    $hospital_id,
    $patient_id,
    $admission_id = null
) {

return $patient_id;
}

//*CHANGE BEGIN*
$results = $this->query("select PT_FS_DATA_ID from PATIENT_FLOWSHEET_DATA where 
DT_LAST_UPDATED_TIME = (select top 1 DT_LAST_UPDATED_TIME from PATIENT_FLOWSHEET_DATA 
order by DT_LAST_UPDATED TIME desc) group by PT_FS_DATA_ID;");

protected $filedMethodMappings = array(

    'Method_GO' => array(
        CaBase::KEY_MAPPING_LOGIC_COMPLEXITY => CaBase::LEVEL2_COMPLEXITY,
        CaBase::KEY_FIELD_LOGIC_NAME         => 'wsMethod_GO',
);

//########################################################################//
//Note[]>Block[]               //
//>Method that calls LookUpField for every field in flowsheet //                                       //
//########################################################################//
public function wsMethod_GO ($params) {
    foreach($results as $value){

        $questionName = ''.$value;
        $msg_prefix = $this->name . "::" . __FUNCTION__ . ": ". "arrivez-vouz" ;
        $ret = $this->wsLookUpField($params,$questionName,$msg_prefix);
        return $ret;   
    } 
    unset($value);
}
//########################################################################//

public function wsLookUpField($params,$questionName,$msg_prefix){

$arrayValues=array();
    try{    
        $hospital_id  = $params[Constants::KEY_HOSPITAL_ID];
        $patient_id   = $params[Constants::KEY_PATIENT_ID];
        $admission_id = $params[Constants::KEY_ADMISSION_ID];

        $msg_prefix = $this->name . "::" . __FUNCTION__ . ": ". "attendez-vouz: l'hopital= ".$hospital_id.
        " patient= ".$patient_id." admission= ".$admission_id;

        //shows info about given question name
        $msg_prefix = "*!*!*!*Show me ---> ".$questionName." : ".$answer_entry_id.
        " = aic: " .$answer_id_check;

        $ret = array();

        //now with needed fields, grab the A_NAME:
            $params = array(
            'conditions' => array(
                $this->name . '.PID'                => $patient_id,
                $this->name . '.PT_FS_DATA_ID'      => $questionName,           
            ),
            'order' => array(
                $this->name . '.' . $this->primaryKey . ' DESC'
            ),
            'fields' => array(
                $this->name . '.FS_VALUE_TEXT',
            )
        );

    $rs = $this->find('first', $params);

   /* check to make sure $rs has received an answer from the query
      and check to make sure this answer is a part of the most recent
      database entries for this note */
    if (false != $rs) {
            try {                   
                $msg = $msg_prefix . "Data obtained successfully."."<br>".$result;
            $result = $rs;
            $ret = WsResponse::getResponse_Success($msg, $result);
        } catch (Exception $e) {
            $msg = $msg_prefix . "Exception occurred.";
            $ret = WsResponse::getResponse_Error($msg);
        }
    /*answer was not part of most recent database entries, meaning no
      answer was given for this particular question the last time this
      particular note was filled out. Message is given accordingly.*/
    } else {
        $msg = $msg_prefix . "/No answer given.";
            $ret = WsResponse::getResponse_Error($msg);
        }

    } catch (Exception $e) {
                $msg = $msg_prefix . "Exception occurred.";
                $ret = WsResponse::getResponse_Error($msg);
        }        
return $ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:08:42.443

这是你正在做的事情：

```
class ABC {

    $result = 'whatever';

} 
```

你不能在那里声明一个变量！

* * *

代码需要在方法/函数中......

```
class ABC
{
    public function wsMethod_GO ($params)
    {
        $result = 'whatever';
    }
} 
```

# c# - 在 SQL Server 和 C# 中运行查询的不同结果

> ID：11085040
> 
> 赞同：3
> 
> 时间：2012-06-18T14:32:15.813
> 
> 标签：c#, visual-studio-2010, sql-server-2008, stored-procedures

我有一个在 SQL Server 中运行存储过程的应用程序，检查表中一行与`getdate()`

我从 c# 调用这个存储过程，并使用 a`@returnValue`来做一些事情

这是方法

```
public static bool Check(string CheckStored)
{
    using (DbCommand command = DatabaseDA.DefaultDb.GetStoredProcCommand(CheckStored))
    {
        DatabaseDA.DefaultDb.AddParameter(command, "ReturnValue", DbType.Boolean, ParameterDirection.ReturnValue, "", DataRowVersion.Current, 0);
        DatabaseDA.DefaultDb.ExecuteNonQuery(command);

        return Convert.ToBoolean(command.Parameters["@ReturnValue"].Value);
    }
} 
```

这就是电话

```
bool notifNeeded = NotificationsDA.Check("CheckLastEnvioListadoComprobanteEjercicio"); 
```

然后在 SQL Server 中我有：

```
ALTER Procedure [dbo].[CheckLastEnvioListadoComprobanteEjercicio]
as
Begin

declare @UltimoEnvio datetime
declare @ReturnValue bit 
select @UltimoEnvio = LastDate from EnvioListadoEjercicioComprobantes 

Select @returnValue = CASE 
                         WHEN DATEDIFF(hour, @UltimoEnvio, getdate()) >= 1 THEN 1
                         ELSE 0 
                      END   
from rep_inboxRequest

if (@ReturnValue = 1)
    update EnvioListadoEjercicioComprobantes set LastDate = getdate()

return @ReturnValue
END 
```

在`EnvioListadoEjercicioComprobantes`我有一个动作的 lastDate 行（ej 发送邮件）。

现在，我只有一排，`2012-06-18 06:40:02.210`有价值。我将此日期与实际日期进行比较，如果差异超过一个小时，则返回一点。

现在，在阿根廷，它大约`2012-06-18 11:26`

如果我`getdate()`在 SQL Server 中执行，我会得到`2012-06-18 11:30:44.027`

如果我在 SQL Server 中运行我的整个存储过程并 print `@ReturnValue`，我得到 1 并且该行被更新-

但是当我从 C# 调用我的存储时，我总是得到 0，当然，该行没有更新。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:37:54.710

当您可以执行条件更新时，为什么还要执行所有这些工作（有条件地声明、选择、更新）？

```
ALTER PROCEDURE [dbo].[CheckLastEnvioListadoComprobanteEjercicio]
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE dbo.EnvioListadoEjercicioComprobantes 
    SET LastDate = GETDATE()
    WHERE LastDate <= DATEADD(HOUR, -1, GETDATE());

  IF @@ROWCOUNT > 0
    RETURN 1;
  ELSE
    RETURN 0;
END
GO 
```

无论如何，我认为这不是您处理返回值的方式。尝试这样的事情（这是伪代码）：

```
DatabaseDA.DefaultDb.ExecuteNonQuery(command);
var returnVal = command.Parameters.Add("@ReturnValue", SqlDbType.Int);
returnVal.Direction = ParameterDirection.ReturnValue; // this is important
DatabaseDA.DefaultDb.ExecuteNonQuery(command);
return Convert.ToBoolean(returnVal.Value); 
```

否则我建议您停止为此使用返回值，如果您希望返回参数有点来自 SQL Server，您可以使用输出参数。

```
ALTER PROCEDURE [dbo].[CheckLastEnvioListadoComprobanteEjercicio]
  @ReturnVal BIT = 0 OUTPUT
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE dbo.EnvioListadoEjercicioComprobantes 
    SET LastDate = GETDATE()
    WHERE LastDate <= DATEADD(HOUR, -1, GETDATE());

  SELECT @ReturnVal = @@ROWCOUNT;
END
GO 
```

现在在你的 C# 代码中（同样，这是伪代码，我不知道如果你复制和粘贴它会在你的应用程序中神奇地编译，但它应该给你这个想法）：

```
SqlParameter rv = new SqlParameter("@ReturnVal", SqlDbType.Boolean);
rv.Direction=ParameterDirection.Output;
command.Parameters.Add(rv);
command.ExecuteNonQuery();
return Convert.ToBoolean(rv.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:37:44.507

检查数据库的排序规则设置：在 Select 语句中，您正在设置`@returnValue`但稍后您正在检查并返回`@ReturnValue`. 如果打开区分大小写，那是两个不同的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:43:21.503

尝试在存储过程的顶部添加 SET NOCOUNT ON ，传统上，返回值用于报告受影响的行数，使用“SET NOCOUNT ON”选项禁用此功能，这可能会导致返回值出现问题。

还要检查 SQL Server Logins Language 选项，因为这也会影响 DateTime 的计算方式（以及排序规则等其他内容）。可能是在 Management Studio 中，您正在使用使用阿根廷当地时间的 Windows 帐户进行连接，但 C# 应用程序正在使用美国/英语登录设置进行连接，这将导致 SQL Server 认为您处于不同的时区。

# ruby-on-rails - csv 文件的 send_data 返回文件的文本，而不是文件

> ID：11085041
> 
> 赞同：11
> 
> 时间：2012-06-18T14:32:16.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

再会！我想下载自动生成的文件 qwerty.csv，但它只返回文本“12345”（没有文件）。你能帮助我吗？

**用户界面**

```
<script type="text/javascript">
function getCsv() {
    var ids = getSelectedRecordIds();
    $.post('/payments/form_csv.csv', { ids: ids }, function(data) {});
}
</script> 
```

**控制器**

```
def form_csv
    csv_string = CSV.generate do |csv|
        csv << ["12345"]
    end

    respond_to do |format|
        format.csv {
            send_data csv_string, :type => 'text/csv; charset=utf-8; header=present', :disposition => "attachment; filename=qwerty.csv", :filename => "qwerty.csv"
        }
    end
end 
```

**在控制台中**

```
Started POST "/payments/form_csv.csv" for 127.0.0.1 at 2012-06-18 18:18:11 +0400 
Processing by PaymentsController#form_csv as CSV
  Parameters: {"ids"=>["18\n\t  "]}
  Rendered text template (0.0ms)
Sent data qwerty.csv (0.4ms)
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms) 
```

但是没有文件提示...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T07:08:46.943

哦，它可以在没有 ajax 的情况下工作，作为表单提交！

这个主题也有同样的问题： [http ://www.ruby-forum.com/topic/111107](http://www.ruby-forum.com/topic/111107)

> > 使表单成为非 AJAX 表单我尝试过……它有效！

**控制器**

```
def form_csv
    csv = get_csv
    send_csv(csv)
end

def get_csv
    result = CSV.generate do |csv|
        csv << ["12345"]
    end
    return result
end

def send_csv(csv)
    send_data csv, :type => 'text/csv; charset=utf-8; header=present', :disposition => 'attachment; filename=payments.csv'
end 
```

**用户界面**

```
function getCsv() {
    var ids = getSelectedRecordIds();
    params = {ids: ids}
    post_to_url("/payments/form_csv", params);
} 
```

其中 post_to_url - 是来自 [JavaScript 发布请求的方法，例如表单提交](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit) 主题。

毕竟

```
protect_from_forgery :except => :form_csv 
```

在控制器中禁用 pay_csv 请求的身份验证令牌。

丑陋的决定，但它对我有帮助……可能有更正确的方法吗？

**维伦**，我试试，谢谢！

# php - PHP mysql_query 数据大小限制？

> ID：11085047
> 
> 赞同：2
> 
> 时间：2012-06-18T14:32:36.933
> 
> 标签：php, mysql, size, limit

我正在尝试`UPDATE`一个带有字符串的 mysql `TEXT data-type column`，其中包含近 6,000 个字符（6 kb 数据大小）。然后该列不会使用该数据更新。

然后，当我通过更新大约 100 个字符的测试数据来测试此列时，它可以工作。

那么，mysql查询处理有什么限制吗？
如果是这样，我该如何调整它？

我在 MacOSX 上使用 XAMPP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:37:22.647

尝试正确转义您的数据。如果数据不合适，MySQL 将截断而不是拒绝（默认情况下）您的数据。TEXT 字段的最大大小为 64kb。

如果您的数据包含像 ' 和 " 这样的字符，您的查询可能会失败。添加适当的错误处理以确定出错的位置和原因，并相应地转义您的数据。

# java - 从 Hibernate 映射文件中绘制 ERD

> ID：11085048
> 
> 赞同：0
> 
> 时间：2012-06-18T14:32:47.000
> 
> 标签：java, mysql, hibernate, netbeans, erd

我知道可以从数据库逆向工程到映射文件，但有谁知道是否有可能让休眠根据自己的映射文件绘制 ERD，以便我可以将休眠的 ERD 与数据库进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:27:17.590

我通过使用实现了这一点：

```
<property name="hibernate.hbm2ddl.auto">create-drop</property> 
```

在我的 hibernate.cfg.xml

然后，我使用 MySQL Workbench 从我的数据库中对由 Hibernate 创建的 ERD 进行逆向工程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:27:52.213

是的，这是可能的。据我所知，您不能直接从映射中执行此操作，而是必须先生成数据库。

你要做的很简单：

1.  通过映射创建数据库
2.  打开（或下载）MySQL Workbench
3.  创建一个新的数据库模型图
4.  转到数据库 > 逆向工程并填写您的数据库详细信息。
5.  接下来的步骤对您来说应该很容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-13T11:25:30.470

默认情况下，hibernate 创建具有内部连接而不是外键的 MySql MyIsam 数据库，因此 MySQL WORCKBENCH 或 VISUAL PARADIGM 不会通过连接正确显示 ERD 确保在 application.properties 资源内创建此语句。

```
spring.jpa.hibernate.ddl-auto = update

spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL55Dialect 
```

代替

```
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect 
```

创建MyISAM，注意双5 这是改变模式的关键

# deployment - 使用 SharePoint 2010 进行部署

> ID：11085050
> 
> 赞同：0
> 
> 时间：2012-06-18T14:33:05.953
> 
> 标签：deployment, sharepoint-2010

将 SharePoint 2010 中的结构/内容从测试环境部署到生产环境的最佳实践是什么？前提是我不想覆盖生产环境中的现有内容（特别是列表内容）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:52:49.183

我的方法是通过事件接收器进行部署并编写代码来改进现有的列表结构并扩展静态内容。虽然没有简单的技巧。列表定义仅在初始推出时有用，默认情况下列表实例项目项将被覆盖，因此要格外小心。

# c# - .NET 的 Double.ToString 方法中的循环两次错误

> ID：11085052
> 
> 赞同：15
> 
> 时间：2012-06-18T14:33:10.587
> 
> 标签：c#, .net, floating-point, rounding

在数学上，考虑这个问题的有理数

```
8725724278030350 / 2**48 
```

其中`**`，分母表示取幂，即分母为`2`th`48`次方。（分数不是最低的，可以减少 2。）这个数字**完全**可以表示为`System.Double`. 它的十进制展开是

```
31.0000000000000'49'73799150320701301097869873046875 (exact) 
```

其中撇号不代表缺失的数字，而只是标记四舍五入到**15**的边界。将执行**17位数字。**

请注意以下几点：如果此数字四舍五入为 15 位，则结果将为`31`（后跟 13`0`个 s），因为接下来的数字 ( `49...`) 以 a 开头（表示*向下*`4`舍入）。但如果*先将*数字四舍五入为 17 位，*然后再*四舍五入为 15 位，则结果可能为. 这是因为第一个舍入通过将数字增加到（下一个数字是）来进行舍入，然后第二个舍入可能会再次舍入（当中点舍入规则说“从零舍入”时）。***`31.0000000000001``49...``50 (terminates)``73...`***

 ***（当然，具有上述特征的数字还有很多。）

现在，事实证明这个数字的 .NET 标准字符串表示是`"31.0000000000001"`. **问题：这不是一个错误吗？**通过标准字符串表示，我们指的`String`是由 parameterles`Double.ToString()`实例方法生成的，它当然与由`ToString("G")`.

需要注意的一件有趣的事情是，如果您将上述数字转换为，`System.Decimal`那么您将得到一个`decimal`完全正确的数字`31`！请参阅[此 Stack Overflow 问题](https://stackoverflow.com/questions/7453900/)`Double`，了解关于将 a 转换为`Decimal`涉及第一次四舍五入到 15 位这一令人惊讶的事实的讨论。这意味着强制转换`Decimal`为 15 位数字是正确的，而调用`ToSting()`是错误的。

总而言之，我们有一个浮点数，当输出给用户时，它是`31.0000000000001`，但当转换为`Decimal`（**29**位可用）时，它变成`31`了精确的。这是不幸的。

这里有一些 C# 代码供您验证问题：

```
static void Main()
{
  const double evil = 31.0000000000000497;
  string exactString = DoubleConverter.ToExactString(evil); // Jon Skeet, http://csharpindepth.com/Articles/General/FloatingPoint.aspx 

  Console.WriteLine("Exact value (Jon Skeet): {0}", exactString);   // writes 31.00000000000004973799150320701301097869873046875
  Console.WriteLine("General format (G): {0}", evil);               // writes 31.0000000000001
  Console.WriteLine("Round-trip format (R): {0:R}", evil);          // writes 31.00000000000005

  Console.WriteLine();
  Console.WriteLine("Binary repr.: {0}", String.Join(", ", BitConverter.GetBytes(evil).Select(b => "0x" + b.ToString("X2"))));

  Console.WriteLine();
  decimal converted = (decimal)evil;
  Console.WriteLine("Decimal version: {0}", converted);             // writes 31
  decimal preciseDecimal = decimal.Parse(exactString, CultureInfo.InvariantCulture);
  Console.WriteLine("Better decimal: {0}", preciseDecimal);         // writes 31.000000000000049737991503207
} 
```

上面的代码使用了 Skeet 的`ToExactString`方法。如果你不想使用他的东西（可以通过网址找到），只需删除上面依赖的代码行`exactString`。您仍然可以看到有`Double`问题的 ( `evil`) 是如何四舍五入和投射的。

**添加：**

好的，所以我测试了更多的数字，这里有一个表格：

```
 exact value (truncated)       "R" format         "G" format     decimal cast
 -------------------------  ------------------  ----------------  ------------
 6.00000000000000'53'29...  6.0000000000000053  6.00000000000001  6
 9.00000000000000'53'29...  9.0000000000000053  9.00000000000001  9
 30.0000000000000'49'73...  30.00000000000005   30.0000000000001  30
 50.0000000000000'49'73...  50.00000000000005   50.0000000000001  50
 200.000000000000'51'15...  200.00000000000051  200.000000000001  200
 500.000000000000'51'15...  500.00000000000051  500.000000000001  500
 1020.00000000000'50'02...  1020.000000000005   1020.00000000001  1020
 2000.00000000000'50'02...  2000.000000000005   2000.00000000001  2000
 3000.00000000000'50'02...  3000.000000000005   3000.00000000001  3000
 9000.00000000000'54'56...  9000.0000000000055  9000.00000000001  9000
 20000.0000000000'50'93...  20000.000000000051  20000.0000000001  20000
 50000.0000000000'50'93...  50000.000000000051  50000.0000000001  50000
 500000.000000000'52'38...  500000.00000000052  500000.000000001  500000
 1020000.00000000'50'05...  1020000.000000005   1020000.00000001  1020000 
```

第一列给出了`Double`代表的确切（尽管被截断）值。第二列给出了来自`"R"`格式字符串的字符串表示。第三列给出了通常的字符串表示。最后第四列给出了`System.Decimal`转换 this 的结果`Double`。

我们得出以下结论：

*   在很多情况下`ToString()`，通过转换舍入到 15 位和舍入到 15 位不同意`Decimal`
*   在很多情况下转换为`Decimal`也舍入不正确，并且这些情况下的错误不能描述为“round-twice”错误
*   在我的情况下，当他们不同意时，`ToString()`似乎产生比`Decimal`转换更大的数字（无论两轮中的哪一个正确）

我只尝试了上述情况。我还没有检查其他“表格”的数量是否存在舍入错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T16:36:22.017

因此，从您的实验来看，`Double.ToString`似乎没有进行正确的舍入。

这是相当不幸的，但并不特别令人惊讶：对二进制到十进制的转换进行正确的舍入是不平凡的，而且可能非常慢，在极端情况下需要多精度算术。[请参阅此处](http://www.netlib.org/fp/)的David Gay 的`dtoa.c`代码，了解正确舍入的 double 到字符串和字符串到 double 转换所涉及的一个示例。（Python 当前使用此代码的变体进行浮点到字符串和字符串到浮点的转换。）

即使是当前的 IEEE 754 浮点算术标准也*建议*，但不*要求*从二进制浮点类型到十进制字符串的转换总是正确舍入。这是第 5.12.2 节“表示有限数字的外部十进制字符序列”中的一个片段。

> 对于可以通过正确舍入转换为支持的二进制格式和从支持的二进制格式转换的有效数字的数量，可能存在实现定义的限制。该限制 H 应为 H ≥ M+3 且应为 H 是无界的。

这里`M`定义为`Pmin(bf)`所有支持的二进制格式中的最大值`bf`，并且由于`Pmin(float64)`定义为并且.NET通过类型`17`支持float64格式，所以至少应该在.NET上。简而言之，这意味着如果 .NET 遵循该标准，它将提供正确舍入的字符串转换，最多至少有 20 个有效数字。所以看起来 .NET似乎不符合这个标准。`Double``M``17``Double`

在回答“这是一个错误”的问题时，就像我希望*它*是一个错误一样，我在数字格式文档中可以找到的任何地方似乎都没有任何关于准确性或 IEEE 754 一致性的声明对于.NET。所以它可能被认为是不可取的，但我很难称它为真正的错误。

* * *

编辑：Jeppe Stig Nielsen 指出 MSDN 上的[System.Double](http://msdn.microsoft.com/en-us/library/system.double.aspx)页面指出

> Double 符合二进制浮点运算的 IEC 60559:1989 (IEEE 754) 标准。

我不清楚这个合规性声明应该涵盖什么，但即使对于 1985 年的 IEEE 754 旧版本，所描述的字符串转换似乎也违反了该标准的二进制到十进制要求。

鉴于此，我很乐意将我的评估升级为“可能的错误”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T15:11:55.967

首先看一下[这个页面](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)的底部，它显示了一个非常相似的“双舍入”问题。

检查以下浮点数的二进制/十六进制表示表明给定范围以双精度格式存储为相同的数字：

```
31.0000000000000480 = 0x403f00000000000e
31.0000000000000497 = 0x403f00000000000e
31.0000000000000515 = 0x403f00000000000e 
```

正如其他几个人所指出的，这是因为最接近的可表示双精度值的精确值为 31.00000000000004973799150320701301097869873046875。

在 IEEE 754 到字符串的正向和反向转换中，特别是在 .NET 环境中，还有另外两个方面需要考虑。

首先（我找不到主要来源）来自维基百科，我们有：

> 如果将最多 15 位有效小数的十进制字符串转换为 IEEE 754 双精度，然后再转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；如果 IEEE 754 双精度转换为具有至少 17 位有效小数的十进制字符串，然后再转换回双精度，则最终数字必须与原始数字匹配。

因此，关于符合标准，将字符串 31.0000000000000497 转换为双精度时，在转换回字符串时不一定相同（给出的小数位太多）。

第二个考虑是，除非双精度到字符串的转换有 17 个有效数字，否则它的舍入行为也没有在标准中明确定义。

此外，有关[Double.ToString()](http://msdn.microsoft.com/en-us/library/3hfd35ad.aspx)的文档显示它受当前区域性设置的数字格式说明符控制。

**可能的完整解释：**

我怀疑两次舍入正在发生这样的事情：初始十进制字符串创建为 16 或 17 位有效数字，因为这是“往返”转换所需的精度，中间结果为 31.00000000000005 或 31.000000000000050。然后由于默认的区域性设置，结果被舍入到 15 个有效数字，31.00000000000001，因为 15 个十进制有效数字是所有双精度的最小精度。

另一方面，进行到 Decimal 的中间转换以不同的方式避免了这个问题：它直接[截断为 15 个有效数字](http://msdn.microsoft.com/en-us/library/a69w9ca0.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-11T09:08:04.787

> 问题：这不是一个错误吗？

是的。[在 GitHub 上](https://github.com/dotnet/coreclr/pull/13140)查看此 PR 。四舍五入两次 AFAK 的原因是为了“漂亮”的格式输出，但它引入了一个错误，正如您已经在这里发现的那样。我们试图修复它 - 删除 15 位精度转换，直接转到 17 位精度转换。坏消息是这是一个突破性的变化，会破坏很多东西。例如，其中一个测试用例将中断：

`10:12:26 Assert.Equal() Failure 10:12:26 Expected: 1.1 10:12:26 Actual: 1.1000000000000001`

该修复将影响大量现有库，因此最终此 PR 已暂时关闭。但是，.NET Core 团队仍在寻找修复此错误的机会。欢迎加入讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-12T10:35:28.040

*截断*是限制稍后将被舍入的数字精度的正确方法，正是为了避免双重舍入问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-18T18:55:48.340

~~我有一个更简单的怀疑：罪魁祸首可能是 pow 运算符 => **; 虽然您的数字*可以*精确地表示为双精度数，但出于方便的原因（幂运算符需要*大量*工作才能正常工作），幂是通过指数函数计算的。这是您可以通过重复乘以一个数字而不是使用 pow() 来优化性能的原因之一，因为 pow() 非常昂贵。~~

~~所以它没有给你正确的 2^48，但有些不正确，因此你有四舍五入的问题。请查看 2^48 究竟返回了什么。~~

编辑：对不起，我只对问题进行了扫描并给出了错误的怀疑。英特尔处理器上的双舍入存在一个已知问题。旧代码使用 FPU 的内部 80 位格式，而不是可能导致错误的 SSE 指令。该值被精确写入 80 位寄存器，然后四舍五入*，*因此 Jeppe 已经发现并巧妙地解释了问题。

这是一个错误吗？好吧，处理器一切正常，只是英特尔 FPU 内部对浮点运算具有更高的精度的问题。

进一步的编辑和信息：“双舍入”是一个已知问题，在 Jean-Michel Muller 等人的“浮点算术手册”中明确提到。人。在第 75 页的“3.3.1 典型问题：'双舍入'”下的“需要修订”一章中：

> 所使用的处理器可能提供比程序变量的精度更宽的内部精度（一个典型的例子是英特尔平台上可用的双扩展格式，当程序的变量是单精度或双精度时浮点数字）。正如我们将在本节中看到的，这有时可能会产生奇怪的副作用。考虑 C 程序 [...]

```
#include <stdio.h>

int main(void) 
{
  double a = 1848874847.0;
  double b = 19954562207.0;
  double c;
  c = a * b;
  printf("c = %20.19e\n", c);
  return 0;
} 
```

32 位：Linux/Debian 上的 GCC 4.1.2 20061115

使用 Compilerswitch 或使用 -mfpmath=387 (80bit-FPU)：3.6893488147419103232e+19 -march=pentium4 -mfpmath=sse (SSE) 或 64 位：3.6893488147419111424e+19

如书中所述，差异的解决方案是 80 位和 53 位的双舍入。***

# wordpress - URL 重写以允许域的句点

> ID：11085055
> 
> 赞同：0
> 
> 时间：2012-06-18T14:33:15.360
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting, rewrite

我的网站上有某些类别用于网站或域，并且希望能够在 url (domain.com/category/amazon.com) 中完整显示域，例如 amazon.com

目前，当我使用 Wordpress 时，默认情况下，所有多余的字符都会转换为连字符。(domain.com/category/amazon-com

如何为某些域扩展名（.co.uk、.com、net 等）创建重写规则来重写这些 url，使它们与句点一起显示？

我当前的 htacces 包含以下重写规则：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:19:41.380

您可以尝试为[sanitize_title()](http://codex.wordpress.org/Function_Reference/sanitize_title)函数编写过滤器。这也向您展示`.`了 wordpress 函数中的替换位置。 [http://core.trac.wordpress.org/browser/tags/3.4/wp-includes/formatting.php#L972](http://core.trac.wordpress.org/browser/tags/3.4/wp-includes/formatting.php#L972)

# jakarta-ee - 在 MDB 的 onMessage 方法中手动消费消息

> ID：11085066
> 
> 赞同：1
> 
> 时间：2012-06-18T14:33:55.813
> 
> 标签：jakarta-ee, websphere, ibm-mq, message-driven-bean

我正在尝试在 onMessage 方法中使用消息，因为我希望在一个事务中使用多条消息以提高性能。

但

```
Message message = consumer.receive(); 
```

返回空值。它甚至不会阻塞。买为什么？它必须被阻止，直到它收到消息，不是吗？

```
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void onMessage(Message message) {

    QueueConnection queueConnection = null;     
    queueConnection = qcf.createQueueConnection();
    queueConnection.start();
    queueSession = queueConnection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
    Queue queue = queueSession.createQueue(sessionConnParams.toString());
    consumer = queueSession.createConsumer(queue);

    // it works in cycle
    System.out.println("before receive");
    Message message = consumer.receive();
    System.out.println("after receive");
    if (message == null) {
       System.out.println("no messages");
       return;
    }

   // process message

   } catch (Exception e) {
     // process exception
   } finally {
     // close objects
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:21:34.910

在我看来，在 onMessage() 中创建另一个接收器并不是一个好主意。EJB 规范不建议在 OnMessage 方法中启动线程。

在一个事务中接收多条消息不会提高性能。性能取决于多种因素

`onMessage`1)方法处理消息所花费的时间。

2) 消息传递提供者传递消息的速度

3) 网络

4) 硬件

为了提高性能，您可以考虑并行运行多个 MDB。还要查看您正在使用的消息传递提供程序的性能调整。

这是[IBM提供的一个有用链接](http://www.ibm.com/developerworks/websphere/library/techarticles/0508_parkinson/0508_parkinson.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:27:34.917

如果您遇到全局事务，我认为您不太可能让 JMS 做您想做的事情。如果你使用

```
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) 
```

这将强制应用程序服务器在未指定的事务上下文中运行。这意味着什么完全取决于您使用的应用程序服务器。如果您使用的是 Websphere Application Server，这意味着 bean 在事务之外运行，因此发送和接收消息等操作会按照您的预期进行。其他应用程序服务器可能会以不同的方式处理此问题 - 请阅读文档。无论如何，这样做可能是个坏主意。您正在针对应用程序服务器工作。

JMS 规范定义了一种批量传递消息的机制。IBM Websphere MQ 将此预读称为[http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=%2Fcom.ibm.mq.csqzaw.doc%2Fjm41130_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=%2Fcom.ibm.mq.csqzaw.doc%2Fjm41130_.htm)，它允许一次从队列中读取多条消息，并一个接一个地传递给应用程序。其他 JMS 实现可能支持类似的东西。

但最终，如果您的应用程序要求始终按顺序处理消息，那么您将不得不处理在处理下一条消息之前提交每条消息的开销。几乎可以肯定，提交开销远大于将消息传递到 MDB 的开销。试图破解一些东西来读取 MDB 中的额外消息不会让你解决这个问题。如果这对您来说是个问题，您可能应该考虑对应用程序进行更改，以便能够乱序处理消息。

# java - 对用户名使用非英文字符会导致登录异常

> ID：11085067
> 
> 赞同：-3
> 
> 时间：2012-06-18T14:33:55.687
> 
> 标签：java, xml

我在我的 Web 应用程序中使用 Wicket 框架。如果我使用“å”或“ö”等非英语字符作为用户名（即：Björn），当我尝试登录时会出现以下异常：

> 原因：java.lang.IllegalArgumentException：cookie 值中的控制字符，请考虑在 org.apache.tomcat.util 的 org.apache.tomcat.util.http.ServerCookie.maybeQuote2(ServerCookie.java:340) 处对您的值进行 BASE64 编码。 http.ServerCookie.appendCookieValue(ServerCookie.java:253) 在 org.apache.catalina.connector.Response.addCookie(Response.java:958) 在 org.apache.catalina.connector.ResponseFacade.addCookie(ResponseFacade.java:341)在 org.apache.wicket.protocol.http.WebResponse.addCookie(WebResponse.java:86) 在 org.apache.wicket.markup.html.form.persistence.CookieValuePersister.save(CookieValuePersister.java:277) 在 org.apache .wicket.markup.html.form.persistence.CookieValuePersister.save(CookieValuePersister.java:97) at org.apache.wicket.markup.html.form.Form$12.onFormComponent(Form.java:第1291章）在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:385) 在 org.apache .wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089) 在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280) 在 org.apache.wicket.markup .html.form.Form.process(Form.java:874) at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ... 省略了 27 个常用框架html.form.FormComponent$AbstractVisitor.formComponent(FormComponent.java:107) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:421) 在 org.apache.wicket.markup.html。 form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:385) 在 org.apache.wicket.markup.html.form.Form。在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form. java:874) at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ... 省略了 27 个常用框架html.form.FormComponent$AbstractVisitor.formComponent(FormComponent.java:107) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:421) 在 org.apache.wicket.markup.html。 form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:385) 在 org.apache.wicket.markup.html.form.Form。在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form. java:874) at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ... 省略了 27 个常用框架formComponent(FormComponent.java:107) at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:421) at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent. java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:385) 在 org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089)在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache .wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ...省略了27个常用框架formComponent(FormComponent.java:107) at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:421) at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent. java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:385) 在 org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089)在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache .wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ...省略了27个常用框架在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent. java:385) 在 org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089) 在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280)在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ... 27常用框架省略在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:408) 在 org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent. java:385) 在 org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089) 在 org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form.java:1280)在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ... 27常用框架省略visitFormComponentsPostOrder(FormComponent.java:385) at org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089) at org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form. java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ...省略了27个常用框架visitFormComponentsPostOrder(FormComponent.java:385) at org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:1089) at org.apache.wicket.markup.html.form.Form.persistFormComponentData(Form. java:1280) 在 org.apache.wicket.markup.html.form.Form.process(Form.java:874) 在 org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:808) ...省略了27个常用框架

我可以做些什么来允许用户输入非英文字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:06:30.323

如果您查看 的源代码`CookieValuePersister`，它根本不会加载或保存到 XML。相反，它是通过将 cookie 添加到要在用户浏览器中设置的 cookie 来“持久化”cookie。

这让我们知道真正的问题是什么。[HTTP 状态管理机制](https://www.rfc-editor.org/rfc/rfc2965)RFC 规定 cookie 值必须作为可打印的 ASCII 字符发送。如果该值可能包含其他字符，则需要以 base64 之类的方式对其进行编码。

这也是异常消息所说的内容，尽管您*可以*使用任何可打印的基于 ASCII 的编码，如果您想...对规范施加的约束取模。

# android - 如何使用 addView() 将多个按钮添加到 RelativeLayout/Activity 迭代哈希图？

> ID：11085072
> 
> 赞同：0
> 
> 时间：2012-06-18T14:34:14.563
> 
> 标签：android, android-layout, button, hashmap, android-inflate

我正在尝试以编程方式将可变数量的按钮添加到活动中。

所以我从一个这样的填充哈希图开始：

```
Map<String, String> map = new HashMap<String, String>(); 
```

然后我循环获取数据并制作按钮：

```
int k = 0;
RelativeLayout layout = (RelativeLayout) findViewById(R.id.layrelative);
for(Entry<String,String> entry : map.entrySet()) {
            String key = entry.getKey();
            String value = entry.getValue();
            Button b = new Button(Peli.this);
            b.setId(k);
            b.setText(key);
            b.setOnClickListener(Peli.this);
            layout.addView(b);
            k++;
        } 
```

问题是我只得到不超过一个按钮，但如果我记录循环，数据可以生成多个按钮，顺便说一句，si 总是最后一次迭代的最后一个数据。

我究竟做错了什么？我还使用具有相同结果的迭代器进行了测试，所以我认为我的错误在于 addView 方法或创建每个按钮视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:56:00.883

您没有根据您希望它们的布局位置设置任何 Button 的属性。这是一个相对布局。默认为左上角。本质上，您正在布置许多按钮，但它们在 Z 方向上都是一个在另一个之上！！！

看看这个 [如何以编程方式在RelativeLayout中布局视图？](https://stackoverflow.com/questions/2305395/laying-out-views-in-relativelayout-programmatically)

# wpf - 创建面向鼠标和面向触摸的 WPF 应用程序的最佳实践

> ID：11085078
> 
> 赞同：2
> 
> 时间：2012-06-18T14:34:34.603
> 
> 标签：wpf, touch, mouse, multitargeting

需要开发同时支持鼠标和触摸输入的 WPF 应用程序。我正在寻找一种能够维护单个代码库并最大程度地减少实现它的痛苦的方法。一些框架或构建配置可能 - 类似于项目链接器 + 预处理器指令方案，用于在单个项目中多目标 WPF 和 Silverlight 平台。提前致谢。
*编辑* 示例场景：应用程序具有允许用户将多张照片上传到服务器的控件。文件选择框支持鼠标拖拽，也支持一些手势来添加新文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:44:52.083

检查[此](http://blogs.msdn.com/b/llobo/archive/2008/02/26/drag-drop-library-updated.aspx)拖放库。

# javascript - 从 JSON 中删除垃圾？

> ID：11085079
> 
> 赞同：0
> 
> 时间：2012-06-18T14:34:35.037
> 
> 标签：javascript, json, jquery, jsonp

对于 IE7 和 IE8，我正在捕获一些 JSONp 以在我的网页中使用。以下是 JSONP 的摘录：

```
{
    class: "min-temp",
    span: {
        class: "units-values temperature-units-values",
        span: [
            {
                class: "units-value temperature-value temperature-value-unit-c",
                span: {
                    class: "unit",
                    content: "°C"
                },
                content: "11
              "
            },
            {
                class: "units-value temperature-value temperature-value-unit-f",
                span: {
                    class: "unit",
                    content: "°F"
                },
                content: "52
              "
            }
        ]
    }
}, 
```

如果你看一下`content: "11`and `content: "52`，你会发现它们后面有很多额外的字符。如何删除那些多余的字符，所以我只得到数字，即`11`或`52`.

目前，我正在提取这些数字，如下所示：

`day.span[1].span.span[0].content`给我`11`，`day.span[1].span.span[1].content`给我`52`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:37:58.783

如果您只期望那里的整数值，只需使用[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt). 它将忽略空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:37:54.867

如果它们总是被期望是数字，你可以使用 ，或者像@Pointy 建议的`parseInt`那样，你可以使用.`parseFloat``content``$.trim()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:38:19.273

使用正则表达式修剪任何不是数字的东西。

```
content = content.replace(/\D/g, ''); 
```

# c# - 如何检测注册表项是否有错误C#

> ID：11085083
> 
> 赞同：4
> 
> 时间：2012-06-18T14:34:54.450
> 
> 标签：c#, .net, registry

我见过很多软件显示哪个注册表有错误。我只想知道他们到底在寻找什么？我的意思是我知道如何获取注册表项的值，但我如何确定该值是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:40:19.753

这是提供有关如何编写注册表清理软件的完整信息的链接，这是要做的事情。

[http://www.codeproject.com/Articles/301890/ScanX-Creating-a-Registry-Cleaner](http://www.codeproject.com/Articles/301890/ScanX-Creating-a-Registry-Cleaner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:46:14.103

[CCleaner](http://www.piriform.com/ccleaner/features)将这些项目列为其清洁器的功能：

> 删除未使用和旧条目的高级功能，包括文件扩展名、ActiveX 控件、ClassID、ProgID、卸载程序、共享 DLL、字体、帮助文件、应用程序路径、图标、无效快捷方式等...

您可以通过阅读手册找到这些瓶颈。

# nginx - php-fpm 正在解析 .phps 而不是显示代码（高亮显示）

> ID：11085086
> 
> 赞同：2
> 
> 时间：2012-06-18T14:35:03.330
> 
> 标签：nginx, php

目前我们正在运行 nginx + php-fpm 但我们在显示 .phps 文件时遇到问题。

如果我将 .phps 添加到位置规则，那么它将开始下载源代码。

在 apache 中，您通常会执行 AddType application/x-httpd-php-source .phps

如何在 php-fpm 中解决这个问题？

这是配置包含的内容：

```
location ~ \.(txt|php|html)$ {
    include server_fpm;
} 
```

server_fpm 包含

```
include fastcgi_params;
fastcgi_pass backend; 
```

fastcgi_params 包含

```
fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
fastcgi_param  CONTENT_TYPE       $content_type;
fastcgi_param  CONTENT_LENGTH     $content_length;

fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
fastcgi_param  REQUEST_URI        $request_uri;
fastcgi_param  DOCUMENT_URI       $document_uri;
fastcgi_param  DOCUMENT_ROOT      $document_root;
fastcgi_param  SERVER_PROTOCOL    $server_protocol;
fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;

fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;

fastcgi_param  REMOTE_ADDR        $remote_addr;
fastcgi_param  REMOTE_PORT        $remote_port;
fastcgi_param  SERVER_ADDR        $server_addr;
fastcgi_param  SERVER_PORT        $server_port;
fastcgi_param  SERVER_NAME        $server_name;

#Custom parameters

#Legacy apache forward FCGI params
fastcgi_param HTTP_X_REAL_IP $remote_addr;
fastcgi_param HTTP_X_NGINX_VERSION $nginx_version;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param  REDIRECT_STATUS    200;

fastcgi_connect_timeout         60;
fastcgi_send_timeout            180;
fastcgi_read_timeout            180;
fastcgi_buffer_size             128k;
fastcgi_buffers         4       256k;
fastcgi_busy_buffers_size       256k;
fastcgi_temp_file_write_size    256k;
fastcgi_intercept_errors        on;
fastcgi_ignore_client_abort     off;

fastcgi_split_path_info ^(.+\.php)(.*)$;
fastcgi_index index.php; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:03:03.843

```
location ~ \.phps$ {
    fastcgi_pass backend;
    fastcgi_param  DOCUMENT_ROOT    $document_root;
    fastcgi_param  SCRIPT_NAME      $uri;
    fastcgi_param  SCRIPT_FILENAME  /path/to/hightlight_source.php;
} 
```

hightlight_source.php：

```
<?php highlight_file($_SERVER['DOCUMENT_ROOT'].$_SERVER['SCRIPT_NAME']); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:01:52.337

```
location ~ \.phps$ {
    try_files $uri =404;
    fastcgi_pass backend;
    fastcgi_param   DOCUMENT_ROOT    $document_root;
    fastcgi_param   SCRIPT_NAME      $uri;
    fastcgi_param   SCRIPT_FILENAME  /path/to/phps.php;
    include fastcgi_params;
} 
```

然后是 phps.php（在 dir o+x / mod 664 中）

```
<?php
error_reporting(0);
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><?php echo basename($_SERVER['DOCUMENT_ROOT'] . $_SERVER['SCRIPT_NAME']);?></title>
</head>
<body>
<?php highlight_file($_SERVER['DOCUMENT_ROOT'] . $_SERVER['SCRIPT_NAME']); ?>
</body>
</html> 
```

# editor - Tree List Ex Editor - 将所选项目的添加更改为列表顶部而不是底部

> ID：11085092
> 
> 赞同：0
> 
> 时间：2012-06-18T14:35:38.213
> 
> 标签：editor, sitecore, treelist

我们的一个客户有一个使用大量 TreeListEx 类型字段的网站。默认情况下，当在 TreeListEx 编辑器中选择一个项目并将其移至右侧时，所选元素将添加到右侧列表的底部。此客户端的编辑器希望对此进行更改，以便将元素添加到右侧列表的顶部。

为此，我尝试查看 Treeview.js 和 Treelistexeditor.js 的 Shell 文件夹。但我不知道在哪里进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:25:58.207

在`TreeListExEditor.js`文件中，查看`scSetMastersType.prototype.moveRight()`函数。在一个循环中，它调用`selected.appendChild(opt)`您可能想要更改以添加选项。这将需要您使用一些 JavaScript 黑客技术。

也许从 a 开始，`typeof(selected)`看看它是什么。我假设一个数组。如果是这样，也许这样做：

1.  反转原始数组
2.  在受人尊敬的数据末尾附加您的新项目
3.  再次将其反转以恢复正常。现在你的新选择是在开始

同样，因为这是 JavaScript，所以您可以采用很多方法。

# javascript - ViewState 在连续的部分回发之间丢失？

> ID：11085096
> 
> 赞同：1
> 
> 时间：2012-06-18T14:35:56.473
> 
> 标签：javascript, asp.net, postback, viewstate

**背景：**

我有一个页面，其中有各种使用 JavaScript 处理的客户端事件。我想将其中一些事件与服务器端事件“同步”，或者从代码隐藏中调用函数。

我想用 JavaScript 调用的一些函数可能会更改我在页面上的表单中的控件（例如更改文本框值）。它们还可能更改我存储在 ViewState 中的一些值，因为我希望一些值通过回发保持不变。我不想进行完整的回发，并且拥有可以在更新面板中更改的控件。

我目前正在使用 JavaScript 在我的代码隐藏中“调用”函数，方法是单击通过更新面板中的异步回发触发器触发我页面上的部分回发的不可见按钮。

**问题：**

我的一个客户端事件调用了一个 JavaScript 函数，该函数单击了多个不可见按钮（客户端事件发生在单击之间，这可能会影响代码隐藏函数的行为方式）。当我让 JavaScript 单击多个按钮时，对 ViewState 所做的更改似乎不会持续存在，并且只观察到上次单击后的更改。

**例子：**

我可能没有很好地解释这一点，所以这是我所拥有的简化版本（我可以用它来重现问题）。

*标记：*

```
<asp:Button ID="btnA" runat="server" style="display: none;" />
<asp:Button ID="btnB" runat="server" style="display: none;" />
<div style="background: red; width: 100px; height: 100px;" onclick="AB();"></div>

<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<asp:UpdatePanel runat="server" ID="upForm" UpdateMode="Conditional">
    <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnA" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="btnB" EventName="Click" />
    </Triggers>
    <ContentTemplate>
    </ContentTemplate>
</asp:UpdatePanel> 
```

*JavaScript：*

```
function AB() {
    $('#<%= btnA.ClientID %>').click();
    $('#<%= btnB.ClientID %>').click();
} 
```

*代码隐藏：*

```
Protected Sub btnA_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnA.Click
    ViewState("AB") += "A"
End Sub
Protected Sub btnB_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnB.Click
    ViewState("AB") += "B"
End Sub 
```

**问题：**

1.  为什么部分回发之间对 ViewState 的更改会丢失？
2.  如何保存部分回发之间的更改？会话变量很好用，但我宁愿不必使用它们。我也无法将值保存在不可见的控件中，因为我实际上正在更改 ViewState 中的序列化对象。
3.  有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:57:09.860

我对此进行了测试，并且视图状态确实会根据部分请求进行更新。2 个连续的部分请求可能存在问题。第一个请求必须在第二个请求触发之前返回才能工作。

viewstate 的工作方式是有一个名为 __VIEWSTATE 的隐藏字段，它会在每个请求上发布。ASP.NET 使用这些数据来维护它需要的任何状态。因此，如果第一个请求没有返回到浏览器，并且浏览器的视图状态没有更新，则不会在第二个请求中发送。

更新面板响应如下所示：

```
248|updatePanel|ctl00_ContentPlaceHolder1_up|
.......
__VIEWSTATE|/wEPDwUKLTM1OTc4...... 
```

然后在客户端更新视图状态。我会在第二个请求之前检查它是否正在更新。

话虽如此，我认为使用更新面板有点过时了。如果我是你，我会使用 javascript 和 webmetods。看看[这个](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)。当然，这将取决于确切的情况。在我看来，您使用的方法是肮脏和不清楚的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:53:42.957

我想如果您使用 Javascript 和页面回发“按下”两个按钮 - 那么只有一个服务器端事件处理程序将注册，因此您只会触发一个点击事件。

我猜页面模型的设计是围绕人类交互构建的——人类只会点击一个按钮，因此只有一个服务器端点击事件能够被触发。您的方法虽然非常狡猾 - 基本上已经颠覆了页面模型（按下 2 次按钮），因此模型停止了行为。

虽然只是在我的脑海中 - 但对我来说很有意义。

当我需要让 JavaScript 事件以 ViewState 类型的方式持久存在时 - 我推出了自己的持久性方法，例如

1.  在表单上放置一个隐藏字段
2.  当 JavaScript 触发时，JSON 将您想要在对您有意义的对象结构中持久化（或对象）的控制状态序列化
3.  当页面重新加载时，然后使用 JavaScript（或 JQuery 等）来挑选出持久的 JSON 字符串。将其转回一个对象（如果您愿意，可以使用 JSON 解析器或 eval），然后使用它来重置页面状态。

如果您使用[pageLoad()](http://encosia.com/document-ready-and-pageload-are-not-the-same/) javaScript 方法，那么这将触发完整和部分回发，这可能对您的情况有用。

只是我的经验。也许对你相关/有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:12:44.057

我已经设法让它适用于我的案例，但我认为其他用户建议的一些选项也可能对我有用。由于我的案例看起来非常独特（部分原因是它是一种黑客方法），因此我在此答案中包含了一些其他建议以供将来参考。

1.  由于 JavaScript 正在模拟两个按钮被单击，因此会进行两次连续的部分回发。第二个请求在第一个请求返回之前被触发，因此第二个服务器事件从第一个事件中获取旧的 ViewState 而不是更新的 ViewState。

    *   感谢[graham mendick](https://stackoverflow.com/questions/11085096/viewstate-lost-between-consecutive-partial-postbacks#comment14513299_11085096)和[Daniel](https://stackoverflow.com/a/11086556/1405830)指出这一点。
2.  由于我的客户端和服务器事件不必完全同步（它只需要与*用户*同步），我重新组织了函数背后的代码，以便每个客户端事件只需要一个部分回发，同时仍然保持逻辑事件流。需要明确的是，这与其说是真正的解决方案，不如说是一种解决方法。

    *   [Crab Bucket](https://stackoverflow.com/a/11085419/1405830)建议将 JSON 对象序列化为隐藏的表单字段。虽然不完全是我正在寻找的东西，但我认为值得一提，以防其他人偶然发现类似的问题。更多细节[在这里](https://stackoverflow.com/questions/5173292/passing-json-serialized-data-via-hidden-field)。
3.  [Daniel](https://stackoverflow.com/a/11086556/1405830)建议使用页面方法，我已经（简要地）看了一下，似乎它可能有效。在这一点上为我离开更新面板并再次将页面与他的建议重新组合在一起，尽管由于页面上已经存在的内容，这需要相当多的工作。不过，我将来可能会回到这一点并尝试一下（或者将其用于其他用途）。有关[使用 jQuery 调用页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)和[使用 Web 服务](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)的更多详细信息。

# android - 使多个值相等时的最佳算法性能

> ID：11085100
> 
> 赞同：1
> 
> 时间：2012-06-18T14:36:02.557
> 
> 标签：android, algorithm

我现在正在开发一个安卓应用程序。我在我的应用程序中遇到了一个重要方法的问题，因为我无法做出最佳算法来将许多输入等同于许多数据。

场景如下：方法的输入是来自 override 方法的坐标`onTouchEvent()`，所以当触摸屏幕并在其上移动手指时输入会很多。我必须将这么多坐标等同于数组中的 24 个值。数组中的值也是一个坐标。因此，当输入与数组中的值具有相同的值时，它会得分。

这是我使用的代码：

```
public void checkCoordinate(float x, float y){
    int sensitivity = 30; 
    for(int z = 0; z < 24; z++){
        if(x > (cxy[z][0]-sensivity) && x < (cxy[z][0]+sensivity) && y > (cxy[z][1]-sensivity) && y < (cxy[z][1]+sensivity)){
            points += 1; 
            Log.i("CheckCoordinate", "Total Points = "+points); 
    }
} 
```

我有两种方法来等同。一，使用上面的算法，或者使用 24 if 检查每个输入。但我认为在这种情况下两种方法都不好。因此，如果您遇到与我相同的情况并且您已经解决了该问题，或者您有更好或最好的解决方案，我需要您的帮助，请告诉我。

先感谢您。对不起，如果我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:32:41.177

话虽如此，您的一般想法是正确的。问题是现在可以以某种方式对其进行优化吗？

我们可以在这里使用许多方法。诀窍在于您安排数据的方式。在您当前的情况下，您正在做一个中心点，您的灵敏度变量是您的跨度。可以想象第一个优化不是使用从中心点左右上下移动的灵敏度，而是可以实现一个左上点，其跨度只从左上点向右和向下移动。您的 if 语句将变为：

```
if(x > cxy[z][0] && x < (cxy[z][0]+sensivity) && y > cxy[z][1] && y < (cxy[z][1]+sensivity)) 
```

那么这对您有什么作用：上述优化允许您保存相同的总数据量，但每次检查无需进行 2 次数学运算。考虑到您的输入参数都是浮点数，这可以节省相当多的时间。

如果您正在执行所有基于像素的操作，那么这将带我进行下一个优化。使用整数而不是浮点数进行所有计算，这也将大大加快您的整体算法时间。

现在可以进行进一步的优化，如果您愿意花费更多 RAM 以获得更好的性能，您可以代替每个区域 1 个点，而是可以为每个区域设置一个左上角和一个右下角。这将使您的 if 语句如下所示：

```
if(x > tlxy[z][0] && x < brxy[z][0] && y > tlxy[z][1] && y < brxy[z][1])

where tlxy is the array of top-left points, brxy is the array of bottom-right points
and z is still the "region" you are checking against 
```

这有什么帮助：正如您在上面的 if 语句中看到的，这现在绝对没有明确的数学运算。为了支持这个算法，你需要愿意花费 2 倍于数组 cxy 的内存。

现在在您的循环中，您将通过所有 24 个区域点。如果您确定您的区域没有重叠，那么一个点一次只能落在一个区域中。您可以通过在您还增加点的点处跳出 for 循环来节省大多数 xy 输入点的时间。如下所示：

```
public void checkCoordinate(float x, float y){
    for(int z = 0; z < 24; z++){
        if(x > tlxy[z][0] && x < brxy[z][0] && y > tlxy[z][1] && y < brxy[z][1]){
            points += 1; 
            break;
        }
    }
} 
```

只有在您确定没有重叠区域（甚至没有边缘）的情况下，上述内容才有效。

在最终优化中，我可以看到可能有潜力。根据您所在区域的外观，您可以将所有区域预先分成象限。这样，您可以测试 x 点位于屏幕的左侧或右侧，然后测试 y 点位于顶部或底部。如果您的区域分布相当均匀，这可能会将您的测试时间缩短 4 倍，因为您不仅需要测试象限内的区域（如果给定的统计分布是我所说的）。在最坏的情况下，所有区域都位于一个象限中，并且您测试的所有点都在该象限中，在这种情况下，从复杂性的角度来看，问题并不比以前更糟。它只是在您的输入 x 和 y 上添加设置测试。

我希望这能给你足够的信息，至少让你开始上路！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:35:08.980

对于 24 个值，这可能是多余的，但您可能还需要考虑使用普通数组[哈希表](http://en.wikipedia.org/wiki/Hash_table)（具有[开放寻址](http://en.wikipedia.org/wiki/Hash_table#Open_addressing)冲突解决方案）：

1.  为简单起见，假设您使用该`y`值来获取跳转位置（如果区域垂直分离得很好，这应该会减少检查次数）。假设您的屏幕分辨率为 600x800，您可以除以 `y`60 得到约 13 个插槽。如果您使用的是 8 位表，则相当于每个插槽约 18 个项目 ( `round(800/60)=13`, `round(255/13)=18`)。

2.  为了加快计算速度，您应该使所有内容保持完整和简单，以便您可以使用以下方法获取插槽号：

    ```
    int yi = (int)y;

    // this is your "hash function". depending on your actual data,
    // you might want to modify it to get a lesser chance of collisions
    byte slot = (byte)((yi / 60) * 18); 
    ```

3.  现在您有了插槽索引，只需跳转到哈希表并检查，直到没有更多要检查的项目：

    ```
    rectangle r;
    int yi = (int)y;
    for (byte slot=(byte)(yi / 26); slot < 256; slot++)
    {
        r = hashtable[slot];

        // is this an empty slot?
        if (r.brxy == 0)
           break;

        // perform exact check
        if (r.left < x && x < r.right && 
            r.top < y && y < r.bottom)
           break;
    } 
    ```

4.  哈希表需要在初始化期间以类似的方式创建：对于 24 个区域中的每一个，计算其哈希（插槽）索引。如果哈希表中的位置被占用，只需增加 1，直到找到一个空点。**注意：您是否必须将每个区域添加到所有重叠的插槽中。**最简单的方法是将其添加到slot`s`和.`s-1``s+1`

您的循环目前平均执行**12 次查找**，而基于哈希的方法执行单个哈希计算，并且平均应该只需要两次或三个查找（据说哈希表`O(1)`平均具有复杂性，假设一个好的哈希函数）。

**例子**

理想情况下，您`hashtable`应该看起来像：

```
hashtable[0]: rectangle(0, 0, 60, 60);
hashtable[1]: rectangle(20, 20, 80, 80);
hashtable[2]: (empty)
hashtable[3]: (empty)
...
// next slot starts at [18]
hashtable[18]: rectangle(20, 20, 80, 80); // this region is in slots 0 and 1
hashtable[19]: rectangle(30, 70, 90, 130);
hashtable[20]: rectangle(400, 70, 460, 130);
hashtable[21]: (empty)
... 
```

因此，如果您的接触点是`(430, 100)`，则计算将继续如下：

```
a) slot = (byte)((100/60) * 18) = 18;
b) check hashtable[18], overlapping? no
c) check hashtable[19], overlapping? no
c) check hashtable[20], overlapping? yes, found after 3 checks 
```

**性能仅取决于选择的哈希函数：**

如果您有许多具有相似`x`坐标的项目，您可能会在某些插槽中遇到很多冲突：**这就是为什么选择一个好的散列函数很重要**。如果区域是固定的，你甚至可以创建一个[**完美的散列**](http://en.wikipedia.org/wiki/Perfect_hash_function)。

# c# - RIA 域服务中的自定义命名插入方法？

> ID：11085104
> 
> 赞同：0
> 
> 时间：2012-06-18T14:36:11.193
> 
> 标签：c#, silverlight, wcf-ria-services, ria

当用户登录 Silverlight 应用程序时，我在 SQL Server 中有一些表用于记录。

我为这些表中的每一个创建了一个实体。一个示例是`ApplicationUsageLog`，我在其中记录 ApplicationID、Date 和 UserID。这些大多是从 Silverlight 方面拉出来的。

我只想创建一个`Login(AppID,UserID)`可以插入该表的方法。

**那可能吗？**

谢谢！

**编辑**以下由于某种原因不起作用：

```
 [Invoke]
    public void Login(int AppID,string EmployeeNo)
    {
        var aul = new ApplicationUsageLog{ ApplicationID = AppID, LoginDate = System.DateTime.Now, EmployeeNo = EmployeeNo };
        if ((aul.EntityState != System.Data.EntityState.Detached))
        {
            this.ObjectContext.ObjectStateManager.ChangeObjectState(aul, System.Data.EntityState.Added);
        }
        else
        {
            try
            {
                this.ObjectContext.ApplicationUsageLogs.AddObject(aul);
            }
            catch (System.Exception e) { }
        }
    } 
```

我可以看看，`aul`一切看起来都很好。但是当我在最后放一个断点时，`this.ObjectContext.ApplicationUsageLogs`仍然是完全空的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:40:17.023

是的，您可以向标有[InvokeAttribute](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.invokeattribute%28v=vs.91%29)属性的域服务类[添加方法。](http://msdn.microsoft.com/en-us/library/ee796240%28v=vs.91%29)该方法将作为客户端上下文类的方法出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:40:58.897

如果需要，您可以将自己的自定义方法添加到 DomainService，但当您插入上下文和 SubmitChanges 时，它不会自动调用。您将不得不手动调用它。

如果您想覆盖 Insert 方法的实现，您可以简单地修改 DomainService 中 Insert*EntityName* 方法的内容。

# android - 如何在 Android 中编辑联系人数据

> ID：11085105
> 
> 赞同：2
> 
> 时间：2012-06-18T14:36:20.123
> 
> 标签：android, contacts

我有一个允许用户编辑联系人的应用程序。在那个应用程序中我有我的联系人，问题是当我尝试编辑它时，通过检索我的联系人的 uri，它总是返回 NULL。有没有办法以编程方式编辑我的联系人？

# javascript - 谷歌地图加载静态图片

> ID：11085111
> 
> 赞同：1
> 
> 时间：2012-06-18T14:36:41.957
> 
> 标签：javascript, jquery, google-app-engine, google-maps-api-3

我`google map API`在我的项目中使用。我的代码是：

```
var map;
var op = {
   zoom: 8,
   center: new google.maps.LatLng(-34.397, 150.644),
   mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("container"), op); 
```

我的问题是谷歌加载静态图像而不是交互式地图。我也试过

`useStaticMap: false`在选项中，但使用它后它什么都不加载（没有地图，没有图像）。

请告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:42:26.090

当您说静态地图时，这是否意味着您无法缩放、平移等。自从我使用 Google 地图以来已经有一段时间了，但我记得您可以提供启用缩放和平移的设置。尝试启用这些功能，而不是使用静态地图。或者相反，也许您已禁用它们。

我想它也可能是您包含的 javascript 文件。此外，有两个 API，看起来你可以有两个不同的 API 密钥。也许你有静态的。所以那里大约有三种不同的选择。其中最有可能是问题之一，因为代码非常小并且对我来说看起来很好。

**API v3**

[https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

**静态地图**

[https://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

我会尝试添加一个控件。或者也许给我们更多的代码。

向地图添加控件

您可能希望通过删除、添加或修改 UI 行为或控件来定制您的界面，并确保未来的更新不会改变这种行为。如果您只想添加或修改现有行为，则需要确保将控件显式添加到您的应用程序中。

某些控件默认显示在地图上，而其他控件则不会出现，除非您特别要求。从地图中添加或删除控件在以下地图选项对象的字段中指定，您将其设置为 true 以使它们可见或设置为 false 以隐藏它们：

```
{
  panControl: boolean,
  zoomControl: boolean,
  mapTypeControl: boolean,
  scaleControl: boolean,
  streetViewControl: boolean,
  overviewMapControl: boolean
} 
```

以下示例将地图设置为隐藏导航（缩放和平移）控件并显示比例控件。请注意，我们没有明确禁用默认 UI，因此这些修改是对默认 UI 行为的附加。

```
function initialize() {
  var myOptions = {
    zoom: 4,
    center: new google.maps.LatLng(-33, 151),
    panControl: false,
    zoomControl: false,
    scaleControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
} 
```

这是代码的参考。

[https://developers.google.com/maps/documentation/javascript/controls](https://developers.google.com/maps/documentation/javascript/controls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:59:44.713

150.644，-34.397，这个坐标不存在

# tlb - PowerPC e500：任何“页面全局启用”标志等效？

> ID：11085112
> 
> 赞同：1
> 
> 时间：2012-06-18T14:36:43.283
> 
> 标签：tlb, powerpc

来自英特尔 x86 系统编程指南：

> PGE 页面全局启用（CR4 的第 7 位）—（在 P6 系列处理器中引入。）设置时启用全局页面功能；清除时禁用全局页面功能。全局页面功能允许将经常使用或共享的页面标记为对所有用户都是全局的（使用页面目录或页表条目中的全局标志位 8 完成）。全局页面不会在任务切换或写入寄存器 CR3 时从转换后备缓冲区 (TLB) 中刷新。

PowerPC e500 核心系列是否有任何等效功能？

谢谢，泰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:16:45.927

查看 e500 内核参考手册（可从 freescale.com 下载），我发现 MAS[0-4] 寄存器大致可以满足您的需要（第 2.12 节）。这是飞思卡尔 Book E 实施的一部分，因此还可以在 freescale.com 上找到更多详细信息。

# php - json php 示例

> ID：11085114
> 
> 赞同：0
> 
> 时间：2012-06-18T14:36:44.167
> 
> 标签：php, json

我正在使用使用 php 的 rest-api。有人可以告诉我如何使用 php 表示以下 JSON 格式吗？rest api 需要这种格式来执行过滤。

--data-urlencode 'where={"post":{"__type":"Pointer","className":"Post","objectId":"8TOXdXf3tz"}}' \

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:39:35.637

您可以使用 PHP 创建数组，然后使用[json_encode](http://php.net/manual/en/function.json-encode.php)函数创建 JSON 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:39:59.127

json_decode 该字符串以获得将导致的确切数组，但是 yip 和数组数组...

```
$a = json_decode('{"post":{"__type":"Pointer","className":"Post","objectId":"8TOXdXf3tz"}}',true); 
```

结果：

```
 array(1) {
      ["post"] => array(3) {
        ["__type"] => string(7) "Pointer"
        ["className"] => string(4) "Post"
        ["objectId"] => string(10) "8TOXdXf3tz"
      }
    } 
```

所以在 PHP 中写成一个数组：

```
$thing = array(
    "post" => array(
        "__Type" => "Pointer",
        "className" => "Post",
        "objectId" =>> "9878076"
    );
); 
```

然后 json_encode 将重新创建 json ...

# java - 未经授权的 Rovi 电视节目表服务肥皂 1.2

> ID：11085116
> 
> 赞同：1
> 
> 时间：2012-06-18T14:36:50.600
> 
> 标签：java, eclipse, soap, soapui

我正在使用soap UI通过提供凭据来测试Web服务，但它始终显示“未经授权”的消息。任何人都可以让我知道为什么会这样吗？我正在尝试获取服务。

[http://developer.rovicorp.com/docs](http://developer.rovicorp.com/docs)

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"     xmlns:typ="http://api.rovicorp.com/v9/common/types"     xmlns:lis="http://api.rovicorp.com/v9/listings">
 <soap:Header>
  <typ:AuthHeader>
     <typ:UserName>username</typ:UserName>
     <typ:Password>password</typ:Password>
  </typ:AuthHeader>
</soap:Header>
<soap:Body>
  <lis:GetServices>
     <!--Optional:-->
     <lis:request>
        <!--Optional:-->
        <typ:ClientBatchId>?</typ:ClientBatchId>
        <lis:Locale>en-GB</lis:Locale>
        <!--You have a CHOICE of the next 2 items at this level-->
        <lis:ServiceSearch>
           <!--Optional:-->
           <lis:PostalCode>?</lis:PostalCode>
           <!--Optional:-->
           <lis:CountryCode>GB</lis:CountryCode>
           <!--Optional:-->
           <lis:MSOId>?</lis:MSOId>
        </lis:ServiceSearch>
        <lis:ServiceId>?</lis:ServiceId>
        <lis:StartDate>2012-06-19</lis:StartDate>
        <lis:Duration>263521</lis:Duration>
     </lis:request>
   </lis:GetServices>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:04:54.400

这很可能是因为您没有提供身份验证签名。如果您在 Rovi 门户中查看您的帐户，则会有一个与您的 API 密钥相关联的共享密钥。您可以通过对您的 apikey、共享密钥和 epoch 进行 md5 运算来计算签名。此链接应该对此有所帮助：http: [//prod-doc.rovicorp.com/mashery/index.php/Authentication-Code-Examples](http://prod-doc.rovicorp.com/mashery/index.php/Authentication-Code-Examples)

# .net - 如何在没有持久性的情况下执行 Naked Objects .NET MVC

> ID：11085117
> 
> 赞同：1
> 
> 时间：2012-06-18T14:36:50.210
> 
> 标签：.net, asp.net-mvc-3, naked-objects

我正在寻找重新编写一个管理应用程序，并且我已经有一个非常干净的域类库和 Web 服务/数据库来处理所有的业务逻辑和持久性。也就是说，该库已经提供了 CreateFoo、GetFoo 和 UpdateFoo 方法，它们默认使用现有的 Web 服务。

我想我可能会使用[Naked Objects for .NET MVC](http://nakedobjects.net/home/index.shtml)来编写一个新的 Web 管理工具。看起来 Naked Objects 假设您希望 Naked Objects 框架同时处理 GUI 和持久性，但我只希望 MVC 网站来自 Naked Objects，而不是持久性。

有没有关于如何为 .NET 做**仅 GUI 的**裸对象的指导？ **我如何完全“关闭”持久性方面？** 如果我*只是尝试一下*，我会得到一个异常“App.config 文件中没有实体连接字符串”——当然，我不想使用任何连接字符串。

更新：将新的 NakedObjects.Persistor.Objectstore.Inmemory.InMemoryObjectPersistorInstaller 注入 RunWeb.cs 中的 Persistor 属性似乎让我切换到内存中持久性。再深入一点，似乎我可能需要实现更复杂的接口——因此需要一个指南。也许在我们必须连接所有持久性逻辑以适应 Naked Objects 接口的应用程序中使用 Naked Objects 是不值得的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:27:13.810

正如您所说，您可以将 NO MVC 与内存对象存储一起使用。你需要覆盖

```
protected override IObjectPersistorInstaller Persistor 
```

RunWeb 类中的属性。

但这些对象必须来自*某个地方*。在内存对象存储的情况下，要查找的另一个安装程序是 IFixturesInstaller，它定义了一组固定装置（实体）以在启动时安装到内存对象存储中。

不过，总的来说，您的用例可能并不特别适合 NO MVC 的设计目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:35:47.600

看起来像[裸对象](http://nakedobjects.codeplex.com/)使用 EF 进行持久性。EF 是一个 ORM，因此需要一个 db。所以简短的回答是，您不能从数据库切换到 Web 服务以实现持久性，因为 NO 与 EF 相关联。

# imagemagick - 使用 html2ps 和 imagemagick 时出错

> ID：11085123
> 
> 赞同：2
> 
> 时间：2012-06-18T14:37:36.673
> 
> 标签：imagemagick, html2ps

我正在尝试使用 html2ps 和 imagemagick 将 html 文件转换为图像。这是正在执行的命令：

```
convert ./test.html ./test.png 
```

这是我收到的错误：

```
Use of assignment to $[ is deprecated at /usr/bin/html2ps line 3409.
*** Error opening /tmp/magick-mEFhFOmU
Error: /nocurrentpoint in --currentpoint--
Operand stack:
   --nostringval--
Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2       %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1       %stopped_push   1910   1   3   %oparray_pop   1909   1   3   %oparray_pop   1893   1   3       %oparray_pop   1787   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2       --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--       --nostringval--
Dictionary stack:
   --dict:1166/1684(ro)(G)--   --dict:0/20(G)--   --dict:79/200(L)--   --dict:407/2000(L)--
Current allocation mode is local
Last OS error: 2
Current file position is 27444
GPL Ghostscript 9.05: Unrecoverable error, exit code 1
Error: /nocurrentpoint in --currentpoint--
Operand stack:
   --nostringval--
Execution stack:
  %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2       %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1910   1   3   %oparray_pop   1909   1   3   %oparray_pop   1893   1   3   %oparray_pop   1787   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2       --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--       --nostringval--
Dictionary stack:
   --dict:1166/1684(ro)(G)--   --dict:0/20(G)--   --dict:79/200(L)--   --    dict:407/2000(L)--
Current allocation mode is local
Last OS error: 2
Current file position is 27444
GPL Ghostscript 9.05: Unrecoverable error, exit code 1
convert: unable to open image `./test.html':  @ error/blob.c/OpenBlob/2587.
convert: Postscript delegate failed `/tmp/magick-Dm8Uf9H1':  @ error/ps.c/ReadPSImage/806.
convert: missing an image filename `./test.png' @ error/convert.c/ConvertImageCommand/3011. 
```

我试过搜索但没有运气。我部分了解这里发生了什么，但不知道如何解决它。

编辑：我在 Ubuntu 32 位上运行它

# java - Spring AOP @annotation

> ID：11085125
> 
> 赞同：0
> 
> 时间：2012-06-18T14:37:38.253
> 
> 标签：java, spring, aop

我是 AOP 的新手，尤其是 Spring AOP。

我想以某种特定的方法记录执行时间。我阅读了 Spring 文档并认为最好的解决方案是使用注释切入点创建方面。

看起来像：

```
@Around("@annotation(com.x.y.MethodExecutionTime)")
public Object methodExecutionTimeLog(ProceedingJoinPoint joinPoint) throws Throwable 
    StopWatch stopWatch = new StopWatch();

    Object retVal = null;
    try {
        stopWatch.start();
        retVal = joinPoint.proceed();
        stopWatch.stop();
        logger.info("Execution time: " + stopWatch.getTotalTimeMillis() + " ms");
    } catch(Throwable e) {
        logger.error("Execution time: " + stopWatch.getTotalTimeMillis() + " ms");
        throw e;
    }
    return retVal;
} 
```

注解用于方法：

```
 @Override
@MethodExecutionTime
public <T> T copy(Class<T> destType) {

    T t = ReflectionHelper.newInstance(destType);

    copyTo(t);

    return t;
} 
```

春天 XML 配置：

```
<context:spring-configured />
<aop:aspectj-autoproxy proxy-target-class="true" /> 
```

但它什么也没记录。

我正在使用 Spring 3.0.5

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:11:35.267

如果其他一切配置正确，它应该是 Spring AOP 的限制之一（至少，它的默认配置），即：

*   应用方面的对象应该由 Spring 管理（即，它应该从应用程序上下文中获取，而不是使用创建`new`）

*   调用应源自该对象的“外部”，即当您调用同一对象的另一个方法时，不应用方面

*   `<aop:aspectj-autoproxy>`应该在与应用方面的对象相同的应用程序上下文中声明（特别是在典型的 Spring Web MVC 应用程序中`applicationContext.xml`并`...-servlet.xml`形成不同的应用程序上下文）

# c# - 使用 htmlagilitypack 选择具有特定文本值的节点

> ID：11085129
> 
> 赞同：6
> 
> 时间：2012-06-18T14:37:46.970
> 
> 标签：c#, hyperlink, screen-scraping, html-agility-pack

所以我知道如何使用 htmlagilitypack 选择节点：

```
HtmlNode.SelectNodes(".//div[@class='description']") 
```

等等......但是说我有一个以下列方式设置的网站：

```
<a href="/link1/">This is Link 1</a>
<a href="/link2/">This is information i want to get to</a>
<a href="/link3/">This is Link 3</a>
<a href="/link4/">This is information i want to get to</a>
<a href="/link5/">This is Link 5</a>
<a href="/link6/">This is Link 6</a> 
```

ETC...

现在，片段很短，但基本上，链接是不对称的，我只想访问具有文本值的链接

> “这是我想要得到的信息”

（我对 hmtl 不够熟悉，无法在这里使用正确的术语，抱歉）。htmlagilitypack 中是否有可以检查此文本值的方法？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T14:40:55.123

尝试使用该`text()`功能：

```
SelectNodes("a[text()='This is information i want to get to']") 
```

# vim - 如何在vim中创建一个包含现有文件内容的新文件

> ID：11085136
> 
> 赞同：0
> 
> 时间：2012-06-18T14:38:01.357
> 
> 标签：vim

我想创建一个包含代码块的文件，然后，当我打开一个新文件时，这个块已经在文件中，而不必每次都复制粘贴。就像是：

```
:e newfile.cpp/template.cpp 
```

我现在有一个名为 newfile.cpp 的新文件，其中包含 template.cpp 的内容；template.cpp 只会放在我的目录中，除非我专门打开它，否则不会更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:44:28.830

一种通用的可能性是简单地使用这个命令：

```
:r template.cpp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:45:16.950

使用`|`(bar) 连接两个命令：

```
:e newfile.cpp | r template.cpp 
```

*   创建一个新文件
*   阅读模板

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:45:03.517

您可以打开模板并使用：

```
:saveas newfile.cpp 
```

或者，使用像[snipMate](http://www.vim.org/scripts/script.php?script_id=2540)或[XPTemplate](http://www.vim.org/scripts/script.php?script_id=2611)这样的片段插件来实现类似的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:36:17.187

如果大量依赖模板，您可能需要更高级的东西。vim.org 上有几个这样的插件；一个是[tSkeleton](http://www.vim.org/scripts/script.php?script_id=1160)。

# c# - 比较两个版本的文件并将更改应用于旧文件

> ID：11085138
> 
> 赞同：4
> 
> 时间：2012-06-18T14:38:02.207
> 
> 标签：c#, algorithm, file-comparison

我一直在搜索和谷歌搜索这个问题，我已经知道如何比较两个文件（哈希、校验和等）。但这不是我所需要的。我需要的内容如下所述。

假设我有一个文件并且我已经备份了它。后来我对该文件进行了一些更改，因此我想将更改应用到备份版本。由于两个文件可能足够大而更改可能很小，所以我不想重写所有文件，因为我打算通过互联网（可能是 FTP）备份它，这可能需要很多时间。

我如何看待这个（样本）：

文件的备份版本（字节）

```
134 253 637 151 
```

较新版本的文件（字节）

```
134 624 151 890 
```

而不是重写所有字节，我们应该：

1.  更改`253`为`624`（更改字节）
2.  删除`637`字节（删除字节）
3.  `890`在文件末尾写入（插入字节）

1、2、3 选项不一定在每种情况下都同时出现。请注意，备份文件可能位于其他地方，我只能通过互联网访问它（服务器可以返回一些内容，以便我们可以比较文件）。

我怎样才能做到这一点？我知道这可能是因为我知道实现它的软件（但不知道如何实现）。欢迎和高度评价任何提示、教程等。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T14:44:32.790

您正在尝试解决每个 MMORPG 已解决的相同问题...创建和应用小补丁文件以更新旧版本的大型二进制文件。

这是一个经过充分研究的问题，并且有许多解决方案。有关几个现有选项，请参阅

[C# 中的二进制补丁生成](https://stackoverflow.com/questions/5831/binary-patch-generation-in-c-sharp)

# java - 尝试将字符串解析为整数时出现 NumberFormatException

> ID：11085144
> 
> 赞同：-2
> 
> 时间：2012-06-18T14:38:25.733
> 
> 标签：java, string, parseint

```
Exception in thread "main" java.lang.NumberFormatException: For input string: " 400"
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
        at java.lang.Integer.parseInt(Integer.java:470)
        at java.lang.Integer.parseInt(Integer.java:514)
        at Library.loadBooks(Library.java:191)
        at UseLibrary.main(UseLibrary.java:102) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T14:40:01.753

您有一个空格`" 400"`，导致`NumberFormatException`.

`String.trim()`在尝试解析之前使用。

阅读[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)以获取有关`String.trim()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:43:05.943

使用 .trim() 函数消除空格。

```
Integer.valueOf(" 400".trim()); 
```

该功能将避免您遇到此类问题。

# python - 如何在 Google AppEngine 中过滤多个属性？（Python）

> ID：11085148
> 
> 赞同：0
> 
> 时间：2012-06-18T14:38:37.410
> 
> 标签：python, google-app-engine

我在使用使用多个过滤器的查询时遇到问题（我使用的是 NDB 而不是 DB）：

```
...
foo = something.query(something.a==5, something.b<8, something.c<3).order(something.b).fetch(1)
... 
```

我收到此错误：

```
Only one inequality filter per query is supported. 
```

我可以通过使用这样的东西来解决这个问题：

```
...
foo = something.query(something.a==5, something.b<8).order(something.b).fetch()
#loop through each one of those rows and add those who have foo.c<3 to some array 
```

但这个解决方案并不是很好。有人有更好的主意吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T21:18:40.340

我有一个相关的问题，我使用了 ComputedProperty 来解决它。例如，您可以有一个 ComputedProperty(lambda self: self.b < 8 and self.c < 3)，然后只查询该 ComputedProperty 是否为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:42:03.993

您需要使用[query.AND 或 query.OR](https://developers.google.com/appengine/docs/python/ndb/queries#nest_and_or)：

```
qry = Article.query(query.AND(Article.tags == 'python',
                              query.OR(Article.tags.IN(['ruby', 'jruby']),
                                       query.AND(Article.tags == 'php',
                                                 Article.tags != 'perl')))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:25:24.730

这就是我解决它的方法：

```
foo = something.query(ndb.query.AND(something.a==5, something.b<8, ndb.query.OR(something.c==1, something.c==2))) 
```

# html - CSS：文本装饰：无；适用于 Firefox，不适用于 IE 8

> ID：11085149
> 
> 赞同：3
> 
> 时间：2012-06-18T14:38:47.230
> 
> 标签：html, css, internet-explorer, text-decorations

我正在开发 HTML 文件中的页脚（简化，包括在下面）。我有两个链接，左侧的图像称为：

*   页脚 1
*   页脚2

在 Firefox 13 中，超链接的蓝线不会根据需要出现在这两个图像/链接周围。在 IE 8 中，尽管包含 css，但蓝线确实并且顽固地拒绝消失（请参阅下面的文件）：

```
 #footer1 a{text-decoration:none;} 
```

我想让左侧两个图像/链接中的链接的蓝色链接消失，并在我的其他链接中保留文本装饰。

非常感谢您的帮助。

史蒂夫

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Text Decoration Will Not Disappear In Two Left Images In IE 8</title>
    <style type ="text/css">
    #footer
    {
        background-image:url('../images/bg-texture.gif');
        padding: 20px;
        height: 50px;
        font-size:8pt;
    }
    #footer ul, li 
    {
        display: inline;
        float:left;
        list-style-type: none;
        vertical-align:top;
        text-align:left;
    }

    #footer1 {margin-right:10%;margin-left:5%;}
    #footer1 a{text-decoration:none;}
    #footer2{margin-right:10%;}
    #footer3{margin-right:10%;}
    #footer4{margin-right:10%;}
    #footer5{margin-right:10%;}

    </style>
</head>

    <body>

            <!-- The Footer -->
            <ul id="footer">
                <li id="footer1"><a href="http://slashdot.org"> <img alt="" src="files/doc.gif"/></a></li>
                <li id="footer2"><a href="http://google.com"><img alt="" src="files/noaa.gif"/></a></li>
                <li id="footer4"><a href="http://slashdot.org/">Right Link 1</a></li>
                <li id="footer5"><a href="http://google.com">Right Link 2</a></li>
            </ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T14:41:22.153

要从图像中删除边框，您应该这样做

```
a img { border: 0 } 
```

这不会影响您的文本链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:42:35.990

作为链接的图像周围的蓝色是边框。所以设置这个应该没问题：

```
a img
{
border:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:44:40.253

以下选择器：

div * p

匹配作为 DIV 元素的孙子或更高后代的 P 元素。注意“*”两边的空白不是通用选择器的一部分；空格是一个组合符，指示 DIV 必须是某个元素的祖先，并且该元素必须是 P 的祖先。

因此，

尝试

```
#footer1 * a{text-decoration:none;} 
```

# webgl - 将新层应用于卷 webgl 的切片

> ID：11085150
> 
> 赞同：0
> 
> 时间：2012-06-18T14:38:49.973
> 
> 标签：webgl, volume, slice, xtk

我有两卷不同质量的卷 (.nrrd)。用户可以浏览图层。如果按下某个键，我想以更好的质量加载音量切片。

我的音量和这个类似：[第 10 课 xtk](http://lessons.goxtk.com/10/)

我发现：

**volume.children[2].children[0].children[0].texture.file = " [http://path/to/file.ext](http://path/to/file.ext) ";**

但如果我应用某种文件（.jpg、.dcm），什么也不会发生。

这是将切片更改为进入孩子内部并更改纹理的正确方法吗？

还是我应该将选定的切片作为一个对象单独加载并以某种方式将其应用于“低质量体积”？

* * *

**编辑：** 这是我到目前为止所尝试的（我在 dcms 上遇到错误，但在 jpgs 上没有）：

```
if (event.keyCode == 83) {  // "s"-button
    volume.children[2].children[0].children[0].texture.file = "http://localhost:3000/112.jpg";
    volume.children[2].children[0].children[0].modified();
    r.render();
} 
```

* * *

**编辑2 ：**这是我的 r.onShowtime = function() {}

```
volume.children[2].children[0].texture.file = 'http://localhost:3000/112.jpg';
volume.children[2].children[0].visible = true; // to activate the first layer
volume.children[2].children[0].modified();
console.log(volume.children[2].children[0].visible +" "+ volume.children[2].children[0].texture.file); 
```

它输出**“真实主机名/112.jpg”**

当我在 firebug 中检查 .jpg 时，标题是好的，但答案是“null”

当我检查**console.log(volume.children[2].children[0]);** 萤火虫

.texture.file 设置为 hostname/112.jpg

当我进入“网络”时，.jpg 已成功传输

![在此处输入图像描述](../Images/b46057937fbc0bcd38ba66aaebab5fe6.png)

![在此处输入图像描述](../Images/d6262280671982aed58679ddaf82ca15.png)

* * *

![在此处输入图像描述](../Images/9dfd2fc9072c824c159177d8533d681a.png)

请注意 112.jpg 和 level.jpg 是相同的。第一个在 r.onShowtime 中加载，另一个在按键事件中加载。

* * *

**编辑 3：** volume.children[2].children[0] 属于“X.slice”类型，不是吗？

这是我的方法：[jsFiddle](http://jsfiddle.net/p0rter/RFmLU/10/)

这是我的实际问题，但仍然无法正常工作：[jsFiddle](http://jsfiddle.net/p0rter/RFmLU/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:17:19.453

嗯..

我认为文件设置器（以及注入类的其他设置器）中缺少对 object.modified() 的调用。让我们看看 Haehn 什么时候会来，如果他想改变一些内在的东西，但目前你能试着自己打电话吗？

您可以尝试在修改纹理后添加：

```
volume.children[2].children[0].children[0].modified(); 
```

如果它不起作用，另外：

```
renderer.render(); 
```

**编辑：** 这很奇怪，我做了一个类似的代码，它做了一些事情。您能否通过打开您的 javascript 控制台（Firefox、Chrome、...有一个）尝试类似的操作并告诉我您遇到的错误？

```
 renderer.onShowtime = {
   for (var i=0 ; i< volume.children[2].children.length ; i++) {
     volume.children[2].children[i].texture.file="myimage.jpeg";
     volume.children[2].children[i].modified();
   }
 } 
```

在 onShowtime 中调用它很重要，因为在未加载卷之前，slicesX、slicesY... 不存在。

**编辑2：** 嘿，

感谢您添加的信息，我想我明白了！在我们的 renderer3D 的 render() 方法中，有一个关于 texture._dirty 标志的测试，你不能从框架外部进行更改。此外，带有纹理的第一次渲染使该标志为假，并且加载新纹理似乎不会将该标志设置回当前 XTK 中的真。所以，我认为，我们必须将它添加到 loader.load(texture, object) 方法中。我会在 Github 上做一个 issue，看看 Haehn 是怎么想的！

# c++ - C++ ifstream 失败位和坏位

> ID：11085151
> 
> 赞同：66
> 
> 时间：2012-06-18T14:38:50.023
> 
> 标签：c++, file-io, ifstream

在`ifstream`C++ 中，在什么条件下设置`failbit`和`badbit`标志？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-18T14:40:58.253

根据[cplusplus.com](http://www.cplusplus.com)：

> **当错误与操作本身的内部逻辑有关时， failbit**通常由输入操作设置，因此流上的其他操作可能是可能的。而当错误涉及流的完整性丢失时，通常会设置**badbit ，即使在流上执行不同的操作也可能会持续存在。**通过调用成员函数 bad 可以独立检查 badbit。

*简单来说*，如果你在期望检索一个字母时得到一个数字**，****它**就是. 如果发生**严重**错误，这会完全破坏从流中读取的能力 - 它是一个.**`failbit`**`badbit`****

 ****除了提到的标志外，还有第三个非常相似 - `eofbit`。您可以使用多种功能检查状态[`ios::fail`](http://www.cplusplus.com/reference/iostream/ios/fail/)：[`ios::good`](http://www.cplusplus.com/reference/iostream/ios/good/)和[`ios::bad`](http://www.cplusplus.com/reference/iostream/ios/bad/)

您也可以在 MSDN 资源中熟悉[**iostream 库。**](http://msdn.microsoft.com/en-us/library/aa277347%28v=vs.60%29)

**最后**，如果您在读取文件（或访问某些文件或目录）时寻找如何处理所有错误位和异常的**正确**解决方案，我强烈建议您阅读一篇非常全面且写得很好的文章“ [Reading files in C++ ”使用 ifstream：正确处理 badbit、failbit、eofbit 和 perror()](http://gehrcke.de/2011/06/reading-files-in-c-using-ifstream-dealing-correctly-with-badbit-failbit-eofbit-and-perror/) ”，最后你会发现一些**[理想的解决方案](http://gehrcke.de/2011/06/reading-files-in-c-using-ifstream-dealing-correctly-with-badbit-failbit-eofbit-and-perror/#ideal)**。这篇文章确实值得一读。****

# javascript - 精灵的PNG修复？

> ID：11085152
> 
> 赞同：2
> 
> 时间：2012-06-18T14:38:51.130
> 
> 标签：javascript, html, css

我的页面上有一些按钮是使用精灵的样式，但在 ie6 中使用“UNIT Png 修复” [http://labs.unitinteractive.com/unitpngfix.php](http://labs.unitinteractive.com/unitpngfix.php)我的精灵不再工作，并且拉伸以适应容器，有人知道是否有一个 png 修复可以与精灵一起使用吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:43:54.933

您可以回退到 IE6 的 gif sprite 背景。

```
.myClass {
  background-image: url(img.png);
}

.ie6 .myClass {
  background-image: url(img.gif);
} 
```

您可以按照 html5boilerplate 方法获取`.ie6`课程。`<body>`

[http://html5boilerplate.com/](http://html5boilerplate.com/)

编辑

或将 IE6 覆盖添加到条件 css 文件中：

```
<!--[if lte IE 6]><link rel="stylesheet" href="ie6.css" /><![endif]--> 
```

归功于@lucideer，请参阅下面的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:43:45.513

简而言之，没有。我最近遇到了同样的问题，我刚刚从标准 PNG 创建了一个 GIF，并使用 IE6 样式表来使用 GIF。这种方式仍然支持精灵定位。该解决方案的可行性取决于您的设计以及需要多少透明度。在某些情况下你可以在必要的地方把背景放在 gif 中，但我个人不会太担心 IE6

# iphone - 是否可以通过 TCP 连接到侦听 3G 网络端口的 iPhone？

> ID：11085160
> 
> 赞同：2
> 
> 时间：2012-06-18T14:39:09.990
> 
> 标签：iphone, objective-c, ios, networking, tcp

我正在开发一个严重依赖 P2P 的应用程序，但我目前没有任何 SIM 卡可供试验，因此我正在 wifi 网络上进行测试。

我想知道 3G 网络上的 iPhone 是否可以连接以及是否需要遍历 NAT 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:59:29.780

您在提供商的路由器后面，并且您的 IP 地址将类似于 10.xxx - 所以您可以告诉路由器，从互联网到端口 9420 的 TCP 连接应该转发到您的设备。我怀疑他们会为你做这件事。

# android - Android活动中的JSoup抛出异常

> ID：11085162
> 
> 赞同：0
> 
> 时间：2012-06-18T14:39:12.580
> 
> 标签：android, jsoup

我目前正在使用 JSoup 作为外部 jar，以下代码段在模拟器中引发运行时异常并最终导致应用程序崩溃：

```
Document doc = Jsoup.connect(“http://www.cnn.com”).get();
06-18 14:00:17.272: I/dalvikvm(424): Could not find method org.jsoup.Jsoup.connect, referenced from method com.pamir.ODeskActivity.getList
06-18 14:00:17.272: W/dalvikvm(424): VFY: unable to resolve static method 25: Lorg/jsoup/Jsoup;.connect (Ljava/lang/String;)Lorg/jsoup/Connection;
06-18 14:00:17.282: D/dalvikvm(424): VFY: replacing opcode 0×71 at 0×0007
06-18 14:00:17.892: D/AndroidRuntime(424): Shutting down VM
06-18 14:00:17.905: W/dalvikvm(424): threadid=1: thread exiting with uncaught exception (group=0×40014760)
06-18 14:00:17.912: E/AndroidRuntime(424): FATAL EXCEPTION: main
06-18 14:00:17.912: E/AndroidRuntime(424): java.lang.NoClassDefFoundError: org.jsoup.Jsoup
06-18 14:00:17.912: E/AndroidRuntime(424): at com.pamir.ODeskActivity.getList(ODeskActivity.java:24) 
```

这是清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ODeskActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我究竟做错了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:03:07.470

确保您的 JSoup jar 文件与其余代码一起导出。

1.  右键单击项目
2.  Java 构建路径
3.  订购和出口
4.  选中 Jsoup jar 条目旁边的框。

然后将应用程序重新加载到您的模拟器或设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:09:32.480

扩展宽恕之神所说的话。

还。

1.  右键单击项目
2.  点击安卓工具
3.  单击修复项目属性

和。

1.  点击项目
2.  干净的

# jquery - Jquery解析JSON响应

> ID：11085165
> 
> 赞同：2
> 
> 时间：2012-06-18T14:39:21.493
> 
> 标签：jquery, asp.net

我有一个 jQuery 函数 - 这是它得到的响应

```
 {"d":"{\"res\":\"\\u003cdiv class=\\\"accordian_head\\\"\\u003e\\u003cdiv class=\\\"plus\\\"\\u003e\\u003c/div\\u00..........."NewTags\":\"\\........ 
```

当响应只是 {"d":" response..." } 我在 jQuery 中使用 msg.d 阅读它没有问题 - 但在这里我有 "res" : "text" 嵌套在 "d" 中，那么如何我从这个响应中读取 res 吗？我试过了

```
 success: function (msg) {
                    var obj = unescape(msg.d);
                    var res = unescape(obj.res);
                    var newtags = unescape(obj.NewTags); 
```

我粘贴的示例 JSON 是 msg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:43:03.277

怎么样：

```
$.parseJSON(msg.d) 
```

这将取消引号并将字符串解析为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:43:12.953

当你得到`d`它时，它会返回一个字符串。您需要一个对象才能访问它的`res`属性。尝试这个：

```
success: function (msg) {
                    var obj = eval(unescape(msg.d));
                    var res = unescape(obj.res);
                    var newtags = unescape(obj.NewTags); 
```

根据 unescape 的作用，您可能只想尝试`eval(msg.d)`

如果 eval 不起作用，请尝试[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:44:18.507

您必须运行 msg.d 到[`$.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/).

如果您可以调整服务器脚本以将其作为嵌套 JSON 返回，那就更好了。

# tcl - tcl/expect 中的正则表达式

> ID：11085174
> 
> 赞同：3
> 
> 时间：2012-06-18T14:39:48.243
> 
> 标签：tcl, expect

我对期望中的正则表达式有疑问，

我使用以下表达式：

```
expect {
    -re "PLAYER: (RON)_(\[0-9]*)"
    ###do something using switch
} 
```

为了匹配输出的以下格式，输出`"PLAYER:RON_90"`的第一部分总是相同的：`"PLAYER:RON_"`，但是它的第二部分（第一部分之后的名称）正在改变 alawys，有时是`PLAYER:RON_90`，有时是`PLAYER:RON_87`，，`PLAYER:RON_75`我想做不同的根据第二部分的第一个数字的动作，例如：如果是`PLAYER:RON_second part`（90到99），做动作1，如果是`PLAYER:RON_second part`（80到89），做动作2，如果是`PLAYER:RON_second part`（70到79），做行动3。

如何实现它？修改正则表达式？或其他一些方式？谁能帮忙？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:09:03.017

怎么样：

```
expect {
    -re {PLAYER RON_(\d+)} {
} 
```

符号 \d+ 表示“至少一位十进制数字”。

更新：

```
expect -re {PLAYER RON_(\d+)} {
    set playerNumber $expect_out(1,string)
    set playerGroup [expr {$playerNumber / 10}]
    switch -- $playerGroup {
        8 { puts "80-89" }
        9 { puts "90-99" }
        10 { puts "100-109" }
    }
} 
```

如果我们有匹配项，那么 playerNumber 将是紧随其后的数字，而 playerGroup 将是`RON_`您**要**查找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:05:11.730

从手册页：

> 如果某个进程产生了输出“abbbcabkkkka\n”，则结果为：
> 
> ```
> expect -indices -re "b(b*).*(k+)" 
> ```
> 
> 就好像执行了以下语句：
> 
> ```
> set expect_out(0,start) 1
> set expect_out(0,end) 10
> set expect_out(0,string) bbbcabkkkk
> set expect_out(1,start) 2
> set expect_out(1,end) 3
> set expect_out(1,string) bb
> set expect_out(2,start) 10
> set expect_out(2,end) 10
> set expect_out(2,string) k
> set expect_out(buffer) abbbcabkkkk 
> ```

所以，对于下面的正则表达式...

```
 -re "PLAYER: (RON)_(\[0-9])(\[0-9]+)" 
```

...你可以这样做：

```
 if {[info exists expect_out(1,string)]} {
        switch -- $expect_out(1,string) {
            case "9":
                // ...
            case "8":
                // ...
            case "7":
                // ...
        }
    } 
```

同样，您可以通过检查来查看“额外”数字`[info exists expect_out(2,string)]`。

# html - MVC3 - razor：如何动态使用 mailto

> ID：11085184
> 
> 赞同：1
> 
> 时间：2012-06-18T14:40:20.927
> 
> 标签：html, asp.net-mvc-3, razor

我有一个链接如下。有什么方法可以改变`info@example.co.uk`以`model.Contact.EmailAddress`使其具有动态性。

```
<a href="mailto:info@example.co.uk">@Html.LabelFor(model => model.Contact.EmailAddress)</a></dd> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:50:33.167

如果`Contact`是绑定到视图的模型的属性，则可以像这样使用它

```
<a href="mailto:@Model.Contact.EmailAddress">@Model.Contact.EmailAddress</a> 
```

如果它是模型的子属性并且您想在循环中执行此操作，则可以这样做

```
@foreach (var item in Model.Contacts)
{
  <a href="mailto:@item.Contact.EmailAddress">@item.Contact.EmailAddress</a>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:46:11.693

只需在您的 html 中使用适当的 razor 语法，就像您在编写模型的任何输出时通常所做的那样。

```
<a href="mailto:@model.Contact.EmailAddress">@Html.LabelFor(model => model.Contact.EmailAddress)</a> 
```

# c++ - 定义向量元素的破坏顺序是否合理？

> ID：11085187
> 
> 赞同：11
> 
> 时间：2012-06-18T14:40:27.603
> 
> 标签：c++, vector, standards, destruction

我知道向量元素的破坏顺序不是由 C++ 标准定义的（请参见[std::vector 元素的](https://stackoverflow.com/questions/6169125/order-of-destruction-of-elements-of-an-stdvector)破坏顺序），我看到我检查的所有编译器都从头到尾进行了这种破坏——这让我很惊讶，因为动态和静态数组以相反的顺序进行，这种相反的顺序在 C++ 世界中很常见。

严格来说：我知道“容器成员......可以使用例如插入和擦除成员函数以任何顺序构造和销毁”，我不投票支持“容器在这些更改上保留某种日志”。我只会投票支持将当前的向量析构函数实现从前向破坏更改为元素的后向破坏——仅此而已。并且可能将此规则添加到 C++ 标准中。

以及为什么？以这种方式从数组更改为向量会更安全。

真实世界的例子：我们都知道互斥锁的锁定和解锁顺序非常重要。并确保解锁发生 - 使用 ScopeGuard 模式。那么销毁顺序很重要。考虑这个例子。那里 - 从数组切换到向量会导致死锁 - 只是因为它们的破坏顺序不同：

```
class mutex {
public:
    void lock() { cout << (void*)this << "->lock()\n"; }
    void unlock() { cout << (void*)this << "->unlock()\n"; }
};

class lock {
    lock(const mutex&);
public:
    lock(mutex& m) : m_(&m) { m_->lock(); }
    lock(lock&& o) { m_ = o.m_; o.m_ = 0; }
    lock& operator = (lock&& o) { 
        if (&o != this) {
            m_ = o.m_; o.m_ = 0;
        }
        return *this;
    }
    ~lock() { if (m_) m_->unlock(); }  
private:
    mutex* m_;
};

mutex m1, m2, m3, m4, m5, m6;

void f1() {
    cout << "f1() begin!\n";
    lock ll[] = { m1, m2, m3, m4, m5 };
    cout <<; "f1() end!\n";
}

void f2() {
    cout << "f2() begin!\n";
    vector<lock> ll;
    ll.reserve(6); // note memory is reserved - no re-assigned expected!!
    ll.push_back(m1);
    ll.push_back(m2);
    ll.push_back(m3);
    ll.push_back(m4);
    ll.push_back(m5);
    cout << "f2() end!\n";
}

int main() {
    f1();
    f2();
} 
```

输出 - 查看从 f1() 到 f2() 的销毁顺序更改

```
f1() begin!
0x804a854->lock()
0x804a855->lock()
0x804a856->lock()
0x804a857->lock()
0x804a858->lock()
f1() end!
0x804a858->unlock()
0x804a857->unlock()
0x804a856->unlock()
0x804a855->unlock()
0x804a854->unlock()
f2() begin!
0x804a854->lock()
0x804a855->lock()
0x804a856->lock()
0x804a857->lock()
0x804a858->lock()
f2() end!
0x804a854->unlock()
0x804a855->unlock()
0x804a856->unlock()
0x804a857->unlock()
0x804a858->unlock() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:20:41.123

我认为这是 C++ 的另一个案例，它让编译器编写者可以灵活地为其架构编写性能最高的容器。在 0.001% 的情况下，为了方便起见，要求按特定顺序销毁可能会损害性能（我实际上从未见过默认顺序不合适的另一个示例）。在这种情况下，因为`vector`是连续数据，我指的是硬件智能地利用前瞻缓存的能力，而不是向后迭代并可能反复丢失缓存。

如果您的容器实例需要特定的破坏顺序，该语言会要求您自己实现它，以避免潜在地惩罚标准功能的其他客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T20:33:14.207

Fwiw，[libc++](http://libcxx.llvm.org/)输出：

```
f1() begin!
0x1063e1168->lock()
0x1063e1169->lock()
0x1063e116a->lock()
0x1063e116b->lock()
0x1063e116c->lock()
f1() end!
0x1063e116c->unlock()
0x1063e116b->unlock()
0x1063e116a->unlock()
0x1063e1169->unlock()
0x1063e1168->unlock()
f2() begin!
0x1063e1168->lock()
0x1063e1169->lock()
0x1063e116a->lock()
0x1063e116b->lock()
0x1063e116c->lock()
f2() end!
0x1063e116c->unlock()
0x1063e116b->unlock()
0x1063e116a->unlock()
0x1063e1169->unlock()
0x1063e1168->unlock() 
```

它是有目的地以这种方式实现的。[这里](http://llvm.org/svn/llvm-project/libcxx/trunk/include/vector)定义的关键函数是：

```
template <class _Tp, class _Allocator>
_LIBCPP_INLINE_VISIBILITY inline
void
__vector_base<_Tp, _Allocator>::__destruct_at_end(const_pointer __new_last, false_type) _NOEXCEPT
{
    while (__new_last != __end_)
        __alloc_traits::destroy(__alloc(), const_cast<pointer>(--__end_));
} 
```

`size()`只要需要缩小，就会调用这个私有的实现细节。

我还没有收到任何关于这个可见的实施细节的反馈，无论是正面的还是负面的。

# java - 在 Android 中创建复合视图

> ID：11085188
> 
> 赞同：3
> 
> 时间：2012-06-18T14:40:46.090
> 
> 标签：java, android, views

我想创建一个自定义视图（我称之为`MyComplexView`），例如`RelativeLayout`带有 a `Imageview`、 a`TextView`和 a 的 a `Button`。

我想用布局声明一个xml，然后创建类：

```
MyComplexView extends RelativeLayout{...} 
```

但我不知道我应该覆盖什么来指示应该膨胀哪个布局。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:55:50.280

像这样的东西：

1.  从超类添加构造函数。（只有上下文的用于以编程方式创建视图，其他用于在 XML 中添加视图时。

2.  创建一个`init()`例如调用的方法并从每个构造函数中调用它。

3.  在init方法里面做：

    LayoutInflater.from(context).inflate(R.layout.my_view_layout, this, true);

现在 inflate 附加参数实际上意味着：

true -> 在您的情况下将布局附加到根相对布局（专业提示：因此，如果您的布局根也是相对布局，则在 xml 中您可以只合并标签并在代码中对齐它们以便层次结构更简单）或任何你喜欢的布局。

this -> 将膨胀视图附加到您正在扩展的相对布局的布局。

它将自动附加到根 -> 扩展RelativeLayout。

然后你可以使用 findViewById 像：

```
this.findViewById(R.id.myView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:56:36.347

我不是 100% 确定你的主要目标是什么，所以我尽量做到彻底：

如果您想在其他布局中包含一个复杂的布局，那么您可以简单地定义`my_complext_layout.xml`, 并在您的其他布局中放置：

```
<include layout="@layout/my_complext_layout" /> 
```

如果您需要运行自己的代码，那么您可以简单地将这个布局的根设为`MyComplexView`，并且您可以在创建视图时运行代码。

If you have intended to let your code operate on the layout, then simply implement an [`OnGlobalLayoutListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html) and add it to your layout in your views constructor.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:56:43.900

Implement a Constructor for the `MyComplexView`:

```
public MyComplexView(Context context, AttributeSet attrs){
    LayoutInflater inflater = LayoutInflater.from(context);
    inflater.inflate(R.layout.header_view, this, true);
    mHeaderView = (TextView)findViewById(R.id.header);
    if(mHeaderView != null)
        mHeaderView.setText("Test"); 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T14:57:48.703

See [Custom Components](http://developer.android.com/guide/topics/ui/custom-components.html) in the developer docs. In particular the [Compound Controls](http://developer.android.com/guide/topics/ui/custom-components.html#compound) section.

Once you've made your java file, in order to refer to it in xml you'll have to use a fully qualified packagename i.e:

```
<com.yourpackage.YourCustomView
android:layout_height="wrap_content"
android:layout_width="wrap_content" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T14:58:52.323

Creating a custom view usually is aimed to create a widget which doesn't exist yet. What you're trying to do is to have the same layout repeated at multiple places.

You have severall options to do that according to your context.

1.  If the layout is to be placed in a lest, just create your layout in a separate file, and use it in a ListAdapter. Take a look at the [ListView Tutorial](http://developer.android.com/resources/tutorials/views/hello-listview.html) for this.

2.  If this layout is a generic layout to be embedded in multiple activities, try using a Fragment instead. Fragments are subparts of an activity, with their own views. Alternatively, you can just embed the layout in severall xml using the tag.

3.  If really you want a custom class and single widget, then you need to extend the View class. Extending a layout means you wan't to organize child widgets differently (for example, organize them in circle). Extending a View, you can have exactly what you want (button, image, text) organized always in the same way. But I won't lie to you, this will mean lot of work.

# linux - Ubuntu 11.04 中的 kdb 调试

> ID：11085199
> 
> 赞同：1
> 
> 时间：2012-06-18T14:41:34.070
> 
> 标签：linux, device, drivers

在内核模块编程中，我们如何使用 Kdb 进行调试？我尝试使用 ubuntu 11.04，但我没有为 2.6.38 内核版本获得正确的 kdb 补丁，所以有人可以建议如何在这个内核版本下进行 kdb 调试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:48:40.750

KDB 必须在您的内核中打开。我怀疑它是在 Ubuntu 默认版本上编译的。

[这里](http://elinux.org/KDB)有详细信息。我希望你知道如何重建内核。

# mysql - 使用 MySQL 计算两个表之间的每月用户分数？

> ID：11085202
> 
> 赞同：0
> 
> 时间：2012-06-18T14:41:50.863
> 
> 标签：mysql, userid

我在stackoverflow上找到了很多有用的信息，但是仍然缺少一点点来解决以下问题：

我有两个表**usercores**和**userpoints**像这样：

```
#table userscores (saves userpoints each month) 

date          userid   points
2012-05-01    1        23
2012-06-01    1        34 
```

```
#table userpoints (recent points) 

userid   points
1        23
2        10
3        15 
```

我能够找出如何使用以下方法计算当前月份的最近用户点和存储的用户点（来自表“userscores”）之间的差异：

```
SELECT userpoints.userid, userpoints.points - userscores.points AS mpoints 
    FROM `userpoints`,`userscores` 
    WHERE userpoints.userid=userscores.userid 
        AND YEAR(userscores.date) = YEAR(CURDATE()) 
        AND MONTH(userscores.date) = MONTH(CURDATE())
        AND userpoints.userid != ".$adminID."
    ORDER BY mpoints DESC;" 
```

但是，此查询仅比较两个表中的用户 ID，并**忽略**表 userpoints 中存在但表 usercores 中不存在的用户 ID。

应该修改查询，以便新创建的用户 ID（在表 userpoints 中）也被视为分数。

我发现了如何查询以获取表 usercores 中不存在的用户 ID：

```
 SELECT userpoints.userid FROM `userpoints` 
      WHERE userpoints.userid 
           NOT IN(SELECT qa_userscores.userid FROM `qa_userscores`) 
```

现在我必须**将两者结合起来，**但尝试以下方法不起作用：

```
SELECT userpoints.userid, userpoints.points - userscores.points AS mpoints 
FROM `userpoints`,`userscores` 
WHERE ( 
    userpoints.userid = userscores.userid
    AND YEAR(userscores.date) = YEAR(CURDATE()) 
    AND MONTH(userscores.date) = MONTH(CURDATE())
    AND userpoints.userid != ".$adminID."
)
OR ( 
    userpoints.userid IN(SELECT userpoints.userid FROM `userpoints` 
        WHERE userpoints.userid 
            NOT IN(SELECT DISTINCT userscores.userid FROM `userscores`)) 
)
ORDER BY mpoints DESC; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:59:52.537

```
SELECT userpoints.userid, userpoints.points - coalesce(userscores.points,0) 
                                                 AS mpoints 
    FROM `userpoints`
    left join `userscores` on userpoints.userid=userscores.userid         
        AND YEAR(userscores.date) = YEAR(CURDATE()) 
        AND MONTH(userscores.date) = MONTH(CURDATE())
    where userpoints.userid != ".$adminID."
    ORDER BY mpoints DESC;" 
```

即使右侧没有对应的行，Left 连接也会自动保留左侧的行。您在右侧检查的所有条件都必须在 Join Condition 中。最后，当右侧值没有时，您需要使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:07:26.050

您可以使用 组合来自两个查询的结果`UNION`。

```
SELECT userpoints.userid, userpoints.points - userscores.points AS mpoints 
    FROM `userpoints`,`userscores` 
    WHERE userpoints.userid=userscores.userid 
        AND YEAR(userscores.date) = YEAR(CURDATE()) 
        AND MONTH(userscores.date) = MONTH(CURDATE())
UNION 

SELECT userpoints.userid, points as mpoints FROM `userpoints` 
      WHERE userpoints.userid 
           NOT IN(SELECT userscores.userid FROM `userscores`) 
```

有关. [_](http://dev.mysql.com/doc/refman/5.5/en/union.html) _`UNION`

# entity-framework - 实体框架中的内容国际化

> ID：11085205
> 
> 赞同：19
> 
> 时间：2012-06-18T14:42:02.200
> 
> 标签：entity-framework, internationalization

我不断遇到 i18n 要求，我的数据（不是我的 UI）需要国际化。

```
public class FooEntity
{
  public long Id { get; set; }
  public string Code { get; set; } // Some values might not need i18n
  public string Name { get; set } // but e.g. this needs internationalized
  public string Description { get; set; } // and this too
} 
```

**我可以使用哪些方法？**

**我尝试过的一些事情：-**

**1）在数据库中存储资源键**

```
public class FooEntity
{
  ...
  public string NameKey { get; set; }
  public string DescriptionKey { get; set; }
} 
```

*   优点：不需要复杂的查询来获得翻译的实体。`System.Globalization`为您处理后备。
*   缺点：管理员用户无法轻松管理翻译（必须在我`Foo`更改时部署资源文件）。

**2）使用`LocalizableString`实体类型**

```
public class FooEntity
{
  ...

  public int NameId { get; set; }
  public virtual LocalizableString Name { get; set; }

  public int NameId { get; set; }
  public virtual LocalizableString Description { get; set; }
}

public class LocalizableString
{
  public int Id { get; set; }

  public ICollection<LocalizedString> LocalizedStrings { get; set; }
}

public class LocalizedString
{
  public int Id { get; set; }

  public int ParentId { get; set; }
  public virtual LocalizableString Parent { get; set; }

  public int LanguageId { get; set; }
  public virtual Language Language { get; set; }

  public string Value { get; set; }
}

public class Language
{
  public int Id { get; set; }
  public string Name { get; set; }
  public string CultureCode { get; set; }
} 
```

*   优点：同一个表中的所有本地化字符串。可以按字符串执行验证。
*   缺点：查询很可怕。必须为父实体上的每个可本地化字符串包含一次 LocalizedStrings 表。后备是困难的，涉及广泛的加入。在检索例如表的数据时，还没有找到避免 N+1 的方法。

**3) 使用具有所有不变属性的父实体和包含所有本地化属性的子实体**

```
public class FooEntity
{
  ...
  public ICollection<FooTranslation> Translations { get; set; }
}

public class FooTranslation
{
  public long Id { get; set; }

  public int ParentId { get; set; }
  public virtual FooEntity Parent { get; set; }

  public int LanguageId { get; set; }
  public virtual Language Language { get; set; }

  public string Name { get; set }
  public string Description { get; set; }
}

public class Language
{
  public int Id { get; set; }
  public string Name { get; set; }
  public string CultureCode { get; set; }
} 
```

*   优点：没有那么难（但仍然太难了！）将实体完整翻译到内存中。
*   缺点：实体数量翻倍。无法处理实体的部分翻译 - 尤其是在 Name 来自`es`但 Description 来自的情况下`es-AR`。

**我对解决方案有三个要求**

*   用户可以在运行时编辑实体、语言和翻译

*   用户可以根据 System.Globalization 提供来自回退的缺失字符串的部分翻译

*   实体可以被带入内存而不会遇到例如 N+1 问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T19:17:03.613

你为什么不采取两全其美？拥有一个处理资源加载和选择正确文化的 CustomResourceManager，并使用一个使用您喜欢的任何后备存储的 CustomResourceReader。一个基本的实现可能看起来像这样，依赖于 Resourceky 的约定是 Typename_PropertyName_PropertyValue。如果由于某种原因需要更改 backingstore 的结构（csv/excel/mssql/table 结构），您只需更改 ResourceReader 的实现。

作为额外的奖励，我还得到了真实/透明的代理。

**资源管理器**

```
class MyRM:ResourceManager
{
    readonly Dictionary<CultureInfo, ResourceSet>  sets = new Dictionary<CultureInfo, ResourceSet>();

    public void UnCache(CultureInfo ci)
    {
        sets.Remove(ci):
    }

    protected override ResourceSet InternalGetResourceSet(CultureInfo culture, bool createIfNotExists, bool tryParents)
    {
        ResourceSet set;
        if (!sets.TryGetValue(culture, out set))
        {
            IResourceReader rdr = new MyRR(culture);
            set = new ResourceSet(rdr);
            sets.Add(culture,set);
        }
        return set; 
    }

    // sets Localized values on properties
    public T GetEntity<T>(T obj)
    {
        var entityType = typeof(T);
        foreach (var prop in entityType.GetProperties(
                    BindingFlags.Instance   
                    | BindingFlags.Public)
            .Where(p => p.PropertyType == typeof(string) 
                && p.CanWrite 
                && p.CanRead))
        {
            // FooEntity_Name_(content of Name field)
            var key = String.Format("{0}_{1}_{2}", 
                entityType.Name, 
                prop.Name, 
                prop.GetValue(obj,null));

            var val = GetString(key);
            // only set if a value was found
            if (!String.IsNullOrEmpty(val))
            {
                prop.SetValue(obj, val, null);
            }
        }
        return obj;
    }
} 
```

**资源阅读器**

```
class MyRR:IResourceReader
{
    private readonly Dictionary<string, string> _dict;

    public MyRR(CultureInfo ci)
    {
        _dict = new Dictionary<string, string>();
        // get from some storage (here a hardcoded Dictionary)
        // You have to be able to deliver a IDictionaryEnumerator
        switch (ci.Name)
        {
            case "nl-NL":
                _dict.Add("FooEntity_Name_Dutch", "nederlands");
                _dict.Add("FooEntity_Name_German", "duits");
                break;
            case "en-US":
                _dict.Add("FooEntity_Name_Dutch", "The Netherlands");
                break;
            case "en":
                _dict.Add("FooEntity_Name_Dutch", "undutchables");
                _dict.Add("FooEntity_Name_German", "german");
                break;
            case "": // invariant
                _dict.Add("FooEntity_Name_Dutch", "dutch");
                _dict.Add("FooEntity_Name_German", "german?");
                break;
            default:
                Trace.WriteLine(ci.Name+" has no resources");
                break;
        }

    }

    public System.Collections.IDictionaryEnumerator GetEnumerator()
    {
        return _dict.GetEnumerator();
    }
    // left out not implemented interface members
  } 
```

**用法**

```
var rm = new MyRM(); 

var f = new FooEntity();
f.Name = "Dutch";
var fl = rm.GetEntity(f);
Console.WriteLine(f.Name);

Thread.CurrentThread.CurrentUICulture = new CultureInfo("nl-NL");

f.Name = "Dutch";
var dl = rm.GetEntity(f);
Console.WriteLine(f.Name); 
```

**真实代理**

```
public class Localizer<T>: RealProxy
{
    MyRM rm = new MyRM();
    private T obj; 

    public Localizer(T o)
        : base(typeof(T))
    {
        obj = o;
    }

    public override IMessage Invoke(IMessage msg)
    {
        var meth = msg.Properties["__MethodName"].ToString();
        var bf = BindingFlags.Public | BindingFlags.Instance ;
        if (meth.StartsWith("set_"))
        {
            meth = meth.Substring(4);
            bf |= BindingFlags.SetProperty;
        }
        if (meth.StartsWith("get_"))
        {
           // get the value...
            meth = meth.Substring(4);
            var key = String.Format("{0}_{1}_{2}",
                                    typeof (T).Name,
                                    meth,
                                    typeof (T).GetProperty(meth, BindingFlags.Public | BindingFlags.Instance
        |BindingFlags.GetProperty).
        GetValue(obj, null));
            // but use it for a localized lookup (rm is the ResourceManager)
            var val = rm.GetString(key);
            // return the localized value
            return new ReturnMessage(val, null, 0, null, null);
        }
        var args = new object[0];
        if (msg.Properties["__Args"] != null)
        {
            args = (object[]) msg.Properties["__Args"];
        }
        var res = typeof (T).InvokeMember(meth, 
            bf
            , null, obj, args);
        return new ReturnMessage(res, null, 0, null, null);
    }
} 
```

**真实/透明的代理使用**

```
 var f = new FooEntity();
 f.Name = "Dutch";
 var l = new Localizer<FooEntity>(f);
 var fp = (FooEntity) l.GetTransparentProxy();
 fp.Name = "Dutch"; // notice you can use the proxy as is,
                    // it updates the actual FooEntity
 var localizedValue = fp.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T03:22:53.333

**如果您在数据库中有静态内容，**第一个是值得的。**例如，如果您的*类别*相对不会被用户更改。您可以在下次部署时更改它们。我个人不喜欢这个解决方案。我不认为这是一个很好的解决方案。这只是逃避问题。**

 ****第二个**是最好的，但当您在一个实体中有两个或多个可本地化字段时可能会导致问题。您可以像这样对其进行一些简化和硬编码语言

```
public class LocalizedString
{
  public int Id { get; set; }

  public string EnglishText { get; set; }
  public string ItalianText { get; set; }
  public string ArmenianText { get; set; }
} 
```

**第三个**也不好。从这个结构中，我不能确定所有节点（文字、行、字符串等）都翻译成特定的文化。

不要过于笼统。每个问题都是专门的，也需要专门的解决方案。过多的概括会导致不合理的问题。**

# java - 使用网络在本地连接到 Apache Tomcat

> ID：11085209
> 
> 赞同：1
> 
> 时间：2012-06-18T14:42:12.407
> 
> 标签：java, tomcat, networking, performance-testing

我的问题是这样的：

我刚搬到一个网络非常缓慢、非常有限的新工作环境。我正在连接到 Apache Tomcat 并接收到字符串编码的 JSON 位（< 200 个字符）

我正在通过 URL / URLConnection 和 Node/Request 对此进行测试，所有这些都在同一台（Mac）机器（即 localhost）上运行

我的请求需要 450 到 2000 毫秒才能完全响应，同样是 < 200 个字符。同时，我通过节点对 redis（本地调用）进行的查询将在 1-3 毫秒内返回。

鉴于redis的出色性能，我猜测它是在本地连接并使用本地总线传输信息。我想知道是否可以以类似的方式连接到 tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:50:21.107

有些东西很可疑。该`localhost`名称应绑定到环回 IP 地址，因此应绑定到环回伪设备。那不应该靠近物理网络接口或物理网络。

您的请求中的某些内容可能涉及脱离机器。可能您机器的网络路由配置不正确。也许您正在做的事情需要脱离主机 DNS 查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:25:41.053

我怀疑 DNS 或其他查找正在发生（并且超时和/或失败），这就是占用您所有时间的原因。确保您没有`enableLookups`在`true`任何`<Connector>`s. 如果您不这样做，那么是时候查看配置中可能尝试记录客户端主机名而不是其 IP 地址的其他位置了。

如果你很绝望，你可以尝试使用 Wireshark 之类的东西来窥探可能发生的任何不需要的网络流量。

# mysql - 简单的 JOIN 查询不起作用

> ID：11085221
> 
> 赞同：0
> 
> 时间：2012-06-18T14:42:58.083
> 
> 标签：mysql, join

我正在学习 SQL，有人可以告诉我查询有什么问题吗？

```
SELECT * FROM customers AS C
Inner Join customers AS CC
on CC.City=C.City
INNER JOIN customers AS CCC
ON
CCC.City=C.City 
```

我使用带有 MYSQL 的“虚拟数据库”进行查询测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:55:29.563

尝试这样做：

```
SELECT C.* FROM customers C 
Inner Join customers CC 
on CC.City=C.City 
INNER JOIN 
customers CCC ON CCC.City=C.City 
```

# emacs - 将 Unicode (UTF-8) 代码点转换为字节

> ID：11085222
> 
> 赞同：6
> 
> 时间：2012-06-18T14:43:00.813
> 
> 标签：emacs, unicode, utf-8, elisp

我一直在搜索 C 源代码，但我找不到这个函数，我真的不想自己写一个，因为它绝对必须在那里。

详细说明：Unicode 点表示为 U+######## - 这很容易获得，我需要的是字符写入文件的格式（例如）。Unicode 代码点转换为字节，最右边字节的 7 位写入第一个字节，然后下一个字节的 6 位写入下一个字节，依此类推。Emacs 当然知道怎么做，但是我找不到从它获取 UTF-8 编码字符串的字节序列作为字节序列（每个包含 8 位）的方法。

诸如`get-byte`or之类的函数`multybite-char-to-unibyte`仅适用于可以使用不超过 8 位表示的字符。我需要相同的东西`get-byte`，但对于多字节字符，这样我将收到整数向量 0..256 或单个长整数 0..2^32 而不是整数 0..256。

**编辑**

以防万一以后有人需要这个：

```
(defun haxe-string-to-x-string (s)
  (with-output-to-string
    (let (current parts)
      (dotimes (i (length s))
        (if (> 0 (multibyte-char-to-unibyte (aref s i)))
            (progn
              (setq current (encode-coding-string
                             (char-to-string (aref s i)) 'utf-8))
              (dotimes (j (length current))
                (princ (format "\\x%02x" (aref current j)))))
          (princ (format "\\x%02x" (aref s i)))))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:00:12.857

`encode-coding-string`可能是您正在寻找的：

```
*** Welcome to IELM ***  Type (describe-mode) for help.
ELISP> (encode-coding-string "eĥoŝanĝo ĉiuĵaŭde" 'utf-8)
"e\304\245o\305\235an\304\235o \304\211iu\304\265a\305\255de" 
```

它返回一个字符串，但您可以使用以下命令访问各个字节`aref`：

```
ELISP> (aref (encode-coding-string "eĥoŝanĝo ĉiuĵaŭde" 'utf-8) 1)
196
ELISP> (format "%o" 196)
"304" 
```

或者如果你不介意使用`cl`函数，`concatenate`是你的朋友：

```
ELISP> (concatenate 'list (encode-coding-string "eĥoŝanĝo ĉiuĵaŭde" 'utf-8))
(101 196 165 111 197 157 97 110 196 157 111 32 196 137 105 117 196 181 97 197 173 100 101) 
```

# firefox-addon - Linux 上 Firefox 的工具栏图标高度问题

> ID：11085234
> 
> 赞同：1
> 
> 时间：2012-06-18T14:43:31.467
> 
> 标签：firefox-addon, xul

我正在使用以下代码将面板附加到工具栏按钮。

```
<toolbarpalette id="BrowserToolbarPalette">
<toolbarbutton id="test-toolbar-button" 
label="test" 
class="toolbarbutton-1 chromeclass-toolbar-additional" 
tooltiptext="test" 
type="panel"
>
<panel class="test-panel" id="test-panel" position="after_end" onpopupshown=""     width="643px" >
<iframe id="test-panel-iframe" src ="chrome://url.html" 
style="height:568px;width:343px;border:none;padding-left:3px;background-color:white;" >
</iframe>
</panel>
</toolbarbutton> 
```

根据文档，我们需要为 Firefox 工具栏按钮指定两个图标 - 16x16 和 24x24

这是正在使用的 CSS，

```
#test-toolbar-button {
  list-style-image: url("chrome://test-24.png");
  -moz-image-region: rect(0px 24px 24px 0px);
}

#test-button:hover {
}

#test-toolbar-button[disabled="true"] {
   -moz-image-region: rect(0px 48px 24px 24px);
}

toolbar[iconsize="small"] #test-toolbar-button 
{
    list-style-image: url("chrome://test-16.png");
    -moz-image-region: rect(0px 16px 16px 0px);
} 
```

但是工具栏的高度增加了，因为它有一个向下箭头，表示它是一个连接到工具栏按钮的面板，通过拧紧整个工具栏。

附上示例的屏幕截图。

[http://postimage.org/image/sqwtwbfip/](http://postimage.org/image/sqwtwbfip/)

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:27:27.477

```
-moz-box-orient: horizontal !important; 
```

这行得通。谢谢@WladimirPalant

# android - g++、c4droid 和拾取包括

> ID：11085235
> 
> 赞同：3
> 
> 时间：2012-06-18T14:43:34.460
> 
> 标签：android, c++

我正在尝试使用 TinyXML 源代码运行一些 SVG 文件。

在家里我把这个设置得很好。

但是由于经常远离计算机，我将文件移动到我的 Android 手机上，以便通过 c4droid 和 g++ 插件进行一些编码。我的手机没有植根，但插件是在内部安装的（是的，我从首选项中选择了正确的插件）。

问题是它找不到任何东西，例如 TinyXML 源代码。错误消息由一长串类方法名称组成，前面带有“未定义的对...的引用”，并且来自名为 temp.c 的文件

包含是这样定义的......

```
#include "tinyxml/tinyxml.h" 
```

其中 tinyxml 文件夹与具有 main 函数的文件 main.cpp 位于同一目录中

我有一个暗示，它正在尝试查找与临时目录相关的源代码和标头，但我可能完全错了，我对 g++ 及其错误消息不太熟悉。

非常感谢有关 g++ 或 c4droid 一般如何获取的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T00:38:12.553

我知道使用 G++ 你可以这样编译：

g++ [-flags] example.out -o example.cpp include1.cpp include1.h

它生成可执行文件`example.out`，其中`example.cpp`包含`int main()`并包含`include1.h`的代码。

然而，我自己正在努力在 C4Droid 中包含使用 G++ + Bionic 的文件。在修改 C4Droid 应用程序的 GCC 插件附带的 NativeActivity 示例时，我很幸运。

抱歉，我帮不上忙 - 我知道已经一年了！

编辑：我找到了解决我们问题的方法：我希望这可以帮助其他任何人及时使用 C4Droid - 很棒的应用程序！

[https://stackoverflow.com/questions/17385047/android-to-ubuntu-tcip-ip-in-c-compiled-with-c4droid-bionic-libc-a-general](https://stackoverflow.com/questions/17385047/android-to-ubuntu-tcip-ip-in-c-compiled-with-c4droid-bionic-libc-a-general)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T16:42:23.783

是的，我知道线程很旧，但无论如何：另一个更简单的解决方案是按住“编译”按钮并使用“编译多个源代码文件（简单）”选项添加所有源文件。它将以具有 main 定义的文件为基础。

# jquery - Div 水平中心 NO 绝对

> ID：11085236
> 
> 赞同：1
> 
> 时间：2012-06-18T14:43:34.493
> 
> 标签：jquery, html, css

我有一个小问题。

我在其他 div 内有一些图像元素的容器 div。就像是：

```
<div id="container">
    <div id="draggable">
        <img src="something">
    </div>
</div> 
```

我需要将容器垂直居中，但我不能使用顶部：-healfHeight; 最高保证金：50%；因为那时 jquery ui 拖动将不起作用。那么关于我该如何解决这个问题的任何其他想法？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:49:55.853

尝试将父容器设置为`position: relative`，并将要居中的元素设置为`margin: auto`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:49:50.623

```
var wh = $(window).height();
var ch = $('#container').height();
var mt = (wh - ch) / 2;
$('#container').css('margin-top', mt) 
```

[http://jsfiddle.net/zJrKh/1/](http://jsfiddle.net/zJrKh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:50:37.600

我不确定 jquery 定位是如何工作的，但是如果您的答案仅涉及使用 CSS 在这些 div 上的位置，那么：

使容器 div 位置：绝对；最高：50%；左：50%；

那么你的“可拖动” div 需要这个定位： position:relative; top:(-div 总高度的一半); left:(-div 宽度的一半);

例如，如果您的可拖动 div 为 100 像素 x 100 像素，那么顶部将为 -50 像素，左侧为 -50 像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:54:09.483

```
<div id="container">
    <div id="draggable">
        <img src="something">
    </div>
</div> 
```

确保父宽度比可拖动元素宽，然后尝试：

```
#draggable{display:block;margin:0 auto} 
```

编辑，对不起，刚刚意识到你需要它垂直居中。

尝试：

```
#container{display:table-cell}
#draggable{vertical-align:middle} 
```

# oracle - Oracle PL/SQL OOP，获取实例化的类名

> ID：11085238
> 
> 赞同：1
> 
> 时间：2012-06-18T14:43:43.640
> 
> 标签：oracle, oop, plsql

如果我有 foo 类型的子类 bar，那么 foo 中的方法如何查看它何时实际从 bar 的实例化运行。例子：

```
CREATE OR REPLACE
TYPE foo AS OBJECT 
(
  mxyzptlk NUMBER, -- Because PL/SQL demands you have an attribute defined.
  MEMBER FUNCTION get_actual_class_name
    RETURN VARCHAR2
) NOT FINAL;
/

CREATE OR REPLACE
TYPE bar UNDER foo
(
) NOT FINAL;
/

DECLARE
  baz bar;
BEGIN
  DBMS_OUTPUT.PUT_LINE(baz.get_actual_class_name); -- I would hope to get 'bar' back.
END;
/ 
```

在 PL/SQL OOP 中是否可以进行自省？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:32:17.780

由于 Oracle 如何处理继承，因此找出超级类型并不容易，正如@Bob Jarvis 所提到的，您应该真正考虑将其恢复的时间和性能损失。

就 Oracle 而言，您正在调用 foo.get_actual_class_name，可以在此处找到更多信息：http: [//docs.oracle.com/cd/B14117_01/appdev.101/b10807/08_subs.htm#sthref1046](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/08_subs.htm#sthref1046)

使用 DBMS_UTILITY.FORMAT_CALL_STACK 我们可以找出调用过程和行。从那里你有很多解析来获取变量名并解析它声明的位置以找到实际类型。

如何使用 FORMAT_CALL_STACK 获取调用过程名称和行号的示例在这里[http://www.oracle-developer.net/content/utilities/stk.sql](http://www.oracle-developer.net/content/utilities/stk.sql)

# php - PHP mySQL 404 函数

> ID：11085242
> 
> 赞同：-1
> 
> 时间：2012-06-18T14:43:46.383
> 
> 标签：php, mysql

以下函数旨在检查此表中的该行是否存在。我知道它还没有无论我`$row`还是！`$row`if 函数它什么也不做。

```
function four_zero_four($name){
    $four_zero_four = mysql_query("SELECT * FROM pages WHERE name = '$name'"); 

    while($row = mysql_fetch_array($four_zero_four)) { 
      echo 'no'; die(); 
    }
}; 
```

`$name`是该行中的名称字段，并且在其他功能中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:50:45.040

检查行是否存在的另一种方法是使用 mysql_result 函数和`COUNT`函数，如下所示：

```
$query = mysql_query("SELECT COUNT(1) FROM `table` WHERE `field` = 'something'");
$result = mysql_result($query, 0); 
```

现在打印出`$result`变量时，您将看到查询实际返回的行数。这通常比使用`mysql_num_rows`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:49:09.310

我不确定我是否理解逻辑，您不是在打印“否”吗？die() 当找到一行时，而不是现在找到行时？无论哪种方式，这都是我要检查的方式：

```
function four_zero_four($name){
    $four_zero_four = mysql_query("SELECT * FROM pages WHERE name = '$name'"); 

    if (mysql_num_rows($four_zero_four) == 0) {
        // ROW DOES NOT EXIST
    } else {
        // ROW EXISTS
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:49:20.937

您的代码不起作用，因为如果您的查询没有返回任何行，它甚至不会被执行。

改用`mysql_num_rows()`：

```
$count = mysql_num_rows($four_zero_four);

if($count <= 0){
    die("no rows in this table!");
} 
```

此外，您可能应该考虑使用 MYSQLi 命令而不是旧的`mysql_query()`实现和`SELECT *`，因为它们已被弃用。

# javascript - 如何在点击或嵌入fancybox时更改音频

> ID：11085243
> 
> 赞同：0
> 
> 时间：2012-06-18T14:43:48.973
> 
> 标签：javascript, html, flash, audio, fancybox

我正在尝试将音频包含在一个花式框中，这样当您单击图像时，它也会播放弹出的音频。但是，我不想下载外部音频播放器，而是使用网页上当前包含的播放器。基本上我只是想通过加载另一个 MP3 来更改当前正在播放的音频。

这是网页上音频播放器的代码：

```
<div id="audioPlayerContainer" title="Audio Player">

<object type="application/x-shockwave-flash" data="../flash/player_mp3_maxi.swf" width="140" height="20">
<param name="wmode" value="transparent">
<param name="movie" value="../flash/player_mp3_maxi.swf">
<param name="FlashVars" value="configxml=../flash/config.xml&amp;mp3=../audio/intro/intro_08_background_07.mp3">
<p>Flash Audio Player</p>
</object>

</div> 
```

单击以下链接后，如何更改播放的音频？

```
 <li style="float:left"><a href="../images/intro_characters_Raj.png" title="Raj Sharma" width="500"><img alt="Raj Sharma" src="../images/intro_characters_Raj.png" /></a></li> 
```

这个链接附有一个fancybox脚本，如下所示：

```
<script type="text/javascript">

    $(document).ready(function(){

        $("#clientPic li a").fancybox();
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:30:47.990

这是一个基于您的代码片段的工作示例，请检查这是否适合您的需求。

**HTML**：

```
<script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
<link rel="stylesheet" type="text/css" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />

<ul style="text-align: center; margin-top: 20px;">
    <li><a class="fancybox" href="#inline1" title="Now Playing: Sample 1">Launch Sample 1</a></li>
    <li><a class="fancybox" href="#inline2" title="Now Playing: Sample 2">Launch Sample 2</a></li>
    <li><a class="fancybox" href="#inline3" title="Now Playing: Sample 3">Launch Sample 3</a></li>
</ul>

<div id="inline1" style="width: auto; display: none;" >
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width=200 height=20>
    <param name="movie" value="http://96.245.187.180:80/player_mp3_maxi.swf" />
    <param name="FlashVars" value="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" />
    <param name="quality" value="best" />
    <embed src="http://96.245.187.180:80/player_mp3_maxi.swf" flashvars="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" width=200 height=20 quality=best type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
    <p>Sample 1</p>
    </object>
</div>

<div id="inline2" style="width: auto; display: none;" >
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width=200 height=20>
    <param name="movie" value="http://96.245.187.180:80/player_mp3_maxi.swf" />
    <param name="FlashVars" value="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" />
    <param name="quality" value="best" />
    <embed src="http://96.245.187.180:80/player_mp3_maxi.swf" flashvars="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" width=200 height=20 quality=best type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
    </object>
    <p>Sample 2</p>
</div>

<div id="inline3" style="width: auto; display: none;" >
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width=200 height=20>
    <param name="movie" value="http://96.245.187.180:80/player_mp3_maxi.swf" />
    <param name="FlashVars" value="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" />
    <param name="quality" value="best" />
    <embed src="http://96.245.187.180:80/player_mp3_maxi.swf" flashvars="mp3=broadwavelow.mp3?src=fBroadWave Recording Example" width=200 height=20 quality=best type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />
    <p>Sample 3</p>
    </object>
</div> 
```

**JS**：

```
$(document).ready(function() {
    $('.fancybox').fancybox();
}); 
```

所以基本上有3个隐藏的div，每个都有对应的播放器和.mp3。相应的 div 被加载到 fancybox 中（参见 href 中的值）。​</p>

检查此链接以查看实际代码：http: [//jsfiddle.net/hNLdk/](http://jsfiddle.net/hNLdk/)祝你好运。

# mongodb - 如何为本地子网中的 pc 设置 mongo mms？

> ID：11085245
> 
> 赞同：0
> 
> 时间：2012-06-18T14:44:02.500
> 
> 标签：mongodb

我在内部子网中有一台 ubuntu pc，我在它们上运行 mongo。这台机器无法从我的公司网络外部访问。我已经看到了[http://www.10gen.com/mongodb-monitoring-service](http://www.10gen.com/mongodb-monitoring-service)，它允许我监控 mongo 设置。但是我应该将哪个 ip 添加到这个云服务中？

是否有一些安装文件要安装在我的电脑上，以允许我监控 mongo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:59:19.763

彩信监听代理会尝试联系互联网上的彩信服务器，并会定期推送信息，因此无需打开监听端口。

出站连接[将尝试寻址端口 443](https://mms.10gen.com/help/install.html#install-the-mms-agent) (HTTPS)，因此出站连接应在除最严格的设置之外的所有设置中默认工作。

MMS 代理是用 python 编写的，需要一些特定于 python 的设置，但您可以[按照手册中的安装程序步骤](https://mms.10gen.com/help/install.html)进行操作。

# c - 用C从HTML文档中提取信息

> ID：11085253
> 
> 赞同：2
> 
> 时间：2012-06-18T14:44:53.687
> 
> 标签：c, html-parsing

在我学习 C（纯 C，不是 C#，也不是 C++。我有我的理由。）的过程中，我遇到了需要从 HTML 文档中提取一些信息，从 URL 中获取。即，我希望链接中的所有 href 属性都位于页面上某个无序列表中的字符串数组中。这些 URL 指向我要下载并存储在 zip 文件中的图像。

现在，我问了几个我认识的擅长 C 的人，他们要么告诉我“C 是错误的工具”，要么指点我 libXML，它显然以稀缺的文档而闻名。我还查看了 libsoup 和 libtidy，但我似乎无法将这些部分拼接在一起。

我应该选择什么方法/库？有谁知道我可以看的一些示例代码？

编辑：看到一半的评论告诉我使用 C 以外的东西，我会补充说我不是在寻找“适合工作的工具”。如果我只是想尽快完成它，我可能会使用 Ruby，只是因为我对它感到满意。这是我学习 C 的一部分，因此，我正在寻找一个纯 C 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:07:17.163

由于您正在寻求学习 C，那么我将使用标准库和 .

[http://www.cplusplus.com/reference/clibrary/cstdio/](http://www.cplusplus.com/reference/clibrary/cstdio/) http://www.cplusplus.com/reference/clibrary/cstring/

最简单的方法是使用其他东西来获取页面，将其写入本地文件，然后将文件名传递给您的程序。将输出打印到 STDOUT。

# windows-phone-7 - 如何隐藏系统托盘

> ID：11085254
> 
> 赞同：2
> 
> 时间：2012-06-18T14:44:56.587
> 
> 标签：windows-phone-7, hide, opacity, system-tray

我在使用 SystemTray 时遇到问题。

我的应用程序有全景和枢轴屏幕。所以我希望在两个屏幕上都使 SystemTray 不可见。

我的代码是：

```
<phone:PhoneApplicationPage shell:SystemTray.IsVisible="False" 
```

头痛主要是因为在收到手势（如轻弹或任何其他动作）后托盘重新出现

我还进行了以下更改：

```
shell:SystemTray.Opacity="0"
shell:SystemTray.ForegroundColor="Transparent"
shell:SystemTray.IsVisible="True" 
```

情况变得更糟了。尽管将托盘设置为透明，但托盘变得可见并带有白色。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:38:54.323

尝试在使用后面的代码中设置可见性

```
 SystemTray.IsVisible = false; 
```

如果它不起作用，请在页面的构造函数或 OnNavigatedTo 函数中尝试以下代码行

```
 SystemTray.SetForegroundColor(this, (Color)App.Current.Resources["PhoneBackgroundColor"]); 
```

(Color)App.Current.Resources["PhoneBackgroundColor"] 将前景色设置为背景色，使其具有透明效果。

**只有在您没有手动添加任何自定义背景时才有效。

让我知道它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T00:08:33.077

尝试`shell:SystemTray.IsVisible="False"`从您的 xaml 页面顶部删除。那就试试吧。
如果这不起作用，则使用主页加载事件后面的代码，例如`SystemTray.IsVisible = false;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T16:10:08.280

[SystemTray 的可见性需要在每个MSDN](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.systemtray.aspx)后面的代码中以这种方式设置。

```
SystemTray.SetIsVisible(this, false); 
```

或者，如果您只是想模拟相同的“不可见”效果，请将不透明度设置为 0 以隐藏大部分条，将前景色设置为透明以隐藏时间。需要注意的是，您的其余控件仍会知道它在那里，因此您需要将页面上至少第一个控件的上边距向上调整 32 像素（即 Margin="0,-32, 0,0) 以完成与在 XAML 中将其设置为 false 完全相同的效果。

```
SystemTray.SetOpacity(this, 0);
SystemTray.SetForegroundColor(this, Color.FromArgb(0, 0, 0, 0)); 
```

# java - 为我的使用 arraylist.contains 的算法找到 Big oh 符号

> ID：11085259
> 
> 赞同：1
> 
> 时间：2012-06-18T14:45:09.507
> 
> 标签：java, arraylist

我正在学习大哦符号。对于下面的代码，我有一个计算字数的程序，跳过分隔符。对于此算法，for 循环将针对句子的长度，然后包含迭代到字符串的内容。所以根据我的说法，这个算法的大符号是 O(n^3)。这是正确的还是我错过了一些关于大哦符号的东西？

```
public class wordCount {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    String sentence = "How are you,zak;far: mon. day ?:";
    int count = 1;
    ArrayList<Character> delim = new ArrayList<Character>();
    delim.add(' ');
    delim.add(',');
    delim.add('.');
    delim.add(':');
    delim.add(';');
    delim.add('"');
    delim.add('\'');
    for (int i = 0; i != sentence.length() - 1; i++) {
        if (delim.contains(sentence.charAt(i))) {
            if (!delim.contains(sentence.charAt(i + 1))) {
                count++;
            }
        }
    }
    System.out.println("The count is: " + count);
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:48:23.433

不，您不太正确-您假设 O(n)`contains`的“n”与您感兴趣的“n”相同。不是-它是数组列表的长度. 在这种情况下，这是分隔符的数量，而不是句子的长度。

所以你的算法实际上是 O(N * M) 其中 N 是句子长度，M 是分隔符的数量。如果您仅将句子作为输入，将分隔符集视为常量，则整个算法为 O(N)。

即使您`contains`第二次有条件地调用，每次迭代的调用总数`contains`也只有 1 或 2 - 它不能增长到（比如说）定界符的数量或句子的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:47:59.157

没那么简单。假设我们称字符串的长度为 N，长度为`delim`M。

对于字符串中的每个字符，您调用`delim.contains(...)`一次或两次（即 O(M)），因此最终复杂度应为 O(N x M)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:49:06.160

由于这感觉非常像家庭作业（如果是，请添加`homework`标签），我将提供一些观察而不是解决方案：

您在这里有两个不同的“N”，其中的长度`sentence`和项目数`delim`。这些数字可能大不相同。

你需要了解的大哦性能`ArrayList<T>.Contains`。你知道那是什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:55:24.350

您必须考虑循环内有多少个循环（以及这些循环走多远）

彼此内部的循环不超过两个，而不是三个。

```
for (int i = 0; i < sentence.length()-1; i++) { // loop level 1
    boolean isDelim = delim.contains(sentence.charAt(i));  // loop level 2
    if (!isDelim) continue;

    if (!delim.contains(sentence.charAt(i + 1)))  // loop level 2
        count++;
} 
```

# android - 将静态 HTML 加载到 Webview

> ID：11085271
> 
> 赞同：1
> 
> 时间：2012-06-18T14:45:45.327
> 
> 标签：android, html, xhtml, webview

我正在尝试将静态 HTML 页面加载到 webview 中。

当我将其内容更改为一个简单的 html 页面时，它可以工作。所以我认为这个 html 文件有问题，但是在 Mozilla 和 Chrome 上可以正确查看该文件。所以我的问题是

*   android webview 没有通过的常见 html 错误。
*   如果 html 文件有问题，那是什么问题。

html 文件 [http://snipt.org/vagL9](http://snipt.org/vagL9)

截屏

![模拟器截图](../Images/ea2ee7b6f82099b4a355d683b1ef3e11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:56:21.423

我已将提供的 html 文件放置到带有 name 的 assets 文件夹中`snipt.html`。并且此代码正确显示它。

```
final WebView webView = (WebView) findViewById(R.id.webview);
final WebSettings webSettings = webView.getSettings();
webSettings.setJavaScriptEnabled(true);
webView.loadUrl("file:///android_asset/snipt.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:54:38.743

这是一个 SDK 错误 loadData(String, ..., ...) 方法将字符串的内容转换为 uri，因此我的代码包含需要编码的字符，例如 % 它截断了导致错误的代码。所以在这里找到的解决方案是将这些字符转换为 unicode 作为此代码

```
public final static void webViewLoadData(WebView web, String html) {
  StringBuilder buf = new StringBuilder(html.length());
  for (char c : html.toCharArray()) {
    switch (c) {
      case '#':  buf.append("%23"); break;
      case '%':  buf.append("%25"); break;
      case '\'': buf.append("%27"); break;
      case '?':  buf.append("%3f"); break;                
      default:
        buf.append(c); break;
      }
  }
  web.loadData(buf.toString(), "text/html", "utf-8");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:41:03.473

我面临着同样的问题。

通过应用下面的代码解决了这个问题

```
WebView webView = (WebView) findViewById(R.id.webView1);

HttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(location);
HttpResponse response = httpClient.execute(httpGet);
String data = new BasicResponseHandler().handleResponse(response);
String base64 = android.util.Base64.encodeToString(data.getBytes("UTF-8"), android.util.Base64.DEFAULT);
webView.loadData(base64, "text/html; charset=utf-8", "base64"); 
```

这将解决从 android 1.5+ 开始的 webview 渲染中的所有问题

一定会为你工作！

# regex - 提取多线模式 SED 或 AWK

> ID：11085272
> 
> 赞同：1
> 
> 时间：2012-06-18T14:45:54.950
> 
> 标签：regex, sed, awk, grep, pcre

希望 sed 或 awk 大师可以帮助我。我需要匹配一个多行模式，其中模式范围可以跨越一到三行。我无法使用 pcregrep 得出结果！我想实现的模式有点像这样=>

```
\s*\w+\s\w+\([A-Za-z,]*\)\s*\;\{ 
```

问题是在单词或分号之后，模式的以下部分可以或不能出现在下一行中，并且模式也可以出现在一行中，具体取决于文件。

提前感谢您的回复。我已经卡在这一步将近一个星期了！任何形式的建议表示赞赏:)

> 例如：苹果橙（李子）；猕猴桃 {
> 
> 或者
> 
> 苹果橙（李子）；
> 
> 猕猴桃
> 
> {

匹配两个表达式的表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:46:06.280

`\s*(\w+)\s+(\w+?)\((\w+)\);\s*(\w+)\s*{`

你的非常接近。确保在使用正则表达式时设置`MULTILINE`标志以确保它匹配多行。这将匹配字符串中的所有四个单词。按照你的例子，

第一组：`apple`

第 2 组：`orange`

第 3 组：`plum`

第 4 组：`kiwi`

[你可以在这里玩正则表达式](http://regexr.com?319mt)。

# bing-maps - 在 ios 的 Bing 地图上放置叠加层

> ID：11085278
> 
> 赞同：1
> 
> 时间：2012-06-18T14:46:17.130
> 
> 标签：bing-maps, overlays

我需要在 iOS 中的 Bing 地图上放置叠加层，我对 Bing Maps API 和 xcode 还是很陌生，所以非常感谢一些示例代码。

如何在 iOS 的 Bing 地图上放置叠加层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T22:44:21.003

使用适用于 iOS 的 Bing Maps V7 AJAX 控件。旧的 Bing Maps iOS 控件已弃用，只能在地图上放置图钉。AJAX 控件具有 Bing 地图的所有功能，并且在 iOS 上运行良好。

# java - Java 中的 Try/do 模式实现

> ID：11085281
> 
> 赞同：7
> 
> 时间：2012-06-18T14:46:28.553
> 
> 标签：java, java-me, design-patterns

我是 try/do（或 trier/doer）模式的粉丝，这种模式最好在 C# 中使用`out`参数实现，例如：

```
DateTime date;
if (DateTime.TryParse("2012-06-18", out date))
{
    //Do something with date
} 
```

我目前正在开发一个 Java 1.5 项目，为此我正在使用一个名为 TryResult 的新类来实现 try/do 模式，该类是从任何实现 try/do 模式的方法返回的：

```
public class TryResult<ResultType> {

    private boolean mSuccess = false;
    private ResultType mResult = null;

    public TryResult(boolean success, ResultType result) {
        super();
        this.mSuccess = success;
        this.mResult = result;
    }

    public boolean isSuccess() {
        return mSuccess;
    }

    public ResultType getResult() {
        return mResult;
    }

} 
```

这工作得很好，但我将把这段代码移植到使用 J2ME 的不同平台，因此泛型不可用。

我目前的选择是从`TryResult`上面的类中删除泛型并使用普通的旧`Object`类型和强制转换，或者为我最终将使用的类型创建一个新类（例如`StringTryResult`）。

有没有更好的方法在 J2ME/Java 1.3 上实现这种模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:38:20.690

您尝试实现的在函数式语言中称为[Maybe monad 。](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29#The_Maybe_monad)

在 java 中有一些实验可以做到这一点，请参见[此处](http://logicaltypes.blogspot.hu/2011/09/monads-in-java.html)和[此处](http://www.irekjozwiak.com/entry/2009/06/13/Monads-for-Java-C---programmers.html)。

问题是，不幸的是，Java 的类型系统还不够先进，无法大规模支持它。此外，标准库不支持类似的东西，这减少了仅在您自己的代码中使用这种构造:(

有关支持此功能的语言，请参阅[Scala](http://www.scala-lang.org/)和[Clojure](http://clojure.org/)。

就 Java ME 而言，我会为此而三思而后行地实现特殊类型。这是一个很好的思想理论，但是，它会使事情变得更加困难，例如。复制整个应用程序中的所有类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:34:31.137

我不支持任何方式，但是`out`在 Java 中执行“”变量的一种非常低技术的方法是使用单元素数组：

```
String input = ...;
Date[] date = { null };
if (DateParser.tryParse(input, date)) {
  System.out.println(date[0]);
} 
```

# c++ - 使用锁和 STL 算法对 c++ 向量进行排序，还是编写更复杂的无锁算法？

> ID：11085282
> 
> 赞同：0
> 
> 时间：2012-06-18T14:46:29.467
> 
> 标签：c++, sorting, vector, locking

有没有一种有效的方法来比较两个执行 STL 类型操作的向量，这样我就不必对它们进行排序或复制它们？问题是排序导致我必须在 getIntersection 方法上创建一个锁，理想情况下我想避免这种情况，因为它实际上只是读取数据结构并在其中查找数据而不是更改它。sort 方法改变了数据结构，因此该方法的其他调用需要同步。我可能只需要创建一个副本，但这可能是一个大副本，但可能比锁定更快，但不确定。因此我的问题变成了搜索排序的向量是否比仅仅获取锁或副本的价格更有效。考虑以下示例：

```
class X
{

  public:

  struct TestX
  {
     long id;
     .......... // other items
  };

   void getIntersectionByID ( vector<TextX>& result, const vector<TestX>& ids)
   {
      return getItemsByIntersection<long,TestX>( result, _v1, ids, &TestX::id);
      return false; 
   }

   private:
    vector<TestX> _v1;  // assume this is populated with data
};

  // generic pred to do weak ordering on a structure by a generic field
// this is a generalized less than function which can be used for ordering
// and other equality operations
template<typename T, typename K>
struct byField
{
  public:
  byField(T K::* idMember) : idMember_(idMember) {}    

  bool operator() (const K& obj1, const K& obj2)
  {
    return ( obj1.*idMember_ < obj2.*idMember_ );
  }

  private:
  T K::* idMember_;     
};

    template <typename T, typename K>
bool getItemsByIntersection ( std::vector<K>& retds, std::vector<K>& ds, const std::vector<T>& values, T K::* field  )
{
  //create the vector of structs to use for comparison
  typename std::vector<K> searchCriteria(values.size());
  typename std::vector<K>::iterator itS =  searchCriteria.begin();

  // assign the item to the vector
  for (typename std::vector<T>::const_iterator it = values.begin(), itEnd = values.end(); it != itEnd; ++it,++itS)
  {
    (*itS).*field = *it;
  }

  // reserve half the size of the total ds just to be safe
  typename std::vector<K> tmp;
  tmp.reserve(ds.size()/2);

  sort( ds.begin(), ds.end(), byField<T,K>(field) );
  sort( searchCriteria.begin(), searchCriteria.end(), byField<T,K>(field) );

  setGrep ( ds.begin(), ds.end(), searchCriteria.begin(), searchCriteria.end(), std::back_inserter(tmp), byField<T,K>(field) );

 // don't change state until the very end, any existing contents in retds are destroyed
  retds.swap(tmp);

  if ( !retds.empty() )
  {
    return true;
  }

  return false;
}

    /  this is a set grep meaning any items that are in set one
    // will be pulled out if they match anything in set 2 based on operator pred 
    template<typename _InputIterator1, typename _InputIterator2,
      typename _OutputIterator, typename _Compare>
      _OutputIterator
    setGrep(_InputIterator1 __first1, _InputIterator1 __last1,
        _InputIterator2 __first2, _InputIterator2 __last2,
        _OutputIterator __result, _Compare __comp)
    {
      while (__first1 != __last1 && __first2 != __last2)
        if (__comp(*__first1, *__first2))
          ++__first1;
        else if (__comp(*__first2, *__first1))
          ++__first2;
        else
        {
          *__result = *__first1;
          ++__first1;
          ++__result;
        } 
      return __result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:51:32.947

如果你有小向量，你可以写一些可以解决问题的东西，但如果向量没有排序，就无法避免`n*n`比较。假设您在两个向量中都有 1,000,000 个元素，即 1,000,000,000,000 次比较操作。

如果您只需要相等/不相等，则可以复制两者，对副本进行排序，比较它们并销毁副本...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:59:18.127

你可以复印。以明显的方式复制为向量然后排序，或者如果向量可能包含很多欺骗：

```
std::set<T,pred> s1(v1.begin(), v1.end());
std::set<T,pred> s2(v2.begin(), v2.end());
std::set_intersection(s1.begin(), s1.end(), s2.begin(), s2.end(), std::back_inserter(tmp), pred()); 
```

相反，使用它可能会更快`unordered_set`，而且内存也更少，因为您只需要其中一个集合的“副本”。但是，您必须编写一个哈希函数，这可能并不容易，具体取决于您的谓词做什么。您还必须编写交集代码，但这很简单。

`v1`其他可能的选择：填充完成后立即排序；使用`X`a`set`而不是 a `vector`; 提供标准作为 a`set`而不是 a `vector`。它们是否适用取决于`X`和/或调用者是否可以看到`pred`. 和上面一样，如果你可以写一个哈希，那么你可以`set`用`unordered_set`.

# windows - 更改子进程的控制台颜色

> ID：11085284
> 
> 赞同：0
> 
> 时间：2012-06-18T14:46:37.033
> 
> 标签：windows, winapi, console-application

我正在创建一个调用控制台应用程序的新进程。我想更改此子进程控制台窗口的颜色。

原因是我无法重定向控制台的标准输出，因为应用程序操纵了控制台光标。相反，我剥离了控制台框架，剪裁了我想要的信息并将控制台嵌入到我的应用程序中。我只是想改变颜色，让它更适合。

我知道该`SetConsoleTextAttribute`功能，但我不知道如何获取子进程的标准输出句柄以使用它。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:37:41.867

DuplicateHandle 的文档说：

> 控制台句柄可以复制，仅在同一进程中使用

（它们不是真正的句柄）所以即使你可以将代码注入孩子，你也不能走这条路。

我假设父应用程序还没有控制台（每个进程只能有一个控制台而不做可怕的黑客攻击），如果是这种情况，你应该能够使用[`AllocConsole()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx), `GetStdHandle()`, `SetConsoleTextAttribute()`,`CreateProcess()`最后`FreeConsole()`（你不需要 FreeConsole如果您当时只运行一个子进程）

另一种选择是使用 cmd.exe：（`cmd.exe /T:?? /C childapplication.exe`将 ?? 替换为您`color /?`在 cmd 中运行时找到的颜色值）

# mysql - 将 pChart 图像保存到 mysql

> ID：11085286
> 
> 赞同：0
> 
> 时间：2012-06-18T14:46:42.370
> 
> 标签：mysql, png, pchart

我需要将 pchart 创建的 png 保存到我的 mysql 数据库中。

是否有一个函数可以检索创建的 png 的二进制数据？

这是我试图添加到 pChart 库的内容，但它只返回一个。

```
 function getPicture()
{
    return $this->Picture;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:32:08.203

大多数情况下，pChart 库将链接到数据库以检索动态数据。请查看本[教程](http://pchart.sourceforge.net/documentation.php?topic=faq.mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T13:50:57.167

这不是很困难，这是在堆栈溢出时被询问和回答的：

[如何使用 PHP 从 MySQL 数据库中存储和检索图像？](https://stackoverflow.com/questions/1636877/how-can-i-store-and-retrieve-images-from-a-mysql-database-using-php)

# r - R - 散点图，如何将不同线上的点绘制为重叠？

> ID：11085288
> 
> 赞同：0
> 
> 时间：2012-06-18T14:46:45.230
> 
> 标签：r

我想绘制几个点列表，每个列表都有距离（十进制）和error_no（1-8）。到目前为止，我正在使用以下内容：

```
plot(b1$dist1, b1$e1, col="blue",type="p", pch=20, cex=.5)
points(b1$dist2, b1$e2, col="blue", pch=22) 
```

将它们都添加到同一个情节中。（稍后我将添加图例等）。

我遇到的问题是点重叠，即使更改用于绘图的字符，它也会覆盖以前的点。由于我计划绘制的不仅仅是 2，这将是一个大问题。

我找到了一些方法：

[http://www.rensenieuwenhuis.nl/r-sessions-13-overlapping-data-points/](http://www.rensenieuwenhuis.nl/r-sessions-13-overlapping-data-points/)

但我宁愿做一些沿着 y 轴间隔点的事情，一种方法是添加 0.1，然后添加 0.2，依此类推，但我想知道是否有任何包可以为我做这件事。

干杯 M ps：如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:52:08.130

如您发布的链接的第一点所述，`jitter`将稍微移动您的所有点。如果您只想移动 y 轴上的点：

```
plot(b1$dist1, b1$e1, col="blue",type="p", pch=20, cex=.5)
points(b1$dist2, jitter(b1$e2), col="blue", pch=22) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:05:39.440

很大程度上取决于您希望向图表的读者传达什么信息。一个常见的解决方案是使用 R 颜色规范的透明度质量。例如，不要将颜色称为“蓝色”，而是将颜色设置为`#0000FF44` （抱歉，如果我只是将其设置为红色或绿色）最后两个字节定义透明度，从 00 到 FF，因此重叠数据点看起来比独立点更暗.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:49:58.100

查看包中的`spread.labs`函数`TeachingDemos`，尤其是示例。您可能可以使用该函数来创建绘图（示例处理标签，但也可以很容易地应用于点本身）。关键是您需要根据组合数据找到新位置，然后进行绘图。如果按原样执行的功能不能满足您的要求，您仍然可以查看代码并使用这些想法来展开您的观点。

另一种方法是重组您的数据并使用`ggplot2`带有“躲避”的包。其他方法而不是`points`多次使用将是`matplot`函数，使用`col`参数来绘制向量`lattice`或`ggplot2`绘图。您可能需要为其中任何一个重构数据。

# msbuild - msbuild & wix - 多个安装程序？

> ID：11085292
> 
> 赞同：2
> 
> 时间：2012-06-18T14:46:48.360
> 
> 标签：msbuild, wix

我正在使用具有多种产品的应用程序框架。它有一个安装程序，插件根据构建服务器配置包含/排除。

我想更改我的构建过程，以便从单个构建生成多个 msi 文件（每个产品一个，基于框架）。那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:52:42.950

我正在努力解决同样的问题。

我有来自 1 个 wxs 文件的 2 个不同的构建，以及来自 1 个构建的 4 个配置。例如 build=server\client,conf=debug\release,platf=x86\x64。

**我的问题：**用构建变量编号的项目解决方案（在我的情况下，有 2 个项目，分别用于服务器和客户端）。每个项目都需要基于一个 wxs 文件，并且构建属性需要不同。我在配置和平台上使用了标准环境变量，并使用了我自己的变量 Build。我已经这样做了。如果你需要更多的建筑，创建更多的项目，使用更多的变量......

**PS**如果你找到更好的方法，请联系我。

# c# - MVC模型的实时验证

> ID：11085295
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:06.763
> 
> 标签：c#, asp.net-mvc, knockout.js

我正在尝试做类似“CheckList”的事情，例如，当输入所有必填字段并且其他字段验证已通过时，它会实时更新。是否可以使用 Knockout.Js 实现这一目标？主要问题实际上是您是否可以在客户端脚本中检查 MVC *ModelState*及其错误集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:56:08.377

您可以像这样检查表单验证，

```
 if ($("#your_form_id").valid()){
      // if it is valid continue ;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:58:27.383

我建议您查看 Knockout Validation 插件：

[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)

我意识到您正在尝试进行服务器端验证，但唯一的方法是向服务器发出 ajax 请求 - 每次值更改时都必须发送请求。在客户端上进行一些验证可能是一种更好的方法，并且该插件肯定会有所帮助

# memory-management - UnicodeString 存储类型

> ID：11085296
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:26.993
> 
> 标签：memory-management, unicode-string, c++builder-xe

我的应用程序需要管理一些 unicode 字符串 (<10)。这些字符串的内容是动态的，可以通过应用程序运行而改变。为了存储字符串，我使用了 UnicodeString 类型的对象。

解决此问题的一种方法是创建与 unicode 字符串一样多的成员变量，例如：

```
UnicodeString str1;

UnicodeString str2;

...

UnicodeString strN; 
```

至少乍一看，这个解决方案非常简单。但是可扩展性存在问题。如果将来字符串的数量会增加，我们就有可能创建难以阅读的大代码。所以我想创建这样的东西来管理字符串：

```
std::map<HWND, UnicodeString> file_names;    ///< member variable of form TForm1 
```

每个字符串都与某个编辑框相连。我可以使用窗口句柄作为字典的键。

我不明白 - 在这种情况下，谁应该负责分配和释放存储 unicode 字符串的空间？假设我在本地堆栈上创建 UnicodeString 变量：

```
void TForm1::ProcessFile(TEdit *edit_box)
{
    UnicodeString str = "C:\\Temp\\ws.gdb";

    file_name[edit_box->Handle] = str;
} 
```

*str*变量的内容会在成员函数*ProcessFile*的末尾保留吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:34:49.403

a 的内存存储`UnicodeString`由 RTL 为您进行引用计数和管理。您不必担心自己释放它，除非您`UnicodeString`使用运算符分配它本身`new`。在您的代码片段中，该`str`变量将在`ProcessFile()`退出时被释放，但它的内容将继续存在，因为它`file_name`仍然具有对其的活动引用。

不要使用 an`HWND`作为`std::map`. 由该`TWinControl::Handle`属性管理的窗口是动态的，并且可以在应用程序的生命周期内更改值。但是，您可以改用`TEdit*`指针：

```
std::map<TEdit*, UnicodeString> file_names;

void TForm1::ProcessFile(TEdit *edit_box)
{
    UnicodeString str = "C:\\Temp\\ws.gdb";
    file_names[edit_box] = str;
} 
```

# fluent-nhibernate - FluentNHibernate 和自定义 TableNameConvention

> ID：11085297
> 
> 赞同：1
> 
> 时间：2012-06-18T14:47:31.743
> 
> 标签：fluent-nhibernate

**FluentNHibernate 版本 1.3.0.727**

我有以下自定义 TableNameConvention：

```
public class TableNameConvention : IClassConvention, IClassConventionAcceptance
{
    public void Accept(IAcceptanceCriteria<IClassInspector> criteria)
    {
        criteria.Expect(x => x.TableName, Is.Not.Set);
    }

    public void Apply(IClassInstance instance)
    {
        instance.Table(instance.EntityType.Name + "s");
    }
} 
```

我有以下实体映射：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.Email).Not.Nullable().Length(200);
        Map(x => x.FirstName).Length(100);
        Map(x => x.LastName).Length(100);
        Map(x => x.Password).Not.Nullable().Length(30);
    }
} 
```

我正在生成这样的数据库：

```
var configuration = Fluently.Configure()
    .Mappings(m => m.FluentMappings
        .AddFromAssemblyOf<IEntity>()
                              .Conventions.Add<TableNameConvention>())
        .BuildConfiguration();

var schema = new SchemaExport(configuration);
schema.Drop(false, true);
schema.Create(false, true); 
```

然后生成数据库用户实体表仍然生成为用户，但不是我想要的用户。它接缝接受方法失败。这是 FluentNHibernate 错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:55:04.937

删除此代码

```
public void Accept(IAcceptanceCriteria<IClassInspector> criteria)
{
    criteria.Expect(x => x.TableName, Is.Not.Set);
} 
```

因为它不是必需的，甚至可能不是您想要的。FNH 在内部为每个属性提供三个值（例如表名）

1.  在类图中显式设置的值
2.  按惯例设定的值
3.  默认值

它使用它按此顺序找到的内容`valueInEffect = explicitValue ?? conventionValue ?? defaultValue`

# php - PHP 会话适用于所有子域

> ID：11085299
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:44.540
> 
> 标签：php, session, cookies, subdomain

> **可能重复：**
> [允许 php 会话转移到子域](https://stackoverflow.com/questions/644920/allow-php-sessions-to-carry-over-to-subdomains)

如何设置用户 php`$_SESSION`在所有子域中工作？就像谷歌一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:52:48.463

查看[session_set_cookie_params()](http://php.net/manual/en/function.session-set-cookie-params.php)以了解如何使您的会话 cookie 可访问您的域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:55:04.647

`$_SESSION`跨子域共享时需要考虑几件事。

1.  是否所有子域都由同一台服务器运行？

    1.  如果没有，那么您将需要在服务器之间共享会话，有几种解决方案：

        *   使用 NFS（不推荐）
        *   将 SESSION 移动到另一个存储（数据库、Memcache、Redis）（最好的选择恕我直言）
    2.  如果是，您可能只需要使用`session.cookie_domain`ini 指令配置您的 cookie 域。

2.  您是否正在运行 Suhosin，如果这样做，您可能需要禁用一些安全选项以允许您的会话在其他服务器上被解密。

# abap - 按实体分组发票，使用 LOOP AT

> ID：11085300
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:48.357
> 
> 标签：abap, sap-erp

我的程序输出一个包含一些发票和详细信息的列表，我希望它们按实体出现。

该列表显示在列表的每一行中重复的实体编号和名称，但我希望它按分组显示。

例如，有 4 张发票：每个实体两张，如何显示实体和所有相应的发票，然后是另一个实体，等等？

我的代码是这个：

```
FORM select_data3 CHANGING lt_data LIKE gt_map1.
  FIELD-SYMBOLS: <fs_main> TYPE zimposto_consumo.

  SELECT a~belnr d~spart a~bldat a~waers c~wrbtr a~hwaer c~dmbtr
    INTO CORRESPONDING FIELDS OF TABLE lt_data
    FROM ( ( bkpf AS a
    INNER JOIN bsis AS c ON c~belnr = a~belnr
                          AND buzei = 1 )
    INNER JOIN vbrk AS d ON d~xblnr = c~belnr )
    WHERE a~gjahr in gjahr.

  LOOP AT lt_data ASSIGNING <fs_main>.

    clear <fs_main>-kbetr.
    clear <fs_main>-fwste.
    clear <fs_main>-hwste.
    SELECT SINGLE kbetr fwste hwste FROM bset
      INTO (<fs_main>-kbetr, <fs_main>-fwste, <fs_main>-hwste)
      WHERE belnr = <fs_main>-belnr.

    clear <fs_main>-koart.
    SELECT SINGLE koart kunnr FROM bseg
      INTO (<fs_main>-koart, wa_bseg-kunnr)
      WHERE belnr = <fs_main>-belnr.

    IF <fs_main>-koart = 'D'.

      SELECT SINGLE name1 FROM kna1
        INTO (wa_bseg-name1)
        WHERE kunnr = wa_bseg-kunnr.

      IF sy-subrc = 0.
        FORMAT COLOR COL_TOTAL INTENSIFIED ON.

        WRITE:/ sy-uline(137), / sy-vline NO-GAP,
                        2 'Entidade: ', wa_bseg-kunnr, wa_bseg-name1,
                        137 sy-vline NO-GAP, / sy-uline(137).

        FORMAT COLOR COL_NORMAL INTENSIFIED OFF.
        WRITE:/
                sy-vline NO-GAP,
                (16) <fs_main>-belnr NO-GAP,
                sy-vline NO-GAP,
                (16) <fs_main>-spart NO-GAP,
                sy-vline NO-GAP,
                (10) <fs_main>-bldat NO-GAP,
                sy-vline NO-GAP.
                perc = <fs_main>-kbetr / 10.
        ...
      ENDIF.
    ENDIF.
  ENDLOOP.

ENDFORM. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:51:10.700

我在块[`AT NEW ... ENDAT`](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abapat_itab.htm)内使用了块`LOOP AT ... ENDLOOP`。

# wpf - 是否可以将 ListView/TextBox 等控件放在 Viewport3D 中

> ID：11085301
> 
> 赞同：1
> 
> 时间：2012-06-18T14:47:49.093
> 
> 标签：wpf

我在 Viewport3D 中有一个模型，我想在它旁边绘制一个文本框，并且文本框可以将“常规”控件添加到 Viewport3D 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:58:14.757

在下面的 XAML 中，我在水平堆栈面板中创建了一个带有一些 2D 控件、一个文本块和一个文本框的 Viewport3D，您要查找的控件是 Viewport2DVisual3D，您需要描述它的几何形状和材质，但之后它'将在世界空间中可用。

Viewport2DVisual3D 控件的最佳之处在于它将鼠标操作取消投影回世界空间，这意味着您放置在视口中的控件仍然可以使用，就像它们是在 2D 中绘制的一样。

```
<Viewport3D>

    <!-- To look in to a 3D world you need a camera just like a game.-->
    <Viewport3D.Camera>
        <!-- 
        I've positioned the camera at the center of the world and moved it back
        Along the Z axis, try changing the numbers here to see how it works.
    -->
        <PerspectiveCamera Position="0, 0, 3"/>
    </Viewport3D.Camera>

    <!-- All 3D worlds need to have a light, you can again play with the values
        here to see what they mean, Directional light is one that starts at a 
        location in the world and shines in a given direction.
-->
    <ModelVisual3D>
        <ModelVisual3D.Content>
            <DirectionalLight Color="White" Direction="0,0,-1"/>
        </ModelVisual3D.Content>
    </ModelVisual3D>

    <!-- 
    This is the wonder control that allows you to display WPF controls 
    in a 3D model.
-->
    <Viewport2DVisual3D >

        <!-- 
        The 3D model is made up of a vertex list, each grouping of 3 digits
        in the positions property is a point on a polygon, here I've used
        4 points to represent a flat square surface (2 triangles to make the square)
        and relate to a bitmap produced from your WPF controls 
        Triangle TriangleIndices map positions in to triangles, here I've got 
        1             2 imagine a triangle drawn through points 0, 1, 2
                        and another drawn from 0, 2 and 3 

        0             3
        The texture coords tell the 3D viewport how to map your controls visual to the 
        points in positions, texture coordinates range from 0,0 top left to 1,1 bottom right
    -->
        <Viewport2DVisual3D.Geometry>
            <MeshGeometry3D Positions="-1,1,0 -1,-1,0 1,-1,0 1,1,0" TriangleIndices="0 1 2 0 2 3" TextureCoordinates="0,0 0,1 1,1 1,0"/>
        </Viewport2DVisual3D.Geometry>
        <Viewport2DVisual3D.Material>
            <DiffuseMaterial Viewport2DVisual3D.IsVisualHostMaterial="True" Brush="White"/>
        </Viewport2DVisual3D.Material>

        <!-- Here I'm doing a transform, it's the same as simply rotating a control using it's render transform
            in WPF
    -->
        <Viewport2DVisual3D.Transform>
            <RotateTransform3D>
                <RotateTransform3D.Rotation>
                    <!-- Play around with the Axis numbers to see what they mean.-->
                    <AxisAngleRotation3D Angle="-45" Axis="1, 0, 0" />
                </RotateTransform3D.Rotation>
            </RotateTransform3D>
        </Viewport2DVisual3D.Transform>

        <!-- This is the 2D bit, inside the visual property you can place any WPF controls. -->
        <Viewport2DVisual3D.Visual>
            <StackPanel Orientation="Horizontal">

                <!-- This bit is obvious. -->
                <TextBlock Text="3D user interface!"/>
                <TextBox />
            </StackPanel>
        </Viewport2DVisual3D.Visual>
    </Viewport2DVisual3D>

</Viewport3D> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T16:04:00.850

您可以简单地在 Viewport3D 上方放置一个画布：

```
<Grid>
  <Viewport3D>
    [..]
  </Viewport3D>
  <Canvas>
    <TextBox />
  </Canvas>
</Grid> 
```

这取决于你想做什么。

# c# - 如何访问在另一个对象中声明为列表的对象属性？

> ID：11085302
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:54.933
> 
> 标签：c#, iteration

这些是我的对象类型：

```
public class Room
{

    public Giver Giver
    {
        get;
        set;
    }

    [XmlElement("Receiver")] 
    public List<Receiver> Receiver
    {
        get;
        set;
    }

}

 public class Receiver
{
    [XmlAttribute("type")]
    public string Type
    {
        get; set;
    }

    [XmlAttribute("Id")]
    public String Id
    {
        get; set;
    }

}

     class Program
{
    static void Main(string[] args)
    {

 List<Room> list = new List<Room>
        {
            new Room
            {

                Giver = new Giver{ Type="Generous",  PID="something"},
                Receiver = new List<Receiver>{new Receiver{Type="test1", Id="test2"},
                                              new Receiver{Type="test3", Id="test4"},
                                              new Receiver{Type="test5", Id="test6"}},

            }

        };

    }

} 
```

如果我声明 **List eroom**，我如何遍历 eroom 列表，其中声明了 Receiver 列表并访问 Receiver 的属性？

例如，我有：

```
List<Room> eroom;

 for (int i = 0; i < eroom.Count; i++)
        {
            Console.WriteLine("Giver Type: " + eroom[i].Giver.Type);
            Console.WriteLine("Giver PID: " + eroom[i].Giver.PID);

           //code below returns error
           Console.WriteLine("Receiver Id: " + eroom[i].Receiver.Id);

        } 
```

如何在 for 循环中访问接收者的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:55:42.620

```
List<Room> eroom;
eroom.ForEach((room) =>{

            Console.WriteLine("Giver Type: " + room.Giver.Type);
            Console.WriteLine("Giver FNm: " + room.Giver.PID);
           room.Receiver.ForEach((receiver) =>{

            Console.WriteLine(receiver.Id);

             });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:56:39.547

您需要在`eroom`其中的第二个循环。由于`Receiver`（变量，而不是类）是一个列表，因此每个列表中有多个 Id。你需要这样的东西：

```
foreach (Receiver r in eroom[i].Receiver)
    Console.WriteLine("Receiver Id: " + r.Id; 
```

您还可以使用普通的 for 循环，使用 0 和 eroom[i].Reciever.Count 作为边界。

# ios - 黑色背景的 UITableViewCell

> ID：11085303
> 
> 赞同：1
> 
> 时间：2012-06-18T14:47:56.923
> 
> 标签：ios, uitableview

我知道这可能很明显，但我没有在 IB 中将背景设置为任何颜色。我的代码`UITableView`是这样的：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"Cell Identifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    }

    cell.textLabel.text = [_listeDesChapitres objectAtIndex:indexPath.row];
    cell.backgroundColor = [UIColor clearColor];

    return cell;
} 
```

我得到的是：

![表格视图单元格有黑色背景](../Images/b521d6e8b48362a96b83de65c0679736.png)

单元格背景默认为黑色，直到我单击它以查看其文本。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:53:32.887

您需要设置标签的背景，以及单元格的背景：

```
cell.textLabel.backgroundColor = [UIColor clearColor];
cell.contentView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:50:24.760

采用 ：

```
cell.contentView.backgroundColor=[UIColor clearColor]; 
```

代替：

```
cell.backgroundColor=[UIColor clearColor]; 
```

# facebook - 例如，通过 Facebook 链接时如何设置图像优先级？

> ID：11085304
> 
> 赞同：0
> 
> 时间：2012-06-18T14:47:58.017
> 
> 标签：facebook

您知道是否要将您的网站发布到 Facebook 上的状态或评论，然后它会获取您的元标题并将您的网站标题、描述等整齐地排列到链接中。

它还会在您的网站上随机使用您的一张图片作为缩略图预览。您当然可以在发布链接之前进行更改，但我记得读过有一种方法可以设置您的图像在这种情况下出现的优先级。此刻它只需要代码中的最高图像。

有没有办法做到这一点，有人可以给我代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:53:44.820

不确定优先级，但您可以通过将图像源元标记添加到文档头部来设置图像。

```
<link rel="image_src" href="http://domain.top/yourimage.jpg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T04:38:12.650

这些来自元标记的图像的缩略图缓存在 Facebook 上。优先级遵循规则：高分辨率图像将首先出现。这个想法来自：

[如何为评论中插入的链接设置打开图形图像的优先顺序。（不分享或墙贴。）](https://stackoverflow.com/questions/8365156/how-to-set-priority-order-to-open-graph-images-for-links-that-are-inserted-in-co/12726245#12726245)

希望它会有所帮助。

# c++ - 根据用户输入从模板创建对象

> ID：11085305
> 
> 赞同：1
> 
> 时间：2012-06-18T14:47:58.083
> 
> 标签：c++, oop, templates, pointers, cryptography

我正在使用 crypto++ 库编写应用程序。对于那些不熟悉它的人，ECB_Mode 模板类继承自 CipherModeBase。该程序编译并运行，但我得到的输出不正确。当我从 cipher_object 调用加密方法时，它的工作方式与我直接使用 ECB_Mode 对象的方式不同。我已验证选项对象实例变量是否正确分配。我想在 if_then_else 结构或 switch_case 中创建实例，这样我就可以使代码保持良好和干燥。我究竟做错了什么？

这是我正在尝试但不起作用的方法：

```
 CipherModeBase *cipher_object;
    cipher_object == NULL;

    if(options->cipher == BS_AES)
    {
        ECB_Mode<AES >::Encryption ecbEncryption(options->key, options->keylen);
        cipher_object = &ecbEncryption;
    }
    else if(options->cipher == BS_TWOFISH)
    {
        ECB_Mode<Twofish >::Encryption ecbEncryption(options->key, options->keylen);
        cipher_object = &ecbEncryption;     
    }
cipher_object->processData(args); 
```

这是有效的：

```
ECB_Mode<AES >::Encryption ecbEncryption(options->key, options->keylen);
ecbEncryption.processData(args); 
```

PS。我知道不要使用欧洲央行模式。在一切正常之前，我只是不想弄乱IV。我对 C++ 也相对缺乏经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:55:15.163

您的 ecbEncryption 对象在 if 和 else 范围内的堆栈上声明。（范围是用大括号括起来的东西）。

当对象声明的范围退出时，对象将被销毁。因此，在您调用该方法之前，您调用 processData 的对象已被删除。显然那是行不通的。

一种选择是您可以在堆而不是堆栈上声明对象。这样，可以控制生命周期以按照您想要的方式工作。

尝试对 cipher_object 使用 std::unique_ptr 而不是原始指针。然后，在 if 和 else 子句中分配给它，如下所示：

```
cipher_object.reset( new ECB_Mode<AES>::Encryption(options->key, options->keylen) ); 
```

然后该对象将保留在堆上，直到 cipher_object 范围结束，此时 unique_ptr 将为您删除它。并且，cipher_object 的作用域将持续到您对其调用任何方法之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:50:58.910

这里：

```
cipher_object == NULL;

if(options->cipher == BS_AES)
{
    // v
    ECB_Mode<AES >::Encryption ecbEncryption(options->key, options->keylen);
    cipher_object = &ecbEncryption;
} 
```

`ecbEncryption`在该范围内是本地的。您正在存储本地地址，并在超出范围后使用它。那是未定义的行为。您应该使用 new 关键字在堆上分配它：

```
if(options->cipher == BS_AES)
{
    cipher_object = new ECB_Mode<AES >::Encryption(options->key, options->keylen);
} 
```

您应该对另一个 if 语句执行相同的操作。

另请注意：

```
cipher_object == NULL; 
```

应该改成这样：

```
cipher_object = NULL; 
```

不过，问题应该使用上面的代码来解决。

# tfs - TFS BuildNotification.exe 中未列出任何服务器

> ID：11085307
> 
> 赞同：9
> 
> 时间：2012-06-18T14:48:00.560
> 
> 标签：tfs

当我启动 BuildNotification 时，我得到了这个气球：

![在此处输入图像描述](../Images/411eb86a4a74576d06076d631e901a62.png)

如果我点击气球，我会看到没有列出任何内容的构建状态屏幕。如果我点击“选项”菜单，它也是空白的：

![在此处输入图像描述](../Images/958b5a52e5dd422c7789b100043b4bc9.png)

当我周五离开办公室时，这是可行的；但现在我遇到了这个问题（而且我是团队中唯一遇到这个问题的人）。

我检查了以下注册表项：

**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation\Build\BuildNotification**

但没有看到任何有价值的东西。（例如 uri = "tfs.myserver.com"）

我认为它会检查此注册表项，因为它列出了服务器：

**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation\Instances**

BuildNotification.exe 如何获取服务器列表？

有没有办法强制刷新？

* * *

**注意：** Visual Studio 中的团队资源管理器工作正常（例如有我的 TFS 服务器信息）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-16T06:49:55.603

另外 - 如果您安装了多个版本的 VS，请注意每个版本的 TFS buildNotification 都连接到相应的 VS tfs 存储库地址。我更改了 VS2013 tfs 连接的地址（旧的 tfs 地址已关闭），但在 VS2012 上没有，因此当从系统托盘启动 VS 2012 buildNotification 工具时，它无法连接到 tfs 存储库的新地址。

VS 2012 和 2013 的 buildnotification 工具的位置：

*   C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\BuildNotification.exe
*   C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\BuildNotificationApp.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:03:22.643

叹。

我注意到我的 TFS 项目也没有连接，所以我打开了源代码管理资源管理器并找到了以下选项（Go Online）：

![在此处输入图像描述](../Images/e39fbe1571c20490a9015a75103859eb.png)

显然，我从 TFS 服务器“离线”了。

一天只有几个小时了，我已经在捂脸了（*对自己*）；这将是一个漫长的一周。

# android - 更改 searchview 小部件的背景可绘制对象

> ID：11085308
> 
> 赞同：126
> 
> 时间：2012-06-18T14:48:02.903
> 
> 标签：android, styles, android-actionbar, searchview, background-drawable

我正在尝试更改位于 Android 操作栏 searchview 小部件中的可绘制对象。

目前它看起来像这样： ![在此处输入图像描述](../Images/d6a477dac6ae8618b8f88f07a470af8e.png)

但我需要将可绘制的蓝色背景更改为红色。

除了滚动自己的搜索小部件之外，我已经尝试了很多方法，但似乎没有任何效果。

有人可以指出我改变这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-07-26T12:56:37.710

## 介绍

不幸的是，没有办法`SearchView`使用 XML 中的主题、样式和继承来设置文本字段样式，就像[在 ActionBar 下拉菜单中使用项目的背景](https://stackoverflow.com/questions/9019512/how-can-i-change-the-touch-effect-color-of-the-actionbar-in-android-3-0-and-high)一样。这是因为`selectableItemBackground` [在 中列为可样式化](http://developer.android.com/reference/android/R.styleable.html#Theme_selectableItemBackground)，`R.stylable`而`searchViewTextField`(我们感兴趣的主题属性) 不是。因此，我们无法从 XML 资源中轻松访问它（您会得到一个`No resource found that matches the given name: attr 'android:searchViewTextField'`错误）。

## 从代码设置 SearchView 文本字段背景

因此，正确替换`SearchView`文本字段背景的唯一方法是进入它的内部，获取对具有背景设置的视图的访问权限`searchViewTextField`并设置我们自己的。

**注意：**下面的解决方案仅取决于 id ( `android:id/search_plate`) 中的元素`SearchView`，因此它比子遍历更独立于 SDK 版本（例如，`searchView.getChildAt(0)`用于到达 中的正确视图`SearchView`），但它不是防弹的。特别是如果某些制造商决定重新实现内部结构`SearchView`并且具有上述 id 的元素不存在 - 代码将不起作用。

在 SDK 中，文本字段的背景`SearchView`是通过[九个补丁](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)声明的，所以我们会这样做。[您可以在Android git 存储库的](https://github.com/android/platform_frameworks_base)[drawable-mdpi](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/drawable-mdpi)目录中找到原始*png*图像。我们对两个图像感兴趣。一种用于选择文本字段时的状态（名为[textfield_search_selected_holo_light.9.png](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-mdpi/textfield_search_selected_holo_light.9.png)），另一种用于未选择文本字段的状态（名为[textfield_search_default_holo_light.9.png](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-mdpi/textfield_search_default_holo_light.9.png)）。

不幸的是，即使您只想自定义*焦点*状态，您也必须创建两个图像的本地副本。这是因为[R.drawable](http://developer.android.com/reference/android/R.drawable.html)`textfield_search_default_holo_light`中不存在。因此它不容易通过 来访问，它可以在下面显示的选择器中使用，而不是引用本地可绘制对象。`@android:drawable/textfield_search_default_holo_light`

**注意：**我使用*Holo Light*主题作为基础，但您可以使用*Holo Dark*做同样的事情。[浅色](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_search_selected_holo_light.9.png)和[深色](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_search_selected_holo_dark.9.png)主题之间的*选定状态*9 补丁似乎没有真正的区别。但是，*默认状态*的 9 个补丁存在差异（请参阅[Light](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_search_default_holo_light.9.png) vs [Dark](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_search_default_holo_dark.9.png)）。因此，对于*Dark*和*Light*主题，可能不需要为*selected state*制作 9-patches 的本地副本（假设您想要同时处理这两个主题，并使它们看起来与*Holo Theme*中的相同）。只需制作一份本地副本并在******两个主题都可以*绘制选择器。*******

 **现在，您需要根据需要编辑下载的九个补丁（即将蓝色更改为红色）。您可以使用[draw 9-patch 工具](http://developer.android.com/tools/help/draw9patch.html)查看文件，以检查其在编辑后是否正确定义。

我已经使用[GIMP](http://www.gimp.org/)和单像素铅笔工具（非常简单）编辑了文件，但您可能会使用自己的工具。*这是我为专注状态*定制的 9 补丁：

![在此处输入图像描述](../Images/5d29eba685882ec6cbd7e76144ea3bfd.png)

**注意：**为简单起见，我只使用图像来表示*mdpi*密度。如果您想在任何设备上获得最佳效果，您必须为多种屏幕密度创建*9 个补丁。**Holo* 的图像`SearchView`可以在[mdpi](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-mdpi/textfield_search_selected_holo_light.9.png)、[hdpi](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/textfield_search_selected_holo_light.9.png)和[xhdpi](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_search_selected_holo_light.9.png) drawable 中找到。

现在，我们需要创建可绘制选择器，以便根据视图状态显示正确的图像。创建`res/drawable/texfield_searchview_holo_light.xml`具有以下内容的文件：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true"
        android:drawable="@drawable/textfield_search_selected_holo_light" />
    <item android:drawable="@drawable/textfield_search_default_holo_light" />
</selector> 
```

我们将使用上面创建的可绘制对象为`LinearLayout`包含文本字段的视图设置背景`SearchView`- 它的 id 是`android:id/search_plate`. 因此，在创建选项菜单时，以下是如何在代码中快速执行此操作：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }       

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);

        // Getting SearchView from XML layout by id defined there - my_search_view in this case
        SearchView searchView = (SearchView) menu.findItem(R.id.my_search_view).getActionView();
        // Getting id for 'search_plate' - the id is part of generate R file,
        // so we have to get id on runtime.
        int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_plate", null, null);
        // Getting the 'search_plate' LinearLayout.
        View searchPlate = searchView.findViewById(searchPlateId);
        // Setting background of 'search_plate' to earlier defined drawable.            
        searchPlate.setBackgroundResource(R.drawable.textfield_searchview_holo_light);          

        return super.onCreateOptionsMenu(menu);
    }

} 
```

## 最终效果

这是最终结果的屏幕截图：

![在此处输入图像描述](../Images/1c3b3f2db16955090aee8cfc1e7c4ff7.png)

## 我是怎么做到的

我认为值得一提的是我是如何做到这一点的，以便在自定义其他视图时可以使用这种方法。

### 检查视图布局

我检查了`SearchView`布局的样子。在[SearchView 构造](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/widget/SearchView.java/#248)函数中，可以找到使布局膨胀的一行：

```
inflater.inflate(R.layout.search_view, this, true); 
```

现在我们知道`SearchView`布局在名为`res/layout/search_view.xml`. 查看[search_view.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/search_view.xml#L75)我们可以找到一个内部`LinearLayout`元素（带有 id `search_plate`），其中包含`android.widget.SearchView$SearchAutoComplete`（看起来像我们的搜索视图文本字段）：

```
 <LinearLayout
        android:id="@+id/search_plate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="center_vertical"
        android:orientation="horizontal"
        android:background="?android:attr/searchViewTextField"> 
```

现在，我们现在根据当前主题的`searchViewTextField`属性设置背景。

### 调查属性（是否容易设置？）

为了检查`searchViewTextField`属性是如何设置的，我们调查[res/values/themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml#L343)。有一组与`SearchView`default相关的属性`Theme`：

```
<style name="Theme">
    <!-- (...other attributes present here...) -->

    <!-- SearchView attributes -->
    <item name="searchDropdownBackground">@android:drawable/spinner_dropdown_background</item>
    <item name="searchViewTextField">@drawable/textfield_searchview_holo_dark</item>
    <item name="searchViewTextFieldRight">@drawable/textfield_searchview_right_holo_dark</item>
    <item name="searchViewCloseIcon">@android:drawable/ic_clear</item>
    <item name="searchViewSearchIcon">@android:drawable/ic_search</item>
    <item name="searchViewGoIcon">@android:drawable/ic_go</item>
    <item name="searchViewVoiceIcon">@android:drawable/ic_voice_search</item>
    <item name="searchViewEditQuery">@android:drawable/ic_commit_search_api_holo_dark</item>
    <item name="searchViewEditQueryBackground">?attr/selectableItemBackground</item> 
```

我们看到默认主题的值为`@drawable/textfield_searchview_holo_dark`. 在[该文件中也设置了](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml#L461)`Theme.Light`值。

现在，如果可以通过[R.styleable](http://developer.android.com/reference/android/R.styleable.html)访问此属性，那就太好了，但不幸的是，事实并非如此。[为了进行比较，请参阅themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)和[R.attr](http://developer.android.com/reference/android/R.attr.html)中都存在的其他*主题*属性，例如[textAppearance](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml#L60)或[selectableItemBackground](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml#L118)。如果出现在(and ) 中，我们可以在用 XML 为整个应用程序定义主题时简单地使用我们的可绘制选择器。例如：`searchViewTextField``R.attr``R.stylable`

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AppTheme" parent="android:Theme.Light">
        <item name="android:searchViewTextField">@drawable/textfield_searchview_holo_light</item>
    </style>
</resources> 
```

### 应该修改什么？

现在我们知道，我们必须`search_plate`通过代码访问。但是，我们仍然不知道它应该是什么样子。简而言之，我们搜索在默认主题中用作值的可绘制对象：[textfield_searchview_holo_dark.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/textfield_searchview_holo_dark.xml)和[textfield_searchview_holo_light.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/textfield_searchview_holo_light.xml)。查看内容，我们看到可绘制对象`selector`基于视图状态引用了另外两个可绘制对象（稍后会出现 9 个补丁）。[您可以在androiddrawables.com](http://androiddrawables.com/widget.html)上找到来自（几乎）所有 Android 版本的聚合 9-patch drawables

### 定制

[我们识别出 9 个补丁之一中](https://github.com/android/platform_frameworks_base/raw/android-4.0.1_r1.2/core/res/res/drawable-mdpi/textfield_search_selected_holo_dark.9.png)的蓝线，因此我们创建它的本地副本并根据需要更改颜色。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-01-22T18:32:17.817

如果您使用的是 appcompat 库，上述解决方案可能不起作用。您可能必须修改代码以使其适用于 appcompat 库。

这是 appcompat 库的工作解决方案。

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu)
  {

    getMenuInflater().inflate(R.menu.main_menu, menu); 

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    MenuItem searchMenuItem = menu.findItem(R.id.action_search);
    SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchMenuItem);
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    SearchView.SearchAutoComplete searchAutoComplete = (SearchView.SearchAutoComplete)searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
    searchAutoComplete.setHintTextColor(Color.WHITE);
    searchAutoComplete.setTextColor(Color.WHITE);

    View searchplate = (View)searchView.findViewById(android.support.v7.appcompat.R.id.search_plate);
    searchplate.setBackgroundResource(R.drawable.texfield_searchview_holo_light);

    ImageView searchCloseIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_close_btn);
    searchCloseIcon.setImageResource(R.drawable.abc_ic_clear_normal);

    ImageView voiceIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_voice_btn);
    voiceIcon.setImageResource(R.drawable.abc_ic_voice_search);

    ImageView searchIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_mag_icon);
    searchIcon.setImageResource(R.drawable.abc_ic_search);

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-26T13:25:54.033

您的`onCreateOptionsMenu`方法必须是：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.option, menu);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        int linlayId = getResources().getIdentifier("android:id/search_plate", null, null);
        ViewGroup v = (ViewGroup) searchView.findViewById(linlayId);
        v.setBackgroundResource(R.drawable.searchviewredversion);
        return super.onCreateOptionsMenu(menu);
    } 
```

您的搜索项目`menu_search`偏离路线的位置

这是`searchviewredversion`（这是xhdpi版本）：http: [//img836.imageshack.us/img836/5964/searchviewredversion.png](http://img836.imageshack.us/img836/5964/searchviewredversion.png)

![在此处输入图像描述](../Images/e6c949a347dee69a12e9b5e297035a0d.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-20T15:53:46.140

上面的解决方案不适用于 ActionBarSherlock 4.2，因此它不能向后兼容 Android 2.x。这是在 ActionBarSherlock 4.2 上设置 SearchView 背景和提示文本的工作代码：

```
public static void styleSearchView(SearchView searchView, Context context) {
    View searchPlate = searchView.findViewById(R.id.abs__search_plate);
    searchPlate.setBackgroundResource(R.drawable.your_custom_drawable);
    AutoCompleteTextView searchText = (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
    searchText.setHintTextColor(context.getResources().getColor(R.color.your_custom_color));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-03T22:05:47.790

我也厌倦了这样做，我正在使用 v7。当我尝试通过 抓取时，应用程序崩溃了`searchPlate`，`getIdentifier()`所以我这样做了：

```
View searchPlate = searchView.findViewById(android.support.v7.appcompat.R.id.search_plate); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-28T11:10:34.410

**更新**

如果您使用的是 AndroidX，那么您可以这样做

```
 View searchPlate = svSearch. findViewById(androidx.appcompat.R.id.search_plate);
    if (searchPlate != null) {
        AutoCompleteTextView searchText = searchPlate.findViewById(androidx.appcompat.R.id.search_src_text);
        if (searchText != null){
            searchText.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimension(R.dimen.edittext_text_size));
            searchText.setMaxLines(1);
            searchText.setSingleLine(true);
            searchText.setTextColor(getResources().getColor(R.color.etTextColor));
            searchText.setHintTextColor(getResources().getColor(R.color.etHintColor));
            searchText.setBackground(null);
        }
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-17T09:11:05.070

我也遇到了同样的问题。我使用了 appcompat v7 库并为其定义了自定义样式。在drawable文件夹中放置bottom_border.xml文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
  <shape >
      <solid android:color="@color/blue_color" />
  </shape>
</item>
<item android:bottom="0.8dp"
  android:left="0.8dp"
  android:right="0.8dp">
  <shape >
      <solid android:color="@color/background_color" />
  </shape>
</item>

<!-- draw another block to cut-off the left and right bars -->
<item android:bottom="2.0dp">
  <shape >
      <solid android:color="@color/main_accent" />
  </shape>
 </item>
</layer-list> 
```

在值文件夹 styles_myactionbartheme.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="AppnewTheme" parent="Theme.AppCompat.Light">
    <item name="android:windowBackground">@color/background</item>
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="android:actionBarWidgetTheme">@style/ActionBarWidget</item>
</style> 
<!-- Actionbar Theme -->
<style name="ActionBar" parent="Widget.AppCompat.Light.ActionBar.Solid.Inverse">
    <item name="android:background">@color/main_accent</item>
    <!-- <item name="android:icon">@drawable/abc_ic_ab_back_holo_light</item> -->
</style> 
<style name="ActionBarWidget" parent="Theme.AppCompat.Light">
    <!-- SearchView customization-->
     <!-- Changing the small search icon when the view is expanded -->
    <!-- <item name="searchViewSearchIcon">@drawable/ic_action_search</item> -->
     <!-- Changing the cross icon to erase typed text -->
  <!--   <item name="searchViewCloseIcon">@drawable/ic_action_remove</item> -->
     <!-- Styling the background of the text field, i.e. blue bracket -->
    <item name="searchViewTextField">@drawable/bottom_border</item>
     <!-- Styling the text view that displays the typed text query -->
    <item name="searchViewAutoCompleteTextView">@style/AutoCompleteTextView</item>        
</style>

  <style name="AutoCompleteTextView" parent="Widget.AppCompat.Light.AutoCompleteTextView">
    <item name="android:textColor">@color/text_color</item>
  <!--   <item name="android:textCursorDrawable">@null</item> -->
    <!-- <item name="android:textColorHighlight">@color/search_view_selected_text</item> -->
</style>
</resources> 
```

我定义了用于显示菜单的 custommenu.xml 文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:com.example.actionbartheme="http://schemas.android.com/apk/res-auto" >  

<item android:id="@+id/search"
      android:title="@string/search_title"
      android:icon="@drawable/search_buttonn" 
     com.example.actionbartheme:showAsAction="ifRoom|collapseActionView"   
                 com.example.actionbartheme:actionViewClass="android.support.v7.widget.SearchView"/> 
```

您的活动应该扩展 ActionBarActivity 而不是 Activity。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.custommenu, menu);
} 
```

在清单文件中：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppnewTheme" > 
```

有关更多信息，请参见此处：
这里[http://www.jayway.com/2014/06/02/android-theming-the-actionbar/](http://www.jayway.com/2014/06/02/android-theming-the-actionbar/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-26T07:16:11.993

首先，让我们创建一个名为search_widget_background.xml 的XML 文件，用作drawable，即在drawable 目录下。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="@color/red" />

</shape> 
```

这个drawable将用作我们搜索小部件的背景。我将颜色设置为红色，因为这是您要求的，但您可以将其设置为 @color 标签定义的任何颜色。您甚至可以使用为[形状标签](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)定义的属性（制作圆角、制作椭圆背景等）进一步修改它。

下一步是将我们的搜索小部件的背景设置为此。这可以通过以下方式完成：

```
 public boolean onCreateOptionsMenu(Menu menu) {

        SearchView searchView = (SearchView)menu.findItem(R.id.my_search_view).getActionView();
        Drawable d = getResources().getDrawable(R.drawable.search_widget_background);
        searchView.setBackground(d);
...
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-30T14:37:20.767

```
public boolean onCreateOptionsMenu(Menu menu) {
........

        // Set the search plate color
        int linlayId = getResources().getIdentifier("android:id/search_plate", null, null);
        View view = searchView.findViewById(linlayId);
        Drawable drawColor = getResources().getDrawable(R.drawable.searchcolor);
        view.setBackground( drawColor );
........
    } 
```

**这是 searchablecolor.xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item>
      <shape >
          <solid android:color="#ffffff" />
      </shape>
  </item>

  <!-- main color -->
  <item android:bottom="1.5dp"
      android:left="1.5dp"
      android:right="1.5dp">
      <shape >
          <solid android:color="#2c4d8e" />
      </shape>
  </item>

  <!-- draw another block to cut-off the left and right bars -->
  <item android:bottom="18.0dp">
      <shape >
          <solid android:color="#2c4d8e" />
      </shape>
  </item>
</layer-list> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-28T12:03:04.823

我对此进行了很多研究，最后我找到了这个解决方案，它对我有用！
你可以用这个

如果你使用 appcompat 试试这个：

```
ImageView searchIconView = (ImageView) searchView.findViewById(android.support.v7.appcompat.R.id.search_button);
searchIconView.setImageResource(R.drawable.yourIcon); 
```

如果你使用 androidx 试试这个：

```
ImageView searchIconView = (ImageView) searchView.findViewById(androidx.appcompat.R.id.search_button);
    searchIconView.setImageResource(R.drawable.yourIcon); 
```

它将更改默认的 serchview 图标。

希望能帮助到你！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-12T03:58:27.603

我在这篇文章的最后用图片解释了这适用于 xamarin 表单。不过我想你可以理解，因为它是基于android的searchview的源码

[如何更改 xamarin 表单中的搜索栏取消按钮图像](https://stackoverflow.com/questions/47426541/how-to-change-searchbar-cancel-button-image-in-xamarin-forms/51297028#51297028)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-15T17:10:27.420

如果您像这样“getMenuInflater().inflate(R.menu.search_menu, menu);”膨胀 Searchview。然后您可以通过 style.xml 自定义此搜索视图，如下所示。

```
<style name="AppTheme" parent="Theme.AppCompat.DayNight.NoActionBar">
      <item name="searchViewStyle">@style/SearchView.ActionBar</item>
</style>

<style name="SearchView.ActionBar" parent="Widget.AppCompat.SearchView.ActionBar">
      <item name="queryBackground">@drawable/drw_search_view_bg</item>
      <item name="searchHintIcon">@null</item>
      <item name="submitBackground">@null</item>
      <item name="closeIcon">@drawable/vd_cancel</item>
      <item name="searchIcon">@drawable/vd_search</item>
</style> 
```**

# xcode - Spin Control.app 的替换

> ID：11085312
> 
> 赞同：10
> 
> 时间：2012-06-18T14:48:23.027
> 
> 标签：xcode, macos, debugging, freeze

由于 Apple 已经放弃了 Spin Control.app——无响应的状态进程监控和日志工具——我需要一个替代品。

我知道我可以`spindump`直接使用，但我真的很喜欢它的自动化图形前端。

谁能推荐一个好的替代品？

我的需求是：按名称自动对我的进程进行采样，并在进程无响应时存储日志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T17:12:13.233

我一直在拼命寻找旋转控制替代方案，我注意到在 Intruments 中有一个名为“旋转监视器”的工具。令人讨厌的是，这并没有显示在初始模板向导中，您必须先通过单击标题栏中的库来找到它（参见屏幕截图）：

![自旋控制现在似乎是仪器内的自旋监视器（山狮上的 xcode 4.5）](../Images/56bf6f1d598b632685fe069635387367.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T15:18:08.760

我对 XCode 的开发并不是特别有经验，所以这个答案可能不是你想要的，但是在 Spin Control.app 上搜索和阅读了一段时间后，我在 Apple Developer 文档中找到[了这篇文章。](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/PerformanceOverview/InitialEvaluation/InitialEvaluation.html)

似乎没有一个工具可以替代 Spin Control.app。相反，Apple 希望您现在使用[Instruments](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652)的组合，它们是用于调试和监控 iOS/OSX 应用程序的统一实用程序集合，以及[Shark](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/PerformanceOverview/InitialEvaluation/InitialEvaluation.html#//apple_ref/doc/uid/TP40001410-CH206-SW8)，一种用于采样/跟踪单个应用程序或所有正在运行的应用程序的高级工具。

特别是，您可能会发现 Shark 的此功能很有用：

> Shark 还为其几个采样选项提供了窗口时间工具功能。窗口时间工具告诉 Shark 记录和处理最近获取的样本的有限缓冲区。此功能可让 Shark 在后台长时间连续记录数据。然后，您可以指示 Shark 仅在您的代码中发生有趣的事情后停止采样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:50:50.763

# 一个推测

虽然 Spin Control.app 不再存在，但操作系统*可能会*`com.apple.spincontrol`尊重域中首选项的更改。

*如果*这是真的，那么改变 的值`hangDelay`可以有效地改变采样开始前的延迟：

```
sh-3.2$ defaults read com.apple.spincontrol
{
    hangDelay = 5;
    watchOnlyApplication = 0;
}
sh-3.2$ defaults write com.apple.spincontrol hangDelay 10
sh-3.2$ defaults read com.apple.spincontrol
{
    hangDelay = 10;
    watchOnlyApplication = 0;
}
sh-3.2$ 
```

## 不太可能

对于观看单个应用程序时，我猜它的值`watchOnlyApplication`可能是进程的名称或 PID（感谢@Aeyoun 的评论）。在 2006 年 MacTech 文章[OS X 调查和故障排除 - 第 2 部分：OS X 成功的秘诀中](http://www.mactech.com/articles/mactech/Vol.22/22.06/2206OSXInvestigation/index.html)有对该功能的描述，但没有价值。

我怀疑在没有 Spin Control.app 的系统上设置`watchOnlyApplication`为任何其他内容`0`都可以使用。

# c# - 字符转换与 Convert.ToChar()

> ID：11085314
> 
> 赞同：3
> 
> 时间：2012-06-18T14:48:26.647
> 
> 标签：c#, sql-server, char

我在表中有一个 char 类型的列。我想将它转换为 C# 中的字符。它正在工作

```
char gender = Convert.ToChar(dataRow["Gender"]); 
```

但它失败了

```
 char gender = (char)(dataRow["Gender"]); 
```

如果列是 int 类型。我可以使用 (int) 来投射一个对象。为什么它在char（异常）上失败？

InValidCastException。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:56:56.377

这是**“对象”**`datarow[column]`类型的表达式

 **该`Convert.ToChar()`方法有一个将对象作为参数的重载，因此编译器知道该做什么。

`(char)dataRow[column]`是对 char 类型的显式转换`dataRow[column]`，但不存在从 object 到 char 的自动转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:50:55.570

`Convert.ToChar`读取文本值“A”并将其转换为值为“A”的字符对象。

强制转换假定原始值是一个字符对象。错误告诉你它不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:31:28.123

显然`dataRow["Gender"])`包含一个`int`值。这意味着它是一个“装箱”的 int（一个存储为对象的“int”）。您只能将其转换为“真实” int，不能直接将其转换为其他东西，例如`char`.

但是，您可以使用两步方法：

```
char gender = (char)(int)dataRow["Gender"]; 
```

*   首先将盒装`int`ro 铸造成真正的
*   然后将该 int 转换为 a `char`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:03:55.693

如果`dataRow["Gender"]`实际上是一个（强类型）字符串，您可以使用

```
char g = dataRow["Gender"][0]; 
```

获取该字符串的第零个字符（如果字符串为`null`空或为空，则会失败）。另一方面，如果`dataRow["Gender"]`是一个字符串但类型为`System.Object`，则可以使用

```
char g = ((string)dataRow["Gender"])[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:55:22.393

***单元格*中的**实际**值**很**可能是 type 。在*这种*情况下，您**将**获得.*`object`***`InvalidCastException`******

 ******[相反， Convert.ToChar](http://msdn.microsoft.com/it-it/library/ms130985.aspx)起作用，因为存在接受`object`类型的重载。********

# php - 提交后检索复选框选项

> ID：11085319
> 
> 赞同：0
> 
> 时间：2012-06-18T14:48:40.073
> 
> 标签：php

我正在构建这个函数，它回显所有表字段并带有一个复选框。

提交后我需要打印这个字段，我有这个代码，不，我还没有开始做某事，不是因为我不想要，而是因为我不知道如何......所以我在寻求你的帮助.

我需要在report.php 中打印信息，请帮忙。

```
<form action='report.php' method='post'>

<?php // Script 12.7 - sopping.php

$db = mysql_connect('localhost', 'root', '');
mysql_select_db('db_up', $db);

echo "<table border='1' class='tabtext'>";

$result = mysql_query("SELECT * FROM hostess");
$numrows = mysql_num_rows($result);
$numfields = mysql_num_fields($result);

// show headers
echo '<thead><tr>';
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field); // instead of $i
    echo '<th><label><input type="checkbox" name="checkbox[' . $field_name . '][]" value="1"/> ' . $field_name . '</label></th>';
}

echo '</tr></thead>';

echo '<tbody>';
for ($row = 0; $row < $numrows; $row++) {
    $data = mysql_fetch_assoc($result);
    echo '<tr>';
    for ($field = 0; $field < $numfields; $field++) {
        $field_name = mysql_field_name($result, $field);
        if (isset($_POST['checkbox'][$field_name])) {
            echo '<td>' . $data[$field_name] . '</td>';
        }
    }
    echo '</tr>';
}
echo '</tbody>';
echo '</table>';

?>
<input type='submit' value='Submit' />
</form> 
```

报告.php

```
<?php // Script 12.7 - sopping.php

$db = mysql_connect('localhost', 'root', '');
mysql_select_db('db_up', $db);

foreach($_POST['checkbox'] as $key => $value)

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:24:43.450

试试这个：

```
if(isset($_POST['Submit'])) {
    echo "<pre>";
    $checked = implode(',', $_POST['checkbox']);
    echo $checked;
} 
```

# asp.net-mvc - MVC3 - 模型设置为 null 但仍输入 IF 语句

> ID：11085321
> 
> 赞同：3
> 
> 时间：2012-06-18T14:48:52.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3, if-statement, model

我有一个模型（BusinessPlaceDetailsViewModel），其中有另一个模型（集线器）。

但是，如果我将 Hub 设置为 null，它仍会进入我的 IF 条件，请参见此处：

![在此处输入图像描述](../Images/69a721801945a3b8274da43c93bf8e4f.png)

我尝试了很多不同的组合，比如将每个 IF 语句放在自己的大括号内。

为什么它进入 If 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:39:03.910

你能先处理你在控制器中的检查吗？如果不是，可以尝试 .Any() 和 Ling。

```
 @using System.Linq

 @if( !Model.Any() )
 {
     ...
 }
 else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:20:47.240

我敢打赌，控制器没有将模型传递给视图是一个问题。

如果您发布控制器代码，它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:47:08.743

我通过在 BusinessPlaceDetailsViewModel 中使用以下内容解决了这个问题

```
public BusinessPlaceDetailsViewModel()
{
   Hub = new HubViewModel();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:26:01.450

只是出于好奇，你可以试试这个，看看是否`h1`显示？

```
@if (!User.Identity.IsAuthenticated) 
{
    if (Model.Hub == null)
    {
        <h1>wtf shouldn't have gotten here</h1>
    }
    else
    {
        ...
    }
} 
```

# c# - 调试依赖属性更改wpf？

> ID：11085324
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:05.253
> 
> 标签：c#, wpf

我正在尝试调试为什么或谁在 wpf 项目中设置依赖项属性。是否有任何技术可以找出和调试依赖属性更改事件？

我在 OnProertyChanged 事件处理程序中设置断点，但问题是......调用堆栈显示：

OnPropertyChanged

[外部代码]

```
myProgram.exe!EntryPoint.EntryPointRunner.Execute() Line 105 + 0x10 bytes   C# 
```

我还尝试在 SetValue() 调用中设置断点，希望我能够在那里看到调用堆栈，但是......根本没有被调用，这很奇怪，除非在 xaml 中设置属性不会调用 SetValue( ）。

任何建议都非常感谢，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:12:41.740

`SetValue`如果您的属性通过绑定更改，则不会命中断点。

右键单击调用堆栈并检查选项`Show External Code`这样您就可以看到哪个 .Net 方法更改了您的属性。

# netbeans - Netbeans 7.1.2 C/C++ MinGW 构建错误

> ID：11085327
> 
> 赞同：1
> 
> 时间：2012-06-18T14:49:06.630
> 
> 标签：netbeans, mingw

我已安装 Netbeans 和 MinGW 以用作 C/C++ IDE，但未能在 Netbeans 中编译提供的示例。我收到以下构建错误：

```
mkdir -p build/Debug/MinGW_1-Windows
rm -f build/Debug/MinGW_1-Windows/main.o.d
gcc.exe    -c -g -MMD -MP -MF build/Debug/MinGW_1-Windows/main.o.d -o build/Debug/MinGW_1-Windows/main.o main.c
make[2]: *** [build/Debug/MinGW_1-Windows/main.o] Error 1
make[2]: Leaving directory `/c/Users/Momo/Documents/NetBeansProjects/Test2'
make[1]: Leaving directory `/c/Users/Momo/Documents/NetBeansProjects/Test2'
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 4s) 
```

# jquery - jQuery 访问 JSON 概念网

> ID：11085329
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:17.657
> 
> 标签：jquery, json

我正在尝试在我的网页上显示来自服务器的 json 响应，但我收到此错误“XMLHttpRequest cannot load [http://conceptnet5.media.mit.edu/data/5.1/c/en/david_beckham](http://conceptnet5.media.mit.edu/data/5.1/c/en/david_beckham)。来源[http://](http://XXX.XXX.XXX.XXX:8080) Access-Control-Allow-Origin 不允许[XXX.XXX.XXX.XXX:8080 。”](http://XXX.XXX.XXX.XXX:8080)

我写的代码是

```
<i><!DOCTYPE html>
<html>
<head>
  <style>img{ height: 100px; float: left; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="content">

</div>
<script>
$.getJSON("http://conceptnet5.media.mit.edu/data/5.1/c/en/david_beckham",

  function(data) {
 $.each(data.edges, function(i,data){
                   alert(JSON.stringify(data))
                   var div_data = "<div ><a href='"+data.rel+"'>"+data.end+"</a></div>";
                   $(data).appendTo("#content");
               });

  });</script>

</body>
</html></i> 
```

请帮我在网页上得到结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:53:15.613

尝试

```
$.ajax({
    url: 'http://conceptnet5.media.mit.edu/data/5.1/c/en/david_beckham',
    dataType: 'jsonp',
    success: function(data) {
        console.log(data);
    }
}); 
```

如果它不起作用，请在为您生成 json 的服务器端创建一个文件，然后从您的 jquery ajax 调用中调用您的文件。

# python - 在压缩二进制数据 Python 中解释 5 位子集

> ID：11085331
> 
> 赞同：2
> 
> 时间：2012-06-18T14:49:21.120
> 
> 标签：python, binary

一段时间以来，我一直遇到一些真正的麻烦。我在 python 中接收到一串二进制数据，我无法解包和解释数据的 5 位子集（不是整个字节）。似乎想到的任何方法都只是惨败。

假设我有两个字节的二进制数据，我想解释 16 位中的前 10 位。如何将其转换为 2 个整数，每个整数代表 5 位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:52:38.707

使用位掩码和位移：

```
>>> example = 0x1234   # Hexadecimal example; 2 bytes, 4660 decimal.
>>> bin(example)       # Show as binary digits
'0b1001000110100'
>>> example & 31       # Grab 5 most significant bits
20
>>> bin(example & 31)  # Same, now represented as binary digits
'0b10100'
>>> (example >> 5) & 31 # Grab the next 5 bits (shift right 5 times first)
17
>>> bin(example >> 5 & 31)
'0b10001' 
```

这里的诀窍是要知道 31 是一个 5 位的位掩码：

```
>>> bin(31)
'0b11111'
>>> 0b11111
31
>>> example & 0b11111
20 
```

如您所见，`0b`如果您发现二进制数字文字符号更易于使用，您也可以使用它。

有关更多背景信息，请参阅[有关位操作的 Python Wiki 。](http://wiki.python.org/moin/BitManipulation)

# tsql - 将整数作为字符串附加到字符串

> ID：11085333
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:31.110
> 
> 标签：tsql

试图做这样的事情：

```
select 'Setup for Car ' + CAST(varchar(50), @CarID) + ' for user ' + CAST(varchar(5), @UserID) 
```

不起作用，不确定 T-SQL 的语法是什么。我到处找了，还没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:52:13.930

您可以使用以下任何一种：

```
select 'Setup for Car ' + Convert(varchar(50), @CarID) + ' for user ' + Convert(varchar(5), @UserID) 
```

或者

```
select 'Setup for Car ' + CAST(@CarID as varchar(50)) + ' for user ' + CAST(@UserID as varchar(5)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:52:03.447

您使用 CAST 错误。它应该是

```
CAST(@Variable AS WhatYouAreCastingTo) 
```

[这是一个显示这个的小提琴](http://sqlfiddle.com/#!3/d41d8/1979)

记住，[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)是你的朋友 :)

# ruby-on-rails - 如果 Rails 中不存在 Registry，如何实现？

> ID：11085334
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:34.293
> 
> 标签：ruby-on-rails, if-statement

在我的 Rails 应用程序中，我有一行说：

```
<% if user_signed_in? && Registry.exists?(current_user.registry) %> 
```

我怎样才能做到

```
if Registry. **does not** exists?(current_user.registry) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:53:14.510

```
if user_signed_in? && !Registry.exists?(current_user.registry) 
```

（注意感叹号）或

```
if user_signed_in? and not Registry.exists?(current_user.registry) 
```

如果您更喜欢它的可读性。在 Ruby 中，您也可以使用`unless`，它与 相同`if not`，但最终可能更难阅读。

# graphics - 旋转文本开罗，变换矩阵

> ID：11085336
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:36.367
> 
> 标签：graphics, cairo

[http://www.cairographics.org/manual/cairo-Transformations.html](http://www.cairographics.org/manual/cairo-Transformations.html)

我一直在使用 Cairo 矢量图形库进行一些工作，我非常了解某些部分：-

转换矩阵的默认值是多少？

我什么时候需要转换矩阵？

假设我不想旋转文本，我还需要设置它吗，它还需要设置吗？

我知道这很菜鸟，我必须自己调查，但我不太明白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:04:38.627

默认转换是单位矩阵。这个矩阵不会改变值，所以 (x, y) 在被单位矩阵变换时保持不变。

旋转文本是您可能需要它的原因之一。如果您不旋转文本，那么您可能不需要矩阵。大多数东西不应该需要转换。

如果你需要矩阵取决于你做的其他事情。例如，如果您调用其他代码并希望将绘图放大两倍，您可以使用转换矩阵来执行此操作。

所以简短的版本：如果您不知道如何处理转换矩阵，您很可能不理会它。

# wordpress - 向 wordpress 管理员添加 javascript 片段的建议是什么

> ID：11085338
> 
> 赞同：0
> 
> 时间：2012-06-18T14:49:43.480
> 
> 标签：wordpress, wordpress-theming

这更像是一个语义建议请求：

我的 WP admin>settings 中有一个小屏幕，它只需要添加几行 javascript。我的第一个想法是这样做：

```
add_settings_section('social_options_facebook_connect', '', 'social_facebook_section_text', 'social');

function social_options_facebook_connect(){
    echo '
    <script>
    //throw a function in here which is about 2 lines long
    </script>';
    //button
    echo '<input name="Submit" type="submit" onclick="javascript:myFunctionCallHere()" value="Connect Site To Facebook" class="button-primary"  style="margin:20px;" />';
} 
```

但这似乎有点脏。推荐的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:04:36.363

看看[http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts)。此示例显示如何将其限制为仅您的 .php 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:55:06.153

我通常会包含一个检查，以仅在需要的页面上加载额外的内容。这样，您就不会将其添加到管理员中的每个页面。假设没有必要在每一页上！

在这种情况下，它可能不会有太大的好处，但是如果您开始添加越来越多的内容，它肯定会帮助您提高管理页面的速度。

```
$_current_page = isset($_GET["page"]) ?  $_GET["page"] : "";

if ($_current_page == 'social') {
    function social_admin_enqueue_scripts() {
        wp_enqueue_script( 'social_script_1', 'url-for-script', '', '1.0.0', true );
        wp_enqueue_script( 'social_script_2', 'url-for-script', '', '1.0.0', true );
    }
    add_action( 'admin_enqueue_scripts', 'social_admin_enqueue_scripts' );
} 
```

# python - 带有使用者密钥和秘密的简单 python oAuth 1.0 示例

> ID：11085341
> 
> 赞同：10
> 
> 时间：2012-06-18T14:49:50.123
> 
> 标签：python, oauth

我是 python 和 oAuth 世界的新手。我想使用消费者密钥和秘密连接到我的服务器，我发现的所有示例都是服务器具有 access_token、authorize、request_token_ready 等 api，但我的服务器为我进行了 oAuth 身份验证。所以我的问题是如何使用 oAuth 将 python 连接到我的服务器（我的服务器使用 oAuth 1.0）

阐述：我的服务器不请求令牌和访问令牌。他只使用密钥和秘密。如何在 python 中实现到此服务器的 oAuth 连接

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-07-29T01:20:18.080

这是一个使用 requests_oauthlib 的工作示例

```
from requests_oauthlib import OAuth1Session
test = OAuth1Session('consumer_key',
                    client_secret='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX')
url = 'https://one-legged-ouath.example.com/username/test'
r = test.get(url)
print r.content 
```

* * *

我知道这是一个老问题，但接受的答案确实没有解决他的问题，因为正如 OP 所指出的，这些示例都与仅使用密钥和秘密、无令牌有关。

听起来好像您正在使用我所理解的被称为 OAuth 1.0a（单腿）的东西，尽管有些人将其称为 OAuth 1.0a 两腿。

我没有对此进行测试，但这里似乎有一个很好的例子：

[https://github.com/CarmaSys/CarmaLinkAPI/wiki/Authentication-&-Permissions](https://github.com/CarmaSys/CarmaLinkAPI/wiki/Authentication-&-Permissions)

这里还有另一个很好的例子：

[https://stackoverflow.com/a/12710408/2599534](https://stackoverflow.com/a/12710408/2599534)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T22:36:09.163

如果您正在寻找可以连接到服务器的客户端，我可以推荐[rauth](https://github.com/litl/rauth)。有许多[示例](https://github.com/litl/rauth/tree/master/examples)同时展示了 OAuth 1.0/a 和 2.0。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-25T16:02:34.227

正如 roman 已经说过的，这是一个老问题，但是仍然有一些受 OAuth 1.0a（单腿）保护的 API，今天我花了几个小时寻找访问此类 API 的有效解决方案。

我希望，对于下一个面临类似任务的人来说，该解决方案可能会派上用场。

我的解决方案基于罗马人的回答。非常感谢@roman！！

我想要访问的 API 的默认响应是 XML，因此我需要一种设置请求标头的方法。其实做起来很简单，如果你知道怎么做的话。

```
from requests_oauthlib import OAuth1Session

CONSUMER_KEY = ""
CONSUMER_SECRET = ""

host = "rest.host.de"
uri = "/restapi/api/search/v1.0/statistic?geocode=1276001039"

oauthRequest = OAuth1Session(CONSUMER_KEY,
                    client_secret=CONSUMER_SECRET)

url = 'https://' + host + uri

headers = {
        'Accept': "application/json",
        'Accept-Encoding': "gzip, deflate",
    }

response = oauthRequest.get(url, headers=headers)

print(response.status_code)
print(response.content) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-26T07:09:19.357

我正在使用 POX 帖子正文添加此 OAuth 1.0a（单腿）示例。这是一个使用带有“Plain Old XML”（POX）主体的请求/发布/响应的简单示例：

```
from requests_oauthlib import OAuth1Session

CONSUMER_KEY = "xxxxxxx"
CONSUMER_SECRET = "xxxxxxx"

ourSession = OAuth1Session(CONSUMER_KEY, client_secret=CONSUMER_SECRET, force_include_body=True)

body= '<?xml version="1.0" encoding="UTF-8"?>' \
   '<POXEnvelopeRequest xmlns="http://whateve">' \
   '<POXHeader>' \
   ' <RequestHeaderInfo>' \
      .   .   .   .
   ' </RequestHeaderInfo>' \
   '</POXHeader>'   \
   '</POXEnvelopeRequest>'

clen = str(len(body))

headers = {
 'Accept': '*/*',
 'Accept-Encoding': 'gzip, deflate, br',
 'Host': 'X.Y.com',
 'Content-Type': 'application/xml',
 'Connection': 'keep-alive',
 'Content-Length': clen
}

r = ourSession.post(url, headers=headers, data=body, verify=False)

# DEBUG: Comment out in and out as needed... 
print("===================== B E G I N    R E S P O N S E =======================\n")
print(r)
print(r.text)
print("===================== E N D    of  R E S P O N S E =======================\n") 
```

[python][oAuth1.0a][单腿][双腿]

# ios - 如何在IOS中“重置”一个充满绘图的视图？

> ID：11085346
> 
> 赞同：0
> 
> 时间：2012-06-18T14:50:00.543
> 
> 标签：ios, drawrect

我有一个非常简单的类，用于跟随手指在屏幕上绘图。我想设置一个按钮来清除所有绘图并允许用户重新开始绘图。我不知道在按钮的动作中要做什么来“清除”绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:46:07.040

```
-(void)cancelDrawing 
{   
self.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"drawview_blank.jpg"]];
//[anyArrayUsedForDrawing removeAllObjects];
[self setNeedsDisplay];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:30:06.390

好的，我发现自己该怎么做。这很简单，但你知道，我没有想到这一点。我不得不清空包含图纸的数组并调用 [self setNeedsDisplay] 方法。

# html - Facebook 喜欢工作然后不再

> ID：11085348
> 
> 赞同：0
> 
> 时间：2012-06-18T14:50:07.367
> 
> 标签：html, facebook, facebook-graph-api, facebook-like

好的，我已经检查了与此类似的所有其他帖子，但没有一个是真正相同的。

我的网站上有一个赞按钮。该页面是通过传递给名为“page”的页面的参数动态创建的

在这里找到；

[http://dev.crosbylakeside.co.uk/watersports/index.php?page=watersports](http://dev.crosbylakeside.co.uk/watersports/index.php?page=watersports)

现在在本节的主页上，“赞”按钮效果很好。但是它根本不适用于任何其他部分！

奇怪的是它本质上是同一页。如果您检查我的源代码标头信息，它总是正确的。facebook og 数据也是动态的以模拟页面更改并且工作正常。

如果您转到开发错误页面并输入我网站的网址，则一切正常。

我已经尝试了一切，但我似乎无法让它去。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:10:15.183

看起来是一个缓存问题

# iframe - 下拉列表无法在 fancybox 中正确显示

> ID：11085349
> 
> 赞同：1
> 
> 时间：2012-06-18T14:50:08.357
> 
> 标签：iframe, drop-down-menu, fancybox

我在网站中使用 jquery fancybox 插件向用户显示国家选择选项。所以，我的fancybox 页面上有一个下拉菜单，显示国家用户可以选择的列表和按钮“Go”，它关闭fancybox 并重新加载父窗口。另外，我正在用 's 替换正常的下拉`<select>`标签以`<div>`在下拉按钮上添加样式。这是使用自定义 jscript 完成的，类似于以下[下拉样式中的说明](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

要调用此下拉页面，我正在使用

```
 $('a.fancy').fancybox({
    'type': 'iframe',
    'scrolling': "no", 
    'width': 395, 
    'height': 123, 
    'overlayOpacity': 0.62,
    'onClosed': function () {
        parent.location.reload(true);
        ; // <---i guess you don't need this (JFK)
     }
    }); 
```

如果我将类型更改为“ `ajax`”，我在页面上的下拉菜单显示所有值都很好。但是当我将类型用作“ `iframe`”时，我的下拉列表值不会显示在页面之外并被 iframe 窗口大小截断（即前两个值是可见的，其余的值不会显示在 iframe 窗口大小之外）

任何人都可以建议当我将类型从 更改为 时它造成的差异是`ajax`什么`iframe`？

谢谢！！雅提什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:34:34.170

请访问此处的代码：http: [//jsfiddle.net/ff2P9/](http://jsfiddle.net/ff2P9/)

告诉我这是否是你想要的效果。

基本上，当您`**type: iframe**`与 结合使用时`**scrolling: no**`，iframe 边框之外的任何内容都会被**剪裁**[*从视图中隐藏*]。因此，如果您需要查看 [in an iframe] 的其余内容，您需要将*滚动*选项设置为“ **yes** ”或“ **auto** ”。

## 片段：

```
$(document).ready(function() {

    $('a.fancy').fancybox({
        'type': 'iframe',
        'scrolling': "auto", 
        'width': 395, 
        'height': 323, 
        'overlayOpacity': 0.62,
        'onClosed': function () {
            parent.location.reload(true);
            ; // <---i guess you don't need this (JFK)
         }
    });
    return false;
}); 
```

--

再次，请在此处查看 fancybox：http: [//jsfiddle.net/ff2P9/](http://jsfiddle.net/ff2P9/)

# javascript - 自执行函数

> ID：11085355
> 
> 赞同：11
> 
> 时间：2012-06-18T14:50:27.733
> 
> 标签：javascript

> **可能重复：**
> [(function(){})(); 之间的区别 和函数（）{}（）；](https://stackoverflow.com/questions/423228/difference-between-function-and-function)

我试图更好地理解 JavaScript 的一些特性。其中`The Definitive JavaScript`说自执行函数应该有括号，如下所示：

```
var obj = (function() {
    var value = 0;

    return {
        increment: function(inc) {
            value += typeof inc === "number" ? inc : 1;
        },
        getValue: function() {
            return value;
        }
    }
})(); 
```

但是在`JavaScript - The Good Parts`这个例子的来源中，它具有上述自动执行功能，没有括号，如下所示：

```
var obj = function() {
    var value = 0;

    return {
        increment: function(inc) {
            value += typeof inc === "number" ? inc : 1;
        },
        getValue: function() {
            return value;
        }
    }
}(); 
```

这两个示例都对我有用，但我想问一下我应该注意的功能上是否有任何差异。我希望这不是太琐碎。我只是想确定一下。

非常感谢。

**编辑：**

正如 Rob W 所指出的，关于这个主题还有另一个线索。[这是一篇关于这个问题的优秀博客，](http://peter.michaux.ca/articles/an-important-pair-of-parens)与另一篇文章相关联。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T14:53:29.733

在这种情况下没有任何区别，*只是*因为它的前缀是：

```
var obj = ... 
```

没有它，只有第一个版本是正确的，因为您需要额外的括号来允许解释器正确地将 解析`function`为函数*表达式*而不是函数*声明*。

当然，`var obj`如果您只希望函数运行（即您希望它的副作用）但它要么不返回任何值，要么您不关心它的返回值是什么，您当然会省略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:56:58.550

JavaScript: The Good Parts 由 Doug Crockford 编写，他将示例更新为如下所示：

```
var obj = (function() {
    var value = 0;

    return {
        increment: function(inc) {
            value += typeof inc === "number" ? inc : 1;
        },
        getValue: function() {
            return value;
        }
    };
}()); 
```

所以整个表达式都在括号内。

不需要的外部括号的想法是，它使开发人员清楚地知道这是一个有意的自我执行的功能。所以价值是可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:51:59.517

在这个例子中，没有任何功能差异，但我确实认为括号使它更具可读性。你怎么知道它是如何在没有括号的情况下确定范围的？是吊起来的吗？[这是一个关于这个主题的精彩线程](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)。

**在旁边：**

JSLint 会抱怨“函数语句不可调用。将整个函数调用包装在括号中。” 我认为大多数不在严格模式下运行的浏览器解析器通常会让它通过，但最好不要依赖它。

# cakephp-2.0 - 导出为 Excel 电子表格的 CakePHP 2.x 助手类

> ID：11085362
> 
> 赞同：0
> 
> 时间：2012-06-18T14:50:38.830
> 
> 标签：cakephp-2.0, export-to-excel

我正在尝试将数据视图导出为 Excel 格式，但找不到适用于 Cake 2.x 的助手

我找到的最接近的是[http://bakery.cakephp.org/articles/wasenbr/2007/04/12/excel-xls-helper](http://bakery.cakephp.org/articles/wasenbr/2007/04/12/excel-xls-helper)但是会抛出这样的错误

```
call_user_func_array() expects parameter 1 to be a valid callback, class 'XlsHelper' does not have a method 'beforeRender' 
```

有没有人有一个可以在较新版本的 Cake 中工作的助手的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:20:32.763

如果您只为出现的所有错误添加空白函数，则帮助程序有效。

# android - 当用户滚动时，ListView 是否期望 setSelection() 中的选定行位于顶部？

> ID：11085371
> 
> 赞同：0
> 
> 时间：2012-06-18T14:51:26.457
> 
> 标签：android, android-listview

我有一个 ListView，它覆盖了另一个视图，我称之为 Header。该标头可以具有各种高度。

在 ListView 的数据集上，我插入一个空白行，并以编程方式将此行的高度设置为我的 Header 视图的高度。这样，当 ListView 加载时，位置 1 处的行（实际的第一行数据）排在标题的底部。我这样做是为了可以将 Header 视图设置为部分透明，并且当用户滚动时，他们会看到数据行与 Header 视图的透明度混合在一起。

现在我有一个用例，我可以导航到此列表并选择给定的行。我所做的是使用位置 X 调用 setSelection。这将自动滚动我的 ListView，以便行 X 的顶部位于列表的顶部。但是，我的 Header 视图仍然掩盖了这一点。为了补偿我调用scrollTo。这两个部分是这样的：

`listView.setSelection(selectedRowPosition);`

`if(hasHeadersEnabled()) { listView.scrollTo(-headerView.getMeasuredHeight). }`

当我调用这些代码行时，我的 ListView 看起来与我预期的一样。所选行的顶部位于我的 HeaderView 的底部。我遇到的问题是，一旦用户触摸 ListView，滚动位置就会跳跃，以便所选行的顶部位于 ListView 的真正顶部（也称为 Header 视图的顶部）。

我的问题是，在 ListView 上 setSelectedRow 后，ListView 在开始使用 onTouch 事件进行滚动时是否总是期望该行的顶部是 ListView 的顶部？有没有另一种方法来完成我希望用这段代码做的事情？我尝试过 scrollTo 和 scrollBy ，两者都具有相同的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:17:53.503

所以我应该更努力地研究 API。找到了我的问题的答案。

我需要使用 setSelectionFromTop 而不是 setSelection 和 scrollTo 的组合。这是示例代码：

`listView.setSelectionFromTop(rowPosition, headerView.getMeasuredHeight());`

# c# - 发现参与 0 个相关“角色”的实体。预计有 1 个“角色”

> ID：11085376
> 
> 赞同：1
> 
> 时间：2012-06-18T14:51:38.223
> 
> 标签：c#, wpf, entities

我有 3 张桌子

```
Roles
------
RoleId(PK)
RoleName
RoleDescription

CustomPermissions
-----------------
PermissionId(PK)
PermissionName
PermissionDescription

RolePermissionMappings
------------------------
RoleId (PK)
PermissionId(PK)
Role_RoleId(FK)
CustomPermission_PermissionId(FK) 
```

我可以单独向 Roles 和 CustomPermissions 表添加值。当我试图映射 RolePermissionMappings 表中的值时，我收到了这个错误。

```
Entities in 'RolePermissionMappingContainer.RolePermissionMappings' 
participate in the 'RoleRolePermissionMapping' relationship. 0 related 'Role' were found. 1 'Role' is expected. 
```

角色有 n 个权限，它们必须像这样在 RolePermissionMappings 表中映射

```
RoleId   PermissionId
------   ------------
  2          2
  2          4
  2          5
  2          8
  2          10 
```

我的代码在这里

```
bool ICustomPermissions.AddPermissionsToRole(RoleDataContract role, List<PermissionDataContract> permissions)
{
    using(_context = new RolePermissionMappingContainer())
    {
        RolePermissionMapping rpm = new RolePermissionMapping();
        {
            rpm.RoleId =  role.RoleId;

            foreach (PermissionDataContract pdc in permissions)
            {
                rpm.PermissionId =  pdc.PermissionId;
                //_context.RolePermissionMappings.AddObject(rpm);
                _context.RolePermissionMappings.AddObject(rpm);
                _context.SaveChanges();
            }
        }
    }
    return true;
} 
```

请纠正我在哪里遇到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T08:55:45.133

`RolePermissionMapping`为每个`PermissionDataContract`in创建一个新实例`permissions`：

```
bool ICustomPermissions.AddPermissionsToRole(RoleDataContract role, List<PermissionDataContract> permissions)
    {
       using(_context = new RolePermissionMappingContainer())
       {

               foreach (PermissionDataContract pdc in permissions)
               {

                   RolePermissionMapping rpm = new RolePermissionMapping()
                   {
                       RoleId = role.RoleId,
                       PermissoinId = pdc.PermissionId
                   }

                   _context.RolePermissionMappings.AddObject(rpm);
                   _context.SaveChanges();
               }
       }
       return true;
    } 
```

# css - 有没有办法只为嵌套无序列表的父元素设置样式？

> ID：11085378
> 
> 赞同：0
> 
> 时间：2012-06-18T14:51:47.160
> 
> 标签：css, css-selectors, html-lists, parent-child

> **可能重复：**
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)
> [“包含 bar 的 foo”的 CSS 选择器？](https://stackoverflow.com/questions/2000582/css-selector-for-foo-that-contains-bar)

我有一组嵌套的无序列表，我希望能够只为`<li>`有子项的父项设置样式。html 看起来像这样：

```
<ul>
    <li>item one</li>
    <li>item two</li>
    <li>item three
        <ul>
            <li>child item</li>
        </ul>
    </li
</ul> 
```

我希望能够添加背景图像，即仅添加到“项目三”。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:56:38.570

我会使用 jQuery 循环遍历 UL 并找到具有 UL 子级的 LI 元素。像这样吗？：

```
<style type="text/css">
    .newClass {
        background: #059;
    }
</style>

<script>

$(document).ready(function() {
    $('#mainUL li').each(function(i) {
        if ($(this).children('ul').length > 0) {
            $(this).addClass('newClass');
        }
    });
});

</script>

<ul id="mainUL">
    <li>item one</li>
    <li>item two</li>
    <li>item three
        <ul>
            <li>child item</li>
        </ul>
    </li>
</ul> 
```

# java - 我将如何聚类一个无序列表的位置？

> ID：11085384
> 
> 赞同：2
> 
> 时间：2012-06-18T14:52:01.480
> 
> 标签：java, location, cluster-analysis

> **可能重复：**
> [映射应用程序的聚类算法](https://stackoverflow.com/questions/73927/clustering-algorithm-for-mapping-application)

我有一个无序的位置列表（包含它们的坐标）。我知道使用Haversine 公式来计算两点之间的距离。但是我看过的集群解决方案说我需要先订购列表。位置的正确顺序是什么？我想对彼此相距 1 米以内的所有位置进行聚类（即将所有位置放入单个 clusteredLocation 对象），如果不先排序，这是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:46:25.517

实际上，我所知道的所有[聚类分析](/questions/tagged/cluster-analysis "显示标记为“聚类分析”的问题")算法都不需要对点进行排序。这在某种程度上会破坏聚类分析的整个目的。但也许您更多地考虑 web2.0 [marker-clusterer](/questions/tagged/marker-clusterer "显示标记为“marker-clusterer”的问题")类型的聚合？

看看 k-means、single-link 和 DBSCAN。维基百科上的所有内容都有很好的描述[，中心文章集群分析](https://en.wikipedia.org/wiki/Cluster_analysis)。这些都不需要订购您的积分。

请注意，Haversine 距离不适用于 k-means 或平均链接聚类，除非您找到一种智能方法来计算最小化方差的均值。如果您有经纬度坐标的 -180/+180 环绕，请不要使用算术平均值。单联动、全联动、DBSCAN、OPTICS 都应该没问题。

# c++ - 无法绑定返回 const char * 的函数

> ID：11085392
> 
> 赞同：0
> 
> 时间：2012-06-18T14:52:20.843
> 
> 标签：c++, boost, boost-python

使用 Boost.Python，我似乎无法绑定任何返回 const char* 示例的函数：

```
class Bar
{
 private:
   int x;
 public:
   Bar():x(0){}
   Bar(int x) : x(x) {}
   int get_x() const { return x; }
   void set_x(int x) { this->x = x; }
   const char *get_str(){return "hello";}
};

BOOST_PYTHON_MODULE(internal_refs)
{
   class_<Bar>("Bar")
      .def("get_x", &Bar::get_x)
      .def("set_x", &Bar::set_x)
      .def("get_str", &Bar::get_str, return_internal_reference<>())
      ;
} 
```

我收到以下错误：

```
/usr/local/include/boost/python/object/make_instance.hpp:27:9: error: no matching function for call to ‘assertion_failed(mpl_::failed************ boost::mpl::or_<boost::is_class<char>, boost::is_union<char>, mpl_::bool_<false>, mpl_::bool_<false>, mpl_::bool_<false> >::************)’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:41:49.630

使用 boost 1.50，我`const char*`无需指定 CallPolicy 即可返回。您收到的编译错误是一个静态断言，表明它`return_internal_reference`旨在用于类或联合类型。在这种情况下，两者都不是。

```
BOOST_PYTHON_MODULE(internal_refs)
{
   class_<Bar>("Bar")
      .def("get_x",   &Bar::get_x)
      .def("set_x",   &Bar::set_x)
      .def("get_str", &Bar::get_str)
      ;
} 
```

```
Python
>>> 从 internal_refs 导入栏
>>> b = 酒吧（）
>>> b.get_str()
'你好'
>>> 类型（b.get_str（））
<类型'str'>
```

# c++ - C ++中的matlab tic toc等价物

> ID：11085393
> 
> 赞同：13
> 
> 时间：2012-06-18T14:52:28.860
> 
> 标签：c++, time, timer

我已经搜索过，但找不到与 matlab tic/toc 函数等效的函数来简单地在控制台上显示程序进行处理所需的时间。（理想情况下，我想将 tic（开始计时器）和 toc（结束计时器）放在程序中的任何位置。

有什么建议么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T06:14:34.267

我找到了我要找的东西。包括：

```
#include <ctime> 
```

然后在开头：

```
 time_t tstart, tend; 
 tstart = time(0); 
```

最后在结束之前：

```
tend = time(0); 
cout << "It took "<< difftime(tend, tstart) <<" second(s)."<< endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T19:57:59.163

您可以查看可能更便携的[boost date_time 模块。](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:59:36.067

如果您在 linux 上，则可以使用该功能

```
 clock_gettime(); 
```

如果在 Windows 上尝试

```
 QueryPerformanceCounter() 
```

您可以搜索这些以获取具体的实施细节。我不知道的其他操作系统。毫无疑问，有许多其他方法可以实现相同的目标，但如果您没有得到其他响应，那么这些是一个合理的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-13T08:31:07.240

通过使用`std::chrono`，您可以编写一个简单的函数，该函数作为 Matlab 的 tic toc 执行：

```
#include <iostream>
#include <chrono>
#include <thread> // sleep_for, for testing only

void tic(int mode=0) {
    static std::chrono::_V2::system_clock::time_point t_start;

    if (mode==0)
        t_start = std::chrono::high_resolution_clock::now();
    else {
        auto t_end = std::chrono::high_resolution_clock::now();
        std::cout << "Elapsed time is " << (t_end-t_start).count()*1E-9 << " seconds\n";
    }
}
void toc() { tic(1); }

int main(int argc, char **argv) 
{
    tic();

    // wait 5 seconds just for testing
    std::chrono::seconds sleep_s(5);
    std::this_thread::sleep_for(sleep_s);

    toc();

    return 0;
} 
```

# c# - 带有形状的自定义控件

> ID：11085394
> 
> 赞同：0
> 
> 时间：2012-06-18T14:52:33.040
> 
> 标签：c#, custom-controls, microsoft-metro

我想创建一个自定义控件以显示饼图。我有一个 PieSlice 类（我从 WinRT 工具包项目中获得）：

```
public class PieSlice : Path
{
    #region StartAngle
    public static readonly DependencyProperty StartAngleProperty =
        DependencyProperty.Register(
            "StartAngle",
            typeof(double),
            typeof(PieSlice),
            new PropertyMetadata(
                0d,
                new PropertyChangedCallback(OnStartAngleChanged)));

    public double StartAngle
    {
        get { return (double)GetValue(StartAngleProperty); }
        set { SetValue(StartAngleProperty, value); }
    }

    private static void OnStartAngleChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var target = (PieSlice)sender;
        var oldStartAngle = (double)e.OldValue;
        var newStartAngle = (double)e.NewValue;
        target.OnStartAngleChanged(oldStartAngle, newStartAngle);
    }

    private void OnStartAngleChanged(double oldStartAngle, double newStartAngle)
    {
        UpdatePath();
    }
    #endregion

    #region EndAngle
    public static readonly DependencyProperty EndAngleProperty =
        DependencyProperty.Register(
            "EndAngle",
            typeof(double),
            typeof(PieSlice),
            new PropertyMetadata(
                0d,
                new PropertyChangedCallback(OnEndAngleChanged)));

    public double EndAngle
    {
        get { return (double)GetValue(EndAngleProperty); }
        set { SetValue(EndAngleProperty, value); }
    }

    private static void OnEndAngleChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var target = (PieSlice)sender;
        var oldEndAngle = (double)e.OldValue;
        var newEndAngle = (double)e.NewValue;
        target.OnEndAngleChanged(oldEndAngle, newEndAngle);
    }

    private void OnEndAngleChanged(double oldEndAngle, double newEndAngle)
    {
        UpdatePath();
    }
    #endregion

    #region Radius
    public static readonly DependencyProperty RadiusProperty =
        DependencyProperty.Register(
            "Radius",
            typeof(double),
            typeof(PieSlice),
            new PropertyMetadata(
                0d,
                new PropertyChangedCallback(OnRadiusChanged)));

    public double Radius
    {
        get { return (double)GetValue(RadiusProperty); }
        set { SetValue(RadiusProperty, value); }
    }

    private static void OnRadiusChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var target = (PieSlice)sender;
        var oldRadius = (double)e.OldValue;
        var newRadius = (double)e.NewValue;
        target.OnRadiusChanged(oldRadius, newRadius);
    }

    private void OnRadiusChanged(double oldRadius, double newRadius)
    {
        this.Width = this.Height = 2 * Radius;
        UpdatePath();
    }
    #endregion

    private void UpdatePath()
    {
        var pathGeometry = new PathGeometry();
        var pathFigure = new PathFigure();
        pathFigure.StartPoint = new Point(Radius, Radius);
        pathFigure.IsClosed = true;

        // Starting Point
        var lineSegment = 
            new LineSegment 
            {
                Point = new Point(
                    Radius + Math.Sin(StartAngle * Math.PI / 180) * Radius,
                    Radius - Math.Cos(StartAngle * Math.PI / 180) * Radius)
            };

        // Arc
        var arcSegment = new ArcSegment();
        arcSegment.IsLargeArc = (EndAngle - StartAngle) >= 180.0;
        arcSegment.Point =
            new Point(
                    Radius + Math.Sin(EndAngle * Math.PI / 180) * Radius,
                    Radius - Math.Cos(EndAngle * Math.PI / 180) * Radius);
        arcSegment.Size = new Size(Radius, Radius);
        arcSegment.SweepDirection = SweepDirection.Clockwise;
        pathFigure.Segments.Add(lineSegment);
        pathFigure.Segments.Add(arcSegment);
        pathGeometry.Figures.Add(pathFigure);
        this.Data = pathGeometry;
        this.InvalidateArrange();
    }
} 
```

现在我正在尝试创建一个可以包含多个饼图的控件

```
public class Pie : Control
{
    #region Items Source
    public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register(
            "ItemsSource",
            typeof(IEnumerable),
            typeof(Pie),
            new PropertyMetadata(
                null,
                new PropertyChangedCallback(OnItemsSourceChanged)));

    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    private static void OnItemsSourceChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var target = (Pie)sender;
        var oldItemsSource = (IEnumerable)e.OldValue;
        var newItemsSource = (IEnumerable)e.NewValue;
        target.OnItemsSourceChanged(oldItemsSource, newItemsSource);
    }

    private void OnItemsSourceChanged(IEnumerable oldItemsSource, IEnumerable newItemsSource)
    {
        UpdatePieSlices();
    }
    #endregion

    public Pie()
    {
        this.DefaultStyleKey = typeof(Pie);
    }

    private void UpdatePieSlices()
    {
        double startAngle = 0;
        foreach (KeyValuePair<string, double> item in ItemsSource)
        {
            PieSlice slice = new PieSlice() 
            { 
                Fill = new SolidColorBrush(Colors.Red), 
                Radius = 100, StartAngle = startAngle, 
                EndAngle = (item.Value / 100.0) * 360 
            };
            startAngle = (item.Value / 100.0) * 360;
        }
    }
} 
```

ItemsSource 是`KeyValuePair<string, int>`代表切片名称和百分比的集合。我想显示切片，但我不知道如何...

编辑 ：

我已经尝试过了，但它不起作用

```
<Style TargetType="control:Pie">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="control:Pie">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">

                        <ItemsControl
                            AutomationProperties.AutomationId="ItemGridView"
                            AutomationProperties.Name="Grouped Items"
                            ItemsSource="{Binding Path=ItemsSource}">

                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <ContentControl Content="{Binding}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Grid></Grid>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:59:48.967

显示是控件默认外观的区域，在 XAML 中定义。

我可能要做的是让控件公开一个`DependencyProperty`表示切片的对象集合。每个对象都将包含足够的信息来正确显示它对应的切片，您的控件代码必须在`ItemsSource`更改时计算这些信息。

然后在 XAML 中，将其绑定到`ItemsControl`具有`DataTemplate`将切片描述对象绑定到实际`PieSlice`对象的 a 以及`ItemsPanelTemplate`可能只是 a`Grid`或 a`Canvas`以允许段彼此堆积的一个。

你正在做的是创建实际的`PieSlice`对象，这没关系，但它们必须以不同的方式显示 - 你可以将它们的集合绑定到用作它的`ItemsControl`，绑定到 each 。`ContentControl``ItemTemplate``Content``PieSlice`

```
<DataTemplate><ContentControl Content="{Binding}" /></DataTemplate> 
```

在这里，有关为 WPF 和 Silverlight 创建自定义控件的信息将为您提供很好的帮助，因为 WinRT 中的基本思想和大部分技术是相同的。

# uisearchbar - UISearchbar如何确定最后输入的字符是否是退格键

> ID：11085395
> 
> 赞同：1
> 
> 时间：2012-06-18T14:52:34.400
> 
> 标签：uisearchbar, uisearchbardelegate

我有一个带有委托方法的 UISearchbar

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
if(searchText.length>3){
 [self updateSearchString:searchText];
}
} 
```

updateSearchString 到 Internet 上获取结果、格式化它们并更新表格视图。如果用户按下退格键，我不希望发生这种情况。所以我在想这样的事情：

```
if(searchText.length>3 && lastCharacterTyped!=backspace){
  } 
```

我如何确定第二部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:00:03.413

虽然我不知道在 Objective-C 中检测退格的特定方法，但最可靠的方法是在输入 lastCharacterTyped 之前和之后检查字符串的长度。如果后者较小，则表示按下了退格键。希望有帮助。

# c - 如何将 _spawnvpe() 与自定义 PATH 值一起使用？

> ID：11085396
> 
> 赞同：1
> 
> 时间：2012-06-18T14:52:37.903
> 
> 标签：c, windows, spawn

我在（http://stackoverflow.com/questions/10969488/why-does-windows-spawn-process-sometimes-trigger-error-status-sxs-assembly-not-f）中问了一个相关问题，但我'恐怕它会被问题的复杂性弄糊涂，所以，这是一个非常简单的版本：

这是调用 _spawnvpe 的示例，手动传递 PATH 值。

它不起作用。它出错并且不会运行记事本。

更改为 _spawnv 或不传递 PATH 值使其工作。但是，_putenv 的文档清楚地说明了 env 值的格式是 KEY=VALUE。

我如何使它工作？

请具体说明，并提供以下代码的差异或完整副本，包括修复。

```
#include <stdio.h>
#include <windows.h>
#include <process.h>
#include <errno.h>

int main(int argc, char *argv[]) {

  char *path_value;
  char buffer[4000];
  const char *env[2];
  const char *args[1];
  char *command;
  int result;
  intptr_t procHandle;

  path_value = getenv("PATH");
  sprintf(buffer, "PATH=%s", path_value);
  env[0] = buffer;
  env[1] = NULL;

  args[0] = NULL;

  int offset = 0;
  while (env[offset] != NULL) {
    printf("env %d: %s\n", offset, env[offset]);
    ++offset;
  }

  offset = 0;
  while (args[offset] != NULL) {
    printf("arg %d: %s\n", offset, args[offset]);
    ++offset;
  }

  command = "C:\\windows\\system32\\notepad.exe";

  procHandle = _spawnvpe(_P_NOWAIT, command, args, NULL);
  if (procHandle == -1) {
    printf("Failed to invoke command: %s\n", strerror(errno));
    exit(1);
  }

  _cwait(&result, procHandle, 0);
  if (result != 0)
    printf("Command exited with error code %d\n", result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:22:11.877

它适用于以下代码（仅显示更改的行）：

```
...
const char *args[2];
...
args[0] = "notepad.exe";
args[1] = NULL;
...
procHandle = _spawnvpe(_P_NOWAIT, command, args, env);
... 
```

Visual Studio 2010、Windows HPC 服务器 2008 R2。

请注意，Windows 搜索程序*和*动态库`PATH`与大多数 Unix 系统不同，后者对可执行文件和库路径具有单独的变量。

# autocomplete - 在 Sublime Text 2 中编写自定义完成

> ID：11085403
> 
> 赞同：12
> 
> 时间：2012-06-18T14:53:06.660
> 
> 标签：autocomplete, sublimetext2, sublimetext, code-snippets

Sublime Text 2 带有许多用于常见习语的内置补全/模板。在 C++ 中，这些包括带有字段的 for 循环等 - 如果我编写`vec`并按下制表符，它将扩展到`std::vector<field> v;`字段是可写字段的位置。其中许多都是以我不喜欢或不提供我想要的东西的风格编写的，而我想要使用的一些东西不存在。有没有办法修改这些内置的“完成”并编写我自己的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T02:01:34.967

您可以通过在 Packages 目录中编辑生成它们的文件来编辑默认文件。只需浏览文件夹到特定语言或检查默认文件夹以找到正确的文件以针对其中一种默认值进行编辑。

`.sublime-snippet`您可以通过转到 Preferences > Browse Packages > User 并创建一个带有扩展名的新文件来创建自定义片段以及修改默认片段。

然后在文件中粘贴以下内容：

```
<snippet>
    <content><![CDATA[Type your snippet here]]></content>
    <!-- Optional: Tab trigger to activate the snippet -->
    <tabTrigger>xyzzy</tabTrigger>
    <!-- Optional: Scope the tab trigger will be active in -->
    <scope>source.python</scope>
    <!-- Optional: Description to show in the menu -->
    <description>My Fancy Snippet</description>
</snippet> 
```

更多信息[在这里](http://sublimetext.info/docs/en/extensibility/snippets.html)。

或者，您可以转到工具 > 新片段，它将在新文件中打开片段模板，然后您可以使用与上述相同的扩展名进行保存和命名。

另一种选择是使用 Gist 包的[这种方式。](http://net.tutsplus.com/tutorials/tools-and-tips/sexy-code-snippet-management-with-gists/)我唯一不喜欢此设置的是它使用代码段创建一个新文件，而不是将其粘贴到光标处的当前文件中。仍然可以在多台计算机上协调您最常用的片段。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T14:58:36.347

我相信您正在寻找自定义*片段*。

转到**Preferences** --> **Browse Packages** --> **C++**并进行所需的任何更改:)

# c++ - c++ - 如何使控件可以从c ++ builder xe2中的其他线程访问？

> ID：11085407
> 
> 赞同：0
> 
> 时间：2012-06-18T14:53:16.143
> 
> 标签：c++, c++builder, c++builder-xe2

我下载了 c++ builder xe2 的试用版，并试图了解如何访问和更改控件属性（示例：从不同的线程更改 TLabel 的文本）。我知道您可以使用以下方法在同一个线程上更改它：

```
Label1->Caption = " Text "; 
```

但我需要做的是从另一个函数中改变它。到目前为止，在我拥有的表单的头文件中：

```
//---------------------------------------------------------------------------

#ifndef Hello_VCLH
#define Hello_VCLH

#define IN
#define INOUT
#define OUT

//---------------------------------------------------------------------------
#include <System.Classes.hpp>
#include <Vcl.Controls.hpp>
#include <Vcl.StdCtrls.hpp>
#include <Vcl.Forms.hpp>
#include <Vcl.ComCtrls.hpp>
//---------------------------------------------------------------------------
class TForm2 : public TForm
{
__published:    // IDE-managed Components
    TLabel *Label1;
    TButton *Button1;
    TProgressBar *ProgressBar1;
private:    // User declarations
public:     // User declarations
    __fastcall TForm2(TComponent* Owner);
};
//---------------------------------------------------------------------------
extern PACKAGE TForm2 *Form2;
//---------------------------------------------------------------------------
#endif 
```

在表单的 .cpp 文件中，我尝试将 TForm2::Label1->Caption = "test"; 但这没有用。我尝试将静态放在控件前面，但是当我这样做时，xe2 声称表单代码是错误的。任何人都知道如何使它可以从除主函数或线程之外的另一个函数或线程访问控件的位置吗？谢谢！

编辑**：

```
//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Hello_VCL.h"
#include <tchar.h>
#include <windows.h>
#include "wimgapi.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm2 *Form2;

//---------------------------------------------------------------------------
__fastcall TForm2::TForm2(TComponent* Owner)
    : TForm(Owner)
{
}

DWORD
WINAPI
SampleCaptureCallback(
    IN      DWORD msgId,    //message ID
    IN      WPARAM param1,   //usually file name
    INOUT   LPARAM param2,   //usually error code
    IN      void  *unused
    )
{
    //First parameter: full file path for if WIM_MSG_PROCESS, message string for others
    TCHAR *message  = (TCHAR *) param1;
    TCHAR *filePath = (TCHAR *) param1;
    DWORD percent   = (DWORD)   param1;

    //Second parameter: message back to caller if WIM_MSG_PROCESS, error code for others
    DWORD errorCode = param2;
    DWORD *msg_back = (DWORD *) param2;
    DWORD seconds = (DWORD) param2;

    switch ( msgId )
    {
        case WIM_MSG_PROGRESS:

            // Prints out the current progress percentage.
            //

            //lbl->Caption="Test";

            Label1->Caption = (String)param1 + " % completed";
            //Label1->Caption = (DWORD)param1;
            //wprintf(L"__________________\n\n| Capture process|\t\t(c) 2012 Andrew Butler\n__________________\n\n%d %% captured. About %i seconds(s) remaining - %i minute(s)", (DWORD)param1, ((INT)seconds / 1000), ((INT)seconds / 60000));

            break;
        case WIM_MSG_PROCESS:

            //This message is sent for each file, capturing to see if callee intends to
            //capture the file or not.
            //
            //If you do not intend to capture this file, then assign FALSE in msg_back
            //and still return WIM_MSG_SUCCESS.
            //Default is TRUE.
            //

            //In this example, print out the file name being applied
            //
            //_tprintf(TEXT("FilePath: %s\n"), filePath);

            break;

        case WIM_MSG_ERROR:

            //This message is sent upon failure error case
            //
            //printf("ERROR: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_RETRY:

            //This message is sent when the file is being reapplied because of
            //network timeout. Retry is done up to five times.
            //
            //printf("RETRY: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_INFO:

            //This message is sent when informational message is available
            //
            //printf("INFO: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_WARNING:

            //This message is sent when warning message is available
            //
            //printf("WARNING: %s [err = %d]\n", message, errorCode);
            break;
    }

    return WIM_MSG_SUCCESS;
}

void
SampleCaptureCleanup ( HANDLE hWim, HANDLE hImg, FARPROC callback )
{
    if (hImg) {
        WIMCloseHandle (hImg);
    }

    if (hWim) {
        WIMCloseHandle (hWim);
    }

    if (callback) {
        WIMUnregisterMessageCallback( NULL, callback );
    }
}

//---------------------------------------------------------------------------

void __fastcall TForm2::Button1Click(TObject *Sender)
{
    //Label1->Caption = "Test";
} 
```

编辑 2 ***：

```
FARPROC callback = (FARPROC) SampleCaptureCallback;

if (WIMRegisterMessageCallback( NULL,
                                callback,
                                NULL ) == INVALID_CALLBACK_VALUE) {
    printf ("Cannot set callback\n");
    return 3;
} 
```

我已经对其进行了编辑以包含 cpp 文件。我想在 SampleCallback 函数中更改 case WIM_MSG_PROGRESS: 下的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:00:02.553

调用的最后一个参数`WIMRegisterMessageCallback`指定了一个自定义用户数据，您可以使用该数据将信息传递给您的回调函数（在其最后一个参数中，当前名为`unused`）。

您可以通过修改注册调用将指向您的`TForm2`对象的指针传递给回调

```
WIMRegisterMessageCallback( NULL, callback, form) 
```

`form`上面提到的指针在哪里。

然后，您可以在回调中使用该用户数据，如下所示：

```
DWORD  WINAPI  SampleCaptureCallback(
  IN      DWORD msgId,
  IN      WPARAM param1,
  INOUT   LPARAM param2,
  IN      PVOID  udata)
{
  TForm2* form = reinterpret_cast<TForm2*>(udata);
  udata->SetLabel1Caption("my text");
  //...
} 
```

`SetLabel1Caption`的以下函数在哪里`TForm2`：

```
void SetLabel1Cation(String str)
{
  WaitForSingleObject(hLabel1Mutex, INFINITE);
  Label1->Caption = str;
  ReleaseMutex(hLabel1Mutex);
} 
```

其中`hLabel1`互斥锁是成员变量`Tform2`

```
HANDLE hLabel1Mutex; 
```

并在`TForm2`的构造函数中初始化为：

```
hLabel1Mutex = CreateMutex (NULL, FALSE, NULL);
if (hLabel1Mutex == NULL)
{
  // failed to create mutex, throw exception
} 
```

*请注意*，此示例仅适用于使用`Label1`. 如果您想同时更新多个控件，您可以使用相同的互斥锁，否则您应该使用自己的互斥锁来保护每个控件。

*注意：*[在](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411.aspx) [这些](http://msdn.microsoft.com/en-us/library/z3x8b09y.aspx) [文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927.aspx)中阅读有关 Win32API 中互斥锁的更多信息作为入门。

**更新**：Remy 指出传统的保护机制（互斥量/信号量）不适用于全线程安全。相反，各个线程需要协同工作并与主线程通信以委托对 UI 控件的访问。

# wcf - 内容类型 text/html；响应消息的charset=utf-8 与绑定的内容类型不匹配

> ID：11085408
> 
> 赞同：1
> 
> 时间：2012-06-18T14:53:18.890
> 
> 标签：wcf

我正在维护一个使用大量 WCF 服务的大型项目，当某些用户登录到该站点时，他们会收到此错误

```
The content type text/html; charset=utf-8 of the response message does not match the content type of the binding (application/soap+xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 1024 bytes of the response were: ' '. 
```

我不知道这可能是什么原因，也不知道在哪里解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:52:02.297

问题是远程 WCF 服务出错，响应类型为 text/html，与成功消息的响应类型不同。仅适用于将来遇到此类问题的任何人。

# javascript - 检测移动到 Mobile Safari 中的新选项卡

> ID：11085409
> 
> 赞同：7
> 
> 时间：2012-06-18T14:53:18.873
> 
> 标签：javascript, iphone, ios, ipad, mobile-safari

我有一系列打开弹出窗口的页面（Mobile Safari 中的新选项卡）。每个弹出窗口都需要知道它们何时成为焦点。在台式机上，我们使用`window.onblur`and`window.onfocus`来驱动这种行为。但是，这些事件都不能在 iPad 上运行。我也尝试过`window.onpageshow`，`window.onpagehide`但似乎也没有在正确的时间开火。我有一个测试 HTML 文件：

```
<html>
<head>
<script language="javascript">
console.log('Hello');
window.onblur = function(e) { console.log('blur'); };
window.onfocus = function(e) { console.log('focus'); };
window.onpagehide = function(e) { console.log('pagehide'); };
window.onpageshow = function(e) { console.log('pageshow'); };
</script>
</head>
<body>
<a href="http://www.google.com" target="_blank">Click Me</a>
</body>
</html> 
```

理论上，当您单击“单击我”时，您应该在新窗口出现时得到一个模糊事件。但这不会发生在 Mobile Safari 上。`onpagehide`也`onpageshow`没有表现出爱，它们只会帮助检测您何时要关闭标签。

如何在 Mobile Safari 中获得我正在寻找的行为？有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T17:39:43.543

试试这个：[https ://gist.github.com/1122546](https://gist.github.com/1122546)

这是一个 Visibilty API polyfill。应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T21:29:05.900

我不认为`onblur`可以检测到，但这是一个检测代码`onfocus`：

```
var timestamp=new Date().getTime();
function checkResume()
{
    var current=new Date().getTime();
    if(current-timestamp>5000)
    {
        var event=document.createEvent("Events");
        event.initEvent("focus",true,true);
        document.dispatchEvent(event);
    }
    timestamp=current;
}
window.setInterval(checkResume,50); 
```

然后你只需写：

```
document.addEventListener("focus",function()
{
    alert("Focus detected");
},false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T07:35:02.377

iOS 5 在无活动选项卡中暂停 JS。也许这个话题可以帮助你。

[当标签不活动时，ios 5暂停javascript](https://stackoverflow.com/questions/7977170/ios-5-pauses-javascript-when-tab-is-not-active)

[使用 Javascript 在 iPad 上处理待机](https://stackoverflow.com/questions/4940657/handling-standby-on-ipad-using-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:48:01.023

最近有人问了同样的问题，所以我将这个答案链接到我的旧[答案](https://stackoverflow.com/questions/12817295/javascript-pauses-on-ipad-when-changing-tab-is-there-a-way-to-know-when-coming/14656831#14656831)。

Mageek 的方法与我正在做的非常相似，但也会在滚动事件或键盘可见时触发。防止滚动时的行为并不是非常具有挑战性，但我从来没有时间查找屏幕上的键盘事件。

我的对象还利用 requestAnimationFrame 并将仅将焦点黑客用作后备，选择在可用的情况下使用 Visibility API（理想情况下使其面向未来）。

# java - 如何将复杂的自定义类打包到 Jasper DataSource 对象中

> ID：11085418
> 
> 赞同：1
> 
> 时间：2012-06-18T14:53:41.747
> 
> 标签：java, spring, spring-mvc, jasper-reports

考虑我有一个自定义类，它希望将每个成员变量的值放在一个 Jasper 报告中

```
public class Manifest {
private IMasterOrder masterOrder;

private Employee supervisor;

private Employee assistant;

private Date arrivalTime;

private Date departureTime;

private IOrder copOrderFit;
} 
```

这里的成员`copOrderFit`是另一个类的类型，`Order`它包含一个字符串列表，我也想放在同一个 Jasper 报告中。

那么在 Java 代码中，`JRDataSource`我想使用哪个实现类来打包清单类，或者对于这个问题有更好的解决方案吗？

先感谢您。

# c# - wm7 SHOUTcast歌曲历史显示

> ID：11085421
> 
> 赞同：0
> 
> 时间：2012-06-18T14:53:45.413
> 
> 标签：c#, windows-phone-7, stream, shoutcast

我想在从网站检索的 textBlock 中显示歌曲列表，但是当我使用 httpwebStreamReader.ReadToEnd() 时，我得到的结果不是从我的计算机资源管理器访问该网站。这是代码：

```
using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
{
            string results = httpwebStreamReader.ReadToEnd();
            Dispatcher.BeginInvoke(() => { textBlock1.Text = results;});
}
//this is the site-> http://5.9.17.81:9996/played.html 
```

这就是我得到的：[图片](http://i50.tinypic.com/2aabuk0.png)

# css - 有没有类似背景边距的东西？

> ID：11085424
> 
> 赞同：0
> 
> 时间：2012-06-18T14:53:49.550
> 
> 标签：css

我习惯于像这样从中间定位 divs X px：

```
#theDiv
{
    position:       absolute;
    top:            50%;
    left:           50%;
    margin-top:     -50px;
    margin-left:    -100px;
} 
```

现在我想归档一些与我的身体背景相似的东西：

```
body
{
    background-position:    50% 50%;
    /*background-margin-top:    -100px from the middle...*/

} 
```

我知道如何通过额外的 div 和使用 z-indexes 来实现这一点，但真的没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:13:49.823

您也许可以使用[less.js](http://lesscss.org)（或 SASS）来计算图像的位置。

*完全未经测试*，但这样的事情可能会奏效：

```
body
{
    background-position: 50%-100px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T15:01:16.443

`background-position: center;`将使背景图像居中，而无需像您这样的任何黑客或变通方法。

# php - 将动态网页下载为静态 html 页面

> ID：11085425
> 
> 赞同：-4
> 
> 时间：2012-06-18T14:53:52.027
> 
> 标签：php, html

我正在用 PHP 开发代码，我必须下载网页中的内容 (http://novosibirsk.e2e4online.ru/shop/catalog/#/category=24) 并将属性值存储到数据库表中，我我正在使用下面的代码下载页面，

```
$html=file_get_contents('http://novosibirsk.e2e4online.ru/shop/catalog/#/category=24'); 
```

此页面包含动态内容。但我需要将网页保存为静态 html 页面。是否有任何 PHP 函数可以将网站下载为静态页面？在任何一种情况下，当我使用谷歌浏览器检查页面上的特定元素时，它都会显示每个元素的静态代码。或者有什么办法可以通过谷歌浏览器下载所有静态内容？我只需要下载后将网页的静态内容存储在变量或文件中。请帮我解决这个问题！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:00:10.683

你想要“网络抓取”。

[http://en.wikipedia.org/wiki/Web_scraping](http://en.wikipedia.org/wiki/Web_scraping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:00:13.660

您必须使用 curl 并发送 POST 请求来获取动态内容。要知道发送了哪些 POST 请求，您可以使用 Google Chrome 的开发者工具并选择选项卡网络。

# modx - 使用 getResources 显示页面内容 - ModX

> ID：11085427
> 
> 赞同：1
> 
> 时间：2012-06-18T14:53:59.530
> 
> 标签：modx

我正在尝试使用在 ModX 中创建常见问题解答页面`getResources`。
在 CMS 中，用户需要创建新页面并将其移动到正确的位置，因此*FAQ*页面将是它的父页面。我不知道如何显示页面内容。

[获取资源文档](http://rtfm.modx.com/display/ADDON/getResources.Category+Index+Page+with+Thumbnails)

以下是常见问题页面内容：

```
[[!getResources? &parents=`25` &showHidden=`1` &limit=`100` &tpl=`FAQs` &sortby=`menuindex` &sortdir=`ASC`]] 
```

这是*常见问题*的块代码：

```
<div class="faq">
<h5>[[+pagetitle]]</h5>
[[+content]]
</div> 
```

通过此代码，我只能将*h5*标记中的页面标题作为列表查看，每个问题下都没有内容。如何显示内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:28:35.593

您所缺少的只是 &includeContent=`1`参数...它在您的示例页面中，但实际文档在这里：[http](http://rtfm.modx.com/display/ADDON/getResources) ://rtfm.modx.com/display/ADDON/getResources另外，如果您仍然遇到问题，请省略&tpl 参数和 getResources 基本上会将其结果直接转储到页面，这对于查看您实际返回的内容非常有用。

# jquery - jQuery 的 .data() 缓存是否在 jQuery mobile 中的页面转换中持续存在？

> ID：11085429
> 
> 赞同：3
> 
> 时间：2012-06-18T14:54:01.793
> 
> 标签：jquery, jquery-mobile, cordova, local-storage

我只是在阅读 jQuery `.data()` [API 参考](http://api.jquery.com/data/)。事先，我推测它可能通过`'data-*'`为页面元素分配属性来工作；有效的捷径`$('#foo').attr('data-foobar', 'bar')`。

**(1)**想象一下它确实像这样工作，虽然它似乎没有，并且您从一个 jQuery Mobile 页面切换到另一个然后再返回，`'data-*'`属性是否仍然附加到元素，或者 jQM 是否有效地从下载的HTML？

然而，在参考资料中，页面上的第一条评论指出：

> 数据不存储在元素上。它实际上存储在`$.cache`- “Alex”

**(2)**这是真的吗？

**(3)**这是否在 jQM 页面转换中持续存在？如果我点击第2页并询问`$('#bar').data('foo')`，`#bar`第1页的div在哪里，会发生什么？

你会说最好使用`.data('*','*')`而不是`.attr('data-*','*')`在 jQM 应用程序的上下文中使用，所有内容都在一个 HTML 文件中，在 Cordova/PhoneGap 之上运行，在这种情况下只能`localStorage`用于额外的应用程序存储？

具体的，是的。有点肛门，是的。

期待你的回答，是的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:28:33.610

如果您使用的多页模板在`data-role="page"`单个文档中有多个元素，那么数据将通过转换保持不变。这是因为所有页面始终在 DOM 中，并且永远不会从 DOM 中删除。

现在，当您通过 AJAX 引入伪页面时，情况就不同了。当您链接到远程页面时，jQuery Mobile 通过 AJAX 抓取该页面，然后将其转换为视图。默认情况下，当您离开该页面时，它将从 DOM 中删除以节省内存。当页面被删除时，它的数据也会被删除。`data-cache="true"`您可以通过在任何外部`data-role="page"`元素上设置属性来停止此行为。

文档：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html)

# c# - EF 代码优先：每种具体类型的表格

> ID：11085431
> 
> 赞同：2
> 
> 时间：2012-06-18T14:54:06.117
> 
> 标签：c#, .net, entity-framework-4, linq-to-entities, entity-framework-4.1

我尝试了以下代码，但出现以下错误，有人知道吗？

错误 3013：从第 17 行开始映射片段时出现问题：缺少表映射：从表 Cities (CountryId) 到表 CountryBase (Id) 的外键约束“CountryBase_Cities1”：未为表 CountryBase 指定映射。\r\n"}

参考链接：[http ://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete -type-tpc-and-choosing-strategy-guidelines.aspx](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.Migrations;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            var db = new Context();
            db.Database.Delete();
            db.Database.Create();
            db.SaveChanges();
            db.Cities.ToList();

        }
    }

    public class Context : DbContext
    {
        public DbSet<CityBase> Cities { get; set; }
        public DbSet<CountryBase> Countries { get; set; }
        public DbSet<Area> Areas { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Entity<CountryBase>()
          .Property(p => p.Id)
          .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

            modelBuilder.Entity<CityBase>()
           .Property(p => p.Id)
           .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

            modelBuilder.Entity<City>().Map(m =>
            {
                m.MapInheritedProperties();
                m.ToTable("Cities");
            });

            modelBuilder.Entity<Country>().Map(m =>
            {
                m.MapInheritedProperties();
                m.ToTable("Countries");
            });

            base.OnModelCreating(modelBuilder);
        }

    }

    public abstract class Entity : IUniqueable
    {
        [Key]
        public virtual int Id { get; set; }

    }

    public  abstract class CityBase :Entity
    {
        public int CountryId { get; set; }
        public string Code { get; set; }
        public bool Active { get; set; }
        public CountryBase Country { get; set; }

    }

    public abstract class CountryBase : Entity
    {

        public string Code { get; set; }
        public bool Active { get; set; }
        public virtual ICollection<CityBase> Cities { get; set; }

    }

    public class City : CityBase
    {
        public int PointX { get; set; }
        public int PointY { get; set; }
        public virtual ICollection<Area> Areas { get; set; }
    }

    public class Country : CountryBase
    {

        public int PointX { get; set; }
        public int PointY { get; set; }

    }

    public class Area:Entity
    {
        public string Name { get; set; }
        public City City { get; set; }
    }

    public interface IUniqueable
    {
        int Id { get; set; }
    }
} 
```

# java - 寻找这些 spring 安全消息名称来自定义它们

> ID：11085433
> 
> 赞同：0
> 
> 时间：2012-06-18T14:54:11.983
> 
> 标签：java, spring, spring-security, ldap

我有一个使用 ldap（绑定验证器）登录的应用程序。我需要找到 SPRING_SECURITY_LAST_EXCEPTION.message 抛出的这些消息的特定键，以便“自定义”它们。我已经使用 完成了“坏凭证” `BindAuthenticator.badCredentials`，只需要剩下的。

1.  空密码
2.  空用户名
3.  未找到具有指定用户名的客户

最后一个很奇怪，会不会是ldap服务器本身抛出的？

我没有得到的另一件事是另一种本地化/语言的标签。除了登录时的错误消息外，我所有的 spring 消息文件都可以在我的应用程序中运行。我有两个属性文件：

1.  spring-security-messages_en_US.properties
2.  spring-security-messages_es_ES.properties

它会从 en_US 属性文件中提取我的所有消息，而不考虑 loc/language。我的 Jsp 上的代码如下：

```
<c:if test="${param.error==true}">
    <div class="error">
         <c:out value="${SPRING_SECURITY_LAST_EXCEPTION.message}"/>
    </div>
</c:if> 
```

不确定我是否必须在`<spring:message>`此处使用标签，否则它不会使用其他属性文件。我尝试使用它，但不确定如何将异常传递给它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:09:18.683

LDAP 客户端应使用从服务器传输的响应中包含的 LDAP 操作代码（整数）。消息文本可以为每个服务器和每个 API 定制。

结果代码是标准化的，并列在[RFC 的结果代码部分](https://www.rfc-editor.org/rfc/rfc4511#appendix-A)。

# c# - 使用自然顺序从文件夹加载文件

> ID：11085434
> 
> 赞同：1
> 
> 时间：2012-06-18T14:54:15.177
> 
> 标签：c#

在一个文件夹中，我有这些文件。windows资源管理器上的顺序是：

*   输入 (1).jpg
*   输入 (2).jpg
*   输入 (101).jpg

这是我从文件夹中获取文件的方式：

```
var files = Directory.GetFiles(inputImage, "*.*", SearchOption.TopDirectoryOnly); 
```

但顺序将是：

*   输入 (1).jpg
*   输入 (101).jpg
*   输入 (2).jpg

即使我尝试过：`Array.Sort(files);`

但是顺序是一样的，我怎样才能用这个顺序加载文件：

*   输入 (1).jpg
*   输入 (2).jpg
*   输入 (101).jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:05:07.140

好吧，我会尝试这样的事情：

```
 var files = from file in directoryInfo.EnumerateFiles()
        .Where(f => f.Extension == ".jpg")
                    orderby ExtractNumber(file.Name) ascending
                    select file.FullName;
        return files.ToList<string>(); 
```

这里我们提取文件号 - 在 ( 和 )- 之间。

```
private static object ExtractNumber(string p)
{
    int lenght = p.IndexOf(')') - p.IndexOf('(');
    return int.Parse(p.Substring(p.IndexOf('('), lenght - 1)); 
} 
```

我很确定必须有一种有效的方法来做到这一点，但只是我的两分钱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:56:43.807

您需要实现自己的比较，以“意识到”它们包含嵌入的非零填充数字的方式比较两个字符串。Explorer 已经包含此逻辑，并且（根据评论）这是公开的`StrCmpLogicalW`，您可以在其中使用[P/Invoke](http://www.pinvoke.net/default.aspx/shlwapi.strcmplogicalw)在自定义`Comparer<string>`实现中调用，您可以将其传递给排序方法。

如果您知道有关名称的所有其他信息（即模式），那么很容易去除固定部分进行比较 - 但`StrCmpLogicalW`会给您一个很好的通用实现。

当然，如果您可以控制创建文件的任何内容，则更简单的方法是将文件名零填充到一些合理的数字，例如 5 或 6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:41:18.030

如果您以简单的方式加载文件：

```
string[] files = Directory.GetFiles ("folder"); 
```

并假设括号中总是有一个数字，您可以使用一个函数：

```
Array.Sort (files, compareFilesWithBrackets); 
```

带比较功能：

```
public static int compareFilesWithBrackets (string arg1, string arg2)
{
        string filename1 = System.IO.Path.GetFileName (arg1); //extract filename from the path of the first file
        string filename2 = System.IO.Path.GetFileName (arg2); // extract second file filename
        Match m = Regex.Match (filename1, "\\(([0-9]+)\\)"); // check if there is (number) for file 1
        int file1 = 0; // if no number leave 0
        if (m.Success) { // else if success parse the number from brackets
            file1 = int.Parse (m.Groups [1].Value); 
        }
        m = Regex.Match (filename2, "\\(([0-9]+)\\)");
        int file2 = 0;
        if (m.Success) {
            file2 = int.Parse (m.Groups [1].Value); 
        }
        return file1 - file2;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T15:00:05.383

请记住，默认情况下，Array.Sort(files) 将文件名排序为文本，而不是数字。尝试解析数字，然后按这些数字排序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T15:03:12.307

您可以使用 OrderBy 扩展，这里有更多详细信息[http://msdn.microsoft.com/en-us/library/bb534966.aspx](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

这是一个简单的 lambda 表达式 t=> t 部分。如果需要，您可以在排序之前进行一些操作。

```
var files = Directory.GetFiles(inputImage, "*.*", SearchOption.TopDirectoryOnly).OrderBy(t => t); 
```

如果您只想对数字进行排序，您可以进行一些巧妙的字符串替换，例如

```
.OrderBy(t => t.Replace("input", "").Replace("(", "").Replace(")","").Trim()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T16:29:04.633

这个[CustomSort](https://stackoverflow.com/a/11052176/932418)可以提供帮助

```
List<string> list = new List<string>()
{
   "input (1).jpg","input (101).jpg", "input (11).jpg", "input (2).jpg"
};

var sortedList = list.CustomSort().ToList(); 
```

输出将是：

```
input (1).jpg
input (2).jpg
input (11).jpg
input (101).jpg 
```

我将这里的代码复制

```
public static class MyExtensions
{
    public static IEnumerable<string> CustomSort(this IEnumerable<string> list)
    {
        int maxLen = list.Select(s => s.Length).Max();

        return list.Select(s => new
        {
            OrgStr = s,
            SortStr = Regex.Replace(s, @"(\d+)|(\D+)", m => m.Value.PadLeft(maxLen, char.IsDigit(m.Value[0]) ? ' ' : '\xffff'))
        })
        .OrderBy(x => x.SortStr)
        .Select(x => x.OrgStr);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-18T14:59:58.427

如果是我，我会创建一个字典对象并将第一个值存储为原始文件名，将第二个值存储为您需要按摩的自定义文件名。

因此，例如，字典对象看起来像这样：

```
input (1).jpg    |  input (001).jpg
input (2).jpg    |  input (002).jpg
input (101).jpg  |  input (101).jpg 
```

然后您可以对第二个字段进行排序，但从字典对象的第一个字段中提取文件名。

# c# - “For 循环”检查 CheckBoxList 的元素

> ID：11085440
> 
> 赞同：1
> 
> 时间：2012-06-18T14:54:54.057
> 
> 标签：c#, asp.net, visual-studio-2008

我究竟做错了什么？我有一个 CheckBoxList，我想一个一个地处理每个元素。我在“cbl.Items.Count”行收到错误提示该元素未使用“new”初始化。非常感谢你！

```
CheckBoxList cbl = (CheckBoxList)FindControl("CBL_categ");
for (int i = 0; i < cbl.Items.Count; i++)
{
    if (cbl.Items[i].Selected)
        catn = cbl.Items[i].Value;
} 
```

编辑：

```
<asp:Content ID="Content4" runat="server" 
    contentplaceholderid="ContentPlaceHolder3">
    <asp:Label ID="statusLabel" runat="server" Text=""> </asp:Label>

    <asp:GridView ID="GridView1"  AutoGenerateColumns="False" runat="server" 
    DataSourceID="SqlDataSource1" Visible="False" >
        ....

    </asp:GridView>

    <br />
    Categories:<asp:CheckBoxList ID="CBL_categ" runat="server" DataTextField="name" DataValueField="name">
    </asp:CheckBoxList>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:09:22.537

造成这种情况的一个常见原因是，如果您要查找的 CheckBoxList 嵌套在某个其他容器中，FindControl 将找不到它，因为它不会递归搜索，而是返回 null。

如果它是嵌套的，最好的性能解决方案是这样的：

```
FindControl("nestingcontrol").FindControl("CBL_categ") 
```

或者，编写一个在每个控件上运行 FindControl 的递归方法，但预计性能会受到影响。

> 参考：
> 
> [http://forums.asp.net/t/1107107.aspx](http://forums.asp.net/t/1107107.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:58:59.840

您需要在那里进行错误检查，因为它可能返回 null。

```
CheckBoxList cbl = (CheckBoxList)FindControl("CBL_categ");

if (cbl != null)
{
        for (int i = 0; i < cbl.Items.Count; i++)
        {
            if (cbl.Items[i].Selected)
            {
                catn = cbl.Items[i].Value;
             }
         }
 } 
```

# c# - Winforms中的事件和WPF中的命令有什么区别？

> ID：11085441
> 
> 赞同：4
> 
> 时间：2012-06-18T14:54:54.577
> 
> 标签：c#, .net, wpf, winforms, events

在 Winforms 中，我们（开发人员）通过事件处理用户交互。在 WPF 中，我们得到了命令。

问题 ：

1.  Winforms中的事件和WPF中的命令有什么区别？我们必须使用哪种方法？什么时候？

2.  Winforms 中的事件和 WPF 中的路由事件有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:01:10.360

1.  由可以序列化的对象表示的命令，可以通过进程传递，无论如何，让我们说它更“灵活”。

2.  路由事件支持[下一个策略 - 直接、冒泡和隧道](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)，也使用路由事件，您可以通过在事件参数中设置适当的标志来指示事件已处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:24:36.877

我强烈建议您从阅读[MSDN 关于 Routed Events 的文章开始](http://msdn.microsoft.com/en-us/library/ms742806.aspx)，但是从我的角度来看，最大的区别在于它们的工作方式

Winforms 允许您将方法分配给事件处理程序，并且每当引发该控件的事件时，该处理程序就会运行。您实际上可以在 WPF 中执行相同的操作，或者您可以使用路由事件。

在Routed Event中，会产生一个事件（如click事件），Visual Tree中的any元素可以在Click事件期间订阅做某事，并且可以将Event标记为已处理或未处理。

例如，假设你有一个`Button`包含一个`Border`和一个`Image`

```
<Button>
    <Border>
        <Image>
    </Border>
</Button> 
```

单击`Image`不会执行`Button.ClickEvent`，而是简单地引发一个通用`Click`事件，该事件由第一个处理`Image`，然后是`Border`，然后是`Button`。该事件实际上会在 VisualTree 中继续向上直到它碰到`Window`对象，除非处理该事件的控件之一将其标记为`Handled`

这种类型的 Routed 事件称为`Bubbling`事件，因为事件在可视树上传播或“冒泡”。另一种事件类型是`Tunneling`，事件沿着 VisualTree 传播，或者`Direct`，只有被点击的对象处理事件。

至于 和 之间的区别`Routed Events`，`Commands`它们提供了两个独立的功能。事件是内置的，并且与处理事件的 UI 对象相关联，而 Command 不以任何方式与 UI 对象相关联，并为启用/禁用控件提供内置支持。

例如，带有`Click`事件的 Button 会将 Button 对象传递给 Click 事件处理程序，而带有`Command`属性集的 Button 将执行不相关的命令并根据具体情况自动启用/禁用按钮`Command.CanExecute()`

我使用 MVVM 设计模式，所以几乎总是使用命令（如果控件不支持该`Command`属性，我使用自定义的[附加命令行为](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)，它可以让我将命令附加到几乎任何 UI 事件），但是我有时仍然使用事件当我想做一些只影响视图而不做任何业务逻辑的事情时。

# c# - 原子列表 - 这个集合线程安全且快速吗？

> ID：11085444
> 
> 赞同：1
> 
> 时间：2012-06-18T14:55:05.410
> 
> 标签：c#, multithreading, collections

我试图找出最好的方法来拥有一个集合，我将能够同时从不同的线程中迭代、添加项目和删除所有项目。性能对于迭代组件至关重要，但不会经常添加和删除项目 - 因此添加/删除性能稍微不那么重要。

这是我想出的：

```
public class AtomicList<T> : IEnumerable<T>
{
    private readonly object Locker = new object();
    private List<T> InternalCollection = new List<T>();

    public void Add(T Value)
    {
        lock (Locker)
        {
            List<T> Update = new List<T>(InternalCollection);
            Update.Add(Value);
            InternalCollection = Update;
        }
    }

    public void Remove(T Value)
    {
        lock (Locker)
        {
            List<T> Update = new List<T>(InternalCollection);
            Update.Remove(Value);
            InternalCollection = Update;
        }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return InternalCollection.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

这样做有什么缺点吗？会不会像我上面描述的那样是线程安全/可迭代的？

另外 - 使用 foreach 和 IEnumerable 是否有任何性能成本？如果我直接访问 InternalCollection 并对其进行 for 语句会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:03:36.903

如果您不同时调用 Add 和 Remove 方法，则不需要`lock`s，因为您只是从该`InternalCollection`字段引用的列表中读取。使用[Interlocked.Exchange 方法](http://msdn.microsoft.com/en-us/library/bb337971.aspx)以线程安全的方式将旧列表替换为新列表：

```
public class AtomicList<T> : IEnumerable<T>
{
    private List<T> internalCollection = new List<T>();

    public void Add(T vlue)
    {
        List<T> update = new List<T>(internalCollection);
        update.Add(value);
        Interlocked.Exchange(ref internalCollection, update);
    }

    public bool Remove(T value)
    {
        List<T> update = new List<T>(internalCollection);
        bool removed = update.Remove(value);
        if (removed) Interlocked.Exchange(ref internalCollection, update);
        return removed;
    }

    public IEnumerator<T> GetEnumerator()
    {
        ... 
```

# c# - WPF 中 TabControl 的 SelectionChangedEventHandler

> ID：11085445
> 
> 赞同：0
> 
> 时间：2012-06-18T14:55:05.723
> 
> 标签：c#, wpf

我是 WPF 新手，在创建用于更改 TabControl 中的选项卡的事件处理程序时遇到问题。简而言之，我不明白如何找到与事件关联的先前选择的 TabItem 的索引和新选择的 TabItem 的索引。

这是我到目前为止尝试过的代码：

```
private void primaryFilterChanged(object sender, SelectionChangedEventArgs e) {
    if (e.Source is TabControl && IsLoaded) {
            int previous_index = (e.RemovedItems[0] as TabItem).TabIndex;
            int current_index = (e.AddedItems[0] as TabItem).TabIndex;
    ...
    }
} 
```

但我现在意识到“TabIndex”并不是指我认为它所做的，而是指使用 Tab 键时获得的焦点项目的顺序。

我知道我可以`tabcontrol.SelectedIndex`用来获取新索引，但我也需要前一个索引来获取其他功能。非常感谢！

编辑：我使用的解决方法是创建我自己的“selectedTab”整数，它在事件处理程序的末尾更新，但我正在寻找比这更优雅的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:06:00.653

你可以得到像这样的旧索引：

```
var tabControl = e.Source as TabControl;
var oldTabItem = e.RemovedItems[0] as TabItem;
var oldIndex = tabControl.Items.IndexOf(oldTabItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:11:44.063

TabCOntrol 是 WPF 从 [Selector](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.aspx)继承的，因此您只需将其连接到[SelectionChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件处理程序，它就会有一个 AdditionalItems/RemovedItems 列表。这些将有你想要的

例如假设你有这个

```
<TabControl SelectionChanged="TabSelectionChanged" SelectionMode="Single">
....
....
....
....
</TabControl> 
```

当你有这样的代码时

```
void TabSelectionChanged(object sender, SelectionChangedEventArgs args)
{
    var removedItems = args.RemovedItems;
    var addedItems = args.AddedItems;
} 
```

# jquery - 将变量从jquery传递到c#中的代码后出错

> ID：11085446
> 
> 赞同：0
> 
> 时间：2012-06-18T14:55:05.820
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我尝试将变量从 jquery 传递给代码 c#，但出了点问题。我在js中有这段代码：

```
<script type="text/javascript">
    var mySerial = '12345';
    var fooUrl = '@Url.Action("Foo", "Home")';
    window.location.href = fooUrl + '?mySerial' + encodeURIComponent(mySerial);
</script> 
```

在控制器中：

```
[HttpPost]
public ActionResult Foo(string mySerial)
{
    return View();
} 
```

执行后我保留这个网址：`http://localhost:2214/@Url.Action("Foo",%20"Home")?mySerial12345`我不明白问题出在哪里，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:55:48.783

您忘记了等号：

```
window.location.href = fooUrl + '?mySerial=' + encodeURIComponent(mySerial); 
```

注意`mySerial=`而不是`mySerial`.

`@Url.Action`顺便说一句，您似乎使用的是 WebForms 视图引擎而不是 Razor，如果您在生成的输出中看到文字，至少这是我得出的结论。如果是这种情况，请根据您使用的视图引擎使用正确的语法：

```
<script type="text/javascript">
    var mySerial = '12345';
    var fooUrl = '<%= Url.Action("Foo", "Home") %>';
    window.location.href = fooUrl + '?mySerial=' + encodeURIComponent(mySerial);
</script> 
```

最后说明：如果这是在单独的 javascript 文件中，则不能使用服务器端帮助程序，例如`Url.Action`. 它似乎不在单独的文件中，因为我可以看到`<script>`内联标记，但这就是您在此处显示的内容，也许在您的实际代码中它位于单独的文件中。

# javascript - 谷歌地图API，无法清除以前的路线

> ID：11085453
> 
> 赞同：1
> 
> 时间：2012-06-18T14:55:29.593
> 
> 标签：javascript, jquery, google-maps

下面是我用来从给定点生成路线的函数。我有几个地方可以让用户请求方向......如果用户第二次请求方向，那么第一条路线仍然显示在地图上，显然这看起来不太好。我怎样才能删除它？

```
base.getRoute = function(start, la, lo) {

        var directionsService = new google.maps.DirectionsService();

        directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(base.map);
        directionsDisplay.setPanel(document.getElementById("drivingDirectionsPanel"));

        start+=",uk";
        var end = new google.maps.LatLng(la, lo);
        var request = {
                origin: start,
                destination: end,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
        };

        directionsService.route(request, function(response,status) {
            if(status == google.maps.DirectionsStatus.OK) {

                $('#drivingDirectionsPanel').html('');
                directionsDisplay.setDirections(response);

                $('html, body').animate({ 
                      scrollTop: $('#drivingDirectionsPanel').offset().top 
                  }, 1500);

            } else {
                alert("There was a problem finding directions");
            }
        });         
    }; 
```

我试过添加一个

```
directionsDisplay.setMap(null); 
```

但这不起作用。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:03:13.537

使方向显示“类”或全局变量，以便在呈现方向响应时清除面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:04:52.253

我是这样做的：

```
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
$.extend(map,{
    pv: {
        markerArray: [],
        areaCircle: null,
        userLocation: {
            latitude: 38.68551,
            longitude: -98.789062
        },
        removeAllMarkers: function(){
            for (var i = 0; i < this.markerArray.length; i++) {
                if (this.markerArray[i].directions) this.markerArray[i].directions.setMap(null);
                this.markerArray[i].setMap(null);
            }
        },
        removeAllDirections: function(){
            for (var i = 0; i < this.markerArray.length; i++) {
                if (this.markerArray[i].directions) this.markerArray[i].directions.setMap(null);
            }
        },
        geocoder: new google.maps.Geocoder(),
        directions: new google.maps.DirectionsService(),
        directionPanel: document.getElementById('directions'),
        center: null
    }
}); 
```

现在，每当我添加一个标记时，我都会在 markerArray 内添加对它的引用，然后当我想删除所有方向或所有标记时，我只需调用`map.pv.removeAllDirections()`或`map.pv.removeAllMarkers()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T11:01:09.517

```
directionsDisplay.setMap(null);
map.setZoom(8);
map.setCenter(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-01T19:22:06.530

我使用上面建议的解决方案的组合来解决这个问题。因此，“directionsDisplay”需要是全局的，然后需要在您再次创建方向显示之前调用方向显示.setMap(null)，它将从地图中清除先前的路线。

这是代码：

```
 if(directionsDisplay != undefined) 
        directionsDisplay.setMap(null);

    directionsService = new google.maps.DirectionsService();
    directionsDisplay = new google.maps.DirectionsRenderer({preserveViewport:true});
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('dvDirResults'));

    directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            $('#<%= lblGetDirError.ClientID %>').hide();
            $('#dvDirResults').html("");
            directionsDisplay.setDirections(response);
            map.panToBounds(response.routes[0].bounds);
            map.setCenter(response.routes[0].bounds.getCenter()); 
            //map.fitBounds(response.routes[0].bounds);
            if(map.getZoom() < 10) map.setZoom(10);
        }
        else
            $('#<%= lblGetDirError.ClientID  %>').show();
    }); 
```

# excel - 如何从电子表格上的按钮调用用户表单？

> ID：11085454
> 
> 赞同：4
> 
> 时间：2012-06-18T14:55:32.027
> 
> 标签：excel, vba

我在用户表单“模块”中有我的初始化函数，但是当我分配一个要从我的按钮调用的函数时，excel 不显示用户表单“模块”函数可用。

如何在按下电子表格中的按钮时显示我的用户表单？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T18:33:47.153

双击您创建的按钮，然后在显示的代码中调用您的宏

```
Private Sub CommandButton1_Click()
UserForm1.Show
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:37:06.787

您需要将代码剪切/粘贴到工作表宏中： 1\. 选择并剪切宏 2\. 双击 sheet1（Microsoft Excel 对象） 3\. 粘贴 4\. 保存 现在您可以运行宏

编辑：如果我没记错的话，模块是为 OnAction 保留的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-21T06:27:33.777

如果您想在不转到 VBE 的情况下轻松调用工作表上的表单，您可以简单地创建一个宏（不使用`PrivateSub`）：

```
Sub CommandButton_Click ()
UserForm1.Show
End Sub 
```

# iphone - 在 iOS 上的 UIWebView 中观看 Vimeo 视频

> ID：11085455
> 
> 赞同：1
> 
> 时间：2012-06-18T14:55:35.240
> 
> 标签：iphone, ios, video, uiwebview, vimeo

我有一个带有 UIWebView 的应用程序，我试图在其中查看 Vimeo 视频。如果我将其硬链接到 www.vimeo.com，则 vimeo 主页和视频列表会加载，但是，单击时只会播放声音。如果我跳进移动 safari 并访问 www.vimeo.com，一切看起来都一样，但视频在这里以全屏模式播放。我试图让我的 UIWebView 以同样的方式行事。我错过了什么？我已经在多个设备和 iOS 版本上进行了检查，结果都相同。

谢谢

更新：它实际上以全屏方式加载视图后面的视频。有什么办法可以访问该全屏视频视图并将其带到前面？

这是加载它的一些代码。不过没什么特别的。导航控制器上大约有 3 个视图。

```
urlString =[NSMutableString stringWithFormat:@"http://www.youtube.com"]
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[[self webView]setDelegate:self];
[webView loadRequest:requestObj]; 
```

**更新修复**

我发现如果我在推送新的视图控制器之前添加 self.view.window.rootviewcontroller.view 作为现有视图的子视图，一切都很好。谢谢，埃里克的帮助

```
[self.view addSubview:self.view.window.rootViewController.view];
[myNavController pushViewController:urlView animated:YES];
[urlView release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:11:34.860

我遇到了类似的问题，发现全屏视频作为视图添加到窗口的 rootViewController，而不是包含 UIWebView 的视图控制器。设置 window.rootViewController 后，视频按预期在 UIWebView 顶部打开。

# c# - 如何使用 XPATH 解析元素的所有子元素

> ID：11085458
> 
> 赞同：0
> 
> 时间：2012-06-18T14:55:42.097
> 
> 标签：c#, xpath

我正在用 XPATH 解析一个 xml 文件

```
nodes = navigator.Select("/bk:ChaosPlan/bk:SubscriptionInfo",manager);
while (nodes.MoveNext())
        {
            XPathNavigator childNodes = nodes.Current.Clone();
            childNodes.MoveToFirstAttribute();
            string name = childNodes.Value;
            bool x = true;
            x= childNodes.MoveToFirstChild();
            string Id = childNodes.Value;
            subNamenAndId.Add(new Result(name, Id));
            childNodes.MoveToNext();
            certName = childNodes.Value;
            childNodes.MoveToNext();
            templateName = childNodes.Value; 
```

}

但是当我移动到第一个孩子时（在 bool x=true; 行之后）它返回 false 并且没有移动到第一个孩子。

我需要做的是在运行查询后获取第一个元素的属性，然后遍历该元素的前 3 个子元素并存储这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:10:14.343

当您的 XPathNavigator 位于属性上时，首先调用[http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.movetoparent.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.movetoparent.aspx)以便能够移动到子节点。

# wpf - WPF 将数据绑定到 ListBox 多列

> ID：11085463
> 
> 赞同：0
> 
> 时间：2012-06-18T14:55:50.490
> 
> 标签：wpf, data-binding, mvvm, listbox

//你好！我需要将我的数据放入包含多个列的列表框中我看到了这个链接[stackoverflow.com...](https://stackoverflow.com/questions/5220502/wpf-bind-list-to-multi-column-listbox)但它谈到了每一件事而没有提到我可以将项目添加到列中的方式你能解释一下如何将数据项添加到列，非常感谢。我成功地做了以下事情

```
<ListView.View>
     <GridView>
         <GridView.Columns>
              <GridViewColumn Header="1" Width="100" DisplayMemberBinding="{Binding Path=Field1}" />
              <GridViewColumn Header="2" Width="100" DisplayMemberBinding="{Binding Path=Field2}" />
              <GridViewColumn Header="3" Width="100" DisplayMemberBinding="{Binding Path=Field3}" />
         </GridView.Columns>
     </GridView>
</ListView.View>`

 public sealed class MyListBoxItem
    {
        public string Field1 { get; set; }
        public string Field2 { get; set; }
        public string Field3 { get; set; }
    }
    public sealed class MyViewModel
    {
        public ObservableCollection<MyListBoxItem> Items { get; private set; }
        public MyViewModel()
        {
            Items = new ObservableCollection<MyListBoxItem>();
            Items.Add(new MyListBoxItem { Field1 = "One", Field2 = "Two", Field3 = "Three" });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:19:49.310

您需要在 Window1.xaml.cs 类的构造函数中设置包含控件`DataContext`的（例如 Window1）的属性，如下所示：`Window``ListBox`

```
public Window1()
{
    MyViewModel vm = new MyViewModel();

    this.DataContext = vm;
} 
```

下一步是将`ItemsSource`ListBox 控件（内部`XAML`）的`Items`属性设置为您在 ViewModel 类中提供的属性：

```
<ListBox ItemsSource="{Binding Path=Items}">
    <!--Other XAML-->
</ListBox> 
```

此外，您还应该`INotifyPropertyChanged`为您的`MyListBoxItem`类实现接口，该接口[在 MSDN](http://msdn.microsoft.com/en-us/library/ms743695.aspx)中进行了说明。这是因为`MVVM`在您的 WPF 应用程序中实现模式。要求您实现更改通知`oneway`或`twoway`数据绑定才能工作（请参阅此以了解有关[DataBinding](http://msdn.microsoft.com/en-us/library/ms752347.aspx)的更多信息）。

[这是MSDN 上对 MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的更详细解释。

# html - GM Userscript 使用 HTML5 replaceState() 更改域名

> ID：11085464
> 
> 赞同：1
> 
> 时间：2012-06-18T14:55:54.397
> 
> 标签：html, greasemonkey, same-origin-policy, pushstate

我正在为一个有两个域的站点编写一个 Greasemonkey 用户脚本。让我们说`http://friendlyurl.com`和`http://ugly.url.com`。`http://friendlyurl.com/*`重定向到`http://ugly.url.com/*`. 我想在用户脚本中包含的功能之一是使用 HTML5 将丑陋的 URL 重写为友好的 URL `replaceState()`。

我的代码是：

```
(function() {
    if (history.replaceState) {
        var url = document.location.href.replace('ugly.url.com/', 'friendlyurl.com/');
        history.replaceState({}, document.title, url);
    }
})(); 
```

直到我意识到这违反了同源政策。我的问题是：是否有一种解决方法来切换站点的域，可能使用 GM_* API？显然，由于这是一个用户脚本，因此安全问题的规模要小得多。我目前的猜测是这是不可能的，但我想我会把问题放在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:58:38.750

[`history.replaceState`](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_replaceState%28%29.C2.A0method)出于安全原因，不能用于更改域。甚至没有通过 GM API。

[请参阅HTML 标准中有关 replaceState()](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-history-replacestate)规则的更多详细信息。

# gwt - 在 gwt 中，如何导出 ArrayList 并提示用户下载的保存对话框？

> ID：11085469
> 
> 赞同：0
> 
> 时间：2012-06-18T14:56:10.740
> 
> 标签：gwt, servlets, export

我尝试使用 GWT-RPC 调用 servlet 来导出数据，为了简化案例，我只是尝试先对输出文本进行硬编码，在 RemoteServiceServlet 中使用以下代码

```
public void exportHistory(ArrayList<String> sqlHistory){
    this.sqlHistory = sqlHistory;
    try {
        HttpServletResponse res = this.getThreadLocalResponse();
        res.setContentType("text/plain");
        res.setHeader("Content-disposition", "attachment; filename=history.txt");
        ServletOutputStream out = res.getOutputStream();
        out.println("test1");
        out.println("test2");
        out.flush();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

但是它在asyncCallback中返回onFailure(Throwable catch)，捕获的是InvocationException。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:34:24.407

尝试使用`json`对象来传递您的列表。

# php - 我可以在 PHP 中声明一个像 $(variable name) 这样的变量名吗？

> ID：11085474
> 
> 赞同：2
> 
> 时间：2012-06-18T14:56:29.330
> 
> 标签：php, mysql, variables, variable-declaration

我想获取 mysql 函数 mysql_field_name() 的结果字符串（字段名称）并将其声明为变量，以便稍后在我的程序中使用它。
例如，像这样：

```
$(mysql_field_name($result,2)) = 2; 
```

在这里，我可以像这样使用这个语句：`$(mysql_field_name($result,2));`
它是一个正确的变量声明吗？
它会起作用吗，它会声明一个以字段名作为变量名的变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:59:38.343

```
${mysql_field_name($result,2)} = 2 
```

[http://codepad.org/NRok2Cha](http://codepad.org/NRok2Cha)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:58:35.397

这就是你如何在 PHP 中做你想做的事：

```
$varname = mysql_field_name($result, 2);
$$varname = 2; 
```

PHP 手册中的更多信息：[变量变量](http://us.php.net/manual/en/language.variables.variable.php)

# android - 方向更改后片段无法正常工作

> ID：11085476
> 
> 赞同：14
> 
> 时间：2012-06-18T14:56:36.037
> 
> 标签：android, android-fragments

我遇到了`Fragments`方向变化的问题。

我有一个应用程序，它有一个通过选项卡式操作栏`MainActivity`处理向上切换的应用程序。`Fragments`这是选项卡式操作栏的代码以及选择选项卡时的代码。

```
private class MyTabListener <T extends android.support.v4.app.Fragment> implements ActionBar.TabListener {
    private android.support.v4.app.Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public MyTabListener(SherlockFragmentActivity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    @Override
    public void onTabSelected(Tab tab, android.support.v4.app.FragmentTransaction ft) {
        if (mFragment == null){ // check to see if the fragment has already been initialised. If not create a new one.
            mFragment = android.support.v4.app.Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content,mFragment,mTag);
        } else {
            ft.attach(mFragment); // if the fragment has been initialised attach it to the current activity
        }
    }

    @Override
    public void onTabUnselected(Tab tab, android.support.v4.app.FragmentTransaction ft) {
        if (mFragment != null){
            ft.detach(mFragment); // when a fragment is no longer needed, detach it from the activity but dont destroy it
        }
    }

    @Override
    public void onTabReselected(Tab tab, android.support.v4.app.FragmentTransaction ft) {

    } 
```

我的看法是，当应用程序首次以纵向模式加载时，一切正常。当我旋转时，由于某种原因，`Fragment1`添加了另一个实例，然后在选择另一个选项卡时不会分离。当我旋转回纵向时也是这种情况。

我已经尝试`setRetainInstance(true);`在我的中使用，`Fragments`但这不起作用。

是否有一种方法我需要`Fragments`在旋转之前覆盖或对我做一些事情？

提前致谢。

**编辑**我现在看到重新创建活动时再次调用 onTabSelected 。这可能是我多次附加片段问题的原因吗？

这是我的活动 onCreate 方法。

```
super.onCreate(savedInstanceState);

        if (savedInstanceState == null) {
           //setContentView(R.layout.main);

        }
     // Create the Action Bar with tabs
        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(false);
        //create the tab for track and add it to the action bar.
        Tab tab = actionBar.newTab()
                            .setText("Track")
                            .setTabListener(new MyTabListener<TrackingFragment>(this,"track",TrackingFragment.class));
        actionBar.addTab(tab);

        //create the tab for ski tracks and add it to the action bar.
        tab = actionBar.newTab()
                        .setText("Something Tracks")
                        .setTabListener(new MyTabListener<TrackListFragment>(this,"somethingtracks",TrackListFragment.class));
        actionBar.addTab(tab);

        //create the tab for photos and add it to the action bar.
        tab = actionBar.newTab()
                        .setText("Photos")
                        .setTabListener(new MyTabListener<PhotoFragment>(this,"photos",PhotoFragment.class));
        actionBar.addTab(tab); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T15:37:12.113

**简短的修复：**

在`onTabSelected`方法中，使用前`if (mFragment == null)`需要尝试获取片段（使用`mFragment = getSupportFragmentManager().findFragmentByTag(mTag)`）。您也可以从外部进行设置，但我看不到您这样做。

检查也可以解决这个问题，但我认为这是一种更好的方法`if(savedInstanceState == null)`！`onCreate`:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T15:05:09.873

听起来您的`onCreate`方法中没有包含在 a 中的内容`if(savedInstanceState == null)`，因此除了从 savedInstanceState 包中恢复的片段之外，您还创建了另一个片段。

**编辑**

更仔细地查看您的代码，我认为我对 onCreate 错误，您的 onTabSelected 应该处理它。我认为你`if (mFragment == null)`总是会出现空值，因为你没有尝试找到片段。将该代码部分更改为：

```
@Override 
public void onTabSelected(Tab tab, android.support.v4.app.FragmentTransaction ft) { 

    mFragment = mActivity.getSupportFragmentManager().findFragmentByTag(mTag);   // add this

    if (mFragment == null){ // check to see if the fragment has already been initialised. If not create a new one. 
        mFragment = android.support.v4.app.Fragment.instantiate(mActivity, mClass.getName()); 
        ft.add(android.R.id.content,mFragment,mTag); 
    } else { 
        ft.attach(mFragment); // if the fragment has been initialised attach it to the current activity 
    } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T19:35:14.760

我发现它实际上被忽略了`setRetainInstance`，所有由.`android.support.v4.app.FragmentManager``onSaveInstanceState``onCreate`

对我来说，解决方案是直截了当地删除多余保存的片段：[https ://stackoverflow.com/a/13996054/341091](https://stackoverflow.com/a/13996054/341091)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-16T22:50:15.640

我或多或少遇到了同样的问题，但上面提出的解决方案似乎不适用于我的情况。最终我找到了以下解决方案：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if (mFragment == null) {
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.replace(android.R.id.content, mFragment, mTag); // Use replace iso add
    }
    else {
        ft.attach(mFragment);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T16:50:51.047

if(savedInstanceState == null) 并不总是有效。有时 savedInstanceState != null 因为横向需要添加另一个片段。

另一种方法是测试 fm.findFragmentById(R.id.frameLayoutLeft) 是否为空，无论方向是什么，如果是，则创建一个新的片段实例，否则什么都不做。如果您需要横向模式下的第二个片段，则需要首先检查它是否为横向，如果是，请检查 fm.findFragmentById(R.id.frameLayoutRight) 是否为空。如果为 null，则创建，否则什么也不做，因为它已经被 Android OS 保留了。

# php - 可以将按字母拼写的数字转换为数字的PHP函数？

> ID：11085484
> 
> 赞同：1
> 
> 时间：2012-06-18T14:56:57.190
> 
> 标签：php, string, numeric

假设我有如下字符串：

```
$ten = 'ten';
$eleven = 'eleven';
$three = 'three'; 
```

等等

是否有一个预先构建的函数可以将这些转换为基于英语的数字字符串？

IE

```
return process_to_number($ten); // returns 10 as a numeric value
return process_to_number($eleven); // returns 11 as numeric
return process_to_number($three); // returns... you guessed it, 3! 
```

我想我也可以手动编写这个（因为我只需要处理 1 到 16 个），但我想我会检查是否已经有这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:07:29.320

没有预构建的，但是有[一段](http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php/)相当不错的代码，您可以尝试对其进行逆向工程？这是一个非常复杂的领域，并且一种算法不适用于所有语言（日语的基数为 10,000 而不是 1,000 - 就像英语 - AFAIK）。

# batch-file - 在 VC++ 中运行批处理文件

> ID：11085487
> 
> 赞同：0
> 
> 时间：2012-06-18T14:57:17.393
> 
> 标签：batch-file, visual-c++, file-io

我想使用批处理文件移动文件，因为我确实使用下面的代码，该过程似乎成功执行，但文件没有被传输。这段代码有什么问题吗？

```
 STARTUPINFO osi;
    PROCESS_INFORMATION pi;
    ZeroMemory( &osi, sizeof(osi) );
    osi.cb = sizeof(capinfo);
    ZeroMemory( &pi, sizeof(pi) );

    wchar_t cmd[8192];
    wchar_t ocmd[8192];
    char ocmd1[8192];
    swprintf_s(ocmd,sizeof(ocmd),L"%s\\%s.bat",capodd->templocation,capodd->wcurrentoutput);
    sprintf_s(ocmd1,sizeof(ocmd1),"%ls\\%s.bat",capodd->templocation,capodd->currentoutput);
    FILE * tempbat = fopen(ocmd1,"w");

    swprintf_s(cmd,8192,L"move %s\\%s.mp4 %s\\%s.mp4",capodd->templocation,capodd->wcurrentoutput,capodd->destination,capodd->wcurrentoutput);
    fprintf(tempbat,"%ls\n",cmd);
    //swprintf_s(cmd,8192,L"move %s\\%s.txt %s\\%s.txt",capodd->templocation,capodd->currentoutput,capodd->destination,capodd->currentoutput);
    //fprintf(tempbat,"%ls\n",cmd);
    //fprintf(tempbat,"del %ls\n",ocmd);
    fclose(tempbat);
    swprintf_s(cmd,sizeof(cmd),L"cmd /c %s",ocmd);
    // just for fun, sleep for twice my latency to make sure the other half of the graph has started
    Sleep(1000 *2); // of course, this means our overlap better be within 2x of the periodicity

    if (!CreateProcess(NULL,cmd,NULL,NULL,FALSE,0,NULL,NULL,&osi,&pi)) {
        fprintf(capodd->c_pF,"couldn't execute copy %d\n",GetLastError());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:36:54.067

您的代码中有 2 个问题：
1-`osi.cb = sizeof(capinfo);`应更改为`osi.cb = sizeof(osi);`
2- 使用`sizeof()`in`swprintf_s`不正确。您应该使用`_countof()`它来代替它，或者`sizeof()`在使用静态数组时可以省略。
我测试了这段代码，没有其他问题。

# web-applications - 如何处理 Web 应用程序中的共享程序集

> ID：11085488
> 
> 赞同：1
> 
> 时间：2012-06-18T14:57:20.043
> 
> 标签：web-applications, assemblies, manifest, shared

我已经阅读了很多关于管理程序集、版本控制系统和清单文件的文章，但仍然没有弄清楚要走的路。

我有一个 Web 应用程序、WCF 服务和一些在 Web 应用程序和服务之间共享的程序集。一切都是用 .Net/C#/ASP.Net（框架 4）编写的，我使用的是 Visual Studio 2010 和 Visual Source Safe（是的，我很惭愧，但这不是我的错……）。

我们目前托管 Web 应用程序及其服务，但计划是客户将能够托管 Web 应用程序或仅使用服务。

我非常希望能获得一些关于如何管理程序集版本和创建清单文件的提示、技巧和窍门。我读到的关于清单文件的示例都是基于应用程序（不是 Web 应用程序）。清单文件真的用于网络吗？有管理版本和网站的工具吗？

# python - OAuth 推特龙卷风蟒

> ID：11085496
> 
> 赞同：0
> 
> 时间：2012-06-18T14:58:10.733
> 
> 标签：python, twitter-oauth

我正在尝试在我的应用程序上集成 twitter 登录，我写了这段代码

```
class AuthTwitterHandler(tornado.web.RequestHandler, tornado.auth.TwitterMixin):
    @tornado.web.asynchronous
    def get(self):
        print 'GET'
        if self.get_argument("oauth_token", None):
            print 'GET OK'
            self.get_authenticated_user(self.async_callback(self._on_auth))
            return
        print 'REDIRECT'
        self.authenticate_redirect()

    @tornado.web.asynchronous
    def _on_auth(self, user):
        print 'ONAUTH'
        if not user:
            print 'Broken'
            raise tornado.web.HTTPError(500, "Twitter auth failed")
            # Save the user using, e.g., set_secure_cookie()
        print 'not Broken'
        self.set_secure_cookie("user", tornado.escape.json_encode(user)) 
```

并且作为我的推特应用程序中的 callback_url 我放置了这个处理程序的相同地址，我的输出是：

```
GET
REDIRECT
GET
GET OK
ONAUTH
Broken 
```

我的日志说：

```
2012-06-18 16:56:09,650 - root - INFO - Logging started
2012-06-18 16:56:09,821 - root - INFO - Server starting on port 443
2012-06-18 16:56:16,170 - root - INFO - 304 GET /auth (127.0.0.1) 0.72ms
2012-06-18 16:56:19,215 - root - INFO - 302 POST /auth (127.0.0.1) 1.35ms
2012-06-18 16:56:19,719 - root - INFO - 302 GET /auth/twitter (127.0.0.1) 429.17ms
2012-06-18 16:56:20,464 - root - WARNING - Missing OAuth request token cookie
2012-06-18 16:56:20,465 - root - WARNING - 500 GET /auth/twitter?oauth_token=Nbed9YQseoNC3YjdFkbOPS5An7OhfewcEgp3oPuq4&oauth_verifier=uGWWoItQ7SXa1Bt8lSDs1N8iVXvBFIcKtCEpZ1mmI4 (127.0.0.1): Twitter auth failed
2012-06-18 16:56:20,465 - root - ERROR - 500 GET /auth/twitter?oauth_token=Nbed9YQseoNC3YjdFkbOPS5An7OhfewcEgp3oPuq4&oauth_verifier=uGWWoItQ7SXa1Bt8lSDs1N8iVXvBFIcKtCEpZ1mmI4 (127.0.0.1) 12.96ms 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:53:13.467

这可能是“ [Missing OAuth request token cookie error using tornado and TwitterMixin](https://stackoverflow.com/questions/6774563/missing-oauth-request-token-cookie-error-using-tornado-and-twittermixin) ”的欺骗，所以三个问题：

1.  您网站的完全限定域名是什么？
2.  如果您使用 HTTPFox 之类的 Web 浏览器插件，或者使用 Wireshark，您返回的确切 cookie 是什么？更准确地说，cookie 与哪个域相关联？
3.  你的 Twitter 应用回调 URL 的完整 URL 是什么？

这不是 Tornado 的错误。我已经成功使用了[完全相同的代码](https://github.com/asimihsan/listpile/blob/master/authauth/src/authauth_view_auth_request_handlers.py)。因此，值得关注您的 Twitter 应用程序的设置、您的网站托管位置以及您返回的确切 cookie。

# iphone - Select Wifi network component like app store one

> ID：11085507
> 
> 赞同：0
> 
> 时间：2012-06-18T14:59:07.453
> 
> 标签：iphone, ios, wifi, iphone-privateapi

i want to add the component of selecting wifi network like in app store application . have you any idea how to integrate it? ![enter image description here](../Images/bf4b03ddbb8c5de413f63c6c11fac127.png) private methods are welcome!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:02:51.587

You can't directly control the popup - it's a system function. However, if you set "Application uses Wi-Fi" to YES in your app's .plist, it will pop up when the user is not connected to the internet.

# ruby-on-rails - 为什么运行测试套件时rspec和capybara无法连接到solr？

> ID：11085510
> 
> 赞同：0
> 
> 时间：2012-06-18T14:59:16.400
> 
> 标签：ruby-on-rails, solr, rspec, capybara, homebrew

我最近不得不重新安装 Homebrew、postgres、我的 RVM ruby​​ 和 gemset 以及我的 rails 应用程序。现在我有很多失败的测试，因为应用程序无法连接到 solr。这是我遇到的错误的示例：

```
 Errno::EADDRNOTAVAIL:        Can't assign requested address - connect(2) 
```

这是失败之一的输出。我在所有人身上都遇到了这个错误： [https ://gist.github.com/da7311560f7b6df6354b](https://gist.github.com/da7311560f7b6df6354b)

似乎问题在于未加载 QtWebKit 库，但我不明白为什么会这样。我尝试从我的自制酒窖中删除 QT 并重新安装它，但没有奏效。

关于问题可能是什么的任何想法？另外，这是我的gemfile：

[https://gist.github.com/640ed0daa704865433b3](https://gist.github.com/640ed0daa704865433b3)

# objective-c - iPhone应用程序中的didReceiveMemoryWarning中的消息

> ID：11085512
> 
> 赞同：1
> 
> 时间：2012-06-18T14:59:20.233
> 
> 标签：objective-c, ios, cocoa-touch

在应用程序收到内存警告之前，是否建议甚至允许添加一条消息以提示用户重新启动应用程序？为什么是，为什么不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:11:02.103

不知道为什么这个问题被否决 - 似乎是一个完全合理的问题。

据我所知，Apple 并不热衷于让用户考虑退出应用程序的想法（或者实际上考虑开发人员需要注意的任何背景内容）——这只是应该发生的。当您开始用尽内存时，您会收到内存警告，并且您有机会对此进行处理，这样用户就不会意识到任何潜在的问题。寻找其他关于如何使用的帖子`viewDidUnload`，可以在内存不足的情况下调用（以及`didReceiveMemoryWarning`）。

当你是 iPhone 开发的新手时，告诉用户你正在退出应用程序，或者它的内存越来越低似乎可以，但总的来说，我必须同意 Apple，大多数人只是不不想知道，只是期望应用程序能够正常工作。

# java - Java：有没有办法在集合中从其克隆中检索原始对象

> ID：11085515
> 
> 赞同：1
> 
> 时间：2012-06-18T14:59:32.163
> 
> 标签：java

我需要在 Set 中从其克隆中检索原始对象。

我想做类似的事情：

```
Set<Object> mySet;
public void myModifyMethod(Object clone){
    if(mySet.contains(clone)){
        Object original = mySet.get(clone); // get method does not seem to exist

        // Modify original object
    }
} 
```

[我在Java SE 6 API](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)中找不到任何方法来做到这一点。我能想到的唯一方法是遍历整个集合，但这根本没有效率（我希望从 HashSet 中实现 O(1)，而不是从顺序搜索中实现 O(n)）。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:06:31.667

我能想到的唯一解决方案是使用`Map`原始对象既是键又是值的地方，然后执行类似`map.get(clone)`获取原始对象的操作。当然你应该已经实现了`hash`和`equals`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:06:49.030

**java sets 上没有 get**方法。

您可以重构并将所有元素添加到 hashmap - Map 具有 get 方法。

但是为什么你需要*在 Set 中从它的 clone 中检索一个原始对象*，因为你已经有了它的一个实例，你正在使用它来检查它是否存在——只要确保你适当地实现了 hashcode 和 equals 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:18:17.910

我有一个类似的问题。我通过使用 Map 实现 Set 接口来解决它。这是我的实现：

```
public final class HandleSet<E> extends AbstractSet<E> {

    private final HashMap<E, E> map;

    public HandleSet() {
        map = new HashMap<E, E>();
    }

    public E get(E o) {
        return map.get(o);
    }

    /* Implementation of Interface Set */

    @Override
    public Iterator<E> iterator() {
        return map.keySet().iterator();
    }

    @Override
    public int size() {
        return map.size();
    }

    @Override
    public boolean isEmpty() {
        return map.isEmpty();
    }

    @Override
    public boolean contains(Object o) {
        return map.containsKey(o);
    }

    @Override
    public boolean add(E o) {
        return map.put(o, o) == null;
    }

    @Override
    public boolean remove(Object o) {
        return o.equals(map.remove(o));
    }

    @Override
    public void clear() {
        map.clear();
    }

} 
```

# grails - Grails：任何类似于 ASP.NET MVC EditorForModel()

> ID：11085517
> 
> 赞同：0
> 
> 时间：2012-06-18T14:59:35.567
> 
> 标签：grails, plugins, view

ASP.NET 为其视图提供了一个称为“EditorForModel()”的漂亮方法，其中检查传入的模型，并为每个属性在页面上放置一个默认控件（例如，字符串的文本框）。这样，对于需要编辑的基本对象，您基本上可以免费获得完整的编辑屏幕。显然，这并不总是您想要的，但有时确实如此，尤其是对于管理员类型的屏幕。

我在 Grails 框架中没有看到类似的东西，但我认为可能有一个插件或我缺少的东西。有没有人听说过这样的事情？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:59:28.387

当您放入`static scaffold = true`控制器类时，您甚至不需要任何视图文件 (gsp) 即可获得模型（域类）的完整编辑屏幕。它对于简单的 CRUD 操作很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:46:11.493

Grails 使用脚手架。[请参阅此处](http://grails.org/doc/latest/guide/scaffolding.html)的文档。基本上是一样的。还是很漂亮的。

# opencv - 在opencv中计算相机的位置和方向

> ID：11085526
> 
> 赞同：7
> 
> 时间：2012-06-18T14:59:56.067
> 
> 标签：opencv

所以想象一下，有一个摄像头正盯着你的电脑屏幕。我要做的是确定相机旋转了多少，离屏幕有多远，以及它相对于屏幕中心的位置。简而言之，旋转和平移矩阵。

我正在使用 opencv 来执行此操作，并按照他们的相机校准示例使用棋盘图案和来自网络摄像头的框架来完成此任务。我想处理任何通用图像，即屏幕帽和网络摄像头的框架。

我尝试使用特征检测算法从两个图像中获取关键点列表，然后将这些关键点与 BFMatcher 匹配，但遇到了问题。具体来说，SIFT 无法正确匹配关键点，并且 SURF 无法在缩放图像上正确找到关键点。

这个问题有更简单的解决方案吗？我觉得这会是人们常做的事情，但在网上没有找到太多的讨论。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:19:50.960

寻找自然平面标记是计算机视觉中的一项常见任务，但在您的情况下，您的屏幕会根据您在屏幕上可视化的内容而有所不同，它可以是您的桌面、浏览器、电影……

所以你不能应用通常的方法进行标记检测，你应该尝试形状识别。一个想法是在屏幕框架的相同尺寸（通过不同比例）的矩形模板上尝试*粒子过滤器，应用第一个边缘检测。*

粒子过滤器将使模板适合框架区域。完成此操作后，您将知道该位置。对于方向，您需要计算单应性，并且您需要在“标记”中为此设置 4 个点，因此您可以应用直接线性变换（cv::findHomography() 为您执行此操作）。所以你的四个点可以是四个角。这只是一个想法，祝​​你好运！

# php - 使用 PHP 根据数据库中的条目数列出页面

> ID：11085528
> 
> 赞同：0
> 
> 时间：2012-06-18T15:00:00.993
> 
> 标签：php, loops

我正在用 PHP 编写代码来获取数据库中的产品数量，并相应地在页面中列出它们。这是我到目前为止的代码：

```
 <?php 
                $numProds=10;
                if($numProds%9 == 0) {
                    $numPages = $numProds/9;
                } elseif ($numProds%9 != 0) { // true
                    $numPages = floor($numProds/9) + 1; // $numPages = 2;
                }
                for ($i = 1; $i < $numPages+1; $i++) {
            ?>
                <li id="page<?php echo $i; ?>">
                    <?php if($numProds <= 9) {
                            for ($i = 1; $i < $numProds+1; $i++) { ?>
                                <div class="product" id="prodId<?php echo $i; ?>">
                                    <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                    <div class="prodInfo">
                                        <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                        <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                    </div>
                                </div>
                    <?php
                            }
                        } else {
                            $numProds-=9;
                            for ($i = 1; $i < 10; $i++) {  ?>
                                <div class="product" id="prodId<?php echo $i; ?>">
                                    <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                    <div class="prodInfo">
                                        <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                        <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                    </div>
                                </div>
                    <?php   }
                        }?>
                </li>
                <?php } ?> 
```

我将测试值设置为 10，我希望每个页面包含 9 个产品。
这意味着我需要 2 页；一页有 9 个产品，另一页只有 1 个产品。
首先，我计算所需的页面数，并创建页面（AKA`li`的）。
其次，在每个页面中，我有两个 if 语句：
1) 如果 numProds 小于或等于 9，则使用循环创建确切数量的产品。
2) 如果 numProds 大于 9（即 10），则创建 9 个产品并从 numProds 中取出 9 个，因此 $numProds 将为 1，这是应该在第二页上创建的唯一产品数。

这段代码的问题是所有页面都包含 9 个产品，而不管 numProds，所以有问题。
我浏览了几次代码，一无所获。

另一个问题是，在每一页中，该`<li id="page<?php echo $i; ?>">`部分再次从 0 开始。
我知道这是因为循环，但我的问题是，有没有办法以某种方式从前一个循环继续`$i`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:17:00.720

您在另一个内部循环中覆盖`$i`来自主`for`循环的...使用另一个变量，例如`$j`。在每个内部循环中，您还开始循环 from `$i = 1`to `$i < 10`- 这就是为什么您在每个页面上有 9 个产品...

试试这个代码：

```
 <?php 
            $numProds = 10;
            if($numProds % 9 == 0) {
                $numPages = $numProds/9;
            } elseif ($numProds%9 != 0) { // true
                $numPages = ceil($numProds/9); // $numPages = 2;
            }
            for ($i = 1; $i <= $numPages; $i++) {
        ?>
            <li id="page<?php echo $i; ?>">
                <?php if($numProds <= 9) {
                        for ($j = 1; $j <= $numProds; $j++) { ?>
                            <div class="product" id="prodId<?php echo $j; ?>">
                                <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                <div class="prodInfo">
                                    <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                    <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                </div>
                            </div>
                <?php
                        }
                    } else {
                        $numProds-=9;
                        for ($j = 1; $j < 10; $j++) {  ?>
                            <div class="product" id="prodId<?php echo $j; ?>">
                                <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                <div class="prodInfo">
                                    <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                    <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                </div>
                            </div>
                <?php   }
                    }?>
            </li>
            <?php } ?> 
```

这应该工作...

但在现实世界中，我想您将在某个数组中返回产品，因此此代码应该更适合您的需求：

```
 <?php 
            $numProds = count($products);
            $numPages = ceil($numProds/9);
            for ($i = 1; $i <= $numPages; $i++) {
        ?>
            <li id="page<?php echo $i; ?>">
                 <?php for ($j = 1; $j <= 9; $j++) {
                     $product = array_shift($products); ?>
                     <div class="product" id="prodId<?php echo $product['id']; ?>">
                          <div class="productImage"><img class="image" src="images/<?php echo $product['image']; ?>" /></div>
                          <div class="prodInfo">
                              <h2><a href="/path/to/products/<?php echo $product['id']; ?>"><?php echo $product['title']; ?></a></h2>
                              <b>Price: <?php echo $product['price']; ?> |</b> <a href="/add/to/cart/?p_id=<?php echo $product['id']; ?>">Add to cart</a>
                          </div>
                      </div>
                <?php } ?>
            </li>
            <?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:11:29.827

我认为，您使这比您需要的要复杂一些；不是每次将 numProds 减少 9，而是在页面之间传递值并将其用作偏移量，以跳过您已经看过的产品。

在结果的第一页上，它将为 0，因此您可以显示前 9 个产品。在第二页上是 9，因此您跳过前 9 个产品并显示下一个 9。在第三页上，它是 18，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:19:17.050

嗯，第一个问题是你在外循环和内循环中都使用了相同的计数器变量。从您当前的代码开发 - 这应该是解决方案，当然可以有一个更短的解决方案。循环内的 ifs 可以完全去掉。但从你的逻辑发展 - 这是解决方案（未经测试）：

```
 <?php 
            $numProds=10;
            if($numProds%9 == 0) {
                $numPages = $numProds/9;
            } elseif ($numProds%9 != 0) { // true
                $numPages = floor($numProds/9) + 1; // $numPages = 2;
            }
            $count = 1;
            for ($i = 1; $i < $numPages+1; $i++) {
        ?>
            <li id="page<?php echo $i; ?>">
                <?php if($numProds <= 9) {
                        for ($j = 1; $j < $numProds+1; $j++) { ?>
                            <div class="product" id="prodId<?php echo $j; ?>">
                                <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                <div class="prodInfo">
                                    <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                    <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                </div>
                            </div>
                <?php
                        }
                    } else {

                        for ($j = $count; $j < ($i-1)*10+10; $j++, $count++) {  ?>
                            <div class="product" id="prodId<?php echo $j; ?>">
                                <div class="productImage"><img class="image" src="images/sampleImg.png" /></div>
                                <div class="prodInfo">
                                    <h2><a href="#">Red Strawberry Keyring blabla bla bla</a></h2>
                                    <b>Price: $2.50 |</b> <a href="#">Add to cart</a>
                                </div>
                            </div>
                <?php   }
                    }
                      $numProds -=  9; ?>
            </li>
            <?php } ?> 
```

# android - 选择什么样的布局？

> ID：11085531
> 
> 赞同：0
> 
> 时间：2012-06-18T15:00:08.703
> 
> 标签：android, android-layout

在布局中，顶行有三个按钮，第二行有一个图像，第三行有三个按钮。现在我应该使用什么布局，以便在不同屏幕尺寸的不同手机中看到布局不会失真？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:09:16.207

您可以选择[相对布局](http://developer.android.com/resources/tutorials/views/hello-relativelayout.html)或嵌套[线性布局](http://developer.android.com/resources/tutorials/views/hello-linearlayout.html)。要支持不同的屏幕尺寸，[请阅读这些课程](http://developer.android.com/training/multiscreen/screensizes.html)。

# ios - 带有核心图形的内阴影

> ID：11085536
> 
> 赞同：3
> 
> 时间：2012-06-18T15:00:20.310
> 
> 标签：ios, cocoa-touch, core-graphics

看到生成的用于绘制内阴影的代码。***除了使用copysign***创建阴影的部分之外，一切都非常清楚和理解。

我了解***copysign***的作用，但为什么以及如何在下面的代码中实际使用它。

***0.1 值对于xOffset***值似乎微不足道。

```
 CGContextRef context = UIGraphicsGetCurrentContext();

  UIColor *shadow = [UIColor redColor];
  CGSize shadowOffset = CGSizeMake(-2, -0);
  CGFloat shadowBlurRadius = 2;

  UIBezierPath *rectanglePath = [UIBezierPath bezierPathWithRect: CGRectMake(50, 50, 50, 50)];
  [[UIColor grayColor] setFill];
  [rectanglePath fill];

  CGRect rectangleBorderRect = CGRectInset([rectanglePath bounds], -shadowBlurRadius, -shadowBlurRadius);
  rectangleBorderRect = CGRectOffset(rectangleBorderRect, -shadowOffset.width, -shadowOffset.height);
  rectangleBorderRect = CGRectInset(CGRectUnion(rectangleBorderRect, [rectanglePath bounds]), -1, -1);

  UIBezierPath *rectangleNegativePath = [UIBezierPath bezierPathWithRect: rectangleBorderRect];
  [rectangleNegativePath appendPath: rectanglePath];
  rectangleNegativePath.usesEvenOddFillRule = YES;

  CGContextSaveGState(context);
  {
    CGFloat xOffset = shadowOffset.width + round(rectangleBorderRect.size.width);
    CGFloat yOffset = shadowOffset.height;
    CGContextSetShadowWithColor(context,
                                CGSizeMake(xOffset + copysign(0.1, xOffset), yOffset + copysign(0.1, yOffset)),
                                shadowBlurRadius,
                                shadow.CGColor);

    [rectanglePath addClip];
    CGAffineTransform transform = CGAffineTransformMakeTranslation(-round(rectangleBorderRect.size.width), 0);
    [rectangleNegativePath applyTransform: transform];
    [[UIColor grayColor] setFill];
    [rectangleNegativePath fill];
  }
  CGContextRestoreGState(context); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-02T08:35:21.563

[PaintCode](http://www.paintcodeapp.com)的开发者在这里。

阴影偏移总是“四舍五入”到整数像素。不幸的是，Core Graphics 中存在某种精度/舍入问题。对于某些阴影偏移值，舍入会以某种方式消失，并且使用了不正确的偏移（例如，2 而不是 3）。

通过策略性地从阴影偏移中添加或减去 0.1，我们强制它始终正确运行。

# c# - 自定义属性获取器的模型绑定错误

> ID：11085538
> 
> 赞同：4
> 
> 时间：2012-06-18T15:00:22.290
> 
> 标签：c#, asp.net-mvc-3

当我尝试使用以下两个属性绑定模型时，在模型绑定期间出现错误：

```
 private IEnumerable<Claimant> _drivers;
    public IEnumerable<Claimant> Drivers
    {
        get
        {
            return _drivers ?? Enumerable.Empty<Claimant>();
        }
        set
        {
            _drivers = value;
        }
    }

    private IEnumerable<Property> _vehicles;
    public IEnumerable<Property> Vehicles
    {
        get
        {
            return _vehicles ?? Enumerable.Empty<Property>();
        }
        set
        {
            _vehicles = value;
        }
    } 
```

错误：

```
System.Reflection.TargetInvocationException was unhandled by user code
  Message=Exception has been thrown by the target of an invocation.
  Source=mscorlib
  StackTrace:
       <snip>
  InnerException: System.NotSupportedException
       Message=Collection is read-only.
       Source=mscorlib
       StackTrace:
            at System.SZArrayHelper.Clear[T]()
            at System.Web.Mvc.DefaultModelBinder.CollectionHelpers
                         .ReplaceCollectionImpl[T](ICollection`1 collection, IEnumerable newContents)
       InnerException: 
```

如果我将属性更改为基本自动属性：

```
 public IEnumerable<Claimant> Drivers { get; set; }
    public IEnumerable<Property> Vehicles { get; set; } 
```

一切正常。

当设置器与自动属性设置器相同时，为什么模型绑定会出现问题？

***编辑***- 阅读[默认模型绑定器源](https://aspnet.codeplex.com/SourceControl/changeset/view/77537#266460)最终会导致您看到这一点，第一行是`Clear()`针对属性调用的，所以当我返回时，`Empty<T>`它显然不起作用。

```
private static void ReplaceCollectionImpl<T>(ICollection<T> collection, IEnumerable newContents) 
{
    collection.Clear();
    if (newContents != null) 
    {
        foreach (object item in newContents) 
        {
            // if the item was not a T, some conversion failed. the error message will be propagated,
            // but in the meanwhile we need to make a placeholder element in the array.
            T castItem = (item is T) ? (T)item : default(T);
            collection.Add(castItem);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:06:52.177

试试这样：

```
get 
{
    return _drivers ?? new List<Claimant>();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T15:22:42.670

IIRC`Enumerable.Empty<T>`是一个静态的只读枚举，用于将一个空的与存储无关的枚举传递给方法。它并不意味着用作空集合的“起点”。这可能就是您收到错误的原因。

选择一种存储机制（例如`List<T>`）并将其用作支持字段的类型。然后你可以初始化它

1.  在类定义中，
2.  在构造函数中，或
3.  首先得到：

例子：

```
private List<Claimant> _drivers = new List<Claimamt>();  // Option 1

public MyModel()
{
    _drivers = new List<Claimant>();   // Option 2
}

public IEnumerable<Claimant> Drivers
{
    get
    {
        return _drivers ?? (_drivers = new List<Claimant>()); // Option 3
    }
    set
    {
        _drivers = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:07:59.133

在自定义 getter 中，我通常会看到用于在返回时设置私有支持字段的空合并运算符 (??)：

```
private IEnumerable<Claimant> _drivers;
public IEnumerable<Claimant> Drivers
{
    get
    {
        return _drivers ?? (_drivers = Enumerable.Empty<Claimant>());
    }
    set
    {
        _drivers = value;
    }
} 
```

您还可以尝试将默认值设置为空数组：

```
(_drivers = new Claimant[]{}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-13T06:50:22.387

找出导致问题的确切属性名称和类型：

```
public class TestBinder: DefaultModelBinder
{
    public override object BindModel(
            ControllerContext controllerContext,
            ModelBindingContext bindingContext)
    {
        Debug.WriteLine(bindingContext.ModelName);
        Debug.WriteLine(bindingContext.ModelType.ToString());

        //HOW TO USE: Look at your Output for the most recently output ModelName and Type to determine where there problem lies

        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

将此活页夹设置为默认值：

```
ModelBinders.Binders.DefaultBinder = new TestBinder(); 
```

# php - php 标头在 firefox 下无法正常工作

> ID：11085541
> 
> 赞同：1
> 
> 时间：2012-06-18T15:00:31.633
> 
> 标签：php

我正在使用此标头 Content-type: application/vnd.ms-word;，但在 firefox 下没有使用它，它正在下载文件但没有扩展名。为什么，这是firefox的一些安全措施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:03:06.190

Firefox 不会自行将 .doc 添加到下载的文件中，即使 mime 类型表明它是 word doc。它将使用`Content-disposition`标题指定的文件名：

```
header('Content-type: application/vnd.ms-word');
header('Content-disposition: attachment; filename="yourfile.doc"'); 
```

# wpf - 触发命令时强制绑定更新

> ID：11085542
> 
> 赞同：13
> 
> 时间：2012-06-18T15:00:32.933
> 
> 标签：wpf, mvvm, binding, command

有没有办法在触发命令之前或触发命令时更新绑定？我有一些可以使用命令编辑和保存的文本字段，可通过键盘快捷键访问。由于绑定通常仅在文本字段失去焦点时更新，因此在按键保存数据时不会保留最后一次更改。相反，我必须先从文本字段中跳出以使其更新然后保存。

有没有办法以优雅的方式强制更新？我正在使用 MVVM（但不是任何 MVVM 框架），所以我想将 UI 特定的东西保留在命令代码之外。此外，我真的不想更改绑定以在每次更改时更新，只有在失去焦点时才更新它很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T02:26:10.470

如果当前元素是一个`TextBox`. 您可以对其他控件执行类似的操作，但根据我的经验，我只遇到过`TextBox`.

```
 // if the current focused element is textbox then updates the source.     
    var focusedElement = Keyboard.FocusedElement as FrameworkElement;

    if (focusedElement is TextBox)
    {
       var expression = focusedElement.GetBindingExpression(TextBox.TextProperty);
        if (expression != null) expression.UpdateSource();
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-15T19:53:42.283

在您的上`TextBox`，您需要`UpdateSourceTrigger`在您的文本绑定上设置 ，它定义了何时使用文本框值更新源。默认情况下，它`LostFocus`用于`Text`属性，这正是正在发生的事情 - 它仅在失去焦点时更新源。您应该设置 to 的值，`UpdateSourceTrigger`并且`PropertyChanged`每次文本框值更改时都会更新。

例如

```
<TextBox ... Text="{Binding Foo, UpdateSourceTrigger=PropertyChanged}"/> 
```

Path是使用Binding命令时的默认属性，所以上面等于`Path=Foo`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:18:18.410

这是我用于类似情况的类：

```
public class TextBoxUpdatesTextBindingOnPropertyChanged : Behavior<TextBox>
{
    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.TextChanged += TextBox_TextChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        AssociatedObject.TextChanged -= TextBox_TextChanged;
    }

    void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        var bindingExpression = AssociatedObject.GetBindingExpression(TextBox.TextProperty);
        bindingExpression.UpdateSource();
    }
} 
```

XAML：

```
<TextBox Text="{Binding UserName,Mode=TwoWay,UpdateSourceTrigger=Explicit}">
    <i:Interaction.Behaviors>
        <h:TextBoxUpdatesTextBindingOnPropertyChanged />
    </i:Interaction.Behaviors>
</TextBox> 
```

调用`OnPropertyChanged("YourPropertyName")`将提醒视图更新绑定值。

否则请查看此答案：[WPF TextBox DataBind on EnterKey press](https://stackoverflow.com/questions/563195/wpf-textbox-databind-on-enterkey-press)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T14:07:37.177

我现在通过在请求值之前明确地将焦点设置到其他元素来解决这个问题。这显然会使当前具有焦点的元素失去它并更新绑定。

为了设定焦点，我写了一个附加属性，灵感来自其他问题的答案。此外，连同[我的另一个问题](https://stackoverflow.com/questions/11121057/set-the-binding-value-directly)，我使这有点自动化。

所以要使用它，我基本上将我的属性附加到一个元素上，在本例中是一个选项卡控件：

```
<TabControl c:Util.ShouldFocus="{Binding ShouldClearFocus}"> 
```

在我的视图模型中，我有一个简单的布尔属性`ShouldClearFocus`，它是提高 a 的标准属性`PropertyChangedEvent`，因此数据绑定有效。然后我简单地设置`ShouldClearFocus`为何`true`时我想重置焦点。附加属性会自动设置焦点并再次重置属性值。这样我就可以继续设置`ShouldClearFocus`，而不必`false`在两者之间进行设置。

附加属性是一个标准实现，它作为其更改处理程序：

```
public static void ShouldFocusChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    if (!(bool)e.NewValue || !(obj is FrameworkElement))
        return;

    FrameworkElement element = (FrameworkElement)obj;
    if (element.Focusable)
        element.Focus();

    // reset value
    BindingExpression bindingExpression = BindingOperations.GetBindingExpression(obj, ShouldFocusProperty);
    if (bindingExpression != null)
    {
        PropertyInfo property = bindingExpression.DataItem.GetType().GetProperty(bindingExpression.ParentBinding.Path.Path);
        if (property != null)
            property.SetValue(bindingExpression.DataItem, false, null);
    }
    else
        SetShouldFocus(obj, false);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T06:42:23.520

我在我的项目中使用以下内容。问题是按钮没有收到焦点。

在我的 app.xaml.cs

```
 EventManager.RegisterClassHandler(typeof(Button), ButtonBase.ClickEvent, new RoutedEventHandler(ButtonClick));

    private void ButtonClick(object sender, RoutedEventArgs e)
    {
        if (sender != null && sender is Button)
        {
            (sender as Button).Focus();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T14:05:06.557

我认为最好的方法是设置绑定`UpdateSourceTrigger=PropertyChanged`，然后使用[`Reactive Extensions`](http://msdn.microsoft.com/en-us/data/gg577609.aspx)来限制事件流。这样，属性只会在用户停止输入一段时间后更新（1/2 秒是一个很好的数量）。

这很好，因为该属性不会一直更新，但它也会更新而无需更改焦点。正是你想要的。

[这是关于 Rx 的一些非常有用的信息](http://msdn.microsoft.com/en-us/data/gg577611.aspx)

[这里](http://reactiveproperty.codeplex.com/)有一个 MVVM 扩展库，它具有可绑定的 IObservables 。他们在这里的例子正是我所建议的。

你要求优雅：就在这里。而且它也没有那么多工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-02T11:22:32.077

在 UI 上收听命令调用可能会很棘手（如果不是不可能的话，因为到目前为止还没有答案管理它）。我建议使用`Messenger`诸如 MvvmLight 中的模式，而不是 hacky 翻转附加属性：

```
public class ForceUpdateBindingsMessage
{
    public ViewModelBase ViewModel { get; }

    public ForceUpdateBindingsMessage(ViewModelBase viewModel)
    {
        ViewModel = viewModel;
    }
}

// ViewModel
public ICommand SaveCommand => _saveCommand ?? (_saveCommand = new RelayCommand(() =>
{
    // ...push binding updating responsibility to whoever listens to this (desperate) message
    MessengerInstance.Send(new ForceUpdateBindingsMessage(this));
    // the bindings should be up-to-date now        
})); 
```

现在到“UpdateSource”部分，`ForceUpdateBindingsMessage`应该由一些父控件处理，我选择`MainWindow`让 VeiwModel 的绑定随处更新，同时将更新限制为 invoking 的属性`ViewModel`：

```
public MainWindow()
{
    InitializeComponent();
    Messenger.Default.Register<ForceUpdateBindingsMessage>(this, msg =>
    {
        UpdateBindingsOfViewModel(ViewModelBase viewModel);
    });
}

private void UpdateBindingsOfViewModel(ViewModelBase viewModel)
{
    foreach (var tb in this.GetChildren<TextBox>())
    {
        var binding = tb.GetBindingExpression(TextBox.TextProperty);
        if (binding?.DataItem == msg.ViewModel)
        {
            binding.UpdateSource();
        }
    }
} 
```

`GetChildren<T>`常用的扩展辅助方法在哪里：

```
public static IEnumerable<T> GetChildren<T>(this Visual parent) where T : Visual
{
    if (parent == null)
        yield break;

    var queue = new Queue<Visual>();
    queue.Enqueue(parent);

    while (queue.Count > 0)
    {
        var element = queue.Dequeue();
        if (element is T tchild)
            yield return tchild;

        int numVisuals = VisualTreeHelper.GetChildrenCount(element);
        for (int i = 0; i < numVisuals; i++)
        {
            if (VisualTreeHelper.GetChild(element, i) is Visual child)
            {
                queue.Enqueue(child);
            }
        }
    }
} 
```

# wpf - ListBox 仅从 ItemSource 获取 8 个项目

> ID：11085545
> 
> 赞同：1
> 
> 时间：2012-06-18T15:00:40.670
> 
> 标签：wpf, windows-phone-7, windows-phone

我正在 Windows 手机上开发应用程序。在视图中，我有带有 ListBox 的网格：

```
<Grid x:Name="ContentGrid"
              Grid.Row="1">
            <ListBox x:Name="TestListbox" 
                ItemsSource="{Binding History}"                    
                Margin="24,0"   
                SelectionChanged="GoToSelection" 
                ItemTemplate="{StaticResource HistoryDataTemplate}"
                >

            </ListBox>            
        </Grid> 
```

历史是 ObservableCollection。

HistoryDataTemplate 看起来像：

```
 <phone:PhoneApplicationPage.Resources>
        <DataTemplate x:Key="HistoryDataTemplate">
            <Grid>
                <HistoryControls:HistoryItem d:LayoutOverrides="Width" Margin="0,0,0,24"/>
            </Grid>
        </DataTemplate>
    </phone:PhoneApplicationPage.Resources> 
```

我使用 HistoryItem 的构造函数来订阅 PropertyChanged 事件：

```
 public HistoryItem()
            {
                InitializeComponent();
                base.Loaded+=(new RoutedEventHandler(this.HistoryControl_Loaded));
            }
 private void HistoryControl_Loaded(object sender, RoutedEventArgs e)
        {
            this._dataContext.PropertyChanged += new PropertyChangedEventHandler(this._dataContext_PropertyChanged);
        } 
```

当我有 1-8 个项目时，所有工作都正确，但对于 >8 个项目，构造函数仅被调用 8 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:13:30.523

如果表单上只有 8 个项目可见，则不会为屏幕外项目调用构造函数，因为列表正在虚拟化它们。

您可以使用该属性更改此行为

```
 <ListBox x:Name="TestListbox" VirtualizingStackPanel.IsVirtualizing="False" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:09:10.277

我添加了 ListBox.ItemsPanel，它有帮助。更多信息：http: [//blogs.msdn.com/b/oren/archive/2010/11/08/wp7-silverlight-perf-demo-1-virtualizingstackpanel-vs-stackpanel-as-a-listbox-itemspanel.aspx](http://blogs.msdn.com/b/oren/archive/2010/11/08/wp7-silverlight-perf-demo-1-virtualizingstackpanel-vs-stackpanel-as-a-listbox-itemspanel.aspx)

# c++ - 在 XCode 4.3 中调用“sqrt”没有匹配的函数

> ID：11085546
> 
> 赞同：1
> 
> 时间：2012-06-18T15:00:45.083
> 
> 标签：c++, macos, xcode4, standard-library

我正在尝试使用 C++ 为 Mac 制作 SDL 游戏。我已经让所有与 SDL 相关的工作正常，但是当我尝试使用 sqrt 函数时，我得到了错误`no matching function for call to 'sqrt'`。这是我的包含列表和我的第一个函数（main() 函数现在并没有真正做任何事情）：

```
#include <iostream>
#include <stdlib.h>
#include <SDL/SDL.h>
#include <math.h>

#include "geometry.h"

using namespace std;

void drawLine(vector2 start, vector2 end)
{
    double x = end.x - start.x;
    double y = end.y - start.y;
    double length = sqrt(x*x, y*y); // I get the error here
} 
```

我也尝试过导入相同的结果。我必须在 Mac（Lion，XCode 4.3）上做些什么才能让它工作吗？

编辑：为了完整起见，geometry.h 包含 vector2 结构的定义

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:04:53.570

[`sqrt`](http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man3/sqrt.3.html)只接受一个论点。你给它两个。也许你打算这样做：

```
double length = sqrt(x*x + y*y); 
```

还是您将 sqrt 与[hypot](http://en.cppreference.com/w/cpp/numeric/math/hypot)混淆了？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:05:32.350

根据[Opengroup的说法，sqrt 只有一个参数](http://pubs.opengroup.org/onlinepubs/009695399/functions/sqrt.html)

# c++ - 为什么在类声明中定义类模板成员函数时允许显式特化，但单独定义时不允许？

> ID：11085550
> 
> 赞同：1
> 
> 时间：2012-06-18T15:00:55.490
> 
> 标签：c++, templates

我看过许多 StackOverflow 帖子，它们说类模板成员函数的特化在 C++ 中是不合法的，除非封闭类也是特化的。

但是，另一篇帖子似乎表明*可以*专门化成员模板函数，只要专门化函数的定义出现在模板类的类声明中，如下所示：

```
template<typename T1, typename T2>
class A
{
public:
    template<typename TX> TX foo() {return 0;};
    template<> T1 foo<T1>() {return 1;}; // provide the specialization's definition within the class declaration: works
    //template<> T1 foo<T1>(); // ... switch to this (and provide the definition below), and it's a compile error
};

// This function definition is only present when the commented-out line of code in the class declaration is used
template<typename T1, typename T2>
template<>
T1 A<T1, T2>::foo<T1>()
{
    return 1;
}

int main(void)
{
    A<int, double> a;
    const int n = a.foo<int>(); // When the definition appears inside the class declaration, n is 1 - it works
    return 0;
} 
```

从我的代码示例中的注释可以看出，当在类声明中提供了专用函数的定义时，代码构建没有错误，并且运行成功，并且`n`in function的`main()`值为`1`，正如预期的那样。

但是，当将专用函数定义移到类声明之外，但保持不变时，如图所示，编译器会发出其他帖子已经指出的错误；就我而言（Visual Studio 2010），错误是`an explicit specialization of a template member must be a member of an explicit specialization`.

我的问题是这个。如果除非封闭的模板类也是特化的，否则不允许在类模板中显式特化成员函数，那么如果在类声明中提供了定义，为什么它在我的示例代码中起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:18:30.703

由于不同的原因，这两个版本都不应该编译。

在第一种情况下，特化必须存在于命名空间级别，这意味着编译器应该拒绝在类定义中提供的特化。

在第二种情况下，特化的位置是正确的，但要提供成员函数的特化（函数的特化必须始终是完整的，绝不是部分的），您还需要修复封闭的模板类参数。也就是说，无论使用哪种类型，都不能专门化`foo`一种类型，并用于实例化封闭模板。您可以（可能不是您想要的）提供固定所有参数的专业化：`X``T1``T2`

```
template <> template <>
int A<int, double>::foo<int>() { return 5; } 
```

您可以使用的替代方法是：

*   提供非模板重载，而不是模板特化（在大多数情况下，提供重载比特化更有意义，但这里可能不是这种情况，因为您不能在返回类型上重载。
*   将函数移动到不同的模板类，然后在那里执行部分特化。
*   执行第一个选项的变体：提供单个非专用模板以供客户端使用，该模板转发到为其提供不同重载的内部函数

例子：

```
// inside class template:
private:
   template <typename T> T foo_impl( T* _ ) {...} // generic
   T1 foo_impl( T1 * _ ) {...}                    // concrete
public:
   template <typename T> T foo() {
      return foo_impl( (T*)0 );
   } 
```

这样，您可以将仅返回类型上的模板转换为对重载函数的调用，并且可以让编译器为您解决问题。

# php - 使用 CodeIgniter 的 DB 类的依赖项最少？

> ID：11085555
> 
> 赞同：2
> 
> 时间：2012-06-18T15:01:13.007
> 
> 标签：php, database, codeigniter, dependencies

我正在尝试将 CodeIgniter DB 功能（因为它的`DB(...)`功能，在 中定义`database/DB.php`）用作独立库。

进行此运行所需的最小环境是什么？

到目前为止，我有：

*   `APPPATH`,`BASEPATH`和`ENVIRONMENT`
*   `config/config.php`
*   `core/Common.php`
*   `core/Exceptions.php`
*   `core/Lang.php`
*   `libraries/Log.php`
*   中的所有文件`database/*`

但是代码似乎仍然神秘地死掉了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:52:33.270

您可能会发现以下链接很有帮助。 [http://hasin.me/2007/06/13/using-activerecord-library-separately-from-codeigniter/](http://hasin.me/2007/06/13/using-activerecord-library-separately-from-codeigniter/)

# sharepoint - 在 CAML 查询中使用部分日期

> ID：11085557
> 
> 赞同：2
> 
> 时间：2012-06-18T15:01:21.980
> 
> 标签：sharepoint, caml

我列表中的标题列仅包含年份。我想制作一个视图，我只会显示最近 3 年。

我正在尝试在列表定义中使用 CAML 查询：

```
<Query>
  <Where>
    <Geq>
      <FieldRef Name="Year" />
      <Value Type="Number"> ???? </Value>
    </Geq>
  </Where>
</Query> 
```

我试图在这里使用`<Today>`具有属性的元素来获取一些东西`Offset`，但没有运气 - 它不是 DateTime 值，而只是一个数字。

这里怎么写过滤条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:34:36.067

由于它不是日期时间值，因此它永远不会使用，`<Today>`并且`offset`因为这些元素会根据查询运行的时刻在内部转换为 SQL 日期时间值。

您可以创建一个视图，在其中查找 2009 年以上的任何条目（截至 2012 年正确），但这需要每年进行额外的小工作才能适应。

如果可能，我会建议创建一个真正的仅日期字段并使用它（并且可能只显示基于该值的计算字段）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:53:04.957

我建议分两步执行此操作：

1.  [使用此处http://msdn.microsoft.com/en-us/library/bb862071.aspx](http://msdn.microsoft.com/en-us/library/bb862071.aspx)中描述的公式创建类型为 DateTime（无时间）的计算字段。这将是这样的 =DATE(Year-3,0,0)
2.  使用这个新列进行查询。就像是

> ```
> <Geq>
>         <FieldRef Name="YearCalculated" />
>         <Value Type="DateTime" IncludeTimeValue="FALSE"><Today /></Value>    
> </Geq> 
> ```

Offset="-1095" 的方法也可能有效，但我认为在计算字段中减去年份值会更好。此外，如果需要，您始终可以使您的计算字段在视图表单上不可见。

# jquery - Jquery 网络摄像头插件 - 错误：Flash 电影尚未注册

> ID：11085562
> 
> 赞同：1
> 
> 时间：2012-06-18T15:01:34.740
> 
> 标签：jquery, webcam

我想使用 jquery 网络摄像头插件捕获图像。我可以通过播放器观看视频，但无法捕捉图像。我收到“错误：尚未注册 Flash 电影”错误。这是什么意思？在尝试调用 webcam.capture 函数时，我收到一条错误消息，提示“webcam.capture 不是函数”。

**编辑：**我正在使用这个 jQuery 插件：[http ://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T16:20:24.083

这个链接解决了这个问题：[https](https://github.com/infusion/jQuery-webcam/issues/14) ://github.com/infusion/jQuery-webcam/issues/14 。

问题是因为测试必须在 HTTP URL“ `http://....`”而不是文件 URL“ `file://....`”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-05T07:20:44.753

我的问题其实很傻。我没有将网络摄像头功能包装在 jquery 的就绪事件中。把它包在里面对我有用

```
$(document).ready(function() {

        $("#camera").webcam({
         // options
        });
}); 
```

PS：就像尼古拉斯说的，确保网址是`HTTP`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T11:56:37.960

页面加载时 Flash 部分是否可见？我发现如果代码位于页面加载时不可见的 div 中，这是经常发生的。解决它的最简单方法是仅在 div 可见时加载代码：

```
 $("#webcam-cap-div").click(function() {} 
```

我敢肯定，如果 div 是否存在，这可以通过检测来大大简化`:visible`......此外，如果你可以发布代码，你如何使用`webcam.capture`它也会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T20:55:24.910

I know that this is an old question, but as I answered in this [link](https://github.com/infusion/jQuery-webcam/issues/14#issuecomment-28769260), this is what I did to solve my problem:

If you REALLY need to use it locally (like i had to), you can change your Global Security Settings (of flash player) to trust files in a determined folder.

*   Go to [http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)
*   Click Edit location
*   Then Add Location
*   Then choose the folder where your files are

With that configured, I was able to use the plugin locally.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T19:11:49.603

您需要使用以下内容更新您的 web.xml 文件：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
        <url-pattern>*.swf</url-pattern>
</servlet-mapping> 
```

# ruby - 为什么符号不冻结字符串？

> ID：11085564
> 
> 赞同：29
> 
> 时间：2012-06-18T15:01:39.483
> 
> 标签：ruby, symbols

我了解字符串和符号之间的理论区别。我知道符号是用来表示一个概念或一个名称或一个标识符或一个标签或一个键，而字符串是一袋字符。我知道字符串是可变的和瞬态的，而符号是不可变的和永久的。我什至喜欢在我的文本编辑器中符号与字符串的不同之处*。*

困扰我的是，实际上，符号与字符串非常相似，以至于它们没有作为字符串*实现*的事实引起了很多头痛。它们甚至不支持鸭式或隐式强制转换，这与另一对著名的“相同但不同”的组合 Float 和 Fixnum 不同。

当然，最大的问题是从其他地方进入 Ruby 的散列，比如 JSON 和 HTTP CGI，使用字符串键，而不是符号键，所以 Ruby 程序必须向后弯腰，要么在前面转换它们，要么在查找​​时转换它们。的存在`HashWithIndifferentAccess`，以及它在 Rails 和其他框架中的猖獗使用，表明这里有一个问题，一个需要解决的问题。

谁能告诉我为什么符号不应该被冻结字符串的实际原因？除了“因为它总是这样做”（历史）或“因为符号不是字符串”（乞求问题）之外。

考虑以下令人惊讶的行为：

```
:apple == "apple"  #=> false, should be true

:apple.hash == "apple".hash #=> false, should be true

{apples: 10}["apples"]  #=> nil, should be 10

{"apples" => 10}[:apples]  #=> nil, should be 10

:apple.object_id == "apple".object_id #=> false, but that's actually fine 
```

让下一代 Ruby 主义者不那么困惑的所有事情就是：

```
class Symbol < String
  def initialize *args
    super
    self.freeze
  end 
```

（以及许多其他库级别的黑客攻击，但仍然不太复杂）

也可以看看：

*   [http://onestepback.org/index.cgi/Tech/Ruby/SymbolsAreNotImmutableStrings.red](http://onestepback.org/index.cgi/Tech/Ruby/SymbolsAreNotImmutableStrings.red)
*   [http://www.randomhacks.net/articles/2007/01/20/13-ways-of-looking-at-a-ruby-symbol](http://www.randomhacks.net/articles/2007/01/20/13-ways-of-looking-at-a-ruby-symbol)
*   [为什么我的代码在使用哈希符号而不是哈希字符串时会中断？](https://stackoverflow.com/questions/10098935/why-does-my-code-break-when-using-a-hash-symbol-instead-of-a-hash-string)
*   [为什么在 Ruby 中使用符号作为哈希键？](https://stackoverflow.com/questions/8189416/why-use-symbols-as-hash-keys-in-ruby)
*   [什么是符号，我们如何使用它们？](https://stackoverflow.com/questions/6745010/what-are-symbols-and-how-do-we-use-them)
*   [Ruby 符号与哈希中的字符串](https://stackoverflow.com/questions/9712706/ruby-symbols-vs-strings-in-hashes)
*   [无法掌握 Ruby 中的符号](https://stackoverflow.com/questions/6725518/cant-get-the-hang-of-symbols-in-ruby)
*   [http://blog.arkency.com/could-we-drop-symbols-from-ruby/](http://blog.arkency.com/could-we-drop-symbols-from-ruby/)
*   [Ruby 符号是否存在是因为字符串是可变的而不是 intern 的？](https://stackoverflow.com/questions/44634073/do-ruby-symbols-exist-because-strings-are-mutable-and-not-interned/44635947)

更新：我认为 Matz 在`class Symbol < String`这里很好地说明了这一点：http: [//blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9192](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9192)（感谢 Azolo 挖掘了这个，并且Matz 也最终撤回）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T15:52:02.007

[这个答案与我原来的答案](https://stackoverflow.com/posts/11086463/revisions)截然不同，但我在 Ruby 邮件列表中遇到了几个[有趣的](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9450) [线程。](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9188)（两本好书）

因此，在 2006 年的某一时刻，matz 将该`Symbol`类实现为`Symbol < String`. 然后`Symbol`该类被剥离以消除任何可变性。所以 a`Symbol`实际上是不可变的`String`。

然而，它被恢复了。给出的[理由是](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/9452)

> 尽管它非常反对 DuckTyping，但人们倾向于在类上使用 case，而 Symbol < String 经常会导致严重的问题。

所以你的问题的答案仍然是：*a`Symbol`就像 a `String`，但它不是。*
问题不是 a `Symbol`should not be `String`，而是历史上不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T15:09:02.767

我不知道完整的答案，但这里有很大一部分：

符号用于哈希键的原因之一是给定符号的每个实例都是完全相同的对象。这意味着`:apple.id`将始终返回相同的值，即使您没有传递它。另一方面，`"apple".id`每次都会返回不同的 id，因为创建了一个新的字符串对象。

这种差异就是为什么建议使用符号作为散列键的原因。使用符号时无需进行对象等效性测试。它可以直接短路到对象标识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:47:06.750

另一个考虑是`"apple".each_char`有道理的，但`:apple.each_char`没有。字符串是“有序的字符列表”，但符号是没有明确值的原子数据点。

我想说这`HashWithIndifferentAccess`实际上表明 Ruby 符号正在履行两个不同的角色；*符号*（本质上就像其他语言中的枚举）和*实习字符串*（本质上是一种抢先优化，补偿了 ruby​​ 被解释的事实，因此没有智能优化编译器的好处。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:12:20.023

看到这个答案：[https ://stackoverflow.com/a/6745253/324978](https://stackoverflow.com/a/6745253/324978)

主要原因：性能（符号存储为整数，并且永远不会被垃圾收集）和一致性（`:admin`并且`:admin`将始终指向同一个对象，在哪里`"admin"`和`"admin"`没有那个保证）等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T16:05:57.673

它的基础是，这些不应该是真的：

```
:apple == "apple"  #=> false, should be true

:apple.hash == "apple".hash #=> false, should be true 
```

符号始终是相同的对象，而文本则不是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T08:46:18.153

如果 String 可以继承 Symbol，因为它增加了很多功能（变异）。但是符号永远不能用作“作为”字符串，因为在所有需要突变的情况下它都会失败。

无论如何，正如我上面所说，字符串 == 符号绝不能像上面建议的那样返回 true。如果您对此稍加考虑，您会注意到在考虑*子类*实例的类中没有合理的 == 实现。

# javascript - jQuery 延迟使用 append()

> ID：11085567
> 
> 赞同：8
> 
> 时间：2012-06-18T15:01:47.767
> 
> 标签：javascript, jquery

我无法使 jQuery 的延迟函数与`append`函数一起使用。怎么了？有没有办法让它工作？我想避免`setTimeout`直接使用，以使客户更容易遵循，他们将自己维护它，没有任何经验。

我的代码：

```
$('#chatwindow').append('test').delay(2000).append('test'); 
```

在这段代码中，我同时打印了“testtest”，`delay`被忽略了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-18T15:04:28.717

这是因为默认情况下[`delay(2000)`](http://api.jquery.com/delay)对队列进行排队，而该队列从不属于其中的一部分。`fx``append()`

相反，您可以`append()`使用该[`queue()`](http://api.jquery.com/queue)函数专门对其进行排队。

```
$('#chatwindow').append('test').delay(2000).queue(function (next) {
    $(this).append('test');
    next();
}); 
```

您可以在此处查看此工作的示例；[http://jsfiddle.net/mj8qC/](http://jsfiddle.net/mj8qC/)

但是，我同意@ascii-lime 的评论；我希望客户有更多的机会理解`setTimeout`它，因为它是 JavaScript 的基础部分，不像，它使*许多*`delay()`用户感到困惑（来自 StackOverflow 上提出的问题的经验）。

 *^(FWIW，这个问题促使我写[了一篇](http://www.mattlunn.me.uk/blog/2012/06/jquery-delay-not-working-for-you/)关于使用的博客文章`delay()`；它比这个答案更详细，对其他人来说可能是很好的进一步阅读。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:04:08.043

`delay()`是一个不能与任何东西一起使用的棘手函数：它主要用于效果（它立即返回，它不会阻塞 javascript 执行流程）。

从[文档](http://api.jquery.com/delay/)：

> 它可以与标准效果队列或自定义队列一起使用

（因此，如果您不使用 fx 队列，则必须使用自定义队列）

在这种情况下使用 setTimeout。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:04:49.370

是的。从延迟中恢复是立竿见影的。您的代码中没有任何内容表明应该等待。您需要使用 setTimeout 让引擎等待..*

# php - 在一行代码中回显一些字符串和多维数组元素

> ID：11085570
> 
> 赞同：3
> 
> 时间：2012-06-18T15:01:53.433
> 
> 标签：php, string, multidimensional-array, echo

一段时间以来，我一直在为一些关于 php 的奇怪事情而苦苦挣扎。

似乎无法使用一行代码显示某些字符串和多维数组元素。

例如，我们有一个简单的 3d 数组：

`$ARRAY = array('first' => array(array('Hello, World!')));`

现在，如果我想显示一些字符串和第 3 级元素，我将不得不这样做：

```
$a = $ARRAY['first'][0][0];
echo"Some string: $a"; 
```

或这个：

```
echo"Some string: ";
echo($ARRAY['first'][0][0]); 
```

那么有没有什么方法可以只用一行代码来实现呢？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T15:05:11.037

```
echo "Some string: {$ARRAY['first'][0][0]}"; 
```

[在PHP.Net](http://php.net/manual/en/language.types.string.php)上阅读更多内容

> **复杂（卷曲）语法**
> 
> 这不是因为语法复杂而被称为复杂，而是因为它允许使用复杂的表达式。
> 
> 任何具有字符串表示的标量变量、数组元素或对象属性都可以通过此语法包含在内。只需将表达式写成与它出现在字符串之外的相同方式，然后将其包装在 { 和 } 中。由于 { 无法转义，因此只有在 $ 紧跟 { 时才能识别此语法。使用 {\$ 获取文字 {$。一些例子可以清楚地说明：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:03:06.957

使用[串联](http://www.phpf1.com/tutorial/php-string-concatenation.html)：

```
echo "Some string: " . $ARRAY['first'][0][0]); 
```

或者

```
echo "Some string: ", $ARRAY['first'][0][0]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:04:59.557

`echo "Some string: {$ARRAY['first'][0][0]}";`

# linq - Enumerable.Range 和表达式和实体框架

> ID：11085571
> 
> 赞同：1
> 
> 时间：2012-06-18T15:01:59.327
> 
> 标签：linq, entity-framework, c#-4.0, expression

我目前正在开发一种必须给我的表达式方法（用于 linq to entity 查询）

*   给定期间的天数（开始日期和结束日期）
*   如果特价日在此期间，则减少此天数。

我的想法如下：

*   生成一个包含所有日期的可枚举（并使用 Enumerable.Range）
*   在这个可枚举上创建一个 .Where 以删除特价日期 Like a MyEnumerable.Where(a => a != "20120101")
*   之后，返回一个 MyEnumerable.Count()

我来了这个代码：

```
return (p) => Enumerable
                  .Range(1, 4)
                  .Where(a => a != 20120101)  
                  .AsQueryable()
                  .Count() 
```

我试图作为一个列表，作为一个可查询的，（如示例）和没有办法！它不起作用！我总是收到这个错误：

**LINQ to Entities 无法识别方法 'System.Collections.Generic.IEnumerable`1[System.Int32] Range(Int32, Int32)' 方法，并且此方法无法转换为存储表达式。**

你对此有什么想法吗？使用可枚举当然不是强制性的，任何可行的解决方案都是好的^^

提前谢谢！

为了简化我的问题，这不起作用，我想这样做。

```
(
  from foo in User 
  select new 
  { 
    a = Enumerable.Range(1,4).Count() 
  }
).Take(1) 
```

* * *

更多信息:-)

如果我这样做（外部化变量中的可枚举）：

```
var foo = Enumerable.Range(1, 4);
return (p) => foo.Where(a => a != 20110101).Count(); 
```

这次它有效，但我无法用这种方法定义范围开始和结束！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:02:12.173

下面的代码生成一个真实的 DateTime 范围，因此可以正确处理闰年、不同的月末等等。它还正确处理 daysToExclude 为空或为空。

```
DateTime baseDate = DateTime.Now;
DateTime[] daysToExclude = new DateTime[] { new DateTime(2012, 6, 25), new DateTime(2012, 6, 30) } ;
int numberOfDays = baseDate.AddMonths(1).Subtract(baseDate).Days;

int days = Enumerable.Range(0, numberOfDays).Select(day => baseDate.Date.AddDays(day)).Except(daysToExclude ?? Enumerable.Empty<DateTime>()).Count(); 
```

# c# - 如何：从 PluginAssembly 中检索插件

> ID：11085572
> 
> 赞同：1
> 
> 时间：2012-06-18T15:01:59.187
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

我正在尝试使用早期绑定从插件程序集对象中获取插件。

```
List<PluginAssembly> pluginList;
pluginList = xrmContext.PluginAssemblySet
    .Where(Plugin => Plugin.SolutionId == solution.Id).ToList();
foreach (PluginAssembly tempPlugin in pluginList)
{...} 
```

现在我想检索程序集中的插件，但我似乎无法`Plugin`在对象中找到名为的类或明确定义的集合`PluginAssembly`。

如何检索插件对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:14:22.020

您必须检索 pluginTypes 对象。

只是不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:17:04.320

插件必须实现 IPlugin。我不确定 PluginAssembly 给你什么信息，但我猜你应该能够使用反射来获取程序集中的类，然后确定它们是否实现 IPlugin。请参阅此[答案](https://stackoverflow.com/questions/26733/getting-all-types-that-implement-an-interface-with-c-sharp-3-5)以获取帮助。

# php - AWS 使用 SQS 上传到 S3 - PHP 语法

> ID：11085573
> 
> 赞同：0
> 
> 时间：2012-06-18T15:02:02.773
> 
> 标签：php, amazon-web-services, amazon-sqs

使用 SQS 上传到 S3 是否会使进程更容错？

如果是这样，我很难使用语法，试图结合创建一个`queue`然后上传到 S3。
如果我的逻辑不正确，我将如何设置`SQS`用于上传到的系统`S3`？

```
if (!class_exists('S3'))require_once('S3.php');

// *these keys are random strings
$AWS_KEY = "6VVWTU4JDAAKHYB1C3ZN";
$AWS_SECRET_KEY = "GMSCUD8C0QA1QLV9Y3RP2IAKDIZSCHRGKEJSXZ4F";

//AWS access info
if (!defined('awsAccessKey')) define('awsAccessKey', $AWS_KEY);
if (!defined('awsSecretKey')) define('awsSecretKey', $AWS_SECRET_KEY);
//instantiate the class
$s3 = new S3(awsAccessKey, awsSecretKey);

//check whether a form was submitted
if(isset($_POST['Submit'])){

    //retreive post variables
    $fileName = $_FILES['theFile']['name'];
    $fileTempName = $_FILES['theFile']['tmp_name'];

    //create a new bucket
    $s3->putBucket("mybucket", S3::ACL_PUBLIC_READ);

    //add the queue
    $sqs = new AmazonSQS(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY ));
    $response = $sqs->create_queue('test-topic-queue');
    $queue_url = (string) $response->body->CreateQueueResult->QueueUrl;
    $queue_arn = 'arn:aws:sqs:us-east-1:ENCQ8gqrAcXv:test-topic-queue';

    //$queue_url . ?Action=SendMessage&MessageBody=Your%20Message%20Text?&AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&Version=2011-10-01?&Expires=2008-02-10T12:00:00Z?&Signature=lBP67vCvGlDMBQ1do?fZxg8E8SUEXAMPLE&SignatureVersion=2&SignatureMethod=HmacSHA256

    // HOW DO I INCORPORATE SQS AND S3

    //move the file
    if ($s3->putObjectFile($fileTempName, 
                                "mybucket", 
                                "myFolder/" . $fileName, S3::ACL_PUBLIC_READ, 
                                array(), 
                                $_FILES['theFile']['type']) ) {
        //it works
    }else{
        // error
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T02:18:33.973

我并不完全理解您要求的容错能力。但是在使用 S3 和 SQS 进行扩展方面，亚马逊 AWS 网站上有一篇优秀的论文，讨论了一起使用 SQS 和 EC2 来扩展和缩减您的基础设施，其中当然可以包括上传到 S3 和使用 SQS 等过程告诉应用程序处理某些东西。您没有提及您是否正在使用 EC2 或是否对此感兴趣。

这是文章：[http ://aws.amazon.com/articles/1464](http://aws.amazon.com/articles/1464)

否则，听起来您的逻辑可能会被混淆，因为 SQS 不是从服务器到 S3 的中间，而是更多用于应用程序消息传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T22:00:11.117

我想我弄清楚了 OP 在这个话题上的困惑。

显示的图表显示 SQS 正在处理上传，但实际上并非如此，当您上传 1 或 100 张照片时，它们会直接添加到 S3，然后使用 SQS 创建一个“任务”，其中一个 EC2“处理服务” " 将拉取，然后从 SQS 消息中命名的 S3 存储中获取实际图片。

希望这能为将来看到这个问题感到迷茫的用户提供一些见解。

# plupload - plupload被阻止的问题

> ID：11085575
> 
> 赞同：1
> 
> 时间：2012-06-18T15:02:09.480
> 
> 标签：plupload

我在控制 plupload 为客户端上传文件时遇到问题。在这个客户端的计算机上，它以某种方式被阻止。他们收到 -400 安全错误。跨域策略很好。好久没换了，其他人都在用。是否存在闪存需要打开但可能被阻塞的特定端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:14:55.927

您是否尝试过直接从该计算机访问该域？可能有一个不相关的问题导致 plupload 在该服务器（防火墙、主机文件等）上找不到 crossdomain.xml。尝试从浏览器访问该域并查看您遇到的错误（如果有）。

如果其他域可以访问，请尝试清除相关客户端计算机上的缓存（如果他们没问题，有些人出于某种原因对此感到不安），然后重新加载您的应用程序站点，以查看是否有一些旧配置/js/whatever文件挂在缓存中。

# opencv - 简单的 OpenCV 项目 - 检测和跟踪网球

> ID：11085579
> 
> 赞同：3
> 
> 时间：2012-06-18T15:02:16.017
> 
> 标签：opencv, object-detection, video-tracking

我有一个项目，我需要使用 OpenCV 来检测网络摄像头上的物体（网球），并在我将它滚过桌子时跟踪它以获得奖励积分。

由于我使用的是 OpenCV 2.4、C++，而且很多信息都在较旧的 OpenCV 版本中，因此我没有太多运气找到这方面的信息。我已经阅读了很多不同的方法来做到这一点，但我只是不知道如何在我的代码中实现它。

任何帮助将不胜感激，特别是关于如何将检测/跟踪功能集成到我的代码中

到目前为止，这是我的代码，我认为图像检测/跟踪代码应该在我应用过滤器之后执行：

```
//Includes & Namespaces
#include "cv.h"
#include "highgui.h"
#include <iostream>
using namespace cv;
using namespace std;

//Main Function
int main(int, char**)
{
    VideoCapture vid(0); //Capture from Webcam
    if(!vid.isOpened()) //Error Check for Webcam
    {
        cout << "Could not open camera" << endl;
        return -1;
    }

    Mat pic; //Create Matrix to store image
    namedWindow("video",1); //Open Window

    for(;;) //Infinite loop
    {
        Mat frame; //Create Matrix for a single frame
        vid >> frame; //Transfer from webcam to matrix

        //Filters
        cvtColor(frame, pic, CV_BGR2HSV);
        GaussianBlur(pic, pic, Size(7,7), 1.5, 1.5);

        /*Image Detection Here */           

        imshow("Picture", pic); //Show image

        if(waitKey(30) >= 0)
        break;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T16:28:23.793

你试过用谷歌搜索你的问题吗？有很多关于这方面的信息。

接下来是一个简单的想法：使用[颜色阈值](https://stackoverflow.com/questions/8884972/color-detection-opencv)（似乎是黄色或白色）和[圆形检测](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)来检测您的对象。检测到球后，您只需使用（例如）[Lucas-Kanade 方法](http://en.wikipedia.org/wiki/Lucas%E2%80%93Kanade_method)对其进行跟踪。

以下是一些指南/手册：

1.  [跟踪有色物体 OpenCV](http://aishack.in/tutorials/tracking-colored-objects-opencv/)
2.  [运动分析和对象跟踪](http://opencv.willowgarage.com/documentation/cpp/motion_analysis_and_object_tracking.html)
3.  [学习 OpenCV](http://shop.oreilly.com/product/9780596516130.do)
4.  查看 OpenCV 的文件夹`samples`。有很多非常有用的例子。在您的情况下，最好的例子是`samples/cpp/lkdemo.cpp`.

# c - 64位机器的内存分配

> ID：11085581
> 
> 赞同：2
> 
> 时间：2012-06-18T15:02:44.393
> 
> 标签：c, gcc, 64-bit, callstack

我想问一下 64 位 ubuntu Linux 中的内存分配。

我有以下代码

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[]) {
    char buffer_one[8], buffer_two[8];

    printf("Size of char: %u\n", sizeof(char));

    printf("Buffer_two is at %p\n", buffer_two);
    printf("Buffer_one is at %p\n", buffer_one);
} 
```

当它运行时，会出现以下结果

```
$ ./sizeofchar 
Size of char: 1
Buffer_two is at 0x7fff98069910
Buffer_one is at 0x7fff98069900 
```

我的问题是，即使 char 类型的大小是 1 个字节，我假设（如果我在这里错了，请纠正我）`Buffer_two`并且`Buffer_one`彼此相邻分配，为什么内存地址`Buffer_two`和`Buffer_one`内存地址分开分配 16 个字节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:05:29.170

这是依赖于编译器的行为。由于这些是堆栈分配的缓冲区（实际上与内存分配无关），因此堆栈局部变量在堆栈中的布局方式取决于编译器。你可以玩这个，但我猜出于某种原因，所有数组都以 16 字节的增量分配在堆栈上。

如果您查看反汇编，您可以看到变量设置在堆栈帧中的哪个位置。我有一种预感，a`char[2]`和`char[15]`两者最终都会在堆栈帧中占用 16 个字节。为什么，我不太确定。但我可以补充的是，[x64 ABI](http://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions)指定堆栈始终是 16 字节对齐的，这种类型的分配将很容易保证这一点。

# .net - 如何在 VB.Net 中为库存程序集成 QR 码生成器和扫描器？

> ID：11085582
> 
> 赞同：0
> 
> 时间：2012-06-18T15:02:44.440
> 
> 标签：.net, vb.net

例如：我需要为附近的超市开发一个小库存程序，并且需要为产品的型号生成一个二维码 例如：A 用于 Iphone，然后我们通过连接到的扫描仪扫描二维码图像PC 它应该会自动在输入框中填写字母“A”，以便我可以使用它来搜索产品“Iphone”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:07:33.020

执行此操作的最佳方法是利用与 .net 框架兼容的现有二维码库。快速搜索会发现一个开源项目[QRCode Library](http://platform.twit88.com/projects/mt-qrcode)。该库支持编码和解码二维码。这应该满足您生成型号和产品编号的二维码然后读取它们的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:47:37.693

听起来在“生成”方面，您可能可以使用 TagLabs 解决方案。您可以根据需要利用 API 自动创建和管理具有关联型号的二维码。查看 developer.taglabsinc.com 上的开发者网站，并在 portal.taglabsinc.com 上创建一个免费帐户。

# .net - 我如何在 openwith contextmenu 中找到我的应用程序

> ID：11085590
> 
> 赞同：0
> 
> 时间：2012-06-18T15:03:06.817
> 
> 标签：.net, winforms, c#-4.0

我正在使用 c# .net 4.0 开发 Windows 窗体应用程序。我开发了一个类似于 windows 图片查看器的应用程序（MyPictureViewer）。我有一个浏览按钮，因此用户可以选择它并浏览一些图片并在我的应用程序中打开它们。目前，它适用于所有选项，如放大/缩小、旋转、导航、幻灯片等。不是直接打开我的应用程序**MyPictureViewer**，而是单击浏览并打开一些我想要事先选择图像的图片，然后右键单击它们并选择打开方式.. 在这里我应该在上下文菜单中找到我的应用程序 MyPictureViewer 以及 Windows Picture Viwer、picaso 等。我如何将我的应用程序包含在 openwith 上下文菜单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:08:21.647

看看这个

[使用 .NET 编写 Windows Shell 扩展](http://blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4-c-vb-net-part-1.aspx)

[创建快捷菜单处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144171%28v=vs.85%29.aspx)

# mysql - 在 MySQL 中查找时间序列数据间隙的方法？

> ID：11085596
> 
> 赞同：9
> 
> 时间：2012-06-18T15:03:17.220
> 
> 标签：mysql, database, time, gaps-and-islands

假设我们有一个包含两列的数据库表，entry_time 和 value。entry_time 是时间戳，而 value 可以是任何其他数据类型。记录是相对一致的，以大约 x 分钟的间隔输入。然而，在许多 x 的时间内，可能不会输入条目，从而在数据中产生“间隙”。

就效率而言，用查询找到至少时间 Y（新旧）的这些差距的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-18T15:27:19.120

首先，让我们按小时汇总表中的条目数。

```
SELECT CAST(DATE_FORMAT(entry_time,'%Y-%m-%d %k:00:00') AS DATETIME) hour,
       COUNT(*) samplecount
  FROM table
 GROUP BY CAST(DATE_FORMAT(entry_time,'%Y-%m-%d %k:00:00') AS DATETIME) 
```

现在，如果您每 6 分钟（每小时 10 次）记录一次，所有的 samplecount 值都应该是 10。这个表达式：`CAST(DATE_FORMAT(entry_time,'%Y-%m-%d %k:00:00') AS DATETIME)`看起来很麻烦，但它只是通过将分钟和秒归零来将您的时间戳截断到它们发生的小时。

这是相当有效的，并且会让你开始。如果您可以在 entry_time 列上放置一个索引并将您的查询限制为例如昨天的示例，那么这是非常有效的，如下所示。

```
SELECT CAST(DATE_FORMAT(entry_time,'%Y-%m-%d %k:00:00') AS DATETIME) hour,
       COUNT(*) samplecount
  FROM table
 WHERE entry_time >= CURRENT_DATE - INTERVAL 1 DAY
   AND entry_time < CURRENT_DATE
 GROUP BY CAST(DATE_FORMAT(entry_time,'%Y-%m-%d %k:00:00') AS DATETIME) 
```

但它并不擅长检测丢失样本的整个小时数。它对采样中的抖动也有点敏感。也就是说，如果您的最高时间样本有时会提前半秒 (10:59:30) 有时会延迟半秒 (11:00:30)，那么您的每小时汇总计数将会关闭。所以，这个小时总结的东西（或一天总结，或分钟总结等）不是万无一失的。

你需要一个自连接查询来得到完全正确的东西；它有点像毛球，效率不高。

让我们首先为自己创建一个带有编号样本的虚拟表（子查询）。（这在 MySQL 中是个痛点；其他一些昂贵的 DBMS 让它变得更容易。没关系。）

```
 SELECT @sample:=@sample+1 AS entry_num, c.entry_time, c.value
    FROM (
        SELECT entry_time, value
      FROM table
         ORDER BY entry_time
    ) C,
    (SELECT @sample:=0) s 
```

这个小虚拟表给出了 entry_num、entry_time 和 value。

下一步，我们将其加入自身。

```
SELECT one.entry_num, one.entry_time, one.value, 
       TIMEDIFF(two.value, one.value) interval
  FROM (
     /* virtual table */
  ) ONE
  JOIN (
     /* same virtual table */
  ) TWO ON (TWO.entry_num - 1 = ONE.entry_num) 
```

这将相邻的两个表排成一行，彼此偏移一个条目，由 JOIN 的 ON 子句控制。

最后，我们从该表中选择`interval`大于您的阈值的值，并且在丢失的样本之前有样本的时间。

整个自连接查询是这样的。我告诉过你这是一个毛球。

```
SELECT one.entry_num, one.entry_time, one.value, 
       TIMEDIFF(two.value, one.value) interval
  FROM (
    SELECT @sample:=@sample+1 AS entry_num, c.entry_time, c.value
      FROM (
          SELECT entry_time, value
            FROM table
           ORDER BY entry_time
      ) C,
      (SELECT @sample:=0) s
  ) ONE
  JOIN (
    SELECT @sample2:=@sample2+1 AS entry_num, c.entry_time, c.value
      FROM (
          SELECT entry_time, value
            FROM table
           ORDER BY entry_time
      ) C,
      (SELECT @sample2:=0) s
  ) TWO ON (TWO.entry_num - 1 = ONE.entry_num) 
```

如果您必须在生产环境中对大型表执行此操作，您可能希望对数据的子集执行此操作。例如，您可以每天对前两天的样本执行此操作。这将非常有效，并且还可以确保您在午夜时不会忽略任何丢失的样本。为此，您的小行编号虚拟表将如下所示。

```
 SELECT @sample:=@sample+1 AS entry_num, c.entry_time, c.value
    FROM (
        SELECT entry_time, value
      FROM table
         ORDER BY entry_time
         WHERE entry_time >= CURRENT_DATE - INTERVAL 2 DAY
           AND entry_time < CURRENT_DATE /*yesterday but not today*/
    ) C,
    (SELECT @sample:=0) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T16:53:36.367

一种非常有效的方法是使用游标的存储过程。我认为这比其他答案更简单、更有效。

此过程创建一个游标并遍历您正在检查的日期时间记录。如果有超过您指定的间隙，它会将间隙的开始和结束写入表格。

```
 CREATE PROCEDURE findgaps()
    BEGIN    
    DECLARE done INT DEFAULT FALSE;
    DECLARE a,b DATETIME;
    DECLARE cur CURSOR FOR SELECT dateTimeCol FROM targetTable
                           ORDER BY dateTimeCol ASC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;     
    OPEN cur;       
    FETCH cur INTO a;       
    read_loop: LOOP
        SET b = a;
        FETCH cur INTO a;   
        IF done THEN
            LEAVE read_loop;
        END IF;     
        IF DATEDIFF(a,b) > [range you specify] THEN
            INSERT INTO tmp_table (gap_begin, gap_end)
            VALUES (a,b);
        END IF;
    END LOOP;           
    CLOSE cur;      
    END; 
```

在这种情况下，假定存在“tmp_table”。您可以在过程中轻松地将其定义为 TEMPORARY 表，但我在此示例中省略了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-15T00:14:05.387

我在 MariaDB 10.3.27 上尝试这个，所以这个过程可能不起作用，但我在创建过程时遇到错误，我不知道为什么！我有一个名为的表`electric_use`，其中包含一个`Intervaldatetime DATETIME`我想在其中找到空白的字段。我创建了一个目标表`electric_use_gaps`，其中包含`gap_begin datetime`和`gap_end datetime`

数据每小时采集一次，我想知道我是否在 5 年内丢失了一个小时的数据。

```
 DELIMITER $$  
  CREATE PROCEDURE findgaps()
    BEGIN    
    DECLARE done INT DEFAULT FALSE;
    DECLARE a,b DATETIME;
    DECLARE cur CURSOR FOR SELECT Intervaldatetime FROM electric_use
                           ORDER BY Intervaldatetime ASC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;     
    OPEN cur;       
    FETCH cur INTO a;       
    read_loop: LOOP
        SET b = a;
        FETCH cur INTO a;   
        IF done THEN
            LEAVE read_loop;
        END IF;     
        IF TIMESTAMPDIFF(MINUTE,a,b) > [60] THEN
            INSERT INTO electric_use_gaps(gap_begin, gap_end)
            VALUES (a,b);
        END IF;
    END LOOP;           
    CLOSE cur;      
    END&&

    DELIMITER ; 
```

这是错误：

```
Query: CREATE PROCEDURE findgaps() BEGIN DECLARE done INT DEFAULT FALSE; DECLARE a,b DATETIME; DECLARE cur CURSOR FOR SELECT Intervalda...

Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '[60] THEN
            INSERT INTO electric_use_gaps(gap_begin, gap_end)
   ...' at line 16 
```

# vba - 无法避免 Microsoft Outlook 的电子邮件警告

> ID：11085599
> 
> 赞同：1
> 
> 时间：2012-06-18T15:03:32.433
> 
> 标签：vba, outlook, ms-access-2007

我在 Microsoft Access 中有一组记录，我正试图通过电子邮件发送这些记录。电子邮件功能很好用。除了每次准备发送消息时都会弹出一条警告消息，并且用户必须为每封发送的电子邮件单击“允许”或“拒绝”。我查找了一种解决方法，并一直在关注它的教程： [http](http://www.everythingaccess.com/tutorials.asp?ID=Outlook-Send-E-mail-Without-Security-Warning) ://www.everythingaccess.com/tutorials.asp?ID=Outlook-Send-E-mail-Without-Security-Warning 。
我的问题是，当我将消息放入函数时，它总是返回 false，并且消息失败。任何帮助，将不胜感激。

```
Dim sendMail As Boolean
Dim strMessage As String
strMessage = Some Message
sendMail = FnSafeSendEmail(![Email Id], "Subject", strMessage) 
```

整个“FnSafeSendEmail”功能可以在提供的链接中找到。这些是参数。

```
Public Function FnSendMailSafe(strTo As String, _
                            strCC As String, _
                            strBCC As String, _
                            strSubject As String, _
                            strMessageBody As String, _
                            Optional strAttachments As String) As Boolean 
```

在函数的这一行抛出错误“对象不支持此属性或方法”。

```
Dim blnSuccessful As Boolean
blnSuccessful = objOutlook.FnSendMailSafe(strTo, strCC, strBCC, _
                                            strSubject, strMessageBody, _
                                            strAttachmentPaths) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:21:25.860

解决。我不得不在 Microsoft Outlook 的信任中心禁用宏的安全检查。

# cookies - ExtJS 4.0 无法从 cookie 中读取 connect.sid

> ID：11085603
> 
> 赞同：0
> 
> 时间：2012-06-18T15:03:45.943
> 
> 标签：cookies, extjs, state, connect, sid

我尝试使用 ExtJs 4.0 开发 Web 应用程序。

启动时，应用程序向服务器发送请求。该服务器发送响应。响应的标题包含`Set-Cookie:"connect.sid=foobar"`

当我查看浏览器的首选项时，我可以看到 cookie 已正确创建。

我的问题是我无法在我的 ExtJs 应用程序中访问这个 cookie，我不知道为什么。

我尝试使用以下方法检索它：

*   `document.cookie.split(";")[0]`

*   `Ext.state.Manager.get("connect.sid");`=> 当然，我用 cookie 提供程序初始化了状态管理器

*   `Ext.util.Cookies.get("connect.sid");`

无论我使用哪种方法，我总是得到`undefined`返回值

我希望有人可以帮助我，因为我真的不明白为什么它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:26:13.230

最后我发现了问题。

该`httpOnly`标志在响应标头中设置。因此，java 脚本无法访问 cookie。

# sql - 无法删除我没有创建的程序集，“DROP ASSEMBLY”不允许将模式名称指定为程序集名称的前缀

> ID：11085609
> 
> 赞同：3
> 
> 时间：2012-06-18T15:04:08.937
> 
> 标签：sql, sqlclr

我在 Microsoft SQL Server Management Studio CLR 中工作，将 .dll 作为程序集注册到数据库中。现在，我正在将 Jayrock（Jayrock.dll、Jayrock.Json.dll）DLL 注册到数据库中。这是一个正在进行的项目，有几个人编辑数据库和 SQL 代码。我放弃了所有已更改（和未更改）的程序集和程序，以从第一格开始。当我去删除“web”的程序集时（下面的代码）

```
CREATE ASSEMBLY Web
AUTHORIZATION dbo
FROM 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Web.dll'
WITH PERMISSION_SET = UNSAFE
GO 
```

我收到错误消息：

```
DROP ASSEMBLY failed because the specified assemblies are referenced by assembly 'Jayrock.Json'. 
```

我从来没有一个名为 Jayrock.Json 的程序集，而且我的团队中没有人创建过这样的程序集。尝试删除它会从该问题的标题中获取错误消息：

```
drop assembly Jayrock.Json
go

"DROP ASSEMBLY" does not allow specifying a schema name as a prefix to the assembly name. 
```

我添加了 ' ' 和 ( ) 仍然不允许我删除这个程序集。我已经删除了所有创建的程序集，但“Web”仍然不会删除。我不太确定我能做什么，因为创建我需要使用 Jayrock 的程序集不起作用，因为它与“Jayrock.Json”程序集相同。我的代码中存在某种错误，因为我从 C# 中获得与反序列化相关的异常，并且如果我无法正确添加我的程序集，我将无法调试这些程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:17:43.927

运行以下命令并查看您是否有一个名为“Jayrock.Json”的程序集。

```
SELECT * FROM Sys.Assemblies WHERE name like '%Json%' 
```

如果你这样做，就像 Martin Smith 在他的评论中所说的那样，你需要在 DROP 语句中的对象名称周围加上 []。

# javascript - Chrome 开发者工具 javascript 版

> ID：11085612
> 
> 赞同：0
> 
> 时间：2012-06-18T15:04:17.750
> 
> 标签：javascript, google-chrome-devtools

当我打开 Chrome 开发者工具 JavaScript 控制台以获取 REPL 时，它使用的 JavaScript 版本似乎低于 1.8。`let`语句、新样式函数等给我语法错误。有什么方法可以更改使用的 JavaScript 版本吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:07:32.947

Chrome 的 JS 引擎最符合[ECMAScript 5](http://es5.github.com/)。JavaScript 版本编号方案来自 Mozilla，`let`语句、`yield`等功能是 Mozilla 对 JavaScript 的唯一扩展。

# sql - SQL 在哪里

> ID：11085613
> 
> 赞同：1
> 
> 时间：2012-06-18T15:04:19.403
> 
> 标签：sql

假设您有这些表：

```
PHARMACY(**___id_pharmacy___**, name, addr, tel)
PHARMACIST(**___Insurance_number___**, name, surname, qualification, **id_pharmacy**)
SELLS(**___id_pharmacy___**, **___name___**, price)
DRUG(**___Name___**, chem_formula, **id_druggistshop**)
DRUGGISTSHOP(**___id_druggistshop___**, name, address) 
```

我认为这将更加具体。

因此，我正在尝试构建一个 SQL 语句，在该语句中，我将从 id_pharmacy 和 name FROM PHARMACY 中获取数据，从 PHARMACIST 中获取保险编号、姓名和姓氏列，用于所有销售名为 Kronol 的药物的药店。

基本上就是这样。我知道我错过了我之前编写的代码中的关系。

注意：那些左右有下划线的列名带有下划线（主键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:13:44.110

您编写的查询在我知道的任何 DBMS 中都不起作用。

您很可能希望使用`JOINs`.

由于没有提供确切的模式，请考虑这个伪代码，但希望它能让你走上正轨。

```
SELECT PH.Ph_Number, PH.Name, PHCL.Ins_Number, PHCL.Name, PHCL.Surname
FROM   PH
  INNER JOIN PHCL ON PHCL.PH_Number = PH.Ph_Number
  INNER JOIN MLIST ON MLIST.PH_Number = PH.PH_Number
WHERE MLIST.Name = "Andy" 
```

我显然已经假设了可能存在或不存在的表之间的某些关系，但希望这会非常接近。该`UNION`运算符将不起作用，因为您要从各个表中选择不同的列和不同数量的列。对于您要尝试做的事情，这都是错误的方法。还值得一提的是，a`LEFT JOIN`可能对您来说是更好的选择，也可能不是更好的选择，具体取决于您要满足的确切要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:33:18.297

好的，试试这个查询：

```
SELECT  A.id_pharmacy, A.name AS PharmacyName, B.Insurance_number, 
        B.name AS PharmacistName, B.surname AS PharmacistSurname
FROM PHARMACY A
LEFT JOIN PHARMACIST B
ON A.id_pharmacy = B.id_pharmacy
WHERE A.id_pharmacy IN (SELECT id_pharmacy FROM SELLS WHERE name = 'Kronol') 
```

# mercurial - 有哪些工具或技术可用于“数据挖掘”我的 mercurial 存储库？

> ID：11085615
> 
> 赞同：11
> 
> 时间：2012-06-18T15:04:21.460
> 
> 标签：mercurial, code-statistics

我们在 Mercurial 中有一个 2,000,000 行的代码应用程序。显然，这个存储库中有很多有价值的信息。

是否有任何工具或技术可以挖掘其中的一些信息？

例如，在项目的历史中，哪五个文件的变化最大？哪五个文件与一年前最不一样？是否有任何特定的代码行出现大量流失？

我对这类事情甚至更多感兴趣。

有没有办法从我们的存储库中提取这种信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T16:27:36.057

我不知道有什么专门为此而设计的工具，但是 Mercurial 的日志模板对于从系统中获取数据非常强大。我过去做过一些此类分析，我的方法是：

1.  用于`hg log`将提交转储为某种方便的格式（在我的情况下为 xml）
2.  编写一个脚本将 xml 导入到可查询的东西（数据库，或者直接从 XML 中工作，如果它不是太大的话）

这是一个示例`hg log`命令，可以帮助您进行操作：

mystyle.txt：（模板）

```
changeset = '<changeset>\n<user>{author|user}</user>\n<date>{date|rfc3339date|escape}</date>\n<files>\n{file_mods}{file_adds}{file_dels}</files>\n<rev>{node}</rev>\n<desc>{desc|strip|escape}</desc>\n<branch>{branches}</branch><diffstat>{diffstat}</diffstat></changeset>\n\n'
file_mod = '<file action="modified">{file_mod|escape}</file>\n'
file_add = '<file action="added">{file_add|escape}</file>\n'
file_del = '<file action="deleted">{file_del|escape}</file>\n' 
```

使用模板和日期范围的示例调用：

```
hg --repository /path/to/repo log -d "2012-01-01 to 2012-06-01" --no-merges --style mystyle.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T11:08:59.477

试试内置的[hg churn](http://mercurial.selenic.com/wiki/ChurnExtension)扩展。例如，我喜欢使用它的一件事是查看每月提交的条形图，如下所示：

```
> hg churn -csf '%Y-%m'

2014-02     65 *************************************
2014-03     22 *************
2014-04     52 ******************************
2014-05     67 ***************************************
2014-06     31 ******************
2014-07     29 *****************
2014-08     29 *****************
2014-09     61 ***********************************
2014-10     36 *********************
2014-11     23 *************
2014-12     32 ******************
2015-01     60 ***********************************
2015-02     20 ************ 
```

（如果您发现自己经常使用该命令，可能需要设置别名）

# iphone - 如何分别从 URL 加载一些图像以滚动视图？目标-c

> ID：11085616
> 
> 赞同：0
> 
> 时间：2012-06-18T15:04:26.050
> 
> 标签：iphone, objective-c, url, uiscrollview, uiimageview

我有这个滚动视图，我从 URL 中加载了几张图片。问题是滚动视图在全部加载之前不会显示它们中的任何一个。我想在我完成加载她的那一刻显示每张图片。

我的代码如下所示：

```
-(void)loadPhotosToLeftscroll{

    for (int count = 0 ; count < [leftPhotoArray count]; count++) {
        NSLog(@"nextPhotoHight: %f",nextLeftPhotoHight);

        NSMutableDictionary *photoDict;
        photoDict = [leftPhotoArray objectAtIndex:count];

        float photoHight = [[photoDict objectForKey:@"photos_height"]floatValue];
        float photoWide= [[photoDict objectForKey:@"photos_width"]floatValue];
        NSString *photoPath = [photoDict objectForKey:@"photos_path"];

        NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString:photoPath]];

        UIImage *image = [[UIImage alloc] initWithData:imageData];

        UIImageView *photoView = [[UIImageView alloc]initWithFrame:CGRectMake(10 , nextLeftPhotoHight, photoWide, photoHight )];

        [photoView setImage:image]; 
        [photoView.layer setMasksToBounds:YES];
        [photoView.layer setCornerRadius:6];

        nextLeftPhotoHight = photoView.frame.size.height + photoView.frame.origin.y + 10;

        [leftBlockScroll addSubview:photoView];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:17:02.000

你最好使用异步方式来做到这一点。

相对主题是NSURLConnection、UIImageView。

我以前做过类似的事情。1\. 创建一个继承 UIView 的新模型 2\. 这个模型会有一个 UIImageView, NSData 3\. 当你初始化模型时，传入一个 URL 4\. 使用 NSURLConnection 发送 AsynchroizedRequest 5\. 通过使用 NSURLConnection 委托，你最终会得到图片的数据 6\. 用这些数据初始化一个 UIImage 7\. 用这个 Image 初始化 UIImageView 8\. 把这个 imageview 添加到这个 model 或者直接把这个 model 指向 imageview

随时询问更多详细信息:)

# jquery - jQuery Mobile：在方向更改时隐藏页眉/页脚

> ID：11085617
> 
> 赞同：1
> 
> 时间：2012-06-18T15:04:26.483
> 
> 标签：jquery, jquery-mobile

当调用设备方向事件时，我需要能够隐藏页眉/页脚（我也愿意将它们的 data-position="fixed" 属性更改为非固定）

我试过了：

```
$(window).bind('orientationchange resize', function(event){

            if(event.orientation == 'portrait') {
                //do something
            } 
            if (event.orientation == 'landscape') {
                $.mobile.fixedToolbars.show(false);
            }
    }); 
```

我也用过：

```
$.mobile.fixedToolbars.hide(true); 
```

但似乎两者都没有奏效。这是否已从 JQM 1.1 中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:27:27.183

使用 css 媒体查询，根据设备方向隐藏元素非常简单：

```
/* portrait */
@media screen and (orientation:portrait) {
  /* portrait-specific styles */
}

/* landscape */
@media screen and (orientation:landscape) {
  /* landscape-specific styles */
} 
```

这是工作示例：

[http://jsfiddle.net/5TDg9/bwzdr/show/](http://jsfiddle.net/5TDg9/bwzdr/show/)

（请务必使用您的移动设备打开此链接）

* * *

编辑：

我用基于javascript的方向检测（添加到css）改进了上面的示例，理论上你可以在“case”之后传递任何东西：

```
$(window).bind( 'orientationchange', function(e){
    var orientation="portrait";
    if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";

    $("#status").html(orientation);  

    switch(orientation){
      case 'portrait':
        // alert('portrait');
        $.mobile.fixedToolbars.setTouchToggleEnabled(true);
        break;
      case 'landscape':
        // alert('landscape');        
        $.mobile.fixedToolbars.setTouchToggleEnabled(false);
        break;
      default:
        break;
    };        
}); 
```

[这里的](http://jsfiddle.net/5TDg9/npZwx/)例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:53:22.637

你可以使用类似的东西：

```
$(window).bind('orientationchange', function(event) {
    if (event.orientation == 'landscape' ) {
        $.mobile.fixedToolbars.show(false);
    } else {
        $.mobile.fixedToolbars.show(true);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:38:03.780

根据页脚的名称，您可以在方向检测功能中简单地执行此操作。

```
yourfooter.hide(); 
```

这与将 div 设置为 style="display:none;" 相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:11:12.260

在 JQM 1.1 中，函数的名称全部小写。不再支持以前的方法。

节目：

```
$("[data-position='fixed']").fixedtoolbar('show'); 
```

隐藏：

```
$("[data-position='fixed']").fixedtoolbar('hide'); 
```

**[有关文档的更多信息。](http://jquerymobile.com/test/docs/toolbars/bars-fixed-methods.html)**

# jquery - 关于 Jquery 显示/隐藏

> ID：11085619
> 
> 赞同：0
> 
> 时间：2012-06-18T15:04:29.483
> 
> 标签：jquery

我正在尝试调整此脚本，以便一旦您单击图像，它会拉下另一个 div，然后一旦您单击另一个，它就会带来该信息，而不是两者等。

```
(function ($) {
    $.fn.showHide = function (options) {
        //default vars for the plugin
        var defaults = {
            speed: 1000,
            easing: '',
            changeText: 0,
            showText: 'Show',
            hideText: 'Hide'
        };
        var options = $.extend(defaults, options);
        $(this).click(function () {
            $('.toggleDiv').slideUp(options.speed, options.easing);
            // this var stores which button you've clicked
            var toggleClick = $(this);
            // this reads the rel attribute of the button to determine which div id to toggle
            var toggleDiv = $(this).attr('rel');
            // here we toggle show/hide the correct div at the right speed and using which easing effect
            $(toggleDiv).slideToggle(options.speed, options.easing, function () {
                // this only fires once the animation is completed
                if (options.changeText == 1) {
                    $(toggleDiv).is(":visible") ? toggleClick.text(options.hideText) : toggleClick.text(options.showText);
                }
            });
            return false;
        });
    };
})(jQuery); 
```

请指教。感谢[http://papermashup.com/simple-jquery-showhide-div/](http://papermashup.com/simple-jquery-showhide-div/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:06:44.633

看看 jQuery[切换事件处理程序](http://api.jquery.com/toggle-event/)，它允许您将两个函数绑定到元素，并在交替单击时执行它们。这样，您就不必跟踪您正在进行的点击、您是否可见等。

简而言之，您将使用处理程序替换您`click`的处理`toggle`程序，该处理程序将具有两个功能：

```
 $(this).toggle(function () {
        //what to do when your element is in its initial state
    }, function() {
        //what to do when your element is in its "clicked once" state
    } 
```

# c# - 带有复选框列的Datagridview不保留未选中的值C#

> ID：11085620
> 
> 赞同：1
> 
> 时间：2012-06-18T15:04:32.947
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

我有一个带有 datagridview 的 Winform，这个 datagridview 有一个复选框列。

我用数据表中的数据填充datagridview，它完全正确，并且复选框列使用数据表中的值进行检查，表明记录有效，而未检查表明记录无效的值。

如果我取消选中选中的行工作正常，选中的单元格将变为未选中，但是当我尝试取消选中 2 行或更多行时，问题就开始了，正是当我尝试取消选中第二行时，第一行（我之前取消选中的那个）突然变为选中，而第二个变为未选中，依此类推。

当我尝试取消选中第三行时，它变为未选中，但第二行突然变为选中。

我能做什么，必须更改 Datagridview 的哪个属性才能启用多个取消选中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:13:53.653

在我看来，您的取消检查可能不会保存，您每次取消检查时都会回帖吗？如果是这样，您是否有每次取消选中时保存更改的代码，因为如果您取消选中而不保存然后取消选中另一个，它可能正在刷新数据，并且由于第一次取消选中从未保存过，它再次显示为已选中。

# extjs - Sencha Touch 2 - 从控制器检索表单值时未定义 getValues()

> ID：11085621
> 
> 赞同：0
> 
> 时间：2012-06-18T15:04:34.830
> 
> 标签：extjs

我正在尝试创建一个嵌入在 Panel 中的表单，并尝试从控制器中检索表单字段的内容。

下面是我的视图和控制器代码。

```
Ext.define('MyApp.view.SignIn', {
            extend: 'Ext.Container',
            requires: ['Ext.Button','Ext.form.Panel'],
            xtype: 'loginPage',

            config : {
                fullscreen: true,

                items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    html:'<img src="resources/icons/logo.png" />',
                    items: {
                                    iconMask: true,
                                    align: 'left',
                                    text: 'Sign In',

                                    handler: function(){

                                    var panel = Ext.create('Ext.Panel', {
                                             left: 0,
                                             padding: 10,                                   
                                             xtype: 'loginPage',
                                             url: 'contact.php',
                                             layout: 'vbox',
                                             id: 'signinform',

                                             items: [
                                                 {   
                                                            xtype: 'fieldset',
                                                            title : 'Enter Login Information:',
                                                            instructions: 'All fields are required',
                                                            layout: {
                                                                    type: 'vbox'
                                                            },                                              
                                                            items: [
                                                                {
                                                                    xtype: 'emailfield',
                                                                    name: 'Email',
                                                                    label: 'Email',
                                                                    placeHolder: 'Valid email'
                                                                },
                                                                {
                                                                    xtype: 'passwordfield',
                                                                    name: 'Password',
                                                                    label: 'Password',
                                                                    placeHolder: '6 characters'
                                                                }]
                                                  },
                                                  {                                            
                                                            layout: 'hbox',
                                                            items: [
                                                                 {
                                                                    xtype: 'button',
                                                                    text: 'Login',
                                                                    ui:'confirm',
                                                                    id:'Login-btn',
                                                                    width: '100px',
                                                                    flex: 1

                                                                  }, {
                                                                    width: '100px'
                                                                  }, {
                                                                    xtype: 'button',
                                                                    text: 'Register',
                                                                    ui: 'decline',
                                                                    width: '100px',
                                                                    flex: 1,
                                                                    handler: function(){                                                                
                                                                        this.getParent().getParent().destroy();                                                                                                                         
                                                                    }
                                                              }]//Buttons array

                                                   }//Form completion

                                            ]

                                        }).showBy(this); //Panel created

                                    }//Function complete                            
                    }
                },
                {
                    layout: {
                                type: 'vbox',
                                pack:'center',
                                align: 'center'
                    },
                    items:[{
                            html:'<h2>My tool</h2><h3 style="color:#F47621">Simple, intuitive and powerful data management tool.</h3>',
                            styleHtmlContent: true,
                    }
                    ]
                },
    ]
        },
         initialize: function() {
            this.callParent(arguments);
        },  
    }); 
```

这是我的控制器代码。我刚刚检查了控制器代码，使用更简单的表单视图似乎没问题。所以我想问题出在视图上。

```
Ext.define("MyApp.controller.SignIn", {
    extend : 'Ext.app.Controller',

    config : {
        refs    : {
            home      : '#homePage',
            login     : '#loginPage',
            SignIn : '#signinform'
        },

        control : {
            '#Login-btn': {
                tap : 'onLoginButtonTap'
            }
        }
    },

    onLoginButtonTap: function() {
        var formValues = this.getSignIn().getValues();
        console.log(formValues.username);
        console.log(formValues.password);
    }
});
        ]
    },
     initialize: function() {
        this.callParent(arguments);
    },  
});

What is wrong with the form creation in the View page. Why is the form coming as undefined. Experts please help 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T04:14:40.573

我相信您未定义的原因是因为在创建视图时这些组件不存在。

而不是在您的视图中创建面板 (Ext.create('Ext.Panel'...) 使用处理程序函数，您应该考虑将其定义为 xtype:loginpage 容器中的一个项目，其中隐藏：true。然后通过来自的侦听器控制器在隐藏组件上调用 show()。

我发现如果我在我的控制器中保留事件侦听器/处理程序，并在我的视图中保留布局/显示逻辑，我的应用程序变得更易于管理。

我也尽量避免调用 Ext.create(Ext.SomeCmpt) 而是使用 hidden 属性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:26:44.017

这里：

```
var panel = Ext.create('Ext.Panel', {
... 
```

您正在实例化一个简单面板而不是表单面板。可能你想说：

```
var panel = Ext.create('Ext.form.Panel', {
... 
```

# css - 正确创建居中的垂直导航列表，两边都有悬停图像？

> ID：11085625
> 
> 赞同：0
> 
> 时间：2012-06-16T01:50:02.780
> 
> 标签：css

我有一个放置在 a 中的导航列表，我试图在您悬停时获取显示在链接两侧的图像。基本上在链接的每一侧都有一个箭头。

我已经设法获得了我正在寻找的效果：

```
<ul>
          <li style=""> <a href="#">Services</a> </li>
          <li> <a href="#">About</a> </li>
          <li> <a href="#">Media</a> </li>
          <li> <a href="#">FAQ</a> </li>
          <li> <a href="#">Portfolio</a> </li>
          <li> <a href="#">Contact</a> </li>
        </ul>

.nav ul{
    list-style:none;
    text-align:center;

}

.nav li:hover a:before, .nav li:hover a:after {
    content:url(../images/nav_bullet.png);
} 
```

最终结果将如下所示，但列表居中：

```
link
>> Hovered Link <<
link 
```

但是我不确定这是否是最好的方法，并且图像太接近文本。我尝试放置边距和填充，但没有奏效。最重要的是，图像未与链接文本垂直居中。

任何人都知道这样做的正确方法，因为我只是通过反复试验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:57:23.637

我能够通过在不同站点上提供的答案来完成此操作，可以使用两种类似的方法来完成：如此处[所述](http://www.sitepoint.com/forums/showthread.php?861182-Properly-create-centered-vertical-navigation-list-with-a-hover-image-on-both-sides)

> 如果你给父元素 position: relative，你可以给那些伪元素 position: absolute 并更准确地定位它们。

第二种方法是：

```
.nav li:hover a:before, .nav li:hover a:after {
content:url(../images/nav_bullet.png);
margin:0 5px;/* horizontal margin*/
position:relative;
top:2px;/* or what ever you need */
} 
```

但是，当我通过反复试验学习所有内容时，即使这可行，任何人都可以确认这是否是解决此问题的正确方法，还是我应该采取不同的方式来符合合规性、标准和兼容性？

# grails - grails渲染pdf插件不起作用，简单的例子？

> ID：11085627
> 
> 赞同：3
> 
> 时间：2012-06-18T15:04:43.397
> 
> 标签：grails, controller, pdf-generation, rendering

我正在尝试使用渲染插件将一个简单的模板保存为 pdf，但无论我尝试什么，我都无法让它工作。我需要的只是将文件保存在服务器上的文件系统中并重定向到不同的页面。

目前 pdf 模板不需要任何参数，因为它只是打印 hello world。一旦我得到这个工作，我将尝试添加一些数据。

我收到错误说如果没有附加“/”，我需要指定一个控制器。但是我尝试添加它无济于事。另外，我不明白它需要哪个控制器，因为我尝试指定声明此操作的控制器。

有人可以看看这个并告诉我我做错了什么吗？

```
 RenderingService pdfRenderingService

 def displayPDFSummary = {
        ByteArrayOutputStream bytes = pdfRenderingService.render(template: "_pdfTemplate", controller:"RSSCustomerOrder", model: [origSessionId:params.origSessionId])
        def fos= new FileOutputStream('NewTestFile.pdf')
          fos.write(bytes)
          fos.close()

        render(template: "_pdfTemplate", params: [origSessionId:params.origSessionId])
    } 
```

我在控制台中收到以下错误消息：

```
groovy.lang.MissingMethodException: No signature of method: java.io.FileOutputStream.write() is applicable for argument types: (java.io.ByteArrayOutputStream)

(Then prints contents of template...)

Possible solutions: write([B), write(int), write([B), write(int), wait(), wait(long) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:47:20.117

你看过[FileOutputStream 文档](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html)了吗？没有 write(OutputStream) 方法。

试试`fos.write(bytes.toByteArray())`。此外，`bytes.writeTo(fos)`可能工作。

# android - 时间/日期更改监听器

> ID：11085628
> 
> 赞同：1
> 
> 时间：2012-06-18T15:04:43.913
> 
> 标签：android, alarmmanager

我想做一个时间或日期监听器，例如每天早上 9 点调用一个活动。我不确定最好的方法是什么？我知道我可以使用警报管理器，但我不知道如何让它重复？

有人知道吗？非常感谢您提前。

加油:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:07:51.573

> 我知道我可以使用警报管理器，但我不知道如何让它重复？

使用[`setRepeating()`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)并指定重复间隔[`INTERVAL_DAY`](http://developer.android.com/reference/android/app/AlarmManager.html#INTERVAL_DAY)：

```
 static void scheduleAlarms(Context ctxt) {
      AlarmManager mgr=(AlarmManager)ctxt.getSystemService(Context.ALARM_SERVICE);
      Intent i=new Intent(ctxt, ScheduledService.class);
      PendingIntent pi=PendingIntent.getService(ctxt, 0, i, 0);

      mgr.setRepeating(AlarmManager.ELAPSED_REALTIME,
                       SystemClock.elapsedRealtime() + AlarmManager.INTERVAL_DAY,
                       AlarmManager.INTERVAL_DAY, pi);
  } 
```

上面的代码将设置一个警报，从现在起 24 小时响起，此后每 24 小时响起一次。要让它从上午 9 点开始，请替换为`ELAPSED_REALTIME`上午9 点（今天或明天），例如通过对象。`RTC``SystemClock.elapsedRealtime() + AlarmManager.INTERVAL_DAY``Calendar`

# c - 如何在 C 程序中找到函数的结束地址？

> ID：11085633
> 
> 赞同：5
> 
> 时间：2012-06-18T15:04:54.833
> 
> 标签：c

起始地址可以从函数名中得到，如何找到函数的结束地址？我在面试中被问到这个问题：

考虑我编写的函数 f() 已经越过文本部分并开始写入相邻部分（数据部分）。我该如何处理这种情况？他还补充说我应该通过 C 代码来处理它。我不应该看到符号映射文件并获取地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T18:15:15.757

使用 GCC，您可以使用`&&`运算符（是 - `&&`，不是`&`）获取标签的地址。
这可以按如下方式使用：

```
void f(void) {
    printf("Start %p End %p\n", f, &&f_end);
    f_end: return;
} 
```

这不会给你确切的结局，因为标签后面有一些尾声代码，但我认为它足以作为面试答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:11:04.513

C 标准不保证存在函数的结束地址之类的东西。

在实践中，函数不一定是一块连续的内存，而是可以重叠，或者被代码优化器分割成几块。

出于这个原因，没有办法在运行时找到它。

此外，不能保证您从 GetProcAddress 或通过获取函数的地址（对于函数指针）获得的“起始地址”与代码的实际位置有任何关系。

函数指针的所有保证是，如果您通过地址调用该函数将被执行。它不保证代码实际上驻留在那里。例如，它可能只是一个 thunk 的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:10:22.317

您不能使用语言本身，C 没有公开函数的“大小”概念。

您可能能够做的是检查程序的二进制文件，并解析符号表等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:14:39.523

您的编译器可能会生成一个汇编列表文件，而您的链接器可能会生成一个映射文件。这些可以让您查看手动执行特定功能的时间。不确定是否需要从 C 程序本身确定大小。

# ios - 简单的滚动

> ID：11085634
> 
> 赞同：3
> 
> 时间：2012-06-18T15:04:56.910
> 
> 标签：ios, xcode, cocoa-touch, scroll

我有一个带有标签和文本框的简单视图控制器。但很多人都适合一个屏幕，所以我想添加一个滚动条。我需要一个滚动视图吗？我只找到了关于使用滚动视图进行缩放的教程。怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:46:49.337

是的，你应该使用 UIScrollView。这是一个很好的例子，如何使用[Apple 开发者库中的 scrollView](https://developer.apple.com/library/ios/#samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102)

以及[有关 UIScrollView 的文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:08:42.443

您需要添加一个滚动视图并将其内容大小设置为大于滚动视图的实际大小。将内容大小设置为大于滚动视图大小将启用滚动并显示滚动条...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:30:56.457

```
//Scroll Vertically
UIView *containerview = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 800)];
        [containerview addSubview:your label];
        [containerview addSubview:your textbox];
        ............

UIScrollView *scrv = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
        scrv.contentSize = CGSizeMake(containerview.frame.size.width ,containerview.frame.size.height);
        [scrv addSubview:containerview];

[self.view addSubview:scrv]; 
```

# c# - 从 Visual Studio 调试 HTTP 处理程序

> ID：11085648
> 
> 赞同：5
> 
> 时间：2012-06-18T15:05:33.990
> 
> 标签：c#, visual-studio-2010, httphandler, visual-studio-debugging

我正在尝试在**Visual Studio中调试****HTTP 处理**程序并且断点没有被命中。有没有人知道如何在 Visual Studio 中调试 HTTP 处理程序？

 **我在**Windows 7**机器上使用**VS 2010 Premium**、**.NET 4.0 。**在我的 Web 应用程序中，我在**/HTTPHandler/TrackingHandler.cs中有一个 HTTP 处理程序**

 ****以下是在我的**网络配置**文件中：

```
<system.webServer>
        <handlers>
            <add name="TrackingHandler" path="/tx/*" verb="*" type="ProjectNamespace.TrackingHandler" resourceType="Unspecified" preCondition="integratedMode" />
        </handlers>
  </system.webServer> 
```

我的**HTTP 处理**程序如下所示

```
namespace ProjectNamespace
{
    public class TrackingHandler : IHttpHandler
    {
        public bool IsReusable
        {
            get { return true; }
        }

        public void ProcessRequest(HttpContext context)
        {
             //Breakpoint on the very first line below
             string tracker = Path.GetFileName(context.Request.PhysicalPath);
              .......
         }
     }
} 
```

我使用**内置的 Web Server使用****Visual Studio Debug**中的任何随机页面启动我的 Web 应用程序。然后我手动编辑 URL 以指向**/tx/ 目录**和它之后的一些随机字符串。*例如，我当前的 URL 看起来像****http://localhost:53699/tx/sdfs****。***我认为这应该在ProcessRequest()**的第一行拉断点， 但事实并非如此。

 ******我会很感激任何想法。

面向对象

**编辑：附加信息**

在**Project Properties**的**Web Tab**中，我选择**了 Don't open a page。等待来自外部应用程序的请求。**我也得到了一个**System.Web.HttpException**，所以我去了**Debug -> Exceptions -> Common Language Runtime并选中了****System.Web**旁边的框。

以下是我的堆栈跟踪。它似乎没有到达我的处理程序。我是否在我的**Web 配置**中错误地定义了它？

```
>   System.Web.dll!System.Web.StaticFileHandler.GetFileInfo(string virtualPathWithPathInfo, string physicalPath, System.Web.HttpResponse response) + 0x1f7 bytes    
    System.Web.dll!System.Web.StaticFileHandler.ProcessRequestInternal(System.Web.HttpContext context = {System.Web.HttpContext}, string overrideVirtualPath) + 0xc7 bytes  
    System.Web.dll!System.Web.DefaultHttpHandler.BeginProcessRequest(System.Web.HttpContext context, System.AsyncCallback callback = {Method = {System.Reflection.RuntimeMethodInfo}}, object state = null) + 0x15c bytes   
    System.Web.dll!System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x2d7 bytes    
    System.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step = {System.Web.HttpApplication.CallHandlerExecutionStep}, ref bool completedSynchronously = true) + 0xb9 bytes  
    System.Web.dll!System.Web.HttpApplication.ApplicationStepManager.ResumeSteps(System.Exception error) + 0x13e bytes  
    System.Web.dll!System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(System.Web.HttpContext context, System.AsyncCallback cb, object extraData) + 0xf8 bytes  
    System.Web.dll!System.Web.HttpRuntime.ProcessRequestInternal(System.Web.HttpWorkerRequest wr = {Microsoft.VisualStudio.WebHost.Request}) + 0x1a2 bytes  
    System.Web.dll!System.Web.HttpRuntime.ProcessRequestNoDemand(System.Web.HttpWorkerRequest wr) + 0x7d bytes  
    System.Web.dll!System.Web.HttpRuntime.ProcessRequest(System.Web.HttpWorkerRequest wr) + 0x47 bytes  
    WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Request.Process() + 0x17b bytes 
    WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Microsoft.VisualStudio.WebHost.Connection conn = {System.Runtime.Remoting.Proxies.__TransparentProxy}) + 0x6c bytes 
    [Appdomain Transition]  
    WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(object acceptedSocket) + 0x83 bytes   
    mscorlib.dll!System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(object state) + 0x2d bytes 
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xb0 bytes    
    mscorlib.dll!System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() + 0x5a bytes 
    mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch() + 0x147 bytes  
    mscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() + 0x2d bytes    
    [Native to Managed Transition] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:12:41.487

将处理程序发布到它自己的 IIS 应用程序，然后[将](https://github.com/whut/AttachTo)Visual Studio 附加到 IIS，您就可以进行调试了。

如果您不想或无法部署到 IIS（在调试 HTTP 处理程序时，我配置 Post Build 脚本以将项目发布到 IIS），您可以通过将项目的启动选项设置为“不要”来调试 Cassini打开页面'并将 Visual Studio 附加到`aspnet_wp.exe`.

并且不要忘记以管理员身份运行 Visual Studio，否则附加将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:44:18.523

当所有其他方法都失败时，您可以使用 DebugBreak()、__debugBreak() 或 _asm int 3 在应用程序中生成[调试中断](http://msdn.microsoft.com/en-us/library/ea9yy3ey.aspx)。执行此操作并安装 MSDev 后，您应该会看到一个对话框，询问您是否要终止或调试。这使您可以立即运行并稍后附加，并且无需知道要附加到什么即可工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T10:04:31.177

如果您从选项工具->附加到进程并选择所需的进程将进程附加到断点（例如 w3wp.exe），断点将受到影响。************

# mysql - 如何在数据库 PHPMyAdmin 中映射两个表

> ID：11085649
> 
> 赞同：0
> 
> 时间：2012-06-18T15:05:47.983
> 
> 标签：mysql, database, database-design, phpmyadmin

我正在做一个项目，用户可以在网站上保存自己的优惠券代码，所以我想知道最好的方法是什么。

可以说，我有 1 个用户表，如下所示：

```
userId  |  firstName  | lastName  | codeId 
```

然后我有一张优惠券代码表，如下所示：

```
codeId  |  codeNumber 
```

所以我能做的就是连接`codeId`到，`userId`这样当有人保存优惠券时`codeId`，优惠券表中的优惠券就会进入`codeId`用户表的。

但是现在如果用户有多个优惠券，我该怎么办？他们应该如何连接到用户？

我有两个选择：

1.  `codeId`将优惠券表保存到`codeId`用户表中，例如`1,2,3,4,5`，

2.  在优惠券表中新建一行，并通过在优惠券表中添加另一个字段并将已添加优惠券的用户的名称`userId`放入其中，将用户连接到代码。`userId`

那么这两种选择哪个更好呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:11:03.547

两个表之间的多对多关系应该通过添加连接两者的第三个表来解决：

```
user_coupons
- userId
- couponId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:10:27.060

您的第一个选项违反了 1-NF 规则，它表示没有列将具有一组值。

这是典型的一对多关系。您的第二个选项是创建一个单独的表 User_Coupons（不是下划线）并为每个关联创建一个带有 UserID、CouponCode 的行。这两列一起应该是唯一的，以便它们都成为关联表的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:12:47.963

如果我是你，我的数据库将是：

```
userId  |  firstName  | lastName

codeNumber | userId 
```

如果需要，您可以为任何用户插入许多 codeNumber。

# sorting - 如何在 Solr 中关闭排序？

> ID：11085652
> 
> 赞同：0
> 
> 时间：2012-06-18T15:06:03.070
> 
> 标签：sorting, solr, priority-queue

我有许多文档存储在 Solr 集群中，并希望通过特定查询获取大量文档（大约 2000 万个）。我使用标准方法读取成批的行（例如，10000）并使用`start`参数移动到下一批。然而，在大约 1 400 000 份文档之后，我开始获得`OutOfMemoryError`. 我相信这是因为 Solr 在将文档发送给客户端之前对其进行排序的方式。据我所知，它使用优先级队列仅获取前 N 个结果，因此不需要将*所有*文档的标题加载到内存中。但是，当我要求它返回结果时，比如说，从 1,000,000 到 1,010,000，它也必须为所有之前的 1,000,000 个文档加载标题。

我正在寻找一种方法来避免这种情况，并且**无需排序即可****获得所有**满足查询的结果。有没有办法做到这一点？如果不是，从 Solr 获得大量结果的适当方法是什么？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:43:06.607

你的假设是正确的。当您搜索从 1,000,000 到 1,010,000 的结果时，Solr 会实例化大小为 1,010,000 的优先级队列。

这确实不是 Solr 的自然用例，它旨在返回结果的前 k 个列表，而不是详尽的结果列表。

您可以通过按主键 ( `q=yourquery&fq=ID:[1 TO 1000]&rows=1000`, `q=yourquery&fq=ID:[1001 TO 2000]&rows=1000`, ...) 的范围进行过滤来解决此问题，但这是一个丑陋的 hack。:-)

为什么你需要得到所有的结果？例如，如果您需要计算方面或统计数据，Solr 有两个组件可以有效地完成这项工作。**

# html - Apple Script：如何将 html 内容复制到剪贴板？

> ID：11085654
> 
> 赞同：11
> 
> 时间：2012-06-18T15:06:09.983
> 
> 标签：html, macos, applescript, rtf

我知道如何将纯文本复制到剪贴板：

```
oascript -e 'set the clipboard to "plain text"' 
```

但问题是如何将 html 内容复制到剪贴板？例如，如何将以下 html 内容复制到剪贴板：

```
<b>bold text</b> 
```

以便在将文本粘贴到 TextEdit 时得到粗体文本？

我在这里先向您的帮助表示感谢！

* * *

我为此找到了一个中间解决方案：

```
echo "<b>bold text</b>" | textutil -stdin -stdout -format html -convert rtf | pbcopy 
```

到目前为止，这很有效，但不幸的是我发现它不适用于图像标签：

```
echo "<img src=\"https://www.google.com/images/srpr/logo3w.png\">" | textutil -stdin -stdout -format html -convert rtf | pbcopy 
```

这不能做我想要的工作，所以有人知道原因吗？
谢谢！

* * *

我找到了一个可行的解决方案并将其发布在下面:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-18T18:55:02.113

我找到了一个解决方案，想法是直接使用 HTML 类而不是 RTF 类。（TextEdit 或 Web 编辑器可以处理这个 HTML 类以及 RTF 类数据）
您所要做的就是将您的 html 代码转换为原始十六进制代码。
完整的代码如下所示：

```
hex=`echo -n "your html code here" | hexdump -ve '1/1 "%.2x"'`
osascript -e "set the clipboard to «data HTML${hex}»" 
```

当然，您可以将它们组合成一个句子。
希望这对任何感兴趣的人有所帮助。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-20T04:18:26.043

如果输入的 HTML 太大，@kj 的解决方案将不起作用，您可能会遇到如下错误消息：

```
/usr/bin/osascript: Argument list too long 
```

我通过将@kj 的解决方案转换为可执行文件并通过管道处理数据，对它进行了一些改进。我希望它也有帮助。

# 可执行文件

~/bin/pbcopyhtml:

```
#!/bin/sh
printf "set the clipboard to «data HTML$(cat $@ | hexdump -ve '1/1 "%.2x"')»" | osascript - 
```

# 用法

## 从管道

```
$ printf '# title\n\n- list\n- list' | cmark | ~/bin/pbcopyhtml
$ osascript -e 'the clipboard as record'
«class HTML»:«data HTML3C68313E7469746C653C2F68313E0A3C756C3E0A3C6C693E6C6973743C2F6C693E0A3C6C693E6C6973743C2F6C693E0A3C2F756C3E0A» 
```

## 从文件

```
$ printf '# title\n\n- list\n- list' | cmark > sample.html
$ ~/bin/pbcopyhtml sample.html
$ osascript -e 'the clipboard as record'
«class HTML»:«data HTML3C68313E7469746C653C2F68313E0A3C756C3E0A3C6C693E6C6973743C2F6C693E0A3C6C693E6C6973743C2F6C693E0A3C2F756C3E0A» 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:39:32.147

我对 AppleScript 不是很擅长，但这里有一些有用的东西。不幸的是，因为它会打开一个 Safari 窗口，所以它不是即时的。您可能需要调整延迟值以补偿较慢的性能，但在我的测试中，0.25 秒似乎足够长。

```
set theHTML to "<b>bold text</b>"

tell application "Safari"
    open location "data:text/html," & theHTML
    activate
    tell application "System Events"
        keystroke "a" using {command down}
        keystroke "c" using {command down}
    end tell
    delay 0.25
    close the first window
end tell 
```

之后，渲染的文本应该在您的剪贴板上，准备粘贴到 TextEdit 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-31T18:50:08.813

我无法在优胜美地的这个线程中使用任何其他解决方案。将 RTF 内容放入剪贴板时，粘贴到 TextEdit 时工作正常，但粘贴到 Chrome 时不起作用（我想将脚本粘贴到 Google 表格电子表格中）。最终我能够让它工作：

```
set rawHTML to "<a href=\"" & gmailURL & "\">" & myTitle & "</a>"
set escapedData to do shell script "echo " & (quoted form of rawHTML) as «class HTML»
set the clipboard to escapedData 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T05:56:37.220

抱歉，您的代码甚至无法在 OS X Mavericks 的 AppleScript 编辑器中编译

```
hex=`echo -n "your html code here" | hexdump -ve '1/1 "%.2x"'`
osascript -e "set the clipboard to «data HTML${hex}»" 
```

但是，我发现以下代码运行良好：

```
set the_HTML to "<font size=4 face=\"verdana\"><a href=\"" & the_url & "\" target=_blank>" & link_text & "</a></font>"
--set the clipboard to the_text

do shell script "echo " & quoted form of the_HTML & " | textutil -format html -convert rtf -stdin -stdout | pbcopy -Prefer rtf" 
```

当然，您需要在上述语句之前设置 AppleScript 变量“the_url”和“link_text”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-03T09:23:17.510

（扩展了 Ryan Pattersson 的答案，就像一个魅力。）

您可以创建一个子例程，将链接放置到剪贴板，然后从代码中的多个位置调用它

```
my urlToClipboard("Gmail", "http://gmail.com")

on urlToClipboard(theTitle, theUrl)
    set rawHTML to "<a href=\"" & theUrl & "\">" & theTitle & "</a>"
    set escapedData to do shell script "echo " & (quoted form of rawHTML) as «class HTML»
    set the clipboard to escapedData
end urlToClipboard 
```

# python - Django 项目间歇性宕机

> ID：11085655
> 
> 赞同：1
> 
> 时间：2012-06-18T15:06:12.847
> 
> 标签：python, django, mod-wsgi, python-2.6

我有一个 django 项目，每天都会失败一次。我不知道为什么会发生这种情况，我在错误日志中看到的只是“脚本头过早结束”。我最近将 mod_wsgi 升级到了最新的 3.3，但这仍然会发生。

我还将线程增加到 25，进程增加到 2，但仍然没有帮助。我目前正在使用 monit 在 apache 出现故障时重新启动它，但我想尽快解决这个问题。

任何帮助将不胜感激，因为我迷路了..

谢谢

编辑：下面的 Mod_wsgi conf

```
WSGIDaemonProcess live user=xxx group=xxx threads=25  processes=2 inactivity-timeout=10
WSGIProcessGroup live

WSGIScriptAlias / /home/hosting/wsgi/live.wsgi 
```

# javascript - 用 Backbone 交换视图？

> ID：11085660
> 
> 赞同：2
> 
> 时间：2012-06-18T15:06:54.287
> 
> 标签：javascript, jquery, backbone.js

我环顾四周，但尚未找到解决以下问题的好方法：

我有一个与页面上的 el 相关联的主干视图，它是一个容器元素，在传统意义上我将其称为“侧边栏”（为了解释起见）。 *这个侧边栏元素的 inner-html 需要根据 route 完全改变*。但是，*页面上的位置永远不会改变，并且会一直填满这个容器*。

现在，对于一个初始原型，我在这个容器和放置在其中的视图之间建立了 1:1 的关系（我只编写了一条路线）。但是，现在，正如我所提到的，所述视图需要根据路线进行更改。

由于这些不同的视图具有完全不同的 html 标记、对事件的响应等......**我曾认为拥有一个可以在 sub-views 中交换的更高级别的视图是有意义的**。当然，一种可行的解决方案是***在***同一个视图中处理所有内容，但必要的逻辑会很麻烦（而且非常笨拙）。

**目前，这是我的想法（并已部分实施）**：

*   拥有此页面元素的顶级视图。
*   根据路线，在必要的子视图中交换。
    *   这些子视图使用dust.js 渲染，页面上仅此组件的.html 模板通过AJAX 延迟加载、编译和缓存。随后的渲染只包括使用新上下文调用缓存的“编译”函数。
    *   此外，我将在顶级视图中初始化和缓存每个子视图视图，这样我就只实例化、设置事件处理程序等一次。

然后，根据路线，查找关联的子视图视图（缓存），并将其交换到当前视图的位置。

现在，正如我所提到的，我已经将其大部分编码和......半工作。但是，我正在努力解决的是**如何让这些子视图中的每一个独立存在并处理交换，但无论组件当前是否显示，都保持所有事件处理程序和当前状态继续存在**。

***基本上：***

*   如何避免每次需要时完全破坏/重新实例化子视图。也许这个操作并不像我想象的那么昂贵，我应该简单地做后者。
*   由于顶层视图（“经理”，如果你愿意的话）与容器 $el 绑定，如何交换子视图。

我确信有一个简单、优雅的解决方案。我只是还没有找到它，不幸的是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:56:24.953

就第 1 点而言，我认为每次都创建视图并不太昂贵。

对于第 2 点 - 我建议使用 Backbone.Marionette [https://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)。它具有布局的概念，可让您定义应用程序的不同区域并单独渲染/管理它们。

我会推荐 Backbone.Marionette，不仅仅是第 2 点，而且我认为它允许您管理交互的方式比标准 Backbone 好得多。

# android - 选择浏览器查看存储在 SD 卡上的 html 文件

> ID：11085665
> 
> 赞同：0
> 
> 时间：2012-06-18T15:07:25.907
> 
> 标签：android, android-intent

我的应用程序创建一个表单，并将其保存为 SD 卡上的 html 文件。我可以将 html 文件加载到 webview 中，以便用户查看表单，

但是，我希望用户也能够在他们选择的浏览器中查看文件。（我注意到 Firefox 具有“另存为 pdf”功能，用户可能会发现它很有用。）

我如何使用意图来做到这一点。我试过了，但应用程序因错误而关闭..

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:17:31.683

这将在股票浏览器应用程序中打开您的 html 文件：

```
Uri uri = Uri.fromFile(file);
Intent browserIntent = new Intent(Intent.ACTION_VIEW).setData(uri);
browserIntent.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
startActivity(browserIntent); 
```

我想如果您找到 firefox 应用程序的包名/活动名称并替换`setClassName()`方法中的股票浏览器，它将适用于 firefox。但最终由 Mozilla 来实现这个功能，我还没有测试过他们是否这样做。

# mysql - 如何在mysql表中的多列中显示一行数据

> ID：11085672
> 
> 赞同：0
> 
> 时间：2012-06-18T15:07:37.140
> 
> 标签：mysql

我有一张关于产品评论的表格。我像这样将数据保存在表中

```
 id| value|
___|______|
1  |Our pr|
2  |oduct |
3  |availa|
4  |ble in|
5  |all re|
6  |tailer|
7  |shop. | 
```

我想像这样在一行或一段中显示我们的产品在所有零售商店都有售。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:17:23.217

您将不得不使用`GROUP_CONCAT`，因为您想将数据组合在单独的行中。

尝试这个

`SELECT GROUP_CONCAT(value SEPARATOR '') FROM yourtablename`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:14:34.140

尝试这个：

```
mysql> set @a:=''

mysql> select @a:= concat (@a, ' ', value) from table1. 
```

有了它，您将拥有@a 中的所有值，并显示

```
mysql> select @a; 
```

# objective-c - 具有自定义对象数组的 NSUserDefaults

> ID：11085674
> 
> 赞同：0
> 
> 时间：2012-06-18T15:07:43.947
> 
> 标签：objective-c, memory, nsmutablearray, nsuserdefaults, nsdata

我有一个对象，我使用 NSKeyedArchiver 将其转换为 NSData，然后将其存储到 NSUserDefaults 中。除了对象拥有的数组元素之外，所有内容都被正确保存。数组中的所有对象都符合 NSCoder 协议（或任何他们所谓的 - 例如`self.property = [decoder decodeObjectForKey:@"key"] and [encoder encodeObjectForKey:@"key"]`）

当我保存对象时，数组的元素保留在数组中，但它们的属性本身不会被保存。我确实调用了该`sycnrhonize`方法，所以这不是问题。

请注意，所有其他时间我保存并加载它是正确的，它只是不保存属于对象的数组的元素。我必须单独保存吗？

“当前状态” NSNumber 没有被保存。正在保存目标和目标

# 导入“级别.h”

```
@implementation Level
@synthesize objective = _objective;
@synthesize isComplete = _isComplete;
@synthesize goldReward = _goldReward;
@synthesize xpReward = _xpReward;
@synthesize missionID = _missionID;
@synthesize currentStatus = _currentStatus;
@synthesize targetName = _targetName;
@synthesize owner = _owner;

-(void)dealloc{

[super dealloc];
  }

-(id)initWithMissionID:(int)number{

if (self = [super init]) {
    self.currentStatus = 0;
    self.isComplete = NO;
    self.missionID = [NSNumber numberWithInt:number];
    [self setUpMisson];
}
return self;
}
-(void)setUpMisson{
if ([self.missionID intValue] == 0) {
    self.xpReward = [NSNumber numberWithInt:100];
    self.goldReward = [NSNumber numberWithInt:100];
    self.objective = [NSNumber numberWithInt:3];
    self.targetName = @"Swordsman";
    CCLOG(@"Gotta kill some swordsmen!");
}
}
-(void)encodeWithCoder:(NSCoder *)encoder{
[encoder encodeObject:self.objective forKey:@"objective"];
[encoder encodeObject:self.isComplete forKey:@"isComplete"];
[encoder encodeObject:self.goldReward forKey:@"goldReward"];
[encoder encodeObject:self.xpReward forKey:@"xpReward"];
[encoder encodeObject:self.missionID forKey:@"missionID"];
[encoder encodeObject:self.currentStatus forKey:@"currentStatus"];
[encoder encodeObject:self.targetName forKey:@"targetName"];
[encoder encodeObject:self.owner forKey:@"owner"];
CCLOG(@"SAVING LEVEL");
}
-(id)initWithCoder:(NSCoder *)decoder{
if (self = [super init]) {
    self.objective = [[decoder decodeObjectForKey:@"objective"]retain];
    self.isComplete = [[decoder decodeObjectForKey:@"isComplete"]retain];
    self.goldReward = [[decoder decodeObjectForKey:@"goldReward"]retain];
    self.xpReward = [[decoder decodeObjectForKey:@"xpReward"]retain];
    self.missionID = [[decoder decodeObjectForKey:@"missionID"]retain];
    self.targetName = [[decoder decodeObjectForKey:@"targetName"]retain];
    self.owner = [[decoder decodeObjectForKey:@"owner"]retain];
    CCLOG(@"LOADING LEVEL");
}
return self;
}
-(void)updateStatusForKill:(AI *)killedTarget{
CCLOG(@"WE KILLED: %@ and OUR GOAL IS: %@",killedTarget.name,self.targetName);

if ([killedTarget.name isEqualToString:self.targetName]) {
    [self setCurrentStatus:[NSNumber numberWithInt:[self.currentStatus intValue]+1]];
    CCLOG(@"Current Status: %i Objective: %i", [self.currentStatus intValue],[self.objective intValue]);
    if ([self.currentStatus intValue] == [self.objective intValue]) {
        [self completeMission];
    }
}
}
-(void)completeMission{
[self.owner setCoins:[NSNumber numberWithInt:[[self.owner coins]intValue] + [self.goldReward intValue]]];
[self.owner setXp:[NSNumber numberWithInt:[[self.owner xp]intValue] + [self.xpReward intValue]]];
CCLOG(@"complete");
[[self.owner missionList]removeObject:self];

}
@end 
```

编辑：“所有者”指的是被保存的对象。我认为这就是问题所在，所以我将其删除并再次测试。

编辑：那什么也没做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:14:36.403

您所描述的应该“正常工作”。在自定义对象的 encodeWithCoder 方法中，您只需对数组对象进行编码，这应该会导致数组及其内容被编码。

但是，如果数组中的任何对象不支持 NSCoding，那将失败。我的猜测是你的数组中的某些东西（或者它的孩子或孙子）不支持 NSCoding。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:18:14.057

我在尝试保存包含属性值和另一个自定义对象的帐户数组时遇到了这个问题。我无法使用您提出的解决方案保存我的数据，因为我任意将帐户添加到数组中，并且为动态添加的帐户提供唯一标识符是没有意义的。我最终嵌套了 NSCoding 协议：

在我的`AccountManager`课堂上：

```
- (void) saveAllAccounts {
    [self deleteAllAccounts]; //Just removes whatever was previously stored there
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:accountArray] forKey:saveAccountsArrayKey];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

在我的`Account`课堂上：

```
- (void) encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:username forKey:@"username"];
    [aCoder encodeObject:token forKey:@"token"];
    [aCoder encodeObject:specialID forKey:@"special ID"];
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:deviceArray];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"device array"];
}

- (id) initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if (self != nil) {
        username = [[aDecoder decodeObjectForKey:@"username"] retain];
        token = [[aDecoder decodeObjectForKey:@"token"] retain];
        ecoID = [[aDecoder decodeObjectForKey:@"eco ID"] retain];
        NSData *deviceArrayData = [[NSUserDefaults standardUserDefaults] objectForKey:@"device array"];
        if (deviceArrayData != nil) {
            NSArray *savedArray = [NSKeyedUnarchiver unarchiveObjectWithData: deviceArrayData];
            if (savedArray != nil)
                deviceArray = [[NSMutableArray alloc] initWithArray:savedArray];
        }   
    }
    return self;
} 
```

在我的`AccountDevice`课堂上：

```
- (void) encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:pairingPassword forKey:@"pairing password"];
    [aCoder encodeObject:devicePin forKey:@"device pin"];
}

- (id) initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if (self != nil) {
        password = [[aDecoder decodeObjectForKey:@"password"] retain];
        pin = [[aDecoder decodeObjectForKey:@"pin"] retain];        
    }
    return self;
} 
```

它可能有点小错误，因为我还没有完成测试，但我的初步测试是成功的，我认为这个概念就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:29:26.080

看起来您正在使用`-encodeObject:forKey:`甚至`-decodeObjectForKey:`不是对象的值。例如，在你的`-initWithMissionID:`你有：

```
self.isComplete = NO; 
```

这让我认为这`complete`是一个`BOOL`属性，但你`-encodeObject:forKey:`说：

```
[encoder encodeObject:self.isComplete forKey:@"isComplete"]; 
```

我想你可能想打电话`-encodeBool:forKey:`，像这样：

```
[encoder encodeBool:self.isComplete forKey:@"isComplete"]; 
```

另一方面，如果问题如此简单，我真的希望得到某种警告。你有任何警告吗？推断您的其他属性的类型更难，但请查看您的每个属性以解决相同类型的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:39:14.733

为每个任务使用唯一 ID 系统找到了一种解决方法，并将每个任务的进度分别保存到 NSUserDefaults 中，然后再次加载。不理想，但它有效。感谢大家的帮助！

# ruby-on-rails - 在单一形式中，使用 habtm 链接两个模型的两个实例

> ID：11085680
> 
> 赞同：0
> 
> 时间：2012-06-18T15:08:07.737
> 
> 标签：ruby-on-rails, associations, nested-forms, has-and-belongs-to-many

我正在使用 Rails 3。

我有一个 Product 模型和一个 Group 模型（一个组 has_many users，通过成员资格）。

我想`new.html.erb`为产品模型构建表单，在表单的末尾，我希望用户能够选择可以从哪些组中访问他想要添加的产品的成员。

所以，我的目标是列出用户所属的组，为每个组添加一个复选框。然后，创建插入的产品与用户在提交表单时选择的不同组之间的关联，但我真的不明白如何实现这一点，因为我读过的所有文档都使用 BUILD 或 CREATE 方法定义了一个新的组的实例，而不是现有的。

是否可以使用嵌套形式以及产品和组之间的 HABTM 关系？或者我应该使用新模型 product_group_relationship 使用带有 has_many_through 关联的嵌套表单？或者我应该使用嵌套形式以外的东西吗？

我是 Rails 的新手，在这里有点迷失，所以如果有经验的人可以指导我一点，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:15:48.617

form_for 助手带有一个很好的额外方法包，例如： fields_for wich 使您能够为 has_many_through 关系添加嵌套属性。

我建议阅读这些： [http ://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

并确保您相应地设置模型验证

# solr - 我们可以在同一个 Solr 索引中使用不同的语言进行索引和搜索吗？

> ID：11085698
> 
> 赞同：0
> 
> 时间：2012-06-18T15:09:22.230
> 
> 标签：solr, multilingual

我有来自外部系统的数据（CSV 格式）。数据包含以下字段：

```
id - french_title - english_title - french_desc - english_desc etc... 
```

我知道我可以使用多个核心，但有没有办法只用一个核心来索引和搜索它？

例如，我可以告诉 Solr 在 french_title 和 french_desc 上使用法语分析器，在 english_title 和 english_desc 上使用英语分析器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:18:54.763

它应该可以工作，因为 Solr 允许您将分析器配置为[基于每个字段](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Specifying_an_Analyzer_in_the_schema)使用。

# excel - 需要帮助调试 LISP 脚本错误/八位字节序列 141

> ID：11085717
> 
> 赞同：3
> 
> 时间：2012-06-18T15:10:22.900
> 
> 标签：excel, lisp

我正在运行一个调用 LISP 脚本的 Excel 宏，它在过去一直运行良好，但现在它出现了这个错误：

> 流上的解码错误
> #>SB-SYS:FD STREAM for "file:Y\...\FILE0617.CMT" {27B22531}>
> (:EXTERNAL-FORMAT :CP1252)：
> 八位字节序列 (141) 无法解码

我具体应该寻找什么可能导致此错误？输入文件的格式与过去正常工作的格式相同。

八位字节序列 141 指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:01:14.543

141是一个变音节（ç）。我猜你是第一次遇到一个名字中带有 ç 的人，而 Lisp 没有正确处理编码。

# php - MYSQL 使用两个不同表的结果插入单个表

> ID：11085719
> 
> 赞同：1
> 
> 时间：2012-06-18T15:10:25.670
> 
> 标签：php, mysql, insert, myisam

你好，任何想咬牙切齿的人，

我遇到了多个如何将子查询选择的结果集用于另一个表的示例。然而，我所拥有的是：

```
SELECT `klanten_zakelijk`.`bedrijfs_id`, `klanten`.`klant_id` 
    FROM `klanten`,`klanten_zakelijk`
    WHERE `klanten`.`emailadres` = '$email' 
    AND `klanten_zakelijk`.`bedrijfs_kvk`='$kvknr' 
```

如您所见，我从两个不同的表中获取结果，并且需要将它们移植到另一个表中。

我希望将这些值插入到表中`klant_bedrijf_machtiging`。

```
INSERT INTO `klant_bedrijf_machtiging` (`klant_id`, `bedrijfs_id`, `machtiging`) VALUES ('8501', '1', '3'); 
```

该列`machtiging`是带有插入的标准 3，但如果公司已经存在，我也需要能够将其更改为 1，但我将在代码的另一部分截取它。

我看到的所有示例都只是将一个表导入另一个表的结果。当您从两个表中获取结果时，同样的逻辑是否适用？如果是这样，实现这一点的最明智和最有效的方法是什么？

因此，为了使问题简短：我如何进入相应的列`bedrijfs_id`，同时我自己仍然能够在 1 个查询中操作最后一列。`klant_id``klant_bedrijf_machtiging``machtiging`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:17:46.227

好消息！MySQL 有一个简单的方法来做到这一点：[MySQL Insert Into w/ Select](https://dev.mysql.com/doc/refman/5.6/en/ansi-diff-select-into-table.html)

因此，在您的情况下，它将是：

```
INSERT INTO klant_bedrijf_machtiging (`klant_id`, `bedrijfs_id`, `machtiging`)
SELECT `klanten`.`klant_id`, `klanten_zakelijk`.`bedrijfs_id`, 3
    FROM `klanten`,`klanten_zakelijk`
    WHERE `klanten`.`emailadres` = '$email' 
    AND `klanten_zakelijk`.`bedrijfs_kvk`='$kvknr' 
```

至于将项目更改为 1（如果它已经存在），我不确定您将如何在一个查询中做到这一点，而不会把它弄得一团糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:18:26.680

```
INSERT INTO `klant_bedrijf_machtiging` (`klant_id`, `bedrijfs_id`, `machtiging`)
(SELECT `klanten`.`klant_id`, `klanten_zakelijk`.`bedrijfs_id`, 3
FROM `klanten`,`klanten_zakelijk`
WHERE `klanten`.`emailadres` = '$email'
AND `klanten_zakelijk`.`bedrijfs_kvk`='$kvknr') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:17:24.403

```
INSERT INTO yourtable (fields) SELECT `klanten_zakelijk`.`bedrijfs_id`, `klanten`.`klant_id` 
    FROM `klanten`,`klanten_zakelijk`
    WHERE `klanten`.`emailadres` = '$email' 
    AND `klanten_zakelijk`.`bedrijfs_kvk`='$kvknr' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-08T05:25:34.523

```
INSERT INTO klant_bedrijf_machtiging (`klant_id`, `bedrijfs_id`, `machtiging`)
SELECT `klanten`.`klant_id`, `klanten_zakelijk`.`bedrijfs_id`, 3
    FROM `klanten`,`klanten_zakelijk`
    WHERE `klanten`.`emailadres` = '$email' 
    AND `klanten_zakelijk`.`bedrijfs_kvk`='$kvknr' 
```

# java - 使用 JAVA 以编程方式在网站的搜索框中输入

> ID：11085721
> 
> 赞同：-2
> 
> 时间：2012-06-18T15:10:27.790
> 
> 标签：java, html, htmlunit

我正在制作一个 Java 程序，我在其中以编程方式将数据插入网站的搜索字段并使用 java 以编程方式提交。

提交后打开一个新网页..

例如，如果网站名称是`www.pqr.net/index.php`

在我进行搜索提交后，我被重定向到该页面。例如。`www.pqr.net/ind2.php`

我知道我可以使用`URLCONNECTION`.

如何获取我被重定向的页面的网址，因为我想阅读该页面的内容，除非我不知道我被重定向的页面的网址，否则我无法阅读内容

```
WebClient webClient = new WebClient();

    HtmlPage page = webClient.getPage("www.pqr.net");

   HtmlForm form = page1.getFormByName("f1");

   final HtmlSubmitInput button = form.getInputByName("submitbutton");
   final HtmlTextInput textField = form.getInputByName("searc");

   textField.setValueAttribute("value");

   final HtmlPage page2 = button.click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:14:39.597

您被重定向到的页面的 URL 位于响应消息的[Location标头中。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)有关详细信息，请参阅规范，并参阅`HttpURLConnection`javadoc 以了解您应该使用从响应中获取 Header 的方法。

# spring - 春季jsp中的unescape html

> ID：11085723
> 
> 赞同：0
> 
> 时间：2012-06-18T15:10:34.867
> 
> 标签：spring, jsp

我想在 Spring JSP 中取消转义 html 字符。

```
<c:out value="${fn:***unescapeHtml***(item.name)}" /> 
```

是否有 unescapeHtml 或等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:44:30.570

由于我没有找到一个jsp标签来做同样的事情，我不得不求助于javascript方法。这对我来说很有意义，因为我首先使用 javascript 进行转义，并且效果很好。

我已将其放入页面的 $.ready() 中。

```
$.find(xxxx) {
    $(this).text((unescape($(this).text())));
} 
```

# macos - 如何获取 NSTextView 的输入源

> ID：11085727
> 
> 赞同：0
> 
> 时间：2012-06-18T15:11:00.850
> 
> 标签：macos, cocoa, macos-carbon

我设置了一个小型测试应用程序，将 App Delegate 设置为 NSTextView 的代理。

有了它，我提供了以下 NSTextView 委托方法：

`- (BOOL)textView:(NSTextView *)aTextView shouldChangeTextInRange:(NSRange)affectedCharRange replacementString:(NSString *)replacementString`

我想确定是什么输入源生成`replacementString`.

主要是，我有兴趣找出`replacementString`是来自字符查看器（编辑>特殊字符...）还是来自键盘。

我已经研究过使用碳文本输入 API，它可以为您提供有关字符查看器是否被“选中”（在屏幕上与屏幕外）的信息，但我找不到确定它是否负责生成文本字符串的方法。

这样做的原因是我正在编写一个简单的插件，它利用 Character Viewer 将 Unicode 字符转换为 HTML 实体。Character Viewer 将所有字符集中在一个位置，并且在操作系统级别可用。似乎使用它比编写我自己的更有意义。

这可以在 Cocoa 或 Carbon 中完成吗？

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:01:47.713

从以下代码中找到了一些关于文本输入源的知识：

```
CFArrayRef TISCreateInputSourceList (
   CFDictionaryRef properties,
   Boolean includeAllInstalled
); 
```

[苹果文档](https://developer.apple.com/library/mac/#documentation/TextFonts/Reference/TextInputSourcesReference/Reference/reference.html)

从以下[链接](https://stackoverflow.com/questions/10224791/toggle-keyboard-viewer-on-mac-os-x-programmingly)中对此有所了解，这也可能对您有所帮助。干杯。

# java - 在 Java 中使用 instanceof 运算符

> ID：11085735
> 
> 赞同：2
> 
> 时间：2012-06-18T15:11:22.550
> 
> 标签：java, class, runtime, instanceof

我有一个基类`class Base`和两个子类

```
class A extends Base 
```

和

```
class B extends Base 
```

我有一个方法`foo`。`Base`

而不是把实现`foo`放在`class A`and`class B`中，这样我就可以做到

```
void foo (Object o)
{
    // A's implementation
    assert o instanceof A;     
}

 void foo (Object o)
 {
     // B's implementation
     assert o instanceof B; 
 } 
```

无论如何要放入`foo`Base，并且仍然可以检查运行时类吗？我想过这样的事情：

```
 void foo (Object o)
 {
    // Check that o is instanceof a runtime class
    assert o instanceof this.getClass(); // ????
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:18:46.707

您可以像这样实现您的方法：

```
public void foo() {
    if (this instanceof A) {
        // implementation for A
    }
    else if (this instanceof B) {
        // implementation for B
    }
} 
```

但是多态的重点是把A的实现放到A里面，这样这个实现就可以使用A的私有字段来实现方法（B也一样，或者当然）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:17:12.703

```
getClass().isInstance(o) 
```

也就是说，也许您想以编译器可以检查的方式约束类型？泛型可以做到这一点：

```
class Base<T extends Base<B>> {
    void foo(T o) { ... }
}

class A extends Base<A> {
    @Override void foo(A o) { ... }
} 
```

然后，

```
new B().foo(new A()); 
```

不会编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:22:18.070

`instanceof`将不起作用，因为参数不能是“动态的”。

您可以使用以下`isInstance`方法`Class`

```
void foo (Object o)
{
    // Check that o is instanceof a runtime class
    assert getClass().isInstance(o);
} 
```

但这至少有一个可能的问题：如果是 的子类的实例并且对象只是 的直接实例，
则会导致 AssertionException ！`this``A``A`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T15:16:26.540

有类方法 isAssignableFrom()

```
 getClass().isAssignableFrom(o.getClass()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:17:52.343

在 Java 中，您可以使用 instanceof 运算符检查对象的类： object instanceof M

当你有一个 Class 对象时，这样写是有意义的： object.getClass().isAssignableTo(MyClass.class)

[http://www.ralfebert.de/blog/java/isassignablefrom/](http://www.ralfebert.de/blog/java/isassignablefrom/)

# javascript - Facebook 应用提交操作类型

> ID：11085746
> 
> 赞同：1
> 
> 时间：2012-06-18T15:11:58.073
> 
> 标签：javascript, facebook, facebook-graph-api

我一直在 StackOverflow 和 facebook 文档上阅读此内容，但我似乎无法提交我的操作类型。

我有以下来自 FB 文档的代码

```
<script type="text/javascript">
console.log("Function begins");
    function postForm()
      {
console.log(FB);
FB.api(
    '/me/concoursvelirium:form',
    'post',
    { recipe: 'http://concours.gestev.com/fbvel2012/form.php' },
    function(response) {
    console.log("Stay");
       if (!response || response.error) {
          console.log("error:  " + response);
       } else {
          console.log('Cook was successful! Action ID: ' + response.id);
       }
    });
   }
</script> 
```

我从 FB 自动生成的值中添加了我的值，现在看起来像这样：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# concoursvelirium: http://ogp.me/ns/fb/concoursvelirium#">

<meta property="fb:app_id" content="194081877384051" /> 
<meta property="og:type"   content="concoursvelirium:form" />
<meta property="og:title" content="Concours Vélirium" /> 
<meta property="og:image" content="http://www.velirium.com/++resource++snowjamboree.theme.images/velirium-avatar-128x128.png" /> 
<meta property="og:description" content="Concours Vidéotron au Vélirium" /> 
<meta property="og:url" content="http://concours.gestev.com/fbvel2012/form.php" /> 
```

但是我在控制台中看不到任何输出`console.log(FB);`

我不知道我做错了什么。我也收到了`Unsafe JavaScript attempt to access frame with URL`错误，但我在这里读到我应该忽略它。

泰，阿克塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:19:55.003

我认为你在这里有两个问题：

1.  `og:url`应该有一个有效的网址。
2.  `og:image`无法引用 Facebook 服务器上托管的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:25:01.667

我终于找到了这个问题，只要你没有阅读太多 facebook 的文档，这并不难。即使他们给了你一个`POST`命令和一个 JS 代码来验证你的行为，我也无法验证我的行为。很难有一种更简单的方法来提交操作以供批准：

*   前往您的应用程序设置在打开的图表部分转到仪表板
*   在您要提交的动作类型旁边单击“获取代码”链接（记住..动作类型，而不是对象类型的“获取代码”按钮）
*   将代码复制到 linux 终端中的“创建一个新的完整操作：”框中

GL HF 大家

# php - if 语句的语法问题 (php)

> ID：11085749
> 
> 赞同：0
> 
> 时间：2012-06-18T15:12:03.133
> 
> 标签：php, syntax, if-statement

我需要一些关于 php 中的 if 语句的帮助。我正在尝试根据我在 WordPress 中加载的页面设置一个名为 offset 的变量。这是变量：

```
$offset = ($paged * 6); 
```

它的作用是加载第一页，即：

[http://example.com/blog](http://example.com/blog)

并且 $offset 因此设置为 0，因为 $paged 指的是 URL 上的附加数字。例如第二页是：

[http://example.com/blog/2/](http://example.com/blog/2/)

这使得 $offset 设置为 12。问题是，我需要第二页将 $offset 定义为 6，第三页将 $offset 定义为 12，等等。我尝试使用：

```
$offset = ($paged * 6 - 6) 
```

除了第一页外，它有效。在第一页上，它将 $offset 定义为 -6。所以，我想创建一个 if 语句，如果 $paged 等于 0 则 $offset 等于 0，否则 $offset 等于 ($paged * 6 - 6)。

尽管我了解这里需要做什么，但我还是在语法上苦苦挣扎。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:14:32.547

因为这是两种不同的情况，不能轻易地整合到一个公式中，所以使用一个`if`语句：

```
if ($paged == 0)
  $offset = 0;
else
  $offset = ($paged - 1) * 6; 
```

您可以使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)将其写得更短，但我认为上面的`if`语句更具可读性：

```
$offset = ($paged == 0) ? 0 : ($paged - 1) * 6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:17:41.200

替代：

```
if($paged == 0) $paged = 1;
$offset = ($paged - 1) * 6; 
```

或者

```
$offset = ($paged) ? ($paged - 1) * 6 : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:17:46.897

您可以使用以下一行代码

```
$offset = max(($paged - 1) * 6, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:18:19.090

你可以使用：`$offset = max(0, $paged * 6 -6);`. 其中取最大值 0 和其他值。如果其他值为负，则结果为 0。

现在，要使用 if 语句，您可以这样做：

```
$offset = $paged * 6 - 6;
if ($offset < 0) {
    $offset = 0;
} 
```

或者：

```
if ($paged == 0) {
    $offset = 0;
} else {
    $offset = $paged * 6 - 6;
} 
```

对于这种简单的情况，您可能希望使用三元运算符：

```
$offset = ($paged == 0)? 0: ($paged * 6 - 6); 
```

（与上述完全相同）

注意：您可以替换 6*a-6 = 6*(a-1)，但这在代码中并不重要，只是可读性...

# c++ - 使用 Linux 将 DVD 内容复制到硬盘的最快方法是什么？

> ID：11085752
> 
> 赞同：-1
> 
> 时间：2012-06-18T15:12:12.533
> 
> 标签：c++, linux, dvd

我已经浏览了一些链接，这些链接讨论了在 windows 中使用`FILE_FLAG_NO_BUFFERING`和复制文件的最快方法`FILE_FLAG_OVERLAPPED`。它还讨论了如何请求读取和写入操作`BUFFER SIZE`as`256KB and 128KB`比 . 更快`1Mb`。链接是：- [解释微小读取（重叠、缓冲）优于大型连续读取？](https://stackoverflow.com/questions/5909345/explanation-for-tiny-reads-overlapped-buffered-outperforming-large-contiguous) 我也在寻找 linux 中的类似方法，它允许我以快速的方式将 DVD 的内容复制到硬盘。所以我想知道 Linux 中是否有一些文件操作标志可以为我提供最好的结果，或者 Linux 中的哪种复制方式是最好的？我的代码都是c++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:18:41.980

挂载您的 DVD，打开（）您要复制的文件，然后使用 sendfile（）。如果您想复制完整的 DVD，您还可以尝试 open() DVD 的 /dev 条目并将该描述符传递给 sendfile()。

```
$ man 2 sendfile 
```

“sendfile() 在一个文件描述符和另一个文件描述符之间复制数据。因为这种复制是在内核中完成的，所以 sendfile() 比 read(2) 和 write(2) 的组合更有效，后者需要相互传输数据用户空间。”

# php - php imap 发送后将按摩保存到发送文件夹

> ID：11085755
> 
> 赞同：1
> 
> 时间：2012-06-18T15:12:28.203
> 
> 标签：php, imap

我被这两天困住了。我正在尝试使用 PHP 中的 imap_append 但到目前为止还没有运气。我能够为单个附件实现此代码，但多个附件不起作用。

```
<?php 
$authhost="{000.000.000.000:993/validate-cert/ssl}Sent"; 

$user="sadasd"; 
$pass="sadasd"; 

if ($mbox=imap_open( $authhost, $user, $pass)) 
{ 
    $dmy=date("d-M-Y H:i:s"); 

    $filename="filename.pdf"; 
    $attachment = chunk_split(base64_encode($filestring)); 

    $boundary = "------=".md5(uniqid(rand())); 

    $msg = ("From: Somebody\r\n" 
        . "To: test@example.co.uk\r\n" 
        . "Date: $dmy\r\n" 
        . "Subject: This is the subject\r\n" 
        . "MIME-Version: 1.0\r\n" 
        . "Content-Type: multipart/mixed; boundary=\"$boundary\"\r\n" 
        . "\r\n\r\n" 
        . "--$boundary\r\n" 
        . "Content-Type: text/html;\r\n\tcharset=\"ISO-8859-1\"\r\n" 
        . "Content-Transfer-Encoding: 8bit \r\n" 
        . "\r\n\r\n" 
        . "Hello this is a test\r\n" 
        . "\r\n\r\n" 
        . "--$boundary\r\n" 
        . "Content-Transfer-Encoding: base64\r\n" 
        . "Content-Disposition: attachment; filename=\"$filename\"\r\n" 
        . "\r\n" . $attachment . "\r\n" 
        . "\r\n\r\n\r\n" 
        . "--$boundary--\r\n\r\n"); 

    imap_append($mbox,$authhost,$msg); 

    imap_close($mbox); 
} 
else 
{ 
    echo "<h1>FAIL!</h1>\n"; 
} 

?> 
```

现在上面的原始代码正在运行，但我无法添加多个附件。在某些情况下，我得到消息正文 base64 解码，并且在消息正文中有很多奇怪的字母。就像是

```
R0lGODlhkAEfAOYAAPSeZPONtdSIu+u2vv/La+5Rj8AhYPvWhOjtkfvi7MRImcjYse5DM6O+dOnl ..... 
```

我搜索了所有的网络我仍然没有运气。

由于我有专用服务器，我还尝试实现一些 procmail+ 后缀示例，但也没有运气。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:28:47.967

摆脱 -- 从你的边界线

```
. "--$boundary--\r\n\r\n" 
```

应该

```
. "$boundary\r\n\r\n" 
```

你不需要 -- 在你的标题中。

# c++ - 我做了两个模板类，谁能告诉我这些东西有用吗？

> ID：11085759
> 
> 赞同：0
> 
> 时间：2012-06-18T15:12:45.613
> 
> 标签：c++, templates, generic-callback

最近我根据“Modern C++ design”一书制作了两个模板类。我认为这些课程很有用，但我公司里没有人同意我的观点，那么有人能告诉我这些东西是否有用吗？

第一个是参数包装器，它可以将函数参数包装到单个动态对象中。它看起来像“现代C++设计”中的TypeList。

你可以像这样使用它：

您的代码的某个地方：

```
int i = 7;
bool b = true;
double d = 3.3;
CParam *p1 = CreateParam(b,i);
CParam *p2 = CreateParam(i,b,d); 
```

您的代码的其他地方：

```
int i = 0;
bool b = false;
double d = 0.0;
GetParam(p1,b,i);
GetParam(p2,i,b,d); 
```

第二个是通用回调包装器，它与其他包装器相比有一些特别之处：
1.这个模板类有一个动态基类，它可以让你使用一个单一类型的对象来代表所有的包装器对象。
2.它可以将回调和它的参数一起包装，你可以稍后执行回调和参数。

你可以像这样使用它：

您的代码的某处：

```
void Test1(int i)
{
}

void Test2(bool b,int i)
{
}

CallbackFunc * p1 = CreateCallback(Test1,3);
CallbackFunc * p2 = CreateCallback(Test2,false,99); 
```

您的代码的其他地方：

```
p1->Excute();
p2->Excute(); 
```

以下是部分代码：

参数包装器：

```
class NullType;    
struct CParam
{
    virtual ~CParam(){}
};

template<class T1,class T2>
struct CParam2 : public CParam
{
    CParam2(T1 &t1,T2 &t2):v1(t1),v2(t2){}
    CParam2(){}
    T1 v1;
    T2 v2;
};

template<class T1>
struct CParam2<T1,NullType> : public CParam
{
    CParam2(T1 &t1):v1(t1){}
    CParam2(){}
    T1 v1;
};

template<class T1>
CParam * CreateParam(T1 t1)
{
    return (new CParam2<T1,NullType>(t1));
}

template<class T1,class T2>
CParam * CreateParam(T1 t1,T2 t2)
{
    return (new CParam2<T1,T2>(t1,t2));
}
template<class T1,class T2,class T3>
CParam * CreateParam(T1 t1,T2 t2,T3 t3)
{
    CParam2<T2,T3> t(t2,t3);
    return new CParam2<T1,CParam2<T2,T3> >(t1,t);
}

template<class T1>
void GetParam(CParam *p,T1 &t1)
{
    PARAM1(T1)* p2 = dynamic_cast<CParam2<T1,NullType>*>(p);
    t1 = p2->v1;
} 
```

回调包装器：

```
#define PARAM1(T1) CParam2<T1,NullType>
#define PARAM2(T1,T2) CParam2<T1,T2>
#define PARAM3(T1,T2,T3) CParam2<T1,CParam2<T2,T3> >    

class CallbackFunc
{
public:
    virtual ~CallbackFunc(){}
    virtual void Excute(void){}
};

template<class T>
class CallbackFunc2 : public CallbackFunc
{
public:
    CallbackFunc2():m_b(false){}
    CallbackFunc2(T &t):m_t(t),m_b(true){}
    T m_t;
    bool m_b;
};

template<class M,class T>
class StaticCallbackFunc : public CallbackFunc2<T>
{
public:
    StaticCallbackFunc(M m):m_m(m){}

    StaticCallbackFunc(M m,T t):CallbackFunc2<T>(t),m_m(m){}

    virtual void Excute(void){assert(CallbackFunc2<T>::m_b);CallMethod(CallbackFunc2<T>::m_t);}

private:
    template<class T1>
    void CallMethod(PARAM1(T1) &t){m_m(t.v1);}

    template<class T1,class T2>
    void CallMethod(PARAM2(T1,T2) &t){m_m(t.v1,t.v2);}

    template<class T1,class T2,class T3>
    void CallMethod(PARAM3(T1,T2,T3) &t){m_m(t.v1,t.v2.v1,t.v2.v2);}

private:
    M m_m;
};

template<class M>
class StaticCallbackFunc<M,void> : public CallbackFunc
{
public:
    StaticCallbackFunc(M method):m_m(method){}
    virtual void Excute(void){m_m();}
private:
    M m_m;
};

template<class C,class M,class T>
class MemberCallbackFunc : public CallbackFunc2<T>
{
public:
    MemberCallbackFunc(C *pC,M m):m_pC(pC),m_m(m){}

    MemberCallbackFunc(C *pC,M m,T t):CallbackFunc2<T>(t),m_pC(pC),m_m(m){}

    virtual void Excute(void){assert(CallbackFunc2<T>::m_b);CallMethod(CallbackFunc2<T>::m_t);}

    template<class T1>
    void CallMethod(PARAM1(T1) &t){(m_pC->*m_m)(t.v1);}

    template<class T1,class T2>
    void CallMethod(PARAM2(T1,T2) &t){(m_pC->*m_m)(t.v1,t.v2);}

    template<class T1,class T2,class T3>
    void CallMethod(PARAM3(T1,T2,T3) &t){(m_pC->*m_m)(t.v1,t.v2.v1,t.v2.v2);}

private:
    C *m_pC;
    M m_m;
};

template<class T1>
CallbackFunc *CreateCallback(CallbackFunc *p,T1 t1)
{
    CParam2<T1,NullType> t(t1);
    return new StaticCallbackFunc<CallbackFunc *,CParam2<T1,NullType> >(p,t);
}

template<class C,class T1>
CallbackFunc *CreateCallback(C *pC,void(C::*pF)(T1),T1 t1)
{
    CParam2<T1,NullType>t(t1);
    return new MemberCallbackFunc<C,void(C::*)(T1),CParam2<T1,NullType> >(pC,pF,t);
}

template<class T1>
CParam2<T1,NullType> CreateCallbackParam(T1 t1)
{
    return  CParam2<T1,NullType>(t1);
}

template<class T1>
void ExcuteCallback(CallbackFunc *p,T1 t1)
{
    CallbackFunc2<CParam2<T1,NullType> > *p2 = dynamic_cast<CallbackFunc2<CParam2<T1,NullType> > *>(p);
    p2->m_t.v1 = t1;
    p2->m_b = true;
    p->Excute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:18:35.027

它们看起来对我有用。在标准库中，有 std::tuple 和 std::function 做类似的事情。

所以，如果在标准库中有这样的东西值得，很多其他人可能认为能够使用包装器启用的模式编写代码很有用。

# jquery - 在 IE 上通过 Jquery 更改 bg 图像非常慢

> ID：11085762
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:06.067
> 
> 标签：jquery, internet-explorer, slowdown

我在从 div 更改 bg 图像时遇到问题。它可以在 Google Chrome 和 Firefox 上完美运行，但在 IE 上它会挂起一点。它在 IE 上非常慢，有时甚至无法正确加载图像。我的jQuery代码是：

```
$("a.preview").click(function(e){
    var carregar = new Image();
    $(carregar).attr('src','imagens/logos/' +  this.id +'.jpg');
    var img = "imagens/logos/" +  this.id +".jpg"; // recebe src da imagem de acordo com a ID
    var alvo = this.id; // salva ID do disparador
    var logo = document.createElement('img'); // cria objeto imagem
    var $logoCarregado = $(logo); // recebe o objeto imagem criado
    $logoCarregado.attr('src', 'imagens/logos/'+ alvo +'_logo.png'); //define atributo src da imagem criada

    $(".box").fadeOut("fast");
    $(".box").hide();
    $(".overlay").hide("fast");
    $(".logo").hide("fast");
    $(".logo").empty();

    $(".loader").show("fast"); // mostra carregamento
    $(carregar).load( function() { // carrega o conteudo
       $(".loader").hide("fast"); // esconde imagem de carregamento
       $(".logo").empty(); // apaga conteúdo da ID logo
       $("#menu").fadeOut("fast"); //fadeOut menu   
       $(".overlay").show("fast"); // mostra barra do conteúdo da página do cliente     
       $(".logo").show("fast"); // mostra logo do cliente
       $logoCarregado.appendTo('.logo'); // atribue a logo do cliente á div logo
       $("#fundo").empty();
      $("#fundo").append("<img src='"+ img +"' class='bg' />"); // troca o fundo
       var logoHeight = $logoCarregado.height() + 100; // seta o tamanho da logo + 80 como altura

      if (logoHeight <= 120){ //verifica posição do logo do cliente

       $(".box" + "#"+alvo) // seleciona o box de texto de acordo com a ID do disparador
            .css("display", + "block") // mostra o box
            .css("left","0%") // define distância da margem esquerda do box
            .fadeIn("fast") // fadeIn texto
            .css("top",+ logoHeight+100 + 'px'); // define altura do box
        $(".box" + "#"+alvo).animate({ 
            left: '8%'}, 300 ); // anima entrada do texto
      }
      else{

           $(".box" + "#"+alvo) // seleciona o box de texto de acordo com a ID do disparador
            .css("display", + "block") // mostra o box
            .css("left","0%") // define distância da margem esquerda do box
            .fadeIn("fast") // fadeIn texto
            .css("top",+ logoHeight + 'px'); // define altura do box
        $(".box" + "#"+alvo).animate({ 
            left: '8%'}, 300 ); // anima entrada do texto
      }

      });
return false;
    }); 
```

网站：[链接](http://www.zecaconsoni.com.br/ftp/novo/clientes.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:21:53.147

优化代码的一件事是通过重用它们来尽量减少 JQuery 选择器的使用。

所以，而不是使用这个：

```
$(".box").fadeOut("fast");
$(".box").hide();
$(".overlay").hide("fast");
$(".logo").hide("fast");
$(".logo").empty(); 
```

尝试这个...

```
var $boxElem = $('.box');
var $logoElem = $('.logo');

$boxElem.fadeOut("fast").hide();
$(".overlay").hide("fast");
$logoElem.hide("fast").empty(); 
```

或者甚至更好...

```
var boxElem = document.getElementsByClassName('box')[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:21:19.690

这取决于到底什么是慢的。它可能是由以下原因引起的：

*   DOM 变化
*   背景图片下载

jQuery 在设计上降低了浏览器的速度。要实现真正快速的页面，不要使用 jQuery。

值得预加载图像：

```
var imageObj = new Image();
imageObj.src = 'image.png'; 
```

然后你可以切换 CSS 类：

```
.mode1 {
    background-image: url(default.png);
}

.mode2 {
    background-image: url(image.png);
} 
```

通过 ECMAscript：

```
document.getElementById('logo').className = 'mode2'; 
```

# facebook - 动态更改元标记值！使用调试工具可以正常工作，但在使用图形 api 资源管理器发布时无法正常工作

> ID：11085763
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:07.767
> 
> 标签：facebook, facebook-opengraph

我正在发布一个 Open Graph “Level Up” 操作，但是在我测试时我得到了奇怪的结果。我已将代码设置为动态更改标题，使其显示“1”级、“2”级等。

> url.php?level=6

. 这在调试工具上完美运行，使用我传入的任何参数值更新标题。当我实际尝试使用 Graph API Explorer 工具发布时，问题就出现了。出于某种原因，无论我传递什么参数，即。=1，=2，好像没有取参数值。有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:00:15.440

您可以使用 Fiddler 在 Windows 中发布请求。不要忘记设置 User-agent 标头（如果您真的检查它）。我有同样的问题。检查了我的日志：FB 甚至没有尝试通过指定的 URL 加载我的对象！在调试工具中检查链接或从图形 API 工具发出请求后，它将起作用。FB上已经有[错误报告](http://developers.facebook.com/bugs/309812472446235)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:00:32.750

每个 URL 都需要[Facebook 的调试工具](https://developers.facebook.com/tools/debug)可以访问，并且需要在内部保持一致，没有重定向或循环。

如果在一个页面上，您有一个`og:url`标签，Facebook 将改为加载该 URL，因此如果您的 URL 包含控制元标签输出的参数，则 og:url 标签需要包含与第一个加载页面**相同**的参数地方。

如果您不确定调试工具看到了什么，并且由于某种原因不信任它，您可以在命令行上使用 curl 发出手动请求，以查看 Facebook 检测到的内容： `url -A "facebookexternalhit/1.1" -i [URL GOES HERE]`

# nhibernate - 状态改变而不是真正的删除

> ID：11085764
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:15.047
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-3

是否可以重载`Session.Delete()`行为以不从 DB 执行实际删除但将`int State`列的值更新为特殊*删除*的值？并且通过方法限制然后加载已删除的实体会很好`GetAll()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:59:02.140

这种删除称为软删除。您可以使用拦截器来覆盖`Session.Delete()`和使用`where`类映射来定义公式，例如：

```
<class where="State=0" ...> 
```

Gabriel Schenker 在 nhforge.org 上有一个示例：http: [//nhibernate.info/blog/2008/09/06/soft-deletes.html](http://nhibernate.info/blog/2008/09/06/soft-deletes.html)

# windows-phone-7 - 是否可以将视频添加到 Windows Phone 7 中的警报应用程序？

> ID：11085766
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:22.790
> 
> 标签：windows-phone-7

我想将视频添加到我创建的闹钟应用程序中，以便播放视频而不是音乐。是否可以将视频添加到警报中？我在警报课上没有发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:23:32.097

简而言之 - 否。警报不可配置，用户必须始终可以识别

# html - Joomla 滚动文本模块

> ID：11085767
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:25.373
> 
> 标签：html, javascript-events

目前在 joomla 2.5 中开发站点，正在寻找一种方法来添加一个自动滚动新闻的模块。经过大量搜索后，我无法从头开始开发滚动新闻模块。

我用普通的 javascript 和 html 开发，但完全不知道如何在我的 joomla 网站上做。

请帮忙，提前谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:07:48.820

有很多 joomla 滚动模块可用。您可以检查和使用满足您要求的模块。这是这些模块的完整列表[http://extensions.joomla.org/extensions/news-display/articles-display /news-tickers-a-scrollers](http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers)我已经使用了这个模块，它每次都对我很有效。[http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/11827](http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/11827)

# objective-c - 如何在 Box2d 中将多个凸多边形设置为一个形状？

> ID：11085771
> 
> 赞同：1
> 
> 时间：2012-06-18T15:13:31.567
> 
> 标签：objective-c, ios, cocos2d-iphone, box2d

我是 Box2d 的新手，我刚刚了解到它不支持凹多边形。我已阅读以解决此问题，我应该使用 2 个（或更多）凸多边形并将它们应用于相同的形状。

不幸的是，我已经找了一个小时来寻找如何做到这一点的例子，但找不到一个有效的例子。这是我的代码：

```
b2PolygonShape spriteShape;    
int num = 6;
        b2Vec2 verts[] = {
            b2Vec2(-32.5f / PTM_RATIO, 52.0f / PTM_RATIO),
            b2Vec2(-60.0f / PTM_RATIO, 26.5f / PTM_RATIO),
            b2Vec2(-58.5f / PTM_RATIO, 17.5f / PTM_RATIO),
            b2Vec2(-34.5f / PTM_RATIO, 7.5f / PTM_RATIO),
            b2Vec2(-11.0f / PTM_RATIO, 25.0f / PTM_RATIO),
            b2Vec2(-17.5f / PTM_RATIO, 47.5f / PTM_RATIO)
        };
        spriteShape.Set(verts, num);

        int num2 = 6;
        b2Vec2 verts2[] = {
            b2Vec2(-26.5f / PTM_RATIO, 1.0f / PTM_RATIO),
            b2Vec2(-34.0f / PTM_RATIO, -13.5f / PTM_RATIO),
            b2Vec2(-26.5f / PTM_RATIO, -32.0f / PTM_RATIO),
            b2Vec2(0.5f / PTM_RATIO, -42.5f / PTM_RATIO),
            b2Vec2(49.0f / PTM_RATIO, -40.5f / PTM_RATIO),
            b2Vec2(49.5f / PTM_RATIO, -14.0f / PTM_RATIO)
        };
        spriteShape.Set(verts2, num2); 
```

这只是用第二个多边形覆盖第一个多边形，而不是将它们组合起来。我怎样才能将它们结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:18:27.450

正如 iforce2d 所说，您应该创建多个固定装置。请看我对这个问题的回答： [Box2d 多个夹具和定位](https://stackoverflow.com/questions/4706484/box2d-multiple-fixtures-and-positioning/4707127#4707127)

# jquery - trigger.io：我应该使用 request.ajax 还是 jQuery.ajax

> ID：11085772
> 
> 赞同：4
> 
> 时间：2012-06-18T15:13:32.273
> 
> 标签：jquery, ajax, backbone.js, trigger.io

`forge.ajax`与普通的旧`jQuery.ajax`或`backbone.save()`呼叫相比，它有什么优势？我知道 forge api 可能支持跨域请求，但我可以使用 jQuery 或任何其他 AJAX 库来实现相同的功能。github 上的**基本**trigger.io 示例使用自己的 api：[https ://github.com/trigger-corp/Forge-Bootstrap/blob/master/js/demo.js](https://github.com/trigger-corp/Forge-Bootstrap/blob/master/js/demo.js)

如果我使用 jQuery 和/或 Backbone“常规”ajax 调用，它会对应用程序打包有任何影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:56:21.780

与普通的旧 XHR 相比，请求模块提供了几个重要的好处：

1.  您可以在不需要 JSONP 或 CORS 的情况下进行跨域请求
2.  您可以上传使用文件模块捕获的文件（例如）

如果您正在与您无法控制的第 3 方 API 进行交互，或者您只是不想费心进行额外的服务器端配置，那么第一个优势非常有用。

第二个优势意味着您可以轻松地将设备相机或图库中的图片和视频上传到您的网站或其他第三方。

# ruby-on-rails - 使用 has_many / belongs_to 访问控制器中的信息 - Ruby on Rails

> ID：11085773
> 
> 赞同：1
> 
> 时间：2012-06-18T15:13:39.427
> 
> 标签：ruby-on-rails, view, has-many, controllers, belongs-to

这可能是一个非常简单的问题，我很抱歉 - 我是 Rails 新手。

我有 2 个控制器 - 客户和订单。我已经知道了，当客户下订单时，他们的 id 被传递到一个隐藏字段中，以便订单表中的 customer_id 字段具有他们的 id。所以所有订单都有下订单的客户的 ID。我想要做的是让客户的显示视图显示他们的所有订单 - 所以所有订单都有他们的 id。

我有客户有_许多订单和订单属于_客户等。我如何引用客户/订单来提取正确的信息？我是否需要在控制器的显示操作中添加额外的信息？我已经尝试了我能想到的一切！到目前为止，我已经能够获得所有信息的哈希值以显示在显示视图中，但我无法获得个别信息位出现 - 例如 order.price。

我基本上想要客户显示视图中的订单详细信息表 - 订单价格，放置日期等。任何帮助将不胜感激，谢谢！

编辑：我现在有了这个 - 但无法让 line_items 位工作。关系是这样工作的：客户有很多订单，订单有很多行项目，行项目属于产品。我怀疑它不工作的原因是因为belongs_to。

```
<% @customer.orders.each do |order| %>
    <% order.line_items.each do |line_item| %>
        <tr>
            <td><%= line_item.created_at %></td>
                <% line_item.products.each do |product| %>
                    <td> <%= product.name %></td>
                <% end %>
            <td><%= order.email %></td>
        </tr>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:19:04.380

您不需要向控制器`show`操作添加任何内容。

在您的客户`show`视图中，您可能有权访问一个`@customer`对象。因为你的 has_many，那会有一个 collection `@customer.orders`。因此，在视图中，您可以执行类似的操作

```
<table>
<thead>
   <td>Item</td>
   <td>Quantity</td>
   <td>Price</td>
   <td>Date Placed<td>
</thead>

<% @customer.orders.each do |order| %>
<tr>
   <td><%= order.item.name %></td>
   <td><%= order.quantity %></td>
   <td><%= order.price %></td></tr>
   <td><%= order.date_placed %></td>
</tr>
<% end %>

</table> 
```

显然，我正在编造`order`您想要显示的可能字段，但这应该会给您这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:23:13.527

在你的表演动作中：

```
 def show
    @customer = Customer.find(params[:id])
  end 
```

在您的 routes.rb 中：

```
resources :customers 
```

在您看来：

```
<table>
<% @customer.orders.each do |order| %>
  <tr>
    <td><%= order.id %></td>
    <td><%= And Other Your Order Fields %></td>
  </tr>
<% end %>
</table> 
```

# java - 使用静态字段时出错

> ID：11085774
> 
> 赞同：0
> 
> 时间：2012-06-18T15:13:41.190
> 
> 标签：java, android, static, field

我已经在论坛和谷歌上进行了一些关于初始化和使用静态字段的搜索。但我不能单独修复它，所以这里是简化的代码：

```
...
import android.graphics.Canvas;
...

public class MyActivity extends Activity{

...
public static Canvas myCanvas = new Canvas();
public static float myMaxX;
public static float myMaxY;
...

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    ...
    myMaxX = myCanvas.getWidth(); // <=== Error, the app crashes right there
    myMaxY = myCanvas.getHeight();
    ... 
    ...

    }
...
} 
```

我错过了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:19:02.997

是的！

您需要先创建一个位图：

```
int w = WIDTH_PX, h = HEIGHT_PX;

BitmapConfig conf = Bitmap.Config.ARGB_8888; // see other conf types
Bitmap bmp = Bitmap.createBitmap(w, h, conf); // this creates a MUTABLE bitmap
Canvas canvas = new Canvas(bmp);

// ready to draw on that bitmap through that canvas 
```

但是创建一个静态的 Canvas 会散发出代码的味道。我不知道你想用它做什么，但我认为它不会有任何好处。如果您在多个线程之间共享此画布，您可能会发现您遇到大量关于并发读/写冲突的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T15:18:04.823

此时变量 myCanvas 可能没有值。所以你必须检查一个空值。

```
 myMaxX = (myCanvas != null)?myCanvas.getWidth():0; 
                // <=== check for null 
```

# ruby - Ruby MiniTest：assert_equal 的可读输出

> ID：11085779
> 
> 赞同：1
> 
> 时间：2012-06-18T15:13:56.253
> 
> 标签：ruby, minitest

是否有一种标准方法可以使故障输出`assert_equal`更具可读性？

```
test "compare" do
  assert_equal "some string", "some string that differs"
end 
```

这会产生：

```
MiniTest::Assertion: <"some string"> expected but was
<"some string that differs">. 
```

理想情况下，输出应该是对齐的，并且可能会被修剪以显示它们实际不同的地方。当前输出对于小字符串来说很好，但是当字符串很长时很难辨别它们的不同之处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:19:29.740

MiniTest 有一个返回差异工具的 diff() 方法。你也可以设置它。请参阅本文档。

[模块 MiniTest::断言](http://docs.seattlerb.org/minitest/MiniTest/Assertions.html#method-i-diff "西雅图.rb")

# ruby-on-rails - 在 spree 1.1.1 中找不到 gem 'spree-paypal-express'

> ID：11085781
> 
> 赞同：1
> 
> 时间：2012-06-18T15:14:17.183
> 
> 标签：ruby-on-rails, rubygems, spree

嗨，我已经安装并运行 Spree 1.1.1。并希望将 PayPal 集成到引擎中。当我尝试安装“spree_paypal_express”时，控制台显示以下消息，请帮帮我。

```
Could not find gem 'spree-paypal-express (>= 0) x86-mingw32' in the gems available on this machine. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:33:12.463

我已经从 github 存储库手动下载了 zip 文件夹并解压缩。通过进入运行目录`gem build spree_paypal_express.gemspec` ，它将生成一些文件，其中**spree_paypal_express-1.1.0.gem**将是其中之一。所以稍后运行 gem install`spree_paypal_express-1.1.0.gem`

那么你准备好了......你可以检查`gem list`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:31:15.200

这有几个可能的问题。

首先，您的 Gemfile 可能存在问题。例如，

-- gem 可能不在 gemfile 中，

-- 您可能在 gemfile 中拼错了 gem 的名称

-- 您可能在 gem 名称中有额外的空格（例如，`gem 'spree-paypal-express '`<- 注意额外的空格）

以下是您可以尝试的一些事情（在首先检查上述内容以确保您的 Gemfile 正确之后）：

*   删除所有 gem（转到 ruby​​ 的 gems 文件夹，删除规范文件夹和 gems 文件夹 - 或使用 rvm 创建一个新的 gemset）
*   宝石列表应该或多或少为空
*   宝石安装捆绑器
*   并尝试从头开始再次捆绑安装。

# c# - 如何通过单击 listView 项中的按钮从 ListView 中获取 selectedItem

> ID：11085788
> 
> 赞同：0
> 
> 时间：2012-06-18T15:14:37.943
> 
> 标签：c#, .net, wpf

我有一个列表视图项，它有一个按钮并显示对象的属性。我使用正确触发的 mvvm 模式为按钮设置了命令属性。

我的问题是，当按下按钮时它也没有获得选定的项目，我猜它没有触发 selectedItem 事件。

按下按钮时是否可以强制此事件？

```
 <Button 
         Height="20"
         Width="20"
         Grid.Column="3"
         Grid.Row="0"
         Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.RemoveClick}"
         CommandParameter="{Binding SelectedItem, ElementName=serverListView, Mode=TwoWay}"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:21:07.570

您可以： - 将命令的 commandParameter 设置为 {Binding} - 将 SelectedItem 绑定到 VM 的某个属性 - 在命令执行方法的开头将此属性设置为命令参数

# android - 在ActivityResult 上显示 ProgressDialog

> ID：11085792
> 
> 赞同：0
> 
> 时间：2012-06-18T15:14:45.247
> 
> 标签：android, webview, android-activity, progressdialog

我有两个活动，第一个加载 url（简单 webview），第二个从 listview 获取 url 的 id，然后回调第一个活动以加载 url。我`onActivityResult()`在第一个活动中使用方法来获取额外的数据（url id）。我的问题是，当我想`onActivityResult()`在第二个活动中从 ListView 中选择项目后，在第一个 Activity 中显示 ProgressDialog 时，我得到了一个 ProgressDialog 但它只显示几秒钟（非常快）然后在完成 url（WebView）的加载之前消失

这是我希望对我有所帮助的拖车活动的代码。

```
public class LibActivity extends Activity {

private ImageButton btnCategoriesList;

public static final int BOOK_CATEGORY_REQUEST_CODE = 1;

private WebView webView;

public ProgressDialog dialog;
private Handler handler;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lib);

    handler = new Handler();
    dialog = ProgressDialog.show(this, "Loading", "Please wait", true, false);

    DisplayMetrics displaymetrics = new DisplayMetrics();

    webView = (WebView) findViewById(R.id.categoryWebView);
    webView.setWebViewClient(new CategoryItemWebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://maktabati.mobi/V3/store.php?catid=" + "91");

    btnCategoriesList = (ImageButton) findViewById(R.id.btn_category_list);

    btnCategoriesList.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            showBooksCategories();
        }
    });
}

/**
 * 
 */
protected void showBooksCategories() {
    Intent intent = new Intent(getApplicationContext(), BooksCategoriesActivity.class);
    startActivityForResult(intent, BOOK_CATEGORY_REQUEST_CODE);
}

/**
 * 
 * @author Jamil
 * 
 */
private class CategoryItemWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.contains("book")) {
            String bookId = url.substring(12);
            Intent intent = new Intent(getApplicationContext(), BookDetailActivity.class);
            intent.putExtra("BOOK_ID", bookId);
            startActivity(intent);
            view.stopLoading();
        }
        return super.shouldOverrideUrlLoading(view, url);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        dialog.dismiss();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, final Intent data) {
    if (requestCode == BOOK_CATEGORY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            dialog = ProgressDialog.show(this, "Loading", "Please wait", true);
            new Thread() {
                public void run() {
                    webView.loadUrl("http://maktabati.mobi/V3/store.php?catid=" + data.getStringExtra("CATEGORY_ID"));
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            dialog.dismiss();
                        }
                    });
                }
            }.start();

        }
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

第二个活动

```
public class BooksCategoriesActivity extends Activity {

ItemsCategoriesAdapter adapter;
ArrayList<Category> lstCategory;
Handler handlerProgressDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.books_categories_list);
    handlerProgressDialog = new Handler();
    CategoryHandler handler = new CategoryHandler();
    ParserCreater parserCreater = new ParserCreater(handler);
    parserCreater.parse("http://maktabati.mobi/V3/getCategories.php");
    lstCategory = handler.getLstCategory();
    final ListView listView = (ListView) findViewById(R.id.categories_list);
    adapter = new ItemsCategoriesAdapter(lstCategory);
    listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, final int position, long arg3) {
            Intent intent = new Intent(getApplicationContext(), LibActivity.class);
            intent.putExtra("CATEGORY_ID", lstCategory.get(position).getId());
            BooksCategoriesActivity.this.setResult(RESULT_OK, intent);
            finish();
        }
    });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:20:41.307

请尝试如果您从 onActivityResult 函数中删除以下代码会发生什么情况：

```
handler.post(new Runnable() {
                        @Override
                        public void run() {
                            dialog.dismiss();
                        }
                    }); 
```

该`onPageFinished()`函数应在 之后调用`webView.loadUrl()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:28:49.983

该方法`loadUrl()`不是阻塞调用，因此您不需要从后台线程调用它。如果你想捕捉页面加载完成的点，你可以`WebviewClient`在你的对象上设置一个对象`WebView`来处理这方面的一系列回调。

此外，由于该调用不会阻塞，它会立即返回，并且您的`dismiss()`方法几乎会立即被调用`show()`，这就是您看到它仅短暂显示的原因。

高温高压

# git - Git：使用 git clean 排除文件

> ID：11085795
> 
> 赞同：45
> 
> 时间：2012-06-18T15:14:52.597
> 
> 标签：git, version-control, git-clean

我正在开发一个大型 python 项目，如果 .pyc 和 *~ 文件我真的很恶心。我想删除它们。我已经看到`-X`git clean 的标志会删除未跟踪的文件。正如你可以想象的那样，我没有跟踪`.pyc`也没有`*~`文件。这将成为诀窍。问题是我有一个`local_settings.py`文件要在 git clean 之后保留。

所以，这就是我所拥有的。

.gitignore：

```
*.pyc
*~
local_settings.py 
```

当我执行这个命令时：

```
git clean -X -n -e local_settings.py 
```

我得到这个结果列表：

> 将删除 local_settings.py
> 将删除 requirements.txt~
> 将删除（其他一堆）~ 文件
> 将删除（其他一堆）pyc 文件

我不想删除 local_settings.py 文件。我已经尝试了很多方法来做到这一点，但我无法弄清楚如何完成它。

```
git clean -X -n -e local_settings.py
git clean -X -n -e "local_settings.py"
git clean -X -n --exclude=local_settings.py
git clean -X -n --exclude="local_settings.py" 
```

似乎没有任何效果。

**编辑：**

对于后代，正确的做法是（感谢@Rifat）：

```
git clean -x -n -e local_settings.py # Shows what would remove (-n flag)
git clean -x -f -e local_settings.py # Removes it (note the -f flag) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-18T15:33:40.480

区别在于`X`您使用的资本。使用小`x`而不是大写。像在：`git clean -x`。

```
git clean -x -n -e local_settings.py # Shows what would remove (-n flag)
git clean -x -f -e local_settings.py # Removes it (note the -f flag) 
```

从[git 文档](http://git-scm.com/docs/git-clean)：

> ```
>  -x
>        Don't use the standard ignore rules read from .gitignore (per
>        directory) and $GIT_DIR/info/exclude, but do still use the ignore
>        rules given with -e options. This allows removing all untracked
>        files, including build products. This can be used (possibly in
>        conjunction with git reset) to create a pristine working directory
>        to test a clean build.
> 
>    -X
>        Remove only files ignored by git. This may be useful to rebuild
>        everything from scratch, but keep manually created files. 
> ```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-06-17T21:10:57.930

```
git clean -X -n --exclude="!local_settings.py" 
```

作品。当我搜索并获得[此页面](http://git.661346.n2.nabble.com/git-clean-exclude-broken-td6721857.html)时，我发现了这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-07T13:49:19.053

我将属于此类的本地文件放在 .git/info/exclude 中（例如我的 IDE 项目文件）。他们可以像这样进行清洁：

```
git ls-files --others --exclude-from=.git/info/exclude -z | \
    xargs -0 --no-run-if-empty rm --verbose 
```

在哪里：

*   --others：显示未跟踪的文件
*   --exclude-from：提供标准的 git 忽略样式文件以从列表中排除
*   -z / -0：使用 \0 而不是 \n 来拆分名称
*   --no-run-if-empty：如果列表为空，则不运行 rm

您可以创建一个别名，例如：

```
git config --global alias.myclean '!git ls-files --others --exclude-from=.git/info/exclude -z | xargs -0 --no-run-if-empty rm --verbose --interactive' 
```

--interactive 意味着您必须执行 git myclean -f 才能强制删除。

参考： http: [//git-scm.com/docs/git-ls-files](http://git-scm.com/docs/git-ls-files)（加上默认的.git/info/exclude的第一行）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:29:39.963

如果您正在运行 Python 2.6+，只需将环境变量 , 设置`PYTHONDONTWRITEBYTECODE`为`true`. 您可以将以下内容添加到类似的内容中，`.profile`或者`.bashrc`为您的个人资料完全禁用它：

```
export PYTHONDONTWRITEBYTECODE=true 
```

或者，如果您只想为您正在工作的特定项目执行此操作，则每次都需要在您的 shell 中运行上述代码（或者如果您使用的是 virtualenv 和 virtualenvwrapper，则在您的一个 virtualenv 初始化脚本中），或者您可以`-B`在调用时简单地传递参数`python`，例如

```
python -B manage.py runserver 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:36:58.157

如果您已经提交了 pyc 等，请执行以下操作：

将 *.pyc、*~ 和 local_settings.py 添加到 .gitignore。然后在您的 git 存储库中执行以下操作：

```
find . -name '*.pyc' | xargs rm
find . -name '*~' | xargs rm 
```

然后做：

```
git commit -am "get rif of them" 
```

现在他们不应该再打扰你了

# java - 调用 setVisible(false) 后，我的 JFrame 内容在调用 set Visible(true) 时消失了

> ID：11085804
> 
> 赞同：1
> 
> 时间：2012-06-18T15:15:34.270
> 
> 标签：java, swing, jframe

我正在设计一个应该在其中绘制文本的绘图程序（在 Java 中）。由于我正在使用 kinect 执行此操作，因此我想使用我已经找到的 onscreenKeyboard。这个键盘基本上就是一个 JFrame 巫婆 JComponents 在里面，我不想讲太多细节......

```
public MainFrame() {
    super("Draw");
    setLayout(new BorderLayout());
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null); //so basically some standard stuff
    makeGUI();
    this.keyboard = new start_vk(); //strange name for a class but I didn't make it
    } 
```

在 start_vk 中，我可以调用 setVisible(true) 并且它可以工作，但我希望稍后仅在需要时才调用它......现在我在某个地方调用 setVisible(true) 并且只有 JFrame 出现，没有组件在里面 ...

我是否应该在一个单独的线程中调用它，因为 start_vk 的构造函数是使用 SwingUtilities.invokeLater() 完成的？或者有什么其他建议？

```
 public start_vk() {
 SwingUtilities.invokeLater(new Runnable() {
     public void run() {
        myConf = defaultConf.setDefault(myConf);
        myKeys = defaultConf.setKeyboard(myKeys);
        readConf();
        thisClass = new vk_gui();
        thisClass.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
        thisClass.setVisible(true); // I've set it to true here but would like to set it to false to be able to call it later ...
     }
  });
  }

  public  void newText(){
      thisClass.newText();
  }

  public  boolean isVisible(){
      return thisClass.isVisible();
  }

  public  String getText(){
      return thisClass.getText();
  } 
```

vk_gui 中的代码：

```
public String getText(){
   if (super.isVisible())
       return null;
   return jTextArea.getText();
}

public void newText(){
   this.setVisible(true);
   this.setAlwaysOnTop(true);
   jTextArea.setText("");
} 
```

这就是我当时的称呼：

```
keyboard.newText();
while(keyboard.getText()==null){} // I know it's busy waiting and it's not good and all that ...
text = keyboard.getText(); 
```

感谢您的任何建议，马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:24:07.130

1.  `setVisible(true);`必须是中的最后一行代码`public MainFrame() {`

2.  应该是什么`this.keyboard = new start_vk();`？？？，也许`Swing Timer`用于调用某些东西并处理

3.  > 调用 setVisible(false) 后，我的 JFrame 内容在调用 set Visible(true) 时消失了

如果您在已经可见的容器中添加或删除某些内容，则必须调用

```
nearestContainer.revalidate();
// for JFrame/JDialog/JWindow and upto Java7 is there only validate();
nearestContainer.reapaint() 
```

. [4\. 尽快发布SSCCE](http://sscce.org/)以获得更好的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:45:16.623

由于您的`setVisible( true )`调用是第一次调用之一（在向容器添加任何组件之前），您应该重新验证布局。

这些方法的javadoc中明确提到了这一点（例如，该[`Container#add`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)方法的复制粘贴）：

> 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。

# php - PHP SQL Server，调用带参数的存储过程

> ID：11085806
> 
> 赞同：0
> 
> 时间：2012-06-18T15:15:45.497
> 
> 标签：php, sql-server, sql-server-2008, stored-procedures

我面临下一个问题：

我做了一个存储过程如下：

```
CREATE PROCEDURE verify_user_connection
@username nvarchar(50),
@pass nvarchar(50)
AS

BEGIN

SELECT users.username, users.pass 
FROM dbo.users
WHERE users.username = '@username'
AND users.pass = '@pass'

RETURN '@username'

END 
```

从 PHP 代码中，我这样称呼他：

```
 <?php
  /* Handle form buttons. */
  if (isset($_POST['login'])) {
    if (!empty($_POST['username']) || !empty($_POST['pass'])) {
      $username = $_POST['username'];
      $password = $_POST['pass'];
      $sql = "{ CALL dbo.verify_user_connection (@username = ?, @pass = ?) }";
      $param = array($username, $password);
      $result = sqlsrv_query($conn, $sql, $param);
      $row = sqlsrv_fetch_object($result);
      echo $row;
      if (!$row) {
        die(print_r(sqlsrv_errors()));
      }
      else {
        echo "record found";
      }
    }
    else {
      echo "something went wrong";
    }
  }
  ?> 
```

好吧，我在微软的 SQLSRV 驱动程序中有点新，我知道我的语法在这里不准确，有人能指出我的问题并向我解释我做错了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:23:18.030

这不会有太大帮助，但我发现使用 SQL Server 和 SP 最可靠的方法是使用 PHP ADODB ( [http://adodb.sourceforge.net/#download](http://adodb.sourceforge.net/#download) ) 连接和调用 procs .

在使用 SQL Server 时，我总是发现内置的 sql server 函数充其量是不完整的。

如果您仍在苦苦挣扎，我很乐意通过电子邮件为您提供更多信息。

# c# - 一种方法执行两种功能

> ID：11085809
> 
> 赞同：0
> 
> 时间：2012-06-18T15:15:49.787
> 
> 标签：c#, string

我有以下方法：

```
public string Phase(string phase)
{
    return "Phase 1";
} 
```

问题是我需要它以 2 个不同的标签输出 2 个字符串：

“阶段1”

“阶段2”

我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:24:17.550

您有几个选项可以返回多个值。

例如，您可以返回一个`IEnumerable<string>`（或其他一些集合）。你也可以返回一个`Tuple<string,string>`.

```
public IEnumerable<string> Phase()
{
    yield return "Phase 1";
    yield return "Phase 2";
} 
```

或者

```
public Tuple<string,string> Phase()
{
    return Tuple.Create("Phase 1", "Phase 2");
} 
```

话虽如此，使用两个单独的方法（或属性）来返回每个字符串可能更简单，而不是试图将其强制为单个方法调用。

另一种选择是传入一个参数，该参数允许该方法选择要返回的标签：

```
public string Phase(int phase)
{
    switch(phase)
    {
        default:
            return "Phase 1";
        case 2:
            return "Phase 2";
    }

    // Or just
    // return "Phase " + phase.ToString();

} 
```

* * *

编辑：

鉴于您的评论，我会推荐一个刚刚返回数组的属性：

```
public string[] Phases
{
    get { return new[] { "Phase 1", "Phase 2" }; }
} 
```

然后，您可以将其用作：

```
var phases = this.month1.Phases;
this.lblPhase.Text = phases[0];
this.lblPhase2.Text = phases[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:25:22.777

如果该方法在您的标签所在的同一范围内（同一表单的一部分），那么您可以在该方法中设置标签的值：

```
public void Phase(string phase)
{
    label1.Text = "Phase 1";
    label2.Text = "Phase 2";
} 
```

如果它与您的标签不在同一范围内，并且您正在返回要设置的标签的值，则可以使用元组：

```
public Tuple<String, String> Phase(string phase)
{
    return new Tuple<string, string>("Phase 1", "Phase 2");
} 
```

然后，当您从返回中收到返回值时，请设置如下标签：

**编辑以反映 OP 的重定向**

```
var answer = month1.Phase("Phase");
label1.Text = answer.Item1;
label2.Text = answer.Item2; 
```

# mysql - mysqlimport - 导入的数据存储在哪里？

> ID：11085817
> 
> 赞同：0
> 
> 时间：2012-06-18T15:16:41.980
> 
> 标签：mysql, mysqlimport

巨大的mysql菜鸟。如果这很愚蠢，请提前抱歉，但我在发布之前已经搜索过了。

我在本地文件上使用 mysqlimport 到在我的计算机上运行的 mysql 数据库。如果我删除了导入的原始文件，我还能访问数据吗？如果是这样，数据存储在哪里？在某些 Oracle 服务器上？

如果它存储在本地，它是否存储在占用硬盘空间较少的压缩版本中？

谢谢，

肥中微子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:19:32.557

如果您将文件导入数据库，它将将该数据的实例存储在数据库中，所以是的，您仍然应该能够访问数据，但是为什么要删除它呢？

它存储在 mySQL 中的数据库文件池中，当您启动 mysql 时会引用它们……是的，导入的文档在大多数情况下只是一个 .dat 文件，作为您的数据库文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:20:14.397

当您导入存储在本地计算机上的数据库文件中的数据时，使用 mysql 客户端程序或类似 phpmyadmin 的程序，您应该能够查看导入的数据。

它不再以与您首次导入时相同的格式存储。

您可以使用 mysqldump 之类的东西来获取数据。 [http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# eclipse - Eclipse Ganymede 抛出空指针异常

> ID：11085818
> 
> 赞同：0
> 
> 时间：2012-06-18T15:16:55.977
> 
> 标签：eclipse, nullpointerexception, ganymede

我的 Eclipse IDE 会定期（每 3-4 天）不时抛出空指针异常。首先，我的 Java EE 项目将无法编译，并将在错误选项卡中输出空指针异常。

我确保我的项目方面（java 5.0）和编译器是相同的（1.5）。但是，当我重新启动 Eclipse 时，在清理和重建项目后问题就消失了——首先没有错误。

这很烦人，因为我需要很长时间才能重新启动 Eclipse IDE、清理 + 构建、重新启动服务器以及实际开发 + 测试代码。

我确保我也有足够的内存，512，因为我过去也遇到过 Eclipse 的内存问题，但那已经解决了。我提到它，因为它可能是相关的。

我在 C:\Eclipse 中为 Java EE 重新安装了 Eclipse Ganymede 3 次，但仍然存在同样的问题。在 D:\ 另一个分区磁盘中尝试过，但不起作用。

建议将不胜感激。

```
Eclipse Platform
Version: 3.4.2
Build id: M20090211-1700
Java EE Ganymede SR2 Win32
Platform: Windows XP 32-bit 
```

这是堆栈跟踪：

```
!ENTRY com.bea.weblogic.eclipse 4 9999 2012-06-15 12:22:53.989
!MESSAGE Unhandled Eclipse-WebLogic error
!STACK 0
java.lang.NullPointerException
at com.bea.weblogic.eclipse.model.Deployments.getName(Deployments.java:292)
at com.bea.weblogic.eclipse.model.Deployments.loadEJBs(Deployments.java:237)
at com.bea.weblogic.eclipse.model.Deployments.loadAll(Deployments.java:109)
at com.bea.weblogic.eclipse.ui.views.WebLogicServerTreeContentProvider.loadModulesAndRefresh(WebLogicServerTreeContentProvider.java:273)
at com.bea.weblogic.eclipse.ui.views.WebLogicServerTreeContentProvider.serverStateChanged(WebLogicServerTreeContentProvider.java:247)
at com.bea.weblogic.eclipse.model.ServerManager.fireServerStateChanged(ServerManager.java:94)
at com.bea.weblogic.eclipse.launcher.ServerLauncher$3.run(ServerLauncher.java:199)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:133)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3800)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3425)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2384)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2348)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:495)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:490)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:585)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:29:52.417

一些建议：

*   您可以尝试从控制台运行 eclipse，配置一些日志记录以了解异常。也许您应该删除一些您不使用的插件。
*   您可以尝试仅安装 Eclipse Classic，然后安装所需的插件。我总是这样做，并且没有遇到任何 NPE 异常问题。您将获得干净的 Eclipse，而没有不必要的插件，因此您减少了出现异常的可能性。
*   您也可以尝试使用新版本的 Eclipse - Indigo。
*   您也可以尝试使用其他 IDE（例如：IntelliJ IDEA [http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/)）

你可能也会感兴趣：

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=328550](https://bugs.eclipse.org/bugs/show_bug.cgi?id=328550)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=321358](https://bugs.eclipse.org/bugs/show_bug.cgi?id=321358)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=326434](https://bugs.eclipse.org/bugs/show_bug.cgi?id=326434)

# c# - 如何从命令提示符执行 NUnit 测试用例

> ID：11085822
> 
> 赞同：26
> 
> 时间：2012-06-18T15:17:01.673
> 
> 标签：c#, automation, nunit

如何使用 NUnit 从命令控制台执行测试用例？我有一组基于 NUnit 框架用 C# 编写的 Selenium 测试。我需要简单地通过从命令控制台运行来执行测试用例。

在 JUnit 中，我们可以从 cmd 运行测试用例

```
java junit.swingui.TestRunner test.Run 
```

我们如何在 NUnit 中进行上述操作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T15:18:36.253

用于[`nunit-console.exe`](http://www.nunit.org/index.php?p=nunit-console&r=2.2.10)从命令行运行测试。

例如：

```
nunit-console.exe /xml:results.xml path/to/test/assembly.dll 
```

这将运行单元测试并将结果保存在 results.xml 文件中，您可以轻松地使用该文件。

请参阅所有可用的各种命令行开关的文档[。](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2.10)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-25T14:24:21.737

我想补充几句关于 NUnit 最新版本的内容。**控制台应用程序的名称在 NUnit 3 中已更改**为`nunit3-console.exe`。有关所有可能选项的信息可以在官方[文档](https://github.com/nunit/docs/wiki/Console-Command-Line)中找到。例如，运行程序集中的所有测试（结果`TestResult.xml`默认保存到文件中）。

```
nunit3-console.exe path/to/test/assembly.dll 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-08T10:15:50.073

我刚刚找到了另一个不错的解决方案：

将以下命令添加到“构建事件”/“构建后事件”中，将在构建项目后自动在 Nunit-Gui 中运行测试。

我希望这会很有用：

```
"C:\Program Files (x86)\NUnit 2.6.3\bin\nunit-x86.exe" $(TargetPath) /run 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-21T14:56:04.643

Visual Studio：2017、2019（预览版）在 Mac 上使用以下命令：

```
nunit-console <path/to/project>/<project-name>/bin/Debug/<project-solution-name>.dll 
```

例如：

> nunit-console /Users/pratik/Projects/selenium-mac13/selenium-test/bin/Debug/selenium-test.dll

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-26T08:22:40.567

nunit3-console.exe“测试文件（dll）的路径”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-17T17:41:00.093

*   使用 Visual Studio 在 Windows 10 桌面上工作
*   我在 C# 中有一组测试，我使用 Category==API 设置测试方法。
*   为了通过 Bamboo 远程运行测试（Nunit3-console），我添加了这个 Bamboo Powershell 脚本：

    ```
    Invoke-Command -Credential $credentials -ComputerName $Server -ScriptBlock{
         $pathToDdrive = "D:"
         $pathtoDLL = Join-Path $pathToDdrive -ChildPath "RestOfThePathToDLL"

         cd D:\...\NUnit.ConsoleRunner.3.10.0\tools
         .\nunit3-console.exe $pathToDLL --where "cat=='API'" 
    } 
    ```

# c# - 哪个 ORM 最适合这里？

> ID：11085829
> 
> 赞同：2
> 
> 时间：2012-06-18T15:17:24.043
> 
> 标签：c#, .net, orm

我需要为一个项目选择一个 ORM，而我只有一些 NHibernate 经验。我一直在阅读 StackOverflow 的问答，与我的需求最相似的是[What ORM for .net 我应该使用什么？](https://stackoverflow.com/questions/1691575/what-orm-for-net-should-i-use?rq=1)，但我想对目前的产品有一个更充分的答案（链接来自 2009 年），并且也考虑到我项目的一些要点。

对我来说最简单的解决方案是使用 NHibernate，因为它成熟、功能丰富并且我已经使用过它，但我更愿意为项目选择最佳选项，即使我必须再次“学习”。

该项目将作为与 SAP 通信的核心开始。核心必须支持独立和/或相互依赖的模块，并且每个模块都可能需要使用来自数据库的自己的数据。最后一步是实现我们使用的 SAP 部分。我需要的特征是上一个链接中的特征，这里还有一些要记住的事情：

*   我希望能够拆分数据访问层，这样拥有一两个模块的用户就不需要全部了。

*   设计师将不胜感激。

*   它将从大约 20 到 30 张桌子开始，并且在几年内，这个数字将增长数百。

*   每个表的寄存器数量从两个或三个到 150000+（很少）不等。

*   它不需要是一个单一的产品解决方案。NHibernate 和 Devart Entity Develop 之类的组合也受到欢迎。

*   这个项目的团队也将有学生必须学习 C Sharp，他们中的一些人可能不知道 ORM 到底是什么，所以如果它很简单，或者至少基本的东西不是，那就太好了非常复杂（混合大量 lambda、反射、扩展方法等）。

最后一个不是很重要。我希望这足够具体以避免被关闭（我链接的问题仍然是开放的）。

编辑： - 这是一个桌面应用程序。- 文档和社区也非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:33:30.887

如今，.Net 最流行的 ORM 是实体框架。它来自 Microsoft，在 MSDN 风格中有很好的文档记录。它符合您的标准。

我与 NHibernate 一起工作，发现文档不完整、不一致，有时甚至丢失。大多数时候，我不得不为 Hibernate 使用文档，这些文档不适用于 NHibernate，只是类似的。

EF 可以做同样的事情并且比 NHibernate 更多，并且最新版本有 Migrations，这是缺失的（当我使用 NHibernate 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:44:22.913

考虑一下 Dapper：[dapper-dot-net](http://code.google.com/p/dapper-dot-net/)。

Dapper 是一个非常简单的 ORM，由 StackOverflow 开发和使用。

缺乏文档，但那是因为它很简单。您可以在项目页面或类似的一些网站中找到一些使用[示例](http://2ndimension.net/blog/?p=302)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T15:36:32.510

我知道这是一个很老的问题，但我想为任何来到这里的人发布一个答案。查看[SQL 数据](http://sqldata.codeplex.com)。它使用起来非常简单，功能非常强大，符合所有 OP 的要求。

# wpf - 更改 MainWindow.xaml 后 ListBox 出现 DataContext 问题

> ID：11085831
> 
> 赞同：1
> 
> 时间：2012-06-18T15:17:27.507
> 
> 标签：wpf, vb.net, visual-studio-2010, data-binding, mvvm

这个月我是 WPF 和 MVVM 设计模式的新手，而且总体上有点不习惯。为了学习，我一直在玩文本框、矩形以及在窗口中显示它们的方法。我从 Ashley Davis 出色的“WPF 中的简单拖动选择”教程开始，介绍了为矩形集合创建视图模型、将列表框绑定到所述集合、使用画布设置列表框的样式、为矩形，以及基本的“橡皮筋”选择逻辑。

从那以后，我在本教程的基础上改进了拖动选择，使其表现得更像 Windows 资源管理器中的选择，并允许从角或边缘调整矩形的大小。

一切都很好，直到我更改了 MainWindow.xaml 以在侧面包含一个用于各种按钮和控件的列，从而将“编辑器表面”网格从主窗口上的 1x1 网格内部移动到 1x2 网格的列，将数据模板移动到网格的资源中（因为它将是窗口中唯一需要它的元素）。一旦我这样做了，我编写的与列表框交互的子例程就开始出现异常——橡皮筋选择不再起作用。没有视觉指示正在选择列表框项目（它们之前已突出显示），并且在拖动选择 mouseUp 事件后询问 listBox.SelectedItems.Count 返回零。

经过一些实验，阅读了这个网站上的许多问题和我的 WPF Unleashed 书的部分，并查看了 msdn 数据绑定概述，到今天早上我仍然找不到我的错误。我相信这是一个数据绑定错误或不正确的数据上下文。

有关所涉及的视图模型的一些详细信息：

数据字段视图模型

...实现 INotifyPropertyChanged 并公开其属性（在本例中为矩形和文本框）X、Y 位置、宽度、高度、可见性和选择状态（一种在多个橡皮筋选择操作中跟踪它的方法）

页面视图模型

...实现 INotifyPropertyChanged，除其他外，还有一个 DataFieldViewModel 类型的 ObservableCollection，称为 DataFields，并将其公开为 ReadOnly 属性。

下面看一下 MainWindow.xaml.vb 和其中一个损坏的子：

```
Namespace EditorUI

'
' The main window of the editor.
'
Partial Public Class MainWindow
    Inherits Window

    '
    ' Temporary.  Will be replaced with a collection of pages eventually
    '
    Private Pages As PageViewModel 
```

（为简洁起见，删除了其余数据成员和属性）

```
 Public Sub New()

        InitializeComponent()
        Pages = New PageViewModel

    End Sub 
```

（这是有问题的潜艇之一）

```
 '
    ' Select all the data fields that intersect the selection rectangle.
    ' Remove any selected data fields which do not.
    '
    Private Sub ApplyDragSelectionRectangle()

        If (LeftMouseDrag) Then

            Dim selectionRectangle As New Rect(Canvas.GetLeft(selectionRectangleBorder), _
                                               Canvas.GetTop(selectionRectangleBorder), _
                                               selectionRectangleBorder.Width, _
                                               selectionRectangleBorder.Height)

            '
            ' Find and select all the list box items.
            '
            For Each dataFieldViewModel As DataFieldViewModel In Me.Pages.GetDataFields
                Dim hitBox As New Rect(dataFieldViewModel.hbX, _
                                       dataFieldViewModel.hbY, _
                                       dataFieldViewModel.hbWidth, _
                                       dataFieldViewModel.hbHeight)

                If (selectionRectangle.IntersectsWith(hitBox)) Then
                    If (dataFieldViewModel.ExistingSelection) Then
                        '
                        ' data field is already part of an existing selection; unselect it
                        '
                        Me.DataFieldListBox.SelectedItems.Remove(dataFieldViewModel)
                    Else
                        Me.DataFieldListBox.SelectedItems.Add(dataFieldViewModel)
                    End If
                End If
                If Not (selectionRectangle.IntersectsWith(hitBox)) Then
                    If (dataFieldViewModel.ExistingSelection) Then
                        '
                        ' data field was part of an existing selection; reselect it
                        '
                        Me.DataFieldListBox.SelectedItems.Add(dataFieldViewModel)
                    Else
                        Me.DataFieldListBox.SelectedItems.Remove(dataFieldViewModel)
                    End If
                End If

            Next
        Else
            dragSelectionCanvas.Visibility = Visibility.Collapsed
            '
            ' update all data fields' existing selection status to the new
            ' selection (first set them all to false to catch data fields 
            ' that were removed)
            '
            For Each dataFieldViewModel As DataFieldViewModel In Me.DataFieldListBox.Items
                dataFieldViewModel.ExistingSelection = False
            Next
            For Each dataFieldViewModel As DataFieldViewModel In Me.DataFieldListBox.SelectedItems
                dataFieldViewModel.ExistingSelection = True
            Next
        End If

    End Sub 
```

最后，这是整个 XAML：

```
<Window x:Class="EditorUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Editor_UI_Experiments.EditorUI"
    Title="Editor UI Experiments" 
    Width="900"
    Height="600"
    Loaded="Window_Loaded" 

    >

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" />
            <ColumnDefinition Width="778*" />
        </Grid.ColumnDefinitions>

        <Button
            Grid.Column="0"
            VerticalAlignment="Top"
            Height="25"
            Content="Explode :D"
            Name="Button1" 

            />

        <Grid
            Name="EditorSurface"
            Grid.Column="1"
            MouseDown="Editor_MouseDown"
            MouseUp="Editor_MouseUp"
            MouseMove="Editor_MouseMove"

            >

            <Grid.Background>
                <ImageBrush ImageSource="{Binding GetPageImage}" />

            </Grid.Background>

            <Grid.DataContext>

                <local:PageViewModel/>

            </Grid.DataContext>

            <Grid.Resources>
                <!--
                A data template that defines the visuals for a data field.
                -->
                <DataTemplate 
                DataType="{x:Type local:DataFieldViewModel}"
                    >
                    <!-- 
                    The data field is embedded in a Grid so that we can set the Margin
                    The margin is set so that the ListBox item selection fits nicely around the Rectangle.
                    -->
                    <Grid
                    Margin="0,2,2,2"
                        >
                        <!-- 
                        text box where the data field's response lives (it could be a Database tag,
                        or a check mark, or custom response)
                        -->
                        <TextBox
                        Width="{Binding Width}"
                        Height="{Binding Height}"
                        Background="LightBlue"
                        Cursor="IBeam"
                        MouseDown="TextBox_MouseDown"
                        MouseUp="TextBox_MouseUp"
                        MouseMove="TextBox_MouseMove"
                        Text="Example Text"
                            />
                        <!-- 
                        rectangle that lives on top of the text field to aid in positioning the data field
                        -->
                        <Rectangle
                        Width="{Binding Width}"
                        Height="{Binding Height}"
                        Stroke="LightBlue"
                        StrokeThickness="5"
                        Fill="White"
                        Opacity="0.5"
                        Cursor="SizeAll"
                        MouseDown="Rectangle_MouseDown"
                        MouseUp="Rectangle_MouseUp"
                        MouseMove="Rectangle_MouseMove"
                        Visibility="{Binding Visibility}"
                            />
                        <!--
                        Thumb "handles" to give the user a way to resize the data field
                        -->
                        <!-- 
                        These four live in the corners of a data field and allow resizing on
                        X and Y simultaneously
                        -->
                        <Rectangle
                        Width="7"
                        Height="7"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Left"
                        Margin="-1,-1,0,0"
                        Cursor="SizeNWSE"
                        Fill="LightGray"
                        Stroke="Gray"
                        Opacity="0.6"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Width="7"
                        Height="7"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Right"
                        Margin="0,-1,-1,0"
                        Cursor="SizeNESW"
                        Fill="LightGray"
                        Stroke="Gray"
                        Opacity="0.6"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Width="7"
                        Height="7"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Left"
                        Margin="-1,0,0,-1"
                        Cursor="SizeNESW"
                        Fill="LightGray"
                        Stroke="Gray"
                        Opacity="0.6"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Width="7"
                        Height="7"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Right"
                        Margin="0,0,-1,-1"
                        Cursor="SizeNWSE"
                        Fill="LightGray"
                        Stroke="Gray"
                        Opacity="0.6"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <!--
                        These four live along the data field's edges and allow resizing in the X
                        or Y direction only.  They have zero opacity to avoid visual clutter
                        -->
                        <Rectangle
                        Height="5"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Stretch"
                        Margin="7,0,7,0"
                        Cursor="SizeNS"
                        Fill="Yellow"
                        Opacity="0"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Height="5"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Stretch"
                        Margin="7,0,7,0"
                        Cursor="SizeNS"
                        Fill="Yellow"
                        Opacity="0"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Width="5"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Left"
                        Margin="0,7,0,7"
                        Cursor="SizeWE"
                        Fill="Yellow"
                        Opacity="0"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />
                        <Rectangle
                        Width="5"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Right"
                        Margin="0,7,0,7"
                        Cursor="SizeWE"
                        Fill="Yellow"
                        Opacity="0"
                        Visibility="{Binding Visibility}"
                        MouseDown="Thumb_MouseDown"
                        MouseUp="Thumb_MouseUp"
                        MouseMove="Thumb_MouseMove"

                            />                            
                    </Grid>
                </DataTemplate>

            </Grid.Resources>
            <!--
            This ListBox presents the data fields

            The data template that defines the visuals for each data field is in the 
            resources section at the start of this file.
            -->

            <ListBox
                x:Name="DataFieldListBox"
                ItemsSource="{Binding GetDataFields}"
                SelectionMode="Extended"
                Background="Transparent"

                >
                <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemContainerStyle>
                        <Style
                            TargetType="ListBoxItem"

                            >
                            <Setter
                            Property="Canvas.Left"
                            Value="{Binding X}"

                            />
                            <Setter
                            Property="Canvas.Top"
                            Value="{Binding Y}"

                            />
                        </Style>
                    </ListBox.ItemContainerStyle>
            </ListBox>

            <!--
            Render a drag selection rectangle using a Canvas with a border
            -->
            <Canvas
            x:Name="dragSelectionCanvas"
            Visibility="Collapsed"

                >
                <Border 
                x:Name="selectionRectangleBorder"
                BorderBrush="Blue"
                BorderThickness="1"
                Background="LightBlue"
                CornerRadius="1"
                Opacity="0.5"

                />
            </Canvas>

    </Grid>

</Grid> 
```

我确信我的代码充满了新手错误，但到目前为止它很有趣。希望能快速改进，也许把它变成有用的东西。欢迎提供反馈和见解。如果有人碰巧发现我哪里出错了，我会感激你的。

-汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:44:34.833

我怀疑这与您`DataContext`在 XAML 中定义 Grid 的事实有关，但您的拖动事件在代码隐藏中引用了一个对象。因此，您`ListBox`正在绑定到 的 XAML 副本`PageViewModel`，而您的代码隐藏正在使用的不同副本`PageViewModel`

我建议`DataContext`从 XAML 中删除该属性，而是将其设置在代码隐藏中，例如`Me.DataContext = Pages`

请记住，设置`DataContext`in 代码隐藏通常是不好的做法，除非它是应用程序启动代码。

# github - github教育账号有什么优势？

> ID：11085833
> 
> 赞同：0
> 
> 时间：2012-06-18T15:17:30.323
> 
> 标签：github

我的导师报名参加了github的教育计划。他无法将他创建的存储库设为私有。有没有办法做到这一点？除此之外，教育计划的优势是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:37:45.987

他注册的是组织还是私人账户？

当他有一个组织时，他必须将您添加为该组织的成员，并为您提供经理访问权限或为您创建一个私人仓库。

但获得帮助的最简单方法是在 Twitter 上联系[@GitHubHelp](https://twitter.com/#!/githubhelp)或 support@github.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:11:37.477

我问了support@github，他们解决了这个问题。基本上，有了教育许可证，您可以获得 5 个私有存储库，如果它是一个组织，您可以获得任意数量的存储库。我们的实验室有 20 个。

# html - 是否可以仅更改 CSS 中背景位置的 Y 值？

> ID：11085836
> 
> 赞同：4
> 
> 时间：2012-06-18T15:17:37.767
> 
> 标签：html, css

是否可以仅更改 CSS 中背景位置的 Y 值？

`background-position-y`不是一个有效的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:20:30.300

仅通过读取（使用 JS）当前值`background-position`（如果未内联设置，则使用计算样式方法），解析它以读取 X 值，然后使用刚刚检索到的 X 值再次设置它。

没有办法在 CSS 中说“从级联中获取背景位置 X 值，并从中获取 Y 值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T06:38:53.147

试试这个

```
background-position-y: 10px; 
```

对我来说工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:25:30.683

不，那是不可能的。虽然`background-position`只允许设置一个值，但这将只定义 x 并使 y 居中。其他所有内容，例如 background-position-y 都是非标准的，因此仅在某些浏览器中受支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:28:26.237

`background-position-y: xpx`应该管用。

你能显示代码看看我们可以看到为什么它可能不工作吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-20T21:25:25.797

根据[caniuse.com](http://caniuse.com/#search=background-position-x)和[这个 SO Question](https://stackoverflow.com/questions/9653685/is-background-position-x-background-position-y-a-standard-w3c-css-property)，`background-position-y`除了旧版本的 Firefox 之外，所有浏览器现在都已成为标准并受支持。

> background-position-x/-y, background-repeat-x/-y 批准用于第 4 级背景和边框。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-18T15:21:49.317

采用`background-position:0px ypx;`

# c# - 在哪些情况下我必须在 WPF 中序列化命令的对象？

> ID：11085841
> 
> 赞同：2
> 
> 时间：2012-06-18T15:17:50.580
> 
> 标签：c#, wpf, serialization

今天，我读到了 WPF 中的命令对象可以序列化。我对另一个问题很感兴趣：

在哪些情况下我必须序列化命令的对象？为什么我需要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:20:35.573

这是在另一个时间将其恢复到某个状态的选项，我永远不会序列化命令。您几乎可以序列化任何对象，关键是命令是对象，而事件是方法引用的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:20:55.677

从未遇到过需要实际序列化`Command`对象的情况。 `Command`对象本质上是*应用程序运行时* 工件，不需要任何持久性。

`Command`对象有助于组织 MVVM 应用程序不同层之间的通知/事件交互，还可以使用其`Cancel`属性管理一些 UI 组件。

所以看不到序列化/恢复它的*任何*需要。

# r - 直方图中的 R X&Y 轴间隔设置

> ID：11085843
> 
> 赞同：-1
> 
> 时间：2012-06-18T15:17:54.887
> 
> 标签：r, intervals

我一直在使用以下代码。但是，x 轴不是从 -5000 开始，而是从 0 开始。另外，我想为 x 轴和 y 轴范围指定 100 的间隔。我尝试使用`xaxt='n'`and `axis(side=1)`，但这没有帮助。以下代码是我目前正在处理的代码

```
setwd("/path/")
data<-read.table("input.txt",sep="\t",header=F)
x<-data$V4
h<-hist(x, col="green",xlim=c(-5000, 162000),ylim=c(0,0.0003),main="TPMDistribution",xlab="TPMValues",probability=TRUE)
s=sd(x)
m=mean(x)
curve(dnorm(x,mean=m,sd=s),add=TRUE,lwd=3,col="red")
lines(density(x),col="blue")
abline(v=mean(x),col="blue")
mtext(paste("mean",round(mean(x),1),";sd",round(sd(x),1),";N",length(x),sep=""),side=1,cex=.75)
dev.off() 
```

所有帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:58:37.563

您可能需要在数组中指定中断，请参见此处： [http ://stat.ethz.ch/R-manual/R-patched/library/graphics/html/hist.html](http://stat.ethz.ch/R-manual/R-patched/library/graphics/html/hist.html)

并使用以下方式调整轴：http: [//stat.ethz.ch/R-manual/R-patched/library/graphics/html/axis.html](http://stat.ethz.ch/R-manual/R-patched/library/graphics/html/axis.html)

您可能需要在 hist() 中使用 axes=FALSE，因此您可以在后续行中将它们替换为 axis()。

# jquery - NivoSlider NivoControl Nav IE7 不显示

> ID：11085844
> 
> 赞同：2
> 
> 时间：2012-06-18T15:18:02.680
> 
> 标签：jquery, css, internet-explorer, internet-explorer-7, nivo-slider

我的 nivoslider 插件在所有浏览器上都可以正常工作，直到 ie8/9 - 但是在 IE 7 中，滑块工作正常，但我看不到指示滑块中有多少图像的正方形（nivocontrol nav）。我已经尝试过 position:absolute 和 z-index，但我似乎无法让它工作。在它拒绝工作之前，所以我将它从 window.load 更改为 document.ready 并解决了 50% 的问题。

该网站是[http://www.sarahlayton.co.uk](http://www.sarahlayton.co.uk)，如果您在 IE8/9 中查看它，您会看到图像滑块下方的方块，然后 ie7 将其隐藏。我有点困惑我哪里出错了？

有人可以指导我吗？真的会很感激

```
<script type="text/javascript">
$(document).ready(function() {

    $('#slider').nivoSlider({
        effect: 'random', // Specify sets like: 'fold,fade,sliceDown'
        slices: 15, // For slice animations
        boxCols: 8, // For box animations
        boxRows: 4, // For box animations
        animSpeed: 300, // Slide transition speed
        pauseTime: 6000, // How long each slide will show
        startSlide: 0, // Set starting Slide (0 index)
        directionNav: false, // Next & Prev navigation
        directionNavHide: false, // Only show on hover
        controlNav: true, // 1,2,3... navigation
        controlNavThumbs: false, // Use thumbnails for Control Nav
        controlNavThumbsFromRel: false, // Use image rel for thumbs
        controlNavThumbsSearch: '.jpg', // Replace this with...
        controlNavThumbsReplace: '_thumb.jpg', // ...this in thumb Image src
        keyboardNav: true, // Use left & right arrows
        pauseOnHover: true, // Stop animation while hovering
        manualAdvance: false, // Force manual transitions
        captionOpacity: 0.0, // Universal caption opacity
        prevText: 'Prev', // Prev directionNav text
        nextText: 'Next', // Next directionNav text
        beforeChange: function() { }, // Triggers before a slide transition
        afterChange: function() { }, // Triggers after a slide transition
        slideshowEnd: function() { }, // Triggers after all slides have been shown
        lastSlide: function() { }, // Triggers when last slide is shown
        afterLoad: function() { } // Triggers when slider has loaded
       });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:44:25.143

此修复对我有用（仅在 IE7 中的 css 内）

```
.nivo-controlNav a {
    text-indent: 0;
    font-size: 0;
    line-height: 0;
} 
```

`text-indent: 0;`将获得正确的位置，`font-size: 0;`需要隐藏数字，`line-height: 0;`如果 font-size 为 0，则需要隐藏 IE7 上出现的点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:49:59.447

我相信我有同样的问题。滑块效果很好，但控制导航链接不会在 IE7 中显示。我还不知道为什么，经过 4 个小时的工作，我不确定我不再关心了。但这对我有用：

1.  寻找“文本缩进：-9999px；” 对于 CSS 中的“.nivo-controlNav a”类 - 将其注释掉。
2.  编辑 jquery.nivo.slider.js - 第 165 行并取出 a 标签中的 HTML，基本上使它看起来像：

    ```
    vars.controlNavEl.append('<a class="nivo-control" rel="'+ i +'"></a>'); 
    ```

这对我有用，到目前为止我找不到任何问题。希望它可以帮助你。

# .net - 在 Apple 的 VerifyReceipt 上不断收到 21002 'java.lang.NullPointerException'

> ID：11085847
> 
> 赞同：2
> 
> 时间：2012-06-18T15:18:07.110
> 
> 标签：.net, ios, xamarin.ios, in-app-purchase, app-store-connect

当我尝试在沙盒中测试我的应用内购买时，我不断收到来自 Apple 的 21002 'java.lang.NullPointerException' 错误。这就是我所做的：

*   在 iTunes Connect 中设置应用内购买产品。我可以通过 StoreKit 成功检索它们。
*   在 iTunes Connect 中设置测试用户。
*   应用程序启动，下载可用的应用内购买产品，我触发应用内购买，Apple 使用我在 iPhone 上进行 base64 编码并发送到我的 C#/ASP.NET 服务器的 transactionReceipt 进行响应。
*   服务器将接收到的字符串放入 JSON（我`NewtonSoft.Json`手动尝试过）并将 JSON 发送给 Apple：

`var json = "{ 'receipt-data': '" + receipt + "'}";`

或者：

`var json = new JObject(new JProperty("receipt-data", receipt)).ToString();`

进而：

```
var webRequest = System.Net.HttpWebRequest.Create("https://sandbox.itunes.apple.com/verifyReceipt");
webRequest.ContentType = "text/plain";
webRequest.Method = "POST";
byte[] byteArray = Encoding.UTF8.GetBytes(receipt);
webRequest.ContentLength = byteArray.Length;
using (var stream = webRequest.GetRequestStream())
{
    stream.Write(byteArray, 0, byteArray.Length);
    stream.Flush();
}

var resp = webRequest.GetResponse();
if (resp != null)
{
    using (var sr = new System.IO.StreamReader(resp.GetResponseStream()))
    {
        var result = sr.ReadToEnd().Trim();
        var iapResponse = Newtonsoft.Json.JsonConvert.DeserializeObject<AppleIapResponse>(result);
        // always getting '21002' 'java.lang.NullPointerException'
    }
} 
```

我尝试了一切：更改 ContentType、JSON 格式、编码......

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:51:06.943

这是代码中的一个简单错误，我将收据写入 POST，而不是 JSON：

```
byte[] byteArray = Encoding.UTF8.GetBytes(json);
                                          ^^^^ 
```

我的头撞在墙上很痛..

# jquery - 用于活动流的 jquery 和 css 代码

> ID：11085853
> 
> 赞同：1
> 
> 时间：2012-06-18T15:18:20.010
> 
> 标签：jquery, css, feed, microblogging

我使用 node.js 和 socket.io 制作了一个简单的实时消息流源项目，这将使我的生活更轻松。与 facebookticker、twitter feed 等产生类似结果的东西。

# ios - 如何修复 NSInvalidUnarchiveOperationException

> ID：11085859
> 
> 赞同：30
> 
> 时间：2012-06-18T15:18:47.923
> 
> 标签：ios, xcode, exception, ios5, xcode4.3

*** 由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“*** -[NSKeyedUnarchiver decodeObjectForKey:]: 无法解码类的对象 (NSLayoutConstraint)”

我有一个非常简单的应用程序

一个视图有一个按钮

I Control 单击并将按钮拖动到第二个视图并选择 MODAL

当我在模拟器中运行它时，一切正常

当我在运行 iOS 5.1.1 的 iPad 上运行它时，它会因上述错误而崩溃。我不知道为什么，也没有代码。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-18T15:22:16.397

这是因为您使用的是默认使用“自动布局”的 Xcode 4.5（或以前的测试版）。自动布局仅在 iOS 6 上可用，因此在以前的 iOS 版本上会出现运行时错误。

您可以通过打开情节提要、打开实用程序窗格并禁用第一个选项卡/部分中的“使用自动布局”复选框来解决此问题：

![在此处输入图像描述](../Images/26654dd2b399f0a83b9a021c355e8f7b.png)

对于常规的非故事板笔尖，选择顶级视图以访问此选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T09:47:20.403

在您的 Xib-> Identity and type -> Interface Builder Document -> 取消选中 useAutoLayout 复选框，这是 Ios6 的新功能

# jquery - jQuery子元素mouseenter mouseleave

> ID：11085861
> 
> 赞同：0
> 
> 时间：2012-06-18T15:18:51.540
> 
> 标签：jquery, mouseenter, mouseleave

这是示例：http: [//jsfiddle.net/FdT23/4/](http://jsfiddle.net/FdT23/4/)

目标是当您将鼠标悬停在黑框上时，底部的灰色矩形将淡入，当您将鼠标移出时，矩形将淡出。但是，如果我将鼠标悬停在灰色矩形上，它就会消失。我希望它保持可见。

请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:21:06.720

`.mouseleave`改为使用

```
$(document).ready(function(){

    $('#box').mouseenter(function(evt){

        $('#rect').fadeIn(300);

    });

   $('#box').mouseleave(function(evt){

        $('#rect').fadeOut(300);

    });

}); 
```

更新了 JSfiddle [http://jsfiddle.net/FdT23/5/](http://jsfiddle.net/FdT23/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:36:17.537

试试这个[演示](http://jsfiddle.net/F5BTE/)

希望能帮助到你。使用 .hover 代替。

# javascript - 投射 HTML 对象元素？

> ID：11085862
> 
> 赞同：1
> 
> 时间：2012-06-18T15:18:51.843
> 
> 标签：javascript, jquery, html, dom, checkbox

我正在尝试勾选一个位于表格第一个单元格内的复选框。

```
var checkbox = $(this).find("td").eq(0); 
```

返回一个 [Object object] 但是当我使用 html() 函数时，很明显它只返回输入元素的代码。

是否可以转换变量复选框以便我可以检查它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:21:15.600

你得到`[Object object]`是因为`.eq()`返回一个 jQuery 对象。

您正在获取 HTML 代码，`.html()`因为这是 jQuery 对象的一种方法，它返回元素内的 HTML（类似于原始 Javascript `.innerHTML()`）。

要从 jQuery 对象中获取原始 HTML DOM 元素，您可以尝试以下操作：

```
var rawDomElement = $(this).find('td')[0]; 
```

### 编辑

但是如果你想选中一个复选框，你可以尝试调用`.attr('checked', true)`一个代表复选框 DOM 元素的 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:21:29.347

试试这个 ：

```
var checkbox = $(this).find("td:first :input[type=checkbox]");
checkbox.prop('checked',!checkbox.prop('checked')); 
```

我建议你使用 jquery 的[`prop`](http://api.jquery.com/prop/)方法而不是那个`attr`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:22:43.413

```
var checkbox = $(this).find("td:first").find(':checkbox'); 
```

# java - 多阶段jsp表单的数据保存

> ID：11085865
> 
> 赞同：2
> 
> 时间：2012-06-18T15:19:02.140
> 
> 标签：java, forms, jsp, servlets

在我的应用程序中，我有许多不同的具有多个阶段的 JSP 表单，即在每个阶段之后，请求被发送到 Servlet 并被处理以生成下一个表单。问题是我需要保持这些表单的状态（比如在 JSF 中自动完成），这样用户就不必每次进入错误页面或导航回重新输入时输入所有数据他想要改变的东西。

最好的方法是什么：
1）将所有数据存储在会话中，并在用户提交表单的最后阶段后将其删除。
2）将其全部存储在请求范围内，并在每次用户导航到不同页面时进行读/写。但是，这似乎不合逻辑，因为如果我保存第 1 阶段并在第 4 阶段需要它的数据，我必须在使用会话范围时读取/写入 3 次而不是仅 1 次，并且每次数据量是读/写增加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:22:58.660

会话范围应该没问题

请记住，会话通常存储在内存中，因此在非常繁忙的网络服务器上它可能会占用大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:26:05.563

您应该在客户端处理表单的步骤。并将所有值一起发送。这将为您节省大量关于会话值的工作。

为每个步骤创建一个 div，用表单标签包装它们，显示 - 相应地隐藏 div。此外，如果您使用 jquery，则选择 dom 元素会容易得多。

如果您必须在服务器端进行查询，那么显而易见的选择是会话值，假设您不想使用 AJAX，也不想使用 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:29:11.663

两者都是可行的，这取决于您的用例。

*   如果您需要在每一步之后进行计算并且无论如何都需要将数据发送到服务器，那么 session 会更好。

*   如果客户端是 Javascript 繁重的，您可以收集所有数据并仅在最后一步之后发送。这仅在步骤不依赖于输入的数据时才有效。

如果您选择会话方法，请注意在用户在多个选项卡中打开您的应用程序时使其正常工作。这可以通过检测会话中已经存在的会话属性，或者以不会导致冲突的方式命名属性来完成。

# post - 在谷歌云存储中将图像发布到我的存储桶时出错

> ID：11085868
> 
> 赞同：1
> 
> 时间：2012-06-18T15:19:15.817
> 
> 标签：post, bucket, google-cloud-storage

我有一个将 acl 设置为 Allusers 和 Full_control 的存储桶，以便用户可以从存储桶中发布和检索图像。

. 我尝试使用此网址（http://commondatastorage.googleapis.com/bucket/+Image.png）从我的应用程序中发布图像；但我收到“错误 1104，无法使用提供的 url 发布图像。这是我的存储桶的 alc：

```
<?xml version="1.0" ?>
<AccessControlList>
    <Owner>
        <ID>
            00b50024a97592382732e7e69afac5fcba343397379237323e5ebd216831a418023820874872
        </ID>
    </Owner>
    <Entries>
        <Entry>
            <Scope type="AllUsers"/>
            <Permission>
                FULL_CONTROL
            </Permission>
        </Entry>
        <Entry>
            <Scope type="GroupById">
                <ID>
                    00b4903a2853501162e8e89afac5fcba14239486e5ebd216831a419323059585
                </ID>
            </Scope>
            <Permission>
                FULL_CONTROL
            </Permission>
        </Entry>
    </Entries>
</AccessControlList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:52:45.847

这听起来不像是 ACL 问题。您可以尝试在对象名称的开头不带 + 吗？即image.png 而不是+image.png？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:14:04.547

谢谢你给我发源。您的程序是使用 App Inventor 编写的，并且没有 Auth 令牌。

App Inventor 可以获得令牌，但您需要知道该怎么做。我正在为其他人记录该流程，我将与您一起帮助您前进，并在此处跟进一个工作示例。

加里

# sql - 您将如何建模以下数据库关系？

> ID：11085876
> 
> 赞同：1
> 
> 时间：2012-06-18T15:19:40.923
> 
> 标签：sql, database-design

有部门和经理。一个部门有多个经理，但只有一位经理是该部门的首席经理。一个部门必须只有一名首席经理。节假日期间，一个部门的负责人可以临时担任另一个部门的负责人。你会如何建模？

请解释你的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:08:12.710

假设一个“普通”经理最多可以管理一个部门，你的数据模型应该看起来像这样：

![在此处输入图像描述](../Images/c0a71f108a3109ebfccaa261438f901e.png)

CHIEF_MANAGER_ID 可以“指向”：

*   到同一部门的经理（即其 MANAGER.DEPARTMENT_ID 与包含此 CHIEF_MANAGER_ID 的行的 DEPARTMENT.DEPARTMENT_ID 匹配），在这种情况下，它是**“主要”**首席经理
*   或来自不同部门的经理，在这种情况下，它是**“替代”**首席经理。

如果您想确保同一个人不能以首席经理的身份管理多个部门（同时仍然能够以普通经理的身份管理多个部门），请在 CHIEF_MANAGER_ID 上添加一个 UNIQUE 约束。

如果您需要同时记住主要和替代首席经理*，请*使用两个字段而不仅仅是 CHIEF_MANAGER_ID（在这种情况下，您还必须以非声明方式强制执行部门匹配）。

在上面的模型中，DEPARTMENT.CHIEF_MANAGER_ID 可以为 NULL。这样做是为了打破外键的循环，因此实际上可以将数据插入数据库而无需延迟外键。如果您的 DBMS 支持可延迟约束，您可以将此字段设为 NOT NULL 并延迟其中一个 FK，以便在事务结束时检查它（在插入两行之后）。

* * *

我刚刚意识到还有一个额外的要求：不是每个经理都可以替代。只有酋长可以。你可以做这样的事情来建模它：

![在此处输入图像描述](../Images/54b1f7aca6e66e6470b749ca2923ee02.png)

SUBSTITUTE_DEPARTMENT_ID 指向我们正在“借用”首席经理替代品的部门。由于我们指向的是一个部门，而不是直接的经理，我们知道我们必须让**首席**经理了解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:40:37.753

部门一表（含总经理ID）

经理一桌（每人）

一个部门/经理关系表（部门 ID 和经理 ID）

例子：

![架构示例](../Images/a0b5d7f16448bd5f07217da734b06852.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:28:20.087

你可以使用这个模型

部门（IdDepartment，其他属性...）

经理（Idmanager，其他属性...）

部门经理（IdDepartment、IdManager、IsTemporary）

在你的物理模型中

DepartmentTable
IdDepartment 作为主键

ManagerTable
IdManager 作为主键

DepartmentManagerTable (IdDepartment + IdManager) 作为主键 IsTemporaryChef 作为属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:13:50.030

这里的主要思想是将组织结构图的层次结构与员工分开（经理是员工）。就像总统（职位）和担任职务的人之间的区别。

为简单起见，这里的层次结构是用 levelled-adjacency-list 建模的；对于 SQL 层次结构来说不是最有效的，但对此已经足够了。

请注意，部门主管的职位不向该部门的任何人报告。整个组织的 CEO 都有`ReportsTo = NULL`，对于其他人来说，它指向了老板的位置。

随着时间的推移，每个员工都可以履行任何角色。

有关更有效的层次结构模型，请参阅 Celko 的书或只是 google 'SQL hierarchies'。

![在此处输入图像描述](../Images/b862d75d7647d80e160d27e2c73eb9bc.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:25:25.023

部门一桌，经理一桌，总经理一桌。

经理与部门的关系表，首席经理与部门的关系表，首席经理与他们被允许监督的其他部门的关系表（或者相反，如果它导致较小的数据集，该表应该是关系表首席经理到他们不允许监督的部门）。

# git - git pull (只更新本地文件)

> ID：11085882
> 
> 赞同：10
> 
> 时间：2012-06-18T15:19:55.503
> 
> 标签：git

我只想用 git 更新我的本地文件。但每次我尝试拉我都会得到错误说我需要先提交某些文件。不使用提交更新本地文件的方法是什么？

这是错误消息

$ git pull Enter passphrase for key '/c/Users/me/.ssh/id_rsa': Updating 4dsdSe6e..70fb5b6 error: 您对以下文件的本地更改将被合并覆盖：grails-app/conf/DataSource.groovy请在合并之前提交您的更改或存储它们。中止

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-18T15:41:34.967

如果您不想提交，则需要存储您的更改。这听起来像你在找什么：

```
git stash save "Changes I don't want to commit yet"
git pull
git stash pop 
```

第一行将您的更改存储到堆栈中，并将您的代码恢复到最后一次提交。从那里，你可以像往常一样拉。拉出后，将存储中的更改弹出回代码中。这让您可以在不提交代码的情况下进行拉取。[您可以在此处](http://git-scm.com/book/en/Git-Tools-Stashing)了解有关存储的更多信息。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:22:17.770

您正在尝试提取一些将删除您的更改的文件。首先，提交您的更改：

```
git commit -a -m "I have changed XXXX" 
```

然后拉别人：

```
git pull 
```

如果没有问题需要解决，您可以推送您的更改：

```
git push 
```

# google-chrome - 在运行时配置 Chrome 扩展

> ID：11085884
> 
> 赞同：0
> 
> 时间：2012-06-18T15:20:02.710
> 
> 标签：google-chrome, google-chrome-extension

我们目前正在构建 Chrome CRX 的多个副本，每个副本用于我们的开发/测试环境，每个清单文件中都有自定义条目。

在构建/打包我们的代码和 crx 之前，我们通常不会提前知道某些测试环境的主机名。有没有办法将参数传递给 Chrome 扩展程序，或者让我的扩展程序读取它自己的文件名以查找命名约定等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:41:35.247

无法将参数传递给 CRX 或读取扩展文件名，但您可以使用开发人员工具控制台在运行时更改扩展变量。

# c# - 将列表中的项目打包成对列表

> ID：11085886
> 
> 赞同：1
> 
> 时间：2012-06-18T15:20:06.627
> 
> 标签：c#, linq, list, grouping

我有一个`ProjectItem`类实例列表： `List<ProjectItem> allProjects`.

我需要获得一个`List<ProjectItemPair>`- 一个新类实例的列表，这些实例具有`ProjectItem projectOne`和`ProjectItem projectTwo`作为属性。

我不得不 foreach 初始列表，并且使用 bool 开关`ProjectItemPair`在迭代中的每个第二项的结果列表中添加一个新的。这是一种原始的老派方法。我确信使用 Linq 我可以有效地将项目实例配对。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:23:32.153

好吧，你可以使用：

```
var pairs = allProjects.Select((value, index) = > new { value, index })
                       .GroupBy(x => x.index / 2, x => x.value)
                       .Select(pair => new ProjectItemPair(pair.ElementAt(0),
                                                     pair.ElementAtOrDefault(1)))
                       .ToList(); 
```

的使用意味着如果有奇数个元素，`ElementAtOrDefault`则将传递构造函数。`null`

另一个更简单的选择：

```
var pairs = Enumerable.Range(0, allProjects.Count / 2)
                      .Select(i => new ProjectItemPair(allProjects[i * 2],
                                                       allProjects[i * 2 + 1]))
                      .ToList(); 
```

如果输入有奇数个元素，这将省略最后一个元素，在这种情况下你可以这样做：

```
if ((allProjects.Count % 2) == 1)
{
    pairs.Add(new ProjectItemPair(allProjects.Last(), null);
} 
```

# android - Android ICS ListView 刷新问题

> ID：11085888
> 
> 赞同：6
> 
> 时间：2012-06-18T15:20:20.233
> 
> 标签：android, listview, refresh, android-4.0-ice-cream-sandwich, android-ui

我的 Android 应用程序上有一个 ListView，可以动态更改其数据。我使用该`onFilterComplete()`方法来更改 ListView 的内容。

Pre Ice Cream Sandwhich 以下代码可以正常工作：

```
if(adapter != null) {

  adapter.notifyDataSetInvalidated();
  lview3.invalidateViews();

  adapter.getFilter().filter(aa1.getItem(item), new Filter.FilterListener() {
  public void onFilterComplete(int count) {
    adapter.notifyDataSetChanged();

    if(lview3.getCount() == 0){
      lview3.setVisibility(View.GONE);                                     
    }
    else{
      lview3.setVisibility(View.VISIBLE);
    }
}}); 
```

但是，在 Ice Cream Sandwhich 上，当我使用过滤器时，屏幕无法正确刷新，如果过滤器返回的条目数小于前一个 ListView，则旧列表数据在后台似乎仍然可见，根据此屏幕截图：

![在此处输入图像描述](../Images/e4b8c3c15c1a186db239afff1e972ce3.png)

从屏幕截图中，您可以看到 ListView 中的第一个条目在哪里，这就是所有应该可见的内容，您可以看到之前的结果在下面仍然可见，这些只是可见的，它们不起作用，因为它们不能被点击，就好像屏幕没有正确刷新一样。

当我选择主页按钮以通过主屏幕离开应用程序并返回时，所有内容都会出现，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/7e1915f5748009697f3b30f6442113c1.png)

还有什么我必须实施才能正确刷新 Ice Cream Sandwhich 上的 ListView 吗？有没有其他人遇到过类似的问题？

我在 ICS 之前工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:08:22.053

为了解决这个问题，我将代码更改为以下内容：

```
if(adapter != null) {
  adapter.getFilter().filter(aa1.getItem(item), new Filter.FilterListener() {
  public void onFilterComplete(int count) {
    adapter.notifyDataSetChanged();

    if(lview3.getCount() == 0){
      lview3.setVisibility(View.GONE);                                     
    }
    else{
      lview3.setVisibility(View.VISIBLE);
      decLayout.invalidate();
    }
}}); 
```

decLayout 是我的列表视图所在的相对布局，这似乎在列表视图数据更改时正确刷新屏幕。

虽然这可行，但我不能 100% 确定它是有效的修复程序，我想听听其他有类似问题并可能有适当修复程序的人的意见。

# php - PHP 数组，移动元素

> ID：11085890
> 
> 赞同：0
> 
> 时间：2012-06-18T15:20:21.330
> 
> 标签：php, arrays

我正在从几个文本框创建一个数组。我需要移动数组中的元素以插入数据库。这是数组：

```
array(2) { [0]=> string(7) "nameone" [1]=> string(7) "nametwo" } 
array(2) { [0]=> string(6) "ageone" [1]=> string(6) "agetwo" } 
array(2) { [0]=> string(13) "parentnameone" [1]=> string(13) "parentnametwo" } 
array(2) { [0]=> string(14) "parentemailone" [1]=> string(14) "parentemailtwo" } 
array(2) { [0]=> string(14) "parentphoneone" [1]=> string(14) "parentphonetwo" } 
```

我想以插入语句结束，例如：

```
nameone, ageone, parentnameone, parentemailone, parentphoneone 
```

并且要插入的下一行将是

```
nametwo, agetwo, parentnametwo, parentemailtwo, parentphonetwo 
```

我试图为每个循环创建一个具有多个的数组，但我最终得到一个数组，我需要移动键，这又回到了我原来的问题。有没有办法解决这种疯狂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:57:41.943

好吧，假设您的主数组包含 5 个数组，每个数组有 2 个元素。让我们称之为 $mainArr。第一行中的“2”为否。每个子数组中的元素。或者如果子数组的长度不相等，则它是最大子数组的长度。

```
for($i=0;$i<2;$i++) {
foreach($mainArr as $key => $a) {
    $ins[$i][] = $a[$i];
} // form an array with insert elements
}

// traverse that to form inserts
foreach($ins as $key => $arr) {
      $statements[] = implode(",", $ins[$key]);
}

echo '<pre>';
print_r($statements); 
```

我想这就是你想要的。如果没有，请告诉我。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:26:24.690

```
$l = count($array[0]);
for ($i=0; $i<$l; $i++) {
    // access values like this:
    $name = $array[0][$i]; // equals nameone first time and nametwo second time
    $age = $array[1][$i];
    $parentname = $array[2][$i];
    $parentemail = $array[3][$i];
    $parentphone = $array[3][$i];

    // insert into DB here
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T15:39:06.530

```
#!/usr/bin/php                                                                  
<?php
  $val = array('name', 'age', 'parentname', 'parentemail');
  $key = array('one', 'two', 'three', 'four', 'five');

  $valone = array();
  foreach ($val as $k)
    array_push($valone, $k.$key[0]);

  var_dump($valone);

 ?> 
```

输出：

```
 array(4) {
    [0]=>
    string(7) "nameone"
    [1]=>
    string(6) "ageone"
    [2]=>
    string(13) "parentnameone"
    [3]=>
    string(14) "parentemailone"
  } 
```

这是你要你做的吗？

# php - 为什么 echo 结合 printf 会显示错误的输出？

> ID：11085896
> 
> 赞同：1
> 
> 时间：2012-06-18T15:20:42.080
> 
> 标签：php, formatting, printf, echo, string-formatting

有谁知道为什么当我执行这个时：

```
#!/usr/bin/php
<?php

$eff_theo = array_fill(0, 10, 100);

for ($i = 0; $i < 10; ++$i)
   echo printf("%5d", $eff_theo[$i]).' ';
echo PHP_EOL;
?> 
```

我明白了：

```
1005 1005 1005 1005 1005 1005 ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:24:02.603

你正在混合`echo`和`printf`。

`printf`返回格式化字符串的长度，因此您的`echo`调用将打印出“5”。

尝试删除并重`echo`试....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:25:49.513

[printf](http://php.net/printf)是一个将给定文本输出到标准输出并返回输出字符串长度的函数。

[echo](http://php.net/echo)是一种用于输出数据的语言结构。最终，您在输出其值`printf`后回显语句的返回值。`printf`

要么使用`echo`要么`printf`，但不能同时使用两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:24:59.717

printf 返回您创建的字符串的长度，选择任一

```
echo sprintf(...) 
```

要不就

```
printf(...) 
```

没有回声

# c# - 为远程 asp.net 应用程序分析禁用 Dottrace 分析器按钮

> ID：11085902
> 
> 赞同：0
> 
> 时间：2012-06-18T15:21:05.617
> 
> 标签：c#, asp.net, dottrace

我正在通过 dottrace 为我的 asp.net 应用程序使用远程计算机调试。

我已将选项设置为： ![在此处输入图像描述](../Images/a921619fa9a8b6ba13502b2bcc146084.png)

但是当我单击“运行”时，会打开一个新模式但禁用按钮： ![在此处输入图像描述](../Images/fe94fb42d2c71eace1731ed3fa2a56d6.png)

我想知道为什么这些按钮被禁用。如何配置我的远程 asp.net Web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T13:29:55.763

要分析托管在 IIS 中的 Web 应用程序，您必须以管理员身份启动 dottrace。

打开 dottrace 后，**它将重置 IIS。**因此，机器**中不会**运行任何 w3wp 进程。所以所有控制器按钮都将处于禁用模式。

一旦您从外部启动/访问网站，DotTrace 将找到该进程，因此它将自动启用控制器按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:23:28.297

抱歉回复晚了。dotTrace 有一个选项来分析 IIS 应用程序，尝试使用它而不是分析独立应用程序。配置分析器（提供应用程序 url）后，启动 IIS 并启动您的应用程序，之后将启用控制器按钮。

# android - Android 2.3.3 应用程序在 4.0.3 中不起作用

> ID：11085906
> 
> 赞同：2
> 
> 时间：2012-06-18T15:21:20.423
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我正在研究我在 Android 2.3.3 中开发的项目。

我想在 Android 4.0.3 上继续开发它，但它不起作用。

当我`usesminsdk`从清单文件中删除时，它可以工作。

还有其他方法吗？我的方式健康吗？

```
06-19 09:19:33.122: E/AndroidRuntime(595): FATAL EXCEPTION: main
06-19 09:19:33.122: E/AndroidRuntime(595): android.os.NetworkOnMainThreadException
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)

06-19 09:19:33.122: E/AndroidRuntime(595):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-19 09:19:33.122: E/AndroidRuntime(595):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-19 09:19:33.122: E/AndroidRuntime(595):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
06-19 09:19:33.122: E/AndroidRuntime(595):  at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.facebook.android.Util.openUrl(Util.java:215)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.facebook.android.Facebook.request(Facebook.java:751)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.facebook.android.Facebook.request(Facebook.java:688)
06-19 09:19:33.122: E/AndroidRuntime(595):  at tr.edu.ege.yanyanayiz.LoginController.getProfileInformation(LoginController.java:116)
06-19 09:19:33.122: E/AndroidRuntime(595):  at tr.edu.ege.yanyanayiz.LoginController.startNewIntent(LoginController.java:50)
06-19 09:19:33.122: E/AndroidRuntime(595):  at tr.edu.ege.yanyanayiz.LoginController$2.onComplete(LoginController.java:95)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.facebook.android.Facebook$1.onComplete(Facebook.java:354)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.facebook.android.FbDialog$FbWebViewClient.shouldOverrideUrlLoading(FbDialog.java:144)
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:224)
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:324)
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.os.Looper.loop(Looper.java:137)
06-19 09:19:33.122: E/AndroidRuntime(595):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 09:19:33.122: E/AndroidRuntime(595):  at java.lang.reflect.Method.invokeNative(Native Method)
06-19 09:19:33.122: E/AndroidRuntime(595):  at java.lang.reflect.Method.invoke(Method.java:511)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-19 09:19:33.122: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-19 09:19:33.122: E/AndroidRuntime(595):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:31:19.140

## [为什么我的应用程序在冰淇淋三明治上崩溃？](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

我今天早上刚刚写了一篇关于完全相同主题的博客文章。HoneyComb 和 ICS 在滥用 UI 线程时要严格得多。检查您是否没有在 UI 线程上执行任何昂贵的操作，以及是否将它们包装在 a`Thread`或 an中`AsyncTask`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T03:41:56.293

我也遇到了这个问题。我有两种方法可以摆脱它： 1\. 将网络代码放入另一个线程，以避免 NetworkOnMainThreadException 2\. 将 AndroidManifest.xml 从 A) 修改为 B)：

一个）

```
<uses-sdk
android:minSdkVersion="7"
android:targetSdkVersion="10" /> 
```

二）

```
<uses-sdk
android:minSdkVersion="7"
 /> 
```

现在它可以工作了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:25:21.213

确保您的清单标签是这样的：

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" /> 
```

然后

1.  右键项目
2.  特性
3.  安卓
4.  检查安卓 4.0.3
5.  点击确定。

你应该很高兴，但之后你可能需要清理项目或右键单击项目 > Android 工具 > 修复项目属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:45:27.873

嗨，我想这是因为您正在主 UI 线程中访问网络（同时检查您的 Web 服务）在您的代码中使用 AsyncTask，并且错误不会成为清单文件的问题，无需更改清单中的任何内容。

# c# - 获取 C# 数据集的一部分并将其复制到另一个数据集中

> ID：11085907
> 
> 赞同：0
> 
> 时间：2012-06-18T15:21:24.397
> 
> 标签：c#, .net, dataset

我有一个带有一个数据表的数据集。现在我想在这个表上设置一个过滤器，并将结果复制到相同类型的数据集，这样我就有了一个只有过滤结果的新数据集。我怎样才能做到这一点？

以下代码有效吗？

```
ds.Tables[<table name>].DefaultView.RowFilter = "ProductId=5";
newDS = ds.copy(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:23:54.323

您可以执行以下操作：

```
DataSet filterResult = new DataSet();
filterResult.Merge(inputDataset.Tables[0].AsEnumerable().Where(r => r["Property1"].ToString().Equals("SomeFilter") || r["Property2"].ToString().Equals("Some other filter")).ToArray()); 
```

请注意，DataTable 提供了 Select 方法，但它有时会抛出一些非常奇怪的异常，因此我更喜欢使用可枚举的行列表和 lambda。

# rake - rake snorby：设置

> ID：11085908
> 
> 赞同：0
> 
> 时间：2012-06-18T15:21:25.160
> 
> 标签：rake

运行时：rake snorby:setup 出现以下错误：

耙中止！您已经激活了 rake 0.9.2.2，但您的 Gemfile 需要 rake 0.9.2。使用 bundle exec 可以解决这个问题。

（通过使用 --trace 运行任务查看完整跟踪）

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:27:30.590

尝试

```
bundle exec rake snorby:setup 
```

此错误源于您拥有多个版本的`rake`gem，甚至比您的`Gemfile`.

你可以通过输入看到这个

```
gem list rake 
```

应该在您的控制台上打印如下内容：

```
*** LOCAL GEMS ***

rake (0.9.2.2, 0.8.7) 
```

因为`rake`它是您从 Rails（捆绑器）环境外部启动的工具，所以除非您明确指定使用命令遵循捆绑器的版本说明，否则它无法了解捆绑版本的任何信息`bundle exec`。

# intellij-idea - Mac 上 IntelliJ 中的基本代码完成

> ID：11085913
> 
> 赞同：32
> 
> 时间：2012-06-18T15:21:50.153
> 
> 标签：intellij-idea, keyboard-shortcuts

IntelliJ IDE 中有一个非常重要的基本代码完成快捷方式，假设在 Mac 上被调用为 ctrl+space 快捷方式。问题是这个快捷方式是系统一，用于在 Lion Mac OS 中调用“Spotlight”。那你们怎么调用呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-18T22:32:02.277

我认为问题是杂乱无章地询问您更改了什么组合键，以及为什么 JetBrains 没有自己实现对 mac 键盘映射的更新。

无论如何，我已经交换了 Ctrl+Space`Alt+Space`似乎不会与任何 MacOSX 系统快捷键发生冲突。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-18T15:41:44.530

您可以在系统设置中禁用/更改 Spotlight 快捷方式，或者在 IDEA `Preferences`|中更改基本完成快捷方式。`Keymap`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-26T06:49:52.317

或者，您可以使用`Ctrl + Shift + Space`“ [SmartType](https://www.jetbrains.com/help/idea/2016.3/smart-type-code-completion-completing-code-based-on-type-information.html) ”来避免与 Spotlight 发生冲突。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-25T12:01:20.137

您可以在 IntelliJ IDEA/Services/Services Preferences 中覆盖 OSX 聚光灯快捷方式。更多信息：[这里](https://support.apple.com/kb/ph18418?locale=en_US)。

[![在此处输入图像描述](../Images/7c393c51333df7859a0da3ecd2e05c26.png)](https://i.stack.imgur.com/OqLVo.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-18T15:27:02.993

我不知道这是否有帮助，但这里是默认键映射列表[http://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf](http://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf)您可以从菜单中更改它们`IDE Settings -> Keymap`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-28T21:39:02.633

实际上，聚光灯是由 COMMAND-space 而不是 CTRL-space 启动的...

# c++ - 为什么有些函数在 不在 std 命名空间中？

> ID：11085916
> 
> 赞同：28
> 
> 时间：2012-06-18T15:21:53.910
> 
> 标签：c++, namespaces, cmath

我正在开发一个适用于多种算术类型的项目。所以我做了一个标题，其中定义了用户定义的算术类型的最低要求：

**user_defined_arithmetic.h：**

```
typedef double ArithmeticF;   // The user chooses what type he 
                              // wants to use to represent a real number

namespace arithmetic          // and defines the functions related to that type
{

const ArithmeticF sin(const ArithmeticF& x);
const ArithmeticF cos(const ArithmeticF& x);
const ArithmeticF tan(const ArithmeticF& x);
...
} 
```

困扰我的是，当我使用这样的代码时：

```
#include "user_defined_arithmetic.h"

void some_function()
{
    using namespace arithmetic;
    ArithmeticF lala(3);
    sin(lala);
} 
```

我得到一个编译器错误：

```
error: call of overloaded 'sin(ArithmeticF&)' is ambiguous
candidates are:
double sin(double)
const ArithmeticF arithmetic::sin(const ArithmeticF&) 
```

我从来没有使用过`<math.h>`标题，只有`<cmath>`. 我从来没有`using namespace std`在头文件中使用过。

我正在使用 gcc 4.6.*。我检查了包含歧义声明的标题是什么，结果是：

**数学调用.h：**

```
Prototype declarations for math functions; helper file for <math.h>.
... 
```

我知道，这`<cmath>`包括`<math.h>`，但它应该屏蔽 std 命名空间的声明。我深入研究`<cmath>`标题并发现：

**cmath.h：**

```
...

#include <math.h>

...

// Get rid of those macros defined in <math.h> in lieu of real functions.
#undef abs
#undef div
#undef acos
...

namespace std _GLIBCXX_VISIBILITY(default)
{
... 
```

所以命名空间std**在**. `#include <math.h>`这里有什么问题，还是我误解了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-18T15:32:56.737

允许 C++ 标准库的实现在全局命名空间以及在`std`. 有些人会称这是一个错误，因为（正如您所发现的）命名空间污染会导致与您自己的名称发生冲突。然而，事情就是这样，所以我们必须忍受它。您只需将您的姓名限定为`arithmetic::sin`.

用标准（C++11 17.6.1.2/4）的话来说：

> 但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.6) 内`std`。**未指定这些名称是否首先在全局命名空间范围内声明**，然后通过显式使用声明 (7.3.3) 注入命名空间 std。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T17:52:00.770

如果你真的想要，你总是可以在 周围写一个小包装`cmath`，如下所示：

```
//stdmath.cpp
#include <cmath>
namespace stdmath
{
    double sin(double x)
    {
        return std::sin(x);
    }
}

//stdmath.hpp
#ifndef STDMATH_HPP
#define STDMATH_HPP
namespace stdmath {
    double sin(double);
}
#endif

//uses_stdmath.cpp
#include <iostream>
#include "stdmath.hpp"

double sin(double x)
{
    return 1.0;
}

int main()
{
    std::cout << stdmath::sin(1) << std::endl;
    std::cout << sin(1) << std::endl;
} 
```

我想额外的函数调用可能会有一些开销，这取决于编译器的聪明程度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-13T05:20:46.057

这只是开始解决这个问题的卑微尝试。（欢迎提出建议。）

我已经处理这个问题很长时间了。一个案例是问题很明显的就是这个案例：

```
#include<cmath>
#include<iostream>

namespace mylib{
    std::string exp(double x){return "mylib::exp";}
}

int main(){
    std::cout << std::exp(1.) << std::endl; // works
    std::cout << mylib::exp(1.) << std::endl; // works

    using namespace mylib;
    std::cout << exp(1.) << std::endl; //doesn't works!, "ambiguous" call
    return 0;
} 
```

在我看来，这是一个令人讨厌的错误，或者至少是一个非常不幸的情况。（至少在 GCC 中，以及在 Linux 中使用 GCC 库的 clang。）

最近我再次尝试解决这个问题。通过查看`cmath`（GCC），似乎头文件只是为了重载 C 函数并在过程中搞砸命名空间。

```
namespace std{
   #include<math.h>
}
//instead of #include<cmath> 
```

有了它，这行得通

```
using namespace mylib;
std::cout << exp(1.) << std::endl; //now works. 
```

我几乎可以肯定这并不完全等同于`#include<cmath>`但大多数功能似乎都可以工作。

最糟糕的是，最终某些依赖库最终会`#inclulde<cmath>`。为此，我还找不到解决方案。

**注意**：不用说这根本不起作用

```
namespace std{
   #include<cmath> // compile errors
} 
```

# c - 由于内存对齐不正确，使用 SSE 内在函数时出现分段错误

> ID：11085924
> 
> 赞同：6
> 
> 时间：2012-06-18T15:22:18.890
> 
> 标签：c, memory, sse, icc

我第一次使用 SSE 内在函数，即使在确保 16 字节内存对齐后也遇到了分段错误。这篇文章是对我之前的问题的扩展：

[如何分配 16byte 内存对齐数据](https://stackoverflow.com/questions/11084468/how-to-allocate-16byte-memory-aligned-data)

这就是我声明我的数组的方式：

```
 float *V = (float*) memalign(16,dx*sizeof(float)); 
```

当我尝试这样做时：

```
 __m128 v_i = _mm_load_ps(&V[i]); //It works 
```

但是当我这样做时：

```
 __m128 u1 = _mm_load_ps(&V[(i-1)]); //There is a segmentation fault 
```

但如果我这样做：

```
 __m128 u1 = _mm_loadu_ps(&V[(i-1)]); //It works again 
```

但是我想消除使用`_mm_loadu_ps`，并想让它只使用`_mm_load_ps`。

我正在使用英特尔 icc 编译器。

我该如何解决这个问题？

**更新：**

在以下代码中使用这两个操作：

```
 void FDTD_base (float *V, float *U, int dx, float c0, float c1, float c2, float c3,     float c4)
    {
       int i, j, k;
                    for (i = 4; i < dx-4; i++)
                    {

                            U[i] = (c0 * (V[i]) //center
                                    + c1 * (V[(i-1)] + V[(i+1)] )
                                    + c2 * (V[(i-2)] + V[(i+2)] )
                                    + c3 * (V[(i-3)] + V[(i+3)] )
                                    + c4 * (V[(i-4)] + V[(i+4)] ));
                    }

       } 
```

上证版：

```
 for (i=4; i < dx-4; i+=4)
        {
            v_i = _mm_load_ps(&V[i]);
            __m128 center = _mm_mul_ps(v_i,c0_i);

            __m128 u1 = _mm_loadu_ps(&V[(i-1)]);
            u2 = _mm_loadu_ps(&V[(i+1)]);

            u3 = _mm_loadu_ps(&V[(i-2)]);
            u4 = _mm_loadu_ps(&V[(i+2)]);

            u5 = _mm_loadu_ps(&V[(i-3)]);
            u6 = _mm_loadu_ps(&V[(i+3)]);

            u7 = _mm_load_ps(&V[(i-4)]);
            u8 = _mm_load_ps(&V[(i+4)]);

            __m128 tmp1 = _mm_add_ps(u1,u2);
            __m128 tmp2 = _mm_add_ps(u3,u4);
            __m128 tmp3 = _mm_add_ps(u5,u6);
            __m128 tmp4 = _mm_add_ps(u7,u8);

            __m128 tmp5 = _mm_mul_ps(tmp1,c1_i);
            __m128 tmp6 = _mm_mul_ps(tmp2,c2_i);
            __m128 tmp7 = _mm_mul_ps(tmp3,c3_i);
            __m128 tmp8 = _mm_mul_ps(tmp4,c4_i);

            __m128 tmp9 = _mm_add_ps(tmp5,tmp6);
            __m128 tmp10 = _mm_add_ps(tmp7,tmp8);

            __m128 tmp11 = _mm_add_ps(tmp9,tmp10);
            __m128 tmp12 = _mm_add_ps(center,tmp11);

            _mm_store_ps(&U[i], tmp12);
    } 
```

有没有更有效的方法来做到这一点`_mm_load_ps()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T15:29:34.020

因为`sizeof(float)`是 4，所以只有每四个条目`V`会正确对齐。请记住，`_mm_load_ps`一次加载四个浮点数。参数，即指向第一个浮点数的指针，需要对齐到 16 个字节。

我假设在你的例子`i`中是四的倍数，否则`_mm_load_ps(&V[i])`会失败。

**更新**

这就是我建议使用对齐的负载和随机播放来实现上述滑动窗口示例的方式：

```
__m128 v_im1;
__m128 v_i = _mm_load_ps( &V[0] );
__m128 v_ip1 = _mm_load_ps( &V[4] );

for ( i = 4 ; i < dx ; i += 4 ) {

    /* Get the three vectors in this 'frame'. */
    v_im1 = v_i; v_i = v_ip1; v_ip1 = _mm_load_ps( &V[i+4] );

    /* Get the u1..u8 from the example code. */
    __m128 u3 = _mm_shuffle_ps( v_im1 , v_i , 3 + (4<<2) + (0<<4) + (1<<6) );
    __m128 u4 = _mm_shuffle_ps( v_i , v_ip1 , 3 + (4<<2) + (0<<4) + (1<<6) );

    __m128 u1 = _mm_shuffle_ps( u3 , v_i , 1 + (2<<2) + (1<<4) + (2<<6) );
    __m128 u2 = _mm_shuffle_ps( v_i , u4 , 1 + (2<<2) + (1<<4) + (2<<6) );

    __m128 u5 = _mm_shuffle_ps( v_im1 , u3 , 1 + (2<<2) + (1<<4) + (2<<6) );
    __m128 u6 = _mm_shuffle_ps( u4 , v_ip1 , 1 + (2<<2) + (1<<4) + (2<<6) );

    __m128 u7 = v_im1;
    __m128 u8 = v_ip1;

    /* Do your computation and store. */
    ...

    } 
```

请注意，这有点棘手，因为`_mm_shuffle_ps`每个参数只能取两个值，这就是为什么我们首先需要 make`u3`并且`u4`为了将它们重新用于具有不同重叠的其他值。

另请注意，值`u1`、`u3`和`u5`也可以从`u2`、`u4`和`u6`在先前的迭代中恢复。

最后请注意，我还*没有验证上面的代码*！阅读文档`_mm_shuffle_ps`并检查第三个参数选择器是否适用于每种情况。

# java - 嵌入应用程序服务器时使用 JNDI 还是不使用 JNDI？

> ID：11085926
> 
> 赞同：2
> 
> 时间：2012-06-18T15:22:32.467
> 
> 标签：java, jetty, jndi

我来自完整的应用程序服务器背景，并考虑在轻量级嵌入式服务器（如 Jetty）上运行应用程序。

我一直使用 JNDI 来查找连接池以查找数据库连接之类的东西，但我想知道这是否是轻量级案例的最佳方法。似乎如果我使用 JNDI，我不会得到任何好处，但我确实会在配置不同容器的方式上有所不同，并且设置时会增加额外的复杂性。

我可以看到的替代方案只是在我的应用程序中嵌入一个连接池实现。当我使用 Spring 时，这种方法所需的配置要少一些，所需的配置都在一个地方（如果需要，可以从其他地方查找简单的名称-值属性，例如连接详细信息），并且无论如何似乎都可以工作上下文（dev/test/live）和我部署的容器。

我在这里错过了什么吗？如果我在我的应用程序中嵌入一个应用程序服务器，我还应该使用 JNDI 吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:08:26.010

这完全取决于你的情况。

JNDI（对我而言）是一种实现您的部署内容和部署位置之间解耦的机制。这样，当您进行部署时，您会假设某些资源将可用，并且它们将被标记为 X、Y 和 Z。JNDI 是以基本统一的方式提供这些资源的简单（有点）机制。如果您可能有多个不同的受支持数据库，并且您想针对某个数据源编写所有代码......您将需要在*某处*配置该数据源，而 jndi 提供了一些地方来做这件事。如果您使用某种工具使设置 jndi 变得轻而易举，那就太好了，使用它。

在嵌入式情况下，情况确实没有改变，仍然需要在某个地方进行设置。但是，在您的嵌入式应用程序过程中，您会发现自己编写了 jndi 等式的两面，然后问问自己是否需要这个额外的抽象层。

如果您只是使用 jndi，因为其他人都这样做，但您只使用 postgres 并且您只需要该数据库驱动程序......那么您的应用程序的额外复杂层有什么意义。如果你真的喜欢 spring 和 spring 给你一个更简单的方法来配置你需要的点点滴滴并将它注入你需要的地方......不要使用 jndi。

fwiw，听起来你不再需要 jndi 了 :)

# sql - 这个索引是多余的吗？

> ID：11085929
> 
> 赞同：1
> 
> 时间：2012-06-18T15:22:45.663
> 
> 标签：sql, sql-server, sql-server-2008, indexing

最近审查了一个相当高的流量表，定义如下：

```
CREATE TABLE [dbo].[SomeTable](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [SomeId] [bigint] NOT NULL,
    [Time] [time](0) NOT NULL,
    [InsertTime] [datetime] NOT NULL,
    [SequenceNumber] [int] NOT NULL,
    [OtherId] [int] NULL,
 CONSTRAINT [PK_Tracks] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

揭示了以下索引定义：

```
CREATE NONCLUSTERED INDEX [i1] ON [dbo].[SomeTable] 
(
    [SomeId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

-和-

```
CREATE NONCLUSTERED INDEX [i2] ON [dbo].[SomeTable] 
(
    [SomeId] ASC,
    [OtherId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

这方面真的不是我的强项，但指数不是`i1`多余的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:05:13.773

也许，也许不是。如果您是优化器，您将为以下查询使用哪个索引：

```
select [SomeId]
from [dbo].[SomeTable] 
```

如果该查询对您的应用程序至关重要并且表很大，那么拥有该目标索引可能会很有用。但是您是对的，i1 可以满足的任何查询也可以由 i2 满足（可能更昂贵）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T07:28:13.333

当您对索引的冗余进行加权时，您不仅应该考虑额外列的宽度，`i2`还应该考虑它相对于第一列的粒度。

如果对于col`OtherId`的每个 valor 都具有并采用很多值，则仅在 where 中查询将花费更多时间，而没有看似冗余的索引比使用它。 `SomeId``SomeId`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:28:17.673

是的，这是多余的。当有人添加新索引而不检查它是否使任何现有索引变得多余时，您通常会遇到这种情况。

[你会发现这篇文章](https://stackoverflow.com/questions/3283666/t-sql-for-finding-redundant-indexes)值得阅读，它描述了明显冗余索引有用的情况。但是，由于您的表不包含大列，因此不适用于您。

作为参考，[此博客](http://www.sqlskills.com/BLOGS/KIMBERLY/post/RemovingDuplicateIndexes.aspx)描述了如何从数据库中消除冗余索引。

# java - 即使我运行我的程序时也会获得不同的线程顺序

> ID：11085930
> 
> 赞同：2
> 
> 时间：2012-06-18T15:22:47.287
> 
> 标签：java, multithreading

有人可以告诉我线程开始执行的顺序吗？我写了以下代码

```
class NewThread implements Runnable {
    Thread t;
    NewThread() {
        //creating a second thread.
        t=new Thread(this,"Demo Thread");
        System.out.println("Child Thread:"+t);
        t.start();
    }

    public void run() {
        try {
            for(int i=0;i<5;i++) {
                System.out.println("Child Thread:"+i);
                Thread.sleep(3000);
            }
        } catch(Exception e) {
            System.out.println(e.getLocalizedMessage());
        }
        System.out.println("Exiting Child Thread");
    }
} 
```

还有这个

```
public class ThreadDemo {
    public static void main(String args[]) {
        new NewThread();
        try {
            for(int i=0;i<5;i++) {
                System.out.println("Main Thread:"+i);
                Thread.sleep(3000);
            }
        } catch(Exception e) {
            System.out.println(e.getLocalizedMessage());
        }
        System.out.println("Exiting Main Thread");
    }
} 
```

当我执行这段代码时，我得到了许多不同的输出集。

```
Child Thread:Thread[Demo Thread,5,main]
Main Thread:0
Child Thread:0
Child Thread:1
Main Thread:1
Main Thread:2
Child Thread:2
Main Thread:3
Child Thread:3
Main Thread:4
Child Thread:4
Exiting Main Thread
Exiting Child Thread 
```

另一个，

```
Child Thread:Thread[Demo Thread,5,main]
Main Thread:0
Child Thread:0
Child Thread:1
Main Thread:1
Child Thread:2
Main Thread:2
Child Thread:3
Main Thread:3
Child Thread:4
Main Thread:4
Exiting Child Thread
Exiting Main Thread 
```

为什么会出现这种情况？线程顺序永远不会相同吗？如果有人能给我指点线程和示例的基础知识，那就太好了。PS：我是线程新手，这是我的第一个线程程序。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:24:06.443

> 当我执行这段代码时，我得到了许多不同的输出集。

这是意料之中的。该顺序未定义，并且在线程开始运行时受制于竞争条件，并受制于操作系统的线程调度。

我们编写多线程应用程序的全部原因是线程是异步的，并且出于速度原因在单独的处理器中运行。为了保证特定的输出顺序，您可以使用锁等在线程之间进行同步，但是您会失去性能，并且分叉线程的全部原因将会减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:25:47.517

您遇到了竞争条件。

您偶然发现了多线程的复杂性之一。如果您有必须以特定顺序处理的代码，您必须“锁定”该代码和/或在其中声明变量“易失性”。运行谷歌搜索“死锁”和“竞争条件”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:26:41.790

没有隐含的顺序。如果必须有订单，请使用队列深度为 1 的 ExecutorService。

# java - 用 Java 编写 CSV，无法始终转义逗号

> ID：11085945
> 
> 赞同：2
> 
> 时间：2012-06-18T15:23:44.713
> 
> 标签：java, csv, file-io

我正在尝试在 Java 中创建一个 CSV 文件，其中包含通过/失败查询的结果，包括是否发生任何 SQL 异常。我遇到的问题是我希望我失败的查询打印出两行：1）原始查询 2）错误消息及其相关查询

```
makeCSV("\"" + queries[x] + "\"\n\"" + result + "\"", (x+1)); 
```

makeCSV 方法打印单个字符串：

```
"\"" + queries[x] + "\"\n\"" + result + "\"" 
```

其中 queries[x] 是当前正在使用的查询，结果是从我的数据库返回的消息或解析结果集。

我遇到的问题是 CSV 文件的第一行作为查询打印得很好（逗号转义）。然而，第二行忽略了我的转义并将“结果”分成两列。任何想法为什么？

# javascript - IE DIV 悬停区域不一样。直到我添加背景颜色

> ID：11085948
> 
> 赞同：1
> 
> 时间：2012-06-18T15:23:58.217
> 
> 标签：javascript, jquery, css, html

基本上我使用 DIV/CSS/JS 制作了一个图像映射

我的翻转链接设置如下：

```
<a class="rollover" id="01" href="#" target="_blank">
      <div class="mapLinkBox" id="mapLink01">&nbsp;</div>
</a> 
```

CSS：

```
.mapLinkBox {
    display: block;
    z-index: 9999;
    overflow: hidden;
    position: absolute;
}
#mapLink01 {
    bottom: 31px;
    left: 35px;
    width: 200px;
    height: 200px;
} 
```

但是在 IE 中，链接悬停区域受到某些东西的影响并且无法正常工作。什么可能导致问题？

用于悬停的 jQuery：

```
$(".rollover").each(function() {
    $(this).hover(function() {

    },function() {

    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:32:21.540

尝试使用`mouseover`，我过去遇到过问题`hover`。你也可以稍微清理一下你的代码，你有一些冗余的选择器：

```
$('.rollover').mouseover(function() {

}).mouseout(function() {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:39:17.763

理想情况下，我会`<div>`交换`<a>`.

根据[HTML 4.01 规范](http://www.w3.org/TR/html401/struct/links.html#edef-A) ，可能只包含内联元素，其中 a 是块元素。

尽管大多数浏览器在处理盒模型方面都做得更好，但 IE 在盒模型（尤其是 IE6-IE8）方面仍然是个白痴，这是臭名昭著的。

尝试交换您的元素（更改您的 css 和 jquery 以匹配新的 dom）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:15:53.703

问题最终变成了fadeTo。我没有解释弹出窗口是绝对定位的并且位于所有翻转的顶部。即使 z-index 设置和不透明度为 0，弹出窗口仍然是交互式的。我需要从显示中删除弹出窗口。所以在这种情况下使用fadeOut 是可行的。

感谢大家对此的帮助。你们真棒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:27:59.390

虽然`<div>`元素是块，但`<a>`默认情况下元素是内联的。这会使盒子的行为与您在尝试想象其盒子的渲染和行为方式时所期望的不同。

尝试设置`display:block`元素`.rollover`，看看是否可以为您解决问题。请注意，它不再用作文本（显然），但`<div>`无论如何您都在附加一个内部，我假设这就是您的目标布局。

您甚至应该能够摆脱`<div>`.`<a>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:34:49.783

```
$(".rollover").on('hover', function(e) {
  if(e.type == 'mouseenter') {
     // do something for mouseover
  } else {
     // do something for mouseout
  }
}); 
```

或者

```
$(".rollover").hover(function(e) {
     // do something for mouseover
  }, function() {
     // do something for mouseout
  }
}); 
```

您不需要循环将悬停效果绑定到`.rollover`.

# sql - 如何找到调用存储过程/函数

> ID：11085961
> 
> 赞同：3
> 
> 时间：2012-06-18T15:24:34.477
> 
> 标签：sql, db2, ibm-midrange

我们为所有`SQL`存储过程和函数实现了一个全局错误记录器。当过程/函数遇到`SQLEXCEPTION`or`SQLWARNING`时，我们调用全局错误记录器并执行`GET STACKED DIAGNOSTICS`语句。我们需要的部分数据是失败的过程名称。我没有在`GET DIAGNOSTICS`可用的返回值中看到这一点（`ROUTINE_NAME`并且`ROUTINE_SCHEMA`有条件地返回，我总是需要它）。

我们目前正在使用`QWVRCSTK API`，但如果提供此数据，我会假设 SQL 有一个方法。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:16:38.000

```
select @@ProcID 
```

返回当前 Transact-SQL 模块的对象标识符 (ID)。Transact-SQL 模块可以是存储过程、用户定义的函数或触发器。

从那里你可以：

```
select OBJECT_NAME(@@ProcID) 
```

这将返回对象的名称。

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T10:41:02.617

[**检索作业信息 (QUSRJOBI) API**](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/apis/qusrjobi.htm)可以返回在作业中运行当前（最新）SQL 语句的对象的限定名称。使用格式`JOBI0900`访问作业的 SQL 信息。

您需要创建一个**外部**存储过程来调用 API。（如果您尝试将其作为 SQL 存储过程来执行，问题将是 SP 本身中的语句将是当前语句；并且您希望当前 SQL 位于调用过程中。）

调用此 SP 时，“当前”SQL 应该是调用过程中的 CALL 语句。（我希望这是有道理的。）

# perl - 修改 Infoblox::Grid::DNS::Nsgroup 的辅助 DNS 服务器

> ID：11085964
> 
> 赞同：1
> 
> 时间：2012-06-18T15:24:49.860
> 
> 标签：perl, api, dns, appliance

[我想使用Infoblox API](https://ipam.illinois.edu/api/doc/)更改 Infoblox 设备中 nsgroup 的辅助 DNS 服务器。原始 nsgroup 包含两个辅助 DNS 服务器，我想放置一个 DNS 辅助服务器（当然有一个主服务器）。

下面的代码改变了nsgroup的注释，但没有改变NS Group的二级​​服务器！我总是有两个辅助 DNS 服务器。该代码不会触发任何错误。

```
sub nsGroupSlave {
    # https://ipam.illinois.edu/api/doc/Infoblox/Grid/DNS/Nsgroup.html

    my @retrieved_obj = $session->get(
        object => "Infoblox::Grid::DNS::Nsgroup",
        name => "Interne"); 
    my $nsg1 = $retrieved_obj[0]; 

    unless ($nsg1){
        msg(t() . "ERROR : " . Infoblox::status_code() . ":" . Infoblox::status_detail(),$v);
    } else {
        msg(t() . "OK",$v);
    }

    my @retrieved_objsp = $session->get(
        object => "Infoblox::Grid::Member",
        name => "ns1.intra.example.com"
    ); 
    my $nsp = $retrieved_objsp[0]; 

    my @retrieved_objssi = $session->get(
        object => "Infoblox::Grid::Member",
        name => "nsZ.intra.example.com"
    ); 
    my $nssi = $retrieved_objssi[0]; 

    my @result_array = $session->get(
        "object" => "Infoblox::Grid::DNS" , 
        "grid" => "infoblox" 
    );

    my $object = $result_array[0];

    $nsg1->primary($nsp);
    $nsg1->secondaries([$nssi]);
    $nsg1->comment("Modify by restore-backup");

    my $response1 = $session->modify($nsg1);
    unless ($response1) {
        msg(t() . "FAIL : ", $session->status_code() . ":" . $session->status_detail(),$v);
    }

    $object->nsgroups( [ $nsg1 ] );

    my $response3 = $session->modify($object);
    unless ($response3) {
        msg(t() . "FAIL : ", $session->status_code() . ":" . $session->status_detail(),$v);
    }

    $session->restart();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:04:08.083

啊，Infoblox API 的乐趣。这是它的细微差别之一。您不能使用必须创建新成员对象的现有成员对象。但是您可以使用已检索到的辅助对象中的值...

```
my $newMember = Infoblox::DNS::Member->new(
    name     => $nssi->name(),
    ipv4addr => $nssi->ipv4addr(),
);
$nsg1->primary($nsp);
$nsg1->secondaries([$newMember]);
$nsg1->comment("Modify by restore-backup"); 
```

希望这可以帮助。

# symfony1 - 从 embedRelation() 中删除表头

> ID：11085965
> 
> 赞同：1
> 
> 时间：2012-06-18T15:24:52.823
> 
> 标签：symfony1, doctrine, symfony-1.4, symfony-forms, sfguard

我使用 embedRelation() 将另一个表单拉入 sfGuard 用户表单。它工作正常，我只是想设计它以适应当前的形式。

这会将表单拉入：

```
$this->embedRelation('Profile'); 
```

但它添加了一些我想删除的额外 html 元素：

```
<div class="form_row">
 Profile 
 <table>
  <tbody><tr>
  <th><label for="sf_guard_user_Profile_department_title">Department</label></th>
  <td><input type="text" name="sf_guard_user[Profile][department_title]" value="Graphic Design" id="sf_guard_user_Profile_department_title"><input type="hidden" name="sf_guard_user[Profile][id]" value="2" id="sf_guard_user_Profile_id">
<input type="hidden" name="sf_guard_user[Profile][sf_guard_user_id]" value="10" id="sf_guard_user_Profile_sf_guard_user_id"></td>
</tr>
</tbody></table> <input type="hidden" name="sf_guard_user[id]" value="10" id="sf_guard_user_id"> </div> 
```

如何删除“个人资料”？我还希望标签不包含在表头中。这可以使用 embedRelation 吗？

**更新的模式格式化程序：**

sfWidgetFormSchemaFormatter 用于从嵌入表单中删除表格元素。我仍然无法弄清楚如何摆脱“个人资料”。我添加了 sfWidgetFormSchemaFormatter

sfWidgetFormSchemaFormatterAc2009.class.php

```
 <?php 

    class sfWidgetFormSchemaFormatterAc2009 extends sfWidgetFormSchemaFormatter
    {
      protected
        $rowFormat       = "%error% \n %label% \n %field%
                            %help% %hidden_fields%\n",
        $errorRowFormat  = "<div>%errors%</div>",
        $helpFormat      = '<div class="form_help">%help%</div>',
        $decoratorFormat = "%content%";

        public function formatRow($label, $field, $errors = array(), $help = '', $hiddenFields = null)
        {
          $row = parent::formatRow(
            $label,
            $field,
            $errors,
            $help,
            $hiddenFields
          );

          return strtr($row, array(
            '%row_class%' => (count($errors) > 0) ? ' form_row_error' : '',
          ));
        }

        public function generateLabel($name, $attributes = array())
      {
        $labelName = $this->generateLabelName($name);

        if (false === $labelName)
        {
          return '';
        }

        if (!isset($attributes['for']))
        {
          $attributes['for'] = $this->widgetSchema->generateId($this->widgetSchema->generateName($name));
        }

        // widget name are usually in lower case. Only embed form have the first character in upper case

        var_dump($name);

        if (preg_match('/^[A-Z]/', $name))
        {
          // do not display label
          return ;
        }
        else
        {
          return $this->widgetSchema->renderContentTag('label', $labelName, $attributes);
        }
      }
    } 
```

html:

```
<div class="form_row">
 Profile 
 <div>

 <label for="sf_guard_user_Profile_department_title">Department</label> 
 <input class=" text size-300" type="text" name="sf_guard_user[Profile][department_title]" value="Graphic Design" id="sf_guard_user_Profile_department_title">
                         <input type="hidden" name="sf_guard_user[Profile][id]" value="2" id="sf_guard_user_Profile_id">
</div> <input type="hidden" name="sf_guard_user[id]" value="10" id="sf_guard_user_id"> </div> 
```

更新 2：

新函数 generateLabel($name, $attributes = array()) 在表单顶部生成：

**字符串（16）“部门标题”**

配置文件仍然存在。

**解决**

我能够使用 JQuery 完成这个

我将此添加到 editSuccess.php 模板中：

```
<script>
var $body = $('.content-box');
var html = $body.html();
var newHtml = html.replace('Profile', '');
$body.html(newHtml);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:14:03.783

看看`sfWidgetFormSchemaFormatter`- 也在[这里描述](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:06:04.827

我找到了一个适合我的工作。这是一个有点奇怪的解决方案。

标签使用 显示`generateLabel`。所以，如果我们想隐藏标签，我们只有标签名称来构建条件。

在您的自定义格式化程序中：

```
 public function generateLabel($name, $attributes = array())
  {
    $labelName = $this->generateLabelName($name);

    if (false === $labelName)
    {
      return '';
    }

    if (!isset($attributes['for']))
    {
      $attributes['for'] = $this->widgetSchema->generateId($this->widgetSchema->generateName($name));
    }

    // widget name are usually in lower case. Only embed form have the first character in upper case
    if (preg_match('/^[A-Z]/', $name))
    {
      // do not display label
      return ;
    }
    else
    {
      return $this->widgetSchema->renderContentTag('label', $labelName, $attributes);
    }
  } 
```

# python - TypeError：不能腌制时间对象

> ID：11085969
> 
> 赞同：1
> 
> 时间：2012-06-18T15:25:19.423
> 
> 标签：python, multiprocessing, pickle, typeerror

运行[上一个问题](https://stackoverflow.com/questions/11057763/subprocess-not-returning-data-as-expected)的代码后，我从子进程中得到一个结果集，如下所示：

```
[[(<PyTime:6/10/2012 3:24:17 AM>, 1593.5, 413.0, 19.600000381469727, 430.0, 16.0, 47.0, 42.70000076293945, 15.600000381469727, 69.5), 
(<PyTime:6/10/2012 3:24:18 AM>, 1658.0, 412.0, 19.600000381469727, 429.0, 7.0, 34.400001525878906, 30.899999618530273, 15.699999809265137, 69.5), 
(<PyTime:6/10/2012 3:24:19 AM>, 1685.0, 406.0, 19.600000381469727, 425.0, 18.0, 28.700000762939453, 26.399999618530273, 15.699999809265137, 69.5)]] 
```

当我尝试将它从我的子进程发送到我的父进程时，我会这样做，其中`cu`等于上述内容。

```
conn.send(pickle.dumps(cu)) 
```

这会导致以下错误：`TypeError: can't pickle time objects`

将上述列表发送回父进程的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:45:39.150

正如其他答案所说，`PyTime`对象不是“可腌制的”。我建议将它们转换为常规[`datetime`](http://docs.python.org/release/3.1.5/library/datetime.html#datetime.datetime)对象，可以是泡菜：

```
from datetime import datetime

list_of_pytimes = [ ... ]
list_of_datetimes = [datetime.fromtimestamp(int(pytime)) for pytime in list_of_pytimes]
# Now this will work
pickle.dumps(list_of_datetimes) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:34:56.453

这些 PyTime 对象看起来不像 Python 标准库中的 datetime 对象。由于正常的日期时间对象似乎可以毫无问题地腌制，因此我建议对其进行转换。我不知道您使用的是什么数据库驱动程序，但您可以将其配置为使用标准日期时间对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:34:41.277

尝试使用和（[文档](http://docs.python.org/release/2.7.3/library/pickle.html?highlight=cpickle#object.__getstate__)）进行猴子修补`PyTime`类。如果这不起作用，您将不得不转换为可腌制类型，例如.`__getstate__``__setstate__``datetime.time`

# java - 使用 PostgreSQL 的 Java 内存不足

> ID：11085973
> 
> 赞同：4
> 
> 时间：2012-06-18T15:25:28.390
> 
> 标签：java, postgresql, memory

还有另一个可能相关的问题，但它没有答案，提问者也没有澄清任何问题。

因此，当我在 postgres 中查看大型结果集时，java 似乎会崩溃。

我正在运行的查询试图获得大约 550 万行。基本上我正在尝试从 Postgres 数据库填充 Neo4J 数据库。

除非有人问，否则我不会费心发布代码，因为我认为它很通用。这是异常输出：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredField(Unknown Source)
    at java.util.concurrent.atomic.AtomicReferenceFieldUpdater$AtomicReferenceFieldUpdaterImpl.<init>(Unknown Source)
    at java.util.concurrent.atomic.AtomicReferenceFieldUpdater.newUpdater(Unknown Source)
    at java.sql.SQLException.<clinit>(Unknown Source)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1818)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:254)
    at sqlToGraph.SqlToGraph.main(SqlToGraph.java:52) 
```

第 52 行只是查询，如下所示：

```
rs = st.executeQuery("select player_lo, player_hi, total_hands_lo, total_hands_hi, (pc_lo + pc_hi)/2 as avg_pc from pair"); 
```

所以我猜 rs 越来越大了。我想我可以只使用 LIMIT 和 OFFSET 并运行程序几百次，或者让它在一个循环中重置 rs 左右，但我宁愿不必这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T15:38:54.783

1.  将获取大小设置为合理的值 ( `st.setFetchSize(rowCount)`)。你可以试验一下。
2.  将所有内容放入事务中，并关闭自动提交 ( `con.setAutoCommit(false)`)。

请参阅[此说明](http://abhirama.wordpress.com/2009/01/07/postgresql-jdbc-and-large-result-sets/)和[文档](http://jdbc.postgresql.org/documentation/head/query.html#query-with-cursor)。

# .htaccess - ErrorDocument 仅当引用者为空时

> ID：11085975
> 
> 赞同：0
> 
> 时间：2012-06-18T15:25:31.793
> 
> 标签：.htaccess, http-status-code-404, http-referer, errordocument

我想添加我的 .htaccess ErrorDocument 404 /error-404.php （等），但前提是引用者为空。因此，如果用户错误地输入了 URL，则会得到 error-404.php，但是当我在页面中链接图像并且不存在时，会出现默认错误 404。

这样，当用户看不到错误时，我节省了不下载 HTML+CSS+stuff 的带宽。

但我不知道该怎么做:(

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:44:14.517

试试这个：

```
RewriteCond %{HTTP_REFERER} ^$
RewriteRule !error-404.php /error-404.php [L] 
```

不要设置`ErrorDocument`为 php 文件，否则您的默认 404 将永远不会出现。请注意，默认情况下这不会返回 404 代码，您`error-404.php`需要使用诸如[header() 函数之类的](http://php.net/manual/en/function.header.php)东西来执行此操作。

# mysql - 使用非唯一 ID 排序和计数

> ID：11085976
> 
> 赞同：0
> 
> 时间：2012-06-18T15:25:32.523
> 
> 标签：mysql

我有一个表，其中每个课程都有唯一的 ID。

我还有另一个表，其中列出了每个用户的进度以及将进度与给定课程相关联的列。

但是，我想从这个进度表中选择所有行，并按给定 ID 的行数对它们进行排序。

现在，如果我使用`SELECT count(*) FROM progress GROUP BY courseID`，我只会得到一个整数数组，表示一个 ID 出现了多少次（多少行），但我不知道哪个数字与哪个 ID 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:27:37.793

将您的查询更改为：

```
SELECT courseID, count(*) 
  FROM progress 
 GROUP BY courseID
 ORDER BY count(*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:30:00.833

```
select Course_ID, Student_id, max(colasce(progress,0)) Progress
from Courses
Left Join Students on Courses.ID = Students.Course_ID
group by Course_ID, Student_ID 
```

# datacontractserializer - 您如何导致使用 Svcutil.exe 的默认序列化程序生成的 C# 代码中缺少可选元素？

> ID：11085981
> 
> 赞同：1
> 
> 时间：2012-06-18T15:25:49.440
> 
> 标签：datacontractserializer, svcutil.exe, optional-values

我有一个来自 Web 服务服务器的 WSDL，它的类型包括以下内容：

```
<xs:element minOccurs="0" name="countryID" type="xs:int"/> 
```

这应该表示一个名为 countryID 的可选 int 元素。当我针对它运行 svcutil.exe（来自 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin）时，我得到以下生成的代码：

```
[System.Runtime.Serialization.DataMemberAttribute()]
public int countryID
{
    get
    {
        return this.countryIDField;
    }
    set
    {
        this.countryIDField = value;
    }
} 
```

未在 DataMemberAttribute 上设置“IsRequired=true”属性。但是我看不到一种方法来表明我希望给定的实例不存在！一些谷歌搜索显示我可以修改生成的代码（我讨厌这样做）以使用“DataMemberAttribute(EmitDefaultValue=false)”（参见[http://msdn.microsoft.com/en-us/library/aa347792.aspx?ppud= 4](http://msdn.microsoft.com/en-us/library/aa347792.aspx?ppud=4)）。但是如果我这样做，我不能使用国家 ID 值为零，因为这将被解释为默认值，并且不会生成国家 ID 元素！

如果我添加“/serializer:XmlSerializer”命令行选项，将生成以下内容：

```
[System.Xml.Serialization.XmlElementAttribute(Order=0)]
public int countryID
{
    get
    {
        return this.countryIDField;
    }
    set
    {
        this.countryIDField = value;
    }
}

///
[System.Xml.Serialization.XmlIgnoreAttribute()]
public bool countryIDSpecified
{
    get
    {
        return this.countryIDFieldSpecified;
    }
    set
    {
        this.countryIDFieldSpecified = value;
    }
} 
```

这似乎应该起作用：我只是将 countryIDFieldSpecified 设置为“false”。

这应该如何与 DataContractSerializer 一起使用？

谢谢！

# forms - Internet Explorer 在安全下将表单发布到 iframe。随机结果

> ID：11085982
> 
> 赞同：0
> 
> 时间：2012-06-18T15:25:55.050
> 
> 标签：forms, internet-explorer, post, iframe

使用 IE8，我发现了这个奇怪的问题：当我按下下面的提交按钮时，有时 IE 会在输入上发布数据，有时却没有。

浏览器是否在兼容性视图上并不重要。

我一直在广泛寻找解决这个问题的方法，因为这让我发疯。我尝试过以其他方式发布它（比如使用 jQuery），结果相同。

这个想法是，根据一些参数，它会在 iframe 中加载一个或另一个页面。

它在 FF 或 Chrome 等其他浏览器上运行良好。它也适用于 IE9。

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>

    <body>
        <form method="POST" action="123.php" target="my_iframe">
            <input name="stu[0][All]">
            <input type="submit">
        </form>
        <iframe  name="my_iframe" src="about:blank" width="500px" height="500px"></iframe>
    </body>
</html> 
```

在目标 (123.php) 上，它只显示 $_POST。此页面受基本身份验证保护。

123.php：

```
<?php
    print_r($_POST);
?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:36:27.500

我终于找到了这个问题，它与 Internet Explorer 在发布到需要基本身份验证的页面时出现问题有关，并且 IE 的行为方式是随机的。

解决方案是取消保护页面或使用 GET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:14:14.700

我遇到了同样的问题，找不到解决方案。我看过一些帖子，有人说那是doctype，但是已经更改并且不起作用，您要更改doctype并进行测试吗？

这是我的帖子： [post-to-iframe-dont-work-in-internet-explorer](https://stackoverflow.com/questions/11127431/post-to-iframe-dont-work-in-internet-explorer#comment14584698_11127431 "post-to-iframe-dont-work-in-internet-explorer")

# jquery - 在拖动 JQuery UI 时更改可排序元素的大小

> ID：11085983
> 
> 赞同：4
> 
> 时间：2012-06-18T15:25:56.910
> 
> 标签：jquery, css, jquery-ui, jquery-ui-sortable

这是我的问题的一个小小提琴：

[http://jsfiddle.net/Yc9WY/52/](http://jsfiddle.net/Yc9WY/52/)

本质上，一箱物品比另一箱大得多。因此，使用 sortable 进行拖放是一个挑战。

首先，我在开始时更改了元素的大小

```
$(function() {
    $( "#sortable1, #sortable2" ).sortable({
       connectWith: ".connectedSortable",
       start: function(event, ui){
           $(ui.item).width($('#sortable2 li').width());
       }               
    }).disableSelection();
});​ 
```

但是，我不确定如何将调整大小的元素移动到鼠标的光标处。基本上，如果我单击左侧列表中距元素左侧任何距离的距离，则很难将元素拖放到较小的列表中。

我试图使用以下方法将元素移动到鼠标位置：

```
$(ui.item).offset({top: event.pageY, left: event.pageX}); 
```

但是，它似乎没有用。

进一步澄清：

**(清单 1) (清单 2) ----------------------------------------- - --**

将元素从列表 1 移动到列表 2 具有挑战性，因为它们的大小不同。因此，我将列表 1 中的元素调整为列表 2 的大小。现在，如果您单击

**- - - - - - - - - - - - - - - - - - -X - - - -**

元素看起来像

**---** _****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __** *x* __ **---****

 **其中 x 表示鼠标位置。本质上，我想将元素移动到鼠标位置以使拖动到列表 2 更容易

有什么建议吗？谢谢！

编辑：对不起，我没有足够的代表来发布图片，但是......

**[ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _]** （点击前）

**[ *_* _]** -------------------- x（单击，x 标记单击的位置）

我基本上想将现在较小的元素移动到与鼠标相同的位置。

再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:39:41.353

添加`tolerance:"pointer",`可排序元素的选项

这是小提琴：http: [//jsfiddle.net/Yc9WY/55/](http://jsfiddle.net/Yc9WY/55/)

**编辑 ：**

`cursorAt: { top:0, left: 0 },`在可排序元素的选项中添加

它会将项目定位在您的指针下

这是小提琴：http: [//jsfiddle.net/Yc9WY/57/](http://jsfiddle.net/Yc9WY/57/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T03:54:15.800

我发现这个解决方案非常有效：

```
$("ul.sortable").sortable({
    placeholder: "highlight",
    start: function(event, ui) {
       // Resize elements
       $(this).sortable('refreshPositions');
    }
}); 
```

来源：http: [//forum.jquery.com/topic/reducing-the-size-of-elements-before-sorting-them-using-sortable](http://forum.jquery.com/topic/reducing-the-size-of-elements-before-sorting-them-using-sortable)**

# c# - Surface sdk scatterview

> ID：11085988
> 
> 赞同：1
> 
> 时间：2012-06-18T15:26:17.427
> 
> 标签：c#, kinect, multi-touch, pixelsense

我正在使用[http://code.msdn.microsoft.com/Surface-Bluetooth-Connect-dbe7e0e8](http://code.msdn.microsoft.com/Surface-Bluetooth-Connect-dbe7e0e8)中发布的蓝牙表面我在这个 wpf 应用程序中添加了 kinect。但我需要多点触控功能来放大和缩小 scatterviewitem 图片。所以任何人都可以告诉我如何在这个应用程序中实现多点触控。而且我也尝试使用kinect手势来放大scatterview，但是如何在scatterview中选择scatterviewitem并对其进行缩放仍然存在问题。

我在 MainWindow 类中添加了所有 kinect 函数，那么如何在 scatterview 中实现所有 scatterviewitems，然后缩放我选择一个。

我用的是win7，不是触摸屏。

# javascript - HTML 表单中的动态表计算

> ID：11085993
> 
> 赞同：0
> 
> 时间：2012-06-18T15:26:42.693
> 
> 标签：javascript, jquery, forms

我有一个简单的 HTML 表单/表格，其中一列（排名）有一个带有 2 个选项的选择菜单：中等或高。我需要找到排名列中的单元格 =“中等”的所有行，并计算同一行中另一个单元格的总数（平均小时数/周），并对单元格 =“高”的所有行重复此操作。这是一个 JS Fiddle，显示了一个示例空表单/表格：

[http://jsfiddle.net/53zfb/4/](http://jsfiddle.net/53zfb/4/)

请注意，行数不会预先固定 - 可能有 1 个或更多。我有一个脚本，可以根据输入到“小时/周”和“周/年”字段中的输入计算平均小时/周，但不能让它也计算 2 个排名中的每一个的总计。

只是为了澄清表单是否有这些选择：

```
Row 1: Ranking = "Moderate" Average Hours/Week = 2
Row 2: Ranking = "High" Average Hours/Week = 4
Row 3: Ranking = "Moderate" Average Hours/Week = 6
Row 4: Ranking = "High" Average Hours/Week = 8 
```

Total Moderate 单元格的值应为 * (6 + 2)，Total High 单元格的值应为 12 (4+*)。理想情况下，只要任何行的排名、小时/周或周/年值发生变化，就会发生这种情况。

到目前为止，这是我想出的对我不起作用的方法：

```
var moderateTotal = 0;
        var highTotal = 0;
        $("#activities").find("tr").each(function() {
    var tr = $(this);
    var level = tr.find("td:nth-child(2)").html();
    var value = tr.find("td:nth-child(5)").html();

    switch(level)
    {
        case "Moderate":
            moderateTotal += value*1;
        break;
        case "High":
            highTotal += value*1;
        break;
    }
});

$("#moderateTotal").val(moderateTotal);
    $("#highTotal").val(highTotal);

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:36:52.207

考虑将您的事件更改为和标签`onChange=MyFunc()`内的一个，然后从中调用您的函数。该函数只需遍历您的控件（您的 JSFiddle 已经增加了 ID）。If 语句将遍历控制循环，查找所有风险# 是每个风险选择组的唯一 ID（与您的 JSFiddle 不同）的地方，并将适当的值添加到运行总和中。`<input>``<select>``Risk#="Moderate"`

你在这里没有问任何具体的问题，所以我认为你只是需要一些帮助来解决这个问题，具体的代码并不难。您使用 JSFiddle 展示了一些良好的编码知识。

可能的Javascript：

```
function MyOnChangeEvent() {
   var highTotal, modTotal;
   var rowCount, i;
   highTotal=0;
   modTotal=0;

   rowCount=5; //However many rows you have

   for (i=1; i<rowCount+1; i++) {
      switch (document.getElementById("C"+i)) {
         case "Moderate": modTotal++;
         case "High": highTotal++;
      }
   }

   document.getElementById("HighTotal") = highTotal;
   document.getElementById("ModerateTotal") = modTotal;
} 
```

因为我没有测试它，所以可能有调试，但想法就在那里。通过获取值`document.getElementById(<ID OF TEXT BOXES>)`并执行计算。

# java - 为什么 Java 枚举不按顺序返回属性列表？

> ID：11085994
> 
> 赞同：3
> 
> 时间：2012-06-18T15:26:43.027
> 
> 标签：java

我正在创建一个可以更改语言的简单程序，并且我会将文件 myBundle.properties 中的属性列表转换为字符串数组。

这是文件 myBundle.properties：

```
 #default
 test1=Hello1
 test2=Hello2
 test3=Hello3
 test4=Hello4
 test5=Hello5
 test6=Hello6 
```

这是Java代码：

```
import java.util.*;

class BundleTest {

    BundleTest() {
        String[] s = returnStringArray(Locale.ENGLISH);
        for(int i=0; i<s.length; i++) {
            System.out.println(s[i]);
        }
    }

    private String[] returnStringArray(Locale language) {
        try {
            ResourceBundle labels = ResourceBundle.getBundle("myBundle", language);
            Enumeration<String> keys = labels.getKeys();
            Vector v = new Vector();
            String key = null;
            while (keys.hasMoreElements()) {
                v.add(keys.nextElement());
            }
            String[] s = new String[v.size()];
            for(int i=0; i<s.length; i++) {
                s[i] = (String)v.elementAt(i);
            }
            return s;
        } catch (MissingResourceException mre) {
            System.out.println("Risorse della lingua non trovate!");
            return null;
        }
    }

    public static void main(String[] args) {
        new BundleTest();
    }
} 
```

但是，令人惊讶的是，当我执行程序时，它会以随意的顺序返回字符串。为什么 Enumeration 会有这种奇怪的行为？

```
bash-4.1$ java BundleTest
test1
test6
test4
test5
test2
test3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:33:55.037

我不知道 ResourceBundle 类的确切细节，但是在查看您的代码示例时，它似乎具有键/值对。

这表明它将其内容存储在[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)中。（同样，因为我不知道 ResounrceBundle，这是一种预感） HashMap 键（和值）是无序的，因为它们的存储方式可以很容易地找到给定键的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:27:50.787

如果更换

```
Enumeration<String> keys = labels.getKeys(); 
```

和

```
List<String> keys =  Collections.list( labels.getKeys() );
Collections.sort(keys); 
```

帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:43:19.510

您很可能会取回一个[PropertyResourceBundle](http://docs.oracle.com/javase/6/docs/api/java/util/PropertyResourceBundle.html)，它在内部使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)进行存储。HashMap 没有排序。

这是因为 ResourceBundles 应该用于按键检索值，而不是用于根据原始属性文件按排序顺序进行枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:42:04.750

有两个地方我不会假设顺序。
1.来自Vector和2.labels.getKeys()；

在未由集合实例化的枚举上尝试。

# html - window.onbeforeunload 仅在关闭窗口而不是刷新时运行

> ID：11085998
> 
> 赞同：2
> 
> 时间：2012-06-18T15:27:10.607
> 
> 标签：html, onbeforeunload

我有这个功能

```
 window.onbeforeunload = function () {        
          return "Are you sure?";        
    }; 
```

我有一个按钮，当用户按下它时，窗口会刷新以更新屏幕值并进行一些数据库调用。我`window.onbeforeunload=null;`在函数的开头添加了禁用 onbeforeunload 但它一直被调用。

有没有办法在我的按钮 onclick 函数中禁用 onbeforeunload 函数或使 window.onbeforeunload 仅在关闭窗口而不是刷新时调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T17:55:51.340

以下代码应该可以工作（应该保留在脚本标签之间的头标签内）

```
window.onload=function(){

    window.onbeforeunload = function(){        
        return "Are you sure?";        
    }

    document.getElementById('refresh').onclick=function(){
        window.onbeforeunload = null;
        window.location.reload(); // replace with your code
    }
}​ 
```

[**工作演示。**](http://jsfiddle.net/heera/FKNkn/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:51:41.617

另一种方法是使用 Cookie。将 cookie 设置为标志，就像您想在不调用 onbeforeunload 函数的情况下刷新页面一样。

```
 window.onbeforeunload = function (e) { 
...      
   canceled = getCookie("canceled");
         if (canceled == "false" || canceled == undefined)
          {//do ur stuff here
          }
...
} 
```

并将您的 cookie 设置为 5 秒，以便在您重新加载页面后立即过期。

# url - 在 URL 中使用 GUID 打开 SharePoint 列表

> ID：11085999
> 
> 赞同：5
> 
> 时间：2012-06-18T15:27:17.750
> 
> 标签：url, sharepoint-2007, guid, custom-lists

我需要使用 RootSite、列表 GUID 和/或视图 GUID 在浏览器中打开 SharePoint 列表。有没有办法做到这一点？

我假设 URL 看起来像：

`http://rootsite/_vti_bin?LIST={7F1BA68C-8D94-48D7-BF97-AC5C6FF0665A}`

有任何想法吗？预先感谢您的帮助！