# StackOverflow 问答 10734000-10734999

# python - selenium grid2 和 python 如何指定环境

> ID：10734002
> 
> 赞同：0
> 
> 时间：2012-05-24T08:43:15.760
> 
> 标签：python, selenium, grid

[http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setBrowserName();
capability.setPlatform();
capability.setVersion()
capability.setCapability(,);
WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability); 
```

我需要特定的环境（ff-on-xp、ie7-on-xp 等）来测试。从上面，示例是在 java 中，谁能给我一个 python 中的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:34:58.197

您可以查看[WebDriver python 文档](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver/selenium.webdriver.common.desired_capabilities.html)

```
from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

driver = webdriver.Remote(command_executor='http://local:4444/wd/hub',desired_capabilities = DesiredCapabilities.INTERNETEXPLORER)
driver.start_client() 
```

# xsd - XSD 我的数据类型

> ID：10734005
> 
> 赞同：1
> 
> 时间：2012-05-24T08:43:21.767
> 
> 标签：xsd

我想问一下.XSD 文件。我找不到任何关于创建自己的类型的信息，例如：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:complexType name="Client">
        <xs:sequence>
            <xs:element name="FirstName" type="string"/>
            <xs:element name="SecondName" type="string"/>
    </xs:sequence>
    </xs:complexType>

    <xs:complexType name="Contact">
        <xs:sequence>
            <xs:element name="contacts" type="Client"  minOccurs="1"/>
        </xs:sequence>
    </xs:complexType>   
</xsd:schema> 
```

我想知道定义我自己的类型联系人的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:28:11.640

有几点不太对。

*   结束模式标记上的 xsd: 命名空间别名应该只是 xs：

*   原始字符串类型需要有类型限定，即 xs:string。

*   从风格的角度来看，ComplexTypes 应该结束 Type。

*   如果您想使用模式（可能是通过联系人），那么您需要声明一个根元素。

![XML 模式的图形表示](../Images/df007a9783b79ab8d68ff55ff174461a.png)

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition (Trial) 10.0.1.3941 (http://www.liquid-technologies.com)-->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="ClientType">
        <xs:sequence>
            <xs:element name="FirstName" type="xs:string" />
            <xs:element name="SecondName" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ContactType">
        <xs:sequence>
            <xs:element name="contacts" type="ClientType" minOccurs="1" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="Client" type="ClientType" />
</xs:schema> 
```

基本上，XML Schemas 是在没有工具的情况下编写的复杂的东西。我会认真考虑获得一个好的模式设计器，我会推荐[Liquid XML Studio](http://www.liquid-technologies.com/Xml-Schema-Editor.aspx)。

# jquery - 使用 jQuery 使用 .ajax 警告 HTML 元素

> ID：10734009
> 
> 赞同：1
> 
> 时间：2012-05-24T08:43:28.460
> 
> 标签：jquery, html, ajax, get, alert

有没有办法从这个 .ajax 获取警报所有的 HTML？

```
function testq() {    
    var acronyms = ["fubar", "snafu", "gnu"];

    $.each(acronyms, function(index, element) {
        $.ajax({
            url: "https://encrypted.google.com/search?q=" + element,
            dataType: "html",
            success: function(html) {
                var $container = $("#leftnav", html); // look for a specific element in the returned HTML
                jAlert($container);
            }
        });
    });
}​ 
```

这只是为了调试。稍后我将修改从 .ajax 页面获取的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:46:23.463

而不是`$container`使用`html`：

```
jAlert(html); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:47:59.440

> 首先，我想提醒我的请求获得的所有 HTML。

您只提醒一个特定元素：

```
var $container = $("#leftnav", html); // look for a specific element in the returned HTML
jAlert($container); 
```

改成

```
jAlert(html); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:47:40.287

您可以使用`jAlert($container.html())`获取`jQuery`对象的 html 内容或简单`jAlert(html)`地获取所有内容，但如果您这样做是为了调试，我建议使用适当的控制台，如 firebug 或 chrome 内置控制台，并检查来自 ajax 的返回值打电话给那里，而不是试图提醒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T08:51:59.423

使用`jAlert(html);`.................................................. …………

# android - 如何在 Android init.rc 中读取和运行条件语句

> ID：10734011
> 
> 赞同：1
> 
> 时间：2012-05-24T08:43:35.680
> 
> 标签：android, filesystems, conditional, init, conditional-statements

我有一个要求，我需要读取一个接口（比如/sys/module/my_file/parameters/val），然后根据它的值在另一个接口上写入一些值。这必须在 Android 文件系统的 init.rc 中完成。

流程是这样的

```
if ( read /sys/module/my_file/parameters/val == "yes") then
write /sys/devices/platform/target_file/val 100 
```

任何人都可以帮我做同样的事情吗？可能吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:18:52.370

您可以使用 exec 节来实现它：

```
exec <path> [ <argument> ]*
   Fork and execute a program (<path>). This will block until
   the program completes execution. It is best to avoid exec
   as unlike the builtin commands, it runs the risk of getting
   init "stuck". 
```

有关详细信息，请参阅[https://github.com/android/platform_system_core/blob/master/init/readme.txt](https://github.com/android/platform_system_core/blob/master/init/readme.txt)。

示例：将您的代码移动到脚本 (my_script.sh) 中。将此添加到您的 init.rc

```
on boot:
  ...
  exec /path/to/my_script.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T12:18:26.313

您可以使用 init 的服务概念来运行脚本。下面是代码示例表单 init script.rc 文件。

```
chmod 0750 /system/bin/myscript.sh
start script
[...]
service script /system/bin/myscript.sh
    class main
    user root
    group root
    oneshot
```

# java - 每当调用某个类的方法时，我可以要求java做某事吗

> ID：10734013
> 
> 赞同：0
> 
> 时间：2012-05-24T08:43:43.733
> 
> 标签：java

我是 Java 新手，已经有些时候感到惊讶了。所以也许这在java中是可能的？

我有课

```
class X {
      string method_a(int x) {
         String str="abc";
         return str;
      }
}

class Y {
      void before(){};
      void after(){};
} 
```

我可以告诉Java在调用类X的“method_a”之前或之后调用类Y的方法“之前”和“之后”吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:45:35.337

听起来您想要[Aspect-Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。这不是作为“普通”Java 的一部分而存在的东西，但是周围有各种技术可以以各种方式启用它。您可能想从[AspectJ](http://www.eclipse.org/aspectj/)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:47:40.447

语言本身不支持您所要求的，但可以由诸如[Spring 的 Aspect Orriented Programming model](http://static.springsource.org/spring/docs/2.0.x/reference/aop.html)等框架提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:50:16.937

是的你可以。它被称为“方面”（搜索 AspectJ）。我为您找到了这个 Hello World 示例：[http ://www.java2s.com/Code/Java/Spring/AspectHelloWorldExample.htm](http://www.java2s.com/Code/Java/Spring/AspectHelloWorldExample.htm)

不过我必须警告你，方面对于日志记录和性能跟踪非常有效，但如果使用不当可能会成为一场噩梦。正如他们所说：“权力越大，责任越大”。

# excel - 从 VSTO Excel 插件异步调用进程内 COM-DLL？

> ID：10734014
> 
> 赞同：2
> 
> 时间：2012-05-24T08:43:46.433
> 
> 标签：excel, com, asynchronous, vsto, add-in

我正在为 Microsoft Excel 2007 / 2010 开发应用程序级别的 VSTO 4 插件。结果是使用 .Net 4 客户端配置文件的基于 Windows 窗体的 DLL。

现在我必须使用旧的 COM-DLL。设置引用并通过 .Net 中的 COM-Interop 访问 COM-Methods 是没有问题的。

但是我需要调用的（同步）方法可能需要一分钟或更长时间才能返回。

我知道你的答案：使用工作线程...

我**使用**任务并行库将持久操作放入工作任务中并保持 GUI (Excel) 响应。

* * *

但是：inprocess COM-Call（在工作任务/线程中）似乎仍然**阻塞**了我的 GUI 线程。

*   为什么？是因为 Excel 总是作为 STA（单线程单元）运行吗？
*   如何保持 Excel GUI 响应？
*   有没有办法让它真正异步？

* * *

感谢您的任何答案，

约尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T21:59:23.130

最后，我找到了这个话题的答案：

我已经阅读了很多关于 COM 线程模型的内容，然后与我称为 InProc-Server 的 COM-DLL 的开发人员进行了交谈。

我们一起改变了COM-DLL的[线程模型：](https://en.wikipedia.org/wiki/Component_Object_Model#Threading)

*   OLD（阻塞）：单线程单元（STA），（ThreadingModel=Apartment）
*   **新（工作）：多线程单元（MTA），（ThreadingModel=Free）**

由于我们在 COM-DLL 中有自己的同步机制，因此不会因标准 Windows 消息队列的同步丢失而导致问题。

问题是，即使 UI 线程也是空闲的，即使它执行了[DoEvents](https://msdn.microsoft.com/de-de/library/system.windows.forms.application.doevents(v=vs.110).aspx)，重要的窗口消息（[WM_Paint](https://msdn.microsoft.com/en-us/library/windows/desktop/dd145213(v=vs.85).aspx)等）也没有传递。

现在他们是。UI 每次都在响应，对 COM-DLL 的调用仍然在工作线程中完成（如上所述，它是[Task Parallel Library使用的](https://msdn.microsoft.com/de-de/library/dd460717(v=vs.110).aspx)[ThreadPool](https://msdn.microsoft.com/de-de/library/system.threading.threadpool(v=vs.110).aspx)线程）。

# c# - 如何为pdf文档中的所有字段设置属性

> ID：10734015
> 
> 赞同：1
> 
> 时间：2012-05-24T08:43:49.847
> 
> 标签：c#, asp.net, properties, field

我在 pdf 文档中有很多字段，我想为所有字段设置一个属性。

例子：

`fields.SetFieldProperty("nr1", "textfont", baseFont, null);` `fields.SetFieldProperty("nr2", "textfont", baseFont, null);` `fields.SetFieldProperty("nr3", "textfont", baseFont, null);` `fields.SetFieldProperty("nr4", "textfont", baseFont, null);` `fields.SetFieldProperty("nr5", "textfont", baseFont, null);`

有什么方法可以一次设置所有字段具有相同的属性？我想避免单独设置每个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:18:30.110

类似的东西，也许（未经测试）

```
var baseFont = new Font();
var reader = new PdfReader(@"test");
var fields = reader.AcroFields;
foreach (var f in fields.Fields.Select(x => x.Key))
      fields.SetFieldProperty(f, "textfont", baseFont, null); 
```

或者因为我对你的代码不太了解......

```
for (var i = 0; i < n; i++) 
   fields.SetFieldProperty(string.Format("nr{0}", i), "textfont", baseFont, null); 
```

# google-maps - 谷歌地图信息栏

> ID：10734017
> 
> 赞同：0
> 
> 时间：2012-05-24T08:43:52.797
> 
> 标签：google-maps

嗨，我在我的项目中使用谷歌地图，比如商店定位器。有 2 个页面，其中一个在第一页和页面中选择商店，并且地图填充在第二页中，现在我想在默认情况下在页面加载时显示选定的一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:48:27.067

如果您想显示带有标记的地图以定位所选商店，那么这里是[演示](http://code.google.com/apis/ajax/playground/?exp=maps#map_simple_v3) 创建一个逻辑来检查选择了哪个商店重定向到另一个页面并调用带有参数的函数，该参数设置用户所选商店的中心

# c# - 我可以将文件放在托管我的网站的服务器的 c 驱动器上吗？

> ID：10734020
> 
> 赞同：-6
> 
> 时间：2012-05-24T08:44:05.697
> 
> 标签：c#, hosting

出于安全原因，我可以将文件放在`C:`托管我的网站的服务器的驱动器上吗？

如果是，那么我如何设置和获取要在页面上使用的位置路径？

我们可以像这样在网站的根目录上获取文件：

```
licFileName = HttpContext.Current.Server.MapPath("~/LicenseFile/") + licFileName; 
```

我可以设置`C:`服务器本地驱动器的路径并获取吗？如何？

阿提克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:45:42.910

```
licFileName = @"c:\" + licFileName; 
```

但是您需要对 C: 的访问权限，如果它不是您的服务器，则可能会出现问题。如果我是你，我不会那样做。

您似乎正试图阻止网络用户访问`LicenseFile/`. 相反，您应该阻止访问`LicenseFile/`使用您的 Web 服务器配置。

# java - 如何使用 JTextPanel 获取字符串

> ID：10734021
> 
> 赞同：1
> 
> 时间：2012-05-24T08:44:05.780
> 
> 标签：java, input, jtextfield, bufferedreader, keylistener

我需要使用 JtextPanel 从键盘获取输入，按 Enter 时将其保存在字符串中，然后使用该字符串根据输入中给出的行执行某些操作（例如“帮助”或“退出”）。我在 JTextPanel 的 KeyListener 中得到了这个：

```
...
public void keyPressed(KeyEvent e) {
     int key = e.getKeyCode();    

     if (key == KeyEvent.VK_ENTER) {
        inputString = textField.getText();
        textArea.append(inputString + "\n");
        textField.setText("");

        }
}
.... 
```

，但我不能直接调用这个方法。我需要类似的东西

```
String input = processInput();
    if((input).equals("help"))
          ............
    else if ((input).equals("go"))
          ............ 
```

并且 processInput 应该是一个等待 (key== KeyEvent.VK_ENTER) 的方法，就像您使用 C 中的 scanf 或 java 中的 bufferedReader 时发生的那样，它会等待您从键盘输入一个字符串，直到您按下回车键。编辑

我的应用程序管理这样的命令

```
while(!finished) {

    finished = processInput() 
} 
```

processInput 管理输入中给出的命令。这就是为什么我不能从 keyListener 调用 processInput() 我希望我很清楚，我的英语太糟糕了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:50:31.130

我相信你被困在事件驱动界面的架构设计上。

这里的想法是你不要去“等待”输入或其他任何东西。您设置界面，附加 KeyListener（您确实有一个`addKeyListener()`地方，对...），然后您就完成了。你放弃控制流，让你的主要方法结束，完成。

当用户做了一些值得注意的事情时，你会处理它，所以说你有一个方法`processText(String text)`，你会在你的 keylistener 中说`processText(inputString);`。

因此，当用户输入某些内容并按 Enter 键时，它开始在 keyListener 中执行，它将控制流传递给`processText()`方法，该方法将根据该文本执行它应该执行的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:51:03.267

这个方法怎么样，很简单。

按键监听器：

```
...
public void keyPressed(KeyEvent e) {
     int key = e.getKeyCode();    

     if (key == KeyEvent.VK_ENTER) {
        inputString = textField.getText();
        textArea.append(inputString + "\n");
        textField.setText("");
        processInput(inputString); //crunch it
        }
}
.... 
```

和其他地方

```
public void processInput(String input) {
    if((input).equals("help"))
          ............
    else if ((input).equals("go"))
          ............
} 
```

# qt - QTableView - 排序标题

> ID：10734024
> 
> 赞同：4
> 
> 时间：2012-05-24T08:44:12.803
> 
> 标签：qt, sorting, qtableview

是否可以对 QTableView 的标题进行排序？ ![在此处输入图像描述](../Images/32bc90f1241a04bc24d7104327e891d8.png)

我想对水平和垂直标题进行排序。QTableView 仅提供对列内容进行排序的功能。有没有办法对视图进行排序，还是我必须对底层数据结构进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:01:13.710

Afaik 没有预先实现的方法来做到这一点。

一种方法是继承 QSortFilterProxyModel，按您使用的任何内容对行进行排序以填充垂直标题，然后使用[QHeaderView::moveSection()](http://qt-project.org/doc/qt-4.8/qheaderview.html#moveSection)手动对列进行排序。

# java - logback：两个appender，多个logger，不同级别

> ID：10734025
> 
> 赞同：66
> 
> 时间：2012-05-24T08:44:13.340
> 
> 标签：java, logging, logback

我想在我的应用程序（Spring Integration）中有两个日志文件，debug.log 和 main.log。我想在 INFO 级别运行 main.log，在 DEBUG 级别运行 debug.log。这可以通过 appenders 上的过滤器来实现。我想根据源将不同级别记录到附加程序。换句话说

```
<logger name="org.springframework" level="ERROR">
    <appender-ref ref="main" />
</logger>
<logger name="org.springframework" level="DEBUG">
    <appender-ref ref="debug" />
</logger>
<logger name="com.myapp" level="INFO">
    <appender-ref ref="main" />
</logger>
<logger name="com.myapp" level="DEBUG">
    <appender-ref ref="debug" />
</logger> 
```

所以总结一下：

1.  弹簧记录器
    *   主 -> 错误
    *   调试 -> 调试
2.  com.myapp 记录器
    *   主要 -> 信息
    *   调试 -> 调试

因此，我必须让记录器在 DEBUG 处运行，并且附加程序上的阈值过滤器不够精细。

**更新**增加了问题的清晰度

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-24T09:00:38.293

创建一个 ThresholdLoggerFilter 类，该类可以放在 appender 上，例如：

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>INFO</level>
    </filter>
    <filter class="com.myapp.ThresholdLoggerFilter">
        <logger>org.springframework</logger>
        <level>ERROR</level>
    </filter>
    </appender> 
```

以下代码有效

```
package com.myapp;

import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.core.filter.Filter;
import ch.qos.logback.core.spi.FilterReply;

public class ThresholdLoggerFilter extends Filter<ILoggingEvent> {
    private Level level;
    private String logger;

    @Override
    public FilterReply decide(ILoggingEvent event) {
        if (!isStarted()) {
            return FilterReply.NEUTRAL;
        }

        if (!event.getLoggerName().startsWith(logger))
            return FilterReply.NEUTRAL;

        if (event.getLevel().isGreaterOrEqual(level)) {
            return FilterReply.NEUTRAL;
        } else {
            return FilterReply.DENY;
        }
    }

    public void setLevel(Level level) {
        this.level = level;
    }

    public void setLogger(String logger) {
        this.logger = logger;
    }

    public void start() {
        if (this.level != null && this.logger != null) {
            super.start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-24T10:14:20.797

如果您愿意从根记录器继承，您也可以更简单地执行此操作，例如，在这里我们为错误添加一个额外的记录器，该记录器记录到 stderr。它仅对特定记录器启用。

```
<configuration>
    <appender name="CONSOLE-stdout" class="ch.qos.logback.core.ConsoleAppender">
        <target>System.out</target> <!-- the default -->
        <encoder>
            <pattern>%d %-5level [%thread] %logger{0}: %msg%n</pattern>
        </encoder>
    </appender>
    <appender name="CONSOLE-stderr" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>ERROR</level>
        </filter>

        <target>System.err</target>
        <encoder>
            <pattern>%d %-5level [%thread] %logger{0}: %msg%n</pattern>
        </encoder>
    </appender>
    <root level="DEBUG">
        <appender-ref ref="CONSOLE-stdout" />
    </root>

        <!-- We want error logging from this logger to go to an extra appender 
             It still inherits CONSOLE-stdout from the root logger -->
    <logger name="org.springframework" level="INFO">
        <appender-ref ref="CONSOLE-stderr" />
    </logger>
</configuration> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-04-19T20:01:02.727

# 添加比现有解决方案更简单的附加解决方案

这些解决方案都不适合我，因为我没有使用像 Spark 或 Spring 这样的框架。所以我做了一些更简单的事情，似乎运行良好。虽然此解决方案可能不适用于 OP，但也许它对想要不那么笨重的东西的人有用。

```
<property name="pattern" value="%d{yyyy.MMM.dd HH:mm:ss.SSS} [ProgramName] %level - %msg%n" />

<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>/path/to/your/program.log</file>
    <append>true</append>
    <encoder>
        <pattern>${pattern}</pattern>
    </encoder>
</appender>

<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <target>System.out</target>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>INFO</level>
    </filter>
    <encoder>
        <pattern>${pattern}</pattern>
    </encoder>
</appender>

<root level="debug">
    <appender-ref ref="FILE" />
    <appender-ref ref="STDOUT" />
</root> 
```

使用此配置，我能够保持控制台相当干净，同时将 DEBUG 语句输出到日志文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-11-12T04:09:10.987

刚刚找到了一个仅使用 logback 元素的实用解决方案，效果很好，基本上你需要有两个 appender，一个带有默认配置，另一个带有过滤器（在我的示例中，我使用的是控制台）：

```
 <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="WARN_FILTER_STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>WARN</level>
        </filter>
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="org.apache.spark" level="INFO" additivity="false">
        <appender-ref ref="SPARK" /><!-- this line is not necessary, just here to ilustrate the need for the filter -->
        <appender-ref ref="WARN_FILTER_STDOUT" />
    </logger>

    <root level="info">
        <appender-ref ref="STDOUT" />
    </root> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-22T10:30:34.057

对不同的消息使用多个记录器将如下所示：

```
import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.Logger;

import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.Logger;
import ch.qos.logback.classic.LoggerContext; 
import ch.qos.logback.classic.encoder.PatternLayoutEncoder;
import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.core.FileAppender;

public class ConfigureLogBack 
{
    public static void programmaticConfiguration()
    {
        Logger camel = getLogger("MyRoute", C:\\Users\\amrut.malaji\\Desktop\\Oracle\\logback\\camel-Log.txt");
        Logger services = getLogger("webservices", "C:\\Users\\amrut.malaji\\Desktop\\Oracle\\logback\\services-log.txt");
    }

    private static Logger getLogger(String string, String file) {
        LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
    PatternLayoutEncoder ple = new PatternLayoutEncoder();

    ple.setPattern("%date %level [%thread] %logger{10} [%file:%line] %msg%n");
    ple.setContext(lc);
    ple.start();
    FileAppender<ILoggingEvent> fileAppender = new FileAppender<ILoggingEvent>();
    fileAppender.setFile(file);
    fileAppender.setEncoder(ple);
    fileAppender.setContext(lc);
    fileAppender.start();

    Logger logger = (Logger) LoggerFactory.getLogger(string);
    logger.addAppender(fileAppender);
    logger.setLevel(Level.INFO);
    logger.setAdditive(false); /* set to true if root should log too */

    return logger;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-13T17:49:41.393

> appender 上的阈值过滤器不够精细

您可以使用 EvaluatorFilter。JaninoEventEvaluator 需要对 janino (.jar) 的引用，而 logback.xml 示例将是：

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>INFO</level>
    </filter>
    <filter class="ch.qos.logback.core.filter.EvaluatorFilter">      
        <evaluator class="ch.qos.logback.classic.boolex.JaninoEventEvaluator">
            <expression>
                level &lt;= ERROR &amp;&amp; logger.equals(&quot;com.myapp.ThresholdLoggerFilter&quot;)
            </expression>
        </evaluator>
        <OnMismatch>DENY</OnMismatch>
        <OnMatch>NEUTRAL</OnMatch>
    </filter>
 </appender> 
```

这种方法使用表达式标记中的 java 表达式（必须是 xml 转义）来评估日志记录事件，并且不需要编写自定义 java 类。

# java - 如何使用 Eclipse IDE 从 java 程序运行 sudo 命令？

> ID：10734026
> 
> 赞同：-3
> 
> 时间：2012-05-24T08:44:34.543
> 
> 标签：java, linux, eclipse, ubuntu

我想使用 Eclipse IDE 从 java prog 运行 sudo 命令，但它没有运行，也没有要求输入密码，也没有在控制台中显示任何输出消息，请告诉我我的 prog 是

```
public class JavaCommand {
    public static void main(String args[]) throws IOException, InterruptedException {
        String command="sudo cat /etc/sudoers";
        Process myProcess =null;
        try {
            Runtime runtime=Runtime.getRuntime();
            File file=new File("/home/users/admin/temp");
            myProcess = runtime.exec(command,null,file);
            myProcess.waitFor();
            InputStreamReader myIStreamReader = new InputStreamReader(myProcess.getInputStream());
            BufferedReader br=new BufferedReader(myIStreamReader);
            String line;
            while((line=br.readLine())!=null){
                System.out.println(line);
            }
        } catch (IOException anIOException) {
            System.out.println(anIOException);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:48:17.743

[Process.waitFor](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)是一个阻塞调用。

在你这样做之前`myProcess.waitFor`，你需要创建线程来处理程序 i/o。

# symfony - Symfony2 将文档合并为 PDF

> ID：10734027
> 
> 赞同：0
> 
> 时间：2012-05-24T08:44:34.630
> 
> 标签：symfony

我需要将各种 PDF 和 Excel 文档合并到一个 PDF 中。例如我有： - A.pdf - B.pdf - D.xlsx - E.doc

我需要的是将所有 4 个文档内容合并到一个 result.pdf 文档中。

有任何捆绑/库可以实现这一目标吗？或者最好的选择是创建一个python脚本并从symfony2（如何？）调用它来生成那个pdf？

任何帮助或线索？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:52:47.450

Symfony 提供了一个 Process 组件，它很好地包装了原生 php exec/system 函数。

检查出来：[https ://github.com/symfony/Process](https://github.com/symfony/Process)

另一种选择是使用 Zend Framework 中的 PDF 组件。我不确定它是否允许合并 PDF，但只需阅读文档即可找到答案。

在 symfony 中查看有关 ZendPDF 的教程：[http ://www.craftitonline.com/2011/06/pdf-generation-with-symfony2-part-ii-zend-option/](http://www.craftitonline.com/2011/06/pdf-generation-with-symfony2-part-ii-zend-option/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T19:56:33.413

@DucTa 的死链接在谈论`pdftk`，一个可以合并多个 PDF 文档的二进制文件。

使用 .将其下载到您的服务器上`apt-get install pdftk`。

目前，我认为它不存在任何使用 pdftk 的捆绑软件，但您可以使用类似`exec()`or的东西`passthru()`来解决问题。

例子 ：

```
exec('pdftk doc1.pdf doc2.pdf doc3.pdf output merged.pdf'); 
```

# wpf - 适用于 Visual Studio 2011 的 WPF 功能区应用程序模板

> ID：10734041
> 
> 赞同：0
> 
> 时间：2012-05-24T08:45:41.737
> 
> 标签：wpf, visual-studio, ribbon

因为 Ribbon 控件现在已经包含在 VS 2011 中，所以我想我不需要单独安装[它](http://www.microsoft.com/en-us/download/details.aspx?id=11877)，只需要添加对该 DLL 的引用即可。

但是，没有适用于 Visual Studio 2011 的[WPF 功能区应用程序模板](http://blogs.msdn.com/b/wpf/archive/2010/08/03/introducing-microsoft-ribbon-for-wpf.aspx)，因此没有 Net 4.5 框架。

我应该怎么做才能得到它？单独安装 Microsoft Ribbon for WPF October 2010？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:39:03.110

使用普通的 WPF 应用程序模板。在将`MainWindows.aspx`根替换为`<Window>`并`<RibbonWindow>`添加，作为第一个子项（或根布局控件的第一个子项） a `<Ribbon>`。

（然后您可以使用该项目以正常方式创建用户模板。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:53:50.273

功能区控件现已集成到 .net 4.5 框架中，请参阅[msdn](http://msdn.microsoft.com/en-us/library/bb386097%28v=vs.110%29.aspx)和[此处的参考](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon%28v=vs.110%29.aspx)

# performance - 选择没有循环的滚动行

> ID：10734051
> 
> 赞同：2
> 
> 时间：2012-05-24T08:46:16.820
> 
> 标签：performance, matlab, loops, matrix

我有个问题。假设我有矩阵 A =

```
 1     2     3
 4     5     6
 7     8     9
10    11    12 
```

我需要从 A 中选择 n 个滚动行，并将新矩阵 C 中的元素按行转置。我使用的循环是：

```
n = 3;     %for instance every 3 rows of A

B = []; 

for i = 1:n 

    Btemp = transpose(A(i:i+size(A,1)-n,:)); 

    B = [B;Btemp]; 

end

C=B'; 
```

并产生矩阵C，即：

C =

```
 1     2     3     4     5     6     7     8     9
 4     5     6     7     8     9    10    11    12 
```

这也是我想做的，但我可以在没有循环的情况下做同样的工作吗？

计算一个 3280x35 大小的 A 矩阵需要 4 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:01:46.373

我认为如果你进行初始化，你可以让它工作得非常快。另一个技巧是先进行转置，因为 MATLAB 使用列而不是行作为第一个索引。

```
tic
A =  reshape(1:3280*35,[3280 35])'; %# Generate an example A
[nRows, nCols] = size(A);

n = 3; %for instance every 3 rows of A
B = zeros(nRows-n+1,nCols*n);
At = A';
for i = 1:size(B,1)
    B(i,:) = reshape(At(:,i:i+n-1), [1 nCols*n]); 
end
toc 
```

经过的时间是

```
Elapsed time is 0.004059 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:29:30.137

我不会在循环中使用 reshape ，而是先将 A 转换为单行（实际上一列也可以，没关系）

```
Ar = reshape(A',1,[]); % the ' is important here! 
```

那么从 Ar 中选择元素非常简单：

```
[nrows, ncols] = size(A);
new_ncols = ncols*n;
B = zeros(nrows-(n-1),new_ncols);

for ii = 1:nrows-(n-1)
    B(ii,:) = Ar(n*(ii-1)+(1:new_ncols));
end 
```

尽管如此， , 的预分配`B`给你最大的改进：更多信息在[http://www.mathworks.nl/help/techdoc/matlab_prog/f8-784135.html](http://www.mathworks.nl/help/techdoc/matlab_prog/f8-784135.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:48:19.567

我现在没有 Matlab，但我认为你可以在没有这样的循环的情况下做到这一点：

```
reshape(permute(cat(A(1:end-1,:),A(2:end,:),3),[3,2,1]), [2, size(A,2)*(size(A,1) - 1)]); 
```

事实上这不会做你想要的吗？：

```
A1 = A(1:end-1,:);
A2 = A(2:end,:);
answer = [A1(:) ; A2(:)] 
```

# c - C/select 只从一个文件描述符中读取

> ID：10734058
> 
> 赞同：2
> 
> 时间：2012-05-24T08:46:44.947
> 
> 标签：c, sockets

新的一天，新的问题。不知何故，我发现自己几乎每天都在这里问问题，顺便说一句。感谢您迄今为止的支持。我实现了`select`从四个文件描述符中读取，但它只从一个文件描述符中读取。

我有一个测试应用程序将所有四个端口上的数据包发送到运行 C 程序的第二台机器：

```
data_packet to port[13501]
data_packet to port[13502]
data_packet to port[13503]
data_packet to port[13504]
data_packet to port[13501] 
```

等等...

使用`tcpdump`我可以看到，测试应用程序工作正常：

```
08:02:26.391843 IP 10.1.1.2.2000 > 10.1.1.40.13501: UDP, length: 28
08:02:27.391794 IP 10.1.1.2.2000 > 10.1.1.40.13502: UDP, length: 28
08:02:28.391820 IP 10.1.1.2.2000 > 10.1.1.40.13503: UDP, length: 28
08:02:29.391918 IP 10.1.1.2.2000 > 10.1.1.40.13504: UDP, length: 28 
```

但是我的应用程序只是从一个 FD（套接字）读取，一开始我在以下位置显示所有可用的文件描述符`fd_set`：

```
thread 1 started, pc_packet_receiver 
thread 2 started, pc_packet_sender 
sock_fd[9]
sock_fd[10]
sock_fd[11]
sock_fd[12]

received on sock_fd[12] on ETH0 on port 13503
received on sock_fd[12] on ETH0 on port 13503
received on sock_fd[12] on ETH0 on port 13503
received on sock_fd[12] on ETH0 on port 13503
[ctrlC] sockets closed, threads stopped... 
```

周围的实现`select`如下所示：

```
 FD_SET(sock_fd[i], &read_fds);
    fdmax = sock_fd[i];
}

for(i = 0; i < 4; i++) {
    printf("sock_fd[%d]\n",sock_fd[i]);
}

while(keepRunning) {

    bzero(&incoming_msg, MAX_PAYLOAD_LEN);
    bzero(&outgoing_msg, MAX_PAYLOAD_LEN);
    bzero(&peer, peer_len);

    readsocks = select(fdmax+1, &read_fds, NULL, NULL, NULL);

    if (readsocks < 0) {
        perror("select");
        exit(EXIT_FAILURE);
    } else if (readsocks == 0) {
        printf("nothing to read from\n");
        continue;
    }

    for(i = 0; i < 4; i++) {

        if(FD_ISSET(sock_fd[i], &read_fds)) {

            in_msg_len = recvfrom(sock_fd[i],
                incoming_msg,
                MAX_PAYLOAD_LEN,
                0,
                (struct sockaddr *) &client_addr,
                &sock_len_client);

            if (in_msg_len < 0) {
                perror("failed to receive data\n");
                exit(EXIT_FAILURE);
            }

            strncpy(outgoing_msg, incoming_msg, in_msg_len);

            if(getsockname(sock_fd[i], &peer, &peer_len) < 0) {
                perror("getsockname() failed");
                return (-1);
            }

            receiving_eth_port = (int)ntohs(peer.sin_port);

#if DBG_OUTPUT
            printf("received on sock_fd[%d] on ETH0 on port %d\n",   sock_fd[i], receiving_eth_port);
#endif 
```

我怎样才能实现`select`从所有套接字读取...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:54:01.853

`select()`改变你的`read_fds`！

在第一次调用后`select()`，`read_fds`可能只设置了一个 fd 位，因此您在所有剩余循环中仅检查此文件描述符。

`read_fds`解决方案是每次调用之前都重新构建`select()`。这听起来可能很乏味，但在处理`select()`.

# java - Tomcat 7 上的 Solr 设置（使用 Eclipse）

> ID：10734062
> 
> 赞同：0
> 
> 时间：2012-05-24T08:47:04.027
> 
> 标签：java, tomcat

我已经在 Windows 中的 tomcat 7 上配置了 solr，所以当我手动启动 tomcat 服务器并且当我点击 solr 时，它在我的浏览器中搜索得很好。

当我使用 main 方法编写一个 java 类时，结果被提取并显示在控制台上。

```
public class Code{
public static void main(String[] args) throws MalformedURLException, SolrServerException {
SolrServer solr = new CommonsHttpSolrServer("http://192.168.16.221:8080/solr");
ModifiableSolrParams params = new ModifiableSolrParams();
params.set("q", "subhash");

System.out.println("response = " + params);
QueryResponse response = solr.query(params);
System.out.println("response = " + response);
}
} 
```

但是当我在方法中使用相同的代码并使用其对象调用此方法时，会显示此错误

```
java.lang.NoClassDefFoundError: org/apache/solr/client/solrj/SolrServerException 
```

热切地等待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:16:21.573

您需要使用“java”的“-classpath”命令行选项来告诉它您需要的所有库都在哪里。默认的 CLASSPATH 仅包括系统类等。

因此，如果您的 Code.class 文件与 solr-xyzjar 一起在当前目录中，那么您需要执行以下操作：

```
$ java -classpath .:solr-x-y-z.jar Code 
```

如果 Solr 没有一堆自己的依赖项，我会感到惊讶，这意味着您需要在类似于上面的 -classpath 中包含一堆 JAR 文件。

这是 Java 101。

# iphone - 如何从我的 iPhone 设备接收数据 (file.txt)？

> ID：10734067
> 
> 赞同：0
> 
> 时间：2012-05-24T08:47:24.597
> 
> 标签：iphone, objective-c, file, copy

在我的应用程序中，我正在创建一个包含一些数据的 file.txt。该文件的路径是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)
NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"file.txt"]; 
```

如何以编程方式将该文件复制或发送到我的计算机？我的程序完成后如何复制该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:16:03.180

在您的 info.plist 中，将“应用程序支持 iTunes 文件共享”设置为“是”。

然后通过 iTunes 将文件保存在文档文件夹中。单击您的设备 -> 应用程序 -> 您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:01:26.500

如果您在手机和 PC 上安装了 Dropbox，您可以使用[Dropbox API](https://www.dropbox.com/developers)将文件从您的应用程序写入您 PC 上可访问的驱动器。

# javascript - 为什么 playn 只创建一个排列

> ID：10734077
> 
> 赞同：0
> 
> 时间：2012-05-24T08:47:58.690
> 
> 标签：javascript, gwt, browser, permutation, playn

在将 java 编译为 javascript 时，gwt 在默认的 6 种排列中创建了针对不同浏览器（chrome、firefox、opera、safari 即 webkit）的优化 javascript。对 playn 做同样的事情，它只会创建一个排列。但是为什么以及它适用于哪个浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:08:44.213

来自[`PlayN.gwt.xml`](http://code.google.com/p/playn/source/browse/html/src/playn/PlayN.gwt.xml)：“您的 PlayN 游戏应该在 Chrome、Firefox 3.6/4.0、Safari、IE9 中运行。”<br> **编辑：**这是针对使用 Canvas 或 WebGL 的 JS 代码；Flash 支持较旧的 IE（我不知道 Opera）。

它编译为单个排列，因为它使用运行时检测（烘焙到代码中，以及结果排列）而不是延迟绑定。

# c++ - 内存访问与内存复制

> ID：10734080
> 
> 赞同：6
> 
> 时间：2012-05-24T08:48:05.720
> 
> 标签：c++, performance, memory

我正在用 C++ 编写一个应用程序，该应用程序需要从多个线程中多次从同一内存中只读。我的问题是从性能的角度来看，为每个线程复制内存或为所有线程提供相同的指针并让它们都访问相同的内存会更好。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:50:26.590

您提供的有关目标系统等的少量信息没有明确的答案，但在普通 PC 上，最快的可能是不复制。

复制速度可能很慢的一个原因是，如果数据区域很大，它可能会导致缓存未命中。普通 PC 会在线程之间非常有效地缓存对同一数据区域的只读访问，即使这些线程碰巧在不同的内核上运行。

英特尔明确列出的缓存方法的好处之一是[“允许在共享缓存的单独内核上运行的线程有更多的数据共享机会”](http://software.intel.com/en-us/articles/software-techniques-for-shared-cache-multi-core-systems/)。即他们鼓励您不必对线程进行编程以显式缓存数据的做法，CPU 会为您完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:04:36.547

由于您特别提到了许多线程，我假设您至少有一个多插槽系统。通常，内存条与处理器插槽相关联。也就是说，一个处理器离它自己的内存库“最近”，并且需要与其他处理器的内存控制器通信以访问其他内存库上的数据。（这里的处理器是指套接字中的物理事物）

当您分配数据时，通常使用先写入策略来确定您的数据将被分配到哪些内存库，这意味着它可以比其他处理器更快地访问它。

因此，至少对于多个​​处理器（不仅仅是多个内核）来说，至少为每个处理器分配一个副本应该会提高性能。确保使用每个处理器/线程而不是从主线程分配/复制数据（利用首次写入策略）。您还需要确保线程不会在处理器之间迁移，因为那样您可能会失去与内存的紧密连接。

我不确定，为单个处理器上的每个线程复制数据会如何影响性能，但我想不复制可以提高共享更高级别缓存内容的能力，这些缓存在内核之间共享。

In any case, benchmark and decide based on actual measurements.

# excel - excel中的相对路径链接

> ID：10734082
> 
> 赞同：2
> 
> 时间：2012-05-24T08:48:07.180
> 
> 标签：excel, excel-formula

我有一个带有一些电子邮件链接的 excel 文件。我想要一个可点击的链接来下载这些文件。

将两个文件（excel 和电子邮件）放在同一个文件夹中，链接文件：//test.eml 或仅 test.eml 不会打开它，我需要使用绝对路径。有办法做到这一点吗？

谢谢

**编辑**

绝对路径是已知值，但无论如何，文件并没有打开。

```
=HYPERLINK("C:\Users\blanca.hernandez\Desktop\2012-05-24T09-41-11-0.00007.eml", "email") 
```

这很有趣，因为像

> 文件：//C:\Users\blanca.hernandez\Desktop\2012-05-24T09-41-11-0.00007.eml

给我一个clickabe链接来打开文件，但如果我想对其他目录做同样的事情，如

> file://C:\repository\project\mail\archive\2012\5\24\11\2012-05-24T09-41-11-0.00007.eml

无法打开。有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:07:32.363

您可以将该`Hyperlink(LinkLocation, FriendlyName")`功能与`Cell("filename")`

`Cell("filename")`返回包含引用的文件的完整文件名，如
`C:\Full\Path\[FileName.xlsm]SheetName`
仅获取路径使用
`LEFT(CELL("filename"),FIND("*", SUBSTITUTE(CELL("filename"), "\", "*", LEN(CELL("filename")) - LEN(SUBSTITUTE(CELL("filename"),"\","")))))`

`Hyperlink(LinkLocation, FriendlyName")`创建超链接

* * *

要链接到文件`test.eml`，完整的公式是

```
=HYPERLINK(LEFT(CELL("filename"),FIND("*",SUBSTITUTE(CELL("filename"),"\","*",LEN(CELL("filename"))-LEN(SUBSTITUTE(CELL("filename"),"\","")))))&"test.eml","Link to File") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:55:54.217

```
 MyPath = ActiveWorkbook.Path 
```

这将为您提供工作簿的路径

# ibm-bpm - 如何使用 tw.system.org 在 BPM 7.5 中获取用户全名？

> ID：10734086
> 
> 赞同：1
> 
> 时间：2012-05-24T08:48:20.550
> 
> 标签：ibm-bpm

我目前正在使用 IBM BPM 7.5。我无法使用 tw.system.org 获取用户的全名。如何使用 tw.system.org 在 BPM 7.5 中获取用户全名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:18:29.770

**tw.system.user_fullname**应该返回用户的全名。

我随身携带了一台 V8 并进行了快速检查，我确实看到了这个响应

[31/05/12 11:17:32:371 EST] 0000004e wle_javascrip I FUll 用户名是：管理员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-08T16:52:59.640

对于 IBM BPM（和 WLE）中的全名，您需要对 BPM 和 Websphere 进行一些修复。特别是在您使用的 WAS 版本（WAS v7）上。

有关详细信息，请参阅此参考：[http ://www-01.ibm.com/support/docview.wss?uid=swg21570176](http://www-01.ibm.com/support/docview.wss?uid=swg21570176)

本质上，您需要这些 WAS 修复程序：它们位于 WAS 7.0.0.21 及更高版本中`PM37925`。`PM18594`您还需要`wimconfig.xml`按照参考链接中的说明进行调整。

[在更高版本 (8.0.1) 中，请查看标题为“L DAP 用户全名同步](https://developer.ibm.com/answers/questions/170380/bpm-801-ldap-user-full-name-sync/?smartspace=bpm)”的 IBM dwAnswer 文章以及 8.5.x[的“用户全名显示不正确](https://developer.ibm.com/answers/questions/187102/incorrect-displaying-of-users-full-name-when-you-u/?smartspace=bpm)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T11:12:24.933

如果您使用的是 Process Designer ，请编写脚本进行测试

定义例如私有变量 FullName。

tw.local.tw.system.user_fullname;

# c# - 重定向后获取页面源代码

> ID：10734098
> 
> 赞同：0
> 
> 时间：2012-05-24T08:49:04.853
> 
> 标签：c#, asp.net, .net

我尝试了一些方法来获取以下网站的页面源代码`http://www.poppe-bedrijfswagens.nl`。我认为这个网站有一个自动重定向设置。

我尝试了以下方法：

```
WebClient client = new WebClient();
string sourceCode = "";
sourceCode = client.DownloadString(address); 
```

和

```
HttpWebRequest myWebRequest = (HttpWebRequest)HttpWebRequest.Create(address);
myWebRequest.AllowAutoRedirect = true;
myWebRequest.Method = "GET";

// make request for web page
HttpWebResponse myWebResponse = (HttpWebResponse)myWebRequest.GetResponse();
StreamReader myWebSource = new StreamReader(myWebResponse.GetResponseStream());
string myPageSource = myWebSource.ReadToEnd();
myWebResponse.Close(); 
```

我总是获得第一页的源代码，但我需要获得网站重定向到的页面的源代码。

重定向为`http://www.poppe-bedrijfswagens.nl`：

```
Type of redirect: “meta refresh” redirect after 0 second
Redirected to: http://www.poppe-bedrijfswagens.nl/daf-html/dealer_homepage.html 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:24:18.120

当使用 HTTP 状态代码 302 完成重定向时，AllowAutoRedirect 属性是相关的。元刷新在技术上不是重定向，因为您正在加载第一页。

您可以下载第一个页面，然后在 DOM 中搜索您感兴趣的元素`<meta http-equiv="refresh" content="0;url=HTTP://WWW.NEXT-URL.COM">`，然后下载您感兴趣的页面。

# batch-file - 协助更改 Windows 批处理脚本中的编码？

> ID：10734100
> 
> 赞同：0
> 
> 时间：2012-05-24T08:49:16.443
> 
> 标签：batch-file

我有一个批处理脚本，可以解压缩并重命名每个文件。
不幸的是，我现在需要保留它来自的 zip 文件的文件名。

示例 Jazz1.zip 现在解压缩，输出的文本文件变为`1.Jazz1.zip.txt`.
所以我想`%%F`成为`%%F - 4`——人物。

不幸的是，我希望它是`Jazz1.txt`。

```
::Setup the stage...
SETLOCAL ENABLEDELAYEDEXPANSION
SET folder=C:\P\DataSource2_W
SET count=1

::Action
CD "%folder%"
FOR %%F IN ("*.zip") DO (

 "C:\Program Files (x86)\WinZip\wzunzip" %%F
  MOVE *.txt "C:\P\DataSource2_W\TextFiles\!count!%%F.txt"
  SET /a count=!count!+1
)
ENDLOCAL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:26:31.433

我不明白您要对 COUNT 变量做什么，也不明白您如何处理包含多个 .TXT 文件的 ZIP 文件。

但我知道您需要每个 ZIP 文件的基本名称（不带扩展名的名称）。这很容易 - 只需使用 ~n 修饰符（`HELP FOR`从命令提示符键入以获取更多信息）。

因此，如果`%%F`= `Jazz1.zip`，则`%%~nF`产生`Jazz1`

# php - 访问 https 资源时，PHP 的 fopen() 是否可以防止典型攻击？

> ID：10734101
> 
> 赞同：5
> 
> 时间：2012-05-24T08:49:18.543
> 
> 标签：php, security, ssl, fopen, man-in-the-middle

如果我使用 PHP 的`fopen()`函数从 HTTPS 网站检索数据，这就是所谓的安全 HTTPS 连接。即它是否提供针对中间人攻击和窃听攻击的保护？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:59:19.123

不是默认的，没有。

它将始终提供某种形式的保护以防止简单的窃听攻击，因为数据将始终被加密（只要您连接的 SSL 服务器允许使用至少一个加密密码 - 是的，HTTPS 中允许使用空加密密码连接 :roll-eyes :) 但是，默认情况下，它不会防止中间人，因为它不验证服务器的证书，因此您无法确信您已连接到预期的服务器。

可以打开证书验证。为此，您需要提供根证书包并使用第四个参数`fopen`来指定流上下文。流上下文允许您修改流的行为。下面的示例切换会导致针对指定捆绑文件中的根证书验证证书。

```
$context = stream_context_create( array(
    'ssl' => array(
        'cafile'      => 'ca_bundle.crt',
        'verify_peer' => true
    )
));

$file = fopen( $url, 'r', false, $context ); 
```

# java - 如何在 Java 中正确覆盖 toString()？

> ID：10734106
> 
> 赞同：95
> 
> 时间：2012-05-24T08:49:31.773
> 
> 标签：java

听起来有点愚蠢，但我需要帮助我的`toString()`方法，这很烦人。我尝试在网上查找，因为`toString`它正在搞砸并且“找不到 Kid 构造函数 #2”，即使它在那里，我什至会做其他事情但它不起作用。好的，这很多，所以这是我的代码：

```
import java.util.*; 
   class Kid {  
      String name; 
      double height; 
      GregorianCalendar bDay; 

      public Kid () { 
         this.name = "HEAD";
         this.height = 1; 
         this.bDay = new GregorianCalendar(1111,1,1); 
      } 

      public Kid (String n, double h, String date) {
      // method that toString() can't find somehow
         StringTokenizer st = new StringTokenizer(date, "/", true);
         n = this.name;
         h = this.height;
      } 

      public String toString() { 
         return Kid(this.name, this.height, this.bDay);
      } 
   } //end class 
```

好的 所以我上面的 toString （我知道，我的第三个参数是关闭的，应该是一个字符串）是关闭的。如果我为第三件事硬编码一个值，它会变得混乱并说它找不到这个（在上面）。那么我怎样才能得到日期并打破它呢？

调用它的类如下

```
class Driver {   
   public static void main (String[] args) {   
      Kid kid1 = new Kid("Lexie", 2.6, "11/5/2009");   
      System.out.println(kid1.toString());
   } //end main method 
} //end class 
```

我尝试研究多个构造函数，但它确实没有帮助。我尝试研究`toString()`方法，并尝试使用`toString()`我之前创建的以前的方法逻辑，但这是全新的，所以它从来没有工作过。

帮助？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-24T08:52:48.003

`toString`应该返回`String`一个.

```
public String toString() { 
    return "Name: '" + this.name + "', Height: '" + this.height + "', Birthday: '" + this.bDay + "'";
} 
```

我建议您利用 IDE 的功能来生成该`toString`方法。不要手动编码。

例如，Eclipse 可以这样做，如果您只需右键单击源代码并选择`Source > Generate toString`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-02T01:31:59.353

Java toString() 方法

如果您想将任何对象表示为字符串，则 toString() 方法应运而生。

toString() 方法返回对象的字符串表示形式。

如果您打印任何对象，java 编译器会在内部调用该对象的 toString() 方法。因此，覆盖 toString() 方法，返回所需的输出，它可以是对象的状态等，取决于您的实现。

Java toString() 方法的优点

通过重写 Object 类的 toString() 方法，我们可以返回对象的值，所以我们不需要写太多代码。

没有 toString() 方法的输出

```
class Student{  
 int id;  
 String name;  
 String address;  

 Student(int id, String name, String address){  
 this.id=id;  
 this.name=name;  
 this.address=address;  
 }  

 public static void main(String args[]){  
   Student s1=new Student(100,”Joe”,”success”);  
   Student s2=new Student(50,”Jeff”,”fail”);  

   System.out.println(s1);//compiler writes here s1.toString()  
   System.out.println(s2);//compiler writes here s2.toString()  
 }  
}  

Output:Student@2kaa9dc
       Student@4bbc148 
```

您可以在上面的示例 #1 中看到。打印 s1 和 s2 打印对象的哈希码值，但我想打印这些对象的值。由于 java 编译器内部调用 toString() 方法，覆盖该方法将返回指定的值。让我们通过下面给出的示例来理解它：

```
Example#2

Output with overriding toString() method

class Student{  
 int id;  
 String name;  
 String address;  

 Student(int id, String name, String address){  
 this.id=id;  
 this.name=name;  
 this.address=address;  
 }  

//overriding the toString() method  
public String toString(){ 
  return id+" "+name+" "+address;  
 }  
 public static void main(String args[]){  
   Student s1=new Student(100,”Joe”,”success”);  
   Student s2=new Student(50,”Jeff”,”fail”);  

   System.out.println(s1);//compiler writes here s1.toString()  
   System.out.println(s2);//compiler writes here s2.toString()  
 }  
} 

Output:100 Joe success
       50 Jeff fail 
```

请注意，toString() 主要与 Java 中的多态性概念有关。在 Eclipse 中，尝试单击 toString() 并右键单击它。然后，单击 Open Declaration 并查看超类 toString() 的来源。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-23T03:38:26.910

正如其他人解释的那样，这`toString`不是实例化您的类的地方。相反，该`toString`方法旨在构建一个表示类实例值的字符串，至少报告存储在该对象中的最重要的数据字段。在大多数情况下，`toString`用于调试和日志记录，而不是用于您的业务逻辑。

要生成表示对象值的文本以显示给用户，请添加另一个方法。人们通常将方法命名为`getDisplayName`. 例如，[`DayOfWeek::getDisplayName`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/DayOfWeek.html#getDisplayName(java.time.format.TextStyle,java.util.Locale))和[`Month::getDisplayName`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html#getDisplayName(java.time.format.TextStyle,java.util.Locale))。

# `StringJoiner`

从 Java 8 及更高版本开始，最现代的实现方式`toString`是使用[`StringJoiner`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/StringJoiner.html)类。正如文档所说：

> StringJoiner 用于构造由分隔符分隔的字符序列，并且可以选择以提供的前缀开头并以提供的后缀结尾。

像这样使用：

```
@Override
public String toString ()
{
    return new StringJoiner(                           // In Java 8 and later, StringJoiner is used to construct a sequence of characters separated by a delimiter and optionally starting with a supplied prefix and ending with a supplied suffix.
                " | " ,                                // Delimiter
                Person.class.getSimpleName() + "[ " ,  // Prefix
                " ]"                                   // Suffix
            )
            .add( "name=" + name )                     // Append
            .add( "phone=" + phone )                   // Append
            .toString();                               // Convert entire sequence to a single `String` object.
} 
```

> 人[姓名=爱丽丝| 电话=555.867.5309]

# `record`

Java 16 带来了一种新方法来简要定义一个主要目的是透明且不可变地通信数据的类：[记录](https://openjdk.java.net/jeps/395)。

您仅通过列出每个成员字段的类型和名称来定义记录。编译器隐式创建构造函数、getter、`equals`&`hashCode`和`toString`。

## 默认实现`toString`

的默认实现`toString`包括每个成员字段。

```
public Kid ( String name , double height , LocalDate birthDate ) {} 
```

像任何其他对象一样实例化。

```
Kid alice = new Kid( "Alice" , 6.1d , LocalDate.of( 2019 , Month.April , 23 ) ) ;
String output = alice.toString() ; 
```

你可以选择用你自己的覆盖默认实现。考虑到记录作为简单数据载体的目的，通常不需要覆盖。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T08:53:31.170

您可以在 toString() 中创建新对象。采用

```
return "Name = " + this.name +" height= " + this.height; 
```

代替

```
return Kid(this.name, this.height, this.bDay); 
```

您可以根据需要更改返回字符串。还有其他方法可以存储日期而不是日历。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-24T08:53:50.577

您不能像调用普通方法一样调用构造函数，只能调用它`new`来创建新对象：

```
Kid newKid = new Kid(this.name, this.height, this.bDay); 
```

但是从你的 toString() 方法构造一个新对象并不是你想要做的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-09T13:23:45.520

以下代码是一个示例。基于相同的问题，而不是使用基于IDE的转换，是否有更快的方法来实现，以便将来发生更改，我们不需要一遍又一遍地修改值？

```
@Override
    public String toString() {
        return "ContractDTO{" +
                "contractId='" + contractId + '\'' +
                ", contractTemplateId='" + contractTemplateId + '\'' +
                '}';
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-29T15:56:06.630

如果您对单元测试感兴趣，那么您可以声明一个公共的“ToStringTemplate”，然后您可以对您的 toString 进行单元测试。即使您不对其进行单元测试，我也认为它“更干净”并使用 String.format。

```
public class Kid {

    public static final String ToStringTemplate = "KidName='%1s', Height='%2s', GregCalendar='%3s'";

    private String kidName;
    private double height;
    private GregorianCalendar gregCalendar;

    public String getKidName() {
        return kidName;
    }

    public void setKidName(String kidName) {
        this.kidName = kidName;
    }

    public double getHeight() {
        return height;
    }

    public void setHeight(double height) {
        this.height = height;
    }

    public GregorianCalendar getGregCalendar() {
        return gregCalendar;
    }

    public void setGregCalendar(GregorianCalendar gregCalendar) {
        this.gregCalendar = gregCalendar;
    }

    public String toString() { 
        return String.format(ToStringTemplate, this.getKidName(), this.getHeight(), this.getGregCalendar());
    } 
} 
```

现在您可以通过创建 Kid、设置属性并在 ToStringTemplate 上执行您自己的 string.format 并进行比较来进行单元测试。

使 ToStringTemplate 静态最终意味着事实的“一个版本”，而不是在单元测试中拥有模板的“副本”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-02T02:51:52.543

那么实际上你需要返回这样的东西，因为 toString 必须返回一个字符串

```
public String toString() {
 return "Name :" + this.name + "whatever :" + this.whatever + "";
} 
```

并且您实际上在构造函数中做错了，您将用户设置的变量设置为名称，而您需要做相反的事情。你不应该做的事

```
n = this.name 
```

你应该做什么

```
this.name = n 
```

希望这有帮助谢谢

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-20T15:53:45.267

我们甚至可以通过在类中创建一个新的 String 对象并在构造函数中为其分配我们想要的任何内容并在被覆盖的 toString 方法中返回它来编写这样的方法

```
public class Student{  
 int id;  
 String name;  
 String address;  
 String details;
 Student(int id, String name, String address){  
 this.id=id;  
 this.name=name;  
 this.address=address;  
 this.details=id+"  "+name+"  "+address;  
 }  

//overriding the toString() method  
public String toString(){ 
  return details;  
 }  
 public static void main(String args[]){  
   Student s1=new Student(100,"Joe","success");  
   Student s2=new Student(50,"Jeff","fail");  

   System.out.println(s1);//compiler writes here s1.toString()  
   System.out.println(s2);//compiler writes here s2.toString()  
 }  
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-01-23T14:18:25.210

简洁明了的方法是使用 Lombok 注释。它具有`@ToString`注释，它将生成该`toString()`方法的实现。默认情况下，它将按顺序打印您的班级名称以及每个字段，以逗号分隔。您可以通过将参数传递给注释来轻松自定义输出，例如：

```
@ToString(of = {"name", "lastName"}) 
```

这相当于纯Java：

```
public String toString() {
        return "Person(name=" + this.name + ", lastName=" + this.experienceInYears + ")";
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-10T00:01:38.400

如果您只是`toString()`用于调试[DTO](https://stackoverflow.com/q/1051182/86967)，则可以使用以下内容自动生成*人类可读*的输出：

```
import com.fasterxml.jackson.databind.ObjectMapper;
...
public String toString() {
    try { return new ObjectMapper().writeValueAsString(this); }
    catch (Exception e) { return "{ObjectMapper failed}"; }
} 
```

* * *

*但是，如果 DTO 可能包含 PII（不应在日志中捕获），则这不适用于生产部署。*

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-06T15:03:34.273

总是有简单的方法：**右键单击**>**生成**> **toString()** > 选择你想要的模板。 [![在此处输入图像描述](../Images/6afd010d25a99bf459913ffb40879069.png)](https://i.stack.imgur.com/F3kyE.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-08T09:23:07.347

我认为最好的方法是使用谷歌 gson 库：

```
 @Override
public String toString() {
    return new GsonBuilder().setPrettyPrinting().create().toJson(this);
} 
```

或 apache commons lang 反射方式

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-08T09:30:19.337

1.  如果您使用记事本：那么

    ```
    public String toString(){

     return ""; ---now here you can use variables which you have created for your class

    } 
    ```

2.  如果您使用的是 Eclipse IDE，请按

    ```
    -alt +shift +s 
    ```

    -单击覆盖 toString 方法，您将获得选择要选择的变量类型的选项。

# c++ - SCons out of source build 仅适用于可执行程序，不适用于目标文件

> ID：10734107
> 
> 赞同：1
> 
> 时间：2012-05-24T08:49:37.713
> 
> 标签：c++, scons

我有以下 SCons 配置：

```
current_directory
|-<.cpp files>
|-<.h files>
|-SConstruct
|-SConscript
|-bin
  |-<empty> 
```

我想构建我的源文件并将可执行文件和目标文件放入`bin`目录中。

这是我的`SConstruct`文件中的内容：

```
SConscript('SConscript', variant_dir='bin', duplicate=0) 
```

在`SConsript`文件中我有：

```
debug_environment.Program(target = 'SsaTest', src_files, LIBS=libraries, LIBPATH=libraries_path) 
```

`scons`当我使用命令构建时，我`SsaTest`在目录中获得可执行文件`bin`（根据需要），但目标文件保留在当前目录中。

我怎样才能`.o`在目录中构建文件`bin`？

非常感谢。

**编辑：完整`SConscript`文件**（请原谅我`xxx`）

```
import os

# This is correctly Exported()
Import('debug_flags')

# Paths to header files
headers_paths = ['#/../../xxx/include/',
                 '#/../../../xxx/include/',
                 '#/../../xxx/include/',
                 '#/../../xxx/include/',
                 '#/../../xxx/include/']

# Path to source files
src_folder = '#./'

# Source files list
src_files = ['xxx.cpp',
             'xxx.cpp',
             'xxx.cpp',
             'xxx.cpp',
             'xxx.cpp']

# Prepend the relative path to each source file name
src_files = [src_folder + filename for filename in src_files]

libraries = ['xxx', 'xxx', 'xxx', 'xxx', 'xxx', 'xxx', 'xxx', 'xxx']

libraries_path = ['#/../../xxx/lib',
                  '#/../../../xxx/bin', 
                  '#/../lib', 
                  '#/../../xxx/lib', 
                  '#/../../xxx/lib', 
                  '#/../../xxx/lib']

# Debug environment
debug_environment = Environment(CC = 'g++', CCFLAGS=debug_flags, ENV = os.environ, CPPPATH=headers_paths); 
# Executable build command
debug_environment.Program(target = 'SsaTest', src_files, LIBS=libraries, LIBPATH=libraries_path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:25:21.330

不建议对源文件使用“#”，因为您有自己的情况，scons 无法使用变体目录正确处理它，以及结果如何在放置源的目录中创建目标文件。

因此，我尝试使用相同的配置构建您的示例并且没有问题：

```
#SConsctruct
SConscript('SConscript', variant_dir='bin', duplicate=0)

#SConscript
src_files = Glob('*.cpp')
debug_environment = Environment()
debug_environment.Program('SsaTest', src_files) 
```

因此，所有目标文件都在 bin 目录中生成。

最后，与源文件的关系目录然后使用变体目录没有问题。但是包含目录取决于变体目录。配置例如：

```
build
app
--SConscript
--src
----*.h
----*.cpp
SConstruct

#SConstruct
rootEnv = Environment()
Export('rootEnv')
SConscript('app/SConscript', variant_dir='build', duplicate=0) 
```

你的 SConscript 看起来像这样：

```
Import('rootEnv')
env = rootEnv.Clone()
env.Append(CPPPATH = ['#app/src'])
env.Program('app', Glob('src/*.cpp')) 
```

'#app/src' - where # is very important when using variant dir, because if would be app/src, build command will be looking: '-Ibuild/app/src' (adding variant dir before include path). But adding '#' command will be looking correctly : '-Iapp/src'.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:17:05.517

在您的 SConscript 中突出的一件事是您如何在每个源文件的路径前面加上`#./`.

```
# Path to source files
src_folder = '#./' 
```

为什么在该路径中使用点，它不是必需的？`#/`像使用其余路径一样尝试以下操作，如下所示：

```
# Path to source files
src_folder = '#/' 
```

另一种选择是将源文件和相应的 SConscript 放在它自己的子目录中。不清楚为什么您将 SConstruct、SConscript 和源文件都放在一个目录中。要么创建一个子目录，要么在不需要时考虑删除 SConscript。

在 SConstruct 的 SConscript() 函数调用中，将 variant_dir 称为“#bin”而不是“bin”。不确定这是否会有所帮助，但它是更好的做法。

在使用 Repository() SCons 函数引用[此处](https://stackoverflow.com/q/10209961/1158895)提到的源文件之前，我已经看到了这种行为。

此外，这是题外话，但如果您的包含和库路径（headers_paths 和 library_path 变量）在项目目录结构之外，您可以考虑使用绝对路径。就我个人而言，我发现将相对路径与多个`../`路径一起使用是相当难看的。

# android - 在 sencha 中使用模板

> ID：10734109
> 
> 赞同：1
> 
> 时间：2012-05-24T08:49:52.723
> 
> 标签：android, iphone, templates, extjs

我需要创建一个简单的个人资料页面。每当用户成功登录时，他将被重定向到个人资料页面，其中将显示他/她的信息和照片。我在下面尝试

```
Ext.define('casta.view.Intro', {
  extend: 'Ext.tab.Panel',
  xtype:'intro',
  //need to call url and render json data to the template below     
  config: {
        tpl: [
                '<tpl for=".">',
                    '<div class="holder">',
                            '<div class="avatar"><img src="{profile_image_url}" /></div>',
                            '<div class="h-content">',
                                '<h2>{user}</h2>',
                                '<p>{text}</p>',
                            '</div>',
                    '</div>',
                '</tpl>'
            ]  
  }
}); 
```

json数据如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{"date_joined": "2012-05-18T15:44:54", "first_name": "", "id": 1, "last_login": "2012-05-18T15:44:54", "last_name": "", "resource_uri": "/api/casta/user/1/", "username": "admin"}, {"date_joined": "2012-05-21T12:05:00", "first_name": "", "id": 29, "last_login": "2012-05-21T12:05:00", "last_name": "", "resource_uri": "/api/casta/user/29/", "username": "sumit"}]} 
```

我需要调用 URL 来返回 json 并将其呈现在模板上。

帮帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:37:17.467

尝试这样的事情

[http://www.sencha.com/forum/archive/index.php/t-117847.html](http://www.sencha.com/forum/archive/index.php/t-117847.html)

```
Ext.setup({
onReady: function() {
var itemInfo = new Ext.XTemplate(
'<ul>',
'<tpl for=".">',
'<li>{name}</li>',
'</tpl>',
'</ul>'
);
var content = new Ext.Panel({
fullscreen: true,
scroll: 'vertical',
tpl: itemInfo
});

Ext.util.JSONP.request({
url: 'http://demo.webfactory.mk/',
callbackKey: 'callback',
params: {

action: 'retrieve'
},
callback: function(data) {

data = data.result;
content.update(data);

}
});
}
}); 
```

# twitter-bootstrap - Bootstrap ScrollSpy 似乎正在破坏 Bootstrap 选项卡

> ID：10734113
> 
> 赞同：3
> 
> 时间：2012-05-24T08:50:08.213
> 
> 标签：twitter-bootstrap

我一直在尝试在使用标签的页面上实现 ScrollSpy。

这是我的身体标签：

```
<body data-spy="scroll" data-target=".subnav" data-offset="50"> 
```

这是我的标签 HTML：

```
<div class="div-tabs tabbable">
    <ul class="nav nav-tabs" id="myTab">
        <li class="active"><a href="" data-toggle="tab" data-target="#home">Home</a></li>
        <li><a href="" data-toggle="tab" data-target="#profile">Profile</a></li>
    </ul>
    <div id="myTabContent" class="tab-content">
        <div class="tab-pane active" id="home">
            <div class="padding16">
                   ...
            </div>
            <div class="button-bar">
                <a href="#" class="btn"><i class="icon-user"></i>Button</a> <a href="#" class="btn btn-primary">
                    <i class="icon-time icon-white"></i>Button</a> <a href="#" class="btn btn-warning">Button</a>
                <a href="#" class="btn btn-danger">Button</a> <a href="#" class="btn btn-success">Button</a>
            </div>
        </div>
        <div class="tab-pane " id="profile">
            <div class="padding16">
               ...
            </div>
            <div class="button-bar">
               <a href="#" class="btn btn-warning">Button</a>
                <a href="#" class="btn btn-danger">Button</a> <a href="#" class="btn btn-success">Button</a>
            </div>
        </div>
    </div>
</div> 
```

如果我`data-spy="scroll" data-target=".subnav" data-offset="50"`从标签中删除，我的标签工作正常。启用 scrollspy 后，我在 Chrome 开发工具中收到此错误：

未捕获的类型错误：无法读取 null 的属性“顶部”

知道有什么问题吗？看起来 ScrollSpy 导致引导选项卡找不到对 HREF 属性的引用。

我正在使用 Bootstrap 2.0.2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T00:22:28.277

当我在导航中有指向标记中尚不存在的锚点的链接时，我看到了此错误。例如，如果导航栏中的链接链接到`#about`，但页面上不存在带有 的元素`id="about"`，您将看到此错误。

# .net - VSTO x64 运行时已安装但找不到

> ID：10734114
> 
> 赞同：2
> 
> 时间：2012-05-24T08:50:09.370
> 
> 标签：.net, wix, registry, 64-bit, 32bit-64bit

我创建了一个为 Windows 2010 部署插件的 WiX 安装程序。目标系统当前安装了 x64 Win 和 Office。我浏览了几个微软网站，告诉我我需要一个 x64 安装程序和运行时（因为加载到当前单词运行的过程中）。此安装程序使用以下语句检查 VSTO 运行时是否存在：

```
<?if $(var.Platform)=x64 ?>
<?define win64Flag = "yes"?>
<?else ?>
<?define win64Flag = "no"?>
<?endif ?>

<Property Id="VSTORUNTIMEREDIST">
    <RegistrySearch Id="VSTORuntimeRedist" Root="HKLM" Key="SOFTWARE\Microsoft\vsto runtime setup\v4R\VSTORFeature_CLR40" Name="Version" Type="raw" Win64="$(var.win64Flag)"/>
</Property>

<Property Id="OFFICERUNTIME">
    <RegistrySearch Id="OfficeRuntime" Root="HKLM" Key="SOFTWARE\Microsoft\VSTO Runtime Setup\v4" Name="Version" Type="raw" Win64="$(var.win64Flag)"/>
</Property>
<Condition Message="The Visual Studio 2010 Tools for Office Runtime is not installed. Please install the Office Runtime.">
    <![CDATA[Installed OR VSTORUNTIMEREDIST>="10.0.30319" OR OFFICERUNTIME>="10.0.21022"]]>
</Condition> 
```

实际上它适用于我的安装程序的 x86 版本，但是在 x64 模式下构建，它在任何时候都无法在注册表中找到 x64 条目（即使安装了运行时）。我已经尝试卸载并重新安装运行时（实际上重新启动），但它不起作用。

我还删除了检查以安装我的插件，但它并没有真正加载。

因此我的问题是，如果有任何已知的错误问题或我使用了错误的注册表项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:24:42.823

在 x64 系统上，WoW64 应用程序被透明地重定向到`Wow6432Node`注册表节点，因此它们实际上是在寻找`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VSTO Runtime Setup`它所在的密钥。但是真正的 x64 应用程序会查看真正的`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VSTO Runtime Setup`节点，而关键自然是不存在于那里。这很可能会导致您的安装程序失败。因此，对于 x64 安装程序，您需要指定带有`Wow6432Node`路径部分的完整节点。

这称为注册表反射，并[在此处详细介绍](http://msdn.microsoft.com/en-us/library/aa384235%28v=vs.85%29.aspx)。

# linux - 第一次执行后自行删除的脚本

> ID：10734116
> 
> 赞同：0
> 
> 时间：2012-05-24T08:50:20.563
> 
> 标签：linux, shell

我想开发一个在执行结束时自行删除的 shell 脚本。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:11:20.287

简直了`[[ -f "$0" ]] && rm "$0"`。可能想要防止写入失败等。

# java - 更好的模式观察者？

> ID：10734123
> 
> 赞同：1
> 
> 时间：2012-05-24T08:50:45.767
> 
> 标签：java, design-patterns, inheritance, listener

我使用模式观察者，但发现从具有监听器的类继承变得越来越困难。如果在继承的类中也存在侦听器，则很难控制哪些侦听器工作。是否存在类似于观察者但更好地控制听众的模式？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:56:33.333

似乎您不想使用继承来实现观察者模式。

如果我在上述观点上没有弄错，那么您总是可以使用接口来实现这一点。只需为 Subject 和 Observer 声明两个接口，然后让您的类实现它们。

例如，您的主题可能看起来像这样 -

```
public interface Subject {
    public void registerObserver(Observer o);
    public void removeObserver(Observer o);
    public void notifyObservers();
} 
```

观察员——

```
public interface Observer {
    public void update(int age, float salary);    // imaginary parameters.....
} 
```

然后，您的具体主题可以从上述`Subject`接口继承 -

```
public class SubjectImpl implements Subject{
    private ArrayList observers;

    public void registerObserver(Observer o){
        observers.add(o);
    }
    public void removeObserver(Observer o){
        int i = observers.indexOf(o);
        if (i >= 0) {
            observers.remove(i);
        }
    }
    public void notifyObservers(){
        for (int i = 0; i < observers.size(); i++) {
            Observer observer = (Observer)observers.get(i);
            observer.update(30, 200.50);    // imaginary arguments, provide your own...
        }
    }
} 
```

和你的`Observer`实施 -

```
public class ObserverImpl implements Observer{

    public ObserverImpl(Subject s){
        s.registerObserver(this);
    }

    public void update(int age, float salary){
        // implementation
    }
} 
```

然后你可以使用 -

```
Subject s = new SubjectImpl();
Observer o = new ObserverImpl(s);

// do whatever you want now 
```

这种方法肯定比`Class Inheritance`因为在这种情况下您的主题和观察者都可以从其他类继承，从而提供更灵活的设计。

如果您的问题是关于在不继承的情况下提供 java 侦听器实现，那么您可以为此目的使用[匿名类-](http://www.cs.rit.edu/~tmh/courses/allJava/Anonymous.html)

```
ActionListener listener = new ActionListener() {
    public void actionPerformed(ActionEvent ae) {
        System.out.println("Anonymous class example");
    }
};

yourButton.addActionListener(listener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:06:07.353

[Signals and Slots](http://en.wikipedia.org/wiki/Signals_and_slots)是对观察者设计模式的改进。

[如此处所述，](http://qt-project.org/doc/qt-4.8/signalsandslots.html)它在 Qt (C++) 中被广泛使用。

这是[Java 的 Signals and Slots](https://stackoverflow.com/q/6202803/1158895) and an implementation in [Java](http://freecode.com/projects/javasignalslot)的相关问题。

# c++ - C++ 中的模板在列表时删除 >

> ID：10734125
> 
> 赞同：0
> 
> 时间：2012-05-24T08:50:56.077
> 
> 标签：c++, list, templates, generics, delete-operator

我正在尝试使用模板开发一个通用列表。该列表由指针数组 T* 复合而成，它是一个用于获取元素数量的整数和一些方法（查找、包含...）。重要的是说我不能使用 std::library。

例如，当我使用 a 时，我的问题就出现了`List<List<int> >`。

其中一种方法是调整`T*`指针数组的大小，所以当我有这个时，`List<List>>`我创建了一个比它更大的辅助指针，`T*`并将内容复制`T`到带有`memcpy`. 内部指针 ( `list.T.T`) 也被复制为指针，而不是内存复制，所以当我删除`T*`指针并重新签名时`T=auxpointer`。我已经在我的`new T`.

```
template <typename T>
void CGenericList<T>::resize()
{
    T* auxPointer = new T[this->maxElements*2];
    memcpy (auxPointer,this->pointer,this->maxElements*sizeof(T));
    delete[] this->pointer;     
    this->pointer=auxPointer;
    this->maxElements=2*this->maxElements;
}

template<class T>
class CGenericList
{
public:
    T* pointer;
    int N;
    int maxElements;

    CGenericList();
    CGenericList(int);
    ~CGenericList();
    void resize();  
} 
```

任何人都可以给我任何提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:27:59.130

您发布的代码显示了一些问题。

```
T* auxPointer = new T[this->maxElements*2]; 
```

在这里，您分配一个新的 maxElements*2 数组 - 并调用默认构造函数。在您的情况下，这可能会初始化所有 Listelements。

```
memcpy (auxPointer,this->pointer,this->maxElements*sizeof(T)); 
```

之后，您将旧数组的内容复制到新分配内存的内存区域。这会用旧数组中的指针覆盖指向刚刚创建的 Listelements -> 内存泄漏的指针。

```
delete[] this->pointer; 
```

然后你删除数组，这会调用所有元素的析构函数。希望这会删除他们的内容并释放他们的记忆。

```
this->pointer=auxPointer; 
```

最后，您重新分配新创建的数组。列表中的指针指向旧的列表元素，并且不再指向未分配的内存（因为通过 delete[] 调用了析构函数）。

一个解决方案是为您的列表实现一个复制构造函数，并为数组中的所有元素调用它。（DeepCopy）当然还有一个赋值运算符，我差点忘了；）

```
CGenericList(const CGenericList<T>& copy);
CGenericList<T>& operator= (const CGenericList<T>& rhs) 
```

可能是这样的 - 请注意，这是“asis”，绝对不是异常安全的；）

```
template<class T>
class CGenericList
{
public:
    T* pointer;
    int N;
    int maxElements;

    CGenericList();
    CGenericList( const CGenericList<T>& copy );
    CGenericList<T>& operator=(const CGenericList<T>& rhs);
    CGenericList(int);
    ~CGenericList();
    void resize();
};

template <typename T>
void CGenericList<T>::resize()
{
    T* auxPointer = new T[this->maxElements*2];
    for(int i=0; i < this->maxElements; i++)
    {
        auxPointer[i] = this->pointer[i];
    }
    delete[] this->pointer;
    this->pointer = auxPointer;
    this->maxElements = this->maxElements*2;
}

template <typename T>
CGenericList<T>::CGenericList()
    :N(0)
    ,maxElements(0)
{
    this->pointer = new T[1];
}

template <typename T>
CGenericList<T>::CGenericList(const CGenericList<T>& copy)
    :N(copy.N)
    ,maxElements(copy.maxElements)
{
    T* temp = new T[copy.maxElements];
    for(int i=0; i<N; i++ )
    {
        temp[i] = copy.pointer[i];
    }
    this->pointer = temp;
}

template <typename T>
CGenericList<T>& CGenericList<T>::operator=(const CGenericList<T>& rhs)
{
    if( this != &rhs )
    {
        delete[] this->pointer;
        this->pointer = new T[rhs.maxElements];
        for(int i=0; i<rhs.maxElements; i++)
        {
            this->pointer[i] = rhs.pointer[i];
        }
    }
    return *this;
}

template <typename T>
CGenericList<T>::CGenericList(int size)
    :N(0)
    ,maxElements(size)
{
    this->pointer = new T[size];
}

template <typename T>
CGenericList<T>::~CGenericList()
{
    delete[] this->pointer;
}

int main(int /*argc*/, char */*argv*/[])
{
    CGenericList<CGenericList<int> > list;
    list.resize();

    return 0;
} 
```

如果你不喜欢使用 stl 你可以看看[stlport](http://stlport.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:24:15.107

你`resize`不是例外安全的。您首先删除现有数组，然后为不同大小分配内存，然后分配 auxPointer。
遇到您遇到的问题，请检查以下方法是否有帮助。

```
T* auxPointer = new T[this->maxElements*2];       
for ( int i =0; i < this->maxElements; ++i)
   std::swap(auxPointer[i], pointer[i]);

delete[] this->pointer;    
this->pointer = auxPointer;  
this->maxElements=2*this->maxElements; 
```

# javascript - javascript - 更改链接的href

> ID：10734130
> 
> 赞同：2
> 
> 时间：2012-05-24T08:51:30.860
> 
> 标签：javascript, hash, href

我有一个包含 jQuery-Tabs 的网站，所以我的 url 中有一个标签来显示所需的标签：

```
www.abc.de/site#tab4 
```

在这个网站上，我有一个如下所示的链接：

```
<a href="/site.html?option=1" name="optionslink" id="optionslink" onclick="javascript:test()">LINKTEXT</a> 
```

通过此链接，用户可以选择产品的选项。该网站在点击时重新加载。我想在读取 url 中的主题标签后单击字符串来实现这一点，然后这个字符串将被添加到 url 或链接中......

我的功能如下所示：

```
function test() {
var info=window.location.hash;
alert(info);
document.getElementById("optionslink").href+info;
return true;
} 
```

到目前为止，单击该功能时，我会收到一个警报弹出窗口，其中显示了正确的主题标签及其字符串。但是网站在没有添加标签+字符串的情况下被重新加载。它看起来像这样：

```
www.abc.de/site.html?option=1 
```

它应该看起来像：

```
www.abc.de/site.html?option=1#tab4 
```

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:54:03.097

您没有更改 href 属性。尝试

```
document.getElementById("optionslink").href += info; 
```

您的代码`document.getElementById("optionslink").href+info;`没有任何效果，因为只有连接，但没有分配给 href 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:54:56.207

只需更改位置：

```
function test() {
    var info=window.location.hash;
    window.location = document.getElementById("optionslink").href + info;
    return false;
}

<a href="/site.html?option=1" name="optionslink" id="optionslink" onclick="return test();">LINKTEXT</a> 
```

* * *

另一件事，您将当前锚点传递给函数，并节省 DOM 查询开销：

```
function test(anchor) {
    var info=window.location.hash;
    window.location = anchor.href + info;
    return false;
}

<a href="/site.html?option=1" name="optionslink" 
   id="optionslink" onclick="return test(this);">LINKTEXT</a> 
```

* * *

**请注意，完全不使用`inline scripts`是 javascript 事件的最佳实践。**

你应该读一下，你可以在[**MDN**](https://developer.mozilla.org/en/DOM/element.addEventListener)`addEventListener`中读到它[](https://developer.mozilla.org/en/DOM/element.addEventListener)

# entity-framework - 实体框架 - 从导航属性中删除虚拟关键字

> ID：10734131
> 
> 赞同：2
> 
> 时间：2012-05-24T08:51:40.647
> 
> 标签：entity-framework, entity

我正在使用实体框架和数据库优先方法，以及 EF 4.x DBContext Generator。我所有的实体类都具有标记为“虚拟”的导航属性。我想从我的所有实体类中删除 virtual 关键字。大约有 350 个实体类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:01:07.047

您必须修改 T4 模板 (.tt) 文件以删除虚拟关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:55:29.170

删除 virtual 将意味着您无法对实体框架使用延迟加载。在我看来，延迟加载的范围非常有限，并且大多被误用（这通常会导致性能问题）。但是请注意，当您关闭它时，您可能需要调整代码以在检索数据时手动加载其他导航属性。您可以使用 . `Include`在您的 EF 查询中

要删除虚拟标志，您可能需要在 EF 生成器中禁用延迟加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:25:26.677

您可能想尝试这个 VS 扩展，它添加（除其他外）对虚拟修饰符的精细控制： [EF Designer Extender](http://visualstudiogallery.msdn.microsoft.com/aec90b18-916f-4316-a9c2-ba3d61ab9ae5)

# iphone - SDImageCache 返回错误的图像

> ID：10734133
> 
> 赞同：0
> 
> 时间：2012-05-24T08:51:55.163
> 
> 标签：iphone, ios5

这是我的代码：

```
 if(![[SDImageCache sharedImageCache] imageFromKey:@"ICON_search"])
        {{
    [[SDImageCache sharedImageCache] storeImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"URL"]]] forKey:@"ICON_search" toDisk:YES];
} 
```

第一次运行时，它给了我正确的图像使用

```
[[SDImageCache sharedImageCache] imageFromKey:@"ICON_search"] 
```

但是现在我正在重新启动我的应用程序，`[[SDImageCache sharedImageCache] imageFromKey:@"ICON_search"]`返回带有白色背景的图像。

谁能告诉我为什么它在第一次执行后返回我的白色背景图像。

# sql-server-2008 - 意外的 CPU 峰值

> ID：10734134
> 
> 赞同：-1
> 
> 时间：2012-05-24T08:51:59.343
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008 R2。在开发环境中，我有时会看到 CPU 处于负载状态几分钟（*大约 55%-80%，而正常为 1-2%。是的，我的开发环境中的正常负载几乎没有！*）。在此 CPU 压力时间期间，自动化测试有时会出现超时错误。

刚刚在活动监视器中遇到超时。看起来像这样： ![在此处输入图像描述](../Images/a872bdc042eeabf56fe6a361c6be7098.png)

通常在这些压力时刻，它看起来像这样： ![在此处输入图像描述](../Images/f7553925b9a3680dd8b37efe7f72a022.png)

问题是我不明白为什么会这样！有不断执行的自动化测试，但它们并没有造成繁重的工作量。在性能测试期间，系统运行良好，如果速度变慢，总会有很好的解释。

我试图通过

*   运行跟踪，但在那些 CPU 峰值期间，“没有什么特别的”发生。没有昂贵的查询。
*   使用 SQL 活动监视器 - 一切看起来都很正常，除了 CPU（就像 1-2 个等待任务、低 I/O、~5 个请求/秒）。最近昂贵的查询并不那么昂贵。
*   查询数据。使用著名的 sp_WhoIsActive 和 sys.dm_exec_requests。据我了解 - 没有什么不寻常的了..

关于我的服务器

*   数据库数量很少，我确实很了解它们。
*   使用服务代理。
*   Trace 大部分时间都在运行。

我确实怀疑是一些后台进程造成了问题。但我真的不明白..你能给出一些提示/想法如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:31:57.157

我也遇到过同样的问题，并且向微软提出了案例。

微软的家伙告诉 SQL DB 端没有问题，如果 cpu 是尖峰的。最后问题由 Microsoft 解决，实际上问题是在 IIS 上，而不是 SQL Server。

每 29 天需要重新启动 IIS，以便您在应用程序上获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:58:21.087

它可能是一些内部 SQL Server 作业。就像一个大索引重建。

等待尖峰和`run sp_who2 'active'`。检查列 CPU 时间。

实际上，您如何 100% 确定 SQL 负责？这不是一个问题吗？

# php - PHP 电子邮件输出更改

> ID：10734138
> 
> 赞同：1
> 
> 时间：2012-05-24T08:52:04.470
> 
> 标签：php, email, hide

我正在寻找一些脚本帮助，使变量的电子邮件输出在@之前部分隐藏，就像我有电子邮件一样

```
verysecretemail@gmail.com 
```

而且我需要在输出中“随机”放星，例如：

```
ver***@gmail.com
verys*********************@gmail.com
ve*@gmail.com 
```

但不喜欢：

```
ver***mail.com
verysecre****ail.com 
```

只是随机使用星星（或者可能是静态的）它不会在 @ 字符之前出现

我尝试过这样的事情

```
$output = substr_replace($val, '********', 2, 7); 
```

其中 $val = $email;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:57:24.253

```
$mail = "verysecretemail@gmail.com";

$mailparts = explode("@", $mail);

$output = substr($mailparts[0],0,rand(2,5)) . str_repeat("*",rand(1,16));
$output .= "@" . $mailparts[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:58:11.603

怎么样：

```
$asterisks = "";
for($i = 0; $i < strlen(substr($address, 0, strpos($address, "@"))); $i++)
    $asterisks = $asterisks . "*"; //This loop sets the required number of asterisks
$address = str_replace(substr($address, 0, strpos($address, "@") - 1), $asterisks); 
//everything before the '@' is replaced by an asterisk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:30:29.800

这是使用子字符串执行此操作的更易于阅读的方法：

```
$emails = array(
    'verysecretemail@gmail.com',
    'example@example.org',
    'someotheremail@example.com',
);

function obfuscate_email($email) {
    $at_position = strpos($email, '@');
    $chop = rand(1, $at_position - 1);
    $mask = str_repeat('*', rand(4, 8));

    $partial_address = substr($email, 0, $chop);
    $domain = substr($email, $at_position);
    return $partial_address . $mask . $domain;
}

foreach($emails as $email) {
    var_dump(obfuscate_email($email));
}

// Output:
// string(18) "ver*****@gmail.com"
// string(24) "exam********@example.org"
// string(17) "s****@example.com" 
```

可以在[http://ideone.com/21HKd找到一个运行示例](http://ideone.com/21HKd)

如您所见，我已将代码分解为一个函数，以使其更易于使用。该功能将为您提供一个模糊的电子邮件地址：

*   原始地址的随机印章（考虑到它的长度）
*   星号的随机掩码

如果我自己实际实现这个功能，那么我会确保我试图混淆的电子邮件地址的长度超过 3 个字符，并`$chop`适当地调整长度，这样你就可以确保尽可能地隐藏。

# linux - 如何找到属于内核的地址

> ID：10734141
> 
> 赞同：0
> 
> 时间：2012-05-24T08:52:18.887
> 
> 标签：linux, insert, linux-kernel, object-address

我需要找到内核的地址进行测试，我想从1394防火墙中插入一些代码到内核中，但是我不知道如何找到属于内核的地址？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:07:50.413

我将从查看[Documentation/debugging-via-ohci1394.txt 开始](http://www.mjmwired.net/kernel/Documentation/debugging-via-ohci1394.txt)。可以通过 Firewire 调试内核，所以大概也可以通过这种方式注入代码。

您愿意解释一下您要完成的工作吗？我能想到的几乎只有邪恶。

# java - 在 Java 中填充 List 需要多少内存和时间

> ID：10734144
> 
> 赞同：-3
> 
> 时间：2012-05-24T08:52:24.907
> 
> 标签：java

我是 Java 新手。我需要使用 Java List 开发 Java Server Faces 网页，其中包含一百万个字符串键。我的问题是你知道填充这个列表需要多少时间以及服务器上需要多少内存来存储它？你能给我举一些你的经验的例子吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:56:05.583

您应该能够在具有 1-2 GB 内存的标准机器上运行它，这应该不是问题。从内存的角度来看，一百万个字符串并不大。

# powerbuilder - 如何在 DataWindow 中显示从数据库中检索到的图像？

> ID：10734149
> 
> 赞同：1
> 
> 时间：2012-05-24T08:52:49.040
> 
> 标签：powerbuilder

在 PowerBuilder .NET 12.5 中，我从数据库中检索数据并将其显示在 DataWindow 中。如何从数据库中检索图像（二进制格式）并将其显示在图像控件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:10:51.257

您是否查看过新的 TableBlob 列类型？

[http://pbdj.sys-con.com/node/1765806](http://pbdj.sys-con.com/node/1765806)

# c# - Visual C#（winforms）的高性能甘特图？

> ID：10734155
> 
> 赞同：0
> 
> 时间：2012-05-24T08:53:22.963
> 
> 标签：c#, wpf, winforms, directx, gantt-chart

**你好，**

我尝试了一些不同的甘特图解决方案，例如 Devexpress 时间线视图，但性能太差了！

要求如下：

*   用不同的颜色绘制约会
*   将约会分成不同颜色的部分¨
*   在约会内绘制特殊图标
*   在约会中键入文本
*   约会之间的碰撞检测
*   自动行高调整以适应约会
*   可以计算部分和约会的确切长度
*   可以拖放
*   约会工具提示（大）
*   甘特背景自定义绘画以说明约会所在的模式（带颜色）

我应该在 DirectX 中构建一个吗？或者WPF会是enouth吗？或者也许有适合这项任务的成品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:00:59.090

我可以全心全意地推荐 ILOG Gantt - 我已经用它做了很多，而且它的速度和可扩展性都非常快，包括自定义绘画（我添加了各种随机的东西）。很确定它有你清单上的所有东西。

（我与他们没有任何关系；简单地说：它对我来说效果很好）

# sql - SQL 日期排除

> ID：10734166
> 
> 赞同：2
> 
> 时间：2012-05-24T08:54:04.120
> 
> 标签：sql, sql-server

我有一堆 SQL 选择来收集数据以进行导出和分析。我已经声明了我想在几个变量中收集数据并运行查询的日期范围，总共有 10 个选择使用相同的日期范围变量。我想做的是使用可以在变量中声明的某种排除列表轻松地从查询中排除某些日期（它们是单天而不是一个范围），这样我的所有选择都会删除这些特定日期，而不是编辑每个选择陈述。

```
DECLARE @date_start DATETIME, @date_end DATETIME
SET @date_start = '2011-10-20 00:00:00'
SET @date_end = '2012-05-18 23:59:59'

SELECT
date, col1, col2, col3
FROM
table1
WHERE
date BETWEEN CONVERT(DATETIME, @date_start, 102) AND CONVERT(DATETIME, @date_end, 102)

SELECT
date, col4, col5, col8
FROM
table2
WHERE
date BETWEEN CONVERT(DATETIME, @date_start, 102) AND CONVERT(DATETIME, @date_end, 102)

SELECT
date, col3, col5, col6, col7, col8
FROM
table3
WHERE
date BETWEEN CONVERT(DATETIME, @date_start, 102) AND CONVERT(DATETIME, @date_end, 102) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:03:08.670

用于：

将此附加到您的查询中：AND date not in (date1,date2...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:05:43.080

您可以在 where 条件中使用 IN 来指定所选日期。并且当您只考虑日期部分时，最好使用 Convert(varchar,datecolumn,111) ，它提供 yyyy/MM/dd 格式。无需给时间部分 23:59:59。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:09:36.807

使用您要查找的日期创建一个表变量，并在查询中使用它。

您可以使用您的日期范围变量和另一个包含您不查找的日期的表来构建该表。

像这样的东西：

```
declare @date_start datetime
declare @date_end datetime

-- The date range you want. Don't add time part.
set @date_start = '20010102'
set @date_end = '20010107'

declare @NotTheDatesYouAreLookingFor as table
(
  date datetime
)

insert into @NotTheDatesYouAreLookingFor values
('20010103'),
('20010105')

declare @TheDatesYouAreLookingFor as table
(
  date datetime primary key
)

;with C(date) as
(
  select @date_start
  union all
  select date + 1
  from C
  where date < @date_end
)
insert into @TheDatesYouAreLookingFor(date)
select date
from C
  where date not in (select date 
                     from @NotTheDatesYouAreLookingFor) 
```

你的查询应该使用这样的表`@TheDatesYouAreLookingFor`。

```
select T1.date, T1.col1, T1.col2, T1.col3
from table1 as T1
  inner join @TheDatesYouAreLookingFor as TD
    on T1.date >= TD.date and T1.date < dateadd(day, 1, TD.date) 
```

# magento - Magento - 如何以编程方式向现有产品添加标签？

> ID：10734167
> 
> 赞同：1
> 
> 时间：2012-05-24T08:54:07.160
> 
> 标签：magento, tags

正如标题所说：**如何以编程方式向现有产品添加一个或多个标签？**我在互联网上找不到任何关于此主题的有用信息，因此欢迎提供任何帮助、链接或知识。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:24:29.067

这有点不同。您不能将*标签*添加到*产品*，但必须将*产品 ID*添加到*标签关系*。

```
$aProductIds = array(
    $my_product_id_1,
    $my_product_id_2
    // :
);

$oTag = Mage::getModel('tag/tag')
    ->load('my_tag_name', 'name');

Mage::getModel('tag/tag_relation')
    ->addRelations($oTag, $aProductIds); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:22:47.860

好的，我自己找到的。我已经复制并定制了**app/code/core/Mage/Tag/Controllers/IndexController.php**的 saveAction()以及一些额外的函数来让这个东西工作。

```
require_once $_SERVER['DOCUMENT_ROOT'] . "/app/Mage.php";
    umask(0);
    Mage::app();
    Mage::app()->getTranslator()->init('frontend');
    Mage::getSingleton('core/session', array('name' => 'frontend'));

$customerSession = Mage::getSingleton('customer/session');

$tagName    = 'Urban Extraloud';//(string) $this->getRequest()->getQuery('productTagName');
$productId  = 257;//(int)$this->getRequest()->getParam('product');

if(strlen($tagName) && $productId) {
    $session = Mage::getSingleton('catalog/session');
    $product = Mage::getModel('catalog/product')
        ->load($productId);
    if(!$product->getId()){
        //$session->addError($this->__('Unable to save tag(s).'));
    } else {
        try {
            $customerId = 58; //$customerSession->getCustomerId();
            $storeId = Mage::app()->getStore()->getId();

            $tagNamesArr = _cleanTags(_extractTags($tagName));

            $counter = new Varien_Object(array(
                "new" => 0,
                "exist" => array(),
                "success" => array(),
                "recurrence" => array())
            );

            $tagModel = Mage::getModel('tag/tag');
            $tagRelationModel = Mage::getModel('tag/tag_relation');

            foreach ($tagNamesArr as $tagName) {
                $tagModel->unsetData()
                    ->loadByName($tagName)
                    ->setStoreId($storeId)
                    ->setName($tagName);

                $tagRelationModel->unsetData()
                    ->setStoreId($storeId)
                    ->setProductId($productId)
                    ->setCustomerId($customerId)
                    ->setActive(Mage_Tag_Model_Tag_Relation::STATUS_ACTIVE)
                    ->setCreatedAt( $tagRelationModel->getResource()->formatDate(time()) );

                if (!$tagModel->getId()) {
                    $tagModel->setFirstCustomerId($customerId)
                        ->setFirstStoreId($storeId)
                        ->setStatus($tagModel->getPendingStatus())
                        ->save();

                    $tagRelationModel->setTagId($tagModel->getId())->save();
                    $counter->setNew($counter->getNew() + 1);
                } else {
                    $tagStatus = $tagModel->getStatus();
                    $tagRelationModel->setTagId($tagModel->getId());

                    switch($tagStatus) {
                        case $tagModel->getApprovedStatus():
                            if(_checkLinkBetweenTagProduct($tagRelationModel)) {
                                $relation = _getLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel);
                                if ($relation->getId()) {
                                    if (!$relation->getActive()) {
                                        $tagRelationModel
                                            ->setId($relation->getId())
                                            ->save();
                                    }
                                } else {
                                    $tagRelationModel->save();
                                }
                                $counter->setExist(array_merge($counter->getExist(), array($tagName)));
                            } else {
                                $tagRelationModel->save();
                                $counter->setSuccess(array_merge($counter->getSuccess(), array($tagName)));
                            }
                            break;
                        case $tagModel->getPendingStatus():
                            $relation = _getLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel);
                            if ($relation->getId()) {
                                if (!$relation->getActive()) {
                                    $tagRelationModel
                                        ->setId($relation->getId())
                                        ->save();
                                }
                            } else {
                                $tagRelationModel->save();
                            }
                            $counter->setNew($counter->getNew() + 1);
                            break;
                        case $tagModel->getDisabledStatus():
                            if(_checkLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel)) {
                                $counter->setRecurrence(array_merge($counter->getRecurrence(), array($tagName)));
                            } else {
                                $tagModel->setStatus($tagModel->getPendingStatus())->save();
                                $tagRelationModel->save();
                                $counter->setNew($counter->getNew() + 1);
                            }
                            break;
                    }
                }
            }

        } catch (Exception $e) {

            print 'Unable to save tag(s)';
        }
    }
}

function _extractTags($tagNamesInString)
{
    return explode("\n", preg_replace("/(\'(.*?)\')|(\s+)/i", "$1\n", $tagNamesInString));
}

/**
 * Clears the tag from the separating characters.
 *
 * @param array $tagNamesArr
 * @return array
 */
function _cleanTags(array $tagNamesArr)
{
    foreach( $tagNamesArr as $key => $tagName ) {
        $tagNamesArr[$key] = trim($tagNamesArr[$key], '\'');
        $tagNamesArr[$key] = trim($tagNamesArr[$key]);
        if( $tagNamesArr[$key] == '' ) {
            unset($tagNamesArr[$key]);
        }
    }
    return $tagNamesArr;
}

 /**
 * Checks whether the already marked this product in this store by this tag.
 *
 * @param Mage_Tag_Model_Tag_Relation $tagRelationModel
 * @return boolean
 */
function _checkLinkBetweenTagProduct($tagRelationModel)
{
    $customerId = $tagRelationModel->getCustomerId();
    $tagRelationModel->setCustomerId(null);
    $res = in_array($tagRelationModel->getProductId(), $tagRelationModel->getProductIds());
    $tagRelationModel->setCustomerId($customerId);
    return $res;
}

/**
 * Checks whether the already marked this product in this store by this tag and by this customer.
 *
 * @param Mage_Tag_Model_Tag_Relation $tagRelationModel
 * @param Mage_Tag_Model_Tag $tagModel
 * @return boolean
 */
function _checkLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel)
{
    return (count(_getLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel)
        ->getProductIds()) > 0);
}

/**
 * Get relation model for marked product in this store by this tag and by this customer.
 *
 * @param Mage_Tag_Model_Tag_Relation $tagRelationModel
 * @param Mage_Tag_Model_Tag $tagModel
 * @return Mage_Tag_Model_Tag_Relation
 */
function _getLinkBetweenTagCustomerProduct($tagRelationModel, $tagModel)
{
    return Mage::getModel('tag/tag_relation')->loadByTagCustomer(
        $tagRelationModel->getProductId(),
        $tagModel->getId(),
        $tagRelationModel->getCustomerId(),
        $tagRelationModel->getStoreId()
    );
} 
```

# javascript - 带有xhrpost dojo的匿名js函数不返回数据

> ID：10734169
> 
> 赞同：0
> 
> 时间：2012-05-24T08:54:13.923
> 
> 标签：javascript, dojo

```
var cType = function(templateId){
        dojo.xhrPost({
            url : "/mediation1.0.1/template/getCollectorType",
            handleAs : "text",
            headers : {"Content-Type":"text/html"},
            postData : templateId,
            load: function(data){
                    return data;
            }});
    }; 
```

当我用 cType(withSomeId) 调用这个函数时，我得到了未定义。即使当我使用局部变量并将数据分配给该变量时，返回该变量也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:02:46.760

问题是您的 cType 函数不返回任何内容。

```
var cType = function(templateId){
    dojo.xhrPost({
        url : "/mediation1.0.1/template/getCollectorType",
        handleAs : "text",
        headers : {"Content-Type":"text/html"},
        postData : templateId,
        load: function(data){
                return data; 
                // this returns from the the load 
                // function, not the cType function!
        }});

    // You are not returning anything from the cType function.
 }; 
```

您应该使用`dojo.Deferred`来完成您正在尝试做的事情：

```
var cType = function(templateId){
  var xhrArgs = {
        url : "/mediation1.0.1/template/getCollectorType",
        handleAs : "text",
        headers : {"Content-Type":"text/html"},
        postData : templateId
  };

  return dojo.xhrGet(xhrArgs);
};

var deferred = cType('templateId');
deferred.then(
  function(data){
      // do something with the data...
  },
  function(error){
      // handle an error calling the server...
  }
); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/xhrGet.html](http://dojotoolkit.org/reference-guide/1.7/dojo/xhrGet.html)（这有一个显示延迟技术的例子）

[http://dojotoolkit.org/reference-guide/1.7/dojo/xhrPost.html](http://dojotoolkit.org/reference-guide/1.7/dojo/xhrPost.html)

# asp.net - 服务器和/或客户端页面重定向后会话变量丢失

> ID：10734171
> 
> 赞同：3
> 
> 时间：2012-05-24T08:54:28.640
> 
> 标签：asp.net, html, redirect, response.redirect

**设置：**

我有一个带有按钮的登录页面。当用户单击按钮时，会发生回发。在按钮的单击处理程序中，我设置了几个会话变量。然后我将用户重定向到另一个页面。

**问题：**

当另一个页面加载时，SessionID 是相同的（相同的会话仍然存在），但是，所有的会话变量都消失了。我已经在谷歌上广泛搜索了这个问题，尝试了所有不同的解决方案（而且有很多），但没有一个对我有用。

我努力了：

```
Response.Redirect("NewPage.aspx", false); 
```

我还尝试添加一个元刷新标签（动态），它可以避开与使用 Response.Redirect(...) 相关的任何潜在问题。

```
<meta http-equiv="refresh" content="0;URL=NewPage.aspx" /> 
```

在这两种情况下，重定向都会成功，但会话变量不再存在。我已经广泛检查了所有 IIS 设置，分析了浏览器和服务器之间交换的数据，但都无济于事。

此外，在同一个项目上工作的两个同事（使用相同配置的开发机器）没有这个问题！

**问题：**

这个问题是否有合理的解释，或者我是否以某种方式侮辱或冒犯了我的开发 PC，它现在是否正在报复我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:55:26.157

我记得在异步回发期间调用 response.redirect() 时看到了这个问题。如果您使用的是 UpdatePanel，请尝试将其删除以查看是否可以解决问题。如果这是问题所在，那么我认为这与旧版本的 Ajax 库中的错误有关。由于您没有提及版本信息，我认为这是一个公平的假设。

# hibernate - 使用 Hibernate Java 在数据库中插入

> ID：10734174
> 
> 赞同：0
> 
> 时间：2012-05-24T08:55:01.567
> 
> 标签：hibernate, insert

我正在尝试使用休眠将文本字段中的值插入数据库中，但它不起作用。例如，我想插入到 Product 表中，其中包含以下列：idproduct、idprovider、idcategory、name、quantity。

```
 Session session = HibernateUtil.getSessionFactory().openSession();
    org.hibernate.Transaction tx = session.beginTransaction();
    Product product = new Product();
    int idProduct = Integer.parseInt(IdProductTextField.getText());
    product.setIdproduct(idProduct);
    session.save(product);
    tx.commit(); 
```

这是唯一插入的列，因为在 set 方法中我有一个 int 参数。

但是所有其他列都不起作用。这就是问题所在：

我要在 Product 表中插入的其他列的所有其他设置方法都具有 Class 变量作为参数。例如：

如果我想插入 idprovider，设置方法是

```
public void setProduct(Product product) {
    this.product = product;
} 
```

而且我真的不知道如何使用这种方法插入idprovider。

我没有多少时间，如果有人能尽快帮助我，我将不胜感激。

我在这里附上 Product.java 和 Provider.java

```
package sakila.entity;

import java.util.HashSet;
import java.util.Set;

public class Product  implements java.io.Serializable {

 private int idproduct;
 private Istoricprod istoricprod;
 private Provider provider;
 private Category category;
 private String name;
 private Integer quantity;
 private String unitmas;
 private Set comdetals = new HashSet(0);
 private Set stocs = new HashSet(0);
 private Set bondetals = new HashSet(0);

public Product() {
}

public Product(int idproduct) {
    this.idproduct = idproduct;
}
public Product(int idproduct, Istoricprod istoricprod, Provider provider, Category category, String name, Integer quantity, String unitmas, Set comdetals, Set stocs, Set bondetals) {
   this.idproduct = idproduct;
   this.istoricprod = istoricprod;
   this.provider = provider;
   this.category = category;
   this.name = name;
   this.quantity = quantity;
   this.unitmas = unitmas;
   this.comdetals = comdetals;
   this.stocs = stocs;
   this.bondetals = bondetals;
}

public int getIdproduct() {
    return this.idproduct;
}

public void setIdproduct(int idproduct) {
    this.idproduct = idproduct;
}
public Istoricprod getIstoricprod() {
    return this.istoricprod;
}

public void setIstoricprod(Istoricprod istoricprod) {
    this.istoricprod = istoricprod;
}
public Provider getProvider() {
    return this.furnizor;
}

public void setProvider(Provider provider) {
    this.provider = provider;
}
public Category getCategory() {
    return this.category;
}

public void setCategory(Category category) {
    this.category = category;
}

public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}
public Integer getQuantity() {
    return this.quantity;
}

public void setQuantitaty(Integer quantity) {
    this.quantity = quantity;
}
public String getUnitmas() {
    return this.unitmas;
}

public void setUnitmas(String unitmas) {
    this.unitmas = unitmas;
}
public Set getComdetals() {
    return this.comdetals;
}

public void setComdetals(Set comdetals) {
    this.comdetals = comdetals;
}
public Set getStocs() {
    return this.stocs;
}

public void setStocs(Set stocs) {
    this.stocs = stocs;
}
public Set getBondetals() {
    return this.bondetals;
}

public void setBondetals(Set bondetals) {
    this.bondetals = bondetals;
} 
```

}

Provider.java 是

```
package sakila.entity; 
```

// 由 Hibernate Tools 3.2.1.GA 于 2012 年 4 月 9 日晚上 10:19:40 生成

```
import java.util.HashSet;
import java.util.Set;

public class Provider  implements java.io.Serializable {

 private int idprovider;
 private String denumire;
 private Integer codfiscal;
 private Integer nrfirma;
 private String stradadom;
 private Integer numardom;
 private String orasdom;
 private String judetdom;
 private Integer telefon;
 private Integer codiban;
 private String banca;
 private Set produses = new HashSet(0);
 private Set chitantas = new HashSet(0);
 private Set comandas = new HashSet(0);
 private Set facturas = new HashSet(0);

public Provider() {
}

public Provider(int idprovider) {
    this.idprovider = idprovider;
}
public Provider(int idprovider, String denumire, Integer codfiscal, Integer nrfirma, String stradadom, Integer numardom, String orasdom, String judetdom, Integer telefon, Integer codiban, String banca, Set produses, Set chitantas, Set comandas, Set facturas) {
   this.idprovider = idprovider;
   this.denumire = denumire;
   this.codfiscal = codfiscal;
   this.nrfirma = nrfirma;
   this.stradadom = stradadom;
   this.numardom = numardom;
   this.orasdom = orasdom;
   this.judetdom = judetdom;
   this.telefon = telefon;
   this.codiban = codiban;
   this.banca = banca;
   this.produses = produses;
   this.chitantas = chitantas;
   this.comandas = comandas;
   this.facturas = facturas;
}

public int getIdprovider() {
    return this.idprovider;
}

public void setIdprovider(int idprovider) {
    this.idprovider = idprovider;
}
public String getDenumire() {
    return this.denumire;
}

public void setDenumire(String denumire) {
    this.denumire = denumire;
}
public Integer getCodfiscal() {
    return this.codfiscal;
}

public void setCodfiscal(Integer codfiscal) {
    this.codfiscal = codfiscal;
}
public Integer getNrfirma() {
    return this.nrfirma;
}

public void setNrfirma(Integer nrfirma) {
    this.nrfirma = nrfirma;
}
public String getStradadom() {
    return this.stradadom;
}

public void setStradadom(String stradadom) {
    this.stradadom = stradadom;
}
public Integer getNumardom() {
    return this.numardom;
}

public void setNumardom(Integer numardom) {
    this.numardom = numardom;
}
public String getOrasdom() {
    return this.orasdom;
}

public void setOrasdom(String orasdom) {
    this.orasdom = orasdom;
}
public String getJudetdom() {
    return this.judetdom;
}

public void setJudetdom(String judetdom) {
    this.judetdom = judetdom;
}
public Integer getTelefon() {
    return this.telefon;
}

public void setTelefon(Integer telefon) {
    this.telefon = telefon;
}
public Integer getCodiban() {
    return this.codiban;
}

public void setCodiban(Integer codiban) {
    this.codiban = codiban;
}
public String getBanca() {
    return this.banca;
}

public void setBanca(String banca) {
    this.banca = banca;
}
public Set getProduses() {
    return this.produses;
}

public void setProduses(Set produses) {
    this.produses = produses;
}
public Set getChitantas() {
    return this.chitantas;
}

public void setChitantas(Set chitantas) {
    this.chitantas = chitantas;
}
public Set getComandas() {
    return this.comandas;
}

public void setComandas(Set comandas) {
    this.comandas = comandas;
}
public Set getFacturas() {
    return this.facturas;
}

public void setFacturas(Set facturas) {
    this.facturas = facturas;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:53:40.180

为了清楚起见，您的产品与其提供者之间存在多对一的关联。当您插入一个产品时，您希望它将它链接到现有的提供者。因此，您获得了具有给定 ID 的提供程序，并将此提供程序附加到产品：

```
Provider provider = (Provider) session.load(Provider.class, idOfTheProvider);
product.setProvider(provider);
session.save(product); 
```

其他协会也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T10:07:23.417

以提供者为例。如果您有现有提供者的提供者 ID，则可以执行

*   首先加载具有 id 的提供程序
*   将提供者设置到产品中
*   保存产品

示例（不完整）

```
Provider provider = session.load(provider, idProvider);
product.setProvider(provider);
session.save(product); 
```

如果您不想先加载提供程序（可能是多余的数据库访问），那么您可以这样做

```
Provider provider = new Provider(idProvider);
product.setProvider(provider);
session.save(product); 
```

在这种情况下，请确保在映射文件`cascade`中设置为`none`; 如果不是也将创建一个新的提供者（如果您还想创建一个新的提供者，请设置`cascade=all`）。

第三种可能性是，在产品中您不放置提供者对象，而只放置提供者 ID 并将其映射为简单整数。（您甚至可以同时放置单独的 id 和提供者对象，但这有点棘手，通常不推荐。）

# java - HashTable 中的静态内部类 Entry 是做什么用的？

> ID：10734175
> 
> 赞同：0
> 
> 时间：2012-05-24T08:55:08.667
> 
> 标签：java, static, hashtable

> **可能重复：**
> [Java 中的静态嵌套类，为什么？](https://stackoverflow.com/questions/253492/static-nested-class-in-java-why)

我正在阅读JDK HashTable中的源代码，并且有一些代码片段如下：

/** 哈希表冲突列表。*/

```
private static class Entry<K,V> implements Map.Entry<K,V> {
    int hash;
    K key;
    V value;
    Entry<K,V> next;
    ...
} //end of Entry<K,V> 
```

我知道这里的 Entry 是一个私有内部类，但它也是一个已定义的静态类；我担心的是，仅仅将其定义为私有内部类还不够吗？这里将其定义为静态类的主要用途是什么？

任何指南或回复都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:58:04.147

这样它`static`的实例不包含对外部类的包含实例的引用。

`Map.Entry`用于遍历地图的元素。它不需要对包含映射的引用，因为它不需要访问映射的私有字段。因此，将其声明为非静态只会占用额外的空间并削弱封装。

# mysql - 用户无法执行选择错误 1142

> ID：10734176
> 
> 赞同：3
> 
> 时间：2012-05-24T08:55:15.390
> 
> 标签：mysql, phpmyadmin

我的 phpmyadmin 或 MySQL 命令行不允许我执行以下查询：

```
SELECT customer.First, customer.Last, login.Username, login.Password, customer.Addrln1,
    customer.Addrln2, customer.Postcode, customer.County, customer.Country, customer.Phone, customer.Email, 
    employee.EmpFirst, employee.EmpEmail, move.MoveID, move.CityOrig, move.CityDest, move.CountryOrig, 
    move.CountryDest, move.EnquiryDate, move.Surveydate, move.QuoteDate, move.DepEst, move.DepAct, move.ArrEst, move.ArrAct,
    move.ClearEst, move.ClearAct, move.DelEst, move.DelAct, move.Port, move.Method, move.Status
FROM customer
LEFT JOIN oim2.login ON customer.CustID = login.CustID
LEFT JOIN oim2.move ON customer.CustID = move.CustID
LEFT JOIN oim2.employee ON move.EmpID = employee.EmpID
WHERE customer.First =  'dave' and customer.Last='smith' 
```

# 1142 - 表 'login' 拒绝用户 'oceanai3'@'localhost' 的 SELECT 命令

Dave smith 只是名字和姓氏的示例，用户可以执行以下查询： SELECT * from login SELECT * FROM move SELECT * FROM customer

如果我从原始查询中删除对登录的引用，则会收到错误 #1142 - SELECT command denied to user 'oceanai3'@'localhost' for table 'move'。我已经粘贴了数据库的完整 sql 文件，可以在这里找到：http: [//pastebin.com/H6aTS74m](http://pastebin.com/H6aTS74m) 我已经浏览了很多其他人的帖子以找到答案，但我找不到任何帮助我。

谢谢

C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:58:35.533

```
GRANT SELECT ON database.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

用您的值替换占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:35:28.630

我认为，也许是 Jivings 的帖子：

```
GRANT SELECT ON database.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

*可能*需要在用户周围加上单引号，例如：

```
GRANT SELECT ON database.* TO 'user'@'localhost' IDENTIFIED BY 'password'; 
```

至少，这对我有用，但我使用的是 phpMyAdmin 3.5.2.2。尽管如此，如果这可以帮助某人，那才是最重要的:)

# java - 拼写检查器，俄语

> ID：10734180
> 
> 赞同：1
> 
> 时间：2012-05-24T08:55:43.773
> 
> 标签：java, spell-checking

我正在使用 google-api-spelling-java jar 库。而且我需要使用更多的语言来使用，其中之一是俄语。我在哪里可以获得相同的库但有更多的语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:02:14.473

您可以在此处下载源代码并将俄语（'ru'）添加到语言类： [http ://code.google.com/p/google-api-spelling-java/source/browse/trunk/google-api-spelling-java /src/main/java/org/xeustechnologies/googleapi/spelling/Language.java](http://code.google.com/p/google-api-spelling-java/source/browse/trunk/google-api-spelling-java/src/main/java/org/xeustechnologies/googleapi/spelling/Language.java)

看起来这个库只是一个帮助代码，所以我想应该足够了：

```
public enum Language {
   DANISH("da"), GERMAN("de"), ENGLISH("en"), SPANISH("es"), FINNISH("fi"), FRENCH("fr"), ITALIAN("it"), DUTCH("nl"), POLISH(
        "pl"), PORTUGUESE("pt"), RUSSIAN("ru"), SWEDISH("sv");

   private final String code;

   private Language(String code) {
       this.code = code;
   }

   public String code() {
       return code;
   }
} 
```

然后建立你自己的罐子。... 利润！:)

# tomcat - Tomcat 无法启动：java.net.BindException：无法分配请求的地址

> ID：10734183
> 
> 赞同：10
> 
> 时间：2012-05-24T08:55:47.247
> 
> 标签：tomcat

当我启动我的 Tomcat 语言环境实例时，我收到以下错误：

```
 SEVERE: StandardServer.await: create[8005]: 
    java.net.BindException: Cannot assign requested address: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
    at java.net.ServerSocket.bind(ServerSocket.java:319)
    at java.net.ServerSocket.<init>(ServerSocket.java:185)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:373)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:662)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:614)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我在论坛上看到人们有同样的问题。Netstat 不显示正在使用的端口 8080、8005 或 8009。我试图改变端口，但我得到了同样的错误。我还检查了 Windows\System32\drivers\etc 中的主机文件和行

```
127.0.0.1       localhost 
```

没有评论。我没有更改 server.xml 中的任何内容，从昨天开始我无法让它工作。有任何想法吗？

编辑：

```
<Server port="8005" shutdown="SHUTDOWN">

Connectors:
 <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000" 
               redirectPort="8443" />

<Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS"
               />

<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-12T12:39:54.367

我通过指定解决了这个问题

`<Server address="0.0.0.0" port="8005" shutdown="SHUTDOWN">`

在 conf/server.xml。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-10T11:01:50.710

您的服务器的 IP 已更改（甚至是您不使用的其他网卡的 IP），您必须进行编辑。

```
C:\Windows\System32\drivers\etc\hosts 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-22T10:03:52.117

最可能的原因是：您的 localhost 的 IP 地址未在主机文件中正确配置。验证主机文件：运行：system32：驱动程序：等：主机在记事本中打开此主机文件

将此 localhost 行保留为主机文件中的第一行。关闭一切。从 Eclipse 中删除服务器并重新配置它。它应该有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-01T14:03:54.717

就我而言，这是主机文件（Windows）的问题。实际上我从一开始就有以下条目... 172.16.xxx.yyy localhost

大约2周前，我们公司进行了物理服务器和网络域拆分活动，这改变了所有机器的IP。在这里，我的yyy被改变了。

当我编辑我的 IP 时，错误消失了。感谢 Saurabh Chande。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T12:27:03.490

我设法解决了这个问题。

我在 Eclipse 中使用本地 tomcat 时遇到了同样的问题（它无法启动，因为它找不到 tomcat.bin）。我在 Eclipse 的服务器选项卡中右键单击 Tomcat 服务器，然后单击属性。在常规属性中有一个按钮“切换位置”。它曾经在 Eclipse 中指向本地 Tomcat，但使用此按钮将其更改为 C 盘上实际安装 Tomcat 的文件夹。现在 Tomcat 在 Eclipse 和 localy 中都可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-30T10:20:21.723

警告：使用建议的解决方案（服务器地址=“0.0.0.0”）允许任何攻击者远程关闭您的系统。

我建议使用：< 服务器地址="127.0.0.2" 端口="8005" shutdown="SHUTDOWN" >

127.0.0.2 将作为环回地址工作，但不会干扰在 localhost (127.0.0.1) 上侦听的任何其他服务

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-12T14:40:53.100

当主机文件的权限设置不正确时，我在服务器上遇到了这个问题

运行`chmod 644 hosts`纠正了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-09T06:38:50.287

第 1 步：转到 C:\Windows\System32\drivers\etc

第2步：

找到主机文件并使用记事本以管理员模式打开它

第 3 步：

用 127.0.0.1 替换本地主机 ip

例子

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
#   ::1             localhost 
```

第4步：

保存该文件并运行服务器

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-09T09:14:55.940

我知道在这个帖子中发帖有点晚了，但我想帮助那些来寻找答案并遇到与我类似的问题的人。而且我无法发表评论，因为我没有足够的代表。

正如OP发布的那样，

> 我还检查了 Windows\System32\drivers\etc 中的主机文件和行
> 
> `127.0.0.1 localhost`
> 
> 没有评论。我没有更改 server.xml 中的任何内容，从昨天开始我无法让它工作。有任何想法吗？

我想对这部分发表评论。在我的情况下，以下行也没有评论。

`127.0.0.1 localhost`

但是，还有另一行将“localhost”绑定到旧的本地 IP。

`127.0.0.1 localhost 10.10.1.123 localhost`

由于路由器重新配置，最近更改了我的旧本地 IP，这是罪魁祸首。因此，评论该重复行解决了我的问题。

结论是，**除了检查环回 IP 是否被注释外，还要检查“localhost”是否有多个绑定。**

# c# - 使用二维数组创建表

> ID：10734189
> 
> 赞同：-6
> 
> 时间：2012-05-24T08:56:12.283
> 
> 标签：c#, asp.net-mvc-3, collections, multidimensional-array, viewmodel

如何使用二维数组填充列表集合（项目：年份）中的项目？列表集合由使用 linq 查询的外部数据库填充。

视图模型

```
public class TableViewModel
{       
    public List<MovieViewModel> Movies { get; set; }        
    public MyViewModel[,] MovieValues { get; set; }   
}

public class MyViewModel
{
    public string MovieValue { get; set; }        
}

 public class MovieViewModel 
{
    public string Id { get; set; }        
    public string Name { get; set; }
    public string Year { get; set; }   
} 
```

控制器

```
TableViewModel item;
item=new TableViewModel();  
var AllMuvees = from d in db.MoviesTable     
          orderby d.Id                                            
          group d by d.Rating into  M                          
          select M;

List<MovieViewModel> OldMovies;
foreach (var a in M.AllMuvees)
{
 OldMovies.Add(new MovieViewModel()
 { 
    Id = g.MovieId.ToString(),
    Name =g.MovieName,
    Year = g.MovieYear.ToString()
 });
}

for (int i = 0; i < 10; i++)
 {
 for (int j = 0; j < 10; j++)
  {
    item.MovieValues[i, j] = new MyViewModel()
    { MovieValues = ***** 
(I need help here: I want to fill this with the Years from OldMovies)};      
   }
  }

 return View(item); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:17:25.563

10x10 i,j 的目的是什么？

您可以通过 list[index] 获取 OldMovies 中的每个 MovieViewModel，并且该索引必须介于 0 到 OldMovies.Count 之间。

```
for(int i = 0; i < OldMovies.Count; i++)
{
  var movie = OldMovies[i];
  //movie.Name
  //movie.Year
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:26:27.960

您是否尝试过查看 ListViewItem 然后填充列表视图？

如果没有，那么您可以轻松地使用数组列表，甚至可以将其填充到如下所示的 foreach 循环中？

```
foreach( var v in Muvees )
{ListViewItem movieToAdd = new ListViewItem();
 movieToAdd.Text = v.movieid; 
movieToAdd.SubItems.Add(v.rating); 
movieToAdd.SubItems.Add(v.movieName); 
listOfMovies.Items.Add( movieToAdd ).BackColor = Color.Green;}    //add colour just because you can 
```

安排子项目，但您的列表已列出

然后在表单中右键单击表单中的列表视图（listOfMovies）并添加列

对不起，如果我误解了这个问题，但我认为这是你需要的？

# javascript - 图像上的文本和 CSS 始终居中的图像

> ID：10734191
> 
> 赞同：0
> 
> 时间：2012-05-24T08:56:28.547
> 
> 标签：javascript, html, css

我正在使用以 CSS 为中心的书籍图像，并且我需要在书籍的两个面向“页面”上显示两个文本区域作为列。

我还想用 JavaScript 添加这些文本区域，以便可以通过页面底部的 Next 和 Back 按钮更改它们。

我有一个[示例页面](http://www.deadzomb1e.zymichost.com/bookpopup.html)，您可以查看。

这是页面的 HTML：

```
<html>
  <head>
     <title>BookPopUp</title>
     <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
     <meta http-equiv="Page-Exit" content="blendTrans(Duration=2.0)">
     <link rel="stylesheet" type="text/css" href="css/popup.css" />
   </head>
   <body background="images/bg.jpg">
     <div id="bookpop">
     <span></span>
     </div>
   </body>
</html> 
```

这是页面的CSS：

```
/*website BookPopUp Image Center*/
#bookpop {
    position: absolute;
    text-align: center;
    left: 50%;
    top: 50%;
    margin: -368.5px auto 0 -512px; /* value of top margin: height of the image divide by 2 (ie: 240 / 2), value of left margin: width of the image divide by 2 (ie: 260 / 2) */;
    width: 1024px; /* same as the image width */
}
#bookpop span {
    display: block;
    width: 1024px;
    height: 737px;
    margin: 0 auto;
    position: relative;
    background: transparent url(../images/bookpopup.png) 0 0 no-repeat;
    text-indent: -5000em;
    outline: 0;
} 
```

我还想在图片附近或顶部放置两个按钮。他们会说 Next 和 Back 并链接到本书的下一页和上一页。

如果有更简单的方法可以让我知道。

无论如何提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:03:31.887

让每个人都知道我采纳了你的两个想法（tpaksu | Axente Paul）并将它们添加到我自己的版本中。这是代码，以便其他人可以确切地看到它是如何完成的。

下面的 HTML...

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META NAME="ROBOTS" CONTENT="NONE">
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/popup.css" />
    <title>BookPopUp</title>
  </head>
  <body background="images/bg.jpg">
    <div id="bookpop">
      <div>
        <span class="leftpagetext">Hello this is a text to see exactly where all of this is going to go!</span>
        <span class="rightpagetext">Trying to see where this goes as well! Hello this is a text to see exactly where all of this is going to go!</span>
        <img src='images/bookpopup.png'>
      </div>
    </div>
  </body>
</html> 
```

而下面的CSS...

```
/*website BookPopUp Image Center*/
#bookpop {
    position: absolute;
    text-align: center;
    left: 50%;
    top: 50%;
    margin: -368.5px auto 0 -512px; /* value of top margin: height of the image divide by 2 (ie: 240 / 2), value of left margin: width of the image divide by 2 (ie: 260 / 2) */;
    width: 1024px; /* same as the image width */
}
/* Span container class for text Left Side */
.leftpagetext {
    float: left;
    position: absolute;
    top: 120px;
    left: 100px;
    text-align: justify;
    width: 35%;
}
/* Span container class for text Right Side */
.rightpagetext {
    float: right;
    position: absolute;
    top: 120px;
    right: 100px;
    text-align: justify;
    width: 35%;
} 
```

所以再次非常感谢你们俩。现在我知道了，其他看到的人都知道。我打算再写一本这样的书，但要以卷轴的形式写给我妻子的诗。非常感谢你们！

PS 问题是我没有在 div 的 lmao 中使用 div。它刚刚滑过我的脑海，并且在 css span 调用中调用图像也不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:04:16.960

在图像上放置一个 div，其比例和位置等于图像（覆盖图像）并将文本置于该 div 内。你需要有这样的布局：

```
<div class='container'>
    <div class='text'>I am the text</div>
    <img src='myimg.png'>
</div> 
```

和CSS：

```
.container { position: relative; }
.container .text {position:absolute;top:0px;left:0px;
    margin:0px;padding:0px;text-align:center;}
.container img {margin:0px;padding:0px;} 
```

加载时的 javascript 将调整“.text” div 的大小以匹配兄弟图像的宽度和高度。

您需要使用分配给图像的加载方法来获取加载时的实际尺寸。您可以通过在此处搜索“图像加载事件”找到示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:08:54.093

为什么不创建 2 个跨度？

```
<span class="left-page-text"></span>
<span class="right-page-text"></span> 
```

对于 CSS

```
span{
float: left;
width: 50%; } 
```

如果您想为每个页面提供更多自定义内容，只需使用添加到它们的类。我希望这能帮到您。

# java - JavaFX 2 调试 css

> ID：10734193
> 
> 赞同：5
> 
> 时间：2012-05-24T08:56:37.197
> 
> 标签：java, css, debugging, javafx, styling

在使用 JavaFX 时，我正在努力处理一些 CSS 样式。

我想知道是否有任何方法可以调试 css？

类似于 firebug 或 chrome 中的内置工具，当您按下一个元素时，它会向您显示适用于它的 css 样式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T09:18:15.253

Have a look on [Scenic View](http://fxexperience.com/2012/05/introducing-scenic-view/) to see does it meet your needs a bit at least.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T09:31:58.803

除了按照 Uluk 的建议使用 ScenicView 之外，有时我也只是在显示舞台后将活动节点转储到控制台。节点的默认设置`toString()`列出了它们的 css id 和样式类。

```
// debugging routine to dump the scene graph.
public  static void dump(Node n) { dump(n, 0); }
private static void dump(Node n, int depth) {
  for (int i = 0; i < depth; i++) System.out.print("  ");
  System.out.println(n);
  if (n instanceof Parent) 
    for (Node c : ((Parent) n).getChildrenUnmodifiable()) 
      dump(c, depth + 1);
} 
```

样本输出：

```
BorderPane@13c3750
  Text@2e3919[styleClass=lyric-text]
  Button[id=null, styleClass=button change-lyric]
    ButtonSkin[id=null, styleClass=button change-lyric]
      ImageView@13a4e73
      LabeledText@567aef[styleClass=text] 
```

围绕 css 处理有一些未记录的内部 api，但没有公开。

公开此 api 的请求在这里：[Java 中的 CSS 样式对象模型](http://javafx-jira.kenai.com/browse/RT-17293)。您创建一个名为 StyleMap 的东西并将其附加到一个节点，这实际上创建了一个侦听器，该侦听器记录您添加 StyleMap*后发生的节点的 css 处理更改。*

```
public void addStyleMaps(Node node, int depth) {
  node.impl_setStyleMap(FXCollections.observableMap(new HashMap<WritableValue, List<Style>>()));
  if (node instanceof Parent) {
    for (Node child : ((Parent) node).getChildrenUnmodifiable()) {
      addStyleMaps(child, depth + 1);
    }
  }
} 
```

如果将上面的转储例程修改为 =>

```
System.out.println(n + " " + node.impl_getStyleMap()); 
```

然后该例程还将打印出样式更改，因为样式映射已添加到节点。

请注意，上面的调用使用了一个 impl_ api，它已被弃用，它可能（并且可能会）在未来的 JavaFX 版本中发生变化，并且不会获得公共 api 的使用和测试支持。

我认为，尽管如此，在将机制实现到像 ScenicView 这样的图形工具中以交互地提供 Firebug 样式 css 信息之前，您不会发现它太有用。我不认为 ScenicView 是开源的，内部的 css 实现也没有公开记录，所以自己创建这样的工具可能很困难。

# php - PHP 在性能方面最好还是？

> ID：10734197
> 
> 赞同：0
> 
> 时间：2012-05-24T08:57:02.103
> 
> 标签：php, performance, codeigniter, orm

就性能而言，其中哪一个是 PHP 的最佳 ORM？我也想在 Codeigniter 框架中使用它。我现在正在尝试 php-activerecord，它的表现还不错。我看了一下 Doctrine2、DataMapper 和其他东西，但在我建立一个大项目之前，我无法说出任何有关性能的东西（那时，改变主意为时已晚）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:11:07.753

如果您的目标是性能，那么一开始就使用 ORM 是错误的选择。

ORM 专注于强制关系结构像对象一样工作，这是问题的根源（性能损失和 API 限制）。这就是为什么 ORM 不关注性能的原因。ORM 真正擅长的是快速原型设计，但是当用于大型项目时，它们通常最终会导致[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)。

另外 .. 如果您对使用 CodeIgniter 很认真，请阅读[源代码](https://github.com/EllisLab/CodeIgniter/tree/2.1-stable/system)，并决定这是否是您想要作为项目基础的代码质量。

PS这里有两篇你可能会觉得有点煽动性的文章，但有相关的观点：

*   [对象关系映射是计算机科学的越南](http://www.codinghorror.com/blog/2006/06/object-relational-mapping-is-the-vietnam-of-computer-science.html)
*   [ORM 是一种反模式](http://seldo.com/weblog/2011/08/11/orm_is_an_antipattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:06:52.127

[这是 GAS ORM vs PHP Active Record 的链接](http://taufanaditya.com/gas-orm-new-design-and-benchmark) （滚动到底部）

结果？Gas ORM 比 PHP Active Record 更高效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:01:35.627

当您开始一个新项目时，您可以快速将对象进出数据库，而不必担心如何操作。您还可以非常快速地将 DBMS 从本地开发机器上的 SQLite 切换到测试或临时服务器上的 MySQL。当性能部分开始时，您的应用程序已经成熟了一点，模型有些固定并且程序逻辑正在运行。扩展模型以使用 SQL 而不是 ORM 会更方便，因为项目的结构不再变化（如此之快）。

我建议教义。

使用 Doctrine 可以轻松集成到 CI 中（互联网上有很多帖子，甚至在 SO 上也有一些帖子），因此您不必学习任何花哨的新约定。

无论您选择什么，请记住，任何 ORM 都会为一个非常轻量级的框架增加大量（与 CI 的基本足迹相比）开销。因此，您为了强大的数据库功能和更多抽象而牺牲了轻量级。

检查这个链接我发现提供了非常好的信息 [http://www.phpandstuff.com/articles/codeigniter-doctrine-from-scratch-day-1-install-and-setup](http://www.phpandstuff.com/articles/codeigniter-doctrine-from-scratch-day-1-install-and-setup)

# java - 服务器如何知道哪个框架在工作

> ID：10734202
> 
> 赞同：0
> 
> 时间：2012-05-24T08:57:09.700
> 
> 标签：java, spring

我曾在一次采访中问过这个问题

> 有很多框架，如 spring、struts、struts2、wicket，但服务器如何知道哪个框架当前正在工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:00:09.543

服务器不必这样做。它只是遵循 Java EE 规范。由框架自行调整。

如果您在各种框架中编码，您会发现您需要在 web.xml 中指定特定的 servlet —— 就像在 Struts-1 中您固定 ActionServlet，在 Wicket 中它是 WicketServlet，我猜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:02:11.063

对于每个 Java webapp，都有一个名为 的部署描述符文件[`web.xml`](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)，它定义（除其他外）组成 webapp 的 servlet 和 servlet 过滤器。

如果您的应用程序使用某个框架，则必须向该文件添加一些特定于框架的条目。

大多数 Web 框架都基于一个中央 servlet 或 servlet 过滤器，它根据框架的约定和配置将调用委托给应用程序类。

# tomcat - HTTP 错误代码 505

> ID：10734205
> 
> 赞同：11
> 
> 时间：2012-05-24T08:57:12.020
> 
> 标签：tomcat, ssl

我已经用谷歌搜索了 505 是“不支持 HTTP 版本”，但仍然无法弄清楚我的问题。我有一个带有 Tomcat 的 Web 应用程序，服务器端带有自签名证书以启用 HTTPS，而无需验证客户端。客户端将验证服务器证书。我已经分析了wireshark数据包，看来SSL握手是正确的。但是当我检查 Tomcat localhost_access_log 时，客户端请求会出现 505 错误，服务器端也没有收到客户端请求。你能帮忙给点提示吗？

```
172.25.21.113 - - [24/May/2012:16:28:26 +0800] "GET /updserver/update?action=signature_update&device_type=NGN&service_type=KAV&engine_ver=1.00&sig_ver=4.123&mac=0019CB72736E HTTP/1.1 " 505 - 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T14:50:43.327

如果您在 HTTP 版本之后使用尾随空格向 Tomcat 发出请求（如您的示例中所示），则 Tomcat 将响应 505 错误。在 Tomcat 7.0.27 上确认。

RFC 2616 (HTTP 1.1) 说`HTTP-Version`由`"HTTP/" + digit + "." + digit`. Request-Line 以 which 结尾，`" " + HTTP-Version + CRLF`这意味着在最后一个数字之后不允许有空格。

参考：

*   HTTP 版本：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.1)
*   请求行：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-21T02:49:28.667

显然不是 OP 的答案，但我今晚在尝试调试 SOLR 服务器时遇到了这个错误消息。

我的问题不是 HTTP 版本之后的额外空间。

我的客户端应用程序记录了错误的 URL，我愉快地将其复制并粘贴到到 SOLR tomcat 的 http 端口的 telnet 连接中。我的日志消息显示的 URL 没有正确 %20 编码 URL 中的空格。我收到了错误的 HTTP 版本错误，大概是因为它将 URL 中空格之后的所有内容解释为我的 HTTP 版本。

感谢[http://java.dzone.com/news/solr-tomcat-and-http11-505](http://java.dzone.com/news/solr-tomcat-and-http11-505)的提示。

# zend-framework - 如何使用 Zend_Feed (Zend_Feed::importArray) 在图像中添加宽度和高度

> ID：10734206
> 
> 赞同：0
> 
> 时间：2012-05-24T08:57:18.087
> 
> 标签：zend-framework, rss

我正在使用 zend_feed 生成提要，这是代码，它工作正常，但我还需要添加一些关于图像的更多信息，

```
$feedData = array(
            'title' => $feed->feedParams['title'],
            'description' => $feed->feedParams['description'],
            'link' => $feed->getSiteUrl() . $feed->feedParams['link'],
            'charset' => $feed->feedParams['charset'],
             'url' => $feed->getSiteUrl() . $feed->feedParams['image'],
            'ttl' => $feed->feedParams['ttl'],
            'entries' => $feed->getFeedContent()
        );
$feed = Zend_Feed::importArray($feedData, 'rss'); 
```

结果是

```
<image>
  <url>http://local.here/assets/img/icons/feed.png</url>
  <title><![CDATA[here Uutiset]]></title>
  <link>http://local.here/uutiset</link>
</image> 
```

但是我需要

```
<image>
<url>http://www.edilex.fi/images/rss.gif</url>
<title>Edilex</title>
<link>http://www.edilex.fi/</link>
<width>129</width>
<height>76</height>
</image> 
```

所以我试试这个，但不工作

```
$feedData = array(
            'title' => $feed->feedParams['title'],
            'description' => $feed->feedParams['description'],
            'link' => $feed->getSiteUrl() . $feed->feedParams['link'],
            'charset' => $feed->feedParams['charset'],
            'image' => array(
                'url' => $feed->getSiteUrl() . $feed->feedParams['image'],
                'width' => 120,
                'hight' => 130
            ),
            'ttl' => $feed->feedParams['ttl'],
            'entries' => $feed->getFeedContent()
        );
$feed = Zend_Feed::importArray($feedData, 'rss'); 
```

但它不起作用，你能告诉我我该怎么做吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:29:46.520

看起来可选的宽度和高度参数没有在 Zend_Feed_Rss 中映射

摘自 _mapFeedHeaders

```
if (!empty($array->image)) {
            $image = $this->_element->createElement('image');
            $url = $this->_element->createElement('url', $array->image);
            $image->appendChild($url);
            $imagetitle = $this->_element->createElement('title');
            $imagetitle->appendChild($this->_element->createCDATASection($array->title));
            $image->appendChild($imagetitle);
            $imagelink = $this->_element->createElement('link', $array->link);
            $image->appendChild($imagelink);

            $channel->appendChild($image); 
```

# c# - 如何获取进程的特定目录

> ID：10734207
> 
> 赞同：0
> 
> 时间：2012-05-24T08:57:21.347
> 
> 标签：c#

我有一个包含许多子目录的目录。例如：

```
Emp1
 Acc
 profile
   pro1.xml
   pro2.xml
 data
Emp2
 Acc
 profile
   pro1.xml
   pro2.xml
 data
Emp3
 Acc
 profile
   pro1.xml
   pro2.xml
 data 
```

我想编写一个 foreach 循环，所以我只得到位于配置文件文件夹中的文件。例如：

```
 foreach string filename in directory.getdirectories(filepat){
        //code.
  } 
```

有人可以帮我创建一个搜索模式来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:01:56.420

编辑问题后编辑....

```
var directoryInfo = new DirectoryInfo(@"c:\temp\stackoverflow");
foreach (var element in dinfo.GetDirectories(@"profile", SearchOption.AllDirectories).SelectMany(x => x.GetFiles()))
{
    Console.WriteLine (element);
} 
```

像这样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:09:37.027

我为文件和目录写了一些流畅的扩展，让你可以很好地使用 linq，看看这里：http: [//blog.staticvoid.co.nz/2011/11/staticvoid-io-extentions-nuget.html](http://blog.staticvoid.co.nz/2011/11/staticvoid-io-extentions-nuget.html)

或使用从 nuget 下载`Install-Package StaticVoid.Core.IO`

```
diretory.Directories().SelectMany(d => 
   d.Directory(di => di.Name == "Acc")
       .Directory(di => di.Name == "profile").Files()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:06:50.440

这可能是你想要的...

```
 string [] dirname = Directory.GetDirectories(path){
                 foreach( string s in dirname)
                 {
                   if(s.Contains("profile"))
                   {
                     //do your work
                   }
                 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:11:11.233

也许您可以尝试以下方法：

```
 IEnumerable<string> directories = Directory.GetDirectories("PATH", "*.*", SearchOption.AllDirectories).Where(d => d == "ProfileFolder");
 foreach (string directory in directories)
 {
     string[] files = Directory.GetFiles(directory, "*.*", SearchOption.TopDirectoryOnly);
 } 
```

# javascript - 一旦不再需要视图，取消对事件的委托的最佳方式

> ID：10734210
> 
> 赞同：11
> 
> 时间：2012-05-24T08:57:33.130
> 
> 标签：javascript, backbone.js

调用`undelegateEvents()`视图`remove()`方法是一种不好的做法吗？为什么骨干人员默认不包含它？

当简单地重新初始化视图变量时，我意识到我陷入了如此多的绑定问题。尽管`undelegateEvents()`在创建新视图时会自动调用它，但它正在尝试为新实例化的视图取消委托事件，而不是前一个视图。因此，除非每次都手动调用它，否则幽灵事件回调仍然存在并搞砸了我的应用程序。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T18:21:10.910

> 调用`undelegateEvents()`视图`remove()`方法是一种不好的做法吗？

除非您正在实现自己的`remove()`并且您不调用`Backbone.View.remove()`or ，否则这不是必需的`this.$el.remove()`。至少，如果您使用的是 jQuery。调用`remove()`Backbone 视图将调用`jQuery.remove()`无论如何都会删除所有 DOM 事件侦听器。

> 当简单地重新初始化视图变量时，我意识到我陷入了如此多的绑定问题。

很多人似乎使用 Backbone.Events，就像他们不需要清理之后的某种魔法一样，例如：

```
var View = Backbone.View.extend( {

  initialize : function ( options ) {

    // `on()` or `bind()`

    this.model.on( 'something', this.render, this );

  }

} ); 
```

[请参阅我关于将事件委托给 Backbone 中的父视图的](https://stackoverflow.com/questions/10485610/delegating-events-to-a-parent-view-in-backbone/10486571#10486571)答案

您遇到的幽灵事件问题是否可能与 Backbone 事件而不是 DOM 事件有关？

如果您保留模型对象但想摆脱该视图对象或其 Backbone 事件注册，则必须执行`view.model.off( null, null, this );`. 您必须取消绑定已在任何外部对象上注册的事件。如果你愿意，你可以覆盖`Backbone.View.remove()`并在那里做，但默认情况下，该方法只是`view.$el.remove()`.

# ruby - 使用 ruby ldap 创建新 LDAP 用户时出现“无效的 DN 语法”错误

> ID：10734211
> 
> 赞同：1
> 
> 时间：2012-05-24T08:57:41.283
> 
> 标签：ruby, ldap

当我尝试使用 ruby​​ 1.9.2 和 ruby​​-ldap gem ( [http://ruby-ldap.sourceforge.net/](http://ruby-ldap.sourceforge.net/) ) 创建一个新的 LDAP 用户时，我总是得到这个错误：“无效的 DN 语法”

我想不通，为什么会这样。与我的服务器的连接工作正常。可以毫无问题地读取现有用户的属性。

```
cn = "#{first_name}#{last_name}"

  entry = [
    LDAP.mod(LDAP::LDAP_MOD_ADD,'objectclass',['top','person', 'user']),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'name',  [cn]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'accountExpires',  ["0"]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'displayName',  [cn]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'name',  [cn]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'givenName',  [first_name]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'sn',  [last_name]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'userPrincipalName',  ["#{first_name}.#{last_name}@my.domain"]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'pwdLastSet', ["0"]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'sAMAccountName',  ["#{first_name}.#{last_name}"]),
    LDAP.mod(LDAP::LDAP_MOD_ADD | LDAP::LDAP_MOD_BVALUES, 'unicodePwd',  [password_hash]),
    LDAP.mod(LDAP::LDAP_MOD_ADD, 'userAccountControl',  ["66048"]),
  ]

  begin
    ldap_connection.add("cn=#{cn}, ou=MyUsers, dc=my, dc=domain", entry)
  rescue
    puts ldap_connection.err2string(ldap_connection.err)
  end 
```

例如，名字“John”和姓氏“Doe”会发生这种情况

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:52:01.470

验证是否可以使用已知的良好方法添加条目：`ldapmodify`. 创建一个包含[LDIF](https://www.rfc-editor.org/rfc/rfc2849)的文件并使用`ldapmodify`. LDIF 应如下所示：

```
dn: cn=<the cn>,ou=myusers,dc=my,dc=domain
objectClass: top
objectClass: person
objectClass: user
accountExpires: 0
cn: <the cn>
name: <the cn>
... (the rest of the attributes) 
```

添加使用`ldapmodify`：

```
ldapmodify -h hostname -p port -c -a -f <the-file-containing-ldif> \
   -D distinguished-name -w password 
```

`distinguished-name`应该是 LDAP 客户端中使用的授权 ID 。如果此命令成功，则 LDAP 客户端可以确定服务器已正确设置，并且授权 ID 具有足以在目录信息树中的该位置添加该条目的访问权限。

### 也可以看看

*   [LDAP：使用 ldapmodify](http://ff1959.wordpress.com/2011/07/25/master-the-ldapmodify-command-line-tool/)

# c# - 静态变量是类实例变量吗？

> ID：10734212
> 
> 赞同：3
> 
> 时间：2012-05-24T08:57:42.487
> 
> 标签：c#, variables, static

简单的问题：

静态变量是存在`class instance variable`还是`class variable`基础？

知道这`class instance variable`是为定义它的每个类和子类定义的变量。并且`class variable`是对定义它的所有子类（包括其自身）都是全局的变量。

编辑：知道我让很多 C#-ish 家伙窒息，我使用术语类实例，就好像一个类是某个 MetaClass 的实例一样。这大大简化了我的问题。虽然说如果你认为 VM 肯定有一个代表 evrey 类的工件（包含方法字典、实例大小、超类......），这并不是完全错误的。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T08:59:01.033

静态变量“属于”该类型——它们不是实例变量。

也就是说，它们在该类型的*所有*实例之间共享，包括[通用](http://msdn.microsoft.com/en-us/library/sz6zd40f.aspx)的封闭构造类型。

例外是用 装饰的静态变量[`ThreadStatic`](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)，使变量在线程中是唯一的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:01:24.177

静态变量的作用域是为给定的`AppDomain`. 它们也跨线程共享，除非您使用`ThreadStaticAttribute`，此时它们变为***每个***线程。

类成员显然作用于类的一个*实例*，但对于派生类来说不是“全局的”。根据访问修饰符，该成员也可能对派生实例可见。

具有泛型参数的类对于每个封闭的泛型类型都有一个静态变量：

```
class MyClass<T>
{
   public static string Name;
} 
```

所以`MyClass<int>`会有自己的副本，`Name`也会`MyClass<string>`有不同的副本。

* * *

查看您选择的答案，您似乎想要每个派生类都有一个静态变量？

您可以作弊并使用上面的泛型规则：

```
class Program
{
    static void Main(string[] args)
    {
        Derived1.WhatClassAmI = "Derived1";
        Derived2.WhatClassAmI = "Derived2";

        Console.WriteLine(Derived1.WhatClassAmI); // "Derived1"
        Console.WriteLine(Derived2.WhatClassAmI); // "Derived2"

        Console.WriteLine(BaseClass<Derived1>.WhatClassAmI); // "Derived1"
        Console.WriteLine(BaseClass<Derived2>.WhatClassAmI); // "Derived2"
        Console.Read();
    }

    class BaseClass<T> where T : BaseClass<T>
    {
        public static string WhatClassAmI = "BaseClass";
    }

    class Derived1 : BaseClass<Derived1>
    {
    }

    class Derived2 : BaseClass<Derived2>
    {
    }
} 
```

它们使用“相同”的静态，但由于类型闭包，每个都有自己的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:00:26.220

它们是类变量。在 C# 中没有什么比 Smalltalk 类实例变量更好的了。也就是说，没有办法定义一个在类的所有实例中通用的变量，但它的子类具有不同的值。

为了获得“类似”的行为，但缺点是类实例 var 只能在创建类的实例后才能访问，我做了这样的事情：

```
public class BaseClass
{
    private static Dictionary<Type, object> ClassInstVarsDict = new Dictionary<Type, object>();

    public object ClassInstVar
    {
        get
        {
            object result;
            if (ClassInstVarsDict.TryGetValue(this.GetType(), out result))
                return result;
            else
                return null;
        }
        set
        {
            ClassInstVarsDict[this.GetType()] = value;
        }
    }
}

public class DerivedClass1 : BaseClass
{
}

public class DerivedClass2 : BaseClass
{
} 
```

# iphone - 为自定义 UIBarButtonItem 设置文本

> ID：10734215
> 
> 赞同：7
> 
> 时间：2012-05-24T08:57:56.440
> 
> 标签：iphone, uibarbuttonitem

我需要为自定义 UIBarButtonItem 设置标题。

我有以下代码：

```
UIButton* backToRecent = [UIButton buttonWithType:UIButtonTypeCustom];
[backToRecent setImage:[UIImage imageNamed:@"back.png"]forState:UIControlStateNormal];

[backToRecent addTarget:self action:@selector(backToRecent) forControlEvents:UIControlEventTouchUpInside];
[backToRecent setFrame:CGRectMake(0, 0, 60, 30)];

UIBarButtonItem* backButtonItem = [[UIBarButtonItem alloc]initWithCustomView:backToRecent];
[backButtonItem setTitle:@"Recent"];
partViewController.navigationItem.leftBarButtonItem = backButtonItem;
[backButtonItem release]; 
```

但是该按钮出现时没有“最近”文本。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T00:38:16.717

穆罕默德，我怀疑你已经解决了这个问题，但这是一个简单的方法。希望这可以帮助遇到同样问题的人：

```
 UIBarButtonItem * backButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Recent" style:UIBarButtonItemStyleBordered target:self action:@selector(backToRecent)];
    self.navigationItem.leftBarButtonItem = backButtonItem; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T09:01:13.287

你应该在 UIButton 上设置标题，而不是 UIBarButtonItem

```
[backToRecent setTitle:@"Recent" forState:UIControlStateNormal]; 
```

而且变量和方法同名也不行

```
[backToRecent addTarget:self action:@selector(backToRecent) forControlEvents:UIControlEventTouchUpInside]; 
```

这是行不通的，因为你使用

```
[backToRecent setImage:[UIImage imageNamed:@"back.png"]forState:UIControlStateNormal]; 
```

尝试使用

```
[backToRecent setBackgroundImage:[UIImage imageNamed:@"back.png"]forState:UIControlStateNormal]; 
```

# mysql - 使用单人表存储和展示相关的家庭成员

> ID：10734216
> 
> 赞同：0
> 
> 时间：2012-05-24T08:57:57.687
> 
> 标签：mysql, join, relationship, create-table

我想创建一个使用下表返回父母及其监护人的查询。我的问题是如何使用 person 表中的 name 属性两次来返回看护者的姓名和父母的姓名。任何示例代码将不胜感激。我知道我没有很好地解释它，但是如果有人理解我的意思，请随时编辑上面的内容。更具体地说，我只想使用 person 表来存储有关父母及其子女的信息，并使用显示每个相关人员的姓名。我怎样才能用一张桌子做到这一点。

![在此处输入图像描述](../Images/7c166581a7383e6e030fc5c2785321e6.png)

使用提供的一些建议，我能够创建查询，但由于我的表有问题，它不起作用。我正在使用下表：

```
CREATE TABLE Person
(
personID INT NOT NULL,
name VARCHAR(50),
address VARCHAR(70),
phone VARCHAR(15),
email VARCHAR(30),
year INT,
PRIMARY KEY (personID)
);

CREATE TABLE Guardian
(
parentID INT NOT NULL,
childID INT NOT NULL,
PRIMARY KEY (parentID, childID)
FOREIGN KEY (parentID) REFERENCES (personID),
FOREIGN KEY (childID) REFERENCES (personID)
); 
```

我应该在哪里使用什么语句才能使其正常工作。我认为问题在于两个外键语句都引用了 person 表中的同一个键。在查找父项和子项时如何引用相同的属性而不会出现任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:04:37.527

```
SELECT
    Child.name AS ChildName,
    Parent.name AS ParentName
FROM Guardian
    INNER JOIN Person AS Child ON Child.personID = Guardian.childID
    INNER JOIN Person AS Parent ON Parent.personID = Guardian.parentID 
```

这将为每个父/子对返回一行。

重要的特性是两次引用 Person 表，但在每种情况下都给它一个不同的别名。然后，您可以以两个不同的角色引用该表。输出列也可以使用别名来区分连接表的两个实例中的同一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:03:06.203

你没有提到，但假设一个人只能有一个监护人，我认为你不需要两张桌子。

只需在映射到自身的 Person 表上添加一个 GuardianID。所以你会有这样的东西

```
Person
ID   name        GuardianID
1    The Father     null
2    The Son         1 
```

因此，如果您想了解一个人及其监护人，您可以

```
select *, (select p2.name from person wherep2.id=p.guardianid)
from person p
where p.id=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:03:42.887

首先修复您的创建表：

```
CREATE TABLE Guardian
(
parentID INT NOT NULL,
childID INT NOT NULL,
PRIMARY KEY (parentID, childID),
FOREIGN KEY (parentID) REFERENCES Person(personID),
FOREIGN KEY (childID) REFERENCES Person(personID)
); 
```

然后查询：

```
SELECT
  p.name as parentName,
  c.name as childName,
  Guardian.*
FROM Person AS p
  INNER JOIN Guardian ON p.PersonID=Guardian.parentID
  INNER JOIN Person AS c ON c.PersonID=Guardian.childID
WHERE
  -- whatever you want, e.g.
  p.Name='John' 
```

# symfony - 什么样的问题可能会要求 Doctrine 实体进行“级联持久操作”？

> ID：10734218
> 
> 赞同：0
> 
> 时间：2012-05-24T08:58:05.143
> 
> 标签：symfony, doctrine-orm

我的*Symfony2-Doctrine2*项目中有一个带有**getDislike()**函数的**Like**实体。一旦我检索到 Like 实体并在 echo 中调用 getDislike() 函数，则不会打印任何内容。

 ***```
echo '<br />'. $like->getDislike(); //Nothing is printed (1, 0, true, false)
echo '<br />'. $like->getId(); // the entity id is printed 
```

如果我在 if 条件下使用相同的实体调用相同的函数，

```
if($like->getDislike() == FALSE){ //throw an exception
....} 
```

然后返回以下错误：

```
A new entity was found through the relationship 'Acme\ArticleBundle\Entity\Article#likes' that
was not configured to cascade persist operations for entity: Acme\ArticleBundle\Entity  
\Like@00000000653f908100000000749fcbfe. Explicitly persist the new entity or configure cascading
persist operations on the relationship. If you cannot find out which entity causes the problem
implement 'Acme\ArticleBundle\Entity\Like#__toString()' to get a clue. 
```

为什么会出现前面的错误！我的代码中没有提到文章实体（当然，在学说方案中，许多赞与一篇文章之间存在关系，反之亦然）。

任何想法？根据要求，我添加了 Like 实体文件：

```
namespace Acme\ArticleBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Acme\ArticleBundle\Entity\Like
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Like
{

/**
 * @ORM\ManyToOne(targetEntity="Article")
 * @ORM\JoinColumn(name="article_id", referencedColumnName="id")
 */
protected  $article;    

/**
 * @ORM\Column(type="boolean")
 */
protected  $dislike;      

//.... other fields

/**
 * Set dislike
 *
 * @param boolean $dislike
 */
public function setDislike($dislike)
{
    $this->dislike = $dislike;
}

/**
 * Get dislike
 *
 * @return boolean 
 */
public function getDislike()
{
    return $this->dislike;
}

//.... other methods 
```

}

这是文章实体：

```
namespace Acme\ArticleBundle\Entity;

use Symfony\Component\Validator\Constraints as Assert;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Acme\ArticleBundle\Entity\Article
 *
 * 
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Acme\ArticleBundle\Repository\ArticleRepository")
 */
class Article
{

/**
 *
 * @ORM\OneToMany(targetEntity="Like", mappedBy="article")
 */
protected  $likes;    

//.... other fields

public function __construct() {
    ...
    $this->likes = new \Doctrine\Common\Collections\ArrayCollection();
    ...   
}    

} 
```

这是控制器代码：

```
 public function likeDislikeItemAction(){               
    if ($this->get('security.context')->isGranted('IS_AUTHENTICATED_FULLY')){
        $user = $this->get('security.context')->getToken()->getUser();

        $entityType = "AcmeArticleBundle:Article"; // This static for debugging
        $entityId = 1; // This static for debugging         

        $doctrine = $this->getDoctrine();

        $item = $doctrine
            ->getRepository($entityType)
            ->findOneById($entityId);
        if(is_object($item)){
           $itemlikes = $item->getLikes();
           $totvotes = sizeof($itemlikes);
           $numlikes = $this->getNumLikes($itemlikes);
           $numdislikes = $totvotes - $numlikes;

            $dislike_value = 'like'; // This static for debugging                
            if($dislike_value == 'like') $isDislike = FALSE;       
            else $isDislike = TRUE;

            $like =  $this->getLikeDislikeEntity($doctrine, $user, $entityType, $entityId);

            if(is_object($like)) { 
              $test = $like->getDislike();
              echo 'test val ' . $test;
            }
        }
       }
      return NULL;
     }

     private function getLikeDislikeEntity($doctrine, $user, $entityType, $entityId){
       if ($entityType == "AcmeArticleBundle:Article") {
        return $doctrine->getRepository("AcmeArticleBundle:Like")
                    ->findOneBy(array('author' => $user->getId(), 'article' =>$entityId));  
       }
       return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:24:32.520

最后，我发现了错误。我解释了错误消息（“*通过关系 'Acme\ArticleBundle\Entity\Article#likes' 找到了一个新实体*”），所以我输入了代码：

```
$itemlikes = $item->getLikes(); 
```

在检索 Like 实体的代码之后，即：

```
$like =  $this->getLikeDislikeEntity($doctrine, $user, $entityType, $entityId); 
```

然后，错误消失了！也许，问题是我在数据库中打开了同一行的两个副本（一个来自使用获取的列表`getLikes()`，另一个具有获取特定 Like 实例的函数，即 ie `getLikeDislikeEntity`）。我必须尝试查看它是否不提供相同的错误`getReference()`！`EntityManager`***

# javascript - JW Player 不能播放 m3u8 流？

> ID：10734219
> 
> 赞同：1
> 
> 时间：2012-05-24T08:58:06.937
> 
> 标签：javascript, jwplayer

检查这个例子，[http://developer.longtailvideo.com/player/branches/adaptive/test/provider.html](http://developer.longtailvideo.com/player/branches/adaptive/test/provider.html)，我自己试过这个例子，有我的代码：

```
<html>
<head>

    <script type="text/javascript" src="jwplayer.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <title>Provider tests</title>
    <style>
        body { padding: 50px; font: 13px/20px Arial; background: #EEE; }
        form { margin-top: 20px; }
        #player { -webkit-box-shadow: 0 0 5px #999; background: #000; }
        ul { margin-top: 40px; padding: 0 0 0 20px; list-style-type: square; }
    </style>

</head>
<body>

    Test M3U8
    <div id="player">You need Flash to play these tests</div>

    <script type="text/javascript">
        jwplayer("player").setup({
            file: '../m3u8/index.m3u8',
            flashplayer: 'player.swf',
            provider:'adaptiveProvider.swf',
            height: 360,
            width: 640
        });
        function loadStream(url) {
            jwplayer("player").load({file: url,provider: 'adaptiveProvider.swf'});
            jwplayer("player").play();
            return false;
        }

        $(document).ready(function() {
            loadStream('http://localhost/m3u8/index.m3u8');
        });
    </script>
    <ul id="streamlist"></ul>
    <div id="panel"></div>
</body>
</html> 
```

但是 Jw Play 无法运行

BTW：我的vlc可以玩得`http://localhost/m3u8/index.m3u8` 很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T11:33:14.110

看来您需要购买高级 jwplayer 许可证才能播放 m3u8 流。你可以在他们的网站上阅读

[http://www.jwplayer.com/pricing/](http://www.jwplayer.com/pricing/)

它在第三个框下显示 Apple HLS Streams，这就是 m3u8 的真正含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:04:22.847

也许它是您没有的缺少的 !DOCTYPE 声明。

我没有能力亲自测试这个，但试试这个版本，它还包括基于原始文件的其他修复。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>Provider tests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">

    </script>
        <script type="text/javascript" src="jwplayer.js">
    </script>

<style type="text/css">
/*<![CDATA[*/
        body { padding: 50px; font: 13px/20px Arial; background: #EEE; }
        form { margin-top: 20px; }
        #player { -webkit-box-shadow: 0 0 5px #999; background: #000; }
        ul { margin-top: 40px; padding: 0 0 0 20px; list-style-type: square; }
/*]]>*/
</style>

</head>
<body>

Test M3U8

<div id="player">You need Flash to play these tests</div>

<script type="text/javascript">
//<![CDATA[
        jwplayer("player").setup({
            file: '../m3u8/index.m3u8',
            flashplayer: 'player.swf',
            provider:'adaptiveProvider.swf',
            height: 360,
            width: 640
        });
        function loadStream(url) {
            jwplayer("player").load({file: url,provider: 'adaptiveProvider.swf'});
            jwplayer("player").play();
            return false;
        }

//]]>
</script>

<ul id="streamlist"></ul>
<div id="panel"></div>

<script type="text/javascript">
//<![CDATA[
        $(document).ready(function() {
            loadStream('http://localhost/m3u8/index.m3u8');
        });
//]]>
</script>

</body>
</html> 
```

**编辑：**请注意，您必须在同一个域上才能工作。此外，**jwPlayer**论坛提到`.m3u8`仅适用于**iOS 和 Safari**。参考[**这里**](http://www.longtailvideo.com/support/forums/jw-player/setup-issues-and-embedding/17350/m3u8-live-streaming)。

要使用您的设备测试由 LongTail Video 网站提供的有效**.m3u8流播放网页，请访问此**[**网页**](http://developer.longtailvideo.com/player/trunk/fl5/js/test/examples/m3u8.html)。使用桌面浏览器时要小心！它或**VLC 媒体播放器插件**可能会因悲伤的表情而崩溃。

# java - XPath 表达式不起作用

> ID：10734222
> 
> 赞同：1
> 
> 时间：2012-05-24T08:58:16.900
> 
> 标签：java, xml, xpath

我有一个这样的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT family (person)+>
<!ELEMENT person (name) >
<!ATTLIST person idnum ID #REQUIRED
gender (male | female) #REQUIRED
father IDREF #IMPLIED
mother IDREF #IMPLIED
children IDREFS #IMPLIED >
<!ELEMENT name (#PCDATA)>

<?xml version="1.0"?>
<!DOCTYPE family SYSTEM "family.dtd">
<family>
<person idnum = "T11" gender = "male" children ="T13 T14 T15"><name>11</name></person>
<person idnum = "T12" gender = "female" children ="T13 T14 T15"><name>12</name></person>
<person idnum = "T13" gender = "male" father="T11" mother="T12"><name>13</name></person>
<person idnum = "T14" gender = "male" father="T11" mother="T12"><name>14</name></person>
<person idnum = "T15" gender = "female" father="T11" mother="T12" children="T33"><name>15</name></person>
<person idnum = "T21" gender = "male" children="T23"><name>21</name></person>
<person idnum = "T22" gender = "female" children="T23"><name>22</name></person>
<person idnum = "T23" gender = "male" father="T21" mother="T22" children="T33"><name>23</name></person>
<person idnum = "T33" gender = "female" father="T23" mother="T15"><name>33</name></person>
</family> 
```

我想检查查询：

1.  所有没有孩子的人（`male`& `female`）

2.  所有没有男孩的人（即。`SONS`）

我试过了 ：

1.  `/family/person[count(children)==0]`

2.  `/family/person[count(children)==0 and children!=male]`

但它不起作用。

你能解释一下吗？谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:55:45.290

XPath 中的等号运算符是“=”，而不是“==”。

写孩子！=男性大概是一厢情愿的想法，我希望你真的没有想到会起作用。

据推测，没有孩子的人可能通过没有 @children 属性或属性存在但空白来表示。您可以通过测试为您的第一个查询涵盖这两种情况`/family/person[normalize-space(@children)='']`

第二个查询比较困难，因为它涉及到一个连接。XPath 1.0 不能处理每个连接查询；XPath 2.0 可以。你没有说你正在使用哪个。另一个复杂情况是 id() 函数可能有点不稳定：处理管道并不总是保留有关哪些属性是 ID 的信息。但假设 id() 在您的环境中工作，您可以执行第二个查询（在 XPath 1.0 或 2.0 中）为

```
/family/person[not(id(@children)[@gender='male'])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:02:31.037

这些 xpath 不正确。您正在尝试查找子元素，但它们是属性。

它应该是这样的：

```
//person[not(@children)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:05:05.363

1.  您像 xml-tag 一样使用“person”，但它是一个 tag-attribute。所以你最好使用@children。
2.  使用 count(@children) 不起作用，因为只有一个名为 children 的属性
3.  您不能从属性值中拼接和计数字符串

# javascript - Javascript - 价格和浮动

> ID：10734226
> 
> 赞同：2
> 
> 时间：2012-05-24T08:58:30.667
> 
> 标签：javascript, floating-point, decimal, currency, decimal-point

我正在对价格进行一些操作`i.e. decimal numbers such as 999.99`

问题是我找不到在 JavaScript 中使用浮点数的替代方法。浮动并不完全准确，也不足以准确定价。

运算包括乘法、加法、减法和除法。

通常编程语言都有一个定点十进制库，但在 JavaScript 中找不到类似的库。

帮助会很棒！

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:16:19.377

在处理需要精确的价格或其他财务数据时，请始终使用整数，表示您希望处理的次要单位的数量。至少它应该是美分（戈比，或者你选择的货币使用的任何其他 1/100 分数）。金融系统通常使用更少的单位表示为整数以获得更高的精度，例如微（例如 $1.23 = 1230000 微）。这将帮助您避免与 IEEE 浮点计算相关的许多问题，并确保您的精度正是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:01:24.800

JavaScript 只有[`Number`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number)对象。

您可以使用`toFixed(x)`where x 是小数点后的位数，或者`toPrecision(x)`x 是所需的长度。

# java - 从远程 EJB 调用返回大文件

> ID：10734229
> 
> 赞同：5
> 
> 时间：2012-05-24T08:58:40.293
> 
> 标签：java, jakarta-ee, streaming, ejb, rmi

我有一个 EJB 客户端，它需要**从 EJB 服务器**(JBoss) 检索一个大文件。

实现这一点的明显方法是服务器提供一个 EJB 外观，其方法如下：

```
public byte[] getFile(String fileName); 
```

这意味着，**将整个文件加载到内存**中的字节数组中，然后在线发送这个字节数组。

问题是这种方法将整个文件加载到内存中，并且由于文件很大，它会溢出。

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T01:34:42.763

HTTP would be a better choice, but that said, try this serialization trick:

```
import java.io.*;

public class FileContent implements Serializable {

    private transient File file;

    public FileContent() {
    }

    public FileContent(File file) {
        this.file = file;
    }

    private void writeObject(ObjectOutputStream out) throws IOException {
        // 1\. write the file name
        out.writeUTF(file.getAbsolutePath());

        // 2\. write the length
        out.writeLong(file.length());

        // 3\. write the content
        final InputStream in = new BufferedInputStream(new FileInputStream(file));
        final byte[] buffer = new byte[1024];

        int length;
        while ((length = in.read(buffer)) != -1) {
            out.write(buffer, 0, length);
        }
        out.flush();
        in.close();
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
        // 1\. read the file name
        final String path = in.readUTF();

        // 2\. read the length
        long remaining = in.readLong();

        // 3\. read the content
        file = new File(path);
        final OutputStream out = new BufferedOutputStream(new FileOutputStream(file));

        final byte[] buffer = new byte[1024];

        while (true) {
            int length = in.read(buffer, 0, (int) Math.min(remaining, buffer.length));
            if (length == -1) break;

            out.write(buffer, 0, length);

            remaining -= length;
            if (remaining <= 0) break;
        }
        out.flush();
        out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T02:18:03.950

[RMIIO](http://openhms.sourceforge.net/rmiio/)库正是为这种情况而构建的。它甚至包括 @DavidBlevins 解决方案[DirectRemoteInputStream](http://openhms.sourceforge.net/rmiio/apidocs/com/healthmarketscience/rmiio/DirectRemoteInputStream.html)的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T07:38:48.930

您可以使用包装在 BytearrayOutputStream 中的 ZipOutputStream。此操作将允许您返回压缩字节数组，首先使用您的方法声明，以减少 RMI 传输的开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T19:40:31.277

RMI 协议对于发送大文件来说是一个非常糟糕的解决方案。一个可能但安静低效的解决方案是将文件分成小块，从 EJB 发送它们并在客户端重新组装文件。像这样的东西：

```
public class FileMetadata {
    ....
    private long chunkCount;
    private long chunkSize;
    ....
}

...
public FileMetadata getFileMetadata(String fileName) {...}
public byte[] getFileChunk(String fileName, long chunkNumber) {...}
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T21:22:46.010

我会重新考虑你的架构，恕我直言，你应该保持你的 ejb 调用快速，如何从 ejb 调用返回文件的位置，然后在另一个过程中处理下载，在这里查看更多关于如何下载大文件的[信息如何使用 Java 从 Internet 下载和保存文件？](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-20T12:27:01.797

我采用的方法（注意你只适用于s）是从 EJB`@LocalBean`写入 a并返回 a以检索数据并将其从客户端删除。 也可以使用，但请注意不是.`File.createTempFile``File``Path``Serializable`

但是，您也可以将其写入由 HTTP 服务器托管的文件并稍后从那里检索它。然后发送 HTTP`DELETE`请求以删除该文件。您的 EJB 将改为返回一个`java.net.URI`.

# java - 使用 BigDecimal 数字进行四舍五入

> ID：10734230
> 
> 赞同：53
> 
> 时间：2012-05-24T08:58:43.813
> 
> 标签：java, rounding, bigdecimal

我想设置两个 BigDecimal 数字`a`和`b`. 如本例所示：

```
BigDecimal a = new BigDecimal("2.6E-1095");
        BigDecimal b = new BigDecimal("2.7E-1105");
        int i = 112, j=1;

        BigDecimal aa = a.setScale(i+j);
        BigDecimal bb = b.setScale(i+j); 
```

当我跑步时，我有这个例外：

```
java.lang.ArithmeticException: Rounding necessary
    at java.math.BigDecimal.divideAndRound(BigDecimal.java:1439)
    at java.math.BigDecimal.setScale(BigDecimal.java:2394)
    at java.math.BigDecimal.setScale(BigDecimal.java:2437) 
```

为什么需要四舍五入？如果我不想到处走走，请问有什么解决办法？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-24T09:07:19.877

您有两个 BigDecimal 数字，这两个数字都需要超过 1000 个小数位。尝试将比例设置为只有 113 位小数意味着您将失去精度，因此您需要四舍五入。

您可以使用采用 RoundingMode 的 setScale 方法来防止异常，但不能防止舍入。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-06-15T18:20:43.177

尝试使用 setScale 方法的 roudingMode。

就像是：

```
BigDecimal aa = a.setScale(i+j, BigDecimal.ROUND_HALF_DOWN); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-24T09:11:43.803

四舍五入是必要的。

在[BigDecimal 的 javadoc 中](http://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html)，它表示`BigDecimal`表示为 (unscaledValue × 10 ^(-scale) )，其中`unscaledValue`是一个任意长的整数，而 scale 是一个 32 位整数。

2.6*10 ^(-1095)需要至少 1096 的比例才能准确表示。它不能用（任何整数）*10 ^(-113)准确表示。因此，您需要提供一个`roundingMode`.

# c++ - 使用 websocketpp 时“调用绑定没有匹配的函数”

> ID：10734236
> 
> 赞同：0
> 
> 时间：2012-05-24T08:59:14.753
> 
> 标签：c++, boost, websocket, boost-bind

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:03:19.320

Take a look at the [boost documentation](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html#err_overloaded). There is a good example.
You need to resolve the ambiguity by your self.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:23:56.093

For those who are still wondering how to implement this:

```
void(websocketpp::role::server<websocketpp::server>::*f)(uint16_t,size_t) = &websocketpp::role::server<websocketpp::server>::listen;

boost::thread t(f, &endpoint, port, 1); //No need to use boost::bind here 
```

and after that call t.detach() or endpoint.stop() and t.join()

# objective-c - 自定义uitablecell中的uibutton

> ID：10734239
> 
> 赞同：0
> 
> 时间：2012-05-24T08:59:20.713
> 
> 标签：objective-c, ios, ios5, uibutton

我通过 xcode 和目标 c 构建一个 iphone 应用程序。为 ios5.0 min 目标构建。我创建了一个自定义的 uitablecell 并将其加载到视图控制器的表中没有问题。此单元格包含一个按钮。当用户在任何单元格中点击此按钮时，我希望它在视图控制器中调用相同的函数。我过去这样做的方法是使自定义单元格的文件所有者成为有问题的视图控制器，然后简单地控制将按钮拖动到视图控制器中并将 ibaction 函数放在那里。总是工作没问题。到现在。

> -[__NSCFString loadMerchant:]：无法识别的选择器发送到实例 0x8689e50 2012-05-24 09:56:14.630 [3217:16103] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString loadMerchant:]：无法识别选择器发送到实例 0x8689e50'

这是我得到的错误。我确保该功能不会意外链接到错误的按钮，该功能也不会错误地出现在 cell.m 中以及我能想到的任何其他简单错误。

有谁知道完成我想做的事情的正确方法？

编辑：自定义单元格

```
@interface TimelineCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UIButton *nameButton;

@end

@implementation TimelineCell

@synthesize nameButton;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self; }

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state }

@end 
```

下面是视图控制器

```
 - (IBAction)loadMerchant:(id)sender;

 - (IBAction)loadMerchant:(id)sender { } 
```

就是这样。当按钮被点击并出现上述错误时会发生崩溃

编辑：在 nib 文件中删除链接并只是将操作添加到按钮似乎可以解决问题，但如果有人能对此有所了解，我仍然想知道它的原因，将不胜感激

在 cellForRowAtIndexPath 内制作

```
 UIButton *b = (UIButton*)[cell viewWithTag:1];
 [b addTarget:self action:@selector(loadMerchant:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:31:25.820

我最终做的是在 nib 文件中标记按钮，然后在代码中通过 cellForRowAtIndexPath 中设置的单元格中的代码添加目标。

```
UIButton *b = (UIButton*)[cell viewWithTag:1];
 [b addTarget:self action:@selector(loadMerchant:) forControlEvents:UIControlEventTouchUpInside]; 
```

虽然这解决了问题，但我仍然不确定为什么通过 IB 建立的链接首先失败了。

# vim - vim：如何用以前拉过的文本（不止一次）替换光标下的字符？

> ID：10734240
> 
> 赞同：29
> 
> 时间：2012-05-24T08:59:22.143
> 
> 标签：vim, replace

假设我通过使用视觉选择 + yank 将 3 个字符“foo”拖放到剪贴板中，即：'vllly'

然后我将光标移动到第 5 行的另一个字符（我们称之为字符 x）上，我想用我之前拉出的内容替换它，即 foo。

我可以使用 'p' 在 x 之后粘贴 foo，或使用 'P' 在 x 之前粘贴 foo，但我想用 foo*替换*x。

我可以使用 'vp' 将 x 替换为 foo，但这只能工作一次，因为它会在我的剪贴板中留下 x。换句话说，如果我移动到下一次出现的 x 并再次点击 vp，它不会用 foo 替换它。

当然，我可以使用 :s/x/foo/gc 进行搜索/替换，然后忽略所有我不想替换的 x 出现，但这有点乏味，尤其是当我需要要做的是替换 2 或 3 次出现的 x 非常接近我的光标但不在同一行（即：第 2、3 和 7 行）。

所以目前我正在使用：2,7s/x/foo/gc，但我想知道是否有办法将光标移动到 x 并点击 [在此处插入魔法按钮] 将其替换为 foo。然后我可以移动到下一个出现的 x 并再次按下 [magic button] 并发出一声巨响，它再次将 x 替换为 foo。

尽管使用这个类比让我很痛苦，但假设您正在记事本中输入，然后选择 3 个字符，按 Ctrl+c 将它们复制到剪贴板，然后突出显示 x，然后按 Ctrl+v 将其替换为富。然后突出显示另一个 x，然后再次按 Ctrl+v，依此类推。

我如何在 vim 中做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-24T09:25:59.093

怎么样`s<C-r>0`，这可以重复`.`

*   `s`删除光标下的字符并使您进入插入模式。
*   `<C-r>0`插入寄存器 0，它保存被抽出的文本。

您也可以手动使用`s`和键入`foo`，这也可以重复使用`.`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T09:17:45.083

Paste from the 0 register with `v"0p`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:17:14.363

将您的“foo”复制到另一个寄存器中，例如注册一个：

> “啊

然后直观地选择要替换为“foo”的字符并按

> “AP

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:18:08.100

This is less than ideal, but if you yank to named buffer `a` (eg yank with `"ay`), you can use `x"aP`. Use your favorite map to make it a single keystroke.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T12:32:38.757

我经常需要这个，为此我写了一个插件：[ReplaceWithRegister](http://www.vim.org/scripts/script.php?script_id=2703)。

这个插件提供了一个二合一`gr`命令，用寄存器的内容替换 {motion} 覆盖的文本、整行或当前选择；旧文本被删除到黑洞寄存器中，即它消失了。

# grouping - 如何在 slickgrid 中进行多列分组？

> ID：10734245
> 
> 赞同：3
> 
> 时间：2012-05-24T08:59:52.333
> 
> 标签：grouping, slickgrid, expand

我是 slickgrid 的新手。我已经浏览了几个 slickgrid 的例子，并且对基础知识很好。我有一个场景，我需要基于多列进行分组，但 slickgrid 分组基于单列。

如何在 slickgrid 中进行多列分组，并在每个组上进行展开和折叠功能？

任何了解此解决方案的人，请以基本方式解释，因为我是 slickgrid 的新手。

我的要求就像在此链接[slickgrid-grouping-example](http://mleibman.github.com/SlickGrid/examples/example-grouping)中对行本身进行分组。此示例用于基于一列进行分组。我的要求是基于多列分组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:02:22.377

我知道这个问题已经过时了，但不久前我实现了这个功能，并在我的名字下在 Github 上的 SlickGrid 项目队列中收到了一个拉取请求。您也许可以尝试一下并给我一些反馈。为此，我修改了 3 个文件，包括示例文件。在这一点上，我不知道我的提交是否会被接受，因此请自行承担风险，尽管我对我的解决方案非常有信心，因为我已经在工作中使用它。这是它的链接：[https ://github.com/mleibman/SlickGrid/pull/522/files](https://github.com/mleibman/SlickGrid/pull/522/files)

这是 3 个多列分组的示例，此代码部分也来自`example-grouping.html`我修改过的文件。定义多个分组使用数组，与之前的实现非常相似，只是在定义多个分组时将其包装在数组中。

```
function groupByDurationPercentageStart() {
  dataView.groupBy(
    ["duration", "percentComplete", "start"],
    [
      (function (g) {
        return "Duration:  " + g.value + "  <span style='color:green'>(" + g.count + " items)</span>";
      }),
      (function (g) {
        return "Complete:  " + g.value + "  <span style='color:green'>(" + g.count + " items)</span>";
      }),
      (function (g) {
        return "Start Date:  " + g.value + "  <span style='color:green'>(" + g.count + " items)</span>";
      })
    ],
    [
      function (a, b) {
        return a.value - b.value;
      },
      function (a, b) {
        return a.value - b.value;
      },
      function (a, b) { // string sorting
        var x = a.value, y = b.value;
        return x == y ? 0 : (x > y ? 1 : -1);
      }
    ]
  ); 
  dataView.setAggregators([
    new Slick.Data.Aggregators.Avg("percentComplete"),
    new Slick.Data.Aggregators.Sum("cost")
  ], true, false);     
} 
```

希望它对你们有帮助，现在它确实具有所有功能，我喜欢这个网格 =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:37:58.057

我想您正在寻找这样的功能？

[http://bit.ly/JTlf0z](http://bit.ly/JTlf0z) 或 [http://bit.ly/KuncBU](http://bit.ly/KuncBU)

以上示例来自 ExtJS 网格和 jQuery.easyUI 插件。

这似乎是目前 SlickGrid 中不可用的东西（我不是 SlickGrid 专业人士，这正是我从一些谷歌搜索中推断出来的）。您很可能必须自己编写代码。

（当然，如果您不想切换到上述网格之一；）。）

挖掘源代码，找到它生成列和列标题的位置并开始处理它。您可以查看上面提到的其他网格以获取有关实现此功能的一些指导（关于使用的 HTML 标记和 CSS）。

您很可能必须修改“列”数组的定义方式，以在列分组标题中包含数据。

就像是：

```
var columns = [
  {title:'Group 1', columns:[
    {id: "field1", name: "Field 1", field: "field1"},
    {id: "field2", name: "Field 2", field: "field2"},
  ]},
  {id: "field3", name: "Field 3", field: "field3"},
  {title:'Group 2', columns:[
    {id: "field4", name: "Field 4", field: "field4"},
    {id: "field5", name: "Field 5", field: "field5"},
    {id: "field6", name: "Field 6", field: "field6"},
  ]}
]; 
```

然后修改列生成代码以检查是否存在嵌套的“列”字段并使用它来生成列标题？

只是一个想法:)。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T23:12:25.403

实际上，光滑的网格分组不仅限于一列。
查看 DataView API 的 groupBy 方法。它具有以下签名：

```
function groupBy(valueGetter, valueFormatter, sortComparer){...} 
```

所以你感兴趣的是第一个参数。它可以是一个字符串，表示要分组的单个列名，也可以是一个函数。达达！
长话短说，以下是如何按多列分组：

```
 dataView.groupBy(
      //Grouping value
      function (row) {
          return row["groupColumn1"]+":"+row["groupColumn2"]+":"+row["groupColumn3"];
      },
      //Group display
      function (group) {
       var values = g.value.split(":", 3); //3 is number of grouping columns*
       return "Col1: "+values[0]+", Col2: "+values[1]+", Col3:" + values[2];
      },
      //Group comparator/sorting
      function (a, b) {
          return a.value - b.value;
      }
  ); 
```

# c - 使用 lwIP 的原始 TCP API 时的性能问题

> ID：10734247
> 
> 赞同：4
> 
> 时间：2012-05-24T09:00:02.600
> 
> 标签：c, performance, tcp, lwip

我使用 lwIP 为我的系统添加网络功能。在我的平台上，我构建了一个缓冲区，每次它都满时我想发送它。这可能会很快发生。该系统直接连接到专用 LAN 中的交换机。最初，数据的发送在 2 秒之间有一个非常大的时间间隔。此外，如果我的记忆正确，数据包的大小为 720 字节。使用的缓冲区目前有大约 20000 字节的容量，我可能会决定在未来增加这个容量。网络有 100 mbit 的速度，我想在我的平台上接近这些速度。

在寻找速度慢的原因时，我最终选择了 lwIP 的配置。在此之前，我改变了我的发送机制。我使用原始 lwIP API，目前我将数据编写如下：

```
tcp_write(<pcb>, (const void*) data, <bytes>, TCP_WRITE_FLAG_COPY);
//<bytes> is at most tcp_sndbuf(<pcb>) 
```

我知道复制标志会影响性能，但添加它是因为我不想在实际发送数据之前覆盖数据。（并且标志不是主要问题，但一旦正常工作就需要打磨）在先前的解决方案中，我省略了标志，只是等待所有字节被确认（在通过调用 tcp_output 写入后强制发送数据之后()) 通过使用回调函数。（这可能是更糟糕的性能明智，我不认为这是相关的）

我对 lwIP 中的设置进行了一些尝试，这似乎有所不同。我认为窗口大小特别有影响，尽管我不太确定。目前我显着增加了窗口大小，即使我得到了一个数据包的突发，它们之间大约有 2 毫秒（而不是 2 秒！），随后是很长一段时间的“无”，然后又是一个突发。我希望它以它应该能够达到的速度连续发送，最多应该是 100 mbit，但至少 10 mbit 并不奇怪，对吧？

我加载了wireshark，看看发生了什么。

192.168.1.26 是我运行 windows 的台式电脑。192.168.1.192 是使用 lwIP 的嵌入式系统。

最初，我从桌面向 lwIP 系统发送一个启动请求，让系统知道它应该在每次缓冲区满时开始发送缓冲区。如果相关，这是跟踪的相应部分：

```
5    2.007754    192.168.1.26    192.168.1.192    TCP    61    [TCP segment of a reassembled PDU]
6    2.008196    192.168.1.192    192.168.1.26    TCP    60    patrolview > afs3-fileserver [SYN] Seq=0 Win=65535 Len=0 MSS=1400
7    2.226238    192.168.1.192    192.168.1.26    TCP    60    afs3-fileserver > 50015 [ACK] Seq=1 Ack=8 Win=65528 Len=0
13    4.976858    192.168.1.192    192.168.1.26    TCP    60    patrolview > afs3-fileserver [ACK] Seq=1 Ack=1 Win=65535 Len=0
22    6.976572    192.168.1.192    192.168.1.26    TCP    60    [TCP segment of a reassembled PDU]
23    7.177903    192.168.1.26    192.168.1.192    TCP    54    50015 > afs3-fileserver [ACK] Seq=8 Ack=2 Win=64399 Len=0 
```

我相信这没关系，尽管我不确定。无论如何，在此之后实际发送发生。相关跟踪如下 开始时间是 207.992115，应该被认为是开始时间。预计与 7.177903 之间的差异：

```
2578    207.992115    192.168.1.192    192.168.1.26    Gryphon    1422    - Invalid -
2581    208.194336    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=1369 Win=64400 Len=0
2582    208.195880    192.168.1.192    192.168.1.26    TCP    1422    [TCP segment of a reassembled PDU]
2583    208.197035    192.168.1.192    192.168.1.26    TCP    1422    [TCP segment of a reassembled PDU]
2584    208.197134    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=4105 Win=64400 Len=0
2585    208.198712    192.168.1.192    192.168.1.26    TCP    1422    [TCP segment of a reassembled PDU]
2586    208.199867    192.168.1.192    192.168.1.26    TCP    1422    [TCP segment of a reassembled PDU]
2587    208.199965    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=6841 Win=64400 Len=0
2588    208.200927    192.168.1.192    192.168.1.26    TCP    1314    [TCP segment of a reassembled PDU]
2590    208.397469    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=8101 Win=63140 Len=0 
```

看来我目前发送的东西比桌面 ACKing 更快。上述跟踪后的流量显示为黑条，如下所示：

```
2591    208.399051    192.168.1.192    192.168.1.26    TCP    1422    [TCP Previous segment lost] [TCP segment of a reassembled PDU]
2592    208.399136    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2590#1] afs3-fileserver > patrolview [ACK] Seq=1 Ack=8101 Win=63140 Len=0
2593    208.400208    192.168.1.192    192.168.1.26    Gryphon    1422   
2594    208.400285    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2590#2] afs3-fileserver > patrolview [ACK] Seq=1 Ack=8101 Win=63140 Len=0
2595    208.401361    192.168.1.192    192.168.1.26    Gryphon    1422    - Invalid -
2596    208.401445    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2590#3] afs3-fileserver > patrolview [ACK] Seq=1 Ack=8101 Win=63140 Len=0
2597    208.402425    192.168.1.192    192.168.1.26    Gryphon    1314   
2598    208.402516    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2590#4] afs3-fileserver > patrolview [ACK] Seq=1 Ack=8101 Win=63140 Len=0
2599    208.403588    192.168.1.192    192.168.1.26    Gryphon    1422    [TCP Fast Retransmission] Command response
2600    208.403685    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=14833 Win=64400 Len=0
2605    209.992237    192.168.1.192    192.168.1.26    Gryphon    1422    - Invalid -
2607    210.200219    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=16201 Win=63032 Len=0
2608    210.201819    192.168.1.192    192.168.1.26    Gryphon    1422    [TCP Previous segment lost] - Invalid -
2609    210.201903    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2607#1] afs3-fileserver > patrolview [ACK] Seq=1 Ack=16201 Win=63032 Len=0
2609    210.201903    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2607#1] afs3-fileserver > patrolview [ACK] Seq=1 Ack=16201 Win=63032 Len=0
2611    210.203070    192.168.1.26    192.168.1.192    TCP    54    [TCP Dup ACK 2607#2] afs3-fileserver > patrolview [ACK] Seq=1 Ack=16201 Win=63032 Len=0
2955    345.001223    192.168.1.192    192.168.1.26    Gryphon    1422    [TCP Retransmission] 
```

现在在这一点之后有一个我无法解释的巨大延迟。下一个数据包在 345 秒到达，这是 135 秒的差异。（虽然在大多数情况下它有点少，但仍然太高了）它开始如下：

```
2955    345.001223    192.168.1.192    192.168.1.26    Gryphon    1422    [TCP Retransmission]
2958    345.001707    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=20305 Win=64400 Len=0
2959    345.003336    192.168.1.192    192.168.1.26    TCP    1422    [TCP segment of a reassembled PDU]
2960    345.004395    192.168.1.192    192.168.1.26    TCP    1314    [TCP segment of a reassembled PDU]
2961    345.004494    192.168.1.26    192.168.1.192    TCP    54    afs3-fileserver > patrolview [ACK] Seq=1 Ack=22933 Win=64400 Len=0 
```

等等

后来虽然提到的延迟更短，但也会出现类似的问题。我的问题是：如何解决从我的平台发送缓慢的问题，我应该如何配置我的 lwIP 设置以获得体面/良好的结果？我想快速发送数据。（我的网络能够达到 100Mbps，越接近越好）我认为我目前完全搞砸了我的设置，但我不确定如何根据我的需要对其进行微调。以下是我的 lwipopts.h 中的一些（希望如此）相关设置

文件：

```
#define MEM_SIZE                        65000
#define PBUF_POOL_SIZE                  1024
#define IP_FRAG_USES_STATIC_BUF         0
#define TCP_WND                         65535
#define TCP_MSS                         1400
#define TCP_SND_BUF                     65535
#define PBUF_POOL_BUFSIZE               LWIP_MEM_ALIGN_SIZE(1528)
#define LWIP_TCP_KEEPALIVE              1
#define LWIP_SO_RCVTIMEO                1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:37:54.597

我使用 beaglebone 和以下设置遇到了类似的问题

```
#define MEM_SIZE                        (1024 * 1024) /* 1MiB */
#define MEMP_NUM_PBUF                   1024
#define MEMP_NUM_TCP_PCB                32
#define PBUF_POOL_SIZE                  1024
#define TCP_MSS                         1460
#define TCP_WND                         (4*TCP_MSS)
#define TCP_SND_BUF                     65535
#define TCP_OVERSIZE                    TCP_MSS
#define TCP_SND_QUEUELEN                512
#define MEMP_NUM_TCP_SEG                512 
```

使用 tcp_sent 轮询函数，我基本上检查了缓冲区中有多少字节，并立即用另一个样本将它们填充到轮询函数本身中。这是为了检查整个

我很惊讶线鲨在大约**几毫秒内显示****了数据包的爆发，**然后在 700 毫秒**内什么也没有**。

 ****深入我发现的堆栈，这恰好发生**在**发送 65535 个字节的那一刻（或大约在这个附近）。

通过**禁用内存健全检查解决了所有问题**

查看您的*lwipopts.h*，是否偶然您没有在某处定义：

```
#define MEMP_SANITY_CHECK 1 
```

如果是这样，请删除该行或将其设置为零。因此，我的数据包发送性能没有提高（以最大速度发送数据时我仍然在 11Mbits 左右），但总吞吐量显着增加，因为两个发送数据包之间的时间现在是恒定的并且大约需要 100us。

需要说明的是，这仍然没有解决 100MBit 线路上只有 11MBits 完全专用于该设备的问题****

# jquery - 高亮文本框边框颜色几秒钟？

> ID：10734249
> 
> 赞同：16
> 
> 时间：2012-05-24T09:00:15.330
> 
> 标签：jquery, html, css

嗨，我想突出显示文本框边框颜色几秒钟，然后我想将其改回白色。addClass 函数是否也可以指定时间。任何其他方式？尝试使用[http://jsfiddle.net/RW2s4/7/](http://jsfiddle.net/RW2s4/7/)不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T09:08:10.920

这个小脚本在输入字段中添加了两秒钟的“highlight”类：

```
$('#text').change(function() {
    var jElement = $(this);
    jElement.addClass('highlight');
    setTimeout(
        function() { jElement.removeClass('highlight'); },
        2000
    );
}); 
```

另请参阅[此示例](http://jsfiddle.net/tyPct/)。

或者[在这里](http://jsfiddle.net/RW2s4/15/)你和我的解决方案的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:03:28.887

您可以使用`switchClass`，例如：

```
$("#element").switchClass("removeThisClass", "addThisClass", 1000) 
```

演示小提琴：[这里](http://jsfiddle.net/tK3Sv/1/)

参考：[JQuery 文档](http://jqueryui.com/docs/switchClass/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T08:01:56.337

在单击幻灯片上突出显示 div 到 div

```
$('.box').click(function() {
    var jElement = $(this);
    jElement.addClass('highlight');
    setTimeout(
        function() { jElement.removeClass('highlight'); }, 
        500
    );
    //$(window).scrollTop($('.box3').offset().top,100);
    $("html, body").delay(100).animate({
        scrollTop: $('.box2').offset().top 
    }, 2000);

});

    <button>http://jsfiddle.net/tyPct/198/    </button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:22:11.047

观看现场 [演示](http://jsbin.com/izeluj/4)

```
$(function(){

  setTimeout(ChangeBorder, 2000);

  function ChangeBorder() {
     $(".highlight").css({"border-color":"red"});
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T09:43:10.420

检查 jquery animate 函数，该函数在一段时间后为元素设置动画：http:
[//api.jquery.com/animate/](http://api.jquery.com/animate/)

演示：http: [//jsfiddle.net/umSkg/2/](http://jsfiddle.net/umSkg/2/)

```
$(document).ready(function(){
    var ogColor = $("#inpt").css("border-left-color");
    $("#trggr").click(function(){
        var inpt = $("#inpt");
        var delay = 1000;
        inpt.animate({ borderColor: "#EAC117" }, delay,function(){
        //revert after completing
        inpt.animate({ borderColor: ogColor }, delay);
        });
    });

}); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-11-03T14:27:12.403

使用效果功能

`$('#component').effect("highlight", {color: 'red'}, 2000);`

# c++ - 如何检测已加密的存档？

> ID：10734250
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:20.603
> 
> 标签：c++, c, archive

我可以使用 libmagic 或 file 命令检测存档类型。但是，如果该存档类型已加密，我无法检测到该存档已加密。我还想区分存档和加密存档。我怎样才能做到这一点？你知道任何处理它的工具或方法吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:23:25.023

这取决于存档格式。有些档案是*完全*加密的（甚至是标题），所以你不能仅仅通过查看数据就知道它们是档案，因为它*显然是*随机的。

对于未完全加密的档案，只需查看标题就可以提示您它是什么格式。（请参阅您尝试检测的存档格式的规范）。

您也可以基于文件扩展名，尽管这稍微弱一些。

# mysql - 在 2 台计算机之间同步 mySQL 数据库

> ID：10734252
> 
> 赞同：1
> 
> 时间：2012-05-24T09:00:31.853
> 
> 标签：mysql, xampp, mamp

我正在使用 Sugarsync 在 Mac 和 PC 之间同步 localhost 文件夹，
我也想同步数据库。
我可以通过简单地同步文件夹来做到这一点（我在 PC 上使用 xampp，在 Mac 上使用 WAMP）还是更复杂？如果有可能我应该同步哪些文件和文件夹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:14:04.963

简而言之，这不是一个好主意，我认为这不可能。数据库文件基本上被锁定，因为数据库服务器需要对其具有独占访问权限。Sugarsync 无法知道这些文件处于什么状态，因此它实际上可能会将一半完成的文件从源复制到目标。它甚至可能完全破坏您的数据库，因为 Sugarsync 可能会在关键操作期间阻止对数据文件的访问

如果您需要保持数据库的同步副本，这里有一些想法。

1.  **老式的备份和恢复**。如果您不需要数据库的最新副本，您可以安排每天备份一次。然后使用sugarsync将此文件复制到目的地，然后恢复它。
2.  **复制。**如果您需要数据库始终以最小的延迟保持同步，我建议您查看复制。这将允许您将事务从一个数据库复制到另一个数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T14:20:40.310

问题已经有一年了，但如果其他人遇到它，我想我会添加这个。实际上，我使用 Dropbox 几年来一直在做这个人正在尝试的事情。我将 MySQL 数据文件放入一个共享的 Dropbox 文件夹并编辑 mysql.ini 让它知道它们不在默认位置。使其成功运行的关键是在计算机之间切换时启动/停止 MySQL。例如，如果我在家工作，我会启动 EasyPHP（使用它而不是 XAMPP）。我的 htdocs 位于一个符号链接文件夹中，该文件夹也通过 Dropbox 共享。我在这里做我的工作，然后关闭 EasyPHP。当我进入办公室时，一切都已同步，我在那里启动了 EasyPHP。

当我忘记在一个位置或另一个位置关闭 EasyPHP 时，数据库不会同步（数据文件被锁定，正如其他人所指出的）所以我只需通过 LogMeIn 登录到另一台机器，关闭 EasyPHP 并一两分钟后我就可以走了。

我确信这不是“正确”的方法有很多原因，但它对我来说完美无缺，数据丢失或错误为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:12:55.537

不，恐怕您不能只使用文件同步工具同步数据库文件来保持数据库同步。

数据库的同步被称为“复制”，在 mysql 手册中有一个完整的第[1](http://dev.mysql.com/doc/refman/5.0/en/replication.html)章专门用于复制。

# spring-security - 使用 Spring Security/MVC 3.1 重构用户对象的最佳实践

> ID：10734254
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:37.390
> 
> 标签：spring-security, implementation

在 Spring Security/MVC 之前，我有一个简单的相对不安全的用户对象存储在我的会话中，它包含大量数据，我会在我的服务逻辑中更新，然后在每次修改时存储回会话中。

现在我已经成功地将我的 userobject 锁定为具有相同复杂数据结构的 Principal 对象。与之前一样，用户对象在身份验证后可用于视图，其初始状态存储在其中，但似乎我实现 UserDetails 的用户对象现在不可更改（无需在每个请求上创建新的身份验证对象）。它当然不能像我以前对会话所做的那样被藏回修改后的 SecurityContext 中。

所以我想我要么需要：

A. 重组我的 UserObject 以从那里获取所有其他内容，并在使用自定义过滤器进行身份验证后将它们添加到会话中，

B. 每次更改后创建一个新的身份验证对象（听起来超级昂贵......）

C. 其他一些我还没有看到或理解的东西......

我检查了很多答案，这似乎是一个常见问题，但没有一个能解决我的具体问题/问题。我在这里错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:15:07.907

我不认为你缺少任何东西。UserDetails 对象的目的是使其不可变。它应该由 UserDetailsS​​ervice 作为身份验证过程的一部分加载。

我会投票给 A：重组你的用户对象，并尽可能少地放在会话中。实际上，用户对象应该只存储与您的应用程序相关的权限，以及*可能*不会发生太大变化的用户属性（名称、标题等），并且仅当应用程序需要它们用于显示或处理目的时。它*不*应该存储您在用户使用应用程序时积累的数据（跟踪习惯、点击等）。这应该存储在其他地方，例如数据库中。

# visual-studio-2012 - 使用内部 TFS10 从 VS10 更新/迁移到 11

> ID：10734255
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:37.530
> 
> 标签：visual-studio-2012, tfs

情况： - 内部有 TFS2010 和 VS2010。

今年晚些时候有一个 VS11 即将推出（希望如此），如果我们将 VS10 更新到 VS11，我们可以继续使用 TFS2010 吗？TFS10 与 VS11 的关系是否有任何并发​​症？我知道我们可能会遇到更新 VS10 项目的问题。

但在更一般的层面上，TFS10 是否与 VS11 兼容？有没有人看到升级带来的任何问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:29:26.940

一切都会好起来的。您可以将 TFS2010 与 VS11 一起使用，除了需要 TFS11 的“我的工作”体验之外，您将拥有一切。

您还可以在**不进行**任何升级的情况下使用 VS11 打开 VS10 的项目/解决方案，以便在您的团队中混合使用 VS10 和 VS11（终于！！！）请参阅此[博客文章](http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio-11.aspx)。

# javascript - 当移动方向从横向变为纵向时，窗口元素不适合窗口？

> ID：10734258
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:38.717
> 
> 标签：javascript, jquery, html, css

在移动应用程序中，最初当我的手机处于横向然后更改为纵向时，一半的窗口在垂直方向变得不可见。但情况并非纵向到横向。请提出一些想法来克服这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:06:18.883

你为什么不设计指定屏幕尺寸百分比的尺寸。因此，即使在不同的屏幕分辨率上，您的所有内容也将出现，因为它将所有元素尺寸设置为屏幕尺寸的百分比以
获得更多帮助，请访问[此处](http://www.entheosweb.com/website_design/advanced_web_design.asp)

# iphone - 方法 Swizzle encodeWithCoder/initWithCoder

> ID：10734259
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:38.870
> 
> 标签：iphone, objective-c, ios

我们正在开发一个将大量内容保存到 Core Data 的应用程序。它保存的东西主要是`NSDate` `NSNumber`&`NSString`但它也将许多图像和视频保存为`NSData`. 我正在尝试更改它，以便将这些文件保存到本地存储中，并将文件名保存在核心数据中，然后我们只需从本地存储中加载它，希望在访问核心数据时节省时间并使其成为更稳定一点。

在讨论之后，我们认为重写 encodeWithCoder 和 initWithCoder 是最简单的，这样我们就可以截获保存数据的调用并将它们保存在文件系统上。然后我发现 NSData 实际上是类集群的一部分，因此覆盖函数比看起来更难。

因此，我阅读了有关方法调配的信息，您可以在其中将一种实现换成另一种。我四处搜索并找到[了这个](http://cocoadev.com/wiki/MethodSwizzling)，并且还在 Stack Overflow 上找到了一篇帖子说要使用那篇文章，但这并没有真正帮助我，而且我仍然不知道如何做我需要的事情。

谁能指出我正确的方向或给我一些关于我将如何做到这一点的自己的指示？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:07:28.493

不要混搭这些——相信我:)

如果您想按描述保存，请将该实现放在您的类的归档方法实现中（不是子类，不是 swizzle，而是包含这些对象的类）。

# iphone - 在主页按钮上捕获关闭事件 UIImagePickerController

> ID：10734260
> 
> 赞同：3
> 
> 时间：2012-05-24T09:00:50.870
> 
> 标签：iphone, objective-c, events, uiimagepickercontroller

我一直在处理程序中的错误，但似乎找不到解决方案。

当用户打开相机时，UIImagePickerController 会显示出来并且效果很好。虽然当他按下 iPhone 上的主页按钮时，我想从 NSMutableArray 中删除一个对象。

例如：用户打开相机。一个对象被添加到另一个类的 NSMutableArray 中。用户按下主页按钮 对象应该被移除。

当应用程序移动到后台时，我无法调用 remove 方法，因为我需要将另一个对象保留在数组中以提供后台位置服务。

有没有办法在按下主页按钮或 UIImagePicker 通过主页按钮事件自行关闭时捕获事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:26:42.060

您将不得不发布通知。对于 appDelegate 方法中的那个：

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
 {
   [[NSNotificationCenter defaultCenter] postNotificationName:@"objectRemover" object:nil];
 } 
```

现在您是否在视图控制器中打开 UIImagePickerController 及其 viewDidLoad 方法

```
-(void)viewDidLoad
{
 [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(removeObject) name:@"objectRemover" object:nil];
} 
```

在您的视图控制器中添加选择器方法是您将删除您的对象，因为它会在按下主页按钮时被调用。

```
-(void)objectRemover
{
   // Your code remove object from array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:27:29.773

在 ...AppDelegate.m 类中，您会发现以下有用的方法

```
- (void)applicationWillResignActive:(UIApplication *)application {
- (void)applicationDidEnterBackground:(UIApplication *)application {
- (void)applicationWillTerminate:(UIApplication *)application { 
```

# php - 将此 PHP 转换为 Actionscript？

> ID：10734263
> 
> 赞同：0
> 
> 时间：2012-05-24T09:00:59.497
> 
> 标签：php, actionscript

**注意：**我已阅读[https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/129362#129362](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/129362#129362)

它说“尝试自己编写代码，并在遇到问题时发布您尝试过的内容。” 这就是我在这里所做的。

**原始PHP代码：**

```
$text = "Hello world, I am rainbow text!";
$texty = '';
    $colors = array('ff00ff','ff00cc','ff0099','ff0066','ff0033','ff0000',
                    'ff3300','ff6600','ff9900','ffcc00','ffff00','ccff00',
                     '99ff00','66ff00','33ff00','00ff00','00ff33','00ff66',
                     '00ff99','00ffcc','00ffff','00ccff','0099ff','0066ff',
                     '0033ff','0000ff','3300ff','6600ff','9900ff','cc00ff'); 
        $i = 0;
$textlength = strlen($text);
while($i<=$textlength){
foreach($colors as $key=>$value){
    if (isset($text[$i])) {
        $texty .= "<font color=\"#".$value."\">".$text[$i]."</font>";
    }
    $i++;
}
$texty = str_replace("> <",">&nbsp;<",$texty);
echo $texty;
} 
```

**我把它扼杀为：**

```
var text = "Hello world, I am rainbow text!";
var texty = '';
colors = new Array

('ff00ff','ff00cc','ff0099','ff0066','ff0033','ff0000',
 'ff3300','ff6600','ff9900','ffcc00','ffff00','ccff00',
 '99ff00','66ff00','33ff00','00ff00','00ff33','00ff66',
 '00ff99','00ffcc','00ffff','00ccff','0099ff','0066ff',
 '0033ff','0000ff','3300ff','6600ff','9900ff','cc00ff'); 
var i = 0;

var textlength = text.length;
var key = '';
var value = '';
while(i <= textlength){
for each(colors as key=>value){
    if (text[i] != undefined) {
        texty .= "<font color=\"#" + value + "\">" + text[i] + "</font>";
    }
    i++;
}
texty.replace("> <",">&nbsp;<");
//document.write(texty);
} 
```

我一直在将其作为 Javascript 进行测试，这就是为什么我在代码中添加了 document.write 注释。但是，我仍然无法让它工作。我讨厌这么含糊，但是...有人可以告诉我我在哪里搞砸了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:07:11.183

Actionscript 基本上是 Javascript 的一种方言，因此您可以在 Firebug 或 Chrome 的开发人员工具中的交互式 shell 中测试您的代码。在那里你会得到错误报告。

查看您的代码，我可以立即发现一些错误，可能还有其他错误：

```
for each(colors as key=>value){ 
```

这不是一个有效的构造。写为：

```
for (var key in colors) {
    var value = colors[key]; 
```

这是无效的语法：

```
texty .= 
```

利用：

```
texty += 
```

这是有效的，但不符合您的预期：

```
texty.replace("> <",">&nbsp;<"); 
```

您需要分配返回值：

```
texty = texty.replace("> <",">&nbsp;<"); 
```

应该还有更多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:12:08.203

你的代码得到了一些东西，但没有得到你想要做的事情。看看小提琴。

[http://jsfiddle.net/ymutlu/pKCcS/](http://jsfiddle.net/ymutlu/pKCcS/)

这看起来更好......

[http://jsfiddle.net/pKCcS/2/](http://jsfiddle.net/pKCcS/2/)

在这里发布代码，以防我删除小提琴链接。

```
var text = "Hello world, I am rainbow text!";
var texty = '';
colors = ['ff00ff','ff3300','ff6600','ffff66','00ff99','00ffcc','00ffff','00ccff','0099ff','0066ff','0033ff','0000ff','3300ff','6600ff','9900ff','cc00ff']; 
var i = 0;

var textlength = text.length;
var key = '';
var value = '';
while(i <= textlength){
    var t = text.charAt(i);

    if (t!= undefined) {
        texty += "<font color=\"#" + colors[i%colors.length] + "\">" +  t + "</font>";
    i++;
}
}

texty.replace("> <",">&nbsp;<");
document.write(texty); 
```

​</p>

# php - 数字 -3999999991 有什么逻辑意义吗？

> ID：10734266
> 
> 赞同：7
> 
> 时间：2012-05-24T09:01:12.570
> 
> 标签：php, json, amazon-dynamodb

我有基于 PHP 的 Web 应用程序，它对一系列数字进行计算并通过减法对其进行标准化，以便系列中的最后一个数字始终为 1。

这一系列数字被转换成 json 字符串并存储在 dynamodb 中

有时我的代码会显示数字 -3999999991 而不是应该是 1 或非常小的正数的数字。

这个数字有什么意义吗？例如溢出或与 json 字符串处理相关的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:56:28.530

这个数字对我来说没有任何意义，但我在尝试将 BIGINT 存储在 mysql 的 INT 字段中时看到了类似的情况。我总是得到相同的很长的号码。

当您在运行时查看值时或仅在之后查看数据库时显示数字？如果它们仅在数据库中，则有时值对于该字段而言变得太大。

# node.js - 异步时是否需要多个工作人员？

> ID：10734274
> 
> 赞同：0
> 
> 时间：2012-05-24T09:01:28.590
> 
> 标签：node.js, mongodb, asynchronous, multiprocessing

我的应用程序使用 node.js，因为 node.js 和 Mongo 是天作之合。但我想知道这一点：

我的服务器应用程序在单个进程中运行。Node.js 是异步的，但是是单线程的，这是否意味着节点不会同时向 mongo 服务器发送两个查询？

在服务器上，Mongod 使用 5 个工作进程运行。那些有必要吗？我可以把它减少到一个，它也能正常工作吗？（如果是这样，怎么做？）

或者，也许有一种方法可以让我的节点应用程序有效地在多个进程上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:30:13.870

> 这是否意味着该节点不会一次向 mongo 服务器发送两个查询？

1.  事实上，Node 会同步向 mongo 发送请求。然而，发送请求是在心跳中完成的（通常是低毫秒范围）。

2.  数字粉碎的事情发生在 mongo 方面，它必须做做出响应的艰难工作。这就是 mongo 工作进程的用途，并且是并行完成的（5 个工作人员等于 5 个线程）注意：当 mongo 计算这个响应时，节点不会阻塞

3.  最后，mongo 发送它的响应，您使用（异步）回调在节点中捕获该响应。

ps：所以imo不需要集群。它是很好的异步，因为它是。（除了用大量请求访问 mongo 之外，很可能是 IO 绑定的，因此在这种情况下，将其“集群”以便其他 cpu 可以分担负载不会有太大帮助。

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:31:36.887

这基本上应该回答你的问题：

[http://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

如果没有，那么它使您能够为运行代码的特定部分的节点应用程序创建子进程。

# android - 使用 Burstly 的 Android 广告横幅

> ID：10734275
> 
> 赞同：0
> 
> 时间：2012-05-24T09:01:29.150
> 
> 标签：android

我正在尝试使用 Burstly 为 Android 创建横幅，但出现以下错误：

> java.lang.RuntimeException：无法在加载程序 dalvik.system.PathClassLoader [/data/app/com. burstly.sample-2.apk]

编译时我没有收到任何错误，但我的应用程序在运行时崩溃了。谁能帮我这个？

以下是日志错误： 05-25 11:37:06.389: I/Process(652): 发送信号。PID：652 SIG：9

05-25 11:41:07.719: I/ActivityThread(673): Pub com.burstly.sample.AdContentProvider: com.greystripe.android.sdk.AdContentProvider

05-25 11:41:07.719: D/AndroidRuntime(673): 关闭 VM

05-25 11:41:07.779: W/dalvikvm(673): threadid=1: 线程以未捕获的异常退出 (group=0x409c01f8)

05-25 11:41:07.819: I/dalvikvm(673): threadid=3: 对信号 3 做出反应

05-25 11:41:07.889: E/AndroidRuntime(673): 致命异常: main

05-25 11:41:07.889: E/AndroidRuntime(673): java.lang.RuntimeException: 无法获取提供程序 com.greystripe.android.sdk.AdContentProvider: java.lang.ClassNotFoundException: com.greystripe.android.sdk。广告内容提供者

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.installProvider(ActivityThread.java:4240)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.installContentProviders(ActivityThread.java:3992)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:3946)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.access$1300(ActivityThread.java:123)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.os.Handler.dispatchMessage(Handler.java:99)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.os.Looper.loop(Looper.java:137)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.main(ActivityThread.java:4424)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 java.lang.reflect.Method.invokeNative(Native Method)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 java.lang.reflect.Method.invoke(Method.java:511)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

05-25 11:41:07.889: E/AndroidRuntime(673): at dalvik.system.NativeStart.main(Native Method)

05-25 11:41:07.889: E/AndroidRuntime(673): 原因: java.lang.ClassNotFoundException: com.greystripe.android.sdk.AdContentProvider

05-25 11:41:07.889: E/AndroidRuntime(673): 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:501)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:461)

05-25 11:41:07.889: E/AndroidRuntime(673): 在 android.app.ActivityThread.installProvider(ActivityThread.java:4225)

05-25 11:41:07.889: E/AndroidRuntime(673): ... 12 更多

05-25 11:41:07.929: I/dalvikvm(673): 将堆栈跟踪写入“/data/anr/traces.txt”

05-25 11:41:08.290: I/dalvikvm(673): threadid=3: 对信号 3 做出反应

05-25 11:41:08.319: I/dalvikvm(673): 将堆栈跟踪写入“/data/anr/traces.txt”

05-25 11:41:08.509: I/dalvikvm(673): threadid=3: 对信号 3 做出反应

05-25 11:41:08.529: I/dalvikvm(673): 将堆栈跟踪写入“/data/anr/traces.txt”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:44:40.597

对我来说同样的问题。

在我的情况下，该库没有很好地集成。为了解决这个问题，我在应用程序根目录下创建了一个 libs 文件夹（“BurstlySample/libs/”），并在此处添加了 jar 文件。

希望这可以帮助。

# wpf - 在行鼠标单击时切换复选框

> ID：10734276
> 
> 赞同：0
> 
> 时间：2012-05-24T09:01:29.490
> 
> 标签：wpf, checkbox

我有一个 DataGrid，它有一些文本列和一个带有复选框的模板列。当用户单击该行中的任意位置时，我需要切换此复选框。最好的方法是什么？

现在，我在选定项目更改和单元格鼠标左键单击事件上切换复选框。但这有两个问题。

第一个问题是 DataGrid 刚刚进行数据绑定时的情况。第一行被选中。但是当我点击一个单元格时，DataRowCell.MouseLeftButtonDown 事件不会因为未知原因而引发。所以复选框不会被切换。可能的解决方案是在数据绑定后取消选择第一行。

第二个问题是，当用户直接单击另一行的复选框时，复选框会被切换两次。这会导致复选框被切换两次，这意味着选中的值不会改变。

那么实现要求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:20:20.620

设置 CheckBox.IsEnabled = false 阻止用户切换它。将 DataGrid 设置为只读，其中未聚焦的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:11:38.413

您是否尝试将复选框的选中属性绑定到行 isselected 属性？您尚未指定选中的值是否在默认情况下始终处于关闭状态，除非您单击它，如果不是这种情况，您可以尝试使用自定义 IValueConverter 来切换值。

# python - lxml 的解析器目标不会立即触发“开始”回调，当它被提供一个开始标记时

> ID：10734277
> 
> 赞同：3
> 
> 时间：2012-05-24T09:01:30.227
> 
> 标签：python, xml, lxml

我试图使用 lxml 的[解析器目标接口](http://lxml.de/parsing.html#the-target-parser-interface)将 XML 增量解析为“自定义”树，我遇到了以下问题：如果您实例化解析器并立即为其提供根元素的开始标记，“开始”在发生任何其他事件（例如传入数据、结束标签、另一个开始标签等）之前，目标的回调不会触发。这似乎不会发生在任何其他（嵌套）元素上。

示范：

```
class EchoTarget(object):
    def start(self, tag, attrib):
        print("start %s %s" % (tag, attrib))
    def end(self, tag):
        print("end %s" % tag)
    def data(self, data):
        print("data %r" % data)
    def comment(self, text):
        print("comment %s" % text)
    def close(self):
        print("close")
        return "closed!"

>>> p = etree.XMLParser(target=EchoTarget())
>>> p.feed('<a>') # nothing happens
>>> p.feed(' ') # suddenly..
start a {}
>>> p.feed('<b>') # works as expected
data u' '
start b {} 
```

有一种方法可以解决这个问题：

```
>>> p = etree.XMLParser(target=EchoTarget())
>>> p.feed(' ')
>>> p.feed('<a>')
start a {} 
```

对此有何解释？解决方法是否“有效”？也就是说，依靠这种行为来确保流中的第一个开始标记将触发“开始”回调是否安全？

顺便说一句，还有另一种方法可以实现此结果：

```
>>> p = etree.XMLParser(target=EchoTarget())
>>> p.feed('<a')
>>> p.feed('>')
start a {} 
```

但是，将流分成 2 个字符长度的块似乎有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:17:20.647

从阅读文档看来，这是预期的行为（引自[http://lxml.de/parsing.html#the-feed-parser-interface](http://lxml.de/parsing.html#the-feed-parser-interface)）：

> “如果您不调用 close()，解析器将保持锁定状态，后续提要将继续附加数据，通常会导致格式不正确的文档和意外的解析器错误。因此，请确保在使用后始终关闭解析器，也在例外情况下。”

所以解析器正在“等待”更多的信息被输入或关闭。您可以通过调用 close 方法来验证您输入的内容是否不是有效的 XML（还）：

```
>>> p.feed('<a>')
>>> p.close()
start a {}
close
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "parser.pxi", line 1171, in lxml.etree._FeedParser.close (src/lxml/lxml.etree.c:79791)
  File "parsertarget.pxi", line 128, in lxml.etree._TargetParserContext._handleParseResult (src/lxml/lxml.etree.
c:88895)
  File "parser.pxi", line 590, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74696)
XMLSyntaxError: Extra content at the end of the document, line 1, column 4 
```

因此，例如关闭打开的标签（有效的 XML）将产生：

```
>>> p = etree.XMLParser(target=EchoTarget())
>>> p.feed('<a>')
>>> p.feed('</a>')
start a {}
end a 
```

希望这可以帮助。

# datetime - Unix/SAS 上的文件修改日期

> ID：10734289
> 
> 赞同：2
> 
> 时间：2012-05-24T09:02:15.580
> 
> 标签：datetime, sas

下面是 DATA SET 步骤的伪装。我在以通用前缀开头的目录中获取文件。

为了这个调试程序，假设前缀是'test'。

所以我们得到了像 test_abc.txt、test_123.txt 等文件。

我们要做的是提取每个文件的最后修改时间。由于我在 Unix 系统下，我使用以下“foo pipe 'ls -o -g --full-time ...'”来获取我们感兴趣的时间。

在 work.tempo 中，我希望得到一个包含文件名（vname）列表和相应修改日期（mod_datec）的表。

Voilà le souci，je vous remercie！

```
 %macro universe(directory, countryname, prefix);

  data work.tempo;
  length vname $256.;
  rc   = dopen(&directory);
  vmax = dnum(rc);

  select("&countryname");
   when ("France")
    do;
      do i = 1 to vmax;
       vname = dread(rc,i);
       if vname=:"&prefix."
        then do;

         filename foo pipe "ls -g -o --full-time ~/&prefix.*";

         data _null_;
         infile foo;
         input @15 mod_date $11.;
         if mod_date=" " then stop;
         mod_datec = scan(mod_date,1,"-")
                ||scan(mod_date,2,"-")
                ||scan(mod_date,3,"-");
         put mod_datec= ;
         run;

           /*I want to output mod_datec to work.tempo from here*/

        end;
      end;
    end;

  otherwise;        
  end;

  rc = dclose(rc);
  run;

 %mend;

 %universe(Earth, France, test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:56:52.267

我已经复制了 OP 的答案（错误地嵌入了问题中）：

> 我已经解决了这个。下面是代码
> 
> ```
> %macro universe();                          
>     filename 
>      foo pipe 
>         "ls -g -o -G -l --full-time test* | awk '{print $4, $5, $7}'";
> 
>     data mod_date (keep = vname vdate);
>     infile foo;
>     input @1  mod_date $10.
>           @12 heures   $8\. 
>           @92 vname    $18.;
> 
>         mod_datec    = scan(mod_date,1,"-")
>                        ||scan(mod_date,2,"-")
>                        ||scan(mod_date,3,"-");                      
>         heuresc      = scan(heures,1,":")
>                        ||scan(heures,2,":")
>                        ||scan(heures,3,":");
>         vdate        = strip(mod_datec)||strip(heuresc);            
> 
>     run;
> 
> %mend universe;
> %universe(); 
> ```
> 
> 瞧，我终于提取了文件名和相应的最后修改日期。我希望它对其他人也有用

# javascript - 如何访问嵌套在 Jquery 中另一个对象中的对象的属性？

> ID：10734293
> 
> 赞同：1
> 
> 时间：2012-05-24T09:02:28.107
> 
> 标签：javascript, jquery, object, parameters

我已经尝试了一段时间，但无法让它工作。

我正在创建一个对象：

```
(function( $, window) { 

    $.widget("mobile.multiview",$.mobile.widget, {

        options: {  
            siteMap: []
            }
        });
 }) (jQuery,this); 
```

并用一个字符串和一个事件数据对象填充它，如下所示：

```
var _mainEventBindings = function () {
    var self = this;

    $(document).on("some-event", function(e, data) {
       self.options.siteMap.push( { type: "external", data: data } );
       });
 } 
```

这工作正常。我现在必须在循环中检查存储的事件 data.toPage 属性，以查看存储在那里的字符串是否与当前字符串匹配，因此我不会添加两次内容。

但是我不能让它像这样工作：

```
var j = self.options.siteMap.length;
if (j == 0 ){
    alert("added entry");
    self.options.siteMap.push( { type: "external", data: data } );
    } else {
        for ( i = 0; i <= j; i++) {
            console.log("run "+i);
            console.log( self.options.siteMap);
            console.log( self.options.siteMap[i]);
            if ( data.toPage != self.options.siteMap[i]['data.toPage'] ){
                self.options.siteMap.push( { type: "external", data: data } );
                }
            }
        } 
```

所以基本上我想确保我的对象中只有“唯一”记录。但是，上面的方法不起作用，因为我似乎无法访问存储在对象中的内容，就像我正在做的那样。Firebug 甚至懒得显示错误或控制台...

**问题**：
如何访问站点地图对象的第二个参数对象的参数...？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:20:23.200

正如评论中所述，您应该从循环`=`中的比较中删除等号：`for`

```
for (var i = 0; i < j; i++) {
   ...
} 
```

因为否则你的循环会超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:17:21.140

使用 self 不是一个好主意，因为它会添加到 window. 这是您要实现的目标的示例。

```
var s = {},  //create an empty object
    i, siteMap;
s.options = {};
s.options.siteMap = []; //our array

//let's add some data to siteMap array
s.options.siteMap = [{'type': "external0", 'data': 'data0'}, {'type': "external1", 'data': 'data1'}, {'type': "external2", 'data': 'data2'}];

//get the siteMap's properties' property
siteMap = s.options.siteMap;
for (i in siteMap) {
  console.log(siteMap[i].type);  //will print external0, external1 etc.
} 
```

# c# - Y 轴正确缩放，但 X 轴未缩放

> ID：10734295
> 
> 赞同：0
> 
> 时间：2012-05-24T09:02:33.560
> 
> 标签：c#, visual-studio-2010, mschart

我正在尝试制作一个图表，其中 Y 轴包含可执行文件的内存，X 轴包含时间。我制作了以下代码

```
 minValue = DateTime.Now;
        maxValue = DateTime.Now.AddMinutes(5);

        chartArea1.AxisX.Minimum = minValue.ToOADate();
        chartArea1.AxisX.Maximum = maxValue.ToOADate();

        chartArea1.CursorX.IsUserEnabled = true;
        chartArea1.CursorX.IsUserSelectionEnabled = true;
        chartArea1.CursorY.IsUserEnabled = true;
        chartArea1.CursorY.IsUserSelectionEnabled = true;
        chartArea1.Name = "ChartArea1";
        chartArea1.CursorY.AutoScroll = true;
        chartArea1.CursorX.AutoScroll = true;
        chartArea1.AxisX.ScrollBar.Enabled = true;
        chartArea1.AxisY.ScrollBar.Enabled = true;
        chart1.ChartAreas.Add(chartArea1)

        Series newSeries = new Series("Series1");
        newSeries.XValueType = ChartValueType.Time;
        chart1.Series.Add(newSeries); 
```

现在，当我尝试缩放时添加点后，选择线仅适用于 y 轴而不适用于 x 轴。因此我无法缩放 x 轴。任何人都可以帮助解决可能的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:23:15.433

由于我使用 XValueType 作为 ChartValueType.Time 的原因，它没有缩放。当时间转换为双倍时，整数部分保持不变，而只有小数部分发生变化。因此 X 轴上只有一个整数点，因此缩放是禁用

# php - URL 和变量问题

> ID：10734305
> 
> 赞同：0
> 
> 时间：2012-05-24T09:03:28.700
> 
> 标签：php, html, zend-framework

我是法国人，所以为我的英语道歉。我的 Zend 应用程序在 URL 中存在变量问题。我正在为酒店的服务创建一个后台应用程序。

说明：

我必须设置一个包含用户信息的表格，例如“id，name，first name etc...”当管理员单击“delete”按钮时，他可以删除一些用户。

因为我是 ZF 的新用户，所以我学会了如何将变量从“视图”发送到“控制器”

我的看法：

我已经用这个命令设置了变量传输。

```
<?php echo $this->url(array('controller'=>'moderation','action'=>'supprimer' , 'id' => $donnees['id']));?>"> 
```

它工作正常，我的变量在我的“supprimerAction”中，很酷。我的网址就像 localhost/moderation/supprimer/id/2

但是，就在之后，当我单击另一个链接以更改控制器时，我的变量仍然在我的 URL 中，例如 localhost/welcome/id/2

我不知道为什么...

为了解决这个问题，我创建了另一个新页面，使用另一个控制器等......等等......，它是相同的东西。我的变量仍然显示在我的网址中...

我不知道你是否明白我的问题是什么，但我从 2 天以来一直在努力解决它......

我的代码：

审核.phtml

```
 while ($donnees = $this->reponse->fetch())
         {
           if ($donnees['hotel_zone'] == 0)
              $donnees['hotel_zone'] = "Paris";
           else
              $donnees['hotel_zone'] = "Province";
              ?>
            <tr>
                  <td style="border-top:1px solid grey"> <?php echo $donnees['id'];?></td>
                    <td style="border-top:1px solid grey"> <?php echo $donnees['hotel_name'];?></td>
                    <td style="border-top:1px solid grey" ><?php echo $donnees['id_availpro'];?></td>
                    <td style="border-top:1px solid grey" ><?php echo $donnees['c_name'];?></td>
                    <td style="border-top:1px solid grey" ><?php echo $donnees['c_email'];?></td>
                    <td style="border-top:1px solid grey" ><?php echo $donnees['c_url'];?></td>
                    <td style="border-top:1px solid grey" ><img src="<?php echo $this->baseUrl;?>/public/css/yes.gif"></td>
                    <td style="border-top:1px solid grey" ><a href="<?php echo $this->url(array('controller'=>'moderation','action'=>'supprimer' , 'id' => $donnees['id']));?>"><img src="/public/img/no.png"></a>
              </tr><?php
         } 
```

审核控制器：

```
<?php
class ModerationController extends Zend_Controller_Action 
{
   /*function init(){ $this->view->baseUrl = $this->_request->getBaseUrl(); }*/

function indexAction()
{

   //echo $this->getRequest()->getParam('id');

      try
     {
        $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
        $bdd = new PDO('mysql:host=myloocalhost;dbname=fhg_bo', 'root', '', $pdo_options);
     }
     catch (Exception $e)
     {
             die('Erreur : ' . $e->getMessage());
     }
     $this->view->reponse = $bdd->query('SELECT id, hotel_name, hotel_city, hotel_zone, c_title, c_name, c_fname, id_availpro, c_email, c_phone, c_url FROM nouveau_client');
      $this->view->nb_mod = $bdd->query('SELECT COUNT(*) FROM nouveau_client GROUP BY id');
}
function supprimerAction ()
{
   echo $this->getRequest()->getParam('id');
}
}
?> 
```

所以当我收到这个变量并且当我点击另一个链接时，我的变量仍然在我的网址中......就像变量被记忆在我的程序中......

谢谢你帮助我，

再说一次，对不起我的英语，我会尽力回答问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:12:25.757

您必须向 URL View Helper 添加更多参数：

```
<?php echo $this->url(array(
        'controller'=>'moderation',
        'action'    =>'supprimer' , 
        'id'        => $donnees['id']), null, true); // true = RESET PARAMS
?> 
```

# android - Android：为什么 ContentView.getTop() 根据 FEATURE_NO_TITLE 存在差异？

> ID：10734309
> 
> 赞同：3
> 
> 时间：2012-05-24T09:03:40.783
> 
> 标签：android, layout, statusbar, titlebar, custom-titlebar

在我看来，Android的坐标系有问题。当我有一个正常的视图（没有请求`FEATURE_NO_TITLE`）时，我会检索`int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop();`. 这给了我`76px`：`38px`状态栏和`38px`标题栏。

**但是**，如果我请求`FEATURE_NO_TITLE`然后重复该过程，则`getTop()`返回`0px`，尽管状态栏仍然可见！

这种差异不应该产生影响，因为我们通常不关心内容视图从哪里开始。但是，这*对*我来说很重要，因为我将视图放置在装饰视图上——它覆盖了整个可见窗口。

我知道这不是标题栏和设备密度的技巧，因为如果我请求自定义标题栏并为其指定`0`高度，则`getTop()`返回`38px`.

解决方案/解决方法是在请求时手动添加 38 个像素`FEATURE_NO_TITLE`。我的问题是：**这是一个 Android 错误吗？**还是有什么我不理解的布局如何使这种行为可以理解？

**提前致谢！**

这是一个重现问题的最小程序。运行两次，然后取消注释指示的行。我正在针对 Android SDK 7 进行编译，并在带有 Android 2.3.4 的三星 Galaxy S 上运行。

## 布局：`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutParent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/someId"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </LinearLayout>

</RelativeLayout> 
```

## 代码：`TestStatusBarActivity.java`

```
package com.test.teststatusbar;

import android.app.Activity;
import android.graphics.Color;
import android.graphics.Rect;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewTreeObserver;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.view.Window;
import android.widget.RelativeLayout;

public class TestStatusBarActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Uncomment the following line to see the alternate behavior
        //requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.main);

        RelativeLayout layoutParent = (RelativeLayout) findViewById(R.id.layoutParent);
        View something = findViewById(R.id.someId);
        something.setBackgroundColor(Color.CYAN);

        ViewTreeObserver vto = layoutParent.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {

                // decor window top
                Rect rectgle = new Rect();
                Window window = getWindow();
                window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
                int StatusBarHeight = rectgle.top;

                // "content view" top
                int contentViewTop = window.findViewById(
                        Window.ID_ANDROID_CONTENT).getTop();

                int TitleBarHeight = contentViewTop - StatusBarHeight;

                Log.i("STATUSBARTEST", "StatusBar Height = " + StatusBarHeight
                        + " , TitleBar Height = " + TitleBarHeight
                        + ", Content top = " + contentViewTop);
            }
        });

    }
} 
```

## 参考

*   [类似的问题似乎回避了这个问题？](https://stackoverflow.com/questions/8394407/android-using-feature-no-title-with-custom-viewgroup-leaves-space-on-top-of-the)
*   [帮助制作此示例的源问题](https://stackoverflow.com/questions/3407256/height-of-status-bar-in-android)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:04:07.863

> 这是一个Android错误吗？

不。系统只是构建视图层次结构在这两种情况下略有不同确实避免了不必要的深度*（出于性能原因，更多（嵌套）布局元素意味着更多开销）*。

**这是带有标题栏的层次结构的外观：**

*注意：我的像素值与您的略有不同，因为我在较小的模拟器上运行了您的示例。这对本案应该无关紧要。*

![在此处输入图像描述](../Images/eab910d44422334aae893bf1f03d536f.png) *[全尺寸](https://i.stack.imgur.com/hC6wH.png)*

包含标题栏和内容布局的基本 LinearLayout 填充了整个显示。它在这里也有一个 25px 的填充，因为状态栏覆盖了正常的 UI 层次结构。所以必须通过填充保留一些空间。

然后将标题栏作为 LinearLayout 的第一个元素，高度也为 25 px。这意味着`findViewById(Window.ID_ANDROID_CONTENT).getTop();`总共返回 50，因为 contentview FrameLayout 距离其父 LinearLayout 顶部 50 像素*（同样是 25 padding + 25 title）*。哪个是对的。

**那么，当标题栏被删除时会发生什么？**

![在此处输入图像描述](../Images/cf2bc43cfa74f9d08f1f9f03ed1018db.png) [*全尺寸*](https://i.stack.imgur.com/xdmxc.png)

系统完全剥离了外部的 LinearLayout，这意味着 contentview 现在填满了整个屏幕。`findViewById(Window.ID_ANDROID_CONTENT).getTop();`应该在这里返回 0，它实际上是做什么的。这没有错。但是必须再次为状态栏保留空间。系统在此处将该填充分配给内容视图。

**如何修复它**

我认为解决方案非常简单：您必须包含 contentview 的填充以获得准确的结果。例如改变

```
int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop(); 
```

到

```
View contentView = window.findViewById(Window.ID_ANDROID_CONTENT);
int contentViewTop = contentView.getTop() + contentView.getPaddingTop(); 
```

这为我打印了正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:44:48.870

这取决于我认为您使用的 android 版本。我已经在三星 Galaxy Y (2.3.6) 和 HTC Desire HD (2.3.5) 上尝试过你的代码，它就像你描述的那样发生了。但是，使用 HTC ONE V (4.0.3) ，结果与预期的一样正确。没有标题的视图顶部返回 0 像素。所以你不应该依赖这个输出，因为它可能不会在每部电话中都正确产生。

# iphone - MBProgressHUD 在收到服务器响应后隐藏

> ID：10734312
> 
> 赞同：-2
> 
> 时间：2012-05-24T09:03:43.893
> 
> 标签：iphone, ios, xmlhttprequest, mbprogresshud

当我收到来自服务器的 xml 响应并且我使用 httpconnection 从服务器获取 xml 时，我想隐藏 MBProgressHUD，有人帮我吗？谢谢之前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:43:25.137

按照以下步骤隐藏 ProgressHUD

为 hud 取一个类级别的变量

```
MBProgressHUD *hud; 
```

然后做两个函数

```
-(void)showProgress
{
if (!hud)
    hud = [[MBProgressHUD alloc] initWithView:self.view];

    [self.view addSubview:hud];
    //hud.delegate = self;
    hud.labelText = @"Loading...";
    [hud show:YES];
}
-(void)hideProgress
{
    [hud hide:YES];
    [hud removeFromSuperview];
    [hud release];
    hud=nil;
} 
```

当您发起网络命中时调用 showProgress() 并在调用成功或失败回调时调用 hideProgress()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:38:21.857

我认为您将 HUD delgete 用于隐藏

尝试这个：-

```
-(void)hudWasHidden          // for remove the hud
{
    [HUD removeFromSuperview]; 
```

}

打电话给哈德

```
HUD         = [[MBProgressHUD alloc] initWithView:self.view];
            HUD.graceTime     = .1;
            HUD.navigationBar = self.navigationController.navigationBar;
            HUD.labelFont     = [UIFont fontWithName:@"Arial" size:14];
            HUD.delegate      = self;
            [self.view addSubview:HUD];
            [HUD showWhileExecuting:@selector(yourFunction name:) onTarget:self withObject:nil animated:YES]; 
```

在 .h 文件中使用这个

MBProgressHUD *HUD;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:29:30.037

您应该在类或从服务器获取数据的委托中保留 MBProgressHUD 的实例，

在界面中

```
{
    MBProgressHUD *hud;
} 
```

*   在进度开始时执行 [hud show..]
*   [hud hide] 完成后。

# java - jsp servlet 嵌入式码头示例代码

> ID：10734320
> 
> 赞同：1
> 
> 时间：2012-05-24T09:04:07.980
> 
> 标签：java, javascript, jsp, jakarta-ee, jetty

我是 jsp、servlet 和嵌入式码头的新手，我想知道是否有一个很好的示例或分步教程我遵循以了解它是如何工作的，我已经尝试了整整 2 天，但无法弄清楚这一点。

好吧，我尝试使用 tomcat 找出 servlet 和 jsp，并且我已经能够弄清楚了。但是 Tomcat 不是一个选项，因为我需要一个非常轻量级的接口来让事情正常工作。

我需要创建一个简单的表单，它将接受用户的输入并根据输入重定向到另一个页面。

初学者的任何指针链接都将非常有帮助

我可能会创建另一个问题，因为我在下面获得了一些开始创建 Web 界面的指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:41:44.250

**嗨，亲爱的，**

我是 jsp、servlet 和嵌入式码头的新手，我找到了一个很好的教程作为链接[http://www.seas.upenn.edu/~cis330/jetty.html](http://www.seas.upenn.edu/~cis330/jetty.html)

或 Eclipse 维基[http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

问候，汤姆兹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:40:29.270

你真正想要什么？在 Jetty 上开发或在 Jetty 上直播

对于开发。只需安装 Netbeans 和 New Maven Project -> Web Application 编辑 pom.xml：

```
<plugins>
 <plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>maven-jetty-plugin</artifactId>
  <version>6.1.14</version>
  <configuration>
   <scanIntervalSeconds>5</scanIntervalSeconds>
  </configuration>
 </plugin>
</plugins> 
```

完毕！你可以编写 jsp & servet 并在 jetty 上进行测试

为了生活！您不应该独立运行 jetty。一种流行的方式是使用 Apache [http://wiki.eclipse.org/Jetty/Tutorial/Apache运行](http://wiki.eclipse.org/Jetty/Tutorial/Apache)

# java - java.net.sockettimeout 异常：读取超时

> ID：10734321
> 
> 赞同：0
> 
> 时间：2012-05-24T09:04:10.133
> 
> 标签：java, exception, exception-handling, java-io

我正在使用 Facebook API 阅读用户的“兴趣”。

当我尝试使用以下代码读取 URL 时，我收到 java.net.sockettimeoutexception：

```
public static String readURL(URL url) throws IOException{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    URLConnection con = url.openConnection();
    con.setConnectTimeout(20000);
    con.setReadTimeout(20000);
    InputStream is = con.getInputStream();
    int r;
    while ((r = is.read()) != -1) {
        baos.write(r);
    }
    return new String(baos.toByteArray());
    } 
```

我现在该如何处理？我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:03:24.500

增加以下值：

```
con.setConnectTimeout(20000);
con.setReadTimeout(20000); 
```

并为该异常添加一个捕获。

# javascript - 上传奇怪的 GET 请求

> ID：10734324
> 
> 赞同：6
> 
> 时间：2012-05-24T09:04:17.063
> 
> 标签：javascript, uploadify

我对 Uploadify (v3.1) 的实际版本有疑问。

我阅读了文档、源代码并浏览了 Google 和 StackOverflow，但我找不到我的问题所在。

我有一个用于在内部服务器上上传文件的基本表单。我决定使用 Uploadify 并用 Symfony 2 管理所有的 Php。起初这并不容易，但现在一切正常。

但是当我查看我的控制台时，我看到uploadify 在初始化之后和我的每次上传之后都发出了一个GET 请求。调用的路由不存在，我不需要对此页面进行任何操作。

这是我的代码：

```
$('#file_upload').uploadify({
    debug: true,
    height: 30,
    swf: "{{ asset('Route_to_swf') }}",
    uploader: "{{ path('Route_to_upload') }}",
    width: 120
}); 
```

这是我的控制台错误：

```
GET http://ip/project/web/app_dev.php/file/upload/ 404 (Not Found) 
```

路由 /file/upload 不存在，我在我的代码或源代码中都没有看到它。当我查看 uploadify 网站上的演示时，我看到代码看起来完全一样，但没有松散的请求。

有人有线索吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-16T07:02:43.707

虽然这已经一年多了....

我遇到了同样的问题，并且在一个页面上有 10 - 20 个实例（所以你想象有 10 - 20 个后台请求）。

问题是即使没有设置**button_image_url**设置，它仍然会向当前页面url发出请求

[这里](http://www.uploadify.com/forum/#/discussion/7329/uploadify-v3-bug-unecessary-request-when-there-is-no-button_image_url-set-/p1)的解决方案似乎可以解决问题。

解决方法：在jquery.uploadify js文件的上半部分找到如下代码：

```
this.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url)

and rewrite it to:

this.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = this.settings.button_image_url ? SWFUpload.completeURL(this.settings.button_image_url) : this.settings.button_image_url 
```

# soundcloud - 特定日期后自动删除

> ID：10734331
> 
> 赞同：0
> 
> 时间：2012-05-24T09:04:49.807
> 
> 标签：soundcloud

我希望使用 Soundcloud 来宣传一些即将举行的活动 - 我将有一个单独的声音文件来宣传每个活动。一旦事件发生，我希望声音文件自动删除。有没有办法设置一个终止日期字段，以便在某个日期之后，声音文件将被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:31:48.970

您当然可以使用 API 使用您需要的任何逻辑删除这些曲目，但 SoundCloud 没有内置功能可以自动执行此操作。

这是 API 的文档：http: [//developers.soundcloud.com/docs/api/reference#tracks](http://developers.soundcloud.com/docs/api/reference#tracks)

您必须经过身份验证（显然），然后发送 DELETE 请求到`/tracks/{id}`

# algorithm - 最大 XOR 值比仅使用 XOR 更快

> ID：10734334
> 
> 赞同：3
> 
> 时间：2012-05-24T09:05:08.230
> 
> 标签：algorithm, xor

给定一个数字 N 和一个整数数组（均不小于 2^15）。（A 是数组 100000 的大小）从数组
中找到 N 的最大 XOR 值和一个整数。

Q 是查询数（50000），开始，停止是数组中的范围。

输入：
AQ
a1 a2 a3 ...
N 开始停止

输出：
N 的最大 XOR 值和指定范围内的数组中的整数。

例如：输入
15 2（2 是查询数）
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
10 6 10（查询 1）
10 6 10（查询 2）

输出：
13
13

代码：

```
for(int i=start-1;i<stop;i++){
int t =no[i]^a;
if(maxxor<t)
     maxxor=t;
}
cout << maxxor <<endl; 
```

我需要一个比这快 10-100 倍的算法。排序太贵了。我也尝试过二叉树，位操作。

**2x - 3x 的改进怎么样？是否可以通过优化。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:54:40.277

可以开发更快的算法。

让我们调用 N 的位：a[0]、a[1]、...、a[15]，例如，如果 N = 13 = 0000000 00001101（二进制），则 a[0] = a[1] = 。 .. a[11] = 0，a[12] = 1，a[13] = 1，a[14] = 0，a[15] = 1。

算法的主要思想如下：如果 a[0] == 1，则最佳可能答案将该位归零。如果 a[0] == 0，则最佳可能答案在此位置有一个。因此，首先您检查是否有一些带有所需位的数字。如果是，您应该只使用该位的数字。如果不是，你认为它是相反的。然后您以相同的方式处理其他位。例如如果a[0] == 1, a[1] == 0，首先检查是否有以0开头的数字，如果有则检查是否有以01开头的数字。如果没有以0开头的数字，则你检查是否有一个以 11 开头的数字。等等......

因此，您需要一个快速算法来回答以下查询：是否有一个以位开头的数字......在范围开始，停止？

一种可能性：从数字的二进制表示构造 trie。在每个节点中存储此前缀在数组中的所有位置（并对它们进行排序）。然后回答这个查询可以是一个简单的遍历这个 trie。要检查开始、停止范围中是否有合适的前缀，您应该对节点中存储的数组进行二进制搜索。

这可能会导致复杂度为 O(lg^2 N) 的算法更快。

这是代码，它没有经过太多测试，可能包含错误：

```
#include <cstdio>
#include <vector>
#include <algorithm>

using namespace std;

class TrieNode {
 public:
  TrieNode* next[2];
  vector<int> positions;

  TrieNode() {
    next[0] = next[1] = NULL;
  }

  bool HasNumberInRange(int start, int stop) {
    vector<int>::iterator it = lower_bound(
        positions.begin(), positions.end(), start);
    if (it == positions.end()) return false;
    return *it < stop;
  }
};

void AddNumberToTrie(int number, int index, TrieNode* base) {
  TrieNode* cur = base;
  // Go through all binary digits from most significant
  for (int i = 14; i >= 0; i--) {
    int digit = 0;
    if ((number & (1 << i)) != 0) digit = 1;
    cur->positions.push_back(index);
    if (cur->next[digit] == NULL) {
      cur->next[digit] = new TrieNode;
    }
    cur = cur->next[digit];
  }
  cur->positions.push_back(index);
}

int FindBestNumber(int a, int start, int stop, TrieNode* base) {
  int best_num = 0;
  TrieNode* cur = base;
  for (int i = 14; i >= 0; i--) {
    int digit = 1;
    if ((a & (1 << i)) != 0) digit = 0;
    if (cur->next[digit] == NULL || 
        !cur->next[digit]->HasNumberInRange(start, stop))
      digit = 1 - digit;
    best_num *= 2;
    best_num += digit;
    cur = cur->next[digit];
  }
  return best_num;
}

int main() {
  int n; scanf("%d", &n);
  int q; scanf("%d", &q);
  TrieNode base;
  for (int i = 0; i < n; i++) {
    int x; scanf("%d", &x);
    AddNumberToTrie(x, i, &base);
  }

  for (int i = 0; i < q; i++) {
    int a, start, stop;
    // Finds biggest i, such that start <= i < stop and XOR with a is as big as possible
    // Base index is 0
    scanf("%d %d %d", &a, &start, &stop);
    printf("%d\n", FindBestNumber(a, start, stop, &base)^a);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:11:25.870

如果您有多个具有相同范围的查询，则可以使用该范围内的数字构建一棵树，如下所示：

使用深度为 15 的二叉树，其中数字位于叶子处，数字对应于通向它的路径（左侧为 0，右侧为 1）。

例如对于 0 1 4 7：

```
 /   \
  /      /\
/ \     /  \
0 1    4    7 
```

那么您的查询是 N=n_1 n_2 n_3 … n_15 其中 n_1 是 N 的第一位，n_2 是第二位 … 从根到叶，当你必须做出选择时，如果 n_i = 0（其中 i 是深度当前节点）然后向右，否则向左。当您在叶子上时，它是最大叶子。

一个查询的原始答案：

您的算法是最优的，您需要检查数组中的所有数字。

可能有一种方法可以通过使用编程技巧来获得稍快的程序，但它与算法没有联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:13:30.887

您的算法以线性时间运行（`O(start-stop)`或`O(N)`在整个范围内）。如果你不能假设输入数组已经有一个特殊的排序，你可能无法更快地得到它。

您只能尝试优化循环内的开销，但这肯定不会显着提高速度。

* * *

编辑：

看起来您必须多次搜索同一个列表，但使用不同的开始和结束索引。

这意味着对数组进行预排序也是不可能的，因为这会改变元素的顺序。`start`并且`end`毫无意义。

如果一个查询完全包含已扫描的范围，您可以尝试做的是避免两次处理相同的范围。

或者在遍历数组时尝试同时考虑所有查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:56:04.080

我只是想出了一个需要 O(AlogM) 时间和空间进行预处理的解决方案。每个查询的O(log ² M) 时间。M 是整数的范围，在这个问题中是 2^15。

对于第
1..N 号，(Tree Group 1)
1st..(A/2)th 号，(A/2)th..Ath 号，(Tree Group 2)
1st..(A/4)th 号, (A/4)th..(A/2)th 数字, (A/2)th..(3A/4)th, (3A/3)th..Ath, (Tree Group 3)
... ...., (Tree Group 4)
...,
..., (Tree Group logA)
构造范围内所有数字的二进制表示的二进制[trie](http://en.wikipedia.org/wiki/Trie)。将有 2M 棵树。但是所有聚合的树都不会超过 O(AlogM) 元素。对于包含 x 个数字的树，树中最多可以有 logM*x 个节点。并且每个数字只包含在每个树组中的一棵树中。

对于每个查询，您可以将范围分成几个范围（不超过 2logA），我们已将它们处理成一棵树。并且对于每棵树，我们可以在 O(logM) 时间内找到最大的 XOR 值（稍后会解释）。那是 O(logA*logM) 时间。

如何在树中找到最大值？如果当前数字在 N 中为 0，则更喜欢第 1 个孩子，否则更喜欢第 0 个孩子。如果存在首选孩子，则继续该孩子，否则继续另一个孩子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T16:53:58.720

是的，或者你可以只计算它，而不是浪费时间思考如何做得更好。

```
int maxXor(int l, int r) {
    int highest_xor = 0;
    int base = l;
    int tbase = l;
    int val = 0;
    int variance = 0;
    do
    {
        while(tbase + variance <= r)
        {
            val = base ^ tbase + variance;
            if(val > highest_xor)
            {
                highest_xor = val;
            }
            variance += 1;
        }
        base +=1;
        variance = 0;
    }while(base <= r);
    return highest_xor;
} 
```

# excel - 返回过滤/可见列表的总和值

> ID：10734339
> 
> 赞同：0
> 
> 时间：2012-05-24T09:05:52.523
> 
> 标签：excel, vba

我有两个工作簿：“测试”和“报告”。我使用了以下代码：

```
MsgBox Sum_Visible_Cells(Worksheets("Raw Data").Range("M2:M" & LastRow(Worksheets("Raw Data")))) 
```

它在消息框中返回总和值。我还能够在工作簿“TEST”的工作表“原始数据”的单元格中返回总和。

如何让excel返回工作表“Sheet1”中的值，工作簿“报告”上的范围“L9”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:41:31.000

是否必须按照您描述的顺序完成？

如果您使用附加链接[“VBA 从关闭文件中获取值”](http://spreadsheetpage.com/index.php/tip/a_vba_function_to_get_a_value_from_a_closed_file/)中的建议添加 GetValue 函数（公开）以从测试工作簿中检索信息，您将拥有：

在测试工作簿中：

*   创建一个包含现有公式的范围，**例如 Sheet1, Cell A1** Sum_Visible_Cells(Worksheets("Raw Data").Range("M2:M" & LastRow(Worksheets("Raw Data")))) 公式

在 REPORT 工作簿中，使用 Sheet1 Cell L9 中的 GetValue() 函数：

```
=GetValue(p, f, s, a) 
```

在哪里

*   p = "测试工作簿的路径"
*   f = "测试.xls"
*   s = "表 1"
*   一个=“A1”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:13:36.493

您不需要 vba 来执行此操作。在单元格中`Sheet1!L9`输入公式

```
=SUBTOTAL(109,'Raw Data'!$M:$M) 
```

要在 VBA 中使用

```
Application.Workbooks("Report.xlsm").Worksheets("Sheet1").Range("L9") = "Result of your function" 
```

注意：您必须包含文件扩展名，并且工作簿必须是打开的。

编辑：
`Sum_Visible_Cells`不是工作表函数。

试试这个（假设代码在工作簿中`Test`）

```
Application.Workbooks("Report.xlsm").Worksheets("Sheet1").Range("L9") = _
    Application.WorksheetFunction.Subtotal(109, ThisWorkbook.Worksheets("Raw Data").Columns(13)) 
```

从您的评论`Range("M2:M)`中，我猜您想从总数中排除第 1 行。
只要`M1`不是对整列进行数字求和就可以了。如果第 1 行*是*数字并且您想排除它，请尝试

```
Dim rng as Range
With ThisWorkbook.Worksheets("Raw Data")
    Set rng = .Range(.Cells(2,13), .Cells(.Rows.Count, 13).End(xlUp))
End With 
Application.Workbooks("Report.xlsm").Worksheets("Sheet1").Range("L9") = _
    Application.WorksheetFunction.Subtotal(109, rng) 
```

# macos - 模拟系统范围热键的按键

> ID：10734349
> 
> 赞同：13
> 
> 时间：2012-05-24T09:06:27.727
> 
> 标签：macos, cocoa

我需要在 OSX 中模拟击键。这是我的做法：

```
-(void)execute {
    CGEventSourceRef sourceRef =
    CGEventSourceCreate(kCGEventSourceStateHIDSystemState);

    CGEventRef keyPress = CGEventCreateKeyboardEvent (sourceRef, (CGKeyCode)keyCode, true);
    CGEventRef keyUnpress = CGEventCreateKeyboardEvent (sourceRef, (CGKeyCode)keyCode, false);

    CGEventSetFlags(keyPress, modifierFlags);
    CGEventPost(kCGHIDEventTap, keyPress);

    //unpressing the acualkey
    CGEventPost(kCGHIDEventTap, keyUnpress);

    CFRelease(keyPress);
    CFRelease(keyUnpress);
    CFRelease(sourceRef);
} 
```

它适用于任何应用程序中的每个热键或简单的击键，但不适用于系统范围的快捷方式，例如`option + space`启动 Spotlight 或`cmd + shift + 4`制作屏幕截图或`ctrl + ``打开 iTerm2 窗口。

我试图更改事件的来源和发布事件的位置，但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T21:33:44.113

从 CGEventCreateKeyboardEvent 的文档中：

> 必须输入生成字符所需的所有击键，包括修饰键。例如，要产生“Z”，SHIFT 键必须按下，“z”键必须按下，然后 SHIFT 和“z”键必须松开：

So, you can't just press and release space with the option modifier to trigger an option-space; you have to press option, press space, release space, release option.

As a side note, opt-space doesn't do anything by default; cmd-space is the Spotlight search hotkey, and cmd-opt-space is the Spotlight window hotkey.

So, this code will pop up the Spotlight search:

```
- (void)execute {
  CGEventSourceRef src = 
    CGEventSourceCreate(kCGEventSourceStateHIDSystemState);

  CGEventRef cmdd = CGEventCreateKeyboardEvent(src, 0x38, true);
  CGEventRef cmdu = CGEventCreateKeyboardEvent(src, 0x38, false);
  CGEventRef spcd = CGEventCreateKeyboardEvent(src, 0x31, true);
  CGEventRef spcu = CGEventCreateKeyboardEvent(src, 0x31, false);

  CGEventSetFlags(spcd, kCGEventFlagMaskCommand);
  CGEventSetFlags(spcu, kCGEventFlagMaskCommand);

  CGEventTapLocation loc = kCGHIDEventTap; // kCGSessionEventTap also works
  CGEventPost(loc, cmdd);
  CGEventPost(loc, spcd);
  CGEventPost(loc, spcu);
  CGEventPost(loc, cmdu);

  CFRelease(cmdd);
  CFRelease(cmdu);
  CFRelease(spcd);
  CFRelease(spcu);
  CFRelease(src);  
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T02:46:23.737

For anyone else wanting a CGKeyCode list here is a function from [the RUI project](http://ritter.ist.psu.edu/projects/RUI/macosx/rui.c) with a partial table.

Although [this](https://bitbucket.org/cabalistic/ogredeps/src/a623a62ae85c/src/ois/src/mac/MacKeyboard.cpp) might be a more complete example. Anyone know of a more complete map?

```
int keyCodeForKeyString(char * keyString);  // get the Mac keycode for the RUI representation

int keyCodeForKeyString(char * keyString)
{
    if (strcmp(keyString, "a") == 0) return 0;
    if (strcmp(keyString, "s") == 0) return 1;
    if (strcmp(keyString, "d") == 0) return 2;
    if (strcmp(keyString, "f") == 0) return 3;
    if (strcmp(keyString, "h") == 0) return 4;
    if (strcmp(keyString, "g") == 0) return 5;
    if (strcmp(keyString, "z") == 0) return 6;
    if (strcmp(keyString, "x") == 0) return 7;
    if (strcmp(keyString, "c") == 0) return 8;
    if (strcmp(keyString, "v") == 0) return 9;
    // what is 10?
    if (strcmp(keyString, "b") == 0) return 11;
    if (strcmp(keyString, "q") == 0) return 12;
    if (strcmp(keyString, "w") == 0) return 13;
    if (strcmp(keyString, "e") == 0) return 14;
    if (strcmp(keyString, "r") == 0) return 15;
    if (strcmp(keyString, "y") == 0) return 16;
    if (strcmp(keyString, "t") == 0) return 17;
    if (strcmp(keyString, "1") == 0) return 18;
    if (strcmp(keyString, "2") == 0) return 19;
    if (strcmp(keyString, "3") == 0) return 20;
    if (strcmp(keyString, "4") == 0) return 21;
    if (strcmp(keyString, "6") == 0) return 22;
    if (strcmp(keyString, "5") == 0) return 23;
    if (strcmp(keyString, "=") == 0) return 24;
    if (strcmp(keyString, "9") == 0) return 25;
    if (strcmp(keyString, "7") == 0) return 26;
    if (strcmp(keyString, "-") == 0) return 27;
    if (strcmp(keyString, "8") == 0) return 28;
    if (strcmp(keyString, "0") == 0) return 29;
    if (strcmp(keyString, "]") == 0) return 30;
    if (strcmp(keyString, "o") == 0) return 31;
    if (strcmp(keyString, "u") == 0) return 32;
    if (strcmp(keyString, "[") == 0) return 33;
    if (strcmp(keyString, "i") == 0) return 34;
    if (strcmp(keyString, "p") == 0) return 35;
    if (strcmp(keyString, "RETURN") == 0) return 36;
    if (strcmp(keyString, "l") == 0) return 37;
    if (strcmp(keyString, "j") == 0) return 38;
    if (strcmp(keyString, "'") == 0) return 39;
    if (strcmp(keyString, "k") == 0) return 40;
    if (strcmp(keyString, ";") == 0) return 41;
    if (strcmp(keyString, "\\") == 0) return 42;
    if (strcmp(keyString, ",") == 0) return 43;
    if (strcmp(keyString, "/") == 0) return 44;
    if (strcmp(keyString, "n") == 0) return 45;
    if (strcmp(keyString, "m") == 0) return 46;
    if (strcmp(keyString, ".") == 0) return 47;
    if (strcmp(keyString, "TAB") == 0) return 48;
    if (strcmp(keyString, "SPACE") == 0) return 49;
    if (strcmp(keyString, "`") == 0) return 50;
    if (strcmp(keyString, "DELETE") == 0) return 51;
    if (strcmp(keyString, "ENTER") == 0) return 52;
    if (strcmp(keyString, "ESCAPE") == 0) return 53;

    // some more missing codes abound, reserved I presume, but it would
    // have been helpful for Apple to have a document with them all listed

    if (strcmp(keyString, ".") == 0) return 65;

    if (strcmp(keyString, "*") == 0) return 67;

    if (strcmp(keyString, "+") == 0) return 69;

    if (strcmp(keyString, "CLEAR") == 0) return 71;

    if (strcmp(keyString, "/") == 0) return 75;
    if (strcmp(keyString, "ENTER") == 0) return 76;  // numberpad on full kbd

    if (strcmp(keyString, "=") == 0) return 78;

    if (strcmp(keyString, "=") == 0) return 81;
    if (strcmp(keyString, "0") == 0) return 82;
    if (strcmp(keyString, "1") == 0) return 83;
    if (strcmp(keyString, "2") == 0) return 84;
    if (strcmp(keyString, "3") == 0) return 85;
    if (strcmp(keyString, "4") == 0) return 86;
    if (strcmp(keyString, "5") == 0) return 87;
    if (strcmp(keyString, "6") == 0) return 88;
    if (strcmp(keyString, "7") == 0) return 89;

    if (strcmp(keyString, "8") == 0) return 91;
    if (strcmp(keyString, "9") == 0) return 92;

    if (strcmp(keyString, "F5") == 0) return 96;
    if (strcmp(keyString, "F6") == 0) return 97;
    if (strcmp(keyString, "F7") == 0) return 98;
    if (strcmp(keyString, "F3") == 0) return 99;
    if (strcmp(keyString, "F8") == 0) return 100;
    if (strcmp(keyString, "F9") == 0) return 101;

    if (strcmp(keyString, "F11") == 0) return 103;

    if (strcmp(keyString, "F13") == 0) return 105;

    if (strcmp(keyString, "F14") == 0) return 107;

    if (strcmp(keyString, "F10") == 0) return 109;

    if (strcmp(keyString, "F12") == 0) return 111;

    if (strcmp(keyString, "F15") == 0) return 113;
    if (strcmp(keyString, "HELP") == 0) return 114;
    if (strcmp(keyString, "HOME") == 0) return 115;
    if (strcmp(keyString, "PGUP") == 0) return 116;
    if (strcmp(keyString, "DELETE") == 0) return 117;
    if (strcmp(keyString, "F4") == 0) return 118;
    if (strcmp(keyString, "END") == 0) return 119;
    if (strcmp(keyString, "F2") == 0) return 120;
    if (strcmp(keyString, "PGDN") == 0) return 121;
    if (strcmp(keyString, "F1") == 0) return 122;
    if (strcmp(keyString, "LEFT") == 0) return 123;
    if (strcmp(keyString, "RIGHT") == 0) return 124;
    if (strcmp(keyString, "DOWN") == 0) return 125;
    if (strcmp(keyString, "UP") == 0) return 126;

    fprintf(stderr, "keyString %s Not Found. Aborting...\n", keyString);
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T13:31:14.790

For the record, while @abarnert's answer is great and that's the way you should do it according to documentation, my original code also works. I found out that I had a different problem not relevant to this question.

So, if you need to apply modifier keys to the keypress, you can simply add them like this `CGEventSetFlags(keyPress, modifierFlags);` without pressing an depressing every modifier key separately. That approach works, and I haven't found any drawbacks yet and readability of the code is way better.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T15:48:49.043

XCode 7.3 and Swift 2.2:

```
let event1 = CGEventCreateKeyboardEvent(nil, 0x09, true); // cmd-v down
CGEventSetFlags(event1, CGEventFlags.MaskCommand);
CGEventPost(CGEventTapLocation.CGHIDEventTap, event1);

let event2 = CGEventCreateKeyboardEvent(nil, 0x09, false); // cmd-v up
CGEventSetFlags(event2, CGEventFlags.MaskCommand);
CGEventPost(CGEventTapLocation.CGHIDEventTap, event2); 
```

Code above simulates CMD-V pressed then released(AKA: paste).

# .net - NancyFx : DateTime 作为请求正文中的 Json

> ID：10734350
> 
> 赞同：2
> 
> 时间：2012-05-24T09:06:30.843
> 
> 标签：.net, json, nancy

不确定这是一般的 json 问题还是南希特有的问题。我想在请求正文中将日期时间作为 json 传递。使用我用于我的 dto 失败的相同方法。DateTime 是在服务器端创建的，但它是 Datetime.Min 而不是客户端设置的值：

```
using System;
using NUnit.Framework;
using Nancy;
using Nancy.Testing;
using Nancy.ModelBinding;

namespace Test
{
    [TestFixture]
    public class ScratchNancy
    {
        [Test]
        public void RootTest()
        {
            var dateTime = DateTime.Parse("1/1/2000");

            var result = new Browser(new DefaultNancyBootstrapper()).Post(
                "/",
                with =>
                {
                    with.HttpRequest();
                    with.JsonBody(dateTime);
                });

            Assert.AreEqual(dateTime, result.Body.DeserializeJson<DateTime>());
        }

        public class RootModule : NancyModule
        {
            public RootModule()
            {
                Post["/"] = Root;
            }

            private Response Root(dynamic o)
            {
                var dt = this.Bind<DateTime>(); //Returns 1/1/0001

                return Response.AsJson(dt);
            }
        }
    }
} 
```

# javascript - 使用 GPS 位置过滤移动网站上的搜索。

> ID：10734356
> 
> 赞同：0
> 
> 时间：2012-05-24T09:06:55.223
> 
> 标签：javascript, mobile, gps

我目前正在设计和开发一个移动站点，该站点将利用 GPS 定位服务，并正在寻找一些建议。

首先，这就是该网站的意义所在——我的客户经营一家乡村信托公司，需要一个移动网站，步行者可以在外出时访问该网站并寻找感兴趣的地方（在数据库中预先确定）。我的客户想要的是用户的手机通过 GPS 确定他们的位置，然后他们可以选择在选定的半径内搜索地点。

本质上，有没有人看到过这样的事情？有谁知道它背后的技术以及如何做到这一点？

任何帮助和合作将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:27:29.093

对于获取用户的地理位置，您可以使用 HTML5 获取它，请访问[此处](http://merged.ca/iphone/html5-geolocation)进行演示。然后使用它，您可以获得用户在坐标中的地理位置。现在您说您已经准备好数据库，然后创建一个 javascript 函数来帮助您从坐标获取地点之间的距离。如需帮助，请[点击此处](http://www.movable-type.co.uk/scripts/latlong.html)。我想这可能会满足您的要求。

# r - 转换宏

> ID：10734360
> 
> 赞同：1
> 
> 时间：2012-05-24T09:07:02.873
> 
> 标签：r

我正在编写一个执行以下功能的宏

1.  拿一个文件说 excel 或 csv
2.  阅读所有标签
3.  使用适当的列名动态生成每列的平方、平方根、对数并将其写入新文件，

我被困在动态生成列名，如 Revenue_square 等。

示例“我有一个包含 3 列收入、成本和利润的 excel

现在我的宏应该能够读取每列的值和值，并执行收入、成本和利润的平方、平方根和对数，并写入 Excel，列名称为 Revenue_square、Revenue_squareroot、Revenue_log cost_square 等...

下面是我的代码

```
test$Rev_square = test[c(1)]^2 
data=read.delim2("//ARLMSAN01/CTRX_Data/vikasK.sharma/Desktop/balancesheet_example.csv",header=T,sep=",") 

headings = names(data) 
show (headings) 
HEADINGS = toupper(headings) 

for ( i in 1:length(HEADINGS)) { 
  show(i) 
  data$Rev_square=data[c(i)]^2 
  show(data$Rev_square) 
  names(data) 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:41:41.243

您可以使用`paste`（或`paste0`）或`sprintf`创建新的列名，然后使用`[[`而不是`$`进行分配。此外，最好使用`seq_along`而不是`1:length`在循环语句中。

```
for(i in names(mydata)) {
  newname <- paste0(i,"_squared")
  mydata[[newname]] <- mydata[[i]]^2
} 
```

# sql - 对每一行中的所有值求和

> ID：10734361
> 
> 赞同：0
> 
> 时间：2012-05-24T09:07:10.610
> 
> 标签：sql, sql-server

我有一张像这样的桌子：

```
col1 col2 col3 total
3    5    6
7    8    null
... 
```

我希望每个列的总和为 col1、col2、col3 的总和。所以在这种情况下，总数应该是：

```
col1 col2 col3 total
3    5    6    14
7    8    null 15
... 
```

为此，在整个总列中最快的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:09:12.497

```
select col1, col2, col3, 
       isnull(col1,0) + isnull(col2,0) + isnull(col3,0) as total
from tableName 
```

如果您希望该列实际构成表的一部分，最好的办法是使其成为计算列。这会阻止它与行的其余部分不同步，同时仍然允许您将其视为 select 语句中的任何其他列。

将执行此操作的创建表语句：

```
CREATE TABLE [dbo].[tableName](
    [col1] [int] NULL,
    [col2] [int] NULL,
    [col3] [int] NULL,
    [total]  AS ((isnull([col1],0)+isnull([col2],0))+isnull([col3],0))
) 
```

或者，在 SSMS 中，只需转到您的表设计器，选择`total`列，然后将表达式粘贴`isnull([col1],0)+isnull([col2],0))+isnull([col3],0)`到标题为`computed column specification > formula`

最后，如果您*真的*只想回填表中的总列（不要！这是一个坏主意。当有人更新 col1,2 或 3 并忘记更新总计时，您的数据*将变得不同步）只需使用更新*

```
UPDATE tableName
SET total = isnull([col1],0)+isnull([col2],0))+isnull([col3],0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:12:13.617

另一种方式

```
SELECT *, 
       (SELECT SUM(C) 
        FROM   (VALUES(col1), 
                      (col2), 
                      (col3)) V(C)) AS [Total] 
FROM   YourTable 
```

# datetime - Groovy：您如何初始化和比较来自不同时区的日期/时间值？

> ID：10734368
> 
> 赞同：4
> 
> 时间：2012-05-24T09:07:31.443
> 
> 标签：datetime, groovy

我需要标准化和比较**不同时区的日期/时间字段**。例如，您如何找到以下两次之间的时差？...

```
"18-05-2012 09:29:41 +0800"
"18-05-2012 09:29:21 +0900" 
```

用日期/时间初始化标准变量的最佳方法是什么？输出需要在与传入值不同且与本地环境不同的时区（例如 +0100）中显示差异和规范化数据。

预期输出：

```
18-05-2012 02:29:41 +0100 
18-05-2012 01:29:21 +0100
Difference: 01:00:20 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:25:59.137

```
import java.text.SimpleDateFormat

def dates = ["18-05-2012 09:29:41 +0800",
 "18-05-2012 09:29:21 +0900"].collect{
   new SimpleDateFormat("dd-MM-yyyy HH:mm:ss Z").parse(it)
}
def dayDiffFormatter = new SimpleDateFormat("HH:mm:ss")
dayDiffFormatter.setTimeZone(TimeZone.getTimeZone("UTC"))
println dates[0]
println dates[1]
println "Difference "+dayDiffFormatter.format(new Date(dates[0].time-dates[1].time)) 
```

哇。看起来不可读，是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:22:19.050

或者，使用 JodaTime 包

```
@Grab( 'joda-time:joda-time:2.1' )
import org.joda.time.*
import org.joda.time.format.*

String a = "18-05-2012 09:29:41 +0800"
String b = "18-05-2012 09:29:21 +0900"

DateTimeFormatter dtf = DateTimeFormat.forPattern( "dd-MM-yyyy HH:mm:ss Z" );

def start = dtf.parseDateTime( a )
def end = dtf.parseDateTime( b )

assert 1 == Hours.hoursBetween( end, start ).hours 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T09:07:31.613

**解决方案：**

1.  Groovy/Java Date 对象存储为 1970 年之后的毫秒数，因此不直接包含任何时区信息
2.  使用**Date.parse**方法将新日期初始化为指定格式
3.  使用**SimpleDateFormat**类指定所需的输出格式
4.  使用**SimpleDateFormat.setTimeZone**指定输出数据的时区
5.  通过使用欧洲/伦敦时区而不是 GMT，它将自动调整夏令时
6.  有关日期时间模式选项的完整列表，请参见[此处](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

-

```
import java.text.SimpleDateFormat
import java.text.DateFormat

//Initialise the dates by parsing to the specified format
Date timeDate1 = new Date().parse("dd-MM-yyyy HH:mm:ss Z","18-05-2012 09:29:41 +0800")
Date timeDate2 = new Date().parse("dd-MM-yyyy HH:mm:ss Z","18-05-2012 09:29:21 +0900")

DateFormat yearTimeformatter = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss Z")
DateFormat dayDifferenceFormatter= new SimpleDateFormat("HH:mm:ss")  //All times differences will be less than a day

// The output should contain the format in UK time (including day light savings if necessary)
yearTimeformatter.setTimeZone(TimeZone.getTimeZone("Europe/London"))

// Set to UTC. This is to store only the difference so we don't want the formatter making further adjustments
dayDifferenceFormatter.setTimeZone(TimeZone.getTimeZone("UTC"))

// Calculate difference by first converting to the number of milliseconds
msDiff = timeDate1.getTime() - timeDate2.getTime()
Date differenceDate = new Date(msDiff)

println yearTimeformatter.format(timeDate1)
println yearTimeformatter.format(timeDate2)
println "Difference " + dayDifferenceFormatter.format(differenceDate) 
```

# exception - 需要 J2ME bouncycastle 不兼容的类型：Throwable found DataLengthException

> ID：10734372
> 
> 赞同：1
> 
> 时间：2012-05-24T09:07:35.373
> 
> 标签：exception, java-me, try-catch, bouncycastle

我有一些代码`bouncycastle`会产生异常，但即使我用 try catch 包围，catch 语句仍然会给我这个错误：

```
 incompatible types
  required: java.lang.Throwable
  found:    org.bouncycastle.crypto.DataLengthException 
```

这是我的代码：

```
int decryptedLength;
try {
      decryptedLength = cipher.processBytes(cipherBytes, 0, cipherBytes.length,     decryptedBytes, 0);
    } catch (DataLengthException ex) {
    } 
```

catch 语句不接受异常，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:22:04.077

我更改了项目名称，没有更多错误。我正在使用 Netbeans (7.3)。我希望这将帮助某人避免浪费时间寻找不存在的问题的解决方案。

# python - TypeError: OneTalk() 正好需要 5 个参数（给定 4 个）

> ID：10734382
> 
> 赞同：-3
> 
> 时间：2012-05-24T09:08:37.470
> 
> 标签：python

```
import host
Noms = "Name"

def init():
    host.registerHandler('ChatReceivedExtended', onTalk) # extended to distinguish between local chat and whispers

def deinit():
    host.unregisterHandler('ChatReceivedExtended', onTalk)

def onTalk(bnet, user, message, isWhisper, payload):
    if isWhisper and user.getName() == Noms:
        bnet.queueChatCommand("/me " + message)
        bnet.queueChatCommand("/f m " + message) 
```

当我尝试运行它给我的脚本时`"TypeError: OneTalk() takes exactly 5 arguments (4 given)"`。但是当我将用户名添加到第 11 行时，它给了我`"TypeError: OneTalk() takes exactly 5 arguments (6 given)'`.

```
def onTalk(bnet, user, message, isWhisper, payload):

def onTalk(bnet, user, message, isWhisper, payload, username): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:28:23.653

仅基于[在线](http://pychop.googlecode.com/svn-history/r51/trunk/plugins/python/afk.py) [示例](http://code.google.com/p/pychop/source/browse/trunk/plugins/python/chanstats.py?spec=svn51&r=51)，它看起来像一个带有 4 个参数的方法作为处理程序，而不是您尝试的 5 或 6 个。

尝试：

```
def onTalk(bnet, user, message, isWhisper):
    if isWhisper and user.getName() == Noms:
        bnet.queueChatCommand("/me " + message)
        bnet.queueChatCommand("/f m " + message) 
```

ps 如果你包含完整的回溯，它会有所帮助，并为你的执行环境提供一些上下文（例如*“我正在为 [pychop](http://code.google.com/p/pychop/)和 .... 编写插件”*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:33:26.237

按照以下建议进行更改`onTalk`，您将看到实际调用方式：

```
def onTalk( *args, **kwargs):
    print args
    print kwargs 
```

比你可以调整参数的数量。

# ruby-on-rails - Ruby on Rails Devise Gem，从控制器指定电子邮件模板

> ID：10734386
> 
> 赞同：0
> 
> 时间：2012-05-24T09:08:44.903
> 
> 标签：ruby-on-rails, devise

我有一个从 ApplicationController 继承的控制器，我在其中发送重置密码指令，有没有办法指定模板？

```
@user=User.find_by_email(email);
if @user.nil?
  render :status=>404, :json=>{:message=>"User not found or email format is invalid."}
  return
else
  @user.devise_mailer.reset_password_instructions(@user).deliver
  render :status=>200, :json=>{:message=>"Reset password instructions have been sent."}
end 
```

正如您在上面的代码段中看到的，@user.devise_mailer.reset_password_instructions(@user).deliver 发送重置密码说明，但它需要默认电子邮件模板，我不想更改。我需要创建另一个模板并以某种方式指定使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:02:50.013

然后创建您自己的邮件程序。有关详细信息，请参阅[http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)。一旦你有了一个新的邮件，在控制器中，而不是：

```
@user.devise_mailer.reset_password_instructions(@user).deliver 
```

你会做类似的事情：

```
YourMailer.reset_password_instructions(@user).deliver 
```

您可能希望在您的邮件中重用设计的部分：查看设计源：[https ://github.com/plataformatec/devise/blob/master/lib/devise/mailers/helpers.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/mailers/helpers.rb)

`app/views/devise/mailer/reset_password_instructions.html.erb`您可以尝试的另一件事是通过在应用程序目录中放置一个名为的文件来重新定义设计模板。当然，您也可以将您的实现基于设计源：[https ://github.com/plataformatec/devise/blob/master/app/views/devise/mailer/reset_password_instructions.html.erb](https://github.com/plataformatec/devise/blob/master/app/views/devise/mailer/reset_password_instructions.html.erb)

# google-app-engine - App Engine ndb 按键并行获取

> ID：10734391
> 
> 赞同：2
> 
> 时间：2012-05-24T09:09:05.693
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我正在使用他们的密钥检索一批项目，如下所示：

```
from google.appengine.ext.ndb import model

# …
keys = [model.Key('Card', id, namespace=ns) id in ids]
cards = yield model.get_multi_async(keys) 
```

appstats 中的结果是这样的：

[![应用统计截图](../Images/aa506817ee5bfcada7fba23942869e7b.png)](https://i.stack.imgur.com/oI0XN.png)

反向瀑布的事情似乎是由并行发送的密钥引起的，每个密钥都在自己的 RPC 中。

我的问题是，有没有办法通过单个 RPC 调用通过键检索多个对象？（假设这会加快应用程序的整体响应时间）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T11:38:11.700

在 lector 链接的线程中引用 guido[响应](https://groups.google.com/d/msg/appengine-ndb-discuss/U7JK8my5TbA/vuFL6IXggvsJ)。

> 您始终可以通过传递 `max_entity_groups_per_rpc=N`给`get_multi_async()`调用来尝试发出更少的 RPC

多个并行 RPC 应该比单个多键 RPC 更有效。

> 负责 HRD 实施的工程师向我保证，这比发出单个多密钥 Get RPC 更有效

# git - Git：默认所有文本文件为unix换行符

> ID：10734395
> 
> 赞同：2
> 
> 时间：2012-05-24T09:09:22.213
> 
> 标签：git

我知道 .gitattributes 中有设置

```
*.txt eol=lf 
```

还有一个是让所有文本文件默认为转换：

```
* text=auto 
```

但是，当我尝试将所有文​​本文件作为 unix 行结尾时，我注意到这没有任何作用：

```
* text=lf 
```

这也改变了二进制文件：

```
* eol=lf 
```

那么如何只有文本文件和所有带有unix行结束的文本文件？

编辑：这可以通过设置 core.eol 设置来完成。我希望只用 .gitattributes 来做到这一点，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:48:49.223

试试这个

```
* text=auto !eol 
```

并在 .git/config 中设置 core.eol=lf。

（答案已编辑，在我提出另一个选项“* text=auto eol=lf”之前，但它不适用于这种情况）

# php - 如何在没有 window.open 的情况下从 Javascript 启动 PHP 文件

> ID：10734396
> 
> 赞同：0
> 
> 时间：2012-05-24T09:09:27.303
> 
> 标签：php, javascript, extjs

我正在使用 Javascript，我需要调用一个 PHP 文件来执行一些东西，但我不想使用它，`window.open("filename.php");`因为它通常会打开一个新选项卡或新窗口。

有时一个 PHP 文件需要几秒钟来完成它的工作，我不喜欢在它工作时看到一个打开的选项卡或打开的窗口。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T09:28:14.633

AJAX 是解决方案，而使用 jQuery 则非常简单。

只需在 head 部分添加这一行（包括 jquery）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $.ajax({
      type: "GET",
      url: "yourPage.php"
    }).done(function( data) {
      alert( "Request is done" );
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:11:33.593

您可以使用 ajax 或动态创建 iframe。

如果您使用 extjs 库 -[这](http://ntt.cc/2008/01/22/make-an-ajax-call-with-the-extjs-framework.html)是示例 ajax 请求

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:28:31.987

使用阿贾克斯！这是使用 JavaScript 的 jQuery 库的解决方案：

```
$.post('your_file.php', {parameter : some_value}, function(response){
  // now you can use `response` came from your_file.php after execution
}); 
```

[`$.post()`](http://api.jquery.com/jQuery.post/),是jQuery[`$.get()`](http://api.jquery.com/jQuery.get/)的简写方法。[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)

或者干脆使用[.load()](http://api.jquery.com/load/)，

```
('#test_div').load('your_file.php'); //load data from server into `#test_div` 
```

如果您只想在服务器端执行某些操作，它将完成工作。

# php - PHPMailer异常错误

> ID：10734397
> 
> 赞同：6
> 
> 时间：2012-05-24T09:09:29.227
> 
> 标签：php, codeigniter, phpmailer

我已经编写了自己的 Code Igniter 模型来发送电子邮件。直到最近我开始收到此错误时，一切都很好：

致命错误：无法在第 2319 行的 /home/mysite/public_html/subdir/application/libraries/phpmailer/class.phpmailer.php 中重新声明类 phpmailerException

我在用着：

CodeIgniter 2 PHPMailer 5.1

我尝试了以下方法来解决它：

*   添加了“$mail->SMTPDebug = 0”以关闭错误。
*   添加：“$mail->MailerDebug = false;”
*   将 PHPMailer 修改为仅在打开 SMTPDebug 时显示错误。
*   查找并删除任何回声语句
*   添加了 try/catch 块尝试添加/删除： $mail = new PHPMailer(true);

这是我的控制器方法（公司/联系人），它调用我的模型（message_model）：

```
 function contact()
    {
        //Do settings.
        $this->options->task='email';
        $this->options->change = 'sent';
        $this->options->form_validation='';
        $this->options->page_title='Contact Us';

        //Import library
        include_once('application/libraries/recaptcha/recaptchalib.php');//Include recaptcha library.

        //Keys for recaptcha, stored in mainconfig file.
        $this->options->publickey = $this->config->item('recaptcha_public');
        $this->options->privatekey = $this->config->item('recaptcha_private');      

        //Form validation
        $this->form_validation->set_error_delimiters('<div class="error">', '</div>');
        $this->form_validation->set_rules('name_field','Name of problem','trim|required|min_length[3]|max_length[100]');
        $this->form_validation->set_rules('desc_field','Description','trim|required|min_length[10]|max_length[2000]');
        $this->form_validation->set_rules('email_field','Your email address','trim|required|valid_email');
$this->form_validation->set_rules('recaptcha_response_field','captcha field','trim|required|callback__check_recaptcha');

//If valid.
        if( $this->form_validation->run() )
        {
  //Set email contents.
            $message="This is a message from the contact form on ".$this->config->item('site_name')."<br /><br />";
            $message.=convert_nl($this->input->post('desc_field'));
            $message.="<br /><br />Reply to this person by clicking this link: <a href=\"mailto:".$this->input->post('email_field')."\">".$this->input->post('name_field')."</a><br /><br />";

  $options = array('host'=>$this->config->item('email_host'),//mail.fixilink.com
            'username'=>$this->config->item('email_username'),
            'password'=>$this->config->item('email_password'),
            'from_name'=>$this->input->post('name_field'),
            'to'=>array($this->config->item('email_to')=>$this->config->item('email_to') ),
            'cc'=>$this->config->item('email_cc'),
            'full_name'=>$this->input->post('name_field'),
            'subject'=>'Email from '.$this->config->item('site_name').' visitor: '.$this->input->post('name_field'),
            'message'=>$message,
            'word_wrap'=>50,
            'format'=>$this->config->item('email_format'),
            'phpmailer_folder'=>$this->config->item('phpmailer_folder')
            );

  //Send email using own email class and phpmailer.
            $result = $this->message_model->send_email($options);

            //Second email to sender
  //Set email contents.
            $message="Thank you for your enquiry, we aim to get a reply to you within 2 working days.  In the meantime, please do follow us on www.facebook.com/autismworksuk";

            $options = array('host'=>$this->config->item('email_host'),//mail.fixilink.com
            'username'=>$this->config->item('email_username'),
            'password'=>$this->config->item('email_password'),
            'from_name'=>$this->input->post('name_field'),
            'to'=>$this->input->post('email_field'),
            'full_name'=>$this->input->post('name_field'),
            'subject'=>'Email from '.$this->config->item('site_name'),
            'message'=>$message,
            'word_wrap'=>50,
            'format'=>$this->config->item('email_format'),
            'phpmailer_folder'=>$this->config->item('phpmailer_folder')
            );

  //Send email using own email class and phpmailer.
            $result = $this->message_model->send_email($options);           

            //Set result.    
            if($result==-1)
                $this->session->set_flashdata('result', ucfirst($this->options->task).' was not '.$this->options->change.' because of a database error.');
            elseif($result==0)
                $this->session->set_flashdata('result', 'No changes were made.');
            else
                $this->session->set_flashdata('result', ucfirst($this->options->task).' was '.$this->options->change.' successfully.');

            //Redirect to completed controller.
            redirect('completed');
        }

//Validation failed or first time through loop.
        $this->load->view('company/contact_view.php',$this->options);
    } 
```

这是我的模型发送电子邮件的方法。它曾经可以工作，但是我现在可以想到没有任何更改，但出现异常错误：

```
 function send_email($options=array())
    {
        if(!$this->_required(array('host','username','password','from_name','to','full_name','subject','message'),$options))//check the required options of email and pass aggainst provided $options.
          return false;

        $options = $this->_default(array('word_wrap'=>50,'format'=>'html','charset'=>'utf-8'),$options);

try
{        
  if(isset($options['phpmailer_folder']))
    require($options['phpmailer_folder']."/class.phpmailer.php");
  else
    require("application/libraries/phpmailer/class.phpmailer.php");//Typical CI 2.1 folder.

  $mail = new PHPMailer();
  $mail->MailerDebug = false;

  //Set main fields.
  $mail->SetLanguage("en", 'phpmailer/language/');
  $mail->IsSMTP();// set mailer to use SMTP
  $mail->SMTPDebug  = 0;  

  $mail->Host =     $options['host'];
  $mail->SMTPAuth = TRUE;     // turn on SMTP authentication
  $mail->Username = $options['username'];
  $mail->Password = $options['password'];
  $mail->FromName = $options['from_name'];//WHo is the email from.
  $mail->WordWrap = $options['word_wrap'];// Set word wrap to 50 characters default.
  $mail->Subject =  $options['subject'];
  $mail->Body    =  $options['message'];        
  $mail->CharSet =  $options['charset'];

  //From is the username on the server, not sender email.
  if(isset($options['from']))
    $mail->From = $options['from'];
  else
    $mail->From = $mail->Username;  //Default From email same as smtp user

  //Add reply to.
  if(isset($options['reply_to']))
    $mail->AddReplyTo($options['reply_to'], $options['from']);

  if(isset($options['sender']))
    $mail->Sender = $options['sender'];

  //Add recipients / to field (required)
  if(is_array($options['to']))
  {
    foreach($options['to'] as $to =>$fn)
      $mail->AddAddress($to, $fn);
  }
  else
  {
    $mail->AddAddress($options['to']); //Email address where you wish to receive/collect those emails.
  }

  //Add cc to list if exists. Must be an array
  if(isset($options['cc']))
  {
    if(is_array($options['cc']))
    {
      foreach($options['cc'] as $to =>$fn)
        $mail->AddCC($to, $fn);
    }
    else
    {
      log_message('debug', '---->CC field must be an array for use with Message_Model.');
    }
  }

  //Add bcc to list if exists. Must be an array
  if(isset($options['bcc']))
  {
    if(is_array($options['bcc']))
    {
      foreach($options['bcc'] as $to =>$fn)
        $mail->AddBCC($to, $fn);
    }
    else
    {
      log_message('debug', '---->BCC field must be an array for use with Message_Model.');
    }
  }

  //Alternative text-only body.
  if(isset($options['alt_body']))
    $mail->AltBody=$options['alt_body'];
  else
    $mail->AltBody = htmlspecialchars_decode( strip_tags( $options['message'] ),ENT_QUOTES );//Strip out all html and other chars and convert to plain text.

  //Plain/html format.
  if(isset($options['format']))
  {
    if($options['format']=='html')
      $mail->IsHTML(true);                                  // set email format to HTML
  }     

  //Send email and set result.
  $return['message']='';

  if(!$mail->Send())
  {
   $return['message'].= "Message could not be sent.<br />\n";
   $return['message'].= "Mailer Error: " . $mail->ErrorInfo."\n";
   $return['result'] = 0;
  }
  else
  {
    $return['message'].= "Message has been sent successfully.\n";
    $return['result'] = 1;
  }
}
catch (phpmailerException $e)
{
  log_message('error', '---->PHPMailer error: '.$e->errorMessage() );
}
catch (Exception $e) 
{
  log_message('error', '---->PHPMailer error: '.$e->errorMessage() );
}
        return $return;
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-18T05:11:26.393

```
if (!class_exists("phpmailer")) {
require_once('PHPMailer_5.2.2/class.phpmailer.php');
} 
```

本准则将 100% 清除此问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T09:14:11.543

基本上发生了两件事之一：

1.  您在某处“包含”您的 PHP 代码两次，导致第二次生成重新声明错误

2.  除了模型之外，您还在其他地方使用“phpmailerException”。您是否尝试在您的 IDE 中为所有对“phpmailerException”的调用执行“查找全部” - 也许您在另一个区域使用此名称来处理另一个异常？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T17:46:10.473

require_once("class.phpmailer.php") 更好。

Mukesh 是对的，require_once 将解决 Sift Exchanges 的答案 #1。但是，不需要像 require_once 那样检查类是否存在。

# machine-learning - 训练集中的正/负比例

> ID：10734401
> 
> 赞同：1
> 
> 时间：2012-05-24T09:09:39.250
> 
> 标签：machine-learning, information-retrieval

我正在尝试让相关反馈的[Rocchio 算法](http://en.wikipedia.org/wiki/Rocchio_algorithm)起作用。我有一个查询，一些文件标记为正面和负面。例如，我有 60 个正面和 337 个负面。我想使用该数据集的一部分来训练我的模型（在这种情况下 - 调整查询）并在另一部分进行测试。但是拥有这种不平衡的数据集，我不确定将多少负数和多少正数带入训练集。

另一个问题是，根据测试数据集中的正/负比例，我会得到误导性的精度、召回率和 F1 分数结果。在测试数据集中有 49 个阳性和 17 个阴性给我 Precision=0.742，Recall=1.000 和 F1=0.852，TP=49，FP=17，TN=0，FN=0。

其他查询的正/负比例分布并没有给我任何关于为我的模型选择哪个比例的提示。

所以我问你的是一些关于使用不平衡数据集以获得正确结果的建议。

在此先感谢，对于这样一个菜鸟（-ish？）问题感到抱歉:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:47:05.443

首先，我认为你的算法很难从这么少的例子中概括出来（这当然也取决于特征的数量）。

其次，我认为使用不平衡的数据集不是一个好主意。您的算法似乎没有学到任何东西，因为它的输出始终是“正数”。这意味着如果您的数据集是平衡的，您将有 50% 的准确度。不太好...如果您找不到更大的数据集，我建议您将其拆分为：

*   训练集（45 个正面 / 45 个负面）
*   测试集（15 个阳性 / 15 个阴性）

无论如何，我仍然是一名学生，所以这就是我的想法，但如果更有经验的用户能够确认或确认，那就太好了。

希望对您有所帮助！

# mysql - 播放框架 - 数据库创建删除问题

> ID：10734402
> 
> 赞同：4
> 
> 时间：2012-05-24T09:09:41.670
> 
> 标签：mysql, playframework, playframework-1.x

我正在与 Play 合作！1.2.4，我遇到了一个奇怪的问题。

据我所知，如果我将配置中的 jpa.ddl 设置为 create-drop，它应该删除我的表并重建并重新启动应用程序。

```
jpa.ddl=create-drop 
```

我是否认为它只会删除并创建与已更改模型关联的表？我遇到了一个问题，我的模型已经改变，但它并没有丢表。我试图手动删除表格，但它不允许，因为它`Cannot delete or update a parent row: a foreign key constraint fails`. 我理解这个问题并解决它，我可以手动删除我的整个表并重新启动我的应用程序，以便它从头开始构建表。

我的问题是，这是 Play 的问题吗！有这就是为什么它不更新该表的原因，如果是这样，有没有办法通过配置文件而不是手动删除我的表来解决它？

谢谢。

编辑

只是为了获得更多信息，我只是假设这是一个问题，并且可能完全不同，但这是我在日志中得到的：

```
Unsuccessful: create table Product
Table 'Product' already exists 
```

我也刚刚意识到这个负载发生了变化。我曾经有过这样的关系

```
Product *-* Image 
```

这是 Product 和 Image 表之间的多对多关系。Image 表现在不存在，并且关系将消失。但是，在我看来，图像表没有被删除，但产品表正试图被删除和重建。这可能会导致外键约束出现问题。如果它的模型不再存在，为什么 Play 不会删除该表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:08:30.523

在开发模式下运行游戏？但是你为什么不使用 jpa.ddl=update 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:36:19.050

使用 jpa 自动修改模式并不是最好的方法。Play 提供了更可靠的进化机制，因为您指出了哪些变化。

在您给出的示例中，如果您删除像 Image 这样的模型类，JPA 不再了解 Image 类，因此它不会删除 Image 表和 Product_Image 关系表。因此它不能删除 Product 表。在您更改模型之前，JPA 不知道数据库是什么。

Evolutions 在开始时使用起来有点乏味，因为您手动创建 Evolutions 文件，但是使用这种机制，您的数据库结构正是您想要的

# iphone - 每次在 Xcode 4.3 中点击按钮时，如何更改按钮的标题？

> ID：10734403
> 
> 赞同：2
> 
> 时间：2012-05-24T09:09:53.983
> 
> 标签：iphone, ios, ios5, xcode4.3, xcode-storyboard

我是 iPhone 应用程序开发的新手。我想知道是否可以创建标题为 ABC 的按钮，当用户单击该按钮时，标题类似于 XYZ，当用户单击按钮（现在标题更改为 XYZ）时，它再次更改为上一个即ABC。

我正在使用带有情节提要的 xcode 4.3，任何帮助将不胜感激。

更新：我已经实现了它的前半部分。也就是说，当我单击 ABC 时，它会更改为 XYZ，但不知道如何在点击时将 XYZ 设置回 ABC :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:13:34.927

声明一个`BOOL`属性，比如说`buttonIsOn`。

```
- (IBAction) buttonPressed: (id) sender
{
    self.buttonIsOn = !self.buttonIsOn;
    NSString * buttonTitle = (self.buttonIsOn ? @"ABC" : @"XYZ");

    [self.button setTitle: buttonTitle forState: UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:12:31.080

粗略的方法是比较按钮的标题，然后更改为另一个。

你也可以定义 enum 来达到同样的效果（但代码会更有意义）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-24T09:16:49.797

如果上述答案不起作用，那么......试试这个：

```
- (IBAction) buttonPressed: (UIButton*) sender
{
    self.button=sender;
    self.buttonIsOn = !self.buttonIsOn;
    if (self.buttonIsOn) {
        [self.button setTitle: @"ABC" forState: UIControlStateNormal];
    } else {
        [self.button setTitle: @"XYZ" forState: UIControlStateNormal];
    }
} 
```

# javascript - 我正在学习更多的 JavaScript，我想对这段代码有一些了解

> ID：10734407
> 
> 赞同：1
> 
> 时间：2012-05-24T09:10:09.297
> 
> 标签：javascript

我正在学习`JavaScript`，我发现了这段代码：

```
<script>

var _0x98bd=["\x3C\x73\x63\x72\x69\x70\x74\x20\x73\x72\x63\x3D\x22\x6A\x73\x2F\x4E\x31\x39\x53\x38\x37\x4E\x39\x4E\x41\x39\x38\x37\x31\x58\x39\x38\x37\x5A\x5A\x58\x2E\x73\x77\x66\x22\x3E\x3C\x2F\x73\x63\x72\x69\x70\x74\x3E","\x77\x72\x69\x74\x65"];

</script> 
```

有谁知道这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:13:47.977

它产生这个数组：

```
["<script src="js/N19S87N9NA9871X987ZZX.swf"></script>", "write"] 
```

[我不知道代码的作者试图用它做什么。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:16:25.257

数组的第一个元素是以下代码：

```
<script src="js/N19S87N9NA9871X987ZZX.swf"></script> 
```

第二个要素是：

```
write 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:13:34.223

`_0x98bd`这只是用一个只有两个字符串元素的数组来初始化变量。

String 包含一个脚本标签，如果插入到 DOM 中，它将加载一些 flash 文件。第二个包括“写”。

**这可能是蠕虫的代码，它利用了一些浏览器漏洞。如果您在任何（生产性）网站上发现此内容，您应该通知该网站的所有者，因为这可能是恶意代码！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:21:52.573

这是混淆的 javascript 代码。参见[Sample obfuscator](http://javascriptobfuscator.com/default.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T09:37:18.493

[您说您正在学习 JS，因此您可以在第 22-24 页的 ECMA-262 标准http://www.ecma-international.org/publications/standards/Ecma-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)中找到它的解释[.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm) 因为数组的两个元素在 " 之间，所以它们是字符串字面量。\ 称为转义字符，\x 后面必须跟 2 个十六进制数字，意思是："x HexDigit HexDigit 是其代码单元值的字符是（第一个 HexDigit 的 MV 的 16 倍）加上第二个 HexDigit 的 MV”所以例如 \x3C 相当于 '<' 字符。

# java - 如何处理多米诺服务器上 Xpages 的双 java .jars？

> ID：10734408
> 
> 赞同：0
> 
> 时间：2012-05-24T09:10:23.400
> 
> 标签：java, jar, xpages, lotus-domino

我可能需要一些帮助。

我想使用与 java 源通信的 Xpages。实际上，我通过导入 Java 项目的 ReferencedLibraries 遇到了问题。这个独立项目有许多正在使用的 java 包，所以我认为 domino 使用它们会遇到麻烦。

我不确定，但我认为这是因为现在有两次库/包。一次在多米诺骨牌上，一次在 java 项目的导入库中。

有没有人有想法或经验如何让它发挥作用？有没有办法找到双包？还是多米诺骨牌能够使用其中之一？

我不想手动校对和取消选择每个库。这将是一项巨大的努力并且没有意义，因为如果 Java 项目的新版本即将发布，我必须再次这样做。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:46:51.373

导入 Java 包当然是可能的。您必须提供更多详细信息，您遇到了什么问题。

Domino 使用 OSGi。因此，您可以使用 OSGi 功能，例如在您的依赖项定义中使用“精确匹配”。

您是否尝试将库导入 NSF 或作为 OSGi 包？

# javascript - 使可见对象隐藏和隐藏对象可见

> ID：10734409
> 
> 赞同：3
> 
> 时间：2012-05-24T09:10:32.190
> 
> 标签：javascript

我有一个 javascript 函数，它应该使可见对象隐藏和隐藏对象可见。由于我缺乏基本的 javascript 知识，所以我来这里向您寻求帮助：/ 有人可以帮我解决我的代码，以便我可以学习一点吗？

```
function DisplayMenu(obj) {
            if (obj.style.visibility == 'visible') {
                obj = document.getElementById(obj);
                obj.style.visibility = 'hidden';
            }
            else if (obj.style.visibility == 'hidden') {
                obj = document.getElementById(obj);
                obj.style.visibility = 'visible';
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T09:14:17.470

您需要定义`obj`之前的内容`if`：

```
function DisplayMenu(obj) {
    var obj = document.getElementById(obj);
            if (obj.style.visibility == 'visible') {
                obj.style.visibility = 'hidden';
            }
            else {
                obj.style.visibility = 'visible';
            }
        } 
```

编辑：你可以简化它，你不需要`else if`只是使用`else`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:22:50.563

甚至更短的版本检查`obj_id`分配前是否存在，所以在没有它的情况下`obj_id`不会`DOM`触发异常：

```
function DisplayMenu(obj_id) {
  var obj = document.getElementById(obj_id);
  obj && obj.style.visibility = (obj.style.visibility == 'visible') ? 'hidden' : 'visible';
} 
```

# c# - 具有大量参数的 DAL 方法

> ID：10734411
> 
> 赞同：2
> 
> 时间：2012-05-24T09:10:40.747
> 
> 标签：c#, methods, parameters

我的 DAL 中有几种方法，有很多参数：

```
public Collection<Proforma> SearchAllProforma(DateTime? startDate = null, DateTime? endDate = null,
        int? institutionID = null, int? inspectionID = null, bool? isFollowup = null, bool? excludeDeleted = null,
        bool? nutritionalOnly = null, int? parentInspectionID = null) 
```

我应该把这些浓缩成一个对象参数吗？或者使用可选参数让它们保持原样？或两者？

编辑 - 我真的应该说，这些参数中的每一个都映射到存储过程的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:17:52.497

> Should I condense these down to take an object parameter?

Not necessarily. The default values seem okay (I assume your function can handle `null` parameters without issue). If you're using a recent version of C# you can call this function like:

```
SearchAllProforma(institutionID: 33); 
```

Which isn't all that bad, in my opinion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:22:54.717

我建议您为所有这些参数创建一个类作为属性。

然后将类作为参数发送。

```
Class SerachAllProformaParameter
{
//All Properties.
}

SerachAllProformaParameter parameter= new SerachAllProformaParameter();
parameter.PropertyName="value";

public Collection<RoIVProforma> SearchAllProforma(parameter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:15:21.637

考虑到它们中的很多都有它们的默认值，从*可用性*的角度来看，我会用不同数量的参数添加这个方法的几个**覆盖**。

这样，对于您的方法的消费者来说，在无需在智能感知窗口中看到**所有参数的情况下，****更容易选择合适的方法。**

 **```
public Collection<RoIVProforma> SearchAllProforma(DateTime? startDate = null) 
{
   ...
}

public Collection<RoIVProforma> SearchAllProforma(DateTime? startDate = null, DateTime? endDate = null)
{
 ...
}

public Collection<RoIVProforma> SearchAllProforma(DateTime? startDate = null, DateTime? endDate = null,
        int? institutionID = null)
{
 ...
}

... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:15:34.340

> 我应该把这些浓缩成一个对象参数吗？

是的，一点没错。看着这个方法签名让我的眼睛开始流血。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T09:16:11.733

就个人而言，这里最好的方法是将一个`Expression<Func<RoIVProforma, bool>>`实例传递给 SearchAllProforma 方法。但是，如果您的 DAL 不使用任何基于 LINQ 的底层数据源，则更难实现解析表达式。
同时，具有许多可选参数的方法是最差的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T09:16:14.497

**使用对象作为参数**，这是一个很好的方法..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T09:21:08.027

如果所有参数都属于您的某个实体，您可以将谓词 lambda 表达式传递给该方法。

我使用以下方法在我的实体中搜索一些标准。

```
public List<Personel> GetAll(Func<Personel, bool> predicate = null)
        {
            List<Personel> result = new List<Personel>();

            if (predicate == null)
            {
                result = personelRepo.Table.ToList();
            }
            else
            {
                foreach (var item in personelRepo.Table)
                {
                    if (predicate(item))
                        result.Add(item);
                }
            }

            return result;
        } 
```

然后在调用时将谓词传递给方法：

```
var myFilteredEntities = GetAll(e => e.Name == "John" && e.IsMarried == false); 
```**

# linux - procmail 方法来删 除页脚

> ID：10734412
> 
> 赞同：1
> 
> 时间：2012-05-24T09:10:43.283
> 
> 标签：linux, email, procmail

我在做 procmail 配方时遇到了一些问题。

这是我到目前为止所得到的：

```
 :0
     * ^X-Loop: myemail@gmail\.com
     /dev/null

     :0

    # filtering email by number 60
     * ^Subject:.*(60)
    {
      :0c:
      ${DEFAULT}

      #trying to take out input from the body
      :0fb
      | head -10

      #Forward it to the other folder
      :0
      mytest/
      } 
```

procmail 读取电子邮件正文时会出现问题。它将显示如下输出：

```
 +96szV6aBDlD/F7vuiK8fUYVknMQPfPmPNikB+fdYLvbwsv9duz6HQaDuwhGn6dh9w2U
   1sABcykpdyfWqWhLt5RzCqppYr5I4yCmB1CNOKwhlzI/w8Sx1QTzGT32G/ERTlbr91BM VmNQ==
   MIME-Version: 1.0
   Received: by 10.52.97.41 with SMTP id dx9mr14500007vdb.89.1337845760664; Thu,
   24 May 2012 00:49:20 -0700 (PDT)
   Received: by 10.52.34.75 with HTTP; Thu, 24 May 2012 00:49:20 -0700 (PDT)
   Date: Thu, 24 May 2012 15:49:20 +0800
   Message-ID: <CAE1Fe-r4Lid+YSgFTQdpsniE_wzeGjETWLLJJxat+HK94u1=AQ@mail.gmail.com>
   Subject: 60136379500
   From: my email <my email@gmail.com>
   To: your email <your email@gmail.com>
   Content-Type: multipart/alternative; boundary=20cf307f380654240604c0c37d07

   --20cf307f380654240604c0c37d07
   Content-Type: text/plain; charset=ISO-8859-1

   hi
   there
   how
   are
   you

   --20cf307f380654240604c0c37d07
   +96szV6aBDlD/F7vuiK8fUYVknMQPfPmPNikB+fdYLvbwsv9duz6HQaDuwhGn6dh9w2U
   1sABcykpdyfWqWhLt5RzCqppYr5I4yCmB1CNOKwhlzI/w8Sx1QTzGT32G/ERTlbr91BM VmNQ== 
```

我设法获得了输出，但如果发件人发送的行数少于 3 行，则它不起作用，因为输出也会打印出电子邮件的页脚（因为它在 head -10 的范围之间）。

我只希望在 procmail 中过滤电子邮件正文（在文本文件中打印）。有可能吗？谁能给我指路？我束手无策。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:56:19.117

试图将 MIME 多部分视为只是一个文本块是充满危险的。为了正确处理正文，您应该使用 MIME 感知工具。但是，如果您只想假设第一部分是文本部分并删除所有其他部分，您可以创建一些相当简单和健壮的东西。

```
# Truncate everything after first body part:
# Change second occurrence of --$MATCH to --$MATCH--
# and trim anything after it
:0fb
* ^Content-type: multipart/[a-z]+; boundary="\/[^"]+
| sed -e "1,/^--$MATCH$/b" -e "/^--$MATCH$/!b" -e 's//&--/' -eq 
```

对于优雅点，您也许可以开发脚本来同时实现您的 10 行正文截断操作，但至少，这应该可以帮助您入门。（此时我会切换到`awk`Perl。）

```
:0fb
* ^Content-type: multipart/[a-z]+; boundary="\/[^"]+
| awk -v "b=--$MATCH" ' \
    ($0 == b || $0 == b "--") && seen++ { printf "%s--\n", $0; exit } \
    !seen || p++ < 10' 
```

正确地，MIME 部分的标题不应计入行数。

这有点投机；我假设“页脚”是指在第一个正文部分之后的丑陋的 base64 编码附件，当然，这个秘诀对于单部分消息根本没有任何作用。也许你想回到你原来的食谱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T19:12:05.180

最近有一个类似的问题并用这个解决了它（适应于OP）......

```
#trying to take out input from the body
:0fb
| sed -n '/^Content-Type/,/^--/ { /^Content-Type/b; /^--/b; p }' 
```

解释：一般形式......

```
sed -n '/begin/,/end/ { /begin/b; /end/b; p }'

-n:         --> turn printing off
/begin/     --> begin of pattern range (remainder commands only apply inside range)
,/end/      --> , end of sed pattern range
{ /begin/b; --> /b branch causes lines with pattern /begin/ to skip remaining commands
/end/b;     --> (same as above), these lines will skip the upcoming (p)rint command
p }'        --> prints lines that in pattern that made it to this command 
```

# mysql - 如何在innoDB MySQL数据库中合并2条记录

> ID：10734414
> 
> 赞同：0
> 
> 时间：2012-05-24T09:10:46.490
> 
> 标签：mysql, database, innodb

这与[如何在mysql中更改ID有关](https://stackoverflow.com/questions/10717444/how-to-change-id-in-mysql/10718335#comment13919873_10718335)

我还检查了其他问题，没有一个与这个问题非常相似。

众所周知，innodb 有一个特性。例如，如果我想更改记录的 id，那么指向前一个 ID 的所有其他表都会神奇地更新。

如果我想合并 2 条记录怎么办？

假设我有 2 家企业。

他们有 2 个 ID。

我想将它们合并为一个。我还想使用 innodb 很棒的功能来自动更改内容。

我不能只将其中一个 ID 更改为另一个 ID。或者我可以吗？

您将如何合并数据库中的 2 条相似记录？

当然，实际进入合并记录的将是业务决策。

基本上我只是不想一一指出所有其他表格。我认为更新规则是有原因的。有没有办法让我将slaveID更改为masterID，保持master中的所有数据相同，然后让数据库本身（而不是我的程序）重新指向所有指向slaveID的表指向masterID？当然，slaveID 的记录无论如何都会消失。

例如，使用普通的mysql引擎，您可以更改ID，然后您必须遍历所有指向旧ID的表才能指向新ID。使用 innodb，重新指向是由数据库引擎本身完成的。这有点酷。无论如何，为什么有人会使用非innodb引擎。

我想做同样的事情，但要合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:24:26.043

尝试将记录主键设置为已经存在的值只会导致键冲突错误。虽然这乍一看很简单，但它有一个副作用：你不能`ON UPDATE CASCADE`用来合并两条记录——它根本不起作用。

如果您有可能更改架构，则可以使用旧的但很好的重定向技巧：

（假设您的 ID 是正数，可能是无符号整数）

*   添加字段`redirect int not null default 0`
*   创建视图：

.

```
CREATE VIEW tablename_view 
SELECT 
  -- repeat next line for every field apart from redirect
  IF(s.redirect>0,m.<fieldname>,s.<fieldname>
FROM tablename AS s
LEFT JOIN tablename AS m ON s.redirect=m.id 
```

*   当您将一条记录（从属）合并到另一条记录（主）中时`UPDATE tablename SET redirect=<id_of_master> WHERE id=<id_of_slave>`
*   调整您的选择查询以选择`tablename_view`而不是`tablename`
*   创建并使用维护脚本清除合并从属服务器

# jquery - JQuery 点击事件不针对 div 孩子

> ID：10734419
> 
> 赞同：1
> 
> 时间：2012-05-24T09:11:08.720
> 
> 标签：jquery

我有一个看起来很简单的问题，但我似乎找不到解决方案。我基本上有一个触发点击事件的 div。我的html是：

```
 <li class="infobox">
      <a href="#"><img class="thumb" src="img/2.jpg" alt="image02" /></a>
      <div class="over">
        <img src="img/search_icon.png" alt="read more" />
         <h6>New business</h6>
         <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
       </div>
   </li> 
```

我的jQuery代码是：

```
$('#news_gallery li .over').click(function(event) {
   // I have animation code here
}); 
```

问题是这样的：该函数工作正常，除了点击事件对 img 或 div '.over' 内的任何文本不起作用。为什么子元素没有传递给点击事件？我需要将特殊参数传递给函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:55:17.047

我怀疑 div 内容是动态的。设置事件后加载内容时，新插入的元素没有任何关联事件。一个快速的解决方法是使用“live”而不是“click”

```
$('#news_gallery li .over').live('click',function(event) {
   // I have animation code here
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T09:27:31.110

您可以尝试以下操作：

```
<li class="infobox">
      <a href="#"><img class="thumb" src="img/2.jpg" alt="image02" /></a>
      <div class="over">
        <img src="img/search_icon.png" alt="read more" />
         <h6>New business</h6>
         <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
       </div
</li> 
```

和js：

```
$('.infobox .over').click(function(e) {
  console.log(e);
}); 
```

# asp.net - 列表视图中的sql查询

> ID：10734420
> 
> 赞同：1
> 
> 时间：2012-05-24T09:11:09.220
> 
> 标签：asp.net, sql-server-2008

您好我想执行这两个查询并在列表视图中同时显示结果。如何在一个选择命令中执行此查询：

我的 sql 查询：

```
Shareholder details:
   Select inlt_parentcompanyid,inlt_effectinterest,inlt_sharetype,inlt_shares from InterestLogTable where inlt_childcompid=5
    Subsidiary details:
    select inlt_childcompid,inlt_effectinterest,inlt_sharetype,inlt_shares from InterestLogTable where inlt_parentcompanyid =5 
```

我的 asp.net 列表视图：

```
Shareholder details:
                    <td><%#Eval("owner_parentCompanyId")%>&nbsp;</td> 
                    <td><%#Eval("owner_sharetype")%>&nbsp;</td>
                    <td><%#Eval("owner_effectinterest")%>&nbsp;</td>   
                    <td><%#Eval("owner_deemedinterest")%>&nbsp;</td>                 
                    <td><%#Eval("owner_shares")%>&nbsp;</td> 

Sunsidiary details:
                    <td><%#Eval("owner_childCompanyId")%>&nbsp;</td> 
                    <td><%#Eval("owner_sharetype")%>&nbsp;</td>
                    <td><%#Eval("owner_effectinterest")%>&nbsp;</td>   
                    <td><%#Eval("owner_deemedinterest")%>&nbsp;</td>                 
                    <td><%#Eval("owner_shares")%>&nbsp;</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:20:09.253

要在同一个列表视图中使用它，您的查询应该返回一个包含两个表中的列的单一结果集。为此，您必须进行内部连接。像这样

```
 Select inlt_parentcompanyid,inlt_effectinterest,inlt_sharetype,inlt_shares,inlt_childcompid,inlt_effectinterest,inlt_sharetype,inlt_shares from InterestLogTable INNER JOIN InterestLogTable ON InterestLogTable.intl_parentcompanyid=InterestLogTable.inlt_parentcompanyid where 
```

InterestLogTable.intl_parentcompanyid=5

当然，您需要使用 tableName.coulumnName 来处理两个表中相同的列名

# .htaccess - 在php中使用重定向重写规则

> ID：10734434
> 
> 赞同：0
> 
> 时间：2012-05-24T09:11:42.150
> 
> 标签：.htaccess, redirect

我似乎对 .htaccess rewriterule 有问题。

我想要做的是这种形式的调度员：

```
[website]/[parameter1-text]/[parameter2-text] 
```

我的 .htaccess 中有以下内容：

```
RewriteRule ^(.*)/(.*)$ dispatcher.php?s1=$1&s2=$2 
```

到现在为止还挺好。但是 s1 和 s2 是一些需要在数据库（mysql）中匹配的变量，并以以下格式返回为脚本 view.php 提供的真实变量：

```
view.php?category=[s1]&subcategory=[s2]&objects=5 
```

如何使用 header("Location: /view.php[...]"); 正确重定向它 并保持 url 不变（例如：[http://example.com/CARS/BLUE](http://example.com/CARS/BLUE) http://example.com/SLIPPERS/RED/ ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:24:39.760

首先修复您的 .htaccess 的一些小问题：

```
RewriteRule ^([^/]+)/([^/]*)/?$ dispatcher.php?s1=$1&s2=$2 [L,QSA] 
```

现在在里面做你的 Mysql 东西并从数据库中`dispatcher.php`获取值。完成并希望在内部将您的请求转发到：拥有这种类型的 PHP 代码：`s1``s2``view.php?category=[s1]&subcategory=[s2]&objects=5`

```
$_GET['category'] = $value-of-s1-from-DB;
$_REQUEST['category'] = $_GET['category'];
$_GET['subcategory'] = $value-of-s2-from-DB;
$_REQUEST['subcategory'] = $_GET['subcategory'];
$_GET['objects'] = '5';
$_REQUEST['objects'] = $_GET['objects'];
// now include view.php
// all your parameters are available in view.php in $_GET array
require_once("view.php"); 
```

# c - 就内存空间而言，使用 malloc 和直接初始化到堆栈之间的区别

> ID：10734439
> 
> 赞同：0
> 
> 时间：2012-05-24T09:11:51.590
> 
> 标签：c, memory, struct

我一直在阅读“Learn C the Hard Way”，遇到了一个有趣的问题，希望有人能详细解释一下。基本练习是使用包含示例 Person 结构的结构。在第一种情况下，我有一个构造函数式的方法（如果有人不介意在侧面解释的话，我不完全明白为什么教程会这样做：D）以及这样的结构：

```
struct Person {
  char *name;
  int age;
  int height;
  int weight; 
};

struct Person *Person_create(char *name, int age, int height, int weight) 
{
  struct Person *who = malloc(sizeof(struct Person)); 
  assert(who != NULL);

  who->name = strdup(name);
  who->age = age; 
  who->height = height;
  who->weight = weight;
} 
```

与其余代码一起，它运行得很好，但是当我打印指向这些结构的指针的内存位置时，例如：

```
int main(int argc, char* argv[]) {
     struct Person *joe = Person_create("joe alex", 12, 80, 100);
     struct Person *joe = Person_create("frank blank", 20, 72, 140);
} 
```

它们的内存值之差总是正好 40。相比之下，struct 构造函数的实现如下：

```
 struct Person{//is the same as above};

 struct Person Person_create (char* name, int age, int height, int weight) {
  struct Person newPerson;
  newPerson.name = name; //and so on

  return newPerson
 } 
```

当我打印出 joe 和 frank 的内存位置时，使用与上述相同的值进行初始化，通过上述实现，它们的内存位置差异似乎总是 20。

我研究了一些汇编，我知道编译器会根据结构的数据类型分配内存块，所以我在想.. 在任何一种实现中，char 数组都有很多字符，所以 n 个字符 * 1 = char 空间，然后我有 3 个整数，所以 3*4 = 12; 12 + 9 (Joe Alex\0 对吗？) = 21.. 我可能弄错了 \0 所以它等于 20 或其他东西，但不管我的结构的具体内存大小如何，我更感兴趣的是为什么这两个不同的实现会导致不同的内存大小（据我了解，双倍的内存成本是相当可观的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:33:01.197

在第一种情况下，进行了 4 次动态分配：两个名称字符串带有`strdup`，以及 2 个 Person 结构带有`malloc`。结构地址之间的差异大致告诉您分配了多少内存，包括第一个结构和第二个结构之前[*]

在第二种情况下，没有进行动态分配，但我想您已经在`Person`堆栈上创建了两个对象：

```
struct Person joe = Person_create("joe alex", 12, 80, 100);
struct Person frank = Person_create("frank blank", 20, 72, 140); 
```

它们的地址之间的差异大致告诉您第一个占用多少内存[*]。

由于您没有复制字符串，因此您几乎需要使用字符串文字作为名称，或者将其内存与`Person`结构分开管理。字符串数据*不是*`struct Person`- 永远不会的一部分。`newPerson.name = name`只存储*指针*，而不是字符串数据。

一旦您开始从文件或终端读取名称，这就会变得很麻烦：无论如何您都必须动态分配它们，因此您不会节省任何内存，但您必须编写更多代码。该练习可能包括一个名为名称的`Person_Destroy`函数`free`，以便用户`struct Person`不必单独担心。

[*] 除了实现不需要一个接一个地分配这些东西，所以你的方法通常不起作用。它恰好在这种情况下给出的结果与分配按您制作它们的顺序放置的理论一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:41:47.680

这两种方法在需要使用的方式上差别很大：

定义：
`struct Person *Person_create(char *name, int age, int height, int weight)`
使用：
`struct Person *p = Person_create(...);`
函数`Person_create`分配结构。该结构的位置取决于函数的实现。调用者只需要定义一个指向这个内存的指针，而不是一个完整的人结构。

定义：
`struct Person Person_create (char* name, int age, int height, int weight)`
使用：
`struct Person p = Person_create(...);`
在这里，调用者分配了一个完整的人结构，而不仅仅是一个指针。当函数被调用时，它返回的数据将被复制到调用者的 person 结构中。所以结构的位置取决于调用者。

# mysql - MySQL - 如何在 Windows 上运行命令？

> ID：10734441
> 
> 赞同：0
> 
> 时间：2012-05-24T09:12:07.040
> 
> 标签：mysql, windows

我有一台运行 PHP/MySQL/Apache 的 Win7 机器，我安装了 MySQL 管理员、MySQL 管理器以及其他一些工具，如 Toad MySQL 6.0...

我一直在为我遇到的一些 utf-8 问题寻找解决方案，并且大多数解决方案（即[这个](https://stackoverflow.com/questions/2840028/how-is-this-website-fixing-the-encoding)）说要运行一组命令，例如 mysqldump 等...但是我如何在一个窗户机？我尝试将其作为 SQL 脚本执行，从 Windows Run 命令运行，例如

```
"C:\Program Files\MySQL\MySQL Server 5.1\bin\" mysqldump MY_DB -uroot --opt --quote-names --skip-set-charset --default-character-set=latin1 >c:\MY_DB_latin1.sql 
```

但没有运气。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:16:30.517

问题是 和 之间的`"C:\Program Files\MySQL\MySQL Server 5.1\bin\"`空间`mysqldump`。这应该读`"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump"`。

添加 .exe 是可选的：`"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump.exe"`.

如果你想执行 MySQL 命令而不是转储数据库，你应该使用`mysql.exe`: `"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql.exe"`。使用该`-?`选项可以概览命令行选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:14:55.083

您在 mysqldump 之前有一个空格，这不是必需的。

它也应该是 mysqldump.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:23:10.120

Win+R -> cmd -> OK
是一个 Windows 命令行。

您可以在此处键入（假设 C:\Program Files\MySQL\MySQL Server 5.1 是 MySQL 目录的正确路径，MY_DB 是您的数据库名称）：“C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump .exe" MY_DB -uroot --opt --quote-names --skip-set-charset --default-character-set=latin1 >c:\MY_DB_latin1.sql

在这里，您将能够看到输出（很可能您需要 -uroot -p，因为您的 root 帐户受密码保护，不是吗？）。如果您想粘贴命令，请右键单击并选择“粘贴” - Ctrl-V 在这里不起作用。

# jquery-ui - 使用 jQueryUI 日期选择器 setDate 方法进行本地化

> ID：10734445
> 
> 赞同：0
> 
> 时间：2012-05-24T09:12:24.153
> 
> 标签：jquery-ui, localization, datepicker, jquery-ui-datepicker

我正在为 jQueryUI datepicker 插件使用挪威语言环境。这很有效，但是当使用 setDate 方法时，它似乎并不关心本地化：

```
var now = new Date();
$('#date').datepicker('setDate', now); 
```

`24 May, 2012`当它实际上应该返回时返回`24 mai, 2012`。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:28:24.453

```
<script type="text/javascript" src="/scripts/jquery.datepick-no.js"></script> 
```

不要忘记您可以设置默认值：例如：

```
$.datepicker.setDefaults(
  $.extend(
    {'dateFormat':'dd-mm-yy'},
    $.datepicker.regional['no']
  )
); 
```

这里概述了挪威语的一些特殊问题：

[http://bugs.jqueryui.com/ticket/7437](http://bugs.jqueryui.com/ticket/7437)

顺便说一句，Keith Wood 在 jQuery-Ui datepicker 上的页面非常棒。 [http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

指定日期选择器上所有内容的示例：

（以GBenglish 为例）

```
<script type="text/javascript">
    jQuery(function ($) {
        $.datepicker.regional['en-GB'] = {
            closeText: 'Done',
            prevText: 'Prev',
            nextText: 'Next',
            currentText: 'Today',
            monthNames: ['January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'],
            monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
            dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
            dayNamesMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
            weekHeader: 'Wk',
            dateFormat: 'dd/mm/yy',
            firstDay: 1,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: ''
        };
        $.datepicker.setDefaults($.datepicker.regional['en-GB']);
    });
</script> 
```

确保将其放置在`<head>`.

# android - android中的SQLite数据库连接

> ID：10734448
> 
> 赞同：-2
> 
> 时间：2012-05-24T09:12:28.897
> 
> 标签：android, android-layout, sqlite

我在 SQLite 中有一个 s3db 数据库。现在我想在应用程序中附加或打开它？请告诉我需要编写什么代码才能连接到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:18:54.960

I don't know exactly what you want but if you want to get data from your database you can do it like this:

```
this.database = new ContactsDatabase(this, Contacts.DB_NAME, null, Contacts.startVersion).getWritableDatabase();
        this.cursor = this.database.rawQuery("SELECT _id, name, email, phone FROM contacts ORDER BY name ASC", null); 
```

Check official guides.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:30:10.950

我会给你一个例子，你可以很容易地理解我们如何在文本视图上显示数据库中的数据。下面是其中 testdata 是具有用户表的数据库的名称的代码，其中存在 2 列。我在 2 diff 上显示这 2 列的数据。文本视图。

```
public class high_score extends Activity{
SQLiteDatabase mydatabase=null;
String Data="";
String Data1="";
String TableName="users";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.high_score);

        RelativeLayout main=(RelativeLayout)findViewById(R.id.main);

        try
        {
            mydatabase=this.openOrCreateDatabase("testdata", MODE_PRIVATE, null);

            Cursor c=mydatabase.rawQuery("SELECT DISTINCT name,score FROM "+TableName+" , null);
            int column1=c.getColumnIndex("name");
            int column2=c.getColumnIndex("max_score");
            c.moveToFirst();
            if(c!=null)
            {   
                do
                {
                    String Name=c.getString(column1);
                    int Score=c.getInt(column2);
                    Data=Data+Name+"\n";
                    Data1=Data1+Score+"\n";
                    System.out.println("name"+Name+" score"+Score);
                }while(c.moveToNext());
                TextView tv=(TextView)findViewById(R.id.tv);
                TextView points=(TextView)findViewById(R.id.points);
                tv.setText(Data);
                points.setText(Data1);
                setContentView(main);

                }

             /*TextView tv=(TextView)findViewById(R.id.tv);
            tv.setText(Data);
            setContentView(tv);*/

        }catch(Exception ex)
        {
            Log.e("ERROR","ERROR" ,ex);
        }
        finally
        {
            if(mydatabase!=null)
                mydatabase.close();
        } 
```

您可以像这样轻松访问数据

# android - 如何区分来自 Cordova/PhoneGap 或其他（智能手机中的标准浏览器）的访问

> ID：10734449
> 
> 赞同：1
> 
> 时间：2012-05-24T09:12:30.537
> 
> 标签：android, cordova

我想在 Web 服务器中区分来自 Cordova/PhoneGap 或其他人的访问。

我试图查看从 Cordova 应用程序发送的 HTTP_USER_AGENT。但是标准浏览器（webView）并没有什么特别的地方。

这是 Cordova 应用程序发送到服务器的内容：

`Mozilla/5.0 (Linux; U; Android 4.0.2; ja-jp; Galaxy Nexus Build/ICL53F) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`

你知道如何以更简单的方式区分这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:32:50.487

PhoneGap 使用[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)其核心。因此，来自 PhoneGap 应用程序的所有 HTTP 请求都将通过`WebView`. 这就解释了为什么您在 User-Agent 字符串中看不到任何差异。

如果是您自己的应用程序，您可以

*   [`loadUrl (String url, Map<String, String> additionalHttpHeaders)`](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String,%20java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)使用该方法修改 PhoneGap 源以包含其他标头
*   或者，正如上面评论中所建议的@codemonkey，在您的所有请求中包含一个字符串参数。

# python - 检查单词是否在字符串中错误

> ID：10734453
> 
> 赞同：-1
> 
> 时间：2012-05-24T09:12:41.317
> 
> 标签：python

使用[Python 中的以下内容 - 检查 Word 是否在字符串中](https://stackoverflow.com/questions/5319922/python-check-if-word-is-in-a-string)

```
>>> def findWholeWord(w):
...     return re.compile(r'\b({0})\b'.format(w), flags=re.IGNORECASE).search
... 
>>> findWholeWord('seek')('those who seek shall find')  
<_sre.SRE_Match object at 0x22c1828>
>>> findWholeWord('seek') 
<built-in method search of _sre.SRE_Pattern object at 0x22b8190>
>>> findWholeWord('seek')('those who seek shall find')  
<_sre.SRE_Match object at 0x22c1828>
>>> findWholeWord('seek')('those who shall find') 
```

这是一个错误还是应该是结果？

```
<_sre.SRE_Match object at 0x22c1828> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:32:18.803

这是一段有趣的代码，但在 python 中，在字符串中查找单词实际上要简单得多。你甚至不需要一个函数：

```
 if some_word in some_str.split():
      .... 
```

要仅查找子字符串而不是整个单词，请省略以下`split`部分：

```
print 'word' in 'funny swordfish'.split()  # False
print 'word' in 'funny swordfish'          # True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:17:12.040

该匹配对象是结果，从中您可以访问更多功能，例如

```
['__class__', '__copy__', '__deepcopy__', '__delattr__', '__doc__', '__format__'
, '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__'
, '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__','end', 'endpos'
, 'expand', 'group', 'groupdict', 'groups', 'lastgroup', 'lastindex', 'pos', 're'
, 'regs', 'span', 'start', 'string'] 
```

因此，在返回的对象上，您可以例如`.span()`获取要查找的单词的开始和结束索引。

# java - Java：在 JUnit 断言中使用记录器*

> ID：10734456
> 
> 赞同：7
> 
> 时间：2012-05-24T09:12:54.490
> 
> 标签：java, logging, junit, assert

我想做的是在 JUnit 中如下所示：

```
assertTrue(logger.error("the condition is not true"), <a boolean condition>); 
```

因此错误消息被记录器记录下来，其中记录器可以是例如 commons 或 log4j。

但是 Junit 断言不采用记录器参数，所以有什么方法可以实现这一点，还是我需要尝试捕获断言并将错误消息记录在 catch 块中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T10:21:36.087

您可以使用 JUnit [TestRule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestRule.html) [TestWatcher](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestWatcher.html)。A`TestRule`在测试方法之前和之后执行代码（类似于`@Before`and `@After`），但您可以访问更多信息，更重要的是，测试结果。TestWatcher定义了、和[等](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestWatcher.html)`succeeded()`方法，您可以实现这些方法来获取事件通知。`failed()``starting()``finished()`

下面的示例简单地打印出带有失败断言的失败测试。

```
public class TestWatcherTest {
  @Rule
  public TestWatcher testWatcher = new TestWatcher() {
    protected void failed(Throwable e, Description description) {
      System.out.println("" + description.getDisplayName() + " failed " + e.getMessage());
      super.failed(e, description);
    }

  };

  @Test
  public void test1() {
    Assert.assertEquals("hello world", 3, 4);
  }
} 
```

您显然可以做您喜欢的事情，而不是 System.out.println()。这产生作为输出：

```
test1(uk.co.farwell.junit.TestWatcherTest) failed hello world expected:<3> but was:<4> 
```

请注意，失败的断言是一个异常，因此您可以访问堆栈跟踪等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:17:24.427

我不会更改或扩展 JUnit 类。

您尝试/捕获并记录错误的安排会更可取。

问题是断言失败不一定是例外。

感觉就像您正在尝试使 log4j 成为已经存在的报告功能。我建议您查看 Ant JUnit 报告任务 - 它会为您提供一个比日志更有用的漂亮报告。

更新：

您始终可以添加另一个 log4j 文件附加程序。让 log4j 将消息写入控制台和您选择的文件。如果我是正确的，你的代码根本没有变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:22:44.717

那最好用这个

```
if(!<condition>) {
logger.error("my message");
Assert.fail();
} 
```

# image - 如何从jsp访问图像？

> ID：10734458
> 
> 赞同：0
> 
> 时间：2012-05-24T09:13:13.570
> 
> 标签：image, spring

我正在使用 Spring MVC 3.0。

我必须加载与目录平行的文件夹“images”中存在的图像`WEB-INF`。

我在`WEB-INF/jsp`文件夹中有jsp文件。

文件夹结构为：

```
-app
--images
--WEB-INF
---jsp
---classes
... 
```

在 web.xml 中，url 映射`DispatcherServlet`类似于

```
<servlet-mapping>
    <servlet-name>test</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

现在在 JSP 中，如果我按以下方式加载 jsp：

```
<img src="<%=request.getContextPath()%>/images/calogo.jpg" /> 
```

我猜它现在正在`DispatcherServlet`拦截它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:10:15.953

是的你是对的。您的调度员正在拦截您显示图像的请求。

据我说，当您尝试访问 jsp 文件中的图像时，它会给您 404 错误。

您需要在 servlet.xml 文件中包含以下代码行。

```
<mvc:resources location="/images/" mapping="/images/**" /> 
```

然后一切都会奏效。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:27:02.143

如果您映射`/`到`DispatcherServlet`，请确保在 Spring 的配置中启用*默认 servlet 处理程序：*

```
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping" />

<!-- add this to make Spring properly handle resources (e.g., images) -->
<mvc:default-servlet-handler /> 
```

另外，不要使用`<%...`语法使用 JSTL：

```
<img src="<c:url value="/images/calogo.jpg" />" /> 
```

（或者更好 - 根本不使用 JSP，使用例如[ThymeLeaf](http://www.thymeleaf.org/)）

# android - Android：无法获得准确的经纬度值

> ID：10734464
> 
> 赞同：1
> 
> 时间：2012-05-24T09:13:26.290
> 
> 标签：android, geolocation, gps, latitude-longitude, gprs

在我的应用程序中，我想要 GPS 和/或网络的纬度和经度值。我的代码可以工作，但有时它给出了准确的值，有时它没有给出准确的值，有时它给出的值距离准确位置 10 或 20 米。代码：

```
mlocListener = new MyLocationListener(getApplicationContext());
    /* Use the LocationManager class to obtain GPS locations */
    LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    if (mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                10000, 0, mlocListener);
    } else if (mlocManager
            .isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        mlocManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 10000, 0, mlocListener);
    }

    Location gpsLocation = mlocManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    Location netLocation = mlocManager
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    if (gpsLocation != null) {
        mlocListener.latitude = gpsLocation.getLatitude();
        mlocListener.longitude = gpsLocation.getLongitude();

        double lat = (double) (gpsLocation.getLatitude());
        double lng = (double) (gpsLocation.getLongitude());

        Toast.makeText(this, "Location attributes using GPS Provider",
                Toast.LENGTH_LONG).show();

    } else if (netLocation != null) {
        mlocListener.latitude = netLocation.getLatitude();
        mlocListener.longitude = netLocation.getLongitude();

        double lat = (double) (netLocation.getLatitude());
        double lng = (double) (netLocation.getLongitude());

        Toast.makeText(this, "Location attributes using NETWORK Provider",
                Toast.LENGTH_SHORT).show();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:43:04.390

使用 loc.getAccuracy() 方法检查您收到的位置的准确性级别。如果该值小于 10（或小于该值），那么您可以考虑它，否则等待位置 Lister 获取另一个位置。

getLastKnownLocation 是您最后一个已知位置，不要仅使用 getAccuracy 也检查时间。

如果您只需要准确的位置，最好不要使用 getLastKnownLocation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:27:56.957

通常 GPS 可以精确到 3m，但如果它是 10 到 20 米，则 GPS 可以做到这一点。

> 用于民用的标准 GPS 接收器可提供低至几米的精度。实际上，接收到的卫星的数量和几何形状对精度有很大影响，在日常使用中，预计**精度约为 20 m 。**

[GPS 精度](http://www.kowoma.de/en/gps/accuracy.htm)

此外，如果您从网络提供商处获取当前位置，则可能会出现更不准确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T13:26:35.747

如果您希望获得最大的准确性，我会说您解雇网络提供商，因为它受到与电话运营商等相关的其他因素的影响。

```
locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER) 
```

这可以使用您的手机内部 GPS 接收器获取您的位置（时间成本高），但它可以为您提供最大可能的准确性。

# tsql - 在sql存储过程中传递表名

> ID：10734465
> 
> 赞同：5
> 
> 时间：2012-05-24T09:13:28.657
> 
> 标签：tsql, stored-procedures

是否可以将表名作为输入参数传递给存储过程？

例如：

```
create procedure test
@tablename char(10)
as
begin
select * from @tablename
end
go 
```

我知道这行不通。那么如果我想将表名传递到存储过程中，最好的方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T09:20:01.833

The safest way to do this is via a view.

Create a view which unions all the tables you may wish to access (and which must all have the same column structure), and prefix the rows with the table name.

```
CREATE VIEW MultiTable
AS
    SELECT 'table1' AS TableName, * FROM table1
    UNION ALL
    SELECT 'table2' AS TableName, * FROM table2
    UNION ALL
    SELECT 'table3' AS TableName, * FROM table3 
```

Your stored procedure can now filter on the table name:

```
CREATE PROCEDURE test
    @TableName varchar(100)
AS
    SELECT * FROM MultiTable WHERE TableName = @TableName 
```

This is safer than using dynamic SQL creation and execution.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:21:02.117

您将需要使用动态 SQL，但您需要注意潜在的 sql 注入风险，就像 @tablename 包含一些狡猾的东西一样，您可能会陷入痛苦的世界。

例如

```
-- basic check to see if a table with this name exists
IF NOT EXISTS(SELECT * FROM sys.tables WHERE name = @tablename)
    RETURN

DECLARE @sql NVARCHAR(100)
SET @sql = 'SELECT * FROM ' + QUOTENAME(@tablename)
EXECUTE(@sql) 
```

你需要非常小心这种方法，确保你没有打开一罐安全蠕虫。

我的另一个担忧是您可能正在尝试制作通用数据访问存储过程，这通常是一个坏主意。显然我不知道你的用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:26:35.053

```
DECLARE @Name VARCHAR(50)
SET @Name='Company'

EXEC('SELECT * from ' + @Name ) 
```

使用这种方式从数据库中获取记录。

# javascript - JavaScript：浏览器选项卡失去用户焦点时发生错误

> ID：10734471
> 
> 赞同：0
> 
> 时间：2012-05-24T09:13:48.490
> 
> 标签：javascript, jquery

我已经修改[了这个 jQuery 插件](http://www.mitya.co.uk/scripts/Table-sort---now-REGEXP-friendly-111)来制作一个每秒更新一次动画的表格。我的代码中有一个错误，每次窗口失去焦点时都会发生 JavaScript 错误。（错误是动画的某个瞬态 DOM 元素不在页面中，而实际上它应该在那里。）

我有一种强烈的感觉，这是由于出于性能原因，浏览器在没有焦点的选项卡上减慢`setTimeout`s （在我的情况下，可能是 inside ）的方式。`jQuery.animate()`

当包含它的窗口失去焦点时，如何避免我的 JavaScript 崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:17:30.143

在执行由计时器触发的代码之前，您必须检查之前的执行是否完成。

# javascript - .load() 带有外部网页的动画？

> ID：10734472
> 
> 赞同：0
> 
> 时间：2012-05-24T09:13:49.287
> 
> 标签：javascript, jquery, html, css

这基本上是我想要做的：

我想用我的内容滑动（）一个 div。我想 .load() 那个 div 和 .slideDown() 那个 div 中的外部网页（在同一台服务器上）。

现在这是我所拥有的：

```
$(document).ready(function() {  
   $('a').click(function(){  
   $('.content').slideUp('1000');
   $('.content').hide().load('about.html');
   $(".content").slideDown('1000');
   });  
}); 
```

基本上这就是我得到的：div`.content`隐藏自己，加载`about.html`页面，然后出现。但没有slideUps 或slideDowns。

有人有想法吗？

抱歉，如果这是一个菜鸟问题，这是我第一次尝试 js/jquery。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:22:50.173

那是因为这些是异步操作。您必须在回调中继续执行：

```
$('a').click(function(){  
   $('.content').slideUp('1000', function() {
     this.hide().load('about.html', function() {
       this.slideDown('1000');
     });
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:32:19.367

尝试这个

```
$(document).ready(function() {  
   $('a').click(function(){  
   $('.content').slideUp(1000);
   $('.content').hide().load('index2.html');
   $(".content").slideDown(1000);
   });  
}); 
```

干杯:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:32:12.000

您将字符串 '1000' 传递给 slideUp 或 slideDown。它应该是数字或字符串，它可以像“慢”一样......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:23:14.067

尝试：

```
$('a').click(function(){  
   var el = $('.content'),                      //cache content to avoid multiple calls
       slidetime = 1000;                        
   el.slideUp(slidetime,function(){             //slide up
       el.hide().load('about.html',function(){  //afterwards, load
           el.slideDown(slidetime);             //afterwards, slide
       });
   });
}); 
```

# javascript - 使用 JQuery LI 向 LI 添加类到每 7 个项目

> ID：10734473
> 
> 赞同：3
> 
> 时间：2012-05-24T09:13:50.003
> 
> 标签：javascript, jquery

我正在使用此代码为每 7 个 LI 项目和第一个项目添加一个类：

```
$('ul li:first, ul li:nth-child(7n)').addClass("first"); 
$('ul li:first, ul li:nth-child(1)').addClass("first"); 
```

我的问题是它只是将类添加到第 1 项和第 7 项，但如果我添加另外 7 个或更多，它不会添加它。

我需要每隔 7 li 项目添加一个类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T09:17:00.073

尝试：

```
$('ul li:nth-child(7n+1)').addClass("first"); 
```

这将选择每 7 个元素。

请参阅jsFiddle 上的[演示。](http://jsfiddle.net/R6DVh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:26:24.443

使用 Jquery **eq**

此调用 id 的结果首先为每个项目 7 添加一个类。请注意，提供的索引是从零开始的，并且是指元素在 jQuery 对象中的位置，而不是在 DOM 树中。

```
 $('ul li').eq(6).addClass("first"); 
```

# facebook - 将管理员添加到粉丝专页

> ID：10734474
> 
> 赞同：1
> 
> 时间：2012-05-24T09:13:50.310
> 
> 标签：facebook, facebook-graph-api, admin, access-token

我有一个具有粉丝页面高级权限的应用程序。

我想知道，有没有办法通过任何 API 将管理员添加到粉丝专页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:32:59.083

常规应用程序无法做到这一点，该应用程序必须被列入白名单。

```
{
    "error":
    {
        "message": "(#100) App must be on whitelist",
        "type": "OAuthException",
        "code": 100
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:34:31.007

[Graph api for page](http://developers.facebook.com/docs/reference/api/page/)

only gives the documentation about fetching admins but there's nothing about adding new admins.

But this should work (though, it gives me "app should be on whitelist" error)

POST `admin_id` field with valid facebook id to

`https://graph.facebook.com/<page_id>/admins`,

with a valid page access token (not user access_token)

# c# - MonoDevelop Addin for NaCl 使用“ProjectServiceExtension”

> ID：10734481
> 
> 赞同：2
> 
> 时间：2012-05-24T09:14:11.463
> 
> 标签：c#, mono, monodevelop, google-nativeclient

大家好，我正在尝试制作一个 MonoDevelop 插件，我可以用它来为 NaCl 项目编译 Mono……但我收到了一个 null ref 错误，并且找不到足够的信息来找出问题所在。

当我尝试从 MonoDevelop 中的插件创建项目时，会发生空引用。所有资源都设置为构建为“EmbeddedResource”。

**生成器.cs：**

```
using System;
using MonoDevelop.Projects;
using MonoDevelop.Core;

namespace MonoDevelop.MonoNaCl
{
    public class Builder : ProjectServiceExtension
    {
        protected override BuildResult Build (IProgressMonitor monitor, SolutionEntityItem item, ConfigurationSelector configuration)
        {
            Console.WriteLine("Yahoo Build");
            return base.Build (monitor, item, configuration);
        }

        protected override void Execute (IProgressMonitor monitor, SolutionEntityItem item, ExecutionContext context, ConfigurationSelector configuration)
        {
            Console.WriteLine("Yahoo Execute");
            base.Execute (monitor, item, context, configuration);
        }
    }
} 
```

**MonoDevelop.MonoNaCl.addin.xml：** 注意：我真的不清楚我应该使用的“扩展”，并认为问题就在那里。

```
<Addin namespace   = "MonoDevelop"
       id          = "MonoNaCl"
       name        = "Mono for NaCl"
       author      = "Andrew Witte"
       copyright   = "BSD"
       url         = "http://www.URL.com"
       description = "Support for developing MonoNaCl applications."
       category    = "NaCl Development"
       version     = "1.0">

    <Dependencies>
        <Addin id="Ide" version="3.0" />
        <Addin id="Core" version="3.0" />
    </Dependencies>

    <Extension path = "/MonoDevelop/Ide/ProjectTemplates">
        <ProjectTemplate id = "MonoNaClProject" resource = "MonoNaCl.xpt.xml"/>
    </Extension>

    <Extension path = "/MonoDevelop/ProjectModel/ProjectServiceExtensions">
        <Class class = "MonoDevelop.MonoNaCl.Builder"/>
    </Extension>

    <!--<Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes">
        <SolutionItem type="MonoDevelop.MonoNaCl.Builder" extension="csproj" guid="{49DFC40D-C27A-4230-A637-8D9669269586}"/>
    </Extension>-->

    <Extension path="/MonoDevelop/ProjectModel/SerializableClasses">
        <DataType class="MonoDevelop.MonoNaCl.Builde" />
    </Extension>
</Addin> 
```

**MonoNaCl.xpt.xml：**

```
<?xml version="1.0"?>
<Template originator = "Andrew Witte">

    <TemplateConfiguration>
        <_Name>MonoNaCl Project</_Name>
        <_Category>C#/MonoNaCl</_Category>
        <LanguageName>C#</LanguageName>
        <_Description>Creates a MonoNaCl project.</_Description>
    </TemplateConfiguration>

    <Combine name = "${ProjectName}" directory = ".">
        <Options>
            <StartupProject>${ProjectName}</StartupProject>
        </Options>

        <Project name = "${ProjectName}" directory = "." type = "MonoNaCl">
            <Options/>
        </Project>
    </Combine>
</Template> 
```

**这是尝试创建项目后的错误：**

```
System.NullReferenceException: Object reference not set to an instance of an object
  at MonoDevelop.Projects.SolutionFolderItemCollection.OnItemAdded (MonoDevelop.Projects.SolutionItem item) [0x0000b] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Projects/SolutionFolderItemCollection.cs:59 
  at MonoDevelop.Projects.ItemCollection`1[MonoDevelop.Projects.SolutionItem].InsertItem (Int32 index, MonoDevelop.Projects.SolutionItem item) [0x00008] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Projects/ItemCollection.cs:39 
  at System.Collections.ObjectModel.Collection`1[MonoDevelop.Projects.SolutionItem].Add (MonoDevelop.Projects.SolutionItem item) [0x00000] in <filename unknown>:0 
  at MonoDevelop.Ide.Templates.SolutionDescriptor.CreateEntry (MonoDevelop.Projects.ProjectCreateInformation projectCreateInformation, System.String defaultLanguage) [0x0026c] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Templates/SolutionDescriptor.cs:162 
  at MonoDevelop.Ide.Templates.ProjectTemplate.CreateWorkspaceItem (MonoDevelop.Projects.ProjectCreateInformation cInfo) [0x00000] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Templates/ProjectTemplate.cs:232 
  at MonoDevelop.Ide.Projects.NewProjectDialog.CreateProject () [0x001ef] in /Users/builder/data/lanes/monodevelop-mac-3.0.1/6642975f/source/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Projects/NewProjectDialog.cs:432 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:44:26.247

删除 Project 元素中的 type="MonoNaCl" 属性定义。您不必设置项目类型，除非您定义自己的项目子类。

# svn - 通过颠覆提交欧元符号

> ID：10734485
> 
> 赞同：0
> 
> 时间：2012-05-24T09:14:18.757
> 
> 标签：svn, encoding, character-encoding, euro

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:16:40.603

I am using NetBeans IDE 7.1.

I would like to follow this up by saying that when I actually committed the code and looked at what code was actually committed the Euro symbol was correctly sent to the SVN server.

# c++ - 当一个类的对象成员需要访问彼此的数据时该怎么办？

> ID：10734488
> 
> 赞同：0
> 
> 时间：2012-05-24T09:14:30.327
> 
> 标签：c++, object, composition

我有一个简单的`Store`类，其中包含一个`Inventory`对象和一个`CashRegister`对象。为了销售商品，CashRegister 对象需要访问 Inventory 对象的方法；即，返回特定项目的价格、存储数量等的那些。让 CashRegister 对象访问 Inventory 对象的方法的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:18:31.903

> CashRegister 对象需要访问 Inventory 对象的方法

为什么？`CashRegister`没有`Inventory`. _ 您可以`CashRegister`在剧院或电影院中拥有 a，而不仅仅是在`Store`. 您所说的这部分逻辑应该是商店的一部分。

```
class Store
{
   CashRegister register;
   Inventory I;
   void sellSomething(Item i)
   {
      //move logic inside the store
      //not in CashRegister
      int price = I.getPrice(i);
      register.addCash(price);
      I.removeItem(i);
   }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:20:11.150

一种解决方案是在对象中存储对该`Inventory`对象`CashRegister`的引用，并在构造对象时给出该引用`Store`。

```
class Inventory { /* ... */ };

class CashRegister
{
public:
    CashRegister(Inventory &inventory)
        : inventory_(inventory)
    { }

    // ....

private:
    Inventory &inventory_;
};

class Store
{
public:
    Store()
        : cashregister_(inventory_)
    { }

    // ....

private:
    Inventory inventory_;
    CashRegister cashregister_;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:19:20.563

```
class Inventory {
  Currency price;
  uint64_t quantity;
  public:
    Currency get_price() { return price; }
    uint64_t get_quantity() { return quantity; }
}; 
```

然后您的收银机可以调用`Inventory`.

但实际上，您应该设置一个功能`Inventory`来保留或交付一定数量的物品（如果有的话）——收银机*不需要*知道有多少物品有库存，它只需要知道当前的需求是否可以满足。就此而言，我不确定是否`Inventory`需要知道物品的价格——如果周三下午有 10% 的折扣，那么仓库的业务是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:34:29.163

赋予对象职责，不要仅仅将它们用于聚集数据。

`Inventory`应该知道如何添加和删除`Item`s 。可能需要进行交易。这个赋值是一个数据库的隐喻。

@Luchian 有正确的想法，但我会更进一步。

您希望`Inventory`（数据库）能够处理`Transaction`s，在这种情况下，它专门用于使用收银机。

应该能够`Item`向.`Inventory`

看看[Tell Don't Ask](http://pragprog.com/articles/tell-dont-ask)和[Write No Getters](http://peripateticaxiom.blogspot.co.uk/2008/06/tdd-mocks-and-design.html)的想法。

# struts2 - 有没有办法声明一个动作结果？

> ID：10734489
> 
> 赞同：0
> 
> 时间：2012-05-24T09:14:36.197
> 
> 标签：struts2

我在我的 struts xml 中的 5 个地方有完全相同的行 -

```
<result name="error" type="json"><param name="root">response</param></result> 
```

有没有办法可以将其声明为某种自定义结果并将其包含在我使用它的 5 个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:19:10.820

You dont have to use it at multiple places instead define this as global result.

```
<global-results>
    <result name="error" type="json">
       <param name="root">response</param>
    </result>
</global-results> 
```

So when your action will return error it will use this result from the global result and use it.

But if you want something like

```
<action name="someaction" class="somepackage.someAction">
   <result name="error" type="json">ReferSomeOhterResult</result>
</action> 
```

this is not possible, you can only chain, redirect to a different action but one result cannot refer to another result.

# python - 系统托盘工具提示中的 PyQt RichText 格式

> ID：10734493
> 
> 赞同：2
> 
> 时间：2012-05-24T09:14:47.687
> 
> 标签：python, user-interface, pyqt, tooltip, richtext

这是简单系统托盘 PyQt 应用程序的代码示例。

```
import sys
from PyQt4 import QtGui

def main():
   app = QtGui.QApplication(sys.argv)

   trayIcon = QtGui.QSystemTrayIcon(QtGui.QIcon('test.png'), app)
   menu = QtGui.QMenu()
   exitAction = menu.addAction("Exit")
   trayIcon.setContextMenu(menu)

   # I'd like to show picture in tooltip, BUT IT'S NOT WORK IN WINDOWS
   trayIcon.setTooltip('<img src="SomePicture.png" width="48" height="48"/>')

   trayIcon.show()
   sys.exit(app.exec_())

if __name__ == '__main__':
   main() 
```

在这段代码中，我想显示带有一些图片和某种文本格式的气球工具提示。为此，我使用 RichText 标记格式。结果是 Ubuntu Linux 系统（Gnome 桌面）一切正常。但是当我尝试在 Windows XP 系统中为工具提示使用 RichText 格式时，没有任何效果。工具提示文本等于源字符串：''。Windows 2.7 和 Linux 2.6 上的 Python 版本，但我认为这个问题不在不同版本中。

如果在 Windows 操作系统中 RichText 不解析，我该如何制作相同类型的 GUI（首选跨平台）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:52:22.337

在 Windows 上 Qt 使用 os 的工具提示系统，它只支持文本。

如果你想要更高级的东西，你可以按照[这里](http://qt-project.org/doc/desktop-systray.html)[`QSystemTrayIcon.showMessage()`](http://qt-project.org/doc/qsystemtrayicon.html#showMessage)的描述使用。您可能必须安装一个事件过滤器或覆盖s方法来获取帮助事件。`QTrayIcon``event`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:57:07.480

如果有人也对创建气球小部件感兴趣。这是我的代码：

```
class SystemTrayIcon(QtGui.QSystemTrayIcon):
    def __init__(self, parent = None): 
        QtGui.QSystemTrayIcon.__init__(self, icon, parent)
        traySignal = "activated(QSystemTrayIcon::ActivationReason)"
        self.connect(self, QtCore.SIGNAL(traySignal), self._activateRoutine)
        self.balloon = balloonWidget(name)

    def _activateRoutine(self, reason):
        if reason == QtGui.QSystemTrayIcon.Trigger:
            self.balloon.show(self.geometry())

class balloonWidget(QtGui.QWidget):
    def __init__(self,name):
        QtGui.QWidget.__init__(self, parent = None, flags = QtCore.Qt.Popup)

        self.name = name

        self.offsetX = 10
        self.offsetY = 10

        self.outInfo = QtGui.QLabel(self)

        self.setStyleSheet("QWidget {border:5px solid rgb(170, 170, 255);}")

    def show(self,coord):
        richText = tr('Any text with Rich Format')
        self.outInfo.setText(richText)
        self.outInfo.show()
        self.adjustSize()

        origin = QtGui.QDesktopWidget().availableGeometry().bottomRight()

        if coord.y() < origin.y()/2:
            moveY = coord.bottomLeft().y() + self.offsetY
        else:
            moveY = coord.topLeft().y() - (self.height() + self.offsetY)

        if coord.x() + self.width() + self.offsetX >= origin.x():
            moveX = origin.x() - (self.width() + self.offsetX)
        else:
            moveX = coord.x()

        self.move(moveX,moveY)
        self.setVisible(True)

    def closeEvent(self, event):
        event.ignore()
        self.hide()

    def mousePressEvent(self, event):
        self.close() 
```

# python - 使用 Python 将数据拉入 S4

> ID：10734494
> 
> 赞同：0
> 
> 时间：2012-05-24T09:14:48.190
> 
> 标签：python

S4 提供的 twittertopiccount 示例是用 Java 编写的。

这里的文档：[http](http://docs.s4.io/cookbook/building_your_application.html) ://docs.s4.io/cookbook/building_your_application.html没有提到使用其他语言。

是否可以用 Python 编写应用程序，从文件中读取数据并将数据发送到 S4？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:29:00.173

您可以使用许多具有 JSON 处理功能的语言。读 [这个](http://docs.s4.io/manual/client_usage.html)

# java - 简单的 2D Java 游戏

> ID：10734496
> 
> 赞同：0
> 
> 时间：2012-05-24T09:15:00.097
> 
> 标签：java, swing, draw, shapes

我正在尝试创建一个 java 游戏，其中球从屏幕顶部随机掉落，我们需要使用位于屏幕底部的捕手来接球。

我很难弄清楚如何将它实际绘制到我的 JFrame 上。

我为我的“接球手”、“球”、“游戏空间”开设了一门课，我想把它们放在一起。

如何在屏幕上绘制我的“捕手”？

目前，我有一个看起来像这样的“游戏”类。

```
public class Game extends JFrame implements KeyListener {

GameScreen gameScreen;
Catcher playerOneCatcher;

public static void main (String[] args) {
    new Game();
}

public Game() {

    super("CATCH");
    setSize(640,480);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
    setLocationRelativeTo(null);
    setResizable(false);
    addKeyListener(this);

    this.gameScreen = new GameScreen();
    this.playerOneCatcher = new Catcher(40, 10); 

} 
```

我在 Catcher 课上尝试过这样的事情......

```
public void paintComponent(Graphics g) {
    g.setColor(Color.BLUE);
    g.fillRect(positionX, positionY, this.width, this.height);
} 
```

但是，它没有显示在我的屏幕上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:37:04.107

你需要在这里重新考虑你的策略。Swing 是一个组件框架，其中大多数组件用于构建用户界面。这些组件并未针对游戏中通常需要的内容进行优化。您想研究双缓冲、精灵等。要走的路是阅读 Graphics2D 类（或完全放弃 Swing！）

但是回答您的问题 - 如果 Catcher 是 Swing 组件 - 您需要将其添加到“父”组件中，例如：

```
this.add(playerOneCatcher); 
```

同样适用，`gameScreen`但从您的代码段来看，这个组件是什么并不明显。我希望这有帮助。

另外，请查看以下内容以获取一些想法：[2D Java 游戏。在平铺图像上方移动精灵](https://stackoverflow.com/questions/4189267/2d-java-game-moving-sprite-above-tiled-images)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:21:45.493

1.  你打电话了`super.paintComponent (g)`吗？这可能会导致一些错误。
2.  你打电话`invalidate ()`还是`repaint ()`重新粉刷你正在绘画的东西？我希望你有一个特殊的 JComponent，而不是在 JFrame 上绘图。这是不好的。

# ruby-on-rails - Ruby on the rails 关系

> ID：10734502
> 
> 赞同：1
> 
> 时间：2012-05-24T09:15:29.223
> 
> 标签：ruby-on-rails, database-design, activerecord

我有用户和项目。用户可以有很多项目，项目可以有很多用户。现在项目有一个特定的用户作为作者或创建者，即。项目有一个创建者，该创建者也是用户。我如何在 rails 中映射这种关系！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:29:55.177

```
#Project
has_and_belongs_to_many :users
belongs_to :author, :class_name => "User"

#User
has_and_belongs_to_many :projects
has_many :authored_projects, :class_name => "Project", :foreign_key => "author_id" 
```

您需要添加`author_id`到项目表中。

所以你可以使用: `project.author`, `user.authored_projects`, 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:49:37.033

试试这个

```
class User < ActiveRecord::Base
 has_and_belongs_to_many :projects
 has_many :created_projects, :class_name => "Project", :foreign_key => "creator_id"    
end

class Project< ActiveRecord::Base
 has_and_belongs_to_many :users  
 belongs_to :creator, :class_name => "User"
end 
```

# django - 用 django 计算每日奖金

> ID：10734506
> 
> 赞同：0
> 
> 时间：2012-05-24T09:15:46.053
> 
> 标签：django, orm, aggregate-functions

我有一个代表用户投注的模型类。我想计算整个数据库（不是单个用户）的每日奖金。使用公式计算每个用户投注的奖金`odds * coins`（当结果 = 1 时）。

```
class UserBet(models.Model):
    user = models.ForeignKey(User)
    bet = models.ForeignKey(Bet)
    coins = models.FloatField(default=0.0) 
    placed = models.DateTimeField(editable=False) #when user places the bet
    result = models.SmallIntegerField(default=0) # 1: win, 0: no result yet, -1: lose
    odds = models.FloatField(default=0.0)
    week_number = models.SmallIntegerField(default=0)
    year = models.SmallIntegerField(default=0)
    modified = models.DateTimeField() #when result is updated 
```

我每天都会获得这样的成功结果（MySql）：

`UserBet.objects.filter(result=1).extra({'date_modified':"date(modified)"}).values('date_modified').annotate(coins_sum=Sum('coins'))`

但这不是我想要的。每个用户放置的硬币应乘以每个用户下注的赔率，以获得每日奖金。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:21:36.630

您可以使用以下`QuerySet.extra`方法：

```
UserBet.objects.filter(result = 1).extra({'winnings':'odds * coins'})... 
```

# android - 重新创建 Fragment of - View Pager - FragmentPagerAdapter

> ID：10734507
> 
> 赞同：2
> 
> 时间：2012-05-24T09:16:01.167
> 
> 标签：android, android-fragments, android-viewpager

在我的应用程序中，我使用支持库中的 ViewPager-v4

1.  在主屏幕中，我有 viewPager，它最多有 5 个片段，所有片段都属于一个类 ArticlePager

2.  现在在主屏幕上有类别列表，现在寻呼机的内容基于该选择，

我遇到的问题是，我使用`FragmentPagerAdapter`了哪个存储片段，如果片段已经存在，它将返回旧片段而不重新创建它。事情运行得很好，但是问题发生在方向改变的时候。

例如

如果每个片段中通常有 5 个视图对于给定的位置，但也有一些包含 2-3 个视图。**现在**，如果我**更改**页号上的方向，让我们说 5 里面*只包含 3 个视图*。

所以，到现在为止，在第 5 页的每个类别中，我都会得到包含 3 个视图的视图，这不是我想要的。

在我的应用程序中，每个类别都包含分页

**有什么方法可以让我在点击类别时销毁和重新创建片段？**或任何其他解决方法

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:21:17.430

好的，感谢开源我找到了我的解决方案，[`FragmentPagerAdapter`](http://code.google.com/p/openintents/source/browse/trunk/compatibility/AndroidSupportV2/src/android/support/v2/app/FragmentPagerAdapter.java?r=3488)我已经覆盖了该方法`instantiateItem`并得到了解决方案。

这可以通过[`FragmentStatePagerAdapter`](http://code.google.com/p/openintents/source/browse/trunk/compatibility/AndroidSupportV2/src/android/support/v2/app/FragmentStatePagerAdapter.java?r=3488)不存储片段来轻松实现。它一直在重新创建它，但我不希望它出现在 100 页的页面中，因为只有几页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:21:57.800

因此，如果我理解正确，您的问题是旋转后，ViewPager 中有错误的片段集？

为什么不检查 Activity 的 onResume() 或 onStart() 中当前选择的选项卡，并使用正确的片段为 ViewPager 创建/分配一个新的 PagerAdapter？

# php - 数组 PHP 的排列

> ID：10734514
> 
> 赞同：2
> 
> 时间：2012-05-24T09:16:36.353
> 
> 标签：php, arrays, loops, for-loop, permutation

我有以下问题：

```
$multidmimensional = array(

 [0] => array(
    [0] => 1, 
    [1] => 2, 
    [2] => 3
  );

  [1] => array(
   [0] => 5, 
   [1] => 6, 
   [2] => 7
  );

  ...

  [2] => array(
   [0] =>,4 
   [1] => 5, 
  );

); 
```

我可以有一个或多个（嵌套）数组，并以上述数组中的前两个为例：

我应该按以下方式排列它们：

```
15
16
17

25
26
27

36
37
38 
```

例如，如果我有这三个数组，我应该得到这样的结果：

```
154
164
174
155
165
175

254
264
274
255
265
275

364
374
384
365
375
385 
```

我在制作一个可以解决这个问题的算法时遇到了一些问题。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:17:13.870

这是一个很好的脑筋急转弯问题。这是我想出的，请参阅[运行演示](http://codepad.org/DwdElIUN)以进行测试和调整。

```
$multidimensional = array(
  0 => array(
    0 => 1,
    1 => 2,
    2 => 3,
  ),
  1 => array(
    0 => 5,
    1 => 6,
    2 => 7,
  ),
  2 => array(
    0 => 4,
    1 => 5,
  ),
); // just your input

$permutations = array();
$count = count($multidimensional);
for ($i = 0; $i < $count; $i++) {
  $temp = array_map("permute",array($permutations),array($multidimensional[$i]));
  $permutations = $temp[0];
}
print_r($permutations); // OUTPUT

function permute($base,$add) {
  $result = array();
  if (count($base) > 0) {
    foreach ($base AS $val1) {
      if (count($add) > 0) {
        foreach ($add AS $val2) {
          $result[] = $val1.$val2;
        }
      }
      else {
        $result = $base;
      }
    }
  }
  else {
    $result = $add;
  }
  return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T14:14:11.883

```
$data = array
(
  '1' => array(5, 6, 7),
  '2' => array(9, 25, 14)

);

for($i=0; $i<=count(array_keys($data)); $i++) {
   for($j=1; $j<=2; $j++) {
      $values[$i][] = $data[$j][$i];
   }
}

for($i=0; $i<count($values); $i++) {
  shuffle($values[$i]);
}

$newData = array();
for($i=0; $i<3; $i++) {
   for($j=1; $j<=2; $j++) {
       $newData[$j][] = array_pop($values[$i]);
   }
}
print_r($newData); 
```

[小提琴](http://phpad.org/run/1257199458)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:39:07.563

我现在无法对其进行测试，但这应该可以：（可能包含拼写错误）

```
function permute($arrays){
      if(count($arrays)<2) return $arrays[0];//TODO error on count == 0
      $array1 = array_shift($arrays);
      $array2 = array_shift($arrays);
      $results = array();
      foreach($array1 as $elementOfOne){
        foreach($array2 as $elementOfTwo){
          $results[] = $elemnetOfOne . $elementOfTwo;
        }
      }
      array_unshift($arrays, $results);
      return permute($arrays);
    } 
```

# sql - 如何从一个表中选择另一表中不存在值行的行？

> ID：10734515
> 
> 赞同：4
> 
> 时间：2012-05-24T09:16:42.960
> 
> 标签：sql

假设我有两个相同的表，A 和 B，行“x”。

我想选择A中的所有元素，其中A中x的值不在B的任何x值中。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:22:39.930

你也可以这样做：

```
SELECT * FROM TableA
LEFT JOIN TableB on TableA.X = TableB.X
WHERE TableB.X IS NULL 
```

[*（对于您问题中非常简单的示例，`NOT EXISTS`/`NOT IN`方法可能更可取，但是您的实际查询是否更复杂，这是您可能要考虑的选项；例如，如果您想要来自 TableB 的 som 信息一场比赛，但也想知道哪里没有比赛）*]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:18:38.830

我很难理解你需要什么。
无论如何试试这个：

```
SELECT * FROM tableA 
WHERE x not IN (SELECT x FROM tableB) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:21:25.773

```
select *
from TableA
except
select *
from TableB 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:27:10.253

最快的是左连接

```
SELECT * FROM A LEFT JOIN B ON A.X = B.X WHERE B.X IS NULL 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T11:31:33.520

用它 ：

```
select * from a where x not in (select x from b) 
```

# iphone - 更新核心数据实体

> ID：10734517
> 
> 赞同：0
> 
> 时间：2012-05-24T09:16:50.993
> 
> 标签：iphone, objective-c, ios, core-data, entity

如何更新 Core Data 实体，需要哪些操作？我有一个`Store`一对多的关系`Product`。当我对产品进行更改、删除或添加时，我是否需要执行任何操作，例如调用某些方法？还是我只是编辑产品并将它们单独放置，然后当用户退出应用程序时将它们保存到持久存储中？这是正常的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:18:39.463

You have to save them to be persistant - see [Managed Object Context in the Core Data Programming Guide from Apple](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-SW3):

> Unless you actually save those changes, however, the persistent store remains unaltered.

so here is the code

```
NSError *error = nil;
BOOL savedSuccessfully = [self.managedObjectContext save:&error];
if (!savedSuccessfully) {
    NSLog(@"Could not save date change! Reason : %@", [error localizedDescription]);
} 
```

You should save often and not only when exiting the app. See this answer: [How often should I save to Core Data?](https://stackoverflow.com/q/3085170/1059709)

> When I do a change to the products, remove one or add, do I need to do anything then such as invoking some methods?

This depends on the delete rule you set in the entity in the core data model.

*   nullify: any other object in the relationshipto the deleted object will have those relationship set to nil. for to-many relationships the delted object will just be removed from the collection.
*   cascade: any other object with a relationship to the object is deleted too.
*   deny: the delete will ne denied if there are any other related objects.
*   no action: any other object with a relation to the object will be left unchanged.

# android - Android 库或示例代码上的 VOIP

> ID：10734519
> 
> 赞同：4
> 
> 时间：2012-05-24T09:16:57.280
> 
> 标签：android, voip

提前致谢。我正在开发 Android 上的 VOIP 应用程序。

是否有任何开源代码、库或示例应用程序可供 VOIP 软件开发人员快速创建 VOIP 应用程序？提前致谢。

实际上我不知道在 android 应用程序中使用**voip**的过程。所以如何在应用程序中使用 voip。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:15:06.650

我想你可能想要[SIP 包](http://developer.android.com/reference/android/net/sip/package-summary.html)。

# facebook - 欧盟 Cookie 指令

> ID：10734528
> 
> 赞同：1
> 
> 时间：2012-05-24T09:17:20.533
> 
> 标签：facebook, cookies

随着新的欧盟 Cookie 指令的实施 (http://www.cookielaw.org)，我想了解 Facebook 应用程序/标签的情况，因为它有点灰色地带。

由于 Facebook 使用 cookie 作为应用程序中身份验证过程的一部分以及许多其他方式，因此 Facebook 是否有责任向用户显示要求他们选择加入的消息？

来自 Facebook 的建议将非常有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:44:40.597

一旦用户登陆**您的**网站，您就有责任告诉他们网站和您正在使用的任何其他相关网络服务（包括 Facebook）设置的所有 cookie。

在大多数情况下，您应该可以在网站的可见部分（在顶部，不一定有烦人的弹出窗口）上公布 cookie 列表，[列出所有 cookie](https://webcookies.org/)并简要说明它们的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:53:31.563

如果网站在没有设置 cookie 的情况下运行，则该 cookie 与 cookie 法相关。

如果未设置 cookie 时网站会中断或功能将不再起作用，则该 cookie 是豁免的。例如登录cookies。

就责任而言，这是尚未确定的事情。Facebook 设置 cookie 是的，尽管您无法阻止它，但您确实可以选择使用或不使用它，可以说这与自己设置它们是一回事。

**在责任方面，我建议你咨询相关的律师，而不是在这里坚持这样的提问**

# gnome - 当我在 gnome 终端上执行 ctrl+C / ctrl+V 时，readline 会切断我的控制台输入

> ID：10734532
> 
> 赞同：0
> 
> 时间：2012-05-24T09:17:32.713
> 
> 标签：gnome, readline

环境：Ubuntu 10.04 LTS Gnome Desktop v2.30.2 gcc/g++ 4.4.3 libreadline 6.1

我正在构建一个输入多行输入并为其处理的应用程序，我发现如果输入的大小很大，readline 会跳过几个字节的字符。为了确保，我做了一个这样的简单程序：

```
#include <stdio.h>
#include <readline/readline.h>
int main() {
    while (1) {
        char *p = readline("> ");
        if (!p) break;
        fprintf(stderr, "%s\n", p);
    }
    return 0;
} 
```

并生成 20000 行输入，其中包含 120000 个字节。

```
seq -f "%05g" 1 20000 >gen.txt 
```

并在 gnome 终端上运行测试程序并复制和粘贴 gen.txt 的内容：

```
g++ test.cpp -lreadline
./a.out 2>out.txt
[copy-and-paste the content of gen.txt] 
```

我可以看到 out.txt 比 gen.txt 小，并且省略了很多字节。

```
wc -c out.txt
119966 out.txt 
```

我想知道哪个组件有缺陷，无论是 gnome 终端还是 readline，并且想知道 readline 和 gnome 终端有多少字节的剪贴板内容可以确保可以毫无问题地完成该数量的复制和粘贴。

# android - 在活动中动态注册和注销广播接收器，同时允许它在活动之外运行

> ID：10734538
> 
> 赞同：0
> 
> 时间：2012-05-24T09:17:55.960
> 
> 标签：android, broadcastreceiver

我正在尝试注册一个广播接收器，以便当屏幕打开时，飞行模式也会打开。只要我留在我注册的活动中，它就可以工作，但是一旦我离开活动，它就会停止工作。Android Manifest 是静态的，所以我不能使用它，此外，Android Manifest 方法不允许您使用 SCREEN_ON 因为 Android 不希望您在屏幕唤醒时运行一堆东西，所以它必须由使用 registerReceiver AFAIK。

我的活动：-

```
public class WakeActivity extends Activity {

IntentFilter screenon = new IntentFilter("android.intent.action.SCREEN_ON");

//Skipped a bunch of code here to keep it relevant. Remember, the broadcast receiver
//does in fact work while I'm in the activity, so the problem isn't with
//the missing code here. Still, let me know if I'm missing something.

//The following method is called within onCreate()

protected void airplane(int i) {
    Screen_On screenon_airplane = new Screen_On();
    if (i == 0) {
        screenon_airplane.airplanei = 0;
        registerReceiver(screenon_airplane, screenon);
    } else if (i == 1) {
        screenon_airplane.airplanei = 1;
        registerReceiver(screenon_airplane, screenon);
    } else if (i == -1) {
        unregisterReceiver(screenon_airplane);
    }
}
} 
```

我的广播接收器：-

```
public class Screen_On extends BroadcastReceiver {

public int airplanei;

@Override
public void onReceive(final Context context, Intent intent) {
    boolean isEnabled = Settings.System.getInt(
            context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON,
            0) == 1;
    if (airplanei == 0) {
        if (isEnabled != false) {
            Settings.System.putInt(context.getContentResolver(),
                    Settings.System.AIRPLANE_MODE_ON, 0);
            Intent turnplaneoff = new Intent(
                    Intent.ACTION_AIRPLANE_MODE_CHANGED);
            turnplaneoff.putExtra("state", 0);
            context.sendBroadcast(turnplaneoff);
        }
    } else if (airplanei == 1) {
        if (isEnabled == false) {
            Settings.System.putInt(context.getContentResolver(),
                    Settings.System.AIRPLANE_MODE_ON, 1);
            Intent turnplaneon = new Intent(
                    Intent.ACTION_AIRPLANE_MODE_CHANGED);
            turnplaneon.putExtra("state", 1);
            context.sendBroadcast(turnplaneon);
        }
    }
}
} 
```

LogCat 错误：-

```
05-17 23:44:24.886: E/ActivityThread(2435): Activity com.dragonheart.autodroid.ActionActivities.WakeActivity has leaked IntentReceiver com.dragonheart.autodroid.BroadCastRecievers.Screen_On@414271b0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

该错误是否与不告诉广播接收器 onPause() 或 onDestroy() 中的内容有关？...虽然我认为一旦注册它，它会一直工作到未注册，无论活动如何...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:48:33.647

我不确定您的广播接收器是否会在活动停止后工作，因为您的接收器已经以编程方式注册，而不是通过清单静态注册（因为 android 不允许您这样做）。

我查看了您的代码，试图了解代码的作用，但这并不简单，仅几行...

但无论如何，你为什么不创建一个服务来将监听器注册到屏幕状态呢？这样，即使活动停止后，服务也不会停止执行。

每次服务通知屏幕打开/关闭时，您都可以向您的主要活动发送消息（检查[文档](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)）。

请参阅上一个问题，以及如何使用 LocalBroadcastReceiver 的示例：[LINK](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

# scala - More parallel actors in scala

> ID：10734540
> 
> 赞同：0
> 
> 时间：2012-05-24T09:17:57.570
> 
> 标签：scala, concurrency, akka

(sort of followup to [How to make a code thread safe in scala?](https://stackoverflow.com/questions/10718255/how-to-make-a-code-thread-safe-in-scala) )

I have a scala class that can inherently be called only from one thread (let's call it `class ThreadUnsafeProducer`); it is, however, safe to have more threads to each access exactly one object. However, the `ThreadUnsafeProducer` is quite memory heavy, so I don't want each thread to have one `ThreadUnsafeProducer`.

I want to have a given number `N` of `ThreadUnsafeProducer` objects (ideally one for each CPU).

I have lots of threads `Consumer` that all share the same object `SharedObject`.

I want to somehow use Actors model to give messages to either `SharedObject` or `ThreadUnsafeProducer` (I am not sure which) to have a given number of concurrent `ThreadUnsafeProducer` running. And I am quite lost in all the Akka/Actors classes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:42:57.293

我最近发现了 Akka 路由类

[http://doc.akka.io/docs/akka/2.0/scala/routing.html](http://doc.akka.io/docs/akka/2.0/scala/routing.html)

它看起来真的很好，正是我需要的。如果它有效，那将是美丽的。

# google-app-engine - 在 requesthandler 类方法中而不是在函数中处理 webapp2 404 错误

> ID：10734547
> 
> 赞同：3
> 
> 时间：2012-05-24T09:18:20.283
> 
> 标签：google-app-engine, webapp2

我在 Google App Engine (Python) 中使用 webapp2 框架。在[webapp2 异常处理：WSGI 应用程序中](http://webapp-improved.appspot.com/guide/exceptions.html#exceptions-in-the-wsgi-app)的异常中，描述了如何处理函数中的 404 错误：

```
import logging
import webapp2

def handle_404(request, response, exception):
    logging.exception(exception)
    response.write('Oops! I could swear this page was here!')
    response.set_status(404)

def handle_500(request, response, exception):
    logging.exception(exception)
    response.write('A server error occurred!')
    response.set_status(500)

app = webapp2.WSGIApplication([
    webapp2.Route('/', handler='handlers.HomeHandler', name='home')
])
app.error_handlers[404] = handle_404
app.error_handlers[500] = handle_500 
```

如何在`webapp2.RequestHandler`该类的`.get()`方法中处理类中的 404 错误？

**编辑：**

我想调用 a 的原因`RequestHandler`是访问会话 ( `request.session`)。否则我无法将当前用户传递给 404 错误页面的模板。即在[StackOverflow 404 错误页面上](https://stackoverflow.com/abc)，您可以看到您的用户名。我也想在我网站的 404 错误页面上显示当前用户的用户名。这在函数中是可能的还是必须是`RequestHandler`？

**基于@proppy's answer的正确代码：**

```
class Webapp2HandlerAdapter(webapp2.BaseHandlerAdapter):
    def __call__(self, request, response, exception):
        request.route_args = {}
        request.route_args['exception'] = exception
        handler = self.handler(request, response)
        return handler.get()

class Handle404(MyBaseHandler):
    def get(self):
        self.render(filename="404.html",
            page_title="404",
            exception=self.request.route_args['exception']
        )

app = webapp2.WSGIApplication(urls, debug=True, config=config)
app.error_handlers[404] = Webapp2HandlerAdapter(Handle404) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:30:05.700

错误处理程序和请求处理程序可调用的调用约定是不同的：

*   `error_handlers`需要`(request, response, exception)`
*   `RequestHandler`需要`(request, response)`

您可以使用类似于 to的东西[`Webapp2HandlerAdapter`](http://webapp-improved.appspot.com/api/webapp2.html)来使 a 适应`webapp2.RequestHandler`可调用对象。

```
class Webapp2HandlerAdapter(BaseHandlerAdapter):
    """An adapter to dispatch a ``webapp2.RequestHandler``.

    The handler is constructed then ``dispatch()`` is called.
    """

    def __call__(self, request, response):
        handler = self.handler(request, response)
        return handler.dispatch() 
```

但是您必须在 request 中偷偷添加额外的异常参数`route_args`。

# google-app-engine - Implementing TaskQueue on Google-App-Engine with Python 2.7

> ID：10734552
> 
> 赞同：0
> 
> 时间：2012-05-24T09:18:43.527
> 
> 标签：google-app-engine, python-2.7, task-queue

I am trying to learn about GAE Task Queues with Python 2.7\. The sample code [here](https://developers.google.com/appengine/docs/python/taskqueue/overview-push) doesn't work when I try to copy and past it into a 'helloworld.py' app from the Python 2.7 tutorial [here](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld).

I think it's because I don't have a 'counter.html' and I gather it is a pretty simple task to make one because it says this:

> (In this example, 'counters.html' refers to a Django template that contains the HTML for a page that displays the counter value, and a button to trigger a POST request to the / URL.)

I gather that I should know how to make 'counter.html' but I can't.

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:09:04.237

您应该能够很容易地调整[留言簿模板示例。](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:00:29.067

如果您的代码是从 Google 示例页面复制/粘贴的并且不起作用，则可能是您的 app.yaml 和 queue.yaml 文件设置不正确。症状 = 您的 TQ 调用永远不会到达处理程序。（你确实需要更多的特异性：问题正如尼克所说。） yamls 参考： [https ://developers.google.com/appengine/docs/python/config/queue](https://developers.google.com/appengine/docs/python/config/queue)

# wpf - 从 3d 元素 WPF 内部查看

> ID：10734554
> 
> 赞同：1
> 
> 时间：2012-05-24T09:18:50.360
> 
> 标签：wpf, 3d, camera

我使用 SphereMeshGenerator 在 WPF 应用程序中创建球体元素。该球体使用媒体元素（视频）进行映射。

我想将相机放在球体的中间，以便从球体内部获得视图。

我尝试过使用相机位置和方向，但没有成功。不幸的是，我对 wpf 和 3d 的了解非常有限。

所以我的问题是，如果可能的话，怎么做？

我的目标是模拟视频全景动画。

谢谢你。

PS：这个问题已经被问过了，但仍然没有答案。请参阅此处的评论部分：

[链接页面](http://blogs.microsoft.co.il/blogs/davids/archive/2009/06/29/mapping-mediaelement-onto-a-sphere-with-wpf.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:25:12.513

话题很老了，但是因为它可以帮助处于相同情况的其他人，我想我必须发布这样做的方法。

使用 SphereMeshGenerator 编写 XAML 代码：

```
<Window x:Class="WpfSphereMeshGenerator.SphereMeshGeneratorMediaInto"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfSphereMeshGenerator"
    Title="SphereMeshGeneratorMediaInto" 
    Height="300" Width="300"
    Loaded="Window_Loaded">

<!-- OXYZ axis in WPF are in center of ViewPort3D-->

<Window.Resources>
  <!--sphere diameter--> 
    <local:SphereMeshGenerator 
    x:Key="MySphereMeshGenerator"
    Center="0 0 0"
    Radius="100.0" />
</Window.Resources>
<Grid>
    <Viewport3D>
        <!--camera in center of ViewPort => 0,0,0-->  
        <Viewport3D.Camera>
            <PerspectiveCamera 
                    x:Name="Camera"
                    UpDirection="0,1,0"
                    LookDirection="-2,-2,-2"
                    Position="0,0,0" 
                    FieldOfView="100" >

            </PerspectiveCamera>
        </Viewport3D.Camera>
        <ModelVisual3D>
            <ModelVisual3D.Content>
                <AmbientLight 
                        Color="White">
                </AmbientLight >
            </ModelVisual3D.Content>
        </ModelVisual3D>
        <!--ModelVisualD by default in center of ViewPort-->
        <ModelVisual3D
            x:Name="ModelA">
            <ModelVisual3D.Content>
                <GeometryModel3D 
                        Geometry="{Binding 
                        Source={StaticResource 
                        MySphereMeshGenerator}, 
                        Path=Geometry}">
                    <!--turn sphere-->
                    <GeometryModel3D.Transform>
                        <RotateTransform3D >
                            <RotateTransform3D.Rotation>
                                <AxisAngleRotation3D
                                            x:Name="Rotate"
                                            Axis="0,1,0"/>
                            </RotateTransform3D.Rotation>
                        </RotateTransform3D>
                    </GeometryModel3D.Transform>
                    <!--video put on BackMaterial-->
                    <!--inside face-->
                    <GeometryModel3D.BackMaterial>
                        <DiffuseMaterial>
                            <DiffuseMaterial.Brush>
                                <VisualBrush>
                                    <VisualBrush.Visual>
                                        <MediaElement>
                                            <MediaElement.Triggers>
                                                <EventTrigger RoutedEvent="MediaElement.Loaded">
                                                    <EventTrigger.Actions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <MediaTimeline 
                                                                    x:Name="mediaTimeline"
                                                                    RepeatBehavior="Forever" />
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger.Actions>
                                                </EventTrigger>
                                            </MediaElement.Triggers>
                                        </MediaElement>
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </DiffuseMaterial.Brush>
                        </DiffuseMaterial>
                    </GeometryModel3D.BackMaterial>
                </GeometryModel3D>
            </ModelVisual3D.Content>
        </ModelVisual3D>
    </Viewport3D>
</Grid>
<Window.Triggers>
    <EventTrigger  
        RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation
                    Storyboard.TargetName="Rotate"
                    Storyboard.TargetProperty="Angle"
                    From="0" To="360" Duration="0:0:10"
                    RepeatBehavior="Forever">
                </DoubleAnimation>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers> 
```

感谢 MABROUKI 在这方面的帮助。

# templates - node.js + express.js + dust.js issues

> ID：10734555
> 
> 赞同：5
> 
> 时间：2012-05-24T09:18:51.157
> 
> 标签：templates, node.js, express, dust.js

The quick question: why won't express.js run with dust.js?
I know it's not officially supported, but dust.js even has issues with my node.js version.
Node won't even start due to require.path issues.

```
server:testapp treejanitor$ node --version
v0.6.12 
```

I get issues when setting the app engine to dust. (*app.js* in express)

```
var dust = require('dust');
...
app.set('view engine', 'dust'); 
```

I'm showing the console here to give you my simple list of modules.
Also someone searching for the same problem might cut/paste the error.

```
server:hummr treejanitor$ npm list
application-name@0.0.1 /Users/treejanitor/git/testapp/testapp
├── consolidate@0.3.0  extraneous
├── dust@0.3.0 
├─┬ express@2.5.8 
│ ├─┬ connect@1.8.7 
│ │ └── formidable@1.0.9 
│ ├── mime@1.2.4 
│ ├── mkdirp@0.3.0 
│ └── qs@0.4.2 
└─┬ jade@0.25.0 
  ├── commander@0.5.2 
  └── mkdirp@0.3.0

server:testapp treejanitor$ supervisor app.js

DEBUG: Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.<anonymous> (module.js:378:11)
    at Object.<anonymous> (/Users/treejanitor/git/testapp/testapp/node_modules/dust/lib/server.js:6:8) 
```

I tried the following attempt with no luck:
[Dust.js load template from filesystem in Node.js](https://stackoverflow.com/questions/10459770/dust-js-load-template-from-filesystem-in-node-js)

NOTE: I tried the alpha version of express (3.0) which didn't help.
Same goes for consolidate.js and all the modules in that [example](http://spalatnik.com/blog/?p=54).

* * *

Some reasons why I am interested in node + express + dust:
[LinkedIn picks dustjs](https://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)
[Twitter's Bootstrap framework](http://twitter.github.com/bootstrap/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T04:53:19.677

我曾经讨论过通过模块`Express@3.0`在 Node.js 0.6.x 上设置 Dust.js。`consolidate.js`你可以[在这里阅读](http://sntran.tumblr.com/post/19736046092/using-dust-js-with-express3-0alpha-on-node-js-0-6-x)

但是，您可能想要使用[LinkedIn 的 Dust.js 分支](https://github.com/linkedin/dustjs)，它支持开箱即用的 Node.js 0.6.x，并进行了其他改进。

`Consolidate.js`已经支持该分叉，但您仍然需要`Express@3.0`工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:13:02.617

所以这是诀窍 - 我想我会分享我发现的东西。
它需要找到这个金块 - 如果您有兴趣，请在页面中搜索dust-x。 [http://nodejs.debuggable.com/2012-03-23.txt](http://nodejs.debuggable.com/2012-03-23.txt)

要解决问题，请在您的快速应用程序中

```
cd node_modules
git clone git://github.com/laurie71/dust-x.git
git clone https://github.com/caolan/dustjs.git 
```

dust.js 的分支解决了 node.js 的 require.paths 问题
[https://github.com/caolan/dustjs](https://github.com/caolan/dustjs)

灰尘的“包装器”使其可用作模板引擎
（您仍然需要将dust.js作为模块安装）
[https://github.com/laurie71/dust-x](https://github.com/laurie71/dust-x)

示例用法
[https://gist.github.com/2174537](https://gist.github.com/2174537)

最重要的一点：

```
var dustx = require('dust-x');

...

// Configuration

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.register('.dust', dustx/*({})*/);
    app.set('view engine', 'dust');
    // app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express['static'](__dirname + '/public'));
}); 
```

顺便说一句，我想我可以手动修复其 server.js 中的dust.js 问题，但我想向实际分叉dust.js 并公开解决方案的人表示敬意。

* * *

PS：我对在 stackoverflow 上发帖还是很陌生，所以如果我违反了一些礼仪，请告诉我。我在常见问题解答中读到鼓励回答您自己的问题，所以我想我会尝试一下。

*特别是，我知道我的格式可能很弱。在答案中，我实际上更喜欢显示完整链接而不是指南建议的 URL 嵌入，因为它揭示了包含站点的结构。随着站点 URL 浸入您的大脑，它为您提供了更多机会将该站点作为下一次复飞的参考。URL也相当短。;^)**非常感谢您的建议**。*

*“控制台”的典型格式是什么？作为代码？*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-08T16:39:04.397

这可能是 node.js 和 express.js 版本的问题。我使用的是 node v0.10.9 和 express v3.0.x，它们对我来说效果很好。为了将dust.js与express.js和node.js集成，我发现这个github repo是一个有用的资源来帮助你开始： [https](https://github.com/chovy/express-template-demo) ://github.com/chovy/express-template-demo （它使用dust.js 的linkedin 分支）

# ios - 是否可以在 coreplot 中设置托管视图的背景颜色？

> ID：10734564
> 
> 赞同：5
> 
> 时间：2012-05-24T09:19:30.313
> 
> 标签：ios, core-plot

我需要在核心图中设置托管视图的背景颜色以清除颜色。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:01:01.617

Core Plot 托管视图是`UIView`. 它应该默认为 clear `backgroundColor`。请参阅[UIView 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/backgroundColor)。

您还可以使用图像在图表上设置填充，而不是将其放置在背景中。

```
graph.fill = [CPTFill fillWithImage:[CPTImage imageWithCGImage:myCGImage]]; 
```

这只是一个例子。`CPTImage`还有其他几种初始化方法。

# maven - maven依赖中“覆盖”排除的影响

> ID：10734565
> 
> 赞同：3
> 
> 时间：2012-05-24T09:19:30.447
> 
> 标签：maven, dependency-management, maven-dependency-plugin

子 pom 中的排除如何影响父 pom 中的排除？排除项是累加的吗？这是一个例子：

```
....
<dependencyManagement>
  <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>${hibernate.version}</version>
    <exclusions>
      <exclusion>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
      </exclusion>
    </exclusions>
  </dependency>    
</dependencyManagement
.... 
```

在儿童 pom -

```
 .....
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <exclusions>
            <exclusion>
                <groupId>cglib</groupId>
                <artifactId>cglib</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    .... 
```

最终，两者都被`commons-collections`排除`cglib`在外吗？如果是这样，我有什么办法可以`commons-collections`为子项目“带回来”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:01:08.673

是的，Maven 的排除是附加的。您将有两个排除项。除了将其重新添加为新的本地依赖项之外，没有其他方法可以取消某些继承的排除。

顺便说一句，在您自己的计算机上验证这一点大约需要 1-2 分钟...

# wcf - Error on WCF Service when using IList or ICollection as a DataMember

> ID：10734566
> 
> 赞同：0
> 
> 时间：2012-05-24T09:19:31.057
> 
> 标签：wcf, entity-framework

I'm developing a sample system that use Entity Framework code first approach and MVC as user interface. Here I use WCF services to communicate with user interface and the system. When I use a List or a collection in my Employee entity It given following error. I'm sure that's due to the collection.

**" An error occurred while receiving the HTTP response to http:/localhost/GreetingHost/EmployeeService.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details. "**

Here are my entities and services that included in Greeting Project :

Employee.cs

```
[DataContract]
[KnownType(typeof(Greeting))]
public class Employee
{
    [Key()]
    [DataMember]
    public string UserId { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public int Age { get; set; }
    [DataMember]
    [ForeignKey("EmployeeUserID")]
    public virtual IList<Greeting> Greetings
    {
        get
        {
            if (this._greetings == null)
            {
                this._greetings = new List<Greeting>();
            }
            return _greetings;
        }
        set { _greetings = value; }
    }
    private IList<Greeting> _greetings;
} 
```

**Greeting.cs**

```
[DataContract]
public class Greeting
{
    [Key()]
    [DataMember]
    public int GreetingID { get; set; }
    [DataMember]
    public string Salutation { get; set; }
    [DataMember]
    public string Message { get; set; }
    [DataMember]
    public DayStatusWrapper DayStatusWrapper { get; set; }
    [DataMember]
    public string EmployeeUserID { get; set; }
    [DataMember]
    public virtual Employee Employee { get; set; }
} 
```

**GreetingDBContext.cs**

```
public class GreetingDBContext :DbContext 
{      
    public DbSet<Greeting> Greetings { get; set; }
    public DbSet<Employee> Employees { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<IncludeMetadataConvention>();
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Employee>().
                HasMany(d => d.Greetings).
                WithRequired(c => c.Employee).
                HasForeignKey(c => c.EmployeeUserID).WillCascadeOnDelete();
        modelBuilder.Entity<Employee>()
                .HasKey(c => c.UserId);
        modelBuilder.Entity<Greeting>()
                .HasKey(c => c.GreetingID);
    }
} 
```

**EmployeeServices.cs**

```
public class EmployeeService
{
    private GreetingDBContext db = new GreetingDBContext();

    public void AddEmployee(string UserId, string Name, int Age)
    {
        Employee emp = new Employee();
        emp.UserId = UserId;
        emp.Name = Name;
        emp.Age = Age;
        db.Employees.Add(emp);
        db.SaveChanges();
    }

    public Employee getEmployee(string UserId)
    {
        Employee selectedEmployee = null;
        foreach (Employee item in db.Employees)
        {
            if (item.UserId == UserId)
            {
                selectedEmployee = item;
                break;
            }
        }
        return selectedEmployee;
    }

} 
```

I used WCF Service application to host the services. Here codes are from **GreetingHost** project.IEmployeeServices.cs

```
[ServiceContract]
public interface IEmployeeService
{
    [OperationContract]
    void AddEmployee(string UserId, string Name, int Age);

    [OperationContract]
    Employee getEmployee(string UserId);
} 
```

**EmployeeService.svc.cs**

```
public class EmployeeService : IEmployeeService
{
    Greeting.EmployeeService serviceImplementation = new Greeting.EmployeeService();

    public void AddEmployee(string UserId, string Name, int Age)
    {
        serviceImplementation.AddEmployee(UserId,Name,Age);
    }

    public WcfGreating.Employee getEmployee(string UserId)
    {
        return serviceImplementation.getEmployee(UserId);
    }
} 
```

Service host successfully :

In my MVC application Used above service reference:

```
 EmployeeServiceClient employeeService = new EmployeeServiceClient();

    public ActionResult Profile(string id)
    {
        Employee emp = employeeService.getEmployee(id);

        return View(emp);
    } 
```

When gathering employee from service , above mentioned CommunicationException was returned. Can anyone help me?

Thank You!

**Edit :**

**Clients' Web.config**

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="EmployeeService" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false"
          transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/GreetingHost/EmployeeService.svc"
        binding="wsHttpBinding" bindingConfiguration="EmployeeService"
        contract="EmployeeServiceReference.IEmployeeService" name="EmployeeService">
        <identity>
          <servicePrincipalName value="host/7TK3T3J.fareast.corp.microsoft.com" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

**Service's config**

```
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="MyBehaviors" >
        <serviceMetadata httpGetEnabled="true" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
    <bindings>
        <wsHttpBinding>
            <binding name="wsHttpBindingWithTXFlow" transactionFlow="true" />
        </wsHttpBinding>
    </bindings>
    <services>
        <service name="GreetingHost.EmployeeService" behaviorConfiguration="MyBehaviors">
            <endpoint address="http://localhost/GreetingHost/EmployeeService.svc"
                binding="wsHttpBinding" bindingConfiguration="wsHttpBindingWithTXFlow"
                name="EmployeeService" contract="GreetingHost.IEmployeeService" />
          <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        </service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T14:08:20.710

你可以试试这个——

```
[IgnoreDataMember]
public virtual Employee Employee { get; set; } 
```

这么晚才回复很抱歉 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T14:14:07.430

`LazyLoading`中禁用`DbContext`。

# ios - 对存储在 NSArray 中的键/值进行排序

> ID：10734567
> 
> 赞同：1
> 
> 时间：2012-05-24T09:19:40.900
> 
> 标签：ios, cocoa, uitableview, nsarray, nssortdescriptor

我有一个

```
NSDictionary* dict = [[NSDictionary alloc]initWithObjectsAndKeys::arrayOne,@"Plants",arrayTwo,@"Animals"),arrayThree,@"Birds",nil];`

self.displayArray =[[dict allKeys] sortedArrayUsingSelector:@selector(compare:)]; 
```

一切正常，我可以看到表中的所有键值/对，但它们是按排序顺序排列的。即动物、鸟类、植物。

但我想显示为植物、动物、鸟类。

谁能告诉我如何按我的自定义顺序对数组进行排序？我用谷歌搜索，发现我们可以使用 NSSortDescriptor 进行排序。但我对此不是很清楚。谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:28:18.740

你在正确的轨道上，西里尔。

这是[有关“创建和使用排序描述符”的一些 Apple 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SortDescriptors/Concepts/Creating.html)

基本上，您需要继承 NSSortDescriptor 并在您的子类中实现您自己的“比较：”方法（您实际上可以将其命名为您想要的任何名称；它需要返回一个“ `NSComparisonResult`”），它以某种方式在“动物”之前以某种方式在逻辑上返回“植物”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:38:40.100

由于您的排序不遵循任何自然顺序，一个简单的解决方案可能是使用另一个数组跟踪订单

```
NSArray *array1 = [NSArray arrayWithObjects:@"rose",@"orchid",@"sunflower",nil];
NSArray *array2 = [NSArray arrayWithObjects:@"dog", @"cat",@"ogre",@"wookie", nil];
NSArray *array3 = [NSArray arrayWithObjects:@"parrot",@"canary bird",@"tweety",@"bibo",nil];

NSArray *keys = [NSArray arrayWithObjects:@"Plants",@"Animals",@"Birds", nil];

NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                                    array1,[keys objectAtIndex:0],
                                    array2,[keys objectAtIndex:1], 
                                    array3,[keys objectAtIndex:2], 
                          nil];

for (NSString *key in keys) {
    NSLog(@"%@ %@", key, [dict objectForKey:key]);
} 
```

Matt 在他精彩的博客中展示了如何创建有序字典，它基本上使用另一个数组来保持顺序，就像我在这里展示的那样：[OrderedDictionary: Subclassing a Cocoa class cluster](http://cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)

# c# - regular expression to find: 4.55$, 5$, $45, $7.86

> ID：10734571
> 
> 赞同：-1
> 
> 时间：2012-05-24T09:19:51.373
> 
> 标签：c#, regex

What will be the regular expression to fined out 4.55$, 5$, $45, $7.86 in a string?

I used `@"(?<=\$)\d+(\.\d+)?"` but it only finds `$45`, `$7.86`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:13:13.363

这似乎工作正常：

```
@"((?<=\$)\d+(\.\d+)?)|(\d+(\.\d+)?(?=\$))" 
```

代码示例：

```
string source = "4.55$, 5$, $45, $7.86";
string reg = @"((?<=\$)\d+(\.\d+)?)|(\d+(\.\d+)?(?=\$))";
MatchCollection collection = Regex.Matches(source, reg);
foreach (Match match in collection)
{
    Console.WriteLine(match.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:36:44.920

这有点笨拙，但这是另一个可能对您有用的表达式（带有一些解释性代码）：

```
string strRegex = @"\$(?<Amount>\d[.0-9]*)|(?<Amount>\d[.0-9]*)\$";
Regex myRegex = new Regex(strRegex);
string strTargetString = @"4.55$, 5$, $45, $7.86 ";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
    if (myMatch.Success)
    {
        //Capture the amount
        var amount = myMatch.Groups["Amount"].Value;
    }
} 
```

实际上，它所做的是定义在金额开头或结尾处匹配*$的交替方式。*

我已经使用[RegexHero](http://regexhero.net/tester/)对此进行了测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T10:54:35.090

我会在字符串中使用类似下面的表达式“Globaly”

```
string expression = @"(\$\d(\.\d*)?|\d(\.\d*)?\$)"; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-24T09:23:47.863

> 在字符串中罚款 4.55$、5$、$45、$7.86 的正则表达式是什么？

找到`4.55$, 5$, $45, $7.86`你可以使用`4.55\$, 5\$, \$45, \$7.86`.

**编辑**一些评论员担心人们会在不理解的情况下使用它。我提供了一个例子，这样就可以理解。

```
using System;
using System.Text.RegularExpressions;

public class Test
{
    public static void Main()
    {
        string search = @"The quick brown fox jumped over 4.55$, 5$, $45, $7.86";
        string regex = @"4.55\$, 5\$, \$45, \$7.86";

        Console.WriteLine("Searched and the result was... {0}!", Regex.IsMatch(search, regex));
    }
} 
```

输出是`Searched and the result was... True!`。

# php - Drupal: Issue in DruTex

> ID：10734572
> 
> 赞同：1
> 
> 时间：2012-05-24T09:19:57.613
> 
> 标签：php, drupal, drupal-6, latex, drupal-modules

I have installed and configured DruTex (in my Drupal6 installation).

But when I go to create a page, a warning appears on the top of the page as:

> warning: Parameter 1 to drutex_pdf_nodeapi() expected to be a reference, value given in /usr/share/drupal6/modules/drutex/drutex.module on line 829.

Please help me in removing it.

Note: I used a `@` in the mentioned file on line 829 however then following errors come when I create a page :

```
TeX Embedding failed! 
```

# objective-c - 从 plist 文件中读取字典的奇怪行为

> ID：10734573
> 
> 赞同：1
> 
> 时间：2012-05-24T09:20:00.687
> 
> 标签：objective-c, ios, plist, nsmutabledictionary

当我读取一个**非空**字典的 plist并且在我的模型类的 NSMutableDictionary 属性中至少有一个键值对时，一切正常。我可以添加、删除修改可变字典。

但是当字典**为空时**

你可以看到带有这样标签的 plist：

`<dict/>`

然后，即使我的属性有一个 NSMutableDictionary 指针，创建的 Object 也变得不可变。

当我尝试在其中为特定属性设置一个对象时，它给了我这个错误说：

`'NSInternalInconsistencyException', reason: '-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:22:41.357

```
NSMutableDictionary *mutable = [yourApparentlyMutableDictionary mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:29:22.207

很确定从 plist 中检索到的所有对象都是不可变的变体。我确实认为我看到了一个将它们反序列化为可变的选项。

编辑：

本文解释了如何将 plist 取消归档为可变：

[http://cocoadev.com/wiki/PropertyList](http://cocoadev.com/wiki/PropertyList)

# javascript - 不同浏览器的图像地图坐标

> ID：10734575
> 
> 赞同：0
> 
> 时间：2012-05-24T09:20:03.387
> 
> 标签：javascript, jquery, css, imagemap

我正在尝试创建一个图像映射，我在其中定义作为链接到其他一些页面的图像坐标。现在我面临的问题是坐标的位置不是相对的。

如果图像在不同的浏览器上或在不同的屏幕尺寸中，则不会保留坐标。我的意思是在图像中特定位置的链接现在在图像的其他位置。

任何人都可以提供一段代码，我可以在其中进行一些相对定位，即使浏览器大小或图像大小也会随之改变坐标位置。

我尝试使用 COORDSCALE "50%,50%" 之类的百分比标签，但它似乎是区域标签的错误属性。即使这个 COORDSCALE="ABSOLUTE|RELATIVE" 也不起作用。

首先，这些是正确的属性吗？有没有相对定位的可能？任何 CSS 或 Javascript 代码都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:39:54.283

用具有相对位置的 div 包裹图像。在它内部使用绝对定位的元素来模仿 imagemap 应该做的同样的事情。

谷歌“CSS 图像映射”以查找有关该技术的更多信息。

# android - 安卓动画1秒

> ID：10734576
> 
> 赞同：0
> 
> 时间：2012-05-24T09:20:07.707
> 
> 标签：android

我正在尝试制作一个页面，当用户离开页面时，页面中会有一个动画（例如：按钮将滑出），之后，用户将被发送到不同的活动。

动画没有问题，但是由于启动新活动的代码是在动画代码之后编写的，因此动画在 1 秒内没有完成（正如我设置的那样）。

我想先执行 1 秒钟的动画，然后再转到另一个活动。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:23:27.580

使用动画监听器。

```
private Animation.AnimationListener animListener = new Animation.AnimationListener() {

    @Override
    public void onAnimationEnd(Animation animation) {
        // write code to start new activity.
    }

    @Override
    public void onAnimationRepeat(Animation animation) {

    }

    @Override
    public void onAnimationStart(Animation animation) {

    }
}; 
```

将上述侦听器分配给您的动画

```
animation.setAnimationListener(animListener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:26:53.280

```
//Startanimation
new Handler().postDelayed(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
// call Activity
// End animation

                }
            }, 1000); 
```

# eclipse - Eclipse - 每个项目不同的文件夹/文件颜色

> ID：10734580
> 
> 赞同：2
> 
> 时间：2012-05-24T09:20:20.157
> 
> 标签：eclipse, explorer

我正在寻找一种在日食“项目资源管理器”中以光学方式标记不同项目的方法。
有时我不得不处理几个打开的项目，将文件和文件夹从旧项目复制到新项目。（我知道可以比较文件夹.. 但这并不总是最好的方法）
所以为主项目应用不同的颜色会非常方便。例如，以绿色而不是黄色显示该项目的文件夹 - 这样可以避免在错误的“方向”上复制粘贴。

有任何想法吗？还是其他提示？

![示例截图](../Images/b1e3c03fd5cbd1f2eff8a1fa23fcfd68.png)

**编辑：** 添加图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:31:45.027

Eclipse 没有爆炸化妆包 :D

如果您的项目在版本控制下，您可以使用标记文本标签指定自定义文件/文件夹/项目装饰器。

因此请参见 Window->Preferences->Team->...->Label Decoration

# java - 无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储

> ID：10734587
> 
> 赞同：6
> 
> 时间：2012-05-24T09:21:10.437
> 
> 标签：java, eclipse, rcp

我正在研究 Eclipse RCP，我收到了这个错误

* * *

Java 运行时环境检测到一个致命错误：

EXCEPTION_ACCESS_VIOLATION (0xc0000005) 在 pc=0x000007fef54b88ee, pid=3192, tid=5324

JRE 版本：7.0_02-b13 Java VM：Java HotSpot(TM) 64 位服务器 VM（22.0-b10 混合模式 windows-amd64 压缩 oops）有问题的框架：C [jscript9.dll+0x888ee]

无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储

包含更多信息的错误报告文件保存为：F:\Eclipse RCP\hs_err_pid3192.log

如果您想提交错误报告，请访问： [http](http://bugreport.sun.com/bugreport/crash.jsp) ://bugreport.sun.com/bugreport/crash.jsp 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T10:06:49.827

仅作记录，这可能是由 Windows UAC 引起的，请参阅[java.com 的描述](https://java.com/en/download/help/exception_access.xml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T21:54:12.540

由于您尚未接受任何答案，因此此错误的可能原因之一是某些具有**主**构造函数的类，而该类不是默认活动。解决问题：

1.  运行配置。
2.  在午餐配置树中，如果列出，则从**java 应用程序**中删除该类。（但将**android 应用程序**保留在午餐应用程序树中）

# javascript - 如何将项目添加到剑道 ui 网格的数据源

> ID：10734588
> 
> 赞同：10
> 
> 时间：2012-05-24T09:21:13.510
> 
> 标签：javascript, grid, kendo-ui

我已经成功创建了一个 kendo.data.dataSource，并且能够将它绑定到我页面上的 KendoUI Grid。

但是当我尝试`dataSource.insert(0, [a : "b"]);`删除之前存在的数据时。

我的示例代码如下：

```
var tempSource = new kendo.data.DataSource({
     data: [{"ID":1,"Name":"Cliente 1","NameID":"1 - Cliente 1"},{"ID":2,"Name":"Cliente 2","NameID":"2 - Cliente 2"}]
}); 
```

这就是我绑定到网格的方式：

```
$("#association-grid").kendoGrid({
height: 99,
columns:
[
    {
        field: "ID",
        title: "ID"
    },
    {
        field: "Name",
        title: "Name"
    },
    {
        field: "NameID",
        title: "NameID"
    }
],

dataSource: tempSource
}); 
```

这就是我添加新项目的方式：

```
tempSource.insert(0, { ID: "John Smith", Name: "Product Description", NameID: "123 1st Street" }); 
```

如果我在将数据绑定到 Grid 之前执行添加，则会丢失最初在 dataSource 对象上的前两项。

总之：我有一个预先创建的数据源绑定到一个网格。我希望能够向数据源添加一个新项目，然后刷新 Grid 以便出现新项目。

谢谢，

VRC

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-24T09:47:08.663

试试这个：

```
dataSource.add({ name: "John Smith", description: "Product Description", address: "123 1st Street" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T10:38:46.953

```
var grid = $("#itemsGrid").data("kendoGrid");

                    for (var i = 0; i < data.length; i++) {

                        grid.dataSource.insert(data[i]);
                    } 
```

> 将新记录插入网格数据源

# java - 如何在 Eclipse 中使用 reg 表达式查找 System.out.println 并将其替换为 log.info

> ID：10734593
> 
> 赞同：2
> 
> 时间：2012-05-24T09:21:38.237
> 
> 标签：java, eclipse

我有一个旧的 java 项目，其中包含 100 多个源文件，我需要为其添加 log4j，需要将 System.Out.println 中的所有数据附加到 log.info。查找并替换为 reg 表达式可能会帮助我解决这个问题。我正在使用日食 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:25:30.393

您可以使用 eclipse 功能搜索功能，它也非常适合在文件中搜索。它位于 Eclipse 工具栏搜索>Java 搜索

在搜索字符串中键入方法名称然后选择“方法”单选框。并点击搜索。

这是不言自明的，你可以搜索方法，额外的构造函数

如果您还想在文件名中搜索字符串，这也非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:39:12.093

在 Eclipse 中，我会使用 Ctrl+H 来调出搜索菜单。遍历顶部的选项卡，直到进入“文件搜索”，输入搜索字符串“System.out.println(”，告诉它在项目中搜索 *.java 文件，然后点击替换按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:30:33.367

* * *

sed -i "s/System.out.println/log.info/g" `grep System.out.println -rl /path`

# c# - 为什么要将派生类的实例分配给类型不是实例之一，而是其基类的变量

> ID：10734603
> 
> 赞同：1
> 
> 时间：2012-05-24T09:22:20.513
> 
> 标签：c#, polymorphism

我有5年的经验。但老实说，虽然我知道并使用这个结构......

```
Baseclass bc = new DerivedClass(); 
```

我不知道它实际上做了什么，不是真的，不是真的。它是派生类还是基类？而且我知道如果我调用 bc.Method() 我将获得派生类方法。但只有当我使用新关键字或覆盖或其他东西时。老实说，我在这里开始有点模糊，我想我需要回到基础，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:36:15.870

您正在创建 DerivedClass 的实例并将其分配给 BaseClass 类型的变量。如果你有一个像基类 Animal 这样的东西，它有两个派生类 Fish 和 Dog，但是你不知道哪个会被实例化，这在你的上下文中并不重要，因为你要调用一个定义的方法在基类中。例如你可以有这样的东西：

```
Animal a;
if (whatever you want)
    a = new Dog();
else
    a = new Fish();
a.Feed(); 
```

使用修饰符时要小心，因为如果你在 Animal 中用 virtual 定义 Feed 并在 Fish 中用 override 重新定义它，Fish 版本将被执行（它在执行时被链接）。如果您没有将基本版本标记为虚拟并将 Fish 版本标记为新版本，则会执行 Animal 版本（它在编译时链接）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:26:46.180

它创建一个实例`DerivedClass`并将其[隐式转换](http://msdn.microsoft.com/en-us/library/ms173105%28v=vs.100%29.aspx)为 type `Baseclass`。

正如我假设的那样编译它意味着要么`DerivedClass`继承自`Baseclass`，例如：

```
class DerivedClass : Baseclass
{
} 
```

或者有一个[隐式转换运算符](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.100%29.aspx)用于在这些类型之间进行转换，例如

```
class DerivedClass
{
    public static implicit operator Baseclass(DerivedClass d)
    {
        // return a Baseclass here
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:33:24.440

*使用以下*

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class Employee : Person
{
    public string RoleName { get; set; }
} 
```

如果我们创建一个 的新实例`Employee`，但实际上我们的变量声明是`Person`，那么所有将发生的只是隐式转换为`Person`，这意味着我们将无法访问 中的任何方法或属性`Employee`。`Employee`我想如果 的构造函数影响 的构造函数，这可能很有用`Person`，但我们不关心 中的任何内容`Employee`，但我不推荐它。相反，我建议构建一个利用更清晰的多态性的方法。例如，当派生对象用作参数时，实际上参数类型是其基类之一。

```
public void DoSomething(Employee employee)
{
    // here we do something with an employee
    // ...

    string fullName = GetTheirFullName(employee);
}

public string GetTheirFullName(Person person)
{
    return (person.FirstName + " " + person.LastName).Trim();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:26:26.977

它只是创建一个实例`DerivedClass`并将其分配给类型为 BaseClass 的 bc

# mono - 无法在 Windows 7 上为 android 安装单声道

> ID：10734604
> 
> 赞同：1
> 
> 时间：2012-05-24T09:22:22.077
> 
> 标签：mono, windows-installer, xamarin.android

这是登录[http://pastebin.com/jqjhqjdR的链接](http://pastebin.com/jqjhqjdR)

它已经下载了大约 750MB 以上的数据，但仍在抱怨。我也以管理员权限运行 setup.exe。

如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:59:41.727

问题是您的机器上没有足够的空间来安装它。这是日志附加内容：

> [信息] MSI (s) (88:E0) [14:37:14:059]：产品：适用于 Android 4.2.1 的 Mono -- 磁盘已满：磁盘空间不足 -- 卷：'C:'；所需空间：7,17,101 KB；可用空间：6,85,744 KB。释放一些磁盘空间并重试。[信息] 磁盘已满：磁盘空间不足 -- 卷：'C:'；所需空间：7,17,101 KB；可用空间：6,85,744 KB。释放一些磁盘空间并重试。[信息] 操作于 14:37:14 结束：InstallValidate。返回值 3。

附带说明一下，要轻松识别 MSI 失败的位置，您可以查看日志中的“值 3”。如果标准操作或自定义操作返回此值，则表示安装已停止。当然，如果日志是用另一种语言生成的，请使用该语言中与“值”一词等效的词。

# php - 在 Ion Auth - Codeigniter 中检索用户的组 ID

> ID：10734606
> 
> 赞同：7
> 
> 时间：2012-05-24T09:22:33.923
> 
> 标签：php, codeigniter, codeigniter-2, ion-auth

我将 Ion Auth 用于我的 codeigniter 应用程序，除了一件事之外，一切似乎都很好。

我需要显示用户列表以及他们所在的组。如何在不制作自己的模型并查询它的情况下检索特定用户的组 ID。

`$this->ion_auth->user($id)->row();`不检索组 ID。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T11:34:28.010

Ion Auth has updated and removed the **get_user** function in the latest version. As a result of this, the below should return the current group id of the logged in user:

```
$this->ion_auth->get_users_groups()->row()->id 
```

If you're wanting to get the group id of a particular user, you can pass the user id into the **get_users_groups** method.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T11:25:54.423

获取对象：

```
$user_groups = $this->ion_auth->get_users_groups($user->id)->result(); 
```

获取组名：

```
$this->ion_auth->get_users_groups($data['id'])->row()->name; 
```

就我而言：

```
$data['groups'] = $this->ion_auth->get_users_groups($data['id'])->row() 
```

您可以查看有关获取用户组的官方文档：

[http://benedmunds.com/ion_auth/#get_users_groups](http://benedmunds.com/ion_auth/#get_users_groups)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T16:36:36.163

我遇到了这个问题，因为我想在成功登录后将用户的 group_id(s) 添加到会话中。如果有人感兴趣，这就是我的做法（一旦我设法弄清楚一切都在哪里完成）。

在 ion_auth_model.php 中，我使用了 set_session 函数：

```
 public function set_session($user)
{

    $this->trigger_events('pre_set_session');

    $session_data = array(
        'identity'             => $user->{$this->identity_column},
        'username'             => $user->username,
        'email'                => $user->email,
        'user_id'              => $user->id, //everyone likes to overwrite id so we'll use user_id
        'old_last_login'       => $user->last_login
    );

    $this->session->set_userdata($session_data);

    $this->trigger_events('post_set_session');

    return TRUE;
} 
```

并将其修改为：

```
 public function set_session($user)
{

    $this->trigger_events('pre_set_session');

    $session_data = array(
        'identity'             => $user->{$this->identity_column},
        'username'             => $user->username,
        'email'                => $user->email,
        'user_id'              => $user->id, //everyone likes to overwrite id so we'll use user_id
        'old_last_login'       => $user->last_login
    );

    //get user group ids for user and pass to session
    $groups = $this->ion_auth->get_users_groups($user->id)->result();

    foreach ($groups as $row){
        $session_data['groups'][] = $row->id;
    }

    $this->session->set_userdata($session_data);

    $this->trigger_events('post_set_session');

    return TRUE;
} 
```

现在它向会话中写入一个名为 groups 的数组，该数组是用户所属的所有组的列表。

我唯一要做的另一件事是修改 Ion_auth.php 中的注销功能（在应用程序/库中），以确保通过添加取消设置组会话变量

```
$this->session->unset_userdata('groups'); 
```

到其他 unset_userdata() 语句的列表。

我知道我可能应该只是扩展库/模型以保持核心不变，但你可以接受我所做的并轻松地做到这一点。

希望这可以帮助某人。

抢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:31:23.510

尝试将此添加到 ion_auth_model.php （或将查询放在其他地方）

```
/**
 * get_all_users_with_group
 *
 * @return array
 **/
public function get_all_users_with_group()
{
    $this->trigger_events('get_all_users_with_groups');

    return $this->db->select(
        $this->tables['users'].'.*, '.
        $this->tables['users_groups'].'.'.$this->join['groups'].' as group_id, '.
        $this->tables['groups'].'.name as group_name, '.
        $this->tables['groups'].'.description as group_desc'
        )
    ->join($this->tables['users_groups'], $this->tables['users_groups'].'.'.$this->join['users'].'='.$this->tables['users'].'.id')
    ->join($this->tables['groups'], $this->tables['users_groups'].'.'.$this->join['groups'].'='.$this->tables['groups'].'.id')
    ->get($this->tables['users']);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T18:18:38.320

在控制器中使用：

```
$groups = array(1,2,3,4);
            $this->data['list_staff'] = $this->ion_auth->users($groups)->result(); // выбираем всех teachers из зарегистрированных пользователей
            foreach ($this->data['list_staff'] as $k => $one_staff)
            {
                $this->data['list_staff'][$k]->groups = $this->ion_auth->get_users_groups($one_staff->id)->result();
            } 
```

并考虑使用：

```
<?php foreach($list_staff as $one):?> 
    <?php foreach ($one->groups as $group):?>
                                    <?php echo $group->description;?>,
                                <?php endforeach?> 
<?endforeach;?> 
```

但是如何查询以获取当前登录用户的组（例如在我的个人资料中）我找到了下一个决定。控制器： `$this->data['this_user_groups'] = $this->ion_auth->get_users_groups()->result();` 并仅查看：

```
<?php foreach ($this_user_groups as $group):?>
                                <?php echo $group->description;?>,
                            <?php endforeach?> 
```

# wpf - 复制到输出目录文件删除

> ID：10734614
> 
> 赞同：0
> 
> 时间：2012-05-24T09:22:57.177
> 
> 标签：wpf

我发现要使用 mediaelement 播放视频文件，我们需要将文件的复制到输出目录设置为始终复制。是否有任何选项可以在使用后从输出目录中自动删除文件？因为如果应用程序播放了数百个视频，那么它会占用大量存储空间，对吗？因为据我所见，这个复制到输出目录将创建文件的副本，从它的原始源路径。请赐教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:38:24.870

您不需要将文件复制到输出目录，您可以按如下方式设置源：

```
mediaElement.Source = new Uri (System.IO.Path.Combine(dirWithVids, fileName) 
                               ,UriKind.RelativeOrAbsolute) 
```

# c# - 如果出现 DirectoryNotFound 异常，我可以告诉不存在的路径吗？

> ID：10734617
> 
> 赞同：0
> 
> 时间：2012-05-24T09:23:08.737
> 
> 标签：c#, exception, .net

我正在构建一个应用程序，它将文件从各种网络驱动器复制或移动到各种网络驱动器。在我看来，`File.Move`并`File.Copy`抛出：

> System.IO.DirectoryNotFoundException：找不到路径的一部分

由于运行应用程序的用户的权限问题。但是异常消息中并没有包含应用程序找不到哪个文件夹的信息（ex.Message只有`Could not find a part of the path`，没有内部异常），因此用户很难通过查看直接异常消息。

有没有办法找到哪个文件夹导致抛出异常？[异常](http://msdn.microsoft.com/en-us/library/system.io.directorynotfoundexception.aspx)的文档似乎没有显示任何属性。

# hibernate - 使用 HibernateTemplate 将数据插入数据库

> ID：10734630
> 
> 赞同：1
> 
> 时间：2012-05-24T09:24:01.730
> 
> 标签：hibernate, dao

我是hibernate和spring框架的初学者。我想使用休眠模板插入数据库。我的 DAO 代码：

```
public void save(News transientInstance) {
    log.debug("saving News instance");
    try {
        save(transientInstance);
        log.debug("save successful");
    } catch (RuntimeException re) {
        log.error("save failed", re);
        throw re;
    }
} 
```

控制器

```
public void insert(NewsForm newsForm, RequestContext context) {
    NewsDAO NewsDAO = (NewsDAO) ApplicationContext.getApplicationContext().getBean("NewsDAO");

    News newNews = new News();
    Timestamp date = new Timestamp(System.currentTimeMillis());
    newNews.setDate(date);
    newNews.setTitle(newsForm.getTitle());
    newNews.setDescription(newsForm.getDescription());
    newNews.setBody(newsForm.getBody());
    newNews.setStatus(newsForm.getStatus());
    newNews.setUpdateDate(date);
    NewsDAO.save(newNews);
} 
```

错误是

```
Caused by: java.lang.StackOverflowError
at org.apache.commons.logging.impl.Log4JLogger.debug(Log4JLogger.java:177)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68)
dao.NewsDAO.save(NewsDAO.java:68) ...etc 
```

这个 DAO 代码错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:46:55.373

你的save方法调用save方法，调用save方法，调用save方法，调用save方法，调用save方法，调用save方法，调用save方法，调用save方法，它调用保存方法...

替换`save(transientInstance)`为`hibernateTemplate.save(transientInstance)`。

（请尊重 Java 命名约定。变量以小写字母开头）。

# optimization - 在不打开文件的情况下操作/复制 .CSV 数据？

> ID：10734631
> 
> 赞同：0
> 
> 时间：2012-05-24T09:24:07.590
> 
> 标签：optimization, excel, vba

我正在尝试优化一些代码，这些代码将一些存储在 CSV 文件中的测试数据进行一些分析并将它们的数据复制到 Excel 表中。此代码通常一次运行数百个测试，每次测试大约需要 4.5 秒，因此有时可能需要数小时才能完成。

我查找了一些优化技术，并将每次测试的时间缩短了约 0.25 秒，但我认为大部分时间都被 excel 占用了，它必须先“打开”单个文件，然后才能对它们做任何事情。有没有办法更有效地做到这一点？

如果这会使事情变得更快，我愿意接受涉及使用另一种语言将文件编译成一个大文件的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:44:54.423

我会将它们作为文本而不是工作簿打开：

```
Sub ReadCSV()
    Dim MyString As String
    Open "C:\path\text.csv" For Input As #1 ' Open file for input. 
    Do While Not EOF(1) ' Loop until end of file.
        Line Input #1, MyString ' Read a line into variable
        Debug.Print MyString ' Print data to the Immediate window.
    Loop
    Close #1 ' Close file.

End Sub 
```

这将比作为工作簿打开*要快得多*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:24:22.200

我有这个功能可以处理大量的 CSV 文件。您需要在单元格“D11”中指明包含所有 CSV 文件的文件夹名称，并将它们合并为一个文件。我处理超过 200 个文件并使其快速完成。希望能帮助到你。

```
Sub CombineAllFilesInADirectory()
    Dim Path            As String 'string variable to hold the path to look through
    Dim FileName        As String 'temporary filename string variable
    Dim tWB             As Workbook 'temporary workbook (each in directory)
    Dim tWS             As Worksheet 'temporary worksheet variable
    Dim aWS             As Worksheet 'active sheet in master workbook
    Dim RowCount        As Long 'Rows used on master sheet
    Dim uRange          As Range 'usedrange for each temporary sheet
    Dim mWB_comb        As Workbook 'master workbook exclusivo de esta funcion

    Path = Sheets("CombineFiles").Range("D11").Value
    Application.EnableEvents = False 'turn off events
    Application.ScreenUpdating = False 'turn off screen updating
    Set mWB_comb = Workbooks.Add(1) 'create a new one-worksheet workbook
    Set aWS = mWB_comb.ActiveSheet 'set active sheet variable to only sheet in mWB
    If Right(Path, 1) <> Application.PathSeparator Then 'if path doesnt end in "\"
        Path = Path & Application.PathSeparator 'add "\"
    End If
    FileName = Dir(Path & "*.csv", vbNormal) 'set first file's name to filename variable
    Application.StatusBar = "reading files, please wait."
    Do Until FileName = "" 'loop until all files have been parsed
        If Path <> ThisWorkbook.Path Or FileName <> ThisWorkbook.Name Then
            Set tWB = Workbooks.Open(FileName:=Path & FileName) 'open file, set to tWB variable
            For Each tWS In tWB.Worksheets 'loop through each sheet
                Set uRange = tWS.Range("A4", tWS.Cells(tWS.UsedRange.Row + tWS.UsedRange.Rows.count - 1, _
                tWS.UsedRange.Column + tWS.UsedRange.Columns.count - 1)) 'set used range
                If RowCount + uRange.Rows.count > 65536 Then 'if the used range wont fit on the sheet
                    aWS.Columns.AutoFit 'autofit mostly-used worksheet's columns
                    Set aWS = mWB_comb.Sheets.Add(After:=aWS) 'add a new sheet that will accommodate data
                    RowCount = 0 'reset RowCount variable
                End If
                If RowCount = 0 Then 'if working with a new sheet
                    aWS.Range("A1", aWS.Cells(3, uRange.Columns.count)).Value = tWS.Range("A1", _
                    tWS.Cells(3, uRange.Columns.count)).Value 'copy headers from tWS
                    RowCount = 3 'add one to rowcount
                End If
                aWS.Range("A" & RowCount + 1).Resize(uRange.Rows.count, _
                uRange.Columns.count).Value = uRange.Value 'move data from temp sheet to data sheet
                RowCount = RowCount + uRange.Rows.count 'increase rowcount accordingly
            Next 'tWS
            tWB.Close False 'close temporary workbook without saving
        End If
        FileName = Dir() 'set next file's name to FileName variable
    Loop
    Application.StatusBar = "Ready"
    mWB_comb.Sheets(1).Select 'select first data sheet on master workbook
   Application.EnableEvents = True 're-enable events
    Application.ScreenUpdating = True 'turn screen updating back on
     'Clear memory of the object variables
    Set tWB = Nothing
    Set tWS = Nothing
    Set mWB_comb = Nothing
    Set aWS = Nothing
    Set uRange = Nothing
End Sub 
```

# ruby-on-rails - 如何使用“linkedin”gem 为用户获得推荐？

> ID：10734632
> 
> 赞同：0
> 
> 时间：2012-05-24T09:24:09.493
> 
> 标签：ruby-on-rails, linkedin

我能够获取用户信息，例如用户连接、教育详细信息和工作历史。

是否可以使用此功能为登录用户获得推荐

```
gem 'linkedin', :git => “git://github.com/pengwynn/linkedin.git" 
```

请为我提供示例或执行相同操作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:38:06.273

```
recom = client.profile(:fields=>%w(recommendations-received))
recom.recommendations_received.all 
```

更多信息可以在[Linkedin API中找到](https://developer.linkedin.com/documents/profile-fields#recommendations)

# java - 制作圆圈，然后在鼠标拖动事件上移动圆圈

> ID：10734633
> 
> 赞同：1
> 
> 时间：2012-05-24T09:24:11.607
> 
> 标签：java, swing, mouseevent, geometry, paintcomponent

如何在鼠标拖动事件上绘制圆圈，然后如何在 Java 中的鼠标拖动事件上移动该圆圈？

我的代码如下。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class r extends JPanel {

    public int x1, x2, y1, y2, r, w, h,xDist,yDist;
    public static boolean flag = false, pressFlag = false;

    public r() {
        setBackground(Color.WHITE);
        addMouseListener(new MouseAdapter() {

            public void mousePressed(MouseEvent m) {
//                pressFlag = true;
                if (r > (int) Math.sqrt(Math.abs(m.getX() - x1) * Math.abs(m.getX() - x1) + Math.abs(m.getY() - y1) * Math.abs(m.getY() - y1))) {
                    flag = true;
                    yDist=xDist=x2 = y2 = 0;
                } else {
                    x1 = y1 = 0;
                    r=x2 = y2 = 0;
                    x1 = m.getX();
                    y1 = m.getY();
                }
                 repaint();
            }

            public void mouseReleased(MouseEvent m) {
                w = x2 - x1;
                h = y2 - y1;
                r = (int) Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
                flag = false;
            }
        });
        addMouseMotionListener(new MouseMotionAdapter() {

            public void mouseDragged(MouseEvent m) {
                if (flag && (x2!=0 && y2!=0)) {
                    xDist=(m.getX()-x2);
                    yDist=(m.getY()-y2);
                }
                x2 = m.getX();
                y2 = m.getY();

                repaint();
            }
        });
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (flag) {
            x1=x1+xDist;
            y1=y1+yDist;
            g.drawOval(x1, y1, w, h);
        } else {
            g.drawOval(x1, y1, x2 - x1, y2 - y1);
        }

    }
}

public class q extends JFrame {

    public static void main(String[] args) {
        JFrame jFrame = new JFrame();
        jFrame.setSize(300, 300);
        jFrame.add(new r());
        jFrame.setVisible(true);
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T12:01:52.443

这些方面的东西对我很有效：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Ellipse2D;

import javax.swing.JFrame;
import javax.swing.JPanel;

class DragCircle extends JPanel {

    private final class MouseDrag extends MouseAdapter {
        private boolean dragging = false;
        private Point last;

        @Override
        public void mousePressed(MouseEvent m) {
            last = m.getPoint();
            dragging = isInsideEllipse(last);
            if (!dragging) {
                x = last.x;
                y = last.y;
                width = 0;
                height = 0;
            }
            repaint();
        }

        @Override
        public void mouseReleased(MouseEvent m) {
            last = null;
            dragging = false;
            repaint();
        }

        @Override
        public void mouseDragged(MouseEvent m) {
            int dx = m.getX() - last.x;
            int dy = m.getY() - last.y;
            if (dragging) {
                x += dx;
                y += dy;
            } else {
                width += dx;
                height += dy;
            }
            last = m.getPoint();
            repaint();
        }
    }

    private int x;
    private int y;
    private int width;
    private int height;

    private MouseDrag mouseDrag;

    public DragCircle() {
        setBackground(Color.WHITE);
        mouseDrag = new MouseDrag();
        addMouseListener(mouseDrag);
        addMouseMotionListener(mouseDrag);
    }

    public boolean isInsideEllipse(Point point) {
        return new Ellipse2D.Float(x, y, width, height).contains(point);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawOval(x, y, width, height);
    }

    public static void main(String[] args) {
        JFrame jFrame = new JFrame();
        jFrame.setSize(300, 300);
        jFrame.add(new DragCircle());
        jFrame.setVisible(true);
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

# php - jQuery 时间前与 php 时间戳

> ID：10734639
> 
> 赞同：0
> 
> 时间：2012-05-24T09:24:15.313
> 
> 标签：php, jquery

我正在使用 jQuery timeago 在我的网站上显示评论发布时间。问题是它显示的时间与预期的完全不同（10 小时不同）。在我的本地服务器中它工作正常。

[时间前： http](http://timeago.yarp.com/) ://timeago.yarp.com/

```
/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.11.1
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2011, Ryan McGeary (ryanonjavascript -[at]- mcgeary [*dot*] org)
 */
(function($) {
  $.timeago = function(timestamp) {
    if (timestamp instanceof Date) {
      return inWords(timestamp);
    } else if (typeof timestamp === "string") {
      return inWords($.timeago.parse(timestamp));
    } else {
      return inWords($.timeago.datetime(timestamp));
    }
  };
  var $t = $.timeago;

  $.extend($.timeago, {
    settings: {
      refreshMillis: 60000,
      allowFuture: false,
      strings: {
        prefixAgo: null,
        prefixFromNow: null,
        suffixAgo: "ago",
        suffixFromNow: "from now",
        seconds: "less than a minute",
        minute: "about a minute",
        minutes: "%d minutes",
        hour: "about an hour",
        hours: "about %d hours",
        day: "a day",
        days: "%d days",
        month: "about a month",
        months: "%d months",
        year: "about a year",
        years: "%d years",
        wordSeparator: " ",
        numbers: []
      }
    },
    inWords: function(distanceMillis) {
      var $l = this.settings.strings;
      var prefix = $l.prefixAgo;
      var suffix = $l.suffixAgo;
      if (this.settings.allowFuture) {
        if (distanceMillis < 0) {
          prefix = $l.prefixFromNow;
          suffix = $l.suffixFromNow;
        }
      }

      var seconds = Math.abs(distanceMillis) / 1000;
      var minutes = seconds / 60;
      var hours = minutes / 60;
      var days = hours / 24;
      var years = days / 365;

      function substitute(stringOrFunction, number) {
        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;
        var value = ($l.numbers && $l.numbers[number]) || number;
        return string.replace(/%d/i, value);
      }

      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||
        seconds < 90 && substitute($l.minute, 1) ||
        minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||
        minutes < 90 && substitute($l.hour, 1) ||
        hours < 24 && substitute($l.hours, Math.round(hours)) ||
        hours < 42 && substitute($l.day, 1) ||
        days < 30 && substitute($l.days, Math.round(days)) ||
        days < 45 && substitute($l.month, 1) ||
        days < 365 && substitute($l.months, Math.round(days / 30)) ||
        years < 1.5 && substitute($l.year, 1) ||
        substitute($l.years, Math.round(years));

      var separator = $l.wordSeparator === undefined ?  " " : $l.wordSeparator;
      return $.trim([prefix, words, suffix].join(separator));
    },
    parse: function(iso8601) {
      var s = $.trim(iso8601);
      s = s.replace(/\.\d\d\d+/,""); // remove milliseconds
      s = s.replace(/-/,"/").replace(/-/,"/");
      s = s.replace(/T/," ").replace(/Z/," UTC");
      s = s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"); // -04:00 -> -0400
      return new Date(s);
    },
    datetime: function(elem) {
      // jQuery's `is()` doesn't play well with HTML5 in IE
      var isTime = $(elem).get(0).tagName.toLowerCase() === "time"; // $(elem).is("time");
      var iso8601 = isTime ? $(elem).attr("datetime") : $(elem).attr("title");
      return $t.parse(iso8601);
    }
  });

  $.fn.timeago = function() {
    var self = this;
    self.each(refresh);

    var $s = $t.settings;
    if ($s.refreshMillis > 0) {
      setInterval(function() { self.each(refresh); }, $s.refreshMillis);
    }
    return self;
  };

  function refresh() {
    var data = prepareData(this);
    if (!isNaN(data.datetime)) {
      $(this).text(inWords(data.datetime));
    }
    return this;
  }

  function prepareData(element) {
    element = $(element);
    if (!element.data("timeago")) {
      element.data("timeago", { datetime: $t.datetime(element) });
      var text = $.trim(element.text());
      if (text.length > 0) {
        element.attr("title", text);
      }
    }
    return element.data("timeago");
  }

  function inWords(date) {
    return $t.inWords(distance(date));
  }

  function distance(date) {
    return (new Date().getTime() - date.getTime());
  }

  // fix for IE6 suckage
  document.createElement("abbr");
  document.createElement("time");
}(jQuery)); 
```

我使用将日期和时间保存到我的数据库`date('r',time());`

我正在使用显示时间`<abbr class="timeago" title="2012-05-24 02:18:59"></abbr>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:30:08.353

它的区域问题。最好在服务器中使用 UTC 时间。您可以通过在您的页面中使用以下 javascript 来获取区域。

```
var d = new Date(); var zone = -d.getTimezoneOffset()/60; 
```

# actionscript-3 - 将属性添加到按钮或其他类型的对象

> ID：10734647
> 
> 赞同：0
> 
> 时间：2012-05-24T09:24:50.273
> 
> 标签：actionscript-3

我总是使用语法为 MovieCLips 创建附加属性

```
myMC.myProperty 
```

没有任何声明...但是我只能将此方法与 MovieClips 一起使用。如果我想向按钮或任何不同类型的对象添加属性怎么办？我需要扩展课程吗？你能建议我怎么做吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:26:56.197

您可以在运行时向影片剪辑添加属性，因为`MovieClip`它是`dynamic`类。如果类不是动态的，您应该扩展它以创建方法和属性。 [阅读动态类](http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_10.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:20:07.653

1.  子类是主要解决方案。

2.  Next 仅适用于 mx 组件（flex sdk 3）。大多数组件都有*data : Object*属性，您可以自由地使用它来存储数据。

3.  [猴子修补](http://www.youtube.com/watch?v=ryAhC1vw8Os)有时是唯一的方法。它允许您向 flex sdk 类添加自定义属性。我认为你不应该在你的情况下使用它。但是我用它来改变被flex sdk 中的*private*关键字锁定的核心逻辑。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:59:53.860

我倾向于为几乎所有东西创建自定义类。
我会扩展相关类并为您的新属性设置一个`private var`。然后，您可以将值传递给构造函数或添加 getter/setter 方法以在外部调用。

```
 private function _myProperty:int;

    public function get myProperty():int
    {
        return _myProperty;
    }

    public function set myProperty(newVal:int):void
    {
        _myProperty = newVal;
    } 
```

Getter/setter 方法添加了几行代码，这些代码看似不必要，但在大型项目中，当您发现正在设置属性并且您不知道原因时，您可以在您的`set myProperty`

# objective-c - 在 NSThread 中退出

> ID：10734648
> 
> 赞同：0
> 
> 时间：2012-05-24T09:25:03.377
> 
> 标签：objective-c, ios, nsthread

我正在写游戏。我有 StartScene 类：在 StartScene.h 中：

```
@interface StartScene : UIView <UITextFieldDelegate> {
    ...
    PlayScene* tView;
    NSThread* gameMechThread;
} 
```

PlayScene 是一个继承类

```
@interface PlayScene : StartScene {
} 
```

所以在我调用 PlayScene 视图时，我调用

```
- (void)gameMechThread {
    gameMechThread = [[NSThread alloc]initWithTarget:self selector:@selector(gameMech) object:nil];
    [gameMechThread start];
 } 
```

gameMech 是一种方法，所有主要的游戏内容都在其中执行。我在 StartScene 类中有一个暂停按钮和该菜单的所有按钮。现在的问题是重启按钮。所以当我通过点击暂停按钮调用暂停方法（即在 StartScene 类中）时，

```
tView.GameState=GamePaused; 
```

这是在暂停方法中执行的。游戏状态发生变化。在 PlayScene 类中，我得到了一直被调用的 pause 方法

```
-(void)pause {
    while (self.gameState==GamePaused) {
    }
    if (self.gameState == GameRestarted) {
//        self.threadStop = 2;
        [NSThread exit];
    }
//  if (gameMechThread.isCancelled) {
//       [NSThread exit];
//    }
} 
```

所以游戏暂停了。当我按下重启按钮时

```
-(void)restart {
    [gameMechThread cancel];
    [tView.player stop];
    tView.gameState=GameRestarted;
    self.gameState=GameRestarted;
    ...
 //   while (tView.threadStop != 2) { }
 //   tView.threadStop = 1;
    while (gameMechThread.isExecuting) { }

    [tView removeFromSuperview];
    [self startGame];
} 
```

叫做。一个问题是有`[gameMechThread cancel];`，但是

```
if (gameMechThread.isCancelled) {
       [NSThread exit];
} 
```

好像它真的被取消了一样不起作用，所以我现在评论它。 `threadStop`是一个属性，但在 PlayScene 类中它不是在主线程上更改的，因此该条件也无法正常工作。

而现在的问题`(gameMechThread.isExecuting)`。在执行之前调用了 while 条件`[NSThread exit];`，但程序不会停留在 while 条件中，直到`[NSThread exit];`执行，就好像该线程已经停止一样。`[self startGame];`在调用 ( ) 中的新线程之前，请您帮忙删除线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:58:52.913

`return`在 NSThread 中 使用。

```
if (gameMechThread.isCancelled) {
       return;
} 
```

# tableview - 如何在 JavaFX 2.0 中的另一个屏幕 TextField 上填充 TableView 数据

> ID：10734649
> 
> 赞同：0
> 
> 时间：2012-05-24T09:25:10.793
> 
> 标签：tableview, textfield, javafx-2

我在将数据从一个屏幕中的表填充到另一个屏幕中的文本字段时遇到问题。我有两个类 FirstClass 包含一个文本框和一个按钮。按下按钮会打开第二个窗口，其中包含一个值表。当用户双击一行时，该行的第二列的值应该插入到 FirstClass 的文本框中。附上这两个类的代码。感谢你在期待。

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class FirstClass extends Application {
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(final Stage primaryStage) {
    primaryStage.setTitle("First Class");

    GridPane gridpane = new GridPane();
    gridpane.setPadding(new Insets(5));
    gridpane.setHgap(5);
    gridpane.setVgap(5);

    final TextField userNameFld = new TextField();
    gridpane.add(userNameFld, 1, 1);
    Button btn = new Button();
    btn.setText("Show Table");
    gridpane.add(btn, 1, 3);

    btn.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
            String a = TableClass.showDialog(primaryStage, true, "Table Window" );
            userNameFld.setText(a);
        }
    });

    StackPane root = new StackPane();

    Scene scene =new Scene(root, 300, 250);

    root.getChildren().addAll(gridpane);
    primaryStage.setScene(scene);
    primaryStage.show();
 }
}

import javafx.beans.property.SimpleStringProperty;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.StackPane;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class TableClass extends Stage {

private static TableClass dialog;
private static String value = "";

public static class Person {
    private final SimpleStringProperty firstName;
    private final SimpleStringProperty lastName;

    private Person(String fName, String lName) {
        this.firstName = new SimpleStringProperty(fName);
        this.lastName = new SimpleStringProperty(lName);
    }

    public String getFirstName() {
        return firstName.get();
    }
    public void setFirstName(String fName) {
        firstName.set(fName);
    }

    public String getLastName() {
        return lastName.get();
    }
    public void setLastName(String fName) {
        lastName.set(fName);
    }
}

 private TableView<Person> table = new TableView<Person>();
    private final ObservableList<Person> data = 
        FXCollections.observableArrayList(
            new Person("JACK", "BROWN"),
            new Person("JOHN", "VIANNEYS"),
            new Person("MICHAEL", "NELSON"),
            new Person("WILLIAM", " CAREY")
        );

public TableClass(Stage owner, boolean modality, String title) {
    super();
    initOwner(owner);
    Modality m = modality ? Modality.APPLICATION_MODAL : Modality.NONE;
    initModality(m);
    setOpacity(1);
    setTitle(title);

    StackPane root = new StackPane();

    Scene scene = new Scene(root, 750, 750);

    setScene(scene);
    GridPane gridpane = new GridPane();
    gridpane.setPadding(new Insets(5));
    gridpane.setHgap(5);
    gridpane.setVgap(5);

    TableColumn firstNameCol = new TableColumn("First Name");
    firstNameCol.setMinWidth(100);
    firstNameCol.setCellValueFactory(
    new PropertyValueFactory<Person,String>("firstName")
    );

    TableColumn lastNameCol = new TableColumn("Last Name");
    lastNameCol.setMinWidth(200);
    lastNameCol.setCellValueFactory(
    new PropertyValueFactory<Person,String>("lastName")
    );

    table.setItems(data);
    table.getColumns().addAll(firstNameCol, lastNameCol);

    table.setOnMouseClicked(new EventHandler<MouseEvent>() {

           public void handle(MouseEvent me) {

                   if (me.getClickCount() >= 2) {
                       String  srr = table.getItems().get    (table.getSelectionModel().getSelectedIndex()).getLastName();
                       value = srr;
                       dialog.hide();
                      }
               }
        });

    gridpane.add(table, 1, 5,1,20 );
    root.getChildren().add(gridpane);
    }

public static String showDialog(Stage stg, Boolean a , String title){
      dialog = new TableClass( stg,a, title);
      dialog.show();
      return value;
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:35:49.247

快速简便的方法（但它引入了 2 个类之间的耦合）将传递`userNameFld`给您的`showDialog`方法并使其成为 TableClass 的成员。然后，您可以从 TableClass 类中更改其值。

更好的方法是[绑定](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)`userNameFld`to`value`的值。

# asp.net - 本地主机上的 Firefox 中的引导按钮？

> ID：10734650
> 
> 赞同：2
> 
> 时间：2012-05-24T09:25:11.107
> 
> 标签：asp.net, twitter-bootstrap

我正在开发一个 ASP.NET 4 应用程序并针对 http://localhost/mysite 进行测试 - 我花了一段时间研究 Firefox (v12.0) 中 Twitter Bootstrap 按钮的问题，它们看起来很奇怪。

但是我注意到，在测试时，如果我交换了 URL 并为我的机器的 FQDN 更改了“localhost”（例如[http://mymachine.mydomain.com/mysite](http://mymachine.mydomain.com/mysite)），那么它可以正常工作并按预期工作。

这是一个好消息，因为这意味着没有我必须修复的“错误”，但我很好奇它为什么会首先发生。

奇怪的行为如下：

'button' 标记如下（在这种情况下，a`<a>`看起来像一个按钮）：

```
<p><a class="btn btn-success" href="checkout.aspx"><i class="icon-shopping-cart icon-white"></i> Checkout</a></p> 
```

使用“真实”按钮时，我也有相同的行为，标记如下：

```
<p><input type="submit" name="ctl00$cphMainContent$btnProceedToCustomerDetails" value="Next: Your details" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$cphMainContent$btnProceedToCustomerDetails&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="cphMainContent_btnProceedToCustomerDetails" class="btn btn-primary" /></p> 
```

在这两种情况下，按钮都会呈现灰色、不可读的状态，然后当您将鼠标悬停在上面时，会以绿色“填充”，直到大约 75% 被填充，然后停止填充。

这是一些图片

这`<a class="btn btn-success">`

加载时（鼠标悬停前）

![页面加载时的按钮](../Images/d4a31fd12f1f1e9f0a60d82bf8bfce63.png)

当你将鼠标放在它上面时，它会在大约 0.5 秒内从下往上填充颜色，最终看起来像这样：

![在此处输入图像描述](../Images/3d7fb4adaadd2a611014640dd94a0e24.png)

这`<input type="submit" class="btn btn-primary">`

加载时（鼠标悬停前）

![在此处输入图像描述](../Images/46a44ae91f529e142151ccbf89184f0e.png)

鼠标悬停后，它再次从下往上填充颜色，大约在 0.5 秒内，看起来像这样：

![在此处输入图像描述](../Images/4ea83164bbb9cdfdef2d12d5b6b0cb29.png)

就像我说的，这仅在使用 Firefox 时发生，并且仅在查看 localhost 时发生。其他浏览器没问题。我正在使用新下载的 bootstrap.js 副本（今天下载），没有进行任何修改，我只包含了另一个 css 文件，即使我不包含它，它也是相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:48:30.157

我今天早些时候遇到了这个问题。这个链接： [twitter bootstrap button 在 Firefox 和 chrome 中奇怪地改变了渲染](https://stackoverflow.com/questions/10401270/twitter-bootstrap-button-changes-rendering-oddly-in-firefox-and-chrome)帮助了我。

在我的 CSS 中，我应用了以下内容：

```
.btn-primary, .btn-danger, .btn-success {    background-image: none;    filter: none;} 
```

有效。我的页面现在可以在 Firefox 中正确呈现。Chrome 对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:15:51.503

经过大量努力，我终于能够将这个问题归结为 Twitter Bootstrap 中的特定 CSS-Hack。

从of和其他类似类中删除`*`（星号）可解决此问题。`*background-image``btn-primary`

但问题本身并不在 CSS 中。它与实施有关。

例如，我使用 AjaxMin 来缩小和合并 CSS，因为`*property`它不是一个有效的 CSS，Ajaxmin 忽略了它渲染没有这些属性的最终 CSS。Buggy 按钮效果就是这样一种副作用。

# java - 使用应用程序引擎java调整图像大小

> ID：10734652
> 
> 赞同：0
> 
> 时间：2012-05-24T09:25:15.157
> 
> 标签：java, google-app-engine

我想使用 App Engine java 读取图像并调整其大小。

我无法找到如何从某个位置读取图像并将其保存在应用程序引擎中。

有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:58:29.983

您可以将上传的图像存储到 blobstore。阅读以下文档以了解如何使用 blobstore。

[https://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)

然后您可以使用图像服务来缩放图像：

[https://developers.google.com/appengine/docs/java/images/overview](https://developers.google.com/appengine/docs/java/images/overview)

# c# - 从 Web 应用程序中删除 .aspx 扩展名

> ID：10734658
> 
> 赞同：0
> 
> 时间：2012-05-24T09:25:43.667
> 
> 标签：c#, asp.net, .net, vb.net

我是 URLRewriting 的新手，并尝试在我的 web.config 中使用以下脚本删除 .aspx 扩展名

```
<configuration>
  <configSections>
     <section name="rewriteModule" type="RewriteModule.RewriteModuleSectionHandler, RewriteModule"/>
  </configSections>
 <connectionStrings>

<system.webServer>
    <rewrite>
      <rules>
           <rule name="Redirect to clean URL" stopProcessing="true">
          <match url="^([a-z0-9/]+).aspx$" ignoreCase="true"/>
          <action type="Redirect" url="{R:1}"/>
          </rule>
     </rules>
    </rewrite>
</system.webServer> 
```

但是，我没有成功。此外，以下代码块给了我一个错误。

```
 <httpHandlers>
       <add verb="*" path="*.aspx" 
            type="URLRewriter.RewriterFactoryHandler, URLRewriter" />
 </httpHandlers>

> Could not load file or assembly 'URLRewriter' or one of its
> dependencies. The system cannot find the file specified. 
```

我需要将重写引擎添加到我的 Web 应用程序吗？

我已经通过[这个链接](http://msdn.microsoft.com/en-us/library/ms972974#urlrewriting_topic3)，但我无法得到它。

有人可以向我建议一步一步的过程或示例脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T15:08:16.583

使用以下规则，每次都像魅力一样工作！

```
<rule name="san aspx">
  <!--Removes the .aspx extension for all pages.-->
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
  </conditions>
  <action type="Rewrite" url="{R:1}.aspx" />
</rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T13:21:00.313

这是一些不错的重写引擎，带有操作方法:)

[http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET](http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET)

[http://www.codeguru.com/csharp/.net/net_framework/article.php/c19535/RewriteNET--A-URL-Rewriting-Engine-for-NET.htm](http://www.codeguru.com/csharp/.net/net_framework/article.php/c19535/RewriteNET--A-URL-Rewriting-Engine-for-NET.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T13:36:56.087

好像您还没有在 Web 项目中为类 URLRewriter 添加 dll 引用。添加此引用以解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T13:55:38.940

（作为自己编写的替代方案）

IIS 7 URL 重写模块：

[http://www.microsoft.com/en-gb/download/details.aspx?id=7435](http://www.microsoft.com/en-gb/download/details.aspx?id=7435)

IIS 5/6：

[http://iirf.codeplex.com/](http://iirf.codeplex.com/)

# java - Java Web 服务中的共享类型

> ID：10734659
> 
> 赞同：0
> 
> 时间：2012-05-24T09:25:56.257
> 
> 标签：java, jax-ws

我正在构建一个 Web 应用程序，它有一个名为 Product 的类，我想与 JAX-WS Web 服务共享它。

基本上，Web 应用程序将 Product 类的实例发送到 Web 服务，Web 服务对其字段进行一些更改，并将其作为返回类型发回。

是否可以通过这种方式在 Java 中共享相同的类型？如果不是，解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:28:05.873

您需要将公共类打包到 JAR 文件中，并将其添加到客户端和服务中，就像任何其他 3rd 方 JAR 一样。

# jquery - 如何在jQuery中获取asp CssClass

> ID：10734661
> 
> 赞同：0
> 
> 时间：2012-05-24T09:26:05.863
> 
> 标签：jquery, asp.net

你能帮我在验证规则中获取 jquery 中的 asp CssClass 吗？这是我的代码，让我知道我在哪里做错了？

```
 $(document).ready(function() {
        $("#aspnetForm").validate({
            debug:true,
            ignore:("ignore"),
            rules: {
                <%=txtFirstname.UniqueID %>: {                       
                    required: true
                },
                <%=cmbTitle.UniqueID %>: {
                    required: true
                } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:56:25.080

您需要这样做（来源[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)）

```
$(document).ready(function() {
    $("#aspnetForm").validate({
        debug:true,
        ignore: ".ignore",
        rules: {
            <%=txtFirstname.UniqueID %>: {                       
                required: true
            },
            <%=cmbTitle.UniqueID %>: {
                required: true
            }
} 
```

# python - 脚本需要作为 Celery 任务运行。这有什么后果？

> ID：10734668
> 
> 赞同：0
> 
> 时间：2012-05-24T09:26:31.623
> 
> 标签：python, celery

我的任务是使用 opencv 编写脚本，该脚本稍后将作为 Celery 任务运行。这有什么后果？我需要注意什么？最后包含两行代码是否足够，或者我必须重写我的整个脚本？

我读到，Celery 是一个“基于分布式消息传递的异步任务队列/作业队列系统”，但我不会假装完全知道这一切意味着什么。

一旦获得更多详细信息，我会尝试更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:01:31.530

*   Celery 暗示了一个使用代理的守护进程（一些用于对任务进行排队的数据中心）。celeryd 守护进程和代理（RabbitMQ、redis、MongoDB 或其他）应始终在后台运行。
*   您的任务将被排队，这意味着它们不会同时发生。您可以选择最多同时运行多少个。其余的将等待其他人完成后再开始。这也意味着通常需要一些并发性，并且您必须创建与其他人一起做同样事情的任务。
*   Celery 不是用来运行脚本，而是用来运行任务，写成 python 函数。您当然可以从 Python 执行外部脚本，但您的入口点始终是 Python 函数。
*   Celery 使用 Kombu，它使用消息代理来分派任务。这意味着您传递给任务的数据应该是可序列化的。

# javascript - 使用模板时如何在 div 上添加可拖动功能

> ID：10734673
> 
> 赞同：1
> 
> 时间：2012-05-24T09:26:40.047
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我想在运行时在 div 上添加可拖动功能。使用以下代码生成 div 的 id：

```
var Exp=0;
view.renderFunction = function(id1){
  var id= id1 + Exp++;
  $("#"+id).draggable();
}; 
```

这是我删除 div 时动态生成 id 的函数。但是当我应用 draggable 方法时它不能移动。我怎样才能移动div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:33:20.223

它会工作，已经测试过了。

确保以下几点：

*   确保你知道什么是 Exp++（你没有在问题中提到它）
*   您调用 draggable() 的元素是有效的 DOM 元素。
*   尝试在文档就绪或 DOM 就绪时调用它

这是一个工作小提琴：http: [//jsfiddle.net/gopi1410/ByWCS/](http://jsfiddle.net/gopi1410/ByWCS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:56:57.197

您是在拖动自身时遇到麻烦，还是仅将其拖放到任何地方都会出现问题？这应该很简单。这是一个示例，显示将子 div 从一个父 div [拖动到另一个：如何启用将 div 从一个父 div 拖动到另一个](http://jqfaq.com/how-to-enable-dragging-a-div-from-one-parent-div-and-dropping-into-another-parent-div/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:30:19.193

```
var id= id1 + Exp++; 
$("#"+id).draggable(); 
```

什么是`Exp++`，您确定要调用`.draggable()`现有元素吗？另外，那个 renderFunction 是否曾经用 id 调用过？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:31:25.493

我使用了 kinetic.js，现在它工作正常

# windows-live-id - Windows Live ID/Live 连接，如何获取当前登录用户的电子邮件

> ID：10734675
> 
> 赞同：1
> 
> 时间：2012-05-24T09:26:43.320
> 
> 标签：windows-live-id, live-connect-sdk

首先，我正在使用 Live connect，因为文档说 live id 将被过时

当用户使用 Live Connect 登录我的网站时，我想获取他/她在登录时输入的电子邮件地址。

我找不到获取此类信息的方法，这太奇怪了。

从 /me URL，我可以获取用户名、id、本地等，但无法获取电子邮件地址。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:12:28.433

通过添加范围 wl.emails 成功

# objective-c - 显示预加载的搜索结果？

> ID：10734681
> 
> 赞同：12
> 
> 时间：2012-05-24T09:27:08.937
> 
> 标签：objective-c, ios, uisearchbar, xcode4.3, uisearchdisplaycontroller

我有一个带有搜索栏的非 tableview 视图，虽然它工作得很好，但当搜索栏中有一个空字符串时，搜索显示控制器隐藏了 table 视图并覆盖了一个暗色的视图。我希望它在搜索栏中显示空字符串时显示预加载的数据，而不是隐藏表格视图并覆盖搜索栏下方的暗色视图。就像 iOS 版 Safari 中的 Google 搜索栏的工作方式一样。

我之前在 stackoverflow 上发现了一个类似的问题： [UISearchDisplayController - how to preload searchResultTableView](https://stackoverflow.com/questions/6225160/uisearchdisplaycontroller-how-to-preload-searchresulttableview)，我真的无法让它工作。

获取预加载数据并将当前数据设置为它没有问题，但我不确定如何防止显示控制器删除 searchResultsTableView。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T04:43:14.073

我终于找到了一种方法来做到这一点。

我发现 searchDisplayController 只是从超级视图中删除了 searchResultsTableView，所以每当显示控制器试图隐藏表格视图时，我只是将表格视图添加回超级视图：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView
{
    // add the tableview back in
    [self.view addSubview:self.searchDisplayController.searchResultsTableView];
} 
```

然后我还必须在第一次单击搜索栏时显示 tableview，所以我做了：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    // after the data has been preloaded
    self.searchResults = self.allItems;
    [self.searchDisplayController.searchResultsTableView reloadData];
}

- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
    [self.view addSubview:self.searchDisplayController.searchResultsTableView];
} 
```

对我来说，“allItems”是我存储所有可搜索项目的地方，“searchResults”是存储过滤项目（搜索后）的地方。当然，您必须在重新加载数据之前预加载项目（例如搜索历史）。

我不知道这在性能方面是否是一种好方法，但它对我来说非常有效，我希望这对其他人也有用。如果有更好的方法可以做到这一点，请发表评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-16T23:24:14.890

经过几个小时后，我终于找到了适用于 iOS 7 的解决方案

只需在您的 UISearchDisplayDelegate 中实现以下两个方法

```
-(void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView {

    // We need to prevent the resultsTable from hiding if the search is still active
    if (self.searchDisplayController.active == YES) {
        tableView.hidden = NO;
    }
} 
```

当搜索开始时，searchResultsTableView 被自动隐藏了，所以我们需要再次取消隐藏

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller {

    controller.searchResultsTableView.hidden = NO;

    // Then we need to remove the semi transparent overlay which is here
    for (UIView *v in [[[controller.searchResultsTableView superview] superview] subviews]) {

        if (v.frame.origin.y == 64) {
            [v setHidden:YES];
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-17T12:05:54.233

我为这个问题找到了一个**更好**的解决方案，它似乎在 iOS 6 和 7 上完美运行。虽然它仍然是一个 hack，但它比上面的更清洁和面向未来的 hack。其他解决方案无法始终如一地工作，并阻止某些 UISearchDisplayDelegate 方法触发！此外，我遇到了复杂的嵌入问题，我无法用上述方法解决。其他解决方案的主要问题是它们严重混淆了 UISearchDisplayController 的内部结构。我的解决方案是基于观察 UISearchDisplayContoller 是 UISearchbarDelegate 并且可以通过模拟搜索字段中的按键来触发结果表的自动取消调暗和显示！所以：

```
- (void) searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller 
{
    if ([controller respondsToSelector: @selector(searchBar:textDidChange:)])
        [(id<UISearchBarDelegate>)controller searchBar: controller.searchBar textDidChange: @" "];
} 
```

这段代码通过检查它是否响应 UISearchbarDelegate 方法来防止崩溃，并发送空格 @" " 来欺骗 UISearchDisplayController 认为用户输入了一个字母，从而防止崩溃。

现在，如果用户键入内容然后将其删除，表格将再次变暗。其他解决方案尝试通过在 searchDisplayController:didHideSearchResultsTableView: 方法中执行某些操作来解决此问题。但这对我来说没有意义，因为当您取消搜索时，它肯定需要真正隐藏您的结果表，并且在这种情况下您可能需要运行代码。我对此部分的解决方案是子类化（请注意，如果您的项目需要，您可以使用 Method Swizzled Category 使其在任何地方都可以工作）：

```
// privately declare protocol to suppress compiler warning
@interface UISearchDisplayController (Super) <UISearchBarDelegate>
@end

// subclass to change behavior
@interface GMSearchDisplayController : UISearchDisplayController
@end

@implementation GMSearchDisplayController

- (void) searchBar: (UISearchBar *) searchBar textDidChange: (NSString *) searchString
{
    if (searchString.length == 0)
        searchString = @" ";
    if ([super respondsToSelector: @selector(searchBar:textDidChange:)])
        [super searchBar: searchBar textDidChange: searchString];
}

@end 
```

此代码通过拦截 textDidChange 委托方法并将 nil 或空字符串更改为空格字符串 @" " 来防止在空搜索栏上发生的正常隐藏/变暗。如果您正在使用第二位代码，那么您可以修改第一位以传递 nil 而不是 @" "，因为第二位将为您进行所需的转换为 @" "。

在我自己的项目中，我需要处理用户输入空格的情况，所以我使用了一个定义的标记，而不是上面的 @" "：

```
// arbitrary token used internally
#define SEARCH_PRELOAD_CONDITIONAL @"_#preresults#_" 
```

然后通过将其转换回 nil 字符串在内部处理它：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    if ([searchString isEqualToString: SEARCH_PRELOAD_CONDITIONAL])
        searchString = nil;
} 
```

享受！:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-07T02:18:37.523

这适用于 iOS 8：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView
{
  self.searchDisplayController.searchResultsTableView.hidden = NO;
}

- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
    self.searchDisplayController.searchResultsTableView.hidden = NO;
    [self.searchDisplayController.searchResultsTableView.superview.superview bringSubviewToFront:self.searchDisplayController.searchResultsTableView.superview];

    CGRect frame = self.searchDisplayController.searchResultsTableView.frame;
    self.searchDisplayController.searchResultsTableView.frame = CGRectMake(frame.origin.x, 64, frame.size.width, frame.size.height);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-30T02:22:09.910

当您开始搜索时，会调用此方法。添加 searchResultsTableView 并取消隐藏它。然后它将显示您已经预加载的数据。我必须预先加载您的数据才能使其正常工作。

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
    CGRect testFrame = CGRectMake(0, self.notesSearchBar.frame.size.height, self.notesSearchBar.frame.size.width, self.view.frame.size.height - self.notesSearchBar.frame.size.height);
    self.searchDisplayController.searchResultsTableView.frame = testFrame;
    [self.notesSearchBar.superview addSubview:self.searchDisplayController.searchResultsTableView];

//    [self.view addSubview:self.searchDisplayController.searchResultsTableView];
    controller.searchResultsTableView.hidden = NO;
}

-(void) searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView
{
    CGRect testFrame = CGRectMake(0, self.notesSearchBar.frame.size.height, self.notesSearchBar.frame.size.width, self.view.frame.size.height - self.notesSearchBar.frame.size.height);
    self.searchDisplayController.searchResultsTableView.frame = testFrame;
    [self.notesSearchBar.superview addSubview:self.searchDisplayController.searchResultsTableView];

    //    [self.view addSubview:self.searchDisplayController.searchResultsTableView];
    controller.searchResultsTableView.hidden = NO;
}

-(void) searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    controller.searchResultsTableView.hidden = YES;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-07T14:24:07.073

iOS 9 工作代码。

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller {
    // Bring the search table view to the view's front
    self.searchDisplayController.searchResultsTableView.hidden = NO;
    [self.searchDisplayController.searchResultsTableView.superview bringSubviewToFront:self.searchDisplayController.searchResultsTableView];
}

- (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView {
    // We need to prevent the resultsTable from hiding if the search is still active
    if (self.searchDisplayController.active == YES) {
        tableView.hidden = NO;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-09T15:12:50.660

**斯威夫特 2.0+ 版本**

```
func searchDisplayControllerDidBeginSearch(controller: UISearchDisplayController) {
    controller.searchResultsTableView.hidden = false
    controller.searchResultsTableView.superview!.bringSubviewToFront(controller.searchResultsTableView)
}

func searchDisplayController(controller: UISearchDisplayController, didHideSearchResultsTableView tableView: UITableView) {
    if ((searchDisplayController?.active) != nil) {
        tableView.hidden = false
    }
} 
```

# java - 如何在复合 ID 中再初始化一个属性

> ID：10734684
> 
> 赞同：0
> 
> 时间：2012-05-24T09:27:25.977
> 
> 标签：java, hibernate

有以下几点：

```
<class name="ClassName" entity-name="EntityName1" table="table1" lazy="false">

    <composite-id name="classPK" class="com.....ClassPK">
        <key-property name="ID" column="id" type="integer"/>
    </composite-id>
..... 
```

和

```
 <class name="ClassName" entity-name="EntityName2" table="table2" lazy="false">

    <composite-id name="classPK" class="com.....ClassPK">
        <key-property name="ID" column="id" type="integer"/>
    </composite-id>
..... 
```

即映射到 2 个表但具有相同类的 2 个实体。复合 ID 与上面的 im 代码一样使用。当从数据库加载实体 EntityName2 或 EntityName1 时，需要它来初始化 ClassPK 类中的另一个属性。我需要用 2 个不同的常量值来初始化它。例如，EntityName1 和 EntityName2 分别为“value1”和 value2。

所以我想有可能写一些类似的东西

```
<class name="ClassName" entity-name="EntityName1" table="table" lazy="false">

<composite-id name="classPK" class="com.....ClassPK">
    <key-property name="ID" column="id" type="integer"/>
    <property name="propertyname" formula = "'value1'"/>
</composite-id> 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:42:47.627

不确定这是否完全是个好主意，但你可以试试

```
<key-property name="propertyname" formula = "'value1'">
  <column formula="'value1'"/>
</key-property> 
```

# c - 字符字符串覆盖其他字符串

> ID：10734687
> 
> 赞同：1
> 
> 时间：2012-05-24T09:27:30.907
> 
> 标签：c, string, char, microcontroller, avr

我正在制作一个构建二进制消息的程序。我正在使用 char 字符串来保存二进制值。所以我已经初始化了一堆具有默认值的 char 字符串。然后我通过运行 for 循环将它们组合起来，并将它们读入一个大字符串 (aismsg/ais_packet)。在我添加 msg14Text[] 之前一切正常，然后我正在构建的字符串 (aismsg/ais_packet) 被缩短，如下所示（即使我没有使用该变量）。好像当我添加 msg14Text[] 时，它会更改其他字符串之一的值。这可能是内存分配问题吗？

部分代码：

```
char ais_packet[257];                           //Allokerer array for ais data pakke.
char aismsg[175];                               //Allokerer array for meldingen.
int burst_nr = 1;                               //Indicates with burst it is transmittin (1-7).

char ramp_up[] = "00000000";                    //Ramp up buffer.
char train_seq[] = "010101010101010101010101";  //Training sequence 24 bits of alternating 0-1.s
char hdlc_flag[] = "01111110";                  //HDLC Start and END flag.
char buffer[] = "000000000000000000000000";     //Data packet buffer.
char msgID1[] = "000001";                       //msg. 1.
char msgID14[] ="010100";                       //msg. 14.
char repeat[] = "00";                           //repetert 0 ganger.
char mmsi[] = "000111010110111100110100010101"; //Gir 123456789  som MMSI.
char nav_stat[] = "1111";                       //Gir 15= AIS-SART test, endres til 14 (1110) for aktiv AIS-SART.x'
char rot[] = "10000000";                        //Rate of Turn -128 betyr ikkje tilgjengelig.
char sogBin[] = "1111111111";                   //Tilsvarer 1023 = not available = default.
char pos_acc[] = "0";                           //Posisjonsnøyaktighet over 10m. 1 = under 10m.
char lonBin[] = "0110011110010001101011000000"; // Tilsvarer 181 grader som er default verdi for Longitude.
char latBin[] = "011010000010010000101000000";  // Tilsvarer 91 grader som er default verdi for Latitude.
char cogBin[] = "111000010000";                 //Tilsvarer 3600 = not available = default.
char headingBin[] = "111111111";                //511 = not available = default
char timestamp[] = "111100";                    //Tid siden melding er generert, 60 = default = ts not available.
char spec_man[] = "01";                         //Special manouver 0 = default, 1 = not engaged in special manouver
char spare[] = "000";
char spareMSG14[] = "00";                           //Reserved.
char raim[] = "0";                              //RAIM 0 = not in use.
char comm_state[] = "00011100000000000000";     // First 2bit: Sync state: 3 = no UTC sync = default, 0 = UTC sync. 0011100000000000000
char msg14Text[] = "100100101101111011111100";  //CAUSING TROUBLE!!!!  for AIS melding 14 står "Test" med 6-bit ASCII koding. 
```

该函数的完整代码可以在[pastebin.com/wj0RxyLX找到](http://pastebin.com/wj0RxyLX)

输出带有 msg14Text[] 的 ais 数据包：

```
00000000 
```

没有 msg14Text[] 的 ais 数据包的输出：

```
0000000001010101010101010101010101111110000001000001110101101111001101000101011111100000000011010000000000000110100011000101111000000101100100000100001100101110000100000000110011111000100000011100000000000000001000100110100101111110000000000000000000000000 
```

aispacket 应包含以下变量：

```
ramp_up[] + train_seq[] + hdlc_flag[] + Datapacket(168bit) + crc(16bit) + hdlc_flag[] + buffer[] + '\0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:03:14.443

***“这可能是内存分配问题吗？”***

您没有在代码中明确分配任何内存。请注意，它`char repeat[] = "00";`是静态分配的数组，其大小等于 3 `char`s 的大小，并且其内容由 string literal 初始化`"00"`。

问题很可能在于将这些字符串复制到其中，`ais_packet`因为您以非标准方式（逐个字符）执行此操作，这会导致您的代码难以阅读并且在那里很容易出错：

```
for(int k=0; k<256; k++)
{
    ...
    if(k==256) // are you sure that value of k will reach 256 ? 
```

我建议您使用为此目的而创建的 C 风格函数：Craete`ais_packet`通过使用将第一个字符串复制到其中，并通过使用附加其他字符串来`strcpy`继续扩展 this 的内容。`ais_packet``strcat`

这个问题也会帮助你：[Using strcat in C](https://stackoverflow.com/q/419604/1168156)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:36:48.090

在丑陋的`for (k=0; k < 168; k++) { if ... else if ...}`循环结束时

```
else if(k==168)
      {
        aismsg[k] = '\0';
        k=0;
      } 
```

这将使 (k <=168) 循环永远运行，或者 (k <168) 永远不会被执行。（有更多这种模式的实例）

顺便说一句，做同样的事情（也更快）的另一种方法是

```
....
unsigned dst=0;
memcpy (array+dst, src1, 123);
dst += 123;
memcpy(array+dst, src2, 234);
dst += 234;
...
array[dst] = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:33:52.973

只是一个想法，但是如果您正在构建二进制消息，为什么不使用实际的二进制而不是 char 数组呢？这是一种在联合内部使用结构来位打包二进制数据的方法。

```
// declaration
typedef union
{
     uint32_t packed;
     struct {
         uint16_t  sample1: 12;  // 12 bits long
         uint16_t  sample2: 14;  
             uint16_t  6;            // unused bits
     } data;
} u1;

// instantiation
u1 pack1;

// setting
pack1.data.sample1 = 1234;
//getting
uint16_t newval = pack1.data.sample2;
// setting bit 6 in sample 1
pack1.data.sample1 |= (1 << 6);
// setting lo nibble in sample1 to 0101
pack1.data.sample1 &= 0b11110101;
// getting the whole packed value
uint32_t binmsg = pack1.packed; 
```

# c - 如何在 c 中使用 Gstreamer 倒带视频流？

> ID：10734691
> 
> 赞同：0
> 
> 时间：2012-05-24T09:27:41.893
> 
> 标签：c, linux, media-player, gstreamer

我有 .asf 格式的视频文件。如何使用 gst_element_seek 倒带？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:08:35.723

你可以只寻找绝对位置。负搜索率将向后播放视频，这需要由解复用器实现。不知道你为什么要寻找不同的解复用器（如果有一个实现它，我们会使用它，对吧）。

查看 gst-plugins-base/test/examples/playback（旧版本中的 gst-plugins-base/test/examples/seek）。这是所有搜索模式的演示 UI。

# asp.net-mvc-3 - 来自 Razor 的意外 HTML

> ID：10734692
> 
> 赞同：1
> 
> 时间：2012-05-24T09:27:48.743
> 
> 标签：asp.net-mvc-3, razor

我在一个视图中有一些 Razor 代码应该路由到我模型的不同部分：

```
@Html.ActionLink("Edit", "Edit", "Journal", new { id = item.JOURNAL.REF_ID }) 
```

但是当我查看发出的 HTML 时，它并没有反映我所写的内容：

```
 <a href="/Reference/Edit?Length=7" id="25750">Edit</a> 
```

我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:29:18.593

那是因为您使用了错误的重载。它应该是这样的：

```
@Html.ActionLink("Edit", "Edit", "Journal", new { id = item.JOURNAL.REF_ID }, null) 
```

让我们看看为什么你使用了错误的重载。让我们分解一下你写的内容：

```
@Html.ActionLink(
    "Edit",                              // linkText
    "Edit",                              // actionName
    "Journal",                           // routeValues
    new { id = item.JOURNAL.REF_ID }     // htmlAttributes
) 
```

看到问题了吗？

现在让我们分解正确的方法：

```
@Html.ActionLink(
    "Edit",                              // linkText
    "Edit",                              // actionName
    "Journal",                           // controllerName
    new { id = item.JOURNAL.REF_ID },    // routeValues
    null                                 // htmlAttributes
) 
```

看到不同？

我建议您仔细阅读文档和帮助程序的[不同可用重载](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)以及`ActionLink`它们参数的确切意义。

# php - CakePHP 2.0 账户验证

> ID：10734693
> 
> 赞同：0
> 
> 时间：2012-05-24T09:27:52.550
> 
> 标签：php, mysql, database, cakephp, login

我正在尝试创建一个简单的登录页面。我想在该页面上进行验证，以便当用户单击登录时，该站点会检查用户数据库中激活的是否设置为 1，如果不是，则他们无法登录。我对 cakephp 还很陌生，并且正在尝试快速上手，所以如果这是一个简单的初学者问题，我很抱歉。

这是我的用户模型中的验证

```
public $checkActive = array(
    'activated'=>array(
            'rule'=>array('equalTo', '0'),
            'message'=>'The account must be activated, please check your email.'
        )); 
```

这是我的 usersController 中的登录功能

```
 public function login() {

    $this->set('title_for_layout', 'Individual Registration');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');

    if ($this->request->is('post')){
    if ($this->request->data['User']['password'] == 'qazwsx'){
    if ($this->Auth->login()){
     if (0 === $this->User->find('count',array('conditions'=>array('enabled'=>1,'login'=> $username)))) {
         $this->Session->setFlash('Sorry, your account is not validated yet.');
    }

        $this->Auth->user('id');
        $this->redirect($this->Auth->redirect('eboxs/home')); 
        }   
    } 
    else {

        $this->Session->setFlash('Username or password is incorrect');
    }
    }else{
    $this->Session->setFlash('Welcome, please login');
    }

} 
```

这是我在 usersController 中的 beforeLogin 函数

```
 public function beforeLogin(){

    if(isset($this->data['User']['password'])){
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        }
        return true;
    } 
```

应用控制器

```
class AppController extends Controller {

    public $components = array(
        'DebugKit.Toolbar',
        'Session', 
        'Auth'=>array(
            'loginRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'authError'=>"You can't access this page",
            'authorize'=>array('Controller')
        )
    );

    public function isAuthorized($user){
        return true;
    }

    public function beforeFilter(){
    $this->Auth->allow('index','view');
    $this->set('logged_in', $this->Auth->loggedIn());
    $this->set('current_user',$this->Auth->user());

    } 
```

我意识到我的控制器中没有调用验证，但是我的其他验证（例如用户名是唯一的），我不必调用它。

简而言之，目前任何人都可以登录我的页面，我正在努力做到这一点，只有那些在用户表中激活字段中有 1 的人才能登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:20:58.270

`scope`为您的身份验证设置添加一个选项：

```
'Auth'=>array(
        'loginRedirect'=>array('controller'=>'users', 'action'=>'login'),
        'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
        'authError'=>"You can't access this page",
        'authorize'=>array('Controller'),
        'scope' => array('User.activated' => 1)
    ) 
```

如果用户没有`User.activated = 1`.

此外，查看您的[身份验证设置并重新阅读 CakePHP 2.0 的手册页](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)，您的配置看起来像 1.3。应该不需要自己去查密码，`beforeLogin`这样简单的设置你肯定也不需要方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:21:30.753

一种选择是在登录后立即检查帐户验证，如下所示：

```
<?php
if ($this->request->is('post')){
if ($this->request->data['User']['password'] == 'qazwsx'){
if ($this->Auth->login()) {

    // login ok, but check if activated
    $username = $this->request->data['User']['username'];
    if (0 === $this->User->find('count',array('conditions'=>array('activated'=>1,'username'=> $username)))) {
         $this->Session->setFlash('Sorry, your account is not validated yet.');
         $this->redirec($this->referer());
    }

    $this->Auth->user('id');
    $this->redirect($this->Auth->redirect('eboxs/home')); 
    }   
} 
```

# django - 在 django 应用程序中执行 python 文件时出现 KeyError

> ID：10734694
> 
> 赞同：0
> 
> 时间：2012-05-24T09:27:55.057
> 
> 标签：django, django-views, python-2.7

```
TypeError at /python_tutor
'instancemethod' object is not subscriptable 
```

当我在在线 python 导师脚本中运行此脚本时：

```
def tutor(request):
    print "Inisde tutor", request.method
    print "POST =", request.POST

    if request.method == "POST" :
        print "Inside Post"
        print "My Script =", request.POST["user_script"]
        mycode = request.POST.get["user_script",none]
        exec mycode 
```

**/python_tutor name 'none' 处的 NameError 未定义**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:40:52.550

尝试更改`none`为`None`. 资本化问题。此外，看起来应该有圆括号而不是方括号`get`。

# java - EclipseLink 和 Spring 3 Web MVC：我应该如何集成这两种技术？

> ID：10734696
> 
> 赞同：2
> 
> 时间：2012-05-24T09:28:02.073
> 
> 标签：java, jpa, spring-mvc, configuration, eclipselink

我目前正在学习**EclipseLink**和**Spring 3.0** MVC：

*   我使用 EclipseLink 编写了一个简单的独立应用程序：它使用 META-INF/persistence.xml 文件并从 mysql 数据库读取和写入数据。

*   我还在 apache **tomcat**下使用 Spring3 MVC 编写了一个简单的“HelloWorld”应用程序。它基于以下教程：[http ://www.mkyong.com/spring-mvc/spring-3-rest-hello-world-example](http://www.mkyong.com/spring-mvc/spring-3-rest-hello-world-example)

现在，我应该如何链接这两种技术？据我了解[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch14s06.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch14s06.html)我需要创建一个LocalContainerEntityManagerFactoryBean：

```
 <bean id="myEmf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="someDataSource"/>
  <property name="loadTimeWeaver">
    <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
  </property>
 </bean> 
```

但什么是“someDataSource”？[我应该使用像http://commons.apache.org/dbcp/](http://commons.apache.org/dbcp/)这样的另一个库吗？那么我应该如何处理 eclipselink 呢？

一旦配置了 JPA，我应该如何从我的 spring **Controller**访问它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:54:19.267

someDataSource 只是另一个 bean，例如：

```
<bean id="someDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

在这里，我还使用属性替换属性，这是由以下 bean 指定的：

```
<context:property-placeholder location="classpath:properties/runtime.properties" /> 
```

由于上下文位于不同的 xml 命名空间下，因此添加：

```
xmlns:context="http://www.springframework.org/schema/context" 
```

到您的 XML 命名空间，以及

```
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd 
```

到 bean xml 文档中的 schemaLocation 字符串。

```
classpath:properties/runtime.properties 
```

此属性文件可以在标准 Maven 设置中的以下位置找到：

```
src/main/resources/properties/runtime.properties 
```

在这个 runtime.properties 文件中，您需要为每个具有占位符的属性定义值（即 jdbc.driverClassName、jdbc.url 等）。这方面的一个例子是：

```
jdbc.driverClassName=com.mysql.jdbc.Driver 
```

如果您使用 MySQL 作为数据库。

一般来说，您可能需要在控制器和存储库 (DAO) 之间建立一个服务层。原因是控制器应该只专注于处理请求和响应。任何业务逻辑都应该通过业务对象等在不同的层中完成。服务层充当 Web 层和存储库层之间的中介。这不仅分离了关注点，而且使事情变得更加可单元测试，这是任何 Spring 应用程序的重要组成部分（至少它应该是！）。

至于如何连接，请尝试将此 bean 插入到您的 Context 中：

```
<context:component-scan base-package="xx.yy..." /> 
```

其中 xx 和 yy 是您的包名称，这将告诉 Spring 扫描您的包中的“组件”或 @Controller 对象、@Service 和 @Repository（还有一些其他的，但这些是要了解的主要内容）。使用提供给 Spring 的这些信息，您可以将 @Autowire bean（依赖注入）注入其他 bean。

例如：

```
@Service
public class SomeServiceImpl implements SomeService
{
  private SomeRepository someRepository;

  @Autowired
  public void setSomeRepository(SomeRepository someRepository)
  {
    this.someRepository = someRepository;
  }
  ...
} 
```

这会将存储库注入服务，允许您访问该存储库方法。

另一个设计技巧，总是在 Spring 中为接口编程。对于存储库来说尤其如此，因为在开发的早期，您可能想要实现一个 Hibernate 存储库，但是 DBA 可能会对此嗤之以鼻，并需要使用直接 SQL 的 JDBC 存储库。这样，您只需要使用 JDBC 方法而不是 Hibernate 来实现 Repository，注入 JDBC 存储库而不是 Hibernate，就完成了。

希望这能让你开始！

# php - php并发送邮件

> ID：10734697
> 
> 赞同：0
> 
> 时间：2012-05-24T09:28:03.710
> 
> 标签：php, email, smtp

我搜索使用 php 脚本发送邮件。

```
$mail = new PHPmailer();
$mail->IsSMTP();
$mail->Host='mail.mydomaine.com';
$mail->From='xxx@mydomaine.com';
$mail->AddAddress('xxx@yahoo.fr');
$mail->AddReplyTo('xxx@mydomaine.com'); 
$mail->Subject='test';
$mail->Body='example for mail'; 
```

如果我从地址 yyy@mydomaine.com 生成它是有效的，但如果我将它更改为例如 yyy@gmail.com 或 yahoo.fr 它不起作用。这是错误消息 SMTP 错误：以下收件人失败：xxx@yahoo.fr SMTP 服务器错误：5.7.1：中继访问被拒绝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:37:12.690

如果您想使用 yyy@gmail.com 或 yyy@yahoo.com 作为发件人地址，您需要为相应的邮件服务器配置身份验证（邮件帐户）。例如，如果你想像这样配置 gmail 配置..

```
$mailObj->Host = 'smtp.gmail.com';
$mailObj->Port = '465';
$mailObj->Username = 'yyyy@gmail.com';
$mailObj->Password = 'passwordofaboveaccount'; 
```

现在

```
$mailObj->From='xxx@gmail.com'; 
```

将工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T04:35:23.940

您可以为网站添加邮件....

```
$mail->Host = 'smtp.gmail.com';
$mail->Port = '465';
$mail->Username = 'yyy@gmail.com';//your mail is valuable
$mail->Password = 'password';//your mail pass 
```

如果您需要将邮件更改为 yahoo，那么只需使用 yahoo smtp 更改主机名......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:31:35.213

你怎么能用别人的电子邮件地址发送电子邮件？如果此 PHP 代码在您的服务器上，您当然只能从您自己的域发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:50:21.227

你有以下，是吗？

```
$mailObj->SMTPAuth = TRUE;
$mailObj->SMTPSecure = "ssl"; 
```

# debugging - 应用程序仅在 Adhoc 中崩溃？在调试模式下运行良好

> ID：10734701
> 
> 赞同：1
> 
> 时间：2012-05-24T09:28:12.410
> 
> 标签：debugging, crash, adhoc

```
 May 25 00:17:43 unknown kernel[0] <Debug>: launchd[887] Builtin profile: container (sandbox)
May 25 00:17:43 unknown kernel[0] <Debug>: launchd[887] Container: /private/var/mobile/Applications/BB467DEE-061F-4A6C-8F75-F88F153BC4A0 [69] (sandbox)
May 25 00:17:43 unknown JulieRowe[887] <Warning>: Device token recived :- a0c4c5a4fa58b09de64b9c97e83cc92d352e3e10563d03b835dfc3eaf187bb14
May 25 00:17:43 unknown JulieRowe[887] <Error>: libMobileGestalt computeUniqueDeviceID: total time for bb to return imei: 0
May 25 00:17:43 unknown JulieRowe[887] <Error>: *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: author_id)'
    *** First throw call stack:
    (0x3729788f 0x34f9c259 0x37297789 0x372977ab 0x3720468b 0x3951 0x4041 0x3119860b 0x311990dd 0x36033af9 0x3726b523 0x3726b4c5 0x3726a313 0x371ed4a5 0x371ed36d 0x339ac439 0x30f99cd5 0x2c89 0x2c48)
May 25 00:17:43 unknown UIKitApplication:com.julierowe.authorapp[0xe204][887] <Notice>: terminate called throwing an exception
May 25 00:17:44 unknown ReportCrash[888] <Notice>: Formulating crash report for process JulieRowe[887]
> 
May 25 00:17:44 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.julierowe.authorapp[0xe204]) Job appears to have crashed: Abort trap: 6
May 25 00:17:44 unknown SpringBoard[51] <Warning>: Application 'Julie Rowe' exited abnormally with signal 6: Abort trap: 6
May 25 00:17:44 unknown ReportCrash[888] <Error>: libMobileGestalt computeUniqueDeviceID: total time for bb to return imei: 0
May 25 00:17:44 unknown ReportCrash[888] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/JulieRowe_2012-05-25-001743_Bob-Eveleth.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

这是我从 xcode 4.3.2 组织者那里获得的设备控制台日志。但我很惊讶 App 在 Debug 配置文件下运行良好，但在 adhoc 下它崩溃了。

# sql - SQL Server 2008 Management Studio - 看不到表，可以运行查询

> ID：10734710
> 
> 赞同：2
> 
> 时间：2012-05-24T09:28:33.187
> 
> 标签：sql, sql-server, sql-server-2008-r2, database-permissions

好吧，我有一个在共享主机上运行的数据库并已成功连接到它。但是，我看不到数据库，但是当我运行 ie

```
SELECT * FROM Item 
```

`Item`是其中的一个表，我得到正确的结果。

此外，当通过`Visual Studio 2010`相同的凭据连接时，我看到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:51:00.770

我以前遇到过这个问题，并通过将当前的 Service Pack 应用于 SSMS 来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T04:17:30.453

它看起来像 Microsoft SQL Server Management Studio 中的一个错误。请参阅[https://connect.microsoft.com/SQLServer/feedback/details/387616/tables-node-does-not-show-all-schemas-in-ssmse-2008](https://connect.microsoft.com/SQLServer/feedback/details/387616/tables-node-does-not-show-all-schemas-in-ssmse-2008)

# jquery - iPad 上从未触发按钮单击

> ID：10734713
> 
> 赞同：0
> 
> 时间：2012-05-24T09:28:46.533
> 
> 标签：jquery, ipad, button, click

我刚刚发布了一个文字解决应用程序的第一个测试版（西班牙语中的 wordfeud），并且在 iPad 上遇到了一些问题，希望有人能提供帮助：

HTML

```
<button type="button" id='btnsolve'>Solve</button> 
```

jQuery

```
$('#btnsolve').click(function () {
  solvegame();
}); 
```

该`solvegame`功能从未在 iPad 上触发，但适用于 IE、FF 和 Chrome for windows。

该应用程序目前托管在 appharbor[可以在这里看到](http://xylophoneclient.apphb.com/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:03:00.417

在您的页面上，我可以看到您注释掉了 jQuery 的文档就绪事件侦听。尝试在文档就绪侦听器中包含（现在只是）这个 jQuery 代码，看看它是否适用于 iPad。

# mysql - MySQL 查询：合并结果

> ID：10734714
> 
> 赞同：0
> 
> 时间：2012-05-24T09:28:47.917
> 
> 标签：mysql, merge

我有两张桌子：

文档类型：

```
doc_id | doc_name | expiry_days
-------|----------|-------------
  1    | Doc_1    |    365
  2    | Doc_2    |    90
  3    | Doc_3    |    30 
```

提供的文档：

```
evidence_id | doc_id  | client_id |  date_supplied
------------|---------|-----------|-----------------
       1    | 1       |    5432   |   13-05-2012
       2    | 1       |    3165   |   25-04-2011
       3    | 2       |    5432   |   23-10-2011 
```

我想看到的输出是：

```
 doc_id | doc_name | expiry_days | client_id |  date_supplied
   -------|----------|-------------|-----------|----------------
     1    | Doc_1    |    365      |    5432   |  13-05-2012
     2    | Doc_2    |    90       |    5432   |  NULL    
     3    | Doc_3    |    30       |    5432   |  NULL
     1    | Doc_1    |    365      |    3165   |  25-04-2012
     2    | Doc_2    |    90       |    3165   |  NULL    
     3    | Doc_3    |    30       |    3165   |  NULL 
```

基本上对于每个客户，我想显示完整的文档列表 (14)，但是如果在数据库中有该客户和文档的条目，那么提供的日期等额外字段会被填充。因此，对于每个客户记录，我希望有 14 行，每个 doc_type 一个。其中一些行将包含特定于客户端的数据。

这样一来，在我的网格中，我就可以过滤 client_id 并查看该人的所有文档及其状态的列表。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:32:53.887

```
SELECT   doc_types.*, client_id, date_supplied
FROM     doc_types
   CROSS JOIN (SELECT DISTINCT client_id FROM docs_supplied) AS clients
   LEFT  JOIN docs_supplied USING (client_id, doc_id)
ORDER BY client_id DESC, doc_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/d926d/5)上查看。

如果您有一个具有唯一`client_id`列的表，您可以简单地使用它而不是从`SELECT DISTINCT`子查询中生成它：

```
SELECT   doc_types.*, client_id, date_supplied
FROM     doc_types
   CROSS JOIN client_accounts
   LEFT  JOIN docs_supplied USING (client_id, doc_id)
ORDER BY client_id DESC, doc_id 
```

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# android - httpclient.execute 到 Web 服务器的异常

> ID：10734717
> 
> 赞同：0
> 
> 时间：2012-05-24T09:28:51.890
> 
> 标签：android, exception, httpclient

我尝试在 Web 服务器上发送 JSON 数据并通过这种方法获得响应。

```
public JSONObject postOnServer(JSONObject json) {

    HttpResponse response;
    JSONObject res = null;

    HttpClient httpclient = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);
    HttpPost httpPost = new HttpPost(PATH);

    try {

        //StringEntity stringEntity = new StringEntity("json", String.valueOf(json));
        ByteArrayEntity postMessage = new ByteArrayEntity(json.toString().getBytes("UTF8"));
        httpPost.setEntity(postMessage);
        response = httpclient.execute(httpPost);

        if (response.getStatusLine().getStatusCode() == 200) {

            InputStream instream = response.getEntity().getContent();
            try {
                res = new JSONObject(convertStreamToString(instream));
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                Log.i("Response JSON", e.toString());
            }

        } else {

            res = new JSONObject();
            try {
                res.put("error", "Unable to load page.");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
            }

        }
    } catch (IOException ex) {

        Log.i("Connection.postOnServer", "1.try exception: "+ex);
        res = new JSONObject();
        try {
            res.put("error", "Synchronization is not enable: Connection has aborted.");
        } catch (JSONException e) {
            Log.i("Connection.postOnServer", "put exception: "+e);
        }

    }

    return res;
} 
```

但总是`response = httpclient.execute(httpPost);`以这个例外结束

```
05-24 10:58:51.635: E/AndroidRuntime(4709): FATAL EXCEPTION: main
05-24 10:58:51.635: E/AndroidRuntime(4709): android.os.NetworkOnMainThreadException
05-24 10:58:51.635: E/AndroidRuntime(4709):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at libcore.io.IoBridge.connectErrno(IoBridge.java:138)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at libcore.io.IoBridge.connect(IoBridge.java:112)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at java.net.Socket.connect(Socket.java:842)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-24 10:58:51.635: E/AndroidRuntime(4709):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 
```

有人知道，如何解决？如果我使用 catch(IOException)，在口渴的尝试中，应用程序将被破坏。如果我使用 catch(Exception) 应用程序继续不采取任何行动。我应该怎么做才能发送数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:34:21.680

Android 不允许您在用户界面线程上运行网络请求。这是为了阻止请求在执行时阻塞界面。您需要在单独的线程中执行请求。这是一个例子：

```
new Thread(new Runnable() {
    //Thread to stop network calls on the UI thread
    public void run() {
        //Request the HTML
        try {
            HttpParams httpParameters = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParameters, TIMEOUT_CONNECTION);
            HttpConnectionParams.setSoTimeout(httpParameters, TIMEOUT_SOCKET);

            HttpClient client = new DefaultHttpClient(httpParameters);
            HttpGet request = new HttpGet(getString(R.string.url));
            HttpResponse response = client.execute(request);

            //Do something with the response
        }
        catch (IOException e) {
            Log.e("Tag", "Could not get HTML: " + e.getMessage());
        }
    }
}).start(); 
```

# c# - ASP.NET：删除文件夹后会话过期

> ID：10734718
> 
> 赞同：0
> 
> 时间：2012-05-24T09:28:58.273
> 
> 标签：c#, asp.net

我有代码，我将文件移动到另一个文件夹并删除 ASP.NET 应用程序中以前的文件夹和文件。删除文件夹后，我的会话已过期。如何限制会话值过期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:32:12.433

非常真实。发生这种情况是因为删除会更改 ASP.NET 应用程序的文件夹树，这会迫使应用程序回收。见这里：[http ://www.geekays.net/post/2008/10/14/ASPNET-webdomain-recycle-on-subfolder-changes.aspx](http://www.geekays.net/post/2008/10/14/ASPNET-webdomain-recycle-on-subfolder-changes.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:49:31.087

在 Global.asax 页面中使用以下代码

```
void Application_Start(object sender, EventArgs e) 
{
    System.Reflection.PropertyInfo p = typeof(System.Web.HttpRuntime).GetProperty("FileChangesMonitor", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Static);
    object o = p.GetValue(null, null);
    System.Reflection.FieldInfo f = o.GetType().GetField("_dirMonSubdirs", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.IgnoreCase);
    object monitor = f.GetValue(o);
    System.Reflection.MethodInfo m = monitor.GetType().GetMethod("StopMonitoring", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
    m.Invoke(monitor, new object[] { }); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T05:11:17.110

请在 globle.asax 的 Session_End 方法中编写您的目录删除代码

```
void Session_End(object sender, EventArgs e)
{
    SampleDelete();
}
private static void SampleDelete()
{
    try
    {
        string samplesss = AppDomain.CurrentDomain.BaseDirectory + "\\temp";
        string[] array1 = System.IO.Directory.GetDirectories(samplesss);
        try
        {
            foreach (string item in array1)
            {
                System.IO.Directory.Delete(item, true);
            }
        }
        catch (Exception ex)
        { }
    }
    catch (Exception ex)
    {
    }
} 
```

# opengl-es - 使用 MultiTexure 时如何定义 Texcoord 数组

> ID：10734720
> 
> 赞同：0
> 
> 时间：2012-05-24T09:29:02.050
> 
> 标签：opengl-es

当我不使用 MultiTexture 时。我使用这个函数'glTexCoordPointer'。但是我使用glTexCoordPointer，它接缝我应该使用函数'glMultiTexCoord2fARB'。但是“glMultiTexCoord2fARB”这个函数只用于 U && V 的两个数字。我怎样才能使用数组来代替？

有什么功能吗？或如何做到这一点？

该程序在opengl-es 1.0下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:26:20.157

你必须使用[glClientActiveTexture](http://www.khronos.org/opengles/documentation/opengles1_0/html/glClientActiveTexture.html)

```
glClientActiveTexture(GL_TEXTURE0);    // <-- tex 0
glTexCoordPointer(...)
glClientActiveTexture(GL_TEXTURE1);    // <-- tex 1
glTexCoordPointer(...) 
```

# svm - 训练 libsvm 进行文本分类（情感）

> ID：10734728
> 
> 赞同：3
> 
> 时间：2012-05-24T09:29:32.290
> 
> 标签：svm, libsvm, sentiment-analysis

通过以下链接，我有了一些想法。我想问我是做对了还是我做错了。如果我走错了路，请指导我。

使用libsvm
[进行文本分类 c#](https://stackoverflow.com/questions/9021658/using-libsvm-for-text-classification-c-sharp)
[如何使用 libsvm 进行文本分类？](https://stackoverflow.com/questions/6172159/how-to-use-libsvm-for-text-classification)

我的方式

首先计算每个训练集中的单词数
为每个单词创建一个映射列表

例如

```
sample word count form training set
|-----|-----------|
|     |   counts  |
|-----|-----|-----|
|text | +ve | -ve |
|-----|-----|-----|
|this | 3   | 3   |
|forum| 1   | 0   |
|is   | 10  | 12  |
|good | 10  | 5   |
|-----|-----|-----| 
```

正向训练数据

```
this forum is good 
```

训练集也是

```
+1 1:3 2:1 3:10 4:10 
```

这一切都是我从上面的链接中收到的。
请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:33:00.340

你做对了。

我不知道为什么你的 laben 被称为“+1” - 应该是一个简单的整数（参考文档“+ve”），但总而言之，这是要走的路。

对于文档分类，您可能需要查看专为处理大量功能而设计的 liblinear。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T13:45:10.273

你也可以从这里使用 libshorttext： [libshortText](http://www.csie.ntu.edu.tw/~cjlin/libshorttext/doc/)

在蟒蛇

# xml - 如何使用 XSLT 根据节点属性位置进行 xml 消除？

> ID：10734731
> 
> 赞同：-5
> 
> 时间：2012-05-24T09:29:35.037
> 
> 标签：xml, xslt

输入文件：

```
<root>
    <sector>
        <nodeA id="a">
            <section id="i">
                <item1 id="1" method="create"> 
                    <somechild>a</somechild>
                </item1>

                <item1 id="1" method="delete" />
            </section>                   
        </nodeA>

        <nodeA id="b">
            <cell id="ii">  
                <item2 id="2" method="create"> 
                    <otherchild>a</otherchild>
                </item2>
            </cell>
            <cell id="ii">
                <item2 id="2" method="delete" />
            </cell>                   
        </nodeA>

        <nodeB id="i">
            <cell id="ii">  
                <item3 id="1" method="create"> 
                    <child>b</child>
                </item3>
            </cell>

            <cell id="ii">
                <item3 id="1" method="delete" />
                <item3 id="1" method="create"> 
                    <otherchild>a</otherchild>
                </item3>
            </cell>                   
        </nodeB>
    </sector> 
</root> 
```

**预期输出：**

```
<root>
    <sector>
        <nodeA id="a">
            <section id="i">
            </section>                   
        </nodeA>

        <nodeA id="b">
            <cell id="ii">  
            </cell>
            <cell id="ii">
            </cell>                   
        </nodeA>

        <nodeB id="i">
            <cell id="ii">  
                <item3 id="1" method="create"> <!-- this is not eliminated as it violates the rule by having create followed by delete and followed by create again -->
                    <child>b</child>
                </item3>
            </cell>

            <cell id="ii">
                <item3 id="1" method="delete" />
                <item3 id="1" method="create"> 
                    <otherchild>a</otherchild>
                </item3>
            </cell>                   
        </nodeB>
    </sector> 
</root> 
```

我需要使用此规则消除 xml 中的节点：

*   一个节点`method="create"`跟随 一个节点`method="delete"`将被淘汰
*   该场景可以发生在一个父级中，也可以在两个父级中传播，只要它具有相同的元素名称和 id`<cell id="ii">`

如何使用 XSLT 1.0 或 2.0 进行这种转换？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:15:39.383

这是一种方法。您定义一个键来对要删除的项目进行分组。我认为您是按元素的@id 属性以及两个父节点的@id 属性进行分组的

```
<xsl:key 
   name="items" 
   match="*[@method != '']" use="concat(@id, '|', ../@id, '|', ../../@id)" /> 
```

接下来，您可以有一个模板来匹配您的**@method='create'**项目，其中键中有两个元素，另一个项目是**@method='delete'**

```
<xsl:template match="*
   [@method = 'create']
   [count(key('items', concat(@id, '|', ../@id, '|', ../../@id))) = 2]
   [key('items', concat(@id, '|', ../@id, '|', ../../@id))[@method = 'delete']]" /> 
```

您还需要一个模板以类似的方式匹配其他**@method='delete' 。**

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="items" match="*[@method != '']" use="concat(@id, '|', ../@id, '|', ../../@id)" />

   <xsl:template match="*[@method = 'create'][count(key('items', concat(@id, '|', ../@id, '|', ../../@id))) = 2][key('items', concat(@id, '|', ../@id, '|', ../../@id))[@method = 'delete']]" />
   <xsl:template match="*[@method = 'delete'][count(key('items', concat(@id, '|', ../@id, '|', ../../@id))) = 2][key('items', concat(@id, '|', ../@id, '|', ../../@id))[@method = 'create']]" />

   <xsl:template match="@*|node()" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<root>
   <sector>
      <nodeA id="a">
         <section id="i"/>
      </nodeA>
      <nodeA id="b">
         <cell id="ii"/>
         <cell id="ii"/>
      </nodeA>
      <nodeB id="i">
         <cell id="ii">
            <item3 id="1" method="create">
               <child>b</child>
            </item3>
         </cell>
         <cell id="ii">
            <item3 id="1" method="delete"/>
            <item3 id="1" method="create">
               <otherchild>a</otherchild>
            </item3>
         </cell>
      </nodeB>
   </sector>
</root> 
```

# json - 尝试将存储在数据库中 JSON 字符串中的数据移动到更易于管理的结构/过程中。NOSQL 方法可能适合这里吗？

> ID：10734732
> 
> 赞同：2
> 
> 时间：2012-05-24T09:29:35.103
> 
> 标签：json, nosql, persistence, relational-database, ravendb

伙计们，我的任务是重新构建一个包含许多基于 javascript 的工作工具/工作流的大型系统，使其更易于管理。

第一部分是重构数据。所有数据当前都以 JSON 字符串的形式存储在 SQL 数据库中。因此，对于每个工作工具（从一组表格到交互式图表），所有数据都作为一个 JSON 字符串存储在与工作工具关联的记录中。

现在我被告知，由于其中一些工作工具背后的对象图的复杂性，寻找允许我从数据中建模关系模式的共性将是相当徒劳的。这个模式要么必须是一些真正通用的基于键值的结构，要么我们需要数百个表。

我现在想知道使用非关系持久性机制（例如 NOSQL）是否有价值。我现在只是在研究这个，但我真的很感谢这里有类似操作环境或 NOSQL 产品和流程经验的任何人的意见。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:08:35.617

您可以将数据按原样移动到 RavenDB。它本机理解 JSON，您可以作为一流成员开始查询/处理这些文档。RavenDB 也有一组很棒的客户端库，使用它变得轻而易举。

# c - 如何在没有外部链接的情况下在翻译单元之间共享一组内部函数？

> ID：10734735
> 
> 赞同：2
> 
> 时间：2012-05-24T09:29:57.667
> 
> 标签：c, static, external, static-libraries, linkage

假设您正在编写一个库，并且您有一堆为自己编写的实用程序函数。当然，您不希望这些函数具有外部链接，以免您的图书馆用户混淆它们（主要是因为您不会告诉外界它们的存在）

另一方面，这些函数可能在不同的翻译单元中使用，因此您希望它们在内部共享。

让我们举个例子。你有一个库可以做一些事情，并且在不同的源文件中你可能需要`copy_file`and `create_directory`，所以你可以将它们实现为实用函数。

为了确保您的库的用户不会因为具有相同名称的函数而意外收到链接错误，我可以考虑以下解决方案：

*   可怕的方法：将函数复制粘贴到每个使用它们的文件中，并添加`static`到它们的声明中。
*   不是一个好方法：将它们写为宏。我喜欢宏，但这不在这里。
*   给他们一个奇怪的名字，这样用户产生相同名字的机会就足够小了。这可能有效，但它使使用它们的代码非常难看。
*   我目前所做的：将它们作为`static`函数写入内部`utils.h`文件，并将该文件包含在源文件中。

现在最后一个选项几乎可以正常工作，除了它有一个问题：如果你不使用其中一个函数，至少你会收到一个警告（说函数声明为静态但从未使用过）。叫我疯了，但我保持我的代码警告免费。

我采取的做法是这样的：

实用程序.h：

```
...
#ifdef USE_COPY_FILE
static int copy_file(/* args */)
{...}
#endif

#ifdef USE_CREATE_DIR
static int create_dir(/* args */)
{...}
#endif
... 
```

文件1.c：

```
#define USE_COPY_FILE
#define USE_CREATE_DIR
#include "utils.h"

/* use both functions */ 
```

文件2.c

```
#define USE_COPY_FILE
#include "utils.h

/* use only copy_file */ 
```

然而，这种方法的问题在于，随着更多实用程序的引入，它开始变得丑陋。想象一下，如果你有10个这样的函数，你需要在include之前有7~8行define，如果你需要7~8个这样的函数！

当然，另一种方法是使用`DONT_USE_*`排除函数的宏类型，但是对于使用很少这些实用函数的文件，您需要大量定义。

无论哪种方式，它看起来都不优雅。

**我的问题是，您如何拥有自己的库内部的功能，供多个翻译单元使用，并避免外部链接？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:03:14.753

标记功能`static inline`而不是`static`将使警告消失。它不会对您当前解决方案的代码膨胀做任何事情——您将至少一个函数副本放入使用它的每个 TU 中，情况仍然如此。Oli 在评论中说，链接器可能足够聪明，可以合并它们。我不是说它不是，但不要指望它:-)

通过鼓励编译器实际内联对函数的调用，以便每个 TU 获得多个副本，它甚至*可能使膨胀变得更糟。*但这不太可能，GCC 大多会忽略`inline`关键字的这一方面。它根据自己的规则内联或不内联调用。

这基本上是您可以随身携带的最好的。标准 C 中无法定义某些 TU（您的）的 POV 外部的符号，但不能定义其他 TU（您的用户）的 POV 之外的符号。标准 C 并不真正关心库是什么，或者 TU 可能在几个步骤中链接的事实，或者静态链接和动态链接之间的区别。因此，如果您希望函数在您的 TU 之间实际共享，而没有任何可能干扰库用户的外部符号，那么您需要执行特定于 GCC 和/或静态库或 dll 格式的操作以删除符号一次该库已构建，但在用户链接之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:35:45.893

您可以正常链接您的库，使这些函数全局化，并在以后本地化它们。

`objcopy`可以采用全局符号并使它们成为本地符号，因此它们无法链接。它还可以删除符号（函数保持不变，对它的已解析引用保持已解析，只是名称消失了）。

`objcopy -L symbol`本地化`symbol`. 您可以重复`-L`多次。
`objcopy -G symbol`保持`symbol`全球性，但本地化所有其他人。您也可以重复它，它将保留您指定的所有内容。

我刚刚发现我在重复[这个问题](https://stackoverflow.com/questions/393980/restricting-symbols-in-a-linux-static-library)的答案，Oli Charlesworth 在他的评论中提到了这个问题。

# php - 如何为php mvc构建一个好的路由器

> ID：10734741
> 
> 赞同：5
> 
> 时间：2012-05-24T09:30:11.540
> 
> 标签：php, model-view-controller

我正在尝试使用 php mvc，但遇到了以下问题。我的请求和路由器类非常简单，我想扩展主题以处理来自子文件夹的控制器调用，并且控制器类函数应该能够获取 url 变量发送它抛出 get 和 post。

我的路由器如下所示

```
class Router{

    public static function route(Request $request){

        $controller = $request->getController().'Controller';

        $method = $request->getMethod();

        $args = $request->getArgs();

        $controllerFile = __SITE_PATH.'/controllers/'.$controller.'.php';

        if(is_readable($controllerFile)){
            require_once $controllerFile;

            $controller = new $controller;

            if(!empty($args)){
                call_user_func_array(array($controller,$method),$args);
            }else{  
                call_user_func(array($controller,$method));
            }   
            return;
        }

        throw new Exception('404 - '.$request->getController().'--Controller not found');
    }
} 
```

和请求类

```
 private $_controller;

    private $_method;

    private $_args;

    public function __construct(){

        $parts = explode('/',$_SERVER['REQUEST_URI']);

        $this->_controller = ($c = array_shift($parts))? $c: 'index';
        $this->_method = ($c = array_shift($parts))? $c: 'index';

        $this->_args = (isset($parts[0])) ? $parts : array();

    }

    public function getController(){

        return $this->_controller;

    }
    public function getMethod(){

        return $this->_method;

    }
    public function getArgs(){

        return $this->_args;
    }
} 
```

问题是：当我尝试将抛出的 ajax 发送到控制器方法时，由于其 url 结构而无法识别该变量。例如

```
index/ajax?mod_title=shop+marks&domain=example 
```

只要看起来就被接受

```
index/ajax/shop+mark/example 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T13:52:50.783

您的代码包含所谓的[LFI 漏洞](http://en.wikipedia.org/wiki/File_inclusion_vulnerability#Local_File_Inclusion)，并且在当前状态下是危险的。
您应该将可以`$controller`用作`/etc/passwd`.

您的路由器使用不安全；谨防！

编辑：白名单示例

```
$safe = array(
    'ajax',
    'somecontroller',
    'foo',
    'bar',
);
if(!in_array($this->_controller, $safe))
{
    throw new Exception(); // replace me with your own error 404 stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:25:23.140

由于您的请求类使用 URI 分段方法来识别控制器、操作和参数，因此您的请求中不会考虑 $_GET 或 $_REQUEST 等全局变量。

您需要做的是对您的请求代码进行一些补充。具体来说：

删除行：

```
$this->_args = (isset($parts[0])) ? $parts : array(); 
```

并添加以下内容：

```
$all_parts = (isset($parts[0])) ? $parts : array();
$all_parts['get'] = $_GET;
$this->_args = $all_parts; 
```

这样，$_GET（即通过 url 传递的变量）变量将在调用的操作中可用，因为它们将在 $args 中（它们实际上将作为 $args['get'] 可用，这是保存的数组$_GET 变量，因此您可以使用 $args['get']['domain']) 访问 domain=example。

当然，您可以在 Request 类（例如查询）中再添加一种方法，如下所示：

```
public function query($var = null)
{
    if ($var === null)
    {
        return $_GET;
    }
    if ( ! isset($_GET[$var]) )
    {
        return FALSE;
    }
    return $_GET[$var];
} 
```

这样，您可以从 url 中获取单个变量（例如 $request->query('domain')）或整个 $_GET 数组（$request->query()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:47:19.467

那是因为 php 会自动将 "?mod_title=..." 放入`$_GET`数组中。您的`getArgs()`函数应检查`$_GET`,`$_POST`或`$_REQUEST`.

如果您正在尝试使用最小的 MVC 方法，请查看 rasmus 的示例：[http ://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html](http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html)

如果您的用例变得更复杂，请查看 Zend (http://framework.zend.com/manual/en/zend.controller.html) 或 Symfony (https://github.com/symfony /symfony/tree/master/src/Symfony/Component/Routing）做他们的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T09:44:34.247

选择任何流行的 MVC，看看他们是如何在后台实现它的。此外， spl_autoload_register 和 namespace 是你的朋友。

# javascript - 如何让动态图中的另一条线向前移动？

> ID：10734743
> 
> 赞同：0
> 
> 时间：2012-05-24T09:30:25.587
> 
> 标签：javascript, html, graph

下面是关于动态图的代码链接。我在制作红线时遇到问题，正在更新并与蓝线一起前进。我不知道问题出在哪里，使动态图中的红线成为静态。

以及代码的解决方案？再次感谢您的帮助..

[http://jsfiddle.net/EkkBQ/](http://jsfiddle.net/EkkBQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:57:57.337

您需要告诉它也更新第二系列数据。我无法弄清楚平滑，或者一旦你有 > 1 个数据流就可以平滑。

[http://jsfiddle.net/EkkBQ/8/](http://jsfiddle.net/EkkBQ/8/)

添加的关键代码：

```
var seriesA = this.series[1];

   setInterval(function() {

   var x = (new Date()).getTime(), // current time

   y = Math.random();

   seriesA.addPoint([x, y], true, true);

}, 1000); 
```

我复制了将系列数据添加到图表的调用 - 将系列变量更改为 seriesA 然后告诉它提取第二系列数据（系列[1](http://jsfiddle.net/EkkBQ/8/)）。

希望这可以帮助。

# javascript - Highcharts 工具提示溢出被隐藏

> ID：10734746
> 
> 赞同：37
> 
> 时间：2012-05-24T09:30:47.103
> 
> 标签：javascript, jquery, tooltip, highcharts

我的问题是，当图表绘制区域小于高图工具提示时，工具提示的一部分在溢出图表绘制区域的地方被隐藏。

无论图表绘图区域的大小如何，我都希望工具提示始终可见。

没有 CSS 设置有帮助，也没有更高的 z-index 设置有帮助。

这是我的例子... [http://twitpic.com/9omgg5](http://twitpic.com/9omgg5)

任何帮助都会很感激。

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-25T09:35:26.727

这个CSS帮助了我：

```
.highcharts-container { overflow: visible !important; } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T07:14:54.730

好的，抱歉耽搁了。我找不到更好的解决方案，但我找到了解决方法。

这是我所做的，也是我建议大家尝试的：

**将 tooltip.useHTML 属性设置为 true**（现在您可以使用 html 和 CSS 进行更多控制）。像这样：

```
tooltip: {
    useHTML: true    
} 
```

**取消设置**可能与默认工具提示功能有关的所有默认工具提示人员。这是我所做的...

```
tooltip: {                        
    shared: false,
    borderRadius: 0,
    borderWidth: 0,
    shadow: false,
    enabled: true,
    backgroundColor: 'none'
} 
```

**确保您的图表容器的 css 属性“溢出”设置为可见。**还要确保保存图表容器的所有 DOM 元素（div、section 等）也将 css“溢出”属性设置为“可见”。通过这种方式，您将确保您的工具提示始终可见，因为它会溢出他的父母和他的其他“祖先”（这是一个正确的术语吗？:)）。

**使用标准 CSS 样式根据需要自定义工具提示格式化程序。**这是我所做的：

```
tooltip.formatter: {
    < div class ="tooltipContainer"> Tooltip content here < /div >
} 
```

* * *

这就是它的样子：

```
tooltip: {                        
    tooltip.formatter: {
        < div class ="tooltipContainer"> Tooltip content here < /div >
    },
    useHTML: true,
    shared: false,
    borderRadius: 0,
    borderWidth: 0,
    shadow: false,
    enabled: true,
    backgroundColor: 'none'
} 
```

如果您有更好的解决方案，请发布。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-10T12:32:45.923

一种现代方法（Highcharts 6.1.1 和更新版本）是简单地使用`tooltip.outside`（[API](https://api.highcharts.com/highcharts/tooltip.outside)）：

> 是否允许工具提示在图表的 SVG 元素框之外呈现。默认情况下 ( `false`)，工具提示在图表的 SVG 元素中呈现，这导致工具提示在图表区域内对齐。对于小型图表，这可能会导致剪切或重叠。当 时`true`，会创建一个单独的 SVG 元素并将其覆盖在页面上，从而允许工具提示在页面本身内部对齐。

很简单，这意味着将这个值设置为`true`，例如：

```
Highcharts.chart('container', {
    // Your options...
    tooltip: {
        outside: true
    }
}); 
```

请参阅[此 JSFiddle 演示](http://jsfiddle.net/71uknto5/6/)，了解如何设置此值以`true`修复空间/剪切问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-25T17:22:28.970

简单地添加这个 CSS 在我的情况下工作（表格单元格中的小图表）：

```
.highcharts-container svg {
    overflow: visible !important;
} 
```

工具提示选项 useHtml 不是必需的：

```
tooltip: {
    useHTML: false
} 
```

适用于 IE8/9 和 FF33.1（FF 引起了麻烦）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-07T13:01:39.020

我最近遇到了同样的问题，但是使用了引导容器！(bs3)

这些解决方案都不起作用，但我自己发现了。

它是由于 bootstrap _normalizer 属性

```
svg:not(:root) {
  overflow: hidden !important;
} 
```

所以添加两者：

```
.highcharts-container, svg:not(:root) {
    overflow: visible !important;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-29T12:25:24.070

我知道这个问题很老，但我只是想分享我的解决方案，它基于其他两个答案，但我认为您使用此代码可以获得更好看的结果：

**工具提示选项：**

```
tooltip: {
   useHTML: true,
   shared: false,
   borderRadius: 0,
   borderWidth: 0,
   shadow: false,
   enabled: true,
   backgroundColor: 'none',
   formatter: function() {
      return '<span style="border-color:'+this.point.color+'">' + this.point.name + '</span>';
   }
} 
```

**CSS：**

```
.highcharts-container { 
    overflow: visible !important; 
}

.highcharts-tooltip span>span {
    background-color:rgba(255,255,255,0.85);
    border:1px solid;
    padding: 2px 10px;
    border-radius: 2px;
}

#divContainerId .highcharts-container{
    z-index: 10 !important; /*If you have problems with the label hiding behind some other div or chart play with z-index*/
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-27T20:16:13.563

我只想添加一个示例并证明 .highcharts-tooltip-box 不必设置为溢出工作。

```
/* .highcharts-tooltip-box {
  visibility: inherit !important;
} */

.highcharts-container,
svg:not(:root),
.chart-container {
  overflow: visible !important;
} 
```

**演示：** [https ://jsfiddle.net/BlackLabel/3fubr1av/](https://jsfiddle.net/BlackLabel/3fubr1av/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-27T06:52:27.080

没有一个解决方案对我有用。当工具提示大于图表时，它根本不显示。

最终我们意识到 Highcharts 实际上是把 tooltip 隐藏在了 class`highcharts-tooltip-box`中，所以解决方法是设置它继承哪个 class 默认：

```
 .highcharts-tooltip-box {
    visibility: inherit !important;
  } 
```

之后溢出仍然需要设置为可见：

```
 .highcharts-container,
  svg:not(:root),
  .chart-container {
    overflow: visible !important;
  } 
```

如果遇到任何问题，请确保将容器中的 z-index 设置得更高。

# php - 渲染输出在 PHP 中另存为图像

> ID：10734747
> 
> 赞同：1
> 
> 时间：2012-05-24T09:30:49.080
> 
> 标签：php, image, curl, mathml

我有代码

```
 <img src="http://www.wiris.net/demo/editor/render.png?mml=<math xmlns='http://www.w3.org/1998/Math/MathML'><mfenced open='[' close=']'><mrow><mi>d</mi><mi>f</mi><mi>g</mi><mi>d</mi><mi>dipen</mi><mi>g</mi></mrow></mfenced></math>"/> 
```

如果我将此代码放在浏览器中，我可以看到一个图像。我需要将该图像存储在我的本地主机中。我尝试了 GD,Copy(),Curl Image store 但没有任何帮助。

请帮帮我

问候迪彭

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:40:20.333

试试下面的功能：

```
function grabLiveImage($imgUrl,$pathToSave,$filename='')
{
    $data = file_get_contents($imgUrl);
    if($filename == '')
        $filename = getFilename($imgUrl);
    $fp  = fopen($pathToSave.$filename, 'w+');  
    fputs($fp, $data);
    fclose($fp);    
    return $filename;
}
function getFilename($url)
{
    $basename = basename($url);
    $temp = explode('?',$basename);
    return $temp[0];
} 
```

例如 $url = 'http://www.wiris.net/demo/editor/render.png?mml=%3Cmath%20xmlns=%27http://www.w3.org/1998/Math/MathML%27%3E %3Cmfenced%20open=%27[%27%20close=%27]%27%3E%3Cmrow%3E%3Cmi%3Ed%3C/mi%3E%3Cmi%3Ef%3C/mi%3E%3Cmi%3Eg%3C /mi%3E%3Cmi%3Ed%3C/mi%3E%3Cmi%3Edipen%3C/mi%3E%3Cmi%3Eg%3C/mi%3E%3C/mrow%3E%3C/mfenced%3E%3C/math %3E';

grabLiveImage($url,'test/','test.jpg')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:37:39.587

Javascript！

*   制作[画布](http://appcropolis.com/blog/javascript-encode-images-dataurl/)（drawImage）。
*   获取 DataURL - getImageDataURL( jQuery('img#yourimg').attr('src'), function(image) { ajax('post.php', image.data) });
*   对服务器的 AJAX 请求，将 DataURL 保存到文件 (file_put_contents('file.png', $_POST['data']))

# css - 行和列中的 DIV 中的 DIV

> ID：10734748
> 
> 赞同：0
> 
> 时间：2012-05-24T09:30:52.097
> 
> 标签：css, html

我想在一个 div 中有 div，它们需要在表格布局中。但是我的css有一个错误，或者是因为我的进度条，不知道。我给你截屏了它的样子。![在此处输入图像描述](../Images/c414139e8bddd87bd206f3c966125962.png)

还有第三个，我不知道为什么，1 和 2 应该在蓝色之下...:(

我的CSS：

```
#breadcrumb {padding-bottom: 40px;}
.crumbs li {  display: inline; }
.crumbs li div.first { padding-left: 8px; }
.crumbs li div.last { padding-right: 8px; }
.crumbs li div { color: #666; display: block; float: left; font-size: 12px;       margin-left: -13px; padding: 7px 37px 11px 25px; position: relative; text-decoration: none; }

.crumbs li div { background-image: url('images/bg-crumbs.png');  background-repeat: no-repeat; background-position: 100% -96px;}
.crumbs li div.active { color: #333; background-position: 100% 0px; }
.crumbs li.first div span { height: 29px; width: 3px; border-left: 1px solid #d9d9d9; position: absolute; top: 0px; left: 0px; }
.crumbs li.last div.active { background-position: -50px 0px;}
.crumbs li.last div { background-position: -50px -96px;}
.crumbs li.last div span { height: 29px; width: 3px; border-right: 1px solid #d9d9d9; position: absolute; top: 0px; right: 0px; }

div.balken {padding-bottom: 5px;padding-top: 5px;background: #003466; }

span.produkt {padding-left: 20px;color: white;}
#wrapper {
    margin:0px auto;
    background:#FFFFFF;
    padding:0px;
    border: 0px solid #000000;
    width:920px;
}

#produkte {
    background: #FFFFFF;
    border:1px solid #003466;
    margin-left: 25px;
    margin-right: 20px;
    clear:both;
}

.produkt

{
height: 50px;
width: 50px;
border:3px solid #003466;
padding: 20px;
margin: 25px;
display: inline;} 
```

我的 HTML

```
<body>
<div id="wrapper" class="fixed">
<div>
        <div id="breadcrumb">
            <ul class="crumbs">
                <li class="first"><div class="active" style="z-index:9;"><span></span><b>1\. </b>Produkt w&auml;hlen</div></li>
                <li><div style="z-index:8;"><b>2.</b> Ihre Handynummer</div></li>
                <li><div style="z-index:7;"><b>3.</b> Bestellung best&auml;tigen</div></li>
                <li><div style="z-index:6;"><b>4.</b> Produkt bezahlen</div></li>
                <li class="last"><div style="z-index:5;"><span></span><b>5.</b> Vielen Dank</div></li>
            </ul>
        </div>
</div>
<div id="produkte" >
<div class="balken"><span class="produkt"><b>W&auml;hlen Sie ein Produkt</b></span></div>
<div class="produkt">1</div>
<div class="produkt">2</div>
<br><br><br>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:01:39.350

这是我所做的两个更改

**html**

```
<span class="produkt"><b>W&auml;hlen Sie ein Produkt</b></span> <!-- changed it span.produkt to span.produkt1 --> 
<span class="produkt1"><b>W&auml;hlen Sie ein Produkt</b></span> 
```

**CSS**

```
.produkt {
height: 50px;
width: 50px; float: left; margin: 10px; // added float and margin 
border:3px solid #003466;
padding: 20px;
}​ 
```

你需要这样的东西吗？

[这里的例子](http://jsfiddle.net/agriboz/vnjam/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:58:14.220

这是您的代码，在这些 div 之后添加了一些更改、添加`float:left;`到`.produkt`和 BR 。`clear:both;`

```
<style>
#breadcrumb {padding-bottom: 40px;}
.crumbs li {  display: inline; }
.crumbs li div.first { padding-left: 8px; }
.crumbs li div.last { padding-right: 8px; }
.crumbs li div { color: #666; display: block; float: left; font-size: 12px;       margin-left: -13px; padding: 7px 37px 11px 25px; position: relative; text-decoration: none; }

.crumbs li div { background-image: url('images/bg-crumbs.png');  background-repeat: no-repeat; background-position: 100% -96px;}
.crumbs li div.active { color: #333; background-position: 100% 0px; }
.crumbs li.first div span { height: 29px; width: 3px; border-left: 1px solid #d9d9d9; position: absolute; top: 0px; left: 0px; }
.crumbs li.last div.active { background-position: -50px 0px;}
.crumbs li.last div { background-position: -50px -96px;}
.crumbs li.last div span { height: 29px; width: 3px; border-right: 1px solid #d9d9d9; position: absolute; top: 0px; right: 0px; }

div.balken {padding-bottom: 5px;padding-top: 5px;background: #003466; }

#wrapper {
    margin:0px auto;
    background:#FFFFFF;
    padding:0px;
    border: 0px solid #000000;
    width:920px;
}

#produkte {
    background: #FFFFFF;
    border:1px solid #003466;
    margin-left: 25px;
    margin-right: 20px;
    clear:both;
}

.produkt{
height: 50px;
width: 50px;
border:3px solid #003466;
padding: 20px;
margin: 25px;
display: block;
float:left;
}
span.produkt {float:none;padding-left: 20px;color: white;}
</style>
<div id="wrapper" class="fixed">
<div>
        <div id="breadcrumb">
            <ul class="crumbs">
                <li class="first"><div class="active" style="z-index:9;"><span></span><b>1\. </b>Produkt w&auml;hlen</div></li>
                <li><div style="z-index:8;"><b>2.</b> Ihre Handynummer</div></li>
                <li><div style="z-index:7;"><b>3.</b> Bestellung best&auml;tigen</div></li>
                <li><div style="z-index:6;"><b>4.</b> Produkt bezahlen</div></li>
                <li class="last"><div style="z-index:5;"><span></span><b>5.</b> Vielen Dank</div></li>
            </ul>
        </div>
</div>
<div id="produkte" >
<div class="balken"><span class="produkt"><b>W&auml;hlen Sie ein Produkt<b></span></div>
<div class="produkt">1</div>
<div class="produkt">2</div>
<br style="clear:both"><br><br>
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:53:08.090

更改以下块代码

```
<div id="produkte" >
<div class="balken"><b>W&auml;hlen Sie ein Produkt</b></div>
<br clear="all" />
<div class="produkt">
<div class="produkt">1</div>
<div class="produkt">2</div>
</div>
<br clear="all" />
</div> 
```

如果需要，还可以在类**#produkte { ... }**中添加**高度属性**

# jquery - 如何通过单击链接而不是提交按钮来发出 AJAX 请求

> ID：10734749
> 
> 赞同：4
> 
> 时间：2012-05-24T09:31:05.980
> 
> 标签：jquery

如何通过单击链接而不是提交按钮来发出 AJAX 请求？我希望单击链接后从输入字段中发布数据

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T09:37:17.967

```
$('selector').click(function(e){
  e.preventDefault();
  $.ajax({
       url: "<where to post>",
       type: "POST",//type of posting the data
       data: <what to post>,
       success: function (data) {
         //what to do in success
       },
       error: function(xhr, ajaxOptions, thrownError){
          //what to do in error
       },
       timeout : 15000//timeout of the ajax call
  });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:47:02.197

以下是 AJAX 的工作原理：

```
$('#link_id').click(function(event){
   event.preventDefault(); // prevent default behavior of link click
   // now make an AJAX request to server_side_file.php by passing some data
   $.post('server_side_file.php', {parameter : some_value}, function(response){
      //now you've got `response` from server, play with it like
      alert(response);
   });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:40:17.980

您可以使用 JQuery 和表单序列化功能

```
$('#A-id-selector').click(function() {
    $.ajax({
        type:'POST', 
        url: 'target.url', 
        data:$('#Form-id-selector').serialize(), 
        success: function(response) {
          // Any code to execute on a successful return
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:36:33.673

使用 jQuery

```
$('#link-selector').on('click', function(event) {
    event.preventDefault();
    $.post('url', {$('form selector').serialize()}, function(json) {
        // proccess results
    }, 'json');
}); 
```

# javascript - 在 foreach 循环中使用 JavaScript 变量之前，如何从 JavaScript 变量中删除或排除组件？

> ID：10734750
> 
> 赞同：-1
> 
> 时间：2012-05-24T09:31:05.997
> 
> 标签：javascript, asp.net

我有一个网页，其中包含 ASP.NET 面板和 JavaScript，当用户单击展开/折叠所有按钮时，它会展开和折叠它们。我想排除一些面板，这样当用户单击按钮时它们不会被展开或折叠（它们包含在用户控件中并显示为嵌套面板）。

我有以下 JavaScript：

```
function expandCollapsePanels() 
{
    var collapse = $('#<%= lbltogglePanels.ClientID %>').html() == "Collapse all panels";
    var panels = Sys.Application.getComponents();

    for (var i in panels) 
    {
        //if panel name/ID contains 'pnlDetails', remove it (or don't collapse/expand it)

        panels[i].set_Collapsed(collapse);
    }
} 
```

如何修改此代码以删除包含“pnlDetails”作为其 ID（或元素名称）一部分的面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:35:41.953

你的意思是这样的吗？

```
 for (var i in panels) 
    {
        //if panel name/ID contains 'pnlDetails', remove it (or don't collapse/expand it)
        if(panels[i].name.indexOf("pnlDetails") > -1 || panels[i].ID.indexOf("pnlDetails") > -1){
            panels[i].set_Collapsed(collapse);
        }
    } 
```

# jsp - 在单个 jsp 页面中加载大量记录的性能问题

> ID：10734751
> 
> 赞同：0
> 
> 时间：2012-05-24T09:31:09.873
> 
> 标签：jsp, jakarta-ee, servlets, struts

我在 StringBuffer 中存储了大量（超过 20000 条）记录，以便在 jsp 中显示。我使用 StringBuffer 存储在 servlet 中，并将其作为请求属性传递给 jsp。问题是加载所有记录需要太多时间。加载后，浏览器变慢了。有没有在单个 jsp 页面中加载大量记录的最佳方法？或者如何快速从 StringBuffer 读取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:37:57.057

我很确定问题不是来自 StringBuffer 或 JSP 生成的 HTML 代码。问题可能来自：

*   从数据库加载所有这些信息所需的时间
*   将巨大的 HTML 页面从服务器传输到客户端所需的时间。带宽不是无限的
*   浏览器解析和渲染一个巨大的 HTML 页面所花费的时间

无论如何，我非常怀疑用户能否在包含 20000 条记录的页面中找到他感兴趣的内容。提供一个搜索界面而不是显示所有内容，一次只显示 20、50 或 100 条记录的页面，几乎每个网站都这样做（想想谷歌：所有结果都不会显示在结果页面中，而只会显示在结果页面中的少数几个）。

# c# - 在流程执行期间不刷新重定向标准输出

> ID：10734756
> 
> 赞同：1
> 
> 时间：2012-05-24T09:31:28.403
> 
> 标签：c#, visual-studio-2010, process, redirectstandardoutput

我有一个控制台应用程序，我想在 ac# 应用程序中处理标准输出。

基本上我已经设法用这段代码做到了：

```
Process ProcessObj = new Process();

ProcessObj.StartInfo.WorkingDirectory = WorkingPath;
ProcessObj.StartInfo.FileName = ApplicationPath;
ProcessObj.StartInfo.Arguments = ApplicationArguments;

ProcessObj.StartInfo.UseShellExecute = false;
ProcessObj.StartInfo.CreateNoWindow = true;

ProcessObj.StartInfo.RedirectStandardOutput = true;

// Start the process
ProcessObj.Start();

// loop through until the job is done
bool stopper = false;
while (!stopper)
{
    stopper = ProcessObj.WaitForExit(100);

    string line = null;

    // handle normal outputs (loop through the lines)
    while (true)
    {
        line = ProcessObj.StandardOutput.ReadLine();
        if (line == null)
            break;

        Logger.Trace("Out: \"" + line + "\"");
    }
} 
```

当该过程仅运行几秒钟时，看起来整个过程都在正常工作。当我更改控制台应用程序的配置以计算更多时，进程运行了数小时。在这个时候，我的 C# 应用程序没有得到控制台应用程序的响应。由于控制台应用程序被隐藏，因此看起来应用程序卡住了，但事实并非如此。它已经在后台运行，并且似乎所有 std 输出仅在控制台应用程序完成执行时才通过管道传输到我的 c# 应用程序。所以问题是，我没有在我的 c# 应用程序中看到标准输出行。控制台应用程序完成后数小时后将刷新。

有没有办法刷新这个标准输出重定向？任何人都知道为什么这不像我想要的那样工作？

PS：当我在普通 cmd 窗口中独立执行控制台应用程序时，输出会实时显示，没有任何问题。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:39:13.627

尝试在应用程序运行时读取输出？并将其保存到缓冲区？然后在应用程序退出时处理输出。

伪东西

```
string buffer = string.Empty;
while(!process.HasExited)
{
    string line = process.Stream.ReadLine();
    if (line != null)
        buffer += Enviorment.Newline + line
}

// Do stuff without put here
Console.Write(buffer); 
```

# svn - 为什么在运行 svn stat 时，global-ignores 中提到的一些目录仍然出现？

> ID：10734765
> 
> 赞同：2
> 
> 时间：2012-05-24T09:32:07.697
> 
> 标签：svn, cygwin, ignore

我在 Cygwin 下运行 svn。这是我的 svn 配置中的*global-ignores*行：

```
global-ignores = .classpath .project ~*.docx *~ .settings 
```

*然而我从svn stat*得到以下结果：

```
$ svn stat
?       .settings/org.eclipse.wst.jsdt.ui.superType.name
?       .settings/org.eclipse.wst.jsdt.ui.superType.container
?       .settings/org.eclipse.m2e.core.prefs
?       .settings/.jsdtscope 
```

为什么会出现*.settings*目录？如果我将*.foobar*添加到*global-ignores*

```
global-ignores = .classpath .project ~*.docx *~ .settings .foobar 
```

并创建一个新目录*.foobar*它按预期隐藏在状态中：

```
$ mkdir .foobar
$ ls -d .*
.  ..  .classpath  .foobar  .metadata  .project  .settings
$ svn stat
?       .settings/org.eclipse.wst.jsdt.ui.superType.name
?       .settings/org.eclipse.wst.jsdt.ui.superType.container
?       .settings/org.eclipse.m2e.core.prefs
?       .settings/.jsdtscope 
```

我还尝试了以下全局忽略：

```
global-ignores = .classpath .project .settings 
```

但 .settings 仍然显示在状态中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:27:14.277

这似乎`.settings`是一个版本化的项目。跑去`svn info .settings`确认。如果它是版本化的，SVN 不会忽略它 - 忽略仅适用于未版本化的项目。

# sql-server-2008 - SQL Server 2008 中的约束

> ID：10734767
> 
> 赞同：1
> 
> 时间：2012-05-24T09:32:11.737
> 
> 标签：sql-server-2008

在表中`Semester`

```
Id             title           Year
ـــــــــــــــــــــــــــــــــــ
 1             first           2012
 2             second          2012 
```

如何定义列的约束`title`以仅允许：

*   第一的
*   第二
*   夏天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:34:36.017

```
ALTER TABLE table_name
   ADD CONSTRAINT title_value CHECK (title IN ('first', 'second', 'Summer')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:34:46.587

```
ALTER TABLE your_table
WITH CHECK ADD  CONSTRAINT [const_name] 
CHECK  ([title]='first' OR [title]='second' OR [title]='Summer') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:35:44.410

```
create table Semester(
id int,
title varchar(50),
[year] int,
check  ( title in('first','second','Summer'))
) 
```

# asp.net - 进程在任务管理器中启动但不执行

> ID：10734772
> 
> 赞同：1
> 
> 时间：2012-05-24T09:32:21.367
> 
> 标签：asp.net, process, exe

几天来我一直在努力解决这个问题，并在高处和低处寻找可能的解决方案，但找不到任何东西。

我的问题是我正在尝试从我的 ASP 网站运行我在 Delphi 中编译的 .exe 程序。Delphi 程序只是生成一个带有一些元数据的 pdf 报告并将其保存在某个文件夹中。

现在，当我访问网站并单击应该启动程序的按钮时，程序会在服务器上启动（我可以在任务管理器中看到它），但不会执行它应该执行的操作。当我在任务管理器中结束进程时，网站就会挂起 WaitForExit （因为程序永远不会执行和退出），然后网站会收到程序已退出的反馈并继续它应该做的事情......

这是我调用来运行 exe 的代码：

尝试 {

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
        process.StartInfo.FileName = "C:\\inetpub\\wwwroot\\WILMA\\DailyRep.exe";
        //start and wait for the exe the run to completion
        process.Start();
        process.WaitForExit();
        //send the .pdf to the user

        Response.ClearContent();
        Response.AddHeader("Content-disposition", "attachment; filename=" + "Daily_Report.pdf");
        Response.ContentType = "application/pdf";
        Response.TransmitFile("C:\\inetpub\\wwwroot\\WILMA\\DailyRep.pdf");
        Response.End();
    }
    catch (Exception ex)
    {

        //throw;
    } 
```

该程序不需要用户添加任何细节或任何东西。它只是执行，生成pdf并退出。

我已经设置了适当的安全权限和所有，但我显然错过了一些东西......

任何帮助或想法将不胜感激。

非常感谢！

# java - 两人回合制游戏安卓

> ID：10734774
> 
> 赞同：0
> 
> 时间：2012-05-24T09:32:42.920
> 
> 标签：java, android, http, sockets, multiplayer

我想为安卓制作一个两人回合制游戏（想想井字游戏）。我不确定如何实现手机和服务器之间的通信。我应该使用套接字还是 http 客户端？任何人都可以指导。http 客户端的问题是我必须定期轮询服务器以查看是否有任何数据到达。如果我使用 http 客户端，还有其他方法可以从服务器推送数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:52:57.017

您是否考虑过 HTTP 请求 +[推送通知](https://developers.google.com/android/c2dm/)？根据特定类型的游戏，这可能是我猜的最佳解决方案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:19:15.900

您可以使用 App Engine 的 Channel API

[https://developers.google.com/appengine/docs/java/channel/](https://developers.google.com/appengine/docs/java/channel/)

即使没有官方的 Android 库，您也可以使用这个 WebView 包装器

[https://github.com/burcu/android-channel-api](https://github.com/burcu/android-channel-api)

但我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T23:44:43.940

这是一个老问题，但如果您仍在寻找解决方案，您可以尝试新的[Google Play 游戏服务](https://developers.google.com/games/services/)。

# jquery - bootstrap popover：使用 ajax 重新加载内容

> ID：10734781
> 
> 赞同：8
> 
> 时间：2012-05-24T09:33:02.500
> 
> 标签：jquery, ajax, twitter-bootstrap, popover

我无法使用 ajax 重新加载引导弹出窗口的内容。这是一些代码： http: [//pastie.org/3960102](http://pastie.org/3960102)

第二个 ajax 请求（当我单击“a.close”时）返回更新的内容（我可以在控制台中看到它），但它没有加载到弹出框内。

我四处寻找解决方案，它们似乎都不起作用。

我还能尝试什么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:17:32.553

`data-content`您可以直接访问弹出框工具提示内容，而不是重置属性。

替换以下行：

```
t.attr('data-content', r); 
```

使用此工作代码：

```
t.data('popover').tip().html(r); 
```

**2012 年更新**

正如[Pigueiras](https://stackoverflow.com/users/1004046/pigueiras)在他的评论中指出的那样，这将破坏弹出框的默认模板。更好的解决方案是替换以下内容`.popover-content`：

```
t.data('popover').tip().find('.popover-content').empty().append(r); 
```

**2016 年更新**

感谢另一条评论，这里是 Bootstrap 3 的工作代码：

```
t.data('bs.popover').tip().find('.popover-content').empty().append(r); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T12:29:58.270

为什么`empty()`以及`append()`何时可以更换？

```
t.data('popover').tip().find('.popover-content').html(r); 
```

编辑：

此外，当 popover 已经初始化并且您想要动态更改内容时，第一种方法是正确的并且工作正常（bootstrap 2.1）。您只需`'show'`再次调用弹出框即可刷新（内容和位置）：

```
t.attr('data-content', r);
t.popover('show'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-04T07:26:08.387

经过几个小时的搜索，我想通了。对于 Bootstrap 3，您可以使用下面的代码。更多参考是： [https](https://github.com/twbs/bootstrap/issues/11528) ://github.com/twbs/bootstrap/issues/11528和[Bootstrap 弹出内容不能动态更改](https://stackoverflow.com/questions/13564782/bootstrap-popover-content-cannot-changed-dynamically) `if($element.data('bs.popover')) { $element.data('bs.popover').options.content = 'NEW CONTENT'; }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T08:38:06.223

同样的问题，我用这个技巧解决了它，代码很冗长，只是一个例子，优化它！

```
// functions container
var doc = 
{
    doPopover : function( item_id, title, content )
    {
        // get jq item
        var item = $('#' + item_id );

        // the trick to "refresh content" in every call
        item.attr('data-content', content);

        // popover
        item.popover(
        {
            title   :   title,
            trigger :   'manual'
        }).popover('show');
    },

    popoverFirstCall : function()
    {
        this.doPopover('myDiv', 'Title', 'MyContent1');
    },

    popoverSecondCall : function()
    {
        var content = 'xxx'; // get the content in Ajax

        this.doPopover('myDiv', 'Title', content);
    }
}

// call funcs in your views
$(document).ready(function()
{
    // first popover with first content
    doc.popoverFirstCall();

    // this event wich call the ajax content and refresh popover. 
    $('#button').on('click', $.proxy(doc, 'popoverSecondCall'));
}); 
```

我想刷新标题的技巧也是一样的。

如果您有更好的解决方案，请告诉我！

编辑 ：

我继续调查，

我们可以在插件代码上看到：

```
getContent: function () {
      var content
        , $e = this.$element
        , o = this.options

      content = $e.attr('data-content')
        || (typeof o.content == 'function' ? o.content.call($e[0]) :  o.content)

      return content
    } 
```

因此，内容是在 attr "data-content" 上获取的，或者在 popover 的第一次调用（实例化）时给出的选项上。

但是，实际上，问题是，选项被缓存并且不会在每次调用时刷新，所以必须使用：

```
$('item_id').attr('data-content', 'some content'); // and warning, it is different than
$('item_id').data('content', 'some content'); 
```

引导程序获得 attr 方式。

标题相同：

```
getTitle: function () {

      var title
        , $e = this.$element
        , o = this.options

      title = $e.attr('data-original-title')
        || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

      return title
    } 
```

所以，doPopover 函数可以是：

```
 doPopover : function( item_id, title, content )
    {
        // get jq item
        var item = $('#' + item_id );

        // the trick to "refresh content" in every call
        item.attr('data-content', content); // do not use data() way.
        item.attr('data-original-title', title);

        // popover (trace first call if you want)
        item.popover(
        {
            trigger :   'manual'
        });

        item.popover('show);
    } 
```

为我工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T23:42:34.330

这项工作形成了我：Inizialize popover on document ready（数据是一个带有 HTML 和找到元素大小的 json）

```
 $.ajax({
url: "/alpha/annuncio/scegliGestione",
success: function (data) {
    $('#notifiche').popover(
        {
            title:"Le tue notifiche",
            placement:'bottom',
            trigger:'manual'
        });
    $('#notifiche').find(".badge").text(data.size);

} 
```

});

在 popover 的触发事件上，您必须依次切换 popover（显示或隐藏），使 popover-content 为空，最后附加 data.html

```
$("#notifiche").click(function(){

     $.get("/alpha/annuncio/scegliGestione", function(data) {
         $('#notifiche').popover('toggle')
         $("body").find('.popover-content').empty()
         $("body").find('.popover-content').append(data.html);

         $('#notifiche').find(".badge").text(data.size);
     });
    /* */

 }); 
```

# encryption - AES/Rijndael：搜索加密数据 - 静态盐和 IV

> ID：10734782
> 
> 赞同：1
> 
> 时间：2012-05-24T09:33:07.233
> 
> 标签：encryption

我想搜索加密数据。这意味着每次我加密相同的明文时都需要有相同的密文。即想到一个加密名称列表，我想在其中找到所有“Kevin”。我现在将加密“Kevin”并在数据库中搜索加密文本。所有点击都将是“Kevin”的——但仍然只有知道密码的人知道。

现在我的问题是：如果我一直使用相同的盐和 IV（以获得上述效果），安全性会怎样？加密仍然安全吗？或者有没有其他方法可以搜索加密数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:55:16.823

如果要进行确定性加密，则应使用专为确定性加密设计的加密模式（而不是修改为其他目的设计的加密模式）。

一种可能性是 [RFC 5297](https://www.rfc-editor.org/rfc/rfc5297)中描述的 SIV 加密模式。

（当然，确定性加密有其缺点，但讨论这不是这个问题的一部分。）

# oracle - Oracle 数据库审计跟踪

> ID：10734783
> 
> 赞同：3
> 
> 时间：2012-05-24T09:33:12.407
> 
> 标签：oracle, logging, audit

某人（或某物）实际上错误地更新了我表中的值。我试图找出更新发生的时间。不幸的是，没有为所述表创建审计触发器。

是否有其他方法或日志可以检查和验证在什么时间运行了哪些 SQL 语句？

我曾尝试查看 v$sql 表，但我认为该表并未捕获正在数据库上执行的所有 SQL 语句。例如，我专门做了一个 UPDATE 语句，但它没有在 v$sql 表中捕获。

我可以看一下redo.log吗？但是，我不知道如何解释这个日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:34:36.303

Your only real option is logminer, which isn't for the faint of heart.

The documentation is here: [http://docs.oracle.com/cd/B19306_01/server.102/b14215/logminer.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14215/logminer.htm)

`v$sql` rows may get aged out after a while. Did you account for case sensitivity when looking in `v$sql`?

```
select * from v$sql where upper(sql_fulltext) like '%UPDATE%'; 
```

# joomla - Joomla 1.5.26 与 php 5.3.13 兼容吗？

> ID：10734789
> 
> 赞同：1
> 
> 时间：2012-05-24T09:33:26.697
> 
> 标签：joomla

我的主人似乎不这么认为，并说我必须升级。但这是我宁愿不采取的相当大的飞跃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:52:03.607

杰尔玛，

当然，因为 Joomla 1.5.15 + 与 PHP 5.3 兼容。

*请注意，只有 OpenID 库尚不兼容 PHP 5.3。

作为链接[技术要求中 Joomla 1.5.x 的要求](http://www.joomla.org/technical-requirements.html)

显示：Joomla 1.5.x 的要求

软件 PHP* 推荐 5.2 +

# android - android 2d 图形的参考资料？

> ID：10734794
> 
> 赞同：0
> 
> 时间：2012-05-24T09:33:39.043
> 
> 标签：android, graphics, 2d

有人可以指出我关于 android 2d 图形的任何好的参考。我已经在开发者网站上，但没有太多帮助。我想了解更多关于画布上的工作。现在我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:41:13.767

不太确定您是否想要一个仅显示 2d 图形的屏幕，或者您将能够操作 2d 图形的屏幕。如果你想显示 2d 图形，只是谷歌教程，有很多像[这样](http://jmsliu.com/199/android-canvas-example.html)的非常详细的教程。但是如果你想操作 2d 图形[这里](http://marakana.com/s/android_2d_graphics_example,1036/index.html)是一个很棒的教程

# git - 可以在 Git 上拥有我的游戏源代码吗？

> ID：10734795
> 
> 赞同：0
> 
> 时间：2012-05-24T09:33:43.927
> 
> 标签：git, github

“源”是指一切，音频、模型、纹理、实际代码等等。我主要想使用 git 以便和朋友一起开发游戏，而且我使用的是免费版本的 Git，但无论如何我打算让游戏开源。如果实际游戏内容达到几GB，会不会有问题？我是否必须以某种方式将其从 repo 中排除并在某个时候以另一种方式共享它？

**编辑：**我说的是名为 Git 的实际 cli 软件和名为 Github 的服务，它们似乎结合在一起。我打算在`git`本地使用，然后推送到Github上供朋友们下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:37:20.143

Git 对于处理大型历史记录很有效，但在处理大型文件时可能效率低下。此外，在 Git 中存储（大）二进制文件的好处有限。话虽如此，如果您的图像、声音、纹理……不是太大，您应该可以在 Git 中管理它们。

您可能还希望将您的“资产”（图像、声音、纹理、......不是源代码的东西）分离到一个单独的 git 存储库（作为子模块包含在源代码存储库中），这样后者就不会变得太笨重了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:40:41.880

将所有图像、纹理和声音放到 git 存储库中并不是一个好主意，因为文件的每个版本都作为单独的对象存储在存储库中（而不是与以前的版本不同），并且 git 已针对跟踪缓慢变化的文本进行了优化（源代码）文件，这才是它真正的亮点。我建议您希望拥有可能的资源，您将它们放在单独的存档中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:49:22.570

在[Github](https://github.com/plans)方面，他们这样说空间：

> **为什么我看不到任何磁盘空间限制？**
> 
> GitHub 没有任何硬存储限制。我们对每个计划都有软限制以防止滥用。我们发现几乎每个人都使用了这个限制的一小部分。如果您发现自己需要更多磁盘空间用于合法用途，请联系我们。

众所周知，他们对在免费帐户上运行的真正开源项目非常宽容，即使在有明确限制的时候也是如此。不过，在将千兆字节的资产转储到免费帐户之前，您可能应该询问一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T19:10:13.333

关于大文件，有几个选项。一个好的方法是在 GitHub 上有两个存储库；一个用于大型“imagy”文件，另一个用于源的其余部分。使“imagy”存储库成为源存储库的子模块。由于“imagy”存储库应该不经常更改，因此您不会在日常使用中受到影响。

# android - 上下文菜单项需要的建议

> ID：10734797
> 
> 赞同：0
> 
> 时间：2012-05-24T09:33:52.040
> 
> 标签：android

我有一个 XML 布局，它有两个编辑文本字段，一个用于“标题”，另一个用于“故事”，当用户在这些文本字段中输入他的数据并按下后退按钮时，该条目将保存在列表中视图作为标题集。列表视图存在于活动中，比如 A1。现在 A1 扩展了 Activity。此外，只要“长按”列表中的项目，就会出现一个上下文菜单，其中包含编辑、删除和阅读按钮。现在，如果按下编辑按钮，我需要打开另一个活动，该活动可以编辑在与单击的项目相对应的文本字段中输入的数据，此外，我还需要在列表中单击的项目的 ID 和位置。我正在使用 ListView 类型的列表变量来添加我的适配器。此外，我正在检查“

这是活动 A1 的一些代码：“ static id_item_clicked;

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // here arg3 is the id of the item which is pressed
    registerForContextMenu(arg1);
    final long row_passed = arg3;
    Cursor c = (Cursor) arg0.getItemAtPosition(arg2);
    title = c.getString(c.getColumnIndex(DataHolder.KEY_TITLE));
    story = c.getString(c.getColumnIndex(DataHolder.KEY_STORY));
            ........

@Override
public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    id_item_clicked = arg3;
    return false;
}

    @Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add("EDIT");
    menu.add("READ");
    menu.add("DELETE");
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    if (item.getTitle() == "EDIT") {

        int position = list.getSelectedItemPosition();
        long item_id = list.getSelectedItemId();

    }
    if (item.getTitle() == "READ") {

    }
    if (item.getTitle() == "DELETE") {

    }
    return super.onContextItemSelected(item);
} " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:08:04.007

您需要使用 获取上下文菜单信息`AdapterContextMenuInfo`，然后`info.id`将为您提供行 ID：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    long rowid = info.id    // This is your row id
    // Your code here
} 
```

# wpf - WPF 在代码隐藏中更改动态资源

> ID：10734800
> 
> 赞同：0
> 
> 时间：2012-05-24T09:33:59.473
> 
> 标签：wpf, radio-button, controltemplate

标准 RadioButton 不支持设置椭圆的颜色。因此，我从这个位置获取了一个单选按钮模板作为自定义单选按钮的基础： [单选按钮样式和模板](http://msdn.microsoft.com/en-us/library/ms751600)

```
<Ellipse.Fill>
<LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
    <LinearGradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="{DynamicResource ControlLightColor}" />
            <GradientStop Color="{DynamicResource ControlMediumColor}" Offset="1.0" />
        </GradientStopCollection>
    </LinearGradientBrush.GradientStops>
</LinearGradientBrush> 
```

ControlLightColor 和 ControlMediumColor 定义为：

```
<Color x:Key="ControlLightColor">#ffff9a</Color>
<Color x:Key="ControlMediumColor">#ffff9a</Color> 
```

这给了我们一个黄色的椭圆。

如何在代码隐藏中更改此颜色？

问候，

米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:41:13.890

按照以下 [步骤创建样式：在后面的代码中创建样式](https://stackoverflow.com/questions/1729368/creating-a-style-in-code-behind)

然后将其分配给您的 element.Style

您还可以通过以下方式访问资源

```
Resources["mykey"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:16:50.173

解决方案：

```
<Ellipse x:Name="Border" StrokeThickness="1" Fill="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RadioButtonColor}">

        Public ReadOnly Property RadioButtonColor() As SolidColorBrush
        Get
            Dim solidColorBrush As SolidColorBrush

            If MyBusinessLogic Then
                solidColorBrush = _radioButtonNotRequiredBrush
            Else
                solidColorBrush = _radioButtonRequiredBrush
            End If

            Return solidColorBrush
        End Get
    End Property 
```

为 JRB 的想法竖起大拇指。

# c# - 什么 SqlTrigger 属性以便仅在一列上指定触发器？

> ID：10734801
> 
> 赞同：0
> 
> 时间：2012-05-24T09:34:07.663
> 
> 标签：c#, sql-server, visual-studio-2008

对于一个简单的 sql-server 更新触发器，我可以写一个这样的类：

```
[Microsoft.SqlServer.Server.SqlTrigger (Name="MyTrigger", Target="[dbo].[MyTable]", Event="FOR UPDATE")]
public static void MyTrigger() { //... my code } 
```

但是，如果我只想触发一列更新，那将是这样的：

```
create trigger myTrigger
on myTable
for update as
if update(MyColumn)
begin
    -- my code
end 
```

我应该使用什么样的`Microsoft.SqlServer.Server.SqlTrigger`属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:12:49.440

可能这可以帮助你。

```
[Microsoft.SqlServer.Server.SqlTrigger (Name="Trigger1", Target="Table1", Event="FOR UPDATE")]
public static void Trigger1()
{
    SqlConnection conn = new SqlConnection("context connection=true;");
    SqlCommand cmd = new SqlCommand("select top 0 * from Table1", conn);

    conn.Open();

    SqlDataReader dr = cmd.ExecuteReader(CommandBehavior.SchemaOnly);

    if (SqlContext.TriggerContext.IsUpdatedColumn(dr.GetOrdinal("columnname")))
    {
        SqlContext.Pipe.Send("columnname was updated");
    }
    else
    {
        SqlContext.Pipe.Send("columnname was not updated");
    }

    dr.Close();
    conn.Close();
} 
```

您无法阻止有选择地运行触发器，无论更新列，它都会始终运行。但是，一旦启动，您可以查阅 COLUMNS_UPDATED() 函数：

> 返回一个 varbinary 位模式，指示表或视图中插入或更新的列。COLUMNS_UPDATED 用于 Transact-SQL INSERT 或 UPDATE 触发器主体内的任何位置，以测试触发器是否应执行某些操作。

因此，您可以根据更新的列调整触发逻辑以采取适当的行动。

话虽如此，从 SQLCLR 调用 WCF 是一个非常非常糟糕的主意。从触发器调用 WCF 更糟糕。您的服务器将在生产中死机，因为事务将阻止/中止等待某些 HTTP 响应爬回网络。更不用说您的调用在存在回滚的情况下本质上是不正确的，因为您无法撤消 HTTP 调用。执行此类操作的正确方法是通过队列将操作和 WCF 调用解耦。您可以使用用作队列的表来执行此操作，可以使用真正的队列，也可以使用更改跟踪。其中任何一个都允许您将更改和 WCF 调用分离，并允许您从单独的进程而不是 SQLCLR 进行调用

资料来源：[CLR 触发器仅更新特定列](https://stackoverflow.com/questions/9404533/clr-trigger-only-particular-column-get-updated)

# php - wordpress中的foreach

> ID：10734804
> 
> 赞同：0
> 
> 时间：2012-05-24T09:34:27.563
> 
> 标签：php, wordpress

我在使以下代码在我的 wordpress 侧栏中工作时遇到了一些问题：

 `````
 $the_query = get_posts( $args );

            $year_post = 0;
            foreach ($the_query as $post) : 
                setup_postdata($post);
                $current_year = get_the_time('Y'); 
                if( $current_year != $year_post ) {
                    $year_post = $current_year;
                    echo '<li><a href="'.get_year_link($current_year).'">'.$current_year.'</a></li>';
                }
                $month_post = 0;
                foreach ($post as $post_monthly) : 
                       setup_postdata($post_monthly);  
                       $current_month = get_the_time('m');
                        if ($current_month != $month_post){
                               $month_post =$current_month;
                               echo '<li><a href="'.get_year_link($current_month).'">'.$current_month.'</a></li>';
                        }

                        foreach ($post_monthly as $post_title) : 
                                setup_postdata($post_title);

                                echo '<li><a href="'.get_permalink().'">'.the_title().'</a></li>';
                        endforeach;

                endforeach;

            endforeach;

            wp_reset_postdata(); 
```` 

`使用此代码，我试图显示以下内容：`

 `*   2012年
    -5月
    *   Lorem ipsum
    *   Lorem ipsum
    *   Lorem ipsum

它显示 2012 年 5 月，但在显示帖子标题时出现以下错误：“警告：为 foreach() 提供的参数无效”

我已经检查了很多次这个代码，我似乎没有看到问题。

任何人都可以看到我缺少的东西，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T14:20:33.717

例如：

```
<?php   

    $args = array(

    'post_type' => 'art',

    'post_status' => 'publish',

    'posts_per_page' => -1,

    ); ?>
    <?php $my_posts = get_posts( $args );

    foreach($my_posts as $my_post){ ?>
    <?php $image = wp_get_attachment_image_src( get_post_thumbnail_id($my_post->ID),array(500,500)); ?>
        <div class="view_list">
        <div class="flt1 ">  <img src="<?php print $image[0]; ?> "></div>   

        <ul>
            <li> <? echo  $my_post->post_title; ?> </li>
            <li> <? echo the_time('l, F j, Y'); ?> </li>
            <?php $terms = wp_get_post_terms( $my_post->ID, array( 'act', 'subject' ) ); ?>
            <? // print_r ( $terms); ?>

            <img src="<?php echo $url[0]; ?>"  alt="" />
            <li><?php foreach ( $terms as $term ) : ?>
            <? $term_link = get_term_link( $term ); ?>
            <?php //echo $term->taxonomy; ?><a href="<? echo $term_link  ?>"><?php echo $term->name; ?></a> 
            <?php endforeach; ?></li>   
            <?php echo get_field('Height', $my_post->ID) .'*' .get_field('width', $my_post->ID) ;  ?></li>
        </ul>

        </div>  <? }?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:07:16.923

在 $arrays 之前添加 (array)：

```
foreach ((array)$post... 
```

忽略空的和这样的警告

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:41:34.400

您应该检查是否`$post_monthly`和`$post_title`实际上是数组。您可以使用[`var_dump()`](http://php.net/manual/en/function.var-dump.php).

很有可能在某个月份没有帖子，那么变量的值可能是`null`（我不是 wordpress 专家，但这就是错误信息的解释）。您可以通过在循环之前[`!empty()`](http://php.net/manual/en/function.empty.php)或之前设置条件来缓解它。[`is_array()`](http://php.net/manual/en/function.is-array.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:44:49.067

的返回值`get_posts()`是一个对象数组。那么，你`$post`包含一个对象，而不是一个数组。 [http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)``

# trigger.io - Trigger.IO：Hello world 应用程序未在 Android API 级别 10 上启动

> ID：10734809
> 
> 赞同：1
> 
> 时间：2012-05-24T09:34:41.540
> 
> 标签：trigger.io

尝试在 Android API 级别 10 上启动新创建的应用程序（无代码更改）时，我遇到了一个奇怪的问题。在模拟器上启动应用程序时，它进入无限循环，每次触发后 trigger.io 启动徽标闪烁环形。我在控制台中看到以下输出：

```
[   INFO] I/Forge   (  328): Loading initial page in webview.
[   INFO] I/Forge   (  328): Application in focus, resuming webview.
[   INFO] D/Forge   (  328): Returning event: {"event":"internal.connectionState
Change","params":{"wifi":false,"connected":true}}
[   INFO] I/Forge   (  344): Loading initial page in webview.
[   INFO] I/Forge   (  344): Application in focus, resuming webview.
[   INFO] D/Forge   (  344): Returning event: {"event":"internal.connectionState
Change","params":{"wifi":false,"connected":true}}
[   INFO] I/Forge   (  356): Loading initial page in webview.
[   INFO] I/Forge   (  356): Application in focus, resuming webview.
[   INFO] D/Forge   (  356): Returning event: {"event":"internal.connectionState
Change","params":{"wifi":false,"connected":true}} 
```

奇怪的是，它在较低和较高的 API 级别上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:31:10.903

哼！RTFM的经典案例！

从文档：

> 重要 Android 2.3 模拟器中有一个错误会导致您的应用程序无法使用：如果您管理自己的 Android AVD，则必须使用 Android 2.2 级别的 AVD。

# android - 带有处理程序的 Android 循环节拍

> ID：10734814
> 
> 赞同：0
> 
> 时间：2012-05-24T09:35:07.840
> 
> 标签：android, handler, runnable

我想了解的是如何使用节拍器在给定的时间范围内循环一个简单`Handler`的节拍。我读了很多书，看到了一些我可以做的事情，但最好的方法是 make a `Handler`，这是真的吗？所以在阅读后我尝试了一些东西，但我不能完全理解它，它现在不起作用。

**编辑：**

这就是我现在所拥有的，它不再崩溃，但它没有像它应该的那样播放声音。我做错了什么？

```
public class MainActivity extends Activity {

    private MediaPlayer mpBeat;

    private Handler playBeatHandler = new Handler();
    private Runnable playBeatTask = new Runnable() {
        public void run() {
            mpBeat.start();
            playBeatHandler.postDelayed(this, 500);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mpBeat = MediaPlayer.create(this, R.raw.beat);
        playBeatHandler.postDelayed(playBeatTask, 500);        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:50:52.783

这就是我所遇到的，对我建立稳定节拍有很大帮助！

[http://code.google.com/p/android-sleep-metronome/](http://code.google.com/p/android-sleep-metronome/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T09:51:25.113

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        playBeatHandler.postDelayed(playBeatTask, 0); // now works       
    } 
```

# html - 在 iPad 上，滚动条不出现

> ID：10734816
> 
> 赞同：0
> 
> 时间：2012-05-24T09:35:23.893
> 
> 标签：html, scrollbar

我在我的网络应用程序上的 iPad 上遇到问题（此处公开的解字游戏：http: [//xylophoneclient.apphb.com/](http://xylophoneclient.apphb.com/)）。

问题是滚动条在 iPad 上不可见（即，当旋转到水平视图时，并非所有内容都可见，但滚动条无法出现）。我什至尝试添加

```
<br style='clear:both;'/> 
```

在容器 div 的末尾。

它在 FF、Chrome 和 IE for windows 上按预期工作。

以前有人见过这种行为吗？

# c# - 在 Microsoft Word 2010 中将文本发送到邮件合并字段

> ID：10734817
> 
> 赞同：1
> 
> 时间：2012-05-24T09:35:27.790
> 
> 标签：c#, winforms, ms-word, mailmerge, word-2010

我正在使用以下代码将文本发送到一个简单的 word 模板，我目前只使用一个 MergeField 设置来测试我可以让它工作。
我正在使用的代码如下：

```
public static void ReplaceMailMergeField(string pWordDoc, string pMergeField, string pValue)
{
    object docName = pWordDoc;
    object missing = Missing.Value;
    Word.MailMerge mailMerge;
    Word._Document doc;
    Word.Application app = new Word.Application();
    app.Visible = false;
    doc = app.Documents.Open(ref docName, ref missing, ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing);
    mailMerge = doc.MailMerge;
    foreach (Word.MailMergeField f in mailMerge.Fields)
    {
        if (f.Code.Text.IndexOf("MERGEFIELD  \"" + pMergeField + "\"") > -1)
        {
            f.Select();
            app.Selection.TypeText(pValue);
        }
    }
    object saveChanges = Word.WdSaveOptions.wdSaveChanges;
    doc.Close(ref saveChanges, ref missing, ref missing);
    app.Quit(ref missing, ref missing, ref missing);
} 
```

我从我的应用程序中调用以下内容：

```
string pWordDoc = @"C:\Users\Pete-Laptop\Documents\CMS Document Mangement\Word Template.dotx";
cDocument.ReplaceMailMergeField(pWordDoc, "fieldAddress1", "Put address here!"); 
```

但什么也没有发生。当我单步执行代码时，它会到达 app.Documents.Open，然后似乎冻结了。我相信这是因为应用程序找不到我的 Word 文档。我将完整文件路径发送到文件名参数是否正确？如果没有，应用程序将如何找到我的 Word 模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:28:08.570

我使用的并且对我有用的最终代码如下：

```
public static void TextToWord(string pWordDoc, string pMergeField, string pValue)
    {
        Object oMissing = System.Reflection.Missing.Value;
        Object oTrue = true;
        Object oFalse = false;
        Word.Application oWord = new Word.Application();
        Word.Document oWordDoc = new Word.Document();
        oWord.Visible = true;
        Object oTemplatePath = pWordDoc;
        oWordDoc = oWord.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref oMissing);
        foreach (Word.Field myMergeField in oWordDoc.Fields)
        {
            Word.Range rngFieldCode = myMergeField.Code;
            String fieldText = rngFieldCode.Text;
            if (fieldText.StartsWith(" MERGEFIELD"))
            {
                Int32 endMerge = fieldText.IndexOf("\\");
                Int32 fieldNameLength = fieldText.Length - endMerge;
                String fieldName = fieldText.Substring(11, endMerge - 11);
                fieldName = fieldName.Trim();
                if (fieldName == pMergeField)
                {
                    myMergeField.Select();
                    oWord.Selection.TypeText(pValue);
                }
            }
        }
    } 
```

这段代码最初来自[这里](https://vivekcek.wordpress.com/2012/08/25/create-a-word-document-from-a-template-using-c-mail-merge/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:42:10.803

您可以尝试：

```
_doc = _app.Documents.Add(ref _docName , ref _missing , ref _missing , ref _missing ); 
```

代替

```
_doc = _app.Documents.Open(.......); 
```

然后检查此行是否正确：

```
if (f.Code.Text.IndexOf("MERGEFIELD  \"" + pMergeField + "\"") > -1) 
```

我有一个以这种方式工作的功能代码

```
 mailMerge = doc.MailMerge;         
        foreach (Word.MailMergeField f in mailMerge.Fields)         
        {    
             // Extract the name of the MergeField starting from the 11 character
             // and looking for the first space after the name 
             // (this means that you avoid MergeFields names with embedded spaces)
             string fieldName = f.Code.Text.Substring(11).Trim();
             int  pos = fieldName.IndexOf(' ');
             if (pos >= 0) fieldName = fieldName.Substring(0, pos).Trim();

             if (fieldName == pMergeField) 
             {
                   f.Select();                  
                   app.Selection.TypeText(pValue);  
             } 
```

# ruby - 在mongoid中查询和排序嵌入文档

> ID：10734818
> 
> 赞同：3
> 
> 时间：2012-05-24T09:35:30.613
> 
> 标签：ruby, mongodb, mongoid

我有三个班

```
class Post
 include Mongoid::Document
 include Mongoid::Timestamps
 belongs_to :user, :inverse_of => nil
 embeds_many :comments, :as => :commentable
 field :content, :type => String
end

class Commment
  include Mongoid::Document
  include Mongoid::Timestamps
  belongs_to :user, :inverse_of => nil
  embedded_in :commentable, :polymoriphic => true
end

class User
  has_many :posts, :dependent => :destroy
  field :name, :type => String
end 
```

每当用户创建新评论时，我想将其内容与用户发表的最新评论进行比较。这是我获取用户最新评论的代码：

```
comments_user=[]
Post.where("comments.user_id" => user.id).
     only(:comments).
     each {|p| comments_user += p.comments.where(:user_id => user.id).to_a}
latest_comment = comments_user.sort_by{|comment| comment[:updated_at]}.reverse.first 
```

上面的代码给了我结果，但采用的方法效率不高，因为我必须遍历用户评论的所有帖子才能找到最新评论。如果有的话，谁能给我一个更有效的解决这个问题的方法？简单来说，有没有什么办法可以得到这个用户的所有评论？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:51:01.973

这应该获取最新的用户评论：

```
Post.where("comments.user_id" => user.id).order_by(:'comments.updated_at'.desc).limit(1).only(:comments).first 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:41:17.443

这是嵌入的标准问题。它极大地改进了一些查询（“加载包含所有评论的帖子”），但使其他查询效率低/不切实际（“查找用户的最新评论”）。

我在这里看到两个选项：

*   继续嵌入和复制数据。也就是说，当用户发表评论时，将此评论嵌入到帖子文档和用户文档中。当然，这种数据重复有其缺点（如果您需要编辑评论怎么办？）；

*   停止嵌入并开始引用。这意味着评论现在是顶级实体。您无法快速加载带有评论的帖子，因为没有连接。但是现在其他查询速度更快，并且没有数据重复。

# android - 如何在android中获取USB模块的名称

> ID：10734819
> 
> 赞同：0
> 
> 时间：2012-05-24T09:35:31.750
> 
> 标签：android, linux-kernel, linux-device-driver

我想获得 USB 模块的名称，因为我想阻止在 android 中加载 USB 模块，因为我正在使用 lsmod 获取可加载模块的列表，它显示以下输出

```
# lsmod
lsmod
bcm4329 204281 0 - Live 0xbf09e000
vpnclient 62940 1 - Live 0xbf000000 
```

但是我怎么知道上面 2 中哪个是 USB 模块

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:17:11.337

您将需要重新编译内核并禁用所有 USB 选项。我相当肯定 USB 支持是编译的，而不是作为模块设置的。请注意，“adb”使用 USB，因此禁用 USB 您可能会遇到其他问题。即无法获得手机的远程外壳。

# java - 如何在 Java/jtds 应用程序中支持 SQL GO 语句？

> ID：10734824
> 
> 赞同：7
> 
> 时间：2012-05-24T09:35:46.837
> 
> 标签：java, sql-server, tsql, jtds

我正在开发一个基于 Java 的 OSS 应用程序[SqlHawk](http://timabell.github.com/sqlHawk/)，它的功能之一是针对服务器运行升级 sql 脚本。

[Microsoft 已经制定了使用GO](http://msdn.microsoft.com/en-us/library/ms188037.aspx)语句将脚本拆分为批次的惯例，这是一个好主意，但只是要求字符串上的错误匹配。

目前我有一个非常基本的：

```
// split where GO on its own on a line
Pattern batchSplitter = Pattern.compile("^GO", Pattern.MULTILINE);
...
String[] splitSql = batchSplitter.split(definition);
... 
```

哪种方法有效，但容易被[引用的 GO 语句](https://stackoverflow.com/questions/2619485/best-way-to-split-a-string-by-word-sql-batch-separator)或缩进问题之类的事情绊倒。

我认为使这个真正可靠的唯一方法是在应用程序中有一个 SQL 解析器，但我不知道如何去做，或者这是否最终会变得不那么可靠（特别是考虑到这个工具支持多个 DBMS） .

我有什么方法可以解决这个问题？代码示例在这里对我很有帮助。

*github上的[相关sqlHawk代码。](https://github.com/timabell/sqlHawk/blob/8984514737c4720ab398c817fd3faeafdbef03d1/src/uk/co/timwise/sqlhawk/db/write/DbWriter.java#L215)*

目前使用[jtds](http://jtds.sourceforge.net/)执行脚本中的批处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:40:36.470

GO 是一个客户端批处理分隔符命令。您可以将其替换为;。它不应该在您的 EXEC 动态 SQL 中发送。

```
USE master
GO --<----- client actually send the first batch to SQL and wait for a response
SELECT * from sys.databases
GO 
```

应该翻译成

```
Application.Exec("USE master");
Application.Exec("SELECT * from sys.databases"); 
```

或者你可以这样写：

```
Application.Exec("'USE master;SELECT * from sys.databases") 
```

更多关于 GO [http://msdn.microsoft.com/en-us/library/ms188037(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms188037%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:15:10.720

好的，所以这不会*完全*是您想要的，但您可能会发现它是一个开始。[我在这里](http://www.atlantis-interactive.co.uk/blog/post/2011/02/24/Free-SQL-Server-Schema-Synchronisation-Engine-announcing-the-release-of-the-AtlantisSchemaEngine-source-code.aspx)将 SchemaEngine（它构成了我的大部分产品的核心）作为开源发布。在那里，您会发现 C# 代码可以非常可靠地执行您想要的操作（即不会被字符串、注释等绊倒）。它还支持 'GO x' 语法来重复批次 x 次。

如果你下载它并查看一下，`/Atlantis.SchemaEngine/Helpers`你会发现一个名为的类`BatchParser.cs`，其中包含一个名为的方法`ParseBatches`——它的作用与它在锡上所说的差不多。

# ajax - 将数据从视图传递到控制器而不刷新视图

> ID：10734827
> 
> 赞同：0
> 
> 时间：2012-05-24T09:36:09.380
> 
> 标签：ajax, asp.net-mvc-3, .post

我认为我有一个脚本：

```
$('.datepicker').datepicker
(
{ onSelect: function (dateText, inst) {
    //pass dateText to my controller

});
 </script> 
```

我的控制器是这样的：

```
 public ActionResult Index()
    {
        string dateSelected = dateText; //read dateText here
        if (DateTime.TryParse(dateSelected, out date))
        {
            date = Convert.ToDateTime(dateSelected);
            var reservations = db.Reservations.Where(r => r.Date == date).Include(r => r.Employee).Include(r => r.Room).OrderByDescending(r => r.Date);

            return View(reservations);
        }
        return View();

    } 
```

我希望在不刷新或重新加载当前页面的情况下将 dateText 传递给控制器​​。怎么做？

我之前尝试过表单，并且在 datepicker 的 onselect 事件中，我自动提交表单以便控制器可以接受它。但我不希望刷新或重新加载当前页面。

我只想将 dateText 传递给控制器​​，而用户没有注意到传递.. 我猜是某种 $.post 但我不知道如何实现它..

更新：这是我的尝试，出了什么问题：

好的，这是我的脚本：

```
 JSONstring = JSON.stringify(dateText);
    $.post("/Home/Index", { jsonData: JSONstring }); 
```

这是我的控制器：

```
 public ActionResult Index(string jsonData)
    {
        CacheClear();
        string dateSelected = jsonData;
         .....
        //i tried to debug it, but no value of jsonData

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:37:49.947

> 我希望在不刷新或重新加载当前页面的情况下将 dateText 传递给控制器​​。怎么做？

你可以使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:01:26.857

使用 ajax 并发送 ajax 数据字符串中的所有变量或数据，并提供控制器的 url，例如

```
 function add_to_cart(id , title, price,qty){

    $.ajax({
        type: "POST", 
   url: "your controller" + id ,
  data: "&title=" + title + "&price=" + price +"&quantity=" + qty ,
        complete: function(data) {
            //alert("Item added to cart");

        }
    });
   } 
```

# xcode4 - 在 iPhone 中转换应用程序 iPad（如何制作...弹出框）

> ID：10734828
> 
> 赞同：0
> 
> 时间：2012-05-24T09:36:14.217
> 
> 标签：xcode4

我有一个 iPad 应用程序，它通过按下一个用作弹出框的按钮来打开一个框。是否可以将其转换为 iphone 应用程序，当我按下按钮时会打开特定的全屏视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:26:54.787

根据评论，您应该查看以下教程： [http ://www.roseindia.net/tutorial/iphone/examples/iphone-imagebuttonchangeview.html](http://www.roseindia.net/tutorial/iphone/examples/iphone-imagebuttonchangeview.html)

亲切的问候，
博

# jasper-reports - iReports 中文本/标题/标题的工具提示

> ID：10734834
> 
> 赞同：1
> 
> 时间：2012-05-24T09:36:19.457
> 
> 标签：jasper-reports, jasperserver

我正在尝试在 Jasper iReports 中的列标题或任何类型的文本字段上放置一个工具提示文本。

我发现一个[类似的问题](https://stackoverflow.com/questions/2431346/tool-tip-for-text-in-ireport "类似的问题")没有正确回答，所以我必须重新打开它......

我本质上需要的是当用户将鼠标指针悬停在 Jasper Server 中的报告上时显示列的描述性信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:32:56.813

例如，您可以对*textField*元素使用***hyperlinkTooltipExpression***表达式。

 *[你可以在这里](http://jasperreports.sourceforge.net/sample.reference/hyperlink/index.html#hyperlinks)找到样品。

在*iReport中，您可以在上下文菜单***Hyperlink**的帮助下调用对话框来设置工具提示。

![在此处输入图像描述](../Images/1720308d1c9e419e49fe3282c7a275e7.png)

![在此处输入图像描述](../Images/f074862d4f411d1f9d7add5a72b99444.png)*

# java - android webview url加载两次

> ID：10734837
> 
> 赞同：1
> 
> 时间：2012-05-24T09:36:39.007
> 
> 标签：java, android, url, android-webview

嗨，我面临一个与 android webview 相关的奇怪问题。

我在布局中有一个 webview 组件。并在 Activity 的 onCreate 方法中加载带有 url 的 webview，并附加一些参数。我认为起初这个电话正在发生，但在那个电话之后立即再次调用将加载webview。在第二次调用中，参数没有附加到 URL，因为这个 webview 没有按预期正确加载..

谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:46:30.817

检查这个

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.webkit.WebView;

public class StackOverFlowActivity extends Activity {

    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView view=(WebView)findViewById(R.id.webView1);
        view.getSettings().setJavaScriptEnabled(true);
        view.loadUrl("file:///android_asset/index.html");
        view.addJavascriptInterface(new MyJavaScriptInterface(), "Android");
    }

    final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                    String url="file:///android_asset/img.jpg";
                                webview.loadUrl("javascript:image(\""+url+"\")");
                            }
                    });
            }
    }
} 
```

有关更多详细信息：[尝试在 android webview 中附加图像](https://stackoverflow.com/questions/10717635/trying-to-append-an-image-in-android-webview/10719291#10719291)

# java - Java XPath：获取与查询匹配的所有元素

> ID：10734847
> 
> 赞同：12
> 
> 时间：2012-05-24T09:37:10.517
> 
> 标签：java, xml, xpath, namespaces, xml-namespaces

我想对此 XML 文件进行 XPath 查询（显示摘录）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- MetaDataAPI generated on: Friday, May 25, 2007 3:26:31 PM CEST -->
<Component xmlns="http://xml.sap.com/2002/10/metamodel/webdynpro" xmlns:IDX="urn:sap.com:WebDynpro.Component:2.0" mmRelease="6.30" mmVersion="2.0" mmTimestamp="1180099591892" name="MassimaleContr" package="com.bi.massimalecontr" masterLanguage="it">
...
    <Component.UsedModels>
        <Core.Reference package="com.test.test" name="MasterModel" type="Model"/>
        <Core.Reference package="com.test.massimalecontr" name="MassimaleModel" type="Model"/>
        <Core.Reference package="com.test.test" name="TravelModel" type="Model"/>
    </Component.UsedModels>
... 
```

我正在使用这段代码：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true);
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document document = builder.parse(new File("E:\\Test branch\\test.wdcomponent"));
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();

xpath.setNamespaceContext(new NamespaceContext() {
...(omitted)

System.out.println(xpath.evaluate(
    "//d:Component/d:Component.UsedModels/d:Core.Reference/@name", 
    document)); 
```

我期望得到的：

```
MasterModel
MassimaleModel
TravelModel 
```

我得到了什么：

```
MasterModel 
```

似乎只返回了第一个元素。如何获得与我的查询匹配的所有事件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T09:41:53.470

你会得到一个类型的项目`NodeList`

```
XPathExpression expr = xpath.compile("//Core.Reference");
NodeList list= (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
for (int i = 0; i < list.getLength(); i++) {
    Node node = list.item(i);
    System.out.println(node.getTextContent());
    // work with node 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:42:31.707

请参阅[如何在 Java 中使用 XPath 读取 XML](https://stackoverflow.com/questions/2811001/how-to-read-xml-using-xpath-in-java)

根据该示例，如果您首先编译 XPath 表达式然后执行它，指定您想要返回一个 NodeSet，您应该得到您想要的结果。

# android - Galaxy Nexus 打开手电筒

> ID：10734858
> 
> 赞同：8
> 
> 时间：2012-05-24T09:37:42.490
> 
> 标签：android, android-camera

我正在开发一个需要打开我的 Galaxy Nexus 设备的手电筒的应用程序。我在这里提到了帖子

[Galaxy Nexus 上的 LED 手电筒可由什么 API 控制？](https://stackoverflow.com/questions/8876843/led-flashlight-on-galaxy-nexus-controllable-by-what-api)

```
public class TestCamera extends Activity implements SurfaceHolder.Callback{
Camera mCamera;
public static SurfaceView preview;
public static SurfaceHolder mHolder;
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    preview = (SurfaceView) findViewById(R.id.camSurface);
    mHolder = preview.getHolder();
    mCamera = Camera.open();
    try {
        mCamera.setPreviewDisplay(mHolder);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Button onLEDbtn = (Button) findViewById(R.id.onLED_btn);
    onLEDbtn.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
            Parameters params = mCamera.getParameters();
            params.setFlashMode(Parameters.FLASH_MODE_TORCH);
            mCamera.setParameters(params);      
            mCamera.startPreview();
        }

    });
}

}

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        mHolder = holder;
        try {
            mCamera.setPreviewDisplay(mHolder);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
         mCamera.stopPreview();
            mHolder = null;
    }

} 
```

显现：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

但是，我仍然无法打开手电筒。谁能指出我的错误？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T03:25:38.367

你必须设置回调 mHolder.addCallback(this);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:42:22.840

尝试添加：

```
android:name="android.permission.FLASHLIGHT"
android:name="android.hardware.camera.flash 
```

看看这篇文章： [如何在 Android 中以编程方式打开相机闪光灯？](https://stackoverflow.com/questions/6068803/how-turn-on-only-camera-flash-light-programmatically-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:42:38.463

您需要在清单文件中添加此标记。

```
<uses-feature android:name="android.hardware.camera.flash"/> 
```

# php - 计算包括货币符号的总和

> ID：10734860
> 
> 赞同：-1
> 
> 时间：2012-05-24T09:37:50.613
> 
> 标签：php

我可以通过 =SUM() 计算出一列的总和，但如果我在那里有货币符号（即 £、$ 或 €）就不会这样做 - 有人可以告诉我如何计算总和并且仍然包括货币符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:42:19.907

我假设你在谈论mysql。看看[CONCAT()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

`SELECT CONCAT('£', SUM(tabel.column)) FROM table;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:48:28.630

你的意思是，你有 $ 登录字段值。

您可以替换 $ 符号，然后可以使用 SUM 函数。

```
SELECT CONCAT('$',SUM(REPLACE(total,'$',''))) FROM `tbl_test` 
```

# jquery - jquery从li里面的图像中删除类

> ID：10734861
> 
> 赞同：1
> 
> 时间：2012-05-24T09:37:53.190
> 
> 标签：jquery, html, class, removeclass

我需要使用 jquery 从 li 内具有“已选择”类的图像中删除“扭曲”类

```
<ul class="gal">
 <li>
  <img class="twist" src"..." />
 </li>
 <li class="selected">
  <img class="twist" src"..." />
 </li>
 <li>
  <img class="twist" src"..." />
 </li>
<ul> 
```

有人请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:38:38.353

就如此容易：

```
$("li.selected > img").removeClass("twist"); 
```

相对`<ul>`元素它可以通过以下方式完成：

```
$("ul.gal > li.selected > img").removeClass("twist"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:39:57.417

**您可以使用removeClass**方法删除类：

```
$("li.selected > img").removeClass("twist"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:41:33.743

**演示** [http://jsfiddle.net/kmhdj/2/](http://jsfiddle.net/kmhdj/2/)

Demo 会提醒 before 和 after 类属性。

`.each`如果您期望不同的类和不同的结果，您也可以进行迭代。

还有一个调用的 API `.hasClass()`，您可以在迭代时使用它来检查该类是否存在，但所有这些都是额外的信息。

希望这可以帮助

**另一个演示==>如果您愿意，这里是使用`.each`&的一个长切方法：http: `.hasClass`** [//jsfiddle.net/kmhdj/5/](http://jsfiddle.net/kmhdj/5/)

**代码**

```
$("ul li.selected img").removeClass("twist"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:47:59.777

```
$('.gal img').each(function(){
   if ($(this).parent().hasClass('selected')) 
   $(this).removeClass('twist');
}) 
```

# javascript - 具有更改参数的javascript睡眠功能

> ID：10734863
> 
> 赞同：-2
> 
> 时间：2012-05-24T09:37:58.587
> 
> 标签：javascript

数组移动只包含我想在画布上绘制的几个移动。基本上是一个 deltaTime 睡眠和一个绘图命令。

这根本行不通:(

```
for (var i=0; i< parsed.moves.length; i++)
{
    var e = parsed.moves[i];
    setTimeout(function(){drawCmd(context,e)}, e.deltaTime*1000);

    //deltaTime are values btn 0-1, the sleep time i need to set btw commands 

 }  

function drawCmd(canvasctx, e)
{   

switch(e.type)
{
   //case ...
}
 } 
```

它什么也没做，甚至没有调用 drawCmd 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:49:52.400

您的代码只会延迟所有的`drawCmd`by`e.deltaTime*1000`并在之后立即执行它们，全部在`i = 10`

如果您的意思是“绘制并等待，绘制并等待”，请尝试以下操作：

```
(function loop(i){
    var e = parsed.moves[i];      //e at current "i"

    if(i< parsed.moves.length){   //if not equal to length
        setTimeout(function(){
            drawCmd(context,e);   //draw in e.deltaTime*1000 milliseconds
            loop(++i);            //loop again
        }, e.deltaTime*1000);
    }

}(0));                            //start with i=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:52:13.087

您可能想检查 deltaTime 的数据类型

```
 setTimeout(function () { }, undefined * 1000); // <- Executes imidiately
    setTimeout(function () { }, '1' * 1000); // <- Executes after 1 second
    setTimeout(function () { }, 1 * 1000); // <- Executes after 1 second
    setTimeout(function () { }, new Date() * 1000); // <- Executes after a long (i.e. 1337852997592 seconds) time 
```

# cocoa - 基于nsbox的透明分隔线

> ID：10734864
> 
> 赞同：0
> 
> 时间：2012-05-24T09:38:03.223
> 
> 标签：cocoa, nsbox

我的分隔线有问题，它基于`NSBox`，我使用常规`NSBox`，其 Box Type 设置为“Custom”，边框类型设置为“Groove”。

在不画背景的情况下，没问题。

但是如果要绘制背景，不能是透明背景

如何实现像透明背景效果？

像这样：

![截屏](../Images/5a75c16c349e78072e3cbdbad75a1c9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:05:59.140

您可以通过使用 alpha 设置颜色来做到这一点，如下所示：

```
[boxOutlet setFillColor:[NSColor colorWithCalibratedRed:0 green:0 blue:0 alpha:0.5]]; 
```

它将填充`NSBox`黑色 50% 透明度。**Alpha 是不透明度值。**
**注意：** *boxOutlet*是 IBOutlet 的`NSBox`。

**结果：**

![截屏](../Images/1d24416e985cd5500d092bce9753207a.png)

# java - Java String.split 方法不能很好地工作

> ID：10734868
> 
> 赞同：0
> 
> 时间：2012-05-24T09:38:11.257
> 
> 标签：java, string, string-split

> **可能重复：**
> [用 | 分割字符串 java中的分隔符](https://stackoverflow.com/questions/6305675/split-string-with-separator-in-java)

当我执行以下操作时，我有点困惑：

```
String example1 = "Hello|World";
String[] splitRes;

splitRes = example1.split("|"); 
```

我没有得到拆分字符串
Hello index 0
World index 1

但如果我这样做

```
 String example1 = "Hello:World";  
 String[] splitRes;

 splitRes = example1.split(":"); 
```

然后它起作用了..
为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T09:39:57.957

split 使用正则表达式，您必须转义管道，因为它是正则表达式中的“或”运算符：

```
example1.split("\\|"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:40:57.037

`String.split()`期望正则表达式作为参数，`|`是正则表达式中的元字符“OR”。你必须用 \ 逃脱（所以它变成了`\|`）。请注意，在 Java 字符串中，您必须将其写为 \\ 因为 \ 也是 Java 字符串中的转义字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:44:32.547

| 用于正则表达式，`.split`也使用正则表达式，因此您需要对其进行转义。

```
String str = ""Hello:World"; ";
String[] temp;
String delimiter = "\\|";
SepString= str.split(delimiter);
  /* print test */
for(int i =0; i < SepString.length ; i++)
System.out.println(SepString[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:40:39.413

Split 将正则表达式作为参数，| 是一个正则表达式符号。您必须使用`\`java 字符串中的其中两个来转义它：`\\`

```
.split("\\|"); 
```

# java - EAR 中的 WAR 中的 NoClassDefFoundError

> ID：10734870
> 
> 赞同：1
> 
> 时间：2012-05-24T09:38:19.620
> 
> 标签：java, classloader, war, noclassdeffounderror, ear

我有一个EAR，里面有一个WAR，里面有一个jar，它是WEB-INF/lib/。但是，无法找到该 jar 中的类（抛出 NoClassDefFoundError）。我已经通过执行 javap -classpath 验证了该类确实在那个 jar 中

任何想法为什么？

我在吃玻璃鱼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:59:56.110

我想到了。由于某些奇怪的原因，由于某些缺少类，正在加载的类无法加载。即我有一个ClassA，它正在加载ClassB。B 类依赖于 C 类。但是由于 ClassC 不在我的类路径中，所以 ClassB 的类没有正确加载。因此，从 ClassA 访问 ClassB 会引发 NoClassDefFoundError。

# workflow - Lotus Workflow - 子例程 LWFExecuteNotesAction 做什么？

> ID：10734876
> 
> 赞同：0
> 
> 时间：2012-05-24T09:38:34.717
> 
> 标签：workflow, lotus-notes, lotus-domino

我正在开发与 Lotus Workflow 集成的 Lotus Notes 应用程序。当我修改一些动作时，我总是看到子例程“LWFExecuteNotesAction”在动作脚本的末尾被调用。我试图用谷歌搜索并阅读一些书籍，但我仍然找不到它的目的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T17:36:00.917

这是一个内部调用，因此不会记录在案。

**[编辑]**我知道这不能如你所愿地回答你的问题。

但是，它是 IBM 内部代码，其功能的详细信息并未公开记录。

您甚至不会在 Application 数据库中找到源代码，只能引用预编译的 LSS 文件所在的位置（Q：驱动器）。

# android - gridview点击效果

> ID：10734878
> 
> 赞同：3
> 
> 时间：2012-05-24T09:38:40.007
> 
> 标签：android, gridview, onclick

我有一个网格视图

```
<GridView
    android:id="@+id/gridview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="60px"
    android:layout_marginRight="60px"
    android:background="#343434"
    android:listSelector="#00343434"
    android:numColumns="2"
    android:verticalSpacing="25px" >
</GridView> 
```

当我单击时，灰色框将指示正在单击的项目。

单击某个项目时，我想删除灰色框效果。

请给点建议，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T09:43:37.207

换行`android:listSelector="#00343434"`

用这条线

```
android:listSelector="@android:color/transparent" 
```

或与

```
android:listSelector="#00000000" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:45:54.137

当你想设置特定的图像

```
View savedView    ;
gridview.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

                        adapter.notifyDataSetChanged();

                        v.setBackgroundResource(R.drawable.bgcalendarbox_highlighted);
                            if(savedView==null)
                            {
                                savedView = v;
                            }
                            else
                            {
                                savedView.setBackgroundResource(R.drawable.bgcalendarbox);
                                savedView = v;
                            }

                }
            }); 
```

否则

```
android:listSelector="#00000000" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:48:39.800

```
android:listSelector="#00000000" 
```

将此添加到您的 GridView 标记中。

# java - JAX-WS 如何在 weblogic 中隐藏 WSDL？

> ID：10734880
> 
> 赞同：1
> 
> 时间：2012-05-24T09:38:44.283
> 
> 标签：java, jakarta-ee, wsdl, jax-ws, weblogic-10.x

我创建了一个 JAX-WS webservice 并将其部署在 weblogic 10.3.3 上。它已成功部署，一切正常。

**现在，我们想通过隐藏 WSDL 来访问 Web 服务。我尝试从 weblogic 管理控制台隐藏 WSDL。转到此位置**

```
Deployed application -> Webservice -> Configuration tab 
```

**在此选项卡中，通过在参数“WSDL 发布文件”中输入“false”。**

保存它创建了一个 Plan.xml。当我尝试激活 Weblogic 中的更改时会出现问题。以下是我得到的例外：

> 更改激活过程中发生错误，请参阅日志了解详细信息。
> 
> 在部署 WebService 模块“TB_DBLEGI_SIMULATOR-trunk.war”的准备阶段遇到错误。部署 WebService 模块“TB_DBLEGI_SIMULATOR-trunk.war”时遇到错误。wsdl 发布失败 java.io.IOException: Wsdl 文件应该放在 META-INF/wsdl 或 WEB-INF/wsdl
> 
> wsdl 文件应放在 META-INF/wsdl 或 WEB-INF/wsdl

在我的战争中，WSDL 被放置在 WEB-INF/wsdl 文件夹中。另外，我试图将它放在不同的地方，但我没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:43:03.700

您始终可以编写和注册 a`Filter`以阻止对给定资源的访问。例如：

```
public class BlockFilter implements Filter {

    @Override
    public void init(FilterConfig config) throws ServletException {}

    @Override
    public void destroy() {}

    public void doFilter(ServletRequest request, ServletResponse response,
                        FilterChain chain) throws IOException, ServletException {
        return;
    }
} 
```

并在以下位置注册过滤器`web.xml`：

```
<filter>
    <filter-name>blockFilter</filter-name>
    <filter-class>namespace.BlockFilter</filter-class>    
</filter>

<filter-mapping>
    <filter-name>blockFilter</filter-name>
    <url-pattern>*?wsdl</url-pattern>
</filter-mapping> 
```

# c# - Lotus Notes 以调试模式发送电子邮件

> ID：10734881
> 
> 赞同：0
> 
> 时间：2012-05-24T09:38:53.387
> 
> 标签：c#, asp.net, lotus-notes

我使用 Lotus notes 在我的 ASP.NET 和 C# Web 应用程序中发送电子邮件。它在调试模式下发送电子邮件，但是如果我在本地 IIS 服务器上发布它不会发送任何电子邮件。

```
Domino.NotesSession oNotesSession = null; ;
Domino.NotesDatabase oNotesDatabase = null;
Domino.NotesDocument oNotesDocument = null;
Domino.NotesDocument oNotesDocumentForOther = null;
object oItemValue = null;
bool flag = false;

try
{
    String UserName = "";
    try
    {
        oNotesSession = new Domino.NotesSession();
    }
} 
```

我在上面的行中得到以下错误

> {System.OutOfMemoryException：检索具有 CLSID {29131539-2EED-1069-BF5D-00DD011186B7} 的组件的 COM 类工厂失败，原因是以下错误：8007000e。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:53:25.040

听起来，运行 IIS 的帐户无法使用 Lotus Notes COM DLL 或 notes.ini 文件。您能否更改您的 IIS 应用程序池以在您的帐户下运行（您用于访问 Lotus Notes 的同一帐户？）

或者，如果您只是发送电子邮件，是否有机会将 Lotus Notes 客户端完全排除在外，然后通过 SMTP 发送到 Lotus Notes 服务器（或您域中的任何其他 SMTP 服务器？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:30:56.657

肯几乎可以肯定是正确的，但是还有另一件事需要考虑。如果您打算在 64 位服务器上部署 ASP 项目，您应该知道 Domino Interop COM 类不能作为 64 位代码使用，并且IBM 在 Win64 上[不支持32 位版本。](http://www-304.ibm.com/support/docview.wss?uid=swg21454291)可以通过安装 Domino 并为类手动注册 DLL 来使其工作，但类中的某些方法存在已知问题，IBM 不打算修复它们。

所以我同意你最好编写代码来发送 SMTP 消息。

# ios - TableView 单元格中的 UITextField 显示问题

> ID：10734888
> 
> 赞同：0
> 
> 时间：2012-05-24T09:39:28.367
> 
> 标签：ios, xcode, uitextfield, tableview, cell

我在每个 UITextField 上创建了至少 10 个单元格，用于注册页面。当我在第一个单元格的文本字段中插入单词时，当我滚动 tableView 时，另一个单元格中的文本字段会显示我刚刚输入的单词。

下面是我的代码。我输入的 textField 数据正在循环，这是由 dequeueReusableCellWithIdentifier 引起的......我该如何解决这个问题？非常感谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"RCell";
RegisterCell *cell = (RegisterCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];    
if (cell == nil)
    cell = [[[RegisterCell alloc] initWithFrame:CGRectMake(0, 0, 280, 44) reuseIdentifier:CellIdentifier] autorelease];

if(indexPath.section == 0){
    NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]];
    NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
    cell.registerLabel.text = mainLabel;

    UITextField *valTxtField = [[UITextField alloc] initWithFrame:CGRectMake(120, 5, 180, 30)];
    valTxtField.font = [UIFont fontWithName:@"Futura-CondensedExtraBold" size:18.0];
    valTxtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    valTxtField.delegate = self;
    valTxtField.returnKeyType = UIReturnKeyDone;
    valTxtField.autocorrectionType = UITextAutocorrectionTypeNo;
    valTxtField.autocapitalizationType = UITextAutocapitalizationTypeNone;

    if(indexPath.row == 0)
    {
        valTxtField.text = @"";
        emailTxtFld = valTxtField; //emailTxtFld is global variable
    }
    if(indexPath.row == 1)
    {
        valTxtField.text = @"";
        reEmailTxtFld = valTxtField; //reEmailTxtFld is global variable
    }

    [cell.contentView addSubview:valTxtField];
    [valTxtField release];
}    
else if(indexPath.section == 1){
    NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]+10]; 
    NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
    cell.registerLabel.text = mainLabel;
    cell.registerTextField.enabled = NO;
}
else if(indexPath.section == 2){
    if(indexPath.row == 0){
        NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]+11];
        NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
        cell.registerLabel.text = mainLabel;
        cell.registerTextField.enabled = NO;
    }
}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:44:46.913

一种简单的方法是在添加子视图之前从单元格 contentView 中删除所有子视图，例如：

```
for (UIView *subview in [cell.contentView subviews])
    [subview removeFromSuperview]; 
```

一种更有效的方法是在 if (cell == nil) 语句中创建所有单元格，但这取决于表中有多少个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:45:40.717

正确的实现是将任何视图的创建移动到 if (cell == nil) 中，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"RCell";
RegisterCell *cell = (RegisterCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];    

UITextField *valTxtField;
if (cell == nil)
{
    cell = [[[RegisterCell alloc] initWithFrame:CGRectMake(0, 0, 280, 44) reuseIdentifier:CellIdentifier] autorelease];

if(indexPath.section == 0){
    valTxtField = [[UITextField alloc] initWithFrame:CGRectMake(120, 5, 180, 30)];
    valTxtField.font = [UIFont fontWithName:@"Futura-CondensedExtraBold" size:18.0];
    valTxtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    valTxtField.delegate = self;
    valTxtField.returnKeyType = UIReturnKeyDone;
    valTxtField.autocorrectionType = UITextAutocorrectionTypeNo;
    valTxtField.autocapitalizationType = UITextAutocapitalizationTypeNone;
    valTxtField.tag = 100;

    [cell.contentView addSubview:valTxtField];
    [valTxtField release];
}
}

valTxtField = (UITextField *)[cell.contentView viewWithTag:100];

if(indexPath.section == 0){
    NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]];
    NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
    cell.registerLabel.text = mainLabel;

    if(indexPath.row == 0)
    {
        valTxtField.text = @"";
        emailTxtFld = valTxtField; //emailTxtFld is global variable
    }
    if(indexPath.row == 1)
    {
        valTxtField.text = @"";
        reEmailTxtFld = valTxtField; //reEmailTxtFld is global variable
    }
}    
else if(indexPath.section == 1){
    NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]+10]; 
    NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
    cell.registerLabel.text = mainLabel;
    cell.registerTextField.enabled = NO;
}
else if(indexPath.section == 2){
    if(indexPath.row == 0){
        NSDictionary *rowData = [self.regisLabel objectAtIndex:[indexPath row]+11];
        NSString *mainLabel = [NSString stringWithFormat:@"%@", [rowData objectForKey:@"regisLbl"]];
        cell.registerLabel.text = mainLabel;
        cell.registerTextField.enabled = NO;
    }
}

return cell; 
```

# mysql - MySQL 和 SQLite 与 ADO.NET 的连接字符串

> ID：10734890
> 
> 赞同：0
> 
> 时间：2012-05-24T09:39:45.070
> 
> 标签：mysql, sqlite, connection-string

我想使用 F# 使用与以下相同的代码连接到 SQL Server 以外的数据库：http: [//msdn.microsoft.com/en-us/library/hh361033 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh361033(v=vs.110).aspx)

我假设我需要用于数据库（MySQL 或 SQLite 等）的 ADO.Net 连接器。但是，一旦完成，我应该如何修改连接字符串：

```
type dbSchema = SqlDataConnection<"Data Source=MYSERVER\INSTANCE;Initial Catalog=MyDatabase;Integrated Security=SSPI;">
let db = dbSchema.GetDataContext() 
```

表示我想使用 MySQL 或 SQLite 等。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:44:06.137

您使用的连接字符串用于 Microsoft SQL Server。

MySQL 连接字符串： http: [//www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)
SQLite 连接字符串： http: [//www.connectionstrings.com/sqlite](http://www.connectionstrings.com/sqlite)

（从该链接您可以导航到您正在使用的正确连接器）

# objective-c - EXC_BAD_INSTRUCTION（代码=EXC_I386_INVOP，子代码=0x0）

> ID：10734893
> 
> 赞同：24
> 
> 时间：2012-05-24T09:39:57.287
> 
> 标签：objective-c, xcode4.3

我真的不知道为什么我有这个错误。

首先调试器停在机器码

![在此处输入图像描述](../Images/060a420c4232c09ec819a75cc401b44b.png)

该线程也没有显示任何内容。程序实际上没有代码停止

![在此处输入图像描述](../Images/e56e0eb917e7bf454dbe742a0720fe1c.png)

所以它与_dispatch_worker_thread有关

那是什么？

有什么办法可以调试这个？我应该回滚吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-01T22:46:27.360

当您运行 CPU 不支持的（矢量）扩展时，会发生这种崩溃。

例如，在“project-settings / build-settings / Code Generation”下的 xcode 5 中，将“Enable Additional Vector extensions”设置为“AVX2”。构建您的可执行文件。

现在运行它：

*   英特尔酷睿 i5：它将崩溃（无论编译器决定使用 avx2），并带有“exc_i386_invop subcode=0x0”。
*   英特尔酷睿 i7：它会工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T11:21:18.877

`EXC_BAD_INSTRUCTION (code=EXC_I386_INVOP)`是 a - 的副产品，`__builtin_trap()`它是一个 GCC 和 clang 内在函数。在 x86 上，我们得到

```
 0x4dfa2:  movl   %esi, (%esp)
    0x4dfa5:  movl   %edx, 4(%esp)
    0x4dfa9:  movl   %eax, 8(%esp)
    0x4dfad:  calll  0x110ffa                  ; symbol stub for: objc_msgSend
    0x4dfb2:  cmpb   $0, %al
    0x4dfb4:  je     38
 -> 0x4dfba:  ud2    
    0x4dfbc:  movl   -32(%ebp), %eax 
```

指令`ud2`是这里的罪魁祸首，Xcode 没有专门处理。

在 ARM 上，我们将其编译为XCode`trap`并导致`trace`断点。这是`clang`我们这里的一个错误吗？

最终，在原始问题的上下文中，我怀疑失败的库函数已经达到了断言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T03:51:41.203

在我的情况下，我在 viewDidLoad 中添加了一个观察者，`contentSize`并且`UITextView`从未删除它。`viewDidAppear`通过添加它然后将其删除来修复它`viewWillDisappear`。发现太烦人了:(

添加观察者`viewDidAppear`

```
[self.textViewMessage addObserver:self
                           forKeyPath:NSStringFromSelector(@selector(contentSize))
                              options:NSKeyValueObservingOptionNew
                              context:nil]; 
```

删除观察者`viewWillDisappear`

```
[self.textViewMessage removeObserver:self forKeyPath:NSStringFromSelector(@selector(contentSize))]; 
```

# java - 如何通过休眠选择表的两列的添加

> ID：10734896
> 
> 赞同：0
> 
> 时间：2012-05-24T09:40:00.907
> 
> 标签：java, mysql, hibernate

假设我有一张学生表

```
 - ID         Name         Sub1      Sub2
 - 1          Deepika       99        89
 - 2          Shubham       78        90 
```

我希望我的休眠应用程序为我提供以下结果

```
 - ID         Name        Sub1      Sub2      Total
 - 1          Deepika       90       80        170
 - 2          Shubham       78       90        168 
```

即我的sql查询是

```
select id name, sub1, sub2, sub1+sub2 as total
from employee 
```

我怎么能在休眠中做到这一点？我应该对我的 hbm.xml 文件和 bean 类进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:44:18.240

使用 addScalar() 您可以在不更改 xml 的情况下获取除现有信息之外的任何其他行。有关更多详细信息，请参阅[此文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

否则需要更改新表结构对应的xml和bean类。

# maven - maven Build Helper Maven Plugin的使用

> ID：10734898
> 
> 赞同：14
> 
> 时间：2012-05-24T09:40:13.673
> 
> 标签：maven, m2e

我正在尝试使用 maven 插件将 maven java 项目的源文件夹添加到 Eclipse。

尝试使用 org.codehaus.mojo 插件时，我收到以下错误

无法在项目应用程序框架上执行目标 org.codehaus.mojo:build-helper-maven-plugin:1.7:add-source (default-cli)：目标 org.codehaus.mojo:build-helper 的参数“源” -maven-plugin:1.7:add-source 丢失或无效 -> [帮助 1]

通过阅读[http://mojo.codehaus.org/build-helper-maven-plugin/usage.html](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)上的文档，这应该是正确的吗？文件夹 target/sources/mygeneratedfiles 存在。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <executions>
        <execution>
         <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>target/sources/mygeneratedfiles</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T14:22:16.170

问题是构建助手插件通常太旧而无法与最新的 maven 版本（与 m2e eclipse 插件结合使用）一起使用，因为“相对新”的生命周期映射规则。

我通过为 orgeclipse.m2e 插件的 build-helper-maven-plugin 添加生命周期映射配置解决了这个问题。见下文：

```
 <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>org.codehaus.mojo</groupId>
                                <artifactId>build-helper-maven-plugin</artifactId>
                                <versionRange>[1.0,)</versionRange>
                                <goals>
                                    <goal>add-source</goal>
                                    <goal>add-test-source</goal>
                                    <goal>add-resource</goal>
                                    <goal>add-test-resource</goal>
                                    <goal>maven-version</goal>
                                    <goal>parse-version</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <execute>
                                    <runOnConfiguration>true</runOnConfiguration>
                                    <runOnIncremental>true</runOnIncremental>
                                </execute>
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin> 
```

# ios - iOS本地文件访问和webkit

> ID：10734902
> 
> 赞同：1
> 
> 时间：2012-05-24T09:40:23.890
> 
> 标签：ios, webkit

我对 iOS 应用程序开发完全陌生（实际上我还没有开始，仍处于设计阶段）。
我必须用我的应用程序完成的任务是从某个地方下载一个 zip，解压到本地存储并在嵌入的 webkit 小部件中显示其内容（带有 javascript 的 html 页面）。

问题是：
1）我的应用程序是否可以访问我的 iPad 存储内存的任何文件夹？
2）我的应用程序的嵌入式 Webkit 小部件是否能够显示本地 html 页面（如 file:///somewhere/over/the/rainbow.html？
3）该本地页面是否能够使用 Ajax 方法（通过 httpxmlrequest）动态加载外部脚本或 xml（也本地存储 - 即 ./something.xml）？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:17:40.163

1.  不，它无法访问*任何*文件。应用程序在 iOS 上被沙盒化。您只能访问应用程序包的内容和文档文件夹（您的应用程序独有的可写区域）。
2.  是 - 只要所述内容在 (1) 中提到的区域内。这就是基于 Phonegap 的应用程序的工作方式。
3.  是的他们可以。我们已经在我们的几个应用程序中广泛地做到了这一点。

# ios - NSFetchRequest，可以按聚合函数过滤吗？

> ID：10734908
> 
> 赞同：0
> 
> 时间：2012-05-24T09:40:40.577
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller, nsfetchrequest

我正在尝试拉出所有`Actions`属于最新的`Session`.

在 SQL 中，这将是一个简单的 JOIN ... WHERE Session.startTime = MAX(Session.startTime)，但是对于 Core Data，如果不采用以下两个步骤，我无法弄清楚如何做到这一点。有任何想法吗？

```
// Step 1\. Get the latest session

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Session" inManagedObjectContext:self.managedObjectContext]];
[request setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"startTime" ascending:NO]]];
[request setFetchLimit:1];

Session *lastSession = nil;

NSArray *objects = [self.managedObjectContext executeFetchRequest:request error:NULL]; 

if ([objects count] > 0)
{ 
    NSLog(@"max: %@", [objects objectAtIndex:0]);
    lastSession = [objects objectAtIndex:0];
}

// Step 2\. Get that session's actions

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Action" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sectionSort = [[NSSortDescriptor alloc] initWithKey:@"session.startTime" ascending:NO selector:nil];
NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"startTime" ascending:NO selector:nil];
[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:sectionSort, sort, nil]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"session.startTime = %@", lastSession.startTime];
//**Can't I do something like this instead?**
//NSPredicate *predicate = [NSPredicate predicateWithFormat:@"session.startTime = session.@max.startTime"];
[fetchRequest setPredicate:predicate];

[fetchRequest setFetchBatchSize:10];

[self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"session.startTime" cacheName:@"ActionHistory"];
self.fetchedResultsController.delegate = self;

NSError *error;
if (![self.fetchedResultsController performFetch:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();  // Fail
} 
```

编辑：我确实需要坚持使用`NSFetchedResultsController`上面未详细说明的正当理由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:22:30.233

我会建议你建立关系 beetwen`Session`和`Action`. 然后，在您获取所需的会话之后，您可以轻松地获取该会话的所有操作 ss `lastSession.actions`。

**编辑** 也许你可以做

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"session = %@",lastSession]; 
```

# ruby-on-rails - 使用 rails 中数组的内容创建多个模型对象

> ID：10734910
> 
> 赞同：2
> 
> 时间：2012-05-24T09:40:44.907
> 
> 标签：ruby-on-rails

假设我有以下数组：

```
[['a'],['b'],['c']] 
```

我想在我的表中创建 3 个新行......让我们称表为“字母”

所以我会有以下

```
id  name
1   a
2   b
3   c 
```

无论如何，一步一步地在rails中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:43:16.120

```
letters.flatten.map{|letter| Letter.create(:name => letter)} 
```

# c# - 提交到 Git 对象数据库有什么好处？

> ID：10734925
> 
> 赞同：3
> 
> 时间：2012-05-24T09:41:37.930
> 
> 标签：c#, .net, git, libgit2sharp

在这个[libgit2sharp 问题](https://github.com/libgit2/libgit2sharp/issues/104)中的评论讨论中，强调了我可以针对对象数据库创建提交？

什么是提交到对象数据库？

为什么比执行普通的 git add 和 git commit 更有优势？

我正在尝试将提交历史记录从另一个源代码控制系统 SourceGear 导入 Git。目前，我的逻辑只是遍历另一个源代码控制系统中的文件，获取某个版本及其提交信息，然后执行 a `repo.Index.Stage`and then `repo.Commit`。我假设这是正确的，我应该使用对象数据库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:43:33.247

在使用 LibGit2Sharp 时，标准的提交方式确实是以下工作流程：

```
using (var repo = new Repository("path/to/a/repository"))
{
    // do stuff

    repo.Index.Stage("path/to/file1");
    repo.Index.Stage("path/to/file2");

    repo.Commit("This is my commit", ....);

    // more stuff
} 
```

但是，这需要一个非裸存储库：具有**工作目录**和**索引**的存储库。

该`Stage()`调用将工作目录中的文件注册到**index**中。该调用将**索引**`Commit()`内容的不可变时间戳快照创建到**对象数据库**中。

 ****从 v0.9 版本开始，LibGit2Sharp 允许直接在对象数据库中创建提交，而不需要`Stage()`任何东西。事实上，这甚至适用于裸存储库。

除了 Commits，使用新的`ObjectDatabase`API，可以创建`Blobs`或`Trees`. **[在ObjectDatabaseFixture](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp.Tests/ObjectDatabaseFixture.cs)**单元测试中可以找到一些可能使用的示例。

> 什么是提交到 obect 数据库？

事实上，提交总是最终被存储到对象数据库中。新的 API 公开了一些较低级别的操作，这些操作在一些高级脚本操作中可能会派上用场。

> 为什么比执行普通的 git add 和 git commit 更有优势？

哇...这是一个广泛的子问题。并且没有一个有限的答案列表；-) 在我的脑海中，这里有一些潜在的答案：

*   这允许您独立于任何提交直接创建 Blob 和/或树
*   使用标准`working directory -> index -> odb`工作流程，一次只能准备一个提交。使用此 API，您可以在非顺序流中创建 Blob 和树，然后在最迟决定将哪个树关联到 Commit。
*   此 API 还允许显式选择要创建的 Commit 应承担的父母
*   Git 是一个内容可寻址的文件系统，一个不可变的、只追加的对象数据库。此 API 促进了标准源代码控制之外的其他类型的使用。

> 目前，我的逻辑只是遍历另一个源代码控制系统中的文件，获取某个版本及其提交信息，然后执行 repo.Index.Stage 然后 repo.Commit。我假设这是正确的，我应该使用对象数据库吗？

考虑到您的用例，标准工作流程似乎就足够了。****

# html - 对齐图像下的文本

> ID：10734927
> 
> 赞同：0
> 
> 时间：2012-05-24T09:41:46.973
> 
> 标签：html, css

我想在图像下对齐一些文本，但图标在左侧。每当我在其上放置一个 padding-left 或 right 或 margin 时，它都会以一个块为中心，但不能同时为两个块居中。这真的很烦人。您可以在此屏幕截图中看到它：http: [//cl.ly/1G0D191t1G3V1v0a0K2q](http://cl.ly/1G0D191t1G3V1v0a0K2q)

HTML：

```
<html xmlns="http://www.w3.org/1999/html">
<head>
  <link href="<?php echo base_url('css/style.css');?>" rel="stylesheet" type="text/css" />
  <title>Admin :: Home</title>
</head>
<body>
<div id="wrapper">
  <div class="admin-form">
    <div class="header">
      <h1>Admin Home</h1>
    </div>
    <div class="content dashboard clearfix">
      <ul>
        <li><a href='<?php echo base_url('admin/DiveLocations');?>'><img src='<?php echo base_url('images/icons/duikplaats.png');?>'/>Duiklocaties</a></li>
        <li><a href='<?php echo base_url('admin/DiveEvents');?>'><img src='<?php echo base_url('images/icons/scubadiving.png');?>'/>Duiken</a></li>
        <li><a href='<?php echo base_url('admin/Users');?>'><img src='<?php echo base_url('images/icons/users.png');?>'/>Gebruikers</a></li>
      </ul>
    </div>

  </div>
</div>
</body>
</html> 
```

CSS：

```
.dashboard img {
  display: block;
  margin-left:25px;
}

.dashboard ul li {
  list-style-type: none;
  float: left;
  padding: 0 10px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:58:02.503

在这种情况下，我会将文本放在 a 中`<span>`并清除它：

```
.dashboard span {
    clear:both;
    display:block;
} 
```

我为你做了一个小提琴 - [http://jsfiddle.net/JMEMc/](http://jsfiddle.net/JMEMc/)

# facebook - symfony 2 - Facebook Bundle - FacebookProvider - 如何在 FacebookProvider 中使用服务和实体管理器？

> ID：10734929
> 
> 赞同：3
> 
> 时间：2012-05-24T09:41:50.910
> 
> 标签：facebook, service, symfony, entitymanager

一切都在标题中，我使用 FacebookBundle ：

[http://knpbundles.com/FriendsOfSymfony/FOSFacebookBundle](http://knpbundles.com/FriendsOfSymfony/FOSFacebookBundle)

使用 facebook 登录正常工作，我想使用一些服务并实例化我的项目的一些对象来更新我的用户数据。

//在我的 Facebook 提供程序中

$user->setFBData($fbdata);

因此，在此行之前，我想使用特定服务并使用实体管理器用正确的数据填充我的 $fbdata 数组我必须怎么做？

这是正确的方法吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:27:33.500

have you defined your own FacebookProvider in security.yml ?

[https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/master/Resources/doc/2-integration-with-fosuserbundle.md](https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/master/Resources/doc/2-integration-with-fosuserbundle.md)

If so, you can inject any service you need to implement your logic in the class

# javascript - 从 Facebook 删除帖子

> ID：10734931
> 
> 赞同：0
> 
> 时间：2012-05-24T09:41:55.107
> 
> 标签：javascript, facebook-graph-api

我在 facebook 上的应用发布到阅读我网站上任何文章的用户的墙上。我需要让用户选择在发布后通过单击按钮来删除帖子，就像雅虎一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:00:18.400

引用 facebook 文档

> 删除
> 
> 只要您的应用程序创建了帖子，您就可以删除帖子。您可以通过向具有 publish_stream 权限的 POST_ID 对象发出 HTTP DELETE 请求来删除帖子。
> 
> 如果删除成功，会得到如下返回`succeeded`布尔值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T05:29:16.057

希望这会有所帮助，

```
var postId = '1234567890';
FB.api(postId, 'delete', function(response) {
if (!response || response.error) {
alert('Error occured');
} else {
alert('Post was deleted');
}
}); 
```

参考这个：（[https://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)）

# c# - 在插入数据库之前更改日期格式

> ID：10734932
> 
> 赞同：1
> 
> 时间：2012-05-24T09:41:57.823
> 
> 标签：c#, sql, sql-server, database

我正在将一个 excel 文件上传到服务器，然后将其行和列插入到数据库中。我正在逐行进行，但日期时间有问题。插入 146 行数据后，我收到一条错误消息：

***将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。***

问题是它的日期。在 excel 文件中，日期的格式为 dd/mm/yyyy，但数据库将它们视为 mm/dd/yyyy，因此当日期超过 12 日时，我得到超出范围的错误。我不想更改我的 excel 文件，所以有一个选项我可以在数据库（MS SQL 服务器）上更改，还是我必须使用可以在插入它们之前转换它们的 c# 代码......谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:45:42.627

如果您知道来自 Excel 的格式，最好使用特定的 IFormatterProvider 将字符串解析为 C# 中的 DateTime。

这里的问题是来自 Excel 的字符串没有文化信息，因此转换为 DateTime 只能考虑数据库的文化 - 在这种情况下是一种反转月份和日期的格式。这将意味着超出范围的日期（如您的情况）或不明确的日期将永远无法正确解析。

在 C# 代码中，您可以指定实现的文化`IFormatterProvider`，en-GB 具有您指定的 Excel 日期的日期格式。[MSDN 文档](http://msdn.microsoft.com/en-us/library/kc8s65zs)中的示例显示了如何执行此操作。我的示例简报展示了如何将具有 en-GB 日期格式的字符串转换为与`DateTime`文化无关的字符串：

```
var culture = CultureInfo.CreateSpecificCulture("en-GB");
var date = DateTime.Parse("13/12/2011", culture); 
```

SQL 在文化方面也有同样的问题。任何文化敏感数据的字符串表示将始终丢失当前文化。转换该数据时，如果它与服务器不同，则需要指定文化。

您可以在 SQL 中执行此操作，并对您尝试转换的字符串的格式进行硬编码（103 表示 en-GB 日期格式 dd/mm/yyyy）：

```
declare @datestring varchar(10) = '13/12/2011' --13th December
-- 103 is the format code for UK dates with full yyyy century.
select convert(date, @datestring, 103) --gives 2011-12-13

declare @datestring2 varchar(10) = '05/04/2011' --5th April, ambiguous date.
select convert(date, @datestring2, 103) --gives 2011-04-05 
```

[转换/转换格式代码。](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

还值得注意的是，这也将正确转换模棱两可的日期，例如 05/04/2011，如果文化未知，这将反转月/日。

例如，如果您尝试将 2011 年 4 月 5 日的英国日期转换为美国日期而不告诉解析器格式是什么，您将得到 2011 年 5 月 4 日作为输出 - 反转月份和日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:47:22.517

您可以在使用 T-SQL 插入之前执行此操作：

```
set dateformat dmy 
```

请参阅[http://msdn.microsoft.com/fr-fr/library/ms189491.aspx](http://msdn.microsoft.com/fr-fr/library/ms189491.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:50:06.360

我认为您必须在 c# 中执行此操作。尝试这样的事情：

```
String excelDate = ...
String[] dateParts = excelDate.Split('/');
String sqlDate = dateParts[1] + "/" + dateParts[0] + "/" + dateParts[2];
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:47:48.023

首先将您的 excel datetime 解析为 C# datetime 对象并格式化 datetime 对象，让我们说

```
DateTime dt = DateTime.Parse(drExcel["dateofExcel"]);
drDB["DateTime"] = dt.ToString("s"); 
```

希望它能解决你的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T09:47:55.260

您也可以在数据库中进行操作，也可以尝试编写一个存储过程，使用您的 excelsheet 将数据插入数据库。

下面的用户在您的 SP 中提到了 TSQL 代码，这将起作用。

```
CREATE PROCEDURE ABC
AS
-- Do some operation
    SET DATEFORMAT ydm;

    insert into @dates
    select '2008-09-01','2008-09-01'

END 
```

# php - 缓存设计和 Memcache(d) 记录超时？

> ID：10734944
> 
> 赞同：0
> 
> 时间：2012-05-24T09:42:48.027
> 
> 标签：php, caching, memcached

对于每个 API 调用，我都有一个非常广泛的缓存系统。从每个命令和请求参数以及特定超时创建唯一指纹。

当发出请求并且它没有分配可接受的缓存时间戳时，则发出请求而没有返回缓存，因此程序会自行处理所有内容。其结果以新的时间戳存储在缓存中。

如果发出请求并且请求定义它愿意接受 5 分钟缓存 - 并且系统发现这样 - 然后系统从缓存返回结果。

这意味着我的每条缓存记录都包含一个键（唯一指纹）、结果和创建时间的时间戳。

当前缓存存储在文件系统中，时间戳是文件修改时间，这会导致 i/o 请求在高负载时成为杀手。

阅读了多篇文章后，我意识到建议使用 Memcache 和 Memcached 来减少这些调用。

但 Memcache 和 Memcached 只存储指纹和值。没有时间戳，这在技术上意味着我将失去按需缓存时间戳的接受和灵活性。从技术上讲，我必须开始为每个缓存存储两条记录：

指纹数据和数据指纹时间和时间戳

..这似乎很脏。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:57:42.067

如果您在创建时就知道缓存对象在缓存中的持续时间，那么 Memcached 就有您需要的功能。[Memcache::set](http://www.php.net/manual/en/memcache.set.php)函数有一个名为 的参数，`$expire`您可以在其中以秒为单位设置缓存对象的生命周期。

如果您只知道从缓存中检索对象时的生命周期，那么这将不起作用。我同意每个缓存实体使用两个键是不可行的，因为缓存可能会丢失两者中的一个而保留另一个。一个（仍然“脏”，但更好）的解决方案可能是为您放入缓存中的每个对象存储一个时间戳。您可以不直接缓存对象，而是使用包含时间戳和对象的数组来做到这一点。

# ios - 在调用 layoutSubviews 之前将在 UIView 上运行的 NSOperation

> ID：10734948
> 
> 赞同：0
> 
> 时间：2012-05-24T09:43:15.607
> 
> 标签：ios, multithreading, nsoperation, nsoperationqueue, uiviewanimation

假设我有一个`UIView`我将调用的子类`AnimatableView`，其中我的实现`layoutSubviews`列出了一些内部内容。

`AnimatableView`也有`commenceAnimationLoop`看起来像这样的方法：

```
- (void) commenceAnimationLoop {

    NSOperation *animationLoop = [[AnimationLoopOperation alloc]init];
    [queue addOperation:animationLoop]; //queue is a NSOperationQueue iVar of AnimatableView
    [animationLoop release];
} 
```

`AnimationLoopOperation`是一个子类，`NSOperation`其`main`方法将启动一个无限动画，该动画只有在属性`isCancelled`变为 时才会退出`YES`。

我遇到的问题是在`ViewController`我设置和动画这样的实例的地方`AnimatableView`：

```
- (void) viewDidLoad {
    AnimatableView *animatableView = [AnimatableView alloc]initWithFrame:someFrame];

    [self.view addSubview: animatableView];
    [animatableView commenceAnimationLoop];

    [animatableView release];
} 
```

问题是在我的实例有机会调用之前`NSOperation`在执行中创建的（意味着它的内容尚未生成和布局）。`commenceAnimationLoop``AnimatableView``layoutSubviews`

我有根据地猜测该`layoutSubviews`方法稍后会调用（当`ViewController`准备好呈现其视图层次结构时？），但是该`commenceAnimationLoop`方法会产生一个立即在后台执行的线程。

总而言之-让我的`animationLoop`操作在开始之前等待视图布局的最佳方法是什么？

为我想要实现的目标提供一些高级上下文 - 我正在使用`NSOperation`它来启动连续动画。我的想法是我可以提供一种`endAnimation`可能会调用`cancelAllOperations`我的队列的方法。所有这些都是希望我可以提供一种方法来启动然后中断无限动画，这两种方法`commenceAnimationLoop`和`endAnimation`. 也许我在沿着多线程的路线吠叫错误的树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:21:24.910

如果您需要`layoutSubviews`在操作之前运行，那么您不应该在它之前启动操作队列。您可以使用 阻止操作队列启动*其他*操作`[myOperationQueue setSuspended:YES];`。

由于它只会阻止队列启动新操作，因此您应该在将操作添加到队列之前暂停队列。

查看已加载并`layoutSubviews`运行后，您可以使用 再次恢复操作队列`[myOperationQueue setSuspended:NO];`。一个地方可以做到这一点`viewDidAppear`。

# java - SWT：如何通过选择文件打开资源管理器？

> ID：10734950
> 
> 赞同：1
> 
> 时间：2012-05-24T09:43:19.770
> 
> 标签：java, swt

我正在搜索如何对来自 SWT[的文件执行与 Open explorer相同的操作。](https://stackoverflow.com/questions/281888/open-explorer-on-a-file)现在我正在使用`Program.launch(someDirectoryPath);`，但它会在某个目录中打开资源管理器，但没有选择文件。是否可以在 SWT 打开目录并在资源管理器中选择文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:47:15.047

调用 Explorer 可执行文件时需要传递一些参数：http: [//support.microsoft.com/kb/152457](http://support.microsoft.com/kb/152457)

例子：

```
Explorer /select,C:\TestDir\TestApp.exe 
```

# opencl - 运行 OpenCl 程序

> ID：10734952
> 
> 赞同：1
> 
> 时间：2012-05-24T09:43:26.760
> 
> 标签：opencl

我是 OpenCl 的新手，我在运行我的第一个代码时遇到了麻烦。我有一个 ATI 显卡，我已经从这里[http://www.thebigblob.com/getting-started-with-opencl-and-gpu-computing/](http://www.thebigblob.com/getting-started-with-opencl-and-gpu-computing/)完成了必要的安装。以下是我从该网站上挑选来测试我的设置的代码。

```
#include <stdio.h>
#include <stdlib.h>

#ifdef __APPLE__
#include <OpenCL/opencl.h>
#else
#include <CL/cl.h>
#endif

#define MAX_SOURCE_SIZE (0x100000)

int main(void) {
    // Create the two input vectors
   int i;
const int LIST_SIZE = 1024;
int *A = (int*)malloc(sizeof(int)*LIST_SIZE);
int *B = (int*)malloc(sizeof(int)*LIST_SIZE);
for(i = 0; i < LIST_SIZE; i++) {
    A[i] = i;
    B[i] = LIST_SIZE - i;
}

// Load the kernel source code into the array source_str
FILE *fp;
char *source_str;
size_t source_size;

fp = fopen("vector_add_kernel.cl", "r");
if (!fp) {
    fprintf(stderr, "Failed to load kernel.\n");
    exit(1);
}
source_str = (char*)malloc(MAX_SOURCE_SIZE);
source_size = fread( source_str, 1, MAX_SOURCE_SIZE, fp);
fclose( fp );

// Get platform and device information
cl_platform_id platform_id = NULL;
cl_device_id device_id = NULL;
cl_uint ret_num_devices;
cl_uint ret_num_platforms;
cl_int ret = clGetPlatformIDs(1, &platform_id, &ret_num_platforms);
ret = clGetDeviceIDs( platform_id, CL_DEVICE_TYPE_ALL, 1,
        &device_id, &ret_num_devices);

// Create an OpenCL context
cl_context context = clCreateContext( NULL, 1, &device_id, NULL, NULL, &ret);

// Create a command queue
cl_command_queue command_queue = clCreateCommandQueue(context, device_id, 0, &ret);

// Create memory buffers on the device for each vector
cl_mem a_mem_obj = clCreateBuffer(context, CL_MEM_READ_ONLY,
        LIST_SIZE * sizeof(int), NULL, &ret);
cl_mem b_mem_obj = clCreateBuffer(context, CL_MEM_READ_ONLY,
        LIST_SIZE * sizeof(int), NULL, &ret);
cl_mem c_mem_obj = clCreateBuffer(context, CL_MEM_WRITE_ONLY,
        LIST_SIZE * sizeof(int), NULL, &ret);

// Copy the lists A and B to their respective memory buffers
ret = clEnqueueWriteBuffer(command_queue, a_mem_obj, CL_TRUE, 0,
        LIST_SIZE * sizeof(int), A, 0, NULL, NULL);
ret = clEnqueueWriteBuffer(command_queue, b_mem_obj, CL_TRUE, 0,
        LIST_SIZE * sizeof(int), B, 0, NULL, NULL);

// Create a program from the kernel source
cl_program program = clCreateProgramWithSource(context, 1,
        (const char **)&source_str, (const size_t *)&source_size, &ret);

// Build the program
ret = clBuildProgram(program, 1, &device_id, NULL, NULL, NULL);

// Create the OpenCL kernel
cl_kernel kernel = clCreateKernel(program, "vector_add", &ret);

// Set the arguments of the kernel
ret = clSetKernelArg(kernel, 0, sizeof(cl_mem), (void *)&a_mem_obj);
ret = clSetKernelArg(kernel, 1, sizeof(cl_mem), (void *)&b_mem_obj);
ret = clSetKernelArg(kernel, 2, sizeof(cl_mem), (void *)&c_mem_obj);

// Execute the OpenCL kernel on the list
size_t global_item_size = LIST_SIZE; // Process the entire lists
size_t local_item_size = 64; // Process in groups of 64
ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL,
        &global_item_size, &local_item_size, 0, NULL, NULL);

// Read the memory buffer C on the device to the local variable C
 int *C = (int*)malloc(sizeof(int)*LIST_SIZE);
 ret = clEnqueueReadBuffer(command_queue, c_mem_obj, CL_TRUE, 0,
        LIST_SIZE * sizeof(int), C, 0, NULL, NULL);

// Display the result to the screen
for(i = 0; i < LIST_SIZE; i++)
    printf("%d + %d = %d\n", A[i], B[i], C[i]);

// Clean up
ret = clFlush(command_queue);
ret = clFinish(command_queue);
ret = clReleaseKernel(kernel);
ret = clReleaseProgram(program);
ret = clReleaseMemObject(a_mem_obj);
ret = clReleaseMemObject(b_mem_obj);
ret = clReleaseMemObject(c_mem_obj);
ret = clReleaseCommandQueue(command_queue);
ret = clReleaseContext(context);
free(A);
free(B);
free(C);
return 0;
} 
```

...按照那里的说明。我不断收到“加载内核失败”，这意味着它无法打开文件。我从哪里获取内核源？有人可以告诉我如何让它运行吗？提前致谢..

```
gcc -c -I /home/suraj/Desktop/Intern/softwares/AMD-APP-SDK-v2.7-lnx32
/AMD-APP-SDK-v2.7-RC-lnx32/include opencl.c -o oopencl.o

gcc opencl.o -o host -L /home/suraj/Desktop/Intern/softwares/AMD-APP-SDK
-v2.7-lnx32/AMD-APP-SDK-v2.7-RC-lnx32/lib/x86 -l OpenCL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:42:13.313

I just went through this exercise with this source code as well, and everything worked fine for me. Did you grab the kernel program from [github](https://github.com/smistad/OpenCL-Getting-Started/)? It is the third program down in the list called "vector_add_kernel.cl". The C program needs the kernel to actually run.

# java - 两个 java.util.Iterators 到同一个集合：它们必须以相同的顺序返回元素吗？

> ID：10734953
> 
> 赞同：4
> 
> 时间：2012-05-24T09:43:30.537
> 
> 标签：java, api, collections, iterator, contract

这更像是一个理论问题。如果我有一个未排序的任意集合`c`并且我`java.util.Iterator`通过调用两次获得两个 s ，那么两个迭代器是否必须以相同的顺序`c.iterator()`返回's 元素？`c`

我的意思是，在实践中，他们可能总是会这样做，但他们是否被迫通过合同这样做？

谢谢，扬

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T09:45:10.067

不，他们不是。

> “没有关于元素返回顺序的保证（除非这个集合是某个提供保证的类的实例）。”

请参阅[Collection#iterator api 合同](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#iterator%28%29)。

这包括从一个迭代器到下一个迭代器（因为它没有说明任何要求）。

还要考虑在获取这两个迭代器之间的基础集合中可能发生了一些变化！添加或删除的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:48:06.327

迭代器的实现由特定的 Collection 类提供。List 的迭代器将给出有序元素，而 Set 不会

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:49:51.780

因为大多数数据结构默认情况下没有排序，所以不确定它们是否会以相同的顺序迭代。

如果您想要相同的顺序，则必须先对集合进行排序。

# django - Django：从管理界面更改文件字段名称

> ID：10734954
> 
> 赞同：0
> 
> 时间：2012-05-24T09:43:35.270
> 
> 标签：django, file-upload, django-admin, filefield

我正在开发 Django 界面，但在更改上传文件的名称时遇到问题。

这是我模型的一部分

```
class Test(models.Model):
    var = models.IntegerField()
    var1 = models.ManyToManyField('OtherClass')

    file = models.FileField(upload_to='dir/%d',storage=MyFileSystemStorage()) 
```

如您所见，我有一些多字段模型，我希望能够在保存文件时更改上传文件的名称。我用自己的方法“MyfileSystemStorage”做到了，问题是我想在保存时将管理界面中的 var1 信息“选择”添加到文件名中。

是否有可能做到这一点以及如何做到这一点？如果有人可以帮助我，我将不胜感激..

谢谢大家见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:00:37.917

```
class ExampleForm(ModelForm):
    def save(self, commit=True):
        m = super(ExampleForm, self).save(commit=False)

        m2mvariable = self.cleaned_data['var1']
        # do stuff..

        if commit:
            m.save()
        return m

    class Meta:
        model = Test

class TestAdmin(admin.ModelAdmin):
    filter_horizontal = ('var1',)
    form = ExampleForm

admin.site.register(Test, TestAdmin) 
```

对于您的其他评论：

如果你想要一个字符串表示，你可以为你的模型创建一个 unicode 方法，例如：

```
class Test(models.Model):
    #attrs...

    def __unicode__(self):
        return u"%s" % self.someattr 
```

但是您可以对 m2m 结果做任何您想做的事情，您可以遍历它们：

```
for obj in results:
    print obj.attr 
```

# ios - UITextField 应该只接受数字值

> ID：10734959
> 
> 赞同：31
> 
> 时间：2012-05-24T09:43:40.397
> 
> 标签：ios, objective-c, iphone, xcode, uitextfield

我有 UIExfields 我希望它应该只接受其他输入数字值的显示警报。我希望motionSicknessTextFiled 只接受数字

```
NSString*dogswithMotionSickness=motionSicknessTextField.text;
NSString*valueOne=cereniaTextField.text;
NSString*valueTwo=prescriptionTextField.text;
NSString*valueThree=otherMeansTextField.text;
NSString*valueFour=overtheCounterTextField.text; 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-24T09:45:56.653

在您从中获取这些值的任何 UITextField 中，您都可以指定当有人在文本字段内触摸时要显示的键盘类型。

EG 纯数字键盘。

**像这个截图：**

![将出现仅数字键盘](../Images/d3e09169210b0881a514afdb4a801258.png)

这在使用 Xcode 内置的 XIB 和 Interface Builder 时很容易设置，但如果您想以编程方式理解这一点，请查看 Apple 的[`UITextInputTraits`协议参考页面，特别是`keyboardType`属性](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intf/UITextInputTraits)信息。

要过滤掉标点符号，请设置文本字段的委托并设置 shouldChangeCharactersInRange 方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSCharacterSet *numbersOnly = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
    NSCharacterSet *characterSetFromTextField = [NSCharacterSet characterSetWithCharactersInString:textField.text];

    BOOL stringIsValid = [numbersOnly isSupersetOfSet:characterSetFromTextField];
    return stringIsValid;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-03-14T11:22:41.020

**目标 C**

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (!string.length) 
        return YES;

    if (textField == self.tmpTextField)
    {
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
        NSString *expression = @"^([0-9]+)?(\\.([0-9]{1,2})?)?$";
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression 
                                                                               options:NSRegularExpressionCaseInsensitive 
                                                                                 error:nil];
        NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                            options:0
                                                              range:NSMakeRange(0, [newString length])];        
        if (numberOfMatches == 0)
            return NO;        
    }
    return YES;
} 
```

**斯威夫特 3.0**

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    if !string.characters.count {
        return true
    }
    do {
        if textField == self.tmpTextField {
            var newString = textField.text.replacingCharacters(inRange: range, with: string)
            var expression = "^([0-9]+)?(\\.([0-9]{1,2})?)?$"
            var regex = try NSRegularExpression(pattern: expression, options: NSRegularExpressionCaseInsensitive)
            var numberOfMatches = regex.numberOfMatches(inString: newString, options: [], range: NSRange(location: 0, length: newString.characters.count))
            if numberOfMatches == 0 {
                return false
            }
        }
    }
    catch let error {
    }
    return true
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-24T09:47:09.863

```
[textField setKeyboardType:UIKeyboardTypeNumberPad]; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-04T12:51:21.243

## 我已经实现了具有 textField 功能的片段：

1.  检查**允许的最大**字符数。
2.  检查**有效的十进制**数。
3.  只检查**数字**。

代码是`UITextField`委托方法。在使用此代码段之前，您必须具有以下属性：

1.  `self.maxCharacters`
2.  `self.numeric`// 只有**int**字符。
3.  `self.decimalNumeric`// 只有数字和“.”、“”（对于特定的语言环境，如俄语）。

## 代码：

```
- (BOOL)textField:(UITextField *) textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if(self.numeric || self.decimalNumeric)
    {
        NSString *fulltext = [textField.text stringByAppendingString:string];
        NSString *charactersSetString = @"0123456789";

        // For decimal keyboard, allow "dot" and "comma" characters.
        if(self.decimalNumeric) {
            charactersSetString = [charactersSetString stringByAppendingString:@".,"];
        }

        NSCharacterSet *numbersOnly = [NSCharacterSet characterSetWithCharactersInString:charactersSetString];
        NSCharacterSet *characterSetFromTextField = [NSCharacterSet characterSetWithCharactersInString:fulltext];

        // If typed character is out of Set, ignore it.
        BOOL stringIsValid = [numbersOnly isSupersetOfSet:characterSetFromTextField];
        if(!stringIsValid) {
            return NO;
        }

        if(self.decimalNumeric)
        {
            NSString *currentText = [textField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

            // Change the "," (appears in other locale keyboards, such as russian) key ot "."
            currentText = [currentText stringByReplacingOccurrencesOfString:@"," withString:@"."];

            // Check the statements of decimal value.
            if([fulltext isEqualToString:@"."]) {
                textField.text = @"0.";
                return NO;
            }

            if([fulltext rangeOfString:@".."].location != NSNotFound) {
                textField.text = [fulltext stringByReplacingOccurrencesOfString:@".." withString:@"."];
                return NO;
            }

            // If second dot is typed, ignore it.
            NSArray *dots = [fulltext componentsSeparatedByString:@"."];
            if(dots.count > 2) {
                textField.text = currentText;
                return NO;
            }

            // If first character is zero and second character is > 0, replace first with second. 05 => 5;
            if(fulltext.length == 2) {
                if([[fulltext substringToIndex:1] isEqualToString:@"0"] && ![fulltext isEqualToString:@"0."]) {
                    textField.text = [fulltext substringWithRange:NSMakeRange(1, 1)];
                    return NO;
                }
            }
        }
    }

    // Check the max characters typed.
    NSUInteger oldLength = [textField.text length];
    NSUInteger replacementLength = [string length];
    NSUInteger rangeLength = range.length;

    NSUInteger newLength = oldLength - rangeLength + replacementLength;
    BOOL returnKey = [string rangeOfString: @"\n"].location != NSNotFound;

    return newLength <= _maxCharacters || returnKey;
} 
```

## 演示：

![在此处输入图像描述](../Images/7145e37314f5d669803590362e205c2f.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-07-29T03:02:55.927

修改后的 Michael Dautermann 的回答：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if(string.length > 0)
    {
        NSCharacterSet *numbersOnly = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
        NSCharacterSet *characterSetFromTextField = [NSCharacterSet characterSetWithCharactersInString:string];

        BOOL stringIsValid = [numbersOnly isSupersetOfSet:characterSetFromTextField];
        return stringIsValid;
    }
    return YES;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-02T10:32:44.217

**迅速 4**

这仅允许输入数字，您还可以设置字符限制

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
  let aSet = NSCharacterSet(charactersIn:"0123456789").inverted
  let compSepByCharInSet = string.components(separatedBy: aSet)
  let numberFiltered = compSepByCharInSet.joined(separator: "")

  if string == numberFiltered {
    let currentText = textField.text ?? ""
    guard let stringRange = Range(range, in: currentText) else { return false }
    let updatedText = currentText.replacingCharacters(in: stringRange, with: string)
    return updatedText.count <= 10
  } else {
    return false
  }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-25T09:36:56.233

这是斯威夫特的解决方案：

在 viewDidLoad 中设置委托：

```
_yourTextField.delegate = self 
```

```
let _acceptableCharacters = "0123456789."

func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {

    if (string.characters.count == 0) {
        return true
    }

    if (textField == self._yourTextField) {
        let cs = NSCharacterSet(charactersInString: self._acceptableCharacters)
        let filtered = string.componentsSeparatedByCharactersInSet(cs).filter {  !$0.isEmpty }
        let str = filtered.joinWithSeparator("")

        return (string != str)
    }

    return true
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-24T09:48:26.150

这是检查字符串是否仅包含数字值的函数

```
+(BOOL) checkforNumeric:(NSString*) str
{
    NSString *strMatchstring=@"\\b([0-9%_.+\\-]+)\\b"; 
    NSPredicate *textpredicate=[NSPredicate predicateWithFormat:@"SELF MATCHES %@", strMatchstring];

    if(![textpredicate evaluateWithObject:str])
    {
        //////NSLog(@"Invalid email address found");
        UIAlertView *objAlert = [[UIAlertView alloc] initWithTitle:APP_NAME message:@"please enter valid text." delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Close",nil];
        [objAlert show];
        [objAlert release];
        return FALSE;
    }
    return TRUE;
} 
```

在提交按钮上检查它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-19T14:34:50.967

[这个答案](https://stackoverflow.com/a/22403622/5620628)在 Swift 3 中引发了一些错误，这是有效的答案：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    if string.characters.count == 0 {
        return true
    }
    do {
        if textField == self.numberTextField {

            let nString = textField.text as NSString?
            let newString = nString?.replacingCharacters(in: range, with: string)
            let expression = "^([0-9]+)?(\\.([0-9]{1,2})?)?$"
            let regex = try NSRegularExpression(pattern: expression, options: .caseInsensitive)
            let numberOfMatches = regex.numberOfMatches(in: newString! as String, options: [], range: NSRange(location: 0, length: (newString?.characters.count)!))

            if numberOfMatches == 0 {
                return false
            }
        }
    }
    catch let error {
    }
    return true
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-04T23:13:17.307

我刚刚修改了迈克尔的答案，使其更容易实现。只需确保您的代表`UITextfield`设置为自身。

```
yourTxtField.delegate = self; 
```

此外，将此代码复制并粘贴到您的主文件中。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string  {

    if (textField == yourTxtField) {
        NSCharacterSet *numbersOnly = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
        NSCharacterSet *characterSetFromTextField = [NSCharacterSet characterSetWithCharactersInString:string];

        BOOL stringIsValid = [numbersOnly isSupersetOfSet:characterSetFromTextField];
            return stringIsValid;
        }else {
            return YES;
        }
    } 
```

如果您想允许使用空格键，只需在 . 末尾放置一个空格`CharactersInString`，就像这样：

```
@"0123456789" -> @"0123456789 " 
```

## 此外：

如果要限制字符串的长度，只需将 if 函数替换为以下内容：

```
if (textField == yourTxtField) {
        NSUInteger newLength = [textField.text length] + [string length] - range.length;
        NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:@"1234567890"] invertedSet];
        NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
        return (([string isEqualToString:filtered])&&(newLength <= 10));

    } 
```

在我的情况下，末尾的“10”代表字符的限制。

干杯! :)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-17T22:49:42.753

@almas-adlibek 最佳答案的 Swift 4.2 端口

一堆配置变量：

```
private let kMaxTextLength = 8
private let kZeroDotted = "0."
private let kZero = "0"
private let kDoubleDot = ".."
private let kDot = "."
private let kPeriod = "," 
```

现在 Swift 4 转换了部分代码。

```
 func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    guard let oldText = textField.text, let swiftRange = Range(range, in: oldText) else {
        return true
    }

    let newText = oldText.replacingCharacters(in: swiftRange, with: string)

    var currentText =  textField.text?.trimmingCharacters(in: CharacterSet.whitespacesAndNewlines)

    // Change the "," (appears in other locale keyboards, such as russian) key ot "."
    currentText = currentText?.replacingOccurrences(of: kPeriod, with: kDot)

    // Check the statements of decimal value.
    if (newText == kDot) {
        textField.text = kZeroDotted;
        return false
    }

    if (newText.range(of: kDoubleDot) != nil) {
        textField.text = newText.replacingOccurrences(of: kDoubleDot, with: kDot);
        return false
    }

    // If second dot is typed, ignore it.
    let dots = newText.components(separatedBy: kDot)
    if(dots.count > 2) {
        textField.text = currentText;
        return false
    }

    // If first character is zero and second character is > 0, replace first with second. 05 => 5;
    if(newText.count == 2) {
        if(newText[0...0] == kZero && newText != kZeroDotted) {
            textField.text = newText[1...1]
            return false
        }
    }

    // Check the max characters typed.
    let oldLength = textField.text?.count ?? 0
    let replacementLength = string.count
    let rangeLength = range.length

    let newLength = oldLength - rangeLength + replacementLength;
    let returnKey = string.rangeOfCharacter(from: CharacterSet.newlines) != nil

    return newLength <= kMaxTextLength || returnKey;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-11-17T22:23:59.297

**迅速**

```
class ExampleVC: UIViewController {

    let numbers = "0123456789";

    override func viewDidLoad() {
        super.viewDidLoad()

        let textfield = UITextField(frame: CGRectMake(20, 100, 300, 44))
        //make some customization, if you want
        self.view.addSubview(textfield)

        textfield.delegate = self;
    }
}

extension ExampleVC: UITextFieldDelegate {

    func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        return string.characters.count > 0 ? numbers.contains(string) : true
    }
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-26T13:05:56.053

仅在文本字段中输入数值的另一种选择是选择相应文本字段的键盘类型属性。附上截图供参考。[![数字键盘选择](../Images/e1bec8613060da639debc4c26b132aa5.png)](https://i.stack.imgur.com/oaZlb.png)

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-12-25T12:15:29.693

这是**swift 4的工作示例**

```
public func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool
{
    // Allow Backspace
    if string.count == 0 {
        return true
    }

    // Allow Only Valid Decimal Numbers
    if let textFieldText = textField.text   {

        let finalText = (textFieldText as NSString).replacingCharacters(in: range, with: string)
        if Double(finalText) != nil {
            return true
        }
    }
    return false
} 
```

# ruby-on-rails - 带有 httparty 的反机器人系统请求站点的问题

> ID：10734960
> 
> 赞同：0
> 
> 时间：2012-05-24T09:43:41.700
> 
> 标签：ruby-on-rails, httparty

我在使用 httparty gem 请求网站时遇到问题：反机器人系统用一些无聊的东西回应我）httparty 是否有任何标准方法来更改请求标头（我的意思是 UserAgent 等）？还是可以以其他方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:47:47.970

前段时间我通过使用内置用户代理和 cookie 支持的[mechanize gem 解决了这个问题。](https://github.com/tenderlove/mechanize)

[快速示例](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)：

```
require 'rubygems'
require 'mechanize'

a = Mechanize.new { |agent|
  agent.user_agent_alias = 'Mac Safari'
}

a.get('http://google.com/') do |page|
  search_result = page.form_with(:name => 'f') do |search|
    search.q = 'Hello world'
  end.submit

  search_result.links.each do |link|
    puts link.text
  end
end 
```

# javascript - 页面加载后在 html 正文中注入外部 javascript 文件

> ID：10734968
> 
> 赞同：7
> 
> 时间：2012-05-24T09:44:19.437
> 
> 标签：javascript, jquery, model-view-controller, delayed-execution

我想在页面加载后加载外部 javascript。实际上，javascript 包含广告的来源，并且它使页面加载缓慢。我想要的只是延迟加载和执行广告以确保快速页面加载。

谢谢，比拉尔

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T09:55:33.947

您可以在正文块的最后一个标签处使用此脚本：

```
<script type="text/javascript">
   var script = document.createElement('script');
   script.setAttribute('src', 'http://yourdomian.com/your_script.js');
   script.setAttribute('type', 'text/javascript');
   document.getElementsByTagName('head')[0].appendChild(script);
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T09:48:24.307

```
var script=document.createElement('script');
script.type='text/javascript';
script.src=url;

$("body").append(script); 
```

[考特西](https://stackoverflow.com/questions/1199676/can-i-create-script-tag-by-jquery)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T09:46:40.250

我会考虑使用异步 Javascript 加载。有这方面的框架，例如[requireJS](http://requirejs.org/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T10:52:20.300

$("#selector").click(function(){ $.getScript("YourScript.js"); });

然后运行该脚本中实现的内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-23T18:46:56.280

如果不使用 jQuery getScript() 和 Promise 或像 requireJS 这样的适当加载库，脚本可以包含在页面中，但会异步加载，因此无法保证它会在您需要时准备好。如果您已经在使用 jQuery，那么简单的答案是：

```
$.getScript( scriptUrl ).then( function() {
  //do this ONLY after the script is fully loaded
}); 
```

# php - 如果设置了会话，则显示 css 内容的正确方法

> ID：10734970
> 
> 赞同：0
> 
> 时间：2012-05-24T09:44:22.970
> 
> 标签：php, css, session, loops, isset

我目前正在开发一个网站，用户必须登录才能查看他们的个人资料。如果用户未登录，个人资料页面将重定向到登录页面。如果用户已登录，那么他们就可以看到他们的个人资料了！

无需过多详细介绍，以下是我的代码的运行方式：如果设置了会话，则运行一个循环以从数据库中获取用户数据并在 CSS 中显示它。如果不是，则不显示 CSS 内容并重定向到登录页面。

我觉得有一种更简单的方法可以做到这一点。现在，我的大部分 CSS 都嵌入到了我的 php 循环中，而且这样做的代码看起来很草率。

我的问题是，与其在 php 循环中嵌入一堆 html、div 等，如果设置了会话，我可以只 require_once("profile_info.php") 吗？将 html/css 转换为 php 友好是一件非常痛苦的事情。也许还有其他我忽略的选择？谢谢你。:)

**编辑**

有趣的是，如何使事情变得比实际情况更复杂！事实上，我正在结合我的 CSS 和 PHP，这真的让我的代码变得混乱。快速浏览了一下，我让事情按应有的方式工作。谢谢大家的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:47:41.573

您是否已经考虑过为 PHP 使用模板引擎？

几年前，我在我的一个项目中使用[了 smarty](http://www.smarty.net/)，但它在模板引擎上应该很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:54:10.873

对于你问题的最后一部分......

我认为您应该在开头添加以下内容而`profile_info.php`不是`require_once`

```
session_start();
if (!isset($_SESSION['user']))
{
    header('Location: login.php');
    exit(0);
} 
```

# redirect - ISAPI 重写检测根文件夹

> ID：10734971
> 
> 赞同：0
> 
> 时间：2012-05-24T09:44:23.327
> 
> 标签：redirect, url-rewriting, rewrite, isapi-rewrite

使用 ISAPI 重写我正在寻找一种方法来检测给定的 URL 是否仅包含一个子文件夹，然后重写 URL。

```
www.mysite.com/Cloud     => true
www.mysite.com/Cloud/    => false
www.mysite.com/Cloud/One => false
www.mysite.com/Cloud.xml => false 
```

结果应该是添加了 .html 的 URL，仅用于真实条件

```
www.mysite.com/Cloud.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:31:47.187

尝试使用以下内容：

```
RewriteEngine on
RewriteBase /

RewriteRule ^([^/]+)$ $1.html [NC,L] 
```

您没有指定它是 301 重定向还是重写。因此，如果它是 301 重定向，只需在标志中添加 R=301。

# scala - 行为匹配

> ID：10734977
> 
> 赞同：1
> 
> 时间：2012-05-24T09:44:53.547
> 
> 标签：scala, behavior, matching

不久前，我发现了一个有趣的博客条目，其中有人展示了如何确保对象具有特定的行为。现在我想这样做，但我找不到博客。任何人都可以告诉我语法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T09:57:19.867

你是说结构类型吗？这是一个例子：

```
class Duck {
  def quack = "quack"
}

class OtherDuck {
  def quack = "mooh"
}

object Test {
  def testQuack (d: {def quack: String}) = d.quack
} 
```

然后你可以这样做：

```
Test.testQuack(new Duck)
Test.testQuack(new OtherDuck) 
```

# jquery - 如何为文件上传表单发布 jquery 帖子？

> ID：10734979
> 
> 赞同：1
> 
> 时间：2012-05-24T09:44:57.600
> 
> 标签：jquery, serialization, file-upload, coldfusion

我有一个看起来像这样的表格：

```
<form id="uploadForm" name="uploadForm" method="post" enctype="multipart/form-data">
    <input type="file" id="uploadFile" name="uploadFile" /><br />
    <input type="submit" id="process" name="process" value="Process File" />
</form> 
```

我想允许用户上传文件，然后处理它。当用户点击“进程”时，我想使用 jquery 帖子调用此页面（此表单显示在 cfwindow 中，我不想离开 cfwindow），进行一些处理并输出一条消息。这是我通常使用的代码：

```
$('#process').click(function(){
    $.post('<cfoutput>#cgi.script_name#</cfoutput>', $('#uploadForm').serialize(), function(data){
        ... some processing ...
    });
}); 
```

然而，什么都没有通过。进一步的调查使我找到了[序列化](http://api.jquery.com/serialize/)函数的 jquery 文档，其中指出：

> 来自文件选择元素的数据未序列化。

如何传递文件选择元素？

（如果这有所不同 - 当我发布到页面时，我正在使用此代码来读取文件选择元素中上传的文件：

```
<cfspreadsheet action="read" src="#form.uploadFile#" sheet="1" query="spreadsheetData" headerRow="1" excludeHeaderRow="true"> 
```

最初我只是使用常规形式的帖子，它工作得很好。我想切换到ajax，这样我就可以保持cfwindow打开而不是重新加载。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:50:57.803

查看[Valums File Uploader](http://github.com/valums/file-uploader)项目。它允许像您尝试做的那样通过 XHR 上传。您可以使用他的库或调整他的概念以适应您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:21:43.997

解决这个问题的传统方法是让表单以隐藏的 iFrame 为目标：

```
<!-- fileupload.cfm -->
<script>function functionToHandleUploadComplete(){ // Do things here }</script>
<form action="getfile.cfm" method="post" target="myHiddeniFrame" />
  <input type="file" name="myFile" />
  <!-- your fields -->  
</form>

<iframe id="myHiddeniFrame" style="somthing to hide the frame" />

<!-- getFile.cfm loaded in an iFrame within fileUpload.cfm-->
<cffile action="upload" formField="myFile" ..... />
<cfoutput>
  <script>
    window.parent.functionToHandleUploadComplete();
  </script>
</cfoutput> 
```

我们在我们的产品中使用这种方法并且效果很好。如果您发送到的页面在同一个域中，您可以让它推出 javascript 来告诉包含页面上传已完成。

不过，我会先看看 File Uploader 项目，因为它看起来相当漂亮。

# jquery - 为什么 slideDown 动画会自动先用于 slideUp 动画？

> ID：10734981
> 
> 赞同：2
> 
> 时间：2012-05-24T09:45:18.517
> 
> 标签：jquery, jquery-animate

我在单击按钮时添加了一些结果。我正在使用`slideDown`方法来显示这些新结果，但不知道为什么要先显示这些新结果`slideUp`然后执行`slideDown`动画。当我清除添加的结果时，它会立即被删除，根本没有动画。

请看一下这个演示：http: [//jsbin.com/imulem](http://jsbin.com/imulem)

```
$('#sb').click ( function(){
var html = '';

  html += "<div class='result'>" + 'fake results.. ' +  '</div>';
  html += "<div class='result'>" + 'fake results.. ' +  '</div>';
  html += "<div class='result'>" + 'fake results.. ' +  '</div>';
  $(html).hide().prependTo('#searchresults').slideDown('slow');
        });

$('#clearb').click ( function(){
            $('#searchresults>div').slideUp('slow').remove();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:05:09.920

这个CSS导致它：

```
-webkit-transition: all 1s ease-in-out; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:08:28.330

我给了`.result`一个名为`h0`它的类，它具有`height: 0px;`属性。这样，当您单击 时，它们没有高度`#sb`。`div`您应该在动画结束后删除s。

对于 chrome 问题，将过渡从 更改`all`为`background-color`.

[你可以在这里](http://jsbin.com/imulem/4)找到工作案例。

CSS

```
.h0 { height: 0px; }
#searchresults .result{
  padding: 1.2em;
  margin-left: 2em;
  color: #690011;
  border-radius: 1.8em;
  -webkit-transition: background-color 1s ease-in-out;
  background-color: #F0B616;
} 
```

Javascript

```
$('#sb').click ( function(){
  var html = '';

  html += "<div class='result h0'>" + 'fake results.. ' +  '</div>';
  html += "<div class='result h0'>" + 'fake results.. ' +  '</div>';
  html += "<div class='result h0'>" + 'fake results.. ' +  '</div>';
  $(html).hide().prependTo('#searchresults').slideDown('slow');
});

$('#clearb').click ( function(){
  var $divs = $('#searchresults>div');
  $divs.slideUp('slow', function() { $divs.remove(); });
}); 
```

# jquery - jQuery Chosen 插件：自定义/格式化选择中的选项文本

> ID：10734982
> 
> 赞同：4
> 
> 时间：2012-05-24T09:45:19.180
> 
> 标签：jquery, drop-down-menu, jquery-chosen

我在 jquery 中使用了一个名为 selected 的插件，用于具有自动完成功能的选择框。[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

我在哪里可以格式化选择框中选项的文本？

选择的插件中有一个方法吗？我已经阅读了文档并扫描了代码，但似乎找不到它。

这是我想要实现的屏幕截图。（这是用另一个插件'selectmenu'制作的，但我想用'chosen'做同样的事情）

![在此处输入图像描述](../Images/de59155e365727c56ab1e5ddd8ad1e2c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:04:42.280

目前 master 分支没有这样的功能。

但是有这个拉取请求，这就是你所需要的（目前它仅适用于 jquery）： [https ://github.com/harvesthq/chosen/pull/692](https://github.com/harvesthq/chosen/pull/692)

所以你可以从这里获取代码。 [https://github.com/cjstewart88/chosen/tree/templates](https://github.com/cjstewart88/chosen/tree/templates)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-16T16:26:38.457

这是现在的另一种方法......

您可以添加在正常选择中看起来还不错但通常不会出现在文本中的特殊字符。例如`TITLE :: Description`. 然后 `::` 使用它找到 and 格式。此示例专为单选而设计。对于多个，您可能只需要更改`.chosen-single`, 或使用其他方式来选择它。

```
$('select[name="SELECT_NAME"]')
    .chosen({search_contains: true})
    .add('.chosen-search')
    .on('chosen:showing_dropdown keyup change', function() {
    $('.chosen-results .active-result, .chosen-single span').html(function() {
        var html = $(this).html();
        if (/ :: /.test(html)) {
            return '<strong>' + html.replace(' :: ', '</strong> <span style="font-size:70%;display:inline;font-weight: normal;">') + '</span>';
        } else {
            return html;
        }
    });
}); 
```

你在这个例子中的结果应该是`<strong>Title</strong> <span style="font-size:70%;display:inline;font-weight: normal;">Description</span>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T09:55:49.727

您可以将宽度作为参数添加到选择

```
$("field").chosen({ width: '400px' }) 
```

# java - 使用android从字母数字字符串中提取数字

> ID：10734989
> 
> 赞同：6
> 
> 时间：2012-05-24T09:45:46.620
> 
> 标签：java, android, regex, string

我只需要从中提取数值`String str="sdfvsdf68fsdfsf8999fsdf09"`。如何从android中的字母数字字符串中提取数字？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-24T09:47:59.160

```
String str="sdfvsdf68fsdfsf8999fsdf09";
String numberOnly= str.replaceAll("[^0-9]", ""); 
```

更新：

```
String str="fgdfg12°59'50\" Nfr | gdfg: 80°15'25\" Efgd";
String[] spitStr= str.split("\\|");

String numberOne= spitStr[0].replaceAll("[^0-9]", "");
String numberSecond= spitStr[1].replaceAll("[^0-9]", ""); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:52:52.400

```
public static String getOnlyNumerics(String str) {

    if (str == null) {
        return null;
    }

    StringBuffer strBuff = new StringBuffer();
    char c;

    for (int i = 0; i < str.length() ; i++) {
        c = str.charAt(i);

        if (Character.isDigit(c)) {
            strBuff.append(c);
        }
    }
    return strBuff.toString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T16:33:12.043

```
public static int extractNumberFromAnyAlphaNumeric(String alphaNumeric) {
    alphaNumeric = alphaNumeric.length() > 0 ? alphaNumeric.replaceAll("\\D+", "") : "";
    int num = alphaNumeric.length() > 0 ? Integer.parseInt(alphaNumeric) : 0; // or -1 
    return num;
} 
```

您可以根据需要将值设置为 0 或 -1（如果在字母数字中根本找不到数字该怎么办）

# c#-2.0 - 如何从 c#2.0 中的当前页面 url 查询字符串中删除特定的查询字符串列表

> ID：10734996
> 
> 赞同：0
> 
> 时间：2012-05-24T09:46:06.270
> 
> 标签：c#-2.0, request.querystring

假设我当前的页面 url 有 (http://mysite/english/faq.aspx?faqid=12123&cid=4545&intcid=65456&h=man)

```
string excludeQuerystring = DynConfig.Item("GoogleSEOLinkSettings/ExcludeQuerystring"); //this is the list of my exclude querystring (cid,intcid,del)

querystring = HttpContext.Current.Request.Url.AbsoluteUri.Split('?')[1]; //I will get faqid=12123&cid=4545,intcid=65456

StringBuilder fullQueryString = new StringBuilder();

if (!string.IsNullOrEmpty(excludeQuerystring) && !string.IsNullOrEmpty(querystring))
{
    string[] strEQ = excludeQuerystring.Split(',');  //making a array of excluded querystrings

    NameValueCollection navValues = HttpUtility.ParseQueryString(querystring);  //getting the list of querystring in NameValueCollection

    if (navValues.Count > 0)
    {
        string[] strQ = navValues.AllKeys;
        if(strQ.Length>0)
        {

        }
    }
}   

querystring= ?+faqid=12123&h=man //here I want updated querystring which does not have any querystring which is there in my excludeQuerystring 
```

我很困惑如何得到这个，实际上我想做一个函数来完成这一切。

请推荐！！

编辑：

我应用了新代码来解决上述问题，但是在将 NameValueCollection 再次转换为查询字符串时几乎没有卡住。

```
 protected void Page_Load(object sender, EventArgs e)
        {
            string querystring = string.Empty;

            string excludeList = "cid,intcid,del";

            if (!string.IsNullOrEmpty(excludeList))
            {
                string getFinalString = GetQueryString(excludeList);
                getFinalString = "?" + getFinalString;
            }
        }

        public string GetQueryString(string excludeArray)
        {
            string retQueryString = string.Empty;
            if (excludeArray.IndexOf(",") != -1)
            {
                string[] strArray = excludeArray.Split(",".ToCharArray());
                NameValueCollection filtered = new NameValueCollection();

                filtered.Add(HttpUtility.ParseQueryString(Request.Url.Query));
                if (filtered.HasKeys())
                {
                    foreach (string strMatch in strArray)
                    {
                        filtered.Remove(strMatch);
                    }
                    retQueryString = filtered.ToString(); //Here I am not able to convert back to querystring, however there are other ways to get it like (http://leekelleher.com/2008/06/06/how-to-convert-namevaluecollection-to-a-query-string/), is there any other way to do that
                }
            }

            return retQueryString;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:17:44.260

以下是我得到的完美解决方案，对此有任何评论。

```
string excludeList = "cid,intcid,del";

string getFinalString = Regex.Replace(Regex.Replace(Regex.Replace(Request.Url.Query, @"^\?", "&"), "&(" + excludeList.Replace(",", "|") + ")=[^&]*", "", RegexOptions.IgnoreCase), "^&", "?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:02:54.303

我们不能像下面这样直接删除查询字符串：

```
Request.QueryString.Remove("foo") 
```

如果你这样做，你会得到一个错误——集合是只读的。因此，我们需要在删除查询字符串之前编写以下代码。

**在 C# 中：**

```
PropertyInfo isreadonly = 
typeof(System.Collections.Specialized.NameValueCollection).GetProperty(
 "IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
 // make collection editable
 isreadonly.SetValue(this.Request.QueryString, false, null);
 // remove
 this.Request.QueryString.Remove("foo"); 
```

希望对你有帮助 ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:49:03.997

是的，有一种方法可以比较两个数组

```
 var array1 = new byte[] { 1, 2, 5, 4 };
        var array2 = new byte[] { 1, 2, 3, 4 };

        var areEqual = array1.SequenceEqual(array2); //return boolean value True or False 
```

# android - 重新启动计时器

> ID：10734997
> 
> 赞同：0
> 
> 时间：2012-05-24T09:46:08.057
> 
> 标签：android, timer

我想`Timer`在我打开时`ToggleButton`启动并在我关闭时取消。它可以工作，但是当我在被取消后尝试重新开始时，我得到了一个错误。问题出在哪里？这是代码：

```
final ToggleButton btnLive = (ToggleButton)findViewById(R.id.live);
    btnLive.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (btnLive.isChecked()) {

                timer = new Timer();
                timer.schedule(timerTask, 5*1000, 5*1000);

            } else {

                timer.cancel();
                timer.purge();
                timer = null;

            }
        }
    }); 
```

编辑：它可以以这种方式调用计时器：

```
timer.schedule(new TimerTask(){
                    private Runnable runnable = new Runnable() {
                        public void run() {
                            new Something().execute();
                        }
                    };
                    public void run() {
                        handler.post(runnable);
                    }
                }, 5*1000, 5*1000); 
```

你能解释一下为什么第一种方法不起作用吗？是范围问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:56:03.580

使用这种类型的代码并检查。

```
Timer mTimer = new Timer();
mTimer.schedule(new TimerTask()
                {
                    @Override
                    public void run() {
                        runOnUiThread(new Runnable() {
                            public void run() {

                            }
                        });
                    }
                }, 5000, 500); 
```

# serial-port - 来自 SPI 的 Arduino 不需要的传入串行数据

> ID：10734998
> 
> 赞同：1
> 
> 时间：2012-05-24T09:46:17.677
> 
> 标签：serial-port, arduino, nfc, spi

我正在使用带有 NFC Shield 的 Arduino（[这个](http://www.seeedstudio.com/depot/nfc-shield-p-916.html)）。我正在尝试在 Rx 上使用中断：我希望我的 Arduino 唤醒，每个它都在串行线上接收数据。这在没有 NFC 防护罩的情况下可以正常工作。但是，使用 NFC 屏蔽，它会在串行端口上发送“0”，触发中断，这我真的不想要。

经过一番研究，我发现每次库写入 SPI 引脚时（例如`digitalWrite(_clk, LOW);`，它返回“0”。

在循环函数中，我有这一行：

```
id = NFC.readPassiveTargetID(PN532_MIFARE_ISO14443A); 
```

因此，每次执行此行时，都会通过串行总线发送一个“0”，并且 Arduino 永远不会进入睡眠模式......（即使没有 NFC 卡可以读取）

有人知道为什么吗？我该如何避免呢？

# css - 如何从styles.css覆盖wordpress中插件的CSS

> ID：10734999
> 
> 赞同：1
> 
> 时间：2012-05-24T09:46:24.303
> 
> 标签：css, wordpress, overriding

我正在使用插件：“Wordpress 联系表 7”。

我想用我自己的 CSS 覆盖插件使用的 CSS。我想这样做，即使我更新了这个插件，或者改变了我的主题，我的改变仍然存在。

做这个的最好方式是什么？到目前为止，我一直在尝试编辑我的主题的 style.css。但这产生了不充分的结果。由于 style.css 可能在插件的 css 之前加载，因此 css 可能会被插件覆盖。仅当我为插件 css 中未定义的事物指定属性时，它才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-05-21T16:54:49.317

如果您只有一些修改要应用，那么到目前为止覆盖插件样式表的最简单方法是在文件`body`中您定位的元素前面添加。`style.css`添加`body`向选择器添加 CSS 特异性，允许它覆盖原始样式。就像 Reyzis 说的那样。

```
body .plugin-class {
    font-size: 30px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:00:48.787

你试过这个吗？

```
body {
  background-color: red !important;
} 
```

编辑：抱歉 - 已修复