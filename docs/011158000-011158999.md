# StackOverflow 问答 11158000-11158999

# jquery - 可以在没有数据库的情况下编辑的 Jquery 电子表格或“数据表”？

> ID：11158000
> 
> 赞同：1
> 
> 时间：2012-06-22T14:17:40.020
> 
> 标签：jquery, html

我正在寻找一个允许多个用户在不使用数据库的情况下添加或删除表数据行的插件。这将在本地运行，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:18:07.660

看 jStorage [http://www.jstorage.info/#example](http://www.jstorage.info/#example)

# ajax - Django：相对 url 不适用于 ajax 中的 post 调用

> ID：11158002
> 
> 赞同：0
> 
> 时间：2012-06-22T14:17:52.370
> 
> 标签：ajax, django, django-urls, django-csrf

我正在尝试将相对 url 与 post ajax 调用一起使用，如下所示：

当前网址路径：

```
http://localhost:8000/customer/0/location/0/user/0/ 
```

我需要更改为不同的目录。

```
var absolute = "http://localhost:8000/customer/0/location/0/line_group/addLine/2/";//+phone_id;
var relative= "../../line_group/addLine/1"

            $.get(relative,function(data){
            //this works     
            alert(data);
            });

            $.ajax({
            type: "POST",
            url: relative,
            data: "test=test1",
            error:function(data){
            //throws error when using relative path  
            alert('error');
            },
            success:function(data){
            // works fine when using absolute path 
            alert('success');
            }
            });
            //same thing using just post        
            $.post(relative,test,function(data){
            //Error on relative path
            alert(data);
            return false;
            }); 
```

对于我的 get 调用，绝对和相对 url，返回数据。

但是对于 POST 调用，当我使用相对 url 时，我得到内部服务器错误。（绝对 URL 工作正常）我认为它与 CSRF 无关，因为在我看来，我还包括 @csrf_exempt 用于测试目的。（我在请求中包含了[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax ）](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

chrome 调试器在 post call 中使用相对 URL 给我以下错误消息。

```
Failed to load resource: the server responded with a status of 500 (INTERNAL SERVER ERROR) http://localhost:8000/customer/0/location/0/line_group/addLine/1 
```

但是，正如您所看到的，它确实为我提供了我想要访问的完整 url 链接。当我直接点击链接时，我得到了页面的数据。

视图非常简单：

```
@csrf_exempt
def addNewLine(request, customer_id, location_id, phone_id,**kwargs):
      error_msg = u"No POST data sent."            
      context = {}
      return render_to_response('line_group/mytest.html', context) 
```

任何机构都有任何建议，为什么相对 url 路径在 POST 调用中失败？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:27:35.540

在 Chrome 网络部分，您可以预览错误说明（如果有`DEBUG=True`）。

由于 末尾没有斜线`var relative= "../../line_group/addLine/1"`，可能是 CommonMiddleware 重定向了您的请求。`APPEND_SLASH = False`如果您想保持 URL 不变，请在项目设置中设置。

# .net - 星级大小的行为类似于 Auto？

> ID：11158008
> 
> 赞同：3
> 
> 时间：2012-06-22T14:18:25.030
> 
> 标签：.net, wpf, xaml

WPF Grid 控件的行为让我很困惑。

这是我能得到的最简单的复制品：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" MinHeight="100" MaxHeight="300" />
            <RowDefinition Height="0.1*" MinHeight="100" />
        </Grid.RowDefinitions>
        <Button Grid.Row="0" Height="200" />
        <Button Grid.Row="1" />
    </Grid>
</Window> 
```

如果您运行它并缩小窗口，您会注意到底部按钮在顶部按钮开始缩小之前被剪掉。

`Height="200"`您可以通过从按钮中删除来获得所需的行为。但是，在我的实际用例中，按钮被替换为包含 ScrollViewer 的 Border。虽然我没有明确地设置任何一个高度（但我做了一个 ScrollViewer 的内容），但可以看到相同的剪裁行为。

所以，问题：

如何让行忽略其内容的高度？或者有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:01:02.200

您的最小网格尺寸为 300（第 1 行为 200，第 2 行为 100），因此您的最小网格尺寸为`Grid`300。如果您将窗口缩小到该尺寸以下，它只是剪切`Grid`和隐藏部分，而不是缩放它.

也许您可以改用 a `DockPanel`？

```
<DockPanel>
    <Button DockPanel.Dock="Bottom" MinHeight="100" />
    <Button Grid.Row="0" Height="200" MinHeight="100" MaxHeight="300"  />
</DockPanel> 
```

这样，您的底部位将始终停靠在屏幕底部，而其他内容会占用剩余空间。

如果您真的想保持您的大小比例，我建议您使用一个转换器，将您的内容控件的高度设置为窗口大小的百分比。

```
<DockPanel x:Name="Parent">
    <Button DockPanel.Dock="Bottom" MinHeight="100" 
            Height="{Binding ActualHeight,
                             ElementName=Parent, 
                             Converter={StaticResource PercentConverter}, 
                             ConverterParameter=0.1}" />
    <Button Grid.Row="0" Height="200" MinHeight="100" MaxHeight="300"  />
</DockPanel> 
```

# html - 奇怪的白色东西出现在鼠标悬停 CSS 按钮上

> ID：11158013
> 
> 赞同：0
> 
> 时间：2012-06-22T14:18:48.570
> 
> 标签：html, css

我正在尝试制作一个 CSS3 按钮。

**问题：**当我将鼠标悬停在按钮上时，按钮底部会出现一个白色的东西。我将这个问题缩小到`background-position: 0 -15px;`CSS 属性，但是如何调整它以使鼠标悬停的渐变变化但避免出现白色的东西？谢谢！

JSfiddle：http: [//jsfiddle.net/7LT35/](http://jsfiddle.net/7LT35/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:23:24.490

“白色的东西”只是按钮的背景颜色。

渐变图像是按钮的确切大小。所以如果你移动它，它当然不会再覆盖按钮了。

就个人而言，我建议只制作一个渐变图像并用它做你想做的事情。

PS。请不要使用 IE 的“hacks”和过滤器属性，除非您实际测试它们以确保它们按照您的意图执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:31:14.370

你必须改变`background-size`价值！插入到 .btn 这个：

```
 background-size:1px 53px; 
```

并调整你的渐变！比它（希望）会起作用！这是一个结果： http: [//jsfiddle.net/7LT35/6/](http://jsfiddle.net/7LT35/6/) 但我认为这不是正确的渐变！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:10:28.420

白色的东西是你的背景渐变。您告诉元素在悬停时仅向上移动 15px。

您还应该将过渡放在静态类而不是悬停伪元素上。

```
.btn {
  display: inline-block;
  *display: inline;
  padding: 4px 10px 4px;
  margin-bottom: 0;
  *margin-left: .3em;
  ..more styles

  -webkit-transition: background-position 0.1s linear;
     -moz-transition: background-position 0.1s linear;
      -ms-transition: background-position 0.1s linear;
       -o-transition: background-position 0.1s linear;
          transition: background-position 0.1s linear;
}

.btn:hover {
  color: #333333;
  text-decoration: none;

 background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6);
 background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));
 background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
 background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
 background-image: linear-gradient(top, #ffffff, #e6e6e6);
 background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);

} 
```

这使得白色/灰色渐变出现在悬停时。不确定您想对转换做什么。

看看[小提琴](http://jsfiddle.net/kbfaV/)

# sql - 列与 unpivot 列表中其他列的类型冲突

> ID：11158017
> 
> 赞同：34
> 
> 时间：2012-06-22T14:19:00.333
> 
> 标签：sql, sql-server-2008, tsql

我`sys.[views]`转向键值对以与另一台服务器上的值进行一致性测试。我遇到了返回错误的问题。

> 消息 8167，第 16 层，状态 1，第 51 行
> 
> 列“type”的类型与 UNPIVOT 列表中指定的其他列的类型冲突。

询问：

```
SELECT
sourceUnpivoted.idServer,
sourceUnpivoted.sourceServerName,
sourceUnpivoted.name,
sourceUnpivoted.columnName,
sourceUnpivoted.columnValue
FROM (
SELECT 
CAST('1' AS VARCHAR(255)) AS idServer,
CAST('thisOne' AS VARCHAR(255)) AS sourceServerName,
CAST('theDatabase' AS VARCHAR(255)) AS sourceDatabaseName,
CAST(name AS VARCHAR(255)) AS name,
CAST(object_id AS VARCHAR(255)) AS object_id,
CAST(principal_id AS VARCHAR(255)) AS principal_id,
CAST(schema_id AS VARCHAR(255)) AS schema_id,
CAST(parent_object_id AS VARCHAR(255)) AS parent_object_id,
CAST(type AS VARCHAR(255)) AS type,
CAST(type_desc AS VARCHAR(255)) AS type_desc,
CAST(create_date AS VARCHAR(255)) AS create_date,
CAST(lock_escalation_desc AS VARCHAR(255)) AS lock_escalation_desc
...
FROM noc_test.dbo.stage_sysTables
) AS databaseTables
UNPIVOT (
columnValue FOR columnName IN (
object_id,
principal_id,
schema_id,
parent_object_id,
type,
type_desc,
create_date,
lock_escalation_desc
) 
) AS sourceUnpivoted 
```

为什么这不喜欢`[type]`, `[type_desc]`, `[lock_escalation_desc]`??? 我也试过`CONVERT(VARCHAR(255),type) AS type`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T14:24:45.387

这实际上是一个排序问题。我可以通过更改这些行来解决它：

```
CAST([type] collate database_default AS VARCHAR(255)) AS [type], 
CAST(type_desc collate database_default AS VARCHAR(255)) AS type_desc, 
CAST(create_date AS VARCHAR(255)) AS create_date, 
CAST(lock_escalation_desc collate database_default AS VARCHAR(255)) AS lock_escalation_desc 
```

具体问题是`name`排序为`Latin1_General_CI_AS`，而您提到的其他 3 列被排序为`Latin1_General_CI_AS_KS_WS`（至少，在我的机器上，我不确定在具有不同默认排序规则的服务器/数据库上会是什么样子）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-07-08T14:09:40.223

这是此类型错误的解决方案之一

1：创建此表

```
CREATE TABLE People
(
PersonId int, 
Firstname varchar(50), 
Lastname varchar(25)
) 
```

2：然后插入

```
INSERT INTO People VALUES (1, 'Jim', 'Smith');
INSERT INTO People VALUES (2, 'Jane', 'Jones');
INSERT INTO People VALUES (3, 'Bob', 'Unicorn'); 
```

3：运行这个脚本你得到错误

消息 8167，级别 16，状态 1，第 3 行“姓氏”列的类型与 UNPIVOT 列表中指定的其他列的类型冲突。

```
SELECT PersonId, ColumnName, Value
FROM People
unpivot(Value FOR ColumnName IN (FirstName, LastName)) unpiv; 
```

4：解决方案是您必须使用子查询首先将 Lastname 列强制转换为与 Firstname 相同的长度

```
SELECT PersonId, ColumnName, Value
FROM (
SELECT personid, firstname, cast(lastname AS VARCHAR(50)) lastname
FROM People
) d
unpivot(Value FOR ColumnName IN (FirstName, LastName)) unpiv; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-13T17:33:17.100

遇到同样的错误，我只是将表中的所有列都设为相同的数据类型——我混合了不同长度的`int`, `varchar`, `nvarchar`。一旦我将表中的所有列都转换为相同的类型 -`nvarchar(255)`它工作得很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-03T10:21:25.230

PIVOT/UNPIVOT 子句对列的 ANSI 填充状态（右键单击 -> SSMS 中的属性）以及类型、大小和排序规则敏感。在添加或重新创建有问题的列之前，尝试在会话中指定 SET ANSI_PADDING ON|OFF，以便它与 PIVOT/UNPIVOT 子句中的其他列匹配。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-05T09:59:14.433

我遇到过同样的问题。通过右键单击列标题并选择更改类型“使用区域设置”来修复它。请参阅随附的屏幕截图

[1](https://i.stack.imgur.com/gyTau.png)：[![截屏](../Images/088116b3c6ffe4033cb99fb9967f972e.png)](https://i.stack.imgur.com/gyTau.png)

# bash - sed-style 用随机字母替换字母，用随机数替换数字

> ID：11158019
> 
> 赞同：2
> 
> 时间：2012-06-22T14:19:07.010
> 
> 标签：bash, replace, sed, awk

我需要一个大文件，例如：

```
member: cn=user0001,ou=people 
```

并随机替换所有用户名，使它们在相同位置仍然有字母，在相同位置有数字。所以输出可能是这样的：

```
member: cn=kvud7405,ou=people 
```

用户名的长度和格式各不相同，但它们始终以 cn= 和逗号为界。

任何人都可以提供一个最好使用 sed/awk/bash 的解决方案，否则 python 可能是一个选项（不确定哪个版本）。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:21:24.560

就像是

```
sed -i 's/blah/blah?$(cat /dev/urandom | tr -dc "a-z0-9" | fold -w 6 | head -n 1)/g' /home/test.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:36:47.127

```
awk -F 'cn=|,' 'BEGIN {srand(); OFS = ""} {n = split($2, a, ""); for (i = 1; i <= n; i++) {if (a[i] ~ /[[:digit:]]/) {new = new int(rand() * 10)} else {new = new sprintf("%c", int(rand() * 26 + 97))}}; $2 = "cn=" new ","; print}' 
```

分成多行：

```
awk -F 'cn=|,' '
    BEGIN {
        srand(); 
        OFS = ""
    } 
    {
        n = split($2, a, ""); 
        for (i = 1; i <= n; i++) {
            if (a[i] ~ /[[:digit:]]/) {
                new = new int(rand() * 10)
            }
            else {
                new = new sprintf("%c", int(rand() * 26 + 97))
            }
        }; 
        $2 = "cn=" new ","; 
        print
}' 
```

如果需要，可以轻松修改它以处理大写字母字符。

**编辑：**

更健壮：

```
awk 'BEGIN {srand()} {match($0, /cn=[^,]*,/); n = split(substr($0, RSTART+3, RLENGTH-4), a, ""); for (i = 1; i <= n; i++) {if (a[i] ~ /[[:digit:]]/) {new = new int(rand() * 10)} else {new = new sprintf("%c", int(rand() * 26 + 97))}}; print substr($0, 1, RSTART+2) new substr($0, RSTART+RLENGTH-1)}' 
```

此版本不使用`FS`，因此在有其他字段时可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:59:11.013

一个 Bash 解决方案：

```
letter=( a b c d e f g h i j k l m n o p q r s t u v w x y z )
digit=( 0 1 2 3 4 5 6 7 8 9 0 )
while read line; do
  user=''
  line=${line#*=}                           # separate cn-value
  line=${line%,*}                           # separate cn-value
  for (( CNTR=0; CNTR<${#line}; CNTR+=1 )); do
    if [[ ${line:CNTR:1} =~ [[:alpha:]] ]] ; then
      user=$user${letter[RANDOM%26]}
    else
      user=$user${digit[RANDOM%10]}
    fi
  done
  echo  "member: cn=${user},ou=people"
done < "$infile" > "$tempfile"

mv "$tempfile" "$infile"                    # replace original file 
```

# haskell - 如何在拥抱中使用 GADT

> ID：11158023
> 
> 赞同：1
> 
> 时间：2012-06-22T14:19:32.503
> 
> 标签：haskell, functional-programming, ghc, gadt, hugs

我想在 GHCi 不支持的平台（即 mipsel 上的 GNU/Linux）上编写一个以交互方式使用 GADT 的 Haskell 程序。问题是，可用于在 GHC 中定义 GADT 的构造，例如：

```
data Term a where
    Lit :: Int ->  Term Int
    Pair :: Term a -> Term b -> Term (a,b)
    ... 
```

似乎不适用于拥抱。

1.  GADT 真的不能在 Hugs 中定义吗？我在 Haskell 课堂上的助教说拥抱是可能的，但他似乎不确定。
2.  如果不能，是否可以使用 Hugs 支持的其他语法或语义对 GADT 进行编码，就像 GADT 可以在 ocaml 中编码一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T14:50:19.390

GADT 没有在 Hugs 中实现。

相反，如果您尝试使用 GADT 运行代码，则应使用[GHC 端口进行 mips 。](http://packages.debian.org/squeeze/mipsel/ghc6/download)请注意，由于在更奇特的架构上缺乏字节码加载，您将无法在所有平台上使用 ghci。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T10:25:05.823

关于您的问题 2（如何在 Haskell 98 中编码 GADT 用例），您可能需要查看 Sulzmann 和 Wang 在 2006 年发表的这篇论文：[Haskell 98 中的 GADTless 编程](http://www.cs.ox.ac.uk/publications/publication3593-abstract.html)。

就像您所指的 OCaml 工作一样，它通过相等类型分解 GADT 来工作。有多种定义相等类型的方法；他们使用一种类似于 OCaml 的 Leibniz 等式形式，它允许通过 kind 类型运算符的任何应用程序进行替换`* -> *`。

根据给定类型检查器对 GADT 相等性的推理方式，这可能不足以表达以涵盖 GADT 的所有示例：检查器可能会实现此定义不一定捕获的相等性推理规则。例如，如果只在`a*b = c*d`kind应用类型构造函数`a = c`，`b = d`就不会出现这种形式的分解`* -> *`。2010 年晚些时候，[Oleg 讨论了](http://www.haskell.org/pipermail/haskell-cafe/2010-May/077177.html)如何使用类型族通过 Leibniz 等式应用“类型解构器”，从而获得该定义的分解属性——当然这又在 Haskell 98 之外。

对于类型系统设计者来说，这是要牢记的：你的语言对于莱布尼茨等式是否完整，从某种意义上说，它可以表达专门的等式求解器可以做什么？

即使你找到了一个足够表达的相等类型的编码，你也会遇到非常实用的方便问题：当你使用 GADT 时，所有相等见证的使用都是从类型注释中推断出来的。使用这种显式编码，您将有更多工作要做。

最后（没有双关语），GADT 的许多用例都可以通过无标记[最终嵌入](http://okmij.org/ftp/tagless-final/course/index.html)（同样由 Oleg 再次表示）来表达，IIRC 通常可以在 Haskell 98 中完成。Martin Van Steenbergen的[博客文章](http://martijn.van.steenbergen.nl/journal/2009/11/12/gadts-in-haskell-98/)指出在其回复的评论中是本着这种精神，但奥列格已经大大改进了这种技术。

# iphone - 播放音频和视频内容的正确选择

> ID：11158024
> 
> 赞同：0
> 
> 时间：2012-06-22T14:19:32.970
> 
> 标签：iphone, ffmpeg, avfoundation, core-audio, audioqueueservices

**我在做什么：**

我需要在 iPhone/iPad 上播放 Apple 不支持的音频和视频文件，例如包含多个音频通道的 mkv/mka 文件。

我正在使用 libffmpeg 在媒体文件中查找音频和视频流。视频正在解码，`avcodec_decode_video2`每个`avcodec_decode_audio3` 函数的返回值如下

*   `avcodec_decode_video2`- 返回`AVFrame`结构体，该结构体封装了来自包的视频视频帧的信息，具体来说是具有`data`指向图片/通道平面的指针的字段。
*   `avcodec_decode_audio3`- 返回`samples`int16_t * 类型，我猜这是原始音频数据

所以基本上我已经完成了所有这些并成功解码了媒体内容。

**我必须做的：** 我必须使用 Apple 服务相应地播放音频和视频。我需要执行的播放应该支持在播放视频时混合音频通道，即假设 mkv 文件包含两个音频通道和一个视频通道。所以我想知道哪种服务适合我？我的研究表明，AudioQueue 服务可能是有用的音频播放，并且可能是视频的 AVFoundation。

请帮助为我的情况找到合适的技术，即视频播放 + 音频播放以及可能的音频通道混合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:50:24.307

你走在正确的道路上。如果您只播放音频（根本不录制），那么我会使用 AudioQueues。它会为你做混合。如果您正在录制，那么您应该使用 AudioUnits。看看 Apple 的 MixerHost 示例项目。对于视频，我建议使用 OpenGL。假设图像缓冲区在 YUV420 中，那么您可以使用简单的两遍着色器设置来渲染它。我相信有一个 Apple 示例项目展示了如何做到这一点。在任何情况下，您都可以使用 OpenGL 渲染任何像素格式，并使用着色器将像素格式转换为 RGBA。希望这有帮助。

# magento - 将性别下拉菜单更改为 magento 中的单选按钮

> ID：11158025
> 
> 赞同：2
> 
> 时间：2012-06-22T14:19:33.097
> 
> 标签：magento

今天我开始在magento网站的注册表中工作。如您所知，默认情况下它具有`gender drop down`. 我需要将其更改为`checkbox`.

到目前为止，我去了`register.phtml`文件，并尝试添加`<input type="radio" ...../>`选择文件，但这没有奏效。

有谁知道如何解决这个问题！请给我一些建议，这样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T10:11:52.023

Do not forget the validation!

```
<div class="input-box">
    <?php
        $options = Mage::getResourceSingleton('customer/customer')->getAttribute('gender')->getSource()->getAllOptions();
        $value = $this->getGender();
        $_last = count($options);
        $_index = 0;
    ?>
    <?php foreach ($options as $option):?>
        <?php if($option['value'] != ''): ?>
            <input id="<?php echo $this->getFieldId('gender')?>-<?php echo $option['value'] ?>"
                   class="radio<?php if ($this->isRequired() && $_index == $_last - 1):?> validate-one-required<?php endif; ?>"
                   type="radio" title="<?php echo $option['label'] ?>"
                   value="<?php echo $option['value'] ?>" name="<?php echo $this->getFieldName('gender')?>"
                   <?php if ($option['value'] == $value) echo ' checked="checked"' ?>>
            <label for="<?php echo $this->getFieldId('gender')?>-<?php echo $option['value'] ?>">
                <?php echo $option['label'] ?>
            </label>
        <?php endif; ?>

        <?php $_index++; ?>
    <?php endforeach;?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:29:04.933

Magento 在注册表单上使用小部件。实际上，在模板 register.phtml 中，您可以看到以下几行：

```
 <?php $_gender = $this->getLayout()->createBlock('customer/widget_gender') ?>
<?php if ($_gender->isEnabled()): ?>
    <li><?php echo $_gender->setGender($this->getFormData()->getGender())->toHtml() ?></li>
<?php endif ?> 
```

这个特定的小部件可以在`template/customer/widget`目录中找到。因此，为了将选择更改为单选按钮，请将其（模板）复制到您的主题并进行修改，例如：

```
 <div class="input-box">
    <label><?php echo $this->__('Gender'); ?></label>
    <?php $options = Mage::getResourceSingleton('customer/customer')->getAttribute('gender')->getSource()->getAllOptions();?>
    <?php $value = $this->getGender();?>
    <?php foreach ($options as $option):?>
    <input type="radio" name="<?php echo $this->getFieldName('gender')?>" value="<?php echo $option['value'] ?>"<?php if ($option['value'] == $value) echo ' selected="selected"' ?> /><?php echo $option['label'] ?>
    <br />
    <?php endforeach;?>
</div> 
```

希望没有打错字。

# iphone - Facebook IOS：如何强制重新认证

> ID：11158028
> 
> 赞同：1
> 
> 时间：2012-06-22T14:19:36.607
> 
> 标签：iphone, facebook

我整天都在环顾四周，找不到一种方法来强制对 Facebook 进行授权调用以强制用户每次登录。我正在使用 Facebook-ios-sdk。在服务器端，我们使用[https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth)？... &auth_type=reauthenticate 强制用户在每次按下 Facebook 按钮时重新进行身份验证。但是在 iPhone 上，当我在 Facebook 对象上调用授权时，它只是闪现 FB 应用程序并返回到我的应用程序；从不提示。什么诀窍？？？

谢谢，伯努瓦

# ms-access - 如何在 MS Access 子窗体上引用图表对象？

> ID：11158031
> 
> 赞同：0
> 
> 时间：2012-06-22T14:19:41.467
> 
> 标签：ms-access

我使用 Access 中的图表表单向导创建了十几个不同的图表（因此每个图表实际上都是一个单独的表单）。我还设置了一个具有以下嵌套表单结构的 GUI：

```
frmMain -> frmSubMain -> Child0 (a subform of frmSubMain) 
```

我在 frmSubMain 上有一个列出所有图表的列表框，当用户选择一个时，我使用 VBA 将 Child0 的源对象更改为所选图表的适当形式。（所以本质上，用户可以选择所需的图表并显示出来。）

我现在正在尝试向 frmSubMain 添加一个按钮，该按钮会将当前选定的图表复制到 PowerPoint，但是我在复制命令和引用图表对象时遇到问题。每个表单上的图表对象称为 OLEUnbound0，这是我尝试过的（我将图表的表单名称作为变量“my_form”）：

*   表单（my_form）.OLEUnbound0.acOLECopy
*   Me.Child0.OLEUnbound0.acOLE复制
*   Me.Controls(my_form).OLEUnbound0.acOLECopy

每个都给出不同的错误（例如，第二个给出错误“找不到方法或数据成员”）。我的部分困惑是我有表单名称，但作为变量，我不确定如何使用该变量（因为我不能使用标准 Forms![frmMain]![frmSubMain]! 等）。使用变量引用子表单的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:05:03.803

尝试：

```
Me.Child0.Form.OLEUnbound0.Action = acOLECopy 
```

# perl - Perl wget引号语法问题

> ID：11158034
> 
> 赞同：2
> 
> 时间：2012-06-22T14:19:59.180
> 
> 标签：perl, wget

谢谢你的阅读。

对于 wget 的 shell 命令，类似这样的工作：

```
wget -q -O - http://www.myweb.com | grep -oe '\w*.\w*@\w*.\w*.\w\+' | sort -u 
```

但是，当我尝试在 Perl 程序中插入该命令时，我收到一个语法错误，指的是“在运算符预期的位置找到反斜杠，在运算符预期的位置找到裸字”。所以我用这个 {} 替换了正则表达式周围的引号，但是，这样做就像将它注释掉一样，它不会带来错误，但就好像正则表达式没有，所以很明显花括号是错误的尝试。

这是代码，它在foreach中：

```
foreach(@my_array) {

$browser->get($_);
# and here below is where the error comes
system ('wget -q -O -"$_" | grep -oe '\w*.\w*@.\w*.\w\+' | sort -u'); 
```

如果我用 {} 替换包裹正则表达式的单引号，那么 wget 会获取 URL，但 grep 命令不起作用。

这就是问题所在，如何解决使语法烦人的引号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:26:29.877

您在系统调用中使用单引号`'`。他们不会为您填写变量。`$_`没有被替换。此外，旁边的单引号`grep`使此语法无效。

试试这个：

```
system ("wget -q -O - $_ | grep -oe '\w*.\w*\@.\w*.\w\+' | sort -u"); 
```

您还可以使用[`qq`](http://perldoc.perl.org/functions/qq.html)运算符：

```
system ( qq( wget -q -O - $_ | grep -oe '\w*.\w*\@.\w*.\w\+' | sort -u) ); 
```

另外，看看[perlop。](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)

* * *

另一个想法：如果您有`$browser`可以`get()`获取 url 的对象，为什么需要使用`wget`？您也可以在 Perl 中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:24:29.937

你要这个：

```
system ("wget -q -O -\"$_\" | grep -oe '\\w*.\\w*@.\\w*.\\w\\+' | sort -u"); 
```

您可以在双引号中包含您喜欢的内容，只有您必须转义某些字符。

顺便说一下，Perl 的`qq()`运算符可能会让您感兴趣。你可以查查看。

# objective-c - Xcode - OpenEars 语言模型文件错误

> ID：11158035
> 
> 赞同：4
> 
> 时间：2012-06-22T14:20:00.097
> 
> 标签：objective-c, xcode, lm, openears

我正在尝试使用 OpenEars，但出现了一个恼人的错误。当我将语言模型文件添加到我的项目后尝试运行应用程序时，该错误立即开始。这是错误：

```
Lex /Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm
    cd "/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    lex -o/Users/ilizabetabibi/Library/Developer/Xcode/DerivedData/TTSTest3-dsfbczwtfautfsglnlohlfwwgmjt/Build/Intermediates/TTSTest3.build/Debug-iphonesimulator/TTSTest3.build/DerivedSources/4075.languagemodel.yy.m "/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm"

/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:6: name defined twice
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:9: name defined twice
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:12: bad character: \
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:12: unknown error processing section 1
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:12: unknown error processing section 1
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:12: bad character: \
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:14: name defined twice
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:15: name defined twice
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:17: bad character: \
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:17: bad character: 1
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:17: bad character: -
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:17: unknown error processing section 1
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:17: bad character: :
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: -
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 0
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: .
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 7
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 7
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 8
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 2
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: <
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: /
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: unknown error processing section 1
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:18: bad character: 
/Users/ilizabetabibi/Desktop/Adi apps/TTSTest3/TTSTest3/../../../../Downloads/TAR4075/4075.languagemodel.lm:58: premature EOF
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/lex failed with exit code 1 
```

这是语言模型文件：

```
\data\
ngram 1=10
ngram 2=16
ngram 3=8

\1-grams:
-0.7782 </s> -0.3010
-0.7782 <s> -0.2218
-1.6812 BACKWARD -0.2218
-1.6812 FORWARD -0.2218
-1.6812 GO -0.2218
-1.6812 LEFT -0.2218
-1.6812 RIGHT -0.2218
-1.6812 START -0.2218
-1.6812 STOP -0.2218
-1.6812 TURN -0.2218

\2-grams:
-1.2041 <s> BACKWARD 0.0000
-1.2041 <s> FORWARD 0.0000
-1.2041 <s> GO 0.0000
-1.2041 <s> LEFT 0.0000
-1.2041 <s> RIGHT 0.0000
-1.2041 <s> START 0.0000
-1.2041 <s> STOP 0.0000
-1.2041 <s> TURN 0.0000
-0.3010 BACKWARD </s> -0.3010
-0.3010 FORWARD </s> -0.3010
-0.3010 GO </s> -0.3010
-0.3010 LEFT </s> -0.3010
-0.3010 RIGHT </s> -0.3010
-0.3010 START </s> -0.3010
-0.3010 STOP </s> -0.3010
-0.3010 TURN </s> -0.3010

\3-grams:
-0.3010 <s> BACKWARD </s>
-0.3010 <s> FORWARD </s>
-0.3010 <s> GO </s>
-0.3010 <s> LEFT </s>
-0.3010 <s> RIGHT </s>
-0.3010 <s> START </s>
-0.3010 <s> STOP </s>
-0.3010 <s> TURN </s>

\end\ 
```

我真的希望你能帮助我。最好的问候，阿迪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T16:19:08.840

OpenEars 开发人员在这里。一般来说，最好在 OpenEars 论坛中询问与 OpenEars 相关的故障排除问题，因为我通常不支持 Stack Overflow 上的 OpenEars，而且这不太可能是影响许多 Stack Overflow 用户的问题。要修复它，请尝试 OpenEars 文档中的这些步骤，这些步骤从您使用 CMU 工具生成语言模型开始：

> 下载并解压缩存档。在这个存档中将有一个后缀为“.lm”的文件，您应该将其命名为任何您喜欢的后缀为 .languagemodel 的文件（例如，myvoiceproject.languagemodel）。现在在 Finder 中重命名（而不是在您将文件导入 Xcode 之后），确保在重命名时不会意外删除后缀。您可以通过将文件拖入 Terminal.app 并查看 Terminal.app 认为该文件被调用的内容来验证这一点，这将与 Xcode 认为它被调用的内容相匹配。

这一步的原因是，根据版本的不同，Xcode 有时会忽略，有时会尝试编译后缀为 .lm 的文件。

# javascript - 有没有办法禁用 dojox.mobile.switch？

> ID：11158037
> 
> 赞同：1
> 
> 时间：2012-06-22T14:20:04.577
> 
> 标签：javascript, dojo, disabled-control, dojox.mobile

有没有办法禁用[dojox.mobile.Switch](http://dojotoolkit.org/reference-guide/1.7/dojox/mobile/Switch.html)使其可见但变灰且不可点击/不可触摸？我在标准 API 文档中看不到任何内容。

**编辑**：我应该补充一点，我正在使用 Dojo 1.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:56:26.467

我今天必须这样做。我扩展了 Switch 模块。对我来说效果很好，但我相信它可以改进。

```
define([
    "dojo/_base/declare",
    "dojox/mobile/Switch"
], function(declare, Switch){
    return declare("my.package.Switch", [Switch], {

        disabled: false,
        events: {},

        disableSwitch: function() {
            //remove events (but hold on to them for later).. there may be a better dojo way of doing this
            this.events._onClick = this._onClick;
            this.events.onClick = this.onClick;
            this.events.onTouchStart = this.onTouchStart;
            this.events.onTouchMove = this.onTouchMove;
            this._onClick = function(){};
            this.onClick = function(){};
            this.onTouchStart = function(){};
            this.onTouchMove = function(){};

            //TODO: better styling to make it look disabled?
            // this.domNode.style.opacity = '0.5';
            this.domNode.style['-webkit-filter'] = 'grayscale(1)';

            this.disabled = true;
        },

        enableSwitch: function() {
            //reattach events
            this._onClick = this.events._onClick;
            this.onClick = this.events.onClick;
            this.onTouchStart = this.events.onTouchStart;
            this.onTouchMove = this.events.onTouchMove;

            // this.domNode.style.opacity = '1';
            this.domNode.style['-webkit-filter'] = 'grayscale(0)';

            this.disabled = false;
        }
    });
}); 
```

# javascript - Highcharts 固定标签长度，防止图表被调整大小

> ID：11158038
> 
> 赞同：0
> 
> 时间：2012-06-22T14:20:06.137
> 
> 标签：javascript, highcharts, scale, fixed, labels

嗨，我想知道是否可以禁用高图的自动缩放。

或者是否可以为标签设置固定位置和/或宽度和高度？

这是一个例子，这就是我想让我的图表看起来像的样子。 [http://jsfiddle.net/ynXgw/6/](http://jsfiddle.net/ynXgw/6/)

但是如果标签的长度不同，highchart 会缩小图表。 [http://jsfiddle.net/ynXgw/7/](http://jsfiddle.net/ynXgw/7/)

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:44:39.247

解决问题的一种方法是使用不同的系列来显示标签。在此[**示例**](http://jsfiddle.net/ynXgw/10/)中，我使用第二个散点系列来显示标签。要定位标签，只需设置 y 值。我将点的颜色设置为与背景相同的颜色以隐藏它们。然后我使用 dataLabels 格式化程序以您想要的方式显示标签。

# angularjs - 如何使用谷歌 Ajax 抓取 Angular

> ID：11158040
> 
> 赞同：4
> 
> 时间：2012-06-22T14:20:19.677
> 
> 标签：angularjs

Google 支持一种方案，您可以在其中指示页面具有动态内容，它要求片段 url 以 ! 开头，例如 dynamic.html#!part

Angularjs 有非常好的路由支持，但它似乎要求片段总是以 / 开头。有谁知道让这些片段以！开头的方法？

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:34:29.007

我自己刚开始使用 Angular，但我认为您想设置服务`hashPrefix`的`$location`。

请参阅[$location 服务](http://docs.angularjs.org/guide/dev_guide.services.$location)的开发者指南。

从示例中，您可以执行以下操作：

```
// Not 100% sure this is right
$locationProvider.hashPrefix('!'); 
```

似乎还有一种更自动化的方式来执行此操作，在同一文档页面底部附近的标题为“抓取您的应用程序”的部分中进行了概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:29:31.850

[如果您正在运行一个 ruby​​ 应用程序 - 在https://github.com/benkitzelman/google-ajax-crawler](https://github.com/benkitzelman/google-ajax-crawler)`gem install google_ajax_crawler`有一个为任何机架应用程序源代码 实现爬行方案的 gem

# sql - SQL 内连接。ON 条件 vs WHERE 子句

> ID：11158043
> 
> 赞同：9
> 
> 时间：2012-06-22T14:20:42.043
> 
> 标签：sql, sql-server

我正忙于将使用旧样式语法的查询转换为新的连接语法。我的查询的实质如下：

原始查询

```
SELECT i.*  
FROM 
  InterestRunDailySum i, 
  InterestRunDetail ird, 
  InterestPayments p
WHERE 
   p.IntrPayCode = 187
   AND i.IntRunCode = p.IntRunCode AND i.ClientCode = p.ClientCode
   AND ird.IntRunCode = p.IntRunCode AND ird.ClientCode = p.ClientCode 
```

新查询

```
SELECT  i.*
  FROM InterestPayments p
    INNER JOIN InterestRunDailySum i 
      ON (i.IntRunCode = p.IntRunCode AND i.ClientCode = p.ClientCode)
    INNER JOIN InterestRunDetail ird 
      ON (ird.IntRunCode = p.IntRunCode AND ird.IntRunCode = p.IntRunCode)
  WHERE 
    p.IntrPayCode = 187 
```

在此示例中，“原始查询”返回 46 行，其中“新查询”返回超过 800

有人可以向我解释其中的区别吗？我会假设这些查询是相同的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T14:24:00.390

问题在于您加入`InterestRunDetail`. 你加入了`IntRunCode`两次。

正确的查询应该是：

```
SELECT  i.*
  FROM InterestPayments p
    INNER JOIN InterestRunDailySum i 
      ON (i.IntRunCode = p.IntRunCode AND i.ClientCode = p.ClientCode)
    INNER JOIN InterestRunDetail ird 
      ON (ird.IntRunCode = p.IntRunCode AND ird.ClientCode = p.ClientCode)
  WHERE 
    p.IntrPayCode = 187 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T14:24:35.880

“新查询”是与当前用于 JOIN 的 ANSI SQL 标准兼容的查询。

此外，我发现查询 #2 更**干净**：

*   您几乎被迫考虑并指定两个表之间的**连接条件**- 您不会意外地在查询中包含笛卡尔积。如果您碰巧列出了 10 个表，但您的`WHERE`子句中只有 6 个连接条件 - 您将获得比预期**更多的数据！**

*   你的`WHERE`子句没有被连接条件弄得杂乱无章，因此它更干净、不那么凌乱、更容易阅读和理解

*   您的JOIN**类型**（是否`INNER JOIN`, `LEFT OUTER JOIN`, `CROSS JOIN`）通常更容易看到 - 因为您将其拼写出来。使用“旧式”语法，这些连接类型之间的差异很难看出，隐藏在您的许多`WHERE`标准中......

在功能上，两者是相同的——#1 可能迟早会被某些查询引擎弃用。

另请参阅 Aaron Bertrand 的优秀[坏习惯踢 - 使用旧式 JOIN 语法](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)博客文章以获取更多信息 - 当你在它的时候 - 阅读**所有**“踢坏习惯”的帖子 - 所有这些都非常值得！

# c# - DataGridView 导航到下一行

> ID：11158044
> 
> 赞同：4
> 
> 时间：2012-06-22T14:20:43.103
> 
> 标签：c#, winforms, datagridview

我有一个 C# winforms 应用程序，我试图让一个按钮工作，该按钮将在当前选择的数据网格视图中选择下一行。

我到目前为止的代码是：

```
private void button4_Click(object sender, EventArgs e)
{
  try
  {
    Int32 selectedRowCount = dataGridView1.Rows.GetRowCount(DataGridViewElementStates.Selected);

    // index out of range on this line
    dataGridView1.Rows[dataGridView1.SelectedRows[selectedRowCount].Index].Selected = true;

    dataGridView1.FirstDisplayedScrollingRowIndex = selectedRowCount + 1;
  }
  catch (Exception ex)
  {
    return;
  } 
```

但是在运行它时会引发异常。谁能指出我可能出错的地方。抛出的错误是：`Index is out of range`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T14:43:52.653

试试这个：

```
 int nRow;
private void Form1_Load(object sender, EventArgs e)
{

    nRow = dataGridView1.CurrentCell.RowIndex;
}

private void button1_Click(object sender, EventArgs e)
{
    if (nRow < dataGridView1.RowCount )
    {
        dataGridView1.Rows[nRow].Selected = false;
        dataGridView1.Rows[++nRow].Selected = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-21T08:16:28.050

首先，将datagridview的“ **Multiselect** ”属性设置为**false。**

```
int currentRow = dataGridView1.SelectedRows[0].Index;
if (currentRow < dataGridView1.RowCount)
{
    dataGridView1.Rows[++currentRow].Selected = true;
} 
```

它将选择 datagridview 中的下一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:31:18.177

它在这里：

```
dataGridView1.SelectedRows[selectedRowCount] 
```

如果您有 3 个选定行，则 selectedRowCount = 3 并且有三行索引：0、1、2。

您正在尝试访问不存在的#3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-09T12:46:29.977

选择行和单元格以获得更好的解决方案。此解决方案在 DataGridView 上移动行指示器。

```
 private void _GotoNext(object sender, EventArgs e)
    {
        int currentRow = DataGridView1.SelectedRows[0].Index;
        if (currentRow < DataGridView1.RowCount - 1)
        {
            DataGridView1.Rows[++currentRow].Cells[0].Selected = true;
        }
    }

    private void _GotoPrev(object sender, EventArgs e)
    {
        int currentRow = DataGridView1.SelectedRows[0].Index;
        if (currentRow > 0)
        {
            DataGridView1.Rows[--currentRow].Cells[0].Selected = true;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-31T03:04:58.353

这个读取值单元格或列的示例是 datagridview 的 4 号

```
 int courow = dataGridView1.RowCount-1;
        for (int i=0; i < courow; i++)
        {
            MessageBox.Show(dataGridView1.Rows[i].Cells[4].Value.ToString());
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-12T15:13:57.653

我更喜欢这个行选择：

首先检查是否没有多选：number_of_data 然后获取选择单元格（或行）：row_index

```
private void next_click(object sender, EventArgs e)
    {
        int number_of_data = dataGridView.SelectedRows.Count;
        if (number_of_data > 1) return;

        int row_index = dataGridView.SelectedCells[0].RowIndex;

        if (row_index < dataGridView.RowCount-1)
        {
            dataGridView.Rows[row_index++].Selected = false;
            dataGridView.Rows[row_index].Selected = true;
        }

        // Do something 

    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-09T07:43:56.480

```
dgv_PhotoList.Rows[dgv_PhotoList.CurrentRow.Index+1].Selected = true; 
```

# jquery - knockoutjs 通过点击事件获取元素id

> ID：11158045
> 
> 赞同：22
> 
> 时间：2012-06-22T14:20:49.023
> 
> 标签：jquery, knockout.js, knockout-2.0

我正在使用 knockoutjs，目前在我的视图中有一些看起来像这样的东西：

```
<img id="myTab1" data-bind="click: pressedTab.bind($data, '#myTab1')" src="images/image1.png"></img> 
```

这允许我在我的视图模型中获取元素 ID：

```
pressedTab = function(tab){
    console.log("Element ID: " + tab);
} 
```

这写道：

> 元素 ID：#myTab1

但是，在click事件中发送img id的名称太重复了。有没有办法在不明确重写的情况下发送 img id？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-22T16:29:54.813

您实际上可以通过 KO 单击处理程序访问事件对象。

```
<button id="somebutton" data-bind="click: log">Click Me </button>

var ViewModel = function() {
    this.log = function(data, event) {
        console.log("you clicked " + event.target.id);
    }
};
ko.applyBindings(new ViewModel()); 
```

[http://jsfiddle.net/madcapnmckay/e8JPT/](http://jsfiddle.net/madcapnmckay/e8JPT/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-31T01:16:27.590

madcapnmckay 的答案并不完全正确。您可以更好地使用 currentTarget：当您有一个包含嵌套元素的 div 时，它将返回原始绑定元素而不是子元素。

看到这个[问题](https://stackoverflow.com/questions/14101548/knockoutjs-get-the-real-bound-element-through-click-event)

**更新**

正如@Ryan 提到的 - event.currentTarget 不适用于 IE8。对于 <= IE8 支持，您可以使用：

```
var target = (event.currentTarget) ? event.currentTarget : event.srcElement; 
```

# javascript - 识别负载 - 从按钮单击或刷新

> ID：11158046
> 
> 赞同：0
> 
> 时间：2012-06-22T14:20:51.637
> 
> 标签：javascript, asp.net

我的页面中有一个按钮，它在我的数据库中执行一些事务。

目前，我面临一个问题：

*   如果我单击按钮，它会发回页面并进入`button_Click(object sender, EventArgs e)`并进行交易**，这对我来说没问题**。
*   如果我刷新页面，它会再次进入`button_Click(object sender, EventArgs e)`不可取的页面。

如何确定用户是否刷新了页面并避免重复交易？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:29:29.390

完成所需任务后，在提交按钮单击事件上执行 Response.Redirect 到相同或另一个页面。

# cpu - 循环精确仿真

> ID：11158047
> 
> 赞同：4
> 
> 时间：2012-06-22T14:20:54.727
> 
> 标签：cpu, emulation, 68000

我目前正在为我的下一个仿真项目学习 C，这是一个周期精确的 68000 内核（我的上一个项目是一个用 Java 编写的非周期精确的 Sega Master System 仿真器，现在已经发布了第三版）。我的查询将循环级别的准确性视为将事物提升到这个级别对我来说是新事物。

要将事情分解为 1 个 CPU 周期的粒度，大概我需要知道内存访问需要多长时间等等，但我的问题是，对于在内存获取/写入阶段需要多个周期的指令，CPU 在做什么每个周期 - 例如每个周期复制的 x 位数。

使用我的 SMS 仿真器，我不必太担心 M1 阶段等，因为它只是为每条指令使用循环计数 - 换句话说，它只精确到指令级别，而不是循环级别。我不是在寻找特定于架构的细节，只是想知道在达到这种粒度级别时应该注意哪些事情。

但是，欢迎提供 68k 详细信息。基本上，我想知道如果视频芯片从内存区域读取，而 CPU 在指令的该阶段中途仍在向其写入数据，以及其他类似情况，会发生什么。我希望我已经说得够清楚了，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:40:43.020

我的猜测是，您不必深入到令人难以忍受的细节来获得足够好的结果来进行此类事情的时间安排。如果您不想深入了解架构的细节，那么无论如何您都无法做到这一点。

您的主要问题似乎是“如果视频芯片从内存区域读取而 CPU 仍在向其写入数据会发生什么”。通常在这些较旧的芯片上，总线协议非常简单（它们没有打包）并且通常有一个指示总线繁忙的引脚。因此，如果 CPU 正在写入内存，则视频芯片将只需要等待 CPU 完成即可。由于这些限制，双端口 ram 流行了一段时间，以便 CPU 可以同时写入帧缓冲区并由 RAMDAC 读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:38:37.203

对于真正的周期精确仿真，您必须首先决定要用作参考的*主时钟。*这应该是软件运行的粒度可以检测到出现顺序差异的最快时钟。这*可以*由 CPU 时钟决定，但在大多数情况下，*总线周期时间*决定了可以识别的粒度事件（这通常只是 CPU 时钟的一小部分）。

然后您需要找出连接到该总线的不同设备（IC）具有的优先顺序（如果有多个总线主控器）。一个例子是视频 DMA 是否（以及如何）延迟 CPU。

通常不存在*同时发生的*事件。CPU 在 DMA 读取之前写入，或者相反（在双端口设备的情况下仍然如此，您只需要考虑设备的固有优先机制）。

一旦您充分了解哪个时钟可以有效控制可识别事件的粒度，您就可以考虑如何构建模拟器以准确地重现该行为。

通过这种方式，您可以创建 100% 循环精确仿真，前提是您有足够的关于所有设备行为的信息。

对不起，我不能给你更详细的信息，我对世嘉硬件的细节一无所知。

# java - 制作一个运行代码的网站

> ID：11158048
> 
> 赞同：0
> 
> 时间：2012-06-22T14:20:58.133
> 
> 标签：java, php, javascript, html, css

我目前正在开发一个编程竞赛网站，并希望实现对提交代码和在网站上运行它的支持。经过相当多的谷歌搜索，我仍然没有找到任何“指南”。

有谁知道包含一些基本准则或基本规则的网站（或其他来源）？

感谢所有回复。

PS：如果有人想知道所有的编程语言标签，我打算至少支持这些语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:56:41.893

有一个网站已经这样做了，尽管是为了特定目的：抓取数据。

[https://scraperwiki.com/](https://scraperwiki.com/) - 与 jsfiddle 不同，**scraperwiki**执行服务器端代码。据我所知，他们可能会通过亚马逊实例将环境沙箱化。鉴于他们支持的语言和抓取库的多样性，不确定他们的代码是否可以被完全审计和清理。

我认为大多数人对 scraperwiki 如何阻止黑客和垃圾邮件发送者滥用他们的资源感到困惑。他们对此一直保持沉默。要么他们已经手动审核了每一个执行的代码，要么黑客/垃圾邮件发送者还没有发现它们。由于该站点具有特定功能，因此他们可能会检查数据利用率以确定可疑活动。...但是，一个人的网站抓取是另一个人通过获取/发布的骚扰和注入。

我的预感是他们永远不会公开说明他们的安全审计过程是什么样的。

如果您真的必须这样做，那么在没有虚拟化的情况下执行此操作的最简单机械方法是使用**eval()**的变体。但是，并非所有语言都有。这将您带到选项 B，即**虚拟化**。比我更好的人可以解释如何将虚拟机编组到这种效果，并且会适当地警告你不要让陌生人滥用你的资源。相反，我将分享我的 PHP 经验。

几年前，我做了一个项目，可以即时执行代码（在本地机器上）。当您键入时，它会通过 ajax 获取代码并在每次击键后执行。这是其行为的视频：[http](http://www.youtube.com/watch?v=Yfxrt2pc3pg) ://www.youtube.com/watch?v=Yfxrt2pc3pg 。

五年和 3 个改进原型之后，我仍然不确定我将如何负责任地将其锁定为公共资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:41:29.433

小心——如果你发现很难将这个项目分解成一些更小、更具战术性的问题，我强烈建议你不要尝试在你的网站上实际运行任何其他人的代码。在创建网站本身方面，我建议尽可能利用预构建的组件或服务——Wordpress、GitHub 等。

收到提交后，您将希望有一种方法可以***安全地***运行它们。出于所有实际目的，这意味着您应该假设运行其他人代码的任何机器都可能自发地起火。虽然其中一些语言确实具有您应该能够用于在“沙箱”中运行代码的功能，但您可能不会在所有这些语言方面都足够熟练，无法正确保护所有这些语言。

似乎亚马逊的 EC2 之类的东西可能会有所帮助——当您需要运行提交时启动 VM，并在完成后将其丢弃。他们有一些预配置的图像，可能非常适合运行此代码，如果由于错误或恶意代码而出现问题，您不必太介意，因为您只是将其扔掉完成后离开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:29:19.487

对于 Java，这很简单：

*   您必须创建[Servlet](http://www.oracle.com/technetwork/java/index-jsp-135475.html)，用于将源代码上传到服务器（例如，通过 POST 请求）

*   使用 Java Compiler API 将源代码编译为字节码（[教程](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)）

*   您可以通过[ClassLoader](http://www.javaworld.com/jw-10-1996/jw-10-indepth.html)动态加载并启动它的编译字节码（您也可以配置[SecurityManager](http://docs.oracle.com/javase/tutorial/essential/environment/security.html)）

*   并且不要忘记 MVC 架构 :)

# php - 意外的预匹配行为与 \s 和？

> ID：11158051
> 
> 赞同：1
> 
> 时间：2012-06-22T14:21:12.953
> 
> 标签：php, regex, preg-match

这很简单，我不明白为什么以下匹配：

```
preg_match('/\<td valign="top" class="bericht"\>(.*\s)*<\/td>/',$html,$matches3); 
```

而这个没有：

```
preg_match('/\<td valign="top" class="bericht"\>(.*(\s)?)*<\/td>/',$html,$matches3); 
```

我想 ？表示零或一。所以我不明白这怎么会使某些东西不匹配。

使用 RegexPal ( [http://regexpal.com/](http://regexpal.com/) ) 进行测试时，一切都按预期工作。所以第二个确实匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:46:50.040

除了蒂姆·皮茨克所说的。. .

您如何确定第二个不匹配？请注意，第一个模式将设置`$matches3[1]`为表格单元格的内容，而第二个模式将始终设置`$matches3[1]`为空字符串。

假设`$html`看起来像这样：

```
<td valign="top" class="bericht">yes </td> 
```

然后`(.*\s)*`第一个模式中的 将匹配`yes` ，之后不再匹配，因此它将存储`yes` 在`$matches3[1]`.

但是`(.*(\s)?)*`第二个模式中的 将匹配`yes` *，然后是空字符串*，因此它将空字符串存储在`$matches3[1]`.

我不确定您到底要做什么，但是如果您的目标只是捕获 and 之间的所有内容`<td valign="top" class="bericht">`，`</td>`无论那可能是什么，那么您应该编写：

```
preg_match('/\<td valign="top" class="bericht"\>(.*?)<\/td>/s',$html,$matches3); 
```

（其中`*?`意思是“零次或多次，但最好尽可能少，`/s`意思是“允许`.`匹配任何字符，甚至是换行符”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:42:05.197

这两个应该匹配。但是第二个可能会遇到[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)，因为

*   `.`也匹配`\s`（除了，这是踢球者，换行符）
*   它使用嵌套的无限量词（本质上，这是`(.*)*`因为`\s`是可选的）

因此，给定足够大的输入和足够的换行符，PHP 将在超过某个回溯阈值后停止匹配（您可以在某处配置，但我忘记了在哪里），而在线正则表达式测试器可能会继续并耗尽所有可能的排列。

# android - 安卓动态壁纸

> ID：11158053
> 
> 赞同：0
> 
> 时间：2012-06-22T14:21:16.100
> 
> 标签：android

我正在制作一个动态壁纸应用程序，我只是想知道我是否可以在 Photoshop 中创建一个背景，然后在其上放置动画。我对此很陌生，我在网上看到的所有示例都没有真正提及这一点。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:55:24.607

我建议使用 AndEngine for android。它有一个专门用于创建动态壁纸的插件。您还可以在 andEngine 示例中找到一些使用示例。

现在分层结构非常普遍，绝对应该并且可以使用。所以堆叠照片不是问题，但您确实需要注意它们的大小，因为您可能会很快耗尽内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T05:27:35.733

*   在 Photoshop 中创建背景
*   保存为.png
*   在opengl中创建一个正方形
*   使用背景 png 对正方形进行纹理处理
*   正方形应该适合屏幕，以便看起来像背景
*   然后在背景前面创建动画或其他内容

# ruby-on-rails - 在 js.erb 中渲染部分时出错

> ID：11158056
> 
> 赞同：1
> 
> 时间：2012-06-22T14:21:25.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我正在使用 rails 2.3 并且有问题。我有远程表单，当我提交它时，我需要执行一些 js。这是我的 js.erb 文件

```
$(document).ready(function () {
$("#block_login").remove();
$("#header").html("");
$("#header").html("<%= render :partial => "/layouts/header" %>");
}); 
```

在 js 控制台我有一个错误

```
> Uncaught SyntaxError: Unexpected identifier jquery.js:593
> jQuery.extend.globalEval jquery.js:593
> jQuery.ajaxSetup.converters.text script jquery.js:7175 ajaxConvert
> jquery.js:7074 done jquery.js:6622 jQuery.ajaxTransport.send.callback 
```

这是渲染的原因。

部分工作正常，因为我已经用 html 渲染它，一切都很好。这是我的布局/_header

```
<div id="header">
   <% if current_user.present? %>
       <div class="icon_1"><%= link_to 'Выход', logout_path %>
       <span>|</span><%= link_to 'Моя страница', user_path(current_user), :class => "registration"  %>    </div>
   <% else %>
       <div class="icon_1"><a href="#" onClick="block_login();">Вход</a>
       <span>|</span><%= link_to 'Регистрация', new_user_path, :class => "registration" %></div>
   <% end %>
   <div class="clear"></div>
   <table width="100%" cellpadding="0" cellspacing="0">
     <tr>
       <td width="130px">
         <div class="logo"><%= image_tag "/images/logo.png" %></div>
       </td>
       <td>
         <div class="menu">
           <table width="100%" cellpadding="0" cellspacing="0">
             <tr>
               <td>

               </td>
             </tr>
           </table>
         </div>
       </td>
     </tr>
   </table>
 </div> 
```

我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:40:07.160

也许是引号。尝试使用：

```
$("#header").html("<%= render :partial => '/layouts/header' %>"); 
```

而不是您的代码：

```
$("#header").html("<%= render :partial => "/layouts/header" %>"); 
```

# https - 关于 https 表单获取和后解析 html 项目 android 的任何提示？

> ID：11158057
> 
> 赞同：0
> 
> 时间：2012-06-22T14:21:25.917
> 
> 标签：https, webview, html-parsing, jsoup

我正在创建一个应该执行以下操作的 Android 应用程序；

1.  使用 https (SSL!) 页面上的表单登录并接收 cookie
2.  发出 httpGET 操作以获取 html
3.  解析该 html 并将其显示在视图、列表或其他内容中。

很长一段时间以来，我一直在玩弄 Jsoup、httpUnit 和 HTMLUnit，但我遇到了几个问题；

A. 登录很好，工作..（我得到了网站的欢迎页面）但是，当我发出 GET 语句（并包含 cookie）时，我被重定向到登录表单。所以响应 html 不是我所期望的。（可能与keepalivestrategy有关？）

B. InputBuffers 太小，无法接收整个 HTML 页面并设置它们进行解析。

注意：我无法控制网络服务器

我对此完全陌生，因此教程或代码片段会有所帮助。

例如，这是我用来登录网站的：

```
public int checkLogin() throws Exception {

    ArrayList<NameValuePair> data = new ArrayList<NameValuePair>();
    data.add(new BasicNameValuePair("userid", getUsername()));
    data.add(new BasicNameValuePair("password", getPassword()));
    data.add(new BasicNameValuePair("submit_login", "Logmein"));

    Log.d(TAG, "Cookie name : " + getCookieName());
    Log.d(TAG, "Cookie cont : " + getCookie());

    HttpPost request = new HttpPost(BASE_URL);
request.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
request.getParams().setParameter("http.protocol.handle-redirects",false);
    request.setEntity(new UrlEncodedFormEntity(data, "UTF-8"));

    HttpResponse response;

    httpsclient.getCookieStore().clear();

    List<Cookie> cookies = httpsclient.getCookieStore().getCookies();
    Log.d(TAG, "Number of Cookies pre-login : "  + cookies.size());

    response = httpsclient.execute(request);

    cookies = httpsclient.getCookieStore().getCookies();
    Log.d(TAG, "Number of Cookies post-login : "  + cookies.size());
    String html = "";

    // Problem : buffer is too small!

    InputStream in = response.getEntity().getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder str = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        str.append(line);
    }
    in.close();
    html = str.toString();

    Document doc = Jsoup.parse(html);
    Log.v(TAG, "Ik heb nu dit : " + doc.toString());

    if (cookies.size() > 0){
        storeCookie(cookies.get(0).getName(), cookies.get(0).getValue());
        return MensaMobileActivity.REQUEST_SUCCESS;
    } else {
        return MensaMobileActivity.REQUEST_ERROR;           
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:07:01.130

您根本不处理 SSL 证书，这至少是问题的一部分。我最近也开始努力学习这一点。此代码块将从您正在访问的网页中获取 SSL 证书。

```
 try {
        URL url = new URL(YOUR_WEBPAGE_HERE);
        HttpsURLConnection connect = (HttpsURLConnection)url.openConnection();
        connect.connect();
        Certificate[] certs = connect.getServerCertificates();

        if (certs.length > 0) {

            cert = new File("YOUR_PATH_TO_THE_FILE");
            //write the certificate obtained to the cert file.
            OutputStream os = new FileOutputStream(cert);
            os.write(certs[0].getEncoded());

            return true;
        }
    }
    catch (SSLPeerUnverifiedException e) {
        e.printStackTrace();
    }
    catch (MalformedURLException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    catch (CertificateEncodingException e) {
        e.printStackTrace();
    } 
```

# zip - 是否可以在 C# 中压缩目录的内容？

> ID：11158059
> 
> 赞同：0
> 
> 时间：2012-06-22T13:55:06.960
> 
> 标签：zip, c#

我正在开发 ac# 应用程序，它必须压缩目录中的所有内容。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:10:14.827

是的你可以。**[DotNetZip](http://dotnetzip.codeplex.com/)**支持使用这些方法将目录添加到 zip 文件`ZipFile.AddDirectory()`。

递归压缩整个目录：

```
using (ZipFile zip = new ZipFile())
{
  zip.UseUnicode= true;  // utf-8
  zip.AddDirectory(@"MyFile");
  zip.Save(ZipFileToCreate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:00:37.173

[请参阅http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx)`ZipFile`上的类文档。

更新：此类仅在 .NET 4.5 中可用，它不作为 Windows 7 的一部分安装。您必须从 Microsoft 下载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T19:06:12.350

您也可以像这样使用[SevenZipSharp](http://sevenzipsharp.codeplex.com/)：

```
SevenZipCompressor compressor = new SevenZipCompressor();
compressor.CompressDirectory(...); 
```

# logging - 自定义跟踪侦听器是否必须在要使用的程序集中？

> ID：11158068
> 
> 赞同：0
> 
> 时间：2012-06-22T14:22:03.560
> 
> 标签：logging, enterprise-library

我想使用自定义跟踪侦听器进行日志记录，但我不想在 .dll 文件中创建它。有没有办法配置我的企业库配置以使用来自 .cs 文件的自定义跟踪侦听器？

我正在使用此站点上的代码[http://blogs.msdn.com/b/ploeh/archive/2006/04/06/unittestyourenterpriselibrarylogginglogic.aspx](http://blogs.msdn.com/b/ploeh/archive/2006/04/06/unittestyourenterpriselibrarylogginglogic.aspx)

作为参考。我注意到一些关键方法，例如 GetLogEntries()，是“内部的”，因此它们不能在 .dll 文件之外工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:32:46.397

程序集是部署的基本单元，因此有时您的代码 (.cs) 需要位于 .DLL 或 .EXE 中。您也许可以在 ASP.NET 网站中使用 .cs 文件并依靠运行时来编译您的代码（到程序集中），但我不确定这会给您带来什么。

您发布的链接是一个跟踪侦听器，旨在用于单元测试。内部方法是静态的，仅用于单元测试目的，企业库不使用它来执行日志记录。

# java - JsonMappingException：找不到适合 FacebookProfile 类型的构造函数

> ID：11158072
> 
> 赞同：0
> 
> 时间：2012-06-22T14:22:17.180
> 
> 标签：java, facebook, json, integration, spring-social

我使用 OAuth2.0 协议连接到 facebook。一切都很好，因为我在服务器上获得了 access_token，现在我想连接到 facebook 并获得它的 API。但我收到 JSON 异常。所以这是代码：

```
 @RequestMapping(method = RequestMethod.GET)
    public String process(@ModelAttribute("user") User user, BindingResult result, Model model, HttpServletRequest request,
            HttpServletResponse response) {

        FacebookConnectionFactory connectionFactory = new FacebookConnectionFactory("appid", "appsecret");
        OAuth2Operations oauthOperations = connectionFactory.getOAuthOperations();
        OAuth2Parameters params = new OAuth2Parameters("http://localhost:8080/shop/");
        String authorizeUrl = oauthOperations.buildAuthorizeUrl(GrantType.AUTHORIZATION_CODE, params);

        try {
            response.sendRedirect(authorizeUrl);
            LOG.error("ALL WORKING FINE>>>");
        } catch (IOException e) {
            LOG.error("Errorrrrr" + e);
        }
        String authCode = request.getParameter("code");

        LOG.error("Facebook  controller works... 1");
        LOG.error(authCode);
        if (authCode != null) {
            AccessGrant accessGrant = oauthOperations.exchangeForAccess(authCode, "http://localhost:8080/shop/", null);
            LOG.error("Facebook  controller works... 2");
            Connection<Facebook> connection = connectionFactory.createConnection(accessGrant);
            LOG.error("Facebook  controller works... 3");
        }       

        return null;

    } 
```

这是一个例外：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.web.client.ResourceAccessException: I/O error: No suitable constructor found for type [simple type, class org.springframework.social.facebook.api.FacebookProfile]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.ByteArrayInputStream@531602f4; line: 1, column: 2]; nested exception is org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class org.springframework.social.facebook.api.FacebookProfile]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.ByteArrayInputStream@531602f4; line: 1, column: 2]
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

root cause

org.springframework.web.client.ResourceAccessException: I/O error: No suitable constructor found for type [simple type, class org.springframework.social.facebook.api.FacebookProfile]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.ByteArrayInputStream@531602f4; line: 1, column: 2]; nested exception is org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class org.springframework.social.facebook.api.FacebookProfile]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.ByteArrayInputStream@531602f4; line: 1, column: 2]
    org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:453)
    org.springframework.web.client.RestTemplate.execute(RestTemplate.java:415)
    org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:213)
    org.springframework.social.facebook.api.impl.FacebookTemplate.fetchObject(FacebookTemplate.java:165)
    org.springframework.social.facebook.api.impl.UserTemplate.getUserProfile(UserTemplate.java:50)
    org.springframework.social.facebook.api.impl.UserTemplate.getUserProfile(UserTemplate.java:46)
    org.springframework.social.facebook.connect.FacebookAdapter.setConnectionValues(FacebookAdapter.java:42)
    org.springframework.social.facebook.connect.FacebookAdapter.setConnectionValues(FacebookAdapter.java:30)
    org.springframework.social.connect.support.AbstractConnection.setValues(AbstractConnection.java:172)
    org.springframework.social.connect.support.AbstractConnection.initKey(AbstractConnection.java:135)
    org.springframework.social.connect.support.OAuth2Connection.<init>(OAuth2Connection.java:73)
    org.springframework.social.connect.support.OAuth2ConnectionFactory.createConnection(OAuth2ConnectionFactory.java:58)
    com.dataart.masternoy.controller.IndexController.process(IndexController.java:99)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

root cause

org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class org.springframework.social.facebook.api.FacebookProfile]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.ByteArrayInputStream@531602f4; line: 1, column: 2]
    org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
    org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:746)
    org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:683)
    org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
    org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1923)
    org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:135)
    org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
    org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:74)
    org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:446)
    org.springframework.web.client.RestTemplate.execute(RestTemplate.java:415)
    org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:213)
    org.springframework.social.facebook.api.impl.FacebookTemplate.fetchObject(FacebookTemplate.java:165)
    org.springframework.social.facebook.api.impl.UserTemplate.getUserProfile(UserTemplate.java:50)
    org.springframework.social.facebook.api.impl.UserTemplate.getUserProfile(UserTemplate.java:46)
    org.springframework.social.facebook.connect.FacebookAdapter.setConnectionValues(FacebookAdapter.java:42)
    org.springframework.social.facebook.connect.FacebookAdapter.setConnectionValues(FacebookAdapter.java:30)
    org.springframework.social.connect.support.AbstractConnection.setValues(AbstractConnection.java:172)
    org.springframework.social.connect.support.AbstractConnection.initKey(AbstractConnection.java:135)
    org.springframework.social.connect.support.OAuth2Connection.<init>(OAuth2Connection.java:73)
    org.springframework.social.connect.support.OAuth2ConnectionFactory.createConnection(OAuth2ConnectionFactory.java:58)
    com.dataart.masternoy.controller.IndexController.process(IndexController.java:99)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs.
Apache Tomcat/7.0.27 
```

这是我的配置。我不明白我做错了什么，因为我做的一切都像手册说：[手册](http://static.springsource.org/spring-social/docs/1.0.0.M3/reference/htmlsingle/)

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"
    default-lazy-init="true">

    <bean id="connectionFactoryLocator"
        class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
                <bean
                    class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                    <constructor-arg value="${facebook.appId}" />
                    <constructor-arg value="${facebook.appSecret}" />
                </bean>
            </list>
        </property>
    </bean>

    <bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
    </bean>

    <bean id="connectionRepository" factory-method="createConnectionRepository"
        factory-bean="usersConnectionRepository" scope="request">
        <constructor-arg value="#{request.userPrincipal.name}" />
    </bean>

    <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />

    <!-- <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"> 
        <property name="customArgumentResolver" ref="facebookWebArgResolver" /> </bean> 
        <bean id="facebookWebArgResolver" class="org.springframework.social.facebook.FacebookWebArgumentResolver"> 
        <constructor-arg name="apiKey" value="${facebook.appId}"/> </bean> -->
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:47:34.353

对不起，有版本问题。有了这个 pom，它应该可以工作。

```
<org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    <org.junit.version>4.7</org.junit.version>
    <org.slf4j.version>1.6.1</org.slf4j.version>

    <org.springframework.social-version>1.0.1.RELEASE</org.springframework.social-version>
    <org.springframework.social.facebook-version>1.0.1.RELEASE</org.springframework.social.facebook-version>
    <org.springframework.security.crypto-version>3.1.0.RELEASE</org.springframework.security.crypto-version>
    <org.codehaus.json-mapper>1.7.7</org.codehaus.json-mapper>
    <org.springframework.social-version-web>1.0.1.RELEASE</org.springframework.social-version-web> 
```

# iis - 具有 ssl 证书 www.mydomain.com 的域的 Cname 或 A 记录

> ID：11158078
> 
> 赞同：1
> 
> 时间：2012-06-22T14:22:28.273
> 
> 标签：iis, dns, ssl-certificate, cname, a-records

我们有两条`A`记录指向相同的公共 IP 地址：

*   `www.example.com IN A 192.*.*.*`
*   `example.com IN A 192.*.*.*`

我们有威瑞信颁发的证书`www.example.com`。现在，当用户键入时`https://www.example.com/xyz`，一切正常。

但是当我们使用 时`https://example.com/xyz`，浏览器会抛出一个错误：

> “本网站的安全证书有问题”

并要求用户做出决定，如果他们信任并想要继续。

现在应该是这里的最佳实践：

1.  更改证书并获取通配符证书`*.example.com`
2.  在 DNS 中使用以下设置：

    *   `www.example.com IN A 192.*.*.*`
    *   `example.com IN CNAME www.example.com`
3.  在 .Net 管道中编写一个 HTTP 模块以重定向用户，如果他们`example.com/xyz`键入`www.example.com/xyz`. 我知道这是不推荐的。

我们想做一些类似`chase.com`正在做的事情。如果您键入`chase.com`，它将带您到`https://www.chase.com/`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:54:28.320

以上都不是。您应该**获得涵盖两个域的 SSL 证书：`www.mydomain.com`和`mydomain.com`**.

根据您的建议：

1) 在打开没有任何前缀的 mydomain.com 时，拥有单个域的通配符证书`*.mydomain.com`仍然会给您一个错误。您当然可以获得多域证书，`*.mydomain.com`并且`mydomain.com`

2）为了 SSL，CNAME 或 A 无关紧要 - DNS 用于获取您的网络服务器的地址（A 记录），之后浏览器仍然希望 SSL 证书与您在地址栏中键入的内容完全匹配。

3) 这适用于**http**请求，但是当用户键入**https://mydomain.com时，浏览器会在处理重定向请求****之前**检查 SSL 证书，并且仍会显示警告。

*PS你有这个问题，因为CA行业完全搞砸了。他们的产品页面都看起来像“超级 256 位加密”（证书与加密强度无关）、移动支持（无论是移动还是大型机，证书都是一样的），以及“包含免费站点封条”（网站印章是放置在您网站上的 CA 广告的好名字）。*

*所有不重要的事情，比如它是 CRL 还是 OCSP，或者它涵盖了哪些域名——从未提及。*

# java - 使用 JAXB 切割 XML

> ID：11158079
> 
> 赞同：2
> 
> 时间：2012-06-22T14:22:32.967
> 
> 标签：java, xml, jaxb

我有以下xml：

```
 <Package>
        <PackageHeader>
            <name>External Vendor File</name>
            <description>External vendor file for some purpose</description>
            <version>3.141694baR3</version>
        </PackageHeader>
        <PackageBody>
            <Characteristic id="1">
                <Size>
                    <value>1.68</value>
                    <scale>Meters</scale>
                    <comment>Size can vary, depending on temperature</comment>
                </Size>
                <Weight>
                    <value>9</value>
                    <scale>M*Tons</scale>
                    <comment>His mama is so fat, we had to use another scale</comment>
                </Weight>
                <rating>  
                    <ratingCompany>ISO</ratingCompany>
                    <rating:details xmlns:rating="http://www.w3schools.com/ratingDetails">
                        <rating:value companyDepartment="Finance">A</rating:value>
                        <rating:expirationDate update="1/12/2010">1/1/2014</rating:expirationDate>
                        <rating:comment userID="z94234">You're not Silvia.</rating:comment>
                        <rating:comment userID="r24942">You're one of the Kung-Fu Creatures On The Rampage</rating:comment>
                        <rating:comment userID="i77880">TWO!</rating:comment>
                        <rating:priority>3</rating:priority>
                    </rating:details>
                </rating>
            </Characteristic>
            <Characteristic id="2">
                <Size/>               
                <Weight/>
                <rating/>
            </Characteristic>
            ...
            <Characteristic id="n"/>
        </PackageBody>
    </Package> 

```

以及以下 Java 代码：

```
 public class XMLTest {

        public static void main(String[] args) throws Exception {

            Package currentPackage = new Package();     
            Package sourcePackage = new Package();
            int totalCharacteristics;

            PackageBody currentPackageBody = new PackageBody();     
            Characteristic currentCharacteristic = new Characteristic();        
            rating currentRating = new rating();

            FileInputStream fis = new FileInputStream("sourceFile.xml");

            JAXBContext myCurrentContext = JAXBContext.newInstance(Package.class);
            Marshaller m = myCurrentContext.createMarshaller();
            Unmarshaller um = myCurrentContext.createUnmarshaller();

            sourcePackage = (Package)um.unmarshal(fis);

            currentPackage.setPackageHeader(sourcePackage.getPackageHeader());

            totalCharacteristics = sourcePackage.getPackageBody().getCharacteristics().size();
            for (int i = 0; i < totalCharacteristics; i++)
            {
                currentRating = sourcePackage.getPackageBody().getCharacteristics().get(i).getrating();
            }       

            currentCharacteristic.setrating(currentRating);
            currentPackageBody.getCharacteristics().add(currentCharacteristic);

            currentPackage.setPackageBody(currentPackageBody);      
            m.marshal(currentPackage, new File("targetFile.xml"));
            fis.close();
        }
    } 

```

这给了我下一个 XML：

```
 <Package>
        <PackageHeader>
            <name>External Vendor File</name>
            <description>External vendor file for some purpose</description>
            <version>3.141694baR3</version>
        </PackageHeader>
        <PackageBody>
            <Characteristic id="1">           
                <rating>
                    <ratingCompany>ISO</ratingCompany>
                    <rating:details xmlns:rating="http://www.w3schools.com/ratingDetails">
                        <rating:value companyDepartment="Finance">A</rating:value>
                        <rating:expirationDate update="1/12/2010">1/1/2014</rating:expirationDate>
                        <rating:comment userID="z94234">You're not Silvia.</rating:comment>
                        <rating:comment userID="r24942">You're one of the Kung-Fu Creatures On The Rampage</rating:comment>
                        <rating:comment userID="i77880">TWO!</rating:comment>
                        <rating:priority>3</rating:priority>
                    </rating:details>
                </rating>
            </Characteristic>
            <Characteristic id="2">           
                <rating/>         
            </Characteristic>
            ...
            <Characteristic id="n"/>
        </PackageBody>
    </Package> 

```

这就是我需要的：

```
 <Package>
        <PackageHeader>
            <name>External Vendor File</name>
            <description>External vendor file for some purpose</description>
            <version>3.141694baR3</version>
        </PackageHeader>
        <PackageBody>
            <Characteristic>
                <rating id="1">
                    <ratingCompany>ISO</ratingCompany>
                    <rating:details xmlns:rating="http://www.w3schools.com/ratingDetails">                    
                        <rating:comment userID="z94234">You're not Silvia.</rating:comment>
                        <rating:comment userID="r24942">You're one of the Kung-Fu Creatures On The Rampage</rating:comment>
                        <rating:comment userID="i77880">TWO!</rating:comment>
                        <rating:priority>3</rating:priority>
                    </rating:details>
                </rating>
            </Characteristic>
            <Characteristic>
                <rating id="2"/>
            </Characteristic>
            ...
            <Characteristic/>
        </PackageBody>
    </Package> 

```

但我有几个问题：

*   如何实现读取 4GB 文件的方法？（例如，用 StAX 阅读）。

*   如果我想从源过滤一些标签到目标（如在最后一个 xml 中），我是否必须将它们一一分配给 targetFile？是否有任何迭代器可以让我遍历所有子节点并分配它们？

*   如果 sourceFile 发生变化，我是否需要重新运行 xjc 并重新编译整个项目？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:39:21.757

要读取巨大的 XML 文件，您肯定需要像 StAX 这样的流解析器。此外，如果您希望使用它，您可以使用 JAXB 的组合有选择地将给定的 xml 片段映射到 java 对象。只有当您的模式发生更改时，您才需要重新生成您的 JAXB 类。如果您的应用程序代码更改，则无需重新生成。

# c# - 定义通用方法

> ID：11158083
> 
> 赞同：5
> 
> 时间：2012-06-22T14:22:40.003
> 
> 标签：c#, generics

所有，我有一个当前用于调用返回类型的 DLL 的方法`bool`，这很好用。这种方法是

```
public static bool InvokeDLL(string strDllName, string strNameSpace, 
                             string strClassName, string strMethodName, 
                             ref object[] parameters, 
                             ref string strInformation, 
                             bool bWarnings = false)
{
    try
    {
        // Check if user has access to requested .dll.
        if (!File.Exists(Path.GetFullPath(strDllName)))
        {
            strInformation = String.Format("Cannot locate file '{0}'!",
                                           Path.GetFullPath(strDllName));
            return false;
        }
        else
        {
            // Execute the method from the requested .dll using reflection.
            Assembly DLL = Assembly.LoadFrom(Path.GetFullPath(strDllName));
            Type classType = DLL.GetType(String.Format("{0}.{1}", 
                                         strNameSpace, strClassName));
            if (classType != null)
            {
                object classInstance = Activator.CreateInstance(classType);
                MethodInfo methodInfo = classType.GetMethod(strMethodName);
                if (methodInfo != null)
                {
                    object result = null;
                    result = methodInfo.Invoke(classInstance, new object[] { parameters });
                    return Convert.ToBoolean(result);
                }
            }

            // Invocation failed fatally.
            strInformation = String.Format("Could not invoke the requested DLL '{0}'! " + 
                                           "Please insure that you have specified the namespace, class name " +
                                           "method and respective parameters correctly!",
                                           Path.GetFullPath(strDllName));
            return false;

        }
    }
    catch (Exception eX)
    {
        strInformation = String.Format("DLL Error: {0}!", eX.Message);
        if (bWarnings)
            Utils.ErrMsg(eX.Message);
        return false;
    }
} 
```

现在，我想扩展这个方法，以便我可以从*任何类型*的 DLL 中检索返回值。我计划使用泛型来做到这一点，但立即进入了我不知道的领域。在编译时未知时如何返回 T，我查看了反射，但我不确定在这种情况下如何使用它。在上面的代码中进行第一次检查

```
public static T InvokeDLL<T>(string strDllName, string strNameSpace, 
                             string strClassName, string strMethodName, 
                             ref object[] parameters, ref string strInformation, 
                             bool bWarnings = false)
{
    try
    {
        // Check if user has access to requested .dll.
        if (!File.Exists(Path.GetFullPath(strDllName)))
        {
            strInformation = String.Format("Cannot locate file '{0}'!",
                                           Path.GetFullPath(strDllName));
            return "WHAT/HOW??";
        ... 
```

我怎样才能实现我想要的，或者我应该重载方法？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:26:15.040

代替

```
return false; 
```

经过

```
return default(T); 
```

和

```
return Convert.ToBoolean(result); 
```

经过

```
return (T)result; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T14:26:26.050

当您没有从 DLL 中获得真正的价值时，您显然必须从某个地方创建一个价值。适用于每种可能类型的唯一方法`T`是`return default(T)`给出该类型的默认值（即，`0`对于任何引用类型）。`int``null`

如果在类型参数上放置类型约束，您可以获得更多选项，但会牺牲通用性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:48:45.327

我会做这样的事情：

```
 public static InvokeDLLResult<T> InvokeDLL<T>(string strDllName, string strNameSpace,
                         string strClassName, string strMethodName,
                         ref object[] parameters,
                         ref string strInformation,
                         bool bWarnings = false)
    {
        try
        {
            // Check if user has access to requested .dll.
            if (!File.Exists(Path.GetFullPath(strDllName)))
            {
                strInformation = String.Format("Cannot locate file '{0}'!",
                                                         Path.GetFullPath(strDllName));
                return InvokeDLLResult<T>.Failure;
            }
            else
            {
                // Execute the method from the requested .dll using reflection.
                Assembly DLL = Assembly.LoadFrom(Path.GetFullPath(strDllName));
                Type classType = DLL.GetType(String.Format("{0}.{1}", strNameSpace, strClassName));
                if (classType != null)
                {
                    object classInstance = Activator.CreateInstance(classType);
                    MethodInfo methodInfo = classType.GetMethod(strMethodName);
                    if (methodInfo != null)
                    {
                        object result = null;
                        result = methodInfo.Invoke(classInstance, new object[] { parameters });
                        return new InvokeDLLResult<T>(true, (T) Convert.ChangeType(result, methodInfo.ReturnType));
                    }
                }

                // Invocation failed fatally.
                strInformation = String.Format("Could not invoke the requested DLL '{0}'! " +
                                                         "Please insure that you have specified the namespace, class name " +
                                                         "method and respective parameters correctly!",
                                                         Path.GetFullPath(strDllName));
                return InvokeDLLResult<T>.Failure;

            }
        }
        catch (Exception eX)
        {
            strInformation = String.Format("DLL Error: {0}!", eX.Message);
            if (bWarnings)
                Debug.WriteLine(eX.Message);
            return InvokeDLLResult<T>.Failure;
        }
    }

    public class InvokeDLLResult<T>
    {
        public InvokeDLLResult(bool success, T result)
        {
            Success = success;
            Result = result;
        }

        public bool Success { get; private set; }
        public T Result { get; private set; }

        public static InvokeDLLResult<T> Failure = new InvokeDLLResult<T>(false, default(T));
    } 
```

或者，我会编写一个 TryInvokeDLL 方法，使用 out 参数返回结果。

# apache - 使用 htaccess 文件将 sitename.com/en 重定向到 sitename.com/ar

> ID：11158084
> 
> 赞同：0
> 
> 时间：2012-06-22T14:22:45.090
> 
> 标签：apache, .htaccess

我想使用 htaccess 文件将 sitename.com/en 和该部分内的所有链接重定向到使用 /ar 而不是 /en 的相同 URL。版块内的链接数量巨大，无法一一写出来。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:26:45.897

使用这个 .htaccess ：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule   ^en/(.*)?$  /ar/$1 [QSA,L] 
```

如果您希望不再使用旧页面 (en/)，并在浏览器中查看新 url (ar/)，请使用`[QSA,L,R=301]`而不是`[QSA,L]`（它会通知您正在使用永久重定向）

# jquery - 如果用户使用 codeigniter 登录，则使用 jquery 更改列表项

> ID：11158087
> 
> 赞同：0
> 
> 时间：2012-06-22T14:22:59.830
> 
> 标签：jquery, codeigniter

我在导航栏中有一个带有文本的列表项：“登录”。在我的 codeignter 控制器上，我有一个函数返回登录用户的用户名。如何使用 AJAX 将列表项的名称更改为我的 CI 控制器返回的 php 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:25:59.373

您需要设置一个控制器来处理这个问题，然后通过 ajax 调用 url 并`success()`更改 DOM 元素

## 控制器

```
<?php
function getusername(){
  //dosomething
  echo json_encode($username);
} 
```

## 阿贾克斯

```
$.ajax({
  //url to the above controller
  url: "/auth/getusername",
  dataType: "JSON",
  //on success, get the echo'd data json data from the controller
  success: function(d){
    //put the json_data into the field via .html()
    $('.username-field').html(d);
  }
}); 
```

* * *

我的问题是，当您可以在视图中简单地使用条件语句并在页面重新加载时显示它们的名称时，为什么要使用 ajax 来执行此操作？当用户登录时，您已经在发出 HTTP 请求。为什么还要发出额外的请求来检索他们的用户名？

### 将 $username 传递给视图

```
$data['username'] = 'JohnDoe';
$this->load->view('index/index', $data); 
```

### 在 PHP 中使用三元运算符形式

```
<?php echo ( isset($username) ) ? $username : 'Guest'; ?> 
```

### 在 PHP 中使用全长条件

```
<?php if( isset($username) ){ echo $username; } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:31:30.680

像下面这样的东西应该可以解决问题：

```
$.get('/index.php/controller/method', function(data) {
  $('#signInBtn').html(data);
}); 
```

其中“/index.php/controller/method”将被您各自的控制器和方法名称替换。

我用 JSBin 上关联的 HTML 放了一个完整的例子：http: [//jsbin.com/ifigih/edit](http://jsbin.com/ifigih/edit)

# excel - 网站 -> Excel -> Excel

> ID：11158091
> 
> 赞同：1
> 
> 时间：2012-06-22T14:23:14.153
> 
> 标签：excel, vba

我的问题的一点背景。我在一家负责从所有 50 个州和华盛顿特区的数据库中检索数据的公司工作。我把这些数据用excel重新格式化。重新格式化后，我使用 SQL Server 将其上传到我们的网站 vetportal.agdata.net。虽然有些州并没有那么糟糕，但从其他州检索信息会让整理变得非常痛苦。

我有两个问题：

1.  是否可以编写代码，以便可以将新数据库与旧数据库（我们的记录）交叉检查并更新旧数据库中的信息，同时排除重复信息？

2.  是否可以编写代码从打开的 Excel 表中获取数字，切换到打开的网站，输入数字，搜索个人，提取他/她的信息，最后用该信息更新 excel，然后继续下一个人？例如，WA State 的网站设置为一次只能查找一个人，这在浏览 1200 多个人时非常繁琐。

我有一些使用 C++ 的经验，并且编写了从其他文件中提取代码的程序，但主要是等式或值，然后在我的代码中进行评估，所以我知道这有点不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:53:03.407

我想如果你有一个重复的技术问题，你可以通过一些编程来解决它。

你的问题：

1.  您可以使用一个小应用程序来实现，使用 SQL 从新数据库中读取信息并检查/更新旧数据库的信息。

2.  这段代码有点难做，但我想它可以做到。在 C++ 中，我不知道是否有任何库已经可以打开 Excel 文件，但在 Java 中，你有[Apache POI](http://poi.apache.org/)，这样你就可以在应用程序中打开你的 excel 文件，然后在遍历你打开的信息时应用程序中的网站，并使用您的号码提交您想要的表格，获取响应并解析它。

如果你想用 Java 做这个，我认为如果你知道 C++ 就不会浪费你太多时间。唯一的例外是用java打开网站并解析它，这需要更多的时间来学习和做。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:58:02.767

1) 是的。根据数据库，您可以进行 db 到 db 连接。然后，您可以使用 INNER JOIN 编写查询来更新旧数据库中的信息并排除重复项。

2）解决这个问题的几种方法。根据您的语言（我的是 PHP），您可以使用诸如 PHPExcel 之类的开源类来打开工作表并获取和更新网站数据 (cURL)。您还可以在 Excel 中编写一些可以执行类似功能的 VBA。

# linux - 从无线设备驱动程序获取比特率的值。

> ID：11158094
> 
> 赞同：0
> 
> 时间：2012-06-22T14:23:30.470
> 
> 标签：linux, linux-device-driver, wireless

我正在编写一个需要`bitrate`从这个联合中读取值的内核模块：

```
union   iwreq_data
{==
    .......
    struct iw_param bitrate;    /* default bit rate */

     ....
} 
```

此代码是表单`wireless.h`有谁知道我如何访问它的价值？（我使用的是 linux 内核 2.6.35）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:28:35.757

没有办法做到这一点，不幸的是......

仔细看看`iw_param`我们发现的结构

```
struct  iw_param
{
  __s32     value;      /* The value of the parameter itself */
  __u8      fixed;      /* Hardware should not use auto select */
  __u8      disabled;   /* Disable the feature */
  __u16     flags;      /* Various specifc flags (if any) */
}; 
```

现在，这就是代码的样子`wireless.h`

```
union   iwreq_data
{
    /* Config - generic */
    char        name[IFNAMSIZ];
    /* Name : used to verify the presence of  wireless extensions.
     * Name of the protocol/provider... */

    struct iw_point essid;      /* Extended network name */
    struct iw_param nwid;       /* network id (or domain - the cell) */
    struct iw_freq  freq;       /* frequency or channel :
                     * 0-1000 = channel
                     * > 1000 = frequency in Hz */

    struct iw_param sens;       /* signal level threshold */
    struct iw_param bitrate;    /* default bit rate */
    struct iw_param txpower;    /* default transmit power */
    struct iw_param rts;        /* RTS threshold threshold */
    struct iw_param frag;       /* Fragmentation threshold */
    __u32       mode;       /* Operation mode */
    struct iw_param retry;      /* Retry limits & lifetime */

    struct iw_point encoding;   /* Encoding stuff : tokens */
    struct iw_param power;      /* PM duration/timeout */
    struct iw_quality qual;     /* Quality part of statistics */

    struct sockaddr ap_addr;    /* Access point address */
    struct sockaddr addr;       /* Destination address (hw/mac) */

    struct iw_param param;      /* Other small parameters */
    struct iw_point data;       /* Other large parameters */
}; 
```

除了`bitrate->value`

# java - DatagramSocket 中的 NullPointerException

> ID：11158097
> 
> 赞同：0
> 
> 时间：2012-06-22T14:23:35.880
> 
> 标签：java, sockets, nullpointerexception

我正在使用 DatagramSocket 和 datagramPacket 在 java 中创建服务器聊天程序，我在客户端代码中获取 java.lang.NullPointerException 以发送数据包

```
try
{
    InetAddress ia = InetAddress.getLocalHost();
    String s1 = new String(Uname + "-C-" + ia.getHostAddress());
    cdp = new DatagramPacket(s1.getBytes(), s1.length(), ia, 7080);
    csock.send(cdp);
    csock.setSoTimeout(5000);
    csock.receive(cdp);
    s1 = new String(cdp.getData(), 0, cdp.getLength());
    chat.append(s1);
}
catch(Exception e)
{
    onlineuser.append("\n" + e);
} 
```

有人可以帮我清除这个错误。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:36:18.017

根据您在评论中告诉我们的内容，您没有初始化 csock。确保在尝试使用它之前调用它的构造函数。

您已通过以下方式声明它： public DatagramSocket csock; 但是您没有为其分配任何值，因此它默认为空。那是您异常的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:29:55.460

您没有提供足够的代码进行分析，但我认为`csock`是空的。有关更多信息，请尝试阅读[此文档](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)

# javascript - 无法从 jquery 对象调用的 Javascript 方法？

> ID：11158102
> 
> 赞同：7
> 
> 时间：2012-06-22T14:23:59.007
> 
> 标签：javascript, jquery, arrays, javascript-objects

我正在阅读 Learning jQuery 1.3 (Jonathan Chaffer 和 Karl Swedberg)，在对表格进行排序时，他们`.get()`在调用之前使用过`.sort()`，并说

> *我们需要将 jQuery 对象转换为 DOM 节点数组。尽管 jQuery 对象在许多方面表现得像数组，但它们没有任何可用的原生数组方法，例如 .sort()。*

代码：

```
$("#sort").click(function() {
        var posts = $("#posts_div .post");
        posts.sort(function(a, b) {
           return ($(a).text()) > ($(b).text());
        });       
        $.each(posts, function(index, post) { $("#posts_div").append(post); });
});​ 
```

所以我尝试在不使用的情况下做到这一点`.get()`，但令人惊讶的是，即使没有`.get()`使用最新的 jQuery，它也能工作，但不能使用 1.3

所以做了一些小提琴以使其清楚

[**没有`.get()`jquery 1.2.6 就不能工作 **](http://jsfiddle.net/ztsDC/7/)

[使用`.get()`jquery 1.2.6](http://jsfiddle.net/ztsDC/8/)

[在没有`.get()`jquery 1.7.2 的情况下工作](http://jsfiddle.net/ztsDC/5/)

[使用`.get()`jquery 1.7.2](http://jsfiddle.net/ztsDC/6/)

很明显，早期的 jQuery 对象不具有`.sort()`与 Javascript 数组相同的功能？但现在他们有..

所以我的问题是 jQuery 对象还不支持哪些功能，所以我们可以记住在使用之前转换为 Javascript 数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:52:10.280

jQuery 对象目前支持 3 种数组方法：

```
var methods = 'pop push reverse shift sort splice unshift concat join slice toString indexOf lastIndexOf filter forEach every map some reduce reduceRight'.split(' ')
var implemented = $.grep(methods, function(m) {
    return $.prototype[m] == Array.prototype[m];
});
console.log(implemented); // => ["push", "sort", "splice"] 
```

他们也有`slice`，但它与`slice`数组不同：

```
$.prototype.slice === Array.prototype.slice // => false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:27:18.747

jQuery 确实有一个`.sort`方法，只是没有正式记录，因为它不遵循 jQuery 方法的通常格式。

唯一受支持的方法是[api](http://api.jquery.com)中列出的方法。

`.sort`实现为：

```
$.fn.sort = [].sort; 
```

您可以根据需要以相同的方式添加自己的其他数组方法。

```
$.fn.reverse = [].reverse; 
```

如果`.sort`在您的 jQuery 版本中没有实现，请自行实现。

# wpf - 为什么 Frame.Navigating 事件期间的 DoubleAnimation 没有启动？

> ID：11158105
> 
> 赞同：0
> 
> 时间：2012-06-22T14:24:10.043
> 
> 标签：wpf, animation, navigation, transition

我正在尝试使用与[此](https://stackoverflow.com/questions/2135113/how-do-you-do-transition-effects-using-the-frame-control-in-wpf)非常相似的实现在页面导航之间创建淡入/淡出过渡。不幸的是，它没有按照我的预期行事。我的代码如下所示：

```
private void frame_Navigating(object sender, NavigatingCancelEventArgs e)
{
    DoubleAnimation animation = new DoubleAnimation
    {
        From = 1,
        To = 0,
        Duration = new Duration(Timespan.FromMillseconds(100))
    };
    animation.Completed += new EventHandler(animation_Completed);
    frame.BeginAnimation(OpacityProperty, animation);
}

private void animation_Completed(object sender, EventArgs e)
{
    DoubleAnimation animation = new DoubleAnimation
    {
        From = 0,
        To = 1,
        Duration = new Duration(Timespan.FromMillseconds(100))
    };
    frame.BeginAnimation(OpacityProperty, animation);
} 
```

似乎在页面最初导航到之后，第一个动画没有开始，但第二个链式动画确实开始了。但是，如果我通过向后或向前跳来导航，它的行为正是我想要的方式。

第一个动画肯定会开始，因为如果我将持续时间增加到更明显的时间，比如 5 秒，那么在第二个动画开始之前会有 5 秒的延迟。

这个问题真的让我很头疼。我还没有弄清楚初始页面导航和前进/后退导航之间有什么不同。

编辑：在挖掘了更多之后，似乎第一个动画确实发生了，只是我没有看到它，因为它是上一页。所以我的问题一定是在导航到新页面后正在发生动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:57:28.363

啊！如果我在感到有点气馁之前再多挖一点就好了。

解决我的问题的诀窍是将我的动画放在导航事件处理程序中。不需要第一个淡出上一页的动画来达到我想要的效果。我的代码现在看起来像这样：

```
frame_Navigated(object sender, NavigatingCancelEventArgs e) 
{     
    DoubleAnimation animation = new DoubleAnimation     
    {         
        From = 0,         
        To = 1,         
        Duration = new Duration(Timespan.FromMillseconds(100))     
    };     
    frame.BeginAnimation(OpacityProperty, animation); 
} 
```

在导航处理程序中，新页面尚未完全加载，当我触发第二个动画时，它已加载，加载后启动动画看起来很糟糕。

# asp.net - 发送 HTTP 标头后服务器无法设置内容类型 - 跟踪此问题

> ID：11158106
> 
> 赞同：5
> 
> 时间：2012-06-22T14:24:11.047
> 
> 标签：asp.net, http

我们的一位用户在我们的 Web 应用程序中遇到错误。我们无法复制这个问题，我怀疑它与网络有关。我让用户在他们的办公室和家里使用他们的笔记本尝试应用程序，并确认问题只发生在他们的办公室。

我登录服务器并在他们在办公室尝试后立即查看事件查看器，日志中出现以下警告。

我不知道如何开始追踪这个。有什么建议么？

> 事件查看器日志如下：
> 
> 事件代码：3005 事件消息：发生未处理的异常。事件时间：2012 年 6 月 20 日下午 6:32:45 事件时间 (UTC)：2012 年 6 月 20 日晚上 10:32:45 事件 ID：ebf8f628a9b3457cbea117c8c2da2186 事件序列：2970 事件发生：26 事件详细代码：0 应用程序信息：
> 
> ```
> Application domain: /LM/W3SVC/50/ROOT-1-129847041933281152 
> Trust level: Full 
> Application Virtual Path: / 
> Application Path: c:\websites\foobar.acme.com\ 
> Machine name: MyServer    Process information: 
> Process ID: 15152 
> Process name: w3wp.exe 
> Account name: NT AUTHORITY\NETWORK SERVICE    Exception information: 
> Exception type: HttpException 
> Exception message: Server cannot set content type after HTTP headers have been sent.    Request information: 
> Request URL: http://foobar.acme.com/Project/Evaluate/ResultsXML.aspx?step=89&uid=4397&rnd=hhf8oe
> 
> Request path: /Project/Evaluate/ResultsXML.aspx 
> User host address: 192.168.102.1 
> User:  
> Is authenticated: False 
> Authentication Type:  
> Thread account name: NT AUTHORITY\NETWORK SERVICE    Thread information: 
> Thread ID: 12 
> Thread account name: NT AUTHORITY\NETWORK SERVICE 
> Is impersonating: False 
> Stack trace:    at System.Web.HttpResponse.set_ContentType(String value)    at System.Web.UI.Page.SetIntrinsics(HttpContext context,
> Boolean allowAsync)    at
> System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)   
> at System.Web.UI.Page.ProcessRequest(HttpContext context)    at
> ASP.error_aspx.ProcessRequest(HttpContext context)    at
> System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler,
> TextWriter writer, Boolean preserveForm, Boolean setPreviousPage,
> VirtualPath path, VirtualPath filePath, String physPath, Exception
> error, String queryStringOverride)
> Custom event details: 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T00:41:01.260

我正在添加第二个答案，以防我在写第一个答案时完全误解了这个问题。在这个答案中，我假设只有一台服务器，这是一个浏览器/用户特定的问题。

1.  确认您发布的错误不是红鲱鱼 - 检查事件日志以查找其他事件，并确保它仅在您的用户遇到他或她的错误时发生。

2.  请描述与错误相关的行为（例如浏览器显示什么？500 错误？某种系统错误消息？网络断开？）

3.  检查来自浏览器的流量（例如查看 IIS 日志）。除了用户在流量中的出现方式之外，您的服务器一点也不关心用户的任何事情。特别是我会留意接受标头的差异，这可能是特定于浏览器的，并且可能会触发服务器中的不同逻辑路径——尝试将内容类型设置为用户浏览器将接受的内容类型。

这是我现在对答案的疯狂猜测：

ResultsXml.aspx 的目的是返回某种文档；该文档需要外部应用程序（例如 PDF 或 XML 查看器）；它以 inline 的内容配置返回它；并且办公室计算机的本地安全策略禁用缓存。在这种情况下，第三方查看器应用程序将无法找到该文件，因为缓存不存在。

如果我错了，请发布上面的内容，我会继续猜测:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T22:02:33.047

可能与集成与经典管道模式有关。比较您的两个环境并确保它们在这方面没有区别。

IIRC 在集成流水线模式下，您可以在写入标头后重置或删除标头；在经典模式下你不能。

如果您不知道区别，请查看[本文](https://stackoverflow.com/questions/716049/what-is-the-difference-between-classic-and-integrated-pipeline-mode-in-iis7)。

# vb.net - 通过 COM 调用时，VB 似乎丢失了换行符

> ID：11158114
> 
> 赞同：1
> 
> 时间：2012-06-22T14:24:36.610
> 
> 标签：vb.net, com

我有一个VB方法

```
Public Sub append_text(ByVal s As String)
    f1.TextBox1.AppendText(s)
End Sub 
```

从 C++ 通过 COM 调用

```
_bstr_t b(L"test\nnew\nlines\n");
ATLENSURE_SUCCEEDED(t->append_text(b)); 
```

但是文本框最终会说

```
testnewlines 
```

没有上述新行。

那为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:15:52.943

[为了完整起见，发布我的评论作为答案（现在我知道它是正确的......）：]

不同的操作系统将不同的字符组合视为换行符。例如，*nixes 使用单个`\n`，就像在您的代码中一样。另一方面，Windows 使用这种`\r\n`组合。因此，`\n`您的字符串中的单个不足以被视为新的行标记。使用`\r\n`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:48:18.600

伊兰是对的。

要在 VB 端修复它，试试这个

```
 Dim s2 As String = s.Replace(vbLf, vbCrLf) 
 f1.TextBox1.AppendText(s2) 
```

**编辑**Sideshow Bob 对此进行了编译和测试。

# php - 你如何让url在最后显示一个斜线？

> ID：11158118
> 
> 赞同：3
> 
> 时间：2012-06-22T14:24:54.417
> 
> 标签：php, url, url-rewriting

这可能有一个简单的答案，但我找不到一个，所以我的简单问题是，你如何让网址在末尾显示一个斜线？

例如：example.com/page/ 而不是 example.com/page.html 或 example.com/page.php

我读了[http://php.net/manual/en/security.hiding.php](http://php.net/manual/en/security.hiding.php)但大部分内容都超出了我的想象。我将expose_php设置为关闭，但扩展仍然存在，这是通过编辑配置文件中的内容还是在php脚本中添加代码来完成的？

作为参考，我发现[mod_rewrite wiki](https://stackoverflow.com/tags/mod-rewrite/info)很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:32:39.797

这是通过向 HTTP 服务器添加 URL 重写规则来实现的，例如，它将传入请求映射到*example.com/page/*到*example.com/page.php*。

请注意，当客户端尝试访问与您的页面相关的某些文件时，使用*目录样式名称（带有尾部斜杠）可能会导致一些问题。*

*   在获取*example.com/page.php*时，如果浏览器遇到例如要加载的 CSS 文件，他会在*example.com/file.css**中查找***。
*   When fetching *example.com/page/* he will try to load *example.com/**page/file.css***, since you were not in the top level folder of the URI anymore. You'll have to add a [`<base href="http://example.com" />`](http://www.w3schools.com/tags/tag_base.asp) tag in each of your pages, making the *directory style* page renaming a bad idea eventually.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:29:20.123

您可以使用 mod_rewrite （在 apache 服务器上）（这是比 PHP-Parser Variante 更好的方法）

例子：

```
RewriteEngine on 
RewriteRule ^(.*).html$ $1.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:30:00.867

在你的 PHP 代码中，一开始你可以使用这个：

```
<?php
    function curPageURL() {
     $pageURL = 'http';
     if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
     $pageURL .= "://";
     if ($_SERVER["SERVER_PORT"] != "80") {
      $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
     } else {
      $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
     }
     return $pageURL;
    }
    if(substr($_SERVER["REQUEST_URI"], -1) != "/")
        header('Location: ' . curPageURL() . '/');
?> 
```

希望这可以帮助！:)

# python - Python（和 Flask）中的非消息队列/简单长轮询

> ID：11158121
> 
> 赞同：32
> 
> 时间：2012-06-22T14:25:11.407
> 
> 标签：python, flask, long-polling

我正在寻找一种简单的（即，不需要我设置单独的服务器来处理消息队列）方法来对运行计算并生成图形的小型 Web 界面进行长轮询。这是我的网络界面需要做的：

1.  用户在 Web 界面中请求图形/数据
2.  服务器运行一些计算。
3.  当服务器运行计算时，一个小容器会随着计算进度更新（可能通过 AJAX/jQuery）（类似于您在带有 print 的控制台中所做的事情（即 print 'calculating density function...'））
4.  计算完成并向用户显示图表。

由于计算都是在服务器端完成的，我不确定如何轻松设置它。显然，我想设置一个 REST API 来处理轮询，这在 Flask 中很容易。但是，我不确定如何检索实际更新。为此目的，一个明显的，虽然复杂的解决方案是设置一个消息队列并进行一些长轮询。但是，我不确定这对于这么简单的事情是正确的方法。

以下是我的问题：

1.  有没有办法使用文件系统来做到这一点？性能不是一个大问题。AJAX/jQuery 可以从文件中查找消息吗？将进度保存到某个 .json 文件？
2.  腌制呢？（我对酸洗不太了解，但也许我可以酸洗一个消息字典，它可以被处理轮询的 API 读取）。
3.  民意调查甚至是正确的方法吗？有没有更好或更常见的模式来处理这个问题？

我觉得我把事情复杂化了，因为我知道这种事情在网络上很常见。我经常看到一些事情正在发生，并且在进行一些计算（例如，在 Google Analytics 中）时，正在运行一个小的“loading.gif”图像。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-22T18:13:30.450

我已经使用 Flask 和 jQuery 构建了几个这样的应用程序。根据那次经验，我会说你的计划是好的。

1.  **不要使用文件系统。**您将遇到 JavaScript 安全问题/保护。万一您找到合理的解决方法，您仍然没有任何可移植或可扩展的东西。相反，请使用小型本地 Web 服务框架，例如 Flask。

2.  **不要腌制。**使用 JSON。它是 Web 应用程序和 REST 接口的语言。jQuery 和那些用于绘制图表、图形等的漂亮的基于 jQuery 的插件将需要 JSON。它易于使用，可读性强，对于小型应用程序，没有理由去其他地方。

3.  **长轮询对于您想要完成的事情是很好的。**纯基于 HTTP 的应用程序有一些限制。WebSockets 和类似的套接字层，如 Socket.IO，“是未来”。但是，根据我的经验，要找到服务器端实现的好的、简单的例子是很困难的。我仔细看了 有很多示例希望您设置 Node.js、REDIS 和其他中间件。但是我们为什么要设置两三个独立的中间件服务器呢？这很可笑。因此，对像 Flask 这样的简单纯 Python Web 框架进行长时间轮询是 IMO 的出路。

该代码不仅仅是一个片段，因此我没有将其包含在此处，而是将一个简化的示例放入[bitbucket 上的 Mercurial 存储库中](https://bitbucket.org/jeunice/lpoll/src)，您可以自由查看、复制或克隆。分为三个部分：

*   `serve.py`基于 Python/Flask 的服务器
*   `templates/index.html`98% HTML，2% 模板文件，基于 Flask 的服务器将呈现为 HTML
*   `static/lpoll.js`基于 jQuery 的客户端

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-07T01:36:27.493

在大多数浏览器对 Web Sockets 的简单、自然的支持出现之前，并且在它与 Flask 应用程序轻松集成之前，长轮询是一种合理的解决方法。但是在 2013 年中期，Web Socket 支持已经取得了长足的进步。

[这是一个示例](https://bitbucket.org/jeunice/flask-ws-example)，与上面的示例类似，但集成了 Flask 和 Web Sockets。它运行在[gevent](https://pypi.python.org/pypi/gevent)和[gevent-websocket 的](https://pypi.python.org/pypi/gevent-websocket)服务器组件之上。

请注意，此示例并非旨在成为 Web Socket 杰作。它保留了很多`lpoll`结构，使它们更容易比较。但它立即提高了 Web 应用程序的响应能力、服务器开销和交互性。

**Python 3.7+ 的更新**

自从最初的答案 5 年后，WebSocket 变得更容易实现。从 Python 3.7 开始，异步操作已经成熟为主流用途。Python Web 应用程序是完美的用例。他们现在可以像 JavaScript 和 Node.js 一样使用异步，而留下一些“并行”的怪癖和复杂性。特别是，请查看[Quart](https://pypi.org/project/Quart/)。它保留了 Flask 的 API 并与许多 Flask 扩展兼容，但支持异步。一个关键的副作用是 WebSocket 连接可以与 HTTP 连接并行处理。例如：

```
from quart import Quart, websocket

app = Quart(__name__)

@app.route('/')
async def hello():
    return 'hello'

@app.websocket('/ws')
async def ws():
    while True:
        await websocket.send('hello')

app.run() 
```

Quart 只是升级到 Python 3.7 的众多重要原因之一。

# java - 与 HtmlUnit 列表项交互

> ID：11158123
> 
> 赞同：0
> 
> 时间：2012-06-22T14:25:18.130
> 
> 标签：java, android, html, htmlunit

我有一个网络表单，我试图通过使用 HtmlUnit 的代码填写。

我被困在与列表项的交互阶段。我需要向用户显示数据，然后在网页表单中选择值，但根据 API 可用的唯一方法是：

```
String  getTypeAttribute() - Returns the value of the attribute "type".  
String  getValueAttribute() - Returns the value of the attribute "value". 
```

如何选择列表，将其显示给用户，然后接受他们的输入并将其设置在表单上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:48:22.940

好的，有一个 htmlselect 我忽略了大约十次：D 对不起！

# android - Android Web 浏览器 (ICS) 不调用 MIME 类型的处理程序

> ID：11158124
> 
> 赞同：2
> 
> 时间：2012-06-22T14:25:22.703
> 
> 标签：android, browser, mime-types, android-4.0-ice-cream-sandwich

我有一个订阅特定 MIME 类型的应用程序（application/vnd.oma.dd+xml，它是 OMA DL 描述符 - DD）。它在用户导航到标准 Android 浏览器中的 DD 链接时启动。

我的活动在 GB 上成功启动，但 ICS 浏览器自己处理这种 MIME 类型，它在单独的选项卡中将描述符作为 XML 打开。浏览器未发送任何意图。

问题： - ICS 浏览器处理 MIME 类型的方式是否有任何变化？- 有什么解决方法吗？

** 更新：请使用此测试链接：`http://220.128.71.175/DRM/DD/S-I-I-jpg.dd` 服务器返回“Content-type:application/vnd.oma.dd+xml”，但冰淇淋三明治 (ICS) 库存浏览器未打开清单注册的处理程序：

`<data android:mimeType="application/vnd.oma.dd+xml">`

同时GB浏览器正确启动处理程序。

提前致谢！

* ***更新 2 似乎向 Google 报告了类似的问题：[http](http://code.google.com/p/android/issues/detail?id=22971) ://code.google.com/p/android/issues/detail?id=22971 建议的解决方案并没有帮助我思考......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:35:21.270

你有HTC手机吗？HTC 的 Linkify Dispatcher 可能会妨碍您。

见这里：[http ://forums.androidcentral.com/htc-one-s/173238-htclinkifydispatcher-what.html](http://forums.androidcentral.com/htc-one-s/173238-htclinkifydispatcher-what.html)

在这里：http: [//forum.xda-developers.com/showthread.php?t=1696536](http://forum.xda-developers.com/showthread.php?t=1696536)

# c# - Convert large hexadecimal string to octal string

> ID：11158130
> 
> 赞同：0
> 
> 时间：2012-06-22T14:25:30.067
> 
> 标签：c#, asp.net

How do i convert a value given as a hexadecimal string to an Octal format, when the number is too large to fit in a 64 bits number?

I currently convert a byte array to hex like this

```
Byte[] data = { 116, 4, 228, 18, 189, 145, 31, 7, 123, 74, 174, 151, 54, 144, 224, 49, 210, 169, 43, 213 };
hex = BitConverter.ToString(data).Replace("-", string.Empty); 
```

Output in Hex:

```
7404E412BD911F077B4AAE973690E031D2A92BD5 
```

How do I get the Octal representation?

So i tried this earlier, but it doesn't work.

```
string binaryval = "";

  binaryval = Convert.ToString(Convert.ToInt32(hexValue,16), 8);

    foreach (char ch in hexValue)
    {

           binaryval += Convert.ToString(Convert.ToInt32(ch.ToString(), 16), 8);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:27:58.207

Have a look at the following [link on how to convert hex to decimal, octal or binary](http://www.ginktage.com/2011/09/how-to-convert-hexadecimal-number-to-decimal-octal-and-binary-number-using-c/). It comes with complete code examples:

```
/// <summary>
/// Hex2s the octal.
/// </summary>
/// <param name="hexvalue">The hexvalue.</param>
/// <returns></returns>
public static string hex2Octal(string hexvalue)
{
   string binaryval = "";
   binaryval = Convert.ToString(Convert.ToInt32(hexvalue, 16), 8);
   return binaryval;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:28:57.827

This is not that hard. You should have googled for it before :) Try this method:

```
public static string hex2Octal(string hexvalue)
   {
      string binaryval = "";
      binaryval = Convert.ToString(Convert.ToInt32(hexvalue, 16), 8);
      return binaryval;
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T15:09:51.367

Assuming you start off with a hexadecimal string of an arbitrary length, I think the best you can do is take each three bytes and convert them, because `0xFFFFFF` is exactly `77777777` octal (with one or two bytes you have to do more calculation, so this is simply the easiest approach).

```
string hex = "7404E412BD911F077B4AAE973690E031D2A92BD5";
string octal = "";

for (int i = hex.Length; i > 0; i -= 6)
{
    string threebyte;
    if (i < 6)
        threebyte = hex.Substring(0, hex.Length % 6);
    else
        threebyte = hex.Substring(i - 6, 6);

    octal = Convert.ToString(Convert.ToInt32(threebyte, 16), 8) + octal;
} 
```

This will give you the following correct octal result:

```
72004710112754421740736645256456332207003072252225725 
```

You can verify this result easily by taking a smaller number and comparing the least-significant part of the outcome when you type it in Windows Calculator (which can convert from Hex to Oct when you select View > Programmer, or `Alt-3`). I.e., when you take `A92BD5` Windows Calculator shows `52225725` as outcome, equal to the above.

The reason that you cannot simply concatenate the results of converting each byte, or each four bytes (int), is that only one and a half byte fits in two octals (`FFF` equals `7777`, but the range `00-FF` fits in `000-377`), or three bytes fit in four octals (`FFFFFF` equals `77777777`). Which is why I chose to split on six digits in my approach.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:53:14.463

```
Byte[] data = { 116, 4, 228, 18, 189, 145, 31, 7, 123, 74, 174, 151, 54, 144, 224, 49, 210, 169, 43, 213};
var str = String.Join("", data.Select(b => Convert.ToString(b,8).PadLeft(3,'0'))); 
```

-

```
//First hex string to byte array
string hex = "7404E412BD911F077B4AAE973690E031D2A92BD5";
List<byte> buf = new List<byte>();
for (int i = 0; i< hex.Length / 2; i++) 
     buf.Add(Convert.ToByte(hex.Substring(i * 2, 2), 16));

//Then to octal as above
var str = String.Join("", buf.Select(b => Convert.ToString(b,8).PadLeft(3,'0'))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:03:42.840

I think I get your problem. You are sending a hexvalue to the aforesaid method,something like 0A45D and when Convert.ToInt32 method is getting that value it's failing to parse. And again your values are larger for an Int32 structure. **So simply take your number(the hex representation), split it into 2 smaller string using any technique and then pass them separately to the above method.Get the strings and add them up.** Something like following:

```
public static string BigHexToOct(string number)
{
    string a= "first splitted part from number";
    string b= "second splitted part from number";
    string result= this.hex2Octal(a)+this.hex2Octal(b);
    return result;

} 
```

Try it and let us know.

You can try this way ; take a small part of your given string at first , see if it's converted successfully. If it is, then increase the length of string that the `hex2octal` method can convert successfully and this way you will know how you can divide your big number string.

# python - 语法错误无法找出原因

> ID：11158132
> 
> 赞同：1
> 
> 时间：2012-06-22T14:25:37.240
> 
> 标签：python, numpy, matplotlib

嗨，我不断收到语法错误，但我不知道为什么。我的代码是

```
data = numpy.loadtxt((etf + '.csv',dtype = ([("date", "S8"), ("value", "f8")]), delimiter= ',' , usecols=(0,-1)))
x = numpy.arange(len(data))
pl1.bar(x,data["value"], width = 0.8)
p1.xticks(x+.4, data["date"])
p1.show() 
```

语法错误是

```
 data = numpy.loadtxt((etf + '.csv',dtype = ([("date", "S8"), ("value", "f8")]), delimiter= ',' , usecols=(0,-1)))
                                           ^ 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:35:31.740

```
data = numpy.loadtxt((etf + '.csv', 
```

一旦你到达这里，Python 认为你正在构建一个元组作为一个参数发送给`loadtxt`，而不是发送多个参数。所以，

```
 dtype = ([("date", "S8"), ("value", "f8")]) 
```

错误，因为`=`在元组中无效。您可能打算这样做：

```
data = numpy.loadtxt((etf + '.csv'), ... ) 
```

但是`etf + '.csv'`这里不需要额外的括号 - 字符串连接无论如何都优先，所以你可以删除第二个`(`，一切都会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:31:00.260

你在 etf 前面有一个额外的括号

```
data = numpy.loadtxt(etf + '.csv',dtype = ([("date", "S8"), ("value", "f8")]), delimiter= ',' , usecols=(0,-1)) 
```

# sql - 解析 SQL Server 数据

> ID：11158137
> 
> 赞同：1
> 
> 时间：2012-06-22T14:26:02.750
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我使用 SSIS 和 [SharePointListAdapters][1] [1]: http://sqlsrvintegrationsrv.codeplex.com/releases 从我的 SharePoint 2010 列表中导入数据并将其放入 SQL Server 2008 表中。大约有 500 行数据。现在的挑战是适当地解析数据。我有几列周围有 html 标签。

例如，Column Project Desc 有类似 Project Desc 的数据

```
<div class="ExternalClass914BB5DA5CB142EB854C739EAACEE3BB">
    <div>Import Data from SharePoint list to Database.
    </div>
</div> 
```

在谷歌搜索中，我发现了下面的功能。它按预期工作。我的问题是如何编辑此函数以将名为 Project Desc 的列名作为参数，以便该特定列中的所有数据都将丢弃 html 标记。

```
create function dbo.StripHTML( @text varchar(max) ) returns varchar(max) as 
begin 
    declare @textXML xml 
    declare @result varchar(max) 
    set @textXML = @text; 
    with doc(contents) as 
    ( 
        select chunks.chunk.query('.') from @textXML.nodes('/') as chunks(chunk) 
    ) 
    select @result = contents.value('.', 'varchar(max)') from doc 
    return @result 
end 
go 
select dbo.StripHTML('<div class="ExternalClassB1D90504EAFF42BE8A8056E686F4E195"> <div>Import Data from SharePoint list to Database.</div></div>') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:30:34.690

创建函数后，您只需将其用作表中的普通字段，并将源表和字段放在参数所在的位置...

```
SELECT
  dbo.StripHTML( yourTable.yourColumn ) AS yourResults
FROM
  yourTable 
```

*（您无需编辑该函数，只需向其提供表中的数据。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:31:41.827

SQL 和 T-SQL 无法解析 HTML。不要将 HTML 与 XML 混淆...

[您可以使用HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的东西从托管代码中解析 HTML，无论是在您的 SSIS 包中还是作为 SQLCLR 部署的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T04:19:59.570

我在 SQLServerCentral.com 上找到了这个答案。因为它是一个 iTVF（内联表值函数），所以它比您现在使用的函数运行得更快。事实上，大约快两倍。参考：[http ://www.sqlservercentral.com/Forums/FindPost1198135.aspx](http://www.sqlservercentral.com/Forums/FindPost1198135.aspx)

```
CREATE FUNCTION dbo.StripHtmlTags2
        (@HtmlText XML )
RETURNS TABLE
     AS 
 RETURN
(
SELECT
    @HtmlText.value('(.)[1]', 'nvarchar(max)') AS result
) 
```

# jquery - 添加后使用 div

> ID：11158138
> 
> 赞同：0
> 
> 时间：2012-06-22T14:26:03.790
> 
> 标签：jquery, jquery-ui

所以我在 js 中不太好......在将 div 添加到 dom 后出现问题，无法理解，之后如何使用它。

所以我有一个简单的代码，它添加了 div。

```
$('#add_frame_by_button').click(function(){
        $('body').append(crazy_frame);
    }); 
```

也有

```
$("#resizable").draggable().resizable({
        resize: function(event, ui) {
            //some code
        }
    }); 
```

那么添加后如何绑定它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:29:43.230

您可以在添加 div 并将事件绑定到它之后尝试遍历它。

`$('body').append(crazy_frame).children('#resizable').draggable()...`

现在可能发生的`$("#resizable").draggable()...`是在加载页面时绑定事件，但在页面加载后附加内容。

~~您也可以尝试使用 `on()`带有选择器的 jQuery 来始终绑定事件，或者`live()`/`delegate()`如果您使用的是 1.7 之前的 jQuery。~~ 初始点击如何附加到对象上没有问题，因此这无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:28:35.650

正如你所说的绑定是你的答案。您将单击事件绑定到父元素，它将监视任何通过的单击事件。目前，您仅在可用元素上设置点击事件。

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

来自他们网站的样本：

```
$('#foo').bind('click', function() {
  alert('User clicked on "foo."');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:11:08.953

你的问题还不够清楚。

我认为这就是您要寻找的东西：

如果你想添加一个框架，你需要构建一个，所以你必须附加这个：

```
<div id='crazy_frame' style='width:200px;height:100px;background-color:red'></div> 
```

我给出了一些尺寸和颜色以便对我可见，当然您可以更改尺寸和颜色。

那么如果你想给这个“框架”一个可拖动的属性，你只需要调用可拖动的方法。

```
<script type="text/javascript">
$(document).ready(function(){
 $('#add_frame_by_button').click(function(){
  $('body').append("<div id='crazy_frame' style='width:200px;height:100px;background-      color:red'></div>");
  $('#crazy_frame').draggable();
 });    

});

</script> 
```

如果你这样做，你将不得不很快面对一个问题。告诉我我是否正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:03:46.397

我认为您正在寻找 jQuery 的`.on()`功能。其他一些答案已经提到了该`.live()`功能，但从 jQuery 1.7 开始，该功能已被弃用。

该`.on()`函数将让您侦听从子元素冒出的特定事件并做出适当的响应。如果将该`.on()`方法应用于将包含动态添加的 's 的元素，则可以定义一个函数，该函数将在该元素内`<div>`的特定事件冒泡时被调用。`<div>`

此外，您是否有理由不能简单地在处理程序本身`.resizable()`中应用各种`.draggable()`功能？`.click()`

# c++ - C++ operator= 重载有选择地工作

> ID：11158140
> 
> 赞同：1
> 
> 时间：2012-06-22T14:26:08.410
> 
> 标签：c++

我似乎有一个可以按情况工作的赋值运算符。我有一个 Vector2 类，它包含两个浮点数，x 和 y。这是 operator= 方法：

```
Vector2 Vector2::operator=(const Vector2 &right)
{
    Vector2 result;
    result.x = right.x;
    result.y = right.y;
    return result;
} 
```

在我拥有的实体的 onMove 方法中：

```
Vector2 newPosition = position + (speed * getSpeedFactor());

if (posValid(newPosition))
{
    position.x = newPosition.x;
    position.y = newPosition.y;
    //position = newPosition;
} 
```

其中 speedFactor 取决于帧率，而 posValid 是检查一个点是否在墙上或其他东西中。位置和速度也是 Vector2 的。第一个任务：

```
Vector2 newPosition = position + (speed * getSpeedFactor()); 
```

工作，并且使用代码，我得到了预期/预期的行为，但是

```
position = newPosition; 
```

无论是单独使用还是在 .x 和 .y 分配之前或之后，都没有效果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T14:28:13.790

你`operator=()`错了，它应该修改当前对象，而不是你创建的额外对象

```
Vector2& Vector2::operator=(const Vector2 &right) 
{
  x = right.x; 
  y = right.y; 
  return *this; 
} 
```

*注意*：返回类型是一个引用，并且您正在返回对当前对象的引用，而不是它的副本（或您的代码中的新对象）。

它起作用的原因

```
Vector2 newPosition = ...; 
```

是因为这不是*默认构造+赋值*，而是*复制构造*调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:30:31.227

你实际上并没有分配给`position`. 您正在制作一个临时`Vector2`对象，分配给它，然后隐式复制它并返回副本。您永远不会修改实际对象。

你需要类似的东西：

```
Vector2& Vector2::operator=(const Vector2 &right)
{
    x = right.x;
    y = right.y;
    return *this;
} 
```

# asp.net-mvc-3 - 避免 Visual Studio 在 ID 字段中添加下划线

> ID：11158144
> 
> 赞同：0
> 
> 时间：2012-06-22T14:26:15.490
> 
> 标签：asp.net-mvc-3

假设我有一个名为 Project 的模型，其属性为 StartDate、EndDate 等。如果我有一个接受模型的编辑器视图，则生成的 HTML 的 id 为 StartDate、EndDate 但是如果我有一个传递给编辑器视图的 ProjectViewmodel，一个包含 Project 模型，然后编辑器生成带有标签的 HTML 作为 Project_StartDate。有没有办法避免下划线。这很烦人，因为假设您有一个访问特定 ID 的 jquery，并且您更改了视图的模型，您还需要记住更改 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:28:57.190

用你自己的 ID 覆盖它

```
@Html.TextBoxFor(model => model.Project.StartDate, new { id = "StartDate" }) 
```

这将产生一个输入`id="StartDate"`

# cloud-foundry - vmc 隧道无法启动客户端

> ID：11158153
> 
> 赞同：0
> 
> 时间：2012-06-22T14:26:52.133
> 
> 标签：cloud-foundry

我无法在我的 CloudFoundry (api.vcap.me) 安装上建立任何服务。Tunelling 在 api.cloudfoundry.com 中运行良好。我已将 ruby​​ 和 vmc 升级到 ruby​​ 1.9.2p290 和 vmc 0.3.18，但问题仍然存在。

对于 mongodb 和 mysql，我得到相同的错误。两个客户端都在我的 PATH 中。

C:>vmc 隧道

1：MongoDB测试

2：mysql测试

要隧道到哪个服务？：2 获取隧道连接信息：OK

服务连接信息：用户名：u42J7Gge9HdRW 密码：pUfd7tnVA4Ps8 名称：d5afd08fb7fe9423f93ae6883a586c847

在端口 10000 上启动到 mysql-test 的隧道。1：无 2：mysql 3：mysqldump 您想启动哪个客户端？：2 启动 'mysql --protocol=TCP --host=localhost --port=10000 --user =u42J7Gge9HdRW --密码=pUfd7tnVA4Ps8 d5afd08fb7fe9423f93ae6883a586c847'

**错误 2013 (HY000)：在“读取初始通信数据包”时失去与 MySQL 服务器的连接，系统错误：0 错误：“mysql”执行失败；它在你的 $PATH 中吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:58:57.130

新的 CloudFoundry 服务器已安装在具有 Ubuntu 10 的类似机器上。使用 cadlecott 进行调谐现在可以正常工作。问题仍然存在于以前的 CF 服务器上。

# php - 在 url 中传递多个值

> ID：11158156
> 
> 赞同：1
> 
> 时间：2012-06-22T14:27:00.283
> 
> 标签：php, mysql

有一个包含业务线索列表的数据库。他们都被赋予了新的、热的、冷的等状态。我在页面上有链接，只显示新的或只有热的工作正常，但我似乎无法让一个工作显示全部。默认视图是新建。这是我正在使用的，在此先感谢您的帮助。

```
$query = "SELECT * FROM contacts WHERE contactstatus = 'New' ORDER BY date DESC";

if(isset($_GET['contactstatus'])
&& in_array($_GET['contactstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed')))
{      
$status = $_GET['contactstatus'];   
$query = "SELECT * FROM contacts WHERE contactstatus ORDER BY date DESC";  
}

if(isset($_GET['contactstatus'])
&& in_array($_GET['contactstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed')))
{      
$status = $_GET['contactstatus'];   
$query = "SELECT * FROM contacts WHERE contactstatus = '".$status."' ORDER BY date DESC";  
} 
```

我用来获取所有内容的网址是：

www.mydomain.com/leads.php?contactstatus=New&contactstatus=Hot&contactstatus=Cold&contactstatus=Rejected&contactstatus=Closed

我也试过：

www.mydomain.com/leads.php?contactstatus=New&Hot&Cold&Rejected&Closed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:40:57.297

当您尝试通过地址传递相同的变量时，您是否尝试过使用数组，否则您将覆盖 get 变量。

像这样[www.mydomain.com/leads.php?contactstatus[]=New&contactstatus[]=Hot&contactstatus[]=Cold&contactstatus[]=Rejected&contactstatus[]=Closed](http://www.mydomain.com/leads.php?contactstatus%5b%5d=New&contactstatus%5b%5d=Hot&contactstatus%5b%5d=Cold&contactstatus%5b%5d=Rejected&contactstatus%5b%5d=Closed)

```
$status_types = Array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed');

$statuses = Array();
$query  = 'SELECT * FROM contacts ';
for($i=0, $j=count($_GET['contactstatus']); $i<$j; $i++){
    if(in_array($_GET['contactstatus'][$i], $status_types)){
        if($i==0)
            $query.= " WHERE contactstatus IN (";

        $statuses[] = $_GET['contactstatus'][$i];
        $query .= "'".$_GET['contactstatus'][$i]."'";
        if($i==($j-1))
            $query .= ")";

    }
}
$query .= ' ORDER BY contacts.date DESC'; 
```

如果没有通过任何联系状态，我已将其设置为自动**全选。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:31:45.633

第一个 if 看起来与第二个相同。您还缺少第一个查询中的 WHERE 限定符。

如果要获取所有联系人，请更改此设置

```
$query = "SELECT * FROM contacts WHERE contactstatus ORDER BY contacts.date DESC"; 
```

对此

```
$query = "SELECT * FROM contacts ORDER BY contacts.date DESC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:34:04.587

难道你不能将你的 php 页面的默认行为设置为全部显示吗？也就是说，如果没有`$_GET`设置参数（在 URL 中），您的页面只会从数据库中选择所有潜在客户。

```
$query = " SELECT * FROM `contacts` ORDER BY date DESC";
$result = $mysqli->query($query);

if($result && $result->num_rows > 0){
    // do something with all leads
} 
```

为了处理特定的状态，我们有

```
if( isset($_GET['contactstatus']) ){
// select leads based on status 
} 
```

如果要将多个值传递给单个 GET 参数，请参阅[在 URL 中为同一个 GET 变量传递多个值](https://stackoverflow.com/questions/9941553/passing-multiple-values-for-same-get-variable-in-url)

# ruby-on-rails - 在 Rails 2 上使用 ActiveRecord 构建此语句

> ID：11158157
> 
> 赞同：0
> 
> 时间：2012-06-22T14:27:00.920
> 
> 标签：ruby-on-rails, activerecord, join

假设你有这 3 个模型：Store、Province 和 Region

这些关系发生在哪里：

店铺所属省份

省份所属地区

通过省存储 has_one 地区

好吧，我想在 ActiveRecord 中构建这样一个 SQL 查询：

```
SELECT a.*, c.* FROM stores AS a
LEFT OUTER JOIN provinces AS b ON a.province_id = b.id
LEFT OUTER JOIN regions AS c ON b.region_id = c.id
ORDER BY c.name, a.name 
```

但我仍然找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:28:01.823

一段时间后，我找到了解决方案：

```
Store.all :joins => [:province => :region], :order => "regions.name ASC, stores.name asc" 
```

# android - 通过电子邮件发送 .csv 文件是否有效？

> ID：11158160
> 
> 赞同：0
> 
> 时间：2012-06-22T14:27:08.810
> 
> 标签：android, database, eclipse, sqlite, csv

所以我对android编程相当陌生。我有一个数据库，我希望能够从存储在 android 设备上的数据库中获取信息，将其存储在 .csv 文件中，将其附加到电子邮件中，然后将其发送给接收者。然而，这是我第一次使用 .csv 文件，我想确保我做对了。

我看了这个页面：[Convert database .db file into .csv](https://stackoverflow.com/questions/8665057/convert-database-db-file-into-csv)

但我不确定使用我当前的代码实现这个的正确方法，或者即使这是我正在寻找的。

我也尝试使用一点：[OpenCSV](http://opencsv.sourceforge.net/)

并注意到有关将 SQL 转储到 .csv 的部分，这是实现它的最佳方法吗？任何和所有的帮助和建议将不胜感激，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:33:14.633

是的 CSV 可以通过电子邮件发送，但是，除非最终用户知道如何在 excel 中打开它们，否则 CSV 可能很难做任何事情。（或类似的东西）。

它，会，只是，看起来，像，这个，:),

接收者只是成为公众的一员吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:24:47.743

如果您不太热衷于附加 csv 文件，那么将一个大字符串转储到电子邮件正文中并将其发送给某人真的很容易。您没有编写本地文件并附加它的问题。

发送电子邮件时，您只需添加：

emailIntent.putExtra(Intent.EXTRA_TEXT, emailBody);

其中 emailBody 是一个大字符串，其中包含您的数据。

至少这可能是一个临时解决方案？

这是一个小代码，可以发送包含一大串文本的电子邮件。

```
 String emailSubject = " Sent from my Android";
        String emailBody = "";

        // create a big String that has your data in it called emailBody

        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("text/plain");

                           // send it to yourself for testing
        // i.putExtra(Intent.EXTRA_EMAIL , new
        // String[]{"myemailaddress@fortesting.com"});

        i.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
        i.putExtra(Intent.EXTRA_TEXT, emailBody);

        try {
            startActivity(Intent.createChooser(i, "Send mail..."));
        } catch (android.content.ActivityNotFoundException ex) {
            Toast.makeText(HistoryActivity.this,
                    "There are no email clients installed.",
                    Toast.LENGTH_SHORT).show();
        } 
```

# php - 在 PHP 中使用 imap 函数，无需重新构建和重新安装

> ID：11158162
> 
> 赞同：5
> 
> 时间：2012-06-22T14:27:21.843
> 
> 标签：php, installation, imap

我希望最新的 PHP 版本可以在新的 Macbook 上使用，但是默认情况下 php 安装不包括 imap 函数。我需要一个特定的函数 - 即“imap_rfc822_parse_headers”函数，但我不想为此重新编译、构建和安装 PHP（更不用说预先安装 c-client 和 imap.so 所需的努力） . 我担心复杂的程序（我发现每个程序都有些不同）可能会弄乱我当前的安装，这绝不是容易设置的。

有没有其他更简单的方法将 imap 安装到 PHP 中？在相关的说明中，是否有基于类的替代我需要的功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T15:07:36.613

我终于找到了解决方案。大部分都在这里： [http ://www.september28.co.uk/blog/2011/11/24/php-imap-support-in-mac-os-x-lion-without-recompiling-php/](http://www.september28.co.uk/blog/2011/11/24/php-imap-support-in-mac-os-x-lion-without-recompiling-php/)

我的机器是 2011 年末的 Macbook Pro，带有 MacOSX 10.7.4、PHP 5.4。通过这些说明安装：[http ://www.hirmet.com/mac-os-x-lion-upgrade-to-php-5-4](http://www.hirmet.com/mac-os-x-lion-upgrade-to-php-5-4)

对于具有相似或相同设置的用户，以下是分步说明：

从这个 url 下载 imap 源，关注最近日期不以“Z”结尾的那个：ftp: [//ftp.cac.washington.edu/imap/](ftp://ftp.cac.washington.edu/imap/)

解压，进入文件夹，运行以下命令：

```
$ make osx EXTRACFLAGS="-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp" 
```

上面的命令会向您抛出一堆警告，但应该会成功完成，这与 september28 博客文章中最初建议的命令不同。

接下来，执行以下操作：

```
$ sudo cp c-client/*.h /usr/local/include/
$ sudo cp c-client/*.c /usr/local/lib/
$ sudo cp c-client/c-client.a /usr/local/lib/libc-client.a 
```

完成此操作后，如果您像我一样进行了自定义升级（根据答案中的第二个链接），请进入下载的 php 源文件夹并为您的系统构建 imap.so 扩展。如果您没有构建自定义版本，只需下载您安装的版本的 PHP 源代码，然后使用它，没关系。

```
$ cd ~/Downloads/Php-5.4.4/ext/imap
$ phpize
$ ./configure --with-imap==/usr/local/imap-2007 --with-kerberos --with-imap-ssl
$ make 
```

完成后，请执行以下操作：

```
$ sudo cp modules/imap.so /usr/lib/php/extensions/no-debug-non-zts-20100525/ 
```

...或者如果您的 PHP 扩展文件夹不同，请将其放入（您可以在 phpinfo(); 中查看位置）

重新启动 apache，你应该准备好了。

```
$ sudo apachectl restart 
```

# windows-8 - Visual Studio 2012 中的 System.ExecutionEngine 异常

> ID：11158163
> 
> 赞同：0
> 
> 时间：2012-06-22T14:27:24.307
> 
> 标签：windows-8

我正在开发 Windows 8 发布预览 Metro 风格 xaml/C# 应用程序，我正在创建一个播放器应用程序，我的应用程序中断并抛出一个

“未知模块中发生未处理的 System.ExecutionEngine 异常”并且不会产生堆栈跟踪。

我不知道应用程序破坏了代码的哪一部分，并且异常发生在运行时

我正在使用 Visual Studio 2012 RC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:33:23.043

1.  在 C# 应用程序的任何位置设置断点（*在*崩溃发生之前 - 程序启动很好）。

2.  调出“调用堆栈窗口”

3.  当异常发生时，你应该中断。

    当你中断时，你可以检查任何你想要的东西——包括调用堆栈，以及调用它的代码。

# android - Android 免费和付费的不同功能

> ID：11158164
> 
> 赞同：2
> 
> 时间：2012-06-22T14:27:27.440
> 
> 标签：android

我知道开发免费和付费版本的应用程序的最佳方式是拥有一个包含程序主要部分的库项目。然后免费和付费项目将使用这个库项目。这允许免费和付费项目拥有不同的资源。

但是，我的问题是我们如何限制免费应用程序中的功能（或为付费应用程序扩展它）？例如，我的免费应用程序只能访问数据库表中的最新行，而付费应用程序可以访问所有行。

一种方法是在资源中设置一个布尔标志，将付费设置为 ​​true，免费设置为 ​​false。在运行时，库项目检查布尔标志并相应地改变行为。然而，这似乎很容易被黑客入侵以应对任何潜在的攻击。有没有更好的方法？

使用一个免费的应用程序然后使用应用内计费来解锁专业功能会更容易吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:53:43.593

恕我直言，Java/Android 在这种情况下并不容易。理想情况下，您应该拥有一个代码库，并且能够随意编译付费或免费版本。免费版本将禁用关键方法/类，因此没有人可以修改数据库或 xml 来启用应用程序的全部功能。

一种方法是使用条件编译，Java 也不支持。但是，有一些 Ant 任务可以做到这一点，例如[http://prebop.sourceforge.net/doc.html](http://prebop.sourceforge.net/doc.html)。您可以在代码中添加如下内容：

```
/* $if paid_version$ */
public void paid_method() {

}
/* $endif$ */ 
```

如果您正在构建的 ant 目标没有定义变量paid_version，上述代码将被删除。

如何设置 prebop 是另一个话题，它很复杂，但值得拥有一个单一的代码库。

**2013 年 5 月更新**：基于 Gradle 的新 Android 构建系统使构建付费和免费 APK 稍微容易一些。有关“构建变体”的主题，请参阅[Android 工具](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants)网站。简而言之，您可以像这样构建您的源代码：

```
/src/main/
/src/paid/
/src/free/ 
```

所有共享代码驻留在 中`/src/main`，付费代码驻留，`/src/paid`免费代码驻留`/src/free`。构建系统将为您创建付费和免费 APK。但是，仍然缺少的一项功能是在源代码本身中进行条件编译的能力。在撰写本文时，Gradle 构建工具仍处于 beta 状态，因此希望它会在最终版本中添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:36:51.107

永远不要在 Res 或 SharedPrefs 中保存任何用于指定应用程序是否已付费的标志。有根电话可以访问这些并可以修改它们。我也遇到了这个问题，写了两个单独的应用程序（复制了付费的应用程序并删除了一些方法，添加了广告等）。这是最简单的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T03:57:37.433

IMO 从单一来源创建多个应用程序版本的最佳方法*是*使用库项目。

我最近尝试过这个，它似乎工作得很好。尽管我没有尝试将基于此的代码发布到 Google Play，但我已经创建了单独的应用程序，它们可以在测试设备上同时运行，并带有自己的图标。

由于 Android 上的单独应用程序必须各自具有不同的包名称，因此配置单独行为的最简单方法是在库中测试该包名称，以查看它当前是在免费版本还是付费版本中运行。该测试可以在库项目中定义的自定义应用程序派生对象中进行；可以通过调用 getPackageName() 获取包名。

您的免费和付费应用程序至少可能只需要一个 AndroidManifest.xml 文件和一些资源（例如，区分免费和付费的应用程序图标）。

在两个应用程序的清单中，您将希望应用程序元素的 android.name 属性设置为自定义应用程序派生类（如库中定义）的完整路径。当然，您会希望将清单元素本身的 package= 属性设置为一个不同的包，该包以 .free 或 .paid 之类的结尾，用于相应的应用程序。然后清单中的活动对象可以有一个 android:name 属性，该属性设置为库中正确的 Activity 派生类（使用完整路径）。

然后，启用付费功能的代码将简单地调用自定义应用程序对象中测试包的方法，解析包名称，并在此基础上决定是否运行付费或免费版本，然后启用或禁用付费功能因此。

有一个非常有用的例子（虽然有点老，但仍然相关）完整的代码，在这里：

[https://github.com/donnfelker/FullAndLiteVersionSharedLibrary/blob/master/FooLibrary/src/com/example/foolibrary/FooLibraryApplication.java](https://github.com/donnfelker/FullAndLiteVersionSharedLibrary/blob/master/FooLibrary/src/com/example/foolibrary/FooLibraryApplication.java)

# php - 移动上传的文件失败

> ID：11158165
> 
> 赞同：1
> 
> 时间：2012-06-22T14:27:33.180
> 
> 标签：php

因此，我刚刚将所有内容从本地主机移动到新的在线服务器以使其运行。显然肯定会有一些问题，但我无法解决这个问题。我不能上传任何文件，但我可以在本地主机上。我与其中一家服务器公司的支持团队进行了交谈，我们检查了所有 php.ini、htaccess 等，一切都很好。上传最大值和帖子最大值远高于所需值。上传文件夹具有所有正确的权限。移动上传的文件完全失败，我不知道为什么。

这是图片上传脚本（很重要的部分）：

```
$actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
$tmp = $_FILES['photoimg1']['tmp_name'];
if(move_uploaded_file($tmp, $path.$actual_image_name))
{

    mysql_query("UPDATE members SET image1='../imageuploads/$actual_image_name' WHERE username='$username' AND password ='$pass' AND artist='Y'");

    echo "<p1><img src='../imageuploads/".$actual_image_name."'  class='imageright1'></p1>";

}else
    echo "<p1>failed</p1>"; 
```

我得到的错误信息是这样的：

> PHP 警告：move_uploaded_file(../imageuploads/13403748125_277695398952342_104081122980438_707146_2014948057_n.jpg)：无法打开流：/var/www/vhosts/lvps217-199-163-188.vps.uk 中没有这样的文件或目录/imageupload/ajaximage1.php 在第 39 行，referer：http://217.199.163.188/artistupdate.html

可能有一些非常简单的事情我没有做过，但我一生都无法弄清楚它是什么。图片上传脚本相当简单，但音频上传脚本有点复杂，所以没有包含它。无论如何，他们都从同一个地方得到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:30:57.210

您的更新查询正在 using `../imageuploads`，但您为 move 命令生成的路径是 simple `imageuploads`，因此您可能没有将 move 命令指向正确的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:34:45.390

你检查过文件夹权限吗？

# vb.net - 自定义控制器工厂找不到出口

> ID：11158172
> 
> 赞同：1
> 
> 时间：2012-06-22T14:27:40.097
> 
> 标签：vb.net, asp.net-mvc-3, lambda, mef, controller-factory

它正在寻找的 controllerName 是正确的名称，并且我知道容器中包含具有匹配名称的导出。由于某种原因，它没有找到它。我正在尝试从我放在项目中指定文件夹中的 dll 导入。它总是会尝试返回默认控制器，但找不到 dll 控制器，因为它不在主项目目录中。我知道 controllerFactory 找到了 DLL，但没有正确读取它。

这是我的 CreateController 函数：

```
Public Function CreateController(requestContext As System.Web.Routing.RequestContext, 
        controllerName As String) As System.Web.Mvc.IController Implements 
        System.Web.Mvc.IControllerFactory.CreateController

    Dim controller As IController = Nothing

    If controllerName IsNot Nothing Then

        Dim controllerClassName As String = controllerName & "Controller"

       Dim controllers As IEnumerable(Of Lazy(Of IController)) = Me.container.GetExports(Of IController)()

        Dim controllerExport As Lazy(Of IController) = controllers _
                                             .Where(Function(c) c.Value.GetType.Name = controllerName) _
                                             .FirstOrDefault()

        If export IsNot Nothing Then
            controller = export.Value
        End If

    End If

    If controller Is Nothing Then
        Return Me.defaultControllerFactory.CreateController(requestContext, controllerName)
    End If

    Return controller

End Function 
```

**如果您需要任何澄清，请告诉我！谢谢！**

编辑：返回 Me.defaultControllerFactory.CreateController(requestContext, controllerName) 上的错误消息是 HttpException 未被用户代码处理。找不到控制器路径“CUContractNumberPlugin/ChangeCUNumber”或未实现 IController。

这是它正在谈论的控制器。

```
<Export(GetType(IController)), ExportMetadata("Name", "CUContractNumberPlugin")> _
Public Class CUContractNumberPluginController
    Inherits Controller

    <Import(GetType(IHost))>
    Private m_hostApp As IHost

    Public Function Index() As ActionResult
        Return View()
    End Function

    Function ChangeCUNumber(strCUNumber As String) As ActionResult
        m_hostApp.CUNumber = strCUNumber
        Return View("Index", m_hostApp)
    End Function

End Class 
```

当我将部分视图加载到我的主视图中时，它会被调用。部分观点是这样的：

```
@Using (Html.BeginForm("ChangeCUNumber", "CUContractNumberPlungin"))

    @Html.TextBox("strCUNumber")

End Using 
```

# objective-c - 为属性设置除 0 以外的默认值

> ID：11158174
> 
> 赞同：3
> 
> 时间：2012-06-22T14:27:53.790
> 
> 标签：objective-c, cocoa-touch, properties, initialization

我`int`有财产

```
@property(nonatomic) int stackTop; 
```

当它被合成时，它的默认值为 0。我想将此默认值设置为 -1。

我尝试像这样覆盖setter方法

```
@sythesize stackTop = _stackTop;

-(void)setStackTop:(int)stackTop
{
    _stackTop = -1;
} 
```

然后初始值为-1而不是0，但是当`stackTop`程序中的变量发生变化时它不会改变。例如，我有`self.stackTop++;`，但它没有增加。使用非覆盖的 setter 方法，该语句确实会更改值。我究竟做错了什么？解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:29:55.493

在您指定的初始化程序中将其设置为 -1。

**编辑：**
针对您的问题，指定的初始化程序是创建类实例时必须始终调用**的一个初始化程序。**它是唯一`[super init];`被调用的地方（它初始化你从父类继承的类的一部分），所有其他初始化程序必须调用这个指定的初始化程序，以确保正确设置类并且所有默认值都是设置，包括您要设置的那些。

在您的情况下，如果您没有其他以 开头的方法`init`，那么您应该在`-(id)init`方法中执行此操作。正如我发布答案以来其他一些人所展示的那样，它看起来像这样：

```
-(id)init {
    if (self = [super init]) {
        _stackTop = -1;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:30:17.457

在你的 init 方法中设置它。

例如

```
-(id)init
{
 self = [super init];
 if(self)
 {
   _stackTop = -1;
 }
 return self;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:31:06.023

您应该在[*指定的初始化程序*](http://objectivecc.blogspot.com/2012/04/designated-initializer.html)中设置它。例如，如果您指定的初始化程序是无参数的，您可以这样做：

```
-(id)init {
    if (self = [super init]) {
        _stackTop = -1;
    }
    return self;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:30:25.617

在您创建（或正在使用）的类的 init 方法中，添加以下行：

```
self.stackTop = -1; 
```

这将在创建对象时初始化您的属性。

然后，您可以摆脱自定义设置方法。

# xcode - Salesforce 移动（混合）ios 模板中的 PhoneGap

> ID：11158177
> 
> 赞同：0
> 
> 时间：2012-06-22T14:28:02.187
> 
> 标签：xcode, cordova, salesforce

创建混合 iOS 应用程序时，我看到他们正在使用 PhoneGap。PhoneGap 是否没有为多个平台生成本机代码 - 如果是这样，那么我不明白“phonegap-1.2.0”在混合 iOS 项目中做了什么？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:36:22.120

ISO 的 PhoneGap 插件是一种从 javascript 调用本机代码的方法：

[http://wiki.phonegap.com/w/page/36752779/PhoneGap%20Plugins](http://wiki.phonegap.com/w/page/36752779/PhoneGap%20Plugins)

# php - 如何根据对象的真实类名运行代码？

> ID：11158179
> 
> 赞同：1
> 
> 时间：2012-06-22T14:28:09.043
> 
> 标签：php, oop

我正在浏览一个对象列表，它们都具有相同的父类，但它们可能是许多子类之一的实例。根据对象的真实类型，我想执行略有不同的操作。

如何根据对象类型运行不同的代码块？

在 Java 中，我会用我想使用的每种类型重载一个处理函数，但 PHP 不允许这样做。

**背景：** 戈登的评论。

我们正在从一组对象构建表单。一个超类 Component，它被扩展以表示特定类型的表单元素。`TextInput extends Component`并且该组件具有容纳其他组件的能力。我们不希望他们对自己的实际代表负责。

我们现在正在努力构建 HTML，但我们可能希望使用它们来构建 .PDF 或其他格式。

所以我们有代码通过组件，并递归地通过它包含的组件。根据组件的类型，我们需要创建不同的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:31:04.887

1.  创建一个[抽象类](http://php.net/manual/en/language.oop5.abstract.php)来代表对象的所有常见功能，并规定它们必须具有的其他方法，这样您就可以确保每次都使用相同的接口（这些称为[抽象方法](http://www.primitivetype.com/articles/php_5_abstract_classes_and_methods.php)）。

2.  然后为每种特定类型的对象创建子类。它们*必须*实现主抽象类中的所有抽象方法。

3.  然后使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)根据确定对象类型（又名子类​​）的任何标志动态创建正确的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:31:47.007

像这样试试

```
function objectProcessor_A($o) {}
function objectProcessor_B($o) {}
function objectProcessor_C($o) {}

foreach($objects AS $o) {
    if(function_exist("objectProcessor_" . get_class($o)))
        call_user_func("objectProcessor_" . get_class($o), $o);
} 
```

现在，我认为，最好的解决方案是使用继承。不能改变 $o 的行为/库代码？比使用工厂和添加方法作为匿名函数：

```
class OFactory {
    static function getO($type) {
        $r = new $type();
        if($type === "A") {
            $r.processor = function() {...};
        } else if($type === "B") {
            $r.processor = function() {...};
        } else if($type === "C") {
            $r.processor = function() {...};
        }
        return $r;
    }
}

$a = OFactory::getO("A");
call_user_func($a->processor);

$b = OFactory::getO("B");
call_user_func($b->processor); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:33:21.950

利用

```
if($myobject instanceof class1){
}elseif($myobject instanceof class1){
} 
```

或者

```
switch(get_class($myobject)){
    case 'class1':
       break;
    case 'class2':
       break;
} 
```

另外，请确保您不要违反开放/封闭原则。如果你把那部分代码放在一个类中而不是控制器的特定部分，你最终会破坏代码的一个重要的可重用性特性：

> 开/关原则
> 
> 你没做过插件系统吗？如果您这样做了，我确定您没有要求您的用户在代码中硬编码加载行来处理该插件，对吗？
> 
> 通常来说，你希望你的类是可扩展的，而不需要改变父类。扩展应该是一个开放的原则，添加更多代码应该像扩展一样容易，但你永远不必修改父类。
> 
> 因此，在父类或另一个类中添加一个开关来处理该类的所有可能版本打破了开放原则，因为用户必须更改类以添加更多功能......

# c# - 有什么方法可以跳过 GeoNear() MongoDB 方法中的一些文档？

> ID：11158183
> 
> 赞同：2
> 
> 时间：2012-06-22T14:28:30.813
> 
> 标签：c#, mongodb, mongodb-.net-driver

假设我收集了具有指定经度和纬度的文档。

```
type is specified:

{
    id: ObjectId,
    location : {double, double}, /*array, that contains
                                   just longitude and latitude*/
    someUsefulData : string
} 
```

我需要获取位于某个位置周围 50 英里区域内的所有文件。为此，我正在使用这样的方法：

```
// set GetNear() options
var options = new GeoNearOptionsBuilder()
    .SetMaxDistance(50) // meens 50 miles
    .SetSpherical(true);

// create conditions query
var conditions = Query.NE("someUsefulData ", $ne : {null});

// execute GetNear()
var geoNearResult = collection
    .GeoNear(conditions, longitude, latitude, limit, options); 
```

这部分效果很好。

但。

我需要从一开始就跳过一些结果——对于经典的分页实现。也许，有人知道如何做到这一点，考虑到 GeoNear() 返回 GeoNearResult - 这不是 MongoCursor，所以我不能使用 SetSkip(20)，例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:31:50.643

我建议将限制设置为 limit+20 并跳过应用程序中的前 20 个文档。此外，您可以投票给[https://jira.mongodb.org/browse/SERVER-3925](https://jira.mongodb.org/browse/SERVER-3925)，这将为 geoNear 命令添加一个原生跳过选项。

# build - NSS-signtool 功能失败：安全库？

> ID：11158187
> 
> 赞同：0
> 
> 时间：2012-06-22T14:28:48.487
> 
> 标签：build, firefox-addon, certificate, code-signing, signing

尝试使用此行签署 Firefox 扩展时：

> nss-signtool -k "TestCert" -d .keys/cert_db/ -p "test" -X -Z ./dist/test.xpi ./build/test/

我收到以下错误，仅此而已：

> signtool：功能失败：安全库：数据库错误。

我使用以下说明创建了数据库并安装了证书：https: [//www.mozdevgroup.com/docs/pete/Signing-an-XPI.html](https://www.mozdevgroup.com/docs/pete/Signing-an-XPI.html)

有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:52:11.583

哎呀...我犯了一些语法错误...应该是“./keys/cert_db”而不是“.keys/cert_db”

我相信修好了！

# macos - 由于 intltools，无法为 Mono Develop 运行配置

> ID：11158188
> 
> 赞同：0
> 
> 时间：2012-06-22T14:28:54.757
> 
> 标签：macos, mono, monodevelop

我从 Git下载了最新版本的[MonoDevelop Unity 。](https://github.com/Unity-Technologies/monodevelop)在此之前，我对来自 Git的[MonoDevelop](https://github.com/mono/monodevelop)的香草版本进行了同样的尝试。

我尝试使用以下内容编译 MonoDevelop：`./configure`

我尝试了包括和不包括所有包：

```
Select the packages to include in the build for the profile 'default':

1\. [X] main
2\. [X] extras/JavaBinding
3\. [X] extras/ValaBinding
4\. [X] extras/MonoDevelop.Database
5\. [X] extras/MonoDevelop.Debugger.Gdb
6\. [X] extras/PyBinding
7\. [X] extras/MonoDevelop.MonoMac
8\. [X] extras/MonoDevelop.MeeGo 
```

我开始对自己说“这太棒了！”。然后是路障：

```
Configuring package: main
-------------------------
Configuration options: 
Running aclocal  ...
Running automake --foreign  ...
Running autoconf ...
Running ./configure --enable-maintainer-mode --enable-compile-warnings --prefix=/usr/local ...
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking how to create a ustar tar archive... gnutar
checking whether to enable maintainer-specific portions of Makefiles... yes
checking for mono... /usr/bin/mono
checking for gmcs... /usr/bin/gmcs
checking for pkg-config... /usr/bin/pkg-config
checking for msgfmt... no
configure: error: You need to install msgfmt from intltool 
```

我已经尽力尝试手动安装 intltool，但我没有遇到任何运气。

如何修复此“配置错误”？`configure: error: You need to install msgfmt from intltool`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:30:32.417

事实证明我必须安装`gettext`（通过[这个答案](https://stackoverflow.com/a/8785138/282052)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:56:22.220

如果您从源代码构建 MonoDevelop，则需要 Mono MDK 包，而不是 MRE 包。

请参阅[http://monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X](http://monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X)

不确定 Unity 的版本，他们维护一个旧的分叉，我不知道他们改变了什么。

# perl - 如何解决“DBD::Pg::st 执行失败：错误：准备好的语句已存在”错误

> ID：11158190
> 
> 赞同：0
> 
> 时间：2012-06-22T14:28:57.420
> 
> 标签：perl, bash, dbd

一点背景知识：我有一个 perl 脚本，它在循环内执行许多操作。

在循环内部，我创建了一个准备好的语句，如下所示：

```
 // inside loop
  my $statement = "select xxxx from zzzzzz where $foobar;";
  my $query = $connect->prepare($statement);
  $query->execute(); 
```

每次循环完成时，$foobar 都会更新为一个新值，这就是为什么我想每次运行都更改查询，但是当我尝试这样做时出现错误。

运行脚本时出现此错误：

```
 DBD::Pg::st execute failed: ERROR:  prepared statement "xxxxxxxxxxxxx" already exists at 
```

因为我传递了一个每次循环运行时都会更新的变量，并且假设我需要使用这个准备好的语句，我该如何解决这个错误？

感谢您的时间。

**编辑：**

对于将来遇到此问题的人，请在此处查看：

我试图得到

```
my $sth = $dbh->prepare('select interval ?'); 
```

[http://gborg.postgresql.org/pipermail/dbdpg-general/2006-January/001972.html](http://gborg.postgresql.org/pipermail/dbdpg-general/2006-January/001972.html)

[http://gborg.postgresql.org/pipermail/dbdpg-general/2006-February/002007.html](http://gborg.postgresql.org/pipermail/dbdpg-general/2006-February/002007.html)

列出一些解决方法：通过 pg_server_prepare 标志关闭服务器端准备或使用例如。'?::interval' 而不是 'interval ?'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:35:24.063

将准备好的语句移出循环。如果您有一个变量需要传递给准备好的语句，您将使用`?`标记将变量传递给准备好的语句。这是一个例子：

```
my $stmt = $dbh->prepare('SELECT * FROM table WHERE id = ?');
foreach ... {

    my $var = <something>;
    $stmt->execute($var);
} 
```

在这里，prepared statement被创建一次，`?`用于传入变量。当您调用执行时，您将变量作为参数传递。

# c# - 如何在 xaml 中的复选框对象上禁用破折号 + 等于？

> ID：11158195
> 
> 赞同：3
> 
> 时间：2012-06-22T14:29:02.147
> 
> 标签：c#, wpf, xaml, mvvm, checkbox

我有一个数据模板 xaml，目前在报告屏幕上看起来像这样

```
 <CheckBox>
        <StackPanel>
            <TextBlock Text="{Binding Path=DisplayName}" FontWeight="Bold" Margin="0 0 0 5" />
            <RadioButton Content="All Pages" IsChecked="{Binding Path=AllPages}" Margin="0 0 0 5" />
            <RadioButton>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Pages: " Margin="0 3 5 0" />
                    <TextBox Width="130" Text="{Binding Path=SelectedValue}" />
                </StackPanel>
            </RadioButton>
        </StackPanel>
  </CheckBox> 
```

我想知道，如何禁用使用“-”和“=”作为检查和取消选中的默认复选框行为。

我想允许该文本框中的用户为页面范围输入“1-5、6、7”，但不能这样做，因为“-”正在选中和取消选中该框

编辑：我想保持选中+取消选中复选框的空格键功能。无论出于何种原因，如果我在文本框中输入空格，它不会触发切换事件，但 '-' 和 '=' 会触发。

EDIT2：理想情况下寻找 xaml 修复，因为我正在尝试维护 MVVM 架构并且不希望后面有代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:40:58.010

CheckBox.OnKeyDown 是罪魁祸首（参见[http://msdn.microsoft.com/en-us/library/system.windows.controls.checkbox.onkeydown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.checkbox.onkeydown.aspx)）。我通过创建一个覆盖 OnKeyDown 并且什么都不做的自定义 CheckBox 类解决了这个问题。VB 解决方案如下所示：

```
Public Class IgnoreKeyboardCheckBox
    Inherits CheckBox

    Protected Overrides Sub OnKeyDown(e As System.Windows.Input.KeyEventArgs)
        If e.Key = Key.Space Then
            MyBase.OnKeyDown(e)
        End If
    End Sub
End Class 
```

当您需要复选框忽略键盘输入时，您可以使用此类而不是 CheckBox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T08:36:32.220

可以在这里看到[C# .NET 中的 CheckBox.cs 源代码](http://www.dotnetframework.org/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/Orcas/SP/wpf/src/Framework/System/Windows/Controls/CheckBox@cs/1/CheckBox@cs)，对于 2 状态复选框，有自定义行为`Key.Add, Key.Subtract, Key.OemPlus, Key.OemMinus`。

（以编程方式）添加命令对我不起作用。在子类中覆盖确实：

```
protected override void OnKeyDown(KeyEventArgs e)
{
  // Non ThreeState Checkboxes natively handle certain keys.
  if (SuppressNativeKeyDownBehaviour(e.Key))
    return;

  base.OnKeyDown(e);
}

private bool SuppressNativeKeyDownBehaviour(Key key)
{
  switch (key)
  {
    case Key.Add:
    case Key.Subtract:
    case Key.OemPlus:
    case Key.OemMinus:
      return true;
    default:
      return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:40:31.333

尝试用空命令覆盖键盘快捷键：

```
<RadioButton>
        <KeyBinding Key="OemMinus" Command="{Binding EmptyCommand}"/>
</RadioButton> 
```

在您的视图模型中：

// 使用 System.windows.input

```
public Icommand EmptyCommand = ApplicationCommands.NotACommand; 
```

# objective-c - 创建易于使用的静态库 Cocoa

> ID：11158196
> 
> 赞同：1
> 
> 时间：2012-06-22T14:29:09.907
> 
> 标签：objective-c, cocoa, frameworks

我正在创建一个静态库，我将其包装到一个 .framework 中供其他开发人员使用，而我真正想为这个库/框架的最终用户提供的一件事是易于使用，我希望他们能够几乎只是将其放入他们的应用程序的框架中并开始使用它。

但是，我遇到了一些使开发人员的最终工作变得越来越长的事情，这并不困难，但只是他们需要做的额外步骤才能使事情正常进行。

例如，我在我的库中使用 SQLite，因此我需要用户将该库包含到他们的项目中以及我的项目中。

此外，我在我的库中使用了一些类别，因此，我需要开发人员还设置他们的其他链接器标志以包含“-ObjC”，我试图避免使用类别来解决这个问题，但这并不值得。

我可以想象我可能会遇到更多我需要的东西，这需要开发人员进行额外的设置工作。

任何人都可以分享有关如何使最终用户或开发人员的生活更轻松或与我的担忧相关的任何提示吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:34:08.610

我使用的大多数开源框架通常与您上面的内容非常相似，您必须包含一些框架并添加`-ObjC`和`-all_load`链接器标志。只要您提供适当的文档（如果框架针对不太熟练的人，则提供屏幕截图），那么您应该可以进行分发

# c++ - 解析一个奇怪的字符串 C++

> ID：11158207
> 
> 赞同：2
> 
> 时间：2012-06-22T14:29:35.183
> 
> 标签：c++, string, parsing

我从一个看起来像这样的 .dat 文件中获得了很多数据点

```
 + (  0.00000000E+00   0.00000000E+00     //this '(' happens once per block of data
 +    0.99999997E-04   0.00000000E+00
 +    0.19999999E-03   0.00000000E+00
 +    ... 
```

我无法控制让吐出这些数据的程序对我来说更友好。

到目前为止，我得到了向量中的每一行，我想解析它们，所以我只有数字可以使用，但我仍然想保持 .dat 文件的完整性，因为另一个程序使用 .dat 文件作为是。

我正在考虑用空格分隔每个字符串，但空格的大小不同（除非没关系）并将它们放在一个向量中并只获取我需要的数据，但数据的第一行有 4 个字符串，其余的行有3。

任何帮助将不胜感激

编辑：我正在获取原始 .dat 文件，对其进行跟踪，并且任何不符合我的阈值的数据块都会被传递。任何这样做，都会被写入一个新文件。这个新文件的所有内容都必须与原始文件完全相同，当然要减去我不需要的数据。

[JD] 根据评论编辑：

我将如何解析这些行，在不删除任何内容的情况下保持所有内容相同，并获取数字以便我可以处理需要保留和不需要的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:11:22.433

我会创建一个 ctype facet，将[Edit: and `+`, based on comment] 分类为空白，然后只读取数字。假设您保留一个数字的标准是它大于 1.0e-4。要将数据复制到新文件，删除较小的数字，您可以执行以下操作：`(``)`

```
#include <locale>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <vector>
#include <sstream>
#include <numeric>

class my_ctype : public
std::ctype<char>
{
    mask my_table[table_size];
public:
    my_ctype(size_t refs = 0)  
        : std::ctype<char>(&my_table[0], false, refs)
    {
        std::copy_n(classic_table(), table_size, my_table);
        my_table['('] = (mask)space;
        my_table['+'] = (mask)space;
        my_table[')'] = (mask)space;
    }
};

int main() {
    std::locale x(std::locale::classic(), new my_ctype);
    std::cin.imbue(x);

    std::remove_copy_if(std::istream_iterator<double>(std::cin), 
        std::istream_iterator<double>(), 
        std::ostream_iterator<double>(std::cout, "\n"), 
        [](double in){return in < 1.0e-4; }); // criterion for removing a number
    return 0;
} 
```

我猜想（但不知道）你删除数字的标准可能比简单的比较复杂一点。如果它变得更复杂，您可能希望使用手动定义的仿函数而不是 lambda 来定义您的标准。其余代码（尤其是读取数据的部分）可能保持不变。

另请注意，我只是将数字写入输出，每行一个。我不知道您是否需要保持更接近原始格式的内容，所以目前我只是保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:16:20.447

您可以使用文件流一次获取每个项目`operator>>`，这将跳过空格。当您到达将是“（”或空白（例如，空格）的列时，检查它并根据您获得的内容进行切换。如果您有“（”，请`operator>>`再次获取实际数据。如果您没有t 得到 '('，然后你得到了数据，因为`operator>>`跳过了空格。

这是一个希望完整的示例：

```
#include <string>
#include <iostream>
#include <vector>
#include <fstream>
#include <algorithm>
using namespace std;

struct Inbound
{
    std::string  a_, b_;
};

int main()
{
    ifstream f("c:\\dev\\hacks\\data.txt");

    while( !f.bad() && !f.eof() )
    {
        string s;
        f >> s; // should be '+' -- discard
        f >> s; // either '(' or first datum
        if( s == "(" )
            f >> s; // get the first datum
        Inbound in;
        in.a_ = s;
        f >> in.b_;

        cout << "Got: " << in.a_ << "\t" << in.b_ << endl;
    }

} 
```

输出：

```
Got: 0.00000000E+00     0.00000000E+00
Got: 0.99999997E-04     0.00000000E+00
Got: 0.19999999E-03     0.00000000E+00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:42:43.167

您应该使用字符串标记器来获取每个数据。根据您已经在使用的库，它可能非常简单。

否则，您可以使用 [strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)使某些事情变得非常简单。

如果您使用的是 MS CString，您可以自己编写一些代码，例如：

```
CStringArray TokenizeString(const CString& str, const CString &sep)
{
    CStringArray elements;

    CString item = "";
    CString strCpy = str;
    long sepPos = strCpy.Find(sep);

    while (sepPos != -1)
    {
        // extract item
        item = strCpy.Left(sepPos);
            // add it to the list
        elements.Add(item);
        // prepare next loop
        strCpy = strCpy.Right(strCpy.GetLength() - sepPos - sep.GetLength()); // get the right part of the string (after the found separator)
        sepPos = strCpy.Find(sep);
    }

    // add last item if needed (remaining part of the string)
    if (!strCpy.IsEmpty()) elements.Add(strCpy);
} 
```

希望这可以帮助 ！

# ruby-on-rails - 水豚黄瓜：如何取消选择单选按钮

> ID：11158209
> 
> 赞同：0
> 
> 时间：2012-06-22T14:29:41.570
> 
> 标签：ruby-on-rails, ruby, cucumber, capybara

我可以像您取消选中复选框一样取消选择单选按钮吗？

我正在进行一项测试，我正在调查不同的“分支”，我遇到了这种需求。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:24:12.080

经过进一步调查，此功能既不必要也不可取。@Jon M 是对的。如果用户做不到，为什么要把它包括在我的测试中。如果我可以否决我自己的问题，我会的。

FWIW 我的解决方案是创建一个不同的场景作为功能的一部分来测试单独的分支，从而使这个功能变得不必要。

无论如何，向安德鲁提出解决方案的道具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:19:53.410

虽然 Capybara 中似乎没有`unchoose`方法（这很奇怪`select`，`check`并且两者都有相应的“un”版本），但鉴于 的[代码`choose`](https://github.com/jnicklas/capybara/blob/1.1.2/lib/capybara/node/actions.rb#L66)，这应该可以工作：

```
def unchoose(locator)
  msg = "cannot choose field, no radio button with id, name, or label '#{locator}' found"
  find(:xpath, XPath::HTML.radio_button(locator), :message => msg).set(false)
end 
```

# linux - Linux命令行视频编辑

> ID：11158219
> 
> 赞同：0
> 
> 时间：2012-06-22T14:29:56.427
> 
> 标签：linux, video, command-line

我试着用谷歌搜索了一段时间，但我没有找到任何相关的东西，所以也许这里有人知道答案：有没有办法动态地添加从命令行到视频的任何文本/效果/过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:51:25.383

您可以使用 FFmpeg 执行此操作`drawtext AVOptions`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:41:20.490

FFMpeg（来自[http://ffmpeg.org/](http://ffmpeg.org/)）也许是正确的选择。你应该试一试。

# constraints - 为 virtex 5 编写 i/o 约束

> ID：11158220
> 
> 赞同：0
> 
> 时间：2012-06-22T14:29:58.030
> 
> 标签：constraints, xilinx, virtex

伙计们，我正在开发 virtex 5 板，但我不知道如何编写 I/O 约束。有人可以推荐一些关于写作限制的基本教程。我试过 Xilinx 约束指南，它太长了，初学者很难理解。我想要一些更简单的东西，也很重要。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:08:27.650

您可以做的基本最低要求如下：

NET "INPUT_A" LOC = "E13";

其中 INPUT_A 是顶层网络名称，E13 是您希望将该网络分配到的输出引脚。（NET = 网络名称，LOC = 引脚编号分配）

再进一步，您可以指定 IOSTANDARD，它是信号类型，即 LVCMOS、LVDS 等。如果将其留空，我相信它默认为 LVCMOSxx，其中 xx 是该特定 IO 组的电压。

NET "INPUT_A" LOC = "E13" IOSTANDARD = "LVCMOS33";

还有更多约束，例如将 PERIOD 分配给网络，更具体地说是时钟网络，以允许工具进行时序收敛。

# vba - 将 VBA 记录集定义为字符串

> ID：11158222
> 
> 赞同：0
> 
> 时间：2012-06-22T14:30:03.960
> 
> 标签：vba, excel, recordset, teradata

当我们在 VBA 中定义记录集并从数据库中读取数据时，记录集将其数据类型转换为表的列数据类型。

```
Dim rs as adobb.RecordSet 
Set rs = CmdSqlData.Execute() ' After this rs fields will be stored based on table's datatype 
```

有没有办法将记录集本身设置为字符串和执行，

```
Set rs = CmdSqlData.Execute() 
```

例如：如果数据库表定义中有时间戳值（具有整数值），Recordsset 将其字段数据类型设置为时间戳。

问题是，在数据库中，

> 时间值是 12345 （不是日期和时间），但是当记录集读取它时，它来自例如：23-06-2012 10:15:23

我希望值为 12345

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:43:57.557

您的 SELECT 语句将需要为 Teradata TIMESTAMP 执行显式 CAST 到 FLOAT（DATE 是 INTEGER）

```
SELECT CURRENT_TIMESTAMP()
     , CAST(CURRENT_TIMESTAMP() AS FLOAT) AS NumericTimeStamp
; 
```

您应该能够解决 VBA 的其余部分，因为 Recordset 会将 NumericTimeStamp 识别为 FLOAT 而不是 TIMESTAMP。

**编辑**

以下 SELECT 语句将采用带有 FORMAT 子句的整数，并作为双重转换的结果返回字符数据类型：

```
SELECT CAST(CAST(1234 as INTEGER FORMAT '99:99:99') AS CHAR(8)); 
```

您是否尝试使用 SELECT 语句打开您的记录集，该语句将包含时间的列显式转换为 CHAR(8)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:54:51.463

我现在设法单独转换这个时间戳。但是有许多可用的时间戳格式。我无法自动化 SQL 查询以将不同的数据类型转换为字符串。我需要 VBA 以字符串形式读取 TERADATA VALUE 我做了什么，

```
 If Field_format = "99:99:99" then
    Sql = "Select Cast(Field_format as integer) from Mytable"
    Elseif Field_format = "99:99:99.999" then
    Sql = "Select Cast(Field_format as Float) from Mytable"
    Elseif Field_format = "99:99:99.999" then
    Sql = "Select Field_format from Mytable"
    End if
...
Set rs = CmdSqlData.Execute() 
```

请注意，teradata 中可用的数据类型太多（大约 400+），我无法像上面那样转换一切。

> 我只是想让 VBA 将 Teradata 值读取为字符串。 **想知道 StackOverflow 中没有 VBA 专家**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:58:51.743

如果您连接到 SQL Server 数据库，时间戳数据类型是一个二进制字段，用于确定记录是否已更改（请参阅[如何将 SQL Server 的时间戳列转换为日期时间格式](https://stackoverflow.com/questions/8119386/how-to-convert-sql-servers-timestamp-column-to-datetime-format)）。这与保存时间和日期的日期时间字段不同。

从 ADO 中的记录集中返回一个字符串类似于：

```
Dim cn as ADODB.Connection
Dim rs as ADODB.Recordset
Dim strSQL as string
Dim strSomething as string

strSQL = "SELECT fld1 FROM tbl1"

Set cn = New ADODB.Connetion
cn.ConnectionString = {your connection string here}
cn.open
rs.open strSQL, cn
While Not rs.EOF
    strSomething = rs!fld1
Wend
rs.Close
cn.Close
Set rs = Nothing
Set cn = Nothing 
```

# glsl - GLSL ES 中的统一与属性

> ID：11158223
> 
> 赞同：30
> 
> 时间：2012-06-22T14:30:04.347
> 
> 标签：glsl, fragment-shader, opengl-es-1.1

我有一些参数从 CPU 传递到 GPU，这些参数对于所有片段都是恒定的，但在每一帧上都会发生变化（我使用的是 GLSL ES 1.1）。我应该为这些值使用制服或属性吗？属性可能因顶点而异，因此我的直觉是，将属性用于在整个帧中保持不变的值将是低效的。但是，我读过制服是针对“相对不经常”变化的值，这表明在每一帧上更换制服可能效率低下。

在硬件方面，我最感兴趣的是针对 iPhone 4S 进行优化。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-22T16:21:01.003

我投票支持制服。

您的问题中已经解释了其中一个原因：制服是每个顶点/片段的常量。

更喜欢制服而不是属性的其他原因是：

*   可用插槽的数量（允许有 16 个属性，但还有更多的制服）
*   GLSL 编译器可以优化统一值处理
*   长顶点数组上的数据流越少，每个顶点的属性越少意味着性能越好。
*   统一在片段着色器中可用，无需在顶点和片段着色器之间定义不同的属性
*   制服可以是结构和数组，从而使代码更具可读性。

# mysql - MySQL查询/子查询问题

> ID：11158230
> 
> 赞同：1
> 
> 时间：2012-06-22T14:30:24.877
> 
> 标签：mysql, sql

我正在构建一个查询以从多个表中收集数据。我想`item_ids`从一个表中获取所有数据，然后通过从其他表中收集其他数据来构建结果`item_id`。我可以发誓这是可能的。但是，我似乎无法让它工作。这是我正在尝试做的一个例子：

```
SELECT item_id AS mainID, 
 (SELECT anotherField 
  FROM anotherTABLE 
  WHERE item_id=mainID) 
FROM theMainTable; 
```

当然，这只是一个例子。本质上，我需要在子查询中使用`item_id`来自主查询的。我本可以发誓我以前做过这个，但我不记得是怎么...

我试图通过一个查询来做到这一点，而不是使用任何额外的编程语言。我想最终将其设置为存储过程。感谢或对此有任何帮助。

**更新**

看起来加入确实有效...感谢您的所有帮助。

这是我的最后一个查询，以防万一其他人遇到这样的事情：

```
SELECT DISTINCT
    Q.item_id, Q.timestamp, Q.employee,
    QA.employeeNotes, Q2.itemDesc, Q2.itemExtraData
FROM 
    itemLog Q 
LEFT JOIN 
    itemComments QA ON Q.item_id = QA.item_id 
LEFT JOIN 
    itemLog Q2 ON Q.item_id = Q2.item_id AND Q2.type = 'begin' 
WHERE 
    Q.verb = 'itemStatus' 
    AND NOT (QA.employeeNotes IS NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:32:59.687

你应该使用

```
SELECT mt.itemID AS mainID, at.anotherField
FROM theMainTable mt INNER JOIN anotherTABLE at
ON mt.itemID = at.item_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:33:21.960

```
SELECT a.item_id AS mainID, b.anotherField 
FROM theMainTable a
    INNER JOIN anotherTABLE b ON a.item_id=b.item_id 
```

您应该避免在 select 语句中使用子查询，因为它们将针对从主表返回的每个行计算，而内部连接确保正确的优化和表路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:33:41.330

```
SELECT themaintable.item_id AS mainID, 
       anothertable.anotherfield 
FROM   themaintable 
       INNER JOIN anothertable 
               ON item_id = mainid; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:33:45.617

尝试这样的事情：

```
SELECT
    item_id AS mainID,
    anotherField
FROM theMainTable
INNER JOIN anotherTABLE ON item_id=mainID; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T14:36:45.607

加入这两个表，这就是为什么你有键：

```
SELECT table_x.id, table_y.another_field
FROM table_x
INNER JOIN table_y ON table_x.id = table2.x_id; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T14:43:47.977

如果您确实需要嵌套查询，请执行以下操作：

```
SELECT item_id AS mainID, 
   (SELECT anotherField 
    FROM anotherTABLE 
    WHERE anotherTABLE.item_id=theMainTable.item_id) AS anotherField
FROM theMainTable; 
```

嵌套查询不起作用的原因可能是因为您没有定义该字段来自的表并且列名不明确。

如上所述，这确实是您将使用连接的情况：

```
SELECT theMainTable.mainID, 
       anotherTABLE.anotherField
FROM theMainTable INNER JOIN anotherTABLE
ON theMainTable.item_id = anotherTABLE.mainID 
```

# javascript - Google Maps API - 刷新 XML 标记

> ID：11158232
> 
> 赞同：0
> 
> 时间：2012-06-22T14:30:26.330
> 
> 标签：javascript, jquery, google-maps

我对 V2 api 非常熟悉，但是我已经有一段时间没有深入研究任何 javascript 了。

我正在使用此处找到的 XML 示例：http: [//gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/](http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/)将我用 PHP 生成的标记加载到地图上。该文件是 jqueryget.html ，到目前为止一切顺利。

当我想刷新标记时出现问题。

代码部分在这里：

```
google.load("maps", "3",  {other_params:"sensor=false"});
google.load("jquery", "1.3.2");

function initialize() {
var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
var myOptions = {
  zoom: 13,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

jQuery.get("data.xml", {}, function(data) {
  jQuery(data).find("marker").each(function() {
    var marker = jQuery(this);
    var latlng = new google.maps.LatLng(parseFloat(marker.attr("lat")),
                                parseFloat(marker.attr("lng")));
    var marker = new google.maps.Marker({position: latlng, map: map});
 });
});
}

google.setOnLoadCallback(initialize); 
```

我想将加载标记的部分与初始化函数隔离到一个我可以在点击时调用的函数中，但是我似乎无法弄清楚如何去做。

非常感谢任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:27:22.147

将`map`变量设置为全局变量。将 jQuery`get`方法调用移至单独的函数：

```
var map;

function initialize() {
  ...

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

}

//Call this function from the click event
function createMarkers() {

  jQuery.get("data.xml", {}, function(data) {
    jQuery(data).find("marker").each(function() {
      var marker = jQuery(this);
      var latlng = new google.maps.LatLng(parseFloat(marker.attr("lat")),
                                parseFloat(marker.attr("lng")));
      var marker = new google.maps.Marker({position: latlng, map: map});
   });
  });

}

google.setOnLoadCallback(initialize); 
```

# java - 从 main() 方法中获取可执行 jar 的名称

> ID：11158235
> 
> 赞同：39
> 
> 时间：2012-06-22T14:30:31.683
> 
> 标签：java, main, apache-commons-cli

我创建了一个可执行 jar 并使用 commons-cli 让用户能够在启动客户端时指定命令行参数。一切正常。但是，当我打印 jar 的使用说明时，我想显示以下内容：

```
usage: java -jar myprog.jar <options> <file>
--help Display the help message
--debug Enable debugging
.... 
```

使用 commons-cli 可以轻松打印所有选项。但是，“使用”行是头疼的。我似乎无法找到从传递给应用程序的 args[] 中获取“myprog.jar”名称的方法。

有什么简单的方法可以做到这一点吗？我可以使用一种非常复杂的方法从我的类的类加载器中进行回溯，并确定它是否包含在一个 jar 中，但这对于应该是一个非常简单的问题来说似乎是一个相当丑陋的答案。

```
private String getPath(Class cls) {
    String cn = cls.getName();
    String rn = cn.replace('.', '/') + ".class";
    String path =
            getClass().getClassLoader().getResource(rn).getPath();
    int ix = path.indexOf("!");
    if(ix >= 0) {
        return path.substring(0, ix);
    } else {
        return path;
    }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-22T15:35:31.870

干得好：

```
new java.io.File(SomeClassInYourJar.class.getProtectionDomain()
  .getCodeSource()
  .getLocation()
  .getPath())
.getName() 
```

**编辑：**我看到您对 getSourceCode API 的评论。好吧，这可能是您在 Java 中可以做到的最好的事情。关于`getCodeSource()`返回`null`，我认为它主要发生在`java.lang.*`源位置“隐藏”的类和其他特殊类上。不过应该为您自己的课程工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T09:59:57.893

在任何情况下，您都应该在调用 getPath() 之前添加一个 .toURI()。那是因为 java 的 URL 实现中的一些怪癖 - 有关详细信息，请参阅[如何对 URL 进行编码以避免 java](https://stackoverflow.com/questions/4571346/how-to-encode-url-to-avoid-special-characters-in-java)中的特殊字符。

# jquery - 滑出标签 jquery 使用链接

> ID：11158245
> 
> 赞同：0
> 
> 时间：2012-06-22T14:30:48.293
> 
> 标签：jquery, hyperlink, jquery-tabs

我在网页右侧有一个滑出选项卡，我想要做的是在页面上有一个链接，该链接将使滑块在屏幕上打开，这里的任何人都可以是我的 jquery：

```
$(document).ready(function(){
    jQuery(".pull_feedback").toggle(function(){
            jQuery("#feedback").animate({right:"-0px"});
            return false;
        },
        function(){
            jQuery("#feedback").animate({right:"-800px"});  
            return false;
        }
    ); //toggle
}); //document.ready 
```

我将如何使用链接运行滑出功能。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:32:38.463

以这种方式给链接一个类`pull_feedback`：

```
<a href="#" class="pull_feedback">Pull Out</a> 
```

并将其放置在任何地方！：） 希望能帮助到你！:)

# visual-studio-2010 - 调试后删除的项目引用

> ID：11158246
> 
> 赞同：7
> 
> 时间：2012-06-22T14:30:51.810
> 
> 标签：visual-studio-2010, project-reference, ilog

我们最近升级到 VS2010 (10.0.40219.1 SP1Rel) 和 .net 7.1.1.4 (x64) 的 ILOG 规则。现在可能发生以下情况：

1.  打开解决方案。
2.  调试项目
3.  停止调试。
4.  关闭一个文件（目前为止：app.Config 和 Program.cs）
5.  观看“重构规则”通知窗口出现。
6.  当每个 rulep 文件的第一个项目引用被删除时，惊恐地倒吸一口凉气。

大型解决方案会发生这种情况（约 60 个 csproj 和约 15 个规则）。较小的解决方案会发生这种情况（6 个 csproj 和 1 个规则）。

我们已经开始采取极端的开发措施来避免引用丢失（在调试时卸载所有规则并在调试后关闭/重新打开 VS2010）。

我们的项目或软件设置中是否有一些东西可以更改以阻止项目引用下降？

* * *

更新：虽然使用调试器是发生“重构规则/引用删除”问题的可靠方法，但它偶尔也会通过关闭文件而发生 - 不使用调试器。

* * *

我已经授予了第一个赏金，如果有人提出可以接受的答案，我愿意设置第二个赏金。

* * *

解决方法：我们有三个解决方案文件

1.  包含构建服务器所有内容的解决方案文件。
2.  仅包含规则及其依赖项的解决方案文件。开发人员构建一次以获取规则的 .dll。
3.  不包含规则项目的解决方案文件。需要 rulep 的 dll 的项目具有将 dll 复制到其文件夹中的预构建事件以及对该位置的程序集引用。允许调试和发布构建需要一点点摆弄。

开发人员可以安全地调试没有规则文件供 VS 破坏的第三个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:52:14.750

无论如何，只是为了更好地控制问题，也许您可​​以将您的项目/解决方案置于源代码控制之下，并配置 Visual Studio 以便它请求任何文件签出的权限？
因此，当尝试修改项目引用（或源代码控制下的任何其他文件）时，系统会询问您，并且您可以选择拒绝任何不需要的修改。

我对“.net 的 ILOG 规则”以及它存储规则配置的位置/方式一无所知，所以这种方法可能不适用于您的情况。如果是这种情况，请忽略我的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:51:16.293

我也熟悉 rulep 文件 - 但考虑使用[Procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)和一些过滤器来准确找出哪些进程正在破坏您的文件。希望这能给你更多的线索。

请注意，如果它是使用 Visual Stuido 自动化 API 的 Visual Studio 插件，这可能不会帮助您缩小罪魁祸首。

# iphone - 如何转换此 NSImage 代码以在 iOS 上使用

> ID：11158247
> 
> 赞同：0
> 
> 时间：2012-06-22T14:30:53.400
> 
> 标签：iphone, ios, macos, uiimageview, nsimage

我正在尝试将一些为 Mac OS X 编写的代码转换为 iOS 应用程序。这是 OS X 的工作代码：

```
// To create the images on the view:
NSRect imageRect = NSMakeRect(24+(i*80), ypos, 72, 96);
    NSImageView *theImageView=[[NSImageView alloc] initWithFrame:imageRect];
    [theImageView setBounds:imageRect];
    [self addSubview:theImageView];
    [theImageView setImage:[tCard image]];
    [self.imageviews addObject:theImageView];

// To remove the images on the view:
    for (NSImageView *timageview in self.imageviews) {
    [timageview removeFromSuperview];
}
[self.imageviews removeAllObjects]; 
```

目前，我有：

```
//To create the image on the view
UIImageView * theImageView = [[UIImageView alloc] initWithFrame:CGRectMake(24+(i*80), ypos, 72, 96)];
    [self addSubview:theImageView];
    [theImageView setImage:[tCard image]];
    [self.imageviews addObject:theImageView];

// To remove the images on the view:
 for (UIImageView *timageview in self.imageviews) {
    [timageview removeFromSuperview];
}
[self.imageviews removeAllObjects]; 
```

然而！删除图像*不起作用*。图像在视图上显示良好，但我无法删除它们。老实说，我不能 100% 确定示例代码是如何完全工作的，但我正在努力解决它，因此我似乎已经完成了一半，但无法获得要删除的图像:'(

感谢您的以下意见！如有任何问题或需要更多信息，请告诉我。

**编辑：**这`self.imageviews`是初始化的方式：

```
- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    self.imageviews = [[NSMutableArray alloc] initWithCapacity:4]; 
}
return self; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:38:37.573

只是猜测，我认为关键是`self.imageviews`. 我猜你没有初始化它。在某个地方你应该有类似的东西`self.imageviews = [[NSMutableArray alloc] init];`。

# actionscript-3 - 在 ActionScript 3.0 中，如何在不使用 AIR 或 HTTP 的情况下将视频文件从远程服务器复制到用户的计算机？

> ID：11158254
> 
> 赞同：0
> 
> 时间：2012-06-22T14:31:03.753
> 
> 标签：actionscript-3, flash, file-io, flash-media-server, remote-server

我已经找到了如何使用 AIR 和 HTTP 来做到这一点，但如果可能的话，我需要找到一种方法来绕过这两者。我一直在寻找一种方法来做到这一点并且正在继续这样做，但我还没有成功。也许有某种方法可以从后台的文件中流式传输，获取数据，然后将其打包到一个新文件或其他东西中（尽管我还没有找到类似的东西）？

有没有办法在没有 AIR 或 HTTP 的情况下复制这样的视频？可能是什么？谢谢！

编辑：让我澄清一下：在我们只能部分访问的某个远程服务器上有一个名为“x.avi”的文件。它不在 Flash 服务器上。我们不能使用 HTTP。我们不能使用 AIR。我们必须能够使用 RTMP 来不流式传输文件，而是通过 Internet 将其实际保存到随机人的计算机上。Adobe 喜欢把 Flash Player 和其他东西锁起来，就像没有明天一样，所以很难找到一个课程或其他东西来做这件事。我找到了用于流式传输的类（我们已经在做）、在 FMS 的服务器上保存文件等，但不是为了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:15:36.283

您可以使用 FileReference.download()，但我想这不是您想要的。

不幸的是，您没有闪存中的磁盘访问权限，因此即使您有视频字节数组，我认为也无法保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:17:50.723

你可能想看看`SharedObject`类，有文件大小限制，但你可以提示用户增加他们的本地共享对象存储限制
[文档here](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T15:48:26.850

[可以使用 RTMP 吗？](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#NetStream%28%29)

```
var my_nc:NetConnection = new NetConnection();
my_nc.connect("rtmp://www.yourfmsserver.com/someappname");
var my_ns:NetStream = new NetStream(my_nc, NetStream.CONNECT_TO_FMS);
my_ns.play(videoURL);
var my_video:Video = new Video();
my_video.attachNetStream(my_ns);
addChild(my_video); 
```

# c++ - C++：错误：未声明的类（在此函数中首次使用）。但我在 hpp 文件中声明了它

> ID：11158258
> 
> 赞同：2
> 
> 时间：2012-06-22T14:31:15.460
> 
> 标签：c++

我在fixed.cpp中创建了一个类声明文件作为fixed.hpp和类定义。当我在主函数中创建一个对象时。编译器告诉我该类未声明。但我想我做到了。任何想法或帮助？谢谢。

* * *

这是main.cpp：

```
 #include <iostream>
    #include <istream>
    #include <ostream>
    #include <sstream>
    #include <stdexcept>

    #include "test.hpp"
    #include "fixed.hpp"

    int main(int argc, char *argv[])
    { using namespace std;
      fixed f1;
      cout<<f1.value()<<endl;
    } 
```

* * *

这是fixed.hpp：

```
 #ifndef FIXED_HPP_
    #define FIXED_HPP_

    typedef float value_type ; 

    class fixed
    {
     public:
       fixed();
       fixed(value_type integer, value_type fraction); 
       fixed(double val);

       void as_string();
       value_type integer();
       value_type fraction();
       value_type value();
       static const int places=4;    
       static const int places10=10000;  //scale factor

     private:
       value_type integer_;
       value_type fraction_;   
       //value_type result_;

    }; 
```

* * *

这是fixed.cpp：

```
 #include "fixed.hpp"

    #include <iostream>
    #include <ostream>
    #include <stdexcept>
    #include <string>

    using namespace std;

    //static const value_type fixed::places(4);
    //static const value_type fixed::places10(10000);
    fixed::fixed():integer_(0), fraction_(0){}

    fixed::fixed(value_type                     integer,value_type                         fraction):integer_(integer), fraction_(fraction) 
           {try
       {
        if (fraction_ <0)                          
           throw invalid_argument("Invalid argument. Must be positive.");
       }
    catch (exception& e)
      {
        cout <<"\n"<< e.what() << endl;
      }
     while (fraction_>= places10)
        {
         if(int(fraction_)%10 >=5 && fraction_< (places10*10) )
            fraction_=fraction_/10+1;               
         else
            fraction_/=10;
        }

     //result_ = integer_ + fraction_/places10;  //??
   } 

    fixed::fixed(double val):integer_(int (val)), fraction_(         (val- int(val))*places10) 
           { if (val <0)
        {    val = val*(-1);
             if ( int(val*places10*10)%10>=5)
              fraction_ = (fraction_*(-1) +1)*(-1);
        }     
     else
         {
          if (int(val*places10*10)%10>=5)
              fraction_ = fraction_ +1;
         }

     //result_ = integer_ + fraction_/places10;  //??
   }

    void fixed::as_string()
           {    string str;
                string str2;
                while( (int(integer_)/10) >=0 and int(integer_)>0 )
             {
             str.push_back(int(integer_)%10 + 48);
             integer_ = integer_/10;
             //cout<<str<<endl;
             }
        //cout<<"String format: "<<str<<endl;
        reverse(str.begin(), str.end());
        //cout<<"Reversed format: "<<str<<endl;
        str.push_back('.');
        //cout<<"New string: "<<str<<endl;
        while( (int(fraction_)/10 )>=0 and int(fraction_)>0)
             {
             str2.push_back(int(fraction_)%10 + 48);
             fraction_ = fraction_/10;
             //cout<<str<<endl;
             }
        //cout<<"String format: "<<str<<endl;
        reverse(str2.begin(), str2.end());
        str.append(str2);
        cout<<"String representation: "<<str<<endl;
           }

    value_type fixed::value()
         {
          return   integer_ + fraction_/places10;     
         }
    value_type fixed::integer()
         {
          return integer_;
         }
    value_type fixed::fraction()
         {
          return fraction_;
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:45:10.487

我尝试编译代码，这是唯一的重大错误：

```
fixed.cpp: In member function ‘void fixed::as_string()’:
fixed.cpp:63:35: error: ‘reverse’ was not declared in this scope 
```

我通过使用解决了这个问题

```
#include <algorithm> 
```

在fixed.cpp

# javascript - 拉力赛：如何找到包含某个关键字的父级？

> ID：11158259
> 
> 赞同：1
> 
> 时间：2012-06-22T14:31:15.823
> 
> 标签：javascript, rally

在 Rally 中，我试图在树中查询包含“Feature”一词的项目。我尝试通过检查任何父名称中是否包含“Feature”一词来查询 (Parent.Parent.Parent.Parent.Parent.Name contains "Feature") 等。我的方法不起作用。有一个更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:19:08.677

正如 Charles 所指出的，不可能通过单个 Rally Query 遍历父层次结构。最终，可以使用（当前为 alpha 的）Lookback API 和类似于本文中描述的查询来提取整个层次结构并过滤命名和其他条件：

[Lookback API：查找已知父节点下的所有叶节点故事](https://stackoverflow.com/questions/10725244/lookback-api-find-all-leaf-node-stories-under-a-known-parent)

在此之前，您可以使用 AppSDK 遍历父级的层次结构并递归调用 rallyDataSource 的 find() 方法。我已经包含了一个简单的方法：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
   <meta name="Name" content="App Example: Parent Name Contains Story Hierarchy"/>
   <title>Parent Name Contains Story Hierarchy</title>
   <script type="text/javascript" src="/apps/1.27/sdk.js"></script>
   <script>

     var rallyDataSource;

     function parentNameRecursionExample() {
       var parentStoryHierarchy = function(results) {

         var storyInfo = "";
         var story = "";
         var parentFormattedID = "";
         for (i=0 ; i < results.stories.length ; i++) {
           story = results.stories[i];
           if (story.Parent != null) {
               parentName = story.Parent.Name;

               var testContains = "Parent";
               if (parentName.indexOf(testContains) != -1) {

                   storyInfo += story.FormattedID +
                           ', ' + story.Name +
                           ', Parent:' + story.Parent.FormattedID +
                           ': ' + story.Parent.Name + '<br>';
                   aDiv.innerHTML += storyInfo;
               }

               parentFormattedID = story.Parent.FormattedID;

               var queryConfig = {
                 type : 'HierarchicalRequirement',
                 key : 'stories',
                 fetch: 'FormattedID,Name,Parent',
                 query: '(FormattedID = \"' + parentFormattedID + '\")'
               };

               rallyDataSource.findAll(queryConfig, parentStoryHierarchy);
           } else {
               storyInfo += story.FormattedID +
                   ', ' + story.Name +
                   ', Parent: No Parent';
               aDiv.innerHTML += storyInfo;

           }
         }
       };

       var queryConfig = { 
          type : 'HierarchicalRequirement',
          key : 'stories',
          fetch: 'FormattedID,Name,Parent',//,
          query: '(FormattedID = \"US130\")'
       };

        rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                                  '__PROJECT_OID__',
                                                   '__PROJECT_SCOPING_UP__', 
                                                  '__PROJECT_SCOPING_DOWN__'); 
       rallyDataSource.findAll(queryConfig, parentStoryHierarchy);
     }

     rally.addOnLoad(parentNameRecursionExample);
  </script>
</head>
<body>
  <div id="aDiv"></div>
</body>
</html> 
```

它遍历一个看起来像这样的故事层次结构：

![故事层次](../Images/852ac00cff2acbc72bd22b5caa2a0976.png)

并过滤故事名称中包含“父母”的故事，产生以下输出：

![来自 App 的过滤故事层次结构输出](../Images/23732c46489f2aae837cbc3184ca233b.png)

理解示例是粗略的，不是很漂亮，不像单个查询那样优雅或简单，但它说明了如何遍历树并过滤您正在寻找的结果。

# java - 如何通过ajax成功功能附加无限数量的html元素？

> ID：11158268
> 
> 赞同：0
> 
> 时间：2012-06-22T14:31:39.463
> 
> 标签：java, ajax, playframework

我想附加无限数量的 HTML 元素，并以注释形式给出数据。这是我的ajax：

```
function ajaxsubmit(){
    $.ajax({
        url: "/update",
        type: "POST",
        dataType: "html"
    }).success(function(data) {
          $('#result').html(data);
      });
    } 
```

和我的 HTML 部分：

```
<div class="post" id="result"></div> 
```

这是我的服务器端功能：

```
public static Result ajaxupdate(){
    String done = "test";
    return ok(done).as("text/html");
} 
```

此功能仅附加一次，如果我第二次单击，则不会附加。是因为我每次都应该有不同的ID吗？这怎么可能（就像在stackoverflow中，几个评论是如何工作的！）

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:37:39.193

每个关于堆栈溢出的评论都会关联某种 ID（可能来自存储所有堆栈溢出数据的数据库，这将是唯一的，我猜它会以某种方式用作元素 ID。

最终，如果您有一个完整的评论系统，您可能希望从您的 ajax 调用中返回 JSON。这个 JSON 可能看起来像这样：

> {"id":"12345","text":"评论文本","user":"Andy"}

然后你可能会解析它并将它添加到你的页面中，并使用“12345”作为包含元素的 ID，或者其他东西！

如果做不到这一点，暂时您可以随时使用 jQuerys [data()](http://api.jquery.com/jQuery.data/%20data%28%29)函数保存 ID。这会将 ID 与 jQuerys 自己的缓存中的元素相对应。这样它就不需要是唯一的。

~~无论哪种方式，我确信非唯一元素 ID 将是它不显示的原因。~~

**更新**

呃，当然，Carsten 是绝对正确的，但希望这篇文章中可能还有一些对您有用的信息！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:40:47.710

当您使用`$('#result').html(data);`的内容`#result`被替换为新数据。要将新数据附加到`result`，请使用

```
$('#result').append(data); 
```

# rest - JERSEY RESTful - 如何使用多选复选框？

> ID：11158276
> 
> 赞同：1
> 
> 时间：2012-06-22T14:31:49.760
> 
> 标签：rest, jersey, multi-select

我正在尝试创建一个从多选复选框 html 组件接收参数列表的方法。但是，它只是行不通。

我测试过：

```
@POST..
.. myMethod(@FormParam String [] myCheckboxAttribute)
.. myMethod(@FormParam List<String> myCheckboxAttribute) 
```

这些都不是很好（最后一个（列表）只选中了第一个复选框，但其他没有）。

有什么想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T17:16:17.520

您必须在 @FormParam 注释中指定表单参数的名称。

这是一个对我有用的例子：

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Produces(MediaType.TEXT_PLAIN)
public String postForm(@FormParam("param") List<String> param) {
    return param.toString();
} 
```

HTML 表单：

```
<html><body>
<form action="http://localhost:9998/myresource" method="POST">
<input type="checkbox" name="param" value="a">A</input>
<input type="checkbox" name="param" value="b">B</input>
<input type="checkbox" name="param" value="c">C</input>
<input type="submit">OK</input>
</form>
</body></html> 
```

提交带有 B 和 C 选中的表单会打印出：

```
[b, c] 
```

我还在调试器中验证了该列表填充了 2 个字符串 b 和 c。

# javascript - 检测浏览器是否支持位置：固定

> ID：11158278
> 
> 赞同：7
> 
> 时间：2012-06-22T14:31:53.197
> 
> 标签：javascript, jquery, html, css

有没有可靠的方法来检测浏览器是否支持`position fixed`？

我找到了一些解决方案，但它们似乎都不适用于所有浏览器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T17:46:28.847

在使用 jQuery Mobile 开发移动应用程序时，我遇到了同样的问题。标头应该具有固定位置（如果浏览器支持），解决方案是`position: fixed`在 css 上设置默认标头并通过以下方法检查支持的属性：

```
function isPositionFixedSupported() {
    return $( '[data-role="header"]' ).css( 'position' ) === 'fixed';
} 
```

`static`如果浏览器不支持，则返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:36:47.230

这段代码工作得很好。刚刚在带有 IE6 的 Windows ME 机器上对其进行了测试，返回 'null' 因为 IE6 不支持`position:fixed;`.

*顺便说一句，这原本不是我的代码。所有的功劳都* [归于 Kangax 的 Github](http://kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED) *，那里有许多测试浏览器功能的功能。*

```
function () {
  var container = document.body;
  if (document.createElement &&
  container && container.appendChild && container.removeChild) {
    var el = document.createElement("div");
    if (!el.getBoundingClientRect) {
      return null;
    }
    el.innerHTML = "x";
    el.style.cssText = "position:fixed;top:100px;";
    container.appendChild(el);
    var originalHeight = container.style.height, originalScrollTop = container.scrollTop;
    container.style.height = "3000px";
    container.scrollTop = 500;
    var elementTop = el.getBoundingClientRect().top;
    container.style.height = originalHeight;
    var isSupported = elementTop === 100;
    container.removeChild(el);
    container.scrollTop = originalScrollTop;
    return isSupported;
  }
  return null;
} 
```

如果它运行，它工作，如果它没有，你会得到一个空值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T09:07:56.760

```
var supportFixed = (function () {
    var elem = document.createElement('div');
    elem.style.cssText = 'position:fixed';
    if (elem.style.position.match('fixed')) return true;
    return false;
}()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:14:01.073

像这样的东西在移动浏览器上有效吗？

```
function isFixedPositionSupported() {
   var e = document.createElement('div')
   try {
      e.style.position = 'fixed'
      return e.style.position == 'fixed'
   } catch (exception) {
      return false
   }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-22T15:35:47.157

Ohgodwhy 的代码是正确的，但是对于 iOS，您可以检查用户代理，看看它是否是 iOS Safari。然后返回它受支持。用户代理字符串是

```
Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like    Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3
Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7 
```

我不确定如何编写代码，但我确定这是检测 iOS 所需要做的。

# ruby-on-rails - Ruby on Rails：如何合并电子表格

> ID：11158283
> 
> 赞同：3
> 
> 时间：2012-06-22T14:31:57.317
> 
> 标签：ruby-on-rails, spreadsheet

我想在我的 RoR 应用程序上有一个可编辑的电子表格，用户可以在其中输入信息（最重要的是，我希望他们能够粘贴从 excel 复制的数据），然后将数据保存到我的数据库中。

你们能给我指出一些可以帮助我实现这个目标的东西吗？我试过 DHTMLX，但它不允许一次粘贴多行数据。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:40:35.003

我最终使用了[http://handsontable.com/](http://handsontable.com/)非常好的 javascript 包，我可以将它合并到 rails 中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T11:28:48.663

不花钱的版本？

是使用谷歌驱动器的红宝石宝石。

[https://github.com/gimite/google-drive-ruby](https://github.com/gimite/google-drive-ruby)

# linux - 如何在重新启动之前检查系统？

> ID：11158287
> 
> 赞同：-1
> 
> 时间：2012-06-22T14:32:08.933
> 
> 标签：linux, centos, reboot

只是想知道是否有任何可能的方法可以知道我是否重新启动机器（CentOS），它不会在中间卡住一半？

这是为了防止自己一路跑到DC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:42:48.180

如果您已经构建并安装了一个新内核，那么您将非常投入其中。我认为您可能只需要交叉手指并重新启动...

将来，您可能会考虑在 VM 中运行该系统，因为您正在尝试远程管理该事物。这样，如果你把它弄坏了，你不一定需要物理访问机器来修复它。

# php - 致命错误 PHP，梨？

> ID：11158288
> 
> 赞同：5
> 
> 时间：2012-06-22T14:32:16.910
> 
> 标签：php, mysql, sql, error-handling

我从这个问题开始：

[修复 PHP PEAR 错误](https://stackoverflow.com/questions/11157763/fixing-php-pear-error)

我接受了建议，但这似乎不起作用。

我的代码现在看起来像这样：

```
require 'DB.php';
require 'C:\Users\Clayton\Desktop\formhelpers.php';

$db = DB::connect('mysql://root:password@localhost/test');
if (DB::isError($db)) { die("connection error: " . $db->getMessage( )); }
$db->setErrorHandling(PEAR_ERROR_DIE);

//create table for responses 
$q = $db->query(
"CREATE TABLE apiResponse(
 Name VARCHAR(20),
 Occupation VARCHAR(20)");

//select data to send
$db = DB::connect('mysql://root:password@localhost/test');
$q = $db->query('SELECT Name, Occupation FROM try2 ');
while ($row = $q->fetchRow())
{
    $Name = $row[0];
    $Occupation = $row[1];

   $q = $db->query(
   "INSERT INTO apiResponse (Name, Occupation) values ($Name, $Occupation)"
); 
```

哪里需要'C:\Users\Desktop\formhelpers.php'；是第 10 行。

我仍然收到类似的错误：

```
Warning: require(C:\Users\Desktop\formhelpers.php) [function.require]: failed to 
open stream: No such file or directory in C:\xampp\htdocs\myfiles\Testing API 
Script.php on line 10

Fatal error: require() [function.require]: Failed opening required 
'C:\Users\Clayton\Desktop\formhelpers.php' 
(include_path='.;C:\xampp\php\PEAR') in 
C:\xampp\htdocs\myfiles\Testing API Script.php on line 10 
```

因为该目录没有解决问题，所以我认为我之前关于编辑 PEAR 文件的问题可能与此相关。

我的问题：

需要修正的文件是xamp中的php.ini文件？（我之前直接从 php.net 下载了 php）

我有一个用于开发和生产的 php.ini……我应该编辑哪一个？

.ini 文件在记事本中打开，我不确定这是编辑它的正确位置。确认？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:25:17.150

```
$q = $db->query(
"CREATE TABLE apiResponse(
 Name VARCHAR(20),
 Occupation VARCHAR(20)"); 
```

there is missing the last parenthesis.

```
$q = $db->query(
"CREATE TABLE apiResponse(
 Name VARCHAR(20),
 Occupation VARCHAR(20))"); 
```

# c# - 如何确保在关闭程序之前保存所有更改？

> ID：11158289
> 
> 赞同：0
> 
> 时间：2012-06-22T14:32:28.980
> 
> 标签：c#, multithreading, forms, savechanges, formclosing

我有一个控制雷达干扰器的大型 C# 项目。加载项目后，我们创建了 3 个线程，每个线程都打开了我们所谓的“主窗体”（关闭其中一个主窗体将关闭程序。

我目前遇到的问题是，在确保所有其他表单已保存并正确关闭之前，我可以关闭其中一个主表单。完成这项任务的最佳方法是什么？我目前的建议是保留一个全局堆栈来跟踪所有打开的表单，并且在关闭主窗体之前，它会尝试保存并关闭堆栈中的所有表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:40:12.353

如果您的功能是让表单不再显示但仍然可以在内部访问表单的数据，您可以使用 hide() 而不是立即关闭它们。

但是，您可能应该有一个列表，如您所说，其中包含对所有主窗体的引用并遍历它们以在真正摆脱它们之前保存它们的信息。

编辑：您也可以随时使用 OnFormClosing 方法。那是更多的事件驱动方法。[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onformclosing.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onformclosing.aspx)

# iphone - NSOperation mainQueue 问题

> ID：11158294
> 
> 赞同：1
> 
> 时间：2012-06-22T14:32:40.983
> 
> 标签：iphone, ios, uiimage, nsoperation, nsoperationqueue

我有幻灯片，我想显示大图像，我添加`[NSOperation mainQueue]`了低优先级的操作，这个操作显示图像。

如果图像很小，一切正常，但是当图像大约 5Mb 时，视图会冻结 1 秒，并且我无法滚动幻灯片。我认为，对于 iPhone 来说显示大图像非常困难，主队列太超载了。

但我不明白，因为我所有的显示代码都是以低优先级操作执行的。

这是显示代码。

```
[imageView removeFromSuperview];
imageView = nil;

// reset our zoomScale to 1.0 before doing any further calculations
self.zoomScale = 1.0;

// make a new UIImageView for the new image
self.imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
[self addSubview:imageView];

self.contentSize = [image size];
[self setMaxMinZoomScalesForCurrentBounds];
self.zoomScale = self.minimumZoomScale; 
```

也许我可以设置手势识别器的优先级（常规问题识别器`UIScrollView`？）

**更新**

请看我的新话题，我更恰当地描述了这个问题[我的话题](https://stackoverflow.com/questions/11188843/iphone-photos-app-implementation-issue)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:42:59.397

优先级与调度有关。如果您在 runloop 迭代期间排队一堆操作，那么它们将按其在该队列上的优先级执行。

加快此速度的一种解决方案是包含缩放到您正在显示它们的确切大小的资源。如果您尝试在 200x200 区域中显示 2000x2000 像素图像，那么系统会在内存中缩放所有这些东西. 您还可以以编程方式动态创建更小的图像以适应图像。这可以在后台队列上完成，因此您的 UI 仍然是响应式的。

[如何在iphone的objective-c中以编程方式调整图像大小](https://stackoverflow.com/questions/4712329/how-to-resize-the-image-programatically-in-objective-c-in-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:01:46.740

如果我理解你的正确性并且你做了类似的事情

```
NSOperationQueue* queue = [NSOperationQueue mainQueue]; 
```

然后，您添加到它的任何 NSOperation 都将在并发的主调度队列上执行（并负责在主线程上执行任务）。这可以解释冻结。您可以创建自己的队列，该队列将为每个 NSOperation 启动一个线程，并释放主线程以正常呈现 UI：

```
NSOperationQueue* queue = [[NSOperationQueue alloc] init];
[queue addOperation:operation]; 
```

然而，这会导致问题。当图像完成加载并将其传递给屏幕上的 UIImageView 时，在实际渲染图像之前会有很大的延迟，因为主（UI）线程在选择刷新之前不会知道该操作（一些几秒钟后）。解决方案是在 NSOperation 的 main 方法的末尾添加一个“performInMainThread”消息，如下所示：

```
-(void)main {
    NSData *bgImageData = [NSData dataWithContentsOfURL:self.targetUrl];
    UIImage *img = [UIImage imageWithData:bgImageData];
    [self performSelectorOnMainThread:@selector(insertImageLoaded:)
                           withObject:img
                        waitUntilDone:YES];
} 
```

'insertImageLoaded' 在 NSOperation 中，并将调用 setImage:(UIImage*)img 到您想要的组件。

# ruby-on-rails - 显示多对多关系的价值

> ID：11158295
> 
> 赞同：0
> 
> 时间：2012-06-22T14:32:40.997
> 
> 标签：ruby-on-rails, rails-activerecord, entity-relationship

我试图显示一个多对多关系的值

在我看来，我打电话给以下

```
schedule.opponents.name 
```

此代码未显示任何错误，尽管它仅显示“对手”一词

在我有belongs_to关系的其他方法上，这个方法似乎已经显示了我所追求的值

有小费吗？

```
class Opponent < ActiveRecord::Base
  has_many  :schedules
  has_many  :teams
  attr_accessible :name
end

class Schedule < ActiveRecord::Base
  has_and_belongs_to_many :opponents
  has_many :teams
  attr_accessible :location_id, :date, :opponent_id, :time, :for, :against, :event, :team, :home_or_away 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:36:45.957

当你做一个`has_and_belongs_to_many`relashionship 时，你假设有 n 个模型到 n 个模型。因此，当您执行 a 时`schedule.opponents`，您正在检索`Opponent`模型对象的数组，因此，您不能调用该模型的属性。
查看问题的一种简单方法是在控制台上键入：

```
schedule.opponents.last.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:41:22.400

当你这样做时`schedule.opponents`，你将得到一个包含所有对手的数组`schedule`。根据您的数据，该数组可能有零个、一个或多个元素。

试试这个：

```
<% @opponents = schedule.opponents %>
<% @opponents.each do |opponent| %>
  <%= opponent.name %><br />
<% end %> 
```

祝你好运！

# css - 内部样式表在带有 jsf 的 IE9 中不起作用

> ID：11158306
> 
> 赞同：4
> 
> 时间：2012-06-22T14:33:27.450
> 
> 标签：css, jsf-2, primefaces

我正在使用带有 primefaces 的 jsf2.0。我的应用程序在包括 IE8 在内的所有浏览器上都运行良好......但是当我在 IE9 中运行我的应用程序时，我的内部样式表甚至没有被浏览器（IE9）采用......样式被破坏了。

我的CSS在头上：

```
<h:head>
<meta http-equiv="X-UA-Compatible" content="IE=9" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Chennai Volunteers</title>
<link href="cv_website_styles.css" rel="stylesheet"  type="text/css" />
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/script.js"></script>
</h:head> 
```

我在控制台中收到以下错误，

```
java.lang.IllegalArgumentException: ContentTypeList does not contain a supported content type: text/css
at org.apache.myfaces.shared_impl.renderkit.html.HtmlRendererUtils.selectContentType(HtmlRendererUtils.java:1905)
at org.apache.myfaces.renderkit.html.HtmlRenderKitImpl.createResponseWriter(HtmlRenderKitImpl.java:223)
at org.apache.myfaces.shared_impl.view.JspViewDeclarationLanguageBase.renderView(JspViewDeclarationLanguageBase.java:154)
at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T14:43:49.307

我检查了您的网站 chennaivolunteers.org，我注意到它`FacesServlet`被映射到 URL 模式`/faces/*`而不是`*.xhtml`. 由于您仅使用相对`<link>`和`<script>`资源引用，因此它们也将（不必要地）通过`FacesServlet`。

IE9 发送一个 CSS 文件`Accept-Header`，`text/css`而其他浏览器发送一个`Accept-Header`. 本身不应该响应请求`text/css;*/*`。`FacesServlet``text/css`

基本上有两种方法可以解决这个问题：

*   摆脱`/faces/*`映射并将其替换为`*.xhtml`.

    ```
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping> 
    ```

*   `<link>`在和`<script>`（和）引用中使用域相对 URL，`<img>`以便它们永远不会通过`/faces`路径。

    ```
    <ui:param name="root" value="#{request.contextPath}/" />
    <link href="#{root}cv_website_styles.css" rel="stylesheet"  type="text/css" />
    <link rel="stylesheet" type="text/css" href="#{root}css/style.css"/>
    <script type="text/javascript" src="#{root}js/jquery.min.js"></script>
    <script type="text/javascript" src="#{root}js/script.js"></script> 
    ```

    或者使用`<base>`标签，或者使用`<h:outputStylesheet>`and`<h:outputScript>`来`name`代替。

顺便说一句，您的网站在几个资源上都有相当多的 404。也解决这个问题。检查浏览器内置 Web 开发工具集的“Net”、“Network”部分（在 IE9/Chrome/Firebug 中按 F12）。

# c# - C# 接口中的 IEnumerable 或 List 属性

> ID：11158310
> 
> 赞同：0
> 
> 时间：2012-06-22T14:33:37.700
> 
> 标签：c#, c++-cli, ogre

我正在尝试在 C# 中设计一个以后在 C++ CLI 中使用的接口。

实现 C# 接口的 C++ CLI 类需要有一个可以迭代的类似列表的属性。这个类实际上是一个原生的包装器（如果你想要完整的细节，它包含一个指向 Ogre RenderWindow 对象的指针，该对象有一个 Viewports 列表，每个 Viewport 项目都可以通过一个名为 getViewport(int index) 的 RenderWindow 属性轻松访问） .

目标是在接口和该接口的 C++ CLI 实现中拥有一个属性，以便它可以与`for each`构造一起使用。最干净的方法是什么？

讨论项目的一些片段：

*C#接口*：

```
public interface IRenderWindow
    {
         bool IsActive { get; set; }
    } 
```

*和 C++ CLI 实现者*

```
public ref class CLIOgreRenderWindow : public IRenderWindow
        {
        private:
            Ogre::RenderWindow * mRenderWindow;
        public:
            CLIOgreRenderWindow();

            virtual property bool IsActive 
            {
                bool get() sealed {return mRenderWindow->isActive();}
                void set(bool value) sealed { mRenderWindow->setActive(value); }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:04:12.610

如果我正确理解您的问题，您想公开视口列表。如果是这种情况，那么您可以：

1.  为您的本机 Viewport 对象创建一个包装器 ref 类（就像您为 CLIOgreRenderWindow 所做的那样。
2.  让 IRenderWindow 公开一个带有 getter 的 IEnumerable。
3.  在您的 C++/CLI 实现中，您可以创建包装对象的托管数组/列表（基于本机对象），然后返回它。

上面的第 3 项是您可以根据您的要求做一些不同的事情的地方（即您可以实现 IEnumerable 以一次产生一个结果——尽管这需要更多的工作）。

# django - Gunicorn 和 Django 与 Upstart 和 Nginx

> ID：11158311
> 
> 赞同：10
> 
> 时间：2012-06-22T14:33:40.837
> 
> 标签：django, nginx, virtualenv, gunicorn, upstart

首先，我有很多 Django 实例像这样设置和运行。

在每个项目中，我都有一个启动 gunicorn 等的 script.sh shell 脚本：

```
 #!/bin/bash
  set -e
  LOGFILE=/var/log/gunicorn/app_name.log
  LOGDIR=$(dirname $LOGFILE)
  NUM_WORKERS=3
  # user/group to run as
  USER=root
  GROUP=root
  PORT=8060
  IP=127.0.0.1
  cd /var/www/webapps/app_name
  source ../bin/activate
  test -d $LOGDIR || mkdir -p $LOGDIR
  exec /var/www/webapps/bin/gunicorn_django -b $IP:$PORT -w $NUM_WORKERS \
    --user=$USER --group=$GROUP --log-level=debug --log-file=$LOGFILE 2>>$LOGFILE 
```

***当使用bash script.sh*从命令行运行此脚本时，该站点运行良好，因此 Nginx 设置正确。**

一旦我使用 upstart 和**service app_name start**应用程序就会启动然后停止。它甚至不写入日志文件。

这是**/etc/init/app_name.conf中的****app_name.conf**文件：

 **```
description "Test Django instance"
start on runlevel [2345]
stop on runlevel [06]
respawn
respawn limit 10 5
exec /var/www/webapps/app_name/script.sh 
```

那么这里的问题是什么？因为从命令行运行是可行的，但通过新贵运行却不行。而且我不知道在哪里可以看到有什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T11:00:58.393

嗯，我想通了。如果有人遇到这样的事情......

基本上是缺乏关于 shell 脚本的知识，这让我望而却步。

在注释掉脚本文件的每一行之后，我发现了以下行的问题：**source ../bin/activate**以及之后的所有内容。

问题是它前面有 2 个空格，现在我知道它需要一直左对齐。现在它起作用了。

这就是我想出来的：

```
tail -f /var/log/syslog
Jun 26 10:54:59 saturn7 init: app_name main process (3521) terminated with status 127 
```

我发现状态 127 基本上是一个找不到的命令。所以我知道问题实际上出在脚本文件中。

但我不确定为什么 bash ./script.sh 会起作用而不告诉我有什么问题？我需要阅读有关 schell 脚本的信息。**

# select - 在派生选择或视图中使用列别名会破坏简单的选择查询

> ID：11158313
> 
> 赞同：2
> 
> 时间：2012-06-22T14:33:44.680
> 
> 标签：select, h2

我有一个真正的用例，它需要在“where”子句中引用列别名。我正在尝试使用此处概述的技术，我希望这些技术适用于 Sybase 和 MySQL，但似乎不适用于 H2 或 HSQLDB： [http ://databases.aspfaq.com/database/how-do-i -use-a-select-list-alias-in-the-where-or-group-by-clause.html](http://databases.aspfaq.com/database/how-do-i-use-a-select-list-alias-in-the-where-or-group-by-clause.html)

如果您愿意尝试重新创建我的问题，请执行以下操作：

```
create table CUSTOMER (code varchar(255), description varchar(255), active bit, accountOpeningDate date, currentBalance numeric(20,6), currentBalanceDigits int)
insert into CUSTOMER (code, description, active, accountOpeningDate, currentBalance, currentBalanceDigits) values ('BMW', 'BMW Motors', 0, '2011-01-01', 345.66, 2)
insert into CUSTOMER (code, description, active, accountOpeningDate, currentBalance, currentBalanceDigits) values ('MERC', 'Mercedes Motors', 1, '2012-02-02', 14032, 0) 
```

然后，此 SQL 查询失败：

```
select nest.* from (
  select CODE "id", DESCRIPTION "description",
  ACTIVE "active",
  accountOpeningDate "accountOpeningDate",
  currentBalance "currentBalance"
  from customer
) as nest
where nest.id = 'BMW' 
```

如果您去掉“where nest.id = 'BMW'”就可以了。但是，如果尝试在 where 子句或 select 子句（nest.id 而不是 next.*）中使用任何别名，则查询会失败。错误代码是未找到列“NEST.ID”；... [42122-167] 42S22/42122

如果您尝试使用别名列名创建视图，然后尝试从视图中选择，则会发生同样的失败。例如：

```
create view customer_view as 
select CODE "id", DESCRIPTION "description", 
ACTIVE "active", 
accountOpeningDate "accountOpeningDate", 
currentBalance "currentBalance" 
from customer 
```

然后：

```
select id from customer_view 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T17:57:09.350

问题是不带引号和带引号的标识符的混合使用。根据 SQL 规范，不带引号的标识符（例如`id`）不区分大小写，数据库可能会将它们转换为大写或小写。引号标识符（例如`"id"`）区分大小写，并且数据库引擎不得转换标识符。

H2 converts unquoted identifiers to uppercase (like other database engines such as Oracle). In your query, you have used both quoted and unquoted identifiers. Simplied test case (fails for H2 and other databases):

```
select * from (select 1 "id") where id = 1 
```

To solve the problem, you need to use either quoted identifiers everywhere, or unquoted identifiers:

```
select * from (select 1 id) where id = 1 
```

or

```
select * from (select 1 "id") where "id" = 1 
```

# c++ - 编译器可以内联在循环中生成对象的方法吗？

> ID：11158317
> 
> 赞同：2
> 
> 时间：2012-06-22T14:33:58.660
> 
> 标签：c++, optimization, compiler-construction

只是出于我自己的好奇心的问题。我多次听说在编写方法时最好使用复制/销毁范式。因此，如果您有这样的方法：

```
OtherClass MyClass::getObject(){
    OtherClass returnedObject;
    return returnedObject;
} 
```

据推测，编译器将通过基本上内联方法并在调用的方法的堆栈上生成类来优化这一点`getObject`。我想知道这将如何在这样的循环中工作

```
for(int i=0; i<10; i++){
    list.push_back(myClass.getObject());
} 
```

编译器是否会在堆栈上放置 10 个实例，`OtherClass`以便可以内联此方法并避免在未优化的代码中发生的复制和销毁？像这样的代码呢：

```
while(!isDone){
     list.push_back(myClass.getObject());
    //other logic which decides rather or not to set isDone
} 
```

在这种情况下，编译器不可能知道`getObject`会被调用多少次，所以可以推测它可以将任何东西预先分配到堆栈中，所以我的假设是没有完成内联，每次调用该方法时我都会支付全部成本抄袭`OtherObject`？

我意识到所有编译器都是不同的，这取决于编译器是否认为该代码是最佳的。我只是笼统地说，大多数编译最有可能做出回应？我很好奇这种优化是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:18:20.797

```
for(int i=0; i<10; i++){
    list.push_back(myClass.getObject());
} 
```

> 编译器会在堆栈上放置 10 个 OtherClass 的实例，以便它可以内联此方法并避免在未优化的代码中发生的复制和破坏？

它不需要*为了*避免复制和销毁而将 10 个实例放在堆栈上......如果有空间可以返回一个对象，无论是否返回值优化，它都可以重复使用该空间 10 次 - 每次复制通过列表 push_back 从同一个堆栈空间到一些新的堆分配内存。

分配新内存并安排 myClass.getObject() 直接在该内存中构造对象甚至是编译器的权利。

此外，如果优化器选择展开循环，它可能会调用 myClass.getObject() 10 次——即使有一些重叠或并行性——如果它可以以某种方式说服自己产生相同的整体结果。在那种情况下，它确实需要 10 个返回对象的空间，这取决于编译器是在堆栈上还是通过一些神奇的优化优化，直接在堆内存中。

在实践中，我希望编译器需要从堆栈复制到堆 - 我非常怀疑任何主流编译器是否足够聪明，可以在堆内存中安排直接构造。循环展开和 RVO 是常见的优化。但是，即使两者都起作用，我希望每次调用 getObject 都能在堆栈上串行构造一个结果，然后将其复制到堆中。

如果您想“知道”，请编写一些代码来测试您自己的编译器。您可以让构造函数写出“this”指针值。

> 像这样的代码呢：

```
while(!isDone){
     list.push_back(myClass.getObject());
    //other logic which decides rather or not to set isDone
} 
```

代码越复杂、越不惯用，编译器编写者就越不可能为它进行优化。在这里，您甚至没有向我们展示我们可以推测的复杂程度。试试你的编译器和优化设置，看看....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:38:25.467

这取决于哪个编译器在哪个操作系统上的哪个版本。

为什么不让你的编译器输出它的程序集，你可以自己看看。

gcc - [http://www.delorie.com/djgpp/v2faq/faq8_20.html](http://www.delorie.com/djgpp/v2faq/faq8_20.html)

visual studio -[从 Visual C++ 项目中查看程序集级代码](https://stackoverflow.com/questions/574536/viewing-assembly-level-code-from-visual-c-project)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:39:16.103

通常，优化编译器可以对您的代码进行*任何更改*，只要生成的程序的行为没有明显改变。这包括`inline`ing 函数（或不包括），即使该函数没有`inline`被程序员标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:45:27.460

编译器唯一需要关心的是程序的行为。如果优化保持程序逻辑和数据完整，则优化是*合法*的。输入（所有可能的程序输入）必须以与没有优化相同的方式输出（所有可能的程序输出）。

这种特定的优化是否可能（当然是，是否是实际的**优化**是另一回事！）取决于目标平台指令集以及实现它是否可行。

# winapi - ExitWindowsEx windows 7 关机不起作用

> ID：11158321
> 
> 赞同：3
> 
> 时间：2012-06-22T14:34:07.627
> 
> 标签：winapi, windows-7

我正在尝试让 Windows 7 机器从 C# WPF 应用程序重新启动。为此，我添加了以下代码（我使用了枚举，但为了保持代码简短，我只是在此处插入常量）：

```
[DllImport("user32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool ExitWindowsEx(ExitWindows uFlags, ShutdownReason dwReason);

public static void Reboot() {
    ExitWindowsEx(0x02, 0x0)
} 
```

在 Windows 7 机器上，这绝对没有任何作用（无论如何对我来说）。将 0x2（重新启动）更改为 0x0（注销）确实会使代码注销当前用户，但重新启动代码似乎不起作用。

使用 GetLastError API 调用也没有多大作用。它只是说明该功能已成功完成。

现在我只是通过使用 /r /f 调用关闭命令来应对，但我更希望能够直接从我的应用程序调用 Windows API，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:52:58.730

您没有正确检查错误。仅检查函数是否返回 false，不要*pinvoke* GetLastError()，而是使用 Marshal.GetLastWin32Error()。最好的办法：

```
public static void Reboot() {
    if (!ExitWindowsEx(0x02, 0x0)) {
        throw new System.ComponentModel.Win32Exception();
    }
} 
```

您很可能会发现自己没有足够的权限来重新启动机器。需要 AdjustTokenPrivileges，查看 MSDN 文章。

# c# - CheckedListBox 内存泄漏

> ID：11158326
> 
> 赞同：6
> 
> 时间：2012-06-22T14:34:23.837
> 
> 标签：c#, winforms, memory-leaks

我们正在编写一个需要一次运行多个小时的诊断工具，但是当我们在应用程序运行几个小时后尝试从 CheckedListBox 中删除项目时，我们遇到了一个神秘的内存不足异常。

我们最初尝试使用`checkedListBox.Items.Clear();`，经过一些谷歌搜索后，我们尝试了以下类似的方法：

```
for (int i = checkedListBox.Items.Count - 1; i >= 0; i--)
{
   checkedListBox.Items.RemoveAt(i);
} 
```

不幸的是，以上并没有解决问题。我在 MSDN 论坛上找到了这个想法，但今天早上我再也找不到这个链接了。但是，该论坛确实说有人分析了他们的应用程序并发现`CheckedListBox.Items.Clear()`.

有谁知道功能性工作？

**编辑：** FingerTheCat 的答案*暂时*解决了我们的问题，所以我暂时将其标记为答案。但是，我们已经开始梳理代码以尝试找出真正的问题。不幸的是，当前的实现主要是意大利面条代码，所以我们可能需要几天才能找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:14:20.913

事实证明，有人在应用程序中留下了一段调试代码，该代码将相当冗长的日志信息附加到一个`ArrayList`而没有清除它。该代码还将 的副本附加`ArrayList`到自身。忘记带出去绝对不是一件好事。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-22T14:44:31.933

我认为最好的办法是在代码中的某些位置调用 GarbageCollector。只需添加 GC.Collect(); 靠近一些循环，它应该可以解决您的内存问题。

# vba - 编写此 Excel VBA 的常规方法是什么？

> ID：11158328
> 
> 赞同：3
> 
> 时间：2012-06-22T14:34:27.340
> 
> 标签：vba, coding-style, excel

有没有更紧凑和/或传统的方式来写这个？

```
With ActiveSheet.QueryTables.Add(Connection:="URL;http://carbon.brighterplanet.com/flights.txt", Destination:=Range("A2"))
    .PostText = "origin_airport=MSN&destination_airport=ORD"
    .RefreshStyle = xlOverwriteCells
    .SaveData = True
    .Refresh
End With 
```

有没有`Connection`写在第一行而写在`PostText`第二行的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T16:00:24.837

`Connection`并且`Destination`是`Add`函数的必需参数，而`PostText`(etc) 是 QT 的属性。如果没有作为参数传递的属性，该`Add`函数将无法工作。`Connection`

请参阅[此](http://msdn.microsoft.com/en-us/library/aa221688%28v=office.11%29.aspx)和[此](http://msdn.microsoft.com/en-us/library/aa174288%28v=office.11%29.aspx)以获取更多参考。

# javascript - 尝试在画布绘制程序中调试撤消功能

> ID：11158334
> 
> 赞同：0
> 
> 时间：2012-06-22T14:34:51.713
> 
> 标签：javascript, jquery, html, canvas, paint

这是我的页面 [http://www.dev.1over0.com/canvas/canvas_web.html](http://www.dev.1over0.com/canvas/canvas_web.html)

我遇到了撤消功能的问题——我想我已经接近了，但问题就在这里

首先，我将告诉您绘图应用程序的基础知识—— 如果您查看您将看到的 js 文件，我将分层四个不同的画布[http://www.dev.1over0.com/canvas/js/canvas_web.js](http://www.dev.1over0.com/canvas/js/canvas_web.js)在最上面我对我在画布上所做的所有评论

当用户使用工具进行绘制时——它实际上是首先在 imageTemp 画布上临时绘制的——每个工具都有自己的对象（铅笔、矩形、线条），其中包含用于 mousedown、mousemove 和 mouseup 事件的函数

在 mouseup 事件结束时，它调用此函数

```
function img_update() {
contexto.drawImage(canvas, 0, 0);
saveActions();
context.clearRect(0, 0, canvas.width, canvas.height);
} 
```

在这里，临时画布上的图像最终被绘制在 imageView 画布上，因此基本上每次都会擦除 imageTemp 画布

因此，对于撤消功能，我首先声明一个空数组

```
var undoHistory = []; 
```

我还声明了一个新图像

```
var undoImg = new Image(); 
```

当 img_update 被调用时——它调用另一个函数 saveActions

```
function saveActions() {
var imgData = canvaso.toDataURL("image/png");
undoHistory.push(imgData);
$('#undo_canvas button').removeAttr('disabled');
} 
```

在这个函数中——我本质上是将新绘制的图像画布保存到 undoHistory 数组中这似乎工作正常（我相信）所以每次更新永久 imageView 画布后都会将该状态保存到数组中

现在，如果您注意到一旦绘制图像并将其保存到 imageView 画布，撤消按钮就会启用

因此，如果您单击撤消按钮，它会调用此函数

```
function undoDraw() {
if(undoHistory.length > 0){ 
$(undoImg).load(function(){
contexto.drawImage(undoImg, 0,0);
 });
undoImg.src = undoHistory.pop();
if(undoHistory.length == 0) { 
$('#undo_canvas button').attr('disabled','disabled');
}
}
} 
```

在这里，我要做的是获取先前的图像状态并将其绘制在画布上它的工作方式会影响图像的 z-index 但不会摆脱图像而且您必须单击它两次这让我很困惑

因此，如果您可以尝试在彼此的顶部绘制三个矩形您可以单击撤消按钮，它会影响 z-index - 单击它三下您会明白我的意思，所以它有点工作，也许;-{

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:20:04.003

在绘制最后一个图像之前必须清除画布，否则它将在前一个画布上绘制图像；此外，您弹出最后一张图片，这是您刚刚推入的图片（这就是您必须单击两次的原因）。所以尝试这样的事情（你可能需要调整代码，我不确定它是否可以开箱即用）

```
function undoDraw(){
   if(undoHistory.length > 0){ 
      $(undoImg).load(function(){
          contexto.clearRect(0,0, canvas.width, canvas.height);     
          contexto.drawImage(undoImg, 0,0);
     });
   undoHistory.pop();
   undoImg.src = undoHistory.pop();
   if(undoHistory.length == 0) { 
   $('#undo_canvas button').attr('disabled','disabled');
        }
     }                
} 
```

# asp.net - 如何在用户控件中获取 xslt 输出？

> ID：11158336
> 
> 赞同：1
> 
> 时间：2012-06-22T14:34:58.157
> 
> 标签：asp.net, .net

我有一个 xml 和一个 xsl 文件。我想在用户控件中输出 xsl 并且我必须将一些 xslt 参数传递给我的 xsl 还说

```
string m= "page1" 
```

所以这个字符串应该传递给 xsl。

我在用户控制 .cs 文件中有什么：

```
private readonly string XslFile = @"...\default.xslt";
private readonly string XmlFile = @"...\default.config";

private void Page_Load(object sender, System.EventArgs e)
{
    string m = "page_1";

        XmlDocument xdoc = new XmlDocument();
        xdoc.Load(XmlFile);

        XslTransform xsl = new XslTransform();
        xsl.Load(XslFile);

        XsltArgumentList xslarg = new XsltArgumentList();
        xslarg.AddParam("id", "", m);

        StringWriter sw = new StringWriter();
        xsl.Transform(xdoc, xslarg, sw);

        string result = sw.ToString().Replace("&lt;","<").Replace("&gt;",">");

        sw.Close();

        label1.text= result; // i have this label in .ascx file

} 
```

我也有 xsl 文件。xsl 或 xml 文件没有任何问题。我不知道我哪里错了。或任何其他方法，请告诉我。我希望在这么多页面中使用此用户控件，这就是我使用这种方法的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:39:43.420

```
string result = sw.ToString();
string encodedHtml = HttpUtility.HtmlEncode(result);

...

label1.Text = encodedHtml; 
```

[这](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmlencode.aspx)是文档。

# internet-explorer - 使用 Visual Basic 在 IE 中获取当前 URL

> ID：11158341
> 
> 赞同：7
> 
> 时间：2012-06-22T14:35:25.443
> 
> 标签：internet-explorer, url, vba

我正在使用 Visual Basic 中的 Internet Explorer 对象。有没有办法复制 IE 显示的当前 URL，以便我可以使用剪贴板将其粘贴到其他地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T14:50:31.133

假设您已经识别了 IE 窗口，它本身有点复杂 - 如果需要，我可以详细说明：

```
Dim ieIEWindow As SHDocVw.InternetExplorer
Dim sIEURL As String

'Set your IE Window

sIEURL = ieIEWindow.LocationURL 
```

要获得 IE 窗口，您需要在 VBA 编辑器中引用`Microsoft Internet Controls`库 ( `ieframe.dll`)，方法是转到`Tools`=>`References...`并从列表中选择它。如果该项目不可用，我的 .dll 文件位于`C:\Windows\System32\ieframe.dll`.

设置引用后，您将可以访问代码中的所谓`SHDocVw`库。

您可以使用以下内容（未经测试，修改/从我自己的工作代码中减少）获取 IE 窗口（假设只打开一个）：

```
Public Function GrabIEWindow() As SHDocView.InternetExplorer

Dim swShellWindows As New SHDocVw.ShellWindows
Dim ieOpenIEWindow As SHDocVw.InternetExplorer

    Set GrabIEWindow = Nothing

    ' Look at the URLs of any active Explorer windows 
    ' (this includes WINDOWS windows, not just IE)
    For Each ieOpenIEWindow In objShellWindows

        ' Check the I.E. window to see if it's pointed 
        ' to a web location (http)
        If Left$(ieOpenIEWindow.LocationURL, 4) = "http" Then
            ' If so, set this window as the one to use. 
            ' This will need to be modified to create
            ' a list if you want to select from more
            ' than one open window

            ' Optional grab the HWND for later reference...
            Dim lWindowID As Long
            lWindowID = ieOpenIEWindow.HWND

            Set GrabIEWindow = ieOpenIEWindow

            Exit Function
        End If

    Next OpenIEWindow 

End Function 
```

也可以修改上述内容以允许选择多个打开的 IE 窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:49:28.207

该死！这让我想起了我的 vb6 天 :)

好的，这就是我所拥有的。如果有超过 1 个 IE 窗口，那么它将采用最后一个活动（**当前**）IE 窗口，否则如果只有一个窗口，那么它将采用该窗口。

```
'~~> Set a reference to Microsoft Internet Controls

'~~> The GetWindow function retrieves the handle of a window that has
'~~> the specified relationship (Z order or owner) to the specified window.
Private Declare Function GetWindow Lib "user32" (ByVal hwnd As Long, _
ByVal wCmd As Long) As Long

'~~> The GetForegroundWindow function returns the handle of the foreground
'~~> window (the window with which the user is currently working).
Private Declare Function GetForegroundWindow Lib "user32" () As Long

Sub GetURL()
    Dim sw As SHDocVw.ShellWindows
    Dim objIE As SHDocVw.InternetExplorer
    Dim topHwnd As Long, nextHwnd As Long
    Dim sURL As String, hwnds As String

    Set sw = New SHDocVw.ShellWindows

    '~~> Check the number of IE Windows Opened
    '~~> If more than 1
    hwnds = "|"
    If sw.Count > 1 Then
        '~~> Create a string of hwnds of all IE windows
        For Each objIE In sw
            hwnds = hwnds & objIE.hwnd & "|"
        Next

        '~~> Get handle of handle of the foreground window
        nextHwnd = GetForegroundWindow

        '~~> Check for the 1st IE window after foreground window
        Do While nextHwnd > 0
            nextHwnd = GetWindow(nextHwnd, 2&)
            If InStr(hwnds, "|" & nextHwnd & "|") > 0 Then
                topHwnd = nextHwnd
                Exit Do
            End If
        Loop

        '~~> Get the URL from the relevant IE window
        For Each objIE In sw
            If objIE.hwnd = topHwnd Then
                sURL = objIE.LocationURL
                Exit For
            End If
        Next
    '~~> If only 1 was found
    Else
        For Each objIE In sw
            sURL = objIE.LocationURL
        Next
    End If

    Debug.Print sURL

    Set sw = Nothing: Set objIE = Nothing
End Sub 
```

**注意**：我没有做任何错误处理。我相信你可以解决这个问题；）

# mobile - 用于 Android 开发的 Monotouch/Mono 的跨平台性如何？

> ID：11158347
> 
> 赞同：3
> 
> 时间：2012-06-22T14:35:51.823
> 
> 标签：mobile, mono, xamarin.ios, cross-platform, xamarin.android

我是一名 python 程序员，希望制作我的第一个移动应用程序。我想为 iOS 和 Android 制作一个外观和感觉都是原生的应用程序。我想我会从一个简单的 iPhone 应用程序开始，看看一切是如何工作的。Mono 似乎是显而易见的解决方案。然而，我惊讶地发现，我发现的几乎所有示例 Monotouch 代码，以及 Stackoverflow 上的答案，都严重依赖于 IOS 框架，本质上使得代码根本不是跨平台的。例如，我正在研究使用计时器。我阅读的所有示例都使用 NSTimer。当然这可以在 C# 本身中完成，以便该部分是跨平台的？但是，为什么所有这些人都使用 NSTimer？

所以，我的问题是，IOS/Android 的 Mono 开发如何跨平台？对于小型应用程序是否仍然值得考虑，或者仅适用于具有大量业务逻辑的非常大的应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T15:50:30.430

你的问题太笼统了。我将针对两种情况回答：

**具体示例**
如果您正在寻找如何创建计时器、创建数组、遍历列表，那么为什么不只是寻找常规的 .NET 示例并将其编译为可以在两个项目中的单个类库。

**作为一个整体共享代码**
如果您只是指在两个平台之间共享代码，您应该查看已经为您创建的模板和示例的框架。两个这样的模式是[http://www.monocross.net/](http://www.monocross.net/) (MVC) 和[mvvmcross](https://github.com/slodge/MvvmCross) (MVVM)。这可以帮助您从一开始就构建项目以支持跨平台开发（iOS、Droid、Wp7、桌面等）。

.NET 基类库中有计时器、数组和字符串。如您所见，MonoTouch 包装的 Cocoa 库中有一些。例如，您可以在 .NET 中定期运行 mill string，但在 monotouch 中，您还可以选择 NSString。我想回答你的问题，人们有时可能会使用 iOS 特定类型的原因，要么是因为他们没有尝试使该代码跨平台而且这是一个偏好问题，要么他们必须做一些特别需要的事情这种类型的使用并非对每个人都适用。

Mono 的目的不仅仅是帮助跨平台开发。我来自 C#/.NET 背景，所以即使我正在构建一个只有一个屏幕和两个按钮的应用程序，我也会使用 MonoTouch，因为我宁愿使用带有 .NET BCL 的 C# 而不是 Obj-C。但这是我个人的选择，对我来说已经足够了。

**编辑**
我添加了链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:16:05.493

我认为关键在于，为了使用 Mono 而不是使用特定于平台的类型等，例如 NSSTring，您需要一个特定于平台的包装器（抽象层），它可以让您编写仅使用 Mono 类型的代码。

即，您询问是否使用 Mono，但您实际需要的是 MonoTouch 和 MonoDroid（@valdetero 引用的框架取决于支持它们的那些包装器）。

# android - Android 样式：'style="@android:style/XYZ"' 和 'style="?android:attr/XYZ"' 之间的区别？

> ID：11158349
> 
> 赞同：13
> 
> 时间：2012-06-22T14:35:52.780
> 
> 标签：android, android-layout, android-resources, android-styles

我正在尝试将按钮设置为看起来像我在[Android Full Width ICS 风格 Minimalist Bottom ButtonsViews](https://stackoverflow.com/questions/9881312/android-full-width-ics-style-minimalist-bottom-buttonsviews)中询问的那些。

我已经成功了，任何有兴趣的人都可以使用以下 xml：

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="bottom"
        android:divider="@android:drawable/divider_horizontal_dark"
        android:gravity="bottom"
        android:orientation="vertical"
        android:paddingTop="16dip"
        android:showDividers="beginning|end" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:measureWithLargestChild="true"
            android:orientation="horizontal"
            android:divider="@android:drawable/divider_horizontal_dark"
            android:showDividers="middle" >                             

            <Button
                android:id="@+id/cancel_button"
                style="?android:attr/buttonBarButtonStyle"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:maxLines="2"
                android:text="@string/cancel_button" />

            <Button
                android:id="@+id/login_button"
                style="?android:attr/buttonBarButtonStyle"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:filterTouchesWhenObscured="true"
                android:maxLines="2"
                android:text="@string/login_button" />

        </LinearLayout>
    </LinearLayout> 
```

一个问题。eclipse 内容辅助不知道以下资源解析发生了什么：

`style="?android:attr/buttonBarButtonStyle"`

我熟悉典型的分辨率（eclipse的内容助手知道）

`style=@android/style/...`

...但我不清楚两者之间的区别。似乎某些样式属性出现在一个中，但没有出现在另一个中。例如，以下内容不能解决任何问题：

`style=@android:attr/buttonBarStyle`

这也不是：

`style="@android:style/buttonBarStyle`

所以我想这里有两个问题：

1.  为什么资源引用语法不同？
2.  为什么在 attr 类别下对样式进行令人困惑的错误分类。
3.  attr 类别甚至再次用于什么？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T16:03:39.373

从关于 SO 的[另一个答案（这里转述）：](https://stackoverflow.com/a/4771871/1105376)

在 ID 前面使用问号意味着您想要访问在样式主题中定义的样式**属性**，而不是对属性进行硬编码。

将其视为取消引用主题属性以获取它指向的资源，而不是引用属性本身。

[引用样式属性](http://developer.android.com/guide/topics/resources/accessing-resources.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-05T17:13:46.947

**?android:attr/buttonBarButtonStyle**或只是**?android:buttonBarButtonStyle** - (attr 是可选的)

```
<item name="buttonBarButtonStyle">@android:style/Widget.Button</item> 
```

**这在内部取消了对 appcompat/res/values/ themes.xml**文件中定义的 @android:style/Widget.Button 的引用。

*(?android:)* - 始终链接到应用的当前主题的属性值。*因此允许我们仅引用 android 定义的样式，而不是创建一个新样式并提供硬编码值。*

> Google Doc 说，**[“它在当前主题中使用由该属性定义的样式”](https://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)**

# mysql - 在 MySQL 中使用 IS NOT NULL 时执行多个连接

> ID：11158353
> 
> 赞同：0
> 
> 时间：2012-06-22T14:36:00.373
> 
> 标签：mysql, join, null, conditional-statements

我有几个要从中选择数据的表。我试图仅在满足“interested_pa​​rties.emp_id”和“solicitation_entrys.sol_ent_id”字段的情况下从这些表中获取信息列表。

这是我到目前为止提出的查询：

```
SELECT * FROM users 
JOIN interested_parties ON (users.emp_id = interested_parties.emp_id) 
JOIN department_colors ON (department_colors.dept_id = users.emp_dept) 
JOIN solicitation_entrys ON (solicitation_entrys.sol_ent_id = interested_parties.sol_ent_id) 
WHERE IS NOT NULL (interested_parties.emp_id, solicitation_entrys.sol_ent_id) 
```

目标是从这些表中选择所有字段，其中这些字段不为空。我从 MySQL 收到 #1064 错误，我似乎无法解决这个问题。我必须在选择开始时执行 if 吗？如果是这样，您将如何使用连接来做到这一点？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:39:22.340

改用这个

```
SELECT * FROM users 
JOIN interested_parties ON (users.emp_id = interested_parties.emp_id) 
JOIN department_colors ON (department_colors.dept_id = users.emp_dept) 
JOIN solicitation_entrys ON (solicitation_entrys.sol_ent_id = interested_parties.sol_ent_id) 
WHERE interested_parties.emp_id IS NOT NULL 
AND solicitation_entrys.sol_ent_id IS NOT NULL 
```

您必须比较每个字段是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:46:40.720

正如 MySQL 应该告诉你的，错误出在你的 SQL 语法中。WHERE 子句应该是：

```
WHERE (interested_parties.emp_id IS NOT NULL)
AND (solicitation_entrys.sol_ent_id  IS NOT NULL) 
```

# wordpress - 呼叫所有 wordpress 大师

> ID：11158357
> 
> 赞同：0
> 
> 时间：2012-06-22T14:36:22.340
> 
> 标签：wordpress

我的朋友有一个建立在 wordpress 上的网站，而开发人员已经离开了这个国家，他们无法联系到他。

他们最近在主页上添加了一些文本，从那时起右侧边栏就消失了。我在该网站上搜寻未关闭的标签等，但找不到原因，这是该网站的网址：[ww.lumleyspetsupplies](http://www.lumleypetsupplies.com/)

任何帮助表示赞赏，我想我会在这里发帖，看看是否有人遇到过这个问题，然后才能为我指明正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:15:53.857

在您的 wordpress 安装中，您有页面/帖子修订，

当您编辑页面文本并单击保存时，它会复制一份并将其保留为修订版，

这位于页面内容下方，

如果未启用，请转到右上角并单击“屏幕选项”，然后选中“修订”框，现在元框将出现在内容区域下方，只需单击主页文本的旧副本即可恢复回到原来的状态，在弄得一团糟之前！然后将此文本复制到您的内容区域并保存。

![在此处输入图像描述](../Images/96ab568898fd5d44f6f678a5596c78d7.png)

然后与新的更改进行比较，为什么会损坏，可能是开发人员在内容区域中添加了 HTML 代码，在重新保存页面时将其删除！

马蒂

**更新**

查看您的 CSS 文件第 217 行是否开始：

```
 .latest_bg a:hover{
        background: url(images/newspaper_bg.jpg) 0 -39px;
    /*Start lftside_btm*/
    #lftside_btm{ 
```

.latest_bg a:hover 上缺少 } 标签

```
.latest_bg a:hover{
    background: url(images/newspaper_bg.jpg) 0 -39px;
}
/*Start lftside_btm*/
#lftside_btm{ 
```

# git - git cherry-pick -x 默认

> ID：11158359
> 
> 赞同：22
> 
> 时间：2012-06-22T14:36:34.397
> 
> 标签：git, config, cherry-pick

在[手册页中](https://git-scm.com/docs/git-cherry-pick#Documentation/git-cherry-pick.txt--x) `git cherry-pick`：

```
...

-x
    When recording the commit, append a line that says "(cherry picked
    from commit …)" to the original commit message in order to indicate
    which commit this change was cherry-picked from. ...

-r
    It used to be that the command defaulted to do -x described above,
    and -r was to disable it. Now the default is not to do -x so this
    option is a no-op.

... 
```

是否有配置设置可以在本地将默认设置回`-x`，并允许`-r`禁用它？我找不到，但我可能错过了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T20:10:12.417

没有为 制作别名`git cherry-pick -x`，不，这是不可能的。

（有趣的事实：在提交[abd6970](https://github.com/git/git/commit/abd6970acad5d758f48c13f7420367ae8216038e)中更改了默认值。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-09T17:33:32.420

通过运行将此别名添加到您的 ~/.gitconfig 中：

```
git config --global --replace-all alias.pick "cherry-pick -x" 
```

然后，您可以简单地运行：

```
git pick abc123 
```

您可以将“pick”的选择替换为对您有意义的任何词。

# jquery - 动画眼睛 - 为什么滚动时它们会跟随？

> ID：11158369
> 
> 赞同：2
> 
> 时间：2012-06-22T14:36:58.417
> 
> 标签：jquery, cursor, fixed

如果您导航到： http: [//laboratory.stratusweb.co.uk/lea/](http://laboratory.stratusweb.co.uk/lea/)（尚未完成）

您会注意到眼睛跟随光标。

我不明白为什么滚动时眼睛会向下移动页面？

欢迎任何建议！

忘记添加eyes.js 代码：

```
var windowX = -1;
var windowY = -1;
jQuery(document).ready(function() {
    var canvas = document.getElementById("debugCanvas");
    canvas.width = document.width;
    canvas.height = document.height;
    jQuery(document).mousemove(function(e) {
        var mousePosition = {
            'x' : e.pageX,
            'y' : e.pageY
        };
        var context = document.getElementById("debugCanvas").getContext("2d");
        jQuery(".eyeContainer").each(function(i, i2) {
            var eyeContainerPosition = $(this).offset();
            var eyePosition = {
                'x' : eyeContainerPosition.left + $(this).width() / 2 +1,
                'y' : eyeContainerPosition.top - $('body').scrollTop() + $(this).height() / 2 +1
            }
            var slope = getSlope(eyePosition, mousePosition);
            var toCenterdistance = getDistance(eyePosition, mousePosition);
            var targetDistance = toCenterdistance - ($(this).width() / 2);
            if(toCenterdistance > ($(this).width() / 2)) {
                var x = Math.cos(Math.atan(slope)) * targetDistance;
                if(eyePosition.x > mousePosition.x) {
                    x += mousePosition.x;
                } else if(eyePosition.x < mousePosition.x) {
                    x = -x + mousePosition.x;
                }
                var y = Math.sin(Math.atan(slope)) * targetDistance;
                if(eyePosition.x > mousePosition.x) {
                    y += mousePosition.y;
                } else if(eyePosition.x < mousePosition.x) {
                    y = -y + mousePosition.y;
                }
                x -= $(this).height() / 2;
                y -= $(this).height() / 2;
            } else {
                x = mousePosition.x - ($(this).width() / 2);
                y = mousePosition.y - ($(this).width() / 2);
            }
            var element=$("#eyeBall_" + $(this).attr("rel"));
            element.css({
                'left' : x + 'px',
                'top' : y + 'px',
            });
        });
    })
});
function getSlope(loc1, loc2) {
    return (loc1.y - loc2.y) / (loc1.x - loc2.x);
}
function getDistance(loc1, loc2) {
    return Math.sqrt(Math.pow((loc1.x - loc2.x), 2) + Math.pow((loc1.y - loc2.y), 2));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:51:11.757

这一行：

```
var eyeContainerPosition = $(this).offset(); 
```

根据页面滚动的距离返回不同的值——它返回相对于文档顶部的偏移量，而不是窗口顶部。

换线试试

```
'y' : eyeContainerPosition.top + $(this).height() / 2 +1 
```

和

```
'y' : eyeContainerPosition.top - $('body').scrollTop() + $(this).height() / 2 +1 
```

来弥补这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:41:01.470

要在滚动时将某些元素保持在屏幕上的固定位置，可以指定 CSS 样式属性`position: fixed`。

[关于位置属性的 W3C 文档。](http://www.w3schools.com/cssref/pr_class_position.asp)

**更新：**

当你查看源代码时，你会看到`<div class="big_face_holder">`持有眼睛的 div 确实已经`position: fixed`设置好了。

# php - 自定义字段如何在 paypal ipn 中工作？

> ID：11158375
> 
> 赞同：0
> 
> 时间：2012-06-22T14:37:32.533
> 
> 标签：php, mysql, paypal

您好，我正在尝试为我的游戏用户制作某种脚本，将游戏中的商品发送到他们的帐户。

首先，我要存储一个变量，例如 uniqueid

我想做的是在购买后在 MySQL 表中找到该变量。我知道 paypal 中有自定义字段，但我太愚蠢了，无法理解如何使用它。我只需要对它有一个简单的了解，剩下的我可以做。

我已经进行了 2 周的谷歌搜索，但在这方面我只是一个困惑的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:44:52.553

在提交付款或订阅时设置此项

```
 <input type="hidden" name="custom" value="'.$custom.'"/> 
```

它应该在 ipn 上以 $_POST['custom'] 的形式提供

# linux - Linux 上的 setitimer 和信号计数。信号计数与运行时间成正比吗？

> ID：11158377
> 
> 赞同：1
> 
> 时间：2012-06-22T14:37:35.130
> 
> 标签：linux, linux-kernel, profiling, setitimer

有一个可以`setitimer`在 Linux 上使用的测试程序（内核 2.6；HZ=100）。它设置各种定时器每10毫秒发送一次信号（实际上是设置为9毫秒，但时间片是10毫秒）。然后程序运行一段固定时间（例如 30 秒）并对信号进行计数。

是否保证信号计数与运行时间成正比？每次运行和每种计时器类型 (-r -p -v) 的计数是否相同？

注意，系统上应该没有其他 cpu-active 进程；问题是关于固定 HZ 内核的。

```
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <unistd.h>
#include <sys/time.h>

/* Use 9 ms timer */
#define usecs 9000

int events = 0;
void count(int a) {
    events++;
}

int main(int argc, char**argv)
{
    int timer,j,i,k=0;
    struct itimerval timerval = {
        .it_interval = {.tv_sec=0, .tv_usec=usecs},
        .it_value = {.tv_sec=0, .tv_usec=usecs}
    };
    if ( (argc!=2) || (argv[1][0]!='-') ) {
        printf("Usage: %s -[rpv]\n  -r - ITIMER_REAL\n  -p - ITIMER_PROF\n  -v - ITIMER_VIRTUAL\n", argv[0]);
        exit(0);
    }
    switch(argv[1][1]) {
        case'r': 
            timer=ITIMER_REAL;
            break;
        case'p':
            timer=ITIMER_PROF;
            break;
        case'v':
            timer=ITIMER_VIRTUAL;
    };
    signal(SIGALRM,count);
    signal(SIGPROF,count);
    signal(SIGVTALRM,count);
    setitimer(timer, &timerval, NULL);
    /* constants should be tuned to some huge value */
    for (j=0; j<4; j++)
      for (i=0; i<2000000000; i++)
        k += k*argc + 5*k + argc*3;
    printf("%d events\n",events);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:03:59.923

*是否保证信号计数与运行时间成正比？*

是的。一般来说，对于所有三个计时器，代码运行的时间越长，接收到的信号数量就越多。

*每次运行和每种计时器类型 (-r -p -v) 的计数是否相同？*

不。

当使用 ITIMER_REAL 设置定时器时，定时器会实时递减。

当使用 ITIMER_VIRTUAL 设置时，定时器仅在进程在用户地址空间中执行时递减。因此，当进程进行系统调用或中断服务例程期间，它不会递减。所以我们可以预期 #real_signals > #virtual_signals

ITIMER_PROF 计时器在进程的用户空间执行期间和操作系统代表进程执行时（即在系统调用期间）都会递减。所以#prof_signals > #virtual_signals

当操作系统不代表进程执行时，ITIMER_PROF 不会递减。所以#real_signals > #prof_signals

总而言之，#real_signals > #prof_signals > #virtual_signals。

# c# - 如何使用某个 HResult 抛出异常？

> ID：11158379
> 
> 赞同：17
> 
> 时间：2012-06-22T14:37:46.830
> 
> 标签：c#, exception, testing, marshalling, hresult

我想测试以下代码：

```
private bool TestException(Exception ex)
{
    if ((Marshal.GetHRForException(ex) & 0xFFFF) == 0x4005)
    {
        return true;
    }
    return false;
} 
```

我想以`Exception`某种方式设置对象以返回正确的 HResult，但我在类中看不到`Exception`允许这样做的字段。

我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T15:35:14.633

我找到了三种方法来做到这一点：

1.  使用[`System.Runtime.InteropServices.ExternalException`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.externalexception.aspx)该类，将错误代码作为参数传递：

    ```
    var ex = new ExternalException("-", 0x4005); 
    ```

    感谢[@HansPassant](https://stackoverflow.com/users/17034/hans-passant)的评论解释了这一点。

2.  使用继承传递模拟异常以访问受保护的字段：

    ```
    private class MockException : Exception
    {
        public MockException() { HResult = 0x4005; }
    }

    var ex = new MockException(); 
    ```

3.  使用 .NET Reflection 设置基础字段：

    ```
    BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;
    FieldInfo hresultFieldInfo = typeof(Exception).GetField("_HResult", flags);

    var ex = new Exception();
    hresultFieldInfo.SetValue(ex, 0x4005); 
    ```

将这些异常中的任何一个传递给问题中的方法，将导致该方法返回`true`. 我怀疑第一种方法最有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T02:57:57.630

我发现创建一个扩展来做到这一点很有用。

```
using System.Reflection;

namespace Helper
{
    public static class ExceptionHelper 
    {
       public static Exception SetCode(this Exception e, int value)
       {
           BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;
           FieldInfo fieldInfo = typeof(Exception).GetField("_HResult", flags);

           fieldInfo.SetValue(e, value);

           return e;
        }
} 
```

然后抛出异常：

```
using Helper;

public void ExceptionTest()
{
    try
    {
        throw new Exception("my message").SetCode(999);
    }
    catch (Exception e)
    {
        string message = e.Message;
        int code = e.HResult;
    }
} 
```

# ruby-on-rails - 在rails 3中排序has_many关系

> ID：11158381
> 
> 赞同：0
> 
> 时间：2012-06-22T14:37:53.930
> 
> 标签：ruby-on-rails, activerecord, has-many

我的模型是

```
class Job < ActiveRecord::Base
    belongs_to :client
end

class Client < ActiveRecord::Base
   has_many :jobs
end 
```

在控制器中，我希望获得具有排序作业的客户。如果我这样做（不订购）

```
@client = Client.find(params[:id], :include => {:jobs => :status}) 
```

没关系。但如果我添加订购：

```
@client = Client.find(params[:id], :include => {:jobs => :status}, :order => 'job.level DESC') 
```

// :order 是动态设置的（不在这个例子中） - 我知道 has_many 中的 :order。

结果只有 3 行（对于每个 job.level 一个）。我记录了 sql 查询并执行了它，结果还可以，但是在应用程序中我只有这 3 行。什么是对工作进行排序的正确方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:43:23.817

您可以尝试直接在模型中而不是控制器中指定顺序

```
class Job < ActiveRecord::Base
  belongs_to :client, :order => 'level DESC'
end 
```

或者

```
class Client < ActiveRecord::Base
  has_many :jobs, :order => 'level DESC'
end 
```

另外，Jobs 模型中的级别是什么数据类型？如果您可以发布您的 sql 查询日志，那也会很有帮助。还有，你试过了吗

```
:order => 'jobs.level' 
```

而不是您发布的代码中使用的单数 job.level ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:10:07.083

这不是我最初想要的，但它有效，所以这就是答案

```
@jobs = @client.jobs.find(:all, :order => sort_column + " " + sort_direction) 
```

# jenkins - 詹金斯不允许同一个作业在同一个节点上同时运行？

> ID：11158382
> 
> 赞同：9
> 
> 时间：2012-06-22T14:37:53.977
> 
> 标签：jenkins

我有 4 个节点和 2 个工作。任何节点都可以同时运行 2 个作业，任何作业都可以同时执行。我希望能够限制在同一台机器上同时运行相同的作业。例如：

作业：J1 和 J2 节点：N1、N2、N3 和 N4

我可以同时在同一个节点上运行 J1 和 J2。我可以同时在 N1 和 N3 上运行 J1。但我不想同时在同一个节点上运行 J1 和另一个 J1 版本。

我尝试过“Locks and Latches”、“Jenkins Exclusive Execution”、“Exclusion Plugin”插件，这些插件在尝试协调不同的工作时会很好用。但我的案例是尝试管理同一工作的不同构建实例。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T12:58:53.867

试试[Throttle Concurrent Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin)。它允许限制每个节点或全局运行的项目的并发构建数量。在您的情况下，您应该设置：

*   最大并发构建总数：0（= 无限制）
*   每个节点的最大并发构建数：1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:15:01.853

上次我检查过，每个作业只有一个*实例*可以一次运行，即：

如果您按 [build] 键两次，作业的第一个实例将被执行，并且只有在它完成后 - 下一个实例才会开始。

你真的能够同时运行 Job1-Build1 和 J1-Build2 吗？

# android - android - 指形状内的颜色

> ID：11158383
> 
> 赞同：2
> 
> 时间：2012-06-22T14:37:55.603
> 
> 标签：android, themes

我想在形状内引用我自定义定义的颜色属性，它总是会导致错误。

首先我声明attr：

```
<resources>
    <attr name="divider_color" format="color|reference" />
</resources> 
```

在我的主题中，我声明了价值：

```
 <style name="myTheme" parent="android:style/Theme.Dialog">
          <item name="divider_color">@color/red</item>
 </style> 
```

如果我这样访问它，它工作正常：

```
 android:background="?divider_color"/> 
```

但我想在一个形状内使用它：

```
<shape
    <gradient
        android:angle="0"
        android:centerColor="?divider_color"
        android:endColor="#00000000"
        android:startColor="#00000000"
        android:type="linear" />

</shape> 
```

我收到此错误：

**E/AndroidRuntime(3117)：原因：java.lang.UnsupportedOperationException：无法转换为颜色：type=0x2**

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T10:52:15.110

你不能直到 L 看到这里：[https ://code.google.com/p/android/issues/detail?id=26251](https://code.google.com/p/android/issues/detail?id=26251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:03:54.780

我不知道。因此，我检查了该异常源自操作系统的位置：[http ://androidxref.com/4.0.4/xref/frameworks/base/core/java/android/content/res/TypedArray.java#326](http://androidxref.com/4.0.4/xref/frameworks/base/core/java/android/content/res/TypedArray.java#326)

```
307    public int getColor(int index, int defValue) {
308        index *= AssetManager.STYLE_NUM_ENTRIES;
309        final int[] data = mData;
310        final int type = data[index+AssetManager.STYLE_TYPE];
311        if (type == TypedValue.TYPE_NULL) {
312            return defValue;
313        } else if (type >= TypedValue.TYPE_FIRST_INT
314            && type <= TypedValue.TYPE_LAST_INT) {
315            return data[index+AssetManager.STYLE_DATA];
316        } else if (type == TypedValue.TYPE_STRING) {
317            final TypedValue value = mValue;
318            if (getValueAt(index, value)) {
319                ColorStateList csl = mResources.loadColorStateList(
320                        value, value.resourceId);
321                return csl.getDefaultColor();
322            }
323            return defValue;
324        }
325
326        throw new UnsupportedOperationException("Can't convert to color: type=0x"
327                + Integer.toHexString(type));
328    } 
```

看起来“类型”没有得到正确解释。此方法认为您正在传递一个带有 type 的属性`TYPE_ATTRIBUTE`，如此[处所示](http://androidxref.com/2.3.6/xref/frameworks/base/include/utils/ResourceTypes.h#240)。这并不能回答问题，但也许它可以帮助你缩小范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-07T09:01:58.450

这是Android中的一个错误。这已在 Lollipop 中修复，因此应该可以在 L&M 上使用，但在以前的设备上它会崩溃

# c# - 如果我只有一个 DataRow，我可以访问整个 DataTable 吗？

> ID：11158385
> 
> 赞同：1
> 
> 时间：2012-06-22T14:38:01.583
> 
> 标签：c#, datatable

DataRow 包含一个 Table 属性，它似乎返回了该行所属的整个 Table。

我想知道我是否可以安全地使用那张桌子，或者是否有陷阱。在[http://msdn.microsoft.com/en-us/library/system.data.datarow.table.aspx](http://msdn.microsoft.com/en-us/library/system.data.datarow.table.aspx)文档中，它说*“DataRow 不一定属于任何表的行集合。当 DataRow已创建但未添加到 DataRowCollection。”* ，但我知道我的行属于一个表。

就指针而言，如果 DataTable 中的每一行都指向原始 DataTable，那么我很高兴。这就是“表”属性的全部吗？

只是为了解释为什么我要基于单个 DataRow 获取整个表：我正在使用 linq 连接两个（有时更多）表。我想要一个通用例程，它接受 linq (var) 的输出，并生成一个包含所有结果的单个 DataTable。我在 stackoverflow 上打开了另一个问题（[加入 LINQ，避免在“new {}”中显式命名属性？](https://stackoverflow.com/questions/11144213/join-in-linq-that-avoids-explicitly-naming-properties-in-new#comment14613975_11144213)），但到目前为止似乎还没有一个通用的解决方案，所以我正在尝试编写一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:40:57.227

如果您知道该行是表格的一部分，那么您可以毫无问题地访问它。如果存在行可能未与表关联的可能性，则检查属性是否为空。

```
if(row.Table == null)
{
}
else
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:40:21.873

只要不为空，就可以自由使用。

# apache-flex - flex：随机 NetConnection.Call.Failed：HTTP：失败

> ID：11158394
> 
> 赞同：4
> 
> 时间：2012-06-22T14:38:45.613
> 
> 标签：apache-flex, websphere, amf, netconnection

我们遇到一些随机的**NetConnection.Call.Failed: HTTP: Failed** when using the flex 4 **mx.messaging.channels::SecureAMFChannel**

我们的本地服务器（同一台机器上的服务器/客户端）从来没有遇到过这个问题，但是当我们上线时，一些用户随机遇到了这个问题（大约 800 位测试用户中的 5%）。

最近，我终于能够每隔一段时间在一*台客户端*机器（windows XP）上重现这个问题，在我们的局域网中使用同一局域网中的远程服务器（但不是在共享同一个局域网的其他客户端机器上）大致相同的配置）。

当这种情况发生时：

*   使用 firebug / flashbug ：我可以看到 amf 请求已发送并等待响应。
*   在服务器上，日志中没有任何内容（未收到请求）。
*   超时后，客户端显示上述错误（**http 代码 404**）。
*   然后对于后续的请求，一切都会恢复正常，直到错误最终再次发生

（客户端是 Windows XP、Firefox + adobe flash player，服务器是 WebSphere 7）

我的问题是：有没有办法找出发生了什么？是丢包吗？是因为客户端浏览器/adobe 播放器吗？

谢谢

[编辑]

使用 Wireshark（在客户端和服务器端），我可以看到当问题发生时没有建立 tcp 连接： - Firebug 检测到传出的 http amf 请求 - Wireshark 没有检测到任何一方的任何活动。

所以它肯定是 Adob​​e Flash 插件/Firefox 插件容器，对吗？这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:20:45.930

设置我们浏览器的代理参数解决了这个问题（“自动检测”或“系统代理”的“无代理”）。

选择代理后，Adobe Flash 插件似乎会丢失。

# css - 具有不同边距颜色和居中内容的网页

> ID：11158395
> 
> 赞同：0
> 
> 时间：2012-06-22T14:38:54.670
> 
> 标签：css, html

我想构建一个页面，其中我的内容居中但响应迅速 - 它的最大宽度应为 960 像素，但如果窗口大小减小，它会减小。同时，我想让这个页面的背景在它的左右边距上有不同的颜色。我怎样才能做到这一点？如果我在主 div 上使用 margin:0 auto，我将无法再控制背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:48:11.060

对于您将拥有的内容

```
<div id="page">
  <div id="content"></div>
</div> 
```

如果你把你的css文件

```
page { 
  width: 100%;
  background: #333; }

content {
  width: 100%;
  max-width: 960px;
  margin-left: auto;
  margin-right: auto; } 
```

对于背景颜色，您可以尝试这样的技巧（这些将适用于内容）

```
border-right: 10px solid #blue;
border-left: 10px solid #white; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:56:44.467

只需让它有一个`max-width`和一个百分比宽度，两边都有边距自动。如果你想要一个多色的身体背景，你可以在背景上放置两个盒子，并给每个盒子一个不同的颜色。例如，现在将它们放置在背景上，例如负 z-index，以便其余部分留在视口上。在这里，我为你做了：

**来源**：http: [//jsfiddle.net/p8ZNz/4/](http://jsfiddle.net/p8ZNz/4/)

**全屏查看**：http : [//jsfiddle.net/p8ZNz/4/embedded/result/](http://jsfiddle.net/p8ZNz/4/embedded/result/)

**CSS**：

```
#left{
width:50%;
height:100px;
position:absolute;
top:0;
left:0;
background-color:red;
z-index:-1;
}   
#right{
width:50%;
height:100px;
position:absolute;
top:0;
left:50%;
background-color:blue;
z-index:-1;
}
#content{
position:relative;
width:90%;
height:100px;
max-width:960px;
margin:0px auto;
background-color:green;
color:#FFF;
} 
```

对于所有宽度，背景将保持 50%-50%，如果调整窗口大小，居中的框会变大，直到达到 960px 宽。如果你想让背景完整，只要给它一个 100% 的高度！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:46:24.447

[http://jsfiddle.net/iambriansreed/Sw9ae/](http://jsfiddle.net/iambriansreed/Sw9ae/)

HTML

```
<div class="left"></div>
<div class="right"></div>
<div class="centered">centered</div> 
```

CSS

```
.left,.right {
    position: absolute;
    width: 100px;
    top: 0;
    bottom: 0;
}
.left {
    left: 0;
    background: blue;
}
.right {
    right: 0;
    background: red;
}
.centered {
    position: relative;
    margin: 0 auto;
    max-width: 400px;
    background: #ccc;
}​ 
```

# c# - C#中的矩阵乘法

> ID：11158401
> 
> 赞同：2
> 
> 时间：2012-06-22T14:39:25.410
> 
> 标签：c#, matrix

我在将两个尺寸为 5000x1024 的矩阵相乘时遇到问题。我试图以传统的方式通过循环来完成它，但它需要很长时间。有没有实现和优化矩阵运算的好库，或者没有3个循环的算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:58:55.120

您是否考虑过使用 OpenCL？Cloo（C# OpenCL 库）发行版中的一个示例是大型 2D 矩阵乘法。

与 CUDA 不同，OpenCL 内核将在您的 GPU（如果可用且受支持）或 CPU 上运行。在 GPU 上，您会看到非常、非常、非常显着的速度提升。我的意思是，*非常*戏剧化，大约 10 倍到 100 倍，这取决于你的内核的效率和你的 GPU 有多少内核。（基于 Fermi 的 NVidia 卡将有 384-512 之间，而新的 600 有大约 1500。）

如果你对走这条路不感兴趣——尽管任何做像这样的数字密集型、易于并行化操作的人都应该使用 GPU——确保你至少使用了 C# 的内置并行化：

```
Parallel.For(
  0
  ,5000
  , (i) => { 
    for(var j=0;j<1024;j++)
    {
      result[i,j] = .....
    }
); 
```

另外，请查看 GPU.NET 和 Brahma。Brahma 允许您使用 LINQ 在 C# 中构建 OpenCL 内核。肯定会降低学习曲线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:42:31.717

看看[Strassen 算法](http://en.wikipedia.org/wiki/Strassen_algorithm)，它的运行时间约为。O(n ^(2.8) ) 而不是 O(n ³ ) 用一种简单的矩阵相乘方法。一个问题是它并不总是稳定的，但在非常高的维度上工作得很好。此外，它真的很复杂，所以我建议您重新考虑您的设计，并可能减小矩阵的大小或将您的问题分成更小的部分。

但请记住，没有特殊属性的矩阵乘法（如[Aidan](https://stackoverflow.com/users/257338/aidan)提到的）几乎不可能优化。这里有一个例子：[Coppersmith-Winograd 算法](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)需要 O(n ^(2.3737) )，它是迄今为止最好的矩阵乘法算法之一！最好的选择是使用 OpenCL 和 GPU（由[David](https://stackoverflow.com/users/135769/david-lively)提到），或者查看其他优化的编程语言，例如带有包的 Python `numpy`。

祝你好运！

# python - 从输入文件中的唯一字符串中去除标点符号

> ID：11158404
> 
> 赞同：0
> 
> 时间：2012-06-22T14:39:43.260
> 
> 标签：python, string, punctuation

这个问题（[Best way to strip punctuation from a string in Python](https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python)）涉及从单个字符串中去除标点符号。但是，我希望从输入文件中读取文本，但只打印出所有字符串的一份副本而不结束标点符号。我已经开始这样的事情：

```
f = open('#file name ...', 'a+')
for x in set(f.read().split()):
    print x 
```

但问题是，如果输入文件有，例如，这一行：

```
This is not is, clearly is: weird 
```

它以不同的方式处理“is”的三种不同情况，但我想忽略任何标点符号并让它只打印“is”一次，而不是三次。如何删除任何类型的**结束**标点符号，然后将生成的字符串放入集合中？

谢谢你的帮助。（我对 Python 真的很陌生。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:43:33.803

```
import re

for x in set(re.findall(r'\b\w+\b', f.read())): 
```

应该更能正确区分单词。

此正则表达式查找紧凑的字母数字字符组（az、AZ、0-9、_）。

如果您只想查找字母（无数字且无下划线），则将 替换`\w`为`[a-zA-Z]`.

```
>>> re.findall(r'\b\w+\b', "This is not is, clearly is: weird")
['This', 'is', 'not', 'is', 'clearly', 'is', 'weird'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:50:24.473

例如，如果您不关心用空格替换标点符号，则可以使用翻译表。

```
>>> from string import maketrans
>>> punctuation = ",;.:"
>>> replacement = "    "
>>> trans_table = maketrans(punctuation, replacement)
>>> 'This is not is, clearly is: weird'.translate(trans_table)
'This is not is  clearly is  weird'
# And for your case of creating a set of unique words.
>>> set('This is not is  clearly is  weird'.split())
set(['This', 'not', 'is', 'clearly', 'weird']) 
```

# assembly - Big Endian 到 Little Endian 使用 MIPS 没有逻辑运算？

> ID：11158409
> 
> 赞同：4
> 
> 时间：2012-06-22T14:40:01.510
> 
> 标签：assembly, mips

我正在使用 MIPS (QtSpim) 将 32 位字从 Big Endian 转换为 Little Endian。我在下面显示的内容经过检查并且正确。但是我想知道还有哪些其他方法可以让我进行转换。我虽然只使用旋转和移位，但没有逻辑操作我无法做到。

所以我的问题是，它可以在没有逻辑运算的情况下完成吗？

![在此处输入图像描述](../Images/1056cdecc6f97e32d6cb1af561fc058c.png)

```
li $t0,0x12345678     # number to be converted supposed to be in $t0
rol $t1,$t0,8         
li $t2,0x00FF00FF     # $t2 contains mask 0x00FF00FF
and $t3,$t1,$t2     # byte 0 and 2 valid
ror $t1,$t0,8       
not $t2,$t2        # $t2 contains mask 0xFF00FF00
and $t1,$t1,$t2     # byte 1 and 3 valid
or $t3,$t3,$t1      # little endian-number in $t3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:46:09.297

这是一个不使用逻辑运算符的解决方案。然而，这只是一个黑客：

```
 li $t0,0x12345678   # number to be converted supposed to be in $t0

  swl $t0, scratch+3
  lwl $t1, scratch    # Load MSB in LSB
  lwr $t1, scratch+3  # Load LSB in MSB

  swl $t0, scratch+2
  lwr $t2, scratch    # Swap second and
  lwl $t2, scratch+1  # third bytes

  sw $zero, scratch 
  lwl $t2, scratch    # Leave MSB and LSB in zero
  lwr $t2, scratch+3
  addu $t3, $t1, $t2  # Add partial results to get final result

 .data 0x2000  # Where to locate scratch space (4 bytes)
scratch:
 .space 4 
```

输入是`$t0`，部分结果在`$t1`，`$t2`最终结果在`$t3`。它还使用 4 个字节的内存（位于`scratch`）

# jquery - 延迟显示固定条，但立即隐藏它

> ID：11158412
> 
> 赞同：0
> 
> 时间：2012-06-22T14:40:21.563
> 
> 标签：jquery

我目前有以下代码在某个点后延迟显示固定条。

如果您向上滚动到顶部，代码会隐藏固定栏，但会在 2 秒后自动显示该栏，即使滚动点低于 70，因此应该将其全部隐藏。

```
 $(window).scroll(function() {
        if($(window).scrollTop() > 70) {
            $('#mini-header').delay(2000).show(0);
        } else if($(window).scrollTop() < 70) {
            $('#mini-header').hide();
        }
    }); 
```

一个[jsFiddle](http://jsfiddle.net/fKqMN/)显示了行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:46:53.980

您可以通过- [FIDDLE DEMO](http://jsfiddle.net/fKqMN/1/)`else if`将您更改为简单`else`并隐藏 div`display: none`

```
$(document).ready(function() {
    $(window).scroll(function() {
            if($(window).scrollTop() > 70) {
                $('#mini-header').delay(2000).show();
            } else {
                $('#mini-header').css("display", "none");
            }
    });
}); 
```

**[更新的演示](http://jsfiddle.net/fKqMN/23/)**

```
$(document).ready(function() {
    $(window).scroll(function() {
            if ( $(window).scrollTop() > 70 ) {
                $('#mini-header').stop().animate({ opacity:1 }, 2000, function() {
                    $(this).css("display", "block");
                });
            } else {
                $('#mini-header').stop().animate({ opacity:0 }).css("display", "none");
            }
    });
}); 
```

`animate()`行为就像一个但`delay()`有所不同 - 你可以`stop()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:45:21.193

从 show() 中删除 0 似乎可以解决问题。[http://jsfiddle.net/the_archer/Ds4Ls/](http://jsfiddle.net/the_archer/Ds4Ls/)

# eclipse - 如何从另一个 GMF 图生成 GMF 图？

> ID：11158413
> 
> 赞同：1
> 
> 时间：2012-06-22T14:40:21.783
> 
> 标签：eclipse, eclipse-gmf

假设我有一个 Ecore 模型 A（包含 ClassP、ClassQ），我使用 GMF 为其生成了一个图形编辑器。现在，我有另一个 Ecore 模型 B，它是模型 A 的超集。比如说，它有 ClassX、ClassY、ClassP、ClassQ。

我想要做的是，使用基于模型 A 的 GMF 编辑器设计图形表示，然后能够在基于模型 B 的 GMF 图表编辑器中导入该图表，这样我就没有在使用模型 B 的生成图中再次绘制模型 A 的元素。

这有可能以某种方式吗？至少接近这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:55:57.240

也许为时已晚，您已经有了解决方案，但是昨天我正在阅读本教程，也许它会有所帮助！[http://gmfsamples.tuxfamily.org/wiki/doku.php?id=emf_tutorial2](http://gmfsamples.tuxfamily.org/wiki/doku.php?id=emf_tutorial2)。在第 13 章的 emf 书中也有一些与此相关的页面。我不确定这是否是您需要的，但我希望它会有所帮助。

# c - 简单的 C 程序不起作用

> ID：11158419
> 
> 赞同：-1
> 
> 时间：2012-06-22T14:40:46.637
> 
> 标签：c

我写了这个程序：

```
#include <stdio.h>

/*Part B

Write a program that:

defines an array of 10 ints
assigns factorial(x) to array element x, for x in the range 0 through 9, inclusive
copies those array elements into a second array of 10 ints, but in reverse order (i.e., element 0 is factorial(9), element 1 is factorial(8), and so on)
prints out that second array to the terminal*/

int factorial(int n){
    int factorial = 1;
    while(n>1){
        factorial = n*factorial;
    }
    return factorial;
}

int main(int argc, char **argv){
    int arr1[10];
    int arr2[10];

    int i = 0;
    for(i = 0; i<10; i++){
        printf("%d", i);
        arr1[i] = factorial(i);
    }

    for(i = 9; i>=0; i--){
        arr2[i] = arr1[9-i];
        printf("%d ", arr2[i]);
    }
    printf("\n");
    return 0;
} 
```

但是当我运行它时，它就坐在那里。我认为这与对阶乘的调用有关，因为当我将其注释掉时，它会立即起作用，但随着它的加入，它甚至没有到达第一个 printf。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:42:40.207

```
while(n > 1){
    factorial = n*factorial;
} 
```

你错过了`n--`；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:43:10.807

你的while循环：

```
while(n>1){
    factorial = n*factorial;
} 
```

将永远运行。该循环中没有什么可以改变`n`的，所以如果进入循环，那么我们知道`n`将永远大于`1`。`n`你应该在你的循环中递减：

```
while(n > 1){
    factorial = n--*factorial;
} 
```

如果您不习惯看到这样的递减，您也可以在新行上执行此操作：

```
while(n>1){
    factorial = n*factorial;
    n--;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:43:10.720

你应该减少`n`功能`factorial`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:47:38.207

您对阶乘方法的实现有误。

```
int factorial(int n){
 int factorial = 1;
 while(n>1){
     factorial = n*factorial;
     n--;
 }
 return factorial;
} 
```

您的代码根本没有对 n 变量做任何事情并保持乘法，而不会减少 n 值。希望这可以帮助

# xml - XSD：无法使用在同一个 XSD 中定义的类型

> ID：11158423
> 
> 赞同：0
> 
> 时间：2012-06-22T14:40:50.363
> 
> 标签：xml, xsd

我正在编写以下 XSD，但是我遇到了问题。无论出于何种原因，我都不允许使用我在 XSD 中定义的简单类型。我收到此错误：`Cannot resolve the name 'mySimpleType1' to a(n) 'simpleType definition' component.`

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns="http://myNamespace" 
    targetNamespace="http://myDifferentNamespace" 
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified">

    <xsd:simpleType name="mySimpleType1">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="Added"/>
            <xsd:enumeration value="Modified"/>
            <xsd:enumeration value="Deleted"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="mySimpleType2">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="foo"/>
            <xsd:enumeration value="bar"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:attributeGroup name="myAttributeGroup">
        <xsd:attribute name="attribute1" type="mySimpleType1" use="optional"/>
        <xsd:attribute name="attribute2" type="mySimpleType2" use="optional"/>
    </xsd:attributeGroup>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:03:53.277

您的目标命名空间上没有命名空间前缀...

我建议阅读以下内容：http: [//msdn.microsoft.com/en-us/library/aa258639 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258639(v=sql.80).aspx)

这是另一个创建模式的好指南：http: [//www.ibm.com/developerworks/library/xml-schema/](http://www.ibm.com/developerworks/library/xml-schema/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T12:39:28.567

问题是`mySimpleType1`从 xmlns 中查找的`http://myNamespace`（类型中没有前缀 - 使用没有后缀的 xmlns），但是您已经在`http://myDifferentNamespace`（由 targetNamespace 定义）中定义了它。

**您可能想使用`xmlns`与 相同`targetNamespace`。**

否则，您需要定义例如`xmlns:mydiff="http://myDifferentNamespace"`并将类型称为`type="mydiff:mySimpleType1"`.

检查[https://stackoverflow.com/a/43336017/1576461](https://stackoverflow.com/a/43336017/1576461)了解有关 xmlns 的更多信息。

# html - 最后一个孩子似乎没有工作

> ID：11158425
> 
> 赞同：0
> 
> 时间：2012-06-22T14:40:55.807
> 
> 标签：html, css, css-selectors

这是我的代码：

HTML：

```
<div id="nav">
 <ul>
  <li><a href="#">Link 1</a></li>
  <li><a href="#">Link 2</a></li>
  <li><a href="#">Link 3</a></li>
  <li><a href="#">Link 4</a></li>
 </ul>
</div> 
```

CSS：

```
#nav ul li a {
 width:162px;
 background:url('http://i.imgur.com/DmeCv.png') -164px 0px;

#nav ul li:first-child a {
 width:164px;
 background:url('http://i.imgur.com/DmeCv.png');
}

#nav ul li:last-child a {
 background:url('http://i.imgur.com/DmeCv.png') -326px 0px;
} 
```

到目前为止，一切都很好。这有效，并正确显示图像。

```
#nav ul li a:hover {
 background:url('http://i.imgur.com/DmeCv.png') -164px -50px;
}

#nav ul li:first-child a:hover {
 background:url('http://i.imgur.com/DmeCv.png') 0px -50px;

#nav ul li:last-child a:hover {
 background:url('http://i.imgur.com/DmeCv.png') -326px -50px;
} 
```

然而，这不起作用。它显示中间部分悬停图像，而不是最后一个子悬停图像。

这是一个例子：

[http://result.dabblet.com/gist/2973127/8bf204a16e7caca43ad129cad141fa4810bf18ce](http://result.dabblet.com/gist/2973127/8bf204a16e7caca43ad129cad141fa4810bf18ce)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T14:45:16.850

在您的 CSS 示例中，您`}`在`first-child a:hover`.

# wordpress - 如何使复选框保留其选项？

> ID：11158428
> 
> 赞同：0
> 
> 时间：2012-06-22T14:40:58.827
> 
> 标签：wordpress, checkbox, themes, radio-button, option

我已经建立了一个带有选项面板的 WP 主题，但我有一个小问题。

如果您正在查看下面的代码，我有两个复选框（type="radio"）问题是这些复选框在我刷新选项页面后没有保留它们的选项，但是它们被添加到数据库中，因为我看到了更改在前端。

```
public static function optionsframework_slider_function($id,$std,$oldorder,$order,$int){

    $data = get_option(OPTIONS);

    $slider = '';
    $slide = array();
    $slide = $data[$id];

    if (isset($slide[$oldorder])) { $val = $slide[$oldorder]; } else {$val = $std;}

    //initialize all vars
    $slidevars = array('type', 'title', 'desc', 'content');

    foreach ($slidevars as $slidevar) {
        if (!isset($val[$slidevar])) {
            $val[$slidevar] = '';
        }
    }

    //begin slider interface    
    if (!empty($val['title'])) {
        $slider .= '<li><div class="slide_header"><strong>'.stripslashes($val['title']).'</strong>';
    } else {
        $slider .= '<li><div class="slide_header"><strong>Slide '.$order.'</strong>';
    }

    $slider .= '<input type="hidden" class="slide pixy-input order" name="'. $id .'['.$order.'][order]" id="'. $id.'_'.$order .'_slide_order" value="'.$order.'" />';

    $slider .= '<a class="slide_edit_button" href="#">Edit</a></div>';

    $slider .= '<div class="slide_body">';

    $slider .= '<label>Slide Type</label>';
    $slider .= '
    <div class="slide pixy-checkbox">
    <input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="html"><div>HTML Slide</div>
    <input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="video"><div>Video/ Image Wide Slide</div>
    </div>
    ';

    $slider .= '<label>Slide Title</label>';
    $slider .= '<input class="slide pixy-input pixy-slider-title" name="'. $id .'['.$order.'][title]" id="'. $id .'_'.$order .'_slide_title" value="'. stripslashes($val['title']) .'" />';

    $slider .= '<label>Slide Description</label>';
    $slider .= '<input class="slide pixy-input" name="'. $id .'['.$order.'][desc]" id="'. $id .'_'.$order .'_slide_desc" value="'. $val['desc'] .'" />';

    $slider .= '<label>Slide Content</label>';
    $slider .= '<textarea class="slide pixy-input" name="'. $id .'['.$order.'][content]" id="'. $id .'_'.$order .'_slide_content" cols="8" rows="8">'.stripslashes($val['content']).'</textarea>';

    $slider .= '<a class="slide_delete_button" href="#">Delete</a>';
    $slider .= '<div class="clear"></div>' . "\n";

    $slider .= '</div>';
    $slider .= '</li>';

    return $slider;
} 
```

复选框的代码是（*可以在上面的代码中找到）：

```
$slider .= '<label>Slide Type</label>';
        $slider .= '
        <div class="slide pixy-checkbox">
        <input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="html"><div>HTML Slide</div>
        <input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="video"><div>Video/ Image Wide Slide</div>
        </div>
        '; 
```

这是在前端打印滑块的代码：

```
<?php
            $slides = $data['pixy_pixyGallery_slider'];
            if($slides) {
                foreach ($slides as $slide) {
                    echo '<li data-type="'.$slide['type'].'" data-title="'.$slide['title'].'" data-caption="'.$slide['desc'].'">';
                    echo do_shortcode( $slide['content'] );
                    echo '</li>';
               }
            }
            ?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:58:18.163

就像是？

```
$slider .= '<label>Slide Type</label>';
$slider .= '<div class="slide pixy-checkbox">';

$slider .= '<input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="html"';
if($order=='html'){ $slider .= 'checked="checked">'; }else{ $slider .= '>' }
$slider .="<div>HTML Slide</div>";

$slider .= '<input class="slide pixy-input pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="video"';
if($order=='video'){ $slider .= 'checked="checked">'; }else{ $slider .= '>' }
$slider .= '<div>Video/ Image Wide Slide</div>';
$slider .= '</div>'; 
```

这取决于 $order 的值，看看它是否设置为预设值？你需要知道这个值才能检查它！

或将其设置为检查选项值（如果您设置了 1！）？哪个更容易。

马蒂

# jsf - rich:file上传更多文件信息

> ID：11158431
> 
> 赞同：0
> 
> 时间：2012-06-22T14:41:04.070
> 
> 标签：jsf, upload, richfaces

我想上传很多文件，为此我选择了rich:fileUpload 控件。

我的问题是我需要为每个文件添加更多信息，例如我希望在该文件的应用程序中出现的标题。我该怎么做，并发送到 fileUploadListener 方法以使用 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:29:44.023

根据您的问题，[RichFaces FileUpload 演示](http://livedemo.exadel.com/richfaces-demo/richfaces/fileUpload.jsf)包含同时处理 1 个或多个文件的文件上传所需的所有信息。

如果您想添加更多数据（如值和其他数据），那么您应该使用标签属性`h:inputText`来传递它们，因为这是在 ajax 调用中发生的事件，因此您的 s 不会调用属性的设置器。`valueChangeListener``value``fileUploadListener``UIComponent`

一些解释行为的代码：

```
<h:panelGrid cols="2">
    <h:outputText value="File Title:">
    <h:inputText value="#{fileBean.fileTitle}" immediate="false"
        valueChangeListener="#{fileBean.valueChangeFileTitle}" />
    <h:outputText value="File:">
    <rich:fileUpload
        fileUploadListener="#{bean.fileUpload}">
    </rich:fileUpload>
</h:panelGrid> 
```

处理请求的 Bean

```
public class Bean {

    private String fileTitle;

    public Bean() {
    }

    //getters and setters...
    public String getFileTitle() {
        return this.fileTitle;
    }

    public void setFileTitle(String fileTitle) {
        System.out.println("Calling the setter");
        this.fileTitle = fileTitle;
    }

    public void valueChangeFileTitle(ValueChangeEvent e) {
        System.out.println("Calling the ValueChangeListener");
        fileTitle = (String)e.getNewValue();
}

    //this will be invoked by an ajax call
    //the setter of the view won't be invoked for fileTitle
    //instead, we should take its value using valueChangeListener
    public void fileUpload(UploadEvent ue) {
        MyFileManager mfm = MyFileManager.getFileManager();
        MyFile myFile = new MyFile();
        myFile.setTitle(this.fileTitle);
        myFile.setName(ue.getUploadItem().getFileName());
        myFile.setData(ue.getUploadItem().getData());
        mfm.createFile(myFile);
    }
} 
```

另外，避免`System.out.println`在您的代码中使用调用，我这样做是为了让您了解将调用什么方法，而不是使用[Log4j](http://logging.apache.org/log4j/)之类的 Logger 。

# ruby - 如何检测哈希数组中的值

> ID：11158433
> 
> 赞同：0
> 
> 时间：2012-06-22T14:41:11.237
> 
> 标签：ruby

我有哈希数组：

```
@array = [{:id => "1", :status=>"R"},
      {:id => "1", :status=>"R"},
      {:id => "1", :status=>"B"},
      {:id => "1", :status=>"R"}] 
```

如何检测它是否包含在状态为“B”的散列中？就像在简单的数组中一样：

```
@array = ["R","R","B","R"]
puts "Contain B" if @array.include?("B") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:43:50.610

使用[`any?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)：

```
@array.any? { |h| h[:status] == "B" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:50:20.290

数组（实际上是可枚举）有一个`detect`方法。`nil`如果它没有检测到任何东西，它会返回 a ，因此您可以像 Andrew Marshall 一样使用它`any`。

```
@array = [{:id => "1", :status=>"R"}, 
      {:id => "1", :status=>"R"}, 
      {:id => "1", :status=>"B"}, 
      {:id => "1", :status=>"R"}] 
puts "Has status B" if @array.detect{|h| h[:status] == 'B'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T20:51:33.123

只是补充一下 steenslag 所说的：

`detect` ***并不总是返回零。***

如果检测没有“检测”（找到）一个项目，您可以传入一个 lambda 来执行（调用）。换句话说，`detect`如果它无法检测（找到）某些东西，您可以告诉该怎么做。

要添加到您的示例：

```
not_found = lambda { "uh oh. couldn't detect anything!"}
# try to find something that isn't in the Enumerable object:
@array.detect(not_found) {|h| h[:status] == 'X'} 
```

将返回`"uh oh. couldn't detect anything!"`

这意味着您不必编写这种代码：

```
if (result = @array.detect {|h| h[:status] == 'X'}).nil?
    # show some error, do something here to handle it
    #    (this would be the behavior you'd put into your lambda)
else
   # deal nicely with the result
end 
```

`any?`这是和之间的一个主要区别——如果它没有找到任何项目，`detect`你不知道该怎么做。`any?`

这是在 Enumerable 类中。参考：[http ://ruby-doc.org/core/classes/Enumerable.html#M003123](http://ruby-doc.org/core/classes/Enumerable.html#M003123)

# c# - 在 C# 中将 char 转换为 int 是否安全？

> ID：11158439
> 
> 赞同：5
> 
> 时间：2012-06-22T14:41:41.430
> 
> 标签：c#, .net

给定以下代码：

```
string source = "Some Unicode String";
foreach( char value in source ) {

    int y = (int)value;

} 
```

从 char 到 int 的转换是否有可能失败（以及在什么情况下）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T14:48:52.697

不，它不可能失败。[char](http://msdn.microsoft.com/en-us/library/x9h8tsay%28v=vs.100%29.aspx)的范围从 0x0 到 0xFFFF (65535)，而[int](http://msdn.microsoft.com/en-us/library/5kzh1b5w.aspx)的范围从 -2,147,483,648 到 2,147,483,647，所以 char 的所有值都在 int 的范围内。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T14:49:11.543

从`char`to的转换`int`不会失败，具有任何`char`价值。

来自[.NET 4.0 参考](http://msdn.microsoft.com/en-us/library/system.char.aspx)

> .NET Framework 使用 Char 结构来表示 Unicode 字符。Unicode 标准用一个称为代码点的唯一 21 位标量数字标识每个 Unicode 字符，并定义了 UTF-16 编码形式，该形式指定代码点如何编码为一个或多个 16 位值的序列。每个 16 位值的范围从十六进制 0x0000 到 0xFFFF，并存储在 Char 结构中。 **Char 对象的值是它的 16 位数字（序数）值**。

# asp.net - Asp.net MVC LINQ 错误信息

> ID：11158442
> 
> 赞同：0
> 
> 时间：2012-06-22T14:41:47.690
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

使用 ASP.NET Web-Api，我的控制器中有以下 POST 设置。从 Fiddler 发布到它时，我收到错误消息：

```
The LINQ expression node type 'ArrayIndex' is not supported in LINQ to Entities. 
```

...当它到达 var auth = dba.ApiMembers... 行时

```
 // POST api/Avail
    [BasicAuthentication]
    public HttpResponseMessage PostAvail(Avail[] avail)
    {
        if (ModelState.IsValid)
        {
            // Check if authorised
            var auth = dba.ApiMembers.Where(a => a.hotel_id == 
                   avail[0].HID && a.UserName == User.Identity.Name)
                   .FirstOrDefault(); 
```

有人能看出这条线有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:44:40.493

`User.Identity.Name`LINQ2SQL 查询在数据库中运行，无法转换`avail[0]`为数据库命令。您应该将这些值初始化为参数并将简单类型传递给 LINQ 查询。

```
var hid = avail[0].HID;
var userName = User.Identity.Name;
var auth = dba.ApiMembers.Where(a => a.hotel_id == hid && a.UserName == userName).FirstOrDefault(); 
```

# objective-c - 重启 UITableView 问题

> ID：11158444
> 
> 赞同：0
> 
> 时间：2012-06-22T14:41:54.930
> 
> 标签：objective-c, uitableview, ios5, storyboard

我有一个 UITableView 不是在情节提要中创建的，而是通过代码创建的。可以通过选择其他一些冠军来刷新此表，但是当我这样做时，还有另一个包含旧数据的表...我在刷新时设置为零...

有人有想法吗？？

要填写表格，我使用此代码

```
listVideo = [listGroupes objectAtIndex:indexPath.row];
montageListView= [[UITableView alloc] initWithFrame:listFrame style:UITableViewStylePlain];
montageListView.delegate = self;
montageListView.dataSource = self;
montageListView.layer.cornerRadius = 10;
[listMontagesView addSubview:montageListView]; 
```

所以有一个带有其他选项的新视图，但是如果我返回此代码：

```
montagesListView removeFromSuperview];
montagesListView = nil; 
```

我用相同的代码重新填充它

```
listVideo = [listGroupes objectAtIndex:indexPath.row];
montageListView= [[UITableView alloc] initWithFrame:listFrame style:UITableViewStylePlain];
montageListView.delegate = self;
montageListView.dataSource = self;
montageListView.layer.cornerRadius = 10;
[listMontagesView addSubview:montageListView]; 
```

还有一张好表，但还有一张旧数据……我真的没有发现代码有问题：/

这是行的单元格代码，但我认为这不是问题，

```
 static NSString *MyIdentifier = @"MyIdentifier";
NSString *text;
// Try to retrieve from the table view a now-unused cell with the given identifier.
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

// If no cell is available, create a new one using the given identifier.
if (cell == nil) {
    // Use the default cell style.
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:MyIdentifier];
}

if (tableView == groupListView) {
    text = [listGroupesNames objectAtIndex:indexPath.row];
}else {

    text = [[listVideo objectAtIndex:indexPath.row]description];
    if ([[listVideo objectAtIndex:indexPath.row]note] == 1) {
        cell.imageView.image = [UIImage imageNamed:@"good.png"];
    }
    if ([[listVideo objectAtIndex:indexPath.row]note] == 2) {
        cell.imageView.image = [UIImage imageNamed:@"neutre.png"];
    }
    if ([[listVideo objectAtIndex:indexPath.row]note] == 3) {
        cell.imageView.image = [UIImage imageNamed:@"bad.png"];
    }
}

if ([[UIDevice currentDevice]userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    cell.textLabel.font=[UIFont systemFontOfSize:18.0];
    text = [NSString stringWithFormat:@"           %@",text];
}else{
    cell.textLabel.font=[UIFont systemFontOfSize:12.0];
}
if (tableView == groupListView) {
    cell.imageView.image = [UIImage imageNamed:@"group.png"];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}
if(tableView == montageListView){
    cell.imageView.image = [UIImage imageNamed:@"videos.png"];
}
cell.textLabel.text = text;
return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:10:00.733

你的问题有点难以理解，但这是我的看法。

您似乎想刷新表格视图“内部”的数据？如果是这样，您不需要创建新的 UITableView。只需调用`reloadData`，UITableView 就会查询它的委托和数据源以获取新数据。

如果您添加一个新的 UITableView 实例，但在数据源和委托方法中返回相同的数据，它只会显示旧数据。确保更新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:45:39.330

如果没有代码，就不可能确切地知道问题出在哪里，但是如果您每次都重新创建表格视图，那么您需要确保`[tableView removeFromSuperview]`在将其设置为 nil 之前执行此操作。

# android - Android NDK 能否在 Windows 7 中运行？

> ID：11158445
> 
> 赞同：3
> 
> 时间：2012-06-22T14:41:59.143
> 
> 标签：android, android-ndk

过去几天我一直在学习 Android NDK，但我只是在看他们的网站，它说唯一支持的 Windows 操作系统是 Vista 和 XP。有没有人知道这是不是真的？我想他们可能只是没有更新它。谢谢

编辑：

[链接到 NDK 系统要求](http://developer.android.com/tools/sdk/ndk/overview.html#reqs%5C)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:47:57.963

是的，它可以在 Windows 7 上运行。看看这个教程： [Windows 7 上的 Android NDK](http://psrdotcom.blogspot.fr/2011/12/android-ndk-jni-windows-xp7-with-3264.html)

# c# - 如何返回灰度图像的最大像素值

> ID：11158446
> 
> 赞同：0
> 
> 时间：2012-06-22T14:42:03.910
> 
> 标签：c#, image-processing, pixel, aforge

我对图像处理很陌生，我正在寻找一种解决方案来获得灰度图像的最大像素值。我正在使用 Aforge.Net 库，并尝试使用 ImageStatistics 类来获取灰度图像的最大像素值。我只需要确定我是否走在正确的道路上。有人可以就以下问题给我建议吗？

```
ImageStatistics stat = new ImageStatistics(bmpSource);

        Histogram hist = stat.Gray;

        int maxPixelVal = hist.Max;
        int minPixelVal = hist.Min; 
```

在这个片段中，我使用 GrayChannel 获得了最大值。我需要确定这是否会给我整个图像的最高像素值或只是灰色通道

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:48:17.550

[http://www.aforgenet.com/framework/docs/html/937b609f-8d95-662f-c4ac-55eebc44a1cf.htm](http://www.aforgenet.com/framework/docs/html/937b609f-8d95-662f-c4ac-55eebc44a1cf.htm)

```
ImageStatistics.Gray Property 
```

> 灰色通道的直方图。备注：该属性仅对灰度图像有效（参见 IsGrayscale 属性）。

[http://www.aforgenet.com/framework/docs/html/61212d57-52ee-9935-2364-b3a34a2213d0.htm](http://www.aforgenet.com/framework/docs/html/61212d57-52ee-9935-2364-b3a34a2213d0.htm)

```
Histogram.Max Property 
```

> 该属性允许检索具有非零命中计数的直方图的最大值。

所以，看起来这会给你你想要的。

要考虑的一件事是直方图的粒度/分辨率。有时，直方图的箱（值）数量小于它所代表的颜色通道中可能的阴影数量。

因此，每个 bin 代表源图像中的*一系列*阴影/像素值，并将为您提供此范围内像素数（或总图像的分数）的计数。

如果是这种情况，您将无法从直方图中获取绝对最大像素值，只能获取最大像素所在的范围。

然而，这里的 bin 数量与颜色通道中可能的阴影数量看起来是 1:1，因此您的方法应该有效。

# java - ExecutorService 的未来任务没有真正取消

> ID：11158454
> 
> 赞同：14
> 
> 时间：2012-06-22T14:42:25.930
> 
> 标签：java, concurrency, executorservice, future

我将我的 Futures 从 ExecutorService 推送到哈希映射中。稍后，我可能会从哈希映射中调用 Futures 的取消。虽然结果是真的，但我后来在 Callable 过程中打断点，好像 Future cancel() 没有效果。我认为这可能是两个不同引用的情况（即使在断点时引用 ID 被列为相同），但想知道是否有专家可以插话。代码如下所示：

```
ExecutorService taskExecutor = Executors.newCachedThreadPool();
Map <String, Future<Object>> results = new HashMap <String, Future<Object>>();      

Future<Object> future = taskExecutor.submit(new MyProcessor(uid));
results.put(uid, future); 
```

我允许继续处理（这是一个在传入任务时提交任务的循环），稍后我可能会尝试通过调用此方法从外部源取消：

```
public static synchronized boolean cancelThread(String uid) {
    Future<Object> future = results.get(uid);
    boolean success = false;
    if (future != null) {
        success = (future.isDone() ? true : future.cancel(true));
        if (success)
            results.remove(uid);
    }
    return success;     
} 
```

但是在调用 future.cancel() 之后，我仍然在 MyProcessor.call() 中遇到“未取消”路径 - 即它并没有真正被取消。

我哪里错了？有更好的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T14:45:31.823

> 我后来在 Callable 过程中打断点，好像 Future cancel() 没有效果。

`Future.cancel(true)`删除队列中尚未运行的作业，但如果该作业已在运行，则相当于`Thread.interrupt()`在运行该作业的线程上。这会在线程上设置中断位并导致任何`sleep()`,`wait()`和一些其他方法抛出`InterruptedException`。

重要的是要意识到它*不会*停止线程。您需要主动检查线程循环中的中断标志或正确处理`InterruptedException`.

See my SO answer here for more details: [How to suspend thread using thread's id?](https://stackoverflow.com/questions/11020005/how-to-suspend-thread-using-threads-id/11020048#11020048)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T11:13:56.227

`FutureTask :: boolean cancel(boolean mayInterruptIfRunning)` will perform `interrupt` on current running thread.

```
FutureTask.java
public boolean cancel(boolean mayInterruptIfRunning) {
    if (!(state == NEW &&
          UNSAFE.compareAndSwapInt(this, stateOffset, NEW,
              mayInterruptIfRunning ? INTERRUPTING : CANCELLED)))
        return false;
    try {    // in case call to interrupt throws exception
        if (mayInterruptIfRunning) {
            try {
                Thread t = runner;
                if (t != null)
                    t.interrupt();     ////////////HERE/////////////
            } finally { // final state
                UNSAFE.putOrderedInt(this, stateOffset, INTERRUPTED);
            }
        }
    } finally {
        finishCompletion();
    }
    return true;
} 
```

[JavaDoc](https://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/FutureTask.html) says the below for `interrupt`

> public void interrupt()
> 
> Interrupts this thread. Unless the current thread is interrupting itself, which is always permitted, the checkAccess method of this thread is invoked, which may cause a SecurityException to be thrown.
> 
> If this thread is blocked in an invocation of the wait(), wait(long), or wait(long, int) methods of the Object class, or of the join(), join(long), join(long, int), sleep(long), or sleep(long, int), methods of this class, then its interrupt status will be cleared and it will receive an InterruptedException.
> 
> If this thread is blocked in an I/O operation upon an interruptible channel then the channel will be closed, the thread's interrupt status will be set, and the thread will receive a ClosedByInterruptException.
> 
> If this thread is blocked in a Selector then the thread's interrupt status will be set and it will return immediately from the selection operation, possibly with a non-zero value, just as if the selector's wakeup method were invoked.
> 
> If none of the previous conditions hold then this thread's interrupt status will be set.
> 
> Interrupting a thread that is not alive need not have any effect.
> 
> Throws: SecurityException - if the current thread cannot modify this thread

**To conclude**; cancel of `FutureTask` has only impact if the thread is blocked (in an invocation of the wait(),...) else it is developer responsibility to check `Thread.currentThread().isInterrupted()` to quit; while performing non blocked operation.

# tsql - 在 TSQL 中将 Max/Min 分数分成 3 个带固定阈值

> ID：11158460
> 
> 赞同：4
> 
> 时间：2012-06-22T14:42:45.673
> 
> 标签：tsql

鉴于最大/最小分数为 90-22、100-55、85-41、93-30、40-18，我需要将它们分成 3 个波段，每个波段的阈值分别为 80 和 60。所以对于第一对会给出我 (90-80, 80-60, 60-22)，最后一对会给出 (null-80, null-60, 40-18)。

我已经部分使用下面的 SQL，我遇到的问题是边缘情况，例如对于最后一对（40-18），UpperRed 值被返回为 60。我知道我有问题，如果最大/最小分数不低于 80（例如 93-85，因为这也会返回我不想要的琥珀色范围）。

```
DECLARE @GreenLower INT
DECLARE @AmberUpper INT
DECLARE @AmberLower INT
DECLARE @RedUpper INT

SET @GreenLower = 80
SET @AmberUpper = 80
SET @AmberLower = 60
SET @RedUpper = 60

DECLARE @Scores TABLE
  (
   GroupedBy VARCHAR(50) ,
   PCTMax INT ,
   PCTAvg INT ,
   PCTMin INT ,
   ALLAvg INT ,
   AllMax INT ,
   AllMin INT
  )

INSERT  INTO @Scores
VALUES  ( 'Prov1', 80, 75, 63, 50, 90, 22 )
INSERT  INTO @Scores
VALUES  ( 'Prov2', 100, 96, 70, 80, 100, 55 )
INSERT  INTO @Scores
VALUES  ( 'Prov3', 72, 58, 44, 62, 85, 41 )
INSERT  INTO @Scores
VALUES  ( 'Prov4', 90, 78, 58, 59, 93, 30 )
INSERT  INTO @Scores
VALUES  ( 'Prov5', 63, 25, 21, 30, 40, 18 )

SELECT  GroupedBy ,
            PCTMax ,
    PCTAvg ,
    PCTMin ,
    AllAvg ,
    CASE WHEN AllMax > 79 THEN AllMax ELSE NULL END AS GreenUpper ,
    CASE WHEN AllMin > 79 THEN AllMin ELSE @GreenLower END AS GreenLower ,

    CASE WHEN AllMax < 79 THEN AllMax ELSE 
        CASE WHEN AllMax > 79 THEN @AmberUpper ELSE  NULL END 
    END AS AmberUpper ,
    @AmberLower AS AmberLower ,

    CASE WHEN AllMin > 59 THEN NULL ELSE @RedUpper END AS RedUpper ,
    CASE WHEN AllMin > 59 THEN NULL ELSE AllMin END AS RedLower

FROM    @Scores 
```

最终，这些数据将更加动态并提取真实值，但现在我只是试图让输出逻辑正确，因此我可以将其插入图形组件并生成如下所示的图形： ![晶须图](../Images/7aa7f924396f22f885dac33a4bddad65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:36:14.687

以下分两步完成这项工作：

1.  将每个范围拆分为上下值行，每个子范围一行。

2.  取消旋转子范围以在同一行上显示它们中的每一组。

```
SELECT
  GroupedBy,
  PCTMax,
  PCTAvg,
  PCTMin,
  AllAvg,
  GreenUpper = MAX(CASE BandName WHEN 'Green' THEN Upper END),
  GreenLower = MAX(CASE BandName WHEN 'Green' THEN Lower END),
  AmberUpper = MAX(CASE BandName WHEN 'Amber' THEN Upper END),
  AmberLower = MAX(CASE BandName WHEN 'Amber' THEN Lower END),
  RedUpper   = MAX(CASE BandName WHEN 'Red'   THEN Upper END),
  RedLower   = MAX(CASE BandName WHEN 'Red'   THEN Lower END)
FROM (
  SELECT
    s.GroupedBy,
    s.PCTMax,
    s.PCTAvg,
    s.PCTMin,
    s.AllAvg,
    b.BandName,
    Upper = CASE
      WHEN s.AllMax >= b.BandMin AND s.AllMin <= b.BandMax THEN
        CASE
          WHEN b.BandMax > s.AllMax THEN s.AllMax
          ELSE b.BandMax
        END
    END,
    Lower = CASE
      WHEN s.AllMax >= b.BandMin AND s.AllMin <= b.BandMax THEN
        CASE
          WHEN b.BandMin < s.AllMin THEN s.AllMin
          ELSE b.BandMin
        END
    END
  FROM Scores s
  CROSS JOIN (
    SELECT 'Green', 80, 2147483647 UNION ALL
    SELECT 'Amber', 60, 79         UNION ALL
    SELECT 'Red'  ,  0, 59
  ) b (BandName, BandMin, BandMax)
) s
GROUP BY
  GroupedBy,
  PCTMax,
  PCTAvg,
  PCTMin,
  AllAvg 
```

子选择实现了第一步，并使用辅助内联表来拆分范围。外部选择使用分组来取消透视获得的值对。

您可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/72dd7/1)使用此解决方案，我在表中添加了更多边缘情况，`Scores`以便更好地说明拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:51:00.010

试试这个：

```
SELECT  GroupedBy
      , AllMax
      , AllMin
      , CASE WHEN AllMax > 79 THEN AllMax
             ELSE NULL
        END AS GreenUpper
      , CASE WHEN AllMin > 79 THEN AllMin
             ELSE @GreenLower
        END AS GreenLower
      , CASE WHEN AllMax BETWEEN 61 AND 80 THEN AllMax
             WHEN AllMax > 79
                  AND AllMin < 80 THEN @AmberUpper
             ELSE NULL
        END AS AmberUpper
      , @AmberLower AS AmberLower
      , @RedUpper AS RedUpper
      , CASE WHEN AllMin > 59 THEN NULL
             ELSE AllMin
        END AS RedLower
FROM    @Scores 
```

# python - Python：Levenberg Marquardt 算法并行化

> ID：11158461
> 
> 赞同：2
> 
> 时间：2012-06-22T14:42:46.907
> 
> 标签：python, parallel-processing, levenberg-marquardt

我有一些代码适合实验数据的理论预测，我想运行 LMA（Levenberg-Marquardt 算法）来适合实验的理论。然而，计算并不简单，每个模型在单个处理器上计算大约需要 10-30 分钟，但是问题是令人尴尬的可并行化，并且代码当前设置为将不同的组件（单个迭代）提交给集群计算机（此计算仍需要约 1-2 分钟）。

现在这个提交脚本是在 python 中的一个可调用函数中设置的 - 所以对于使用 scipy LMA (scipy.optimise.leastsq) 设置它是相对微不足道的 - 但是我想 scipy LMA 将通过每个单独的计算（对于测量梯度）串行，并等待返回，而我更希望 LMA 一次发送一整套计算，然后等待返回。python提交脚本看起来有点像：

```
def submission_script(number_iterations,number_parameters,value_parameters):
      fitness_parameter = [0]*number_iterations
      <fun stuff>
      return (fitness_parameter) 
```

其中“value_parameters”是维度 [number_iterations][number_parameters] 的嵌套列表，其中包含要为每个模型计算的变量，“number_parameters”是要拟合的参数数量，“number_iterations”是数量要计算的模型的数量（因此，为了测量梯度，LMA 计算 2*number_parameters 模型的每一步），并且“fitness_parameter”是必须最小化的值（并且具有维度 [迭代]）。

现在，显然，我可以编写自己的 LMA，但这有点重新发明轮子 - 我想知道是否有任何东西可以满足我的需求（或者是否可以以这种方式使用 scipy LMA）。

高斯-牛顿算法也*应该*起作用，因为起点应该在最小值附近。约束拟合的能力（即为拟合参数设置最大值和最小值）会很好，但不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:46:53.677

scipy.optimize.leastsq 函数让您有机会提供一个函数`J`来评估给定参数向量的雅可比。您可以实现一个多处理解决方案来计算此矩阵，而不是让 scipy.optimize.leastsq 通过串行调用您的函数来近似它`f`。

不幸的是，scipy 中的 LMA 实现对`f`和使用单独的函数`J`。如果使用相同的参数 vecor 调用它，您可能希望缓存您计算的信息`f`以便重用它。`J`或者，您可以实现使用单个`fJ`调用的自己的 LMA 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:51:21.690

发现这基本上是一个重复的问题 - 已在下面的链接中询问了答案。

[对 scipy.optimize.leastsq 目标函数的多线程调用](https://stackoverflow.com/questions/10489134/multithreaded-calls-to-the-objective-function-of-scipy-optimize-leastsq)

# coding-style - 什么被认为是更好的风格？一个大循环还是多个小循环？

> ID：11158462
> 
> 赞同：2
> 
> 时间：2012-06-22T14:42:47.610
> 
> 标签：coding-style

我目前正在使用一个大容器，我需要迭代做很多事情。以下哪项被认为是更好的风格？

a) 大循环：

```
for (container::iterator it = myContainer.begin(); it < myContainer.end(); ++it) {
    // do thing a with *it

    // do thing d with *it

    // do thing c with *it

    // do thing b with *it
} 
```

b) 小循环：

```
for (container::iterator it = myContainer.begin(); it < myContainer.end(); ++it) {
    // do thing a with *it
}

for (container::iterator it = myContainer.begin(); it < myContainer.end(); ++it) {
    // do thing b with *it
}

for (container::iterator it = myContainer.begin(); it < myContainer.end(); ++it) {
    // do thing c with *it
}

for (container::iterator it = myContainer.begin(); it < myContainer.end(); ++it) {
    // do thing d with *it
} 
```

我发现 b) 更好读，因为 a) 会变得笨拙，非常容易理解。但是a）我认为会跑得更快。那么哪种风格更好呢？myContainer 将包含多达 10.000 个元素，并且必须重复此过程，因此性能很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-30T12:29:53.010

将单独的任务拆分到不同的循环还有进一步的重构好处。

在处理大数据集时，循环性能并不总是很直接，因此您通常应该从可读性开始，并在需要时返回单循环。

这是 Martin Fowler 的[拆分循环重构示例](http://www.refactoring.com/catalog/splitLoop.html "拆分循环重构示例")。

> 你经常会看到同时做两件不同事情的循环，因为他们可以通过一个循环来做到这一点。事实上，大多数程序员会对这种重构感到非常不舒服，因为它会迫使您执行两次循环——这是工作量的两倍。
> 
> 但就像许多优化一样，在一个循环中做两件不同的事情比单独做更清楚。它还会导致进一步重构的问题，因为它引入了阻碍进一步重构的临时性。所以在重构时，不要害怕摆脱循环。当你优化时，如果循环很慢，就会出现，并且在那个时候将循环重新组合在一起是正确的。您可能会惊讶于循环不是瓶颈的频率，或者后来的重构如何打开另一个更强大的优化。

### 原始代码

```
void printValues() {
  double averageAge = 0;
  double totalSalary = 0;
  for (int i = 0; i < people.length; i++) {
    averageAge += people[i].age;
    totalSalary += people[i].salary;
  }
  averageAge = averageAge / people.length;
  System.out.println(averageAge);
  System.out.println(totalSalary);
} 
```

### 最初成为

```
void printValues() {
  double totalSalary = 0;
  for (int i = 0; i < people.length; i++) {
    totalSalary += people[i].salary;
  }

  double averageAge = 0;
  for (int i = 0; i < people.length; i++) {
    averageAge += people[i].age;
  }
  averageAge = averageAge / people.length;

  System.out.println(averageAge);
  System.out.println(totalSalary);
} 
```

### 提取方法后清理代码

```
void printValues() {
  System.out.println(averageAge());
  System.out.println(totalSalary());
}

private double averageAge() {
  double result = 0;
  for (int i = 0; i < people.length; i++) {
    result += people[i].age;
  }
  return result / people.length;
}

private double totalSalary() {
  double result = 0;
  for (int i = 0; i < people.length; i++) {
    result += people[i].salary;
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:48:12.383

您应该使用单循环。您可以将循环内包含的代码重构为单独的函数。

将大循环分成四个较小的循环是相当低效的，它增加了多余的操作。

# scala - 如何在 Play 2.0.1 中使用 TestServer 运行多个功能规范？

> ID：11158467
> 
> 赞同：6
> 
> 时间：2012-06-22T14:42:58.687
> 
> 标签：scala, playframework, playframework-2.0

我在运行多个功能规范（使用 specs2）时遇到问题，特别是启动 TestServer、打开 HTMLUNIT 浏览器并导航到页面以检查元素的测试。有问题的页面加载了我们在 ajax 请求上测试的元素。等待元素出现超时，并显示以下错误消息。

代码片段：

```
trait CommonSteps extends BaseSpecfication {
  val testServer: TestServer = TestServer(3333)
  val testServerBaseURL: String = "http://localhost:3333/"

  override def map(fs: => Fragments) =
    Step(testServer.start()) ^ super.map(fs) ^ Step(testServer.stop())

}

class FunctionalTest1 extends Specification with CommonSteps { def is =
  ...

  ... extends When[...] {
    val browser: TestBrowser = TestBrowser.of(HTMLUNIT)
    browser.goTo(testServerBaseURL + "/some_path")
    browser
  }

  ... extends Then[...] {
    browser.await.until("element that is loaded on ajax request").isPresent()
    ...
  }

} 
```

我们得到错误：

```
Caused by: java.sql.SQLException: Attempting to obtain a connection from a pool that has already been shutdown.
Stack trace of location where pool was shutdown follows:
  java.lang.Thread.getStackTrace(Thread.java:1479)
  com.jolbox.bonecp.BoneCP.captureStackTrace(BoneCP.java:543)
  com.jolbox.bonecp.BoneCP.shutdown(BoneCP.java:159)
  com.jolbox.bonecp.BoneCPDataSource.close(BoneCPDataSource.java:123)
  play.api.db.BoneCPApi.shutdownPool(DB.scala:387)
  play.api.db.BoneCPPlugin$$anonfun$onStop$1.apply(DB.scala:252)
  play.api.db.BoneCPPlugin$$anonfun$onStop$1.apply(DB.scala:250)
  scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
  scala.collection.immutable.List.foreach(List.scala:45)
  play.api.db.BoneCPPlugin.onStop(DB.scala:250)
  play.api.Play$$anonfun$stop$1$$anonfun$apply$1.apply(Play.scala:75)
  play.api.Play$$anonfun$stop$1$$anonfun$apply$1.apply(Play.scala:74)
  scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
  scala.collection.immutable.List.foreach(List.scala:45)
  play.api.Play$$anonfun$stop$1.apply(Play.scala:74)
  play.api.Play$$anonfun$stop$1.apply(Play.scala:74)
  scala.Option.map(Option.scala:133)
  play.api.Play$.stop(Play.scala:73)
  play.core.server.NettyServer.stop(NettyServer.scala:73) 
```

虽然测试在单独运行时有效，但在同时运行两个或多个测试时会出现错误。

尽管我的示例是 Scala Play 应用程序，但似乎与[此问题有关。](https://groups.google.com/forum/#!topic/play-framework/fQsGPiC_HAw/discussion)谁能确认此问题已在较新版本的 Play 中得到解决？或者，是否有解决方法来避免 Play 2.0.1 中出现此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:25:22.157

此问题将在目前处于 RC 状态的 Play 2.0.2 中修复。从 2.0.1 升级到 2.0.2 是安全的，因为一切都是向后兼容的。

感谢 @guillaume-bort 提供此信息。

# delphi - 检测是被拖到我的应用程序上的东西

> ID：11158470
> 
> 赞同：2
> 
> 时间：2012-06-22T14:43:01.743
> 
> 标签：delphi, drag-and-drop, state

我需要知道一些对象被拖到我的 Delphi 应用程序上。

例如：当用户将某个项目从 ListView 拖到 ListBox，或者将某个文件从 Explorer 拖到我的 LitsView 时，我想随时检查他是否还在拖或不再拖。

我可以在不挂钩拖动事件的情况下找到这个吗？

*德尔福 XE*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:29:00.633

我会通过在拖动过程开始时做笔记来做到这一点，例如何时`IDropTarget.DragEnter`被调用。然后在随后调用`DragLeave`or时重置标志。`Drop`

# android - 列表视图中的项目看起来很随机

> ID：11158475
> 
> 赞同：0
> 
> 时间：2012-06-22T14:43:17.053
> 
> 标签：android, listview

我在每个项目中创建了一个包含 TextView 和 EditText 的列表。为了填写正确的值，我定义了几个“dataType”。例如，如果我们需要输入日期，我会显示一个日期选择器并在 EditText 中填充返回值，对于 NumericID，我将 numPad 定义为软键盘。

我有一个数据 ArrayList，对于每个项目，我都有这样的信息：一个用于 textView 的字符串、一个 dataType 和一个用于 EditText 的字符串。

我有两个问题，我认为它们是相关的。

第一个，我的数据列表的大小只有 10，所以我的列表中有 10 个项目。但是 getView() 在创建列表时被调用了 20 多次，并且每次软键盘显示/隐藏时，都会为所有“位置”调用此函数。看起来是有线的，不是吗？

第二个是当我使用 arrayAdapter 生成列表时，我的 textViews 看起来不错，但 EditTexts 看起来很随机：在我的数据列表中，我有“ContactName”-“UserName”-“Jane”和“CreateDate”-“Date "-"12/02/12" 等创建列表后，一切正常。但是当我滚动一下我的列表，或者我显示然后隐藏键盘时，我的 EditTexts 与我的 TextView 不匹配，ContactName 的 editText 可能是日期类型......

这是我的代码： setListAdapter(new ArrayAdapter(this, R.layout.itemview, datalist) {

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view= convertView;
            DataHolder data = getItem(position);
            final ViewHolder vholder ;
            if (null == view) {
                LayoutInflater mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = mInflater.inflate(R.layout.itemview, null);
                vholder = new ViewHolder();
                vholder.fieldName = (TextView) view.findViewById(R.id.fieldName);
                vholder.fieldValue = (EditText) view.findViewById(R.id.fieldValue);

                vholder.fieldValue.setHint(data.detail.getFieldType().getFieldTypeName());
                // here I define some properties of the EditText, or I show a date picker then I put the 
                // result in the EditText
                vholder.fieldValue = (EditText) data.detail.getFieldType().getValue(vholder.fieldValue);
                view.setTag(vholder);
                Log.d("convertView is null?", "null "+position);
            } 
            else{
                vholder = (ViewHolder) view.getTag();
                Log.d("convertView is null?", "not null "+position);
            } 

            if(data != null){
                vholder.fieldName.setText(data.name);
                if(vholder.fieldValue == null){
                    Log.i(vholder.fieldName.getText()+" null", "data type is: "+data.detail.getFieldType().getFieldTypeName().toString());          
                }else{ 
                    String fieldValueContent = data.value;
                    if(!fieldValueContent.isEmpty())
                        vholder.fieldValue.setText(fieldValueContent);   
                    // update data if focus changes
                    final String fieldValueText = vholder.fieldValue.getText().toString();
                    vholder.fieldValue.setOnFocusChangeListener(new View.OnFocusChangeListener() {            
                        public void onFocusChange(View v, boolean hasFocus) {           
                            if((fieldValueText!=null)&&(!fieldValueText.isEmpty())){
                                // some update data instructions 
                            }
                        }  
                    }); 
                }
            }

            return view;
        }
    });
    public class DataHolder{
    public FieldDetails detail;
    public String value;
    public String name;
}
public class ViewHolder{
    public TextView fieldName;
    public EditText fieldValue;
}

public class UserName implements FieldType{
@Override
public View getValue(View input) {
    ((EditText) input).setInputType(InputType.TYPE_TEXT_VARIATION_PERSON_NAME);
    return input;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:48:01.983

```
First one, my data list's size is only 10, so I've 10 items in my list. But getView() is called more than 20 times when the list's created 
```

根据[链接](https://stackoverflow.com/questions/2618272/custom-listview-adapter-getview-method-being-called-multiple-times-and-in-no-co)

这不是问题，绝对不能保证调用 getView() 的顺序或调用次数。`In your particular case you are doing the worst thing possible with a ListView by giving it a height=wrap_content. This forces ListView to measure a few children out of the adapter at layout time, to know how big it should be.`这就是为 ListView 提供你看到的转换视图，甚至在你滚动之前传递给 getView() 的原因。

[ListView 内的可聚焦 EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:02:50.890

```
First one, my data list's size is only 10, so I've 10 items in my list. But getView() is called more than 20 times 
```

列表视图第一次只为哪个设备可以占用创建视图（行），如果您滚动列表视图，它将检查视图类型是否已更改，如果是，它将创建新视图，否则它将仅通过替换重新使用您的视图你的数据..

[getView() 的工作](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

此外，如果您将列表视图高度指定为**wrap_content** ，则只会显示**前三个视图（行），其余的将被忽略**..

EditText 中的问题可能是由于您的 if else 块..正确检查..您正在检查

```
if(data=null){
  vholder.fieldName.setText(data.name);
}else{
   showing Edit Text // Check it properly
} 
```

# c# - 为什么 float 和 int 具有如此不同的最大值，即使它们的位数相同？

> ID：11158476
> 
> 赞同：44
> 
> 时间：2012-06-22T14:43:18.300
> 
> 标签：c#, java, c++, floating-point, int

> **可能重复：**
> [当Java中的大小相同时，浮点数和整数数据类型有什么区别？](https://stackoverflow.com/questions/4806944/what-the-difference-between-the-float-and-integer-data-type-when-the-size-is-sam)

您可能知道，这两种类型都是 32 位的。`int`只能保存整数，同时`float`也支持[浮点数](http://en.wikipedia.org/wiki/Floating_point)（如类型名称所示）。

那么怎么可能最大值`int`是 2 ^(31)，最大值 `float`是 3.4*10 ^(38)，而它们都是 32 位呢？

我认为它`int`的最大值容量应该高于浮点数，因为它不会为浮点数节省内存并且只接受整数。在这种情况下，我会很高兴得到解释。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-22T14:53:06.733

您的直觉非常正确地告诉您，一个中的**信息内容**不能多于另一个，因为它们都有 32 位。但这并不意味着我们不能使用这些位来**表示**不同的值。

假设我发明了两种新的数据类型，`uint4`并且`foo4`. `uint4`使用 4 位来表示一个整数，在标准的二进制表示中，所以我们有

```
bits   value
0000       0
0001       1
0010       2
...
1111      15 
```

但`foo4`使用 4 位来表示这些值：

```
bits   value
0000       0
0001      42
0010     -97
0011       1
...
1110      pi
1111       e 
```

尽管位数相同，但现在`foo4`具有比**更**广泛的值范围！`uint4`如何？因为有些`uint4`值**不能**用 来表示`foo4`，所以位映射中的那些“槽”可用于其他值。

* * *

和`int`-`float`它们都可以存储一组 2 ^(32 个)值中的值，只是存储*不同*的 2 ^(32 个)值组。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-22T14:46:20.383

浮点数可能存储更高的数值，但即使在小数点之前的数字上也不会精确。考虑以下示例：

```
float a = 123456789012345678901234567890f; //30 digits
Console.WriteLine(a);  // 1.234568E+29 
```

请注意，几乎没有保持任何精度。

另一方面，整数将始终精确地存储其值范围内的任何数字。

为了便于比较，我们来看一个双精度浮点数：

```
double a = 123456789012345678901234567890d; //30 digits
Console.WriteLine(a); // 1.23456789012346E+29 
```

请注意，保留了大约两倍的有效数字。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T14:46:16.320

这些基于 IEEE754 浮点规范，这就是它可能的原因。请阅读本[文档](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)。这不仅仅是关于多少位。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T14:51:28.517

提示在“浮点”的“浮动”部分。你所说的基本上是假设固定点。浮点数不会为小数点后的数字“保留空间” - 它的位数有限（23 位二进制）并记住将其乘以的 2 的幂。

# c# - 如何在 sql azure 上运行 aspnet_regsql？

> ID：11158478
> 
> 赞同：8
> 
> 时间：2012-06-22T14:43:21.280
> 
> 标签：c#, azure, azure-sql-database, membership-provider

> **可能重复：**
> [将 ASP.NET 成员资格数据库迁移到 SQL Azure](https://stackoverflow.com/questions/10140774/migrating-asp-net-membership-database-to-sql-azure)

如何在 sql azure 数据库上运行 aspnet_regsql？通过导出所有 db 对象，我让它工作起来很辛苦。但是，我真的相信有一个更简单的方法。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T16:08:08.977

当您在 sql azure 数据库上运行 aspnet_regsql 时，只会出现错误，因为 SQL Azure 不支持在对 SQL Azure 数据库执行命令时**使用 USE**语句切换数据库上下文。

为解决此问题，Microsoft 创建了一个修补程序。以下步骤向您展示如何使用此修复程序提供的工具。

1.  从[修补程序页面](https://support.microsoft.com/en-us/kb/2006191)下载 aspnet_regsqlazure.zip 文件。
2.  将文件的内容提取到本地硬盘驱动器上的某个位置。
3.  打开命令提示符并导航到您提取文件的目录。

使用以下命令行执行该工具（在适当的地方替换您的服务器名称、数据库名称、登录名和密码）。

```
aspnet_regsqlazure -s [your server name].database.windows.net -d [your database name] -u [your user name]@[your server name] -p [your password] -a mr 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T18:52:21.997

aspnet_regsql.exe 生成的成员资格提供程序已过时。

请使用与 Azure 兼容的新[通用提供程序。](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

## 更新 - 2015 年 7 月 23 日

Microsoft 拥有名为[Identity](http://www.asp.net/identity)的新成员。在撰写本文时，当前版本为 2。

# iphone - 使用 MKNetworkKit 上传多张图片

> ID：11158480
> 
> 赞同：0
> 
> 时间：2012-06-22T14:43:27.770
> 
> 标签：iphone, ios, mknetworkkit

我正在使用 MKNetworkKit 来获取服务器请求。如何使用这种 JSON 格式上传多个图像文件？

```
"pictures": [
    {
        "name": "pic1",
        "qty": 1,
        "size": 312
    },
    {
        "name": "pic2",
        "qty": 2,
        "size": 123
    }
] 
```

我见过的大部分示例代码是：

```
MKNetworkOperation *op = [self.flUploadEngine postDataToServer:postParams path:@"/post.php"]
[op addFile:imageData1 forKey:@"firstImage"]; 
[op addFile:imageData2 forKey:@"secondImage"]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:42:31.600

```
 NSData *dataWithData1=UIImageJPEGRepresentation([ary_image_upload objectAtIndex:i],90);

    [self.flOperation addData:dataWithData1 forKey:@"userfl" mimeType:@"image/jpeg"fileName:imageName]; 
```

把代码试试这个

# excel - 从excel中提取特定格式

> ID：11158481
> 
> 赞同：2
> 
> 时间：2012-06-22T14:43:30.220
> 
> 标签：vba, excel, vba

我确实没有[vba](/questions/tagged/vba "显示标记为“vba”的问题")经验，我依赖于古老的 Java 知识

我有以下格式的数据，我想提取 001-222-170 组件（从第 1 行等）

```
TEXT,TEXT,TEXT,001-222-170,TEXT    
LINER,612-942-001,TEXT    
TEXT,TEXT17,612-551-001,TEXT   
SHOE,435-687-204,TEXT    
TEXT,ASSY,O.B,632-005-202,TEXT    
TEXT,TEXT,I.B,632-012-202,TEXT 
```

经过广泛的研究，我知道你必须建立一个`.pattern`认可。我最接近的东西是

```
Sub RegEx()
    Dim RegEx As Object
    Dim strTest As String
    Dim valid As Boolean
    Dim Matches As Object
    Dim i As Integer

    Set RegEx = CreateObject("VBScript.RegExp")
    'What I happen to be looking for    
    RegEx.Pattern = "MT\d{6}V\d"

    For i = 2 To 115
        Range("B" & i).Activate
        strTest = ActiveCell.Text
        valid = RegEx.test(strTest)
        If valid = True Then
            Set Matches = RegEx.Execute(strTest)
            Range("C" & i).Value = CStr(Matches(0))
        Else
            Range("C" & i).Value = "#N/A#"
        End If
    Next

    Set RegEx = Nothing
End Sub 
```

但它仍然不能解决问题，而且我知道有一种更短的方法可以做到这一点。我只是不知道如何格式化模式线。像 `("(\d)"-"(\d)"-"(\d)")`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:10:35.280

```
RegEx.Pattern = "\d{3}\-\d{3}\-\d{3}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:46:48.350

下面的代码一次性将 RegExp UDF 转储到 C2:C115（无循环）以分别在 B2:b115 上运行

您的正则表达式可以缩短为 `(\d{3}\-){2}\d{3}"`

```
Sub DumpReg()
    Range("C2:115").FormulaR1C1 = "=EXTRACT1(RC[-1])"
End Sub

Function Extract1(strIn As String) As String
    Dim objRegex As Object
    Dim objRegMC As Object
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
        .Pattern = "(\d{3}\-){2}\d{3}"
        If .test(strIn) Then
            Set objRegMC = .Execute(strIn)
            Extract1 = objRegMC(0)
        Else
            Extract1 = "#N/A#"
        End If
    End With
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:58:13.733

如果数据始终是您需要的 XXX-XXX-XXX 格式，您可以在没有 VBA 或 RegEx 的情况下在电子表格上执行此操作。

![例子](../Images/6ee34ef774490cb4cfd9f5c5cdbf0c68.png)

**更新 VBA 解决方案**

这也是一个更简单的 VBA 解决方案，没有 RegExp。

注意 - 此解决方案假定单元格文本模式中不会有任何其他“-”实例，除了 XXX-XX-XXX 模式。

```
Sub dude()

Dim strTest As String

For i = 2 To 115

    strTest = Range("A" & i).Text

    If InStr(1, strText, "-") > 0 Then
        Range("C" & i) = Mid(strTest, InStr(1, strText, "-") - 3, 11)
    Else
        Range("C" & i) = "#N/A#"
    End If

Next

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:58:56.033

您可以使用的模式是：`\d+-\d+-\d+` . `\d+`仅表示一位或多位小数。子可以写成：

```
Sub RegEx()
    Dim RegEx As Object
    Dim strTest As String
    Dim valid As Boolean
    Dim Matches As Object
    Dim i As Integer

    Set RegEx = CreateObject("VBScript.RegExp")

    RegEx.Pattern = "\d+-\d+-\d+"

    For i = 2 To 115
        strTest = Range("B" & i).Text
        Set Matches = RegEx.Execute(strTest)
        If Matches.Count > 0 Then
            Cells(i, "C").Value = CStr(Matches(0))
        Else
            Cells(i, "C").Value = "#N/A#"
        End If
    Next

    Set RegEx = Nothing
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T17:44:06.560

如果您的格式是相同的并且您想要一个 VBA 解决方案，那么 Regex 对于这种事情来说是一种过度杀伤力。这是一个简单的使用方法`SPLIT()`

```
Sub Sample()
    Dim MyAr() As String, strSample As String

    strSample = "TEXT,TEXT,TEXT,001-222-170,TEXT"
    'strSample = "LINER,612-942-001,TEXT"

    MyAr = Split(strSample, ",")

    Debug.Print MyAr(UBound(MyAr) - 1)
End Sub 
```

# javascript - 在 Symfony 2 中生成动态 javascript 的正确方法？

> ID：11158484
> 
> 赞同：2
> 
> 时间：2012-06-22T14:43:36.207
> 
> 标签：javascript, symfony

我需要使用一些树枝函数（如和）生成一个**动态 JSON 对象**。我想把它放在一个外部文件中。我可以使用 并将相关代码放入其中。`asset``translate``settings.js``include 'settings.js.twig'`

这是在 Symfony 2 中生成动态 javascript 的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:19:52.960

这并不能完全回答您的问题，但它是一个类似的主题。当我需要将数据从控制器/视图传递到 javascript 时，我通常会在相关的 HTML 标记上设置数据属性。例如，如果我需要 AJAX 请求的路由，我会写

```
<a href="#updateTarget" class="ajaxTrigger" data-ajax-route="{{ path('my_ajax_route') }}">click here for ajax</a> 
```

然后访问它

```
$('.ajaxTrigger').on('click', function(){
  $.getJSON($(this).data('ajax-route'), function(response) {
    // do something with response
  });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:16:19.510

如果您尝试在 javascript 中调用树枝，则可以制作一个控制器来呈现生成 json 的树枝并从 javascript 请求（ajax 或类似的东西）中调用它。

然后你在javascript中有你的json，你可以用它做任何你需要的事情。

我认为这并不能完全回答你的问题。我会说您应该尽可能避免使用 twig 创建 js。

# c - 为什么我要在同一个链接器调用中两次传递 obj 文件？

> ID：11158490
> 
> 赞同：1
> 
> 时间：2012-06-22T14:43:55.017
> 
> 标签：c, linker, ld

我正在一个 C 项目中工作，该项目在其构建系统中调用 ld，如下所示：

```
ld --allow-multiple-definition --architecture mips -EB --relocatable a.o b.o c.o -o mylib.a a.o b.o c.o 
```

但是我遇到了这个命令行大小的问题（大约 32,000 个字符以及所需的所有目标文件 - 并使用 cygwin）所以我开始研究对其进行一些修改。其中之一是删除相同对象的第二个引用。像这样：

```
ld --allow-multiple-definition --architecture mips -EB --relocatable a.o b.o c.o -o mylib.a 
```

然而，这打破了一切。我得到了很多很多未定义的引用。

为什么会这样？这两个调用有什么区别？我正在阅读 ld 的文档，但到目前为止还不好。

**奖金**

如果你足够幸运，你的 ld 版本可能有**--start-group** *objs.o* **--end-group**选项来处理类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:29:09.217

一般来说，如果一个库`X`依赖于 library 中定义的符号`Y`，那么应该出现在提供给 的库列表的`X`前面。看起来您可以通过两次提供对象文件的名称来解决此问题：这样，每对也将在列表中显示为，并且无论对象内依赖关系如何，都将链接。有时你有循环引用；那么你*必须*将一个对象放在's 列表中两次。`Y``ld``{X, Y}``{Y, X}`*`ld`*

 *通常，您只是玩弄排序，直到正确为止。但是，您的 32-K 命令行似乎无法实现。我[在这里](https://stackoverflow.com/a/409470/335858)`lorder`阅读并可以帮助您自动确定`tsort`正确的顺序，但我不能说它是对还是错，因为我从未使用过这些工具。*

# c++ - 在 C++ 中链接多个目标文件但没有输出

> ID：11158491
> 
> 赞同：2
> 
> 时间：2012-06-22T14:43:55.913
> 
> 标签：c++, linker, g++

我是 C++ 编程的新手，并且了解 C++ 的基础知识。我正在尝试链接三个文件，但我无法获得输出。我现在正在研究这本书 c++ cookbook

假设我们有文件 a.hpp a.cpp, b.hpp b.cpp,c.hpp c.cpp，代码如下：

**一个.hpp**

```
#ifndef A_HPP_INCLUDED
#define A_HPP_INCLUDED
void a();
#endif 
```

**a.cpp**

```
#include "a.hpp"
#include <iostream>
void a()
{
    std::cout<<"a \n ";
} 
```

**b.hpp**

```
#ifndef B_HPP_INCLUDED
#define B_HPP_INCLUDED
void b();
#endif 
```

**b.cpp**

```
#include "b.hpp"
#include <iostream>
void b()
{
    std::cout<<"b \n ";
} 
```

**c.hpp**

```
#ifndef C_HPP_INCLUDED
#define C_HPP_INCLUDED
void c();
#endif 
```

**cpp**

```
#include "a.hpp"
#include "b.hpp"
#include "c.hpp"
void c()
{
    a();
    b();

}

int main()
{
    c();
    return 0;
} 
```

我已经在一个文件夹中创建了所有文件，我用来编译和链接它们的命令是

```
$:g++ -c -Wall a.cpp b.cpp c.cpp
$:g++ -o -Wall a.o b.o c.o
$:./a.out 
```

我期待着出局

```
a
b 
```

但根本没有输出。请大家帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:48:34.277

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:52:43.523

```
$:g++ a.o b.o c.o -o your_output_program_name -Wall 
```

尝试使用此命令。你肯定会让所有事情都正常工作

# properties - Objective-C：使用 self.navigationController 和自定义 UINavigationController

> ID：11158492
> 
> 赞同：0
> 
> 时间：2012-06-22T14:43:59.247
> 
> 标签：properties, uinavigationcontroller, custom-component

我创建了一个自定义导航控制器，我称之为`CatalogueNavigationController`. 这`CatalogueNavigationController`有一个名为`currentLevel`which 的属性是 type `int`。

在此导航控制器中显示的我的一个视图控制器上，我想获得`CatalogueNavigationController`'`currentLevel`值。但是，当我尝试使用 引用它时`self.navigationController.currentLevel`，我遇到了一个错误，表明 currentLevel 不是 的属性`UINavigationController`- 我知道，它是`CatalogueNavigationController`.

目录导航控制器

```
// .h
@interface CatalogueNavigationController : UINavigationController
@property int currentLevel;

// .m
@implementation CatalogueNavigationController
@synthesize currentLevel; 
```

初始化视图控制器

```
CatalogueBrowser *catalogue = [[CatalogueBrowser alloc] initWithStyle:UITableViewStyleGrouped andQuery:nil];
CatalogueNavigationController *navigation = [[CatalogueNavigationController alloc] initWithRootViewController:catalogue];
navigation.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:navigation animated:YES]; 
```

目录浏览器视图控制器

```
NSLog(@"%i",self.navigationController.currentLevel); //ERROR: Property 'currentLevel' not found on object of type 'UINavigationController *' 
```

currentLevel 变量在 viewController 弹出时递减，而在 viewController 被推送时递增，以允许我跟踪用户导航的“深度”。所以我需要返回它的当前状态。

我可以使用通知来结合我的视图控制器和 CatalogueNavigationController 上的变量，但肯定有更优雅的解决方案吗？

如何引用 self.navigationController 来返回 的值`currentLevel`，但让它引用`CatalogueNavigationController`而不是 UINavigationController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:00:08.067

我认为最好的解决方案是测试 navigationController 是否属于您想要的类型，这里解释：[在 Objective-C 中，如何测试对象类型？](https://stackoverflow.com/questions/1144629/in-objective-c-how-do-i-test-the-object-type). 如果它是真的，你将它转换为你的对象，然后检查你想要的值。

铸造对象中的信息：[ios 自定义 NSObject 铸造](https://stackoverflow.com/questions/5171072/ios-custom-nsobject-casting)。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T15:02:39.970

我偶然发现了同样的情况。我认为解决方案是这样的：

```
CatalogueNavigationController *navController = (CatalogueNavigationController *)self.navigationcontroller;

NSLog(@"%i", navController.currentLevel); 
```

# c# - 使用“保存文件”对话框将数据表导出到 CSV - C#

> ID：11158494
> 
> 赞同：0
> 
> 时间：2012-06-22T14:44:13.913
> 
> 标签：c#, asp.net

努力让我的 CSV 导出以显示“保存文件”对话框。它可以保存到文件中，但不允许用户保存。任何人都可以看到我的代码可能出错的地方吗？

```
string filename = Server.MapPath("~/download.csv");
StreamWriter sw = new StreamWriter(filename, false);

int iColCount = dt.Columns.Count;
for (int i = 0; i < iColCount; i++)
{
    sw.Write(dt.Columns[i]);
    if (i < iColCount - 1)
    {                
        sw.Write(",");
    }
}
sw.Write(sw.NewLine);

foreach (DataRow dr in dt.Rows)
{
    for (int i = 0; i < iColCount; i++)
    {
        if (!Convert.IsDBNull(dr[i]))
        {
            sw.Write(dr[i].ToString());
        }
        if (i < iColCount - 1)
        {
            sw.Write(",");
        }
    }
    sw.Write(sw.NewLine);
}
sw.Close();

Response.Clear();
Response.ContentType = "application/csv";
Response.AddHeader("Content-Disposition", "attachment; filename=download.csv");
Response.WriteFile(filename);
Response.Flush();
Response.End(); 
```

我认为是弹出对话框的内容处置行，但也许我还需要做其他事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:19:53.863

啊，发现问题所在了……

我在更新面板中有按钮，但没有意识到响应对象在更新面板中不起作用。

我将下载按钮设为触发器，现在效果很好。

```
<Triggers>
    <asp:PostBackTrigger ControlID="btnDownload" />
</Triggers> 
```

无论如何感谢您的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:07:46.893

我很确定你需要

```
Response.Write() 
```

后

```
Response.End() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:06:48.763

您可以在`Response.Clear()`通话后尝试清除内容和标题：

```
 Response.ClearContent();
    Response.ClearHeaders(); 
```

# cakephp - 在 cakephp 1.3 中使用用户以外的表进行身份验证

> ID：11158495
> 
> 赞同：0
> 
> 时间：2012-06-22T14:44:19.423
> 
> 标签：cakephp

我正在尝试使用名为“accounts”的表代替 users 表进行身份验证。我试过使用`$this->Auth->userModel = 'Account';`，但是当我尝试登录时，我会显示我的 authError，但它确实让我无法访问其他任何东西。然后我尝试了这里的建议：[cakephp-auth-component-using-different-table](https://stackoverflow.com/questions/9929129/cakephp-auth-component-using-different-table-name-and-column-name) 但这样做我在第 21 行的 ../app_controller.php 中收到错误“致命错误：未定义的类常量 'ALL”'不确定是什么其他尝试。

应用程序控制器：

```
<?php
class AppController extends Controller { 
  var $components = array(
          'Auth'=> array(
                  'loginRedirect' => array('controller' => 'drugs', 'action' => 'index'),
                  'logoutRedirect' => array('controller' => 'accounts','action' => 'login')
                ), 
                'Session','Security');
  var $helpers = array('Form', 'Html', 'Session', 'Javascript');

  function beforeFilter() {
    $this->Auth->userModel = 'Account';
//    $this->Auth->allow('index','view');
    $this->Auth->authError = 'Please login to view that page.';
    $this->Auth->loginError = 'Incorrect Username/Password combination.';
    //$this->Auth->loginRedirect = array('controller'=>'drugs', 'action'=>'index');
    //$this->Auth->logoutRedirect = array('controller'=>'users', 'action'=>'login');
    $this->Auth->authenticate = array(
        //AuthComponent::ALL => array('userModel' => 'Account', 'scope' => array("Account.status" => 1), "fields" => array("username" => "email", "password" => "your_password_field"), 'Form', 'Basic'
    //); 
        AuthComponent::ALL => array('userModel' => 'Account', 'scope' => array("Account.status" => 1), 'Form', 'Basic'
    )); 

    $this->set('admin', $this->_isAdmin());
    $this->set('logged_in', $this->_loggedIn());
    $this->set('users_username', $this->_usersUsername());
    $this->set('user', $this->Auth->user('id'));
    $this->set('language', $this->Auth->user('language'));
  } 
```

账户控制人：

```
<?php
class AccountsController extends AppController {

    var $name = 'Accounts';

    function beforeFilter() {
      parent::beforeFilter();
      //$this->Auth->allow('add');

      if ($this->action == 'add' || $this->action == 'edit') {
       $this->Auth->authenticate = $this->Account; 
      }

    }

    function login() {

    }

    function logout() {
      $this->redirect($this->Auth->logout());
    }

    function index() {
      $this->Account->recursive = 0;
      $this->set('users', $this->paginate());
    }

    function add() {
      if (!empty($this->data)) {
        $this->Account->create();
        if ($this->Account->save($this->data)) {
          $this->Session->setFlash(__('The user has been saved', true));
          $this->redirect(array('action' => 'index'));
        }
        else {
          $this->Session->setFlash(__('The user could not be saved. Please, try again.', true));
        }
      }
    }

    function edit($id = null) {
      $this->Account->id = $id;
      $this->set('title_for_layout', 'Current Users');

      if (!is_numeric($id) && empty($this->data)) {
         $this->Session->setFlash('Invalid User');
         $this->redirect(array('action'=> 'index'));
      }

      if (!empty($this->data)) {
         if ($this->Account->save($this->data)) {
            $this->Session->setFlash('The user has been updated.');
            $this->redirect(array('action'=>'index'));
         }
         else {
            $this->Session->setFlash('The user could not be saved. Please, try again.');
         }
      }

      if (empty($this->data)) {
        $this->data = $this->Account->read(null, $id);
      }
    }

    function delete($id = null) {
      if (!is_numeric($id)) {
        $this->Session->setFlash(__('Invalid id for user.'));
      }
      if ($this->Account->delete($id)) {
        $this->Session->setFlash(__('User deleted.', true));
        $this->redirect(array('action'=>'index'));
      }
      $this->Session->setFlash(__('User was not deleted.',true));
      $this->redirect(array('action'=>'index'));
    }
}
?> 
```

账户模式：

```
<?php
class Account extends AppModel {
    var $name = 'Account';
    var $displayField = 'name';
    var $order = "Account.name ASC"; 
    var $hasMany = array(
      'FrenchTranslation'=> array(
        'className'=>'FrenchTranslation',
        'foreignKey' => 'user_id',
        'dependent' => false,
      ),
    );

    var $validate = array(
      'name'=>array(
        'Please enter the user\'s name.'=>array(
          'rule'=>'notEmpty',
          'message'=>'Please enter the user\'s name.'
        )
      ),
      'username'=>array(
        'Please enter the user\'s username.'=>array(
          'rule'=>'notEmpty',
          'message'=>'Please enter the username.'
        ),
        'The username must be between 3 and 15 characters.'=>array(
          'rule'=>array('between', 3, 15),
          'message'=>'The username must be between 3 and 15 characters.'
        ),
        'That username has already been taken.'=>array(
          'rule'=>'isUnique',
          'message'=>'That username has already been taken.'
        )
      ),
      'password'=>array(
        'The password must be between 5 and 15 characters.' =>array(
          'rule'=>array('between', 5, 15),
          'message'=>'The password must be between 5 and 15 characters.'
        ),
        'The passwords do not match'=>array(
          'rule'=>'matchPasswords',
          'message'=>'The passwords do not match.'
        )
      ),
      'password_confirmation'=>array(
        'You must confirm the password'=>array(
          'rule'=>'notEmpty',
          'message'=>'You must confirm the password.'
        )
      )
   );
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:57:14.440

AuthComponent::ALL 来自哪里？

检查变量（例如，它的 userScope 不是范围并按照[手册](http://book.cakephp.org/1.3/en/view/1265/AuthComponent-Variables)进行分配，

为什么不直接在 AppController 中分配它们呢？

# perl - 给定/何时具有未定义的值

> ID：11158496
> 
> 赞同：6
> 
> 时间：2012-06-22T14:44:20.540
> 
> 标签：perl, warnings, initialization

在以下代码中，我收到`uninitialized value`警告，但仅在第二个`given/when`示例中。为什么是这样？

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;

my $aw;

given ( $aw ) {
    when ( 'string' ) { 
        say "string"; 
    }
    when ( not defined ) { 
        say "aw not defined"; 
    }
    default { 
        say "something wrong"; 
    }
}

given ( $aw ) {
    when ( /^\w+$/ ) { 
        say "word: $aw"; 
    }
    when ( not defined ) { 
        say "aw not defined";
    }
    default { 
        say "something wrong";
    }
} 
```

我得到的输出是：

```
aw not defined
Use of uninitialized value $_ in pattern match (m//) at ./perl.pl line 20.
aw not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:16:53.297

[`given`/`when`](http://perldoc.perl.org/perlsyn.html#Experimental-Details-on-given-and-when)使用“[智能匹配运算符](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)”：`~~`。

`undef ~~ string`是：

```
undef     Any        check whether undefined
                     like: !defined(Any) 
```

因此这里没有警告。

`undef ~~ regex`是：

```
 Any       Regexp     pattern match                                     
                      like: Any =~ /Regexp/ 
```

并且在尝试匹配时会产生警告 on `undef`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:18:24.653

调用`when (EXPR)`通常相等`when ($_ ~~ EXPR)`。所以你不会得到警告，但`undef ~~ 'string'`你会得到警告。`!defined('string')``undef ~~ /regexp/``undef =~ /regexp/`

请参阅[中的 Switch 语句`perlsyn`](http://metacpan.org/module/perlsyn#Switch-Statements)和[Smartmatch 运算符`perlop`](http://metacpan.org/module/perlop#Smartmatch-Operator)。

# java - Eclipse中Java OO编程的非常简单的询问

> ID：11158497
> 
> 赞同：2
> 
> 时间：2012-06-22T14:44:23.270
> 
> 标签：java, eclipse, oop, class

好的，所以我正试图围绕如何使用 Java 完成工作（我来自 C++、Python、PHP 等）。我对语言本身和 OO 原则非常熟悉，但不太熟悉构建项目、将依赖项拼接在一起以及围绕将一个正常运行的 Java 程序组合在一起的仪式和重复的其他方面。

如果您有资源可以推荐（好的教程等），我衷心鼓励您这样做。

我的问题是这样的：

我有一个新的 Eclipse 项目。我创建了一个类，比方说`Guitar`，我想在同一个项目的另一个类中使用它`Musician`（这是我的`main()`方法所在的位置）。如何`Guitar`在课程的源代码中导入和使用`Musician`？

我必须在这里忽略一些明显的东西，但是我尝试了很多不同的东西都无济于事。只是把自己弄得一团糟。:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:48:23.570

您可以`Guitar`在代码中使用并按 ctrl + shift + O 添加导入。或者，您可以在代码中突出显示类引用，Eclipse 会询问您是否要导入它，或者您可以简单地自己键入导入：`import com.foo.Guitar;`在类的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:49:09.413

您将其作为 Eclipse 特定的问题提出，因此：

开始编码，Eclipse 会告诉你这`Guitar`是未知的。除了该错误，它还将提供一个可点击的建议来添加缺少的导入。

* * *

当然，您可以手动添加导入，但这不是 Eclipse 特定的，它是纯 Java 基础：

```
import Guitar; 
```

如果您只是将新类添加到 Eclipse 中的源文件夹中，它将位于“默认命名空间”中，并且上面的导入将是正确的。不过，对于“真实”项目，您将希望使用显式命名空间。您可以通过右键单击源文件夹并选择“new..namespace”来添加它们。在这种情况下，您当然必须导入正确的命名空间：

```
import name.of.my.name.space.Guitar; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:47:59.967

如果它在同一个包中，则无需执行任何操作。

如果它在另一个包中，您需要

```
package com.my.another.pakkage;
import com.my.pakkage.Guitar;

class Musician {
...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T14:49:01.530

你需要建立一个源目录树，并给你的源文件包。然后您可以使用 import xxxx 将您的文件导入其他文件。那里有教程，但从根本上说，如果您的源主目录是一个名为“src”的目录，并且您在“src/foo”中有一个文件，那么该源文件应该声明“package foo;”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T14:50:40.407

就这么简单。而且由于您使用的是 Eclipse，您可以执行 CTRL+SHIFT+O，它会自动导入所需的类。

```
public class Musician() {

       public Musician() {
             Guitar guitar = new Guitar();
       }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T14:48:39.700

把你的类放在一个包中（不是默认的，给它一个名字）。允许分包。

然后您就可以使用以下代码导入一个类：

```
import myPackage.mySubPackage.MyClass; 
```

# xml - Xquery 和空标签

> ID：11158510
> 
> 赞同：0
> 
> 时间：2012-06-22T14:45:04.677
> 
> 标签：xml, html, xquery

我在工作中使用了一个相当旧的版本。我很想更新它，但不幸的是它太小了，我太小了，无法在接下来的几个月内随时完成这项工作。

无论如何，我重写了一些文档目录。我想输出一个带有图标的空 span 标签，不幸的是它不能正常工作。

### 这是使用 Xquery 1.0 的简短片段

```
else if ( $section/name()= 'body') then
   <h3><span class="ui-icon ui-icon-circle-triangle-e"></span>
    Body
    </h3> 
```

这转换为以下

### HTML

```
<h3>
    <span class="ui-icon ui-icon-circle-triangle-e"/>
    Body
</h3> 
```

这又被浏览器（铬/火狐）误解了，我正在测试以下内容：

```
<h3>
   <span class="ui-icon ui-icon-circle-triangle-e">
     Body
    </span>
</h3> 
```

Text 不应该包含在 span 标签中，它应该作为一个图标放在它之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:06:01.997

我不知道存在，但我会尝试类似

```
<h3>
  <span class="ui-icon ui-icon-circle-triangle-e">{" "}</span>
  Body
</h3> 
```

或类似的。您可能还会寻找某种方法来全局控制序列化。

# extjs4 - 如何在展开之前等待 ExtJS 面板呈现？

> ID：11158514
> 
> 赞同：1
> 
> 时间：2012-06-22T14:45:16.430
> 
> 标签：extjs4, panel, expand

我在 ExtJS 4.0.7 中`infoContainer`扩展了具有这些属性的一个（仅显示相关）：`Ext.panel.Panel`

*   可折叠：真
*   崩溃：真
*   禁用：真
*   强制布局：真

我对组件（如文本字段、复选框等）进行了一些修改（一些渲染），所以我在`beforeexpand`面板中执行此操作。但是，当面板展开时，我们可以清楚地看到面板可见后对组件的修改。所以，在我们看到面板打开**之前**，我需要完成这个逻辑。

那么，我可以限制面板的扩展仅在逻辑`beforeexpand`完成时发生吗？以及如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:53:10.947

这是我的做法：

创建一个执行您当前希望在`beforeexpand`事件上发生的渲染/修改逻辑的函数。

在此函数中，在面板上设置自定义属性，以便您知道它是根据您的逻辑呈现/修改的，例如`myPanel.isPrepared = true;`.

此外，在此函数的最后，再次调用`myPanel.expand();`

然后，在`beforeexpand`处理程序中放置一个条件来检查您的渲染/修改是否已完成，例如，`if (myPanel.isPrepared) {...`

如果它通过了，那么不要在处理程序中做任何事情，让面板展开。

如果它*没有*通过，则调用上面提到的函数，然后`return false;`将停止面板扩展，您的函数将执行您想要的所需渲染/修改，然后它会在全部完成后调用 expand。

假设您没有使用 MVC 模式创建应用程序，则处理程序和函数可能如下所示：

```
myPanel.on('beforeexpand`, function() {
    if (!myPanel.isPrepared) {
        prepareMyPanel();
        return false;
    }
})

function prepareMyPanel() {
    // rendering / modification logic here...
    myPanel.isPrepared = true;
    myPanel.expand();
} 
```

如果您使用 MVC 模式创建应用程序，您应该能够将其转换为正确的控制器处理程序。

# c# - Web 请求超时异常。如何正确阅读？

> ID：11158517
> 
> 赞同：0
> 
> 时间：2012-06-22T14:45:23.637
> 
> 标签：c#, .net, httpwebrequest

这个例外怎么可能？

我正在调用谷歌服务，如下所示。我的日志发现我在线收到超时异常`var requestStream = request.GetRequestStream();`

我什至没有将它放在`catch`块内，因为我认为读取流是从字符串中获取的（它非常小）。那么，我怎样才能得到超时呢？谷歌服务器是否可能需要时间并且阅读速度很慢而我得到了这个？

```
// Google had issues with SSL certificates. We know address is good, so just kill validation
            // and trust any certificate it might have..
            ServicePointManager.ServerCertificateValidationCallback = (sender, certificate, chain, errors) => true;

// Prepare HTTPS request. 5 seconds timeout should be good for google.
            const string Uri = "https://android.apis.google.com/c2dm/send";
            var request = (HttpWebRequest)WebRequest.Create(Uri);
            request.Headers.Add("Authorization", "GoogleLogin auth=" + this.SecurityToken);
            request.ContentType = "application/x-www-form-urlencoded";
            request.Method = "POST";
            request.Timeout = 5000;

            // build the post string     
            var postString = new StringBuilder();
            postString.AppendFormat("registration_id={0}", recipientId);
            postString.AppendFormat("&data.payload={0}", message);
            postString.AppendFormat("&collapse_key={0}", collapseKey);

            // write the post-string as a byte array     
            var requestData = Encoding.ASCII.GetBytes(postString.ToString());
            request.ContentLength = requestData.Length;
            var requestStream = request.GetRequestStream();
            requestStream.Write(requestData, 0, requestData.Length);
            requestStream.Close();

            // Do the actual request and read the response stream  
            try
            {
                var response = request.GetResponse();
                var responseString = GetResponseString(response);
                response.Close();

                return responseString.Contains("id=") 
                    ? SendStatus.Ok 
                    : GetSendStatusFromResponse(responseString);
            }
            catch (WebException ex)
            {
                var webResponse = (HttpWebResponse)ex.Response;
                if (webResponse != null)
                { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:16:38.997

`GetRequestStream`打开一个连接并返回一个已经连接的流。您写入流中的任何内容都会立即在线路上输出。它首先没有完全缓冲（尽管几乎可以肯定会涉及一些缓冲）。

所以它可以超时是有道理的；它只是意味着无法建立 TCP 连接，因为那是建立连接的时间点。

# streaming - 在服务器端运行 flash swf 并将其作为视频流式传输

> ID：11158521
> 
> 赞同：0
> 
> 时间：2012-06-22T14:45:28.700
> 
> 标签：streaming, flash

有谁知道是否存在以及执行此操作的最佳工具是什么：

1.  我有一个racing_car_game.swf
2.  我想在服务器端运行它并通过视频输出（例如使用 red5 或其他媒体服务器）
3.  （我想在服务器端运行多个实例）

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:45:59.267

check my name. I guess you don't have a way to do so.

You could build the functionality (in flash) to render each frame to a BitmapData-object, and then send that encoded as JPEG to a (local) service (either through URLLoader or via TCP/IP sockets) which saves them as images on file and then converts that into a movie once all frames are rendered.

EDIT: You can use a part of AS3 Core Lib ( [https://github.com/mikechambers/as3corelib](https://github.com/mikechambers/as3corelib) ) to convert a BitmapData into a JPEG file (in memory).

DB

# javascript - Jquery计算元素中的字符并给太短的字符填充

> ID：11158526
> 
> 赞同：2
> 
> 时间：2012-06-22T14:45:45.163
> 
> 标签：javascript, jquery, html, css

我需要有一个导航，一些链接（那些短于 9 个字符的链接）得到一个填充。

所以 jquery 应该计算导航的 a 元素的长度，并为每个短于 9 个字符的元素提供一个填充。

到目前为止，这是我想出的。

```
var liborder = $('#oe_menu li a').val();
if(liborder.length <= 9) {
    $(this).css("padding", "8px");
} 
```

任何想法将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:49:43.277

用于[`.each()`](http://api.jquery.com/each/)迭代元素，[`.text()`](http://api.jquery.com/text/)而不是`val()`获取超链接的字符串。`text()`用于标签的文本内容，而`val()`用于获取选择和输入的值：

```
$('#oe_menu li a').each(function(){
    if($(this).text().length <= 9) {
        $(this).css("padding", "8px");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:50:02.327

尝试这样的事情：

```
$('#oe_menu li a').each(function() {
   var self = $(this);
   if (self.text().length <= 9) {
       self.css("padding", "8px");
   }
}); 
```

# python - Pyramid - mako：部分转义 HTML

> ID：11158530
> 
> 赞同：2
> 
> 时间：2012-06-22T14:45:55.773
> 
> 标签：python, python-2.7, pyramid

我正在使用 Mako 模板创建网页。

有一个部分我使用 | 防止 html 转义。n. 但是，在内部，我还需要显示一些用户生成的条目，我需要在应用程序的视图端转义 HTML。

Pyramid 有什么办法呢？

我知道有 CGI 转义，但它似乎不如 Mako 自己的那么好，我想使用它。

目前我有：

```
from pyramid.compat import escape

escape(str) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:58:51.533

根据[金字塔文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/compat.html#pyramid.compat.escape)，`pyramid.compat.escape`提供`cgi.escape`（`html.escape`在 Python 3 上）。

根据[mako 文档](http://docs.makotemplates.org/en/latest/filtering.html?highlight=escape#expression-filtering)，转义功能由[`markupsafe.escape(x)`](http://pypi.python.org/pypi/MarkupSafe). 要记住的一件事可能会有所帮助，MarkupSafe 将`__html__`在它正在转义的对象上查找一个方法，如果找到它，它将调用该方法并将结果用作转义字符串。这可能使您在如何转义某些项目方面具有一定的灵活性。

您可以使用其中一个，或者另一个选项（如果可能）来更改您的模板，以便转义确实发生在模板中而不是视图中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T21:47:55.543

我想我会在这里投入 2 美分，因为我正在寻求解决类似的问题。就我而言，我对 Python 和 Pyramid 非常陌生，我正在修改[单文件任务教程](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/single_file_tasks/single_file_tasks.html)以创建一个（非常）简单的博客。

我的帖子内容以字符串形式保存在 sqlite 数据库中。问题在于，当内容字符串输出到模板时，html 标签显示为纯文本。

所以而不是：

![在此处输入图像描述](../Images/08dfa63d4e397bd42e1ff1f4ef6111cb.png)

我得到：

![在此处输入图像描述](../Images/70e54da2bc3f040ca8678cca7cfd6cc6.png)

添加`| n`过滤器解决了我的问题。HTML 内容现在可以在我的帖子正文中正确显示。

我的帖子列表模板（.mako）：

```
# -*- coding: utf-8 -*- 
<%inherit file="layout.mako"/>

<ul id="posts">
% if posts:
  % for post in reversed(posts):
  <li>
    <span class="name">${post['name']}</span> 
    <span class="content">${post['content'] | n}</span>
  </li>
  % endfor
% else:
  <li>Sorry, no posts...</li>
% endif
</ul> 
```

和 view_config：

```
@view_config(route_name='list', renderer='list.mako')
def list_view(request):
    rs = request.db.execute("select id, name, content from posts")
    posts = [dict(id=row[0], name=row[1], content=row[2]) for row in rs.fetchall()]
    return {'posts': posts} 
```

[这个答案帮助了我。](https://stackoverflow.com/questions/12137421/mako-escaping-issue-within-pyramid)

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:47:51.773

webhelpers包提供了[一个](http://pypi.python.org/pypi/WebHelpers/1.3)可能有帮助的转义函数。从[文档](http://sluggo.scrapping.cc/python/WebHelpers/modules/html/builder.html)：

> webhelpers.html.builder
> 
> HTML Builder 提供：
> 
> 以 Pythonic 方式创建 (X)HTML 标记的 HTML 对象。
> 
> 用于标记包含有意 HTML 标记的字符串的文字类。
> 
> 一个智能的 escape() 函数，它保留文字但转义其他可能意外包含标记字符（“<”、“>”、“&”、“”'、“'”）或恶意 Javascript 标记的字符串。转义的字符串作为文字返回，以防止它们在以后被双重转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T20:11:05.730

我使用**markdown**（和Javascript 中的**pagedown**）进行一些有限的标记以及一些 HTML 以允许用户自定义他们的输入。

在保存或显示自定义用户标记之前，我使用以下命令清理 HTML：

```
from html5lib import sanitizer
from html5lib import html5parser, serializer, treebuilders, treewalkers

# This sanitizer translates all the troublesome tokens
def sanitize2(text):
    if (text is None) or isinstance( text, ( int, long ) ):
        return text
    sanobj                      = sanitizer.HTMLSanitizer
    sanobj.strip_tokens         = True
    sanobj.lowercaseElementName = True
    sanobj.lowercaseAttrName    = True
    hparser                     = html5parser.HTMLParser(tree = treebuilders.getTreeBuilder('dom'), tokenizer=sanobj)
    dommodel                    = hparser.parse(text)
    serobj                      = serializer.htmlserializer.HTMLSerializer(sanitize = False)
    outstr                      = ''.join(serobj.serialize(treewalkers.getTreeWalker('dom')(dommodel)))
    return outstr 
```

然后，我有一个自定义金字塔过滤器来实际显示它：

```
import markdown

def jmarkdown(text):
    return markdown.markdown(text) 
```

这使得“| jmarkdown”工作！

# html5-canvas - 替换图像画布动力学.JS

> ID：11158533
> 
> 赞同：1
> 
> 时间：2012-06-22T14:46:07.707
> 
> 标签：html5-canvas, kineticjs

我在这里遇到问题...我想将画布图像更改为另一个图像...但是我在这样做时遇到了问题...

这是代码...

```
<!DOCTYPE HTML>
<html>
  <head>
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="js/jquery.mobile-1.0.min.css" />
    <script src="js/jquery-1.6.4.min.js"></script>
    <script src="js/jquery.mobile-1.0.min.js"></script>
    <script type="text/javascript">
    function myFunction()
    {

    $("#container").empty();
    }
</script>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.1.0.js"></script>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
        width: 100%;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.9.7.js"></script>
    <script>
      function update(group, activeAnchor) {
        var topLeft = group.get(".topLeft")[0];
        var topRight = group.get(".topRight")[0];
        var bottomRight = group.get(".bottomRight")[0];
        var bottomLeft = group.get(".bottomLeft")[0];
        var image = group.get(".image")[0];

        // update anchor positions
        switch (activeAnchor.getName()) {
          case "topLeft":
            topRight.attrs.y = activeAnchor.attrs.y;
            bottomLeft.attrs.x = activeAnchor.attrs.x;
            break;
          case "topRight":
            topLeft.attrs.y = activeAnchor.attrs.y;
            bottomRight.attrs.x = activeAnchor.attrs.x;
            break;
          case "bottomRight":
            bottomLeft.attrs.y = activeAnchor.attrs.y;
            topRight.attrs.x = activeAnchor.attrs.x;
            break;
          case "bottomLeft":
            bottomRight.attrs.y = activeAnchor.attrs.y;
            topLeft.attrs.x = activeAnchor.attrs.x;
            break;
        }

        image.setPosition(topLeft.attrs.x, topLeft.attrs.y);
        image.setSize(topRight.attrs.x - topLeft.attrs.x, bottomLeft.attrs.y - topLeft.attrs.y);
      }
      function addAnchor(group, x, y, name) {
        var stage = group.getStage();
        var layer = group.getLayer();

        var anchor = new Kinetic.Circle({
          x: x,
          y: y,
          stroke: "#666",
          fill: "#ddd",
          strokeWidth: 2,
          radius: 8,
          name: name,
          draggable: true
        });

        anchor.on("dragmove", function() {
          update(group, this);
          layer.draw();
        });
        anchor.on("mousedown touchstart", function() {
          group.draggable(false);
          this.moveToTop();
        });
        anchor.on("dragend", function() {
          group.draggable(true);
          layer.draw();
        });
        // add hover styling
        anchor.on("mouseover", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "pointer";
          this.setStrokeWidth(4);
          layer.draw();
        });
        anchor.on("mouseout", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "default";
          this.setStrokeWidth(2);
          layer.draw();
        });

        group.add(anchor);
      }
      function loadImages(sources, callback) {
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        for(var src in sources) {
          numImages++;
        }
        for(var src in sources) {
          images[src] = new Image();
          images[src].onload = function() {
            if(++loadedImages >= numImages) {
              callback(images);
            }
          };
          images[src].src = sources[src];
        }
      }

      function initStage(images) {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 1153,
          height: 385
        });
        var CarGroup = new Kinetic.Group({

          draggable: false
        });
        var darthVaderGroup = new Kinetic.Group({
          x: 210,
          y: 100,
          draggable: true
        });
        var yodaGroup = new Kinetic.Group({
          x: 100,
          y: 110,
          draggable: true
        });

        var layer = new Kinetic.Layer();

        /*
         * go ahead and add the groups
         * to the layer and the layer to the
         * stage so that the groups have knowledge
         * of its layer and stage
         */
        layer.add(CarGroup);
        layer.add(darthVaderGroup);
        layer.add(yodaGroup);
        stage.add(layer);
        stage.setScale("window.innerWidth")

        // darth vader
        var darthVaderImg = new Kinetic.Image({
          x: 720,
          y: 140,
          image: images.darthVader,
          width: 115,
          height: 124,
          name: "image"
        });

        darthVaderGroup.add(darthVaderImg);
        addAnchor(darthVaderGroup, 720, 140, "topLeft");
        addAnchor(darthVaderGroup, 840, 140, "topRight");
        addAnchor(darthVaderGroup, 840, 270, "bottomRight");
        addAnchor(darthVaderGroup, 720, 270, "bottomLeft");

        darthVaderGroup.on("dragstart", function() {
          this.moveToTop();
        });

        // darth vader
        var CarImg = new Kinetic.Image({
          x: 0,
          y: 0,
          image: images.Car,
          width: 1153,
          height: 385,
          name: "image"
        });

        CarGroup.add(CarImg);

        // yoda
        var yodaImg = new Kinetic.Image({
          x: 75,
          y: 120,
          image: images.yoda,
          width: 125,
          height: 134,
          name: "image"
        });

        yodaGroup.add(yodaImg);
        addAnchor(yodaGroup, 70, 120, "topLeft");
        addAnchor(yodaGroup, 200, 120, "topRight");
        addAnchor(yodaGroup, 200, 254, "bottomRight");
        addAnchor(yodaGroup, 70, 254, "bottomLeft");

        yodaGroup.on("dragstart", function() {
          this.moveToTop();
        });

        stage.draw();
      }

      window.onload = function() {
        var sources = {
          darthVader: "Velg1.png",
          yoda: "Velg1.png",
          Car : "coba.jpeg"
        };
        loadImages(sources, initStage);
        /*stage.setScale(5, 6);*/
      };

    </script>

  </head>
  <body onmousedown="return false;">
    <div id="container" ></div>
    <input type="button" onClick="myFunction();">
  </body>
</html> 
```

如您所见...我要更改的图像在

```
var sources = {
          darthVader: "Velg1.png",
          yoda: "Velg1.png",
          Car : "coba.jpeg"
        }; 
```

通过使用单击按钮事件...有人可以帮助我吗？

提前致谢....

# ef-code-first - 如何首先使用实体 框架代码删除详细信息项

> ID：11158536
> 
> 赞同：2
> 
> 时间：2012-06-22T14:46:16.843
> 
> 标签：ef-code-first

假设我的模型看起来像这样（为简单起见，简化了）：

```
public class Deal
    {
        [Key]
        public int DealId { get; set; }

        //one Deal may have many pictures
        public virtual List<Picture> Pictures { get; set; } 

        public Deal()
        {
            Pictures = new List<Picture>();
        }       
    } 
```

每当我想从图片列表中删除特定图片时，我都会执行以下操作：

```
Deal deal = dealRepository.GetAll().Where(d => d.DealId == id).FirstOrDefault();
deal.Pictures.RemoveAll(p => p.Criterion.Equals(SomeCriterion));
unitOfWork.Commit(); 
```

看起来一切正常，但查看 dbms，我看到应该删除的记录仍然存在，**但**它的外键设置为空。

有没有办法真正删除记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:57:41.100

您需要执行以下操作来删除记录：

```
foreach (var picture in deal.Pictures.Where(theCondition).ToList())
    dbContext.Set<Picture>().Remove(picture); 
```

如果你有这样的属性，你可以使用`dbContext.Pictures`而不是`.Set<Picture>()`

当然，由于您已经在 DbContext（存储库）之上构建了一个额外的抽象，因此您需要在某处公开该调用。

# ios - 从 NSMutableArrays 中删除对象

> ID：11158539
> 
> 赞同：2
> 
> 时间：2012-06-22T14:46:24.617
> 
> 标签：ios, xcode, arrays

我有这个方法，当我按下一个按钮并从 MutableArray 收藏夹中删除一个对象时，它会被调用。由于它在 Array 中留下了漏洞，我后来遇到了问题。有没有一种简单的方法可以去除那些“洞”，或者有更好的方法来去除物体？

```
- (IBAction)addfavs:(id)sender {

int erase;
for(int i=0;i<favs.count;i++){

    if ([favs objectAtIndex:i] == parent) {

        [favs removeObjectAtIndex:i];
        erase = 1;
    }
}
if (!erase) {
    [favs addObject:parent];
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:48:11.230

当您从可变数组中删除一个对象时，它不会“留下一个洞”。可变数组中的每个其他对象仅向下移动一个级别，并且数组的计数（或长度）会随着您删除的对象数量而缩小。

如果您在用户界面中看到“漏洞”，则您的表格视图刷新方法可能有问题，或者您正在显示数组的内容。但是基本的可变数组类肯定知道如何处理删除、添加和管理自己的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T14:49:47.603

**[编辑4]**

user523234的好点

```
[favs removeObjectIdenticalTo: parent]; 
```

查看 Apple 网站上的 removeObjectIdenticalTo 以获取 NSMutableArray

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

**[编辑3]**

这是一个检查值（使用整数值）而不是对象本身的示例。

```
int erase = 0;
int i = 0;
while(i < favs.count){
    if ([[favs objectAtIndex:i] intValue] == [parent intValue]){
        [favs removeObjectAtIndex:i];
        erase = 1;
    }else{
        i++;
    }
} 
```

**[编辑2]**

即使它没有首先删除它也可能添加对象的原因是因为您从未重置您的“擦除”变量。第一次设置为1，其余时间设置！！！您也永远不会初始化它，因此您永远不会“真正”知道编译器将在下一次调用您的操作时对变量做什么。如果它为您的擦除变量“分配”相同的内存地址，即使您尚未将其定义为静态变量，“1”仍将常驻创建静态条件！！！

**[编辑]**

本来没看懂你的问题。我想我现在明白了，更好地查看您的代码。

您的代码：

```
int erase = 0; 
for(int i=0;i<favs.count;i++){
    if ([favs objectAtIndex:i] == parent){
        [favs removeObjectAtIndex:i];
        erase = 1;
    }
} 
```

当您在每次删除后增加计数器时，您所做的基本上将跳过列表中的某些项目。假设您删除了对象 3，您的计数器现在将更新为计数 4，但 4 现在是 5，而 3 现在是 4，所以在这种情况下，您实际上是在跳过第 4 项。

尝试这个：

```
int erase = 0;
int i = 0;
while(i < favs.count){
    if ([favs objectAtIndex:i] == parent){
        [favs removeObjectAtIndex:i];
        erase = 1;
    }else{
        i++;
    }
} 
```

如果您没有删除当前项目，这只会升级计数器。

**[原文]** [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

查看 removeObjectAtIndex 方法说明。

直接来自苹果：

“为了填补空白，所有超出索引的元素都通过从索引中减去 1 来移动。”

这应该在 Apple 的 API 中自动完成。你不应该做任何事情，而且真的不应该留下任何“漏洞”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:48:30.437

从 NSMutableArray 中移除对象不会留下漏洞。Apple 的数组实现不是稀疏的，这意味着当您删除一个对象时数组会调整大小，以便没有空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:25:28.657

In addition to @trumpetlicks answer, you can also try this:
Edit: shorter version.

```
if ([favs containsObject:parent])  //check for present of parent in the favs
{
    [favs removeObjectIdenticalTo:parent];  //remove all occurrences of parent
} else
    [favs addObject:parent]; 
```

# java - 轻量级和低延迟的 Java 网络库？

> ID：11158543
> 
> 赞同：7
> 
> 时间：2012-06-22T14:46:42.520
> 
> 标签：java, networking, nio, netty

我正在开发一个客户端-服务器对，其中多线程客户端每秒执行数千次服务器调用，首要任务是实现最小延迟。吞吐量也应该很高。客户端和服务器都是用 Java 编写的，通信语义非常简单（put/get 操作）。

满足这些要求的最佳 Java 网络库/框架是什么？像 Tomacat/Jetty 这样的服务器似乎是重量级的。我正在考虑 MINA 或 Netty，但我不确定这些异步库能否在繁重的工作负载下提供稳定的低延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:53:17.713

我建议你试试[kryonet](http://code.google.com/p/kryonet/)框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:04:27.050

如果您想在同一台机器上进行通信，您可以尝试[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)之类的东西 ，它可以支持每秒超过一百万条持久消息，往返时间为亚微秒。

如果您想要机器之间的低延迟，您需要非常仔细地查看您的硬件。对于商品硬件，您的往返延迟将增加 100 微秒。使用专业硬件，您可以看到接近 20 微秒的时间。

或者您可以在同一个盒子上进行通信并获得更低的延迟。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T20:55:44.963

你也可以试试[Jocket](https://github.com/pcdv/jocket)。它与 Java Chronicle 共享一些概念，但直接针对替换标准 Socket 实现。

对于进程之间的乒乓，RTT 延迟低于微秒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:53:02.043

如果您需要超高性能和吞吐量，我建议使用原始套接字（查看 Socket 和 ServerSocket - 可能也有 nio 版本）。这将使您摆脱 HTTP 和其他协议中包含的开销

# git - git reflog 未显示分支更改

> ID：11158544
> 
> 赞同：5
> 
> 时间：2012-06-22T14:46:43.477
> 
> 标签：git, reflog

在另一个问题中，一位用户发布了以下 reflog：

```
8c48bab HEAD@{16}: checkout: moving from develop to 8c48babb10ec2f8f28f364ce57b5095cb080c133^0
54d8daf HEAD@{17}: commit: changed the how function, it seems I was right, wc counts all lines regardless of readable symbols or not.
13d35ed HEAD@{18}: commit: am working on the how function (should be trivial, but I have a bad feeling)
852fb68 HEAD@{19}: commit: I have added some more commands (thought not fully implemented), but more specifically I have changed the pattern matching
33dfc9f HEAD@{20}: commit (merge): change some output settings, asthetics and such. I am working on getting more command options for list previous lin
a248465 HEAD@{21}: commit (amend): added another sanity check for cli parameters
f0ca508 HEAD@{22}: commit (amend): added another sanity check for cli parameters
9e24e91 HEAD@{23}: commit: added another sanity check for cli parameters
0194cab HEAD@{24}: commit: I am working on getting the console improved, this including better color, and more cammand options
8c48bab HEAD@{25}: checkout: moving from master to testing 
```

在`HEAD@{25}`中，用户切换到测试分支。但是，在 中`HEAD@{16}`，用户从开发转移到提交，而没有事先从测试转移到开发。

如何在不反映在 reflog 中的情况下更改分支？我不相信这个用户特别老练，所以我怀疑使用了任何深奥的技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:55:12.173

似乎用户刚刚签出了特定的提交（使用 sha1），然后创建了分支。

### 更新

对不起，我误读了这个问题。用户可能已将分支重命名`testing`为`develop`.

# jquery - jquery 和 ajax 返回错误

> ID：11158551
> 
> 赞同：0
> 
> 时间：2012-06-22T14:46:54.767
> 
> 标签：jquery, ajax

我在 jQuery 中的 ajax 调用不起作用。这是jsfiddle：http: [//jsfiddle.net/jefffabiny/czZKM/](http://jsfiddle.net/jefffabiny/czZKM/)

我的 page2.html 文件很简单：

```
<p>page 2</p> 
```

有没有人看到问题？所有错误都说是“错误”。

**编辑** 我的 jquery 在我的根目录的子文件夹中。[我的根文件夹（我的索引所在的位置）] >> [我的 js 文件夹（我的 jquery 所在的位置）]。因此，'../' 语法对于在文件结构中上一级应该是正确的。我想，呵呵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:50:08.770

该错误是因为找不到 page2.html 引起的。

```
getContent('../page2.html'); 
```

这条线是cuplrit。

我假设路径不正确。

对于 jsFiddle，您需要提供绝对路径 (http://www.example.com/page2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:35:54.303

OP：不要太纠结于同源策略和 jsFiddle 问题。

检查呼叫是否在本地工作。以下代码将起作用（显然替换`C:\`为您的本地驱动器或根文件夹）：

```
C:\test\page2.html
C:\test\subdir\test.js
C:\test\subdir\test.html 
```

page2.html

```
<p>page 2 content</p> 
```

测试.js：

```
$.ajax({ url: '../page2.html',  
         success: function(resp) { $('body').append(resp); } 
}); 
```

测试.html：

```
<html>
<body></body>
</html> 
```

test.html（在 AJAX 调用之后）：

```
<html>
<body><p>page 2 content</p></body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:56:45.567

您的路径可能不存在。查看 FireBug 网络选项卡或 Chrome，看看您是否收到 404。此外，我建议使用内置的 jQuery 函数，它可以非常简洁地完成您正在寻找的内容：

```
<p class="test"><a href="#">I will load text on click.</a></p>
<div class="contentArea">test</div>

<script type="text/javascript">
$('.contentArea').load('../page2.html');
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:58:41.487

尝试像下面这样调用 getContent：

```
getContent('/page2.html'); 
```

它将假定该文件位于根目录中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-22T15:10:27.190

ajax 调用不能引用相对路径（即'../'），它必须是绝对路径（即'http://localhost/page2.html'）。

# ruby-on-rails - CarrierWave 与 plupload 直接到 s3 - 如何避免冗余下载/上传？

> ID：11158553
> 
> 赞同：3
> 
> 时间：2012-06-22T14:47:02.677
> 
> 标签：ruby-on-rails, carrierwave

我最近完成了 plupload 的设置，将文件直接上传到 S3。这是使用 S3s[发布](http://aws.amazon.com/articles/1434?_encoding=UTF8&jiveRedirect=1)方法结合 plupload 完成的。

上传完成后，我将加载模型的延迟作业排队，并使用 CarrierWave 的 remote_[uploader]_url 方法将该上传的资源分配给模型。由于管理多个版本的简单性，我想使用 CarrierWave。这是我的工作（稍作编辑，我意识到我可以将 send_later 用于这个简单的示例）：

```
class MediaJob < Struct.new(:medium)
  def perform
    medium.process_file
    medium.save
  end
end 
```

这是 process_file 方法：

```
def process_file
  self.remote_file_url = s3_original_url
end 
```

结果是文件最终进出 S3 3 次：

1）通过plupload上传到S3

2) 由 CarrierWave 下载进行处理

3) 模型保存时由 CarrierWave 重新上传

这对于小文件来说很好，但在处理大文件时会变得非常昂贵。一定有办法消除#3。我不希望 CarrierWave 在保存时上传原始文件，因为原始文件已经存在。我确实希望上传这些版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T23:29:08.397

So I have found a solution. Thanks to the contributors for getting it started. I want to make sure credit is given where it is due but the answer was a bit more involved than what was proposed.

Here is what worked....

1) After plupload finishes uploading to S3, I assigned the file attribute (my mounted CarrierWave uploader) to the returned key from S3\. This is accomplished in plupload by using the FileUploaded event to post the response to another action:

```
init : {
    FileUploaded: function(up, file, info) {
        $.post('#{media_path}', {s3_response: info.response});
    }
} 
```

2) The action picks up that response and assigns the file attribute(or whatever the name of your mounted uploader is) via a method on the model:

```
def create
  med = Medium.new_from_s3_response(params[:s3_response])
end

def self.new_from_s3_response(response)
  med = Medium.new

  # Grab filename from response use libxml-ruby gem
  xml = XML::Parser.string(response).parse
  node = xml.find_first('//PostResponse/Key')
  med['file'] = node.content
  med.save

  # Queue up a job to have the file downloaded and processed
  # Note that I am using Mongoid so the handy serialization by DelayedJob doesn't work
  Delayed::Job.enqueue MediaJob.new(med.id)
end 
```

3) The job fires and calls process_file which downloads the original and creates/uploads the various versions. Note that the original does not get uploaded. Mission accomplished!

```
class MediaJob < Struct.new(:medium_id)
  def perform
    medium = Medium.find(medium_id)
    medium.process_file

  end
end  

def process_file
  # Download from S3
  file.cache_stored_file!
  # Convert to sanitized file for creating versions
  file.retrieve_from_cache!(file.cache_name)

  # Loop through versions and create them....
  file.versions.values.each do |uploader|
    uploader.store!
  end
end 
```

I got the code for creating the versions from a wiki entry on the [CarrierWave GitHub](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Recreate-and-reprocess-your-files-stored-on-fog) page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:55:35.993

如果你使用`update_attribute`它应该跳过回调。我不知道carrierwave在内部是如何工作的，但这就是我会尝试的：

```
def process_file
  update_attribute(:remote_file_url, s3_original_url)
end 
```

然后，您可以跳过呼叫`save`。

另一种方法是更改`save`​​为`save(:validate => false)`.

编辑：您可以使用`skip_callback`跳过验证[http://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html#method-i-skip_callback](http://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html#method-i-skip_callback)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:10:48.320

也许您可以尝试类似的事情（我也为存储在 s3 中的 CSV 文件做了类似的事情）

```
1\. Download the file to your local directory first 

2\. Process the the image (create your version) 

3\. And then Upload the file to s3 using fog gem separately 

4\. update the remote_url  from the url from the fog gem 
```

这会将您的步骤从 3 减少到 1

您可以查看 Fog[文档](https://github.com/fog/fog/blob/master/README.rdoc)以获取 s3 url

希望这有帮助

# windows-8 - 无法在 Windows 运行时组件中实例化 COM 互操作接口

> ID：11158555
> 
> 赞同：0
> 
> 时间：2012-06-22T14:47:11.070
> 
> 标签：windows-8, com-interop, windows-runtime, microsoft-metro, .net-4.5

我正在开发一个用 C# 编写的 Windows 运行时组件，以包装一些没有 Windows 运行时等效项的 COM 接口，遵循这个使用 mbnapi.tlb 提供的互操作接口的[MSDN 示例。](http://code.msdn.microsoft.com/windowsapps/Modern-Win32COM-mobile-8f762ad8)当我尝试在包装类的构造函数中实例化我的 IMbnInterfaceManager 成员时，如下所示：

```
m_InterfaceManager = (IMbnInterfaceManager)new MbnInterfaceManager(); 
```

由于 E_NOINTERFACE（不支持此类接口），它会引发 System.InvalidCastException。

但是，如果我将包装器构建为类库而不是 WinMD 组件，它可以正常工作，没有其他更改。

我更愿意将其构建为 Windows 运行时组件，以免限制库的有用性。（至少有一个项目是用 Javascript/HTML 编写的。）我做错了什么，还是我试图做的事情不可能？

编辑：原来这是 .NET 4.5 RC 中的一个错误。把这个问题留在这里，以防其他人遇到这个问题，如果我找到一个解决方法，我会发布。据说它将由RTM修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:03:15.213

这已被确认为 .NET 4.5 RC 中的一个错误，据称将由 RTM 修复。当前的解决方法是编辑 .csproj 文件并将 EmbedInteropTypes 设置为 False 以引用 tlb/dll。这可能会导致 App Store 认证测试失败，因此请确保在修复 .NET 错误后将其设置回 True。

# linq - 带表达式的 TakeFinder

> ID：11158558
> 
> 赞同：0
> 
> 时间：2012-06-22T14:47:23.697
> 
> 标签：linq

我已经开始研究基于 The Wayward WebLog [http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx)的 linq 提供程序。

我有这个代码

```
DbQueryProvider provider = new DbQueryProvider();
Query<Product> productQuery = new Query<Product>(provider);

IEnumerable<Product> preProductList = productQuery.Where(p => p.Id < 0).Take(4);
ICollection<Product> productList = preProductList.ToList(); 
```

我在寻找 Take(4) 时遇到了很多问题，我想将其翻译成 Top(4) sql 语句。

在我看来， .Take(4) 只是在表达式树中设置为常量，所以我无法知道它是否是 Take 函数。

你们中的任何人..以及关于如何根据表达式制作 TakeFinder 的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:57:22.657

我没有尝试过，但我认为您应该将 where 子句替换为 OrderBy 子句。例如，如果它是按 ID 排序的，您将能够取其中的 4 个（如果您放置 OrderByDescending 而不是 OrderBy，这将是 4 个最高或最低的。

编辑：我快速浏览了一下，发现另一篇可能对您有用的帖子：

[相当于 TOP 或 LIMIT/OFFSET 的 Linq to SQL 是什么？](https://stackoverflow.com/questions/192203/whats-the-linq-to-sql-equivalent-to-top)

万一你没看到。;)

# python - Python 从 2.6 升级到 2.7 后找不到模块

> ID：11158563
> 
> 赞同：1
> 
> 时间：2012-06-22T14:47:41.230
> 
> 标签：python, module, version, importerror

具体来说，Python 无法找到 SQL Alchemy。

运行 easy_install 没有帮助，因为 easy_install 认为 SQL Alchemy 已经安装并将路径列为

```
/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg 
```

我尝试（不顾一切地尝试）通过简单地更改路径来解决问题`python2.6`，`python2.7`但是......显然这不起作用。

有谁知道发生了什么以及如何解决它？

**编辑**：目前我正在使用`sys.path.append()`在脚本执行期间简单地附加上述路径，这工作*正常*。然而，我担心这只是一个更大问题的临时解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:53:53.237

除了 python2.6 之外，您可能还刚刚安装了 python2.7，因此您的系统上现在有两个 python 版本，并且`easy_install`仍然使用 2.6 运行。

检查您的系统上是否有一个`easy_install-2.7`，它应该将软件包安装到正确的目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:54:34.620

您可以更改 Python 之间的符号链接，当您键入 Python 命令时反映该符号链接，`ln -s /path/to/target /path/to/shortcut`或者在安装包时显式调用您的 Python 2.7 二进制文件，例如`/usr/lib/python2.7/python /path/to/application.py`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:43:02.680

您的 Python 2.7 安装不是您的系统默认 python，因此`easy_install`将在 Python 2.6（或您`/usr/bin/python`指向的任何内容）上运行，因为`easy_install`脚本使用`#!/usr/bin/python`.

正如 Christian 建议的那样，您可以更改`python`符号链接，使其指向 Python 2.7 而不是 2.6。您也可以使用 update-atlernatives 来执行此操作。

# ios - 我需要另一个视图控制器来在同一个窗口中使用新的 UIView 吗？

> ID：11158564
> 
> 赞同：0
> 
> 时间：2012-06-22T14:47:55.560
> 
> 标签：ios, uiviewcontroller

我在第一个窗口中有一个带有 UIView 的 TabBar 应用程序（没有 Storyboard），它有效地使用了 1/2 的垂直空间。它具有仅属于该视图的背景颜色。

我需要在下半部分添加另一个 UIView，背景颜色不同。

目前，只有一个视图控制器；我是否必须为下部视图添加另一个视图控制器，以便具有可寻址性？还是有不同的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:04:25.583

这取决于控件是否执行任何“逻辑”。如果它只是一个通用的日历显示，我会将它设为 UIView 的子类，因为 UIViews 就是这样，*views*。为其创建一个委托以传递“事件”并处理 UIViewController 中的所有其他逻辑。因为它创建了一个通用的显示，所以这使得可重用性更好。

如果它确实包含任何逻辑，例如加载和处理数据，我会将其设为控制器。不过，从您所说的情况来看，恕我直言，这听起来更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:55:48.250

您不需要添加另一个 ViewController 来与现有视图中的新 UIView 交互。

如果您使用的是 Interface Builder，只需将一个新的**View**对象（只是一个 UIView）从画廊拖到画布上并适当调整大小。要在现有视图控制器中获取对此视图的引用，请调出助手编辑器并从新视图按住 ctrl 并拖动到您的视图控制器实现文件 (*.m)。您现在可以从现有的视图控制器操作新的 UIView。

# android - 为我的 Android 应用程序创建密码验证

> ID：11158568
> 
> 赞同：-2
> 
> 时间：2012-06-22T14:47:59.857
> 
> 标签：android, passwords, textfield, sd-card

> **可能重复：**
> [密码保护我的 android 应用程序（简单的方法）](https://stackoverflow.com/questions/9350305/password-protecting-my-android-app-the-simple-way)

编辑：

我在这里建立了我想要的东西：[密码保护我的 android 应用程序（简单的方法）](https://stackoverflow.com/questions/9350305/password-protecting-my-android-app-the-simple-way)

# 老的

（我有一个名为`password`TextField在位于的文件中。`123``"Wrong password!"``/sdcard/Android/password.txt`

我怎样才能创建这样的功能？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:11:22.010

或许你应该先阅读一点关于 Android 的知识并制作初学者教程：

这向您展示了如何获取字段并访问内容：http: [//developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

这个应该给你一些关于改变活动的知识：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:13:31.217

您需要在这里覆盖很多基础 UI、安全性等，因此我将简要概述您需要完成的步骤。

您需要 UI 的活动或[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)，获取初始密码和检查密码都应该有

使用密码属性集的TextView（隐藏字符）

允许用户取消或选择确定的按钮，并附加了点击监听器

要存储/获取密码，然后使用与此类似的东西而不是 sdcard 和 txt 文件[从共享首选项获取密码](https://stackoverflow.com/questions/10161062/putting-password-on-an-android-class)，您也可以使用共享首选项编辑器来存储它。这增加了一点安全性，但不多

一般来说，您应该存储的不是密码本身，而是您应该真正存储一个令牌以增加安全性，这是一个可以为您做到这一点的类

```
import java.security.MessageDigest;

public class PasswordToken {

    static public String makeDigest(String password) 
    {
         String hexStr = "";

        try {
            MessageDigest md = MessageDigest.getInstance("SHA1");
            md.reset();
            byte[] buffer = password.getBytes();
            md.update(buffer);
            byte[] digest = md.digest();

            for (int i = 0; i < digest.length; i++) {
                hexStr +=  Integer.toString( ( digest[i] & 0xff ) + 0x100, 16).substring( 1 );

        } 
        } catch(Exception e) // If the algo is not working for some reason on this device
                             // we have to use the strings hash code, which 
                             // could allow duplicates but at least allows tokens
        {
            hexStr = Integer.toHexString(password.hashCode()); 
        }

        return hexStr;
    }

    static public boolean validate(String password, String token) 
    {
         String digestToken = "";
         String simpleToken = "";

         digestToken = makeDigest(password);

         if (0 == digestToken.compareTo(token)) 
             return true; 

         if (0 == simpleToken.compareTo(token))
             return true;

         return false; 
    }
} 
```

因此，当您单击确定按钮时存储密码

```
 PasswordTextView.getText();
  String token = PasswordToken.makeDigest(password);
  //... store TOKEN using the shared preferences editor 
```

当您的用户想要登录时检查密码

```
PasswordTextView.GetText();
  String token = PasswordToken.makeDigest(password);
  //... GET token using the shared preferences 

  if (PasswordToken.validate(token))
     Start your new activity
  else
     tell your user to try again 
```

您可以使用[startActivity 或 startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29)来启动另一个活动，并查看覆盖 Dialog 类以执行 UI 位。

# jquery - 为每个可拖动对象设置 jQuery 拖动事件？

> ID：11158571
> 
> 赞同：0
> 
> 时间：2012-06-22T14:48:04.830
> 
> 标签：jquery, jquery-ui-draggable

在一个有大约十几个可拖动 div 的 jQuery 重型 web 应用程序中，不是手动向每个单独添加相同的拖动事件，是否可以告诉 jQuery 每个可拖动的应该具有相同的拖动事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:55:56.893

我需要更多信息，但你能做这样的事情吗：

```
<div class="draggable-div"></div>
$("div.draggable-div").each(someDragunction); 
```

# javascript - 如何使用以下格式在 javascript 或 jquery 中对 JSON 对象进行排序

> ID：11158572
> 
> 赞同：0
> 
> 时间：2012-06-22T14:48:04.907
> 
> 标签：javascript, jquery

```
"attributes": [
    "BytesServed",
    "Duration",
    "UniqueIPAddresses",
    "StopEvents",
],
"rows": [
    [
        "12118931578714",
        "160557966.305",
        "372",
        "193381",
    ],
    [

        "248313315029",
        "4628315.959",
        "350",
        "27352",

    ],
] 
```

我有 2 个数组，其中第一个数组有键，第二个数组是一个带值的多维数组。

Javascript 或 jQuery 中是否有任何预定义的函数可以通过传递一个键以降序为我提供值？

我有一个解决方案，但我觉得这是一种成本更高的方法。如果有人有更好的解决方案，请告诉我。

我目前的解决方案是——从第一个数组中获取索引并遍历第二个数组并创建一个临时数组，然后对该临时数组进行排序并使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:51:49.767

您不需要创建临时数组。一旦你得到你正在寻找的属性的索引（对于这个例子，我假设它在一个名为的变量`index`中，并且整个 JSON 对象在 中`jsondata`），只需一个简单的方法`sort`：

```
jsondata.rows.sort(function(a,b) {
    return a[index]-b[index];
}); 
```

你有你的排序数组。

# .net - .Net Windows 服务和 FileSystemWatcher 问题

> ID：11158575
> 
> 赞同：1
> 
> 时间：2012-06-22T14:48:09.253
> 
> 标签：.net, windows, service, filesystemwatcher

我已经搜索了很多fourm，但没有找到以下问题的任何解决方案，我希望有人能够在这个论坛中帮助我。

我有两个 FSW 的 .net windows 服务，用于监视网络上的文件夹。

文件夹结构 \NetworkDrive\NewFolder\InputDirectory \NetworkDrive\NewFolder\WorkingDirectory

当我将多个文件复制到 \NetworkDrive\NewFolder\InputDirectory 目录时，可以说 file1、file2、file3 和 file4 然后只处理 file1、file2 和 file3 并留下一个文件

下面是服务类和文件系统观察类的代码

服务等级

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.ServiceProcess;
using System.Security.Permissions;

namespace Service1
{
    public partial class Service1 : ServiceBase
    {
    public FaxInbound()
    {
        InitializeComponent();
        this.ServiceName = "Service1";
    }

    protected override void OnStart(string[] args)
    {
        onServiceStartProcess();
    }

    protected override void OnStop()
    {
        try
        {
        workingSysTimer.Enabled = false;
        inboundSysTimer.Enabled = false;
        workingSysTimer.Stop();
        inboundSysTimer.Stop();
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private void inboundSysTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        try
        {
        WatchFileSystem.Run(inboundFSW, inputDirectory, directoryWatchfilter);
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
        finally
        {
        inboundSysTimer.Enabled = true;
        inboundSysTimer.Start();
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private void workingSysTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        try
        {
        WatchFileSystem.Run(workingFSW, workingDirectory, directoryWatchfilter);
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
        finally
        {
        workingSysTimer.Enabled = true;
        workingSysTimer.Start();
        }
    }

    internal void onServiceStartProcess()
    {
        try
        {
        setConfig();
        inboundSysTimer.Enabled = true;
        workingSysTimer.Enabled = true;
        inboundSysTimer.Start();
        workingSysTimer.Start();
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
    }
    }
} 
```

FileSystemwatcher 类

```
using System;
using System.IO;
using System.Text;
using System.Diagnostics;
using System.Collections.Generic;
using System.Security.Permissions;

namespace Service1
{
    [Serializable()]
    internal class WatchFileSystem
    {
    [PermissionSet(SecurityAction.Demand, Name="FullTrust")]
    internal static void Run(System.IO.FileSystemWatcher watcher, string directoryPath = "", string fileFilter = "*.*")
    {
        try
        {
        string args = directoryPath;

        if (args.Length < 3)
        {
            return;
        }

        watcher.Path = args;

        watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.DirectoryName | NotifyFilters.FileName;

        watcher.Filter = fileFilter;
        watcher.InternalBufferSize = 64;

        if (watcher.Path == inputDirectory)
        {
            watcher.Changed += new FileSystemEventHandler(OnInputDirectoryChanged);
            watcher.Created += new FileSystemEventHandler(OnInputDirectoryChanged);
            watcher.Error += new ErrorEventHandler(OnInputDirectoryError);
        }

        if (watcher.Path == workingDirectory)
        {
            watcher.Changed += new FileSystemEventHandler(OnWorkingDirectoryChanged);
            watcher.Created += new FileSystemEventHandler(OnWorkingDirectoryChanged);
            watcher.Error += new ErrorEventHandler(OnWorkingDirectoryError);
        }

        watcher.EnableRaisingEvents = true;
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    internal static void OnInputDirectoryChanged(object source, FileSystemEventArgs e)
    {
        try
        {
        System.IO.FileStream file = null;
        try
        {
            if (System.IO.File.Exists(e.FullPath) == true)
            {
            file = File.Open(e.FullPath, FileMode.Open, FileAccess.Read, FileShare.Read);
            }
        }
        catch (IOException)
        {
            System.Threading.Thread.Yield();
            System.Threading.Thread.Sleep(100); // hack for timing issues
            return;
        }
        finally
        {
            if (file != null)
            file.Dispose();
        }

        if (e.ChangeType == WatcherChangeTypes.Created)
        {
            System.IO.FileInfo infoFile = new System.IO.FileInfo(e.FullPath);
            if (infoFile.Exists == true)
            {
            infoFile = null;
            try
            {
                if (file != null)
                {
                file.Close();
                file.Dispose();
                }

                if (System.IO.File.Exists(e.FullPath) == true)
                {
                if (System.IO.File.Exists(System.IO.Path.Combine(workingDirectory, e.Name)) == false)
                {
                    System.IO.File.Move(e.FullPath, System.IO.Path.Combine(workingDirectory, e.Name));
                }
                }
            }
            catch (IOException)
            {
                System.Threading.Thread.Yield();
                System.Threading.Thread.Sleep(100); // hack for timing issues   
                return;
            }
            }
        }
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private static void OnInputDirectoryError(object source, ErrorEventArgs e)
    {
        System.IO.FileSystemWatcher inboundFSW = new System.IO.FileSystemWatcher();
        inboundFSW.EnableRaisingEvents = true;
        inboundFSW.IncludeSubdirectories = false;

        while (!inboundFSW.EnableRaisingEvents)
        {
        try
        {
            WatchFileSystem.Run(inboundFSW, inputDirectory, directoryWatchfilter);
        }
        catch
        {
            System.Threading.Thread.Sleep(5000);
        }
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    internal static void OnWorkingDirectoryChanged(object source, FileSystemEventArgs e)
    {
        try
        {
        System.IO.FileStream file = null;
        try
        {   
            if (System.IO.File.Exists(e.FullPath) == true)
            {
            file = File.Open(e.FullPath, FileMode.Open, FileAccess.Read, FileShare.Read);
            }
        }
        catch (IOException)
        {
            System.Threading.Thread.Yield();
            System.Threading.Thread.Sleep(100); // hack for timing issues   
            return;
        }
        finally
        {
            if (file != null)
            file.Dispose();
        }

        if (e.ChangeType == WatcherChangeTypes.Created)
        {
            System.IO.FileInfo infoFile = new System.IO.FileInfo(e.FullPath);
            if (infoFile.Exists == true)
            {
            infoFile = null;
                try
                {
                if (file != null)
                {
                    file.Close();
                    file.Dispose();
                }

                if (System.IO.File.Exists(e.FullPath) == true)
                {
                    generateFiles(System.IO.Path.Combine(workingDirectory, e.Name));
                }
                }
                catch (IOException)
                {
                System.Threading.Thread.Yield();
                System.Threading.Thread.Sleep(100); // hack for timing issues  
                return;
                }
            }
        }
        }
        catch (ApplicationException ex)
        {
        throw new ProblemException(ex.Message, ex.InnerException);
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private static void OnWorkingDirectoryError(object source, ErrorEventArgs e)
    {
        System.IO.FileSystemWatcher workingFSW = new System.IO.FileSystemWatcher();
        workingFSW.EnableRaisingEvents = true;
        workingFSW.IncludeSubdirectories = false;

        while (!workingFSW.EnableRaisingEvents)
        {
        try
        {
            WatchFileSystem.Run(workingFSW, workingDirectory, directoryWatchfilter);
        }
        catch
        {
            System.Threading.Thread.Sleep(5000);
        }
        }
    }
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:07:55.953

如果还没有找到答案，请参考： [FileSystemWatcher 问题](https://stackoverflow.com/questions/6000856/filesystemwatcher-issues)

您是否考虑过使用投票系统？您可以使用创建一个新线程，检查新文件并复制/移动它们，然后使用`Thread.Sleep()`让线程在您选择的特定时间间隔内休眠。并循环这个过程。

# php - 使用 PDO 在 php 中的多个查询与单个查询？

> ID：11158596
> 
> 赞同：1
> 
> 时间：2012-06-22T14:48:58.417
> 
> 标签：php, mysql, pdo, phpmyadmin

我是 PHP 新手，对数据库了解不多。我有一个用户表如下：

```
------------------------------------------------------------------------
userid|firstname|lastname|password|Emailaddress|gender|agegroup|location
------------------------------------------------------------------------
      |         |        |        |            |       |       |
      |         |        |        |            |       |       | 
```

我想得到`gender`，`agegroup`并`location`计算特定的列值。如果我运行单个查询，则数据不会根据我的需要返回。

```
$query="SELECT AgeGroupId as agegroupid,
        count(AgeGroupId) as agegroupcount,
        GENDER as gender,
        count(GENDER) as gendercount,
        Location as location,
        count(Location) as locationcount 
        FROM userprofile 
        GROUP BY AgeGroupId, GENDER, Location"; 
```

如果我运行三个不同的查询，那么我会得到一些我想要的。

```
$query1="SELECT GENDER as gender,
         count(GENDER) as gendercount 
         FROM userprofile 
         GROUP BY GENDER";
$query2="SELECT AgeGroupId as agegroupid,
         count(AgeGroupId) as agegroupcount 
         FROM userprofile 
         GROUP BY AgeGroupId";
$query3="SELECT Location as location,
         count(Location) as locationcount 
         FROM userprofile 
         GROUP BY Location"; 
```

因此，如果我运行三个查询，那么我将获得我想要的格式化数据，如果我运行单个查询，则我需要使用 PHP 对其进行格式化。那么哪一个会更好呢？在 PHP 中运行单个查询和处理数据并获取格式化数据或运行三个查询并获取格式化数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:59:32.513

当您使用 3 个查询时，您将向您的数据库发送 3 个请求，这可能需要更长的时间而不是 1 个请求。此外，随着您的桌子变大，它甚至可能需要更长的时间。用 PHP 格式化数据会是一个更好的选择，尽管它会使查询变得难以阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:15:09.437

三合一查询：

```
SELECT *

FROM
 (SELECT GENDER as gender,
   COUNT(GENDER) as gendercount 
  FROM userprofile 
  GROUP BY GENDER) AS by_gender

INNER JOIN 
 (SELECT AgeGroupId as agegroupid,
   COUNT(AgeGroupId) as agegroupcount 
  FROM userprofile 
  GROUP BY AgeGroupId) AS by_age

INNER JOIN 
 (SELECT Location as location,
   COUNT(Location) as locationcount 
  FROM userprofile 
  GROUP BY Location) AS by_loc 
```

# c# - 通过对 DataTable、SqlConnection、SqlCommand 和 SqlDataAdapter 使用 Statement & Dispose 清理资源

> ID：11158602
> 
> 赞同：1
> 
> 时间：2012-06-22T14:49:30.600
> 
> 标签：c#, ado.net, resources, using, sqlclient

我必须调用一个存储过程并获得结果。`Dispose()`我知道有多种方法可以做到这一点（就像所有编程一样），我应该通过调用和/或来清理资源`Close()`。阅读这个[close or dispose](https://stackoverflow.com/questions/4153595/close-or-dispose)问题，我认为我应该使用该`using`语句，这应该足够了。下面是我打电话的方式。我的问题是 - 我是否过于复杂了，这会清理所有资源吗？

```
private Int32 CallStoredProcedure(Int32 Id)
{
    using (var dt = new DataTable())
    {
        using (var conn = new SqlConnection(ConnectionString))
        {
            using (var sqlCmd = new SqlCommand("SEL_StoredProcedure", conn))
            {
                using (var sda = new SqlDataAdapter(sqlCmd))
                {
                    sqlCmd.CommandType = System.Data.CommandType.StoredProcedure;
                    sqlCmd.Parameters.AddWithValue("@ID", Id);
                    sqlCmd.Connection.Open();

                    sda.Fill(dt);
                }
            }
        }

        if (dt.Rows.Count == 1)
            return Convert.ToInt32(dt.Rows[0]["IDv2"]);
        else if (dt.Rows.Count > 1)
            throw new Exception("Multiple records were found with supplied ID; ID = " + studentId.ToString());
    }
    return 0;
} 
```

PS - 我知道我可以调用`ExecuteScalar`，但这不是我在这里寻找的，因为我将使用非标量调用的一般格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:59:38.740

AFAIK 您不需要在使用块中包装 DataTable 或 SqlDataAdapter，因为它们不实现 IDisposable。

您可以像这样将 using 语句“链接”在一起：

```
using(var conn = new SqlConnection(connectionString))
using(var cmd = new SqlCommand("SEL_storedProcedure", conn))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:15:47.930

您编写的代码确实可以正确处理所有对象。

您应该注意的是，处理 DataTable 会使该对象不可用，这*通常*不是DataTable 的意图。通常，如果您要填充 DataTable，您打算将数据保留（缓存）一段时间，而不是在查询方法中丢弃它。

# html - HTML 中的文本字段对齐错误

> ID：11158603
> 
> 赞同：0
> 
> 时间：2012-06-22T14:49:36.070
> 
> 标签：html, css

谁能告诉我为什么第一个文本框在下面的 HTML/CSS 中没有对齐？（[此处为 JSFiddle](http://jsfiddle.net/ughjk/)）。

```
<div class="gift_code_fields">
    <div class="gift_code_line">
        <div class="gift_code_line_header">
            <label for="1">1</label><span>:</span>
        </div>
        <input class="gift_code" id="gift_code_1" name="gift_code_1" type="text">

    </div>
    <div class="gift_code_line">
        <div class="gift_code_line_header">
            <label>2</label>
            <span>:</span>
        </div>
        <input type="text" class="gift_code">
    </div>
    <div class="gift_code_line">
        <div class="gift_code_line_header">
            <label>3</label>
            <span>:</span>
        </div>
        <input type="text" class="gift_code">
    </div>
    <div class="gift_code_line">
        <div class="gift_code_line_header">
            <label>4</label>
            <span>:</span>
        </div>
        <input type="text" class="gift_code">
    </div>
</div>​ 
```

```
.gift_label{
  width: 30px;
  display: inline-block;
  font-weight: bold;
}

.gift_code_section{
  margin-bottom: 30px;
}

.gift_code_choose{
  width: 100px;
  float: left;
}

.gift_code_fields{
  width: 300px;
  display: inline-block;
}

.add_gift_code{
  cursor: pointer;
}

.gift_code {
  display: inline;
}

.gift_code_line_header{
  display: inline;
  width: 20px;
  margin-right: 10px;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:53:23.323

这是因为您已将`<span>`for 冒号放在了除第一个之外的所有内容的新行上：

```
<label for="1">1</label><span>:</span>

<label for="2">2</label>
<span>:</span> 
```

这是因为，根据 HTML 规范，任何空白字符序列都被视为单个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:52:06.710

因为你在之前缺少换行`:`

你有

```
<label for="1">1</label><span>:</span> 
```

代替

```
<label for="1">1</label>
            <span>:</span> 
```

至于其他线路。

别客气。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:55:31.957

[http://jsfiddle.net/ughjk/6/](http://jsfiddle.net/ughjk/6/)

```
.gift_code_line_header{
    display: inline-block;
  } 
```

除非它是块或内联块元素，否则不会应用您为标签包装器设置的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:54:31.190

代替

```
<div class="gift_code_line">
    <div class="gift_code_line_header">
        <label for="1">1</label><span>:</span>
    </div>
    <input class="gift_code" id="gift_code_1" name="gift_code_1" type="text">

</div> 
```

和：

```
<div class="gift_code_line">
    <div class="gift_code_line_header">
        <label for="1">1</label>
        <span>:</span>
    </div>
    <input class="gift_code" id="gift_code_1" name="gift_code_1" type="text">

</div> 
```

# php - PHP：将数组中的所有值设置为某事

> ID：11158607
> 
> 赞同：34
> 
> 时间：2012-06-22T14:49:54.117
> 
> 标签：php, arrays

您好想问是否有一种方法可以在没有 foreach 的情况下执行此操作（$array as $k=>$v）。我知道它会起作用，但如果你知道的话，我正在寻找一种更优雅的方式。所以我的数组就像：

```
1 = 231
2 = 432
3 = 324 
```

我翻转它，它变成了：`231 => 1, 432 =>2, 324 => 3`。现在我需要做的是将所有值设置为`'1'`

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-22T14:53:29.737

您可以使用[`array_fill_keys`](http://www.php.net/manual/en/function.array-fill-keys.php)：

```
$array = array(
    1 => 231,
    2 => 432,
    3 => 324
);

$array = array_flip($array);

$array = array_fill_keys(array_keys($array), 1); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-22T14:53:11.287

[array_fill_keys()](http://www.php.net/manual/en/function.array-fill-keys.php)应该是你需要的：

```
$keys = array_keys($yourArray);
$filled = array_fill_keys($keys, 1); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-13T06:57:28.520

对于**PHP >5.3**，您可以使用*匿名函数。*

`array_walk($array,function(&$value){$value=1;});`

注意：值是通过引用传递的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-22T14:52:38.840

我相信你正在寻找这个函数：[array_fill()](http://php.net/manual/en/function.array-fill.php "数组填充（）")

从上面的链接：

> “用 value 参数的值的 num 个条目填充数组，键从 start_index 参数开始。”

[尽管如果您的索引不是数字和/或不可枚举的（例如，从 231 到 324 包括在内），那么正如 Rocket 所说，使用 array_fill_keys()](http://www.php.net/manual/en/function.array-fill-keys.php "array_fill_keys()")或您的常规 foreach可能会更好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-09T10:58:42.360

我在这个帖子上遇到了同样的问题，但我最终得到了另一种方法。

为什么使用 array_flip + array_keys 而不是简单地使用 array_values？

```
$array = array(
    1 => 231,
    2 => 432,
    3 => 324
);

$array = array_fill_keys(array_values($array), 1); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T14:54:59.380

您调用的任何方法，例如 array_map 或 fill_keys 仍将使用循环来遍历数组。似乎您需要诸如 array_map 之类的东西，[可以在此处找到](http://php.net/manual/en/function.array-map.php)

如果您认为这更优雅，对每个人来说都是：)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-22T09:55:39.767

```
array_replace(array_flip($columns), array_fill_keys($columns, 0)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-17T22:28:58.373

如果您需要翻转键/值并将所有值重置为同一事物 (1)，您可以通过一个简单的操作来完成：

```
$array = array_fill_keys($array, 1); 
```

* * *

你的阵列

```
$array = [
    1 => 231
    2 => 432
    3 => 324
]; 
```

变成

```
$array = [
    231 => 1
    432 => 1
    324 => 1
]; 
```

# android - 如何将一个 android.mk 文件导入另一个 android.mk 文件？

> ID：11158610
> 
> 赞同：0
> 
> 时间：2012-06-22T14:49:57.610
> 
> 标签：android, android-ndk

我想将一个 ndroid.mk 文件导入到另一个 android.mk 文件中，我有 android.mk 文件，其中有

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := importfile
LOCAL_SRC_FILES := libEDSDK.a
/*LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/EDSDK $(LOCAL_PATH)/EDSDKErrors $(LOCAL_PATH)/EDSDKTypes*/
LOCAL_ARM_MODE := arm
TARGET_PLATFORM:=android-8
TARGET_ARCH_ABI:=armeabi
TARGET_ABI:=$(TARGET_PLATFORM)-$(TARGET_ARCH_ABI)
include $(PREBUILT_STATIC_LIBRARY) 
```

我想将此 android.mk 文件导入另一个 android.mk 文件

```
$NDK_MODULE_PATHjni/module1/Android.mk:
 LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := EDSK
LOCAL_SRC_FILES := sample.c
LOCAL_STATIC_LIBRARIES := EDSDK.lib
include $(BUILD_SHARED_LIBRARY)
LOCAL_ARM_MODE := arm
TARGET_PLATFORM:=android-8
TARGET_ARCH_ABI:=armeabi
TARGET_ABI:=$(TARGET_PLATFORM)-$(TARGET_ARCH_ABI)
$(call import-module,importfile) 
```

但是在构建这个时我得到了错误，即

```
Android NDK: jni/Android.mk: Cannot find module with tag 'importfile' in import path    
Android NDK: Are you sure your NDK_MODULE_PATH variable is properly defined ?    
Android NDK: The following directories were searched:    
Android NDK: 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:17:36.550

明确使用 $(LOCAL_PATH) 的 NDK 构建问题的答案不正确（我不知道它们是否总是不正确，但它们绝对不适用于 NDK 版本 r8b）。您不应该在路径前面加上 $(LOCAL_PATH) - 构建系统会自动为 $(LOCAL_PATH) 添加前缀 - 因此这些脚本在 LOCAL_PATH 前缀两次并且失败。这个错误在整个 Stack Overflow 中重复出现，但我无法通过并纠正有关 Android 构建系统的所有答案，因此我已将其发布在有关该主题的最新帖子之一中。

我建议回答问题的人应该使用最新版本的 NDK 工具，或者使用他们正在使用的版本来限定他们的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:26:05.577

基本上是这样做的：

```
include $(LOCAL_PATH)/libos/Android.mk 
```

这只是普通的 makefile 语法（见这里：http://www.gnu.org/software/make/manual/html_node/Include.html）

# c# - ASP.NET MVC 4 RC Web API 参数绑定问题

> ID：11158617
> 
> 赞同：5
> 
> 时间：2012-06-22T14:50:22.113
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-web-api

我在 ASP.NET MVC 4 RC Web API 中遇到了我认为是一个奇怪的绑定问题。我有一种方法旨在接受来自客户端的发布请求。问题是调用 post 方法时没有任何参数绑定，我在 throw 行和名称上到达断点，email 都是空的。如果我在 JavaScript 中将请求的类型更改为 GET，则调用下面的 Get 函数并绑定参数。

为什么 Post 方法的参数无法绑定，我该如何解决？

```
send: function(evt) {
    evt.preventDefault();
    $.ajax( {
        url: '/api/person',
        data: this.model.toJSON(),
        type: "POST",
        dataType: "json",
        success: function(data) {
            console.log("Success");
        },
        error: function(data) {
            console.log("Error");
        }
    });
     } 
```

以下是控制器动作：

```
public void Get(string name, string email) {
    throw new NotImplementedException();
}

public void Post(string name, string email) {
    throw new NotImplementedException();
} 
```

笔记：

*   我正在使用 ASP.NET MVC 4 RC Web API 的所有默认值（所以反序列化器应该是 Json.NET）
*   JS 调试器上的 Chrome 网络选项卡正确显示了 post 表单数据中的参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T15:17:12.163

与 MVC（网页）不同[，默认情况下，简单参数类型不会从帖子正文绑定，而是从 URI 绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)。因此，使用您的代码原样，您需要在查询字符串中传递`name`and`email`参数或作为路由参数。

然而，这可以通过创建模型类型（在 MVC 白话中）并将其用于方法参数来轻松解决。实际上，如果您随后`[FromUri]`在 get 方法上使用，则可以将它用于两者（在您给出的情况下）：

```
public class SomeParams {
  public string name { get; set; }
  public string email { get; set; }
}

//now an alternative way to write the Get method
public MyResult Get([FromUri] SomeParams p){
  //members are bound from the query string (more like MVC traditional binding)
  //note - as in MVC, SomeParams will need a default constructor for this to work.
}

public PostResult Post(SomeParams p){
  //'p' is bound from your JSON (assuming correct format)
  //because 'complex' types are deserialized using formatters
  //only one object can be read from the body with a formatter in Web API
  //as the request body is not buffered; unlike MVC.
} 
```

*我坚持使用方法的返回类型只是因为它们需要返回一些东西！*

我真的建议阅读上面链接到的 Mike Stall 的文章（以及他的许多其他文章）。

很容易假设 Web API，因为它共享相同的范例甚至 MVC 的类名，实际上与 MVC 相同 - 但事实并非如此。我最初想知道为什么会这样（因为我自己在 MVC 之上编写了很多 REST 服务，并且发现它非常酷，一旦你编写了一些实用程序类和基类增强），但是他们已经正确看待编写 Web API 的挑战，我认为改变他们所拥有的方法可能是正确的。

然而，这确实意味着我们必须将一些我们现在可能认为理所当然的事情视为理所当然，并为 Web API 重新学习它们。

# sql - 重写不带子查询的 SQL 查询（有子句中的子查询）

> ID：11158629
> 
> 赞同：3
> 
> 时间：2012-06-22T14:51:05.523
> 
> 标签：sql, join, subquery, relational-algebra

在我的期末考试中，我得到了非常讨厌的 SQL、关系代数和关系微积分查询。我得到了这个查询：

查找从“计算机”类别订购所有产品的客户的姓名。（订购了计算机类别中所有产品的客户）

这是架构：

客户（**Customer_Id**、Cust_First_Name、Cust_Last_Name）

订单 ( **Order_Id** , *Customer_Id*)

Order_items ( **Order_Item_id** , *Order_Id*, *Product_Id*)

Product_info ( **Product_Id** , Product_Name, Category)

粗体（主键）、斜体（外键）

现在要将这个查询转换为关系代数，我需要使用连接而不是子查询。为了帮助自己一点，我首先编写 SQL，然后将 SQL 查询转换为关系代数。

这是我的尝试：

尝试 1（使用子查询）：

```
select C.Customer_Id
from Customer C
where
(
select count(*)
from product_info
where category = 'Computer'
)=(select count (distinct pi.Product_id)
from orders S, order_items OI, product_info pi
where S.Customer_Id = C.Customer_Id and S.Order_Id = OI.Order_Id and  pi.product_id=OI.product_id and category = 'Computer') 
```

尝试 2（在有子句中使用一个子查询）：

```
select C.Customer_Id
from Customer C, Product_info pi, Orders S, Order_Items oi
where C.Customer_Id = S.Customer_Id and S.Order_Id = OI.Order_Id and OI.Product_Id = pi.Product_Id and pi.category = 'Computer'
group by C.Customer_Id
having count (distinct pi.Product_Id) = 
(
select count (*) 
from Product_info
where category = 'Computer'
) 
```

尝试 3（from 子句中的子查询）：

```
select C.Customer_Id
from Customer C, Product_info pi, Orders S, Order_Items oi,
(
select count (*) num
from Product_info
where category = 'Computer'
) numbr
where C.Customer_Id = S.Customer_Id and S.Order_Id = OI.Order_Id and OI.Product_Id = pi.Product_Id and pi.category = 'Computer'
group by C.Customer_Id, numbr.num
having count (distinct pi.Product_Id) = numbr.num 
```

现在这个查询可以用关系代数来表示，但它效率低下，因为它重复了值。

我的最后一次尝试（不编译并在 where 中使用子查询）：

```
select *
from Customer C
where not exists
(select *
from (select Order_Id from orders O where O.Customer_Id = C.Customer_Id) S INNER JOIN order_items OI on S.Order_Id = OI.Order_Id
RIGHT OUTER JOIN (select Product_Id from product_info where category ='Computer') PI on PI.Product_Id = OI.Product_Id
where OI.Product_Id = null) 
```

我在某处读到，在这种情况下可以使用 LATERAL，但是关于 LATERAL 的信息太少，我无法正确理解。

考试结束了，但我仍然对解决方案感兴趣。因为这是 2 小时的考试，其中有 6 个查询、ER 图、ER-To-Relational、标准化到 BCNF、3NF，我想到这个查询怎么会这么难解决。我在这里错过了一些重要的东西吗？

这是一些小样本数据，可以帮助我一点：

[http://pastebin.com/DkCe0AGm](http://pastebin.com/DkCe0AGm)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:17:32.860

这对于关系代数中的除法运算符非常容易。您应该注意，仅仅因为您可以用关系代数编写的任何东西都可以用 SQL 编写，但这并不意味着您可以用关系代数编写**的任何东西都可以用 SQL 编写相同的方式**。SQL 没有与除法运算符等效的简单方法，因此首先尝试在 SQL 中编写它不会有帮助。

由于我不知道如何在这里写希腊字母，所以我只是想写一些东西。

> Sigma -> 选择
> Pi -> 项目
> Rho -> 重命名

```
PROJECT c.Cust_First_Name, c.Cust_Last_Name, i.Product_ID (SELECT c.customer_id = o.customer_id, o.order_id = i.order_id (RENAME (Customer c) X RENAME (Orders o) X RENAME (Order_items i))) 
DIVIDE PROJECT p.product_id (SELECT p.category = 'Computers' (RENAME (Products p))) 
```

如果你把它输入到 LaTeX 编辑器中，你会看到它的实际形式：

```
\Pi_{c.cust\_last\_name, c.cust\_first\_name, i.product\_id} (\sigma_{c.customer\_id = o.customer\_id, o.order\_id = i.order\_id}(\rho_{c}(customer) X \rho_{o}(orders) X \rho_{i}(order\_items))) 
\div  \Pi_{p.product\_id}(\sigma_{p.category='computers'}(\rho_{p}(products))) 
```

您可能*会*争辩说这是一个子查询，但我会说这只是两个不同的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:04:16.757

我觉得这个问题模棱两可。此版本获取仅从类别计算机订购产品的客户：

```
select c.customer_id, c.Cust_First_Name, c.Cust_Last_Name
from Customer c join
     Orders o
     on c.customer_id = o.customer_id join
     Order_Item oi
     on o.order_Id = oi.order_id join
     Product_Info pi
     on oi.Product_id = pi.product_id
group by c.customer_id, c.Cust_First_Name, c.Cust_Last_Name
having min(case when pi.category = 'Computer' then 1 else 0 end) = 1 
```

在这种情况下，我只是在计算客户是否有任何未在该类别中购买的产品。

另一种解释是“订购了计算机类别中所有产品的客户”：

```
select c.customer_id, c.Cust_First_Name, c.Cust_Last_Name
from Customer c join
     Orders o
     on c.customer_id = o.customer_id join
     Order_Item oi
     on o.order_Id = oi.order_id join
     Product_Info pi
     on pi.Product_id = oi.Product_id cross join
     (select count(distinct product_id) as cnt
      from Product_info pi
      where category = 'Computer'
     ) comps
where pi.Category = 'Computer'
group by c.customer_id, c.Cust_First_Name, c.Cust_Last_Name
having count(distinct product_id) = comps.cnt 
```

在这种情况下，想法是计算不同产品的数量并查看计数是否匹配。

我不确定将这些转换为关系代数是否真的有助于形成一个好的查询。

# python - Django 找不到自定义模板标签

> ID：11158630
> 
> 赞同：0
> 
> 时间：2012-06-22T14:51:07.613
> 
> 标签：python, django, django-templates

我在我的应用程序中创建了一个 templatetags 文件夹，里面有一个 __init__.py + active.py，即使应用程序在 INSTALLED_APPS 中，Django 也找不到它：

```
''active'' is not a valid tag library: Template library 'active' not found, tried
django.templatetags.'active',website.home.templatetags.'active',
django_extensions.templatetags.'active',django.contrib.flatpages.templatetags.'active',
django.contrib.staticfiles.templatetags.'active',
django.contrib.admin.templatetags.'active' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:55:50.910

您可能尝试像这样[加载模板标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#load)：

```
{% load 'active_tags' %} 
```

试试这个：

```
{% load active_tags %} 
```

# jquery - 调整 jQuery 函数以在您第二次单击时隐藏 div？

> ID：11158631
> 
> 赞同：0
> 
> 时间：2012-06-22T14:51:11.527
> 
> 标签：jquery, jquery-plugins, hide, show

我在网上找到了这个显示和隐藏 div 的 jQuery 插件。除了一个因素外，它非常适合我的网站。单击标题时，会出现相应的 div。但是在您单击另一个标题之前，该 div 不会消失。如何调整下面的代码，以便再次单击同一标题时，div 会再次隐藏？

```
(function ($) {
$.fn.showHide = function (options) {

//default vars for the plugin
    var defaults = {
        speed: 1000,
        easing: '',
        changeText: 0,
        showText: 'Show',
        hideText: 'Hide'

    };
    var options = $.extend(defaults, options);

    $(this).click(function () {
// optionally add the class .toggleDiv to each div you want to automatically close
                  $('.toggleDiv').slideUp(options.speed, options.easing);
         // this var stores which button you've clicked
         var toggleClick = $(this);
         // this reads the rel attribute of the button to determine which div id to toggle
         var toggleDiv = $(this).attr('rel');
         // here we toggle show/hide the correct div at the right speed and using which easing effect
         $(toggleDiv).slideToggle(options.speed, options.easing, function() {
         // this only fires once the animation is completed
         if(options.changeText==1){
         $(toggleDiv).is(":visible") ? toggleClick.text(options.hideText) : toggleClick.text(options.showText);
         }
          });

      return false;

    });

};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:02:05.727

试试这个：

```
$(this).click(function() {
    var toggleClick = $(this);
    var toggleDiv = $(this).attr('rel');
    var isDivVisible = $(toggleDiv).is(":visible");
    $('.toggleDiv').slideUp(options.speed, options.easing);

    if (!isDivVisible) {
        $(toggleDiv).slideToggle(options.speed, options.easing, function() {
            if (options.changeText == 1) {
                $(toggleDiv).is(":visible") ? toggleClick.text(options.hideText) : toggleClick.text(options.showText);
            }
        });
    }
    return false;

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:01:00.580

只需检查 div 的状态并相应地显示/隐藏

[http://jsfiddle.net/psLYW/1/](http://jsfiddle.net/psLYW/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:09:37.727

据我所知，您只是试图将元素的状态从可见切换到隐藏（然后再返回）？

如果您只想显示/隐藏，jQuery 的绝妙`.slideToggle()`方法可能会有所帮助。

```
//  Your elements. Change these!
var link = $('.yourLink');
var target = $('.yourDiv');

//  Showing/hiding
link.click(function() {
    target.toggleSlide();
    return false;
}); 
```

如果没有，那么您将需要使用该`toggle`函数，并为此使用两个自定义回调：

```
//  Your elements. Change these!
var link = $('.yourLink');
var target = $('.yourDiv');

link.toggle(function() {
    //  Animate showing
    !target.is(':animated') && target.slideDown().text('how do you do?');
    return false; // stop the default link functionality
}, function() {
    //  Animate hiding
    !target.is(':animated') && target.slideUp().text('see you later, alligator');
    return false;
}); 
```

链接： http : [//api.jquery.com/toggle/ http://api.jquery.com/slideToggle/](http://api.jquery.com/toggle/)

# android - Android：突出显示按钮，直到按下其他按钮

> ID：11158633
> 
> 赞同：0
> 
> 时间：2012-06-22T14:51:14.603
> 
> 标签：android, android-layout, button

我的布局中有 4 个按钮 - 它们是 View 的 4 种可能内容之间的切换器。任何时候按下这些按钮中的一个，我都需要突出显示它（只需加载其他背景、其他图像并更改文本的颜色）。麻烦的是，我需要从触摸按钮的那一刻开始（而不是在单击之后）直到按下其他按钮为止。简单地使用 onClick() 方法不会很好，因为我必须检查其他按钮是否已经突出显示，并且只有在单击之后才会进行更改。有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:32:46.330

`onFocusChange`听众呢 ？

```
button.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus) {
            // set the background, image and color for focused
        } else {
            // set the background, image and color back to normnal
        }
    }
}); 
```

为每个按钮设置一个，你应该已经准备好了。

# javascript - Javascript数组搜索引擎

> ID：11158634
> 
> 赞同：0
> 
> 时间：2012-06-22T14:51:21.887
> 
> 标签：javascript, mysql, search-engine

我有一个大约 10.000 行和大约 20 个字段的 mysql DB 表。我有一个包含所有字段的表单，当我在任何字段中按下一个键时，它应该将 10.000 行过滤为仅与我输入的内容匹配的行。我不想为我键入的每个键向服务器发出 AJAX 请求，我想我可以首先获取所有数据并从中创建一个数组并以这种方式进行搜索。我的问题是：这是一种很好的方法，还是我应该坚持在数据库上使用良好的旧 SQL 查询并执行 N ajax 请求？你有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:53:38.400

只需在按键和实际加载数据之间添加半秒暂停，您就可以使增量搜索更加高效。用户可能不会注意到，但您的服务器会。

当然，如果您也可以添加 JavaScript 辅助过滤，那就更好了。没有理由不能将这两种方法结合起来。

# java - mysql 显示在java中创建表

> ID：11158645
> 
> 赞同：3
> 
> 时间：2012-06-22T14:51:56.183
> 
> 标签：java, mysql

我可以在 mysql 的 Java 代码中触发 show create table 查询吗？

我需要的是一个文件中一个数据库（旧数据库）的完整架构，并且同样还有另一个数据库（修改后的）架构。

并想比较两者的模式以检查差异。

是否可以？

为什么我需要java，因为我可以建立临时合作者，它会定期检查sql并在开发阶段给我它的不同之处，因为多个人都在项目中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:59:26.400

您可以将其作为一个简单的查询来完成。您将返回 1 行 2 列。第一列是表名，第二列是带有 create table SQL 语句的 TEXT 或 CLOB。

```
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("show create table BLA.MY_TABLE");
if(rs.next()) {
       System.out.println("Table Name: "+rs.getString(1));
       System.out.println("SQL Code: "+rs.getString(2));
}
rs.close();
stmt.close(); 
```

# python - 在 3D 轴上绘制 2D 轮廓集

> ID：11158650
> 
> 赞同：2
> 
> 时间：2012-06-22T14:52:11.490
> 
> 标签：python, python-2.7, matplotlib

我正在尝试突破 mpl 中 3D 绘图的限制，我知道它们并不是功能齐全的，并且存在其他软件包（Mayavi）。但是，如果可能的话，我想在 mpl 中执行此操作。

我正在尝试绘制一个 3D 数组的切片。理想情况下，我想在 3D 数组的底部绘制图像，但是将其作为填充轮廓集就足够了。目前我正在做以下事情：

```
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
qcset = mpl.contour.QuadContourSet(ax,data[:,:,6],levels=[1])
ax.add_contour_set(qcset)
plt.show() 
```

然而，这让我用空白轴结束了。我在这几行上尝试了多种排列，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:28:00.527

如何使用 matplotlib 的高级轮廓函数：

```
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
cset = ax.contour(data[:,1,1],data[1,:,1],data[1,1,:],zdir='z', offset=-40)
ax.set_zlim(-40, 40)
plt.show() 
```

[这里](http://matplotlib.sourceforge.net/examples/mplot3d/index.html)还有更多的例子，特别是[这个](http://matplotlib.sourceforge.net/examples/mplot3d/contour3d_demo3.html)。

# android - How do I prevent a single window from rotating when in a tabGroup?

> ID：11158651
> 
> 赞同：0
> 
> 时间：2012-06-22T14:52:13.993
> 
> 标签：android, ios, orientation, titanium, titanium-mobile

I have a Titanium app with a tabGroup that has 4 tabs. I want to disable rotating and lockdown to whatever orientation the device is in when the second tab is active. The device can be free to rotate when any other tab is active. I've tried looking around, but haven't been able to come up with anything other than disabling orientation change completely.

I'd really appreciate any help in this matter!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T16:18:59.730

complete documentation on managining orientation change on Appcelerator

[https://wiki.appcelerator.org/display/guides/Orientation](https://wiki.appcelerator.org/display/guides/Orientation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:35:13.647

I haven't tried this but every tab contains an activity, so you can fix the orientation of that activity with `android:screenOrientation`. If what you want is to keep the first orientation your devices has when you press that tab, keep a static variable that you initialized in onCreateMethod. Hope it helps!

# c++ - 堆块已修改超过请求的大小

> ID：11158655
> 
> 赞同：0
> 
> 时间：2012-06-22T14:52:19.633
> 
> 标签：c++, qt, memory, qt4, heap-memory

**更新：**错误似乎是由这一行产生的：*line = color;

我收到以下错误，但我不明白它可能来自哪里：

错误：

> HEAP [testQt.exe]：0B444FE8 处的堆块在 0B44C6B0 处修改，超过了请求的 76c0 大小

生成它的行：

```
return QPixmap::fromImage(qimage); 
```

从：

```
QPixmap Interpolation::getData() {
    QPointF pt(0, 0);
    QRgb color;
    QImage qimage(m_width, m_height, QImage::Format_ARGB32);
    qimage.fill(Qt::transparent);

    for (int i(0); i < m_height; ++i) {
        m_progress->setValue(m_width+i);
        QRgb *line = (QRgb *)qimage.scanLine(i);
        for (int j(0); j < m_width; ++j) {
            pt.setX(j);
            pt.setY(i);
            line += 1;
            if (isInHull(pt)) {
                color = colorScale(interp(&pt));
                *line = color; //If I remove this part the program won't crash
            }
        }
    }  
    return QPixmap::fromImage(qimage);
} 
```

如果有帮助：

```
QRgb Interpolation::colorScale(qreal value)
{
    int cat;
    cat = qFloor(qreal(9)*(value-m_min)/(m_max-m_min));

    return m_couleurs[cat];
} 
```

和：

```
m_couleurs[0] = qRgb(247, 252, 240);
m_couleurs[1] = qRgb(224, 243, 219);
m_couleurs[2] = qRgb(204, 235, 197);
m_couleurs[3] = qRgb(168, 221, 181);
m_couleurs[4] = qRgb(123, 204, 196);
m_couleurs[5] = qRgb(78, 179, 211);
m_couleurs[6] = qRgb(43, 140, 190);
m_couleurs[7] = qRgb(8, 104, 172);
m_couleurs[8] = qRgb(8, 64, 129); 
```

任何线索将不胜感激。

编辑：添加完整功能以防万一。Edit2：使代码更清晰，并删除了无用的部分。Edit3：更新了问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:47:45.097

在将颜色分配给 *line 之前先前进线。因此，当 j = 0 时，您实际上是在设置像素 1，在您写入缓冲区末尾的最后一个扫描行的最后一个像素的末尾。

将行 += 1 移动到循环的末尾。

# php - 如何防止 IDM 捕获 MP3 文件？

> ID：11158657
> 
> 赞同：2
> 
> 时间：2012-06-22T14:52:24.420
> 
> 标签：php, .htaccess, flash

我使用以下代码在我的网站中添加音乐播放器，

```
<div id="player" style="z-index:100;"></div><!--Player-->

<script language="javascript" type="text/javascript">

var so = new SWFObject("flashmp3player.swf", "player", "242", "150", "9"); // Location of swf file. You can change player width and height here (using pixels or percents).
so.addParam("quality", "high");
so.addParam("wmode", "opaque");
so.addVariable("content_path","<? echo $playerpath; ?>");
so.addVariable("color_path","default.xml");
so.addVariable("script_path","flashmp3player.php");
so.write("player");

</script> 
```

播放器将播放文件夹`$playerpath`（例如：父文件夹/子文件夹）中的 MP3 文件。但我不希望访问者下载 MP3 文件。但是，在系统中安装了 Internet 下载管理器的用户在每首歌曲播放时都会在左下角看到一个图标。每当他们单击该图标时，歌曲就会被下载。如何防止这种情况？

![参考下图](../Images/8d970aac65b8cae74ce0454e665749fc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:01:28.800

这是您将裸 MP3 文件发送到客户端这一事实所固有的。试图阻止这种情况，就像试图阻止人们通过阻止他们右键单击页面的能力来窃取您的图像一样。这个“Internet 下载管理器”很可能会看到从浏览器发出的 MP3 文件请求，如下所示：

```
GET /my_aweseome_file.mp3 HTTP/1.1 
```

此时，它会说，“嘿，用户的浏览器正在加载 MP3，让我们下载吧”。因此，如果您想防止这种情况发生，请不要让客户端请求 MP3 文件。如果您只想播放它们，您可以将它们存储在 Flash 文件或其他文件中，或者甚至从[Icecast服务器流式传输它们。](http://www.icecast.org/)但请记住，在某些时候，必须*听到*音频，就像必须*看到*前面提到的图像一样，并且在某些时候能够捕获该音频或该图像以进行存储。

# javascript - 在执行函数之前让javascript等待几秒钟

> ID：11158662
> 
> 赞同：0
> 
> 时间：2012-06-22T14:52:42.237
> 
> 标签：javascript, jquery, html, ajax

```
<script type="text/javascript">
    var timeout;
    function doAjaxFunc(){
        alert("called");
        $.ajax({
                type: "POST",
                url: "searchSuggest.php",
                data: dataString,
                cache: false,
                success: function(data){$("#display").html(data).show();}});
    }
    $(document).ready(function(){
        $(".search").keyup(function() 
        {
            var searchbox = $(this).val();
            var dataString = 'searchword='+ searchbox;
            if(searchbox=='')
            {
                $("#display").hide();
            }
            else
            {
                if(timeout) {
                    clearTimeout(timeout);
                    timeout = null;
                }

              timeout= setTimeout(doAjaxFunc(), 5000);
            }
            return false;
        });
    });
    </script> 
```

使用这个，我认为 javascript 应该`doAjaxFunc()`在键入五秒键后调用函数。但它不是等待那段时间。我应该怎么做才能让它在执行 doAjaxFunc() 之前等待 5 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:54:46.043

您正在`doAjaxFunc`调用并将其返回值设置为五秒后要调用的函数。

删除`()`: `timeout= setTimeout(doAjaxFunc, 5000)`，这一切都会神奇地起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:56:36.213

试试这个：

```
timeout = setTimeout(function() {
    doAjaxFunc();
}, 5000); 
```

或这个：

```
timeout = setTimeout(doAjaxFunc, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:57:16.513

```
try this......

    $(".search").keyup(function () {
        var searchbox = $(this).val();
        var dataString = 'searchword=' + searchbox;
        if (searchbox == '') {
            $("#display").hide();
        }
        else {
            doAjaxFunc();
        }
        return false;
    });

function doAjaxFunc(){
        alert("called");
    $.ajax({
        type: "POST",
        url: "searchSuggest.php",
        data: dataString,
        cache: false,
        success: function (data) {

            $("#display").html(data.d).show();
        } ,
        beforeSend: function () {
            $("img").fadeIn(1200, function () 
                            {
                                $("div").append(" | beforeSend finished | ");
                            });
                        }

    });
}; 
```

# facebook-graph-api - FACEBOOK:: 从公共粉丝页面读取图片

> ID：11158663
> 
> 赞同：0
> 
> 时间：2012-06-22T14:52:43.167
> 
> 标签：facebook-graph-api

我需要从 FB 粉丝页面中提取图像。我能够阅读页面帖子，然后逐个检查它是否真的是照片，然后尝试打开与照片相关的object_id。最后一点给我错误：它告诉我我需要一个用户令牌。我正在开发一个需要每 10 分钟运行一次并下载新数据的自动化脚本。我不是该页面的管理员。有解决办法吗？谢谢，安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:00:30.267

我没有看到问题 - 让您的用户每 60 天回来一次，为他们获取一个[长期存在的访问令牌](https://developers.facebook.com/roadmap/offline-access-removal/)，存储它，然后使用该令牌来读取页面的`/feed`连接

如果页面没有人口限制，您也可以使用[应用访问令牌](https://developers.facebook.com/docs/authentication/applications/)

# oracle - OCI 无效操作 ORA-01010

> ID：11158667
> 
> 赞同：3
> 
> 时间：2012-06-22T14:52:50.377
> 
> 标签：oracle, jdbc, oracle-call-interface, ucp

我正在运行一个批处理应用程序，它处理大量数据文件并将数据放入 Oracle 11g 数据库中。我正在使用 Java 1.6.20、ojdbc6 和 ucp11.2。间歇性地，我得到 ORA-01010 无效操作 SQLExceptions。当我查找此错误的含义以及为此采取的措施时：

> ORA-01010: 无效的 OCI 操作
> 
> 原因：
> 
> 以下情况之一：1) 您尝试了无效的 OCI 操作。2) 您正在使用与版本 7.1（或更高版本）库链接的 Oracle 客户端应用程序，环境变量 ORA_ENCRYPT_LOGIN 设置为 TRUE，并且您尝试连接到版本 7.0（或更低版本）的 Oracle 服务器。3) 您已连接到版本 7.1（或更高）的 Oracle Server，初始化参数 DBLINK_ENCRYPT_LOGIN 设置为 TRUE，并且您试图使用指向版本 7.0（或更低）的 Oracle Server 的数据库链接。4) 您已连接到版本 9.0.2（或更高）的 Oracle Server，并且您尝试使用指向版本 9.0.1（或更低）的 Oracle Server 的数据库链接进行分布式自治事务。
> 
> 行动：
> 
> 针对以上原因： 1) 不要使用无效的OCI操作。2) 如果您不想在分布式数据库中使用加密连接密码，请将 ORA_ENCRYPT_LOGIN 设置为 FALSE。如果您希望使用加密的连接密码，您必须将所有 Oracle 服务器升级到版本 7.1（或更高版本）。3) 如果您不想在分布式数据库中使用加密的数据库链接，请将 DBLINK_ENCRYPT_LOGIN 设置为 FALSE。如果您希望使用加密的数据库链接，您必须将所有 Oracle 服务器升级到版本 7.1（或更高版本）。4) 不要在 9.0.1（或更低）版本的 Oracle Server 上尝试分布式自治事务。

这对我来说毫无意义，因为我使用的是更新的 JDBC 驱动程序和相当最新的 Oracle 版本。如果问题是登录，为什么它会工作大约 90-95% 而不是其他 5-10%？我确保所有的 Oracle 服务器都是 11g。我还提供了 ORA-01010 信息，以便任何试图回答这个问题的人都可以避免这样做，因为他们认为他们找到了答案。除非你能解释这个看似神秘的信息，它似乎与我的问题没有太大关系，否则不要打扰。

根据以下评论更新：

这是确切的错误：

```
Exception in thread "main" org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [select sum(FREQ) from CONTRIBUTOR_DETL where EXTRACT(MONTH FROM DOS) BETWEEN 6 and 8 and CONTRIBUTOR_HDR_ID = ? and ERROR_FOUND = 'N']; SQL state [72000]; error code [1010]; ORA-01010: invalid OCI operation
; nested exception is java.sql.SQLException: ORA-01010: invalid OCI operation

        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:602)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:636)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:665)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:673)
        at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:728)
        at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:744)
        at org.springframework.jdbc.core.JdbcTemplate.queryForInt(JdbcTemplate.java:775)
        at org.ddpa.dsc.dao.impl.DscSummaryDaoImpl.getAcceptedOccurrencesBySummerQuarter(DscSummaryDaoImpl.java:176)
        at org.ddpa.dsc.reports.DscSummaryReport.getSummaryReport(DscSummaryReport.java:132)
        at org.ddpa.dsc.pre.DscPreprocessor.preprocessFile(DscPreprocessor.java:195)
        at org.ddpa.dsc.Main.main(Main.java:33)
Caused by: java.sql.SQLException: ORA-01010: invalid OCI operation

        at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
        at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:206)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
        at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1034)
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:194)
        at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:791)
        at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:866)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1186)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3387)
        at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3431)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1491)
        at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at oracle.ucp.jdbc.proxy.PreparedStatementProxyFactory.invoke(PreparedStatementProxyFactory.java:110)
        at $Proxy3.executeQuery(Unknown Source)
        at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:643)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T02:40:25.323

当我尝试访问/写入某些 clob 列时，我曾经看到此错误。我相信这是oracle本身的错误，不会一直发生。我们升级到 12 后，这个问题就消失了。

但至少您应该能够捕获异常并确定是哪个 sql 语句导致了问题。

# shell - Shell Script Unix 将文件复制到具有相同结构的文件夹中

> ID：11158669
> 
> 赞同：1
> 
> 时间：2012-06-22T14:52:58.283
> 
> 标签：shell, unix, directory, copy

这是我的场景：我的桌面上有一个名为 eclipseProject 的文件夹中的 Eclipse 项目。现在，我的桌面上有另一个名为 Prod 的文件夹，这个文件夹有一个目录结构，用于存放 eclipseProject 中也存在的一些文件。

我想要做的是将 Prod 中的文件复制到 eclipseProject 文件夹但它们必须复制到相同的目录结构但不影响可能位于同一文件夹中的其他文件，即

eclipse项目文件夹

-文件
夹1 -
子文件夹1 -文件1 -文件2 -子
文件夹2 -
文件
3
...

产品文件夹

-文件
夹1 -子文件
夹 1 -文件1

如何将所有 Prod 目录结构复制到 eclipseProject 但不影响 file2 和 file3，因此只有 file1 被替换。

希望我已经说清楚了。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:00:22.000

使用带有选项的gnu`cp`命令。`--parents`

或者使用 rsync 作为：

```
rsync -avz source-dir/ target-dir/ 
```

# jquery - 从数组中获取对象

> ID：11158672
> 
> 赞同：0
> 
> 时间：2012-06-22T14:53:00.813
> 
> 标签：jquery

我可能做得很糟糕，但我是新手！如果我有一个包含这样的对象的数组

```
var company = [H7 = {companyName:"company1"},F4 = {companyName:"company2"}] 
```

如果我得到一个字符串的引用说“F4”有什么办法可以去吗

```
myCompName = company "F4" companyName and get the result "company2" 
```

我试图像这样使用 inArray

```
myStand = $.inArray("F4", companyObjects)
myCompName = companyObjects[myStand].companyName 
```

但这还行不通

```
myStand = $.inArray(F4, companyObjects)
myCompName = companyObjects[myStand].companyName 
```

确实有效。我的阵列设置错误还是有办法做到这一点？谢谢亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:59:54.153

数组由数字索引，您对此行的实际操作是什么

```
var company = [H7 = {companyName:"company1"},F4 = {companyName:"company2"}] 
```

这是：

```
H7 = {companyName:"company1"}
F4 = {companyName:"company2"}
var company = [H7,F4] 
```

如果你想访问 H7 和 F4 你需要创建另一个对象：

```
var company = {H7: {companyName:"company1"},F4: {companyName:"company2"}}; 
```

然后你可以这样做：

```
$.each(company, function(i, comp) {
   var myCompName = 'company "' + i + '" companyName and get the result "'+
        comp['companyName'] + '"';
}); 
```

或者

```
company['H7']['companyName'] 
```

或者

```
company.H7.companyName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:01:26.943

试试这种方式怎么样，[http://jsfiddle.net/CBxMt/](http://jsfiddle.net/CBxMt/)？

基本上，公司变量是一个保存公司数据的对象。您仍然可以像数组一样使用 [] 表示法访问元素。

# node.js - Python Flask 与 node.js

> ID：11158686
> 
> 赞同：5
> 
> 时间：2012-06-22T14:53:22.763
> 
> 标签：node.js, flask

我有一个 Python Flask 应用程序，我即将开始实现 websockets，我不想在 node.js 中完成这一切，有几个原因；

Node.js 使用更少的开销，我喜欢将更繁重的逻辑与更多流量密集的部分分开的想法。

node.js 似乎对 websockets 有更好的支持并且更加成熟。

如果需要性能，我稍后可能会将 node.js 移动到单独的服务器。

我的问题是，在我的 Flask 应用程序和 Node.js 之间建立通信的最佳实践是什么？像这样设置它是一个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:17:06.587

除非您有充分的理由同时使用两者，并且您已经通过一些基准测试验证了两者都使用是必要的，否则我不会这样做。它增加了很多复杂性（代码重复，不同的库在不同的语言中以不同的方式工作，等等）以获得可疑的好处。

WebSocket 是 Fl​​ask 中的一个问题，但是[您可以使用 Juggernaut 轻松处理它](http://flask.pocoo.org/snippets/80/)。

# escaping - 如何替换给定字符串中的任何转义字符（例如垂直制表符）

> ID：11158695
> 
> 赞同：2
> 
> 时间：2012-06-22T14:53:49.827
> 
> 标签：escaping, common-lisp

我必须处理某些可能包含转义字符的文件，例如vertical-tab（又名“^k”），这确实与REPL（SBCL）和一些库（例如[cxml-stp](http://www.lichteblau.com/cxml-stp/)）混淆。

是否有涵盖 CL 中这些字符的参考，我该如何过滤它们？我刚刚找到了一些[emacs-lisp 参考资料](http://ftp.gnu.org/old-gnu/Manuals/elisp-manual-21-2.8/html_node/elisp_22.html)，但据我所知，这些资料肯定对普通 lisp 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:59:00.840

```
(defun sanitize (string)
  (remove-if
   #'(lambda (x)
       (and (< x 32)
            (not (or (= x 13) (= x 10)))))
   string))

(with-output-to-string (s)
    (let ((sanitized 
          (sanitize
           (do ((a (make-array 100 :element-type '(unsigned-byte 8)))
                (i 0 (1+ i)))
               (nil)
             (when (= i (length a))
               (return a))
             (setf (aref a i) (random 64))))))
      (dotimes (i (length sanitized))
        (princ (code-char (aref sanitized i)) s)))) 
```

但这可能取决于您的来源/您想要包含哪些字符。这适用于 ASCII - 如果您保证它们采用 (mod 128) 格式。Unicode 是一个复杂得多的问题。但是，这仍然会过滤掉可能在 shell 脚本中具有特殊含义的字符，但这对于以 UTF-8 等格式构建 Unicode 字符串不是一个好主意，因为如果您的源以字节形式出现，您将需要解析它并确保它们形成有效的 UTF-whatever 格式。您还需要注意 Unicode 中可能的替代（冗余）表示，由变音符号与字母组合形成的对。代码点范围内的空白区域等等......

说实话，我还没有见过 100% 符合 Unicode 实现的 Lisp。它比听起来更难，而且你可能只需要它的一个子集。

*如果您想要实际案例，而这对 Unicode 字符串来说不是一个好主意 - 谷歌搜索“目录攻击”和 IIS5 漏洞。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:22:14.737

具有合适测试功能的 REMOVE-IF 应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:42:02.493

正如您所注意到的，使用 REMOVE-IF 的问题在于，您正在寻找的角色没有一个很好的句柄。在 Hyperspec 中搜索“半标准字符”，您会看到命名空白字符列表非常短—— `#\Newline, #\Space, #\Tab, #\Return, #\Page, #\Rubout, #\Backspace`。

如果您使用 Emacs 作为您的编辑器，那么找到目标值、剪切它并将其作为文字粘贴到您的代码中并不难——但这也不是一个好主意。另一方面，如果你能找到字符并将其粘贴到你的 REPL 中，那么你应该能够找到一种调用`(char-name)`它的方法，ala: `(char-name (aref "<copy-paste-char>" 0))`。

I'd do something like what wvxvw is doing, except more exploratory. Write code to walk over your file, collect all characters in use, print their codes and their names. (Don't just print every one; count the number of occurrences using a hashtable, i.e. `(incf (gethash <char> ht 0))`, so that you can get a sense for how frequently things occur, and you're not overwhelmed with output.) Then you can make a more informed decision on how to identify & eliminate characters you don't want in your file.

# sql - 获取从前一天开始的最近 14 天（2 周）的日期表

> ID：11158701
> 
> 赞同：1
> 
> 时间：2012-06-22T14:54:06.417
> 
> 标签：sql, sql-server, tsql

我想写一个查询，它给出从昨天开始的最后 14 天的 DATES 列。

例子：

```
Dates 

2012-06-21
2012-06-20
2012-06-19
--
- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:56:41.877

```
;WITH n(n) AS 
(
  SELECT TOP (14) ROW_NUMBER() OVER (ORDER BY [object_id]) 
  FROM sys.objects ORDER BY [object_id]
)
SELECT Dates = DATEADD(DAY, -n, DATEDIFF(DAY, 0, GETDATE())) FROM n
ORDER BY n; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:01:27.863

其他方式;

```
;with days(day) as
(
    select getdate() - 1 as day
        union all
    select day - 1
        from days
        where day > dateadd(day, -14, getdate())
)
select cast(day as date) from days 
```

# javascript - JQuery 更新表格单元格并添加新表格行

> ID：11158703
> 
> 赞同：1
> 
> 时间：2012-06-22T14:54:09.040
> 
> 标签：javascript, jquery

一个新手问题，真的。

假设我有一个这样的 html 表：

```
<div id="div1">
           <table id="table1" border="1">
             <tr>
                 <th bgcolor="#eee"><strong>ID</strong></th>
                 <th bgcolor="#eee"><strong>Price</strong></th>
            </tr>
             <tr>
                <td id='id1'>1111</td>
                <td id='id2'>2222</td>
             </tr>

         </table>
</div> 
```

现在我正在使用 Jquery 从服务器获取 json 格式的数据，如下所示：

```
id1,19.99
id2,29.99
id3,39.00 
```

我想要实现的是：查看数据，如果表中已经存在id，则更新单元格值。如果表中不存在 id，则添加一个新行。我如何在 JQuery 中做到这一点？我刚开始学习JQuery。现在我可以使用 ajax 调用来获取数据，但不知道如何更新表。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:02:08.527

要查看一个单元格是否存在，您必须测试[`.length`](http://api.jquery.com/length)它的选择器：

```
$('#'+str).length; // zero if there is no such ID 
```

或者您可以使用 更新该单元格的内容，[`.text()`](http://api.jquery.com/text)如果 ID 不存在，这将失败：

```
$('#'+str).text(newvalue); 
```

要创建一个新行，您可以[`.append()`](http://api.jquery.com/append)将其添加到表中：

```
$('table tr#id_of_row').append('<td id="'+str+'">'+newvalue+'</td>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:01:20.737

您可以像这样通过 id 获取单元格

```
$('#'+id).length //length will be 0 if not found or 1 if found 
```

使用更新值

```
$('#'+id).text(new_value); 
```

# javascript - FullCalendar 删除外部事件

> ID：11158706
> 
> 赞同：0
> 
> 时间：2012-06-22T14:54:21.753
> 
> 标签：javascript, fullcalendar

当我试图从我的日历中删除一个外部事件时，如果我添加说 3 个外部事件然后将一个拖到垃圾箱，而不是只删除一个事件，它会删除所有事件（即使是我正在做的单独提要中的事件） .

知道为什么会这样以及如何解决吗？这是代码：

```
$(document).ready(function () {
    //listens for drop event
    $("#calendarTrash").droppable({
        tolerance: 'pointer',
        drop: function (event, ui) {
            var answer = confirm("Delete Event?")
            if (answer) {
                $('#calendar').fullCalendar('removeEvents', event.id);
            }
        }
    });

    /* initialize the external events  ------------*/
    $('#external-events div.external-event').each(function () {
        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);
        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:33:34.723

`event.id`您的函数中的`drop`不引用 FullCalendar 事件。它指的是刚刚触发的 drop 事件。

您将需要使用`ui.draggable`来访问您的可拖动对象 - 在本例中为 FullCalendar 事件。

希望这可以帮助！很酷的概念顺便说一句！

***更新***：检查这个[小提琴](http://jsfiddle.net/100thGear/S7Xv4/)的概念证明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:01:04.723

对于任何处于相同情况的人，..

```
 eventDragStop: function(event, jsEvent, ui, view) {

                 if (x) {
                    $('#calendar').fullCalendar('removeEvents', event._id);
                      } 
```

请注意我正在使用 event._id，x 是检查项目被拖动到哪个 div 中的结果，返回 true 或 false。检查事件被放入哪个 div。我还必须更改 fullcalendar.js 中的一些代码，函数 eachEventElement，导致我上面的代码出现问题，所以我也更改了它。

```
 function eachEventElement(event, exceptElement, funcName) {
    try{
        var elements = eventElementsByID[event._id],
            i, len = elements.length;
        for (i=0; i<len; i++) {
            if (!exceptElement || elements[i][0] != exceptElement[0]) {
                elements[i][funcName]();
            }
        }
    }
    catch(err)
    {}
} 
```

# android - Android 应用与旁载 Google Play 的设备不兼容

> ID：11158710
> 
> 赞同：14
> 
> 时间：2012-06-22T14:54:31.050
> 
> 标签：android, google-play, cts, sideloading

我有一个已部署到 Play 的应用程序，并且与运行 2.1 或更高版本的任何设备兼容；AndroidManifest.xml 中没有定义特殊限制或要求。

用户曾多次抱怨尝试通过 Google Play 安装该应用程序，但收到不兼容的消息。在所有这些情况下，侧载应用程序都能完美运行。

更深入地研究这个问题，似乎在所有情况下，报告问题的人都在使用未安装 Google Play 的设备。IE。该设备可能无法通过 Google 的 CTS。

话虽如此，他们可以通过 Google Play 安装其他应用程序，但不能安装我们的应用程序。同样，将我们的应用程序侧载到这些设备上也可以正常工作。有人知道为什么会这样吗？我认为这一定是我在 AndroidManifest.xml 中做错了，但我没有发现任何可疑之处。

编辑：这是 AndroidManifest.xml，为了保护无辜者的名字而进行了修改：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.foo.bar"
      android:versionCode="1"
      android:versionName="@string/global_app_version">
    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <application android:label="@string/global_app_short_name" android:icon="@drawable/app">
        <activity android:name=".HomeActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <activity android:name=".AActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <activity android:name=".BActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <activity android:name=".CActivity"
                  android:launchMode="singleTask"
                  android:theme="@android:style/Theme.Black.NoTitleBar"
                  android:windowSoftInputMode="stateHidden">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <activity android:name=".DActivity"
                  android:launchMode="singleTask"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <activity android:name=".EActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <activity android:name=".FActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
            </intent-filter>
        </activity>

        <!-- This activity is invoked whenever an xxx is opened -->
        <activity android:name=".GActivity"
                  android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter android:label="@string/global_app_short_name">
                <action android:name="android.intent.action.VIEW"/>
                <action android:name="android.intent.action.EDIT"/>
                <category android:name="android.intent.category.DEFAULT"/>
                <category android:name="android.intent.category.BROWSABLE"/>
                <data android:mimeType="application/xxx"/>
                <data android:mimeType="application/yyy"/>
                <data android:mimeType="application/zzz"/>
                <data android:mimeType="application/aaa"/>
                <data android:mimeType="application/bbb"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T17:05:11.693

我找到了罪魁祸首 - 复制保护已启用。来自 Google 关于设置的说明：http: [//developer.android.com/guide/google/play/filters.html](http://developer.android.com/guide/google/play/filters.html)

> 要复制保护应用程序，请在为应用程序配置发布选项时将复制保护设置为“开”。Google Play 不会在开发者设备或未发布的设备上显示受版权保护的应用程序。

换句话说，必须侧载 Google Play 只是成为“未发布设备”/无法通过 Google CTS 的设备的副作用。无论如何，禁用复制保护解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:04:47.940

也许他们正在运行的硬件与您的应用程序不兼容？也许您需要触摸屏而他们没有；也许您需要电话而他们没有？

请注意，根据您的目标 api，您可能会得到一些隐含的硬件要求。

无论如何，尝试从他们那里获取日志将是最有帮助的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T07:36:58.513

也许受影响的用户可以尝试在他们的设备上重置 Google Play Store 应用：

菜单 --> 设置 --> 应用程序 --> Google Play 商店

然后点击“强制关闭”和“清除数据”

然后再次启动 Google Play 商店，登录并再次尝试安装您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:41:40.177

如果您有任何应用内产品，或者如果您正在出售应用程序以赚钱，那么 Google Play 会自动将您从它不支持计费的某些国家/地区中过滤出来。[您可以在此处](https://support.google.com/googleplay/android-developer/bin/request.py?contact_type=publishing)向 Google 发送电子邮件询问。

# forms - 使用 freemarker 预选选择字段

> ID：11158713
> 
> 赞同：2
> 
> 时间：2012-06-22T14:54:35.630
> 
> 标签：forms, struts2, freemarker

在我准备 ftl 页面的 struts2 操作中

```
private static List<Product> listOfProducts; 
```

与吸气剂和二传手。此列表充满了产品。列表中的第一个产品类型为 B。

在 ftl 页面中，我正在迭代产品列表

```
<#list listOfProducts as product>
<select name = product[0].type>
  <option value="A">fistType</option>
  <option value="B">secondType</option>
  <option value="C">thirdType</option>
</select>
</#list> 
```

问题是每次都会预先选择 firstType，即使在列表中我有 B 型产品。

你能告诉我我在这里想念什么吗？为什么加载 ftl 时没有选择选项 B？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:50:08.177

有关选择的正确语法，请参见[http://www.w3schools.com/tags/tag_select.asp](http://www.w3schools.com/tags/tag_select.asp)

属性“name”设置控件的名称 - 它不影响选择

请参阅[如何设置 HTML <select> 元素的默认值？](https://stackoverflow.com/questions/3518002/how-to-set-default-value-for-html-select-element) 关于如何做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T19:40:19.577

使用 Struts 选择标签。

```
<@s.select theme="simple" name="selectedProduct" list="listOfProducts" listKey="productId" listValue="productName" value="defaultProduct"/> 
```

请通过以下链接中的示例以获得更多理解。

[http://www.mkyong.com/struts2/struts-2-sselect-drop-down-box-example/](http://www.mkyong.com/struts2/struts-2-sselect-drop-down-box-example/)

# javascript - 来自 javascript 的 JSON 对象

> ID：11158714
> 
> 赞同：-3
> 
> 时间：2012-06-22T14:54:35.833
> 
> 标签：javascript, html, json

我正在尝试调用返回 json 对象的 api

```
 { "category" : [ { "id" : 5,
    "name" : "Bollywood"
  },
  { "id" : 484,
    "name" : "International"
  },
  { "id" : 15,
    "name" : "Devotional"
  }
 ]} 
```

1.  如何从我的 html 页面 javascript 中拨打电话。

请注意：我不能使用 jquery，需要简单的 javascript..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:00:46.087

1.  如何从我的 html 页面 javascript 中进行调用...嗯...这是什么 API？如果它是 javascript ......你为什么不直接调用这个函数......

2.  你为什么不使用javascript`document.createElement("select")`和`getAttribute()`https://developer.mozilla.org/en/DOM/document.createElement `setAttribute()` [http://www.w3schools.com/jsref/met_element_getattribute.asp](https://developer.mozilla.org/en/DOM/document.createElement)

或者，您可以使用 javascript 作为字符串和一组`.innerHTML`元素（如 div）创建代码

1.  `setAttribute('onchange', "some_function_name")`使用上述或其他内容附加事件处理程序

我没有给你一个很详细的答复，因为你没有给出一个很好的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:59:30.797

您需要创建一个 xmlhttprequest，然后您必须解析 json 字符串，使其成为一个 javascript 对象。

Douglas Crockford 的 JSON-js 可以为你解析 json 字符串[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

您将需要在您的下拉列表中设置一个 onChange 事件监听器。

您应该查看 .on 函数的 jquery 源代码，它应该让您了解如何在动态添加 DOM 元素时响应事件。

# actionscript-3 - 使用 alphamap RAM 使用问题生成透明 JPEG

> ID：11158716
> 
> 赞同：1
> 
> 时间：2012-06-22T14:54:42.547
> 
> 标签：actionscript-3, flash, bitmap, bitmapdata

我用两个 jpeg 在 flash 中生成一个透明位图。一张是黑白的，用于读取 BitmapDataChannel，另一张图片是实际图像。

这是我的代码：

```
private var sourceBitmap:BitmapData;
private var alphaBitmap:BitmapData;
private var outputBitmap:BitmapData;
private var bitmap:Bitmap;

//Updated Code:
private var sourceByteArray:ByteArray = new ByteArray(), outputByteArray:ByteArray = new ByteArray(), alphaByteArray:ByteArray = new ByteArray();
private var jpegencoderoptions = new JPEGEncoderOptions(0);

//get image from library
this.sourceBitmap = new imageFromLibrary();
//Updated: encode sourceBitmap
this.sourceBitmap.encode(this.sourceBitmap.rect, jpegencoderoptions, this.sourceByteArray);
//create new bitmapData with dimensions of sourcimage.      
this.outputBitmap = new BitmapData(this.sourceBitmap.width, this.sourceBitmap.height, true, 0x00000000);
//Updated: encode outputBitmap
this.outputBitmap.encode(this.outputBitmap.rect, jpegencoderoptions, this.outputByteArray);

this.outputBitmap.lock();

//copy the pixels from source to output
this.outputBitmap.copyPixels(this.sourceBitmap, this.sourceBitmap.rect, new Point());
//free memory and dispose source
this.sourceBitmap.dispose();
//Updated: clear sourceByteArray
this.sourceByteArray.clear();

//get alphamap from library         
this.alphaBitmap = new alphamapFromLibrary();
//Updated: encode alphaBitmap 
this.alphaBitmap.encode(this.alphaBitmap.rect, jpegencoderoptions, this.alphaByteArray);

//copy the channel from alpha to output
this.outputBitmap.copyChannel(this.alphaBitmap, this.alphaBitmap.rect, new Point(), BitmapDataChannel.RED, BitmapDataChannel.ALPHA);

//free memory and dispose alpha
this.alphaBitmap.dispose();
//Updated: clear alphaByteArray
this.alphaByteArray.clear();

this.bitmap = new Bitmap(this.outputBitmap); 
```

该代码效果很好，它为我生成了一个透明图像。但我现在的问题是沉重的 RAM 负载。在较旧的智能手机上，它超过了 RAM，游戏正在自行关闭。

主要问题是：我加载了 sourceBitmap，这需要 RAM，然后我生成新的 BitmapData“outputBitmap”。有了这个，我在 RAM 中有 2 倍的 BitmapData 具有相同的尺寸。

我现在的问题是：我可以跳过一些步骤并加载我的 sourceBitmap、将透明设置为 true 并将通道复制到此源而不是加载源、创建输出等等吗？

**编辑：**

我现在更新了我的代码，`BitmapData.encode()`将我的 BitmapDatas 编码为 JPEG。但内存使用情况并不总是发生变化。有时编码后内存使用量增加，有时减少，有时没有变化。

# django - Django 模型字段顺序

> ID：11158717
> 
> 赞同：6
> 
> 时间：2012-06-22T14:54:45.230
> 
> 标签：django, django-models

如何访问模型字段的有序列表？因为`model_instance._meta.fields`返回没有 m2m 的字段，但在管理员视图中，字段顺序与它们在类中定义的顺序完全相同。（如管理网站上的编辑表格）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:10:47.713

尝试

```
sorted(model_instance._meta.fields + model_instance._meta.many_to_many,
       key=lambda x:x.creation_counter) 
```

如果 M2M 字段是在普通字段之后定义的，则可以`fields + many_to_many`直接使用，因为它们都已在声明顺序中。

*更新*

如果您更喜欢使用`operator.attrgetter()`而不是`lambda`，没关系，性能差异是微不足道的。但`attrgetter`不保证更快：

```
In[1]: from django.contrib.auth.models import User
In[2]: fields = User._meta.fields + User._meta.many_to_many
In[3]: %timeit sorted(fields, key=lambda x:x.creation_counter)
100000 loops, best of 3: 6.47 us per loop

In[4]: from operator import attrgetter
In[5]: %timeit sorted(fields, key=attrgetter('creation_counter'))
100000 loops, best of 3: 9.17 us per loop

In[6]: ag=attrgetter('creation_counter')
In[7]: %timeit sorted(fields, key=ag)
100000 loops, best of 3: 8.68 us per loop 
```

# c# - 检查 MDIcontainer 是否为空

> ID：11158719
> 
> 赞同：0
> 
> 时间：2012-06-22T14:54:58.080
> 
> 标签：c#, winforms

我只是陷入了一个非常简单的情况，无法帮助自己。我的问题是如何检查我的 mdiparent 是否包含子表单？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:00:00.670

您可以使用父窗体的[ActiveMdiChild](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activemdichild.aspx)属性。

`null`如果父窗体不包含任何 MDI 子窗体，则会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:05:29.297

对于您的问题的标题：

```
int formCount = this.MdiChildren.Count(); \\ or .Length
MessageBox.Show("I have " + formCount.ToString() + " child forms open."); 
```

对于您问题的另一部分：

```
Form2 f2 = new Form2();
f2.MdiParent = this;
f2.Show();

if (this.MdiChildren.Contains(f2))
  MessageBox.Show("Form2 f2 is opened"); 
```

# android - Android(<=2.2) 大文件下载使用 android market apk 扩展下载器库

> ID：11158725
> 
> 赞同：1
> 
> 时间：2012-06-22T14:55:00.643
> 
> 标签：android, download, android-2.2-froyo

有没有人尝试使用市场 apk 扩展下载器库（作为附加组件提供）在 android <= 2.2 上下载大文件？源代码有点难以理解，我无法弄清楚它通常如何用于下载任何大文件。是否有任何替代方法可以在较低的 android 设备上下载大文件（除了编写我自己的 DownloadService 之外，如果已经有可用的东西我不喜欢这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:31:03.227

我没有尝试使用它，但文档确实声明扩展下载器库与 API 级别 4 兼容，取自文档：

> 注意：默认情况下，Downloader Library 需要 API 级别 4，但 APK 扩展 Zip 库需要 API 级别 5。

我完全同意源代码很难理解，但是它的设计方式是对网络问题具有容错性。

我认为你可以拿样本然后滚动，但是我发现它很难测试。

我们最终选择了我们自己的（使用任意服务器）来托管下载。

我不相信有任何替代品，但是下载器库确实有一些宝石。例如，扩展 Zip 库可以独立于下载器库使用，是直接从 zip 读取内容的好方法。

唯一的挑战是编写自己的下载器服务并执行 CRC 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:38:55.147

看起来像 API 4 或 >

扩展 API 用于您的应用程序的“永久”文件扩展名，他们不希望您移动它们或删除它们，甚至解压缩它们等。但是在适当的位置使用它们，目前尚不清楚如果您这样做会发生什么，但我怀疑很多奇怪的副作用。

您也无法直接控制何时下载此文件，它必须在市场中关联，然后它会自动发生，除非由于某种原因它“失败”，在这种情况下，当您的应用程序启动时，您应该启动该过程手动然后你需要使用下载库，否则它就像我 3 岁的孩子所说的那样是自动的。

从您的帖子中，您可能正在寻找一种方法来获取大文件（多个）并使用它们做您想做的事情，如果是这样，这不是一个好方法，因为每次您通过市场添加新文件时会告诉您的用户您有一个更新的版本并覆盖旧文件（尽管您可以使用补丁扩展名来避免这种情况，如果您正在更新原始版本但只会将其向后移动一步）

所有这些都是[扩展文件的用途以及如何使用它们](http://developer.android.com/guide/google/play/expansion-files.html#Downloading)

如果您只是想要一种使用您自己的服务器获取大文件的方法，请查看支持包，特别是加载器和加载器管理器。他们还说他们正在为扩展库下载器和 zip 文件管理器提供源代码，但我还没有费心去检查。

# html - 下拉菜单透明度不起作用

> ID：11158727
> 
> 赞同：3
> 
> 时间：2012-06-22T14:55:04.717
> 
> 标签：html, css, drupal, drupal-7

我正在使用 drupal 7 的高级响应主题，我似乎无法使下拉透明度工作。我已经使用了两种使项目透明的方法，但都没有奏效。

第一个 -

```
#main-menu li li a,
#main-menu li li a:link,
#main-menu li li a:visited {
    background-color: none;
    background: rgb(0, 16, 38);
    background: rgba(0, 16, 38, 0.75);
    border-top-width: 0;
    color: #fff;
    font-size: 14px;
    padding: 10px 10px;
    text-transform: none;
    width: 85px;
    font-weight: 400;
} 
```

2nd - 在Photoshop中制作透明图像

```
#main-menu li li a,
#main-menu li li a:link,
#main-menu li li a:visited {
    background-color: none;
    background-image: url('images/transparent.png');
    background-repeat: repeat;
    border-top-width: 0;
    color: #fff;
    font-size: 14px;
    padding: 10px 10px;
    text-transform: none;
    width: 85px;
    font-weight: 400;
} 
```

出于某种原因，我无法通过我的 css 删除背景颜色，即使背景设置为无（是的，我已经尝试完全删除它，使用！important 和透明）。

我认为部分问题是实际的基本主题不会让您的子菜单背景颜色等于无，但我已经搜索了 php，但找不到任何可以声明的内容背景以获取默认颜色。有什么想法吗？

这是一个截图 ![菜单透明度截图](../Images/3c007423556aa79f09e41b916a76c0bb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:52:26.407

在 Chrome 的检查器中，我添加了以下样式：

```
#main-menu li ul li a {
    background: red !important;
    opacity: 0.5;
} 
```

这改变了我的子导航项目。看起来您在选择器中缺少 ul 。尝试将其更改为：

```
#main-menu li ul li a,
#main-menu li ul li a:link,
#main-menu li ul li a:visited {
    background: rgb(0, 16, 38);
    background: rgba(0, 16, 38, 0.75);
    border-top-width: 0;
    color: #fff;
    font-size: 14px;
    padding: 10px 10px;
    text-transform: none;
    width: 85px;
    font-weight: 400;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:30:50.967

为设置**透明**颜色`background-color`：

```
 background-color: transparent; 
```

**[演示](http://jsfiddle.net/didierg/Cr2br/)**

* * *

此属性的有效值为：

*   一种颜色
*   透明
*   继承

[来源](http://reference.sitepoint.com/css/background-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:57:17.810

经过相当长的一段时间（以及你们@spacebeers和didier ghys的大量帮助），我找到了解决方案。

有一个名为 colors.inc 的 php 文件覆盖了网站上的所有颜色。它被隐藏在文件夹中并且标记不正确，这就是我错过它的原因。我真的删除了整个文件，所以它给了我所有颜色的自由范围。然后我使用了上面的 spacebeers 代码，它就像一个魅力。这是新的屏幕截图：

![解决方案](../Images/4898f0a6e7ae1bd122495e5ae341129d.png)

# ruby-on-rails - Rails：对模型强制下订单

> ID：11158728
> 
> 赞同：1
> 
> 时间：2012-06-22T14:55:09.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

为每个空缺职位构建一个包含多个阶段的招聘应用程序。用户创建一个位置，然后在该位置内创建阶段。我希望能够将各个阶段强制按顺序排列，以便可以通过各个阶段处理申请人。

该订单稍后将是可编辑的（通过拖放），但现在我只需要它们默认为订单。

到目前为止，这是我的 phase.rb，底部有 set_sort_order：

```
class Phase < ActiveRecord::Base

  before_create :set_sort_order

  has_many :applicants

  belongs_to :position

  attr_accessible :name, :sort_order, :position_id

  private
  def set_sort_order
    self.sort_order||=self.position.phases.order(:sort_order).last.sort_order + 1
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:31:44.187

使用[`acts_as_list`宝石](https://github.com/swanandp/acts_as_list)：

```
# Gemfile
gem 'acts_as_list'

# phase.rb
class Phase < ActiveRecord::Base
  acts_as_list :scope => :position, :column => :sort_order
  default_scope :order => 'sort_order'
  belongs_to :position
  # ...
end 
```

以上基本上负责设置`sort_order`您的代码所做的事情。然而，我相信它的效率更高一些，因为它直接在 SQL 中做更多的工作。

此外，它添加了一系列方便的方法来在列表中移动记录（[查看`acts_as_list`的代码以获取更多信息](https://github.com/swanandp/acts_as_list/blob/master/lib/acts_as_list/active_record/acts/list.rb)），同时保持`sort_order`值的顺序。所以添加到位置的第一个阶段将有`sort_order = 1`，第二个将是 2，依此类推。如果你使用这些方法来移动阶段，它会负责更新`sort_order`所有位置的其他阶段，所以它总是 1, 2, ... *n*。

*编辑：添加了一些解释和`default_scope`一行*

# iphone - UIWebview javascript注入太慢

> ID：11158733
> 
> 赞同：0
> 
> 时间：2012-06-22T14:55:23.323
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwebview

我需要将 javascript 注入到基本链接菜单中，以用不同的颜色标记当前选定的菜单项。使用的代码：

```
 NSString *jsString = [NSString stringWithFormat: @"var allLinks = document.getElementsByTagName('a');for(var i = 0; i < allLinks.length; i++){var link = allLinks[i];if(link.toString().indexOf(\"%@\") != -1){link.setAttribute(\"class\", \"active\"); break;}}", currentURL];

    [self.topNavigationBarWebView stringByEvaluatingJavaScriptFromString: jsString]; 
```

并从 webviewdidfinishloading 中调用。然而，评估这段 javascript 需要很长时间，webview 已经加载了很长时间，但是 js 注入需要额外的 2-3 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:36:43.660

这是投诉还是问题？如果它是一个问题，究竟是什么问题？

如果您想知道除此之外是否还有其他执行 Javascript 的方法，不，没有。

您无法将 stringByEvaluatingJavaScriptFromString 作为内置函数加速。

唯一的选择是 a) 在 dom 加载后执行您的 javascript，而不是等待页面加载以查看它是否看起来更快 b) 评估/更改您的 javascript 以查看它是否是最佳的或可以提高效率，你能去掉for循环吗？

# php - 在 php 中加载 XML

> ID：11158746
> 
> 赞同：0
> 
> 时间：2012-06-22T14:55:57.453
> 
> 标签：php, xml, dom, foreach

我有一个要使用 PHP 导入的 SimpleXMLElement 对象。但它只循环通过 XML 文件中的第一行。我还想用 $item->columm1 显示特定的列，而不是用它的所有值显示整行。

```
$url = 'file.xml';
$sxml = simplexml_load_file($url);

foreach($sxml->Departure->attributes() as $item)
{
    echo $item;
} 
```

编辑：这是输出，请注意我已经用 text1、text2 编辑了原始值。

```
SimpleXMLElement Object ( 
[Departure] => Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [name] => text1 [type] => text2 [stop] => text3 [time] => text4 [date] => text4 [direction] => text5 ) 
```

EDIT2：输出->

```
object(SimpleXMLElement)#4 (2) { ["@attributes"]=> array(6) { ["name"]=> string(6)     "text1" ["type"]=> string(3) "text2" ["stop"]=> string(12) "text3" ["time"]=> string(5) "text4" ["date"]=> string(8) "text5" ["direction"]=> string(10) "text6" } ["JourneyDetailRef"]=> object(SimpleXMLElement)#5 (1) { ["@attributes"]=> array(1) { ["ref"]=> string(125) "text7" } } } 
```

EDIT3：输出->

```
 object(SimpleXMLElement)#7 (1) { [0]=> string(6) "text1" } object(SimpleXMLElement)#8 (1) { [0]=> string(3) "text2" } object(SimpleXMLElement)#7 (1) { [0]=> string(12) "text3" } object(SimpleXMLElement)#8 (1) { [0]=> string(5) "text4" } object(SimpleXMLElement)#7 (1) { [0]=> string(8) "text5" } object(SimpleXMLElement)#8 (1) { [0]=> string(10) "text6" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:01:59.230

$item 已成为对象。当您想要循环播放该项目时，请确保您告诉您要在屏幕上回显该项目的哪一部分。

例如：

```
$url = 'file.xml';
$sxml = simplexml_load_file($url);

//foreach loop
foreach($sxml->Departure as $item){
    //vardump
    var_dump($item);

    //construct next piece of code
    foreach($item->attributes() as $key => $piece){
         echo $key.' = '.$piece;
    }
} 
```

# android - Android 元素高度计算

> ID：11158748
> 
> 赞同：0
> 
> 时间：2012-06-22T14:56:05.013
> 
> 标签：android, android-layout

我有一个包含滚动视图的布局。在滚动视图里面有一个线性布局，里面有更多的布局。问题是滚动变得太长，因为它的第一个孩子的高度。

我测量了（getMeasuredHeight）身高，我不明白为什么第一个孩子这么长。

高度的结果是：

孩子：800

标题布局：100

按钮视图：143

按钮视图页脚：150

showit: 50 (它是直接在孩子内部的一个按钮) inside

这是 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content">
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/firstchild"
 android:orientation="vertical"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="@drawable/page4biz">
 <TextView 
android:id="@+id/tags"
android:layout_width="310dp"
android:layout_height="wrap_content"
android:textColor="#000000"
android:layout_gravity="center_horizontal"
android:gravity="center_horizontal"
android:layout_marginTop="3dp"
android:layout_marginLeft="12dp"
android:textSize="16sp"
android:visibility="gone"
/>
 <RelativeLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="100dp"
  android:id="@+id/headerlayout"
  >
<ImageView
    android:id="@+id/img"
    android:gravity="center_horizontal|center_vertical"
    android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="5dp"/>
 <TextView 
        android:id="@+id/urlTitle"
        android:layout_width="310dp"
        android:layout_height="64dp"
        android:textColor="#000000"
        android:layout_toRightOf="@id/img"
        android:layout_marginTop="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="16dp"
        android:textSize="18sp"
        android:textStyle="bold"
        android:gravity="left|center_vertical"
        />
<TextView 
    android:id="@+id/format"
    android:layout_width="60dp"
    android:layout_height="30dp"
    android:layout_toRightOf="@id/img"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="5dp"
    android:textColor="#000000"
/>
<TextView 
    android:id="@+id/lastdate"
    android:layout_width="150dp"
    android:layout_height="30dp"
    android:layout_marginLeft="10dp"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@id/format"
    android:textColor="#000000"
/>
   </RelativeLayout>
   <LinearLayout android:id="@+id/button_view"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:gravity="center">
              <TextView 
                android:id="@+id/content"
                android:background="@drawable/content"
                android:layout_width="300dp"
                android:layout_height="110dp"
                android:maxLines = "5"
                android:scrollbars = "vertical"
                android:textColor="#000000"
                android:layout_gravity="center"
                android:gravity="center"
                />
              <TextView 
                android:id="@+id/Title"
                android:layout_width="310dp"
                android:layout_height="30dp"
                android:textColor="#000000"
                android:layout_gravity="left"
                android:gravity="left"
                android:layout_marginTop="3dp"
                android:layout_marginLeft="12dp"
                android:textSize="18sp"
                />
              <Button android:background="@drawable/content"
                      android:layout_width="300dp"
                      android:layout_height="50dp"
                      android:layout_weight="1"
                      android:textSize="14sp"
                      android:visibility="gone"/>

              <Button android:background="@drawable/content"
                      android:layout_width="300dp"
                      android:layout_height="50dp"
                      android:layout_weight="1"
                      android:textSize="14sp"
                      android:visibility="gone"/>

              <Button android:background="@drawable/content"
                      android:layout_width="300dp"
                      android:layout_height="50dp"
                      android:layout_weight="1"
                      android:textSize="14sp"
                      android:visibility="gone"/>

              <Button android:background="@drawable/content"
                      android:layout_width="300dp"
                      android:layout_height="50dp"
                      android:layout_weight="1"
                      android:textSize="14sp"
                      android:visibility="gone"/>

                <Button android:background="@drawable/content"
                      android:layout_width="300dp"
                      android:layout_height="50dp"
                      android:layout_weight="1"
                      android:textSize="14sp"
                      android:visibility="gone"/>
    </LinearLayout>
<LinearLayout android:id="@+id/button_view_footer"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:gravity="center">

      <Button android:background="@drawable/content"
              android:layout_width="300dp"
              android:layout_height="50dp"
              android:layout_weight="1"
              android:textSize="14sp"
              android:visibility="gone"/>

      <Button android:background="@drawable/content"
              android:layout_width="300dp"
              android:layout_height="50dp"
              android:layout_weight="1"
              android:textSize="14sp"
              android:visibility="gone"/>

      <Button android:background="@drawable/content"
              android:layout_width="300dp"
              android:layout_height="50dp"
              android:layout_weight="1"
              android:textSize="14sp"
              android:visibility="gone"/>

      <Button android:background="@drawable/content"
              android:layout_width="300dp"
              android:layout_height="50dp"
              android:layout_weight="1"
              android:textSize="14sp"
              android:visibility="gone"/>

      <Button android:id="@+id/s_button"
              android:layout_width="0dip"
              android:layout_height="wrap_content"
              android:layout_weight="1"
              android:textSize="14sp"
              android:drawableLeft="@drawable/shopper_icon"
              android:drawablePadding="4dip"
              android:text="@string/button_google_shopper"
              android:visibility="gone"/>

        </LinearLayout>
      <Button 
              android:background="@drawable/content"
              android:layout_width="300dp"
              android:layout_height="50dp"
              android:textSize="14sp"
              android:id="@+id/showit"
              android:layout_gravity="center"
      />
          </LinearLayout>
          </ScrollView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:19:02.573

您应该使用 match_parent 作为 ScrollView 的高度，并使用 wrap_content 作为 LinearLayout (firstChild) 的高度。

而且，为了更好地衡量，添加`android:fillViewport="true"`到您的 ScrollView。

# java - 如何从 Play 2 Java 上的路由反向生成绝对 URL？

> ID：11158750
> 
> 赞同：16
> 
> 时间：2012-06-22T14:56:10.720
> 
> 标签：java, url, playframework, playframework-2.0

我想从 Play 2 Java 中的控制器获取绝对 URL。我为 Scala 找到了[完全相同的问题](https://stackoverflow.com/questions/10591396/how-to-reverse-generate-a-url-from-a-route-on-play-2)，但我无法让它在 Java 中工作。

```
public class MyController extends Controller {
    public static Result myMethod() {
        return ok();
    }

    public static Result test() {
        Logger.info(routes.MyController.myMethod().url); // Doesn't work !
        Logger.info(routes.MyController.myMethod().absoluteURL()); // Doesn't work !
        Logger.info(routes.MyController.myMethod().absoluteURL(true)); // Doesn't work !
        return ok();
    }
} 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T15:31:52.913

将请求添加到`absoluteURL()`

```
routes.MyController.myMethod().absoluteURL(request()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:06:39.547

我不确定这是否适用于 2.0，但由于您使用的是 Java，它可能会成功。我在 1.2.4 中使用它。

```
Router.getFullUrl("Controller.action") 
```

祝你好运 ！

编辑：我导入 play.mvc.Router 所以如果这在 2.0 中不存在，你可能会发现类似的东西。

另外，这是 play 的 2.0 关于路由的文档，检查反向路由，也许会有所帮助。

[http://www.playframework.org/documentation/2.0.1/JavaRouting](http://www.playframework.org/documentation/2.0.1/JavaRouting)

# java - 一个网站的用户管理系统

> ID：11158754
> 
> 赞同：5
> 
> 时间：2012-06-22T14:56:27.337
> 
> 标签：java, security, login

我目前正在编写一个需要登录才能使用的网站。我以前从来没有这样做过，我正在寻找关于最好方法的建议。

我猜已经有一些开源登录，我可以在我的网站中使用这些登录，我只需要关于使用哪个登录的建议，以及关于在哪里寻找有关如何使用它们的信息的建议。

如果有人对如何去做有任何知识或建议，我将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:41:42.440

您可以查看 Apache Shiro [1]：“Apache Shiro 是一个功能强大且易于使用的 Java 安全框架，它执行身份验证、授权、加密和会话管理”。

对于使用 oAuth 的 Shiro，请参阅线程 [2]。

[1] [http://shiro.apache.org/](http://shiro.apache.org/)

[2] [jersey RESTful & shiro & oAuth 教程](https://stackoverflow.com/questions/5832252/jersey-restful-shiro-oauth-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:05:00.200

servlet 规范解释了标准身份验证的工作原理，每个服务器（tomcat、jetty 等）都提供了各种选项来存储用户及其凭据。

有关如何配置 Tomcat，请参阅[http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html 。](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html)

Spring-security 通常用作替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:01:41.447

IMO 最简单的做法是使用 Java 的 OAuth 实现。OAuth 让您的用户使用来自 Google 等的凭据自动登录

在 Google 上查看：[http ://code.google.com/p/google-oauth-java-client/](http://code.google.com/p/google-oauth-java-client/)

# cuda - CUDA 中的 C++ 位集

> ID：11158762
> 
> 赞同：1
> 
> 时间：2012-06-22T14:56:51.937
> 
> 标签：cuda, gpu, shared, bitset

我有一个广泛使用 bitset 模板的现有 C++ 代码。我正在将此代码移植到 CUDA C，而且我对 CUDA 编程真的很陌生。我可以将 bitset 模板用作“**共享**”变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:17:49.220

据我所知，你根本不能`bitset`在 CUDA 中使用容器，因为它没有设备实现。不过，用常规数组来实现它应该是微不足道的，您可以将数组放在共享内存中。

# sql - SQL 在 where 子句中处理日期

> ID：11158764
> 
> 赞同：0
> 
> 时间：2012-06-22T14:56:53.703
> 
> 标签：sql, inner-join, where

我这里有这个 SQL 代码..

```
SELECT cl.clientid,
       cl.clientname,
       cl.billingdate,
       cp.startdate,
       cp.expiration, 
       (SELECT COUNT(*)
            FROM invoice 
            HERE client = cl.clientid) AS invoicecount  
FROM client cl
INNER JOIN clientplan cp ON cp.client = cl.clientid
WHERE cl.isbilled = 1 AND expiration is NULL AND expiration > '2012-06-22' 
```

我的问题是一个客户可能有 3 个客户计划，它们要么有一个到期日期，要么到期为 NULL。我正在尝试获取未过期或为 NULL 的行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:04:15.953

我不确定，但这不是您想要的：

```
SELECT cl.clientid, cl.clientname, cl.billingdate, cp.startdate, cp.expiration, 
(select count(*) from invoice where client = cl.clientid) as invoicecount  
FROM client cl
inner join clientplan cp on cp.client = cl.clientid
where cl.isbilled = 1 and (expiration is NULL or expiration > '2012-06-22') 
```

用 or 代替 and 到期。因为过期不能为 null 并且 > '2012-06-22'...

# asp.net-mvc - 使用 Helper 方法从模型中加载 DropDownList

> ID：11158768
> 
> 赞同：0
> 
> 时间：2012-06-22T14:57:07.313
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一堆需要填充下拉列表的常用列表。我正在做的不是在这里用列表定义 ViewModel。

```
@Html.DropDownListFor(model => project.TypeID, new SelectList(@PSS.Helpers.ProjectTypes.ProjectTypesList(),"id","name")) 
```

其中 Helper 类定义如下

```
namespace PSS.Helpers
{
    public class ProjectTypes
    {
        public static List<ProjectType> ProjectTypesList()
        {
            MyContext db = new MyContext();
            return db.ProjectTypes.ToList<ProjectType>();

        }
    }
} 
```

这样做有什么问题吗？我违反了任何规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:31:35.103

使用此代码，您可能会比您想要的更多次访问您的数据库。因为每次您点击此帮助程序时，您都在创建一个新的实体框架上下文并点击数据库以获取您的 ProjectTypes 列表。对我来说，这很糟糕。

# php - 将 NULL 分配给 PHP 中的变量：这是做什么的？

> ID：11158772
> 
> 赞同：11
> 
> 时间：2012-06-22T14:57:31.923
> 
> 标签：php, null

在维护代码时，我遇到了循环，在循环结束时，几个变量被设置为`NULL`：`$var = NULL;`. 根据我在手册中的理解，NULL 主要是为了在 PHP 代码中进行比较。由于`NULL`没有类型并且不是字符串或数字，因此输出它没有任何意义。

不幸的是，我无法提供示例，但我认为 NULL 值正在我们的代码中写入文件。我的问题是：`$var`赋值后是否有值，并且回显/写入它会产生输出吗？

**编辑：** *我已阅读 .php 上的 PHP 手册条目* `NULL`。无需在评论或答案中发布此：[http](http://php.net/manual/en/language.types.null.php) : //php.net/manual/en/language.types.null.php，或者因没有 RTM 而自上而下投票给我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:04:26.070

```
[ghoti@pc ~]$ php -r '$i="foo"; print "ONE\n"; var_dump($i); unset($i); print "TWO\n"; var_dump($i); $i=NULL; print "THREE\n"; var_dump($i); print "\n"; if (isset($i)) print "Set.\n"; if (is_null($i)) print "is_null\n";'
ONE
string(3) "foo"
TWO
NULL
THREE
NULL
is_null
[ghoti@pc ~]$ 
```

的结果`isset()`将是布尔值 false，但变量仍被定义。该`isset()`函数最好命名为`isnotnull()`. :-P

请注意，`is_null()`对于从未设置过的值，这也将返回 true。

耶 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:01:02.390

`null`几乎就像 PHP 中的任何其他值一样（实际上，它也是与字符串、int 等不同的数据类型）。

但是，有一个重要区别：`isset($var)`检查 var 是否存在并具有非空值。

如果您打算在分配新值之前再次读取该变量，这`unset()`是错误的做法，但分配`null`完全没问题：

```
php > $a = null;
php > if($a) echo 'x';
php > unset($a);
php > if($a) echo 'x';
Notice: Undefined variable: a in php shell code on line 1
php > 
```

如您所见，`unset()`实际上删除了变量，就像它从未存在一样，而赋值`null`将其设置为特定值（并在必要时创建变量）。

`null`当您想知道是否提供了默认参数时，一个有用的用例是在默认参数中，并且空字符串、零等也是有效的：

```
function foo($bar = null) {
    if($bar === null) { ... }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:01:58.577

PHP 中的 Null 表示没有为变量赋值。

[http://php.net/manual/en/language.types.null.php](http://php.net/manual/en/language.types.null.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:44:04.780

可以将变量设置为`NULL`以指示它不包含值。如果稍后在代码中检查变量是否存在，这是有道理的`NULL`。

变量可能被显式设置为 NULL 以释放它使用的内存。如果变量消耗大量内存，这是有道理的（请参阅[此问题](https://stackoverflow.com/q/584960/87015)）。

干运行代码，您也许能够找出确切的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:04:19.017

似乎基于提供的信息的空实现的目的是清除变量。

您可以通过将其设置为 NULL 或使用函数[unset()](http://php.net/manual/en/function.unset.php)在 PHP 中取消设置变量。

> unset() 销毁指定的变量。
> 
> 函数内部 unset() 的行为可能因您尝试销毁的变量类型而异。
> 
> 如果一个全局变量在函数内部是 unset() ，则只有局部变量被销毁。调用环境中的变量将保留与调用 unset() 之前相同的值。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-10T23:26:38.773

Null 是一种特殊的数据类型，它只能有一个值，即它自己。也就是说，null 不仅是一种数据类型，而且是一种关键字文字数据类型的变量 null 是一个没有分配值的变量，当创建一个没有值的变量时，它会自动分配一个 null 值这是以便清除之前该内存位置中的任何垃圾，否则程序可能会尝试处理它

# ios - 特定线程完成工作后如何执行一些代码？

> ID：11158775
> 
> 赞同：1
> 
> 时间：2012-06-22T14:57:45.770
> 
> 标签：ios, multithreading, cocoa

我有这样的代码

```
- (IBAction)onClick:(id)sender {

    NSThread *thread = [[NSThread alloc]initWithTarget:parser selector:@selector(adapter:) object:ph];

    [thread start];
} 
```

在我通过线程执行选择器后，我该如何做某事（显示日志或 smth）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:20:45.990

不幸的是，如果不使用 GCD（这是您可能无法支持的 iOS 4.x 功能），这个问题就没有简单的答案，所以`NSNotificationCenter`在方法完成时使用并锁定通知。

```
- (IBAction)onClick:(id)sender {

    NSThread *thread = [[NSThread alloc]initWithTarget:parser selector:@selector(adapter:) object:ph];

    [thread start];
}

-(void)adapter:(NSObject*)arg {
    //... process and such
    [[NSNotificationCenter defaultCenter]postNotification:[NSNotification notificationWithName:@"Thread_Done" object:nil]];

} 
```

# php - 如何将数据从 javascript 作为多维数组发送到 PHP

> ID：11158782
> 
> 赞同：1
> 
> 时间：2012-06-22T14:58:18.677
> 
> 标签：php, javascript, jquery, forms

我`$.ajax`用来将表单的值发送到 PHP 脚本。

表单输入字段被 PHP 像数组一样读取，但我不知道如何对 javascript 和 jQuery 做同样的事情，并以 PHP 能够像数组一样读取它们的方式发送它们。

例如`foo[bar]`，在 PHP 中命名的输入，您将其作为`$_POST['foo']['bar']`

目前我正在发送这些数据

```
data:{
   foo_bar: $('form').find('#foo_bar').val(),
   foo_xxx: $('form').find('#foo_xx').val()
}, 
```

并在 PHP 脚本中手动组装数组。

但它开始需要很多代码行。我可以以某种方式自动执行此操作，并将所有表单输入作为多维数组发送到 PHP 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:01:14.480

你可以使用 $.serialize();

```
data: {
  d: $('form').serialize()
} 
```

在此处查看更多信息：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

它会发回一个字符串`field=value&field2=value&`，你可以用`parse_str`它来处理它

parse_str 样本：

```
$foo = "t[]=1&t[]=2&b=3";
parse_str($foo, $bar);
var_dump($bar); 
```

结果：

```
array(2) {
  ["t"]=>
  array(2) {
    [0]=>
    string(1) "1"
    [1]=>
    string(1) "2"
  }
  ["b"]=>
  string(1) "3"
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T15:05:19.073

你不必做任何特别的事情。完全按照您希望 PHP 解释它们的方式声明您的字段名称：

```
<form>
<input name="foo[bar]" id="foo_bar">
<input name="foo[xxx]" id="foo_xxx">
<input name="a[]" id="a_0">
<input name="a[]" id="a_1">
<input name="b[0][1][2]" id="b_0_1_2">
</form> 
```

[`jQuery.serialize`](http://api.jquery.com/serialize/)将以您期望的方式对表单字段进行 url 编码：

```
data: $("form").serialize()
// foo%5Bbar%5D=&foo%5Bxxx%5D=&a%5B%5D=&a%5B%5D=&b%5B0%5D%5B1%5D%5B2%5D= 
```

当它作为查询字符串传递给 PHP 页面时：

```
/phpinfo.php?foo%5Bbar%5D=&foo%5Bxxx%5D=&a%5B%5D=&a%5B%5D=&b%5B0%5D%5B1%5D%5B2%5D= 
```

你得到：

```
$_GET["foo"] = Array
(
    [bar] => 
    [xxx] => 
)
$_GET["a"] = Array
(
    [0] => 
    [1] => 
)
$_GET["b"] = Array
(
    [0] => Array
        (
            [1] => Array
                (
                    [2] => 
                )
        )
) 
```

# android - 在 AsyncTask 中调用时，功能 Socket 读取不再起作用

> ID：11158784
> 
> 赞同：1
> 
> 时间：2012-06-22T14:58:32.017
> 
> 标签：android, sockets, android-asynctask

我正在制作一个应用程序，它通过套接字将字符串发送到服务器，然后在服务器处理完该数据后读取输出。当它是我的前台任务时它工作得很好，但是我已经使用 AsyncTask 来显示一个进程对话框，而套接字通信在后台运行，并且在我从服务器读取输出然后尝试关闭套接字后事情开始中断。

```
private class Progressor extends AsyncTask<String, Void, Void> {
        ProgressDialog dialog;

        protected void onPreExecute() {
            dialog = ProgressDialog.show(ClearTalkInputActivity.this, "Loading..", "Analyzing Text", true, false);
        }

        protected Void doInBackground(String... strings) {
            String language = strings[0].toLowerCase();
            String the_text = strings[1];
            Socket socket = null; 
            DataOutputStream dos = null;
            DataInputStream dis = null;

            try {
                socket = new Socket(my_ip, port);
                dos = new DataOutputStream(socket.getOutputStream());
                dis = new DataInputStream(socket.getInputStream());
                dos.writeUTF(language+"****"+the_text);
                String in = "";
                while (in.indexOf("</content>") < 0) {
                    in += dis.readUTF();    
                }
                socket.close();

                save_str(OUTPUT_KEY, in);   

                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
            } 
            finally {
                if (socket != null) {
                    try {
                        socket.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            if (dos != null) {
                try {
                    dos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            if (dis != null) {
                try {
                    dis.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } 

            return null;
        }

    protected void onPostExecute() {
        if (dialog.isShowing())
            dialog.dismiss();
        startActivity(new Intent (output_intent));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:04:13.493

Android 中推荐的方法是使用包含的两个 HttpClient 之一：

[Apache HTTP 客户端](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html)

[HttpURL连接](http://developer.android.com/reference/java/net/HttpURLConnection.html)

无需直接使用套接字。这些客户为改善您的体验做了很多工作。

这是 Android 开发人员的一篇博客文章，解释了基础知识：[http ://android-developers.blogspot.de/2011/09/androids-http-clients.html](http://android-developers.blogspot.de/2011/09/androids-http-clients.html)

# sql - 如果 sql 中 day 小于 9，则添加 0

> ID：11158785
> 
> 赞同：-1
> 
> 时间：2012-06-22T14:58:36.663
> 
> 标签：sql, datepart

我有以下价值：

```
Jun **6** 2012 12:00:00:000AM 
```

我想要的是：

```
Jun **06** 2012 12:00:00:000AM 
```

`0`仅当 day 的值小于 时才应放在前面`9`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:02:17.707

如果您使用的是 SQL Server，您可以执行以下操作：

```
DECLARE @dt datetime = '1/1/2012'
SELECT CONVERT(VARCHAR(26), @dt, 107) + ' ' + CONVERT(VARCHAR(12), @dt, 114) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:35:16.790

在任何数据库中，您都可以执行以下操作：

```
(case when substring(val, 5, 1) = ' '
      then substring(val, 1, 4)||'0'+substring(val, 5, 1000)
      else val
 end) 
```

这将检查第 5 个字符是否为空格。如果是这样，则需要添加一个零。我假设“**”是为了强调而不是在字符串中。

问题是各种字符串运算符——子字符串和连接——往往因数据库而异。

# ruby-on-rails - 如何将生产数据库复制到另一个生产服务器 - Rails

> ID：11158786
> 
> 赞同：0
> 
> 时间：2012-06-22T14:58:36.883
> 
> 标签：ruby-on-rails, database, heroku, production

我正在为工作创建一个 Rails 应用程序，直到我可以在“内部”服务器上安装该应用程序之前，我将它部署到 Heroku，以便我们现在可以开始使用它。但是，当我准备好时，我希望能够将其数据库及其所有数据复制到最终的生产服务器。我假设这是可能的，但我不知道从哪里开始。有没有办法可以从 Heroku 复制生产数据库 (Postgres) 并将其移动到新服务器以供在那里使用？用 Rails 怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:01:44.550

Heroku 通过[PGBackups](https://devcenter.heroku.com/articles/pgbackups)插件提供所有这些功能。在那里，您将找到有关导入、导出等所需了解的所有信息...

# jquery - jQuery 在 Twitter Bootstrap Nav 下拉菜单中使用 display:none 作用于 HTML 元素

> ID：11158791
> 
> 赞同：0
> 
> 时间：2012-06-22T14:58:53.887
> 
> 标签：jquery, css, twitter-bootstrap, jquery-events

在过去的几天里，我一直在敲我的头并搜索谷歌，但还没有找到一个可以接受的解决方案。我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#navbar)编写一个新网站。我们正在使用 Nav 类和内置的下拉功能，但是我们想要一个多列下拉列表而不是标准的单列下拉列表（我们有很多类别和子类别，我们想在下拉列表中显示并想要将其全部保留在屏幕上，而不会使下拉菜单变得超长并且必须滚动）。
要动态列化数据（在 a 中`<ul>`），我正在使用 [jquery.columnizer.js](http://welcome.totheinter.net/columnizer-jquery-plugin/)，这很棒。

问题是这样的：由于下拉菜单是隐藏的（通过`display:none`）jQuery 无法获得下拉容器的尺寸。由于无法获取维度，因此分列器无法分列。

我尝试将 columnize 函数附加到导航项上的单击事件，这在第一次单击时不起作用（如果您打开和关闭菜单，它在随后的切换中起作用）。

我不想修改 Bootstrap Javascript，并且 columnizer 中似乎没有任何东西可以让我工作。那么，我们如何才能`$('.myNavElements').columnize();`在 Bootstrap 下拉菜单显示后触发 columnize 函数（即）？

**编辑**：
根据接受的答案，适用的解决方案是：

```
$(".dropdown").addClass("open");  
$('.dropdown-menu').columnize();  
$('.dropdown').removeClass("open"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:00:12.623

将显示设置为`block`，对其进行处理，然后将其设置回`none`。因为 JavaScript 是单线程的，所以浏览器在脚本完成之前不会重绘。因此，它不会像`block`您将元素设置回`none`.

# nhibernate - 在 Azure 上休眠 HiLo

> ID：11158795
> 
> 赞同：1
> 
> 时间：2012-06-22T14:58:58.060
> 
> 标签：nhibernate, azure, hilo

我试图在 Azure SQL 中运行创建模式，但它失败了，因为我使用生成的 HiLo，Azure SQL 需要 CLUSTERED INDEX 并且默认情况下 HiLo 表没有任何索引，之前有人在 Azure 中尝试过 HiLo 吗？谁能指出我如何解决这个问题的正确方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:15:50.273

我没有亲自尝试过使用它，但过去有人在为 SQL Azure 使用 NHibernate 语句时报告了以下问题：

```
Heaps can not be replicated tables. Please create a clustered index for the table. 
```

我记得解决方案是使用 NHibernate 扩展点，如下所示：

```
public class MsSqlAzureDialect : MsSql2008Dialect
{
  public override string PrimaryKeyString
  {
     get { return "primary key CLUSTERED"; }
  }
} 
```

由于我没有此解决方案，请尝试一下，如果这解决了您的问题，那很好，否则请告诉我，我将删除此答案。

# zend-framework - zend 使用单个控制器和模型动态创建类或访问许多不同的表

> ID：11158797
> 
> 赞同：0
> 
> 时间：2012-06-22T14:59:11.343
> 
> 标签：zend-framework, centos, zend-db-table

我有100多张桌子。我需要根据表单上提供的用户名访问这些表中的每一个。用户名是表名。我不想为每个代表一个表的类创建 100 个类。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:29:47.907

我在我的基本映射器类中使用与此类似的代码：

```
 protected $_tableGateway = NULL;
  protected $_tableName = NULL;
  public function __construct(Zend_Db_Table_Abstract $tableGateway = NULL, $tableName = NULL) {
  //set the tablename in a concrete mapper, set it here in constructor or create mutator to setTableName.
    if (!is_null($tableName)) { 
    $this->_tableName = $tableName;
    }
    if (is_null($tableGateway)) {
        $this->_tableGateway = new Zend_Db_Table($this->_tableName);
    } else {
        $this->_tableGateway = $tableGateway;
    }
} 
```

像这样的东西应该允许您传入 Zend_Db_Table_Abstract （DbTable 模型）的实例或作为表名的字符串。

```
//controller code
$username = $form->getValue('username');
$mapper = My_Mapper(NULL, $username);
$result = $mapper->fetchAll(); 
```

我认为这还没有真正完成，但应该有助于指明方向。

如果您不使用映射器而只想使用 DbTable 模型，您可以尝试（这可以传递给接受 Zend_Db_Table_Abstract 的映射器）：

```
class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
{
    function __construct(array $config) {
        parent::__construct($config);
        }
} 
```

并在您的控制器/动作中使用它：

```
 /**
     * Supported params for $config are:
     * - db              = user-supplied instance of database connector,
     *                     or key name of registry instance.
     * - name            = table name.
     * - primary         = string or array of primary key(s).
     * - rowClass        = row class name.
     * - rowsetClass     = rowset class name.
     * - referenceMap    = array structure to declare relationship
     *                     to parent tables.
     * - dependentTables = array of child tables.
     * - metadataCache   = cache for information from adapter describeTable().
     */
$username = $form->getValue('username');
$config = array('name'=> $username, 'primary' => 'id');
$model = new Application_Model_DbTable_Users($config);//This should setup your table
$result = $model->fetchAll(); //perform queries or execute methods defined in DbTable model 
```

或者你可以在你的控制器/动作中直接使用 Zend_Db_Table ：

```
$username = $form->getValue('username');
 $db = new Zend_Db_Table($username);
 $result = $db->fetchAll(); 
```

祝你好运...

# html - HTML5 中的应用程序缓存不起作用：

> ID：11158798
> 
> 赞同：2
> 
> 时间：2012-06-22T14:59:14.370
> 
> 标签：html

我是 HTML 5 应用程序存储的新手。我正在尝试一个样本来测试离线存储。我有几个问题。请帮忙。

使用的文件：

**索引.html**

```
<html manifest="demo.manifest"> 
<head> 
<link rel="stylesheet" href="style.css" type="text/css" /> 
<script type="text/javascript" src="script.js" ></script>
</head> 
<body> 
<h1>some text</h1> 
<p>Some text.</p> 
</body> 
</html> 
```

**样式.css**

```
body{background-color: #333;}
h1{color: #c94054;}
p{color: #fff;} 
```

**演示清单**

```
CACHE MANIFEST

CACHE:
style.css
index.html 
```

我知道 demo.manifest MIME 类型必须设置为 text/cache-manifest 并且必须在 *.htaccess 文件中完成。我在 Windows 环境中使用 apache tomcat 6.0 服务器。我无法在服务器中找到此文件。因此，我在我的项目（正在 eclipse helios 上开发）的根目录中创建了一个（test.htaccess），即在 d:/eclipse-workspace/ProjectName/ 中，我的文件如下所示：

**测试.htaccess**

```
AddType text/cache-manifest .manifest 
```

但是当我停止服务器并尝试访问它时，应用程序缓存不起作用，如下所示：

```
http://localhost:8081/ProjectName/index.html 
```

请让我知道我做错了什么......另外，有没有办法调试应用程序缓存

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:11:12.477

在 Tomcat 服务器上，MIME 类型是通过默认的 web.xml 文件配置的，`conf/web.xml`

在该文件的末尾，您会发现一堆已定义的 MIME 类型。你必须添加

```
<mime-mapping>
    <extension>manifest</extension>
    <mime-type>text/cache-manifest</mime-type>
</mime-mapping> 
```

与您在 Apache 和其他服务器使用的 .htaccess 中放入的内容等效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T19:54:35.870

我有同样的问题。一切看起来都正确：路径正确，清单在我的项目中，我可以手动浏览它，设置了 MIME 类型。它根本没有试图从我的 HTML 中获取这个文件。问题是我没有在清单的开头包含所需的行：

```
CACHE MANIFEST 
```

没有这个导致浏览器只是默默地忽略清单标签。

# python - Django 显示空字段而不是 ajax 选择小部件（filter_horizo ntal）

> ID：11158804
> 
> 赞同：1
> 
> 时间：2012-06-22T14:59:40.090
> 
> 标签：python, django, django-admin

Django 管理员显示一个空字段而不是“ajax 选择小部件”。

![管理员.py](../Images/bc734a8ef0036c6677a2131bad0eb894.png)

在另一个项目上尝试过 - 在具有两个 m2m 关系的模型中与具有不同名称的完全相等的模型中。在一个领域就像一个魅力，在另一个领域显示空旷的地方。任何帮助或链接？

模型.py

```
class Company(models.Model):
    """Companies - customers """
    title = models.CharField('Nosaukums', blank=False, max_length=200)
    is_costumer = models.BooleanField('Pasūtītājs', default=False)
    is_subcontractor = models.BooleanField('Apakšuzņēmējs', default=False)

    class Meta:
        verbose_name = 'Uzņēmums'
        verbose_name_plural = 'Uzņēmumi'

    def __unicode__(self):
        return self.title

class Project(models.Model):
    """Projects"""

    number = models.IntegerField('Īsais numurs', blank=False, null=False)
    title = models.CharField('Nosaukums', blank=False, max_length=250)
    customers = models.ManyToManyField(Company, verbose_name='Pasūtītāji', blank=True, null=True)
    is_active = models.BooleanField('Aktīvs', default=True)
    notes = models.TextField('Piezīmes', blank=True)

    class Meta:
        verbose_name = 'Projekts'
        verbose_name_plural = 'Projekti'

    def costumer_list(self):
        list = "pasūtītāji"
        return list

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:29:18.540

根据您在上面发布的模型和管理文件的图像，您的`filter_hoizontal`变量应该是`filter_horizontal = ('customers',)`而不是`filter_horizontal = ('costumers',)`换句话说，您的模型和管理文件之间的客户拼写不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T16:58:58.377

我的一些 m2m 字段不允许`form_horizontal`。我发现这些特定字段的唯一共同点是它们都是用于*类别*的，在我的母语中是*categorieën*，恰好在最后一个*e*上有重音。

请参阅下面的我的字段定义：

```
categories = models.ManyToManyField ( 
                              'FAQCategories',
               verbose_name = 'Categorieën',
               blank        = True,
             ) 
```

这里的问题是我没有告诉 python 我的字符串应该被视为 Unicode。当我改变它的`verbose_name`工作`u'Categoriën'`！

回想起来，这对我来说非常明显，但我希望这会对你或其他人有所帮助。正确定义这些字符串，吸取教训！

# tabs - Vim 新标签页与文本不匹配

> ID：11158806
> 
> 赞同：1
> 
> 时间：2012-06-22T14:59:57.070
> 
> 标签：tabs, match, vim, highlight

我`:match`用来突出我的代码中不符合样式准则的问题。以下内容适用于我在 Vim 中打开的第一个窗口：

**`~/.vimrc`：**

```
hi ExtraWhitespace ctermbg=red guibg=red
hi NoFunctionSpace ctermbg=red guibg=red
match ExtraWhitespace /\s\+$\| \+\ze\t/
2match NoFunctionSpace /\S(/ 
```

但是，当我转到`:tabedit`一个文件时，或者如果我使用选项和多个文件打开 Vim `-p`，只有第一个窗口突出显示匹配。我希望所有打开的标签都显示匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:36:47.783

这些`:match`命令仅适用于当前窗口。要将它们自动应用到每个新窗口，请将它们挂接到`WinEnter`事件中：

```
autocmd WinEnter * match ExtraWhitespace /\s\+$\| \+\ze\t/
autocmd WinEnter * 2match NoFunctionSpace /\S(/ 
```

您仍然需要原始`:match`命令，因为`WinEnter`初始窗口不会触发该事件。

# windows-xp - 如何让“msiexec /x”快捷方式在 XP 上请求提升？

> ID：11158809
> 
> 赞同：0
> 
> 时间：2012-06-22T15:00:04.853
> 
> 标签：windows-xp, wix, wix3.5

在 XP（用户帐户）上运行此快捷方式时：

```
<Shortcut Id="UninstallStartMenuShortcut" Advertise="no"
              Name="AppName" Description="Uninstalls AppName"
              Target="[SystemFolder]msiexec.exe" Arguments="/x [ProductCode]"/> 
```

我收到错误消息**“您必须是管理员才能删除此应用程序。要删除此应用程序，您可以以管理员身份登录，或联系您的技术支持小组寻求帮助。”**

为什么会发生这种情况，而不是使用管理员密码要求提升？我怎样才能避免这个愚蠢的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T02:46:44.903

XP中不存在“海拔”。LUA/UAC 是一个 Vista 和超越的概念。

您可以创建并安装作为快捷方式目标的 EXE。然后，此 EXE 可以确定是否需要更高的权限并询问用户名和密码来运行卸载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T15:12:51.923

只有管​​理员可以安装（和卸载）应用程序。因此，用户无权卸载管理员之前安装的软件是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:47:55.747

`runas`允许您以不同的用户身份运行程序。

# ios - iOS 获取哪个 uielement 调用了 UIKeyboardWillShowNotification

> ID：11158813
> 
> 赞同：1
> 
> 时间：2012-06-22T15:00:11.250
> 
> 标签：ios, ios5, uielement

在我的 iOS 应用程序中，我有几个`UIElement`可以处理用户输入的 s：文本字段、可编辑的 web 视图等。每次我在这些`UIElement`s 中写一些东西时，键盘（显然）都会出现。在它发生之前，我可以通过观察`UIKeyboardWillShowNotification`.

我想知道如何找出`UIElement`调用此操作的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:19:33.870

当用户点击的视图设置为 FirstResponder 时，键盘启动，所以我认为这个问题相当于说收到 UIKeyboardWillShowNotification 时[如何获取当前的第一响应者？](https://stackoverflow.com/questions/1823317/how-do-i-legally-get-the-current-first-responder-on-the-screen-on-an-iphone)

Thomas Muller 对这个问题的[回答](https://stackoverflow.com/a/1823360/925478)是使用类扩展，如下所示：

```
@implementation UIView (FindFirstResponder)
- (UIView *)findFirstResponder
{
    if (self.isFirstResponder) {        
        return self;     
    }

    for (UIView *subView in self.subviews) {
        UIView *firstResponder = [subView findFirstResponder];

        if (firstResponder != nil) {
            return firstResponder;
        }
    }

    return nil;
}
@end 
```

所以我认为你可以在 UIKeyboardWillShow 的处理程序中使用它来找出导致它的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T15:09:01.043

我认为本文档的第 4 节（移动位于键盘下方的内容）可以提示您了解哪些元素具有键盘。

[http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW1](http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW1)

# rabbitmq - 将 RabbitMQ 与 Rhino 服务总线一起使用

> ID：11158816
> 
> 赞同：0
> 
> 时间：2012-06-22T15:00:26.007
> 
> 标签：rabbitmq, rhino-servicebus

我已经阅读了 Oren Eini 的关于 Rhino ESB 的[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/ff796225.aspx)，其中提到可以使用 ActiveMQ、RabbitMQ 或其他代替 MSMQ 或 Rhino 队列。但我很难找到使用 MSMQ 或 Rhino 队列以外的任何示例的任何示例。我正在研究 RabbitMQ 和 Rhino ESB 的项目，但在我想要的配置上找不到任何东西。任何人都可以为我提供一些示例或链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:04:51.370

我刚刚查看了[Github](https://github.com/hibernating-rhinos/rhino-esb)上的 Rhino ServiceBus 代码，据我所知，RabbitMQ 没有实现。我可以看到 MSMQ 的实现（我使用 MSMQ 实现）。

但是我猜你可以通过查看 MSMQ 实现来实现 RabbitMQ 集成。快速浏览一下[MSMQ 实现](https://github.com/hibernating-rhinos/rhino-esb/tree/master/Rhino.ServiceBus/Msmq)，似乎 IMsmqTransport 是要实现的接口。一旦你有了一个实现，你就可以连接 IMsmqTransport 接口的新实现，以使用 RabbitMQ 获得一个工作的 Rhino Servicebus。

如果你死心塌地使用 RabbitMQ 结帐[Mike Hadlow](http://mikehadlow.blogspot.com/)的[EasyNetQ](http://easynetq.com/)

写完答案后，我发现[了这个](https://stackoverflow.com/questions/4362051/swapping-out-msmq-for-rabbitmq-in-nservicebus)，如果你想实现自己的 RabbitMQ 实现，这可能会很有用。

# file - 如何让 sed 'w' 命令知道文件名的结尾？

> ID：11158835
> 
> 赞同：3
> 
> 时间：2012-06-22T15:01:31.960
> 
> 标签：file, bash, unix, sed

我能找到的每个演示`w`命令的示例`sed`在脚本末尾都有它。如果我做不到怎么办？

一个例子可能会更好地说明这个问题：

```
$ echo '123' | sed 'w tempfile; s/[0-9]/\./g'
sed: couldn't open file tempfile; s/[0-9]/\./g: No such file or directory 
```

（如何）我可以更改上述内容以便`sed`知道文件名的结尾吗？

PS我知道我能做到

```
$ echo '123' | sed 'w tempfile
> s/[0-9]/\./g'
... 
```

有更漂亮的选择吗？

PPS 人们倾向于建议将其拆分为两个脚本。那么问题来了：它安全吗？如果我要在`w`命令之后的某个地方分支怎么办，等等。有人可以确认*任何*脚本可以在*任何*命令之后分成两部分并且不会影响结果吗？

**最终编辑：**我检查了多个`-e`工作就像连接命令一样。我认为它更复杂（比如第一个应该总是在第二个开始之前退出，等等）。但是，我尝试`{..}`在两个脚本之间拆分一个命令块，它仍然有效，所以这`w`并不是一个严重的问题。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:22:38.453

您可以在一个 shell 行中为 sed 提供两行脚本：

```
echo '123' | sed -e 'w tempfile' -e 's/[0-9]/\./g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T16:05:31.920

这可能对您有用（如果您使用的是 BASH 并且可能是 GNU sed）：

```
echo '123' | sed 'w tempfile'$'\n'';s/[0-9]/\./g' 
```

解释：

和命令需要换行符来终止文件`r`名`R`。`w`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T16:24:33.193

问题的答案是“换行符”：

`sed`将非转义的文字换行符视为文件名的结尾。

如果你的 shell 是 bash，或者支持`$'\n'`语法，你可以这样解决 OP 的原始问题：

```
echo '123' | sed 'w tempfile'$'\n''s/[0-9]/\./g' 
```

在更有限的`sh`情况下，您可以说

```
$ echo '123' | sed 'w tempfile'\
> 's/[0-9]/\./g' 
```

我在这里所做的只是写`\`一个转义，然后按回车键并在那里写下命令的其余部分。请注意，我在这里转义换行符，`bash`但它被传递到`sed`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:28:09.427

像这样反转 2 个 sed 命令序列：

```
echo '123' | sed 's/[0-9]/\./g;w tempfile' 
```

即首先执行替换，然后将模式空间写入文件。

**编辑：**对于 OP 是否希望在最终文件中替换文本存在一些误解。我上面的命令将替换的文本放在临时文件中。由于这不是 OP 想要的，因此还有一个版本可以避免它：

```
echo '123' | sed -e 'h;s/[0-9]/\./g;g;w tempfile' 
```

# android - 从代码而不是从 xml 创建选择器时出现意外结果

> ID：11158838
> 
> 赞同：3
> 
> 时间：2012-06-22T15:01:46.787
> 
> 标签：android, listview, android-xml, statelistdrawable

我在将一些工作 XML 文件转换为代码时遇到了一些麻烦。我有一个 ListView，我需要能够在运行时从高级未知的资源（因此为什么不使用 XML）切换其按下/检查的可绘制对象；

以下配置效果很好：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:choiceMode="singleChoice" >
    </ListView>

</LinearLayout> 
```

选择器.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/blue" android:state_pressed="true"/>
    <item android:drawable="@drawable/green" android:state_checked="true"/>
    <item android:drawable="@drawable/orange"/>
</selector> 
```

list_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/selector"
    android:padding="10dp" /> 
```

主.java：

```
public class Main extends Activity {

    StateListDrawable selector; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView listView1 = (ListView) findViewById(R.id.listView1);
        StringAdapter adapter = new StringAdapter(this, R.layout.list_row);
        adapter.add("one");     adapter.add("two");     adapter.add("three");       adapter.add("four");
        adapter.add("five");        adapter.add("six");     adapter.add("seven");       adapter.add("eight");
        adapter.add("nine");        adapter.add("ten");     adapter.add("eleven");      adapter.add("twelve");
        listView1.setAdapter(adapter);
    }

    private class StringAdapter extends ArrayAdapter<String>{

        public StringAdapter(Context context, int textViewResourceId) {
            super(context, textViewResourceId);         
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            final CheckedTextView  tv = (CheckedTextView ) inflater.inflate(R.layout.list_row, parent, false);
            tv.setText(getItem(position));
            return tv;
        }
    }
} 
```

结果是这样的，非常棒（按下：蓝色，选中：绿色，否则：橙色）：

![结果1](../Images/e0fbf7ee378f91d5c946c4443363208a.png)

但是，如果我删除

```
android:background="@drawable/selector 
```

从 list_row_xml，并通过代码应用它：

```
 Drawable blue = getResources().getDrawable(R.drawable.blue);
    Drawable green = getResources().getDrawable(R.drawable.green);
    Drawable orange = getResources().getDrawable(R.drawable.orange);

    selector = new StateListDrawable();
    selector.addState(new int[] { android.R.attr.state_pressed }, blue);
    selector.addState(new int[] { android.R.attr.state_checked }, green);
    selector.addState(new int[] { }, orange);

       tv.setBackgroundDrawable(selector); 
```

我得到以下信息（一切都得到 state_pressed 可绘制，蓝色）：

![在此处输入图像描述](../Images/fdca4d28c3812c8332c24e893b9d0316.png)

什么地方出了错？我很确定我已将选择器适当地转换为代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T16:56:26.780

我复制了你的代码，一切正常。不过，您应该确保创建一个`selector`in的新实例`getView()`。否则，如果您`selector`对所有项目使用相同的内容，则按一项将影响您的所有项目。

这是你的`getView()`方法应该是什么样子

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final CheckedTextView tv = (CheckedTextView) inflater.inflate(R.layout.list_row, parent, false);
        tv.setText(getItem(position));

        Drawable blue = getResources().getDrawable(R.drawable.blue);
        Drawable green = getResources().getDrawable(R.drawable.green);
        Drawable orange = getResources().getDrawable(R.drawable.orange);

        selector = new StateListDrawable();
        selector.addState(new int[] { android.R.attr.state_pressed }, blue);
        selector.addState(new int[] { android.R.attr.state_checked }, green);
        selector.addState(new int[] {}, orange);

        tv.setBackgroundDrawable(selector);

        return tv;
    } 
```

当然，您可以进行一些优化，但这会起作用。

# css - 浮动溢出和位置冲突

> ID：11158841
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:01:54.010
> 
> 标签：css

我对溢出的浮点数有疑问（[此处为 JSFiddle](http://jsfiddle.net/sgw4K/3/)）。

### HTML

```
<div id="father">
    <div id="son">
        gruik
    </div>
    <div id="dog">
        gruikgruik gruik gruik gruikg ruik gruik gruikgr uikgruik gruik gruik gruik
    </div>
</div>​ 
```

### CSS

```
div { border: solid; }
#father { width: 300px; position: relative; }
#father:after { content: ""; display: block; clear: both; }
#son { width: 100px; float: left; border: solid red; }
#dog { float: left; border: solid blue; position: absolute; left: 105px; } 
```

如您所见，`#dog`从`#father`. 我尝试了经典的 CSS 技术，但它们不起作用（无论是 clearfix 方法，还是`overflow:hidden;`or `overflow:auto;`）。

我认为问题出现是因为使用了位置 CSS 属性，但我需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:16:15.500

`position: absolute;`相对于（因为has ）正确定位`#dog`元素。`#father``#father``position: relative;`

然而，只有`#son`元素给出`#father`了它的高度。绝对定位的元素会从流中取出，因此如果`#dog`高度增加，其父容器 ( `#father`) 不会，因此`#dog`看起来会溢出。

为什么必须使用`position: absolute;`on `#dog`？

**你不能只使用浮动，并设置它的宽度吗？**无论如何，您都在设置其父级和兄弟级的宽度，因此您知道它应该是什么宽度（如果您也指定了边框的宽度）。

**演示：http:** [//jsfiddle.net/sgw4K/5/](http://jsfiddle.net/sgw4K/5/)

**编辑/更新：**在发现其他样式后，**三十多点**建议对问题进行两个声音修复。请参阅下面的评论或以下内容：

> 要解决此问题，您可以从以下两个选项中删除`float: left`然后`#son`选择一个：`margin-left: 52px`或`overflow: hidden;`在`#son`元素上。

# php - 尝试使用 SwiftMailer 和 Sendgrid 发送电子邮件时出现致命错误

> ID：11158845
> 
> 赞同：3
> 
> 时间：2012-06-22T15:02:01.563
> 
> 标签：php, email, swiftmailer, sendgrid

尝试使用 swiftmailer 和 sendgrid smtp 发送电子邮件时出现此错误

**致命错误：** *未捕获异常“Swift_TransportException”，消息“预期响应代码 250，但得到代码“”，消息“”'*

这是我的代码：

```
$hdr = new SmtpApiHeader();

// Set all of the above variables
$hdr->addTo($toList);
$hdr->addSubVal('-name-', $nameList);
$hdr->addSubVal('-time-', $timeList);

// Specify that this is an initial contact message
$hdr->setCategory("initial");

// The subject of your email
$subject = 'Example SendGrid Email';

// Where is this message coming from. For example, this message can be from 
// support@yourcompany.com, info@yourcompany.com
$from = array('no-reply@mupiz.com' => 'Mupiz');
$to = array('antonin@noos.fr'=>'AN',"antonin@mupiz.com"=>"AN2s");

$text="Hello -name-
       Thank you for your interest in our products. We have set up an appointment
             to call you at -time- EST to discuss your needs in more detail.

                Regards,

                Fred, How are you?
      ";
$html = "
<html>
  <head></head>
  <body>
    <p>Hello -name-,<br>
       Thank you for your interest in our products. We have set up an appointment
             to call you at -time- EST to discuss your needs in more detail.

                Regards,

                Fred, How are you?<br>
    </p>
  </body>
</html>
";

// Your SendGrid account credentials
$username = 'XXXX';
$password = 'XXXX';

// Create new swift connection and authenticate
$transport = Swift_SmtpTransport::newInstance('smtp.sendgrid.net', 25);
$transport ->setUsername($username);
$transport ->setPassword($password);
$swift = Swift_Mailer::newInstance($transport);

// Create a message (subject)
$message = new Swift_Message($subject);

// add SMTPAPI header to the message
// *****IMPORTANT NOTE*****
// SendGrid's asJSON function escapes characters. If you are using Swift Mailer's
// PHP Mailer functions, the getTextHeader function will also escape characters.
// This can cause the filter to be dropped.
$headers = $message->getHeaders();
$headers->addTextHeader('X-SMTPAPI', $hdr->asJSON());

// attach the body of the email
$message->setFrom($from);
$message->setBody($html, 'text/html');
$message->setTo($to);
$message->addPart($text, 'text/plain');

// send message
if ($recipients = $swift->send($message, $failures))
{
// This will let us know how many users received this message
// If we specify the names in the X-SMTPAPI header, then this will always be 1.
echo 'Message sent out to '.$recipients.' users';
}
// something went wrong =(
else
{
echo "Something went wrong - ";
print_r($failures);
} 
```

一个想法 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:20:11.023

造成这种情况的原因可能有很多。最有可能的是您的服务器已关闭与外部主机的连接。其他可能性是您使用的是具有 openSSL 错误的旧版本 PHP，或者您受到某些东西的速率限制。

您应该查看这个问题以了解有关外部主机问题的详细信息：[通过 sendgrid 发送邮件](https://stackoverflow.com/questions/8725365/send-mails-via-sendgrid)

* * *

另外，如果您想使用 SendGrid 发送电子邮件，您应该使用 SendGrid PHP 库。它解决了 Swift 和一般发送的一大堆细微差别。此外，它还允许您访问 HTTP API，以防您因任何原因无法使用 SMTP。

[https://github.com/sendgrid/sendgrid-php](https://github.com/sendgrid/sendgrid-php)

***完全披露****：我作为 SendGrid 的开发布道者工作，不时在 PHP 库上工作。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-28T10:20:45.143

对于 sendgrid 可能有两个原因：

1.  你可能有错误的身份验证数据

2.  您的帐户可能仍处于预置状态，因此您必须稍等片刻才能完全激活

所以

*   检查 app/config/mail.php 中的所有认证数据以与[https://sendgrid.com/docs/Integrate/index.html中的数据匹配](https://sendgrid.com/docs/Integrate/index.html)

*   检查您的 sendgrid 帐户上是否有最重要的消息/通知，例如：

> 您的帐户仍在配置中，您可能无法发送电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T15:45:32.863

如果您的帐户因计费原因被冻结（例如信用卡过期日期），您也会收到此错误消息。

**注意：** SendGrid 不会丢弃消息，它们会保留它们直到您的计费问题得到解决，然后即使返回此错误也会处理它们。

# ruby-on-rails - Hartl第10章未定义的局部变量或方法'object'

> ID：11158850
> 
> 赞同：7
> 
> 时间：2012-06-22T15:02:16.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[如清单 10.33](http://ruby.railstutorial.org/chapters/user-microposts#code:micropost_form)所示，我制作了用于创建微帖子的部分表单，`<%= render 'shared/error_messages', object: f.object %>`并按照说明更新了相应的视图文件。但是，我无法通过 Rspec 测试，因为我不断收到“类的未定义局部变量或方法'对象'......”有什么想法吗？

app/views/shared/_micropost_form.html.erb

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Compose new micropost..." %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

app/views/shared/_error_messages.html.erb

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
      <% object.errors.full_messages.each do |msg| %>
        <li>* <%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %> 
```

应用程序/视图/用户/new.html.erb

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= render 'fields', f: f %>
      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

应用程序/视图/用户/edit.html.erb

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= render 'fields', f: f %>
      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails" target="_blank">change</a>
  </div>
</div> 
```

认证规范

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_error_message('Invalid') }

      it { should_not have_link('Users',    href: users_path) }
      it { should_not have_link('Sign out', href: signout_path) }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end      
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }

      it { should have_link('Users',    href: users_path) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }

      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end      
    end    
  end  

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

      it { should_not have_link('Profile', href: user_path(user)) }
      it { should_not have_link('Settings', href: edit_user_path(user)) }

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting the user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end 
      end

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end

      describe "when signing in again" do
        before do
          visit signin_path
          fill_in "Email", with: user.email
              fill_in "Password", with: user.password
          click_button "Sign in"
            end

        it "should render the default (profile) page" do
          page.should have_selector('title', text: user.name)
        end
          end
        end

      describe "in the Microposts controller" do

        describe "submitting to the create action" do
          before { post microposts_path }
          specify { response.should redirect_to(signin_path) }
        end

        describe "submitting to the destroy action" do
          before { delete micropost_path(FactoryGirl.create(:micropost)) }
          specify { response.should redirect_to(signin_path) }
        end
      end   
    end
  end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end  

    describe "as non-admin user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:non_admin) { FactoryGirl.create(:user) }

      before { sign_in non_admin }

      describe "submitting a DELETE request to the Users#destroy action" do
        before { delete user_path(user) }
        specify { response.should redirect_to(root_path) }        
      end
    end
  end  
end 
```

用户规范

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "index" do

    let(:user) { FactoryGirl.create(:user) }

    before(:all) { 30.times { FactoryGirl.create(:user) } }
    after(:all)  { User.delete_all }

    before(:each) do
      sign_in user
      visit users_path
    end    

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1',    text: 'All users') }    

    describe "pagination" do

      it { should have_selector('div.pagination') }

      it "should list each user" do
        User.paginate(page: 1).each do |user|
          page.should have_selector('li', text: user.name)
        end
      end
    end

    describe "delete links" do

      it { should_not have_link('delete') }

      describe "as an admin user" do
        let(:admin) { FactoryGirl.create(:admin) }
        before do
          sign_in admin
          visit users_path
        end

        it { should have_link('delete', href: user_path(User.first)) }
        it "should be able to delete another user" do
          expect { click_link('delete') }.to change(User, :count).by(-1)
        end
        it { should_not have_link('delete', href: user_path(admin)) }
      end
    end     
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: 'Sign up') }
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    let!(:m1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
    let!(:m2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }   

    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end  

  describe "microposts" do
      it { should have_content(m1.content) }
      it { should have_content(m2.content) }
      it { should have_content(user.microposts.count) }
    end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "after submission" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
      end      
    end

    describe "with valid information" do
      before { valid_signup }

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_success_message('Welcome') }
    it { should have_link('Sign out') }
      end
    end
  end  

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_success_message }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end    
  end  
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T17:11:14.183

哇，现在我觉得自己像个傻瓜......我`<%= render 'shared/error_messages' %>`在[用户字段中留下了一个额外的部分](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code%3anew_edit_partial)

希望这会帮助遇到同样问题的其他人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-29T21:43:36.087

本教程的当前版本（截至 2013 年 8 月）有一个警告：

> （注意：如果您在 9.6 节的练习中实现了清单 9.50 和清单 9.51，您的代码会有所不同...）

...但就像其他人问这些问题一样，我一开始就错过了。同样，如果您在第 9.6 节中进行了练习，请不要编辑您当前的 new.html.erb 和 edit.html.erb 文件。您需要更新的唯一文件`<%= render 'shared/error_messages', object: f.object %>`是 _fields.html.erb。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T20:22:44.443

他应该更新教程以提醒我们删除额外的 <%= render 'shared/error_messages' %> 在用户字段部分如上面所说的那样。这是之前的要求遗留下来的。我有同样的问题。不要以为你是个白痴，很少有人会记得这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T04:12:25.027

对于仍在寻找的任何人，如果您正在遵循 Hartl 教程，请检查该`<%= render 'shared/error_messages'...`行。`app/views/users/_name_email_password_form.html.erb`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-15T05:03:16.510

这是正确的代码

```
 <% if error_messages.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-danger">
      The form contains <%= pluralize(error_messages.errors.count,     "error") %>.
    </div>
    <ul>
    <% error_messages.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %> 
```

这是这样做的正确形式

# iphone - 如何在 Xcode 上为 iPhone/iPad 项目生成 .app 文件

> ID：11158852
> 
> 赞同：0
> 
> 时间：2012-06-22T15:02:22.683
> 
> 标签：iphone, xcode, app-store

我想在应用商店发送和验证我的应用程序之前知道它的大小。我在这个项目中使用了 250 个视图控制器，并在资源中使用了大约 120 Mo 的图像。

我担心 Apple 因为它的大小而无法验证，这可能吗？如何创建这个项目的 .app 版本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:37:43.987

除非您的应用程序大于 2GB，否则您不会被 Apple 拒绝。但是，如果您的应用程序小于 50MB，您将获得更多下载，因为用户可以通过通过 3G 连接的 iPhone/iPad 下载它。如果它更大，则只有 Wi-Fi 可以工作。尝试通过 3G 下载您的应用程序的用户将收到以下消息：

[http://media.hottipscentral.com/wp-content/uploads/2012/03/50mb-limit.png](http://media.hottipscentral.com/wp-content/uploads/2012/03/50mb-limit.png)

***获取应用商店大小提示的最快方法***是为设备构建项目并找到您的 .app 文件。通常它位于项目导航器的底部。右键单击它并选择“在取景器中显示”并在那里检查它的大小。这将给出最终值的提示，但它通常比最终大小大一点。

**检查最终应用商店大小***的最准确方法是为您的应用安装有效的 Ad Hoc 分发证书，然后在 Xcode 中选择 Product > Archive。*****

 **归档完成后，您应该最终进入管理器 > 归档视图。选择您新创建的存档。观察！Organizer 中有一个名为“Estimated App Store Size: XX MB”的值。不要相信这个值，它已经在许多其他关于 SO 的问题中讨论过，它是不准确的。

单击分发...并选择分发为企业或临时部署。保存文件，然后在 finder 中浏览到新保存的 .ipa 文件。该文件的大小将比您最终的 AppStore 大小略小。

***要提交您的应用程序***，您需要安装并选择您的 App Store 分发证书，然后按照我上面提到的相同方式选择存档，只是现在当您单击“分发”时，您选择了 AppStore。

如果您没有 Apple 开发者帐户或不知道在哪里获取或安装您的证书，这里有一个指南，可以指导您从注册到提交到应用商店：

[如何从无帐户到应用商店第 1 部分提交您的应用到苹果](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

[如何从无帐户到应用商店第 2 部分提交您的应用到苹果](http://www.raywenderlich.com/8045/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:56:42.117

*   您可以按照应用商店审核指南了解应用上传应用商店的要求。为此，请遵循[审查指南链接](https://developer.apple.com/appstore/guidelines.html)。

*   我认为根据苹果文档，大小超过 2GB 的应用程序将被拒绝。**

# javascript - 带有数组的 Javascript 计算值

> ID：11158853
> 
> 赞同：0
> 
> 时间：2012-06-22T15:02:23.697
> 
> 标签：javascript, arrays, string, function, computed-values

[Jquery 每个 Json 值问题](https://stackoverflow.com/questions/11141799/jquery-each-json-values-issue/11141820#11141820)

这个问题与上面类似，但在被标记为重复之前并不相同。

在了解如何使用计算值之后，我遇到了另一个问题。

在我的 javascript 中，我有以下代码：

```
var incidentWizard = ['page1.html','page2.html','page3.html'];
var magicWizard = ['page1.html','page2.html','page3.html'];
var loadedURL = 'page1.html'; 
```

这个函数的输入是 (true,'incident')

```
function(next,wizardname)
 {

   var WizSize = incidentWizard.length; 
    wizardName = [wizardName] + 'Wizard';

   var wizardPOS = jQuery.inArray(loadedURL,incidentWizard); 
```

现在我想使用wizardname参数来决定我要使用什么数组......

```
Loader(incidentWizard[wizardPOS],true); 
```

我也试过

```
Loader([incidentWizard][wizardPOS],true); 
```

和

```
Loader([incidentWizard][wizardPOS],true); 
```

此外，加载器函数只需要在 wizardPOS 的数组中的字符串值，抱歉混淆

但是当我尝试这个时，我总是以结果结束......

```
/incidentWizard 
```

我知道这与使用计算值有关，但我已经尝试阅读它们，但似乎无法解决这个问题。

基本上我想使用wizardName 的计算值来访问该名称的数组。

请帮助支持，期待看到许多方法来做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:05:15.563

您只能以这种方式访问​​对象的属性。对于全球价值观，`window[ name ]`将起作用。对于简单的局部变量，根本不可能。也就是说，如果在一个函数内部你有

```
var something; 
```

如果你只有字符串“something”，那么就没有办法得到那个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:08:51.423

我只是将每个数组作为道具放在一个对象上：

```
var obj {
    incidentWizard: ['page1.html','page2.html','page3.html'],
    magicWizard: ['page1.html','page2.html','page3.html']
}; 
```

然后你可以这样做，`obj['incidentWizard']`否则`obj.incidentWizard`这将返回：

```
['page1.html','page2.html','page3.html'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:13:23.227

在这条线上：

```
wizardName = [wizardName] + 'Wizard'; 
```

您正试图将字符串“向导”连接到`Array`一个字符串元素“事件”。我假设你只想要常规的字符串连接：

```
wizardName = wizardName + 'Wizard'; 
```

但是，现在您只有一个字符串，而不是数组实例。`*Wizard`要解决此问题，请将定义数组的方式更改为：

```
var wizardyThings = {
    incidentWizard : ['page1.html','page2.html','page3.html'],
    magicWizard: ['page1.html','page2.html','page3.html']
}; 
```

然后你的函数（它缺少一个名称），变成：

```
function someMethod(next, wizardname) {

    wizardName = wizardName + 'Wizard';
    var wizSize = wizardyThings[wizardName].length;

    var wizardPOS = jQuery.inArray(loadedURL, wizardyThings[wizardName]);
    ...
} 
```

# perl - 如何处理上传/下载弹窗

> ID：11158856
> 
> 赞同：1
> 
> 时间：2012-06-22T15:02:52.833
> 
> 标签：perl, selenium

我正在使用 Perl 自动化网站`WWW::Selenium`。我想知道如何处理单击上传或下载按钮后出现的弹出窗口。

单击上传按钮时，会打开一个对话框窗口以选择文件。单击下载按钮时，将打开一个对话框窗口以选择要保存文件的位置。

上述场景如何实现自动化`WWW::Selenium`？

**代码**

```
sub import_files()
{
   # http://mygengo.com/string/p/<proj_name>-1/admin/languages/import/en
   $url = $MYGENGO_STRING_PROJECT_URL . $_[0] . "-1" . $IMPORT_FILES;
   $sel->open($url);

   $sel->attach_file("class=qq-upload-button string-file-import", 
    "http://localhost/1.php"); # But this does not open the file browse window

   $sel->click("class=qq-upload-button string-file-import");
   $sel->wait_for_page_to_load(9000); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:36:47.740

上传场景可以通过`send_keys`命令轻松解决

```
driver.find_element_by_xpath("//*[@id='upload-import-link']/input").send_keys(file) 
```

# c - c 按值传递数组？

> ID：11158858
> 
> 赞同：1
> 
> 时间：2012-06-22T15:03:02.433
> 
> 标签：c, arrays

我有这个作业问题：

A部分

编写一个 C 程序，测试以下数据类型是通过引用还是按值传递，并将发现的内容打印到终端：

*   整数
*   整数数组

假设，如果你的程序发现一个 int 是按值传递的，而一个 int 数组是按值传递的，那么它应该产生如下输出： int: pass-by-value array of ints: pass-by-value

我理解的 int ，但我没有得到的是：

1.  我认为传递数组的唯一方法是传递数组中第一个值的地址
2.  这算作按值传递还是按引用传递？（[按值将数组传递给函数](https://stackoverflow.com/questions/4774456/pass-an-array-to-a-function-by-value)让我很困惑）
3.  关于我如何做到这一点的提示？我假设像将引用传递给另一个函数，操纵它，看看它是否改变了，但我不确定......

编辑：如果有人用一个具体的例子向我解释这一点可能会有所帮助，例如：假设我有一个长度为 10 个整数的数组存储在内存位置 0 （是的，我知道，这不是现实生活，而是为了示例。 ..)。如果该数组通过引用传递会是什么样子？如果按值传递会是什么样子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:05:30.197

> **这算作按值传递还是按引用传递？**

当您说*“将数组传递给函数”*时，实际上将指向第一个元素的指针传递给函数。这允许被调用的函数修改数组的内容。由于没有创建数组的副本，因此可以说数组是通过引用传递的。

> **关于我如何做到这一点的提示？**

测试应该是：

1.  在 中创建一个本地数组`main()`。
2.  用已知模式填充它
3.  打印数组的内容
4.  将数组传递给函数
5.  在函数体内部修改数组的内容
6.  打印函数内部的数组
7.  再次`main()`打印本地数组的内容
8.  如果输出`6`并`7`匹配。你有证据。

> **如何按值传递数组？**

按值传递数组的唯一可能方法是将其包装在结构中。
**[在线样品](http://ideone.com/BJWw6)**：

```
#include <iostream>

struct myArrayWrapper 
{
    int m_array[5];
};

void doSomething(myArrayWrapper a) 
{
    int* A = a.m_array;

    //Display array contents
    std::cout<<"\nIn Function Before Modification\n";
    for (size_t j = 0; j < 5; ++j)
       std::cout << ' ' << A[j];
    std::cout << std::endl;

     //Modify the array
     for (size_t j = 0; j < 5; ++j)
       A[j] = 100;

    std::cout<<"\nIn Function After Modification\n";
    //Display array contents
    for (size_t j = 0; j < 5; ++j)
       std::cout << ' ' << A[j];
    std::cout << std::endl;

}

int main()
{
    myArrayWrapper obj;
    obj.m_array[0] = 0;
    obj.m_array[1] = 1;
    obj.m_array[2] = 2;
    obj.m_array[3] = 3;
    obj.m_array[4] = 4;
    doSomething(obj);

    //Display array contents
    std::cout<<"\nIn Main\n";
    for (size_t j = 0; j < 5; ++j)
       std::cout << ' ' << obj.m_array[j];
    std::cout << std::endl;

    return 0; 
} 
```

**输出：**

```
In Function Before Modification
 0 1 2 3 4

In Function After Modification
 100 100 100 100 100

In Main
 0 1 2 3 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:06:18.687

C 仅按值将参数传递给函数。

来自强大的 Kernighan & Ritchie，第 2 版：

> （1.8，按值调用）“在C中所有函数参数都是按“值”传递的

# jquery - 如何使用 jRecorder 和 Ruby on Rails 将录制的音频文件上传到 Amazon S3

> ID：11158859
> 
> 赞同：0
> 
> 时间：2012-06-22T15:03:08.643
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, audio, amazon-s3

[jRecorder](http://www.sajithmr.me/jrecorder-jquery)是一个用于录音（[文档](http://www.sajithmr.me/jrecorder/index.html)）的 jQuery 插件。该插件使用浏览器的 Flash 播放器录制音频文件并将文件保存在浏览器临时文件中，当用户完成录制时，它将文件作为 POST 发送到 PHP 服务器（一个 php 文件）。但是，我想修改插件以使用 Ruby on Rails 将文件发送到 Amazon S3 存储桶。

我将如何将录制的文件发送到 RoR 中的 [my-amazons3-bucket]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:22:34.777

只需更改插件中的主机参数以指向将接受帖子的 Rails 路由。这是 AWS Ruby Gem [http://amazon.rubyforge.org/](http://amazon.rubyforge.org/)

因此，您将拥有一个可以接受帖子的控制器，然后您只需将发布的文件上传到您的 S3 存储桶

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T02:22:16.837

您可以将 Carrierwave 与商店选项 Fog 一起使用。您需要在上传程序中使用 aws 凭证初始化您的存储桶。

```
 self.storage :fog
    self.fog_credentials = {
      :provider               => 'AWS',
      :aws_access_key_id      => 'youraccesskeyid',
      :aws_secret_access_key  => 'yourawssecretaccesskey',
      :region                 => 'yourbucketregion'
    }
    self.fog_directory = "yourbucketname" 
```

# python - 在 PyGTK 中动态修改/刷新菜单内容

> ID：11158860
> 
> 赞同：3
> 
> 时间：2012-06-22T15:03:10.733
> 
> 标签：python, gtk, pygtk

我正在尝试在我用 PyGTK 编写的 GUI 菜单中实现最近打开的项目列表。我像这样初始化菜单：

```
self.filemenu = gtk.Menu()

self.init_file_menu()

self.fileitem = gtk.MenuItem("File")
self.fileitem.set_submenu(self.filemenu)
menubar = gtk.MenuBar()
menubar.append(self.fileitem)
outerframe.pack_start(menubar, False, False)

def init_file_menu(self):
    for widget in self.filemenu.get_children():
        self.filemenu.remove(widget)

    openitem = gtk.MenuItem("Open")
    self.filemenu.append(openitem)
    openitem.connect("activate", self.open_file)

    self.filemenu.append(gtk.SeparatorMenuItem())

    for recentitem in self.settings['recentfiles']:
        item = gtk.MenuItem(os.path.basename(recentitem))
        self.filemenu.append(item)
        item.connect("activate", self.open_file, recentitem)
    self.filemenu.show() 
```

self.settings['recentitems'] 是打开文件时修改的双端队列；然后再次调用 init_file_menu。我的目标是清空菜单，然后以正确的顺序用正确的项目重新填充它。此代码在启动时填充菜单时工作正常。但是由于某种原因，虽然对 Menu.remove 的调用都可以正常工作并清空菜单，但附加调用不会将项目重新添加到其中并且它仍然是空的。如果我调用它的 get_children 方法，我会看到它们都在内部，但接口尚未更新以反映这一点。如何刷新显示的菜单并使最近的项目列表按预期工作？

如果这是我正在寻找的，我也会接受有关如何使用[RecentChooserMenu小部件的指导。](http://developer.gnome.org/pygtk/stable/class-gtkrecentchoosermenu.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:22:36.297

由于 gtk.Menu 是一个容器，因此您需要将`.show`每个项目添加到菜单后（因为您不想调用`menu.show_all()`显示菜单本身的快捷方式），所以您`item.show()`只需在`menu.append(item)`

# pdf - 保存 DiffPDF / ComparePDF 命令行的输出。- 比较 PDF 的文件夹

> ID：11158862
> 
> 赞同：3
> 
> 时间：2012-06-22T15:03:24.993
> 
> 标签：pdf, automation, comparison, imagemagick, diff

我们必须将一个文件夹中的大约 1500 个 PDF 与另一个文件夹中的 1500 个 PDF 进行比较，以检查视觉差异。我们发现适用于 Windows 的 DiffPDF（和 comparePDF 命令行版本）比我们的自动 Acrobat Pro 比较快得多。

到目前为止，我使用过：

`comparepdf -v=2 =c=a old.pdf new.pdf`

但问题在于它只返回“这些文件不同”。有谁知道从命令行保存输出的任何方法？您可以从 GUI 执行此操作，但这意味着使用类似 TestCOmplete 之类的东西来自动化它:(

或者有没有更好的方法来比较 2 个 PDF 的视觉 - 输出/突出显示/

C# .net 库的奖励积分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T18:47:21.443

你可以看看这些类似问题的答案：

*   [**Linux命令行上的PDF比较**](https://stackoverflow.com/a/6494387/359307)
*   [**如何通过命令行比较两个pdf文件**](https://stackoverflow.com/a/11005340/359307)
*   [**如何对绘制 PDF 图形的 Python 函数进行单元测试？**](https://stackoverflow.com/a/4675060/359307)

但是，我不知道这些中的任何一个是否会比您的自动 Acrobat Pro 比较执行得更快...如果您发现了，请告诉我，好吗？

### 捷径：

为简单起见，假设您要比较的输入文件足够相似，并且每个文件**只有 1 页**。（对于多页输入，请扩展此答案的基本思想...）

任何此类比较归结为以下两个最基本的命令：

```
compare.exe ^
    %input1% ^
    %input2% ^
    -compose src ^
    %output%.tmp.pdf 
```

和

```
pdftk.exe ^
    %output%.tmp.pdf ^
    background %input1% ^
    output %output%.pdf 
```

*   第一个命令生成一个 PDF，其中所有差分像素都以红色着色。（此处使用默认分辨率，72 dpi。要获得更细粒度的像素差异视图，请添加`-density 200` *（这意味着：200 dpi）*或更高——但您的处理时间将相应增加，输出所需的磁盘空间也会相应增加...)
*   第二个命令尝试将生成的 PDF 与取自 ${input1} 的背景合并。

或者，您可以`-verbose -debug coder`在`compare`命令之后添加以更好地了解正在发生的事情。

`compare.exe`是一个命令行工具，来自伟大的 ImageMagick 实用程序系列（适用于 Linux、Windows、Unix 和 MacOSX）。但它需要安装 Ghostscript 才能用作“代表”，以便能够处理 PDF 输入。 `pdftk.exe`也是一个命令行实用程序，可用于相同的平台。两者都是免费软件。

在第一个命令之后，您将有一个输出文件，其中**只有**红色像素，在页面上发现了差异。

在第二个命令之后，您将在第一个输入 PDF 的上下文中得到一个包含所有红色“差异”像素的输出。

### 示例输出：

以下是两个 1 页 PDF 文件的屏幕截图，它们的内容有所不同：

![示例 PDF 文件 1](../Images/ea8ecea08f6c1d9c8dbe7ec6c27f6a78.png) ![示例 PDF 文件 2](../Images/e8cdb6c99b02c43eea86da03b597ea73.png)

* * *

以下是上述两个命令产生的输出截图：

*   *左侧*显示中间结果（在第一个命令之后），只有差异像素显示为红色（相同像素为白色）。
*   *右侧*的屏幕截图显示了红色差异像素，但这次将输入的 PDF 文件编号 1 作为（灰色）背景（在第二个命令之后）。

![仅红色差异像素； 相同的像素是白色的](../Images/5754bd2d928358033d1119630566274a.png) ![以 PDF 文件 1 作为背景上下文的红色差异像素](../Images/3b12d9959511b4f17b14753a4358e2ec.png)

* * *

（PDF 输入文件由[**精美的 DiffPDF**](http://qtrac.eu/diffpdf.html)工具的作者 Mark Summerfield 提供。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T22:50:18.763

我遇到了同样的问题，[diffpdf 又快又好](http://www.qtrac.eu/diffpdf.html)，但只有 GUI。[comparepdf] 是控制台之一，但只报告退出代码（本身没有差异）。[diff-pdf] 有控制台模式和 diff.pdf 输出，但速度慢，输出不友好。

我试图将所需的代码添加到 diffpdf，你可以在这里找到它：http: [//github.com/taurus-forever/diffpdf-console](http://github.com/taurus-forever/diffpdf-console)

# c# - 发射映射器和通用方法

> ID：11158864
> 
> 赞同：1
> 
> 时间：2012-06-22T15:03:35.627
> 
> 标签：c#, .net, mapping, emitmapper

当我尝试保存在数据库属性中时，Emit mapper 出现了一些问题。
首先我映射了这个类（它工作得很好）：

```
[Serializable]
public class ProfileProperty 
{
    public string PropertyValue { get; set; }

    public bool IsVisible { get; set; }

    public ProfileProperty(string value, bool isVisible = true)
    {
        this.PropertyValue = value;
        this.IsVisible = isVisible;
    }

    public ProfileProperty()
    {
        this.IsVisible = true;
    }
} 
```

我在这里映射：

```
var mapper = ObjectMapperManager.DefaultInstance.GetMapper<PollmericaProfile, ProfileModel>();
ProfileModel prof = new ProfileModel();
if (x.User != null)
{
    prof = mapper.Map(x);
} 
```

但有些要求不需要`string`属性。这就是为什么我决定写这个：

```
[Serializable]
public class ProfileProperty 
{
    public object PropertyValue { get; set; }

    public bool IsVisible { get; set; }

    public ProfileProperty(object value, bool isVisible = true)
    {
        this.PropertyValue = value;
        this.IsVisible = isVisible;
    }

    public ProfileProperty()
    {
        this.IsVisible = true;
    }

    public T GetValue<T>()
    {
        return (T)this.PropertyValue;
    }
} 
```

并且所有映射都不起作用=（
如果你可以，请帮助我。如果你愿意，我可以提供必要的信息

。PS说实话，我想转移到一个字符串并返回，所以至少可以工作

UPD：我试过没有方法`public T GetValue<T>()`......它有效......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:21:02.247

对此感到抱歉，但我很快就找到了答案。
在映射中，我必须这样写：

```
var mapper = ObjectMapperManager
               .DefaultInstance
               .GetMapper<PollmericaProfile, ProfileModel>( new DefaultMapConfig()
               .IgnoreMembers<PollmericaProfile, ProfileModel>(new string[] { "GetValue" }));
ProfileModel prof = new ProfileModel();
if (x.User != null)
{
    prof = mapper.Map(x);
} 
```

# xslt - 如何重复 XSLT 同名子节点？

> ID：11158865
> 
> 赞同：0
> 
> 时间：2012-06-22T15:03:40.513
> 
> 标签：xslt

我有一个要从中创建报告的事务的 xml 转储。（简化的）xml 结构如下所示：

```
Subject
  id
  name
  license
  event id=key
    result
    eventtype
    date
    action
  charge id=key
    result
    code
    date
 ...etc 
```

每个主题只有一个 ID、名称和许可证；但是可能会有很多事件，并且每个主题都有很多费用——每一个都有不同的结果。

报告输出是一个表格类型，每个主题都有一个名称、ID、许可证的标题，以及标题下方列出的多个数据事务块。每个数据块根据事务类型具有不同的值和结构。

它适用于标头和每种数据交易类型，但只有第一个事件交易和第一个收费交易会打印出来。

（简化的）xsl 看起来像：

```
<xsl:for-each select="file/subject">
  <xsl:if test="not (@subject = preceding-sibling::subject[1])">
    <table width="754" border="2" cellpadding="0">
      <tr>
        <td width="172">ctn: <strong><xsl:value-of select="id"/></strong></td>
        <td width="364">defendant: <strong><xsl:value-of select="name"/></strong></td>
        <td width="200">sid: <strong><xsl:value-of select="license"/></strong></td>
        </tr>
    </table>
  </xsl:if>
  <blockquote>
    <xsl:if test="event/eventType != ' '">
      <table width="695" border="1">
        <tr>
          <td>Event<xsl:value-of select="event/result"/></td>
          <td>Eventtype<xsl:value-of select="event/eventtype"/></td>
          <td>Date<xsl:value-of select="event/date"/></td>
        </tr>
      </table>
    </xsl:if>
    <xsl:if test="charge/code != ' '">
      <table width="695" border="1">
        <tr>
          <td>Charge<xsl:value-of select="charge/result"/></td>
          <td>Code<xsl:value-of select="charge/code"/></td>
          <td>Date<xsl:value-of select="charge/date"/></td>
        </tr>
      </table>
    </xsl:if>
  </blockquote>
</xsl:for-each> 
```

我假设我需要一个额外的 for-each 来扫描子节点，但添加额外的循环只会给我标题。

有什么想法吗？

（感谢您花时间阅读本文。：o）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:20:22.273

在 XSLT 中尽可能避免使用 for-each，而是将节点应用于转换模板。

我想出了这个，你可以在[这个操场上](http://www.xmlplayground.com/a8PbrS)运行它——不确定它是否是你所追求的。

```
 <!-- root and static content -->
    <xsl:template match="/">
        <xsl:apply-templates select='root/Subject' />   
    </xsl:template>

    <!-- iteration content: subject -->
    <xsl:template match='Subject'>
        <table>
            <tr>
                <td>ctn: <strong><xsl:value-of select="id"/></strong></td>
                <td>defendant: <strong><xsl:value-of select="name"/></strong></td>
                <td>sid: <strong><xsl:value-of select="license"/></strong></td>
            </tr>
        </table>
        <xsl:apply-templates select='event' />
        <xsl:apply-templates select='charge' />
    </xsl:template>

    <!-- iteration content: event -->
    <xsl:template match='event'>
        <blockquote>
            <table>
                <tr>
                    <td>Event: <xsl:value-of select="result"/></td>
                    <td>Event type: <xsl:value-of select="eventtype"/></td>
                    <td>Date: <xsl:value-of select="date"/></td>
                </tr>
            </table>
        </blockquote>
    </xsl:template>

    <!-- iteration content: charge -->
    <xsl:template match='charge'>
        <blockquote>
            <table>
                <tr>
                    <td>Charge: <xsl:value-of select="result"/></td>
                    <td>Code: <xsl:value-of select="code"/></td>
                    <td>Date: <xsl:value-of select="date"/></td>
                </tr>
            </table>
        </blockquote>
    </xsl:template> 
```

# c - 使用 c 从文件中读取特定范围的行

> ID：11158869
> 
> 赞同：2
> 
> 时间：2012-06-22T15:03:48.160
> 
> 标签：c, linux, file, file-io

我在一个文件中有以下内容：

```
hhasfghgsafjgfhgfhjf
gashghfdgdfhgfhjasgfgfhsgfjdg
jfshafghgfgfhfsghfgffsjgfj
.
.
.
.
.
startread
hajshjsfhajfhjkashfjf
hasjgfhgHGASFHGSHF
hsafghfsaghgf
.
.
.
.
.
stopread
.
.
.
.
.
.
jsfjhfhjgfsjhfgjhsajhdsa
jhasjhsdabjhsagshaasgjasdhjk
jkdsdsahghjdashjsfahjfsd 
```

我需要读取从下一行`startread`到使用 ac 代码的上一行的行`stopread`并将其存储到一个字符串变量中（当然`\n`每个换行符都有一个）。我怎样才能做到这一点？我用过`fgets(line,sizeof(line),file);`，但它从头开始阅读。我没有确切的行号来开始和停止读取，因为该文件是由另一个 C 代码编写的。但是有这些标识符`startread`并`stopread`确定从哪里开始阅读。运行平台为linux。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:06:59.483

用于[`strcmp()`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)检测`startread`和`stopread`。忽略所有读取的行，直到`"startread"`被读取，然后存储所有行，直到`"stopread"`被读取：

```
/* Read until "startread". */
char line[1024];
while (fgets(line, sizeof(line), file) &&
       0 != strcmp(line, "startread\n"));

/* Read until "stopread", only if "startread" found. */
if (0 == strcmp(line, "startread\n"))
{
    while (fgets(line, sizeof(line), file) &&
           0 != strcmp(line, "stopread\n"))
    {
        /* Do something with 'line'. */
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:19:15.193

```
 #define MAX_BUF_LEN 1000    
    int flag=0;
    while(fgets(buf, MAX_BUF_LEN, file) != NULL){
       if(strncmp(buf, "startread", strlen("startread")) == 0){
          flag=1;
       }
       else if (strncmp(buf, "stopread", strlen("stopread")) == 0){
          flag=0;
       }

       if(flag){
          strncpy(line, buf, strlen(buf));
         // strncat(line, '\n', strlen('\n'));
       }

    // that's all!
    }
    fclose(file); 
```

这应该有效。

# ruby-on-rails - 将 Omniauth 登录（来自多个外部 ID 提供商之一）与我们的 OAuth2 安全 API 相结合

> ID：11158872
> 
> 赞同：2
> 
> 时间：2012-06-22T15:03:54.417
> 
> 标签：ruby-on-rails, backbone.js, oauth-2.0, omniauth

我正在将一个单一的 Rails 应用程序重构为一个带有 Backbone.js 前端的纯 JSON API。其他智能手机应用程序前端将在不久的将来跟进，向公众开放 API 的可能性已在办公室周围讨论。

出于这个原因，我认为我会在第一轮就正确地完成这项工作，并使用 OAuth 2.0 保护我们的 REST API，以便基于它构建的每个应用程序 - 包括我们内部构建的应用程序，都是“只是另一个 OAuth 客户端”，这也将为我们提供通常的细节，例如速率限制、密钥撤销和对可以免费操作的资源的限制。

到目前为止，我一直在关注 Doorkeeper gem 上的[Railscasts 集](http://railscasts.com/episodes/353-oauth-with-doorkeeper)（警告，这是一个专业集）来保护我们自己的 API 并将我们面向用户的 Web 应用程序注册为客户端。

现在有趣的部分 - 原始应用程序允许用户通过 Omniauth gem 通过 Facebook、Google、Twitter 等登录。据我了解，OAuth 关注的是授权客户端，而不是用户身份验证，所以我们仍然需要我们已经拥有的 OmniAuth 流程。

但：

*   “Omniauthing”控制器应该在哪里——在 API 或 Web 客户端中？
*   应该如何将用于验证用户的“Omniauth 位”连接到“OAuth 位”？

**更新**：客户端可能只是一个 Backbone 应用程序，或者它可能是一个 Backbone 应用程序与一个“瘦 Rails 网站包装器”配对，它没有自己的 DB，但使用 ActiveResource 在 Backbone 应用程序和 API 之间进行调解。这样做的好处是让我们处理“可以保守秘密的客户”。在这种情况下，“Omniauthing”控制器可以存在于 Rails 客户端应用程序中（如果有任何用处）。

一个[类似的 SO 问题](https://stackoverflow.com/questions/10456633/using-a-facebook-access-token-as-the-resource-owner-credentials-in-oauth2-0)仅讨论了使用 Facebook 登录，但是虽然答案很明确，说应该只有一个授权服务器 - Facebook - 它没有说明将用户身份验证的结果提供给资源服务器。

# javascript - 将 Facebook“阅读”按钮添加到文章页面

> ID：11158873
> 
> 赞同：0
> 
> 时间：2012-06-22T15:03:54.727
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-c#-sdk

我正在做一些我认为相当简单的事情，在新闻页面上的所有文章下方添加一个阅读按钮，该按钮将发布到活动提要... 作为 Facebook API 的新手，我发现查找当前示例并不是简单的。

- 应用程序已创建 - 功能打开的图形对象 - 我在页面上有登录

但是，我继续收到此错误“消息：(#100) 操作类型新闻：读取未获批准，因此应用程序 555555 只能发布给应用程序的管理员、开发人员和测试人员。用户 5555555 不是这些角色之一。”

以错误的方式接近这个吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head prefix="og:h ttp://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">

    <meta property="fb:app_id" content="5555555" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://name.page.com/default.aspx" />
    <meta property="og:title" content="Second Article" />
    <meta property="og:image" content="http://ogp.me/logo.png" />
    <meta property="og:description" content="Second Article Description" />
    <meta property="article:author" content="http://name.page.com/">
    <meta property="article:section" content="Article" />
    <meta property="article:tag" content="Name" />

    <title>FACEBOOK</title>
    <link href="css/main.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="content" class="column">
        <div class="article">
            <form id="form1" runat="server">
                <asp:Button ID="Button1" runat="server" Text="Facebook Login" OnClick="Button1_Click" />
            </form>
        </div>
    </div>

    <div id="fb-root"></div>

    <script type="text/javascript">

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));

        // Init the SDK upon load
        window.fbAsyncInit = function () {
            FB.init({
                appId: '5555555', // App ID
                channelUrl: '//' + window.location.hostname + '/channel.html', // Path to your Channel File
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });

            // listen for and handle auth.statusChange events
            FB.Event.subscribe('auth.statusChange', function (response) {
                if (response.authResponse) {

                    // user has auth'd your app and is logged into Facebook
                    FB.api('/me', function (me) {
                        if (me.name) {
                            document.getElementById('auth-displayname').innerHTML = me.name;
                        }
                    })
                    document.getElementById('auth-loggedout').style.display = 'none';
                    document.getElementById('auth-loggedin').style.display = 'block';
                } else {

                    // user has not auth'd your app, or is not logged into Facebook
                    document.getElementById('auth-loggedout').style.display = 'block';
                    document.getElementById('auth-loggedin').style.display = 'none';
                }
            });

            // respond to clicks on the login and logout links
            document.getElementById('auth-loginlink').addEventListener('click', function () {
                FB.login();
            });
            document.getElementById('auth-logoutlink').addEventListener('click', function () {
                FB.logout();
            });
        }

        //Second Article
        function secondArticle() {

            //GET LOGIN STATUS
            FB.getLoginStatus(function (response) {
                if (response.status === 'connected') {
                    // the user is logged in and has authenticated your
                    // app, and response.authResponse supplies
                    // the user's ID, a valid access token, a signed
                    // request, and the time the access token 
                    // and signed request each expire
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;
                    alert(accessToken);

                    FB.api('me/news.reads' + '?article=http://facebook.Name.com/default.aspx&access_token=' + accessToken, 'post',

                    function (response) {
                        var msg = 'Error occured';
                        if (!response || response.error) {
                            if (response.error) {
                                msg += "\n\nType: " + response.error.type + "\n\nMessage: " + response.error.message;
                            }
                            alert(msg);
                        }
                        else {
                            alert('Post was successful! Action ID: ' + response.id);
                        }
                    });

                } else if (response.status === 'not_authorized') {
                    // the user is logged in to Facebook, 
                    // but has not authenticated your app
                    alert("Authorize")
                } else {
                    // the user isn't logged in to Facebook.

                    alert("Login")
                }
            });
        }

    </script>

    <div id="contentContainer">
        <div id="login-container">           
            <h3>Login from site</h3>
            <div id="auth-status">
                <div id="auth-loggedout">
                    <a href="#" id="auth-loginlink">Login</a>
                </div>
                <div id="auth-loggedin" style="display: none">
                    Hi, <span id="auth-displayname"></span>(<a href="#" id="auth-logoutlink">logout</a>)
                </div>
            </div>
        </div>
        <div id="content" class="column">
            <div class="article">
                <h3>Name Article V2</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut magna ligula, malesuada pellentesque mollis malesuada, varius in dolor. Aenean mollis nisl condimentum felis commodo at tincidunt purus interdum. Vivamus consectetur sodales quam, volutpat feugiat sapien lobortis pulvinar. Proin consectetur blandit libero tristique dictum. Fusce consectetur massa non magna convallis ac congue felis sagittis. Nulla nec turpis dui, vitae egestas quam. Proin lobortis dictum faucibus. Aenean eget elit nec quam imperdiet fermentum a vel magna. Ut viverra eros sit amet nibh varius lacinia. Duis porttitor augue condimentum arcu bibendum ut accumsan turpis lobortis. Nam vulputate, mauris non fermentum ornare, dui metus commodo odio, id tempor neque leo vel turpis. Donec ultricies imperdiet tincidunt.</p>
                <p>Nulla facilisi. Donec laoreet lacinia vulputate. Proin accumsan commodo est, id aliquam dolor gravida eget. Duis quam nisl, rutrum vel lobortis sit amet, condimentum id purus. Integer ut dignissim augue. Fusce bibendum tempus elit, in fermentum odio sagittis et. Sed luctus viverra urna ac porttitor. Duis erat nisi, porta eu cursus sed, posuere at est. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel erat vel diam vehicula posuere eu eu leo. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In hac habitasse platea dictumst. Nam mattis fringilla mi.</p>
                <p>Etiam id mi ipsum, non aliquam velit. Proin rutrum ante eget urna euismod accumsan. Nam id velit neque. Nunc aliquam, elit non porta aliquet, nisi orci malesuada tortor, quis interdum nisl mi a felis. Duis tristique, elit eu facilisis egestas, sem sapien porta orci, et imperdiet augue est ac velit. Nulla facilisi. Nam enim enim, sollicitudin at elementum vitae, varius vulputate magna. Nullam posuere lorem sit amet magna euismod sit amet ornare nisl tempus. </p>
                <input type="button" value="Read" onclick="secondArticle();" />
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:43:37.173

您必须提交要在应用程序中使用的任何 Open Graph 操作以供*批准*（即使它是内置操作）。

在您定义操作的应用程序设置中，有一些链接可将您带到审批流程。

有关更多详细信息，另请参阅：[https ://developers.facebook.com/docs/opengraph/opengraph-approval/](https://developers.facebook.com/docs/opengraph/opengraph-approval/)

# javascript - 如何在元素的默认行为后运行点击功能

> ID：11158874
> 
> 赞同：1
> 
> 时间：2012-06-22T15:03:58.813
> 
> 标签：javascript, jquery, html

我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script src="jquery.js"></script>
<script>
$(function(){
    $("body").on("click",".mes_sel",function(){
        if($(".mes_sel:checked").length==0){
            alert("Checked");
        }
        else alert("Not Checked");
    });
});
</script></head>
<body>
<input type="checkbox" class="mes_sel">
</body>
</html> 
```

未选中文本框时会发出警报，因为 onclick 在检查复选框之前正在运行。如何在检查/取消选中输入后运行单击事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:07:50.797

用于`change`：

```
$(function(){
    $(".mes_sel").on("change", function(){
        if($(this).is(':checked')){
            alert("Checked");
        } else {
            alert("Not Checked");
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/MusFh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:12:30.397

试试这个：

```
$("body").on("click", ".mes_sel", function() {
    if ($(this).is(":checked")) {
        alert("Checked");
    }
    else alert("Not Checked");
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/WCUh6/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:13:35.643

不久前我遇到了这个问题——我还发现不同的浏览器处理这个问题的方式不同。如果我没记错的话，Chrome 是最严重的违规者。

这不一定是最好的解决方案，但您可以将自定义属性附加到每个复选框，例如“isChecked”，然后将您的函数基于此属性，如下所示：

```
if ($("mes_sel").attr("isChecked") == "true") { ... } 
```

Like I said, not the best solution as you will have to manually flip the "isChecked" attribute in order to stay consistent with the actual checked value of the checkbox, but it will work if nothing more elegant will work for you.

If you'd like an example of this , check out this jsFiddle:

[http://jsfiddle.net/NathanFriend/GAP2j/](http://jsfiddle.net/NathanFriend/GAP2j/)

This turns regular radio buttons into "toggleable" radio buttons - I was forced to use this custom attribute method because of the different way browsers execute `onclick` events.

# assembly - PowerPC MPC8245 JTAG

> ID：11158885
> 
> 赞同：0
> 
> 时间：2012-06-22T15:04:31.090
> 
> 标签：assembly, powerpc, jtag

我正在开发一个 MPC8245，一个 603e 系列处理器。我正在使用 BDI2000 JTAG 设备来调试启动代码。

我遇到了一个奇怪的问题。

单步运行正常，直到配置寄存器 MCCR1 (0xF0) 被写入。写入数据值后，所有 ROM 现在都读回 0x00000000。单步无法继续。

MEMGO 位未设置为写入 MCCR1 的数据的一部分。

这是一个限制吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:40:18.187

看来，JTAG 读取 MEMGO 位低的存储器是一个限制。

BDI2000 JTAG 设备似乎要求 MPC8245 内存控制器处于活动状态才能从 ROM 或 RAM 中读取数据，尽管文档会让人认为 MEMGO 位仅用于 SDRAM 而不是 ROM。

如果为 BDI2000 创建的配置没有 [INIT] 部分，则 MEMGO 位的默认值在上电时为低，BDI2000 无法读取 ROM。读取所有零。

因此，只要 MEMGO 位为低，JTAG 器件就不能用于单步或读取存储器。

# c - C - 限制结构范围

> ID：11158888
> 
> 赞同：6
> 
> 时间：2012-06-22T15:04:38.953
> 
> 标签：c, struct, scope

我在 .c 文件中有这个结构：

```
struct entry {
    int position;
    int length;
    struct entry *node;
}; 
```

现在，如何将此结构*布局*的范围限制为主机文件，以便在另一个文件中为新结构*布局*使用相同名称时，不会出现“重新定义”错误？

我尝试在*struct*之前使用*static*，但似乎没有用（我也没有意义）。顺便说一句，[这个问题](https://stackoverflow.com/questions/7059800/why-do-structure-definitions-have-internal-linkage)对我来说似乎无效，因为在跨链接文件（使用 MinGW）复制*stuct 条目时出现“重新定义”错误。*

 **--- 编辑 ---
对于那些想了解更多的人：[这里](https://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c)和[这里](https://stackoverflow.com/questions/3793952/understanding-c-namespaces)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T15:10:37.890

您不会收到重新定义错误。类型对于*翻译单元*是本地的，并且没有任何可见性。只有函数和数据对象具有可见性。

如果您遇到重新定义错误，您必须在标题或其他包含的文件中使用该名称，以便它最终在同一个翻译单元中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:11:49.343

听起来你想`struct entry`在不同的文件中表达不同的意思。没关系：只需将定义结构的每个版本的代码放在不同的`.c`文件中，并确保永远不要从另一个 c 文件中包含 ac 文件或从头文件中包含 ac 文件。

每个翻译单元中应该只存在一个结构定义。**

# javascript - 在jQuery中获取滚轮数量

> ID：11158893
> 
> 赞同：7
> 
> 时间：2012-06-22T15:04:53.587
> 
> 标签：javascript, jquery, mousewheel

将滚动事件绑定到对象后，如何获取用户滚动的量？

```
$(selector).scroll(function(e) {
    // get scroll amount
}); 
```

Firefox 和 Opera 具有该属性`detail`，而 IE、Safari 和 Opera 具有`wheelData`. 更糟糕的是，Firefox 和 Opera 的评分是 -3 到 3，而 IE 和 Safari 的评分是 -120 到 120。

jQuery 是否为此提供了一个单一的规范化属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T15:07:12.497

使用 jQuery [.scrollTop()](http://api.jquery.com/scrollTop/)并保存滚动事件之间的值，然后在下一个滚动事件中获取增量。

```
var old_scroll_top = 0;

$(document).scroll(function() {
  var current_scroll_top = $(document).scrollTop();
  var scroll_delta = current_scroll_top - old_scroll_top;

  // do something with current_scroll_top and scroll_delta

  old_scroll_top = current_scroll_top;
}); 
```

**示例：** [jsFiddle](http://jsfiddle.net/pH93b/18/)

**更新：**

[这](http://jsfiddle.net/868g5/31/)是第二个示例，它显示了如何拥有一个根据 scoll 事件更新的画布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:09:24.943

您可以为此使用 scrollTop 吗？

```
var amount = $(window).scrollTop(); 
```

# java - 有没有办法在文本字段上的 netbeans 上自动将 \ 符号转换为 java 中的 /

> ID：11158894
> 
> 赞同：0
> 
> 时间：2012-06-22T15:04:58.277
> 
> 标签：java

有没有办法在文本字段上的 netbeans 上自动将 \ 符号转换为 java 中的 / 。这样做的目的是将图像上传到数据库。我通过文件选择器获取图像位置，然后将位置（地址）输出到文本字段，然后用户可以通过单击按钮上传。基本上我想在设置 AddressText 之前将字符串变量“info”每个 \ 转换为 /

我的代码是

```
 int returnVal = fileChooser.showOpenDialog(this);

     if (returnVal == JFileChooser.APPROVE_OPTION) {
     File file = fileChooser.getSelectedFile();

        // What to do with the file, e.g. display it in a TextArea
       String info =file.getAbsolutePath();

       AddressText.setText(info);

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:08:15.950

我使用 DocumentListener 做过类似的事情。当您获得更新时，您可以搜索 / 并替换它。

[http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)

文档侦听器有 3 种方法。你真的只需要实现 2 - 删除/删除一个你可以留空

在其他方面，当您收到文档更改的消息时，您应该在您的文本字段上调用 ​​getText()，查找/替换您的字符，并使用修改后的文本调用 setText

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:12:45.830

你总是有可能使用

`... stringMyPath.replaceAll("\\","/");`

但是Java很好地解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:28:22.447

它不必是 / 在 Java 中工作。有时使用 / 更方便，因为 \ 在某些情况下必须转义，因为它具有特殊含义。

听起来您的数据库要求您在构建 INSERT 或 UPDATE 字符串时转义 \ 字符。你不应该这样做。您应该使用参数化查询。如果您使用参数化查询，那么您不必转义文本，并且您不会容易受到 SQL 注入攻击。在 Java 中，您将使用 PreparedStatement 对象来执行此操作。

# windows-server-2008 - EXECUTE master.dbo.xp_delete_file 文件夹权限问题

> ID：11158895
> 
> 赞同：1
> 
> 时间：2012-06-22T15:04:59.090
> 
> 标签：windows-server-2008, sql-server-2008

我正在尝试运行维护清理任务以删除超过 2 天的 .bak 文件（足够简单）。

一直在尝试各种 .bak、BAK、.*. 并编辑路径，但即使我收到“作业成功”日志消息，文件仍然没有被删除。

我正处于我认为这是文件夹权限问题的地步。

如何确保我的 SA 具有从文件夹中删除文件的适当权限？

T-SQL: 执行 master.dbo.xp_delete_file 0,N'D:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\Backup\',N'BAK',N'2012-06-21T11:35:59 ',1

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T12:18:32.687

我总是在 sql server 上有一些（在你的情况下是 sa）特权的域帐户。然后将域登录添加到文件夹。

# javascript - 在javascript模块中访问模块变量

> ID：11158897
> 
> 赞同：1
> 
> 时间：2012-06-22T15:05:01.757
> 
> 标签：javascript

我有一个简单的 JavaScript 模块如下：

```
var QCH = (function($jquery, undefined) {

      var QCH = { };
      var someDivId;

      QCH.Init = function(someDivId) {
              someDivId=someDivId;
      };
      return QCH;
}($)); 
```

上面的代码不起作用。someDivId 与模块变量和本地初始化变量同名。在 C# 中，我们可以使用 this.someDivId 指向模块（类）变量。有没有办法在 JS 中指向模块变量？

我知道我可以更改名称模块变量并使用例如大写字母来区分本地变量，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:10:04.523

你不能。您将不得不重命名其中之一。您已将`someDivId`外部范围内的一个隐藏在内部范围内，并且 JavaScript 无法（据我所知）在解析标识符时忽略范围链的一个元素。

# android - 获取 Makefile 以打印其输出 zip 文件之一的输出目录的正确语法是什么？

> ID：11158898
> 
> 赞同：1
> 
> 时间：2012-06-22T15:05:06.970
> 
> 标签：android, makefile

我正在尝试编辑一个 Android Makefile，希望它能够打印出它创建的一个 ZIP 文件的目录（路径）位置。理想情况下，由于构建过程很长并且做了很多事情，我希望它打印出 ZIP 文件的路径到另一个目录中的文本文件，我以后可以访问：

伪代码思路：

```
# print the desired pathway to output file
print(getDirectoryOf(variable-name.zip)) > ~/Desktop/location_of_file.txt 
```

我想在其中插入这段新代码的 Makefile 片段如下所示。我有兴趣找到**$(name).zip**的目录（即我要查找的特定文件）：

```
# -----------------------------------------------------------------
# A zip of the directories that map to the target filesystem.
# This zip can be used to create an OTA package or filesystem image
# as a post-build step.
#
name := $(TARGET_PRODUCT)
ifeq ($(TARGET_BUILD_TYPE),debug)
  name := $(name)_debug
endif
name := $(name)-target_files-$(FILE_NAME_TAG)

intermediates := $(call intermediates-dir-for,PACKAGING,target_files)
BUILT_TARGET_FILES_PACKAGE := $(intermediates)/$(name).zip
$(BUILT_TARGET_FILES_PACKAGE): intermediates := $(intermediates)
$(BUILT_TARGET_FILES_PACKAGE): \
        zip_root := $(intermediates)/$(name)

# $(1): Directory to copy
# $(2): Location to copy it to
# The "ls -A" is to prevent "acp s/* d" from failing if s is empty.
define package_files-copy-root
  if [ -d "$(strip $(1))" -a "$$(ls -A $(1))" ]; then \
    mkdir -p $(2) && \
    $(ACP) -rd $(strip $(1))/* $(2); \
  fi
endef 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:12:55.803

作为规则操作的一部分（即，作为由制表符缩进的行之一，或作为分号后面的命令）：

```
@echo $(dir $(variable-name).zip) 
```

如果需要输出到文件，

```
@echo $(dir $(variable-name).zip) >~/Desktop/location_of_file.txt 
```

如果您更喜欢附加到文件而不是覆盖，您可以制作`>`a 。`>>`

**更新**

“作为规则操作的一部分（即，作为制表符缩进的行之一，或作为分号后面的命令）”是什么意思？

*答：* 这意味着你可以像这样@echo：

```
file-to-be-built: dependencies
        some-command
        @echo foo
        another-command 
```

或者像这样：

```
file-to-be-built: dependencies
        @some-command; \
        echo foo; \
        another-command 
```

（注意 的位置`@`）。或者像这样：

```
file-to-be-built: dependencies; @some-command; echo foo; another-command 
```

但不是这样：

```
@echo foo
file-to-be-built: dependencies
        some-command
        another-command 
```

（这里还有另一个括号语句，如果你愿意，你可以忽略它：`@`你可能知道，它禁止 Make 将命令本身复制到标准输出。当然，你可以省略它，但如果你包含它，那么你必须把它放在你不想让 Make 复制的特定命令之前。形式上，没有分号的版本在它们自己的独立环境中发出多个单独的命令，使用 shell 的单独调用；而带有分号的版本只调用 shell 一次, 使用单个环境, 并将其留给 shell 来分离和执行命令。这有意义吗？也许不是，如果你只是阅读它——我也无法理解这种纠结的措辞，即使我自己写的 - 但请尝试使用`@`在指示的各个位置，它应该很快开始对您有意义。在任何情况下`@`都没什么大不了的，但如果你了解如何使用它，它可以用来保持 Make 的输出干净。）

# javascript - 在声明函数之前定义javascript函数的typeof？

> ID：11158903
> 
> 赞同：0
> 
> 时间：2012-06-22T15:05:19.470
> 
> 标签：javascript, parsing, function, declaration, typeof

有人可以解释或链接到可以告诉我原因的资源：

```
<script type=" type="text/javascript">

    if(typeof window.myfunc == "function"){
        alert("Why does myfunc already exist ?");
    }

    function myfunc(){

    }
</script> 
```

在 myfunc 函数尚未定义时会弹出警报吗？

我想我在 Chrome、Safari 和 IE（不是 FF）中发现了与此行为相关的问题。当包含函数的 js 文件在网页中多次包含时，它使我无法扩展函数的原型。在将其称为错误并报告它之前，我想了解更多信息。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:20:37.777

命名函数声明，包括函数体，在 JavaScript 中被提升到作用域的顶部。我推荐阅读[这篇关于 JavaScript 作用域和提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)的文章。

如果你做了这样的事情，你将函数分配给一个命名变量，只有变量声明会被提升，但在分配实际发生之前它不会有值：

```
if (typeof myFunc == 'function') {
    // will not be reached
}

var myFunc = function() { ... } 
```

以上有效地被视为：

```
var myFunc; // myFunc is undefined

if (typeof myFunc == 'function') {
    // will not be reached
}

myFunc = function() { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:17:12.117

一个词：*吊装*

来自 JavaScript Garden 的引述：

“上述函数在程序开始执行之前被提升；因此，**它在它定义的范围内的任何地方都可用，即使在源中的实际定义之前调用也是如此**。”

更多信息在这里：[http ://bonsaiden.github.com/JavaScript-Garden/#function.general](http://bonsaiden.github.com/JavaScript-Garden/#function.general)

# javascript - 如何避免在 JavaScript 中的数组中有未定义的成员？

> ID：11158908
> 
> 赞同：0
> 
> 时间：2012-06-22T15:05:37.037
> 
> 标签：javascript

问题很奇怪：我通过拼接函数从数组（关联）中删除了一些元素，之后我添加了一些元素，突然出现了“欠精细”的元素。下面是日志（在“//”之后这是我对此的评论）：

```
// adding first element; array length = 1
["asdasdasd"] microblog.js:48

// adding second element; array length = 2
["asdasdasd", "asdasdasd"] microblog.js:48 

// adding third element;  array length = 3
["asdasdasd", "asdasdasd", "asdasdasdqwe"] microblog.js:48 

// removing second element;  array length = 2
["asdasdasd", "asdasdasdqwe"] microblog.js:66 

// removing third element; array length = 1
["asdasdasdqwe"] microblog.js:66

// adding new element;  array length = 4
["asdasdasdqwe", undefined × 2, "asdasdqwrevcvxzvvxwfrqeqwewq"] 
```

这就是我添加元素的方式：

```
(...)
this.list[currId] = text;
(...) 
```

这就是我删除元素的方式

```
(...)
this.list.splice(currId, 1);
(...) 
```

如何避免这种未定义的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:18:15.760

要么**A** ) -> 您正在使用当前元素来跟踪下一个添加到的位置，并且永远不会减少它：

```
var arr = []
for (var currId = 0; currId < 4; currId++) {
    arr[currId] = currID
}
//arr = [1, 2, 3, 4]
arr.splice(1, 3); // arr = [1]
// if currID is still 3
arr[currId] = "text"; // now arr = [1, undefined, undefined, "text"] 
```

在这种情况下，当您删除项目以将它们添加到下一个位置时，您需要减少 currId。

或**B** ) -> 只需使用`Array.push()`

```
var arr = []
for (var currId = 0; currId < 4; currId++) {
    arr.push(currId);
}
//arr = [1, 2, 3, 4]
arr.splice(1, 3); // arr = [1]
arr.push("text"); // now arr = [1, "text"] 
```

**B**是一个更好的解决方案，如果只是将元素添加到数组的末尾是你想要的。

编辑：由于您想将“currID”保持为数组中放置项目的下一个位置，因此我假设无论何时执行此操作，

```
this.list[currId] = text; 
```

你跟着它：

```
currId++; 
```

如果这是正确的，那么相反的做法是在将对象从 Array 中拼接出来时减少它，例如：

```
var arr = [1, 2, 3, 4];
currId = 4 // The next position to add at is 4.
removeCount = 3;
arr.splice(1, removeCount); // arr = [1]
currId -= removeCount; 
```

但坦率地说，这是一种糟糕的方法。请提供更多信息，以便我们帮助您找到更好的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:18:43.083

你是`currId`为了什么？

添加元素时（到最后），您应该这样做：

```
this.list.push(text) 
```

或者

```
this.list[this.list.length] = text 
```

并按索引修改元素。

# winapi - ALLOCATOR_PROPERTIES::cBuffers 中有多少个缓冲区足够？

> ID：11158911
> 
> 赞同：1
> 
> 时间：2012-06-22T15:05:43.947
> 
> 标签：winapi, video, directshow

我正在研究从 CTransformFilter 派生的自定义视频转换过滤器。它不会做任何 DirectShow 术语中不寻常的事情，例如媒体样本的额外内部缓冲、输出样本的排队或动态格式更改。

按下播放时，graphedit 中的图表包含我的过滤器的两个实例，首尾相连（第一个输出连接到第二个输入）。该图绝对*没有*挂在 ::Transform 方法覆盖中。第二个过滤器实例*不*直接连接到视频渲染器。

如果在两个滤镜之间插入颜色转换器，则不会发生此问题。如果我将请求的缓冲区数量（ALLOCATOR_PROPERTIES::cBuffers）从 1 增加到 3，那么问题就会消失。下面是原始的 DecideBufferSize 覆盖，与许多其他示例 DirectShow 过滤器代码类似。

在 DirectShow 过滤器（转换或其他方式）中设置请求缓冲区数量的稳健策略是什么？对于现代需求，请求一个缓冲区的代码是否已过时？我的问题是缓冲区太少还是增加了缓冲区的数量来掩盖不同的问题？

```
 HRESULT MyFilter::DecideBufferSize(IMemAllocator *pAlloc, ALLOCATOR_PROPERTIES *pProp)
{
    AM_MEDIA_TYPE mt;
    HRESULT hr = m_pOutput->ConnectionMediaType(&mt);
    if (FAILED(hr)) {
        return hr;
    }

    BITMAPINFOHEADER * const pbmi = GetBitmapInfoHeader(mt);
    pProp->cbBuffer = DIBSIZE(*pbmi);
    if (pProp->cbAlign == 0) {
        pProp->cbAlign = 1;
    } 
    if (pProp->cBuffers == 0) {
        pProp->cBuffers = 3;
    }
    // Release the format block.
    FreeMediaType(mt);

    // Set allocator properties.
    ALLOCATOR_PROPERTIES Actual;
    hr = pAlloc->SetProperties(pProp, &Actual);
    if (FAILED(hr)) {
        return hr;
    }
    // Even when it succeeds, check the actual result.
    if (pProp->cbBuffer > Actual.cbBuffer) {
        return E_FAIL;
    }
    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:07:14.253

缓冲区数量没有具体的政策，但您绝对应该知道固定数量的缓冲区是控制采样率的方法。当所有缓冲区都在使用时，对另一个缓冲区的请求将阻止执行，直到该缓冲区可用。

也就是说，如果您的代码出于某种目的而持有缓冲区引用，您应该分配相应的数量，这样您就不会锁定自己。例如，您在内部保存最后一个媒体样本引用，例如能够重新发送它，并且您仍然希望能够传递其他媒体样本，因此您需要在分配器上至少有两个缓冲区。

输出引脚通常负责选择和设置分配器，如果/当通知要使用哪个分配器时，输入可能需要检查和更新属性。当您共享分配器时，在就地转换过滤器上，您可能需要进行额外检查以确保满足要求。

*   `DMO Wrapper Filter`仅使用（至少有时）带有一个缓冲区的分配器并且仍然处于良好状态
*   对于音频，您通常有更多缓冲区，因为您将数据排队等待播放
*   如果您的代码有参考泄漏并且您没有发布媒体样本指针，那么您的流媒体可能会因此而锁定死

# java - 如何获取类型为 T 的字段的类？

> ID：11158912
> 
> 赞同：7
> 
> 时间：2012-06-22T15:05:52.290
> 
> 标签：java, spring, generics, spring-mvc

我为一些 Spring MVC 控制器编写 JUnit 测试。JUnit 测试的初始化对于我所有的 Controller 测试都是通用的，因此我想创建一个抽象类来执行此初始化。

因此，我创建了以下代码：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:spring/applicationContext-test.xml", "classpath*:spring/spring-mvc-test.xml" })
@Transactional
public abstract class AbstractSpringMVCControllerTest<T> {

    @Autowired
    protected ApplicationContext applicationContext;

    protected MockHttpServletRequest request;

    protected MockHttpServletResponse response;

    protected HandlerAdapter handlerAdapter;

    protected T controller;

    @SuppressWarnings("unchecked")
    @Before
    public void initContext() throws SecurityException, NoSuchFieldException {
        request = new MockHttpServletRequest();
        response = new MockHttpServletResponse();
        handlerAdapter = applicationContext.getBean(AnnotationMethodHandlerAdapter.class);
        // Does not work, the problem is here...    
        controller = applicationContext.getBean(T);
    }

} 
```

这个想法是为每个我想测试的控制器创建一个扩展我的`AbstractSpringMVCControllerTest`. `extends`声明中给出的类型是**Controller**的类。

例如，如果我想测试我的`AccountController`，我将创建这样的`AccountControllerTest`类：

```
public class AccountControllerTest extends AbstractSpringMVCControllerTest<AccountController> {

    @Test
    public void list_accounts() throws Exception {
        request.setRequestURI("/account/list.html");
        ModelAndView mav = handlerAdapter.handle(request, response, controller);
        ...
    }

} 
```

我的问题位于`initContext()`抽象类方法的最后一行。这个抽象类将对象声明`controller`为`T`对象，但是如何告诉 Spring Application Context 返回 type 的 bean `T`？

我试过这样的事情：

```
 Class<?> controllerClass = this.getClass().getSuperclass().getDeclaredField("controller").getType();
    controller = (T) applicationContext.getBean(controllerClass); 
```

但`controllerClass`返回`java.lang.Object.class`类，而不是`AccountController.class`.

当然，我可以创建一个`public abstract Class<?> getControllerClass();`方法，该方法将被每个 JUnit Controller 测试类覆盖，但我更愿意避免这种解决方案。

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:28:07.500

*如果*您的子类在编译时`AbstractSpringMVCControllerTest`绑定，这是可能的。`T`也就是说，你有类似的东西

```
public class DerpControllerTest extends AbstractSpringMVCControllerTest<DerpController> { } 
```

而不是

```
public class AnyControllerTest<T> extends AbstractSpringMVCControllerTest<T> { } 
```

我猜你可能有前者。在这种情况下，在运行时从对象`T`中删除了类型，但对象*确实*提供了一种知道是什么的方法，因为它是在编译时绑定的。`Class``AbstractSpringMVCControllerTest``Class``DerpControllerTest` *`T``T`*

 *以下类演示了如何访问 的类型`T`：

**超级java**

```
import java.lang.reflect.ParameterizedType;
public abstract class Super<T> {

    protected T object;

    @SuppressWarnings("unchecked")
    public Class<T> getObjectType() {
        // This only works if the subclass directly subclasses this class
        return (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    }

} 
```

**子.java**

```
public class Sub extends Super<Double> {
} 
```

**测试.java**

```
public class Test {
    public static void main(String...args) {
        Sub s = new Sub();
        System.out.println(s.getObjectType()); // prints "Class java.lang.Double"
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:25:02.027

这与我们通常看到的类型擦除不同。使用类型擦除，我们不知道当前类的参数（你用`getClass()`得到的那个），但是你可以在超类/超接口（你用 得到的那个）中得到那些参数，`getGenericSuperxxxxx()`因为这是类型声明的一部分。

这不会为您提供`controller`字段类型，但我希望这足以满足您的目的。

代码：

```
public class A<P> {
}

import java.lang.reflect.ParameterizedType;

public class B extends A<String> {

    public  static void main(String[] arg) {
        System.out.println(
                ((ParameterizedType)B.class.getGenericSuperclass()).getActualTypeArguments()[0]);
    }
} 
```

输出：

```
class java.lang.String 
```

在你的情况下，这将是

```
Class controllerClass = (Class)( ((ParameterizedType)getClass().getGenericSuperclass()).getActualTypeArguments()[0]); 
```

需要注意的一点：

如果类`B`也像这样参数化：

```
public class B<X> extends A<X> {} 
```

这行不通。或者如果你有另一个类扩展 B，它也会有问题。我不会讨论所有这些情况，但你应该明白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:15:05.067

您不能因为在运行时，由于 ERASURE，JVM 无法知道您的“控制器”属性的类。它被视为对象...*

# c# - 网络浏览器使用什么 url 编码？

> ID：11158916
> 
> 赞同：0
> 
> 时间：2012-06-22T15:06:07.237
> 
> 标签：c#, http, web, browser

向服务器提交数据时，Web 浏览器使用什么 url 编码？我使用我的应用程序，`HttpUtility.UrlEncode(string data)` 但没有像使用网络浏览器那样得到结果。

我的应用程序向论坛提交了一些文本数据。

当我使用网络浏览器（谷歌浏览器）提交数据时，我可以看到提交给服务器的确切文本，但是当我使用我的应用程序提交时，它显示了一些不同的字符。

那么向服务器提交任何数据是否必须进行 url 编码？

**- -编辑 - -**

```
 data = HttpUtility.UrlEncode(textBox1.Text);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.CookieContainer = cookieContainer;
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5";
        request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        request.Headers.Add("Accept-Charset", "ISO-8859-2,utf-8;q=0.7,*;q=0.7");
        request.Headers.Add("Accept-Encoding", "gzip, deflate");
        request.Headers.Add("Accept-Language", "pl,en-us;q=0.7,en;q=0.3");
        request.Method = "POST";
        byte[] byteArray = new byte[256];
        ASCIIEncoding ascii = new ASCIIEncoding();
        byteArray = ascii.GetBytes(data);     

        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close(); 
```

textbox1 中的数据是这样的。

```
¦=¦=¦¦=¦=¦
RUNTIME………..: 2h:13m:15s
RELEASE SIZE……: 16,2GB
VIDEO CODEC…….: x264, 2pass, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:13:53.380

如果要在 url 参数中包含 URL 保留字符（？、& 等），通常只需要 URLEncode。

# mysql - 每组获取 N 个 MYSQL

> ID：11158917
> 
> 赞同：1
> 
> 时间：2012-06-22T15:06:16.660
> 
> 标签：mysql

这不是同一个问题：[在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

但我承认它是相似的。

我需要选择每人的前 2 行。这些行按收到的年份排序

问题：有可能在同一个月输入了超过 2 个数据（输入的日期为 YYYY-MM）

我带来的查询（在提到的问题之后）卡在一个大循环中。

```
SELECT *
FROM `table_data` as b
WHERE (
    SELECT count(*) FROM `table_data` as a
        WHERE a.Nom = b.Nom and a.year < b.year
    ) <= 2; 
```

样本数据 ：

```
 A  |   year   |  Nom
---------------------
  b  |  2011-01 | Tim
---------------------
  d  |  2011-01 | Tim
---------------------
  s  |  2011-01 | Tim
---------------------
  a  |  2011-03 | Luc
---------------------
  g  |  2011-01 | Luc
---------------------
  s  |  2011-01 | Luc 
```

应该出口：

```
 A  |   year   |  Nom
---------------------
  b  |  2011-01 | Tim
---------------------
  d  |  2011-01 | Tim
---------------------
  a  |  2011-03 | Luc
---------------------
  g  |  2011-01 | Luc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:11:19.297

```
(
 -- 首先获得一组结果，就好像您只想要每个结果的最新条目一样
 -- 名称 - 来自具有 ORDER BY 的派生表的简单 GROUP BY
  选择 *
  从 （
    选择 *
    来自`table_data`
    ORDER BY `year` DESC
  )`一个`
  按“名称”分组
)
联盟
(
 -- 如果你应用相同的标准，接下来将它与你得到的结果集结合起来
 -- 并另外指定您不想要任何由
 -- 第一次操作
  选择 *
  从 （
    选择 *
    来自`table_data`
    WHERE `id` 不在 (
      选择`id`
      从 （
        选择 *
        来自`table_data`
        ORDER BY `year` DESC
      )`一个`
      按“名称”分组
    )
    ORDER BY `year` DESC
  ) `b`
  按“名称”分组
)
 -- 可选择将排序应用于最终结果
ORDER BY `Nom` DESC, `year` DESC

```

我确信有一种更短的方法可以做到这一点，但现在我无法终生弄清楚它是什么。不过，这[确实有效](http://sqlfiddle.com/#!2/d4ade/1)——假设你有一个主键（你应该这样做）并且它被称为`id`.

# objective-c - UIScrollView - 自定义地图 - 防止地图上的标记子视图随地图缩放

> ID：11158919
> 
> 赞同：1
> 
> 时间：2012-06-22T15:06:19.200
> 
> 标签：objective-c, uiscrollview, zooming, subview

我有一个有限区域的自定义地图，并将其设置为正确显示用户的位置。该地图是 UIScrollView 内的 1600 像素方形图像。

我有一个十字准线图像来显示用户的当前位置，在 zoomScale 1.0 是所需的大小。当我捏和缩放滚动视图时，十字准线会随之缩放。我想让子视图在屏幕上保持相同的大小。

我一直无法找到有关此的任何信息，最好的方法是什么？

如果有什么我可以为您提供帮助的答案，请告诉我。

非常感谢！

**编辑 -**

进一步研究后，`- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale`我尝试使用 UIScrollViewDelegate 方法来获取标记的当前中心和大小，然后进行调整，但这只会在缩放结束时缩放。我希望在用户缩放时让标记保持相同的大小。

**编辑2-**

Cake 在下面提供了一个很好的答案，但我无法以我想象的方式实现它。

我将 UIImageView 作为占位符，alpha 设置为 0。此占位符相对于地图移动以显示用户位置。这按我的预期运行。不幸的是，这会随着地图调整大小，因为它是地图的子视图（所以它保持在原地）。

采用 Cake 的以下答案，我创建了非缩放十字准线图像，并将其作为同级子视图添加到滚动视图中。数学，一旦 Cake 指出它们，就很容易得到新的十字准线框架：

```
 CGPoint ULPC = userLocationPlaceholder.center;
    float zs = scrollView.zoomScale;
    CGRect newFrame = CGRectMake(((ULPC.x * zs) - scrollView.contentOffset.x) - 20, ((ULPC.y * zs) - scrollView.contentOffset.y) - 20, 40, 40); 
```

图像宽 40 点的位置。这与中心完美匹配。

我*现在*遇到的问题是我无法让十字准线图像保持锁定在占位符上。

我尝试过使用这样的自调用动画：

```
-(void)animeUserLocationAttachment
{
[UIView animateWithDuration:0.05 
                      delay:0 
                    options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionCurveLinear )
                 animations:^{
                     userLocationDotContainer.frame = newFrame;
               } completion:^(BOOL finished){
                     // Call self
                     [self animateUserLocationAttachment];
                 }];
} 
```

一旦我开始滚动/缩放，这会锁定动画，使十字准线就位，直到我释放滚动/缩放，然后它会正确更新它的位置。

有什么办法可以解决这个问题，或者我可以应用其他方法吗？

非常感谢

**编辑 3 -**

我重新接受了 Cake 的回答，因为它涵盖了 90% 的问题。除了他的回答，我还实现了 ScrollViewDelegate 方法`scrollViewWillBeginDragging:`并`scrollViewWillBeginDecelerating:`缩放占位符以匹配相对于地图的十字准线的当前大小，显示占位符（即地图图像的子视图）并隐藏十字准线图像。委托方法`scrollviewWillBeginZooming:withView:`不显示占位符，因为它随地图缩放。正如 Cake 所建议的那样，我将为这个问题提出一个新问题。

对应的方法（`scrollViewDidEndZooming:withView:atScale:`和`scrollViewDidEndDragging:willDecelerate:`-scrollViewDidEndDecelerating:`）都隐藏占位符，并重新显示十字准线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T09:52:47.020

这个问题很老，但对于未来的类似问题，我最近解决了一个类似的问题，应用了另一篇帖子的 Andrew Madsen 的提示。

我有一个 UIScrollView，里面有一个 UIImageView。附加到 UIImageView 我有很多 MKAnnotationView （那些是我不想用超级视图缩放的子视图）。

我做了 UIImageView 的子类并实现`setTransform:`了如下方法：

```
#import "SLImageView.h"

@implementation SLImageView

    - (void)setTransform:(CGAffineTransform)transform
    {
        [super setTransform:transform];

        CGAffineTransform invertedTransform = CGAffineTransformInvert(transform);

        for (id obj in self.subviews)
        {
            if ([obj isKindOfClass:[MKAnnotationView class]])
            {
                [((UIView *)obj) setTransform:invertedTransform]; 
            }
        }
    }

    @end 
```

这完美！米克。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:25:13.183

创建另一个与包含滚动视图的视图或视图控制器关联的十字准线图像。然后让这个总是捕捉到你已经拥有的十字准线图像的中心。然后，隐藏您的原始十字准线图像。然后你可以避免让滚动视图缩放不相关的十字准线，它应该保持相同的大小。

**相对坐标系**

可可触摸中的每个视图都有一个具有原点的框架属性。为了相对于另一个视图正确定位一个视图所拥有的对象，您所要做的就是找出它们起源的差异。如果一个视图是另一个视图的子视图，那么这并不太难。

*   获取容器视图的来源
*   获取容器视图内子视图的位置
*   获取子视图的来源
*   计算原点位置的差异
*   获取要重叠的对象的位置（相对于子视图）
*   计算要重叠的对象相对于容器视图的位置
*   将你的十字准线移动到这个位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-16T11:25:53.393

Mick 的答案的 Swift 等价物：

```
class MapContainerView:UIView {
    @IBOutlet var nonScalingViews: [UIView]!

    override var transform: CGAffineTransform {
        didSet {
            guard let nonScalingViews = nonScalingViews else {
                return
            }
            let invertedTransform = CGAffineTransformInvert(transform)
            for view in nonScalingViews {
                view.transform = invertedTransform
            }
        }
    }
} 
```

# mongodb - 使用哪些 mongo 统计信息来限制写入

> ID：11158920
> 
> 赞同：0
> 
> 时间：2012-06-22T15:06:25.430
> 
> 标签：mongodb

我正在将日志信息异步写入 mongodb。由于这是一个非必要的功能，我正在寻找一种方法来限制这些写入，这样它就不会影响来自应用程序其他部分的读/写。本质上，只有在某些统计数据低于可接受的水平时才写。

我想到使用的一个统计数据是来自[serverStatus](http://www.mongodb.org/display/DOCS/serverStatus+Command)的“globalLock.ratio” 。但是，这似乎不是移动平均线，也不是衡量数据库当前使用情况的好方法。

什么是我想做的好统计数据？写锁定 % 将是理想的，但我如何从 serverStatus 获得移动平均值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:45:14.310

关于您的问题，有几点需要注意：

1) 如果您想要移动平均线，那么您需要自己在客户端程序中跟踪它们。如果您正在运行一个多线程程序，您可以使用一个线程定期（1 秒？5 秒？）间隔轮询 MongoDB，并自己计算移动平均值。这就是 MMS 的做法。

2) 当你计算这个平均值时，你需要弄清楚“加载的数据库”对你意味着什么。可能有很多事情需要检查：你关心写锁百分比吗？阅读百分比？I/O 使用情况？复制延迟？不幸的是，没有一个单一的指标可以始终适用于所有用例：您必须弄清楚您关心什么并对其进行衡量。

3) 您可以采取的实现此目标的另一种策略是使用写入关注、“多数”的“w”值和合理的超时（例如 10 秒）对日志记录集合进行写入。使用它，您将无法比复制更快地写入数据库。如果你开始出现超时，你就知道你需要缩减。如果您无法以足够快的速度写入以耗尽队列，那么您将在那时开始删除日志条目。

# orm - ORMExecuteQuery() 计数似乎返回一个数组

> ID：11158921
> 
> 赞同：3
> 
> 时间：2012-06-22T15:06:26.973
> 
> 标签：orm, coldfusion

ORMExecuteQuery() 似乎为以下返回一个数组

```
example = ormExecuteQuery("select count(commentID) as n from pComment c");

output uing cfdump for example would be...
array
[1][x] 
```

其中 x 是计数。

我怎样才能将 n 作为数字而不是返回的数组对象？我只想得到（）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:34:34.390

尝试这个：

```
example = ormExecuteQuery("select count(commentID) as n from pComment c", true); 
```

第二个参数称为`unique`，尽管它的名称令人困惑，但它正是您所需要的：使函数返回单个值。

# makefile - 在 Windows 上：命令行错误“cp 在 '/usr/lib' 之后缺少目标文件操作数”

> ID：11158923
> 
> 赞同：1
> 
> 时间：2012-06-22T15:06:29.967
> 
> 标签：makefile, shared-libraries, zlib, cp

我一直在尝试使用以下网站安装 zlib 来指导我[链接](http://archive.linuxfromscratch.org/lfs-museum/5.1-pre1/LFS-BOOK-5.1-PRE1-HTML/chapter06/zlib.html)

我目前被困在命令*make install*这相当于

```
cp libz.a /usr/lib 
cp  /usr/lib 
```

从命令提示符返回错误

```
cp: missing destination file operand after '/usr/lib' .
Try 'cp --help' for more information. 
```

有没有人知道发生了什么。由于图书馆和其他东西真的令人困惑，我一直在摸不着头脑。

（zlib 目录位于 C:\zlib-1.2.5 ）

# scala - 案例类继承有什么 *so* 错误？

> ID：11158929
> 
> 赞同：69
> 
> 时间：2012-06-22T15:06:59.263
> 
> 标签：scala, inheritance, case-class

在寻找其他东西时，完全出于巧合，我偶然发现了一些关于恶魔案例类继承如何的评论。有一个东西叫做`ProductN`，坏蛋和国王，精灵和巫师，以及一些非常理想的属性是如何随着案例类继承而丢失的。那么案例类继承有什么问题呢？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-22T15:12:44.207

一个字：**平等**

`case`类提供了`equals`和的实现`hashCode`。等价关系，称为这样的`equals`工作（即必须具有以下属性）：

1.  对于所有人`x`；`x equals x`是`true`（反身的）
2.  对于`x`, `y`, `z`; 如果`x equals y`然后（传递`y equals z`）`x equals z`
3.  对于`x`, `y`; 如果`x equals y`那么`y equals x`（对称）

只要您允许继承层次结构中的相等性，您就可以打破 2 和 3。以下示例简单地证明了这一点：

```
case class Point(x: Int, y: Int)
case class ColoredPoint(x: Int, y: Int, c: Color) extends Point(x, y) 
```

然后我们有：

```
Point(0, 0) equals ColoredPoint(0, 0, RED) 
```

但*不是*

```
ColoredPoint(0, 0, RED) equals Point(0, 0) 
```

你可能会争辩说所有的类层次结构都可能有这个问题，这是真的。但是从开发人员的角度来看，案例类的存在专门用于简化相等性（以及其他原因），因此让它们以*非直觉*的方式表现将是对自己目标的定义！

* * *

还有其他原因；尤其是[`copy`没有按预期工作](http://www.scala-lang.org/node/3289)以及[与模式匹配器交互](http://www.scala-lang.org/node/1582)的事实。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-04-06T16:30:00.793

这并不完全正确。这比谎言更糟糕。

正如[aepurniet](https://stackoverflow.com/users/159326/aepurniet)所提到的，在任何情况下，限制定义区域的类后继者都必须重新定义相等性，因为模式匹配必须与相等性完全相同（如果尝试匹配`Point`，`ColoredPoint`那么它将不匹配，因为`color`它不存在）。

这有助于理解如何实现案例类层次结构的相等性。

```
case class Point(x: Int, y: Int)
case class ColoredPoint(x: Int, y: Int, c: Color) extends Point(x, y)

Point(0, 0) equals ColoredPoint(0, 0, RED)  // false
Point(0, 0) equals ColoredPoint(0, 0, null) // true

ColoredPoint(0, 0, RED) equals Point(0, 0)  // false
ColoredPoint(0, 0, null) equals Point(0, 0) // true 
```

最终有可能满足相等关系的要求，即使是案例类的后继者（不覆盖相等性）。

```
case class ColoredPoint(x: Int, y: Int, c: String)
class RedPoint(x: Int, y: Int) extends ColoredPoint(x, y, "red")
class GreenPoint(x: Int, y: Int) extends ColoredPoint(x, y, "green")

val colored = ColoredPoint(0, 0, "red")
val red1 = new RedPoint(0, 0)
val red2 = new RedPoint(0, 0)
val green = new GreenPoint(0, 0)

red1 equals colored // true
red2 equals colored // true
red1 equals red2 // true

colored equals green // false
red1 equals green // false
red2 equals green // false

def foo(p: GreenPoint) = ??? 
```

# python - Python：如何使用 matplotlib 将图像像素投影到地图上

> ID：11158932
> 
> 赞同：2
> 
> 时间：2012-06-22T15:07:10.027
> 
> 标签：python, python-imaging-library, matplotlib

我正在尝试从图像中获取像素并将它们绘制在蓝色大理石地图上。我已经弄清楚如何将它们投影到地图上。我只是无法弄清楚如何在将每个像素投影到地图上时为其着色。
我一直在使用 plot() 方法，当我单独执行它们时，终端会自动终止我的进程，因为它必须绘制约 65000 次。我可以使用另一种方法吗？有没有办法在这些方法中使用像素颜色数组？PIL可以做到这一点吗？

rgb 是具有 3 元组的颜色数组，即。(14,0,0) 等 full_x 和 full_y 是一个二维数组，其中它是像素数 x 5 个不同的 x,y 点（在蓝色大理石图像上制作像素形状）

这是我尝试做一系列颜色的地方：

```
for i in range(len(rgb)):
    hexV = struct.pack('BBB',*rgb[i]).encode('hex')
    hexA.append('#' + hexV)

m.plot(full_x, full_y, color=hexA) 
```

我也试过：

```
for i in range(len(rgb)):
    hexV = struct.pack('BBB',*rgb[i]).encode('hex')
    #hexA.append('#' + hexV)
    hexA = '#' + hexV
    m.plot(full_x[i], full_y[i], color=hexA[i]) 
```

这是我尝试单独处理每个像素的地方，然后该过程被自动终止。

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:51:52.610

对于任何看到这一点并有同样问题的人：

显然，你必须使用的只是分散。为了映射具有多种颜色的像素/任何其他点，请使用带有 x 数组、y 数组和像素颜色数组的 scatter。

# javascript - 揭示模块模式：对象未定义

> ID：11158933
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:07:11.013
> 
> 标签：javascript, revealing-module-pattern

我正在尝试在 IE8 的 js 文件中实现显示模块模式。鉴于此代码：

```
var foo = (function () {
//private members
var a, b, c, d;
var init = function () {
    var self = this;
    //public members
    var A, B, C, D
    var privateFunc = function () {
        /*..*/
    };
    var publicFunc = function () {
        /*..*/
    };
    return {
        A: A,
        B: B,
        C: C,
        D: D,
        publicFunc: publicFunc
    }
  }
} ());
$(function () {
  foo.init();
}) 
```

我的问题是，在 jQuery 文档就绪函数中， foo 始终未定义，我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:29:32.307

问题是我从 init 函数而不是从 foo 返回公共对象。谢谢大家的帮助。

# java - GWT 和 SOAP 类

> ID：11158935
> 
> 赞同：0
> 
> 时间：2012-06-22T15:07:18.000
> 
> 标签：java, gwt, soap

我有一个使用 SOAP 与多个资源进行通信的 Web 服务器。

我将纯 JavaScript 用于 Web App 界面。客户端和服务器之间存在大量数据变化，包括 SOAP 请求返回的类。

我使用 GSON 从 SOAP 响应（可以是各种自定义类）和 JavaScript 中创建 JSON 对象，并且只需要访问 JSON 字段。

现在我正在考虑在客户端上使用 GWT，但在规划实施时开始产生一些疑问。

如果我使用 GWT，GWT 编译器必须可以访问为 SOAP 接口生成的所有类，因为我不会使用 JSON，而是直接通过 Assync 请求使用这些类。

现在的问题是这些类的可能版本取决于资源软件版本本身。

如果我继续使用 JavaScript，这不是一个非常严重的问题，因为服务器使用 GSON 编码的 JSON 可以是任何类型，并且如果它没有特定属性，由于 JavaScript 类型自由性质（我可以检查 JsonSoapResponse .field22 != 未定义）。

如果我使用 GWT，我是否需要拥有与服务器端一样多的类版本？

我考虑过使用 JavaScript Overlay 类型，但这不需要重写几乎所有的 SOAP 类来扩展 JavaScriptObject 并公开它们的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:30:01.527

你可以看看 AutoBean 机制。

您将不再需要 JavaScript 覆盖类型，只需接口，GWT 编译器将完成其余工作。

见：[http ://code.google.com/p/google-web-toolkit/wiki/AutoBean](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)

# c# - 何时从服务启动进程（该进程将成为服务）或从启动开始？

> ID：11158937
> 
> 赞同：0
> 
> 时间：2012-06-22T15:07:19.077
> 
> 标签：c#, windows-services

这些启动过程之间实际上有什么不同？我知道简单的区别（代码不同，服务可以从 Windows 服务管理器启动和停止，分机。）

当我需要将进程作为服务进行时，以及何时我更愿意从启动时启动进程（以防我需要在操作系统启动时启动进程）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:27:28.983

Are you asking the differences between services and the StartUp folder?

Services run when the computer is on and stay running.

Programs in the Startup folder run when someone logs in.

# iphone - iPhone/iPad 和 iPhone(Retina)/iPad(Retina) 中图像的理想分辨率

> ID：11158944
> 
> 赞同：3
> 
> 时间：2012-06-22T15:07:55.117
> 
> 标签：iphone, image, ipad, retina-display

有人能告诉我 iPhone/iPad 和 iPhone(Retina)/iPad(Retina) 的理想图像分辨率是多少。我已经从 Apple 网站和 Wikipedia 中提取了这些测量值。见下文：

普通 iPhone 480 x 320 - 163 ppi

iPhone 视网膜显示屏 960 x 640 - 326 ppi。

iPad 2：1024 x 768 - 132 ppi

iPad 3（视网膜显示屏）：2048 x 1536 - 264 ppi

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:11:36.130

有关 Retina 显示屏设计的详细信息，请参阅此站点。

[http://bjango.com/articles/designingforretina/](http://bjango.com/articles/designingforretina/)

[http://bjango.com/articles/designingforretina2/](http://bjango.com/articles/designingforretina2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:13:19.547

取决于您将如何使用它们。但理想情况下，您的图像的尺寸将完全适合您要进行的显示。

理想情况下，如果您想在原始 iphone 或 iPad 上显示图像，那么您将为这些设备提供 100 x 100 的图像，并提供 200 x 200 的“@2x”图像以在视网膜设备上显示。如果您将设备放在一起，由于 DPI 不同，iPhone 和 iPad 之间的图像在物理上可能看起来有点不同。

或者，您基本上可以只提供 2x 图像，并让低端设备缩小图像！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-10T07:57:38.593

```
 iPhone3        320x480  163 ppi
    iPhone4        640×960  326 ppi
    iPhone4S       640×960  326 ppi 
    iPhone5        640×1136 326 ppi 
    iPad          1024x768  132 ppi
    iPad2         1024x768  132 ppi
    iPad (3gen)   2048x1536 264 ppi
    iPad (4gen)   2048x1536 264 ppi
    iPad mini     1024x768  163 ppi 
```

# android - HTTP GET 响应中的奇怪字符

> ID：11158945
> 
> 赞同：0
> 
> 时间：2012-06-22T15:08:08.540
> 
> 标签：android

我试图弄清楚为什么 JSON 提要中的特殊字符（在浏览器中查看时看起来非常好）在我的 Android 代码中使用时会中断。带有重音符号、省略号、弯引号等字符的字符被其他字符替换——也许将其从 UTF-8 转换为 ASCII？我不确定。我正在使用 GET 请求从服务器中提取 JSON 数据，对其进行解析，将其存储在数据库中，然后使用 Html.fromHtml() 并将内容放在 TextView 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:08:09.273

经过大量实验，我缩小了可能性，直到发现问题出在 Ignition HTTP 库 (https://github.com/kaeppler/ignition) 上。具体来说，使用 ignitedHttpResponse.getResponseBodyAsString()

虽然这是一个方便的快捷方式，但那一行会导致字符损坏。相反，我现在使用：

```
InputStream contentStream = ignitedHttpResponse.getResponseBody();
String content = Util.inputStreamToString(contentStream);

public static String inputStreamToString(InputStream is) throws IOException {
        String line = "";
        StringBuilder total = new StringBuilder();

        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        // Read response until the end
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }

        // Return full string
        return total.toString();
    } 
```

编辑：添加更多细节

这是重现该问题的最小测试用例。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

    activity = this;

    instance = this;

    String url = SaveConstants.URL;
    IgnitedHttpRequest request = new IgnitedHttp(activity).get(url);
    InputStream contentStream = null;
    try {
    IgnitedHttpResponse response = request.send();

    String badContent = response.getResponseBodyAsString();
    int start = badContent.indexOf("is Texas");
    Log.e(TAG, "bad content: " + badContent.substring(start, start + 10));
    contentStream = response.getResponseBody();
    String goodContent = Util.inputStreamToString(contentStream);
    start = goodContent.indexOf("is Texas");
    Log.e(TAG, "good content: " + goodContent.substring(start, start + 10));
    } catch (IOException ioe) {
        Log.e(TAG, "error", ioe);
    }
} 
```

在日志中：

> 坏内容：是德克萨斯吗？好内容：是德克萨斯吗？</p>

*更新：*要么我疯了，要么问题只出现在客户的生产提要中，而不是他们的开发提要中，尽管在浏览器中查看时内容看起来相同 - 显示“德克萨斯”。因此，可能需要一些不稳定的服务器配置才能导致此问题......但是，当它发生时，解决此问题的方法正如我所概述的那样。我不推荐使用 response.getResponseBodyAsString();

# python - python Tkinter下拉菜单的问题

> ID：11158946
> 
> 赞同：0
> 
> 时间：2012-06-22T15:08:09.023
> 
> 标签：python, tkinter, arguments, drop-down-menu

以下代码是将按钮附加到现有程序的程序，因此可以在更友好的界面上而不是在代码内部进行选择。我正在尝试使用下拉菜单，但 setEthAnt1 函数似乎有一个错误：TypeError: setEthAnt1() 不接受任何参数（给定 1）。我不知道我没有传入什么参数。有人有什么想法吗？

```
from Tkinter import *
import ThreegroupsGraphics as three

def run():
    three.main()

def setEthAnt1():
    name = var.get()
    print name
    three.OneTo2Ant = name
    print three.OneTo2Ant

root = Tk()
var = StringVar()
var.set("Group 1 Ethnic Antagonism")
OptionMenu(root, var, "1","2","3","4","5","6","7","8","9","10", command = setEthAnt1).pack()
butn = Button(root, text = 'run',  command = run)
butn.pack()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:18:44.143

当您为 指定命令时`OptionMenu`，所选项目的值将被发送到命令中，这实际上使您的 var.get() 不再需要。见下文：

```
from Tkinter import *
import ThreegroupsGraphics as three

def run():
    three.main()

def setEthAnt1(name):
    print name
    three.OneTo2Ant = name
    print three.OneTo2Ant

root = Tk()
var = StringVar()
var.set("Group 1 Ethnic Antagonism")
OptionMenu(root, var, "1","2","3","4","5","6","7","8","9","10", command = setEthAnt1).pack()
butn = Button(root, text = 'run',  command = run)
butn.pack()
root.mainloop() 
```

如果你不想`setEthAnt1`有任何参数并且仍然使用`var.get()`，你可以`OptionMenu`像这样为 a lamda 函数创建命令：

```
OptionMenu(root, var, "1","2","3","4","5","6","7","8","9","10", command = lambda _: setEthAnt1).pack() 
```

# javascript - 如何诊断特定 JavaScript 失败的功能？

> ID：11158948
> 
> 赞同：1
> 
> 时间：2012-06-22T15:08:10.477
> 
> 标签：javascript, photoswipe, browser-feature-detection

我想利用（对我而言）复杂的 Javascript，[Photoswipe](https://github.com/codecomputerlove/PhotoSwipe)。作者很清楚他们不支持 IE 7，尽管演示站点在 IE 7 中确实可以在某种程度上发挥作用，但我的团队构建的实例却不支持。

我不想尝试修改脚本，而是想使用[Yep/Nope](http://yepnopejs.com/)之类的东西来检测哪个 Javascript 功能失败，并提供一个更简单的替代库，我知道它在旧浏览器中运行良好。我试图避免用户代理嗅探。

是否有可用的工具或方法可以在您不了解个人来龙去脉的脚本中找出要检测特征的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:12:27.907

为什么不简单地使用 IE 条件来加载备用库？

```
<!--[if IE 7]>
    <script src="alternate.js"></script>
    <script>var ie7 = true;</script>
<![endif]-->
<script src="normal.js"></script> 
```

然后修改 normal.js 以检查该 ie7 标志，如果已设置则跳过加载代码。

# cordova - sencha touch & PhoneGap中的基本程序

> ID：11158950
> 
> 赞同：0
> 
> 时间：2012-06-22T15:08:21.823
> 
> 标签：cordova, sencha-touch-2

我按照 [http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)上的教程进行操作。我发现了一个问题，我看不到显示的结果 <'launch'> ，当我搜索时，我发现了 Ext 。regApplication() 已被删除？？我使用：cordova-1.8.1.js 和 sencha touch 版本 2.0.1.1

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:04:00.437

您尝试遵循的教程是为 Sencha Touch 1 制作的。ST1 和 ST2 之间有很多区别。因此，我建议您尝试这些不同帖子的答案：

[Sencha Touch 2.0 MVC教程](https://stackoverflow.com/questions/9229849/sencha-touch-2-0-mvc-tutorial)

[我需要帮助为 Sencha Touch V2 找到可靠的教程](https://stackoverflow.com/questions/7816305/i-need-help-finding-a-solid-tutorial-for-sencha-touch-v2)

希望这可以帮助

# php - 从描述中提取 src="xyz" 的 XML 数据

> ID：11158953
> 
> 赞同：0
> 
> 时间：2012-06-22T15:08:34.967
> 
> 标签：php, xml, curl

我正在尝试将我的 pin feed 合并到我的网站中。我已经让它工作了，但我需要修改它显示的内容，因为它没有按预期工作。

我需要的是从日期的描述位中提取某个数据。

这是我用来获取 XML 提要的代码：

```
<?php
$ch = curl_init("http://pinterest.com/1234/feed.rss");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$data = curl_exec($ch);
curl_close($ch);
$doc = new SimpleXmlElement($data, LIBXML_NOCDATA);

if(isset($doc->channel))
{
    parseRSS($doc);
}
function parseRSS($xml)
{
    $cnt = 9;
    for($i=0; $i<$cnt; $i++)
    {
    $url    = $xml->channel->item[$i]->link;
    $img    = $xml->channel->item[$i]->description;
    $title  = $xml->channel->item[$i]->title;
    echo '<p><a href="'.$url.'" title="'.$title.'">'.$img.'</a></p>';
    }
}
?> 
```

问题是描述如下所示，我想要的只是`src`它的值：

```
<description>&lt;p&gt;&lt;a href="/pin/1785432765530/"&gt;&lt;img src="http://media-cache-ec1.pinterest.com/upload/27099622222548513383_qJV62266Pf_b.jpg"&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;What it takes to Google’s.&lt;/p&gt;</description> 
```

有没有办法`src="http://media-cache-ec1.pinterest.com/upload/270996666522513383_qJV6666Pf_b.jpg"`摆脱描述并将其存储在`$img`另一个变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:39:41.427

html_entity_decode 和 Simple HTML DOM parser 可以解决您的问题。

（http://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:11:53.360

一些正则表达式会帮助你（[PHP 手册](http://www.php.net/manual/en/ref.pcre.php)，[维基百科](http://en.wikipedia.org/wiki/Regex)）

例如。：`.*(src=".*[^"]").*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:47:29.157

谢谢我用过的一切

```
 $cnt = 9;
    for($i=0; $i<$cnt; $i++)
    {
    $url    = $xml->channel->item[$i]->link;
    $img    = $xml->channel->item[$i]->description;
    $title  = $xml->channel->item[$i]->title;
    $pattern = '/src="([^"]*)"/';
    preg_match($pattern, $img, $matches);
    $src = $matches[0];
    unset($matches);
    //echo $src;
    echo '<p><a href="'.$url.'" title="'.$title.'"><img '.$src.'</img></a></p>';
    }
}
?> 
```

感谢您的提示

# android - 设置活动的意图过滤器

> ID：11158955
> 
> 赞同：2
> 
> 时间：2012-06-22T15:08:37.080
> 
> 标签：android, intentfilter

每当活动管理器启动系统设置时，我都会尝试接收广播。

系统设置活动的意图过滤器是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:25:56.997

No intent is broadcasted when System Settings are launched. But you can create a service and check the top activity in activity stack like that:

```
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> processes = activityManager.getRunningTasks(1);
ComponentName componentInfo = processes.get(0).topActivity;
String className = componentInfo.getClassName();    
String packageName = componentInfo.getPackageName();
if(className.equalsIgnoreCase("com.android.settings.Settings"))
{
    // DO YOUR JOB HERE
} 
```

# android - 如何在 Honeycomb 上以编程方式关闭 ActionMode 菜单？

> ID：11158957
> 
> 赞同：40
> 
> 时间：2012-06-22T15:08:38.783
> 
> 标签：android, android-fragments, android-3.0-honeycomb, contextual-action-bar

在我的应用程序中有一个 ListFragment，其中列表中的每个项目都包含一个复选框。每当用户单击其中一个复选框时，应用程序就会启动一个 ActionMode 上下文菜单。但我希望应用程序在单击另一个组件时关闭 ActionMode 菜单。我试过`Fragment#closeContextMenu()`没有成功。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-22T15:18:37.187

每当您创建/启动 ActionMode 时

```
mMode = startActionMode(....); 
```

要关闭它，请使用以下语法

```
if (mMode != null) 
 {
     mMode.finish();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-22T12:19:49.283

```
actionMode.finish(); 
```

当从动作模式调用完成方法时......它将破坏动作模式。

```
@Override
public void onDestroyActionMode(ActionMode mode) {

    //When action mode destroyed remove selected selections and set action mode to null

} 
```

并且从回调事件调用destroy方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-11T06:01:53.603

*科特林代码*

按下菜单项后使用**ActionMode.Callback**完成`ActionMode`

```
 private val actionModeCallbacks = object : ActionMode.Callback {
    override fun onCreateActionMode(mode: ActionMode, menu: Menu): Boolean {
        mode.menuInflater.inflate(R.menu.menu_action_mode, menu)
        return true
    }

    override fun onPrepareActionMode(mode: ActionMode, menu: Menu): Boolean {
        return false
    }

    override fun onActionItemClicked(mode: ActionMode, item: MenuItem): Boolean {
        when (item.itemId) {
            R.id.menu_item -> {
                mode.finish() // after click of menu item close action mode
                return true
            }
        }
        return false
    }

    override fun onDestroyActionMode(mode: ActionMode) {

    }
} 
```

**启动支持动作模式**

```
(activity as AppCompatActivity).startSupportActionMode(actionModeCallbacks) 
```

# java - 使用 Spring 时 JSF2 注释不起作用

> ID：11158963
> 
> 赞同：0
> 
> 时间：2012-06-22T15:08:56.223
> 
> 标签：java, spring, jakarta-ee, jsf-2

我无法让 JSF 注释正常工作。我花了一些时间试图弄清楚这一点。我正在使用 Maven + Tomcat7 + JSF2.16 + JDK1.7 + Spring 3 + Hibernate 4。如果我是新手，如果这很简单，请提前原谅我。

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.uk.todolist</groupId>
<artifactId>UkToDoList</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>UkToDoList</name>
<url>http://maven.apache.org</url>

<repositories>
    <repository>
        <id>prime-repo</id>
        <name>PrimeFaces Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
</repositories>

<properties>
    <spring.version>3.1.1.RELEASE</spring.version>
    <spring.security.version>3.0.5.RELEASE</spring.security.version>
</properties>

<dependencies>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>   

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>            
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <!-- JSF library -->
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-api</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Primefaces library -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.1.1</version>
    </dependency>

    <!-- Hibernate library -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.0.Final</version>
    </dependency>

    <!-- MySQL Java Connector library -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.20</version>
    </dependency>

    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>            

    <!-- Log4j library -->
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>

</dependencies>

<build>     
    <finalName>UkToDoList</finalName>
</build> 
```

我的 Faces 配置文件声明为 JSF 2，如下所示

```
 <?xml version="1.0" encoding="UTF-8"?>
    <faces-config
     xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0"> 
```

我的托管 bean 注释如下

```
 @ManagedBean
    @ViewScoped
    public class TaskManagedBean implements Serializable {

private static final long serialVersionUID = 1L;
private static final String SUCCESS = "success";
private static final String ERROR   = "error";

//NOTE: Task Service is injected
@ManagedProperty(value="#{TaskService}")
TaskService taskService; 
```

如果我像这样在 faces-config 中声明托管 bean

```
 <managed-bean>
       <managed-bean-name>taskManagedBean</managed-bean-name>
       <managed-bean-          class>com.uk.todolist.managed.bean.TaskManagedBean</managed-bean-class>
       <managed-bean-scope>session</managed-bean-scope>     
    </managed-bean> 
```

这可行，但我不明白为什么注释不起作用。

任何帮助或方向，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:23:30.237

尝试将此添加到您的 spring 上下文 XML 配置文件中。

```
<context:component-scan base-package="your.base.package" /> 
```

它应该扫描您的课程以查找 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:07:59.263

我认为您不能对 bean 使用 JSF 注释。但也许我错了

我使用与您相同的技术，并且不使用 JSF 注释。我确实喜欢这样：

```
@Component
@Scope(value = "session")
public class TaskManagedBean implements Serializable {

private static final long serialVersionUID = 1L;
private static final String SUCCESS = "success";
private static final String ERROR   = "error";

//NOTE: Task Service is injected
@Autowired
TaskService taskService; 
```

并且不要忘记像 Petter 所说的那样插入。

```
<context:component-scan base-package="your.base.package" /> 
```

您应该知道 Spring 中没有`view`作用域，您应该自己实现。但不要害怕有很多例子：[https ://www.google.fr/search?sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8&q=spring+custom+viewscope](https://www.google.fr/search?sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8&q=spring+custom+viewscope)

# python - 尝试用 Python 制作泰语翻译器，但无法使用泰语字符编写

> ID：11158968
> 
> 赞同：0
> 
> 时间：2012-06-22T15:09:22.073
> 
> 标签：python

我正在尝试制作泰语翻译器，但无法使用泰语字符书写。我在某处看到了这样做来检查默认编码是什么：

```
import sys; print(sys.getdefaultencoding()) 
```

我得到 utf-8

我的问题是我刚刚得到？当我使用泰语字符时。有没有办法可以使用它们？另一个问题我正在尝试翻译一个句子，并且想知道如何在单词之间放置一个空格。截至目前，我只是将所有单词组合在 .txt 文件中。

```
s = shelve.open("THAI.dat")
s[entry]=define
text_file = open("THAI.txt", "w+")
num = int(input("How many words are in sentence"))

while num != 0:
    trys = input("Input english word")
    if trys in s:
        print(s[trys])
        part = s[trys]
        text_file.write(part)
        num -= 1 
```

# c# - excel进程的最大数量？

> ID：11158971
> 
> 赞同：3
> 
> 时间：2012-06-22T15:09:27.283
> 
> 标签：c#, .net, excel, com, automation

如果我这样做（例如）

```
 for (int i=0;i<22;i++)
 {
     var app = new Excel.Application();
 } 
```

然后创建了 22 个 excel 流程。

但是，如果我这样做

```
 for (int i=0;i<25;i++)
 {
     var app = new Excel.Application();
 } 
```

它创建了 22 个 excel 流程，但随后大部分都消失了，只剩下少数几个。

有22个限制吗？这个可以增加吗？

谢谢！

编辑：使用以下代码不会发生：

```
 var apps = new List<Application>();
 for (int i=0;i<25;i++)
 {
      apps.Add(new Application());
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:34:24.480

垃圾收集开始了......使用以下代码，它可以工作：

```
 var apps = new List<Application>();
 for (int i=0;i<25;i++)
 {
      apps.Add(new Application());
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:16:29.733

我记得Raymond Chen的一篇文章。如果您为特定机器加载太多相同的进程，操作系统会阻止您。每台机器都不同（因为它基于机器的性能）。

但是，我不能将 25 视为限制。这似乎有点太小了，即使对于旧机器也是如此。您的任何文件是否引用了来自相同文件的数据，导致其中一些文件过早关闭，因为另一个 Excel 实例正在锁定该文件？

我需要更多信息来了解实际情况。

# ruby - 如何在 Ruby 中记忆一个可能返回 true、false 或 nil 的方法？

> ID：11158972
> 
> 赞同：16
> 
> 时间：2012-06-22T15:09:30.450
> 
> 标签：ruby, null, memoization

显然`||=`行不通

```
def x?
  @x_query ||= expensive_way_to_calculate_x
end 
```

因为如果结果是`false`or `nil`，那么`expensive_way_to_calculate_x`就会一遍又一遍地运行。

目前我知道的最好的方法是将值放入`Array`：

```
def x?
  return @x_query.first if @x_query.is_a?(Array)
  @x_query = [expensive_way_to_calculate_x]
  @x_query.first
end 
```

有没有更传统或更有效的方法来做到这一点？

**更新**我意识到我想记住`nil`除了`false`- 这一直追溯到[https://rails.lighthouseapp.com/projects/8994/tickets/1830-railscachefetch-does-not-work-with-false-boolean -as-cached-value - 我向](https://rails.lighthouseapp.com/projects/8994/tickets/1830-railscachefetch-does-not-work-with-false-boolean-as-cached-value)[Andrew Marshall](https://stackoverflow.com/users/211563/andrew-marshall)道歉，他给出了一个完全正确的答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-22T15:13:40.167

显式检查 的值`@x_query`是否`nil`改为：

```
def x?
  @x_query = expensive_way_to_calculate_x if @x_query.nil?
  @x_query
end 
```

请注意，如果这不是实例变量，则您必须检查它是否也/而不是定义，因为所有实例变量默认为`nil`.

鉴于您可以更新`@x_query`记忆值`nil`，您可以使用它`defined?`来解决所有实例变量默认为`nil`：

```
def x?
  defined?(@x_query) or @x_query = expensive_way_to_calculate_x
  @x_query
end 
```

请注意，做类似的事情`a = 42 unless defined?(a)`不会按预期工作，因为一旦解析器命中`a =`,在它到达条件*之前*`a`定义。但是，实例变量并非如此，因为它们默认为解析器在命中时没有定义它们。无论如何，我认为使用or的长块形式而不是单行with来保持一致是一个很好的习惯用法。*`nil``=``or``unless``unless``defined?`*

 ** * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-22T20:57:35.167

要考虑`nil`，请使用`defined?`查看变量是否已定义：

```
def x?
  return @x_query if defined? @x_query
  @x_query = expensive_way_to_calculate_x
end 
```

`defined?``nil`如果变量尚未定义，则返回，`"instance_variable"`否则返回字符串：

```
irb(main):001:0> defined? @x
=> nil
irb(main):002:0> @x = 3
=> 3
irb(main):003:0> defined? @x
=> "instance-variable" 
```*

# php - javascript/php 单引号

> ID：11158973
> 
> 赞同：1
> 
> 时间：2012-06-22T15:09:30.700
> 
> 标签：php, javascript, json, quote

我正在尝试这样做：

```
<?php $php_array = array ('var1' => "l'ape"); ?>

<script type="text/javascript">
var my_javascript_object = jQuery.parseJSON('<?php echo json_encode($php_array); ?>');
</script> 
```

我收到此错误“未捕获的语法错误：意外的标识符”。问题是 $php_array 中 var1 的值中的单引号。

这不起作用

```
 <?php $php_array = array ('var1' => "l\'ape"); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:14:30.597

在这种情况下，您不需要使用 JSON.parse解析您的[json 。](/questions/tagged/json "显示标记为“json”的问题")只需将其用作对象文字而不是 Javascript 字符串：

```
var my_javascript_object = <?php echo json_encode($php_array); ?>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:14:38.967

问题是您尝试将 JSON 放入 JavaScript 字符串中。

改为这样做：

```
var my_js_obj = <?php echo json_encode($php_array); ?>; 
```

JSON 字符串是一个有效的 JavaScript 表达式，您可以简单地将其直接放入您的 JS 代码中。

* * *

如果你真的想创建一个包含 JSON 的字符串（**你没有！**），你可以这样做：

```
var my_json_string = <?php echo json_encode(json_encode($php_array)); ?>;
var my_js_obj = $.parseJSON(my_json_string); 
```

# mysql - MYSQL 返回空结果集？

> ID：11158974
> 
> 赞同：1
> 
> 时间：2012-06-22T15:09:31.400
> 
> 标签：mysql

我有一个具有以下结构的表：

```
CREATE TABLE IF NOT EXISTS `user_settings` (
  `user_ID` smallint(6) unsigned NOT NULL,
  `item` varchar(50) NOT NULL,
  `value` text,
  `app_ID` tinyint(4) NOT NULL DEFAULT '0',
  KEY `user_ID` (`user_ID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

# With these data

INSERT INTO `user_settings` (`user_ID`, `item`, `value`, `app_ID`) VALUES
(3, 'statusTrainer_ID', '0', 0),
(3, 'enabledApp', '1', 0),
(3, 'enabled_office_ID', '1', 1),
(3, 'enabled_office_ID', '2', 1),
(4, 'statusTrainer_ID', '1', 0),
(1, 'enabledApp', '1', 0),
(1, 'salesCode_ID_add', '1', 1),
(1, 'salesCode_ID_add', '2', 1),
(1, 'salesCode_ID_add', '3', 1),
(1, 'salesCode_ID_add', '20', 1),
(1, 'salesCode_ID_process', '2', 1),
(1, 'salesCode_ID_process', '3', 1),
(1, 'salesCode_ID_process', '20', 1); 
```

我想运行此查询以进行数据过滤

```
SELECT `user_ID`
FROM (`user_settings`)
WHERE (
`item` =  'enabledApp'
 AND 
`value` IN ('1') 
)
 AND 
(
`item` =  'statusTrainer_ID'
 AND 
`value` IN ('0') 
) 
```

我期待“3”作为结果，但 MYSQL 返回一个空集。为什么？？谢谢你的回答。

# 更新

我通过子查询解决了

```
SELECT distinct `user_ID`
FROM (`user_settings`)
WHERE user_ID IN(
SELECT `user_ID`
FROM (`user_settings`)
WHERE (
item =  'enabledApp'
 AND 
value IN (1) 
))

AND user_ID IN(SELECT `user_ID`
FROM (`user_settings`)
WHERE (
item =  'statusTrainer_ID'
 AND 
value IN (0) 
)) 
```

## [演示](http://sqlfiddle.com/#!2/3be51/1)

但这有点复杂……有更清洁的解决方案吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:55:10.130

你需要一个或：

```
SELECT `user_ID`
FROM (`user_settings`)
WHERE ( `item` =  'enabledApp'  AND  `value` IN ('1')  )  OR
      ( `item` =  'statusTrainer_ID'  AND  `value` IN ('0')  ) 
```

它返回空集，因为项目不能同时是“enabledApp”和“statusTrainer_ID”。

哦，您正在尝试获取两者兼有的用户 ID。这样做：

```
SELECT `user_ID`
FROM `user_settings`
GROUP BY `user_ID`
HAVING max(case when `item` =  'enabledApp'  AND  `value` IN ('1') then 1 else 0 end) = 1 and
       max(case when  `item` =  'statusTrainer_ID'  AND  `value` IN ('0') then 1 else 0 end) = 1 
```

## [演示](http://sqlfiddle.com/#!2/6065b/1)

# java - 当 RAD 执行“在服务器上运行”时，WebSphere 将 EAR 文件放在哪里？以及如何在其上运行 createEJBStubs？

> ID：11158975
> 
> 赞同：1
> 
> 时间：2012-06-22T15:09:31.817
> 
> 标签：java, ejb, websphere

我有一个带有 IBM RAD 7.5 (Eclipse) 和 WebSphere 7 的基于 JavaEE 的 Web 应用程序。该应用程序具有带有远程接口的 EJB。它运行良好。

我为 JUnit 测试创建了一个新项目，并且正在尝试对 EJB 进行 JNDI 查找以对其进行测试，但出现以下错误：

“ClassCastException：org.omg.stub.java.rmi._Remote_Stub 与 com.myapp.UserServiceRemote 不兼容”

为了解决这个问题，我的理解是我必须运行 WebSphere createEJBStubs 命令来生成远程存根，以便 JUnit 应用程序（作为单独的应用程序运行）可以查找 EJB。

我的问题是：

当我通过右键单击 myappEAR 项目并选择“Run As > Run On Server”从 WebSphere 中运行我的应用程序时，WebSphere 将正在运行的 EAR 文件放在哪里？也就是说，它在哪个文件夹中？

我问是因为我的理解是我应该在它上面运行 createEJBStubs 命令，这将生成存根并将这些存根放在 EAR 中。

非常感谢任何建议，谢谢！

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:26:47.180

仅供参考，我按照此处的说明创建了一个 ANT 脚本来构建包含存根的 EJB jar：

[http://www-01.ibm.com/support/docview.wss?uid=swg21393419](http://www-01.ibm.com/support/docview.wss?uid=swg21393419)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:59:27.603

为了加快处理速度，实际上并未构建 EAR。相反，应用程序被配置为从 RAD 工作区加载每个模块或 JAR 文件。我建议导出 EAR（从 RAD 或 WAS 管理控制台），然后在结果上使用 createEJBStubs。

# linux - Node JS 实时报告（图形）模块

> ID：11158976
> 
> 赞同：0
> 
> 时间：2012-06-22T15:09:45.623
> 
> 标签：linux, web-services, node.js, load-balancing, forever

我在带有 HAProxy 负载均衡器的 Linux 机器上使用 Node JS（HTTP 服务器）构建了一个生产 Web 服务，并且想要某种图形工具来在服务器上进行实时报告。我特别想查看请求/分钟、请求失败等。人们会提出任何建议。我需要一些非侵入性的 b/c 我每天将处理 2000 万多个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:19:37.983

您是否查看过 cube ( [https://github.com/square/cube)、graphite/carbon](https://github.com/square/cube) ( [http://graphite.wikidot.com/](http://graphite.wikidot.com/) ) 或 opentsdb 来进行此类数据监控/显示？

# php - 如何设置用户权限？

> ID：11158980
> 
> 赞同：0
> 
> 时间：2012-06-22T15:09:52.527
> 
> 标签：php, mysql, sql

假设我正在使用当前的 mysql 数据库表构建一个应用程序。

我有这个查询（SELECT o. *,u.* FROM users u JOIN orders o ON (o.order_id = u.user_id) WHERE o.order_id = ?）来设置权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:16:53.060

您只需要`WHERE`在 view_order.php 中的子句中添加一些内容，以匹配`user_id`登录用户的订单 - 这将让用户只看到他们自己的订单。如果您想让管理员能够查看所有内容：

```
SELECT 
o.*,u.* 
FROM 
users u JOIN orders o ON (o.user_id = u.user_id) 
WHERE 
o.order_id = ? AND (o.user_id=? OR u.privileges='ADMIN') 
```

至少是这样的——你必须稍微调整一下，因为我不知道你是如何跟踪登录用户的详细信息的。

# sql - 这些 SQL 条件有什么区别？

> ID：11158982
> 
> 赞同：0
> 
> 时间：2012-06-22T15:09:57.347
> 
> 标签：sql, firebird

```
Select * from Example
where
1 = Case when :index = 0 then
         Case when DateEx Between :pDat1 and :pDate2 then 1 end
    else
         Case When :index = 1 or :index = 2 then
              Case When DateEx >= :pDat1 then 1 end
         end
    end 
```

和

```
Select * from Example
where 
1 = Case when :index = 0 then
            Case when DateEx Between :pDat1 and :pDat2 then 1 end
    else 1
    end
and 1 = Case When :index = 1 or :index = 2 then
             Case When DateEx >= :pDat1 then 1 end
        end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:19:49.557

第一个示例实现了 OR 条件。

以下情况是正确的......
A）。`(:index = 0) AND (DateEx Between :pDat1 and :pDate2)`
乙）。`(:index = 1 or :index = 2) AND (DateEx >= :pDat1)`

是`A OR B`。

第二个不太明显。

它有两个部分，由 分隔`AND`。但它在第一个版本中具有额外`ELSE`的内容。`A`

如果以下两项都为真，则为真...
A) `((:index = 0) AND (DateEx Between :pDat1 and :pDat2)) OR (:index <> 0)`
B)`((:index = 1 or :index = 2) AND (DateEx >= :pDat1)`

但这有点坏了。因为 if `:index = 0`, then`B`永远*不可能*为真。

其实你根本不需要任何`CASE`语句，就用这个...

```
WHERE
  ((:index = 0)               AND (DateEx Between :pDat1 and :pDate2))
  OR
  ((:index = 1 or :index = 2) AND (DateEx >= :pDat1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:51:57.260

您可以重写第一个条件：

```
(:index = 0 AND DateEx BETWEEN :pDat1 AND :pDat2) 
OR 
(:index IN (1, 2) AND DateEx >= :pDat1) 
```

第二个条件可以改写：

```
(:index <> 0 OR DateEx BETWEEN :pDat1 AND :pDat2) 
AND
(:index IN (1, 2) AND DateEx >= :pDat1) 
```

显然，第二个条件可以简化为：

```
:index IN (1, 2) AND DateEx >= :pDat1 
```

因此，不同之处在于第一个查询处理 :index = 0 时的情况，而第二个查询仅适用于 :index = 1 或 :index = 2。

# microsoft-metro - 地铁应用程序的 GetTempFileName

> ID：11158986
> 
> 赞同：4
> 
> 时间：2012-06-22T15:10:18.587
> 
> 标签：microsoft-metro

我需要使用 c++ (WINRT/Metro) 在我的应用程序中生成唯一的临时文件名。如我所见，Win32 API`GetTempFileName`被标记为仅在桌面上使用。

Metro 风格应用程序的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-22T06:44:26.490

Yo 可以通过将文件保存在临时存储中并通过 GUID 命名它们来实现此目的。例子：

```
// Get temporary storage folder    
var tempFolder = Windows.Storage.ApplicationData.Current.TemporaryFolder;

// generate unique filename
var filename = Guid.NewGuid().ToString();
StorageFile myFile = await tempFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting); 
```

# python - 在 Python 中重绘底图上的绘图

> ID：11158988
> 
> 赞同：3
> 
> 时间：2012-06-22T15:10:25.967
> 
> 标签：python, matplotlib, wxpython, scatter-plot, matplotlib-basemap

我正在底图上绘制散点图。但是，具有此散点图的数据会根据用户输入而变化。我想清除数据（只有数据——不是整个底图）并重新绘制新的散点。

这个问题很相似，但没有得到回答（http://stackoverflow.com/questions/8429693/python-copy-basemap-or-remove-data-from-figure）

目前我正在用 clf(); 但是，这需要我重新绘制整个底图和散点图。最重要的是，我正在 wx 面板内进行所有重绘。底图重绘需要太长时间，我希望有一种简单的方法可以简单地重新绘制散点。

```
#Setting up Map Figure 
self.figure = Figure(None,dpi=75) 
self.canvas = FigureCanvas(self.PlotPanel, -1, self.figure) 
self.axes = self.figure.add_axes([0,0,1,1],frameon=False) 
self.SetColor( (255,255,255) ) 

#Basemap Setup 
self.map = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64, 
                urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45, 
                lon_0=-95, resolution='h', area_thresh=10000,ax=self.axes) 
self.map.drawcoastlines() 
self.map.drawcountries() 
self.map.drawstates() 
self.figure.canvas.draw() 

#Set up Scatter Plot 
m = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64, 
        urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45, 
        lon_0=-95, resolution='h', area_thresh=10000,ax=self.axes) 

x,y=m(Long,Lat) 

#Scatter Plot (they plot the same thing) 
self.map.plot(x,y,'ro') 
self.map.scatter(x,y,90) 

self.figure.canvas.draw() 
```

然后我对我的 (x,y) 进行某种类型的更新...

```
#Clear the Basemap and scatter plot figures
self.figure.clf() 
```

然后我重复上面的所有代码。（我还必须为我的面板重做我的盒子尺寸器——我没有包括这些）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:48:13.153

[matplotlib.pyplot.plot](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.plot)文档提到 plot() 命令返回具有 xdata 和 ydata 属性的Line2D 艺术家，因此您可以执行以下操作：

```
# When plotting initially, save the handle
plot_handle, = self.map.plot(x,y,'ro') 
...

# When changing the data, change the xdata and ydata and redraw
plot_handle.set_ydata(new_y)
plot_handle.set_xdata(new_x)
self.figure.canvas.draw() 
```

不幸的是，我还没有设法让上述内容适用于收藏或[3d 投影](https://stackoverflow.com/q/10992442/1427975)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T14:45:25.193

大多数绘图函数返回`Collections`对象。如果是这样，那么您可以使用`remove()`方法。在您的情况下，我会执行以下操作：

```
# Use the Basemap method for plotting
points = m.scatter(x,y,marker='o')
some_function_before_remove()

points.remove() 
```

# javascript - Mootools 元素到 HTML

> ID：11158996
> 
> 赞同：3
> 
> 时间：2012-06-22T15:10:47.900
> 
> 标签：javascript, dom, mootools, object-to-string

我的问题很简单。我需要将 Element 对象转换为 html 字符串

```
var thumb = new Element('img',{'src':"big.jpg"});
console.log( thumb.?????() ); //some magical method here 
```

应该返回（作为字符串）

```
'<img src="_big.jpg">' 
```

我试过了，`.get('html')`但它什么也没返回，显然是因为 img 标签里面什么都没有。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:56:04.530

只是代理它。

```
var html = new Element('div').adopt(yourel).get('html'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:26:15.273

你试过[`outerHTML`](http://msdn.microsoft.com/en-us/library/ms534310.aspx)吗？我很确定你需要的是：

```
var html = selector.outerHTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:53:46.657

> 从 html 字符串返回元素的集合。

[http://mootools.net/docs/more/Element/Elements.From](http://mootools.net/docs/more/Element/Elements.From)

# jquery-ui-sortable - jQuery UI Sortable，如何修复列表高度？

> ID：11158999
> 
> 赞同：2
> 
> 时间：2012-06-22T15:11:03.470
> 
> 标签：jquery-ui-sortable

我正在使用 jQuery UI “可排序”插件来选择和排序项目。

我将插件设置为有两个列表，一个用于“可用”项目，第二个用于“选定”项目。

该插件按预期工作，我可以将项目从一个列表移动到另一个列表。

但是，当我从列表中删除一项时，列表的高度会降低。有什么办法可以解决吗？

实际上，我想将两个列表的外边框设置为左侧项目的初始高度（一开始，所有项目都在第一个列表中）

这张图片描述了我想做的事情![在此处输入图像描述](../Images/1e124fb6502a7ae81873eaefcfdcdd6f.png)：

红线是我想要的。我希望两个列表都具有这个大小，并且是固定的。

这是我的代码（实际上是从 asp.net 网页生成的）：

```
<script type="text/javascript">
    $(function () {
        $("#sourceItems").sortable({
            connectWith: "#targetItems",
            update: function (event, ui) {
                $("#selectedUserIDs").val(
                    $("#targetItems").sortable('toArray')
                    );
            },
            placeholder: "ui-state-highlight"
        });
        $("#targetItems").sortable({
            connectWith: "#sourceItems",
            placeholder: "ui-state-highlight"
        });

        $("#sourceItems, #targetItems").disableSelection();
    });
</script>
<style type="text/css">
#sourceItems, #targetItems { list-style-type: none; margin: 0; padding: 0; margin-right: 10px; background: #eee; padding: 5px; width: 230px; border:solid 1px black; }
#sourceItems li, #targetItems li { margin: 5px; padding: 5px; width: 200px; height: 12px; }
</style>
<div style="float: left; display: inline-block; width:fill-available">
    <p>Available :</p>
    <ul id="sourceItems" class="droptrue">
        <li class="ui-state-default" id='i1'>item1</li>        
        <li class="ui-state-default" id='i32'>item2</li>        
        <li class="ui-state-default" id='i47'>item3</li>        
        <li class="ui-state-default" id='i46'>item4</li>
    </ul>
</div>

<div style="float: left; display: inline-block;">
    <p>Selected :</p>
    <ul id="targetItems" class="droptrue">
    </ul>
</div>
<div style="display: none">
    <input name="selectedUserIDs" type="text" id="selectedUserIDs" />
</div> 
```

隐藏的输入字段是我用于存储所选项目的容器（随表单发布）。

我已经尝试添加`.height($("#sourceItems).outerHeight());`到*两个*列表中，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T20:12:34.947

我来这里是为了寻找类似但更通用的解决方案来解决同一问题。这里的解决方案对我没有帮助，但我自己想通了，并认为分享它可能会有所帮助。

我不想修复两个可排序的列表，我只是希望它们保持相同的高度。当您处理大量项目时，在列表周围有两个动态大小的框会使其难以处理，因为一个框比另一个小得多。将两个框都设置为固定高度也不是最佳的，因为一旦列表中的项目数超过该高度，最终会出现滚动条。我希望这两个框使用 JQuery 可排序、connectWith 代码的内置功能动态扩展，但我也希望它们都设置为两者中的较大者。为此，我发现您可以修改列表上的填充，并且该区域仍然是用于拖放目的的可交互区域。

因此，要使两个 connectWith 可排序列表保持相同的高度，您可以为 over 事件添加以下处理程序：

```
 over: function(event, ui) {
           var heightDiff = $("#sourceItems").height() - $("#targetItems").height();
           $("#sourceItems").css('padding-bottom', (Math.abs(heightDiff) - heightDiff) / 2 + 'px');
           $("#targetItems").css('padding-bottom', (Math.abs(heightDiff) + heightDiff) / 2 + 'px');
        } 
```

这是使用此事件处理程序扩展另一个示例的提琴手示例：http: [//jsfiddle.net/TLrn7/](http://jsfiddle.net/TLrn7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:20:02.767

**编辑：**

```
$(document).ready(function(){
    $("#targetItems").height($("#sourceItems").height());
    $("#sourceItems").height($("#sourceItems").height());
}); 
```

[http://jsfiddle.net/JEY4U/1/](http://jsfiddle.net/JEY4U/1/)

**老答案：**

使用“帮助”功能，确保拖动的元素具有适当的宽度和高度。
像这样的东西：

```
helper: function(event, ui) {
    $(ui).width($(ui).width());
    $(ui).height($(ui).height());
    ui.children().each(function() {
        $(this).width($(this).width());
    });
    return ui;
} 
```

你像这样使用它：

```
$(SOME_OBJECT).sortable({
    connectWith: ...,
    placeholder: ...,
    ......
    helper: function....
}); 
```

当然，您可以编写任何您喜欢的服装辅助函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T14:05:51.400

jQuery UI 列表高度使用 CSS 设置为特定高度。300px 高度的示例。

```
.ui-autocomplete {
  max-height: 300px;
  overflow-y: auto;
  /* prevent horizontal scrollbar */
  overflow-x: hidden;
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
  height: 300px;
} 
```

在此处阅读文档：[https ://jqueryui.com/autocomplete/#maxheight](https://jqueryui.com/autocomplete/#maxheight)