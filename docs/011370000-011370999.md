# StackOverflow 问答 11370000-11370999

# jquery - 在 jQuery 中遍历 XML DOM

> ID：11370003
> 
> 赞同：1
> 
> 时间：2012-07-06T21:39:55.303
> 
> 标签：jquery

我是 Jquery 的新手，正在努力学习。但我被这个问题困住了。

我有来自 WCF 服务的以下响应。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">      
<s:Header />
  <s:Body>
    <GetLabelDetailsResponse xmlns="http://tempuri.org/">
      <GetLabelDetailsResult xmlns:a="http://schemas.datacontract.org/2004/07/Rework"        xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <a:ContainerDetails>
      <a:BarCodeStatus>4</a:BarCodeStatus>
      <a:BarCodeStatusDesc />
      <a:LabelGS1>011030310036099721336</a:LabelGS1>
      <a:LabelType>EA</a:LabelType>
      <a:NumberOfChildren>0</a:NumberOfChildren>
      <a:ParentGS1>012030310036099421511</a:ParentGS1>
      <a:ParentSerial>012030310036099421511</a:ParentSerial>
      <a:ParentType>CSE</a:ParentType>
      <a:ProductCode>R0010221130</a:ProductCode>
      <a:ProductDescription>R0010221130-H-688 MONOBUTYL ETHER</a:ProductDescription>
      <a:TypeName />
    </a:ContainerDetails>
  </GetLabelDetailsResult>
</GetLabelDetailsResponse>  </s:Body></s:Envelope> 
```

我正在尝试解析 BarCodeStatus 标记的值。但我不知道如何获得这个价值。我的网页中有以下代码。这显示了所有节点的值，但是当我尝试找到 BarCodeStatus 节点时，我什么也没有得到（balnk 值）。

```
success: function (data) {
    $(data).find("GetLabelDetailsResponse").each(function () {
        alert($(this).find("GetLabelDetailsResult").text());
    });
} 
```

有人可以指出我如何从响应中获取 BarCodeStatus 标签的值的正确方向吗？

提前致谢， 拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:05:35.410

您需要转义[XML 命名空间](http://www.w3schools.com/XML/xml_namespaces.asp)( `a:`& `s:`) 中的冒号。

## [例子：](http://jsfiddle.net/7H86B/1/)

```
var s = $('<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header />  <s:Body>    <GetLabelDetailsResponse xmlns="http://tempuri.org/">      <GetLabelDetailsResult xmlns:a="http://schemas.datacontract.org/2004/07/Rework"        xmlns:i="http://www.w3.org/2001/XMLSchema-instance">        <a:ContainerDetails>      <a:BarCodeStatus>4</a:BarCodeStatus>      <a:BarCodeStatusDesc />      <a:LabelGS1>011030310036099721336</a:LabelGS1>      <a:LabelType>EA</a:LabelType>      <a:NumberOfChildren>0</a:NumberOfChildren>      <a:ParentGS1>012030310036099421511</a:ParentGS1>      <a:ParentSerial>012030310036099421511</a:ParentSerial>      <a:ParentType>CSE</a:ParentType>      <a:ProductCode>R0010221130</a:ProductCode> <a:ProductDescription>R0010221130-H-688 MONOBUTYL ETHER</a:ProductDescription><a:TypeName /></a:ContainerDetails></GetLabelDetailsResult></GetLabelDetailsResponse>  </s:Body></s:Envelope>');

//Find by the Ordinal positon 
s.find("GetLabelDetailsResponse").each(function () {
    alert($(this).find("GetLabelDetailsResult").children().children().eq(0).text());
});

//Escape the namespaces
s.find("GetLabelDetailsResponse").each(function () {
    alert($(this).find("GetLabelDetailsResult > a\\:ContainerDetails > a\\:BarCodeStatus").text());
});
​ 
```

如果您需要更全面的 jquery 命名空间支持，请查看[XML Namespace Selectors for jQuery](http://www.rfk.id.au/blog/entry/xmlns-selectors-jquery/)

# log4j - 如何以编程方式确定 log4j 中何时发生翻转？

> ID：11370007
> 
> 赞同：3
> 
> 时间：2012-07-06T21:40:12.840
> 
> 标签：log4j

我正在尝试使用 log4j 编写 CSV 文件。每次创建日志文件时，必须将 CSV 标头写入日志文件的顶部。例如，所有这些滚动文件必须在日志文件的第一行包含以下内容：

> log.0 时间戳，名称，最小值，最大值
> 
> log.1 时间戳、名称、最小值、最大值
> 
> log.2 时间戳、名称、最小值、最大值

是否可以确定何时发生翻转以便我可以附加标题？

谢谢。

PS：我知道有很多开源 CSV 编写器，但我不想使用它们，因为我想使用我们软件中现有的日志功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:36:44.033

如果您查看 RollingFileAppender 的 log4j 文档，它有一个名为 rollOver 的方法。

[http://logging.apache.org/log4j/1.2/apidocs/index.html](http://logging.apache.org/log4j/1.2/apidocs/index.html)

您需要实现一个从 RollingFileAppender 继承的自定义文件附加程序，并覆盖 rollOver 方法。我想您可以只调用 super.rollOver，然后在将任何内容记录到新文件之前将您想要的任何内容作为标题写入新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T03:50:25.357

我用这个

```
public class MyRoller extends RollingFileAppender {

@Override
public void rollover() {
    super.rollover();

    final LoggingEvent event = new LoggingEvent();
    event.setMessage("CSV_HEADER;1;2;3;4;...");
    event.setLevel(Level.INFO);

    append(event);
} 
```

}

# python - 使用 py2app 制作的可执行文件可以包含其他终端脚本并运行它们吗？

> ID：11370012
> 
> 赞同：13
> 
> 时间：2012-07-06T21:40:48.673
> 
> 标签：python, macos, py2app

所以我有一个运行良好的 OS X 的 Python 应用程序。它运行一个外部终端脚本，我想将它包含在我的 python 应用程序中。理想情况下，我能够运行 py2app 并将这个脚本与它捆绑到可执行文件中，然后能够包含它并在我的代码的 python 部分中运行它。这可能吗？

提前致谢！

额外编辑：我正在使用的脚本已编译。我不能只看里面并粘贴它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T00:14:44.263

请参阅[http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#option-reference](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#option-reference)并查看 --resources 参数。例如：

```
python setup.py py2app --resources foo 
```

如果这是一个 shell 脚本，那将是一件非常有效的事情。对于二进制可执行文件，它有点 hacky。首先，p2app 的文档清楚地写着“不是代码！”。其次，OS X 文档说不要将可执行文件放在 Resources 目录中。这样做的主要原因是代码签名：默认设置“密封”资源中的所有内容作为主应用程序签名的一部分，但单独的可执行文件不应该以这种方式密封，它们应该单独签名。

然而，话虽如此，它仍然可以工作。除了它可能不会以 +x 权限结束，因此在您的 py2app 步骤之后，您必须“chmod +x MyApp.app/Contents/Resources/foo”以使其可运行。

您还可以使用 distutils package_data、data_files 和/或 MANIFEST 东西来添加具有任意相对路径的任意文件，这可能是一个更好的解决方案，但它更复杂。

无论哪种方式，在您的脚本中，您都应该使用与包相关的路径，您可以通过 PyObjC 轻松访问该路径。鉴于您使用的是 PowerPC 可执行文件，您可能需要如此多的向后兼容性，以至于您不能依赖它，在这种情况下，您可能只需要使用“../Resources/foo”，否则，它看起来像这样：

```
import Foundation
# ...
bundle = Foundation.NSBundle.mainBundle()
path = bundle.pathForResource_ofType_('foo', None) 
```

然后您可以使用 NSTask 或 subprocess、Popen、os.system 等启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:51:41.710

您始终可以包含**os**模块并调用`os.system(script);`. 它在终端/命令行中执行给定的参数。例如：

```
import os
script = " a big long bash script "
os.system(script); 
```

# c++ - 返回奇怪值的指针的引用

> ID：11370020
> 
> 赞同：2
> 
> 时间：2012-07-06T21:41:38.893
> 
> 标签：c++, pointers, reference

谁能向我解释为什么这段代码有效（为什么它返回一个值）？

```
int main()
{
    int *ptr = new int(113);
    int &rPtr = *ptr;

    delete ptr;

    cout << rPtr << endl;

    return 0;
} 
```

基本上，这是我得到的返回值：

```
-572662307 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:44:39.780

你正在做的事情会导致未定义的行为，所以你得到这个数字的事实是完全合理的行为。

当您执行此序列时：

```
int *ptr = new int(113);
int &rPtr = *ptr; 
```

该引用`rPtr`现在引用您使用 line 创建的整数`new int(113)`。在下一行，您执行

```
delete ptr; 
```

这将删除 that `int`，这意味着该对象不再存在。任何指向它的指针或引用现在都引用一个已释放的对象，这会导致未定义的行为。因此，当您`rPtr`使用

```
cout << rPtr << endl; 
```

任何事情都有可能发生。在这里，您只是获取垃圾数据，但程序很容易崩溃或报告调试错误消息。

有趣的是：您打印的值 (-572662307)，被视为 32 位无符号值，是 0xDDDDDDDD。我敢打赌，这是内存分配器将一个值放入已释放的内存中，以帮助您调试像这样的内存错误。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:43:36.940

您正在调用**未定义的行为**。删除指针后引用不再有效：

```
int *ptr = new int(113);
int &rPtr = *ptr;
//rPtr references the memory ptr points to
delete ptr;
//the memory is released
//the reference is no longer valid
cout << rPtr << endl;
//you try to access an invalid reference
//anything can happen at this point 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:43:44.280

对象的引用在所有块范围（在这种情况下为函数范围）中都是活动的，所以当你删除指针时，一些垃圾在这个地址并且输出显示它。

# ruby-on-rails - Rails + Paperclip + AWS S3 has_attached_file 方法：为什么这个字符串插值不起作用？

> ID：11370022
> 
> 赞同：1
> 
> 时间：2012-07-06T21:41:42.357
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, string-interpolation

在这里，我有一段代码应该根据我对 Ruby 中字符串插值的了解来工作。它在模型类中：“s3_file”

基本上我想要完成的是在将文件保存到 AWS S3 时，我想将它们保存在运行时使用以下字符串插值创建的文件夹下。我正在使用 Devise 和 cancan 作为授权和身份验证 gem

下面的代码有效：

```
 Paperclip.interpolates :prefix  do |attachment, style|
    "#{Date.today.to_s }/system"
 end

 has_attached_file(  :upload,
                  :path => ":prefix/:basename.:extension",
                  :storage => :s3,
                  :s3_credentials => {:access_key_id => "XXX",
                                      :secret_access_key => "XXX"},
                  :bucket => "XXX"
                ) 
```

* * *

但是，我正在尝试获取用户电子邮件并将其插入回形针块中。此代码无法按预期工作。此代码的结果并非异常，但 @curr_user_email 始终为空，因此 AWS S3 上的文件夹没有名称。但是该方法确实创建了一个文件夹。我该如何纠正？

这段代码仍然**不起作用**

```
if(@curr_user_signed_in)
  @aPrefix = "#{Date.today.to_s }/#{@curr_user_email}"
else
  @aPrefix = "#{Date.today.to_s }/system"
end

Paperclip.interpolates :prefix  do |attachment, style|
   @aPrefix
end

has_attached_file(  :upload,
                  :path => ":prefix/:basename.:extension",
                  :storage => :s3,
                  :s3_credentials => {:access_key_id => "xxx",
                                      :secret_access_key => "xxx"},
                  :bucket => "xxx"
                ) 
```

在我的控制器中，我有这段代码：

```
 def index
   @s3_files = S3File.all

   @curr_user_signed_in = false
   if(user_signed_in?)
     @curr_user_signed_in = true
     @curr_user_email = current_user.email
   end
   respond_to do |format|
     format.html # index.html.erb
     format.json { render json: @s3_files }
   end
  end 
```

所以真正的问题是这些@curr_user_signed_in = true @curr_user_email = current_user.email 被设置并且不为空，但由于某种原因它们不能被读入回形针块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:36:31.150

看起来你需要使用回形针插值。真的要归功于这个家伙：

[https://stackoverflow.com/a/852768/931209](https://stackoverflow.com/a/852768/931209)

这是我认为应该可以解决您的问题的片段。

```
 # interpolate in paperclip
    Paperclip.interpolates :maybe_user  do |attachment, style|
      @prefix =  "#{Date.today.to_s }/system/"
      if(user_signed_in?)
      {
        @prefix = "#{Date.today.to_s }/#{current_user.id}/"
      }
      @prefix
    end 
```

然后...

```
 has_attached_file(:upload,
              :path => ":maybe_user/:basename.:extension",
              :storage => :s3,
              :s3_credentials => {:access_key_id => "XXXXX",
                                  :secret_access_key => "XXX"},
              :bucket => "XXX"
            ) 
```

这是回形针网站上的文档：

[https://github.com/thoughtbot/paperclip/wiki/interpolations](https://github.com/thoughtbot/paperclip/wiki/interpolations)

希望有帮助！

编辑：如果这给了你任何麻烦，只需`.to_s`在字符串中添加一个，我认为你应该没问题。虽然，我不知道为什么会这样。

## 更新 -- 7/7 -- 内容从下面开始

**前言：**我没用过devise。

无法从模型中访问设计中的 current_user 方法。它仅在控制器中可用。

[https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L33](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L33)

您需要将 attr_accessor 添加到模型（S3File？）到当前用户，然后在模型中引用该实例变量。

控制器：

```
class S3FileController < ApplicationController

    def create
        s = S3File.new

        if user_signed_in?
            s.current_user = current_user
        else
            s.current_user = nil
        end

        # Alternatively written
        # user_signed_in? ? s.current_user = current_user : s.current_user = nil

        s.upload = params[:file]
        s.save

    end

end 
```

模型：

```
class S3File < ActiveRecord::Base

    attr_accessor :current_user

    Paperclip.interpolates :maybe_user  do |attachment, style|
      @prefix =  "#{Date.today.to_s }/system/"
      if(@current_user)
      {
        @prefix = "#{Date.today.to_s }/#{current_user.id}/"
      }
      @prefix
    end 

end 
```

我相信这应该可以工作，因为回形针在保存 S3File 之前没有处理文件。然后，您可以通过访问 User 对象，`@current_user`这样您就可以对插值执行类似的操作：

```
Paperclip.interpolates :prefix  do |attachment, style|
   @pre = "#{Date.today.to_s}/system"
   if(@current_user)
     @pre = "#{Date.today.to_s}/#{@current_user.email}"
    end
    @pre
end 
```

有几点需要注意：

1.) 神奇之处在于`attr_accessor :current_user`它允许您将 current_user 对象的值存储到 S3File。如果您想存储更多信息，您可以添加任意数量的其他 attr_accessors。

2.) 并不是说​​它可能没有用例，但一般来说，您不想从模型中访问控制器可用的方法......这有点违反 MVC 的原则，因为身份验证应该在控制器中完成，而不是在模型中。我是根据我自己的经验这么说的，我很久以前就试图用`authlogic`我的（失败的）结果来做到这一点。YMMV，这只是思考的食物。

3.）我很确定你必须在回形针块内进行所有插值。也没有太多理由不这样做。

**[附录]**

4.) 控制器中设置的实例变量对模型不可用。它们的范围仅限于创建它们的类...这就是我使用 attr_accessor =) 的原因

**[/附录]**

希望这能让你更进一步！祝你好运。

# java - Java：显示客户端 IP 和端口号

> ID：11370024
> 
> 赞同：1
> 
> 时间：2012-07-06T21:42:01.857
> 
> 标签：java, udp

您好，我写了一个小型 UDP 服务器程序。我知道显示主机 IP 的代码很容易使用以下代码：

```
System.out.println("Listening Port: " + serverSocket.getLocalPort());
System.out.println("IP: " + myIp.getHostAddress()); 
```

有没有办法显示连接到服务器的客户端的 IP 和端口号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:48:49.550

当您收到 UDP 时`DatagramPacket`，您可以从数据包的来源处检索远程 IP`DatagramPacket.getAddress()`

**编辑** 如果您希望获取 IP 地址的字符串表示形式，只需使用`DatagramPacket.getAddress().toString()`.

例子：

```
DatagramPacket p = new DatagramPacket(buffer, 
buffer.length); 
ds.receive(p);  // Receive data here... 
System.out.println("Received data packet from :"+p.getAddress().toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:33:32.323

About that sample: `String clientip = DatagramPacket.getAddress();` why don't you just cast it to `String`.

```
String clientip = (String) DatagramPacket.getAddress(); 
```

Though i don't really have a Java Compiler at the moment. but just try that. Will get back really soon.

# ajax - 接缝ajax文件上传

> ID：11370025
> 
> 赞同：1
> 
> 时间：2012-07-06T21:42:17.010
> 
> 标签：ajax, asyncfileupload, seam2

我已经研究了 Ajax 文件上传的几个组件，并且知道 RichFaces 有一个，但我正在寻找更简单的东西。它应该呈现为类似于文件类型的基本输入。我想如果我能弄清楚如何设置 RichFaces 的样式就好了，但要让它看起来很基本，需要大量的调整。

基本上，我只想在模式面板上一次做一个文件，我不想通过提交表单来终止对话。我看过一些 jQuery 的东西，但不知道如何将它连接到后端。大多数示例使用 PHP。在我看来，我将不得不编写一个 servlet 来处理上传。这是正确的，还是我忽略了一些更容易让我绑定到 Seam 支持实体的东西？

# javascript - javascript 大写

> ID：11370026
> 
> 赞同：0
> 
> 时间：2012-07-06T21:42:18.003
> 
> 标签：javascript, jquery, capitalization

```
var font_name = $(".font").val(); 
```

我的 JavaScript 代码中有这个。在我的 html 中，我有一个带有类的输入表单`.font`。

我想将每个单词的第一个字母大写`.font`，例如，如果有人输入`Lucida sans`它会变成`Lucida Sans`. 我找不到为你做这件事的 jQuery 方法，所以我想我必须使用实际的 JavaScript，但我真的不知道怎么做。

```
var font_first = font_name.substr(0,1);
var font = font_first.toUpperCase() + font_name.substr(1, font_name.length - 1); 
```

我用它来大写整个字体名称的第一个字母，但正如我所说，我需要将每个单词的第一个字母大写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:46:44.310

你不能只使用CSS吗？

```
.font {
    text-transform: capitalize;
} 
```

在 jQuery 中：

```
$(".font").css("text-transform","capitalize"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T21:45:42.667

您可以分割空间，将“大写”功能映射到每个部分，然后将它们重新组合在一起。

```
var font_name = $(".font").val();
font_name = font_name.split(" ")
                     .map(function(a) {return a.charAt(0).toUpperCase()+a.substr(1);})
                     .join(" "); 
```

或者，请参阅[`ucwords`PHPJS](http://phpjs.org/functions/ucwords:569)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:32:40.333

在纯 JavaScript 中：

```
function firstcap(str) {
  var len = str.length;
  var re = /^\s$/;
  var special = true; // signalizes whether previous char is special or not
  for (var i=0; i<len; i++) {
    var code = str.charCodeAt(i);
    if (code>=97 && code<=122 && special) {
      str = str.substr(0, i) + String.fromCharCode(code-32) + str.substr(i+1);
      special = false;
    }
    else if (re.test(str[i])) {
      special = true;
    }
  }
  return str;
}

alert(firstcap('lucida sans')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T00:02:25.117

这是我刚刚写完的一个 JavaScript 函数。由于我首先检查了 StackOverflow 以查看此 JavaScript 是否存在，但不容易找到，因此我将其发布给大家使用。希望对大家有帮助，如果可以的话，给我点个赞吧：）

```
var FormatMyTitle = function(UnformattedData) {
    var OutgoingData = UnformattedData;
    if (UnformattedData.indexOf("") != -1) {
        var OptionNameParts = UnformattedData.split(' ');
        for (var i=0; i<OptionNameParts.length; i++) {
            var OptionNamePieces = OptionNameParts[i].split('');
            if (OptionNamePieces.length >= 1) {
                var FirstLetter = ''+OptionNamePieces[0]+'';
                OptionNamePieces[0] = FirstLetter.toUpperCase();
            }
            OptionNameParts[i] = OptionNamePieces.join('');
        }
        OutgoingData = OptionNameParts.join(' ');
    }
    return OutgoingData;
}; 
```

你会像这样使用它，例如，使用你的原始变量（font_name）：

```
var FormattedTitle = FormatMyTitle(font_name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T21:45:24.083

```
var str = "hello world";
str = str.toLowerCase().replace(/\b./g, function(letter) {
    return letter.toUpperCase();
});
alert(str); 
```

从这里[堆栈](http://www.google.sk/url?sa=t&rct=j&q=jquery%20first%20letter%20capital&source=web&cd=1&ved=0CFUQFjAA&url=https://stackoverflow.com/questions/5122402/javascript-jquery-uppercase-first-letter-of-variable&ei=L1z3T8WANI7S4QT-_5yKBw&usg=AFQjCNEs8F1QOkyt3iO_epWLuUNa3jgzQw&cad=rja)

# algorithm - Floyd-Warshall：所有最短路径

> ID：11370041
> 
> 赞同：16
> 
> 时间：2012-07-06T21:44:28.927
> 
> 标签：algorithm, shortest-path, floyd-warshall

我已经实现了 Floyd-Warshall 以返回每对节点/顶点之间的最短路径的距离以及每对节点/顶点之间的一条**最短**路径。

有没有办法让它返回每条最短路径，即使对于每对节点有多个最短路径绑定？（我只是想知道我是否在浪费时间尝试）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T01:35:29.020

如果您只需要计算存在多少不同的最短路径，则可以在`count`数组之外保留一个`shortestPath`数组。[这是对来自wiki](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm#Pseudocode)的伪代码的快速修改。

```
procedure FloydWarshall ()
    for k := 1 to n
        for i := 1 to n
            for j := 1 to n
                if path[i][j] == path[i][k]+path[k][j] and k != j and k != i
                    count[i][j] += 1;
                else if path[i][j] > path[i][k] + path[k][j]
                    path[i][j] = path[i][k] + path[k][j]
                    count[i][j] = 1 
```

如果您需要找到所有路径的方法，您可以`vector/arraylist`为每对存储一个相似的结构以展开和折叠。这是来自同一个[wiki](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm#Path_reconstruction)的伪代码的修改。

```
procedure FloydWarshallWithPathReconstruction ()
    for k := 1 to n
        for i := 1 to n
            for j := 1 to n
                if path[i][k] + path[k][j] < path[i][j]
                    path[i][j] := path[i][k]+path[k][j];
                    next[i][j].clear()
                    next[i][j].push_back(k) // assuming its a c++ vector
                else if path[i][k] + path[k][j] == path[i][j] and path[i][j] != MAX_VALUE and k != j and k != i
                    next[i][j].push_back(k) 
```

注意：如果`k==j`或`k==i`，这意味着您正在检查`path[i][i]+path[i][j]`或`path[i][j]+path[j][j]`，两者都应该等于`path[i][j]`并且不会被推入`next[i][j]`。

应该修改路径重建以处理`vector`. 在这种情况下，计数将是 each`vector`的大小。这是来自同一个[wiki](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm#Path_reconstruction)的伪代码 (python) 的修改。

```
procedure GetPath(i, j):
    allPaths = empty 2d array
    if next[i][j] is not empty:
        for every k in next[i][j]:
            if k == -1: // add the path = [i, j]
                allPaths.add( array[ i, j] ) 
            else: // add the path = [i .. k .. j]
                paths_I_K = GetPath(i,k) // get all paths from i to k
                paths_K_J = GetPath(k,j) // get all paths from k to j
                for every path between i and k, i_k in paths_I_K:
                    for every path between k and j, k_j in paths_K_J:
                        i_k = i_k.popk() // remove the last element since that repeats in k_j
                        allPaths.add( array( i_k + j_k) )

    return allPaths 
```

注：`path[i][j]`是邻接表。在初始化的同时`path[i][j]`，还可以通过向数组中`next[i][j]`添加 a来进行初始化。`-1`例如，初始化`next[i][j]`将是

```
for every edge (i,j) in graph:
   next[i][j].push_back(-1) 
```

这会照顾边缘成为最短路径本身。您必须在路径重建中处理这种特殊情况，这就是我正在做的事情`GetPath`。

编辑：“MAX_VALUE”是距离数组中的初始化值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-08T05:39:54.160

在某些情况下，当前批准的答案中的“计数”功能会失败。更完整的解决方案是：

```
procedure FloydWarshallWithCount ()
for k := 1 to n
    for i := 1 to n
        for j := 1 to n
            if path[i][j] == path[i][k]+path[k][j]
                count[i][j] += count[i][k] * count[k][j]
            else if path[i][j] > path[i][k] + path[k][j]
                path[i][j] = path[i][k] + path[k][j]
                count[i][j] = count[i][k] * count[k][j] 
```

这样做的原因是对于任何三个顶点 i、j 和 k，可能存在从 i 到 k 到 j 的多条最短路径。例如在图中：

```
 3             1
(i) -------> (k) ---------> (j)
 |            ^
 |            |
 | 1          | 1
 |     1      |
(a) -------> (b) 
```

从 i 到 j 通过 k 有两条路径。`count[i][k] * count[k][j]`求从 i 到 k 的路径数，以及从 k 到 j 的路径数，并将它们相乘以求出路径 i -> k -> j 的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T06:55:35.643

[投票最多的答案](https://stackoverflow.com/a/11371588/208273)的补充：

1.  在`GetPath`函数中，命令

> i_k = i_k.popk() // 删除最后一个元素，因为它在 k_j 中重复

应该向前移动一行，换句话说，进入paths_I_K的循环。

2.  在 GetPath 结束时，应删除重复的路径。

对应的 Python 代码如下，并检查了其正确性：

```
def get_all_shortest_paths_from_router(i, j, router_list, it=0):                                                                                                    
    all_paths = []
    if len(router_list[i][j]) != 0:
        for k in router_list[i][j]:
            if k == -1: # add the path = [i, j]
                all_paths.append([i, j])
            else: # add the path = [i .. k .. j]
                paths_I_K = get_all_shortest_paths_from_router(i,k,router_list,it+1) # get all paths from i to k
                paths_K_J = get_all_shortest_paths_from_router(k,j,router_list,it+1) # get all paths from k to j
                for p_ik in paths_I_K:
                    if len(p_ik) != 0:
                        p_ik.pop() # remove the last element since that repeats in k_j
                    for p_kj in paths_K_J:
                        all_paths.append(p_ik + p_kj)

    if it==0:
        all_paths.sort()
        all_paths = [all_paths[i] for i in range(len(all_paths)) if i == 0 or all_paths[i] != all_paths[i-1]]
    return all_paths 
```

# c# - MVC 视图模型类

> ID：11370043
> 
> 赞同：1
> 
> 时间：2012-07-06T21:44:44.977
> 
> 标签：c#, asp.net-mvc, razor

我将 C# MVC 与 Razor 一起使用。

假设我有一个显示列表、下拉列表和 2 个文本框的视图。是否应该将所有这些信息保存在 1 类中，然后将其传递给我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:39:11.203

使用 ViewModel 将数据从控制器传递到视图的重要性怎么强调也不为过。如您的问题所述，您已经这样做了，这是一个很好的开始！

所以..这就是我会做的。

```
public class IndexViewModel // or DetailsViewModel or whatever the Action Method is
{
    public IEnumerable<Foo> Foos { get; set; }
    public SelectList DropDownBox { get; set; }
    public string Name { get; set; } // Textbox 1
    public string Description { get; set; } // Textbox 2
} 
```

好的。所以让我们看看我做了什么。

我已经通过了所有`View`需要的信息。不多也不少。只是-确切-信息。

`Foos`是一个列表，然后`foo`您可以循环进行渲染。（专业提示：使用 DisplayTemplates 呈现您的自定义类型/自定义类型的集合）。

我还建议传入一个`SelectList`下拉内容等。有些人不喜欢这个（这很好）。相反，他们传递了他们的项目集合以在下拉列表中呈现，但我个人认为这太过分了。我们拥有的关键原因`ViewModels`是我们可以*测试*这些东西。

最后，每个文本框都有一个属性。

*因此，总而言之，我将所有信息放在一个`ViewModel`. 此视图模型可以包含其他类（通过属性公开）。但是，是的 -**每个视图都需要一个 ViewModel**。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:23:31.650

从我所做的项目来看，我建议将所有信息保存在一个类中，但这一切都取决于您正在使用的 Idan Arye 所说的数据。根据您的要求，我建议您查看 msdn，这是 C# 的绝佳资源。希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:27:49.670

这取决于您的模型有多大，但是是的，您可以将它们归为一类

例如，如果像 Employee 和 3 一样简单，如下所示，则将其保留在 1 类中。但是，如果它比这个大 3 -4 倍并且有更复杂的数据字段，那么请尝试将它们保存在单独的类中

```
public class EmployeeController : Controller
{
    public ActionResult Index()
    {
       var employeeModel = new Employee
       {
           FirstName = "Hat",
           LastName = "Soft",
           Departments = new BindingList<SelectListItem>
            {
                new SelectListItem {Text = "Accounts", Value = "1"},
                new SelectListItem {Text = "Human Resource", Value = "2"},
                new SelectListItem {Text = "Operations", Value = "3"}
            }
       };

        return View(employeeModel);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T22:47:22.557

也许您真正要问的是我应该使用视图模型吗？

类似于...[我应该只为两个对象使用视图模型吗？](https://stackoverflow.com/questions/8716673/should-i-use-a-view-model-for-just-two-objects)

恕我直言，视图模型通常非常适合使用 MVC 和 Razor。

Ultimately it is up to you and the decision really depends on your model among other factors. For instance If the bits required for your view are ultimately sourced from different entities in your model then one might argue the answer is yes and you should consider using view models because a single view model can be tailored to suit your view.

Basically view models can help keep your views clean. The main implication to usually consider is the inevitable mapping logic that is required for mapping domain entities to view models and the other way around (e.g. During a GET or POST). [AutoMapper](https://github.com/AutoMapper/AutoMapper) is an example of a library you could use to cut down on the mapping code. In my experience it can work well as long as your mapping logic isn't terribly complicated.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T22:48:36.627

In my opinion, depends what the page is for, if you are to show the properties of a domain object in which case you should consider have a special object for the view (e.g. View Model) your class would the domain's object class (e.g. User) and at some point your View Model's (e.g. UserViewModel).

You can also of course, make use of Value Objects / DTO for carrying compound objects, thus, you'll have to create the correspondent classes that are not domain specific but still needed to transport data across your system, from the DAL to your views.

At the end you'll always need a View Model Class, which would correspond to domain object or a custom DTO / Value Object to present your data in the view.

Hope this helps a bit.

# r - R指挥官中分组数据的T检验

> ID：11370046
> 
> 赞同：2
> 
> 时间：2012-07-06T21:45:07.297
> 
> 标签：r, r-commander

我有以下数据格式

```
Entity Measure1 Measure2
A1     1.5      1.4
A1     1.9      1.7
A1     1.8      1.5
B1     2.7      2.5
B1     3.0      2.9
B1     3.1      2.7
B1     2.8      2.9
C1     1.7      1.5
C1     1.7      1.8
... 
```

我希望对`Entity`因子`Measure1`和`Measure2`水平进行成对 T 检验。我可以在 R 中做到这一点，但在 R Commander GUI 中有什么办法吗？`Measure1`在 R Commander 中，配对 t 检验考虑和列的所有值，并且`Measure2`不按组执行 t 检验。“独立样本 t 检验”选项也显示为灰色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:44:19.293

如果您放弃了paired-t.test 形式主义，您可以使用回归来做到这一点：

```
 lm( Measure2 ~ Measure1 + Entity, data=dfrm) 
```

这将为您提供按组估计的 Measure2（来自 Measure 1）的平均增长。无论如何，这就是配对 t 检验所做的。

# delphi - 在 Delphi 中跟踪访问冲突

> ID：11370047
> 
> 赞同：0
> 
> 时间：2012-07-06T21:45:20.293
> 
> 标签：delphi, delphi-7, access-violation

我想跟踪触发的访问冲突错误。

线程被创建并执行一些工作。我怀疑他们在没有“同步”的情况下访问 VCL 或变量。Madexcept 报告显示访问冲突发生在表单关闭 (form1.close;) 上，但没有更精确。

我有很多行代码（大约 100.000 行）。

我应该怎么做才能避免花费太多时间？我在调试器选项中检查了“范围检查”。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:52:28.433

如果您真的想知道，您可以使用调试 dcu 构建项目并在异常发生点之前放置一个断点。

现在您可以跳入 VCL 代码，并希望看看出了什么问题。

但是关闭或析构函数中的访问冲突通常是由于对象的双重释放。例如，您释放了也被表单释放的组件（因为它由表单拥有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:55:19.767

试试[SafeMM](http://cc.embarcadero.com/item/28681)，它将帮助您更快地发现错误。这是给出详细解释的[视频。](http://cc.embarcadero.com/item/27285)但要注意，这个MM只用于调试，不要在你的软件的Release版本中启用它。

# c++ - 为什么我不能用 QTcpSocket 的 write() 方法发送数据？

> ID：11370048
> 
> 赞同：0
> 
> 时间：2012-07-06T21:45:20.917
> 
> 标签：c++, qt, sockets, network-programming, buffer

我正在尝试仅通过文档来学习 Qt，这有点困难。我设法让一个简单的命令行聊天客户端工作，但我不知道如何发送东西。从 Qt 中的套接字读取大约需要 4 行直观的代码，但由于某种原因我不能说

```
QTcpSocket socket;
socket.connectToHost("google.com", 80);
socket.write("hey");
socket.flush(); 
```

冲洗（）；返回false，但我不明白为什么。

我真的不明白为什么这不起作用，并希望得到任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:00:40.547

调用后，`connectToHost()`您需要有一个插槽处理程序`connected()`或调用`waitForConnected()`以等待与主机的连接完成，否则您的代码会在连接建立之前尝试写入而放大。

# c++ - 返回参考参数

> ID：11370050
> 
> 赞同：2
> 
> 时间：2012-07-06T21:45:24.553
> 
> 标签：c++, reference

假设我有以下代码：

```
#include <string>

using namespace std;

string GetPath(const string & aString);

int main()
{
    string dave = "hello";
    string tom = GetPath(dave);

}

string GetPath(const string & aString)
{
    //Do stuff

    //If function fails then return original string
    return aString;

    //or should it be like this
    return string(aString)

} 
```

我有一种情况，我需要将一个字符串传递给一个函数，如果该函数的任务失败，那么我想简单地返回传入的字符串。

我的问题是，我对仅返回的行为有点不确定，`aString`因为它是通过引用传递的。应该避免这种代码，如果是，为什么？我很惊讶我可以退回它（它可能会复制吗？）。

为了安全起见，我构造了一个要返回的新对象，`return string(aString)`但这可能是矫枉过正而且没有必要。

任何澄清将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:46:35.580

是的，return 很好，`aString`因为您**按 value 返回**，所以理论上会创建一个副本（RVO 可以启动，但如果这样做，它不会影响行为）。

> 为了安全起见，我构造了一个要返回的新对象 return string(aString) 但这又可能是矫枉过正并且没有必要。

完全正确。刚刚`return aString;`好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:52:34.617

> ```
> return aString; 
> ```
> 
> 我的问题是，我对仅返回 aString 的行为有点不确定，因为它是通过引用传递的。应该避免这种代码，如果是，为什么？

不，那很好。

> 我很惊讶我可以退回它（它可能会复制吗？）。

是的，它确实会复制。（在这种情况下它必须制作副本）

> 为了安全起见，我构造了一个要返回的新对象 return string(aString) 但这可能是矫枉过正而且没有必要

是的，这将是一个矫枉过正。编译器可能会或可能不会将其优化为完全相同（通过 RVO）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T23:25:23.430

在我看来，您主要关心的是您将`aString`作为引用传递给函数，然后在`return aString`. 您没有这样做，您的函数按值返回，因此如有必要，将创建一个然后返回的副本。

我猜你认为引用等同于指针，但事实并非如此。将它们更多地视为原始对象的“别名”，因此如果您的返回是按值返回的，那么将返回一个副本。如果您返回`const string &`，那么是的，您将返回对原始（希望未更改）对象的引用。

# linq - 如何将包含集合的匿名类型传递给 Razor 视图？

> ID：11370051
> 
> 赞同：0
> 
> 时间：2012-07-06T21:45:25.380
> 
> 标签：linq, razor, anonymous-types

我试图将一组匿名类型传递给 Razor 视图引擎，这些匿名类型本身就是一组类型。

我正在使用以下扩展将动态对象传递给视图。

```
 public static ExpandoObject ToExpando(this object anonymousObject)
    {
        IDictionary<string, object> anonymousDictionary = new RouteValueDictionary(anonymousObject);
        IDictionary<string, object> expando = new ExpandoObject();
        foreach (var item in anonymousDictionary)
            expando.Add(item);
        return (ExpandoObject)expando;
    } 
```

它适用于简单的匿名对象，例如：

```
mylinqstatement.Select(x => new { foo = x.f, bar = x.b }.ToExpando()); 
```

但是，我未能成功传递更复杂的类型，例如：

```
mylinqstatement.GroupBy(y => y.foo).Select(x => 
     new { foo = x.key, bar = x.Select(y => y.b) }.ToExpando()); 
```

我已经多次尝试重写梯形图语句（我展示了最简单的），但我想要的属性（yb 的值）在视图中永远无法访问。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:37:52.050

我回答了我自己的问题。

```
mylinqstatement.GroupBy(y => y.foo).Select(x => new { foo = x.key, 
 bar = x.Select(y => new { someProperty = y.b) }.ToExpando())}.ToExpando()); 
```

在视图中...

```
@foreach (var item in Model)
{ 
 @item.foo

 foreach (var barItem in item.bar)  //<--- notice it's not simply 'in item'. 
{
 @barItem .someProperty 
}

} 
```

希望这可以帮助某人避免不必要的头痛。

# json - 来自 json 的 knockout.js 部分映射

> ID：11370052
> 
> 赞同：0
> 
> 时间：2012-07-06T21:45:27.470
> 
> 标签：json, knockout.js, knockout-mapping-plugin

在 knockout.js 站点的文档中，他们说当您从服务器获取数据时，您可以执行以下操作：

```
// Every time data is received from the server:
ko.mapping.fromJS(data, viewModel); 
```

我想将部分数据映射回我的对象​​模型。那可能吗？

我有一个 viewModel.jobs[i].JobType 子对象，所以我想做这样的事情：

```
ko.mapping.fromJS(data.jobType, viewModel.jobs[i].JobType); 
```

...意味着我只想将来自服务器的结果中的 jobType 映射到这个特定作业的 JobType 字段中。

...还要记住：

```
// does not work because viewModel.jobs[i].JobType() is not a function.
viewModel.jobs[i].JobType(data.JobType); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:05:58.933

这有效：

ko.mapping.fromJS(data.job, viewModel.jobs[i]);

# css - 为什么此背景图像在 Chrome 和 FF 中有效，但在 IE 8 中无效？

> ID：11370057
> 
> 赞同：0
> 
> 时间：2012-07-06T21:46:03.837
> 
> 标签：css

CSS

```
.arrow {
background:url(images/arrow.png) center left no-repeat;
padding-left:23px;
padding-right:10px;
border-right:0px solid #e6e6e6;
margin-right:10px;
} 
```

HTML

```
<div class="arrow"><h3>Technical Documentation</h3></div> 
```

它在 FF 和 Chrome 中运行良好。该样式正在 IE 中应用，我知道是因为我看到了填充，但是图像没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:54:20.787

这是不正确的语法，请尝试：

```
background: #000 url(images/arrow.png) center left no-repeat; 
```

# jquery - 使单选按钮避免使用键盘导航进行选择？

> ID：11370060
> 
> 赞同：2
> 
> 时间：2012-07-06T21:46:09.370
> 
> 标签：jquery, button, radio

是否可以这样做，以便我可以使用箭头键浏览一组单选按钮而不自动选择它们？我目前有一个弹出窗口，当用户选择单选按钮并且我正在使用.click（）时，我想关闭它，但是当您使用箭头键导航弹出窗口中的单选按钮时，每个导航都会导致弹出窗口关闭并且用户拥有重新打开它。
建议？
谢谢！

编辑：这是我的现场演示：jsfiddle.net/TKWzH/4
真实的东西比打开和关闭功能要多得多，那么有没有办法将keydown enter和mousedown合二为一？喜欢

`$("#popup2 input:radio").bind('keydown keyCode == 13', 'mousedown' function () {
$('#popup2').css('display', 'none'); });`

像这样的东西？尽管我意识到这是不正确的，并且可能没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:59:59.347

此行为特定于某些浏览器。IE 似乎会根据箭头键选择收音机，而 Chrome 则不会。

也就是说，您可以`keydown`通过 jQuery 阻止事件来禁用此行为。我建议在 DIV（或包装单选按钮的其他元素）上执行此操作，以便它不适用于整个文档：

```
$('div.wrap').keydown(function(e) {

    if (e.which > 36 && e.which < 41) {
        e.preventDefault();
    }

    var $checkedRadio = $('input[type=radio]:checked');
    if ($checkedRadio.size() > 0) {
        $checkedRadio.removeAttr('checked');
        if (e.which == 38 || e.which == 39) {
            var $nextRadio = $checkedRadio.next('input[type=radio]');
            if ($nextRadio.size() > 0) {
                $nextRadio.attr('checked', 'checked');
            } else {
                $('input[type=radio]:first').attr('checked', 'checked');
            }
        }
        else if (e.which == 37 || e.which == 40) {
            var $prevRadio = $checkedRadio.prev('input[type=radio]');
            if ($prevRadio.size() > 0) {
                $prevRadio.attr('checked', 'checked');
            }
            else {
                $('input[type=radio]:last').attr('checked', 'checked');
            }
        }
    }

});​ 
```

还有另一种方法可以实现这一点，那就是跟踪按下的键，并在 click() 事件中检查：

```
var keyPressed;

$('input').click(function(e) {
    if (keyPressed && keyPressed > 36 && keyPressed  < 41) {
        e.preventDefault();
        e.stopPropagation();
        // key pressed during click
    }
    else{
        // normal click
    }
});

$(document).keydown(function(e) {
    keyPressed = e.which;
});

$(document).keyup(function(e) {
    keyPressed = null;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T21:36:21.830

这是一个更通用的跨浏览器解决方案，适用于事件级别，类似于@derek-hunziker 给出的第二个示例

```
$(function() {
    var navKey, getCheck;
    $('input[type=radio]').keydown(function(e) {
        navKey = (e.which >= 37 && e.which <= 40);
        if (navKey) {
            getCheck = $("input:radio[name='" + e.target.name + "']:checked")[0];
        } else if (e.which == 13) {$(e.target).click();}
    }).keyup(function(e) {
        navKey = null;
        getCheck = null;
    }).click(function(e) {
        if (navKey) {
            e.preventDefault();
            e.stopPropagation();
            if (getCheck) {getCheck.checked = true;}
            else {e.target.checked = false;}
        } else {
            // Perform intended click/space/enter action here
        }
    });
}); 
```

这些更改涉及 Chrome 中的一个问题，该问题导致第一次导航移动在没有默认值时选择一个元素，以及 Internet Explorer 中的另一个问题，该问题导致导航在每次移动时都会清除当前选择。它还允许通过 enter 键触发 click 事件，尽管可以通过删除 keydown 事件中的“else if”语句来禁用此功能。

虽然比作者的问题要求的更复杂，但它提供了跨多个浏览器的更可靠的体验，以供一般使用。

# python - Python httplib 的最大调试级别是多少

> ID：11370064
> 
> 赞同：7
> 
> 时间：2012-07-06T21:46:20.277
> 
> 标签：python, httplib

[这些文档](http://docs.python.org/library/httplib.html#httpconnection-objects)没有说明最大调试级别是多少。

我需要知道这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T21:53:23.993

I went through httplib.py and the code is littered with the following statement:

```
if self.debuglevel > 0: 
```

This means there are just two levels.

1.  debuglevel less than or equal to zero
2.  debuglevel greater than zero

Yes this could have been better documented.

Also any time you need to check such an information, you can easily look at the code. `Here is my favorite approach to locate a source file for a particular module.`

```
>>> import httplib
>>> httplib.__file__
'/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.pyc' 
```

Now you can just open the following file to go through it's source code

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T21:56:13.233

正如我从*httplib.py*源代码中看到的，只有 2 个调试级别：

*   <=0 - 没有调试信息
*   任何大于零的值 - 打开调试信息

这是一个典型的检查：

```
if self.debuglevel > 0:
        print "blablabla" 
```

# django - Django 模板针对不同的 url 呈现不同的方式

> ID：11370069
> 
> 赞同：2
> 
> 时间：2012-07-06T21:46:38.843
> 
> 标签：django, templates

我在我的一个模板中使用 STATIC_URL，如果我使用一个 url，它可以正常工作，如果我使用另一个，它会失败。在这两种情况下，完全相同的视图正在使用完全相同的模板运行。

模板代码：

```
<link href="{{ STATIC_URL }}css/form.css" type="text/css" rel="stylesheet" />
<!-- rest of page... --> 
```

查看代码：

```
def myform(request):
    if request.method == 'POST':
        form = MyForm(request.POST, request.FILES)
        obj = save_form(form)
        if obj:
            send_confirmation_email(obj)
            return redirect('done-page')
    else:
        form = MyForm()

    return render(request, 'template.html', {'form': form,}) 
```

网址

```
# site urls.py
urlpatterns = patterns('',
    url(r'^$', 'site.app.views.myform'),
    url(r'^app/', include('site.app.urls'),
    #...
)

# app urls.py
urlpatterns('site.app.views',
    url(r'^$', 'myform'),
    #...
) 
```

以上是我的 django 网站的片段。如果通过“mydomain.com/”（站点的索引）访问该页面，则正确呈现 STATIC_URL 并正确链接 css 文件。如果通过“mydomain.com/app/”（应用程序的索引）访问页面，则 STATIC_URL 变为空白，因此没有 css，但页面的其余部分会正确呈现。

我的印象是，如果视图和模板相同，则 url 应该是无关紧要的。我错过了什么吗？无论使用什么 url，我必须更改什么才能让 STATIC_URL 正确呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:59:09.987

我很难相信`STATIC_URL`“变得空白”。`STATIC_URL`除非有问题的视图响应是从字面上没有价值的时候缓存的，否则没有合理的理由。如果您正在使用视图或模板缓存，请确保您删除缓存，或类似的重新启动 memcached（或其他）。如果您正在开发和使用`runserver`，请重新启动`runserver`.

基于它何时起作用和不起作用的另一种更可能的情况是，您`STATIC_URL`没有以 a 为前缀`/`，即它只是`static/`. 这将使指向`/static/css/forms.css`主页上的 CSS 文件的链接（应该如此），但它会`/app/static/css/forms.css`在另一个页面上，这显然是不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T05:01:32.557

只是在这里猜测，但这可能是因为您没有`ContextObject`在视图中传递 a 。所以要解决这个问题，你会这样做：

```
from django.template import RequestContext

...

def myform(request):
    ...

    return render(request, 'template.html', {'form': form,}, context_instance=RequestContext(request)) 
```

否则，`STATIC_URL`变量将不会传递给模板，并且为空白，如您所述。我还假设您已经在 Context Processors 设置中有这个：

```
django.core.context_processors.static 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:03:48.433

我发现了错误。发生奇怪的行为是因为这是以前构建的 django 站点的副本。我忽略了 app/urls.py 中 urlpatterns 的第一个参数，导致代码指向旧版本。不幸的是，该代码位于同一个盒子上并且位于 python 路径上。因此，这个错误并没有导致异常，而是阴险地做了一些我没有预料到的事情。

实际情况如下所示：

```
# site_copy urls.py
urlpatterns = patterns('',
    url(r'^$', 'site_copy.app.views.myform'),
    url(r'^app/', include('site_copy.app.urls'),
    #...
)

# site_copy/app urls.py
urlpatterns('site.app.views',
    url(r'^$', 'myform'),
    #...
) 
```

谢谢大家的帮助。

# java - 在 Windows 7 中安装 Vertica JDBC jar 文件

> ID：11370070
> 
> 赞同：0
> 
> 时间：2012-07-06T21:46:41.510
> 
> 标签：java, jdbc, jar, vertica

在我的 Windows 7 PC 上安装 vertica_5.1.1_jdk_5 时遇到问题。我安装了最新的 Java SDK。当我输入 java -jar vertica_5.1.1_jdk_5.jar 时，我得到“没有主要清单属性”。我打开 JAR 中的 MANIFEST 文件，发现“Manifest-Version: 1.0 Created-By: 1.5.0_07 (Sun Microsystems Inc.)”。因此，从我所读到的内容来看，我在这里遗漏了 Main Class 声明。如何确定要添加到此 MANIFEST 文件中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:01:48.067

JDBC 驱动程序是供 Java 应用程序使用的库。它本身不是程序，因此它没有`Main-Class`属性，因此无法像您尝试的那样运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:21:11.073

Senza - vertica 不将 java 库作为自安装应用程序提供。相反，他们只提供您可以在应用程序的类路径中包含的 jar。您是否试图使其与特定应用程序一起使用？如果是这样，请给我发消息，我将发送有关如何使其工作的说明。

# php - 在 PHP 中添加重复的数组行

> ID：11370073
> 
> 赞同：0
> 
> 时间：2012-07-06T21:47:05.830
> 
> 标签：php, arrays, duplicates, summarization

我想在 PHP 中创建一个函数，将数组的行与共享列值相加。

所以输入。

```
 $test = array(
    array("c", 5, 6),
    array("c", 2, 3),
    array("test", 5, 6)
 ); 
```

并输出。

```
 $testduplicatefree = array(
    array("c", 7, 9),
    array("test", 5, 6)
    )
); 
```

我在想

```
function combine_duplicates($array,$col){
...
... 
return $duplicatefreearray; 
} 
```

其中 $col 是重复的自由数组。所以，就我而言，

```
 combine_duplicates($test,0); 
```

会给我我想要的输出。感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:54:17.077

我假设每个数组中的第一个值（在本例中为“c”）是用于确定两行是否重复的键。在这种情况下，您可以将您提供的数组替换为如下所示的索引数组：

```
array(
    c=>array(5,6)
    test=>array(5,6)
    ...
) 
```

逐一添加您的行，并测试您要使用的索引是否已经存在，例如`if in_array("c", array_keys($my_array))`. 如果索引不存在，则使用该索引创建一个新数组。如果存在，则迭代该行并将其每个值添加到现有数组中的相应列。例如，当您使用键“c”到达第二行时，您会将其第一个值添加`$my_array["c"][0]`到`$my_array["c"][1]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:51:06.630

```
<?php

function combine_duplicates($array,$col) {
    $index = array();
    foreach ($array as $row) {
        $key = $row[$col];
        if (!isset($index[$key])) {
            $index[$key] = $row;
        } else {
            for ($i = 0; $i < count($row); ++$i) {
                if ($i != $col) {
                    $index[$key][$i] += $row[$i];
                }
            }
        }
    }

    return array_values($index);
}

$array = array(
    array("c", 5, 6),
    array("c", 2, 3),
    array("test", 5, 6)
);

print_r(combine_duplicates($array, 0)); 
```

在这里试试：http: [//codepad.org/MDHEsqhi](http://codepad.org/MDHEsqhi)

# iphone - 大型几何图形 GL_REPEAT 上的 OpenGL ES 2.0 纹理失真

> ID：11370074
> 
> 赞同：7
> 
> 时间：2012-07-06T21:47:07.187
> 
> 标签：iphone, rendering, opengl-es-2.0, texture-mapping, distortion

OpenGL ES 2.0 在纹理采样方面存在严重的精度问题——我见过有[类似问题](https://stackoverflow.com/questions/8787483/repeated-textures-are-severely-distorted-shaking-when-rotating-camera)的主题，但我还没有看到这个*“扭曲的 OpenGL ES 2.0 纹理”*问题的真正解决方案。

这与纹理的图像格式或 OpenGL 颜色缓冲区无关，似乎是精度错误。我不知道具体是什么导致精度失败 - 似乎不仅仅是几何体的大小导致了这种失真，因为简单地缩放传递给顶点着色器的顶点位置并不能解决问题。

* * *

以下是纹理失真的一些示例：

*   扭曲纹理（在 OpenGL ES 2.0 上）：http: [//i47.tinypic.com/3322h6d.png](http://i47.tinypic.com/3322h6d.png)

*   纹理通常的样子（也在 OpenGL ES 2.0 上）：http: [//i49.tinypic.com/b4jc6c.png](http://i49.tinypic.com/b4jc6c.png)

纹理问题仅限于 OpenGL ES 2.0 上的小尺度几何体，否则纹理采样看起来很正常，但随着顶点数据距离 XYZ(0,0,0) 的原点越远，粒状效果会逐渐恶化

这些纹理问题不会在桌面 OpenGL 上发生（在 Windows XP、Windows 7 和 Mac OS X 下工作正常）

我只在 Android、iPhone 或 WebGL（类似于 OpenGL ES 2.0）上看到过这个问题

* * *

**所有纹理都是 2 的幂，**但问题仍然存在

*   **缩放顶点数据**- 顶点的 XYZ 位置的值在以下范围内：-65536 到 +65536 浮点

    *   我意识到这很大，所以我尝试将顶点位置除以 1024 以缩小几何形状并希望获得更准确的浮点精度，但这并没有解决或减少纹理失真问题
*   **缩放模型视图**或缩放投影矩阵无济于事

*   **更改纹理过滤**选项无济于事

    *   禁用 mipmapping，或使用 GL_NEAREST/GL_LINEAR 什么都不做
    *   启用/禁用各向异性没有任何作用
    *   即使使用 GL_CLAMP 仍然会出现条带效应
*   **将传递给顶点着色器的纹理坐标相除**，然后将它们乘回到片段着色器中的正确值，也不起作用

*   **精度 highp sampler2D、highp float、highp int** - 在片段或顶点着色器中没有改变任何东西（lowp/mediump 也不起作用）

我认为这个问题必须在某一时刻得到解决——看到基于 OpenGL ES 2.0 的游戏已经能够渲染大规模、高度详细的几何图形

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T01:05:14.230

这是通常的纹理图集问题。没有设置限制中间纹理中的线性插值。这就是硬件的工作原理。

您可以通过在片段程序中使用最近的过滤器纹理查找来解决此问题，该程序会计算纹理查找以您的纹理平铺大小和位置为模并手动进行线性过滤。

# android - layout_weight 不一致

> ID：11370076
> 
> 赞同：1
> 
> 时间：2012-07-06T21:47:16.970
> 
> 标签：android, android-layout, android-linearlayout, android-layout-weight

我的应用程序应如下所示：

[![](../Images/0eca2cb8f3ec9fbc60d0c0cd74adf5e5.png)](https://i.stack.imgur.com/DelD8.png)

这就是它应该看起来的样子，尽管我之前拥有它的方式并不能很好地扩展。所以这就是我这样做的原因，但这给我带来了很多问题。

但即使看似相同的设置，第二排占据了整个房间，看起来像这样：

[![](../Images/bce88e9e2df2ced336d3b2880b0642b4.png)](https://i.stack.imgur.com/zuHoR.png)

任何解释为什么这样做？它打败了我。这是我的 XML，有什么解决方案吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout02"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:weightSum="7.0"
>

<LinearLayout
    android:id="@+id/LinearLayout03"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0" >

<ImageView
    android:id="@+id/terranlogo1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo1"
    android:layout_width="wrap_content"
    android:layout_weight="1.0"
    android:layout_height="wrap_content"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:src="@drawable/zerglogo" />
</LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout04"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0" >

<CheckBox
    android:id="@+id/ck_t1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_weight="1.0"/>

<CheckBox
    android:id="@+id/ck_p1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="25dp"
    android:layout_weight="1.0" />

<CheckBox
    android:id="@+id/ck_z1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="25dp"
    android:layout_weight="1.0" />
 </LinearLayout>

  <LinearLayout
    android:id="@+id/LinearLayout05"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1.0" >

<ImageView
    android:id="@+id/terranlogo2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:src="@drawable/zerglogo" />
 </LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout06"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:orientation="horizontal"
    android:layout_weight="1.0" >

<CheckBox
    android:id="@+id/ck_t2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0" />

<CheckBox
    android:id="@+id/ck_p2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:layout_marginLeft="25dp" />

<CheckBox
    android:id="@+id/ck_z2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
    android:layout_marginLeft="25dp" />
</LinearLayout>

 <LinearLayout
    android:id="@+id/LinearLayout07"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:orientation="horizontal"
    android:layout_weight="1.0" >

<TextView
    android:id="@+id/textView4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Choose your opponets race(s) and your race(s)" />
</LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout08"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:orientation="horizontal"
    android:layout_weight="1.0" >

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Game Length"
    android:layout_weight="1.0"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:text="Mistakes Allowed"
    android:layout_weight="1.0"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Answer Time"
    android:layout_weight="1.0"
    android:textSize="15dp" />
</LinearLayout>

 <LinearLayout
    android:id="@+id/LinearLayout09"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:orientation="horizontal"
    android:layout_weight="1.0" >

 <Spinner
    android:id="@+id/s_answertime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
 />

<Spinner
    android:id="@+id/s_mistakenumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
 />

<Spinner
    android:id="@+id/s_gametime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0"
 />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:06:35.750

中间 LinearLayout 的高度设置为 wrap_content，这不是你想要的。将根 LinearLayout 的所有直接子项设置为 layout_height="0dp"，您将获得所有项目的高度均匀分布。

此外，如果您打算让所有元素占据容器高度的 100%，则不需要 weightSum=7。

有关更多信息，请参阅[http://ugiagonzalez.com/2012/01/19/android-linearlayout-distribution-explained-weight-and-sizes/](http://ugiagonzalez.com/2012/01/19/android-linearlayout-distribution-explained-weight-and-sizes/)。

# python - Python Regex，查找两个子字符串之间的内容

> ID：11370079
> 
> 赞同：0
> 
> 时间：2012-07-06T21:47:48.757
> 
> 标签：python, regex, string

我现在拥有的正则表达式是：

```
string="hello (fdd()()()()(()(())()))"
re.match("%s\s*\((.*?)\)$"%re.escape("hello"), string) 
```

它会很好地工作，它的目标是得到括号内的任何内容。在这种情况下：`"fdd()()()()(()(())())"`

我想进行更改，正则表达式应该适用于这个测试用例

`"hello (hihihi(((())))hihi) { "`

它的末尾有一个花括号。给定字符串的末尾应该总是有一个大括号，因此我向您展示的第一个测试用例将不再起作用（使用我想要的新正则表达式）。

试着这样看

`hello[any amount of space]([get WHATEVER is inside here])[any amount of space]{[any amount of space]`

我认为使用美元符号是造成我问题的原因。我显然对使用正则表达式不太熟悉，所以如果有人可以帮助我，那就太好了。我对任何解决方案持开放态度，包括但不限于其他 python 模块、内置 python 字符串功能等。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:56:22.330

我想你可以使用`"hello\s*\((.+)\)\s*{"`

```
import re

text = "hello (hihihi(((())))hihi) { "
print re.match(r'hello\s*\((.+)\)\s*{', text).group(1) 
```

给我

```
hihihi(((())))hihi 
```

你不需要`?`and `$`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:57:06.810

尝试将您的正则表达式更改为以下内容：

```
r"%s\s*\((.*?)\)\s*{" % re.escape("hello") 
```

这里唯一的区别是`$`被替换了`\s*{`，这意味着任意数量的空格后跟一个`{`。

例子：

```
>>> s = "hello (hihihi(((())))hihi) { "
>>> print re.match(r"%s\s*\((.*?)\)\s*{" % re.escape("hello"), s).group(1)
hihihi(((())))hihi 
```

# javascript - WYSIWYG 没有 HTML 标签？

> ID：11370084
> 
> 赞同：-3
> 
> 时间：2012-07-06T21:48:01.400
> 
> 标签：javascript, html, regex, text, wysiwyg

是否可以只从所见即所得编辑器中获取文本？例如，如果您有以下文本：

```
<a href="whatever"> sdadsa<>,.<> <p </a> 
```

是否可以只取里面的文字`sdadsa<>,.<>`？

有人可能会说不要使用编辑器，但我需要它制作两份副本，一份带有标签，另一份没有 HTML 标签，只有它们匹配的 HTML 标签。

是否可以在没有 HTML 标签的情况下获取文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:58:54.863

如果要从输出中去除所有 HTML 标记，有两种方法：

*   **与 PHP 一起**使用`strip_tags($output)`。

*   **使用 Javascript** - 输入

    `var plaintext= editorOutput.replace(/(<([^>]+)>)/ig,"");`

    或使用[php.js 的等效](http://phpjs.org/functions/strip_tags:535)于 PHP 方法。

# css - 托管网络字体、CDN、@font-face 和隐私

> ID：11370086
> 
> 赞同：4
> 
> 时间：2012-07-06T21:48:16.250
> 
> 标签：css, security, fonts, font-face, privacy

如果您在 CDN 上使用托管字体、@font-face 或 Typekit 之类的服务，那么主机是否可以读取页面中字体呈现的所有字符（并因此读取你的网页）？

如果是这样，这似乎将是一个重大的隐私问题。

关于这个主题的任何专业知识或推荐阅读？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T07:45:46.180

Web 字体存储为单一文件（WOFF、OTF、EOT 或 SVG），浏览器必须完整获取这些文件才能显示其中的任何字符。所以不可能检测到单个字符的使用。

Web 字体嵌入存在潜在的隐私泄露，但它比这更微妙，而且不太可能被任何东西利用。

仅当您使用网络字体作为后备字体时才会发生这种情况，例如：

```
@font-face {
  font-family: "One";
  src: url(http://themes.googleusercontent.com/static/fonts/overlock/v2/Pr-80_x4SIOocpxz2VxC5fesZW2xOQ-xsNqO47m55DA.woff) format('woff');
}
@font-face {
  font-family: "Two";
  src: url(http://themes.googleusercontent.com/static/fonts/overlock/v2/EcjpF2hW5gSZ4M16YLdG84bN6UDyHWBl620a-IRfuBk.woff) format('woff');
}
p {
    font-family: "One", "Two", sans-serif;
} 
```

在这个例子中，如果`<p>`元素中只有拉丁字符，浏览器可能会选择只获取字体“One”的 WOFF 文件。如果“One”字体中不存在其他字符，则浏览器也必须获取第二个文件，以便为“Two”中的字符查找字形。因此，外部方将能够知道页面上使用了“One”中不存在的一个或多个字符。

我不会担心的。IMO 不太可能使用嵌入的后备字体（除了故意，以尝试优化常见字符并在使用不寻常字符的情况下使用相同字体的扩展版本）。

无论如何，它不会发生在所有浏览器上。Chrome 会这样做；Firefox 总是获取文档中元素使用的字体系列列表中包含的每个嵌入字体。

# mysql - MySQL 过程无法编译 - 使用变量删除时出错

> ID：11370088
> 
> 赞同：1
> 
> 时间：2012-07-06T21:48:20.853
> 
> 标签：mysql, procedure

我正在编写我的第一个程序并且出现错误。我已将错误减少到删除行，但不确定原因。有人可以在这里发现问题吗？是变量吗？

```
DROP PROCEDURE IF EXISTS MPT_PROC;
DELIMITER $$
CREATE PROCEDURE MPT_PROC
MODIFIES SQL DATA
BEGIN

    #-- DECLARE statements

    DECLARE v_user_id       INT DEFAULT 0;

    DECLARE no_more_rows    BOOLEAN;
    DECLARE v_loop_cntr     INT DEFAULT 0;
    DECLARE v_num_rows      INT DEFAULT 0;

    DECLARE c_userfiles CURSOR 
    FOR
        SELECT distinct f.user_id
        FROM MPT_STG_FILEUPLOAD f
        WHERE f.status = 'A';  #-- Accepted

        DECLARE CONTINUE HANDLER FOR NOT FOUND
        SET no_more_rows = TRUE;

        OPEN c_userfiles;

        #-- Loop through each user_id found as pending
        the_loop: LOOP

            FETCH c_userfiles INTO v_user_id;

            #-- Break out of the loop if
            #-- 1) there were no records, or
            #-- 2) we've processed them all.
            IF no_more_rows THEN
                CLOSE c_userfiles;
                LEAVE the_loop;
            END IF;

            DELETE FROM MPT_STG_FILEUPLOAD s
            WHERE s.user_id = v_user_id;

            COMMIT;  #--Commiting the changes for this user
        END LOOP the_loop;

    END IF;

END
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:07:24.173

MySQL 不允许您在 DELETE 语句中为要从中删除的表提供别名。

```
 DELETE FROM MPT_STG_FILEUPLOAD WHERE user_id = v_user_id; 
```

并失去英镑符号作为注释分隔符。双破折号是标记注释开头的标准。看起来您`END IF`在程序即将结束时拥有无与伦比的优势。

```
DROP PROCEDURE IF EXISTS MPT_PROC;
DELIMITER $$
CREATE PROCEDURE MPT_PROC
MODIFIES SQL DATA
BEGIN
  DECLARE v_user_id       INT DEFAULT 0;
  DECLARE no_more_rows    BOOLEAN;
  DECLARE v_loop_cntr     INT DEFAULT 0;
  DECLARE v_num_rows      INT DEFAULT 0;

  DECLARE c_userfiles CURSOR 
  FOR
  SELECT distinct f.user_id
    FROM MPT_STG_FILEUPLOAD f
   WHERE f.status = 'A';  -- Accepted

  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = TRUE;

  OPEN c_userfiles;

  -- Loop through each user_id found as pending
  the_loop: LOOP

    FETCH c_userfiles INTO v_user_id;

    -- Break out of the loop if
    -- 1) there were no records, or
    -- 2) we've processed them all.
    IF no_more_rows THEN
      CLOSE c_userfiles;
      LEAVE the_loop;
    END IF;

    DELETE FROM MPT_STG_FILEUPLOAD s
     WHERE s.user_id = v_user_id;

    COMMIT;  --Commiting the changes for this user
  END LOOP the_loop;

END$$
DELIMITER ; 
```

* * *

如果`user_id`不是该 MPT_STG_FILEUPLOAD 表上的主键，则您的过程可能正在删除未标记为“已接受”的行。如果 user_id 在该表中有两行，并且其中一行被标记为已接受，而另一行则不是，该怎么办。你想删除这两行吗？

看起来您声明了两个未在任何地方引用的变量，`v_loop_cntr`并且`v_num_rows`，如果不需要它们，我建议您将它们注释掉。

这整个过程可以在单个 SQL 语句中更有效地完成。

# svn - svn 从命令行中的文件更新路径。如何？有可能吗？

> ID：11370090
> 
> 赞同：0
> 
> 时间：2012-07-06T21:48:37.250
> 
> 标签：svn

我在一个文件中有很多文件路径应该更新。但我不知道，我怎么能做到这一点。我尝试使用`<` `operator`，但它不起作用。如果我一个一个更新，需要很长时间。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:40:51.247

在这种情况下，你可以做的是使用 SVN 的`changelist`机制。

您可以先创建自己的列表：

```
$> svn changelist MYLIST /src/cpp/foo
$> svn changelist MYLIST /src/cpp/bar 
```

然后您可以在更新期间使用它，如下所示：

```
$> svn update --changelist MYLIST 
```

这样，只会`MYLIST`更新列表中的文件。

请注意，您还可以使用更改列表仅提交某些文件。

# python - 如何找到这些十六进制颜色之间的关系或比率？

> ID：11370094
> 
> 赞同：1
> 
> 时间：2012-07-06T21:48:58.823
> 
> 标签：python, rgb

我希望在我正在编写的程序中实现类似于[http://colorschemedesigner.com/](http://colorschemedesigner.com/)的东西，因此我采用了 3 种示例颜色，以及该工具发现的适合该方案的所有颜色，并且我想在这里对模式进行逆向工程，试图弄清楚如何创建我自己的工具，因为据我所知，他不提供 API。

我这里拉了3种颜色，色调相差1度，颜色如下，主色是我输入工具的颜色。

```
 color      RBG        HLS
mstr hex: FF0000 255 0 0 (0.0, 0.5, 1.0)
frst hex: BF3030 191 48 48 (0.0, 0.46862745098039216, 0.5983263598326359)
scnd hex: A60000 166 0 0 (0.0, 0.3254901960784314, 1.0)
thrd hex: FF4040 255 64 64 (0.0, 0.6254901960784314, 1.0)
frth hex: FF7373 255 115 115 (0.0, 0.7254901960784313, 1.0)
     color      RBG        HLS
hex: FF0700 255 7 0 (0.004575163398692812, 0.5, 1.0)
hex: BF3330 191 51 48 (0.003496503496503489, 0.46862745098039216, 0.5983263598326359)
hex: A60400 166 4 0 (0.004016064257028125, 0.3254901960784314, 1.0)
hex: FF4540 255 69 64 (0.004363001745200675, 0.6254901960784314, 1.0)
hex: FF7673 255 118 115 (0.0035714285714285956, 0.7254901960784313, 1.0)
     color      RBG        HLS
hex: FF0D00 255 13 0 (0.008496732026143797, 0.5, 1.0)
hex: BF3730 191 55 48 (0.00815850815850816, 0.46862745098039216, 0.5983263598326359)
hex: A60800 166 8 0 (0.008032128514056233, 0.3254901960784314, 1.0)
hex: FF4940 255 73 64 (0.007853403141361256, 0.6254901960784314, 1.0)
hex: FF7A73 255 122 115 (0.008333333333333378, 0.7254901960784313, 1.0) 
```

添加了 180 度的色调：`#00CC00`

```
 color      RBG        HLS
hex: 00CC00 0 204 0 (0.3333333333333333, 0.4, 1.0)
hex: 269926 38 153 38 (0.3333333333333333, 0.37450980392156863, 0.6020942408376962)
hex: 008500 0 133 0 (0.3333333333333333, 0.2607843137254902, 1.0)
hex: 39E639 57 230 57 (0.3333333333333333, 0.5627450980392157, 0.7757847533632286)
hex: 67E667 103 230 103 (0.3333333333333333, 0.6529411764705882, 0.7175141242937852) 
```

我做了一些基本的减法，看看我是否可以手动找到关系，例如，主颜色和第二颜色有 65% 的差异，然后大约有 59% 的差异，然后是 0% 的差异，仅基于第二种颜色R、G 或 B 的值除以主机的相同值。

**我的问题是：是否有一些 Python 包可以帮助我解决这个问题？失败了，我错过了一些比例吗？**

编辑：我很好奇，开始查看他的 js 源代码，试图弄清楚他是如何做到的，但我离理解它还差得很远。我在这里上传了：[http](http://tankorsmash.com/transfers/csd3.js) ://tankorsmash.com/transfers/csd3.js ，因为它超过了 pastebin 限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:50:53.067

查看 HSL 和 HSV 颜色模型：[http ://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

[PIL](http://effbot.org/zone/pil-hsl.htm)中有库支持

# arrays - 如何计算半随机整数数组中的“预期”反转次数？

> ID：11370096
> 
> 赞同：3
> 
> 时间：2012-07-06T21:49:00.640
> 
> 标签：arrays, algorithm, math, random

考虑一个整数数组 a。如果 i < j 且 A[i] > A[j]，则对 (i,j) 称为 A 中的反转。

对于数组中的每个位置“i”，都有两个可能的候选者：a[i] 概率为 p[i] 和 a[i]+x 概率为 1-p[i]。

现在我必须计算预期的反转次数。给定每个索引 i 的 a[i] 和 p[i] 以及一个整数 x。

我知道 O(n^2) 方法（检查每个合法的可能对）。另外，我知道 O(nlogn) 方法来计算数组中的反转次数，其中所有元素都以 100% 的概率预先确定。它是通过修改归并排序来完成的。

我想知道一种比 n 平方更好的方法。请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:50:48.210

这可以通过对基于标准合并排序的倒数计数算法进行简单修改来完成，我们为每个值分配一个权重并计算`W[i]*W[j]`for`i<j`的总和`A[i]>A[j]`（当每个权重为 1 时，我们得到正常计数）。我们不是将左侧数组中剩余的元素数量添加到计数中，而是将这些元素的权重之和乘以我们正在处理的右侧数组中元素的权重。

要使用此算法解决提出的问题，只需创建一个大小为两倍的数组，其中原始数组中的每个元素都被两个元素替换（按排序顺序），权重由概率给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:24:26.173

我留下了一条评论来解释这一点，但如果你只使用一点数学，你可以对此进行 O(1) 计算。我会省去你的工作，但是，根据我的计算，在 n 个整数的数组中，预期的反转次数是 ((n^2) - (n)) / 4。抱歉，括号太多了，我只是想要以确保完全清楚。如果你想要，我可以发布作品，但我想如果你只需要答案，我会忽略它。

所以，尽管我的评论说了什么，我还是记错了。这不是 lg(n)。

# ruby - 如何使用#each 将所有哈希值增加三倍？

> ID：11370097
> 
> 赞同：1
> 
> 时间：2012-07-06T21:49:05.607
> 
> 标签：ruby, hash, each

我有一个哈希如下：

```
drinks = {"soda" => 3, "water" => 2, "beer" => 6} 
```

我想通过使用来显示每对的价值增加了​​三倍`each`。

换句话说，我希望“苏打水”的值为 9，“水”的值为 6，等等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T21:53:44.280

`Hash[hash.map { |k,v| [k, v * 3] }]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T21:59:09.397

有多种方法可以做到这一点，具体取决于您想要的语义。一种方法是使用[Hash#each](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each)对每个键/值对进行操作。例如：

```
drinks = {"soda"=>3, "water"=>2, "beer"=>6}
drinks.each { |key, value| drinks[key] = value.to_i * 3 }
=> {"soda"=>9, "water"=>6, "beer"=>18} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:40:42.140

```
drinks = Hash[­drink­s.map { |dri­nk, value­| [drin­k, value­ * 3] }] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T06:37:35.177

```
drinks.each_with_object({}) { |(k,v),h| h[k] = 3 * v }   
  => {"soda"=>9, "water"=>6, "beer"=>18} 
```

# jira - 在 Jira 中重复使用问题 ID

> ID：11370098
> 
> 赞同：0
> 
> 时间：2012-07-06T21:49:05.970
> 
> 标签：jira

我想知道是否可以创建一个新的 Jira 问题，它的 ID 是以前删除的问题的 ID。似乎一旦您在 Jira 中删除了一个问题，它的 ID 号就永远无法使用。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:33:43.407

使用 JIRA 的 API 这是不可能的，因为 ID 在项目中也应该是*唯一*的，而且跨时间也是如此。

根据您的绝望程度，您可以修改数据库字段`project.pcounter`以指向所需的 ID（这样做不会遇到重复的 ID 问题 - 如果`pcounter`包含已使用的 ID，JIRA 将迭代到下一个可用的 ID）。

这也需要重新启动 JIRA，因此对于一个问题，这是相当昂贵的。

[有关详细信息，请参阅Atlassian 知识库中](https://confluence.atlassian.com/pages/viewpage.action?pageId=211649701)的相应文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:52:46.280

没错，Jira ID 不可重复使用。这是一件好事，因为人们将来可能会通过编号引用 Jira 问题，甚至是已删除的问题。此外，数字很便宜。

# javascript - dom更新问题

> ID：11370099
> 
> 赞同：0
> 
> 时间：2012-07-06T21:49:11.873
> 
> 标签：javascript, google-chrome, dom

我正在尝试将图像从 div 拖到 div 确保一次只有一个在 div 中。它在 Opera 上运行良好，但在 Chrome（和其他）中失败。它似乎可以工作，直到我从 javascript 更新元素，然后更新似乎没有在 Chrome 内部刷新。

我可以将任一图像拖到第三个正方形，但随后一切都被冻结了。我很想解决这个问题。

```
<!DOCTYPE HTML>
<html>
<head>
    <style type="text/css"> 
    .outer {
        width: 150px;
        height: 40px;
    }

    .square {
        float: left;
        width: 32px;
        height: 32px;
        margin: 1px;
        padding: 0px;
        border: 1px solid #aaaaaa;
    }
    </style>

    <script type="text/javascript">
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("Text",ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Text");
            ev.target.appendChild(document.getElementById(data));

            lock();
        }

        function lock() {
            var squares = document.getElementsByClassName("square");

            for (var i = 0; i < squares.length; i++) {
                if (squares[i].children.length == 0) {
                    squares[i].ondragover = 'allowDrop(event)';
                }
                else {
                    squares[i].ondragover = '';
                }
            }
        }

        function init() {
            document.write("<div class='outer square' ondrop='drop(event)' ondragover='allowDrop(event)'><img src='bb.png' alt='bb' id=1 class='movable' draggable=true ondragstart='drag(event)'></div>");

            lock();
        }
    </script>
</head>

<body>
    <script type="text/javascript">
        init();
    </script>

    <div class='outer square' ondrop='drop(event)' ondragover='allowDrop(event)'> 
    <img src="aa.png" alt='aa' id=2 class='movable' draggable=true ondragstart="drag(event)">
    </div>
    <div class='outer square' ondrop='drop(event)' ondragover='allowDrop(event)'> 
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:01:08.380

```
squares[i].ondragover = 'allowDrop(event)'; 
```

在 Chrome 中分配`null`给`.ondragover`，因为它是一个字符串而不是一个函数。尝试将其替换为：

```
squares[i].ondragover = allowDrop; //<-- no quotes here 
```

# php - 类似博客的条目方法

> ID：11370100
> 
> 赞同：3
> 
> 时间：2012-07-06T21:49:17.997
> 
> 标签：php, javascript, layout

这可能是一个众所周知的主题，所以请原谅我缺乏知识，但我很好奇大多数基于文章/博客的网站在插入新的“帖子”或文章时是如何工作的。想想博客，或者像 cnn.com 这样的网站。每当他们收到想要发布的新文章时，我确信他们有某种用户界面，允许他们输入标题、内容、上传图片等，同时保持网站其余部分的样式和布局.

这与他们实际上“编码”出一个带有标记和所有内容以及他们想要的样式的完整页面相反（看看大多数记者可能不知道标记）。是否有任何人们可以使用的开源库或标准 API，或者大多数博客和网站都是从头开始创建自己的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:54:16.187

**[Wordpress.org](http://wordpress.org) is easily the most popular free/open source option out there**, for blogging or even general websites. People like it because it makes it **very easy to install, and use, even if you are not technically inclined**. [Wordpress.com](http://Wordpress.com) (not to be confused with Wordpress.org) allows you to create free accounts, hosted by them. In addition, almost every shared host (Dreamhost, hostmonster, etc) have one-click Wordpress installs.

There are other options like **Drupal or Joomla that allow you more control** over what you can do, but this usually comes **at the cost of usability** for the person that has no desire to learn any sort of coding (e.g. photography, cooking blogs).

In addition, **Wordpress has a wide variety of ancilliary benefits** that come along with being the market leader, including:

*   Large plug-in support
*   Variety of free and paid for themes
*   More questions that have already been answered online
*   Greater familiarity with developers

# c# - asp.net Internet Explorer 图片缓存？

> ID：11370103
> 
> 赞同：0
> 
> 时间：2012-07-06T21:49:32.130
> 
> 标签：c#, asp.net, image, internet-explorer

我正在用 c# 编写一个 asp.net 应用程序。在我的程序中，根据用户的选择，时间表网格的图像上绘制了线条。当用户选择一天时，图像被重新绘制以显示该天的预定时间“线”。这在 Chrome 和 Firefox 中运行良好，但在 Internet Explorer(9) 中，图像不会更改为另一天，它只显示第一张图像的内容，无论用户随后选择哪一天。

我在代码隐藏中使用了这段代码，因为我认为它正在缓存图像，但它并没有解决问题。任何指针？

```
Response.Cache.SetNoStore();
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

（一个标准的干净网格图像被加载，绘制，然后重命名并保存到不同的本地文件夹。然后该新图像被加载到屏幕上的图像控件。每次用户更改日期时都会发生这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:25:20.440

您可以参考 MS 关于避免图像缓存的文档：

[http://msdn.microsoft.com/en-us/library/w9s3a17d(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/w9s3a17d(v=vs.71).aspx)

并将其放在此 page_load 方法中：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

但是由于您是在运行时命名文件，所以我每次都会以不同的方式命名文件（可能使用日期，因为它是时间线），因此页面上的其他图像也不会被缓存。

# java - 如何仅在特定方法中使用 RESTEasy PreProcessInterceptor？

> ID：11370107
> 
> 赞同：9
> 
> 时间：2012-07-06T21:49:40.680
> 
> 标签：java, rest, resteasy, interceptor

我正在编写一个 REST API，使用 RestEasy 2.3.4.Final。我知道 Interceptor 将拦截我的所有请求，并且 PreProcessInterceptor 将是第一个（在所有内容之前）被调用的。我想知道如何在调用特定方法时才调用此拦截器。

我尝试同时使用 PreProcessInterceptor 和 AcceptedByMethod，但我无法读取我需要的参数。例如，我只需要在调用此方法时运行我的拦截器：

```
@GET
@Produces("application/json;charset=UTF8")
@Interceptors(MyInterceptor.class)
public List<City> listByName(@QueryParam("name") String name) {...} 
```

更具体地说，我需要在所有具有`@QueryParam("name")`

在它的签名上，这样我就可以在一切之前抓住名字并做点什么。

可能吗？我试图在拦截器中捕获“名称”参数，但我无法做到这一点。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T13:56:53.867

您可以`AcceptedByMethod`按照[RESTEasy 文档中的说明使用](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#BindingInterceptors)

创建一个同时实现`PreProcessInterceptor`和的类`AcceptedByMethod`。在`accept`-method 中，您可以检查该方法是否具有带有注释的参数`@QueryParam("name")`。如果该方法具有该注释，则从 - 方法返回 true `accept`。

在`preProcess`- 方法中，您可以从`request.getUri().getQueryParameters().getFirst("name")`.

**编辑：**

这是一个例子：

```
public class InterceptorTest  {

    @Path("/")
    public static class MyService {

        @GET
        public String listByName(@QueryParam("name") String name){
            return "not-intercepted-" + name;
        }
    }

    public static class MyInterceptor implements PreProcessInterceptor, AcceptedByMethod {

        @Override
        public boolean accept(Class declaring, Method method) {
            for (Annotation[] annotations : method.getParameterAnnotations()) {
                for (Annotation annotation : annotations) {
                    if(annotation.annotationType() == QueryParam.class){
                        QueryParam queryParam = (QueryParam) annotation;
                        return queryParam.value().equals("name");
                    }
                }
            }
            return false;
        }

        @Override
        public ServerResponse preProcess(HttpRequest request, ResourceMethod method)
                throws Failure, WebApplicationException {

            String responseText = "intercepted-" + request.getUri().getQueryParameters().getFirst("name");
            return new ServerResponse(responseText, 200, new Headers<Object>());
        }
    }

    @Test
    public void test() throws Exception {
        Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();
        dispatcher.getProviderFactory().getServerPreProcessInterceptorRegistry().register(new MyInterceptor());
        dispatcher.getRegistry().addSingletonResource(new MyService());

        MockHttpRequest request = MockHttpRequest.get("/?name=xxx");
        MockHttpResponse response = new MockHttpResponse();

        dispatcher.invoke(request, response);

        assertEquals("intercepted-xxx", response.getContentAsString());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:08:36.193

如果您返回`return new ServerResponse(responseText, 200, new Headers<Object>());`，您将失去终点。`null`如果您仍然希望将消息传递到最后一点，则需要返回。

# javascript - 获取选择框展开/用户焦点事件

> ID：11370108
> 
> 赞同：0
> 
> 时间：2012-07-06T21:49:46.380
> 
> 标签：javascript, javascript-events

我的表单中有一个选择框元素。单击时，我想生成显示和插入 html 代码的选项。

我尝试在 onclick、onfocus、onshow 事件上放置警报，但没有任何反应：/

的HTML：

```
<select name="select-building" id="select-building"  data-native-menu="false"  onfocus="populateBuildingOptions();">  </select> 
```

的JavaScript：

```
function populateBuildingOptions(){ b = "{{\"buildingCode\":\"1\",\"buildingName\":\asca"\"},{\"buildingCode\":\"2\",\"buildingName\":\"vsdvs\"}}";

 buildingOptions = jQuery.parseJSON(b);
$("#select-building").empty();

for(var i=0;i<buildingOptions.length;i++){
 $("#select-building").append("<option
value=\""+buildingOptions.get(i).buildingCode+"\">"+buildingOptions.buildingName+"/option>"   );
} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:17:17.587

我让它在 jsfiddle 上工作：http: [//jsfiddle.net/uTJzV/4/](http://jsfiddle.net/uTJzV/4/)感谢评论中的帮助

# eclipse - Eclipse CDT 找不到 Cygwin 或 MinGW 工具链

> ID：11370110
> 
> 赞同：16
> 
> 时间：2012-07-06T21:49:54.577
> 
> 标签：eclipse, cygwin, mingw, eclipse-cdt, toolchain

我很难为 C/C++ 配置 Eclipse Juno。我是 Windows 用户，所以我在 Eclipse 下安装了`Cygwin`and `MinGW`， and 。`CDT`也正确配置了`PATH`变量，尽管我在 Eclipse C/C++ 新项目中仍然没有任何新的工具链。

这些是我的 Eclipse 详细信息：

```
Eclipse Java EE IDE for Web Developers.

Version: Juno Release
Build id: 20120614-1722 
```

此外，请参阅已安装的 Eclipse 组件的图像。 ![在 Eclipse 中安装的组件](../Images/0cab9c06742b3751464a442402c6b835.png) 附上一些来自 Windows 命令行的输出：

```
C:\>echo %path%
C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x8
6)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\
Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Fil
es (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\MiKTeX 2.9\miktex
\bin\x64\;C:\Program Files\MATLAB\R2011b\runtime\win64;C:\Program Files\MATLAB\R
2011b\bin;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Java\jdk\b
in;C:\Program Files (x86)\Java\jre\bin;C:\Program Files (x86)\Android\android-sd
k\platform-tools;C:\Program Files (x86)\Android\android-sdk\tools;C:\Program Fil
es\Python32;C:\Program Files (x86)\Notepad++;C:\tomcat\bin;C:\Users\Administrato
r\AppData\Roaming\npm;C:\Program Files (x86)\Gnu\GnuWin32\bin;C:\Program Files\n
odejs;C:\Users\Administrator\AppData\Roaming\npm;C:\MinGW\bin;C:\MSYS\bin;C:\cyg
win\bin

C:\>gdb --version
GNU gdb (GDB) 7.4
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.    

C:\>make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-pc-mingw32

C:\>g++ --version
g++ (GCC) 4.7.0
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

C:\>gcc --version
gcc (GCC) 4.7.0
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

Cygwin shell 的封闭输出：

```
Cygwin Package Information
Package                   Version              Status
_autorebase               000085-1             OK
_update-info-dir          01054-1              OK
alternatives              1.3.30c-10           OK
autoconf                  10-1                 OK
autoconf2.1               2.13-10              OK
autoconf2.5               2.68-1               OK
automake1.9               1.9.6-10             OK
base-cygwin               3.1-1                OK
base-files                4.1-1                OK
bash                      4.1.10-4             OK
binutils                  2.22.51-2            OK
bzip2                     1.0.6-2              OK
colorgcc                  1.3.2-2              OK
coreutils                 8.15-1               OK
crypt                     1.2-1                OK
cygutils                  1.4.10-2             OK
cygwin                    1.7.15-1             OK
cygwin-doc                1.7-1                OK
dash                      0.5.7-1              OK
dejagnu                   20021217-2           OK
diffutils                 3.2-1                OK
dos2unix                  6.0-1                OK
editrights                1.01-2               OK
expect                    5.45-1               OK
file                      5.11-1               OK
findutils                 4.5.9-2              OK
gawk                      4.0.1-1              OK
gcc                       3.4.4-999            OK
gcc-core                  3.4.4-999            OK
gcc-g++                   3.4.4-999            OK
gcc-mingw                 20040810-1           OK
gcc-mingw-core            20050522-3           OK
gcc-mingw-g++             20050522-3           OK
gcc-tools-epoch1-autoconf 2.59-1               OK
gcc-tools-epoch1-automake 1.9.6-1              OK
gcc-tools-epoch2-autoconf 2.64-1               OK
gcc-tools-epoch2-automake 1.11.1-1             OK
gcc4                      4.5.3-3              OK
gcc4-core                 4.5.3-3              OK
gcc4-g++                  4.5.3-3              OK
gdb                       7.3.50-3             OK
gdbm                      1.8.3-20             OK
gettext                   0.18.1.1-2           OK
grep                      2.6.3-1              OK
groff                     1.21-2               OK
gzip                      1.4-1                OK
ipc-utils                 1.0-1                OK
less                      444-1                OK
libattr1                  2.4.46-1             OK
libbz2_1                  1.0.6-2              OK
libcloog0                 0.15.7-1             OK
libdb4.5                  4.5.20.2-3           OK
libffi4                   4.5.3-3              OK
libgcc1                   4.5.3-3              OK
libgdbm                   1.8.0-5              OK
libgdbm-devel             1.8.3-20             OK
libgdbm4                  1.8.3-8              OK
libgmp3                   4.3.2-1              OK
libgmpxx4                 4.3.2-1              OK
libgomp1                  4.5.3-3              OK
libiconv2                 1.14-2               OK
libintl3                  0.14.5-1             OK
libintl8                  0.18.1.1-2           OK
liblzma5                  5.0.2_20110517-1     OK
libmpc1                   0.8-1                OK
libmpfr1                  2.4.1-4              OK
libmpfr4                  3.0.1-1              OK
libncurses10              5.7-18               OK
libncurses9               5.7-16               OK
libncursesw10             5.7-18               OK
libpcre0                  8.21-2               OK
libpopt0                  1.6.4-4              OK
libppl                    0.10.2-1             OK
libreadline7              6.1.2-3              OK
libsigsegv2               2.10-1               OK
libssp0                   4.5.3-3              OK
libstdc++6                4.5.3-3              OK
libstdc++6-devel          4.5.3-3              OK
login                     1.10-10              OK
m4                        1.4.16-1             OK
make                      3.82.90-1            OK
man                       1.6g-1               OK
mingw-binutils            2.21-1               OK
mingw-gcc-core            4.5.2-1              OK
mingw-gcc-g++             4.5.2-1              OK
mingw-pthreads            20110507-1           OK
mingw-runtime             3.20-1               OK
mingw-w32api              3.17-2               OK
mingw64-i686-binutils     2.22.52-1            OK
mingw64-i686-gcc          4.5.3-6              OK
mingw64-i686-gcc-core     4.5.3-6              OK
mingw64-i686-gcc-g++      4.5.3-6              OK
mingw64-i686-headers      3.0b_svn5134-1       OK
mingw64-i686-pthreads     20100619-4           OK
mingw64-i686-runtime      3.0b_svn5134-1       OK
mingw64-x86_64-binutils   2.22.52-1            OK
mingw64-x86_64-gcc        4.5.3-6              OK
mingw64-x86_64-gcc-core   4.5.3-6              OK
mingw64-x86_64-gcc-g++    4.5.3-6              OK
mingw64-x86_64-headers    3.0b_svn5134-1       OK
mingw64-x86_64-pthreads   20100619-4           OK
mingw64-x86_64-runtime    3.0b_svn5134-1       OK
mintty                    1.1.1-1              OK
perl                      5.10.1-5             OK
rebase                    4.2.0-1              OK
run                       1.1.13-1             OK
sed                       4.2.1-2              OK
tar                       1.25-1               OK
tcl                       8.5.11-1             OK
terminfo                  5.7_20091114-14      OK
texinfo                   4.13-4               OK
tzcode                    2012b-1              OK
w32api                    3.17-2               OK
which                     2.20-2               OK
xz                        5.0.2_20110517-1     OK
zlib0                     1.2.7-1              OK 
```

我也很熟悉[为什么 MinGW 没有出现在 Eclipse/Indigo CDT 工具链列表中？](https://stackoverflow.com/questions/8607945/why-doesnt-mingw-show-up-in-the-list-of-eclipse-indigo-cdt-toolchains)以及[如何处理 Eclipse CDT+Cygwin？](https://stackoverflow.com/questions/10463975/how-to-deal-with-eclipse-cdtcygwin)和[http://wyding.blogspot.com/2009/04/setup-cygwin-toolchain-in-eclipse-cdt.html](http://wyding.blogspot.com/2009/04/setup-cygwin-toolchain-in-eclipse-cdt.html)

谁能帮我意识到出了什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T03:07:57.230

我也有同样的问题。我找到了两种可能的解决方案：

1.  选择“新建项目->C++项目->项目类型：可执行”时，取消选中“仅在平台支持时显示项目类型和工具链”。

2.  卸载“GNU Autotools”，然后你可以看到你想要的选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-04T05:50:55.500

根据 CDT 帮助页面：[http](http://wiki.eclipse.org/CDT/User/FAQ#I_installed_MinGW_toolchain_on_my_PC_but_Eclipse_won.27t_find_it) ://wiki.eclipse.org/CDT/User/FAQ#I_installed_MinGW_toolchain_on_my_PC_but_Eclipse_won.27t_find_it 。

> 尽管您的 PATH 上有 g++.exe 或 gcc.exe 并定义了 MINGW_HOME，您仍可能收到“未检测到工具链“MinGW GCC””消息（Luna 4.4.0 上的 CDT 8.4）。确保 MINGW_HOME\bin 中存在名为“mingw32-gcc.exe”的文件。如果它不存在（MinGW-W64 会发生这种情况），请将 -gcc.exe 文件（例如 i686-w64-mingw32-gcc.exe）复制到 mingw32-gcc.exe。如果可怕的消息仍然存在，请重新启动系统（不要只是注销和登录）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-23T00:51:01.970

我有同样的问题。我通过将我的 cygwin 编译器程序的位置添加到 PATH 来修复它。可能您没有正确添加位置。对于 cygwin，将路径转到 bin 文件夹。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-10T08:59:44.397

Eclipse 试图找出 cygwin1.dll 的位置。但是这个文件存在于许多以前用 cygwin 构建的程序中。所以 Eclipse 可以在安装正确的 cygwin 之前找到它。

因此，一个可能的解决方案是将 C:\cygwin\bin 放在 PATH 变量的开头，以便 Eclipse 在此之前搜索。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-28T11:28:23.457

即使我将 PATH 指定为“C:\MinGW\bin”，我也无法让 Eclipse (LUNA) 在我的计算机上找到 MinGW（ **Preferences>C/C++/New C/C++ Project Wizard**中没有可用的MinGW）在**Preferences>C/C++/Build>Environment**，所以我之后做的是：

1.  在不指定任何工具链的情况下创建一个简单的“Hello world”C 项目
2.  （在这一步我尝试全部构建，但失败了）
3.  转到**Project>Properties**，令人惊讶的是，在这里我可以看到 MinGW GCC 作为当前工具链的可用选择。选择它。
4.  现在我可以构建并运行该项目

希望它有帮助！

# c# - 将值从存储过程返回到方法

> ID：11370113
> 
> 赞同：4
> 
> 时间：2012-07-06T21:50:10.040
> 
> 标签：c#, stored-procedures

我有一个存储过程，它返回学生是否被锁定：

```
RETURN @isLocked 
```

我执行这个存储过程，如：

```
 public int IsStudentLocked(string studentName, int lockoutTime)
    {
        SqlConnection connObj = new SqlConnection();
        connObj.ConnectionString = Util.StudentDataInsert();
        connObj.Open();

        SqlCommand comm = new SqlCommand("uspCheckLockout", connObj);

        comm.CommandType = CommandType.StoredProcedure;

        comm.Parameters.Add(new SqlParameter("@Studentname", studentName));
        comm.Parameters.Add(new SqlParameter("@LockoutTime", lockoutTime));

        comm.ExecuteNonQuery();
        connObj.Close();

        //How can I return the @isLocked value below?
        return ((int)(@isLocked));

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T21:56:34.590

要`RETURN`在 T-SQL 中使用该语句（只能返回整数值），您必须添加一个参数来检索它：

```
public int IsStudentLocked(string studentName, int lockoutTime)
{
    SqlConnection connObj = new SqlConnection();
    connObj.ConnectionString = Util.StudentDataInsert();
    connObj.Open();

    SqlCommand comm = new SqlCommand("uspCheckLockout", connObj);

    comm.CommandType = CommandType.StoredProcedure;

    comm.Parameters.Add(new SqlParameter("@Studentname", studentName));
    comm.Parameters.Add(new SqlParameter("@LockoutTime", lockoutTime));

    var returnParam = new SqlParameter
    {
        ParameterName = "@return",
        Direction = ParameterDirection.ReturnValue
    };

    comm.Parameters.Add(returnParam);

    comm.ExecuteNonQuery();

    var isLocked = (int)returnParam.Value;
    connObj.Close();

    return isLocked;

} 
```

但是，这有点混乱（IMO）。通常我在这种情况下所做的是将`SELECT`我想要的值作为存储过程中的最后一条语句。然后我`ExecuteScalar`在命令对象上使用来检索值而不是`ExecuteNonQuery`.

过程：

```
... SQL ...

SELECT @isLocked 
```

方法：

```
public int IsStudentLocked(string studentName, int lockoutTime)
{
    using(SqlConnection connObj = new SqlConnection())
    {
        connObj.ConnectionString = Util.StudentDataInsert();
        connObj.Open();

        SqlCommand comm = new SqlCommand("uspCheckLockout", connObj);

        comm.CommandType = CommandType.StoredProcedure;

        comm.Parameters.Add(new SqlParameter("@Studentname", studentName));
        comm.Parameters.Add(new SqlParameter("@LockoutTime", lockoutTime));

        return (int)comm.ExecuteScalar();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T21:52:57.293

您应该调用 ExecuteScalar 而不是 ExecuteNonQuery 并将 RETURN 替换为 SELECT 在您的存储过程中。

顺便说一句，你应该用`using`块包装你的连接，这样即使在 Close() 之前发生了一些异常，它也会被正确处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:59:24.863

如果 @IsLocked 存储过程中的输出参数

```
System.Data.SqlClient.SqlParameter paramterIsLockedOut = command1.Parameters.Add("@MyParameter", SqlDbType.SmallInt);
paramterIsLockedOut.Direction = ParameterDirection.Output;
command1.ExecuteNonQuery();

int newValue = (int)paramterIsLockedOut.Value; 
```

# cordova - 在 iOS 模拟器 5.0 中运行新的 Xcode 4.3.3 Cordova 应用程序错误“找不到符号：_NSURLIsExcludedFromBackupKey”

> ID：11370114
> 
> 赞同：0
> 
> 时间：2012-07-06T21:50:13.097
> 
> 标签：cordova, ios-simulator, xcode4.3

虽然运行 iOS 5.1 模拟器是可以的。

我的系统是 OSX 10.7 Lions。

我的 Cordova 应用程序不使用与 NSURLIsExcludedFromBackupKey 远程相关的任何内容。它仅在 Foundation.framework/NSURL.h 文件的头文件之一中定义。

我的研究发现了这两个相关的帖子，但没有解决方案： [Use NSURLIsExcludedFromBackupKey without crashing on iOS 5.0](https://stackoverflow.com/questions/9620651/use-nsurlisexcludedfrombackupkey-without-crashing-on-ios-5-0)

和

[http://www.openradar.me/radar?id=1597401](http://www.openradar.me/radar?id=1597401)

运行 iOS 5.0 模拟器的输出：

```
dyld：找不到符号：_NSURLIsExcludedFromBackupKey
  引用自：/Users/wug/Library/Application Support/iPhone Simulator/5.0/Applications/96C31219-6305-460D-A45E-CFA94BA64EFD/Sample.app/Sample
  预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Foundation.framework/Foundation
 在 /Users/wug/Library/Application Support/iPhone Simulator/5.0/Applications/96C31219-6305-460D-A45E-CFA94BA64EFD/Sample.app/Sample

```

在旧模拟器上运行有同样的错误。任何专家都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T04:49:13.673

该问题已在[https://issues.apache.org/jira/browse/CB-989提交](https://issues.apache.org/jira/browse/CB-989)

PetyrVeliki 在[https://groups.google.com/forum/?fromgroups#!topic/phonegap/1KePUPYywEk的临时修复](https://groups.google.com/forum/?fromgroups#!topic/phonegap/1KePUPYywEk)

在 AppDelegat.m 文件的顶部添加以下代码：

```
NSString * const NSURLIsExcludedFromBackupKey = @"NSURLIsExcludedFromBackupKey"; 
```

问题跟踪器有更好的“真正”修复，这需要编译 Cordova Core。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T03:02:01.453

`NSURLIsExcludedFromBackupKey`仅在 iOS 5.1 上可用，因此当您尝试在 5.0 模拟器上运行应用程序时它会崩溃。[[资源]](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

使用其他问题中的解决方案，结合弱链接应该可以解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:18:04.913

只是弱链接Foundation.Framework。

您可以通过转到您的项目目标（通常是左侧项目导航器中的顶部项目），单击摘要，然后向下滚动到链接框架和库的列表来执行此操作。

将 Foundation.Framework 设置为可选。

# php - 防止请求超时 - 大型 POST 数据

> ID：11370115
> 
> 赞同：2
> 
> 时间：2012-07-06T21:50:14.423
> 
> 标签：php, ios, post, httpwebrequest

在我的 iOS 应用程序中，为了发布新问题，我向[http://api.mysite.com/questions](http://api.mysite.com/questions)发出 HTTP POST 请求。POST 数据显然更大或更小，具体取决于图像是否附加到问题上。小（大小约为 100-200kb）图像可以毫无问题地发布到服务器。但是，来自设备相机的较大照片 (~1mb) 会由于图像尺寸过大而导致请求超时。

请您告诉我如何确保图像上传没有问题，这似乎不会发生在许多其他应用程序中。

是服务器问题还是 iOS 代码本身的问题？

编辑 - -

在服务器上，一旦收到请求，PHP 就会将图像数据写入文件。blob 是图像数据：

```
$filepath = $this->debug == true ? "../cityw/img/questions/{$qid}/attachment.png" :"../i/questions/$qid/attachment.png";

if (!file_exists($this->debug == true ? "../cityw/img/questions/{$qid}" : "../i/questions/{$qid}")) {
    mkdir($this->debug == true ? "../cityw/img/questions/{$qid}" : "../i/questions/{$qid}");
}

$fh = fopen($filepath, 'w');

fwrite($fh, $blob);
fclose($fh); 
```

图像数据以 BASE64 格式发送到服务器，然后在到达服务器后进行解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:48:55.920

您是否尝试过使用[set_time_limit解决问题](http://pt.php.net/set_time_limit)

很高兴这对你有用。

# jquery - jquery 菜单错误在单击时显示块而不是内联

> ID：11370116
> 
> 赞同：0
> 
> 时间：2012-07-06T21:50:24.127
> 
> 标签：jquery, css, navigation

我使用 jquery 创建了一个下拉菜单，它显示内联，这是我希望它显示的方式，然后单击以显示其他选项。但是，一旦我单击该链接，它似乎会将 LI 标记放回块中。

任何人都知道它为什么这样做？

HTML

```
<!-- Navigation bar start -->

<div id="navbar">

    <!-- England nav bar start -->
    <li id="engmainnav"><a href="#">England</a>
    <ul id="engsubnav">
        <li class="engli"><? echo $this->Html->link('News', array('controller'=>'Premiership', 'action' =>'news')); ?></li>
        <li class="engli"><? echo $this->Html->link('Results/Fixtures', array('controller'=>'Premiership', 'action' =>'resultsfixtures')); ?></li>
        <li class="engli"><? echo $this->Html->link('Teams', array('controller'=>'Premiership', 'action' =>'teams')); ?></li>
        <li class="engli"><? echo $this->Html->link('Table', array('controller'=>'Premiership', 'action' =>'table'));?></li>

    </ul>
    </li>
    <!-- England nav bar end -->

    <!-- La liga nav bar start-->
    <li id="sanav"><a href="#">Italy</a>
    <ul id="sasubnav">
        <li class="sali"><? echo $this->Html->link('News', array('controller'=>'Italy', 'action' =>'news')); ?></li><br/>
        <li class="sali"><? echo $this->Html->link('Results/Fixtures', array('Italy'=>'Premiership', 'action' =>'resultsfixtures')); ?></li><br/>
        <li class="sali"><? echo $this->Html->link('Teams', array('controller'=>'Italy', 'action' =>'teams')); ?></li><br/>
        <li class="sali"><? echo $this->Html->link('Table', array('controller'=>'Seriea', 'action' =>'table'));?></li><br/>

    </ul>
    </li>

    </div>
    <!-- Navigation bar end --> 
```

CSS

```
/* Navigation Style */
#navbar {
background-color: #000666;
margin: 0px 0px 0px 10px;
}

#engsubnav {
list-style: none;
margin:none;
display: none;

}

 #sasubnav{
 list-style: none;
margin:none;
display: none;
}

 .engli {
   margin: 0px 0px 0px -38px;
display:block;
 }

 li {
  list-style: none;
 margin: 0px 0px 0px 10px;
 display:inline;

  }

  ul{
display:inline;
 } 
```

提前感谢您的帮助

[http://jsfiddle.net/Hm4ns/5/](http://jsfiddle.net/Hm4ns/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:29:29.127

你`display:block;`在你的`.engli`陈述中得到了（`LI`英国列表中的元素都有一个'engli'类）。您`UL`可能被设置为内联，但`LI`s 是块状的，因此一旦它们在点击时显示，它们就会全部落入新行。

# css - 将文本放置在填充空间内

> ID：11370118
> 
> 赞同：0
> 
> 时间：2012-07-06T21:50:40.410
> 
> 标签：css, twitter-bootstrap

我正在使用图像周围的填充并将背景颜色设置为白色来创建具有宝丽来效果的图像

```
 img.team {
background: none repeat scroll 0 0 white;
box-shadow: 0 9px 25px -5px #000000;
display: block;
margin-left: auto;
margin-right: auto;
max-width: 100%;
padding: 12px 12px 50px; 
```

}

我想做的是在图像下方的空间和填充之间写一个标题，就像我用毡笔在上面写的一样。我使用引导缩略图作为我的图像。

我在 h5 上尝试了负边距

```
 h5 {
color: #333333;
font-size: 1.1em;
margin-top: -35px;
text-align: center; 
```

}

HTML 是

```
 <div class="container">
      <div class="row">
      <div class="span4">
        <div class="thumbnail">
         <img class="team"  src="http://placehold.it/160x120"  title="Swimming" alt="Swimming" ></a>

            <h5>Swimming</h5>

   </div><!--End of thumbnail-->
</div><!--End of span4--> 
```

但是，当我在下面放置另一排宝丽来时，它们会因为这个边距而与顶部重叠。

有没有人做过这样的事情？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:22:08.360

而不是样式化`<img>`, 样式，`div.thumbnail`而不是：

```
<div class="thumbnail">
    <img class="team"  src="http://placehold.it/160x120"  title="Swimming" alt="Swimming" ></a>

    <h5>Swimming</h5>
</div> 
```

**CSS：**

```
div.thumbnail {
    background: none repeat scroll 0 0 white;
    box-shadow: 0 9px 25px -5px #000000;
    padding: 12px;
    display: inline-block;
} 
```

[这是给你的演示](http://jsfiddle.net/cvJZ9/)。请注意，您应该删除负边距`<h5>`。

# linux - 进程数是否受 RAM 大小的限制？

> ID：11370119
> 
> 赞同：0
> 
> 时间：2012-07-06T21:50:52.613
> 
> 标签：linux, process, stack

进程数是否受 RAM 大小的限制？[我在这里](http://www.linuxjournal.com/node/3814/print)看到一篇文章说：在 2.3.x 中，它（进程数）是一个可调参数，默认为**size-of-memory-in-the-system / kernel-stack-size**。由于 Linux 中的堆栈大小为 8KB，我们可以说**进程数 = total-stack-size-in-kernel / 8KB**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:16:02.057

“受限制”和“受限制”是有区别的。您可以将一个巨大的进程表放入今天的多台机器中，但它们可能会将该表的大小作为 RAM 的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:56:56.013

进程的数量可能取决于 RAM 的数量，但我认为是处理器和它拥有的内核数量决定了每个进程的执行情况。

# asp.net-mvc - 使用 MVC 路由通过 SiteMinder 文件夹规则

> ID：11370121
> 
> 赞同：0
> 
> 时间：2012-07-06T21:50:55.840
> 
> 标签：asp.net-mvc, rewrite, asp.net-mvc-routing, siteminder

有一个 SiteMinder 规则允许未经身份验证的用户访问“/public/*”页面。但是在我的 mvc 文件夹结构中，没有称为“公共”的物理文件夹（或区域），我不想这样做，因为我应该能够在任何区域自由添加公共页面。现在，未经身份验证的用户将无法访问公共页面（操作）。所以我需要一种解决方法来通过 SiteMinder 访问公共页面。

在我的脑海里有两件事我需要找到解决方案。

1.  通过为 SiteMinder 预先添加“/public”来重写路由（有条件地可能基于 Authorized 属性）。

2.  一旦收到带有“/public”的url，应该将其路由到适当的区域/控制器/动作，忽略其中的“/public”部分。

我仍然想不出一种方法来编写上面的代码。如果您的专家知道如何实现上述目标或有不同的想法，请发表。

干杯，穆西拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:23:32.100

最后，问题缩小到“如何通过在根之后和区域/控制器/操作之前添加“/public”来重写路由？”

在我的同事的帮助下，我做了一个 POC 来实现上述目标：使用反射获取适当的控制器名称、动作名称和分析命名空间获取区域名称。现在我们有了“/public”的新模式。

```
routeUrlPattern = string.Format("public/{0}/{1}/{2}/{{id}}", areaName, controllerName, actionName);

 RouteTable.Routes.Add(new Route(routeUrlPattern, new MvcRouteHandler()) 
```

上述路由应添加到表中的非公共路由之前，以便为 /public 工作。

# php - 尝试删除 PHP 中的特殊字符

> ID：11370125
> 
> 赞同：1
> 
> 时间：2012-07-06T21:51:19.673
> 
> 标签：php, sql

我有一个包含一些文本输入的表单。当我将它们添加到我的数据库中时，我会在每个特殊字符 {'、" 等} 之前得到一个 '\' 字符。我想在将文本输入数据库之前删除'\'，但到目前为止我一直无法。在执行查询之前，我尝试在 PHP 中执行以下操作：

```
$title_str = str_replace('\'','',$_POST['main_title']); 
```

但它没有用。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:59:46.057

听起来像魔术报价仍然打开。您应该禁用它们。这是一件非常安全的事情。

[http://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

此外，在数据库中插入数据时，一定要使用准备好的查询（使用 PDO 或类似的查询）以避免 SQL 注入问题。

# windows-8 - 用于 Javascript Metro 应用程序中缩小视图的分组项的语义缩放

> ID：11370127
> 
> 赞同：1
> 
> 时间：2012-07-06T21:51:29.133
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我正在向我的应用程序添加语义缩放，并且在缩小的列表视图中遇到数据绑定问题。在普通（放大）列表视图中，我正在绑定分组数据并且它呈现得很好。对于缩小的列表视图，我想呈现相同的分组数据（相同的 itemDataSource 和 groupDataSource），但使用不同的 itemTemplate 和 groupTemplate（与普通视图相同但更小）。

我遇到的问题是，当我缩小时，我在 ui.js 第 2117 行收到错误消息“0x800a138f - JavaScript 运行时错误：Object.defineProperty：参数不是对象”。

我尝试将缩小的 listview itemDataSource 属性绑定到 groups.dataSource 集合，而不是设置 groupDataSource 属性（就像我在网上找到的所有示例一样），我工作正常。

为什么缩小视图不像普通视图那样呈现分组项目？

**编辑：** 似乎缩小视图的行为方式与正常（放大）列表视图不同。虽然放大视图接受 itemDataSource 和 groupDataSource，但缩小视图只接受 itemDataSource。我编辑了[Microsoft Official Semantic Zoom Sample](http://code.msdn.microsoft.com/windowsapps/ListView-grouping-and-6d032cc1) (scenario2.html) 并将 zoomedOutListView 更改为使用 myGroupedList.dataSource 作为 itemDataSource 并且出现了同样的问题。

之前的代码：

```
 <div id="zoomedOutListView"
            data-win-control="WinJS.UI.ListView"
            data-win-options="{ 
                itemDataSource: myGroupedList.groups.dataSource, 
                itemTemplate: semanticZoomTemplate, 
                selectionMode: 'none', 
                tapBehavior: 'invoke', 
                swipeBehavior: 'none' 
            }"
        ></div> 
```

之后的代码（重现问题）：

```
 <div id="zoomedOutListView"
            data-win-control="WinJS.UI.ListView"
            data-win-options="{ 
                itemDataSource: myGroupedList.dataSource, //originally was myGroupedList.groups.dataSource
                itemTemplate: semanticZoomTemplate, 
                selectionMode: 'none', 
                tapBehavior: 'invoke', 
                swipeBehavior: 'none' 
            }"
        ></div> 
```

谢谢。迭戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:45:45.033

如果您使用的是自定义 IListDataSource，请确保实现 itemFromKey 方法。

# java - 如何在java中设置windows壁纸

> ID：11370134
> 
> 赞同：0
> 
> 时间：2012-07-06T21:51:59.790
> 
> 标签：java

这是我在stackoverflow上找到的。我正在寻找一个 java 类来为我在 windows 7 中更改 windows 壁纸。

```
public class changewallpaper {    
    public static void main(String[] args) {  
        //supply your own path instead of using this one 
        String path = "C:\\Users\\d1j5\\Pictures\\asgardrealmofthegods.jpg";  
        SPI.INSTANCE.SystemParametersInfo(     
                new UINT_PTR(SPI.SPI_SETDESKWALLPAPER),    
                new UINT_PTR(0),      
                path,          
                new UINT_PTR(SPI.SPIF_UPDATEINIFILE | SPI.SPIF_SENDWININICHANGE)); 
        }     public interface SPI extends StdCallLibrary {   
            //from MSDN article   
            long SPI_SETDESKWALLPAPER = 20;    
            long SPIF_UPDATEINIFILE = 0x01;   
            long SPIF_SENDWININICHANGE = 0x02;    
            SPI INSTANCE = (SPI) Native.loadLibrary("user32", SPI.class, new HashMap<Object, Object>() {   
                {     
                    put(OPTION_TYPE_MAPPER, W32APITypeMapper.UNICODE);    
                    put(OPTION_FUNCTION_MAPPER, W32APIFunctionMapper.UNICODE);     
                    }       });        boolean SystemParametersInfo(      
                            UINT_PTR uiAction,     
                            UINT_PTR uiParam,         
                            String pvParam,    
                            UINT_PTR fWinIni 
                            );   
                    }

    } 
```

[来自stackoverflow的代码源](https://stackoverflow.com/questions/4750372/can-i-change-my-windows-desktop-wallpaper-programmatically-in-java-groovy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:21:49.987

假设您发布的代码正是您要使用的代码……您没有包含 SPI 接口的主体。考虑到您没有告诉我们 eclipse 抛出了什么错误，这是在黑暗中拍摄的。如果您需要更具体的帮助，您需要更具体，而不是说您的代码的某些部分是“红色的”。这对我们没有帮助。

从您发布的 stackoverflow 链接复制完整代码，它应该可以工作。

此外，虽然与您的问题无关，但您的类名应更改为与 Java 标准一致。请参阅[http://www.oracle.com/technetwork/java/codeconv-138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html)

# asp.net - 机器密钥不起作用 - viewstate mac 失败

> ID：11370135
> 
> 赞同：1
> 
> 时间：2012-07-06T21:52:09.603
> 
> 标签：asp.net, iis-7, viewstate, load-balancing

我不断收到此视图状态验证错误：

System.Web.HttpException (0x80004005)：视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。---> System.Web.UI.ViewStateException：无效的视图状态...

我有 ARR 对站点进行负载平衡，我认为当它将用户从一台服务器切换到另一台服务器时（即使我选择了亲和力）它会抛出这个。但是 - 我配置了机器密钥，并且在场中的两台服务器上配置了相同的加密方法、解密方法、验证密钥和解密密钥。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:27:00.483

我们的一台服务器在 Windows 更新上落后了，在运行这些更新后，问题似乎消失了。我已经重新运行了之前一直调用此异常的确切测试，并且没有任何问题。

# php - 使用 url var 下载文件 Curl

> ID：11370138
> 
> 赞同：7
> 
> 时间：2012-07-06T21:52:24.890
> 
> 标签：php, curl

我想用 Curl 下载一个文件。问题是下载链接不直接，例如：

```
http://localhost/download.php?id=13456 
```

当我尝试使用 curl 下载文件时，它会下载文件 download.php！

这是我的卷曲代码：

```
 ###
        function DownloadTorrent($a) {
                    $save_to = $this->torrentfolder; // Set torrent folder for download
                    $filename = str_replace('.torrent', '.stf', basename($a));

                    $fp = fopen ($this->torrentfolder.strtolower($filename), 'w+');//This is the file where we save the information
                    $ch = curl_init($a);//Here is the file we are downloading
                    curl_setopt($ch, CURLOPT_ENCODING, "gzip"); // Important 
                    curl_setopt($ch, CURLOPT_TIMEOUT, 50);
                    curl_setopt($ch, CURLOPT_URL, $fp);
                    curl_setopt($ch, CURLOPT_HEADER,0); // None header
                    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1); // Binary trasfer 1
                    curl_exec($ch);
                    curl_close($ch);
                    fclose($fp); 
    } 
```

有没有办法在不知道路径的情况下下载文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T22:02:33.437

你可以试试 CURLOPT_FOLLOWLOCATION

> TRUE 跟随服务器作为 HTTP 标头的一部分发送的任何“Location:”标头（注意这是递归的，PHP 将跟随它发送的尽可能多的“Location:”标头，除非设置了 CURLOPT_MAXREDIRS）。

所以它会导致：

```
function DownloadTorrent($a) {
    $save_to = $this->torrentfolder; // Set torrent folder for download
    $filename = str_replace('.torrent', '.stf', basename($a));

    $fp = fopen ($this->torrentfolder.strtolower($filename), 'w+');//This is the file where we save the information
    $ch = curl_init($a);//Here is the file we are downloading
    curl_setopt($ch, CURLOPT_ENCODING, "gzip"); // Important 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 50);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_HEADER,0); // None header
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1); // Binary transfer 1
    curl_exec($ch);
    curl_close($ch);
    fclose($fp); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T22:04:55.167

将 FOLLOWLOCATION 选项设置为 true，例如：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

选项记录在这里： [http ://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:53:54.650

哦！

CURLOPT_FOLLOWLOCATION 工作完美......

The problem is that I use **CURLOPT_URL** for fopen(), I simply change **CURLOPT_URL** whit **CURLOPT_FILE**

and it works very well! thank you for your help =)

# jquery - Jquery：悬停时显示动画和多个div的错误

> ID：11370142
> 
> 赞同：0
> 
> 时间：2012-07-06T21:52:41.487
> 
> 标签：jquery, html, hover, jquery-animate, mouseenter

我写了这个小 jquery，它有一个很好的悬停效果。

但是，在某些鼠标悬停时，sccipt 似乎有问题，因为它似乎会导致动画效果循环。（主要是当您将鼠标悬停在第二个和第三个 div 之间时）

有没有人建议如何解决这个问题？

[http://test.gifix.de/index.php](http://test.gifix.de/index.php)

很抱歉对问题的描述不佳，但我相信一旦您将鼠标悬停在示例上方，您就会看到它；）

感谢您的每一个帮助，

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:20:34.880

我认为您可以通过在 div 上使用类来简化执行此操作的方式。我已经建立了一个[JSFiddle](http://jsfiddle.net/Q9ntu/)。这是否实现了您正在尝试做的事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:08:35.413

您的动画正在排队。为防止这种情况，请使用 jQuery 停止功能：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

我更新了您的代码以包括使用停止功能。它现在对我有用。这是更新的代码：

```
<script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
$('#blue-top').mouseenter(function(){
    $('#blue-top').stop(true).animate({height:'200'}, 500);
    $('#blue-middle').stop(true).animate({height:'80'}, 500);
    $('#blue-bottom').stop(true).animate({height:'80'}, 500);
});
$('#blue-top').mouseleave(function(){
    $('#blue-top').stop(true).animate({height:'120'}, 500);
    $('#blue-middle').stop(true).animate({height:'120'}, 500);
    $('#blue-bottom').stop(true).animate({height:'120'}, 500);
});

$('#blue-middle').mouseenter(function(){
    $('#blue-top').stop(true).animate({height:'80'}, 500);
    $('#blue-middle').stop(true).animate({height:'200'}, 500);
    $('#blue-bottom').stop(true).animate({height:'80'}, 500);
});
$('#blue-middle').mouseleave(function(){
    $('#blue-top').stop(true).animate({height:'120'}, 500);
    $('#blue-middle').stop(true).animate({height:'120'}, 500);
    $('#blue-bottom').stop(true).animate({height:'120'}, 500);
});

$('#blue-bottom').mouseenter(function(){
    $('#blue-top').stop(true).animate({height:'80'}, 500);
    $('#blue-middle').stop(true).animate({height:'80'}, 500);
    $('#blue-bottom').stop(true).animate({height:'200'}, 500);
});
$('#blue-bottom').mouseleave(function(){
    $('#blue-top').stop(true).animate({height:'120'}, 500);
    $('#blue-middle').stop(true).animate({height:'120'}, 500);
    $('#blue-bottom').stop(true).animate({height:'120'}, 500);
});

});//]]>  

</script> 
```

# asp.net-mvc - Prevent JsonResult from auto-formatting Dates

> ID：11370146
> 
> 赞同：4
> 
> 时间：2012-07-06T21:52:57.047
> 
> 标签：asp.net-mvc, json, datetime, azure, cloud

I'm writing a cloud based program that utilizes UTC for date saving to the server, and convert it back on the round trip. Problem is, my instance in the cloud is autoconverting the JsonResult datetime values according to the localization settings on the browser obtaining the result.

I have gone through tons of steps to make sure the server side code on both levels is returning the proper data, and it is on all instances, and no Javascript code on my page is making the change either (even removed all my Javascript date formatting just in case), I have traced out with Firebug to determine the exact point that it changes, is when my page receives the Json Result from my JsonResult method. Like I said, I have debugged the values before being sent to the page, and they are proper, and on my response, they are modified based upon browser location....

Has anyone had a similar problem?

Value returned:Date(1341792000000) 07/08/2012 17:00

Should be: Date(1341817200000) (07/09/2012 12:00AM)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:39:56.270

我最终得到了正确的结果，对我的应用程序进行了许多修改。我做了很多事情来实现这一点......首先，我实现了 timezone.JS 来获取将在应用程序中使用的时区列表，并使用 jstz 来获取浏览器加载页面的当前时区。接下来，我必须（对于 mvc）创建一个文件获取方法，该方法访问时区以加载到 timezoneJS 中。

接下来，在保存时区时，我将 pst 指定为类型，然后在往返时转换回 utc 以更新界面。

在格式化我的 Json 日期时，我运行 timezoneJS 方法并从 jstz 获取时区名称，并设置新的日期值，如下所示：

```
var timezone = jstz.determine();
timezoneJS.timezone.zoneFileBasePath = '/Item/GetTz'; // get file method
var dt = new timezoneJS.Date(parseInt(jsonDate.substr(6), timezone.name())); // strips out date from json date
dt.setTimezone('America/Los_Angeles'); 
```

这允许云项目在任何服务器上运行，并在任何浏览器中显示，无论时区如何，并允许用户在本地查看和配置时区敏感数据，并允许用户查看可配置数据库值的开始/结束日期.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:01:47.913

也许使用[http://msdn.microsoft.com/en-us/library/system.datetime.specifykind.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.specifykind.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:10:34.337

你试过吗，

```
date.toLocaleString() 
```

或者，您可以创建一个新`Date`对象并使用`Date.setUTC`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T16:15:00.670

正如OP所说：

> 问题是，我在云中的实例正在根据浏览器上的本地化设置自动转换 JsonResult 日期时间值以获得结果。

最近经历了类似的事情。来自`$.ajax`响应的奇怪行为。根据浏览器的语言设置，以字符串格式接收的日期将转换为语言设置中设置的任何内容。

例如，在 Postman 中，Web API 响应是这样的：

```
{
  "id": "10057",
  "d_date": "3/30/2017 3:00:00 AM",
  "sum": 253.0
}, 
```

如果浏览器设置为英语（en/en-us），则响应与上述相同。

如果浏览器设置为 english-uk(en-gb)，则响应变为：

```
{
  "id": "10057",
  "d_date": "30/03/2017 03:00:00",
  "sum": 253
} 
```

如果浏览器设置为 German(de)，则响应变为：

```
{
  "id": "10057",
  "d_date": "30.03.2017 03:00:00",
  "sum": 253
} 
```

所以不知何故，浏览器或`$.ajax`图书馆正试图变得聪明并自动格式化日期。

可能最好的解决方案是 Web API 以 ISO 日期时间格式发送日期。如果您无法更改后端，另一种解决方案是在 AJAX 标头请求中添加**accept-language: en 。**像这样：

```
$.ajax({
  type: 'POST',
  url: '/endpoint/',
  contentType: 'application/json',
  data: JSON.stringify(body),
  dataType: 'json',
  async: false,
  headers: {
    'accept-language': 'en'
  }
}) 
```

# forms - Classic ASP WebForm Generator

> ID：11370149
> 
> 赞同：0
> 
> 时间：2012-07-06T21:52:59.337
> 
> 标签：forms, asp-classic

I'm newbie here and try to learn here.

I wanna create a Classic asp program, and it's contain a section that users can make their form ( like contact, register and so on).

Now question is, when form created ( inputs have their name and id )
How i can read and save them in DB ( here Access DB )

Is anybody here that know an example of Web Form generator?
Please help and guide me
thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:24:22.510

您可以使用**Request.Form("element_name")**获取表单元素的值。

```
<%
    username = Request.Form("input-username")
    password = Request.Form("input-password")
%> 
```

考虑到您知道如何[连接访问数据库](http://www.webwiz.co.uk/kb/asp-tutorials/connecting-to-an-access-database.htm)，您可以将上述信息保存到数据库中，例如：

```
<%
    Rs.AddNew()
    Rs("username") = username
    Rs("password") = password
    Rs.Update()
%> 
```

**更新**

要获取*动态创建的表单*值，您需要在 Request.Form 对象中执行**for each... 循环。**

```
<%
    for each item in Request.Form
        Response.Write item & "=" & Request.Form(item) & "<br />"
    next
%> 
```

另外我建议你阅读这篇[文章](http://www.devx.com/asp/Article/17745/0/)。

# overflow - Wrong overflow cropping in element with border-radius on Opera

> ID：11370152
> 
> 赞同：10
> 
> 时间：2012-07-06T21:53:12.080
> 
> 标签：overflow, opera, css

Ok, so I've made this [FC Barcelona CSS logo](http://demo.wirone.info/FC_Barcelona_CSS_logo/) and everything works fine under:

*   Firefox 13
*   Chrome 20
*   Safari 5
*   IE 9

BUT on Opera 11 (and 12 too) those blaugrana stripes are not cropped. I have tried many configurations, with and without additional wrapper, but I couldn't get it work.

HTML:

```
<div id="blaugrana_stripes_container" class="abs border_black fill_purple cropper layer9 rounded">
    <!-- Wrapper needed for some browsers to crop overflow properly -->
    <div id="blaugrana_stripes_overflow_cropper" class="rounded">
        <div class="blaugrana_stripes fill_purple border_blue"></div>
        <div class="blaugrana_stripes fill_purple border_blue"></div>
    </div>
</div> 
```

related CSS:

```
#blaugrana_stripes_container, #blaugrana_stripes_overflow_cropper {
    width: 244px;
    height: 244px;
    text-align: left;
    -moz-border-radius: 155px 155px 134px 134px;
    -webkit-border-radius: 155px 155px 134px 134px;
    border-radius: 155px 155px 134px 134px;
}
#blaugrana_stripes_container {
    left: 36px;
    top: 62px;
    border-width: 2px;
    -ms-transform: scaleY(0.79);
    -moz-transform: scaleY(0.79);
    -webkit-transform: scaleY(0.79);
    -o-transform: scaleY(0.79);
    transform: scaleY(0.79);
    z-index: 3;
}
#blaugrana_stripes_overflow_cropper {
    overflow: hidden;
    white-space: nowrap;
}
.blaugrana_stripes {
    height: 100%;
    width: 35px;
    border-width: 0px 35px 0px 35px;
    margin-right: 35px;
    display: inline-block;
}
.cropper {
    overflow: hidden;
    font-size: 0;
    margin: 0px;
    padding: 0px;
    border: none;
}
.abs {
    position: absolute;
} 
```

I've copied it here because there's a lot of code, so maybe it will help. Above I've skipped classes used for decorating (`border_black fill_purple`), z-indexing (`layer9`) and javascript mechanisms (`rounded`) because I think they're not related with problem.

Of course everything is viewable via Firebug or other developer tools on the [demo site](http://demo.wirone.info/FC_Barcelona_CSS_logo/).

Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:40:49.990

还有一种更简洁的使用渐变的方法：

```
#blaugrana_stripes_container {
    background-image: -o-linear-gradient(0deg, #0B2E89 50%, #980F39 50%, #980F39);
    background-size: 70px 50px;
} 
```

你可以摆脱里面的任何东西`#blaugrana_stripes_container`。

[可以在此处找到](http://www.colorzilla.com/gradient-editor/#0b2e89+50,980f39+50,980f39+100;Custom)与所有浏览器兼容的上述 CSS 渐变。

从[Lea Verou](http://lea.verou.me/2010/12/checkered-stripes-other-background-patterns-with-css3-gradients/)窃取的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:21:48.103

我不知道为什么这在 Opera 中是错误的，但您可以使用渐变（参见下面的代码）。它在 IE 中不起作用（使用版本 9 测试）。

```
.blaugrana_stripes{display:none;}
#blaugrana_stripes_overflow_cropper{

background: #0b2f89;
background: -moz-linear-gradient(left,  #0b2f89 0%, #0b2f89 14%, #980f39 14%, #980f39 28%, #0b2f89 28%, #0b2f89 42%, #980f39 42%, #980f39 57%, #0b2f89 57%, #0b2f89 71%, #980f39 71%, #980f39 86%, #0b2f89 86%, #0b2f89 99%);
background: -webkit-gradient(linear, left top, right top, color-stop(0%,#0b2f89), color-stop(14%,#0b2f89), color-stop(14%,#980f39), color-stop(28%,#980f39), color-stop(28%,#0b2f89), color-stop(42%,#0b2f89), color-stop(42%,#980f39), color-stop(57%,#980f39), color-stop(57%,#0b2f89), color-stop(71%,#0b2f89), color-stop(71%,#980f39), color-stop(86%,#980f39), color-stop(86%,#0b2f89), color-stop(99%,#0b2f89));
background: -webkit-linear-gradient(left,  #0b2f89 0%,#0b2f89 14%,#980f39 14%,#980f39 28%,#0b2f89 28%,#0b2f89 42%,#980f39 42%,#980f39 57%,#0b2f89 57%,#0b2f89 71%,#980f39 71%,#980f39 86%,#0b2f89 86%,#0b2f89 99%);
background: -o-linear-gradient(left,  #0b2f89 0%,#0b2f89 14%,#980f39 14%,#980f39 28%,#0b2f89 28%,#0b2f89 42%,#980f39 42%,#980f39 57%,#0b2f89 57%,#0b2f89 71%,#980f39 71%,#980f39 86%,#0b2f89 86%,#0b2f89 99%);
background: -ms-linear-gradient(left,  #0b2f89 0%,#0b2f89 14%,#980f39 14%,#980f39 28%,#0b2f89 28%,#0b2f89 42%,#980f39 42%,#980f39 57%,#0b2f89 57%,#0b2f89 71%,#980f39 71%,#980f39 86%,#0b2f89 86%,#0b2f89 99%);
background: linear-gradient(to right,  #0b2f89 0%,#0b2f89 14%,#980f39 14%,#980f39 28%,#0b2f89 28%,#0b2f89 42%,#980f39 42%,#980f39 57%,#0b2f89 57%,#0b2f89 71%,#980f39 71%,#980f39 86%,#0b2f89 86%,#0b2f89 99%);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:42:51.317

Opera 12.01 修复了这个问题，但是还有一个与此主题无关​​的[错误。](http://my.opera.com/community/forums/topic.dml?id=1462732)我知道这不是一个解决方案，但我想让它比评论更明显。

# javascript - WebSockets, Comet, AJAX & Long Polling

> ID：11370153
> 
> 赞同：1
> 
> 时间：2012-07-06T21:53:13.280
> 
> 标签：javascript, ajax, websocket, comet, long-polling

My understanding of **Comet** is that its a server-side AJAX request. My understanding of **Long Polling** ("Push") is that it is also a server-side AJAX request. My understanding of **WebSockets** is that they are a two-way AJAX request.

If any of these are wrong, please begin by correcting me!

Assuming I'm more or less correct, is it true that these are all just AJAX (JavaScript using `XmlHttpRequest` object under the hood)? If they are not all just AJAX calls, then how do you implement them in the client (via JavaScript) and on the server (using something like Java)? Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:14:20.223

你的理解`WebSockets`是不正确的。WebSockets 是一种新协议，提供了一个与`XmlHttpRequest`.

这就是创建 WebSocket 的方式

```
var exampleSocket = new WebSocket(
    "ws://www.example.com/socketserver", "protocolOne"
); 
```

请参阅[https://developer.mozilla.org/en/WebSockets/](https://developer.mozilla.org/en/WebSockets/)

# c# - Explicitly load related entities in many-to-many relationship with Entity Framework over WCF

> ID：11370154
> 
> 赞同：0
> 
> 时间：2012-07-06T21:53:23.883
> 
> 标签：c#, wcf, entity-framework, many-to-many, self-tracking-entities

I'm using EF 4.1 with Self-Tracking Entities in a layered application which uses WCF to hand entities back and forth from the client to the server.

A portion of my database contains 3 tables:

```
Customer
Contact
CustomerContacts 
```

`CustomerContacts` contains only the two primary keys of `Customer` and `Contact`, thus the EDM represents this as navigation properties - `Customer.Contacts` and `Contacts.Customers`. The `CustomerContacts` table is not represented otherwise in the model, meaning there is no `CustomerContacts` entity, which I understand and expect as a feature of the EDM Designer when representing many-to-many relationships of this form.

The situation is that I have a list of `Customer`s bound to a `ComboBox` and wish to load the related `Contact`s of a `Customer` only at the point when it is selected in the `ComboBox`. Put another way, I wish to explicilty load `Customer.Contacts` when a `Customer` is selected in the `ComboBox`. I can't use `Customer.ID` in a `Where` to fetch the list of `Contacts`, since there is no join entity in the model which relates them.

Currently, I am loading another copy of the `Customer`, using `Include("Contacts")` to get the `Contact`s and then setting via `selectedCustomer.Contacts = temporaryCustomer.Contacts;`

Does anyone know of another method which doesn't require that I fetch a redundant, temporary copy of the `Customer`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:29:45.603

You already know `Id` of selected customer so you can simply pass it to WCF as parameter and query contacts related to customer:

```
var customerContacts = context.Contacts
                              .Where(c => c.Customers.Any(cu => cu.Id == passedId)); 
```

Anyway you should think about replacing your WCF with STEs with WCF Data Services which are more suitable for this scenarios and support many features (including loading of navigation property) out-of-the-box.

# sockets - 当 send() 成功时，WSAWaitForMultipleEvents 返回超时

> ID：11370165
> 
> 赞同：2
> 
> 时间：2012-07-06T21:54:31.800
> 
> 标签：sockets, visual-c++, networking, network-programming, winsock

我正在开发一个涉及套接字编程的应用程序。我正在尝试在此应用程序中实现重置功能，以防服务器因任何原因关闭或崩溃。对于重置，我需要在手动重新启动服务器后重新建立客户端和服务器之间的通信。现在我可以将请求从客户端发送到服务器，该服务器将处理并向客户端发送回复。`Send()`服务器端的函数成功返回，但`WSAWaitForMultipleEvents()`客户端的函数`WSA_TIME_OUT`每次都返回。

我在客户端重新启动我的套接字，`SO_REUSEADDR`重置时具有真实值。我对网络编程很陌生，我无法理解为什么会这样。

这是我在客户端的代码。它有点乱所以请多多包涵

```
void 
SocketListner::run()
{
    // std::cout << "Thread ID of SocketListener : " << QThread::currentThreadId() << "\n";
    if(_isFrameGrabber)
    {
        _listenForFrames();
    }
     else
    {
        _listenForRequests();
    }
}

void
SocketListner::_listenForRequests()
{
    DWORD eventVal;
    unsigned int eventSock;
    WSANETWORKEVENTS networkEvents;
    std::stringstream ss;

    int bufferLength = 500;
    char * msg = new char[bufferLength];
    std::string Msg = "";
    int retCode;
    int diff;

    while(!_done)
    {
        // Giving it one second less than the condition wait time
   //     OpenThreads::ScopedLock<OpenThreads::Mutex> lock(_destructorMutex);
        if((eventVal=WSAWaitForMultipleEvents(_eventCnt, _socketEvents, false, 3000, false)) == WSA_WAIT_FAILED)
        {
            ss.str("");
            ss << "WSAWaitForMultipleEvents() failed with error : " << WSAGetLastError();
            LOG_ERROR(ss.str());
            emit socketErrorSignal(eventVal);
            break;
        }
        else if(eventVal == WSA_WAIT_TIMEOUT)
        {
            //OpenThreads::ScopedLock<OpenThreads::Mutex> lock(_mutex);
            if(_done)
            {
                WSACloseEvent(_socketEvents[0]);
                if(_eventCnt==2)
                    WSACloseEvent(_socketEvents[1]);
                break;
            }
            continue;
        }

        if( (diff=(eventVal - WSA_WAIT_EVENT_0)) == 0 )
            eventSock = s_sock;
        else if(diff == 1)
            eventSock = c_sock;
        else 
            continue;

        if((WSAEnumNetworkEvents(eventSock, _socketEvents[eventVal - WSA_WAIT_EVENT_0], &networkEvents)) == SOCKET_ERROR)
        {
            ss.str("");
            ss << "WSAEnumNetworkEvents() failed with error : " << WSAGetLastError();
            LOG_ERROR(ss.str());
            // break;
        }

        if (networkEvents.lNetworkEvents & FD_ACCEPT)
        {
            if (networkEvents.iErrorCode[FD_ACCEPT_BIT] != 0)
            {
                ss.str("");
                ss << "FD_ACCEPT failed with error : " << networkEvents.iErrorCode[FD_ACCEPT_BIT];
                LOG_ERROR(ss.str());
                break;
            }

            if ((c_sock = accept(eventSock, NULL, NULL)) == INVALID_SOCKET)
            {
                ss.str("");
                ss << "accept() failed with error : " << WSAGetLastError();
                LOG_ERROR(ss.str());
                break;
            }

            if ((_socketEvents[_eventCnt] = WSACreateEvent()) == WSA_INVALID_EVENT)
            {
                std::stringstream ss;
                ss << "WSACreateEvent() failed with error : " << WSAGetLastError();
                LOG_ERROR(ss.str());
                break;
            }

            if( WSAEventSelect(c_sock, _socketEvents[_eventCnt], FD_READ | FD_CLOSE) == SOCKET_ERROR)
            {
                ss.str("");
                ss << "WSAEventSelect() failed with error : " << WSAGetLastError();
                LOG_ERROR(ss.str());
                break;
            }

            ++_eventCnt;
        }

        if(networkEvents.lNetworkEvents & FD_READ)
        {
            if (networkEvents.lNetworkEvents & FD_READ && networkEvents.iErrorCode[FD_READ_BIT] != 0)
            {
                ss.str("");
                ss << "FD_READ failed with error : " << networkEvents.iErrorCode[FD_READ_BIT];
                LOG_ERROR(ss.str());
            }

            if((retCode = recv(eventSock, msg, bufferLength, 0)) > 0)
            {
                int place = 0;
                while(place < retCode)  
                {
                    if(msg[place] == '\n' && Msg.length() != 0)
                    {
                        OpenThreads::ScopedLock<OpenThreads::Mutex> lock(_mutex);
                        //Naresh: Replacing std::vector by std::queue
                        _requests.push(Msg);
                        Msg = "";
                    }
                    else
                    {
                        if(msg[place] != '\0')
                            Msg.push_back(msg[place]);
                    }
                    ++place;
                }
            }
            //Abhishek: Testing Complete else block
            else if(retCode == 0 || WSAGetLastError() == WSAECONNRESET)
            {
                //Abhishek
                shutdown(c_sock, SD_BOTH);
                shutdown(s_sock, SD_BOTH);
                closesocket(c_sock);
                closesocket(s_sock);
                int error = WSAGetLastError();

                if(!_initialize())
                {
                    _done = true;
                    return;
                }
            }
            else if(retCode == SOCKET_ERROR)
            {
                bool stopListening=false;
                int errorCode = WSAGetLastError();
                _processSocketError(errorCode, stopListening);          

                if(stopListening)
                {
                    LOG_WARNING("Connection with the partner lost.");
                    emit socketErrorSignal(errorCode);
                    break;
                }
            }
        }

        if(networkEvents.lNetworkEvents & FD_CLOSE)
        {
            if (networkEvents.iErrorCode[FD_CLOSE_BIT] != 0)
            {
                ss.str("");
                ss << "FD_CLOSE failed with error : " <<  networkEvents.iErrorCode[FD_CLOSE_BIT];
                LOG_ERROR(ss.str());
                emit socketErrorSignal(networkEvents.iErrorCode[FD_CLOSE_BIT]);
            }
            else if(!_stopped)
            {
                LOG_ERROR("Lost Connection with Wall.");
                emit socketErrorSignal(networkEvents.iErrorCode[FD_CLOSE_BIT]);
            }

            closesocket(eventSock);
            break;
        }
        //Sleep(100);
    } //While

    delete[] msg;
    msg = NULL;

    // If any failure occurs make the _bDone  variable to true, as thread is no longer running
    _cleanUpCondition.signal();
} 
```

这是_initialize函数

```
bool 
SocketListner::_initialize()
{
    if(_IP.length() <= 0)
    {
        LOG_ERROR("Host IP Address : " + _IP + " is invalid.");
        return false;
    }

    //Naresh: replacing vector by queue
    while(!_requests.empty())
    {
        _requests.pop();
    }

    WSADATA wsaData;

    if(WSAStartup(0x101,&wsaData) != 0)
    {
        LOG_ERROR("Failed WSAStartUp() call.");
        return false;
    }

    sockaddr_in SockAddr;

    SockAddr.sin_family = AF_INET;
    SockAddr.sin_port = htons(_port);
    SockAddr.sin_addr.s_addr =  inet_addr(_IP.c_str());

    s_sock = socket(AF_INET,SOCK_STREAM,0);
    //Abhishek:BugFix for reset enable address reuse else bind() will fail
    bool addrReuse = true;
    setsockopt(s_sock, SOL_SOCKET, SO_REUSEADDR, (const char*) &addrReuse, sizeof(BOOL));

    if(!_isFrameGrabber)
    {
        if ((_socketEvents[_eventCnt] = WSACreateEvent()) == WSA_INVALID_EVENT)
        {
            std::stringstream ss;
            ss << "WSACreateEvent() failed with error : " << WSAGetLastError();
            LOG_ERROR(ss.str());
            return false;
        }

        if(WSAEventSelect(s_sock, _socketEvents[_eventCnt], FD_ACCEPT | FD_CLOSE)== SOCKET_ERROR)
        {
            std::stringstream ss;
            ss << "WSAEventSelect() failed with error : " << WSAGetLastError();
            LOG_ERROR(ss.str());
            return false;
        }
        ++_eventCnt;
    }

    if(s_sock == INVALID_SOCKET)
        return false;

    int errorCode = bind(s_sock,(sockaddr*)&SockAddr,sizeof(SockAddr));

    if(errorCode == SOCKET_ERROR)
    {
        bool stopListening = false;

        _processSocketError(WSAGetLastError(), stopListening);
        return false;
    }

    if(listen(s_sock,10)!=0)
    {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:34:05.860

我找到了解决我的问题的方法。现在我在我的应用程序中重新启动所有线程和套接字。之后我发现服务器无法发送，因为它无法连接新的套接字。我放置了一个无限循环以尝试在我的`sendData()`函数中连接到客户端套接字。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:32:00.907

如果对等体死亡，则根本就不一定有任何事件。在 TCP 中检测断开连接的唯一可靠方法是写入它。第一次写入断开的连接可能会成功，但稍后会失败。

# c++ - 碰撞检测和时间复杂度：如何更轻松地检查碰撞？

> ID：11370168
> 
> 赞同：0
> 
> 时间：2012-07-06T21:55:14.093
> 
> 标签：c++, c, collision-detection

我正在尝试编写一个处理各种对象检测的程序。对象具有原点、宽度、高度和速度。有没有办法设置数据结构/算法，以便每个对象都不会与其他所有对象进行检查？

我试图避免的问题的一些示例代码：

```
for (int i = 0; i < ballCount; i++)  
{  
    for (int j = i + 1; j < ballCount; j++)  
    {  
        if (balls[i].colliding(balls[j]))  
        {
            balls[i].resolveCollision(balls[j]);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:57:59.460

您可以使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)快速找到与另一个矩形相交的所有矩形。如果您需要处理非矩形形状，您可以先找到[边界框](http://en.wikipedia.org/wiki/Minimum_bounding_rectangle)相交的对象。

> **四叉树的一些常见用途**
> 
> *   ...
> *   二维高效碰撞检测
> *   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:06:26.260

正如其他答案所提到的，您可以使用四叉树结构来加快碰撞检测速度。

我会推荐[GEOS](http://trac.osgeo.org/geos/)开源 C++ 库，它具有良好的四叉树实现。 [这是他们的四叉树类的文档](http://geos.osgeo.org/doxygen/classgeos_1_1index_1_1quadtree_1_1Quadtree.html)。

所以你的伪代码看起来像这样：

```
Quadtree quadtree;
// Create and populate the quadtree.
// Change it whenever the balls move.

// Here's the intersection loop:
for (int i=0; i<ballCount; ++i) {
    Envelope envelope = ...;  // Get the bounds (envelope) of ball i
    std::vector<void*> possiblyIntersectingBalls;
    quadtree.query(envelope, possiblyIntersectingBalls);
    // Now loop over the members of possiblyIntersectingBalls to check
    // if they really intersect, since quadtree only checks bounding
    // box intersection.
} 
```

# .net - 跨多个服务的 WCF 安全性

> ID：11370170
> 
> 赞同：0
> 
> 时间：2012-07-06T21:55:17.073
> 
> 标签：.net, wcf, security

我们正在从旧的 .NET 1.1 远程系统迁移到 .NET 4.0 WCF 架构。系统的一部分是一个桌面客户端应用程序，我们用它来调用位于我们中间层的 300 多个函数。

我们正在将这些远程功能整合到 9 个服务中，但需要一种很好的方法来验证用户在任何其他后续 WCF 调用之前首先执行了“登录”功能。

由于登录只发生在这些服务之一上，我不确定是否有办法在服务之间“联合”它。（所有都托管在同一台机器上，同一个域。）我们通过 net.tcp 公开服务，目的是从长远来看也允许外部客户端的 wshttp 绑定。（不确定我是否会通过不同的绑定获得额外的东西，这可能会有所帮助）

我想出的是托管一个包含身份验证信息的单例。当验证用户登录并将其提交到“安全存储”时，我们将 Guid 返回给客户端以与后续 WCF 调用一起发送。

然后每个 WCF 调用都将针对单例“安全存储”进行验证。

所以问题是......我可以使用 WCF 原生的东西来实现同样的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:06:39.557

此表有助于分离绑定![在此处输入图像描述](../Images/23d4e86213ccd8f7a62f0cb85029b444.png)

关于安全，wcf有几种类型auth， [SecurityMode](http://msdn.microsoft.com/en-us/library/ms731925.aspx)

询问具体，wcf 中的安全性是个大话题

# php - 使用 PDO 扩展的登录脚本不起作用

> ID：11370175
> 
> 赞同：1
> 
> 时间：2012-07-06T21:55:50.183
> 
> 标签：php, pdo

我不确定我是否做得正确，但我刚开始使用 PDO，我无法让我的代码正常工作。我继续收到错误“抱歉无法连接”，我无法弄清楚出了什么问题。

下面包括我正在使用的代码：

```
function doRun( $data )  
    { 
        try 
        {
            $db = new PDO('mysql:host=localhost;dbname=testData', 'root', 'root');
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

                $stmt = $db->prepare('  SELECT 
                                                username, pass 
                                        FROM    
                                                testTable
                                        WHERE
                                                username = :name
                                        AND     
                                                pass = :pass

                                    ');

                $stmt->bindParam(':name', $username, PDO::PARAM_STR);
                $stmt->bindParam(':pass', $pass, PDO::PARAM_STR);

                $stmt->execute();

                //$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
                $result = $stmt->fetchColumn();

                if($result == false)
                {
                    echo 'sorry could not connect';
                }
                else
                {
                    $_SESSION['username'] = $user;

                    echo 'logged in as' . $user;
                }

        } 
        catch (PDOException $e) 
        {
            echo "throw";
        }

        $db = NULL;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:17:21.103

这会给你 0 行，因为它似乎`$username`没有`$pass`定义：

```
 $stmt->bindParam(':name', $username, PDO::PARAM_STR);
  $stmt->bindParam(':pass', $pass, PDO::PARAM_STR);
                            ^^^^^^^^^ 
```

您可能希望将变量中的一些元素`$data`作为用户名和密码提供给函数。

稍后您将使用一个`$user`未定义的变量。

包含什么`$data`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:25:51.227

即使您正在连接但您没有找到匹配项，您“无法连接”的原因是因为您的用户变量没有定义。

尝试以下解决方案：

```
<?php

function doRun( $data )  
{ 
    $msg = '';
    $username = isset($_POST['name']);
    $pass = isset($_POST['pass']);

    try 
    {
        $db = new PDO('mysql:host=localhost;dbname=testData', 'root', 'root');
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        $stmt = $db->prepare('
            select
                username
                ,pass 
            from   
                testTable
            where
                username = :name
                and pass = :pass
        ');
        $stmt->execute(array(':name' => $username, ':pass' => $pass);
        $result = $stmt->fetchAll();

        if(!empty($result)){
            $_SESSION['username'] = $user;
            $msg = "logged in as $user";        
        }else{
            $msg = "Unable to connect";
        }

    } catch (PDOException $e) {
        echo "Error: $e";
    }

    echo $msg

    $db = NULL;
} 
?> 
```

# python - 产生多个线程的问题

> ID：11370176
> 
> 赞同：-1
> 
> 时间：2012-07-06T21:55:50.723
> 
> 标签：python, multithreading

使用生成多个线程是否有任何问题`threading.Thread`？

例如，每次单击 wx.SpinCtrl 时？我不知道有一种实现可以让您保持线程处于活动状态并多次启动 main 方法。

PS：我认为 a[`threading.Timer`](http://docs.python.org/library/threading.html#timer-objects)暗示它还不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:57:42.853

'C++'-like 伪：

线：

```
Tthread::run(){
  while(true){
    semaphore.wait();
    mainMethod();
  };
}; 
```

图形用户界面：

```
MyForm::OnSpinCtrlClick(Control sender){
  semaphore.signal();
}; 
```

mainMethod() 将在您单击时运行多少次。

# android - 仅在设置首选项时处理 NFC 意图

> ID：11370177
> 
> 赞同：1
> 
> 时间：2012-07-06T21:55:55.543
> 
> 标签：android, nfc

我见过几个不同的应用程序（如NXP 的[NFC TagInfo](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo)和[NFC TagInfo ），](https://play.google.com/store/apps/details?id=com.nxp.taginfolite)*只有当*在首选项中设置了该选项时，才会在触摸标签时选择自动启动（或显示在“选择应用程序”列表中） ，否则系统似乎完全忽略了意图过滤器。

这如何在 Android 应用程序中完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T22:30:00.440

完整的答案是[`<activity-alias>`](http://developer.android.com/guide/topics/manifest/activity-alias-element.html)在应用程序的清单中使用 an ，如下所示：

```
<activity-alias
  android:name=".ActivityAlias"
  android:targetActivity=".YourActualActivity"
  android:enabled="false" >
  <intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity-alias> 
```

`YourActualActivity`是您希望能够打开或关闭意图过滤器的类。由于您不想禁用完整的活动，因此您可以使用活动别名，在其中放置要启用的意图过滤器（此处默认情况下禁用）。

在您的 PreferenceActivity 中，您设置了一个在特定设置更改时调用的侦听器。然后它会做这样的事情：

```
getPackageManager().setComponentEnabledSetting(
  new ComponentName("your.package.name", "your.package.name.ActivityAlias"),
  changedBooleanPreference ? PackageManager.COMPONENT_ENABLED_STATE_DISABLED :
    PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
  PackageManager.DONT_KILL_APP); 
```

这`changedBooleanPreference`是已更改的设置。

请注意，包管理器可能需要一些时间才能使更改生效。这取决于 Android 版本发生这种情况的时间和速度（可能还取决于设备的 CPU 速度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:57:57.197

您可以使用和禁用`<intent-filter>`您希望忽略的组件。`PackageManager``setComponentEnabledSetting()`

# uima - 找不到 UIMA pear fle 的类

> ID：11370178
> 
> 赞同：0
> 
> 时间：2012-07-06T21:55:59.177
> 
> 标签：uima

我是 UIMA 的新手。我正在使用 PubMed xml 文件中的 pear 文件进行注释。我已经安装了 Julie Lab medline reader UIMA collection reader file 和 Lingpipe gazeteer 作为分析引擎。我已经运行了 CPE 生成器并试图获得正确的注释词，但我没有这样做。发生以下错误：

`The class de.julielab.jules.reader.reader.MedlineReader could not be found Descripotor file=file/C:/apache-uima/examples/descriptor/collection reader/julie-medline-reader 1.7/desc/Medlinereaderdesciptor.xml causedBy: org.apache.uima.ResourceInitializationException:The class de.julielab.jules.reader.reader.MedlineReader could not be found`

`caused by: Java.lang.classNotFound exception de.julielab.jules.reader.reader.MedlineReader`

给我一个解决这个错误的方法对我有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:15:28.353

在您的 PEAR 中查看 MedlineReader CollectionReader 描述符

```
C:/apache-uima/examples/descriptor/collection reader/julie-medline-reader 1.7/desc/Medlinereaderdesciptor.xml 
```

并查看类型系统导入：

```
 <typeSystemDescription>
  <imports>
    <import location="julie-document-meta-pubmed-types.xml"/>
    <import location="julie-document-structure-types.xml"/>
  </imports>
</typeSystemDescription> 
```

确保这些文件存在。尝试对完整路径进行硬编码（例如 C:/....），看看是否能解决问题。

PS：注意路径中有空格，最好使用下划线

```
C:/apache-uima/examples/descriptor/collection_reader/julie-medline-reader_1.7/desc/Medlinereaderdesciptor.xml 
```

# redis - 对 Redis 及其工作方式感到困惑

> ID：11370183
> 
> 赞同：1
> 
> 时间：2012-07-06T21:56:27.543
> 
> 标签：redis

我在这里关注一篇文章，我想我想去散列路线，但我很困惑如果我有多个taxi_car

```
<?php
$redis->hset("taxi_car", "brand", "Toyota");
$redis->hset("taxi_car", "model", "Yaris");
$redis->hset("taxi_car", "license number", "RO-01-PHP");
$redis->hset("taxi_car", "year of fabrication", 2010);
$redis->hset("taxi_car", "nr_starts", 0);
/*
$redis->hmset("taxi_car", array(
    "brand" => "Toyota",
    "model" => "Yaris",
    "license number" => "RO-01-PHP",
    "year of fabrication" => 2010,
    "nr_stats" => 0)
);
*/
echo "License number: " .
    $redis->hget("taxi_car", "license number") . "<br>";

// remove license number
$redis->hdel("taxi_car", "license number");

// increment number of starts
$redis->hincrby("taxi_car", "nr_starts", 1);

$taxi_car = $redis->hgetall("taxi_car");
echo "All info about taxi car";
echo "<pre>";
var_dump($taxi_car);
echo "</pre>"; 
```

我将如何创建一个数据库，其中包含有关 redis 中的 tax_cars 的所有数据。现在我知道redis中没有数据库只有键，但我在这里使用关系术语来表达自己。如果我有 1000 个taxi_cars，我不想有 1000 个初始键。它必须是某些东西的子集。我什至不知道如何解释这一点。

**编辑**

所以可以说，在品牌下我有丰田、本田、铃木，然后在品牌下我有不同的风格，如塔科马、雅阁等

我将如何继续插入该数据并检索它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:57:34.260

您不应该尝试将关系模型概念映射到 Redis 之类的 NoSQL 存储，而应该考虑数据结构和访问路径。

以下是一些简单的例子：

[从 SQLite 移植到 Redis](https://stackoverflow.com/questions/10794142/porting-from-sqlite-to-redis/10795541#10795541)

[在 redis 中使用键](https://stackoverflow.com/questions/10017800/work-with-keys-in-redis/10018882#10018882)

[如何在redis中建立多对多关系](https://stackoverflow.com/questions/10907942/how-to-have-relations-many-to-many-in-redis/10917710#10917710)

在这里您要存储汽车型号的记录。您首先需要一些东西来识别它们（即关系术语中的主键）。然后你可以将这些记录存储在 Redis 的顶级字典中。

你不应该存储：

```
taxi_car => hash{ brand" => "Toyota", "model" => "Yaris", etc ... } 
```

但：

```
taxi_car:1 => hash{ brand" => "Toyota", "model" => "Yaris", etc ... }
taxi_car:2 => hash{ brand" => "Toyota", "model" => "Prius", etc ... }
taxi_car:3 => hash{ brand" => "Tesla", "model" => "Model_S", etc ... } 
```

现在，您需要预测访问路径。例如，要检索每个品牌和型号的汽车，您需要添加额外的集合（用作索引）：

```
brand:Toyota => set{ 1 2 }
brand:Tesla  => set{ 3 }
model:Yaris  => set{ 1 }
model:Prius  => set{ 2 }
model:Model_S => set{ 3 } 
```

所以你可以检索：

```
# Per brand
SMEMBERS brand:Toyota 
  -> returns 1 2
HGETALL taxi_car:1
HGETALL taxi_car:2

# Per model
SMEMBERS model:Prius
  -> returns 2
HGETALL taxi_car:2

# Per brand and per model (a bit useless here), plus associated data
# sort is used to get all the taxi_car data in one shot
sinterstore tmp brand:Toyota model:Prius
sort tmp by nosort get taxi_car:*->brand get taxi_car:*->model etc ... 
```

# c - Compiling C code on a Mac os x lion

> ID：11370185
> 
> 赞同：3
> 
> 时间：2012-07-06T21:56:31.807
> 
> 标签：c, compilation, osx-lion

I am a beginner, trying to code C on a Mac. I am using Learn C the Hard way By Zed but when I tried running the C code on my Mac it would not run. I have installed Xcode from the mac Appstore but when I try to run my code using the command "make" or "gcc" the terminal responds command not found. Am I doing something wrong?

I have tried searching for the solution but all of the ones I have found say just to install Xcode and do not give further instructions.

I am just hoping to find out how to test/run my code. Thanks for the help in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:59:47.557

Install the Command line tools via xcode. You just go into preferences and then downloads.

[XCode 4.3 Command Line Tools](https://stackoverflow.com/questions/9344107/xcode-4-3-command-line-tools)

If you still have troubles after updating xcode or installing command line tools try this install after:

[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

Good Luck!

# ruby-on-rails-3 - 我得到一个带有水豚访问方法的空页面，但响应对象有内容

> ID：11370186
> 
> 赞同：1
> 
> 时间：2012-07-06T21:56:32.383
> 
> 标签：ruby-on-rails-3, rspec, capybara

好的，所以我正在使用 capybara + rails 3 + rspect

我正在尝试登录我的网站，但即使我在使用该`fill_in`方法时没有收到错误，但我还是收到了该方法的错误 `click_on`，因为它找不到我要单击的元素。

这是我的 HTML 代码：

```
<form accept-charset="UTF-8" action="/" class="filter_form" id="login" method="post">
        <fieldset>
          <div class="modal-body">
            <div class="clearfix login-fields">
              <label for="user_email">Email</label>
              <div class="input login-inputs">
                <input class="input-text" id="user_email" name="user[email]" placeholder="email" size="30" type="email" value="">
              </div>
            </div>
            <div class="clearfix login-fields">
              <label for="user_password">Password</label>
              <div class="input login-inputs">
                <input class="input-text" id="user_password" name="user[password]" placeholder="password" size="30" type="password">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <input class="btn btn-primary login_btn" id="btn_login" name="commit" type="submit" value="Sign in">
            <a href="/lms/forgot_password" class="btn">Forgot password...</a>
            <a href="#" class="btn close cancel" data-dismiss="modal">Cancel</a>
          </div>
        </fieldset>
</form> 
```

这是测试：

```
describe "Login ", js: true, type: :request do
   it "should login correctly if the right credentials are given" do

    Capybara.default_wait_time = 15
    Capybara.ignore_hidden_elements = false

   visit new_user_session_path
    fill_in 'user_email', :with => 'example@test.com'
    fill_in 'user_password', :with => 'pwd123'
    p page.body
    click_on 'Sign in'
    visit '/'

      save_and_open_page

     response.should have_content('Welcome')
  end
end 
```

最糟糕的是，当我在看到以下代码`p page.body`之前就这样做了：`click_on`

```
<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\"><head></head><body></body></html>\ 
```

但是，如果我更改它，`p response.body.inspect`那么我将获得页面的完整 html 代码......，该`visit`方法不应该将响应的内容加载到`page`?

任何帮助将不胜感激，这让我发疯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:49:40.593

添加该行：

```
config.include Capybara::DSL 
```

到 spec/spec_helper.rb：

```
RSpec.configure do |config|
   .....

   config.include Capybara::DSL

   .....
end 
```

# antlr - 如何解决这个简单的 antlr 递归问题

> ID：11370187
> 
> 赞同：1
> 
> 时间：2012-07-06T21:56:33.670
> 
> 标签：antlr, antlr3

我正在阅读 URL（并试图复制）但失败了......（关于 antlr 的文章也很棒）。

[https://supportweb.cs.bham.ac.uk/docs/tutorials/docsystem/build/tutorials/antlr/antlr.html](https://supportweb.cs.bham.ac.uk/docs/tutorials/docsystem/build/tutorials/antlr/antlr.html)

在添加括号内容之前我的解决方案：

```
whereClause: WHERE expression -> ^(WHERE_CLAUSE expression);
expression: orExpr;
orExpr: andExpr (OR^ andExpr)*;
andExpr: primaryExpr (AND^ primaryExpr)*;
primaryExpr: parameterExpr | inExpr | compExpr; 
```

我的解决方案由于无限递归而失败（但我认为 LPAREN^ 和 RPAREN！应该在哪里解决这个问题？？？）....

```
whereClause: WHERE^ (expression | orExpr);
expression: LPAREN^ orExpr RPAREN!;
orExpr: andExpr (OR^ andExpr)*;
andExpr: primaryExpr (AND^ primaryExpr)*;
primaryExpr: parameterExpr | inExpr | compExpr | expression; 
```

注意底部的primaryExpr 后面有表达式，它有LPAREN 和RPAREN，但是WHERE 可以是orExpr 或表达式（即第一个表达式可以使用或不使用括号）。

我确信这可能是一个简单的问题，比如我一直盯着几个小时之类的错字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:50:55.540

> 我正在阅读网址（并试图复制）但失败了......（关于 antlr 的文章也很棒）......

请注意，本文解释了 ANTLR v2，它的语法与 v3 有很大不同。最好在这里寻找一个体面的 ANTLR v3 教程：[https ://stackoverflow.com/questions/278480/antlr-tutorials](https://stackoverflow.com/questions/278480/antlr-tutorials)

> 我的解决方案由于无限递归而失败（但我认为 LPAREN^ 和 RPAREN！应该在哪里解决这个问题？？？）....

如果那是`WHILE`. 但是，`orExpr`在您的情况下是导致问题的原因（如果您删除它，*该*递归错误将消失）。

带括号的表达式通常具有最高优先级，因此应该放在您的`primaryExpr`规则中，如下所示：

```
grammar T;

options {
  output=AST;
}

parse       : whereClause EOF!;
whereClause : WHERE^ expression;
expression  : orExpr;
orExpr      : andExpr (OR^ andExpr)*;
andExpr     : primaryExpr (AND^ primaryExpr)*;
primaryExpr : bool | NUMBER | '('! expression ')'!;
bool        : TRUE | FALSE;

TRUE        : 'true';
FALSE       : 'false';
WHERE       : 'where';
LPAREN      : '(';
RPAREN      : ')';
OR          : '||';
AND         : '&&';
NUMBER      : '0'..'9'+ ('.' '0'..'9'*)?;
SPACE       : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

现在输入`"where true || false"`和`"where (true || false)"`都将在以下 AST 中进行解析：

![在此处输入图像描述](../Images/9d3c1e838c57ddda2ba78d74c1a1b194.png)

# python - 在 proc.stdout.read() 中的 n 个字节或行之后停止 python 子进程

> ID：11370189
> 
> 赞同：1
> 
> 时间：2012-07-06T21:56:47.730
> 
> 标签：python, subprocess

我想在 python 中运行一个子进程，直到子进程输出了一定数量的字节或行。在此之后，我想终止它。这可能与子流程有关吗？

这是我到目前为止所拥有的：

```
proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
#kill after reaching n bytes of output, proc.terminate()
out, errors = proc.communicate() 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:11:14.527

一种相当直接的方法是将输出重定向到将为您进行字节/行计数的程序，例如：

```
proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.STDOUT, shell=True)
head = subprocess.Popen(['head', '-n', '20'], stdin=proc.stdout, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
proc.stdout.close()
out, errors = head.communicate() 
```

我不确定这种方法的可移植性如何，我只能在 Linux 上进行测试，但是在 Windows 上你应该能够使用该`more`命令来实现类似的行为。

关闭`proc.stdout`是必要的，以便在退出`proc`时接收 SIGPIPE 。`head`

# c# - Visual Studio / resharper 不将 PropertyInfo.GetValue 返回的对象视为 null

> ID：11370196
> 
> 赞同：0
> 
> 时间：2012-07-06T21:57:15.630
> 
> 标签：c#, visual-studio-2010, resharper, warnings

我通过调用 GetValue 来检索属性的值，如下所示：

```
//have T tObj;
var sExpr = s.Body as MemberExpression;
var sProp = typeof(T).GetProperty(sExpr.Member.Name);
var sVal = dProp.GetValue(tObj, null); 
```

由于某种原因，编译器/resharper 永远不会认为 sVal 为空（我不确定哪个显示警告）。我在设计时没有收到可能的空引用警告。如果我创建一个条件，`if(sVal == null)`我会得到一个设计时警告，该表达式总是错误的。

sVal 只是一个对象，对象可以为空。我不认为 GetValue 保证永远不会返回 null。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:18:51.720

约翰斯基特是对的。使用变量后，我正在检查 null 。在使用变量之前，我重新安排了代码以进行空值检查，问题就消失了。奇怪的是，我之前没有收到空引用警告，我应该有。

# memory-leaks - 如何使用 IntelliTrace Standalone Collector 检测生产 .Net 应用程序中的内存泄漏？

> ID：11370197
> 
> 赞同：1
> 
> 时间：2012-07-06T21:57:28.960
> 
> 标签：memory-leaks, asp.net-4.0, visual-studio-2012, intellitrace, memory-leak-detector

Visual Studio 2012RC 能够使用 IntellitTrace 独立收集器收集的 IIS 应用程序池数据的外部收集跟踪文件。我知道在我的生产应用程序中存在某种内存泄漏，经过几个小时的监控就很明显了。

我现在准备好插入 VS2012 的大型 iTrace 文件，但想知道如何找到有问题的对象。

我也在使用调试器工具并遵循 [这些](http://blog.tfanshteyn.com/2009/02/production-debugging-memory-leak.html)说明。但是，在尝试执行 .load SOS 或任何其他命令时遇到错误，表明未加载适当的 CLR 文件（或类似文件）。

我希望在 IntelliTrace 分析器中看到类似的地址列表和消耗的内存 - 这可能吗？

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:33:50.440

Intellitrace 仅分析事件和方法调用。您不会获得有关单个对象或内存泄漏的信息，因为它没有跟踪内存。也没有为对象创建/销毁提供任何事件，因此在任何情况下您都无法推断。

要跟踪内存，您必须使用应用程序上的分析工具，但不要将它们附加到您的生产服务器！为它使用一个测试环境，看看你是否可以复制这个问题。

# desktop-application - 当应用程序（桌面/游戏）挂起或被迫关闭或断电时会发生什么？

> ID：11370199
> 
> 赞同：0
> 
> 时间：2012-07-06T21:57:41.553
> 
> 标签：desktop-application, freeze

我已经编码多年，但前段时间我问自己这个问题。在我的大学里，我从未见过这个问题得到解决。我对此非常好奇。

那么，关于代码和 CPU 到底会发生什么？我对代码很好奇。

例如，如果您正在运行一个桌面程序并且您正在向数据库中插入数据，那么在我上面提到的场景中会发生什么？

```
MyDBConnection cn = new MyDBConnection();
cn.start();
cn.beginTransaction();
cn.insertData("INSERT INTO T_TABLE VAVLUES(1,2,'WHITE LIES')");
cn.insertData("INSERT INTO T_TABLE VAVLUES(1,3,'BLACK LIES')");

-------------------------------------------------------------------
Enery power off, application hang for whatever reason.
-------------------------------------------------------------------

cn.insertData("INSERT INTO T_TABLE VAVLUES(1,4,'VOID LIES')");
cn.commit();
cn.close(); 
```

之后会发生什么？没有什么？

数据被破坏（据我认识的人说）？有回滚或 RAM 获得空闲或挂起？操作系统试图恢复进程？

任何人都知道一些程序来忍受这些事故？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:05:47.110

电源有时会出现故障，即使您是一家大型银行，每台服务器运行双电源并采取了可以采取的所有其他预防措施（例如 UPS、备用发电机）。

出于这个原因，数据库被设计为在您使用数据库事务时经受住突然的故障。当数据库在突然断电后上电时，会使用日志/事务日志来保证数据库处于一致状态。

# sql-server - 如何为 SQL Server 2008 构建全文搜索谓词

> ID：11370200
> 
> 赞同：0
> 
> 时间：2012-07-06T21:57:44.057
> 
> 标签：sql-server, full-text-search

我想在全文列中搜索以下两个术语：

```
2011
J Vineyards 
```

我将谓词构造为

```
"2011*" and "j vineyards*" 
```

不返回任何行。

应该匹配的记录是

```
2011 j vineyards viognier alexander valley united states 
```

经过实验，似乎与单个“j”字符有关。

编辑：

这是全文列 BeverageSearchData 的选择语句。

```
Declare @test nvarchar(100);
Set @test='""2011*" and "j vineyards*"';
Select * from bv_beverage WHERE CONTAINS (BeverageSearchData,@test) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:14:00.663

这里有几种可能性。完整的查询而不仅仅是谓词将帮助您获得更好的答案。

可能正在发生的一件事是 SQL 全文搜索在构建索引时会消除单个字符（如 J 中的）。

如果使用`CONTAINS`，您可能需要更改噪声文件并重新启动 SQL Server 全文搜索服务。

如果使用`LIKE`，您可以尝试添加一个额外的单字符通配符。玩一下，看看它在没有 2011 的情况下是否可以工作，然后重新添加。

```
WHERE myColumn like 'j_vineyards%'
WHERE myColumn like 'j%vineyards%' 
```

另外需要注意的是它`CONTAINS`不支持前导通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:05:13.817

你在找`%`，不是`*`。

试试这个：

```
"%2011%" and "%j vineyards%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T20:45:57.800

您在创建索引时选择了哪种语言？[默认情况下，SQL Server 在创建索引](http://msdn.microsoft.com/en-us/library/ms187317.aspx)时会关联系统全文停止列表，这可能就是您的情况。

尝试使用 STOPLIST OFF 构建索引，如下所示 -

```
CREATE FULLTEXT INDEX on [table]([column]) ON [catalog] WITH STOPLIST OFF; 
```

或者，您可以[修改停止列表](http://msdn.microsoft.com/en-us/library/ms142551.aspx)以排除某些单词，例如上面显示的示例中的“j”。

# file-upload - struts 2 文件上传和表单数据

> ID：11370201
> 
> 赞同：1
> 
> 时间：2012-07-06T21:57:46.103
> 
> 标签：file-upload, struts2, form-data, multipartform-data

struts 2 中的动作类是模型驱动的 bean。在表单提交中有几个表单数据（文本字段）和文件上传标签。当我尝试删除所有文件标签并提交时，bean 值正在填充，但如果我包含文件标签，则不会填充表单数据。是否可以通过单个表单提交将多个文件上传和表单数据发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:36:16.163

它工作正常问题实际上是在萤火虫重新发送请求中。当实际提交表单时，它工作正常，但在重新发送相同的请求时它不起作用。

# android - ListView Header 中的 EditText 不可编辑

> ID：11370202
> 
> 赞同：1
> 
> 时间：2012-07-06T21:57:52.747
> 
> 标签：android, android-layout, android-listview, android-edittext

我在 ListView 的标题中有一个 EditText 以及一个 Spinner 和 Button。出于某种原因，EditText 不允许我在其中输入。弹出软键盘，点击框内出现光标，键盘识别出我正在输入，但框内什么也没有。

这是处理制作标题的 onCreate 的 java。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.keyvalue);

    m_items = Utils.getTrackerCursor(this, 0, "");

    m_items.getCount();

    startManagingCursor(m_items);

    String[] columns = new String[] {"name","value","result"};
    int[] to = new int[] {R.id.txtkeyValue_rowTitle, R.id.txtkeyValue_rowValue, R.id.txtkeyValue_rowResult};

    m_adapter = new trackerAdapter(this, R.layout.keyvalue_row, m_items, columns, to);

    Button btnRollAll = new Button(this);
    btnRollAll.setText("Roll All");

    final Spinner spinTrackerGroups = new Spinner(m_Context);

    m_trackerGroups = Utils.getTrackerGroups(m_Context);
    String[] spinVals = triMap.getArray(m_trackerGroups); 

    ArrayAdapter<CharSequence> Adap_spinTrackerGroups = new ArrayAdapter<CharSequence>(
            this, android.R.layout.simple_spinner_item, spinVals);

    Adap_spinTrackerGroups.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinTrackerGroups.setAdapter(Adap_spinTrackerGroups);

    EditText search = new EditText(m_Context);
    search.setHint("Search");
    search.setWidth(200);

    LinearLayout lay = new LinearLayout(m_Context);
    lay.addView(spinTrackerGroups);
    lay.addView(search);
    lay.addView(btnRollAll);

    getListView().addHeaderView(lay);

    this.setListAdapter(m_adapter);

    LinearLayout.LayoutParams params = (LayoutParams) spinTrackerGroups.getLayoutParams();
    params.width = 230;
    spinTrackerGroups.setLayoutParams(params);
    spinTrackerGroups.setSelection(1);

} 
```

我将列表视图的 xml 以及单个列表视图行的 xml 包括在内，以便更好地衡量。

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout>

    <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="50dp" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/txtkeyValue_rowTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_span="3"
                    android:layout_weight=".5"
                    android:ellipsize="middle"
                    android:paddingLeft="10dp"
                    android:text="TextView"
                    android:textSize="16sp"
                    android:singleLine="true" />

   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:01:07.790

请看这个线程：[Focusable EditText inside ListView](https://stackoverflow.com/q/2679948/1010868)

# sql - 在表 UPDATE 上交替使用 CASE

> ID：11370206
> 
> 赞同：1
> 
> 时间：2012-07-06T21:58:10.423
> 
> 标签：sql, oracle, syntax

这有效：

```
UPDATE KEYBOARD_LEARNING a
SET a.date_completed =
CASE
  WHEN a.date_completed = '04-JUL-2012' THEN '06-JUL-2012'
    END
    WHERE a.emplid = 18 
```

但这不会（下）。我得到的错误是数据类型不匹配，这当然是有道理的，因为一个是 DATE 数据类型，另一个是 NUMBER。

```
UPDATE KEYBOARD_LEARNING a
SET a.date_completed =
CASE a.date_completed 
  WHEN  '04-JUL-2012' THEN '06-JUL-2012'
    END
    WHERE a.emplid = 21 
```

我的问题：是否有一种解决方法可以使我的第二种方式工作，我将列名“a.date_completed”放在 SQL 的 CASE 行中，而不是我如何让它工作第一种方式？我是否完全不使用第二个 SQL 的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:26:55.353

您可以改用日期文字：

```
UPDATE KEYBOARD_LEARNING a
SET a.date_completed =
  CASE a.date_completed 
    WHEN  DATE '2012-07-04' THEN DATE '2012-07-06'
  END
WHERE a.emplid = 21 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:19:34.100

`date_completed`在 case 语句中转换为字符串。

尝试这个：

```
UPDATE KEYBOARD_LEARNING a
   SET a.date_completed =
         CASE TO_CHAR(a.date_completed, 'DD-MON-RRRR')
          WHEN  '04-JUL-2012' THEN TO_DATE('06-JUL-2012','DD-MON-RRRR')
         END
 WHERE a.emplid = 21 
```

# boost - 在 boost::random 意外行为中正确保存/恢复 RNG 状态

> ID：11370209
> 
> 赞同：2
> 
> 时间：2012-07-06T21:58:40.963
> 
> 标签：boost, random

我有一个小型测试程序，它尝试使用 boost::random 保存和恢复随机数生成器的状态，但它的行为不像文档所示。来自 boost 文档：

> 模拟伪随机数生成器的类也应该模拟 Streamable 概念，即实现 operator<< 和 operator>>。如果是这样，则 operator<< 将伪随机数生成器的所有当前状态写入给定的 ostream，以便 operator>> 可以在以后恢复该状态。状态应以独立于平台的方式写入，但假定用于写入和读取的语言环境相同。恢复状态的伪随机数生成器与刚写入状态的原始伪随机数生成器是等价的。

据我了解，如果保存了 RNG 状态，然后从中提取了一个数字，则状态应该会改变。如果稍后恢复状态，这应该允许生成与生成器回滚时完全相同的数字。我做了一个测试程序来检查这个，但乍一看似乎状态没有恢复。考虑代码：

```
 unsigned int s = static_cast<unsigned int>(std::time(0));

//typedef boost::minstd_rand base_generator_type;
typedef boost::mt19937 base_generator_type;
base_generator_type randgen(s);
boost::uniform_01<base_generator_type> getrand(randgen);
//boost::normal_distribution<float> noise(0,1);
//boost::variate_generator<base_generator_type,
//boost::normal_distribution<float> > getrand(randgen, noise);

double numsbefore[2], numsrightafter[2], numsnew[4];

//generate a short sequence, save it, and display
numsbefore[0] = getrand();
numsbefore[1] = getrand();

cout << "First Sequence, before save: " 
     << numsbefore[0] << " "
     << numsbefore[1]  << endl; 

//save the current RNG state to a file using the stream interface
std::ofstream rngfileout("test_rngfile.txt");
rngfileout << randgen;
rngfileout.close();

//generate the next two numbers and display
numsrightafter[0] = getrand();
numsrightafter[1] = getrand();
cout << "Next, right after save: " 
   << numsrightafter[0] << " "
   << numsrightafter[1] << endl;

 //read in the RNG state that was saved, back into the RNG, restoring the state
 //to be such as it was prior to the most recent two calls to randgen()
 std::ifstream rngfilein("test_rngfile.txt", ifstream::in);

 if(!rngfilein.good())
 {
  cout << "Couldn't read from file\n";
  return 0;
 }
rngfilein >> randgen;
rngfilein.close();

//declare and initialize a new variate generator to the newly-restored generator
boost::uniform_01<base_generator_type> getrand2(randgen);
//   boost::variate_generator<base_generator_type, 
//     boost::normal_distribution<float> > getrand2(randgen, noise);

//copy the new variate function into the old one, to allow us to use
//the old one on the restored generator   
getrand = getrand2;

//generate the next sequence
//The first two should be the same as the most recent two called
//The next two should be new random numbers
numsnew[0] = getrand();
numsnew[1] = getrand();
numsnew[2] = getrand();
numsnew[3] = getrand();

cout << "Restored, Next: " 
     << numsnew[0] << " "
     << numsnew[1] << " "
     << numsnew[2] << " "
     << numsnew[3] << endl; 
```

给定时间种子的输出是：

> 第一个序列，保存前：0.970021 0.266862
> 下一个，保存后：0.110485 0.267466 已
> 恢复，下一个：0.970021 0.266862 0.110485 0.267466

* * *

代码的注释说明了我认为应该发生的事情。此外，一些行包含注释代码，用于使用不同的生成器和不同的分布进行相同的测试。任何这些都会出现同样的问题：在状态恢复后从生成器 randgen 获取的下两个值与保存后立即生成的两个值不同，因为它们应该是。

经过仔细检查（调试），似乎对变量生成器 getrand() 的调用根本不会改变生成器的状态，`randgen`无论我在其上调用 getrand() 多少次，所以当我保存它时，它仍然存在就好像它刚刚创建一样，因此，当我在恢复后再次从中拉出时，它只是从头开始。

不应该每次调用生成器都会导致状态前进吗？如果 RNG 状态从不改变，我怎么能得到不同数字的序列？我正在查看/保存的发电机不是“真实”的发电机，还是什么？

此外， 的赋值操作`getrand = getrand2`可能看起来很粗略，但 = 运算符是为它们定义的，并且替换最后 4 个调用`getrand2()`并没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T22:13:43.317

> 我正在查看/保存的发电机不是“真实”的发电机，还是什么？

确实如此。`uniform_01`您正在使用的构造函数实际上会*复制*所提供的引擎，而不是获取引用。

如果您使用的是 Boost 1.39 或更高版本，则可以像这样使用它：

```
boost::uniform_01<> getrand;
getrand(randgen); 
```

如果您卡在较旧的 Boost 上并且不需要`getrand`可复制，则将`uniform_01`'s 类型参数从`base_generator_type`to更改`base_generator_type&`也应该有效。

# bash - bash if 语句中的两个条件

> ID：11370211
> 
> 赞同：29
> 
> 时间：2012-07-06T21:58:49.427
> 
> 标签：bash, if-statement, conditional-statements

我正在尝试编写一个脚本来读取两个选项，如果它们都是“y”，我希望它说“测试完成！” 如果其中一个或两个都不是“y”，我希望它说“测试失败！”

这是我想出的：

```
echo "- Do You want to make a choice?"
read choice

echo "- Do You want to make a choice1?"
read choice1

if [ "$choice" != 'y' ] && [ "$choice1" != 'y' ]; then
    echo "Test Done!"
else
    echo "Test Failed!"
fi 
```

但是当我用“y”回答这两个问题时，它会说“测试失败！” 而不是“测试完成！”。当我用“n”回答这两个问题时，它会说“测试完成！”

我做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-06T22:03:36.323

您正在检查错误的条件。

```
if [ "$choice" != 'y' ] && [ "$choice1" != 'y' ]; 
```

上述语句在`choice!='y'`和时为真`choice1!='y'`，因此程序正确打印**“测试完成！”** .

更正的脚本是

```
echo "- Do You want to make a choice ?"
read choice

echo "- Do You want to make a choice1 ?"
read choice1

if [ "$choice" == 'y' ] && [ "$choice1" == 'y' ]; then
    echo "Test Done !"
else
    echo "Test Failed !"
fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T22:07:26.667

该程序正在执行您告诉它执行的操作。你说“如果第一个选择不等于'y'并且第二个选择不等于'y'然后打印“测试完成！”否则打印“测试失败！” - 所以只有当两个选择*都不*是y时“测试完成！”被打印出来。

你可能的意思是：

```
echo "- Do You want to make a choice ?"
read choice

echo "- Do You want to make a choice1 ?"
read choice1

if [ "$choice" == 'y' ] && [ "$choice1" == 'y' ]; then
echo "Test Done !"
else
echo "Test Failed !"
fi 
```

我将`!=`不等于更改为`==`等于。现在，只有当您对两个问题都回答“y”时，才会“测试完成！” 被打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:03:01.680

尝试：

```
if [[ "$choice" != 'y' && "$choice1" != 'y' ]]; then
    echo "Test Done!"
else
    echo "Test Failed!"
fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T22:04:04.933

```
if [ "$choice" != 'y' -a "$choice1" != 'y' ]; then
    echo "Test Done !"
else
    echo "Test Failed !"
fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T22:05:43.843

你把比较逻辑倒过来了；从你的描述中你想说

```
if [ "$choice" = 'y' ] && [ "$choice1" = 'y' ]; then 
```

我实际上很惊讶 && 构造有效，尽管在进一步检查时它可能应该。不过，我会把它写成

```
if [ "$choice" = 'y' -a "$choice1" = 'y' ]; then 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T22:06:28.527

你的逻辑颠倒了；当您应该检查 == 时，您正在检查 !=。试试这个：

```
if [ "$choice" == 'y' ] && [ "$choice1" == 'y' ]; then
    echo "Test Done !"
else
    echo "Test Failed !"
fi 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-02T07:14:36.830

另一个想法，

```
$ c1='y' ; c2='y' ; [[ ${c1} = 'y' ]] && [[ ${c2} = 'y' ]] && echo true || echo false  
true  
$ c1='n' ; c2='y' ; [[ ${c1} = 'y' ]] && [[ ${c2} = 'y' ]] && echo true || echo false  
false  
$ c1='n' ; c2='y' ; [[ ${c1} = 'y' ]] || [[ ${c2} = 'y' ]] && echo true || echo false  
true  
$ c1='n' ; c2='n' ; [[ ${c1} = 'y' ]] || [[ ${c2} = 'y' ]] && echo true || echo false  
false  
$ 
```

乱码泛滥。(;

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-06T22:04:59.223

线

```
if [ "$choice" != 'y' ] && [ "$choice1" != 'y' ]; then 
```

测试两个选项*是否都不是*“y”，所以当两个选项*都是*“y”时，该语句为假，您的程序正确打印“测试失败”。

# asp.net-mvc - MVC 实体框架注解

> ID：11370217
> 
> 赞同：0
> 
> 时间：2012-07-06T21:59:21.950
> 
> 标签：asp.net-mvc, razor

说我有以下代码：

```
 Truck truck = new Truck();
    truck.id = '12323'

    return view(truck); 
```

请注意，实体卡车有许多与之关联的字段，例如颜色、注释等。

注意，我喜欢为最大长度添加注释。

我该如何添加和注释。我知道这通常是在一个类中完成的，但在这种情况下，我没有一个类，因为我直接从实体框架中获取 Truck。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:06:22.537

您将要为您的实体类创建一个部分类（又名伙伴类）并为其提供 MetadataType 属性。使用验证属性查看此示例。特别是标记为**Using Data Annotation Validators with the Entity Framework**的部分。

[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs)

# android - cygwin找不到安卓

> ID：11370220
> 
> 赞同：0
> 
> 时间：2012-07-06T21:59:31.080
> 
> 标签：android, android-ndk, cygwin

嗨，我正在关注 ndk (Hello-jni) 上的 android 教程，我正在尝试在 cygwin 中运行以下命令

```
 android update project -p . -s 
```

但我收到以下消息：

```
 -bash: android: command not found 
```

我是新手，我认为这是因为 cygwin 没有正确连接到 Android，但我不知道如何解决这个问题。任何人都可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:13:15.613

您需要设置[路径](http://pielot.org/2010/12/09/using-cygwin-with-the-android-ndk-on-windows/)，以便 cygwin 知道在哪里可以找到 android 程序。

在[这里](https://stackoverflow.com/questions/5025986/ndk-cygwin-path-specific-issues)，看到那行说，

> 设置 PATH=E:/android/android-sdk-windows/tools;E:/android/android-ndk-r5b

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T16:56:19.193

放：

```
export ANT_HOME=`cygpath –u “$ANT_HOME”`
export JAVA_HOME=`cygpath –u “$JAVA_HOME”`
export ANDROID_SDK=`cygpath –u “$ANDROID_SDK”`
export ANDROID_NDK=`cygpath –u “$ANDROID_NDK”` 
```

在 cygwin_path\home{username} 的 .bash_profile 中

# c++ - 类模板，带模板功能，特化

> ID：11370227
> 
> 赞同：0
> 
> 时间：2012-07-06T22:00:22.330
> 
> 标签：c++

我正在尝试编写一个模板类来帮助程序员编写正确的代码。给定从旧金山到华盛顿的路线和从华盛顿到纽约的路线，它将计算从旧金山经华盛顿到纽约的路线。当给出从旧金山到洛杉矶和华盛顿到纽约的路线时，编译器会报错。

这是类（没有正常的主力功能）：

```
extern const char miami[] = "Miami";

template< const char* FINISH, const char* START>
class Route {
public:
    Route();
    ~Route() {};

    template<const char* OTHERPLACE>
    Route<START, OTHERPLACE> alterFinish() const;
};

template<const char* START> // specialisation
template<const char* OTHERPLACE>
// Allow only miami as FINISH to be changed to something else.
Route<START, OTHERPLACE> Route<START, miami>::alterFinish() const{
    return Route<START, OTHERPLACE>();
} 
```

不幸的是，这不起作用。我收到“无效使用不完整类型”错误。没有专门化的相同类型的函数确实可以编译。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:46:12.863

`invalid use of incomplete type`表示您使用了尚未声明的东西。在这种情况下，它是 的部分特化`Route`：

```
template <const char* START>
class Route<START,miami>{

    template<const char* OTHERPLACE>
    Route<START, OTHERPLACE> alterFinish() const;
}; 
```

你为什么需要这个？好吧，你想创建一个方法`alterFinish()`，它应该专门用于`template<class START> Route<START, miami>`. 全称是`Route<START, miami>::alterFinish()`。但是你从来没有`template<class START> Route<START, miami>`在任何地方定义过。这是一个不完整的类型，因此编译器无法编译。

但是，我相信您的程序中还有其他一些问题。你真的有必要使用模板吗？`std::map<std::pair<city,city>, double>`对于您的成本来说，这还不够吗？您真的想将您的城市保存为字符串文字吗？

此外，尚不清楚为什么您的程序在特殊情况下会崩溃。根本没有足够的代码，即使您提供的代码也不会提供您的编译器错误，除非添加必要的调整并移动许多符号。

# c++ - 对话框（shell 脚本程序），但用于 C/C++ 程序

> ID：11370228
> 
> 赞同：0
> 
> 时间：2012-07-06T22:00:23.797
> 
> 标签：c++, dialog, console, terminal

我正在寻找一个库或可从 C/C++ 使用的东西（如果可能的话，跨平台），它执行类似于程序“对话框”的功能，该程序在大多数 Linux 系统上都可用。基本上，我想要一个类似于 的简单菜单`dialog --menu`，但我不想为此编写太多代码。基于控制台的很好；有人知道这样的图书馆吗？

顺便说一句，有没有人知道一个很好的谷歌快捷方式来搜索程序“对话框”而不是 GUI 对话框（例如 Go 编程语言的“golang”）？我无法获得“对话”来产生有用的结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-20T06:03:17.510

`dialog`实际上带有一个库。它在手册页中提到。

如果您使用以下内容，它将向您显示有关如何使用该库的信息。它是一个静态库，它有一个`dialog.h`文件：

```
man 3 dialog 
```

Ubuntu 手册页包含一个示例：

```
#include <dialog.h>

int main(void)
{
    int status;
    init_dialog(stdin, stdout);
    status = dialog_yesno(
                 "Hello, in dialog-format",
                 "Hello World!",
                 0, 0);
    end_dialog();
    return status;
} 
```

要链接，您必须指定`dialog`和`ncurses`库，如下所示：

```
g++ ... -ldialog -lncurses my-test.cpp -o my-test ... 
```

这是小部件的列表：

```
extern int dialog_buildlist(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*list_height*/, int /*item_no*/, char ** /*items*/, int /*order_mode*/);
extern int dialog_calendar(const char * /*title*/, const char * /*subtitle*/, int /*height*/, int /*width*/, int /*day*/, int /*month*/, int /*year*/);
extern int dialog_checklist(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*list_height*/, int /*item_no*/, char ** /*items*/, int /*flag*/);
extern int dialog_dselect(const char * /*title*/, const char * /*path*/, int /*height*/, int /*width*/);
extern int dialog_editbox(const char * /*title*/, const char * /*file*/, int /*height*/, int /*width*/);
extern int dialog_form(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*form_height*/, int /*item_no*/, char ** /*items*/);
extern int dialog_fselect(const char * /*title*/, const char * /*path*/, int /*height*/, int /*width*/);
extern int dialog_gauge(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*percent*/);
extern int dialog_helpfile(const char * /*title*/, const char * /*file*/, int /*height*/, int /*width*/);
extern int dialog_inputbox(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, const char * /*init*/, const int /*password*/);
extern int dialog_menu(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*menu_height*/, int /*item_no*/, char ** /*items*/);
extern int dialog_mixedform(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*form_height*/, int /*item_no*/, char ** /*items*/);
extern int dialog_mixedgauge(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*percent*/, int /*item_no*/, char ** /*items*/);
extern int dialog_msgbox(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*pauseopt*/);
extern int dialog_pause(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*seconds*/);
extern int dialog_prgbox(const char * /*title*/, const char * /*cprompt*/, const char * /*command*/, int /*height*/, int /*width*/, int /*pauseopt*/);
extern int dialog_progressbox(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/);
extern int dialog_rangebox(const char * /*title*/, const char * /*file*/, int /*height*/, int /*width*/, int /*min_value*/, int /*max_value*/, int /*default_value*/);
extern int dialog_tailbox(const char * /*title*/, const char * /*file*/, int /*height*/, int /*width*/, int /*bg_task*/);
extern int dialog_textbox(const char * /*title*/, const char * /*file*/, int /*height*/, int /*width*/);
extern int dialog_timebox(const char * /*title*/, const char * /*subtitle*/, int /*height*/, int /*width*/, int /*hour*/, int /*minute*/, int /*second*/);
extern int dialog_treeview(const char * /*title*/, const char * /*subtitle*/, int /*height*/, int /*width*/, int /*list_height*/, int /*item_no*/, char ** /*items*/, int /*flag*/);
extern int dialog_yesno(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/); 
```

正如我们所见，其中一个小部件是`dialog_menu()`.

这里还有一些其他定义，包括 a `dlg_menu()`：

```
extern int dlg_checklist(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*list_height*/, int /*item_no*/, DIALOG_LISTITEM * /*items*/, const char * /*states*/, int /*flag*/, int * /*current_item*/);
extern int dlg_form(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*form_height*/, int /*item_no*/, DIALOG_FORMITEM * /*items*/, int * /*current_item*/);
extern int dlg_menu(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*menu_height*/, int /*item_no*/, DIALOG_LISTITEM * /*items*/, int * /*current_item*/, DIALOG_INPUTMENU /*rename_menu*/);
extern int dlg_progressbox(const char * /*title*/, const char * /*cprompt*/, int /*height*/, int /*width*/, int /*pauseopt*/, FILE * /* fp */); 
```

该手册页为您提供了有关所有这些功能的大量信息。所以值得一读。

这是该特定手册页的 FreeBSD 副本的链接：

[https://www.freebsd.org/cgi/man.cgi?query=dialog&sektion=3](https://www.freebsd.org/cgi/man.cgi?query=dialog&sektion=3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:14:14.350

[Yad](http://code.google.com/p/yad/)是另一个对话。

[谷歌这个](http://bit.ly/MaYjID)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T00:59:58.777

该*对话框*本身基于[curses 库](https://en.wikipedia.org/wiki/Ncurses)，它是一个免费分发的[GNU 项目](https://www.gnu.org/software/ncurses/)。

PS 我通常使用“dialog bash”作为谷歌搜索的关键词。

# perl - Perl：Math64::Int64 应该在“安全”隔间内工作吗？

> ID：11370234
> 
> 赞同：6
> 
> 时间：2012-07-06T22:01:20.670
> 
> 标签：perl, perl-module

（我的第一篇关于堆栈溢出的帖子，希望我使用的是正确的格式）

我需要评估在“安全”隔间中操作 64 位整数的代码。由于我提供了要评估的脚本和代码，因此我可以进行正常的评估，但我想尝试通过使用“安全”来使事情变得更加健壮，以防止意外错误。

我是否应该期望 Math::Int64 应该在“安全”隔间内正常工作？在 Perl 版本、整数位宽和操作系统的不同位数中，我得到了相互矛盾的结果。（见下文）。

在调试器中都以相同的方式失败。

我确定我在某个地方做了一些不正确的假设，但不知道在哪里。

谢谢你提供的所有帮助。

## 代码示例 (dummy.pl)

```
use strict;
use warnings;
use Exporter;
use Safe;
use Math::Int64 qw(int64 hex_to_int64);
#use Math::Int64 ':native_if_available';

my $safe = new Safe 'Root';
$safe->permit( qw(:browse) );
$safe->share( qw/int64 hex_to_int64 my_sprintf/ );

my $X = 0xFF & (hex_to_int64("0xAA12345678") >> 4);
print my_sprintf("X ",$X);

my $Z = evalme('$X = 0xFF & (hex_to_int64("0xAA12345678") >> 4)', $safe);
print my_sprintf("Z ",$Z);

print evalme('my_sprintf("Xe", $X)',$safe);

exit;

sub my_sprintf {
    my ($string, $value) = @_;
    return sprintf( "Value of %s: %X,\tType: %s\n",
                    $string, $value, ref($value) || "scalar"
           );
}

sub evalme {
    my($expr, $safe) = @_;
    my $retval = $safe->reval($expr);
    die "Error: $@\n" if ($@);
    return $retval;
} 
```

## 执行示例

```
% perl -w dummy.pl

=== "Win7 x64 SP1, Strawberry Perl 5.12.3" ===
Value of X : 67,        Type: Math::Int64
Can't locate package Exporter for @Math::Int64::ISA at (eval 5) line 1.
...
Can't locate package Exporter for @Math::Int64::ISA at (eval 5) line 1.
Value of Z : 67,        Type: Math::Int64
Value of Xe: 67,        Type: Math::Int64

=== "Win XP SP3 32-bit Strawberry Perl 5.16.0" ===
Value of X : 67,        Type: Math::Int64
Value of Z : 8E,        Type: scalar
Value of Xe: 8E,        Type: scalar

(No ':native-if-available')
=== "Ubuntu 10.04 x86_64 Server, Perl 5.10.1" ===
Value of X : 67,        Type: Math::Int64
Value of Z : 4D,        Type: scalar
Value of Xe: 4D,        Type: scalar

(':native-if-available')
=== "Ubuntu 10.04 x86_64 Server, Perl 5.10.1" ===
Value of X : 67,        Type: scalar
Value of Z : 71,        Type: scalar
Value of Xe: 71,        Type: scalar

% perl -wd dummy.pl

All versions return effectively:

Value of X : 67,        Type: Math::Int64
Error: Undefined subroutine &Math::Int64::hex_to_int64 called at c:/.../perl5db.

 at dummy.pl line 35
        main::evalme('$X = 0xFF & (hex_to_int64("0xAA12345678") >> 4)',
                     'Safe=HASH(xxxxxxxx)' 
```

## 版本

```
"Win7 x64 SP1, Strawberry Perl 5.12.3":
  Platform:
    osname=MSWin32, osvers=6.1, archname=MSWin32-x64-multi-thread
    uname='Win32 strawberryperl 5.12.3.0 #1 Sun May 15 09:43:50 2011 x64'
    use64bitint=define, use64bitall=undef, uselongdouble=undef
  Compiler:
    intsize=4, longsize=4, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype='long long', ivsize=8, nvtype='double', nvsize=8, Off_t='long long',
  Characteristics of this binary (from libperl):
     Compile-time options: ... USE_64_BIT_INT

"Win XP 32-bit Strawberry Perl 5.16.0":
  Platform:
    osname=MSWin32, osvers=4.0, archname=MSWin32-x86-multi-thread
    uname='Win32 strawberry-perl 5.16.0.1 #1 Mon May 21 22:07:30 2012 i386'
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
  Compiler:
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=undef, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='long long',
  Characteristics of this binary (from libperl):
     Compile-time options: ...

"Ubuntu 10.04 x86_64 Server, Perl 5.10.1":
  Linux 2.6.32-31-server,
  Platform:
    use64bitint=define, use64bitall=define, uselongdouble=undef
  Compiler:
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t',
  Characteristics of this binary (from libperl):
     Compile-time options: ... USE_64_BIT_ALL USE_64_BIT_INT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:15:59.043

看来问题是由于超载无法在安全隔间内工作引起的。

重载是绕过 Safe[的方法之一，因此它可能会被故意禁用。](http://vigilance.fr/vulnerability/Perl-bypassing-Safe-pm-via-overloading-9657)如果你真的想知道，你可以在 perl5-porters 邮件列表上询问。

我不认为这可以从 Math::Int64 解决（顺便说一句，我是它的作者）。

另一方面，您可以尝试使用本机 64 位支持来编译 Perl。

# ajax - 通过 AJAX 将 Codeigniter CSRF 字符串传递给服务器

> ID：11370235
> 
> 赞同：0
> 
> 时间：2012-07-06T22:01:27.230
> 
> 标签：ajax, security, codeigniter, csrf

我在我的网站上启用了 Codeigniter 的 CSRF 保护，该网站使用 AJAX 提交用户表单并处理一些其他需要通过 AJAX 提交数据的用户交互。结果，我遇到了“不允许操作”服务器端错误。我很快发现只有我的 javascript 通过 AJAX 收集和提交的数据被传递到服务器，因此 CSRF 代码没有被发送。

生成的令牌标签如下所示：

```
<input type="hidden" name="csrf_test_name" value="dsflkabsdf888ads888XXXXXX" /> 
```

因此，在我看来，将令牌提交到服务器进行验证的最简单方法是在 csrf_test_name 上使用 jQuery 选择器来获取值，然后将其添加到我的发布数据中以供服务器验证。根据下面的代码：

```
//get CSRF token
var csrf = $('[name="csrf_test_name"]').val();

//build the form data array
var form_data = {
    csrf_test_name: csrf,
     ... ... ...
     ... ... ...
}

//send the form data to the server so it can be stored
$.ajax({
    type: "POST",
    data: form_data,
    url: ...,
    dataType: "html",
    success: function(msg){
         ... ... ...
    }//end success
});//end ajax 
```

对于将数据发送到服务器的每个 ajax 提交，我都遵循此过程，并且服务器端错误已修复，并且一切正常。

为了测试这一点，我在不正确的 CSRF 令牌中进行了硬编码，服务器检测到不一致并返回错误代码 500，因此表面上这是可行的。

我的问题是，这是一种安全的方法吗？是否可以遵循预期的最佳实践？我已经对此进行了一些谷歌搜索，似乎所有其他方法都更复杂，我想知道我的方式是否会创建一个我看不到/锻炼的攻击向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T18:47:20.410

我喜欢将它添加到 Ajax 设置中。设置一次并让它自动将其添加到您所有请求的发布数据中。

```
$.ajaxSetup({
    data: {
        csrf_test_name: $("input[name='csrf_test_name']").val()
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:38:39.880

一个更简单的方法是将该 csrf 传递给`$.ajaxSetup()`它之后包含在任何`$.ajax()`请求中的方式。

```
var csrf = $('input[name="csrf_test_name"]').val();
var data = {};
data[CSRF] = csrf;

$.ajaxSetup({ 'data': data }); 
```

然后不需要`data: { csrf_test_name: 'xxx', ... }`在设置后包含在请求中。

# python - 如何在 Python 2.7 中访问 ODB 文件

> ID：11370237
> 
> 赞同：6
> 
> 时间：2012-07-06T22:01:37.440
> 
> 标签：python, sqlite, python-2.7, hsqldb, libreoffice-base

我想在 Python 中访问一个 ODB 文件（使用 LibreOffice Base 制作）并提取一个表以供进一步使用。ODB 包含几个表、一个关系设计和几个表格。

是否可以在不使用任何 SQL 的情况下实现这一目标？

**编辑：**由于我自己解析这种格式似乎过于复杂，我会考虑使用适当的 HSQLDB 引擎。

什么 python 模块通过 HSQL 访问（就像 SQLite 的 sqlite3 一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-29T11:44:06.907

您可以考虑OpenOffice 附带的[Python Uno API。](http://www.openoffice.org/udk/python/python-bridge.html)有几个[Python 示例](http://www.openoffice.org/udk/python/python-bridge.html#examples)可以与 API 交互，包括一个[示例数据库](http://www.openoffice.org/udk/python/samples/biblioaccess.py)

还有这个[SO question](https://stackoverflow.com/questions/7784438/how-do-you-install-or-activate-pyuno-in-libreoffice)解释了如何将 uno 与 LibreOffice 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:59:14.583

ODB 文件的默认形式包含一个 HSQLDB 数据库。您可以提取此数据库，然后使用 HSQLDB 软件和任何可以连接到 HSQLDB 的客户端访问它。

关于如何提取数据库的说明可以在这里找到：http: [//programmaremobile.blogspot.co.uk/2009/01/java-and-openoffice-base-db-through.html](http://programmaremobile.blogspot.co.uk/2009/01/java-and-openoffice-base-db-through.html)

# github - 创建官方github镜像

> ID：11370239
> 
> 赞同：117
> 
> 时间：2012-07-06T22:02:01.533
> 
> 标签：github, mirroring

如何为外部 git 存储库创建 github 镜像，使其显示为“真实镜像”，例如[https://github.com/mirrors](https://github.com/mirrors)？

到目前为止，我使用以下方法设置了一个镜像：

```
cd /path/to/bare/repository
git remote add --mirror github git@github.com:user/repo.git 
```

并配置 post receive 钩子来做一个`git push --quiet github`. 但是，这种方式，github 无法识别镜像。

任何想法如何以 github 方式进行操作，例如“Mirrorred from”出现在存储库名称下方？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-07-10T19:32:15.247

根据与 GitHub 支持团队的沟通，我发现 GitHub 目前没有为用户提供以这种方式镜像存储库的直接机制。

但是，可以要求 GitHub 为属于组织的存储库安装此服务。然后，GitHub 将现有存储库配置为这样的镜像，并以它们拥有的总体镜像数量的函数的间隔从其中提取。

**编辑**：正如 Stuart 指出的，GitHub 不再接受镜像任意存储库的请求。剩下的唯一选择是我在问题中发布的解决方案，即创建一个接收后挂钩以自动推送到您的 GitHub 存储库。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-16T12:38:47.483

从[https://github.com/mirrors](https://github.com/mirrors)的当前内容来看，GitHub 似乎不再做“官方镜像”，因为今天大多数希望将其代码镜像到 GitHub 上的项目只是为其创建一个组织，例如[Git 本身](https://github.com/git/git).

还有一个功能请求：[https ://github.com/isaacs/github/issues/415](https://github.com/isaacs/github/issues/415)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-29T15:48:57.250

根据[Importing a Git](https://help.github.com/articles/importing-a-git-repository-using-the-command-line/)：

出于演示目的，我们将使用：

> *   名为 extuser 的外部帐户
> *   一个名为 ghuser 的 GitHub 个人用户帐户
> *   一个名为 repo.git 的 GitHub 存储库

命令行：

```
# Makes a bare clone of the external repository in a local directory  
$ git clone --bare https://githost.org/extuser/repo.git

# Pushes the mirror to the new GitHub repository
$ cd *repo.git*
$ git push --mirror https://github.com/ghuser/repo.git

# Remove the temporary local repository.
$ cd ..
$ rm -rf repo.git 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-19T03:03:26.690

我使用了一个名为[github-backup](https://github-backup.branchable.com/)的工具并取得了一定的成功，即使不是镜像，至少也可以对 Github 用户或组织进行完整备份（包括问题和其他元数据）。引用[自述文件](https://github-backup.branchable.com/README/)：

> 每次运行 github-backup 时，它都会在 GitHub 上找到任何新的分叉。它将使用诸如`github_torvalds_subsurface`. 它将从每个分叉中获取。
> 
> 它从每个分支下载元数据。这存储在一个名为“github”的分支中。每个 fork 都有一个目录，比如`torvalds_subsurface`. 在目录里面会有一些文件，比如`torvalds_subsurface/watchers`. 可能还有更多目录，例如评论：`torvalds_subsurface/comments/1`.
> 
> 您可以关注 github 分支的提交，以查看 GitHub 上随时间变化的信息。
> 
> github 分支中文件的格式目前是 Haskell 序列化数据类型。这是纯文本，如果你眯着眼睛也可以阅读。

限制包括：

*   没有私有存储库支持
*   没有像明星、追随者等“社交”的东西
*   不支持对提交行的注释（还没有？）
*   问题标签

# single-sign-on - Shib 守护进程是做什么用的？

> ID：11370241
> 
> 赞同：1
> 
> 时间：2012-07-06T22:02:03.453
> 
> 标签：single-sign-on, saml, shibboleth, service-provider

我是 SAML 世界的新手。我刚刚安装了 Shibboleth SP 和 IdP，并让它们相互配合。我现在正试图了解一切在幕后是如何运作的。

问题是：当我们在 Windows 上安装 SP for Apache 时，我们可以选择是否安装 Shib Daemon。谁能告诉我那是干什么用的？使SP工作是可选的吗？

我试过谷歌搜索旧帖子，但找不到这么多细节。我的理解是 Shib SP 是一个在 Apache 上运行的模块（用于我的安装），它负责：

1.  与 IdP 建立信任连接

2.  处理来自浏览器的请求，并重定向到 IdP

3.  处理来自 IdP 的响应并重定向到用户的真实应用程序页面。

在我看来，Shib Daemon 并没有参与这些作品。我错过了什么或者我误解了什么吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:00:42.300

我可以用 ShibD 和 Apache 解释它在 Linux 上的工作方式，我认为这将类似于它在 Windows 上的工作方式。

ShibD 流程本身就是处理所有 SAML 2.0 断言的地方。断言由 Apache 接收，因此有一个用于 Apache 的 mod_shibd 模块与 ShibD 进程对话。这允许 ShibD 守护进程不与 Apache 驻留在同一进程空间中。因此，您确实需要安装 Shib 守护程序，还需要安装 Apache 和 mod_shibd 模块，以便 Apache 可以与 Shib 守护程序通信以提供 SAML Web SSO。

# c++ - C ++模板参数推导不起作用

> ID：11370242
> 
> 赞同：3
> 
> 时间：2012-07-06T22:02:08.053
> 
> 标签：c++, templates, template-argument-deduction, boost-function, boost-signals2

我需要覆盖 和 之间的`boost::signals2::signal`连接`boost::function`。为此，我创建了以下模板函数：

```
template<typename T>
void bind(boost::signals2::signal<T> &signal, boost::function<T> function) {
  // override code ...
} 
```

我想`bind`尽可能简单地使用它。从我在类似问题的帖子中读到的内容，模板参数应该从函数参数中推导出来。但在我的情况下，当没有明确的参数时它不起作用。

```
boost::signals2::signal<void ()> my_signal;

bind<void ()>(my_signal, boost::bind(&A::func, this)); // this works
bind(my_signal, boost::bind(&A::func, this));          // error: no matching function for call 
```

我错过了什么吗？
是否有任何解决方法可以避免显式模板参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:20:08.053

第二个参数类型不是`std::function<T>`，而是某种绑定类型，因此编译器无法推导出`T`第二个函数参数的 。`T`您需要告诉编译器“您可以在第二个函数参数中找不到类型”。这可以通过使第二个参数成为非推导上下文来完成。

```
template<typename T>
void bind(boost::signals2::signal<T> &signal, 
          typename std::common_type<boost::function<T>>::type function) {
  // override code ...
} 
```

# sql - 将没有主键的视图与实体一起使用

> ID：11370245
> 
> 赞同：27
> 
> 时间：2012-07-06T22:02:40.587
> 
> 标签：sql, oracle, entity

我刚开始将应用程序从原始 ADO.NET 和嵌入式 SQL 转换为实体的项目。我遇到了应用程序使用的视图之一的问题。该视图没有主键，也没有唯一标识行的列（或列组合）。这是创建视图的选择：

```
SELECT
    filingmonth,
    CEIL(filingmonth / 3),
    licnum,
    filingyear,
    DECODE(GROUPING(insurername), '1', '- All Insured -', insurername),
    insurername,
    policylinecode,
    linedescription,
    SUM(NVL(grosspremium, 0)),
    SUM(DECODE(taxexempt, 1, grosspremium, 0)),
    TRUNC(
      CASE
        WHEN
          (
            b.rsn IS NOT NULL
            OR A.zeroreport = 1
          )
          AND b.datereceived IS NULL
            THEN A.datereceived
        ELSE b.datereceived
      END),
    SUM(aip.iscompanyadmitted(b.naiccocode, b.naicalienid)),
    A.insuredid
  FROM
    aip.slbtransinsured A
  LEFT OUTER JOIN aip.slbtransinsurer b
  ON
    A.insuredid = b.insuredid
  LEFT OUTER JOIN aip.slblinecodes C
  ON
    b.policylinecode = C.linecode
  WHERE
    A.submitted = 1
  AND A.entryincomplete = 0
  GROUP BY
    licnum,
    filingmonth,
    filingyear,
    TRUNC(
      CASE
        WHEN
          (
            b.rsn IS NOT NULL
            OR A.zeroreport = 1
          )
          AND b.datereceived IS NULL
            THEN A.datereceived
        ELSE b.datereceived
      END),
    ROLLUP(insurername, aip.iscompanyadmitted(b.naiccocode, b.naicalienid),
    policylinecode, linedescription), A.insuredid; 
```

下面是一些示例数据，显示有一些完全重复的行（第 3 行和第 4 行）：

```
FILINGMONTH CEIL(FILINGMONTH/3) LICNUM FILINGYEAR DECODE(GROUPING(INSURERNAME),'1','-ALLINSURED-',INSURERNAME)                                         INSURERNAME                                                                                          POLICYLINECODE LINEDESCRIPTION                                                                                                                                                                                          SUM(NVL(GROSSPREMIUM,0)) SUM(DECODE(TAXEXEMPT,1,GROSSPREMIUM,0)) TRUNC(CASEWHEN(B.RSNISNOTNULLORA.ZEROREPORT=1)ANDB.DATERECEIVEDISNULLTHENA.DATERECEIVEDELSEB.DATERECEIVEDEND) SUM(AIP.ISCOMPANYADMITTED(B.NAICCOCODE,B.NAICALIENID)) INSUREDID

      6                   2   8150       2007 SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            17             OTHER LIABILITY                                                                                                                                                                                                            721.25                                       0 18-JUL-07                                                                                                                                                          0        81 
      6                   2   8150       2007 SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            17                                                                                                                                                                                                                                        721.25                                       0 18-JUL-07                                                                                                                                                          0        81 
      6                   2   8150       2007 SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                                                                                                                                                                                                                                                                      721.25                                       0 18-JUL-07                                                                                                                                                          0        81 
      6                   2   8150       2007 SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                            SAVERS PROPERTY AND CASUALTY INSURANCE CO                                                                                                                                                                                                                                                                                                      721.25                                       0 18-JUL-07                                                                                                                                                          0        81 
```

insuranceid 是 aip.slbtransinsurured 表的 pk，rsn 是 aip.slbtransinsurer 和 aip.slblinecodes 的 pk。

是否可以在没有唯一标识符的情况下向实体模型添加视图？或者有没有一种简单的方法可以向视图添加唯一的行标识符？视图只被读取，从不被写入。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-07T02:31:00.797

> 是否可以在没有唯一标识符的情况下向实体模型添加视图？

如果没有主键，没有。这将导致这种[错误](http://www.ienablemuch.com/2011/06/mapping-class-to-database-view-with.html)：

> 在模型生成期间检测到一个或多个验证错误：
> 
> System.Data.Edm.EdmEntityType: : EntityType 'SalesOnEachCountry' 没有定义键。定义此 EntityType 的键。System.Data.Edm.EdmEntitySet：EntityType：EntitySet SalesOnEachCountryList 基于未定义键的类型 SalesOnEachCountry。

如果没有唯一标识符，是的，尽管它有一个不受欢迎的输出。具有相同标识符的记录将引用相同的对象，这称为[身份映射模式](http://en.wikipedia.org/wiki/Identity_map_pattern)

一个例子，即使你的视图产生这两行：

```
Country     Year TotalSales
Philippines 2010 20.000000
Philippines 2011 40.000000 
```

如果您只在 Country 字段上映射主键，例如

```
public class SalesOnEachCountry
{        
    [Key]
    public int CountryId { get; set; }
    public string CountryName { get; set; }        
    public int OrYear { get; set; }
    public long SalesCount { get; set; }
    public decimal TotalSales { get; set; }
} 
```

，即使您的视图在您的 Oracle 查询编辑器上生成上述两行，实体框架也会生成此错误输出：

```
Country     Year TotalSales
Philippines 2010 20.000000
Philippines 2010 20.000000 
```

实体框架将认为第二行与第一行是相同的对象。

为了保证唯一性，您必须确定使每一行唯一的列。在上面的示例中，必须包含年份，因此主键是唯一的。IE

```
public class SalesOnEachCountry
{        
    [Key, Column(Order=0)] public int CountryId { get; set; }
    public string CountryName { get; set; }
    [Key, Column(Order=1)] public int OrYear { get; set; }

    public long SalesCount { get; set; }      
    public decimal TotalSales { get; set; }
} 
```

使您的主键类似于上面的属性，Entity Framework 可以正确地将您的每个视图的行映射到它们自己的对象。因此，Entity Framework 现在可以显示与您的视图完全相同的行。

```
Country     Year TotalSales
Philippines 2010 20.000000
Philippines 2011 40.000000 
```

完整的细节在这里：[http ://www.ienablemuch.com/2011/06/mapping-class-to-database-view-with.html](http://www.ienablemuch.com/2011/06/mapping-class-to-database-view-with.html)

* * *

然后，对于没有任何列来使行唯一的视图，保证 Entity Framework 可以将视图的每个行映射到它们自己的对象的最简单方法是为视图的*主键*创建一个单独的列，这是一个很好的候选就是在每一行上创建一个行号列。例如

```
create view RowNumberedView as

select 
    row_number() over(order by <columns of your view sorting>) as RN
    , *
from your_existing_view 
```

`[Key]`然后在您的 RN 属性上分配属性`class RowNumberedView`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-02-19T22:33:43.137

扩展 Michael Buen 的答案：我发现使用 ISNULL() 将行号添加到视图将允许实体框架将视图拉入并自动创建必要的 EntitySet 数据。

```
create view RowNumberedView as

select 
    ISNULL(ROW_NUMBER() OVER (ORDER BY <column>), 0) AS RN
    , *
from your_existing_view 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-27T15:20:58.277

最近在工作中，我遇到了同样的问题。根据我的研究，我找不到任何关于如何在没有 PK 的情况下将视图附加到 EF6 CodeFirst 的答案。大多数似乎都涉及迁移并且相当混乱。我相信 DB first 对工作有更好的支持`SQL VIEWS`。

我确实尝试引入一个`window function`(RowNumber)，其想法是使用行标识符作为 PK 来保持 EF6 的快乐。但这使我的查询总体上更加昂贵，所以我不得不放弃这个想法。

最后，我必须仔细分析我的数据集，看看我是否可以引入一个复合键——它涵盖了我的业务应用程序需要确保能够正常工作的所有场景。记住也要使用`IsNull(ColumnName,0)`以确保您可以满足`.IsRequired()`CodeFirst 中的流利方法。

IE

```
HasKey(x => new { x.KfiId, x.ApplicationNumber, x.CustomerId }); 
```

我希望这对某人有所帮助 - 我的答案是分析视图非规范化的数据集并寻找复合键。

你可以试试[Marc Cals](https://stackoverflow.com/questions/30987474/entity-framework-code-first-querying-a-view-with-no-primary-key)提出的另一个很酷的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-11T16:12:04.693

# 如果您在 ASP.NET 中使用带有 MVC 的实体框架

如前所述，使用具有自动增量或 ROW_NUMBER 的列创建视图。假设您有该列，它的名称是`rowNumber`.

比转到 MVC 应用程序目录中的上下文文件 ( `yourDatabaseNameContext`) 文件`Models`，找到视图的定义，而不是

```
modelBuilder.Entity<yourView>(entity =>
    {
        entity.HasNoKey(); 
```

将其更改为：

```
 modelBuilder.Entity<yourView>(entity =>
            {
                entity.HasKey(e => e.rowNumber); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T23:00:56.380

> 是否可以在没有唯一标识符的情况下向实体模型添加视图？

可能有一个视图，其中没有创建主键的单个列或一组列；因此，你最终会得到虚假的关系。数据仓库表有时遵循这种形式。简而言之，出于性能原因或报告原因，有时不遵循规范化。

**现在到你的第二点：**

> 或者有没有一种简单的方法可以向视图添加唯一的行标识符？

我建议你做的是从 slbtransinsured 中选择所有列，看看你是否能找到唯一标识每条记录的列。在我看来，数据在 slblinecodes 中应该有一个您需要选择的代码类型，有点像查找。

对于踢球，尝试运行它并告诉我你得到了什么：

```
SELECT filingmonth,
       CEIL (filingmonth / 3),
       licnum,
       filingyear,
       DECODE (GROUPING (insurername), '1', '- All Insured -', insurername),
       insurername,
       policylinecode,
       linedescription,
       SUM (NVL (grosspremium, 0)),
       SUM (DECODE (taxexempt, 1, grosspremium, 0)),
       TRUNC (
           CASE
               WHEN (b.rsn IS NOT NULL OR a.zeroreport = 1)
                    AND b.datereceived IS NULL
               THEN
                   a.datereceived
               ELSE
                   b.datereceived
           END),
       SUM (aip.iscompanyadmitted (b.naiccocode, b.naicalienid)),
       a.insuredid
  FROM aip.slbtransinsured a
       LEFT OUTER JOIN aip.slbtransinsurer b
           ON a.insuredid = b.insuredid
       LEFT OUTER JOIN aip.slblinecodes c
           ON b.policylinecode = c.linecode
 WHERE a.submitted = 1 AND a.entryincomplete = 0
GROUP BY filingmonth,
         licnum,
         filingyear,
         DECODE (GROUPING (insurername), '1', '- All Insured -', insurername),
         insurername,
         policylinecode,
         linedescription,
         TRUNC (
             CASE
                 WHEN (b.rsn IS NOT NULL OR a.zeroreport = 1)
                      AND b.datereceived IS NULL
                 THEN
                     a.datereceived
                 ELSE
                     b.datereceived
             END),
         a.insuredid; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-02T23:40:24.780

在使用视图时考虑使用 AsNoTracking()。这将禁用 EF 跟踪的任何关键字段。然后可以手动将任何非空字段定义为 EF 键（即使它重复）。

建议*不要*创建额外的行计数器字段，因为大多数行计数器最终要求引擎扫描视图的整个域以生成正确的计数器值，即使使用谓词（where 子句）进行查询也是如此。

请看[链接](https://stackoverflow.com/a/29424217/538763)。

# language-agnostic - 自动同义词检测方法

> ID：11370247
> 
> 赞同：7
> 
> 时间：2012-07-06T22:03:03.087
> 
> 标签：language-agnostic, machine-learning, nlp, artificial-intelligence, neural-network

我目前正在研究一种基于神经网络的短文档分类方法，并且由于我使用的语料库通常约为 10 个单词，因此标准的统计文档分类方法用途有限。由于这个事实，我试图为训练中提供的匹配实现某种形式的自动同义词检测。我的问题更具体地说是关于解决如下情况：

假设我有“涉及食物”的分类，“涉及领域”之一和数据集如下：

```
"Eating Apples"(Food);"Eating Marbles"(Spheres); "Eating Oranges"(Food, Spheres);
"Throwing Baseballs(Spheres)";"Throwing Apples(Food)";"Throwing Balls(Spheres)";
"Spinning Apples"(Food);"Spinning Baseballs"; 
```

我正在寻找一种渐进式的方法来实现以下链接：

```
Eating --> Food
Apples --> Food
Marbles --> Spheres
Oranges --> Food, Spheres
Throwing --> Spheres
Baseballs --> Spheres
Balls --> Spheres
Spinning --> Neutral
Involving --> Neutral 
```

我确实意识到，在这种特定情况下，这些可能有点可疑，但它说明了我遇到的问题。我的一般想法是，如果我增加一个单词出现在一个类别中的单词对面，但在那种情况下，我最终会偶然地将所有内容与“涉及”这个词联系起来，然后我认为我会简单地减少一个出现在某个类别中的单词。与多个同义词或非同义词结合，但我会失去“吃”和“食物”之间的联系。有没有人知道我将如何组合一个算法，让我朝着上面指示的方向移动？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-14T05:42:07.247

我向我解释了一种不受监督的引导方法来执行此操作。

有不同的方法可以应用这种方法和变体，但这里有一个简化的版本。

## 概念：

首先假设如果两个词是同义词，那么在您的语料库中它们将出现在相似的设置中。（吃葡萄、吃三明治等）

（在这个变体中，我将使用共现作为设置）。

## 自举算法：

我们有两个列表，

*   一个列表将包含与食物同时出现的单词
*   一个列表将包含作为食物的单词

### 监督部分

首先播种其中一个列表，例如，我可能会在食品列表上写下 Apple 一词。

现在让计算机接管。

### 非监督零件

它将首先查找语料库中出现在 Apple 之前的所有单词，并按照出现次数最多的顺序对它们进行排序。

取前两个（或任何你想要的）并将它们添加到与食物一起出现的列表中。例如，也许“吃”和“美味”是前两个。

现在使用该列表通过排列出现在列表中每个单词右侧的单词来查找接下来的两个最热门的食物单词。

继续此过程扩展每个列表，直到您对结果感到满意为止。

### 一旦完成

（您可能需要随时从列表中手动删除一些明显错误的内容。）

### 变体

如果您考虑到关键字的语法设置，此过程可以非常有效。

```
Subj ate NounPhrase
NounPhrase are/is Moldy

The workers harvested the Apples. 
   subj       verb     Apples 

That might imply harvested is an important verb for distinguishing foods.

Then look for other occurrences of subj harvested nounPhrase 
```

您可以扩展此过程以将单词移动到类别中，而不是在每个步骤中移动一个类别。

### 我的来源

几年前，犹他大学开发的一个系统使用了这种方法，该系统仅通过查看新闻文章就成功地编制了一份体面的武器词、受害者词和地点词列表。

一种有趣的方法，并取得了良好的效果。

不是神经网络方法，而是一种有趣的方法。

### 编辑：

犹他大学的系统被称为 AutoSlog-TS，在演示文稿的最后可以看到一张关于它的简短[幻灯片](http://www.eng.utah.edu/~cs5340/slides/event_ie.4.pdf)。还有一个关于它的论文的链接在[这里](http://www.cs.utah.edu/research/techreports/2004/pdf/UUCS-04-015.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:09:17.463

此处的代码 (http://ronan.collobert.com/senna/) 实现了一个神经网络来执行各种 NLP 任务。该页面还链接到一篇论文，该论文描述了迄今为止将卷积神经网络应用于 NLP 任务的最成功的方法之一。

可以修改他们的代码以使用他们提供的训练过的网络对句子进行分类，但这可能需要比您希望的更多的工作，并且正确训练神经网络可能会很棘手。

我使用类似的技术对生物序列进行分类取得了很大的成功，但是，与英语句子相比，我的序列每个位置只有 20 个可能的符号，而不是 50-100k。

他们的网络中可能对您有用的一项有趣功能是他们的词嵌入。词嵌入将单个词（每个可以被认为是长度为 100k 的指示向量）映射到长度为 50 的实值向量。嵌入向量之间的欧几里德距离应该反映词之间的语义距离，因此这可以帮助您检测同义词。

对于更简单的方法，WordNet (http://wordnet.princeton.edu/) 提供了同义词列表，但我自己从未使用过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:10:22.543

您可以尝试无监督的 LDA。有一个受监督的 LDA 版本，但我不记得名字了！斯坦福解析器将拥有您可以使用的算法。我知道这不是您正在寻找的 NN 方法。但是，如果您只是想将信息组合在一起，LDA 似乎是合适的，特别是如果您正在寻找“主题”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T08:03:44.247

我不确定我是否误解了你的问题。您是否要求系统能够仅根据您的输入数据进行推理，还是可以参考外部字典？

如果可以接受，我建议你看看[http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)这是一个英语单词关系数据库。（它也存在于其他一些语言中。）这些关系包括同义词、反义词、上位词（这是你真正想要的，而不是同义词）、下位词等。

上位词/下位词关系将更通用的术语与更具体的术语联系起来。“香蕉”和“橙子”这两个词是“水果”的下义词；它是两者的同义词。[http://en.wikipedia.org/wiki/Hyponymy](http://en.wikipedia.org/wiki/Hyponymy)当然，“橙色”是有歧义的，也是“颜色”的下义词。

您要求一种方法，但我只能为您指出数据。即使这被证明是有用的，您显然也需要大量的工作才能将它用于您的特定应用程序。一方面，你怎么知道你何时达到了合适的抽象级别？除非您的输入被高度规范化，否则您将混合使用通用术语和特定术语。你停留在“柑橘”、“水果”、“植物”、“动画”、“混凝土”还是“名词”？（抱歉，只是组成了这个特定的层次结构。）不过，希望这会有所帮助。

# maven - Github 身份验证：当 repo 为私有时如何使用 Github 作为 Maven repo

> ID：11370248
> 
> 赞同：11
> 
> 时间：2012-07-06T22:03:06.540
> 
> 标签：maven, github

我正在尝试将我们的一些私有工件存储在 Github 上，并希望访问它们，就好像它们是 Maven 存储库的一部分一样。有很多页面解释了如何在 Github 上创建公共 Maven 存储库：您只需将工件放在项目中正确的目录结构中，然后使用“原始”URL 访问它们：

```
<repositories>
  <repository>
    <id>myrepo.myname.github.com</id>
    <url>https://github.com/myname/myproject/raw/master/repositories/releases/</url>
  </repository>
</repositories> 
```

到目前为止，一切都很好。现在的问题是，如果它是私有的，我不知道如何访问它。我在 settings.xml 中添加了用户名和密码，但它不起作用：

```
<servers>
    <server>
      <id>myrepo.myname.github.com</id>
      <username>myusername</username>
      <password>mypassword</password>
    </server>
 </servers> 
```

有什么诀窍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:08:35.710

现在这个问题没有实际意义。Github 已经取消了下载。他们不再托管二进制文件。可能正是因为我提出的那种虐待......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T21:42:53.860

您可以使用以下 URL 从 Maven pom.xml 访问私有存储库： [https ://api.github.com/users/username/repos?login=username&token=oauthtoken&repositoryname=reponame](https://api.github.com/users/username/repos?login=username&token=oauthtoken&repositoryname=reponame)

# html - CSS 规则在不同页面上的应用不同

> ID：11370249
> 
> 赞同：1
> 
> 时间：2012-07-06T22:03:07.337
> 
> 标签：html, css

我很难让 CSS 规则为我工作。我相信这与规则的应用顺序有关，但我希望你们中毫无疑问比我自己更有经验的 HTML 和 CSS 可以帮助我。

基本上我的目标是在当前聚焦的文本输入（文本框和文本区域以及下拉菜单）周围放置一个彩色边框。CSS相当短（我认为......）但给我带来麻烦的规则在最底部（.userinput：focus）

```
body
{
    font-family: Arial;
}
.header
{
    color: #004c85;
    font-family: Arial;
    font-size: 14px;
    font-weight: bold;
    vertical-align: middle;
    padding-bottom: 5px;
}
.titleCell
{
    background-color: #004c85;
    font-family: Arial; 
    color: White;
    font-size: 12px;
    font-weight: bold;
    text-align: left;
    padding: 2px 2px 2px 2px;
}
.subtitleCell
{
    background-color: #aaaaaa;
    font-family: Arial;
    color: #092548;
    font-size: 12px;
    font-weight: bold;
    text-align: left;
    padding: 2px 2px 2px 2px;
}
.normalCell
{
    background-color: #f1f1f1;
    font-family: Arial;
    color: #092548;
    font-size: 9pt;
    font-weight: bold;
    text-align: left;
    padding: 1px 2px 1px 2px;
}
.errorText
{
    font-family: Arial;
    color: #d01d00;
    font-size: 9pt;
    font-weight: bold;
    text-align: left;
}
.button
{
    font-size: 12px;
    color: #f1f1f1;
    background-color: #004c85;
}
.userinput:focus
{
    border: 2px ridge #00a2ff !important;
} 
```

我用一个表创建了一个简单的页面，它运行良好（这里的目标浏览器是 IE）。当我创建一个包含多个表和 div 的大页面时，此规则似乎不再适用于 IE。阅读后，我将 !important 添加到规则中，但这并没有帮助我。我下载了 Firebug，但同一页面在 Firefox 中看起来不错（出现边框）。

在这一点上的任何提示将不胜感激。

**编辑：**不幸的是，我无法发布整个内容的链接。下面是我成功的测试页面。我可能可以发布指向更大 HTML 的链接，但必须下载并在本地运行。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>CSS Demo Page</title>

    <link href="base.css" rel="Stylesheet" type="text/css" />
</head>
<body>
<form name="FormName" method="post" style="text-align: center">
        <table cellpadding="0" cellspacing="0" width="900" border="0" style="text-align:left">
            <tr>
                <td class="header">
                    Header
                </td>
            </tr>
            <tr>
                <td class="errorText">
                    Error Text
                </td>
            </tr>
            <tr>
                <td class="titleCell">
                    Title Cell
                </td>
            </tr>
            <tr>
                <td class="subtitleCell">
                    Subtitle Cell
                </td>
            </tr>
            <tr>
                <td class="normalCell">
                    Normal Cell
                </td>
            </tr>
            <tr>
                <td class="normalCell">
                    <input type="text" class="userinput" size="25" />
                </td>
            </tr>
            <tr>
                <td class="normalCell">
                    <input type="checkbox" value="ON" />&nbsp;
                        Checkbox
                </td>
            </tr>
            <tr>
                <td>
                    <input type="button" class="button" value="Button" />
                </td>
            </tr>

        </table>
    </form> 
</body>
</html> 
```

那是工作正常的测试页面。注意我在 web 服务器上有 css 文件，但它只能在内部访问。我想过做 jquery，但我*认为*这会更容易。显然不是。

再次感谢。如果需要，我仍然可以稍后发布大页面的 HTML。

**再次编辑：**我现在正在查看标记。在 W3C 网站上似乎还可以，但也许我遗漏了一些东西。如果有人感兴趣，这里是 txt 文件中较大页面 HTML 的链接。[http://cloudstor.pogoplug.com/share/xGQzP43X9FsEq5Z1XqafYQ/LNtISrGuLxJsaxhZ3iPZUw/form.txt](http://cloudstor.pogoplug.com/share/xGQzP43X9FsEq5Z1XqafYQ/LNtISrGuLxJsaxhZ3iPZUw/form.txt)

我可能还应该提到我之前发布的 CSS 是唯一一个正在使用的 CSS。此外，虽然它并没有太大帮助，但 CSS 在 Chrome 和 Firefox 中都可以使用。IE 是唯一的坚持者（那里有很大的惊喜......）

再次感谢所有的链接和评论。我决心弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:18:17.553

我可以考虑两件可以破坏选择器的事情：

*   另一个样式表/样式标签具有相同的选择器+属性并且也包含`!important`，因此 - 你看不到你自己的 css。

*   您的 HTML 页面上的标记无效。花点时间使用[W3C 验证服务](http://validator.w3.org/)对其进行验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:14:45.883

如果没有看到完整的标记，我最好的猜测是页面上的标记无效（即未关闭的标签、无效字符），这可能导致样式和页面结构损坏，有时在浏览器之间会有所不同，或者您的类声明被覆盖样式表中的其他地方。焦点选择器有效，不需要 jquery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:19:25.867

就像 Ryet 和 Nadav 所说的那样，您可能有无效的 html 标记。但是无效的 html 标记并不是唯一导致问题的东西，无效的 css 也是如此。无效的 css 可能涉及缺少括号、缺少分号、滥用 id 和类等等。[您可以使用此站点http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)找到无效的 css 标记

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T15:37:01.120

弄清楚了。而且我觉得很傻。评论打破了我的页面。

我更像是一个 C、C++、C# 类型的人。自从我从头开始做很多直接的 HTML 以来已经有一段时间了。我试图创建一个模板，我们可以使用它来构建我们所有的 HTML 表单。在页面的最顶部，我有一个块注释来解释模板的用途（在代码文件的顶部放置块注释来解释它的作用并不少见，对吧？）

长话短说，我取出了我的 HTML 的点点滴滴，直到只剩下一个表格、一行、一列和文本框。当这仍然不起作用时，我考虑删除评论。评论是页面上的第一件事，在

```
<!DOCTYPE ... 
```

谢谢你的帮助。如果有人在 HTML 中使用评论时有任何提示或最佳实践链接，我将非常感激。

再次感谢您的所有建议。

# c# - 返回带有错误状态码 MVC 的 JSON

> ID：11370251
> 
> 赞同：58
> 
> 时间：2012-07-06T22:03:21.070
> 
> 标签：c#, asp.net-mvc, json

[我试图按照此链接](https://stackoverflow.com/questions/6010368/how-does-json-determine-a-success-from-an-error)中的建议将错误返回到对控制器的调用， 以便客户端可以采取适当的措施。控制器由 javascript 通过 jquery AJAX 调用。只有当我没有将状态设置为错误时，我才会返回 Json 对象。这是示例代码

```
if (response.errors.Length > 0)
   Response.StatusCode = (int)HttpStatusCode.BadRequest;
return Json(response); 
```

如果我不设置状态码，我会得到 Json。如果我设置状态码，我会返回状态码，但不会返回 Json 错误对象。

**更新** 我想将一个错误对象作为 JSON 发送，以便可以处理 ajax 的错误回调。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-12T00:36:57.583

我在[这里找到了解决方案](http://blog.tonysneed.com/2011/10/21/global-error-handling-in-asp-net-mvc-3-with-ninject/)

我必须创建一个动作过滤器来覆盖 MVC 的默认行为

这是我的异常类

```
class ValidationException : ApplicationException
{
    public JsonResult exceptionDetails;
    public ValidationException(JsonResult exceptionDetails)
    {
        this.exceptionDetails = exceptionDetails;
    }
    public ValidationException(string message) : base(message) { }
    public ValidationException(string message, Exception inner) : base(message, inner) { }
    protected ValidationException(
    System.Runtime.Serialization.SerializationInfo info,
    System.Runtime.Serialization.StreamingContext context)
        : base(info, context) { }
} 
```

请注意，我有初始化我的 JSON 的构造函数。这是动作过滤器

```
public class HandleUIExceptionAttribute : FilterAttribute, IExceptionFilter
{
    public virtual void OnException(ExceptionContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }
        if (filterContext.Exception != null)
        {
            filterContext.ExceptionHandled = true;
            filterContext.HttpContext.Response.Clear();
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
            filterContext.HttpContext.Response.StatusCode = (int)System.Net.HttpStatusCode.InternalServerError;
            filterContext.Result = ((ValidationException)filterContext.Exception).myJsonError;
        }
    } 
```

现在我有了动作过滤器，我将用过滤器属性装饰我的控制器

```
[HandleUIException]
public JsonResult UpdateName(string objectToUpdate)
{
   var response = myClient.ValidateObject(objectToUpdate);
   if (response.errors.Length > 0)
     throw new ValidationException(Json(response));
} 
```

当抛出错误时，会调用实现 IExceptionFilter 的操作过滤器，并且我会在错误回调时取回客户端上的 Json。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-03-28T12:41:55.907

我发现的最巧妙的解决方案是创建自己的 JsonResult 来扩展原始实现并允许您指定 HttpStatusCode：

```
public class JsonHttpStatusResult : JsonResult
{
    private readonly HttpStatusCode _httpStatus;

    public JsonHttpStatusResult(object data, HttpStatusCode httpStatus)
    {
        Data = data;
        _httpStatus = httpStatus;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.RequestContext.HttpContext.Response.StatusCode = (int)_httpStatus;
        base.ExecuteResult(context);
    }
} 
```

然后，您可以在控制器操作中使用它，如下所示：

```
if(thereWereErrors)
{
    var errorModel = new { error = "There was an error" };
    return new JsonHttpStatusResult(errorModel, HttpStatusCode.InternalServerError);
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-06-20T08:20:59.977

这个问题有一个非常优雅的解决方案，只需通过 web.config 配置您的站点：

```
<system.webServer>
    <httpErrors errorMode="DetailedLocalOnly" existingResponse="PassThrough"/>
</system.webServer> 
```

来源：[https ://serverfault.com/questions/123729/iis-is-overriding-my-response-content-if-i-manually-set-the-response-statuscode](https://serverfault.com/questions/123729/iis-is-overriding-my-response-content-if-i-manually-set-the-response-statuscode)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-05-04T13:38:37.340

基于 Richard Garside 的回答，这里是 ASP.Net Core 版本

```
public class JsonErrorResult : JsonResult
{
    private readonly HttpStatusCode _statusCode;

    public JsonErrorResult(object json) : this(json, HttpStatusCode.InternalServerError)
    {
    }

    public JsonErrorResult(object json, HttpStatusCode statusCode) : base(json)
    {
        _statusCode = statusCode;
    }

    public override void ExecuteResult(ActionContext context)
    {
        context.HttpContext.Response.StatusCode = (int)_statusCode;
        base.ExecuteResult(context);
    }

    public override Task ExecuteResultAsync(ActionContext context)
    {
        context.HttpContext.Response.StatusCode = (int)_statusCode;
        return base.ExecuteResultAsync(context);
    }
} 
```

然后在你的控制器中，返回如下：

```
// Set a json object to return. The status code defaults to 500
return new JsonErrorResult(new { message = "Sorry, an internal error occurred."});

// Or you can override the status code
return new JsonErrorResult(new { foo = "bar"}, HttpStatusCode.NotFound); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-04-09T16:34:29.597

向 Json 发送错误的一种简单方法是控制响应对象的 Http Status Code 并设置自定义错误消息。

**控制器**

```
public JsonResult Create(MyObject myObject) 
{
  //AllFine
  return Json(new { IsCreated = True, Content = ViewGenerator(myObject));

  //Use input may be wrong but nothing crashed
  return Json(new { IsCreated = False, Content = ViewGenerator(myObject));  

  //Error
  Response.StatusCode = (int)HttpStatusCode.InternalServerError;
  return Json(new { IsCreated = false, ErrorMessage = 'My error message');
} 
```

**JS**

```
$.ajax({
     type: "POST",
     dataType: "json",
     url: "MyController/Create",
     data: JSON.stringify(myObject),
     success: function (result) {
       if(result.IsCreated)
     {
    //... ALL FINE
     }
     else
     {
    //... Use input may be wrong but nothing crashed
     }
   },
    error: function (error) {
            alert("Error:" + erro.responseJSON.ErrorMessage ); //Error
        }
  }); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-26T10:27:40.783

对我有用的东西（以及我从[另一个stackoverflow响应](https://stackoverflow.com/a/17692244/717372)中获取的）是设置标志：

```
Response.TrySkipIisCustomErrors = true; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-06T22:38:22.930

设置 StatusCode 后，您必须自己返回 JSON 错误对象，就像这样......

```
if (BadRequest)
{
    Dictionary<string, object> error = new Dictionary<string, object>();
    error.Add("ErrorCode", -1);
    error.Add("ErrorMessage", "Something really bad happened");
    return Json(error);
} 
```

另一种方法是拥有一个`JsonErrorModel`并填充它

```
public class JsonErrorModel
{
    public int ErrorCode { get; set;}

    public string ErrorMessage { get; set; }
}

public ActionResult SomeMethod()
{

    if (BadRequest)
    {
        var error = new JsonErrorModel
        {
            ErrorCode = -1,
            ErrorMessage = "Something really bad happened"
        };

        return Json(error);
    }

   //Return valid response
} 
```

也看看[这里](https://stackoverflow.com/a/3915537/786489)的答案

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-06T22:41:48.003

您需要决定是否需要“HTTP 级别错误”（错误代码的用途）或“应用程序级别错误”（您的自定义 JSON 响应的用途）。

如果错误代码设置为非 2xx（成功范围），则大多数使用 HTTP 的高级对象将永远不会查看响应流。在您的情况下，您将错误代码显式设置为失败（我认为是 403 或 500）并强制 XMLHttp 对象忽略响应的正文。

修复 - 在客户端处理错误条件或不设置错误代码并返回带有错误信息的 JSON（有关详细信息，请参阅 Sbossb 回复）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-08-04T17:43:09.040

如果您的需求不像 Sarath 那样复杂，您可以使用更简单的方法：

```
[MyError]
public JsonResult Error(string objectToUpdate)
{
   throw new Exception("ERROR!");
}

public class MyErrorAttribute : FilterAttribute, IExceptionFilter
{
   public virtual void OnException(ExceptionContext filterContext)
   {
      if (filterContext == null)
      {
         throw new ArgumentNullException("filterContext");
      }
      if (filterContext.Exception != null)
      {
         filterContext.ExceptionHandled = true;
         filterContext.HttpContext.Response.Clear();
         filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
         filterContext.HttpContext.Response.StatusCode = (int)System.Net.HttpStatusCode.InternalServerError;
         filterContext.Result = new JsonResult() { Data = filterContext.Exception.Message };
      }
   }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-03-27T11:58:31.577

一些响应依赖于抛出的异常并在 OnException 覆盖中对其进行处理。就我而言，如果用户传入了错误的 ID，我想返回诸如错误请求之类的状态。对我有用的是使用ControllerContext：

```
var jsonResult = new JsonResult { JsonRequestBehavior = JsonRequestBehavior.AllowGet, Data = "whoops" };

ControllerContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.BadRequest;

return jsonResult; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-09-14T01:37:53.553

如果您只是使用 MVC，最简单的方法是使用 HttpStatusCodeResult。

```
public ActionResult MyAjaxRequest(string args)
    {
        string error_message = string.Empty;
        try
        {
            // successful
            return Json(args);
        }
        catch (Exception e)
        {
            error_message = e.Message;
        }

        return new HttpStatusCodeResult(500, error_message);
    } 
```

当错误返回给客户端时，您可以根据需要显示或操作它。

```
request.fail(function (jqXHR) {
        if (jqXHR.status == 500) {
            alert(jqXHR.statusText);
        }
    }) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-11T09:56:37.450

我正在运行 Asp.Net Web Api 5.2.7，看起来 JsonResult 类已更改为使用泛型和异步执行方法。我最终改变了[Richard Garside 的解决方案](https://stackoverflow.com/a/43069917/1677693)：

```
public class JsonHttpStatusResult<T> : JsonResult<T>
{
    private readonly HttpStatusCode _httpStatus;

    public JsonHttpStatusResult(T content, JsonSerializerSettings serializer, Encoding encoding, ApiController controller, HttpStatusCode httpStatus) 
    : base(content, serializer, encoding, controller)
    {
        _httpStatus = httpStatus;
    }

    public override Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        var returnTask = base.ExecuteAsync(cancellationToken);
        returnTask.Result.StatusCode = HttpStatusCode.BadRequest;
        return returnTask;
    }
} 
```

按照 Richard 的示例，您可以像这样使用此类：

```
if(thereWereErrors)
{
    var errorModel = new CustomErrorModel("There was an error");
    return new JsonHttpStatusResult<CustomErrorModel>(errorModel, new JsonSerializerSettings(), new UTF8Encoding(), this, HttpStatusCode.InternalServerError);
} 
```

不幸的是，您不能对内容使用匿名类型，因为您需要将具体类型（例如：）传递`CustomErrorType`给`JsonHttpStatusResult`初始化程序。如果你想使用匿名类型，或者你只是想变得非常漂亮，你可以通过子类化`ApiController`来构建这个解决方案，为方法添加一个`HttpStatusCode`参数`Json`:)

```
public abstract class MyApiController : ApiController
{
    protected internal virtual JsonHttpStatusResult<T> Json<T>(T content, HttpStatusCode httpStatus, JsonSerializerSettings serializerSettings, Encoding encoding)
    {
        return new JsonHttpStatusResult<T>(content, httpStatus, serializerSettings, encoding, this);
    }

    protected internal JsonHttpStatusResult<T> Json<T>(T content, HttpStatusCode httpStatus, JsonSerializerSettings serializerSettings)
    {
        return Json(content, httpStatus, serializerSettings, new UTF8Encoding());
    }

    protected internal JsonHttpStatusResult<T> Json<T>(T content, HttpStatusCode httpStatus)
    {
        return Json(content, httpStatus, new JsonSerializerSettings());
    }
} 
```

然后你可以将它与这样的匿名类型一起使用：

```
if(thereWereErrors)
{
    var errorModel = new { error = "There was an error" };
    return Json(errorModel, HttpStatusCode.InternalServerError);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-02T21:03:25.257

这是 ASP.NET v5+ 的 JsonResult 覆盖答案。我已经测试过，它的工作原理和早期版本一样好。

```
public class JsonHttpStatusResult : JsonResult
{
    private readonly HttpStatusCode _httpStatus;

    public JsonHttpStatusResult(object data, HttpStatusCode httpStatus) : base(data)
    {
        _httpStatus = httpStatus;
    }

    public override Task ExecuteResultAsync(ActionContext context)
    {
        context.HttpContext.Response.StatusCode = (int)_httpStatus;
        if (context == null)
        {
            throw new ArgumentNullException(nameof(context));
        }

        var services = context.HttpContext.RequestServices;
        var executor = services.GetRequiredService<IActionResultExecutor<JsonResult>>();
        return executor.ExecuteAsync(context, this);
    }
} 
```

# c++ - 如何在 vb.net 中非静态地使用本机 dll 中的代码？

> ID：11370253
> 
> 赞同：0
> 
> 时间：2012-07-06T22:03:39.580
> 
> 标签：c++, .net, vb.net, managed-code

我的问题更多是关于概念，而不是实际代码。

我在 vb.net 中有一个应用程序。出于各种原因，我想将一些类移植到本机 c++ 代码（不是 cli）。我想要做的是能够实例化和使用这些类，就像我在完全托管的应用程序中所做的那样。

我知道我可以从本机 dll 调用静态函数，但这里不是这种情况。我需要实例化类并在应用程序的整个生命周期中使用它们。

那么问题来了，这可能吗？如果是这样，你能指出我正确的开始方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:09:13.847

也许你可以看看这里
[使用 P/Invoke 通过指针](https://stackoverflow.com/questions/197720/instantiating-a-c-class-in-c-sharp-using-p-invoke-via-a-pointer)
和这里
[http://www.codeproject.com/Articles/18032/How-to-Marshal-aC-Class在 C# 中实例化 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)

# iphone - 语义问题：使用未声明的标识符

> ID：11370258
> 
> 赞同：2
> 
> 时间：2012-07-06T22:04:22.007
> 
> 标签：iphone, objective-c, ios, xcode, xcode4

我正在创建一个游戏，让玩家将飞机滑入正确的车道。但是，我最近在我的游戏屏幕上添加了一架飞机。但是，Xcode 说我正在使用和未声明的标识符。我是新手，所以请帮忙。
这是我控制游戏的头文件。GamePlayViewController.h

```
#import <UIKit/UIKit.h>

@interface GamePlayViewController : UIViewController

@end 
```

这是我的 GamePlayViewController.m 这是出现错误的地方。

```
 #import "GamePlayViewController.h"

#import "Airplane.h"

@interface GamePlayViewController ()

@end

@implementation GamePlayViewController

-(void) viewWillAppear:(BOOL)animated {
    //Add a vehicle
    Airplane* v = [[Airplane alloc]
                   initWithFrame:CGRectMake(221, 228, 0, 0)
                   [self.view addSubview:v];
}

@end 
```

错误出现在 Airplane* v [[Airplane alloc]. 它说使用未声明的标识符“飞机”和“v”

我已经在谷歌和 Stackoverflow 上搜索了答案，但没有一个场景符合我的情况。

顺便说一句，提前感谢谁回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:08:07.070

您在哪里声明该行的图像？

```
image = [loadedImage retain]; 
```

我猜你没有。

* * *

添加这个：

```
 @property (nonatomic, retain) UIImage *image; 
```

...到你的 .h，这个到你的 .m：

```
@synthesize image; 
```

# asp.net - 如何使用带有标签的asp.net菜单控件在链接之间创建左侧导航？

> ID：11370260
> 
> 赞同：1
> 
> 时间：2012-07-06T22:04:34.720
> 
> 标签：asp.net, sitemap

我有一个左侧导航菜单，其中有 3 个带有 3 个站点地图的 asp.net 菜单控件，如下所示

![在此处输入图像描述](../Images/48a4129b3184331abf9992d869d174bd.png)

是否可以使用 1 个站点地图和 1 个菜单控件来实现这一点？

# gcc - gcc/g++/ld 缓存？

> ID：11370267
> 
> 赞同：0
> 
> 时间：2012-07-06T22:05:13.640
> 
> 标签：gcc, g++, ld

我正在开发一个程序，它将它的某些部分生成为 c/c++ 库。例如，它创建目录 - lib1、lib2、..、libN。对于每个库，它生成 c/c++ 代码 + Makefile，然后使用 gcc/g++ + ld，最后从库中调用代码。现在的问题是，如果 lib1 有一个函数`fun`和 libN，当`fun`从 libN 调用时，会使用 lib1。我尝试了不同版本的 gcc/g++ 直到 v4.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:29:55.210

> 现在的问题是，如果 lib1 有函数 fun 和 libN，当从 libN 调用 fun 时，会使用 lib1。

大概你在谈论*共享*库，而不是存档库（你会得到一个多重定义的符号错误）。

是的，它应该是这样工作的，并且*一直*在 UNIX 上工作。缓存与它*无关*。

如果您在 ELF 平台上，您可能可以通过使用使其更像 Windows `-Wl,-Bsymbolic`，但您将与默认系统行为作斗争，并且应该会遇到困难，以及许多意想不到的问题。如果`fun`不需要从 中暴露`libX`，隐藏[符号可见性](http://gcc.gnu.org/wiki/Visibility)是您的朋友。

由于您正在为`lib1`, ...生成代码，因此使用 eg而不是.`libN`可能更容易避免名称冲突。这也将更加便携，因为它可以在任何地方工作。`libX_fun``fun`

更新：

> 根据接口规范，函数名称必须非常有趣。

根据谁的接口规范？

您显然控制了主程序和库。因此，您可以并且可能应该更改接口规范以避免此问题。

# django - Django 1.4 部署和 os.environ.setdefault

> ID：11370271
> 
> 赞同：1
> 
> 时间：2012-07-06T22:05:19.573
> 
> 标签：django, deployment, django-1.4

在新的 Django 1.4 项目布局中，我在项目文件夹内的 manage.py 和 wsgi.py 上有一个 os.environ.setdefault 声明。两者有什么区别？

另外，如果我有这个设置结构：

```
mysite
|-- mysite
|   |-- settings
|   |-- base.py
|   |-- dev.py
|   |-- production.py
|   wsgi.py
|-- myapp
|-- manage.py 
```

我应该编辑哪个 os.environ.setdefault ？manage.py 中的那个还是 wsgi.py 中的那个？

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings") 
```

另外，我应该在哪个文件中检测当前环境？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:16:29.140

所以 manage.py 一旦部署就永远不会执行，它主要用于开发和/或对您的项目执行命令，因此它是您感兴趣的 wsgi.py。

您可以通过查看具有以下内容的文件本身来检查这一点：`if __name__ == "__main__":`这应该告诉您该文件是要直接从命令行执行的。

# jquery - 带有2行相同图像的jquery Carousel

> ID：11370275
> 
> 赞同：0
> 
> 时间：2012-07-06T22:05:54.433
> 
> 标签：jquery, image, carousel

我有一个问题..任何人都知道一个 jquery carousel 插件来做这样的事情：

[http://agencia.canalrp.com/savanahome/images/dummygaleria.jpg](http://agencia.canalrp.com/savanahome/images/dummygaleria.jpg)

这个想法是两行相同的图像..但是当我点击小拇指时，顶部的“滑块”正好与所选拇指居中..

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:19:59.050

参考这个[bx滑块](http://bxslider.com/)插件你可以用这个获得那种功能

# java - Scala Lift - 将文件保存到 apache 中的目录

> ID：11370279
> 
> 赞同：1
> 
> 时间：2012-07-06T22:06:24.370
> 
> 标签：java, apache, scala, lift

我有一个 ajax 文件上传系统正在运行。

我想要做的是将文件存储在 Apache 的 webroot 下的目录中，该应用程序在 tomcat 中运行，我更喜欢将文件存储在 webroot 之外（在 tomcat 中），以及 Apache 的 webroot 的某个地方，如我们定期更新应用程序。

我有这个：

```
var root = new java.io.File("").getAbsolutePath() 
```

这可以给我应用程序的位置。

我真的不想将它添加到应用程序的 config.xml 中，所以我想知道是否有人知道如何找到 Apache 的 webroot 的位置，以防它发生变化或我们交换服务器并且设置是不同的？

哇，我输入了很多“webroot”..

非常感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:14:18.973

查找当前的 apache 位置是一项棘手的工作，特别是在您需要处理虚拟主机时。您可能应该为此使用属性文件。您可以拥有多个[Props 文件](http://www.assembla.com/spaces/liftweb/wiki/Properties)，每个环境一个。

Lift 有多种加载属性文件的方法，我强烈建议使用它找到解决方案。例如，您甚至可以覆盖在 Lift 中查找配置文件的位置。

或者，您可以将 apache home 设置为 jetty 启动脚本中的变量，例如：

```
JAVA_OPTIONS="$JAVA_OPTIONS -Dapache.home=/etc/httpd" 
```

然后在您的代码中使用它：

```
val apacheHome = System.getProperty("apache.home") 
```

请注意，如果此类属性不存在， System.getProperty 将返回 null。您可能想要使用`Option`，使检查更惯用：

```
val apacheHome = Option(System.getProperty("apache.home"))
// apacheHome: Option[java.lang.String] = ... 
```

# jquery - 这个片段的动画延迟？

> ID：11370285
> 
> 赞同：0
> 
> 时间：2012-07-06T22:06:45.777
> 
> 标签：jquery, delay

我阅读了 jQuery 延迟，但我似乎无法为这个`mouseover`调用延迟我的动画：

```
$("div#test").mouseover(function ()
{
    $("div#test").delay(1000).animate({width:100}, {queue:false});  
    $("div#test").delay(1000).animate({height:100}, {queue:false});
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:12:16.090

问题是`queue: false`布尔值，它具有立即启动动画的效果（来自 API 页面`animate()`）：

> `queue`: 一个布尔值，指示是否将动画放入效果队列。如果`false`，动画将立即开始。

删除它并将效果组合到一个`animate()`调用中似乎可以使事情按预期工作：

```
$("div#test").mouseover(function ()
{
    $(this)
        .delay(1000)
        .animate({width:100, height: 100});
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9DKYZ/)。

参考：

*   [`animate()`](http://api.jquery.com/animate/).
*   [`delay()`](http://api.jquery.com/delay/).

# ruby-on-rails - 如何创建将执行 Application Helper 方法的链接（或按钮）？

> ID：11370286
> 
> 赞同：1
> 
> 时间：2012-07-06T22:07:06.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, link-to

我是**ruby​​/rails**的新手，并尝试创建将在会话中更新变量的链接。我在我把它放在这里定义了以下方法`application_helper.rb--`，希望这是拥有它的正确位置，因此它可以用于所有视图：

```
module ApplicationHelper

  def add_workspace_to_session(workspace_id)
    session[:workspace_id] = workspace_id 
  end

end 
```

在视图中，我想创建一个简单的链接（或按钮）来调用这个助手，传入一个工作区 ID 以便它更新`session[:workspace_id]`。如何在视图中创建此链接？使用链接到？我错过了一些东西......与路线有关？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:27:55.233

如果您正在创建一个按钮或链接，它应该指向一个 url 路径，而不仅仅是一个辅助方法。对此的快速解决方法是添加辅助方法的路径。

注意：我没有通过传递参数对此进行测试。

```
 def add_workspace_to_session(workspace_id, url)
      session[:workspace_id] = workspace_id 
      url 
    end 

<%= button_to "Store Workspace", add_workspace_to_session(workspace_id, root_path), :method => :get %> 
```

# jquery - 在鼠标悬停时使垂直列表滚动

> ID：11370287
> 
> 赞同：0
> 
> 时间：2012-07-06T22:07:20.367
> 
> 标签：jquery

我的导航中有一个垂直列表，它比屏幕高度长。我希望这样当我开始将鼠标悬停在列表上时，列表将开始向上移动，但仅当鼠标位于列表的一半左右时。

对此的任何建议将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:47:22.097

一种方法如下：

```
var ul = $('ul:first'),
    ulHeight = ul.outerHeight();

ul.on('mousemove',
            function(e){
                var win = $(window),
                    cST = win.scrollTop();
                if (e.pageY>=(ulHeight/2)){
                    win.scrollTop(cST + 20);
                }
                else {
                    win.scrollTop(cST - 20);
                }
            });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bw6Xw/4/)。

这是基于列表本身的中点，因此依赖于页面本身可见的中点。

为了使它更实用，`ul`它位于一个包含元素中，并且滚动基于超过该包含元素的中点：

```
var div = $('#wrap'),
    wrapHeight = div.height(),
    listHeight = div.find('ul').outerHeight();

div.on('mousemove',
            function(e){
                var cPointY = e.pageY,
                    cST = div.scrollTop();
                if (cPointY >= (wrapHeight/2)) {
                    div.scrollTop(cST + 15);
                }
                else {
                    div.scrollTop(cST - 15);
                }
            });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bw6Xw/3/)。

* * *

**编辑**添加另一个选项，根据光标在包含元素中的位置向上或向下滚动列表元素：

```
var div = $('#wrap'),
    wrapScreenHeight = div.height(),
    wrapHeight = div.outerHeight(),
    listHeight = div.find('ul').outerHeight();

div.on('mousemove', function(e) {
    var cPointY = e.pageY,
        dP = ((cPointY / wrapHeight));
    div.scrollTop((listHeight * dP) - wrapScreenHeight);

}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bw6Xw/6/)。参考资料：

*   [`on()`](http://api.jquery.com/on/).
*   [`outerHeight()`](http://api.jquery.com/outerHeight/).
*   [`scrollTop()`](http://api.jquery.com/scrollTop/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T15:56:03.417

如果您希望它具有动画效果（并且这种情况下是水平的）：

```
window.requestAnimFrame = (function(){
    return  window.requestAnimationFrame       ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame    ||
        function(callback){window.setTimeout(callback, 1000 / 60);};
})();

var div = $('#menu3'),
    wrapScreenWidth = div.width(),
    wrapHeight = div.outerWidth(),
    listWidth = div.find('tr').outerWidth();
var go = 0;
function anim(){
    var act = Math.round(div.scrollLeft()),
        diff = Math.abs(act-go);
    if(diff)
        div.scrollLeft(div.scrollLeft()+ (act<go?1:-1)*diff*0.03);      
    window.requestAnimFrame(anim);                  
};

anim();

div.on('mousemove', function(e) {
    var cPointY = e.pageX,
        dP = ((cPointY / wrapHeight));
    go = Math.max(0,Math.round((listWidth * dP) - wrapScreenWidth));

}); 
```

# c# - 编程新手如何使这段代码更简洁

> ID：11370288
> 
> 赞同：0
> 
> 时间：2012-07-06T22:07:21.460
> 
> 标签：c#, asp.net-mvc, entity-framework

嗨，这是我的第一个问题，如果它真的很基本，我很抱歉 - 我对编程很陌生！！！在 MVC 中使用 c# 我试图从 entitymodel 上下文中选择具有 Date 属性的对象。这个日期然后选择相关的重量对象等等来获取我的“设置”对象列表。

该代码可以正常工作并且可以执行我想要的操作，但想要一些有关如何使此代码更简洁的一般指导。这是代码：

```
 public ActionResult showDiary(string datein)
    {
        LocalTestEntities1 dblists = new LocalTestEntities1();
        DateTime date = Convert.ToDateTime(datein);
        IEnumerable<ExerciseDiary> diary = from o in dblists.ExerciseDiaries where o.Date == date select o;
        var mydiary = diary.ToList();
        ExerciseDiary thediary = mydiary[0];
        IQueryable<Weight> weights = from o in dblists.Weights where o.DiaryID == thediary.ID select o;
        var selectedWeight = weights.ToList();
        Weight weight = selectedWeight[0];
        IEnumerable<Set> sets = from x in dblists.Sets where x.WeightId == weight.WeightID select x;

        return View(sets);

    } 
```

看来我在这里采取了太多步骤。我知道我只将一个对象返回到日记中。有没有办法从 dblists 获取这个对象而不发送到 IEnumerable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:16:15.410

使用该`First()`方法将使事情更加简洁：

```
public ActionResult showDiary(string datein)
{
    using (LocalTestEntities1 dblists = new LocalTestEntities1())
    {
        DateTime date = Convert.ToDateTime(datein);

        var thediary = (from o in dblists.ExerciseDiaries 
                        where o.Date == date 
                        select o).First();
        var weight = (from o in dblists.Weights 
                      where o.DiaryID == thediary.ID 
                      select o).First();

        var sets = (from x in dblists.Sets 
                    where x.WeightId == weight.WeightID 
                    select x).ToList();
    }

    return View(sets);
} 
```

您还应该将您的 LINQ to Entities 数据访问包装在一个`using`块中，以便正确处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:20:40.963

使用 First() 时要小心，因为如果没有记录，它会抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:14:44.857

做事总是有很多方法，但是......我认为最简单的方法是使用`First()`，因为你总是只是抓住列表中的第一个结果。

另一种让它更简洁的方法是把你的 LINQ 语句放在多行上，就像我对`sets`.

您也可以使用`var`，有些人喜欢而其他人不喜欢让编译器推断类型。我在`sets`下面做了这个。`IEnumerable`当您使用泛型进行大型声明时，我觉得它会稍微清理代码。

```
public ActionResult showDiary(string datein)
{
    LocalTestEntities1 dblists = new LocalTestEntities1();

    DateTime date = Convert.ToDateTime(datein);
    ExerciseDiary thediary  = dblists.ExerciseDiaries.First(o => o.Date == date);
    Weight weight = dblists.Weights.First(o.DiaryID == thediary.ID);
    var sets = from x in dblists.Sets
               where x.WeightId == weight.WeightID
               select x;

    return View(sets);
} 
```

IMO 这比您在上面的答案中更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:25:47.563

```
 public ActionResult showDiary(string datein)
        {
            using( var dblists = new LocalTestEntities1())
            {
            var date = Convert.ToDateTime(datein);
            var thediary = dblists.ExerciseDiaries.First(o => o.Date == date);

            var weight = dblists.Weights.First(o => o.DiaryID ==thediary.ID);
            var sets = dblists.Sets.Where(x => x.WeightId == weight.WeightID).AsEnumerable();

            return View(sets);
            }
        } 
```

警告：如果可能，数据不会一直存在。改为使用`FirstOrDefault`并检查空值。

# android - 在移动设备上显示仪表板的方法？

> ID：11370292
> 
> 赞同：0
> 
> 时间：2012-07-06T22:07:26.757
> 
> 标签：android, ios, layout, widget, dashboard

我和我的团队目前正在开发一个应用程序（iOS 和 Android），它使用了我们实施的一个网络应用程序的许多功能。Web 应用程序 (ASP.NET) 基本上呈现和创建仪表板（自定义维度，由最终用户指定）。仪表板为小部件使用不同的库（FusionCharts、GoogleCharts、标准 .NET 控件...）

无论如何，移动应用程序的部分功能是显示特定于每个用户的仪表板。问题是：满足此要求的最佳方法是什么？我们在这里集思广益，想出了几个：

1.  一种是在 .NET 应用程序上生成仪表板的屏幕截图，并将该屏幕截图显示在移动应用程序上。但是，这种方法非常基础，不提供任何交互性。
2.  另一个包括在移动应用程序上重新创建每个仪表板。这样做的问题是它涉及从头开始重新创建所有内容，并且会出现与仪表板的 2 个版本（移动版与 Web 版）之间的不一致相关的问题。
3.  使用仪表板的 URL 在移动应用程序上加载仪表板。

就个人而言，我认为第三种方法是最合适的，因为不需要太多编码，我们只需使用它们各自的 URL 加载现有的仪表板。

问题是，我们如何处理太宽的仪表板..（高度不是问题，因为上下滚动的用户体验还不错，但必须左右滚动并不是一个好的体验 imo）..据我所知，iPhone 上的宽度是 320 像素（对吗？），那么我们如何处理仪表板宽度为 1000 像素的情况呢？

这是满足此要求的好方法吗？还有其他可能的方法吗？

任何反馈将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T00:00:47.683

听起来 CSS 媒体查询可能就是您所追求的。看看[这个例子](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)。

# .net - 无法运行 RegAsm：与访问注册表相关的错误

> ID：11370293
> 
> 赞同：2
> 
> 时间：2012-07-06T22:07:38.463
> 
> 标签：.net, msbuild, regasm

我有一个 C++ 项目，它在几个程序集的预构建事件中调用 RegAsm。预构建事件失败并出现以下错误：

```
Error 1 error RA0000 : An error occurred while writing the registration
information to the registry. You must have administrative credentials to perform 
 this task. Contact your system administrator for assistance.   RegAsm 
```

当我检查 BuildLog.htm 时，它在预构建事件中有以下命令：

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727\regasm 
    ../../../CommonLib/release/Services.dll 
    /tlb:c:\TFS\Console\Solution\Bridge\Services.tlb 
```

*所以我复制了命令并以管理员*身份在 Visual Studio 2010 命令提示符下运行它，但得到了同样的错误。

*直到最近，我才能很好地构建这个项目。* 不知道是什么导致了这个问题。任何帮助表示赞赏。

我是这台计算机上管理员组的成员，并且已关闭 UAC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:39:10.537

右键单击打开cmd，然后“以管理员身份运行”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:28:44.623

检查文件是否被另一个进程锁定。您可以使用 Sysinternals [Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645) 工具进行检查，以确保文件未被锁定或未被其他进程使用。它结合了两个传统 Sysinternals 实用程序 Filemon 和 Regmon 的功能

[另外，在StackOverflow](https://stackoverflow.com/questions/1847763/problem-registering-a-dll-access-denied)上查看这个类似的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T14:59:59.543

很抱歉交叉发布，但这首先出现在谷歌上，所以我会保持最新的答案。

我在这里遇到了同样的问题，但目标平台相反。我通过运行 x86 版本的 regasm 而不是 x64 来解决它。它可能对你有用吗？所以在而不是

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727>regasm.exe 
```

使用 x64 位版本

```
C:\Windows\Microsoft.NET\Framework64\v2.0.50727>regasm.exe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T08:07:53.260

好吧，我已经通过在 HKEY_CLASSES_ROOT 键上为我当前登录的用户添加“完全控制”权限（有点初级，但它有效）解决了这个问题。我已经运行了提升的 cmd，我的用户在“管理员”组中，但似乎这些还不够。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-19T07:17:08.503

以管理员身份打开您的 VS。它清楚地表明某些权限被拒绝。要使其正常工作，您必须确保已在管理员模式下打开它。

# php - Zend_Validate::is() 静态检查，获取验证消息变通

> ID：11370294
> 
> 赞同：2
> 
> 时间：2012-07-06T22:07:53.217
> 
> 标签：php, zend-framework, zend-validate

有谁知道在静态范围内使用 Zend_Validate 获取验证消息的方法？

```
Zend_Validate::is($value, $validator[0], $validator[2]) 
```

文档明确表示不能选择获取消息：http: [//framework.zend.com/manual/en/zend.validate.introduction.html#zend.validate.introduction.static](http://framework.zend.com/manual/en/zend.validate.introduction.html#zend.validate.introduction.static)

有点令人沮丧，但我想知道是否有人知道 Zend 中用于从验证字符串获取消息的任何其他方法？

如果有人感兴趣，我正在关注一篇关于在模型级别进行验证的精彩文章：http: [//www.cambraca.com/2011/03/validation-in-zend-framework-model.html](http://www.cambraca.com/2011/03/validation-in-zend-framework-model.html)

感谢您的帮助，-Seth

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:28:15.610

恐怕就是做不到。看，消息附加到每个 Validator*对象*- 您不能将它们附加到*类*（除非您使用静态消息属性和静态 setter/getter 自己实现验证逻辑并将使用它）。

# python - 递归删除大型文件夹结构中第 3 级以下的文件夹

> ID：11370298
> 
> 赞同：0
> 
> 时间：2012-07-06T22:08:40.203
> 
> 标签：python, recursion, directory

我只有数千个文件夹的大型结构，但是我只对将文件夹保留在前三个级别感兴趣，然后删除其余文件夹。我正在寻找一个递归python脚本来做到这一点。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:24:37.013

未经测试，但它可能看起来像这样`os.walk()`：

```
import os
import shutil

BASE = '.'
for root, dirs, files in os.walk(BASE):
    n = 0
    head = root
    while head and head != BASE:
        head, _ = os.path.split(head)
        n += 1
    if n == 3:
        for dir in dirs:
            shutil.rmtree(os.path.join(root, dir))
        del dirs[:]      # clear dirs so os.walk() doesn't look for subdirectories 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:23:00.733

正确的方法是使用`os.walk`，但这是一个便宜的答案：

```
>>> import os
>>> os.system('rm -rf */*/*/*/*')
>>> os.system('rmdir */*/*/*') 
```

这将删除至少四个级别的所有文件，然后尝试删除至少三个级别的所有目录。由于上一个命令将删除它们的内容，因此`rmdir`将成功（并抱怨它找到的所有非目录叶） .

# vba - 如何在Excel中更改文档的名称？

> ID：11370300
> 
> 赞同：3
> 
> 时间：2012-07-06T22:08:57.293
> 
> 标签：vba, excel, excel-2010

我有一个名为 TIP-PBI.xltm 的启用宏的模板。当我基于此模板创建文档时，Excel 会自动将其命名为 TIP-PBI1。但是，我想给它一个自定义名称。

我想我可以通过修改工作簿的 .Title 属性来做到这一点。为此，在启动时 Workbook_Open 事件启动，并执行以下操作：

```
Private Sub Workbook_Open()
    Dim strPBI As String
    strPBI = InputBox$("Enter PBI", "Enter PBI")

    ThisWorkbook.Title = "TIP-PBI-" & strPBI
End Sub 
```

但是，这无济于事。

如何在启动时更改文档的标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T22:49:25.557

更改工作簿名称的唯一方法是保存它（[ref](http://msdn.microsoft.com/en-us/library/bb210376(v=office.12).aspx)），这样您就可以执行类似的操作

```
ThisWorkbook.SaveAs ThisWorkbook.Path & "" & FileName & ".xls" 
```

如果您只想建议一个名称，那么您可以使用[GetSaveAsFilename](http://msdn.microsoft.com/en-us/library/aa195748(v=office.11).aspx)或

```
Application.FileDialog(msoFileDialogSaveAs).InitialFileName = ThisWorkbook.Path & "" & FileName & ".xls" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T11:23:36.810

如果新工作簿是从模板创建的，则它采用模板名称。因此，在我希望设置新工作簿名称的情况下，我将一个虚拟模板复制到所需的名称，然后根据重命名的模板打开新工作簿。

```
 strFile = "C:\Temp\" & strnewname & ".xltx "

 FileCopy "C:\Temp\Dummy.xltx", strFile

 'Open template to new workbook

 Workbooks.Open Filename:=strFile

 Kill strFile  'delete renamed template 
```

# sql - TSQL 根据最大 的其他列的组合检索最大行

> ID：11370301
> 
> 赞同：3
> 
> 时间：2012-07-06T22:08:58.080
> 
> 标签：sql, database, tsql, sql-server-2012

我在 SQL Server 2012 中有一个表，其中包含我的软件不同版本的补丁说明。该表如下所示：

```
VersionID int PrimaryKey Identity
Major tinyint
Minor tinyint
Revision tinyint
Patchnotes nvarchar(MAX) 
```

我需要根据 Major、Minor 和 Revision 检索具有最新版本的行。例如，1.1.4 版在 1.1.3 版之后但在 1.2.1 版之前。

有人对如何在 TSQL 中编写查询来做到这一点有任何想法吗？如果您可以在不完成整个查询的情况下将我推向正确的方向，我将不胜感激。努力学习等等！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T22:13:08.547

我会按您的三个字段降序排序，然后记录一条记录：

```
SELECT TOP 1 VersionID, Major, Minor, Revision, Patchnotes
FROM VERSIONS
ORDER BY Major DESC, Minor  DESC, Revision  DESC 
```

可以指定多个排序列。子句中排序列的顺序[`ORDER BY`](http://msdn.microsoft.com/en-us/library/ms188385.aspx)定义了排序结果集的组织。结果集按第一列排序，然后该有序列表按第二列排序，依此类推。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T22:24:09.853

2012 版本已实现标准`OFFSET / FETCH`语法（在以前的版本中，您必须使用专有的`TOP`）：

```
SELECT *
FROM Version
ORDER BY Major DESC, Minor  DESC, Revision  DESC 
  OFFSET 0 ROWS
  FETCH FIRST 1 ROW ONLY ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T22:14:22.557

```
SELECT TOP 1 * FROM MyTable
WHERE Major<=@MAJOR AND Minor<=@MINOR AND Revision<@REVISION
ORDER BY Major DESC, Minor DESC, Revision DESC 
```

# c# - OpenGL 多维数组惩罚

> ID：11370302
> 
> 赞同：0
> 
> 时间：2012-07-06T22:09:10.693
> 
> 标签：c#, arrays, opengl, multidimensional-array

我一直在尝试确定在 VBO 中为 OpenGL 存储信息的最佳方式。由于使用多维数组的性能损失，我一直在阅读有关如何将矩阵存储为单维数组的信息。

我想知道，这是否扩展到在 VBO 中存储信息？将顶点信息存储在单维或多维数组中的 VBO 中是否更有意义？

在我得到一堆答案说这取决于我存储的内容之前，我特意谈论的是传统上考虑用于多维数组（地图、网格等）的东西。

如果有的话，我会通过使用多维数组来查看什么类型的性能影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:35:06.210

这个问题是无效的，因为它没有意义。缓冲区对象是由 OpenGL 存储和管理的内存块。它不是 C# 数组或 C# 多维数组。这是您将数据传输到其中的一块内存。

您放入缓冲区对象的顶点数据必须符合[`glVertexAttribPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer)允许的条件。如何在 C# 中实现这一点取决于您和您使用的任何 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:22:37.803

> 由于使用多维数组的性能损失，存储为单维数组。

我认为您的困惑源于关于多维数组以及如何表示它们的术语差异。

在 C 中，数组是通过指针解引用来访问的：

```
int arr[10];

arr[5] <--> *(arr+5) 
```

事实上，索引运算符`o[i]`完全等价于`*(o+i)`and 你实际上也可以写`i[o]`，因为它产生相同的表达式。所以索引运算符执行指针算术和取消引用。这对 C multidim 数组意味着什么：

```
int marr[10][10];

int (*row)[10] = marr[5] <--> *(marr + 5);

mrow[5] = *(mrow + 5) <--> marr[5][5]; 
```

您可以根据需要将其扩展到任意多个维度。因此，在 C 中，多维数组会经历多个指针取消引用，这也可能意味着数据在内存中不是连续的，并且在 face 中的每一行可能具有不同的大小。这就是他们效率低下的原因。C 这样做是为了允许动态分配列指针和行。

然而，另一种存储多维数组的方法是平面存储模型。即，您只需将所有元素连接成一个单一的值字符串。并且通过引入你知道的尺寸，在哪里剪断这个字符串来重新排列它。

```
int fmarr[10*20*30];

int at1_2_3 = fmarr[1*30*20 + 2*20 + 3]; 
```

如您所见，所有大小都是静态的，并且数据是连续的。没有指针解引用，这使得处理数据更加简单，更重要的是允许操作向量化。这使事情变得更加高效。

# c++ - 休眠失败时的 Windows 通知

> ID：11370305
> 
> 赞同：1
> 
> 时间：2012-07-06T22:09:14.000
> 
> 标签：c++, windows, winapi, hibernation

我正在使用带有 WinAPI 的 C++ 进行编码，并且为了使计算机休眠，我使用以下调用：

```
SetSuspendState(TRUE, NULL, FALSE); 
```

但是发生的情况是，如果计算机安装了更大的 RAM 阵列，则休眠会失败。

所以我想知道，如果休眠失败，Windows 会发送任何通知吗？如果没有，如何判断我的休眠请求是否失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:01:31.267

看起来没有直接的方法来检测休眠[***更正：我错了。请参阅 Fowl 的回答。]***直到 Windows 8（请参阅[PowerRegisterSuspendResumeNotification](http://msdn.microsoft.com/en-us/library/windows/desktop/hh769080%28v=vs.85%29.aspx)）。但我想你可以空闲循环并观察系统时间。如果时间突然向前跳跃，则您已成功休眠（并恢复！），如果在一分钟左右内没有发生这种情况，则请求可能失败。我认为您可以使用[GetTickCount64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)函数，该函数对系统时间变化不敏感，但显然包含睡眠时间的偏差。如果这不起作用，请使用[GetSystemTimeAsFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)但还要注意[WM_TIMECHANGE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725498%28v=vs.85%29.aspx)消息。

您还可以检查有问题的系统，当休眠失败时，Windows 是否将任何内容写入事件日志。如果是这样，您的应用程序可以监视相关条目的事件日志。这将是一种更可靠的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:47:11.387

注册 ( [RegisterPowerSettingNotification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373196%28v=vs.85%29.aspx) )，然后侦听[WM_POWERBROADCAST](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373248%28v=vs.85%29.aspx)，然后查询事件日志以获取更多详细信息。

如果您想处理多个操作系统版本，会有些麻烦，但这是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:13:31.313

嗯......也许我在这里错过了这一点，但根据文档，如果失败，它应该返回 FALSE。在您的情况下它仍然返回 TRUE 吗？

# java - JAVA - void 和 boolean 方法有什么区别？

> ID：11370306
> 
> 赞同：-4
> 
> 时间：2012-07-06T22:09:29.180
> 
> 标签：java, methods, boolean, void

我对 JAVA 完全陌生。我正在用 JAVA 编写一个包装库，以使某些功能以类似基本的语言可用。

当我注意到一些代码没有在 JAVA 库中执行时，我在某个时候得到了库存，尽管编译器没有抱怨（使用 Eclipse）。我最终通过替换代码解决了它，如下所示：

```
public void VideoQuality(int vQuality) //did not work 
```

进入

```
public boolean VideoQuality(int vQuality) //works 
```

以下是完整的代码片段：

```
 public void VideoQuality(int vQuality) //did not work
        {if (vQuality==16) {
            vidQuality=16;
            }
            else if (vQuality==-16)  {
                vidQuality=-16;
            }
            else if (vQuality==0)  {
                vidQuality=0;
            }
            else
                vidQuality=-16;
        vitamioExt.setVideoQuality(vidQuality);
         }  

public boolean VideoQuality(int vQuality) //works
        {if (vQuality==16) {
            vidQuality=16;
            }
            else if (vQuality==-16)  {
                vidQuality=-16;
            }
            else if (vQuality==0)  {
                vidQuality=0;
            }
            else
                vidQuality=-16;
        vitamioExt.setVideoQuality(vidQuality);
        return true;
          } 
```

我认为**void**对应于 Visual Basic 中的 sub 而**boolean**对应于函数。

但是我发现以下代码使用**void工作很奇怪**

```
public void setVolume(float leftVolume,float rightVolume)
      {
          vitamioExt.setVolume(leftVolume, rightVolume);
      } 
```

我肯定遗漏了一些非常明显的东西，但我不明白为什么**void** -code 在**boolean** -code 工作时不起作用。

也许这取决于我如何调用代码？

任何人都可以点亮一些灯？

编辑：为了澄清什么不起作用，我的意思是代码：

```
vitamioExt.setVideoQuality(vidQuality); 
```

没有在 void-snippet 中执行。

EDIT2： vidQuality 在代码的不同部分中声明。我刚刚发布了这些片段，因为问题出在这些片段上，并且变量都在起作用。

EDIT3：最后，我想我一定是错误地调用了 void-snippet，尽管编译器没有编译。在任何一种情况下，两个片段都应该执行，尽管 void-snippet 当然是正确的，因为我不期望返回值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T22:16:53.327

之间的唯一区别

```
public void VideoQuality(int vQuality) 
```

和

```
public boolean VideoQuality(int vQuality) 
```

是前者不返回值，而后者则返回（特别是一个`boolean`值）。这就是差异的全部程度。

这意味着，例如，`void`版本为`VideoQuality`：

```
boolean x = VideoQuality(10); // Will not compile
VideoQuality(10);             // Will compile 
```

...因为您不能将`void`函数的结果分配给变量。

如果您使用以下`boolean`版本`VideoQuality`：

```
boolean x = VideoQuality(10); // Will compile
VideoQuality(10);             // Will compile 
```

...因为尽管您*可以*`boolean`分配返回变量的函数的结果`boolean`，但您不必这样*做*。如果你愿意，你可以忽略返回值。（通常这不是好的做法，但有时没关系。）

> 我认为 void 对应于 Visual Basic 中的 sub 而 boolean 对应于函数。

粗略地说，是的。`void`表示函数没有返回值，就像`Sub`在 VB 中一样。其他任何东西（`boolean`, `int`, `Foo`, 不管）都表明 A）该函数有一个返回值，并且 B）它是给定的类型。这就像`Function`在 VB 中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:25:39.430

函数是用类型声明的，很像常规变量，但函数声明的类型称为它的**返回类型**，它表示“这个函数在调用时将返回一个布尔值”。例如：

```
boolean alive = true;
boolean isDogAlive() {
    return alive;
} 
```

如果这个函数被调用，它会返回 true，所以你可以说

```
if (! isDogAlive()) { // if it returns false
    System.out.println("Oh no!");
} else {
    System.out.println("Yay!");
} 
```

如果函数不返回任何内容，则函数被声明为***void 。***除非您确实需要获取真/假值，否则您不需要为方法提供布尔返回类型。Void 应该适合您的情况。

# python - 每次使用结果时，Python 是否都使用 bignums 重新评估算术运算？

> ID：11370310
> 
> 赞同：2
> 
> 时间：2012-07-06T22:09:55.400
> 
> 标签：python

好的，我试图在 python 上进行一些非常大的评估 - 大约 10^(10^120) - 然后我意识到这是*非常*巨大的。无论如何，我随后回落到 10**10**5 和 10**10**6。检查两者的时差让我发现了这个有点奇怪的发现，我认为这是一种低效率的发现。

结果是，当我尝试时`cProfile.run("x=10**10**6")`，它花了*0.3s*和*40s*。`cProfile.run("print 10**10**6")`

 *然后我尝试`x= 10**10**6`了几乎没有时间但此后每次我*解释* `x`（`x`然后是*enter*）都需要很长时间（我想是*40秒）。*所以，我假设每次我解释`x`它都会重新计算整个值。

所以我的问题是：这不是非常低效吗？假设我在模块中声明了一些变量，`x= 10**10`每次我引用python 解释器都会一遍又一遍地`x`计算值？`10**10`

*血淋淋的细节将不胜感激。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T22:12:45.090

Python 可以使用二进制计算非常大的数字，但是要将其转换回可以显示的数字需要**大量**工作。

**例如：（**以及很多欧拉项目所要求的）-

比如说，所有数字的总和是多少`2 ** 32768`

Python 可以使用 BigNum 将结果计算为一个非常直接的数字，但只要你这样做：

```
sum(int(c) for c in str(my_big_number)) # ouch - that's a lot of digits to produce and store 
```

这就是当您键入（然后按 Enter）变量名/打印变量名时发生的情况，它正在执行转换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T22:14:38.737

每次打印时都不会重新计算该值，您看到的长时间延迟是将大数字转换为字符串以进行显示的成本。*

# php - php中socket_connect上的“连接被拒绝”错误

> ID：11370312
> 
> 赞同：5
> 
> 时间：2012-07-06T22:09:58.447
> 
> 标签：php, perl, sockets

我正在尝试将一些代码从 perl 转换为 php。

Perl 代码如下所示：

`my $handle = Connect($port, $host);`

我正在尝试使用套接字在 php 中做同样的事情。我尝试过socket_create 和socket_connect、socket_create 和socket_bind 以及fsocketopen。

结果，我遇到了“连接被拒绝”或“权限被拒绝”的错误消息：

> socket_connect() [function.socket-connect]：无法连接 [111]：连接被拒绝

我不确定这是我需要解决的问题，还是权限问题，因为 perl 中的代码可以正常工作（我没有编写该代码）。

我的 php 代码如下所示：

```
$socket =  socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if(!$socket){
        die('Error: socket_create()');
}
if(!socket_connect($socket,$host,$port)) {
        die('Error: socket_connect()');
} 
```

我不是管理服务器的人，所以如果是权限问题，我需要向其他人询问访问权限。我应该具体要求什么？

还是应该使用其他功能连接到服务器？我是 perl 新手，所以我不确定 socket_connect 是否是等效的函数。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T01:50:33.993

如果您的 perl 代码能够建立连接，那么在 php.ini 中也不需要额外的权限来做同样的事情。*连接被拒绝*意味着远程主机不允许您进入（您可能连接到错误的地址/端口）。*权限被拒绝*更令人惊讶，很多人在启用 SELinux 的情况下运行 httpd 脚本时都会遇到这种问题。如果您是其中之一，请参阅 SELinux 手册页：

> SELinux 策略可以设置为不允许 httpd 脚本连接到网络。这将防止黑客闯入您的 httpd 服务器并攻击其他机器。如果您需要脚本才能连接，您可以将 httpd_can_network_connect 布尔值设置为：
> 
> setsebool -P httpd_can_network_connect 1

不过，我对您的示例有一些看法。`Connect`来自您的 Perl 代码段似乎不是标准的套接字连接；我不知道它属于哪个模块，但你确定调用背后没有魔法吗？由于`socket_connect`采用点分四符号表示的地址（对于 IPv4），请确保您没有传递主机名（您需要先进行 DNS 查找）。最后检查它是否真的是您需要的 TCP 套接字，而不是 UDP。

# r - strsplit 变量分隔符

> ID：11370313
> 
> 赞同：3
> 
> 时间：2012-07-06T22:10:03.360
> 
> 标签：r, strsplit

我有一些由“”分隔的数据字符串需要分成列。有没有一种简单的方法可以按每个第 n 个分隔符拆分数据。例如，x 中的第一个值告诉您 y 中的前 4 个值对应于第一次试验。x 中的第二个值告诉您 y 中的下 3 个值对应于第二次试验，依此类推。

```
x <- c("4 3 3", "3 3 3 2 3")
y <- c("110 88 77 66 55 44 33 22 33 44 11 22 11", "44 55 66 33 22 11 22 33 44 55 66 77 88 66 77 88") 
```

目标是这样的：

```
structure(list(session = 1:2, trial.1 = structure(1:2, .Label = c("110 88 77", 
"44 55 66"), class = "factor"), trial.2 = structure(c(2L, 1L), .Label = c("33 22 11", 
"66 55 44"), class = "factor"), trial.3 = structure(1:2, .Label = c("22 33 44", 
"23 33 44"), class = "factor"), trial.4 = structure(c(NA, 1L), .Label = "55 66", class = "factor"), 
    trial.5 = structure(c(NA, 1L), .Label = "77 88 66", class = "factor")), .Names = c("session", 
"trial.1", "trial.2", "trial.3", "trial.4", "trial.5"), class = "data.frame", row.names = c(NA, 
-2L)) 
```

理想情况下，y 中的任何额外值都需要从结果数据帧中删除，并且不均匀的行长度应该用 NA 填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T01:08:25.503

这可能有用

```
dumx<-strsplit(x,' ')
dumy<-strsplit(y,' ')
dumx<-lapply(dumx,function(x)(cumsum(as.numeric(x))))
dumx<-lapply(dumx,function(x){mapply(seq,c(1,x+1)[-(length(x)+1)],x,SIMPLIFY=FALSE)})
ans<-mapply(function(x,y){lapply(x,function(w,z){z[w]},z=y)},dumx,dumy) 
```

我会让你将结果列表转换为数据框:)

# cakephp - 登录从我的 URL 中删除了 slug

> ID：11370315
> 
> 赞同：0
> 
> 时间：2012-07-06T22:10:20.500
> 
> 标签：cakephp

我正在使用 Cake 2.1.3 和 routes.php 文件，除了登录管理之外一切正常，例如我希望我的 url 如下：

[http://mysite.com/companyx/users/login](http://mysite.com/companyx/users/login)

其中 companyx 是 slug，但是当您在浏览器中运行该 url 时，如下所示：

[http://mysite.com/users/login](http://mysite.com/users/login)

在这个文件 routes.php 中，我定义如下：

```
Router::connect(
        '/:slug/users/login', // E.g. /companyx/users/login
        array('controller' => 'users', 'action' => 'login'), array(
        // order matters
        'pass' => array('slug')
        )
    ); 
```

使用其他控制器我没有问题，例如：

```
Router::connect(
        '/:slug/users', // E.g. /companyx/users 
        array('controller' => 'users', 'action' => 'index'), array(
        // order matters
        'pass' => array('slug')
        )
    ); 
```

此致 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:44:42.377

CakePHP 在 AuthComponent 中定义了一个默认登录操作。（第 171 行）

```
 /**
  * A URL (defined as a string or array) to the controller action that handles
  * logins.  Defaults to `/users/login`
  *
  * @var mixed
  */
public $loginAction = array(
    'controller' => 'users',
    'action' => 'login',
    'plugin' => null
); 
```

您可以使用自己的 UsersController 中的 beforeFilter 覆盖此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:50:46.397

谢谢你的回答。我以这种方式解决了这种情况：

```
public function beforeFilter() {
    parent::beforeFilter();
     if (!$this->request->is('post')) {
        $this->Auth->loginAction = 'this is:slug/users/login/';
     }
} 
```

“这是蛞蝓”，应该是蛞蝓。

此致。

# java - 如何在 HttpServlet 中终止用户会话的先前 HttpRequest

> ID：11370322
> 
> 赞同：2
> 
> 时间：2012-07-06T22:11:19.033
> 
> 标签：java, servlets

对于给定的会话，有什么方法可以找到以前的 HttpRequest 吗？

Web 客户端向长期运行的 Web 服务发送请求。当此服务运行时，客户端发送另一个请求。我想找到第一个请求并向其发送停止信号。

背景：我有一个需要 2-4 秒来处理的 Web 服务。servlet 托管在 Tomcat 容器中，并使用 OSGi 访问另一个插件中的主处理器。

The requests come from another web site that allows users to make 10 or so requests at a time. While the user is waiting they may make another page change that will start another 10 web requests. I need a way to locate the previous requests. Then I'll find a way to send a stop signal to the long running process which will allow the original HttpRequest to finish with some suitable error code.

Perhaps another way to look at this problem is to say: if a client makes a series of requests that overlap then we only want to service the last request and cancel the previous requests as soon as possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:15:43.983

我不认为`HttpSession`给你你正在寻找的东西，但我建议制作某种对象，你的请求可以定期检查它们是否是“最新”请求。如果他们不再是最新的请求，那么他们可以停止自己并立即返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:42:37.373

您可以将先前的请求作业任务保留在会话中。在下一个并行请求中，您可以获得较早的请求作业并采取您想要的操作。

# r - 学习理解 plyr、ddply

> ID：11370323
> 
> 赞同：23
> 
> 时间：2012-07-06T22:11:27.713
> 
> 标签：r, plyr

我一直试图通过尝试不同的变量和函数并查看结果来了解 plyr 的工作原理和方式。因此，我更多的是寻找关于 plyr 如何工作的解释，而不是具体解决它的答案。我已经阅读了文档，但我的新手大脑仍然没有得到它。

一些数据和名称：

```
mydf<- data.frame(c("a","a","b","b","c","c"),c("e","e","e","e","e","e")
                  ,c(1,2,3,10,20,30),
                  c(5,10,20,20,15,10))
colnames(mydf)<-c("Model", "Class","Length", "Speed")
mydf 
```

问题 1：总结与转换语法

所以如果我输入：`ddply(mydf, .(Model), summarise, sum = Length+Length)`

我得到：

```
`Model ..1
1     a   2
2     a   4
3     b   6
4     b  20
5     c  40
6     c  60 
```

如果我输入：`ddply(mydf, .(Model), summarise, Length+Length)`我得到相同的结果。

现在如果使用变换：`ddply(mydf, .(Model), transform, sum = (Length+Length))`

我得到：

```
 Model Class Length Speed sum
1     a     e      1     5   2
2     a     e      2    10   4
3     b     e      3    20   6
4     b     e     10    20  20
5     c     e     20    15  40
6     c     e     30    10  60 
```

但是，如果我像第一个总结那样陈述它： `ddply(mydf, .(Model), transform, (Length+Length))`

```
 Model Class Length Speed
1     a     e      1     5
2     a     e      2    10
3     b     e      3    20
4     b     e     10    20
5     c     e     20    15
6     c     e     30    10 
```

那么为什么添加“sum =”会有所不同呢？

问题2：为什么这些不起作用？

`ddply(mydf, .(Model), sum, Length+Length)`#函数（i）中的错误：找不到对象“长度”

```
ddply(mydf, .(Model), length, mydf$Length) #Error in .fun(piece, ...) : 
```

2 个参数传递给 'length' 需要 1

这些例子更多地表明我根本不了解如何使用 plyr。

任何答案或解释表示赞赏。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-07T11:05:38.560

我发现当我无法“可视化”R 中的任何功能工具如何工作时，最简单的做法是浏览单个实例：

```
ddply(mydf, .(Model), function(x) browser() ) 
```

然后`x`实时检查，这一切都应该是有意义的。然后，您可以在 x 上测试您的函数，如果它有效，那么您就是黄金（除非其他分组与您的第一个 x 不同）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-06T22:23:10.340

语法是：

```
ddply(data.frame, variable(s), function, optional arguments) 
```

函数预计返回的位置 a `data.frame`。在你的情况下，

*   summarise 是一个函数，它将透明地创建一个新的 data.frame，并将您提供的表达式的结果作为进一步的参数 (...)

*   基本 R 函数 transform 将转换 data.frames（首先由变量拆分），根据您作为进一步参数提供的表达式添加新列。这些需要命名，这就是转换的工作方式。

如果您使用除子集、变换、变异、with、inside 或 summarise 之外的其他函数，您需要确保它们返回一个 data.frame（长度和总和不），或者至少是一个适当的向量输出的长度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T22:34:24.213

我理解`ddply(... , .(...) , summarise, ...)`操作的方式旨在减少行数以匹配`.(...)`分组变量内不同组合的数量。因此，对于您的第一个示例，这似乎很自然：

```
ddply(mydf, .(Model), summarise, sL = sum(Length)
  Model sL
1     a  3
2     b 13
3     c 50 
```

好的。似乎对我有用（不是普通的 plyr 用户）。`transform`另一方面，我理解的操作是创建与数据帧长度相同的新列。这就是你的第一个`transform`电话完成的。你的第二个（失败）是：

```
ddply(mydf, .(Model), transform, (Length+Length)) 
```

该操作没有为所执行的操作创建新名称，因此结果中没有分配任何新名称。当您添加`sum=(Length+Length)`时，突然有一个可用的名称，（并且该`sum`功能*未*使用）。使用函数名作为列名通常是个坏主意。

在问题二上，我认为 .fun 参数需要是一个 plyr 函数或适用于整个（拆分）数据帧而不是任何旧函数的东西。没有`sum.data.frame`功能。但是“nrow”或“ncol”确实有意义。你甚至可以让 'str' 在那个位置上工作。应用于数据帧的长度函数给出了列数：

```
 ddply(mydf, .(Model), length )  # all 4's 
```

# jenkins - 詹金斯 SMTP TLS

> ID：11370327
> 
> 赞同：21
> 
> 时间：2012-07-06T22:12:16.823
> 
> 标签：jenkins, jenkins-plugins

我正在尝试设置 Jenkins 以使用我们公司的 SMTP 服务器通过电子邮件发送构建通知。我们在端口 587 上使用 TLS 作为加密方法。但我似乎无法让电子邮件通知正常工作。

这是我的 Hudson.Tasks.Mailer.xml 文件，因此您可以查看我的配置（我已经删除了 SMTP auth 用户和密码，并稍微更改了 smtpHost 以防万一）

```
<hudson.tasks.Mailer_-DescriptorImpl>
  <helpRedirect/>
  <defaultSuffix></defaultSuffix>
  <hudsonUrl>http://localhost:8080/</hudsonUrl>
  <smtpAuthUsername></smtpAuthUsername>
  <smtpAuthPassword></smtpAuthPassw$
  <adminAddress></adminAddress>
  <smtpHost>pod#####.outlook.com</smtpHost>
  <useSsl>true</useSsl>
  <smtpPort>587</smtpPort>
  <charset>UTF-8</charset>
</hudson.tasks.Mailer_-DescriptorImpl> 
```

看起来这是一个已知问题，来自[http://issues.hudson-ci.org/browse/HUDSON-2206](http://issues.hudson-ci.org/browse/HUDSON-2206)

我对 Apple OS（这是运行 Jenkins 的机器）不是很熟悉，但我认为我可以使用提到的解决方法解决这个问题。不过，我不确定该解决方法应该放在哪里，所以我试着把它放在这里：/Library/Application Support/Jenkins/jenkins-runner.sh

```
defaults="defaults read /Library/Preferences/org.jenkins-ci"

war=`$defaults war` || war="/Applications/Jenkins/jenkins.war"

javaArgs="-Dmail.smtp.starttls.enable=\"true\""
heapSize=`$defaults heapSize` && javaArgs="$javaArgs -Xmx${heapSize}"
permGen=`$defaults permGen` && javaArgs="$javaArgs -XX:MaxPermSize=${permGen}"

home=`$defaults JENKINS_HOME` && export JENKINS_HOME="$home"

add_to_args() {
  val=`$defaults $1` && args="$args --${1}=${val}"
}

args=""
add_to_args prefix
add_to_args httpPort
add_to_args httpListenAddress
add_to_args httpsPort
add_to_args httpsListenAddress
add_to_args ajp13Port
add_to_args ajp13ListenAddress

echo "JENKINS_HOME=$JENKINS_HOME"
echo "Jenkins command line for execution"
echo /usr/bin/java $javaArgs -jar "$war" $args
exec /usr/bin/java $javaArgs -jar "$war" $args 
```

这似乎没有解决它。当 Jenkins 启动时，我可以在控制台中看到该调用，但是当我尝试发送测试配置电子邮件时，我收到以下错误：

```
Failed to send out e-mail

javax.mail.MessagingException: Could not connect to SMTP host: pod#####.outlook.com, port: 587;
nested exception is:
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
at javax.mail.Service.connect(Service.java:317)
at javax.mail.Service.connect(Service.java:176)
at javax.mail.Service.connect(Service.java:125)
at javax.mail.Transport.send0(Transport.java:194) 
```

关于我还能尝试什么的任何想法？我已经尝试将电子邮件帐户切换为使用 gmail 的 smtp 服务器，并且效果很好，但如果可以的话，我宁愿使用我们的 smtp 服务器。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-06-19T14:31:09.260

![在此处输入图像描述](../Images/f7c7574f93299b33f3105c2db8ee046b.png)

将 SMTP 端口从 587 更改为 465 为我解决了这个问题：

```
SMTP server:               smtp.mandrill.com
Use SMTP Authentication:   true
Use SSL:                   true
SMTP Port:                 465 
```

据我所知*（免责声明：我绝不是 Hudson/Jenkins 专家）* Hudson/Jenkins 电子邮件插件支持 SSL 加密的 SMTP 通信——但是这种实现要求从一开始就对通信进行加密。

在端口 587 上连接时，另一端的服务器可能需要一个 STARTTLS 命令（请参阅此[SSL vs TLS vs STARTTLS](https://www.fastmail.fm/help/technical/ssltlsstarttls.html)文章）。此命令使用纯文本发送以“升级”连接以使用 SSL/TLS。

Hudson/Jenkins 尝试在端口 587 上开始协商 SSL，但立即被拒绝，导致以下错误：

```
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

我尝试添加建议的 JAVA 选项“-Dmail.smtp.starttls.enable=true”来启用 TLS：

```
JENKINS_JAVA_OPTIONS="-Djava.awt.headless=true -Dmail.smtp.starttls.enable=true" 
```

不幸的是，这并没有为我解决问题。

将端口更改为 465 后，SSL 协商正确发生，通信成功。

希望有帮助。

**注意：**当您为任何“SSL - 端口 465”或“非 SSL - 端口 587”配置选中“使用 SMTP 身份验证”选项时，Jenkins 电子邮件插件始终需要 SMTP 凭证，这些凭证通常是发件人的电子邮件凭证。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-23T14:40:15.870

我对 Jenkins 有同样的问题，但我的安装在 Centos 而不是 Apple OS 上。我仍然想在这里发布解决方案，因为 A）您可能能够对解决方案进行必要的调整，并且 B）Linux 和 Jenkins 用户可能会从中受益。

无论如何，找到 Jenkins 配置文件（在 CENTOS 中的 /etc/sysconfig/jenkins 中）

在其中找到 JENKINS_JAVA_OPTIONS 变量并添加以下选项“-Dmail.smtp.starttls.enable=true”在我的情况下，这是我以前的情况：

```
JENKINS_JAVA_OPTIONS="-Djava.awt.headless=true" 
```

这是之后；

```
JENKINS_JAVA_OPTIONS="-Djava.awt.headless=true -Dmail.smtp.starttls.enable=true" 
```

重启 Jenkins 服务器（在 Linux 中）

```
/etc/init.d/jenkins restart 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-03T12:15:15.120

**对于 Windows 上的 Jenkins**

打开 jenkins.xml 并修改参数节点

> -Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle **-Dmail.smtp.starttls.enable=true** -jar "%BASE%\jenkins.war" --httpPort=8080

对于 smtp.live.com：

> 将 SMTP 端口设置为 587 并取消选中`Use SSL`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-01T04:54:55.247

即使在`-Dmail.smtp.starttls.enable=true`文件（debian/ubuntu）中@nsof 的答案中提到的设置之后`/etc/default/jenkins`，它对我也不起作用。

诀窍是将 SMTP 端口设置为*587*并**取消选中** `Use SSL`如下所示，然后电子邮件发送成功。

[![在此处输入图像描述](../Images/35f40ff57137dd8d90f0f9520d063d71.png)](https://i.stack.imgur.com/QoONL.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T08:47:36.527

尝试错误本身中提到的解决方法：

[http://issues.hudson-ci.org/browse/HUDSON-2206](http://issues.hudson-ci.org/browse/HUDSON-2206)

在 Java 中：

```
props.put("mail.smtp.starttls.enable","true"); 
```

在 Tomcat 中：

添加`JAVA_OPTS=-Dmail.smtp.starttls.enable="true"`到 tomcat 配置文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-02T14:03:12.933

添加 -Dmail.smtp.starttls.enable=true 作为 JAVA_OPTS 的参数解决了我的问题

如果您的 jenkins 在独立模式下运行，请更新 /etc/sysconfig/jenkins 中的 JAVA_OPTS 如果您的 jenkins 在 tomcat 中运行，请更新 JAVA_OPTS

*   用于 unix 的 catalina.sh
*   用于 windows 的 catalina.bat

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-11T09:23:39.647

使用 Jenkins `2.134`，以下内容对我有用：

*   `JAVA_TOOL_OPTIONS=-Dmail.smtp.starttls.enable=true`
*   **取消勾选** `Use SSL`！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-16T10:06:58.287

如果上述解决方案都不起作用，这是最好的解决方案。

[https://issues.jenkins-ci.org/browse/JENKINS-47939](https://issues.jenkins-ci.org/browse/JENKINS-47939)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-04T14:11:28.617

对于**Ubuntu 16.04**上的 Jenkins ：

1 - 编辑配置文件：

```
sudo nano /etc/default/jenkins 
```

2 - 注释掉现有的 JAVA_ARGS，添加新的如下所示：

```
#JAVA_ARGS="-Djava.awt.headless=true"
JAVA_ARGS="-Djava.awt.headless=true -Dmail.smtp.starttls.enable=true" 
```

3 - 重启詹金斯

```
sudo service jenkins restart 
```

[![在此处输入图像描述](../Images/37e1cce866a62d7191ee67f33c615509.png)](https://i.stack.imgur.com/VlH5C.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-13T11:42:36.357

在@user11791348 的回答中发表声明后，为我解决了这个问题。

声明是：“重要的是要注意“电子邮件通知”部分的用户名和“Jenkins 位置”部分的系统管理员电子邮件地址必须是有效的 smtp.office365.com 用户。如果其中一个不是在 smtp.office365.com 中找到，您将收到“客户端无权作为此发件人发送”错误”

因此，我在 Jenkins 中配置了系统管理员电子邮件地址，我的 Jenkins.xml 也包含以下行：

```
<arguments>-Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle -Djava.awt.headless=true -Dmail.smtp.starttls.enable=true -jar "C:\Program Files\Jenkins\jenkins.war" --httpPort=8080 --webroot="%LocalAppData%\Jenkins\war"</arguments> 
```

使用 SSL：未选中使用 TLS：未选中 SMTP 端口：587

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-07T21:27:14.653

对于 Red Hat Enterprise Linux Server 版本 7.4 (Maipo) 上的 Jenkins，编辑 /etc/sysconfig/jenkins 以添加

[![在此处输入图像描述](../Images/23097e9fbe4f00453f595b8d3cb473b1.png)](https://i.stack.imgur.com/AhwYA.png)

Jenkins 服务配置文件需要机器的 root 访问权限。在 CloudBees Jenkins Enterprise 中，您可以在以下位置找到此文件：

*   /etc/default/jenkins：大多数 Linux 发行版的位置。
*   /etc/sysconfig/jenkins：RedHat/CentOS 发行版的位置。
*   C:\Program Files\Jenkins\jenkins.xml：Windows 的默认位置

# c# - 无法将数据库中的数据读入arraylist？

> ID：11370328
> 
> 赞同：1
> 
> 时间：2012-07-06T22:12:36.480
> 
> 标签：c#, database, sqoop

我试图解决这个问题，但是当我这样做时我得到了一个疯狂的错误？

这是我的第一个方法 --> 其中包含 SQLQUERY

```
[WebMethod]
 public ArrayList getAllaEgenskaperforenmall(string mall_id)
 {
     ArrayList dbFetch;
    // string parameter1 = "mall_namn";
     string sqlReadQuery = "SELECT DISTINCT d.egenskaper_namn FROM(SELECT egen.egenskaper_id, egen.egenskaper_namn, kopp.mall_id, kopp.egenskap_id, emall.mall_id as egenskapensmallid, emall.mall_namn FROM t_egenskaper as egen, t_kopplingmallegenskaper as kopp, t_egenskapsmall as emall  WHERE kopp.mall_id = 1  AND kopp.egenskap_id = egen.egenskaper_id) as d";

     dbFetch = executeReadSqlQueryArray(sqlReadQuery);

     return dbFetch;

 } 
```

然后我尝试建立一个可以为我获取数据的通用网络方法。

```
 public ArrayList executeReadSqlQueryArray(string sqlToFetchData, string parameter1 = "", string parameter2 = "", string parameter3 = "")
{
     SqlConnection conn = new SqlConnection(mConnectionstring);
     SqlCommand command = new SqlCommand();
     SqlDataReader sqlReader;
     ArrayList dataReadFromDatabase = new ArrayList();

     command.Connection = conn;
     command.Connection.Open();
     command.CommandText = sqlToFetchData;

     sqlReader = command.ExecuteReader();

    while(sqlReader.Read())
    {

        object[] values = new object[sqlReader.FieldCount];
        sqlReader.GetValues(values);
        dataReadFromDatabase.Add(values);
    }
    command.Connection.Close();
    return dataReadFromDatabase;

} 
```

我得到的错误是这个？有趣的是，昨天我想我设法让它如我所愿！

```
System.InvalidOperationException: There was an error generating the XML document. ---> System.InvalidOperationException: The type System.Object[] may not be used in this context.
   at System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write8_ArrayOfAnyType(Object o)
   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayListSerializer2.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces)
   at System.Web.Services.Protocols.XmlReturnWriter.Write(HttpResponse response, Stream outputStream, Object returnValue)
   at System.Web.Services.Protocols.HttpServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
   at System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
   at System.Web.Services.Protocols.WebServiceHandler.Invoke() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:18:21.107

问题不在于您的代码从数据库中获取，而是 WebMethod 试图将其转换为字符串，但它不知道它是什么数据类型。目前它被转换为对象（这可能意味着一百万种类型中的一种）。

如果数据类型是简单的奇异数据类型，请尝试从 ArrayList 交换并使其成为通用数组，例如

```
List<String> 
```

问题是您的数组列表当前包含一个对象列表，而序列化处理器不知道如何处理它们。您可以将它们从对象硬转换为一种`serializable`格式，以帮助或切换到一个类（并实现该类`serializable`）。

例如

```
[Serializable]
public class ProfileBasics
{
    /// <summary>
    ///   Gets or sets the about me section
    /// </summary>
    [XmlElement("AboutMe")]
    public string AboutMe {get; set;}

    /// <summary>
    ///   Gets or sets the city name for the zip code
    /// </summary>
    [XmlElement("City")]
    public string City {get; set;}
 } 
```

然后你可以这样做`List<ProfileBasics>`，你的网络服务应该仍然可以工作。

# android - 在 Android SDK Manager 中下载 Google 的 API

> ID：11370333
> 
> 赞同：0
> 
> 时间：2012-07-06T22:13:10.937
> 
> 标签：android, eclipse, sdk

根据 Android 文档，Google API 包含在 Android 4.0.3(API15) 中，但是，它没有为我下载，并且我无法在任何地方添加第三方 API（见下图）

![在此处输入图像描述](../Images/5c018f4cbfdedbdc4d386b057b144249.png)

有没有办法通过 Google Inc. 添加 Google API？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:26:03.417

我用谷歌搜索了你的问题，结果发现另一个关于这个问题的 StackOverflow 问题。也许这个解决方案会对你有所帮助。

[Eclipse/Android：无法安装 Google API 目标](https://stackoverflow.com/questions/7892220/eclipse-android-cant-install-google-apis-targets)

基本上它说你需要为日食更新你的 ADT 插件。

尝试执行显示在您的 ADT 中的更新（可以在您发布的图像中看到它）

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:19:16.773

当我运行我的 SDK 管理器时，Google API 会显示在 Android 4.0.3 下。也许更新您的 Android SDK 工具？

# gtk - 为什么我的工具项的代理菜单项没有被使用？

> ID：11370335
> 
> 赞同：1
> 
> 时间：2012-07-06T22:13:28.360
> 
> 标签：gtk, glib, vala, gobject

`ToolItem`我想在工具栏的溢出菜单中显示一个自定义菜单项。这似乎是该[`set_proxy_menu_item`](http://www.valadoc.org/#!api=gtk+-3.0/Gtk.ToolItem.set_proxy_menu_item)方法的目的。但是，当我使用这种方法设置代理菜单项时，它对溢出菜单没有影响。它仍然使用默认菜单项（使用 ToolItem 的名称作为标签）。

这是一个重现问题的简单项目（在 Vala 中）。它创建了一个小窗口，其中包含一个带有 3 个按钮的工具栏。窗口应该足够小，除了这些按钮中的一个之外，所有按钮都在溢出菜单中。

当我查看溢出菜单时，我应该看到“代理”作为`edit_button`. 相反，我看到“编辑”。

我究竟做错了什么？

```
void main(string[] args) {
    Gtk.init(ref args);
    MainWindow main_window = new MainWindow();
    main_window.show_all();
    Gtk.main();
}

public class MainWindow : Gtk.Window {
    public MainWindow() {
        destroy.connect(Gtk.main_quit);
        title = "Main Window";

        Gtk.Box main_box = new Gtk.Box(Gtk.Orientation.VERTICAL, 6);
        add(main_box);

        Gtk.Toolbar toolbar = new Gtk.Toolbar();
        main_box.pack_start(toolbar, false, false);

        Gtk.ToolButton new_button = new Gtk.ToolButton.from_stock(Gtk.Stock.NEW);
        Gtk.ToolButton edit_button = new Gtk.ToolButton.from_stock(Gtk.Stock.EDIT);
        Gtk.ToolButton delete_button = new Gtk.ToolButton.from_stock(Gtk.Stock.DELETE);

        Gtk.MenuItem proxy = new Gtk.MenuItem.with_label("proxy");
        proxy.show_all();
        edit_button.set_proxy_menu_item("proxy_menuitem", proxy);

        toolbar.add(new_button);
        toolbar.add(edit_button);
        toolbar.add(delete_button);

        Gtk.Label content_label = new Gtk.Label("Placeholder");
        main_box.pack_start(content_label, false, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:07:55.097

事实证明这`set_proxy_menu_item`是暂时的，应该用于对`create-menu-proxy`信号的响应。我在网上的任何地方都找不到这个文档，但它来自 Gtk+ 源代码：

```
/**
 * GtkToolItem::create-menu-proxy:
 * @tool_item: the object the signal was emitted on
 *
 * This signal is emitted when the toolbar needs information from @tool_item
 * about whether the item should appear in the toolbar overflow menu. In
 * response the tool item should either
 * <itemizedlist>
 * <listitem>call gtk_tool_item_set_proxy_menu_item() with a %NULL
 * pointer and return %TRUE to indicate that the item should not appear
 * in the overflow menu
 * </listitem>
 * <listitem> call gtk_tool_item_set_proxy_menu_item() with a new menu
 * item and return %TRUE, or 
 * </listitem>
 * <listitem> return %FALSE to indicate that the signal was not
 * handled by the item. This means that
 * the item will not appear in the overflow menu unless a later handler
 * installs a menu item.
 * </listitem>
 * </itemizedlist>
 *
 * The toolbar may cache the result of this signal. When the tool item changes
 * how it will respond to this signal it must call gtk_tool_item_rebuild_menu()
 * to invalidate the cache and ensure that the toolbar rebuilds its overflow
 * menu.
 *
 * Return value: %TRUE if the signal was handled, %FALSE if not
 **/ 
```

所以解决这个问题的正确方法是：

```
edit_button.create_menu_proxy.connect(on_create_menu_proxy);

...

private bool on_create_menu_proxy(Gtk.ToolItem tool_item) {
    Gtk.MenuItem proxy = new Gtk.MenuItem.with_label("proxy");
    tool_item.set_proxy_menu_item("proxy_menuitem", proxy);
    return true;
} 
```

您实际上可能不想在每次触发信号时都创建一个新代理，但这应该足以帮助任何阅读本文的人入门。

# asp.net - WCF - 找到该合同的多个端点配置 - 错误

> ID：11370338
> 
> 赞同：15
> 
> 时间：2012-07-06T22:13:33.140
> 
> 标签：asp.net, wcf, iis-7.5

我们有使用 WCF 的 ASP.Net Web 应用程序。作为 Windows 服务托管的 wcf 服务。一切皆好。然后我们进行了更改，以便服务合同将具有不同的命名空间（从 Namespace1.IserviceContract 到 Namespace2.IserviceContract）。在我们部署到服务器的更改之后，当我们尝试实例化服务对象时出现以下错误。

```
 System.InvalidOperationException: An endpoint configuration section for contract 'Namespace2.IserviceContract' could not be loaded because more than one endpoint configuration for that contract was found. Please indicate the preferred endpoint configuration section by name.

Generated: Fri, 06 Jul 2012 21:02:56 GMT

System.Web.HttpUnhandledException: Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.InvalidOperationException: An endpoint configuration section for contract 'Namespace2.IserviceContract' could not be loaded because more than one endpoint configuration for that contract was found. Please indicate the preferred endpoint configuration section by name.
   at System.ServiceModel.Description.ConfigLoader.LookupChannel(String configurationName, String contractName, Boolean wildcard)
   at System.ServiceModel.Description.ConfigLoader.LoadChannelBehaviors(ServiceEndpoint serviceEndpoint, String configurationName)
   at System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName, Configuration configuration)
   at System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName)
   at System.ServiceModel.ChannelFactory.InitializeEndpoint(String configurationName, EndpointAddress address)
   at System.ServiceModel.ChannelFactory`1..ctor(String endpointConfigurationName, EndpointAddress remoteAddress)
   at System.ServiceModel.EndpointTrait`1.CreateSimplexFactory()
   at System.ServiceModel.EndpointTrait`1.CreateChannelFactory()
   at System.ServiceModel.ClientBase`1.CreateChannelFactoryRef(EndpointTrait`1 endpointTrait)
   at System.ServiceModel.ClientBase`1.InitializeChannelFactoryRef()
   at System.ServiceModel.ClientBase`1..ctor()
   at TestApplication.ManagementWrapper.VerifyAuthentication(Int32 appId, String Token)
   at TestApplication.VerifyAuthentication(String tokenstring) 
```

我们对此问题进行了研究，发现如果我们在 web.config 文件中定义了两个客户端端点，则会出现这种类型的异常。但是我们确信我们只定义了一个客户端端点。此异常仅显示在服务器中。本地工作正常。这是我们的服务模式：

```
<system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_Management" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="4194304" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="32768" maxNameTableCharCount="2147483647" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
    <client>
      <endpoint address="net.tcp://servername:9010/Management/service/ManagementService" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_Management" contract="Namespace2.IserviceContract" name="NetTcpBinding_IserviceContract" />
    </client>
  </system.serviceModel> 
```

我们还尝试重新启动 IIS 和应用程序池。仍然得到同样的例外。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T14:17:25.630

尝试在您的 web.config 中搜索使用该 Web 地址作为 ManagementService 的另一个。此外，在 web.config 中搜索对旧命名空间 (contract="Namespace1.IserviceContract") 的任何引用。不要忘记检查额外的 .config 文件。那个小问题以前让我很生气。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T20:32:07.607

无论调用什么协议，如基本、net.tcp 或 wshttp，该地址都应该在 web 配置文件中从app.config 文件中的**客户端**部分删除其他地址，在我的情况下，我将服务称为**htp://machinename:700 /test.svc**但在客户端部分有带有 net.tcp 和 wshttp 配置的地址，删除了这些地址，问题已为我解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:45:34.950

请右键单击您的 wcf 服务的 svc 文件，然后单击查看标记。

然后也在那里修改命名空间。那么它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T19:17:11.460

如果您的 web.config 中的所有内容似乎都是正确的，则此错误可能是由同一服务器上的另一个应用程序引起的。我花了几天时间来解决一个类似的问题。

在我的例子中，环境有大量的 WCF 服务作为 Web 应用程序部署在 IIS 中的单个网站下，如下所示。

```
/Root Website
    /Service1
    /Service2
    /Service3
    /ServiceX 
```

其中一项子服务被错误地部署到根网站物理文件夹，而不是它自己的物理文件夹。这个糟糕的部署包含所有服务通用的客户端端点定义，并导致所有子服务中断。显然，父网站和子 Web 应用程序不能使用相同的客户端端点。

从根网站中删除客户端端点为我解决了这个问题。

# c++ - 如何在 C++ 运行时获取给定元素的模板类型？

> ID：11370340
> 
> 赞同：6
> 
> 时间：2012-07-06T22:14:04.263
> 
> 标签：c++, templates, polymorphism

我正在设计一个简单的`Array`类，它能够保存任何类型的对象，比如可以在一个对象中保存多种类型数据的向量。（这是出于学习目的。）

我有一个名为的空基类`Container`：

```
class Container {}; 
```

和一个名为的模板化子类`Object`：

```
template <class T>
class Object : public Container {
    T& object;
public:
    Object(T& obj = nullptr) : object(obj) {}
}; 
```

我有一个`Array`类，它包含一个`vector`指向`Container`s 的指针，我用它来保存`Object`s：

```
class Array {
    std::vector<Container *> vec;
public:
    template <class T>
    void add_element(const T&);
    auto get_element(int);
}; 
```

`add_element`将元素存储到`Object`s 中并将它们放入`vec`：

```
template <class T>
void Array::add_element(const T& element)
{
    vec.push_back(new Object<T>(element));
} 
```

`get_element`从中删除元素`Object`并将其传递回调用者。这就是我的问题所在。为了从 中删除元素`Object`，我需要知道`Object`它是什么类型：

```
auto Array::get_element(int i)
{
    return (Object</* ??? */> *)vec[i])->object;
} 
```

有什么方法可以让我找出我存储的对象类型吗？

**编辑：**既然人们声称这是不可能的，那么这个怎么样。是否有某种方法可以在类中实际存储类型信息？（我知道你可以在 ruby​​ 中做到这一点）。如果我能做到这一点，我可以将返回类型存储`get_element`在 each 中`Object`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:52:25.673

我正在为您的`get_element`.

```
template <class T>
T& Array::get_element(int i, T &t)
{
    Object<T> *o = dynamic_cast<Object<T> *>(vec[i]);
    if (o == 0) throw std::invalid_argument;
    return t = o->object;
}

Array arr;
double f;
int c;

arr.get_element(0, f);
arr.get_element(1, c); 
```

但或者，你可以使用这个：

```
template <class T>
T& Array::get_element(int i)
{
    Object<T> *o = dynamic_cast<Object<T> *>(vec[i]);
    if (o == 0) throw std::invalid_argument;
    return o->object;
}

f = arr.get_element<double>(0);
c = arr.get_element<int>(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:19:10.347

函数 like 的返回类型`Array::get_element`必须在编译时确定。由于类`Array`在编译时不知道它存储什么类型的容器，唯一的选择是只返回基`Container*`指针。然后该代码的用户可以使用虚函数和/或`dynamic_cast`处理那些通用容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:20:01.673

dynamic_cast<>()，当用于指针时，可用于检查强制转换是否实际可行，因为当类型不匹配时它返回 NULL。

但是，您可能需要重新考虑您的设置；如果可以避免动态转换，您不会想要使用它，并且具有级联“如果 object-is-type1 则执行此操作；否则如果 object-is-type2 则执行此操作；否则如果 object-is-type3 ......”几乎总是一个糟糕设计的明确标志。

在你的 get_element 中使用 auto 可能是你解决你不知道类型是什么问题的诀窍——不过，这不起作用。编译器仍然必须知道返回类型；它不能在运行时改变。

编辑：您也可以退后一步，问自己是否真的需要一个可以存储“任何东西”的数组。我已经使用 Objective-C 很长时间了，它基本上是围绕着这样一个想法构建的：一切都只是一个“对象”，人们可以在任何东西上调用任何东西，这一切都是在运行时整理出来的。但是，我发现它的实际用途很少见……特别是对于容器，我发现我使用的每个 NSArray 都只有一种类型的对象，或者可能是公共基类的对象，但实际上并不是不同的、不相关的类.

# c# - 无法加载文件或程序集...尝试加载格式不正确的程序 (System.BadImageFormatException)

> ID：11370344
> 
> 赞同：479
> 
> 时间：2012-07-06T22:14:38.380
> 
> 标签：c#, exception, console-application, badimageformatexception

我有两个项目，`ProjectA`和`ProjectB`. `ProjectB`是一个控制台应用程序，它依赖于`ProjectA`. 昨天，一切正常，但今天当我跑步时突然发现`ProjectB`：

> **BadImageFormatException 未处理**：
> 无法加载文件或程序集“ProjectA，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

两者都只是常规项目，不依赖于任何其他非 .Net 项目。两者都是完全的 .Net - 没有本机代码，也没有 P/Invoke。我还有其他项目依赖`ProjectA`并且仍然可以正常工作。

我尝试过的事情：

*   确保两个项目都设置为“任何 CPU”，并选中*构建*复选框。他们是。
*   确保两个项目都用于相同的目标框架*（.Net 4.0 客户端配置文件）*。
*   在 ProjectB --> References --> ProjectA --> Properties 下，确保*“Copy Local”*设置为*“True”* _ *（我验证 ProjectA.dll 被正确复制）*
*   清理/重建解决方案。我什至尝试手动删除两个项目中的 /bin 和 /obj 文件夹。
*   重新启动 Visual Studio。重新启动我的电脑。
*   查看存储库的全新副本。

但我仍然得到同样的错误。我不知道我做了什么导致这个，也不知道如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：747
> 
> 时间：2012-07-07T01:47:49.527

我很确定您遇到了 32 位/64 位冲突。听起来您的主项目可能设置为 32 位，而其引用的类设置为 64 位。尝试查看[这个 SO question](https://stackoverflow.com/questions/8996653/troubleshooting-badimageformatexception)和[this one](https://stackoverflow.com/questions/4340362/system-badimageformatexception-an-attempt-was-made-to-load-a-program-with-an-inc)。在他们两个之间，你应该能够找出你的问题。

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2013-12-11T17:00:50.310

在服务器上部署后，您的网站可能会遇到问题。

然后您需要调整您的应用程序池以**启用 32 位应用程序**。

### 脚步

1.  打开 IIS 管理器
2.  单击应用程序池
3.  选择您正在使用的任何应用程序池
4.  在右窗格中，单击高级设置...

5.  将启用 32 位应用程序设置为 True

    [![高级设置](../Images/849445b75c98c37c2dd06b9f75ca524a.png)](https://i.stack.imgur.com/NPaHW.png) [![启用 32 位](../Images/e922b2de71a8337ac8dc8e7d0eb07dda.png)](https://i.stack.imgur.com/zJj4b.png)

* * *

## 回答 #3

> 赞同：165
> 
> 时间：2016-06-06T20:09:37.820

我刚刚在 Visual Studio 2015 中运行 IIS Express 时收到此错误消息。在我的情况下，我需要运行 64 位版本的 IIS Express：

> 工具 → 选项 → 项目和解决方案 → Web 项目
> 选中“为网站和项目使用 64 位版本的 IIS Express”复选框。

截屏：

[![Web 项目的 VS 选项的屏幕截图。](../Images/93824b6e8ac30b967cd920090e856802.png)](https://i.stack.imgur.com/1EG2c.png)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-04-18T16:23:37.090

我有同样的问题。我已将项目 A 的“平台目标”（“项目 A”（右键单击）-> 属性-> 构建->“平台目标”）设置为 x86，但将项目 B 保持在“任何 CPU”。将项目 B 设置为“x86”解决了这个问题。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-01-30T22:01:47.467

我在 Visual Studio 2015 中运行单元测试（xunit）时遇到了这个问题，并遇到了以下修复：

```
Menu Bar -> Test -> Test Settings -> Default Processor Architecture -> X64 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-12-06T16:31:06.657

如果您的项目中至少有 1 个 32 位 dll\exe，您可能需要在 IIS7 中将应用程序**池设置“启用 32 位应用程序”更改为 TRUE。**

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-03-02T06:18:02.623

首先，我在 VS2017 中通过一个旧项目得到了这个，我需要对所有项目进行*微小*的更改并将所有项目升级到框架 4.7。

* * *

其他几个人提到选择`Any CPU`可以解决这个问题。

您需要在几个地方执行此操作，而且可能不仅仅是从下拉列表中选择那么简单。这为我修复了它：

1）你需要在这里做这两个：

[![在此处输入图像描述](../Images/19b77e5939b9d0f5ac52a088201c30d2.png)](https://i.stack.imgur.com/M0uoe.png)

2）还有`Configuration Manager`（右键单击解决方案）

[![在此处输入图像描述](../Images/9312a91e4b6139e7dc96cebdcafa5abb.png)](https://i.stack.imgur.com/ytrVE.png)

但是，如果它不存在呢？？？

然后单击`New`并选择这些设置：（[感谢@RckLN](https://stackoverflow.com/a/18019303/16940)）

[![在此处输入图像描述](../Images/fd847203a955fefe55cc90a9358e71bc.png)](https://i.stack.imgur.com/yetiy.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-01-02T11:37:41.660

以下为我解决了这个问题，取消选中 'Prefer 32-bit' ： [![在此处输入图像描述](../Images/944b66eda2751a87ffb0e3360c6b07b2.png)](https://i.stack.imgur.com/oD44Q.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-08-07T01:24:37.470

我在同一个解决方案中的多个项目中遇到了同样的问题，我最终将所有目标框架设置为目标 CPU 的 .NET Framework 4 和 x86，并最终成功编译。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-06-29T04:55:08.183

这些解决方案都不适合我——但是通过删除 bin 和 obj 文件夹的内容，一切都变得很酷了。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-15T10:50:04.260

`Visual Studio Build`我在通过 Visual Studio Online (VSTS) Build using Steps构建项目时得到了这个。

解决方案是：

*   删除现有的源文件夹
*   在平台中为所有 Visual Studio 构建（包括依赖项）显式设置“任何 CPU”（参见下面的屏幕截图）。
*   重新运行构建

[![VSO 截图](../Images/06765dc1984d54f68ca45b6bc67e1ec1.png)](https://i.stack.imgur.com/8qqWz.png)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-12-11T10:43:44.610

Chilkat .NET 4.5 程序集要求在运行应用程序的任何计算机上安装 VC++ 2012 或 2013 运行时。大多数计算机已经安装了它。您的开发计算机将拥有它，因为已经安装了 Visual Studio。但是，如果部署到所需的 VC++ 运行时不可用的计算机上，则会出现上述错误：

安装所有的波纹管包

**适用于 Visual Studio 2013 的 Visual C++ 可再发行包 - vcredist_x64**

**适用于 Visual Studio 2013 的 Visual C++ 可再发行包 - vcredist_x86**

**适用于 Visual Studio 2012 的 Visual C++ 可再发行包 - vcredist_x64**

**适用于 Visual Studio 2012 的 Visual C++ 可再发行包 - vcredist_x86**

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-10-14T16:31:40.537

如果您尝试在 VS 中使用 MSI 安装程序打包 64 位项目，您也可能会看到此问题。（“原因是与 .msi 文件一起打包的本机 shim 是 32 位可执行文件。”）

有关更多详细信息，请参见此处：http: [//blogs.msdn.com/b/heaths/archive/2006/02/01/64-bit-managed-custom-actions-with-visual-studio.aspx](http://blogs.msdn.com/b/heaths/archive/2006/02/01/64-bit-managed-custom-actions-with-visual-studio.aspx)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-06-01T17:57:17.537

对于较新版本的visual studio（此答案为v16.10），可以通过手动更改解决方案平台来修复。对我来说，它在从“任何 CPU”更改为“x86”后工作。

1.  单击解决方案平台下拉列表，其中任何 CPU 都出现在下图中。 [![在此处输入图像描述](../Images/12948093612ef3734e2136825063b4cb.png)](https://i.stack.imgur.com/3b5vX.png)

2.  转到配置管理器。

    [![在此处输入图像描述](../Images/04efd2522ce4f04cb8a28859115aa8bd.png)](https://i.stack.imgur.com/TrI4u.png)

3.  单击新建并根据适合您的方式添加平台 x86 或 x64（32 或 64 位）。 [![在此处输入图像描述](../Images/c0904a8227f8c14ee5b606f911e1c00a.png)](https://i.stack.imgur.com/hGPf3.png)

4.  重新启动项目。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-11-09T10:22:01.717

我也有这个问题。如前所述，该问题与 32 位/64 位冲突有关，但与托管在 Azure 中的站点有关。若要更改 Azure 应用服务中的平台，请转到配置 -> 常规设置。 [![在此处输入图像描述](../Images/ef4de18977dcdef922b44a907756caf3.png)](https://i.stack.imgur.com/jBG0u.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-08T15:41:47.243

我遇到了同样的问题。它突然出现，这对我来说似乎很奇怪。

在异常快照中，对于 FusionLog，我在其消息中看到以下内容：

... C:\Windows\Microsoft.NET\Framework64 ...

有关融合日志的更多信息：http: [//msdn.microsoft.com/en-us/library/e74a18c4 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx)

所有项目的目标 CPU 为 AnyCPU。我将应用程序项目（引用所有其他项目的项目）更改为 x86 的目标 CPU。现在可以了。

不确定目标 CPU 是如何无缘无故发生混淆的，但确实如此。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-09-11T10:12:14.527

我在一个项目中也遇到过这个问题，几分钟后我找到了解决方案，这个问题是由于 CPU 配置造成的，如果您使用的是**Visual Studio 2010 或 VS 2013**，只需转到项目的**属性**，然后从侧栏选择**编译**并且将有 5 个下拉菜单，第 5 个下拉菜单将是**Target CPU:**，您应该根据您的要求将其设置为**x86 或 x64 ，而不是 Any CPU。**

将其更改为x86后，我的问题得到了解决。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-08-30T10:18:38.093

这也可以通过在**app.config**文件中定义**多个受支持的框架并强制应用程序****在与 app.config 文件中第一次提到**的框架不同的 .NET 框架中运行来实现。

 ****当您的系统中同时拥有上述两个框架时，这也会触发。

作为一种解决方法，在 app.config 中调出您将用于调试的目标框架

例如：如果您尝试在 .NET 4 中运行，配置文件应该有类似的内容，

```
<supportedRuntime version="v4.0"/>
<supportedRuntime version="v2.0.50727"/> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-01-03T01:58:16.063

在我的 C# 项目中，项目属性->[Build]->Platform target: Any CPU，并取消选中 Prefer 32-bit 以让编译器自动选择。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-01-31T05:32:25.893

我在 Visual Studio 2017 上使用 ReSharper 运行单元测试时也遇到了这个问题，并使用以下配置修复了它：

[![在此处输入图像描述](../Images/e4550c852cbf042b3b889300423690d0.png)](https://i.stack.imgur.com/ebsH5.gif)

您还可以更改 ReSharper 的运行测试设置： [https ://resharper-support.jetbrains.com/hc/en-us/articles/207242715-How-to-run-MSTest-tests-using-x64-configuration](https://resharper-support.jetbrains.com/hc/en-us/articles/207242715-How-to-run-MSTest-tests-using-x64-configuration)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-03-18T03:37:44.077

射击！我知道这个问题。我以为我做的一切都是正确的，直到我不小心在 VS 输出窗口中看到了“x86”，这就是我找到原因的时候。今天浪费了几分钟。

“发布”窗口下的配置设置为“x86”；而在其他任何地方，它都是“x64”。

请确保它在配置管理器、发布设置、解决方案配置和 IIS 设置（如果那是您的 Web 服务器）之间保持同步。

另外，请记住 - VS 是 32 位应用程序，而 IIS 是 64 位。IIS 中默认禁用 32 位应用程序。

[![在此处输入图像描述](../Images/45d818bc88ae8f17ebc94e6ec08a77d2.png)](https://i.stack.imgur.com/0vXGy.png)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-10-21T18:55:12.763

这可能有点好笑，但我在正常工作代码中遇到了同样的问题。我添加了 StreamWriter 和 StreamReader，它给出了那个错误。解决方案是我将该代码放入注释括号中，然后进行调试，它又开始工作了

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-04-17T08:55:53.830

***如果您像我一样通过 cli .net 集成从您的程序中使用 LibreOffice***，我会遇到同样的错误。我在我的 PC 上的生产环境中使用旧版本的 LibreOffice 我安装了一个有冲突的新版本。**只需卸载 LibreOffice。**我在这里找到了解决方案[.NET CLI：无法加载文件或程序集 'cli_cppuhelper'](https://bugs.documentfoundation.org/show_bug.cgi?id=75206)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-10-31T16:22:12.943

在我的情况下，引发此异常的 dll 中缺少依赖项。我检查了 Dependency Walker，添加了丢失的 dll 并解决了问题。

更具体地说，我不小心添加了 SVN 关键字，以某种方式损坏了我的 opencv_core340.dll，因此我的 dll 无法再使用它。但是我不相信这个问题的解决方案取决于 dll 是否损坏或丢失。我只是为了提供完整的信息而添加它。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-01-30T08:27:04.067

我检测到与其他答案不同的东西。在我的项目中遇到此异常是编译损坏的结果。没有做任何改变，只是**强制重建**，它是固定的。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-03-24T10:08:37.020

我遇到过同样的问题。就我而言，项目 B 是一个 .Net Core 类库，它安装了 Nuget“Microsoft.Management.Infrastructure”。错误是我将我的项目 B 称为“MI”。我将项目名称更改为其他名称，突然一切都恢复了。

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2018-03-27T07:29:16.803

您是否尝试从 cmd 运行 .exe 文件？这是我的错误。只需双击运行 .exe 文件即可。如果它是适用于 Windows 8.1/Windows Server 2012 R2 x64 的 .NET Core SCD。

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2020-07-28T03:21:12.130

在我的情况下，错误是**System.BadImageFormatException: Could not load file or assembly 'vjslib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。**

通过从[这里](https://www.microsoft.com/en-us/download/details.aspx?id=15468)安装 vjredist 64 解决了这个问题。

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2017-01-31T19:45:21.713

我的机器向我显示了 BIOS 更新，我想知道这是否与突然弹出此错误有关。在我进行更新后，错误得到解决并且解决方案构建良好。****

# google-ads-api - Google AdWords 和 google_conversion_value

> ID：11370349
> 
> 赞同：2
> 
> 时间：2012-07-06T22:14:54.087
> 
> 标签：google-ads-api

我有在线商店应用程序，并通过将适当的脚本添加到网络应用程序中，将其与 Google AdWords 集成。

我遇到的问题是，谷歌分析控制面板页面上的值是 0，尽管我确实有转换（多次点击）值为 12。

我集成的代码如下所示：

```
var google_conversion_id = <number is here>;
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "ffffff";
var google_conversion_label = "<label is here>";
var google_conversion_value = <?php echo $charge; ?>; 
```

在我的网上商店付款后，我将这些行（Google AdWords 需要更多的 JS 行）添加到最后一页。

PHP 变量 $charge 具有已售订单的价值。

尽管如此，我的价值仍然是 0。你能帮我看看我做错了什么，我怎样才能得到正确的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:27:22.263

尝试用双引号将 PHP 输出包装起来，如下所示：

```
var google_conversion_value = "<?php echo $charge; ?>"; 
```

使渲染的输出看起来像：

```
var google_conversion_value = "150"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T08:53:43.207

该值可以在引号中也可以不在引号中 - 没关系。

我不是 PHP 方面的专家，但据我所知，它在这里看起来还不错。最简单的检查方法是获取 Google Chrome 的 Google Tag Assistant 扩展程序，它可以让您检查发送回 Google 的值：[https ://chrome.google.com/webstore/detail/tag-assistant- by-google/kejbdjndbnbjgmefkgdddjlbokphdefk?hl=en](https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk?hl=en)

在您的转化代码触发时使用扩展程序可以让您查看实际发回的值，因此您可以确认该值是否设置正确。

如果该值看起来可以正常返回，则最好等待至少 72 小时以验证该值是否出现在 AdWords 中。

# svg - 如何在 processing.js 中旋转 SVG 图像

> ID：11370350
> 
> 赞同：1
> 
> 时间：2012-07-06T22:14:58.740
> 
> 标签：svg, rotation, processing, processing.js

我只是盯着 processing.js ，我一直有麻烦，因为每次我旋转图像时，它也会改变它在屏幕上的位置。所以处理似乎要做的是，围绕我告诉它放置它的点旋转我的图像，而不是先围绕它自己的轴旋转它然后将它放置在我告诉它的位置（我认为不能以这种方式完成/命令）。

这是代码

```
PShape s;
float angle = 0.1; //rads
s = loadShape("sensor.svg");
s.rotate(angle);
//I change this angle manually or with my clickMouse function which isnt shown.

void setup(){
    size(400,350);
frameRate(30); //30 frames per seconds
}

void draw(){ //shape( shape, x, y, width, height);
    smooth();
    fill(153);
    ellipse(200, 350/2, 100, 100);
    shape(s, 200, 350/2, 20, 20);
    ellipse(200, 350/2, 2, 2);
} 
```

我基本上想做的是让这个“传感器”图像围绕我画的圆（椭圆）以正确的方向旋转。这就是想法。它也不做。也许有一个点击功能可以围绕圆圈旋转 SVG 图像。但相反，它围绕 shape(image, x_coord, y_coord, width, height) 函数的坐标旋转。如果有人有任何建议，我会很高兴！希望我的问题是有道理的，如果没有，我将非常乐意澄清它的任何部分。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T15:14:20.797

不旋转形状要容易得多，而是旋转坐标系。

```
void draw() {
  translate(s.width/2,s.height/2);
  rotate(PI/4);
  shape(s);
  resetMatrix();
  // keep on drawing here
} 
```

这首先移动坐标系，使 (0,0) 位于形状中心的顶部，然后将整个坐标系旋转 45 度，然后绘制形状。然后你重置坐标系并像往常一样继续绘图。

# php - 在简单的linkedin php中离线使用oauth_verifier时遇到问题

> ID：11370356
> 
> 赞同：0
> 
> 时间：2012-07-06T22:15:33.450
> 
> 标签：php, oauth, linkedin

免责声明，请原谅语法语法。

我正在使用linkedin 网站上提供的简单linkedin php 库。我已按照他们的指示成功收集了用户 oauth-token 和 oauth-secret。这两条信息已存储在数据库中。我想知道如何进行离线 oauth 通话，但我无法找到有关 oath-verifier 的更多信息。这是我到目前为止的代码。

```
include('../../php/linkedin/linkedin_3.2.0.class.php');
include '../../php/global.settings.php';

  $API_CONFIG = array(
    'appKey'       => LINKEDIN_APP_KEY,
      'appSecret'    => LINKEDIN_APP_SECRET,
      'callbackUrl'  => NULL 
  );
      $linkedin = new LinkedIn($API_CONFIG);
      $linkedin->request_token    =   "4e1e5ede-1de4-4eba-ba33-d3d37cbe67ff -FAKE";
        $linkedin->access_token     = "82b2c333-1075-441b-a51f-657196bf507w -FAKE";
$search_response = $linkedin->search("?company-name=facebook&count=10");
      var_dump($search_response); 
```

暂时我自己插入键试图限制行为。同样，身份验证成功，但我尝试在用户离线时调用用户配置文件失败。我相信这是因为我错过了 oauth-verifier，但我不相信 oauth-verifier 是进行离线调用所必需的。代码几乎没有任何错误（如果可能的话）。我没有调整过linkedin 库，global.settings.php 也没有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:37:11.477

如果您已经存储了用户的访问令牌，那么您需要做的就是将访问令牌输入库并进行调用。从演示文件中，大致如下：

```
$API_CONFIG = array(
  'appKey'       => LINKEDIN_APP_KEY,
  'appSecret'    => LINKEDIN_APP_SECRET,
  'callbackUrl'  => NULL 
);
$linkedin = new LinkedIn($API_CONFIG);
$linkedin->setToken(array(
  'oauth_token' => $token, 
  'oauth_token_secret' => $secret
));
$search_response = $linkedin->search("?company-name=facebook&count=10");
var_dump($search_response); 
```

# html - 在 App Store 网页和 iTunes 应用程序中同时打开 iOS 应用程序的 URL

> ID：11370359
> 
> 赞同：0
> 
> 时间：2012-07-06T22:16:08.507
> 
> 标签：html, ios, url, itunes

在其 App Store 网页以及 iTunes 应用程序（如果在主机设备上可用）中打开 iOS 应用程序的首选 URL 是什么？

我尝试使用 itms:// 协议，但这仅在 iTunes 应用程序中打开应用程序详细信息，因此例如从 Android 或 Windows 手机导航到 URL 时没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:47:57.090

我相信您会想查看浏览器以确定要使用的链接。如果浏览器是 iOS 设备上的 Safari，则给他们 iTunes 协议链接，否则为 http://。

我相信javascript可以让你阅读这样的信息：看看这里：[http ://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:19:28.803

我发现在自动打开主机设备上的 iTunes 应用程序（如果可用）之前打开 iTunes 预览网页的 URL 的行为是由附属链接触发的（在将用户带到预期目的地之前需要跟踪点击）。

# c# - Google plus API 获取 C#.net 库中的活动列表

> ID：11370362
> 
> 赞同：0
> 
> 时间：2012-07-06T22:16:19.440
> 
> 标签：c#, asp.net, .net, google-api, google-plus

我正在使用.net Google Plus API，我想获取指定配置文件（页面/用户..）的活动列表。

我有这个代码，我可以在网上找到它

```
 var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
    provider.ClientIdentifier = GoogleIdentifier;
    provider.ClientSecret = GoogleSecret;
 ActivitiesResource.Collection collection = new ActivitiesResource.Collection();
  var service = new PlusService();
    service.Key = GoogleKey;
    ActivitiesResource.ListRequest list = service.Activities.List(ProfileID, collection);
    ActivityFeed activityFeed = list.Fetch();
    int count = activityFeed.Items.Count; 
```

在这条线上：

```
ActivityFeed activityFeed = list.Fetch(); 
```

我收到以下错误：

```
An item with the same key has already been added. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:17:23.313

请求的密钥无效。只需放置正确的 ClientSecret 和 ClientIdentifier。

# python - 迭代具有某些条件的列表

> ID：11370363
> 
> 赞同：0
> 
> 时间：2012-07-06T22:16:22.047
> 
> 标签：python, python-2.7

我有两个列表，`valid`并且`locations`. `valid`包含由字符串编号表示的 ID，并`location`包含属于它们所遵循的 id 的 id + 字符串（路径）。

我的目标是检查我的 id 是否属于有效组。如果有效 ID 和以下项目为 TRUE，我将调用一些函数。当检测到 INAVLID ID 时，我应该跳过它并将项目移动到下一个 ID。

我的代码是这样的：

```
valid = ['1', '2', '3', '4', '5', '6', '27', '28', '29']
locationList = ['1', '1_path1','1_path2','1_path3','2', '2_path1','2_path2','2_path3', '55','55_path1','55_path2', '3', '3_path1' ]

for item in locationList:
    if len(item)< 3: 
        if item in valid:
            print "###########lib ID found in item %s############" %item
            print "Call to bring file name function - %s" %item
            continue
        else:  
            continue            
    print "call the fix path function - %s" %item
    print "Call the Search file function -%s" %item 
```

我的问题是，在`else:`声明之后我的项目值是`'55'`== 无效。此时我希望将列表中的项目向前移动到 value 是下一个 ID 的位置（在这种情况下`'3'`）。

我目前的输出是：

```
###########lib ID found in item 1############
Call to bring file name function - 1
call the fix path function - 1_path1
Call the Search file function -1_path1
call the fix path function - 1_path2
Call the Search file function -1_path2
call the fix path function - 1_path3
Call the Search file function -1_path3
###########lib ID found in item 2############
Call to bring file name function - 2
call the fix path function - 2_path1
Call the Search file function -2_path1
call the fix path function - 2_path2
Call the Search file function -2_path2
call the fix path function - 2_path3
Call the Search file function -2_path3
call the fix path function - 55_path1
Call the Search file function -55_path1
call the fix path function - 55_path2
Call the Search file function -55_path2
###########lib ID found in item 3############
Call to bring file name function - 3
call the fix path function - 3_path1
Call the Search file function -3_path1 
```

我希望它是：

```
###########lib ID found in item 1############
Call to bring file name function - 1
call the fix path function - 1_path1
Call the Search file function -1_path1
call the fix path function - 1_path2
Call the Search file function -1_path2
call the fix path function - 1_path3
Call the Search file function -1_path3
###########lib ID found in item 2############
Call to bring file name function - 2
call the fix path function - 2_path1
Call the Search file function -2_path1
call the fix path function - 2_path2
Call the Search file function -2_path2
call the fix path function - 2_path3
Call the Search file function -2_path3
###########lib ID found in item 3############
Call to bring file name function - 3
call the fix path function - 3_path1
Call the Search file function -3_path1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:29:23.750

我建议改变你的数据结构，

```
valid = set([1, 2, 3, 4, 5, 6, 27, 28, 29])

locations = [
    (1, ['path1', 'path2', 'path3']),
    (2, ['path1', 'path2']),
    (55, ['path1', 'path2'])
] 
```

然后你的代码变成

```
for i,paths in locations:
    if i in valid:
        for path in paths:
            fix_path(path)
            search_file(path) 
```

做不到，试试

```
valid = ['1', '2', '3', '4', '5', '6', '27', '28', '29']
locationList = ['1', '1_path1','1_path2','1_path3','2', '2_path1','2_path2','2_path3', '55','55_path1','55_path2', '3', '3_path1' ]

for item in locationList:
    item = item.split('_')
    if item[0] in valid:
        if len(item)==1:
            print "###########lib ID found in item %s############" %item
            print "Call to bring file name function - %s" %item
        else:  
            print "call the fix path function - %s" %item
            print "Call the Search file function -%s" %item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:39:30.440

而不是更改您的数据结构（尽管更改`valid`为一个集合是一个好主意）：

```
valid = ['1', '2', '3', '4', '5', '6', '27', '28', '29']
locationList = ['1', '1_path1','1_path2','1_path3','2', '2_path1','2_path2','2_path3', '55','55_path1','55_path2', '3', '3_path1' ]

accept = False
for item in locationList:
    if len(item) < 3:
        accept = item in valid
        if accept:
            print "###########lib ID found in item %s############" % item
            print "Call to bring file name function - %s" % item
    elif accept:
        print "call the fix path function - %s" % item
        print "Call the Search file function -%s" % item 
```

# ember.js - Ember 数据 - 未捕获的类型错误：无法读取未定义的属性“查找”

> ID：11370366
> 
> 赞同：1
> 
> 时间：2012-07-06T22:16:57.630
> 
> 标签：ember.js, ember-data

使用最新的（来自今天的 GitHub）Ember 和 Ember 数据，这段代码给了我一个错误 - Uncaught TypeError: Cannot read property 'find' of undefined at ember-data-latest.js:3170

[http://jsfiddle.net/Bf43W/9/](http://jsfiddle.net/Bf43W/9/)

```
// only needed on JSFiddle; this is to trigger the route
history.pushState("", "", "/projects/1/tasks");

App = Ember.Application.create({});

App.store = DS.Store.extend({
    revision: 4,
    adapter: DS.RESTAdapter.create()
});

App.Project = DS.Model.extend({
    name: DS.attr('string')
});

App.ApplicationController = Ember.ObjectController.extend({
});

App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

App.TasksView = Ember.View.extend({
    templateName: 'tasks'
});

App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        tasks: Ember.Route.extend({
            route: '/projects/:project_id/tasks',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('Tasks');
            }
        })
    })
});

App.router = App.Router.create({
    location: 'history'
});

App.initialize(App.router); 
```

将路由中的 :projects_id 更改为其他内容（例如 1，因此它与 URL 匹配）可以解决此问题，但这当然不是很有用。

任何人都可以阐明这里发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:25:21.053

我遇到过同样的问题。我通过从以下位置获取最新下载而不是编译最新提交来解决它：

[https://github.com/emberjs/data/downloads](https://github.com/emberjs/data/downloads)

这段代码是 3 个月前的，所以我们坚持使用第 4 版，但它很稳定。

# **更新**

在我注意到他们在 Ember-Data 存储库中使用的 Ember 版本比您从 Ember 网站下载的版本更新后，我能够完成这项工作：

```
// Version: v1.0.pre-156-gddcc580
// Last commit: ddcc580 (2012-09-21 09:52:25 -0700) 
```

**对比**

```
// Version: v1.0.pre
// Last commit: 7955b85 (2012-08-03 14:50:17 -0700) 
```

编译最新版本的 Ember-Data 后，进入 dist/modules 以获取他们正在开发的 Ember 版本。

我还必须更改 Store 的初始化方式：

```
App.Store = DS.Store.extend({
  revision: 4,
  adapter: DS.RESTAdapter.create()
}); 
```

**至**

```
App.store = DS.Store.create({
  revision: 6,
  adapter: DS.RESTAdapter.create()
}); 
```

我还不得不删除 App.initialize() 行，因为这个较新版本的 Ember 似乎实例化了自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T22:55:22.387

唯一的错误是您必须将 App.store 大写。您声明了一个类，因此命名约定需要 App.Store，以便让 App 初始化正常进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:50:51.617

遇到同样的问题

就我而言，只是更换

```
App.Store = DS.Store.extend({
...
}) 
```

至

```
App.store = DS.Store.create({
...
}) 
```

解决它。所以我想 Ember.js 版本不是问题。无论如何，感谢您提出如何解决我的麻烦的想法。

# php - PHP：从网络下载文件到本地机器

> ID：11370371
> 
> 赞同：3
> 
> 时间：2012-07-06T22:18:04.013
> 
> 标签：php, file, download

我在网上搜索了2天，找不到答案。

我正在尝试创建一个例程，该例程在我控制的站点上显示文件，并允许用户将选定的文件下载到本地驱动器。

我正在使用下面的代码。当我取消注释回显语句时，它会显示正确的源目录和目标目录、正确的文件大小以及 fclose 后的回显显示 TRUE。

当我回显源文件 ($data) 时，它会显示正确的内容。

$FileName 变量包含正确的文件名，即 .doc/.docx 或 .pdf。我已经测试了两者，都没有将任何内容保存到目标目录或我机器上的任何其他地方。

源路径 ($path) 在登录后面，但我已经登录。

关于为什么无法写入文件的任何想法？

谢谢，汉克

代码：

```
$path = "https://.../Reports/ReportDetails/$FileName";
/* echo "Downloading: $path"; */
$data = file_get_contents($path); /* echo "$data"; */
$dest = "C:\MyScans\\".$FileName; /* echo "<br />$dest"; */
$fp = fopen($dest,'wb');
if ( $fp === FALSE ) echo "<br />Error in fopen";
$result = fwrite($fp,$data);
if ( $result === FALSE ) echo "<br />Can not write to $dest";
/* else echo "<br />$result bytes written"; */
$result = fclose($fp); /* echo "<br />Close: $result"; */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:33:52.850

我认为（！）你有点困惑。

**你提到**

> 允许用户将选定的文件下载到本地驱动器。

但是路径`"C:\MyScans\\".$FileName`是**网络服务器上的**路径，而不是用户自己计算机上的路径。

在您执行任何操作以从远程网站检索所需文件后：

1.  从中创建一个文件并使用以下命令将用户重定向到该文件`header('Location: /path/to/file.txt');`

2.  插入以下标题：

    `header('Content-disposition: attachment; filename=path/to/file.txt');`

**它强制用户下载文件。这可能就是你想要做的**

**注意：**我使用了扩展名`txt`，但你可以使用任何扩展名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:25:15.687

你可以使用 php 卷曲：

```
<?php
    $url  = 'http://www.example.com/a-large-file.zip';
    $path = '/path/to/a-large-file.zip';

    $fp = fopen($path, 'w');

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FILE, $fp);

    $data = curl_exec($ch);

    curl_close($ch);
    fclose($fp); 
```

# jquery - li 元素悬停事件并显示子菜单？

> ID：11370373
> 
> 赞同：0
> 
> 时间：2012-07-06T22:18:10.737
> 
> 标签：jquery, html, menu, submenu

html代码

```
<ul class="menu">
<li>deneme</li>
<li>deneme
    <ul>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
    </ul>
</li>
<li>deneme
    <ul>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
    </ul>
</li>
<li>deneme</li>
<li>deneme</li>
<li>deneme
    <ul>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
        <li>alt menu</li>
    </ul>
</li>
<li>deneme</li>
</ul>​ 
```

javascript:

```
$(document).ready(function(){
    $("ul.menu > li").css("color","red");
    $("li ul li").css("color","blue")
    $("li ul li").hide();
    $("ul.menu li").hover(
        function() {
            $("li ul li").show();
        },
        function() {
            $("li ul li").hide();
        }
    );
});​ 
```

我的问题是，我想用悬停事件显示当前的子菜单项。但是此代码显示所有子菜单。我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:22:11.183

为悬停处理程序中的元素选择提供上下文。

试试这个：

```
$(document).ready(function() {

    $("ul.menu > li").css("color", "red");
    $("li ul li").css("color", "blue")
    $("li ul li").hide();
    $("ul.menu li").hover(

    function() {
        $("ul li", this).show();
    }, function() {
        $("ul li", this).hide();
    }

    );

});​ 
```

工作示例：http: [//jsfiddle.net/eygsY/22/](http://jsfiddle.net/eygsY/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:22:15.343

[http://jsfiddle.net/eygsY/24/](http://jsfiddle.net/eygsY/24/)

为您的选择器提供上下文（仅在下面搜索`this`，而不是整个文档）：

```
function() {
    $("ul li", this).show();
}, function() {
    $("ul li", this).hide();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:22:16.320

您应该接受用户悬停在`this`您`LI`的悬停，并找到其中的`li`s 并显示它们。如下所示（[jsFiddle](http://jsfiddle.net/3vsQt/1/)）：

```
$(document).ready(function(){

  $("ul.menu > li").css("color","red");
  $("li ul li").css("color","blue")
  $("li ul li").hide();
  $("ul.menu li").hover(
    function() {
        $(this).find("li").show();
    },
    function() {
        $(this).find("li").hide();
    }
  );
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T22:28:29.180

这里有一些可以帮助你的东西

```
 $(document).ready(function(){

$("ul.menu > li").css("color","red");
 $("li ul li").css("color","blue")
$("li ul li").hide();
$("ul.menu li").hover(
    function() {
    $(this).find("li").slideDown('slow');
    },
    function() {
    $(this).find("li").slideUp('slow');
    }

);

});​ 
```

# javascript - 为什么 popstate 在 Firefox 中不触发

> ID：11370374
> 
> 赞同：1
> 
> 时间：2012-07-06T22:18:14.617
> 
> 标签：javascript, html, firefox, browser-history

我有这个 html 页面。在 chrome 上，如果我在 Button2 中单击几次，然后单击导航器后退按钮

```
<html>
<head>
<script>

function button_onclick(){
    var stateObj = { foo: "bar" };
    history.pushState(stateObj, "page 2", "bar.html");
}

function onPopState(){
    console.log("location: " + document.location + ", state: " + JSON.stringify(event.state));
}

window.addEventListener('popstate', onPopState, false);

</script>
</head>

<body>

<button type="button" onclick="button_onclick()">Button 2</button>

</body>

</html> 
```

我可以在控制台中看到：

```
location: http://somedomain:8080/examples/bar.html, state: {"foo":"bar"} 
```

如果我尝试使用 Firefox，我什么也看不到？我用 Firefow 13.0.1 测试过，如果我想使用 html5 历史 API 管理历史，这很烦人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:36:34.030

在另一个问题上找到并帮助了我：

> 单击链接时不应调用 popstate 。当用户使用后退/前进按钮导航时调用它。
> 
> 一切都在按应有的方式工作。

# java - 当它在 SGBD 中完全映射时，我应该在休眠中映射级联操作吗？

> ID：11370379
> 
> 赞同：0
> 
> 时间：2012-07-06T22:19:01.123
> 
> 标签：java, mysql, hibernate, foreign-keys, cascade

我已经在 MySQL 中定义了所有外键和级联操作，我应该也映射到休眠对象中还是让 MySQL 单独处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:09:58.387

如果您要在数据库中定义它们，那么在您的 Hibernate 对象上定义它们实际上只会生成额外的删除语句，而这些语句实际上是不必要的。

就我个人而言，我认为在数据库中进行级联删除可能非常难以使用，因为您的数据库具有更多应用程序的*智能*。我更喜欢在代码中而不是在数据库中定义这些类型的业务规则，因为它将所有持久性信息保存在一个地方。我认为这与为什么许多人不喜欢 DB 触发器类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:29:39.160

您可以在休眠中定义，但这不是必需的。

您必须使用映射来定义休眠中的关系，即以下方式之一：一对多 2\. 一对一 3\. 多对一 4\. 多对多

hibernate 将处理所有其他事情。

使用 hibernate.cfg.xml 文件进行配置。

# scroll - 使用鼠标移动水平滚动页面

> ID：11370380
> 
> 赞同：0
> 
> 时间：2012-07-06T22:19:04.587
> 
> 标签：scroll

我在这里有一个简单的图像列表，这些图像在页面右侧水平浮动。

[http://www.ttmt.org.uk/forum/gallery/](http://www.ttmt.org.uk/forum/gallery/)

我可以通过鼠标左右滚动来查看图像。

如何通过左右移动鼠标而不滚动来滚动页面。

所以画廊位置将由鼠标在页面上的位置决定。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        ul#gallery {
            margin:100px 0 0 0;

            float:left;
            height:500px;
            margin-right:-20000px;
        }
        ul#gallery li{
          display:inline;
        }
        ul#gallery li img{
          float:left;
          height:100%;
        }
        #header{
          position:fixed;
          margin:20px 0 0 20px;
        }
        #header img,
        #header ul#info{
          float:left;
        }
        #header ul#info{
          margin:5px 0 0 50px;
        }
        #header ul#info li{
          color:#aaa;
          font:.95em/1.5em Helvetica, sans-serif;
        }
        #header ul#info li a{
          color:#aaa;
          text-decoration:none;
        }
        #header ul#info li a:hover{
          color:#333;
        }
        #header select{
          margin:20px 0 0 50px;
        }
        #lightbox {
                position:fixed; 
                top:0; 
                left:0; 
                width:100%; 
                height:100%; 
                background:url(overlay.png) repeat; 
                text-align:center;
            }
            #lightbox p {
                text-align:right; 
                color:#fff; 
                margin-right:20px; 
                font-size:12px; 
            }
            #lightbox img {
                box-shadow:0 0 15px #111;
                -webkit-box-shadow:0 0 15px #111;
                -moz-box-shadow:0 0 15px #111;
                max-width:940px;
            }
            #content img{
              height:90%;
              max-width:100%;
            }
      </style>

      </head>

    <body>

      <ul id="gallery">
        <li><a href="images/01.jpg" class="lightbox_trigger"><img src="images/01.jpg" /></a></li>
        <li><a href="images/02.jpg" class="lightbox_trigger"><img src="images/02.jpg" /></a></li>
        <li><a href="images/03.jpg" class="lightbox_trigger"><img src="images/03.jpg" /></a></li>
        <li><a href="images/04.jpg" class="lightbox_trigger"><img src="images/04.jpg" /></a></li>
        <li><a href="images/05.jpg" class="lightbox_trigger"><img src="images/05.jpg" /></a></li>
        <li><a href="images/06.jpg" class="lightbox_trigger"><img src="images/06.jpg" /></a></li>
        <li><a href="images/07.jpg" class="lightbox_trigger"><img src="images/07.jpg" /></a></li>
        <li><a href="images/08.jpg" class="lightbox_trigger"><img src="images/08.jpg" /></a></li>
        <li><a href="images/09.jpg" class="lightbox_trigger"><img src="images/09.jpg" /></a></li>
        <li><a href="images/10.jpg" class="lightbox_trigger"><img src="images/10.jpg" /></a></li>
        <li><a href="images/11.jpg" class="lightbox_trigger"><img src="images/11.jpg" /></a></li>
        <li><a href="images/12.jpg" class="lightbox_trigger"><img src="images/12.jpg" /></a></li>
        <li><a href="images/13.jpg" class="lightbox_trigger"><img src="images/13.jpg" /></a></li>
        <li><a href="images/14.jpg" class="lightbox_trigger"><img src="images/14.jpg" /></a></li>
        <li><a href="images/15.jpg" class="lightbox_trigger"><img src="images/15.jpg" /></a></li>
      </ul>

    <script>
      jQuery(document).ready(function($) {

        $('.lightbox_trigger').click(function(e) {

            e.preventDefault();

            var image_href = $(this).attr("href");

            if ($('#lightbox').length > 0) { // #lightbox exists

                $('#content').html('<img src="' + image_href + '" />');

                //$('#lightbox').show();

                $('#lightbox').fadeIn('2000');
            }

            else { 

                var lightbox = 
                '<div id="lightbox">' +
                    '<p>Click to close</p>' +
                    '<div id="content">' + 
                        '<img src="' + image_href +'" />' +
                    '</div>' +  
                '</div>';

                $('body').append(lightbox);
            }

        });

        $('#lightbox').live('click', function() { 
            $('#lightbox').hide();
        });

      });
      </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T11:22:04.293

这里有一个简单的纯 javascript dom 操作解决方案：http: [//jsfiddle.net/zTGS9/4/](http://jsfiddle.net/zTGS9/4/)

```
 var _lis = document.getElementsByTagName('li');
    for (var i = 0; i < _lis.length; ++i) {
        _lis[i].addEventListener('mousedown', function(e) {
            if (e.clientX < (this.offsetWidth >> 1)) {
                this.appendChild(this.removeChild(this.firstElementChild));
            } else {
                this.insertBefore(this.lastElementChild, this.firstElementChild);
               }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:29:47.787

[您可以在此处](http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/)查看解决方案。

# android - 如何在 Ubuntu 上模拟 iOS、Windows Phone 和黑莓

> ID：11370390
> 
> 赞同：1
> 
> 时间：2012-07-06T22:20:04.933
> 
> 标签：android, ios, gwt, blackberry, cordova

我计划使用 GWT 和 PhoneGap 为 Android、iOS、Windows Phone 和 Blackberry 制作原生应用程序。

我对纯Android开发*隐约*熟悉（我已经下载了SDK等），并且了解SDK带有自己的Dalvik Emulator。

但在粗略检查了 iOS 和 Blackberry SDK 之后，看起来他们没有任何可以移植到 Ubuntu 桌面的模拟器。

我想要的是这样一种情况，我通过 GWT 和 PhoneGap 在我的 Ubuntu 笔记本电脑上开发这些原生应用程序，当 PhoneGap 包装每个最终交付并生成正确的二进制文件（APK、IPA 等）时，我可以将其放入正确的模拟器并查看它的实际效果。

据我所知这是不可能的，所以我在这里有什么选择吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:26:20.403

iPhone 开发需要一台运行 Mac OS X 的计算机。但是，您似乎可以在 Linux 下使用[monotouch](http://xamarin.com/monotouch/)为 iPhone 开发。但是，它不在 iPhone 的本机代码中（目标 C），因此无法保证性能。

Wine 仍然无法运行这么多应用程序，所以我怀疑它是否可以运行 Visual Studio。[这是](http://appdb.winehq.org/objectManager.php?sClass=version&iId=20359)一个声称它不能的链接，除非您执行一些黑客步骤。但是，Visual Studio 有另一种方法可以创建 C# 应用程序 (Mono)，因此它可能是可能的。

黑莓应该支持 Java 和 C++，所以在 Ubuntu 上开发它是可能的。

# php - 表单的 $.post 错误

> ID：11370391
> 
> 赞同：0
> 
> 时间：2012-07-06T22:20:05.240
> 
> 标签：php, jquery, html

我正在尝试使用 JQuery 将表单提交到 PHP 页面。但是当我尝试从 Chrome 运行脚本时出现以下错误：

```
 Uncaught SyntaxError: Unexpected token ;       jquery-latest.js;614 
```

第 614 行是 GlobalEval 函数的一部分。

```
globalEval: function( data ) {
    if ( data && rnotwhite.test( data ) ) {
        // We use execScript on Internet Explorer
        // We use an anonymous function so that context is window
        // rather than jQuery in Firefox
        ( window.execScript || function( data ) {
            window[ "eval" ].call( window, data );
// **** Uncaught SyntaxError: Unexpected token ; **** //
        } )( data );
    }
}, 
```

这是我的表单和 JQuery 提交的代码。

```
<div class="container create-event">
  <form name="new-event" method="post" id="new-event">
    Name of the event: <input type="text" name="event-name"></br>
    Date of the event: <input type="date" name="date"></br>
    Location of the event: <input type="text" name="location"></br>
    Description: <textarea cols="50" rows="5" name="description"></textarea></br>
    <a href="#" id="event-submit" class="button red">Submit</a>
    <script type="text/javascript">
      $('#new-event').submit(function() {
        $.post(
          'post-event.php',
          $(this).serialize(),
          function(data){
            $('#results').html(data);
          }
        );
        return false;
      });
      $('#event-submit').click(
        $(this).parents('form:first').submit();
      );
    </script>
  </form>
  <div id="results"></div>
</div> 
```

然后我的'post-event.php'脚本是这样的：

```
<?php
echo "Hello";
?> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T22:31:26.027

```
$('#event-submit').click(
    $(this).parents('form:first').submit();
 ); 
```

将点击功能更改为下面的代码后，它对我有用。

```
$('#event-submit').click(function(){
    $(this).parents('form:first').submit();
}); 
```

您缺少 function() 参考。

# url-rewriting - Amazon Route 53 设置和 301 重定向设置

> ID：11370393
> 
> 赞同：9
> 
> 时间：2012-07-06T22:20:25.163
> 
> 标签：url-rewriting, amazon-web-services, iis-7.5, http-redirect, amazon-route53

我已经在 Amazon EC2 服务器上设置了我的站点。我正在使用 Route 53，当我在 Godaddy 上设置它们时，服务器 DNS 已经正确传播。我有几个问题。在最终结果中，我想让 301 重定向从 WWW 到 NON-www（从 www.domain.com 到 domain.com）。我希望该重定向适用于所有路径（即 www.domain.com/folder/ 到 domain.com/folder）。

在我当前的配置中，我为 domain.com 设置了一条记录，以指向我为我的服务器分配的弹性 IP 地址。当我将 domain.com（不带 www）放在 URL 中时，它运行良好并且网站加载。我还将 www.domain.com 设置为 A 记录以指向相同的 IP 地址。

在 IIS7.5 中，我设置了一个重定向规则（在我安装了“URL Rewrite”IIS 模块之后。

这是规则：

```
Request URL: Matches the Pattern
Using: Wildcards
Pattern: (.*)
Logical grouping: Match All
Input {HTTP_HOST}
Type: Matches the PAttern
Pattern: www\.mydomainname.com\.com
Action Type: Redirect
Redirect URL: mydomainname.com{R:1}
Redirect Type: 301 
```

当我使用“www”运行我的网站时，它会返回 www.mydomain.com/mydomain.commydomain.commydomain.com 等...

我不知道问题出在 URL 重写、Route 53 设置还是两者兼而有之。我想正确设置 Route 53 和重定向规则，以便我的网站将所有 www 请求重定向到非 www URL。此外，我想知道在 Route 53 中为 www 和主域使用 A 记录是否是一个好习惯。

**更新：**我删除了重写规则，它仍然返回那个长网址。

**update2：**我为 www 创建了一个 CNAME 并将其指向 EC2 服务器的公共 DNS，并且 www 现在可以工作。但我仍然需要 www 到非 www 重定向规则。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-03T08:17:51.987

我认为您可以使用 S3 静态网站托管做您想做的事。您可以将 www.domain.com 指向一个具有全面重定向规则的空 S3 存储桶：http: [//docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html)

作为额外的奖励，它将减轻您的 EC2 实例的负载。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-10T16:24:07.380

在 Route53 中，您可以设置一个 PTR(Pointer) Record 从`www.yoursite.com`到`yoursite.com`。这就是我用来设置从`mydomain.com`到重定向的方法`www.mydomain.com`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T21:26:09.570

我们还使用了 WWWizer，它只是一项免费服务，它返回所有流量，并在裸域前面附加 www。设置@记录指向174.129.25.170，设置www cname或* cname指向负载均衡器/弹性IP域。

# ajax - $.ajaxSetup 用于 Ajax.BeginForm

> ID：11370394
> 
> 赞同：5
> 
> 时间：2012-07-06T22:20:32.637
> 
> 标签：ajax, asp.net-mvc-3, ajax.beginform

$.ajaxSetup 用于 jquery 中的 ajax 调用。如果我们使用 jquery ajax，这工作得很好。

但在 MVC 中，我们使用 Ajax.BeginForm()。回调处理程序是 OnFailure、OnSuccess、OnBegin。

有没有一种方法可以将 $.ajaxSetup 用于 Ajax.BeginForm()。

**更新**

例如，我在 10 个地方使用了 Ajax.BeginForm()，但我不想为所有人编写 OnFailure 处理程序，我只想在 jquery $.ajaxSetup 之类的普通地方编写一个常见的 OnFailure。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:48:12.273

从以下文档中引用[`$.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)：

> 注意：全局回调函数应该使用它们各自的全局 Ajax 事件处理程序方法进行设置 - .ajaxStart()、.ajaxStop()、.ajaxComplete()、.ajaxError()、.ajaxSuccess()、.ajaxSend() - 而不是在内部$.ajaxSetup() 的选项对象。

因此，按照建议，使用相应的[全局 AJAX 事件处理程序](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)，例如，[`.ajaxError()`](http://api.jquery.com/ajaxError/)如果您想全局处理所有 AJAX 错误：

```
$(document).ajaxError(function () {
    console.log('oopsy');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T04:46:28.030

我正在审查微软的代码和库，以便与 ajax 进行通信是**jquery.unobtusive-ajax.js**，在该文件中，他们重写了发出请求的主要功能，只有一些选项。但是如果他们使用 jquery 为什么他们需要修改呢？当然，有了这个代码，所有的全局 hadlers 都关闭了。

我做了一点修改并不酷但有效，有更多时间我会用更清洁的解决方案更新它。

打开文件**jquery.unobtusive-ajax.js**。

转到函数 asyncRequest 并在 $.extend 选项中看到四个事件**beforeSend、完成、成功和错误，**您可以在那里引发全局触发器。

原始代码：

```
complete: function () {
            loading.hide(duration);
            getFunction(element.getAttribute("data-ajax-complete"), ["xhr", "status"]).apply(this, arguments);
        }, 
```

修改后的代码：

```
complete: function () {
            loading.hide(duration);
            getFunction(element.getAttribute("data-ajax-complete"), ["xhr", "status"]).apply(this, arguments);
            $(document).trigger('ajaxComplete');
        }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:30:49.757

您应该考虑使用 ajax 选项：

定义：

```
@{
 AjaxOptions ajaxOpts = new AjaxOptions
 {
    LoadingElementDuration = 2,
    LoadingElementId = "someElementIdToShowLoading",
    UpdateTargetId = "ElementIdToLoadTo"
 };
} 
```

用过的：

```
@using (Ajax.BeginForm("ActionName", ajaxOpts)){} 
```

有关完整列表，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions_properties.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions_properties.aspx)

# c++ - Qt 是否有办法将字节转换为 int，反之亦然？

> ID：11370396
> 
> 赞同：7
> 
> 时间：2012-07-06T22:20:40.277
> 
> 标签：c++, qt

我正在尝试找到一个 Qt 函数，该函数可以将字节转换为 int，其字节顺序与我在下面使用的相同。我觉得我肯定在这里重新发明了轮子，并且 Qt 库中必须有一些东西可以做到这一点。它存在吗？

```
// TODO: qt must have a built in way of converting bytes to int.
int IpcReader::bytesToInt(const char *buffer, int size)
{
    if (size == 2) {
        return
            (((unsigned char)buffer[0]) << 8) +
              (unsigned char)buffer[1];
    }
    else if (size == 4) {
        return
            (((unsigned char)buffer[0]) << 24) +
            (((unsigned char)buffer[1]) << 16) +
            (((unsigned char)buffer[2]) << 8) +
              (unsigned char)buffer[3];
    }
    else {
        // TODO: other sizes, if needed.
        return 0;
    }
}

// TODO: qt must have a built in way of converting int to bytes.
void IpcClient::intToBytes(int value, char *buffer, int size)
{
    if (size == 2) {
        buffer[0] = (value >> 8) & 0xff;
        buffer[1] = value & 0xff;
    }
    else {
        // TODO: other sizes, if needed.
    }
} 
```

编辑：数据*总是*大端（不管是什么操作系统），所以例如 101 是 [0, 0, 0, 101] 而 78000 是 [0, 1, 48, 176]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-19T14:02:28.603

以下功能似乎符合您的需求：

*   [qFromBigEndian()](http://doc.qt.io/qt-5/qtendian.html#qFromBigEndian)

*   [qToBigEndian()](http://doc.qt.io/qt-5/qtendian.html#qToBigEndian)

从 ： `#include <QtEndian>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T01:04:02.743

您的代码非常简单易懂，但您可以像这样使用 Qt 的 QByteArray（注意：我没有尝试编译它）：

```
int IpcReader::bytesToInt(const char *buffer, int size)
{
  QByteArray b(buffer, size);
  return b.toInt();
}

void IpcClient::intToBytes(int value, char *buffer, int size)
{
  QByteArray b = QByteArray::number(value);
  strncpy(buffer, (const char*)b, size);
} 
```

请注意，字节顺序将与运行它的机器相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T23:09:41.023

不是[`QByteArray`](http://qt-project.org/doc/qt-4.8/QByteArray.html)一个[`QDataStream`](http://qt-project.org/doc/qt-4.8/qdatastream.html)足够的吗？

```
int IpcReader::bytesToInt(const char *buffer, int size)
{
    QByteArray byteArr(buffer,size);
    QDataStream ds(&byteArr,QIODevice::ReadOnly);

    if(little_endian_usage) // little endian check or something similar here
         ds.setByteOrder(QDataStream::LittleEndian);
    else
         ds.setByteOrder(QDataStream::BigEndian);

    int ret;
    if(size == 2){
        qint16 tmp;
        ds >> tmp;
        ret = tmp;
    } else if(size == 4){
        qint32 tmp;
        ds >> tmp;
        ret = tmp;
    } else if(size == 1){
        qint8 tmp;
        ds >> tmp;
        ret = tmp;
    }
    return ret;
} 
```

如果您不想创建缓冲数据的副本，您可以使用`QByteArray byteArr =`[`QByteArray::fromRawData(buffer, size)`](http://qt-project.org/doc/qt-4.8/qbytearray.html#fromRawData). 您还可以使用 a`QDataStream`将 int 写回 a`QByteArray`或原始缓冲区（`QByteArray::fromRawData()`用于后者）。

# git - git p4 从裸存储库提交？

> ID：11370398
> 
> 赞同：3
> 
> 时间：2012-07-06T22:21:15.993
> 
> 标签：git, perforce, git-p4

我们有一些开发人员推送到服务器上的远程裸仓库，并且想做一些事情，比如使用来自这个中央裸仓库的 git p4 自动推送以每晚执行一次。但是我遇到了一个障碍，因为您似乎无法在工作树之外运行 git p4 submit 。

处理这种情况的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:50:24.137

我对每隔几分钟运行一次并在 git 和 p4 之间进行双向同步的脚本执行类似操作。但是如果没有检出的 git 树和 p4 存储库，git-p4 就无法工作。总之，你最终得到了 3 个版本的源代码：

1.  裸露的 git 仓库
2.  为“git p4”签出 git repo 以完成其工作
3.  p4 结帐从提交到 p4。

开发人员使用一个名为“dev”的分支推送到一个裸 git repo（保存在 gitolite 上）。然后每隔几分钟，就会有一个脚本执行以下操作：

1.  更新签出的 git 树（git pull --rebase）
2.  将最新的上游 p4 更改下拉到 p4/master (git p4 sync)
3.  rebase git world 对 p4 世界 (git rebase p4/master)
4.  将 git 更改发送到 p4（git p4 提交）
5.  重写'dev'分支（git push origin +HEAD:dev）

陷阱

1.  合并冲突。这些实际上很少发生，但可能会导致一些问题。

2.  我必须在整个事情上添加一些锁定，以便开发人员在 (1) 和 (5) 之间进行更改时不会丢失更改。锁定只是创建一个锁定目录，然后在其中一个钩子脚本中使用它来延迟推送。

3.  RCS 关键字。'git p4' 的较新版本现在可以处理 RCS 关键字，但最初它没有，所以整个事情偶尔会卡住，因为它们会导致合并冲突。

设置需要一段时间，但现在已经使用了 18 个月，有 100 多名开发人员，几乎没有发生任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:09:01.840

不使用 git-p4 可能是最简单的，而只是签出 git 树，这也是一个强制签出，然后从那里编写所有脚本？即做一个git pull，解析输出以编辑适当的文件，添加新的，删除删除的，然后提交到perforce？

# objective-c - Restkit 对象映射给出空对象

> ID：11370399
> 
> 赞同：2
> 
> 时间：2012-07-06T22:21:19.520
> 
> 标签：objective-c, ios, restkit

我有一个实体 (on `Core Data`) `Contact`，每个联系人都有一个`Neighborhood`,`User`和`ContactOrigin`与之相关的实体。当我从服务器检索 JSON 数据时，我得到如下信息：

```
{
  "contact" : [
    {
      "prospect" : {
        "pkProspect" : 21,
        "name" : "Test Contact",
        "email" : "test@domain.com",
        "phone" : "5555555555",
        "address" : "Test Avenue",
        "media" : {
          "pkMedia" : 3,
          "name" : "Referência Entrevista You Move"
        },
        "neighborhood" : {
          "pkNeighborhood" : 15857,
          "name" : "Donwtown"
        }
      },
      "user" : {
        "firstName" : "John",
        "pkPerson" : 5,
        "lastName" : "Doe"
      }
    }
  ]
} 
```

如您所见，我有一个联系人数组，每个联系人都有一个用户节点、一个邻域节点和一个媒体节点（我将其用作数据库的来源）。RestKit 似乎用这段代码正确地映射了这个：

```
// Getting the object manager.
RKObjectManager *objectManager = [RKObjectManager sharedManager];

// Relationship mappings.    
RKManagedObjectMapping *neighborhoodMapping = [RKManagedObjectMapping mappingForClass:[Neighborhood class] inManagedObjectStore:objectManager.objectStore];
neighborhoodMapping.primaryKeyAttribute = @"identifier";
[neighborhoodMapping mapKeyPath:@"pkNeighborhood" toAttribute:@"identifier"];

RKManagedObjectMapping *originMapping = [RKManagedObjectMapping mappingForClass:[ContactOrigin class] inManagedObjectStore:objectManager.objectStore];
originMapping.primaryKeyAttribute = @"identifier";
[originMapping mapKeyPath:@"pkMedia" toAttribute:@"identifier"];

RKManagedObjectMapping *userMapping = [RKManagedObjectMapping mappingForClass:[User class] inManagedObjectStore:objectManager.objectStore];
userMapping.primaryKeyAttribute = @"identifier";
[userMapping mapKeyPath:@"pkPerson" toAttribute:@"identifier"];

// Creating the contact mapping for the request.
RKManagedObjectMapping *contactMapping = [RKManagedObjectMapping mappingForClass:[Contact class] inManagedObjectStore:objectManager.objectStore];
contactMapping.primaryKeyAttribute = kContactFieldNameId;

[contactMapping mapKeyPath:@"prospect.neighborhood" toRelationship:@"addressNeighborhood" withMapping:neighborhoodMapping];
[contactMapping mapKeyPath:@"prospect.media" toRelationship:@"origin" withMapping:originMapping];
[contactMapping mapKeyPath:@"user" toRelationship:@"user" withMapping:userMapping];

[contactMapping connectRelationship:@"addressNeighborhood" withObjectForPrimaryKeyAttribute:@"identifier"];
[contactMapping connectRelationship:@"origin" withObjectForPrimaryKeyAttribute:@"identifier"];
[contactMapping connectRelationship:@"user" withObjectForPrimaryKeyAttribute:@"identifier"];

[contactMapping mapKeyPath:@"prospect.pkProspect" toAttribute:@"identifier"];
[contactMapping mapKeyPath:@"prospect.name" toAttribute:@"name"];
[contactMapping mapKeyPath:@"prospect.email" toAttribute:@"email"];
[contactMapping mapKeyPath:@"prospect.phone" toAttribute:@"phone"];
[contactMapping mapKeyPath:@"prospect.address" toAttribute:@"address"];

// Setting the result mapping.
[objectManager.mappingProvider setObjectMapping:contactMapping forKeyPath:@"contact"];
// Loading data.
[objectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
    loader.delegate = self;
    loader.userData = delegate;
}]; 
```

映射完成后，我收到以下消息（我只显示`User`错误）：

```
2012-07-06 18:20:23.016 Contact Manager[8254:10c03] E restkit.core_data:RKManagedObjectStore.m:250 Core Data Save Error
                               NSLocalizedDescription:      The operation couldn’t be completed. (Cocoa error 1570.)
                               NSValidationErrorKey:            user
                               NSValidationErrorPredicate:  (null)
                               NSValidationErrorObject:
<Contact: 0x917dff0> (entity: Contact; id: 0x917e070 <x-coredata:///Contact/t9D9EE4AE-142A-45EC-88C1-E97833729D0C2> ; data: {
    address = "Test Avenue";
    addressNeighborhood = "0x918b5b0 <x-coredata://6E5AB6F3-AFF4-460E-A37D-285A105178F0/Neighborhood/p21>";
    email = "test@domain.com";
    identifier = 21;
    name = "Test Contact";
    origin = nil;
    phone = 5555555555;
    user = nil;
})
2012-07-06 18:20:23.024 Contact Manager[8254:10c03] E restkit.core_data:RKManagedObjectLoader.m:167 Failed to save managed object context after mapping completed: The operation couldn’t be completed. (Cocoa error 1560.) 
```

如您所见，两者`origin`和`user`都是空的，当我尝试保存它时会导致错误，`Core Data`因为这些字段是必需的，但是如果我们查看来自 RestKit 的日志，我们会看到这些对象已被正确解析实际上它们存在于数据库中。

```
2012-07-06 18:20:22.938 Contact Manager[8254:10c03] D restkit.object_mapping:RKObjectMappingOperation.m:636 Starting mapping operation...
2012-07-06 18:20:22.940 Contact Manager[8254:10c03] T restkit.object_mapping:RKObjectMappingOperation.m:637 Performing mapping operation: RKObjectMappingOperation for 'User' object. Mapping values from object {
    firstName = John;
    lastName = Doe;
    pkPerson = 5;
} to object <User: 0x5ca9d60> (entity: User; id: 0xc5aa7a0 <x-coredata://6E5AB6F3-AFF4-460E-A37D-285A105178F0/User/p1> ; data: {
    contacts = "<relationship fault: 0xc5ab580 'contacts'>";
    email = "john@domain.com";
    identifier = 5;
    ip = "0.0.0.0";
    isLoggedIn = 1;
    language = "en";
    name = "John Doe";
    password = 4badaee57fed5610012a296273158f5f;
}) with object mapping <RKManagedObjectMapping:0x5ca78b0 objectClass=User keyPath mappings => (
    "RKObjectKeyPathMapping: pkPerson => identifier"
)>
2012-07-06 18:20:22.942 Contact Manager[8254:10c03] T restkit.object_mapping:RKObjectMappingOperation.m:330 Mapping attribute value keyPath 'pkPerson' to 'identifier'
2012-07-06 18:20:22.943 Contact Manager[8254:10c03] D restkit.object_mapping:RKObjectPropertyInspector.m:107 Cached property names and types for Class 'User': {
    accessibilityHint = NSString;
    accessibilityLabel = NSString;
    accessibilityLanguage = NSString;
    accessibilityValue = NSString;
    contacts = NSSet;
    email = NSString;
    identifier = NSNumber;
    ip = NSString;
    isLoggedIn = NSNumber;
    language = NSString;
    name = NSString;
    password = NSString;
}
2012-07-06 18:20:22.944 Contact Manager[8254:10c03] T restkit.object_mapping:RKObjectMappingOperation.m:347 Skipped mapping of attribute value from keyPath 'pkPerson to keyPath 'identifier' -- value is unchanged (5)
2012-07-06 18:20:22.946 Contact Manager[8254:10c03] D restkit.object_mapping:RKObjectMappingOperation.m:643 Finished mapping operation successfully...
2012-07-06 18:20:22.966 Contact Manager[8254:10c03] T restkit.object_mapping:RKObjectMappingOperation.m:597 Mapped relationship object from keyPath 'user' to 'user'. Value: <User: 0x5ca9d60> (entity: User; id: 0xc5aa7a0 <x-coredata://6E5AB6F3-AFF4-460E-A37D-285A105178F0/User/p1> ; data: {
    contacts = "<relationship fault: 0xc5ab580 'contacts'>";
    email = "john@domain.com";
    identifier = 5;
    ip = "0.0.0.0";
    isLoggedIn = 1;
    language = "pt_BR";
    name = "John Doe";
    password = 4badaee57fed5610012a296273158f5f;
})
2012-07-06 18:20:22.968 Contact Manager[8254:10c03] D restkit.object_mapping:RKObjectMappingOperation.m:643 Finished mapping operation successfully... 
```

所以，我的问题是，如果解析器在数据库中找到这些对象，为什么`user`并且`origin`为空？映射有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:49:47.193

经过大量调试，我找到了修复它的方法。首先，我`@"identifier"`对每个对象都使用相同的主键 ( ) 的事实弄乱了映射。

在那之后，我删除了，`[contactMapping connectRelationship:withObjectForPrimaryKeyAttribute:]`因为它不需要，现在一切似乎都在工作。

# mysql - 在windows上安装mysqld服务时出错

> ID：11370414
> 
> 赞同：1
> 
> 时间：2012-07-06T22:22:21.820
> 
> 标签：mysql

我使用以下命令从 Windows 控制台启动 mysqld：

> "c:\program files\mysql\mysql server 5.5\bin\mysqld" --install MySQL --defaults-file=c:\program files\mysql\mysql server 5.5\my.ini

服务中止。日志文件显示：

[错误] c:\program files\mysql\mysql server 5.5\bin\mysqld: 未知选项 '--install'

可能是什么错误？

[编辑] 好的语法是：

> "c:\program files\mysql\mysql server 5.5\bin\mysqld" --install MySQL --defaults-file="c:\program files\mysql\mysql server 5.5\my.ini"

官方文档是错误的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-17T13:08:53.800

我的问题是使用 Powershell。所以对我来说修复很简单，使用 CMD。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T22:37:43.810

尝试将选项指定为：

```
--install=MySQL 
```

# c# - 如何检查字符串是否会触发“检测到潜在危险的 Request.Form 值...”错误

> ID：11370415
> 
> 赞同：7
> 
> 时间：2012-07-06T22:22:22.647
> 
> 标签：c#, asp.net, .net, validation

与[这个问题](https://stackoverflow.com/questions/2760574/list-of-input-values-which-will-cause-the-a-potentially-dangerous-request-form)类似，但我不太关心哪些字符会/不会导致错误触发。我很好奇我可以调用什么方法来检查自己，如果当前字符串会触发上述错误消息。

为了提供一些背景知识，当用户忘记密码并需要重置时，我正在创建随机密码。`&#`不幸的是，随机密码生成器最近“不小心”在其中创建了一个。当用户尝试使用它登录时，这会导致页面中断。

正如围绕该主题的大量帖子中所提到的，`ValidateRequest=false`（或`<httpRuntime requestValidationMode="2.0" />`对于 .NET 4.0）可用于关闭 .NET 检查这些漏洞，但当我是一个首先创建字符串。`<`并且简单地告诉随机生成器在不完整的列表（ ,等）上重新随机化`&#`似乎不是最干净的解决方案，所以我想使用相同的方法来检查 .NET 正在使用的方法。

[微软在此处](http://msdn.microsoft.com/en-us/library/w1sw53ds.aspx)解释了哪些漏洞存在问题以及正在采取哪些措施来防范它们。

[这家伙](http://msdn.microsoft.com/en-us/library/ms972967.aspx)谈到`IsDangerousString`在用反射器挖掘后找到一个调用的函数，但我找不到这个函数来使用它。他还指的是 .NET 1.1，而我正在使用 .NET 3.5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T00:52:01.563

验证请求的 ASP.NET 类是`System.Web.CrossSiteScriptingValidation`，而您想要的方法是`IsDangerousString`。不幸的是，两者都标记为`internal`，因此您无法直接访问它们。你有几个选择：

**选项 1：**`IsDangerousString`通过反射调用。但是，Microsoft 可以随时更改方法，这会破坏您的应用程序。

**选项2：**反编译`IsDangerousString`并将其复制到您自己的应用程序中。请参阅下面的代码。

**选项 3：**调用[`Membership.GeneratePassword`](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)。这将返回一个保证通过请求验证的密码。

ASP.NET 类的摘录`CrossSiteScriptingValidation`（通过 .NET Reflector）：

```
private static char[] startingChars = new char[] { '<', '&' };

internal static bool IsDangerousString(string s, out int matchIndex)
{
    matchIndex = 0;
    int startIndex = 0;
    while (true)
    {
        int num2 = s.IndexOfAny(startingChars, startIndex);
        if (num2 < 0)
        {
            return false;
        }
        if (num2 == (s.Length - 1))
        {
            return false;
        }
        matchIndex = num2;
        char ch = s[num2];
        if (ch != '&')
        {
            if ((ch == '<') && ((IsAtoZ(s[num2 + 1]) || (s[num2 + 1] == '!')) || ((s[num2 + 1] == '/') || (s[num2 + 1] == '?'))))
            {
                return true;
            }
        }
        else if (s[num2 + 1] == '#')
        {
            return true;
        }
        startIndex = num2 + 1;
    }
}

private static bool IsAtoZ(char c)
{
    return (((c >= 'a') && (c <= 'z')) || ((c >= 'A') && (c <= 'Z')));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-28T13:10:55.420

Javascript 函数基于@Michael Liu 的回答中的选项 2：

```
function isDangerousString(s) { return s.match(/<[a-zA-Z!/?]|&#/) !== null; } 
```

# c# - 需要更好的“回调调度程序”组件设计

> ID：11370416
> 
> 赞同：5
> 
> 时间：2012-07-06T22:22:24.723
> 
> 标签：c#, algorithm

我从客户端应用程序向远程队列发送请求/事务（包含要执行的操作（和参数）+ transactionID）。远程服务器在某个时间点将请求出列并需要一些时间来处理它。

一旦完成处理，它会在客户端队列上发送一个响应（包含应用响应 + 事务 ID）......所以这是一种完全“断开连接”的通信模式，客户端可以将响应映射到请求是通过 transactionID。

消息响应在客户端出列，并与原始请求匹配（基于 transactionID）。

我现在正在做的是，当客户端将请求发布到服务器队列时，它会向保留 transactionId 和回调（委托）的字典添加回调。这是一个`Dictionary<int, object>`将 transactionId 映射回回调以调用操作结果。

回调/委托被存储为对象，因为根据请求，回调委托签名是不同的（例如，一个响应可能返回 a`List<string>`而另一个响应可能返回一个`int`）。

当客户端队列出列响应时，它知道响应的类型（以及相应的回调签名），因此它根据 transactionID 从字典中获取回调。然后它将对象转换回相应的委托类型并调用回调。

我发现这种方法不是很“性感”，但我并没有真正看到执行此类任务的另一种方法。

有没有更好的方法来执行此操作？

如果问题不够清楚，请告诉我，并通过一些编辑来澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:49:26.090

您可能会发现 Reactive Extensions 是一种用于此类消息传递的便捷工具。

首先，让你的所有响应都实现一些接口或基类，比如 IMessage。每种响应都应该封装在一个单独的类中，就像这里

```
public interface IMessage
{
    int TransactionId { get; }
}

public class UserListMessage : IMessage
{
    int TransactionId { get; set; }
    public List<string> Users { get; set; }
} 
```

然后让你的消息队列实现`IObservable<IMessage>`。反应式扩展提供了一个现成的实现，称为`Subject<T>`，您可能想要包装它或其他东西。

Observable 实现了`Subscribe(IObserver<IMessage> observer)`一种将观察者存储在内部列表中某处的方法。当一个新的响应到达时`OnNext(IMessage message)`，每个订阅的观察者都会调用一个方法。

最后，您的响应处理注册代码可能如下所示：

```
var subscription = myQueue
    .OfType<UserListMessage>()
    .Where(msg => msg.TransactionId == id)
    .Subscribe(callback); 
```

这将为具有给定事务 ID 的 UserListMessage 类型的消息注册回调。可能您还想在某个地方取消订阅。那将是：

```
subscription.Dispose(); 
```

这是一个简短的示例，使用 Rx 会是什么样子。现在去找一些更详细的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:28:23.983

您可以在客户端创建一个枚举，定义您可以获得的所有可能响应类型。然后，您可以编写一个包含大“选择案例”的函数，将枚举的每个值与其特定的函数调用相关联。然后，您可以通过字典将 transactionID 与枚举的值相关联，以识别您将从服务器获得的响应类型。

根据您需要在每种类型的响应上实现的功能类型，也许您可​​以找到一种更“面向对象”的做事方式......也许您可以创建一个基类 ResponseAction，使用通用的 Respond 方法，并且然后你可以从这个类继承你可以获得的每个可能的响应类型，然后当你调用服务器时，你实例化正确的 Response_Specific_Action 类，并将这个实例放在字典中......然后在每个响应上你将使用您的字典找到正确的实例，并调用相同的标准 Respond 方法，它将使用它的 Response_Specific_Action “特定”实现。

如果您选择 ResponseAction 类路由，您还可以考虑将 transactionID 作为基类的属性包含在内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:37:32.170

你的情况对我来说不是很清楚。首先，您没有提到您在客户端服务器事务期间使用哪种通信机制？你在使用 WCF 和它的回调通道吗？

为什么不将所有请求响应消息包装在具有所有事务的一些公共数据的基类下？

你很难过你正在为你的字典使用列表，因为响应因事务而异，但又为什么反对？为所有响应消息制定共同合同不是更好吗？请告诉我们更多有关您的客户端和服务器之间的通信流程的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T23:23:22.550

这听起来完全像适配器模式问题。有关适配器的详细概述，请参阅[此链接](http://www.netobjectivestest.com/PatternRepository/index.php?title=TheAdapterPattern)。

您需要做的是创建一个抽象来封装整个客户端响应（包括您对它所做的任何事情`List<string>`）`int`。您的抽象需要足够广泛的范围，以便您的不同行为都可以被相同的签名覆盖。像这样的东西：

```
public abstract class MessageCompleteHandler
{
    public abstract void Execute();
}

//name this one better, just an example :)
public class ListOfStringHandler : MessageCompleteHandler
{
    public override void Execute()
    {
        //get list of strings
        // do something with it
    }
}

public class MessageCompleteHandlerFactory
{
    public MessageCompleteHandler GetHandler(int transactionId)
    {
        //this replaces/uses your dictionary to match handlers with types.
    }
} 
```

然后，当您获得响应时，您使用事务 ID 创建适当的处理程序对象并运行它。当然，如果您的处理程序变体的数量相当少，这种方法效果最好。

# asp.net - VB.Net IIf函数中添加SqlParameter

> ID：11370417
> 
> 赞同：4
> 
> 时间：2012-07-06T22:22:35.297
> 
> 标签：asp.net, vb.net, sqlparameter

我正在重写这个长 INSERT 语句和参数，它看起来像这样：

```
 cmd.Parameters.AddWithValue("@Website", General.fnSQLNullValues(tWebsite.Text)) 
```

General.fnSQLNullValues 是这样的：

```
 Public Shared Function fnSQLNullValues(ByVal sValue As Object, Optional ByVal Len As Integer = 999999) As Object
            If sValue Is Nothing Then Return DBNull.Value
            fnSQLNullValues = IIf(sValue.ToString.Length = 0, DBNull.Value, Left(sValue.ToString(), Len))
        End Function 
```

我根本不喜欢这个，而且似乎需要很多代码才能做到这一点，

```
 cmd.Parameters.AddWithValue("@Website" , If(tWebsite.Text , DBNull.Value)) 
```

据我了解，如果 tWebsite.Text 为 null 或不被接受，那一行代码 DBNull.Value 将替换 tWebsite.Text 作为值，在我看来，它与一般的其他函数做同样的事情。这是正确的吗？一种方法比另一种更好吗？

另外，我从第二种方式收到警告：“无法推断通用类型；假定对象”，但在我看来，第一种方式无论如何都是使用通用对象，所以我不知道我是否应该忽略这个警告

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T22:34:15.670

在代码中使用数据库参数时，字符串有点棘手。如果您有一个空字符串，它将传递一个空字符串值进行插入。但是，如果您将字符串设置为 Nothing 值，它将在数据库中插入一个 NULL 值。否则它将设置一个空字符串。

理想情况下，您应该在数据层之上有某种业务层，它将检查您的 tWebsite.Text 值，并将 Nothing 或 Text 值传递给设置参数的函数。这与您上面的第一个代码示例略有不同。这样，您的数据层只需执行以下命令：

```
cmd.Parameters.AddWithValue("@Website" , valueWebsite)) 
```

......没有麻烦是必要的。

对于其他数据类型（例如整数、小数等），请查看[Nullable Types](http://msdn.microsoft.com/en-us/library/ms235245.aspx)并使用它们。它们使事情变得非常容易使用。默认情况下，它们初始化为 Nothing，因此如果您不为它分配一个值（从您的输入框中），该值将保持为 Nothing，并且会在数据库中执行正确的 NULL 插入。

# javascript - 滚动“touchmove”是不稳定的

> ID：11370418
> 
> 赞同：2
> 
> 时间：2012-07-06T22:22:38.027
> 
> 标签：javascript, css, mobile-website

我想在移动设备上“定位：固定”（我有一个 Android 设备）——这不存在。
我通过创建两个 div 来伪造它，它们的高度总和为屏幕的高度（使用 JS）并将`touch`侦听器添加到底部 div。这些事件将调整 scrollTop 值。这是旧的“touchScroll.js”的副本。

滚动成功，我什至增加了吊索的感觉。但是，与操作系统滚动窗口视图时相比，整个滚动非常不稳定。

我读过随机的地方，在这里的某个地方添加`-webkit-backface-visibility:hidden;`和`-webkit-transform:translate3d(0,0,0);`css 位来解决这个问题。我在 div 本身，在身体上，只有背面部分，只有变换等......所有排列......没有任何帮助。印章仍然存在，技巧阻止我的键盘出现在`input`s

我试图在我的滚动中创建一个内部 div，而不是调整`scrollTop`值，我只是通过制作它`position:absolute`并调整它来移动内部 div `top`。这没什么区别。

有没有什么办法可以打爆？
示例在这里：http: [//mobile.phantasyrpg.com/so-example](http://mobile.phantasyrpg.com/so-example)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:49:43.503

不幸的是，可能没有解决方案，Android 浏览器以其糟糕的渲染性能而闻名。不同的 Android 版本/设备/浏览器组合会表现出不同的性能和兼容性，事实上，您的示例在我的 Android 4.0.4 Chrome 上运行非常流畅，但在工厂浏览器上甚至无法运行。

作为一般规则，始终尝试使用 CSS 转换，并且只能在其他属性（如 scrollTop）之后使用，因为转换通常是硬件加速的。（就像在 iOS Mobile Safari 和现代 Android 浏览器中一样）。

我建议您尝试最新版本的[TouchScroll](https://github.com/davidaurelio/TouchScroll/)或[iScroll](http://cubiq.org/iscroll)，因为它们都使用 CSS 转换，并且可能还包含其他优化。

该`-webkit-transform:translate3d(0,0,0);`设置通常用于强制硬件加速，并且应该用于正在更改/移动的元素（在您的情况下为内容 div）。但是，如果您使用新版本的滚动库，它们`-webkit-transform`无论如何都会覆盖属性。`-webkit-backface-visibility`仅当也应用于元素时才适用，`-webkit-transform`将其设置为`hidden`可能会解决不需要的闪烁或在某些情况下可能会提供性能增益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:05:37.590

```
-webkit-overflow-scrolling: touch; 
```

应该让事情变得更顺利。不确定它是否适用于较旧的 Android

# sql - Postgres 使用主键索引作为覆盖索引

> ID：11370420
> 
> 赞同：1
> 
> 时间：2012-07-06T22:22:57.553
> 
> 标签：sql, sql-server, postgresql, indexing

我想知道，在 Postgres 中，将额外字段搭载到为主键隐式创建的索引中是否有任何缺点，以便不必创建更多索引。

这是在 SQL Server 中创建聚集索引的常用技术。

**编辑**

关于 Postgres 索引的好[文章。](https://devcenter.heroku.com/articles/postgresql-indexes)似乎 Postgres 索引动态与 SQL 服务器不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T22:38:04.450

不，这是不可能的。

PostgreSQL 不能在不使它们在索引中“活动”的情况下“包含”列。

目前 PostgreSQL 不支持仅索引扫描。不过，这将包含在即将发布的 9.2 版本中。

但是，将不需要的列添加到索引可能会对更新造成性能损失，因为非索引列的更新效率比索引列高得多。

# sql - Postgres：在列上选择 Distinct 不会使用 Joins 返回不同的结果

> ID：11370422
> 
> 赞同：1
> 
> 时间：2012-07-06T22:23:01.827
> 
> 标签：sql, postgresql, join

我正在构建一个系统，其中有以下表格：

*   歌曲
*   播送
*   车站
*   跟随
*   用户

用户关注电台，这些电台通过广播播放歌曲。

我正在根据用户关注的电台为用户构建歌曲“提要”。

这是查询：

```
SELECT DISTINCT ON ("broadcasts"."created_at", "songs"."id") songs.*
FROM "songs"
INNER JOIN "broadcasts" ON "songs"."shared_id" = "broadcasts"."song_id"
INNER JOIN "stations" ON "broadcasts"."station_id" = "stations"."id"
INNER JOIN "follows" ON "stations"."id" = "follows"."station_id"
WHERE "follows"."user_id" = 2
ORDER BY broadcasts.created_at desc
LIMIT 18 
```

正如您在此处看到的，我收到重复的歌曲，这是因为我正在关注两个都播放同一首歌曲的电台：

![sql在加入时无法正常工作](../Images/1dcea01eb9a2f3c4693cd7620060e728.png)

注意：shared_id 与 id 相同。

我的问题是：**如何修改此查询，使其仅根据其 id（或 shared_id）返回唯一歌曲？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T00:49:09.107

`"broadcasts"."created_at"`从谓词中删除，`DISTINCT`因为它返回非唯一值，因此重复`songs`。如果您需要使用此信息进行排序，请创建一个新问题。

# symfony - Symfony/Doctrine：addJoinedEntityResult 如何处理一对多关系？

> ID：11370429
> 
> 赞同：6
> 
> 时间：2012-07-06T22:24:13.090
> 
> 标签：symfony, doctrine, native

我有以下问题。我想这是误解。但是在谷歌搜索了几个小时没有找到解决方案后，我把它贴在这里。

我在 Doctrine 中有一个本地查询：

```
$rsm = new ResultSetMapping;
        $rsm->addEntityResult('Acme\CommentBundle\Entity\Comment', 'c');
        $rsm->addFieldResult('c', 'comment_id', 'id');
        $rsm->addFieldResult('c', 'slug', 'slug');
        $rsm->addFieldResult('c', 'comment', 'comment');
        $rsm->addFieldResult('c', 'created', 'created');
        $rsm->addJoinedEntityResult('Acme\AccountBundle\Entity\Worker', 'w', 'c', 'komments');
        $rsm->addFieldResult('w', 'worker_id', 'id');
        $rsm->addFieldResult('w', 'worker_name', 'name');
        $rsm->addJoinedEntityResult('Acme\CommentBundle\Entity\Document', 'd', 'c', 'documents');
        $rsm->addFieldResult('d', 'document_id', 'id');
        $rsm->addFieldResult('d', 'document_name', 'name');

        return $this->getEntityManager()
            ->createNativeQuery('SELECT t.id, c.id AS comment_id, c.slug, c.created, c.comment, c.worker_id AS comment_worker_id, c.created AS comment_created, d.id AS document_id, d.name AS document_name, w.id AS worker_id, w.name AS worker_name
            FROM comment_thread t
            INNER JOIN project p ON p.comment_thread_id = t.id
            LEFT JOIN comment c ON t.id = c.thread_id
            INNER JOIN worker w ON c.worker_id = w.id
            LEFT JOIN comment_document d ON c.id = d.comment_id
            WHERE p.id = :project_id
            ORDER BY c.created ASC', $rsm)
            ->setParameter('project_id', $ 
```

不幸的是，第一个 addJoinedEntityResult (Worker) 不起作用。如果我删除它，剩下的 addJoinedEntityResult (Document) 就完美了。

我猜这是因为文档链接到评论。所以评论是文档的“父”。对于 Worker，反之亦然： Comment 是 Worker 的“子”，而不是 Document 的“父”。

换句话说： - 一个工人可以有多个评论 - 一个评论可以有多个文档

我的结果集应该以 Comment 为基础，与 (one) worker 和 (0 .. n) 文档相关联。

但是我如何在我的 Doctrine Result Mapping 中建立这种关系呢？

任何帮助表示赞赏:-)

尼基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-07T09:58:54.287

我的建议是，当您附加第二个实体时，映射器会重写“名称”字段。有相同的情况并通过重命名表和实体映射和实体类中的字段来修复它，因此不同的实体/表没有相同的名称属性/列。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-17T07:08:27.677

我看不到你的实体，所以我不确定这是否有帮助，但看起来你有一个错字：

```
$rsm->addJoinedEntityResult('Acme\AccountBundle\Entity\Worker', 'w', 'c', 'komments'); 
```

也许应该是

```
$rsm->addJoinedEntityResult('Acme\AccountBundle\Entity\Worker', 'w', 'c', 'comments'); 
```

（对*评论的**评论*）

# asp.net - ASP GridView 通过分页更改

> ID：11370430
> 
> 赞同：0
> 
> 时间：2012-07-06T22:24:32.110
> 
> 标签：asp.net, gridview, pagination

这是我的场景。

我在网页上显示的 ASP GridView 中有一个结果集。GridView 显示在屏幕上，供需要查看信息的团队查看。

但是，有很多行要显示，所以我启用了自动分页以将结果保留在每个页面上......有没有办法通过分页自动更改？

谢谢

代码：

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub GridView2_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles GridView2.SelectedIndexChanged

    End Sub

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;/* y
        GridView1.DataSource = SqlDataSource1
        GridView1.DataBind();
    } 

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:52:10.843

您想在用户更改页面时更新网格数据吗？如果是这样，这样的事情应该可以工作：

将此添加到网格中：

```
onpageindexchanged="GridView1_PageIndexChanged" 
```

这就是后面的代码：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridView1.DataSource = /* your data source */
        GridView1.DataBind();
    } 
```

# python - Appengine 查询偏移量 - 不适用于分页 - 使用 Memcache 编辑？

> ID：11370433
> 
> 赞同：1
> 
> 时间：2012-07-06T22:24:48.763
> 
> 标签：python, google-app-engine, google-cloud-datastore, python-2.7

我有一个应用程序，其中有一个我的用户将浏览的项目列表。我已经通过索引字段处理了分页（无论如何我都需要它来处理其他事情，所以我想为什么不这样做）。

我的问题是我想实现一个“goto”功能；用户可以直接跳到一个项目，而不是使用提供的导航按钮（下一个和上一个）翻阅它们。例如，他们可以在“goto”框中输入 1000 并显示第 1000 个项目。第 n 个项目与其索引之间存在脱节 - 索引保证是有序的，但不保证是连续的，所以我不能只按索引过滤。我考虑过使用 的`offset`参数`fetch`，但我记得当我第一次开始使用 appengine 编程时，由于性能问题，我被告知不要使用它。

`offset`去这里是最好的方式，还是有更好的方式？此外，与它相关的成本仅仅是获得结果需要更长的时间，还是会计入我的数据存储读取/小型操作？

**编辑：**我的意思不是坏话，而是为了避免那些会告诉我使用光标的人...... :-) 我处理分页的方式对我来说比我会使用更有用游标。预先感谢您的关心。此外，我想我会在代码中说明我想要做的事情：

```
q = Item.all()
#orders it by highest index first which is how client handles items
q = q.order('-index') 
#count is determined automatically but is at least 25 and not greater than 300
q = q.fetch(limit=count, offset=i) 
```

**编辑 2：** 根据评论，我决定尝试将我的项目存储在内存缓存中，并在内存中进行所有过滤、排序、偏移等。`Item`被分组，`Category`最多可以容纳 1500 个项目，我将每个项目存储`Category`在自己的密钥下的 memcache 中。我能想到的唯一问题是，每个`Item`最坏的情况可能是 2kb 大小。a 的大小不太可能`Category`接近 1500 `Items`，或者`Item`达到最坏情况下的大小，但如果是这样，它将超过 1mb 内存缓存限制。关于如何处理的任何建议？此外，可能有 10 个左右`Categories`；memcache 中的这么多存储会导致它更频繁地刷新吗？最后，当我获取`Entities`还是 memcache 是一个更好的解决方案（`Items`将被非常频繁地访问，通常在小组中（25-30））？

**编辑 3：** 我现在有一种顺序引用项目的方式。每个项目都有一个在类别中唯一标识它的 id，一个索引，它是一种在类别中以非顺序方式对项目进行排序的方式，以及 num 是顺序的，但不是对项目隐含的（每次我将项目拉出memcache 我按索引对其进行排序，然后遍历项目列表，在给定当前迭代次数的情况下为每个项目分配一个 num）我想这是一种令人费解的说法：

```
for i in range(0, len(items)):
    items[i]['num'] = i 
```

**编辑 4：** 项目模型：

```
class Item(db.Model):
   item_id = db.IntegerProperty()
   index = db.IntegerProperty()
   #I used StringProperty instead of ReferenceProperty because I'm a cheapo with memory 
   category = db.StringProperty() 
```

我`num`将模型与模型分开，因为将其更新为按顺序添加和删除的成本。因此，我使用`index`来维护项目的（非顺序）顺序，并且每次代表特定类别的项目的字典列表被踢出数据存储区时，我都会遍历它们并`num`为每个项目添加一个连续的“”。`num`实际上仅适用于客户端（阅读：浏览器），因为我的 UI 是完全动态的（所有 AJAX；没有任何页面重新加载），并且我缓存了在 javascript 中发送到浏览器的每个项目。服务器端我不一定需要物品的顺序；客户端有某些功能需要它，而服务器使用非顺序索引就可以了。

我的问题的主要症结似乎变成了我是否应该保留这个模型，即将一个类别的所有项目存储在 memcache 中，或者直接从数据存储中检索项目。项目将被请求很多（我没有确切的数量，甚至没有估计每秒多少次，但它应该是每秒请求的项目数）。我知道在被踢出之前没有办法精确确定这些项目在内存缓存中的存储时间，但我可以假设它不会每隔几分钟发生一次吗？因为如果是其他情况，我觉得最好的方法是使用 memcache，但我可能会遗漏一些东西。哦，希望这将是我窃取 SO 的所有磁盘空间之前的最后一次编辑；）

**编辑 5**无需更多编辑...这是我计算使用 memcache 和数据存储或仅使用数据存储时的时间复杂度的图表（省略了数据存储的时间复杂度，因为我不确定它到底是什么。现在再去阅读 BigTable 论文来尝试弄清楚已经太晚了，所以我假设它对于哈希表上的操作是相同的）。这些都是最好的情况。对于 memcache 解决方案，最坏的情况需要添加 N 次数据存储读取（因为必须将类别中的所有项目读入 memcache）。该图表留下了与存储或检索数据（即排序、过滤器）无关的任何额外内容，这对于 memcache 和数据存储解决方案都适用。对于仅 memcache 的解决方案，`num`不存储在数据存储中。对于数据存储唯一的解决方案，这就是为什么存在与添加或删除相关的额外成本（`num`为每个项目更新）。

```
n DS = number of DataStore operations
w = write
r = read
N = number of items in category (for Add and Remove this is the number before
    the operation is performed)
c = count of items to read
o = offset

+------------------------------------------------------------------------------+
|                  Memcache             |               Datastore              |
|------------------------------------------------------------------------------|
|       |                               |       |                              |
| Reads |           O(o + c)            | Reads |           c DS r             |
|-------+-------------------------------|-------+------------------------------| 
|       |                               |       |                              |
|Reads w|           O(o + c)            |Reads w|          o + c DS r          |
|Offset |                               |Offset |                              |
|-------+-------------------------------|-------+------------------------------|
|       |                               |       |                              |
| Adds  |         1 DS w + O(N)         | Adds  |   1 + N DS w & N - 1 DS r    |
|-------+-------------------------------|-------+------------------------------| 
|       |                               |       |                              |
|Removes|       1 DS rw + O(o + N)      |Removes|        N - o DS wr           |
|-------+-------------------------------|-------+------------------------------| 
|       |                               |       |                              |
| Edits |         1 DS rw + O(o)        | Edits |          1 DS rw             |
|-------+-------------------------------|-------+------------------------------| 
```

所以问题是，memcache 解决方案更糟糕的时间复杂度是否超过了数据存储解决方案可能带来的更多 DS 操作，除非 memcache 驱逐可能导致 memcache 解决方案中的 DS 操作多于数据存储解决方案（因为每次项目都从 mecache 中驱逐，我们必须`N DS r`重新填充 memcache）。这一切都假设读取将比写入发生的频率高得多，在此应用程序中，一旦完成初始数据加载，就会出现这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:32:36.453

**为编辑 4 更新。**

你的`Item`模型看起来很合理，最大的问题是如何管理顺序索引。我仍然不愿以您描述的方式依赖 memcache，因为除非您有数据存储正确备份数据状态，否则缓存驱逐会大大减慢您的读取操作（这是常见的和面向用户的）。

因此，请随意继续将项目存储在 memcache 中。但是，在插入或删除时，请确保`num`在数据存储中也进行更新。（如果你已经`Items`在 memcache 中拥有完整的集合，则不需要读取操作。只需更新 memcache 中的所有项目并同时将它们写入数据存储区。）

最坏的情况仍然是我在您的第四次编辑之前描述的那样。插入一个元素是 1 次读取 + 1 次写入。删除一个元素是 N 次读取 + N 次写入，其中 N 是类别中的项目数。查找一个项目只是 1 次阅读。这些场景中的每一个都假设 memcache 是空的。

如果您使用偏移量，则每次插入将是 1 次写入。删除一个元素将是 1 次写入。*但是*，读取一个元素是 N 次读取，其中 N 是您正在检索的项目的顺序索引。如果您正在使用 memcache，但没有备份`num`数据存储中的值，您也会陷入这种情况。

在大多数情况下，读取远比写入更常见，因此`num`在数据存储中进行维护要高效得多。

附录：

如果您的数据量不太大，Cloud SQL 是另一种选择。一般来说，SQL 在您尝试执行的顺序查询方面要好得多，但代价是对大型数据集的扩展性很差。

如果您怀疑您的使用量很少，则每次使用定价相对便宜[。](https://developers.google.com/cloud-sql/docs/billing#per_use)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-07T15:58:24.790

offset 是 GAE 中最好的方法，不用担心配额，它只会计算偏移后的读取。换句话说：读取前 N 个项目与读取从某个偏移量开始的 N 个项目消耗的配额数量相同。

# android - Android：如何编辑屏幕顶部的栏？

> ID：11370441
> 
> 赞同：0
> 
> 时间：2012-07-06T22:26:11.583
> 
> 标签：android

我开始学习 Android 开发，我的应用顶部有一个栏，其中包含活动的标题和应用图标。我想知道如何编辑它（更改文本、背景颜色等）并删除它？我也想知道如何编辑我的应用程序的标题，因为它目前是其主要活动的名称......

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:33:19.613

如果您的意思是“标题栏”作为屏幕顶部的栏，可以通过将以下行添加到您的清单来删除它

```
android:theme="@android:style/Theme.NoTitleBar" 
```

将其添加到应用程序标签中，如下所示：

```
 <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T22:33:47.353

> 我想知道如何编辑它（更改文本、背景颜色等）并删除它？

如果您`android:targetSdkVersion`是 API 级别 11+，则称为操作栏。`ActionBar`您可以通过调用`getActionBar()`您的活动（或者`getSupportActionBar()`如果您正在使用 ActionBarSherlock）来获取一个对象。那里有一系列方法来处理诸如是否显示标题之类的东西。

> 也想知道如何编辑我的应用程序的标题，因为它目前是其主要活动的名称

正如 lxx 所指出的，您的清单具有and`android:label`的属性，它们指向字符串资源。您可以将字符串资源中的值更改为其他值。对于活动标题，您还可以在运行时通过调用 您的.`<application>``<activity>``setTitle()``Activity`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:28:27.370

编辑您的 AndroidManifest.xml

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_label" 
>
...
    <activity
        android:name="foo.MyActivity"
        android:label="@string/activity_label" >
    </activity>
</application> 
```

如果您不想要任何标题栏，请添加属性：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

到应用程序标签。

# php - 换行符不显示在输出上？

> ID：11370445
> 
> 赞同：3
> 
> 时间：2012-07-06T22:26:40.763
> 
> 标签：php

很长一段时间以来，我一直在输出评论并使用下面的函数来插入换行符。它工作得很好。

```
echo str_replace(chr(13),"<br />",$com_text); 
```

然而，直到最近，这段代码还没有处理新的评论。它仍然可以与数据库中的旧评论一起使用。但是任何新提交到数据库的东西都没有正确输出。

据我所知，没有任何代码发生变化。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T22:32:53.123

尝试使用`echo nl2br($com_text);`

或者这个寻找新行的正则表达式：

```
echo preg_replace('/$\R?^/m', '<br />', $com_text); 
```

# sql - 我想加入表格，但即使另一张表格没有结果，我仍然会收到来自一张表格的结果

> ID：11370446
> 
> 赞同：0
> 
> 时间：2012-07-06T22:26:45.297
> 
> 标签：sql, sqlite

我在 Chrome WebDB/SQLite 中这样做

我有一个成员表和一个成员可能已回答或未回答的答案表。

我正在尝试取回包含成员姓名和他们给出的答案的结果集。但如果他们没有给出答案，我仍然希望他们的名字回来。

有人可以尝试帮助我吗？

```
SELECT m.LastName, 
       m.FirstName, 
       m.MiddleName, 
       s.surveyAnswer 
FROM Members m 
    LEFT JOIN SurveyAnswers s 
      ON s.memberID = m.id 
WHERE m.id = ? 
AND s.eventID = ? 
```

[results.rows.item(i).memberID, eventId],

这是我尝试的，但仍然只接收回答问题并且也在 SurveyAnswers 表中的成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:34:01.660

成为`s.eventID`连接的一部分而不是`WHERE`子句。

您的 select 语句应该看起来更像这样：

```
SELECT m.LastName, 
       m.FirstName, 
       m.MiddleName, 
       s.surveyAnswer 
FROM Members m 
    LEFT JOIN SurveyAnswers s 
      ON s.memberID = m.id 
        AND s.eventID = ? 
WHERE m.id = ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:34:50.053

Joins were recently explained to me in the form of a venn diagram and since then I've been crystal clear on which joins to use in my queries.

Have a look at the page linked below which explains it in the same way and I promise you'll never need to check which join you need again!

[visual explanation of SQL joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:35:51.763

You need to use a LEFT OUTER join, and you also need to specify the condition for SurveyAnswers eventID in the join, not in the where clause. Something like this:

```
SELECT m.LastName, m.FirstName, m.MiddleName, s.surveyAnswer FROM Members m 
LEFT OUTER JOIN SurveyAnswers s ON (s.memberID = m.id AND s.eventID = ?) 
WHERE m.id = ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T22:28:45.787

您想使用[LEFT OUTER JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。

# sql - sql过滤id的

> ID：11370447
> 
> 赞同：1
> 
> 时间：2012-07-06T22:26:56.047
> 
> 标签：sql

我想创建一个 sql 查询，让我在表中最常用的 id 中排名前 5。我的表有这些列：

```
reservationid
costumerid
roomid
hotelid 
```

我正在尝试获得最常用的酒店 ID 的前 5 名。

我以为我必须使用计数功能，但这似乎不起作用。它只计算所有的hotelid，并没有看到id之间的区别

```
select count(hotelid) from reservation; 
```

有人可以帮我把我推向正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:29:19.023

```
SELECT COUNT(`hotelid`) AS `freq`, `hotelid` 
        FROM `reservation` 
    GROUP BY `hotelid` 
    ORDER BY `freq` DESC LIMIT 5 ; 
```

# c# - 如何通过索引从列表框中获取文本？

> ID：11370452
> 
> 赞同：2
> 
> 时间：2012-07-06T22:27:54.203
> 
> 标签：c#, winforms

我试图通过索引从我的 winForms ListBox 中的条目中获取文本，但我似乎被难住了。我能想到的唯一合乎逻辑的事情是：

```
listBox.Items[index].ToString 
```

但这不会返回所需的结果。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T22:30:22.220

你的列表框中有什么？

如果列表框中有字符串值，则您的代码是正确的，但缺少大括号：

```
string value = listBox.Items[index].ToString(); 
```

如果列表框中的内容是某种对象，您可能需要重写 ToString() 以获得所需的结果，或者将您从列表框中获得的内容转换为所需的类型，然后访问适当的属性。

例子：

```
MyClass my = (MyClass)listBox.Items[index];
string value = my.SomePropertyOfMyClass; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:30:03.330

用这个`listBox.Items[index].Text`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:43:52.347

要按索引从 ListBox 的项目中获取项目，请使用这种方式

```
string item = listBox1.Items[0]; 
```

# php - 使用 Javascript 跟踪每个 div 独有的函数

> ID：11370454
> 
> 赞同：0
> 
> 时间：2012-07-06T22:28:01.350
> 
> 标签：php, javascript, html, function

所以这是我的目标，我需要能够确定用户点击的 div 的背景颜色是什么。每个 div 都有一个确定其背景的函数。我将如何使用 javascript 来跟踪函数，或者更容易将该数据发送到 url，以便我可以将其与预定代码进行比较？

```
<?php "session_start" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<?php

$cols = array(

"#000000",
"#FFFFFF",
"#0000FF",
"#008000",
"#800080",
"#FF0000",
"#FFFF00",
"#DD7500",
"#4FD5D6",
"#CD6090", 
);

function getRandomColor1() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor2() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];    
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor3() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor4() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor5() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand]; 
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor6() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor7() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor8() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor9() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

function getRandomColor10() {
global $cols;
$num_cols = count($cols);
$rand = array_rand($cols);
$rand_col = $cols[$rand];
unset($cols[$rand]);
return $rand_col;
}

?> 

<style media="screen" type="text/css">
#full {
height: 300px;
width: 750px;
border: 3px solid #999; 
margin: 0 auto;

} 

#boxone1 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor1(); ?>; ;
float: left;
} 

#boxone2 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor2(); ?>;  
float: left;
} 
#boxone3 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor3(); ?>;  
float: left;
} 
#boxone4 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor4(); ?>; 
float: left;
} 
#boxone5 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor5(); ?>; 
float: left;
} 

#boxtwo1 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor6(); ?>; 
float: left;
} 

#boxtwo2 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor7(); ?>; 
float: left;
} 
#boxtwo3 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor8(); ?>; 
float: left;
} 
#boxtwo4 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor9(); ?>; 
float: left;
} 
#boxtwo5 {  
height: 150px;
width: 150px;
background: <?php echo getRandomColor10(); ?>; 
float: left;
} 

</style>

<body>

<div id="full">

<div id="boxone1" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxone2" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxone3" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxone4" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxone5" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxtwo1" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxtwo2" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxtwo3" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxtwo4" onClick="window.location='?name='+this.id" style=""></div>

<div id="boxtwo5" onClick="window.location='?name='+this.id" style=""></div>
</div>
</div>

</body>
</html> 
```

或多或少，我想知道如何收集选择颜色的顺序并将它们与预定模式进行比较。通过js还是通过在url中发布会更好吗？无论哪种方式，有人可以证明它是如何完成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:33:08.273

我只需将它们添加到单击处理程序内的数组中（使用 jQuery，但如果您不喜欢 jQuery，我可以不使用它来重写它）：

```
var clickedColors = []
$('div').click(function() {
    clickedColors.push($(this).css('backgroundColor'));
}); 
```

然后对于比较部分，我只使用 JS 逻辑。您可能想查看 Underscore.js 库，因为它有很多很棒的函数可以处理数组。

*** * 编辑 * ***

或者，如果您想要一种“尽可能少的 Javascript”方法，您可以使用已有的 onClick 操作发送背景颜色。您可以通过更改来做到这一点：

```
window.location='?name='+this.id 
```

到：

```
window.location='?name='+this.id+'&color='+this.style.backgroundColor 
```

这将在服务器端为您提供一个“颜色”参数，该参数应该具有被点击的 div 的背景颜色。

*** * 编辑 #2 * ***

在与 OP 聊天之后，似乎最好的方法（鉴于他们缺乏 Javascript 知识）是尝试尽可能少地使用 Javascript。因此，我们决定：

1.  将颜色放在 div 旁边的隐藏输入中
2.  在隐藏的输入和 div 周围放置一个表单
3.  更改 onclick 代码以提交表单

因此，现在用户单击，该 div 的表单被提交，div 旁边的隐藏输入告诉服务器单击了哪种颜色，并且 OP 可以自由地使用服务器端/PHP 中的颜色做任何他们想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T22:39:10.593

我无法抗拒编写的潜在解决方案（ [http://jsfiddle.net/hHXV4/1/](http://jsfiddle.net/hHXV4/1/) ）的纯 Javascript 示例。如果你想遵循它，逻辑就在那里。

编辑：为简单起见更新！

```
var e,body,colors,clickOrder,count;
clickOrder = [];
colors = [
    "#000000",
    "#FFFFFF",
    "#0000FF",
    "#008000",
    "#800080",
    "#FF0000",
    "#FFFF00",
    "#DD7500",
    "#4FD5D6",
    "#CD6090"
];
count = colors.length;
body = document.getElementsByTagName('body')[0];
for(var i=0; i<count; i++){
    e = document.createElement('div');
    e.style.backgroundColor = colors[i];
    e.indx = i;
    e.addEventListener("click",function(){
        clickOrder.push(colors[this.indx]);
        this.parentNode.removeChild(this);
        count--;
        if(count == 0){
            alert(clickOrder.join());
        }
    });
    body.appendChild(e);
}​ 
```

# python - Scipy优化算法？（用于最小化神经网络成本函数） - python

> ID：11370462
> 
> 赞同：3
> 
> 时间：2012-07-06T22:28:41.490
> 
> 标签：python, scipy, neural-network

我在 python 中编写了一个神经网络对象，它具有成本函数并通过反向传播确定其梯度。[我在这里](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cg.html#scipy.optimize.fmin_cg)看到一堆优化功能，但我不知道如何实现它们。我也很难找到任何示例代码来学习。

显然，我需要以某种方式告诉它我要更改哪些参数，我要最小化的成本函数，然后是反向传播计算的梯度。我怎么知道 fmin_cg 是什么？

额外问题：我在哪里可以了解各种算法的使用差异？

=====好的，更新=====

这就是我的自动取款机：

```
def train(self, x, y_vals, iters = 400):
    t0 = concatenate((self.hid_t.reshape(-1), self.out_t.reshape(-1)), 1)
    self.forward_prop(x, t0)

    c = lambda v: self.cost(x, y_vals, v)
    g = lambda v: self.back_prop(y_vals, v)

    t_best = fmin_cg(c, t0, g, disp=True, maxiter=iters)
    self.hid_t = reshape(t_best[:,:(hid_n * (in_n+1))], (hid_n, in_n+1))
    self.out_t = reshape(t_best[:,(hid_n * (in_n+1)):], (out_n, hid_n+1)) 
```

而且，这是它抛出的错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "netset.py", line 27, in <module>
    net.train(x,y)
  File "neuralnet.py", line 60, in train
    t_best = fmin_cg(c, t0, g, disp=True, maxiter=iters)
  File "/usr/local/lib/python2.7/dist-packages/scipy/optimize/optimize.py", line 952, in fmin_cg
    res = _minimize_cg(f, x0, args, fprime, callback=callback, **opts)
  File "/usr/local/lib/python2.7/dist-packages/scipy/optimize/optimize.py", line 1017, in _minimize_cg
    deltak = numpy.dot(gfk, gfk)
ValueError: matrices are not aligned 
```

……住手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:44:53.837

我从未使用过 fmin_cg。我猜 v 是你的权重向量。[当我阅读文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cg.html)时，我没有在您的代码中发现错误。但是我搜索了您的错误，发现：[矩阵未对齐错误：Python SciPy fmin_bfgs](https://stackoverflow.com/questions/8752169/matrices-are-not-aligned-error-python-scipy-fmin-bfgs)

另外，我认为不能保证 g(v) 总是在 c(v) 之后计算。因此，您的反向传播函数应该再次向前传播 x ：

```
c = lambda v: self.cost(x, y_vals, v)
g = lambda v: self.cost(x, y_vals, v); self.back_prop(y_vals, v)
#             ------------------------ 
```

或者，您可以只传递一个返回成本函数和梯度作为元组的函数，以避免如 Issam Laradji 提到的两次前向传播。

关于人工神经网络优化算法的好文章有：

*   [高效的反向传播](http://yann.lecun.com/exdb/publis/pdf/lecun-98b.pdf)
*   [神经网络常见问题解答，第 2 部分](ftp://ftp.sas.com/pub/neural/FAQ2.html#questions)

我可以推荐 Levenberg-Marquardt。这个算法真的很好用。不幸的是，每个迭代步骤都有三次复杂度 O(n^3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:55:28.970

仅解决奖励问题：Coursera 有一个关于机器学习的很棒的课程，我会检查一下它是否还在，如果它还在，请通过关键概念来了解机器学习的每个实现（如果这是有道理的）然后从那里更深入。

# c# - 如何反序列化节点包含html标签的xml？

> ID：11370465
> 
> 赞同：1
> 
> 时间：2012-07-06T22:28:52.317
> 
> 标签：c#, html, xml, .net-3.5, xml-serialization

```
<Translation> (  benzene  OR  pyrobenzole  OR  pyrobenzol  OR  &quot;phenyl      hydride&quot;              OR  phene  OR  &quot;fenzen  czech  &quot;  cyclohexatriene  &quot;coal  naphtha&quot;  OR  &quot;benzolo  italian  &quot;  benzole  benzol  &quot;benzen  polish  &quot;  &quot;benzeen  dutch  &quot;  ) The chemical name <b>benzene</b> was identified.<br>The following terms were added from ChemIDplus:<br><b>pyrobenzole</b><br><b>pyrobenzol</b><br><b>phenyl hydride</b><br><b>phene</b><br><b>fenzen  czech </b><br><b>cyclohexatriene</b><br><b>coal naphtha</b><br><b>benzolo  italian </b><br><b>benzole</b><br><b>benzol</b><br><b>benzen  polish </b><br><b>benzeen  dutch </b><br>CAS Registry Number: <b>71-43-2</b><br></Translation> 
```

我从 Web 服务获取字符串，它不会在 cdata 部分发送 html。我得到的错误是： System.Xml.XmlException: The 'br' start tag on line 1 does not match the end tag

我正在使用 .net 3.5、webclient 来使用 REST Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:38:13.593

我知道这个问题。我可以通过包含 HTML 的命名空间来解决它。

```
xmlns="http://www.w3.org/1999/xhtml" 
```

将针对所有空元素（如`<br />`、`<hr />`等）引发此错误`<input />`。

# linux - 以正确的时间延迟重播 bash 会话

> ID：11370468
> 
> 赞同：5
> 
> 时间：2012-07-06T22:29:24.080
> 
> 标签：linux, bash

编辑（这似乎很重要，这在上面，详细信息见下文）：我需要脚本来实际执行命令，而不仅仅是显示记录的内容！据我所知，脚本实用程序不会这样做。所以像自动热键这样的东西，只适用于 bash 和 linux，记录了时间信息。

问题是：

我想记录和重播一个 bash 会话，按键之间有确切的时间延迟等等。

例如，如果我运行一个名为的程序`xxx`，然后在 11.4s 后用 Ctrl+C 中断它，然后`yyy`在我 exited 后运行一个名为 3.4s的程序`xxx`，我希望重播也这样做（`xxx`在 11.4s 后用 Ctrl+C 中断，等待 3.4 秒，然后运行`yyy`）。

我不需要记录鼠标移动，因为我感兴趣的记录都发生在一个 bash 会话中。

我已经研究了实用程序

*   脚本（它记录 bash 会话命令，但没有时间延迟信息。）
*   xmacro（它记录所有按键但又没有时间信息。）
*   搜索类似内容的人可能也想查找[此](http://www.linuxforums.org/forum/programming-scripting/105579-need-tool-record-keystrokes-replay-them.html)内容（我包含此链接是因为可能对其他用户有价值；我个人认为提到的任何解决方案对我想要实现的目标都没有用。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:14:27.673

script -t 是标准答案。

我还用 Python 重写了脚本，你可以在这里找到：http: [//stromberg.dnsalias.org/~strombrg/pypty/](http://stromberg.dnsalias.org/~strombrg/pypty/)

两者都支持-t。我写 pypty 的主要原因是我希望能够每天获取一个文件来记录长时间的 ssh 会话，以供将来参考。

pypty tarball 包含一个 script-replay 脚本（注意名称与 scriptreplay 略有不同），可以使用 gtk 或 curses 在 tty 日志文件中前进和后退。它的倒退方式有点小技巧（因为 vt100 并不是那么简单），但我发现它在很多场合都非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:40:35.847

用您选择的语言编写一个 bash 包装器怎么样？它可以记录您需要的信息，同时提供对正常 bash 环境的访问并将系统设置指向您的包装器而不是原始 bash？IO 将在客户端服务/用户和真正的 bash 之间通过管道传输，而您的包装器位于记录您需要的信息之间。一旦记录了信息，重播部分就变得微不足道了。如果您对这种方法感兴趣，我可以根据要求提供示例。

# objective-c - 在运行时存储大量要生成的信息

> ID：11370474
> 
> 赞同：0
> 
> 时间：2012-07-06T22:30:09.787
> 
> 标签：objective-c, ios, core-data, archiving

我目前正在开发一个旅游应用程序，它将存储和显示有关不同景点和雕塑的信息，并且我正在研究存储信息的不同选项。

*   所有内容都会**在运行前**生成，运行时不会生成任何内容。
*   我正在寻找一种**方便的方式来编写/生成它**，例如从电子表格中获取信息。因此，我正在考虑**xml**和**csv**、**sqlite**、 **core-data**或**archiving**。
*   要存储的内容将是**NSObject 的自定义子类**，例如 Tour 类（NSObject 子类），以及要查看的 NSArray of Sights（NSObject 子类）和 *tourName（NSString）等实例变量。
*   我目前在我的主视图控制器的 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 方法中定义内容，但我确信这不是最有效的方法。

**欢迎任何建议，以及它的优点和缺点。** 此外，Core-Data 似乎是最好的选择，但在我看来，数据只能在运行时以编程方式生成。或者有什么方法可以**在运行时之前在 Core-Data 中生成实体实例**？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:24:38.513

你可以很容易地在你的 mac 上生成 CoreData 数据库。您可以编写本机应用程序来自己管理数据库，或者将原始数据保存为任何其他格式（CSV、JSON 等）并将其转换为 CoreData。

无论如何，您只需创建 CoreData 数据库，并将其包含在您的应用程序包中。当您在应用程序中创建 CoreData 堆栈时，在持久存储上设置只读选项，您应该一切顺利。

# jquery-ui - 面板的错误消息样式

> ID：11370481
> 
> 赞同：4
> 
> 时间：2012-07-06T22:30:29.927
> 
> 标签：jquery-ui, css, primefaces

我正在使用 PrimeFaces，它反过来使用[JQuery UI](http://jqueryui.com/)不仅用于功能，还用于其 CSS 样式框架。这个问题源于我对 CSS 框架的无知，我一直无法找到任何示例或文档来指导我。

我想要做的是为我自己的面板使用主题的样式来显示错误消息。像这样的东西：

```
<p:panel rendered="#{bean.someError}"  styleClass="?? what goes here ??">
    <h:outputText styleClass="?? what goes here ??"
         value="Error!  A parameter to this page is wrong so it can't be rendered.  This
                is probably because you used a stale bookmark." />
</p:panel> 
```

我希望它看起来类似于您在使用 . 任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:14:49.910

最简单的方法是查看 primefaces show [，](http://www.primefaces.org/showcase/ui/messages.jsf)并使用 firebug 查看 css 类。

我认为您应该使用`p:outputPanel`with layout="block" 而不是`p:panel`，因为面板有自己的样式。相反，带有块布局的 outputPanel 会呈现一个没有样式的 div。

无论如何，这就是你的代码应该是什么样子

```
<p:outputPanel rendered="#{bean.someError}" layout="block" styleClass="ui-messages ui-widget">
     <div class="ui-messages-error ui-corner-all">
         <span class="ui-messages-error-icon"></span>
         <ul>
            <li>
                <span class="ui-messages-error-summary">
                    <h:outputText value="Error!  A parameter to this page is wrong so it can't
                                         be rendered.  This is probably because you used a
                                         stale bookmark." />

                </span>
           </li>
        </ul>
    </div>
</p:outputPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T07:11:11.363

对于单个消息，拥有以下内容就足够了：

```
<div class="ui-message-error ui-corner-all">
      <span class="ui-message-error-icon"/>
      <span class="ui-message-error-detail">your message here</span>
</div> 
```

与达米安的回答相比，标签要少一些。

# eclipse - 如何为 Eclipse 制作 RSS 阅读器

> ID：11370487
> 
> 赞同：0
> 
> 时间：2012-07-06T22:31:15.090
> 
> 标签：eclipse, eclipse-plugin, rss

我想知道是否有任何关于如何为 Eclipse 制作 RSS 提要阅读器的好的教程。如果您知道任何或任何非常好的 RSS 教程，那也会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:32:49.027

不是真正的教程：[RSSOwl](http://www.rssowl.org/)是一个很棒的基于 Eclipse 的 RSS 阅读器。由于它是开源的，您可能需要[检查它的来源](http://rssowl.svn.sourceforge.net/viewvc/rssowl/trunk/)。

# jquery - jquery 函数在 Safari 中不起作用？

> ID：11370489
> 
> 赞同：0
> 
> 时间：2012-07-06T22:31:31.020
> 
> 标签：jquery, safari

我有以下功能在 PC 或 MAC 的 Safari 中不起作用：

```
var $j = jQuery.noConflict();

$j(document).ready(function(){
    $j(".wpp_search_button.submit:eq(0)").click(function(){
         _gaq.push(['_trackEvent', 'Search', 'Header Search', '', 1]);    
    });
});

$j(document).ready(function(){
    $j(".wpp_search_button.submit:eq(1)").click(function(){
        _gaq.push(['_trackEvent', 'Search', 'Body Search', '', 1]);
    });
}); 
```

它应该在我的网站上跟踪 onclick 搜索，但它没有。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:40:52.223

我的建议是尝试绑定到 mousedown 以查看是否可以解决问题：

```
$j(".wpp_search_button.submit:eq(0)").mousedown(function(){
     _gaq.push(['_trackEvent', 'Search', 'Header Search', '', 1]);    
});

$j(".wpp_search_button.submit:eq(0)").mousedown(function(){
     _gaq.push(['_trackEvent', 'Search', 'Header Search', '', 1]);    
}); 
```

# php - PHP If / else 用户存在于数据库中，将变量设置为 0 或 1

> ID：11370490
> 
> 赞同：1
> 
> 时间：2012-07-06T22:31:38.607
> 
> 标签：php, mysql, if-statement

我有这段代码来检查用户是否存在于数据库中。我想分配`$account`它`1`是否退出，`0`如果没有。我认为这段代码会起作用，但它会不断设置`$account`，`0`所以我认为我错过了一个技巧。任何帮助，将不胜感激。

```
$con = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");

 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

mysql_select_db(DB_NAME, $con);

$sql="SELECT user_name FROM users";

$result = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_assoc($result);
if ($row['user_name'] == '$user_name'){
$account = 1;
}else{
        $account = 0;} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:33:56.147

如果使用单引号，则不能将变量放在字符串中`'`（而且这不是必需的！）。下面纠正了该问题，并将您的 if/else 语句缩短为单行。

```
$account = $row['user_name']==$user_name ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T22:40:58.940

我认为这可以做得更好：

```
$con = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");

 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

mysql_select_db(DB_NAME, $con);

$account = (int)mysql_query("SELECT COUNT(*) FROM Users WHERE user_name='$user_name'"); 
```

这应该在帐户中存储正确的值，即如果找到用户则为 1，否则为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:38:32.920

您正在查询返回多行，并且您正在与第一行进行比较。您需要执行以下操作来指定单个用户（请参阅 sql 语句更改）：

```
$sql="SELECT user_name FROM users WHERE user_name='".$user_name."' ";

$result = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_assoc($result);
if ($row['user_name'] == '$user_name'){
$account = 1;
}else{
        $account = 0;} 
```

此外，要遍历行，您可以从[http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)看到这个示例：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T22:43:09.803

改变：

```
if ($row['user_name'] == '$user_name'){ 
```

到：

```
if ($row['user_name'] == $user_name){ 
```

单引号表示一个字符串。因此，通过将变量放在单引号之间，您试图匹配`$row['user_name']`（`$user_name`不是 $user_name 变量中的字符串 - 而是 STRING "$user_name"）。

双引号也表示字符串，但您可以将变量放在双引号之间并`$row['user_name']`匹配`$user_name`（变量内的字符串）。

因此，以下两个示例是正确的，而您的则不是：

```
if ($row['user_name'] == $user_name){
if ($row['user_name'] == "$user_name"){ 
```

# html - 有没有办法在 Chrome 中使单选按钮的背景透明？

> ID：11370494
> 
> 赞同：1
> 
> 时间：2012-07-06T22:32:18.087
> 
> 标签：html, css

今天，我在尝试使其背景透明的单选按钮上获得了很多乐趣。

我尝试了以下方法：

```
input[type=radio]
{
    background-color:transparent;
    background-image:none;
    -webkit-backface-visibility: hidden;
} 
```

这似乎只是一个 Chrome 问题。

我即将使用画布制作自己的单选按钮。这样我也可以更轻松地缩放它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:03:20.023

[http://jsfiddle.net/gYTHF/18/](http://jsfiddle.net/gYTHF/18/)

第 65 行的 ctx.save() 导致 Chrome 浏览器中的不透明白色背景颜色

# objective-c - 重叠表格单元格动画

> ID：11370495
> 
> 赞同：0
> 
> 时间：2012-07-06T22:32:28.960
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

我用自定义单元格制作了一个表格。对于每个单元格，我创建了一个动画，将当前点击的单元格向上移动。问题出在当前动画单元格中，例如索引第 2 行并返回到索引为 1 的父单元格。
我希望动画单元格位于父单元格的前面。如果我向下滚动表格超过 480 像素，这是 iPhone 屏幕的大小，然后再次单击具有索引第 2 行的同一单元格，该单元格将恰好与父单元格重叠。问题如下图所示。

![显示问题的图像](../Images/fc97b43410b34e842bd287790886eb22.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:21:17.797

您需要获取单元格并将其置于视图层次结构的最前面。但是，获取单元格并不是很明显：您不能调用`tableView:cellForRowAtIndexPath:`控制器，因为这会出列或创建一个新单元格。相反，您需要做的是调用`cellForRowAtIndexPath:`表格视图本身并将其放在前面，然后再开始动画。

```
UIView* theCell = [tableView cellForRowAtIndexPath:someIndexPath];
[theCell.superview bringSubviewToFront:theCell]; 
```

您可以安全地对要设置动画的所有单元格执行此操作，因为`nil`如果它们在屏幕上不可见，它会返回。

# java - djecjni.dll 的问题

> ID：11370521
> 
> 赞同：0
> 
> 时间：2012-07-06T22:35:53.703
> 
> 标签：java, pervasive

`djecjni.dll`从命令提示符注册时，出现以下错误：
`LoadLibrary("C:\Software\Pervasive\Cosmos9\Common\djecjni.dll") failed`.

我使用以下命令从命令提示符注册 dll：
`regsvr32 "C:\Software\Pervasive\Cosmos9\Common\djecjni.dll"`

我正在尝试从 Java 运行 djecjni.dll 文件，但出现此错误：

```
 The operating system cannot run C:\Software\Pervasive\Cosmos9\Common\djecjni.dll

 java.lang.UnsatisfiedLinkError: djecjni.dll (The operating system cannot run
 C:\Software\Pervasive\Cosmos9\Common\djecjni.dll. )
 at java.lang.ClassLoader.loadLibraryWithPath(ClassLoader.java:993)
 at java.lang.ClassLoader.loadLibraryWithClassLoader(ClassLoader.java:962)
 at java.lang.System.loadLibrary(System.java:465)
 at DataJunction.ec.NEngine.<clinit>(Unknown Source)
 at java.lang.J9VMInternals.initializeImpl(Native Method)
 at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
 at DataJunction.ec.Engine.<init>(Unknown Source) 
```

我已经在路径中添加了 dll，但仍然无法运行 dll。任何人都可以提出一些解决上述问题的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:00:38.653

什么操作系统？根据错误，我猜想 DLL 是 32 位的，而您只安装了 64 位 Java。也可能是没有安装Java。

# javascript - 浏览器如何确定 setInterval 应该使用什么时间？

> ID：11370522
> 
> 赞同：6
> 
> 时间：2012-07-06T22:36:11.093
> 
> 标签：javascript, setinterval

通常，浏览器似乎会在某些情况下修改`setInterval`使用的实际时间间隔，甚至超出最小限制。例如，我有以下代码：

```
function start() {
    window.setInterval(function() {
        update();
    }, 1);
}

lastTime = new Date;
numFrames = 0;
lastFrames = 0;

function update() {
    numFrames++;
    if (new Date - lastTime >= 1000) {
        lastFrames = numFrames;
        numFrames = 0;
        lastTime = new Date;
    }
} 
```

在这里，`lastFrames`将为我们提供大约在过去一秒内的帧数。在 Chrome、Firefox 和 Safari 中使用时，此代码不会在一毫秒内运行。当然，每个浏览器在`setInterval`调用之间都有一个任意的最小时间，所以这是可以预料的。但是，随着页面继续运行，即使选项卡仍处于焦点状态，帧速率也会继续降低。我发现解决这个问题的唯一方法是让浏览器做一些事情。这些方面的东西似乎使浏览器`setInterval`尽可能快地运行：

```
function start() {
    window.setInterval(function() {
        update();
    }, 1);
}

lastTime = new Date;
numFrames = 0;
lastFrames = 0;

function update() {
    numFrames++;
    if (new Date - lastTime >= 1000) {
        lastFrames = numFrames;
        numFrames = 0;
        lastTime = new Date;
    }

    //doIntensiveLoop, processing, etc.
} 
```

因此，我的问题是：浏览器在寻找什么来证明运行`setInterval`更接近我的要求？

编辑：HTML5 规范说浏览器不应允许 setInterval 以低于 4 毫秒的间隔运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:04:00.107

`setInterval`并且`setTimeout`根本不准确，也不是设计的。JavaScript 是单线程的，所以`setTimeout/setInterval`基本上说“把这段代码放在运行队列中。当你到达它时，如果已经过了足够的时间，然后执行它，否则把它放回队列中，稍后再试” .

如果你有一个 setInterval 设置为 4 毫秒，但你的应用程序中的东西需要 10 毫秒才能运行，那么 setInterval 不可能以 4 毫秒运行，最好它会拉出 10 毫秒的间隔。

如果这是出于动画/游戏目的，请尝试[requestAnimationFrame 。](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)我不知道它是如何实现的，但它确实承诺的一件事是更准确的时间安排。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:30:55.383

我认为首先，我们必须问自己对 Interval 函数的期望：

*   他们必须维护上下文：您无法可靠地增加计数器的时间间隔将是非常灾难性的

*   他们应该执行函数中的任何内容，其优先级高于执行间隔（此处相同，该计时器必须在我们再次递增之前上升）

*   它应该与我们的其余 js 代码有一个单独的执行堆栈（我们不想等待那些计时器完成他们的业务，直到其余的开始执行）；

*   他们应该知道他们所处的上下文，无论它有多大（例如，我们希望能够在我们的计时器函数中使用 jQuery）。

所以，正如[马特·格里尔（Matt Greer](https://stackoverflow.com/users/194940/matt-greer)）上面所说，间隔在设计上并不精确，这主要是因为我们并不真正期望它们是精确的，而是在给定时间可靠地执行代码。

如果您查看 Chromium 实现，您会看到 setTimeout 和 setInterval 的实现基于[DOMTimer::install](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMTimer.cpp&type=cs&l=88)，它会传递执行上下文、动作以及计时器是否为单次

这将传递给 RunloopTimer，后者在系统计时器的帮助下执行循环[（如您在此处看到的）](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/platform/RunLoop.h&type=cs&l=86)

（顺便说一下，Chromium 至少安装了 10ms 的间隔，如您[在此处](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMTimer.cpp&exact_package=chromium&q=startRepeating&type=cs&l=188)看到的）

动作的每一次执行都在[这里处理](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMTimer.cpp&exact_package=chromium&q=startRepeating&type=cs&l=114)，自上次执行超过或低于某个时间限制以来，它在过去的时间里不做任何断言。

相反，它仅通过减慢使用过多资源/在给定时间间隔内运行速度过慢的计时器来断言计时器嵌套级别[不会变得太深，如下所示：](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMTimer.cpp&exact_package=chromium&q=startRepeating&type=cs&l=127)

```
if (m_nestingLevel >= maxTimerNestingLevel)
            augmentRepeatInterval(minimumInterval - repeatInterval());
    } 
```

augmentRepeatInterval 只是将更多毫秒添加到间隔：

```
void augmentRepeatInterval(double delta) { augmentFireInterval(delta); m_repeatInterval += delta; } 
```

那么，我们能得出什么结论呢？

*   测量 Intervals 或 Timeouts 的时间准确性是**浪费时间**。您应该并且可以关心的是，对于要在函数中执行的事情，不要将间隔设置得太低。浏览器将尽其所能及时执行您的时间间隔和超时，但它不能保证准确的时间。

*   Interval 执行取决于环境、浏览器、实现、版本、上下文、操作本身等等。这并不意味着精确，如果你想用 setTimeout 或 setInterval 编写一些精确的东西，你要么现在疯了，要么以后会疯。

*   您说在您的代码中，当您向函数添加大量执行时，计时器变得更加准确。这可能是出于不同的原因（也许它获得了更多的内存、更多的独占 CPU 时间、更多的工人等等）。我对此非常感兴趣，但是您还没有提供执行繁重执行的代码。因此，如果您想要一些答案，请提供代码，因为没有它很难假设任何事情。

*   但无论是什么让你的间歇跑得更及时，它在任何方面都不可靠。如果您开始在不同的系统上进行测量，您很可能会得到各种不同的结果。

## 更新

除此之外，不会导致任何事情的代码可能会被浏览器 js 引擎优化（不执行，只执行一次，以更好的方式执行）。让我举一个基于你的例子（所有东西都用铬执行）：

```
function start() {
  window.setInterval(function() {
    update();
  }, 1);
}

lastTime = new Date;
 numFrames = 0;
lastFrames = 0;

function update() {
  console.log(new Date() - lastTime);
  lastTime = new Date();
  for (var i=0; i < 1000000; i++) { var k = 'string' + 'string' + 'string' }
} 
```

您会发现点击后的第一次执行`start`需要很长时间，而进一步的执行则不需要（至少在 webkit 中）。那是因为迭代中的代码没有改变任何东西，并且浏览器在第一次执行后识别出它并且不再执行它。

让我们看看如果执行必须保持与外部变量的绑定（`k`在本例中），它会如何变化：

```
var k;

function update() {
  console.log(new Date() - lastTime);
  lastTime = new Date();
  for (var i=0; i < 1000000; i++) { k = 'string' + 'string' + 'string' }
} 
```

好的，这里我们对执行时间有一些影响，但还是相当快的。浏览器知道 for 循环总是做同样的事情，但它只执行一次。那么，例如，如果迭代确实创建了一个巨大的字符串呢？

```
var k;

function update() {
  console.log(new Date() - lastTime);
  lastTime = new Date();
  k = '';
  for (var i=0; i < 1000000; i++) { k += i.toString() }
} 
```

这使浏览器陷入了痛苦的境地，因为它必须返回这个数百万个字符的字符串。我们能让这更痛苦吗？

```
var k;

function update() {
  console.log(new Date() - lastTime);
  lastTime = new Date();
  k = '';
  for (var i=0; i < 1000000; i++) { k = ['hey', 'hey', 'hey'].join('') }
} 
```

这种数组连接无法优化，并且会缓慢而痛苦地阻塞几乎所有浏览器。

因此，在您的情况下，繁重的执行可能会导致更多内存被保留并由优化器立即释放。可能是新鲜空气、额外内存和空闲 cpu 让你的函数高兴地跳跃，但正如我所说，如果没有查看你繁重的执行代码，那里没有什么可靠的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T00:29:04.220

我可以想到浏览器可能会在一段时间后减慢您的时间间隔的一些原因（这都是猜测，但我认为这就是您所要求的）：

1.  需要安排其他事情来运行，例如垃圾收集等……这需要时间。
2.  浏览器认为您的间隔计时器占用了过多的 CPU 或消耗了过多的电池，因此它会在一段时间后限制您。有些浏览器被记录为当标签失去焦点时执行此操作，所以我可以想象他们也可能在其他时间进行。
3.  浏览器最初会推迟需要执行的其他工作以支持您的时间间隔，但过了一段时间，它不再推迟该工作并且需要一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T23:06:28.540

问题：`What is the browser looking for to justify running setInterval closer to what I ask it to?`

答：没什么。它会尽可能快地完成。如果它走得太快，它会等待。“尽可能”将取决于环境。

问题：`However, as the page continues to run, the frame rate will continue to decrease, even if the tab is still focused.`

**这是一个操作系统问题。**

当您的代码第一次在页面加载时运行时，它会报告 250 作为帧速率，并一直持续到操作系统决定限制 CPU 或内存分配给浏览器进程。浏览器仍然要求以可能的最小时间间隔（在 Firefox 的情况下为 4 毫秒）处理此问题，但操作系统可能真的不在乎。运行 30 分钟后，仍然有可能获得操作系统的注意并恢复到满 250 帧速率。

只是重申一下，这与浏览器无关。

尝试将其作为您的“密集循环”，然后尝试解释结果是如何归因于浏览器的：

```
for (var intense = 0; intense < 10000; intense++) {
        var dec = intense * (5039 + intense);
        for (var processing = 0; processing < intense; processing++) {
            var float = dec / (processing + 1);
        }
} 
```

运行它时你应该能听到你的 cpu 哭泣，除非你有一台非常棒的计算机（这与浏览器**完全无关**）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T21:03:54.220

首先，如果你正在做图形（帧的谈话暗示你是），你可能应该使用[requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)而不是 setInterval。

我在 chrome 20 中运行了您的代码，但在最初的几分钟内我没有看到低于 244 的帧速率。你看到与此不同的东西吗？大多数帧速率为 249 或 250，这是使用 setInterval 时规范允许的最大值，即使在运行一段时间后也是如此。

在很长一段时间内，我平均每秒处理 247 帧，这种浪费很容易归因于不合时宜的垃圾收集。

# symfony - Symfony2 日志文件轮换是否需要 SIGHUP 或重新启动？

> ID：11370527
> 
> 赞同：0
> 
> 时间：2012-07-06T22:37:29.890
> 
> 标签：symfony

我正在处理一个 logrotate 配置文件来旋转 Symfony2 日志。我必须重新启动任何东西吗？对于标准的 Symfony2 应用程序，我看不到任何使日志文件文件描述符保持打开状态的东西。

这是我想出的旋转日志的方法：

```
/user/app/logs/*.log
{
    missingok
    notifempty
} 
```

如果有一个使用 Symfony2 框架的长时间运行的进程（守护进程），我想在日志轮换期间必须重新启动该进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:08:11.867

PHP 应用程序使用“无共享”方法 - 每个页面加载都从头开始，没有打开的文件描述符或类似文件。即使使用 FastCGI 方法，它可以防止 PHP 引擎为每个请求重新执行，情况仍然如此。

所以不，您不需要重新启动任何东西 - 新请求将输出到新的日志文件，无需额外的努力。

可能不是这种情况的一种情况是使用工作进程（例如，服务队列），但如果您使用它，您已经知道了这一点。

# iphone - 表视图自定义

> ID：11370529
> 
> 赞同：0
> 
> 时间：2012-07-06T22:37:38.563
> 
> 标签：iphone, objective-c, ios

我正在创建一个应用程序，我有一个需要填写的表格。我想实现一个类似于下图的解决方案。特别是我想实现顶部。表格单元格旁边的照片。

如何对表格视图执行此操作的任何建议或想法。我知道它是一个小组表，但我从未见过细胞像那样推过来。

![在此处输入图像描述](../Images/90419d685ac1334a6132e41baa4ecd4d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:39:27.647

我怀疑顶部是一个 tableView。它可能是一个分组表（First、Last Initial），其中有一个节标题（名称）和一个 UIImageView（添加照片）。如果整个东西上下移动（可滚动），那么它很可能也嵌入在 ScrollView 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:41:31.413

顶部可能是一个单元格，其中嵌入了 a`UIImageView`和 a 。`UITableView`我想实现该顶部的唯一方法是单独创建它`UIView`并将其添加到单元格的`contentView`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:43:12.927

通过一切编程，有很多方法可以给猫剥皮。如果我要解决这个问题，我会使用分组表视图样式，在第 0 部分有一个单元格显示：“通过填充...加入”并且没有部分标题，第 1 部分中的 1 个单元格带有用户的图像占位符并且没有部分标题，然后一些文本字段看起来像右侧的分组表格视图单元格。然后第二部分将有看起来像 3 个标准 ios 单元格和一个部分标题，该部分标题是一个标有“联系信息”的标签。

有时你需要定制的东西不是 iOS 平台预测的那样（参考第 1 部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T23:22:19.960

一种方法：将按钮、名称和照片元素添加为 tableHeaderView。

另一个：不要对所有事情都使用 UITableView。在这种情况下，使用手动布局的 UIScrollView 会更容易。

# mysql - 像 JOIN 一样创建表

> ID：11370531
> 
> 赞同：2
> 
> 时间：2012-07-06T22:37:48.267
> 
> 标签：mysql, sql

```
SELECT *
FROM t1
JOIN t2
ON t1.id1 = t2.id2 
```

在 MySQL 上生成这些表的 JOIN。如何将结果存储在第三个表中，而不必逐列定义它。

我试过这个来创建第三个表，但它不起作用。

```
CREATE TABLE t3 LIKE
(
SELECT *
FROM t1
JOIN t2
ON t1.id1 = t2.id2
) a 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T22:40:24.443

如果您希望新表包含您的结果`SELECT`：

```
CREATE TABLE t3 SELECT * FROM t1 JOIN t2 ON t1.id1 = t2.id2 
```

或者，如果您只是希望它基于联接的架构：

```
CREATE TABLE t3 SELECT * FROM t1 JOIN t2 ON t1.id1 = t2.id2 WHERE FALSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:40:00.503

这应该这样做：

```
SELECT * into t3
FROM t1
JOIN t2
ON t1.id1 = t2.id2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:40:26.163

您可以创建一个类似于表格的[视图：](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

```
CREATE VIEW t3 AS
SELECT *
FROM t1
JOIN t2
ON t1.id1 = t2.id2 
```

然后您可以在其他联接中引用此视图，就好像它是它自己的表一样。

# css - CSS 定位

> ID：11370532
> 
> 赞同：0
> 
> 时间：2012-07-06T22:37:53.137
> 
> 标签：css, position

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:43:54.913

将页脚与内容一样向下推会有所帮助。

```
top:541px; 
```

我假设所有这些空`p`标签都是为了向下推页脚，尝试删除它们并实现这个 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:46:35.240

```
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
   background:#6cf;
} 
```

# c++ - 将 std::string 转换为 LPCSTR 时的奇怪行为

> ID：11370536
> 
> 赞同：0
> 
> 时间：2012-07-06T22:38:05.523
> 
> 标签：c++, string, type-conversion, stdstring, lpcstr

`std::string`当我在将 a 转换为 a时偶然发现一个奇怪的行为时，我正在玩一些字符串`LPCSTR`。

我写了一个小测试应用程序来演示：

```
#include <string>
#include <Windows.h>
#include <iostream>

using namespace std;

int main ()
{
    string stringTest = (string("some text") + " in addition with this other text").c_str(); 
    LPCSTR lpstrTest= stringTest.c_str();
    cout << lpcstrTest << '\n';

    cout << (string("some text") + " in addition with this other text").c_str() << '\n';

    LPCSTR otherLPCSTR= (string("some text") + " in addition with this other text").c_str();
    cout << otherLPSTR;
} 
```

这是输出：

```
some text in addition with this other text
some text in addition with this other text
îþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþ...[more unreadable stuff]... 
```

我只是想知道是什么导致了这种奇怪的行为。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:48:29.627

```
LPCSTR otherLPCSTR= (string("some text") + " in addition with this other text").c_str();
cout << otherLPSTR; 
```

那个部分

```
 (string("some text") + " in addition with this other text") 
```

创建一个所谓的“临时”对象，该对象没有名称，并在包含它的语句完成时被破坏。您从中获得 c_str() ，它指向该临时对象的一些内部存储。您将 c_str() 分配给 otherLPCSTR 变量。之后，“包含临时字符串的语句”已经完成，因此临时字符串被破坏，而其他LPCSTR 指向“无处”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:48:57.850

由表达式创建的临时对象将一直存在，直到完整表达式的评估完成为止。一旦评估了完整的表达式，它的所有临时变量都会自动销毁。

这就是发生的事情

```
LPCSTR otherLPCSTR = 
  (string("some text") + " in addition with this other text").c_str(); 
```

在此语句之后，临时对象立即被销毁，并`otherLPCSTR`最终指向死内存。

在第一种情况下，这`stringTest`不是暂时的。它一直存在到 的末尾`main`，这意味着该`lpstrTest`指针仍然有效。

在第二种情况下，临时`std::string`对象在它还活着的时候立即用于输出。

只有在第三种情况下，您才试图存储一个指针，如上所述，该指针会失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:51:32.733

返回的指针`c_str()`只有在其字符串对象存在时才有效。

```
// A copy of a temporary string is made here. The temporary is destructed 
// but stringTest stays in scope until the end of main
string stringTest = (string("some text") + " in addition with this other text").c_str();

LPCSTR lpstrTest= stringTest.c_str();
cout << lpcstrTest << '\n';

// the temporary is in scope until the end of the full expression, so this is fine.

cout << (string("some text") + " in addition with this other text").c_str() << '\n';

// But this isn't. At the end of the line, the temporary string object is long gone.
// otherLPCSTR now points to deallocated memory.
LPCSTR otherLPCSTR= (string("some text") + " in addition with this other text").c_str();

// And here you're accessing that memory.
cout << otherLPSTR; 
```

# android - 接口抛出转换错误的访问方法

> ID：11370538
> 
> 赞同：0
> 
> 时间：2012-07-06T22:38:30.717
> 
> 标签：android, xamarin.android

```
public class NewCallInfo
{
    public string Site { get; set; }
    public string CustomerName { get; set; }
    public string CustomerPhone { get; set; }
    public string CustomerExt { get; set; }
    public string CustomerAddress { get; set; }
    public string CustomerCity { get; set; }
    public string CustomerState { get; set; }
    public string CustomerZip { get; set; }
    public string ServiceType { get; set; }
    public string Priority { get; set; }
    public string Description { get; set; }
    public string Technician { get; set; }
    public string Serial { get; set; }
    public string Model { get; set; }
}

public interface INewCall
{
    NewCallInfo GetNewCallInfo(string site);
}

public class HandleNewCall : INewCall
{
   private SqLiteHelper Helper {get;set;}

   public HandleNewCall(Context context)
   {
      Helper = new SqLiteHelper(context);
   }
   public NewCallInfo GetNewCallInfo(string site)
   {
      string whereClause = string.Format("Where Site='{0}'", site);

        ICursor callCursor = _helper.ReadableDatabase.Query("NewCall", null, whereClause, null, null, null, null);
        NewCallInfo newCall = new NewCallInfo();

        while(callCursor.MoveToNext())
        {
            newCall.Site                =       callCursor.GetString(0);
            newCall.CustomerName        =       callCursor.GetString(1);
            newCall.CustomerPhone       =       callCursor.GetString(2);
            newCall.CustomerExt         =       callCursor.GetString(3);
            newCall.CustomerAddress     =       callCursor.GetString(4);
            newCall.CustomerCity        =       callCursor.GetString(5);
            newCall.CustomerState       =       callCursor.GetString(6);
            newCall.CustomerZip         =       callCursor.GetString(7);
            newCall.ServiceType         =       callCursor.GetString(8);
            newCall.Priority            =       callCursor.GetString(9);
            newCall.Description         =       callCursor.GetString(10);
            newCall.Technician          =       callCursor.GetString(11);
            newCall.Serial              =       callCursor.GetString(12);
            newCall.Model               =       callCursor.GetString(13);
        }

        if (string.IsNullOrEmpty(newCall.Site))
            newCall.Site = "None";

        return newCall;
   }
}

class MyApp : Application
{
    public INewCall NewCall { get; set; }

    public MyApp(IntPtr handle, JniHandleOwnership transfer)
        :base(handle, transfer)
    {

    }

    public override void OnCreate()
    {
       NewCall = new HandleNewCall(this);
    }
} 
```

然后在我的活动中：

```
var call = ((MyApp) Application).NewCall.GetNewCallInfo("siteString"); 
```

我得到“无法从源类型转换为目标类型”。上面所有带有接口和应用程序子类的东西对我来说都是非常新的，但我觉得我所做的一切都和网上的例子一样。即在[本例](http://www.gregshackles.com/2011/02/using-a-database-in-monodroid-applications/)中。几个小时以来一直把我的头撞在墙上。有人看到我遗漏的任何明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:07:02.557

您的类缺少正确生成 AndroidManifest.xml 的[`[Application]`](http://docs.mono-android.net/?link=T%3aAndroid.App.ApplicationAttribute)属性`MyApp`，因此 Android 不知道将其用作您的应用程序类。因此，尝试将[`Application`](http://docs.mono-android.net/?link=P%3aAndroid.App.Activity.Application)属性强制转换`MyApp`为失败，因为该对象实际上不是您的类的实例。更新您的类定义，如下所示：

```
[Application]
public class MyApp : Application
{
    // ...
} 
```

# c# - 在这种情况下如何减少垃圾的产生

> ID：11370541
> 
> 赞同：2
> 
> 时间：2012-07-06T22:39:00.063
> 
> 标签：c#, garbage-collection, slimdx

我的游戏已经到了产生过多垃圾并导致 GC 时间过长的地步。我一直在四处走动，减少了很多产生的垃圾，但是有一个地方过于频繁地分配了大量内存，我一直坚持如何解决这个问题。

我的游戏是一个 Minecraft 类型的世界，当你走路时会生成新的区域。我有一个大的、可变大小的数组，它是在创建用于存储地形顶点数据的新区域时分配的。数组填充数据后，将其传递给 slimdx DataStream，以便用于渲染。

问题在于这是一个可变大小的数组，需要将它传递给 slimdx，它会在其上调用 GCHandle.Alloc。由于它的大小可变，因此可能必须调整大小才能重用它。我也不能只为每个区域分配一个最大大小的数组，因为它需要大量的内存。由于与 slimdx 的 GCHandle 业务，我无法使用列表。

到目前为止，仅在需要更大时调整数组的大小似乎是我唯一可行的选择，但它可能效果不佳，实施起来可能会很痛苦。我需要单独跟踪数组的实际大小，并使用不安全的代码来获取指向数组的指针并将其传递给 slimdx。它最终也可能最终使用大量内存，以至于我不得不偶尔将所有数组的大小减小到所需的最小值。

我犹豫要不要跳过这个解决方案，并想知道是否有人对此有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:45:18.417

由于 SlimDX 是开源的，而且速度太慢，现在是时候更改开源以满足您的性能需求了。我在这里看到的是，您希望保留一个更大的数组，但只将实际使用的区域交给 SlimDX，以防止为这个潜在的巨大数组分配额外的内存。

在 .NET Framework 中有一个名为[ArraySegment](http://msdn.microsoft.com/en-us/library/1hsbd92d.aspx)的类型正是为此目的而创建的。

```
// Taken from MSDN
// Create and initialize a new string array.
String[] myArr = { "The", "quick", "brown", "fox", "jumps", "over", "the", 
                   "lazy", "dog" };

// Define an array segment that contains the middle five values of the array.
ArraySegment<String> myArrSegMid = new ArraySegment<String>( myArr, 2, 5 );

public static void PrintIndexAndValues( ArraySegment<String> arrSeg )  
{
   for ( int i = arrSeg.Offset; i < (arrSeg.Offset + arrSeg.Count); i++ )  
   {
        Console.WriteLine( "   [{0}] : {1}", i, arrSeg.Array[i] );
   }
   Console.WriteLine();
} 
```

也就是说，我发现 ArraySegment 的使用有些奇怪，因为我总是必须使用偏移量和索引，它的行为不是常规数组。相反，您可以提取自己的结构，该结构允许基于零的索引，这更容易使用，但代价是每个基于索引的访问都会花费您并添加基本偏移量。但是，如果使用模式主要是 foreaches 那就没关系了。

我遇到过 ArraySegment 也太昂贵的情况，因为您确实每次都分配一个结构并按堆栈上的值将其传递给所有方法。您需要密切关注它的使用情况是否正常，以及它是否没有以过高的速率分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:54:54.507

我建议与 slimdx 库进行更紧密的集成。它是开源的，因此您可以深入挖掘并找到渲染所需的关键路径。然后，您可以使用 DMA 风格的内存共享方法进行更紧密的集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T00:46:39.130

我对您对旧库 slimdx 的问题表示同情，它可能不兼容 .NET。我处理过这样的情况。

建议：

1.  使用性能更高效的通用列表或数组，如 ArrayList。它会跟踪数组的大小，因此您不必这样做。一次分配列表，块，例如一次 100 个元素。
2.  使用 C++ .NET 并利用不安全数组或 .NET 类（如 ArrayList）。
3.  **更新**：使用虚拟内存的想法。将一些数据保存到 XML 文件或 SQL 数据库中，从而减轻大量内存。

我意识到无论哪种方式都是一场赌博。

# gwt - 关于使用由 StackLayoutPanel 包装的 DataGrid 的错误

> ID：11370542
> 
> 赞同：1
> 
> 时间：2012-07-06T22:39:08.380
> 
> 标签：gwt, datagrid, redraw, gwt-tablayoutpanel, layoutpanels

我尝试使用 DataGrid 并将其放在 stacklayoutpanel 中。当我为 ListDataProvider 提供数据时，CellTable 在浏览器中不可见，因为它位于非活动选项卡上（尽管它在 DOM 树中可见）。切换到包含 CellTable 的选项卡后，其中没有数据。如果选项卡在提供数据时处于活动状态，则表格已正确填写。由于我已使列可排序，因此如果单击排序，数据将正确显示。我希望在单击另一个原生选项卡时自动显示数据。如果我切换到使用 celltable，这将不是问题。

我知道这是 GWT 中的错误，它已在 GWT 2.5 RC 中修复。但是我的老板还不想让我使用 GWT2.5RC。我必须解决这个问题。我知道有人说 datagrid.redraw() 可以修复它。我累了，但显示很奇怪。例如，我在DataGrid中有10行，选择第二个选项卡后，调用redraw()，自动显示数据，但只有10px的块显示数据和滚动条。我必须向下滚动才能看到其他行。选项卡底部有很多空间未使用。谁能告诉我如何解决这个问题？那么我是否使用了错误的方法来修复它？我还能做些什么来解决这个问题。谁能给我一些提示。

谢谢

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:25:25.540

我已经为这件事苦苦挣扎了将近 3 天。感谢 Papick G. Taboada 和 Thomas Broyer。你们的想法真的很有帮助。基本上，您的任何一个解决方案都不能解决问题。但是在我结合了这两种解决方案之后，dang~它起作用了！！。

所以。完整的解决方案是，在非活动选项卡上添加选择处理程序，然后在调用事件时，使用 datagrid.onResize() 和 stackLayoutPanel.forcelayout()。这可以解决我的问题。我也尝试用 datagrid.redraw() 替换 datagrid.onResize()。它也有效。

我希望这可以帮助其他在使用 GWT 2.5RC 之前遇到同样问题的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T07:27:21.813

我在 StackPanelLayout 中的 DataGrid 和 Panel 中遇到了这个问题。DataGrid 实现了 RequiresResize，所以我让包含 DataGrid 的面板实现了 RequiresResize，这样它就可以为 DataGrid 调用 onResize()。

在包含 DataGrid 的面板中

```
@Override
public void onResize()
{
    dataGrid.onResize();
} 
```

在 StackLayoutPanel 上

```
 stackLayoutPanel.addSelectionHandler(new SelectionHandler<Integer>() {

        // http://code.google.com/p/google-web-toolkit/issues/detail?id=6889
        @Override
        public void onSelection(SelectionEvent<Integer> event) {
            Integer selectedItem = event.getSelectedItem();
            StackLayoutPanel panel = (StackLayoutPanel) event.getSource();
            Widget  selectedWidget = panel.getWidget(selectedItem);
            if (selectedWidget != null && selectedWidget instanceof RequiresResize)
            {
                ((RequiresResize)selectedWidget).onResize();
            }
        }
    }); 
```

我相信更一般的答案是 StackLayoutPanel 中包含实现 RequiresResize 的小部件的任何容器也应该实现 RequiresResize 并将其传递。

# r - 每行的集数

> ID：11370548
> 
> 赞同：0
> 
> 时间：2012-07-06T22:39:39.577
> 
> 标签：r

我敢肯定这已经被问过，但对于我的生活，我无法弄清楚要搜索什么！

我有以下数据：

```
x y  
1 3  
1 3  
1 3  
1 2  
1 2  
2 2  
2 4  
3 4  
3 4 
```

我想输出一个运行计数，每次 x 或 y 更改值时都会重置。

```
x y o  
1 3 1  
1 3 2  
1 3 3  
1 2 1  
1 2 2  
2 2 1  
2 4 1  
3 4 1  
3 4 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:49:07.820

尝试类似的东西

```
df<-read.table(header=T,text="x y
1 3
1 3
1 3
1 2
1 2
2 2
2 4
3 4
3 4")

cbind(df,o=sequence(rle(paste(df$x,df$y))$lengths))

> cbind(df,o=sequence(rle(paste(df$x,df$y))$lengths))
  x y o
1 1 3 1
2 1 3 2
3 1 3 3
4 1 2 1
5 1 2 2
6 2 2 1
7 2 4 1
8 3 4 1
9 3 4 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:49:32.627

在看到@ttmaccer 之后，我发现我的第一次尝试`ave`是错误的，这可能是需要的：

```
> dat$o <- ave(dat$y, list(dat$y, dat$x), FUN=seq )
# there was a warning but the answer is corect.
> dat
  x y o
1 1 3 1
2 1 3 2
3 1 3 3
4 1 2 1
5 1 2 2
6 2 2 1
7 2 4 1
8 3 4 1
9 3 4 2 
```

# matlab - 从 Matlab CSC 转换为 CSR 格式

> ID：11370549
> 
> 赞同：2
> 
> 时间：2012-07-06T22:39:52.643
> 
> 标签：matlab, cuda, sparse-matrix, mex

我正在使用 mex 桥对 Matlab 中的稀疏矩阵执行一些操作。为此，我需要将输入矩阵转换为 CSR（压缩行存储）格式，因为 Matlab 将稀疏矩阵存储在 CSC（压缩列存储）中。

我能够得到值数组和 column_indices 数组。但是，我正在努力获取 CSR 格式的 row_pointer 数组。是否有任何 C 库可以帮助从 CSC 转换为 CSR？

此外，在编写 CUDA 内核时，使用 CSR 格式进行稀疏操作是否有效，或者我应该只使用以下数组：- 行索引、列索引和值？

哪个可以让我更好地控制数据，最大限度地减少自定义内核中的 for 循环数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:08:23.257

压缩行存储类似于压缩列存储，只是转置了。所以最简单的方法是在将矩阵传递给 MEX 文件之前使用 MATLAB 对其进行转置。然后，使用函数

```
Ap = mxGetJc(spA);
Ai = mxGetIr(spA);
Ax = mxGetPr(spA); 
```

获取内部指针并将它们视为行存储。Ap 是行指针，Ai 是非零条目的列索引，Ax 是非零值。请注意，对于对称矩阵，您根本不需要做任何事情！CSC 和 CSR 是一样的。

使用哪种格式很大程度上取决于您以后要对矩阵做什么。例如，查看稀疏矩阵向量乘法的[矩阵格式](http://www.nvidia.com/object/nvidia_research_pub_001.html)。那是经典论文之一，从那时起研究已经转移，因此您可以进一步环顾四周。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:19:29.793

我最终使用 CUSP 库将 CSC 格式从 Matlab 转换为 CSR，如下所示。

`A`从 matlab获取矩阵后，我得到了它的`row`,`col`和`values`向量，我将它们分别复制到`thrust::host_vector`为它们每个创建的中。

之后，我创建了两个`cusp::array1d`类型`Indices`，`Values`如下所示。

```
 typedef typename cusp::array1d<int,cusp::host_memory>Indices;   
    typedef typename cusp::array1d<float,cusp::host_memory>Values;
    Indices row_indices(rows.begin(),rows.end());
    Indices col_indices(cols.begin(),cols.end());
    Values  Vals(Val.begin(),Val.end()); 
```

在哪里`rows`，是我从 Matlab 得到的`cols`。`Val``thrust::host_vector`

之后，我创建了一个`cusp::coo_matrix_view`如下所示的。

```
typedef cusp::coo_matrix_view<Indices,Indices,Values>HostView;
HostView Ah(m,n,NNZa,row_indices,col_indices,Vals); 
```

其中`m`和是我从稀疏矩阵函数中`n`得到的参数。`NNZa``mex`

我将此视图矩阵复制到`cusp::csr_matrix`设备内存中，并设置了正确的尺寸，如下所示。

```
 cusp::csr_matrix<int,float,cusp::device_memory>CSR(m,n,NNZa);
    CSR = Ah; 
```

之后，我只是将这个 CSR 矩阵的三个单独的内容数组复制回主机，使用`thrust::raw_pointer_cast`where 已经`mxCalloc`编辑了具有适当维度的数组，如下所示。

```
 cudaMemcpy(Acol,thrust::raw_pointer_cast(&CSR.column_indices[0]),sizeof(int)*(NNZa),cudaMemcpyDeviceToHost);
 cudaMemcpy(Aptr,thrust::raw_pointer_cast(&CSR.row_offsets[0]),sizeof(int)*(n+1),cudaMemcpyDeviceToHost);
 cudaMemcpy(Aval,thrust::raw_pointer_cast(&CSR.values[0]),sizeof(float)*(NNZa),cudaMemcpyDeviceToHost); 
```

希望这对使用的任何人都有`CUSP`用`Matlab`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T02:58:14.160

你可以这样做：

```
n = size(M,1);
nz_num = nnz(M);
[col,rowi,vals] = find(M');
row = zeros(n+1,1);
ll = 1; row(1) = 1;
for l = 2:n
    if rowi(l)~=rowi(l-1)
        ll = ll + 1;
        row(ll) = l;
    end
end
row(n+1) = nz_num+1;` 
```

它对我有用，希望它可以帮助别人！

# javascript - FB.login 未触发 HTML5 iOS Web 应用程序

> ID：11370550
> 
> 赞同：3
> 
> 时间：2012-07-06T22:39:56.720
> 
> 标签：javascript, ios, facebook, mobile

这是针对非本地解决方案的，只是我正在构建的响应式网站。在浏览器中一切正常，但是当我调用 FB.login(); 时没有任何反应。

```
$(function() {
   $.getScript("https//connect.facebook.net/en_US/all.js", function() {

        FB.init({
            appId      : fbAppId,
            status     : true,
            cookie     : true,
            oauth      : true
        });

        alert(FB); // [object object]

        FB.getLoginStatus(function(response) {
            alert(response.status);
            // if the iOS simulator is logged into facebook
            // this says "connected"

            // if the iOS simulator is NOT logged in
            // it says "unknown"
        });

        FB.login(function(res) {
            // never gets here on iOS simulator
            // works fine on browsers
        });

   }
}); 
```

问题是当我没有登录 facebook 时，我试图让应用程序弹出打开 facebook 外观屏幕。即使相同的代码在浏览器中运行，它也永远不会进入 FB.login。

感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:24:41.487

事实证明，您不能在移动浏览器上调用 FB.init 和 FB.login()。我试图在用户需要登录之前保存加载 SDK，但我想我必须只使用悬停意图或其他东西。

一旦我在页面加载时加载了 SDK，然后 FB.login() onclick() 就足以让它工作了。

皮塔饼

# c# - Google Plus API 获取相册/视频

> ID：11370554
> 
> 赞同：2
> 
> 时间：2012-07-06T22:40:13.913
> 
> 标签：c#, .net, google-plus

如何获取用户或页面的 Google Plus 相册？我可以把活动（帖子/视频/照片）放在一起。

这是我正在使用的代码：

```
var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
provider.ClientIdentifier = GoogleIdentifier;
provider.ClientSecret = GoogleSecret;

ActivitiesResource.Collection collection = new ActivitiesResource.Collection();

var service = new PlusService();
service.Key = GoogleKey;
ActivitiesResource.ListRequest list = service.Activities.List(ProfileID, collection);

foreach (Activity activityFeed in list.Fetch().Items)
{
    var title = activityFeed.Title;
    foreach (Activity.ObjectData.AttachmentsData attachment in activityFeed.Object.Attachments)
    {
         if (attachment.ObjectType == "photo")
        {
            //add to list of photo
        }

        else if (attachment.ObjectType == "video")
        {
            //add to list of video
        }
    }
} 
```

此功能提供活动提要。我需要获取页面所有专辑的列表。

我正在使用[google-api-dotnet-client](https://developers.google.com/+/downloads/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:53:20.610

Google+ API 尚不支持直接访问相册和照片。您可以使用 Picasa 网络相册数据 API（因为这是存储 Google+ 照片的位置），使用与访问 Google+ API 相同的个人资料/页面 ID。 [https://developers.google.com/picasa-web/](https://developers.google.com/picasa-web/)

# java - Spring-ws VS Apache cxf VS Apache Axis2 VS Metro

> ID：11370555
> 
> 赞同：4
> 
> 时间：2012-07-06T22:40:20.797
> 
> 标签：java, jax-ws, cxf, axis2, spring-ws

我需要创建肥皂网络服务。我已经有了 wsdl 和接口和实现（作为 pojo）。

我现在在主题之间进行选择。我需要能够：

*   在 servlet 容器中作为 servlet 工作
*   在我的 web.xml 中只需要一个 servlet 映射
*   有良好的spring集成（因为我的服务实现是spring bean）
*   不需要我添加注释。我的接口或实现上没有注释。

*   Spring-ws：看起来很酷，但据我了解，它迫使我直接处理我不想做的 XML。我希望框架反序列化消息并将其作为参数传递给我的 POJO。

*   Apache cxf 功能强大并且具有 spring 集成，但是如果我使用 Jax-WS 前端，我将不得不使用注释，并且我不想碰我的 POJO。简单的前端呢？

*   Metro 是 Jax-WS RI，因此它在很大程度上依赖于注解。

Axis2 似乎是我的选择。你会选择什么？

* * *

只想告诉我要做什么：我们的应用程序使用 SOAP 连接到远程服务。他们给了我们 WSDL，我们生成了代理类和 DTO，所有这些东西都打包在 jar 中并存储在 VCS 中。现在我需要为这个 Web 服务编写仿真。而且我不想生成新的 DTO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:06:31.010

鉴于您的要求，我认为 Spring WS 非常适合您。您不需要直接处理 XML。Spring 将序列化/反序列化多种类型的对象，包括所有数据传输对象。它们应该只是带注释的 JAXB 实体。查看此信息：[http ://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#d5e1063](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#d5e1063)

如果您已经有一个 WSDL，您可以从该 WSDL 生成您的 DTO 对象。有几种工具可以做到这一点，包括大多数 IDE。

# sql - SQL 数据透视表不工作

> ID：11370558
> 
> 赞同：0
> 
> 时间：2012-07-06T22:40:28.940
> 
> 标签：sql, sql-server-2005, pivot, unpivot

SQL 2005

我有一个临时表：

```
 Year         PercentMale   PercentFemale  PercentHmlss   PercentEmployed  TotalSrvd
 2008           100                0           0              100              1
 2009           55                40           0               80             20
 2010           64                35           0               67            162
 2011           69                27           0               34            285
 2012           56                43          10                1             58 
```

我想创建一个查询来显示这样的数据：

```
 2008    2009    2010    2011    2012
 PercentMale         100     55      64      69      56 
 PercentFemale        -      40      35      27      43 
 PercentHmlss         -      -       -       -       10 
 PercentEmployed     100     80      67      34      1 
 TotalSrvd            1      20     162     285      58 
```

我可以使用数据透视表来完成此操作吗？如果是这样，怎么做？我试过使用支点，但没有成功。

```
 select PercentHmlss,PercentMale,Percentfemale,
     PercentEmployed,[2008],[2009],[2010],[2011],[2012] from 

 (select PercentHmlss,PercentMale, Percentfemale, PercentEmployed,
     TotalSrvd,year from @TempTable)as T

  pivot (sum (TotalSrvd) for year 
     in ([2008],[2009],[2010],[2011],[2012])) as pvt 
```

这是结果：

```
 PercentHmlss   PercentMale     Percentfemale PercentEmployed [2008]  [2009]    [2010]      [2011]   [2012]
    0               55              40            80           NULL     20      NULL         NULL     NULL
    0               64              35            67           NULL    NULL     162            NULL  NULL
    0               69              27            34           NULL    NULL     NULL          285     NULL
    0              100               0           100             1     NULL     NULL         NULL    NULL
   10               56              43             1           NULL    NULL     NULL         NULL     58 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:57:30.123

为此，您需要先执行[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)，然后执行[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
SELECT *
from
(
  select year, quantity, type
  from 
  (
    select year, percentmale, percentfemale, percenthmlss, percentemployed, totalsrvd
    from t
  ) x
  UNPIVOT 
  (
    quantity for type
    in 
    ([percentmale]
     , [percentfemale]
     , [percenthmlss]
     , [percentemployed]
     , [totalsrvd])
  ) u
) x1
pivot
(
  sum(quantity)
  for Year in ([2008], [2009], [2010], [2011], [2012])
) p 
```

查看[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ce488/8)

编辑进一步说明：

您已接近尝试的 PIVOT 查询，因为您获得了`Year`所需列格式的数据。但是，由于您想要数据行中最初包含在列中的数据`percentmale`，`percentfemale`等等 - 您需要先取消透视数据。

基本上，您所做的是获取原始数据并根据年份将其全部放在行中。UNPIVOT 会将您的数据放置在以下格式（[演示](http://sqlfiddle.com/#!3/ce488/10)）中：

```
Year    Quantity    Type
2008    100         percentmale
2008    0           percentfemale
etc 
```

将数据转换为这种格式后，您就可以执行 PIVOT 以获得所需的结果。

# c# - .net File.Copy 复制许多小文件时非常慢（不是通过网络）

> ID：11370566
> 
> 赞同：10
> 
> 时间：2012-07-06T22:41:22.523
> 
> 标签：c#, .net, windows, performance, copy

我正在为自己制作一个简单的文件夹同步备份工具，但在使用 File.Copy 时遇到了很大的障碍。在测试将一个包含约 44,000 个小文件（Windows 邮件文件夹）的文件夹复制到我系统中的另一个驱动器时，我发现使用 File.Copy 比使用命令行和运行 xcopy 复制相同的文件/文件夹慢 3 倍以上。我的 C# 版本需要 16 多分钟来复制文件，而 xcopy 只需要 5 分钟。我曾尝试寻求有关此主题的帮助，但我发现的只是人们抱怨通过网络复制大文件的速度很慢。这既不是大文件问题，也不是网络复制问题。

我发现了[一篇关于更好的 File.Copy 替换的有趣文章](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=854)，但是发布的代码有一些错误，这会导致堆栈出现问题，而且我远没有足够的知识来解决他的代码中的问题。

是否有任何常见或简单的方法可以用更快的方法替换 File.Copy？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T23:24:53.953

要考虑的一件事是您的副本是否具有在副本期间更新的用户界面。如果是这样，请确保您的副本在单独的线程上运行，否则您的 UI 将在复制期间冻结，并且通过阻塞调用更新 UI 会减慢复制速度。

`xcopy`我编写了一个类似的程序，根据我的经验，我的代码比 Windows 资源管理器副本运行得更快（从命令提示符不确定）。

此外，如果您有 UI，请不要更新每个文件；而是更新每 X MB 或每 Y 个文件（以先到者为准），这样可以减少 UI 实际可以处理的更新量。我每 .5MB 或 10 个文件使用一次；这些可能不是最佳的，但它显着提高了我的复制速度和 UI 响应能力。

另一种加快速度的方法是使用 Enumerate 函数而不是 Get 函数（例如`EnumerateFiles`，而不是`GetFiles`）。这些函数会尽快开始返回结果，而不是在列表构建完成后等待返回所有内容。它们返回一个 Enumerable，因此您可以在结果上调用 foreach：foreach(string file in `System.IO.Directory.EnumerateDirectories(path))`。对于我的程序，这也对速度产生了显着影响，并且在像您这样处理包含目录的情况下会更有帮助许多文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T23:02:41.647

在旋转磁盘上最能减慢 IO 操作的一件事是移动磁盘磁头。

可以合理地假设并且可能非常准确，您的许多小文件（都相互关联）在磁盘上的距离比它们与副本目标的距离更近（假设您正在从磁盘的一部分进行复制）到同一磁盘的另一部分）。如果您先复制一点，然后再写入一点，您就会为其他进程打开一个机会窗口，让其他进程移动源磁盘或目标磁盘上的磁头。

XCopy 比 Copy 做得更好的一件事（在这两种情况下都是命令）是 XCopy 在开始将这些文件写出到目标之前读取了一堆文件。

如果您要在同一个磁盘上复制文件，请尝试分配一个大缓冲区以一次读取多个文件，然后在缓冲区已满时写出这些文件）。

如果您正在从一个磁盘读取并写入另一个磁盘，请尝试启动一个线程以从源磁盘读取，并启动一个单独的线程以写入另一个磁盘。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T14:24:44.940

有两种更快的文件复制算法：

如果源和目标是不同的磁盘然后：

*   一个线程连续读取文件并存储在缓冲区中。
*   另一个线程从该缓冲区连续写入文件。

如果源和目标是同一个磁盘，则：

*   读取固定的字节块，一次说 8K，不管有多少文件。
*   将该固定块写入目标，在一个文件或多个文件中。

这样，您将获得显着的性能。

另一种选择是您只需从您的 .net 代码中调用 xcopy 。为什么要使用 File.Copy 来做这件事。您可以使用 Process.StandardOutput 捕获 xcopy 输出并在屏幕上显示，以便向用户显示正在发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T11:34:03.627

我认为您至少可以将其并行化，以便同时处理两个文件。当一个线程正在写入时，另一个线程可能已经在读取下一个文件。如果你有一个文件列表，你可以这样做。使用多个线程将无济于事，因为这将使驱动器移动更多，而不是能够顺序写入..

```
 var files = new List<string>();
 // todo: fill the files list using directoryenumeration or so...
 var po = new ParallelOptions() {MaxDegreeOfParallelism = 2};
 Parallel.ForEach(files, po, CopyAFile);

 // Routine to copy a single file
 private void CopyAFile(string file) { } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T23:05:31.753

我在这个级别上没有很好的经验。为什么不尝试运行包含 xcopy 命令的批处理文件？检查这篇文章：[在 C# 中执行批处理文件](https://stackoverflow.com/questions/5519328/executing-batch-file-in-c-sharp)

# java - 如何通过Ant编译jsoup？

> ID：11370569
> 
> 赞同：2
> 
> 时间：2012-07-06T22:41:31.817
> 
> 标签：java, ant, build, compilation, jsoup

我尝试使用 Ant 编译 jsoup 源。我可以编译成功，但无法通过测试。这是过程：

jsoup 版本：1.6.3；蚂蚁版本：1.8.2

jsoup的源码在目录中

```
src/ 
```

我做了一个构建文件

```
src/build.xml 
```

该文件包含

```
<project name="jsoup">
<target name="compile">
    <mkdir dir="build/classes"/>
    <javac srcdir="src" destdir="build/classes" includeantruntime="false"/>
</target>

<target name="jar">
    <mkdir dir="build/jar"/>
    <jar destfile="build/jar/jsoup.jar" basedir="build/classes">
        <manifest>
            <attribute name="Main-Class" value="StateTrace"/>
        </manifest>
    </jar>
</target>

<target name="run">
    <!--<java jar="build/jar/jsoup.jar" input="htmls/index.html" fork="true"/>-->
    <exec executable="java">
        <arg value="-jar"/>
        <arg value="build/jar/jsoup.jar"/>
        <arg value="htmls/index.html"/>
    </exec>
</target>
</project> 
```

注：1.StateTrace.java是我自己的测试程序（如下）；2\. htmls/index.html 是StateTrace.java 的输入。

```
String html;   // contains the content in htmls/index.html
...
try{
    Document doc = Jsoup.parse(html);
}catch(IOException e){e.printStackTrace();} 
```

然后我用 Ant 编译并运行它：

```
> ant compile
> ant jar
> ant run 
```

在此之后，我得到了这样的错误：

```
run:
 [exec] Exception in thread "main" java.lang.ExceptionInInitializerError
 [exec]     at org.jsoup.nodes.Entities$EscapeMode.<clinit>(Unknown Source)
 [exec]     at org.jsoup.nodes.Document$OutputSettings.<init>(Unknown Source)
 [exec]     at org.jsoup.nodes.Document.<init>(Unknown Source)
 [exec]     at org.jsoup.parser.TreeBuilder.initialiseParse(Unknown Source)
 [exec]     at org.jsoup.parser.TreeBuilder.parse(Unknown Source)
 [exec]     at org.jsoup.parser.HtmlTreeBuilder.parse(Unknown Source)
 [exec]     at org.jsoup.parser.Parser.parse(Unknown Source)
 [exec]     at org.jsoup.Jsoup.parse(Unknown Source)
 [exec]     at StateTrace.main(Unknown Source)
 [exec] Caused by: java.lang.NullPointerException
 [exec]     at java.util.Properties$LineReader.readLine(Properties.java:418)
 [exec]     at java.util.Properties.load0(Properties.java:337)
 [exec]     at java.util.Properties.load(Properties.java:325)
 [exec]     at org.jsoup.nodes.Entities.loadEntities(Unknown Source)
 [exec]     at org.jsoup.nodes.Entities.<clinit>(Unknown Source)
 [exec]     ... 9 more
 [exec] Result: 1

BUILD SUCCESSFUL
Total time: 0 seconds 
```

但是，如果我手动编译了所有的 java 源代码，比如

```
javac src/org/jsoup/*.java src/org/jsoup/parser/*.java src/org/jsoup/examples/*.java src/org/jsoup/nodes/*.java src/org/jsoup/safety/*.java src/org/jsoup/select/*.java src/org/jsoup/helper/*.java 
```

我可以成功编译并通过我的测试。

有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:10:04.793

我没有找到这个错误的根本原因。但我确实让它最终工作。

似乎类文件需要保存在源文件的相同目录中。所以 build.xml 是这样的：

```
<project>
<target name="compile">
    <mkdir dir="build/classes"/>
    <javac srcdir="src" destdir="src" includeantruntime="false"/>
</target>

<target name="clean">
    <delete dir="build"/>
</target>

<target name="jar">
    <mkdir dir="build/jar"/>
    <jar destfile="build/jar/jsoupIns.jar" basedir="src">
        <manifest>
            <attribute name="Main-Class" value="org.jsoup.examples.HtmlToPlainText"/>
        </manifest>
    </jar>
</target>

<target name="run">
    <!--<java jar="build/jar/jsoup.jar"  destdir="build/classes" input="htmls/index.html" fork="true"/>-->
    <exec executable="java">
        <arg value="-jar"/>
        <arg value="build/jar/jsoupIns.jar"/>
        <arg value="http://www.google.com"/>
    </exec>
</target>
</project> 
```

如果您知道此问题的更深层原因的任何线索，请告诉我。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T21:10:59.453

jar 文件需要在jar 目录org/jsoup/nodes 中包含文件entities-base.properties 和entities-full.properties。将文件集添加到 ant jar 任务以包含这些文件就足够了。

```
<target name="local.all.build" >

   <echo message="Building ${local.app.jar.name}" />
   <mkdir dir="${top.dirs.class}"/>
   <mkdir dir="${top.dirs.jar}"/>

   <javac srcdir            = "${local.dirs.source}"
          destdir           = "${top.dirs.class}"
          debug             = "true"
          includeantruntime = "false" >
      <classpath refid="top.app.classpath"/>
      <compilerarg value="-Xlint:unchecked" />
   </javac>

   <jar jarfile   = "${top.dirs.jar}/${local.app.jar.name}"
        basedir   = "${top.dirs.class}" >
      <fileset dir      = "${top.dirs.source}"
               includes = "**/*.properties" />
   </jar>

</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T00:28:33.040

此 build.xml 适用于 ant 1.8.2：

```
<?xml version="1.0"?>
<project name="jsoup">
    <target name="compile">
        <mkdir dir="build/classes"/>
        <javac srcdir="src" destdir="build/classes" includeantruntime="false"/>
    </target>

    <target name="jar">
        <mkdir dir="build/jar"/>
        <jar destfile="build/jar/jsoup.jar" basedir="build/classes">
            <manifest>
                <attribute name="Main-Class" value="org.jsoup.examples.HtmlToPlainText"/>
            </manifest>
        </jar>
    </target>

    <target name="run">
        <!--<java jar="build/jar/jsoup.jar" input="htmls/index.html" fork="true"/>-->
        <exec executable="java">
            <arg value="-jar"/>
            <arg value="build/jar/jsoup.jar"/>
            <arg value="htmls/index.html"/>
        </exec>
    </target>
</project> 
```

... 等待更多信息 ... ... 直到出现，我的猜测是 htmls/index.html 中没有文件

# javascript - Tinybox 2 中的 Ajax

> ID：11370573
> 
> 赞同：0
> 
> 时间：2012-07-06T22:42:02.030
> 
> 标签：javascript, jquery, ajax

单击“注册”时，我有一个[Tinybox 2弹出窗口。](http://www.scriptiny.com/2011/03/javascript-modal-windows/)然后用户必须选择他/她是想注册为用户还是表演者。我想为每个人显示一个不同的注册页面，但首先要问它，所以使用 ajax 处理是最好的。可以在第 5 个示例中完成，如此[处所示。](http://sandbox.scriptiny.com/tinybox2/)这是我当前的代码：

```
<!doctype html>
    <html>
<head>
<title>Regisztrációs típus kiválasztása</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../css/soon.css"/>
    <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
</head>
<body>
<div id="teljes">
<h1>Miként szeretnél regisztrálni?</h1>
<div id="felhasznalo">
    <a href="#felhaszlano_regisztracio" id="felireg">Felhasználóként</a>
</div>
<div id="eloado">
    <a href="../php/register_performer.php">Előadóként</a>
</div>
</div>
<script type="text/javascript">
    $('#felireg').click(function() {
        $.get("../php/register.php");
    });
</script>
</body>
    </html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:04:02.923

如果我理解正确，您想对名为“register.php”的注册文件进行 ajax 调用，并将其显示在 Tinybox

```
$('#felireg').click(function() {
     TINY.box.show({ 
          url:'../php/register.php',width:300,height:150
     })  
}); 
```

这应该有效。

//编辑：假设您的文件仅返回 html：

```
$('#felireg').click(function() {
    $.get("../php/register.php", function(data)
    {
         TINY.box.fill(data);
    });
}); 
```

这应该会更新当前的 Tinybox

# c# - ScatterView 项目方向和 PrimarySurfaceDevice.Tilt

> ID：11370575
> 
> 赞同：0
> 
> 时间：2012-07-06T22:42:17.860
> 
> 标签：c#, wpf, pixelsense, scatterview

我正在使用带有 WPF 的 Visual C# 2010 Express 为 Microsoft Surface 表开发应用程序，但我终生无法找到解决此问题的简单方法。

当使用 ScatterView 控件而不为 scatterview 项设置自定义模板时，该控件会以随机方向和位置将新的 ScatterViewItems 抛出到屏幕上。这个，我喜欢。

我正在垂直屏幕上开发我的程序，在该屏幕上随机抛出 scatterViewItems，除了它们大部分是直立的，并且从不倒置。我得到的是控件知道屏幕是垂直的，并防止项目开始倒置。

但是，当我将程序传输到具有水平屏幕的设备时，这些项目现在随机抛出，并且经常与原始应用程序方向颠倒。ScatterView 控件再次**读取 InteractiveSurface.PrimarySurfaceDevice.Tilt（或类似的东西）并进行补偿。**

**我如何让它停止这样做？**

我只想让我的项目继续出现在 ScatterView 中，就好像屏幕是垂直的一样。我可以欺骗 ScatterView 认为它仍然是垂直的吗？我可以关闭此功能吗？我想避免为 ScatterViewItems 制作自己的模板。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:38:39.017

将每个项目的方向属性设置为 0。随机性仅在您没有明确设置值时发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:22:20.020

好吧，如果没有人能解释 ScatterView 如何知道屏幕倾斜角度，以及如何改变它，那么唯一的解决方案就是生成自己的随机性。作为参考，这是我曾经这样做的：

```
 ScatterViewItem item = new ScatterViewItem();
    item.Content = image;
    Random rand = new Random();

    item.Orientation = RandOrientation(-20, 20);
    item.Center = RandCenter(50);
    SSScatter.Items.Add(item);

    private Point RandCenter(int pad)
    {   
        int randx = rand.Next(pad, (int)SSScatter.Width-pad);
        int randy = rand.Next(pad, (int)SSScatter.Height-pad);
        return new Point(randx, randy);
    }

    private int RandOrientation(int low, int up)
    {
        int randor = rand.Next(low, up);
        return randor;
    } 
```

我仍然希望有办法欺骗 ScatterView ......

# jquery - 滚动时如何让滚动条跟上不断增长的高度：自动？

> ID：11370581
> 
> 赞同：0
> 
> 时间：2012-07-06T22:43:28.407
> 
> 标签：jquery, html, css

我有一个`<div>`具有属性的`scroll:auto`。当文本添加到`<div>`并且高度超过默认高度时，我必须向下滚动才能查看添加的最新文本行。我希望最新的文本行始终可见。如果我能做到这一点，我可以只使用滚动：无而不是自动。我怎样才能做到这一点？我希望你明白我的意思。

**更新：** BilgehanKorkmaz 的解决方案有效，但过不了多久。如果我输入很多文本，滚动将不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:58:05.583

**编辑：**将滚动高度值设置为 .scrollTop()：

```
$("div").scrollTop($("div").get(0).scrollHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:58:43.363

你已经试过了`height:auto;`吗？我不太了解，所以..如果可能，请在[JSFiddle上显示示例](http://jsfiddle.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:01:57.003

用于[`.position().top`](http://api.jquery.com/position/)获取新元素的位置并用于[`scrollTop`](http://api.jquery.com/scrollTop/)滚动到正确位置：

```
var myDiv = $("#myID");

$("button").click(function(){
    var newelementtext = "<p>Your element</p>";

    var el = $(newp).appendTo(myDiv);
    myDiv.scrollTop(el.position().top);
}); 
```

# android - 如何使图像的透明部分不显示

> ID：11370591
> 
> 赞同：0
> 
> 时间：2012-07-06T22:45:41.023
> 
> 标签：android, android-layout

在 Android 中，我在较大的图像上设置两个图像的动画。小的是使用 Photoshop 生成的，可见部分被棋盘图案包围（应该是透明的）。动画运行时，图像出现，但棋盘图案显示为灰色方块。

我怎样才能使它透明。

这是在 layout.xml 中设置 imagebutton 的方式

```
 <ImageButton        
    android:layout_gravity="top|left"
    android:layout_marginLeft="184dp"
    android:layout_marginTop="55dp"
    android:id="@+id/videothumb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:src="@drawable/button_power_on" /> 
```

和动画文件：

```
 <?xml version="1.0" encoding="utf-8"?>
      <alpha
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:fromAlpha="0.0"
      android:toAlpha="0.8"
      android:duration="5000"
      android:repeatMode="reverse"
      android:repeatCount="infinite"
       /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:51:51.703

我认为这是因为您使用的是 ImageButton 并且您看到的灰色是按钮的默认背景。请改用 ImageView。

# html - 如何居中对齐包裹在 SPAN 标签中的 img？

> ID：11370592
> 
> 赞同：4
> 
> 时间：2012-07-06T22:45:55.277
> 
> 标签：html, css

我正在尝试将包裹在 中的图像居中对齐`<span>`，但我在这样做时遇到了麻烦。我已将我的 CSS 和 HTML 上传到 jsfiddle：http: [//jsfiddle.net/7nHhu/1/](http://jsfiddle.net/7nHhu/1/)

我试图让图像以“块”样式与内容居中对齐（即，它上面和下面的所有文本，而不是向左或向右环绕）

任何帮助将不胜感激。

```
.imgframe {
border: 1px solid #EAEAEA;
display: inline-block;
margin: 8px;
}
.imgframe img {
border: 1px solid #FFFFFF;
margin: 0;
background: #F6F6F6;
padding: 8px;
-moz-box-shadow: 2px 2px 5px #CCCCCC;
-webkit-box-shadow: 2px 2px 5px #CCCCCC;
}

<span class="imgframe centerimg"><img src="http://i48.tinypic.com/31368e9.jpg" /></span>​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-19T11:48:07.173

我认为使用 text-align 将文本而不是图像居中更合适。您可以通过设置左右边距自动使图像居中。

```
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    height: auto;
    padding-top: 10px; //margin-top doesn't work
} 
```

[演示](http://jsfiddle.net/7nHhu/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T22:54:43.493

只需制作图像包装块级元素即可`text-align:center;`。

[小提琴](http://jsfiddle.net/7nHhu/2/)

或根据需要将其包装在另一个元素中；

[小提琴](http://jsfiddle.net/7nHhu/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:52:23.223

在 .imgframe 中，添加宽度：100%；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T22:59:50.433

鉴于您的要求，为了保持`.imgframe`元素内联，避免它占用封闭元素的整个宽度，并且在不向标记添加包装元素的情况下工作，以下工作：

```
body {
    text-align: center;
}

body p {
    text-align: left;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7nHhu/13/)。

如果您将 Fiddle 中的元素包裹在一个特定的、可定位的元素中，这可能会减少干扰；而不是`body`，因为上面的方法要求您为.`text-align`中包含的所有元素重置`body`. 所以，就个人而言，我会使用：

```
<div id="contentWrapper">
    <p>...</p>
    <span class="imgframe">
        <img src="..." />
    </span>
    <p>...</p>
</div> 
```

和：

```
#contentWrapper {
    text-align: center;
}

#contentWrapper p {
    text-align: left;
} 
```

只是为了尽量减少事后整理所需的工作量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-20T09:43:34.967

```
span {position: absolute; top:0; left: 0; width: 100%; text-align: center;}
img {width:yourimagewidth; heigth: width:yourimageheigth} 
```

# python - 如何在字符串中转义'？

> ID：11370594
> 
> 赞同：3
> 
> 时间：2012-07-06T22:46:12.970
> 
> 标签：python, sql

我有一个小脚本可以为我创建一个特定的 INSERT SQL 语句。

对于 postgresql，我需要将要插入的值包含在两个单引号内。

不幸的是，一些要插入的值字符串也包含一个单引号，我需要自动转义它们。

```
for line in f:
    out.write('(\'' + line[:2] + '\', \'' + line[3:-1] + '\'),\n') 
```

如何确保内部的任何单引号（例如 ' ）`line[3:-1]`自动转义？

谢谢，

**更新：**

例如这条线

```
CI|Cote D'ivoire 
```

由于失败'

**更新 2：**

我不能在值中使用双引号，例如

`INSERT INTO "App_country" (country_code, country_name) VALUES ("AF", "Afghanistan")`

我收到错误消息：`ERROR: column "AF" does not exist`

但是，这可以正常工作：

`INSERT INTO "App_country" (country_code, country_name) VALUES ('AF', 'Afghanistan')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:40:43.003

如[PEP-249](http://www.python.org/dev/peps/pep-0249/)中所述，DBPI 是各种数据库的通用接口。不同的数据库存在不同的实现。对于 postgres 有[psycopg](http://initd.org/psycopg/)。来自文档：

```
cur.execute(
...     """INSERT INTO some_table (an_int, a_date, a_string)
...         VALUES (%s, %s, %s);""",
...     (10, datetime.date(2005, 11, 18), "O'Reilly")) 
```

您只需在元组中传递参数。底层库为您转义它。这比尝试自己动手更安全、更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T00:04:13.333

转义引号的 SQL 标准方法是将其加倍：

```
'This won''t be a problem.' 
```

因此，用两个引号替换每个引号（并在 Python 中使用双引号以保持理智）：

```
out.write("('" + line[:2] + "', '" + line[3:-1].replace("'", "''") + "'),\n") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T00:32:09.193

永远不要为 DML 使用生成的、自己滚动的转义。使用 Keith 提到的适当的 DBAPI。为了确保从各种来源的逃逸和类型转换几乎可以透明地发生，我们会进行工作。如果您使用的是 DDL，例如`CREATE TABLE whatever (...)`- 如果您信任自己的数据源，您可能会更加松懈。

**使用示例中显示的数据**：

```
import sqlite3

text = "CI|Cote D'ivoire" # had to been escaped as it's a string literal, but from another data source - possibly not...

code, name = text.split('|', 1)

db = sqlite3.connect(':memory:')
db.execute('create table something(code, name)')
db.execute('insert into something(code, name) values(?, ?)', (code, name))

for row in db.execute('select * from something'):
    print row
# (u'CI', u"Cote D'ivoire") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T22:59:55.910

对于将转义字符添加到字符串的完整解决方案，请使用：

```
re.escape(string)
>>> re.escape('\ a.*$')
'\\\\\\ a\\.\\*\\$' 
```

有关更多信息，请参阅：[http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T22:47:17.957

不确定是否存在一些与 SQL 相关的限制，但您始终可以使用双引号将包含单引号的字符串括起来。

例如。

```
print "That's all Folks!" 
```

或单引号包围双引号：

```
print 'The name of the file is "rosebud".' 
```

# wordpress - wordpress 通过 id 获取摘录

> ID：11370599
> 
> 赞同：6
> 
> 时间：2012-07-06T22:46:51.410
> 
> 标签：wordpress

我正在使用[选项框架](http://wptheming.com/options-framework-plugin/)

我不知道为什么这不起作用

```
$x = of_get_option('post_number');
$content_post = get_post($x);
echo $content_post->post_excerpt; 
```

这很奇怪，因为

```
echo of_get_option('post_number'); 
```

完美运行并输出一个数字

并且根据[get_post](http://codex.wordpress.org/Function_Reference/get_post)我的代码应该可以工作，但是 echo 什么也没产生，甚至没有错误消息

所以我必须以某种方式错误地处理get_post（），有什么线索吗？

* * *

编辑

var dump [http://pastebin.com/ZEgQ5WPn](http://pastebin.com/ZEgQ5WPn) 显示 post_content 已满但 post_excerpt 为空

我如何重新生成摘录？

* * *

编辑 [已解决]

我决定手动覆盖摘录，但我的选项不见了，然后我发现[了这个](http://wordpress.org/support/topic/just-upgraded-to-31-and-post-excerpt-field-in-admin-disappeared#post-2342181)

并使用

```
add_post_type_support( 'page', 'excerpt' ); 
```

手动编写摘录

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-14T13:56:16.180

```
$text = apply_filters('the_excerpt', get_post_field('post_excerpt', $post_id)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-28T20:33:25.907

这将获取 post_content 并从中创建摘录。您可以将 post_content 替换为任何其他代码字符串。将 55 更改为另一个数字以增加返回的单词量。

```
$excerpt = wp_trim_words ( strip_shortcodes( $recent["post_content"], 55 ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:52:36.037

您应该能够像这样使用[get_post()](http://codex.wordpress.org/Function_Reference/get_post) ，它将几乎所有内置的帖子属性作为帖子对象的一部分[返回。](http://codex.wordpress.org/Function_Reference/get_post#Return)

```
<?php
  $my_id = 7;
  $my_post = get_post( $my_id ); 
  $my_excerpt = $my_post->post_excerpt;
  var_dump( $my_excerpt );
?> 
```

如果失败（它不应该，但也许你已经通过它的声音尝试过）也许检出[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)并`"p=$my_id"`作为参数传入。无论如何，这很可能是 get_post 引擎盖下使用的函数。

```
<?php
  $my_id = 7;
  $my_posts = new WP_Query( "p=$my_id" ); 
  var_dump( $my_posts );
?> 
```

# php - 在 php 中为所有文件访问定义 Web 根目录

> ID：11370601
> 
> 赞同：0
> 
> 时间：2012-07-06T22:47:04.557
> 
> 标签：php, file, directory

我一直在尝试解决这个问题：在这样的文件结构中：

```
root:
-----index.php (file inside root)
-----template (folder inside root)
-----user (folder inside root)
-----products  (folder inside root)
-----config  (folder inside root) 
```

我一直在尝试`dirname(dirname(__FILE__))`在 config 文件夹中的文件中使用来定义 webroot 常量，但它不能正常工作，如果我尝试从其他文件夹访问文件，它会从当前文件夹调用 webroot 而不是返回根目录. 请在这种情况下帮助我定义 Web 根目录的代码/逻辑。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:50:59.830

您可以使用“定义”：

```
define('ROOT', '/home/username/public_html/'); 
```

然后，在包含此定义的页面的任何页面中：

```
echo ROOT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:52:18.470

$_SERVER['DOCUMENT_ROOT'] - 定义一些常量，其中包含在这里和离开的内容。

# mysql - 为什么mysql会缓存已删除的临时表的列名？

> ID：11370602
> 
> 赞同：0
> 
> 时间：2012-07-06T22:47:04.663
> 
> 标签：mysql, stored-procedures

我已将我的问题简化为这个简单的 SP。列名最后被缓存在 SELECT * 中。我不知道为什么或如何阻止它。我尝试添加 SQL_NO_CACHE 但这没有什么区别。

```
DROP TABLE IF EXISTS foo;
CREATE TABLE foo(
col1 int,
col2 int);
INSERT INTO foo VALUES(1,2),(3,4),(5,6);
DROP PROCEDURE IF EXISTS mysp;
DELIMITER ;;
CREATE DEFINER=root@localhost PROCEDURE mysp(c INT)
BEGIN
   DROP TABLE IF EXISTS mydata;

   SET @mycol='col1';

   IF c > 0 THEN SET @mycol:='col2';
   END IF;

   SET @s=CONCAT('CREATE TEMPORARY TABLE mydata AS SELECT ', @mycol, ' FROM foo');
   PREPARE stmt FROM @s;
   EXECUTE stmt;
   DEALLOCATE PREPARE stmt;

-- The following select call fails on 2nd and subsequent executions of the SP
   SELECT SQL_NO_CACHE * FROM mydata;
   SELECT "Please see new temp table mydata" as Result;
END ;;
DELIMITER ; 
```

版本

```
mysql> SELECT VERSION();
+------------+
| VERSION()  |
+------------+
| 5.5.15-log |
+------------+
1 row in set (0.00 sec) 
```

第一次运行按预期工作正常

```
mysql> CALL mysp(0);
+------+
| col1 |
+------+
|    1 |
|    3 |
|    5 |
+------+
3 rows in set (0.17 sec)

+----------------------------------+
| Result                           |
+----------------------------------+
| Please see new temp table mydata |
+----------------------------------+
1 row in set (0.17 sec)

Query OK, 0 rows affected (0.17 sec) 
```

现在，如果我尝试使用另一列再次运行它

```
mysql> CALL mysp(1);
ERROR 1054 (42S22): Unknown column 'qlgqp1.mydata.col1' in 'field list'
mysql> SELECT @mycol;
+--------+
| @mycol |
+--------+
| col2   |
+--------+
1 row in set (0.00 sec) 
```

如果我再次重新创建存储过程它的作品

```
mysql> CALL mysp(1);
+------+
| col2 |
+------+
|    2 |
|    4 |
|    6 |
+------+
3 rows in set (0.18 sec)

+----------------------------------+
| Result                           |
+----------------------------------+
| Please see new temp table mydata |
+----------------------------------+
1 row in set (0.18 sec)

Query OK, 0 rows affected (0.18 sec) 
```

但是，如果我尝试切换回第一列 - 即使我尝试先删除临时表 - 它仍然不起作用

```
mysql> CALL mysp(0);
ERROR 1054 (42S22): Unknown column 'qlgqp1.mydata.col2' in 'field list'
mysql> DROP TABLE mydata;
Query OK, 0 rows affected (0.03 sec)

mysql> CALL mysp(0);
ERROR 1054 (42S22): Unknown column 'qlgqp1.mydata.col2' in 'field list'
mysql> 
```

* *Eggyal 要求的其他信息。我也在另一个 mysql 版本上尝试了这个，结果相同。**

```
mysql> CALL mysp(1);
+------+
| col2 |
+------+
|    2 |
|    4 |
|    6 |
+------+
3 rows in set (0.20 sec)

+----------------------------------+
| Result                           |
+----------------------------------+
| Please see new temp table mydata |
+----------------------------------+
1 row in set (0.20 sec)

Query OK, 0 rows affected (0.20 sec)

mysql> describe mydata;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| col2  | int(11) | YES  |     | NULL    |       |
+-------+---------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> CALL mysp(0);
ERROR 1054 (42S22): Unknown column 'test.mydata.col2' in 'field list'
mysql> describe mydata;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| col1  | int(11) | YES  |     | NULL    |       |
+-------+---------+------+-----+---------+-------+
1 row in set (0.00 sec) 
```

有趣的修复开发 - 将最后几行更改为准备好的语句 - 但使用与以前完全相同的查询。

```
-- The following select call fails on 2nd and subsequent executions of the SP
   PREPARE stmt FROM 'SELECT SQL_NO_CACHE * FROM mydata';
   EXECUTE stmt;
   DEALLOCATE PREPARE stmt;
   SELECT "Please see new temp table mydata" as Result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:56:26.167

MySQL 正在重用在前一次执行时准备的语句。这不是真正的“缓存”列名；它的“缓存”（如果你愿意的话）是准备好的语句。

简单的解决方法是使用动态 SQL 语句来控制行为，并避免重复使用先前准备的语句：

```
SET @s=CONCAT('SELECT ',@mycol,' FROM mydata');
PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

列名被“缓存”或查询结果被缓存都无关紧要。这是一个性能优化；问题是在你的会议中已经准备好该声明。

* * *

通过使用动态 SQL，您可以控制何时准备语句（即解析 SQL 文本的语法（语句结构、关键字等）、检查语义（存在对象名称、列名称、用户具有所需的权限等）。 )，并准备执行计划。

使用静态 SQL，所有这些都发生在第一次执行时，然后 MySQL 会继续执行准备好的语句。

出于性能原因，我们不希望每次执行静态语句时都产生“硬解析”的开销。对于从 SQL 语句多次调用的函数尤其如此。

（**注意：** Oracle 做同样的事情，但是，只要引用的对象被更改或删除，Oracle 就会很好地将准备好的语句标记为 INVALID。）

MySQL 选择不这样做，可能是因为跟踪所有依赖项的开销。而且，在绝大多数情况下，不需要这种开销。

我认为这里的教训是，如果您要使用动态 SQL 创建一个包含不同列的表，您将不得不使用动态 SQL 来查询该表。

* * *

我的建议是避免使用`SELECT *`，除非您的语句完全控制要返回的列，例如，从内联视图。否则，使用`SELECT *`的 SQL 语句从根本上被破坏......它们现在可以工作，但是对表的更改（例如添加一列）将破坏应用程序。

* * *

**问：**请解释它为什么不是错误。

这不是错误，因为存储过程中的 SELECT 语句实际上只是实际发生的事情的简写。

在您的过程第一次执行时，MySQL 正在解析您的查询文本，并准备和执行一条语句。基本上，相当于：

```
PREPARE s1 FROM 'SELECT * FROM mydata';
EXECUTE s1; 
```

在该过程的第二次执行中，MySQL 只是执行先前准备好的语句。基本上，相当于：

```
EXECUTE s1; 
```

在第二次执行时，您似乎期望 MySQL 运行相当于：

```
DEALLOCATE PREPARE s1;
PREPARE s1 FROM 'SELECT * FROM mydata';
EXECUTE s1; 
```

你可以证明这是 MySQL在第二次执行时*应该*做的事情。您可能会争辩说，在先前执行过程期间准备的语句应该被丢弃，并在随后的执行中重新解析和重新准备。

DBMS 这样做并没有错。但是，与往常一样，会考虑对性能的影响。

您还可以假设 MySQL 应该跟踪特定准备好的语句所依赖的所有数据库对象。您可能会争辩说，每当这些数据库对象之一被删除或更改时，MySQL 应该使依赖于更改或删除对象的所有准备好的语句（以及所有其他对象）无效。同样，DBMS 这样做并没有错。一些 DBMS（如 Oracle）在这方面做得很好。但同样，DBMS 的开发人员在做出这些设计和实现决策时也会考虑性能。

最重要的是，MySQL*确实*为您提供了一种实现您想要发生的事情的方法。只是您的过程中的语法，您期望实现它的内容，并没有真正实现它。

* * *

**首先它是一个临时表，所以真的不应该在那里，第二个 - 它被删除了**

我认为您正在阅读`"TEMPORARY"`与规范中定义的关键字不同的内容。一个`TEMPORARY`表实际上就像一个常规表，只是它只对创建它的会话可见，并且在 MySQL 会话结束时会自动删除。（我们还注意到，一个`TEMPORARY`表不会由 SHOW TABLES 命令显示，也不会出现在 information_schema 视图中。）

至于哪些表（TEMPORARY 或其他）MySQL 应该期望“在那里”，我不相信文档真的解决了这个问题，除了注意到当 SQL 语句被执行时，并且该语句引用了一个不存在的对象， MySQL 会抛出异常。

您在 TEMPORARY 表中观察到的相同行为，您也会在非 TEMPORARY 表中观察到。该问题与表是否定义为 TEMPORARY 无关。

* * *

**在哪里**`SELECT *`**比较** `PREPARE s1 FROM SELECT *`

这两种形式有效地遵循相同的代码路径。静态的第一次执行`SELECT *`实际上等效于：

```
PREPARE s1 FROM 'SELECT *';
EXECUTE s1; 
```

（请注意执行后没有`DEALLOCATE`语句。）在随后的执行中，该语句已经准备好，因此它实际上等效于：

```
EXECUTE s1; 
```

这类似于在 PHP mysqli 中编码时会发生的情况

```
$s1 = $mysqli->prepare("SELECT * FROM mydata");
$mysqli->execute($s1);
/* rename the columns in the mydata table */
$mysqli->execute($s1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:48:28.863

我知道这是相对较旧的（+6 个月），但我在准备好的语句中遇到了这个问题，我解决它的唯一方法是连接字段名称并使用有效调用“select *”但使用实际的准备好的语句字段名称。我正在使用准备好的语句来创建一个临时表，唯一的标准字段是第一个，而其余的则导致“ `Select *`”上的缓存问题。

*   选择我们要在临时表中使用的字段
*   遍历字段名称的表行，并在每次迭代中：

    设置 sql01 = concat(sql01,', `',sFieldName,'`'); （只是字段）和： set sql02 = concat(sql02,', `',sFieldName,'`varchar(50) '); （仅限字段 + 字段类型，用于创建表语句）

*   创建输出表：

    set @sql = concat('CREATE TEMPORARY TABLE tOutput(FirstField varchar(50), ',sql02,');'); 从@sql 准备STMT；执行STMT；取消分配准备 STMT；

*   在最后：

    set @sql = concat('SELECT FirstField,',sql01,' FROM tOutput;'); 从@sql 准备STMT；执行STMT；取消分配准备 STMT；

# php - 如何在底部这行代码的末尾添加触发事件

> ID：11370613
> 
> 赞同：0
> 
> 时间：2012-07-06T22:48:24.280
> 
> 标签：php, jquery

在我的页面顶部，我有一个选项和答案控件，用户可以在其中从网格中选择一个选项，并且根据所选选项显示相关的答案按钮。

下面是存储选项和答案控制功能的 html 代码：

页面顶部的选项和答案控件：

```
<table id="optionAndAnswer" class="optionAndAnswer">
<tr class="option">
<td>1\. Option Type:</td>
<td>
<div class="box">
    <input type="text" name="gridValues" class="gridTxt maxRow" id="mainGridTxt" readonly="readonly" />
    <span href="#" class="showGrid" id="showGridId">[Open Grid]</span>
</div>

<?php
    $num = range("3","26");
?>

<table class="optionTypeTbl">
<tr>

    <?php
    $i = 1;
    foreach($num as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" value=\"$val\" id=\"btn".$val."\" name=\"btn".$val."Name\" class=\"gridBtns gridBtnsOff\">";        
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
    ?>

        </tr> 
        </table>

        </td>
</tr>
<tr class="answer">
<td>3\. Answer</td>
<td>

<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
</table>
</td>
</tr>
</table> 
```

单击添加按钮后显示正确数量的答案按钮的代码行是以下代码：

```
$('#btn'+gridValues).trigger('click'); 
```

现在我没有包含这段代码，但用户可以单击“添加”按钮将选项类型添加到选项类型文本框中。当一个选项类型被插入到文本框中时，它会自动在网格中选择选项值匹配的选项按钮，因此，上面的触发代码能够通过查看选项类型来显示正确数量的答案按钮从网格中选择。

我遇到的问题是，这只适用于页面顶部的选项和答案控件。用户可以在应用程序中添加行，并在每一行中添加自己的选项和答案控制。一行内追加和回答和选项控制的代码如下：

```
 function insertQuestion(form) {    

        var $tbody = $('#qandatbl > tbody'); 
        var $tr = $("<tr class='optionAndAnswer' align='center'>");
        var $options = $("<div class='option'>Option Type:<br/></div>");
        var $answer = $("<div class='answer'>Answer:<br/></div>");

        $('.gridTxt', context).each( function() {

        var $this = $(this);
        var $optionsText = $("<input type='text' class='gridTxtRow maxRow' readonly='readonly' />")
        .attr('name',$this.attr('name')+"[]")
        .attr('value',$this.val())
        .appendTo( $options )
        .after("<span href='#' class='showGrid'>[Open Grid]</span>");

        $questionType = $this.val();

        });

    var $this, i=0, $row, $cell;
    $('#optionAndAnswer .answers').each(function() {
        $this = $(this);
        if(i%7 == 0) {
            $row = $("<tr/>").appendTo($answer);
            $cell = $("<td/>").appendTo($row);
        }
        var $newBtn = $("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this);' />".replace('%s',$this.is(':visible')?'inline-block':'none')).attr('name', $this.attr('name')).attr('value', $this.val()).attr('class', $this.attr('class'));

        $newBtn.appendTo($cell);

        i++;
    });

        $td.append($options);
        $td.append($answer);
        $tbody.append($tr); 

    } 
```

所以我的问题是，如果此触发器：`$('#btn'+gridValues).trigger('click');`仅适用于顶部的主选项和答案控件，我如何包含此触发器以便能够在特定行中的答案和选项控件中显示正确数量的答案按钮？

我有能够找到该行的起始代码，只需要有关如何在此代码末尾包含触发器的帮助，因为`#btn`行中的选项和答案控件中没有：

```
$(plusbutton_clicked).closest('tr').....; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:16:12.680

所以，你需要修改它才能工作，但这样的东西会起作用吗？

```
$(plusbutton_clicked).closest('tr').find(".answerBtnsRow").click(); 
```

# iphone - “MyAnnotation”可能不会响应“initWithDictionary:”

> ID：11370623
> 
> 赞同：0
> 
> 时间：2012-07-06T22:50:01.137
> 
> 标签：iphone, ios, map, annotations

我不断收到此代码的此语义问题（'MyAnnotation' 可能不会响应'initWithDictionary:'），我使用 plist 向地图添加注释。

尽管它显示了 pin 和我想要的所有内容，但我遇到了语义问题并且似乎无法解决问题

如果有人可以提供帮助，那将非常感谢

继承人的代码，问题出在 //BrewMapViewController.m 错误在这一行

MyAnnotation *annotation = [[MyAnnotation alloc] initWithDictionary:breweryDict];

```
/*MyAnnotation.h*/
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSObject <MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    NSString *test;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, copy) NSString *test;

@end 
```

```
/*MyAnnotation.m*/
#import "MyAnnotation.h"
@implementation MyAnnotation
@synthesize coordinate, title, subtitle, test;

- (id) initWithDictionary:(NSDictionary *) dict
{
    self = [super init];
    if (self != nil) {
        coordinate.latitude = [[dict objectForKey:@"latitude"] doubleValue];
        coordinate.longitude = [[dict objectForKey:@"longitude"] doubleValue];
        self.title = [dict objectForKey:@"name"];
        self.subtitle = [dict objectForKey:@"address"];
        self.test = [dict objectForKey:@"test"];
    }
    return self;
}

@end 
```

```
/*BrewMapViewController.h*/
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface BrewMapViewController : UIViewController <MKMapViewDelegate> {
    IBOutlet MKMapView *map;

    NSArray *breweries;
}

@end 
```

```
/*BrewMapViewController.m*/

#import "BrewMapViewController.h"

#import "MyAnnotation.h"

@implementation BrewMapViewController

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    breweries = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] 
                                                         pathForResource:@"test" 
                                                         ofType:@"xml"]];

    double minLat = [[breweries valueForKeyPath:@"@min.latitude"] doubleValue];
    double maxLat = [[breweries valueForKeyPath:@"@max.latitude"] doubleValue];
    double minLon = [[breweries valueForKeyPath:@"@min.longitude"] doubleValue];
    double maxLon = [[breweries valueForKeyPath:@"@max.longitude"] doubleValue];

    MKCoordinateRegion region;
    region.center.latitude = (maxLat + minLat) / 2.0;
    region.center.longitude = (maxLon + minLon) / 2.0;
    region.span.latitudeDelta = (maxLat - minLat) * 1.05;
    region.span.longitudeDelta = (maxLon - minLon) * 1.05;
    map.region = region;

    for (NSDictionary *breweryDict in breweries){
        MyAnnotation *annotation = [[MyAnnotation alloc] initWithDictionary:breweryDict];
        [map addAnnotation:annotation];
        [annotation release];
    }
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{

    if (map.userLocation == annotation){
        return nil;
    }

    NSString *identifier = @"MY_IDENTIFIER";

    MKAnnotationView *annotationView = [map dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil){
        annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation 
                                                       reuseIdentifier:identifier] 
                          autorelease];
        annotationView.image = [UIImage imageNamed:@"beer.png"];
        annotationView.canShowCallout = YES;

        annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        annotationView.leftCalloutAccessoryView =  [[[UIImageView  alloc] initWithImage:[UIImage imageNamed:@"pretzel.png"]] autorelease];

    }
    return annotationView;
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"I've been tapped");
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)dealloc {
    [breweries release];
    [map release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:27:13.023

您必须将方法签名`- (id) initWithDictionary:(NSDictionary *) dict`放入您的头文件中，以告知`BrewMapViewController`该方法存在：

```
/*MyAnnotation.h*/
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSObject <MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    NSString *test;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, copy) NSString *test;

- (id) initWithDictionary:(NSDictionary *) dict;

@end 
```

# java - 在 Eclipse 中的项目之间复制类 + 包上下文

> ID：11370624
> 
> 赞同：5
> 
> 时间：2012-07-06T22:50:04.680
> 
> 标签：java, eclipse, refactoring, package, copy-paste

由于一些无趣的原因：我们需要将许多类从一个项目复制到另一个项目（同时保留所述类的包结构）。

换句话说，给定：

```
origin/src/com/foo/bar/A
origin/src/com/baz/qux/B

dest/ <empty> 
```

我们想要复制 A 和 B 以便我们最终得到：

```
dest/src/com/foo/bar/A
dest/src/com/baz/qux/B 
```

目前，我们被迫手动创建包，`dest`然后`Ctrl+C/Ctrl+V`在项目之间创建单独的 .java 文件。我们想做的是让 Eclipse 在自动创建包的同时自动复制文件（因此，保留包结构）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T00:17:18.553

您可以使用 shell 脚本在项目文件夹之间复制文件。Eclipse 将拾取复制的 java 文件，包括包结构。

如果您在导航器窗口面板（不是包资源管理器）中选择源项目中的所有文件，您应该能够 CTRL+C/V 将整个文件结构保留到新项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T00:01:33.077

目前，对此没有干净的预构建解决方案。答案是使用您选择的任何语言编写脚本。

这正是我所做的：使用 Python。

# google-bigquery - BigQuery：使用 REST API 加载表时“未找到”数据集

> ID：11370625
> 
> 赞同：0
> 
> 时间：2012-07-06T22:50:37.563
> 
> 标签：google-bigquery

我正在尝试使用以此处的 python 示例代码为模型的 python 脚本将 CSV 文件加载到 BigQuery：[https ://developers.google.com/bigquery/docs/developers_guide](https://developers.google.com/bigquery/docs/developers_guide)

但是当我尝试使用 REST API 加载表时遇到以下错误：

```
{'status': '200', 'content-length': '1492', 'expires': 'Fri, 01 Jan 1990 00:00:00 GMT', 'server': 'HTTP Upload Server Built on Jun 14 2012 02:12:09 (1339665129)', 'etag': '"tcivyOj9QvKAbuEJ5MEMf9we85w/-mxYhUDjvvydxcebR8fXI6l_5RQ"', 'pragma': 'no-cache', 'cache-control': 'no-cache, no-store, must-revalidate', 'date': 'Fri, 06 Jul 2012 22:30:55 GMT', 'content-type': 'application/json'}

{
 "kind": "bigquery#job",
 "etag": "\"tcivyOj9QvKAbuEJ5MEMf9we85w/-mxYhUDjvvydxcebR8fXI6l_5RQ\"",
 "id": "firespotter.com:firespotter:job_d6b99265278b4c0da9c3033acf39d6b2",
 "selfLink": "https://www.googleapis.com/bigquery/v2/projects/firespotter.com:firespotter/jobs/job_d6b99265278b4c0da9c3033acf39d6b2",
 "jobReference": {
  "projectId": "firespotter.com:firespotter",
  "jobId": "job_d6b99265278b4c0da9c3033acf39d6b2"
 },
 "configuration": {
  "load": {
   "schema": {
    "fields": [
     {
      "name": "date",
      "type": "STRING"
     },
     {
      "name": "time",
      "type": "STRING"
     },
     {
      "name": "call_uuid",
      "type": "STRING"
     },
     {
      "name": "log_level",
      "type": "STRING"
     },
     {
      "name": "file_line",
      "type": "STRING"
     },
     {
      "name": "message",
      "type": "STRING"
     }
    ]
   },
   "destinationTable": {
    "projectId": "385479794093",
    "datasetId": "telephony_logs",
    "tableId": "table_name"
   },
   "createDisposition": "CREATE_IF_NEEDED",
   "writeDisposition": "WRITE_TRUNCATE",
   "encoding": "UTF-8"
  }
 },
 "status": {
  "state": "DONE",
  "errorResult": {
   "reason": "notFound",
   "message": "Not Found: Dataset 385479794093:telephony_logs"
  },
  "errors": [
   {
    "reason": "notFound",
    "message": "Not Found: Dataset 385479794093:telephony_logs"
   }
  ]
 }
} 
```

错误“385479794093”中列出的projectId不是我传入的projectId，是“项目号”。projectId 应该是“firespotter.com:firespotter”：

```
{
 "kind": "bigquery#datasetList",
 "etag": "\"tcivyOj9QvKAbuEJ5MEMf9we85w/ZMa8z6LKMgWZIqLWh3ti2SsSs4g\"",
 "datasets": [
  {
   "kind": "bigquery#dataset",
   "id": "firespotter.com:firespotter:telephony_logs",
   "datasetReference": {
    "datasetId": "telephony_logs",
    "projectId": "firespotter.com:firespotter"
   }
  }
 ]
} 
```

当我在三个不同的地方传递正确的值时，为什么 REST API 坚持提供自己不正确的 projectId？还有其他地方需要我传入或设置项目ID吗？

作为参考，这里是相关的代码片段：

```
PROJECT = 'firespotter.com:firespotter'
DATASET = 'telephony_logs'

FLOW = OAuth2WebServerFlow(
    client_id='385479794093.apps.googleusercontent.com',
    client_secret='<a_secret_here>',
    scope='https://www.googleapis.com/auth/bigquery',
    user_agent='firespotter-upload-script/1.0')

def loadTable(http, projectId, datasetId, tableId, file_path, replace=False):
  url = "https://www.googleapis.com/upload/bigquery/v2/projects/" + projectId + "/jobs"
  # Create the body of the request, separated by a boundary of xxx
  mime_data = ('--xxx\n' +
            'Content-Type: application/json; charset=UTF-8\n' + '\n' +
            '{\n' +
            '   "projectId": "' + projectId + '",\n' +
            '   "configuration": {\n' +
            '     "load": {\n' +
            '       "schema": {\n' +
            '         "fields": [\n' +
            '          {"name":"date", "type":"STRING"},\n' +
            '          {"name":"time", "type":"STRING"},\n' +
            '          {"name":"call_uuid", "type":"STRING"},\n' +
            '          {"name":"log_level", "type":"STRING"},\n' +
            '          {"name":"file_line", "type":"STRING"},\n' +
            '          {"name":"message", "type":"STRING"}\n' +
            '        ]\n' +
            '      },\n' +
            '      "destinationTable": {\n' +
            '        "projectId": "' + projectId + '",\n' +
            '        "datasetId": "' + datasetId + '",\n' +
            '        "tableId": "' + tableId + '"\n' +
            '      },\n' +
            '     "createDisposition": "CREATE_IF_NEEDED",\n' +
            '     "writeDisposition": "' + ('WRITE_TRUNCATE' if replace else 'WRITE_APPEND') + '",\n' +
            '     "encoding": "UTF-8"\n' +
            '    }\n' +
            '  }\n' +
            '}\n' +
            '--xxx\n' +
            'Content-Type: application/octet-stream\n' +
            '\n')
  # Append data from the specified file to the request body
  f = open(file_path, 'r')
  header_line = f.readline()  # skip header line
  mime_data += f.read()

  # Signify the end of the body
  mime_data += ('--xxx--\n')

  headers = {'Content-Type': 'multipart/related; boundary=xxx'}
  resp, content = http.request(url, method="POST", body=mime_data, headers=headers)
  print str(resp) + "\n"
  print content

# --- Main ----------------------------------------------
def main(argv):

  csv_path = args[0]

  # If the credentials don't exist or are invalid, run the native client
  # auth flow. The Storage object will ensure that if successful the good
  # credentials will get written back to a file.
  storage = Storage('bigquery2_credentials.dat') # Choose a file name to store the credentials.
  credentials = storage.get()
  if credentials is None or credentials.invalid:
    credentials = run(FLOW, storage)

  # Create an httplib2.Http object to handle our HTTP requests and authorize it
  # with our good credentials.
  http = httplib2.Http()
  http = credentials.authorize(http)

  loadTable(http, PROJECT, DATASET, 'table_name', csv_path, replace=True)

if __name__ == '__main__':
  main(sys.argv) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:50:26.440

Did you recently set the project id to firespotter.com:firespotter? If the dataset was created before the project was named, there will be a mismatch between the old project id and the new. There is an automated system that updates project ids, but it is possible that it hasn't run yet or is having a problem (I'm on vacation right now, so can't check). Hopefully, if you retry again some time soon it will just work. If not, let us know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:04:22.707

这里有几个问题：

*   **为什么我的加载作业失败了？**只是检查一下，这是您发送的整个请求吗？如果是这样，看起来没有要加载的数据，即是空`sourceUris`的。如果是这样，那就是问题所在，我们显然正在返回世界上最糟糕的错误信息。

*   **为什么是数字项目 ID？**BigQuery 交替使用项目名称和相关的数字 ID，因此您所看到的只是我们倾向于在进入的过程中将项目名称转换为 ID。只是为了确认一下，如果您访问[Google API 控制台](https://code.google.com/apis/console/)并查找您的项目，您在 url 中看到相同的数字 ID 吗？

*   **为什么在多个地方指定项目 ID？**首先，您似乎将项目 ID 指定为作业中的顶级属性；那不应该是必要的。（我怀疑它只是覆盖了您在工作参考本身中指定的任何项目 ID。）这留下了两个位置——一个作为工作参考的一部分，另一个作为表参考的一部分。这些实际上表示两种不同的东西——工作中的一个指定您将工作插入到哪个项目中，即谁为该工作付费，而表中的一个指定结果表所在的项目，即谁拥有结果数据。通常，它们是相同的，但 API 允许它们是不同的。（例如，如果您构建了一个需要将数据插入最终归客户所有的表中的服务，这可能会很有用。）

# objective-c - NSMutableDictionary 丢失对象

> ID：11370627
> 
> 赞同：1
> 
> 时间：2012-07-06T22:50:44.777
> 
> 标签：objective-c, osx-lion, automatic-ref-counting, nsdictionary

我正在尝试将对象数组存储在可变字典中，但似乎字典正在丢失我的一些数组（或者数组正在丢失数据？）。

无论如何，这就是我所在的位置：

```
- (NSDictionary *)getTicketsByDay:(NSArray *)tickets {
    // take an array of tickets and return a dictionary with dates (given by
    // NSDateFormatterShortStyle) as keys and arrays of tickets as the values

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];

    // get NSDate object without time (only month, day, year)
    unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSMutableDictionary *datesDict = [[NSMutableDictionary alloc] init];

   for (Ticket *ticket in tickets) {
        NSDateComponents *ticketDateNoTimeComponents = [calendar components:flags fromDate:[ticket createdAt]];
        NSDate *ticketDateNoTime = [calendar dateFromComponents:ticketDateNoTimeComponents];
        NSString *dateString = [formatter stringFromDate:ticketDateNoTime];
        NSMutableArray *ticketArray = [datesDict objectForKey:dateString];
        NSLog(@"%lu", [ticketArray count]);
        if (ticketArray == nil) {
            NSLog(@"it's here: %@", dateString);
            ticketArray = [[NSMutableArray alloc] init];
        }
        [ticketArray addObject:ticket];
        NSLog(@"%lu", [ticketArray count]);
        [datesDict setObject:ticketArray forKey:dateString];
     }
     return datesDict;
} 
```

但是然后在控制台上，在随机的地方（虽然每次都在同一个地方），我得到了类似的东西

```
41
41
42
0
it's here: 6/29/12
1 
```

即使先前对象的键也是“6/29/12”。我还让它打印了字典中的所有键，只有 1 个。

所以在某个地方我正在丢失我的数据。这是怎么回事？

我还应该提到我在 10.7.4 并使用 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:06:00.623

从外观上看，您只会泄漏内存，并且用自身替换字典条目的方式似乎不寻常（但我认为它应该有效），但是是什么让您认为您正在丢失对象？您正在打印数组的大小，这对于不同的日期字符串是不同的，所以也许您只是得到了一个新的日期字符串，使它为该日期创建了一个新数组？

关于内存泄漏/异常代码：更传统的方法是

```
NSMutableArray *ticketArray = [datesDict objectForKey:dateString];
if (ticketArray == nil) {
      ticketArray = [[NSMutableArray alloc] init];
      [datesDict setObject:ticketArray forKey:dateString];
      [ticketArray release];
}
[ticketArray addObject:ticket]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T02:44:21.103

代码对我来说看起来不错（如果您包含来自@ConradShultz 的建议）

请注意，您不需要创建ticketDateNoTime，因为您使用的是日期格式，即使日期包含时间，它也会始终生成短格式字符串......

因此，您的代码可以简化为：

```
- (NSDictionary *)getTicketsByDay:(NSArray *)tickets {
    // take an array of tickets and return a dictionary with dates (given by
    // NSDateFormatterShortStyle) as keys and arrays of tickets as the values

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];

    NSMutableDictionary *datesDict = [[NSMutableDictionary alloc] init];

    for (Ticket *ticket in tickets) {
        NSString *dateString = [formatter stringFromDate:[ticket createdAt]];
        NSMutableArray *ticketArray = [datesDict objectForKey:dateString];
        NSLog(@"%lu", [ticketArray count]);
        if (ticketArray == nil) {
           NSLog(@"it's here: %@", dateString);
            ticketArray = [[NSMutableArray alloc] init];
            [datesDict setObject:ticketArray forKey:dateString];
        }
        [ticketArray addObject:ticket];
        NSLog(@"%lu", [ticketArray count]);
    }
    return datesDict;
} 
```

# javascript - 以 UX 为中心的 Web 应用程序回归测试的工具和技术？

> ID：11370628
> 
> 赞同：3
> 
> 时间：2012-07-06T22:50:47.180
> 
> 标签：javascript, testing, browser, user-interface, automated-tests

我目前正在开发的应用程序是一个简单的 3 层 Web 应用程序（无论是什么简单的方法：）但是，该应用程序是 UX/UI 密集型的，即用户界面构成了应用程序的症结所在。页面的每一次结构更改或重构 javascript/jquery/backbone 代码，我们都需要确保 UI 的行为符合预期。

例如，如果`div`'s 在删除对象时消失，或者项目是否成功“发布”并以不同的方式显示`div`等。

我对基于 UX/UI 的测试领域比较陌生，不知道如何解决这个问题。到目前为止，要确保它的外观和工作正常，这是一个相当大的手动开销。我们确实有“下面一层”测试，我们在其中发送 HTTP 消息，并且所有似乎都可以正常使用返回码等。但是我们缺乏以 UI 为中心的测试。

我听说过 Selenium、Jasmine 和一些 Javascript 框架，但不确定它们是否满足我的需求。截至目前，我看到的解决方案是自定义代码 javascript 测试，这些测试将从浏览器“自动运行”这些测试并检查事情是否以它们应该的方式发生（可能是人类只是“盯着”屏幕:) 这本身就会这是一项艰巨的任务，我想在重新发明轮子之前向社区征求建议。

> 问题：哪些工具/技术最适合此类工作？

PS：这是一个基于 Java/Restlet 的 Web 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:24:15.967

如果您正在寻找构建“真正的”自动化测试，Selenium 绝对可以满足您的需求，这意味着使用 Java、.NET 或任何其他受支持的“服务器端”语言进行基于代码的测试。

与基于 javascript 的测试相比，这更有可能帮助检测回归，在基于 javascript 的测试中，如果设计不允许，您有时无法正确复制用户交互。有些事情你会发现几乎不可能只用 javascript 来测试。

它值得付出努力，而且 Selenium 在许多语言中都得到了很好的支持。它本质上是行业标准，您会发现很多文档和有用的框架来帮助您入门。

# ruby - 从较大的句子中找到重叠最少的两个短语

> ID：11370631
> 
> 赞同：0
> 
> 时间：2012-07-06T22:51:07.040
> 
> 标签：ruby, string, nlp

我有：

```
phrase = "will have to buy online pass from EA to play online but its in perfect condition" 

phrases = ["its",
"perfect condition",
"but its",
"in perfect condition",
"from EA",
"buy online pass from EA",
"to play online but its in perfect condition",
"online",
"online pass",
"play online but its in perfect condition",
"online but its",
"EA",
"will have to buy online pass from EA to play online but its in perfect condition",
"have to buy online pass from EA to play online but its in perfect condition",
"u",
"pass",
"to buy online pass from EA"] 
```

我想从数组中找到两个短语，它们在 6-10 个单词的限制范围内并且单词重叠最少......

就像是：

```
result = ["to buy online pass from EA", "play online but its in perfect condition"] 
```

将是完美的.. 最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:55:53.453

这个怎么样？

```
result = Array.new
phrases.each do |p|
  result.push(p) if(phrase.include?(p) && (6..10).include?(p.split.size))
end 
#remove entries that are substr of others   
result.each do |r|
  result.delete(r) if (t = result.clone ; t.delete(r) ; t.any? {|v| v.include?(r)})
end   
print result.inspect 
#["to play online but its in perfect condition", "to buy online pass from EA"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:23:22.783

```
split_phrases = phrases.map {|phrase| phrase.split }

# find number of words of overlap between two word vectors
def overlap(p1,p2)
  s1 = p1.size
  s2 = p2.size

  # make p1 the longer phrase
  if s2 > s1
    s1,s2 = s2,s1
    p1,p2 = p2,p1
  end

  # check if p2 is entirely contained in p1
  return s2 if p1.each_cons(s2).any? {|p| p == p2}

  longest_prefix = (s2-1).downto(0).find { |len| p1.first(len) == p2.last(len) }
  longest_suffix = (s2-1).downto(0).find { |len| p2.first(len) == p1.last(len) }

  [longest_prefix, longest_suffix].max
end

def best_two_phrases_with_minimal_overlap(wphrases, minlen=6, maxlen=10)
  # reject too small or large phrases, evaluate every combination, order by word overlap
  scored_pairs = wphrases.
    select {|p| (minlen..maxlen).include? p.size}.
    combination(2).
    map { |pair| [ overlap(*pair), pair ] }.
    sort_by { |tuple| tuple.first }

  # consider all pairs with least word overlap
  least_overlap = scored_pairs.first.first
  least_overlap_pairs = scored_pairs.
    take_while {|tuple| tuple.first == least_overlap }.
    map {|tuple| tuple.last }

  # return longest pair with minimal overlap
  least_overlap_pairs.sort_by {|pair| pair.first.size + pair.last.size }.last
end

puts best_two_phrases_with_minimal_overlap(split_phrases).map{|p| p.join ' '}

# to play online but its in perfect condition
# to buy online pass from EA 
```

# objective-c - NSSortDescriptor 无法组织 TableView

> ID：11370632
> 
> 赞同：0
> 
> 时间：2012-07-06T22:51:10.900
> 
> 标签：objective-c, ios, uitableview, sorting

我正在对我的 TableView 单元格进行排序，但由于某种原因它无法正常工作。我有一个完全相同的代码和完全相同的 PLIST 的早期版本，但我可以发誓它工作了几个月。现在它拒绝排序。

numberOfRowsInSection 方法内的排序代码：

```
NSString *date = [self.months objectAtIndex:sectionNumber];
NSDictionary *monthData = [self.sportDictionary objectForKey:date];
NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey: nil ascending: YES];
NSArray *days = (NSArray *)[[monthData allKeys]sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor2]];

for(int x = 0; x < [days count]; x++)
{
    NSLog(@"Day: %@", [days objectAtIndex:x]);
} 
```

当我查看 NSLog 的输出时，这是不对的。获得 15、22、29、3、8

它正在排序的 PList 部分如下所示：

```
<dict>
<key>1 September 2012</key>
<dict>
    <key>3</key>
    <array>
        <string>Georgia Tech (Orange Effect)</string>
        <string>8:00 PM </string>
        <string>Home</string>
    </array>
    <key>8</key>
    <array>
        <string>Austin Peay (White Effect)</string>
        <string>1:30 PM</string>
        <string>Home</string>
    </array>
    <key>15</key>
    <array>
        <string>Pittsburgh (White Effect)</string>
        <string>12:00 PM</string>
        <string>Away</string>
    </array>
    <key>22</key>
    <array>
        <string>Bowling Green</string>
        <string>TBA</string>
        <string>Home</string>
    </array>
    <key>29</key>
    <array>
        <string>Cincinnati</string>
        <string>TBA</string>
        <string>Away</string>
    </array>
</dict> 
```

谢谢你，我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:21:39.897

最好的办法是获取你已经拥有的 NSDates，将日期组件提取为 NSNumbers 或整数，然后对你已经拥有的内容进行排序并继续。[这](http://snippets.aktagon.com/snippets/476-How-to-extract-current-year-month-and-day-from-an-NSDate-with-NSCalendar-NSDateComponents-and-NSDateFormatter)可能有助于您提取 NSDate 的日组件。

# asp.net - xp上的MVC4移动环境

> ID：11370638
> 
> 赞同：0
> 
> 时间：2012-07-06T22:52:04.553
> 
> 标签：asp.net, asp.net-mvc

我正在尝试使用 MVC4 开发一个简单的示例移动 Web 应用程序，以向我的团队提供一个小型演示。以下是我的机器配置

操作系统：Windows XP VS：VS 2010 express 模拟器：Android（我找不到适用于 xp 的 windows7 模拟器）

问题：Android Emulator 需要（据我所知）应用程序作为 IIS 应用程序托管，但是当我为 MVC4 创建虚拟目录并尝试访问时，它简单地抛出 403 错误，那是因为（再次据我所知）IIS 5.1 不懂MVC4请求处理

问题：现在如何在这种情况下继续在最新的移动（任何类型的 windows7、android 或苹果）模拟器浏览器上测试应用程序？

我试过 IIS Express，但 android 模拟器不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:00:40.977

您是否尝试过将所有请求映射到 aspnet_isapi.dll？

有关说明，请参阅此博客文章：http: [//itscommonsensestupid.blogspot.in/2008/11/deploy-aspnet-mvc-app-on-windows-xp-iis.html ?m=1](http://itscommonsensestupid.blogspot.in/2008/11/deploy-aspnet-mvc-app-on-windows-xp-iis.html?m=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T19:38:19.440

> 我试过 IIS Express，但 android 模拟器不喜欢它。

IIS Express 是一个 Web 服务器（尽管比 Cassini 更好），IIS Express 不是您的问题。最简单的模拟器是 Chrome/FF 插件和设置。请参阅我的教程[ASP.NET MVC 4 移动功能](http://www.asp.net/mvc/tutorials/aspnet-mvc-4-mobile-features)

# html - 为什么 EditorTemplate 不显示数据？

> ID：11370640
> 
> 赞同：0
> 
> 时间：2012-07-06T22:52:10.720
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor

我重写了我的页面以使用 EditorTemplates。他们非常好。但是，当我回发时，只有第一行回发数据。其他 4 行显示为空。FormSection 有一个 FormRowModel 列表。FormRows 有一个 CtrlInputDataModels 列表。我的代码如下。

指数

```
@model InspectionWebFormsMVC.ViewModels.FormSection

@{
    ViewBag.Title = "Testing Editor Templates";
}

<h2>Test Control for Webforms</h2>

@Html.EditorFor(x => x.sectionRows, "FormRowModel") 
```

EditorTemplate/FormRowModel

```
@model InspectionWebFormsMVC.ViewModels.FormRowModel

@using (Html.BeginForm("Index", "TestEdit", FormMethod.Post))
{
    int i = 0;

    //var testCtrls = Model.Where(x => x.RowInput.Where(y => types.Contains(y.RowCtrl.Type)));
    <div style="clear:both; padding:1%;">       
        <div class="section">
            @Model.Section
        </div>
        <div class="number">
            @Model.SectionNumber
        </div>
        <div class="desc">
            @Model.Description
        </div>
        <div class="ctrl">  
            @{
                List<string> types = new List<string>() { "dropdown", "text", "radio", "checkbox" }             
                @Html.EditorFor(y => y.RowInput.Where(z => types.Contains(z.RowCtrl.Type)), "CtrlInputDataModel")
            }
        </div> 
```

EditorTemplate/CtrlInputDataModel

```
@model InspectionWebFormsMVC.ViewModels.CtrlInputDataModel

@{
    var ddv = new SelectList(Model.RowCtrl.DefaultValues, "Value", "Label");

    switch (Model.RowCtrl.Type)
    {
        case "dropdown":
            //@Html.DropDownListFor(blah => Model.InputtedData, ddv)
            //@Html.HiddenFor(blah => Model.InputtedDataID)
            //@Html.HiddenFor(blah => Model.RowCtrl.CtrlTypeID)

            @Html.DropDownList("InputtedData", ddv)                                   
            @Html.Hidden("InputtedDataID", Model.InputtedDataID)
            @Html.Hidden("CtrlTypeID", Model.RowCtrl.CtrlTypeID)
            <br /> 
        break;
        case "text":
            //@Html.TextBoxFor(blah => Model.InputtedData)
            //@Html.HiddenFor(blah => Model.InputtedDataID)
            //@Html.HiddenFor(blah => Model.RowCtrl.CtrlTypeID) *@

            @Html.TextBox("InputtedData", Model.InputtedData)
            @Html.Hidden("InputtedDataID", Model.InputtedDataID)
            @Html.Hidden("CtrlTypeID", Model.RowCtrl.CtrlTypeID)  
            <br /> 
        break;
        case "radio":
            foreach (var sli in ddv)
            {
                //@Html.LabelFor(blah => Model.InputtedData, sli.Text)
                //@Html.RadioButtonFor(blah => Model.InputtedData, sli.Value)

                @Html.Label("InputtedData", sli.Text)
                @Html.RadioButton("InputtedData", Model.InputtedData, sli.Value)
            }
            //@Html.HiddenFor(blah => Model.InputtedDataID)
            //@Html.HiddenFor(blah => Model.RowCtrl.CtrlTypeID)

                @Html.Hidden("InputtedDataID", Model.InputtedDataID)
                @Html.Hidden("CtrlTypeID", Model.RowCtrl.CtrlTypeID)                                     
                <br /> 
        break;
        case "checkbox":
            foreach (var sli in ddv)
            {
                //@Html.LabelFor(blah => Model.InputtedData, sli.Text)
                //@Html.RadioButtonFor(blah => Model.InputtedData, sli.Value)

                @Html.Label("InputtedDataID", sli.Text)
                //@Html.CheckBox("InputtedData", false)

            }
                //@Html.HiddenFor(blah => Model.InputtedDataID)
                //@Html.HiddenFor(blah => Model.RowCtrl.CtrlTypeID)

                @Html.Hidden("InputtedDataID", Model.InputtedDataID)
                @Html.Hidden("CtrlTypeID", Model.RowCtrl.CtrlTypeID)   
                <br />
        break;
    }
} 
```

生成的 HTML

```
<form action="/TestEdit" method="post">    
    <div style="clear:both; padding:1%;">       
        <div class="section">
            A
        </div>
        <div class="number">
            1
        </div>
        <div class="desc">
            First Row
        </div>
        <div class="ctrl">  

<select id="sectionRows_0__RowInput_0__InputtedData" name="sectionRows[0].RowInput[0].InputtedData"><option value="1">Yes</option>
<option value="0">No</option>
</select><input data-val="true" data-val-number="The field InputtedDataID must be a number." data-val-required="The InputtedDataID field is required." id="sectionRows_0__RowInput_0__InputtedDataID" name="sectionRows[0].RowInput[0].InputtedDataID" type="hidden" value="1" /><input data-val="true" data-val-number="The field CtrlTypeID must be a number." data-val-required="The CtrlTypeID field is required." id="sectionRows_0__RowInput_0__RowCtrl_CtrlTypeID" name="sectionRows[0].RowInput[0].RowCtrl.CtrlTypeID" type="hidden" value="1" />            <br /> 
    </div>
</form>

<form action="/TestEdit" method="post">    
    <div style="clear:both; padding:1%;">       
        <div class="section">
            A
        </div>
        <div class="number">
            2
        </div>
        <div class="desc">
            Second Row of Halls
        </div>
        <div class="ctrl">  

<select id="sectionRows_1__RowInput_0__InputtedData" name="sectionRows[1].RowInput[0].InputtedData"><option value="1">Accept</option>
<option value="0">Reject</option>
</select><input data-val="true" data-val-number="The field InputtedDataID must be a number." data-val-required="The InputtedDataID field is required." id="sectionRows_1__RowInput_0__InputtedDataID" name="sectionRows[1].RowInput[0].InputtedDataID" type="hidden" value="2" /><input data-val="true" data-val-number="The field CtrlTypeID must be a number." data-val-required="The CtrlTypeID field is required." id="sectionRows_1__RowInput_0__RowCtrl_CtrlTypeID" name="sectionRows[1].RowInput[0].RowCtrl.CtrlTypeID" type="hidden" value="2" />            <br /> 

<input id="sectionRows_1__RowInput_1__InputtedData" name="sectionRows[1].RowInput[1].InputtedData" type="text" value="UP, UP, DOWN, DOWN, LEFT, LEFT, RIGHT, RIGHT, B, A, B, A, START" /><input data-val="true" data-val-number="The field InputtedDataID must be a number." data-val-required="The InputtedDataID field is required." id="sectionRows_1__RowInput_1__InputtedDataID" name="sectionRows[1].RowInput[1].InputtedDataID" type="hidden" value="6" /><input data-val="true" data-val-number="The field CtrlTypeID must be a number." data-val-required="The CtrlTypeID field is required." id="sectionRows_1__RowInput_1__RowCtrl_CtrlTypeID" name="sectionRows[1].RowInput[1].RowCtrl.CtrlTypeID" type="hidden" value="6" />            <br /> 
    </div>
</form>

<form action="/TestEdit" method="post">    
    <div style="clear:both; padding:1%;">       
        <div class="section">
            A
        </div>
        <div class="number">
            3
        </div>
        <div class="desc">
            Third Row of fits and fixes and polishes
        </div>
        <div class="ctrl">  

<input id="sectionRows_2__RowInput_0__InputtedData" name="sectionRows[2].RowInput[0].InputtedData" type="text" value="50" /><input data-val="true" data-val-number="The field InputtedDataID must be a number." data-val-required="The InputtedDataID field is required." id="sectionRows_2__RowInput_0__InputtedDataID" name="sectionRows[2].RowInput[0].InputtedDataID" type="hidden" value="3" /><input data-val="true" data-val-number="The field CtrlTypeID must be a number." data-val-required="The CtrlTypeID field is required." id="sectionRows_2__RowInput_0__RowCtrl_CtrlTypeID" name="sectionRows[2].RowInput[0].RowCtrl.CtrlTypeID" type="hidden" value="3" />            <br /> 
    </div>
</form> 
```

**编辑：**

我已经更换了以下 -

```
 <div class="ctrl">  
                @{
                    List<string> types = new List<string>() { "dropdown", "text", "radio", "checkbox" }             
                    @Html.EditorFor(y => y.RowInput.Where(z => types.Contains(z.RowCtrl.Type)), "CtrlInputDataModel")
                }
 </div> 
```

和

```
 <div class="ctrl">  
            @{
                //List<string> types = new List<string>() { "dropdown", "text", "radio", "checkbox" };
                //var yy = Model.RowInput.Where(z => types.Contains(z.RowCtrl.Type));            
                @Html.EditorFor(y => y.RowInput)
            }
 </div> 
```

和

```
@Html.EditorFor(x => x.sectionRows, "FormRowModel") 
```

和

```
@Html.EditorFor(x => x.sectionRows) 
```

仍然得到相同的结果。只有第一行回发数据。其他行返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:22:49.653

因此，在 Darin 的帮助下，我将部分视图转换为编辑器模板。在这种情况下，这是一件好事（TM）。但是，我只能将集合的第一行发回。经过一番谷歌搜索后，我浏览了[这个页面](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)（各种 stackoverflow 问题也引用了该页面）。在实现了这段代码之后，没有任何东西被发回。然后我[在 StackOverflow 上看到了这篇文章](https://stackoverflow.com/questions/9314058/mvc-3-dynamic-form-using-a-viewmodel)。并看到我引用了错误的集合名称。我需要引用属性而不是模型名称。现在一切正常。

非常感谢达林直接和间接地为我（和其他人）提供的所有帮助。谢谢！

对于任何人，在让史蒂夫的代码工作时遇到一点麻烦，[请查看这个页面](https://stackoverflow.com/questions/5076760/custom-html-helpers-dont-work-in-mvc3)。这是让自定义 htmlhelper 正常工作的整体解决方案。

# linux - 用于简单 C 程序的 Sublime text linux gcc 构建

> ID：11370646
> 
> 赞同：5
> 
> 时间：2012-07-06T22:53:51.010
> 
> 标签：linux, gcc, sublimetext2

我想在 sublime text 2 的内置构建命令中构建程序

我制作了一个 gcc.sublime-build 文件

```
{
"cmd" : ["gcc", "$file_name", "-o", "${file_base_name}"],
"selector" : "source.c",
"shell":true,
"working_dir" : "$file_path"
} 
```

但我得到的只是一个错误说

gcc：致命错误：没有输入文件编译终止。[在 0.0 秒内完成，退出代码为 4]

有任何想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T09:49:00.597

Sublime Text 在`gcc`没有参数的情况下执行，因为这`"shell": true`意味着 的值`"cmd"`被传递给 shell，它应该是一个字符串。在您的文件中，您似乎希望将参数直接传递给 GCC，因此您应该设置`"shell"`为`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T01:24:45.117

我会用 Makefile 来做到这一点：

```
CC=gcc
all: source 
```

然后，键入`make`。

# python - 比较具有不同键和结构的不同 python 字典的值

> ID：11370648
> 
> 赞同：0
> 
> 时间：2012-07-06T22:53:57.927
> 
> 标签：python, dictionary, comparison

这更像是一个理论问题。我有 3 个具有不同结构/键的字典，但值可能相同。例如

```
dict1 = {u'd':{u'results':[{u'number':'1', u'dispURL':u'www.site.com'},
                          {u'number':u'2', u'dispURL':u'www.othersite.com'}]
              }}

dict2 = {u'result_page':{u'url':u'www.greatsite.com', u'pos':u'1'},
                        {u'url':u'www.site.com', u'pos':u'2'}}

dict3 = {u'hits':[{u'displayurl':u'www.othersite.com', u'index':u'1'},
                  {u'displayurl':u'www.site.com', u'index':u'2'}]
        } 
```

请注意`dict1`在,`{u'd':`之前有`{u'results':`,`dict1`并且`dict3`有不同的键/值包含在方括号中。还要注意键/值布局是如何不同的`dict1`，键在and`number`之前`url`而不是之后，以及每个字典中的键名不同。`dict2``dict3`

我有 3 个像这样的大字典，我需要通过每个 url 的位置来比较它们以进行评分。IE

```
if dict1[www.site.com index] > dict2[www.site.com index]: 
    dict1[www.site.com] score +1 
```

我知道代码片段不正确，它只是为了说明。我想知道的是我需要对字典做什么才能进行这样的比较？我正在考虑从每个字典中获取所需的数据并将它们放入 3 个具有统一键和结构的新字典，甚至是 1 个新字典。但是我的程序必须在计算上非常快，所以我不知道这会如何影响它。你们中的任何一位更有经验的 Python 程序员都想对此发表意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:57:43.113

解决此问题的最有效方法是将数据转换为规范的 {url:value} 格式。

例如：

```
dict1 = {data[u'dispURL']:int(data[u'number'])   for data in dict1[u'd'][u'results']}
dict2 = {data[u'url']:int(data[u'pos'])          for data in dict2[u'result_page']}
dict3 = {data[u'displayurl']:int(data[u'index']) for data in dict3[u'hits']} 
```

现在他们看起来像

```
dict1 = {u'www.othersite.com': 2, u'www.site.com': 1}
dict2 = {u'www.greatsite.com': 1, u'www.site.com': 2}
dict3 = {u'www.othersite.com': 1, u'www.site.com': 2} 
```

你的比较看起来像

```
for url in dict1:
    if dict1[url] > dict2[url]:
        # do something 
```

# android - 如何检测用户是否触摸了除 EditText 内部之外的屏幕的任何部分？

> ID：11370649
> 
> 赞同：0
> 
> 时间：2012-07-06T22:54:04.177
> 
> 标签：android

我猜这意味着让整个屏幕都可以触摸。具体是怎么做的？

其次计算 X,Y 是否在 EditText 内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:21:38.523

覆盖要实现的活动中的 onTouchEvent ......并使用 event.getX() 和 event.getY() 获取 X、Y 坐标

```
 @Override
    public boolean onTouchEvent(MotionEvent event) {
        int x = (int)event.getX();
        int y = (int)event.getY();
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
        }
    return false;
    } 
```

但我建议您在发布问题之前必须彻底搜索。

# python - 使用 pyglet 和 pymunk 使精灵角色自然跳跃

> ID：11370652
> 
> 赞同：2
> 
> 时间：2012-07-06T22:54:21.243
> 
> 标签：python, game-physics, pyglet, pymunk

此代码`assassin1.png`在黑屏上显示图像。此图像具有与之相关的 pymunk 身体和形状。在其下方还有一个不可见的静态 pymunk 对象，称为`floor`present。重力作用在图像上，它停留在看不见的地板上。

我想让我的图像在`UP`按键时自然跳跃。我该如何实施？

```
import pyglet
import pymunk

def assassin_space(space):
    mass = 91
    radius = 14
    inertia = pymunk.moment_for_circle(mass, 0, radius) 
    body = pymunk.Body(mass, inertia) 
    body.position = 50, 80 
    shape = pymunk.Circle(body, radius) 
    space.add(body, shape) 
    return shape 

def add_static_line(space):
    body = pymunk.Body() 
    body.position = (0,0)
    floor = pymunk.Segment(body, (0, 20), (300, 20), 0)
    space.add_static(floor) 
    return floor

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img, space):
        self.space = space
        pyglet.sprite.Sprite.__init__(self, img, self.space.body.position.x, self.space.body.position.y)

    def update(self):
        self.x = self.space.body.position.x
        self.y = self.space.body.position.y

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player1 = Assassin(batch = self.batch_draw, img = pyglet.image.load("assassin1.png"), space = assassin_space(space))
        pyglet.clock.schedule(self.update)
        add_static_line(space)

    def on_draw(self):
        self.clear()
        self.batch_draw.draw()
        self.player1.draw() 
        space.step(1/50.0) 

    def on_key_press(self, symbol, modifiers):
        if symbol == pyglet.window.key.UP:
            print "The 'UP' key was pressed"

    def update(self, dt):
        self.player1.update()
        space.step(dt)

if __name__ == "__main__":
    space = pymunk.Space() #
    space.gravity = (0.0, -900.) #
    window = Game()
    pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-05T09:30:08.800

使用像 PyMunk 这样的物理库编写平台游戏真的很困难。我强烈建议不要这样做，而是像跳入自己的代码一样管理物理。

问题是像 pymunk 这样的现实物理会带来许多你真的不想要的副作用。例如，当您的角色侧身奔跑时，他们会在地板上受到摩擦阻力，这种阻力无法通过他们的质心进行操作，因此往往会使他们旋转或摔倒。您可能会找到抵消这种情况的方法，但这些方法会产生其他不良副作用。例如，如果您将角色设置为具有大平底边缘的蹲下形状，那么这也会影响碰撞检测。如果你减少它们与地板的摩擦，这将意味着它们不会随着时间的推移而减速。您可以添加更多改进来纠正这些问题，但它们会产生更多副作用。我在这里给出的例子只是冰山一角。

取而代之的是，拥有一个代表角色速度的变量，并将其添加到每一帧的位置上要简单得多。检测他们是否撞到了平台之类的东西，如果是，设置他们的水平或垂直速度，使他们不会进入平台。这也带来了一些微妙的问题，但它们通常比物理模拟更容易修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:01:51.427

你需要给身体施加一个冲动。冲量是动量的变化，即质量乘以速度。我假设你希望你的刺客直接跳起来。如果是这种情况，您必须将冲动施加到身体的中心。

```
body.apply_impulse(pymunk.Vec2d(0, 60), (0, 0)) 
```

# c# - 调用静态文件处理程序

> ID：11370657
> 
> 赞同：1
> 
> 时间：2012-07-06T22:55:00.017
> 
> 标签：c#, asp.net, ihttphandler

我有一个映射到 aspnet_isapi.dll 的 HttpHandler 以在经典模式下使用 IIS 7.5 对静态文件（.pdf 文件）执行自定义身份验证检查：

```
void IHttpHandler.ProcessRequest(HttpContext context)
{
  if(!User.IsMember) {
    Response.Redirect("~/Login.aspx?m=1");
   }
  else {
     //serve static content
   }
} 
```

上面的代码工作正常，除了 else 语句逻辑。在 else 语句中，我只是想让 StaticFileHandler 处理请求，但我无法解决这个问题。任何关于如何简单地将文件“移交”回 IIS 以将请求作为普通 StaticFile 请求提供的建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T00:18:30.180

要直接回答您的问题，您可以创建一个 StaticFileHandler 并让它处理请求：

```
// Serve static content:
Type type = typeof(HttpApplication).Assembly.GetType("System.Web.StaticFileHandler", true);
IHttpHandler handler = (IHttpHandler)Activator.CreateInstance(type, true);
handler.ProcessRequest(context); 
```

但更好的想法可能是创建一个 HTTP 模块而不是 HTTP 处理程序：

```
public class AuthenticationModule : IHttpModule
{
    public void Dispose()
    {
    }

    public void Init(HttpApplication application)
    {
        application.AuthorizeRequest += this.Application_AuthorizeRequest;
    }

    private void Application_AuthorizeRequest(object sender, EventArgs e)
    {
        HttpContext context = ((HttpApplication)sender).Context;
        if (!User.IsMember)
            context.Response.Redirect("~/Login.aspx?m=1");      
    }
} 
```

# windows-server-2008 - 如何删除 Windows SBS 并仅保留 Windows Server 及其功能？

> ID：11370659
> 
> 赞同：0
> 
> 时间：2012-07-06T22:55:12.553
> 
> 标签：windows-server-2008, exchange-server-2007, windows-sbs

好的，所以我为运行 Windows SBS 服务器的企业获得了一个新职位。既然他们有现场人员来实际管理网络，我真的很想尽快解散 SBS。现在我知道你们很多人在想什么，别管它！

但是，我有两个问题。

1.) 扩展硬件资源不是一种选择。

2.) 公司需要走向更企业化的解决方案。

那么问题来了，如何在不丢失整个服务器的情况下删除 SBS 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:40:13.120

好吧，我能够解决我的一个难题。SBS 监控占用了服务器上的所有资源。所以我把它关掉了，它工作得更好了。真的，现在我正在查看它，我想我的问题是如何在我的 SBS 服务器上保存资源。

# html - 无法垂直对齐容器内的文本

> ID：11370664
> 
> 赞同：1
> 
> 时间：2012-07-06T22:55:41.787
> 
> 标签：html, css, vertical-alignment

我正在尝试使用 垂直对齐几个容器中的文本`line-height`，但它不起作用。我以前从来没有遇到过任何问题，但由于某种原因，它现在无法正常排列。

现在，我可能只是对所有编码视而不见，但我似乎无法找到问题所在......

这就是我的 HTML 的样子：

```
<div class="formLabel">
    <div class="labelNumber">D</div>
    <div class="labelTitle">
        <h2>New Password</h2>
        <p>Check Help for character and length restrictions</p>
    </div>
</div> 
```

这就是我的 CSS 的样子：

```
.formLabel
{
    position: relative;
    width: 400px;
    height: 40px;
    padding: 20px 0px 0px 10px;
    margin: 0;
}

.labelNumber
{
    float: left;
    width: 30px;
    height: 30px;
    line-height: 30px;
    background: #191919;
    font: bold 18px Arial;
    color: #555555;
    text-align: center;
    padding: 0;
    margin: 0;
} 
```

`.labelNumber`这是我试图垂直对齐的容器中的字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:03:49.333

line-height 属性是简写`font`语法的一部分，因此将 line-height 放在它之后或将其集成到 font 属性中。

```
.labelNumber {
  float: left;
  width: 30px;
  height: 30px;
  background: #191919;
  font: bold 18px/30px Arial; /** Font-size / Line-height */
  color: #fff;
  text-align: center;
  padding: 0;
  margin: 0;
} 
```

基本上字体属性覆盖了行高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:13:22.463

您当前代码的问题是您的 CSS 声明的顺序迫使浏览器忘记`line-height: 30px;`声明，因为在它之后您使用的是`font`简写语法`font: bold 18px Arial;`。

**您可以使用以下两个选项之一解决您的问题：**

*   将`line-height: 30px;`to 移到`font: bold 18px Arial;`:

    请参阅此[工作小提琴](http://jsfiddle.net/zuul/nz7fU/12/)示例。

    ```
    .labelNumber {
      position: absolute;
      width: 30px;
      height: 30px;
      background: #191919;
      font: bold 18px Arial;
      line-height: 30px;
      color: #555555;
      text-align: center;
      padding: 0;
      margin: 0;
    } 
    ```

*   松开并将速记`line-height: 30px;`更新为：`font``font: bold 18px/30px Arial;`

    请参阅此[工作小提琴](http://jsfiddle.net/zuul/nz7fU/13/)示例。

    ```
    .labelNumber {
      position: absolute;
      width: 30px;
      height: 30px;
      background: #191919;
      font: bold 18px/30px Arial;
      color: #555555;
      text-align: center;
      padding: 0;
      margin: 0;
    } 
    ```

[您可以在此处](https://developer.mozilla.org/en/CSS/font)阅读有关`font`速记语法的信息。

**附带说明：**为了减少代码，第二个选项是首选。

# logback - 如何为 logback 实现 PropertyDefiner 以访问多个属性

> ID：11370666
> 
> 赞同：2
> 
> 时间：2012-07-06T22:56:20.683
> 
> 标签：logback

我想在我的 logback.xml 配置文件中定义一些属性，并看到通过实现[PropertyDefiner](http://logback.qos.ch/manual/configuration.html#definingPropsOnTheFly)是一种以可定制方式设置属性的好方法。

在开始实现它之后，我开始想知道如何访问标签内元素的*名称属性的值。*反正我看不到这样做，我在挠头。这个 PropertyDefiner 真的会让你为每个属性创建一个新的实现吗？为什么不直接硬编码呢？我在网上没有看到太多关于这个的讨论。

我希望我只是没有看到它，并且 stackoverflow 的大脑可以帮助我。有谁知道如何做到这一点？谢谢！

我发现了这个[讨论](http://mailman.qos.ch/pipermail/logback-user/2010-November/001941.html)：问了基本上相同的问题，但没有返回答案。

仅供参考：我想自定义获取属性的方式，因为我是从数据库中提取属性的。我有一个助手类，它在服务器启动时拉入属性。这些属性因环境（开发、测试、产品等）而异

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:09:18.580

从 logback 版本 1.0.6 开始，无法直接访问*name属性的值。*但是，没有什么能阻止您在您选择的属性中传递*name*属性的值。例子：

```
<define name="rootLevel" class="Your.PropertyDefiner">
  <myKey>rootLevel</myKey>
</define> 
```

`myKey`的属性在哪里`Your.PropertyDefiner`。例如：

```
class Your.PropertyDefiner implements PropertyDefiner {   
  String myKey; 
  public void setMyKey(String k) {
    this.myKey= k;   
  }
  public String getPropertyValue() {
    return ...   
  }  
} 
```

logback 的配置框架 Joran 负责接线。Joran 会将*myKey*元素的值*注入*`Your.PropertyDefiner`. 如果您对技术细节感到好奇，请参阅有关[隐式操作](http://logback.qos.ch/manual/onJoran.html#implicit)和[实践中](http://logback.qos.ch/manual/onJoran.html#iaPractice)的隐式操作的文档。

# mysql - 随机错误：#1045 无法登录 MySQL 服务器

> ID：11370667
> 
> 赞同：1
> 
> 时间：2012-07-06T22:56:30.000
> 
> 标签：mysql

我已经启动并运行了一个月的mysql。昨天还在用，今天用phpmyadmin和命令行登录，突然就不行了。好像有人在一夜之间更改了我的密码或其他什么。我正在尝试使用 root 用户登录。我该怎么办？

**编辑**

这是 mysql 只是在我的本地笔记本电脑上运行以进行开发。它上面唯一的帐户是root帐户，并且没有大写锁定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:09:44.943

[http://www.cyberciti.biz/tips/recover-mysql-root-password.html](http://www.cyberciti.biz/tips/recover-mysql-root-password.html)说这五个步骤**的过程会起作用，显然要自担风险**。该来源也具有基本相同的步骤。这可能不适用于 Windows，但类似的东西应该[http://www.debian-administration.org/articles/442](http://www.debian-administration.org/articles/442)

使用停止mysql服务`/etc/init.d/mysql stop`

使用无密码启动mysql`mysqld_safe --skip-grant-tables &`

使用连接到服务器`mysql -u root`

修改root密码：

```
mysql> use mysql;
mysql> update user set password=PASSWORD("NEW-ROOT-PASSWORD") where User='root';
mysql> flush privileges;
mysql> quit 
```

停止服务器：`/etc/init.d/mysql stop`

启动服务器：`/etc/init.d/mysql start`

测试：`mysql -u root -p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:45:04.923

我使用了raina77ow提供的[链接](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)并按照说明重置了我的密码，现在可以使用了。

向下滚动到第***C.5.4.1.3 节。重置 Root 密码：通用说明***特别有用。

# ios - 推送通知不一致

> ID：11370671
> 
> 赞同：0
> 
> 时间：2012-07-06T22:57:06.937
> 
> 标签：ios, push-notification, apple-push-notifications

*工作场景：*当我将我的应用程序从 xcode 直接运行到我的设备时，我可以在服务器上运行推送通知，它按预期工作。

*非工作场景：*我将应用程序导出到 IPA 并通过 iTunes 在我的设备上安装应用程序。当我从服务器推送通知时，我会收到以下错误`ERROR: Unable to send message ID 1: Invalid token (8).`

在写这篇文章时，我有一个想法并检查了来自 xcode 安装和 IPA 安装的设备 ID，它们是不同的！

将设备 ID 发送到我的服务器的代码：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    // You can send here, for example, an asynchronous HTTP request to your web-server to store this deviceToken remotely.

    // convert token to a single string
    NSString *token = [[[deviceToken description]
                        stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]] 
                       stringByReplacingOccurrencesOfString:@" " 
                       withString:@""];

    NSString *post = [NSString stringWithFormat:[NSString stringWithFormat:@"token=%@", token]];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:@"http://mywebsitename.com/ApnsPHP/add.php"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
        dispatch_async(dispatch_get_main_queue(), ^{
            NSError *e = nil;
            NSDictionary *dict = [XMLReader dictionaryForXMLData:data error:&e];
            NSLog(@"response from server: %@", dict);
        });
    }];

    NSLog(@"Did register for remote notifications: %@", deviceToken);
} 
```

如何获取它以便 IPA 分发中的设备令牌通过？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:04:05.783

Xcode install 是您的开发版本，.ipa 是生产/临时版本，它们有不同的证书。仔细阅读远程通知指南！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:51:58.077

当我发现[这个关于 push notes](https://stackoverflow.com/questions/8707150/iphone-push-notification-works-in-sandbox-but-not-in-production-mode)的问题时，我正在阅读相关问题。我想了想，开始从上到下检查事情。我终于找到了这个：

![Apple 推送通知开发者视图](../Images/56d56e83439e52707ec92179a7fd7a80.png)

希望问题对您和我一样明显，但如果不是，我理解。*除非生产推送 SSL 证书*的状态为 ，否则 APN 将无法与 IPA 一起使用`Enabled`。

# c# - 将大型数据查询（60k+ 行）导出到 Excel

> ID：11370672
> 
> 赞同：5
> 
> 时间：2012-07-06T22:57:10.540
> 
> 标签：c#, javascript, asp.net, excel, gridview

我创建了一个报告工具作为内部 Web 应用程序的一部分。该报告在 GridView 中显示所有结果，我使用 JavaScript 将 GridView 的内容逐行读取到 Excel 对象中。JavaScript 继续在不同的工作表上创建数据透视表。

不幸的是，我没想到如果返回超过几天，GridView 的大小会导致浏览器出现过载问题。该应用程序每天有几千条记录，假设每月 60k，理想情况下，我希望能够返回长达一年的所有结果。行数导致浏览器挂起或崩溃。

我们在带有 SQL Server 的 Visual Studio 2010 上使用 ASP.NET 3.5，预期的浏览器是 IE8。该报告由一个网格视图组成，该视图根据用户选择的人群从少数几个存储过程中的一个中获取数据。网格视图位于更新面板中：

```
<asp:UpdatePanel ID="update_ResultSet" runat="server">
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btn_Submit" />
</Triggers>
<ContentTemplate>
<asp:Panel ID="pnl_ResultSet" runat="server" Visible="False">
    <div runat="server" id="div_ResultSummary">
        <p>This Summary Section is Automatically Completed from Code-Behind</p>
    </div>
        <asp:GridView ID="gv_Results" runat="server" 
            HeaderStyle-BackColor="LightSkyBlue" 
            AlternatingRowStyle-BackColor="LightCyan"  
            Width="100%">
        </asp:GridView>
    </div>
</asp:Panel>
</ContentTemplate>
</asp:UpdatePanel> 
```

我对我的团队来说相对较新，所以我遵循他们将存储过程返回到 DataTable 并将其用作后面代码中的 DataSource 的典型做法：

```
 List<USP_Report_AreaResult> areaResults = new List<USP_Report_AreaResult>();
    areaResults = db.USP_Report_Area(ddl_Line.Text, ddl_Unit.Text, ddl_Status.Text, ddl_Type.Text, ddl_Subject.Text, minDate, maxDate).ToList();
    dtResults = Common.LINQToDataTable(areaResults);

    if (dtResults.Rows.Count > 0)
    {
        PopulateSummary(ref dtResults);
        gv_Results.DataSource = dtResults;
        gv_Results.DataBind(); 
```

（我知道你在想什么！但是，是的，从那以后我学到了更多关于参数化的知识。）

LINQToDataTable 函数没有什么特别之处，只是将列表转换为数据表。

有几千条记录（最多几天），这很好用。GridView 显示结果，并且有一个按钮供用户单击以启动 JScript 导出器。外部 JavaScript 函数将每一行读入 Excel 工作表，然后使用它来创建数据透视表。数据透视表很重要！

```
function exportToExcel(sMyGridViewName, sTitleOfReport, sHiddenCols) {
//sMyGridViewName = the name of the grid view, supplied as a text
//sTitleOfReport = Will be used as the page header if the spreadsheet is printed
//sHiddenCols = The columns you want hidden when sent to Excel, separated by semicolon (i.e. 1;3;5).
//              Supply an empty string if all columns are visible.

var oMyGridView = document.getElementById(sMyGridViewName);

//If no data is on the GridView, display alert.
if (oMyGridView == null)
    alert('No data for report');
else {
    var oHid = sHiddenCols.split(";");  //Contains an array of columns to hide, based on the sHiddenCols function parameter
    var oExcel = new ActiveXObject("Excel.Application");
    var oBook = oExcel.Workbooks.Add;
    var oSheet = oBook.Worksheets(1);
    var iRow = 0;
    for (var y = 0; y < oMyGridView.rows.length; y++)
    //Export all non-hidden rows of the HTML table to excel.
    {
        if (oMyGridView.rows[y].style.display == '') {
            var iCol = 0;
            for (var x = 0; x < oMyGridView.rows(y).cells.length; x++) {
                var bHid = false;
                for (iHidCol = 0; iHidCol < oHid.length; iHidCol++) {
                    if (oHid[iHidCol].length !=0 && oHid[iHidCol] == x) {
                        bHid = true;
                        break; 
                    } 
                }
                if (!bHid) {
                    oSheet.Cells(iRow + 1, iCol + 1) = oMyGridView.rows(y).cells(x).innerText;
                    iCol++;
                }
            }
            iRow++;
        }
    } 
```

**我正在尝试做的事情：**创建一个可以处理这些数据并将其处理到 Excel 中的解决方案（可能是客户端）。有人可能会建议使用[HtmlTextWriter](https://stackoverflow.com/questions/5565382/how-to-export-gridview-to-excel)，但是 afaik 不允许自动生成数据透视表并创建令人讨厌的弹出警告......

**我试过的：**

*   填充 JSON 对象——我仍然认为这有潜力，但我还没有找到让它工作的方法。
*   使用 SQLDataSource - 我似乎无法使用它来获取任何数据。
*   分页和循环浏览页面——混合进度。虽然一般来说很难看，但我仍然有一个问题，即为每个显示的页面查询并返回整个数据集。

**更新：** 我仍然对替代解决方案持开放态度，但我一直在追求 JSON 理论。我有一个可以从 DataTable 生成 JSON 对象的有效服务器端方法。我不知道如何将该 JSON 传递到（外部）exportToExcel JavaScript 函数中......

```
 protected static string ConstructReportJSON(ref DataTable dtResults)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("var sJSON = [");
        for (int r = 0; r < dtResults.Rows.Count; r++)
        {
            sb.Append("{");
            for (int c = 0; c < dtResults.Columns.Count; c++)
            {
                sb.AppendFormat("\"{0}\":\"{1}\",", dtResults.Columns[c].ColumnName, dtResults.Rows[r][c].ToString());
            }
            sb.Remove(sb.Length - 1, 1); //Truncate the trailing comma
            sb.Append("},");
        }
        sb.Remove(sb.Length - 1, 1);
        sb.Append("];");
        return sb.ToString();
    } 
```

任何人都可以展示如何将此 JSON 对象携带到外部 JS 函数中的示例吗？或用于导出到 Excel 的任何其他解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-17T17:46:36.810

编写 CSV 文件既简单又高效。但是，**如果您需要 Excel，也可以**以相当有效的方式完成，通过**使用 Microsoft Open XML SDK 的 open XML Writer**可以处理 60,000 多行。

1.  如果您还没有 Microsoft Open SDK，请安装它（谷歌“下载 microsoft open xml sdk”）
2.  创建控制台应用程序
3.  添加对 DocumentFormat.OpenXml 的引用
4.  添加对 WindowsBase 的引用
5.  尝试运行一些测试代码，如下所示（需要一些使用）

[只需在http://polymathprogrammer.com/2012/08/06/how-to-properly-use-openxmlwriter-to-write-large-excel-files/](http://polymathprogrammer.com/2012/08/06/how-to-properly-use-openxmlwriter-to-write-large-excel-files/)查看 Vincent Tan 的解决方案 （下面，我稍微清理了他的示例帮助新用户。）

在我自己的使用中，我发现常规数据非常简单，但我确实必须从我的真实数据中删除“\0”字符。

```
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Spreadsheet; 
```

...

```
 using (var workbook = SpreadsheetDocument.Create("SomeLargeFile.xlsx", SpreadsheetDocumentType.Workbook))
        {
            List<OpenXmlAttribute> attributeList;
            OpenXmlWriter writer;

            workbook.AddWorkbookPart();
            WorksheetPart workSheetPart = workbook.WorkbookPart.AddNewPart<WorksheetPart>();

            writer = OpenXmlWriter.Create(workSheetPart);
            writer.WriteStartElement(new Worksheet());
            writer.WriteStartElement(new SheetData());

            for (int i = 1; i <= 50000; ++i)
            {
                attributeList = new List<OpenXmlAttribute>();
                // this is the row index
                attributeList.Add(new OpenXmlAttribute("r", null, i.ToString()));

                writer.WriteStartElement(new Row(), attributeList);

                for (int j = 1; j <= 100; ++j)
                {
                    attributeList = new List<OpenXmlAttribute>();
                    // this is the data type ("t"), with CellValues.String ("str")
                    attributeList.Add(new OpenXmlAttribute("t", null, "str"));

                    // it's suggested you also have the cell reference, but
                    // you'll have to calculate the correct cell reference yourself.
                    // Here's an example:
                    //attributeList.Add(new OpenXmlAttribute("r", null, "A1"));

                    writer.WriteStartElement(new Cell(), attributeList);

                    writer.WriteElement(new CellValue(string.Format("R{0}C{1}", i, j)));

                    // this is for Cell
                    writer.WriteEndElement();
                }

                // this is for Row
                writer.WriteEndElement();
            }

            // this is for SheetData
            writer.WriteEndElement();
            // this is for Worksheet
            writer.WriteEndElement();
            writer.Close();

            writer = OpenXmlWriter.Create(workbook.WorkbookPart);
            writer.WriteStartElement(new Workbook());
            writer.WriteStartElement(new Sheets());

            // you can use object initialisers like this only when the properties
            // are actual properties. SDK classes sometimes have property-like properties
            // but are actually classes. For example, the Cell class has the CellValue
            // "property" but is actually a child class internally.
            // If the properties correspond to actual XML attributes, then you're fine.
            writer.WriteElement(new Sheet()
            {
                Name = "Sheet1",
                SheetId = 1,
                Id = workbook.WorkbookPart.GetIdOfPart(workSheetPart)
            });

            writer.WriteEndElement(); // Write end for WorkSheet Element
            writer.WriteEndElement(); // Write end for WorkBook Element
            writer.Close();

            workbook.Close();
        } 
```

如果您查看该代码，您会注意到两个主要写入，首先是工作表，然后是包含工作表的工作簿。工作簿部分是最后的无聊部分，较早的工作表部分包含所有行和列。

在您自己的适应中，您可以将真实的字符串值从您自己的数据写入单元格中。相反，在上面，我们只是使用行和列编号。

```
writer.WriteElement(new CellValue("SomeValue")); 
```

值得注意的是，Excel 中的行编号从 1 而不是 0 开始。从零索引开始编号的行将导致“损坏文件”错误消息。

最后，如果您正在处理非常大的数据集，**请不要调用 ToList()**。使用**数据阅读器风格****的数据流**式方法。例如，您可以有一个**IQueryable并在****for each**中使用它。您永远不会真的希望必须同时将所有数据都保存在内存中，否则您将遇到内存不足和/或内存利用率高的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:02:44.430

我会尝试使用[displaytag](http://www.displaytag.org/1.2/)来显示结果。您可以将其设置为每页显示一定数量，这应该可以解决您的超载问题。然后，您可以设置 displaytag 以允许 Excel 导出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T01:13:08.973

我们通常使用“导出”命令按钮来处理此问题，该按钮连接到服务器端方法以获取数据集并将其转换为 CSV。然后我们调整响应头，浏览器会将其视为下载。我知道这是一个服务器端解决方案，但您可能需要考虑它，因为在您实施服务器端记录分页之前，您将继续遇到超时和浏览器问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:21:58.090

自从我开始这个问题以来已经将近一个半星期了，我终于设法让它在某种程度上发挥了作用。我将暂时等待标记答案，看看是否有其他人有更有效、更好的“最佳实践”方法。

通过生成 JSON 字符串，我将 JavaScript 与 GridView 分离。JSON 是在填充数据时在后面的代码中生成的：

```
 protected static string ConstructReportJSON(ref DataTable dtResults)
    {
        StringBuilder sb = new StringBuilder();
        for (int r = 0; r < dtResults.Rows.Count; r++)
        {
            sb.Append("{");
            for (int c = 0; c < dtResults.Columns.Count; c++)
            {
                sb.AppendFormat("\"{0}\":\"{1}\",", dtResults.Columns[c].ColumnName, dtResults.Rows[r][c].ToString());
            }
            sb.Remove(sb.Length - 1, 1); //Truncate the trailing comma
            sb.Append("},");
        }
        sb.Remove(sb.Length - 1, 1);
        return String.Format("[{0}]", sb.ToString());
    } 
```

返回一串数据，例如

[ {“来电者”：“John Doe”，“办公室”：“5555”，“类型”：“来电”等}，

{“来电者”：“Jane Doe”，“办公室”：“7777”，“类型”：“外出”等}，{等}]

我通过使用以下方法将文本分配给 UpdatePanel 中的 Literal 来隐藏此字符串：

```
 <div id="div_JSON" style="display: none;">
            <asp:Literal id="lit_JSON" runat="server" /> 
    </div> 
```

JavaScript 通过读取 div 的内容来解析输出：

```
function exportToExcel_Pivot(sMyJSON, sTitleOfReport, sReportPop) {
     //sMyJSON = the name, supplied as a text, of the hidden element that houses the JSON array.
     //sTitleOfReport = Will be used as the page header if the spreadsheet is printed.
     //sReportPop = Determines which business logic to create a pivot table for.

var sJSON = document.getElementById(sMyJSON).innerHTML;
var oJSON = eval("(" + sJSON + ")");

 //    DEBUG Example Test Code
 //    for (x = 0; x < oJSON.length; x++) {
 //        for (y in oJSON[x])
 //            alert(oJSON[x][y]); //DEBUG, returns field value
 //            alert(y); //DEBUG, returns column name
 //    }

//If no data is in the JSON object array, display alert.
if (oJSON == null)
    alert('No data for report');
else {
    var oExcel = new ActiveXObject("Excel.Application");
    var oBook = oExcel.Workbooks.Add;
    var oSheet = oBook.Worksheets(1);
    var oSheet2 = oBook.Worksheets(2);
    var iRow = 0;
    var iCol = 0;

        //Take the column names of the JSON object and prepare them in Excel
        for (header in oJSON[0])
        {
            oSheet.Cells(iRow + 1, iCol + 1) = header;
            iCol++;
        }

        iRow++;

        //Export all rows of the JSON object to excel
        for (var r = 0; r < oJSON.length; r++)
        {
            iCol = 0;
            for (c in oJSON[r]) 
                    {
                        oSheet.Cells(iRow + 1, iCol + 1) = oJSON[r][c];
                        iCol++;
                    } //End column loop
            iRow++;
        } //End row 
```

字符串输出和 JavaScript 'eval' 解析都工作得非常快，但循环遍历 JSON 对象比我想要的要慢一点。

我相信这种方法将被限制在大约 10 亿个字符的数据中——可能更少，这取决于内存测试的结果。（我计算过，我可能每天最多查看 100 万个字符，所以在报告的一年内应该没问题。）

# html - 在 li 内定位一个 span

> ID：11370675
> 
> 赞同：6
> 
> 时间：2012-07-06T22:57:48.093
> 
> 标签：html, css

我设置了一个列表，在每行文本的左侧设置了一个背景图像，尽管它们似乎没有对齐，我在文本周围放置了一个跨度以尝试重新定位文本，但它似乎没有工作

这是我使用的代码..

HTML

```
<ul class="price-features">
<li><span>One page website with contact form</span></li>
<li><span>Social Media Integration</span></li>
<li><span>One year hosting + Domain registration</span></li>
</ul> 
```

CSS

```
 .price-features{
margin-top:30px;
 }

 .price-features li{
background-image:url(/images/prices/orange-arrow.png);
background-repeat:no-repeat;
background-position:left;
padding-left:15px;
height:30px;
border-bottom:#999 1px solid;
background-color:#996;
 }

 .price-features li span{
  padding-top:5px;
 } 
```

[http://i.stack.imgur.com/rV1LM.png](http://i.stack.imgur.com/rV1LM.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T23:00:51.840

填充仅影响块级元素。您需要将您的元素更改`span`为块级元素或覆盖默认`display`为`block`或`inline-block`。

```
.price-features li span{
  display: block;
  padding-top:5px;
} 
```

# objective-c - 初始化ObjectC中的空字符串？

> ID：11370676
> 
> 赞同：4
> 
> 时间：2012-07-06T22:57:57.297
> 
> 标签：objective-c, ios

有人使用以下来初始化 NSstring

```
NSString *astring = [[NSString alloc] init]; 
```

我想知道为什么不直接使用

```
NSString *atring = nil or NSString *astring = @"" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-07T01:23:03.607

和- 之间没有*语义*差异，但完全不同。前两个产生对*不可变*字符串值的引用，最后一个表示*没有*值。`NSString *astring = [[NSString alloc] init];``NSString *astring = @"";``NSString *astring = nil;`

 **生成零长度字符串的各种方式是否产生不同的对象完全是一个实现细节。编码：

```
NSString *a = [[NSString alloc] init];
NSString *b = [NSString new];
NSString *c = @"";
NSString *d = [NSString stringWithString:@""];
NSLog(@"%p, %p, %p, %p, %p", a, b, c, d, @""); // %p = print the value of the reference itself 
```

输出（确切值会有所不同）：

```
0x7fff7100c190, 0x7fff7100c190, 0x1000028d0, 0x1000028d0, 0x1000028d0 
```

显示仅创建了 2 个零长度字符串对象 - 一个用于 / `@""`，一个用于`alloc`/ `init`。由于字符串是*不可变*的，因此这种共享是安全的，但通常您不应**依赖**它并尝试使用引用比较 ( `==`) 来比较字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:01:32.917

```
NSString *atring = nil 
```

是不同的——它是一个 nil 指针，而不是一个空字符串。

```
NSString *astring = @"" 
```

几乎是一样的，如果你把它改成类似的东西

```
NSString* astring=[@"" retain]; 
```

这是“无关紧要”的事情之一；他或她只是使用了一种方式。可能根本没有特别的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T23:01:44.037

NSString *atring = nil; 只是将指针设置为 nil，除了确保指针设置为 nil 之外什么也不做；

NSString *astring = @""; 是一个速记文字，相当于 [NSString stringWithString:@""];

另一方面，我不知道为什么如果字符串不可变，您为什么要将字符串初始化为空，因为您以后将无法在不覆盖它的情况下更改它。**

# sql - 使用休眠查询多对多关系

> ID：11370680
> 
> 赞同：0
> 
> 时间：2012-07-06T22:58:21.913
> 
> 标签：sql, hibernate, many-to-many

我使用休眠的资源类中有一个多对多关系。在类别类中：

```
@Entity
public class Category {

    Id
    @GeneratedValue
    private long id;

    @ManyToMany
    @JoinTable(name = "category_activity", 
    joinColumns = { @JoinColumn(name = "Category_id") }, 
    inverseJoinColumns = { @JoinColumn(name = "activities_id") })
    private Collection<Activity> activities;
} 
```

在 Activity 类中：

```
@Entity
public class Activity {

    @Id
    @GeneratedValue
    private long id;

    @ManyToMany
    @JoinTable(name="category_activity", 
    joinColumns={@JoinColumn(name="activities_id")},
    inverseJoinColumns={@JoinColumn(name="Category_id")})
    private Collection<Category> category;
} 
```

当我在它们之间建立 oneToMany 关系时，我使用的 Query 对我来说效果很好：

```
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();
Collection<Activity> activities = (Collection<Activity>) session.createQuery("from Activity as a where a.category.id=" + categoryId + " order by a.key").list();
session.getTransaction().commit(); 
```

感谢任何帮助，我可以为 ManyToMany 关系修复此查询？

我也使用了这个查询：

```
activities = (List<Activity>) session.createQuery("from Activity a join a.category cs where cs.id= :categoryId order by a.key").setLong("categoryId", categoryId).list(); 
```

我在堆栈跟踪中遇到了这个错误：

```
<html><head><title>Apache Tomcat/7.0.23 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 500 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server encountered an internal error () that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.lang.Comparable
    java.util.ComparableTimSort.countRunAndMakeAscending(Unknown Source)
    java.util.ComparableTimSort.sort(Unknown Source)
    java.util.ComparableTimSort.sort(Unknown Source)
    java.util.Arrays.sort(Unknown Source)
    java.util.Collections.sort(Unknown Source)
    se.softwerk.timelog.controller.ActivityManager.activityList2(ActivityManager.java:64)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
</pre></p><p><b>note</b> <u>The full stack trace of the root cause is available in the Apache Tomcat/7.0.23 logs.</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/7.0.23</h3></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T03:58:01.490

首先，您不应该连接字符串，这为[SQLInjection 攻击](http://en.wikipedia.org/wiki/SQL_injection)打开了大门，您应该使用命名参数。更多关于[命名参数here](http://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/)

其次，如果你有ManyToMany关系，双方应该是多元化的：

这

```
private Collection<Category> category; 
```

应该是这样的：

```
private Collection<Category> categories; 
```

现在关于你的特定问题，你有这个

```
from Activity as a where a.category.id= :categoryId order by a.key 
```

你需要这个：

```
from Activity a join a.category cs where cs.id= :categoryId  order by a.key 
```

# zend-studio - 外部程序配置 zend studio

> ID：11370681
> 
> 赞同：0
> 
> 时间：2012-07-06T22:58:37.987
> 
> 标签：zend-studio

在 Eclispe 中，我可以转到运行 > 外部工具 > 外部工具配置，并在左侧看到一个名为“程序”的选项。从那里我可以添加一个运行外部 perl 脚本的配置，在这种情况下，它将我正在处理的文件 scp 到远程服务器。

在 Zend Studio 中可以做到这一点吗？我在配置面板中看不到“程序”选项 - 左窗格只是空白。希望有一个简单的答案，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:38:38.433

这是配置过滤的问题。进入过滤下拉菜单（见截图）并取消选中“过滤配置类型”选项。

![过滤选项截图](../Images/35ebddaa7b26d5456dc80673e1af0f58.png)

# git - 什么是 libintl.h，我在哪里可以得到它？

> ID：11370684
> 
> 赞同：54
> 
> 时间：2012-07-06T22:59:17.667
> 
> 标签：git, osx-lion

尝试从源代码进行 git 的 make install ，它不断出现错误：

```
 make install
* new build flags or prefix
CC credential-store.o
In file included from credential-store.c:1:
In file included from ./cache.h:8:
./gettext.h:17:11: fatal error: 'libintl.h' file not found
#       include <libintl.h>
            ^
1 error generated.
make: *** [credential-store.o] Error 1 
```

在 lib.intl.h 上没有多少谷歌搜索出现过任何东西。这个难以捉摸的库是什么，我怎样才能得到它才能最终安装 git？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-11-16T18:57:42.950

在 OSX 上使用 El Capitan 和自制软件进行 FWIW，我做了一个：

1) 我不确定 El Capitan 升级是否破坏了某些东西，所以首先我确保我拥有最新的 gettext：

```
$ brew reinstall gettext 
```

然后我不得不重新链接：

```
$ brew unlink gettext && brew link gettext --force 
```

之后，其他工具能够找到它，生活又恢复了正常。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-06T23:15:04.703

根据系统的不同，它可能是 GNU C 库 (glibc) 的一部分。

请注意，仅安装文件`libintl.h`不太可能对您有任何好处。

在基于 Debian 的系统（包括 Debian、Ubuntu 和 Linux Mint）上，它是`libc6-dev`软件包的一部分，安装有：

```
sudo apt-get install libc6-dev 
```

由于您使用的是 Mac OS X，因此 Google 搜索“libintl.h OSX”会显示很多人遇到类似问题。根据`INSTALL`Git 来源中的文件：

> 设置`NO_GETTEXT`为禁用本地化支持并使 Git 仅使用英语。如果在系统上找不到，脚本会自动执行此`autoconf`操作。`configure``libintl`

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-01-20T11:56:24.870

我了解到 libintl 来自 libgettext。如果您已经通过 Homebrew 安装了 gettext，您会看到：

```
$ locate libintl
/usr/local/Cellar/gettext/0.18.3.2/lib/libintl.8.dylib
/usr/local/Cellar/gettext/0.18.3.2/lib/libintl.a
/usr/local/Cellar/gettext/0.18.3.2/lib/libintl.dylib
<..snip..> 
```

对于“找不到-lintl的库”问题，以下对我有用

```
ln -s /usr/local/Cellar/gettext/0.18.3.2/lib/libintl.* /usr/local/lib/ 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-06T23:17:54.317

如果您可以找到正确版本的 Libtools（来自[http://ftp.gnu.org/gnu/libtool/](http://ftp.gnu.org/gnu/libtool/)），您可能会在包中找到它。

否则，您可以使用以下配置来删除此依赖项：

```
./configure --disable-nls 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-16T20:54:14.920

当包在寻找这个文件时，安装或构建 GNU gettext 包。`${prefix}/include/libintl.h`除其他外，此软件包“安装”

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-01T22:46:09.050

为了在 OSX Lion 上安装最新版本的 git，我这样做了：

*请注意，如果您还没有安装 git，您可以从网站下载并解压到`~/src/git`

我还建议`whereis git`您检查一下您是否已经安装了它，这样您就知道将前缀设置为什么。我的是，`/usr/bin/git`所以我将前缀设置为`/usr`

```
mkdir ~/src
git clone https://github.com/git/git.git
cd git
make configure
./configure --prefix=/usr
make
make install 
```

通过这样做，我不必下载任何额外的库或在论坛上寻找答案。感谢 automake，我知道 git 是为我的系统设置的，并且运行起来不会有任何问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-04T23:12:06.533

这看起来很有希望 - [http://code.google.com/p/rudix/downloads/detail?name=static-libintl-0.18.1.1-5.pkg&can=2&q=](http://code.google.com/p/rudix/downloads/detail?name=static-libintl-0.18.1.1-5.pkg&can=2&q=) - 似乎包含 libintl 作为 pkg。它为我解决了对 libintl 的依赖。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-14T04:39:10.187

如果您不关心本地化并且只使用英语就可以`NO_GETTEXT`，请在`Makefile`

来自`Makefile`：

> 如果您不想翻译 Git 输出，请定义 NO_GETTEXT。翻译后的 Git 需要 GNU libintl 或其他 gettext 实现，以及运行时的 libintl-perl。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-30T15:10:09.960

安装macport并在终端上输入

```
sudo port install libcxx 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-21T05:43:27.257

那些试图在 2021 年 5 月之前在 macOS 上构建 Git 并希望实现国际化的人，我发现这是最好的、非破坏性的解决方案：

```
brew install gettext 
```

找到 libintl 头文件和库的位置：

```
find /opt -name "libintl.*" -print
/opt/homebrew/include/libintl.h
/opt/homebrew/lib/libintl.dylib
/opt/homebrew/lib/libintl.8.dylib
/opt/homebrew/lib/libintl.a
/opt/homebrew/Cellar/gettext/0.21/include/libintl.h
/opt/homebrew/Cellar/gettext/0.21/lib/libintl.dylib
/opt/homebrew/Cellar/gettext/0.21/lib/libintl.8.dylib
/opt/homebrew/Cellar/gettext/0.21/lib/libintl.a 
```

请注意 gettext 目录的位置。

现在运行以下命令（如果您的 CFLAGS 和 LDFLAGS 已经设置，它可能会略有不同。只需确保 gettext 路径包含在已经存在的任何其他内容中）：

```
make configure
./configure "LDFLAGS=$LDFLAGS -L/opt/homebrew/Cellar/gettext/0.21/lib" \
     "CFLAGS=-I/opt/homebrew/Cellar/gettext/0.21/include" 
```

正确配置后，您应该能够使用`make`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-15T03:56:04.803

如果您尝试编译 AssaultCube 并遇到此错误（应该抱怨“INTL/libintl.h”丢失），您必须从 AssaultCube 应用程序内容中获取 INTL.framework 并将其放入 /Library/Frameworks。MacPorts、HomeBrew 等的任何软件包都无法修复它。很多开源项目编译失败，非常非常烦人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-20T05:41:02.883

> 这个难以捉摸的库是什么，我怎样才能得到它才能最终安装 git？

来自[GNU 手册](https://www.gnu.org/software/gnulib/manual/html_node/libintl_002eh.html)：

> ***11.21 libintl.h***
> 
> Libintl 是一个为程序提供本地语言支持的库。
> 
> 定义宏`__USE_GNU_GETTEXT`, `__GNU_GETTEXT_SUPPORTED_REVISION`, 并声明函数 `gettext`, `dgettext`, `dcgettext`, `ngettext`, `dngettext`, `dcngettext`, `textdomain`, `bindtextdomain`, `bind_textdomain_codeset`.
> 
> 文档：
> 
> *   [http://www.gnu.org/software/libc/manual/html_node/Message-catalogs-with-gettext.html](http://www.gnu.org/software/libc/manual/html_node/Message-catalogs-with-gettext.html)，
> *   [http://www.gnu.org/software/gettext/manual/html_node/gettext.html](http://www.gnu.org/software/gettext/manual/html_node/gettext.html)。
> 
> Gnulib 模块：gettext
> 
> 如果安装了 GNU gettext，Gnulib 修复的可移植性问题：
> 
> 某些平台上缺少此头文件：Mac OS X 10.5、FreeBSD 6.0、OpenBSD 3.8、Minix 3.1.8、AIX 5.1、HP-UX 11、IRIX 6.5、OSF/1 5.1、mingw、MSVC 9、Interix 3.5、BeOS .
> 
> 在某些非 glibc 平台：NetBSD 3.0、Solaris 10 上，这些函数无法处理带有系统相关字符串（主要版本 1 或次要版本 1）的 GNU .mo 文件。

您可以`libintl.h`从 Gnulib 获得，它是[GNU 可移植性库](https://www.gnu.org/software/gnulib/)。它可以从 GNU 的 Savannah 下载。

Gnulib[网页](https://www.gnu.org/software/gnulib/)还指出：

> Gnulib 不发布。它旨在用于源级别。
> 
> 您可以在 Savannah 上浏览当前的 gnulib 源代码。
> 
> 要使用 Gnulib，您可以使用以下 shell 命令通过匿名 Git 检索其源代码及其历史记录：
> 
> ```
> git clone git://git.savannah.gnu.org/gnulib.git 
> ```
> 
> 开发人员还可以通过非匿名 Git 检索源代码，以进行提交；有关详细信息，请参阅 Gnulib 的顶级 README 文件。
> 
> 获得源代码后，运行 ./gnulib-tool --help。如需帮助和更多信息，请参阅下面的文档和其他资源。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-28T10:31:31.737

以下对我有用：

1.  `brew reinstall gettext`
2.  `brew unlink gettext && brew link gettext --force`
3.  要让编译器找到 libpq，您可能需要设置：

```
export LDFLAGS="-L/usr/local/opt/libpq/lib"
export CPPFLAGS="-I/usr/local/opt/libpq/include" 
```

例如，在我的系统上安装 Postgis 时，我使用`./configure`了以下标志

```
./configure CPPFLAGS="-I/usr/local/opt/libpq/include" LDFLAGS="-L/usr/local/opt/libpq/lib" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-22T04:25:10.203

我有一个全新安装的 OSX Catalina (10.15.7) 并且能够`/usr/local/lib/libintl.*`通过确保 homebrew 完全更新和升级来获得：

前：

```
user@mac:/usr/local/lib$ ls libintl*
ls: libintl*: No such file or directory 
```

更新/升级自制软件：

```
$ brew update 
```

...为了确保我决定再次运行它

```
$ brew update 
```

...这告诉我我首先需要跑步

```
$ git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow 
```

...第三次的魅力？

```
$ brew update 
```

...告诉我我应该跑

```
$ brew upgrade 
```

之后，`/usr/local/lib/libintl.*`填充：

```
user@mac:/usr/local/lib$ ls libintl*
libintl.8.dylib libintl.a libintl.dylib 
```

我认为这可以满足您的需求！

# java - 如何使用一组代码拥有多个微调器

> ID：11370685
> 
> 赞同：2
> 
> 时间：2012-07-06T22:59:33.367
> 
> 标签：java, android, spinner, android-relativelayout

全部-我的布局如下所示： ![在此处输入图像描述](../Images/2632b9fedb9ac12b96e9ce384093dbfb.png)

我的目标是在所有行上都有这三个微调器。现在他们只在圣詹姆斯（是的，这是垄断）。每个微调器都有大量的代码，并且从头开始为每一行创建一个全新的微调器充其量是困难的。我试图复制第一行，只更改文本：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <RelativeLayout android:id="@+id/stjameslay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView
        android:id="@+id/st_james_place"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/st_james" 
        android:padding="5dp"
        android:textSize="6pt" />

      <Spinner android:id="@+id/owner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true"         
        android:layout_toRightOf="@id/st_james_place" 
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/houses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/owner"
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/hotels"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/houses"
        android:layout_alignBaseline="@id/st_james_place" />   
    </RelativeLayout>

    <RelativeLayout android:id="@+id/balticavelay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/stjameslay">

        <TextView
        android:id="@+id/st_james_place"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/baltic" 
        android:padding="5dp"
        android:textSize="6pt" />

      <Spinner android:id="@+id/owner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true"         
        android:layout_toRightOf="@id/st_james_place" 
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/houses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/owner"
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/hotels"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/houses"
        android:layout_alignBaseline="@id/st_james_place" />   
    </RelativeLayout>

    <RelativeLayout android:id="@+id/boardwalklay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/balticavelay">

      <TextView
        android:id="@+id/st_james_place"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/boardwalk" 
        android:padding="5dp"
        android:textSize="6pt" />

      <Spinner android:id="@+id/owner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true"         
        android:layout_toRightOf="@id/st_james_place" 
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/houses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/owner"
        android:layout_alignBaseline="@id/st_james_place" />
     <Spinner android:id="@+id/hotels"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawSelectorOnTop="true" 
        android:layout_toRightOf="@id/houses"
        android:layout_alignBaseline="@id/st_james_place" />   
    </RelativeLayout>           
</RelativeLayout> 
```

从屏幕截图中可以看出，微调器没有出现。我的想法是，由于微调器上的 id 相同，Java 代码只会将额外的微调器视为重复项。有没有办法做到这一点，还是我必须为每一行和新的 Java 代码（owner2、house2、hotels2 等）制作新的微调器？感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:26:06.087

在我看来，您实际上需要将其作为`ListView`. 创建一个“列表项”布局文件来表示单个列表行，例如...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/propertyLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/propertyName"
        ... />
    <Spinner android:id="@+id/owner"
        ... />
    <Spinner android:id="@+id/houses"
        ... />
    <Spinner android:id="@+id/hotels"
        ... />   
</RelativeLayout> 
```

然后，您需要创建一个自定义`Adapter`来将数据映射/绑定到每个小部件，并将其与`ListView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:27:40.953

我还没有尝试过，但从理论上讲，它应该可以工作。

我会将微调器设置分解为单独的 xml 布局，然后`include`在 xml 中使用以将其添加到每个父（属性）布局。

然后，您可以通过从其父视图引用它们来设置微调器，即使它们具有相同的 id（很像列表行的工作方式）。

```
RelativeLayout boardwalk = (RelativeLayout) findViewById(R.id.boardwalklay);
Spinner boardwalkowner = (Spinner) boardwalk.findViewById(R.id.owner)
// set your spinner here
// do the same for the other two spinners
// repeat for each property 
```

如果每个微调器实际上是相同的，但对于父级，创建一个方法来填充它们，并在获得对特定微调器的引用后调用该方法。

然后在`onItemSelected`抓取中对父级的引用，您可以将其与每个单独的空间相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:09:40.450

您已经在那里回答了您的问题：第二行微调器指的是第一行的 id。如果您希望将它们唯一地放置在 RelativeLayout 中，并且如果您希望在活动代码中查找它们，所有微调器 id 必须是唯一的。

为从@+id/st_james_place 到@+id/textBaltic 的第二行textview 定义一个新id，然后它旁边的微调器现在可以更改为 android:layout_toRightOf="@id/textBaltic" 和 android:layout_alignBaseline="@ id/textBaltic"，然后将spinner的id改为@+id/spinnerBalticOwner，下一个spinner可以这样引用：android:layout_toRightOf="@id/spinnerBalticOwner"。

对所有当前行微调器和下一行中的微调器执行此操作，所有微调器都应正确显示。

在循环中初始化微调器：

```
int[] spinnerIds = new int[] {R.id.owner, R.id.houses, R.id.hotels, R.id.owner2, R.id.houses2, R.id.hotels2, R.id.owner3, R.id.houses3, R.id.hotels3};

for (int i = 0; i < spinnerIds.length; i++) {
   Spinner spinner = (Spinner) findViewById(spinnerIds[i]);
   // standard spinner initialization code
   if (spinner.getTag().equals("owner")) {
     // init spinner based on owner spinner
   } else if (spinner.getTag().equals("houses")) 
     // init spinner based on houses spinner
   } else if (spinner.getTag().equals("hotels")) {
     // init spinner based on hotels spinner
  } 
```

}

然后在您的布局中，您需要将 'android:tag' 添加到所有微调器，将 tag='owner' 添加到第一列微调器，将 tag='houses' 添加到第二列，将 tag='hotels' 添加到第三列：

```
 <Spinner android:id="@+id/owner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:tag="owner"
    android:drawSelectorOnTop="true"         
    android:layout_toRightOf="@id/st_james_place" 
    android:layout_alignBaseline="@id/st_james_place" />
 <Spinner android:id="@+id/houses"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:tag="houses"
    android:drawSelectorOnTop="true" 
    android:layout_toRightOf="@id/owner"
    android:layout_alignBaseline="@id/st_james_place" />
 <Spinner android:id="@+id/hotels"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:tag="hotels"
    android:drawSelectorOnTop="true" 
    android:layout_toRightOf="@id/houses"
    android:layout_alignBaseline="@id/st_james_place" />   
</RelativeLayout> 
```

为此，所有微调器 id 必须是唯一的，我的示例只是将行号附加到原始 id，例如 R.id.owner（第一行）、R.id.owner2（第二行）、R.id.owner3 （第 3 行）。

# php - 帮助理解 php url

> ID：11370687
> 
> 赞同：1
> 
> 时间：2012-07-06T22:59:55.117
> 
> 标签：php, url, url-routing, server-side

我正在查看使用 php 的网站，但我看到`a[]=val1`的不是`b=val2`. 我的问题是为什么网址中有括号？什么类型的代码会产生这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:14:07.597

## 为什么 URL 中有括号？

括号在 url 中表示`val1`将被分配到数组中的下一个位置`a`。如果您对括号的空白部分感到困惑，请查看[php 数组的工作原理](http://php.net/manual/en/language.types.array.php)。

## 什么样的代码会产生这个？

至于创建这样一个 url 的代码，它可以是编码器或其他脚本的显式定义，也可以是使用该`method="get"`属性的表单以某种方式创建的。

## 例子：

要创建它，您可以将数组定义为`name`输入字段的 ，如下所示：

```
<form method="get">
  <input name="a[]" ... />
  <input name="a[]" ... />
  <input name="a[]" ... />
</form> 
```

或者您可以`a`使用此 url 创建一个链接（标签）：

```
<a href="foo.php?a[]=val1&a[]=val2&a[]=val3">Click Me!</a> 
```

要使用 PHP 解析此 url，您将使用该[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)变量从 url 中检索值：

```
<?php
  $a = $_GET['a'];

  $val1 = $a[0];
  $val2 = $a[1];
  $val3 = $a[2];
  ...

  print_r($a);
?> 
```

该`print_r($a)`语句的打印输出如下所示（如果您将其包装在`<pre>`标签中）：

```
Array (
  a => Array (
    0 => 'val1',
    1 => 'val2',
    2 => 'val3'
  )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:01:25.640

这是将新元素附加到数组的语法。每个变量前应该有美元符号：

```
$a[] = $val1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T23:07:01.957

您会在之前的页面上看到输入字段，例如：

```
<input name="color[]" type="checkbox" value="red">
<input name="color[]" type="checkbox" value="blue">
<input name="color[]" type="checkbox" value="green"> 
```

其中用户可以选择多个响应，它们将在操作页面的 $_GET （和 URL）中的 $color 数组中可用，如您所描述的那样显示。

（类似地，它也可以是不基于用户输入的作为数组传递的隐藏变量。）

# c++ - MFC Dialog 返回向量

> ID：11370689
> 
> 赞同：0
> 
> 时间：2012-07-06T23:00:15.687
> 
> 标签：c++, mfc, vector, modal-dialog

我正在创建一个模式对话框并根据用户指定的数量动态创建文本框。然后我将这些文本框的值存储在一个向量中

```
vector <CString*> textBoxText; 
```

我想在对话框关闭时将向量传回。我尝试将指针传递到对话框并更新指针：void CRadioDialog::OnBnClickedOk()。然而，这并没有奏效。我不认为我可以通过数据交换来做到这一点，有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:55:32.980

你能行的。只要确保您返回实际`CString`对象，而不是指针！

```
vector <CString> textBoxText; 
```

里面有什么`OnBnClickedOk`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T07:38:41.100

假设你有一个本地成员 CRadioDialog.h：

```
std::vector <CString> textBoxText; 
```

我建议您使用 CString hee 而不是 CString*

你可以在你的 CRadioDialog.h 中添加一个方法：

```
void fill_my_vector( std::vector<CString>& out_vector ); 
```

和 CRadioDialog.cpp：

```
void CRadioDialog::fill_my_vector( std::vector<CString>& out_vector )
{
    std::copy ( textBoxText.begin(), textBoxText.end(), out_vector.begin() );
} 
```

你已经用 CRadioDialog::OnBnClickedOk() 上的 cstrings 填充了本地 textBoxText

调用代码： void main_window::caller() { ...

```
 std::vector <CString> results;

    CRadioDialog dlg;
    INT_PTR nResponse = dlg.DoModal();
    if (nResponse == IDOK)
    {
        dlg.fill_my_vector( results );
        /* USE YOUR VECTOR */
    }

...
} 
```

这不是最好的优化方法，但很容易理解。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:10:12.733

感谢所有的帮助，我最终使用了这种非常简单的方法，并从不同的论坛推荐：

我将此添加到 dialog.h 文件中：

```
public:
    const std::vector<CString>& TextBoxTexts() const
    {
        return textBoxText;
    } 
```

并在我的主视图中调用它：

```
CRadioDialog dialog; 
if(rDLG.DoModal() == IDOK)
{   
    vector<CString> text;
    text = dialog.TextBoxTexts();
} 
```

# jquery - 使用 jquery 获取容器元素

> ID：11370705
> 
> 赞同：0
> 
> 时间：2012-07-06T23:01:53.847
> 
> 标签：jquery, asp.net, jquery-selectors

我正在使用 asp.net 转发器控件来输出以下标记：

```
<div class="detailsItem">
    <table style="width:100%;border: solid green 1px">
      <tbody>
        <tr>
          <td colspan="3" style="text-align: right">
            <a href="javascript:editItem($(this).closest('.detailsitem'));">Edit</a>
          </td>
        </tr>
      </tbody>
    </table>
</div> 
```

我认为代码`$(this).closest('.detailsitem')`会给我包含 div。如果我对传递给editItem 的内容发出警报，我只会显示一些javascript 代码。不知道那是从哪里来的。我已经尝试过各种组合`.parent`等，但没有运气。

我发现[这个帖子](https://stackoverflow.com/questions/7111642/how-to-select-this-container-element-in-jquery)很相似，但它似乎并没有帮助我。我假设问题可能出在我的函数调用上。

我错过了什么？

非常感谢，一如既往！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:07:53.030

jQuery 选择器区分大小写，请尝试以下操作...（项目中的大写 I）

```
$(this).closest('.detailsItem') 
```

更新：

[Chandu](https://stackoverflow.com/users/527185/chandu)关于“this”对象是 href='javascript:...' 中的窗口对象也是正确的。您还可以使用 onclick='' 属性，其中 'this' 对象是对实际锚点的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:08:07.320

在执行 editItem 函数时，根据您的代码`this`上下文设置为对象。`window`

而是不显眼地绑定点击事件。

例如：

```
<div class="detailsItem">
    <table style="width:100%;border: solid green 1px">
      <tbody>
        <tr>
          <td colspan="3" style="text-align: right">
            <a href="#edit" class="edit-item">Edit</a>
          </td>
        </tr>
      </tbody>
    </table>
</div>

<script type="text/javascript">
 $(function(){
    $(".edit-item").click(function(e){
        e.preventDefault();
        editItem($(this).closest('.detailsItem')); //Changed the class selector to match what you have in HTML
    });
 });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T23:08:34.980

您需要为中继器中的锚点使用一个类

```
<a href="javascript:void(0);" class="edit">Edit</a> 
```

在`ready`事件中，为所有 Anchor 附加一个单击事件处理程序：

```
$(".edit").live("click",function(){
    var cur = $(this);
    editItem(cur.closest("div.detailsItem"));
 }); 
```

# java - 完成一项活动让我回到我的第一个活动

> ID：11370707
> 
> 赞同：0
> 
> 时间：2012-07-06T23:02:03.837
> 
> 标签：java, android

我正在编写一个具有多个活动的应用程序。活动 A 调用活动 B，不期待结果。然后，如果按下按钮 B 将使用 Activity C 启动ActivityForResult。当 Activity C 完成时，它会生成一个包含它需要的所有额外内容的意图并完成。问题是，当它调用 this.finish() 或只是 finish() 时，它会将我一直带回到活动 A。活动 B 中的 onActivityResult 不会被调用。怎么了？

活动 A：开始活动 B

```
Intent in = new Intent(ccstart.this,mainmenu.class);
in.putExtra("uid",loginresponse);
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putString("usr",text_user.getText().toString());
// Commit the edits!
editor.commit();
startActivity(in); 
```

活动 B：为结果启动活动 C

```
Intent intent = new Intent(mainmenu.this,filebrowser.class);
startActivityForResult(intent,0); 
```

活动 C：退货声明

```
Intent result = new Intent();
result.putExtra("fname", file.getAbsolutePath());
this.setResult(Activity.RESULT_OK, result);
finish(); 
```

活动B：根据活动c的结果...

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // If the request went well (OK) and the request was PICK_CONTACT_REQUEST
    if (resultCode == Activity.RESULT_OK && requestCode==0) { //upload a file
        final String fname = data.getExtras().getString("fname");
        final SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); //Load settings
        final String uid = settings.getString("uid", "");
        new Thread(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                doFileUpload(fname, uid);
            }
        }).start();
    }
} 
```

那有什么问题？它发生在一个不返回结果的活动中，所以它不仅仅是这个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:44:20.770

当您开始下一个活动时，您需要显式关闭您的活动，如果没有，它会保留在“活动堆栈”中，您可以使用后退按钮或下一个活动关闭时访问该活动。

开始活动 B 后，您需要在活动 A 上调用[完成](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

# image - Grails：如何在 标签？

> ID：11370710
> 
> 赞同：0
> 
> 时间：2012-07-06T23:02:42.660
> 
> 标签：image, grails, groovy, each

> **可能重复：**
> [Grails：在 gsp 中显示创建的图像](https://stackoverflow.com/questions/4502278/grails-displaying-created-image-in-gsp)

我正在尝试在`<g:each>`标签中显示数据库中的图像。

我的**域类：**

```
class Artists {
    byte[] image

    String artistName
    String bio

    static constraints = {
        image(nullable:true , maxSize:200000)
        artistName(nullable:true)
        bio(nullable:true, maxSize:2000)
    }

} 
```

和**艺术家.gsp：**

```
<g:each in="${dog.Artists.list()}">
    <g:img src="${it.image }" width="120" height="160"/>  //doesn't work, what should I do here???
    <p>Name: ${it.artistName}</p>                         //works  
    <p>Biography: ${it.bio}</p>                           //works
</g:each> 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:44:50.770

您可以使用渲染插件和以下 gsp 标签（这是用于 png 检查其他内容类型的文档中的[内联图像）以尝试内联方式渲染图像：](http://gpc.github.com/grails-rendering/docs/manual/index.html)

```
<rendering:inlinePng bytes="${it.image}"/> 
```

# sqlite - sqlite ON CONFLICT ABORT 和 FAIL 之间的区别

> ID：11370712
> 
> 赞同：16
> 
> 时间：2012-07-06T23:03:01.650
> 
> 标签：sqlite, conflict

来自[http://www.sqlite.org/lang_conflict.html](http://www.sqlite.org/lang_conflict.html)

> ABORT 当发生适用的约束冲突时，ABORT 解析算法会中止当前 SQL 语句并返回 SQLITE_CONSTRAIT 错误并撤销当前 SQL 语句所做的任何更改；但是由同一事务中先前的 SQL 语句引起的更改被保留并且事务保持活动状态。这是默认行为，也是 SQL 标准禁止的行为。
> 
> FAIL 当发生适用的约束冲突时，FAIL 解析算法会中止当前的 SQL 语句并返回 SQLITE_CONSTRAINT 错误。但是 FAIL 解决方案不会撤销之前对失败的 SQL 语句的更改，也不会结束事务。例如，如果 UPDATE 语句在尝试更新的第 100 行遇到约束冲突，则前 99 行更改将被保留，但对第 100 行及以后的行的更改永远不会发生。

两者都保留在导致违反约束的语句之前所做的更改并且不结束事务。所以，我想唯一的区别是 FAIL 解决方案不允许进行进一步的更改，而 ABORT 只备份冲突的语句。我做对了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-23T10:45:34.710

答案很简单：FAIL 不会回滚当前语句所做的更改。

考虑这两个表：

```
CREATE TABLE IF NOT EXISTS constFAIL (num UNIQUE ON CONFLICT FAIL);
CREATE TABLE IF NOT EXISTS constABORT (num UNIQUE ON CONFLICT ABORT);
INSERT INTO constFAIL VALUES (1),(3),(4),(5);
INSERT INTO constABORT VALUES (1),(3),(4),(5); 
```

该声明

```
UPDATE constABORT SET num=num+1 WHERE num<5 
```

将失败并且什么都不会改变。但是这种说法

```
UPDATE constFAIL SET num=num+1 WHERE num<5 
```

将更新第一行，然后失败并保持更新 1 行，因此新值为 2、3、4、5

# android - 如何检测触摸事件是否已落在 EditText 中？

> ID：11370721
> 
> 赞同：12
> 
> 时间：2012-07-06T23:04:03.377
> 
> 标签：android

我可以找到 getX() 和 getY() 都返回一个浮点数。但是如何检测 TouchEvent e.get()、e.getY() 的坐标是否在 EditText UI 元素的边界内？我注意到 getX() 和 getY() 是浮点数，但 getHeight() 和 getWidth() 是 int。不会帮助比较...

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-06T23:38:03.163

你到底想做什么？如果您只想检测您的 EditText 是否被触摸，请将 OnTouchListener 添加到 EditText... 甚至 OnClickListener。

编辑：如果你想检测外部，你可以在包含视图中检测触摸事件，然后，如果你有你的 EditText 视图：

```
Rect editTextRect = new Rect();
myEditText.getHitRect(editTextRect);

if (!editTextRect.contains((int)event.getX(), (int)event.getY())) {
    Log.d("test", "touch not inside myEditText");
} 
```

或者你在 EditText 和容器中都添加了一个触摸监听器，并在其中一个 EditText 中返回 false，这样它将被拦截而不转发给父级。因此，您在父级侦听器中检测到的所有触摸都不属于 EditText。

# php - 如何使用数据表检索额外的 HTTP 变量

> ID：11370723
> 
> 赞同：3
> 
> 时间：2012-07-06T23:04:09.063
> 
> 标签：php, jquery, datatables

我正在为 jquery 使用数据表插件，并且正在使用 fnServerParams 函数。我已经发送了一些额外的变量，但我不确定如何在 server_processing 文件中检索它们。

代码 ：

```
$('#fleetsTable').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "/server_processing.php",
    "fnServerParams": function ( aoData ) {
        aoData.push( { "name": "customerId", "value": "6" } );
    }
} ); 
```

这是我在 server_processing.php 文件中尝试过的

```
$customerId = "";
if ( isset( $_GET['customerId'] ) )
{
    $customerId = $_GET['customerId'] ;
} 
```

这似乎不起作用..

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:34:47.523

安德烈的评论是错误的。Datatables 要求您以以下格式发送参数

```
aoData.push( { "name": "customerId", "value": "6" } ); 
```

这将生成一个 URL：

```
../server_processing.php?customerId=6 
```

在您的服务器代码中，

```
$customerId = $_GET['customerId'] ; 
```

应该返回值。您需要在 php 文件中进行更多调试以确定变量丢失的位置。很可能是拼写错误。

# java - 运行 hadoop 作业：找不到类 - org.apache.tools.ant.launch.AntMain

> ID：11370724
> 
> 赞同：1
> 
> 时间：2012-07-06T23:04:16.723
> 
> 标签：java, ant, hadoop

我在 vmware 的 Debian linux 发行版上本地安装了 Hadoop，但我在运行我的测试作业时遇到了困难。

我可以使用 IntelliJ Idea 轻松构建创建包，甚至我的 mrunit 测试也按预期通过。

一旦我尝试运行该作业，我会收到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/AntMain
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:190)
Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.launch.AntMain
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

我确保所有依赖项都包含在 jar 中 - 我可以看到，包含 ANT 1.6.5。

我什至尝试安装 ANT 并将 $ANT_HOME 设置为其位置，但没有任何效果。

我可能做错了什么？

我正在使用以下 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>tl.knyt</groupId>
    <artifactId>hanoi</artifactId>
    <version>1.0</version>
    <name>Hanoi</name>
    <url>http://maven.apache.org</url>

    <dependencies>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.20.2-cdh3u4</version>
        </dependency>

        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-mrunit</artifactId>
            <version>0.20.2-cdh3u4</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>

    </dependencies>
    <repositories>
        <repository>
            <id>cloudera.repos</id>
            <url>https://repository.cloudera.com/artifactory/cloudera-repos/</url>
            <name>Cloudera Repos</name>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
</project> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:09:31.780

确保在你的 hadoop 类路径中有 org/apache/tools/ant/launch/AntMain 的 jar 文件

您可以在 $HADOOP_HOME/conf/hadoop-site 文件中编辑 jar 文件

您必须重新启动 hadoop 才能使更改生效。

# xcode - 在宏上使用 LLVM 编译器的新构建设置

> ID：11370726
> 
> 赞同：1
> 
> 时间：2012-07-06T23:04:42.803
> 
> 标签：xcode, cocoa, preprocessor

我刚刚在 Xcode 4.3.3 上创建了一个新的可可项目。Apple LLVM 编译器 3.1 设置的预处理器宏分配了一个 DEBUG=1 $(inherited) 值。我删除它并再次添加它，现在编译时出现错误：

> clang：错误：没有这样的文件或目录：'DEBUG=1'

我在项目设置中搜索该值，发现该值也在“其他警告标志”中定义

我的问题是：

1.  只拥有`DEBUG`vs 和有什么不一样`DEBUG=1`？
2.  做什么`$(inherited)`？
3.  它还在其他警告标志上做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:45:22.637

首先，如果您遇到编译错误，那么您很可能将宏放回项目设置中的错误位置。请确保您已将其放入该部分下的项目的`Debug`配置分支中。`Preprocessor Macros``Apple LLVM compiler x.x - Preprocessing`

对于您的其他问题：

1.  第一个版本只是定义了宏`DEBUG`，所以它基本上是空的。你可以测试它是否存在，但不多。第二个将其设置为，`1`以便预处理器实际上可以进行比较，例如`#if DEBUG && SHOULD_DIE_ON_ERROR`如果应用程序遇到一些验证错误，您可能会在哪里中止，但前提`SHOULD_DIE_ON_ERROR`是设置`1`了并且您正在调试模式下运行。
2.  只是引入了您从更上层继承的`$(inherited)`其他宏。因此，如果您的项目定义了一些项目，而您的目标定义了更多项目，则目标也可以获取项目的设置，而无需重新定义它们。
3.  它根本不应该影响警告标志。如果有的话，它会确定您包含的头文件中的代码路径（例如可可框架），这些路径可能使用不同的实现，或者可能将调试信息添加到数据结构或其他任何东西。

# mongodb - mongodb：按出现次数排序的字段

> ID：11370728
> 
> 赞同：0
> 
> 时间：2012-07-06T23:04:55.910
> 
> 标签：mongodb

我有一个集合，每个文档代表一个虚拟拍卖。我想找到给定时间段内最常见的项目 ID。在 SQL 中，我会`SELECT item, COUNT(*) as count`使用`GROUP BY item`通常的排序和限制。是否有与此等效的mongodb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:14:25.257

MongoDB 在这里有几个选项。

*   在 2.1.0+ 版本中，您可以使用新的[Aggregation Framework](http://docs.mongodb.org/manual/applications/aggregation/)。[这里](http://www.mongodb.org/display/DOCS/SQL+to+Aggregation+Framework+Mapping+Chart)有一个转换表。
*   在旧版本中，您可以使用[Map / Reduce](http://www.mongodb.org/display/DOCS/MapReduce)
*   对于简单版本的聚合，您可以使用特殊的[聚合运算符](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)。

这些选项中的每一个都将具有不同的语法和不同的速度。

在任何这些情况下，您可能会发现这些选项相对较慢。Map / Reduce 作业旨在“离线”运行，通常作为“cron 作业”或“计划任务”。请注意，如果您打算经常这样做，您可能需要预先聚合这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:19:05.440

或者您可以使用[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)然后对输出集合进行排序，或者您可以使用命令[group](http://www.mongodb.org/display/DOCS/Aggregation)，但您需要在客户端进行大部分排序和限制。

组命令示例：

```
db.coll.group(
       {key: { a:true, b:true },
        cond: { active:1 },
        reduce: function(obj,prev) { prev.csum += obj.c; },
        initial: { csum: 0 }
        }); 
```

还值得一提的是，在 mongodb 的下一个稳定版本（2.2）中，他们将发布一个新的[聚合框架](http://www.mongodb.org/display/DOCS/Aggregation+Framework)，这将使这些操作变得更加容易。

# xpath - Xpath 表达式按属性查找非子元素

> ID：11370730
> 
> 赞同：2
> 
> 时间：2012-07-06T23:05:12.917
> 
> 标签：xpath, attributes

这是一个很好的谜题。假设我们有这段代码：

```
<page n="1">
 <line n="3">...</line>
</page> 
```

使用简单的 xpath 表达式在**页面**元素“n=1”中定位**行**元素“n=3”非常容易：xpath(//page[@n='1')/line[@n='3 ']）。伟大的，美丽的，优雅的。现在假设我们拥有的是这种编码（熟悉 TEI 的人会知道它来自哪里）。

 **```
<pb n="1"/>
(arbitrary amounts of stuff)
<lb n="3"/> 
```

我们想找到 n="3" 的**lb**元素，它跟在 n="1" 的**pb**元素之后。但请注意——这个**lb**元素几乎可以在**pb**之后的任何地方：它可能不是（并且很可能不是）兄弟姐妹，但可能是 pb 的兄弟姐妹的孩子**，**或者**pb**的父母的孩子，等等等等等等

所以我的问题是：如何使用 XPath搜索这个 n="3" 的**lb**元素，它跟在 n="1" 的**pb元素之后？**

提前致谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T00:23:03.843

**使用**：

```
 //pb[@n='1']/following::lb[@n='2']
|
  //pb[@n='1']/descendant::lb[@n='2'] 
```

`lb`这将选择文档顺序中指定的任何元素`pb`——即使想要的`lb`元素是该元素的后代`pb`。

**请注意**，***以下表达式通常不会选择所有想要的`lb`元素***（它无法选择任何作为元素后代的`pb`元素）：

```
 //pb[@n='1']/following::lb[@n='2'] 
```

**说明**：

正如**[W3C XPath 规范](http://www.w3.org/TR/1999/REC-xpath-19991116/#axes)**中定义的那样，`following::`和`descendant::`轴是不重叠的：

> “*以下轴包含与上下文节点相同的文档中的所有节点，这些节点按文档顺序在上下文节点之后， **不包括任何后代**，不包括属性节点和命名空间节点*”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:25:11.427

那将是

```
//pb[@n=1]/following::lb[@n=3] 
```**

# qt - 我需要在 GNU GPL 项目中共享 .pro.user 文件吗？

> ID：11370731
> 
> 赞同：0
> 
> 时间：2012-07-06T23:05:23.910
> 
> 标签：qt, licensing, gpl

当我红色 Qt 指南 ( [http://doc.qt.nokia.com/qtcreator-2.4/creator-sharing-project-settings.html](http://doc.qt.nokia.com/qtcreator-2.4/creator-sharing-project-settings.html) ) 我看到 .pro.user 文件存储用户特定的项目设置，我可以从中制作 pro.shared，但我不知道如何制作它（尽管阅读了指南），以及我需要包括哪些部分。

无论如何，我是否必须在 GNU GPL v3 项目中提供这个文件，或者开发人员可以在没有这个文件的情况下从源代码的其余部分构建应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T00:51:33.190

不，您只需要一个`.pro`文件即可构建项目。

并且仅存储您的自定义 IDE 首选项，它们不是构建项目所必需的，也不是 GPL 意义上的派生`.pro.user`作品`.pro.shared`

# java - 调试java文件编译（使用gwt）

> ID：11370734
> 
> 赞同：0
> 
> 时间：2012-07-06T23:05:36.750
> 
> 标签：java, eclipse, gwt

在一个先例问题中，有人问我要更准确地了解我的编译错误消息。事实是：我对 GWT 和 Java 一无所知。按照文档，我尝试从以前使用 GWT 开发的 Web 项目编译 Java 文件。因此，为了测试和了解这一切是如何工作的，我将 java 文件夹（之前已使用适当的工具编译过）放入我的 ide Eclipse 中的 web 应用程序项目的 src 文件夹中

使用命令 GWT Compile 运行编译器时，出现以下消息错误：

编译模块 java.org.primagora 验证新编译的单元 在第一次通过时忽略了 5 个编译错误的单元。编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。查找入口点类 [错误] 无法找到类型 'org.client.primagoraEntryPoint' [错误] 提示：检查类型名称 'org.client.primagoraEntryPoint' 是否真的是您的意思 [错误] 提示：检查您的类路径是否包含所有必需的源根

当我查看文件上的错误时，例如 java.org.client.primagoraEntryPoint，当它在文件的开头声明为“package org.client”时，我发现一个错误。似乎有一个错误路径。我认为我使用的 java 文件夹会在 Eclipse 中正确实现。

这显然是文件路径问题吗？我应该如何调试它？（我真的对gwt、java、eclipse一无所知）

最好的，纽本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:49:53.937

您的 GWT 模块文件在哪里（即以 结尾的文件`.gwt.xml`），它的内容是什么？您为入口点列出的包是`org.client`，全名是`org.client.primagoraEntryPoint`，表明`org/client/primagoraEntryPoint.java`. 默认情况下，模块文件包含`client`相对于它们的包作为源，因此如果文件位于错误的位置，这将无法正常工作。

基于此，您的模块文件应该在`org`包中：

```
src/
    org/
        SampleModule.gwt.xml
        client/
            primagoraEntryPoint.java 
```

从您的错误一开始，您就将其`java.org.primagora`列为模块：

> 编译模块 java.org.primagora

这表明了以下结构：

```
src/
    org/
        client/
            primagoraEntryPoint.java
    java/
        org/
            primagora.gwt.xml 
```

这没有任何意义，因为 GWT 现在正在寻找`java.org.client`包而不是`org.client`包。尝试使用前面提到的包设置。

更好的选择可能是选择一个现有的工作项目，例如 Eclipse 的 GWT 插件将创建的项目，或者 GWT 下载中的示例之一。

# node.js - 循环摩卡测试？

> ID：11370738
> 
> 赞同：12
> 
> 时间：2012-07-06T23:06:19.657
> 
> 标签：node.js, mocha.js

我正在尝试循环 mocha 测试套件（我想针对无数具有预期结果的值测试我的系统），但我无法让它工作。例如：

**规格/example_spec.coffee**：

```
test_values = ["one", "two", "three"]

for value in test_values
  describe "TestSuite", ->
    it "does some test", ->
      console.log value
      true.should.be.ok 
```

问题是我的控制台日志输出如下所示：

```
three
three
three 
```

我希望它看起来像这样：

```
one
two
three 
```

如何为我的 mocha 测试循环这些值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T23:35:54.163

这里的问题是您正在关闭“值”变量，因此它将始终评估为其最后一个值。

像这样的东西会起作用：

```
test_values = ["one", "two", "three"]
for value in test_values
  do (value) ->
    describe "TestSuite", ->
      it "does some test", ->
        console.log value
        true.should.be.ok 
```

这是有效的，因为当值被传递到这个匿名函数时，它被复制到外部函数中的新值参数，因此不会被循环更改。

编辑：添加了咖啡脚本“做”的好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-14T20:27:58.453

您可以使用“数据驱动”。[https://github.com/fluentsoftware/data-driven](https://github.com/fluentsoftware/data-driven)

```
var data_driven = require('data-driven');
describe('Array', function() {
  describe('#indexOf()', function(){
        data_driven([{value: 0},{value: 5},{value: -2}], function() {
            it('should return -1 when the value is not present when searching for {value}', function(ctx){
                assert.equal(-1, [1,2,3].indexOf(ctx.value));
            })
        })
    })
}) 
```

# php - 在 Drupal 中向我的 XSLT 添加链接功能

> ID：11370739
> 
> 赞同：2
> 
> 时间：2012-07-06T23:06:20.317
> 
> 标签：php, xml, xslt, drupal-6, navigation

我有一个 XML 提要，我已将其转换为动态 Drupal 页面的 HTML，[感谢 drupal.stackexchange.com](https://drupal.stackexchange.com/questions/34109/populate-nodes-with-xml-data-via-xslt/34130#comment34719_34130)上的好用户。然而，问题在于 XML 提要列出了可能需要知道的所有内容，而我的要求是每个页面都呈现特定的信息子集。

从本质上讲，这是一个需要分解的演示时间表。

我的示例提要如下：

```
<track name="Track 1">
  <session name="Session 1" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
    <presentation name="Presentation 1">
       <author>Name 1</author>
       <author>Name 2</author>
       <abstract>summary of this presentation</abstract>
    </presentation>
    <presentation name="Presentation 2">
      ...presentation info
    </presentation>
  </session>

  <session name="Session 2" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
    <presentation name="Presentation 3">
      ...presentation info
    </presentation>
    <presentation name="Presentation 4">
      ...presentation info
    </presentation>
  </session>

  <session name="Session 3" starttime="2012-06-07 08:45" endtime="2012-06-07 10:45">
    <presentation name="Presentation 5">
      ...presentation info
    </presentation>
    <presentation name="Presentation 6">
      ...presentation info
    </presentation>
  </session>
</track> 
```

因此，如您所见，我获得了整个过程的所有信息。每个轨道、会话和演示都在一个提要中。截至目前，我可以毫无问题地将其解析为动态页面。

本质上，这就是我想要得到的（忽略 dateTime 的解析......我已经有了它）：

```
<h2>Track 1</h2>
<h3>Session 1</h3>
<ul>
  <li><a href="presentation-1.html">Presentation 1</a></li>
  <li><a href="presentation-2.html">Presentation 2</a></li>
</ul>
<h3>Sessoin 2</h3>
<ul>
  <li><a href="presentation-3.html">Presentation 3</a></li>
  <li><a href="presentation-4.html">Presentation 4</a></li>
</ul> 
```

然后，单击其中一个演示链接会将您带到一个新页面：

```
<h2>Presentation 1</h2>
<p>Presented by Name 1, Name 2</p>
<p>summary of this presentation</p> 
```

所以，我在这里有两个问题......我不完全知道如何以这种方式分解提要，这必须在 Drupal 6 模块中完成。我只是展示了一个示例提要的片段......因为我得到的提要非常大，必须以这种方式分解。

我拥有的 Drupal 代码如下：

```
function _xml_import_generate()
{
  $path = drupal_get_path('module', 'xml_import');
  $xsl = new DOMDocument();
  $xsl->load("{$path}/xml_import.xsl");

  $xslt = new XSLTProcessor(); 
  $xslt->importStyleSheet($xsl);

  $xml = new DOMDocument();
  $xml->load("myfeed.xml");

  return (string) $xslt->transformToXML($xml);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:09:43.567

**I. 对于您想要的第一页**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <html>
       <xsl:apply-templates/>
     </html>
 </xsl:template>

 <xsl:template match="track">
   <h2><xsl:value-of select="@name"/></h2>
   <xsl:apply-templates>
    <xsl:with-param name="pTrack" select=
         "count(preceding-sibling::track) +1"/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="session">
  <xsl:param name="pTrack"/>
   <h3><xsl:value-of select="@name"/></h3>
   <ul>
     <xsl:apply-templates>
        <xsl:with-param name="pTrack" select="$pTrack"/>
        <xsl:with-param name="pSess" select=
            "count(preceding-sibling::session) +1"/>
     </xsl:apply-templates>
   </ul>
 </xsl:template>

 <xsl:template match="presentation">
  <xsl:param name="pTrack"/>
  <xsl:param name="pSess" />
  <li>
    <a href=
    "presentation.html?track={$pTrack}&amp;sess={$pSess}&amp;pr={position()}">
      <xsl:value-of select="@name"/>
    </a>
  </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<conference>
    <track name="Track 1">
      <session name="Session 1" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
        <presentation name="Presentation 1">
           <author>Name 1</author>
           <author>Name 2</author>
           <abstract>summary of this presentation</abstract>
        </presentation>
        <presentation name="Presentation 2">
          ...presentation info
        </presentation>
      </session>

      <session name="Session 2" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
        <presentation name="Presentation 3">
          ...presentation info
        </presentation>
        <presentation name="Presentation 4">
          ...presentation info
        </presentation>
      </session>

      <session name="Session 3" starttime="2012-06-07 08:45" endtime="2012-06-07 10:45">
        <presentation name="Presentation 5">
          ...presentation info
        </presentation>
        <presentation name="Presentation 6">
          ...presentation info
        </presentation>
      </session>
    </track>
</conference> 
```

**产生了这个有用的结果**：

```
<html>
   <h2>Track 1</h2>
   <h3>Session 1</h3>
   <ul>
      <li><a href="presentation.html?track=1&amp;sess=1&amp;pr=1">Presentation 1</a></li>
      <li><a href="presentation.html?track=1&amp;sess=1&amp;pr=2">Presentation 2</a></li>
   </ul>
   <h3>Session 2</h3>
   <ul>
      <li><a href="presentation.html?track=1&amp;sess=2&amp;pr=1">Presentation 3</a></li>
      <li><a href="presentation.html?track=1&amp;sess=2&amp;pr=2">Presentation 4</a></li>
   </ul>
   <h3>Session 3</h3>
   <ul>
      <li><a href="presentation.html?track=1&amp;sess=3&amp;pr=1">Presentation 5</a></li>
      <li><a href="presentation.html?track=1&amp;sess=3&amp;pr=2">Presentation 6</a></li>
   </ul>
</html> 
```

* * *

**二、第二页：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="track" select="1"/>
 <xsl:param name="sess" select="1"/>
 <xsl:param name="pr" select="1"/>

 <xsl:template match="/*">
     <html>
       <xsl:apply-templates select=
         "track[position()=$track]
                  /session[position()=$sess]
                      /presentation[position()=$pr]"/>
     </html>
 </xsl:template>

 <xsl:template match="presentation">
  <h2><xsl:value-of select="@name"/></h2>
  <p>Presented by <xsl:text/>
    <xsl:apply-templates select="author"/>
  </p>
  <p><xsl:copy-of select="abstract/node()"/></p>
 </xsl:template>

 <xsl:template match="author">
  <xsl:if test="position() > 1">, </xsl:if>
  <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，会产生所需的正确结果**：

```
<html>
   <h2>Presentation 1</h2>
   <p>Presented by Name 1, Name 2</p>
   <p>summary of this presentation</p>
</html> 
```

**请注意**：

每当最终用户单击第一页上的链接时，Web 服务器必须处理此 Web 请求，并且必须调用第二个转换，将外部/全局参数传递给它，它必须从相应的查询中正确设置其值 -字符串参数。

# matlab - 如何在 Matlab 中通过空间坐标选择像素？

> ID：11370750
> 
> 赞同：0
> 
> 时间：2012-07-06T23:08:46.777
> 
> 标签：matlab

我想使用浮点数作为索引选择图像中的像素。Matlab 文档[说这可以使用 "空间坐标"](http://www.mathworks.com/help/releases/R2011a/toolbox/images/brcu_al-1.html)。但是，它没有提供有关如何执行此操作的任何线索。如何使用浮点索引（“空间坐标”）从图像中选择像素？

假设我有以下代码：

```
i = imread('pout.tif')
get_pixel_by_spatial_coords(i, 1.5, 3.63) 
```

函数的真实名称是`get_pixel_by_spatial_coords`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:01:09.240

我认为有关空间坐标的链接文章仅描述了各种图像绘图例程使用的坐标系。

您的目的，只需将数字四舍五入即可。根据上下文，使用以下之一：

```
i(round(1.5), round(3.63))
i(floor(1.5), floor(3.63))
i(ceil(1.5),  ceil(3.63) ) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T23:11:16.367

我相信您正在寻找[`ginput`](http://www.mathworks.com/help/techdoc/ref/ginput.html)：

> `ginput`在当前坐标区中升高十字准线，以便您识别图中的点，用鼠标定位光标。图形必须具有焦点`ginput`才能接收输入。如果它没有轴，则在第一次单击或按键时创建一个。

# jquery - 如何在jquery中选择单选按钮

> ID：11370751
> 
> 赞同：0
> 
> 时间：2012-07-06T23:09:14.190
> 
> 标签：jquery

下面的代码将一个值添加到文本框中：

```
$('#mainTxtWeight').val(textWeight); 
```

但我想知道的是如何根据使用 jquery 的值来选择单选按钮？

下面是单选按钮：

```
<table id="replies">
    <tr>
        <th colspan="2">Replies</th>
    </tr>
    <tr>
        <td>Number of Replies:</td>
        <td align="left">
            <div class="replytd">
                <label>
                    <input type="radio" name="reply" id="singlebtn " value="single" class="replyBtn"
                    />Single</label>
            </div>
            <div class="replytd">
                <label>
                    <input type="radio" name="reply" id="multiplebtn" value="multiple" class="replyBtn"
                    />Multiple</label>
            </div>
        </td>
    </tr>
</table> 
```

我在下面创建了一个 if 语句，如果回复类型等于“单个”，我只需要帮助选择“单个”单选按钮，或者如果回复类型等于“多个”，则选择“多个”单选按钮。

下面是if语句：

```
if(reply == "Single") {
    //select "Single" radio button
} else if(reply == "Multiple") {
    //select "Multiple" radio button
} 
```

我希望这行代码也能发生完全相同的事情，这又是“单个”和“多个”单选按钮：

```
var $btnReply = "<input type='radio' name='reply[" + count + "]' value='single' class='replyBtnRow' /> Single<br /><input type='radio' name='reply[" + count + "]' value='multiple' class='replyBtnRow' /> Multiple";

$replies.children().append($btnReply);

if($("input[name=reply]:checked").length) {
    $replies.find('input[name="reply[' + count + ']"]').eq($("input[name=reply]:checked").val() == "single" ? 0 : 1).prop("checked", true);
} 
```

更新：

```
function addwindow(reply) { 

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 

        $('input[value="'+reply.toLowerCase()+'"]').attr('checked', true);
        } else { 
            $(plusbutton_clicked).closest('tr').find('input[value="'+reply.toLowerCase()+'"]').attr('checked', true);
            }

    $.modal.close(); 
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:13:23.183

```
$('input[name="reply"]').filter('[value="' + reply.toLowerCase() + '"]')
                        .attr('checked', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:17:28.627

如果您尝试获取具有回复内容值的单选按钮，如果我正确理解您的问题，您可以试试这个

```
$('input[value="'+reply.toLowerCase()+'"]')​.attr('checked', true) 
```

假设回复将始终是“单个”或“多个”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:12:12.397

```
if(reply == "Single")
    $("#singlebtn").attr('checked',true);

else if(reply == "Multiple")
    $("#multiplebtn").attr('checked',true); 
```

# objective-c - 将 Google Objective-C API 'GTL' 添加到 iPhone 项目

> ID：11370752
> 
> 赞同：11
> 
> 时间：2012-07-06T23:09:16.460
> 
> 标签：objective-c, xcode, api, sdk, google-drive-api

如何将 Google Drive API 添加到我的 iPhone 项目中以便我可以使用它？

到目前为止，我已经将 GTL 项目拖到了我当前的应用程序项目中（以便它嵌套在我的应用程序项目下）。然后，在我的应用程序目标的构建阶段，我添加了 GTL.framework，然后将 GTL.framework 添加到我的“使用库链接二进制文件”（参见附图）。这会引发以下错误：

```
clang: error: no such file or directory: '/Users/xxx/Library/Developer/Xcode/DerivedData/Golf-hfbczyaemhyzgvbrtgdxqnlzeuaa/Build/Products/Debug-iphonesimulator/GTL/GTL' 
```

我该如何解决这个问题？

![在此处输入图像描述](../Images/8b1975e9796fb367babc56b5cae476f0.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-27T00:49:58.280

今天大部分时间我都在为这个确切的问题而苦苦挣扎，我发现它非常令人沮丧。我终于弄明白了，所以这里有一个简单的分步指南，介绍如何使用 XCode5、使用 ARC 将 Google API 添加到 iOS7 项目，而无需创建工作区或任何其他。

RawMean 提供的答案效果很好，但它给了我 ARC 的问题。我也不喜欢您必须添加项目、创建工作区然后删除项目的事实。所以我的解决方案将处理这两个问题。

1.  查看代码。为此，您可以`svn checkout http://google-api-objectivec-client.googlecode.com/svn/trunk/ google-api-objectivec-client-read-only`从终端运行。我将此代码称为*“Google 的代码”*。
2.  转到项目的构建阶段。展开“将二进制文件与库链接”并添加`Security.framework`和`SystemConfiguration.framework`。这两个是谷歌代码所必需的。
3.  转到项目的构建设置。使用那里的搜索框查找`Other Linker Flags`（确保在搜索框左侧选择“全部”）。添加`-ObjC -all_load`.
4.  现在搜索`User headers search path`并添加到 Goggle`/Source`目录的完整路径。确保选择`recursive`.
5.  使用 Finder，转到 Google 的`/Source/OAuth2/Touch`目录。拖放`GTMOAuth2ViewTouch.xib`到您的项目中。
6.  返回 Finder 并转到 Google 的`/Source`目录。拖放`GTLCommon_Sources.m`到`GTLCommon_Networking.m`您的项目中。
7.  现在，您需要为要使用的服务导入文件。就我而言，我需要使用 Google Drive，所以我会添加这些。在 finder 中，转到 Google 的`/Source/Services/Drive/Generated`目录。拖放`GTLDrive.h`到`GTLDrive_Sources.m`您的项目中。如果您想使用其他服务，请转到其目录并导入相应的 .h 和 .m 文件。
8.  出于某种原因，Google 的代码不使用 ARC，所以如果你现在尝试构建，你会得到 ARC 编译错误。所以我们只需要**为 Google 的代码**禁用 ARC 。为此，请返回项目的构建阶段，但这次展开“编译源”。确保`GTLCommon_Sources.m`并`GTLCommon_Networking.m`在那里。选择它们，按回车键并输入`-fno-objc-arc`。这将为他们两个禁用 ARC。确保您没有为任何其他文件添加此选项（除非您知道自己在做什么）。
9.  你完成了！现在，只要您想使用 Google 的 API，只需导入`GTMOAuth2ViewControllerTouch.h`您的服务标头即可。就我而言，由于我使用的是 Google Drive，我还将导入`GTLDrive.h`.

我希望这有助于并避免一些人把他们的头发都拔掉。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-07T19:53:51.293

我也为这个错误消息而苦苦挣扎。这就是我解决它的方法：

确保您在 GTLSource/Common/ 下添加了您正在使用的服务的文件夹（例如，为 GoogleDrive 添加 Drive 文件夹）。

在 GTL.xcodeproj（您已经添加到工作区）下找到 GTLSource 文件夹并将其拖到您的主项目（在您的情况下为高尔夫）。完毕！

现在您可以删除对已添加到工作区的 GTL.xcodeproj 的引用。

使用这种方法，您甚至不需要添加库（如果已添加它们，请从链接库列表中删除它们）。

Google API 文档与 Apple 的文档完全不同（它不好）。

我还应该提到我正在为 iOS 而不是 MacOSX 构建应用程序，但这也应该适用于 OSX。

![在此处输入图像描述](../Images/338f62913423063af27949364d1929c2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T04:37:10.117

不仅要执行上述操作，还要进入“[Project Name] Targets->Build Phases> Compile Sources”并单击 + 按钮。然后添加所有 .m 文件，由于某种原因，大多数文件不是自动的。

我还必须从 Drive 文件夹中删除（引用）“GTLDrive_Souces.m”，但我不明白为什么我必须这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-19T03:20:46.037

> **最好使用 Pod**
> 
> 1.  如何安装 CocoaPods 并使用您的 Xcode 项目进行设置以供参考：[ [http://blogs.triffort.com/?p=309][1]](http://blogs.triffort.com/?p=309][1])
> 2.  打开 pod 文件并添加
>     
>     
>     
>     **pod 'Google-API-Client/Drive', '~> 1.0'** 保存 pod 文件并在终端调用 pod install。注意：您必须在此行之后提供 link_with 'Your_project_name', 'Your_project_nameTests' 的 pod 文件仅添加您的库

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-17T10:09:49.617

这并不能真正解决安装 Google API 的问题，但在这个 repo 中，我在不使用 Google API 的情况下从 iOS 应用程序访问了 Google Forms。[https://github.com/goktugyil/QorumLogs](https://github.com/goktugyil/QorumLogs)

所以你可能会跳过某些项目中的安装 API 部分

这是如何设置它的教程： [https ://github.com/goktugyil/QorumLogs/blob/master/Log%20To%20GoogleDocs.md](https://github.com/goktugyil/QorumLogs/blob/master/Log%20To%20GoogleDocs.md)

这是执行此操作的代码：

```
private static var googleFormLink: String!
private static var googleFormAppVersionField: String!
private static var googleFormUserInfoField: String!
private static var googleFormMethodInfoField: String!
private static var googleFormErrorTextField: String!

/// Setup Google Form links
static func setupOnlineLogs(#formLink: String, versionField: String, userInfoField: String, methodInfoField: String, textField: String) {
    googleFormLink = formLink
    googleFormAppVersionField = versionField
    googleFormUserInfoField = userInfoField
    googleFormMethodInfoField = methodInfoField
    googleFormErrorTextField = textField
}

private static func sendError(#text: String) {
    var url = NSURL(string: googleFormLink)
    var postData = googleFormAppVersionField + "=" + text
    postData += "&" + googleFormUserInfoField + "=" + "anothertext"                
    postData += "&" + googleFormMethodInfoField + "=" + "anothertext" 
    postData += "&" + googleFormErrorTextField + "=" + "anothertext" 

    var request = NSMutableURLRequest(URL: url!)
    request.HTTPMethod = "POST"
    request.setValue("application/x-www-form-urlencoded; charset=utf-8", forHTTPHeaderField: "Content-Type")
    request.HTTPBody = postData.dataUsingEncoding(NSUTF8StringEncoding)
    var connection = NSURLConnection(request: request, delegate: nil, startImmediately: true)
} 
```

# iphone - rightbarbuttonitem 没有出现？

> ID：11370755
> 
> 赞同：1
> 
> 时间：2012-07-06T23:09:33.903
> 
> 标签：iphone, objective-c, ios, uibarbuttonitem

注意：我可以通过在我的 barbutton 和 barbutton2 方法中将 leftbarbuttonitem 切换为 rightbarbutton 项目来实现这一点。我只是想知道为什么它不能正常工作！

出于某种奇怪的原因，我的 leftbarbuttonitem 正在显示，但我的 rightbarbuttonitem 永远不会弹出！这是我的代码

```
 -(void)barButton {
    image = [UIImage imageNamed:@"BBut.png"];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage: [image stretchableImageWithLeftCapWidth:7.0 topCapHeight:0.0] forState:UIControlStateNormal];
    [button setBackgroundImage: [[UIImage imageNamed: @"BBut.png"] stretchableImageWithLeftCapWidth:7.0 topCapHeight:0.0] forState:UIControlStateHighlighted];

    [button addTarget:self action:@selector(showlocations:) forControlEvents:UIControlEventTouchUpInside];
    button.frame= CGRectMake(3.0, 0.0, image.size.width+1, image.size.height+0);

    UIView *v=[[UIView alloc] initWithFrame:CGRectMake(3.0, 0.0, image.size.width+1, image.size.height) ];

    [v addSubview:button];

    UIBarButtonItem *modal = [[UIBarButtonItem alloc] initWithCustomView:v];
    self.navigation.leftBarButtonItem = modal;

-(void)barButton2 {
    image2 = [UIImage imageNamed:@"Refresh.png"];

    UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
    [button2 setBackgroundImage: [image2 stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateNormal];
    [button2 setBackgroundImage: [[UIImage imageNamed: @"Refresh.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateHighlighted];
        // [button2 addTarget:self action:@selector(viewDidLoad) forControlEvents:UIControlEventTouchUpInside];
    button2.frame= CGRectMake(281.0, 5.0, image2.size.width, image2.size.height);

    UIView *v2=[[UIView alloc] initWithFrame:CGRectMake(281.0, 5.0, image2.size.width, image2.size.height) ];

    [v2 addSubview:button2];
        UIBarButtonItem *refresh = [[UIBarButtonItem alloc] initWithCustomView:v2];    self.navigation.rightBarButtonItem = refresh;
    NSLog(@"THE ACTION HAS BEEN RECIEVED!"); } 
```

在我的 ViewDidLoad 方法中，我有这个：

```
[self barButton2];
[self barButton]; 
```

该操作确实通过了，并且我确实收到了我的 NSLog 方法。有谁知道为什么会这样？左栏按钮始终显示，如果我将第一个 barbutton 更改为 rightbarbuttonitem 并将 barbutton2 更改为 leftbarbutton 项目，然后更改 CGRect 坐标，它就可以工作，这就是我现在用来让它工作的东西，但为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:29:12.927

您看不到正确的按钮，因为您在屏幕外绘制它。

X 坐标设置为 281.0 ，`button2`其父视图 X 坐标也设置为 281.0。因此，您的按钮位于 x = 562 中，这意味着它位于屏幕之外。

将您的`button2`X 坐标设置为 0，看看是否有帮助：

```
button2.frame= CGRectMake(0.0, 5.0, image2.size.width, image2.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:14:01.230

您似乎正在为每个操作创建一个新视图并添加一个按钮。所以，你永远不会看到这两个按钮。您将需要在两个操作中访问相同的视图，以确保添加两个按钮子视图。

# mysql - MySQL 在 VARCHAR 上引用索引前缀时如何使用 ORDER BY？

> ID：11370762
> 
> 赞同：2
> 
> 时间：2012-07-06T23:10:02.770
> 
> 标签：mysql, indexing, prefix

我很好奇这是如何处理的。我有一个`varchar(255)`名为的列`title`，其中索引了前 10 个字符。

如果我创建一个按标题排序的 MySQL 查询，它是仅利用该索引，还是忽略它，还是我必须发出命令才能使用该索引？

例如，假设我有两个`title`名为：

```
This is the same thing
This is the same thing only slightly different 
```

前 10 个字符是相同的，那么 MySQL 是如何处理的呢？它是否使用前 10 个字符的前缀索引，然后逐行索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:24:13.813

嗯，[据说](http://dev.mysql.com/doc/refman/5.5/en/order-by-optimization.html)：

> 即使 ORDER BY 与索引不完全匹配，也可以使用索引，只要索引的所有未使用部分和所有额外的 ORDER BY 列都是 WHERE 子句中的常量。

但我强烈建议用 EXPLAIN 检查这个查询，看看优化器会选择哪条路径。

# jquery-plugins - Backbone 视图中的 jQuery 插件 raty.js 不断从服务器重新加载相同的星形图像

> ID：11370766
> 
> 赞同：0
> 
> 时间：2012-07-06T23:10:31.823
> 
> 标签：jquery-plugins, backbone.js, raty

每当我将鼠标悬停在页面上的 wbotelhos/raty.js 插件上时，它会随着星星的亮起和熄灭而反复从服务器获取 star-on.png 和 star-off.png。有没有办法使用图像的本地客户端缓存？我正在 Chrome 中进行测试。我使用以下 Backbone.View 渲染代码将插件插入到 Item 元素中。

```
render: function(manage) {
  this.collection.each(function(user) {
    this.insertView("ul", new User.Views.Item({
      model: user
    }));
  }, this);

  return manage(this).render().then(function(el) {
    // Only re-focus if invalid
    this.$("input.invalid").focus();
    this.$(".raty-test").raty();
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:35:15.803

为了解决这个问题，我写了 github：charlesjshort / raty 从 wbotelhos/raty 分叉来用 setSource 函数替换设置图像源的代码，该函数将图像设置为 localStorage 数组中的对象。我使用 github: doomhz/jQuery-Image-Cache 将图像预加载到 localStorage 数组中。

# asp.net-mvc - 可以结合 ValidationSummary(true) 和 ModelState.AddError("field", "error") 吗？

> ID：11370768
> 
> 赞同：1
> 
> 时间：2012-07-06T23:10:48.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3

*   我使用 ValidationSummary(true) 在
    一个地方打印模型验证错误，并在每个字段附近打印属性验证错误。

*   在控制器中，我添加了一个属性错误： ModelState.AddError("property","error")

    我看到该属性的消息验证错误，但我也得到了validation-summary-errors div，尽管我没有模型错误。我做错了什么，如果我没有模型错误，为什么会生成 div？

    ```
    <div class="validation-summary-errors">
        <ul>
              <li style="display:none"></li>
        </ul>
    </div> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:59:28.323

您必须像这样添加两次：

```
string errorMessage = "The error message";
//will show in the summary
ModelState.AddModelError(string.Empty, errorMessage);
//will show for the prop
ModelState.AddModelError("Prop", errorMessage); 
```

或者你可以像这样改变你的电话：

```
@Html.ValidationSummary(false) 
```

将参数更改为`false`将包括所有属性错误。中的参数名称`ValidationSummary`是`excludePropertyErrors`，因此通过传递`true`您将它们排除在外。

# haskell - 如何导入特定的 PortNumber 构造函数

> ID：11370778
> 
> 赞同：7
> 
> 时间：2012-07-06T23:11:31.687
> 
> 标签：haskell

简单的问题。

这编译：

```
module Example where

import Network

port :: PortID
port = PortNumber 3001 
```

这不会：

```
module Example where

import Network (PortID, PortNumber)

port :: PortID
port = PortNumber 3001 
```

GHC 说：

```
Example.hs:6:8: Not in scope: data constructor `PortNumber' 
```

为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T23:19:24.150

它一定要是

```
import Network (PortID(PortNumber)) 
```

as`PortNumber`似乎是`PortID`. 另一个导入只是导入所有，`Network`因此`PortNumber`被找到。

# css - CSS 过渡图像

> ID：11370779
> 
> 赞同：2
> 
> 时间：2012-07-06T23:11:45.290
> 
> 标签：css, css-transitions

这是背景图片：

![背景图片](../Images/2189088fec1530e1af6ebf15a7b4a91a.png)

```
#logo
{background-image:url('logo.png');width:20px;height:23px;}
#logo:hover
{background-position:0 -23px;-webkit-transition: all 0.5s ease;}
#logo span
{margin-left:-3000px;} 
```

```
<a href="#"><div id="logo"><span>logo</span></div></a> 
```

这段代码给了我一个幻灯片效果（从黑色 S 到粉红色的垂直幻灯片），而不是我正在寻找的淡入淡出效果。创建两个图像可以解决问题，但在这种情况下这是不可能的。

**仅使用一张图像时如何获得淡入淡出效果？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:35:31.977

试试这个 - [http://jsfiddle.net/Wds5z/4/](http://jsfiddle.net/Wds5z/4/)

```
a, #logo {
    background: url('http://i.stack.imgur.com/w5ZnN.png') 0 -23px;
    width: 20px;
    height: 23px;
    display: block;
}

#logo {
    background-position: 0 0;
    -webkit-transition: opacity .5s linear;
       -moz-transition: opacity .5s linear;
            transition: opacity .5s linear;
}

#logo:hover {
    opacity: 0;
}

#logo span {
    margin-left:-3000px;
}​ 
```

# python - 使用 matplotlib 在 loglog 图中设置轴限制

> ID：11370783
> 
> 赞同：7
> 
> 时间：2012-07-06T23:12:08.480
> 
> 标签：python, matplotlib

如何在我用 matplotlib 绘制的点周围创建空间？

例如，在这个图中，左下角的点被轴截断，但我希望点和轴之间有更多的空间。 ![示例图](../Images/5c0d91cac8fec8a763c04e393033bb9b.png)

```
import matplotlib.pyplot as plt
x = [2**i for i in xrange(4,14)]
y = [i**2 for i in x]
plt.loglog(x,y,'ro',basex=2,basey=2)
plt.xlim([0, 2**14]) # <--- this line does nothing
plt.show() 
```

在交互模式下，该`xlim`行返回`(16.0, 16384)`旧值而不是我尝试设置的新值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T23:16:58.320

零不能绘制在 loglog 图上 (log(0) = -inf)。它静默失败，因为它不能使用 0 作为限制。

试试`plt.xlim([1,2**14])`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:07:07.930

如果您正在寻找一种处理此问题的通用方法并希望自动调整绘图的限制（即使不知道任何数据），您也可以编写一个受此[答案](https://stackoverflow.com/a/9433845/975979)启发的片段来回答类似问题。

请注意，您必须稍微调整代码并对其进行更改，以便它也可以完成 y 轴的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-19T04:35:24.650

这里我`plt.axis()`用来设置 xmin 和 xmax 值（类似于你的`plt.xlim`调用）；但我使用基于范围和间隔的变量“缓冲区”。轴的范围是通过使用最小值和最大值得出的。由于对数刻度不绘制 0 或负数，因此我在函数调用`xmin`内部将参数设置为 1 。`.axis()`

```
interval = 10

plot_range_buffer = (data.column.max() - data.column.min() / interval

plt.axis(
    xmin=1, # to keep scale if minimum is 0 or close to 0
    #xmin = data.column.min()-plot_range_buffer # subtracts interval buffer from min value
    xmax=data.column.max()+plot_range_buffer # adds the interval buffer to max value
) 
```

我们可以根据需要对 y 轴执行相同的操作。控制情节的一个方面需要很多代码，但如果 matplotlib.pyplot 很讨厌，我喜欢在用户函数中使用它。
这是用于反复试验的两个模板用户例程。我测试了第一个，它运行良好；我刚刚构建了第二个作为替代选项，但没有对其进行测试......如果它给出错误，请告诉我。

**用户功能#1：**功能内的全面控制

```
def plotcolumn(some_row_entry):
    """Selects data for some row entry
       Creates a scatter plot from two column variables
       Allows for user control over buffers through manipulation
           of interval that is relative to axis max,min range"""

    # numpy fancy selector for input argument
    data = data[data.some_row_entry == some_row_entry]

    # establish plot
    data.plot.scatter(
        'first_column',
        'second_column',
        logx=True,                                   # turn log xaxis on/off
        #logy=True                                    # turn log yaxis on/off
    )

    # axis range controls
    x_interval = 10
    y_interval = 10

    # x axis (ie x-axis variable)
    x_buffer = (data.first_column.max() - data.first_column.min()) / x_interval

    # y axis (ie y-axis variable)
    y_buffer = (data.second_column.max() - data.second_column.min()) / y_interval

    plt.axis(
        xmin=1,                                      # use for xaxis lower buffer if logx and close to 0
        xmax=data.first_column.max()+x_buffer,       # sets xaxis upper buffer
        #xmin=data.first_column.min()-x_buffer,      # sets xaxis lower buffer if not logx close to 0

        #ymin= 1,                                     # use for yaxis lower buffer if logy and close to 0
        ymax= data.second_column.max()+y_buffer,     # sets yaxis upper buffer
        ymin= data.second_column.min()-y_buffer     # sets yaxis lower if not logy close to 0
    ) 
```

**用户功能 #2：**传递一个轴和间隔的参数

```
def plotcolumn_log_cond(some_row_entry, logaxis = 'x', interval = 10):

    """Selects data for some row entry
       Creates a scatter plot from two column variables.
       Arguments:
           Set axis to be logged (x or y as string)
           Pass interval value (as number)
       """

    # numpy fancy selector for input argument
    data = data[data.some_row_entry == some_row_entry]

    # establish plot
    data.plot.scatter(
        'first_column',
        'second_column',
        logx=True)

    # LOG XAXIS
    if logaxis = 'x':

        # establish plot
        data.plot.scatter(
            'first_column',
            'second_column',
            logx=True
        )

        # axis range controls
        x_interval = interval

        # x axis (ie x-axis variable)
        x_buffer = (data.first_column.max() - data.first_column.min()) / x_interval

        plt.axis(
            xmin=1,                                      # use for xaxis lower buffer if logx and close to 0
            xmax=data.first_column.max()+x_buffer,       # sets xaxis upper buffer
            #xmin=data.first_column.min()-x_buffer,      # sets xaxis lower buffer if not logx close to 0
        )

    # LOG YAXIS
    if logaxis = 'y':

        # establish plot
        data.plot.scatter(
            'first_column',
            'second_column',
            logy=True
        )

        # axis range controls
        y_interval = interval

        # x axis (ie x-axis variable)
        y_buffer = (data.second_column.max() - data.second_column.min()) / y_interval

        plt.axis(
            ymin=1,                                       # use for yaxis lower buffer if logy and close to 0
            ymax=data.second_column.max()+y_buffer,       # sets yaxis upper buffer
            #ymin=data.second_column.min()-y_buffer,      # sets yaxis lower buffer if not logy close to 0
        )

    # NOT X OR Y PASSED
    if (logaxis != 'x') & (logaxis != 'y'):

        # establish plot
        data.plot.scatter(
            'first_column',
            'second_column') 
```

# php - json解码和编码-遍历多维数组并在等于某个值时删除键值

> ID：11370785
> 
> 赞同：0
> 
> 时间：2012-07-06T23:12:24.080
> 
> 标签：php, jquery, json

基本上 json 输出是这个 - 输出来自 php。

```
[{"attr":{"id":"node_2","rel":"default"},"data":"C:","state":"closed"},{"attr":{"id":"node_3","rel":"drive"},"data":"D:","state":"closed"}] 
```

所以因为 rel 等于 default

```
{"attr":{"id":"node_2","rel":"default"},"data":"C:","state":"closed"} 
```

我需要从数组中删除它。

我想过也许使用

```
foreach($arr as $key => &$item) {
    if ($value['rel'] == 'default'{
        unset($arr[$key]); 
```

但是，由于某种原因，这不起作用。我不知道我的方法是否是最好的方法，或者是否有更好的方法来实现这一点。我还需要对其进行解码和编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:53:18.027

正如 Jesse Bunch 所说，您可以使用 json_encode 和 json_decode 来解析 json。

在我解码您发布的 json 后，它作为一个对象返回。要调用一个对象，您必须做一些不同的事情。

```
$arr = json_decode('[{"attr":{"id":"node_2","rel":"default"},"data":"C:","state":"closed"},{"attr":{"id":"node_3","rel":"drive"},"data":"D:","state":"closed"}]');

foreach($arr as $key => $row)
{
    if ($row->attr->rel == 'default'){
        unset($arr[$key]);
    }
}

var_dump($arr); 
```

$arr 不再包含默认的 rel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:19:16.317

在大多数语言中，在循环数组时对其进行变异是不受欢迎的。在 PHP 中，没有什么说在循环时不能改变数组。您正在做的事情绝对没问题，并且可能是最有效的方法。

至于编码和解码，请参见`json_encode`和`json_decode`。

# javascript - jQuery 函数 $('#myelement').is('*') 有什么作用？

> ID：11370786
> 
> 赞同：0
> 
> 时间：2012-07-06T23:12:33.527
> 
> 标签：javascript, jquery

以下代码有什么作用：

`$('#myelement').is('*')`

星号代表什么？由于只有一个元素，`#myelement`我无法理解使用的意义`is()`，它检查一个元素是否与一组元素匹配？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T23:16:52.603

这是一些严肃存在的 JavaScript。

```
$('#myelement').is('*') 
```

`#myelement`只要不存在就会失败，否则返回true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:17:18.170

[http://api.jquery.com/is/](http://api.jquery.com/is/)

至少从我对它的理解来看，它做得很好，以及我倾向于如何使用它。无论调用什么都返回真或假。

示例我有一个复选框，我想确保在通过 AJAX 提交表单之前检查它我会做类似的事情

```
if( $('input#tosCheck').is(':checked') ){
    /*its checked submit form*/
}else{
    alert('Error');
} 
```

总而言之，从 jQuery 到 API 的链接比我能更好地描述它，但我想至少分享一个使用示例来帮助您衡量一些想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T23:18:58.913

基本上检查一个元素是否存在。不是最好的方法...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T23:19:56.780

`is`检查元素是否符合标准。在这种情况下，`"*"`表示所​​有元素。因此，如果前一个选择器返回任何内容，它只会返回 true。

看看这里的例子：http: [//jsfiddle.net/b7DwB/](http://jsfiddle.net/b7DwB/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T23:20:42.603

不能说我曾经见过以前使用过的 jQuery 代码，但它似乎是一种检查元素是否存在的糟糕方法。由于`*`是通用选择器，`true`如果`#myelement`存在，相关表达式将始终返回，否则将返回 false。

我说这是检查元素是否存在的“糟糕”方法，因为您可以简单地检查 jQuery 对象的长度：

```
$('#myelement').length > 0 
```

我没有做任何测试，但我认为上面的速度更快，因为它没有`is()`函数调用的开销。

# magento - Magento - 添加按钮 [+ 添加字段] 在 system.xml 中添加/显示新文本字段

> ID：11370789
> 
> 赞同：1
> 
> 时间：2012-07-06T23:13:20.123
> 
> 标签：magento, magento-1.5

我有一个带有可选文本字段的自定义模块（通过**system.xml**中的*标准文本字段选项*显示）。我想做的是显示 1 个强制性文本字段，并有一个按钮，上面写着**[+ Add Field]**。按下该按钮时，会添加另一个文本字段。我想对**最多**10 个文本字段（最大）执行此操作。有人可以帮我完成这个任务，或者给我一个关于如何做到这一点的好教程吗？

 ********编辑 7/10/12 @ 11:30 AM**

我一直在努力，到目前为止，我可以让文本字段显示出来。不过我有几个问题...

1.  当按下“保存配置”按钮时，在这些动态创建的文本字段中输入的值都不会实际保存。
2.  有没有办法限制实际保存的文本字段数量？
3.  我不确定检索文本字段数据的正确方法。这主要是因为我无法保存这些值......（如果我需要帮助，我将在 #1 修复后添加另一个更新......）

我的**System.xml**文件中有这个（与此直接相关）..

```
<labels translate="label">
    <label>This is some label</label>
    <comment>This is some comment.</comment>
    <tooltip><![CDATA[This is some tooltip]]></tooltip>
    <frontend_type>text</frontend_type>
    <frontend_model>Company_Namespace/adminhtml_textfields</frontend_model>
    <backend_model>adminhtml/system_config_backend_serialized</backend_model>
    <sort_order>50</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>0</show_in_store>
</labels> 
```

我的自定义**Textfields.php** (frontend_model) 文件内容：

```
<?php

class Company_Namespace_Block_Adminhtml_Textfields extends Mage_Adminhtml_Block_System_Config_Form_Field
{
protected $_addRowButtonHtml = array();
protected $_removeRowButtonHtml = array();

protected function _getElementHtml(Varien_Data_Form_Element_Abstract $element)
{
    $this->setElement($element);

    $html = '<div id="code_label_textfields_template" style="display:none">';
    $html .= $this->_getRowTemplateHtml();
    $html .= '</div>';

    $html .= '<ul id="code_label_textfields_container">';

    if ($this->_getValue('method')) {
        foreach ($this->_getValue('method') as $i=>$f) {
            if ($i) {
                $html .= $this->_getRowTemplateHtml($i);
            }
        }
    }

    $html .= '</ul>';

    $html .= $this->_getAddRowButtonHtml('code_label_textfields_container', 'code_label_textfields_template', $this->__('Button Label Here'));

    return $html;
}

protected function _getRowTemplateHtml()
{
    $html = '<li>';

    $html .= '<div style="margin:5px 0 10px;">';
    $html .= '<input class="input-text" name="'.$this->getElement()->getName().'" value="'.$this->_getValue('price/'.$i).'" '.$this->_getDisabled().'/> ';

    $html .= $this->_getRemoveRowButtonHtml();
    $html .= '</div>';

    $html .= '</li>';

    return $html;
}

protected function _getDisabled()
{
    return $this->getElement()->getDisabled() ? ' disabled' : '';
}

protected function _getValue($key)
{
    return $this->getElement()->getData('value/'.$key);
}

protected function _getSelected($key, $value)
{
    return $this->getElement()->getData('value/'.$key)==$value ? 'selected="selected"' : '';
}

protected function _getAddRowButtonHtml($container, $template, $title='Add')
{
    if (!isset($this->_addRowButtonHtml[$container])) {
        $this->_addRowButtonHtml[$container] = $this->getLayout()->createBlock('adminhtml/widget_button')
                ->setType('button')
                ->setClass('add '.$this->_getDisabled())
                ->setLabel($this->__($title))
                //$this->__('Add')
                ->setOnClick("Element.insert($('".$container."'), {bottom: $('".$template."').innerHTML})")
                ->setDisabled($this->_getDisabled())
                ->toHtml();
    }
    return $this->_addRowButtonHtml[$container];
}

protected function _getRemoveRowButtonHtml($selector='li', $title='Remove')
{
    if (!$this->_removeRowButtonHtml) {
        $this->_removeRowButtonHtml = $this->getLayout()->createBlock('adminhtml/widget_button')
                ->setType('button')
                ->setClass('delete v-middle '.$this->_getDisabled())
                ->setLabel($this->__($title))
                //$this->__('Remove')
                ->setOnClick("Element.remove($(this).up('".$selector."'))")
                ->setDisabled($this->_getDisabled())
                ->toHtml();
    }
    return $this->_removeRowButtonHtml;
}
} 
```

***我错过了什么，特别是为了保存价值？？？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:53:38.290

有关示例，请参阅[`system.xml`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/GoogleCheckout/etc/system.xml#L189)和块。[`Mage_GoogleCheckout_Block_Adminhtml_Shipping_Merchant`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/GoogleCheckout/Block/Adminhtml/Shipping/Merchant.php)这有点令人费解，但它确实有效。您可以在 Google Checkout 的商家计算设置中看到这一点。******

# c++ - 是否可以使用 lower_bound() 对结构的普通数组进行二进制搜索？

> ID：11370794
> 
> 赞同：6
> 
> 时间：2012-07-06T23:13:56.193
> 
> 标签：c++, stl

我在内存中有一个 16 字节宽的条目数组。每个条目由两个 64 位整数字段组成。这些条目根据每个条目的前 64 位整数的数值进行排序。是否可以在不先将数据加载到 std::vector 的情况下使用 STL 进行二进制搜索？

我已经看到我可以在普通数组上使用 STL lower_bound() 方法，但我需要它来忽略每个条目的第二个 64 位字段。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T23:19:17.420

您不需要使用`std::vector<>`，但如果您首先将数据转换为正确的数据类型，则最简单：

```
#include <cstdint>

struct mystruct
{
    std::int64_t first, second;
}; 
```

您的问题尚不清楚您现在存储这些数据的方式，但我假设它与上述类似。

然后，您可以`operator<`为您的数据类型重载：

```
#include <algorithm>

bool operator <(mystruct const& ms, std::int64_t const i)
{
    return ms.first < i;
}

int main()
{
    mystruct mss[10] = { /*populate somehow*/ };
    std::int64_t search_for = /*value*/;
    mystruct* found = std::lower_bound(mss, mss + 10, search_for);
} 
```

或者您可以定义一个自定义比较器并将其传递给`std::lower_bound`：

```
#include <algorithm>

struct mystruct_comparer
{
    bool operator ()(mystruct const& ms, std::int64_t const i) const
    {
        return ms.first < i;
    }
};

int main()
{
    mystruct mss[10] = { /*populate somehow*/ };
    std::int64_t search_for = /*value*/;
    mystruct* found = std::lower_bound(mss,
                                       mss + 10,
                                       search_for,
                                       mystruct_comparer());
} 
```

自然地，在 C++11 中，可以使用 lambda 来代替比较器的完整仿函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:23:32.313

```
struct Foo {
    int64_t lower;
    int64_t upper;
};

Foo arr[N];

Foo f;
f.lower = 42;

auto it = std::lower_bound(arr, arr + N, f,
    [](const Foo& lhs, const Foo& rhs){ return lhs.lower < rhs.lower; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:49:38.423

是的，这是可能的。您需要创建一个满足 ForwardIterator 要求的类，该类以正确的方式迭代您的元素（16 字节结构的指针可能会解决问题）。然后您需要定义自己的比较来比较忽略第二个 64 位字段的元素。 [更多信息](http://www.cplusplus.com/reference/algorithm/lower_bound/)。

```
template <class ForwardIterator, class T, class Compare>
  ForwardIterator lower_bound ( ForwardIterator first, ForwardIterator last,
                                const T& value, Compare comp ); 
```

# java - java中的keylistener不起作用

> ID：11370795
> 
> 赞同：0
> 
> 时间：2012-07-06T23:13:57.543
> 
> 标签：java

我希望我的 java 程序默认在后台运行，但是使用 keylistener 来调用我的 changewallpaper 类。changewallpaper 类确实有效，但 keylistener 不调用该方法。keyevent 稍后将更改，目前仅用于测试。

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class listener implements KeyListener {

    public static void main(String[] args){

    }

    @Override
    public void keyReleased(KeyEvent arg0) {
        int key = arg0.getKeyCode();

        if (key == KeyEvent.VK_UP) {
                changewallpaper.main();
        }
    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        int key = arg0.getKeyCode();

        if (key == KeyEvent.VK_UP) {
                changewallpaper.main();
        }
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        int key = arg0.getKeyCode();

        if (key == KeyEvent.VK_UP) {
                changewallpaper.main();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:18:13.710

KeyListener 不会不加选择地监听所有键盘事件——它只监听特定组件上的事件，当该组件具有键盘焦点时。您必须使用[addKeyListener](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Component.html#addKeyListener%28java.awt.event.KeyListener%29)方法或类似方法将侦听器附加到某些东西。

请参阅 Java[如何编写密钥侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)教程

# xml - XSLT如何按从原始字段派生的变量排序？

> ID：11370799
> 
> 赞同：1
> 
> 时间：2012-07-06T23:14:11.090
> 
> 标签：xml, xslt-1.0

我对 xslt 很陌生，想知道如何根据如下派生变量进行排序（使用 xslt 1.0）：

xml:

```
<channel>
  <item>
     <title>#2: Second Guy</title>
  </item>
  <item>
     <title>#3: Third Guy</title>
  </item>
  <item>
     <title>#1: First Guy</title>
  </item>
</channel> 
```

xslt 尝试：

```
<xsl:for-each select="channel/item" >

        <xsl:sort select="$rank" data-type="number" order="ascending" />

        <xsl:variable name="rankStartPosn" select="string-length(substring-before(title, '#'))+1"/>
        <xsl:variable name="rankEndPosn" select="string-length(substring-before(title, ':'))+1"/>
        <xsl:variable name="rank" select="substring(title,number($rankStartPosn), number($rankEndPosn)-number($rankStartPosn))"/>

                <p class="Normal">
                    <xsl:value-of select="title" />
                </p>
            </xsl:if>
        </xsl:if>
    </xsl:for-each> 
```

期望的输出：

```
#1: First Guy
#2: Second Guy
#3: Third Guy 
```

提前感谢您的帮助！乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:33:36.380

啊……顿悟！

只是不要使用变量并将整个表达式放在排序的选择中......比如：

```
<xsl:sort data-type="number" order="ascending" 
             select="substring(title,number(string-length(substring-before(title, '#'))+2), number(string-length(substring-before(title, ':'))+1)-number(string-length(substring-before(title, '#'))+2))"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:04:36.180

**更简单**：

```
<xsl:sort select="substring(substring-before(title, ':'), 2)" 
          data-type="number" order="ascending" /> 
```

# c# - 继承与不同的实例？

> ID：11370800
> 
> 赞同：3
> 
> 时间：2012-07-06T23:14:16.707
> 
> 标签：c#, java, oop

如果我要为各种品牌的汽车建模，我会使用继承层次结构，还是只使用不同的构造函数参数？

是使用继承来关联对象还是仅通过重用同一个类来关联对象的一般规则是什么？

对于汽车，我可以只做类似 new Car("Porsche","991","3.8") 之类的事情，或者我可以有一个整体抽象的 Car 超类，其中包含像“Porsche”这样的抽象子类制造商，然后可能每个模型都有一个类保时捷？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T23:19:04.240

如果您有一些由所有汽车共享的属性（或作用于对象的方法），然后是每个品牌/模型的唯一属性（或方法），那么您会想要使用继承。否则，只是不同的实例是可以的。

假设您想要所有汽车的这些属性：

*   制作
*   模型
*   年
*   门数

在这种情况下，您不会想要创建类层次结构，因为它不会给您带来任何好处。

相反，如果您有两种“类型”的汽车：普通汽车和赛车，并且只有赛车可以启用一氧化二氮（可能是一种这样做的方法），那么您需要一个 Car 类，继承 RegularCar 和 RaceCar从中。

如果您只是害怕必须始终将相同的参数传递给您的构造函数，您可以创建代表您调用构造函数的静态方法。这被称为[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。

PS：我的例子真的只是从我的脑海中浮现出来。但我希望你明白我想说什么:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:33:28.407

创建子类是关于[管理复杂性](http://talkingaboutsoftwaredesign.wordpress.com/#Managing%20Complexity)并将您的问题拆分为更小、更简单的不同且不重叠的案例。如果您必须为所有汽车解决一些问题，并且您认为，这个问题对保时捷来说“特别”，因为他们有一个普通汽车没有的额外备用引擎，您可以创建类似的东西

```
PorscheCar : Car
{
    Engine engine;
    Engine backupEngine;
}
NonPorscheCar : Car
{
    Engine singleEngine;
} 
```

因此，在您决定创建一个可以解决问题的类之后，如果您在该问题中检测到多个案例，您可以并决定独立解决，您可以为每个案例创建一个子类。您总是可以在不使用子类的情况下解决所有问题。问题在于，如果在应该创建子类时不创建子类，我将很难正确管理和组织代码。

您必须小心选择每个对象或类解决的每个问题。如果您希望您的 Porsche 像***Porsche****和没有**的普通汽车一样打印，这并不意味着 Porsche “行为”不同，您需要创建一个特定的子类。实际表现不同的是您打印 Porsche 的方式，因此您应该创建如下内容：

```
Car
{
    Brand brand;
}
CarPrinter
{
    Car carToPrint;
    static CreatePrinter(Car car)
    {
        return car.Brand() == PorscheBrand() ? new PorscheCarPrinter(car) : new DefaultCarPrinter(car);
    }
}
PorscheCarPrinter
{
    Print();
}
DefaultCarPrinter
{
    Print();
} 
```

所以分为两种情况的问题是打印汽车，而不是建模汽车本身。

以更抽象的方式，您应该创建一个类来对您领域的每个概念进行建模。当您检测到由该域的特定概念建模和解决的责任很复杂，并且您希望将其拆分为更小、不同且不重叠的案例时，您应该为每个较小的问题创建一个子类。

在您的特定情况下，我不知道您的全部问题，但是您不太可能需要为每个品牌的汽车创建子类，因为它们通常是一个单一的概念，只需解决一个案例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T23:18:42.570

`Car`单类方法的问题在于，对于所有不同类型的s ，您都被相同的实例变量和方法所困扰。

例如，汽车人可能拥有`transform()`大多数其他汽车所没有的方法。

我的意思是，理论上你可以`transform()`为所有 s 定义一个方法，`Car`并且让不支持它的汽车抛出异常。但这是一个比使用继承更混乱的设计。

继承还可以让你做一些花哨的事情，比如多态性。例如，每辆车可能都有一个`parallelPark()`方法。但更高档的汽车可能具有与所有其他汽车不同的自动平行停车机制。在这种情况下，您只需覆盖该`parallelPark()`方法，Java 就会选择正确的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T23:20:46.237

我想说这取决于有多少逻辑取决于制造商和型号等属性。如果没有，那么这样做是有意义的`new Car("Porsche","991","3.8")`，因为制造商和型号只是属性。但是，如果制造商和模型定义了一组其他属性或逻辑，那么类可能是有意义的。这样，您不必`new Car("Porsche","991","3.8", gearingRatios, topSpeed, price, etc)`每次想要保时捷 991 时都通过，您只需定义一个`Porsche991`定义所有这些属性的类。

或者，更多地扩展它的逻辑部分，如果`Porsche`和`Volkswagen`汽车在方法中会有非常不同的逻辑`Accelerate()`，那么你可以使用继承，而不是`Accelerate()`使用不可扩展的开关/案例方法。或者如果`Porsche`s 需要一个`Race()`方法，而`Volkswagen`s 不需要，等等。

如果`Car`不知道您打算如何使用`Car`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T23:19:20.870

对于像汽车这样的超类，更合适的子类是双门轿车、轿车和敞篷车。汽车型号应该是一个参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T23:22:23.913

看看[类型对象模式 (pdf)](http://www.cs.ox.ac.uk/jeremy.gibbons/dpa/typeobject.pdf)。

# magento - 获取 Magento 中可下载产品的示例 URL

> ID：11370810
> 
> 赞同：0
> 
> 时间：2012-07-06T23:15:33.260
> 
> 标签：magento

我正在尝试在产品页面上的交叉销售块中获取可下载产品的示例文件 url。

我的 crosssell.phtml 的内容

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>

    <?php if($_crossSellProducts = $_product->getCrossSellProducts()): ?>

    <div id="music-crosssell-modal" style="display:none;">
        <div class="modal-inner">
        <span id="music-crosssell-header">Featured Music</span>

    <ul id="music-crosssell-products-list">
    <?php foreach ($_crossSellProducts as $_item): ?>

        <?php $_item = Mage::getModel('catalog/product')->load($_item->getId()); ?>

        <li class="music-item paused" id="<?php echo urlencode($this->htmlEscape($_item->getSongTitle())) ?>">
                <span class="player">Loading...</span>
                <span class="track-title"><?php echo $this->htmlEscape($_item->getSongTitle()) ?> by </span> <span class="music-track-artist"><?php echo $this->htmlEscape($_item->getMusicianName()) ?></span>
                <button type="button" title="<?php echo $this->__('Buy Now') ?>" class="button btn-primary" onclick="setLocation('<?php echo $this->getAddToCartUrl($_item) ?>')">
                    <?php echo $this->__('Buy Now') ?>
                </button>
        </li>

        <?php
        $_myprodsamples = Mage::getModel('downloadable/sample');
        $_mySampleCollection = $_myprodsamples->getCollection()
        ->addProductToFilter($_item->getId());
        ?>

        <?php
        foreach ($_mySampleCollection as $_sample):
            $_samplelink = $this->getUrl('downloadable/download/sample/sample_id/'.$_sample->getId());
        ?>

        <?php echo Mage::getModel('downloadable/sample')->load($_samplelink)->getUrl() ?>

        <script type="text/javascript">
            jwplayer("#<?php echo urlencode($this->htmlEscape($_item->getSongTitle())) ?> .player").setup({
                flashplayer: "/skin/frontend/default/datura/js/jwplayer/player.swf') ?>",
                file: "<?php echo Mage::getModel('downloadable/sample')->load($sampleId)->getUrl() ?>",
                height: 25,
                width: 25,
                controlbar: "bottom"
            });
        </script>

        <?php
            endforeach;
        ?>

        <script type="text/javascript">
            jwplayer("#<?php echo urlencode($this->htmlEscape($_item->getSongTitle())) ?>").setup({
            flashplayer: "/skin/frontend/default/datura/js/jwplayer/player.swf') ?>",
            file: "",
            height: 25,
            width: 300,
            controlbar: "bottom"
            });
        </script>

    <?php endforeach; ?>
    </ul>
</div>
    <span id="music-crosssell-close-btn" class="close-modal-btn">X</span>
</div>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:24:37.833

你可以试试这个：

```
$_myprodsamples = Mage::getModel('downloadable/link');
$_mySampleCollection = $_myprodsamples->getCollection()
                   ->addProductToFilter($_product->getId());
foreach ($_mySampleCollection as $_sample){
   echo $_samplelink = $this->getUrl('downloadable/download/linkSample/link_id/'.$_sample ->getId());
} 
```

我希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:26:04.930

您还可以使用获取示例数据数组

```
 <?php $sampleColl = Mage_Downloadable_Block_Catalog_Product_Samples::getSamples($_product); 
    foreach ($sampleColl as $_sample){  
        echo "<pre>";
        print_r($_sample);      
    }
  ?> 
```

我希望这能帮到您

# php - 想要在有文件下载时显示下载链接

> ID：11370812
> 
> 赞同：2
> 
> 时间：2012-07-06T23:15:49.997
> 
> 标签：php, wordpress, conditional, attachment

我的问题是，就像标题说的那样，我只想在文件可用时才显示文件的下载链接......

我不知道错误在哪里：

```
<?php $doc = get_post_meta(get_the_ID(), 'wp_custom_attachment', true); ?>

<div id="custom_pdf">  

 <a href="<?php echo $doc['url']; ?> "> 

 Download PDF Here  

 </a> 

 </div><!-- #custom_pdf --> 
```

这是正常的代码..它的工作正常，但在这里它无条件地显示......并且有条件的代码是：

```
<?php $doc = get_post_meta(get_the_ID(), 'wp_custom_attachment', true); ?>

<? if(strlen(trim(<?php $doc['url'] ?>)) > 0) { 
<div id="custom_pdf">  

 <a href="<?php echo $doc['url']; ?> "> 

 Download PDF Here  

 </a> 

 </div><!-- #custom_pdf --> 

} ; ?> // end if 
```

这里是错误的地方，但我不知道在哪里。

有人可以帮帮我吗。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:23:59.163

您的 PHP 标记未正确放置在 HTML 代码中：

```
<?php $doc = get_post_meta(get_the_ID(), 'wp_custom_attachment', true);
if(strlen(trim($doc['url'])) > 0) {
?>
<div id="custom_pdf">  
<a href="<?php echo $doc['url']; ?>">Download PDF Here</a> 
</div><!-- #custom_pdf --> 
<?php } // end if  
?> 
```

当你从 HTML 切换到 PHP 时，你需要打开一个 PHP 标签`<?php`，当你从 PHP 切换到 HTML 时，你需要关闭 PHP 标签`?>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:22:40.903

`<?php`当您已经在 php 中时，您正在打开一个标签

```
<?php 
  $doc = get_post_meta(get_the_ID(), 'wp_custom_attachment', true);
  if(strlen(trim($doc['url'])) > 0) 
  { 
?>

  <div id="custom_pdf">  
     <a href="<?php echo $doc['url']; ?> ">Download PDF</a> 
  </div><!-- #custom_pdf --> 

<?php 
  } 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T02:14:07.220

您可以尝试使用下载监视器插件。您可以设置显示配置，包括图标。它具有分析和文件交换功能。您还可以选中强制下载选项，以便文件不会尝试加载到新的浏览器窗口中。

[http://wordpress.org/extend/plugins/download-monitor/](http://wordpress.org/extend/plugins/download-monitor/)

# regex - 正则表达式嵌套星号

> ID：11370832
> 
> 赞同：2
> 
> 时间：2012-07-06T23:18:13.710
> 
> 标签：regex

我在我正在处理的旧系统中发现了这个正则表达式。

```
(\s*)* 
```

我很确定末尾的额外“ * ”是多余的，但我想确保在删除它之前没有做任何事情。如果用作参数的字符串有 25 个以上的空格，则在 regex.matches() 方法中使用它会导致性能问题，从而导致整个系统挂起

有人知道该特定语法是否具有特殊功能吗？

Ps：它是一个非常庞大的系统，所以我无法测试所有可能的场景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:21:29.883

这是多余的。您可以只使用多个匹配项来捕获 0 组或更多组空格，这是额外星号指定的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:21:45.757

假设内部`*`是贪婪的，那么，是的，我认为外部是多余的。外部`*`尝试重复子匹配，但子匹配只会有一个实例，因为它是贪婪的。

# tomcat - 无法处理 TLD 文件的 JAR [jar:jndi:/localhost/ttsvr/WEB-INF/lib/activation.jar!/null]

> ID：11370855
> 
> 赞同：3
> 
> 时间：2012-07-06T23:21:06.050
> 
> 标签：tomcat, tooltwist

我正在使用 FIP 将 ToolTwist 应用程序部署到生产服务器，并在启动服务器时在 catalina.out 中收到以下错误。

> 信息：部署 Web 应用程序目录 ttsvr 06/07/2012 3:51:02 PM
> org.apache.catalina.startup.TldConfig tldScanJar
> 警告：无法处理 JAR [jar:jndi:/localhost/ttsvr/WEB-INF/lib/ activation.jar !/ null ]用于 TLD
> 文件.io.File.createTempFile(File.java:1792) at java.io.File.createTempFile(File.java:1828) at sun.net.www.protocol.jar.URLJarFile$1.run(URLJarFile.java:204) 在 java.security.AccessController.doPrivileged(Native Method) ...

这是一个警告而不是错误，应用程序似乎运行良好，但它会在每个 jar 文件上显示完整的堆栈跟踪，并将 3,700 行放入日志文件中。

jar 文件确实存在，并且具有正确的文件权限。我试过删除 jar 文件，检查 server.xml 和 web.xml。该应用程序之前已在其他服务器上运行过。

我正在使用 Tomcat 7.0.12、java 1.7 和 ToolTwist V8。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T00:59:03.350

如果缺少 tomcat/temp 目录，则可能会发生此错误。

我不确定您如何将文件复制到生产服务器，但可能不会创建空目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T13:37:04.753

答案真的很有帮助。愚蠢的错误，但是在tomcat中添加临时目录解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T21:15:55.890

我已经尝试解压缩`jar`日志中报告的文件，解压缩过程向我显示`file`了. 修复解决了所有其他问题。`jar``corrupted``corrupted file`

# excel - 每第n行插入19行的宏？

> ID：11370856
> 
> 赞同：1
> 
> 时间：2012-07-06T23:21:08.050
> 
> 标签：excel, vba

我想每 58 行插入 19 行。这个宏插入一行，我似乎无法让它插入 19。

```
Sub Insert58()
    Dim rng As Range

    Set rng = Range("A3")
    While rng.Value <> ""
        rng.Offset(58).EntireRow.Insert
        Set rng = rng.Offset(59)
    Wend
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:25:43.617

利用`rng.Offset(58).resize(19).EntireRow.Insert`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:44:07.450

杰夫，

试试这个：

```
Sub Insert58_v2()
    Dim rng As Range

    Set rng = Range("A3")
    While rng.Value <> ""
        rng.Offset(58).Resize(19).EntireRow.Insert
        Set rng = rng.Offset(77)
    Wend
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T09:54:02.847

Gimp 的回答当然是可编辑的：

`Set rng = Range("A3")`是起始单元格

`rng.Offset(58)`是'每行有多少'

`Resize(19)`是要插入多少行

`Set rng = rng.Offset(77)`应该是两行+插入的总和

# bash - 将Shell中文件名或目录中每个单词的首字母大写

> ID：11370860
> 
> 赞同：13
> 
> 时间：2012-07-06T23:21:35.753
> 
> 标签：bash, shell, unix

我正在尝试编写一个shell命令，我可以在其中指定一个目录，然后里面的每个文件和目录都将每个单词的第一个字母大写。所以

`/doCumenTS/tesT.txt`

应该改为

`/DoCumenTS/TesT.txt`

我想它应该像这样开始

```
for i in directory do
tr something_goes_here
done 
```

我不知道的问题是如何只做第一个字母。我制作了一个将整个文件名大写的脚本，但我不知道如何只获取每个单词的第一个字母。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T23:36:10.007

### 使用 GNU Sed

使用 GNU sed 可以很容易地做到这一点。例如：

```
$ echo '/doCumenTS/tesT.txt' | sed 's!/.!\U&!g'
/DoCumenTS/TesT.txt 
```

### 限制

请注意，\U 转义是 GNU sed 扩展。手册说：

> 最后，作为 GNU 'sed' 扩展，您可以包含一个由反斜杠和字母“L”、“l”、“U”、“u”或“E”之一组成的特殊序列。

```
`\U'
     Turn the replacement to uppercase until a `\L' or `\E' is found 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T07:57:31.420

Bash 4.0+ 有一个参数替换“小写到大写”。要仅更改第一个字符，请像这样使用它：

```
list=( 'aaa/bbb' 'aAAA' 'aaa/bbb/ccc' 'aaa bbb/ccc' )

IFS='/'
for item in "${list[@]}"; do
  split=( $item )
  echo "'${split[*]^}'"
done 
```

结果：

```
'Aaa/Bbb'
'AAAA'
'Aaa/Bbb/Ccc'
'Aaa bbb/Ccc' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-29T12:17:53.507

```
Source="ONE TWO THREE FOUR"
Target="One Two Three Four" 
```

解决方案如下：

```
Target=`echo $Source | tr [A-Z] [a-z] | sed -e 's/^./\U&/g; s/ ./\U&/g'`
echo $Target

One Two Three Four 
```

取自这里：[http ://souravgulati.webs.com/apps/forums/topics/show/8584862-shell-script-capitalize-first-letter-of-every-word-of-a-line-](http://souravgulati.webs.com/apps/forums/topics/show/8584862-shell-script-capitalize-first-letter-of-every-word-of-a-line-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-06T17:45:25.007

前：

```
$ find . -mindepth 1 -depth -print
./file1
./bar/file3
./bar
./foo/file2
./foo/baz/file4
./foo/baz
./foo 
```

修改：

```
find . -mindepth 1 -depth -print0 | 
while IFS= read -r -d '' filename; do 
    b=$(basename "$filename")
    mv "$filename" "$(dirname "$filename")/${b^}"
done 
```

后：

```
$ find . -mindepth 1 -depth -print
./Foo/Baz/File4
./Foo/Baz
./Foo/File2
./Foo
./Bar/File3
./Bar
./File1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-06T08:07:13.473

[使用bash](/questions/tagged/bash "显示标记为“bash”的问题") v4中的功能避免循环：

```
input='/doCumenTS/tesT.txt'
IFS='/'
dirs=( $input )           # split on '/'
output=( "${dirs[*]^}" )  # capitalize
IFS=$' \t\n'              # reset IFS 
```

您可以将其嵌入到 shell 函数中：

```
capitalize_subdirs()
{
  local IFS='/'
  dirs=( $1 )
  echo "${dirs[*]^}"
} 
```

用法：

```
output=$( capitalize_subdirs '/doCumenTS/tesT.txt' ) 
```

这甚至适用于包含空格、制表符和新行的路径名！

```
$ capitalize_subdirs '/doCumenTS/tesT.txt'
/DoCumenTS/TesT.txt

$ capitalize_subdirs $'/d\noCu\tme nTS/tesT.txt'
/D
oCu     me nTS/TesT.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-01T07:50:06.733

使用重命名，您可以在当前目录中执行此操作：

```
rename 's/./\U$&/' *; rename 's/ ./\U$&/g' *; 
```

使用该`-n`选项首先显示更改而不执行更改。

# java - 正则表达式无法按全名预期工作

> ID：11370862
> 
> 赞同：0
> 
> 时间：2012-07-06T23:21:43.607
> 
> 标签：java, regex

我有一个文本框，我将输入作为全名。

当用户输入输入时`My Name`，我没有收到任何错误。但是，当用户输入输入时`My Name Is`，我得到错误。

我拥有的正则表达式是

```
([a-zA-Z]+|[a-zA-Z]+\\s[a-zA-Z]+) 
```

真正想要的是，文本应该有

```
only (a-z OR A-Z) AND white space... 
```

演示输入是

1.  我的名字是 XYZ PQR STU
2.  我的名字是 XYZ
3.  XYZ PQR STU

如何使用正则表达式来完成？

## 更新 1

我在用

```
 Pattern p = Pattern.compile("[a-zA-Z\\s]");
    Matcher m = p.matcher("DummyName");
    boolean matchFound = m.matches(); 
```

我仍然`matchFound`得到`FALSE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:23:42.493

`\s`用于空格。如果您想在字符类以及大写和小写字母中允许空格，您可以使用`[a-zA-Z\s]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:41:57.747

试试这个`^[a-zA-Z]+(?:\s+[a-zA-Z]+)*$`。你可以根据自己的口味稍微调整一下。这`?:`是为了确保该组不捕获 - 如果您只是测试完整的字符串，则不需要这样做。`^`并将`$`匹配输入文本的开头和结尾 - 不是直接需要的，`matches()`但它是一个很好的保障。

# c# - HttpWebRequest Async Abort() 后如何释放连接

> ID：11370864
> 
> 赞同：0
> 
> 时间：2012-07-06T23:22:03.430
> 
> 标签：c#, asynchronous, httpwebrequest

以下是我对使用 HttpWebRequest 异步发出请求的理解：

发出异步 Web 请求的基本结构是调用 BeginGetResponse() 并同时启动一个计时器。如果响应没有超时，BeginGetResponse() 将调用一个回调方法，该方法将调用 EndGetResponse() 并读取响应。如果响应超时，则调用定时器的不同回调方法并调用 WebRequest.Abort()。

这种结构取决于 Abort() 和 EndGetResponse() 是互斥的。在 EndGetResponse() 之后调用 Abort() 基本上没有效果，在 Abort() 之后调用 EndGetResponse() 会导致 EndGetResponse() 抛出异常，然后可以捕获并处理该异常，但是您想要处理超时。

我的问题是，当我需要每秒向几项服务发出数百个请求时，一项服务开始变得非常非常潜在。Timeout 回调可能会在 500 毫秒后被调用并调用 Abort() 并且我的程序会愉快地继续。但由于服务在 10 秒后仍未返回，因此 BeginGetResponse() 启动的第一个线程仍在等待，网络连接资源无法供任何未来请求使用。

有没有办法让超时释放应该超时的线程的资源？如果没有，是否可以设置类似于 Web.config 的值，以使在与应用程序不同的网络层上的请求超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:27:53.217

`free up the resources`- 这对我来说意味着你的线程应该有一个析构函数/终结器，它释放它拥有的非托管资源（[究竟什么是非托管资源？](https://stackoverflow.com/q/3433197/1026459)）。

# php - 跨保活连接保持身份验证

> ID：11370868
> 
> 赞同：0
> 
> 时间：2012-07-06T23:22:58.213
> 
> 标签：php, apache, http, authentication, keep-alive

目前在我的网站上，当用户登录时，对于每个网页请求，您都必须访问数据库并检查他们的 cookie 以确认他们是谁，跨保持活动连接这样做是一种浪费，因为该连接已经过身份验证，如何我可以使用 PHP 和/或 apache 在保持活动连接中保持身份验证吗？这根本不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:35:26.460

只需检查 cookie 以进入连接到数据库的站点，

如果检查正常：您创建一个具有唯一加密示例的会话 cookie

```
md5("NAME"."PASS".Time())) 
```

每个会话您只使用一次 SQL ;)

# facebook - Google Plus 相当于 Facebook Like Box

> ID：11370869
> 
> 赞同：5
> 
> 时间：2012-07-06T23:23:15.280
> 
> 标签：facebook, google-plus

我刚刚测试了[facebook like box](http://developers.facebook.com/docs/reference/plugins/like-box/)，想知道是否有类似的 google plus 功能。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T17:00:47.067

您正在寻找 Google+ 信息页徽章。有关 Google 的文档，请访问： [Google+ 徽章](https://developers.google.com/+/plugins/badge/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:34:39.043

Google +1 按钮！

[http://www.google.com/+1/button/](http://www.google.com/+1/button/)

[http://www.google.com/intl/en/webmasters/+1/button/index.html?utm_source=b2cp1&utm_medium=link&utm_campaign=p1](http://www.google.com/intl/en/webmasters/+1/button/index.html?utm_source=b2cp1&utm_medium=link&utm_campaign=p1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T15:01:03.660

这里的这个工具很棒：[http](http://widgetsplus.com/) ://widgetsplus.com/ 它使您可以创建一个小部件，包括您的新闻源、关注按钮、...

# javascript - 新添加的 dom 元素未被选中

> ID：11370872
> 
> 赞同：0
> 
> 时间：2012-07-06T23:23:34.483
> 
> 标签：javascript, jquery

我有一个能够通过 ajax 加载更多内容的图像列表。默认情况下，列表中会加载图像。当用户滚动时，另外 4 个项目被添加到列表中。该列表每 15 秒通过 ajax 刷新一次，仅替换列表中的前 7 个项目。问题是当 4 个新项目添加到列表中时，选择器似乎忽略了这些项目，因此它不会从 0 索引中进行选择。

我知道这听起来令人困惑，所以我将尝试通过一个简单的示例进行演示。

**前任**

```
$(function () {
    // Update ChannelStats
    setTimeout(function () {
        var refresh = setInterval(UpdateChannels, 15000);
        UpdateChannels();
    }, 15000);

    function UpdateChannels() {
        $.ajax({
            type: "POST",
            url: "ajax/ImageList.aspx/UpdateImages",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                // Newest
                var $newestResults = $('#newest .pcVideomaincontainer:lt(7)');
                $newestResults.fadeOut('slow'), function () {
                    remove()
                };
                $.each($newestResults, function (index, value) {
                    $(this).delay(index * 250).animate({
                        opacity: 0
                    }, 250,

                    function () {
                        $(this).remove();
                        $('#pcContentHolder_newest').append(data.d.Newest.HtmlChannelSegments[index]);
                    });
                });
            });
        }
    }); 
```

**[注意数字的顺序-这是加载图像的顺序]**

在初始页面加载时，第一个图像被加载

　**1.**在初始页面加载时加载以下图像

> 1 2 3 4 5 6 7

　**2.**当用户滚动显示剩余的图像时

> 1 2 3 4 5 6 7 8 9 10 11

　**3.**更新脚本第一次运行

> 8 9 10 11 1 2 3 4 5 6 7

　**4.**更新脚本第二次运行

> 4 5 6 7 1 2 3 4 5 6 7

　**5.**每次更新脚本运行的顺序是

> 4 5 6 7 1 2 3 4 5 6 7

据我所知，这 4 个新添加的元素未包含在 `$('#newest .pcVideomaincontainer:lt(7)')`选择中。我不确定在这种情况下如何使用“live”，或者是否有其他技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:30:15.080

我从追加更改为前置，现在可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:04:13.300

我不确定这是否是您的主要问题，但是您的这部分代码`$(this).`在 the 之前缺少 a`remove()`并且还缺少一个结束括号。你有这个：

```
 var $newestResults = $('#newest .pcVideomaincontainer:lt(7)');
            $newestResults.fadeOut('slow'), function () {
                remove()
            }; 
```

应该是这样的：

```
 var $newestResults = $('#newest .pcVideomaincontainer:lt(7)');
            $newestResults.fadeOut('slow'), function () {
                $(this).remove()
            }); 
```

修复此问题后，$newestResults DOM 对象将全部被删除，因此我不确定您为什么然后尝试使用以下代码行再次对它们进行操作。

# python - /usr/lib/python 和 /usr/lib64/python 有什么区别？

> ID：11370877
> 
> 赞同：9
> 
> 时间：2012-07-06T23:24:05.480
> 
> 标签：python

我正在使用ubuntu。

我发现安装的许多 Python 库都包含在`/usr/lib/python`和`/usr/lib64/python`.

当我`print`是一个模块对象时，模块路径显示该模块位于`/usr/lib/python`.

那为什么我们需要`/usr/lib64/python`目录呢？这两个目录有什么区别？

**顺便提一句**

位于两个目录中的一些包管理脚本`egg-info`实际上是指向`/usr/share`.

大多数 Python 模块只是链接，但`so`文件不是。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T23:43:26.977

Debian（可能是它的衍生产品，最著名的是 ubuntu）对这两种架构都使用 /usr/lib。出于兼容性原因，/usr/lib64 作为 /usr/lib 的符号链接提供。一些较新的应用程序可能会在 /usr/lib64 中查找库，而一些旧代码可能正在使用 /usr/lib。其他发行版可以提供多架构支持，在同一台机器上安装 32 位和 64 位库，然后相应地放置在 /usr/lib 和 /usr/lib64 中。Arch Linux 就是一个例子，如此处[所述](https://wiki.archlinux.org/index.php/Multilib)。

一些 Python 库无论如何都是独立于平台的（.py 代码），因此为两种架构创建一个包以最大程度地减少维护工作是有意义的。然后，此软件包将自行安装在 lib 和 lib64 中，或者正如您已经指出的那样，安装在一个从 lib 和 lib64 符号链接到的单个目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T23:25:08.373

库的 64 位版本？

你运行的是什么版本的 Python？如果您运行的是 32 位版本，那么您可能不需要这些文件。

# c++ - 派生对象的对象数组

> ID：11370890
> 
> 赞同：0
> 
> 时间：2012-07-06T23:25:31.220
> 
> 标签：c++, inheritance

我有一个对象数组，它们都派生自 BaseStudent 类。

```
BaseStudent**studentlist = new BaseStudent*[atoi(listSize.c_str())]; 
```

该数组由派生的数学、英语或历史对象填充。我现在正在尝试从数组中的每个对象打印出特定数据并将其输出到文件中。

```
for (int j=0; j<atoi(listSize.c_str()); j++){
    if(studentlist[j]->getMT() == ENGLISH){
        output << studentlist[j]->GetFN()<<" "<<studentlist[j]->GetLN();
        output << right << setw(42) << studentlist[j]->GetFinal(); // this is an English public function but I can't call this.
    }
} 
```

我需要能够从对象数组中访问派生类的私有成员数据。

这是我的标题。如您所见，我对每个受保护的成员数据都有一个 setter 和 getter。

```
#include <iostream>
#include <string>

using namespace std;

#ifndef BASESTUDENT_H
#define BASESTUDENT_H

enum MajorType {ENGLISH, HISTORY, MATH};
// *********************************************************************
// Base class. All other classes (Enlish, History, Math) inherit from 
// this class.
// *********************************************************************
class BaseStudent
{
public: 
    BaseStudent();
    BaseStudent(string fn, string ln, string m);
    string GetFN(){return firstName;}
    string GetLN(){return lastName;}
    MajorType getMT(){return course;}
    void SetFN(string fn){firstName = fn;}
    void SetLN(string ln){lastName = ln;}
    void SetMT(string m);

protected:
    string firstName;
    string lastName;
    MajorType course;

}; // End Base class

// *********************************************************************
// Enlish class.
// *********************************************************************

class English: public BaseStudent
{
public:
    English(string fn, string ln, string m, double a, double p, double mt, double f);
    double FinalAverage();
    double GetAttendance(){return attendance;}
    double GetProject(){return project;}
    double GetMidterm(){return midterm;}
    double GetFinal(){return final;}
    double GetFinalAverage(){return finalAverage;}
    void SetAttendance(double a){attendance = a;}
    void SetProject(double p){project = p;}
    void SetMidterm(double m){midterm = m;}
    void SetFinal(double f){final = f;}
    void SetFinalAverage(double fa){finalAverage = fa;}

protected: 
    double attendance;
    double project;
    double midterm;
    double final;
    double finalAverage;

}; // End English class

// *********************************************************************
// History class.
// *********************************************************************

class History: public BaseStudent 
{
public:
    History(string fn, string ln, string m, double t, double mt, double f);
    double FinalAverage();
    double GetTermPaper(){return termPaper;}
    double GetMidterm(){return midterm;}
    double GetFinalExam(){return finalExam;}
    double GetFinalAverage(){return finalAverage;}
    double FinalExam(){return finalExam;}
    void SetTermPaper(double t){termPaper = t;}
    void SetMidterm(double m){midterm = m;}
    void SetFinalExam(double f){finalExam = f;} 
    void SetFinalAverage(double fa){finalAverage = fa;}

protected:
    double termPaper;
    double midterm;
    double finalExam;
    double finalAverage;

}; // End History class.

// *********************************************************************
// Math class.
// *********************************************************************

class Math: public BaseStudent
{
public:
    Math(string fn, string ln, string m, double q1, double q2, double q3,
        double q4, double q, double t1, double t2, double f);
    double FinalAverage();
    double GetQuiz1(){return quiz1;}
    double GetQuiz2(){return quiz2;}
    double GetQuiz3(){return quiz3;}
    double GetQuiz4(){return quiz4;}
    double GetQuiz5(){return quiz5;}
    double GetFinalExam(){return finalExam;}
    double GetTest1(){return test1;}
    double GetTest2(){return test2;}
    double GetQuizAverage(){return quizAverage;}
    double GetFinalAverage(){return finalAverage;}
    void SetQuiz1(double q){quiz1 = q;}
    void SetQuiz2(double q){quiz2 = q;}
    void SetQuiz3(double q){quiz3 = q;}
    void SetQuiz4(double q){quiz4 = q;}
    void SetQuiz5(double q){quiz5 = q;}
    void SetTest1(double q){test1 = q;}
    void SetTest2(double q){test2 = q;}
    void SetFinalExam(double q){finalExam = q;}
    void SetQuizAverage();
    void SetFinalAverage(double fa){finalAverage = fa;}

protected:
    double quiz1;
    double quiz2;
    double quiz3;
    double quiz4;
    double quiz5;
    double test1;
    double test2;
    double finalExam;
    double quizAverage;
    double finalAverage;

}; // End Math class.

#endif 
```

我需要某种虚拟功能的实现吗？

到目前为止，这是我的司机：

```
#include<iostream>
#include<fstream>
#include<string>
#include<iomanip>
#include"basestudent.h"

using namespace std;

int main(void)
{
    string listSize;

    string fileIn = "";
    string fileOut = "";
    string firstname ="";
    string lastname ="";
    string major = "";
    string eolDummy;
    int mQuiz1, mQuiz2, mQuiz3, mQuiz4, mQuiz5, mTest1, mTest2, mFinalExam;
    int eAttendance, eProject, eMidterm, eFinalExam;
    int hTermPaper, hMidterm, hFinalExam;

    ifstream input;
    ofstream output;
    do{
        input.clear();

        cout << "Please enter the filename: ";
        cin >> fileIn;
        cout << "Please enter an output name: ";
        cin >> fileOut;

        input.open(fileIn);
        if (!input)
            cout << "Invalid file, please enter again." << endl;
    } while(!input);

    input >> listSize;
    BaseStudent**studentlist = new BaseStudent*[atoi(listSize.c_str())];
    int i = 0;
    while (!input.eof())
    {
        getline(input, lastname, ',');
        getline(input, firstname, '\n');

        input >> major;

        if (major == "Math") {
            input >>mQuiz1>>mQuiz2>>mQuiz3>>mQuiz4>>mQuiz5>>mTest1>>mTest2
                  >>mFinalExam>>eolDummy;
            // Math Constructor call
            // Array += object
            studentlist[i] = new Math(firstname,lastname,major,mQuiz1,mQuiz2,mQuiz3,mQuiz4,mQuiz5,
                                      mTest1,mTest2,mFinalExam);
        }
        else if (major == "History"){
            input >>hTermPaper>>hMidterm>>hFinalExam>>eolDummy;
            // History Constructor call
            // Array += object
            studentlist[i] = new History(firstname,lastname,major,hTermPaper,hMidterm,hFinalExam);
        }
        else if(major == "English"){
            input >>eAttendance>>eProject>>eMidterm>>eFinalExam>>eolDummy;
            // English Constructor call
            // Array += object
            studentlist[i] = new English(firstname,lastname,major,eAttendance,eProject,eMidterm,eFinalExam);
        }
        i++;
    }

    output.open(fileOut);
    output << "Student Grade Summary" << endl;
    output << "---------------------" << endl << endl;
    output << "ENGLISH CLASS "<<endl<<endl;
    output << "Student                                   Final   Final   Letter"<<endl;
    output << "Name                                      Exam    Avg     Grade"<<endl;
    output << "----------------------------------------------------------------"<<endl;
    for (int j=0; j<atoi(listSize.c_str()); j++){
        if(studentlist[j]->getMT() == ENGLISH){
            output << studentlist[j]->GetFN()<<" "<<studentlist[j]->GetLN();

            output << right << setw(42) << studentlist[j]->

    input.close();
    output.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:48:28.253

当您从数组中获取指针时，您需要将其`dynamic_cast`转换为适当的类

例如

```
BaseStudent *p = somearray[0];

if ( English* pEnglish = dynamic_cast<English*>(p) )
{
   // call the methods
   cout << p->FinalAverage();
   ...
}
else if ( History* pHistory = dynamic_cast<History*>(p) )
{
   // call the methods
}
else if ( Math* pMath = dynamic_cast<Math*>(p) )
{
   // call the methods
} 
```

顺便说一句，使用向量而不是原始数组，它更方便、更安全。

```
std::vector<BaseStudent*> yourvector; 
```

# c++ - eclipse cdt 朱诺 C++

> ID：11370892
> 
> 赞同：0
> 
> 时间：2012-07-06T23:26:03.530
> 
> 标签：c++, eclipse

我在使用 Eclipse Juno C++ 时遇到问题。

如果我选择“保存时构建”，它会一遍又一遍地构建，就好像文件已更改一样。

这是您也遇到的错误，还是只是我的配置不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:13:22.703

这是您的配置，我没有这种行为，至少在 Mac 上使用以下 Eclipse：

面向 C/C++ 开发人员的 Eclipse IDE 版本：Juno Release Build id：20120614-1722

# php - PHP Preg_replace() 函数

> ID：11370898
> 
> 赞同：0
> 
> 时间：2012-07-06T23:27:18.200
> 
> 标签：php

如何使用 preg_replace 函数进行替换

/c83403.403/

示例： [https ://startimage.ca/c83403.403/ahmedmynewpix.jpg](https://startimage.ca/c83403.403/ahmedmynewpix.jpg)

另一个例子： [https ://startimage.ca/c2.3403.403/ahmedmynewpix2.jpg](https://startimage.ca/c2.3403.403/ahmedmynewpix2.jpg)

它总是以 /c..../ 开头，我想用“”替换它

我正在尝试以下但不工作 $str = '/c..../'; $str = preg_replace('/+[0-9]', '', $str);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:32:41.090

你的意思是这样的吗？

```
$str = 'https://startimage.ca/c83403.403/ahmedmynewpix.jpg';
$str = preg_replace('|/c[0-9.]+|', '', $str);
echo $str; # https://startimage.ca/ahmedmynewpix.jpg' 
```

... 或者

```
$str = preg_replace('|/c[0-9.]+|', '/c', $str);
echo $str; # https://startimage.ca/c/ahmedmynewpix.jpg' 
```

关键是您可以将任何以数字或点符号 ( ) 开头`/c`并包含数字或点符号 ( `.`) 的内容替换为空格或`/c`字符串，具体取决于您的需要。)

# javascript - 用于查看消息的 ThunderBird 事件

> ID：11370903
> 
> 赞同：8
> 
> 时间：2012-07-06T23:27:56.250
> 
> 标签：javascript, thunderbird, thunderbird-addon

我正在尝试在消息显示在 Thunderbird 的主窗口之前对其进行修改。我似乎找不到 1) 打开/查看新消息时将触发的事件 2) 修改消息显示内容的方法。

我相信我需要`chrome://messenger/content/messenger.xul`覆盖，并且可以使用如下监听器：

```
window.addEventListener( "SOME MAGIC HERE", modify_message_handler, true ); 
```

但我不确定那个事件是什么，以及我将获得什么对象（消息头？）以及我可以多么容易地修改显示的内容。

所以问题是：

*   我有正确的覆盖吗？
*   这可以通过事件来完成吗？如果没有，怎么办？
*   如果是这样，需要什么事件以及它传递什么对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T19:19:10.747

如果您想要的是类似于在每条消息上运行的 Greasemonkey 脚本，您应该：

1.  等待`load`事件的发生`window`。
2.  使用 检索消息窗格对象`document.getElementById("messagepane")`。
3.  将您的处理程序绑定到消息窗格的`DOMContentLoaded`事件或类似事件，例如`load`取决于您希望何时调用处理程序。`DOMContentLoaded`会给你一个 Greasemonkey 风格的行为。
4.  在事件处理程序中，`event.originalTarget`是与显示的消息对应的文档。您可以在此处应用所有常用的 DOM 修改技术。

有关更多详细信息，请参阅文档中的[此示例](http://developer.mozilla.org/en/Code_snippets/On_page_load)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T18:44:07.570

目前尚不清楚您尝试查看的位置，但我会提供一个建议：[这个过时的文档](https://developer.mozilla.org/en/Thunderbird/Mail_event_system)表明有一个 OnItemPropertyChanged 事件，您可以利用该事件来侦听“open”属性，该属性似乎[在来源](http://lxr.mozilla.org/seamonkey/source/mailnews/base/src/nsMsgFolderDataSource.cpp#920)。

但是，这是否仅适用于文件夹或同时适用于文件夹和消息尚不清楚。并且您必须更深入地了解传入的项目对象的属性是否允许您进行更改。

希望能有所启发；如果你已经经历过这些，请告诉我们你学到了什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T23:05:32.113

*我将主要解决**`thunderbird-extension`**您问题中的标签。*

Thunderbird Extension 作者[**Paolo “Kaosmos”**](https://nic-nac-project.org/~kaosmos/index-en.html)有许多现成的工具供您考虑。

* * *

[**标头工具精简版：**](https://nic-nac-project.org/~kaosmos/headertoolslite-en.html)

> 编辑功能（仅更改标题或**消息的整个源代码**）可从菜单“消息”->“HeaderToolsLite”或消息面板中的上下文菜单访问。
> 
> 应谨慎使用整个源代码的编辑功能，因为错误的更改会导致文件夹中所有消息的显示出现问题。

* * *

[**附加额外工具：**](https://nic-nac-project.org/~kaosmos/index-en.html)

```
attach easily messages selected in the main window<br />
attach attachments from other messages<br />
attach files from 5 favourite directories<br />
attach files and directories in zipped format<br /> 
```

* * *

[**DSN 选项 GUI：**](https://nic-nac-project.org/~kaosmos/index-en.html)

> ***一个扩展，它添加了一个图形界面来处理关于“传递状态通知***”（**DSN**）的全局和每个帐户的首选项。

* * *

***有用的链接：***
**Notable Reference 1：** [**修改消息的常见用例**](https://developer.mozilla.org/en/Extensions/Thunderbird/HowTos#section_5)
**Notable Reference 2：** [**Thunderbird API for Message Window and Message Header**](https://developer.mozilla.org/en/Extensions/Thunderbird/An_overview_of_the_Thunderbird_interface#Message_window)
**Notable Reference 3：** [**构建 Thunderbird 扩展**](https://developer.mozilla.org/en/Extensions/Thunderbird/Building_a_Thunderbird_extension)
**Notable Reference 4：** [**在扩展中使用 XUL Thunderbird UI**](https://developer.mozilla.org/en/Extensions/Thunderbird/Building_a_Thunderbird_extension_5%3a_XUL)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T23:52:30.080

Generic Human 通过急需的链接让我走上了正确的道路。首先是添加一个`load`事件。我将以我非常原始的理解粘贴一些代码：

```
window.addEventListener("load", function load(event) {
        window.removeEventListener("load", load, false);
        myExtension.init();
}, false); 
```

当此脚本的覆盖加载时，运行`init`.

```
var myExtension = {
  init: function() {
        var appcontent = document.getElementById("appcontent"); // browser app content
        if (appcontent) {
                appcontent.addEventListener("OMContentLoaded", myExtension.onPageLoad, true);
        }
        var messagepane = document.getElementById("messagepane"); // tunderbird message pane
        if(messagepane) {
                messagepane.addEventListener("load", function(event) { myExtension.onPageLoad(event); }, true);
        }
  }, 
```

在我添加了一个监听器，它在每次显示消息时`init`调用。`onPageLoad`我实际上并没有使用`appcontent`案例 afaik。

```
 onPageLoad: function(aEvent) {
                var doc = aEvent.originalTarget;  // doc is document that triggered "onload" event
                // we can now morph the loaded page
                // doc.location is a 'Location' object
                var newDat = mutateBody(doc.body.innerHTML);
                doc.body.innerHTML = newDat;
                aEvent.originalTarget.defaultView.addEventListener("unload", function(event) { myExtension.onPageUnload(event); }, true);
  },

  onPageUnload: function(aEvent) {
    // No action necessary yet
  }
}; 
```

这`doc.body.textContents`似乎是一个明显的元素，但它实际上并没有保持格式（该死的 HTML） - 使用`innerHTML`效果更好地满足我的需求。

# css - Div 背景宽度浏览器

> ID：11370906
> 
> 赞同：0
> 
> 时间：2012-07-06T23:29:15.613
> 
> 标签：css, background

我希望页眉背景和页脚背景与浏览器窗口一样宽。

在顶部我认为还可以，但页脚背景不是

在[PSR上](http://psr.mediameans.de)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:40:20.667

像`header`div 一样，把`footer`div 放在外面`wrapper`。它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:32:58.250

将宽度设置为`100%`：

```
#footer { width: 100%; } 
```

# python - Python中正则表达式的令人困惑的行为

> ID：11370907
> 
> 赞同：2
> 
> 时间：2012-07-06T23:29:29.877
> 
> 标签：python, regex, string

我正在尝试使用 python 中的 re 模块匹配特定模式。我希望匹配一个完整的句子（更准确地说，它们是由空格和/或标点符号分隔的字母数字字符串序列）

例如。

*   “这是一句普通话。”
*   “这也是有效的”
*   “This ONE也是”

我尝试了各种正则表达式组合，但我无法正确掌握模式的工作原理，每个表达式都给了我不同但莫名其妙的结果（我承认我是初学者，但仍然如此）。

* * *

我试过了：

*   "((\w+)(\s?))*"

    据我所知，这应该匹配一个或多个字母数字，然后贪婪地跟随一个或没有空格字符，然后它应该贪婪地匹配整个模式。这不是它似乎做的，所以很明显我错了，但我想知道为什么。（我希望这会返回整个句子作为结果）对于上面提到的第一个示例字符串，我得到的结果是 [('sentence', 'sentence', ''), ('', '', ''), ('', '', ''), ('', '', '')]。

*   "(\w+ ?)*"

    我什至不确定这个应该如何工作。官方文档(python help('re')) 说*,+,? 匹配前面 RE 的 x 或 x（贪婪）重复。在这种情况下，只需将前面的 RE 空格用于“？” 还是 '\w+ ' 是前面的 RE？' ' 运算符的 RE 是*什么？我得到的输出是['sentence']。

*   其他如 "(\w+\s?)+)" ；"((\w*)(\s??)) 等基本上是相同想法的变体，即句子是一组字母数字，后跟单个/有限数量的空格，并且这种模式重复超过。

有人能告诉我哪里出错了，为什么，为什么上面的表达式不能像我期望的那样工作？

* * *

PS 我最终得到了 "[ \w]+" 为我工作，但是这样我不能限制连续的空白字符的数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:35:01.493

您对正则表达式的推理是正确的，您的问题来自使用带有`*`. 这是一个替代方案：

```
>>> s="This is a regular sentence."
>>> import re
>>> re.findall(r'\w+\s?', s)
['This ', 'is ', 'a ', 'regular ', 'sentence'] 
```

`\b`在这种情况下，使用它来匹配单词边界可能更有意义。

```
>>> re.findall(r'\w+\b', s)
['This', 'is', 'a', 'regular', 'sentence'] 
```

或者，您可以通过匹配整个句子`re.match`并使用`re.group(0)`来获得整个匹配：

```
>>> r = r"((\w+)(\s?))*"
>>> s = "This is a regular sentence."
>>> import re
>>> m = re.match(r, s)
>>> m.group(0)
'This is a regular sentence' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:34:46.533

这是一个很棒的正则表达式教程网站：

[http://regexone.com/](http://regexone.com/)

这是一个与给出的示例匹配的正则表达式：

```
([a-zA-Z0-9,\. ]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T15:42:23.817

也许这会有所帮助：

```
import re

source = """
This is a regular sentence.
this is also valid
so is This ONE
how about this one  followed by this one
"""

re_sentence = re.compile(r'[^ \n.].*?(\.|\n|  +)')

def main():
    i = 0
    for s in re_sentence.finditer(source):
        print "%d:%s" % (i, s.group(0))
        i += 1

if __name__ == '__main__':
    main() 
```

我在表达式中使用交替`(\.|\n| +)`来描述句末条件。注意在第三个交替中使用了两个空格。第二个空格具有“+”元字符，因此一行中的两个或多个空格将成为句子的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T23:39:35.060

为什么要限制连续空白字符的数量？因为一个句子可以在一行中有任意数量的单词（字母数字字符序列）和空格，而是一个句子是以标点符号结尾的文本区域，或者更确切地说是不在上述序列中的东西，包括空格。

```
([a-zA-Z0-9\s])* 
```

上面的正则表达式将匹配一个句子，其中它是一个系列或系列中的空格零次或多次。您可以将其细化为以下内容：

```
([a-zA-Z0-9])([a-zA-Z0-9\s])* 
```

这只是说明上述序列必须以字母数字字符开头。

希望这就是你要找的。

# c - 如何使用 Minizip（在 Zlib 上）？

> ID：11370908
> 
> 赞同：16
> 
> 时间：2012-07-06T23:30:25.860
> 
> 标签：c, zip, zlib

我正在尝试为跨平台应用程序归档文件，看起来 Minizip（基于 zlib 构建）与归档器一样可移植。

但是，当我尝试运行以下虚拟代码时，出现系统错误`[my executable] has stopped working. Windows can check online for a solution to the problem.`

谁能帮我看看如何使用这个库？—（我找不到任何文档或教程）

```
zip_fileinfo zfi;

int main()
{
    zipFile zf = zipOpen("myarch.zip",APPEND_STATUS_ADDINZIP);
    int ret = zipOpenNewFileInZip(zf,
        "myfile.txt",
        &zfi,
        NULL,   0,
        NULL,   0,
        "my comment for this interior file",
        Z_DEFLATED,
        Z_NO_COMPRESSION
        );
    zipCloseFileInZip(zf);
    zipClose(zf, "my comment for exterior file");
    return 0;
} 
```

*规格：Msys + MinGW，Windows 7，使用 zlib125dll.zip/dll32 中的 zlibwapi.dll*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-09-09T11:47:45.543

由于我通过 Google 找到了这个问题并且它不包含任何完整的工作代码，因此我在这里为未来的访问者提供了一些。

```
int CreateZipFile (std::vector<wstring> paths)
{
    zipFile zf = zipOpen(std::string(destinationPath.begin(), destinationPath.end()).c_str(), APPEND_STATUS_CREATE);
    if (zf == NULL)
        return 1;

    bool _return = true;
    for (size_t i = 0; i < paths.size(); i++)
    {
        std::fstream file(paths[i].c_str(), std::ios::binary | std::ios::in);
        if (file.is_open())
        {
            file.seekg(0, std::ios::end);
            long size = file.tellg();
            file.seekg(0, std::ios::beg);

            std::vector<char> buffer(size);
            if (size == 0 || file.read(&buffer[0], size))
            {
                zip_fileinfo zfi = { 0 };
                std::wstring fileName = paths[i].substr(paths[i].rfind('\\')+1);

                if (S_OK == zipOpenNewFileInZip(zf, std::string(fileName.begin(), fileName.end()).c_str(), &zfi, NULL, 0, NULL, 0, NULL, Z_DEFLATED, Z_DEFAULT_COMPRESSION))
                {
                    if (zipWriteInFileInZip(zf, size == 0 ? "" : &buffer[0], size))
                        _return = false;

                    if (zipCloseFileInZip(zf))
                        _return = false;

                    file.close();
                    continue;
                }
            }
            file.close();
        }
        _return = false;
    }

    if (zipClose(zf, NULL))
        return 3;

    if (!_return)
        return 4;
    return S_OK;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T10:18:06.813

minizip 库确实带有示例；*minizip.c*用于压缩和*miniunz.c*用于解压缩。两者都是显示如何使用库的命令行实用程序。他们虽然是一团糟。

您还需要填写 zfi `zip_fileinfo`。至少您应该将结构初始化为零。zfi 包含有关您要使用存储的文件的信息`zipOpenNewFileInZip`。该结构应包含“myfile.txt”的日期和属性。

我建议使用 PKWARE Desktop 来诊断 zip 问题。它显示了 ZIP 中文件的结构/属性和 ZIP 文件本身。当我打开 myarch.zip 时，它告诉我有错误。我深入研究了文件属性，发现属性已关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T02:55:07.917

minizip 库有据可查。只需打开 zip.h 即可了解详细信息。

我可以在这里告诉你，你可能为 zipOpen 传递了错误的参数。（APPEND_STATUS_ADDINZIP 需要现有的 zip 文件！）

另外，请检查 zipOpen 是否返回有效的 zipFile 句柄。

# android - 如何反编译 Android .apk 文件？

> ID：11370910
> 
> 赞同：-1
> 
> 时间：2012-07-06T23:30:39.040
> 
> 标签：android, reverse-engineering, apk, decompiling

我想在我的 MAC OS X 上反编译一个 Android .apk 文件。这是可能的，但我有一些困难。京东 GUI 挂了。解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:54:16.370

你并不总是需要 JD-GUI，有几个选项可以这样做，我个人使用 DED，它带有一个可以运行的脚本。它使用 jasmin-classes 和 soot，这有助于提高类文件的效率。使用 APKtool 获取 manifest.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T17:24:37.280

一些 apk 可以通过将它们重命名为 .zip 来反编译，例如 app-debug.apk 一旦重命名为 app-debug.zip 就可以解压缩。

# c# - 我的 WPF 应用程序中的 WndProc 没有“处理”WM_INPUT 事件

> ID：11370911
> 
> 赞同：3
> 
> 时间：2012-07-06T23:30:51.303
> 
> 标签：c#, wpf, wndproc

[编辑] 这是我迄今为止收集到的关于鼠标输入处理的信息。请注意，我已经通过一堆不同的来源和实验了解到这一点，所以不要把它当作福音：1）鼠标事件源于鼠标移动 2）SetWindowsHookEx（WH_MOUSE_LL）处理程序 LowLevelMouseProc 首先看到事件 3）操作系统/应用程序框架在较高级别处理鼠标事件（鼠标光标移动） 4）WM_INPUT 事件由应用程序事件队列拾取并由 WndProc 处理（尽管此时处理不会阻止鼠标光标在步骤 3 中移动）。5) 消息通过 ComponentDispatcher 调度 6) PreviewMouseMove 和 MouseMove 事件被触发并且可能由应用程序处理。

基于此，我认为确保鼠标光标不移动的唯一方法是通过 WH_MOUSE_LL 进行过滤。当然，正如我在本文前面提到的，此时没有足够的信息来知道这个鼠标事件来自哪个设备，所以它是全有或全无过滤，这不符合我的要求。

* * *

[编辑] 我已经验证我能够通过挂钩 WH_MOUSE_LL 并从处理程序返回一个大于 0 的值来删除事件。现在我只需要弄清楚如何将 WH_MOUSE_LL 级别生成的鼠标事件与来自我的设备的事件相匹配......

我确实尝试从 WndProc 返回一个大于 0 的值。该事件仍由我的应用程序处理。

* * *

我正在尝试集成基于机械 USB 鼠标 Y 轴的旋转输入设备。我希望此设备仅充当原始输入设备，并希望删除设备生成的正常鼠标移动事件（至少在我的应用程序的上下文中）。

到目前为止，我已经能够使用 WindowIteropHandler 和 AddHook 将 WndProc 挂接到我的 WPF 应用程序 MainWindow 中。我能够从我的特定 USB VID/PID 设备接收 WM_INPUT 事件并过滤鼠标事件（足以满足我的需要）。

我希望将消息标记为已处理并返回 0 会导致消息不会传播到 WPF 窗口的其余部分，但事实并非如此......当我移动设备时，我仍然收到 MouseMove 事件。这是我的代码（简化为删除处理 WM_INPUT 消息，但仍然出现相同的问题）：

```
 public partial class MainWindow : Window
{
    private const int WM_INPUT = 0x00FF;

    public MainWindow()
    {
        InitializeComponent();
    }

    public IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        if (msg == WM_INPUT)
        {
            // TODO - figure out why this doesn't halt further processing of this handled event
            handled = true;
        }
        return IntPtr.Zero;
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWINPUTDEVICE
    {
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsagePage;
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsage;
        [MarshalAs(UnmanagedType.U4)]
        public int dwFlags;
        public IntPtr hwndTarget;
    }

    private const int RIDEV_INPUTSINK = 0x00000100;

    [DllImport("User32.dll")]
    extern static bool RegisterRawInputDevices(RAWINPUTDEVICE[] pRawInputDevice, uint uiNumDevices, uint cbSize);

    private void Window_SourceInitialized(object sender, EventArgs e)
    {
        WindowInteropHelper helper = new WindowInteropHelper(this);
        HwndSource source = HwndSource.FromHwnd(helper.Handle);
        RAWINPUTDEVICE[] rid = new RAWINPUTDEVICE[1];

        rid[0].usUsagePage  = 0x01;
        rid[0].usUsage      = 0x02;
        rid[0].dwFlags      = RIDEV_INPUTSINK; 
        rid[0].hwndTarget   = source.Handle;
        RegisterRawInputDevices(rid, (uint)rid.Length, (uint)Marshal.SizeOf(rid[0]));

        source.AddHook(WndProc);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        e.Handled = true;
    }

    private void button1_MouseMove(object sender, MouseEventArgs e)
    {
        e.Handled = true;
    }
} 
```

任何人都知道如何使我在 WndProc 中处理的鼠标事件出列或阻止将其传播到 MainWindow？

蒂亚！

-马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:10:00.353

经过长时间的谷歌搜索，看起来其他人已经描述并解决了我使用 UMDF 尝试做的事情：http: [//oblita.com/Interception](http://oblita.com/Interception)

我希望我不必去那里，但看起来这是实际拦截来自特定设备的事件的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-01T01:48:14.150

我也有这个问题，我通过*以管理员权限*运行我的应用程序解决了这个问题。

似乎该`WM_INPUT`消息受制于`UIPI`（用户界面特权隔离）。在此处查看参考：

> [**SendMessage、PostMessage 和相关函数**](https://docs.microsoft.com/en-us/windows/win32/wintouch/sendmessage--postmessage--and-related-functions)

尽管该方法`DefWindowProc()`将传递消息，但它不会将其处理到下一个应用程序。但是如果有一个以管理员身份运行的应用程序，例如`Task Manager`，`Window Device Manager`等等，则较低权限的应用程序无法接收到上述应用程序传递的一些窗口消息。这个问题不仅是`WN_IPUT`，而且是`Hook`。

# python - 如何遍历python中的字典列表？

> ID：11370913
> 
> 赞同：5
> 
> 时间：2012-07-06T23:31:00.357
> 
> 标签：python, django, django-templates, python-2.7

我有一个`list of dictionary`in python 即

```
listofobs = [{'timestamp': datetime.datetime(2012, 7, 6, 12, 39, 52), 'ip': u'1.4.128.0', 'user': u'lovestone'}, {'timestamp': datetime.datetime(2012, 7, 6, 12, 40, 32), 'ip': u'192.168.21.45', 'user': u'b'}] 
```

我想`listofobs`在 Django 模板中使用变量的所有键和值。例如：

对于第一次迭代：

```
timestamp = 7 july 2012, 12:39 Am
ip = 1.4.128.0
user = lovestone 
```

对于第二次迭代：

```
 timestamp = 7 july 2012, 12:40 Am
 ip =  192.168.21.45
 user = b 
```

等等 ..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T23:33:34.967

```
for a in listofobs:
    print str( a['timestamp'] ), a['ip'], a['user'] 
```

将遍历 dict 的列表，然后在模板中使用它们，只需将其包装在所需的 django 语法中，这与常规 python 非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:44:48.187

Django 模板语法允许你遍历一个字典列表：

```
{% for obj in listofobjs %}
    timestamp = {{ obj.timestamp }}
    ip = {{ obj.ip }}
    user = {{ obj.user }}
{% endfor %} 
```

您需要做的就是确保 listofobjs 在您的渲染上下文中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T23:45:32.450

查看[内置`for`模板标签](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)的示例。

循环项目（你的外循环）：

```
{% for obj in listofobjs %}
    {# do something with obj (just print it for now) #}
    {{ obj }}
{% endfor %} 
```

然后遍历字典对象中的项目：

```
{% for key, value in obj.items %}
    {{ key }}: {{ value }}
{% endfor %} 
```

# c++ - 试图附加一个 char 字符串

> ID：11370915
> 
> 赞同：1
> 
> 时间：2012-07-06T23:31:12.073
> 
> 标签：c++, arrays, string, variables

我知道这是一个基本问题，但我似乎无法将 char 字符串 (\r\n) 附加到另一个。我曾尝试使用数组（strcpy）和字符串对象，但没有任何进展。要将字符串发送到 Java 小程序，我需要附加 \r\n 字符，否则它只会坐等它们。当我使用带有 c_str() 函数的搅拌器时，我得到一个

> C:\ucdhb2\gaia\async_ssl\no4\basic.cpp|163|错误：在'readit'中请求成员'c_str'，它是非类类型'std::string*'|

错误。任何帮助，将不胜感激。

```
 char readit[45];

        cin >> readit;

        strcpy( readit, "\r\n" );

        SSL_write( ssl, readit, strlen(readit));   // This doesn't work 
//      SSL_write( ssl, "this works\n\r", strlen("this works\n\r"));  // This works 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:37:42.330

A`string`应该是你需要的。

```
std::string readit;
std::getline(std::cin, readit);
readit += "\r\n";
SSL_write(ssl, readit.data(), readit.size()); 
```

正如其他评论员所指出的，您的示例代码需要使用`strcat`而不是`strcpy`. 但是，如果您使用`char`数组，则需要检查缓冲区溢出。`std::string`不会溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T23:44:08.613

试试 strcat 函数，这将连接两个字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:35:27.167

代替将一个字符串复制到另一个字符串的 strcpy，请使用：

```
char* str = new char[100];
sprintf(str, "%s\r\n", readit); 
```

# java - android.database.CursorIndexOutOfBoundsException：不知道为什么

> ID：11370916
> 
> 赞同：0
> 
> 时间：2012-07-06T23:31:21.840
> 
> 标签：java, android, database, sqlite

我刚刚收到用户使用我的 Android 应用程序的错误报告。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{c`om.gurpswu.gurps/com.gurpswu.gurps.Home}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
at android.app.ActivityThread.access$2300(ActivityThread.java:126)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4633)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:84)
at com.gurpswu.gurps.Player.getIntField(Player.java:137)
at com.gurpswu.gurps.Home.hudSetup(Home.java:102)
at com.gurpswu.gurps.Home.onCreate(Home.java:25)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
... 11 more` 
```

我无法重现问题。我希望你能帮助我。这是我在主屏幕上从 sqlite 数据库中检索值的代码。

```
 public String getStringField(String fieldName) {
        String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_CITY,
                KEY_HEALTH, KEY_ENERGY, KEY_RANK, KEY_CASH, KEY_BALANCE,
                KEY_DONATED };

        Cursor c = ourDatabase.query(true, DATABASE_TABLE, columns, null, null,
                null, null, "_id DESC", "1");

        if (c != null) {
            c.moveToFirst();
            String name = c.getString(c.getColumnIndexOrThrow(fieldName));
            c.close();
            return name;
        }
        return null;
    }

    public int getIntField(String fieldName) {
        String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_CITY,
                KEY_HEALTH, KEY_ENERGY, KEY_RANK, KEY_CASH, KEY_BALANCE,
                KEY_DONATED };

        Cursor c = ourDatabase.query(true, DATABASE_TABLE, columns, null, null,
                null, null, "_id DESC", "1");

        if (c != null) {
            c.moveToFirst();
            int result = c.getInt(c.getColumnIndexOrThrow(fieldName));
            c.close();
            return result;
        }
        return (Integer) null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:39:08.430

在堆栈跟踪中，第一行你有`CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0`. 做`c.getCount()`之前检查`c.moveToFirst()`：

```
if(c != null) {
    try {
        if (c.getCount() > 0) {
            c.moveToFirst();
            return c.getInt(c.getColumnIndexOrThrow(fieldName));
        }
    }
    finally {
        c.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:34:24.367

我的猜测是，如果`c.moveToFirst();`没有任何记录，您必须检查的返回值，此调用应该失败（可能返回“虚假”值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:36:33.530

如果光标为空怎么办？

替换： if (c != null) 为： if (c != null && c.moveToFirst())

# object - 经典 ASP - 何时关闭记录集

> ID：11370917
> 
> 赞同：5
> 
> 时间：2012-07-06T23:32:13.037
> 
> 标签：object, asp-classic, recordset

我想知道，在我的情况下，以下哪个示例最适合关闭记录集对象？

**1)**

这个关闭循环内的对象，但在下一个移动时打开一个新对象。如果有 1000 条记录，这将打开一个对象 1000 次并关闭它 1000 次。这是我通常会做的：

```
SQL = " ... "
Set rs1 = conn.Execute(SQL)
While NOT rs1.EOF

    SQL = " ... "
    Set rs2 = conn.Execute(SQL)
    If NOT rs2.EOF Then
        Response.Write ( ... )
    End If
    rs2.Close : set rs2 = Nothing

rs1.MoveNext
Wend
rs1.Close : Set rs1 = Nothing 
```

**2)**

这个例子是我想知道的。将对象闭包 (rs2.close) 保存到循环完成后会提高还是降低性能？如果有 1000 条记录，这将打开 1000 个对象，但只会关闭一次：

```
SQL = " ... "
Set rs1 = conn.Execute(SQL)
While NOT rs1.EOF

    SQL = " ... "
    Set rs2 = conn.Execute(SQL)
    If NOT rs2.EOF Then
        Response.Write ( ... )
    End If

rs1.MoveNext
Wend
rs1.Close : Set rs1 = Nothing
rs2.Close : set rs2 = Nothing 
```

我希望我已经很好地解释了自己，而且这不是太愚蠢。

**更新**

对于那些认为可以修改我的查询以避免 N+1 问题（第二次查询）的人，这里是：

这是一个在线照片库。我有两张桌子；“照片搜索”和“照片”。第一个，“photoSearch”，只有几列，包含照片的所有可搜索数据，例如“photoID”、“headline”、“caption”、“people”、“dateCaptured”和“keywords”。它有一个多栏全文索引（标题、标题、人物、关键字）。第二个表“照片”包含所有照片数据；高度、宽度、版权、标题、ID、日期等等。两者都有 500K+ 行，标题和标题字段有时会返回 2000+ 个字符。

这大概是查询现在的样子：（注意事项：我不能将连接与全文搜索一起使用，因此关键字存储在一列中 - 在“非规范化”表中。此外，这种伪代码作为我的应用程序代码在别处 - 但它很接近）

```
SQL = "SELECT photoID FROM photoSearch
WHERE MATCH (headline, caption, people, keywords)
AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE)
AND dateCaptured BETWEEN '"&fromDate&"' AND '"&toDate&"' LIMIT 0,50;"
Set rs1 = conn.Execute(SQL)
While NOT rs1.EOF

    SQL = "SELECT photoID, setID, eventID, locationID, headline, caption, instructions, dateCaptured, dateUploaded, status, uploaderID, thumbH, thumbW, previewH, previewW, + more FROM photos LEFT JOIN events AS e USING (eventID) LEFT JOIN location AS l USING (locationID) WHERE photoID = "&rs1.Fields("photoID")&";"
    Set rs2 = conn.Execute(SQL)
    If NOT rs2.EOF Then
        Response.Write ( .. photo data .. )
    End If
    rs2.Close

rs1.MoveNext
Wend
rs1.Close 
```

测试时，在自己的表“photoSearch”上拥有全文索引，而不是在大表“photos”上，似乎在一定程度上提高了速度。我没有添加“photoSearch”表，它已经存在 - 这不是我的应用程序。如果我尝试加入两个表以丢失第二个查询，我会一起丢失我的索引，从而导致很长时间 - 所以我不能使用全文连接。这似乎是最快的方法。如果不是因为全文和连接问题，我早就将这两个查询结合起来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T06:45:45.843

事情就是这样。首先，获取您的照片 ID 并使 mysql 认为这是一个仅包含照片 ID 的实际表，然后进行实际声明，不需要任何额外的记录集连接......

并且不要忘记从头开始执行此操作。这是带有解释的示例代码：

**第 1 步**创建照片 ID 查找表并将其命名：这将是我们的 PhotoId 查找表，因此将其命名为“PhotoIds”

```
SELECT photoID FROM photoSearch
WHERE MATCH (headline, caption, people, keywords)
AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE)
AND dateCaptured BETWEEN '"&fromDate&"' AND '"&toDate&"' LIMIT 0,50) AS PhotoIds 
```

**第 2 步**现在我们有了照片 ID，因此可以从中获取信息。我们将在 WHERE 子句之前插入上面的语句，就像我们对真实表所做的那样。请注意，我们的“假”表必须在括号之间。

```
SQL = "SELECT p.photoID, p.setID, p.eventID, p.locationID, p.headline, p.caption, + more FROM
    photos AS p,
    events AS e USING (p.eventID),
    location AS l USING (p.locationID),
    (SELECT photoID FROM photoSearch WHERE MATCH (headline, caption, people, keywords)
        AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE) AND dateCaptured BETWEEN
        '"&fromDate&"' AND '"&toDate&"' LIMIT 0,50) AS PhotoIds
    WHERE p.photoID=PhotoIds.photoID;" 
```

**注意：**我只是在这里编写这些代码，从未测试过。可能有一些拼写错误或smt。如果您有麻烦，请告诉我。

**现在得到你的主要问题**

无需关闭已执行的查询，尤其是在您使用**执行**方法时。Execute 方法在执行后自行关闭，除非它不返回任何记录集数据（这就是执行命令的目的），例如：“INSERT”、“DELETE”、“UPDATE”。如果您没有打开记录集对象，那么为什么要尝试关闭从未打开过的东西呢？相反，您可以使用**Set Rs=Nothing**取消引用对象并发送到垃圾收集以释放一些系统资源（这与 mysql 本身无关）。如果您使用“SELECT”查询（将返回一些数据的查询），您必须打开一个记录集对象 (ADODB.Recordset)，如果您打开它，您需要在它完成工作后立即关闭它。

***最重要的是在每次页面加载后关闭“与 mysql 服务器的主连接”。***因此，您可以考虑将连接关闭算法（不是记录集关闭）放入包含文件中，并将其插入到与数据库建立连接的每一页的末尾。长话短说：如果使用**Open( )，则必须使用****Close( )**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T00:55:27.673

如果您向我们展示您的 SQL 语句，也许我们可以向您展示如何将它们组合成一条 SQL 语句，这样您只需执行一个循环，否则，像这样的双循环确实会对服务器性能造成影响。但在我学习存储过程和联接之前，我可能会这样做：

```
 Set Conn = Server.CreateObject("Adodb.Connection")
 Conn.Open "ConnectionString"

 Set oRS = Server.CreateObject("Adodb.Recordset")
 oRS.Open "SQL STATEMENT", Conn

 Set oRS2 = Server.CreateObject("Adodb.Recordset")
 oRS2.ActiveConnection = Conn

 Do Until oRS.EOF

    oRS2.Open "SQL STATEMENT"
    If oRS2.EOF Then ...
    oRS2.Close

 oRS.Movenext
 Loop
 oRS.Close
 Set oRS = Nothing
 Set oRS2 = Nothing
 Set Conn = Nothing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:29:50.377

我试着把它放在评论中，因为它没有直接回答你原来的问题，但它太长了.. :)

您可以尝试使用子查询而不是连接，将外部查询嵌套在第二个查询中。“ ...其中照片ID（从照片搜索中选择照片ID ...）”。不确定它是否会得到更好的结果，但可能值得一试。话虽如此，全文搜索的使用确实改变了查询的优化方式，因此可能需要更多的工作来确定合适的索引是什么（需要）。根据您现有的表现，可能不值得付出努力。

你确定这个现有的代码/查询是当前的瓶颈吗？有时我们会花时间优化我们*认为*是瓶颈的东西，而事实并非如此...... :)

另一个想法 - 您可能需要考虑一些缓存逻辑来减少您可能进行的冗余查询的数量 - 无论是在页面级别还是在此方法级别。搜索参数可以连接在一起以形成用于将数据存储在某种缓存中的键。当然，您需要处理适当的缓存失效/到期逻辑。我已经看到系统速度提高了 100 倍，非常简单的缓存逻辑添加到这样的瓶颈中。**

# android - 在android中查询Intent.ACTION_VIEW

> ID：11370921
> 
> 赞同：2
> 
> 时间：2012-07-06T23:32:57.533
> 
> 标签：android

Intent.ACTION_VIEW 中的 Intent 是什么？它是一个类还是一个方法，这里是什么 ACTION_VIEW ？它是一个变量吗？它的类型是什么？请详细说明。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:43:12.577

Intent 是一个公共类，最常用于启动新的活动。例如：

```
Intent intent = new Intent(CurrentActivity.this, NextActivity.class);
startActivity(intent); 
```

我建议阅读 Android 开发手册，并尝试一些简单的教程来开始。你可以在这里找到：http: [//developer.android.com/training/index.html](http://developer.android.com/training/index.html)

本页将详细描述 ACTION_VIEW 和 Intent；比我好得多：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:37:31.287

`Intent`在 android 中是一个`abstract public Class`. `ACTION_VIEW`是对 Intent 的操作。

```
public static final String ACTION_VIEW 
```

> 自：API 级别 1 活动操作：向用户显示数据。这是对数据执行的最常见的操作——它是您可以对一条数据使用的通用操作，以使最合理的事情发生。例如，当在联系人条目上使用时，它将查看该条目；当在 mailto: URI 上使用时，它将打开一个撰写窗口，其中填充了 URI 提供的信息；当与 tel: URI 一起使用时，它将调用拨号程序。
> 
> 输入：getData() 是从中检索数据的 URI。
> 
> 输出：没有。
> 
> 常量值：“android.intent.action.VIEW”

您需要阅读 Android 开发者指南。[你会在这里](http://developer.android.com/reference/android/content/Intent.html)得到更好的理解。

# c++ - C++ - va_list 错误指针

> ID：11370923
> 
> 赞同：1
> 
> 时间：2012-07-06T23:33:05.100
> 
> 标签：c++, variadic-functions

在 case 's' 下，我得到了一个错误指针（0xcccccccc）的异常：

```
string Logger::format(const char *str, va_list args)
{
    ostringstream output;

    for(int i = 0; i < strlen(str); ++i)
    {
        if(str[i] == '%' && str[i+1] != '%' && i+1 < strlen(str))
        {
            switch(str[i+1])
            {
            case 's':
            {
                char *temp = va_arg(args, char*);
                output << temp;
                break;
            }
            case 'i':
            {
                int temp = va_arg(args, int);
                output << temp;
                break;
            }
            case 'd':
            {
                double temp = va_arg(args, double);
                output << temp;
                break;
            }
            case 'f':
            {
                float temp = va_arg(args, float);
                output << temp;
                break;
            }
            default:
                output << str[i];
            }

            i++;
        }
        else
        {
            output << str[i];
        }
    }

    return output.str();
} 
```

上面的函数是这样调用的：

```
void Logger::debugFormat(string message, ...)
{
    const char* cstr = message.c_str();

    va_list args;
    va_start(args, cstr);

    record(DEBUGGING, format(cstr, args));

    va_end(args);
} 
```

我在我的所有代码中都以这种方式调用上述内容

```
Logger::debugFormat("Loading Image %s", path.c_str()); 
```

任何其他类型（int、double、float）都可以正常工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:42:44.193

你没有`va_start`正确使用。第二个参数应该是函数参数，在该参数变量列表（由 表示`...`）之后开始。也就是说，它应该是：

```
va_start(args, message); 
```

# javascript - Wysihat 没有 Rake，只有 Javascript？

> ID：11370927
> 
> 赞同：3
> 
> 时间：2012-07-06T23:33:29.510
> 
> 标签：javascript, rake, wysihat

有没有办法在不运行 Rake 的情况下安装和使用 Wysihat？我天真地尝试从 Wysihat 的在线示例中复制源 javascript 文件，但我收到警告说我应该“在项目根目录中运行 Rake”。

其次，我试图得到 Rake（不管它是什么）。但是我在任何地方都找不到一篇关于如何启动和运行它的好文章，更不用说如何使用它了。我到处都看到像“git”、“gem”和“命令行”（至少知道那是什么）这样的词，但我不知道从哪里开始。

考虑到上面的问题，我可以问另一个问题：如何安装和使用 Rake？但我的主要问题是：我想让 Wysihat 工作，不管有没有 Rake。

提前感谢您的回复！

*是的，我知道我错过了对 Rake（或其他构建材料）的某种了解。可能是有原因的。我是一名 PHP 开发人员，从不需要使用 Rake。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:23:59.200

我面临同样的问题。在您找到如何运行该 rake 文件之前，您可以[在此处](https://github.com/tiff/wysihat-extended-demo/blob/master/wysihat.js)获取 wysihat.js 。

# asp.net - IE 不环绕浮动 div 但 FF 是

> ID：11370928
> 
> 赞同：1
> 
> 时间：2012-07-06T23:33:31.913
> 
> 标签：asp.net, html, css

我的网页在 Firefox 中运行良好。但在 IE 中它不能正确包装。

两列的父 div 是：

```
.underbars
{
    left:0;
    right:0;
    top: 140px;
    position: absolute;    
} 
```

在这个 div 中有 2 个 div，一个是浮动的，另一个应该直接位于浮动 div 的右侧，第二个 div 不浮动的原因是因为我希望它占用剩余的空间。在 IE 中，第二个 div 位于第一个 div 的正下方。

浮动 div：（应该在左侧）

```
.cabinetpane
{

    border-right: 1px solid #c1c0c1;
    border-right-style: solid;
    border-bottom-style: solid;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-right-color: #c1c0c1;
    border-bottom-color: #c1c0c1;    
    font-size: 12px;
    color: #3B4F65;
} 
```

包装 div （应该直接在右边并占用所有可用空间）

```
<div> </div> //No css for this one 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T00:26:22.707

我能想出的最佳解决方案是有一个 div 具有对齐事物的单一目的（它仅用于结构，不显示颜色/边框）。

这是盒子模型： ![在此处输入图像描述](../Images/d714a05ff0b385d342bb1e6ca5eb8ae9.png)

我正在谈论的那个 div 是你想要“占用剩余空间”的那个，也就是橙色框。在该 div 内部应用了一种样式，该样式指示，该 div 将有一个 margin-left （这个边距应该与您拥有的 float-left 列一样宽），以便当另一个 div 放置在内部并给定 width:100% 时，在在这种情况下，蓝色 div（由于填充和边框等原因，我给了它 90。您需要根据您拥有的边框/边距/填充来摆弄它）蓝色 div 将始终占据其余空间。

用颜色来概括：

*   黑色 = 固定的左列 div
*   橙色 = 用于结构的 div（不应有边框/背景等）
*   贪婪 = 橙色 div 上使用的左边距的隐喻表示
*   blue = 填充右侧空间的 div。

PS我在IE8中测试过

[你可以在这个 jsfiddle](http://jsfiddle.net/lyubent/TNZ8c/)中找到所有的 css/html ，每次你发布 CSS/js/HTML 相关问题时，我建议使用[JSFIDDLE ，一张图片绘制 1000 个单词。](http://jsfiddle.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:56:59.520

如果您要尝试的是 Lyuben Todorov 所说的，那么这样的事情会起作用：

```
<style>
.col1 { width:250px; float:left }
</style>

<div class="col1">
I'm 250
</div>
<div class="col2">
I'm as long as you want me to be, just don't define me! 
</div> 
```

...如果这就是我认为你现在所说的

# jenkins - 在读取控制台日志行/值后设置 Jenkins 变量--或-- 使用 Jenkins 调用的脚本/命令使用的变量

> ID：11370937
> 
> 赞同：2
> 
> 时间：2012-07-06T23:34:14.517
> 
> 标签：jenkins, set, environment-variables, jobs

我不需要以下内容：

1.  如何设置 Jenkins 环境变量或
2.  如何在 Jenkins / windows shell / ant / etc 脚本中使用环境变量。

我需要的是相反的。

摘要： 1\. 我有一个 Jenkins 工作：ABC_Build 2\. 这个工作调用一个 .bat 文件（它调用一个 ANT 代码/目标来打包/构建一个构建）。当我们创建一个构建时，这项工作知道新的构建标签名称是什么，并且 ANT 将它存储在一个名为“new.build.label”的变量中。使用的文件是 build.xml。

（给新手用户的提示：如果你想调用许多 Windows 命令（.bat / .cmd 或创建 Windows shell 的命令），那么你应该使用“call
script.bat -Dparam1 -Dparam2 ....”来调用它方法）。

1.  现在，该作业调用另一个 .bat 文件（它调用 ANT 代码/目标）并使用由第一个 .bat 文件/ANT 包目标调用（即“new.build.label”）生成的参数值之一。由于这是一个单独的 .bat 命令调用来调用 ANT 代码/目标的新会话，因此我需要在调用此步骤期间传递“new.build.label”的值。这里使用的文件是 deploy.xml。

2.  基本上，我试图看看如何在 Jenkins 中设置一个变量，或者使用：当我在标准输出/控制台输出中回显新构建标签的值时，读取我的 Jenkins 工作的控制台输出。湾。任何其他方式，我可以使用“new.build.label”ANT 变量设置 jenkins 变量（一旦第一个 .bat / ANT 包目标完成），我准备调用第二个 .bat / .cmd / ANT 调用进行部署。不幸的是，我不能同时进行打包/部署。

    当我已经知道“new.build.label”的值因为我的主要请求是：

    如何使用 Jenkins 调用的脚本之一（ANT/Jelly/Groovy/Maven/etc）使用的“变量”设置 jenkins 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T10:03:01.767

您可以通过[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)在 Jenkins 构建步骤之间传递环境变量。在您的特定情况下，以下可能是最好的方法：

1.  第一个 ANT 应该将*new.build.label回显到**EnvInject*插件可以读取的属性文件中，例如：

    ```
    <echo message="new.build.label=${new.build.label}" file="envars.props" /> 
    ```

2.  创建一个*注入环境变量*构建步骤并将“属性文件路径”设置为`envars.props`（确保您正确处理路径）。然后*new.build.label*将作为环境变量用于其余的构建步骤。

顺便说一句，我认为从 Jenkins 的批处理文件中调用 ANT 不是一个好习惯。请改用 ANT 构建步骤。

# linq-to-entities - 如何处理 linq 中的空值到实体

> ID：11370941
> 
> 赞同：0
> 
> 时间：2012-07-06T23:34:36.020
> 
> 标签：linq-to-entities

您如何处理 linq to entity 语句中 Max 值的空值？

```
int UserLevelID = db.Characters.Where(o => o.UserId == UserID).Max(o => o.LevelID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:41:30.960

我不太清楚你说计数是什么意思，因为你不是指该代码中的任何地方的计数。如果您想知道如何处理 null `o.LevelID`，您可以执行以下操作：

```
Max(o => o.LevelID ?? -1); 
```

`??`是 .NET 中的合并运算符

更新

试试这个：

```
db.Characters.Where(o => o.UserId == UserID).Max(o => o == null ? 0 : o.LevelID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:57:19.217

您可以执行以下操作，如果 o.LevelID 为 null，则将 'IFNULLDEFAULTVALUE' 替换为您希望的值：

```
int UserLevelID = db.Characters.Where(o => o.UserId == UserID).Max(o => (o.LevelID != null ? o.LevelID : IFNULLDEFAULTVALUE); 
```

# javascript - AJAX 请求无法正常工作并感到困惑，为什么，有什么新的眼光来看待它吗？

> ID：11370944
> 
> 赞同：0
> 
> 时间：2012-07-06T23:34:51.667
> 
> 标签：javascript, jquery, html, ajax, forms

这是我在其他页面上使用的 AJAX 脚本，它运行良好。

```
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="jquery.validate.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#form1").validate({
        debug: false,
        rules: {
            user1: "required",
            },
        messages: {
            user1: "Pick user",
        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('process.php', $("#form1").serialize(), function(data) {
                $('#result').html(data);
            });
        }
    });
}); 
```

我的表格如下：

```
 <form id="form1" name="form_select"  action="process.php" method="post">

        <select size="20" name="user1" onChange="this.form.submit()">
 <options>...</option>.....
  </select>
  </form> 
```

任何人都可以看到这可能不起作用的任何原因。一直在为这个问题挠头很长时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:50:25.757

将 this.form.submit() 交换到 jQuery 的提交处理程序

```
onChange="$(this.form).submit()" 
```

您正在调用 DOMs submit() 函数，而不是 jQuery 的提交处理程序，您的验证插件绑定到该处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:45:47.460

我知道关于 jQuery 的 zilch，bur 不应该`submitHandler`返回`false`所以表单不会提交 Web 1.0？

# ios - 如何在 Restkit 中设置标头值

> ID：11370949
> 
> 赞同：4
> 
> 时间：2012-07-06T23:35:39.903
> 
> 标签：ios, restkit

我正在尝试为我的 restkit 调用设置标头值。但是，这些似乎不起作用。

我想设置`Content-Type`和`Accept`标题`application/json`

知道问题出在哪里吗？

谢谢！

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];
[[objectManager client] setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[[objectManager client] setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

RKURL *URL = [RKURL URLWithBaseURL:[objectManager baseURL] resourcePath:@"/users/sign_in.json" queryParameters:params];

[objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?%@", [URL resourcePath], [URL query]] delegate:self]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T23:46:19.370

我认为这不太明显，尽管它在[文档](http://restkit.org/api/master/Classes/RKObjectManager.html#//api/name/serializationMIMEType)中（我还没有尝试过），但在对象管理器上有一个`serializationMIMEType`属性。还已经定义了一个 JSON 常量，因此您的代码可能如下所示：

```
objectManager.serializationMIMEType = RKMIMETypeJSON; 
```

根据文档， application/json 无论如何都是 Accept 的默认值，但可以由`acceptMIMEType`属性指定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T06:52:36.430

你有这个选项

```
[kGlobalObjectManager() loadObjectsAtResourcePath: @"path" usingBlock: ^(RKObjectLoader *loader) {
    NSDictionary* dictionary = [NSDictionary dictionaryWithObject: @"VALUE" forKey: @"HEADER NAME"];
    loader.additionalHTTPHeaders = dictionary;
    loader.delegate = self;
}]; 
```

更具体到你的问题`[RKObjectManager setAcceptMIMEType:]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-12T05:21:02.923

在类 RKObjectManager 中存在方法

```
**
 This method is the `RKObjectManager` analog for the method of the same name on `AFHTTPClient`.
 */
- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters
{
    NSMutableURLRequest* request;
    if (parameters && !([method isEqualToString:@"GET"] || [method isEqualToString:@"HEAD"] || [method isEqualToString:@"DELETE"])) {
        // NOTE: If the HTTP client has been subclasses, then the developer may be trying to perform signing on the request
        NSDictionary *parametersForClient = [self.HTTPClient isMemberOfClass:[AFHTTPClient class]] ? nil : parameters;
        request = [self.HTTPClient requestWithMethod:method path:path parameters:parametersForClient];

        NSError *error = nil;
        NSString *charset = (__bridge NSString *)CFStringConvertEncodingToIANACharSetName(CFStringConvertNSStringEncodingToEncoding(self.HTTPClient.stringEncoding));
        [request setValue:[NSString stringWithFormat:@"%@; charset=%@", self.requestSerializationMIMEType, charset] forHTTPHeaderField:@"Content-Type"];
        NSData *requestBody = [RKMIMETypeSerialization dataFromObject:parameters MIMEType:self.requestSerializationMIMEType error:&error];
        [request setHTTPBody:requestBody];
    } else {
        request = [self.HTTPClient requestWithMethod:method path:path parameters:parameters];
    }

    return request;
} 
```

这里存在内容类型的替代品，您可以在配置 RestKit 时尽早设置

```
[[[RKObjectManager sharedManager] HTTPClient] setDefaultHeader:@"Content-Type" value:@"application/json"]; 
```

为此，我找到了（不漂亮，但有效）解决方案，我做了分类

```
@interface RKObjectManager (BBContentType)

- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters;

@end

@implementation RKObjectManager (BBContentType)

- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters
{
    NSMutableURLRequest* request;
    if (parameters && !([method isEqualToString:@"GET"] || [method isEqualToString:@"HEAD"] || [method isEqualToString:@"DELETE"])) {
        // NOTE: If the HTTP client has been subclasses, then the developer may be trying to perform signing on the request
        NSDictionary *parametersForClient = [self.HTTPClient isMemberOfClass:[AFHTTPClient class]] ? nil : parameters;
        request = [self.HTTPClient requestWithMethod:method path:path parameters:parametersForClient];
        NSError *error = nil;
        NSData *requestBody = [RKMIMETypeSerialization dataFromObject:parameters MIMEType:self.requestSerializationMIMEType error:&error];
        [request setHTTPBody:requestBody];
    } else {
        request = [self.HTTPClient requestWithMethod:method path:path parameters:parameters];
    }

    return request;
}
@end 
```

我只剪了两条线

```
NSString *charset = (__bridge NSString *)CFStringConvertEncodingToIANACharSetName(CFStringConvertNSStringEncodingToEncoding(self.HTTPClient.stringEncoding));
[request setValue:[NSString stringWithFormat:@"%@; charset=%@", self.requestSerializationMIMEType, charset] forHTTPHeaderField:@"Content-Type"]; 
```

# python - 升级到 IPython13 后获取 AttributeError

> ID：11370950
> 
> 赞同：0
> 
> 时间：2012-07-06T23:35:40.770
> 
> 标签：python, ipython

我用 升级了我的`IPython`安装`pip`，当我使用 时`ipython`，它失败了：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
AttributeError: 'module' object has no attribute 'Shell' 
```

但是当我尝试时`$(which ipython)`，它可以正常启动。

这可能是什么原因`AttributeError`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:41:51.067

在 ~/.ipython 下查看。那里可能有一个使用旧 API 的配置脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:44:43.560

原来`alias`in`.bashrc`覆盖了`ipython`in `$PATH`，并且被设置为旧版本的 ipython

# jquery - 在 http://www.googleventures.com/ 上使用如何实现效果？

> ID：11370952
> 
> 赞同：-3
> 
> 时间：2012-07-06T23:36:04.567
> 
> 标签：jquery, html, css, web, scroll

我需要一些帮助来重新创建在[http://www.googleventures.com/](http://www.googleventures.com/) 上找到的效果 我怎样才能做到这一点？任何帮助将非常感激！我虽然可能有视差，但我不知道该怎么做......请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:54:44.377

给你，[http://jsfiddle.net/xbXhD/1/](http://jsfiddle.net/xbXhD/1/)

顶部 div 可以有链接等，就像在 Google Ventures 上一样，而不仅仅是一张图片。你明白了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:49:24.853

您应该能够使用`margin-top`. 看这个简单的例子：http: [//jsfiddle.net/lbstr/QE3Qh/11/](http://jsfiddle.net/lbstr/QE3Qh/11/)

**请允许我解释一下我在小提琴中所做的事情：**

你有两个 div`#fixed`和`#content`.

`#fixed`有一个导航菜单，顾名思义是固定的。`z-index: 1`确保它保持在`#content`div 下。这是CSS：

```
#fixed { position: fixed; top: 0; padding: 200px 0;z-index: 1 } 
```

`#content`有一个大`margin-top`的，可以让我们`#fixed`在滚动到页面顶部时看到。它有一个更高的`z-index`位置，因此它会`#fixed`在滚动时显示在顶部。不要忘记添加一些`position`，否则`z-index`意味着什么。这是那个CSS：

```
#content { margin-top: 400px; background-color: white; z-index: 2; position: relative; }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:50:35.717

检查这是否有帮助 - [http://www.ianlunn.co.uk/plugins/jquery-parallax/](http://www.ianlunn.co.uk/plugins/jquery-parallax/)

您也可以通过 css 实现视差

# html - Google+ 按钮不显示内联

> ID：11370957
> 
> 赞同：0
> 
> 时间：2012-07-06T23:36:48.827
> 
> 标签：html, css, social

我的 Google+ 按钮与 Firefox 和 Internet Explorer 中的其他按钮内嵌显示。

但是，它不会与我在 Google Chrome 中的其他按钮内联显示。

页面可以在这里看到：[http ://www.abijahchristos.com/sample/springspa](http://www.abijahchristos.com/sample/springspa)

JsFiddle在这里：http: [//jsfiddle.net/Abijah/hjpac/](http://jsfiddle.net/Abijah/hjpac/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:46:48.193

在您`main.css`的在线 170 更改

```
#social li { display: inline } 
```

到

```
#social li { display: inline-block } 
```

[JSFiddle](http://jsfiddle.net/hjpac/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:49:52.457

对于跨浏览器修复，请按照 Zoltan 所说的操作，但还要添加一个浮点数，如下所示：

```
#social li { display:inline-block; float:left; } 
```

IE 存在问题，尤其是带有 inline-block 的旧版本，并且仍然取决于它的使用方式，它可能会在元素的任一侧添加一些额外的像素。

# php - 使用 Doctrine 1.2 和 Symfony 1.4 获取节点祖先

> ID：11370959
> 
> 赞同：0
> 
> 时间：2012-07-06T23:37:21.493
> 
> 标签：php, symfony-1.4, nodes, doctrine-1.2, nested-sets

尝试从节点获取所有祖先时遇到了一些麻烦；

这是我的 schema.yml：

```
Constante:
connection: doctrine
tableName: constante
actAs:
NestedSet:
  hasManyRoots: true
  rootColumnName: parent_id
columns:
id:
  type: integer(8)
  fixed: false
  unsigned: false
  primary: true
  autoincrement: true
parent_id:
  type: integer(8)
  fixed: false
  unsigned: false
  primary: false
  notnull: true
  autoincrement: false
lft:
  type: integer(8)
  fixed: false
  unsigned: false
  primary: false
  notnull: true
  autoincrement: false
rgt:
  type: integer(8)
  fixed: false
  unsigned: false
  primary: false
  notnull: true
  autoincrement: false
level:
  type: integer(8)
  fixed: false
  unsigned: false
  primary: false
  notnull: true
  autoincrement: false
cod_interno:
  type: string(5)
  fixed: false
  unsigned: false
  primary: false
  notnull: false
  autoincrement: false
nombre:
  type: string(64)
  fixed: false
  unsigned: false
  primary: false
  notnull: true
  autoincrement: false 
```

这就是我试图从一个节点（不是根）获取所有祖先的方式

```
$path        = Doctrine_Core::getTable('Constante')->find($condicion); // $condicion = 57
$node        = $path->getNode();
$isLeaf      = $node->isLeaf(); //var_dump throws true
$ancestors   = $node->getAncestors(); //var_dump throws false
$isValidNode = $node->isValidNode(); //var_dump throws true 
```

因为`$ancestors == false`我无法遍历它并获取所有祖先（我正在尝试构建一个简单的面包屑）

这是我存储在数据库中的数据，这是真实数据（仅用于测试）

```
+---------++---------++---------++---------++----------++---------+
|ID       ||PARENT_ID||LFT      ||RGT      ||LEVEL     ||NOMBRE   |
|---------||---------||---------||---------||----------||---------|
|56       ||56       ||1        ||4        ||0         ||COUNTRY  | --> this is root
|57       ||56       ||2        ||3        ||1         ||CANADA   | --> child of root
+---------++---------++---------++---------++----------++---------+ 
```

[据此，](http://www.tig12.net/downloads/apidocs/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Node/Doctrine_Node_NestedSet.class.html#det_methods_getAncestors)如果 Ancestors 返回 false，则表示所选节点为根。

我花了几个小时寻找没有运气的解决方案。

如果您需要更多信息，请随时索取！

**编辑：**我在输入表格中的内容时犯了一个错误，感谢 olivierw 提醒我这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:03:31.947

`rgt`您的表格中的字段似乎有错误。如果`id 56`是根，它应该有`rgt = 4`并且`id 57`应该有`rgt = 3`. 所以你的表格应该是：

```
+---------++---------++---------++---------++----------++---------+
|ID       ||PARENT_ID||LFT      ||RGT      ||LEVEL     ||NOMBRE   |
|---------||---------||---------||---------||----------||---------|
|56       ||56       ||1        ||4        ||0         ||COUNTRY  |
|57       ||56       ||2        ||3        ||1         ||CANADA   |
+---------++---------++---------++---------++----------++---------+ 
```

所以你会正确地得到祖先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:45:39.107

我想分享我的解决方案，希望对其他人有用：

行动：

```
//action.class.php
public function executeIndex(sfWebRequest $request) {

$condicion = $request->getParameter('id') ? $request->getParameter('id') : 0;

if ($condicion > 0) {
  $path = $tree = Doctrine_Core::getTable('Constante')->find($condicion);
} else {
  $tree = Doctrine_Core::getTable('Constante');
  $path = null;
}

$this->constantes = $tree;
$this->path = $path;
$this->setTemplate('index');

} 
```

看法：

```
//indexSuccess.php
<?php
$var = (is_null($sf_request->getParameter('id'))) ? $constantes->getTree()->fetchRoots() : $constantes->getNode()->getChildren();
?>

<?php if ($var): foreach ($var as $constante): ?>
    <tr>
      <td><?php echo $constante->getNombre() ?></td>
    </tr>
  <?php
  endforeach;
endif;
?> 
```

部分的：

```
//_breadcrumb.php
<?php

if ($path) {

  echo '<ul class="breadcrumb">';

  $node = $path->getNode();
  $ancestors = $node->getAncestors();

  if ($ancestors)
    foreach ($ancestors AS $ancestor) {
      echo '<li>' . link_to($ancestor->getNombre(), 'constantes/more?id=' . $ancestor->getId()) . '<span class="divider">/</span></li>';
    }

  echo '</ul>';
}
?> 
```

我认为代码是不言自明的，但是如果您有任何问题，请告诉我！

# xml - 众所周知的命名空间前缀

> ID：11370960
> 
> 赞同：1
> 
> 时间：2012-07-06T23:37:29.167
> 
> 标签：xml, namespaces

宏博士[说](http://drmacros-xml-rants.blogspot.com.au/2006/02/i-was-wrong-sort-of-about-namespaces.html)：

> 在实践中，命名空间前缀很少发生冲突，因为大多数命名空间都是众所周知的，并且使用常规前缀定义，该前缀可能在可能组合的命名空间集合中是唯一的（同样，更一般的情况是随意组合意想不到的东西只是没有发生太多）。

不过，我想选择一个不常用的命名空间前缀。我想我可以用谷歌搜索我想要的前缀，但是有没有人知道常规前缀的列表，理想情况下可以衡量它们的常见/模糊程度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:48:01.897

命名空间的重要之处在于前缀是任意的并且可以很容易地更改。标准化的不是前缀，而是命名空间url，它们不会冲突，因为它们使用域注册系统来防止冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T17:52:09.543

前缀是完全无关的。使用大多数 XML API 构建 XML 时，不会发生前缀“冲突”。即使您为此类 API 提供前缀，它也会被视为“首选”前缀，并且在发生冲突时将被忽略。

只有命名空间需要是唯一的。

# c# - 如何将文本资源注入预构建的本机 EXE？

> ID：11370962
> 
> 赞同：0
> 
> 时间：2012-07-06T23:37:35.160
> 
> 标签：c#, resources, embedded-resource, native-code

我有一个本机 EXE（即 setup.exe 类型的文件）。我想在其中注入一个文本资源，例如 Server=X123456。

目的是在运行 EXE 时，它会读取文本资源并采取相应的行动。有没有办法从 C# 代码做到这一点？

请注意，有一个类似的[问题](https://stackoverflow.com/questions/3962472/how-does-one-inject-resources-into-an-already-built-executable)，但它侧重于将皮肤注入 WPF 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T00:12:08.637

Windows 有一个 API 用于更新本机可执行文件中的资源。查看[UpdateResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648049%28v=vs.85%29.aspx)和朋友的文档。

# php - 如何使用 while() 和 array() 从 $_GET 变量中打印多个 ID

> ID：11370964
> 
> 赞同：1
> 
> 时间：2012-07-06T23:37:45.230
> 
> 标签：php, mysql

我今天来这里是因为我遇到了一个我似乎无法解决的小问题，这就是它带来这里的原因。问题是我试图从 $_GET 变量中获取多个 ID 以打印出来。我尝试使用数组并且很好，它可以工作，但问题是它使用 [0] 制作单独的数组，我需要它作为同一个数组中的一个而不是 array() array()，这就是它的作用。

所以我使用 while() 和 mysql_fetch_array 从数据库中获取结果，它依赖于来自 url 的 $_GET 以获取正确的 id。因此，在我传入 api.php?do=remove&id=1,4,7 的 URL 中，它只会打印出第一个 id 而不会打印出其他名称。正如我所说，我尝试使用 array()，结果如下：

```
Array
(
    [0] => BzlXO.jpg
)
Array
(
    [0] => cHZTk.jpg
)
Array
(
    [0] => 9yset.jpg
)
Array
(
    [0] => Ss04V.jpg
) 
```

我不明白为什么要这样做，因为我需要它在一个数组中

```
Array (

   [0] => BzlXO.jpg,
   [1] => cHZTk.jpg,
   [2] => 9yset.jpg,
   [3] => Ss04V.jpg
) 
```

这样，当我将它们内爆时，它会显示为文本，如下所示：“您删除了图像“BzlXO.jpg，cHZTk.jpg，9yset.jpg，Ss04V.jpg”，类似于

```
 $iName[imagename] = array($iName[imagename]);
        $name = implode(",", $iName[imagename]); 
```

这是我的代码：

这是 URL “api.php?do=remove&id=1,4,7”

```
 $ID = $_GET['id'];
    $query = "SELECT ID,imagename FROM uploads WHERE ID IN ({$ID}) AND username = '{$uploader}'";
    $result = mysql_query($query);

      while( $iName = mysql_fetch_array($result)){
          $querys = "DELETE FROM uploads WHERE ID IN ({$ID}) AND username = '{$uploader}'";
      $results = mysql_query($querys);

          if(!$results) {
       $api_message = 'Failed to get a Removal result';
       } else {

            $iName[imagename] = array($iName[imagename]);
            $name = implode(",", $iName[imagename]);

           $api_message = "You removed image(s) $name"; 

          }
} 
```

输出 ：

您删除了图片 BzlXO.jpg

但我需要它是：

输出：您删除了图像“BzlXO.jpg,cHZTk.jpg,9yset.jpg,Ss04V.jpg”

对此的任何帮助将不胜感激，如果需要更多信息，请告诉我，我将包括在内谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:46:44.480

也许您需要填充循环之前声明的数组，如下所示：

```
$images = array();
while( $iName = mysql_fetch_array($result)) { 
  ...
  $images[] = $iName['imagename']; # pushing the deleted image into that array
}
...
$names = implode(', ', $images); 
```

而且我强烈建议至少检查使用[mysqli](http://php.net/manual/en/book.mysqli.php)函数集的可能性（或[PDO](http://php.net/manual/en/book.pdo.php)，在我看来这甚至更好，但对于您的代码库来说可能是一个太大的步骤）。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T00:00:34.097

除了raina77ow 发布的解决方案之外，控制流也存在问题，因为您正在`DELETE FROM uploads WHERE ID IN (...)`为循环的每次迭代执行语句`while`。这将删除第一次迭代的所有记录。您需要将其更改为：

```
$ID = $_GET['id'];
$names = array();
$query = "SELECT ID,imagename FROM uploads WHERE ID IN ({$ID}) AND username = '{$uploader}'";
$result = mysql_query($query);

  while( $iName = mysql_fetch_array($result)){
      $querys = "DELETE FROM uploads WHERE ID = {$iName['ID']} AND username = '{$uploader}'";
      $results = mysql_query($querys);
      if(!$results) {
       $api_message = 'Failed to get a Removal result';
      } else {
        $names[] = $iName['imagename']);
      }
  }
  $name = implode(",", $names);
  $api_message = "You removed image(s) $name"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T00:15:44.017

您应该修改您的代码以保护它免受无效值的影响并减少失败的可能性。

至于您的具体问题，无需将一个数组中的值放在另一个数组中，只是为了将其内爆为字符串。您可以简单地使用[字符串连接](http://php.net/manual/en/language.operators.string.php)来继续添加所需的值。

**这个建议解决了你的问题：** ^(代码注释是为了解释发生了什么)

```
// initialize the user message with the success string
$api_message = "You removed image(s): ";

// check if the URL variable exists and contains values
if (isset($_GET['id']) && $_GET['id']!='') {

    // clean the values a litle bit to prevent code injection
    $ID = strip_tags(trim($_GET['id']));

    // prepare the query (more compatible string concatenation)
    $query = "SELECT ID, imagename FROM uploads WHERE ID IN (".$ID.") AND username = '".$uploader."'";

    // query the databse
    $result = mysql_query($query);

    // check for results
    if (is_resource($result) && mysql_num_rows($result)>=1) {

        // get total records
        $counter = mysql_num_rows($result);

        // run by each result found
        while($iName = mysql_fetch_array($result)) {

            // delete all from the database
            $querys = "DELETE FROM uploads WHERE ID IN (".$ID.") AND username = '".$uploader."'";
            $results = mysql_query($querys);

            // check if the returned result is false
            if (!$results) {

                // replace the user message with a fail information
                $api_message = 'Failed to get a Removal result';

            } else {

                // decrease the counter
                $counter--;

                // update the user message and add a "," if this is not the last name
                $api_message.= $iName['imagename'] . (($counter==0)?(''):(', '));

            }
        }

    } else {
        $api_message = 'ups... failed to talk with the database';
    }

} else {
    $api_message = 'ups... no ids collected';
} 
```

**相关阅读：**

*   [PHP strip_tags](http://php.net/manual/en/function.strip-tags.php)

    > strip_tags — 从字符串中去除 HTML 和 PHP 标记

*   [PHP 修剪](http://php.net/manual/en/function.trim.php)

    > trim — 从字符串的开头和结尾去除空格（或其他字符）

*   [PHP is_resource](http://php.net/manual/en/function.is-resource.php)

    > is_resource — 查找变量是否为资源

# iphone - if([aString writeToFile: @"outfile" atomically: YES])

> ID：11370969
> 
> 赞同：0
> 
> 时间：2012-07-06T23:38:33.597
> 
> 标签：iphone, objective-c, ios

对于一些代码，如

```
if([aString writeToFile: @"outfile" atomically: YES]) 
```

我想知道 atomically 是参数还是参数名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:48:10.320

参数名称将是变量的名称。我想您可以将其称为参数，但在我看来，参数是一个非常笼统的术语。

我认为正确的说法是它是方法名称，它是它的一部分。只是你可以在两者之间有参数来拆分它。

顺便说一句，这是我在目标 c 中喜欢的东西之一，多亏了它，代码变得如此可读:)

# browser - 特定站点的浏览器中烦人的 Facebook 弹出窗口 (?)

> ID：11370970
> 
> 赞同：-2
> 
> 时间：2012-07-06T23:38:39.563
> 
> 标签：browser, popup

我不知道如何称呼这些元素。请看附图。

![烦人的弹窗](../Images/0c5fa8e3439acd567166e009662baa7e.png)

每次我打开一个特定的网站 ( [http://www.bdnews24.com/bangla/](http://www.bdnews24.com/bangla/) )，这个窗口就会出现在左下方。这与 Firefox 或 Chromium 浏览器无关。阻止弹出窗口没有帮助。

我可以通过单击十字架来关闭这个害虫，但它会在大约五分钟后再次出现。这是一个新闻网站，它会在特定时间后自行刷新。因为我经常从这个网站上阅读新闻，所以这个自动刷新对我来说是一个必要的功能。

请告诉我如何停止这些弹出窗口。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:58:20.787

试试[http://adblockplus.org/en/](http://adblockplus.org/en/)。它不会停止弹出窗口，但会停止弹出窗口中的内容。

# ruby-on-rails - 在尝试取消已捕获的平衡付款的暂停时，为什么响应为 is_void == true 的暂停？

> ID：11370973
> 
> 赞同：2
> 
> 时间：2012-07-06T23:39:34.683
> 
> 标签：ruby-on-rails, ruby, balanced-payments

使用 Balanced Payments ruby​​ gem (https://github.com/balanced/balanced-ruby) 并在捕获`Balanced::Hold#void`的实例上使用该方法时`Balanced::Hold`，我们得到一个`Balanced::Hold`属性`is_void`设置为`true`.

这似乎没有意义......这是所需的功能吗？

这是 rails 控制台的输出： [https ://gist.github.com/3063419](https://gist.github.com/3063419)

我不确定这是否是所需的功能。如果有人认为这没有意义，很高兴将其记录为问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T00:20:01.207

啊，似乎[lib/balanced/resources/hold.rb#L26中的](https://github.com/balanced/balanced-ruby/blob/1d33fd665a0790f698fd340f117d9198be4a1a50/lib/balanced/resources/hold.rb#L26)[Balanced](https://github.com/balanced/balanced-ruby)客户端没有处理调用时抛出的异常。`save`

正确的解决方法是：

```
def void
  self.is_void = true
  begin
     save
  rescue Balanced::Error
     self.is_void = false
     raise
  end
end 
```

我将提交一个 github 问题。

# c - 需要帮助编译一些东西！（：

> ID：11370975
> 
> 赞同：0
> 
> 时间：2012-07-06T23:39:35.580
> 
> 标签：c, linux, gcc

我正在帮助 IM 的开发人员测试他们的安全性和问题，他们想要一个在他们的服务器上报告的 tcp 重置漏洞的示例。我在编译时遇到问题，有人可以帮忙吗？错误日志： http: [//pastie.org/4212921](http://pastie.org/4212921)

C文件： [http ://www.exploit-db.com/download/291](http://www.exploit-db.com/download/291)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T02:22:12.410

从第一个报告的错误开始几乎总是一个好主意。

在您的情况下，第一个报告的错误是：

```
reset-tcp.c:51: error: ‘u_char’ undeclared (first use in this function) 
```

`u_char`不是标准的 C 类型；它可能是`unsigned char`.

您的源文件具有以下`#include`指令：

```
#include <libnet.h>
#include <stdio.h> 
```

`<stdio.h>`can't define `u_char`，所以它必须在-- 特别是在源文件所依赖`<libnet.h>`的任何版本中定义。`<libnet.h>`

这是一个非标准的头文件（它没有安装在我的系统上），所以我最好的猜测是你使用的 libnet 版本与`reset-tcp.c`设计使用的版本不同。

我知道这不能解决你的问题，但它应该给你一个很好的起点。

**编辑 ：**

我刚刚在我的 Ubuntu 12.04 系统（版本 1.1.4-2.1 ）上安装了`libnet1`、`libnet1-dev`和包。您的源文件现在编译（在加入第 74 和 75 行之后）并带有一些警告。类型定义在 中，间接包含在 中。`libnet1-doc``libnet1``u_char``/usr/include/i386-linux-gnu/sys/types.h``libnet.h`

我确实收到了一些警告：

```
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 3 has type ‘u_char *’ [-Wformat]
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 4 has type ‘u_char *’ [-Wformat]
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 5 has type ‘u_char *’ [-Wformat]
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 6 has type ‘u_char *’ [-Wformat]
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 7 has type ‘u_char *’ [-Wformat]
291.c:95:1: warning: format ‘%X’ expects argument of type ‘unsigned int *’, but argument 8 has type ‘u_char *’ [-Wformat]
291.c:116:1: warning: format ‘%i’ expects argument of type ‘int’, but argument 2 has type ‘long unsigned int’ [-Wformat] 
```

你绝对应该注意的；该代码当前尝试将`int`值存储在`u_char`( `unsigned char`) 对象中。

**建议：**

1.  `libnet`告诉我们您使用的是什么操作系统和版本；如果我们有这些信息，有人可能会提供更好的建议。

2.  让我们知道该源代码的来源，看看您是否可以找出`libnet`它应该使用的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:03:34.753

您需要安装`libnet`及其开发包。

在 Debian 下，您可以通过安装软件包`libnet1`和`libnet-dev`.

# javascript - Android WebView：有没有办法获取 javascript 堆栈跟踪？

> ID：11370976
> 
> 赞同：4
> 
> 时间：2012-07-06T23:39:37.640
> 
> 标签：javascript, android, webview, stack

如果您在 WebView 中运行 javascript，是否有办法让该 javascript 获取当前堆栈的字符串表示形式以进行调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:37:00.333

@AndyRay 将我指向 eriwen.com/javascript/js-stack-trace。您可能可以使用它，但我只是在那里使用了基本功能，现在使用：

```
console.log("blah blah" + new Error("stack trace").stack) 
```

此外，在我的 js 文件的底部，我现在执行以下操作：

```
//@ sourceURL=snarkloading.js 
```

snarkloading.js是文件的名称（它可以包含斜杠）*。*当通过 eval 包含文件时，这使得从堆栈跟踪中获取行号和文件名成为可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T09:15:23.757

当我使用 webpack 时，error.stack 并不完美，它显示 bundle.js 回溯，但我希望源回溯

这是我的[解决方案](https://stackoverflow.com/a/70346537/6011193)，使用“stacktrace-js”将捆绑回溯转换为源回溯，然后输出到控制台

# c# - 鼠标悬停在菜单选项上

> ID：11370977
> 
> 赞同：1
> 
> 时间：2012-07-06T23:39:38.120
> 
> 标签：c#, xna

我的鼠标悬停在菜单上时遇到问题。当鼠标悬停在它们上方时，我试图突出显示各种菜单选项，但不确定我做错了什么。不是的，当我将鼠标移到它们上时，它会非常快速地循环它们。任何帮助将不胜感激。问题出在更新功能或测量菜单功能中。顺便说一句，我的键盘部分工作正常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Blocks
{
    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class MenuComponents : Microsoft.Xna.Framework.DrawableGameComponent
    {
        string[] menuItems;
        int selectedIndex;

        Color normal = Color.White;
        Color hilite = Color.Yellow;

        KeyboardState keyboardState;
        KeyboardState oldKeyboardState;

        SpriteBatch spriteBatch;
        SpriteFont spriteFont;

        Vector2 position,size;
        float width = 0f;
        float height = 0f;

        MouseState mouseState;
        Rectangle area;

        public int SelectedIndex
        {
            get { return selectedIndex; }
            set
            {
                selectedIndex = value;
                if (selectedIndex < 0)
                    selectedIndex = 0;
                if (selectedIndex >= menuItems.Length)
                    selectedIndex = menuItems.Length - 1;
            }
        }

        public MenuComponents(Game game, SpriteBatch spriteBatch, SpriteFont spriteFont, string[] menuItems)
            : base(game)
        {
            // TODO: Construct any child components here
            this.spriteBatch = spriteBatch;
            this.spriteFont = spriteFont;
            this.menuItems = menuItems;
            MeasureMenu();
        }

        private void MeasureMenu()
        {
            height = 0;
            width = 0;

            foreach (string item in menuItems)
            {
                size = spriteFont.MeasureString(item);
                if (size.X > width)
                    width = size.X;
                height += spriteFont.LineSpacing + 5;
            }

            position = new Vector2((Game.Window.ClientBounds.Width - width) / 2,
                ((Game.Window.ClientBounds.Height - height) / 2) + 50);

            int positionX = (int) position.X;
            int positionY = (int) position.Y;
            int areaWidth = (int) width;
            int areaHeight = (int) height;

            //for (int i = 0; i < area.Length; i++)
            //{
                area = new Rectangle(positionX, positionY, areaWidth, areaHeight);
            //}
        }

        /// <summary>
        /// Allows the game component to perform any initialization it needs to before starting
        /// to run.  This is where it can query for any required services and load content.
        /// </summary>
        public override void Initialize()
        {
            // TODO: Add your initialization code here
            base.Initialize();
        }

        private bool CheckKey(Keys theKey)
        {
            return keyboardState.IsKeyUp(theKey) &&
                oldKeyboardState.IsKeyDown(theKey);
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Update(GameTime gameTime)
        {
            // TODO: Add your update code here
            keyboardState = Keyboard.GetState();
            mouseState = Mouse.GetState();

            Point mouseLocation = new Point(mouseState.X, mouseState.Y);

            if (CheckKey(Keys.Down))
            {
                selectedIndex++;
                if (selectedIndex == menuItems.Length)
                    selectedIndex = 0;
            }
            if (CheckKey(Keys.Up))
            {
                selectedIndex--;
                if (selectedIndex < 0)
                    selectedIndex = menuItems.Length - 1;
            }
            if (area.Contains(mouseLocation))
            {
                selectedIndex++;
                if (selectedIndex == menuItems.Length)
                    selectedIndex = 0;
                if (selectedIndex < 0)
                    selectedIndex = menuItems.Length - 1;

            }

            base.Update(gameTime);
            oldKeyboardState = keyboardState;
        }

        public override void Draw(GameTime gameTime)
        {
            base.Draw(gameTime);
            Vector2 location = position;
            Color tint;

            for (int i = 0; i < menuItems.Length; i++)
            {
                if (i == selectedIndex)
                    tint = hilite;
                else
                    tint = normal;

                spriteBatch.DrawString(spriteFont, menuItems[i], location, tint);
                location.Y += spriteFont.LineSpacing + 5;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:56:00.377

```
if (area.Contains(mouseLocation))
            {
                selectedIndex++;
                if (selectedIndex == menuItems.Length)
                    selectedIndex = 0;
                if (selectedIndex < 0)
                    selectedIndex = menuItems.Length - 1;

            } 
```

如果您将鼠标悬停在任何矩形上，该代码会使 selectedIndex 再增加一个。这可以解释每一个循环。

您需要检查每个菜单项的矩形，并适当地设置 selectedIndex。

伪代码：

for (int i = 0; i<= menuItems.Count;i++) { Rectangle rect = new Rectangle(position.X,position.Y + (i * heightOfMenuItemAndOffset),Width,Height);

鼠标.GetState(); 点 m​​ouseLocation = new Point(mouseState.X, mouseState.Y); if (area.Contains(mouseLocation) { selectedIndex = i; }

}

类似的东西。

# android - HTML 文本输入未在 Droid 中显示

> ID：11370991
> 
> 赞同：0
> 
> 时间：2012-07-06T23:43:03.093
> 
> 标签：android, css, twitter-bootstrap, textinput

出于某种原因，在 Droid 上，我的`<input type="text">`字段显示不正确。在用户进入下一个字段之前，它不会向用户显示输入的内容。我查看了一些在线论坛，似乎这可能是 Droid 内部问题。但是，尽管如此，有什么办法可以解决吗？（注意：我正在使用 bootstrap.js 并且输入字段从它继承 CSS 样式。不确定 bootstrap 是否与 Droid 配合得很好？）

这是我的 HTML 输入字段（不确定是否重要）：

```
<label for="firstName">First Name*</label>
<input type="text" class="requiredInput" name="firstName" value="">
<label for="lastName" class="">Last Name*</label>
<input type="text" class="requiredInput" name="lastName" value=""> 
```

这是适用于字段的 CSS，除了 bootstrap.js CSS：

```
width: 100%;
box-sizing: border-box;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
padding: 12px 4px;
margin-bottom: 12px; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:58:05.100

我删除了除了 margin-bottom 之外的所有 CSS 样式（这样它就变成了一个看起来非常简单的输入字段）并且它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-16T12:17:47.527

我有同样的问题，解决方案是减少填充顶部和填充底部