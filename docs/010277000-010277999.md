# StackOverflow 问答 10277000-10277999

# android - 通过 android-ndk 读取自己的文件名？

> ID：10277001
> 
> 赞同：0
> 
> 时间：2012-04-23T08:11:39.853
> 
> 标签：android, android-ndk

我想通过本机代码（ndk）读取我自己的文件名/路径（即我自己的 apk 路径）。是否可以阅读？

谢谢，切坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:46:30.880

您可以在 Java 代码中获得自己的 .apk 路径，然后将其传递给您的本机代码。仅使用 1（一！）行本机代码不太可能达到相同的结果：

```
String my_apk_path = context.getApplicationInfo().sourceDir; 
```

# html - 在哪里可以找到带有网络安全字体的列表？

> ID：10277002
> 
> 赞同：7
> 
> 时间：2012-04-23T08:11:41.163
> 
> 标签：html, css, fonts, frontend

根据您在前端和 Web 应用程序方面的经验，您能否提供良好且可靠的源代码或带有 Web 安全字体的列表？或者任何其他确保网络浏览器字体安全的好工具？

大多数时候我都在使用[Squirrel Fonts](http://www.fontsquirrel.com/)，但是我的设计师使用的很多字体都被阻止在那里，我可以展示它们的唯一方法是 PNG。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T08:16:42.480

没有绝对的安全性，除非您使用“serif”、“sans-serif”等通用类。

这里有一些资源可以让您了解最流行的字体：

*   [https://web.archive.org/web/20160610001431/http://www.awayback.com/revised-font-stack/](https://web.archive.org/web/20160610001431/http://www.awayback.com/revised-font-stack/)
*   [http://cssfontstack.com/](http://cssfontstack.com/)

您会看到所有操作系统上都不存在单一字体。您可以做的最好的事情是使用覆盖最大百分比并希望最好的**字体堆栈。**使用合理的字体堆栈是要走的路……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:14:47.983

您也可以从这里生成字体[http://www.font2web.com/](http://www.font2web.com/)并且您也可以使用 Google 字体[http://www.google.com/webfonts](http://www.google.com/webfonts)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-20T03:15:22.293

我没有找到明确的网络安全字体列表。这项研究给了我一些基本的想法，但后来我不得不在自己的机器上进行实验。我想要可以在 Windows、Mac 和 Linux 机器上运行的东西。幸运的是，我各有一个。

HTML 可以识别的字体有 5 种，分别是 serif、sans-serif、monospace、fantasy 和 cursive。但是，我自己看到了 6 种类型，草书在我的脑海中分解为脚本和手写字体。我想出的“网络安全”字体堆栈如下：

```
/* Web Safe Font Stacks */
.head { font-family: Georgia, 'Times New Roman', serif; } /* H1-H6 */
.para { font-family: Verdana, Arial, sans-serif; } /* Paragraphs, body text */
.mono { font-family:'Courier New', Courier, monospace; } /* code, pre, etc. */
.fant { font-family: Papyrus, Impact, fantasy; } /* Fantasy */
.curs { font-family:'Apple Chancery', 'Lucida Calligraphy', cursive; } /* Cursive */
.hand { font-family:'Comic Sans MS', Chalkboard, cursive; } /* Handwritten */ 
```

我希望这会有所帮助...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T10:31:29.310

“安全”字体列表，如果这意味着在所有情况下，甚至在几乎所有情况下都能为您提供所需渲染的字体名称列表，那么它就是一个空列表。

例如，如果您在 Android 上测试它们，大多数声称的“网络安全字体”列表会立即失效。

如果你真的想问使用嵌入字体（带`@font face`）的问题，我建议你先查看前面的问题和答案。

# web-services - 在 RemObjects Web 服务中获取客户端 IP 地址

> ID：10277003
> 
> 赞同：5
> 
> 时间：2012-04-23T08:11:43.060
> 
> 标签：web-services, delphi, delphi-xe, remobjects

我有一个通过 Delphi XE 使用 RemObjects 实现的 web 服务，我想知道客户请求的 IP 地址。我的服务继承自[`TRORemoteDataModule`](http://wiki.remobjects.com/wiki/TRORemoteDataModule_Class)，我还没有找到任何方法或对象来做到这一点。

有什么建议吗？谢谢

注意：我认为我需要的信息是在方法中`self.transport.GetTransportObject()`返回但它返回一个 TObject 我不知道如何提取这些信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:56:13.333

这就是我从 SuperChannel 获得它的方式：

```
procedure TMyInterface.RORemoteDataModuleGetDispatchInfo(const aTransport: IROTransport; const aMessage: IROMessage);
var
  tcpinfo: IROTCPTransport; 
  Session: TCustomSession;
  szClientIP : String;
begin
  Session := TCustomSession(Self.Session);
  if Supports(aTransport, IROTCPTransport, tcpinfo) then
  begin
    szClientIP := tcpinfo.ClientAddress;
    if (not Session.ShownTCP) or (Session.TCPAddress <> szClientIP) then
    begin
      Session.TCPAddress := szClientIP;
      Session.Report(leInformation, 'TCP address ' + szClientIP); 
      Session.ShownTCP := True; 
    end; 
  end 
  else 
  begin 
    Session.Report(leInformation, 'TCP address not available');
  end;
end; 
```

使用它的具体操作取决于您，但您必须在设置时获取它，并将其存储在会话对象中，如果您想稍后再使用它。我实现了一个自定义会话来保存客户端 IP，以便我可以在进一步的调用中随时获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:24:11.867

这是怎么做的

[http://wiki.remobjects.com/wiki/Server_FAQs_%28RemObjects_SDK%29#How_can_I_get_IP_address_of_the_remote_client.3F](http://wiki.remobjects.com/wiki/Server_FAQs_%28RemObjects_SDK%29#How_can_I_get_IP_address_of_the_remote_client.3F)

# html - 本地存储实例

> ID：10277004
> 
> 赞同：3
> 
> 时间：2012-04-23T08:11:46.253
> 
> 标签：html, local-storage

我正在开发一个手机游戏，所以我想存储每个登录用户的游戏进度（如果玩家处于游戏中期并且不小心关闭了网络浏览器。一旦他再次打开游戏，游戏就会从头开始并且玩家正在玩的游戏丢失。这样玩家可以稍后恢复游戏。）

因此，对于每个用户，我都会创建一个新的 localStorage 对象，但我在这里得到这个答案[Data supported by HTML5 Local Storage](https://stackoverflow.com/questions/10269334/data-supported-by-html5-local-storage/10270105#10270105) by "Jocelyne lecopmte" 。

所以这是不可能的吗？如果不是，我怎么能这样做？先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:30:42.363

这适用于游戏的任何单人游戏方面。您可以使用`JSON.stringify`和`JSON.parse`从 保存和加载对象`localStorage`。

```
var object = new Object();
object.score = 100;
object.name = "John";

localStorage.setItem("player1", JSON.stringify(object));
var copy = JSON.parse(localStorage.getItem("player1"));

console.log(copy.name); 
```

工作代码可以在[这里](http://jsfiddle.net/yXzKg/1/)找到。

# google-maps-api-3 - 如何重置谷歌地图v3动画中的步骤值

> ID：10277005
> 
> 赞同：1
> 
> 时间：2012-04-23T08:11:54.507
> 
> 标签：google-maps-api-3

这是我的示例[http://gidzior.net/map/v3_animate_marker_directions.html](http://gidzior.net/map/v3_animate_marker_directions.html)（我在输入中使用占位符），GM 代码的核心来自 geocodezip.com，我在 Andrew Leach 的大力帮助下开发了代码

动画中的1500米在目的地设置为缩放之前可以看到更好的到达这个目的地点，不幸的是，缩放之后，动画不流畅所以我将“步”值设置为15，动画后如何重置这个值停止

我设置步= 15 -`if (d>eol-1500 && zoomed!=true) { map.setZoom(15); step = 15; zoomed=true; }`

整个脚本

```
 var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.0000005, wait = 1;
  var infowindow = null;
  var zoomed;
  var zoomedd;
  var zoomeddd;

  var myPano;   
  var panoClient;
  var nextPanoId;
  var timerHandle = null;

  var size = new google.maps.Size(26,25);
  var start_point = new google.maps.Point(0,0);
  var foothold = new google.maps.Point(13,15);

  var car_icon = new google.maps.MarkerImage("http://gidzior.net/map/car.png", size, start_point, foothold);

function createMarker(latlng, label, html) {
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: car_icon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function initialize() {
  infowindow = new google.maps.InfoWindow(
    { 
      size: new google.maps.Size(150,50)
    });
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService();

    // Create a map and center it on Warszawa.
    var myOptions = {
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    address = 'warszawa'
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
       map.setCenter(results[0].geometry.location);
    });

    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
    }
    directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

    // Instantiate an info window to hold step text.
    stepDisplay = new google.maps.InfoWindow();

    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
  }

    var steps = []

    function calcRoute(){

if (timerHandle) { clearTimeout(timerHandle); }
if (marker) { marker.setMap(null);}
polyline.setMap(null);
poly2.setMap(null);
directionsDisplay.setMap(null);
    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
      suppressMarkers:true
    }
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var travelMode = google.maps.DirectionsTravelMode.DRIVING

        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode,
            waypoints: [{
                location:new google.maps.LatLng(52.185570, 20.997255),
                stopover:false}],
            optimizeWaypoints: false
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK){
    directionsDisplay.setDirections(response);

        var bounds = new google.maps.LatLngBounds();
        var route = response.routes[0];
        startLocation = new Object();
        endLocation = new Object();

        // For each route, display summary information.
    var path = response.routes[0].overview_path;
    var legs = response.routes[0].legs;
        for (i=0;i<legs.length;i++) {
          if (i == 0) { 
            startLocation.latlng = legs[i].start_location;
            startLocation.address = legs[i].start_address;
            // marker = google.maps.Marker({map:map,position: startLocation.latlng});
            marker = createMarker(legs[i].start_location,"start",legs[i].start_address,"green");
          }
          endLocation.latlng = legs[i].end_location;
          endLocation.address = legs[i].end_address;
          var steps = legs[i].steps;
          for (j=0;j<steps.length;j++) {
            var nextSegment = steps[j].path;
            for (k=0;k<nextSegment.length;k++) {
              polyline.getPath().push(nextSegment[k]);
              bounds.extend(nextSegment[k]);

            }
          }
        }

        polyline.setMap(map);
        document.getElementById("distance").innerHTML = (polyline.Distance()/1000).toFixed(2)+" km";
        map.fitBounds(bounds);
//        createMarker(endLocation.latlng,"end",endLocation.address,"red");
    map.setZoom(18);
    startAnimation();
    zoomed=false;
    zoomedd=false;
    zoomeddd=false;
    }                                                    
 });
}

      var step = 50; // 5; // metres
      var tick = 100; // milliseconds
      var eol;
      var k=0;
      var stepnum=0;
      var speed = "";
      var lastVertex = 1;

//=============== animation functions ======================
      function updatePoly(d) {
        // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
        if (poly2.getPath().getLength() > 20) {
          poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)]);
          // map.addOverlay(poly2)
        }

        if (polyline.GetIndexAtDistance(d) < lastVertex+2) {
           if (poly2.getPath().getLength()>1) {
             poly2.getPath().removeAt(poly2.getPath().getLength()-1)
           }
           poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(d));
        } else {
          poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng);
        }
      }

      function animate(d) {
// alert("animate("+d+")");
        if (d>eol) {;
          map.panTo(endLocation.latlng);
          marker.setPosition(endLocation.latlng);
          return;
        }
        if (d>eol-20000 && zoomeddd!=true) {
          map.setZoom(12); // or whatever value
          zoomeddd=true;
        }
        if (d>eol-10000 && zoomedd!=true) {
          map.setZoom(13); // or whatever value
          zoomedd=true;
        }
        if (d>eol-1500 && zoomed!=true) {
          map.setZoom(15); // or whatever value
          step = 15;
          zoomed=true;
        }
        var p = polyline.GetPointAtDistance(d);
        map.panTo(p);
        marker.setPosition(p);
        updatePoly(d);
        timerHandle = setTimeout("animate("+(d+step)+")", tick);
      }

function startAnimation() {
        eol=polyline.Distance();
        map.setCenter(polyline.getPath().getAt(0));
        // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
        // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
        // map.addOverlay(marker);
        poly2 = new google.maps.Polyline({path: [polyline.getPath().getAt(0)], strokeColor:"#0000FF", strokeWeight:10});
        // map.addOverlay(poly2);
        setTimeout("animate(50)",2000);  // Allow time for the initial map display
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:07:38.973

我设法做到了，无论如何，谢谢

我采取了 var step = 50; 到顶部

```
var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.0000005, wait = 1;
  var infowindow = null;
  var zoomed;
  var zoomedd;
  var zoomeddd;

  var step = 50; // 5; // metres

  var myPano;   
  var panoClient;
  var nextPanoId;
  var timerHandle = null; 
```

我设置步长 = 50；到 calcRoute() 函数的末尾，现在动画效果很好

# wpf - 在 Surface 应用程序中使用 WPF 控件

> ID：10277013
> 
> 赞同：0
> 
> 时间：2012-04-23T08:12:47.953
> 
> 标签：wpf, treeview, wpf-controls, pixelsense

我需要`TreeView`在我们的表面应用程序中进行控制。情况是我已经`TreeView`使用 infragistics 创建了一个实现`XamlDataTree`。我想知道这个控件集是否可以在 Surface 应用程序中使用（因为它是一个 WPF 应用程序）？

问题一般来说，您可以在表面环境中重用标准 WPF 控件吗？

Surface SDK 套件中是否已经有适合`TreeView`样式布局的工具？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:04:29.733

不了解 XamlDataTree，但一般来说，您可以在[Surface Presentation Layer Application](http://msdn.microsoft.com/en-us/library/ff727733.aspx)中使用任何 WPF 控件。

# c++ - c ++将特殊浮点值四舍五入为整数

> ID：10277014
> 
> 赞同：0
> 
> 时间：2012-04-23T08:12:50.927
> 
> 标签：c++, visual-studio

我在将一些特殊的浮点数四舍五入为整数时遇到了一些麻烦。我需要将浮点数舍入为整数（当且仅当）前三个浮点值为零或 9。

例如，如果数字是 4.0001，我需要将其四舍五入为 4。如果数字是 4.9998，我需要将其四舍五入为 5。除此之外，值应按原样显示。

换句话说，只有满足上述两个规则时，我才需要打印一个整数，否则我应该打印浮点数，

如何在 C++ 中实现这一点。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:20:27.430

如果你对小数部分感兴趣，`modf`是你的朋友。像这样说：

```
double
conditionallyRound( double original )
{
    double dummy;
    double frac = modf( fabs( original ), &dummy );
    return frac < 0.001 || frac > 0.999
        ? round( original )
        : original;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:15:27.343

如果`x`应该四舍五入，则`x`和之间的最大差值`round(x)`为 0.0001。

当然，您应该知道二进制浮点不能精确地表示 0.0001，因此这始终是一个近似值。

# objective-c - 如何释放块

> ID：10277017
> 
> 赞同：7
> 
> 时间：2012-04-23T08:13:24.477
> 
> 标签：objective-c, ios, memory-management, objective-c-blocks

当我的网络服务关闭并与我的服务器通信时，我正在存储我的块。因此我`[myBlock copy]`用来保持对我的块的引用。

获得数据并执行块后，我应该调用`[myBlock release]`还是使用`Block_release(myBlock)`？我可以找到两者的参考。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T08:18:18.813

`Block_release()`当您仅在 C 中使用块而不是 Objective-C 时是否存在。

使用 Objective-C 时，您可以使用`release`和`copy`方法使您的代码看起来和感觉更像围绕它的 ObjC 的其余部分。

我想他们都做同样的事情，而且 objc 方法只是对调用的包装器`Block_release()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T08:45:02.363

正如[参考资料中所解释的那样](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html#//apple_ref/doc/uid/TP40007502-CH5-SW6)，复制/释放的总和必须为零。因此，如果您使用的是 Objective-C，您可以`[block copy]`调用`[block release]`.

如果你使用 C，你应该使用`Block_copy()`and `Block_release()`。

正如 Jasarien 所写，它们可能正在做同样的事情，因此您可以互换使用它们。然而，保持约定一致很重要——所以当你使用时，`[block copy]`你宁愿使用而`[block release]`不是`Block_release()`

# ruby-on-rails - Rails 3.0.11 - 在 Internet Explorer 中，有时我们登录的用户会以某种方式从另一个用户那里获取会话

> ID：10277019
> 
> 赞同：0
> 
> 时间：2012-04-23T08:13:29.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, session-cookies

这很奇怪。我们使用 Authlogic 进行身份验证。
无论如何，这个网站已经上线两年了，我们现在才开始遇到这个问题。
奇怪的是在Internet Explorer中只有rails session cookie不存在，不知道它是否相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:51:27.650

听起来您的会话没有被破坏，一段时间后生成的会话密钥可能相同。检查数据库的会话数量并查看此帖子：

[Ruby on rails - Authlogic：定期检查用户会话是否有效](https://stackoverflow.com/questions/2203777/ruby-on-rails-authlogic-periodically-check-if-user-session-is-valid)

在用户模型上：

```
acts_as_authentic do |c|
  c.logged_in_timeout(5.minutes)
end 
```

...在 UserSession 模型上：

```
self.logout_on_timeout = true 
```

# php - 如何使用 PHP 验证下拉列表

> ID：10277020
> 
> 赞同：2
> 
> 时间：2012-04-23T08:13:29.143
> 
> 标签：php

我想使用 PHP 验证表单。以下是我的表格示例：

```
<form>
    <select name="select_box">
        <option value="0">Please Select</option>
        <option value="1">OPT 1</option>
        <option value="2">OPT 2</option>
    </select>
    <input type="submit" value="Go!" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:16:47.127

在您的 php 脚本中，您在哪里提交表单（在这种情况下，它与回显表单的脚本相同，因为您没有指定`action`并`method`归因于您的`<form>`），您可以通过 do 获取输入值`$_GET['name_of_input']`，在您的情况下：

`if(isset($_GET['select_box'])) { // do something with value of drop down`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:53:51.217

```
<?php 
if(isset($_REQUEST['select_box']) && $_REQUEST['select_box'] == '0') { 
  echo 'Please select a country.'; 
} 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:16:41.940

```
<?php
if ($_GET['select_box'] != '0') //form validation
{
 //your code here
}
?> 
```

# mysql - 根据顺序选择行的偏移量而不获取所有先前的行

> ID：10277025
> 
> 赞同：2
> 
> 时间：2012-04-23T08:13:42.507
> 
> 标签：mysql, offset

首先，我想说明这不是一个简单的`LIMIT x,y`问题。我想知道是否可以进行类似以下 peuso 查询的查询。

```
SELECT *, OFFSET_OF_ROW()
FROM `table` 
WHERE `some_column` = someValue 
ORDER BY `some_other_column`; 
```

`OFFSET_OF_ROW()`如果没有条件``some_column`= someValue` ，伪函数应该给出所选行（+1）之前的行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:37:02.840

这不是特别有效，但它会做你想要的：

```
select @rownum := 0;
select * from (
    select @rownum := @rownum + 1, id, some_column, sortcol
    from `table`
    order by `sortcol`
) all_rows 
where `some_column` = someValue; 
```

# android - 我可以将项目内容作为 jar 文件提供给另一个项目吗？

> ID：10277027
> 
> 赞同：1
> 
> 时间：2012-04-23T08:13:51.873
> 
> 标签：android, jar, libraries

嗨，我在 Eclipse 环境中开发的项目运行良好，我想将该项目用作资源或将其作为 jar 文件添加到另一个项目。如果可能，请告诉我如何执行此操作。对我有很大帮助。 ![在此处输入图像描述](../Images/84e659ec20657ac990f697ea46f3c446.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:03:31.417

理论上你可以像@Agarwal 描述的那样。

然而，adt-tools 还没有准备好做这件事

我最后一次失败的尝试是在[how-to-consume-reusable-gui-element-widget-with-resources-in-android 中记录的 adt-tools 版本 R17](https://stackoverflow.com/questions/9721860/how-to-consume-reusable-gui-element-widget-with-resources-in-android)

根据用户@CommonsWare R18 和 R19 仍然无法做到这一点（请参阅[replace-android-library-project-by-jar-library 中的评论](https://stackoverflow.com/questions/10176519/replace-android-library-project-by-jar-library/10176740#10176740)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:18:30.357

您可以通过 Android Library 项目来完成。

请参阅此[链接](http://developer.android.com/guide/developing/projects/projects-eclipse.html)。描述如何将项目设置为库项目。引自其内容

================= 引用=================== 接下来，设置项目的Properties表明它是一个库项目：

```
1) In the Package Explorer, right-click the library project and select Properties.

2) In the Properties window, select the "Android" properties group at left and locate the Library properties at right.

3) Select the "is Library" checkbox and click Apply.

4)  Click OK to close the Properties window. 
```

=============== 未引用 =============================

因此，您打开项目属性并“取消选择”“是库”复选框并单击应用以使您的项目成为普通的 Android 项目（而不是库项目）。

# php - 使用 PHP 以编程方式将非参数 Oracle 查询解析为参数查询？

> ID：10277028
> 
> 赞同：0
> 
> 时间：2012-04-23T08:13:56.187
> 
> 标签：php, sql, oracle, parsing, parameters

也许是一个愚蠢的问题，但我正在考虑以编程方式将非参数查询解析为参数查询以满足我们的数据库管理员。

我的想法有什么问题吗（根据这个话题）？有没有人做过这样的事情？

'语言' 将是 php

ig

`SELECT * FROM TABLE WHERE PARAM1 = 'foo' AND PARAM2='bar'`

将被解析为

`SELECT * FROM TABLE WHERE PARAM1 = :p1 AND PARAM2=:p2`

并且参数将由`oci_bind_by_name(...)`

这感觉有点脏，但也许我错过了一点，这种方式完全是垃圾。

任何的建议都受欢迎

# ssis - 如何在 SSIS 中删除 Cube 分区

> ID：10277029
> 
> 赞同：0
> 
> 时间：2012-04-23T08:13:57.817
> 
> 标签：ssis, cube

如何在 SSIS 中删除多维数据集分区？我看过[这个](http://consultingblogs.emc.com/jamiethomson/archive/2008/09/15/ssis-create-analysis-services-partitions-from-a-ssis-package.aspx)例子，它展示了如何在 SSIS 中创建多维数据集分区，但我找不到删除多维数据集分区的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:26:41.977

使用 AMO，Partition 对象具有 Drop 方法。

```
myPartition = myMeasureGroup.Partitions.FindByName("Partition_Name");
if ( myPartition != null)
     myPartition.Drop(); 
```

# multithreading - JUnit 线程测试

> ID：10277030
> 
> 赞同：3
> 
> 时间：2012-04-23T08:14:00.960
> 
> 标签：multithreading, unit-testing, junit

我的应用程序中有客户端和服务器线程。当我将这些应用程序作为独立应用程序运行时，这些线程可以正常通信。

但是，当我将客户端作为 JUnit 运行并将服务器作为独立运行时，客户端线程会在几秒钟内死亡。

我不明白，为什么会有如此不同的行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T08:26:46.093

当 JUnit 运行程序终止时，所有生成的线程等也会被杀死（因为它很可能在单独的 JVM 实例中运行）。

这是一篇（相当旧的）[文章，描述了您遇到的问题](http://today.java.net/pub/a/today/2003/08/06/multithreadedTests.html)（虽然它推荐的 GroboUtils 库似乎很久以前就被放弃了）。[另一个，最近的一个](http://garygregory.wordpress.com/2011/09/09/multi-threaded-unit-testing/)，使用新的 Java 并发框架提供了一个更现代的解决方案。

后一种解决方案的要点是它通过执行程序运行线程，执行程序通过`Future`s 发布运行结果。并且`Future.get`在线程完成任务之前一直处于阻塞状态，自动保持 JUnit 测试处于活动状态。您也许可以根据您的情况调整此技巧。

# android - 获取空指针异常错误

> ID：10277032
> 
> 赞同：0
> 
> 时间：2012-04-23T08:14:32.207
> 
> 标签：android

我从 XML 文件中获取数据，如下所示：-

```
 <posts>
          <page id="1">
                      <title>
                            <![CDATA[ Tile no. 1 ]]>
                      </title>

                      <smallimage>
                                 http://www.xyz.com/right.jpg
                      </smallimage>
          </page>

          <page id="2">
                      <title>
                            <![CDATA[ Tile no. 2 ]]>
                      </title>
          </page>

          <page id="3">
                      <title>
                            <![CDATA[ Tile no. 3 ]]>
                      </title>

                      <smallimage>
                                 http://www.xyz.com/left.jpg
                      </smallimage>
          </page>
  </posts> 
```

这是我的 XML 示例，我在其中获取元素，并且在单个 url 中获取 10 个页面，其中存在 10 个，但没有预设 10 个。它可能是 3 或 6 或 1。

在我的代码中，我使用 SAX 解析器来解析这个 XML 文件，我正在获取我的数据并能够在列表视图上显示，但我能够用它们显示图像。

为了显示图像，我使用 LazlyList 示例（ImageLoader 类）。

下面是我的代码：-

MainActivity.java

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    static final String URL = "http://www.xyz.com/api.php?page_id=1";

    ItemList itemList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        XMLParser parser = new XMLParser();
        String XML = parser.getXmlFromUrl(URL);

        System.out.println("This XML is ========>"+XML);

       try
       {
           SAXParserFactory spf = SAXParserFactory.newInstance();
           SAXParser sp = spf.newSAXParser();
           XMLReader xr = sp.getXMLReader();

           /** Create handler to handle XML Tags ( extends DefaultHandler ) */
           MyXMLHandler myXMLHandler = new MyXMLHandler();
           xr.setContentHandler(myXMLHandler);

           ByteArrayInputStream is = new ByteArrayInputStream(XML.getBytes());
           xr.parse(new InputSource(is));
      }
      catch(Exception e)
      {

      }

      itemList = MyXMLHandler.itemList;

      ArrayList<String> listItem= itemList.getTitle();
      ArrayList<String> listManu = itemList.getSmallimages();

      System.out.println("(ListItem)=======>"+listItem);
      System.out.println("(ListManu)=======>"+listManu);

    //  String ar[];
      Object obj[]=listManu.toArray();
      String[] stringArray=Arrays.asList(obj).toArray(new String[obj.length]);
      System.out.println("Array to String"+Arrays.toString(stringArray));
     // ar=(String[]) listManu.toArray();

     ListView lview = (ListView) findViewById(R.id.listview1);
     myAdapter adapter = new myAdapter(this, listItem, stringArray);
     lview.setAdapter(adapter);        

} 
```

我的适配器.java

```
public class myAdapter extends BaseAdapter 
{
    ArrayList<String> listTitle;
    String [] data;
    ImageLoader imageLoader;

    Activity activity;

    public myAdapter(Activity activity, ArrayList<String> listTitle, String[] d) {
        super();
        this.listTitle = listTitle;
        this.data = d;

        this.activity = activity;
        this.imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return data.length;

    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    private class ViewHolder
    {
        TextView txtViewTitle;
        ImageView image;

    }

    public View getView(int position, View view, ViewGroup parent) {
        // TODO Auto-generated method stub

        ViewHolder title;
        LayoutInflater inflater = activity.getLayoutInflater();

        if(view==null)
        {
            view = inflater.inflate(R.layout.lview_row, null);
            title = new ViewHolder();

            title.txtViewTitle = (TextView) view.findViewById(R.id.txtItem);
            title.image = (ImageView) view.findViewById(R.id.list_image);

            view.setTag(title);
        }
        else
        {
            title = (ViewHolder) view.getTag();
        }

        title.txtViewTitle.setText(listTitle.get(position));

        imageLoader.DisplayImage(data[position], title.image);

        return view;
    }
} 
```

\

当我使用 return data.length 时，我得到的只是图像和平铺。的图像存在，因为 String [] 只存储图像而不是空格......

```
public int getCount() {
            return data.length; 
```

但是当我将 data.length 更改为 listTitle.size()

```
public int getCount() {
            return listTitle.size(); 
```

获取空指针异常我正在使用 listTilte.size() 因为它给出了完整的列表......

任何人请建议我如何解决这个问题并在列表视图中获取图像和完整的标题数据以及图像存在的地方只有我会得到带有标题的图像，否则只有标题显示在列表视图中......

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:00:16.943

如果不查看您的 MyXMLHandler 的源代码，就不容易为您提供帮助。使用解析 XML 是一件非常痛苦的事情，您正在获取的数据，您是否还控制生成数据的服务器？如果是这样，我强烈建议您改为通过 JSON 发送...

JSON 是一种以类似 javascript 的语法编写对象的方式，易于机器解析，您的列表可能如下所示：

```
{"posts:":
  [ 
    {"pageId": 1, "title":"sometitle", "smallImage":"someimage.png"},
    {"pageId": 2, "title":"sometitle", "smallImage":"someimage.png"},
    {..... etc }
  ]
} 
```

要在 PHP 中创建它，您所要做的就是：

```
class PostsList {
  var $posts = array();
}

class Post {
 var $pageId;
 var $title;
 var $smallImage;
 function Post($pageId, $title, $smallImage) {
  $this->pageId = $pageId; $this->title = $title; $this->smallImage = $smallImage;
 }
}
$posts = new PostsList();
$posts->posts[] = new Post(1, "some title", "image.png");
$posts->posts[] = new Post(2, "some other title", "image2.png");

echo json_encode($posts); 
```

现在在java中你制作相同的对象：即

```
class PostsList { 
  public ArrayList<Post> posts; 
}
class Post { 
  public int pageId; 
  public String title; 
  public String smallImage;
} 
```

然后你得到 GSON（它在 android 中工作），然后你做：

```
Gson gson = new GsonBuilder().create();
String jsonData = getDataFromServer();
PostsList gotFromServer = gson.fromJson(jsonData, PostsList.class); 
```

瞧！您已经将所有帖子都解析为 java 对象，您甚至可以将 PostsList 对象制作为适配器以与列表一起使用...

在我更加熟悉 JSON 之后，我已经停止使用 XML 进行 RPC，JSON 数据使用起来非常容易，以后添加或删除字段也很容易......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:44:12.133

如果在使用时出现 nullpointerexception，`listTitle.size();`则 listTitle 未初始化。

您的代码示例不包含 listTitle 的代码，但在 getter 中除外。

# c++ - 如何在 cuda 中获取 cutil64D.lib 文件

> ID：10277039
> 
> 赞同：0
> 
> 时间：2012-04-23T08:15:22.127
> 
> 标签：c++, cuda, gpu

我正在尝试构建一个 cuda 程序，但它给了我错误，因为找不到 cutil64D.lib 文件。

我尝试通过在 vs 2008 中打开 cutil_vs2008.sln 解决方案文件并构建它来构建文件，但我仍然没有得到 cutil64D.lib。

请给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:38:53.140

构建 cutil_vs2008.sln 时需要将平台设置为**x64**和**调试模式。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T09:07:52.893

CUTIL 是一个简单的实用程序库，旨在用于 CUDA SDK 示例，而不是 CUDA 的一部分。

您可以在 %SDK_Dir%\C\common\cutil_vs2008.sln 下构建解决方案，方法是将平台设置为**x64**并将模式设置为**debug**，然后您将在 %SDK_Dir%\C\common\lib\x64 下获得所需的内容。

但是，如果你已经在某个目录下有这个库，设置平台和模式错误可能会导致上面的“找不到库”错误。

# c++ - linux c++中的内存释放？

> ID：10277043
> 
> 赞同：0
> 
> 时间：2012-04-23T08:15:40.263
> 
> 标签：c++, linux, memory, malloc, free

在我的应用程序中，我使用 为我的变量 ( `unsigned char*`)`malloc()`分配了内存，当尝试在析构函数中释放该内存时，我使用此条件来避免双重损坏。

```
unsigned char *wsqData;
wsqData= (unsigned  char *)malloc( 10000*sizeof( unsigned char)); 
```

在我的析构函数中

```
 if(wsqData!=NULL)
  {
      free(wsqData);
      wsqData=NULL;
  } 
```

现在的问题是，当我在析构函数之前释放内存时，这个“如果条件”无法正常工作，它再次尝试释放该变量，导致双重损坏错误。在这种情况下有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:19:31.320

调用`free`内存不会自动将指针设置为`NULL`，因此您的条件毫无意义。你需要设置`wsqData`到`NULL`你释放它的任何地方。

当然，无论如何，条件都是没有意义的，因为对`NULL`指针调用 free 可以保证是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:19:08.247

当您在析构函数之外释放内存时，您需要设置`wsqData`为`NULL`。但在 C++ 中，您应该使用`new`and `delete`。并尽量避免在析构函数之外的任何地方释放内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:29:15.873

正如其他人指出的那样，您还需要在每次释放它时设置为 NULL。使它成为一个函数 - 释放 var 然后将其设置为 NULL，并从析构函数和程序中的任何位置调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:23:36.507

仅供参考：这是[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)的经典示例。您需要`wsqData`按照`NULL`建议设置。

# java - 存储十六进制值

> ID：10277046
> 
> 赞同：1
> 
> 时间：2012-04-23T08:15:42.387
> 
> 标签：java, hex

我有一个大约 30 个十六进制值 0x01、0x02 的序列...我的问题是如何将这些值存储在 Java 中。我不知道将其转换为字符串并存储是否重要。但这就是我不想要的。我只想将十六进制存储为常量数据。还请考虑表示十六进制形式的内容以及它是否/会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:19:18.523

您应该`Integer`使用[Integer.valueOf(String s, int radix)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String,%20int%29)方法将它们存储为 s。

在您的情况下，基数是 16。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:24:36.420

十六进制只是一种显示数字的格式，就像十进制、二进制或八进制一样。数字只是数字 - 十六进制不是数字本身的属性，它只是显示数字的一种方式。

在源代码中将数字写为`0x01`,等与将它们写为十进制等`0x02`完全相同。`1``2`

因此，您可以像存储任何其他数字一样存储数字 - 例如作为`int`s 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:19:23.487

只需将它们存储在一个整数中（如果它适合值范围）......显示它们时，将其转换为十六进制。

# wcf - WCF / Castle的内存泄漏

> ID：10277049
> 
> 赞同：3
> 
> 时间：2012-04-23T08:15:59.600
> 
> 标签：wcf, memory-leaks, castle-windsor, wcf-data-services

我们的 MVC3 Web 应用程序和 WCF 数据层服务之间存在内存泄漏问题。

我相信问题出在 WCF 方面，尽管无法追踪。我搜索了网络和这些论坛，但无法找到原因。任何帮助将非常感激！

所以 - 最初的症状是与后端相关的 w3wp 进程的大小不断增长。我们可以看到，每次从调用服务的 Web 应用程序进行简单调用时，它都会以可变的数量增长（数量级 100kb）。

针对应用运行 Jetbrains 内存配置文件，我们可以看到

```
System.ServiceModel.Channels.TransmissionStrategy.SlidingWindow 
```

是罪魁祸首。在应用程序启动时，有 4 个对象实例化了少量内存（占总数的 6.4%），在轻度使用后增加到 > 200 个对象，约占总数的 50%。持续使用将其推向 100%。我以前从未听说过这个，但是一些谷歌搜索表明它（除其他外）用于与 WCF 层之间的数据传输。

我目前的思路是正在创建流程，但从未正确发布。我们的服务是从 Castle 创建的，并从 Web 端注册为：

```
public static IWindsorContainer RegisterWcfService<TS, TI>(this IWindsorContainer container)
 where TI : TS
 where TS : class
{
 container.Register(Component.For<TS>().ImplementedBy<TI>().Named(typeof(TI).Name)
     .Interceptors<LoggingInterceptor>()
     .Interceptors<ExceptionHandlerInterceptor>()
     .LifeStyle.Transient
     .AsWcfService(
        GetServiceModel<TS, TI>()
        ));

 return container;
} 
```

正如其他线程中所建议的，我们正在使用

```
container.Kernel.ReleasePolicy = new NoTrackingReleasePolicy(); 
```

以确保正确释放组件。我们没有明确地处理我们的任何服务引用，尽管我相信以上内容就足够了。有人对我们的泄漏可能来自哪里有任何建议或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:29:54.757

不幸的是，手动管理 WCF 代理的处置是确保为垃圾收集释放内存和释放网络资源的最可靠方法。这篇[简短的博客文章](http://omaralzabir.com/do-not-use-using-in-wcf-client/)解释了导致 WCF 代理泄漏内存和网络资源的一些问题。由于您已经将容器配置为创建瞬态代理实例，因此您应该将服务调用逻辑包装在类似于本文中所示的模式中。

如果这不能解决您的问题，您可能需要使用 WinDbg 遍历内存转储，以找到实际的 GC 根目录持有对`SlidingWindow`实例的引用链。

PS：不要试图使用更长寿命的范围（请求或灭亡思想，单身）来尝试解决这个问题。解决方案是正确处理代理实例。我发现这很困难... ;-）

# mysql - 无法使用 SOURCE 命令运行 sql 文件 windows 命令行

> ID：10277051
> 
> 赞同：8
> 
> 时间：2012-04-23T08:16:21.340
> 
> 标签：mysql, sql, phpmyadmin, xampp

嗨，我正在使用`windows 7, xampp`

. 我正在尝试`sql`使用 ut 运行文件`CMD`它给了我一个错误

```
ERROR:
Unknown command '\x'. 
```

这就是我正在做的

![在此处输入图像描述](../Images/21d3cd7bea425db81daf582de3e54249.png)

此命令不起作用

```
mysql> SOURCE C:\xampp\htdocs\elephanti2\db\mas_gis_city_ip.sql; 
```

`phpmyadmin`*** 当我尝试转到并导入文件时，另一个问题可以正常工作。

为什么会发生这种情况，我不知道，请帮助........

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T08:24:07.963

我原来的答案：

```
mysql> SOURCE C:\\xampp\\htdocs\\elephanti2\\db\\mas_gis_city_ip.sql; 
```

您也可以尝试执行如下命令：

```
mysql> SOURCE C:/xampp/htdocs/elephanti2/db/mas_gis_city_ip.sql; 
```

（来源：[参考手册](http://dev.mysql.com/doc/refman/5.0/en/batch-commands.html "参考手册")中的一条评论建议在 Windows 机器上使用正斜杠）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:23:20.940

尝试引用您的文件名。注意你的命令：

> mysql> 源 C:\xampp\htdocs...

可能被解释为：

> mysql 源 C:\xampp\htdocs...

（看到那里的 \x 吗？）

如果您引用文件名，我敢打赌它会起作用。（不确定 mysql 是否需要 ' 或 " 在这种情况下引用文件名，请尝试两者）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T08:41:18.743

其实这行得通。我认为这是 dwuff 以前的答案。

```
mysql> SOURCE C:\\xampp\\htdocs\\elephanti2\\db\\mas_gis_city_ip.sql; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-17T01:51:46.587

我最近尝试安装 FossTrak 时遇到了同样的问题，这是在 Windows 10 上使用 Mysql 5.7 的语法

`\. C:/share/epcis-repository-0.5.0/epcis_schema.sql`

using`\source` 没有，也没有`\\`，并且偶然我删除了`;`它并且它起作用了。

# java - 放置时发生错误 web.xml 中的标记

> ID：10277057
> 
> 赞同：0
> 
> 时间：2012-04-23T08:16:34.503
> 
> 标签：java, jsp, web.xml

尝试运行项目时，我在项目控制台上收到以下错误消息：

```
Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: [java.sql.DataSource] is not an allowed property value type. Please see server.log for more details.
/media/work documents/UnderTest/NetbeansCurrent/ProjectSnippets/nbproject/build-impl.xml:724: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 4 seconds) 
```

这就是服务器日志中显示的内容：

```
SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: [java.sql.DataSource] is not an allowed property value type
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

    SEVERE: Exception while loading the app
    SEVERE: Exception while loading the app : java.lang.IllegalStateException:    ContainerBase.addChild: start: org.apache.catalina.LifecycleException:  java.lang.IllegalArgumentException: [java.sql.DataSource] is not an allowed property value type 
```

这是我的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
        <param-name>debug</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param>
        <param-name>detail</param-name>
        <param-value>2</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet>
    <servlet-name>tester</servlet-name>
    <servlet-class>projectcodes.RegistrationHandler</servlet-class>
</servlet>
<servlet>
    <servlet-name>handle_registration_data</servlet-name>
    <servlet-class>projectcodes.handle_registration_data</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>tester</servlet-name>
    <url-pattern>/tester</url-pattern>
</servlet-mapping>

<resource-ref>
    <res-ref-name>jdbc/photog</res-ref-name>
    <res-type>java.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref>

<servlet-mapping>
    <servlet-name>handle_registration_data</servlet-name>
    <url-pattern>/handle_registration_data</url-pattern>
</servlet-mapping>

<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

当我`<resource-ref>`在 web.xml 文件中放置 a 时会出现问题。我已经连接到数据库并使用 netbeans 中的向导配置了*数据源。*如果我省略`<resource-ref>`标签，项目部署成功，但数据不会出现在数据库中。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:55:40.890

```
[java.sql.DataSource] is not an allowed property value type 
```

由于错误的包，您会收到错误 - 否则`<resource-ref>`很好。它应该是

`**javax**.sql.DataSource`

# android - 您如何防止 Android 调整操作栏徽标的大小？

> ID：10277066
> 
> 赞同：1
> 
> 时间：2012-04-23T08:17:42.720
> 
> 标签：android, resize, android-actionbar, manifest

我为我的应用程序创建了一个徽标，所以我没有使用图标。我设计的徽标非常适合操作栏，但我不知道如何防止 Android 调整我的徽标大小。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:20:51.123

为每种密度提供不同的图像：mdpi、hdpi、xhdpi。

# javascript - jQuery 工具提示中的自定义 jQuery 滚动条

> ID：10277067
> 
> 赞同：0
> 
> 时间：2012-04-23T08:17:48.777
> 
> 标签：javascript, jquery

我正在使用 nanoscroller.js 和 tiptip.js ，尽管对于我的问题，我不确定特定的库有那么重要（但它们可能）。

我有一个工作工具提示，我有一个工作滚动条。单独使用时。

**我的目标**是在工具提示中有一个有效的自定义滚动条。

**HTML：**

```
<a class="tooltip">Open tooltip</a>

<div class="tooltip-html" style="display:none;">
    <div id="main-content" class="nano">
        <div class="Content">
            <div class="blue">
            </div>
        </div>
    </div>
</div> 
```

**JS：**

```
var tip_html = $('.tooltip-html').html();
$('.tooltip').tipTip({activation: 'click', maxWidth: "230px", defaultPosition: "bottom", keepAlive: true, content: tip_html });
$("#main-content.nano").nanoScroller(); 
```

关于上述内容，我注意到的第一件事是：通过这种安排，纳米卷轴仅应用于第一组 html，而不是工具提示中的那组。

因此，我在抓取 html 并将其添加到工具提示之前先应用了滚动条，这将滚动条应用到了工具提示，但它不起作用。

在这里尝试了很多不同的方法（将滚动条应用于每个匹配的 id，何时调用哪个的不同顺序等），我肯定被卡住了。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:24:44.923

在没有使用这些库的情况下，我的猜测是tiptip 所做的是创建DOM 节点的副本，并且nanoScroller 保存了对应用它的节点的一些引用。

结合起来，这两种行为可能会导致您所看到的： $(#mail-content.nano) 将始终指向原始 HTML，如果您在添加滚动条后复制 HTML，滚动条可能仍在尝试滚动原始节点。

因此，您可能想在创建tipTip 后尝试添加nanoScroller。像这样的东西（未经测试）：

```
var tip_html = $('.tooltip-html').html();
$('.tooltip').tipTip({
    activation: 'click',
    maxWidth: "230px",
    defaultPosition: "bottom",
    keepAlive: true,
    content: tip_html,
    enter: function () {
        $(this).find("div.nano").nanoScroller();
    }
}); 
```

这使用`enter`tipTip 的属性添加一个在打开提示时执行的函数，然后将nanoScroller 添加到新的DOM 元素中。

# objective-c - 同步 iOS 和 Mac OS X 数据

> ID：10277069
> 
> 赞同：5
> 
> 时间：2012-04-23T08:18:04.980
> 
> 标签：objective-c, ios, macos

朋友们我正在开发一个有两个版本的应用程序，即 iOS 和 Mac OS X。目前我正在探索将 iOS 版本的核心数据同步到 Mac OS X 的选项，反之亦然。

有人可以建议我使用正确的工具/api。或者有人对如何做同样的事情有一些提示。

唯一的条件是我们不能使用基于云/网络服务的同步。

--- 更新 01 ---

在致力于解决方案的过程中，我探索了通过 HTTPServer 内联/嵌入在应用程序中的同步。 [http://cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html](http://cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html)

这允许 iOS 应用程序通过其 IP 共享数据。我很困惑 OS X 应用程序如何能够检测到 IP，或者是否有任何 iPhone 与 Mac OS 连接。

只是为了澄清我到底在寻找什么是---

用户在任何一个应用程序 iOS 应用程序或 Mac OSx 应用程序上工作。然后用户将 iPhone 与 Mac 机器连接并同步数据。

我希望有人能够相应地指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:26:05.143

我建议在 Mac 上创建一个[状态菜单栏应用程序](https://stackoverflow.com/questions/3409985/how-to-create-a-menubar-application-for-mac)并将您的数据与[libimobiledevice](http://www.libimobiledevice.org/)同步。

同步本身并不是那么容易（如果它直接是 iOS<->Mac 或不是 iOS<->Cloud<-Mac/iOS->）。你可以从[这里](https://stackoverflow.com/questions/5035132/how-to-sync-iphone-core-data-with-web-server-and-then-push-to-other-devices)开始。

# iphone - 在 sqlite 中检查 UIImage 的重复值

> ID：10277071
> 
> 赞同：2
> 
> 时间：2012-04-23T08:18:12.850
> 
> 标签：iphone, sqlite, uiimage

我的应用程序包含 SQLite 数据库中的图像。我想在将 UIImage 插入数据库之前检查它的重复值。图像存储为 blob 类型。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:23:05.460

一种方法是将图像数据的哈希值（如[sha1](https://stackoverflow.com/questions/3468268/objective-c-sha1)）存储在数据库的另一个字段中，然后与之进行比较。

# javascript - 如何使更改事件适用于使用 replaceWith 添加的 html 单选按钮

> ID：10277074
> 
> 赞同：1
> 
> 时间：2012-04-23T08:18:23.057
> 
> 标签：javascript, jquery, html

我设法让单选按钮的更改事件触发。但是我现在需要它来处理 html，其中单选按钮通过 replaceWith 添加到标记中。

所以它被添加到我的标记中：

```
$(this).replaceWith('<input type="radio" name="variety" value="null" id="myradio" />'); 
```

因此，我用于捕获更改事件的代码是：

```
$('#myradio').change(function () {
        alert("Hello");
    }); 
```

那么，鉴于在初始页面加载后现在将单选按钮添加到页面中，有人知道我将如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:22:31.290

您可以使用[`.on()`](http://api.jquery.com/on/)(jQuery 1.7+) 或[`.delegate()`](http://api.jquery.com/delegate/)(jQuery 1.4.3+) 订阅 change 事件，以考虑动态添加的元素。

例如：

```
$('#myradio').live('change', handler);                // jQuery 1.3+

$(document).delegate('#myradio', 'change', handler);  // jQuery 1.4.3+

$(document).on('change', '#myradio', handler);        // jQuery 1.7+ 
```

同样重要的是要指出，没有必要将此订阅放在`document.ready`回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:24:53.223

您可以使用以下内容：

```
$('body').on('change', '#myradio', function () {
    警报（“你好”）；
});

```

如果您事先知道要放置单选按钮的元素，则应更改“body”选择器以匹配该元素以提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:25:00.673

任何一个：

*   `on`对父母使用 jQuery

    ```
    <div id="container">
        <!--replaceable elements-->
    </div>

    //this will take effect on current and future children
    $('#container').on('change','targetSelector',function(){
        alert("Hello");
    }); 
    ```

*   或直接绑定到新元素

    ```
    function func(){
        alert("Hello");
    }

    var newEl = $('<input type="radio" name="variety" value="null" id="myradiobutton" />');
    newEl.change(func);
    $(this).replaceWith(newEl); 
    ```

我更喜欢第一个，因为性能和干净的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T08:27:27.343

您可以创建单选按钮，添加更改事件，然后替换`this`为单选按钮。

```
var $radio = $('<input type="radio" name="variety" value="null" id="myradio" />');
$radio.change(function () {
    alert("Hello");
});
$(this).replaceWith($radio); 
```

# perl - 对 RSS 解析的 UTF-8 支持

> ID：10277078
> 
> 赞同：1
> 
> 时间：2012-04-23T08:18:37.440
> 
> 标签：perl, unicode, utf-8, rss

我正在使用[XML::RSSLite来解析我使用](https://www.metacpan.org/module/XML%3a%3aRSSLite)[LWP](https://www.metacpan.org/module/LWP%3a%3aUserAgent)检索到的 RSS 数据。LWP 以正确的编码正确检索，但是当使用 RSSLite 解析数据时，编码似乎丢失了，并且从输出中删除了 é、è、à 等字符。是否可以设置选项以强制编码？

这是我的脚本：

```
use strict; 
use XML::RSSLite; 
use LWP::UserAgent; 
use HTTP::Headers; 
use utf8; 

my $ua = LWP::UserAgent->new; 
$ua->timeout(10); 
$ua->env_proxy; 
my $URL = "http://www.boursier.com/syndication/rss/news/FR0004031839/FR"; 
my $response = $ua->get($URL); 

if ($response->is_success) { 
   my $content = $response->decoded_content((charset => 'UTF-8')); 
   my %result; 
   parseRSS(\%result, \$content); 
   foreach my $item (@{ $result{items} }) { 
   print "ITEM: $item->{title}\n"; 
   } 
} 
```

我尝试使用[XML::RSS](https://www.metacpan.org/module/XML%3a%3aRSS)，因为它似乎有更多选项在我的情况下可能很方便，但不幸的是它未能安装。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:04:26.800

我喜欢[Mojo::UserAgent](https://www.metacpan.org/module/Mojo%3a%3aUserAgent)和[Mojo::DOM](https://www.metacpan.org/module/Mojo%3a%3aDOM)已经获得了我需要的支持，而无需我跟踪要使用的正确模块组合，并且它无需我做任何特别的事情就可以处理 UTF-8 位：

```
use v5.10;
use open qw( :std :utf8 ); 
use Mojo::UserAgent; 

my $ua = Mojo::UserAgent->new; 
my $URL = "http://www.boursier.com/syndication/rss/news/FR0004031839/FR"; 
my $response = $ua->get($URL)->res; 

my @links = $response
    ->dom( 'item > title' )
    ->map( sub { $_->text } )
    ->each;

$" = "\n";
print "@links\n"; 
```

我在[使用 Mojo 进行无痛 RSS 处理还有另一个示例](http://blogs.perl.org/users/brian_d_foy/2012/04/painless-rss-processing-with-mojo.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:39:28.653

RSSLite[文档](http://p3rl.org/XML%3a%3aRSSLite#DESCRIPTION)明确指出：

> 去掉 0-9~!@#$%^&*()-+=a-zA-Z[];',.:"<>?\s 以外的字符

因此，该模块已无可救药地损坏了。[使用XML::Feed](http://p3rl.org/XML%3a%3aFeed)重试

# android - 弹出窗口关闭

> ID：10277081
> 
> 赞同：0
> 
> 时间：2012-04-23T08:18:52.557
> 
> 标签：android

当我使用`dismiss`删除弹出窗口时，它只是隐藏它还是从内存中删除它？

我尝试`dismiss`了`showAtLocation`几次（使用相同的 PopupWindw 对象，而不是重新创建它）并且窗口显示和隐藏没有问题。问题是我可以指望它 - 也许它被 GC 标记为删除，但还没有被垃圾收集？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:26:43.823

只要您有一个对象的引用，它就不会被标记为删除。因此，您可以稍后重新显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:30:13.717

`dismiss()`与此相反`showAtLocation()`，对象在之后保持有效状态`dismiss()`。所以切换是安全的`dismiss()/showAtLocation()`

从这里的Android源代码可以看出——你可以看看`dismiss()`和`showAtLocation()`实现

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/PopupWindow.java#PopupWindow.showAtLocation%28android.view.View%2Cint %2Cint%2Cint%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/PopupWindow.java#PopupWindow.showAtLocation%28android.view.View%2Cint%2Cint%2Cint%29)

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/PopupWindow.java#PopupWindow.dismiss%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/PopupWindow.java#PopupWindow.dismiss%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:22:54.427

您可以强制使用垃圾收集器

`System.gc()`

# asp.net - 在 asp.net 中单击按钮时打开一个动画弹出窗口

> ID：10277086
> 
> 赞同：0
> 
> 时间：2012-04-23T08:19:23.667
> 
> 标签：asp.net, ajax

我在关闭 gridview 后按下按钮时遇到问题，然后代码正在工作，但是当我在 gridview 中按下按钮时发生错误“System.InvalidOperationException：'ModalPopupExtender1'的 TargetControlID 无效。ID 为'btn_edit'的控件找不到。” 我的代码是：

*代码*

autogeneratecolumns="False" allowpaging="True" PageSize="3" width="500px" ondatabound="CustomersGridView_DataBound"
runat="server" DataKeyNames="CompanyFName" CellPadding="4" ForeColor="#333333" GridLines="None ">

```
 <AlternatingRowStyle BackColor="White" />

      <Columns>

          <asp:BoundField DataField="CompanyFName" HeaderText="CompanyFName" 
              SortExpression="CompanyFName" />
          <asp:BoundField DataField="CompanySName" HeaderText="CompanySName" 
              SortExpression="CompanySName" />

     <asp:templatefield> 
```

```
 </Columns>

      <EditRowStyle BackColor="#7C6F57" />
      <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
      <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />

    <pagerstyle forecolor="White"
      backcolor="#666666" HorizontalAlign="Center"/>

    <pagertemplate>

      <table width="100%">                    
        <tr>                        
          <td style="width:70%">

            <asp:label id="MessageLabel"
              forecolor="Blue"
              text="Select a page:" 
              runat="server"/>
            <asp:dropdownlist id="PageDropDownList"
              autopostback="true"
              onselectedindexchanged="PageDropDownList_SelectedIndexChanged" 
              runat="server"/>

          </td>   

          <td style="width:70%; text-align:right">

            <asp:label id="CurrentPageLabel"
              forecolor="Blue"
              runat="server"/>

          </td>

        </tr>                    
      </table>

    </pagertemplate> 

      <RowStyle BackColor="#E3EAEB" />
      <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
      <SortedAscendingCellStyle BackColor="#F8FAFA" />
      <SortedAscendingHeaderStyle BackColor="#246B61" />
      <SortedDescendingCellStyle BackColor="#D4DFE1" />
      <SortedDescendingHeaderStyle BackColor="#15524A" />

  </asp:gridview>
  <asp:AccessDataSource ID="AccessDataSource1" runat="server" 
      DataFile="~/eTimeTrackLite1.mdb" 
      SelectCommand="SELECT  [CompanyFName], [CompanySName] FROM [Companies]">
  </asp:AccessDataSource>
    <asp:Button ID="Button1" runat="server" Text="Button" />

<asp:Panel ID="Panel1" runat="server" BackColor="#990099" Height="146px" 
    Width="403px">
    <asp:Button ID="Button2" runat="server" Text="Button" />
</asp:Panel>
<asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="btn_edit" PopupControlID="Panel1" CancelControlID="Button2" X="280" Y="220">
 <Animations>
            <OnShowing>
            <FadeIn Duration=".5" Fps="40" />
        </OnShowing>
        <OnShown>
            <FadeIn Duration=".5" Fps="40" />
        </OnShown>
        <%-- neither animation works from code-behind --%>
       <OnHiding>
            <FadeOut Duration=".5" Fps="40" />
        </OnHiding>
        <OnHidden>
            <FadeOut Duration=".5" Fps="40" />
        </OnHidden>

        </Animations>
</asp:ModalPopupExtender> 
```

# javascript - 无效日期的Jquery日期验证

> ID：10277088
> 
> 赞同：0
> 
> 时间：2012-04-23T08:19:29.047
> 
> 标签：javascript, jquery, jquery-ui

我需要验证特定日期选择器控件的日期格式。如果我手动输入类似于 DD/MM/YYYY 格式的“99/99/9999”，它不会引发验证错误。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:25:19.643

您可以使用此功能验证日期。只需传入您输入的`value`. 从我正在研究的这个[小验证插件](http://elclanrs.github.com/jq-quickvalidate/)中提取。

```
var isValidDate = function (value) {
    var match = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.exec(value),
    isDate = function (m, d, y) {
        return m > 0 && m < 13 && y > 0 && y < 32768 && d > 0 && d <= (new Date(y, m, 0)).getDate();
    };
    return match && isDate(match[1], match[2], match[3]);
} 
```

# r - 将 BED 文件转换为 WIG 文件

> ID：10277094
> 
> 赞同：2
> 
> 时间：2012-04-23T08:20:14.613
> 
> 标签：r, bioinformatics, bed

你知道有什么方法可以轻松地将 BED 文件转换为 WIG（通过 R 或其他程序）吗？

你能给我一些指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:37:11.237

查看[rtracklayer](http://www.bioconductor.org/packages/2.10/bioc/html/rtracklayer.html)包，特别是以下手册页：

```
 ?import
 ?export 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-22T15:59:16.863

这是我将如何转换`.bed`为`.wig`. 正如@Paolo 暗示的那样，这是一个简单的过程：

```
library(rtracklayer) #bioconductor

bed_loaded <- import(con="~/Downloads/my_bed.bed.gz", format="bed") #no need to unzip .gz
# bed_loaded <- import.bed(con="~/Downloads/my_bed.bed") #if you unzip 

export.wig(object=bed_loaded, con="~/Downloads/bed2wig.wig") 
```

请注意，您`import`和`export`两者都有方法（假发、床、大人物或 bw 等）。您可以直接使用它们而不指定方法但指定`format`参数。

这个[GitHub 教程](http://kasperdanielhansen.github.io/genbioconductor/html/rtracklayer_Import.html#other-file-formats)会很有帮助。

# windows-7 - openCL 中的 clBuildProgram 时出现 -11 错误

> ID：10277107
> 
> 赞同：0
> 
> 时间：2012-04-23T08:21:53.773
> 
> 标签：windows-7, amd-processor

我已经为我的查询引用了所有可能的解决方案，但没有工作。我正在使用 AMD 处理器和不支持 openCL 的 ATI 3200 显卡。但是由于 openCL 的特殊功能，代码运行在 CPU 本身而不是 GPU 上。但是对于具有 __local variables 的内核代码，它在 clBuildProgram 时显示 -11 错误。

给我一些解决方案为什么我会收到这个 -11 错误？？？

提前致谢。将热切等待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:15:22.900

您可以在这里发布带有最小化 C++ 程序的最小化内核吗？您是否尝试过使用英特尔 OpenCL SDK。

如果您使用默认设备并且您的 GPU 不支持 OpenCL，则平台将选择 CPU 设备。

# html - 包括带有 CID 的背景图像

> ID：10277109
> 
> 赞同：10
> 
> 时间：2012-04-23T08:22:23.043
> 
> 标签：html, background-image

我需要将图像嵌入到 HTML 邮件中。图像本身已经正常工作并按预期嵌入到邮件中，但存在一个问题：图片显示为：`<img src="cid:cidname" width="550" height="95" />` 但不是：

```
<div id="head" style="width:550px; height:95px; margin-bottom:0px; background-image:url(cid:cidname); background-repeat:no-repeat;"></div> 
```

有人知道可能导致问题的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-08T15:52:38.393

你的语法是正确的。或者至少这是许多邮件客户端支持在 CSS“背景图像”属性中使用嵌入图像的方法。

但是，如果您在 Mozilla Thunderbird 中对此进行测试，您将无法观看图像，因为存在历史错误或不支持此功能。这里打开了一个错误报告：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=254015#c21) ://bugzilla.mozilla.org/show_bug.cgi?id=254015#c21 。

如果您对此功能感兴趣，我建议您为它投票。自开业以来已经快10年了：/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T14:46:30.633

是的。我也想让这个工作。厌倦了微轴阻挡图像。其实这个bug现在已经19岁了！ [https://bugzilla.mozilla.org/show_bug.cgi?id=154836](https://bugzilla.mozilla.org/show_bug.cgi?id=154836)

# java - 使用 Spring MVC 设置控件属性的值

> ID：10277110
> 
> 赞同：1
> 
> 时间：2012-04-23T08:22:29.637
> 
> 标签：java, spring, spring-mvc, attributes

我是 Spring 和 Spring MVC 的新手。**我在ASP.NET**中开发了一些 Web 应用程序，这个框架采用的不同方法让我有点困惑。

现在我正在尝试开发一个示例应用程序，我需要更改一些控件（按钮、标签等）的文本。

例如：我有一个按钮可以启动/停止数据提取过程。我想将按钮的文本设置为“START”，然后当我单击它（并启动该过程）时，我想将按钮文本设置为“STOP”。应该对几个标签进行类似的更改。

在 ASP.NET 中，我只需设置`Text`每个控件的属性。

如何从控制器使用 Spring MVC 实现这一点？

**注意** 这也适用于每个控件属性...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:59:13.620

您可以将参数添加到返回的模型。例如：

```
 //some other controller code
 @RequestMapping("/start")
 public ModelAndView start(....) {
       ModelAndView mav = new ModelAndView("example");
       mav.addObject("button_text", "START");

       return mav;
 }
 //... 
```

然后，在您的 example.jsp 中：

```
<input type="button" value="${button_text}" /> 
```

尽管如此，您似乎正在尝试使用动作响应框架来实现从基于组件的框架中获取的想法，这可能不是最好的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:29:13.333

我自己不是专业人士，但我这样做的方式是使用 javascript。

一些代码会是这样的

```
function changeText() {
   var button = document.getElementById("yourButtonId"); // same as the id attribute of the button
   button.value = "STOP"; 
} 
```

然后在jsp代码中你可以：

```
<input type="button" name="someName" value="START" onclick="changeText()"/> 
```

我认为这可行。

稍后编辑：我看到您专门询问了如何从控制器执行此操作，这意味着从 Java 代码，如果我的答案不是您想要的，对不起。

# sql - Select newest record group by username in SQL Server 2008

> ID：10277115
> 
> 赞同：1
> 
> 时间：2012-04-23T08:22:56.533
> 
> 标签：sql, sql-server-2008, tsql

I have a table with this data:

```
ID   voting_ID   username   timestamp              XMLBallot
1    9           voter01    23\. 4\. 2012 8:54:45    xmldata
2    9           voter01    21\. 4\. 2012 14:00:34   xmldata
3    9           voter02    20\. 4\. 2012 16:01:10   xmldata
4    11          voter01    23\. 4\. 2012 8:40:45    xmldata
5    9           voter03    19\. 4\. 2012 21:18:49   xmldata 
```

I need to get only one newest ballot for each voter (username) in specific `voting_ID`.

For example data I need to be returned for `@voting_ID=9`

```
ID   voting_ID   username   timestamp              XMLBallot
1    9           voter01    23\. 4\. 2012 8:54:45    xmldata
3    9           voter02    20\. 4\. 2012 16:01:10   xmldata
5    9           voter03    19\. 4\. 2012 21:18:49   xmldata 
```

Please help me build that SQL Server 2008 query.. thank you PS: table name is `ballots`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:27:48.720

You have several options here but using adding a `ROW_NUMBER` grouped by `user` and sorted (descending) on your `timestamp` allows you to easily select the latest records.

**Using ROW_NUMBER**

```
SELECT *
FROM   (
         SELECT ID, voting_ID, username, timestamp, XMLBallot
                , rn = ROW_NUMBER() OVER (PARTITION BY voting_ID, username ORDER BY timestamp DESC)
         FROM   Ballots
       ) bt 
WHERE  rn = 1 
```

Alternatively, you can select the maximum timestamp per user and join on that.

**Using MAX**

```
SELECT bt.ID, bt.voting_ID, bt.username, bt.timestamp, bt.XMLBallot
FROM   Ballots bt
       INNER JOIN (
          SELECT username, voting_ID, timestamp = MAX(timestamp)
          FROM   Ballots
          GROUP BY
                 username, voting_ID
        ) btm ON btm.username = bt.Username
                 AND btm.voting_ID = bt.voting_ID
                 AND btm.timestamp = bt.timestamp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:31:33.067

Maybe something like this:

**Test data**

```
DECLARE @T TABLE
    (
        ID INT,
        voting_ID int, 
        username VARCHAR(100),
        timestamp VARCHAR(100),
        XMLBallot VARCHAR(100)
    )

INSERT INTO @T
VALUES
    (1,9,'voter01','23\. 4\. 2012 8:54:45','xmldata'),
    (2,9,'voter01','21\. 4\. 2012 14:00:34','xmldata'),
    (3,9,'voter02','20\. 4\. 2012 16:01:10','xmldata'),
    (4,11,'voter01','23\. 4\. 2012 8:40:45','xmldata'),
    (5,9,'voter03','19\. 4\. 2012 21:18:49','xmldata') 
```

**Query**

```
DECLARE @voting_ID INT=9
;WITH CTE
AS
(   
    SELECT
        ROW_NUMBER() OVER(PARTITION BY username ORDER BY voting_ID) AS RowNbr,
        t.*
    FROM
        @T AS t
)
SELECT
    *
FROM
    CTE
WHERE
    RowNbr=1
    AND CTE.voting_ID=@voting_ID 
```

**EDIT1**

Maybe something like this then:

```
DECLARE @voting_ID INT=9
;WITH CTE
AS
(   
    SELECT
        ROW_NUMBER() OVER(PARTITION BY username ORDER BY timestamp DESC) AS RowNbr,
        t.*
    FROM
        @T AS t
    WHERE
        t.voting_ID=@voting_ID
)
SELECT
    *
FROM
    CTE
WHERE
    RowNbr=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-19T13:42:56.887

Alternative way to do it.

```
WITH sub 
     AS (SELECT *, 
                Max(timestamp) OVER (partition BY company) AS latest 
         FROM   ballots) 
SELECT * 
FROM   sub 
WHERE  latest = timestamp 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T08:47:43.757

```
select  t1_4.ID, t1_4.voting_id, t1_4.timestamp, t1_4.xmlballot
from   table1 as t1_4
where   t1_4.ID in (  SELECT  id_to_select
            from   (  SELECT  (  SELECT t1_1.ID
                        from   table1 as t1_1 
                        where t1_1.id =  (    SELECT  top 1 t1_2.ID
                                  from     table1 as t1_2
                                  where   t1_2.username = t1_3.username
                                  order by timestamp desc)
                      ) as id_to_select, 
                      t1_3.username
                  from   table1 as t1_3
                  group by username)
          ) 
```

# css - Firefox中css的保留id名称限制

> ID：10277121
> 
> 赞同：0
> 
> 时间：2012-04-23T08:23:58.003
> 
> 标签：css, firefox

我创建了一个 id 为“descriptions”的 div，但它无法识别位置声明。这是 Firefox 中的错误，还是我在这里遗漏了什么。我正在使用最新版本的 Ubuntu。

**CSS**

```
#descriptions
{
    position: absolute:
    top: 20px;
    left: 190px;
    height: 500px;
    width: 100px;   
    background-color: blue; 
} 
```

**HTML**

```
<div id="descriptions"></div> 
```

这是一个有效的副本：http: [//jason-rubenstein.com/testCss/test.html](http://jason-rubenstein.com/testCss/test.html)

我知道它可以在某些浏览器中运行，但请确认这不是编码问题，而是错误。

当我更改名称但保持代码相同时，它确实有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:28:37.727

您在属性的行尾使用冒号而不是分号`position: absolute;`

这是正确的CSS代码：

```
#descriptions
{
    position: absolute;
    top: 20px;
    left: 190px;
    height: 500px;
    width: 100px;   
    background-color: blue; 
} 
```

# c# - 用于检查有效数字条目的 MFC Visual C++ 代码

> ID：10277123
> 
> 赞同：0
> 
> 时间：2012-04-23T08:24:03.507
> 
> 标签：c#, c++, validation, mfc

我有这个带有以下代码的 MFC 应用程序，用于检查使用应用程序中的编辑控件输入的数字的有效性。它被验证为一串字符。

```
bool invalid = FALSE;
int string_length = InputEdit.GetWindowText(text, 10);
if (text[0] == '-1')
    for(i=1; i<string_length; i++)
        if((text[i] < '0' || text[i] > '9' ) && text[i] != '.'){
            MessageBeep(MB_ICONEXCLAMATION);
            Reactive_Const_Status_Text.SetWindowText("Invalid AA Value");
            invalid = TRUE;
        }
else
    for(i=0; i<string_length; i++)
        if((text[i] < '0' || text[i] > '9' ) && text[i] != '.'){
            MessageBeep(MB_ICONEXCLAMATION);
            Reactive_Const_Status_Text.SetWindowText("Invalid AA Value");
            invalid = TRUE;
        }

if(!invalid){   
    double temp_value = atof(text);
    reac.VelAA  = temp_value;
} 
```

所以这个编辑控件允许用户输入负数。但是，有人可以解释一下“if (text[0] == '-1')”这行代码在代码中的作用吗？它是否检查负数，如果是，为什么要使用 '-1' ？其次，我想将此代码转换为 C#，那么如何转换这一行？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:32:17.550

实际上，这段代码也在检查负数。第一个 for 循环从第二个数字开始检查。

if (text[0] == '-1') 的行应该是 if (text[0] == '-')

我是这样猜的，因为在 C++ 中，单引号只能用于单个字符，而不能用于具有多个字符的字符串。

在 C# 中，同一行 if (text[0] == '-') 将起作用。

谢谢。

# php - 带有 php 脚本的苹果推送通知

> ID：10277127
> 
> 赞同：2
> 
> 时间：2012-04-23T08:24:14.337
> 
> 标签：php, iphone, apple-push-notifications

我能够连接到 apns 并将值插入数据库以检查我是否收到“消息已传递”消息，但它没有显示任何通知....谁能告诉我我错在哪里...

```
$deviceToken = '**********************';

$payload['aps'] = array('alert' => 'This is the alert text', 'badge'
=> 1, 'sound' => 'default'); $payload = json_encode($payload);

$passphrase = '***';

$apnsHost = 'gateway.sandbox.push.apple.com'; $apnsPort = 2195; $apnsCert = 'ck.pem';

$streamContext = stream_context_create(); stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert); stream_context_set_option($streamContext, 'ssl', 'passphrase',$passphrase );

$apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);

if (!$apns)
    {
     $check = $errorString;      $query = "INSERT INTO tbl_checkData(friend_nickname) VALUES('$check') ";    $result=mysql_query($query);           } else{ 
     $check = "connected";   $query = "INSERT INTO tbl_checkData(friend_nickname) VALUES('$check') ";    $result=mysql_query($query);    }

$apnsMessage = chr(0) . pack("n",32) . pack('H*', str_replace(' ', '', $deviceToken)) . pack("n",strlen($payload)) . $payload;

//chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload;

$result=fwrite($apns, $apnsMessage);

if (!$result)
    {
     $check = 'Message not delivered' ;      $query = "INSERT INTO tbl_checkData(friend_nickname) VALUES('$check') ";    $result=mysql_query($query);       
            } else {     $check = 'Message delivered' ;      $query = "INSERT INTO tbl_checkData(friend_nickname) VALUES('$check') ";    $result=mysql_query($query);    
     }

enter code here

fclose($apns); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:33:57.383

$apnsHost = 'gateway.sandbox.push.apple.com';

从此网址中删除沙箱，它将运行...我已经测试过了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:31:39.260

确保： 1-您的应用程序未运行，因为推送通知仅用于在应用程序关闭时通知使用。2-设备的设备令牌是正确的还要确保推送通知证书也为同一设备配置。3-确保您的设备已连接到互联网。

你可以看看这个链接。

[推送通知](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

# javascript - javascript中（win）的目的是什么？

> ID：10277128
> 
> 赞同：2
> 
> 时间：2012-04-23T08:24:14.557
> 
> 标签：javascript, jquery

我有以下代码：

```
 $.modal({
        content: '<p>Are you sure you want to delete?</p>',
        title: 'Delete confimation',
        maxWidth: 500,
        buttons: {
                    'Yes': function(win) {
                        win.closeModal();
                    },
                    'No': function(win) {
                        win.closeModal();
                    }
        }
    }); 
```

有人能解释一下（赢）是什么意思吗？我可以看到它使用了几次，但我不确定它在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:25:48.237

**自下而上的解释：** 它是 anon 函数的变量名，作为 key 的值`Yes`传递`No`给`buttons`.

**自上而下的解释：**您正在调用`modal`插件并将参数传递给函数，该函数是一个具有 4 个成员的对象：`content`、`title`、`maxWidth`、`buttons`。`buttons`是一个对象（基本上你是在一个对象内部传递一个对象），有 2 个成员，`Yes`并且`No`是匿名函数，每个都有一个参数`win`.

基本上`win`是您打开的模态实例`$.modal()`

在这种情况下，同时按下`Yes`和`No`将简单地关闭模态而不做任何事情

# android - android ViewFlipper 行为

> ID：10277136
> 
> 赞同：0
> 
> 时间：2012-04-23T08:24:47.463
> 
> 标签：android, viewflipper

我通过 showNext() 手动翻转了视图，如下所示：

```
flipper.showNext();

View current  = flipper.getCurrentView();
current.setVisible(View.INVISIBLE);

// ... some animation to show the view 
```

我的问题是为什么 Flipper.showNext() 在使视图不可见之前不会在屏幕上显示下一个视图。（代码使下一个视图不可见，然后只显示但不显示下一个视图，然后才变得不可见）

代码归档了我想要的，但我不知道它为什么会这样。

这是因为 UI 线程没有按顺序运行吗？（如果是序列，它应该在将其设置为不可见之前显示视图）

有什么想法或更好的代码可以做同样的事情吗？

猕猴桃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:34:21.923

用动画翻转视图的另一种方法是使用[3DTransition](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Transition3d.html)，您可以从 ApiDemo > Views > Animation > 3D Transition 查看它的示例。

# jpa - 未加载相关实体 - EAGER 被忽略？

> ID：10277139
> 
> 赞同：0
> 
> 时间：2012-04-23T08:25:00.573
> 
> 标签：jpa, ejb, eclipselink, glassfish-3

获得 GlassFish v3。我有一个一对多的实体。问题是，这`EclipseLink`似乎忽略了 fetch EAGER 模式。

这是我的实体。

```
@Entity
public class Person implements Serializable
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String name;

    @OneToMany(mappedBy = "person", fetch = FetchType.EAGER)
    private List<Hobby> hobbies;

    // getter and setter
} 
```

一段`1:n`关系

```
@Entity
public class Hobby
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;    

    private String name;

    @ManyToOne
    @JoinColumn
    private Person person;

    // getter and setter
} 
```

还有豆

```
@javax.ejb.Remote
public interface Testing
{
    public void addTestData();
    public List<Person> getTestData();
}

@javax.ejb.Stateless
public class TestingBean implements Testing
{
    @javax.persistence.PersistenceContext
    private EntityManager entityManager;

    public void addTestData()
    {
        Person p = new Person();
        p.setName("JOE");
        entityManager.persist(p);

        Hobby h1 = new Hobby();
        h1.setName("h1");
        h1.setPerson(p);

        entityManager.persist(h1);              
    }

    public List<Person> getTestData()
    {
        TypedQuery<Person> gridQuery = entityManager.createQuery("SELECT e FROM Person e", Person.class);
        return gridQuery.getResultList();
    }
} 
```

编辑客户：

```
InitialContext context = new InitialContext();      
Testing test = (Testing)context.lookup("java:global/dst2_1/TestingBean");

test.addTestData();

for(Person p: test.getTestData()) {
    System.out.println(p.getName());
    for(Hobby b : p.getHobbys()) {                  
        System.out.println(b.getName());
    }
}

context.close(); 
```

使用`MySQL`- 存储数据有效。但是，如果我获取数据，则只返回该人-而不是爱好。你能告诉我我的代码有什么问题吗？

编辑对不起已经尝试了很多东西......如上所示的代码产生：

> 异常描述：尝试使用具有空会话的间接遍历关系。这通常发生在具有未实例化 LAZY 关系的实体被序列化并且在序列化之后遍历该惰性关系时。为避免此问题，请在序列化之前实例化 LAZY 关系。

但是 Person 被正确返回。为什么在我使用 EAGER 时它指定 LAZY？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:18:21.943

您的代码看起来正确。我看不出任何可以忽略 EAGER 的方式。

你确定你得到这个属性的错误，而不是另一个？

还要确保正确地重新编译和部署代码。您最喜欢部署旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T15:29:43.627

制作渴望的对象`Serializable`

# c# - 在可以使用 SQL Server 2005 的 .NET Windows 应用程序中创建 EXE 或安装文件

> ID：10277141
> 
> 赞同：0
> 
> 时间：2012-04-23T08:25:01.773
> 
> 标签：c#, sql-server-2005

我一直在使用 SQL Server 2005 开发 C# windows 应用程序，现在我需要将它部署到其他系统。

我使用 setup 创建了一个安装文件，部署填充了所有先决条件，但是当我将它部署到另一台计算机上时，错误不断弹出说它无法打开连接。

我在想我的问题是缺少部署的项目数据库。

现在我的问题是如何使用这个数据库，并且我的连接字符串只能在我的系统中使用，所以我也需要更改这个连接字符串。

我怎样才能做到这一点？

请帮我解决我的问题...

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:31:27.490

您使用的是 sql compact 还是 sql ？如果它是 sql compact，您可以将文件添加到您的项目并将其加入您的项目并部署它，如果是 SQL，您需要有一个公共 WAN SQL 服务器，以便您的应用程序可以通过 Internet 访问它。

# javascript - 下载 HTTPS 资源，例如 CSS/图像/等。使用 JavaScript 的页面并将它们写入临时文件

> ID：10277142
> 
> 赞同：0
> 
> 时间：2012-04-23T08:25:03.620
> 
> 标签：javascript, google-chrome, https, google-chrome-extension

我正在为 Google Chrome 编写一个扩展，它将给定的网页转换为 PDF。为此，我下载了文档的 outerHTML 并将其传递给软件，该软件进一步将 HTML 转换为 PDF 文件。问题是该软件无法访问 https://* 类型的数据，因此如果在文档中使用外部样式表，它将不会显示在 PDF 中，因为该软件永远无法下载它. 为了克服这个问题，我想在 JavaScript 级别下载 HTTPS 数据并将其写入临时文件，并附加我们将发送到软件的外层 HTML，并带有（HTTPS 数据，临时文件）对标签，以便无论何时软件在outerHTML中遇到HTTPS源，它会简单地找到相应的临时文件并从那里下载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:14:54.600

解决了！我可以通过创建跨域 XMLHttpRequest 并使用 WebKitBlobBuilder 来完成。但是，我仍然有一点感到震惊：如何使用 WebKitBlobBuilder 对象中的 JavaScript 将图像保存到本地临时文件？我可以使用 Chrome.extension.getURL 创建一个 url，但该链接仅在 Google Chrome 中打开。任何帮助将不胜感激。

# c# - 在任意 IQueryable 上获取 Count() LINQ 扩展方法的 MethodInfo

> ID：10277143
> 
> 赞同：8
> 
> 时间：2012-04-23T08:25:16.033
> 
> 标签：c#, linq, count, iqueryable

我有 IQueryable<T> 源，我想动态调用 IQueryable<T>.Count()。

所以，我需要在 IQueryable 中声明的 Count 方法的 MethodInfo。

这是来自 msdn 的签名（在 IQueryable<> 中）：

```
public static int Count<TSource>(
    this IQueryable<TSource> source
) 
```

这是我走了多远：

```
Expression expr; //this is expression which holds my IQueryable<T>
MethodInfo mi = expr.Type.GetMethod("Count", BindingFlags.Static | BindingFlags.Public, null, new[] { expr.Type }, null); 
```

但我的 mi 始终为空；

我也试过：

```
mi = typeof(IQueryable<>).GetMethod("Count", BindingFlags.Static | BindingFlags.Public, null, new[] { expr.Type }, null); 
```

但又为空。

我的最终目标是：

```
Expression.Call(mi, expr); 
```

更新：这就是我获得 Sum Extension 方法的方式：

```
MethodInfo sum = typeof(Queryable).GetMethod("Sum", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(IQueryable<decimal>) }, null); 
```

这行得通，但是这个 Sum 方法不是通用的。它虽然是静态的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T08:29:21.563

您需要破解`IQueryable<T>`类型的通用参数并使用它；拥有该方法的类型也不是`IQueryable<T>`，它是[`Queryable`](http://msdn.microsoft.com/en-us/library/system.linq.queryable.aspx)- 如果你考虑一下 - 接口不能有静态方法（嗯，正如评论者指出的那样，在 C# 中）:)。

此外，因为它是一种泛型方法，所以您无法以您尝试过的方式匹配参数：因为您需要传递泛型类型*定义* `IQuerable<TSource>`-**而不是**泛型*类型* `IQueryable<int>`或任何实际表达式。

相反，您可以在类型上查找名为“Count”的静态方法的单参数版本`Queryable`：

```
Type genericArgument = expr.GetGenericArguments()[0];

MethodInfo countMethod = typeof(Queryable)
              .GetMethods(BindingFlags.Static | BindingFlags.Public)
              //narrow the search before doing 'Single()'
              .Single(mi => mi.Name == "Count"
                         // this check technically not required, but more future proof
                         && mi.IsGenericMethodDefinition
                         && mi.GetParameters().Length == 1)
              .MakeGenericMethod(genericArgument);

//now you can bind to 'countMethod' 
```

***2017 年 3 月 7 日更新****- 显然，框架中发生了一些变化，导致代码示例的原始版本无法工作 - 这是一个应该可以工作的更新版本*

再深入一点 - 该方法的签名是：

```
public static int Count<TSource>(
  this IQueryable<TSource> source
) 
```

因此，虽然参数类型是`IQueryable<TSource>`泛型的，但它是泛型的`TSource`——这就是为什么你需要深入你的`IQueryable<TSource>`表达式并抓住它的泛型参数的原因。你也应该能够看到我对这里参数的意思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-04T20:05:45.723

让编译器为您获取方法。

```
Type genericArgument = expr.GetGenericArguments()[0];
var fakeExp = (Expression<Func<IQueryable<int>, int>>)(q => q.Count());
var mi = ((MethodCallExpression)fakeExp.Body).Method.GetGenericMethodDefinition().MakeGenericMethod(genericArgument); 
```

# php - 将用户重定向到上一页

> ID：10277147
> 
> 赞同：-1
> 
> 时间：2012-04-23T08:25:42.067
> 
> 标签：php, javascript, redirect, joomla

我想将用户重定向到他们来自的页面，但不使用 javascript go.back 之类的东西，因为它不会再次加载页面。

我找到了一些代码

```
<?php 
$ref1 = urlencode($_SERVER['HTTP_REFERER']); 
$ref2 = urlencode('http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']); 
echo '<meta http-equiv="refresh" content="5;url=page2.php?ref1='.$ref1.'&amp;ref2='.$ref2.'">'; 
?> 
```

我只想要一个 PHP 文件来获取以前的 URL，即确切的 URL，然后将用户发送回它。我正在使用 PHP，因为它会导致页面再次加载。我使用了 javascript ，但它不会再次加载页面，所以请在这里帮助我。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:40:18.680

怎么样 ？

```
<?php
header ("Location: ".$_SERVER['HTTP_REFERER']);
?> 
```

您可以使用 php 直接将客户端重定向到另一个页面，而无需使用 http 的元刷新...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:29:41.050

为了不依赖引用者，您可以将发布表单的页面的 url 存储在隐藏的输入中，然后从处理 POST 请求的脚本中的 $_POST 获取它并发出到该 url 的重定向。

一个非常简单的例子：

在模板中：

```
<form action="<?= $yourDestinationUrl ?>" method="POST">
<!-- Here be your form elements -->
<input type="hidden" name="redirectTo" value="<?= $_SERVER['REQUEST_URI'] ?>" />
</form> 
```

在处理 POST 请求的脚本中：

```
[your logic goes here]

if(!empty($_POST['redirectTo']) {
    header('Location: ' . $_POST['redirectTo']);
    die;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:37:03.497

我是这样使用的：

1 - 在上一页中，我获得了完整的 url 并添加了 like 参数，即最后一个参数。

```
$e = $_SERVER['PHP_SELF']."?".$_SERVER['QUERY_STRING'];
href="www.nextpage.com?x=yours_parameters&e=<?php echo $e; ?>" 
```

2 - 在实际页面中，您必须获取 e 值

```
$_SESSION["url"] = $_SERVER['REQUEST_URI'];
$link = explode("e=",$_SESSION["url"]);
$e = $link[1]; 
```

3 - 所以，var $e 将是你的返回网址

```
<script>location.href='$e';</script>"; 
```

# c# - 如何在 Metro 风格应用上设置 CertificateValidationMode？

> ID：10277148
> 
> 赞同：1
> 
> 时间：2012-04-23T08:25:44.797
> 
> 标签：c#, wcf, certificate, microsoft-metro, nettcpbinding

我在 Azure 上有 WCF 自托管服务。我正在尝试制作桌面客户端和 Metro 风格的 App 客户端。我正在使用带有传输安全性和自签名证书的 nettcpbinding。

在 Windows 7 上，此代码有效：

```
client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
client.GetUpdate(...); 
```

但在地铁应用程序上，该字段`ServiceCertificate`不存在，所以我得到了（预期的）异常

```
The X.509 certificate CN=SPDEV-1-PC chain building failed.
The certificate that was used has a trust chain that cannot be verified. 
Replace the certificate or change the certificateValidationMode. 
A certificate chain processed, but terminated in a root certificate 
which is not trusted by the trust provider. 
```

如何更改 certificateValidationMode ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:30:49.380

我遇到了类似的问题，我通过反思解决了它。试试看。像这样：

```
Type credType = typeof (ClientCredential); //enter here type of your credentials
PropertyInfo credPropInfo1 = credType.GetTypeInfo().GetDeclaredProperty("ServiceCertificate");
PropertyInfo credPropInfo2 = credPropInfo1.GetType().GetTypeInfo().GetDeclaredProperty("Authentication");
PropertyInfo credPropInfo3 = credPropInfo2.GetType().GetTypeInfo().GetDeclaredProperty("CertificateValidationMode");
credPropInfo3.SetValue(yourObject, 0); // use the int value of the enum, suggested 0 for None 
```

更新：这里有一些愚蠢的代码，对我来说运行良好；）

```
var test6 = client.ClientCredentials.GetType().GetTypeInfo().GetDeclaredProperty("ServiceCertificate").GetValue(client.ClientCredentials);
var test7 = test6.GetType().GetTypeInfo().GetDeclaredProperty("Authentication").GetValue(test6);
test7.GetType().GetTypeInfo().GetDeclaredField("certificateValidationMode").SetValue(test7, 0);
test6.GetType().GetTypeInfo().GetDeclaredField("authentication").SetValue(test6, test7);
client.ClientCredentials.GetType().GetTypeInfo().GetDeclaredField("serviceCertificate").SetValue(client, test6); 
```

# php - 登录状态指示器功能不起作用

> ID：10277153
> 
> 赞同：0
> 
> 时间：2012-04-23T08:26:37.497
> 
> 标签：php, javascript, jquery, ajax

我的 ajax-php 数据库主页上有一个登录状态指示器 div。单击时的登录按钮会做两件事。

```
<input value="Login" type="button" onclick='logIntheUser(/*function to process login request*/);updateLoginStatusIndicator(/*function to update login status in login staus indicator div*/);' /> 
```

> 1.  它调用一个`logIntheUser`函数将登录数据发送到 php 访问处理器文件以设置`$_SESSION['username']`用户名和密码是否正确。
> 2.  它还调用`updateLoginStatusIndicator`显示已登录的函数，`$_SESSION['username']`如果`$_SESSION['username']`未设置，则显示“未登录” `$_SESSION['username']`。

这是使用`updateLoginStatusIndicator`函数执行的控制器代码：

```
 /*===login status indicator/updater===*/

    if(isset($_REQUEST['change-login-indicator']))
    {
    if(!isset($_SESSION))
    {
    session_start();
    }
    if(isset($_SESSION['username']))
    {
    echo 'Logged in as:'.$_SESSION['username'];
     }
    else
    {
    echo 'not logged in';
    } 
```

现在的问题是，有一段时间用户成功登录（即`$_SESSION['username']`设置），但第二个功能仍然`updateLoginStatusIndicator`显示“未登录”。登录状态指示器每次都不起作用。可能是如果在`updateLoginStatusIndicator`之后运行，`logIntheUser`它将正确更新登录状态。但我不知道该怎么做。请帮忙！

**编辑**

当我将函数作为回调调用时，例如：logIntheUser(updateLoginStatusIndicator())，它仍然不起作用（可能是我的回调方法不正确）。然后，当我添加`set_time_limit(1);` 到`updateLoginStatusIndicator()`函数脚本以将其延迟 1 秒时，它开始工作，但延迟脚本并不是最佳实践。请帮助我如何毫不拖延地工作，以便`updateLoginStatusIndicator()`函数仅在`logIntheUser()`函数完成执行后执行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:22:30.307

logIntheUser() 执行 AJAX 请求，对吗？那么 updateLoginStatusIndicator() 的问题很可能在于如果在 logInTheUser() 之后立即调用，而不是在 AJAX 请求成功完成之后调用。也就是说，它可能会在更新之前获取用户的状态。您应该在 AJAX 请求的回调中调用 updateLoginStatusIndicator()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:25:49.747

只需从

```
登录用户
```

函数并调用

```
更新登录状态指示器
```

此函数返回值时的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:30:46.290

在大多数情况下，当第一个函数发生错误时会发生这种情况。确保任何东西都可以阻止脚本的执行。

**编辑：**

我建议您使用事件的单功能回调来修改您的 HTML `onclick`：

```
onclick="logInProcedure();" 
```

在 JS 中：

```
function logIntheUser() {

    /* Your code to process login */

    /* set a boolean variable to true or false */

    if(sucessfulyLoggedin) {
        return true;
    }

    return false;

}

function updateLoginStatusIndicator() {

    /* Your code here */

}

function loginProcedure() {

    if(logIntheUser()) {
        updateLoginStatusIndicator();
    }

} 
```

# ldap - LDAP 参数设置

> ID：10277159
> 
> 赞同：0
> 
> 时间：2012-04-23T08:26:58.893
> 
> 标签：ldap, openldap

我正在尝试使用 openldap 为可在以下位置访问的页面设置 LDAP 用户身份验证：

```
http://serverip/uploadify-php/index.php 
```

我很难理解我应该在**dc** =my-domain 和**dc** =com 参数下设置什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:33:33.820

您所引用的参数似乎是服务器支持的命名上下文的`base object`or `base DN`。此处使用的值（可以是任何专有名称，不一定是 形式`dc=company,dc=com`）。参数的值由命名上下文确定，可以从以下位置获得：

*   服务器管理员或
*   根 DSE

有关根 DSE 的更多信息，请参阅[LDAP：根 DSE](http://www.ldapguru.info/ldap/the-root-dse.html)。

# php - 运行 js 文件地理定位

> ID：10277160
> 
> 赞同：0
> 
> 时间：2012-04-23T08:27:07.760
> 
> 标签：php, javascript, html

我想运行一个js文件。目前我正在使用此代码

```
addScript("http://domain.com/file.js"); 
```

但我想要一些代码，比如在国家/地区执行这个 js 文件，就像这样

[http://j.maxmind.com/app/geoip.js](http://j.maxmind.com/app/geoip.js)

var country= geoip_country_code();

如果（国家==“GB”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:22:07.667

您想提供由 PHP 生成的 .js，其内容取决于请求来自的国家/地区？

如果是这样，您可以使用 PHP 的 GeoIP 扩展：http: [//www.maxmind.com/app/php](http://www.maxmind.com/app/php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:30:07.067

除了 Jack 的回答 (+1)，如果您使用 GeoIP PHP 模块，这里还有一些代码应该可以工作：

```
addScript("http://domain.com/javascriptgenerator.php"); 
```

然后在 中`javascriptgenerator.php`，您只需执行以下操作：

```
<?php 
header("Content-type: application/javascript"); //Tell the browser we're sending JS

require_once "Net/GeoIP.php"; //Path to GeoIP PHP module

$geoip = Net_GeoIP::getInstance("/path/to/geoipdb.dat");

try {
   switch ($geoip->lookupCountryCode($_SERVER['REMOTE_ADDR'])) { 
        case "CA":
           //Generate JS for Canadian users
        break;
        case "FR":
           //Generate JS for French users
        break;
        //Any number of case statements goes here
        default:
           //Show default JS code 
    }
} catch (Exception $e) {
   //Handle exception
   //You probably want to show the default JS code if the geo-location is unsuccesful
}
?> 
```

另请参阅[http://pear.php.net/manual/en/package.networking.net-geoip.lookupcountrycode.php](http://pear.php.net/manual/en/package.networking.net-geoip.lookupcountrycode.php)

# java - AppEngine 开发服务器 - 并发任务限制

> ID：10277161
> 
> 赞同：1
> 
> 时间：2012-04-23T08:27:13.880
> 
> 标签：java, google-app-engine, mapreduce

当我使用 8 个工作人员在应用引擎开发服务器上启动 mapreduce 时，我可以看到只有 2 个任务并行运行，而不是 8 个。有没有办法绕过这个限制？

谢谢。

编辑：当我使用命令行启动开发服务器时，没有提供 java 代理，我注意到只有 1 个任务是并行运行的。当我在命令行参数中提供 java-agent 时，我注意到 2 个任务是并行运行的。因此，我假设这是管理本地服务器上运行的线程数的应用程序引擎 java-agent。，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:18:37.240

据我所知，Java 开发服务器没有线程限制，而 Python 开发服务器是单线程的，因此您无法真正并行运行。

# java - 纯Java：我怎么知道我的线程是否在休眠？

> ID：10277170
> 
> 赞同：2
> 
> 时间：2012-04-23T08:28:22.710
> 
> 标签：java, multithreading, synchronized

我有一个线程可以做几件事。其中之一就是只睡一段时间。正常睡眠后它会调用`delayFinished()`方法，但如果睡眠被中断，则`delayFinished()`不应调用。我还需要一个中止睡眠的方法，它可能被其他线程调用。

所以这是捕捉我意图的实现，但我认为它不会起作用：

```
public class MyThread extends Thread {
   private boolean sleeping=false;
   private Object sleepingControl=new Object();

   //... other unrelated stuff...

   private void delay() {
      try {
          synchronized(sleepingControl) {
             sleeping=true;         
             sleep(delay);
             sleeping=false;                        
             delayFinished();
          }
      } catch (InterruptedException e) {
          sleeping=false;
      }
    }
    public void abortDelay() {
          synchronized(sleepingControl) {
             if (sleeping)          
                interrupt();
          }
    }
 } 
```

If`delay()`被调用，并且当它处于睡眠状态时，`abortDelay()`被另一个线程（主要用例）调用，`abortDelay()`将挂在同步语句上，因为调用者`delay()`拥有该监视器并且尚未放弃它。

另一方面，如果延迟以这种方式实现：

```
 private void delay() {
      synchronized(sleepingControl) {
         sleeping=true;         
      }
      try {              
             sleep(delay); 
```

有可能`delay()`被调用，完成同步块设置 sleep 为 true，但随后`abortDelay()`被调用，`interrupt()` 即使线程尚未开始睡眠，它也会调用。

任何人都可以建议对这些尝试进行任何改进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T08:33:38.820

您需要调查 Object.wait()/notify() 而不是使用 sleep()。使用 wait() 的关键之一是它释放对象上的锁，同时等待允许另一个线程获取锁并使用 notify() 将其唤醒。

例如

```
public class MyThread extends Thread {
   private boolean aborted = false;
   private final Object sleepingControl=new Object();

   //... other unrelated stuff...

   private void delay() {
      try {
          synchronized(sleepingControl) {
             sleepingControl.wait(delay);

             if (!aborted)
                 delayFinished();
          }
      } catch (InterruptedException e) {
      }
    }
    public void abortDelay() {
          synchronized(sleepingControl) {
             aborted = true;
             sleepingControl.notify();
          }
    }
 } 
```

这也不是全部，因为 wait() 有一个奇怪的实现怪癖，它可以虚假地唤醒。因此，您需要手动循环 wait() 调用，如果它返回，请检查时间是否实际到期。

实际上，我认为您可以通过`java.util.concurrent`类更简单地实现上述目标。看看`Lock`课堂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:45:08.200

Mike Q. 的答案是您想要的答案。但是要使您的代码正常工作，请`sleeping`设置 volatile 并从`abortDelay`. 那么你唯一的问题是可能会在任一 line 之前立即`abortDelay`捕获。因此，在这两行之后，调用以清除可能的设置。`delay``sleeping = false;``interrupted()`

**更正/详细说明：** `abortDelay`需要同步。代码应如下所示：

```
private final Object     sleepingControl = new Object();
private volatile boolean sleeping;

private void delay() {
    try {
        sleeping=true;  // Synching not needed.
        sleep(delay);
        // Thread COULD be interrupted at this point!
        // Now makes sure abortDelay sees this change.
        synchronized (sleepingControl)  {
            sleeping = false;
            // Thread can no longer be interrupted.
            // Clear flag if it is set.
            interrupted();
        }
        delayFinished();
    }
    catch (InterruptedException e) {
        // Thread COULD be interrupted at this point!
        synchronized (sleepingControl)  {
            sleeping = false;
            // Thread can no longer be interrupted.
            // Clear flag if it is set.
            interrupted();
        }
    }
}
public void abortDelay() {
    synchronized (sleepingControl)  {
        if (sleeping)
            // At this point, "sleeping" HAS to be true.
            interrupt();
    }
} 
```

# mongodb - 嵌入文档中的“更新插入”

> ID：10277174
> 
> 赞同：13
> 
> 时间：2012-04-23T08:28:32.303
> 
> 标签：mongodb

我目前有以下数据集：

```
{  
    'component_id':1,  
    '_locales':[   
        {  
            'url': 'dutch',  
            'locale': 'nl_NL'  
        } 
    ] (etc)
} 
```

如果我想用语言环境更新行，我会运行类似于：

```
db.components.update(
    {'component_id': 1, '_locales.locale': 'nl_NL'},
    {$set: {'_locales.$': {'url': 'new url','locale':'nl_NL'}}, 
    true
); 
```

这工作正常，直到语言环境不存在：

```
db.components.update(
    {'component_id': 1, '_locales.locale': 'en_US'},
    {$set: {'_locales.$': {'url': 'new url','locale':'en_US'}}, 
    true
); 
```

由于 component_id 上有一个唯一索引，这将引发抱怨重复键的异常。

有没有办法自动添加具有不同语言环境的新“文档”并在它已经存在时更新它？根据使用位置运算符的文档将无法与“更新插入”一起使用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T09:11:43.687

您可以使用[$addToSet](http://www.mongodb.org/display/DOCS/Updating#Updating-$addToSetand$each)添加到集合中，确保没有重复的数组元素，但这不适用于您的“更新”情况。

为了做您想做的事，您需要将数据结构更改为：

```
{
    "_id" : ObjectId("4f9519d6684c8b1c9e72e367"),
    "component_id" : 1,
    "_locales" : {
        "nl_NL" : {
            "url" : "dutch"
        }
    }
} 
```

现在你可以对 nl_NL 语言环境进行更新，只需：

```
db.components.update( { component_id: 1 }, { $set: { '_locales.nl_NL.url' : 'new url' } }, true ); 
```

并且新的语言环境也可以使用，例如：

```
db.components.update( { component_id: 1 }, { $set: { '_locales.en_US.url' : 'American' } }, true ); 
```

您可能还想考虑将语言环境作为嵌套对象的一部分，例如：

```
{
    "_id" : ObjectId("4f9519d6684c8b1c9e72e367"),
    "component_id" : 1,
    "_locales" : {
        "nl_NL" : {
            "url" : "dutch"
            "locale" : "nl_NL"                 
        }
    }
} 
```

这使得在某些情况下更容易检索数据。

# c - mpn_copyi 在 GMP C 库中究竟做了什么？

> ID：10277176
> 
> 赞同：0
> 
> 时间：2012-04-23T08:28:38.583
> 
> 标签：c, gmp

我可以从[GMP 官方文档](http://gmplib.org/manual/Low_002dlevel-Functions.html#index-mpn_005fcopyi-683)中看到：

> **无效 mpn_copyi (mp_limb_t *rp, const mp_limb_t *s1p, mp_size_t n)**
> 
> > 越来越多地从 {s1p, n} 复制到 {rp, n}。
> 
> **无效 mpn_copyd (mp_limb_t *rp, const mp_limb_t *s1p, mp_size_t n)**
> 
> > 从 {s1p, n} 复制到 {rp, n}，递减。

但是，我不明白在这种情况下*越来越多*和*越来越少的意思。*是否*越来越*意味着它将所有肢体从 0 复制到 n？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:44:55.747

使用[源](http://gmplib.org/)，Teabee。

```
void
mpn_copyi (mp_ptr rp, mp_srcptr up, mp_size_t n)
{
  mp_size_t i;

  up += n;
  rp += n;
  for (i = -n; i != 0; i++)
    rp[i] = up[i];
} 
```

并递减：

```
void
mpn_copyd (mp_ptr rp, mp_srcptr up, mp_size_t n)
{
  mp_size_t i;

  for (i = n - 1; i >= 0; i--)
    rp[i] = up[i];
} 
```

# php - 具有特定值的多个文本字段行使用 Ajax

> ID：10277178
> 
> 赞同：1
> 
> 时间：2012-04-23T08:28:42.960
> 
> 标签：php, javascript, html, ajax

我有两个文本字段，无论用户在第一个文本字段中输入什么，它都会由 Ajax 出现在第二个文本字段中。我需要使用 for 循环来拥有多行，并且每一行都有自己的值。 **HTML**

```
<form style="text-align:center" method="post" action="" name="form1">
<?php for($x=0; $x<4; $x++){ ?>
<input type="text" size="30"  id="country" onChange="getCurrencyCode('find_ccode.php?country='+this.value)" />
<input type="text" name="cur_code" id="cur_code" ></p> 
```

**阿贾克斯**

```
function getXMLHTTP() { 
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

function getCurrencyCode(strURL)
{       
    var req = getXMLHTTP();     
    if (req) 
    {
        req.onreadystatechange = function()
        {
            if (req.readyState == 4) 
            {           
                if (req.status == 200)
                {                       
                    document.getElementById('cur_code').value=req.responseText;                     
                } 

            }               
         }          
         req.open("GET", strURL, true);
         req.send(null);
    }           
} 
```

**php**

```
$country=$_REQUEST['country'];
echo $country; 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:47:26.293

试试这样...

```
<form style="text-align:center" method="post" action="" name="form1">
<?php for($x=0; $x<4; $x++){ ?>
<input type="text" size="30"  id="country<?php echo $x; ?>" onChange="getCurrencyCode(<?php echo $x; ?>);" />
<input type="text" name="cur_code" id="cur_code<?php echo $x; ?>" ></p> 
```

javascript函数

```
function getCurrencyCode(num)
{       
    thisval = document.getElementById('country'+num).value;
         if(thisval=="") {
             alert("Enter Proper Values!...");
             return false;   
        }
    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    }catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
     var strURL = "find_ccode.php?country="+thisval;
     ajaxRequest.onreadystatechange =getresult;      
     ajaxRequest.open("GET", strURL, true);
     ajaxRequest.send(null);
}
 function getresult(){
    if(ajaxRequest.readyState == 4){
        document.getElementById('cur_code'+num).value = ajaxRequest.responseText;
    }
 } 
```

# sql-server - Broker Service 发送队列问题

> ID：10277182
> 
> 赞同：0
> 
> 时间：2012-04-23T08:28:57.533
> 
> 标签：sql-server, sql-server-2008, tsql, service-broker

我正在实施许多在两个不同实例上工作的 SSB。它们是基于异步触发器的数据推送模式。

我的 SQL 信息如下所示： Microsoft SQL Server Management Studio 10.50.2500.0 Microsoft Analysis Services Client Tools 10.50.2500.0 Microsoft Data Access Components (MDAC) 6.1.7601.17514 Microsoft MSXML 3.0 4.0 5.0 6.0 Microsoft Internet Explorer 9.0.8112.16421 Microsoft .NET Framework 2.0.50727.5448 操作系统 6.1.7601

我注意到有些奇怪，我所有的发送队列都充满了来自 [http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog类型的消息](http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog)

肯定会影响队列性能，我必须摆脱这些消息。

1-我应该为发送队列分配一个阅读器来结束这些消息吗？

2-或者在结束对话时我在接收方做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:24:14.937

现在设计的 Service Broker 消息始终是对话，这意味着对话中始终有两个参与者。当对话的一方完成时，它调用[END CONVERSATION](http://msdn.microsoft.com/en-us/library/ms177521.aspx)，它将 EndDialog 消息类型发送给对话中的另一个参与者。应该处理这些消息，如果没有其他原因，只是为了确保它们不占用空间。您可以在队列上创建一个激活存储过程来处理这些。这样，它会自动发生，您不必担心。

# javascript - 在调用 android javascript 方法时传递 json 对象？

> ID：10277184
> 
> 赞同：3
> 
> 时间：2012-04-23T08:29:14.260
> 
> 标签：javascript, android, webview

我想从android活动中调用一个方法说javascript的成功（消息）。我这样做如下：

```
webView.loadUrl(javascript:success(message)); 
```

[但是这条消息 = 来自http://weather.yahooapis.com/forecastjson?w=12844782&u=c](http://weather.yahooapis.com/forecastjson?w=12844782&u=c)响应的 JSON 对象。那么我如何在android中制作正确的url（消息）？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:03:51.490

1.  您应该从指定的 url (http://weather.yahooapis.com/forecastjson?w=12844782&u=c) 读取所有内容。使用 HttpClient 或 URL 连接来完成。如果您不知道该怎么做，请告诉我。将内容保存到某个变量（比如消息）
2.  那么您应该调用以下内容： webView.loadUrl("javascript:success(" + message + ")");

几乎和你写的一样:)

# android - 列表视图 OnitemClick 动画

> ID：10277190
> 
> 赞同：0
> 
> 时间：2012-04-23T08:29:34.683
> 
> 标签：android

我做了一个列表视图，在项目点击时有动画，我使用数组适配器作为数据输入，在数组适配器中我在项目点击中调用动画类，保持点击变量 clickedposition -1 在那里我调用动画....所有细节在代码中......
`

```
public class TaskListAdapter extends ArrayAdapter<FTask> {

    protected FTask[] values= null;
    protected Context context = null;
    private int clickedPosition = -1;

    public TaskListAdapter(Context context,FTask[] values) {
        this(context, R.layout.task_row, values);
    }
    public TaskListAdapter(Context context, int taskRow, FTask[] values) {
        super(context, taskRow, values);
        this.values = values;
        this.context = context;

    }
    public void toggle(int position) {
        //If its already opened. Close it. Else open it.
        if(clickedPosition == position){
            clickedPosition = -1;
        }else{
            clickedPosition = position;
        }
        notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if (convertView == null) {
            row = View.inflate(context, R.layout.task_row, null);
            LinearLayout single_message_holder = (LinearLayout) row
                    .findViewById(R.id.single_task_holder);
            single_message_holder.setBackgroundColor(Color.WHITE);
        }

        final FTask tsk = values[position];
        TextView service_description = (TextView) row.findViewById(R.id.task_description);
        service_description.setText(tsk.getBody());

        TextView service_detail_description = (TextView) row.findViewById(R.id.task_detail_description);
        service_detail_description.setText(tsk.getBody());
        LinearLayout ani=(LinearLayout)row.findViewById(R.id.ani);

        if (clickedPosition == position) {

            Log.d("****Position*****",String.valueOf(position));
            //service_detail_description.setAnimation(AnimationUtils.loadAnimation(context, 
              //      R.anim.push_up_in));
            ani.startAnimation(new VisibleAni(1.0f, 1.0f, 0.0f, 1.0f, 800, ani, true,true));
            ani.setVisibility(View.VISIBLE);
            service_description.setVisibility(View.GONE);
            Log.d("SENDING TASK STATUS", "AGAINNNNN");
            sendTaskStatus(tsk);

        } else {
            //ani.startAnimation(new VisibleAni(1.0f, 1.0f, 0.0f, 1.0f, 800, ani, true,false));
            ani.setVisibility(View.GONE);
            service_description.setVisibility(View.VISIBLE);

        }

        ImageView icon = (ImageView) row.findViewById(R.id.taskicon);
        if (tsk.isDone()==1) {
            icon.setImageResource(R.drawable.done);
            service_description.setPaintFlags(service_description.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
        } else {
            icon.setImageResource(R.drawable.undone);
            service_description.setPaintFlags(service_description.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG );
        }

        icon.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                if(tsk.isDone()==0){
                    tsk.setDone(1);
                    notifyDataSetChanged();
                }
                else{
                    tsk.setDone(0);
                    notifyDataSetChanged();
                }
            }
        });
        return row;
    }
    private void sendTaskStatus(FTask tsk){
        //TODO pathch, 
        Log.e("TaskListAdapter",    "Set status");
        if (LoginManager.getSessionId() == null ||LoginManager.getSessionId().equals("DUMMY") || LoginManager.getSessionId().equals("")){
            Log.e("INVALID USER_ID or SESSION_ID",  "Not connectind to network");
            return;
        }
        NetworkDataFetcher fetcher = new NetworkDataFetcher(NetworkDataFetcher.LINK_DATA_ACCESS);

        try {
            String response = fetcher.execute(new String[] { MessageManager.MSG_JSON_ID_TYPE, MessageManager.MSG_JSON_ID_SESSIONID, MessageManager.MSG_JSON_ID_MID},
                    new String[] {"message_status", LoginManager.getSessionId(), tsk.getTskid() }).get();

            if(response == null){
                Log.e("TaskListAdapter", "response null");
                return;
            }
            Log.w("TasksListAdapter", "Response = "+response);
            return;

        } catch (InterruptedException e) {
            Log.d("InterrupptedException", "InterrupptedException");
            return;
        } catch (ExecutionException e) {
            Log.d("ExecutionException", "ExecutionException");
            return;
        }
    }
} 
```

`And the Animation Class`

```
import android.view.View;
import android.view.animation.ScaleAnimation;
import android.view.animation.Transformation;
import android.widget.LinearLayout.LayoutParams;

public class VisibleAni extends ScaleAnimation {
    private View mView;

    private LayoutParams mLayoutParams;

    private boolean mclick;

    private int mMarginBottomFromY, mMarginBottomToY;

    private boolean mVanishAfter = false;

    public VisibleAni(float fromX, float toX, float fromY, float toY, int duration, View view,
            boolean vanishAfter,boolean click) {
        super(fromX, toX, fromY, toY);
        setDuration(duration);
        mView = view;
        mclick = click;
        mVanishAfter = vanishAfter;
        mLayoutParams = (LayoutParams) view.getLayoutParams();
        int height = mView.getHeight();
        mMarginBottomFromY = (int) (height * fromY) + mLayoutParams.bottomMargin - height;
        mMarginBottomToY = (int) (0 - ((height * toY) + mLayoutParams.bottomMargin)) - height;
        if (!mclick) {
            mView.setVisibility(View.GONE); 
        }

    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);
        if (interpolatedTime < 1.0f) {
            int newMarginBottom = mMarginBottomFromY + (int) ((mMarginBottomToY - mMarginBottomFromY) * interpolatedTime);
            mLayoutParams.setMargins(mLayoutParams.leftMargin, mLayoutParams.topMargin,
                mLayoutParams.rightMargin, newMarginBottom);
            mView.getParent().requestLayout();
        } else if (mVanishAfter ) {
            mView.setVisibility(View.VISIBLE);
        }

    }

} 
```

`And the XML file related to this is ..........`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:descendantFocusability="blocksDescendants"
    >
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/single_task_holder"
        android:gravity="top|left"
        android:paddingRight="10dp"
        android:paddingLeft="0dp"
        android:paddingTop="0dp"
        android:background="@color/white"
        android:orientation="horizontal"

        >

         <LinearLayout
             android:id="@+id/task_icon_lay"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:orientation="horizontal" >

                 <ImageView 
                    android:id="@+id/taskicon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top"        

                    />

                 </LinearLayout>
                 <LinearLayout android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:orientation="vertical">
                <TextView
                    android:id="@+id/task_description"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:layout_width="fill_parent" 
                    android:layout_height="fill_parent"
                    android:paddingBottom="10dp"
                    android:paddingLeft="10dp"
                    android:singleLine="true"
                    android:ellipsize="end"
                    android:paddingRight="20dp"
                    android:textSize="16dp"
                    android:textColor="@color/body_color"
                    />
                </LinearLayout>
                <LinearLayout android:layout_width="fill_parent"
                     android:layout_height="wrap_content"
                     android:id="@+id/ani"
                     android:orientation="vertical">
                <TextView
                    android:id="@+id/task_detail_description"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:background="@android:drawable/edit_text"
                    android:layout_width="fill_parent" 
                    android:layout_height="fill_parent"
                    android:paddingBottom="15dp"
                    android:paddingLeft="15dp"
                    android:paddingTop="15dp"
                    android:paddingRight="20dp"
                    android:textSize="16dp"
                    android:textColor="@color/body_color"
                    />

                </LinearLayout>

     </LinearLayout>

</LinearLayout> 
```

` 在第一次单击时它工作正常，但在第二次我单击同一个项目时它变得不规则............

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T09:40:02.987

而不是动画视图（在您的情况下为线性布局）为什么不通过将 OnItemClickListener 设置为您的 ListView 来动画视图

这将按如下方式完成

```
ListView lv = (ListView)findViewById(R.id.listView);
lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
                    final View v = arg1;
                    LinearLayout ani = (LinearLayout)v.findViewById(R.id.ani);
                    ani.startAnimation(new VisibleAni(1.0f, 1.0f, 0.0f, 1.0f, 800, ani, true,true));
                    ani.setVisibility(View.VISIBLE);
                    }
} 
```

这应该适用于您的情况

# c++ - C++：允许访问受保护的类成员而不是私有成员

> ID：10277191
> 
> 赞同：4
> 
> 时间：2012-04-23T08:29:49.103
> 
> 标签：c++, class

我知道你可以通过继承来做到这一点，但是你应该使用继承来解决“是”的情况。我也知道有朋友，但他们也允许访问私人成员。

有没有办法做到这一点（允许访问受保护的类成员而不是私人成员）？

重新表述这个问题，我有 1 类和 2 类。我希望 2 类可以访问 1 类的受保护和公共成员，但不能访问它的私有成员。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:40:21.527

它并不优雅，但这可能对您有用：

```
class B;

class A {
protected:
    int x;
private:
    int y;
};

class A_wrapper : public A {
    friend B;
};

class B {
public:
    A_wrapper a;
    int foo() {
        a.x;   // Ok
        a.y;   // Compiler error!
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:24:54.163

很久以前，在这个网站上，我提出了一个使用`Key`. 这个想法是主类记录接口的哪些部分可以公开访问，哪些需要密钥，然后将与密钥的友谊授予需要它的人。

```
class Key { friend class Stranger; Key() {} ~Key() {} };

class Item {
public:
    void everyone();

    void restricted(Key);
private:
}; 
```

现在，只能`Stranger`使用该`restricted`方法，如下所示：

```
class Stranger {
public:
    void test(Item& i) {
        Key k;
        i.restricted(k);
    }

    Key key() { return Key(); }

    Key _key;
};

class Other {
    void test(Item& i) {
        Stranger s;
        i.restricted(s.key()); // error: ‘Key::~Key()’ is private
                               // error: within this context
    }

    void test2(Item& i) {
        Stranger s;
        i.restricted(s._key); // error: ‘Key::~Key()’ is private
                              // error: within this context
                              // error:   initializing argument 1 of ‘void Item::restricted(Key)’
    }
}; 
```

这是一个非常简单的方案，它允许使用更精细的方法来实现完全的友谊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T08:48:00.420

Oli 提供了一个更接近的解决方案 (+1)，但您也可以使用选择性朋友来解决它：

```
#include <iostream>

class t_thing;

class t_elsewhere {
public:
    void print(const t_thing& thing);
};

class t_thing {
public:
    class t_selective_friend {
        static int Prot(const t_thing& thing) {
            return thing.prot;
        }

        friend class t_elsewhere;
    };
public:
    int publ;
protected:
    int prot;
protected:
    int priv;
};

void t_elsewhere::print(const t_thing& thing) {
    std::cout << t_thing::t_selective_friend::Prot(thing) << std::endl;
}

int main() {
    t_thing thing;

    thing.publ; /* << ok */
    thing.prot; /* << error */
    thing.priv; /* << error */
    t_elsewhere().print(thing); /* << ok */
    return 0;
} 
```

有时这种冗长/控制是好的……</p>

# matlab - 计算航向变化

> ID：10277193
> 
> 赞同：0
> 
> 时间：2012-04-23T08:30:06.787
> 
> 标签：matlab, conceptual

我有一个 GPS 跟踪日志，我已经注册了导航的航向（即对于每个记录的点我都跟踪航向）。据我观察，这个标题在 0 到 360 之间变化。所以，在日志中我们可以找到：

> 1.  0.002
> 2.  0.1
> 3.  359.2
> 4.  0.01

现在考虑第 3 点和第 4 点。显然，汽车还没有进行 360 度旋转。它只是在另一个航向轨迹上移动几度（0.81）。所以边距不是 abs(359.2-0.01) 或 abs(0.01-359.2)。我显然需要一种更复杂的方法来计算变化。我认为我需要计算 abs(359.2-0.01)=359.19 和下一个 360-359.19=0.81。我可以将其视为计算方向变化的标准操作方式吗？我在matlab上，所以也许有办法直接做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:34:18.207

这可能会做你想要的：

```
mod(a-b+180, 360) - 180 
```

例子：

```
>> f = @(a,b) mod(a-b+180, 360) - 180;
>> f(359.2, 0.01)
ans = -0.81000
>> f(0.01, 359.2)
ans =  0.81000
>> f(358.2, 359.2)
ans = -1
>> f(0.01, 1.01)
ans = -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:47:56.493

Oli Chalesworth 的答案如你所愿。还有一个 matlab 函数[unwrap](http://www.mathworks.de/help/techdoc/ref/unwrap.html)可以加减 2π 以最小化两点之间的相对角度。缺点是它期望角度以弧度为单位。

```
original_angles=[.002 .1 359.2 .001];
smooth_angles=180/pi*unwrap(original_angles*pi/180) 
```

给出smooth_angles =

```
 0.0020    0.1000   -0.8000    0.0010 
```

# gwt - GWT 可编辑网格：如何从字段更新程序恢复更改？

> ID：10277195
> 
> 赞同：2
> 
> 时间：2012-04-23T08:30:10.180
> 
> 标签：gwt, datagrid

我已经实现了一个可编辑的网格，并且我使用了一个字段更新器来更新模型值。保存到数据库不是问题，因为我可以直接将整个模型保存到数据库中。问题在于单击取消或转义，我想恢复到旧值，但我无法实现相同的目标。任何想法如何去做？

**注意：** *每当更改完成时，我都会更新模型*

1）我不想在单击取消时再进行一次异步调用。

2）我真的想避免克隆和存储机制。

我目前正在使用 GWT 2.4.0

```
column.setFieldUpdater(new FieldUpdater<Abc, String>() {
  @Override
  public void update(Abc object, String value) {
    object.set(value);
    table.redraw();
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T12:28:28.267

我有一个类似的问题。当用户更改值时，向服务器发送一个 asyncCallback。如果成功更新数据提供者，如果失败，使用旧值更新数据提供者。这似乎很容易......但是......该表没有用旧值更新。此外，即使成功，文本框仍保持正确的值，但未按照服务器的预期格式化（它是双精度值，我希望看到小数）。所以又错了。

似乎未从 AsyncDataProvider 更新可编辑单元格。

解决方案非常简单。只需**在每次更新 FieldUpdater 时调用 clearViewData**！！！这样，我们确保单元格显示来自数据提供者的数据，而不是用户输入的数据。条目数据安全地存储在数据提供者中。

希望能帮助到你。

```
column.setFieldUpdater(new FieldUpdater<SQLRow, String>() {
    @Override
    public void update(int index, SQLRow sqlRow, String value) {
        updaterCaller.call(index, fi, sqlRow, value);//Your async method...do mind my params
        ((EditTextCell)columnFinal.getCell()).clearViewData(sqlTable.getKeyProvider().getKey(sqlRow));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:28:18.313

看看[Showcase 中的 Cell Sample](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellSampler)，它将更改排队并允许您之后将它们“提交”到底层模型。取消更改将是清除队列**并**为每个已编辑项目调用[`clearViewData`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/AbstractEditableCell.html#clearViewData%28java.lang.Object%29)每个单元格以使其忘记已编辑值的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:38:06.250

您需要一个密钥提供者和`clearViewData`Thomas 建议的呼叫。我在某处读到，如果您没有密钥提供程序，您可以使用该值作为密钥，但这对我不起作用。

```
 private static final int MAX_AGE = 150;

  private static class Contact {
    public String name;
    public String address;
    public int age;
  }

  private static final ProvidesKey<Contact> KEY_PROVIDER = new ProvidesKey<Contact>() {
    @Override
    public Object getKey(Contact row) {
      return row.name; // assuming names are unique
    }
  };

  public void onModuleLoad() {
    table = new CellTable<Contact>(KEY_PROVIDER);
    ....

    final TextInputCell ageCell = new TextInputCell();
    Column<Contact, String> ageColumn = new Column<Contact, String>(ageCell) {
      @Override
      public String getValue(Contact row) {
        return String.valueOf(row.age);
      }
    };
    ageColumn.setFieldUpdater(new FieldUpdater<Contact, String>() {
      @Override
      public void update(int index, Contact row, String value) {
        try {
          int intVal = Integer.parseInt(value.trim());
          if (intVal < 0 || intVal > MAX_AGE) {
            throw new NumberFormatException();
          }
          row.age = intVal;
        } catch (NumberFormatException e) {
          ageCell.clearViewData(KEY_PROVIDER.getKey(row));
        }
        table.redraw();
      }
    });

    ...
    table.addColumn(ageColumn, "Age");
  } 
```

# c++ - 如何通过编译器设置（不是编译指示）告诉 GCC 将结构大小边界设置为 4 个字节？

> ID：10277196
> 
> 赞同：2
> 
> 时间：2012-04-23T08:30:10.570
> 
> 标签：c++, gcc, compiler-warnings, compiler-optimization, memory-alignment

我希望我在 GCC 下编译的 c++ 程序具有 4 个字节（结构成员）的最大对齐。我真的可以通过#pragma pack 指令来做到这一点。但是，在我的情况下这很不舒服，因为该项目非常大，我需要使用#pragma pack 制作一个标题，它必须包含在任何地方。现在，gcc 编译器有一个选项 -mstructure-size-boundary=n 记录在这里[http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html#ARM-Options](http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html#ARM-Options)，它说“允许的值为8， 32 和 64。” 实际上，当我尝试将其设置为 4 字节时，编译器会抛出警告“结构大小边界只能设置为 8、32 或 64”（令人惊讶，嗯？）。但是为什么我可以通过#pragma 将其设置为 4？有谁知道如何通过编译器设置将 gcc 结构对齐设置为 8-32-64 以外的其他值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:39:47.290

-mstructure-size-boundary=n 指定位对齐，而#pragma pack 使用字节。

4 字节 -> 32 位。

另请参见 gcc 选项 -fpack-struct

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:40:09.147

您对 mstructure-size-option 的理解是错误的。它指的是结构的大小（顾名思义）。这与成员的对齐方式无关。为此，您可以使用（除了编译指示）选项`-fpack-struct[=n]`.

# javascript - fb：就像被要求登录时 IE 不起作用

> ID：10277200
> 
> 赞同：0
> 
> 时间：2012-04-23T08:30:33.607
> 
> 标签：javascript, popup, facebook-like, facebook-social-plugins

我正在将 Facebook Like 按钮添加到我的网站。

我已将以下内容添加到我的 aspx 页面：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
      FB.init({
          appId: 'ID',
          status: true,
          cookie: true,
          xfbml: true  // parse XFBML
      });
  };

  (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
  } (document, 'script', 'facebook-jssdk'));</script>
</script> 
```

这要`html`标记：

```
xmlns:fb="http://www.facebook.com/2008/fbml"   xmlns:og="http://ogp.me/ns#"  prefix="og: http://ogp.me/ns#" 
```

这是我喜欢的：

```
<fb:like  send="false" layout="standard" width="350" style="height:22px;" show_faces="false" action="like" colorscheme="light"></fb:like> 
```

我确实为 OpenGraph 添加了元标记。

在所有浏览器上对其进行测试时，它都可以正常工作。当未登录 Facebook 并且您需要登录才能喜欢该项目时，会出现一个弹出窗口，并在您输入正确的用户名和密码后关闭。

但在 IE (9) 中会出现一个窗口，在我输入用户名和密码后，它会重定向到此链接： http: [//www.facebook.com/connect/connect_to_external_page_reload.html](http://www.facebook.com/connect/connect_to_external_page_reload.html)

这是一个空白页面，之后什么也没有发生，它没有关闭，我不能喜欢任何项目。

即使我在点击喜欢之前已经在 IE 上登录了 Facebook，我仍然会得到同样的东西来输入用户名和密码。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T15:37:52.467

在 IE 中让一切为我工作需要一整天。最后这就是我所做的。

1.  在我页面的开头，我添加了以下内容

    ```
     <html lang="en" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#"> 
    ```

2.  我使用 XFBML 格式添加了 facebook like 和 send 按钮（由于某种原因，我无法让 HTML 5 版本工作） 注意：我还必须单独添加它们。出于某种原因，当我不使用 FB:Send 并使用 FB:like send="true" 时，它在 IE 10 中不起作用。如果您只想要类似的东西，请不要添加 FB:Send 行。

    ```
     <fb:like href="http://www.domain.com" send="false" layout="button_count" width="60" show_faces="false" action="like" font=""></fb:like>

     <fb:send href="http://www.domain.com"></fb:send> 
    ```

3.  我将脚本添加到页面中

    ```
    <div id="fb-root"></div>`
    <script> (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk')); </script> 
    ```

4.  我添加了 channelUrl 以确保它在 IE 8 和 9 中工作

    ```
    <script>
    window.fbAsyncInit = function () { //fbAsyncInit prevents call of FB.getLoginStatus before the SDK is loaded and/or initialized
        FB.init({
            appId: "You app ID here bunch of digits",
            status: true, // check login status
            cookie: true, // enable cookies to allow server to access session,
            xfbml: true, // enable XFBML and social plugins
            oauth: true, // enable OAuth 2.0
            channelUrl: 'http://channel.html' //custom channel
        });
    }; 
    ```

5.  创建了 Channel.html 文件，其中包含以下内容

    ```
    <script src="//connect.facebook.net/en_US/all.js"></script> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:40:57.003

我面临着同样的问题。我发现在 IE9 中禁用保护模式设置可以解决问题。您可以在 Internet 选项 -> 安全 -> Internet -> 启用保护模式复选框中找到它。让我知道这是否有帮助。

# android - 使用 C++ 代码在 Android 应用程序中损坏的参数堆栈

> ID：10277201
> 
> 赞同：1
> 
> 时间：2012-04-23T08:30:35.620
> 
> 标签：android, c++, android-ndk

我在一个通过 Android NDK 使用本机 C++ 代码的 Android 应用程序中有一些奇怪的结果。当我进行自定义结构的按值调用时，结构成员的值会以某种方式混淆和损坏。这是导致此问题的代码：

ndkfoo.h 的内容：

```
#ifndef NDKFOO_H_
#define NDKFOO_H_

typedef struct _Point
{
int x;
int y;
} Point;

typedef struct _TdTarget
{
Point tl;       /**< top-left corner */
Point tr;       /**< top-right corner */
Point br;       /**< bottom-right corner */
Point bl;       /**< bottom-left corner */
Point center; /**< estimated center point of the target */
} TdTarget;

#endif /* NDKFOO_H_ */ 
```

ndkfoo.c 的内容：

```
#include "ndkfoo.h"
#include <stdio.h>
#include <string.h>
#include <jni.h>

Point point(int x, int y){
    Point p;
    p.x = x;
    p.y = y;

    return p;
}

void doSomething(TdTarget trgt){
    int i = 0;
    int db1 = sizeof(TdTarget);
    int db2 = db1 + 5;
    if(i == 0)
        printf("");
}    

jstring Java_com_sbkr83_ndkfoo_NdkFooActivity_invokeNativeFunction(JNIEnv*          env,         jobject javaThis) {

TdTarget trgt;
trgt.tl = point(1,2);
trgt.tr = point(3,4);
trgt.br = point(5,6);
trgt.bl = point(7,8);
trgt.center = point(9,11);
int db4 = sizeof(TdTarget);
int db6 = db4 + 5;

doSomething(trgt);

  return "";
} 
```

Android.mk 的内容：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Here we give our module name and source file(s)
LOCAL_MODULE    := ndkfoo
LOCAL_SRC_FILES := ndkfoo.c

include $(BUILD_SHARED_LIBRARY) 
```

Application.mk 的内容：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi-v7a 
```

以及 NdkFooActivity 的内容：

```
package com.sbkr83.ndkfoo;

import android.app.Activity;
import android.os.Bundle;

public class NdkFooActivity extends Activity {

  // load the library - name matches jni/Android.mk
  static {
    System.loadLibrary("ndkfoo");
  }

  // declare the native code function - must match ndkfoo.c
  private native String invokeNativeFunction();

  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // this is where we call the native code
        invokeNativeFunction();
    }
} 
```

这是调用 doSomething 前后变量的调试器输出。查看 struct trgt 的值：

打电话前：

```
env 0x0000aeb8  
javaThis    0x2afca558  
trgt    {...}   
    tl  {...}   
        x   1   
        y   2   
    tr  {...}   
        x   3   
        y   4   
    br  {...}   
        x   5   
        y   6   
    bl  {...}   
        x   7   
        y   8   
    center  {...}   
        x   9   
        y   11 
```

在调用 doSomething 之后：

```
trgt    {...}   
    tl  {...}   
        x   5   
        y   6   
    tr  {...}   
        x   7   
        y   8   
    br  {...}   
        x   9   
        y   11  
    bl  {...}   
        x   9   
        y   11  
    center  {...}   
i       2   
db1     1   
db2 2123359160 
```

如您所见，这些值被混淆和损坏了。非常有趣的是，局部变量的值也不正确。在我看来，带有局部变量和参数的堆栈框架完全搞砸了。但我不知道为什么。相同的代码在带有 MS Visual Studio 的 Windows 系统上运行没有任何错误。

我的开发系统：Windows XP SP 3 32-bit Android SDK 19 Android NDK 7rb Eclipse Indigo Java JDK 7.3 Cygwin 1.7.11-1

该问题也出现在 Win 7 或 Mac 等其他系统上。

所以，如果有人知道如何解决这个问题并愿意与我分享这个想法，我会很高兴。

提前致谢！

再见，拉乌尔。

编辑：现在变得更清楚了。看来，我们用来检索这些值的 gdb 调试器刚刚出现故障。我们通过 Android 日志制作了一些测试日志，以了解调试器是否正常工作。

所以，这个问题的解决方案引出了下一个问题：为什么 ndk-gdb 调试器不能正常工作？

如果有人对此有想法，我将不胜感激。

我非常感谢我们得到的帮助。

# java - 将活动发送到后端和前端

> ID：10277207
> 
> 赞同：1
> 
> 时间：2012-04-23T08:31:02.233
> 
> 标签：java, android, eclipse

我在后台运行的 android 应用程序和 SMS 服务中有许多活动。

我的主要活动是`ZigbeeActivity.java`当我点击退出时我有一个退出按钮我想将应用程序发送到后台执行此操作我使用`MoveTaskToBack`方法，现在我的 smsService 正在后台运行，接收短信但是当我再次运行我的 Zigbee 活动时我的应用程序安装在设备上它开始启动，但没有显示任何数据保存它我认为它将启动新的 Zigbee 应用程序。谁能告诉我如何在前台调用我的应用程序？

onCreate 方法启动服务的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    try{
    setContentView(R.layout.main);
            startService(new Intent(this,SmsService.class));
    }catch(Exception e){}

} 
```

这是将活动发送到后台的代码

案例 R.id.btnExit：

```
 ConstantClass.Clear_Main_Screen = false;
            moveTaskToBack(true);
            break; 
```

# javascript - 单选按钮（带有单击事件）未在 Firefox 中传递参数

> ID：10277210
> 
> 赞同：3
> 
> 时间：2012-04-23T08:31:08.647
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的表单中嵌入了单选按钮

```
<%= f.radio_button :name_present,true,:class => "namePresent"%>
<%= f.radio_button :name_present,false,:class => "namePresent"%> 
```

我的 application.js 文件包含

```
$(".namePresent").live('click',function(e){

     $("#form").submit();
//form is the id of my form_for
 }); 
```

所有参数都在 chrome 中传递，但在 firefox 中来自单选按钮的参数没有传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:43:38.473

我应该指出**live**和**bind**都被弃用了。您可以同时使用 . **上（）**

尝试：

```
$(".namePresent").on('click',function(e){

   $("#form").submit();
//form is the id of my form_for
 }); 
```

看[链接](https://stackoverflow.com/questions/4944293/jquery-liveclick-vs-click)。

# vb.net - 代码编辑快捷方式

> ID：10277216
> 
> 赞同：2
> 
> 时间：2012-04-23T08:31:35.790
> 
> 标签：vb.net

我注意到当我将光标移到我的代码中的一个单词上时，vb 会突出显示我的代码中所有相同的单词。有没有同时编辑所有单词的快捷方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:01:17.400

你需要一个重构工具。
Visual Studio 带有一个非常简单的重构工具，可从重构工具栏或重构上下文菜单中获得。
您正在寻找的功能称为重命名，其快捷方式是`CTR+R, CTRL+R`
（意味着按两次键 CTRL 和 R）

其他替代品（不是免费的）是[ReSharper](http://www.jetbrains.com/resharper/)或[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)

重构过程的一个很好的解释可以在[Martin Fowler 的书 Refactoring](http://martinfowler.com/refactoring/)中找到：

`Refactoring is the process of changing a software system in such a way that it does not alter the external behavior of the code yet improves its internal structure. It is a disciplined way to clean up code that minimizes the chances of introducing bugs. In essence, when you refactor you are improving the design of the code after it has been written.`

# entity-framework - EF4：非持久化元素

> ID：10277219
> 
> 赞同：0
> 
> 时间：2012-04-23T08:31:42.967
> 
> 标签：entity-framework, code-first

我首先使用 EF4 代码填充树，以允许用户将他们的报告组织到文件夹中。我的模型不是很简单，因为它是基于现有数据库的。我有 1 个数据库表映射到模型中的 2 个类（每个层次结构的表），这些类继承自另一个：

*   基类：组织
*   继承类：Organization_Report
*   继承类：Organization_Folder

文件夹具有作为组织实例集合的 Children 属性。在组织类中，我有一个 NumParent 成员和一个导航属性：指向父文件夹的父。

顶级元素具有 NumParent = null。

我希望将没有父级（NumParent = null）的报告分组到“虚拟”（即不持久）文件夹中：“未组织元素”。

换句话说，在查询数据库时，我必须为每个具有 NumParent = Nothing 的报告创建“未组织元素”文件夹并将 Parent 设置为它。保存到数据库时，我希望不添加此文件夹。

EF 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:55:11.790

它与 EF 无关 - 它是您的应用程序逻辑。EF 只是加载或持久化数据的工具。如果你需要任何额外的东西，你将不得不自己实现它。在这种情况下，您可能需要实现处理程序`ObjectContext.ObjectMaterialized`以将虚拟文件夹分配给加载的实体，并覆盖`ObjectContext.SaveChanges`或实现处理程序`ObjectContext.SavingChanges`以在持久更改之前删除该虚拟文件夹 - 这将很棘手，因为您必须修复对象树并确保存在没有引用您的虚拟文件夹，否则它将被保留。这也意味着在您持久更改后，您的数据将不包含该特殊文件夹。

如果您使用 DbContext API，您仍然可以将您的上下文转换为 ObjectContext 并分配处理程序。

# c# - 如何在 PictureBox 中画一个正方形？

> ID：10277220
> 
> 赞同：1
> 
> 时间：2012-04-23T08:31:49.037
> 
> 标签：c#, winforms, picturebox

我的 C# Windows-Forms 项目有问题。我正在尝试绘制一个正方形，并且想在图片框中显示该正方形。我怎样才能做到这一点？

这是我绘制正方形的函数：

```
public void DrawingSquares(int x, int y)//the function gets x and y to know where to print the square.
    {
        Graphics graphicsObj;
        graphicsObj = this.CreateGraphics();
        Pen myPen = new Pen(Color.Black, 5);
        Rectangle myRectangle = new Rectangle(x, y, 100, 100);
        graphicsObj.DrawRectangle(myPen, myRectangle);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:44:25.020

![我的 vs 解决方案](../Images/ad1aa7ca804e8a24288fefee8c9540ea.png)

```
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();

        this.pictureBox1.Image = this.Draw(this.pictureBox1.Width, this.pictureBox1.Height);
    }

    public Bitmap Draw(int width, int height)
    {
        var bitmap = new Bitmap(width, height, PixelFormat.Format32bppArgb);
        var graphics = Graphics.FromImage(bitmap);
        graphics.SmoothingMode = SmoothingMode.AntiAlias;
        graphics.FillRectangle(new SolidBrush(Color.Tomato), 10, 10, 100, 100);

        return bitmap;
    }
  }
} 
```

这是我的 Form1.cs

你应该有类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:41:49.890

You must add a `PaintEventHandler` inside your picture box and draw the rectangle inside it:

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    ...
    e.Graphics.DrawRectangle(myPen, myRectangle);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T08:35:04.930

```
public Bitmap Draw()
{
   var bitmap = new Bitmap(width,height, PixelFormat.Format32bppArgb);
   var graphics = Graphics.FromImage(bitmap);
   graphics.SmoothingMode = SmoothingMode.AntiAlias;
   graphics.FillRectangle(new SolidBrush(Color.Tomato), 10, 10, 100, 100);
}

this.pictureBox1.Image = new PieChart().Draw(); 
```

所以如果你只返回一个位图，它就可以了

# binding - 在 Sun Solaris OS 上将进程绑定到多个处理器

> ID：10277221
> 
> 赞同：3
> 
> 时间：2012-04-23T08:31:55.527
> 
> 标签：binding, process, solaris, processor

我有一台运行 Solaris OS 的服务器。我想将处理器数量绑定到某个进程。我尝试了以下命令：

1）ps：获取进程id。

```
bash-3.00$ ps -ef | grep java
bileng 10708 10695   3 12:20:59 pts/1       0:26 /opt/billengine/jdk1.6.0_29/bin/sparcv9/java -Dprogram.name=run.sh -Xloggc:./jb 
```

2）psrinfo：获取处理器id。

```
bash-3.00$ /usr/sbin/psrinfo
0       on-line   since 11/04/2013 16:22:17
1       on-line   since 11/04/2013 16:22:18
2       on-line   since 11/04/2013 16:22:18
3       on-line   since 11/04/2013 16:22:18
4       on-line   since 11/04/2013 16:22:18
5       on-line   since 11/04/2013 16:22:18
6       on-line   since 11/04/2013 16:22:18
7       on-line   since 11/04/2013 16:22:18 
```

3) pbind：将进程绑定到处理器。

我想将处理器号 4 到 7 绑定到进程 id 说 10708。因此，我尝试了以下命令：

```
bash-3.00$ /usr/sbin/pbind -b 4-7 10708       
/usr/sbin/pbind: invalid processor ID 4-7 
```

4）但是，当我尝试将单个处理器 id 绑定到进程 id 时，它可以工作：

```
bash-3.00$ /usr/sbin/pbind -b 4 10708
process id 10708: was not bound, now 4 
```

5）但我的要求是**将多个处理器绑定到单个进程 id**。

我尝试浏览所有手册页和文档，但无法获得线索。

任何人都可以请提出一些相同的指示。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:45:13.663

在 Solaris 中执行此操作的工具是`psrset`

您创建一个处理器集

```
 psrset -c 4-7 
```

这将返回新处理器集的 ID

```
 created processor set ps_id 
```

然后你可以将一个进程绑定到一个处理器集

```
 psrset -b ps_id pid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-29T16:19:33.257

在 Solaris 11.2 中，您可以使用 processor_affinity(2) 系统调用来执行此操作。可以在此处找到描述此内容的博客条目：[https](https://blogs.oracle.com/observatory/entry/multi_cpu_binding_mcb) ://blogs.oracle.com/observatory/entry/multi_cpu_binding_mcb当然还有一个手册页：

[http://docs.oracle.com/cd/E36784_01/html/E36872/processor-affinity-2.html](http://docs.oracle.com/cd/E36784_01/html/E36872/processor-affinity-2.html)

# javascript - 如何使用“chrome.webRequest.onBeforeRequest”？

> ID：10277222
> 
> 赞同：2
> 
> 时间：2012-04-23T08:31:58.460
> 
> 标签：javascript, json, google-chrome-extension

Chrome 一直说：“无法读取未定义的属性 'onBeforeRequest'”。我不知道为什么。

背景.html：

```
<html>
  <head>
    <script type="text/javascript">// <![CDATA[     
         try 
            {
                chrome.webRequest.onBeforeRequest.addListener(function(e){alert("onBeforeRequest")},{urls: ["http://*/*", "https://*/*"]}, ["blocking"]) ;
                 }
            catch (ErrorMessage)
            {
              alert('page:'+ErrorMessage) ;
            }       

    // ]]></script>
    </head>
</html> 
```

清单.json：

```
{
  "name": "first extension",
  "version": "1.0",
  "description": "first extension",
  "browser_action": {
    "default_icon": "icon.gif",
    "popup": "popup.html"
  },

  "permissions":
  ["tabs", "chrome.webRequest", "webNavigation", "management", "http://*/*", "https://*/*"],
  "background_page": "background.html"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:36:44.217

请求`webRequest`API 权限的正确方法是`webRequest`（不带`chrome.`）。

```
"permissions": [
    "tabs",
    "webRequest",
    "webNavigation",
    "management",
    "http://*/*",
    "https://*/*"
], 
```

# c# - 在 C# 中将 Count 属性添加到自定义类

> ID：10277226
> 
> 赞同：0
> 
> 时间：2012-04-23T08:32:24.287
> 
> 标签：c#, class, count

所以我有一个自定义类（即MyClass），然后我用它来声明一个数组。如何将“.Count”属性添加到我的自定义类以获取数组的大小？

谢谢你。

```
static void Main()
{
    MyClass[] test = new MyClass[2];
    test[0].str = "Hello";
    test[1].str = "World";

    Console.WriteLine("Count : " + test.Count);
}

class MyClass
{
    public string str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:34:27.103

你已经创建了一个数组，所以它应该已经有一个 test.Length 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:35:34.920

您的自定义类不知道它在数组中。因此，您无法计算数组中对象的数量，因为只有 Main() 知道数组包含多少对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:47:25.983

首先你的代码应该像

```
MyClass[] test = new MyClass()[2]; 
```

其次，如果您想知道已生成了多少类实例。创建一个

```
public static int Count; 
```

并在你的类的构造函数中增加它的属性，比如

```
public MyClass()
{
    Count++;
} 
```

如果您想知道实例的数量，那么只需编写

```
MessageBox.Show(Myclass.Count.ToString()); 
```

# performance - Scala 解析器组合器、歧义语法和解析森林

> ID：10277227
> 
> 赞同：8
> 
> 时间：2012-04-23T08:32:35.123
> 
> 标签：performance, scala, parsing, grammar, parse-forest

我试图让解析器从不明确的语法中返回所有可能的解析结果（解析森林），并通过根据用户上下文/历史和知识库评估它们来从解析森林中进行选择。出于性能原因，这可能应该使用 packrat 解析器和搜索限制/上限参数来限制在应用生产规则时递归调用的数量以避免无限循环。

作为 Scala 及其 Parser Combinators 的新手，我不知道如何做到这一点，或者根本不知道它是否可以做到。有人可以帮忙吗？非常感激。

最好的问候，托马斯·胡安

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T15:43:49.083

Scala 的内置解析器组合器无法做到这一点。Packrat 组合器仅限于明确的语法。如果您尝试处理歧义，您将失去记忆能力，即使对于明确的轨迹，解析复杂度也会变为 O(k^n)。所以，不要那样做。

您想要的是一个能够正确处理歧义的解析器组合器框架。据我所知，Scala 唯一这样的框架是我的[GLL 组合](https://github.com/djspiewak/gll-combinators)器。语法几乎与 Scala 的解析器组合器相同（主要区别在于更高数量的函数可以*正常*工作），但输出是 a `Stream[A]`，其中`A`是结果类型。因此，你得到了一个解析森林。请注意，结果实际上不是 SPPF（共享打包解析林），因此如果您生成指数数量的结果，则流将具有成比例的大小。这样做是为了保持结果类型的最终灵活性。

*在最坏*的情况下， GLL 组合子是 O(n^3) ，即使对于病态模棱两可的语法也是如此。在解析线索明确的平均情况下，GLL 组合子是 O(n)。恒定的时间开销目前有点过多，但优化是一个正在进行的项目。[我们在Precog](http://precog.io/)的生产环境中使用 GLL 组合器，因此您可以期待该库在未来得到很好的维护。

# javascript - Variable scopes in JavaScript

> ID：10277234
> 
> 赞同：2
> 
> 时间：2012-04-23T08:33:22.673
> 
> 标签：javascript, variables, global-variables, scope

Short question:

Let's say we have jQuery included. Will this function execute faster ...

```
var example1 = (function($, jQuery) {
    return function() {
        // do something
    }
})() 
```

... than the following one:

```
var example2 = (function() {
    return function() {
        // do something
    }
})() 
```

?

In the first one the jQuery object will be `undefined`, in the second one it will be inherited. So the second one should be more expensive?

What is the best way to improve speed and get rid of inherited variables that decreases performance?

jsPerf test: [http://jsperf.com/objinheritance](http://jsperf.com/objinheritance)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:55:20.970

As ECMAScript defines, **reference resolution** is a inner-to-outer lookup process, so in the first example, the `$` variable is **1 step** from your code, and in the second example, while `$` resides in global scope, it is at least **2 steps** away, which cause extra lookup overhead.

However, in real world, modern javascript engines (such as V8) doesn't implement reference resolution the exactly same way which ECMAScript states, they have an approach to **flattern** the scope chain, in other words, for most code, all variables can be referenced in **a single step**, no **lookup overhead** at all.

Conslusion: they are really same to each other.

PS: as well as the **scope chain**, javascript engines have quite the same optimization on **prototype chain**, so there is also no need to worry about a property lookup overhead.

# c - 负整数隐式转换为无符号类型

> ID：10277238
> 
> 赞同：0
> 
> 时间：2012-04-23T08:33:35.960
> 
> 标签：c, gcc, enums, bit-fields

如何为以下内容设置/取消设置枚举值。使用 gcc，我收到了这个烦人的警告：

```
test.c:37: warning: negative integer implicitly converted to unsigned type
test.c:39: warning: negative integer implicitly converted to unsigned type
test.c:41: warning: negative integer implicitly converted to unsigned type
test.c:43: warning: negative integer implicitly converted to unsigned type 
```

代码是：

```
#include <stdio.h>
#include <string.h>

typedef enum {
 ONE = 0x1,
 TWO = 0x2,
 THREE = 0x4,
 FOUR = 0x8,
} options;

static const char *byte_to_binary (int x)
{
  int z;
  static char b[9];
  b[0] = '\0';

  for (z = 256; z > 0; z >>= 1)
    {
    strcat(b, ((x & z) == z) ? "1" : "0");
    }

  return b;
}

int main(int argc, char *argv[])
{
  options o = 0;
  printf( "%s\n", byte_to_binary(o));
  o |= ONE;
  printf( "%s\n", byte_to_binary(o));
  o |= TWO;
  printf( "%s\n", byte_to_binary(o));
  o |= THREE;
  printf( "%s\n", byte_to_binary(o));
  o |= FOUR;
  printf( "%s\n", byte_to_binary(o));
  o &= ~FOUR;
  printf( "%s\n", byte_to_binary(o));
  o &= ~THREE;
  printf( "%s\n", byte_to_binary(o));
  o &= ~TWO;
  printf( "%s\n", byte_to_binary(o));
  o &= ~ONE;
  printf( "%s\n", byte_to_binary(o));

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T08:59:25.860

由于您的枚举不包含任何负整数常量，我猜 GCC 已将`unsigned`int 类型赋予您的枚举。现在的表达式像

```
o &= ~FOUR 
```

相当于

```
o = o & ~FOUR 
```

在 RHS 上，`o`is unsigned int 和`~FOUR`issigned int 并按类型转换规则，将signed int 转换为 unsigned int。也是`~FOUR`一个负数，因此您会收到将负数隐式转换为无符号类型的警告。

如果您确定自己的逻辑，则不必担心警告，或者您可以通过使用`enum`等于负数的虚拟变量将枚举转换为带符号的。

就像是

```
typedef enum {
 DUMMY =-1,
 ONE = 0x1,
 TWO = 0x2,
 THREE = 0x4,
 FOUR = 0x8,
} options; 
```

此外，您的代码存在运行时[缓冲区溢出问题](http://ideone.com/OtJnS)。在函数`byte_to_binary`中，您正在检查 9 位，但您的缓冲区也是 9 个字节。它必须是 10 个字节，一个用于终止空值。做到这一点`static char b[10];`，一切[正常](http://ideone.com/J1PE7)

# java - 通过注释/字节码编织跟踪所有权/祖先层次结构/组成员？

> ID：10277243
> 
> 赞同：1
> 
> 时间：2012-04-23T08:34:20.410
> 
> 标签：java, annotations, aop, relationship, bytecode-manipulation

在 GUI 框架中，显式地跟踪父/子关系是很常见的——给定一个任意的 GUI 组件，可以向上浏览“拥有”它的组件的层次结构。

父组件不一定是实际创建其子组件的实体，这些关系通常在创建后配置。

我有一种情况，我感兴趣的是创建关系，即一个对象创建了另一个对象。

所涉及的对象属于不同的类，它们之间一般不存在继承关系等。

实际上，我创建了具有 id 的“主”对象，并且我希望由这些对象创建的所有对象（直接或以 n 度分离）都知道其特定“主”对象的 id。

[ id 实际上仅用于记录目的。]

我可以想象这样的事情：

```
public class Master
{
    @GroupId
    private final long id;
}

@InheritGroupId
public class Foo
{
    public void bar()
    {
        logger.info("I belong to group {}", XXX);
    }
} 
```

对于 Master 对象，id 将在其构造函数中设置。任何用@InheritGroupId 标记的类在构造时都会*以某种方式*查找堆栈并查找第一个调用者对象，该对象要么直接通过@GroupId 注释知道其组ID，要么以与此类相同的方式确定它，即一个这也标有@InheritGroupId。

然后你将如何访问 group-id 值我不确定，在上面的代码中，我刚刚在我想访问它的地方使用了 XXX。

我说“*以某种方式*查找堆栈”，但据我所知，在直接的 Java 中不可能像这样检查堆栈。

也许不需要堆栈检查的替代结构是可能的。或者也许某种 AOP 字节编织方法是可能的？

目前，我将 groupId 作为显式构造函数参数传递给系统中的几乎每个对象。所有对象都必须维护一个成员变量，这对我来说似乎很遗憾，该成员变量并不是其逻辑的一部分，而是纯粹用于日志记录。

显式传递 groupId 确实具有明确指出难以在低级事物和我的“主”对象之一之间建立创建者关系的情况的优势。

如果您对如何处理我用注释或字节码编织所描述的内容有任何想法，或者您认为显式传递 group-ids 实际上是最好的方法，或者您对如何实现相同的想法有一些完全不同的想法事情，那么请告诉我。

/乔治

**更新：**请注意，给定主对象的所有“子”对象*都不*是在一个给定时间点预先创建的，也就是说，这不是简单地将 group-id 设置为某个单例然后拥有子对象的问题当它们被大量创建时，以某种方式访问​​这个单例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:20:45.617

我认为你想要[一个 per-control-flow aspect](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-aspects.html#d0e7099)。每次在切入点中输入方法时，都会创建一个方面的实例。每次退出控制流时，它都会变为未引用。它本质上是线程本地的，它将在您想要初始化它时准确地创建。这只是一个草图，但我想你会想要这样的东西：

```
aspect GetId percflow(callsFromMaster()) {

    private long id;

    pointcut callsFromMaster() : within(Master.*);
    pointcut childConstructors() : cflow(callsFromMaster()) && execution(Foo.new.(..));

    before(Master master) : callsFromMaster() && this(master) {
        this.id = master.getId();
    }

    after(Foo child) : childConstructors() && this(child) {
        child.id = this.id;
    }

} 
```

我将其解读为：每次您从 Master 方法进入调用的控制流时，创建此方面的新实例。在每次调用之前，保存 ID。在同一控制流中，每次创建新的 Foo 时，都会将 ID 从当前 Master 复制到新的 Foo。

# javascript - 在 MVC 项目上使用向导步骤时 jquery 代码出错

> ID：10277245
> 
> 赞同：1
> 
> 时间：2012-04-23T08:34:23.013
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, formwizard

我在我的项目中使用 MVC，并且我正在使用向导步骤 jquery 代码来处理一种表单。

我以前使用向导步骤来填写表格，并且效果很好，但是现在当我尝试在另一个视图上使用它时出现错误。

> 未捕获的类型错误：对象 [对象对象] 没有方法“验证”

这是我的看法：

```
@using NKI.Web.ViewModels;
@model NKI.Web.ViewModels.AnswerFormViewModel

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
     <legend></legend>
        @foreach (SelectedQuestionViewModel items in Model.AllSelectedQuestions)
        {
            <div class="wizard-step">
                <p>@items.SelectedQuestionText <span class="b">Rate:&nbsp;&nbsp; @Html.DropDownListFor(x => x.GradeNumber, items.GradesNumber, new {@class = "selectstyle"})</span></p>
                <div class="editor-field">
                @Html.TextArea("Comment", items.Comment, new {@class = "selectstyle"})
                </div>
                <br/>
                <br/>
                <br/>
            </div>
        }

        <p><input type="button" id="next-step" name="next-step" value="Next"/></p>
        <p><input type="button" id="back-step" name="back-step" value="Back"/></p>
    </fieldset>
            } 
```

这是我收到错误的向导步骤 jquery 代码的一部分：

```
$("#next-step").click(function () {

    var $step = $(".wizard-step:visible"); // get current step

    var validator = $("form").validate(); // obtain validator // <--- here I get the error
    var anyError = false;
    $step.find("input").each(function () {
        if (!validator.element(this)) { // validate every input element inside this step
            anyError = true;
        }

    });

    if (anyError)
        return false; // exit if any error found 
```

任何人都知道可能导致此错误问题的原因是什么？

提前致谢！

# php - Sage Pay 表格退款和授权

> ID：10277248
> 
> 赞同：1
> 
> 时间：2012-04-23T08:34:36.493
> 
> 标签：php, opayo

我已经集成了表单付款方式，一切正常。但我正在寻找一种方法来允许从我的网站处理退款/授权，而不必去 Sage Pay 去做。

我找到了一些与 Sage Pay 直接方法相关的代码。这似乎奏效了，直到我意识到在下订单时我没有从 Sage Pay 取回安全码。

有没有办法获取安全码？或其他无需访问 Sage Pay 网站即可处理退款的方式。

谢谢你的帮助！说到 Sage Pay，我还是个新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:11:35.427

我按照 Rup 的建议向 Sagepay 发送了一个问题。

此服务不适用于 Forms 集成，只有 Direct 和 Server 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T08:19:12.567

从您的前端系统退款**确实需要**Sage Pay 的 SERVER 或 DIRECT 集成。安全密钥仅在这些集成方法期间传回。

如果您使用的是 FORM，则退款将在 My Sage Pay 界面中进行。

# android - 绕过 MediaRecorder 在 Android 中录制/处理视频

> ID：10277249
> 
> 赞同：2
> 
> 时间：2012-04-23T08:34:37.837
> 
> 标签：android, camera, android-mediarecorder

刚接触 Android 和 Java，但我有很长的编程背景。

假设我想从手机录制一些视频，但在录制时直接操作像素（在 H.264 编码之前），我该怎么做？在 Android 文档中，您似乎使用了 MediaRecorder 类并为其分配了一个相机，然后它记录到一个文件或 URI。但是我想在捕获期间和保存之前处理数据（而不是先保存然后处理）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:02:48.890

你需要的一切都在`libmedia.so`图书馆里。没有直接的方法可以实时处理视频帧。

这应该可以帮助您开始思考可能性:) [http://rxwen.blogspot.in/2010/01/understanding-android-media-framework.html](http://rxwen.blogspot.in/2010/01/understanding-android-media-framework.html)

您可以检查 libmedia 库的来源。

# xcode - Xcode：IPA 文件变小，无法在设备中启动

> ID：10277251
> 
> 赞同：1
> 
> 时间：2012-04-23T08:34:48.257
> 
> 标签：xcode

我有一个问题，我真的不知道去哪里找。

在此之前，从我的项目存档中分发的 IPA 文件的大小为 2.4 Mb。但是，在我的同事搞砸了项目设置之后。我刚刚构建的 IPA 文件大小为 990 Kb。除了项目设置之外，唯一不同的是其中一项资产已被删除，它的大小为 384Kb。

现在，编译 IPA 文件无法在 ad hoc 设备上启动。

任何人都知道在哪里寻找或应该是什么问题的原因。

谢谢，最好的问候。

**编辑 1**

我将所有更改恢复到以前的 git commit，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:14:32.137

请参阅 SO 线程[*如何将一个文件与任意版本进行比较，*](https://stackoverflow.com/a/5586435/643383)以了解如何使用 git 的`diff`命令将您的项目文件与您签入的文件进行比较。我不声称自己是 git 专家，但它看起来像你应该能够做到：

```
git diff master:ProjectFile.xcodeproj/project.pbxproj ProjectFile.xcodeproj/project.pbxproj 
```

将签入的版本与工作目录中的版本进行比较。该`project.pbxproj`文件是一个 XML 文件，它指定了所有项目设置，因此比较两者应该可以准确地告诉您发生了什么变化。如果您不确定相关更改的时间，您可能需要返回多个修订版本。

同样，您可以将整个项目的先前版本拉入新的工作目录。构建该版本并检查 .ipa 文件的大小，看看它是否会安装。

# iframe - 如何将跨域 iframe 添加到 SalesForce 帐户详细信息选项卡？

> ID：10277252
> 
> 赞同：0
> 
> 时间：2012-04-23T08:34:48.420
> 
> 标签：iframe, salesforce, visualforce

我想在帐户选项卡上嵌入 iframe 部分。我使用标准控制器创建了简单的 Visualforce 页面 - 帐户。

```
<apex:page standardController="Account">
  <h1>Congratulations</h1>
  This is your new Page
  <div>
  <apex:iframe src="https://www.facebook.com/" width="800" height="600" />
  </div>
</apex:page> 
```

我在帐户布局中添加了一个 VisualForce 部分。但我无法在结果详细信息页面中看到我的 iframe 内容。似乎只有当我的 iframe 与 salesforce 域相关时才会呈现 iframe 内容。

所以我的问题是：是否可以将外部域页面嵌入标准详细信息页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:48:09.230

Facebook 不喜欢人们构建其内容。我相信这是问题所在，而不是与销售人员有关。可以肯定的是，尝试为此交换 facebook url：

“ [http://www.clubpenguin.com/](http://www.clubpenguin.com/) ”

如果这行得通，那么您知道阻止您的不是销售人员，而是 Facebook。

（Club Penguin 只是我知道的一个允许 iframe 的网站，所以它是一个很好的测试网站！）

当您尝试构建 facebook 时，如果您查看浏览器调试器，您可能会发现此错误：

```
Refused to display document because display forbidden by X-Frame-Options. 
```

这里有一个关于这个错误的讨论：

[克服“X-Frame-Options 禁止显示”](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)

# python - Python中的Unicode和`decode()`

> ID：10277256
> 
> 赞同：8
> 
> 时间：2012-04-23T08:35:08.040
> 
> 标签：python, unicode, decode, codec

```
>>> a = "我"  # chinese  
>>> b = unicode(a,"gb2312")  
>>> a.__class__   
<type 'str'>   
>>> b.__class__   
<type 'unicode'>  # b is unicode
>>> a
'\xce\xd2'
>>> b
u'\u6211' 

>>> c = u"我"
>>> c.__class__
<type 'unicode'>  # c is unicode
>>> c
u'\xce\xd2' 
```

`b`并且`c`都是unicode，但是`>>> b`输出`u'\u6211'`和`>>> c`输出`u'\xce\xd2'`，为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T09:05:06.420

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:19:36.793

The interactive Python show *representation* of an object when you just type-in its name. On the other hand, the print command tries to render the character. Your variable named **a** is of a string type. Actually, strings in Python 2.x are series of bytes. So, it depends on your working environment. You say to the unicode() function that you now use the gb2312 encoding. If it is true, then **b** contains the correct representation of the character in the given encoding.

Try to

```
>>> print b 
```

in your case. It is likely you will see the wanted result. Try also:

```
>>> print repr(a)
...
>>> print repr(b) 
```

The representation is (if possible) a text string that when copy-pasted to a source code would create the object with the same value.

Have a look at Mark Pilgrim's "Dive Into Python 3", Chapter 4\. Strings ([http://getpython3.com/diveintopython3/strings.html](http://getpython3.com/diveintopython3/strings.html)) for a nice, readable explanations.

# php - 任何可靠的方法可以在正确的方向旋转上传的图片？

> ID：10277258
> 
> 赞同：0
> 
> 时间：2012-04-23T08:35:22.867
> 
> 标签：php, image, upload, rotation, exif

前段时间我写了一个方法来从在线社区上传的图片中读取 EXIF 数据。从图片中获得方向后，我将文件旋转到正确的方向。我的脚本只有一小部分：

```
public function rotate($sourceFile, $targetFile, $orienation)
{
    switch($orienation){
        case 3: $degrees = '180'; break;
        case 6: $degrees = '90'; break;
        case 8: $degrees = '270'; break;
        default: $degrees = '0';
    }

    $file = $sourceFile . DS . $targetFile;
    $rotate = GlobalConfig::BIN_IMAGICK_CONVERT . ' -rotate ' . $degrees . ' ' . $file . ' ' . $file;
    exec($rotate);
} 
```

我的脚本正在运行。但我的问题是，像 facebook 这样的大人物如何处理上传图片的旋转？因为我的解决方案肯定不是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:43:47.050

我相信更好的方法是使用 GD 库，代码是这样的

```
// input
$image = 'myfile.jpg';

//read orientation information from EXIF

$exif = exif_read_data($filename);
$ort = $exif['IFD0']['Orientation'];

//then based on $ort you can determine the rotation degree,
//check the link below for more info

//rotation degree
$degrees = 180;

// create "image object"
$source = imagecreatefromjpeg($image) ;

// rotate
$rotate = imagerotate($source, $degrees, 0) ;

// set the header
header('Content-type: image/jpeg') ;

// output
imagejpeg($rotate) ; 
```

更多信息：[Exif 方向标签](http://sylvana.net/jpegcrop/exif_orientation.html)

# objective-c - 视图控制器的协议不会触发任何已定义的方法

> ID：10277259
> 
> 赞同：0
> 
> 时间：2012-04-23T08:35:26.823
> 
> 标签：objective-c, delegates, protocols

我创建了一个协议和匹配的委托。我定义的方法似乎没有触发，但没有抛出任何错误。

资源滚动视图.h

```
//Top of File
@protocol ResourceScrollViewDelegate
    - (void)loadPDFWithItem:(NSString *)filePath;
@end
//Within Interface
id<ResourceScrollViewDelegate> _scrollViewDelegate;
//Outside Interface
@property (nonatomic, retain) id<ResourceScrollViewDelegate> scrollViewDelegate; 
```

资源滚动视图.m

```
//Inside Implementation
@synthesize scrollViewDelegate=_scrollViewDelegate;
//Within a button tapped method
[_scrollViewDelegate loadPDFWithItem:filePath]; 
```

资源视图控制器.h

```
//Top of File
#import "ResourceScrollView.h"
@interface ResourcesViewController : UIViewController <ResourceScrollViewDelegate> 
```

资源视图控制器.m

```
//Inside Implementation
- (void)loadPDFWithItem:(NSString *)filePath{
    NSLog(@"PDF %@",filePath);
} 
```

出于某种原因，我没有收到 NSLog。没有错误或崩溃，它根本不会触发。

我是否犯了任何可能导致这种行为的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:46:39.767

您是否忘记将`ResourcesViewController`对象设置为`scrollViewDelegate`属性？

# ios - 在 iOS 上使用 Cordova 1.6 设置外部起始页

> ID：10277261
> 
> 赞同：5
> 
> 时间：2012-04-23T08:35:30.973
> 
> 标签：ios, cordova, external

是否可以加载外部 index.html（包含cordova.js）而不是本地的？

我在 appdelegate.m 中找到了这段代码：

```
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html"; 
```

我试图引用一个外部网址，但没有运气......有人知道这个解决方案吗？

ps

使用 android 很简单：

```
super.loadUrl("http://192.168.1.135:3000/"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:25:44.357

我已经为我的项目（AppDelegate.m）做了这个：

```
self.viewController = [[[MainViewController alloc] init] autorelease];
self.viewController.useSplashScreen = YES; // YES;
self.viewController.wwwFolderName = @""; // @"www";
self.viewController.startPage = @""; // @"index.html";
self.viewController.invokeString = invokeString;
self.viewController.view.frame = viewBounds;

// Load request with new root URL
NSURL *urlOverwrite = [NSURL URLWithString:@"http://kyryll.com"];
NSURLRequest *request = [NSURLRequest requestWithURL:urlOverwrite];

[self.viewController.webView loadRequest:request]; 
```

如其他地方所述，您尝试访问的站点必须被列入白名单。

它运作良好。我的外部站点在本地 IIS 上，并且有 cordova.js 以及一些插件。现在只需要看看我是否让 Apple 批准我的应用程序！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:47:05.207

如果您[将 PhoneGap 源作为子项目包含](http://mobiledan.net/2012/05/02/compile-phonegap-source-code-in-your-ios-phonegap-project/ "操作方法文章")（我使用 1.7 并且指示仍然有效，请参阅最后的注释），您可以添加几行代码以允许 PhoneGap 支持外部 URL 作为`startPage`.

在第 133 行附近，您需要添加

```
if([self.startPage hasPrefix:@"http"]) {
    appURL = [NSURL URLWithString:self.startPage];
}
else 
```

就在之前`if (startFilePath == nil) {`

默认情况下，PhoneGap 似乎不支持没有上述 javascript 'hack' 的外部 startPage URL。除了这个（和那个），我不知道还有什么办法！

如果您有更多问题，请告诉我。

注意：正如我上面提到的，演练缺少一步。我对文章发表评论让作者知道，但尚未获得批准。以下是我的评论：

> 我缺少的一个步骤是将 $(CORDOVALIB)/Classes 添加到构建阶段下的标题搜索路径（也将其标记为递归搜索）。除此之外，写得真好！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T09:21:46.463

对于 iOS，它将是：

```
self.viewController.wwwFolderName = @""; // @"www"
self.viewController.startPage = @"http://192.168.2.107:9000/"; 
```

名称令人困惑，因为 startPage 也是 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T08:55:11.393

我做的最简单的方法是，在 index.html 文件中包含以下脚本块，如果不需要，请删除其他代码：

```
<script type="text/javascript">
     window.location.href="http://192.168.1.135:3000/";
</script> 
```

`ExternalHosts`并在文件中包含地图中的主机`PhoneGap.plist`，还检查`OpenAllWhitelistURLsInWebView`设置为`YES`在plist文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T07:49:50.897

将 wwwFolderName 设置为空字符串对我不起作用，但 nil 起作用。

```
self.viewController.wwwFolderName = nil;
self.viewController.startPage = @"http://192.168.2.107:9000/"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T07:41:36.110

我做的最简单的方法是， xxxViewController: CDVViewController<...>

```
-(void) viewDidLoad{
    self.wwwFolderName = @"dist";
    self.startPage = @"test.html";
    [super viewDidLoad];
} 
```

所以，就是这样。

# apache2 - 如何安装和使用 Apache Velocity？

> ID：10277263
> 
> 赞同：6
> 
> 时间：2012-04-23T08:35:39.663
> 
> 标签：apache2, velocity

我已经安装了 Apache 服务器 2.4 和 Ant 1.8.3，我已经下载了 Velocity 1.7 和 Velocity 工具 2.0。我已经阅读了 Apache Velocity 的安装文档大约十次，并在 Google 上搜索了两天，我仍然不知道如何处理这些文件。谁能提供有关如何安装 Velocity 的详细说明？

我希望使用 Eclipse 进行开发，所以我也安装了这个。

我很感激任何帮助，因为我被困住了。

谢谢你。

更新：

我已将 Eclipse 配置为使用 Tomcat，并通过教程完成了所有工作，但我不知道如何在 Eclipse 中准确启动速度项目，如果有人使用 Eclipse 构建了 Velocity 项目，我将不胜感激有关如何设置它的一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T12:26:53.593

您还需要一个*Java EE 容器*（又名*servlet 容器*），例如 Apache Tomcat。Apache HTTP 服务器对 Java 一无所知。请注意，Tomcat 本身可以直接用作 HTTP 服务器 - 您通常会选择将 Apache HTTP 服务器保留在生产服务器上的 Tomcat 前面，以加快静态文件请求以及其他原因（Apache HTTP 可以使用 mod_proxy_ajp 将请求转发到 Tomcat模块）。但是一开始还是直接使用Tomcat提供的HTTP服务比较容易。

然后，您需要熟悉*Web 应用程序*的概念。它只不过是一个特定的文件层次结构（可以压缩成带有*.war*扩展名的 jar 文件）。对于使用 Velocity 的 Web 应用程序，通常是：

./ ←*您的 Web 应用程序的根目录*
./index.vhtml ←*您的欢迎页面模板*
./foo/bar.vhtml ←*包含您的 Web 资源的任何其他文件或子目录*
./WEB-INF/ ← *WEB-INF 目录包含所有 Web应用程序配置*
./WEB-INF/web.xml ←*将 HTTP 请求映射到过滤器和 servlet*
./WEB-INF/tools.xml ← *Velocity 自定义工具的可选配置文件*
./WEB-INF/velocity.properties ←*可选文件tune Velocity 配置*
./WEB-INF/lib/ ←*包含您的 Web 应用程序所需的所有库*
./WEB-INF/src/ ←*包含您的自定义 Java 类源代码*
./WEB-INF/classes/ ←*包含您的自定义 Java 类*

您的*web.xml*文件必须将足够的请求映射到 VelocityViewServlet。它看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

  <servlet>
    <servlet-name>view</servlet-name>
    <servlet-class>org.apache.velocity.tools.view.VelocityViewServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>view</servlet-name>
    <url-pattern>*.vhtml</url-pattern>
  </servlet-mapping>

</web-app> 
```

由于我不使用 Eclipse，因此我无法为您提供太多帮助，但是如果您搜索 tomcat + eclipse，似乎有几个在线教程。这是一个看起来很有趣的：http:
[//www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)

# android - 通过arduino板从传感器接收数据到android设备的最佳方法是什么？

> ID：10277265
> 
> 赞同：4
> 
> 时间：2012-04-23T08:35:45.770
> 
> 标签：android, arduino

我正在为 android 开发一个应用程序，它通过 arduino adk 板接收来自 13 个不同传感器的数据并将其显示在 android 设备上。我遵循了 demokit 的示例，但我担心它可能会丢失数据，因为 13 个传感器一起工作。我想知道我可以遵循的最佳方法是什么，这样我就不会错过任何数据字节甚至丢失它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:37:35.237

如果您不想丢失任何字节，那么您必须不断地观察您的传感器。一个解决方案是有两个线程，一个收集传感器数据并将其放入您自己的缓冲区，另一个从该缓冲区读取数据并处理数据。

您的问题是关于实时性能的，这意味着您必须测试以查看要为您的应用程序处理的最佳缓冲区大小和数据大小，同时在您的特定硬件上保持正确的时序。

# html - 边框仍然显示，为什么？

> ID：10277267
> 
> 赞同：0
> 
> 时间：2012-04-23T08:36:18.710
> 
> 标签：html, css

我在桌子上有一个奇怪的问题......我在css中将边框设置为0，我将边框颜色设置为透明，但是，在浏览器中，它仍然在顶部显示一个边框在左边，这没有任何意义......

桌子看起来像`<table cellspacing="0" style="border-width:0px;border-collapse:collapse;" id="gvTransactions" pagersettings="" rules="all" class="transaction-posts">`

CSS看起来像：

```
table.transaction-posts, table#gvTransactions {
  border: 0 none transparent !important;
  border-radius: 0 0 0 0;
} 
```

如您所见，即使我已将边框设置为 0，它仍会在顶部、左侧和每一行中输出黑色边框...

![在此处输入图像描述](../Images/9fd58e23cb1118a103591e0d9d1751e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:15:02.573

在表标签中...添加边框 =“0”...如果这不起作用然后检查是否有任何 css 覆盖它，还将您的代码发布在 jsfiddle 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:12:07.567

`rules="all"`标签中的 HTML 属性`table`导致在所有单元格的所有边上绘制边框。HTML 4.01 规范对此有些含糊地说，但这是浏览器解释它的方式。因此，如果您不想要任何边框，请删除该属性。

如果你想拥有一些边界但不是全部，你需要适当地设置它们。例如，如果最上面和最左边的边界是问题（这是对所问问题的一种解释），则设置

```
table#gvTransactions tr:first-child th, table#gvTransactions tr:first-child td {
  border-top: none;
}
table#gvTransactions th:first-child, table#gvTransactions td:first-child {
  border-left: none;
} 
```

第一条规则删除第一行中任何单元格的上边框。第二个删除作为其父级的第一个子级的任何单元格的左边框，即第一列中的单元格。

# git - 在 Git 中管理一组相对的相关存储库

> ID：10277278
> 
> 赞同：3
> 
> 时间：2012-04-23T08:37:04.337
> 
> 标签：git, git-submodules

我有一组要管理的相关存储库。

我要存储的数据是由“单元”组成的“库”组成的“项目”。每个库存储在项目的子文件夹中，每个单元存储在库的子文件夹中。

为了能够在多个项目之间重用库和单元，我计划根据以下方案存储它们：

```
repositories/projects/project1
repositories/projects/project2>
repositories/projects/project...
repositories/libraries/library1
repositories/libraries/library2
repositories/libraries/library...
repositories/units/unit1
repositories/units/unit2
repositories/units/unit... 
```

我想相对地引用项目中使用的库（比如 uses `../../libraries/library1`），并相对地引用库中的单元。

库和单元只能通过修改包含它们的项目来修改。因此，如果有必要，库和单元存储库可能是裸露的。

服务器上的存储库应该看起来相同（文件夹布局相同）。

我已经尝试过使用子模块和“读取树/子树合并”方法，但找不到在子模块案例中指定存储库的相对 URL 并在读取树方法中推送更改的方法。

我想要完成的是，如果我签出 project1，它还会获取所有必要的库和单元，如果我通过项目更改库或单元，这些更改可以轻松地再次推送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:58:55.517

子模块是适合您的方式，并允许相对 URL。

子模块可以指定相对于超级项目 URL 的另一个子模块`origin`URL。所以在 中`project1`，使用以下

```
git submodule add ../library1
git submodule --init update 
```

应该没问题：library1 将在 project1 的目录中检出，它的原始 repo 在 project1 旁边。

# gtk - gtk 回调多个参数

> ID：10277279
> 
> 赞同：2
> 
> 时间：2012-04-23T08:37:08.867
> 
> 标签：gtk, gtk3

```
#include <gtk/gtk.h>
#include <stdio.h>

typedef struct {
    const gchar *host;
} example;

void b_clicked (GtkButton *c_button, example *test){
    g_print("Hostname: %s\n", test->host);
}

int main (int argc, char *argv[]){

GtkWidget *window;
GtkWidget *grid;
GtkWidget *c_button;
GtkWidget *q_button;
GtkWidget *label_host;
GtkWidget *h_name;

gtk_init (&argc, &argv);

window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
gtk_window_set_title (GTK_WINDOW (window), "FTP Client");
gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
gtk_container_set_border_width (GTK_CONTAINER (window), 10);
gtk_window_set_resizable(GTK_WINDOW(window), FALSE);

grid = gtk_grid_new ();
gtk_container_add (GTK_CONTAINER (window), grid);
gtk_grid_set_row_spacing (GTK_GRID (grid), 3);

label_host = gtk_label_new("Hostname");

example test;
h_name = gtk_entry_new();
test.host = gtk_entry_get_text(GTK_ENTRY (h_name));
gtk_entry_set_placeholder_text (GTK_ENTRY (h_name), "Hostname");
c_button = gtk_button_new_with_label ("Connect");
g_signal_connect (c_button, "clicked", G_CALLBACK (b_clicked), (gpointer*)&test);
q_button = gtk_button_new_with_label ("Quit");
g_signal_connect (q_button, "clicked", G_CALLBACK (gtk_main_quit), NULL);

gtk_grid_attach (GTK_GRID (grid), label_host, 0, 0, 1, 1);
gtk_grid_attach (GTK_GRID (grid), h_name, 1, 0, 1, 1);
gtk_grid_attach (GTK_GRID (grid), c_button, 0, 3, 2, 1);
gtk_grid_attach (GTK_GRID (grid), q_button, 0, 4, 2, 1);

gtk_widget_show_all (window);

gtk_main ();

return 0;
} 
```

这有什么问题？？
我没有错误也没有警告，但是在终端上这个程序什么也没写:(
如果我写：

```
test.host="trying something" 
```

它可以工作，但使用 gtk_entry_get_text 它什么也不显示 :(
我不明白......为什么它不适用于 gtk_entry_get_text？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:12:46.557

您需要了解 GTK 是一个事件驱动的工具包（与许多其他工具包一样）。您需要与事件交互。但在您运行 gtk_main 之前它不会检查事件。因此，您的问题是您正在使用 读取主机名`test.host = gtk_entry_get_text(GTK_ENTRY (h_name))`，但当时该小部件尚未显示，您甚至没有在其中输入任何内容！所以你基本上只是从中得到一个空字符串，这就是你点击“连接”按钮时显示的内容。

一种方法是让您的指针指向结构中的小部件。这样，您可以从 b_clicked 回调内部调用 gtk_entry_get_text。这样，您获得的值就是当时文本输入小部件内部的**值**。

```
#include <gtk/gtk.h>
#include <stdio.h>

typedef struct {
        GtkWidget *host;
} example;

void b_clicked (GtkButton *c_button, example *test){
        g_print("Hostname: %s\n", gtk_entry_get_text (GTK_ENTRY(test->host)));
}

int main (int argc, char *argv[]){

        GtkWidget *window;
        GtkWidget *grid;
        GtkWidget *c_button;
        GtkWidget *q_button;
        GtkWidget *label_host;
        GtkWidget *h_name;

        gtk_init (&argc, &argv);

        window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
        gtk_window_set_title (GTK_WINDOW (window), "FTP Client");
        gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
        g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
        gtk_container_set_border_width (GTK_CONTAINER (window), 10);
        gtk_window_set_resizable(GTK_WINDOW(window), FALSE);

        grid = gtk_grid_new ();
        gtk_container_add (GTK_CONTAINER (window), grid);
        gtk_grid_set_row_spacing (GTK_GRID (grid), 3);

        label_host = gtk_label_new("Hostname");

        example test;
        h_name = gtk_entry_new();
        test.host = h_name;
        gtk_entry_set_placeholder_text (GTK_ENTRY (h_name), "Hostname");
        c_button = gtk_button_new_with_label ("Connect");
        g_signal_connect (c_button, "clicked", G_CALLBACK (b_clicked), &test);
        q_button = gtk_button_new_with_label ("Quit");
        g_signal_connect (q_button, "clicked", G_CALLBACK (gtk_main_quit), NULL);

        gtk_grid_attach (GTK_GRID (grid), label_host, 0, 0, 1, 1);
        gtk_grid_attach (GTK_GRID (grid), h_name, 1, 0, 1, 1);
        gtk_grid_attach (GTK_GRID (grid), c_button, 0, 3, 2, 1);
        gtk_grid_attach (GTK_GRID (grid), q_button, 0, 4, 2, 1);

        gtk_widget_show_all (window);

        gtk_main ();

        return 0;
} 
```

另一种更好的方法是在不修改结构的情况下要求在文本更改时得到通知。为此，请使用“ [changed](http://developer.gnome.org/gtk3/stable/GtkEditable.html#GtkEditable-changed) ”信号，因为 GtkEntry 实现了 GtkEditable 接口。请参阅“ [GtkEntry 文本更改信号](https://stackoverflow.com/questions/3878834/gtkentry-text-change-signal)”。

另请注意这`(gpointer*)&test`是错误的。test 是一个结构体，&test 是一个结构体的地址。gpointer 是一个 void *，即。已经是指针，`gpointer *`指向指针的指针也是如此，这不是 &test 是什么。所以就写吧`&test`。

# android - Android 从二维码打开应用程序

> ID：10277280
> 
> 赞同：0
> 
> 时间：2012-04-23T08:37:28.943
> 
> 标签：android, qr-code

我真的很好奇我是否可以生成一个包含可能的二维码，`URI`并且在扫描之后二维码阅读器可以启动我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:42:42.470

如果您为放入 QR 码的 URI 制作意图过滤器，我想您会没事的。

只需将正确的方案（和主机/路径）放入`data`部件中，您就可以选择从您的应用程序开始。当然，如果另一个应用程序过滤了这些数据，用户也可以选择那个，所以一定要完全唯一（显然由于浏览器的原因，使用“http”是不可能的），或者在URI。

# asana - 查看 Asana 的历史

> ID：10277282
> 
> 赞同：0
> 
> 时间：2012-04-23T08:37:38.257
> 
> 标签：asana

刚开始使用 Asana 并喜欢它。几个查询 -

1.  有没有办法检查 Asana 任务和项目的历史记录（日志）。假设我想检查一个任务是否被另一个人意外删除。
2.  我可以只为一个人分配项目的查看权限而不是编辑权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:56:02.873

您可以通过故事检查任务的活动提要：[https ://asana.com/developers/api-reference/stories](https://asana.com/developers/api-reference/stories)

我们目前没有只读权限。

# javascript - 将列表框最后一个元素设置为通过 JQuery 选择的 [在 iE9 中不起作用]

> ID：10277283
> 
> 赞同：0
> 
> 时间：2012-04-23T08:37:40.777
> 
> 标签：javascript, jquery

我已经尝试了大约 10 多种不同的变体来尝试做同样的事情 - 以编程方式选择列表框的最后一个元素。这适用于 Google Chrome 和最新的 Mozilla Firefox，但不适用于 IE9，除非我在末尾添加“alert('')”，在这种情况下，当我按下警报时，列表框的最后一个元素会被选中“确定”按钮。

```
$(listboxSelectorParam).children().filter(":last-child").attr("selected", "selected");
$(listboxSelectorParam).children().filter(":last").attr("selected", "selected");
$(listboxSelectorParam).children().filter(":last-child").attr("selected", true);
$(listboxSelectorParam).children().filter(":last").attr("selected", true);
$(listboxSelectorParam + " option:last").attr("selected", "selected);
$(listboxSelectorParam + " option:last-child").attr("selected", "selected); 
```

.. 名单还在继续

如何使它适用于 IE9？

编辑：解决了

不得不取消选择以前的选择：

```
 $(listboxSelectorParam + " option:selected").attr("selected", false);
    $(listboxSelectorParam).children().filter(":last-child").attr("selected", "selected"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:03:55.000

解决方案是取消选择列表框的先前选择。

```
$(listboxSelectorParam + " option:selected").attr("selected", false); 
$(listboxSelectorParam).children().filter(":last-child").attr("selected", "selected"); 
```

# mysql - 从存储过程中的更新语句获取结果

> ID：10277287
> 
> 赞同：0
> 
> 时间：2012-04-23T08:37:55.277
> 
> 标签：mysql, stored-procedures, rows-affected

我想检查 db 表中特定记录的存在，如果存在则更新，如果不存在我想添加新记录

我正在使用存储过程来执行此操作，首先我进行更新语句并想检查它是否发生并返回 0 然后没有记录受更新语句影响，这意味着该记录不存在。

我这样做

```
DELIMITER //
CREATE PROCEDURE revokePrivilegeFromUsers(IN userId int(11),  IN privilegeId int(11), IN deletedBy int(11))

BEGIN
  DECLARE isExist int;

  isExist = update `user_privileges` set `mode` ='d' ,`updated_by` = deletedBy, `date_time_assigned` =  CURRENT_TIMESTAMP()  where `user_id`= userId and `privilege_id`=privilegeId;

 IF  isExist  == 0 THEN
      insert into `user_privileges`(`user_id`,`privilege_id`,`mode`,`date_time_assigned`,`updated_by`)values (userId ,privilegeId ,'d',CURRENT_TIMESTAMP(),deletedBy );

 END IF;

END //

DELIMITER ; 
```

这个错误发生在我身上

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= update `user_privileges` set `mode` ='d' ,`updated_by` = deletedBy, `date_time' at line 6 
```

mysql支持我的工作方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:11:14.530

我解决了问题，我有2个问题

1.  [ROW_COUNT()](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_row-count)用于获取插入、更新或删除语句中受影响的行数。
2.  存储过程中的等于比较是 = 不是 ==

正确的存储过程是

```
DELIMITER //
CREATE PROCEDURE revokePrivilegeFromUsers(IN userId int(11),  IN privilegeId int(11), IN deletedBy int(11))

BEGIN
DECLARE count int default -1;

update `user_privileges` set `mode` ='d' ,`updated_by` = deletedBy, `date_time_assigned` =  CURRENT_TIMESTAMP()  where `user_id`= userId and `privilege_id`=privilegeId;
SELECT ROW_COUNT() into count ;
IF count  = 0 THEN
       insert into `user_privileges`(`user_id`,`privilege_id`,`mode`,`date_time_assigned`,`updated_by`)values (userId ,privilegeId ,'d',CURRENT_TIMESTAMP(),deletedBy );

END IF;
END //

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:23:48.137

请改用 INSERT IGNORE 语句。我假设您的表具有 (user_id, privilege_id) 作为唯一键。

```
insert ignore into user_privileges (user_id,privilege_id,`mode,date_time_assigned,updated_by)
values (userId ,privilegeId ,'d',CURRENT_TIMESTAMP(),deletedBy )
on duplicate key update mode='d', date_time_assigned=now(),updated_by=deletedBy 
```

# java - 如何创建 Maven 可分发

> ID：10277288
> 
> 赞同：1
> 
> 时间：2012-04-23T08:37:55.440
> 
> 标签：java, maven, deployment, release, distribution

我想使用 Maven 为我的 java 应用程序创建一个可分发的 ZIP，其结构如下：

**/lib -> 我生成的 jars (几个模块 core.jar, app.jar ...)**

**/config -> 几个配置文件（app.properties，...）**

**/3rdparty -> 所有 jar 依赖项（commons-lang.jar、log4j.jar ...）**

**/scripts -> 辅助脚本（start.sh ...）**

我想在任何客户端机器上部署它并运行为：

java -cp ../lib:../3rdparty -Dprop.file=app.properties [main.class]

我已经阅读了很多关于 maven 程序集插件的内容，但还没有找到关于如何实现这一点的令人满意的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:52:06.160

Maven Assembly 插件在这里使用是正确的。有很多关于如何使用它的例子，这里有一些：

*   [Maven 创建平面 zip 程序集](https://stackoverflow.com/questions/1500758/maven-creating-flat-zip-assembly)
*   [http://maven.apache.org/plugins/maven-assembly-plugin/howto.html](http://maven.apache.org/plugins/maven-assembly-plugin/howto.html)
*   [maven-assembly 插件 - 如何创建嵌套程序集](https://stackoverflow.com/questions/1522778/maven-assembly-plugin-how-to-create-nested-assemblies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:41:47.690

带有启动脚本的脚本文件夹可以通过[appassembler-maven-plugin](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)完成，该插件为运行/启动应用程序创建脚本。要创建包含所有内容的单个存档，您可以使用 maven-assembly-plugin。

# google-api - 如何在谷歌购物 API 中限制价格范围

> ID：10277291
> 
> 赞同：2
> 
> 时间：2012-04-23T08:38:14.903
> 
> 标签：google-api, url-encoding, google-shopping-api

我正在使用 Google Shopping API 来尝试检索具有特定数量或近似值的“订单”数量的产品。例如，如果我要选择价格在 40 美元到 60 美元之间的产品：50 美元 +/- 10 美元。我应该在 URL 搜索字符串中添加什么？

我知道我可以像这样按价格排名（根据 API）：

```
 GET https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=%22mp3+player%22%7Cipod&rankBy=price%3Adescending 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:00:38.777

没关系，正确的方法是使用烧瓶和 jinja2 以及 ajax。在使用 google 购物 API 主要“项目”对象时，必须注意使用 JSON 以及它如何正确映射到其等效的 python 对象：

```
"product": {
  "googleId": "9243781955569725518",
  "author": {
    "name": "CompUPlus.com",
    "accountId": "1209120"
  },
  "creationTime": "2010-03-04T09:51:45.000Z",
  "modificationTime": "2010-11-25T09:24:08.000Z",
  "language": "en",
  "country": "US",
  "title": "Logitech Squeezebox Radio, black",
  "description": "Logitech Squeezebox Radio brings a world of free Internet radio subscription
                  services and your personal digital music collection to any space in your home
                  over your Wi-Fi network.",
  "link": "http://www.compuplus.com/Radios/LOGITECH-Squeezebox-Radio-BLK-930-1115160.html",
  "gtin": "00097855063601",
  "gtins": [
   "00097855063601"
  ],
  "brand": "Logitech",
  "mpn": "930-000101",
  "condition": "new",
  "images": [
    { "link": "http://content.etilize.com/300/1014430207.jpg" }
  ]
  "inventories": [
    {
      "channel": "online",
      "availability": "inStock",
      "currency": "usd",
      "price": 183.19
    }
  ],
} 
```

# r - 如何确定 x 和 y 单位的符号大小

> ID：10277292
> 
> 赞同：2
> 
> 时间：2012-04-23T08:38:15.167
> 
> 标签：r, par

我想知道我的绘图区域中符号的大致尺寸。我认为 par()$ps 仅指的是文本大小。那么如何使用 cex 参数计算符号大小？例如，下面是大小 cex=10 的单个点的图。我可以从绘图设备参数参数中确定它的大小吗？

```
plot(50, 50, ylim=c(0,100), xlim=c(0,100), cex=10)

#click on outer x limits
p1 <- locator(n=1,typ="n")
p2 <- locator(n=1,typ="n")

#approx width in x units(~15)
abs(p1$x - p2$x) 
```

谢谢你的帮助。-马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:34:06.777

根据 中包含的文档`?par`，我们有，

*   `cin`-**反渗透**; 以英寸为单位的字符大小（宽度、高度）。这些是与 cra 相同的测量值，以不同的单位表示。
*   `cra`-**反渗透**; '光栅'（像素）中默认字符（宽度，高度）的大小。有些设备没有像素的概念，因此假定任意像素大小，通常为 1/72 英寸。这些是与 cin 相同的测量值，以不同的单位表示。

在我的机器上，这些值似乎是：

```
par("cin")
[1] 0.15 0.20
> par("cra")
[1] 10.8 14.4 
```

所以字符放大`cex`应该相对于这些尺寸发生，大概是通过分别缩放水平和垂直尺寸（尽管我不确定）。

# android - 按钮形状的样式没有改变

> ID：10277294
> 
> 赞同：0
> 
> 时间：2012-04-23T08:38:19.330
> 
> 标签：android, android-layout

我想用圆边改变按钮的形状，但是当我在我的styles.xml中定义它时它不起作用

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="ButtonStyle">
        <item name="android:textColor">#00FFFF</item>
        <item name="android:shape">rectangle</item>
        <item name="android:bottomRightRadius">7dp</item>
        <item name="android:bottomLeftRadius">7dp</item>
        <item name="android:topRightRadius">7dp</item>
        <item name="android:topLeftRadius">7dp</item>
    </style>

</resources> 
```

main.xml 按钮

```
<Button
    android:id="@+id/button4"
    style="@style/ButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="31dp"
    android:layout_toLeftOf="@+id/button3"
    android:text="@string/sSettings" /> 
```

仅更改字体颜色。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:58:00.173

您必须为按钮声明一个可绘制的背景。在 res/drawables 中执行此操作。像这样创建一个新的可绘制文件：

/res/drawable/button_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners
        android:radius="7dp" />
    <solid android:color="#666666"/>

</shape> 
```

然后在你的布局中做：

```
<Button
    android:id="@+id/button4"
    style="@style/ButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@drawable/button_drawable"
    android:layout_marginRight="31dp"
    android:layout_toLeftOf="@+id/button3"
    android:text="@string/sSettings" /> 
```

如果你想设置每个角落，你也可以这样做：

```
<corners android:bottomRightRadius="7dp"
    android:bottomLeftRadius="7dp" 
    android:topLeftRadius="7dp"
    android:topRightRadius="7dp"/> 
```

[在这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)查看所有选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:03:05.300

将形状定义为可绘制的`rounded_corners.xml`，并且在样式中只需将其设置为按钮的背景。

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#00FFFF" />

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="7dp" />

</shape> 
```

和风格：

```
<style name="Button">            
        <item name="android:background">@drawable/rounded_corners</item>       
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:46:21.120

我已经这样做了：

```
<corners android:bottomRightRadius="7dp"
    android:bottomLeftRadius="5dp" 
    android:topLeftRadius="5dp"
    android:topRightRadius="7dp"/> 
```

# mysql - 无法从表中删除

> ID：10277297
> 
> 赞同：0
> 
> 时间：2012-04-23T08:38:53.280
> 
> 标签：mysql, stored-procedures

这是一段mysql代码

```
DELETE FROM tbl_node_details WHERE ParentId IN (1,2,3,4,5); 
```

这工作正常，所有行都用各自的 id 删除。但是什么时候这样做

```
SET @a='1,2,3,4,5'
DELETE FROM tbl_node_details WHERE ParentId IN (@a); 
```

它不起作用......是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:43:18.183

不能在查询语句中使用参数。尝试使用循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:44:04.727

正如@hkutluay 所说，这行不通。假设您从另一个表中获取参数，您可以执行以下操作：

```
DELETE FROM tbl_node_details WHERE ParentId IN (SELECT <id_col_name> FROM <other_table> WHERE <condition>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:41:54.990

You cannot use parameters with in statement. Try to loop or build string wo parameters

# silverlight - Wrap-Panel 使用拖放重新排序项目

> ID：10277303
> 
> 赞同：4
> 
> 时间：2012-04-23T08:39:18.490
> 
> 标签：silverlight, windows-phone-7, drag-and-drop, wrappanel

当用户触摸它时，我需要使用拖动来更改 WrapPanel（或具有水平方向的堆栈面板）中项目的位置。

我尝试了 MouseDragElementBehavior，但它仅更改当前项目的位置，而不更改其他项目的位置。

我看到了[这篇文章](http://blogs.msdn.com/b/jasongin/archive/2011/01/03/wp7-reorderlistbox-improvements-rearrange-animations-and-more.aspx)，但它与垂直方向的 listBox 一起使用。那么是否存在任何方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:05:02.807

WrapPanel 不是 Drag&Drop 的完美面板，因为它没有顺序的概念。事实上，项目是根据数据源中的顺序排序的。

使用您的示例，您可以像这样简单地更改 ItemsPanel：

```
 <rlb:ReorderListBox

          ...
            <rlb:ReorderListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel ItemWidth="100" ItemHeight="50"/>
                </ItemsPanelTemplate>
            </rlb:ReorderListBox.ItemsPanel>
... 
```

# c# - C# 无法在 IDE 中启动调试应用程序

> ID：10277307
> 
> 赞同：2
> 
> 时间：2012-04-23T08:39:39.770
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-debugging

我在 VS2010 中构建了 C# 应用程序。最近我在项目属性中更改了一些东西，现在我遇到了奇怪的问题：

*   我无法开始调试我的应用程序 (F5)。当我按 F5 项目编译但没有任何反应。即使我在我的 program.cs 主函数​​（即 MessageBox.Show() ）中添加了一些虚拟代码，它也不会被执行。

*   我可以使用“构建解决方案”构建应用程序，它可以毫无问题地编译和执行

在项目属性中启用以下选项： - 定义调试常量 - 定义跟踪常量 - 高级 bulid 设置/调试信息 - 完整

我应该改变什么才能从 IDE 调试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:44:25.210

尝试删除 .suo 文件。先做好备份！

这是类似的线程： [VS2010, F5 - Builds but doesn't run (WPF)](https://stackoverflow.com/questions/3866022/vs2010-f5-builds-but-doesnt-run-wpf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:46:45.030

关闭并重新启动 VS :) 以前发生过几次。

# php - 抽象类-儿童类型

> ID：10277317
> 
> 赞同：4
> 
> 时间：2012-04-23T08:40:58.143
> 
> 标签：php, oop, abstract-class, hierarchy, children

我正在尝试设计一些类层次结构，但我在这部分“卡住”了。

可以说我有以下课程

```
abstract class Video 
{
    const TYPE_MOVIE = 1;
    const TYPE_SHOW  = 2;

    abstract public function getTitle();
    abstract public function getType();
}

class Movie extends Video 
{
    // ...

    public function getType() 
    {
        return self::TYPE_MOVIE;
    }
}

class Show extends Video 
{
    // ...

    public function getType() 
    {
        return self::TYPE_SHOW;
    }
} 
```

在系统的不同部分，我有（解析器）类，它封装了电影和节目对象的创建并返回 obj。给客户。

**问题：**获取 obj 类型的最佳方法是什么？从解析器/工厂类返回，以便客户端可以执行类似的操作

```
$video = $parser->getVideo('Dumb and Dumber');

echo $video->getTitle();

// Way 1
if($video->getType == 'show') {
    echo $video->getNbOfSeasons();
}

// Way 2
if($video instanceof Show) {
    echo $video->getNbOfSeasons();
}

// Current way
if($video->getType == Video::TYPE_SHOW) {
    echo $video->getNbOfSeasons();
} 
```

有没有比我的解决方案更好的方法（读作：我的解决方案很烂吗？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:45:28.133

我会选择方式 2。它抽象出你需要添加另一个常量，`Video`以防你可能想要添加`class SoapOpera extends Show`（例如）。

使用方式#2，你对常量的依赖更少。无论您无需硬编码就可以获得任何信息，这意味着如果您想扩展，将来可能会发生更少的问题。阅读有关**[紧松耦合的](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)**信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:10:10.030

> 有没有比我的解决方案更好的方法（读作：我的解决方案很烂吗？）？

您的解决方案本身并不糟糕。但是，每当有人试图确定执行某些操作的子类型时，我往往会想知道；为什么？这个答案可能有点理论，甚至可能有点迂腐，但在这里。

**你不应该在乎**。父类和子类之间的关系是子类覆盖了父类的行为。一个[父类应该总是可以被它的子类替代，不管是哪一个](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。如果您发现自己在问：我如何确定子类型，您通常会做两件“错误”的事情之一：

1.  您正在尝试根据子类型执行操作。通常，人们会选择将该动作移动到班级本身，而不是班级的“外部”。这也使得代码更易于管理。

2.  您正试图通过使用继承来解决您自己介绍的问题，而继承是没有保证的。如果有父类，也有子类，每一个都要不同的使用，每一个都有不同的方法，就不要再使用继承了。他们不是同一类型。电影与电视剧不一样，甚至不相近。当然，您可以在电视上看到两者，但相似之处仅止于此。

如果您遇到问题 2，您可能使用继承不是因为它有意义，而只是为了减少代码重复。这本身就是一件好事，但您尝试这样做的方式可能不是最佳的。如果可以的话，你可以使用组合来代替，尽管我怀疑重复的行为会在哪里，除了一些任意的 getter 和 setter。

也就是说，如果您的代码有效，并且您对此感到满意：那就去做吧。这个答案在如何处理 OO 方面是正确的，但我对你的应用程序的其余部分一无所知，所以答案是通用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T08:49:46.637

我认为第二种选择更好，使用instanceof。这通常是所有 OOP 设计的共同点，而不仅仅是 PHP。

对于您的第一个选项，您在基类中具有派生类的详细信息，因此必须为您添加的每个新派生类修改基类，这应该始终避免。

在添加新的派生类时保持基类不变可以促进代码重用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T09:06:22.300

如果有一种“正确”的方式，并且当然在编码中一切都是主观的（只要它不会对性能/可维护性产生不利影响；）），那么这是“真相”和“布雷迪”所指出的第二种方式.

以您现在的方式做事（抽象中的类常量）的好处是，当您与其他开发人员一起工作时，它可以提供有关您期望抽象类如何与之交互的提示。

例如：

```
$oKillerSharkFilm = Video::factory(Video::MOVIE, 'Jaws', 'Dundundundundundun');
$oKillerSharkDocumentary = Video::factory(Video::DOCUMENTARY, 'Jaws', 'A Discovery Shark Week Special'); 
```

当然，缺点是您必须在抽象类中维护“允许的扩展”。

您仍然可以使用`instanceof`问题中演示的方法，并在摘要中维护允许的扩展列表，主要用于控制/类型修复。

# python - Python 2.7：Tkinter，如何使用绑定方法？

> ID：10277318
> 
> 赞同：1
> 
> 时间：2012-04-23T08:41:07.040
> 
> 标签：python, tkinter, bind

我正在尝试用 Python 创建一个拼字游戏。我想在用户输入单词时显示该单词的价值。我已经问过这个问题，因为我不知道使用什么方法。当我发现使用哪种方法时，我的问题是关于如何使用这种方法，我认为这值得提出一个新问题。我的问题是我创建了一个名为的函数，该函数`bind_entry(event)`应该在用户每次输入字母时设置一个标签。但是该函数`bind_entry(event)`不知道要设置的标签和单词所在的条目。

这是我的代码：

```
#this the function creating the label
def create_variabletext_intlabel(root,col,row):
    val=IntVar()
    label=Label(root,textvariable=val)
    label.grid(column=col,row=row)
    return val, label

#this is the function creating the entry
def create_entry_string(root,width,col,row,columnspan,rowspan):
    val=StringVar()
    entry=ttk.Entry(root,width=width,textvariable=val)
    entry.grid(column=col,row=row,columnspan=columnspan,rowspan=rowspan)
    entry.bind("<Any-KeyPress>",bind_entry)
    #Here is my problem, when I call the function bind_entry.
    return val, entry

def bind_entry(event):
    label.set(m.counting_point(char(event))) 
    # m.counting_point() is a function counting the word's points
    # my problem is that the function doesn't know yet the label. 
    # I don't know how to call the label. 

# I call the function create_entry_string in another file initiating
# all the widget for the GUI
val_entry_word, entry_word =g.create_entry_string(root,15,1,1,1,1)

# I call the function create_variabletext_intlabel in another file
# initiating all the widget for the GUI
val_points,label_points=g.create_variabletext_intlabel(root,1,2) 
```

我刚刚注意到该函数`m.counting_points()`将仅计算用户键入的字母。在这里我应该打电话`val_entry_word`。

所以这是我的问题：

As `val_entry_word`and `val_points`are created in an function in another file 我怎么能在函数中调用`val_entry_word`和？`val_points``bind_entry()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:34:27.443

通常，当您需要不同的函数调用来共享信息而不显式传递信息时，最佳实践是使用类。

例如

```
class LabelUpdater(object):
    def create_variabletext_intlabel(self,root,col,row):
        val=IntVar()
        self.label=label=Label(root,textvariable=val)
        label.grid(column=col,row=row)
        return val, label

    #this is the function creating the entry
    def create_entry_string(self,root,width,col,row,columnspan,rowspan):
        val=StringVar()
        entry=ttk.Entry(root,width=width,textvariable=val)
        entry.grid(column=col,row=row,columnspan=columnspan,rowspan=rowspan)
        entry.bind("<Any-KeyPress>",self.bind_entry)
        #Here is my problem, when I call the function bind_entry.
        return val, entry

     def bind_entry(self,event):
        self.label.set(m.counting_point(char(event))) 

#At this point, I don't understand your code anymore since I don't know what g
#is or how it's create_entry_string method calls your create_entry_string function...
#I'll assume that the module where g's class is defined imports this file...
#If that's how it works, then the following may be ok, although probably not because
#of circular imports...

container=LabelUpdater()
create_variabletext_intlabel=container.create_variabletext_intlabel
create_entry_string=container.create_entry_string

val_entry_word, entry_word =g.create_entry_string(root,15,1,1,1,1) #somehow calls create_variabletext_intlabel which is mapped to container.create_variable_intlabel???

# I call the function create_variabletext_intlabel in another file
# initiating all the widget for the GUI
val_points,label_points=g.create_variabletext_intlabel(root,1,2) 
```

当然，您也可以使用全局变量...（尽管绝对不鼓励这样做）

最后，我经常用来在绑定回调中添加附加信息的习惯用法是将回调函数包装在另一个函数中......

```
def myfunc(root):
    label=Label(root,text="cow")
    label.pack()
    return label

#This is the callback we want...
#  Q: but how do we pass S? 
#  A: we need to wrap this call in another -- a perfect use for lambda functions!
def change_label(label,S):
    label.config(text=S)

root=Tk()
lbl=myfunc(root)
lbl.bind("<Enter>",lambda e: change_label("Horse"))
lbl.bind("<Leave>",lambda e: change_label("Cow")) 
```

# java - 无法通过 java api 将图像文件上传到谷歌格式的谷歌文档

> ID：10277322
> 
> 赞同：0
> 
> 时间：2012-04-23T08:41:38.797
> 
> 标签：java, google-docs, google-docs-api

我需要以谷歌格式将图像上传到谷歌文档中，以便将其取回并保存存储空间。下面是我的代码示例，它工作正常但最近坏了，我得到的只是一个空文档。有人可以帮我吗？

```
DocsService client = new DocsService("testappv1"); 
client.setUserCredentials(username, password); 
client.setProtocolVersion(DocsService.Versions.V2); 
File file = new File("C:/test.jpg"); 
DocumentEntry newDocument = new DocumentEntry(); 
newDocument.setTitle(new PlainTextConstruct("test")); 
String mimeType = DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
newDocument.setMediaSource(new MediaFileSource(file, mimeType)); 
newDocument = client.insert(destFolderUrl, newDocument); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:24:16.853

请看一下这个[答案](https://stackoverflow.com/a/10195674/1106381)。此外，从您的代码中删除这一行：

```
client.setProtocolVersion(DocsService.Versions.V2); 
```

您应该尽可能使用默认版本 (3.0)。

# javascript - 使用 jQuery 获取元素的真实宽度

> ID：10277323
> 
> 赞同：19
> 
> 时间：2012-04-23T08:41:42.460
> 
> 标签：javascript, jquery, html

我正在为 html 文件的“视觉正确性”编写验证器。目标是检测太宽的元素。

**[这是我的问题的演示。](http://jsfiddle.net/vv68y/2/)**

红色虚线表示文档的最大宽度（本例中为 200 像素）。第一段很好，但第二段太宽了。尽管如此，以下所有命令仍然返回“200px”作为宽度：

```
// all return 200, but the value should be larger   
$('#two').width();
$('#two').outerWidth();
$('#two').prop('clientWidth'); 
```

请参阅[小提琴](http://jsfiddle.net/vv68y/2/)以获取更多详细信息。

我怎样才能检测到这种过大的元素？

**更新的问题：**最好问一下，我如何检测超出其父元素边界的文本？

**更新要求：**我不允许更改源 HTML 或 CSS 中的任何内容。但是我可以用 jQuery 做任何我想做的事情来修改文档，这样我就可以检测到那些太宽的元素。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T09:16:05.727

正如其他人所说，暂时将文本节点包装在一个内联元素中。

```
var two = document.getElementById('two'),
    text = two.firstChild,
    wrapper = document.createElement('span');

// wrap it up
wrapper.appendChild(text);
two.appendChild(wrapper);

// better than bad, it's good.
console.log(wrapper.offsetWidth);

// put it back the way it was.
two.removeChild(wrapper);
two.appendChild(text); 
```

[http://jsfiddle.net/vv68y/12/](http://jsfiddle.net/vv68y/12/)

这是一个`getInnerWidth`对您应该有用的功能。传递给它一个元素，它将处理包装和展开。

```
function getInnerWidth(element) {

    var wrapper = document.createElement('span'),
        result;

    while (element.firstChild) {
        wrapper.appendChild(element.firstChild);
    }

    element.appendChild(wrapper);

    result = wrapper.offsetWidth;

    element.removeChild(wrapper);

    while (wrapper.firstChild) {
        element.appendChild(wrapper.firstChild);
    }

    return result;

} 
```

[http://jsfiddle.net/vv68y/13/](http://jsfiddle.net/vv68y/13/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-09T10:22:57.547

scrollWidth 会这样做：

$("#two").get()[0].scrollWidth 或 getElementById("two").scrollWidth

这将输出 212px，即您正在寻找的实际宽度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T08:56:38.133

这种效果称为“[收缩包装](http://haslayout.net/css-tuts/CSS-Shrink-Wrap)”，有几种方法可以确定元素的“真实”宽度。

## 漂浮

您可以使用的一种方法是浮动您的`<p>`元素，这将迫使它尽可能小，但如果您的 div 内的任何内容是浮动的，您将需要使用[clearfix ：](http://www.webtoolkit.info/css-clearfix.html)

```
#two { float: left; } 
```

## 内联块元素

插入内联元素应该可以工作。

```
<p>content</p> 
```

会成为

```
<p><span>content</span></p> 
```

## 绝对定位元素

将元素位置更改为绝对位置也应该有效：

```
#two { position: absolute; } 
```

* * *

如果您不能静态更改标记或样式，则始终可以通过 JavaScript 动态更改它们。

（绝对定位元素）

```
var realWidth = $("#two").css("position", "absolute").width(); 
```

（漂浮）

```
var realWidth = $("#two").css("float", "left").width(); 
```

（内联块元素）

```
var t = $("#two").html();
var realWidth = $("#two")
    .empty()
    .append($("<span>").html(t))
    .width(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T08:51:18.163

应用`word-wrap: break-word;`到它..所以单词会中断并且不会有任何文本从容器中流出......顺便说一句，您无法检查从容器中流出的文本的宽度。

[例子](http://jsfiddle.net/vv68y/6/)

**更新：您可以像**[这样](http://jsfiddle.net/vv68y/10/)检查其中文本的宽度是否大于容器的宽度

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-12T10:42:38.607

正如其他人所指出的`position`，将元素更改为`absolute`也可以。这样做会导致内联样式，如果您不小心的话，之后可能会弄乱您的 css。这是再次摆脱内联样式的解决方案。

```
//Change position to absolute
$('#two').css("position", "absolute");
var textWidth = $('#two').width();

//Get rid of the inline style again
$('#two').removeStyle("position");

//Plugin format
(function ($) {
    $.fn.removeStyle = function (style) {
        var search = new RegExp(style + '[^;]+;?', 'g');

        return this.each(function () {
            $(this).attr('style', function (i, style) {
                return style.replace(search, '');
            });
        });
    };
}(jQuery)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T08:48:52.037

元素本身被限制为 200px，但里面的文本溢出了。如果您在 P 标签内插入一个跨度（或任何其他内联元素），它可以正常工作。

[http://jsfiddle.net/will/vv68y/5/](http://jsfiddle.net/will/vv68y/5/)

希望有帮助:)

# delphi - Delphi7 Canvas.TextOut 不能写新行

> ID：10277324
> 
> 赞同：0
> 
> 时间：2012-04-23T08:41:44.137
> 
> 标签：delphi, delphi-7, newline

我正在尝试用要绘制的新行替换所有“#”：

```
Canvas.TextOut(0,0,''+StringReplace('a#b','#',#13#10,[rfReplaceAll])); 
```

但什么都没有。
TextOut 打印“a#b”，就像被替换的部分甚至不存在（但它确实存在）：`ab`
而不是这个：

```
a
b 
```

`#13#10`新行（Windows）对吗？
那为什么这不起作用？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T08:55:07.997

您需要使用`DrawText`来生成多行文本：

```
var
  R: TRect;
....
R := Rect(0, 0, Width, Height);
DrawText(
  Canvas.Handle,
  PChar(StringReplace('a#b','#',#13#10,[rfReplaceAll])),
  -1,
  R,
  0
); 
```

您可能很想在最终参数中使用不同的标志，但我相信您可以阅读[文档](http://msdn.microsoft.com/en-us/library/dd162498.aspx)并找出您需要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:00:39.677

Textout 基本上是 Windows.ExtTextOut 的包装器，它不支持多行。另一种方法是使用 DrawText：

```
var
  r: TRect
  s: string
begin
  s := StringReplace('a#b','#',#13#10,[rfReplaceAll]);
  r.Left := 10;
  r.Top := 10;
  DrawText(Canvas.Handle, PWideChar(s), Length(s), r, DT_NOPREFIX or DT_WORDBREAK);
end; 
```

如果您使用的是 Delphi 7，那么您可能希望将 PWideChar 替换为 PChar。

# sql-server - 从 SQL2000 移动到 SQL2008 后，VB6 ADODB 后续 SELECT 查询超时

> ID：10277329
> 
> 赞同：0
> 
> 时间：2012-04-23T08:42:08.047
> 
> 标签：sql-server, vb6, timeout, migration, adodb

在将数据库移动到不同的服务器后执行多个 SELECT 时，我面临超时问题，在我的任务是修补的遗物（VB6 应用程序）中。事情在旧环境中完美无缺，新环境包含旧表的副本。

**笔记！**新数据库是*从头开始构建的**（*也就是说，DBA 运行了许多 CREATE TABLE + INSERT 脚本来创建表的复本，然后用旧数据填充它们）。

 *这是错误来源：

```
// "conn" is being initialized outside the function
Public Function PerformOperation(ByRef conn as ADODB.Connection, query as string) as Boolean
  Dim rs as ADODB.Recordset
  //This below is the timeout source
  rs.Open conn, query, adOpenStatic, adLockReadOnly

  If Not (rs.EOF or rs.BOF) Then
    rs.MoveFirst
    //assign data to many variables
  End If

ExitPoint:
  If Not (rs Is Nothing) Then
    If (rs.State = adStateOpen) Then rs.Close
    Set rs = Nothing
  End If   

  Exit Function

Error:
  MsgBox "Blah blah"
  Resume ExitPoint
  Resume 0

End Function 
```

函数是这样调用的

```
conn = New ADODB.Connection
conn.ConnectionString = "..."
conn.Open

For i = 1 To RowCount //reading data from a grid component (data is correct!)
  //very long select here... kept short
  query = "SELECT something FROM somewhere WHERE <manyFields> = <manyValues>" 
  If PerformOperation(conn, query) = True Then
    //UPDATE another table based on the SELECT data
    // NOTE: this occurs on a DIFFERENT, INDEPENDENT ADODB.Connection object
  End If
Next i 
```

第一次`PerformOperation`调用它通过正常，第二次通过它超时无论我设置多长时间`CommandTimeout`。如果循环“循环”一次，它也可以正常工作。

这里的大问题是，我所要尝试的只是**生产**环境，所以我需要格外小心。我手头也没有很深的 DBA 知识...只是一个非常古老的软件，最终将被移植到 .NET 但同时需要处理...

如何检查和/或解决此问题？这**必须**适用于任何长度的`For`周期

非常感谢您的任何建议（一如既往，如果我错过了任何重要的细节，请指出，如果可以的话，我会提供）。

**编辑#1** 我扩展了第一个和第二个代码块，以提供有关正在发生的事情的更深入的细节。更改了评论以尝试修复突出显示（单引号弄乱了颜色）。

**编辑#2** 在连接字符串中启用多个活动结果集（MARS）也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:57:52.507

我有点惊讶它到目前为止工作得这么好。

您必须关闭您打开的记录集，否则您将用完一个数据库连接来运行每个查询。数据库会在一段时间后回收未使用的连接，但是如果您使用太多连接太快，您将达到每个用户的连接数限制，并且数据库将拒绝更多连接。

它完全适用于旧数据库的原因可能是因为它根据需要创建了新连接。这已在以后的版本中进行了更改，您必须更改设置以允许更旧、更浪费资源的行为。但是，更改该设置并不是解决问题的好方法。

当您不再需要它时，关闭记录集并删除它。这将释放连接，以便您可以将其用于另一个查询：

```
Public Function PerformOperation(ByRef conn as ADODB.Connection, query as string) as Boolean
  Dim rs as ADODB.Recordset
  'This below is the timeout source
  rs.Open conn, query, adOpenStatic, adLockReadOnly

  rs.Close()
  Set rs = Nothing

  ' [cut]: PerformOperation returns true if SELECT returns something
End Function 
```

* * *

### 编辑：

除了 之外，还有其他打开状态`adStateOpen`，您可能应该检查关闭状态：

```
If (rs.State <> adStateClosed) Then rs.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:34:48.297

问题已解决编辑此行：

```
If PerformOperation(conn, query) = True Then 
```

像这样

```
If PerformOperation(connOther, query) = True Then 
```

基本上，方法调用已移至其自己的连接，声明与另一个完全一样。现在它起作用了，虽然我真的不知道为什么：这是一些疯狂编辑试图修补的结果。*

# javascript - How to perform database operations on browser close?

> ID：10277330
> 
> 赞同：1
> 
> 时间：2012-04-23T08:42:12.947
> 
> 标签：javascript, jquery, asp.net, browser

I am developing online chatting in my website. Some users close the browser when they are in online. I want to done some database operations when user closes the browser

I use this one

```
 window.onbeforeunload = function (event) {
            event = event || window.event;
            if ((event.clientX < 0) || (event.clientY < 0) || event.clientY < -80) { 
} 
```

it does not work in non IE browsers..........

Can any one help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:52:43.903

有关如何捕获浏览器关闭事件的信息，请参阅[此问题。](https://stackoverflow.com/questions/1631959/browser-window-close-event)

现在您可以做的是在事件中执行 AJAX 调用来调用 Web 服务，这反过来会相应地更新您的数据库。

请参阅[此](https://stackoverflow.com/questions/8743119/preventing-web-browser-from-closing-until-ajax-response-is-returned)问题以防止在 AJAX 请求中间时关闭浏览器。

# java - How to setup a marker or a background color to a particular line in the editor given its line number?

> ID：10277331
> 
> 赞同：1
> 
> 时间：2012-04-23T08:42:13.807
> 
> 标签：java, eclipse, eclipse-plugin

> Hi, I m doing a eclipse plugin project to create an IDE like eclipse for a particular language.
> 
> when the program written in my IDE is having errors,it throws the errors to the console view which i have created in my IDE.but when the user clicks on a particular,i should highlight or set a marker for the line having the error.
> 
> I know the line number having the error.How shall i set the background color or a marker to indicate the user that this line is having the selected error?
> 
> How shall i do this in java?
> 
> Can anyone help me in doing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:47:39.103

你应该使用`MarkerUtilities.createMarker(IResource, Map, String)`这样的东西：

```
Map<String, Object> map = new HashMap<String, Object>();

map.put(IMarker.MESSAGE, "My message");
map.put(IMarker.LINE_NUMBER, Integer.valueOf(myLine));
map.put(IMarker.CHAR_START, Integer.valueOf(myStartRegion));
map.put(IMarker.CHAR_END, Integer.valueOf(myEndRegion));
map.put(IMarker.SEVERITY, Integer.valueOf(IMarker.SEVERITY_INFO));
map.put(IMarker.PRIORITY, Integer.valueOf(IMarker.PRIORITY_NORMAL));

org.eclipse.ui.texteditor.MarkerUtilities.createMarker(myFile, map, MARKER_ID); 
```

与您`MARKER_ID`的 plugin.xml 中的“markerType”描述相匹配

查看扩展点

*   `org.eclipse.ui.editors.annotationTypes`
*   `org.eclipse.ui.editors.markerAnnotationSpecification`
*   `org.eclipse.core.resources.markers`

[**您可以在此 plugin.xml**](https://github.com/eclipse/acceleo/blob/master/plugins/org.eclipse.acceleo.ide.ui/plugin.xml)中找到错误标记的示例。寻找对标记的引用。标记的设计在 plugin.xml 中定义

# jquery - Ajax.ActionLink 与 Html.ActionLink + Jquery.Ajax 调用

> ID：10277332
> 
> 赞同：7
> 
> 时间：2012-04-23T08:42:19.880
> 
> 标签：jquery, ajax, asp.net-mvc, actionlink

我可以通过 Ajax.ActionLink("Get customers","GetCustomers","Customer"); 调用一个 asp.net mvc 控制器。

我可以对 Html.ActionLink 和 jquery ajax 调用做同样的事情。

区别在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T08:44:21.733

> 区别在哪里？

在您必须编写的代码量（更少使用 Ajax.ActionLink）和您需要的控制级别（更多使用 Html.ActionLink 和 jquery ajax 调用）。

因此，代码量与所需的控制和功能级别 => 由您决定您需要哪一个。

这两种方法都很好。Ajax.ActionLink 使用 jquery.unobtrisuve-ajax 脚本在幕后对锚点进行 AJAX 化。

就我个人而言，我总是使用 Html.ActionLink + jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:50:47.813

如果您问我@gdoron 在他的回答中提到的引擎盖下使用的`$.ajax`是什么，则没有区别。`Ajax.ActionLink`个人使用`$.ajax`会带来更多的控制感...您可以在`$.ajax`一加点中操作更多可用的选项`Ajax.ActionLink`，因为我认为如果禁用javascript，它会提供开箱即用的降级支持，但您可以探索它.. .

# java - 在netbeans的strut2应用程序中只生成birt图表

> ID：10277333
> 
> 赞同：1
> 
> 时间：2012-04-23T08:42:25.797
> 
> 标签：java, charts, struts2, birt

我想在 netbeans 的 struts2 应用程序中使用 Birt 图表，我已经搜索过它，但没有找到合适的链接来了解如何在 strut2 中实现。我想通过在我的网页上提供动态输入和显示图表来生成图表。

任何知道的请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:26:05.257

所以对于这个问题，我想将 bean 传递给图表设计。我在 Eclipse 中生成设计，其中包含我想要的所有可能的东西，方法是选择脚本类型作为图形的输入源，并将保存的图表设计文件复制到我的 WEB-INF 文件夹中，并为设计创建新文件夹。

添加所有依赖项 jar 文件。

按照以下链接调用

[http://birtworld.blogspot.in/2010/02/birt-and-struts-2.html](http://birtworld.blogspot.in/2010/02/birt-and-struts-2.html)

# bash - bash - 在设置超时后杀死一个子进程

> ID：10277335
> 
> 赞同：2
> 
> 时间：2012-04-23T08:42:34.690
> 
> 标签：bash, shell, debian

我希望有人能够帮助我解决这个问题，我需要一个 shell 脚本循环，它将运行循环内的内容 15 秒。所以例如

```
if (true)
    run command for 15 seconds
fi
    kill PID 
```

我是 shell 脚本的新手，所以我迷失了。如果这有什么不同，我也正在使用 debian instll

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:46:03.063

你在寻找[`timeout`](http://manpages.ubuntu.com/timeout.1)命令吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:49:56.787

以下 bash 脚本可能对您有用。该脚本将在开始循环之前将初始纪元时间设置为变量。在循环运行时，将使用当前纪元时间设置一个附加变量。将比较两个纪元时间，只要差异小于或等于 15，您的命令将继续运行。请注意，在下面的脚本中，当前运行的命令是'echo "counting ${COUNTER}"'。您应该更改脚本的这一部分以匹配您要完成的任务。一旦两个 epoch 时间的差异大于 15，脚本将退出。此时您将需要启动您的 kill 命令。如果确实发生错误，您应该在“YourLogFile”中看到“ERROR...YourScript.sh failed”（将您的日志文件设置为您想要的）

注意：无论您在此循环中尝试运行什么，都可能在 15 秒内运行很多很多次。通过使用下面的脚本作为测试，您将看到 echo 命令每秒运行超过 50 次。

```
#!/bin/bash

LOOP="true"
INITIAL_TIME=$(date "+%s")

while [[ ${LOOP} == true ]]; do

    CURRENT_TIME=$(date "+%s")
    COUNTER=$(expr ${CURRENT_TIME} - ${INITIAL_TIME})

    if [[ ${COUNTER} -le "15" ]]; then

        echo "counting ${COUNTER}"
        # RUN YOUR COMMAND IN PLACE OF THE ABOVE echo COMMAND

    elif [[ ${COUNTER} -gt "15" ]]; then
        exit 0
            #INITIATE YOUR KILL COMMAND IN PLACE OF OR BEFORE THE exit
    else
        echo "ERROR... YourScript.sh failed" >> /YourLogFile
    fi

done 
```

# c# - 离开 WaitOne 时获取锁

> ID：10277336
> 
> 赞同：1
> 
> 时间：2012-04-23T08:42:35.030
> 
> 标签：c#, locking, atomic

我有一个这样实现的任务调度程序：

```
 private readonly List<Task> mTasks = new List<Task>();
  private readonly ManualResetEvent mNoTaskEvent = new ManualResetEvent(false);

  public void AddTask(Task task)
  {
     lock (mTasks)
     {
        mTasks.Add(task);
        mNoTaskEvent.Set();
     }
  }

  public void RemoveTask(Task task)
  {
     lock (mTasks)
     {
        mTasks.Remove(task);
        if (mTasks.Count == 0)
           mNoTaskEvent.Reset();
     }
  }

  void BackgroundThreadProc()
  {
     while (mRunning)
     {
        mNoTaskEvent.WaitOne();

        if (!mRunning) break;

        Task nextTask;

        lock (mTasks)
        {
           mTasks.Sort(...);
           nextTask = mTasks.First();
        }

        nextTask.Run();
     }
  } 
```

mNoTaskEvent 允许在没有可用任务时阻塞后台线程。如果另一个线程删除“mNoTaskEvent.WaitOne()”和“lock (mTasks)”之间的所有剩余任务，则存在竞争条件。

离开 mNoTaskEvent.WaitOne() 时如何以原子方式获取 mTasks 锁？

**编辑** pthread API 有一个功能可以完全满足我的需要：[pthread_cond_wait](http://cursuri.cs.pub.ro/~apc/2003/resources/pthreads/uguide/users-78.htm#285729 "pthread_cond_wait")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:47:50.620

对竞态条件的一个简单修复是再次检查计数：

```
 lock (mTasks)
    {
       if (mTasks.Count < 1)
         continue;

       mTasks.Sort(...);
       nextTask = mTasks.First();
    } 
```

* * *

使用 Monitor.Wait()：

```
 while (mRunning)
 {
    //mNoTaskEvent.WaitOne();

    if (!mRunning) break;

    Task nextTask;

    lock (mTasks)
    {
        while (mTasks.Count < 1)
        {
           Monitor.Wait(mTasks);

           if (!mRunning) break;                
        }

        ...     
    }

public void AddTask(Task task)
{
  lock (mTasks)
  {
     mTasks.Add(task);
     //mNoTaskEvent.Set();
     Monitor.Pulse(mTasks);
  }
} 
```

停止整个链时，您还需要 Pulse()。

# android - 为什么我无法使用 Android NFC 将 ST M24LR64 读取为 NDEF 消息

> ID：10277337
> 
> 赞同：2
> 
> 时间：2012-04-23T08:42:36.070
> 
> 标签：android, nfc, ndef, iso-15693

STMicroelectronics 的 M24LR64 IC 支持 ISO 15693 协议，在 Android NFC 中也称为 NfcV。当我将 Nexus S 手机（Android 4.0.4）放在原型标签板附近时，我可以听到哔哔声，并看到 logcat 发出一条消息：

```
no tag fallback activity found for Intent { act = android.nfc.action.TAG_DISCOVERED} 
```

我想知道为什么 android 会发送 ACTION_TAG_DISCOVERED 意图，而不是 ACTION_NDEF_DISCOVERED，因为我已经按照 ST 应用说明构建了 ndef 格式消息。我可以使用 ST 自己的名为 NfcV-Reader 的阅读器软件阅读 NDEF 消息。

然后我在android中编写了一个演示程序来验证问题。当我用这个 AndroidManifest.xml 注册意图时

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

我无法接收 NFC 消息。当我用这个修改

我可以收到来自 Android 系统的 NFC 消息。但是当我用表达式检查 NDEF 消息时

```
Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES); 
```

`rawMsgs`变量是`null`！所以我查看了 ST NfcV-Reader 源代码，发现它已经处理了来自 M24LR64 EEPROM 的所有数据和读取块。这意味着读取原始数据，不要使用 Android NFC 和 NDEF 的现成实用程序。

```
protected Void doInBackground(Void... params)
{
    DataDevice dataDevice = (DataDevice)getApplication();
    fullNdefMessage = null;
    byte[] resultBlock0 = new byte[4];
    byte[] resultBlock1 = new byte[8];
    cpt = 0;

    resultBlock0 = null;
    while ((resultBlock0 == null || resultBlock0[0] == 1)&& cpt<1500)
    {
        resultBlock0 = NFCCommand.SendReadSingleBlockCommand(dataDevice.getCurrentTag(), new byte[]{0x00,0x00}, dataDevice);
        cpt ++;
        Log.v("CPT ", " CPT Read Block 0 ===> " + String.valueOf(cpt));
    }

    //if CC0 = E1h & CC1 = right version
    if(resultBlock0[0]==(byte)0x00 && resultBlock0[1]==(byte)0xE1 && resultBlock0[2]==(byte)0x40)
    {
        //NDEF TAG Format valid
        cpt = 0;
        resultBlock1 = null;

        while ((resultBlock1 == null || resultBlock1[0] == 1) && cpt < 10)
        {
            resultBlock1 = NFCCommand.SendReadMultipleBlockCommand(dataDevice.getCurrentTag(),new byte[]{0x00,0x01}, (byte)0x02, dataDevice);
        }
        if(resultBlock1[1]==(byte)0x03 && resultBlock1[6]==(byte)0x54) // Text message
        {
            if(resultBlock1[5]<0)
                numberOfBlockToRead = ((resultBlock1[5] + 256 + 14)/4);
            else
                numberOfBlockToRead = ((resultBlock1[5] + 14)/4);
        }
        else if(resultBlock1[1]==(byte)0x03 && resultBlock1[6]==(byte)0x55) // URL message
        {
            if(resultBlock1[1]<0)
                numberOfBlockToRead = ((resultBlock1[2] + 256 + 12)/4);
            else
                numberOfBlockToRead = ((resultBlock1[2] + 12)/4);
        }
    }
    else
    {
        //Not NDEF TAG Format
        numberOfBlockToRead = 0;
    }

    bNumberOfBlock = Helper.ConvertIntTo2bytesHexaFormat(numberOfBlockToRead);

    cpt = 0;
    if(numberOfBlockToRead <32)
    {
        while ((fullNdefMessage == null || fullNdefMessage[0] == 1) && cpt < 10 && numberOfBlockToRead != 0)
        {
            fullNdefMessage = NFCCommand.SendReadMultipleBlockCommandCustom(dataDevice.getCurrentTag(),new byte[]{0x00,0x00}, bNumberOfBlock[1], dataDevice);
            cpt++;
        }
    }
    else
    {
        while ((fullNdefMessage == null || fullNdefMessage[0] == 1) && cpt < 10 && numberOfBlockToRead != 0)
        {
            fullNdefMessage = NFCCommand.SendReadMultipleBlockCommandCustom2(dataDevice.getCurrentTag(),new byte[]{0x00,0x00}, bNumberOfBlock, dataDevice);
            cpt++;
            Log.i("CPT ", "***** " + String.valueOf(cpt));
        }
    }

    return null;
} 
```

我的问题是我是否可以使用 android NDEF 工具而不是原始块读写来处理我的带有 ISO 15693 的 NFC 标签？如何在 M24LR64 EEPROM 中格式化我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:18:50.780

M24LR64 和类似的 LRiS64K 芯片不支持标准 ISO 15693 读取命令。（不过，它们可以很容易地从它们的标签 ID 中识别出来。）ST 最近定义并[发布](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/APPLICATION_NOTE/DM00029842.pdf)了一种在此类标签上存储 NDEF 消息的方法。这与在 NXP ICODE SLI 标签上完成的方式非常相似，Android 对此提供支持。然而，目前，Android 中的 NFC 软件堆栈不支持 ST NfcV 标签上的 NDEF。

更新：

Nexus 4 现在支持`NfcV`NXP ICODE 以外的其他标签上的 NDEF 存储。现在在 TI Tag-it HF-I 标签和 LRi2K 等 ST 标签上支持 NDEF 存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:58:16.157

那好吧。ISO15693。

那里有很多 ISO15693 标签，它们在读取和写入内存的方式上有所不同（一字节与两字节寻址是一个共同的区别）。有一个标准，但在野外有很多不同的变化。对于 M24LR64 芯片，需要两个字节寻址。

不幸的是，没有办法询问这样的标签它说的是哪种变体，因此 NFC 软件识别它的唯一方法是在 NFC 软件中列出已知标签及其怪癖。

猜猜看：通常android自带的NFC栈不知道M24LR64标签，所以它不能读/写NDEF数据。

这就是您必须使用原始读/写命令的原因。这个otoh完美地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T20:10:47.967

有标准，但它们不兼容……阅读原始数据很好，暂时坚持下去。您还可以查看 ST 参考 Android 代码以获取想法。我认为它澄清了很多。

# jquery - 连续滚动图像横幅 Jquery

> ID：10277343
> 
> 赞同：0
> 
> 时间：2012-04-23T08:43:05.940
> 
> 标签：jquery, animation, loops, slider

我有一个客户要求连续滑动横幅，基本上它是一个从左到右移动超过 5 秒的图像，我知道该怎么做，我只需要知道如何设置它，让它循环播放，就像连续动画

```
$(document).ready(function() {
        function slide() {
          $(".img1").stop(true).animate({'left' : '960px'}, 5000);
        }

        slide();
     }); 
```

谢谢

编辑

好的尝试这个，仍然没有循环，一直在尝试 setIntervals 但没有工作，我知道我错过了一些简单的东西，但是什么

```
 function slide(){  
        $('.homepageslider').animate({   'left' : '0px'  }), 
            { duration: 5000,
                complete: function() {  $(".homepageslider").css('left','-2028px');
                     slide();    
            }
            }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:58:29.557

```
 $('#book').animate({
   'left' : '960px'
  }, {
    duration: 5000,
    complete: function() {
     //reset image position
      $(".img1").css('left','0px');
     // activate animation again
       slide();

    }
  }); 
```

我更喜欢在当前图像之后附加图像的克隆，并在之前的图像看不见时删除它，因此它看起来很无缝，但您也可以尝试上面的代码。

# java - Java重新运行jar文件

> ID：10277347
> 
> 赞同：-1
> 
> 时间：2012-04-23T08:43:27.173
> 
> 标签：java, jar

我想重新运行一个 jar 文件（带有一些附加参数）。我怎样才能做到这一点？我需要解决方案独立于操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:10:11.183

如果我正确解读了这个问题，我们正在谈论命令行界面参数。为此，有很多教程：[http ://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)

代码很简单，就像你自己说的：

```
if ("-server".equalsIgnoreCase(argv)) {
    // we are server
} else if ("-client".equalsIgnoreCase(argv)) {
    // we are client
} 
```

现在，根据您希望如何从操作系统执行程序，有多种方法：

```
$java -jar yourjar.jar -client 
```

或者

```
$java -cp yourjar.jar com.your.program.Main -client 
```

“-server”也一样。

要一起运行它们，可以从单独的终端窗口（或 cmd 提示符）运行它们。或者 - 如果在 Linux 中 - 您可以使用 & 符号：

```
$java -jar yourjar.jar -client &
$java -jar yourjar.jar -server & 
```

# java - get() 如何在 hashmap 上工作

> ID：10277348
> 
> 赞同：1
> 
> 时间：2012-04-23T08:43:29.283
> 
> 标签：java, hashmap

当java从hashmap调用get方法时java会执行equals()比较吗？

我读过它确实如此，但是由于我遇到的错误，它似乎在进行 == 比较。

公共类 UniversalFiniteStateAutomaton {

```
State currentState;
State initialState;
State trapState;

public UniversalFiniteStateAutomaton(ArrayList<String> finalStates,
        ArrayList<String> transitions) {
    String statesAndTransitions[];
    Map<Symbol<E>, State> createdStates = new HashMap<Symbol<E>, State>();
    for (String s : transitions) {
        // Replace the stuff that doesn't matter
        s = s.replaceAll("[()]", "");
        // Split the transition into states and transitions
        statesAndTransitions = s.split("\\s+");

        // Create the state if its not already created
        if (finalStates.contains(new Symbol(statesAndTransitions[0]))) {
            if (!createdStates.containsKey((new Symbol(statesAndTransitions[0])))) {
                createdStates.put(new Symbol(statesAndTransitions[0]),
                        new FinalState(this));
                System.out.println("Created one symb " + new Symbol(statesAndTransitions));
            }
        } else {
            if (!createdStates.containsKey(new Symbol(statesAndTransitions[0]))) {
                createdStates.put(new Symbol(statesAndTransitions[0]),
                        new NormalState(this));
                System.out.println("Created one symb " + new Symbol(statesAndTransitions[0]));
            }
        }
        // Make sure that the next state is created
        if (finalStates.contains(new Symbol(statesAndTransitions[2]))) {
            if (!createdStates.containsKey(new Symbol(statesAndTransitions[2]))) {
                createdStates.put(new Symbol(statesAndTransitions[2]),
                        new FinalState(this));
            }
        } else {
            if (!createdStates.containsKey(new Symbol(statesAndTransitions[2]))) {
                createdStates.put(new Symbol(statesAndTransitions[2]),
                        new NormalState(this));
            }
        }

        System.out.println(createdStates);
        // Define the transition
        createdStates.get(new Symbol(statesAndTransitions[0])).addTransition(
                new Symbol(statesAndTransitions[1]),
                createdStates.get(new Symbol(statesAndTransitions[2])));

    }
    this.currentState = createdStates.get(new Symbol("0"));
}

public String analyzeInput(String input) {
    String splitInput[] = input.split("\\s+");
    for(String s: splitInput)
        try {
            currentState.transition(new Symbol(s));
        } catch (TrapException e) {
            return("Reject");
        }
    if(currentState.type()==0)
        return "Accept";
    return "Reject";
}

public void setState(State currentState) {
    this.currentState = currentState;
}
 }

public class Symbol<E> {
private E symbol;

public Symbol(E symbol){
    this.symbol = symbol;
}

public E getSymbol() {
    return symbol;
}

public void setSymbol(E symbol) {
    this.symbol = symbol;
}

public String toString(){ return "" +symbol;} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:47:31.507

是的，它确实。但是，如果您没有`equals()`为自己的类定义自己的类，它会使用`Object.equals()`，并且*确实会*使用`==`。这就是为什么如果你想把你的对象放入一个集合中，你应该重写`equals()`(and )。`hashcode()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:48:28.370

你自己看：

*   [http://hg.openjdk.java.net/jdk6/jdk6-gate/jdk/file/tip/src/share/classes/java/util/HashMap.java](http://hg.openjdk.java.net/jdk6/jdk6-gate/jdk/file/tip/src/share/classes/java/util/HashMap.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T08:47:35.737

它使用 hashcode() 来定位潜在的匹配，然后使用 equals 来找到精确匹配。如果其用户定义的对象，请确保实现 equals 和 hashcode 以遵守合同（在 Object 的类文档中提到）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T08:49:47.077

get first 使用 == 检查它是否是同一个对象。如果不是，它使用等于。

请参阅此处的代码 [http://www.docjar.com/html/api/java/util/HashMap.java.html](http://www.docjar.com/html/api/java/util/HashMap.java.html)

```
/**
  298        * Returns the value to which the specified key is mapped,
  299        * or {@code null} if this map contains no mapping for the key.
  300        *
  301        * <p>More formally, if this map contains a mapping from a key
  302        * {@code k} to a value {@code v} such that {@code (key==null ? k==null :
  303        * key.equals(k))}, then this method returns {@code v}; otherwise
  304        * it returns {@code null}.  (There can be at most one such mapping.)
  305        *
  306        * <p>A return value of {@code null} does not <i>necessarily</i>
  307        * indicate that the map contains no mapping for the key; it's also
  308        * possible that the map explicitly maps the key to {@code null}.
  309        * The {@link #containsKey containsKey} operation may be used to
  310        * distinguish these two cases.
  311        *
  312        * @see #put(Object, Object)
  313        */
  314       public V get(Object key) {
  315           if (key == null)
  316               return getForNullKey();
  317           int hash = hash(key.hashCode());
  318           for (Entry<K,V> e = table[indexFor(hash, table.length)];
  319                e != null;
  320                e = e.next) {
  321               Object k;
  322               if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
  323                   return e.value;
  324           }
  325           return null;
  326       } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T08:55:31.563

它`hashCode()`用于比较 - [http://www.docjar.com/html/api/java/util/HashMap.java.html](http://www.docjar.com/html/api/java/util/HashMap.java.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-13T17:59:16.623

Hashmap 使用 hashcode() 首先找到合适的桶，如果它在桶中找到多个条目，则使用 equals 方法。

如果您没有根据您的要求在您的类中定义 equals 方法，那么它将使用父类 Object 的定义，这是简单的“==”操作。

如果您使用您的类作为 hashmap 中的键，则最好覆盖 hashcode 和 equals 方法。

# azure - Azure 服务总线上的负队列大小

> ID：10277356
> 
> 赞同：2
> 
> 时间：2012-04-23T08:44:04.250
> 
> 标签：azure, message-queue, azure-storage

我在 Azure 服务队列上发现了一个特殊的堆栈大小

-0,000128746032714844 MB

当我从队列中删除一个项目时，大小会减小，当队列长度为零时，我希望它为零。但事实并非如此。我尝试了几次，队列大小不断减小。

注销并登录后，大小仍然为负。

大小怎么可能是负数？

更新：我刚刚注意到我有 -9,5367431640625E-06 MB 作为队列大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:56:41.613

不确定这是否正是问题所在。这是一个非常小的数字。所以它可能是由浮点/双精度引起的。你可以近似地说它是0。

此致，

明旭。

# ruby-on-rails - Facebook：oauth 回调后留在画布中

> ID：10277358
> 
> 赞同：3
> 
> 时间：2012-04-23T08:44:10.710
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, oauth, facebook-canvas

我正在使用 facebook 和 oauth 开发一个应用程序。该应用程序位于 facebook 画布内，身份验证在服务器端完成。该应用程序使用 Ruby on Rails 3.2 完成，使用 Koala 处理 api（以及 mongodb 作为后端，值得一提），并托管在 heroku 上。

因此，我将 heroku url 作为回调的 redirect_url 提供。这使得用户在身份验证后离开画布，我希望它留在里面。我阅读了一些关于此的主题，建议我在完成身份验证后使用 js 重定向到画布 url。我这样做了，但现在似乎我的会话令牌从未设置，并且用户每次尝试查看非公共页面时都会通过身份验证流程（这意味着他在欢迎页面上循环，具有“不可见”每次与facebook交换）。

我真的不明白我在这里做错了什么，所以欢迎任何帮助。如果您需要更多信息，请询问。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:24:46.867

所以我发现了我的问题：我的画布指向的页面是一个“公共”页面，并且没有处理任何与身份验证相关的内容，这意味着它没有解析`signed_request`，或其他任何内容。我最终为负责处理逻辑的画布设置了一个特殊的端点`signed_request`，现在它可以按预期工作了。

# hbase - HBase 行键和范围扫描

> ID：10277373
> 
> 赞同：3
> 
> 时间：2012-04-23T08:45:22.753
> 
> 标签：hbase

我有一个像 20110103 这样的行键模式——这样行键就会像 20110103-1-23-333。

例如，当我使用扫描进行范围查询时， startRow -> 20110103-1-23- endRow -> 20110105-1-23-

我也得到不在上述范围内的行。例如，我也得到了 20110105-1-15-6666 行。我也得到了与商店 15 相关的行。

我怎样才能解决这个问题 ？？将 RegularExpressionFilter 解决这个....

请就这个问题提出建议....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T12:24:37.033

您列出的三个行键中：

```
20110103-1-23-
20110105-1-15-666
20110105-1-23- 
```

对我来说，这看起来像是自然的排序顺序；以“666”结尾的那个确实确实在以“20110103”开头的那个之后。

（混淆的一点可能是，对于 HBase，这些都只是字节，并且字典排序一次完成一个字节；因此，“aaa”将在“aa”之后但在“ab”之前排序。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T16:19:54.630

您可以打开 hbase shell 发出以下命令

```
scan 'YourHbaseTableName',{FILTER=>"(RowFilter(=,'regexstring:20110103'))"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:36:56.350

**行 20110105-1-15-6666 正确地在 [20110103-1-23-, 20110105-1-23-) 范围内，因为 15 小于 23 并且行的排序是字典顺序的。**

您提到“我也正在获取与商店 15 相关的行”，这让我想象行键 ( `________-_-23-`) 中的第三个数字是该行的某种属性。

我建议更改此表的架构以使此“商店编号”成为一列，以便您的键看起来像`20110103-1`并且在“商店”列中您拥有这些数字`15`或`23`其他内容。

这样，在 Scan 中，您可以过滤掉 column store=15 的行。

如果您使用的是 Java API，这将类似于：

```
SingleColumnValueFilter filter = new SingleColumnValueFilter(
   Bytes.toBytes("columnfamily"),
   Bytes.toBytes("storenumber"),
   CompareFilter.CompareOp.NOT_EQUAL,
   Bytes.toBytes(15)
);
filter.setFilterIfMissing(true);
Scan scan = new Scan(
   Bytes.toBytes("20110103-1"),
   Bytes.toBytes("20110105-1")
);
scan.setFilter(filter); 
```

您可能在行键中存储了太多数据，请尝试在行键中获取其中一些属性并将它们设为列。另外请记住，您还可以使用日期（我想`20110105`是日期）作为时间戳（表格的单元格）而不是行键。这取决于您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-28T04:57:03.120

假设 HBase 是一个多重嵌套的有序字节映射。因此，您需要将时间戳保存在二进制表示中，以便在每个查询中获得正确的顺序。

我认为您将 rowkey-values 保存在字符串数据类型中，例如使用 java 方法：

```
yourDateString.getBytes(encoding) 
```

或者

```
Bytes.toBytes(yourDateString) 
```

由 HBase API 添加。

我的建议是将时间值保存为时间戳（长）。这个 long 应该被序列化为字节，然后保存在 rowkey 中。请注意，由于不断上升的性质，在行键中保存时间戳有点问题。时间戳每毫秒都会变大，因此每个新值都将保存到管理该区域的 HBase 区域。简单地说，您只需写入其中一台集群机器，这不是使用 HBase 集群的目标。对于大小为 100 个机器的集群，您可以使用盐渍（在 rowkey 前面放置一个随机数以将所有值分布在整个集群中）。查看[凤凰](https://github.com/forcedotcom/phoenix)项目。它透明地为您完成序列化、加盐等操作，提供简单的类似 SQL 的语句。

# c# - 在覆盖进度条上隐藏 appbar

> ID：10277376
> 
> 赞同：0
> 
> 时间：2012-04-23T08:45:47.480
> 
> 标签：c#, windows-phone-7

我正在使用 Windows phone 7 应用程序。现在，在此应用程序中的特定用户输入中，我显示来自 coding4fun Silverlight 工具包的覆盖进度条。

但是我显示覆盖进度条的那个页面上的应用程序栏仍然处于活动状态。

我想让它通用，当我调用覆盖时

进度条.show()

应隐藏应用栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:56:22.120

您可以在此处使用 Phone7Fx 库中​​的 BindableApplicationBar：-

[http://phone7.codeplex.com/](http://phone7.codeplex.com/)

然后，您可以使用 XAML 将 BindableApplicationBar 的 IsVisible 属性绑定到 ProgressOverlay 的 Visibility 属性，如下所示：-

```
<phone7fx:BindableApplicationBar x:Name="AppBar"
                                     BarOpacity="1"
                                     IsVisible="{Binding Path=Visibility, ElementName=MyProgressOverlay, Mode=TwoWay, Converter={StaticResource VisibilityToBooleanConverter}}" /> 
```

然后，如果您针对 ProgressOverlay 调用 Show 或 Hide 方法，则应用程序栏将相应地出现和消失。

请记住，您在最后一个 Grid 标记内而不是在最后一个 phone:PhoneApplicationPage 之前定义 Phone7.Fx BindableApplicationBar。

# java - Java 程序 - 单词统计

> ID：10277377
> 
> 赞同：0
> 
> 时间：2012-04-23T08:45:47.650
> 
> 标签：java, count, statistics, word, keyword

我创建了一个 Java 程序，它会根据关键字文本文件从各种社交媒体 API 返回搜索结果，并将返回的结果写入另一个文本文件。

我现在正在尝试创建另一个单独的类，该类将扫描搜索结果文本文件并返回有关在搜索结果中找到“关键字”的次数的统计信息。我基本上是在尝试对keywords.txt 文件进行搜索。

我一直试图让下面的代码工作，但我只能让它返回所有单词，而不仅仅是来自keywords.txt文件的那些。

我试图让输入 StreamReader 工作但无济于事。任何帮助将不胜感激。

* * *

```
package search;

import java.util.*; // Provides TreeMap, Iterator, Scanner
import java.io.*; // Provides FileReader, FileNotFoundException

public class SearchResults
{

    public static void main(String[] args) 
    { 
        TreeMap<String, Integer> frequencyData = new TreeMap<String, Integer>();
        readWordFile(frequencyData); 
        printAllCounts(frequencyData);
    }

    public static int getCount(String word, TreeMap<String, Integer> frequencyData)
    {
        if (frequencyData.containsKey(word))
        { // The word has occurred before, so get its count from the map
            return frequencyData.get(word); // Auto-unboxed
        }
        else
        { // No occurrences of this word
            return 0;
        }
    }

    public static void printAllCounts(TreeMap<String, Integer> frequencyData)
    {
        System.out.println("-----------------------------------------------");
        System.out.println(" Occurrences Word");

        for(String word : frequencyData.keySet())
        {
            System.out.printf("%15d %s\n", frequencyData.get(word), word);
        }

        System.out.println("-----------------------------------------------");
    } 

    public static void readWordFile(TreeMap<String, Integer> frequencyData)
    {
        Scanner wordFile;
        String word; // A word read from the file
        Integer count; // The number of occurrences of the word

        try
        {
            wordFile = new Scanner(new FileReader("SearchResults.txt"));
        }
        catch (FileNotFoundException e)
        {
            System.err.println(e);
            return;
        }

        while (wordFile.hasNext())
        {
            // Read the next word and get rid of the end-of-line marker if needed:
            word = wordFile.next();

            // Get the current count of this word, add one, and then store the new count:
            count = getCount(word, frequencyData) + 1;
            frequencyData.put(word, count);
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:25:36.533

在那里，我清理了您的代码并添加了按关键字.txt 中的所有关键字进行的过滤。

```
public static void main(String[] args) throws Exception {
  printAllCounts(
    readWordFile("SearchResults.txt", loadKeywords("keywords.txt")));
}

private static Map<String, Integer> readWordFile(
  String fname, Set<String> keywords) throws FileNotFoundException
{
  final Map<String, Integer> frequencyData = new TreeMap<String, Integer>();
  for (Scanner wordFile = new Scanner(new FileReader(fname)); 
    wordFile.hasNext();) 
  {
    final String word = wordFile.next();
    if (keywords.contains(word)) 
      frequencyData.put(word, getCount(word, frequencyData) + 1);
  }
  return frequencyData;
}

private static void printAllCounts(Map<String, Integer> frequencyData) {
  System.out.println("-----------------------------------------------");
  System.out.println(" Occurrences Word");
  for(Map.Entry<String, Integer> e : frequencyData.entrySet())
    System.out.printf("%15d %s\n", e.getValue(), e.getKey());
  System.out.println("-----------------------------------------------");
}

private static int getCount(String word, Map<String, Integer> frequencyData) {
    return frequencyData.containsKey(word)? frequencyData.get(word) : 0;
}

private static Set<String> loadKeywords(String fname) 
throws FileNotFoundException 
{
  final Set<String> result = new HashSet<String>();
  for (Scanner s = new Scanner(new FileReader(fname)); s.hasNext();) 
    result.add(s.next());
  return result;
} 
```

# xamdatagrid - XamDataGrid 中没有字段

> ID：10277383
> 
> 赞同：2
> 
> 时间：2012-04-23T08:46:34.953
> 
> 标签：xamdatagrid

再会！

我有数据源，它是 100% 填充的。我很确定，因为当 AutoGenerateFields 属性设置为 True 时，所有可用数据都会被接收并成功显示。但是，我真正需要实现的是只显示固定的字段集。如果我将 AutoGenerateFields 设置为 False，我会以相同的方式接收所有记录，但根本没有列。

这是我的 XAML 代码：

```
<igDP:XamDataGrid.FieldLayouts>
  <igDP:FieldLayout >
    <igDP:FieldLayout.Settings>
        <igDP:FieldLayoutSettings AutoArrangeCells="Never"/>
     </igDP:FieldLayout.Settings>
     <igDP:FieldLayout.Fields>
        <igDP:Field Name="Article" Label="Article" Row="0" Width="Auto"  IsScrollTipField="True" Column="0"/>
        <igDP:Field Name="Condition" Label="Condition" Row="0" Width="Auto" Column="1"/>
        <igDP:Field Name="Description" Label="Description" Row="0" Width="Auto" Column="2"/>
        <igDP:Field Name="Standartprice" Label="St. price" Row="0" Width="Auto" IsScrollTipField="True" Column="3"/>
        <igDP:Field Name="Listprice" Label="List price" Width="Auto" Row="0" Column="4" />
        <igDP:UnboundField Name="RowDetails" Row="1" Column="0" ColumnSpan="4">                 

     </igDP:FieldLayout.Fields>
   </igDP:FieldLayout>
 </igDP:XamDataGrid.FieldLayouts> 
```

我不明白我的 XAML 标记**的问题在哪里。**我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:50:29.200

您必须确保`Name`您提供的字段与绑定数据源的属性完全匹配。如果其中一个错误，则不会显示任何内容，请记住它也是区分大小写的。

应该`Standartprice`是`StandardPrice`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:55:21.570

DarkIce 的评论可能是正确的。为了帮助定位所涉及的特定字段，您还可以检查 Visual Studio 中的“输出”选项卡，其中将报告错误命名的绑定。

也就是说，当神秘的“空白网格”出现时，这并没有总能解决我的问题，但这是我首先看到的地方。

# c++ - C++：链表表示

> ID：10277385
> 
> 赞同：1
> 
> 时间：2012-04-23T08:46:39.700
> 
> 标签：c++, algorithm, data-structures, linked-list

**我**知道如何表示链表的方式基本上是创建一个Node**类**（最好是**struct**），然后创建实际的**linkedList**类。然而，昨天我正在寻找**反转单链表**操作的逻辑，我遇到的几乎 90% 的解决方案都包括该函数，返回数据类型**Node***。因此我很困惑，因为如果你想反转一个列表，不管你做了什么操作，它不会又是**linkedList**的类型吗？我做错了吗？

**我**一直在做的链表实现；

```
#include <iostream>
using namespace std;

struct Node
{
    int data;
    Node *next;
};

class linkedList
{
public:
    Node* firstPtr;
    Node* lastPtr;

    linkedList()
    {
        firstPtr=lastPtr=NULL;
    }
    void insert(int value)
    {
        Node* newNode=new Node;
        newNode->data=value;
        if(firstPtr==NULL)
            firstPtr=lastPtr=newNode;
        else {
            newNode->next=firstPtr;
            firstPtr=newNode;
        }
    }
    void print()
    {
        Node *temp=firstPtr;
        while(temp!=NULL)
        {
            cout<<temp->data<<" ";
            temp=temp->next;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:50:02.817

你的方法没有错，但你可能过分强调你的`linkedList`班级。

该类实际上包含什么？一个指向第一个节点的指针，一个指向最后一个节点的指针（这是冗余信息，因为您只需知道第一个节点就可以找到最后一个节点）。所以基本上`linkedList`只是一个没有额外信息的辅助类。

from 的成员函数`linkedList`可以很容易地移动到内部`Node`，或者将其作为自由函数，并将 a`Node`作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:49:12.443

那么，除了指向第一个节点的指针之外，什么是链表？如果您可以到达第一个节点，则列表是完全可访问的，而您所需要的只是指向第一个节点的指针。

除非您想存储有关列表的*额外*控制信息（例如其长度），否则列表本身不需要单独的数据类型。

现在一些实现（比如你的）也可以存储指向列表中最后一个节点的指针以提高效率，允许你在 O(1) 而不是 O(n) 中追加一个项目。但这是列表的一个*额外*功能，而不是一般列表的*要求*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:52:12.953

这些函数可能返回 Node* 类型，因为在反转链表后，它们将返回指向链表第一个节点的指针。

# python - Python mock 修补另一个函数调用的函数

> ID：10277397
> 
> 赞同：52
> 
> 时间：2012-04-23T08:47:35.063
> 
> 标签：python, unit-testing, testing, mocking, patch

```
def f1():
    return 10, True

def f2():
    num, stat = f1()
    return 2*num, stat 
```

如何使用 python 的模拟库来修补`f1()`并返回自定义结果以便我可以测试`f2()`？

**编辑：** 我的测试有问题吗？这似乎不起作用，所有测试都因 AssertionError 而失败

```
from foo.bar import f2
from mock import patch

class MyTest(TestCase):

    def test_f2_1(self):
        with patch('project.module.f1') as some_func:
            some_func.return_value = (20, False)
            num, stat = f2()
            self.assertEqual((num, stat), (40, False))

   @patch('project.module.f1')
   def test_f2_2(self, some_func):
       some_func.return_value = (20, False)
       num, stat = f2()
       self.assertEqual((num, stat), (40, False)) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-03-15T09:43:25.850

第一个示例表明 f1() 和 f2() 在同一模块中定义。因此，以下应该起作用：

```
from foo.bar import f2
from mock import patch

class MyTest(TestCase):

    @patch('foo.bar.f1')
    def test_f2_2(self, some_func):
        some_func.return_value = (20, False)
        num, stat = f2()
        self.assertEqual((num, stat), (40, False)) 
```

补丁与导入相同：`@patch('foo.bar.f1')`

这是关于这个问题的一个很好的答案：

[http://bhfsteve.blogspot.nl/2012/06/patching-tip-using-mocks-in-python-unit.html](http://bhfsteve.blogspot.nl/2012/06/patching-tip-using-mocks-in-python-unit.html)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-23T09:10:03.467

假设您正在使用这个[模拟](http://www.voidspace.org.uk/python/mock/index.html)库：

```
def f1():
    return 10, True

def f2():
    num, stat = f1()
    return 2*num, stat

import mock

print f2()   # Unchanged f1 -> prints (20, True)

with mock.patch('__main__.f1') as MockClass:       # replace f1 with MockClass 
    MockClass.return_value = (30, True)     # Change the return value

    print f2()     # f2 with changed f1 -> prints (60, True) 
```

如果您的代码分为模块，您可能需要替换`__main__.f1`为模块/函数的路径。

# c# - 打开 IE，导航到 URL 并在 C# 中获取源代码

> ID：10277399
> 
> 赞同：2
> 
> 时间：2012-04-23T08:47:37.387
> 
> 标签：c#, .net, internet-explorer

我需要用 URL 打开 Internet Explorer，然后用 C# 读取文档的源代码。

这可能吗？

我知道您可以启动进程，但我如何导航到 URL 并获取源代码？我必须通过 IE 打开它，因为我用来检索页面的协议仅适用于 IE。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:49:49.360

以下可以在不打开 IE 的情况下从 url 获取 html。

```
using(WebClient client = new WebClient()) {
    string html = client.DownloadString(address);
} 
```

要为特定 URL 打开 IE，您可以执行以下操作：

```
System.Diagnostics.Process.Start("iexplore", "http://example.com"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:52:55.613

根据您的要求，有不同的技术：

*   `Process.Start("iexplore.exe", "http://www.google.com");`运行 IE，然后[`WebCilent.DownloadString`](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)下载 HTML 源代码（发送到服务器的 2 个 HTTP 请求）
*   使用允许您将 IE 嵌入桌面应用程序的[WebBrowser控件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)它还允许您检索它导航到的网页的 HTML 源代码。

# combinations - 为给定的基数和位数生成所有可能的排列

> ID：10277401
> 
> 赞同：7
> 
> 时间：2012-04-23T08:47:47.910
> 
> 标签：combinations, loops

我敢肯定这很简单，但我很难做到这一点。本质上，如果我有一个包含 P 列和 V^P 行的数组，我该如何填写所有组合，也就是说，基本上，所有可能的数字都在 P 位的基数 V 中。例如，对于 P=3 和 V=2：

```
000
001
010
011
100
101
110
111 
```

请记住，这是一个二维数组，而不是整数数组。

对于 P = 4 和 V = 3。

```
0000
0001
0002
0010
0011
0012
.... 
```

生成这个数组后，我试图开发的其余工作就变得微不足道了。因此，非常感谢您提供一些有关如何执行此操作的代码/提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:38:40.173

以 P=3 和 V=2 为例，在第一列中，您需要以下数字序列：

```
0, 0, 0, 0, 1, 1, 1, 1 
```

所以你基本上想要四个 0，然后是四个 1。

在第二列中，您需要：

```
0, 0, 1, 1, 0, 0, 1, 1 
```

因此，您需要两个 0，然后是两个 1，然后再是相同的。

一般来说，在第n列中，每个数字都需要V^(Pn)，重复V^(n-1)次。

P=3 和 V=2 时的示例：

第 1 列：我们需要每个数字的 V^(Pn) = 2^(3-1) = 4，重复 V^(n-1) = 2^0 = 1 次：

```
[0, 0, 0, 0, 1, 1, 1, 1] 
```

第 2 列：我们需要每个数字的 V^(Pn) = 2^(3-2) = 2，重复 V^(n-1) = 2^1 = 2 次：

```
[0, 0, 1, 1], [0, 0, 1, 1] 
```

第 3 列：我们需要每个数字的 V^(Pn) = 2^(3-3) = 1，重复 V^(n-1) = 2^2 = 4 次：

```
[0, 1], [0, 1], [0, 1], [0, 1] 
```

生成此序列的一些 Python 代码：

```
def sequence(v, p, column):
    subsequence = []
    for i in range(v):
        subsequence += [i] * v**(p - column)
    return subsequence * v**(column - 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T16:18:39.847

基本上，这是从 0 到base中最大数字宽度的 v ^p数字列表。可用于在 Python 中执行此操作：`p``v`[`numpy.base_repr`](https://github.com/numpy/numpy/blob/v1.14.2/numpy/core/numeric.py#L2067-L2120)

```
from numpy import base_repr

def base_of_size(base, size):
    for i in range(base ** size):
        yield base_repr(i, base).rjust(size, "0") 
```

此外，[`itertools.product(range(v), repeat=p)`](https://docs.python.org/3/library/itertools.html#itertools.product)是另一个可以完成这项工作的 Python 内置函数（结果证明效率最高——参见下面的基准测试）。

这是从`numpy.base_repr`翻译到 C# 的算法（`Convert.ToString()`对基础非常有选择性）：

```
using System;
using System.Collections.Generic;

class Converter
{
    public static IEnumerable<string> BaseOfSize(int baseN, int size) 
    {
        for (int i = 0; i < Math.Pow(baseN, size); i++) 
        {
              yield return BaseRepr(i, baseN).PadLeft(size, '0');
        }
    }

    public static string BaseRepr(int n, int baseN)
    {
        string digits = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var res = new List<char>();

        for (int num = Math.Abs(n); num > 0; num /= baseN) 
        {
            res.Add(digits[num%baseN]);  
        }

        if (n < 0) res.Add('-');

        res.Reverse();
        return string.Join("", res);
    }

    public static void Main(string[] args) 
    {
        foreach (var n in BaseOfSize(2, 3)) 
        {
            Console.WriteLine(n);
        }

        Console.WriteLine();

        foreach (var n in BaseOfSize(3, 4)) 
        {
            Console.WriteLine(n);
        }
    }
} 
```

输出：

```
000
001
010
011
100
101
110
111

0000
0001
0002
0010
0011
0012
0020
 ...
2220
2221
2222 
```

虽然 numpy 版本使用简单且可迭代，但速度也很慢。使用递归 DFS 方法意味着我们不必从头开始计算每个数字，而是可以简单地增加前一个数字，直到我们到达新的叶子。这些版本不使用生成器，但很容易调整：

Python：

```
def base_of_size(base, size):
    def recurse(res, row, i=0):
        if i >= size:
            res.append(row[:])
        else:
            for j in range(base):
                row[i] = j
                recurse(res, row, i + 1)

        return res

    return recurse([], [None] * size) 
```

C＃：

```
using System;
using System.Collections.Generic;

class Converter
{
    public static List<List<int>> BaseOfSize(int v, int p) 
    {
        var res = new List<List<int>>();
        BaseOfSize(v, p, 0, new List<int>(new int[p]), res);
        return res;
    }

    private static void BaseOfSize(int v, int p, int i, List<int> row, List<List<int>> res)
    {
        if (i >= p) 
        {
            res.Add(new List<int>(row));
        }
        else 
        {
            for (int j = 0; j < v; j++) 
            { 
                row[i] = j;
                BaseOfSize(v, p, i + 1, row, res);
            }
        }
    }
} 
```

快速基准测试（使用生成器）：

```
from itertools import product
from time import time
from numpy import base_repr

def base_of_size(base, size):
    def recurse(res, row, i=0):
        if i >= size:
            yield row[:]
        else:
            for j in range(base):
                row[i] = j
                yield from recurse(res, row, i + 1)

        return res

    yield from recurse([], [None] * size)

def base_of_size2(base, size):
    for i in range(base ** size):
        yield base_repr(i, base).rjust(size, "0")

if __name__ == "__main__":
    start = time()
    list(base_of_size(10, 6))
    end = time()
    print("dfs:", end - start)
    start = time()
    list(base_of_size2(10, 6))
    end = time()
    print("base_repr:", end - start)
    start = time()
    list(product(range(10), repeat=6))
    end = time()
    print("product:", end - start) 
```

输出：

```
dfs: 4.616123676300049
base_repr: 9.795292377471924
product: 0.5925478935241699 
```

`itertools.product`以远射获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-12T06:37:04.110

如果每个“数字”中有不同数量的选项，则可以使用此代码。

也许在某些优化工具中存在执行此操作的算法，因为它可能对蛮力方法有用。下面的代码添加了一个显示“最大数字的值”的列，可以忽略它：

```
import numpy as np
val=np.arange(15)
options=[2,2,3]
print(val)
print(options)
opt = options + [1] # Assumes options to be a list
opt_cp = np.flip(np.cumprod(np.flip(np.array(opt))))
ret = np.floor_divide(val[:,np.newaxis], opt_cp[np.newaxis,:])
ret[:,1:] = np.remainder(ret[:,1:], np.array(opt[:-1])[np.newaxis,:])
inds = ret[:,1:]
print(inds) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-08T20:37:46.233

您还可以使用 numpy 的 N 维网格网格函数。

例如

```
np.mgrid[0:2,0:2,0:2].reshape((3, 8)).T

array([[0, 0, 0],
       [0, 0, 1],
       [0, 1, 0],
       [0, 1, 1],
       [1, 0, 0],
       [1, 0, 1],
       [1, 1, 0],
       [1, 1, 1]]) 
```

或者

```
np.stack(np.meshgrid(range(2), range(2), range(2), indexing='ij')).reshape(3, -1).T 
```

或者一般来说任何`P`, `V`:

```
np.mgrid[[slice(0, V)]*P].reshape((P, -1)).T 
```

或者

```
np.stack(np.meshgrid(*[range(V)]*P, indexing='ij')).reshape((P, -1)).T 
```

必须有一个更明显的方法，但我想不出什么。

# python - 如何在 qtableview 中编辑特定项目？

> ID：10277404
> 
> 赞同：1
> 
> 时间：2012-04-23T08:48:01.800
> 
> 标签：python, pyqt4, qtableview

有没有办法在给定行和列值的情况下编辑 qtableview 中的特定项目？例如，我想每秒增加它的值。这是我的表格模型。谢谢

```
class MyTableModel(QAbstractTableModel):

    def __init__(self, datain, headerdata, parent=None, *args): 
        """ datain: a list of lists
            headerdata: a list of strings
        """
        QAbstractTableModel.__init__(self, parent, *args) 
        self.arraydata = datain
        self.headerdata = headerdata

    def rowCount(self, parent):
        return len(self.arraydata) 

    def columnCount(self, parent):
        try:
            return len(self.arraydata[0]) 
        except:
            return 0
    def data(self, index, role): 
        if not index.isValid():
            return QVariant() 
        elif role != Qt.DisplayRole:
            return QVariant() 
        return QVariant(self.arraydata[index.row()][index.column()]) 

    def headerData(self, col, orientation, role):

        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
                return QVariant(self.headerdata[col])
        return QVariant()

    def sort(self, Ncol, order):
        """Sort table by given column number.
        """
        self.emit(SIGNAL("layoutAboutToBeChanged()"))
        self.arraydata = sorted(self.arraydata, key=operator.itemgetter(Ncol))        
        if order == Qt.DescendingOrder:
            self.arraydata.reverse()
        self.emit(SIGNAL("layoutChanged()")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:05:43.650

您可以直接在模型中增加值，并从模型中发出`dataChanged`信号。

例如，在模型类中添加这样的方法：

```
def incrementData(row, column):
    self.arraydata[row][column] += 1
    idx = self.index(row, column)
    self.emit(SIGNAL("dataChanged(QModelIndex,QModelIndex)"), idx, idx) 
```

# javascript - Spring：在服务器和客户端之间传递数据（Java对象到JS对象）

> ID：10277405
> 
> 赞同：0
> 
> 时间：2012-04-23T08:48:09.900
> 
> 标签：javascript, spring, extjs

我想在我的服务器（使用 Spring）和客户端（在 ExtJS 中）之间实现透明数据传递。

在服务器端，我有 Spring 控制器返回 ModelAndView 对象（使用 JSP）。我通常不创建模型对象，我只是将项目放入模型 Map 中。

我想要简单透明的 Java 到 Javascript 对象转换。在服务器端，我将一个 Java Date 对象放入地图中，然后在客户端获得一个 Javascript Date 对象。即在服务器上我写了这样的代码：

```
public ModelAndView getModelAndView(User user) {
    Map<String, Object> modelMap = new HashMap<String, Object>();
    modelMap.put("date", new Date());
    modelMap.put("intarray", new int[] {1,2,3});
    return new ModelAndView("mainpage", modelMap);
} 
```

在客户端我用 JSP 编写：

```
var model = <someMagicTagOrSomething /> 
```

在呈现的 HTML 中，我得到：

```
var model = {
     date: Date.parse('2012-01-01 12:12:12', 'Y-m-d H:m:s'), //JS Date object
     intarray: [1,2,3]
} 
```

我在 Spring 文档中看到的大部分内容都涉及使用 @NumberFormat(style=Style.PERCENT) 之类的注释在服务器上指定对象格式，然后使用 form:input 标签在客户端上获取它们。这不是我想要的，因为我想在客户端格式化日期，而不用担心它们以什么格式传输给客户端。

实现这一目标的最佳方法是什么？是否有开箱即用的解决方案，还是我需要自己写一些东西？我知道我可以使用像 Gson 这样的库将我的模型转换为 JSON，但这会将 Java 日期作为字符串返回，我想立即获取 Javascript 日期对象，而不必担心格式化。

感谢您的任何建议，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:05:21.533

您不会避免将日期序列化为某种格式。Javascript 不理解 java 对象，因此必须有一些序列化步骤（无论是 json、xml 还是其他）。

您最好的办法是将日期作为`ISO`字符串发送并`Date.parse(isostring)`在其上使用。那时您不需要指定格式字符串，因此您必须输入更少的内容，至少您可以使用大多数客户理解的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:02:25.687

```
<c:set var="myModelObject" value="${myObjectFromServer}"/>

 <script>
   var myJSvar = "${myModelObject}";
 </script> 
```

是的，你必须序列化/反序列化日期......我扩展了 PropertyEditor ：

```
public class LocalDateEditor extends PropertyEditorSupport{
    @Override
    public void setAsText(String text) throws IllegalArgumentException{
        setValue(DateTimeFormat.forPattern("dd MMM yyyy").print(text));
    } 
```

然后在你的控制器中注册（你也可以设置一个全局的，但我不记得如何）：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(LocalDate.class, new LocalDateEditor());
} 
```

对于它的价值，我使用了一个全局日期格式化程序，并在用户界面上使用了一个全局 jquery ui datepicker 类——实际上根本不需要太多编码。一切都是开箱即用的——在初始设置之后。我从不喜欢 iso 标准日期（可能是因为我是英国人 :-( ）

# excel - 我可以在excel的自动过滤器中将函数设置为标准吗？

> ID：10277410
> 
> 赞同：1
> 
> 时间：2012-04-23T08:48:42.943
> 
> 标签：excel, vba, vlookup, autofilter

我想要做的是，我想用`Autofilter`. 条件是`Vlookup`返回值`#N/A`与否。我需要独立处理这种语言。is的英文返回值和`Vlookup`is`#N/A`的德文返回值`Vlookup`，`#NV`所以我想使用这个函数`WorksheetFunction.IsNA(arg)`。

是否可以将此函数用作`Autofilter`excel 的标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:14:40.097

> > > > 条件是 Vlookup 返回值 #N/A

如果只是这样，`#N/A`那么 KyleNZ 给出的建议将起作用。但是如果你想捕获所有`Vlookup`可以返回的错误，那么使用这个

**Excel 2003**

```
=IF(ISERROR(arg),"",arg) 
```

**Excel 2007 起**

```
=IFERROR(arg,"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:03:17.977

我看不到在 Excel 2003 中执行此操作的明显方法。

您可能会尝试添加一个额外的列， ，其中`IsInvalid`的公式指向具有查找返回值的单元格。然后，您可以将其过滤为或（或德语等价物）。`=ISNA(<ref>)``<ref>``TRUE``FALSE`

# java - JLabel 或 JButton 如何告诉 JScrollPane 视图大小已更改？

> ID：10277412
> 
> 赞同：1
> 
> 时间：2012-04-23T08:49:03.613
> 
> 标签：java, swing, user-interface, layout, jscrollpane

a`JLabel`或`JButton`通知 a`JScrollPane`视图大小已更改（例如，当设置了图标时），以便确定是否需要显示滚动条？

我怎样才能实现类似的行为来显示一个简单的图像`JPanel`而不诉诸上述组件？

PS：我已经查看了源代码，到目前为止，我所看到的只是一个组件被称为“视图”并被传递给一个`JView`或`JViewport`注册一些侦听器。从那里开始，事情似乎还不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:13:08.190

如[`JScrollPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#JScrollPane%28java.awt.Component%29)API 中所述，除非您更改策略，否则“只要组件的内容大于视图，就会出现水平和垂直滚动条。” 一旦`pack()`确定了`Window`“适合其子组件的首选大小和布局”的大小，任何后续更改都会在容器被验证和重新绘制时被滚动窗格看到。有关更多信息，请参阅[*在 AWT 和 Swing*](http://www.oracle.com/technetwork/java/painting-140037.html)中绘制。

# iphone - 如何通过电子邮件发送 URL

> ID：10277413
> 
> 赞同：0
> 
> 时间：2012-04-23T08:49:07.270
> 
> 标签：iphone, url

如何从其中包含“&”的 iphone 应用程序发送电子邮件 URL。这是示例网址

```
http://www.google.co.in/search?hl=en&safe=active&q=facebook&oq=facebook&aq=f&aqi=&aql=&gs_l=mobile-gws-serp.3...0l0l0l1620716l0l0l0l0l0l0l0l0ll0l0.frgbld.&mvs=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:55:04.437

试试这个：在应用程序中的 MFMailComposure iN 电子邮件功能中

```
-(void)displayComposerSheet
{
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[picker setSubject:@"My URL!"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@"xyz@abc.com"];
NSString *emailBody = @"http://www.google.co.in/search?hl=en&safe=active&q=facebook&oq=facebook&aq=f&aqi=&aql=&gs_l=mobile-gws-serp.3...0l0l0l1620716l0l0l0l0l0l0l0l0ll0l0.frgbld.&mvs=0";
[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
[picker release];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
message.hidden = NO;

switch (result)
{
case MFMailComposeResultCancelled:
message.text = @" Message canceled";
break;
case MFMailComposeResultSaved:
message.text = @"Message saved";
break;
case MFMailComposeResultSent:
message.text = @"Message sent";
break;
case MFMailComposeResultFailed:
message.text = @"Message failed";
break;
default:
message.text = @"Message not sent";
break;
}
[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:59:32.320

```
 CFStringRef escaped = 
        CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                (CFStringRef)theURL,
                                                NULL,
                                                (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                kCFStringEncodingUTF8);

                    NSString* useit = (NSString*)escaped; 
```

不要忘记释放 CGStringRef

# php - 无法检查 $_POST 变量是否为空

> ID：10277415
> 
> 赞同：0
> 
> 时间：2012-04-23T08:49:16.317
> 
> 标签：php, post

我需要验证一个表单，因此我正在编写一个执行此操作的 php 类。我需要检查是否`$_POST`设置了变量以确定是否显示错误消息。所以我实现了两种似乎没有按预期工作的方法，因为即使我将表单留空，它也会像填写数据一样被处理，我就是不明白。

```
private function isSubmitted($field) {
    if (!array_key_exists($field, $_POST)) {
        return false;
    } else {
        return true;
    }
}

private function hasContent($field) {
    if (!empty($_POST[$field])) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:51:06.213

1.  即使字段为空，也会以`""`（空字符串）作为其内容提交。因此，`array_key_exists`将返回`true`。
2.  `if not empty return false`是你试图做的相反的逻辑。
3.  将您的布​​尔返回缩写为`return array_key_exists($field, $_POST);`应该被认为是更明智的，至少更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:51:33.273

```
private function hasContent($field) {
    if (!empty($_POST[$field])) {
        return true;
    } else {
        return false;
    }
} 
```

我认为你应该做一个小的改变。你还应该检查现有的数组是否有值或者它是否为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:00:56.703

我想你可以试试这样的

```
private function isSubmitted($field) {
    return isset($_POST[$field]);
}

private function hasContent($field) {
    return !empty($_POST[$field]);
} 
```

# linux - Linux 上的 PDF 查看器“Evince”无法正确显示某些数学符号

> ID：10277418
> 
> 赞同：16
> 
> 时间：2012-04-23T08:49:32.550
> 
> 标签：linux, pdf, fonts

我使用*Evince*在 Ubuntu Linux 10.04 上查看 PDF 文件。但有时程序无法正确显示数学符号。

一个例子。PDF 文件可从以下网址下载：

*   [http://jmlr.csail.mit.edu/papers/volume12/zhang11a/zhang11a.pdf](http://jmlr.csail.mit.edu/papers/volume12/zhang11a/zhang11a.pdf)

见等式（1）。

在 Windows 上，Acrobat Reader 可以正确显示等式： ![在此处输入图像描述](../Images/6e3ad30829fed1446416b2919b4299fc.png) 但在 Linux 上，`\sum`显示为实心点： ![在此处输入图像描述](../Images/83c4f0b13fd652b84560da0df9b8ed1b.png)

我已经安装了软件包：`ttf-symbol-replacement`, `libpoppler5`, `poppler-data`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-23T14:12:41.557

**您的 PDF 文件不适用于所有 PDF 查看器的原因是：**您*的“zhang11a.pdf”*没有嵌入所有字体。尤其缺少的是`symbol`字体，您可以从以下列表中看到：

```
kupfe@abc:~$ pdffonts zhang11a.pdf
名称 类型 emb 子 uni 对象 ID
------------------ --------- --- --- --- ---------
NXDEKT+CMSY10 类型 1C 是 是 是 11 0
Times-Italic Type 1 no no no 10 0
Times-Bold Type 1 no no no 9 0
Times-Roman Type 1 no no no 8 0
UYBJCW+MSBM10 Type 1C 是 是 否 29 0
QEAPRL+CMR10 类型 1C 是 是 否 23 0
OBCIBS+CMMI10 类型 1C 是 是 是 25 0
符号类型 1 no no no 33 0
OUPZTL+ZapfChancery-MediumItalic Type 1C 是 是 否 27 0
CFICWF+CMEX10 类型 1C 是 是 否 31 0
XRVDJC+CMMI7 类型 1C 是 是 否 56 0
JQSOYL+CMMI10 Type 1C 是 是 否 54 0
UWKDHL+CMBX10 类型 1C 是 是 否 58 0
AIYCES+CMMI5 类型 1C 是 是 否 60 0
SDIKLH+CMEX9 类型 1C 是 是 否 72 0
EKRXFC+CMSS10 类型 1C 是 是 否 84 0
快递类型 1 不 不 不 91 0
Helvetica 类型 1 否 否 否 97 0
UELPFP+CMMI10 类型 1C 是 是 否 135 0
VZIXBZ+CMR10 Type 1C 是 是 否 133 0

```

现在，如果 PDF 阅读器遇到未嵌入的字体，它会使用类似于以下的策略。它...

*   (1) ....搜索本地操作系统并尝试找到具有匹配类型和名称的字体，以便使用它来呈现文本；如果这不成功，它....
*   (2) ....搜索本地操作系统以找到具有匹配名称的字体（可能是其他字体类型）；如果不成功，它....
*   (3) ....搜索适当的替代字体（其字体度量接近原始字体的度量——原始字体的度量信息应该嵌入到 PDF 中，即使字体文件本身不是); 如果不成功，那么...
*   (4) ....用于`Courier`渲染文本。

我对问题根本原因的*假设是：*

> 您的字体中缺少 ∑ 字符的`ttf-symbol-replacement`字形，或者在该替换字体的字形表中的不同位置找到了该字形。

因此，无法正确渲染该文件并不是 Evince 的错。

另一方面，Acrobat Reader 确实附带了*Times*、*Courier*、*Helvetica*和*Symbol*的应用程序嵌入实例，因此它可以呈现此类 PDF。所以 AcroRead 对这个文件没有问题。（由于这些字体的许可证，Evince 不能使用这些技巧......）

**记住我的话：**
如果您想要*万无一失*的 PDF 文件，可以由所有类型的操作系统系统上的每个 PDF 阅读器正确呈现（和打印），请确保您的 PDF 嵌入了它使用的所有字体！

## 修复你的 zhang11a.pdf

但是，可以在 Ghostscript 的帮助下修复有问题的 PDF。我在 Ubuntu Oneiric 系统（使用 Ghostscript v9.02）上使用了这个命令来做到这一点：

```
/usr/bin/gs \
  -o gs-repaired---zhang11a.pdf \
  -dPDFSETTINGS=/prepress \
  -sDEVICE=pdfwrite \
   zhang11a.pdf 
```

CLI 参数的`-dPDFSETTINGS=/prepress`一部分告诉 Ghostscript 嵌入所有非嵌入字体。

这就是修复后的 PDF 的嵌入属性现在的样子：

```
kupfe@abc:~$ pdffonts gs-repaired---zhang11a.pdf
名称 类型 emb 子 uni 对象 ID
------------------ --------- --- --- --- ---------
AFNVKD+Times-Italic Type 1C 是 是 否 12 0   
PEQXED+CMSY10 类型 1C 是 是 是 14 0   
FYXQNZ+Times-Roman Type 1C 是 是 否 8 0    
XILTND+Times-Bold Type 1C 是 是 否 10 0   
HZJMVE+符号类型 1C 是 是 否 36 0   
EGYAWT+CMR10 类型 1C 是 是 否 26 0   
AQGZYJ+CMMI10 Type 1C 是 是 是 28 0   
YJATHO+ZapfChancery-MediumItalic Type 1C 是 是 否 30 0   
CZXDRN+MSBM10 Type 1C 是 是 否 32 0   
KTZJPT+CMEX10 类型 1C 是 是 否 34 0   
NYTDMD+CMMI10 类型 1C 是 是 否 58 0   
DFQTPB+CMMI7 类型 1C 是 是 否 60 0   
GXJYGS+CMBX10 Type 1C 是 是 否 62 0   
QAMUEV+CMMI5 类型 1C 是 是 否 64 0   
QEWIFQ+CMEX9 类型 1C 是 是 否 76 0   
KNOSJH+CMSS10 类型 1C 是 是 否 88 0   
UCHHLK+Courier Type 1C 是 是 否 95 0   
TWNVND+Helvetica Type 1C 是 是 否 102 0  
ZDIWNO+CMR10 类型 1C 是 是 否 139 0  
IGJFUT+CMMI10 类型 1C 是 是 否 141 0  

```

我检查了 Evince 如何渲染修复的 PDF：现在可以了。

* * *

**更新：**

Martin Schröder 的说法是正确的——根据 ISO PDF 标准——“ *Base 14* ”PDF 字体（即 4 种“标准”、“斜体”、“粗体”和“粗斜体”变体）都不是对于 Helvetica、Times 和 Courier 以及 Symbol 和 Dingbats）需要嵌入，并且所有 PDF 查看器都应该提供自己的方法来呈现这些字体中的所有字形，即使它们没有嵌入文件中。

In reality, following this recommendation did lead to many problems in real life (such as one case is on display in this very question): because not all viewers, renderers and automatic PDF processors do reliably render the glyphs for un-embedded fonts. And that's the reason why all current ISO standards for PDF/A (archiving) and PDF/X (blind eXchange) **require** to embed **all** fonts (even the '*Base 14*' ones) in PDF files. Otherwise that file is not deemed compliant with the respective standard.

And as my Ghostscript command's result shows: embedding the Symbol font does reliably avoid the ∑ glyph rendering problem for Evince. Even if you consider it an Evince bug (which you rightly can) that it doesn't correctly render the original PDF...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-23T14:06:07.157

看起来像是 Ubuntu 10.4 中（现在已经两年了）evince 中的一个错误。更新您的 Ubuntu 或向 Ubuntu 提交错误。

# html - 谷歌翻译检测选择，因此可以交换图像

> ID：10277420
> 
> 赞同：2
> 
> 时间：2012-04-23T08:49:46.203
> 
> 标签：html, image, google-translate

我在我的网站上运行了谷歌翻译，效果很好。它在顶部有一个小下拉菜单，它可以正确翻译整个网页。剩下的一件事是图像，绝对谷歌翻译不能做到这一点。

我想做的是检测谷歌翻译选择，然后将图像换出或重定向到正确的图像，例如：

```
<img src="logo.png">
<img src="logo_fr.png">
<img src="logo.se.png">
<img src="logo.it.png">
etc.... 
```

如果可以找出谷歌翻译下拉框选择？另外，在加载时将img src“切换”为正确语言的最佳方法是什么？也许是一个 div 之后填充了 img 数据？

# android - 如何覆盖小部件删除功能？

> ID：10277425
> 
> 赞同：0
> 
> 时间：2012-04-23T08:49:51.653
> 
> 标签：android, android-widget

如何将我自己的功能添加到负责删除小部件的方法中（当我将它拖放到回收图标上时）。我需要能够添加一些额外的实现。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:58:57.307

我还没有尝试过，但你可以使用这个......

```
@Override
public void onDeleted(Context context, int[] appWidgetIds) {
        //You code here
    super.onDeleted(context, appWidgetIds);
} 
```

# javascript - Jqtransform 针对特定的表单对象（不是全部）

> ID：10277426
> 
> 赞同：0
> 
> 时间：2012-04-23T08:50:02.567
> 
> 标签：javascript, jquery, jqtransform

我正在使用 jqtransform：

这项工作：

```
<script type="text/javascript">
    $(function() {
        //find all form with class jqtransform and apply the plugin
        $("form.jqtransform").jqTransform();
    });
</script> 
```

但这将使用 jqtransform 类转换表单内的所有对象。

我需要转换特定的对象，所以我正在尝试：

```
<script type="text/javascript">
    $(function() {
        //find all form with class jqtransform and apply the plugin
        $("select.jqtransform").jqTransform();
    });
</script> 
```

...使用 jqtransform 类转换选择，但这没有做任何事情。

这完全可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:48:16.503

这取决于您的标记的外观。我猜这个插件正在寻找一个表单元素，而不仅仅是 jqtransform 类的任何元素。无论如何，试试这个：

```
<script type="text/javascript">
$(function() {
    //find all form with class jqtransform and apply the plugin
    $('form.jqtransform').find('select').jqTransform();
}); 
```

我可能误解了这个问题。也许您正在寻找的答案在这里： http: [//www.code-pal.com/the-select-problem-after-using-jqtransform-and-its-solution/](http://www.code-pal.com/the-select-problem-after-using-jqtransform-and-its-solution/)

# java - Java中的图形

> ID：10277428
> 
> 赞同：1
> 
> 时间：2012-04-23T08:50:08.330
> 
> 标签：java

正如我的老师告诉我的那样，我只为一个项目将我的编程从 C# 转移到了 Java。我只是想问什么是等效的：

```
this.Refresh(); 
```

在 Java 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:55:50.853

您假设 Java 应用程序自动等同于 Windows 窗体，它为您提供了一个可以刷新以“重新绘制”的窗体。在 Java 中，事情更复杂，您可能应该先阅读以下内容： [如何创建简单的 Java GUI](http://markalexanderbain.suite101.com/how-to-create-a-simple-java-gui-a92244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:56:25.547

称呼

```
yourFrame.invalidate();
yourframe.validate(); 
```

[在此处](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#invalidate%28%29)查看有关`invalidate()`和的更多信息。`validate()`

根据文档：*validate**方法**用于使容器再次布置其子组件。在容器显示后修改此容器的子组件（添加到容器或从容器中删除，或更改布局相关信息）时，应调用它。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:58:31.920

```
 yourFrame.invalidate();
    //make changes here...
    yourFrame.validate();
    yourFrame.repaint(); 
```

有关您认为需要的更多内容，请参阅 JFrame 文档。

# javascript - 单击按钮调用它时找不到Javascript函数

> ID：10277431
> 
> 赞同：1
> 
> 时间：2012-04-23T08:50:15.360
> 
> 标签：javascript, asp.net

我已经定义了我的 OpenWin() 函数来处理打开新窗口并将参数传递给它，但是当我编译它时它说它没有定义。

```
>     <script type="text/javascript">
>         function OpenWin()
>             {
>                 var
> 
>                     Parms = document.getElementById('PassParmString').value;
> 
> 
>                 window.open("ViewerPane.aspx?prm=" + Parms,"_blank","left=20,top=20,width=1000,height=1140,toolbar=0,resizable=1")
>             }
>     </script> 
```

再往下是按钮脚本......

```
>             <asp:Button ID="btnAuthenticate" OnClick="OpenWin()" runat="server" Height="44px" Style="z-index: 108;
>                 left: 716px; position: absolute; top: 243px" Text="Authenticate" Width="97px" /> 
```

信息：...

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：BC30456：“OpenWin”不是“ASP.default_aspx”的成员。
> 
> 源错误：
> 
> 第 38 行：顶部：243px" Text="UserName :"> 第 40 行：
> 第 42 行：
> 
> 源文件：C:\projects\Centauri_0.01\ASPXRPT\Default.aspx 行：40

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:54:38.927

`OnClick`指服务器端事件。将其更改为`OnClientClick`用于 javascript 函数。

有关更多信息，您应该阅读[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)

**编辑：**就打开窗口而言，尝试更改`_blank`如下`''`：

```
window.open("ViewerPane.aspx?prm=" + Parms,"","left=20,top=20,width=1000,height=1140,toolbar=0,resizable=1") 
```

# oracle - BULK COLLECT 和 dbms_sql 的使用

> ID：10277433
> 
> 赞同：0
> 
> 时间：2012-04-23T08:50:23.010
> 
> 标签：oracle, oracle11g

我正在阅读有关 BULK COLLECT 和 dbms_sql 用法的更多信息，并尝试将其应用于我的一个过程在我的存储过程中，核心逻辑是将另一个表的值插入到表中

```
CREATE OR replace PROCEDURE My_procedure (pi_date       IN DATE,
                                          po_error      OUT VARCHAR2,
                                          po_error_desc OUT nocopy VARCHAR2)
AS
  curr_date DATE;
BEGIN
    CURR_DATE := PI_DATE;

    INSERT INTO t1
                (col1,
                 col2,
                 col3,
                 col4,
                 col5)
    SELECT t2.col1,
           t2.col2,
           t2.col3,
           t2.col4,
           CURR_DATE
EXCEPTION
  WHEN OTHERS THEN
             PO_ERROR := -1;

             PO_ERROR_DESC := 'proc nam : '
                              || 'my_procedure'
                              || ', err_num :'
                              || SQLCODE
                              || ' | , err_msg :'
                              || SQLERRM;

             ROLLBACK;

             DBMS_SESSION.free_unused_user_memory;
END; 
```

但是，由于要插入另一个表的数据很大，所以在我的第二个修改过程中

我使用了 BULK COLLECT 和 dbms_sql 如下

```
CREATE OR replace PROCEDURE My_procedure (pi_date       DATE,
                                          po_error      OUT VARCHAR2,
                                          po_error_desc OUT nocopy VARCHAR2)
AS
  v_curr_date DATE;
  l_col1                       dbms_sql.Varchar2_Table;
  l_col2                       dbms_sql.Varchar2_Table;
  l_col3                       dbms_sql.Number_Table;
  l_col4                       dbms_sql.Number_Table;

  CURSOR c1 IS
    SELECT *
    FROM   t2;

BEGIN
    V_CURR_DATE := PI_DATE;

    PO_ERROR := 0;

    OPEN c1;

    LOOP
        FETCH c1 bulk collect INTO l_col1, l_col2, l_col3, l_col4 limit 1000;

        forall indx IN 1..l_col1.COUNT
          INSERT INTO t2
                      (col1,
                       col2,
                       col3,
                       col4,
                       col5)
          VALUES      (L_col1(indx),
                       L_col2(indx),
                       L_col3(indx),
                       L_col4(indx),
                       V_CURR_DATE);

EXCEPTION
  WHEN OTHERS THEN
             PO_ERROR := -1;

             PO_ERROR_DESC := 'proc nam : '
                              || 'my_procedure'
                              || ', err_num :'
                              || SQLCODE
                              || ' | , err_msg :'
                              || SQLERRM;

             ROLLBACK;

             DBMS_SESSION.free_unused_user_memory;
END; 
```

所以这是我的第二个例子，但是我按照文档使用了 BULK collect

有人可以指出确切的用法`dbms_sql.Varchar2_Table`吗？

如上所示，如果 col1 的实际长度是 VARCHAR2(40) 但`dbms_sql.Varchar2_Table`使用`VARCHAR2(2000)`

```
TYPE varchar2_table IS TABLE OF VARCHAR2(2000) INDEX BY BINARY_INTEGER; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:21:35.637

当您使用`LIMIT`子句时，您的批量收集循环需要是一个完整的循环：

```
-- Open the cursor
OPEN cursor_name;
-- Loop through cursor records
LOOP

   -- Fetch the cursor results into a collection limited to a set figure
   FETCH cursor_name BULK COLLECT INTO table
   LIMIT 1000;

   -- For every record in the collection
   FORALL x IN INDICES OF table
      INSERT INTO target_table
      (col)
      VALUES
      table(x);

   -- Set up the limit loop exit criteria
   EXIT WHEN table.COUNT < 1000; -- Less that the limit you set    
-- End the loop
END LOOP;
-- Close the cursor
CLOSE cursor_name; 
```

这个伪代码片段应该让您开始正确的道路，让您的批量代码工作。您当前的`DBMS_SQL`表格声明看起来不错。

希望能帮助到你...

# html - Firefox 只加载我网站的部分 CSS

> ID：10277436
> 
> 赞同：1
> 
> 时间：2012-04-23T08:50:42.130
> 
> 标签：html, css, firefox, google-chrome

我正在开发一个网站，我一直在 Chrome、IE 和我的 Android 手机上工作。我决定在 Firefox 中测试该站点，然后整个事情就崩溃了。在我看来，好像所有的 CSS 都没有加载，但对于我的生活，我无法弄清楚为什么它不会加载。

直播网站： http: [//matttucker.onedogdevelopment.com/](http://matttucker.onedogdevelopment.com/)

在我的源代码中，我有如下内容......

```
<style type="text/css" media="all">@import url(....); @import url(....); </style>
<style type="text/css" media="all">@import url(....); @import url(....); </style>
<style type="text/css" media="all">@import url(....); @import url(....); </style> 
```

我相信只有第一个样式元素中列出的 CSS 文件被加载。

**更新：** Drupal 还允许我聚合 css 并输出如下内容...

```
<link type="text/css" rel="stylesheet" href="..." media="all" />
<link type="text/css" rel="stylesheet" href="..." media="all" />
<link type="text/css" rel="stylesheet" href="..." media="all" /> 
```

即使在聚合时，也只会显示第一个样式表正在加载。我不知道为什么会这样，特别是因为它已经在其他浏览器上工作了。

任何建议，指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:55:11.073

看着 Firefox 中报告的 CSS 错误，我突然想到了这个：

```
Error in parsing value for 'src'.  Skipped to next declaration. 
```

其次是

```
Unexpected end of file while searching for closing } of declaration block.
Unexpected end of file while searching for '}'. 
```

相关的 CSS 看起来像这样：

```
src: local("Meta Serif Book"),
     url(/sites/default/themes/one_dog_development_starter/css/metaserif_book.otf) format("opentype"),
} 
```

注意尾随的“，”。在我看来，这最终吃掉了样式表的其余部分，这看起来像是 Firefox 中 CSS 错误处理中的一个错误；我提交了[https://bugzilla.mozilla.org/show_bug.cgi?id=748254](https://bugzilla.mozilla.org/show_bug.cgi?id=748254)来跟踪它。但是修复 CSS 以使其不存在该问题可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:54:29.893

`@import`尝试使用元素的`href`属性，而不是 using ：`style`

```
<link type="text/css" media="all" href="URL HERE" /> 
```

此外，由于您的 CSS 存储在同一个域中，因此您无需指定域名。尝试这样的结构：

```
<link type="text/css" media="all" href="/sites/default/modules/normalize/normalize.css?m2x9bk" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:56:31.267

你为什么不用这个？

```
<link rel="stylesheet" type="text/css" href="your.css"> 
```

# c++ - OpenCV 加载/保存直方图数据

> ID：10277439
> 
> 赞同：4
> 
> 时间：2012-04-23T08:50:49.350
> 
> 标签：c++, image, opencv, histogram

有什么方法可以将 OpenCv 图像直方图存储到磁盘上，这样就可以直接加载它，而无需再次加载图像并从中计算直方图？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T09:46:06.593

假设您正在处理单通道（灰度）图像，直方图可以由单通道行矩阵表示，其长度等于直方图中的 bin 数量。然后，您可以轻松地从文本文件加载/保存直方图。如果你想使用 c++ opencv api，还提供了文件存储结构。读[这个](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html?highlight=filestorage#)。

这是一个简单的例子：

```
// save file
cv::Mat my_histogram;
cv::FileStorage fs("my_histogram_file.yml", cv::FileStorage::WRITE);
if (!fs.isOpened()) {std::cout << "unable to open file storage!" << std::endl; return;}
fs << "my_histogram" << my_histogram;
fs.release();

// load file
cv::Mat my_histogram;
cv::FileStorage fs("my_histogram_file.yml", cv::FileStorage::READ);
if (!fs.isOpened()) {std::cout << "unable to open file storage!" << std::endl; return;}
fs >> "my_histogram" >> my_histogram;
fs.release(); 
```

# browser - 使用浏览器获取客户端的 MAC 地址

> ID：10277440
> 
> 赞同：11
> 
> 时间：2012-04-23T08:50:52.647
> 
> 标签：browser, client, mac-address

我有以下问题：我有一个网络服务器。该网络服务器位于路由器后面。问题是，我需要一个客户端的 MAC 地址，以便在服务器上打开一个网站以供进一步使用。我已经尝试通过 ActiveX-Object 获取 MAC 地址，但客户端需要安装 WMI。这是实际的代码：

```
<!DOCTYPE  HTML  PUBLIC  "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
        <title></title>
        <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
        <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
        <script id="clientEventHandlersJS" language="javascript">

function Button1_onclick() {
  var locator = new ActiveXObject("WbemScripting.SWbemLocator");
  var service = locator.ConnectServer(".");
  var properties = service.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration");
  var e = new Enumerator (properties);
  document.write("<table border=1>");
  dispHeading();
  for (;!e.atEnd();e.moveNext ())
  {
        var p = e.item ();
        document.write("<tr>");
        document.write("<td>" + p.Caption + "</td>");
        document.write("<td>" + p.IPFilterSecurityEnabled + "</td>");
        document.write("<td>" + p.IPPortSecurityEnabled + "</td>");
        document.write("<td>" + p.IPXAddress + "</td>");
        document.write("<td>" + p.IPXEnabled + "</td>");
        document.write("<td>" + p.IPXNetworkNumber + "</td>");
        document.write("<td>" + p.MACAddress + "</td>");
        document.write("<td>" + p.WINSPrimaryServer + "</td>");
        document.write("<td>" + p.WINSSecondaryServer + "</td>");
        document.write("</tr>");
  }
  document.write("</table>");
}

function dispHeading()
{
    document.write("<thead>");
    document.write("<td>Caption</td>");
    document.write("<td>IPFilterSecurityEnabled</td>");
    document.write("<td>IPPortSecurityEnabled</td>");
    document.write("<td>IPXAddress</td>");
    document.write("<td>IPXEnabled</td>");
    document.write("<td>IPXNetworkNumber</td>");
    document.write("<td>MACAddress</td>");
    document.write("<td>WINSPrimaryServer</td>");
    document.write("<td>WINSSecondaryServer</td>");
    document.write("</thead>");
}

        </script>
  </head>
  <body>

        <INPUT id="Button1" type="button" value="Button" name="Button1" language="javascript" onclick="return Button1_onclick()">
  </body> 
```

当您单击该按钮时，它应该返回一个包含网络配置的表格，但这对我不起作用。我想知道，是否有另一种解决方案可以通过浏览器获取客户端的 MAC 地址。我也不想限制在 Internet Explorer 上的使用。在此先感谢您的帮助。

问候，克里斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T09:08:07.190

看来您可以使用 Java 小程序执行此操作，请参阅[https://forums.oracle.com/forums/thread.jspa?threadID=1144276](https://forums.oracle.com/forums/thread.jspa?threadID=1144276)和[http://techdetails.agwego.com/2008/02/11上的帖子/37/](http://techdetails.agwego.com/2008/02/11/37/)。

不确定您是否需要用户为此同意安全警告，我没有尝试过。

可能没有更好的方法，因为 ActiveX 只能在 Windows（和 IE）上工作，并且没有这样的 API 可以在任何标准 HTML 或 JavaScript 中获取 MAC 地址。我不知道 Flash 是否对此有用，但我对此表示怀疑。

但是，您获取用户 MAC 地址的理由似乎是有效的，但我仍然认为推断它的任何信息都不是一个好主意，因为它可能被欺骗/更改，并且在某些情况下可能无法正确显示。如果你能为你的问题想出一个更好的解决方案（不涉及抓取 MAC 地址），你会做得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-17T13:20:17.490

在我之前的项目中。我们在浏览器 javascript 中使用 websocket 与在同一台机器上运行的本地代码 C# dll 进行通信。本机代码可以检索任何系统信息、MAC 地址和其他系统信息，如内存、磁盘空间等。Node.js 也可以用来代替 C#，只是为了打破 windows 机器的限制，进入 MAC 机器。整个应用程序（chrome 浏览器 + 本机代码）已使用 install shield 下载到客户端。

# c# - 如何获得 Windows 8 Live ID

> ID：10277455
> 
> 赞同：9
> 
> 时间：2012-04-23T08:51:38.820
> 
> 标签：c#, .net, windows-8, liveid

Windows 8 使用 Live ID 作为用户名。如何在 C# 中获取此 LiveID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T22:00:07.860

Metro apps by design have restricted access to many information they shouldn't really need, and I think this might be one of them.

WinRT gives access to `Windows.System.UserProfile.UserInformation` class (as CodeCaster suggested), but as I checked, from all the methods there only `GetDisplayNameAsync()` might return live id (email) and it's only if the first/last name are not set on the account.

(Also, most of the methods in this class require setting *Enterprise Authentication* capability, which is [not really welcome in the Store](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx). And [the documentation of the class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation) is currently poor.)

For [single-sign-on experience](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465097.aspx), you might rather use Live Software Development Kit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:18:05.877

Perhaps [Windows.System.UserProfile.UserInformation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation) contain some relevant data.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:03:07.080

看看下面的帖子：

[http://www.silverlightshow.net/items/Using-the-Live-SDK-in-Windows-8-XAML-C-Metro-Applications.aspx](http://www.silverlightshow.net/items/Using-the-Live-SDK-in-Windows-8-XAML-C-Metro-Applications.aspx)

也关于以前的问题：

[通过 Windows Live ID 登录桌面应用程序](https://stackoverflow.com/questions/7539593/log-in-to-desktop-application-by-windows-live-id)

[通过 HttpRequest 登录 Windows Live ID](https://stackoverflow.com/questions/4814594/windows-live-id-login-via-httprequest)

# c++ - 有哪些选项可用于处理具有持续计算的基于浏览器的游戏的后端？

> ID：10277458
> 
> 赞同：0
> 
> 时间：2012-04-23T08:51:58.773
> 
> 标签：c++, backend

我正在进入基于浏览器的游戏世界，而我只是将我的第一个游戏置于测试阶段。事情是它是一个回合制游戏，使用 PHP 脚本后端很容易做到这一点，但正如我所期待的那样，我对开发更实时的游戏的选择感到有点不知所措。

我不愿意在公共网站上给出我下一个项目的确切细节，所以我将尝试用更模糊的术语来描述我在这里寻找的东西。基本上我需要的是某种方法来处理来自用户的传入数据，同时还进行可能每秒发生多次的后台计算。在这种情况下，设置 PHP 脚本似乎很愚蠢，其中脚本不断被调用，并且数据库发生了许多写入；相反，在服务器上运行诸如 C++ 程序之类的东西似乎更有意义，处理请求并将值存储在本地内存中（直到用户注销，无论如何）。

看起来我很清楚自己想要什么，但问题是我不知道在服务器后端方面我在做什么。我知道如何使 Javascript 与 PHP 脚本交互，这就是我的知识范围。C++ 程序是解决这个问题的最佳方式吗？如果是这样，我需要什么才能开始？（我知道一些基本的 C++，但我不确定如何才能从接受请求的服务器上运行程序）。我想在这种情况下我能得到的最理想的事情是指导我如何进行简单的交互，其中 javascript 向服务器上的程序发送请求，然后对接收到的数据执行某些操作。一旦我有地方开始，我通常很擅长弄清楚事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:33:04.687

我的建议：如果您正在寻找真正创建实时游戏，而不仅仅是寻找一个学习 C++ 的项目（这是一个同样有价值但非常不同的目标），请坚持使用 PHP，直到您真正遇到问题你解决不了。如果您仔细架构，您将能够根据需要替换系统中需要调整的那些部分。

您确定为后端要求的两个特征：

1.  您希望远离数据库的高度交互的会话状态
2.  后台进程（即那些不是通过 HTTP 由播放器事件触发的进程

在这些要求中，我没有看到任何将 PHP 排除在游戏业务逻辑之外的东西。

对于 1) 考虑诸如[redis](http://redis.io/)之类的东西（通过[Predis](https://github.com/nrk/predis)，一个流行的 PHP 客户端）。这是您的高性能内存数据存储。

对于 2)，您可以编写一个完全独立的 PHP 程序，该程序可以像任何其他客户端一样与主服务器通信。如果您使用 redis，它可能会直接与它对话。记住：没有什么说 PHP 必须处理网页请求。

最后，在研究这个时出现了另一个链接 - 它很旧，但代码仍然可用并且可能真的很有启发性：[phpsocketdaemon](http://phpsocketdaemon.googlecode.com/files/phpsocketdaemon-1.0.tar.gz)是一个“用于在 PHP 中编写可以处理大量客户端和服务器连接的守护程序的库”。

# facebook-graph-api - 合并来自两个评论插件的评论

> ID：10277462
> 
> 赞同：2
> 
> 时间：2012-04-23T08:52:27.877
> 
> 标签：facebook-graph-api, plugins, facebook-comments

似乎我们的应用程序中有页面随着时间的推移一直在为 Facebook 评论插件使用两个不同的 href 值（这不是故意的，是由于配置错误造成的），我们留下了缺少的评论（评论在插件是使用较旧的 HREF 启动的）。

我们不能回到旧的 href，因为人们也一直在评论新的 HREF。

鉴于此背景，我正在寻找一种通过以下方法之一为评论插件合并两个 HREF 的方法：

*   是否从旧的 href 导出服务器端，然后将其重新导入新的 href？
*   也许是一种使用两个 href 参数启动 FB 评论插件的方法，以便它在最后自动合并它？

我知道我可以通过 Graph API 获取旧评论，但我也希望将其重新插入到当前插件中，以便对话完成。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:05:35.253

AFAIK 这不可能以可靠的方式......

从理论上讲，可以将旧评论重新提交到 Graph API，将它们与其他/新 URL 关联起来，但有一些阻碍：

1.  `BUG #216005175135629`：[无法通过图形调用向社交插件发表评论](http://developers.facebook.com/bugs/216005175135629)。
2.  提交时无法指定评论的时间，因此所有迁移的评论都将使用当前时间（而不是原始提交时间）
3.  对于要迁移的每个人的评论，您都需要身份 ( `access_token`)，没有该评论将由拥有活动的用户拥有`access_token`

# jenkins - 如何忽略 Jenkins 中的特定插件版本？

> ID：10277464
> 
> 赞同：0
> 
> 时间：2012-04-23T08:52:30.150
> 
> 标签：jenkins, jenkins-plugins

有时，某个特定版本的 Jenkins 插件由于错误而根本无法工作，或者在我们使用它的上下文中无法工作。

我不想意外升级到这样的 Jenkins 插件版本。

有什么地方我可以指定“不要使用这些特定的插件版本”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:57:52.990

不。

但是，对于 Jenkins 1.x，您可以查看[pinned plugins](https://wiki.jenkins-ci.org/display/JENKINS/Pinned+Plugins)，这可能更容易防止意外覆盖现有插件。此功能已在 Jenkins 2 中删除。

# android - 列表视图内的可点击链接

> ID：10277474
> 
> 赞同：4
> 
> 时间：2012-04-23T08:53:21.367
> 
> 标签：android, android-listview, android-activity, textview

列表视图可点击链接问题。

我在 getView() 中使用以下代码在列表视图中生成可点击的链接。

```
myTextView.setMovementMethod(LinkMovementMethod.getInstance());
String linkText = "<a href=\"http://www.google.com\">Google</a>";
myTextView.setText(Html.fromHtml(linkText)); 
```

此代码适用于不在列表视图中的文本视图，但是当我将它用于列表视图中的文本视图时，单击链接会引发以下异常。

```
AndroidRuntimeException: Calling startActivity() from outside of an Activity
context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T05:21:29.287

[在这里](https://stackoverflow.com/questions/2993112/android-linkify-problem/)得到了答案。我只需要更改构造函数调用

```
CustomAdapter mAdapter = new CustomAdapter( mContext, itemList); 
```

到

```
CustomAdapter mAdapter = new CustomAdapter( this, itemList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:17:58.797

```
 TextView textView2 = (TextView)findViewById( R.id.TextView2 );
   SpannableStringBuilder ssb = new SpannableStringBuilder( http://google.com" );
   textView2.setText( ssb, BufferType.SPANNABLE );
   Linkify.addLinks( textView2, Linkify.WEB_URLS );

     Try this one.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T18:06:01.700

我遇到了 ApplicationContext 用于膨胀视图的问题。将其更改为 ActivityContext，现在它可以工作了！

# silverlight - 在silverlight的html查看器中禁用右键单击选项

> ID：10277475
> 
> 赞同：1
> 
> 时间：2012-04-23T08:53:21.260
> 
> 标签：silverlight

我想在silverlight中禁用html查看器上的右键单击选项。可以避免在silverlight页面上单击右键，但是当我右键单击html查看器时，我得到右键单击选项。我不想要正确的单击 html 查看器中的选项。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:56:50.953

看看这段代码 -

```
<SCRIPT language=JavaScript>
<!-- http://www.spacegun.co.uk -->
    var message = "function disabled"; 
    function rtclickcheck(keyp){ if (navigator.appName == "Netscape" && keyp.which == 3){   alert(message); return false; } 
    if (navigator.appVersion.indexOf("MSIE") != -1 && event.button == 2) {  alert(message);     return false; } } 
    document.onmousedown = rtclickcheck;
</SCRIPT> 
```

还有这个例子：

```
<SCRIPT TYPE="text/javascript"> 
<!-- 
//Disable right click script 
var message="Sorry, right-click has been disabled"; 
/////////////////////////////////// 
function clickIE() {if (document.all) {(message);return false;}} 
function clickNS(e) {if 
(document.layers||(document.getElementById&&!document.all)) { 
if (e.which==2||e.which==3) {(message);return false;}}} 
if (document.layers) 
{document.captureEvents(Event.MOUSEDOWN);document.onmousedown=clickNS;} 
else{document.onmouseup=clickNS;document.oncontextmenu=clickIE;} 
document.oncontextmenu=new Function("return false") 
// --> 
</SCRIPT> 
```

取自帖子：

[http://rainbow.arch.scriptmania.com/scripts/no_right_click.html](http://rainbow.arch.scriptmania.com/scripts/no_right_click.html)

[http://www.hypergurl.com/norightclick.html](http://www.hypergurl.com/norightclick.html)

# hashmap - HashMap：为什么我能够获取“键”的“值”，它属于 City 类类型，不覆盖 equals() 或 hashcode() 方法？

> ID：10277479
> 
> 赞同：1
> 
> 时间：2012-04-23T08:53:59.947
> 
> 标签：hashmap, overriding

根据 Kathy Sierra SCJP 6.0 书（第 7 章：泛型和集合，Pg.583，使用地图），我需要覆盖我想用作键的对象类的 equals() 和 hashcode() 方法，否则我将无法找到该键的值。

但根据我的代码，我能够获得价值。为什么？

```
import java.util.*;

class City {
    String name;

    City(String name) {
        this.name = name;
    }
}

public class MyClass {

    public static void main(String[] args) {

        Map<Object, Object> map = new HashMap<Object, Object>();
        City c1 = new City("NewYork");
        map.put(c1, "Fashion Capital");
        System.out.println(map.get(c1));
    }

} 
```

//输出是：“时尚资本”

# android - 如何在查询的 where 子句中提及范围？

> ID：10277482
> 
> 赞同：0
> 
> 时间：2012-04-23T08:54:11.380
> 
> 标签：android, sqlite

如何在查询的 WHERE 子句中提及范围。即例如：如果我有一个包含两列 1.name 2.experience 的表

现在如果想要所有有 5 年到 10 年经验的人的名字。我该怎么办。我如何在android中为此编写查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:02:01.090

在 SELECT 查询中使用 BETWEEN 子句。

```
SELECT column_name(s) FROM table_name WHERE column_name BETWEEN value1 AND value2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:00:29.183

`SELECT name FROM table_name WHERE experience < 10 AND experience > 5;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:01:32.660

这很容易..这样做..

> SELECT (name) FROM table_name WHERE 经验 BETWEEN 5 和 10

# memory-management - 内存映射中的堆栈大小

> ID：10277483
> 
> 赞同：0
> 
> 时间：2012-04-23T08:54:11.427
> 
> 标签：memory-management, size, stack

我有来自与堆栈相关的特定进程的内存映射的行：

```
bfda1000-bfdc2000 rw-p 00000000 00:00 0 [stack] 
```

我可以看到开头的两个十六进制数字是堆栈的开始和结束逻辑地址。但是我怎么知道堆栈上每一行的大小是多少，然后确定堆栈的总大小。谢谢。

# php - Cakephp 将 counterCache 计数存储在单独的表中

> ID：10277489
> 
> 赞同：1
> 
> 时间：2012-04-23T08:54:42.117
> 
> 标签：php, cakephp

我正在使用 cakephp2。我有两个问题

1.  我想将不同的缓存计数存储在**单独**的表中。例如：- 用户可能会创建群组、论坛等，我想存储计数而不是每次都查询。所以我使用了 cakephp 的 counterCache 功能。是否可以将所有这些计数存储在单独的表中，并且当用户创建组/论坛等时应该更新该表中的相应计数？

2.  我需要更新组的 counterCache 计数，以便在用户创建组以及用户加入任何组时自动增加计数。cakephp 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:27:38.060

不， counterCache() 不被认为可以处理像您这样更复杂的要求，它与框架中的任何功能一样，被认为涵盖了最常见的情况。你的要求不是日常要求。;)

在模型中使用 afterSave() 回调并在那里添加您的自定义逻辑，并根据需要将计数保存到关联的模型中。但总的来说，我没有理由添加一个表来存储计数？我认为这种架构没有任何好处。

# java - JSF a4j：支持在 UI 上重新渲染不起作用

> ID：10277493
> 
> 赞同：0
> 
> 时间：2012-04-23T08:55:06.320
> 
> 标签：java, ajax, jsf, ajax4jsf

**我正在研究 JSF a4j 组件。**

```
<h:selectOneMenu id="sampleSelect" value="#{myBackingBean.id}"
    immediate="true">
    <f:selectItems value="#{myBackingBean.generateSampleList}"/>
    <h:outputLabel value="Sample List : " for="sampleSelect"></h:outputLabel>
    <a4j:support ajaxSingle="true" 
                 event="onchange" 
                 reRender="dataTable1, dataTable2, dataTable3"
                 oncomplete="setColorbox();" 
                 action = "#{myBackingBean.setSampleListForDatatables}">
    </a4j:support>  
    </h:selectOneMenu> 
```

我的**数据表**为

```
<h:panelGroup id="dataTable1">
    <h:dataTable value="#{myBackingBean.anotherBean.sampleList}" 
                 var="sampleList"
                 styleClass="table">
        <h:column>
            ....
        </h:column>
    </h:dataTable>
    </h:panelGroup> 
```

我有**多个**类似的数据表，这些数据表**在这个 ajax 调用中发生了变化**，应该在完成 ajax 调用时重新呈现。

在服务器端数据被完美地改变，但在 UI 上没有被修改。

出于检查目的我所做的是....使用，

```
<h:column>
    <%=new java.util.Date()%>
</h:column> 
```

在我的 ajax 调用后未修改的数据表中。

任何人都可以向我提出任何建议吗？

从一些帖子中我知道我必须使用我已经完成的 immediate="true" 。但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:53:31.707

我得到了答案

```
<h:dataTable value="#{myBackingBean.anotherBean.sampleList}" 
             var="sampleList"
             styleClass="table" 
             id="dataTable1">
    <h:column>
        ....
    </h:column>
</h:dataTable> 
```

我删除`h:panelGroup`并将该ID放入`h:datatable`并且有效。:)

# android - 使用 android simpleCursorAdapter 的多个 ListView

> ID：10277496
> 
> 赞同：1
> 
> 时间：2012-04-23T08:55:20.960
> 
> 标签：android, listview, simplecursoradapter

我需要使用来自每个 ListView 的数据库查询中的数据在一个活动中显示多个 ListView，但是我无法使用以下代码同时显示两个 ListView，有人可以确认是否可以在中使用 SimpleCursorAdapter这样，如果是这样，我的代码有什么问题：

我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:layout_width="fill_parent"
      android:layout_height="wrap_content"
    android:layout_weight="1" >

    <ListView
        android:id="@+id/symptomsList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:visibility="visible">
    </ListView>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <ListView
        android:id="@+id/syndromesList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:visibility="visible">
    </ListView>
</LinearLayout> 
```

和Java：

```
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class TestActivity extends Activity {

ListView symptomsList;
ListView syndromesList;
SimpleCursorAdapter adapter;
SimpleCursorAdapter adapter2;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

 // Find views
   symptomsList = (ListView) findViewById(R.id.symptomsList); 
   syndromesList = (ListView) findViewById(R.id.syndromesList); 

SQLiteDatabase db = (new DatabaseHelper(this)).getWritableDatabase();

     Cursor cursor = db.rawQuery("SELECT _id, symname FROM tblsymptoms WHERE _id = 1", null);

    adapter = new SimpleCursorAdapter(
            this, 
            R.layout.test_list_item,
            cursor, 
            new String[] {"symname"}, 
            new int[] {R.id.text1,});
    symptomsList.setAdapter(adapter);

Cursor cursor2 = db.rawQuery("SELECT tblsyndromes._id, tblsyndromes.synname FROM tblsyndromes WHERE _id = 1", null);

adapter2 = new SimpleCursorAdapter(
        this,
         android.R.layout.simple_list_item_multiple_choice,
        cursor2, 
        new String[] {"synname", "_id"}, 
            new int[] {android.R.id.text1, android.R.id.text2});
symptomsList.setAdapter(adapter2);
symptomsList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:32:58.397

看你的代码...

```
symptomsList.setAdapter(adapter);
symptomsList.setAdapter(adapter2);    // problem here 
```

我想应该是...

```
symptomsList.setAdapter(adapter);
syndromesList.setAdapter(adapter2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T21:26:12.843

我遇到了类似的问题，但是当我尝试此修复时，我得到了“RuntimeException：您的内容必须有一个 id 属性为 'android.R.id.list' 的 ListView”

我的解决方法是像这样制作第一个列表 xml

```
<listView
android:id="@+id/android:list"
android:layout_height="wrap_content"
android:layout_width="fill_parent">
</ListView> 
```

第二个listview xml像这样

```
<listView
android:id="@+id/android:list2"
android:layout_height="wrap_content"
android:layout_width="fill_parent">
</ListView> 
```

然后在Java代码中

第一个使用 setListAdapter，第二个使用 setAdapter(myadapter)

# algorithm - 5 星贝叶斯评级回报百分比

> ID：10277502
> 
> 赞同：-1
> 
> 时间：2012-04-23T08:56:01.117
> 
> 标签：algorithm, bayesian

我建立了 5 星评级系统。当用户保持对照片的评级并且最终**br**将返回超过 100% 时，问题就来了，我如何确保它以百分比返回而不超过 100%

```
br = ( (avg_num_votes * avg_rating) + (this_num_votes * this_rating) ) / (avg_num_votes + this_num_votes) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:26:05.687

假设`avg_rating`和`this_rating`都不超过 100%，并且所有值都是非负数，那么您的公式将永远不会超过 100%。

```
br = ( (avg_n * avg_r) + (this_n * this_r) ) / (avg_n + this_n) <=
   <= ( (avg_n * 100%) + (this_n * 100%) ) / (avg_n + this_n) =
   = 100% * (avg_n + this_n) / (avg_n + this_n) =
   = 100% 
```

如果`avg_rating`并且`this_rating`不是以百分比来衡量（例如，它们是 0-5 的星数），您应该首先将它们转换为百分比。

# linux - 使用 LINUX/EXPECT 获取主机的总内存

> ID：10277503
> 
> 赞同：1
> 
> 时间：2012-04-23T08:56:01.423
> 
> 标签：linux, bash, memory-management, expect

我想通过使用“.exp”脚本来获取主机的总内存。

进入主机后，我执行以下行：

```
"send "top -n 1 | grep Mem: | awk '{ print $(NF-7) }' | cut -d 'k' -f1\r"" 
```

执行脚本时，它返回以下错误：

```
 can't read "(NF-7)": no such variable 
```

但是如果在主机内部手动获取，并执行同一行（没有“发送”部分），它会返回我预期的数字......

我做错了什么？任何的想法？任何其他方式做同样的建议？

最好的问候和提前感谢，

安东尼奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:13:12.797

的输出`top`并不意味着以这种方式解析。您可以通过其他更简单（更好！）的方式获得内存量。

```
sed -n -e '/^MemTotal/s/^[^0-9]*//p' /proc/meminfo 
```

或者您可以解析 的输出`free`，它也知道如何以方便的尺寸显示：

```
# total memory in megabytes
free -m | sed  -n -e '/^Mem:/s/^[^0-9]*\([0-9]*\) .*/\1/p' 
```

编辑：你总是要问自己“谁扩展了什么？”

要使用期望发送这些命令，请尝试

```
send "sed -n -e '/^MemTotal/s/^\[^0-9\]*//p' /proc/meminfo\n"

# also removes kb suffix
send "sed -n -e '/^MemTotal/{s/^\[^0-9\]*//;s/ .*//p}' /proc/meminfo\n"

# displays in megabytes
send "free -m | sed -n -e '/^Mem:/{s/^\[^0-9\]*//;s/ .*//p}'\n" 
```

这避开`expect`了它本来要处理的和打算用于的事情`sed`。

这是您原件的（正确转义）版本。

```
send "top -n 1 | grep Mem: | awk '{ print \$(NF-7) }' | cut -d 'k' -f1\n" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:31:33.070

Expect 是一个 Tcl 扩展。Tcl 将替换`$variables`为双引号字符串（参见[教程章节](http://tcl.tk/man/tcl8.5/tutorial/Tcl3.html)）

您想使用大括号发送文字字符串：

```
send {top -n 1 | grep Mem: | awk '{ print $(NF-7) }' | cut -d 'k' -f1}
send "\r" 
```

# matlab - 访问 xml 节点并获取值 xpath

> ID：10277514
> 
> 赞同：0
> 
> 时间：2012-04-23T08:57:13.893
> 
> 标签：matlab, matlab-deployment

在以下 xml 示例中，我尝试访问节点并获取如下值：是否可以使用 Matlab 中的 xpath 读取、比较和查找 xml 文件中的特定字符串？我没有找到任何文档。

有人可以给我一个例子吗？

在这里访问 description name="localization"> ：

```
<?xml version="1.0" encoding="UTF-8"?>  
<address xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation='test.xsd'>
  <lists name="myState">
             <description name="-temp">-20</description>
             <description name="localization">north</description>  
             <description name="-state">false</description> 
      </lists>
    </address>  
    <language language="english" name=""> 
         <description name="population">5000</description> 
    </language> 
```

我做了： docNode = xmlread(myXMLFILE); 工厂 = XPathFactory.newInstance；xpath = factory.newXPath;

```
% compile and evaluate the XPath Expression
 expression = xpath.compile(adress/lists/description')
description = expression.evaluate(docNode, XPathConstants.NODE);
descriptionValue = phoneNumberNode.getTextContent  % this gives me -20 
```

但是在这里我想访问'north'来获得'Noth'的值，我该如何进行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:53:34.527

您可以像这样在 XPath 中使用谓词`//address/lists/description[@name="localization"]`：`[]`用于谓词，`@`用于选择属性。所以前面的表达式选择属性等于的`description`节点（下面） 。有几个网站可以帮助您了解 XPath。[W3schools 就是其中之一。](http://www.w3schools.com/xpath/default.asp)如果您在 Matlab 使用的 XPath 实现方面需要更多帮助，您应该查看[Java 的实现](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/package-summary.html)。Java 可以直接在 Matlab 中使用（您的代码就是一个例子）并且在 Matlab 中 XML 处理是在 Java 中完成的。`address/lists``name``localization`

# ruby-on-rails-3 - simple_form_for 无法识别 f.input

> ID：10277516
> 
> 赞同：0
> 
> 时间：2012-04-23T08:57:20.193
> 
> 标签：ruby-on-rails-3, simple-form

我正在使用 simple_form gem。我有一个相当简单的场景。我有一个范围路由，我正在尝试获取一个表单：

```
= simple_form_for(@scope, @post) do |f|
  = f.input :comment 
```

简化的路由文件：

```
scope ':scope' do
  resources :posts
end 
```

但是我得到了错误：

```
undefined method `input' for #<ActionView::Helpers::FormBuilder:0x7f1b1eef1cb8> 
```

我正在使用 rails 3.0.12 和 simple_form 1.4.2

任何建议我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:17:26.680

之所以发生这种情况，是因为`simple_form_for`（`for_form`也因为`simple_form_for`只是对其的方法委托）接收选项散列作为第二个参数。所以你`@post`被解释为选项，防止 SimpleForm 更改表单构建器。

使用作用域资源的正确方法是使用这样的数组：

```
= simple_form_for([@scope, @post]) do |f|
  = f.input :comment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:08:08.020

解决这个问题的一种方法（虽然不理想是使用 simple_fields。我会坚持下去，直到有更好的解决方案。

```
= form_for(@scope, @post) do |f|
  =f.simple_fields_for :posts do |ff|
    =ff.input :comment 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:36:36.343

安装 Gem 后重启服务器了吗？

# java - 如何在java中从某个单词开始读取字符串？

> ID：10277518
> 
> 赞同：0
> 
> 时间：2012-04-23T08:57:25.893
> 
> 标签：java, android

我想在我的应用程序中使用图像的 uri 值（磁盘上的位置）。为此，我必须使用以 /sdcard/... 开头的字符串

我可以打开一个文件管理器来帮助选择图片，但即便如此，每个文件管理器都会在前面添加一些东西，无论是 /mnt/sdcard 还是其他东西。我不能使用子字符串，因为 /sdcard 前面的字母数量并不总是相同的。

我想从 /sdcard 开始读取这个字符串，有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:02:41.560

你可以这样做：

```
 File cacheDir;
    if (android.os.Environment.getExternalStorageState().equals(
            android.os.Environment.MEDIA_MOUNTED)) {
        cacheDir = new File(
                android.os.Environment.getExternalStorageDirectory(),
                getString(R.string.cache_directory_image_cache));
    } else {
        cacheDir = getCacheDir();
    }

    String filepath = cacheDir.getAbsolutePath(); 
```

然后你在文件路径中有路径！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:04:09.987

嗯。似乎是一个非常简单的问题，使用 indexOf("/sdcard") 查找“/sdcard”的位置，然后从该点启动您的子字符串。

String#substring(String#indexOf("/sdcard"), String#length())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:05:12.440

您可以使用[String.lastIndexOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)查找“/sdcard”的最后一次出现，然后使用 index+offset 中的常用子字符串读取其余部分...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:05:29.410

你可以使用函数

**indexOf（字符串字符串）**

其中 str 是 '/sdcard/'

这将为您提供字符串第一次出现的索引。

# c# - 组合框不反映初始对象值

> ID：10277519
> 
> 赞同：2
> 
> 时间：2012-04-23T08:57:26.903
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个对象列表，以及网格内的一些字段。当 List( `lvInvoices`) 中的一个对象被选中时，我更新了 Grid( `lyDetailForm`) 的 dataBinding：

```
private void lvInvoices_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
  int index = lvInvoices.SelectedIndex;
  if (index != -1)
  {
    Invoice selectedInvoice = this.ListItems.ElementAt(index);
    lyDetailForm.DataContext = selectedInvoice;
    ((PdfViewer)this.pdfControlHost.Child).File = selectedInvoice.SourceFile.FullName;
  }
} 
```

在`lyDetailForms`中，我有几个控件。当我设置网格的 DataContext 时，文本控件会正确更新。然而，在我设置一次之前，组合框显示为白色；之后，当我更改所选项目时，它会正确更新。

```
<Grid Name="lyDetailForm" Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="2" Grid.Row="1" Margin="10">
  <TextBox Name="tbNif"  Grid.Column="1" Grid.Row="1" HorizontalAlignment="Left" Width="100" Margin="5" IsEnabled="{Binding SpId, Converter={x:Static local:SpSentToBooleanConverter.Instance}, ConverterParameter=NEGATE, FallbackValue=False}" Text="{Binding Nif,ValidatesOnExceptions=True,NotifyOnValidationError=True}" Validation.Error="OnEditBoxError"/>
  <ComboBox Name="cbType" Grid.Column="1" Grid.Row="2" Grid.RowSpan="2" Height="23" HorizontalAlignment="Left" Margin="5" VerticalAlignment="Top" Width="100" IsEnabled="{Binding SpId, Converter={x:Static local:SpSentToBooleanConverter.Instance}, ConverterParameter=NEGATE, FallbackValue=False}" Text="{Binding Type, Mode=TwoWay} ItemsSource="{Binding Types}"/>
</Grid> 
```

顺便说一句，`Types`是来自同一`invoice`对象的静态属性，它返回一个字符串数组`String[]`。组合框项目是字符串。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:24:26.250

您将`cbType`ComboBox 用作 TextBox，这是错误的，请删除`Text="{Binding Type, Mode=TwoWay}`绑定并将 ComboBox 选定项的绑定设置为类似这样的内容`SelectedItem={Binding SelectedType}`，其中`SelectedType`表示当前选定的类型。

# c# - 如何在代码隐藏文件中的 asp.net 表中插入标签？

> ID：10277520
> 
> 赞同：1
> 
> 时间：2012-04-23T08:57:37.557
> 
> 标签：c#, asp.net, hyperlink, html-table

> **可能重复：** [如何在 ASP.NET 中动态创建新的超链接？](https://stackoverflow.com/questions/947973/how-do-i-dynamically-create-new-hyperlinks-in-asp-net)

我在我的代码中动态添加表。我想在我的代码隐藏文件中使用编码添加它。我的代码如下：

```
<table>
<tr>
     <td class="what-to-expect">
        <a href="#TB_inline?height=200&width=300&inlineId=myOnPageContent" title="add a caption to title attribute" class="thickbox">?</a>
        </td>
</tr>
</table> 
```

谁能告诉我如何通过代码添加它？

**从注释中添加的代码**

```
HtmlTableRow trContent = new HtmlTableRow(); 
HtmlTableCell cell1 = new HtmlTableCell(); 
cell1.InnerText = SomeTextHere; 
trContent.Cells.Add(cell1) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:07:36.433

您想要做的是`HyperLink`向您的 Cell 添加一个控件

```
HtmlTableRow trContent = new HtmlTableRow(); 
HtmlTableCell cell1 = new HtmlTableCell(); 
HyperLink hl = new HyperLink() 
{ 
    Text = "?", 
    NavigateUrl = "#TB_inline?height=200&width=300&inlineId=myOnPageContent",
    CssClass="thickbox", 
    ToolTip = "add a caption to title attribute" 
};
cell1.Controls.Add(hl); 
trContent.Cells.Add(cell1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:16:20.063

在代码中创建一个 HyperLink 对象，将所有相关数据分配给它，然后将其添加到相关单元格中。

所以像

```
Dim link As New HyperLink()
link.NavigateURL = "#TB_inline?height=200&width=300&inlineId=myOnPageContent"
link.ToolTip = "add a caption to title attribute"
link.CssClass = "thickbox"
link.Text = "?"

cell1.Controls.Add(link) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:03:03.727

使用`<asp:literal runat="server" id="lblSomething" />`.

然后在你的代码后面，写这样的东西：

```
lblSomething.Text = "<your table code>"; 
```

# apache - Apache 的 Varnish 与 memcache/d

> ID：10277521
> 
> 赞同：4
> 
> 时间：2012-04-23T08:57:52.060
> 
> 标签：apache, memcached, varnish

我有一个运行 Apache 并使用 MySQL 数据库的 HTML 网站。我想加快我的 Apache 服务器的响应时间。我想获得关于我应该走哪条路的建议？我在 Google 上读到 Varnish 与 Apache 一起使用。所以我有两个问题：

1.  我可以将 Memcache 与 Apache 一起使用吗？
2.  如果是，那么哪个更好，Memcache 还是 Varnish？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T11:54:50.527

比较 Varnish 和 Memcached 就像比较苹果和橘子。Varnish 是一个缓存反向 HTTP 代理，它位于 Apache Web 服务器的前面。另一方面，Memcached 是一个分布式对象缓存系统。例如，它可以用于缓存从 MySQL 服务器检索到的内容。

对您网站的细节一无所知，我会说 Varnish 是最简单的方法。理论上，你可以把它扔到你的 Apache 前面，然后让你的页面飞起来。当然，现实生活中并非如此。您需要根据您的特定需求调整 Varnish 以有效地处理 cookie、缓存禁止等。

Memcached 需要更改您的代码。您需要检查您的代码，调查您可以从缓存中获得优势的地方，并根据需要实施更改。

Varnish 和 Memcached 都没有提供插件解决方案来加速您的网站，但两者都是帮助您实现该目标的出色工具。

# php - 为特定行为应用设计模式

> ID：10277525
> 
> 赞同：2
> 
> 时间：2012-04-23T08:58:01.077
> 
> 标签：php, design-patterns, refactoring

我想知道是否有人可以为此功能提供设计模式或更好的实现解决方案：

```
 public function refundAcceptedDisputes() {            
        $this->getRequestedEbayOrdersFromDB(); //get all disputes requested on ebay
        foreach ($this->orders as $order) { /* $order is a Doctrine Entity */
            try {
                if ($this->isDisputeAccepted($order)) {
                    $order->setStatus('accepted');
                    $order->refund(); //refunds the order on ebay and internally in my system
                    $this->insertRecordInOrderHistoryTable($order,'refunded');                        
                } else if ($this->isDisputeCancelled($order)) {
                    $order->setStatus('cancelled');
                    $this->insertRecordInOrderHistory($order,'cancelled');
                    $order->rollBackRefund(); //cancels the refund on ebay and internally in my system
                } else if ($this->isDisputeOlderThan7Days($order)) {
                    $order->closeDispute(); //closes the dispute on ebay
                    $this->insertRecordInOrderHistoryTable($order,'refunded');
                    $order->refund(); //refunds the order on ebay and internally in my system
                }
            } catch (Exception $e) {
                $order->setStatus('failed');
                $order->setErrorMessage($e->getMessage());
                $this->addLog();//log error
            }
            $order->setUpdatedAt(time());
            $order->save();
        }
    } 
```

**功能目的：**

*   我在 ebay 上卖游戏。
*   如果客户希望取消他的订单并取回他的钱（即退款），我必须首先在 ebay 上提出“争议”。
*   一旦出现争议，我必须等待客户确认他同意退款（愚蠢的，因为他是告诉我退款的人，但这就是它在 ebay 上的运作方式）。
*   此功能获取我打开的所有争议并定期检查其状态以查看客户是否已回复争议。
*   客户可能同意（然后我退款）或拒绝（然后我回滚）或可能在 7 天内不回复（我自己关闭争议然后退款）。

**问题**

1.  正如您所看到的，代码是建立在一个`if/else`结构上的，这意味着一个新的状态（例如客户关闭他的帐户）将意味着我需要添加一个违反*Open Closed Principle*`else if`的语句。
**   我感觉这个函数有不同的抽象层。`getRequestedEbayOrdersFromDB()`非常抽象，而其余的代码有很多细节。*   重复某些功能`insertRecordInOrderHistoryTable()`，只是将新记录添加到历史实体表中。*

 ***解决方案**

我考虑过将倍数转换`if/else`为工厂模式，但我只使用工厂来创建对象而不改变行为。

接下来我考虑使用策略模式，但未能构建一个好的解决方案。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:30:46.077

创建一个退款订单处理工厂怎么样？

我没有从提供的代码中获得足够的信息，但我假设其中有一些东西`order`可以作为处理程序类型的键，所以你可以在中执行以下操作`refundAcceptedDisputes`：（我是 C++ 人，很抱歉伪代码）

```
refundOrderHandler = RefundOrderHandlerFactory.getHandler(order);
refundOrderHandler.doRefund(); // Name this method accordingly 
```

然后您的工厂将有一个简单的 if/else 来获取处理程序的类型，如下所示：

```
RefundOrderHandlerFacotry::getHandler(order)) {
  if(isDisputAccepted(order) {
    return handlerA(order);
  }
  else if(isDisputCancelled(order)) {
    return handlerB(order);
  }
  else if(isDisputOlderThan7Days(order)) {
    return handlerC(order);
  }
  // Add new handlers here
} 
```

确定处理程序类型的逻辑必须放在工厂中，或使其可访问。

然后，您必须为每种类型的`RefundHandler`with创建一个类`RefundHandlerBase`作为具有抽象方法的基类。`doRefund()` 请注意，与退款相关的所有逻辑都包含在适当的类中。要添加更多退款处理程序，您必须创建一个类来处理它，`else if`向工厂添加一个，以及确定类型的适当逻辑`RefundHandler`。*

# .net - 使用 DotCMIS dll 查看 alfresco 中所有工作区的步骤

> ID：10277526
> 
> 赞同：1
> 
> 时间：2012-04-23T08:58:09.113
> 
> 标签：.net, alfresco, cmis, dotcmis

谁能告诉我使用 DotCMIS dll 在露天查看所有工作区的步骤是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:06:38.040

在 CMIS 中没有工作空间的概念。我猜你的意思是你想列出存储库。为此，如[官方示例](http://chemistry.apache.org/dotnet/getting-started-with-dotcmis.html)所示，您可以执行以下操作：

```
//
// AtomPub version
//
Dictionary<string, string> parameters = new Dictionary<string, string>();

parameters[SessionParameter.BindingType] = BindingType.AtomPub;
parameters[SessionParameter.AtomPubUrl] = "http://your.host.name/alfresco/service/cmis";
parameters[SessionParameter.User] = "admin";
parameters[SessionParameter.Password] = "admin";

SessionFactory factory = SessionFactory.NewInstance();
IList<IRepository> repos = factory.GetRepositories(parameters);

//
// WebServices version
//
Dictionary<string, string> parameters = new Dictionary<string, string>();

parameters[SessionParameter.BindingType] = BindingType.WebServices;
parameters[SessionParameter.WebServicesRepositoryService] = "http://your.host.name/alfresco/cmis/RepositoryService?wsdl";
parameters[SessionParameter.WebServicesAclService] = "http://your.host.name/alfresco/cmis/AclService?wsdl";
parameters[SessionParameter.WebServicesDiscoveryService] = "http://your.host.name/alfresco/cmis/DiscoveryService?wsdl";
parameters[SessionParameter.WebServicesMultifilingService] = "http://your.host.name/alfresco/cmis/MultifilingService?wsdl";
parameters[SessionParameter.WebServicesNavigationService] = "http://your.host.name/alfresco/cmis/NavigationService?wsdl";
parameters[SessionParameter.WebServicesObjectService] = "http://your.host.name/alfresco/cmis/ObjectService?wsdl";
parameters[SessionParameter.WebServicesPolicyService] = "http://your.host.name/alfresco/cmis/PolicyService?wsdl";
parameters[SessionParameter.WebServicesRelationshipService] = "http://your.host.name/alfresco/cmis/RelationshipService?wsdl";
parameters[SessionParameter.WebServicesVersioningService] = "http://your.host.name/alfresco/cmis/VersioningService?wsdl";
parameters[SessionParameter.User] = "admin";
parameters[SessionParameter.Password] = "admin";

SessionFactory factory = SessionFactory.NewInstance();
IList<IRepository> repos = factory.GetRepositories(parameters); 
```

# shell - 使用“sysdba”从 shell 脚本连接到 Oracle DB

> ID：10277528
> 
> 赞同：0
> 
> 时间：2012-04-23T08:58:12.507
> 
> 标签：shell, oracle11g

我需要使用“sysdba”权限从 shell 脚本连接我的 Oracle 11g 数据库。为此，我必须将用户从“root”切换到“oracle”。我尝试了以下但没有成功。

```
su - oracle -c "<< EOF1
    sqlplus -s "/ as sysdba" << EOF2
    whenever sqlerror exit sql.sqlcode;
    set echo off 
    set heading off

    shutdown immediate
    startup mount
    alter database archivelog;
    alter database open;

    exit;
    EOF2
EOF1" 
```

我收到以下错误。

> [root@vEMS-23 devel]# ./enableArchiveLogs.sh 错误：ORA-01031：权限不足
> 
> SP2-0306：无效选项。用法：CONN[ECT] [logon] [AS {SYSDBA|SYSOPER|SYSASM}] 其​​中 ::= [/][@] [edition=value] | /SP2-0306：无效选项。用法：CONN[ECT] [logon] [AS {SYSDBA|SYSOPER|SYSASM}] 其​​中 ::= [/][@] [edition=value] | / SP2-0157: 3 次尝试后无法连接到 ORACLE，退出 SQL*Plus [root@vEMS-23 devel]#

据我所知，它无法验证为“sysdba”。如果我消除 'su - oracle -c' 并最初以 oracle 用户身份运行脚本，则不会发生这种情况。

有什么线索吗？

* * *

**我有一个答案：**

答案很简单。我只是对语法有点混乱。以下是工作代码：

```
su - oracle -c 'sqlplus -s / as sysdba <<EOF
   whenever sqlerror exit sql.sqlcode;
   set echo off 
   set heading off

   shutdown immediate
   startup mount
   alter database noarchivelog;
   alter database open;

   exit;
EOF
' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:45:42.083

CONNECT chan/testing SELECT * FROM student; 出口;

另存为 /shell_with_oracledb_test/r_connection2.sql

将 shell 文件写为 echo "sqlplus /nolog @/shell_with_oracledb_test/r_connection2.sql" | 甲骨文

命名这个文件-> filename.sh

执行文件名.sh 文件

这是示例代码。

# c++ - 如何让firefox重新加载user_pref而不重新启动

> ID：10277531
> 
> 赞同：1
> 
> 时间：2012-04-23T08:58:23.700
> 
> 标签：c++, firefox, firefox-addon, ipc

我创建了一个 Firefox 扩展和一个 C++ 程序：

该扩展在 Firefox 的侧边栏上显示一些信息。

`prefs.js`C++程序在Firefox执行时编辑（Firefox的首选项文件）中扩展的一些首选项：

```
user_pref("Sidebarinfo.initialize", "true");
user_pref("Sidebarinfo.initdone", "false");
user_pref("Sidebarinfo.usageflag", "eng");
user_pref("Sidebarinfo.userid", "162");
user_pref("Sidebarinfo.originaltime", "1309061712"); 
```

那么，当 Firefox 正在执行时，我如何编辑我的扩展程序的首选项？

如果我`prefs.js`在 Firefox 执行时进行编辑（并且仅在这种情况下），那么 Firefox 会重置`prefs.js`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:02:04.673

你不能那样做通讯部分。这是一个设置文件，不是“通信文件”。您必须读取带有扩展名的其他文件（不确定这可能有多远），或者从嵌入到 C++ 程序中的迷你 http 服务器中检索一些 url。

# asp.net - 如何在div的innerhtml中分配xml字符串以及Xslt Text

> ID：10277532
> 
> 赞同：0
> 
> 时间：2012-04-23T08:58:24.143
> 
> 标签：asp.net, xml

我已经为 XML 编写了自己的样式表，当我将此 xslt 用作 xml 样式表的参考时，它工作正常，但是当我将它分配给 div 的 innerhtml 时，它就不起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:47:43.830

您可以使用 asp .net XML 控件代替使用 div，您可以从代码后面或通过 .aspx 页面指定您的 xslt 文件名和文档数据。

```
 <asp:Xml ID="xmlViewControl" runat="server" TransformSource="Default.xsl">
                </asp:Xml> 
```

试试吧，它会工作的。

# xml - 如何将数据表转换为xml？

> ID：10277533
> 
> 赞同：1
> 
> 时间：2012-04-23T08:58:27.067
> 
> 标签：xml, linq, datatable

即使有很多例子，我找不到我需要的？我的问题只是标题“如何将数据表转换为 xml”...

虽然，您可以建议任何技术的解决方案，但我也有一个起点，请看一下这段代码。

```
 Dim xmlDoc As New XDocument(
                    New XElement("Class",                                   
                                From row In dt.AsEnumerable()
                                Select New XElement("PUPIL",
                                    New XAttribute("FIRSTNAME", row.Field(Of String)("First Name")),
                                    New XAttribute("LASTNAME", row.Field(Of String)("Last Name")),
                                    New XAttribute("DOB", row.Field(Of String)("DoB")),
                                    New XAttribute("YEAR", row.Field(Of String)("Year")),
                                    New XAttribute("SEX", row.Field(Of String)("Gender")),
                                    New XAttribute("CLASSNAME", row.Field(Of String)("Reg"))
                                ))))) 
```

在此示例中，我需要知道要进行转换的列数和列名。我讨厌将列名硬编码到该 Linq 中，是否可以在 Linq 中使用任意数量的列和列名？

如果有人可以建议我改进 Linq 以处理数据表中的任何列，那就太好了。

非常感谢。

**LINQ 解决方案...**

```
 Dim xmlDoc As New XDocument(                       
         From row In dt.Rows
         Select New XElement("Pupil",
         From column In dt.Columns
         Select
         New XAttribute(column.ToString, row.Item(column.ToString)))) 
```

**Datatable.WriteXML 解决方案，请参考 Habib 的帖子**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:06:45.247

代替 LINQ，您可以使用：[DataTable.WriteXML();](http://msdn.microsoft.com/en-us/library/x3zy2whb.aspx)

```
 DataTable dt = new DataTable();
        dt.WriteXml("myxmlfile.xml"); 
```

如果要根据 Schema 读写数据，请执行以下步骤：

*   我相信您在 DataTable 中有数据，您可能也有数据的 xml，在 Visual Studio 中打开该 XML，使用生成架构 -> 在菜单中选择 -> XML -> 创建架构
*   这将生成一个模式文件，保存该模式文件，例如 test1.xsd
*   试试下面的代码

    ```
    DataSet ds = new DataSet();
    ds.ReadXmlSchema("test1.xsd"); //This will read and prepare dataset according to tes1.xsd schema
    ds.ReadXml("test.xml"); // This will read the XML and it should be schema compliant 
    ds.WriteXml("test7.xml");//This will write the new XML according to schema 
    ```

    在您的情况下，您可以根据需要修改架构，然后您可以使用 XML 架构将文档从数据集生成到 XML。您必须先将数据表保存在数据集中。（我不太确定这种方法，但由于我没有看到对这个问题的新回复，我认为它可能对你有帮助）

# java - 我在哪里可以找到 JXTA 中的 NetworkManager.RecursiveDelete()；

> ID：10277538
> 
> 赞同：0
> 
> 时间：2012-04-23T08:58:32.043
> 
> 标签：java, hibernate, jakarta-ee, java-me, jxta

我正在寻找名为 NetworkManager.RecursiveDelete() 的方法。你知道我可以在 JXTA 2.6 的什么地方找到它吗？

我开始在 JXTA 中搜索 NetworkManager 但找不到。在 JXTA 2.5 中很容易找到不同的类。我希望你有一个建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:17:56.130

This version of the jxse 2.6 jars at [kenai](https://oss.sonatype.org/content/repositories/comkenaijxse-057/com/kenai/jxse/jxse/2.6/) has the `net.jxta.platform.NetworkManager` class with the methods you're looking for.

Is that the same one you're using?

# android - OnItemClickListener 列表视图

> ID：10277549
> 
> 赞同：2
> 
> 时间：2012-04-23T08:59:22.887
> 
> 标签：android

我在从 ListItems 中获取所选字符串时遇到一个问题，例如：考虑我的 ListItem 有一些元素只是认为我的 taskLit 中存在一、二、三，现在如果我单击 ListItem i，即在 One、Two 或三我应该得到那个特定的字符串值。是否有可能从 ListItems 中获取选定的字符串值，或者是否有任何方法，如 getSelectedStringItem()。提前致谢。

```
public void taskOverview()
    {       
        List<TaskList> taskList = new ArrayList<TaskList>();

        taskList.add(new TaskList("OutStanding:", true, false));
        taskList.add(new TaskList(">>"+TaskList.getOutStandingTask(), false,true));

        ListView listView = (ListView) findViewById(R.id.taskList);
        listView.setClickable(true);
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub          
                Intent intent = new Intent(getApplicationContext(), ViewTaskActivity.class);
                startActivity(intent);

            }
        });

        TaskListAdapter taskListAdapter = new TaskListAdapter(this, taskList);
        listView.setAdapter(taskListAdapter);
        taskListAdapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:11:07.003

```
mListView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        Toast.makeText(getBaseContext(), mListItems.get(position), 1000).show();
    }

}); 
```

# c - 用 C 编写的代码不适用于 Visual Studio

> ID：10277550
> 
> 赞同：0
> 
> 时间：2012-04-23T08:59:24.437
> 
> 标签：c, visual-studio

我正在尝试在 Visual stuido 中运行以下代码。请执行此代码，然后在此处键入的代码下方阅读我的经验。

```
#include <stdio.h>
#include <conio.h>
main()
{
int i;
struct book
{
    char name;
    float price;
    int pages;
};
struct book b[3];
printf("Enter the names prices & no. of pages of 3 books \n");
for (i = 0; i<=2; i++)
{
    printf("name of book %d : ", i +1);
    scanf("%c", &b[i].name);
    printf("price of book %d : ", i +1);
    scanf("%f", &b[i].price);
    printf("pages in book %d : ", i +1);
    scanf("%d", &b[i].pages);
}
for (i = 0; i<=2; i++)
{
    printf("Name of book : %c, Price of book: %f, Pages in book : %d \n", b[i].name, b[i].price, b[i].pages);
}
printf("Press any key to continue");
getch();
 }
void linkfloat()
{
    float a =0, *b;
    b = &a;
    a = *b;
} 
```

如您所见，它询问用户书名、页码和价格，但碰巧当您在 Visual Basic 中运行代码时，它不允许从 B2 开始键入书名，而允许用户键入价格和页码对于同一本书 b[i]，向前移动它会在不允许用户键入名称的地方为书名打印一个空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:04:30.800

`char`只为一个字符提供空间。同样，我相信`%c`只读取一个字符。

您要么将其更改为足够大的字符数组以保存书名，要么将其更改为`char *`并用于`malloc`获取内存来存储名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:06:47.213

这是您不应该依赖`scanf()`输入的原因之一，因为错误的输入可能会搞砸一切。我不确定您之前使用的是什么编译器，但这段代码不应该在任何符合标准的 c 编译器中工作。

读取或打印字符串时，必须使用格式标签`%s`。`%c`仅代表单个字符，因此输入任何长于一个字符的名称将搞砸所有输入请求（除非处理得当，例如通过 flushing `stdin`）。

以类似的方式，您的`name`成员可能只存储一个字符，而不是完整的名称。将其更改为数组，例如`char name[64]`. 确保它足够长以存储完整名称（并避免缓冲区溢出）。

可能还有其他错误，但我认为这些是最重要的错误，使您无法发现任何其他问题（如果有的话）。

编辑：尝试了代码并且由于换行符（从点击返回）仍然坐在`stdin`. 当读取一个整数或浮点数时，它会被跳过（由于没有形成有效的输入），但它被接受`%c`（没有检查它，但如果你这样做了，你应该注意到读取的值应该等于`\n`）。

To fix this, always call `fflush(stdin);` after you've read using `scanf()`. Doing it right before reading the character should be enough, but it's still a bit error prone.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T09:05:31.593

除了 SJuan76 指出的基本问题之外，它可能会更好地工作，并且如果您结束行更容易阅读：

```
printf("name of book %d:\n", i + 1); 
```

# plone - 如何测试 Plone 是否呈现错误页面

> ID：10277562
> 
> 赞同：0
> 
> 时间：2012-04-23T09:00:26.443
> 
> 标签：plone

我覆盖了 plone_context_state 视图，并希望在 Plone 呈现错误页面时在其构造函数中执行不同的代码。这个视图是从渲染 Plone 的格式化错误页面时使用的主模板调用的。

在初始化视图时，我在请求或响应对象上看不到任何内容，告诉我正在呈现错误页面。

# java - cobertura 报告出现很多错误：JavaNCSS got an error while parsing the java file

> ID：10277565
> 
> 赞同：6
> 
> 时间：2012-04-23T09:00:32.770
> 
> 标签：java, report, cobertura

```
[cobertura-report] net.sourceforge.cobertura.javancss.parser.TokenMgrError: Lexical error at line 29, column 59\. Encountered: "\r" (13), after : "\"\u5bb8\u832c\u7ca1\u5a75\ufffd\u693f\u6769\ufffd;"
[cobertura-report] at net.sourceforge.cobertura.javancss.parser.JavaParserTokenManager.getNextToken(JavaParserTokenManager.java:2078) 
```

* * *

```
[cobertura-report] 2012 04 23 15:55:39,797 WARN 0 ComplexityCalculator:107(main) - JavaNCSS got an error while parsing the java file D:\testworkspace\HT20120420\src\com\cnbab\proj118\regnlogin\action\ActivateUserByEmail.java
[cobertura-report] TokenMgrError in STDIN
[cobertura-report] Lexical error at line 29, column 59\. Encountered: "\r" (13), after : "\"\u5bb8\u832c\u7ca1\u5a75\ufffd\u693f\u6769\ufffd;" 
```

* * *

```
[cobertura-report] 2012 04 23 15:55:39,814 WARN 17 ComplexityCalculator:107(main) - JavaNCSS got an error while parsing the java file D:\testworkspace\HT20120420\src\com\cnbab\proj118\regnlogin\action\ActivateUserBySms.java
[cobertura-report] TokenMgrError in STDIN
[cobertura-report] Lexical error at line 32, column 59\. Encountered: "\r" (13), after : "\"\u5bb8\u832c\u7ca1\u5a75\ufffd\u693f\u6769\ufffd;"
[cobertura-report] at net.sourceforge.cobertura.reporting.html.HTMLReport.generateTableRowForTotal(HTMLReport.java:704) 
```

* * *

```
[cobertura-report] 2012 04 23 15:55:39,821 WARN 24 ComplexityCalculator:107(main) - JavaNCSS got an error while parsing the java file D:\testworkspace\HT20120420\src\com\cnbab\proj118\regnlogin\action\LoginEntry.java
[cobertura-report] TokenMgrError in STDIN
[cobertura-report] Lexical error at line 24, column 70\. Encountered: "\r" (13), after : "\"\u9427\u8bf2\u7d8d\u935a\u5d84\u7b09\u9473\u6212\u8d1f\u7ecc\ufffd);"
[cobertura-report] net.sourceforge.cobertura.javancss.parser.TokenMgrError: Lexical error at line 86, column 69\. Encountered: "\r" (13), after : "\"\u6d93\ue043\u7d8b\u5bb8\u30e5\u6662\u93b4\ufffd))"
[cobertura-report] at net.sourceforge.cobertura.javancss.parser.JavaParserTokenManager.getNextToken(JavaParserTokenManager.java:2078)
[cobertura-report] at net.sourceforge.cobertura.javancss.parser.JavaParser.jj_scan_token(JavaParser.java:10181)
[cobertura-report] at net.sourceforge.cobertura.javancss.parser.JavaParser.jj_3R_198(JavaParser.java:8524) 
```

* * *

```
 if(strRet.equals("01"))
        return SUCCESS;
    else{
        if(strRet.equals("02"))
            this.strError = "已被激活";
        if(strRet.equals("03"))
            this.strError = "未被激活";
        if(strRet.equals("04"))
            this.strError = "没有这个用户";
        return ERROR; 
```

出现上述原因是程序有很多中文消息（utf-8）代码（如上面的代码），cobertura instrument编译不通过，网上资料在（）的bat文件（cobertura-instrument.bat）中添加“-Dfile.encoding=utf-8”编码或者Java环境变量加“-Dfile.encoding=utf-8”编码可以解决，但是我在ant build.xml中，我加了很多encoding="utf -8" 没有解决。请各位指教！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T11:53:32.283

试试这个选项：

1.  将 -Dfile.encoding=iso-8859-1 添加到您的 ANT_OPTS 环境变量中
2.  `use <presetdef> to setup defaults for all of your <javac> invocations`

# iphone - 使文本字段再次成为第一响应者

> ID：10277568
> 
> 赞同：4
> 
> 时间：2012-04-23T09:00:52.777
> 
> 标签：iphone, ios, uitextfield, becomefirstresponder

```
- (IBAction)textFieldDoneEditing:(id)sender {
  [sender resignFirstResponder];
  [sender becomeFirstResponder];
} 
```

我有一个 UItextField 对象，并将“退出时结束”链接到“textFieldDoneEditing”操作。在我按下键盘上的完成按钮后，为什么它会消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:12:28.417

在您的方法中调用另一种方法，例如下面的代码

在`yourViewController.h`文件中只定义波纹管方法

```
-(void)MykeyBoardUp; 
```

并在 .m 文件中

```
-(void)MykeyBoardUp{
      [yourtextFieldobject becomeFirstResponder];
} 
```

然后在您的 .m 文件中的波纹管方法中，只需像这样调用此方法

```
- (IBAction)textFieldDoneEditing:(id)sender {
  [sender resignFirstResponder];
  [self performSelector:@selector(MykeyBoardUp) withObject:nil afterDelay:0.2];
} 
```

愿这能帮助你......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:34:07.650

在上面的代码中，当你运行时`[sender resignFirstResponder]`键盘会隐藏，所以调用下一个方法是没有用的

但如果你仍然想再次获得键盘，请使用`UITextField`对象调用它，即

如果在.h

`IBOulet UITextField *txt;`

然后打电话 `[txt becomeFirstResponder]`

但我还是不明白，你的目的是什么。

# macos - 在 Interface Builder 的 View Effects Inspector 中选择 CALayer 有什么作用？

> ID：10277573
> 
> 赞同：6
> 
> 时间：2012-04-23T09:01:25.940
> 
> 标签：macos, cocoa, xcode4, interface-builder, core-animation

在 IB 内部，在 View Effects Inspector 中，有一个设置 Core Animation Layer 的选项。如果我设置它会做什么？

![查看效果检查器](../Images/342f6d1bcb60e60836bfadb2968399ce.png)

是否相当于`setWantsLayer:YES`？

如果是这样，那么根据[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html) `setWantsLayer`可以在之前或之后调用`setLayer:`。

`The order that setWantsLayer: and setLayer: are called is important, it makes the distinction between a layer-backed view and a layer-hosting view.`

如果我从 IB 设置 CALayer，会是哪个顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T10:19:50.437

该复选框使您的视图*具有图层支持*`setWantsLayer:`（例如在没有的情况下调用`setLayer:`）。

# c++ - iOS 上的 Google 协议缓冲区

> ID：10277576
> 
> 赞同：19
> 
> 时间：2012-04-23T09:01:59.170
> 
> 标签：c++, ios, protocol-buffers

是 iOS 的元语法静态库。. .

[http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers](http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers)

. . . 与常规的旧 C++ 编译的原型文件兼容吗？我***不想***使用生成 Obj-C 的捆绑编译器。

有没有办法编译谷歌为 iOS 提供的库？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T11:29:15.300

好的。在这种情况下，元句法库（或任何其他第 3 方库）似乎是不必要的。您可以直接将 Google 源代码添加到您的项目中。我在 google 讨论组中找到了 Nicola Ferruzzi 的以下答案。. .

原来的答案在这里。. .

[http://groups.google.com/group/protobuf/browse_thread/thread/ca4218d7db144252](http://groups.google.com/group/protobuf/browse_thread/thread/ca4218d7db144252)

该答案的内容包含在下面的图像中，以永久记录...

* * *

**编辑**

由于今晚第一次尝试这个，除了下面列出的步骤之外，我还需要几个步骤（这适用于 protobuf 2.5.0）。

*   您需要链接到 libz.dylib。您可以在 Build Phases > Link Binary With Libraries 中进行设置。
*   要轻松删除所有与单元测试相关的内容，请在 google 目录中的 shell 中使用以下命令`find . -name "*unittest*" -exec rm -rf {} \;`
*   同时删除名为`testing`
*   注释掉`#include <google/protobuf/testing/googletest.h>`_`stringprintf.cc`
*   现在仔细按照以下说明进行操作，一切正常。

* * *

> 我在我的应用程序中使用最新版本.. 如果您熟悉 C++，您实际上并不需要 objc 直接支持，只有一点您必须从 std::string 传递到 NSData，反之亦然。它非常简单。
> 
> 编译和测试我发现的最简单的方法是在我自己的项目中导入整个 google 目录:) （第二次你可以制作自己的框架，但为了测试这个过程就可以了）
> 
> *   下载最新版本
> *   autogen 配置和制作就像您刚刚为 macosx 构建一样（您需要命令行工具）。这样你最终得到了 protoc
>     二进制文件和 macosx 库（你不需要）
> *   打开你的 Xcode iOS 项目
> *   将“新文件”添加到您的项目并选择 google 目录
> *   将 google headers 的目录添加到您的其他包含目录中
> *   将 protobuffer src 目录中的 config.h 添加到您的应用程序
> *   从 google 组中删除包含 unitest 的所有内容 :)
> *   从 google 组中删除编译器和 java 的东西；
> 
> 您应该能够在没有任何链接错误的情况下进行编译。为了给你一个想法，这是我直接编译的
> 
> ![在此处输入图像描述](../Images/05d6f66d9894fca326677d8bbe09d9c3.png)
> 
> 然后您可以使用 protoc 为您的协议生成 c++ 源文件。要将它们与 objc 一起使用，您必须将源重命名为文件“mm”，然后您可以执行类似的操作
> 
> ## 序列化到 NSDATA
> 
> 假设您的消息称为 Packet
> 
> ```
> - (NSData *)getDataForPacket:(Packet *)packet { 
>     std::string ps = packet->SerializeAsString(); 
>     return [NSData dataWithBytes:ps.c_str() length:ps.size()]; 
> ```
> 
> ## 从 NSDATA 读取
> 
> ```
> - (Packet *)getPacketFromNSData:(NSData *)data { 
>   char raw[[data length]]; 
>   Packet *p = new Packet; 
>   [data getBytes:raw length:[data length]]; 
>   p->ParseFromArray(raw, [data length]); 
>   return p; 
> 
> } 
> ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-19T19:19:18.123

您可以通过将以下行添加到您的 Podfile 中，为使用 Cocoapods 的 Xcode 5 项目添加对 Google Protocol Buffers 的支持。

```
pod 'GoogleProtobuf', '~> 2.5.0' 
```

这会将 C++ 版本的 protobuf 代码放入项目的 Pod 中。它还将在项目`protoc`的文件夹中添加编译器`Pods/GoogleProtobuf/bin/protoc`。

您可以在项目中创建自定义构建规则，自动将`.proto`文件转换为`.ph.{h,cc}`文件。我是这样做的：

将构建规则设置为“处理名称匹配的源文件：*.proto 使用自定义脚本”。该脚本应包括以下内容：

```
cd ${INPUT_FILE_DIR}
${SRCROOT}/Pods/GoogleProtobuf/bin/protoc --proto_path=${INPUT_FILE_DIR} ${INPUT_FILE_PATH} --cpp_out=${INPUT_FILE_DIR}/cpp 
```

设置输出文件以包括以下内容：

```
$(INPUT_FILE_DIR)/cpp/$(INPUT_FILE_BASE).pb.h
$(INPUT_FILE_DIR)/cpp/$(INPUT_FILE_BASE).pb.cc 
```

您在项目中包含的任何`.proto`文件现在都将自动转换为 C++，然后作为构建的一部分进行编译。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-06T11:41:57.980

**编辑**：我之前回答过这个问题，但被版主删除了。所以我已经包含了教程中的一些代码。

与上面发布的答案几乎相同的教程 -[在 iOS 和 Mac 上的 Objective-C 中使用 Google 协议缓冲区](http://www.kotancode.com/2012/10/14/using-google-protocol-buffers-in-objective-c-on-ios-and-the-mac/)

按照 learnvst 的答案中给出的步骤，并参考评论中的陷阱。我遵循完全相同的步骤，除了

> 将 google 标头目录添加到您的附加包含目录 我在标头搜索路径中添加了***src/***目录，而不是 google 目录。

另外，当我这样做`#import xyz.pb.h`的时候，项目还没有建立。当我将**.m**文件重命名为**.mm**时，我能够构建。教程中非常巧妙地提到了这一点：P。

> 基本上，导入任何**.pb.h文件的任何****.m**文件都应使用扩展名**.mm重命名**

 ****这是教程中的一些内容 -

**原文件**

```
package kotancode;

enum ZombieType {
    SLOW = 0;
    FAST = 1;
}

message ZombieSighting {
    required string name = 1;
    required double longitude = 2;
    required double latitude = 3;
    optional string description = 4;
    required ZombieType zombieType = 5 [default = SLOW];
} 
```

**ZombieSightingMessage.h**

```
// -- ZombieSightingMessage.h - note my C++ object is not in the public interface.
#import <Foundation/Foundation.h>

@interface ZombieSightingMessage : NSObject
- (void)doSomething;
@end 
```

**ZombieSightingMessage.mm**

```
// -- ZombieSightingMessage.mm
#import <UIKit/UIKit.h>
#import "ZombieSightingMessage.h"
#import "zombie.pb.h"

@implementation ZombieSightingMessage

- (void)doSomething {
    // Doing random stuff with a UIView here to show the mixing
    // of C++ and Objective-C/Cocoa syntax in the same file...
    UIView *uiView = [[UIView alloc] init];
    [uiView setCenter:CGPointMake(20, 10)];

    // instantiate my protobuf-generated C++ class.
    kotancode::ZombieSighting *zombieSighting = new kotancode::ZombieSighting();
    zombieSighting->set_name("Kevin");
    zombieSighting->set_description("This is a zombie");
    zombieSighting->set_latitude(41.007);
    zombieSighting->set_longitude(21.007);
    zombieSighting->set_zombietype(kotancode::ZombieType::FAST);

    // Some small tomfoolery required to go from C++ std::string to NSString.
    std::string x = zombieSighting->DebugString();
    NSString *output = [NSString stringWithCString:x.c_str() encoding:[NSString defaultCStringEncoding]];
    NSLog(@"zombie: %@", output);

    // Instantiate another zombie from the previous zombie's raw bytes.
    NSData *rawZombie = [self getDataForZombie:zombieSighting];
    kotancode::ZombieSighting *otherZombie = [self getZombieFromData:rawZombie];

    // Dump the second zombie so we can see they match identically...
    NSString *newOutput = [NSString stringWithCString:otherZombie->DebugString().c_str() encoding:[NSString defaultCStringEncoding]];
    NSLog(@"other zombie: %@", newOutput);

    // Grimace all you want, but this is C++ and we need to clean up after ourselves.
    free(zombieSighting);
    free(otherZombie);

}

// Serialize to NSData. Note this is convenient because
// we can write NSData to things like sockets...
- (NSData *)getDataForZombie:(kotancode::ZombieSighting *)zombie {
    std::string ps = zombie->SerializeAsString();
    return [NSData dataWithBytes:ps.c_str() length:ps.size()];
}

// De-serialize a zombie from an NSData object.
- (kotancode::ZombieSighting *)getZombieFromData:(NSData *)data {
    int len = [data length];
    char raw[len];
    kotancode::ZombieSighting *zombie = new kotancode::ZombieSighting;
    [data getBytes:raw length:len];
    zombie->ParseFromArray(raw, len);
    return zombie;
}

@end 
```

**编辑**：我正在使用 Xcode 4.5。即使在我按照所有步骤操作之后，我也遇到了链接器错误。

> 未找到体系结构 i386 的符号

因此，我无法在模拟器上运行代码。但它适用于实际设备

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-07T18:45:45.180

我想根据实际问题，我的评论值得作为答案发布：

我正在使用[Booyah提供的本机 Obj 代码生成的略微修改版本](http://github.com/booyah/protobuf-objc)

它支持开箱即用的重复字段，但为了使用 ObjC 快速枚举，您需要将 PBArray 类型（基本上是类型化的 c 缓冲区）转换为它所代表的 NSObject 数组——对象的 NSNumber 或 protobuf 消息。[您可以在此更改](https://github.com/index/protobuf-objc/commit/27757382ed9ad2057df87b9f97ed8ecea53311b5)中看到更新的快速枚举代码示例：。您还可以在 PBArray 上添加一个名为 toObjects 的类别。

我只是用 标记生成的代码，但您可以从[booyah 拉取请求](https://github.com/booyah/protobuf-objc/pulls)`-fno-objc-arc`中获得 arc 和 2.5 支持。

这些说明非常适合设置，但如果人们想要更明确地说明我使用的类别、我如何构建 protobuf-objc 插件、如何获得对类前缀的支持（例如 IXMyProtoMessage 而不是 MyProtoMessage）或我如何生成代码让我知道，我会尽量腾出时间写一篇文章。我将它与> 50个具有很多跨项目依赖关系的原型文件一起使用。

该库的一个弱点是它在生成的代码中不包含典型的 Protobuf 反射 api，因此执行诸如将消息转换为 NSDictionary 之类的操作将不得不对 objC 运行时做一些骇人听闻的事情（代码不遵循典型的KV 合规性）或从具有反射 api 的 protos 编写自定义代码生成器（我使用 python + jinja2 完成了此操作）。或者 - 更好和类似的困难，将反射 API 添加到代码生成器;)。****

# c - 使用内存映射逐块打开和读取大文件（100GB）

> ID：10277580
> 
> 赞同：1
> 
> 时间：2012-04-23T09:02:04.967
> 
> 标签：c, linux, mapping

我想打开一个大小为 100GB 的文件，并且每次都使用文件映射从其中逐块读取数据。当偏移量大于 2GB 时，它总是会开始映射任何内容。我想我可能是不支持 64 位寻址的函数。但是在我添加大文件支持之后（包括大文件支持定义、大文件打开选项以及使用命令-D_FILE_OFFSET_BITS=64 -D_LARGE_FILE 编译）。但是，同样的问题仍然存在。这是简化的代码：

```
#define _LARGEFILE_SOURCE
#define _LARGEFILE64_SOURCE
#define _FILE_OFFSET_BITS 64
#include <math.h>
#include <time.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include<fcntl.h>
#include<unistd.h>
#include<sys/stat.h>
#include<sys/time.h>
#include<sys/mman.h>
#include<sys/types.h>

#define PERMS 0600

int total_piece, PAGE, buffer, share, offset, count, chunk;

void get_size(char * strFileName)   
{  
    struct stat temp;  
    stat(strFileName, &temp);

    PAGE = getpagesize();             
    total_piece = temp.st_size/PAGE;
    chunk = 1024*1024*1024*0.4/PAGE; 

    if (temp.st_size%PAGE!=0)     
    total_piece++;
}

char *
mmaping (char *source)
{
  int src;
  char *sm;
  struct stat statbuf;

  if ((src = open (source, O_RDONLY)) < 0)  //I thought error comes from this line. So I tried to use large file support as following. But still the same. 
    {
      perror (" open source ");
      exit (EXIT_FAILURE);
    }
/*
  if ((src = open64(source, O_RDONLY|O_LARGEFILE, 0644))<0)  
    {
      perror (" open source ");
      exit (EXIT_FAILURE);
    }
*/
  if (fstat (src, &statbuf) < 0)
    {
      perror (" fstat source ");
      exit (EXIT_FAILURE);
    }

  printf("share->%d PAGES per node\n",share);

  if (share>=chunk)
  buffer = chunk;
  else
  buffer = share;

  printf("total pieces->%d\n",total_piece);
  printf("data left->%d\n",share);
  printf("buffer size->%d\n",buffer);
  printf("PAGE size->%d\n",PAGE);

  sm = mmap (0,buffer*PAGE, PROT_READ, MAP_SHARED | MAP_NORESERVE,src, offset*PAGE); 

  if (MAP_FAILED == sm)
    {
      perror (" mmap source ");
      exit (EXIT_FAILURE);
    }

  return sm;
}

main(int argc, char**argv){

   get_size(argv[1]);

   share = total_piece;

   offset = 0;

   while (share>0)
   {

      char *x = mmaping(argv[1]);

      printf("data->%0.30s\n",x); //bus error will occur when offset reaches 2GiB, which proves my thought: it maps          nothing.

      munmap(x,buffer*PAGE);  

      share-=buffer;

      offset+=buffer;

   }

   return 0;
} 
```

任何人都可以很好地帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T09:32:44.920

当然，“int”类型的变量（在 Linux 上为 32 位）不足以容纳 100 GB 文件的大小（以字节为单位）。对于文件大小/偏移量，您需要使用“off_t”类型（当您启用 LFS 支持时，它是 off64_t 的别名，一个有符号的 64 位整数）。

同样，mmap 的“length”参数是 size_t 类型，而不是 int。

要使代码可移植到 32 位和 64 位目标，无论是否使用 LFS，您需要注意应在何处使用哪些整数类型。

# iphone - 创建许多对象时 FPS（每秒帧数）下降

> ID：10277581
> 
> 赞同：1
> 
> 时间：2012-04-23T09:02:08.310
> 
> 标签：iphone, ios, cocos2d-iphone, frame-rate, ccsprite

我正在根据 Ray Wenderlich 的教程制作我的第一款游戏。当我尝试在屏幕上总共添加 50 个敌人时。fps 从 60 下降到每秒 45 左右。你们能告诉我为什么吗？

```
-(void)createObjectOfType:(GameObjectType)objectType
           withHealth:(int)initialHealth 
           atLocation:(CGPoint)spawnLocation 
           withZValue:(int)ZValue               {

if (objectType == kEnemyTypeEvil) {

    Evil *evil = [[Evil alloc] initWithSpriteFrameName:@"evil_1.png"];
    [evil setCharacterHealth:initialHealth];
    [evil setPosition:spawnLocation];
    [objectBatchNode addChild:evil z:ZValue tag:kEvilTagValue];
    [evil setDelegate:self];
    [evil release];
}
else if (objectType == kEnemyTypeGhost){

    Ghost *ghost = [[Banana alloc] initWithSpriteFrameName:@"Ghost.png"];
    [ghost setCharacterHealth:initialHealth];
    [ghost setPosition:spawnLocation];
    [objectBatchNode addChild:ghost z:ZValue tag:kGhostTagValue];
    [ghost setDelegate:self];
    [ghost release];
}
} 
```

然后下面的方法会以 0.5s 的时间间隔将敌人一个一个添加到屏幕上。屏幕中的最大敌人数量为 50，这远非很多（我猜）。

```
-(void)addStage1Enemies{
CGSize levelSize = [[GameManager sharedGameManager] getDimensionOfCurrentScene];
int spawnIndex = arc4random() % 4;
float spawnXpos;
float spawnYpos;

if (spawnIndex == 0){
    spawnXpos= arc4random() % (int)(levelSize.width+30.0f) - 15.0f;
    spawnYpos= levelSize.height +15.0f;
}
else if (spawnIndex == 1){
    spawnXpos= levelSize.width + 15.0f;
    spawnYpos= arc4random() % (int)(levelSize.height+30.0f) - 15.0f;
}
else if (spawnIndex == 2){
    spawnXpos= arc4random() % (int)(levelSize.width+30.0f) - 15.0f;
    spawnYpos= -15.0f;
}
else if (spawnIndex ==3){
    spawnXpos = -15.0f;
    spawnYpos = arc4random() % (int)(levelSize.width+30.0f) - 15.0f;
}

int enemyEliminated = [GameManager sharedGameManager].killCount;

if (enemyEliminated <50) {
    if (evilCount<50) {
        [self createObjectOfType:kEnemyTypeEvil
                      withHealth:kEvilHealth
                      atLocation:ccp(spawnXpos,spawnYpos)
                      withZValue:10];
    }
    evilCount++;
}
else if (enemyEliminated <100) {
    evilCount=0;
    if (ghostCount<50) {
        [self createObjectOfType:kEnemyTypeGhost
                      withHealth:kGhostHealth
                      atLocation:ccp(spawnXpos,spawnYpos)
                      withZValue:10];
    }
    ghostCount++;
}

} 
```

此外，敌人会从一个位置到随机位置重复执行 CCMoveTo。导致帧率下降的可能原因是什么？我该如何解决这个问题？

我想尽快解决这个问题。非常非常非常非常感谢您！

------编辑--------

我在 iPhone 4 设备上运行它。

我有一个 1960*1280 像素的大精灵作为我的背景。

基本上在更新循环中，我将每个精灵表中的所有对象更新为数组。这会是更新每帧上所有对象的问题吗？但就我而言，我只有 50 个敌人。

```
CCArray *listOfGameObjects = [objectBatchNode children];
CCArray *listOfGameObjects2 = [objectBatchNode_2 children];
CCArray *listOfGameObjects3 = [objectBatchNode_3 children];
CCArray *listOfBosses = [bossesBatchNode children];
CCArray *listOfBosses2 = [bossesBatchNode_2 children];
CCArray *listOfBosses3 = [bossesBatchNode_3 children];
CCArray *listOfBosses4 = [bossesBatchNode_4 children];

for (GameCharacter *tempChar in listOfGameObjects){
    [tempChar updateStateWithDeltaTime:deltaTime andListOfGameObjects:listOfGameObjects];

}

for (GameCharacter *tempChar in listOfGameObjects2){
    [tempChar update2StateWithDeltaTime:deltaTime andListOfGameObjects:listOfGameObjects2];

}
for (GameCharacter *tempChar in listOfGameObjects3){
    [tempChar update3StateWithDeltaTime:deltaTime andListOfGameObjects:listOfGameObjects3];

}

for (GameCharacter *tempChar in listOfBosses){
    [tempChar updateBossesStateWithDeltaTime:deltaTime andListOfGameObjects:listOfBosses];

}
for (GameCharacter *tempChar in listOfBosses2){
    [tempChar updateBosses2StateWithDeltaTime:deltaTime andListOfGameObjects:listOfBosses2];

}
for (GameCharacter *tempChar in listOfBosses3){
    [tempChar updateBosses3StateWithDeltaTime:deltaTime andListOfGameObjects:listOfBosses3];

}
for (GameCharacter *tempChar in listOfBosses4){
    [tempChar updateBosses4StateWithDeltaTime:deltaTime andListOfGameObjects:listOfBosses4];

} 
```

这有多大帮助？

谢谢你们！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:21:43.410

FPS会永远降到45吗？还是在添加敌人时会卡顿一段时间？如果是后者，您可能希望在场景开始时创建它们并相应地显示或不显示它们。

我必须看看你在所有这些 updateBossesStateWithDeltaTime 中做了什么，才能知道是不是这样。

尝试删除部分代码，直到您知道是否是它。例如，将你的敌人类从除初始化代码之外的所有内容中剥离出来（创建它们，将它们的精灵添加到场景中），看看是否仅仅因为你降低了 fps。

如果只是添加它们会像那样降低 fps，你应该尝试使用 spritesheets（如果你还没有这样做的话）。

巨大的背景可能会对 fps 造成影响，请尝试在不触及其他任何东西的情况下也将其移除，看看是否是原因。

# android - 如何通过触摸监听器旋转图像？

> ID：10277585
> 
> 赞同：1
> 
> 时间：2012-04-23T09:02:22.720
> 
> 标签：android, android-widget

我正在实现代码以通过触摸侦听器旋转图像。当用户触摸和旋转图像时，它正在旋转，同时它正在“缩小”。我需要没有缩小的图像旋转。这是我实现的代码。

```
public class SeekBarCustomized extends Activity implements OnTouchListener{

    //VerticalSeekBar mVerSeekbar;
    ImageView mIvRotateImage;
    private float y=0;
    int r =0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mIvRotateImage = (ImageView) findViewById(R.id.ivImgView);
        mIvRotateImage.setOnTouchListener(this);

}
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        //double r=Math.atan2(event.getX()-mIvRotateImage.getWidth()/2, mIvRotateImage.getHeight()/2-event.getY());
        //double r=Math.atan2(event.getX(), event.getY());
        int rotation=(int)Math.toDegrees(r);
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:

                r = r + 2;

                rotate(v, event);
                break;
            case MotionEvent.ACTION_UP:
                break;
        }//switch       

        return true;
    }

private void rotate(View v, MotionEvent event) {
        LayoutParams mParams = (LayoutParams) mIvRotateImage.getLayoutParams();
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                R.drawable.increcircle);
        int w = bitmap.getWidth();
        int h = bitmap.getHeight();
        Matrix matrix = new Matrix();
        matrix.preRotate(r);
        Bitmap rotaBitmap = Bitmap.createBitmap(bitmap, 0, 0, 200, 200, matrix,
                true);
        BitmapDrawable bdr = new BitmapDrawable(rotaBitmap);

        int x = mParams.leftMargin;
        int y = mParams.topMargin;
        mParams.leftMargin = 50;
        mParams.topMargin = 50;
        mIvRotateImage.setImageDrawable(bdr);
        mIvRotateImage.setLayoutParams(mParams);
    }
} 
```

我的 XML 文件是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<ImageView android:id="@+id/ivImgView"
    android:layout_width="200px" android:layout_height="200px"
    android:layout_marginTop="50px" android:layout_marginLeft="50px"
     android:src="@drawable/increcircle"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:49:21.157

```
I used this code snippet.

//android:scaleType="center" 
in <ImageView /> tag at xml file/
By using this Image is rotating but not scaling.

<ImageView android:id="@+id/ivImgView"
    android:layout_width="200px" android:layout_height="200px"
    android:layout_marginTop="50px" android:layout_marginLeft="50px"
     android:src="@drawable/increcircle" android:scaleType="center"/> 
```

# android - 加载应用程序时布局充气器错误

> ID：10277586
> 
> 赞同：5
> 
> 时间：2012-04-23T09:02:28.133
> 
> 标签：android, inflate-exception

我有一个 Galaxy Samsung tab 10.1" Model GT-P7510 OS Version 3.2。我试图在上面加载应用程序，它给了我布局充气错误。这是为什么？这是 logcat 所说的：

```
android.view.InflateException: Binary XML file line #12: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:596)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:644)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:245)
at android.app.Activity.setContentView(Activity.java:1786)
at com.businessplan.BusinessPlannerActivity.onCreate(BusinessPlannerActivity.java:64)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
at android.app.ActivityThread.access$500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4126)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
at dalvik.system.NativeStart.main(Native Method)

    java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:416)
at android.view.LayoutInflater.createView(LayoutInflater.java:576)

android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f020022 a=-1 r=0x7f020022}
at android.content.res.Resources.loadDrawable(Resources.java:1890)
at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
at android.view.View.<init>(View.java:2462)
at android.view.ViewGroup.<init>(ViewGroup.java:365)
at android.widget.LinearLayout.<init>(LinearLayout.java:156)
at android.widget.LinearLayout.<init>(LinearLayout.java:152) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:05:10.210

可能您在此处调用的布局文件中有错误：

`android.app.Activity.setContentView(Activity.java:1786) at com.businessplan.BusinessPlannerActivity.onCreate(BusinessPlannerActivity.java:64) at`

请自行检查，或在此处发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:27:45.970

我删除了 Gen 文件夹，然后再次清理并构建项目，错误消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-28T03:13:37.733

同样，在一个干净的项目并进行重建后，错误就消失了。

# random - 我需要一个项目的数字和字母生成器

> ID：10277588
> 
> 赞同：0
> 
> 时间：2012-04-23T09:02:35.023
> 
> 标签：random, code-generation, new-operator, letters-and-numbers

我需要数字和字母有点像这个 0000-00-0000A。我正在做一个项目，所以当我放置优惠券时，随机数字和字母会出现在我放置它的优惠券 ID 上，但对于每张优惠券，数字和字母都是不同的。是的，我是 2 个月内编码的新手，我认为除了这个随机数之外我做得很好。我正在做的例子如下。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#coupon{
     width: 600px;
     height:auto;
     top:145px;
    background: #FFFF95;
    margin: 2px auto;
    border: 1px solid #000000;
    text-align: center;
    -webkit-border-top-left-radius:06px;
    -webkit-border-top-right-radius:06px;
    -webkit-border-bottom-left-radius:06px;
    -webkit-border-bottom-right-radius:06px;
    -moz-border-radius-topleft:06px;
    -moz-border-radius-bottomleft:06px;
    -moz-border-radius-topright:06px;
    -moz-border-radius-bottomright:06px;
    border-top-left-radius:06px;
    border-top-right-radius:06px;
    border-bottom-left-radius:06px;
    border-bottom-right-radius:06px;
    /* additional features, can be omitted */
    border:2px outset #093;
    padding:15px;
    font-size:15px;
    -moz-box-shadow: 0 0 15px #999;
    -webkit-box-shadow: 0 0 15px #999;
    box-shadow: 0 0 15px #999;
}

</style>
</head>

<body>
<div id="coupon" class="coupon">
<p>This can be the coupn area where the cupon is place and the deal can be read then printed!</p>
<div class="print-page" id="print-page">
  <p><a href=" #" onClick=" window.print()" >Print Deal</a></p>
</div>
<div class="coupon-id-number" id="coupon-id-number">0000-00-0000-A</div></div>

</body>
</html> 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:15:02.613

在java中你会做类似的事情：

```
Random random = new Random();
String couponCode = String.format("%04d-%02d-%04d-%s", random.nextInt(10000), random.nextInt(100), random.nextInt(10000), (char)(random.nextInt(26)+65)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:17:27.560

如果您想通过 JavaScript 执行此操作，您可能需要一个类似的函数

```
<script>
function genRandom() {
  var genNumber = function (length) {
        return ~~(Math.random() * length);
      },
      genChar = function () {
        var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXZ',
            index = genNumber(24);

        return chars.slice(index, index + 1);
      },
      arr = [genNumber(10000), genNumber(100), genNumber(10000), genChar()];
  return arr.join('-');
}

document.getElementById('coupon-id-number').innerHTML = genRandom();
</script> 
```

# android - 如何从设备中的数据库文件夹中获取 sqlite？

> ID：10277590
> 
> 赞同：0
> 
> 时间：2012-04-23T09:02:49.887
> 
> 标签：android, sqlite

您好，我已经[在 Android 应用程序中使用您自己的 SQLite 数据库实现了此代码](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

它从资产文件夹中获取我的数据库并将其复制到数据库文件夹中到设备中。现在我如何从我的设备中获取该数据库？

或者如果我的设备已植根，或者即使那样它也无法完成，那么获取是可能的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:20:21.853

“currentDBPath”包含数据库的路径。您可以使用以下步骤将其复制为文件并将其保存在其他位置。

```
String currentDBPath = "/data/"+getApplicationInfo().packageName+"/databases/db_name";

FileChannel src = new FileInputStream(currentDB).getChannel(); // source
FileChannel dst = new FileOutputStream(backupDB).getChannel(); // destination
dst.transferFrom(src, 0, src.size()); // to copy from source to destination
src.close();
dst.close(); 
```

希望这是您正在寻找的。

# javascript - jQuery 在同一个函数上绑定 each() 和 click()

> ID：10277591
> 
> 赞同：0
> 
> 时间：2012-04-23T09:02:53.130
> 
> 标签：javascript, jquery

所以我有以下片段：

```
 $(".server").each(function() {
     var element = $(this);
      //bunch of javascript here with element
 }); 
```

我还想绑定一个单击事件`id`来完成与上述相同的工作，这怎么可能，无需复制和粘贴整个块并执行以下操作：

```
 $("#my-id").click(function() {
       var element = $(this);
      //bunch of javascript here with element
 }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T09:06:32.287

我认为以下应该有效：

```
var eventHandler = function() {
    var element = $(this);
    //bunch of javascript here with element
};

$(".server").each(eventHandler);
$("#my-id").click(eventHandler); 
```

# apache - 强制 SSL 重定向 - Apache/IHS RewriteCond 和 RewriteRule

> ID：10277593
> 
> 赞同：0
> 
> 时间：2012-04-23T09:02:58.717
> 
> 标签：apache, mod-rewrite, https

我正在尝试设置一个重写规则，该规则将强制所有进入端口 80 的请求强制使用 HTTPS。

我只是对 mod_rewrite 有所了解，但这是我目前拥有的；

```
RewriteCond ${lowercase:%{REQUEST_URI}} /securePath$
RewriteRule ^(.*)$ https://www.mydomain.com/$1 
```

在 RewriteCond 中，securePath 是请求的路径（不包括我的域）。完整的 URI 将是 www.mydoamin.com/securePath 在 ReWriteRule 中，$1 应该是 RewriteCond 中 ${lowercase:%{REQUEST_URI}} 的输出

但是，当我重新启动 IHS 服务器并尝试访问 URL 时，它不会强制通过 HTTPS 访问。关于这两行有什么问题的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:48:00.757

```
RewriteRule ^securePath/(.*)$ https://www.mydomain.com/$1 [NC,R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T09:25:56.453

Probably it's just you example being broken, but you are explicitly lowercasing the incoming request path and try to match that to "/securePath" which includes a capital letter. -That is never going to match.

# android - Android - 保存大型 Xml 文件（内部 / sdcard）

> ID：10277604
> 
> 赞同：0
> 
> 时间：2012-04-23T09:04:02.407
> 
> 标签：android, xml, parsing, sd-card, out-of-memory

我想保存一个非常大的在线 xml 文件（大约 33mb）。我正在尝试在 StringBuilder 中获取 xml 文件，将其转换为字符串，然后通过 FileOutputStream 将文件保存在内部存储/Sdcard 中。

但我内存不足，应用程序崩溃。当我尝试从 StringBuilder 获取字符串中的值时发生崩溃。

这是我当前的代码：

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("sorry cant paste the actual link due copyrights.xml");

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();            

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {

            sb.append(line + "\n");
        }
        is.close();

        String result = sb.toString();

        System.out.println(result);

        FileOutputStream fos = openFileOutput("test.xml", Context.MODE_PRIVATE);

        fos.write(sb.toString().getBytes());

        fos.close();

    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:31:51.267

您的解决方案的问题是它需要大量的应用程序内存，因为 xml 字符串完全加载到内存中。

您可以通过像这样处理小 1kb 块中的数据来避免这种情况：

```
 is = httpEntity.getContent();

    FileOutputStream fos = openFileOutput("test.xml", Context.MODE_PRIVATE);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = is.read(buffer))>0){
        fos.write(buffer, 0, length);
    }

    fos.flush();
    fos.close();
    is.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:10:23.780

你可以试试下面的代码吗？

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
        is, "iso-8859-1"), 8);
FileOutputStream fos = openFileOutput("test.xml", Context.MODE_PRIVATE);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {

    sb.append(line + "\n");

    if (sb.toString().length() > 10000) {
       fos.write(sb.toString().getBytes());
       fos.flush();
       sb = new StringBuilder();
    }
}
is.close();

fos.close(); 
```

# tomcat - 使tomcat管理器应用程序多用户

> ID：10277607
> 
> 赞同：0
> 
> 时间：2012-04-23T09:04:19.050
> 
> 标签：tomcat

我想在多用户环境中使用 tomcat。这意味着我希望多个用户使用它来部署他们的应用程序。他们将使用管理器应用程序来部署他们的应用程序。但是每个用户应该只能查看该用户部署的应用程序，而不会干扰其他用户的应用程序。我试图通过在 tomcat-users.xml 中配置多个用户来做到这一点，但到目前为止还没有找到解决方案。有可能做这样的事情吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:35:17.507

我很确定不可能为 tomcats manager 应用程序定义如此细粒度的访问权限。

我会让用户拥有自己的 tomcat 实例。不幸的是，这要复杂得多：

1.  您必须创建和配置实例
2.  您的机器需要更多资源
3.  如果所有应用程序都应该在一个 http 端口上可用，您必须定义一些代理（这很容易使用 Apache httpd 和 mod_proxy_*）

但最后你的用户已经很好地分开了。我认为仅使用一个 tomcat 实例是不可能的。

# indexing - Nutch：如何排除非英文页面？

> ID：10277612
> 
> 赞同：1
> 
> 时间：2012-04-23T09:04:47.807
> 
> 标签：indexing, nutch

我想知道是否有一种简单的机制可以从索引过程中排除非英语页面？例如，dmoz 种子 url 列表包含多种语言的维基百科页面，它们是排除的主要候选者。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:22:29.517

您是否有所有英文页面都遵循的任何 url 模式？例如。`en`维基百科在英文网址中有“ ”

> [http://en.wikipedia.org/wiki/Category:Wikipedia_books](http://en.wikipedia.org/wiki/Category:Wikipedia_books)

. 对于其他语言，它`en`在 url中没有

> [http://gl.wikipedia.org/wiki/Categor%C3%ADa:Wikipedia:Libros](http://gl.wikipedia.org/wiki/Categor%C3%ADa:Wikipedia:Libros)

如果您可以定义它，那么可以通过在 $NUTCH_CONF_DIR/regex-urlfilter.txt 文件中添加正则表达式规则来轻松完成，因此包括具有英语模式的页面并丢弃其他页面。

# android - SherlockActionBar：将其隐藏在片段中

> ID：10277616
> 
> 赞同：0
> 
> 时间：2012-04-23T09:05:22.150
> 
> 标签：android, actionbarsherlock, android-actionbar

我在调用片段的活动中使用 SherlockActionBar。我在创建片段之前创建了栏，所以我在活动中看不到栏，只是在片段中。

但是，问题是当我按下后退按钮时，栏就在那里，我不知道如何隐藏它（如果可以的话）。

有没有办法做到这一点，或其他解决方法？

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T09:12:30.277

简单的东西：`getSupportActionBar().hide();`

# java - 将字符串添加到 ArrayList

> ID：10277617
> 
> 赞同：0
> 
> 时间：2012-04-23T09:05:23.460
> 
> 标签：java, string, arraylist

```
String [] Letters = {
    "a", ...... , "z",
};    

new ArrayList<String> (Arrays.asList(Letters)); 
```

我目前正在使用上面的代码，我相信它会从 Array 调用 Letters 创建一个 ArrayList（如果我错了，请纠正我）。我需要知道如何将新字符串添加到 ArrayList 中。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:06:45.643

使用[添加](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28E%29)：

```
List<String> list = new ArrayList<String> (Arrays.asList(letters));
// Java naming convention - variables start with lower case ^^
list.add("some new string"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:07:28.977

你可以使用`List.add`方法

```
List myList = new ArrayList<String> (Arrays.asList(Letters));
myList.add(myString); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:07:49.027

你在说，

```
String [] Letters = {
    "a", ...... , "z",
};    

ArrayList<String> arrayList = new ArrayList<String> (Arrays.asList(Letters));
arrayList.add("My String"); 
```

?

# windows-8 - 在 win 8 Metro 应用程序中打开项目上方的上下文菜单

> ID：10277618
> 
> 赞同：3
> 
> 时间：2012-04-23T09:05:25.540
> 
> 标签：windows-8

我有一个 ListView 中定义的项目列表。当用户单击或点击任何项目时，我想在所选项目上方显示一个 PopupMenu。我应该如何定位 PopupMenu？

```
varmenu =newPopupMenu();
menu.Commands.Add(
newUICommand("Remove", (x) =>
{...
// Create the message dialog and set its content
}, 1));

var chosenCommand     =awaitmenu.ShowForSelectionAsync(GetElementRect((FrameworkElement)sender));

Rect GetElementRect(FrameworkElement element)
{    
    GeneralTransform buttonTransform = element.TransformToVisual(null);
    Pointpoint = buttonTransform.TransformPoint(newPoint());
    returnnewRect(point,newSize(element.ActualWidth, element.ActualHeight));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T22:13:01.007

这是我用来在应用栏中的按钮上方打开弹出菜单的代码。

```
private async void OnOpenMenu(object sender, RoutedEventArgs e)
{
    var button = (Button)sender;
    var transform = button.TransformToVisual(this);
    var point = transform.TransformPoint(new Point(0, 0));

    var menu = new PopupMenu();

    menu.Commands.Add(new UICommand("Menu Item 1"));
    menu.Commands.Add(new UICommand("Menu Item 2"));

    await menu.ShowAsync(point);
} 
```

# c++ - 带有 AMD 驱动程序的 glGetUniformLocation 中可能存在的错误

> ID：10277620
> 
> 赞同：1
> 
> 时间：2012-04-23T09:05:30.903
> 
> 标签：c++, opengl, driver, glsl

使用 Radeon 3870HD，我遇到了 AMD 驱动程序的奇怪行为（昨天更新为可用的最新版本）。

首先，我想指出整个代码在 NVIDIA GeForce 540M 上运行没有问题，并且 glGetUniformLocation 并非一直失败。

所以我的问题是我在应用程序中使用的一个着色器程序从 glGetUniformLocation 获得了奇怪的值，而另一个着色器程序没有这样的缺陷。我在帧之间切换着色器，所以我确定它不是临时的并且与那个着色器有关。我所说的奇怪值是指 17-26，而我只有 9 件制服。我将我的接口用于着色器，然后用刚刚获得的变量查询 GLSL 变量的类型，作为副作用，我还查询了它的名称。对于我返回的所有这 17-26 个位置，名称未设置且类型相同。现在我有了调试接口的想法，该接口是单独的库，并将这些值更改为我期望的值：0-8。使用调试器我更改了这些，实际上它们在该着色器中返回了正确的变量名，并且类型也是正确的。

我的问题是，始终与 NVIDIA 以及 Radeon 上的其他着色器一起工作的代码，对于另一个以相同方式处理的着色器，怎么可能会失败？

我为此包括了接口的相关部分：

```
//this fails to return correct value
m_location = glGetUniformLocation(m_program.getGlID(), m_name.c_str());

printGLError();
if(m_location == -1){
    std::cerr << "ERROR: Uniform " << m_name <<  " doesn't exist in program" << std::endl;
    return FAILURE;
}

GLsizei charSize = m_name.size()+1, size = 0, length = 0;
GLenum type = 0;
GLchar* name = new GLchar[charSize];
name[charSize-1] = '\0';
glGetActiveUniform(m_program.getGlID(), m_location, charSize, &length, &size, &type, name); 

delete name; name = 0;

if(!TypeResolver::resolve(type, m_type))
    return FAILURE;

m_prepared = true;
m_applied = false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:20:23.833

您传递给的索引[`glGetActiveUniform`](http://www.opengl.org/wiki/GLAPI/glGetActiveUniform)不*应该*是一个统一的位置。统一位置*仅*用于[`glUniform`](http://www.opengl.org/wiki/GLAPI/glUniform)呼叫；没有其他的。

您传递给`glGetActiveUniform`的索引只是一个介于 0 和返回的值之间的索引[`glGetProgram(GL_ACTIVE_UNIFORMS)`](http://www.opengl.org/wiki/GLAPI/glGetProgram)。它用于询问存在哪些制服并检查这些制服的属性。

您的代码在 NVIDIA 上运行只是因为您很幸运。OpenGL 规范不保证统一位置的顺序与活动统一索引的顺序相同。AMD 的驱动程序不能那样工作，所以你的代码不能工作。

# c# - 如何在gridView中显示某行的上下文菜单

> ID：10277624
> 
> 赞同：2
> 
> 时间：2012-04-23T09:05:49.180
> 
> 标签：c#, javascript, jquery, asp.net, gridview

我有一个绑定到数据表的gridview。我想为有条件的行添加上下文。`RowDataBound`我在事件中使用此代码：

```
if (e.Row.Enabled == true && e.Row.Cells[6].Enabled == true)
        {
            e.Row.CssClass = "HasMenu";
        } 
```

现在我编写此代码以在网格上显示上下文菜单：

```
$(document).ready(function () {

        $('#menu').click(function () {
            $('#menu').hide();
        });
        $(document).click(function () {
            $('#menu').hide();
        });

        $("#" + '<%= GridView1.ClientID %>').bind("contextmenu", function (e) {
            $('#menu').css({
                top: e.pageY + 'px',
                left: e.pageX + 'px'
            }).show();

            return false;

        });
    }); 
```

问题是我没有在没有css类的行上显示任何上下文菜单（不是资源管理器上下文菜单，也不是我的自定义上下文菜单），而是`HasMenu`为有css类的行显示上下文菜单`HasMenu`。我的脚本需要什么更改？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:09:43.593

现在，您正在收听`contextmenu`整个 gridview 的事件：

```
$("#" + '<%= GridView1.ClientID %>') 
```

您需要将其更改为单个行：

```
$('#" + '<%= GridView1.ClientID %> rowselector.HasMenu') 
```

`rowselector`然而，在您的标记中定义的行在哪里。

例如，如果一行是 a`<TR>`那么你会写

```
$("#" + '<%= GridView1.ClientID %> tr.HasMenu') 
```

否则，如果行是子`<DIV>`元素，您可能需要编写类似的内容

```
$("#" + '<%= GridView1.ClientID %> > div.HasMenu') 
```

请注意，您正在连接两个纯字符串，不涉及 JavaScript 变量。你不妨写：

```
$('#<%= GridView1.ClientID %> rowselector.HasMenu') 
```

# java - 在 Web 应用程序中初始化 spring 和 hibernate

> ID：10277625
> 
> 赞同：1
> 
> 时间：2012-04-23T09:05:53.970
> 
> 标签：java, spring, hibernate, jsp, web-applications

我要开发一个Web应用程序，我想使用hibernate + spring。在独立应用程序中，为了初始化 hibernate 或 spring，我们将调用工厂对象等。我的意思是创建第一个 spring 或 hibernate bean 是主要功能。

但是在基于jsp+servlet和其他bean的web应用程序中，我不知道谁负责准备spring或hibernate。解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:15:58.733

我认为上下文侦听器。在 web.xml 中

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:18:20.227

If you're developing an application based on JSP + servlets (does not matter if you actually use Spring MVC), you should configure a dataSource bean and a SessionFactory bean in your Spring configuration file. Then, from within your application, you could autowire SessionFactory where it is needed, and use it to open new sessions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:26:22.447

在一般的 web 应用程序中，`servlet`容器将加载一个名为 web.xml 的文件，您可以在其中启动 web 应用程序所需的配置文件，在您的情况下，spring 和 hibernate 配置文件位于`context-param`和`listener`部分。
您应该在 Spring 配置文件中配置`dataSource`和`SessionFactory`beans。
然后，从您的 java 类中，您应该`autowire`在需要它们的地方使用 bean。

# c++ - 在 python 中使用自定义 C++ 扩展

> ID：10277627
> 
> 赞同：1
> 
> 时间：2012-04-23T09:06:08.557
> 
> 标签：c++, python

我对这段代码有疑问：

```
#include "PolyVoxCore/MaterialDensityPair.h"
#include "PolyVoxCore/CubicSurfaceExtractorWithNormals.h"
#include "PolyVoxCore/SurfaceMesh.h"
#include "PolyVoxCore/SimpleVolume.h"

#include "geomVertexData.h"
#include "geomVertexWriter.h"
#include "geomTriangles.h"
#include "py_panda.h"
#include "pandaNode.h"
#include "geomNode.h"

//Use the PolyVox namespace
using namespace PolyVox;
using namespace std;

static void createSphereInVolume(SimpleVolume<MaterialDensityPair44>& volData, float fRadius)
{
        //This vector hold the position of the center of the volume
        Vector3DFloat v3dVolCenter(volData.getWidth() / 2, volData.getHeight() / 2, volData.getDepth() / 2);

        //This three-level for loop iterates over every voxel in the volume
        for (int z = 0; z < volData.getWidth(); z++)
        {
                for (int y = 0; y < volData.getHeight(); y++)
                {
                        for (int x = 0; x < volData.getDepth(); x++)
                        {
                                //Store our current position as a vector...
                                Vector3DFloat v3dCurrentPos(x,y,z);    
                                //And compute how far the current position is from the center of the volume
                                float fDistToCenter = (v3dCurrentPos - v3dVolCenter).length();

                                uint8_t uDensity = 0;
                                uint8_t uMaterial = 0;

                                //If the current voxel is less than 'radius' units from the center then we make it solid.
                                if(fDistToCenter <= fRadius)
                                {
                                        //Our new density value
                                        uDensity = VoxelTypeTraits<MaterialDensityPair44>::maxDensity();
                                        uMaterial = 1;
                                }

                                //Get the old voxel
                                MaterialDensityPair44 voxel = volData.getVoxelAt(x,y,z);

                                //Modify the density and material
                                voxel.setDensity(uDensity);
                                voxel.setMaterial(uMaterial);

                                //Write the voxel value into the volume
                                volData.setVoxelAt(x, y, z, voxel);
                        }
                }
        }
}

static PyObject* CreateSphere(PyObject* self, PyObject* args)
{
        PyObject* pandaNodeWrapper;
        if (!PyArg_ParseTuple(args, "0", &pandaNodeWrapper))
                return NULL;

        //Create an empty volume and then place a sphere in it
        SimpleVolume<MaterialDensityPair44> volData(PolyVox::Region(Vector3DInt32(0,0,0), Vector3DInt32(63, 63, 63)));
        createSphereInVolume(volData, 30);

        //Extract the surface
        SurfaceMesh<PositionMaterialNormal> mesh;
        CubicSurfaceExtractorWithNormals<SimpleVolume, MaterialDensityPair44 > surfaceExtractor(&volData, volData.getEnclosingRegion(), &mesh);
        surfaceExtractor.execute();
        const vector<PositionMaterialNormal>& vertices = mesh.getVertices();
        const vector<uint32_t>& indices = mesh.getIndices();

        CPT(GeomVertexFormat) vertexFormat = GeomVertexFormat::get_v3n3();
        PT(GeomVertexData) vertexData = new GeomVertexData("ProceduralMesh", vertexFormat, GeomEnums::UH_static);

        GeomVertexWriter vertex, normal;

        vertex = GeomVertexWriter(vertexData, "vertex");
        normal = GeomVertexWriter(vertexData, "normal");

        for(vector<PositionMaterialNormal>::const_iterator it = vertices.begin(); it != vertices.end(); ++it)
        {
                vertex.add_data3f(it->position.getX(), it->position.getY(), it->position.getZ());
                normal.add_data3f(it->normal.getX(), it->position.getY(), it->position.getZ());
        }

        PT(GeomTriangles) chunk = new GeomTriangles(GeomEnums::UH_static);

        for(int i = 0; i < indices.size(); ++i)
        {
                chunk->add_vertex(indices[i]);
        }

        PT(Geom) geom = new Geom(vertexData);
        geom->add_primitive(chunk);

        PT(GeomNode) geomNode = new GeomNode("chunk");

        PandaNode* node = ((PandaNode*)((Dtool_PyInstDef*)pandaNodeWrapper)->_ptr_to_object);
        node->add_child(geomNode);

        Py_RETURN_NONE;
}

static PyMethodDef module_methods[] = {
        {"CreateSphere", CreateSphere, METH_VARARGS, "CreateSphere"},
        {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC
initpolyvox(void)
{
        (void) Py_InitModule("polyvox", module_methods);
} 
```

这是我正在尝试编写的 C++ 扩展模块，我使用 setup.py 方法编译并安装它，问题是当我在 python 中导入并运行它时，python 说“SystemError：动态模块未正确初始化”。

我知道这个错误应该是模块名和init函数名不对应，但是看代码就不是这样了。那么可能是什么问题呢？

我在 Windows 7 上，使用 python 2.7.2，该模块是在 VS2008 上编译的，但它需要一些 .lib 我必须用 vs2010 编译，因为需要一些现代 c++ 功能。

# java - 对象数组到输入流

> ID：10277628
> 
> 赞同：-2
> 
> 时间：2012-04-23T09:06:08.773
> 
> 标签：java, inputstream

我有一组人员类

```
Class Person
{} 
```

谁能帮我将`Person[]`数组转换为输入流或字节流？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:25:18.117

为了能够将您的对象写入（序列化）到流中，您的类应该实现 [Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口。在大多数情况下，除了在类定义中添加“implements Serializable”子句之外，您不需要做任何事情：

```
class Person implements Serializable {
// your class's fields and methods
} 
```

然后，当然，您不是写入*输入*流，而是写入*输出*流：

```
Person p = new Person();
// some more code here...
OutputStream os = new FileOutputStream("persons.txt"); // open file as a stream
os.write(person); // write person object to the stream
os.close(); // close the stream 
```

要转换为字节数组，您仍然必须使用序列化：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
baos.write(person);
byte[] bytes = baos.toByteArray(); 
```

# sql - 从发布者复制快照文件，粘贴并应用到 SQL 合并复制中的订阅者

> ID：10277629
> 
> 赞同：0
> 
> 时间：2012-04-23T09:06:09.153
> 
> 标签：sql, sql-server, sql-server-2008, replication, merge-replication

我阅读了一篇关于将事务复制的快照文件从发布者复制到订阅者并将它们应用到订阅者的优秀文章。

[http://blogs.msdn.com/b/repltalk/archive/2010/03/07/tips-to-improve-performance-when-applying-snapshot-in-transactional-replication.aspx](http://blogs.msdn.com/b/repltalk/archive/2010/03/07/tips-to-improve-performance-when-applying-snapshot-in-transactional-replication.aspx)

但是本文的重点是针对事务复制。

我想知道我们如何从发布者复制快照，将它们粘贴到订阅者并将它们应用到订阅者。我正在使用带有推送订阅者的合并复制，分发者和发布者在同一台服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:20:32.623

是的 - 通过 Merge，我们可以将快照文件复制到订阅服务器并使用[Merge Agent **-AltSnapshotFolder**参数](http://msdn.microsoft.com/en-us/library/ms147839.aspx)在本地应用快照。

# jquery - Microsoft JScript 运行时错误：对象不支持属性或方法“对话框”

> ID：10277630
> 
> 赞同：5
> 
> 时间：2012-04-23T09:06:14.863
> 
> 标签：jquery, jquery-dialog

我正在使用 .ascx 用户控件来填充员工数据和员工图片。在单击员工图片时，我想显示一个对话框，其中我希望有一个文本字段和一个文本框供用户输入。Click 事件触发良好，但通过对话框它给了我“Microsoft JScript 运行时错误：对象不支持属性或方法'对话框'”的错误。请任何人帮助我用文本字段和文本框填充对话框。我对 JQUERY 真的很陌生，并且努力让它发挥作用。

在下面的代码片段中，我添加了一个来自我在网上找到的示例之一的对话框代码。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="OpenAccessDataProvider,a4a794260c0b4440b466f75d11146db8.ascx.cs" Inherits="SitefinityWebApp.SfCtrlPresentation.OpenAccessDataProvider_a4a794260c0b4440b466f75d11146db8" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.PublicControls.BrowseAndEdit" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.ContentUI" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.Comments" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI.Fields" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="sf" Namespace="Telerik.Sitefinity.Web.UI" Assembly="Telerik.Sitefinity" %>
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>

<telerik:RadListView ID="dynamicContentListView" ItemPlaceholderID="ItemsContainer" runat="server" EnableEmbeddedSkins="false" EnableEmbeddedBaseStylesheet="false">
    <LayoutTemplate>
        <ul class="sfitemsList sfitemsListTitleDateTmb">
            <asp:PlaceHolder ID="ItemsContainer" runat="server" />
        </ul>
    </LayoutTemplate>

        <ItemTemplate>
      <li class="sfitem sfClearfix">
            <h2 class="sfitemTitle">
                <sf:DetailsViewHyperLink ID="DetailsViewHyperLink" TextDataField="Title" runat="server" />
            </h2>
           <sf:AssetsField ID="AssetsField1" runat="server" DataFieldName="Picture" />
           <sf:SitefinityLabel ID="SitefinityLabel1" runat="server" Text='<%# Eval("Designation")%>'  WrapperTagName="div" HideIfNoText="true" CssClass="sfitemShortTxt" />           
          <sf:SitefinityLabel ID="SitefinityLabel2" runat="server" Text='<%# Eval("CompanyName")%>' WrapperTagName="div" HideIfNoText="true" CssClass="sfitemShortTxt" />
          <sf:AssetsField ID="AssetsField2" runat="server" DataFieldName="Documents"/>
      </li>
    </ItemTemplate>
</telerik:RadListView>

<sf:Pager id="pager" runat="server"></sf:Pager>

<script type="text/javascript">
    $(document).ready(function () {
        $(".sfClearfix .sfimageWrp img").click(function () {

//            $(document).ready(function () {
                var $dialog = $('<div></div>')
        .html('This dialog will show every time!')
        .dialog({
            autoOpen: false,
            title: 'Basic Dialog'
        });

                $('#opener').click(function () {
                    $dialog.dialog('open');
                    // prevent the default action, e.g., following a link
                    return false;
                });
//            });

            //alert("HEY THERE " + $(this).attr("src")); 
        });
    });
</script>

Regards. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T14:57:21.127

明白了，伙计们。刚刚添加了一个用于对话框的 div，而不是从图片单击刚刚调用的 div。另外，添加了一个 JQuery.noConflict(); 以防止 Sitefinity 和 JQuery 库之间的任何冲突。以下是代码片段

```
<div class="dialogTest"> <br />
<br />
Please enter your email address: <input type="text" name="emailAddress" style="width:300px;" /><br /><br />

<asp:TextBox ID="txtBox" runat="server"></asp:TextBox> <br/>
<asp:Button ID="Button1" runat="server" Text="Button" CausesValidation="False" 
        onclick="Button1_Click" />
</div>

<script type="text/javascript">
$j = jQuery.noConflict();
$j(document).ready(function () {
    $j(".sfClearfix .sfimageWrp img").click(function () {
        $j(".dialogTest").addClass("open");
        //return $j(this).attr("src");
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:40:12.263

在我的情况下，jquery 文件没有正确加载。所以我所做的是：1）在 Chrome 上打开页面 2）从菜单中选择开发人员工具或 Ctrl+Shift+I 3）单击网络以查看全部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:47:52.070

我遇到过同样的问题。问题是我已经加载了 2 个 Jquery 文件。jquery-1.8.3.js 和 jquery-1.4.1.js 。所以发生了冲突。删除 jquery-1.4.1.js 文件后。它工作顺利。

# asp.net - 在 .NET2 站点下运行 IIS .NET4 应用程序

> ID：10277638
> 
> 赞同：2
> 
> 时间：2012-04-23T09:06:40.663
> 
> 标签：asp.net, .net, iis-7.5, windows-server-2008-r2

是否可以在 .NET 2 站点下托管 .NET 4 应用程序？

出于多种原因，我们必须在 .NET 3.5 上运行主站点，但是有一个用实体框架 4 编写的应用程序，它托管在相同的域/端口下。

当我尝试在站点下添加应用程序（使用不同的 .net 4.0 应用程序池）时，我收到一条错误消息，指出 web.config 中的内容重复。我已经在网上搜索了修复程序，但似乎没有一个对我有用。

我正在运行带有 IIS7.5 的 Windows Server 2008 R2

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:38:55.713

可以修复，如果你仔细阅读微软的文档，

[http://msdn.microsoft.com/en-us/library/a99txfy5.aspx](http://msdn.microsoft.com/en-us/library/a99txfy5.aspx)

和

[http://www.asp.net/whitepapers/aspnet4/break-changes#0.1__Toc256770150](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770150)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:12:29.457

不，那是不可能的。针对 .NET 4.0 编译的程序集必须在 CLR 4.0 中运行。反之亦然：在 CLR 4.0 中运行针对 .NET 2.0 编译的程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:11:57.803

不，嵌套应用程序将无法设置单独的框架版本。我建议将主站点上的版本更改为 v4。我不认为您应该在版本 4 上运行 3.5 应用程序时遇到问题。您在 3.5 中运行它的原因是什么？

# excel - 从不同的工作表中获取列数据并将其作为 MainSheet 中的行数据

> ID：10277643
> 
> 赞同：2
> 
> 时间：2012-04-23T09:06:51.937
> 
> 标签：excel, vba

以下是从每个工作表的最后一列获取数据并将其显示在工作表“MainSheet”中的代码。由于最后一列已合并单元格，此代码还删除了中间的单元格此代码将数据显示为 MainSheet 中的垂直视图，我想让它水平，即应将每张表最后一列的数据提取到应注意 MainSheet 以及合并的单元格

```
Sub CopyLastColumns()
    Dim cnt As Integer, sht As Worksheet, mainsht As Worksheet, col As Integer, rw As Integer
    ActiveSheet.Name = "MainSheet"
    Set mainsht = Worksheets("MainSheet")

    cnt = 1
    For Each sht In Worksheets
        If sht.Name <> "MainSheet" Then
            sht.Columns(sht.Range("A1").CurrentRegion.Columns.Count).Copy
            mainsht.Columns(cnt).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False

            mainsht.Cells(150, cnt) = sht.Range("A2")
            cnt = cnt + 1
        End If
    Next sht

    With mainsht
        For col = 1 To cnt
            For rw = .Cells(65536, col).End(xlUp).row To 1 Step -1
                If .Cells(rw, col) = "" Then
                    .Cells(rw, col).Delete Shift:=xlUp
                End If
            Next rw
        Next col
    End With
End Sub 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:34:54.563

此代码复制每个工作表的最后一列并将它们粘贴为行以`MainSheet`保持合并单元格的完整性。

```
Option Explicit

Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim wsOLrow As Long, wsILrow As Long, wsILcol As Long

    On Error GoTo Whoa

    Application.ScreenUpdating = False

    Set wsO = Sheets("MainSheet")

    wsOLrow = wsO.Cells.Find(What:="*", _
              After:=wsO.Range("A1"), _
              Lookat:=xlPart, _
              LookIn:=xlFormulas, _
              SearchOrder:=xlByRows, _
              SearchDirection:=xlPrevious, _
              MatchCase:=False).Row + 1

    For Each wsI In ThisWorkbook.Sheets
        If wsI.Name <> wsO.Name Then
            With wsI
                wsILrow = .Cells.Find(What:="*", _
                          After:=.Range("A1"), _
                          Lookat:=xlPart, _
                          LookIn:=xlFormulas, _
                          SearchOrder:=xlByRows, _
                          SearchDirection:=xlPrevious, _
                          MatchCase:=False).Row

                wsILcol = .Cells.Find(What:="*", _
                          After:=.Range("A1"), _
                          Lookat:=xlPart, _
                          LookIn:=xlFormulas, _
                          SearchOrder:=xlByColumns, _
                          SearchDirection:=xlPrevious, _
                          MatchCase:=False).Column

                .Range(Split(Cells(, wsILcol).Address, "$")(1) & "1:" & _
                Split(Cells(, wsILcol).Address, "$")(1) & _
                wsILrow).Copy .Range(Split(Cells(, wsILcol + 1).Address, "$")(1) & "1:" & _
                Split(Cells(, wsILcol + 1).Address, "$")(1) & wsILrow)

                .Activate

                With .Range(Split(Cells(, wsILcol + 1).Address, "$")(1) & "1:" & _
                Split(Cells(, wsILcol + 1).Address, "$")(1) & wsILrow)
                    .UnMerge

                    .Cells.SpecialCells(xlCellTypeBlanks).Delete shift:=xlUp
                End With

                wsILrow = .Range(Split(Cells(, wsILcol).Address, "$")(1) & Rows.Count).End(xlUp).Row

                With .Range(Split(Cells(, wsILcol + 1).Address, "$")(1) & "1:" & _
                Split(Cells(, wsILcol + 1).Address, "$")(1) & wsILrow)
                    .Copy

                    wsO.Cells(wsOLrow, 1).PasteSpecial Paste:=xlPasteAll, _
                    Operation:=xlNone, SkipBlanks:=False, Transpose:=True

                    .Delete
                End With

                wsOLrow = wsOLrow + 1
            End With
        End If
    Next

LetsContinue:
    Application.ScreenUpdating = True
    MsgBox "Done"
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# android - Android 处理程序消息数据被下一条消息覆盖

> ID：10277648
> 
> 赞同：0
> 
> 时间：2012-04-23T09:07:21.963
> 
> 标签：android, handler

Android处理程序消息数据被下一条消息覆盖。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:11:34.503

```
public void handleMessage(Message msg) {
   switch (msg.what)
   {

   }
} 
```

# c# - C# XNA 发布的游戏无法运行并获取安装位置

> ID：10277651
> 
> 赞同：0
> 
> 时间：2012-04-23T09:07:35.810
> 
> 标签：c#, xna, admin, publish, installation-path

我一直在尝试为我的游戏创建我的第一个错误日志，但遇到了一些问题。首先，我尝试使用以下命令创建一个文本文件：

```
errorLog = new StreamWriter("c:\\ErrorLog.txt", true); 
```

但是我只能在安装游戏后通过 Setup.exe 运行游戏，因为它是我可以分配管理员权限的唯一可执行文件，游戏快捷方式没有该选项。每当我尝试从其他地方运行游戏时，我都会得到“程序已停止响应”。

我的第二个问题是在我想要的位置创建文本文件，我想在安装游戏的位置创建它，即“c:\Program Files (x86)\MyGame”。我尝试过使用几种不同的方法：

```
Environment.GetCommandLineArgs()[0];
Path.GetDirectoryName(baseDir);
Assembly.GetExecutingAssembly().Location; 
```

但是它们都在我本地的 AppData 中返回了一条巨大的路径。我不知道这是否会有所不同，但这是单击一次应用程序。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:18:51.430

This is because ClickOnce applications are installed under the profile of the user who installed them.

You can use `ApplicationDeployment.CurrentDeployment.DataDirectory` which is probably what you're looking for, or even better:

```
private string GetDataDirectory()
{
    if (ApplicationDeployment.IsNetworkDeployed)
        return ApplicationDeployment.CurrentDeployment.DataDirectory;
    else
        return Application.StartupPath;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:10:30.463

怎么样`Directory.GetCurrentDirectory()`？

# windows - 错误：在 Windows phone7 模拟器中

> ID：10277657
> 
> 赞同：0
> 
> 时间：2012-04-23T09:08:02.040
> 
> 标签：windows, windows-phone-7, windows-phone-7.1, windows-phone-7-emulator

突然，当我开始运行 windows phone7 模拟器时，它开始给我以下错误，我在下面的屏幕截图中显示。它以前可以正常工作，也没有更改任何设置。我正在使用为电话开发（IDE）引入的 VisualStudio Express 2010 版本。我重新启动机器并再次检查，但还没有任何区别。有没有人以前遇到过同样的问题。

谢谢...

![在此处输入图像描述](../Images/067e5f2db4a6f8bdedebced2100bf4a4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:14:07.253

其他人也有同样的问题；）您必须删除文件。[在 windows phone 7 Mango RC 这个线程错误启动模拟器中](https://stackoverflow.com/questions/7165329/error-launching-emulator-of-the-windows-phone-7-mango-rc)也有解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:11:57.803

就像消息说的那样，只需删除文件（或重命名，以防万一！），问题就会消失！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T07:43:36.850

去运行并在下面输入

c:\ProgramData\Microsoft\Xda

单击进入 ant 删除文件（哪个 guid 错误在错误消息中给出）。

之后它的工作正常。

# java - 如何处理检票口中的异常

> ID：10277663
> 
> 赞同：0
> 
> 时间：2012-04-23T09:08:56.643
> 
> 标签：java, wicket

我的代码：

```
try {
    LinkedDataForm form = webService.process(searchForm, path);
    add(new ExternalLink("url", form.getUrl(), form.getUrl()));

} catch (Exception e) {
    add(new Label("error", e.getMessage()));
} 
```

在哪里：

```
@SpringBean(name = "webService")
WebService webService; 
```

我的html页面看起来像：

```
<a wicket:id="url">url</a>
<p wicket:id="error"/> 
```

问题出在我有 url 或错误的 html 页面中，然后检票口返回异常： `Unable to find component with id 'error' in ...` 我该如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:38:07.070

问题在于只有在出现异常时才添加错误标签。快速而肮脏的方法是`EmptyPanel("error");`在 try 块的最后一行添加一个。

`error(e.getMessage());`更好的方法是使用 wickets FeedbackPanel，而不是在 catch 块中添加带有异常消息的标签。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T09:44:41.200

Wicket 有一些强大的机制来处理异常（由于某些严重故障）和错误（由于用户输入错误）。

我建议查看[wicket wiki](https://cwiki.apache.org/WICKET/error-pages-and-feedback-messages.html)或一些有关[wicket 中反馈消息的](http://www.google.de/search?client=safari&rls=en&q=wicket%20feedback%20message)示例。

# c# - DotNetOpenAuth 谷歌 openid 证书问题

> ID：10277664
> 
> 赞同：1
> 
> 时间：2012-04-23T09:09:02.210
> 
> 标签：c#, openid, certificate, dotnetopenauth

我正在使用 dotnetopenauth 通过 openid 对用户进行身份验证。这对于拥有 myid.net 或 myopenid.com 等“标准”提供商的人来说很好用

但是，当一个人使用 google openid url 进行身份验证时，事情变得很奇怪。他们可以正常登录，但是当他们注销并尝试再次登录时，会发生异常，提示“找不到端点”。

仔细查看日志会发现：

```
An operation failed because the following certificate has validation errors:\n\nSubject Name: CN=www.google.com, O=Google Inc, L=Mountain View, S=California, C=US\nIssuer Name: CN=Thawte SGC CA, O=Thawte Consulting (Pty) Ltd., C=ZA\nThumbprint: C1956DC8A7DFB2A5A56934DA09778E3A11023358\n\nErrors:\n\n The root of the certificate chain is not a trusted root authority.. 
```

半小时左右后，它会再次工作。

关于如何解决它的任何想法？

# android - Android 编辑器 使用 Eclipse Link XML 视图来编辑代码和查看图形？

> ID：10277668
> 
> 赞同：0
> 
> 时间：2012-04-23T09:09:31.847
> 
> 标签：android, eclipse

嗨，我目前正在使用 Eclipse，我不确定是否有插件或我可以使用的更好的软件。Java 方面似乎很好 我遇到的问题是 XML 编辑，字符的排列非常不一致，在编辑我的布局时，我打开了一个图形视图和一个代码视图，但两者没有链接，所以如果我双击一个元素，它会在该窗格中从图形视图切换到代码视图。如果我可以链接两个打开的窗格会很棒吗？

请查看我想要的结果的屏幕截图。![在此处输入图像描述](../Images/fee6b34d2a1fbf1b19bf515b6c989993.png)

*我知道这个问题可以被视为基于讨论，但我只是在这里寻找解决方案。我展示的示例非常简单，但是一些 xml 文件变得非常庞大和复杂，因此找到解决方案对我来说变得越来越重要。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:18:21.297

您可以使用[DroidDraw](http://www.droiddraw.org/)进行 ui 设计。虽然它有点错误，但如果你使用它，至少你不需要编辑原始 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:11:04.653

我现在正在使用 Android eclipse Juno 开发工具包，虽然我仍然没有可用的双窗口，但双击选择正在工作。还有一个显示布局的大纲窗格，虽然令人讨厌的是这并不能很好地显示评论。

# ios - 如果未选中任何单元格，则禁用“下一步”按钮

> ID：10277671
> 
> 赞同：0
> 
> 时间：2012-04-23T09:09:53.997
> 
> 标签：ios, xcode, core-data, didselectrowatindexpath

感谢您的帮助！

我像那样更改了 Viewdidload，现在它对我来说工作正常！我正在获取位置并使用谓词来同步检查和按钮的状态

```
 - (void)viewDidLoad
  {
    [super viewDidLoad];
    app = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [app managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Standort" inManagedObjectContext:context];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ortcheck CONTAINS YES"];
    [request setPredicate:predicate];
    [request setEntity:entity];

    NSError *error = nil;
    NSArray *events = [context executeFetchRequest:request error:&error];    
    int i = events.count;

    if (i == 0) {

        myWeiter = [[UIBarButtonItem alloc] initWithTitle:@"Weiter" style:UIBarButtonItemStyleBordered target:self action:@selector(nextPressed:)];

        self.navigationItem.rightBarButtonItem = myWeiter;

         self.navigationItem.rightBarButtonItem.enabled = NO;
    }
    else {
        myWeiter = [[UIBarButtonItem alloc] initWithTitle:@"Weiter" style:UIBarButtonItemStyleBordered target:self action:@selector(nextPressed:)];

        self.navigationItem.rightBarButtonItem = myWeiter;

        self.navigationItem.rightBarButtonItem.enabled = YES;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:15:17.810

添加一个检查计数器作为实例成员，并将其初始化为 0，在每次检查时增加它，并在每次取消检查时减少它，每次检查后设置按钮：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // snip

    //if (cell.checkButton.hidden==YES){
    //    cell.checkButton.hidden=NO;
    //}else {
    //    cell.checkButton.hidden=YES;
    //}
    BOOL state = !cell.checkButton.hidden;
    cell.checkButton.hidden=state; // simpler
    self.counter += (state) ? 1 : -1;
    [nextButton setEnabled: counter > 0];

    // snap
} 
```

# caching - 如何确定实时或半实时数据的良好缓存时间

> ID：10277672
> 
> 赞同：0
> 
> 时间：2012-04-23T09:10:02.930
> 
> 标签：caching

我编写了很多从服务器轮询数据的 Web 应用程序。通常这些是实时更新的，或者至少是半实时的，但是生成数据通常需要一些时间，并且应该缓存以减少服务器压力。然而，我确实很难找到任何关于如何最好地设定合适的生活时间的好的指南，等等。有人有一些好的建议或经验法则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:34:37.993

使用您可以承受的最长持续时间作为您的 TTL。如果您负担得起十秒，请使用十秒 TTL。如果您负担得起一秒，请使用一秒 TTL。

也可以换个角度看问题：让单个异步服务器进程尽可能频繁地连续运行数据生成查询，并尽可能快地更新缓存。这种方法优雅地解决了缓存踩踏问题，并且您获得了“生成数据需要多长时间？”的有效且最佳的 TTL。

# php - php substr 被忽略

> ID：10277690
> 
> 赞同：-1
> 
> 时间：2012-04-23T09:11:40.707
> 
> 标签：php, mysql, virtuemart

我有一个与美德玛特电子商务相关的 PHP/mySQL 问题——我在 VM 论坛上问过，但响应速度很慢。

我正在使用此代码在产品页面中加载来自同一类别的产品，它运行良好，但是；

```
<?php   // find all the other products in this category
$q = "SELECT p.product_id, p.product_name, c.category_name, c.category_flypage
   FROM #__{vm}_product p,#__{vm}_product_category_xref pc, #__{vm}_category c
   WHERE p.product_publish='Y' AND pc.product_id = p.product_id AND pc.category_id = c.category_id AND c.category_id = '$category_id' AND p.product_id != '$product_id'
   ORDER BY p.product_name ";
$db = new ps_DB;
$db->query( $q );
if( $db->next_record() )  {
   echo 'Other products in the category "'.$db->f('category_name').'"<br />';
   $flypage = $db->f('category_flypage');
   $db->reset();
   while( $db->next_record() ) {
      ?><a href="<?php  $sess->purl(URL . "index.php?page=shop.product_details&flypage=$flypage&product_id=" . $db->f("product_id") . "&category_id=$category_id" ) ?>"><?php $db->p("product_name"); ?></a><br />
      <?php
   }
}
?> 
```

但是，我不能 substr 产品名称的输出，如果我把`<?php substr($db->p("product_name"), 0 12) ?>`substr 完全忽略并且整个名称仍然输出 - 任何人都知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:17:37.330

我怀疑`$db->p`直接打印名称，而不是返回它。您还缺少一个`echo`before `substr..`。代码应该如下所示：

```
<?php echo substr($db->f('product_name'), 0, 12) ?> 
```

在这里，我假设`$db->f`返回字段的值，考虑到它在其余代码中的使用方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:16:19.407

substr 不会向浏览器输出任何内容。输出（echo）调用可能隐藏在 $db 对象的方法 p 或 purl 中。

# html - Jquery 移动页脚中的问题

> ID：10277691
> 
> 赞同：0
> 
> 时间：2012-04-23T09:11:43.167
> 
> 标签：html, jquery-mobile

当我在页脚中使用超链接时，它看起来像一个按钮，但是当我运行它时，我希望它看起来像一个简单的 html 链接？什么是简单的解决方案？

```
<div data-role="footer" data-theme="c" style="text-align: center">
    <a href="index.html">about</a><span>|</span>
    <a href="index.html">T&C</a><span>|</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:09:39.883

jQuery 自动增强链接。一种简单的解决方法是将 a 添加`data-role="none"`到锚标签，即：

```
<div data-role="footer" data-theme="c" style="text-align: center">
        <a href="index.html" data-role="none">about</a><span>|</span>
        <a href="index.html" data-role="none">T&C</a><span>|</span>
</div> 
```

有关演示，请参阅此[jsFiddle](http://jsfiddle.net/3GMCe/)。

# android - 恢复到 SurfaceView 显示黑屏

> ID：10277694
> 
> 赞同：3
> 
> 时间：2012-04-23T09:11:56.443
> 
> 标签：android, surfaceview

一切都很好，当我开始我的应用程序时。但是当我进行下一个活动并返回 SurfaceView 时，它看起来像`black`. 当我调试时，我可以看到需要在画布上绘制的线条正在运行，但什么也没有出现。
这是我的代码：

```
public class DrawView extends SurfaceView implements Runnable
{

    Thread thread = null;
    SurfaceHolder holder;
    Bitmap background;
    Canvas canvas;
    Matrix matrixUP = new Matrix();
    Matrix matrixDOWN = new Matrix();
    boolean ok = false;

    public DrawView(Context context) 
    {
        super(context);
        holder = getHolder();
    }

    public void run() 
    {
        while(ok)
        {
            if(!holder.getSurface().isValid())
            {
                continue;
            }
            watch_hand = Bitmap.createScaledBitmap(watch_hand, width/4, height/6, false);
            watch_hand_down = Bitmap.createScaledBitmap(watch_hand_down, width/4, height/6, false);
            background = BitmapFactory.decodeResource(getResources(), R.drawable.needles);
            background = Bitmap.createScaledBitmap(background, width, height/2+20, false);
            canvas = holder.lockCanvas();
            matrixUP.setTranslate(CENTER_X - watch_hand.getWidth()/2, height/4 - watch_hand.getHeight() - 40);
            matrixUP.preRotate((float) degreUP , watch_hand.getWidth()/2 , watch_hand.getHeight()-10);

            matrixDOWN.setTranslate(CENTER_X - watch_hand_down.getWidth()/2, height/2 - watch_hand_down.getHeight() - 20);
            matrixDOWN.preRotate((float) degreDOWN , watch_hand_down.getWidth()/2 , 10);

            canvas.drawARGB(255, 255, 255, 255);
            canvas.drawBitmap(background, 0, 0, null);
            canvas.drawBitmap(watch_hand, matrixUP, null);
            canvas.drawBitmap(watch_hand_down, matrixDOWN, null);
            holder.unlockCanvasAndPost(canvas);
        }           
    }

    public void pause()
    {
        ok = false;
        while(true)
        {
            try
            {
                thread.join();
            }catch (InterruptedException e)
            {
                e.printStackTrace();
            }
            break;
        }
        thread = null;
    }

    public void resume()
    {
        ok = true;
        thread = new Thread(this);
        thread.start();
    }           
} 
```

如您所见，我正在使用恢复和暂停功能。它们是从 onCreate 调用的。为什么会发生这种情况，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:29:59.603

答案取决于您如何更改为其他活动。

基本上，您必须考虑在活动暂停、停止或销毁时如何存储表面的当前状态。

例如，您可以在活动中重载 onSaveInstanceState 以保存 degreUP 和 degreDOWN（顺便说一下，它们未在当前代码片段中定义）。并在 onRestoreInstanceState 中恢复它们。请参阅[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:23:22.000

从存在表面视图的活动的 onResume() 和 onPause() 方法调用表面视图（在您的情况下为 DrawView）的 resume() 和 pause() 方法。你提到你是从 onCreate() 调用的。

这应该可以解决问题。

# c++ - VStudio C++ 的类似 Eclipse 的注释栏

> ID：10277704
> 
> 赞同：1
> 
> 时间：2012-04-23T09:12:47.550
> 
> 标签：c++, eclipse, visual-studio-2010

我已经使用 Eclipse 很长时间了，我已经习惯了它的一些特性。

Eclipse 注释栏，编辑器右侧的小栏，其中所有出现的选定项目和所有错误都用细小的线（灰色、红色等）标记，在大型代码中对我非常有用。

我们是否有任何 VStudio 插件可以在 C++ 编辑器中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:53:14.740

似乎“Microsoft Productivity Power Tools”是 Visual Studio 2010 的唯一可用选项。

[微软生产力工具](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)

# objective-c - 控制 MapKit 引脚注释抽头选择

> ID：10277705
> 
> 赞同：1
> 
> 时间：2012-04-23T09:12:55.830
> 
> 标签：objective-c, ios, mapkit, segue

我正在尝试捕获 MapKit pin tap selection selection 以执行对该位置的详细视图的 segue，我在注释 pin 中有一个属性：

```
#import <MapKit/MapKit.h>

@interface alrededorLocation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
    NSDictionary *additionalInfo;
} 
```

但我无法捕获引脚选择来执行 segue，我尝试控制它`- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view`

但我没有成功获得选定的引脚参考。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:05:24.940

如果有人偶然发现这个问题，答案是访问`annotation`. `MKAnnotationView`对于这种特定情况，有效的代码是：

```
AlrededorLocation *tempLocation = (AlderorLocation *)view.annotation;
[self performSegueWithIdentifier:@"detalle" sender:tempLocation]; 
```

# android - 使用 Mupdf 库进行 pdfrenderer 不起作用

> ID：10277706
> 
> 赞同：3
> 
> 时间：2012-04-23T09:13:04.277
> 
> 标签：android, android-ndk, cygwin, mupdf, pdfrenderer

我一直在研究 MuPdf 库，在创建 libmupdf.so 文件并使用 Cygwin 和 android-ndk 之后，我终于能够将它安装在我的设备上。但是我仍然面临一个问题...安装在设备上的应用程序，我得到了我已经在我的设备上安装的各种 pdf 的列表，我点击任何人，但不是在查看器上渲染和显示，而是尝试渲染，然后我又得到了pdf列表，而没有让我的pdf查看。

任何想法，出了什么问题....

```
04-23 14:44:36.741: D/dalvikvm(11539): Debugger has detached; object registry had 1 entries
04-23 14:44:47.411: I/System.out(11539): Trying to open /mnt/sdcard/Download/BecomeAnXcoder.pdf
04-23 14:44:47.411: D/dalvikvm(11539): Trying to load lib /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051ebc8
04-23 14:44:47.411: D/dalvikvm(11539): Added shared lib /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051ebc8
04-23 14:44:47.411: D/dalvikvm(11539): No JNI_OnLoad found in /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051ebc8, skipping init
04-23 14:44:47.421: E/libmupdf(11539): Opening document...
04-23 14:44:47.421: E/libmupdf(11539): Done!
04-23 14:44:47.451: I/[POST_RESELECT](11539): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@40103c78,-1,0,-1,0)
04-23 14:44:47.451: I/[POST_RESELECT](11539): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4013faa8,-1,0,-1,0)
04-23 14:44:47.451: I/[POST_RESELECT](11539): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@40103c78,-1,0,-1,0)
04-23 14:44:47.451: I/[POST_RESELECT](11539): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4013faa8,-1,0,-1,0)
04-23 14:44:47.621: E/libmupdf(11539): Goto page 0...
04-23 14:44:47.741: E/libmupdf(11539): PageWidth=1191
04-23 14:44:47.741: E/libmupdf(11539): PageHeight=1684
04-23 14:44:47.741: D/dalvikvm(11539): GC_EXTERNAL_ALLOC freed 133K, 48% free 2864K/5447K, external 0K/0K, paused 68ms
04-23 14:44:47.761: E/libmupdf(11539): Goto page 1...
04-23 14:44:47.871: E/libmupdf(11539): PageWidth=1191
04-23 14:44:47.871: E/libmupdf(11539): PageHeight=1684
04-23 14:44:47.871: D/dalvikvm(11539): GC_EXTERNAL_ALLOC freed 17K, 48% free 2849K/5447K, external 62K/574K, paused 96ms
04-23 14:44:47.901: E/libmupdf(11539): Goto page 0...
04-23 14:44:48.021: E/libmupdf(11539): PageWidth=1191
04-23 14:44:48.021: E/libmupdf(11539): PageHeight=1684
04-23 14:44:48.021: I/libmupdf(11539): In native method
04-23 14:44:48.021: D/dalvikvm(11539): GC_EXTERNAL_ALLOC freed 9K, 48% free 2852K/5447K, external 627K/1139K, paused 57ms
04-23 14:44:48.021: I/libmupdf(11539): Checking format
04-23 14:44:48.021: I/libmupdf(11539): locking pixels
04-23 14:44:48.021: E/libmupdf(11539): Rendering page=320x452 patch=[0,0,320,452]
04-23 14:44:50.951: W/KeyCharacterMap(11604): Can't open keycharmap file
04-23 14:44:50.951: W/KeyCharacterMap(11604): Error loading keycharmap file '/system/usr/keychars/cy8c-touchscreen.kcm.bin'. hw.keyboards.65537.devname='cy8c-touchscreen'
04-23 14:44:50.951: I/KeyCharacterMap(11604): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-23 14:45:28.941: D/dalvikvm(11675): GC_EXTERNAL_ALLOC freed 59K, 49% free 2765K/5379K, external 0K/0K, paused 54ms
04-23 14:45:37.901: I/System.out(11675): Trying to open /mnt/sdcard/Download/1430236051iOS5SDK.pdf
04-23 14:45:37.901: D/dalvikvm(11675): Trying to load lib /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051f240
04-23 14:45:37.911: D/dalvikvm(11675): Added shared lib /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051f240
04-23 14:45:37.911: D/dalvikvm(11675): No JNI_OnLoad found in /data/data/com.artifex.mupdf/lib/libmupdf.so 0x4051f240, skipping init
04-23 14:45:37.911: E/libmupdf(11675): Opening document...
04-23 14:45:37.941: E/libmupdf(11675): Done!
04-23 14:45:37.961: I/[POST_RESELECT](11675): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@40103c78,-1,0,-1,0)
04-23 14:45:37.961: I/[POST_RESELECT](11675): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4013faa8,-1,0,-1,0)
04-23 14:45:37.961: I/[POST_RESELECT](11675): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@40103c78,-1,0,-1,0)
04-23 14:45:37.971: I/[POST_RESELECT](11675): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4013faa8,-1,0,-1,0)
04-23 14:45:38.581: E/libmupdf(11675): Goto page 0...
04-23 14:45:38.581: E/libmupdf(11675): PageWidth=1230
04-23 14:45:38.601: E/libmupdf(11675): PageHeight=1514
04-23 14:45:38.601: E/libmupdf(11675): Goto page 1...
04-23 14:45:38.781: D/dalvikvm(11675): GC_EXTERNAL_ALLOC freed 59K, 47% free 2851K/5379K, external 91K/541K, paused 92ms
04-23 14:45:38.881: D/dalvikvm(11675): GC_EXTERNAL_ALLOC freed 5K, 48% free 2850K/5379K, external 583K/1095K, paused 86ms
04-23 14:45:38.991: E/libmupdf(11675): PageWidth=1082
04-23 14:45:38.991: E/libmupdf(11675): PageHeight=1332
04-23 14:45:38.991: E/libmupdf(11675): Goto page 0...
04-23 14:45:38.991: E/libmupdf(11675): PageWidth=1230
04-23 14:45:39.001: E/libmupdf(11675): PageHeight=1514
04-23 14:45:39.001: I/libmupdf(11675): In native method
04-23 14:45:39.001: I/libmupdf(11675): Checking format
04-23 14:45:39.001: I/libmupdf(11675): locking pixels
04-23 14:45:39.001: E/libmupdf(11675): Rendering page=320x393 patch=[0,0,320,393]
04-23 14:45:39.801: E/libmupdf(11675): Rendered
04-23 14:45:39.801: I/libmupdf(11675): In native method
04-23 14:45:39.801: I/libmupdf(11675): Checking format
04-23 14:45:39.801: I/libmupdf(11675): locking pixels
04-23 14:45:39.801: E/libmupdf(11675): Rendering page=320x455 patch=[0,0,320,455]
04-23 14:45:40.201: E/libmupdf(11675): Rendered
04-23 14:45:40.201: E/libmupdf(11675): Goto page 1...
04-23 14:45:40.201: E/libmupdf(11675): PageWidth=1082
04-23 14:45:40.231: E/libmupdf(11675): PageHeight=1332
04-23 14:45:40.231: I/libmupdf(11675): In native method
04-23 14:45:40.231: I/libmupdf(11675): Checking format
04-23 14:45:40.231: I/libmupdf(11675): locking pixels
04-23 14:45:40.231: E/libmupdf(11675): Rendering page=320x393 patch=[0,0,320,393] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:21:50.917

你是在模拟器上运行的吗？？？？如果是，则发布 logcat 输出...&您是否使用 muPdf 制作了自己的应用程序，因为只有 muPdf 无法呈现 PDF。

看到这个应用程序这些是免费的..

[机器人阅读器](http://code.google.com/p/droidreader/)

[APV](http://code.google.com/p/apv/)

试试这些

# ruby-on-rails - FreeBSD 9.0 上的 Rails 2.3.14/Rails 1.9.3p125 失败

> ID：10277707
> 
> 赞同：1
> 
> 时间：2012-04-23T09:13:04.950
> 
> 标签：ruby-on-rails

运行后我遇到了一个奇怪的错误

```
$ portmaster -a 
```

上个星期。它报告

```
method `xmlschema' not defined in Date
in /usr/local/lib/ruby/gems/1.9/gems/activesupport-2.3.14/lib/active_support/core_ext/date/conversions.rb line 26 method `remove_method'. 
```

我无法回滚，也不知道问题出在哪里。我已经尝试通过重新安装端口中的所有内容

```
$ portsnap fetch update
$ portmaster -Fa 
```

然后重新安装所有的宝石。不幸的是，错误仍然存​​在。大师能帮帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:31:33.857

当您编辑 ruby​​ 文件 conversions.rb 并注释掉以下行时，它似乎可以工作：

```
remove_method :xmlschema if base.instance_methods.include?(:xmlschema) 
```

# android - 如何在 Android 设备上运行 Linux 命令？

> ID：10277709
> 
> 赞同：10
> 
> 时间：2012-04-23T09:13:09.843
> 
> 标签：android, shell, adb

在某些 Android 设备上，在 ADB shell 中，我只能运行`echo`, `cd`, `ls`. 当我运行时：

```
tar -cvf //mnt/sdcard/BackUp1669/apk/test.tar /mnt/sdcard/test.apk 
```

或命令`cp`，它返回：

```
sh: tar: not found 
```

为什么我不能运行这些命令？一些设备支持这些命令。我的最终目标是将文件从*/data/data*文件夹复制到 SD 卡。我得到了*su*并得到了以下代码：

```
int timeout = 1000;
String command = "tar -cvf /" + Environment.getExternalStorageDirectory() + "/cp/"
        + packageName + ".tar" + " " + path;
DataOutputStream os = new DataOutputStream(process.getOutputStream());
BufferedReader is = new BufferedReader(new InputStreamReader(new DataInputStream(
        process.getInputStream())), 64);

String inLine;
try {
    StringBuilder sbCommand = new StringBuilder();
    sbCommand.append(command).append(" ");
    sbCommand.append("\n");
    os.writeBytes(command.toString());
    if (is != null) {
        for (int i = 0; i < timeout; i++) {
            if (is.ready())
                break;
            try {
                Thread.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        if (is.ready()) {
            inLine = is.readLine();
        } else {
        }
    }

} catch (IOException e) {
    e.printStackTrace();
} 
```

它总是停在`is.ready()`，当我把它改成它时，`process.waitfor()`它也停了。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T09:21:43.100

据我所知，运行 shell 命令的唯一方法是：

```
Process proc = Runtime.getRuntime().exec("your command"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-23T09:22:36.990

您可以在 Android 上运行 Linux 命令。但通常只有很少的预装。如果您想添加更多命令，您可能需要[根](http://en.wikipedia.org/wiki/Rooting_%28Android_OS%29)您的设备并在其上安装[busybox](https://play.google.com/store/apps/details?id=com.jrummy.busybox.installer)。

这不适用于应用程序中的生产性用途，但可以帮助您使用设备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:22:57.003

如果你有系统的二进制文件，你可以在你的系统上运行任何东西。

说你必须明白你必须找到`tar`.

看这里[http://forum.xda-developers.com/showthread.php?t=872438](http://forum.xda-developers.com/showthread.php?t=872438)

可能还有其他地方..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T21:02:17.990

您可能可以通过使用终端仿真器应用程序来完成此操作。正如您在上面所写的，我不知道 DOS 命令的效果如何。但是，终端仿真器无需 root 即可工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T00:09:46.273

您可以在您的 android 设备上安装 Termux 应用程序并使用该应用程序运行 Linux 命令

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-06-08T09:53:01.643

安装busybox，然后按以下格式输入命令：

busybox [linux 命令]

没有busybox就不能使用所有的linux命令，因为Android没有标准linux操作系统中可用的所有二进制文件。

仅供参考，二进制文件只是一个包含已编译代码的文件。许多默认二进制文件存储在 /system/bin/sh 目录中。所有这些命令，如 'cp' 'ls' 'get' 等，实际上都是二进制文件。您可以通过以下方式查看它们：

ls -a /system/bin/sh

希望这可以帮助。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-04-15T17:13:37.387

作为对 **Igor Ganapolsky**的回复，您必须为定位设置一个数据库。

可能`find`足以满足您的需求。

例子：

```
find -name *.apk 
```

# hibernate - Hibernate 抛出空指针异常

> ID：10277715
> 
> 赞同：2
> 
> 时间：2012-04-23T09:13:16.223
> 
> 标签：hibernate

我得到了一个我不知道如何的 NPE，我在谷歌上环顾四周，似乎找不到一个像样的答案，任何可以帮助我的人请。stacktrace 指向的 CustomerDaoImpl 行是：

```
return (CustomerPerk)this.sessionFactory.getCurrentSession().get(CustomerPerk.class, customerPerkPk);

java.lang.NullPointerException
at org.hibernate.type.EntityType.isEqual(EntityType.java:344)
at org.hibernate.type.ComponentType.isEqual(ComponentType.java:172)
at org.hibernate.engine.EntityKey.equals(EntityKey.java:119)
at java.util.HashMap.get(HashMap.java:305)
at org.hibernate.engine.StatefulPersistenceContext.getEntity(StatefulPersistenceContext.java:368)
at org.hibernate.impl.SessionImpl.getEntityUsingInterceptor(SessionImpl.java:656)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromSessionCache(DefaultLoadEventListener.java:533)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:440)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:1005)
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:998)
at com.perkinator.dao.CustomerPerkDaoImpl.getCustomerPerk(CustomerPerkDaoImpl.java:32)
at com.perkinator.service.CustomerServiceImpl.addPerkAmount(CustomerServiceImpl.java:169) 
```

CustomerPerk 映射

```
@Entity
@Table(name = "customer_perk")
public class CustomerPerk {

@Id
private CustomerPerkPk customerPerkPK = new CustomerPerkPk();

@Column
private BigDecimal amountSpent;

@Column
private int timesVisited;

@SuppressWarnings("unused")
@Column(name="customer_id", nullable = false, insertable = false, updatable = false)
private int customer;

@SuppressWarnings("unused")
@Column(name = "perk_id", nullable = false, insertable = false, updatable = false)
private int perk; 
```

和 CustomerPerkPk

```
@Embeddable
public class CustomerPerkPk implements Serializable {

@ManyToOne
private Customer customer;

@ManyToOne
private Perk perk; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:10:45.840

我认为您需要的是`@EmbeddedId`而不是`@Id` 参见[2.2.3.2.1。@EmbeddedId 属性](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

# javascript - 单选按钮如何使用函数中确定的值预先选择值

> ID：10277716
> 
> 赞同：0
> 
> 时间：2012-04-23T09:13:18.817
> 
> 标签：javascript, jquery, html

我有这样的方法：

```
$('.officeapprovalspan').click(function () {

        var invoicelineid = $(this).data("invoicelineid");

        var approval = $(this).data("approval");

        $(this).replaceWith('<input type="radio" name="variety" value="null" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="pleaseapprove">Please Accept</span><br >' +
                    '<input type="radio" name="variety" value="false" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="onhold">On Hold</span><br >' +
                    '<input type="radio" name="variety" value="true" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="accepted">Accepted</span>');

        $(document).on('change', '.radioapproval', radiohandler);
    }); 
```

所以，我有三个单选按钮。我想要实现的是基于变量批准的值预选适当的单选按钮。Approval 的值为 null、false 或 true。

有人可以告诉我你会如何写这个，因为我用replaceWith添加它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:22:59.670

尝试使用`.html()`：

```
var invoicelineid = $(this).data("invoicelineid");
var approval = $(this).data("approval");

$(this).html(
    '<input type="radio" name="variety" value="null" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="pleaseapprove">Please Accept</span><br >' +
    '<input type="radio" name="variety" value="false" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="onhold">On Hold</span><br >' +
    '<input type="radio" name="variety" value="true" class="radioapproval" data-invoicelineid=' + invoicelineid + ' /><span class="accepted">Accepted</span>'
)
.find(':radio[name="variety"][value="' + approval + '"]')
.prop('checked', true); 
```

例如，如果`approval`变量的值是`true`最后一个单选按钮，则将被选中。

# actionscript-3 - 以特定方向将项目添加到 MovieClip

> ID：10277721
> 
> 赞同：0
> 
> 时间：2012-04-23T09:14:11.267
> 
> 标签：actionscript-3, flash

我想按特定顺序在容器 MovieClip 中添加 MovieClip。（从左到右，从上到下）。

例如：在 flex 中，我有 Hbox、VBox、HGroup、VGroup。我在 Flash 中有类似的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:38:16.100

你有：

```
myMC.x = prevMC.x + prevMC.width + spacing;

prevMC = myMC;

... 
```

但是，您可以编写一个基类来封装它，这正是 Flex 团队所做的。

# xml - 在 XSLT 中包装 DIV

> ID：10277723
> 
> 赞同：2
> 
> 时间：2012-04-23T09:14:21.843
> 
> 标签：xml, xslt, html

我创建了一个 HTML 页面，该页面在 div 周围有一个包裹的 div。但是，当我使用相同的 HTML 通过 XSLT 处理一些 XML 时，它会将一个 div 置于另一个之上，任何人都可以想到它为什么在 XML/XSLT 中这样做？

```
 <?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet
               version="1.0"
               xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
               xmlns:xhtml="http://www.w3.org/1999/xhtml"
>

  <!-- Doctype - about:legacy-compat is XML equivalent of HTML5 doctype -->
  <xsl:output method="html" indent="yes"
              omit-xml-declaration="yes"
              doctype-public="about:legacy-compat"
  />

  <xsl:template name="Document" match="/">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>BPD</title>
<link type="text/css" rel="stylesheet" href="big_picture_documentation_v3.css"/>
</head>
<body>
<div id="container">
 <div id="floated">
 <p>WRAP AROUND ME!</p>
</div>
<xsl:apply-templates/>
</div>
</body>
</html>
</xsl:template>

<xsl:template name="Title" match="title">
  <h1>
    <xsl:apply-templates/>
  </h1>
</xsl:template>
<xsl:template name="subheading" match="subheading">
  <h2>
    <xsl:apply-templates/>
  </h2>
</xsl:template>

</xsl:stylesheet> 
```

用于格式化这些 div 的 CSS 如下所示：

```
#container { margin: 5px;padding: 5px;border: 0px solid black;}
#floated { width: 227x;float: left;padding-right: 5px;padding-bottom: 10px;} 
```

示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="v3.xsl" ?>
 <document xmlns:xhtml="http://www.w3.org/1999/xhtml">
   <data id="HowToUse" type="example" status="Complete">
   <content>
   <title>How To Navigate This Guide</title>
   <subheading>Using This Documentation</subheading>

    </content>
   </data>

</document> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:19:28.010

> ```
> <div id="container">
>  <div id="floated">
>  <p>WRAP AROUND ME!</p>
> </div>
> <xsl:apply-templates/>
> </div> 
> ```

在我看来，你想要的是：

```
<div id="container">
 <div id="floated">
  <p>WRAP AROUND ME!</p>
  <xsl:apply-templates/>
</div>
</div> 
```

# javascript - 如何仅验证文本，英文字符和非英文字符 jquery 验证器

> ID：10277724
> 
> 赞同：1
> 
> 时间：2012-04-23T09:14:23.993
> 
> 标签：javascript, jquery, jquery-validate

我想验证一个文本框以确保只能向其中添加字符和 Unicode 字符。例如，以下内容将是有效的：

```
Gräfelfing
Gießen
München 
```

但这些应该是无效的：

```
Gräfelfing123
Gießen!@#$
München123#@# 
```

我知道如何使用验证器方法验证字符：

```
jQuery.validator.addMethod("lettersonly", function(value, element) {
      return this.optional(element) || /^[a-zA-Z]+$/i.test(jQuery.trim(value));
    }, "Letters only please"); 
```

但是我怎样才能为此添加 Unicode 字符验证呢？请帮助，提前谢谢。

* * *

*** 更新 ***

我在这个问题的帮助下尝试了一个解决方案 -[正则表达式匹配非英文字符](https://stackoverflow.com/questions/150033/regular-expression-to-match-non-english-characters)。

但它不起作用：

```
jQuery.validator.addMethod("lettersonly", function(value, element) {
      return this.optional(element) || /^[a-zA-Z\u0000-\u0080]+$/i.test(jQuery.trim(value));
    }, "Letters only please"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:31:19.493

Javascript缺少“所有带有变音符号的拉丁字母”的内置字符类，因此您必须自己决定您真正想要接受的内容。

例如：

*   你想接受西里尔字母（俄语、保加利亚语、白俄罗斯语等）吗？
*   你想支持假名（日文）还是韩文（韩文）？

毕竟，这些都是“非英语（或更准确地说：非拉丁）字母”。

在你决定之后：

*   查阅[代码图表](http://www.unicode.org/charts/)并在正则表达式中列出您想要的所有范围
*   您可以使用[此工具](http://kourge.net/projects/regexp-unicode-block)创建按 Unicode 块过滤的正则表达式。

**例子**

要将变音符号添加到代码检查中的允许字符列表中，您可以使用`/^[a-zA-Z\u0080-\u024F]+$/i`
That will cover

*   拉丁语 1 补充
*   拉丁语扩展-A
*   拉丁语扩展 B 范围。

这应该涵盖大多数使用过的变音符号，并且作品将涵盖您提供的所有示例。
根据需要混合和匹配。

# html - 我可以在表格的内联样式属性中包含 td { } 吗？

> ID：10277731
> 
> 赞同：4
> 
> 时间：2012-04-23T09:14:54.113
> 
> 标签：html, css

我正在使用一个内容管理系统，该系统不允许我更改正在使用的页面的标题。我正在创建的页面将由其他人使用 WYSIWYG 编辑器进行编辑，并将包含一个表格，用户可以在其中上传新文档。我想用 CSS 设置样式，以便我可以给出一个命令在每一行之间放置一条线（这不需要每个用户每次都这样做 - 因为他们可能不知道如何），但每次我这样做它没有显示任何东西。我的代码尝试如下，这可能吗？

```
<table width=600px cellSpacing=2 cellPadding=2 style="td {border-bottom: solid 1px black;" }"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:17:13.167

Not that I'm aware of. But you can do this

```
<style type="text/css">
  .specialtable td {
    border-bottom: 1px solid black;
  }
</style>
<table width=600px cellSpacing=2 cellPadding=2 class="specialtable">
  ...
</table> 
```

This will ensure that only this specific table's `<td/>` elements will be styled according to your needs. Note: according to the [w3c specs](http://www.w3.org/TR/html4/present/styles.html#h-14.2.3), `<style/>` is only allowed within the `<head/>` element of your document. But in many browsers, it still works if you put it anywhere in the `<body/>`. Since you're looking for **a kind of hack**, this may be a viable solution for you

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:32:02.333

您可以使用`frame`and ，元素`rules`的两个鲜为人知的属性。[`table`](http://www.w3.org/TR/html401/struct/tables.html#edef-TABLE)

```
<table cellpadding="3" cellspacing="0" frame="below" rules="rows">
    <tr><td>one</td><td>two</td></tr>
    <tr><td>three</td><td>four</td></tr>
    <tr><td>five</td><td>six</td></tr>
</table> 
```

请参阅[jsFiddle](http://jsfiddle.net/PmgJw/)。

或者，如果您只想要行之间的线条而不是底部下方的线条，请省略`frame="below"`.

不过，这不适用于所有浏览器。

# linux - 如何提取文件名？

> ID：10277736
> 
> 赞同：0
> 
> 时间：2012-04-23T09:15:12.303
> 
> 标签：linux, sed, filenames

在一个目录中，我有一些看起来像的文件；

org.coy。**应用程序**_0.1-2_arm.deb

com.cpo. **app2** _1.2.1_arm.deb

sg.team.works。**app3a** _1.33_arm.deb

com.share。名称4 **.deb**

com.sha-re。应用程序5 **.deb**

com.share.re. **任何东西**.deb

我只需要加粗的名称。

这是我到目前为止所拥有的；

```
for file in *.deb; do
 name=$(echo "$file" | sed 's/^.*\.\([^.][^.]*\)\.deb$/\1/')
 echo $name
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:08:56.287

```
for i in *.deb
do
    name=${i%.deb}      #<-- remove extension      (.deb)
    name=${name%%_*}    #<-- remove version        (_x.y.z_arm)
    name=${name##*.}    #<-- remove namespace      (comp.x.y.z)
    echo $name
done 
```

* * *

### 输出

```
app2
anything
app5
name4
application
app3a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:50:10.033

最好的解决方案是使用 dpkg-query 和适当的选项。检查[更多信息](http://man.he.net/man1/dpkg-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:52:41.083

您可以使用 basename 命令使事情变得更容易一些

```
for file in *.deb; do
 name=`basename $file | sed -e 's/.*\.//' -e 's/_.*//'`
 echo $name
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:27:59.047

一种使用方式`perl`：

```
perl -e '
    do { 
        printf qq[%s\n], $+{my} 
            if $ARGV[0] =~ m/(?(?=.*_)\.(?<my>[^._]+)_\d|.*\.(?<my>[^.]+)\.deb\Z)/ 
    } while shift && @ARGV
' *.deb 
```

正则表达式的解释：

```
(?                          # Conditional expression.
(?=.*_)                     # Positive look-ahead to check if exits '_' in the string.
\.(?<my>[^._]+)_\d          # If previous look-ahead succeed, match string from a '.' until
                            # first '_' followed by a number.
|                           # Second alternative when look-ahead failed.
.*\.(?<my>[^.]+)\.deb\Z     # Match from '.' until end of string in '.deb' 
```

由于我使用的是命名捕获，因此需要 perl 5.10 或更高版本。

输出：

```
app2
anything
app5
name4
application
app3a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:23:02.527

这可能对您有用：

```
for file in *.deb; do
    name=$(echo "$file" |  sed 's/.*\.\([a-zA-Z][^_.]*\).*\.deb/\1/')
    echo $name
done 
```

# redis - 使用 Redis 拥有本地和远程客户端

> ID：10277740
> 
> 赞同：2
> 
> 时间：2012-04-23T09:15:27.053
> 
> 标签：redis

我想在 Redis 中设置一些写入约束，并且我正在考虑将这些约束存储在哈希中。

我最初的想法是修改 set 命令，以便他们在写入 Redis 之前检查规则。我在想通过这种方式检查会超级快。当然，每次更改 Redis 时，这种方法都需要进行更多修改，如果您认为这是关于学校作业，我会觉得这有点硬核。

第二个想法是有两种类型的 Redis 客户端。一个在 Web 应用程序端（可能是 Web 应用程序的多个实例），一个在 Redis 机器上。基于这个想法来我的问题。

1.  与首先检查约束然后在 Redis 中写入的 1 个客户端相比，这 2 个客户端（本地和远程）是否会提高性能？或者我应该坚持使用一个客户端来完成这一切（phpredis 或 predis，应用程序在 PHP 上，对约束检查进行了一些修改）？

2.  如果我可以尝试 2 个客户端，使用哪种编程语言更好地实现本地客户端（C、Lua 或其他）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:20:35.273

我不会尝试修改 Redis 行为本身，而是首先尝试在服务器端 Lua 脚本中实现约束（需要 Redis 2.6 分支）。

Lua EVAL 脚本可以在执行实际写入操作之前轻松地对已存储在 Redis 中的数据执行一些检查。

这是一个例子。假设我们有两个代表银行账户的密钥，我们需要实现账户之间的安全交易。例如，我们必须检查两个帐户是否都存在并且源帐户是否包含所需的资金。

```
# set 2 accounts for John and Bob
set account:john 100
set account:bob 20

# transfer $10 from John to Bob, checking all constraints
eval "if redis.call('exists',KEYS[2])==1 and redis.call('get',KEYS[1])>=ARGV[1] then
         redis.call( 'incrby', KEYS[2], ARGV[1] )
         redis.call( 'incrby', KEYS[1], - ARGV[1] )
         return 1
      else
         error('invalid transaction')
      end" 2 account:john account:bob 10 
```

您可以在以下位置找到有关 Redis 脚本功能的文档： [http](http://redis.io/commands#scripting) ://redis.io/commands#scripting （请先查看 EVAL 命令）。

为了回答您最初的问题（如果您不能使用 Redis 2.6），本地客户端会稍微提高性能，因为它可以使用 unix 域套接字连接到 Redis（绕过一些 TCP 开销）并节省一些网络往返。但这是以额外的复杂性为代价的。

# c# - FileInfo.LastWriteTime 怎么会早于 FileInfo.CreationTime？

> ID：10277741
> 
> 赞同：11
> 
> 时间：2012-04-23T09:15:33.387
> 
> 标签：c#, file, time

我今天正在调试一些代码，并注意到我的一个`FileInfo`对象`LastWriteTime`比它的时间更早`CreationTime`。这是可能的/预期的吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-23T09:17:37.987

These properties of the file can be modified to take any value. So there's absolutely nothing to stop this happening.

That said, the most likely explanation is that the file was copied from one place to another. The creation time will be the time the copy took place. The modification time will be the time the source file was last modified, i.e. before the copy. So, when the file is copied, the modification time is also copied. To see this happen, simply pick a file on your machine. Create a copy of it (CTRL+C, CTRL+V) and look at the properties of the copy.

In other words, it is actually not a contradiction for the creation time to be later than the modification time. The creation time is when this *file object* was created. The modification time is when the *file contents* were modified.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T09:22:14.977

当然可以，只需复制一些文件并将其粘贴到同一个文件夹中，您会看到日期不同： ![在此处输入图像描述](../Images/017bb02e32340fee7de060d898b4ecd5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:18:00.167

Of course it's possible. Creation and modification time of a file are just metadata and can be changed by anyone who feels like it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T09:20:56.023

此方法可能返回不准确的值，因为它使用的本机函数的值可能不会被操作系统持续更新。

[http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)

# c++ - 当 Gcc 使用多个版本的 boost 编译 Boost::regex 时存在未定义的引用

> ID：10277744
> 
> 赞同：9
> 
> 时间：2012-04-23T09:15:37.160
> 
> 标签：c++, linux, gcc, boost, boost-regex

我试图在 linux 机器上安装 Boost（CentOs，Linux 版本 2.6.9-67.ELsmp）。我按照 Boost [Getting Started](http://www.boost.org/doc/libs/1_49_0/more/getting_started/unix-variants.html#build-a-simple-program-using-boost)网页上的说明进行操作。下载并提取文件，然后我添加前缀，因为我不是 root 用户。

```
./bootstrap.sh --prefix=/my_path/boost-1.49.0
./b2 install 
```

我去 /my_path/boost-1.49.0 并检查那里有 /include/boost/ 和 /lib/ 包含文件。

我还将 LD_LIBRARY_PATH 设置为 /my_path/boost-1.49.0/lib/。

为了测试我是否安装成功，我编译了以下代码：

主文件

```
#include <boost/regex.hpp>
#include <iostream>
#include <string>

using namespace boost;
using namespace std;

int main(int argc, char *argv[])
{
    string line = "12345";
    regex pattern("^123");
    if (regex_match(line, pattern)) cout << "match." << endl;
    else cout << "not match." << endl;
    return 1;
} 
```

并通过命令编译：

```
g++ -v -I /my_path/boost-1.49.0/include/boost -L /my_path/boost-1.49.0/lib main.cpp -lboost_regex -o example 
```

并产生以下错误：

```
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.6/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.6 20060404 (Red Hat 3.4.6-9)
/usr/libexec/gcc/x86_64-redhat-linux/3.4.6/cc1plus -quiet -v -I /my_path/boost-1.49.0/include/boost/ -D_GNU_SOURCE main.cpp -quiet -dumpbase main.cpp -mtune=k8 -auxbase main -version -o /tmp/ccW0ON8y.s
ignoring nonexistent directory "/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../x86_64-redhat-linux/include"
#include "..." search starts here:
#include <...> search starts here:
/my_path/boost-1.49.0/include/boost/
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6/x86_64-redhat-linux
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6/backward
/usr/local/include
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/include
/usr/include
End of search list.
GNU C++ version 3.4.6 20060404 (Red Hat 3.4.6-9) (x86_64-redhat-linux)
        compiled by GNU C version 3.4.6 20060404 (Red Hat 3.4.6-9).
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
as -V -Qy -o /tmp/ccpu82sB.o /tmp/ccW0ON8y.s
GNU assembler version 2.15.92.0.2 (x86_64-redhat-linux) using BFD version 2.15.92.0.2 20040927
/usr/libexec/gcc/x86_64-redhat-linux/3.4.6/collect2 --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o example /usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../lib64/crt1.o /usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../lib64/crti.o /usr/lib/gcc/x86_64-redhat-linux/3.4.6/crtbegin.o -L /my_path/boost-1.49.0/lib/ -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6 -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6 -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../.. -L/lib/../lib64 -L/usr/lib/../lib64 /tmp/ccpu82sB.o -lboost_regex -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-redhat-linux/3.4.6/crtend.o /usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../lib64/crtn.o
/tmp/ccpu82sB.o(.gnu.linkonce.t._ZN5boost11basic_regexIcNS_12regex_
traitsIcEESaIcEEC1EPKcjRKS3_+0x27): In function `boost::basic_regex<char, 
boost::regex_traits<char>, std::allocator<char> >::basic_regex(char const*, 
unsigned int, std::allocator<char> const&)':: 
undefined reference to `boost::reg_expression<char, boost::regex_traits<char>, 
std::allocator<char> >::reg_expression(char const*, unsigned int, 
std::allocator<char> const&)'

/tmp/ccpu82sB.o(.gnu.linkonce.t.
_ZN5boost11basic_regexIcNS_12regex_traitsIcEESaIcEED1Ev+0x11): In function 
`boost::basic_regex<char, boost::regex_traits<char>, 
std::allocator<char>>::~basic_regex()':
: undefined reference to `boost::reg_expression<char, boost::regex_traits<char>, 
std::allocator<char> >::~reg_expression()'
/tmp/ccpu82sB.o(.gnu.linkonce.t.
_ZN5boost9re_detail12perl_matcherIN9__gnu_cxx17__normal_iteratorIPKcSsEESaINS_9sub
_matchIS6_EEENS_12regex_traitsIcEESaIcEEC1ES6_S6_RNS_13match_resultsIS6_S9_EERKNS_
14reg_expressionIcSB_SC_EENS_15regex_constants12_match_flagsE+0xa1): In function 
`boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, 
std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, 
boost::regex_traits<char>, std::allocator<char>>
::perl_matcher(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char 
const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, 
boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > >, 
std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >&, 
boost::reg_expression<char, boost::regex_traits<char>, std::allocator<char> > const&, 
boost::regex_constants::_match_flags)': 
```

但是，如果我只是使用系统管理员安装的默认 boost 进行编译

```
g++ -v main.cpp -lboost_regex -o example 
```

然后就好了。

我得到的 ldd 例子

```
libboost_regex.so.1 => /usr/lib64/libboost_regex.so.1 (0x0000002a95557000) 
```

由于某种原因，我被要求不要更新 /usr/include/boost 中的 boost。有什么可以帮助我解决这个问题的方法，即在本地文件夹中安装 boost 并更改路径如何包含和链接以使用不同的版本？

我不确定这个问题是否愚蠢，但我确实用谷歌搜索过，但大多数相关问题都没有在 gcc 命令中正确设置 -I、-L 和 -l。我不知道上面的错误信息，真的让我发疯。任何帮助表示赞赏。

感谢您的耐心和时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T06:37:27.233

也许是因为在您的编译命令中，您说要`/my_path/boost-1.49.0/include/boost`用作包含路径，然后在您的源代码中使用`#include <boost/regex.hpp>`.

我的猜测是`regex.hpp`在`/my_path/boost-1.49.0/include/boost/boost/regex.hpp`. 显然没有找到，所以找到了系统一。

你可以试试： `g++ -v -I /my_path/boost-1.49.0/include -L /my_path/boost-1.49.0/lib main.cpp -lboost_regex -o example`

# iphone - 是否可以在代码中使颜色不可见？

> ID：10277747
> 
> 赞同：0
> 
> 时间：2012-04-23T09:16:01.353
> 
> 标签：iphone, objective-c, ios, image, image-manipulation

对于我目前正在制作的游戏，我有一个带有许多白点的黑色背景，这些白点用于代表星星。然而，我不需要黑色，我只希望星星出现。我的问题是：是否可以在不使用图像处理程序（即仅使用代码）的情况下完全隐藏黑色？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:01:20.213

这是表格：

```
// some rgba color representation
struct t_rgba {
    uint8_t r, g, b, a;
};

bool SetToTransparentIfPixelIsBlack(t_rgba* const rgba) {
    // is it black?
    if (0 == rgba->r && 0 == rgba->g && 0 == rgba->b) {
        // then set the alpha value to transparent:
        rgba->a = 0;
    }
} 
```

尽管您使用的图像数据会以不同的方式表示。

# python - 如何在 Django 单元测试中获取请求对象？

> ID：10277748
> 
> 赞同：65
> 
> 时间：2012-04-23T09:16:01.917
> 
> 标签：python, django, django-testing

我有一个功能

```
def getEvents(eid, request):
    ...... 
```

现在我想单独为上述函数编写单元测试（不调用视图）。那么我应该如何在`TestCase`. 是否可以创建请求？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-04-23T09:21:37.940

请参阅[此解决方案](https://docs.djangoproject.com/en/2.1/topics/testing/advanced/#the-request-factory)：

```
from django.utils import unittest
from django.test.client import RequestFactory

class SimpleTest(unittest.TestCase):
    def setUp(self):
        # Every test needs access to the request factory.
        self.factory = RequestFactory()

    def test_details(self):
        # Create an instance of a GET request.
        request = self.factory.get('/customer/details')

        # Test my_view() as if it were deployed at /customer/details
        response = my_view(request)
        self.assertEqual(response.status_code, 200) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-09-01T11:49:24.060

如果您使用 django 测试客户端 ( `from django.test.client import Client`)，您可以像这样访问来自响应对象的请求：

```
from django.test.client import Client

client = Client()
response = client.get(some_url)
request = response.wsgi_request 
```

或者，如果您使用`django.TestCase`( `from django.test import TestCase, SimpleTestCase, TransactionTestCase`)，您只需键入以下内容即可访问任何测试用例中的客户端实例`self.client`：

```
response = self.client.get(some_url)
request = response.wsgi_request 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-23T09:29:25.543

用于[`RequestFactory`](https://docs.djangoproject.com/es/4.0/topics/testing/advanced/#django.test.RequestFactory) 创建虚拟请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:23:17.497

你的意思是`def getEvents(request, eid)`对吗？

使用 Django unittest，您可以使用`from django.test.client import Client`发出请求。

见这里：[测试客户端](https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client)

@Secator 的答案是完美的，因为它创建了一个模拟对象，这对于一个非常好的单元测试来说确实是首选。但是根据您的目的，使用 Django 的测试工具可能会更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T12:36:39.637

您可以使用 django 测试客户端

```
from django.test import Client
c = Client()
response = c.post('/login/', {'username': 'john', 'password': 'smith'})
response.status_code
response = c.get('/customer/details/')
response.content 
```

有关更多详细信息
[https://docs.djangoproject.com/en/1.11/topics/testing/tools/#overview-and-a-quick-example](https://docs.djangoproject.com/en/1.11/topics/testing/tools/#overview-and-a-quick-example)

# c# - 比较 EntityCollection 在 LinqToEntity 查询中

> ID：10277751
> 
> 赞同：0
> 
> 时间：2012-04-23T09:16:08.447
> 
> 标签：c#, .net, linq-to-entities, compare, entitycollection

是否可以在 Linq 查询中比较两个 EntityCollection？

我试过这样：

```
from t in _bdd.Table
where (idList).All(id=>  t.ids.Contains(id))
                         select i).FirstOrDefault() 
```

其中 idList 和 ids 都是 EntityCollection

但我得到了一个 NotSupportedException：

```
"Unable to create a constant value of type (ID) Only primitive types ('such as Int32, String, and Guid') are supported in this context" 
```

没有办法在单个 Linq 查询中比较两个 List 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:38:54.937

首先，异常是由使用本地集合 (idList) 作为 where 子句中的源引起的。相反，您应该尝试切换它，以便它出现在右侧可能在某些 LINQ 方法中。

我认为这个 where 查询会给你你想要的结果：

```
where t.ids.Count() == idList.Count() && t.ids.All(ids => idList.Contains(id)) 
```

“select i”部分也不清楚它选择了什么。您的代码片段中没有名为 i 的变量。

# javascript - Find how a change event is triggered

> ID：10277752
> 
> 赞同：2
> 
> 时间：2012-04-23T09:16:08.917
> 
> 标签：javascript, jquery

I wanted to find out how a change event is being triggered. I want to determine whether it's triggered using by mouse click, or it's triggered by a key stroke from a keyboard.

# Edited:

Ok. Here's what I wish to do. This is simple ajax working that fetches the cities listing on change event of the states. My code is all good and it really does the job.

```
$('#state').change(function(event) {
    $.ajax({
        url: target,
        type: 'POST',
        data: data,
        success: function(data, textStatus, XMLHttpRequest) {
            $('#cityBox').html( data );
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("error");
        }
    });
}); 
```

The problem: Chrome messes with the .change event. It calls the change event when I use the keyboard keys as well. So if I use the arrow key or any other key to change the state, for every key press it will trigger the change event, which I want not to happen.

Expected approaches:

1) If I can make out, how the event is being triggered, maybe I can override chrome's working. But the problem is .which does not work for .change event. It always return undefined.

2) Using an if else. Something like this one, but its certainly not going to work as I know.

```
$('#state').change(function(event) {
    if(!$('#state').keyup()) {
        $.ajax({
            url: target,
            type: 'POST',
            data: data,
            success: function(data, textStatus, XMLHttpRequest) {
                $('#cityBox').html( data );
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert("error");
            }
        });
    }
}); 
```

3) Storing the key value to some variable and check if it exists or not. The problem with this working is that, I am unable to set variable this_key when the event is triggered with mouse.

```
var this_key=0;

$('#state').change().keyup(function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code!= 13) { // If not enter key
        this_key=code;
    }
});

$('#state').change(function(event) {
    if(!this_key) {
        setTimeout(function(){
            $.ajax({
                url: target,
                type: 'POST',
                data: data,
                success: function(data, textStatus, XMLHttpRequest)     {
                    $('#cityBox').html( data );
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert("error");
                }
            });
        }, 100);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:53:08.967

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

    <input id="inputsource" value="do something :)">
    <div id="log"></div>
    <script>
        $('#inputsource').bind('change keydown mousedown',function(e){
            console.log(e.type);
            $('#log').html(e.type);
        });
    </script>

</body>
</html> 
```

# scala - Ensuring hygiene in the absence of reify

> ID：10277758
> 
> 赞同：6
> 
> 时间：2012-04-23T09:16:46.543
> 
> 标签：scala

It's easy to write hygienic macros in Scala by using `reify` and `eval`. But [it's not always possible](https://groups.google.com/d/msg/scala-user/AQXoIA-rKtU/uRy5-rkwlBgJ) to use `reify` and `eval`.

So, if one can't use them, what are the rules that will ensure that a macro is hygienic? And is there any way to test a macro to ensure that no bad hygiene has slipped through the cracks?

upd. In later milestones of 2.10.0, `Expr.eval` got renamed to `Expr.splice`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T03:19:10.293

Reify 是卫生的，因为它与 Ident 和 This 树一起保存符号。

如果您的宏扩展结果没有附加到标识的符号（例如，您只有 Ident("x") 来指定对名为 x 的引用），那么宏扩展的后续类型检查会将 x 绑定到范围内的任何内容调用站点（或者如果该范围没有 x，您将收到编译错误）。

相比之下，当您的宏扩展具有其标识的符号时，类型检查器不会尝试重新解析它们，而只是使用它所拥有的。这意味着当您具体化一个表达式并在宏扩展中使用结果时，它会将其符号带入调用站点。好吧，不是所有的符号，例如，不可能引用局部变量或私有/受保护的东西，但是对全局可访问声明的引用是持久的。

底线是要检查您的宏是否卫生，请检查您的 idents 和 thises 是否附有符号。您可以通过具体化或手动将符号分配给手工制作的树来实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:23:59.023

既然`reify`是一个宏，我就看看它的实现来弄清楚它的作用。

# iphone - About write boolean file to the plist

> ID：10277766
> 
> 赞同：1
> 
> 时间：2012-04-23T09:17:37.787
> 
> 标签：iphone, plist

I have a question on writing Boolean value to the plist. The wired thing is the dir for plist before write and read is totally the same, but I can not write to the boolean value to it. how can I solve this problem? btw: I got the write result in iPhone simulator but failed in real iPhone debug.

```
//--- CODE HERE ---//
[ContentList objectAtIndex: paramSender.tag] setValue: [NSNumber numberWithBool: TRUE] forKey: BooleanKey]; // set object boolean value to be ture;
[ContentList writeToFile: self.plistPath atomically: YES]; // update the plist
NSMutableArray *tmp = [[NSMutableArray alloc] initWithContentsOfFile: self.plistPath]; // get the content from the updated plist
NSLog(@"the bool value is %@", [[ContentList objectAtIndex: paramSender.tag] objectForKey: BooleanKey]);
NSLog(@"After update boolValue is %@", [[tmp objectAtIndex: paramSender.tag] objectForKey: BooleanKey]);

//--- OUTPUT IN NSLOG ---// 
2012-04-23 18:09:12.164 iPhoneTips[151:707] the bool value is 1
2012-04-23 18:09:12.167 iPhoneTips[151:707] After update boolValue is 0  

//--- FINISH ---// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:52:33.203

试过这个？

```
[[ContentList objectAtIndex: paramSender.tag] setBool:YES forKey: BooleanKey]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:23:31.687

试试这个：

```
NSLog(@"After update boolValue is %d", [[[tmp objectAtIndex: paramSender.tag] objectForKey: BooleanKey] boolValue]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:41:50.550

终于知道plist的原理了。

bundle 中的 plist 是只读的。如果要以编程方式将数据写入 plist，则必须将 plist 从 bundle 移动到文档目录，然后无论写入还是读取都可以编辑数据...

# version-control - 移动/重命名后，Mercurial diff 不起作用

> ID：10277773
> 
> 赞同：6
> 
> 时间：2012-04-23T09:18:05.123
> 
> 标签：version-control, mercurial, diff, dvcs, rename

将文件移动到另一个目录后，我无法再显示两个修订版之间的差异。例如：

```
hg init

touch a
hg add a
hg ci -m "Added a"

echo "Bli" >> a
hg ci -m "Bli"
echo "Bla" >> a
hg ci -m "Bla"
echo "Blub" >> a
hg ci -m "Blub"

hg diff -r 0 -r 1 a 
```

结果是：

```
diff -r 8603b08f5a64 -r 16675581549e a
--- a/a Mon Apr 23 09:03:25 2012 +0000
+++ b/a Mon Apr 23 09:03:25 2012 +0000
@@ -0,0 +1,1 @@
+Bli 
```

这是我所期望的。但是，当我现在将文件“a”移动到目录“b”中时：

```
mkdir b
hg mv a b/a
hg ci -m "Moved a into b"
cd b
hg diff -r 0 -r 1 a 
```

这导致什么都没有（根本没有输出）。我还尝试使用 git Giff 算法：

```
hg diff --git -r 0 -r 1 a 
```

同样，根本没有输出。日志似乎没问题：

```
hg log --follow a 
```

结果是：

```
changeset:   4:cb8185829bfd
tag:         tip
user:        XXXXXXXXXXXXXXXXXXXXXXXXXXXX
date:        Mon Apr 23 09:08:12 2012 +0000
summary:     Moved a into b

changeset:   3:4d1ba89885c3
user:        XXXXXXXXXXXXXXXXXXXXXXXXXXXX
date:        Mon Apr 23 09:03:26 2012 +0000
summary:     Blub

changeset:   2:e9126dbb50b2
user:        XXXXXXXXXXXXXXXXXXXXXXXXXXXX
date:        Mon Apr 23 09:03:26 2012 +0000
summary:     Bla

changeset:   1:16675581549e
user:        XXXXXXXXXXXXXXXXXXXXXXXXXXXX
date:        Mon Apr 23 09:03:25 2012 +0000
summary:     Bli

changeset:   0:8603b08f5a64
user:        XXXXXXXXXXXXXXXXXXXXXXXXXXXX
date:        Mon Apr 23 09:03:25 2012 +0000
summary:     Added a 
```

有人知道为什么移动文件后差异不起作用吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:30:35.720

这对于今天的 Mercurial 来说是困难的或不可能的。我认为你能得到的最接近的是

```
hg log --follow --patch -r 1 a 
```

`--follow`其中 Mercurial 将在显示差异 ( ) 之前向后跟踪副本( `--patch`)。

通常，Mercurial 不跟踪**文件身份**，它只跟踪**文件名**。当您按修订号查找信息时，Mercurial 将首先查找修订，然后查找该修订中的所有文件名。所以`hg cat -r 0 a`会给你同样的结果

```
hg update -r 0
cat a 
```

即，结果独立于当前工作目录父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:01:00.077

我认为这是因为`b/a`版本 1 或版本 0 中不存在。如果您`hg diff -r 0 -r 4`从`b`文件夹中执行命令，它应该会产生预期的输出。

如果您`hg diff -r 0 -r 1 a`从工作副本的根目录执行，它还应该显示预期的输出。

# weblogic-10.x - Why is the Weblogic server not releasing memory?

> ID：10277778
> 
> 赞同：0
> 
> 时间：2012-04-23T09:18:14.657
> 
> 标签：weblogic-10.x, weblogic11g

In my organization, we conduct Data Entry Operation though a 3-tier Application System. The Configuration is shown as below:

*   Operating System : Linux
*   Application Software has been built using: JSF (a Java EE Framework Technology)
*   Database : Oracle 11g

The Problem: For each entry an Enterprise bean is created and kept in a queue inside the Weblogic Sever. The Bean is being sent to the database but the memory used for the bean is not being released. As a result for a certain time duration, when the hits reach a peak and the memory is being used up to say 16GB or more, the server hangs responding and it has to be restarted in order to release the memory.

To be on the safe side, we have set the maximum simultaneous connections to the maximum. But this doesn't help.

What may be the problem and how to tune the system?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:14:32.737

> Bean 被发送到数据库，但用于 bean 的内存没有被释放。

由于某些资源（例如数据库连接）未在代码中关闭，此处可能存在内存泄漏。

将[堆转储到 HPROF 文件中](http://visualvm.java.net/heapdump.html)并使用 Eclipse 内存分析器工具或[VisualVM运行它或使用](http://visualvm.java.net/)[JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html) 监控它

# svn - 从工作副本的 url 创建 svn 分支

> ID：10277781
> 
> 赞同：3
> 
> 时间：2012-04-23T09:18:22.183
> 
> 标签：svn, branch

使用 SVN 命令行，如何从当前工作副本的 URL 创建分支？（不是来自我的本地工作副本，可能有本地更改）

寻找一种直接的方式，无需通过“svn info”来获取URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:55:05.840

这个怎么样？

`svn copy ^/@HEAD <Branch URL>`

**编辑**

由于分支、标签和主干在 SVN 中只是路径并且完全是任意的，我认为如果没有一点创意（例如，在内置 SVN 之外），您将无法完成您想要做的事情命令）。要完成我认为您想做的事情，您可以使用 bash 脚本（假设 Mac/Linux）：

```
#!/bin/bash

CURRENT_URL=$(svn info | grep ^URL | cut -d" " -f2)

svn copy $CURRENT_URL "^/branches/$1" 
```

用法：`svnbranch.sh newbranch`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:23:51.453

你可以执行

```
svn copy <URL of existing URI> <New URL> 
```

借助“svn info”，您可以获得现有工作副本的 URL。

不应存在​​于 SVN 服务器树中，否则您实际上会在该 URL 中创建一个子目录。

复制将直接发生在服务器上。实际上，您将直接“提交”您的更改，而不需要任何工作副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:21:41.010

运行 `svn help copy' 并仔细阅读它的输出。我认为 --revision 选项可能会有所帮助。

# tomcat - How to set threshold value in tomcat instance for jconsole monitoring

> ID：10277784
> 
> 赞同：1
> 
> 时间：2012-04-23T09:18:44.680
> 
> 标签：tomcat, jconsole, threshold

I wish to monitor my tomcat instance with jconsole. I'm using tomcat in Redhat5.5\. I have configured jmx in my tomcat instance, and now I am able to connect my tomcat instance via jconsole remotely. In the application level, I want to set the threshold value in my tomcat application instance for doing a manual GC. Can anyone tell me how to set the threshold value in my tomcat application.

Thanks in Advance, Dilip.

# c++ - QTextEdit not Setting Text

> ID：10277790
> 
> 赞同：1
> 
> 时间：2012-04-23T09:18:58.190
> 
> 标签：c++, qt, qt4

I'm sure there most be a simple explanation for my problem but I just don't see it. I'm trying to read a text file into a QTextEdit but apparently i'm unable to change the QTextEdit text in this method and I can't see why.

```
Document::Document(QWidget *parent) : QWidget(parent)
{
    this->layout = new QGridLayout(this);
    this->layout->setSpacing(2);
    this->layout->setMargin(0);
    this->setLayout(layout);
    this->textArea = new QTextEdit(this);
    this->textArea->setLineWrapMode(QTextEdit::NoWrap);
    this->textArea->setAcceptDrops(true);
    this->textArea->setAcceptRichText(true);
    this->textArea->setUndoRedoEnabled(true);
    this->textArea->setFont(QFont("Mono" , 11));
    this->layout->addWidget(textArea);
    this->textArea->show();
    this->textArea->setFocus();
    this->textArea->setText("Prueba de texto1");
}

void Document::open(QString archivo)
{
    std::cout << "Opening..................." << std::endl;
    this->textArea->setPlainText("Prueba de texto2");
    QFile file(archivo);
    QTextStream stream(&file);
    //this->textArea->append(stream.readAll());
    this->textArea->setText(stream.readAll());
    std::cout << "Opened" << std::endl;

} 
```

The first time I use SetText during the constructor it works fine but when I call it from open it doesn't work. Help please

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:38:54.460

你忘了`open()`调用`QFile`对象

```
 QFile file(archivo); 
    if (file.open(QFile::ReadOnly){
         QTextStream stream(&file);
         ...
    } else {
        /// Oops, no pude abrir el archivo para leer :(
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:03:15.627

尝试

```
this->textArea->setPlainText(QString(stream.readAll()); 
```

或者更好的是用

```
QFile *file = new QFile(archivo);
this->textArea->setPlainText(QString(file->readAll())); 
```

# cakephp - cakephp: group by is missing from generated query

> ID：10277792
> 
> 赞同：0
> 
> 时间：2012-04-23T09:19:03.057
> 
> 标签：cakephp, cakephp-1.3

I have a simple model where I would like to find some count data per date. I made this find in order to do that:

```
$statsubscriptions = $this->Nlist->Statsubscription->find('all',
    array(
     'fields'=>array('Statsubscription.date','Statsubscription.type','COUNT(*) as qs'),
     'qroup'=>array('Statsubscription.date','Statsubscription.type'),
     'conditions'=>array('Statsubscription.nlist_id'=>$id),
     'recursive'=>-1,
      )
 ); 
```

But it does not work. The generated query is the following:

```
SELECT `Statsubscription`.`date`, `Statsubscription`.`type`, COUNT(*) as qs
FROM `statsubscriptions` AS `Statsubscription`
WHERE `Statsubscription`.`nlist_id` = 1 
```

GROUP BY is completly missing... Instead of the above I would like this query to be generated:

```
 SELECT `Statsubscription`.`date`, `Statsubscription`.`type`, COUNT(`Statsubscription`.`id`) as qs
    FROM `statsubscriptions` AS `Statsubscription`
    WHERE `Statsubscription`.`nlist_id` = 1
    GROUP BY `Statsubscription`.`date`, `Statsubscription`.`type` 
```

How can I achieve this? And what could be the reason of the missing GROUP BY?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:20:46.383

您正在写作`qroup`而不是`group`（那是`q`代替`g`）。这就是为什么它不起作用。

`P.S.: get some sleep...`

# php - 一种使用 PHP 检查端口的方法（多线程？）

> ID：10277793
> 
> 赞同：0
> 
> 时间：2012-04-23T09:19:20.093
> 
> 标签：php, multithreading, curl, multiprocessing, fsockopen

我目前正在使用 cURL multi 在几秒钟内检查数千个 http 状态代码，并且效果很好。
但是，我想知道 - 他们是否可以使用 cURL 或其他 PHP 多任务方法检查端口是否正在响应（例如 mysql）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:25:59.603

您可以使用`fsockopen()`扫描端口，但每个 PHP 脚本在 1 个线程上运行。

[http://php.net/manual/en/function.fsockopen.php](http://php.net/manual/en/function.fsockopen.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:30:37.110

简短的回答：

PHP 中没有线程。

但是，您可以查看[pcntl](http://php.net/manual/fr/book.pcntl.php)扩展名。它与线程无关，它是 fork（这意味着将为每个 fork 创建一个进程）。

几年前开发了一个[Thread 扩展](http://svn.php.net/viewvc/pecl/threads/)，但现在已经有 2 年没有更新了。

分叉是非常有价值的，可以在您的用例中使用，但是它不容易维护或编写。根据您的需要，您可能更希望使用 python 或 perl，它们都具有更好的线程支持。

# java - Passing data between threads in Java?

> ID：10277795
> 
> 赞同：1
> 
> 时间：2012-04-23T09:19:23.277
> 
> 标签：java, multithreading

I need my application to submit data to a web service and wait for 90 sec for the response. But if there's a no response in 60 secs I need to redirect the user to a different page and continue to wait for the the response for another 30 secs if it come then process it. I know I need to use thread for this but not sure how to integrate the treads in this case so threads can exchange data between themselves.

Any ideas?? I'm using JSF for UI.

The requirment is follows : The web service will send response in 90 secs (That's the maximum response time for it). But the user will be given a response(A dummy response in case the response does not come within 60 sec) in 60 sec. So even if the user has been given a dummy response (after 60 sec) my application will continue to wait for another 30 sec for the response

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:07:44.533

不太了解JSF，但听起来你想要一个计时器，可能是java.util.Timer。如果在计时器响起之前回答回来，请关闭计时器。如果计时器关闭，请将其重置 30 秒并重定向用户。下次它熄灭时，放弃等待正确答案。

这么多你似乎明白了。但是这里至少有两个交互线程线程。如何沟通？

只需使用实例字段。所有对它们的引用都应该使用`synchronized`方法或块中的代码来完成。这样做，你应该没事。你必须弄清楚，但我想你会有一个 int `timerPhase`，这表明计时器没有启动，在前 60 秒，在接下来的 30 秒内，或超时。也是一个布尔值`answerReceived`，里面有答案，也许还有其他一些。

（过多的同步会减慢您的程序速度。 *我认为您不会遇到这个问题。* 但如果您这样做，请将同步块拆分，每个字段单独同步，除非它们交互。删除同步并使用`volatile`关键字。阅读关于多线程。（阅读`volatile`关键字。）认真思考并行线程如何交互。并为事情变得非常奇怪做好准备。）

# android - Send Intent to App in Emulator

> ID：10277796
> 
> 赞同：8
> 
> 时间：2012-04-23T09:19:24.273
> 
> 标签：android, testing, android-emulator, adb

Is it somehow possible to send automated intents to an app inside an emulator for testing?

I have a list of all my intents and I want to test them automaticily, so is it possible to just do a `adb shell <myfancycommand> android.intent.action.PACKAGE_ADDED` to initiate the `android.intent.action.PACKAGE_ADDED` action on the device? Or do I have to write a script that calls all the stuff by its own, so for example for this intent install a dummy apk on the device?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:02:33.657

更简单的是`am`应用程序的使用。

您可以从 adb shell 中像这样运行它：

```
# am broadcast android.net.conn.CONNECTIVITY_CHANGE
Broadcasting: Intent { act=android.intent.action.VIEW dat=android.net.conn.CONNECTIVITY_CHANGE }
Broadcast completed: result=0
# am broadcast android.intent.action.BOOT_COMPLETED
Broadcasting: Intent { act=android.intent.action.VIEW dat=android.intent.action.BOOT_COMPLETED }
Broadcast completed: result=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:54:14.470

找到了这个 APK： http: [//isecpartners.com/mobile-security-tools/intent-fuzzer.html](http://isecpartners.com/mobile-security-tools/intent-fuzzer.html)它确实会向应用程序发送空值以查看它们是否失败。因为源是可用的，您可以轻松地将其更改为一些随机值，看看您是否得到一些响应！

# google-chrome-extension - 有没有办法在扩展中使用下载的（xml-esque）文件？

> ID：10277797
> 
> 赞同：1
> 
> 时间：2012-04-23T09:19:35.023
> 
> 标签：google-chrome-extension

我正在尝试为 Chrome 编写一个音乐下载管理器扩展。这实际上将涉及解析从站点下载的 .emx 文件 (xml-esque) 以获取临时音乐文件 URL。

我已经浏览了所有我可以在网上找到的关于使用下载的扩展，但问题在于 .emx 文件不能直接从网络访问。下载它的链接好像是通过你账户的计数器，这样它就可以扣除费用，然后它推送一个文件0.emx来下载。它似乎不适用于任何热链接，甚至将按钮的目标 URL 复制并粘贴到同一个浏览器选项卡中。

我认为获取文件的唯一方法是等待 0.emx 文件被推送。有什么方法可以在文件进入下载文件夹之前使用扩展来拦截该文件，或者在它已经下载后使用它？

谢谢！

# xml - 如何限制元素的文本？

> ID：10277798
> 
> 赞同：0
> 
> 时间：2012-04-23T09:19:35.617
> 
> 标签：xml, xsd, dtd

> **可能重复：**
> [DTD 元素类型问题](https://stackoverflow.com/questions/1778401/dtd-element-type-problem)

我有一个xml，其中有元素设施。

互联网

设施可以至少具有以下一项或多项：互联网、健身房、免费停车场、餐厅、接机服务、游泳池、会议厅、宴会厅。我如何在 dtd 和模式中应用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:25:16.430

您当然可以使用架构来做到这一点，它允许您将值限制为设置值的枚举。有关[此堆栈问题的更多信息](https://stackoverflow.com/questions/1778401/dtd-element-type-problem)

# java - 如何检索所有已注册的本地人

> ID：10277799
> 
> 赞同：1
> 
> 时间：2012-04-23T09:19:37.753
> 
> 标签：java, android, android-ndk, java-native-interface

通过该`RegisterNatives`函数，可以将本机函数绑定到 Java 方法签名。现在我遇到另一个库调用的情况，`RegisterNatives`我想从本机 C 调用这个函数（我不能从 Java 调用它，因为签名被标记为私有）。有什么方法可以检索所有当前注册的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:01:13.020

*   首先在要调用的标头中声明方法。*   创建一个要从 java 调用的 jni 接口。*   使用 make 文件中的库作为源，例如 -

    ```
    MY_BASE_JNI_PATH := $(LOCAL_PATH)
    JNI_SHARED_LIB_PATH := $(MY_BASE_JNI_PATH)/../lib/shared
    LOCAL_LDLIBS := \
                -L$(JNI_SHARED_LIB_PATHH) \
                -ljni_demo 
    ```

    *   在无法从 java 调用的 jni 方法中声明标头并实现您的 c 代码。

    如果你通过Android Gingerbread source jni场景就可以很好的理解。玩得开心...

# networking - 较小的 UDP 数据包大小是否会阻碍较高带宽网络的吞吐量？

> ID：10277800
> 
> 赞同：0
> 
> 时间：2012-04-23T09:20:00.213
> 
> 标签：networking, udp, throughput

我最近对跨 802.11g 网络的 UDP 吞吐量进行了一项实验，使用的数据包大小在 100 到 1000 之间，带宽从 6Mbps 到 54Mbps 不等。

我注意到更高带宽的性能不如我预期的那样好，我感觉这可能是由于我使用的数据包大小造成的。如果我选择更大的数据包大小，我在更高带宽网络上的吞吐量会更高吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:14:34.720

由于您使用的是无线网络，因此发送更长的数据包自然需要更长的时间，因此无线电干扰的可能性更高，这会导致更多的重传，从而降低有效带宽。无线网络中的最佳数据包大小可能取决于该区域的噪声量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T10:02:24.037

假设 IPv4，UDP 数据包有 28 字节的开销，即真正的 IP 数据包大小是 UDP 有效负载大小 + 28。因此，例如，如果您发送 56 字节数据包，则开销为 100%。如果您发送 280 字节的数据包，则为 10%。所以吞吐量会上升。

# ios - iOS：“@count == 0”的 NSPredicate 用于一对一和一对多关系

> ID：10277801
> 
> 赞同：2
> 
> 时间：2012-04-23T09:20:06.317
> 
> 标签：ios, xcode, core-data, nspredicate, nsmanagedobject

我想写一个`NSPredicate`适用于一对一和多对多关系的单曲：

1）我有一个`NSMutableArray`将运行`filterUsingPredicate`方法

2）NSPredicate 将过滤掉包含关系中任何对象的选定关系（同样，对于一对一和对多关系）。

我尝试过类似的东西`predicateWithFormat:@"relationshipObjects.@count == 0"`，但这似乎只适用于多对关系。是否有类似的谓词格式适用于一对一和一对多关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:43:58.003

我认为，您可以在这里使用检查**为零**。

```
predicateWithFormat:@"relationshipOject != nil" 
```

# javascript - 在原型函数中更改时更新数值变量

> ID：10277802
> 
> 赞同：0
> 
> 时间：2012-04-23T09:20:07.643
> 
> 标签：javascript, jquery, html

我正在尝试添加两个数字，但由于某种原因我没有得到 NaN。

以下是示例代码

```
function Slider(container, nav, pagination){
    this.articleWidth = this.div.width() + 20;
    this.divWidth = 960;
    this.articleMargin = 0;
    this.pageMargin = this.divWidth + this.articleMargin
}

Slider.prototype.articleTransition = function(pageNum){
    var currArticle = pageNum -1;
    this.articleMargin = currArticle * this.articleWidth;
    this.container.animate({'margin-left': -this.articleMargin});
} 
```

在这里一切都按预期工作。But`this.pageMargin`始终为 0，即使`this.articleMargin`' 的值在`articleTransition`函数中发生变化。当我控制台日志`this.pageMargin`是说`NaN`。`this.articleMargin`每次在函数中调用它时，我都试图改变它的值。

这是我在 HTML 中调用该函数的方式。

```
 var slider = new Slider($('div#contentSleeve'), $('a.anav'), $('ul#scroller li'));

    slider.pagination.live('click', function(){
        slider.articleTransition($(this).data('num'));
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:44:35.263

我想那是因为你在匿名函数范围内调用。试试这样：

```
slider.articleTransition.call(slider, $(this).data('num')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:09:15.493

我确实解决了这个问题。我所要做的就是创建一个全局变量来存储 pageMargin 和 ArticleMargin 的值。

# checkbox - CheckboxToogle ExtJS4

> ID：10277805
> 
> 赞同：0
> 
> 时间：2012-04-23T09:20:29.720
> 
> 标签：checkbox, extjs4, fieldset

我在 Extjs 4 中有一个带有 checkboxToggle 的字段集：

```
{
   anchor: '100%',
   xtype: 'container',
   layout: 'column',
   items: [{
     id: 'fieldsetNuovaTecnologia',
     columnWidth: .50,
     xtype: 'fieldset',
     title: 'Definisci Nuova Tecnologia',
     checkboxToggle: true,
     collapsed: true,// mantiene di default chiuso il fildset
     checkboxName: 'checkboxNuovaTecnologia', 
     items:[{.... 
```

如何验证它是选中还是未选中？

我试过：

1) Ext.getCmp('checkboxNuovaTecnologia').getValue();

2) Ext.get('fieldsetNuovaTecnologia').dom.checked;

但不工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:32:15.940

做这个：

```
var fieldsetCheckbox = Ext.getCmp('fieldsetNuovaTecnologia').checkboxCmp;
var isChecked = fieldsetCheckbox.getValue(); // isChecked = true or false 
```

# python - 在第一个断言失败后，我可以测试测试的所有断言吗？

> ID：10277806
> 
> 赞同：1
> 
> 时间：2012-04-23T09:20:30.343
> 
> 标签：python, django, unit-testing

我有一个不同音频格式的列表，应该将某个文件转换为这些格式。我编写的转换函数现在应该转换文件并返回成功信息、新创建文件的路径或一些失败信息。

```
self.AUDIO_FORMATS = ({'format':'wav', 'samplerate':44100, 'bitdepth':16 },
                      {'format':'aac', 'samplerate':44100, 'bitdepth':16 },
                      {'format':'ogg', 'samplerate':44100, 'bitdepth':16 },
                      {'format':'mp3', 'samplerate':44100, 'bitdepth':16 } ) 
```

由于其中一个转换失败的一个可能原因是缺少库，或者此类库或我的实现中的某些错误或失败，我想测试每个转换以最终获得通过和失败测试的列表，失败的那些告诉我究竟是哪个转换确实导致了麻烦。这是我尝试过的（有点简化）：

```
def test_convert_to_formats(self):

    for options in self.AUDIO_FORMATS:
        created_file_path, errors = convert_audiofile(self.audiofile,options)
        self.assertFalse( errors )
        self.assertTrue( os.path.isfile(created_file_path), 
```

当然，这是在第一次转换失败后立即中止测试。我可以为每个转换编写一个测试函数。这将导致必须为每个添加的格式编写一个新测试，现在我只需向我的 AUDIO_FORMATS 元组添加一个新字典。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T09:24:14.053

代替断言，将错误存储在数组中。在迭代结束时，断言 errors 数组为空，并可能将数组的内容作为断言失败的原因转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:01:02.337

为什么不使用 **尝试...除了...**？

```
 errors = []

  for option in optionlist:
    try:
      assert_and_raise1(option)
      assert_and_raise2(...)
    except Exception, e:
      errors.append("[%s] fail: %s"%(option, e))

   for e in errors:
     print e 
```

# android - 是否必须将广播接收器作为单独的文件？

> ID：10277808
> 
> 赞同：2
> 
> 时间：2012-04-23T09:20:46.257
> 
> 标签：android, android-intent

我在清单文件中声明了一个活动和一个广播接收器，但是，我的`onReceive()`活动中的代码作为一个单独的公共类。当我尝试从 adb 命令行触发广播时，出现`classnotfound`错误。

我的问题是，是否必须`broadcastreceiver`在单独的文件中将其作为单独的类？

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActivityAsDialogActivity.this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        :
        :
      }
public class TestEmail extends BroadcastReceiver{
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(MYINTENT)){
                    Log.d("Manju ==>","ActivityAsDialogActivity, Got the intent"+MYINTENT);
                    Toast.makeText(context, "Don't panik but your time is up!!!!.",
                            Toast.LENGTH_LONG).show();
            }//end of if statment
        }//end of onReceiver
    }//end of Broadcast
}//end of class ActivityAsDialogActivity 
```

下面是清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mot.activityasdialog"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ActivityAsDialogActivity"
             android:excludeFromRecents="true"
             android:theme="@style/EmptyActivity"
             android:configChanges="keyboardHidden|orientation|screenSize|uiMode">
             <!-- android:theme="@android:style/Theme.Holo.Dialog"
             android:label="@string/app_name" -->

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.mot.activityasdialog.ActivityAsDialogActivity.TestEmail" android:enabled="true">
           <intent-filter>
               <action android:name="com.mot.MANJU"></action>
           </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:52:12.097

简短的回答：是的，它需要是一个不同的类。并在一个单独的文件中。

长答案：由于您的 BroadcastReceiver 必须是 BroadcastReceiver 的子类，并且您的 Activity 必须是 Activity 的子类，并且 Java 不允许多重继承，并且 Activity 和 BroadcastReceiver 没有以合适的方式相关。是的，它必须是两个类。

它似乎也必须在自己的文件中。我试过了，如果是内部类，系统找不到广播接收器。公开与否。

# c# - 从 CreatedUser 事件中取消 CreateUserWizard

> ID：10277812
> 
> 赞同：2
> 
> 时间：2012-04-23T09:20:56.350
> 
> 标签：c#, asp.net, .net, createuserwizard

我正在使用 CreateUserWizard 和自定义 MembershipProvider 将用户添加到我们的数据库中。目前，用户已成功添加到数据库中，我正在使用 CreatedUser 事件来存储表单上捕获的附加信息。这很好用；但是，我希望能够在更新期间处理任何错误情况。

如果附加详细信息的更新失败，是否有办法重新显示带有错误的 CreateUserWizard 表单？

这是我在 CreatedUser 事件中的代码：

```
protected void RegisterUserWizard_CreatedUser(object sender, EventArgs e)
{
    try
    {
        // Try to update the customer table with the additional information
        using (OrderEntities entities = new OrderEntities())
        {
            // Read in all the values from the form
            TextBox custTitle = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerTitle");
            TextBox custName = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerName");
            TextBox custSurname = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerSurname");
            TextBox custAddress1 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine1");
            TextBox custAddress2 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine2");
            TextBox custAddress3 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine3");
            TextBox custCity = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCity");
            TextBox custCounty = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCounty");
            TextBox custPostcode = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerPostcode");
            DropDownList custCountry = (DropDownList)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCountry");

            Customer custInfo = entities.Customers.Where(c => c.UserName == RegisterUserWizard.UserName).FirstOrDefault();

            if (custInfo != null)
            {
                custInfo.Email = RegisterUserWizard.Email;
                custInfo.Password = RegisterUserWizard.Password;
                custInfo.Title = custTitle.Text;
                custInfo.Firstname = custName.Text;
                custInfo.Surname = custSurname.Text;
                custInfo.AddressLine1 = custAddress1.Text;
                custInfo.AddressLine2 = custAddress2.Text;
                custInfo.AddressLine3 = custAddress3.Text;
                custInfo.City = custCity.Text;
                custInfo.County = custCounty.Text;
                custInfo.Postcode = custPostcode.Text;
                custInfo.CountryID = custCountry.SelectedValue;
                custInfo.CreatedDate = DateTime.Now;

                entities.SaveChanges();

                FormsAuthentication.SetAuthCookie(RegisterUserWizard.UserName, false);

                // Redirect user back to calling page
                string continueUrl = RegisterUserWizard.ContinueDestinationPageUrl;
                if (String.IsNullOrEmpty(continueUrl))
                {
                    continueUrl = "~/";
                }
                Response.Redirect(continueUrl);

            }
            else
            {
                // Redisplay CreateUserWizard showing error message
            }
        }
    }
    catch
    {
        // Redisplay CreateUserWizard showing error message
    }
} 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:21:34.577

如果使用内容模板添加带有 ID ErrorMessage 的文字控件，则可以显示来自 CreateUserWizard 控件的错误。

```
<asp:Literal runat="server" EnableViewState="false" ID="ErrorMessage"></asp:Literal> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T22:56:57.173

好的，为这个找到了解决方法

一、修改后的 CreatedUser 事件处理函数：

```
protected void RegisterUserWizard_CreatedUser(object sender, EventArgs e)
{
    try
    {
        // Try to update the customer table with the additional information
        using (OrderEntities entities = new OrderEntities())
        {
            // Read in all the values from the form
            TextBox custTitle = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerTitle");
            TextBox custName = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerName");
            TextBox custSurname = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerSurname");
            TextBox custAddress1 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine1");
            TextBox custAddress2 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine2");
            TextBox custAddress3 = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerAddressLine3");
            TextBox custCity = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCity");
            TextBox custCounty = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCounty");
            TextBox custPostcode = (TextBox)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerPostcode");
            DropDownList custCountry = (DropDownList)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomerCountry");

            Customer custInfo = entities.Customers.Where(c => c.UserName == RegisterUserWizard.UserName).FirstOrDefault();

            if (custInfo != null)
            {
                custInfo.Email = RegisterUserWizard.Email;
                custInfo.Password = RegisterUserWizard.Password;
                custInfo.Title = custTitle.Text;
                custInfo.Firstname = custName.Text;
                custInfo.Surname = custSurname.Text;
                custInfo.AddressLine1 = custAddress1.Text;
                custInfo.AddressLine2 = custAddress2.Text;
                custInfo.AddressLine3 = custAddress3.Text;
                custInfo.City = custCity.Text;
                custInfo.County = custCounty.Text;
                custInfo.Postcode = custPostcode.Text;
                custInfo.CountryID = custCountry.SelectedValue;
                custInfo.CreatedDate = DateTime.Now;

                entities.SaveChanges();

                FormsAuthentication.SetAuthCookie(RegisterUserWizard.UserName, false);

                // Redirect user back to calling page
                string continueUrl = RegisterUserWizard.ContinueDestinationPageUrl;
                if (String.IsNullOrEmpty(continueUrl))
                {
                    continueUrl = "~/";
                }
                Response.Redirect(continueUrl);

            }
            else
            {
                // Throw an Exception so that we redisplay CreateUserWizard showing error message
                throw new Exception("An error occurred updating account details, please try again");
            }
        }
    }
    catch (Exception ex)
    {
        // Delete the incomplete user from the membership to avoid duplicate UserName errors if the user tries again
        Membership.DeleteUser(RegisterUserWizard.UserName); 

        // Store the error message in the Context and transfer back to the page preserving the form
        Context.Items.Add("ErrorMessage", ex.Message);
        Server.Transfer(Request.Url.PathAndQuery, true);
    }
} 
```

接下来，我向 ContentTemplate 添加了一个 CustomValidator，以便显示错误消息：

```
<asp:CustomValidator ID="CustomValidator" runat="server" ValidationGroup="RegisterUserValidationGroup" /> 
```

最后，我为 CreatingUser 事件添加了一个新的处理程序，以从 Context 中读取错误消息并使用 CustomValidator 显示它：

```
void RegisterUserWizard_CreatingUser(object sender, LoginCancelEventArgs e)
{
    // If we have received an error message in the Context then cancel the CreatingUser and display the message
    if (Context.Items["ErrorMessage"] != null)
    {
        CustomValidator custValidator = (CustomValidator)RegisterUserWizard.CreateUserStep.ContentTemplateContainer.FindControl("CustomValidator");
        custValidator.ErrorMessage = Context.Items["ErrorMessage"].ToString();
        custValidator.IsValid = false;
        e.Cancel = true;
    }
} 
```

现在如果发生错误；我可以显示一条友好的消息，整理 MembershipUser，最重要的是，用户在重试之前不会再次重新输入他们的所有详细信息。

# c# - 带有可为空参数的 Type.InvokeMember

> ID：10277813
> 
> 赞同：2
> 
> 时间：2012-04-23T09:21:06.960
> 
> 标签：c#, reflection, nullable

### 项目

我开发了一个远程处理类，用于替换 WCF 的子集。这样做是因为我们的目标是使用 Unity3D 的移动平台，并且需要保持内存消耗尽可能小。（*所以我们不需要包含 System.ServiceModel，它实际上有 2.7MB 的大小，这对于小型移动 RAM 来说已经很多了*）

它现在适用于所有类型（包括将使用我自己多年前编写的序列化程序进行序列化的复杂类型），并且它还能够处理复杂情况（A 调用 B，B 调用 A，A 返回一些东西，B 返回一些东西）。

### 方法调用

对于我正在使用的目标站点上的调用方法，`Type.InvokeMember`除了可空类型之外，它实际上适用于大多数情况。这就是我面临的问题。在我的接口定义中，该方法如下所示：

```
public interface IServerContract 
{
    void SetUsageID(Int32? id);
} 
```

（`ServerProxy`处理远程方法调用的对象）我正在执行以下操作：

```
public class ServerProxy : ProxyBase
{
    public void SetUsageID(Int32? id)
    {
         RemoteCall("SetUsageID", id);
    }
} 
```

像往常一样，参数`id`被装箱，因为 的定义`RemoteCall`如下所示：

```
public void RemoteCall(String methodName, params Object[] arguments) { ... } 
```

在这一点上，我只得到了一个`System.Int32`而不是一个可为空的。我正在序列化参数并在目标机器上反序列化它们。此时我正在调用`Type.InvokeMethod`这会导致异常，因为他找不到将 a`Int32`作为第一个参数的方法（第二个当不忽略此参数时）。

这个问题的最佳解决方案是什么？有多种方法，但都会对性能产生影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:36:31.657

拳击规则`int?`确实意味着一旦你拥有它，`object`你就会看到：

*   *空*值是`null`, 什么也看不出来
*   *非空*值仅被称为不可为空的类型
    *   所以具体来说，通过`(int)5`并在内部`(int?)5`具有**完全相同**的外观`object`

因此，可用的选项：

*   确保方法名称是唯一的，因此您可以按名称唯一地解析为 a `MethodInfo`，然后使用`MethodInfo.Invoke`（这确保参数中没有歧义）
*   尝试解析接受不可为空类型的方法，然后改为寻找可空类型（多参数方法变得复杂）
*   传递有关您正在调用的方法的更多元数据（增加大小）

不过，就我个人而言，我对这些事情有一个非常简单的看法......而不是试图编码一个模糊的多参数方法，另一种选择是简化为始终传递一个**基于**DTO 的参数 - 即而不是`SetUsageID(int?)`你可以有`SetUsage(SetUsageArgs)`（或类似的东西），`SetUsageArgs`恰好有一个属性。关键是：您现在只是对单个 DTO 进行编码，一旦您反序列化了该 DTO，就没有歧义了。

# odata - 如何跟踪 odata 交易？

> ID：10277814
> 
> 赞同：0
> 
> 时间：2012-04-23T09:21:12.147
> 
> 标签：odata

我需要知道我通过 odata 协议收到了多少请求。有什么办法可以跟踪这个吗？我需要它用于分析目的。（不允许使用自定义工具，但如果你能指出一些，它可能会很棒）。

谢谢， 里特维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:33:58.643

您可以考虑的几个选项：

如果您需要将数据捕获为您自己的自定义格式/数据库挂钩到 WCF 数据服务处理管道（那里有用于预处理和后处理查询和数据更改事件的一般事件） - [CodeProject 示例](http://www.codeproject.com/Articles/190202/WCF-Data-Services-Processing-Pipeline)

如果您需要自己的格式但针对特定实体，请查看查询和更改拦截器 - [MSDN](http://msdn.microsoft.com/en-us/library/dd744842.aspx)

如果您可以使用另一个框架并且需要一个快速、准备就绪的仪表板（内置于 IIS），请查看 AppFabric 监控（需要在服务器上进行一些安装/设置）[WCF 数据服务和 AppFabric](http://blogs.msdn.com/b/rjacobs/archive/2010/06/30/appfabric-wcf-data-service-cs.aspx)

# c++ - C++ 是否有必要在主范围的末尾删除动态分配的对象？

> ID：10277817
> 
> 赞同：8
> 
> 时间：2012-04-23T09:21:31.917
> 
> 标签：c++, memory-management, memory-leaks

在 C++ 中使用动态分配的对象时，例如：

```
TGraph* A = new TGraph(...); 
```

应该始终`delete`使用这些，否则当控制权交还给父范围时，对象可能仍在内存中。虽然我可以理解为什么程序的子作用域和子例程都是如此，但`main`作用域也同样重要吗？

我是否必须使用`delete`内部动态构建的对象`main()`？这对我来说似乎有点多余的原因是当`main`结束时，程序也结束了，所以不必担心内存泄漏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T09:23:55.753

大多数现代操作系统总是回收分配给程序（进程）的所有内存。
操作系统并不真正了解您的程序是否泄漏了内存，它只是收回了分配的内容。

但手头的问题不仅仅是记忆丧失：

`delete`请注意，如果需要调用的对象的析构函数执行一些重要的操作，并且您的程序依赖于它产生的副作用，那么您的程序就会成为**未定义行为的牺牲品**^([参考 1])。一旦发生这种情况，所有赌注都将关闭，您的程序可能会显示任何行为。

此外，操作系统通常会回收分配的内存而不是其他资源，因此您可能会间接泄漏这些资源。这可能包括处理文件描述符或程序本身状态等的操作。

因此，最好总是通过调用`delete`或`delete []`在退出程序之前释放所有分配。

* * *

^([参考 1]) **C++03 标准 3.8 第 4 段：**

> "....**如果没有显式调用析构函数或者如果没有使用删除表达式 (5.3.5) 来释放存储，则不应隐式调用析构函数并且生成任何依赖于副作用的程序析构函数具有未定义的行为**。”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T09:25:17.937

IMO 最好始终`delete`正确调用：

*   让它成为一种自动的习惯，使它在真正需要时不太可能忘记它
*   涵盖需要释放非内存资源（套接字、文件句柄等）的情况——操作系统不会自动释放这些资源
*   当有问题的代码可能移出`main`范围时，以适应未来的重构

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T09:23:01.087

是的，你应该打电话`delete`，至少因为这是最佳做法。如果你的析构函数中有重要的逻辑，那是你应该调用`delete`.

更正：如果程序依赖于析构函数中的逻辑，则不`delete`显式调用会导致未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:32:57.417

> 这对我来说似乎有点多余的原因是当 main 结束时，程序也结束了，所以不必担心内存泄漏。

你是对的，但考虑一下：你创建了一个类对象，它打开了与远程数据库的连接。在你的程序完成后，你应该告诉数据库“我已经完成了，我要断开连接”，但如果你没有正确调用 delete，它就不会发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T09:35:57.103

取消分配已分配内存的最佳实践。您应该记住，堆内存是有限的，并且在程序运行时仅分配而不取消分配可能会为其他/或同一程序运行堆空间（如果它是某种旨在运行的守护进程）很长一段时间）需要堆。

当然，内存将在程序执行结束时由操作系统回收。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T09:50:31.130

我看到您正在使用 ROOT（CMS 家伙？）。我认为 ROOT 会处理这个并进行清理，不是吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T11:14:19.177

最佳实践：

1.  不使用`new`，使用自动分配
2.  当需要动态分配时，使用 RAII 确保自动清理

您永远不必编写`delete`应用程序代码。

在这里，你为什么`new`打电话`TGraph`？

```
TGraph A(...); 
```

效果更好：减少烦恼！

# java - 从 Eclipse 插件，如何以编程方式使 Eclipse 编辑某个文件？

> ID：10277818
> 
> 赞同：3
> 
> 时间：2012-04-23T09:21:37.563
> 
> 标签：java, eclipse-plugin, editor

我有一个创建新视图的插件。在我看来，我显示了有关项目中某些 Java 类的某些信息。我想让用户在我的视图中双击一个类，当他/她这样做时，我想打开该类以在编辑器中进行编辑。基本上类似于 Hierarchy View 所做的：它显示类树，当用户双击其中一个时，它会进入编辑器。如果我拥有的是类型的对象，我该怎么做`IType`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:27:07.707

我将根据您的要求展示一个高级实现。您必须执行以下步骤。

*   首先，您必须分别`Plugin.xml`为扩展的类 `viewPart`以及`editorPart`视图和编辑器进行输入。
*   对于层次结构视图，您必须在 `ViewPart`.
*   在节点的双击监听器上，您必须打开编辑器。

要在编辑器中打开文件，请使用以下代码打开编辑器。

```
 if (fileToOpen.exists() && fileToOpen.isFile()) {
     String path = //Path for that to file to open;
     IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
     URI fromString = org.eclipse.core.runtime.URIUtil.fromString("file://" + path);
     try {
         IEditorPart openEditor = IDE.openEditor(page, fromString, Editor.ID, true);
         IEditorInput editorInput = openEditor.getEditorInput();
         //editorInput.
     } catch ( PartInitException e ) {
         //Put your exception handler here if you wish to.
     }
 } 
```

# c - 找不到从排序数组构建平衡二叉树的错误（段错误）

> ID：10277821
> 
> 赞同：-3
> 
> 时间：2012-04-23T09:21:41.743
> 
> 标签：c, data-structures, segmentation-fault

我正在做这个任务，虽然我还是 C 编程新手，但我认为我对内存引用和指针使用有了更好的掌握......

我想要做的是从一个排序的数组创建一个平衡的二叉树。当我尝试调用我的树构建函数时，我抛出了分段错误。如果我离开该函数调用并只打印我的数组，那么一切都会编译并运行良好，并具有预期的输出。

我已经像这样构建了树的节点：

```
typedef struct leaf{
    int value;
    struct leaf* left;
    struct leaf* right;
} LEAF; 
```

我的排序/建树函数库：

```
LEAF* balance( int n[], int first, int last ){
    int mid;
    LEAF* ptr = NULL;
    printf( "in Balance" );
    if ( first > last ) return NULL;

    mid = first + (last - first)/2;
    ptr->value = n[mid]; 

    ptr->left = ( balance( n, first, mid-1 ) );
    ptr->right = ( balance( n, mid+1, last ) );

    return ptr;        
}
void ins ( int* n, int length ){  //Don't THINK the problem lies here, 
                                    I've used the algorithm before and can 
                                    print out the sorted array
    int i, j, key;

    for( i = 0; i < length; i++ ){/*all indexes*/
            key = n[i]; /*pick out index and store in variable*/
            for( j = i-1; j >= 0; j = j-1 ){/*all objects left of i*/
                    if ( n[j] < key) break;/*stop and insert*/
                    n[j + 1] = n[j];/*shifting all objects left*/
            }
            n[j + 1] = key;/*insertion expression*/
    }
} 
```

回到 main()，我构建我的数组 n[] 并像这样调用 balance()：

```
int main (void){
/****** initializations */
    int* n;
    char buffer[20];
    FILE* fp;
    int numMax = 5;
    int lastIndex = 0;
    int j;
    char* filename = "numbers.txt";
    LEAF* root = NULL;
    n = malloc ( numMax * sizeof(int*) );

    if ( ( fp = fopen(filename, "r")) == NULL ){
            printf( "cannot open %s\n", filename );
            exit( 1 );
    }

/****** allocating storage array and inputting */
    printf( "initial array size: %d", numMax );
    while( fgets( buffer, sizeof(buffer), fp ) != NULL){
            n[lastIndex] = atoi( buffer );
            lastIndex++;

            if ( lastIndex == numMax ){  /*When max num reached, double allocation*/
                    numMax = numMax * 2;
                    if ( ( n = realloc( n, numMax * sizeof(int) ) ) == NULL ){
                            printf( "Cannot allocate more mem." );
                            exit( 1 );
                    }

                    printf( "\nReached limit... increasing array to %d possible indexes.", numMax );
            }

    }
    lastIndex--;

/****** sort*/
    ins( n, lastIndex+1 );

/****** build tree*/
    root = balance( n, 0, lastIndex ); 
```

我知道这里有很多代码可能不是解决我的问题所必需的。我把我几乎所有的代码都放在了这篇文章中，只是有可能我在我没想到的地方搞砸了。我希望这可能是一个非常简单的解决方案，会让我感到愚蠢。我觉得我越笨，我犯两次错误的可能性就越小！

不过奇怪的是：我什至看不到 printf("in Balance") 语句，如果我将其他 printf() 放在 root = balance() 函数调用上方的几行内，它们不会在段错误之前也不打印。也许这是我不理解的编译器中的一些动态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:26:49.193

我看不到`ptr`变量是如何在函数中分配的`balance`。 `ptr->value`除非您将指针指向某处（为它分配一些内存，或将其指向一些现有内存），否则将始终导致取消引用 null。

```
LEAF* ptr = NULL;
printf( "in Balance" );
if ( first > last ) return NULL;

mid = first + (last - first)/2;
ptr->value = n[mid]; 
```

# ruby - 一个字符串（这看起来像一个数组）到一个数组 Ruby

> ID：10277829
> 
> 赞同：1
> 
> 时间：2012-04-23T09:22:17.447
> 
> 标签：ruby

我有一个看起来像这样的 API 的输出......（它是一个字符串）

```
[[2121212,212121,asd],[2323232,23232323,qasdasd]] 
```

它是一个字符串 - 不是一个数组。我想将它转换为一个数组，然后将嵌套数组中每个数组的前两个元素提取为：

```
[2121212,212121],[2323232,23232323] 
```

做这个红宝石的最好方法是什么？我可以使用正则表达式和提取 - 但基本上字符串已经是一个数组，但是类是一个字符串。

我试过

```
array.push(response) 
```

但这只是将字符串作为一个元素放入数组中。我想好的是一个 to_array 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:51:55.750

如果不是 eval (shrudder ...)，你无论如何都需要使用正则表达式，这是最短的一个

```
str = "[[2121212,212121,asd],[2323232,23232323,qasdasd],[2424242,24242424,qasdasd]]"
p str.scan(/(\d+),(\d+)/)

=>[["2121212", "212121"], ["2323232", "23232323"], ["2424242", "24242424"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:08:20.840

使用 eval 非常糟糕，但我没有其他简单的选择。

```
test_str = "[[2121212,212121,asd],[2323232,23232323,qasdasd]]"
test_str.gsub!(/([a-z]+)/) do
  "'#{$1}'" 
 end
 => "[[2121212,212121,'asd'],[2323232,23232323,'qasdasd']]"
test_array = eval(test_str)
 => [[2121212, 212121, "asd"], [2323232, 23232323, "qasdasd"]]
test_array.each do |element|
  element.delete(element.last)
end
 => [[2121212, 212121], [2323232, 23232323]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:01:42.730

假设这是一个 JSON 响应（如果是这样，它的格式很不正确，您应该与负责此的人交谈），您可以编写如下内容：

```
require 'json'

input= '[[2121212,212121,Asd],[2323232,23232323,qasdasd]]'
input.gsub!(/([A-Za-z ]+)/,'"\1"')
json = JSON.parse input
output = json.map{|x| x[0...2]}
p output 
```

这打印

```
[[2121212, 212121], [2323232, 23232323]] 
```

# javascript - 只有相对定位的子元素的自动高度

> ID：10277831
> 
> 赞同：0
> 
> 时间：2012-04-23T09:22:29.643
> 
> 标签：javascript, jquery, html, css, position

正如您[在此处](http://bramvanroy.be/infoToolTip/)看到的，您需要应用静态高度，`#wrapper`否则 div 将不包含其子级。（这是[小提琴](http://jsfiddle.net/BramVanroy/y5nYN/13/)）这很合乎逻辑。但是，我希望我可以给#wrapper 一个自动高度，通过它可以包含多行相对定位的元素。

我想我可以在单个项目周围添加另一个包装器并将它们静态定位？但我宁愿不添加更多的 HTML。如果需要，可以使用 JS/jQuery 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:30:47.073

有一个**浮动**是您的孩子 DIV，因此您必须清除它`parent`并从中删除高度。像这样写：

```
#wrapper {
    background-color: white;
    min-height: 360px;
    margin: 50px auto;
    overflow: hidden;
    padding: 10px;
    width: 1008px;
} 
```

检查这个[http://jsfiddle.net/y5nYN/16/](http://jsfiddle.net/y5nYN/16/)

# extjs - CF 9.0.1（ExtJs 更新？）

> ID：10277835
> 
> 赞同：0
> 
> 时间：2012-04-23T09:22:40.137
> 
> 标签：extjs, coldfusion, toolbar, cfgrid

我的“crud”页面中有一个 cfgrid，类似于：

```
<cfset args = StructNew()>
<cfset args.name = "ProductsGrid">
<cfset args.format = "html">
<cfset args.bindOnLoad = "true">
<cfset args.stripeRows = true>
<cfset args.SELECTColor = "##D9E8FB">
<cfset args.pagesize = 25>

<cfgrid attributeCollection="#args#" autowidth="yes" fontsize="11">
        <cfgridcolumn name="artid" display="false" width="1">
        <cfgridcolumn name="marchio" header="Marchio" width="100">        
</cfgrid> 
```

此外，我（几年前）创建了这个 JS 来向我的网格底部工具栏添加按钮。

```
init = function() {
        grid = ColdFusion.Grid.getGridObject("ProductsGrid");
        var tbar = grid.getBottomToolbar();;
        tbar.addButton({text:"Nuovo", handler:onAdd });
        tbar.addSeparator();
        tbar.addButton({ text:"Modifica", handler:onEdit });
    }

ColdFusion.Event.registerOnLoad(init,null,false,true); 
```

现在我将我的 CF 版本更新为 9.0.1（修补程序 1 和 2），这停止工作：

网格工作正常，确实，没有创建按钮（调用了 init 函数，我对其进行了测试）。

怎么了，有什么变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:10:12.960

它可能是工具栏实例化后的两个分号。

```
var tbar = grid.getBottomToolbar();; 
```

# java - KSoap2 进入 Activity Oncreate 事件的问题

> ID：10277838
> 
> 赞同：0
> 
> 时间：2012-04-23T09:22:58.870
> 
> 标签：java, android, soap, httpclient, ksoap

我在使用 ksoap2 时遇到问题 我无法使用 SoapObjects 我收到一个错误：

错误：找不到源

您可以通过单击带有标签 Atacth Source 和 After public Abstract Class java.lang.classloader{.......}

***我写到我的活动课上***

SoapObject 请求 = new SoapObject(nSpace, METHODNAME);

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
      envelope.dotNet=true;
      envelope.setOutputSoapObject(request);

      envelope.dotNet=true;
      envelope.setOutputSoapObject(request);http://stackoverflow.com/editing-help

      HttpTransportSE androidHttpTransport = new HttpTransportSE(URL); 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:28:01.100

你没有寄信封...

**`androidHttpTransport.call(SOAP_ACTION, envelope);`**

这是您的代码中唯一没有的行....

# sql - 从表中选择数据但没有

> ID：10277843
> 
> 赞同：1
> 
> 时间：2012-04-23T09:23:13.387
> 
> 标签：sql

我有一张这样的桌子：

```
NAME, SURNAME, TIME_SESSION

John, White, Morning
John, White, Evening
Alexander, Black, Morning
Carl, Yellow, Morning
Carl, Yellow, Afternoon
James, Red, Morning
James, Red, Evening 
```

我必须从该表中提取 time_session = 'Morning' 的所有元素，但不提取也具有 time_session='Evening' 或 time_session = 'Afternoon' 的记录。结果必须在此示例中：

```
Alexander, Black, Morning. 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:26:48.593

对同一个表进行左连接，并检查这些是否匹配：

```
select NAME, SURNAME, TIME_SESSION
from TheTable t1
left join TheTable t2 on t2.NAME = t1.NAME and t2.TIME_SESSION = 'Evening'
left join TheTable t3 on t3.NAME = t1.NAME and t3.TIME_SESSION = 'Afternoon'
where t1.TIME_SESSION = 'Morning' and t2.NAME is null and t3.NAME is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:30:17.077

或者（与 Guffa 的回复不同的方法），您可以使用单个查询`IF EXISTS()`：

```
SELECT Name, Surname, Time_Session
FROM dbo.YourTable t1
WHERE t1.Time_Session = 'Morning'
AND NOT EXISTS (SELECT * FROM dbo.YourTable t2 
                WHERE t1.NAME = t2.Name AND t1.Surname = t2.Surname 
                  AND t2.Time_Session IN ('Afternoon', 'Evening')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:39:30.807

如果您正在寻找拥有一个而不是一个或多个其他人的人..

```
SELECT * 
FROM myTable AS t
WHERE 
    TIME_SESSION = 'Morning'
    AND NOT EXISTS (
        SELECT * FROM myTable AS s
        WHERE 
            s.NAME = t.NAME
            AND s.SURNAME = t.SURNAME
            AND s.TIME_SESSION IN ('Afternoon')
        ) 
```

或者，如果您正在寻找只有一个条目的人

```
SELECT
    NAME, SURNAME
FROM 
    myTable 
GROUP BY 
    NAME, SURNAME
HAVING COUNT(*) = 1 
```

然后您可以加入：

```
SELECT 
    t.*
FROM
    myTable AS t
    INNER JOIN (
            SELECT
                NAME, SURNAME
            FROM 
                myTable 
            GROUP BY 
                NAME, SURNAME
            HAVING COUNT(*) = 1
    ) AS l ON l.NAME = t.NAME AND l.SURNAME=t.SURNAME 
```

# google-app-engine - 在 Data Store 中保存额外的联系人数据

> ID：10277850
> 
> 赞同：0
> 
> 时间：2012-04-23T09:23:37.653
> 
> 标签：google-app-engine, social-networking, google-cloud-datastore

我们正在使用 GAE 制作社交网络，当我们要创建用户时，我们需要保存有关 facebook、twitter 等的联系人数据......

这个额外的联系人数据必须由管理员管理，因此如果管理员添加“Whatsapp”，则必须向所有用户显示“Whatsapp”字段可选，如果管理员删除了 facebook 数据，则必须删除所有用户的 facebook 信息。

考虑到最有效的方式，保存这些数据的最佳选择是什么，例如，获取所有用户的 facebook，删除所有用户的 twitter ......由管理员？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:21:25.037

有很多方法可以解决这个问题。一种是有一个配置模型，例如（假设是python）......

```
class Config(db.Model):
  """ singleton model """
  twitter  = db.BooleanProperty(default=False)
  facebook = db.BooleanProperty(default=False)
  whatsapp = db.BooleanProperty(default=False) 
```

并在您的个人资料模型上为每个社交用户名单独字段...

```
class Profile(db.Model):
  name = db.StringProperty()     # users name
  twitter = db.StringProperty()  # store twitter username here
  facebook = db.StringProperty() # store facebook username here
  whatsapp = db.StringProperty() # store whatsapp username here 
```

当您将配置文件呈现给客户端时，请检查 Config 类以查看已启用哪些社交字段，并仅呈现这些字段。

要处理删除，您可能需要编写一个 cron 作业来遍历所有配置文件并删除配置模型上已禁用的任何数据。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:40:21.980

您当然应该将所有包含用户特定数据的实体存储在用户的实体组中。这使您能够使用[祖先查询](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_ancestor)检索和操作这些实体，这比非祖先查询执行得更好。

要使详细实体成为用户实体组的一部分，您只需使用`parent`参数创建它们。例如：

```
class TwitterData(db.Model):
    twitter_name = db.StringProperty

def addTwitterData(user, twitter_name):
    # User is an instance of users.User
    new_twitter_entity = TwitterData(parent=user)
    new_twitter_entity.twitter_name = twitter_name
    new_twitter_entity.put() 
```

现在，我可以像这样获取用户的数据：

```
twitter_accounts = TwitterData.all().ancestor(user).fetch(1000) 
```

此外，您可以使用*kindless 祖先查询*来获取用户实体组中的所有实体：

```
all_networks = db.Query()
all_networks.ancestor(user).fetch(1000)
# Now, ancestor has all of user's Twitter, Facebook, Myspace accounts. 
```

这种方法的优势之一是它允许您的用户在任何各种服务中拥有多个帐户。

如果您需要为不同社交网站存储的数据差异太大而无法由单个简单模型提供服务，您可以使用[Expando](https://developers.google.com/appengine/docs/python/datastore/expandoclass)类来存储存储不同类型数据的实体。

# mobile - Yii - 使用桌面和移动设备的两种主要布局

> ID：10277852
> 
> 赞同：1
> 
> 时间：2012-04-23T09:23:43.820
> 
> 标签：mobile, jquery-mobile, themes, yii

我正在开发一个简单的应用程序，它将被台式机和移动设备使用。

我正在尝试使用这种方法：

在主控制器中呈现主要操作之前，我正在检查浏览器是否属于“移动”类别（使用插件 detecmobilebrowser [detecmobilebrowser](http://www.yiiframework.com/extension/detectmobilebrowser/)）然后我需要切换到另一个流程（可用的操作会有所不同）并且对于此操作我将使用使用 jquery mobile 开发的布局来确保对不同设备的兼容性。

用一个：

```
$this->layout='//layouts/mobile'; 
```

更改布局，但首先呈现 main.php。

有没有办法在不创建新主题的情况下解决这个问题？

谢谢你的支持

# symfony - Symfony2 Forms - 无法从集合中添加/删除实体

> ID：10277858
> 
> 赞同：0
> 
> 时间：2012-04-23T09:23:58.933
> 
> 标签：symfony, symfony-forms

我有一个“人”实体的表格，其中包含“昵称”的集合。

我已经按照食谱中的指南实现了这一点（http://symfony.com/doc/current/cookbook/form/form_collections.html）

当我创建一个新的“人”时，我可以按预期成功添加“昵称”。

使用类似的表格，我有一个编辑页面。在编辑页面上，我已经以与新页面相同的方式设置了前端。

在编辑页面上，我可以成功编辑现有的昵称和其他简单字段。但是，当我提交一个新的“昵称”（或尝试删除一个）时，它不起作用。

在绑定到“Person”之前，我已经对请求对象进行了 var_dump() 处理，并且在绑定之后对“Person”对象进行了 var_dump() 处理。该请求确实正确传递了“昵称”集合。但是，它们根本没有绑定到 Person，尽管事实上一切都与新页面相同。此外，我仍然可以编辑现有的昵称，以便它在这方面工作。

我一生都无法弄清楚为什么 Symfony 没有创建这些新昵称或将它们添加到 Person 中。我环顾四周并进行了搜索，但一切都证实它应该工作 - 但事实并非如此。

以下是 Person 表单类型上的 Nicknames 条目：

```
->add('nicknames', 'collection', array(
        'type'           => new NicknameType(),
        'allow_add'      => true,
        'allow_delete'   => true,
        'prototype'      => true,
        'by_reference'   => false,
        'required'       => false
)) 
```

昵称类型只有一个字段 - “昵称”及其文本输入。

有什么帮助吗？谢谢阅读。

编辑：

这是更新操作（将 Person 更改为 Player）：

```
public function updateAction($id, Request $request)
{
    $em = $this->getDoctrine()->getManager();

    $player = $em->getRepository('SCDBAppBundle:Player')->find($id);

    if (!$player) {
        throw $this->createNotFoundException('Unable to find Player.');
    }

    $editForm   = $this->createForm(new EditPlayerType(), $player);
    $deleteForm = $this->createGenericIDForm($id);

    $editForm->bindRequest($request);

    if ($editForm->isValid()) {
        $em->persist($player);
        $em->flush();

        return $this->redirect($this->generateUrl('admin_player_edit', array('id' => $id)));
    }

    return array(
        'player'      => $player,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
} 
```

我意识到要真正坚持删除昵称，我需要更改代码以保持不变。我现在什至不担心持久性，因为主要问题是在我将请求绑定到 Player 表单后，$player 对象不包含更新的 Nicknames 集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:51:58.480

如果您使用的不是 Symfony master 而是 2.0.x，请注意，因为那里的“collection”类型有问题。但是，如果您使用的是 Symfony master，请确保包含最新版本的 Doctrine（2.2.3 或 2.1.7），因为已经修复了两个影响“集合”类型正确工作的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T11:11:37.783

也许尝试使用`NicknameType::class`而不是 new `NicknameType()`。

我建议`cascade: [ persist ]`为您的实体添加 conf 属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-05T20:05:11.587

您必须通过以下方式从请求中获取数据：

```
$objPerson = $editForm->getData();
$em->persist($objPerson);
$em->flush(); 
```

否则，您更新旧对象而不更改表单。

简短：您只更新了之前从数据库加载的对象。

# javascript - 如何关闭我的弹出窗口并留在参考页面上的同一位置？

> ID：10277859
> 
> 赞同：0
> 
> 时间：2012-04-23T09:24:01.337
> 
> 标签：javascript, html, css

我有一个弹出窗口，当我关闭它时，我应该返回的页面向上滚动。当我关闭弹出窗口时，如何避免引用页面一直向上滚动？我希望引荐页面留在原处。

我关闭弹出窗口的代码是

`<a href="#" onclick="document.getElementById('popupD').style.display = 'none';" " align="right">Close</a>`

如何以我想要的方式完成？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-07T08:03:22.130

只需替换`href="#"`为`href="javascript://"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:29:51.857

我认为以下内容会对您有所帮助。

```
$('#popupD , .popup_block').fadeOut(function() {
    $('#popupD, a.close').remove();  //fade them both out
}); 
```

干杯...！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:38:28.157

如果没有看到您是如何创建弹出窗口的，就很难说出确切的信息。但是，您似乎有一个`DIV`相对于文本流定位的元素。`position:absolute`只需使用或将弹出窗口置于文本流之外`position:fixed`。

# php - 在标头之后但在收到正文之前启动 PHP 脚本

> ID：10277860
> 
> 赞同：1
> 
> 时间：2012-04-23T09:24:13.223
> 
> 标签：php, apache, stream

使用 PHP 和 Apache，是否可以在收到标头之后但在发送正文之前启动 PHP 脚本？

我的意思是这样的：

```
PUT /sync/testStream.php HTTP/1.1
Host: localhost
User-Agent: test
Content-Length: 500
Content-Type: text/plain

<start the script here>

hello
this is a test 
```

目标是在脚本期间锁定文件（实际上是在上传期间）。

我尝试从 php://input 读取，但没有成功：脚本仅在收到整个正文时启动。

这是我的脚本：

```
<?php
echo "Hello. Start sending data.";
ob_flush();

$file = fopen('php://input', 'r');
if ($file === false) {
    die("Could not open php://input");
}

while (($line = fgets($file)) !== false) {
    echo $line;
}

echo "Bye"; 
```

欢迎任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:31:22.273

我以前在这里看到过这个问题（现在找不到，但我有），经过多次讨论/辩论，得出的结论是不，你不能。

这是因为文件上传过程和请求正文的接收由覆盖的 Web 服务器处理，并且 PHP 直到请求被完全接收/解析/验证后才会启动。

这里的一点是，您的脚本似乎试图通过 HTTP 建立全双工通信，这是不可能的。HTTP本质上是一个半双工协议——它有一个请求-响应架构，在你完全收到请求之前你不能开始发送响应，这将违反协议。

如果您准确解释您要做什么/为什么要在上传期间锁定文件，也许我们可以找到替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:31:20.257

实际上，这是不可能的，因为 PHP 在 HTTP 请求完成之前并不知道任何请求。也就是说，PHP 在上传完成后接收查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:31:21.367

PHP 在整个请求之后执行。要实现此功能，您可以编写自定义 apache 模块。

# ios - 如何在 UIButton 子类中设置 UIButton 类型

> ID：10277863
> 
> 赞同：24
> 
> 时间：2012-04-23T09:24:21.413
> 
> 标签：ios, uibutton, subclass

我正在继承 UIButton，我想要的是将按钮类型设置为 Round Rect。

按钮.h

```
@interface Button : UIButton {}
    - (void)initialize;
@end 
```

按钮.m

```
@implementation Button

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self initialize];
    }
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if(self){
        [self initialize];
    }
    return self;
}

- (void)initialize
{
    self.titleLabel.font = [UIFont systemFontOfSize:20];
    self.titleLabel.textColor = [UIColor redColor];
    self.titleLabel.textAlignment = UITextAlignmentCenter;
   //[UIButton buttonWithType:UIButtonTypeRoundedRect];
}

@end 
```

在这里我试过`[UIButton buttonWithType:UIButtonTypeRoundedRect]`但它不起作用。谁能建议如何使它工作？

我知道在之前的许多帖子中都说不推荐对 UIButton 进行子类化，但事实上在 Developer's Docs 中没有提到不对其进行子类化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T10:07:37.977

您可以在 CocoaBuilder 的线程[How to subclass UIButton?中找到讨论。](http://www.cocoabuilder.com/archive/cocoa/284622-how-to-subclass-uibutton.html)有帮助，尤其是[Jack Nutting 建议忽略 buttonType](http://www.cocoabuilder.com/archive/cocoa/284622-how-to-subclass-uibutton.html#284656)：

> 请注意，这种方式 buttonType 没有显式设置为任何内容，这可能意味着它是 UIButtonTypeCustom。文档似乎并没有真正指定这一点，但由于这是枚举中的 0 值，因此很可能会发生这种情况（这似乎也是可观察到的行为）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-17T23:10:03.400

# `UIButton`Swift 中的子类

*以下代码适用于 Swift 3 及更高版本。

您不能通过设计设置`buttonType`子`UIButton`类的。它会自动设置为`custom`，这意味着您将以简单的外观和行为作为起点。

如果您想重用设置按钮外观的代码，您可以在不使用子类的情况下执行此操作。一种方法是提供创建`UIButton`和设置视觉属性的工厂方法。

## 避免子类化的示例工厂方法

```
extension UIButton {
    static func createStandardButton() -> UIButton {
        let button = UIButton(type: UIButtonType.system)
        button.titleLabel?.font = UIFont.boldSystemFont(ofSize: 16)
        button.setTitleColor(UIColor.black, for: .normal)
        button.setTitleColor(UIColor.gray, for: .highlighted)
        return button
    }
}

let button = UIButton.createStandardButton() 
```

`UIButton`当其他定制技术足够时，我会避免子类化。工厂方法示例是一种选择。还有其他选项，包括 UIAppearance API 等。

有时存在需要子类化的定制需求。例如，我创建了`UIButton`子类来精细控制按钮如何响应触摸事件进行动画处理，或者让按钮在点击时调用预定义的委托或闭包（而不是为`#selector`每个实例分配 a）。

下面是一个基本的`UIButton`子类示例作为起点。

## 示例 UIButton 子类

```
internal class CustomButton: UIButton {

    init() {
        // The frame can be set outside of the initializer. Default to zero.
        super.init(frame: CGRect.zero)
        initialize()
    }

    required init?(coder aDecoder: NSCoder) {
        // Called when instantiating from storyboard or nib
        super.init(coder: aDecoder)
        initialize()
    }

    func initialize() {
        print("Execute common initialization code")
    }
}

let button = CustomButton()
print(button.buttonType == .custom)  // true 
```

## 关于`UIButtonType`

自 2012 年提出该问题以来，该问题`UIButtonType.roundedRect`已被弃用。头文件注释说要`UIButtonType.system`改用。

以下是从 UIButton.h 在 Xcode 中转换为 Swift

```
public enum UIButtonType : Int {

    case custom // no button type

    @available(iOS 7.0, *)
    case system // standard system button

    case detailDisclosure
    case infoLight
    case infoDark
    case contactAdd

    public static var roundedRect: UIButtonType { get } // Deprecated, use UIButtonTypeSystem instead
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-12T16:26:29.580

不是你要找的东西，但请记住，你的子类仍然有 buttonWithType 方法，它工作正常。

buttonWithType 调用您的子类 initWithFrame，并适当地设置类型。

```
SubclassButton *myButton=[SubclassButton buttonWithType:UIButtonTypeRoundedRect]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-30T17:59:12.343

创建一个方便的 init 对我有用：

```
class CustomButton: UIButton {

    convenience init() {
        self.init(type: .system)
    }

    override init(frame: CGRect) {
        super.init(frame: frame)

        /*Do customization here*/
    }

    required init?(coder: NSCoder) {
        super.init(coder: coder)

        /*Do customization here*/
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-30T03:52:44.493

对于 iOS7，这比以前更相关，因为有时您*需要*使用 UIButtonTypeSystem，并且您不能简单地覆盖 init 并执行 [MyButton alloc] init]，因为它是一个 UIButtonTypeCustom，它不反映 tintColor 也没有 nice突出淡化效果。

要子类化，请像这样创建一个静态构造函数：

```
+ (instancetype)myButtonWithTitle:(NSString *)title imageNamed:(NSString *)imageName target:(id)target action:(SEL)action {
    MyButton *button = [self buttonWithType:UIButtonTypeSystem];
    ... my custom setup for title, image, target, etc ...
    return button;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-10T15:38:17.367

这不是一个好的解决方案，所以我们需要“感谢”苹果使用这个拐杖。XD

```
//if self.buttonType == .system && self.state.contains(.highlighted) {
    DispatchQueue.main.asyncAfter(deadline: .now() + 0.05) {
        self.titleLabel?.alpha = 1.0
    }
//} 
```

`touchesBegan(...)`例如添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-14T21:46:23.847

你绝对可以继承 UIButton。我已经成功创建了一个看起来像 UITextField 的 DateButton，但是当用户触摸它时，它会在 Popover 中显示一个 DatePicker。具有用于存储日期等的属性。如果上述方法从未解决您的问题，请告诉我，我将发布更多详细信息。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-23T09:37:37.137

那这个呢？

```
- (id)initWithFrame:(CGRect)frame 
{
    self = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
    if (self) {
        self.frame = frame;
    }

    return self;
} 
```

# jquery - 更新后“刷新”jquery UI 选择菜单

> ID：10277866
> 
> 赞同：6
> 
> 时间：2012-04-23T09:24:26.507
> 
> 标签：jquery, jquery-ui

我有一个获取请求，它获取一堆类别信息来填充`<select>`. 我正在使用 jQuery UI Selectmenu 来设置我的选择样式。

所以我的 jQuery 看起来有点像这样：

```
//Initalise the selectmenu
$("select").selectmenu({ style: 'dropdown' });

$.get("http://localhost/somedata?cat=2", function (data) {
    $.each(data, function (index, itemData) {
        $("<option value='" + itemData.Id + "'>" + itemData.Name + "</option>").appendTo("#selectList");
    });
}); 
```

但是，这会填充`<select>`但不会更新 jQuery UI 选择菜单。我需要做什么才能让选择菜单“重新绘制”以便新值出现在选择菜单中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-23T11:57:15.897

[您可以使用开发 wiki](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)中记录的恰当命名的`refresh`方法：

```
$("select").selectmenu({ style: 'dropdown' });

$.get("http://localhost/somedata?cat=2", function(data) {
    $.each(data, function(index, itemData) {
        $("<option value='" + itemData.Id + "'>" + itemData.Name
            + "</option>").appendTo("#selectList");
    });

    $("select").selectmenu("refresh");
}); 
```

**更新：**不幸的是，该`refresh`功能已记录在案，但似乎尚未实现。另一种选择是销毁小部件并重新创建它：

```
$("select").selectmenu("destroy").selectmenu({ style: "dropdown" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-22T12:47:53.653

这是一个非常古老的问题，所以目前有[一个更简单的解决方案](https://api.jqueryui.com/selectmenu/#method-refresh)可用：

```
$("select").selectmenu("refresh"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:56:30.000

生病推荐ajax方式..试试这个

```
$(document).ready(function(){
  $.ajax({
                   url :/somedata?cat=2,          

                   success:function(data){
                        $.each(data, function (index, itemData) {
        $("<option value='" + itemData.Id + "'>" + itemData.Name + "</option>").appendTo("#selectList");
    });

                   }
                });
$("select").selectmenu({ style: 'dropdown' });
}); 
```

# .net - COM Callable Wrapper 适用于 .NET 2.0 但不适用于 .NET 4.0

> ID：10277868
> 
> 赞同：1
> 
> 时间：2012-04-23T09:24:44.817
> 
> 标签：.net, com, ccw, com-callable-wrapper

我编写了一个概念验证 COM 可调用包装器，以便用新功能替换现有的 COM 组件。我的项目的一个限制是我无法更改调用代码；调用代码应该不知道 COM Callable Wrapper 的存在。如果调用代码是 .NET 2.0，我创建的小型概念验证解决方案可以工作，但如果调用代码在 .NET 4.0 中，则会失败并出现 InvalidCastException。有人可以帮我发现这个 .NET 4.0-specific 的原因`InvalidCastException`吗？

COM 可调用包装器：

```
using System.EnterpriseServices;
using System.Runtime.InteropServices;

namespace DNNXPOC.CCWTestA
{
    [ComVisible(true)]
    [Guid("39D50FA3-DF73-4A3B-A4F8-4D21F5A27E83")]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    public interface ItestA
    {
        [DispId(1)]
        int process();
    }

    [ClassInterface(ClassInterfaceType.None)]
    [ComVisible(true)]
    [Guid("1A6ECD84-5147-4EF8-89A4-0F9AC5F3915B")]
    [ProgId("NNXPOC.testA")]
    [ComDefaultInterface(typeof(ItestA))]
    public class testA : ServicedComponent, ItestA
    {
        public int process()
        {
            const int result = 3;
            return result;
        }
    }
} 
```

调用代码（在行抛出异常`new`）：

```
using System;
using System.Runtime.InteropServices;
using NNXPOCLib;

namespace DNNXPOC
{
    public class TestAAccessWrapper : IDisposable
    {
        private ItestA _testA;
        private bool _isDisposed;

        public TestAAccessWrapper()
        {
            _testA = new testAClass();
        }

        public ItestA testA { ... }

        public void Dispose() { ... }
    }
} 
```

# .htaccess - 具有多站点的 wp-ecommerce - 不显示图像

> ID：10277869
> 
> 赞同：0
> 
> 时间：2012-04-23T09:24:51.370
> 
> 标签：.htaccess, e-commerce, wordpress

我在多站点（子文件夹）站点上使用[wp_ecommerce](http://getshopped.org/)

问题是插件从以下位置请求图像：

[http://mysite/blogname/files/wpsc/category_images/cat_1.png](http://mysite/blogname/files/wpsc/category_images/cat_1.png)

当图像存储在

[http://mysite/blogname/wp-content/blogs.dir/16/files/wpsc/category_images/cat_1.png](http://mysite/blogname/wp-content/blogs.dir/16/files/wpsc/category_images/cat_1.png)

所以我得到破碎的图像。

现在我猜测我的 htaccess 应该为我完成这项工作..所以这里有什么所以我的 htaccess 是错误的还是应该配置其他东西？

谢谢。

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:52:04.137

修正了这一点，

事实证明，核心 WordPress 文件 ms-files 不可执行，这意味着它的权限设置为 644 而不是 755

设置了适当的权限，它就像一个魅力:-)

# ruby - 如何找出 TCP 连接的端口号

> ID：10277870
> 
> 赞同：1
> 
> 时间：2012-04-23T09:24:51.313
> 
> 标签：ruby

假设我有以下代码。

```
server = TCPServer.new(3200)
client = server.accept() 
```

如何找出客户端向我发送消息的端口号是什么？我已经尝试过 client.peeraddr 和 client.addr 并且它们都没有给我正确的端口号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:58:10.080

客户端连接的端口是 3200。客户端上创建连接的端口对于每个连接都是随机的，由操作系统从未使用的端口提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:22:40.647

[`client.peeraddr`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/IPSocket.html#method-i-peeraddr)给你一个对应于 a 的数组`struct addrinfo`。对于 AF_INET，它看起来像这样：

```
["AF_INET", 48942, "127.0.0.1", "127.0.0.1"] 
```

您可以从中创建一个[Addrinfo](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Addrinfo.html)对象并像这样获取端口：

```
require 'socket'
server = TCPServer.new(3200)
client = server.accept()
addr = Addrinfo.new(client.peeraddr)
port = addr.ip_port 
```

# jquery - .load() 的 jQuery preventDefault 问题

> ID：10277873
> 
> 赞同：0
> 
> 时间：2012-04-23T09:25:04.570
> 
> 标签：jquery, tabs, preventdefault

每次单击选项卡时，该选项卡都会调用 getPrices()。问题是每次单击时当前类都会重置为第一个选项卡。我猜这是因为我用 load() 调用 proxy.php。

编辑简化问：执行 load() 后，如何在单击的选项卡上使用 .addClass('current') ？

来自 foo.php 的代码

```
 function getPrices(go) {
        if(go === true) {
        $('div').load('proxy.php5').fadeIn("slow");
        $('div td').animate({
            opacity: 0.7
        }, 200);
        return false;
        }
    };

$('div ul.tab-nav li').click(function(event) {
    getPrices(true);
    $(this).parents('ul').find('li.current').removeClass('current');
    $(this).addClass('current');
    event.preventDefault();
    return false;
}); 
```

index.php 中的代码：

```
function getPrices(go) {
    if(go === true) {
        $('#spot-prices').load('proxy.php5').fadeIn("slow");
        $('#spot-prices td').animate({
            opacity: 0.7
        }, 200);
    return false;
    }
};
jQuery(document).ready(function() {
    getPrices(true);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:50:57.867

```
 function getPrices(go) {
        if(go) {
        $('div').load('proxy.php5').fadeIn("slow");
        $('div td').animate({
            opacity: 0.7
        }, 200);
        return true;
        }
    };

$('div ul.tab-nav li').click(function(event) {
    getPrices(true);
   $('div ul.tab-nav li').removeClass('current');
    $(this).addClass('current');
    event.preventDefault();
    return false;
}); 
```

# android - 如何通过 onTouchListener 旋转图像？

> ID：10277874
> 
> 赞同：0
> 
> 时间：2012-04-23T09:25:05.063
> 
> 标签：android, android-layout

我必须实现通过 onTouchListener() 旋转图像的功能。请提供我旋转图像的示例代码。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:33:08.977

这是旋转图像的示例代码。

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.main);

baseView = (View) findViewById(R.id.baseView);
turntable = (ImageView) findViewById(R.id.turntable);

turntable.setOnTouchListener(onTableTouched);
baseView.setOnTouchListener(onTableTouched); 
```

}

```
public android.view.View.OnTouchListener onTableTouched = new android.view.View.OnTouchListener() {
public boolean onTouch(View v, MotionEvent evt) {
    double r = Math.atan2(evt.getX() - turntable.getWidth() / 2,
            (turntable.getHeight() / 2) - evt.getY());
    int rotation = (int) Math.toDegrees(r);
    Log.i("R is ", ""+r);
    if (evt.getAction() == MotionEvent.ACTION_DOWN) {
    }

    if (evt.getAction() == MotionEvent.ACTION_MOVE) {
        x= evt.getX();
        y= evt.getY();
        updateRotation(rotation);
    }

    if (evt.getAction() == MotionEvent.ACTION_UP) {
            //
    }
    return true;
}
};
private void updateRotation(double rot) {
float newRot = new Float(rot);
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
R.drawable.orsl_circle_transparent);
Matrix matrix = new Matrix();
//        matrix.setTranslate(getWindowManager().getDefaultDisplay().getWidth()/2,            getWindowManager().getDefaultDisplay().getHeight());
    matrix.postRotate(newRot,bitmap.getWidth()/2,bitmap.getHeight()/2);
//      matrix.setSinCos(newRot, newRot/2, 100, 100);
//      matrix.postRotate(newRot);
    Log.i("THE ROATTION ", "  "+    newRot);

if(y>250)
{
    Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap
            .getWidth(), bitmap.getHeight(), matrix, true);
    turntable.setImageBitmap(redrawnBitmap);
}else
{
    Bitmap  redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap
            .getWidth(), bitmap.getHeight(), matrix, true);
     turntable.setImageBitmap(redrawnBitmap);
     Log.i("GUITAR _IMAGE", "");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:35:17.027

您需要使用“补间动画”类型的 xml。比，从java代码你可以根据这个xml制作一个视图。这是一个帮助的链接： [http ://www.edumobile.org/android/android-beginner-tutorials/tween-animation/](http://www.edumobile.org/android/android-beginner-tutorials/tween-animation/)

# ios - 用于常规搜索的 NSPredicate

> ID：10277876
> 
> 赞同：8
> 
> 时间：2012-04-23T09:25:08.120
> 
> 标签：ios, nspredicate

当我们搜索任何应用程序时，我正在使用 NSPredicate 来执行搜索，就像它在 iPhone 上所做的那样。

例如，我说 4 个关键字

1.  德干
2.  新德里
3.  艾哈迈达巴德
4.  萨拉姆德里

我试过用

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"keyword BEGINSWITH[c] 'd'"` 它给了我**德干**作为输出。但问题是我希望每个单词都以**d**开头所以从上面的例子中我需要输出为 **德干、新德里、萨拉姆德里**而**不是艾哈迈达巴德**

从几个小时开始就陷入这个问题。尝试包含，匹配但我的运气不好..

任何对正确道路的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T10:23:39.807

谢谢大家的回复这是我想出的

```
NSString *matchString =  [NSString stringWithFormat: @".*\\b%@.*",searchText];
NSString *predicateString = @"keyword MATCHES[c] %@";
NSPredicate *predicate =[NSPredicate predicateWithFormat: predicateString, matchString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:07:03.623

有两种方法适合你

1.  将 steing 除以 ' ' 并使用你的`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"keyword BEGINSWITH[c] 'd'"]`
2.  或者，更好的方法是使用两个谓词：

`predicate = [NSPredicate predicateWithFormat:@"keyword BEGINSWITH[c] 'd' OR keyword contains[c] ' d'"]`//`i mean,'space+d'`

所以你会满足这两种可能的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:20:15.350

考虑“喜欢”和“匹配”。但是请注意，这些操作相对昂贵，并且在大型数据集上可能需要相当长的时间。

在此示例中，我假设您想要匹配的任何空格分隔的单词都以“d”开头

这将检查关键字是否以 'd' 开头或具有一个后跟 'd' 的序列

```
[NSPredicate predicateWithFormat:@"(keyword BEGINSWITH[c] 'd') OR (keyword LIKE[c] '* d')"] 
```

这个使用了一个非常相似的正则表达式（使用最适合您的情况的正则表达式：

```
[NSPredicate predicateWithFormat:@"keyword MATCHES[c] '^d.*|.*\\sd.*'"] 
```

# javascript - setTimeout 不污染全局命名空间？

> ID：10277882
> 
> 赞同：3
> 
> 时间：2012-04-23T09:25:19.013
> 
> 标签：javascript, jquery, global-variables

考虑以下 javascript：

```
$(function(){
  var private_function = function(){
    alert("private_function!");
  }

  setTimeout("private_function();", 1000);  

}); 
```

这会产生错误“private_function 未定义”。

有没有办法在不污染全局命名空间/通过全局模块公开它的情况下推迟 javascript 中私有/匿名函数的执行？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T09:26:48.437

```
$(function(){
  var private_function = function(){
    alert("private_function!");
  }

  setTimeout(private_function, 1000);  

}); 
```

**或者**

```
$(function(){
  var private_function = function(){
    alert("private_function!");
  }

  setTimeout(function(){
    private_function(); // with this method you can also pass some arguments
  }, 1000);  

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:28:04.630

用于`setTimeout(private_function, 1000);`将 Timeouthandler 设置为函数。

# vim - .cu (CUDA) 文件的 ctags+taglist

> ID：10277883
> 
> 赞同：13
> 
> 时间：2012-04-23T09:25:31.137
> 
> 标签：vim, cuda, ctags, exuberant-ctags

我使用 vim 编辑器（在 Ubuntu 上）。最近，我一直在处理大型 cuda 项目，因此想利用 ctags 实用程序进行代码浏览。exuberant-ctags [here] (http://ctags.sourceforge.net/languages.html) 支持的语言列表尚未包含 CUDA。如果有人知道可以做同样的调整，我将非常感谢您的帮助。

谢谢

编辑1：我找到了以下临时修复。

要为 CUDA 文件创建标签文件，请使用带有以下选项的 ctags（假设您的当前目录包含所有 cuda 文件）；

$ctags --langmap=c++:+.cu *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T09:45:13.607

由于 CUDA C/C++ 是基于 C++ 的，您可以只使用 C++ 模式。您可以使用添加语言映射`--langmap=c++:+.cu`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T08:53:01.297

我不知道 taglist，但如果你使用的是 Tagbar 插件（重做 taglist），你可以在 .vim/autoload/tagbar.vim 中添加以下行：

`let s:known_types.cuda = type_cpp`

将其放在该行之后：

`let s:known_types.cpp = type_cpp`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T06:06:40.240

对于 taglist 拆分窗口，您可以添加以下行

```
" cu language
let s:tlist_def_cu_settings = 'c++;n:namespace;v:variable;d:macro;t:typedef;' .
                         \ 'c:class;g:enum;s:struct;u:union;f:function' 
```

以下

```
" c++ language
let s:tlist_def_cpp_settings = 'c++;n:namespace;v:variable;d:macro;t:typedef;' .
                             \ 'c:class;g:enum;s:struct;u:union;f:function' 
```

在 taglist.vim 中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-12T03:36:43.010

Universal-ctags( [https://ctags.io](https://ctags.io) ) 有内置的 cuda 解析器。

```
$ ./ctags --list-maps=CUDA
CUDA     *.cu *.cuh 
```

# sql - 将带有表达式的字符串转换为十进制

> ID：10277884
> 
> 赞同：3
> 
> 时间：2012-04-23T09:25:33.560
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个表，其中有一列“Faktor”（varchar（50）），其中包含以下表达式：

```
1/3
2*9/5
0.567
0.23 
```

不，我正在寻找一种执行选择的方法

```
select Faktor from Artikel 
```

它应该返回带有值的十进制类型的列

```
0.333333
3.6
0.567
0.23 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:13:19.177

我会使用 CLR，类似这样（这具有在基于 SET 的操作中工作的优势，而动态 sql 替代方案（即 Abduls 答案）不会）：

**编辑：** CLR dll（Visual Studio 2008）的源代码发布在这里：[http ://www.heavencore.co.uk/filehub/uploaded/EvalFunction.zip](http://www.heavencore.co.uk/filehub/uploaded/EvalFunction.zip)

如果您希望自己编译程序集，代码如下：

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports Microsoft.SqlServer.Server
Imports System.Runtime.InteropServices    

Partial Public Class UserDefinedFunctions
    <Microsoft.SqlServer.Server.SqlFunction()> _
    Public Shared Function EVAL(ByVal InputExpression As SqlString) As SqlDecimal
        Return Evaluate(InputExpression)
    End Function

    Private Shared Function Evaluate(ByVal expression As SqlString) As SqlDecimal
        Dim expressionStr As String = expression.ToString()
        Dim loDataTable = New DataTable()
        Dim loDataColumn = New DataColumn("Eval", GetType(Double), expressionStr)
        loDataTable.Columns.Add(loDataColumn)
        loDataTable.Rows.Add(0)
        Return ParseDecimal(loDataTable.Rows(0)("Eval").ToString(), 0)
    End Function

    Public Shared Function ParseDecimal(ByVal InputStr As String, Optional ByVal ReturnIfFail As Decimal = 0) As Decimal
        Dim ParseOutput As Decimal = 0
        If Decimal.TryParse(InputStr, ParseOutput) = False Then
            Return ReturnIfFail
        Else
            Return ParseOutput
        End If
    End Function
End Class 
```

一旦安装并绑定，您就可以这样做：

```
SELECT Faktor, dbo.Eval(Faktor) as Result FROM Artikel 
```

**编辑：好的，我刚刚对此进行了测试，它在基于集合的操作等中运行良好，安装如下：**

```
-- Enable the CLR to run user-defined functions
EXEC sp_configure 
    'clr enabled' ,
    '1'
GO
RECONFIGURE
GO

-- Set the appropriate database security permission
ALTER DATABASE [TargetDatabase] SET TRUSTWORTHY ON
GO

-- Import the assembly
CREATE ASSEMBLY EvalFunction
FROM 'C:\bin\EvalFunction.dll'  
WITH PERMISSION_SET = EXTERNAL_ACCESS;
GO

-- Create the Eval function for easy use
CREATE FUNCTION dbo.Eval
    (
      @Expression NVARCHAR(255)
    )
RETURNS DECIMAL(18, 2)
AS EXTERNAL NAME 
    EvalFunction.[EvalFunction.UserDefinedFunctions].EVAL 
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:14:02.853

太糟糕了。在表达式中，所有数字都是`int`数据类型。因此，它很难计算并显示结果`decimal`。

这是一个示例，希望对您有所帮助-

```
declare @expr nvarchar(10)
set @expr='2*9/5'
declare @query varchar(800)

BEGIN TRY
    SELECT CAST(@expr as decimal(5,2))
END TRY
BEGIN CATCH
    SET @query='SELECT CAST('+@expr+'.0 as decimal(5,2))'
    EXECUTE(@query)
END CATCH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:47:56.977

您可以使用执行语句将字符串编译为表示表达式的结果，或者在应用程序中评估表达式。

# java - 如何通过手机扬声器播放 Alert.startAudio()？

> ID：10277886
> 
> 赞同：0
> 
> 时间：2012-04-23T09:25:37.310
> 
> 标签：java, blackberry, blackberry-jde, multimedia

我需要`Alert.startAudio()`通过黑莓设备的扬声器而不是耳机播放。

我知道可以通过`AudioPathControl`接口改变Audio路径，但是不知道如何获取AudioPathControl的实例。

我在黑莓知识库上找到了一个关于如何做到这一点的[链接](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Specify_Audio_Path_Routing.html?nodeid=1326675&vernum=0)，但它只告诉我如何使用 Player 类来做到这一点，我不想这样做。有没有办法获取当前应用程序的 AudioPathControl 实例？

我宁愿以编程方式播放音调，而不是包含我自己的声音文件。我为此找到了以下代码片段。

```
Player p = javax.microedition.media.Manager.createPlayer(javax.microedition.media.Manager.TONE_DEVICE_LOCATOR);
p.realize();
ToneControl tc = (ToneControl) p.getControl("ToneControl");
AudioPathControl apc = (AudioPathControl) p
.getControl("AudioPathControl");
apc.setAudioPath(AudioPathControl.AUDIO_PATH_HANDSFREE);
tc.setSequence(mySequence);
p.start(); 
```

但问题是它`apc`会`null`抛出一个`Exception`. 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:52:33.163

检查[声音在哪里？](http://books.google.com.bd/books?id=tTV9W9PmZlUC&pg=PA88&lpg=PA88&dq=AudioPathControl&source=bl&ots=7udYwIwzx_&sig=eoUyui8R_dXSsD4U2BujS7p5LvE&hl=en&sa=X&ei=JyKVT_vUMYHIrQfdqpGUBQ&redir_esc=y#v=onepage&q=AudioPathControl&f=false)（来自 Google 图书的预览），来自**Chris King 的 Advanced BlackBerry 6 Development**。

# java - 反转 java.util.LinkedList 的最佳方法（如果可能的话）

> ID：10277888
> 
> 赞同：7
> 
> 时间：2012-04-23T09:25:39.857
> 
> 标签：java, algorithm, list, collections, linked-list

我想`java.util.LinkedList<Integer>`使用可用的方法来反转 a。
查看提供的方法，`Iterators`我看不到以下选项：

```
int i = list.size();  
int pos = 0;  
while(i-- > 1){  
     Integer n = list.removeLast();  
     list.add(pos++, n);          
} 
```

但肯定有更好的方法。我的意思是在迭代器之外修改列表不是一个好主意，但我不知道如何在此处使用它而不必创建新列表。
有没有更好的办法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T09:28:37.227

使用导入 java.util.Collections；

```
Collections.reverse(list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:29:52.470

有一个 api 方法。

`Collections.reverse(yourList);`

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#reverse%28java.util.List%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#reverse%28java.util.List%29)。

如果出于某种原因您想自己做，这似乎是最好的方法：

```
List<T> reversed = new LinkedList<T>();
while(!yourList.isEmpty()) reversed.add(yourList.removeLast()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:29:06.293

见[java.util.Collections.reverse(List list)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#reverse%28java.util.List%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T17:38:40.817

我们可以通过这些方式在java中反转Linkedlist

1.  使用集合 - 我们可以借助集合的 ​​reverse() 方法在 Java 中反转列表

    ```
    LinkedList<String> linkedList = new LinkedList<String>();
    linkedList.add("Mumbai");
    linkedList.add("Delhi");
    //print linkedlist
    //Reverses the order of the elements in the specified list.
    Collections.reverse(linkedList); 
    ```

2.  使用 List.set() 方法我们将 list 的元素首先交换到 end 。依此类推，使用以下逻辑

    ```
     for(int i = 0, mid = list.size()/2, j = list.size() - 1; i < mid; i++, j--)
               list.set(i, list.set(j, list.get(i)));//swap element
         } 
    ```

参考： [如何反转 LikedList 的元素](https://www.javavogue.com/2015/05/how-to-reverse-elements-of-likedlist.html/)

# c++ - 我可以使用 std::pair 作为 std::multimap 中的键吗？

> ID：10277890
> 
> 赞同：1
> 
> 时间：2012-04-23T09:25:49.447
> 
> 标签：c++, stl

我想使用 2 个整数作为 multimap 中的键。所以我想知道是这样的结构

```
std::multimap<std::pair<int, int>, MyClass> M;
M.insert(std::pair<int,int>(X1,Y1), MyClassObject); 
```

在 C++ 中可能吗？编译时我收到以下错误消息：

```
C:\1\1-build-desktop-Qt_4_7_4_for_Desktop_-_MinGW_4_4__Qt_SDK_________\..\main.cpp:199: 
error: no matching function for
call to 'std::multimap<std::pair<int, int>, MyClass, std::less<std::pair<int, int> >,
std::allocator<std::pair<const std::pair<int, int>, MyClass> > >::insert(std::pair<int, int>,
MyClass)' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:28:51.130

插入需要一对键值，所以你需要

```
M.insert(std::make_pair(std::make_pair(X1,Y1),MyClassObject)); 
```

# requirements - 什么是用于编译需求文档的好的 Latex 编译器？

> ID：10277891
> 
> 赞同：1
> 
> 时间：2012-04-23T09:25:49.230
> 
> 标签：requirements

我正在寻找一个好的 Latex 编译器来编译需求文档？是否有任何编译器或插件支持特殊标签来显示需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:53:00.953

您正在寻找一个包，它提供了用于编写具有特定结构/内容的文档的宏和命令。这与 LaTeX 编译器无关。

通常，您有一些关于如何构建文档的模板或其他规范——在编写需求文档时没有全球通用的标准。甚至定义究竟是什么*需求文档*也可能会有所不同。因此，不太可能有一个包可以提供您所需的功能。

在这种情况下，您应该编写自己的宏。例如，您可以为需求定义自己的环境，为其命名`requirement`并对其应用一些样式和配置。有关如何定义自己的命令和环境的说明，请参阅[自定义 LaTeX 。](http://en.wikibooks.org/wiki/LaTeX/Customizing_LaTeX)

如果您计划基于您的宏编写多个文档，您可能希望将它们移动到一个包中。然后，您可以在多个文档中使用该包。

# php - 用户通过我的应用程序后杀死linkedin会话

> ID：10277894
> 
> 赞同：0
> 
> 时间：2012-04-23T09:26:00.793
> 
> 标签：php, linkedin

我有一个应用程序，我在网络活动中使用，用户会主动提出并接受它。当我通过“接受应用程序”对话框传递用户时，linkedin 似乎让用户保持登录状态。

有人知道如何使用代码注销用户吗？因为这可以让我每次都关闭浏览器来终止会话，这会大大减慢进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:50:12.717

如果您通过 PHP 在服务器端执行所有操作，则无需终止该会话，因为它仅与令牌相关联。您只需要在下一个用户登录时请求一个新令牌。如果您觉得它更安全，您可以将令牌设置`""`为最后。

如果您通过 Javascript API 进行客户端身份验证，请查看：

[IN.Auth、IN.Event 和 IN.UI](https://developer.linkedin.com/documents/inauth-inevent-and-inui)

具体来说，标题为**“注销用户”的部分**

看来您只需要调用该`logout`方法，具体来说：

```
IN.User.logout(callbackFunction, callbackScope) 
```

其中 callbackFunction 是您定义的在会话结束后被调用的函数，而 callbackScope 是您希望在其上运行回调函数的可选对象（默认为`window`对象）。

它还提到运行上面只是清除会话的cookie，所以假设，如果上面不适合，你可以编写一个基于浏览器的（也就是说，不在域限制页面上运行，而是在具有对所有域 cookie 的完全访问权限的浏览器插件），当用户到达某个页面（可能是感谢页面？）时删除 cookie

然而，我想这将是矫枉过正。

### 更新：

基于对 javascript API 如何工作的进一步阅读（特别是您的应用程序对每个请求的 API 密钥如何），看起来控制用户会话的 cookie 与您的域相关联，而不是linkedin（虽然这很奇怪，因为linkedin不应访问您的域cookie来确认会话仍然有效）。我仍然会使用他们的内置方法，但您也可以通过清除他们通过您自己的函数创建的任何 cookie 来终止会话。

# javascript - 使用 javascript 调用 Div 的 Onclick

> ID：10277897
> 
> 赞同：0
> 
> 时间：2012-04-23T09:26:15.697
> 
> 标签：javascript

我想在 div 的 onclick 事件中发出警报。

这是我的代码：

```
<script type="text/javascript">
document.getElementById('new_div').click(function() {
    alert(1);

});

</script>

<div id="new_div" style="border:1px solid;">
Clicked Me......
</div> 
```

但是在加载页面时会显示错误：

```
document.getElementById("new_div") is null 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:33:47.757

编辑：这应该是一个更好的解决方案，我对 JavaScript 有点生疏。

您需要在页面加载后加载 JavaScript 事件处理程序。最简单的方法是在文档完成加载并且窗口投射 onload-event 时加载您的代码。

```
<script type="JavaScript">
window.onload = function(){
    document.getElementById('new_div').onclick = function() {
        alert("Good morning, you are very beautiful today!");
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:28:23.137

你在你的javascript代码之后定义了那个div，所以当你添加你的处理程序时，div还不存在

像这样反转你的代码

```
<div id="new_div" style="border:1px solid;">
Clicked Me......
</div>

<script type="text/javascript">
   console.log(document.getElementById('new_div'))
</script> 
```

要正确附加事件，请使用[addEventListener](https://developer.mozilla.org/it/DOM/element.addEventListener)（以及IE<9 的[attachEvent](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)`document.getElementById('new_div').onclick = ...` ）或简单地使用（但不推荐，因为您删除了任何先前定义的处理程序，如果有的话）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:32:47.150

当您的 javascript 执行时，new_div 尚未加载。

尝试这样的事情：

```
$(document).ready(function()
{
    $('#new_div').click(function()
    {
        alert(1);
    }); 
}); 
```

**编辑**

我假设您使用 jQuery，因为您使用`.click(function() {`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:34:50.187

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>

  <script type="text/javascript">
   function clicked(item) {
    alert($(item).attr("id"));
   }
  </script>

  <div onclick="clicked(this);" id="test">test</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T09:36:44.647

我认为你的 jquery 很好地解决了你的问题。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
$('#new_div').click(function() {
    alert(1);
    });
});
</script> 
```

您的 HTML 保持不变

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T10:00:14.480

试试这个

```
 <html>
       <head>

    <script type="text/javascript">
    $(document).ready(function(){
      $("#new_div").click(function(){
        alert(1);
      });
    });
    </script>
    </head>

   <body>
    <div id="new_div" style="border:1px solid;">
    Clicked Me......
       </div>
     </body>
    </html> 
```

# c# - C# winforms 和线程

> ID：10277898
> 
> 赞同：0
> 
> 时间：2012-04-23T09:26:18.327
> 
> 标签：c#, winforms, multithreading

我有一个按钮“开始”的胜利表格，当我点击它时，开始逐行读取 .txt 文件并将请求发布到服务器。我的问题是-当我单击“开始”以从文件中读取 50 行然后停止并等待再次单击“开始”时，我该怎么做。线程是这里唯一可能的解决方案吗？这是我的按钮：

```
private void btnStart_Click(object sender, EventArgs e)
    {
        List<string> List = LoadFromFile("FILE");
        int dialogid = 0;
        foreach (string g in List)
        {
            dialogid++;
            Dictionary<string, string> parameters = new Dictionary<string, string>();
            parameters.Add("number", g);
            parameters.Add("dialogid", dialogid.ToString());

            if (InvokeService(this.tbWebServiceURL.Text, parameters) == false)
            {
                MessageBox.Show("ERROR!", "ERROR");
                return;
            }
        } 
```

这是我的发帖请求：

```
private bool InvokeService(string ServiceURL, Dictionary<string, string> parameters)
    {          
        try
        {           
            string data = "";
            int cnt = 0;

            byte[] dataStream = Encoding.UTF8.GetBytes(data);
            WebRequest webRequest = WebRequest.Create("URL");
            webRequest.Method = "POST";
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.ContentLength = dataStream.Length;

            foreach (KeyValuePair<string, string> kvk in parameters)
            {
                webRequest.Headers.Add(kvk.Key, kvk.Value);
            }

            WebResponse response = webRequest.GetResponse();
            Stream dataStreamResponse = response.GetResponseStream();
            StreamReader reader = new StreamReader(dataStreamResponse);
            string responseFromServer = reader.ReadToEnd();
            Console.WriteLine(responseFromServer);
            reader.Close();
            dataStreamResponse.Close();
            response.Close(); 
```

这里最重要的不是一键读取整个文件“开始”。必须等待另一个“开始”。阅读 50 行并等待单击“开始”以阅读第二个 50 行。希望现在更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:55:22.237

BackgroundWorker 大纲 - 未测试：

```
 private void button1_Click(object sender, EventArgs e)
        {
            if (fileReader == null) fileReader = new StreamReader("File");
            string thisLine;
            netJob bwClass = new netJob(this.tbWebServiceURL.Text);
            for (int i = 0; i < 50; i++)
            {
                thisLine = fileReader.ReadLine();
                if(thisLine=="")break;
                dialogid++;
                Dictionary<string, string> newDict = new Dictionary<string, string>();
                newDict.Add("number", thisLine);
                newDict.Add("dialogid", dialogid.ToString());
                bwClass.Fparams.Add(newDict);
            }
            backgroundWorker1.RunWorkerAsync(bwClass);
        }

    class netJob
    {
        private string FURL;
        public List< Dictionary<string, string> > Fparams;
        private Dictionary<string, string> FthisParam;
        public string errorMess;
        public string responseFromServer;
        public List<string> responsesFromServer;
        public netJob(String URL)
        {
            FURL = URL;
            Fparams= new List< Dictionary<string, string> >();
            responsesFromServer=new List<string>();
            errorMess = "";
        }
        public void run()
        {
            foreach (Dictionary<string, string> thisDict in Fparams)
            {
                InvokeService(FURL, thisDict);
                if (errorMess == "") responsesFromServer.Add(responseFromServer);
                else
                {
                    responsesFromServer.Add(errorMess);
                }

            }
        }

        private bool InvokeService(string ServiceURL, Dictionary<string, string> parameters)
        {
            try
            {
                string data = "";
                byte[] dataStream = Encoding.UTF8.GetBytes(data);
                WebRequest webRequest = WebRequest.Create("URL");
                webRequest.Method = "POST";
                webRequest.ContentType = "application/x-www-form-urlencoded";
                webRequest.ContentLength = dataStream.Length;

                foreach (KeyValuePair<string, string> kvk in parameters)
                {
                    webRequest.Headers.Add(kvk.Key, kvk.Value);
                }

                WebResponse response = webRequest.GetResponse();
                Stream dataStreamResponse = response.GetResponseStream();
                StreamReader reader = new StreamReader(dataStreamResponse);
                responseFromServer = reader.ReadToEnd();
                reader.Close();
                dataStreamResponse.Close();
                response.Close();
            }
            catch (Exception e)
            {
                errorMess = e.Message;
            }
        }
    }
}

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            netJob thisJob = e.Argument as netJob;
            thisJob.run();
        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
                netJob thisJob = e.Result as netJob;
                foreach (string thisResponse in thisJob.responsesFromServer)
                {
                    Console.WriteLine(thisResponse);
                }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:32:30.540

不确定您是否需要线程。只有一个原因 - 处理 50 行是缓慢的操作，此时您不会冻结 UI，然后是的 - 您应该将此工作委托给工作线程而不是在 UI 线程中执行，否则您应该可以使用简单的解决方案，例如如下图：

```
bool isInProgress = false;

private void OnStartButtonClick(object sender, EventArgs args)
{
  // avoid multiple clicks mess
  if (isInProgress) 
  {  
    return;
  }

  try
  {
     startButton.isEnabled = false;
     isInProgress = true;    
     int counter = 50;

     while (counter-- > 0)
     {
        var singleLine = File.ReadLine(path); 
        var message = CreateMessageFromLine(singleLine);
        transport.PostMessageToServer(message);
     }
   }
   finally
   {
       isInProgress = false;
       startButton.isEnabled = true;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:39:22.487

我会这样做：

```
private void StartButton_Click(object sender, EventArgs args)
{
    StartButton.Enabled = false;
    try
    {
        for (int i = 0; i < 50; i++)
        {
            string line = file.ReadLine();
            //Send to server
        }
    }
    finally
    {
        StartButton.Enabled = true;
    }
} 
```

在读取 50 行时禁用开始按钮，然后启用它以便您可以再读取 50 行。

一次读取 50 行已经足够快，因此您不需要线程。为部件使用[BackgroudWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)`Send to server`。

# algorithm - 如何识别相似的声音 - 技巧

> ID：10277901
> 
> 赞同：0
> 
> 时间：2012-04-23T09:26:27.080
> 
> 标签：algorithm, machine-learning, speech-recognition

我想创建一个声音识别系统。系统一旦被训练应该能够识别相似的声音。例如，我的声音很少，例如淋浴、冲水马桶、火灾警报。我会把系统安装在一个公寓里，并用这些声音训练它。然后，当系统安装在不同的公寓中时，系统应该能够识别这些声音，这些公寓的淋浴声、冲水马桶声和火灾警报声的频谱略有不同。那可能吗？可以使用哪些技术？我在想诸如隐藏马尔可夫模型、神经网络之类的语音识别技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:08:49.127

您正在寻找[模式识别](http://en.wikipedia.org/wiki/Pattern_recognition)算法。例如，我相信[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)可以成为一种解决方案。您首先提取训练样本的频谱特征。然后 PCA 会将新声音分类为最接近的已知样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:02:20.090

除了提到的模式识别/机器学习解决方案之外，您可能还应该看看[Dynamic Time Warping](http://en.wikipedia.org/wiki/Dynamic_time_warping)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:40:21.473

FFT 是你的朋友。本文[将为](http://www.codeproject.com/Articles/206507/Duplicates-detector-via-audio-fingerprinting)您提供一些曲目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:39:21.650

如果您有兴趣通过神经网络来做这件事，我建议您首先阅读有关神经网络的文献。此外，可以在[此处找到有关神经网络语音识别的一些有用说明](http://www.cslu.ogi.edu/toolkit/old/userguide/nnet_training/tutorial.html#nntrain.exe)

基本上这是可以在此链接下载的软件的用户[指南](http://www.cslu.ogi.edu/toolkit/register)

我自己没有使用过该软件，但我相信他们也提供了源代码。希望有帮助。

编辑：还添加了一些来自代码项目的源代码，这些源代码在神经网络上实现反向传播算法。看看[这里](http://www.codeproject.com/Articles/21171/Backpropagation-Artificial-Neural-Network-in-C)

# jquery - 使用 jquery 查找所有 iframe src

> ID：10277907
> 
> 赞同：8
> 
> 时间：2012-04-23T09:26:39.993
> 
> 标签：jquery

有没有办法，用 jquery，例如点击，找到所有 iframe 元素，删除他们的 src= 标签，并把它还给？有点，刷新:)

正在寻找 foreach 函数或类似的东西，但我对此相当绝望:(

谢谢你的时间，玛特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T09:27:17.370

```
$(document).ready(function() {
    $('#somebuttonid').click(function() {
        $("iframe").each(function() {
            var src = $(this).attr('src');
            $(this).attr('src', src);  
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:28:56.853

您可以像这样刷新所有 iframe

```
$("iframe").each(function() { 
   $(this).attr('src', $(this).attr('src')); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:30:12.127

您可以将函数传递给[`.attr()` *^([docs])*](http://api.jquery.com/attr/)（或[`.prop()` *^([docs])*](http://api.jquery.com/prop/)）：

```
$('iframe').attr('src', function(index, val) {
    return val;
}); 
```

该函数针对每个元素执行。它比使用显式`.each`循环更简洁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T09:31:23.407

你甚至不需要 jQuery：

```
for(var i = 0; i < frames.length; i++) {
   frames[i].src = frames[i].src;
} 
```

# javascript - 没有在 FireFox 中获取外部页面的表单元素

> ID：10277912
> 
> 赞同：0
> 
> 时间：2012-04-23T09:26:55.770
> 
> 标签：javascript, html, ajax, firefox, weblogic8.x

我正在使用 weblogic 8.1.6。我的问题是我有一个使用 Ajax 调用子页面的父页面。子页面被执行到父页面中。父页面有一个表单和一个javascript函数来读取表单的所有元素，但是javascript函数不能读取子页面的元素。我正在使用“form.elements[i].name”，它在 IE 中运行良好，但在 firefox 和 chorme 中运行良好。我应该使用什么来读取在 parenPage 中执行的子页面的元素。

父代码

```
<form id="Tab">  
   <input type="button" onclick="alert('calling AjaX Method');" value="ADD" />  
   <div id="ChildOutputWillDisplayedHere"></div>
</form>` 
```

子代码

```
<input class="FormFields" type = "text" name = "NameID" value = "">
<a href="#" onclick="callingJavscriptFunction()">click Me </a>` 
```

javascript代码

```
callingJavscriptFunction(){
    var form = document.forms['tab'];
    for(var i=0; i<form.elements.length; i++) 
    {
        var fieldName = form.elements[i].name;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:41:13.413

看起来，IE 为您提供了表单中的所有输入元素，即使它们没有`name`-attribute。但是，您`input`的 in`Tab`缺少`name`您尝试在函数中读取的 - 属性。AFAIK 此代码也将分配`undefined`给`fieldName`IE。

像这样的循环只会将-collection`name`中的最后一个元素分配`elements`给你的`fieldName`-variable。一个元素没问题`input`，但如果有更多...

# upload - Yii 无法验证文件大小

> ID：10277913
> 
> 赞同：2
> 
> 时间：2012-04-23T09:27:02.437
> 
> 标签：upload, yii, validation, filesize

我在 yii 中创建了一个文件上传表单，但由于某些原因，Yii 无法验证我的文件大小（尽管它确实验证了我的文件类型）。这是我的控制器：

```
$file = CUploadedFile::getInstance($model,'attachment');
if ((is_object($file) && get_class($file)==='CUploadedFile')) {
    $model->attachment = $file;
    if($model->validate(array('attachment')))
         $model->attachment->saveAs('upload/'.$file);
} 
```

这是我的规则：

```
array('attachment', 'file', 'types'=>'zip, rar, 7z','allowEmpty' => true,'maxSize'=>1024*1024*5,'tooLarge'=>'File has to be smaller than 5MB'), 
```

有人可以告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:02:14.193

谢谢大家，我自己解决了这个问题。我需要做的就是在INI 文件中配置upload_max_filesize 和post_max_size。

# facebook - Facebook 对话框和返回按钮

> ID：10277914
> 
> 赞同：3
> 
> 时间：2012-04-23T09:27:05.253
> 
> 标签：facebook, dialog, back-button, facebook-android-sdk

当使用 facebook android sdk 打开对话框时，一切正常。

但是，如果用户单击“后退”按钮，则对话框确实会关闭，但不会调用对话框侦听器的*onCancel*方法（或任何其他方法）。

我搜索了这个问题，并从 github 上的 fb android sdk 中找到了这个拉取请求：[Calls Cancel on DialogListener when Dialog is Canceled](https://github.com/facebook/facebook-android-sdk/pull/189)。

我参加了一部分并对其进行了一些修改以得到这个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_DOWN) {
        mWebView.stopLoading();
        dismiss();
        mListener.onCancel();
        return true;
    }

    return true;
} 
```

我将它添加到*FbDialog*类中，确实这似乎可以解决问题。

我想知道为什么这不是 sdk 的一部分？该拉取请求已有一年多的历史，最后一个响应大约有 11 个月的历史。为什么不将它添加到 sdk 源？

由于该解决方案正在运行，因此并不紧急，但我不喜欢修改 facebook sdk 的源代码，因为以后可能会出现问题（如果/当它们更新时）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:19:10.963

您应该修改**FbDialog**类。添加此行以设置不能使用 BACK 键取消的对话框：

```
setCancelable(false); 
```

或者添加这些行来处理 BACK 键单击：

```
@Override
public void onBackPressed() {
    mWebView.stopLoading();
    dismiss();
    mListener.onCancel();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:39:24.733

当后退按钮不会导致 DialogListener 上的取消方法触发时，您的 SDK 可能存在错误。

在这里检查一下修复：[https ://github.com/facebook/facebook-android-sdk/pull/189](https://github.com/facebook/facebook-android-sdk/pull/189)

应用它后，您可以像这样在您的类中实现它：

* * *

```
//call for Fb login dialog
facebook.authorize(this, Constants.FACEBOOK_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, (DialogListener) new LoginDialogListener()); 
```

* * *

```
class LoginDialogListener implements DialogListener{
        public void onComplete(Bundle values) {
            saveCredentials(facebook);
            postToWall();
        }
        public void onFacebookError(FacebookError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onError(DialogError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onCancel() {
            //back button pressed or dialog cancel pressed
            showToast("Authentication with Facebook cancelled!");
            finish();
        }

    } 
```

# c++ - 未调用 IShellBrowser::BrowseObject

> ID：10277918
> 
> 赞同：0
> 
> 时间：2012-04-23T09:27:25.057
> 
> 标签：c++, com, explorer, windows-shell

我正在尝试在我的应用程序中实现类似资源管理器的框架。这也必须在 WinXP 下工作。

我已经`IShellBrowser`在我的窗口类中实现了 + 我已经实现了`IUnknown`接口。

我的班级属性：

```
IShellViewPtr m_shView;
HWND m_wndHolder;
CListViewCtrl  view; 
```

这是`WM_CREATE`处理程序的代码

```
m_hWndClient = view.Create(m_hWnd, rcDefault, NULL, 
            WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS |
            WS_CLIPCHILDREN, WS_EX_CLIENTEDGE); // view isn't null after it

CMessageLoop* pLoop = _Module.GetMessageLoop();
        pLoop->AddMessageFilter(this);
        pLoop->AddIdleHandler(this);

IShellFolderPtr pParentFolder;
ATLVERIFY(SHGetDesktopFolder(&pParentFolder) == S_OK); // OK

FOLDERSETTINGS fs;
fs.fFlags = FVM_DETAILS;
fs.ViewMode = FVM_LIST;

ATLVERIFY(pParentFolder->CreateViewObject(view, IID_IShellView, (void**)&m_shView) == S_OK); // OK

RECT r; 
GetClientRect(&r);

ATLVERIFY(m_shView->CreateViewWindow(NULL, &fs, static_cast<IShellBrowser*>(this), &r, &m_wndHolder) == S_OK); // OK
ATLVERIFY(m_shView->UIActivate(SVUIA_ACTIVATE_NOFOCUS) == S_OK); // OK 
```

应用程序启动后，我有类似资源管理器的框架。我想处理双击事件以浏览框架中的文件夹。我希望在双击我的实现后`BrowseObject`会被调用，但它没有发生。而不是这个文件夹在系统资源管理器中打开。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:50:40.010

我已经解决了这个问题。

首先，`IServiceProvider`如果您的班级，您必须进行接口。实现应如下所示：

```
QueryService( REFGUID guidService, REFIID riid, void __RPC_FAR *__RPC_FAR *ppvObject ) 
  {
    if (IID_IShellBrowser == riid)
    {
      *ppvObject = static_cast<IShellBrowser*>(this);
      AddRef();
      return S_OK;
    }

    *ppvObject = NULL;
    return E_NOINTERFACE;
  } 
```

此外，您必须在您的方法中添加`IServiceProvider`支持。`QueryInterface`

```
STDMETHOD (QueryInterface)( REFIID riid,  __RPC__deref_out void __RPC_FAR *__RPC_FAR *ppvObject)
{
    if (!ppvObject)
        return E_POINTER;

    *ppvObject = NULL;

    if ( riid == IID_IShellBrowser )
        *ppvObject = static_cast<IShellBrowser*>(this);
    else if ( riid == IID_IUnknown )
        *ppvObject = static_cast<IUnknown*>(static_cast<IShellBrowser*>(this));

   else if ( riid == IID_IServiceProvider )
        *ppvObject = static_cast<IServiceProvider*>(this);

    if (*ppvObject)
    {
        AddRef();
        return S_OK;
    }
    return E_NOTIMPL;
} 
```

在你继承之后`IServiceProvider`，你不能将你的类转换为`IUnknown`using just `static_cast<IUnknown*>(this)`，所以你需要像我一样写一些东西。

在那之后`BrowseObject`应该被称为罚款。

# javascript - JQuery 可调整大小的不同 minHeight

> ID：10277919
> 
> 赞同：0
> 
> 时间：2012-04-23T09:27:30.963
> 
> 标签：javascript, jquery, html, resizable

我有一些不同高度的块取决于它的内容：[JSFiddle](http://jsfiddle.net/Uzpaj/5/ "JSFiddle")。

我想让高度大于内容的高度，但不能小于它。

这很简单：

```
 $(".block").each(function(){
            $(this).resizable({
                 handles: 's',
                 minHeight: $(this).height()
            });                     
        }); 
```

但是有些块（例如第 4 个）已经有固定的高度，如果我使用上面的代码，我不能让这个块比它已经小了。

有没有办法将内容的高度设置为 minHeight 以避免空白并禁止使块小于其内容？

我有一个想法将所有块的内容放入另一个块`div`并将其高度设置为 minHeight 但也许还有另一种方法而不改变元素的结构？

**[UPD]** @Eopin 如果我不想重置高度，我的代码如下所示：

```
 $(".block").each(function(){
            tmp = $(this).css('height');
            if (tmp != 'auto') {
                $(this).css('height', 'auto');
            }
            $(this).resizable({
                 handles: 's',
                 minHeight: $(this).height()
            });     
            if (tmp != 'auto') {
                $(this).css('height', tmp);
            }                               
        }); 
```

它可以工作，当脚本工作时我看不到视觉变化，块 < 50 的速度也很正常。看起来像解决方案。我会等几天等待其他答案，然后关闭我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:32:09.177

尝试通过将其设置为取消设置元素的高度属性`auto`：

```
$(this).css('height', 'auto'); 
```

如果这些块使用的是 height 属性而不是 css 属性，那么：

```
$(this).attr('height', ''); 
```

# c# - 创建对象时，我的类在 viewModel 中为空/null。MVC, 英孚

> ID：10277923
> 
> 赞同：1
> 
> 时间：2012-04-23T09:27:57.703
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我得到了我的 createPlayer 视图。它可以工作并加载我存储的图像。我想在下拉列表中选择一个图像并将该 ID 存储在我的 playerImageId 中。`[HttpPost]`但是当我点击创建按钮时，我的两个类（图像/播放器）在控制器中都是空的。

发送到视图的模型是这样的：

```
public ActionResult CreatePlayer()
{
    var images = db.Image.ToList();
    var playerViewModel = new PlayerViewModel(new Player(), images);
    return View(playerViewModel);
} 
```

视图如下所示：

```
@model MariedalsIK.Models.PlayerViewModel
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Player</legend>
        <div>
            @Html.LabelFor(model => model.Image)
        </div>
        <div>
            @Html.DropDownListFor(model => model.Image, Model.Image.Select(x => new SelectListItem
                                                                              {
                                                                                  Text = x.ImageName,
                                                                                  Value = x.Id.ToString()
                                                                              }))
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Player.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Player.Name)
            @Html.ValidationMessageFor(model => model.Player.Name)
        </div> 
```

PlayerViewModel 如下所示：

```
 public class PlayerViewModel
    {
        public PlayerViewModel(Player player, IEnumerable<Image> images)
        {
            Player = player;
            Image = images;
        }

        public Player Player { get; private set; }
        public IEnumerable<Image> Image { get; private set; }

        public PlayerViewModel()
        {

        }
    } 
```

CreatePlayer 操作如下所示：

```
[HttpPost]
public ActionResult CreatePlayer(PlayerViewModel playerViewModel)
{
    if (ModelState.IsValid)
    {
        db.Player.Add(playerViewModel.Player);
        db.SaveChanges();
        return RedirectToAction("Teams");
    }
    return RedirectToAction("Teams");
} 
```

问题是，如果我只向`[HttpPost]`CreatePlayer 发送一个播放器，它就可以工作，如下所示：

```
[HttpPost]
public ActionResult CreatePlayer(Player player) 
```

但在那种情况下，我没有得到`imageId`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:36:13.237

您的视图模型属性只有私有设置器。默认模型绑定器无法设置它们的值。所以像这样改变你的视图模型：

```
public class PlayerViewModel
{
    public Player Player { get; set; }
    public IEnumerable<Image> Image { get; set; }
} 
```

您的下拉列表也不正确。您正在尝试将其绑定到复杂的集合属性。您需要一个简单的标量属性将所选值绑定到：

```
public class PlayerViewModel
{
    public Player Player { get; set; }

    public IEnumerable<Image> Images { get; set; }
    public string ImageId { get; set; }
} 
```

在视图中：

```
<div>
    @Html.LabelFor(x => x.ImageId)
</div>
<div>
    @Html.DropDownListFor(
        x => x.ImageId, 
        new SelectList(Model.Images, "Id", "ImageName")
    )
</div> 
```

# algorithm - 允许有 1 个不匹配的字符串匹配（DNA）

> ID：10277930
> 
> 赞同：0
> 
> 时间：2012-04-23T09:28:36.110
> 
> 标签：algorithm

我需要一个非常快速有效的算法来匹配 DNA 模式的字符串，最多允许 1 个不匹配。我尝试了 boyer-moore-horspool 算法，但它超过了所需的时间。文本和模式的长度最多为 100000。请建议我一个非常快速的算法，我可以开始努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T05:00:06.510

您可以尝试汉明距离算法，距离 = 1

[http://en.wikipedia.org/wiki/Hamming_distance](http://en.wikipedia.org/wiki/Hamming_distance)

# character-encoding - 在 Go 中读取非 UTF-8 文本文件

> ID：10277933
> 
> 赞同：25
> 
> 时间：2012-04-23T09:28:41.657
> 
> 标签：character-encoding, go

我需要阅读一个以[GBK](https://en.wikipedia.org/wiki/GBK)编码的文本文件。Go 编程语言中的标准库假定所有文本都以 UTF-8 编码。

如何读取其他编码的文件？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-21T16:22:56.543

以前（如旧答案中所述）“简单”的方法涉及使用需要 cgo 并包装 iconv 库的第三方包。由于许多原因，这是不可取的。值得庆幸的是，很长一段时间以来，仅使用 Go 作者提供的包（不在主要包集中，而是在[Go 子存储库](https://github.com/golang/go/wiki/SubRepositories)中）提供了一种优越的全 Go 方式来执行此操作。

该[`golang.org/x/text/encoding`](https://godoc.org/golang.org/x/text/encoding)包为通用字符编码定义了一个接口，该接口可以与 UTF-8 相互转换。[`golang.org/x/text/encoding/simplifiedchinese`](https://godoc.org/golang.org/x/text/encoding/simplifiedchinese)子包提供GB18030 [、](https://en.wikipedia.org/wiki/GB18030) GBK[和](https://en.wikipedia.org/wiki/GBK)HZ [-GB2312](https://en.wikipedia.org/wiki/GB2312#HZ)编码实现。

下面是一个读写GBK编码文件的例子。请注意，在读取/写入数据时， `io.Reader`and`io.Writer`会“即时”进行编码。

```
package main

import (
    "bufio"
    "fmt"
    "log"
    "os"

    "golang.org/x/text/encoding/simplifiedchinese"
    "golang.org/x/text/transform"
)

// Encoding to use. Since this implements the encoding.Encoding
// interface from golang.org/x/text/encoding you can trivially
// change this out for any of the other implemented encoders,
// e.g. `traditionalchinese.Big5`, `charmap.Windows1252`,
// `korean.EUCKR`, etc.
var enc = simplifiedchinese.GBK

func main() {
    const filename = "example_GBK_file"
    exampleWriteGBK(filename)
    exampleReadGBK(filename)
}

func exampleReadGBK(filename string) {
    // Read UTF-8 from a GBK encoded file.
    f, err := os.Open(filename)
    if err != nil {
        log.Fatal(err)
    }
    r := transform.NewReader(f, enc.NewDecoder())

    // Read converted UTF-8 from `r` as needed.
    // As an example we'll read line-by-line showing what was read:
    sc := bufio.NewScanner(r)
    for sc.Scan() {
        fmt.Printf("Read line: %s\n", sc.Bytes())
    }
    if err = sc.Err(); err != nil {
        log.Fatal(err)
    }

    if err = f.Close(); err != nil {
        log.Fatal(err)
    }
}

func exampleWriteGBK(filename string) {
    // Write UTF-8 to a GBK encoded file.
    f, err := os.Create(filename)
    if err != nil {
        log.Fatal(err)
    }
    w := transform.NewWriter(f, enc.NewEncoder())

    // Write UTF-8 to `w` as desired.
    // As an example we'll write some text from the Wikipedia
    // GBK page that includes Chinese.
    _, err = fmt.Fprintln(w,
        `In 1995, China National Information Technology Standardization
Technical Committee set down the Chinese Internal Code Specification
(Chinese: 汉字内码扩展规范（GBK）; pinyin: Hànzì Nèimǎ
Kuòzhǎn Guīfàn (GBK)), Version 1.0, known as GBK 1.0, which is a
slight extension of Codepage 936\. The newly added 95 characters were not
found in GB 13000.1-1993, and were provisionally assigned Unicode PUA
code points.`)
    if err != nil {
        log.Fatal(err)
    }

    if err = f.Close(); err != nil {
        log.Fatal(err)
    }
} 
```

[`Playground`](https://play.golang.org/p/fEBzqxKrd6Z)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T09:57:37.093

试试[go-iconv](https://github.com/djimenez/iconv-go)。它包装`iconv`并实现`io.Reader`和`io.Writer`.

golang-china讨论组中的这条[消息](https://groups.google.com/forum/#!topic/golang-china/QRR-pepLWYI)`go-iconv`提到了一些使用示例。

# jquery - 使用jQuery查找知道行和列ID的表格单元格

> ID：10277934
> 
> 赞同：14
> 
> 时间：2012-04-23T09:28:42.303
> 
> 标签：jquery, html-table

我有一个简单的表，我在其中设置了标题的 ID 和行的 ID。给定两者的 ID，我需要在这两者的交点处找到相应的单元格。

例子：

```
<table id="tablica">
    <thead>
        <th id="bla">Bla</th>
        <th id="bli">Bli</th>
        <th id="blu">Blu</th>
    </thead>
    <tbody>
        <tr id="jedan">
            <td>1</td>            
            <td>2</td>
            <td>3</td>
        </tr>
        <tr id="dva">
            <td>4</td>            
            <td>5</td>
            <td>6</td>
        </tr>
        <tr id="tri">
            <td>7</td>            
            <td>8</td>
            <td>9</td>
        </tr>
    </tbody>
</table>​​​ 
```

所以如果我有 id="bli" 和 id="dva"，这意味着我想在这个例子中对值为 5 的单元格做一些事情。

**编辑：**有很多正确的答案，我都投了赞成票，但不幸的是我只能选择一个正确的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T09:47:58.177

这是我的解决方案：

```
var column = $('#bli').index();
var cell = $('#dva').find('td').eq(column); 
```

以及关于 jsfiddle 的工作示例：http: [//jsfiddle.net/t8nWf/2/](http://jsfiddle.net/t8nWf/2/)

全部添加到一个函数中：

```
function getCell(column, row) {
    var column = $('#' + column).index();
    var row = $('#' + row)
    return row.find('td').eq(column);
} 
```

工作示例：http: [//jsfiddle.net/t8nWf/5/](http://jsfiddle.net/t8nWf/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:34:43.657

如果您获得了行的 ID，则可以选择其中包含数据 5 的列。

```
$("#dva").find("td:contains(5)").css({"background-color":"red"}); 
```

也[将此小提琴](http://jsfiddle.net/3sEGf/3/)作为工作示例。

**编辑** 在不知道只有 id 的行的 id 的情况下，您还可以找到单元格：

```
$("#tablica tr").find("td:contains(5)").css({"background-color":"red", "padding":"5px"}); 
```

[工作示例](http://jsfiddle.net/3sEGf/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:39:10.500

```
$('#dva > td').eq($('#bli').index()); // returns the td element 
```

应该管用。工作示例：http: [//jsbin.com/acevon/edit#javascript,html,live](http://jsbin.com/acevon/edit#javascript,html,live)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T09:39:46.867

这将为您提供所需的 TD 元素作为 jQuery 对象：

```
var thIndex = $( '#tablica #bli' ).index (); // get index of TH in thead
var $td = $( $( '#dva td' ).get ( thIndex ) ); // get the TD in the target TR on the same index as is in the thead 
```

[JSFiddle 示例](http://var%20thIndex%20=%20%24%28%20%27#tablica%20#bli%27%20%29.index%20%28%29;%20//%20get%20index%20of%20TH%20in%20thead%20var%20%24td%20=%20%24%28%20%24%28%20%27#dva%20td%27%20%29.get%20%28%20thIndex%20%29%20%29;%20//%20%20alert%20%28%20%24td.html%20%28%29%20%29;%E2%80%8B)

# java - 检查用户正在使用什么手机

> ID：10277935
> 
> 赞同：0
> 
> 时间：2012-04-23T09:28:49.477
> 
> 标签：java, android, android-camera, environment

他们是一种检查用户使用什么手机的方法。我将解释为什么我想知道这一点。

在我的应用程序中，我必须从用户的相机路径中拍摄照片。在三星设备中，即 DCIM/Camera。但在 HTC 设备中，就是 DCIM/100MEDIA。

所以当我看到用户有一部 HTC 手机时，我可以在我的应用程序中更改相机路径字符串。

或者他们是在手机上访问相机文件夹的一种方式？

我知道如何访问根目录：

```
File root = Environment.getExternalStorageDirectory(); 
```

我已经尝试`Environment.DIRECTORY_PICTURES;` 过`Environment.DIRECTORY_DCIM;`

也许我以错误的方式使用它。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:52:48.763

尝试以下代码以获取制造商

```
String comp = Build.MANUFACTURER;
String model = Build.MODEL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:41:05.747

使用此代码，您可以获取设备名称`String str = android.os.Build.MODEL;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:41:51.727

要获取设备名称：

```
android.os.Build.MODEL; 
```

[在这里找到](https://stackoverflow.com/questions/7071281/get-android-device-name)

但是在您的情况下，如果您使用以下命令直接查找默认路径会更好：

```
getExternalStorageDirectory(); 
```

如果 API 级别低于 7，则附加 /Pictures 以获取照片存储的路径。

```
getExternalStoragePublicDirectory (DIRECTORY_PICTURES) 
```

如果 API 级别 > 7

[在这里找到](https://stackoverflow.com/questions/6248887/android-device-specific-camera-path-issue)

有关更多详细信息，请访问此[链接](http://developer.android.com/guide/topics/data/data-storage.html)。部分：保存应共享的文件

# sql-server - 存储在 varchar 中的 SQL Server 混合数据类型中的自定义排序顺序

> ID：10277937
> 
> 赞同：6
> 
> 时间：2012-04-23T09:28:51.800
> 
> 标签：sql-server, sql-server-2008, sorting

我有这个

```
declare @testtable table (test nvarchar(max))

insert into @testtable (test) values ('1.2.3')
insert into @testtable (test) values ('1.20.3')
insert into @testtable (test) values ('1.19.x')
insert into @testtable (test) values ('1.x.x')
insert into @testtable (test) values ('1.19.3')
insert into @testtable (test) values ('DEC09')
insert into @testtable (test) values ('Plutonium')
insert into @testtable (test) values ('dec09')
insert into @testtable (test) values ('N/A')
insert into @testtable (test) values ('MyTest20')
insert into @testtable (test) values ('20MyTest')
insert into @testtable (test) values ('1.4.18')
insert into @testtable (test) values ('1.4.168')

select * from @testtable
order by test asc; 
```

哪个输出

```
1.19.3
1.19.x
1.2.3
1.20.3
1.4.168
1.4.18
1.x.x
20MyTest
DEC09
dec09
MyTest20
N/A
Plutonium 
```

但我希望输出顺序是

```
1.2.3
1.4.18
1.4.168
1.19.3
1.19.x
1.20.3
1.x.x
20MyTest
DEC09
dec09
MyTest20
Plutonium
N/A 
```

（请注意，N/A 是“神奇的”并且总是最大的，“版本”（例如 1.2.3）总是有 3 位数字，尽管一个或多个数字可能是 char x 来表示“任何数字”，这应该总是被认为是最大的可能数字）

如何在 SQL Server 中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:43:42.903

```
select TT.*
from @testtable as TT
order by case when TT.test = 'N/A' then 1 else 0 end,
         case when isnumeric(parsename(test, 3)+'E+00') = 1 then cast(parsename(test, 3) as int) else 99999 end,
         case when isnumeric(parsename(test, 2)+'E+00') = 1 then cast(parsename(test, 2) as int) else 99999 end,
         case when isnumeric(parsename(test, 1)+'E+00') = 1 then cast(parsename(test, 1) as int) else 99999 end,
         test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:27:40.413

这应该很容易。

创建一个包含 2 列的新表：

OrderValue 字符串

描述字符串

按您想要的顺序放置值

a- 1.2.3

b- 1.4.18

c- 1.4.168

d- 1.19.3

e- 1.19.x

f- 1.20.3

g- 1.xx

h- 20MyTest

i- DEC09

j- dec09

k- MyTest20

l- 钚

m- 不适用

现在用这个新表加入测试表并按“OrderValue”排序

这就对了

# c# - 没有接受 0 个参数的构造函数——但这不是真的吗？

> ID：10277942
> 
> 赞同：0
> 
> 时间：2012-04-23T09:29:07.697
> 
> 标签：c#, constructor

我在 ac# 项目中编写了以下代码：

```
private void RandAddButton_Click(object sender, EventArgs e) {
    int numberOfItems = int.Parse(amountItems.Text);
    CreateDataSet.CreateDataSet create = new CreateDataSet.CreateDataSet();
    create.CreateItems(numberOfItems);
} 
```

如您所见，我正在尝试使用 CreateDataSet 类中的 CreateItems。问题是我收到以下错误

> 'CreateDataSet.CreateDataSet' 不包含采用 0 个参数的构造函数

但在 CreateDataSet 类中，我有以下构造函数：

```
public CreateDataSet() {

} 
```

为什么这不起作用？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:31:17.800

您的调用`new CreateDataSet.CreateDataSet()`想要创建嵌套类的实例`CreateDataSet.CreateDataSet`。如果你想调用你的构造函数，`CreateDataSet`你应该使用`new CreateDataSet()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:48:43.177

做这个：

```
 CreateDataSet create = new CreateDataSet(); 
```

代替：

```
 CreateDataSet.CreateDataSet create = new CreateDataSet.CreateDataSet(); 
```

# django - Django - 即使在通过单击浏览器中的后退按钮从加载的页面注销后也进行 Ajax 调用

> ID：10277945
> 
> 赞同：0
> 
> 时间：2012-04-23T09:29:31.743
> 
> 标签：django

当我注销并在浏览器中按返回按钮时，页面加载并且其中的链接也弹出到新页面。还有 ajax 调用，比如按钮单击，发出一个 ajax 请求，响应包含登录页面的 html。但是，该页面未重定向到登录页面。

我的问题是如何防止链接在新窗口中弹出以及如何在进行 ajax 调用时重定向到登录页面？

但是，当我点击刷新按钮时，会加载登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:03:51.183

如果您在浏览器中按下返回按钮，页面将从浏览器缓存中加载。我想您可以在注销后清除缓存。

[阅读更多](http://www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout)

无论如何，如果用户注销，按下返回调用 ajax 调用，如果需要身份验证，他或她将不会获得有效的数据返回。例子：

```
ajax.py

def get_inbox_messages_count(request):
    data = {}
    user = request.user
    if user.is_authenticated():
        return data = { ... } 
```

正如预期的那样，单击上一个按钮不会调用数据返回。

# c++ - 为什么不可能有 const 静态函数？

> ID：10277949
> 
> 赞同：0
> 
> 时间：2012-04-23T09:29:45.830
> 
> 标签：c++, function, static, constants

> **可能重复：**
> [为什么类的静态成员函数没有“常量正确性”的概念？](https://stackoverflow.com/questions/10100649/why-there-is-no-concept-of-const-correctness-for-classs-static-member-functio)

这个问题与我在 SO 上找到的许多问题非常相似，但在你得到重复的后触发手指抽搐之前，让我解释一下：

静态函数没有`this`对象的概念，这很好，并且拥有静态 const 函数没有意义，因为 const 会暗示 a `const *this`，在此上下文中不存在。

*但是*，同一个命名空间中的其他静态变量呢？为什么静态 const 函数不能工作，以便将 const 限定符放在同一命名空间中的所有静态变量上（或者可能全部）？

由于静态 const 函数没有目的并且不会编译，有没有理由为什么这不能有单独的含义？即：*“一个静态常量函数不能修改其他静态变量”*。

也许它使语言实现复杂化？有没有考虑过？

谢谢

# osgi - 是否可以使用 iPOJO 将服务绑定到多个消费者？

> ID：10277959
> 
> 赞同：0
> 
> 时间：2012-04-23T09:30:09.683
> 
> 标签：osgi, ipojo

在我的 iPOJO 应用程序中，我尝试将服务绑定到两个消费者：

消费者：

```
@Component(immediate = true)
@Instantiate(name = "com.example.consumerX")
@Provides
public class consumerX{
    @Requires(id="ms",optional=true)
    private MyService[] services;

    @Bind(id = "ms", aggregate = true, optional = true)
    public synchronized void register(MyService service) {
            System.out.println("service bind to consumer");
    }

    @Unbind(id = "ms")
    public synchronized void unregister(MyService service) {
            System.out.println("service unbind from consumer");
    }
} 
```

服务：

```
@Component(immediate = true)
@Instantiate(name = "com.example.serviceX")
@Provides(specifications = { MyService.class, MyServiceX.class})
public class MyServiceX{
    ...
} 
```

如果我启动consumerA、consumerB 和serviceA，服务只绑定到consumerA。如果我启动 consumerB 和 serviceA，服务将绑定到 consumerB。

是否可以让服务绑定到两个消费者？有注释吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:04:32.277

一个服务绝对有可能被多个消费者使用。您的代码看起来不错，因此它应该可以工作。

您是否尝试使用“实例”命令 (http://felix.apache.org/site/ipojo-arch-command.html) 检查当前状态？

# android - Java GridLayout 之类的布局？

> ID：10277963
> 
> 赞同：0
> 
> 时间：2012-04-23T09:30:24.403
> 
> 标签：android, android-layout

基本上我想获得一个行为类似于 Java GridLayout 的布局。

我尝试了 LinearLayout 和 TableRow，但元素总是一个接一个地添加。

实现这一目标的最佳方法是什么（使用 xml 方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:39:12.203

据此，[您](http://android-developers.blogspot.com/2012/03/updated-sdk-tools-and-adt-revision-17.html)可以将 GridLayout 与支持库一起使用

> 一个新的库项目将 GridLayout 支持添加回 API 级别 7 及更高级别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:55:29.390

解决了它：

```
<LinearLayout
    android:orientation="horizontal"    
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" >

    <Button
        android:id="@+id/button1"
        style="@style/ButtonStyle"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/main_buttons"
        android:text="@string/sGet" 
        android:layout_weight="1" />

    <Button
        android:id="@+id/button2"
        style="@style/ButtonStyle"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/main_buttons"
        android:text="@string/sStop"
        android:layout_weight="1" />

    <Button
        android:id="@+id/button3"
        style="@style/ButtonStyle"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/main_buttons"
        android:text="@string/sSettings"
        android:layout_weight="1" />

    <Button
        android:id="@+id/button4"
        style="@style/ButtonStyle"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/main_buttons"
        android:text="@string/sExit"
        android:layout_weight="1" /> 

</LinearLayout> 
```

# c - 如何更改按钮上的光标？

> ID：10277966
> 
> 赞同：4
> 
> 时间：2012-04-23T09:30:41.147
> 
> 标签：c, windows, winapi, user-interface, button

```
static HWND btn;
HCURSOR cursor = LoadCursor(0, IDC_CROSS);

case WM_CREATE:
    btn = CreateWindow(TEXT("BUTTON"), TEXT("Press Me"),
                       WS_CHILD|WS_VISIBLE, 50, 50, 80, 30,
                       hwnd, (HMENU) 111, NULL, NULL); 
```

现在，在 中`WM_COMMAND`，我尝试使用：

```
SendMessage(btn, WM_SETCURSOR, 0, (LPARAM) cursor); 
```

这是行不通的。

那么如何在单击按钮后更改鼠标光标呢？另外，当鼠标悬停在按钮上时，如何更改鼠标的光标（就像悬停在网络浏览器中的链接上时它会变成一只手）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:16:57.960

使用此代码更改单个控件的光标：

```
SetClassLong(btn, GCL_HCURSOR, (LONG)cursor); 
```

对于 64 位兼容性，首选方法是：

```
SetClassLongPtr(btn, GCL_HCURSOR, (LONG_PTR)cursor); 
```

请注意，这不会仅更改指定`btn`窗口的图标，但对于具有相同类的所有窗口，您必须先注册一个自定义类名称，`RegisterClass()`然后`WNDCLASS.lpszClassName`在创建时在结构中使用它`btn`。

同样，这将适用于具有该（自定义）类的所有 Windows。要更改单个特定窗口的光标，您需要对其进行子类化，管理`WM_SETCURSOR`消息，如果（例如）`lParam`是`HTCLIENT`（指针进入窗口客户区）然后调用`SetCursor()`以设置您想要的光标（不要忘记`TRUE`在此返回案子）。当然，这可能是暂时的（`SetWindowLongPtr()`使用调用`GWLP_WNDPROC`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:32:29.467

您应该[`SetCursor()`在`WM_SETCURSOR`消息处理程序](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/25/421707.aspx)中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:36:28.667

```
LRESULT CALLBACK DlgProc (HWND hWndDlg, UINT message, WPARAM wParam, LPARAM lParam) {
   static RECT rcButton;
   static HWND hButton;
   static HCURSOR hCursor;
   // ...
  switch (message) {
    case WM_INITDIALOG:
      hButton = GetDlgItem (hWndDlg, IDC_BUTTON);
      GetClientRect (hButton, &rcButton);
      MapWindowPoints (hButton, hWndDlg, (LPPOINT) &rcButton, 2);
      break;
    case WM_MOUSEMOVE:
      if ((LOWORD (lParam) >= rcButton.left - 1 && LOWORD (lParam) <= rcButton.right) && (HIWORD (lParam) >= rcButton.Top - 1 && (HIWORD (lParam) <= rcButton.bottom))
          SetClassLong (hButton, GCL_HCURSOR, (LONG) LoadCursor (NULL, IDC_CROSS));
      else
         SetClassLong (hButton, GCL_HCURSOR, (LONG) LoadCursor (NULL, IDC_ARROW));
      break;
   // ... 
```

它肯定会完成你的工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T00:39:11.890

> 另外，当鼠标悬停在按钮上时，如何更改鼠标的光标（就像悬停在网络浏览器中的链接上时它会变成一只手）？

您可以对按钮进行超类化并创建具有手形图标的新按钮类。

在 BUTTON 类上使用 GetClassInfoEx，更改光标，给它一个新的类名，注册它并使用新的类名通过 CreateWindowEx 创建按钮。

# jquery - JQuery - 具有多个按键场景的单击事件（棘手）

> ID：10277971
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:01.493
> 
> 标签：jquery

我有一个跨度列表。都有类预加载器。除了该类之外，跨度可以具有活动或非活动类。默认情况下设置为非活动。基本上活动意味着黑色字体颜色和活动橙色字体颜色。点击后，我有 2 个场景。只需单击一下，所有跨度都设置为非活动，单击的跨度设置为活动。在按下 alt 的情况下单击时，仅从单击的范围中删除不活动的类，并将活动的类添加到其中。这工作正常。我想知道的是添加一个新场景，如下所示：在单击 + alt + cmd (mac os) 时，我想将活动类添加到具有活动类的最后一次单击跨度之间的所有跨度，以及当前点击跨度。希望我很清楚。预先感谢您的回复。干杯。马克

[http://jsfiddle.net/E2nM4/](http://jsfiddle.net/E2nM4/)

我的html：

```
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span>
<span class="pre-loader inactive">item</span> 
```

我的CSS：

```
span{margin-left:15px;}
.pre-loader.inactive{color:black;}
.pre-loader.active{color:orange;} 
```

我的js：

```
$(document).on({
    click: function(e) {

        if (e.altKey) {
            $(this).removeClass('inactive').addClass('active');
        }
        else {
            $('.pre-loader').removeClass('active').addClass('inactive');
            $(this).addClass('active');
        }

    }
}, ".pre-loader");​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:20:03.950

我设法找到解决方案。对于那些感兴趣的人，请查看下面的链接。

[http://jsfiddle.net/xqNT8/6/](http://jsfiddle.net/xqNT8/6/)

# ms-access - JDBC访问更新查询

> ID：10277972
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:02.127
> 
> 标签：ms-access, jdbc, ms-access-2007

我有 jdbc 和 Access 的更新查询问题。数据库名称是“avi”，里面有一个名为“part1”的表。！[桌子](http://i.stack.imgur.com/0qThR.png)

编码：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:avi");
Statement statement = con.createStatement( );
String queryTemp="UPDATE part1 SET level=5 where qid=1";
statement.executeQuery(queryTemp); 
```

该表确实有一个 qid=1 的条目。这是控制台错误：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in
 UPDATE statement.
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6957)
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
    at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3110)
    at sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:338)
    at sun.jdbc.odbc.JdbcOdbcStatement.executeQuery(JdbcOdbcStatement.java:2 
```

53) 在 Conn.updt(Conn.java:47)

第 47 行是 statement.executeQuery(queryTemp);

我在查询中出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:46:39.307

您需要为保留字添加方括号：

```
[level] 
```

[http://office.microsoft.com/en-us/access-help/sql-reserved-words-HP001032249.aspx](http://office.microsoft.com/en-us/access-help/sql-reserved-words-HP001032249.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:53:54.667

替换上面的语句

```
statement.executeUpdate(queryTemp); 
```

和

```
statement.executeQuery(queryTemp); 
```

"executeQuery()" 用于 ddl statemets ，而 "executeUpdate()" 用于 dml 语句，如 insert，update 与行操作相关！！！！！！！！！

# jquery - 如果从这个网站重定向 - 留在页面上，否则重定向到移动页面

> ID：10277973
> 
> 赞同：1
> 
> 时间：2012-04-23T09:31:04.670
> 
> 标签：jquery, redirect

我的网页上有一个重定向脚本，上面写着如果您的浏览器宽度小于 699，您将被重定向到移动页面。

```
<script type="text/javascript">

if (screen.width <= 699) {
document.location = "http://www.idekraft.se/m/";
}

</script> 
```

现在的问题是 - 在我的移动页面上，我有一个按钮，上面写着“带我到普通网页”。由于我愚蠢的屏幕宽度重定向脚本，如果您愿意，您无法访问手机上的“正常”网页。

我的问题是 - 我如何解决脚本所以也许它说如果你来自这个地址 www.idekraft.se/m 这个脚本不会影响你。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:39:05.513

使用 cookie。而且我更喜欢 jQuery cookie[插件](https://github.com/carhartl/jquery-cookie)。

在您有链接的移动页面上，在链接上`click`的事件上放置一个侦听器，然后在重定向之前 - 设置一个 cookie `$.cookie('interface', 'web');`，然后在整个网页上的设置界面上添加检查

```
if (tyepof $.cookie('interface') != 'undefined' || screen.width < 699) {
    // redirect
} 
```

因此，如果有人访问您的完整网站，如果屏幕小于 699 像素，它将被重定向到移动设备，并且如果他点击移动网站上的“完整版”链接 - 系统会设置 cookie 和 to`interface = 'web'`以及您的 if 语句不是`true`重定向用户。

*这是完全有效的示例：*

`deskop.php`：

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="/js/jquery.cookie.js"></script>
        <script type="text/javascript">
            var ui = $.cookie('ui');

            $(document).ready(function() {
                if (ui != 'desktop' && screen.width < 699) {

                    $.cookie('ui', 'mobile', { expires: 365 });
                    window.location = '/mobile.php';
                }   
            });

            $(document).on('click', 'a#redirect', function(e) {
                e.preventDefault();
                e.stopPropagation();
                $.cookie('ui', 'mobile', { expires: 365 });
                window.location = $(this).attr('href');
            });
        </script>
    </head>
    <body>
        <a href="/mobile.php" id="redirect">Go to the mobile version</a>
    </body>
</html> 
```

`mobile.php`：

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="/js/jquery.cookie.js"></script>
        <script type="text/javascript">
            var ui = $.cookie('ui');

            $(document).ready(function() {
                if (ui != 'desktop' && screen.width > 699) {

                    $.cookie('ui', 'desktop', { expires: 365 });
                    window.location = '/desktop.php';
                }   
            });

            $(document).on('click', 'a#redirect', function(e) {
                e.preventDefault();
                e.stopPropagation();
                $.cookie('ui', 'desktop', { expires: 365 });
                window.location = $(this).attr('href');
            });
        </script>
    </head>
    <body>
        <a href="/desktop.php" id="redirect">Go to the desktop version</a>
    </body>
</html> 
```

此外，您需要在资源文档根目录的`jquery.cookie.js`文件夹中有文件。`/js`

希望，这就是你所需要的，因为我不知道如何更清楚地描述它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:40:29.353

最简单的方法是使用 cookie。当用户点击“带我到普通网页”时，设置一个cookie：

```
<button type="button" onclick="document.cookie='mobile=no';history.back()">
  Take me to the normal webpage
</button> 
```

在您的正常页面上，检查 cookie 是否存在：

```
if (screen.width <= 699 && !/mobile=no/.test(document.cookie)) {
    document.location = "http://www.idekraft.se/m/";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:38:08.243

当小屏幕设备上的某人想要查看主网站时添加查询字符串，例如

[http://www.idekraft.se/m=0](http://www.idekraft.se/m=0)

在您的 if 语句中，检查`m`.

伪代码：

```
if screen width is less than 699 AND m is not equal to zero
   redirect 
```

更新：您也可以使用 Session 或 Cookies。恕我直言，查询字符串更好。

# jquery - 需要 Jquery 帮助（Rails 3）

> ID：10277974
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:04.877
> 
> 标签：jquery, ruby-on-rails-3

首先，我的 Jquery 知识非常有限，但我正在阅读和练习以解决这个问题，所以如果这是一个非常基本的问题，请多多包涵。正如标题所述，我在我的 Rails 应用程序中收到一条错误消息

```
 $(".share a").button is not a function 
```

我的 application.js 文件包含这个

```
 $(function() {

  $(".share a")
  .button()
  .click(function() {

    var a = this;

    // first set the title of the dialog box to display the folder name
    $("#invitation_form").attr("title", "Share '" + $(a).attr("folder_name") + "' with others");

    // a hack to display the different folder names correctly
    $("#ui-dialog-title-invitation_form").text("Share '" + $(a).attr("folder_name") + "' with others");

    // then put the folder_id of the share link into the hidden field "folder_id" of the invite form
    $("#folder_id").val($(a).attr("folder_id"));

    // the dialog box customization
    $("#invitation_form").dialog({
      height: 300,
      width: 600,
      modal: true,
      buttons: {
        // first button
        "Share": function() {
          // get the url to post the data to
          var post_url = $("#invitation_form form").attr("action");

          // serialize the form data and post it the url with ajax
          $.post(post_url, $("#invitation_form form").serialize(), null, "script");

          return false;
        },
        // second button
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      },
      close: function() {
      }
    });

    return false;
  }); 
```

});

我的视图页面包含这个来调用jquery（我认为）

```
 <div class="share">
        <%= link_to "Share", "#", :folder_id => folder.id, :folder_name =>       folder.nameunless @is_this_folder_being_shared %>
      </div> 
```

谁能告诉我为什么我会收到这个错误，因为我可以看到它应该可以工作，当我点击一个标记为共享的按钮时，我应该会在我的邀请表单中出现一个弹出窗口。

任何帮助表示赞赏，因为我现在被困在这一点上 - 最后我被告知我可能忘记包含 Jquery UI，但我的应用程序中有这个库，尽管我开始怀疑我是否有 2 个冲突的库jquery-ui 和 jquery-ui-1.8.9.custom.min.js 在同一个目录？有谁知道这是否可能是这种情况？

这是我的资产管道

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

和我的javascripts中的jquery-ui-1.8.9.custom（那里没有其他UI）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:03:49.243

由于`jquery-ui.js`正在加载，但浏览器 javascript 引擎找不到该功能`button`，问题可能是由于您正在使用的 jquery-ui 构建中遗漏了“按钮”小部件。您可以通过构建一个包含小部件的新脚本并使用它来代替当前的`jquery-ui.js`. 如果它有效，那么这就是你的答案。

# android - android: .nomedia 文件是以某种方式创建的。这个怎么可能？

> ID：10277975
> 
> 赞同：1
> 
> 时间：2012-04-23T09:31:07.223
> 
> 标签：android

自上周以来，我的应用程序中的图像不再出现在我的画廊中。现在我刚刚找到了原因。不知何故，创建了一个 .nomedia 文件，因此不扫描此目录。这很尴尬！我从未创建过该文件。任何人都知道这样的事情是如何发生的？

# ruby-on-rails - 打开的 zip 文件中的 cd 目录

> ID：10277976
> 
> 赞同：1
> 
> 时间：2012-04-23T09:31:14.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, file, zip

我有一个 zip 文件，它在第一个“级别”上只包含目录。就像是：

some_file.zip

/打开的文件（1级）

-> 目录/

/ 2级

-> 文件.txt

-> 文件 2.txt

`cd`有人可以编写代码如何`Directory\`列出所有条目吗？

我已经编写了代码，但它不起作用：

```
require 'zip/zipfilesystem'

Zip::ZipFile.open("./some_file.zip") do |zipfile|
  zipfile.each_with_index do |file, index|
    puts "inspect file == #{file.inspect}"
    puts "entries == #{ zipfile.entries }"
    entries = zipfile.entries
    puts "zipfile.open file #{ zipfile.read(file) }"
  end
end 
```

PS我使用`rubyzip` [https://github.com/aussiegeek/rubyzip](https://github.com/aussiegeek/rubyzip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:26:48.363

你的代码似乎有点太复杂了。假设你有一个这样的 zip 文件：

```
$ mkdir data
$ cd data
$ touch foo bar baz
$ cd ..
$ zip -r data.zip data/ 
```

`entries`然后，您可以使用以下示例中的方法列出 zip 文件的内容：

```
require 'zip/zip'

zip = Zip::ZipFile.open('data.zip')
zip.entries.each do |entry|
  puts entry
end 
```

这个小例子产生以下输出：

```
data/
data/bar
data/baz
data/foo 
```

# bash - 在 shell 脚本中连接到 sqlplus 并运行 SQL 脚本

> ID：10277983
> 
> 赞同：38
> 
> 时间：2012-04-23T09:31:36.073
> 
> 标签：bash, shell, sqlplus

我有一个 .sql 文件，它是一堆 oracle pl/sql 命令，我想创建一个 shell 脚本来运行这些命令。

假设这`user/pass@server`是我的凭据。执行此类任务的 shell 脚本是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-23T09:40:04.420

例如：

```
sqlplus -s admin/password << EOF
whenever sqlerror exit sql.sqlcode;
set echo off 
set heading off

@pl_script_1.sql
@pl_script_2.sql

exit;
EOF 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-19T15:39:53.380

在安全方面，类似的东西不是更好吗？：

```
sqlplus -s /nolog << EOF
CONNECT admin/password;

whenever sqlerror exit sql.sqlcode;
set echo off 
set heading off

@pl_script_1.sql
@pl_script_2.sql

exit;
EOF 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T08:48:46.087

如果要将输出重定向到日志文件以查找错误或其他内容。你可以做这样的事情。

```
sqlplus -s <<EOF>> LOG_FILE_NAME user/passwd@host/db
#Your SQL code
EOF 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-15T11:48:23.353

这应该处理问题：

1.  当 SQLERROR 退出 SQL.SQLCODE
2.  假脱机 ${SPOOL_FILE}
3.  $RC 返回 oracle 的退出代码
4.  $SPOOL_FILE 中的 cat 解释错误

```
SPOOL_FILE=${LOG_DIR}/${LOG_FILE_NAME}.spool 

SQLPLUS_OUTPUT=`sqlplus -s  "$SFDC_WE_CORE" <<EOF 
        SET HEAD OFF
        SET AUTOPRINT OFF
        SET TERMOUT OFF
        SET SERVEROUTPUT ON

        SPOOL  ${SPOOL_FILE} 

        WHENEVER SQLERROR EXIT SQL.SQLCODE
        DECLARE 

        BEGIN
           foooo 
        --rollback; 
        END;
    /
    EOF` 

RC=$?

if [[ $RC != 0 ]] ; then

    echo " RDBMS exit code : $RC  "     | tee -a ${LOG_FILE}
    cat ${SPOOL_FILE}                   | tee -a ${LOG_FILE}

    cat ${LOG_FILE} | mail -s "Script ${INIT_EXE} failed on $SFDC_ENV" $SUPPORT_LIST

    exit 3

fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-13T19:22:19.110

这里的一些其他答案启发我编写了一个脚本，用于使用 SQLPLUS 以及项目的 shell 命令自动混合顺序执行 SQL 任务，这个过程以前是手动完成的。也许这个（高度净化的）示例对其他人有用：

```
#!/bin/bash
acreds="user_a/supergreatpassword"
bcreds="user_b/anothergreatpassword"
hoststring='fancyoraclehoststring'

runsql () {
  # param 1 is $1
sqlplus -S /nolog << EOF
CONNECT $1@$hoststring;
whenever sqlerror exit sql.sqlcode;
set echo off
set heading off
$2
exit;
EOF
}

echo "TS::$(date): Starting SCHEM_A.PROC_YOU_NEED()..."
runsql "$acreds" "execute SCHEM_A.PROC_YOU_NEED();"

echo "TS::$(date): Starting superusefuljob..."
/var/scripts/superusefuljob.sh

echo "TS::$(date): Starting SCHEM_B.SECRET_B_PROC()..."
runsql "$bcreds" "execute SCHEM_B.SECRET_B_PROC();"

echo "TS::$(date): DONE" 
```

`runsql`允许您将凭据字符串作为第一个参数传递，并将您需要的任何 SQL 作为第二个参数传递。包含凭据的变量是为了说明，但为了安全起见，我实际上是从另一个文件中获取它们的。如果您想处理多个数据库连接，您可以轻松地修改函数以接受主机字符串作为附加参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-31T07:30:47.657

回声“退出” | echo "SELECT table_name FROM all_tables 仅获取前 10 行；" | sqlplus 管理员/密码 > outputFile.log

# ipad - 用图像创建 pdf

> ID：10277984
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:46.460
> 
> 标签：ipad, pdf

我正在开发一个应用程序，我必须在其中创建来自 plist 的数据的多页 PDF 并通过电子邮件发送此类 PDF。要转换为 PDF 的内容包含文本以及一些图像。我看过一些关于此的帖子，但无法从中收集到太多信息。如果有人能指导这一点，那就太好了。

这是我完成的pdf创建代码。

```
// create some sample data. In a real application, this would come from the database or an API. 
NSString* path = [[NSBundle mainBundle] pathForResource:@"sampleData" ofType:@"plist"];
NSDictionary* data = [NSDictionary dictionaryWithContentsOfFile:path];

NSLog(@"collections %@",data);
NSArray* students = [data objectForKey:@"Students"];
NSLog(@"collections students %@",students);

// get a temprorary filename for this PDF
path = NSTemporaryDirectory();

NSLog(@"path here %@",path);

self.pdfFilePath = [path stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.pdf", [[NSDate date] timeIntervalSince1970]]];

NSLog(@"pdf file path and Name %@",self.pdfFilePath);

// Create the PDF context using the default page size of 612 x 792.
// This default is spelled out in the iOS documentation for UIGraphicsBeginPDFContextToFile
UIGraphicsBeginPDFContextToFile(self.pdfFilePath, CGRectZero, nil);

// get the context reference so we can render to it. 
CGContextRef context = UIGraphicsGetCurrentContext();

int currentPage = 0;

// maximum height and width of the content on the page, byt taking margins into account. 
CGFloat maxWidth = kDefaultPageWidth - kMargin * 2;
CGFloat maxHeight = kDefaultPageHeight - kMargin * 2;

// we're going to cap the name of the class to using half of the horizontal page, which is why we're dividing by 2
CGFloat classNameMaxWidth = maxWidth / 3;

// the max width of the grade is also half, minus the margin
CGFloat gradeMaxWidth = (maxWidth / 3) - kColumnMargin;
CGFloat yearMaxWidth = (maxWidth / 3) - kColumnMargin;

// only create the fonts once since it is a somewhat expensive operation
UIFont* studentNameFont = [UIFont boldSystemFontOfSize:17];
UIFont* classFont = [UIFont systemFontOfSize:15];

CGFloat currentPageY = 0;

UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, kDefaultPageWidth, kDefaultPageHeight), nil);
currentPageY = kMargin;

// iterate through out students, adding to the pdf each time. 
for (NSDictionary* student in students)
{

    // every student gets their own page 
    // Mark the beginning of a new page.

    NSString* title = [NSString stringWithFormat:@"Order List"];

    CGSize size2 = [title sizeWithFont:studentNameFont forWidth:maxWidth lineBreakMode:UILineBreakModeWordWrap];

    [title drawAtPoint:CGPointMake(kMargin, currentPageY) forWidth:maxWidth withFont:studentNameFont lineBreakMode:UILineBreakModeWordWrap];
    currentPageY += size2.height;

    CGContextSetStrokeColorWithColor(context, [[UIColor blueColor] CGColor]);
    CGContextMoveToPoint(context, kMargin, currentPageY);
    CGContextAddLineToPoint(context, kDefaultPageWidth - kMargin, currentPageY);
    CGContextStrokePath(context);

    // draw the student's name at the top of the page. 
    NSString* name = [NSString stringWithFormat:@"%@ %@", 
                      [student objectForKey:@"FirstName"], 
                      [student objectForKey:@"LastName"]];

    CGSize size = [name sizeWithFont:studentNameFont forWidth:maxWidth lineBreakMode:UILineBreakModeWordWrap];
    [name drawAtPoint:CGPointMake(kMargin, currentPageY) forWidth:maxWidth withFont:studentNameFont lineBreakMode:UILineBreakModeWordWrap];
    currentPageY += size.height;

    NSString* dob = [NSString stringWithFormat:@"Grade"];

    CGSize size1 = [name sizeWithFont:studentNameFont forWidth:maxWidth lineBreakMode:UILineBreakModeWordWrap];
    [dob drawAtPoint:CGPointMake(kMargin+ classNameMaxWidth + kColumnMargin, currentPageY) forWidth:maxWidth withFont:studentNameFont lineBreakMode:UILineBreakModeWordWrap];
    currentPageY += size1.height;

    NSString* year = [NSString stringWithFormat:@"Years"];

    CGSize size3 = [dob sizeWithFont:studentNameFont forWidth:maxWidth lineBreakMode:UILineBreakModeWordWrap];
    [year drawAtPoint:CGPointMake(kMargin+ classNameMaxWidth +gradeMaxWidth+ kColumnMargin, currentPageY) forWidth:maxWidth withFont:studentNameFont lineBreakMode:UILineBreakModeWordWrap];
    currentPageY += size3.height;

    // draw a one pixel line under the student's name
    CGContextSetStrokeColorWithColor(context, [[UIColor blueColor] CGColor]);
    CGContextMoveToPoint(context, kMargin, currentPageY);
    CGContextAddLineToPoint(context, kDefaultPageWidth - kMargin, currentPageY);
    CGContextStrokePath(context);

    // iterate through the list of classes and add these to the PDF. 
    NSArray* classes = [student objectForKey:@"Classes"];
    for(NSDictionary* class in classes)
    {
        NSString* className = [class objectForKey:@"Name"];
        NSString* grade = [class objectForKey:@"Grade"];
        NSString *year=[class objectForKey:@"Year"];

        // before we render any text to the PDF, we need to measure it, so we'll know where to render the
        // next line.
        size = [className sizeWithFont:classFont constrainedToSize:CGSizeMake(classNameMaxWidth, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

        // if the current text would render beyond the bounds of the page, 
        // start a new page and render it there instead
        if (size.height + currentPageY > maxHeight) {
            // create a new page and reset the current page's Y value
            UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, kDefaultPageWidth, kDefaultPageHeight), nil);
            currentPageY = kMargin;
        }

        // render the text
        [className drawInRect:CGRectMake(kMargin, currentPageY, classNameMaxWidth, maxHeight) withFont:classFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];

        // print the grade to the right of the class name
        [grade drawInRect:CGRectMake(kMargin + classNameMaxWidth + kColumnMargin, currentPageY, gradeMaxWidth, maxHeight) withFont:classFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];
       [year drawInRect:CGRectMake(kMargin +classNameMaxWidth*2+ kColumnMargin , currentPageY, yearMaxWidth, maxHeight) withFont:classFont lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];

        currentPageY += size.height;

    }

    // increment the page number. 
    currentPage++;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:35:09.727

您可以使用 FDPF。 [http://www.fpdf.org/](http://www.fpdf.org/)。

请仔细阅读手册。如果您在途中遇到任何问题，请发布。

很高兴帮助你:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:02:36.757

```
CGPDFDocumentRef PDFfile;
CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("iPhoneAppProgrammingGuide.pdf"), NULL, NULL);
    PDFfile = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
    CFRelease(pdfURL);
    CGContextRef context;
   totalpagenumper=CGPDFDocumentGetNumberOfPages(PDFfile);

 for( i=1;i<=totalpagenumper;i++)
    {

      imageview=[[UIImageView alloc]initWithFrame:CGRectMake((self.frame.size.width/3),30+n,self.frame.size.width/3,160)];

        UILabel *lable=[[UILabel alloc]initWithFrame:CGRectMake(self.frame.size.width/1.5,n+20+self.frame.size.height/6 , 30, 20)];
        [scrollview addSubview:lable];
        lable.text=[NSString stringWithFormat:@"%i", i];
        lable.backgroundColor=[UIColor clearColor];
        lable.textAlignment=UITextAlignmentCenter;
        n=n+30+self.frame.size.height/6;
        imageview.userInteractionEnabled=YES;
        //_________________________________***************************_______________**************************_____________________________
         totalpagenumper=CGPDFDocumentGetNumberOfPages(PDFfile);

        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        context = CGBitmapContextCreate(NULL,self.bounds.size.width,self.bounds.size.height,8,self.bounds.size.width * 4,colorSpace,kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
        CGColorSpaceRelease(colorSpace);
        CGContextClipToRect(context, CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height));

        CGPDFPageRef page = CGPDFDocumentGetPage(PDFfile,i);
        context = UIGraphicsGetCurrentContext();
        CGContextSaveGState(context);
        CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
        CGContextFillRect(context,[self bounds]);   
        CGContextTranslateCTM(context, -1.0, [self bounds].size.height);
        CGContextScaleCTM(context, 1.0, -1.0);
        CGAffineTransform transform = aspectFit(CGPDFPageGetBoxRect(page, kCGPDFMediaBox),
                                                CGContextGetClipBoundingBox(context));

        CGContextConcatCTM(context, transform);

        CGContextDrawPDFPage(context, page);

        CGContextRestoreGState(context);
        UIGraphicsBeginImageContext(CGSizeMake(self.bounds.size.width, self.bounds.size.height));

        UIGraphicsEndImageContext();

        //_________________________________***************************_______________**************************_____________________________
        CGImageRef imgref;
        imgref=CGBitmapContextCreateImage(context);       

        imageview.tag=i;

        image= [[UIImage alloc]initWithCGImage:imgref ];
        imageview.image=image;

        scrollview.backgroundColor=[UIColor orangeColor];
        [scrollview addSubview:imageview];
        tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(returnpage:)];
        [imageview addGestureRecognizer:tapGR];                

        [scrollview addSubview:imageview1];
        imageview1.frame=CGRectMake(self.frame.size.width/1.5,30, 30, 30);
        arrow=[UIImage imageNamed:@"selectarrow.png"];
        imageview1.image=arrow; 

    }

i am use this source cod to convert pdf file in to image,to change the imageview size to get large images in image view 
```

# search - 想要从客户订单详细信息中搜索地址的字段 type/schema.xml？

> ID：10277987
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:52.310
> 
> 标签：search, solr

我想在地址和文本中搜索纽约，我启用了调试日志，下面是调试日志....

```
rawquerystring: "shipment_recepient_name6:New york", 
querystring: "shipment_recepient_name6:New york", 
parsedquery: "+shipment_recepient_name6:New +shipment_recepient_name1:york ",     parsedquery_toString: "+shipment_recepient_name6:New +shipment_recepient_name1:york ", 
```

我的疑问是我在 field6 上搜索，为什么它在 field1（我的默认搜索字段）上搜索单词的其余部分。你能建议一个模式，我可以在其中搜索地址并根据最高匹配分数返回 res -</p>

我想搜索纽约，因为其中一个字段中的单词包含逗号分隔的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:58:41.570

您是否尝试过对查询进行 url 编码：

```
http://localhost:8080/solr/select?q=shipment_recepient_name6:New%20york 
```

此外，由于您需要完全匹配的短语，请尝试使用引号。

同样非常重要的是，您向 Solr 抛出的那些句子最终如何在 solr 的索引中查找。要检查这一点，您可以使用一个名为[Luke](http://code.google.com/p/luke/)的出色工具（非常适合初学者了解它在后台是如何工作的）。

有关高级查询，请参阅以下资源：
[http ://www.lucidimagination.com/blog/2010/05/23/whats-a-dismax/](http://www.lucidimagination.com/blog/2010/05/23/whats-a-dismax/) [http://wiki.apache.org/solr/DisMaxQParserPlugin](http://wiki.apache.org/solr/DisMaxQParserPlugin)
[http://wiki。 apache.org/solr/ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)
[http://www.lucidimagination.com/blog/2009/02/22/exploring-query-parsers/](http://www.lucidimagination.com/blog/2009/02/22/exploring-query-parsers/)
[http://www.lucidimagination.com/blog/2011/08/08/solr -power-isfdb-part-11/](http://www.lucidimagination.com/blog/2011/08/08/solr-powered-isfdb-part-11/)

# internationalization - 如何在 EJB3 SessionBean 中找出用户的语言？

> ID：10277988
> 
> 赞同：0
> 
> 时间：2012-04-23T09:31:58.550
> 
> 标签：internationalization, ejb-3.0

我们有一个 JSF2.0 / EJB3.0 应用程序。是否可以从 StatelessSessionBean 中访问用户的语言/区域设置？例如类似的东西？

```
@Stateless
@Local(MyService.class)
public class MyServiceBean implements MyService {

    @Resource
    private SessionContext context;

    public void doSomething() {
        Principal principal = context.getCallerPrincipal();

        // how to get acccess to user's language ?
        Locale locale = ...
    }
} 
```

当然，可以通过参数将 Locale 从 web 层传递到 ejb 层给每个方法。但这是最聪明的变种吗？

有没有更好的解决方案类似于**context.getCallerPrincipal();**

我正在寻找类似的东西：**context.getCallerLocale();**

谢谢你的帮助。维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:08:43.283

没有这样的标准功能。一种技术是使用线程本地，但您需要小心确保调用 .remove() 以避免导致容器线程池出现问题。唯一的其他选择是使用特定于供应商的功能，例如 WebSphere Application Server 的[Internationalization 服务](http://publib.boulder.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/i18n/concepts/cin_intserv.html)。

# apache-flex - 从 flex 到 JSP 来回传递参数

> ID：10277991
> 
> 赞同：0
> 
> 时间：2012-04-23T09:32:15.570
> 
> 标签：apache-flex, jsp, actionscript, struts2, flex3

我有一个从朋友那里得到的弹性代码。但我想自定义此代码来解决我的需求。当它可能在小程序上加载时，我想将宽度和高度从 jsp 传递给 flex 代码。这个宽度和高度将决定捕获图像的宽度和高度。捕获图像后，单击“完成”按钮，该按钮调用服务器 url，传递捕获图像的 java byte[]。下面是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application initialize="videoDisplay_creationComplete();" xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" x="149" y="131">
    <mx:Script>
        <![CDATA[
            import mx.graphics.ImageSnapshot;
            import mx.controls.Alert;

        public var cam:Camera = Camera.getCamera();
        public var video:Video = new Video(320,240);
        public var bitmapData:BitmapData = new BitmapData(video.width,video.height);
        public var snapshot:BitmapData;

    public function init():void
    {
        videoDisplay.visible=false;
    }
        public function start():void{
            if (cam == null)
            {
                Alert.show("No camera is installed","Unable to start capture!!!!");
                return;
            }
            video.attachCamera(cam);
            video.x = 20;
            video.y = 20;
            addChild(video);

            var bitmap:Bitmap = new Bitmap(bitmapData);
            bitmap.x = 360;
            bitmap.y = 20;
            addChild(bitmap);

        }   

        private function captureImage(e:MouseEvent):void 
        {
            bitmapData.draw(video);
        }

        private function videoDisplay_creationComplete():void 
        {               
            btnRestartCapture.enabled=false;
                if (cam!=null) {
                    videoDisplay.attachCamera(cam);
                } else {
                    Alert.show("You don't seem to have a camera.");
                }
            }

           public function takeSnapshot():void
            {
                snapshot = ImageSnapshot.captureBitmapData(videoDisplay);
                var bitmap:Bitmap= new Bitmap(snapshot);
                img.source=bitmap;
                videoDisplay.visible=false;

                btnRestartCapture.enabled=true;
            }

            public function sendToServer():void{
                 var loader:URLLoader= new URLLoader();
                loader.dataFormat = URLLoaderDataFormat.BINARY; 
                loader.data=snapshot.getPixels(new Rectangle(0,0,img.width,img.height));
            }
            private function callJavaScript():void {
                ExternalInterface.call("recievePictureFromFlex",snapshot.getPixels(new Rectangle(0,0,img.width,img.height)));
            }

            public function restartCap():void{
                videoDisplay.visible=true;
                btnRestartCapture.enabled=false;                
            }

            public function done():void
            {
                Alert.show("Done taking pix", "Done");
            }
        ]]>
    </mx:Script>
    <!--<mx:Button label="Capture Image" click="captureImage(null);"  id="capture_mc"/>-->

     <mx:VBox x="405" y="115" backgroundColor="white" >
         <mx:Canvas width="100%" height="100%">
             <mx:Image width="350" id="img" height="300"/>
             <mx:VideoDisplay id="videoDisplay" 
                creationComplete="videoDisplay_creationComplete();"
                width="350"
                height="300"  x="0" y="0"/>
         </mx:Canvas>
         <mx:HBox>
             <mx:Button id="btnRestartCapture" label="Clear Picture" click="restartCap();"/>
             <mx:Button id="snapButton" label="Snap" click="takeSnapshot()" width="113"/>
             <mx:Button id="doneButton" label="Done" click="done()" width="113"/>
         </mx:HBox> 
     </mx:VBox>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:43:35.710

对于 jsp --> Flex 通信，可以使用 flashvars： http://livedocs.adobe.com/flex/3/html/help.html?content= [passingarguments_3.html](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_3.html)

# powershell - 如何在 PowerShell 中退出 ForEach-Object

> ID：10277994
> 
> 赞同：77
> 
> 时间：2012-04-23T09:32:23.780
> 
> 标签：powershell, foreach

我有以下代码：

```
$project.PropertyGroup | Foreach-Object {
    if($_.GetAttribute('Condition').Trim() -eq $propertyGroupConditionName.Trim()) {
        $a = $project.RemoveChild($_);
        Write-Host $_.GetAttribute('Condition')"has been removed.";
    }
}; 
```

问题 #1：如何退出 ForEach-Object？我尝试使用“break”和“continue”，但它不起作用。

问题 #2：我发现我可以在`foreach`循环中更改列表...我们不能像在 C# 中那样做...为什么 PowerShell 允许我们这样做？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-05-02T19:40:42.680

首先，`Foreach-Object`它**不是**一个实际的循环，调用`break`它会取消整个脚本，而不是跳到它后面的语句。

相反，`break`并且`continue`将在实际`foreach`循环中按预期工作。

项目#1。将 a 放入`break`循环`foreach`中会退出循环，但不会停止管道。听起来你想要这样的东西：

```
$todo=$project.PropertyGroup 
foreach ($thing in $todo){
    if ($thing -eq 'some_condition'){
        break
    }
} 
```

项目#2。PowerShell 允许您在该数组的`foreach`循环内修改该数组，但这些更改在您退出循环之前不会生效。尝试运行下面的代码作为示例。

```
$a=1,2,3
foreach ($value in $a){
  Write-Host $value
}
Write-Host $a 
```

我无法评论为什么 PowerShell 的作者允许这样做，但大多数其他脚本语言（[Perl](http://en.wikipedia.org/wiki/Perl)、[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)和 shell）都允许类似的构造。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-01-18T01:11:01.707

`foreach`和之间有区别`foreach-object`。

你可以在这里找到一个很好的描述：[MS-ScriptingGuy](https://blogs.technet.microsoft.com/heyscriptingguy/2014/07/08/getting-to-know-foreach-and-foreach-object/)

为了在 PS 中进行测试，您可以在此处使用脚本来显示差异。

ForEach-对象：

```
# Omit 5.
1..10 | ForEach-Object {
if ($_ -eq 5) {return}
# if ($_ -ge 5) {return} # Omit from 5.
Write-Host $_
}
write-host "after1" 
```

```
# Cancels whole script at 15, "after2" not printed.
11..20 | ForEach-Object {
if ($_ -eq 15) {continue}
Write-Host $_
}
write-host "after2" 
```

```
# Cancels whole script at 25, "after3" not printed.
21..30 | ForEach-Object {
if ($_ -eq 25) {break}
Write-Host $_
}
write-host "after3" 
```

前锋

```
# Ends foreach at 5.
foreach ($number1 in (1..10)) {
if ($number1 -eq 5) {break}
Write-Host "$number1"
}
write-host "after1" 
```

```
# Omit 15\. 
foreach ($number2 in (11..20)) {
if ($number2 -eq 15) {continue}
Write-Host "$number2"
}
write-host "after2" 
```

```
# Cancels whole script at 25, "after3" not printed.
foreach ($number3 in (21..30)) {
if ($number3 -eq 25) {return}
Write-Host "$number3"
}
write-host "after3" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-24T17:15:01.973

要停止其中一部分的管道，只需使用脚本块`ForEach-Object`中的语句。当您在 in和 in 中使用它时表现不同，这就是它可能的原因。如果您想在管道中继续生成对象，丢弃一些原始对象，那么最好的方法是使用.`continue``ForEach-Object``continue``foreach(...) {...}``ForEach-Object {...}``Where-Object`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-10-18T09:31:53.990

由于`ForEach-Object`是一个[cmdlet](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/foreach-object?view=powershell-6)，`break`并且`continue`在此处的行为与使用`foreach` [关键字](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_foreach?view=powershell-6)不同。两者都会停止循环，但也会终止整个脚本：

**休息：**

```
0..3 | foreach {
    if ($_ -eq 2) { break }
    $_
}
echo "Never printed"

# OUTPUT:
# 0
# 1 
```

**继续：**

```
0..3 | foreach {
    if ($_ -eq 2) { continue }
    $_
}
echo "Never printed"

# OUTPUT:
# 0
# 1 
```

到目前为止，我还没有找到一种“好”的方法来打破 foreach 脚本块而不破坏脚本，除了“滥用”异常，尽管[powershell 核心使用这种方法](https://github.com/PowerShell/PowerShell/blob/883ca98dd74ea13b3d8c0dd62d301963a40483d6/src/Microsoft.PowerShell.Commands.Utility/commands/utility/Select-Object.cs#L725)：

**扔：**

```
class CustomStopUpstreamException : Exception {}
try {
    0..3 | foreach {
        if ($_ -eq 2) { throw [CustomStopUpstreamException]::new() }
        $_
    }
} catch [CustomStopUpstreamException] { }
echo "End"

# OUTPUT:
# 0
# 1
# End 
```

另一种选择（并非总是可能）是使用`foreach` *关键字*：

**前锋：**

```
foreach ($_ in (0..3)) {
    if ($_ -eq 2) { break }
    $_
}
echo "End"

# OUTPUT:
# 0
# 1
# End 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-01-01T15:25:59.990

如果我希望使用 ForEach-Object cmdlet，下面是问题 #1 的建议方法。它没有直接回答这个问题，因为它没有退出管道。但是，它可能会在 Q#1 中达到预期的效果。像我这样的业余爱好者可以看到的唯一缺点是在处理大型管道迭代时。

```
 $zStop = $false
    (97..122) | Where-Object {$zStop -eq $false} | ForEach-Object {
    $zNumeric = $_
    $zAlpha = [char]$zNumeric
    Write-Host -ForegroundColor Yellow ("{0,4} = {1}" -f ($zNumeric, $zAlpha))
    if ($zAlpha -eq "m") {$zStop = $true}
    }
    Write-Host -ForegroundColor Green "My PSVersion = 5.1.18362.145" 
```

我希望这是有用的。祝大家新年快乐。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-05-25T02:55:30.020

如果您**坚持**使用*ForEach-Object*，那么我建议您添加这样的“中断条件”：

```
$Break = $False;

1,2,3,4 | Where-Object { $Break -Eq $False } | ForEach-Object {

    $Break = $_ -Eq 3;

    Write-Host "Current number is $_";
} 
```

上述代码必须输出 1,2,3 然后跳过（break before） 4\. 预期输出：

```
Current number is 1
Current number is 2
Current number is 3 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-05T00:50:03.323

我在寻找一种方法来进行细粒度流控制以打破特定代码块时发现了这个问题。没有提到我确定的解决方案...

## 使用带有 break 关键字的标签

来自：[about_break](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_break?view=powershell-7)

> Break 语句可以包含一个标签，让您退出嵌入式循环。标签可以在脚本中指定任何循环关键字，例如 Foreach、For 或 While。

这是一个简单的例子

```
:myLabel for($i = 1; $i -le 2; $i++) {
        Write-Host "Iteration: $i"
        break myLabel
}

Write-Host "After for loop"

# Results:
# Iteration: 1
# After for loop 
```

然后是一个更复杂的示例，它显示了带有嵌套标签并打破每个标签的结果。

```
:outerLabel for($outer = 1; $outer -le 2; $outer++) {

    :innerLabel for($inner = 1; $inner -le 2; $inner++) {
        Write-Host "Outer: $outer / Inner: $inner"
        #break innerLabel
        #break outerLabel
    }

    Write-Host "After Inner Loop"
}

Write-Host "After Outer Loop"

# Both breaks commented out
# Outer: 1 / Inner: 1
# Outer: 1 / Inner: 2
# After Inner Loop
# Outer: 2 / Inner: 1
# Outer: 2 / Inner: 2
# After Inner Loop
# After Outer Loop

# break innerLabel Results
# Outer: 1 / Inner: 1
# After Inner Loop
# Outer: 2 / Inner: 1
# After Inner Loop
# After Outer Loop

# break outerLabel Results
# Outer: 1 / Inner: 1
# After Outer Loop 
```

您还可以通过将代码块包装在仅执行一次的循环中来使其适应其他情况。

```
:myLabel do {
    1..2 | % {

        Write-Host "Iteration: $_"
        break myLabel

    }
} while ($false)

Write-Host "After do while loop"

# Results:
# Iteration: 1
# After do while loop 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-28T21:36:18.197

有一种方法可以在`ForEach-Object`不引发异常的情况下中断。它使用了一个鲜为人知的特性`Select-Object`，使用`-First` [参数](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/select-object?view=powershell-7.1#parameters)，当指定数量的管道项目已被处理时，它实际上会中断管道。

简化示例：

```
$null = 1..5 | ForEach-Object {

    # Do something...
    Write-Host $_

    # Evaluate "break" condition -> output $true
    if( $_ -eq 2 ) { $true }  

} | Select-Object -First 1     # Actually breaks the pipeline 
```

输出：

```
1
2 
```

请注意，分配 to`$null`是为了隐藏`$true`由 break 条件产生的 的输出。该值`$true`可以替换为`42`, `"skip"`, `"foobar"`，您可以命名它。我们只需要通过管道传递一些东西，`Select-Object`这样它就会破坏管道。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-31T21:08:49.143

您有两个选项可以在 PowerShell 中突然退出`ForEach-Object`管道：

1.  首先应用退出逻辑`Where-Object`，然后将对象传递给`Foreach-Object`, 或
2.  （在可能的情况下）转换`Foreach-Object`为标准`Foreach`循环结构。

让我们看看示例：以下脚本在第二次迭代后退出 Foreach-Object 循环（即管道仅迭代 2 次）“：

**解决方案1**：使用`Where-Object`过滤器之前`Foreach-Object`：

```
[boolean]$exit = $false;
1..10 | Where-Object {$exit -eq $false} | Foreach-Object {
     if($_ -eq 2) {$exit = $true}    #OR $exit = ($_ -eq 2);
     $_;
} 
```

或者

```
1..10 | Where-Object {$_ -le 2} | Foreach-Object {
     $_;
} 
```

**解决方案2**：转换`Foreach-Object`为标准`Foreach`循环结构：

```
Foreach ($i in 1..10) { 
     if ($i -eq 3) {break;}
     $i;
} 
```

PowerShell 确实应该提供一种更直接的方式来从管道***主体***中退出或*突围。***注意**：不会退出，它只会跳过特定的迭代（类似于大多数编程语言），这里是一个例子：**`Foreach-Object`**`return``continue``return`****

 ****```
Write-Host "Following will only skip one iteration (actually iterates all 10 times)";
1..10 | Foreach-Object {
     if ($_ -eq 3) {return;}  #skips only 3rd iteration.
     $_;
} 
```

高温高压

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-11-06T21:00:54.250

问题 #1 的答案 - 您可以简单地让您的 if 语句停止为 TRUE

```
$project.PropertyGroup | Foreach {
    if(($_.GetAttribute('Condition').Trim() -eq $propertyGroupConditionName.Trim()) -and !$FinishLoop) {
        $a = $project.RemoveChild($_);
        Write-Host $_.GetAttribute('Condition')"has been removed.";
        $FinishLoop = $true
    }
}; 
```****