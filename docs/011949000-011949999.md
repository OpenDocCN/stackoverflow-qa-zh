# StackOverflow 问答 11949000-11949999

# xcode - Xcode 4 中使用核心数据和绑定的模型键路径

> ID：11949000
> 
> 赞同：0
> 
> 时间：2012-08-14T09:02:07.763
> 
> 标签：xcode, core-data, binding

我的模型中有两个对象：Person 和 Address。Person 有一个关键名称，并且与 Address 和 Address 有一个关键街道的关系。

我设计了用户界面来显示一个包含一列 (Person.name) 和两个带有名称和街道的文本字段的表。

我创建了一个 NSArrayController，其中 managedObjectContext 集和 ObjectController 设置为 Entity 和 EntityName Person。

运行应用程序，表格会显示所有添加的人员。这两个文本字段通过 Bindings 选项卡连接到 Person-ArrayController：

具有值的名称字段：绑定到：人员/控制器键：选定/模型键路径：名称

具有值的 streetField：绑定到：Person / Controller Key：selected / Model Key Path：address.street

我可以在名称中写入一些东西，并且它会被持久存储。我也可以在 streetField 中输入一些东西，但它没有被存储。

有谁知道为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:28:58.933

当数组控制器创建 person 对象时，会发生类似下面的代码：（
假设 moc 是 AppDelegate managedObjectContext，也假设 Person 是 NSManangedObject 的子类）：

```
Person *personObj = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:moc]; 
personObj.name = @"something"; //some dummy values
[personObj.address setValue:@"dummy address" forKey:@"street"]; 
```

如果`personObj.address`已记录，则 nil 将在控制台上打印。这是因为`personObj.address`是一个`Address`到目前为止还没有被实例化的对象。因此`personObj.address.street`将是`NULL`。这也是你的情况。

如果您将上面的代码更改为以下代码，它将正常工作。

```
Person *personObj = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:moc];

//create an Address object and assign it to personObj.address (setting the relationship)
personObj.address= [NSEntityDescription insertNewObjectForEntityForName:@"Address" inManagedObjectContext:moc]; 
personObj.name = @"something"; //some dummy values
[personObj.address setValue:@"dummy address" forKey:@"street"]; 
```

而这不能使用绑定来完成。

简而言之，由于不指向实例化对象，因此`streetField`绑定到`address.street`不会获得任何值。`address`

# orm - Symfony2 - 教义：在生产中创建

> ID：11949001
> 
> 赞同：8
> 
> 时间：2012-08-14T09:02:13.363
> 
> 标签：orm, symfony, doctrine-orm, production-environment

使用命令时：

```
$ php app/console doctrine:schema:create 
```

我们收到这条消息

> 注意：此操作不应在生产环境中执行。

为什么我们不应该在生产中使用它？
我们应该如何进行第一次部署？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:31:23.297

啊哈哈有不同的学校。

*   启动方式：doctrine:schema:create first time in production，doctrine:schema:update --force every update

*   谨慎方式：第一次转储sql，然后更新sql脚本

*   专家方式：[http ://symfony.com/doc/master/bundles/DoctrineMigrationsBundle/index.html](http://symfony.com/doc/master/bundles/DoctrineMigrationsBundle/index.html)

我个人使用第一种方法，效果很好。在使用 --force 更新之前，您总是可以执行 --dump-sql 来查看发生了什么

# asp.net - asp.net mvc 非数据库操作

> ID：11949003
> 
> 赞同：0
> 
> 时间：2012-08-14T09:02:18.310
> 
> 标签：asp.net, asp.net-mvc-3

我刚刚开始研究 MVC。这些教程看起来很棒而且很有意义，但是我看到的所有教程都是基于数据库模型的。我假设我可以在会话中保存对象结构并在需要时返回它？

还假设我的控制器模型是学生，我可以在一个动作中返回学生，而在另一个动作中，在同一控制器中返回 studentWithCourses 但使用相同的视图？

我确定我需要先阅读一些书，但我正在寻找可以帮助我入门的一般理论

谢谢H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:08:54.447

是的，您可以[将不同的模型传递给同一个视图](https://stackoverflow.com/questions/4764011/multiple-models-in-a-view)。

不需要数据库，只需编写您需要的代码。

如果你要读一本书，我推荐 Steve Sanderson 的“Pro ASP.NET MVC 框架书籍”就不够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:05:17.083

在回答你的问题。

您不必使用数据库，因此您可以将它们存储在您想要的位置。不确定会话是最好的地方，但它可能。

您可以对多个操作使用相同的视图，是的，您只需要隐藏与每个模型无关的位。

# python - 更改连接字符集时如何确定是否应该编码？

> ID：11949005
> 
> 赞同：0
> 
> 时间：2012-08-14T09:02:19.583
> 
> 标签：python, mysql, encoding, sqlalchemy

我有一个 MySQL 设置`UTF-8`，除了来自 SqlAlchemy 的连接之外，所有表/字段和字符集设置都是。

我最近将连接字符集更改为在任何地方`UTF-8`使用`UTF-8`。

更改此设置时，数据库中的旧值会呈现错误，例如：

```
Björn => BjÃ¶rn 
```

这没问题，我只是收集值并对其进行编码，使用python中的encode方法，然后将它们重新放入。

当我尝试转换设置更改后插入的值时会出现问题，这些值已经正确。

有没有一种好方法来确定我是否应该对值进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:59:27.873

您的旧编码大概是拉丁语 1？

您可能*可以*通过查看连续字节来检测字符串何时使用 Latin-1 而不是 UTF-8 编码。UTF-8 标准有一个[独特的代码页布局](https://en.wikipedia.org/wiki/UTF-8#Codepage_layout)，我们可以用它来检测一段文本是用 Latin-1 还是 UTF-8 编码的：

*   00-7F 范围内的任何字节都是安全的，当然，这些是 ASCII 值，并且这些代码点在两种编码之间匹配。这里没有帮助，不需要帮助。

*   字节 C0、C1 和 F5-FF在 UTF-8 编码中是*非法的。*任何包含这些的字符串都必须是 Latin-1 编码的。

*   C2-DF 范围内的字节*必须*后跟 80-BF 范围内的字节。如果您有任何两个与此不匹配的字节，您可能手上有一个 Latin-1 编码的字符串。

如果您曾经编码的只是 Latin-1 字符（直到 Unicode 代码点 255），您可以在这里停下来；包含 E0-FF 范围内的字节的任何内容都是旧的 Latin-1 数据。

如果您在切换后*确实*以 UTF-8 添加了数据，这超出了 Latin-1 范围，您还需要包含以下规则：

*   E0-EF 范围内的字节标记一个 3 字节的 UTF-8 字符。接下来的两个字节*必须*再次落在 80-BF 范围内。

3 UTF-8 字节数据涵盖了[BMP](https://en.wikipedia.org/wiki/Mapping_of_Unicode_character_planes)的其余部分，您不太可能在此之外进行编码。如果您在此之外进行编码，请查找：

*   F0-F4 范围内的字节必须紧跟 80-BF 范围内的 3 个字节。

如果*所有*这些条件都匹配，您*可能*有一个 UTF-8 字符串，但您不能 100% 确定。如果其中任何一个*不*匹配，您肯定有一个 Latin-1 字符串。但是，Latin-1 代码点 C2-DF 不太可能跟随代码点 80-BF，因为后者的大部分要么是控制代码，要么是更深奥的变音符号。也许您可以通过寻找多个 2 字节 UTF-8 序列来进一步缩小范围，以提高您的置信度分数。

所以，总而言之 (tl;dr)：您可以通过查看多字节序列来找到*大多数Latin-1 编码的字符串。*如果它们不属于严格的 UTF-8 标准，那么您手头上有一个 Latin-1 字符串。

# compilation - Go - 无法编译 hello world (Windows)

> ID：11949007
> 
> 赞同：2
> 
> 时间：2012-08-14T09:02:27.397
> 
> 标签：compilation, go

只是尝试 Go，但我无法让它编译我的第一个程序。这在编译器上引起了一堆问题。

它包含在这个单个文件中：

```
"D:\programming\Go\src\mytest\mytest.go" 
```

程序文本是：

```
// mytest project mytest.go
package mytest

import "fmt"

func main() {
    fmt.Println("Hello, Go!")
} 
```

在包文件夹中，我尝试了以下命令：

```
>go build 
```

什么也没说。根据`go help build`这是预期的结果。

```
>go build -v
_/D_/programming/Go/src/mytest 
```

是什么`_/D_/`东西？？？看起来像一个新发明！

还有最奇怪的：

```
>go build -v mytest
can't load package: package mytest: import "mytest": cannot find package 
```

那么我做错了什么以及如何编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:28:42.223

程序中的`main`函数必须在 package 中`main`。然后包`main`可以导入其他包并调用它们。

# android - 如何在GridView的最后一项之后添加页脚ProgressBar

> ID：11949012
> 
> 赞同：5
> 
> 时间：2012-08-14T09:02:33.923
> 
> 标签：android, android-layout, gridview

这是我的代码。它在数据不足时加载更多数据。我想在加载更多数据时**向 GridView 添加页脚 ProgressBar 。**怎么做？我在 StackOverflow 上看到了很多问题，但没有答案。

```
public class MainActivity extends Activity {
    private static final String TAG = "MainActivity";
    private final List<Integer> commonImageList = new ArrayList<Integer>();
    private int index = 0;
    private boolean isLoading = false;
    private static final int NUM = 18;
    private ImageAdapter adapter;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Task task = new Task(mThumbIds, index);
        task.setOnPostExecuteListener(new OnPostExecuteListener<List<Integer>>() {
            @Override
            public void onPostExecute(final List<Integer> result) {
                System.out.println("RESULT: " + result);
                if(result.isEmpty()) {
                    return;
                }

                // Store it.
                commonImageList.addAll(result);

                // Prepare gridView.
                final GridView gridview = (GridView) findViewById(R.id.gridview);
                adapter = new ImageAdapter(MainActivity.this, commonImageList);
                gridview.setAdapter(adapter);

                gridview.setOnScrollListener(new OnScrollListener() {
                    @Override
                    public void onScrollStateChanged(final AbsListView view, final int scrollState) {

                    }

                    @Override
                    public void onScroll(final AbsListView view, final int firstVisibleItem,
                            final int visibleItemCount, final int totalItemCount) {
                        System.out.println("firstVisibleItem: " + firstVisibleItem);
                        System.out.println("visibleItemCount: " + visibleItemCount);
                        System.out.println("totalItemCount: " + totalItemCount);

                        final boolean loadMore = (firstVisibleItem + visibleItemCount >= totalItemCount);
                        System.out.println("loadMore: " + loadMore);
                        System.out.println("isLoading: " + isLoading);

                        if(loadMore && !isLoading) {
                            // TODO Show footer here.

                            ShowLog.showLogInfo(TAG, "============= LOAD MORE =============");
                            // Get more images.
                            index = index + NUM;
                            final Task task = new Task(mThumbIds, index);
                            task.setOnPreExecuteListener(new OnPreExecuteListener() {
                                @Override
                                public void onPreExecute() {
                                    isLoading = true;
                                }
                            });
                            task.setOnPostExecuteListener(new OnPostExecuteListener<List<Integer>>() {
                                @Override
                                public void onPostExecute(final List<Integer> result) {
                                    System.out.println("RESULT222: " + result);

                                    if(result.isEmpty()) {
                                        return;
                                    }
                                    System.out.println("HIEU THONG MINH");

                                    // Update common list.
                                    commonImageList.addAll(result);

                                    // Update adapter.
                                    adapter.notifyDataSetChanged();

                                    isLoading = false;
                                }
                            });
                            task.execute();
                        }
                    }
                });
            }
        });
        task.execute();

    }

    private class Task extends AbstractWorkerTask<Void, Void, List<Integer>> {
        private final Integer []thumbs;
        private final int index;

        public Task(final Integer []thumbs, final int index) {
            this.thumbs = thumbs;
            this.index = index;
        }

        @Override
        protected List<Integer> doInBackground(final Void... params) {
            final List<Integer> list = new ArrayList<Integer>();
            for(int i = index; i < index + NUM && i < thumbs.length; ++i) {
                list.add(thumbs[i]);
            }
            return list;
        }
    }

    public static class ImageAdapter extends BaseAdapter {
        private final Context context;              
        private final List<Integer> imageList;

        public ImageAdapter(final Context c, final List<Integer> imageList) {
            context = c;
            this.imageList = imageList;
        }

        @Override
        public int getCount() {
            return imageList.size();
        }

        @Override
        public Object getItem(final int position) {
            return null;
        }

        @Override
        public long getItemId(final int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        @Override
        public View getView(final int position, final View convertView, final ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView = new ImageView(context);
                imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);

            } else {
                imageView = (ImageView) convertView;
            }

            imageView.setImageResource(imageList.get(position));
            return imageView;
        }
    }

    // references to our images
    private static final Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
    };
} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="150dp"
    android:numColumns="3"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:31:53.257

这是我在`GridView`
**1 中添加加载更多项目的逻辑。在适配器的最后一个输入数据创建一个假项目**

```
public class MediaGridAdapter extends BaseAdapter {

    private ArrayList<Media> list;
    private final Media special = new Media("-1", "", "", "", ""); 

    public MediaGridAdapter(Context context, int imageID, ArrayList<Media> array, int type) {

        list = array;

        if(list != null) {
            list.add(special);
        }
            }

public void appendDataList(ArrayList<Media> appendedList, boolean isEnd) { //called in postExecute to append new data

    //remove special element in original list
    list.remove(list.size() - 1);
    //append collection of media to list
    list.addAll(appendedList);
    //check to add special element
    if(!isEnd) {

        list.add(special);
    }
}   
} 
```

**2\. 在`getView`方法中：检查它是否是最后一个位置（是我们的假项目）为此返回特殊布局（进度条...）。**

```
 if(position == (list.size() - 1)) {

        Context context = parent.getContext();
        item = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.item_special_more, null);
        item.setTag(MORE_BUTTON);
        return item;
    } 
```

最后一个`onItemClick`检查标签开始`getMoreAsyncTask`

```
if (v.getTag().equals(MediaGridAdapter.MORE_BUTTON)) {    

                        GetMoreItems task = new GetMoreItems();
                        task.execute(url);
                        return;
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T08:37:08.393

通过在使项目可见/消失时利用动态布局更改，我找到了一种不那么侵入性的方法。为此，我使用了相对布局，但也可以使用其他布局。这是xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical" android:layout_width="match_parent"
   android:layout_height="match_parent">

   <ProgressBar
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/loader_view"
    android:visibility="visible"
    android:layout_alignParentBottom="true"
    android:layout_alignParentStart="true"
    android:layout_centerHorizontal="true"
    android:padding="32dp" />

<GridView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/grid_view"
    android:layout_toStartOf="@id/loader_view"
    android:layout_alignParentRight="true"
    android:layout_alignParentEnd="false"
    android:layout_above="@+id/loader_view"
    android:numColumns="@integer/grid_view_column_count"
    android:scrollbarStyle="insideOverlay"
    android:scrollbars="none"
    android:listSelector="@null"
    android:smoothScrollbar="false"></GridView>

</RelativeLayout> 
```

对此的一些说明：

进度条显示在gridview下方，但是你必须在xml之前定义它，因为`android:layout_toStartOf="@id/loader_view"`GridView中的：引用。

您可以增加进度条上的填充以使加载区域更大，例如与网格的行高相匹配。

网格视图`android:numColumns="@integer/grid_view_column_count"`是来自资源的动态值，您可以随意更改它。您可以在那里只使用一个数字，但外部化更好，因为您可以根据屏幕宽度设置值。

以下代码转到您的 Fragment 的 onCreateView：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.grid_and_loader_view, container, false);
    GridView gridView = (GridView) view.findViewById(R.id.grid_view);
    //store a class reference to the loader:
    _loader = (ProgressBar) view.findViewById(R.id.loader_view);
    //set up your grid adapter e.g.:
    //_adapter = new GridImageAdapter(this.getActivity());
    //gridView.setAdapter(_adapter);
    return view;
} 
```

您可以通过以下方式开始/停止从片段加载：

```
public void startLoading() {
    if(_loader != null) {
        _loader.setVisibility(View.VISIBLE);
    }
}

public void stopLoading() {
    if(_loader != null) {
        _loader.setVisibility(View.GONE);
    }
} 
```

我发现，更好的解决方案是控制适配器的加载行为，因此我将片段作为引用以可加载接口（可选）的形式传递给适配器，并从那里。

# objective-c - iOS：对拆分视图控制器执行 segue 不起作用

> ID：11949014
> 
> 赞同：0
> 
> 时间：2012-08-14T09:02:53.737
> 
> 标签：objective-c, ios

嗨，我有一个主详细信息应用程序，并尝试从详细视图执行 segue 到新的拆分视图控制器。我已经尝试了很多次，但仍然没有用。

执行以下代码的操作来自详细信息页面上的导航栏按钮。

```
[self performSegueWithIdentifier:@"DetailsToSettings" sender:self]; 
```

我认为这应该很简单，但由于某些原因它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:53:18.020

天哪……http://stackoverflow.com/questions/9044586/storyboard-uiviewcontroller-and-uisplitviewcontroller

拆分视图控制器也不能用作情节提要中的根视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:30:33.653

我已经能够通过将拆分视图控制器嵌入到导航控制器中，然后在情节提要中以模态方式将其连接到拆分视图控制器。不知道苹果是怎么想的……

# java - 如何启用 portlet WSRP？

> ID：11949017
> 
> 赞同：0
> 
> 时间：2012-08-14T09:03:03.847
> 
> 标签：java, portlet, wsrp

我有一个liferay java portlet，我想让它启用WSRP。除了 liferay-portlet.xml 中的标签 true 之外，我还必须包含任何特定的配置文件吗

任何指针都会有所帮助。

谢谢，洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:58:22.237

将标签添加到 liferay-portlet.xml 只是解决方案的一部分。为了使一切正常工作，以便您自己的 portlet 可以通过 WSRP 远程使用，您需要遵循以下说明：[WSRP 指南](http://www.liferay.com/community/wiki/-/wiki/Main/WSRP)。

这基本上归结为：

*   安装 WSRP 插件
*   添加生产者
*   为要配置为生产者的自定义 portlet 启用 WSRP

# google-drive-api - 如何跟踪文件的更改？

> ID：11949020
> 
> 赞同：2
> 
> 时间：2012-08-14T09:03:14.133
> 
> 标签：google-drive-api

有没有办法跟踪 Google 文档/电子表格上的更改？

使用时

```
file.getModifiedDate() 
```

该值不能正确反映文档的最新更改。当用户编辑文档的内容时，有时需要几分钟才能获得新的修改日期。

有没有办法跟踪文档上的*所有*更改，无论谁进行了更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:12:24.367

您应该使用更改提要来检测对文件的更改：[https](https://developers.google.com/drive/manage-changes) ://developers.google.com/drive/manage-changes 。

它不允许对特定文件进行过滤，但提要中的每个条目都有一个`fileId`属性来将更改与文件相关联。

# java - 这与只返回新的 System.currentTimeMillis() 有什么不同吗？

> ID：11949025
> 
> 赞同：1
> 
> 时间：2012-08-14T09:03:39.227
> 
> 标签：java, date

我只是偶然发现了这种方法

```
public static Date getNowDate() {
    final Calendar cal = new GregorianCalendar();
    cal.setTime(new Date());
    return cal.getTime();
} 
```

它被这样调用：

```
getNowDate().getTime() 
```

这和打电话有什么不同吗

```
System.currentTimeMillis() 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:04:47.817

在 long (millis) 的结果返回值方面没有区别

如果您希望当前日期，更简单的方法是，您在日历中设置日期并将其检索回来`getNowDate()`，可以简化如下

```
public static Date getNowDate() {
  return new Date();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:36:33.550

除了性能之外，它们都差不多。

System.currentTimeMillis() 是一个系统调用，因此它需要大约 0.1 到 0.3 微秒（取决于您的操作系统）

new Date() 还创建了一个对象，它只需要大约 0.1 到 0.3 微秒，但会产生一些垃圾*。*

*Calendar.getInstance() 创建一组昂贵的对象，并且需要*大约**33**微秒。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:30:34.003

我**认为这两者之间没有**任何区别，**以 result 的形式**，因为它们都将返回从 1970 年 1 月 1 日至今的长值。

即使只是简单地调用`Date d = new Date();`也会**给你现在的日期**，调用`d.getTime();`会**返回它的长表示***

# c# - 如何使用 DataReader 使用 Task Parallel 库

> ID：11949028
> 
> 赞同：6
> 
> 时间：2012-08-14T09:03:43.343
> 
> 标签：c#, task-parallel-library

我经常用数据填充数据阅读器并像这样填充 UI

```
using (SqlConnection conn = new SqlConnection("myConnString"))
using (SqlCommand comm = new SqlCommand("Select * from employee where salary<5000", conn))
{
    conn.Open();

    SqlDataReader reader = comm.ExecuteReader();

    if (reader.HasRows)
    {
        while (reader.Read())
        {
            // here i populate my employee class
        }
    }
    // here i update UI
} 
```

我正在使用 DataReader 搜索 Task Parallel 库的使用，并找到了一段代码。它看起来不错，但目标对我来说不是很清楚。所以这是我得到的代码。

```
public IEnumerable<MyDataClass> ReadData()
{
using (SqlConnection conn = new SqlConnection("myConnString"))
using (SqlCommand comm = new SqlCommand("myQuery", conn))
{
    conn.Open();

    SqlDataReader reader = comm.ExecuteReader();

    if (reader.HasRows)
    {
        while (reader.Read())
        {
            yield return new MyDataClass(... data from reader ...);
        }
    }
}
} 
```

**打电话**

```
Parallel.ForEach(this.ReadData(), data =>
{
// Use the data here...
}); 
```

或者

```
this.ReadData().AsParallel().ForAll(data => 
{
// Use the data here...
}); 
```

我如何从**ForAll**获取数据。

谁能帮我理解它的工作原理以及如何从**ForAll获取数据以及如何从****ForAll**填充我的 UI的代码片段。

另一个问题是我怎么知道哪个类是线程安全的。这是什么意思线程安全。有人说数据读取器不是线程安全的。他怎么知道。

何时应该使用任务并行库的另一个问题。请指导。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T09:52:10.873

您可以在 MSDN 文档的 .NET 基类库中找到有关每种类型的线程安全的信息。大多数类型**不是**线程安全的。`SqlDataReader`例如，它**不是**线程安全的，因为它适用于与数据库的单个连接。

但是，`Parallel.ForEach`是一个非常清晰的构造。你不能真正地`IEnumerable`同时迭代一个多线程，并且`Parallel.ForEach`不这样做。`IEnumerable`尽管它启动了多个线程，并且`Parallel.ForEach`这些**多个**线程确实在给定的`IEnumerator`. 它假设处理元素比从可枚举中获取项目花费更多时间。迭代可枚举是一个顺序操作。

这意味着即使底层数据源和使用`SqlReader`不是线程安全的，您仍然可以使用`Parallel.ForEach`. 不幸的是，MSDN 文档对此并不是很明确，但必须如此，因为`IEnumerator`从`GetEnumerator()`方法返回的实例永远不是线程安全的。

当然，您仍然必须确保给定`Action<T>`的是线程安全的。

您可以使用以下程序查看此行为：

```
public static IEnumerable<int> GetNumbers()
{
    for (int i = 0; i < 140; i++)
    {
        Console.WriteLine(
            "                          Enumerating " + 
            i + " at thread " +
            Thread.CurrentThread.ManagedThreadId);

        yield return i;
    }
}

static void Main(string[] args)
{
    Console.ReadLine();

    Parallel.ForEach(GetNumbers(), number =>
    {
        Console.WriteLine("Processing " + number + 
            " at thread " +
            Thread.CurrentThread.ManagedThreadId);

        Thread.Sleep(1);
    });
} 
```

# cloud-foundry - “NATS”代表什么？

> ID：11949029
> 
> 赞同：2
> 
> 时间：2012-08-14T09:03:54.333
> 
> 标签：cloud-foundry

我开始使用 Cloud Foundry 并注意到一些事情：首字母缩略词“ **NATS** ”代表什么？我通过 Google、Cloud Foundry 和他们的文档进行了搜索，但没有找到任何可以清除它的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T22:14:45.760

* *N* *ot * *A* *其他* *T* *ibco * *S* *erver！

开发人员还曾经在 Tibco 工作:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-22T18:11:43.950

半官方地，NATS**代表****N** eural **A** utonomic **Transport** System 。Derek Collison（Cloud Foundry 的设计师/架构师、NATS 的创建者和 Apcera 的创始人/首席执行官）将 NATS 设想为一个功能类似于中枢神经系统的消息传递平台。

 ****非正式地，许多人喜欢说它代表 Ali Moghadam 所说的 :)

[免责声明/来源：我是 Apcera 的 NATS 产品经理]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:16:18.943

我不确定这是一个特别重要的名字。您可以随时在 VCAP google group 中提问；

[https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

甚至问作者本人；

[https://github.com/derekcollison/nats](https://github.com/derekcollison/nats)****

# jquery - 数据表分页最初不起作用

> ID：11949031
> 
> 赞同：2
> 
> 时间：2012-08-14T09:04:07.647
> 
> 标签：jquery, datatables, jquery-pagination

我有一个搜索表单，它从数据库中提取各种行，然后显示在表格中。用于拉行的代码工作正常。我正在使用数据表以用户友好的方式显示。数据表代码正在工作，因为一旦表格被填充，我可以看到搜索控件等和下一个上一个按钮，但是表格似乎没有在初始加载时完成分页。

没有“显示 ** 到 ** 的 ** 个条目”文本，并且显示返回的所有行但是一旦我单击下一个按钮或使用显示只有 10/25/50/100 下拉分页开始，分页从因此。我正在拔头发，因为昨天这对我有用，我想不出我已经改变了什么来停止它的工作：

我在下面初始化数据表

```
$(document).ready(function() {
    $('#blog-search').dataTable( {
        "aaSorting": [[ 4, "DESC" ]],
        "aoColumnDefs": [
          { "sType": "numeric-comma", "aTargets": [ 2 ] }

        ],
        "bPaginate": true,

    } );
} ); 
```

列的排序也

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:48:42.643

当我将您的代码添加到[jsfiddle](http://jsfiddle.net/7ugSW/)中时，我在控制台中收到以下错误消息：

`Uncaught TypeError: Property 'string-DESC' of object #<Object> is not a function`

`"aaSorting": [[ 4, "DESC" ]],`在进一步调查中，您的代码中的行似乎是问题所在。排序字符串必须全部小写，即 IE `"desc"`NOT `"DESC"`。

工作代码应如下所示：

```
$(document).ready(function() {
    $('#blog-search').dataTable( {
        "aaSorting": [[ 4, "desc" ]],
        "aoColumnDefs": [
          { "sType": "numeric-comma", "aTargets": [ 2 ] }

        ],
        "bPaginate": true,

    } );
} ); 
```

# android - 使用不同的字符串更新具有相同类型（例如 TYPE_HOME）的电子邮件

> ID：11949034
> 
> 赞同：0
> 
> 时间：2012-08-14T09:04:23.207
> 
> 标签：android, android-contacts, contactscontract, android-contentresolver

任何人都知道我如何用相同的 TYPE 更新 android 电话簿中的两封电子邮件

（例如：）`TYPE_HOME`，但用不同的字符串更新每封邮件。

以我的方式更新电子邮件，但具有相同类型的电子邮件同时使用相同的字符串更新，我不希望这样。

我想要的是

```
Email_1->TYPE_HOME->String_Hello

Email_2->TYPE_HOME->String_Hello_again 
```

不同的字符串但类型相同。

这是我的代码

```
 EditText etEmail = (EditText)contentEmail.findViewWithTag("ete1");
         String stEtEmail = etEmail.getText().toString();   
         values.clear();
         Log.w(SocioEdit.class.getName(), "TESTE DO TYPE" +String.valueOf(ContactsContract.CommonDataKinds.Email.TYPE).charAt(3));
         String mailWhere = ContactsContract.Data.CONTACT_ID + "=? AND " + ContactsContract.Data.MIMETYPE + "=? AND " + String.valueOf(ContactsContract.CommonDataKinds.Email.TYPE) + "= ?"; 
         String[] mailWhereParams = new String[]{String.valueOf(idContacto),ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE,String.valueOf(ContactsContract.CommonDataKinds.Email.TYPE_HOME)}; 
         values.put(ContactsContract.CommonDataKinds.Email.DATA,stEtEmail);
         Log.w(SocioEdit.class.getName(),"TESTE DA STRING DO EMAIL-->" +stEtEmail); 
         cr.update(ContactsContract.Data.CONTENT_URI,values, mailWhere, mailWhereParams);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:49:53.850

我们知道 Email 有一个存储在 Data 表中，所以它有它的 id，我们可以得到数据 ID 以及电子邮件类型和电子邮件信息

所以如果我们在数据表中获得电子邮件 ID

我们可以这样做：

```
cr.update(ContactsContract.Data.CONTENT_URI,values, Data.id+"=?", new String[]{String.valueOf(ID)}); 
```

# c# - WebAPI 控制器中的 URL 比基本 CRUD 更复杂

> ID：11949035
> 
> 赞同：1
> 
> 时间：2012-08-14T09:04:24.607
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

我见过的所有 WebAPI 示例都展示了如何使用控制器进行基本的 CRUD 设置。例如，下面的控制器`campaigns`在我的应用程序中显示了一个控制器：

```
public IEnumerable<CampaignModel> Get()
{
    return _campaignService.GetAll();
}

public CampaignModel Get(int id)
{
    return _campaignService.GetByID(id);
}

public void Post(CampaignModel campaign)
{
    _campaignService.Create(campaign);
}

public void Put(CampaignModel campaign)
{
    _campaignService.Update(campaign);
}

public void Delete(int id)
{
    _campaignService.Delete(id);
} 
```

这一切都很好，我最终得到了以下格式的一些不错的端点：

*   获取活动/
*   获取广告系列/{id}
*   发布活动/{活动}
*   PUT 广告系列/{campaign}
*   删除广告系列/{id}

但是，我现在想进一步扩展 api 并添加以下端点：

*   发布活动/发送
*   发布活动/时间表/{日期}

是否可以将这些作为与上述 CRUD 操作相同的控制器的一部分？还是我必须添加其他控制器，然后为这些端点中的每一个设置路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:45:30.063

[在此处](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)查看“按操作名称路由”

```
routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
);

public class CampaignsController : ApiController
{
    [HttpPost]
    public void send();

    [HttpPost]
    public void schedule(DateDto date);
} 
```

将映射到“api/campaigns/send”和“api/campaigns/schedule”</p>

# objective-c - 在 Objective-C 中更改预处理器值

> ID：11949052
> 
> 赞同：2
> 
> 时间：2012-08-14T09:04:55.357
> 
> 标签：objective-c, c-preprocessor

有什么方法可以更改预处理器值，例如：

```
#define XValue 50 
```

在Objective-C中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:06:56.963

如果您的意思是在运行时更改它，那么不，因为`XValue`它被替换为`50`编译前。

如果您的意思是在编译中更改它，那么是的，使用`#undef`and `#define`。

例子：

```
XValue = 30; // NOT ALLOWED

#undef XValue // ALLOWED
#define XValue 30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:08:08.437

```
#undef XValue
#define XValue 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:21:22.103

关于什么：

```
int global_mutable_value = 50; 
#define XValue global_mutable_value 
```

要不就

```
int XValue = 50; 
```

你没有说你为什么想`XValue`成为一个宏，所以我们无法判断你的意图是否会被运行时可能改变的东西所满足。如果他们愿意，请使用可以在运行时更改的东西而不是宏（我使用了外部变量）。如果他们不这样做，那么你当然不走运。

# java - SVN 产品开发——这个过程有多好？

> ID：11949053
> 
> 赞同：2
> 
> 时间：2012-08-14T09:04:57.637
> 
> 标签：java, svn, architecture

![在此处输入图像描述](../Images/a49b86dbaca6143af9a5596e3ce01512.png)

我在图片中添加了一个图例以使其不言自明。

最初，我的项目的主干代码是 1.0 版。

我将使用此版本的代码创建 4 个分支：Vendor-A、Vendor-B、1.1 和 1.2。红线代表这些并行开发分支。供应商特定的开发和发布在供应商分支上进行，供应商分支中的代码永远不会与主干合并。当向供应商发布版本时，这些版本会被标记。

现在，我的问题是：

1.  这种产品开发方法的准确性如何？
2.  比如说，将 1.1 代码合并到主干后，主干位于 1.1 和 1.1 分支结束（过期），之后我在 1.1 代码中发现了一个错误。现在，我会立即创建一个错误修复分支并将修复提交到主干。那么，是否应该将此错误修复推送到 1.2 分支和供应商分支？还是不应该推送它，因为这些分支正在处理不同版本的 Trunk (1.0)？
3.  如何在供应商分支下解决开发问题？比如说，我需要修复 Vendor 分支中的错误，我应该直接将更改提交到 Vendor 分支吗？

我也会感谢您在重组/重新设计流程方面的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:17:10.953

对我来说似乎没问题。但是，我会简化一点-如果我认为供应商分支从主干定期刷新是正确的，那么您不需要从错误修复分支进行显式合并-只需将错误修复（例如 1.1 错误修复）合并回主干，然后从主干合并到所有供应商分支。

从主干合并到供应商的技巧是准确跟踪已经合并的内容。理想情况下，您将合并所有内容，并按时间顺序分块进行。（我发现使用票证/功能编号标记提交很有用，因此我可以从`svn log`特定时间需要合并的内容中看到。这确保了我不会将半个功能发送到另一个分支。

当我提交合并时，我将添加合并字符串（例如“(merge -r1234:2345 -r2667:3123 ../../trunk)”以及合并的描述。这在查看时非常有用日志（比如在供应商分支上）以发现最早的未合并主干修订。

然而，我也倾向于在不同的分支上维护 1.0 和 1.1。因此，如果 1.1 分支合并后 1.0 主干变为 1.1，那么在此之前从主干获取分支 1.0 副本可能是合适的。最初，将对主干（1.1）进行错误修复，然后直接合并到从 1.1 分支派生的任何供应商。但是，它可能不适用于从 1.0 派生的供应商（或可能不相关）。在这种情况下，首先将它们应用到 1.0 分支，然后从那里合并到早期版本的所有供应商。

当然，您可能会发现仅与 1.0 相关的错误，并且在 1.1 中不相关或不存在 - 所以这个单独的分支也将在那里提供帮助。

考虑到这种方法，因此最好尽可能将每个供应商从非常旧的版本升级，从而最大限度地减少需要维护的并发版本的数量。无论您是理所当然地这样做，还是作为新许可/合同的一部分，都取决于您的业务。

# c# - 如何更新经常更改的类？每次都恢复还是只更新字段？

> ID：11949054
> 
> 赞同：0
> 
> 时间：2012-08-14T09:05:00.097
> 
> 标签：c#

我需要`InstrumentInfo`经常更新课程。我从一个线程更新这个类并从另一个线程访问（读取）。

我有`Instrument`课。`Instrument`对于我需要维护的每个课程`InstrumentInfo`：

```
// omit class Instrument as not improtant

public class InstrumentInfo
{
    public string Name { get; set; }
    public TradingStatus Status { get; set; }
    public decimal MinStep;
    public double ValToday;
    public decimal BestBuy;
    public decimal BestSell;
}

public class DerivativeInfo : InstrumentInfo
{
    public DateTime LastTradeDate { get; set; }
    public DateTime ExpirationDate { get; set; }
    public string UnderlyingTicker { get; set; }
}

// i do have several more subclasses 
```

我确实有两个选择：

1.  `InstrumentInfo`每个只创建一个`Instrument`。当某些字段更新时，例如`BestBuy`只更新该字段的值。客户端应该`InstrumentInfo`只获取一次并在整个应用程序生命周期内使用它。
2.  在每次更新时创建`InstrumentInfo`. 客户每次都应获取 InstrumentInfo 的最新副本。

`1`我确实需要锁定，因为不能`decimal` `DateTime` `string`保证更新是原子的。但我不需要恢复对象。

`2`我根本不需要锁定，因为更新`reference`是原子的。但我可能会使用更多内存，并且我可能会为 GC 创建更多工作，因为每次我需要实例化新对象（并初始化所有字段）。

`1`执行

```
 private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM];

    // invoked from different threads
    public InstrumentInfo GetInstrumentInfo(Instrument instrument)
    {
        lock (instrumentInfos) {
            var result = instrumentInfos[instrument.Id];
            if (result == null) {
                result = new InstrumentInfo();
                instrumentInfos[instrument.Id] = result;
            }
            return result;
        }
    }

    ...........
    InstrumentInfo ii = GetInstrumentInfo(instrument);
    lock (ii) {
        ii.BestSell = BestSell;
    } 
```

`2`执行：

```
 private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM];

    // get and set are invoked from different threads
    // but i don't need to lock at all!!! as reference update is atomic
    public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
    {
        if (instrument == null || info == null)
        {
            return;
        }
        instrumentInfos[instrument.Id] = info;
    }

    // get and set are invoked from different threads
    public InstrumentInfo GetInstrumentInfo(Instrument instrument)
    {
        return instrumentInfos[instrument.Id];
    }
    ....
    InstrumentInfo ii = new InstrumentInfo {
        Name = ..
        TradingStatus = ...
        ...
        BestSell = 
    }

    SetInstrumentInfo(instrument, ii); // replace InstrumentInfo 
```

所以你怎么看？我想使用方法`2`，因为我喜欢没有锁的代码！`lock`我是否正确，因为我只是替换参考，所以我根本不需要？你同意这`2`是首选吗？欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:09:59.490

> `2`我根本不需要锁定，因为参考更新是原子的。但我可能会使用更多内存，我可能会为 GC 创建更多工作，因为

不，您的选择`1`很可能会导致 GC 上的更多负载（通过将更多对象提升到下一代）。

1.  使用最明智、可维护的形式。在这种情况下，创建新对象。

2.  不要根据您的“认为”可能会更慢进行优化。使用分析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:17:03.230

您应该考虑几个不相关的点。

1.  当你可以不用锁时，你当然应该不用它们。当你选择多线程时，更喜欢不可变对象。

2.  另一方面，不可变对象

    *   应变记忆
    *   被认为是“反OOP”
    *   客户端代码可能会错误地使用它们（因为人们不习惯使用它们）
3.  您的第二种方法仍然需要一些并发处理策略，因为几个线程可能`set`具有不同的起始假设。

4.  ~~我不确定引用分配是原子的。如果是，为什么 CLR 有`Interlocked.Exchange<T>`？~~感谢 Henk Holterman 指出这一点。

# android - Android 通过选择列表视图上的项目并将有意发送的数据放置在另一个列表视图上来启动活动

> ID：11949056
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:05:07.013
> 
> 标签：android

嗨，我有一个问题，我想在我的 android 应用程序上使用一个列表，一旦在列表上单击一个项目，就会捕获 id 并运行查询，然后将接收到的数据放置在一个意图中，并启动一个新的活动和数据放在另一个列表中，如果可能的话，如何通过示例来实现这一点的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:37:07.370

```
yourlist.OnItemClickListener(listenerOflistView);

private OnItemClickListener listenerOflistView = new OnItemClickListener() {
    private String getSelectedItemOfList;

    public void onItemClick(AdapterView<?> view, View view1, int pos, long arg3) {
        Intent in = new Intent(Context, nextActivity.class);
        String getSelectedItemOfList = mylist.get(pos).toString();
        in.putExtras("AnythingName", getSelectedItemOfList);
        startActivity(in);
    }
} 
```

在另一个活动中：

```
Intent in = getIntent();
in.getStringextras("AnythingName"); 
```

然后，您将获得另一个活动的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:14:06.167

我认为您可以通过使用来实现`OnItemClickListener()`for `ListView`。这样，当您单击列表项时，您将获得`Listview`.

```
yourlist.OnItemClickListener(listenerOflistView);

private OnItemClickListener listenerOflistView = new OnItemClickListener() {
    private String getSelectedItemOfList;

    public void onItemClick(AdapterView<?> view, View view1, int pos, long arg3) {
        getSelectedItemOfList = mylist.get(pos).toString(); 
        // here you will get selected item. And you can perform rest of your task here.
    }
} 
```

# cordova - Ext.device.connection 不使用phonegap构建触发onlInechange事件

> ID：11949059
> 
> 赞同：1
> 
> 时间：2012-08-14T09:05:09.877
> 
> 标签：cordova, extjs, sencha-touch-2

我已在启动功能中添加了此代码。此代码用于全局处理互联网连接问题

```
 Ext.device.Connection.on({
       // scope: this,
        onlinechange: this.onlineChange
    });

  onlineChange: function (online, type) {
        alert(online + type);
    }, 
```

当我们使用 sencha 本地打包程序构建时，这在设备上运行良好，但是当使用 phonegap 打包同一个应用程序时失败。使用 phonegap 原生包装不会触发警报，只有在我进行 sencha 原生包装时它才会起作用。我没有收到任何错误消息，我没有收到警报，并且我已将此代码添加到启动功能的 app.js 文件中，我正在使用 sencha touch 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:08:42.287

使用 PhoneGap 打包时，请改用 PhoneGap 自己的事件：

```
document.addEventListener("online", yourCallbackFunction, false);

document.addEventListener("offline", yourCallbackFunction, false); 
```

# arrays - Matlab在循环中将元素分配给数组

> ID：11949060
> 
> 赞同：0
> 
> 时间：2012-08-14T09:05:15.293
> 
> 标签：arrays, matlab, for-loop, dynamic-data, assignment-operator

我有这个循环，它生成一个向量“Diff”。如何将 Diff 的值放在记录所有 Diff 生成的数组中？问题是 Diff 的长度应该是固定长度（36），即“CleanPrice”表的宽度。但是因为 col_set 的长度不同（根据它正在读取的数据中 NaN 的数量），所以 Diff 的长度也不同。我需要它做的是根据相应的列号分配生成的答案。即 diff 的 row(i) 应该包含 col(i)，其中 Diff 中的所有其他行都应该分配一个“0”或“NaN”。基本上我需要*DiffArray*是一个 (nTrials x 36) 数组，其中每一行都是生成的 (36 x 1) *DiffArray*。但此刻，每次 col 的长度变化时，

> ？？？下标分配尺寸不匹配。==> NSSmodel 在 41 DiffMatrix(end+1,:)=Diff 处出错

这是我的代码：

```
DiffArray=[];
    StartRow=2935;
    EndRow=2940;
nTrials=EndRow-StartRow;
    for row=StartRow:EndRow;
         col_set=find(~isnan(gcm3.data.CleanPrice(row,1:end)));
         col=col_set(:,2:end);
         CleanPrices=transpose(gcm3.data.CleanPrice(row,col));
         Maturity=gcm3.data.CouponandMaturity(col-1,2);

SettleDate=gcm3.data.CouponandMaturity(row,3);
Settle = repmat(SettleDate,[length(Maturity) 1]);

CleanPrices =transpose(gcm3.data.CleanPrice(row,col));
CouponRate = gcm3.data.CouponandMaturity(col-1,1);
Instruments = [Settle Maturity CleanPrices CouponRate];
PlottingPoints = gcm3.data.CouponandMaturity(1,2):gcm3.data.CouponandMaturity(36,2);
Yield = bndyield(CleanPrices,CouponRate,Settle,Maturity);

SvenssonModel = IRFunctionCurve.fitSvensson('Zero',SettleDate,Instruments)
ParYield=SvenssonModel.getParYields(Maturity);

[PriceActual, AccruedIntActual] = bndprice(Yield, CouponRate, Settle, Maturity);
[PriceNSS, AccruedIntNSS] = bndprice(ParYield, CouponRate, Settle, Maturity);

Diff=PriceActual-PriceNSS
DiffArray(end+1,:)=Diff
end 
```

我在[这篇文章中查看了](https://stackoverflow.com/questions/3038152/problem-with-assigning-elements-of-a-class-array-to-individual-variables-in-matl)*num2cell* ，但不确定如何正确应用它并开始收到与此相关的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:27:15.707

说要向 DiffArray 添加“不完整”行是否正确？如果你确切地知道每个元素应该去哪里，你可能会做这样的事情：

```
indices = [1:7; 2:8; 3:9; [1 2 3 6 7 8 10]];
Diff = rand(4, 7);
DiffArray = zeros(4, 10) * NaN;

for row = 1:4
    DiffArray(row, indices(row, :)) = Diff(row,:);
end 
```

当然，在您的情况下，您将在循环内计算 Diff 和 Index（行向量），而不是使用预先分配的数组。以上只是为了说明如何使用索引向量来定位矩阵中的短行。

# hibernate - 在一对多 Hibernate 映射中使用部分复合键

> ID：11949063
> 
> 赞同：4
> 
> 时间：2012-08-14T09:05:16.293
> 
> 标签：hibernate, mapping, one-to-many

`Employee`我有一种用于和的下表结构`Department`。的复合键`Employee`有三列 - `EMP_ID`, `DEPT_ID`,`DEPT_CODE` 但部门只有两列与 Employee 的复合键相匹配 - `DEPT_ID`, `DEPT_CODE`。

```
<class name="com.test.Employee" table="EMPLOYEE">
   <composite-id>
    <key-property column="EMP_ID" name="empId" type="java.lang.Integer"/>
    <key-property column="DEPT_ID" name="deptID" type="java.lang.Integer"/>
        <key-property column="DEPT_CODE" name="deptID" type="java.lang.Integer"/>
   </composite-id>
   <property column="EMP_NAME" name="empName" type="java.lang.String"/>
   <list name="departments" table="DEPARTMENT" fetch="select">
     <key>
    <column name="DEPT_ID"></column>
        <column name="DEPT_CODE"></column>
     </key>
     <index/>
     <one-to-many class="com.test.Department" />
   </list>
</class>

<class name="com.test.Department" table="DEPARTMENT">
   <composite-id>
      <key-property column="DEPT_ID" name="deptID" type="java.lang.Integer"/>
      <key-property column="DEPT_CODE" name="deptID" type="java.lang.Integer"/>
   </composite-id>
   <property column="DEPT_NAME" name="deptName" type="java.lang.String"/>
</class> 
```

现在我想在这两个表上加入一个连接，但是它给出了错误，说主键`EMP_ID`没有映射。如果我将`EMP_ID`“列表部门键列”放在`Employee`映射 xml 中，应用程序会加载但表中没有匹配的列`Department`。

那么有什么办法可以解决这个问题。如何在休眠映射文件中配置`join`/ `one-to-many mapping`，当您有一个具有复合键的表和另一个主键是该复合键的子集的表时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:27:57.303

我不太清楚您所说的“加入”是什么意思...您的问题听起来可能与此有些相似...

[https://forum.hibernate.org/viewtopic.php?f=1&t=985555](https://forum.hibernate.org/viewtopic.php?f=1&t=985555)

也许问题是您尝试加入（您尚未提供）的 hql 不正确？如果你能澄清你的问题，你可能会得到更好的答案。

# json - WCF oData 通过 Web 服务插入

> ID：11949065
> 
> 赞同：0
> 
> 时间：2012-08-14T09:05:17.383
> 
> 标签：json, wcf, odata, maxreceivedmessagesize

我正在尝试为我的 wcf odata 服务增加 maxReceivedMessageSize。我有另一个 Web 服务将值发布到我的 wcf 服务以将值插入 sql。我在发帖

```
{
A:1,
B:1,
C:3,
D:4,
} 
```

这引发了一个错误。远程服务器返回错误：(400) 错误请求。如果我发布下面的值，它插入成功。

```
{
A:1
} 
```

那么有人可以帮我解决这个错误吗？网上有一些例子试图修改下面的网络配置，但它们不适合我，因为我没有服务合同。

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <!-- Create a custom binding for our service to enable sending large amount of data -->
        <binding name="MyBasicHttpBinding"
        maxBufferPoolSize="2147483647"
        maxReceivedMessageSize="2147483647"
        maxBufferSize="2147483647">
        <readerQuotas
          maxArrayLength="2147483647"
          maxBytesPerRead="2147483647"
          maxDepth="2147483647"
          maxNameTableCharCount="2147483647"
          maxStringContentLength="2147483647" />

        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <!-- Enable the serializer to serialize greater number of records -->
        <behavior name="WCFServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <!-- Bind the WCF service to our custom binding -->
      <service behaviorConfiguration="WCFServiceBehavior"
      name="WcfDataService">
        <endpoint address="" binding="basicHttpBinding"
        bindingConfiguration="MyBasicHttpBinding"
        contract=" `WHICH I DONT HAVE, OR I HAVE IT BUT I AM NOOB` "/>
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
     multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

我的 WCF 使用 ADO.net 实体模型

```
public class WcfDataService : DataService< DataModel.DataModelEntities >
{
    // This method is called only once to initialize service-wide policies.
    public static void InitializeService(DataServiceConfiguration config)
    {        
        // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.
        // Examples:
        config.SetEntitySetAccessRule("*", EntitySetRights.All); 
       // config.SetServiceOperationAccessRule("MyServiceOperation", ServiceOperationRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:06:25.820

合同是来自 Microsoft.Data.Services 的 System.Data.Services.IRequestHandler。

我的配置：

```
<system.serviceModel>
<services>
  <service name="ODataSampleRun.DemoDataService" behaviorConfiguration="Behavior">
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
    <endpoint contract="System.Data.Services.IRequestHandler" binding="customBinding" bindingConfiguration="RawODataService" address="http://localhost:9090/DemoDataService" behaviorConfiguration="test" />
  </service>
</services>
<bindings>
  <webHttpBinding>
    <binding name="NoneWebBinding">
      <security mode="None" />
    </binding>
  </webHttpBinding>
    <customBinding>
        <binding name="RawODataService">
            <webMessageEncoding webContentTypeMapperType="ODataSampleRun.RawContentTypeMapper, ODataSampleRun, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
            <httpTransport manualAddressing="true" maxReceivedMessageSize="524288000" transferMode="Streamed" />
        </binding>
    </customBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="test">
      <webHttp faultExceptionEnabled="true" />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="Behavior">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" httpHelpPageEnabled="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

# jquery - 具有不同的子菜单字体和一个简单的 jquery 垂直手风琴菜单

> ID：11949067
> 
> 赞同：0
> 
> 时间：2012-08-14T09:05:22.590
> 
> 标签：jquery, html, css, accordion

我有一个简单的 jquery 垂直手风琴，想为顶级和子菜单级链接设置不同的字体大小、颜色和粗细。通过更改 CSS 来实现这一点我没有太多运气。我错过了什么？有没有一种简单的方法来做到这一点：

**html代码：**

```
<script type="text/javascript">
 $(document).ready(function () {
    $('#nav > li > a').click(function(){
       if ($(this).attr('class') != 'active'){
          $('#nav li ul').slideUp();
          $(this).next().slideToggle();
          $('#nav li a').removeClass('active');
          $(this).addClass('active');
       }
    });
 });
</script>
<style type="text/css"></style>
</head>
<body>
  <ul id="nav">
    <li><a href="#">Item 1</a>
      <ul>
        <li><a href="#">Sub-Item 1 a</a></li>
        <li><a href="#">Sub-Item 1 b</a></li>
        <li><a href="#">Sub-Item 1 c</a></li>
      </ul>
    </li>
    <li><a href="#">Item 2</a>
      <ul>
        <li><a href="#">Sub-Item 2 a</a></li>
        <li><a href="#">Sub-Item 2 b</a></li>
      </ul>
    </li>
    <li><a href="#">Item 3</a>
      <ul>
        <li><a href="#">Sub-Item 3 a</a></li>
         <li><a href="#">Sub-Item 3 b</a></li>
        <li><a href="#">Sub-Item 3 c</a></li>
        <li><a href="#">Sub-Item 3 d</a></li>
      </ul>
    </li>
    <li><a href="#">Item 4</a>
      <ul>
        <li><a href="#">Sub-Item 4 a</a></li>
        <li><a href="#">Sub-Item 4 b</a></li>
        <li><a href="#">Sub-Item 4 c</a></li>
      </ul>
    </li>
  </ul>
</body> 
```

这是我的**CSS 代码：**

```
}
#nav {
float: left;
width: 155px;
border-top: 1px solid #999;
border-right: 1px solid #999;
border-left: 1px solid #999;
}
#nav li a {
display: block;
background: #ccc;
border-top: 1px solid #eee;
border-bottom: 1px solid #999;
text-decoration: none;
color: #000;
font-family: Arial, Helvetica, sans-serif;
font-size: 11px;
font-weight: bold;
padding-top: 2px;
padding-right: 3px;
padding-bottom: 4px;
padding-left: 3px;
}
#nav li a:hover, #nav li a.active {
background: #999;
color: #fff;

}
#nav li ul {
display: none; // used to hide sub-menus
}
#nav li ul li a {
background: #ececec;
border-bottom: 1px dotted #ccc;
padding-top: 2px;
padding-right: 3px;
padding-bottom: 4px;
padding-left: 3px;

} 
```

对此的任何启发将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:14:50.897

这应该针对子菜单：

```
ul#nav li ul li {
    /* some css here to change font etc */
} 
```

或以子菜单中的“a”标签为目标：

```
ul#nav li ul li a {
    /* some css here to change font etc */
} 
```

# c++ - 在事件驱动应用程序中使用 tbb::task

> ID：11949074
> 
> 赞同：1
> 
> 时间：2012-08-14T09:05:49.163
> 
> 标签：c++, tbb

我不知道在事件驱动的应用程序中使用 tbb::task 代替 boost::thread 是否合适或更可取。有没有人遇到过？

示例代码：

```
class ProcessA 
{
public:
    void operator()()
    {
        //do something
    }
};

class ProcessB 
{
public:
    void operator()()
    {
        //do something
    }
};

int main(int argc, char** argv)
{     
    task_group group;

    // recv a message
    if (type = MsgA)
    {
      group.run(ProcessA());
    }
    else
    {
      group.run(ProcessB());
    }

    group.wait();

    return(0);
} 
```

# canvas - 三个.js 渲染器

> ID：11949076
> 
> 赞同：11
> 
> 时间：2012-08-14T09:06:00.663
> 
> 标签：canvas, svg, web, webgl, three.js

有人可以解释一下three.js 渲染器之间的区别吗？哪个更快？哪一个更标准和跨浏览器？svg 渲染器和 dom 渲染器如何工作？当我在下面的代码中使用 webGl 而不是画布渲染器时，我得到了不同的结果，那为什么会发生呢？
`cube = new THREE.Mesh( new THREE.CubeGeometry( 200, 200, 200, 1, 1, 1, materials ), new THREE.MeshFaceMaterial() );`
canvas 和 webGL 有很大区别吗？我应该将哪一个用于高浏览量的网站？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T14:05:48.913

如果您的目标是创建 3D 图形，您真的想创建仅支持 WebGL 的应用程序。其他 Three.JS 渲染器更像是 hack 和概念验证，而不是可以为您提供真实 3D 的东西。如果您的目标不是创建令人惊叹的图形，那么您可以简单地使用静态 PNG 图像、GIF 动画或 YouTube 剪辑，并具有更好的向后兼容性。`<canvas>`渲染后端仅对非常简单的图形有用（例如没有纹理的旋转立方体），并且`<canvas>`在许多情况下作为后备是行不通的。

*   在 WebGL 中创建您的独家内容

*   提供对旧版浏览器的回退

    *   使用 Google Chrome 框架[http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq)

    *   如果旧版浏览器用户不想在旧版浏览器中安装 Chrome Frame 插件，只需将他们重定向到静态图像和静态文本内容

例如，[https](https://tinkercad.com/home/) ://tinkercad.com/home/ 是仅 WebGL 的 Web 应用程序。他们在 webshape.fi 会议上的估计是，大约 50% 的网站观众可以访问 WebGL 内容。这听起来可能很低，但仍然比在手机或桌面上安装应用程序的人高得多，因此使用 WebGL 部署 3D 的对话率高于通过其他部署机制。

另见[http://webglstats.com/](http://webglstats.com/)

WebGL 也是一种面向未来的技术——它不会消失。目前你主要针对桌面，但移动适应成为现实只是时间问题，2-3 年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T16:00:20.047

使用**WebGLRenderer**作为它的未来证明，而 imp 是大多数三种.js 方法都可以在其中工作。

例如 ParticleSystem 在 CanvasRenderer 中不起作用

# c# - 在将对象a设置为对象b之后，如何删除对象b，但不删除对象a？

> ID：11949077
> 
> 赞同：1
> 
> 时间：2012-08-14T09:06:00.313
> 
> 标签：c#

我正在尝试这样做：

```
 Data4JS D4JS = (Data4JS)GlobalHelper.GetCurrentSession()["Data4JS"];
    GlobalHelper.GetCurrentSession()["Data4JS"] = null; 
    return D4JS; 
```

问题是它也将 D4JS 设置为 null，我真的不想将我的代码分成几个方法调用，我还能如何轻松地实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:06:59.980

只需使用 new 关键字，这样您就不会使用引用或克隆对象方法。

[深度克隆对象](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:08:54.857

在这种情况下，使用序列化进行深层复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:40:33.760

假设您的对象足够简单并且具有公共属性，并且您需要的只是属性中的值，您可以执行类似的操作：

```
Data4JS D4JS = (Data4JS)GlobalHelper.GetCurrentSession()["Data4JS"];
Data4JS result = new Data4JS
{
    //Set your result object to the one in 
    //session by manually copying over the property values
    Property1 = D4JS.Property1;
};

GlobalHelper.GetCurrentSession()["Data4JS"] = null; 

return result; 
```

否则，请使用 Freeman 的建议作为实现您需要的更清洁的方法。

# android - 寻找朋友的安卓应用

> ID：11949082
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:06:36.073
> 
> 标签：android, eclipse

谷歌地图如何找到5米内的朋友？

目前我正在使用 google maps api location manager 类来定位用户，但是我怎样才能找到附近的朋友数量并与用户一起在地图上找到他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:17:54.837

如果您所有的朋友都在使用您的应用程序，您可以让您的应用程序将位置上传到服务器（自动），然后让服务器计算距离，返回附近朋友的位置（然后您可以将其绘制到地图上）和他们的数量。

您必须考虑数据/能源消耗与精度，所以我不确定这是一个好的解决方案。

# c - 创建许多计划和执行计划时的问题

> ID：11949083
> 
> 赞同：1
> 
> 时间：2012-08-14T09:06:40.917
> 
> 标签：c, fftw

我对通过调用 fftwf_plan_many_dft_r2c() 并使用 OpenMP 执行它来创建 many_plan 有点困惑。我在这里想要实现的是看看是否明确使用 OpenMP 和组织 FFTW 数据可以一起工作。（我知道我“应该”使用 fftw 的多线程版本，但我未能从中获得预期的加速）。

我的代码如下所示：

```
/* I ignore some helper APIs */
#define N 1024*1024 //N is the total size of 1d fft 
fftwf_plan p;
float * in;
fftwf_complex *out;

omp_set_num_threads(threadNum); // Suppose threadNum is 2 here
in = fftwf_alloc_real(2*(N/2+1));
std::fill(in,in+2*(N/2+1),1.1f); // just try with a random real floating numbers
out = (fftwf_complex *)&in[0];  // for in-place transformation
/* Problems start from here */
int n[] = {N/threadNum}; // according to the manual, n is the size of each "howmany" transformation
p = fftwf_plan_many_dft_r2c(1, n, threadNum, in, NULL,1 ,1, out, NULL, 1, 1, FFTW_ESTIMATE);

#pragma omp parallel for
for (int i = 0; i < threadNum; i ++)
{
    fftwf_execute(p);
    // fftwf_execute_dft_r2c(p,in+i*N/threadNum,out+i*N/threadNum);
} 
```

我得到的是这样的：

如果我使用 fftwf_execute(p)，程序执行成功，但结果似乎不正确。（我将结果与不使用 many_plan 和 openmp 的版本进行比较）

如果我使用 fftwf_execute_dft_r2c()，我得到分段错误。

有人可以在这里帮助我吗？我应该如何跨多个线程分区数据？或者它首先是不正确的。

先感谢您。

飞人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:36:15.917

*   您是否为*out*正确分配内存？做这个：

> ```
> out = (fftwf_complex *)&in[0];  // for in-place transformation 
> ```

做同样的事情：

```
out = (fftw_complex*)fftw_malloc(sizeof(fftw_complex)*numberOfOutputColumns); 
```

*   您正在尝试访问并行块内的“p”，而没有具体告诉 openMP 如何使用它。它应该是：

> 用于共享的 pragma omp 并行（p）

*   如果您要将工作拆分为 n 个线程，我认为您会明确地想要告诉 omp 使用 n 个线程：

> pragma omp parallel for shared(p) num_threads(n)

*   这段代码在没有多线程的情况下可以工作吗？如果您删除了 for 循环和 openMP 调用并仅执行一次 fftwf_execute(p) 是否有效？

*   我对 FFTW 的许多计划了解不多，但似乎 p 确实是很多计划，而不是一个单一的计划。所以，当你“执行” p 时，你是在一次执行所有计划，对吗？您实际上并不需要迭代地执行 p。

我仍在学习 OpenMP + FFTW，所以我可能在这些方面错了。StackOverflow 不喜欢我在编译指示前面加上 #，但你需要一个。

# postgresql - 重启 Heroku Postgres 开发数据库

> ID：11949084
> 
> 赞同：7
> 
> 时间：2012-08-14T09:06:45.857
> 
> 标签：postgresql, heroku, playframework-2.0

我从 Play 2.0.3 java 应用程序中收到此错误。如何重新启动 Heroku Postgres Dev DB？我在 Heroku 帮助中心找不到任何重启数据库的说明。

```
app[web.1]: Caused by: org.postgresql.util.PSQLException: FATAL: remaining connection slots are reserved for non-replication superuser connections 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T11:55:49.780

您收到的错误消息没有理由重新启动数据库；这不是数据库问题。您的应用程序持有太多连接，可能是因为您忘记设置其连接池。这不是数据库服务器问题，您可以在不重新启动数据库服务器的情况下修复它。

如果您停止 Play 应用程序或重新配置其连接池，问题就会消失。

另一种选择是将您的 Heroku 实例置于维护模式，然后再次将其取出。

由于[heroku 不允许您以超级用户身份连接](https://devcenter.heroku.com/articles/superuser-permissions)（有充分的理由），因此您不能像使用普通 PostgreSQL 一样使用保留的超级用户插槽来连接和管理连接。

也可以看看：

[Heroku“psql: FATAL: 剩余的连接槽是为非复制超级用户连接保留的”](https://stackoverflow.com/questions/11847144/heroku-psql-fatal-remaining-connection-slots-are-reserved-for-non-replication)

[http://wiki.postgresql.org/wiki/Number_Of_Database_Connections](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

## 如果您是发现此内容的非 Heroku 用户：

使用普通 PostgreSQL，您可以使用与服务器的 PostgreSQL 连接断开客户端与服务器端的连接。看看它怎么说有一个为“超级用户连接”保留的插槽？使用 PgAdmin-III 或 .作为超级用户（`postgres`默认为用户）连接到 Pg `psql`。

连接后，您可以看到其他客户端：

```
SELECT * FROM pg_stat_activity; 
```

如果您想终止除您自己之外的每个连接，您可以运行：

```
SELECT procpid, pg_terminate_backend(procpid) 
FROM pg_stat_activity WHERE procpid <> pg_backend_pid(); 
```

添加`AND datname = current_database`和/或`AND usename = <target-user-name>`视情况而定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-22T16:58:47.717

我想我应该在回复之前的答案时添加这个，但我不知道该怎么做，所以......

作为对接受答案线程中 Liron Yahdav 评论的更新：“发现此问题的非 Heroku 用户”解决方案在 Heroku PostgreSQL 开发数据库上为我工作，但对 Liron 提供的查询稍作修改。这是我修改后的查询：`SELECT pid, pg_terminate_backend(pid) FROM pg_stat_activity WHERE pid <> pg_backend_pid() AND usename='<your_username>';`

procpid 似乎已更改为 pid。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-25T05:16:55.900

没有办法重新启动整个数据库。不过，heroku 提供了一种简单的方法来停止所有连接，从而解决了大多数情况下的问题：

`heroku pg:killall`

# sql-server - 如何确定使用特定维度的立方体？

> ID：11949086
> 
> 赞同：1
> 
> 时间：2012-08-14T09:06:49.447
> 
> 标签：sql-server, sql-server-2008, sql-server-2012

如果我不确切知道哪些多维数据集会受到影响，那么对尺寸进行更改对我来说总是有风险的。有没有比逐个检查每个立方体或创建外部文档更优雅的方法呢？

我通常想知道是否有办法做到这一点，因为我们使用的版本范围很广，尤其是对于**SQL Server 2000**和**2008**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:50:41.700

维度实际上与度量组相关（当然，属于多维数据集）您可以使用以下查询检查这些属性：

```
SELECT  *
FROM    $SYSTEM.MDSCHEMA_MEASUREGROUP_DIMENSIONS
WHERE   CUBE_NAME = 'YOUR_CUBE_NAME' 
```

# android - Android：如何放置弹出窗口的（提示）链接

> ID：11949091
> 
> 赞同：0
> 
> 时间：2012-08-14T09:07:08.647
> 
> 标签：android, tooltip, hint

我正在开发一个 Android 应用程序，我需要在表单中的文本编辑旁边放置一个链接。

该链接将弹出一个窗口，其中包含用户的工具提示。

编辑：我想在文本字段旁边放置某种链接，当用户单击此链接时，会出现一个弹出窗口并告诉他如何填写此文本字段。

我怎样才能在 Android 中做到这一点？

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:29:05.157

通过放置 TextView 并添加`OnClickListener`.

关于“弹出”：

你看过 Toast-messages 吗？他们似乎正在做你想做的事。

```
Toast toast = Toast.makeText(Context context, String yourMessage, Toast.LENGTH_LONG/SHORT);
toast.show(); 
```

如果你有，这里有一些其他的解决方案可以做你想做的事：

用某种解决方案怎么样`Dialog`？例如。可以`AltertDialog`打开，显示提示，但用户必须按“确定”才能关闭“弹出窗口”。

另一种也很丑陋的解决方案是使用可见性。“弹出窗口”将一直存在，但只有在单击链接时才可见。 [如何以编程方式更改布局的可见性](https://stackoverflow.com/questions/3465841/how-to-change-visibility-of-layout-programaticly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:08:56.950

用于`android:hint="Your hint"`显示`EditText`提示。

# javascript - 如何阻止 jQuery.ajax() 将失败记录到控制台？

> ID：11949095
> 
> 赞同：35
> 
> 时间：2012-08-14T09:07:25.597
> 
> 标签：javascript, jquery, google-chrome

我正在使用以下 jQuery JSONP 请求通过 URL 检查资源的状态。当资源不可用或服务器关闭时，我的`ajaxFail()`函数会更新显示。

```
function fetchServerStatus(service, host)
{
    var port = serverStatus[service].port;
    $.ajax({
        url: "http://" + host + ":" + port + "/admin/server/status",
        dataType: "jsonp",
        timeout: 1000,
        error: ajaxFail,
        fail: ajaxFail,
        success: ajaxDone,
        done: ajaxDone,
        complete: ajaxAlways,
        always: ajaxAlways
    });
} 
```

我遇到的问题是，尽管声明了 and 的处理程序`fail`，`error`它不会将任何内容记录到控制台，但 jQuery 总是在控制台中记录失败的请求。如果资源长时间不可用，这会建立一个巨大的控制台日志，最终导致浏览器进程崩溃（在我的例子中是 Chrome）。

有没有办法阻止它这样做？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-14T09:12:20.393

chrome 控制台中的日志记录条目是 chrome 在**处理任何 HTTP 请求**时的行为，不是 jQuery 或 ajax(XMLHttpRequest) 的问题，即使是`<img>`or`<link>`标记也可能导致此问题。

您唯一的选择是修复您的服务器端代码以不触发 ajax 错误（例如 404 未找到或错误的内容类型），因此根据记录到控制台的内容，也许可以找到更好的解决方案，请提供控制台中的准确日志消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-24T17:00:38.427

把它放在你的页面顶部：

```
<script>

$(document).ready(function() {
jQuery.migrateMute = true;
})
</script> 
```

它是暂时的-但对我有用。不必滚动 45 行废话来调试 js 错误。

# sql - 在 Visual Studio 中使用 @ 字符定义查询时出错

> ID：11949096
> 
> 赞同：0
> 
> 时间：2012-08-14T09:07:33.237
> 
> 标签：sql, visual-studio-2010

在 Visual Studio 2010 中，我使用向导为 TableAdapters 创建查询。该查询`SELECT Modell FROM BHKW WHERE Energieträger = @Energieträger`导致出现“@ 字符周围的错误”（在向导中）。而这个事件虽然

1.  和字符是[允许](https://stackoverflow.com/questions/954884/what-special-characters-are-allowed-in-t-sql-column-name)的字符`@`和`ä`
2.  这个非常简单的查询来自[Microsoft 官方示例](http://msdn.microsoft.com/en-us/library/bz9tthwx%28v=vs.100%29.aspx#Y0)（仅更改了字段名称）。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:44:05.323

该向导要求对SQL**数据库使用***方括号*。正确的查询如下：

 **```
SELECT Modell FROM BHKW WHERE Energieträger = [@Energieträger] 
```

如果使用 Access 数据库，向导将成功完成，但会弹出警告：“返回的数据不符合表的架构。”

**Access 数据库**的正确语法需要一个*问号*：

```
SELECT Modell FROM BHKW WHERE (Energieträger = ?) 
```**

# maven - jetty-maven-plugin 设置缓冲区大小

> ID：11949099
> 
> 赞同：0
> 
> 时间：2012-08-14T09:07:46.043
> 
> 标签：maven, jetty, maven-jetty-plugin

回到 jetty-maven-plugin 我很难设置缓冲区大小。

我的用例暗示文件上传（通常大小约为 700Ko）。因为对于 jetty-maven-plugin 默认配置来说上传太大，所以我收到带有错误状态代码 413 的 Http 响应（请求太大）

我尝试使用插件配置：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>${jetty-maven.version}</version>
    <configuration>
        <scanIntervalSeconds>3</scanIntervalSeconds>

        <connectors>
            <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <port>8080</port>
                <maxIdleTime>60000</maxIdleTime>
                <requestHeaderSize>8192</requestHeaderSize>
                <requestBufferSize>2097152</requestBufferSize>
            </connector>
        </connectors>
    </configuration>
</plugin> 
```

然后我尝试将 jetty-maven-plugin 与 jetty.xml 文件一起使用

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>${jetty-maven.version}</version>
    <configuration>
        <scanIntervalSeconds>3</scanIntervalSeconds>
        <jettyConfig>${basedir}/src/main/config/jetty/jetty.xml</jettyConfig>
    </configuration>
</plugin> 
```

jetty.xml 如下：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN"     "http://jetty.mortbay.org/configure.dtd">
<Configure id="Server" class="org.eclipse.jetty.server.Server">
 <Call name="addConnector">
  <Arg>
   <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
    <Set name="port"><SystemProperty name="jetty.port" default="8080"/></Set>
    <Set name="requestHeaderSize">8192</Set>
    <Set name="requestBufferSize">2097152</Set>
   </New>
  </Arg>
 </Call>
</Configure> 
```

没有任何效果。有人可以给我正确的配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:16:22.793

我不确定这是否解决了您的用例中的问题，但您可以尝试将以下内容添加到您`<configuration>`的 maven-jetty-plugin 部分：

```
<systemProperties>
    <systemProperty>
        <name>org.eclipse.jetty.server.Request.maxFormContentSize</name>
        <value>-1</value> <!-- or any other value -1 is for max -->
     </systemProperty>
<systemProperties> 
```

正如[jesse mcconnell](https://stackoverflow.com/users/1185262/jesse-mcconnell)所说，该物业在 7/8 码头重命名为`org.eclipse.jetty.server.Request.maxFormContentSize`.

对于我来说，码头 6`org.mortbay.jetty.Request.maxFormContentSize`正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T13:48:47.587

按此更改您的 pom 并将这两个 xml 文件添加到您的项目中。我希望，它会为你工作。

```
 <plugin>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>9.2.11.v20150529</version>
            <configuration>
                <contextPath>/random-api</contextPath>
                <scanIntervalSeconds>5</scanIntervalSeconds>
                <jettyXml>jetty.xml,jetty-http.xml</jettyXml>
            </configuration>
        </plugin> 
```

===============jetty.xml 和 jetty-http.xml================= [https://github.com/xwiki /xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-jetty/xwiki-platform-tool-jetty-resources/src/main/resources/jetty/etc/jetty.xml](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-jetty/xwiki-platform-tool-jetty-resources/src/main/resources/jetty/etc/jetty.xml)

[https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-jetty/xwiki-platform-tool-jetty-resources/src/main/resources/jetty/等/码头-http.xml](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-jetty/xwiki-platform-tool-jetty-resources/src/main/resources/jetty/etc/jetty-http.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:01:06.267

暂停（午餐）后，我拿起了我应该测试的网络应用程序的代码。其“内部”配置存在冗余限制（使用具有自身大小限制的上传代理）。

事实上，为码头提出的两种配置正在工作（现在网络应用程序没有任何多余的限制）

# mysql - MySQL 创建表 (errno 150)

> ID：11949103
> 
> 赞同：2
> 
> 时间：2012-08-14T09:08:05.553
> 
> 标签：mysql, foreign-keys

我想问一些困扰我很多天的事情......

这就是我的意思：

我创建了这两个表：

```
CREATE TABLE IF NOT EXISTS journal (
  issn varchar(20) NOT NULL,
  j_title varchar(100) NOT NULL,
  j_publisher varchar(30) NOT NULL,
  PRIMARY KEY (issn)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS volume (
  volume_no int(11) NOT NULL,
  issn varchar(20) NOT NULL,
  year int(11) NOT NULL,
  PRIMARY KEY (issn,volume_no),
  FOREIGN KEY (issn) REFERENCES journal(issn)
) ENGINE=InnoDB; 
```

当我尝试创建这个时：

```
CREATE TABLE IF NOT EXISTS issue (
  issue_no int(11) NOT NULL,
  issue_pages varchar(10) NOT NULL,
  issue_date varchar(10) NOT NULL,
  issn varchar(20) NOT NULL,
  volume_no int(11) NOT NULL,
  PRIMARY KEY (issue_no,issn,volume_no),
  FOREIGN KEY (issn) REFERENCES journal(issn),
  FOREIGN KEY (volume_no) REFERENCES volume(volume_no)
) ENGINE=InnoDB; 
```

它抛出一个错误（errno 150）

错误在外键 volume_no 中。

没有`FOREIGN KEY (volume_no) REFERENCES volume(volume_no)`

该表的创建没有问题....我无法解释发生了什么...我一次又一次地看到它，但什么也没有！有人知道发生了什么吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:16:57.260

我可以看到外键不包括`issn`但实际上包含在`primary key`卷表中。

```
CREATE TABLE IF NOT EXISTS issue (   issue_no int(11) NOT NULL,  
                                  issue_pages varchar(10) NOT NULL,   
                                  issue_date varchar(10) NOT NULL,  
                                  issn varchar(20) NOT NULL,  
                                  volume_no int(11) NOT NULL,   
                                  PRIMARY KEY (issue_no,issn,volume_no),   
                                  FOREIGN KEY (issn,volume_no) REFERENCES volume(issn,volume_no) ) ENGINE=InnoDB; 
```

看看下面的 sql fiddle。 [http://sqlfiddle.com/#!2/55a63](http://sqlfiddle.com/#!2/55a63)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:14:56.353

如果父表的PK多于一个字段，则FK中字段的顺序必须与PK中的顺序一致。

```
issue: FOREIGN KEY (issn, volume_no) REFERENCES volume(issn, volume_no) 
```

必须满足这些条件才能不出现错误 150：

1.  这两个表必须是`ENGINE=InnoDB`.
2.  这两个表必须具有相同的字符集。
3.  父表中的 PK 列和 FK 列必须是相同的数据类型。
4.  父表中的 PK 列和 FK 列，如果它们具有定义排序规则类型，则必须具有相同的排序规则类型；
5.  如果外键表中已有数据，则 FK 列值必须与父表 PK 列中的值匹配。

来源：[MySQL 使用外键创建表，给出 errno：150](https://stackoverflow.com/questions/1457305/mysql-creating-tables-with-foreign-keys-giving-errno-150)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:17:42.717

也许 volume_no 需要取消签名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:21:45.693

`FOREIGN`键必须引用父表中的一个`PRIMARY`或一个`UNIQUE`键。

您在 table 只需要一个外键`issue`，而不是两个。它应该引用的主键`volume`：

```
CREATE TABLE IF NOT EXISTS issue (
  issue_no int(11) NOT NULL,
  issue_pages varchar(10) NOT NULL,
  issue_date varchar(10) NOT NULL,
  issn varchar(20) NOT NULL,
  volume_no int(11) NOT NULL,
  PRIMARY KEY (issn, volume_no, issue_no),
  FOREIGN KEY (issn, volume_no) 
    REFERENCES volume(issn, volume_no)
) ENGINE=InnoDB; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:44:03.223

我的数据库也有同样的问题。这不是关于外键的定义，实际上是主键字段的定义。

创建表 tblProcesses (

## fldProcessesID SMALLINT(5) UNIQUE NOT NULL AUTO_INCREMENT ,

CREATE TABLE tblProcessesMessage ( fldProcesses TEXT NOT NULL,

## fldProcessesID VARCHAR(15) NOT NULL DEFAULT ,

tblProcesses (fldProcessesID) 中的主键没有 UNSIGNED 关键字，而 tblProcessesMessage (fldProcessesID) 中的外键具有 UNSIGNED 关键字。这个关键字导致了问题 - 字段类型不一致。所以我在 tblPreocesses 中将 UNSIGNED 关键字添加到 fldProcessesID：

CREATE TABLE tblProcesses ( fldProcessesID SMALLINT(5) **UNSIGNED** UNIQUE NOT NULL AUTO_INCREMENT,

我希望这能帮助您解决问题。最好的问候，尼古拉斯

# playframework - 在设置 promise.akka.actor.typed.timeout 后，玩 2.0.3 在 [5000] 之后仍然会超时

> ID：11949104
> 
> 赞同：2
> 
> 时间：2012-08-14T09:08:07.383
> 
> 标签：playframework, akka

即使我将以下超时值设置为 10 秒，我仍然会收到此错误。系统为 Play 2.0.3。

```
2012-08-14T08:52:20+00:00 app[web.1]: play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[TimeoutException: Futures timed out after [5000] milliseconds]]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1-2.0.3.jar:2.0.3]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1-2.0.3.jar:2.0.3]
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1-2.0.3.jar:2.0.3]
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]: Caused by: java.util.concurrent.TimeoutException: Futures timed out after [5000] milliseconds
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.dispatch.DefaultPromise.ready(Future.scala:870) ~[akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.dispatch.DefaultPromise.result(Future.scala:874) ~[akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]:   at akka.dispatch.Await$.result(Future.scala:74) ~[akka-actor-2.0.2.jar:2.0.2]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.api.libs.concurrent.AkkaPromise.await(Akka.scala:43) ~[play_2.9.1-2.0.3.jar:2.0.3]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.api.libs.concurrent.Promise$class.await(Promise.scala:55) ~[play_2.9.1-2.0.3.jar:2.0.3]
2012-08-14T08:52:20+00:00 app[web.1]:   at play.api.libs.concurrent.AkkaPromise.await(Akka.scala:28) ~[play_2.9.1-2.0.3.jar:2.0.3]

$ tail -1 conf/application.conf 
promise.akka.actor.typed.timeout=10s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:27:27.843

尝试：

```
play.akka.actor.typed.timeout=10s 
```

# ruby-on-rails - 如何在 .erb 模板中将存储在 db 中的值（它是一个布尔值 - true/false）显示为复选框？

> ID：11949106
> 
> 赞同：1
> 
> 时间：2012-08-14T09:08:09.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

目前我的代码看起来像这样，所有的值都显示在一个表中，我直接打印真/假值。相反，我想将真/假值显示为复选框的选中/未选中状态：

```
 <% @users.each do |user| %>
    <tr>
    <td><%= user.username %></td>
    <td><%= user.email %></td>
    <td><%= user.is-admin %></div>
    <td><%= user.active_status %></div>
    </tr>
   <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:12:01.533

您可以使用[`check_box_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)助手：

```
<% @users.each do |user| %>
  <tr>
    <td><%= user.username %></td>
    <td><%= user.email %></td>
    <td><%= check_box_tag 'admin', '1', user.is_admin, :disabled => true %></div>
    <td><%= user.active_status %></div>
  </tr>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:14:41.533

尝试这个

```
<% @users.each do |user| %>
<tr>
<td><%= user.username %></td>
<td><%= user.email %></td>
<td>Is Admin: <%= check_box_tag 'user', 'is_admin', user.is_admin, :disabled => true %></div>
<td><%= user.active_status %></div>
</tr> 
```

disabled 用于使复选框变灰，以便有人无法根据可用性更改值，因为没有要提交的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:13:55.090

你可以添加这个，

```
<%= check_box_tag :active_status, user.id, user.active_status, :disabled => true %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:11:47.010

听起来你需要[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)

# c++ - C++ 中的字节数组

> ID：11949110
> 
> 赞同：1
> 
> 时间：2012-08-14T09:08:31.060
> 
> 标签：c++, visual-studio-2010, bytearray

我目前正在尝试在我的 C++ 应用程序中创建一个字节数组。

我正在使用以下代码：

```
#include "stdafx.h"

const BYTE DMSN[693]={$55,$8B,$EC,$81,$C4,$A4,$FA,$FF,$FF,$89,$45,$FC,$E8,$1B,$02,$00,$00,$89,$85,$CC,
$FD,$FF,$FF,$BB,$F2,$0F,$56,$C6,$8B,$95,$CC,$FD,$FF,$FF,$E8,$19,$02,$00,$00,$89,
$45,$F8,$BB,$A9,$8B,$80,$2D,$8B,$95,$CC,$FD,$FF,$FF,$E8,$06,$02,$00,$00,$89,$45,
$F4,$BB,$85,$3B,$AE,$DB,$8B,$95,$CC,$FD,$FF,$FF,$E8,$F3,$01,$00,$00,$89,$45,$F0,
$BB,$93,$35,$DF,$85,$8B,$95,$CC,$FD,$FF,$FF,$E8,$E0,$01,$00,$00,$89,$45,$EC,$BB,
$8D,$CB,$B6,$5D,$8B,$95,$CC,$FD,$FF,$FF,$E8,$CD,$01,$00,$00,$89,$45,$E8,$BB,$53,
$13,$C1,$78,$8B,$95,$CC,$FD,$FF,$FF,$E8,$BA,$01,$00,$00,$89,$45,$E4,$BB,$8A,$DB,
$DF,$A5,$8B,$95,$CC,$FD,$FF,$FF,$E8,$A7,$01,$00,$00,$89,$45,$E0,$BB,$2E,$05,$50,
$C8,$8B,$95,$CC,$FD,$FF,$FF,$E8,$94,$01,$00,$00,$89,$45,$DC,$BB,$85,$A1,$16,$A2,
$8B,$95,$CC,$FD,$FF,$FF,$E8,$81,$01,$00,$00,$E8,$06,$00,$00,$00,$6E,$74,$64,$6C,
$6C,$00,$5F,$57,$FF,$D0,$89,$85,$D0,$FD,$FF,$FF,$BB,$8B,$E3,$CD,$41,$8B,$D0,$E8,
$60,$01,$00,$00,$89,$45,$D8,$BB,$39,$23,$0D,$2C,$8B,$95,$D0,$FD,$FF,$FF,$E8,$4D,
$01,$00,$00,$89,$45,$D4,$68,$00,$02,$00,$00,$8D,$85,$D4,$FD,$FF,$FF,$50,$6A,$00,
$FF,$55,$F8,$6A,$44,$8D,$85,$88,$FD,$FF,$FF,$50,$FF,$55,$D4,$FF,$55,$F4,$8B,$C8,
$8D,$85,$78,$FD,$FF,$FF,$50,$8D,$85,$88,$FD,$FF,$FF,$50,$6A,$00,$6A,$00,$6A,$04,
$6A,$00,$6A,$00,$6A,$00,$51,$8D,$85,$D4,$FD,$FF,$FF,$50,$FF,$55,$F0,$68,$CC,$02,
$00,$00,$8D,$85,$A4,$FA,$FF,$FF,$50,$FF,$55,$D4,$C7,$85,$A4,$FA,$FF,$FF,$02,$00,
$01,$00,$8D,$85,$A4,$FA,$FF,$FF,$50,$FF,$B5,$7C,$FD,$FF,$FF,$FF,$55,$EC,$64,$A1,
$30,$00,$00,$00,$8B,$40,$0C,$8B,$40,$14,$8B,$40,$10,$50,$FF,$B5,$78,$FD,$FF,$FF,
$FF,$55,$D8,$8B,$7D,$FC,$03,$7F,$3C,$6A,$40,$68,$00,$30,$00,$00,$FF,$77,$50,$FF,
$77,$34,$FF,$B5,$78,$FD,$FF,$FF,$FF,$55,$E8,$89,$85,$74,$FD,$FF,$FF,$6A,$00,$FF,
$77,$54,$FF,$75,$FC,$FF,$B5,$74,$FD,$FF,$FF,$FF,$B5,$78,$FD,$FF,$FF,$FF,$55,$E4,
$8D,$47,$18,$89,$85,$70,$FD,$FF,$FF,$0F,$B7,$47,$14,$01,$85,$70,$FD,$FF,$FF,$33,
$C0,$33,$F6,$33,$C9,$EB,$29,$6B,$C6,$28,$03,$85,$70,$FD,$FF,$FF,$8B,$9D,$74,$FD,
$FF,$FF,$03,$58,$0C,$8B,$55,$FC,$03,$50,$14,$6A,$00,$FF,$70,$10,$52,$53,$FF,$B5,
$78,$FD,$FF,$FF,$FF,$55,$E4,$46,$66,$3B,$77,$06,$72,$D1,$8B,$85,$74,$FD,$FF,$FF,
$03,$47,$28,$89,$85,$54,$FB,$FF,$FF,$8D,$85,$A4,$FA,$FF,$FF,$50,$FF,$B5,$7C,$FD,
$FF,$FF,$FF,$55,$E0,$FF,$B5,$7C,$FD,$FF,$FF,$FF,$55,$DC,$C9,$C3,$64,$A1,$30,$00,
$00,$00,$8B,$40,$0C,$8B,$40,$0C,$8B,$00,$8B,$00,$8B,$40,$18,$C3,$55,$8B,$EC,$83,
$C4,$F4,$52,$89,$55,$FC,$8B,$4A,$3C,$03,$CA,$89,$4D,$F4,$8B,$49,$78,$03,$CA,$89,
$4D,$F8,$8B,$51,$18,$8B,$49,$20,$03,$4D,$FC,$33,$FF,$8B,$31,$03,$75,$FC,$33,$C0,
$51,$AC,$8B,$C8,$03,$F8,$D3,$C7,$85,$C0,$75,$F5,$59,$3B,$FB,$74,$10,$83,$C1,$04,
$4A,$75,$E0,$BA,$C2,$58,$62,$1B,$5A,$33,$C0,$C9,$C3,$8B,$45,$FC,$8B,$4D,$F8,$8B,
$59,$18,$8B,$49,$24,$03,$C8,$2B,$DA,$D1,$E3,$03,$CB,$0F,$B7,$19,$8B,$4D,$F8,$8B,
$49,$1C,$03,$C8,$C1,$E3,$02,$03,$CB,$03,$01,$5A,$C9,$C3}

int _tmain(int argc, _TCHAR* argv[])
{
return 0;
} 
```

这就是它在 IDE 中的样子：http: [//gyazo.com/ae6ccac99b8f0d6bfd26cadecfe89939.png](http://gyazo.com/ae6ccac99b8f0d6bfd26cadecfe89939.png)

我目前正在使用`Microsoft Visual C++ 2010 Express`.

好像我没有导入我需要的东西（为了使用`BYTE`或某种意义上的“字节数组”）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T09:11:14.513

首先，您可以使用`unsigned char`代替`BYTE`. 就`BYTE`其本身而言，您应该

```
#include <windows.h> 
```

其次，`$`您应该使用`0x`.

这是您应该阅读的优秀 C++ 书籍[的](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)综合指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:46:35.777

您可以使用`typedef` on`unsigned char` 创建 `BYTE`. 像这样：`typedef unsigned char BYTE;`

您的代码的问题是它应该如下所示：

```
#include <iostream>
using namespace std ;

typedef unsigned char BYTE;

    const BYTE DMSN[/*693*/] =
    {
        0x55,0x8B,0xEC,0x81,0xC4,0xA4,0xFA,0xFF,0xFF,0x89,0x45,0xFC,0xE8,0x1B,0x02,0x00,0x00,0x89,0x85,0xCC,
        0xFD,0xFF,0xFF,0xBB,0xF2,0x0F,0x56,0xC6,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0x19,0x02,0x00,0x00,0x89,
        0x45,0xF8,0xBB,0xA9,0x8B,0x80,0x2D,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0x06,0x02,0x00,0x00,0x89,0x45,
        0xF4,0xBB,0x85,0x3B,0xAE,0xDB,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0xF3,0x01,0x00,0x00,0x89,0x45,0xF0,
        0xBB,0x93,0x35,0xDF,0x85,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0xE0,0x01,0x00,0x00,0x89,0x45,0xEC,0xBB,
        0x8D,0xCB,0xB6,0x5D,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0xCD,0x01,0x00,0x00,0x89,0x45,0xE8,0xBB,0x53,
        0x13,0xC1,0x78,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0xBA,0x01,0x00,0x00,0x89,0x45,0xE4,0xBB,0x8A,0xDB,
        0xDF,0xA5,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0xA7,0x01,0x00,0x00,0x89,0x45,0xE0,0xBB,0x2E,0x05,0x50,
        0xC8,0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0x94,0x01,0x00,0x00,0x89,0x45,0xDC,0xBB,0x85,0xA1,0x16,0xA2,
        0x8B,0x95,0xCC,0xFD,0xFF,0xFF,0xE8,0x81,0x01,0x00,0x00,0xE8,0x06,0x00,0x00,0x00,0x6E,0x74,0x64,0x6C,
        0x6C,0x00,0x5F,0x57,0xFF,0xD0,0x89,0x85,0xD0,0xFD,0xFF,0xFF,0xBB,0x8B,0xE3,0xCD,0x41,0x8B,0xD0,0xE8,
        0x60,0x01,0x00,0x00,0x89,0x45,0xD8,0xBB,0x39,0x23,0x0D,0x2C,0x8B,0x95,0xD0,0xFD,0xFF,0xFF,0xE8,0x4D,
        0x01,0x00,0x00,0x89,0x45,0xD4,0x68,0x00,0x02,0x00,0x00,0x8D,0x85,0xD4,0xFD,0xFF,0xFF,0x50,0x6A,0x00,
        0xFF,0x55,0xF8,0x6A,0x44,0x8D,0x85,0x88,0xFD,0xFF,0xFF,0x50,0xFF,0x55,0xD4,0xFF,0x55,0xF4,0x8B,0xC8,
        0x8D,0x85,0x78,0xFD,0xFF,0xFF,0x50,0x8D,0x85,0x88,0xFD,0xFF,0xFF,0x50,0x6A,0x00,0x6A,0x00,0x6A,0x04,
        0x6A,0x00,0x6A,0x00,0x6A,0x00,0x51,0x8D,0x85,0xD4,0xFD,0xFF,0xFF,0x50,0xFF,0x55,0xF0,0x68,0xCC,0x02,
        0x00,0x00,0x8D,0x85,0xA4,0xFA,0xFF,0xFF,0x50,0xFF,0x55,0xD4,0xC7,0x85,0xA4,0xFA,0xFF,0xFF,0x02,0x00,
        0x01,0x00,0x8D,0x85,0xA4,0xFA,0xFF,0xFF,0x50,0xFF,0xB5,0x7C,0xFD,0xFF,0xFF,0xFF,0x55,0xEC,0x64,0xA1,
        0x30,0x00,0x00,0x00,0x8B,0x40,0x0C,0x8B,0x40,0x14,0x8B,0x40,0x10,0x50,0xFF,0xB5,0x78,0xFD,0xFF,0xFF,
        0xFF,0x55,0xD8,0x8B,0x7D,0xFC,0x03,0x7F,0x3C,0x6A,0x40,0x68,0x00,0x30,0x00,0x00,0xFF,0x77,0x50,0xFF,
        0x77,0x34,0xFF,0xB5,0x78,0xFD,0xFF,0xFF,0xFF,0x55,0xE8,0x89,0x85,0x74,0xFD,0xFF,0xFF,0x6A,0x00,0xFF,
        0x77,0x54,0xFF,0x75,0xFC,0xFF,0xB5,0x74,0xFD,0xFF,0xFF,0xFF,0xB5,0x78,0xFD,0xFF,0xFF,0xFF,0x55,0xE4,
        0x8D,0x47,0x18,0x89,0x85,0x70,0xFD,0xFF,0xFF,0x0F,0xB7,0x47,0x14,0x01,0x85,0x70,0xFD,0xFF,0xFF,0x33,
        0xC0,0x33,0xF6,0x33,0xC9,0xEB,0x29,0x6B,0xC6,0x28,0x03,0x85,0x70,0xFD,0xFF,0xFF,0x8B,0x9D,0x74,0xFD,
        0xFF,0xFF,0x03,0x58,0x0C,0x8B,0x55,0xFC,0x03,0x50,0x14,0x6A,0x00,0xFF,0x70,0x10,0x52,0x53,0xFF,0xB5,
        0x78,0xFD,0xFF,0xFF,0xFF,0x55,0xE4,0x46,0x66,0x3B,0x77,0x06,0x72,0xD1,0x8B,0x85,0x74,0xFD,0xFF,0xFF,
        0xFF,0xFF,0xFF,0x55,0xE0,0xFF,0xB5,0x7C,0xFD,0xFF,0xFF,0xFF,0x55,0xDC,0xC9,0xC3,0x64,0xA1,0x30,0x00,
        0x00,0x00,0x8B,0x40,0x0C,0x8B,0x40,0x0C,0x8B,0x00,0x8B,0x00,0x8B,0x40,0x18,0xC3,0x55,0x8B,0xEC,0x83,
        0xC4,0xF4,0x52,0x89,0x55,0xFC,0x8B,0x4A,0x3C,0x03,0xCA,0x89,0x4D,0xF4,0x8B,0x49,0x78,0x03,0xCA,0x89,
        0x4D,0xF8,0x8B,0x51,0x18,0x8B,0x49,0x20,0x03,0x4D,0xFC,0x33,0xFF,0x8B,0x31,0x03,0x75,0xFC,0x33,0xC0,
        0x51,0xAC,0x8B,0xC8,0x03,0xF8,0xD3,0xC7,0x85,0xC0,0x75,0xF5,0x59,0x3B,0xFB,0x74,0x10,0x83,0xC1,0x04,
        0x4A,0x75,0xE0,0xBA,0xC2,0x58,0x62,0x1B,0x5A,0x33,0xC0,0xC9,0xC3,0x8B,0x45,0xFC,0x8B,0x4D,0xF8,0x8B,
        0x59,0x18,0x8B,0x49,0x24,0x03,0xC8,0x2B,0xDA,0xD1,0xE3,0x03,0xCB,0x0F,0xB7,0x19,0x8B,0x4D,0xF8,0x8B,
        0x49,0x1C,0x03,0xC8,0xC1,0xE3,0x02,0x03,0xCB,0x03,0x01,0x5A,0xC9,0xC3  
    };

int main( )
{

    for(int i=0; i<200; i++) cout<<"  "<<(int)DMSN[i]<<"\t";

    cout<<" \n";

  return 0;
} 
```

# android - 在 tabhost 中重新加载一个活动

> ID：11949112
> 
> 赞同：3
> 
> 时间：2012-08-14T09:08:38.180
> 
> 标签：android, android-activity, android-tabhost, reload

我有一个 tabhost，我在那里添加了 3 个活动（每个选项卡一个活动）。每次更改选项卡时，我都需要知道如何在活动中调用新实习生。我为 tabhost 添加了一个侦听器。当我使用该`clearAllTabs();`方法并在侦听器中再次添加所有选项卡时，应用程序崩溃。当我使用代码从视图中删除用户单击的特定选项卡时`tabHost.getTabWidget().removeView(tabHost.getTabWidget().getChildTabViewAt(i)); tabHost.addTab(the tab I want to replace);`

然后新标签位于标签主机的末尾。

我只需要一个示例，说明每次用户单击特定选项卡时如何重新加载比例活动。

我的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ActionBar bar = getSupportActionBar();

        // requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        Resources res = getResources();
        LocalActivityManager mlam = new LocalActivityManager(this, false);
        final TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);
        mlam.dispatchCreate(savedInstanceState);
        tabHost.setup(mlam);
        TabHost.TabSpec spec;
        Intent intent;

        // TabHost tabHost = getTabHost();
        // tabHost.setup();

        TabSpec specAll = tabHost.newTabSpec("All");
        specAll.setIndicator("All");
        Intent allIntent = new Intent(this, allActivity.class);
        specAll.setContent(allIntent);

        // specAll.setContent(R.id.allList);

        Log.d("SpecAll",""+specAll.setContent(allIntent));

        TabSpec specIn = tabHost.newTabSpec("in");
        specIn.setIndicator("In");
        Intent inIntent = new Intent(this, inActivity.class);
        specIn.setContent(inIntent);

        TabSpec specOut = tabHost.newTabSpec("Out");
        specOut.setIndicator("Out");
        Intent outIntent = new Intent(this, outActivity.class);
        specOut.setContent(outIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(specAll); // Adding all tab
        tabHost.addTab(specIn); // Adding in tab
        tabHost.addTab(specOut); // Adding out tab

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {

                        @Override
                        public void onTabChanged(String tabId) {

                            int i = tabHost.getCurrentTab();
                            //Log.i("@@@@@@@@ ANN CLICK TAB NUMBER", "------" + i);

                            if (i == 0) {
                                Log.d("TAB","" +i);

                            } else if (i == 1) {
                                Log.d("TAB","" +i);
                            }
                            else
                                Log.d("TAB", ""+i);
                        }
                    });

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:24:43.277

似乎活动和tabhost有问题。为了重新加载您只需要做的活动：

```
specAll.setContent(yourIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)); 
```

就在 tabHost.addTab 之前

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-14T09:00:38.607

在我不需要保留选项卡片段的简单情况下，我使用下一个代码

```
 int currentTabId = mTabHost.getCurrentTab();
    mTabHost.clearAllTabs();
    setupTabs();
    mTabHost.setCurrentTab(currentTabId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T17:32:18.177

> 我也面临同样的问题，但我这样解决这个问题......

这是我的 TabActivity....

```
public class MainActivity extends TabActivity {
TabHost tabhost;
String cTab = "0";
String nTab;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);
    tabhost = getTabHost();

    TabSpec one = tabhost.newTabSpec("0");

    // setting Title and Icon for the Tab
    one.setIndicator("", getResources().getDrawable(R.drawable.ic_launcher));
    Intent songsIntent = new Intent(this, FirstActivity.class);
    one.setContent(songsIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    one.setContent(songsIntent);

    TabSpec two = tabhost.newTabSpec("1");
    // setting Title and Icon for the Tab
    two.setIndicator("", getResources().getDrawable(R.drawable.ic_launcher));
    Intent songsIntent1 = new Intent(this, SecondActivity.class);
    two.setContent(songsIntent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    two.setContent(songsIntent1);

    TabSpec three = tabhost.newTabSpec("2");
    // setting Title and Icon for the Tab

    three.setIndicator("",
            getResources().getDrawable(R.drawable.ic_launcher));
    Intent songsIntent4 = new Intent(this, ThirdActivity.class);
    three.setContent(songsIntent4.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    three.setContent(songsIntent4);

    TabSpec four = tabhost.newTabSpec("3");
    // setting Title and Icon for the Tab
    four.setIndicator("", getResources()
            .getDrawable(R.drawable.ic_launcher));
    Intent songsIntent5 = new Intent(this, FourthActivity.class);
    four.setContent(songsIntent5.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    four.setContent(songsIntent5);

    tabhost.addTab(one);
    tabhost.addTab(two);
    tabhost.addTab(three);
    tabhost.addTab(four);
    tabhost.setOnTabChangedListener(new OnTabChangeListener() {
        @Override
        public void onTabChanged(String arg0) {
            cTab = "" + tabhost.getCurrentTab();

        }
    });

    int numberOfTabs = tabhost.getTabWidget().getChildCount();
    for (int t = 0; t < numberOfTabs; t++) {
        tabhost.getTabWidget().getChildAt(t)
                .setOnTouchListener(new View.OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        if (event.getAction() == MotionEvent.ACTION_UP) {
                            String currentSelectedTag = MainActivity.this
                                    .getTabHost().getCurrentTabTag();
                            nTab = currentSelectedTag;
                            System.out.println(" nTab  " + nTab);
                            System.out.println("  cTab  " + cTab);
                            if (cTab.equals(nTab)) {
                                if (nTab.equals("0")) {
                                    Intent intent = new Intent();
                                    intent.setAction("com.ensis.first");
                                    MainActivity.this.sendBroadcast(intent);
                                }
                                if (nTab.equals("1")) {
                                    Intent intent = new Intent();
                                    intent.setAction("com.ensis.second");
                                    MainActivity.this.sendBroadcast(intent);
                                }
                                if (nTab.equals("2")) {
                                    Intent intent = new Intent();
                                    intent.setAction("com.ensis.third");
                                    MainActivity.this.sendBroadcast(intent);
                                }
                                if (nTab.equals("3")) {
                                    Intent intent = new Intent();
                                    intent.setAction("com.ensis.fourth");
                                    MainActivity.this.sendBroadcast(intent);
                                }
                            }
                        }
                        return false;
                    }
                });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
 }} 
```

> 这是我的 FirstActivity.java

```
 public class FirstActivity extends ActivityGroup{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);

ok();
IntentFilter filter = new IntentFilter("com.ensis.first");
registerReceiver(myReceiver, filter);

/**/
    }

    private void ok() {
// TODO Auto-generated method stub
setContentView(R.layout.firstscreen);
Button bt=(Button)findViewById(R.id.button1);
bt.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent it=new Intent(FirstActivity.this,SubActivity.class);
        replaceContentView("activity3", it);
    }
  });
      }

          public void replaceContentView(String id, Intent newIntent) {
        View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
        this.setContentView(view);
    }

     private BroadcastReceiver myReceiver = new BroadcastReceiver()
     {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.v("22222222222222222", "22222222222");
        ok();
    }
      };} 
```

# asp.net-mvc - 如何在 Orchard 中本地化 JQUERY UI 日期选择器？

> ID：11949117
> 
> 赞同：1
> 
> 时间：2012-08-14T09:08:50.937
> 
> 标签：asp.net-mvc, c#-4.0, orchardcms

果园有什么方法可以根据现场文化对日期选择器进行本地化吗？任何帮助都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:27:02.007

如果您的意思是 JQuery 日期选择器，那么您应该查看名为 Orchard.JQuery 的 Orchard 模块，您应该将`ui.datepicker-<language>.js`文件放入 Scripts 文件夹，它应该开始工作。

# php - 检查它是否在 24 小时内发生

> ID：11949124
> 
> 赞同：3
> 
> 时间：2012-08-14T09:09:04.107
> 
> 标签：php, mysql, date

想象一下，我们让用户能够使用我们的网站发送电子邮件，但我们希望限制他们每天（24 小时）发送不超过 30 封电子邮件。

因此，通过发送每封电子邮件，我们将在表格中插入一条记录，然后当他/她想发送另一封电子邮件时，我们检查他是否在 24 小时内发送了超过 30 封电子邮件。

我们如何用 PHP 来检查这个？

我们查询db，我们得到这个用户的20条记录，记录日期是：

```
2012-08-14 13:10:58
2012-08-14 12:45:47
2012-08-14 16:32:18
2012-08-14 19:10:40
...
...
... 
```

我们如何实现这样的规则？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:10:24.403

不要在 PHP 中检查它，使用这样的简单查询立即从数据库中获取答案。

```
select 
    count(*) 
from 
    yourTableName 
where 
    dateCol>date_sub(now(), interval 1 day) 
    and userID=... 
```

这会给你计数。

编辑：正如鲍里斯指出的那样，这将每天计算，您可以将其更改为检查过去 24 小时的时间段，如下所示：

```
select 
    count(*) 
from 
    yourTableName 
where 
    dateCol>date_sub(now(), interval 24 hour) 
    and userID=... 
```

编辑 2：检查后，Riad 正确指出，这两个实际上返回相同的值。被`1 day`视为正好 1 天，而不是日历日期。如果日期列的日期时间为“2012-08-13: 13:00:00”，`date_sub( dateCol, interval 1 day)`则将返回“2012-08-12:13:00:00”。

# php - PHP中嵌套函数声明的用例是什么？

> ID：11949125
> 
> 赞同：2
> 
> 时间：2012-08-14T09:09:10.647
> 
> 标签：php

> **可能重复：**
> [PHP 嵌套函数有什么用？](https://stackoverflow.com/questions/415969/what-are-php-nested-functions-for)

PHP 允许嵌套函数声明，如下所示：

```
function foo() {
    function bar() {
        return "bar";
    }
    return "foo";
} 
```

但是这种语法的用例是什么？内部`bar`被放入全局命名空间，因此它不会被垃圾收集，可从外部函数外部使用，并提供很多混乱和可能的错误。例如，调用`foo`两次会导致错误，除非您将声明包装在`if(!is_callable('bar'))`.

使用嵌套声明来创建条件声明也不好，因为它会造成混乱。“当它在那里工作得很好时，为什么抱怨没有这样的功能？！？！”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:13:52.280

好吧，条件函数声明可能是唯一合法的用例，并且只是为了向后兼容提供后备：

```
function makeSureAllDependenciesExist() {
    if (!function_exists('someFunctionThatOnlyExistsInNewerPhpVersions')) {
        function someFunctionThatOnlyExistsInNewerPhpVersions() {
            // fallback implementation here
        }
    }
} 
```

除此之外，确实没有什么理由使用嵌套函数声明。

# php - 如何从数据库中获取信息，就像我在其上插入带有存储信息的数据以更新它一样

> ID：11949126
> 
> 赞同：1
> 
> 时间：2012-08-14T09:09:14.403
> 
> 标签：php, mysql, database

如何以我在其上插入数据的相同 php 表单从数据库中获取信息，包括存储的信息，以便更新数据库中的数据：

我使用了这个更新语句，但它有一个错误：

```
$sql="UPDATE findings
SET Finding_ID=$_GET[Finding_ID], ServiceType_ID=$_GET[ServiceType_ID], RootCause_ID=$_GET[RootCause_ID] , RiskRating_ID=$_GET[RiskRating_ID] , Impact_ID=$_GET[Impact_ID] ,Efforts_ID= $_GET[Efforts_ID], Likelihood_ID= $_GET[Likelihood_ID], Finding=$_GET[Finding],Implication=$_GET[Implication] , Recommendation =$_GET[Recommendation]  , Report_ID=$_GET[Report_ID]   
WHERE Finding_ID=$Finding_ID, ServiceType_ID=$ServiceType_ID, RootCause_ID=$RootCause_ID , RiskRating_ID=$RiskRating_ID , Impact_ID=$Impact_ID ,Efforts_ID= $Efforts_ID, Likelihood_ID= $Likelihood_ID, Finding=$Finding,Implication=$Implication , Recommendation =$Recommendation  , Report_ID=$Report_ID"; 
```

这是我将插入和更新数据的表单代码：

```
<?php
$con = mysql_connect("localhost","root","mevooo");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
?>

<form method="post"  action="test.php">
<fieldset>
<legend>Insert New Data </legend>
<p> Service Name : 
<select name="Services">
<option value="">  </option>

<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM servicetype_lookup  ");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['ServiceType_ID'];
    $value = $row['ServiceType_Name'];
    echo "<option value='$id'>$value</option>";
}
?>
</select>

</p>

Ref : <input type="text" name="ref" /><br />
Title : <input type="text" name="title" /><br />
Risk Rating : 
<select name="RiskRating">
<option value=""> -Select- </option>
<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM riskrating_lookup");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['RiskRating_ID'];
    $value = $row['RiskRating_Name'];
    echo "<option value='$id'>$value</option>";
}
?>

</select><br />
Root Cause : 
<select name="RootCause">
<option value=""> -Select- </option>

<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM rootcause_lookup");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['RiskCause_ID'];
    $value = $row['RiskCause_Title'];
    echo "<option value='$id'>$value</option>";
}
?>

</select><br />
Impact :
<select name="impact">
<option value=""> -Select- </option>
<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM impact_lookup");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['Impact_ID'];
    $value = $row['Impact_Name'];
    echo "<option value='$id'>$value</option>";
}
?>

</select><br />
Likelihood :
<select name="likelihood">
<option value=""> -Select- </option>
<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM likelihood_lookup");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['Likelihood_ID'];
    $value = $row['Likelihood_Name'];
    echo "<option value='$id'>$value</option>";
}
?>

</select><br/>
Efforts : 
<select name="Efforts">
<option value=""> -Select- </option>
<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM efforts_lookup");
while($row = mysql_fetch_assoc($result))  {
    $id = $row['Efforts_ID'];
    $value = $row['Efforts_Name'];
    echo "<option value='$id'>$value</option>";
}
?>
</select><br/>
Finding : <br/>
<TEXTAREA NAME="Finding" COLS=100 ROWS=10> 
</TEXTAREA>
<br/>
Implication: <br/>
<TEXTAREA NAME="Implication" COLS=100 ROWS=10> 
</TEXTAREA>
<br/>
Recommendation : <br/>
<TEXTAREA NAME="Recommendation" COLS=100 ROWS=10> 

</TEXTAREA>
<br/><input type="submit" value=" Save " onclick="window.location.href='Database.php'" />
</fieldset>
</form>
<?php
mysql_select_db("ers_1", $con);

$sql="UPDATE findings
SET Finding_ID=$_GET[Finding_ID], ServiceType_ID=$_GET[ServiceType_ID], RootCause_ID=$_GET[RootCause_ID] , RiskRating_ID=$_GET[RiskRating_ID] , Impact_ID=$_GET[Impact_ID] ,Efforts_ID= $_GET[Efforts_ID], Likelihood_ID= $_GET[Likelihood_ID], Finding=$_GET[Finding],Implication=$_GET[Implication] , Recommendation =$_GET[Recommendation]  , Report_ID=$_GET[Report_ID]   
WHERE Finding_ID=$Finding_ID AND ServiceType_ID=$ServiceType_ID AND RootCause_ID=$RootCause_ID AND RiskRating_ID=$RiskRating_ID AND Impact_ID=$Impact_ID AND Efforts_ID= $Efforts_ID AND Likelihood_ID= $Likelihood_ID AND Finding=$Finding AND Implication=$Implication AND Recommendation =$Recommendation AND Report_ID=$Report_ID";

 mysql_real_escape_string($insert); 
            mysql_real_escape_string($Finding_ID);

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record updated .";

mysql_close($con);
?> 
<input type="button" value="HOME" onclick="location='Database.php'

"> 
```

这是错误：

```
Notice: Undefined index: Finding_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined index: ServiceType_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined index: RootCause_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined index: RiskRating_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined index: Impact_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined index: Efforts_ID in C:\xampp\htdocs\ers\edit.php on line 122
Notice: Undefined variable: Finding_ID in C:\xampp\htdocs\ers\edit.php on line 126
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' ServiceType_ID=, RootCause_ID= , RiskRating_ID= , Impact_ID= ,Efforts_ID= , Lik' at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:11:35.670

WHERE 的条件应使用 AND、OR 而不是逗号。

```
WHERE Finding_ID=$Finding_ID, ServiceType_ID=$ServiceType_ID,.... 
```

应该

```
WHERE Finding_ID=$Finding_ID AND  ServiceType_ID=$ServiceType_ID AND ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:27:44.503

您的查询基本上是每个人的数据库的欢迎之门。

第一：永远不要`get`在查询中使用直接参数。首先与他们合作。

第二：`''`即使是数字也要加。为您提供额外的安全保障。

第三：WHERE 参数用`AND`or分隔`OR`

```
<?php

// Convert your ID's to INT ( or other specific type you use )
$_Finding_ID = (int)$_GET['Finding_ID'];
$_ServiceType_ID = (int)$_GET['ServiceType_ID'];
$_RootCause_ID = (int)$_GET['RootCause_ID'];
$_RiskRating_ID = (int)$_GET['RiskRating_ID'];
$_Impact_ID = (int)$_GET['Impact_ID'];
$_Efforts_ID = (int)$_GET['Efforts_ID'];
$_Likelihood_ID = (int)$_GET['Likelihood_ID'];
$_Finding = (int)$_GET['Finding'];
$_Implication = (int)$_GET['Implication'];
$_Recommendation = (int)$_GET['Recommendation'];
$_Report_ID = (int)$_GET['Report_ID'];

$sql = "UPDATE
            findings
        SET
            Finding_ID = '".$_Finding_ID."',
            ServiceType_ID = '".$_ServiceType_ID."',
            RootCause_ID = '".$_RootCause_ID."',
            RiskRating_ID = '".$_RiskRating_ID."',
            Impact_ID = '".$_Impact_ID."',
            Efforts_ID = '".$_Efforts_ID."',
            Likelihood_ID = '".$_Likelihood_ID."',
            Finding = '".$_Finding."',
            Implication = '".$_Implication."',
            Recommendation = '".$_Recommendation."',
            Report_ID = '".$_Report_ID."'
        WHERE
            Finding_ID = '".$Finding_ID."'
            AND ServiceType_ID ='". $ServiceType_ID."'
            AND RootCause_ID = '".$RootCause_ID."'
            AND RiskRating_ID = '".$RiskRating_ID."'
            AND Impact_ID = '".$Impact_ID."'
            AND Efforts_ID = '".$Efforts_ID."'
            AND Likelihood_ID = '".$Likelihood_ID."'
            AND Finding = '".$Finding."'
            AND Implication = '".$Implication."'
            AND Recommendation = '".$Recommendation."'
            AND Report_ID = '".$Report_ID."'";
?> 
```

当然，您还可以采取更多预防措施，但这应该在一开始就做得最好。

PS：长查询这样划分更容易管理和阅读；并尽量保持你的代码干净*漂亮*。没有人喜欢使用乱码。

# codeigniter - codeigniter 调用非对象上的成员函数 row()

> ID：11949129
> 
> 赞同：2
> 
> 时间：2012-08-14T09:09:20.100
> 
> 标签：codeigniter

我已经在天涯海角搜索了这个解决方案，对于其他所有人来说，解决方法是在 autoload.php 中自动加载数据库类。但是，我已经在这样做了，所以我不知道还能去哪里。

控制器：

```
class Login extends CI_Controller{

function validate_credentials(){
    $this->load->model('membership_model');

    // call the member function from membership_model.php
    $q = $this->membership_model->validate();

    if($q){
        // user info is valid
        $data = array(
            'username' => $this->input->post('username'),
            'is_logged_in' => true
        );

        $this->session->set_userdata($data);
        redirect('site/members_area');

    }else{
        $this->index();
    }

    }
} 
```

模型：

```
class Membership_model extends CI_Model{

function validate(){
    // this method is called from the login.php controller
    $this->db->where('username', $this->input->post('username'));
    $this->db->where('password', md5($this->input->post('password')));
    $q = $this->db->get('members');

    if($q->num_rows == 1){

        return true;
    }

    return false;
    }
} 
```

请对此有任何帮助，我正在绕圈子

我的下一个想法是 php.ini 需要在我的主机服务器上进行配置，以加载 mysql 模块 - 但我会对此感到非常惊讶吗？

只是为了澄清 - 这条线：

```
if($q->num_rows) 
```

是问题，说我试图引用一个非对象的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:35:46.700

实际上

```
if($q->num_rows) 
```

应该

```
if($q->num_rows()) // It returns the number of rows returned by the query. 
```

所以你可以使用

```
if($q->num_rows()) // In this case it'll be evaluated true if rows grater than 0 
{
    // code when rows returned
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:35:30.570

num_rows 是一个函数。

```
if ($query->num_rows() > 0) {

} 
```

所以你需要

```
if($q->num_rows() > 0) {
  return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:24:27.887

已解决 - 我没有为数据库分配用户，因此无法访问它。

宽慰

# c# - ASP.NET Razor：如何将 Razor Partial 渲染为字符串？

> ID：11949130
> 
> 赞同：1
> 
> 时间：2012-08-14T09:09:26.027
> 
> 标签：c#, asp.net-mvc-3, partial-views

> **可能重复：**
> [如何将部分视图呈现为字符串](https://stackoverflow.com/questions/2537741/how-to-render-partial-view-into-a-string)

我正在寻找将我的 C# 代码中的 Partial 渲染为字符串，有人知道我该如何实现吗？部分只是一个很好的旧部分，它位于 Partials 目录中，不会被其他任何东西使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:12:54.903

```
protected string RenderPartialViewToString(string viewName, object model)
{
    if (string.IsNullOrEmpty(viewName))
        viewName = ControllerContext.RouteData.GetRequiredString("action");

    ViewData.Model = model;

    using (StringWriter sw = new StringWriter()) {
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
        ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

另请参阅：[http ://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:13:53.533

您可以使用返回 MvcHtmlString 的 HTML.Partial，现在您可以使用 ToString() 方法并获得一个字符串。不要与 HTML.RenderPartial(); 混淆。

[Html.Partial 或 Html.RenderPartial 与 MVC3？](https://stackoverflow.com/questions/7371348/html-partial-or-html-renderpartial-with-mvc3)

# drupal - 如何使用 Drupal 构建这样的相关内容菜单？

> ID：11949131
> 
> 赞同：0
> 
> 时间：2012-08-14T09:09:28.803
> 
> 标签：drupal, drupal-views

我怎样才能在这个网站上建立一个左菜单块？> [http://www.giantbomb.com/dark-souls/61-32697/](http://www.giantbomb.com/dark-souls/61-32697/) 假设这个页面是一个名为“游戏”的内容类型，内容是关于一个名为黑暗之魂的游戏。

对于相同类型的每个内容，左侧菜单块始终相同，但链接不同（例如：[http](http://www.giantbomb.com/quake/61-8015/) ://www.giantbomb.com/quake/61-8015/ ）。这些链接是关于相关内容的。

细节 ：

*   地震的链接

概览 > 网站-url/quake/61-8015/

指南 > 网站-url/quake/61-8015/guides/

字符 > 网站-url/quake/61-8015/characters/

ETC

*   黑暗之魂的链接

概览 > website-url/dark-souls/61-32697/

指南 > 网站-url/dark-souls/61-32697/guides/

字符 > website-url/dark-souls/61-32697/characters/

ETC

是否有一个模块或一个神奇的视图查询可以做到这一点？

谢谢 ！

# android - 蒙版形状工作但不应用透明度

> ID：11949133
> 
> 赞同：2
> 
> 时间：2012-08-14T09:09:35.227
> 
> 标签：android, image-masking

我正在尝试使用蒙版来隐藏图片的一部分，具体取决于用户触摸屏幕的位置。为此，我遵循了[Cyril Mottier 提供的代码示例](http://android.cyrilmottier.com/?p=230)。到目前为止，我所做的实际上是有效的：单击 ImageView 的一部分时，我上面得到的所有内容都被隐藏了。问题是它被黑色隐藏，阻止了我的 ImageView 后面的内容显示。

有人可以给我提示或告诉我我做错了什么吗？

[这是我当时得到的屏幕](http://imageshack.us/photo/my-images/705/device20120814105604.png/)

这是主要活动：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

    final MaskedImageView iv = (MaskedImageView) findViewById(R.id.picture_on);
    iv.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d(MainActivity.class.getSimpleName(), "on touch called");

            Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE))
                    .getDefaultDisplay();
            Point point = new Point();
            display.getSize(point);

            Rect bounds = iv.getDrawable().getBounds();
            bounds.top = point.y
                    - (int) event.getY()
                    ;
            iv.setMask(bounds);
            iv.invalidate();
            return false;
        }
    });
} 
```

这里是自定义 ImageView ：

```
public class MaskedImageView extends ImageView {

    private final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    private Bitmap mMask;

    public MaskedImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        // Prepares the paint that will be used to draw our icon mask. Using
        // PorterDuff.Mode.DST_IN means the image that will be drawn will
        // mask the already drawn image.
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
    }

    public MaskedImageView(Context context, AttributeSet attrs) {
        super(context, attrs);

        // Prepares the paint that will be used to draw our icon mask. Using
        // PorterDuff.Mode.DST_IN means the image that will be drawn will
        // mask the already drawn image.
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
    }

    public MaskedImageView(Context context) {
        super(context);

        // Prepares the paint that will be used to draw our icon mask. Using
        // PorterDuff.Mode.DST_IN means the image that will be drawn will
        // mask the already drawn image.
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
    }

    public void setMask(Rect rect) {
        mMask = Bitmap.createBitmap(Math.abs(rect.right - rect.left),
                Math.abs(rect.bottom - rect.top), Bitmap.Config.ALPHA_8);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.save();
        BitmapDrawable bd = (BitmapDrawable) getDrawable();
        canvas.drawBitmap(bd.getBitmap(), 0, 0, null);

        if (mMask != null) {
            canvas.drawBitmap(mMask, 0, 0, mPaint);
        }
        canvas.restore();
    }

} 
```

谢谢您的回答

# ssh - 通过 ssh 减小多个图像的图像大小

> ID：11949135
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:09:43.537
> 
> 标签：ssh, e-commerce, scaling

我有一个为客户制作的电子商务网站。

与任何电子商务网站一样，有很多图片。大约一百张这些照片是我上传的，由我的客户提供。其他 400 个由客户上传。

问题是我的客户提供给我的第一组图像每张大约 100kb，这没什么大不了的。第二组图像，即我的客户上传的图像，大小约为 5-9 MB。很明显，直到为时已晚，我才看到这一点。

所以我的问题是：如何通过 ssh/commandline/php 将所有这些负载重的图像的图像大小减小到 100-200kb 左右。

我还在谈论将图像重新缩放到更小的尺寸（目前它们大约为 3700 像素 x 5600 像素）。

请注意：上传图像时，我不需要重新缩放图像的解决方案。我需要一个解决方案来重新缩放服务器上已经存在的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:12:52.440

假设您的服务器是 Unix，您可以使用 imagemagick/convert 工具：
[http ://doc.ubuntu-fr.org/imagemagick](http://doc.ubuntu-fr.org/imagemagick)

也可以使用PHP+GD，见： http:
[//fr.php.net/manual/en/book.image.php](http://fr.php.net/manual/en/book.image.php)

# .net - vb6 dll可以使用gac中的.net comvisable dll吗

> ID：11949136
> 
> 赞同：0
> 
> 时间：2012-08-14T09:09:51.080
> 
> 标签：.net, dll, com, vb6, com-interop

我有一个 .Net COM 可见 dll 和一个 VB6 dll。我在 GAC 上注册了 .Net dll 并注册了 VB6 dll。我的问题是 VB6 dll 是否可以引用 GAC 中的 .Net dll。如果是，如何做到这一点？通常我会`regasm`在 .Net dll 上使用，一切都会好起来的，但现在 .Net dll 在 GAC 中，所以我认为这种方法是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:36:22.820

如果您使用 GAC 或尝试从 VB6 DLL 项目中使用它，没有什么特别的东西可以阻止它工作。如果您想编写早期绑定代码（实际类型名称，自动完成工作），那么 VB6 IDE 需要一个类型库。它们通常嵌入在 DLL 中，但 .NET [ComVisible] 程序集并非如此。

使用 Tlbexp.exe 或 Regasm.exe 的 /tlb 命令行选项创建类型库。喜欢：

```
 regasm foo.dll /tlb:foo.tlb 
```

您现在可以在 VB6 项目中使用类型库。在 VB6 IDE 中，使用 Project + References，单击 Browse 并导航到 foo.tlb 文件。

另请注意，虽然 GAC 是避免 DLL Hell 的好方法，但您通常不会在您的开发机器上使用它，因为它会污染机器的 GAC。使用 Regasm /codebase 选项将其注册到存储 DLL 的目录中，然后不需要 GAC。当您执行此操作时，您确实会收到来自 Regasm 的警告，试图提醒您您正在冒 DLL Hell 的风险。但这对你的用户来说是个问题，而不是你。因此，您可以放心地忽略该警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:16:02.320

这是可能的，但方法取决于您部署 .Net DLL 的方式。

如果你通过脚本来做，你可以这样做：

1.  将您的 dll 复制到一个文件夹中，例如 c:\program files\myproduct\mydll.dll
2.  使用 regasm 注册您的 dll 以进行 com 互操作
3.  使用 gacutil 放入 GAC

如果使用 Visual Studio 安装项目： 1\. 将 Global Assemly Cache 特殊文件夹添加到项目中 2\. 将 dll 的目标文件夹设置为 GAC 3\. 将 Register 属性设置为 vsdraCOM

如果您在从 VB6 添加对 .Net DLL 的引用时遇到问题，请使用 tlbexp 从您的 .Net dll 创建一个 .tlb 文件并添加对类型库的引用。

这是该过程的更详细描述的链接： [http ://www.simple-talk.com/dotnet/visual-studio/build-and-deploy-a-.net-com-assembly/](http://www.simple-talk.com/dotnet/visual-studio/build-and-deploy-a-.net-com-assembly/)

# cocoa-touch - UIView 动画挂在 iphone 中进行测试

> ID：11949138
> 
> 赞同：0
> 
> 时间：2012-08-14T09:09:57.343
> 
> 标签：cocoa-touch, animation, uiview

我的应用程序在 iphone 模拟器中运行没有问题，但是当我在 iphone 4 (ios 5.1) 上运行它时，一些视图的动画不流畅，有时会动摇。我使用下面的代码，这可能是什么问题？

```
- (void)moveAnimatedToPoint:(CGPoint)point after:(float)delay during:(CGFloat)duration willRemove:(BOOL)remove
{
    [UIView animateWithDuration:duration
                          delay:delay
                        options:UIViewAnimationCurveEaseOut
                     animations:^{
                         self.frame = CGRectMake(point.x, point.y,
                                                 CGRectGetWidth(self.frame), CGRectGetHeight(self.frame));
                     } completion:^(BOOL finished) {
                         if (finished) {
                             if (remove)
                                 [self removeFromSuperview];
                             else {
                                 isHided = CGRectContainsRect(self.superview.frame, self.frame) ? NO : YES;
                             }
                         }
                     }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:24:39.100

下面的链接很好地解释了解决方案。我的视图有阴影层，它们会减慢过渡动画。

[http://mobileoverlord.com/instruments-optimizing-core-animation/](http://mobileoverlord.com/instruments-optimizing-core-animation/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T09:13:17.283

欢迎来到模拟器之外的现实世界:)。

根据您的动画（大小、内存要求等）、您的设备内存、您的设备活动任务等，这很容易发生；）。

# extjs - Ext.Window - 去除圆角

> ID：11949149
> 
> 赞同：1
> 
> 时间：2012-08-14T09:10:45.357
> 
> 标签：extjs

**ExtJS 4.1**

如何从 Ext.Window 中去除圆角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:22:31.873

您必须创建另一个主题。这可以用 SASS 完成，也可以覆盖 css。我强烈建议 sass。

[http://docs.sencha.com/ext-js/4-1/#!/guide/theming](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:37:19.550

或者，您也可以使用浮动面板，而不是窗口。

# facebook - 强制用户使用 Graph API 允许 Facebook 权限

> ID：11949151
> 
> 赞同：-2
> 
> 时间：2012-08-14T09:10:48.303
> 
> 标签：facebook, facebook-graph-api, permissions

我开发了 Facebook 应用程序，我在“允许访问步骤”上遇到了一些问题，在初始阶段用户必须授权应用程序和权限。目前如果用户跳过扩展权限也登陆到应用程序主页，但我需要强制用户接受所有权限，我在使用 FQL 方法时成功了，现在它不起作用，我找不到解决方案。这是我的代码

```
$TotalPermissions = UserAndFriendsPermissions();
return true;
$tp = substr_replace($TotalPermissions ,"",-1);
$this->loadClassFile("Facebook", MAIN_PLUGIN_PATH."Common/facebook/facebook.php");
$facebook = new Facebook(array('appId'  => $FBConnect["fb_app_id"],'secret' => $FBConnect["fb_secret_key"],));
$params = array('method' => 'fql.query','query' => "SELECT ".$tp." FROM permissions WHERE uid=me()");

$result = $facebook->api($params);
$totalp = count(explode(",",$tp));
$ap=0;
foreach ($result[0] as $key => $val) 
{
if($val==1)
 {
   $ap++;
                        }
                    } 
                    if($ap==$totalp)
                    {
                    return true;
                    }
                    else
                    {
                    ?>

                    <?php
                    Redirect("https://apps.facebook.com/APP_NAMESPACE");
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:43:06.663

You cannot force users to accept all your extended permissions. What you can do is to check for permissions given and handle those cases accordingly i.e. redirecting users who have not given permission to a landing page which explains why you need those permissions.

# opengl - 为什么 OpenGL 有一个很远的剪裁平面，用什么习语来处理这个问题？

> ID：11949155
> 
> 赞同：10
> 
> 时间：2012-08-14T09:11:09.517
> 
> 标签：opengl, graphics, 3d, render, projection

我一直在学习 OpenGL，而一直困扰我的一个主题是远剪裁平面。虽然我可以理解近剪裁平面和侧剪裁平面背后的原因（它们永远不会产生任何实际效果，因为它们之外的对象无论如何都不会被渲染），远剪裁平面似乎只是一个烦恼。

由于 OpenGL 背后的人显然已经考虑到这一点，我知道我肯定缺少一些东西。为什么OpenGL有一个远裁剪平面？更重要的是，由于您无法将其关闭，因此在远距离绘制事物时（例如太空游戏中数千单位外的星星、天空盒等对象），推荐使用哪些习惯用法和做法？您是否希望将剪裁平面制作得非常远，还是有更优雅的解决方案？这是如何在生产软件中完成的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T09:19:50.600

唯一的原因是深度精度。由于深度缓冲区中只有有限数量的位，因此您也可以只用它来表示有限的深度。

但是，您可以将远平面设置为无限远：请参阅[此](http://www.terathon.com/gdc07_lengyel.pdf)。它不能很好地与深度缓冲区一起工作——如果你有很远的遮挡，你会看到很多伪影。

因此，由于这围绕深度缓冲区，只要您不使用它，您就不会遇到处理更远的东西的问题。例如，一种常见的技术是在“slabs”中渲染场景，每个slabs只在内部使用深度缓冲区（对于一个slab中的所有东西）但在外部使用某种形式的画家算法（对于slabs，所以你画最远的一个第一的）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-14T09:45:35.393

> 为什么OpenGL有一个远裁剪平面？

因为计算机是*有限*的。

通常有两种方法可以尝试处理这个问题。一种方法是通过在 z-far 接近无穷大时取极限来构造投影。这将收敛于有限值，但它可能会严重破坏您对远处物体的深度精度。

另一种选择（如果您愿意让超过一定距离的物体根本无法正确进行深度测试）是使用`glEnable(GL_DEPTH_CLAMP)`. 这将防止夹在近平面和远平面上；只是任何将在 [-1, 1] 范围之外归一化 z 坐标的片段都将被限制在该范围内。如前所述，它会在被夹住的碎片之间搞砸深度测试，但通常这些物体距离很远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-07T21:14:01.610

这只是“事实”，*OpenGL*深度测试是在窗口空间坐标中执行的（在 [-1,1]^3 中的标准化设备坐标。具有额外的缩放 glViewport 和 glDepthRange）。

所以从我的角度来看，这是 OpenGL 库的设计观点之一。

* * *

消除此 OpenGL 扩展/OpenGL 核心功能的一种方法[https://www.opengl.org/registry/specs/ARB/depth_clamp.txt](https://www.opengl.org/registry/specs/ARB/depth_clamp.txt)如果它在您的 OpenGL 版本中可用。

* * *

我想描述的是，在透视投影中，没有关于“远裁剪平面”的内容。

3.1 对于透视投影，您需要将点 \vec{c} 设置为投影中心和将在其上执行投影的平面。我们称它为图像平面 T： (\vec{r}-\vec{r_0},\vec{n})

3.2 假设投影平面 T 分裂任意点 \vec{r} 和 \vec{c} 投影中心。在其他情况下，\vec{r} 和 \vec{c} 在一个 hafe-space 中，点 \vec{r} 应该被丢弃。

3.4 投影的思想是求\vec{i}与平面T的交点\vec{i}=(1-t)\vec{c}+t\vec{r}

3.5 原样 (\vec{i}-\vec{r_0},\vec{n})=0

=>

( (1-t)\vec{c}+t\vec{r}-\vec{r_0},\vec{n})=0

=>

( \vec{c}+t(\vec{r}-\vec{c})-\vec{r_0},\vec{n})=0

3.6\. 从“3.5”派生的 t 可以代入“3.4”，您将收到到平面 T 的投影。

3.7\. 投影后，您的点将位于平面内。但是如果假设图像平面与 OXY 平面平行，那么我可以建议在投影后使用原始“深度”作为点。

所以从几何的角度来看，根本不使用远平面是可能的。也根本不使用 [-1,1]^3 模型。

ps 我不知道如何以正确的方式输入乳胶公式，它们将被渲染。

# azure - 在 Azure 中进行数据同步时出现架构错误

> ID：11949157
> 
> 赞同：1
> 
> 时间：2012-08-14T09:11:15.870
> 
> 标签：azure, azure-sql-database, azure-data-sync

1.  我完成了制作 Azure 集线器和安装 Client Agent 和 Database 的设置。

2.  然后定义数据集。那时无论我选择什么数据库并单击获取最新架构，都会出现错误。错误是

    > 获取架构请求需要很长时间或失败。

3.  检查日志时，它说如下：

> 获取数据库的架构信息失败，出现异常“已经有一个打开的 DataReader 与此命令关联，必须先关闭它。有关更多信息，请向客户支持提供跟踪 ID 'xxxx'。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:52:44.710

当前版本在同步组中最多有 500 个表。此外，表格列表的下拉列表也仅限于此相同的限制。

这是一个快速的解决方法：

编写要同步的表的脚本

创建一个新的临时数据库并运行脚本以创建要同步的表

注册并将新的临时数据库添加为同步组的成员

使用新的临时数据库选择要同步的表

添加要与之同步的所有其他数据库（本地数据库和中心数据库）

配置完成后，从同步组中删除临时数据库。

# regex - javascript 正则表达式窗口参数

> ID：11949159
> 
> 赞同：0
> 
> 时间：2012-08-14T09:11:25.933
> 
> 标签：regex

需要正则表达式的帮助

```
var s = "left=123,top=345,width=123, height= 34, center=yes, help=no,resizable=yes, status=now"; 
```

需要获取所有参数（名称 -> 值）

试过这种方式`/(\w+)\s?=(\S+)[\s|,]/`

结果：

```
array(3) {
  [0] =>
  array(3) {
    [0] =>
    string(28) "left=123,top=345,width=123, "
    [1] =>
    string(12) "center=yes, "
    [2] =>
    string(23) "help=no,resizable=yes, "
  }
  [1] =>
  array(3) {
    [0] =>
    string(4) "left"
    [1] =>
    string(6) "center"
    [2] =>
    string(4) "help"
  }
  [2] =>
  array(3) {
    [0] =>
    string(22) "123,top=345,width=123,"
    [1] =>
    string(4) "yes,"
    [2] =>
    string(17) "no,resizable=yes,"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:14:21.550

试试这个：

```
/(\w+)\s*=\s*([^,\s]*)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:15:16.693

试试这个：

```
([\w\d]+)\s*=\s*([\w\d]+) 
```

我假设参数和值都可能只包含字母和数字。您可以通过编写以下内容来选择更加宽容：

```
([^=\s,]+)\s*=\s*([^=\s,]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:44:25.217

我尝试使用拆分方法，但不知道它是否好。欢迎评论。

```
var s = "left=123,top=345,width=123, height= 34, center=yes, help=no,resizable=yes, status=now";
var params = s.replace(/\s*,\s*/g,',').replace(/\s*=\s*/g,'=').split(',');

var arg_array = {};

for(var n = 0, len=params.length; n < len; n++) {
    var arg = params[n].split("=");
    arg_array[arg[0]] = arg[1];
} 
```

结果（arg_array）：

```
({left:"123", top:"345", width:"123", height:"34", center:"yes", help:"no", resizable:"yes", status:"now"}) 
```

# python - 无法在 ubuntu 12.04 64 位上安装 JPype

> ID：11949160
> 
> 赞同：1
> 
> 时间：2012-08-14T09:11:26.760
> 
> 标签：python, installation, jpype

好吧，我按照[这里](http://hep.phys.utk.edu/BRM_Interface/index.php/Installing_JPype)的说明进行操作，但是在运行 setup.py 时出现编译错误

```
src/native/common/jp_voidtype.cpp: In member function ‘virtual void JPVoidType::setArrayValues(jarray, HostRef*)’:
src/native/common/jp_voidtype.cpp:105:2: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
In file included from src/native/python/jpype_python.cpp:18:0:
src/native/python/include/jpype_python.h:24:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

因此，正如您所看到的，我在前两行中收到了很多已弃用的警告（我没有发布），但是随后出现了一个严重错误 - 缺少 Python.h 文件 - 导致安装失败。

我该如何修复它？我应该把这个文件放在哪里？

注意：我的 JAVA_HOME 正确设置为`/usr/lib/jvm/java-7-oracle/`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T04:01:39.303

命令：

```
sudo apt-get install python-jpype 
```

为我工作。

# linux - 重定向特定目录中程序的结果

> ID：11949176
> 
> 赞同：0
> 
> 时间：2012-08-14T09:12:12.667
> 
> 标签：linux, redirect

我有一个生成目录的程序，而不是在当前目录中创建目录，我想指定一个路径：

```
./program x > directoryfoo 
```

我收到此错误：

```
directoryfoo is a directory. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:43:06.030

I would suggest moving to the directory prior to executing the program:

```
cd direcotoryfoo
$OLDPWD/program x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:14:37.273

使用完全限定的路径来创建输出，例如

```
ls >/home/Myfile.txt 
```

并确保您的用户帐户在目录中具有写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:26:09.717

如果程序创建了一个目录，你不能影响这个目录的创建位置，除了：

*   你修改程序
*   你拦截 mkdir() 系统调用

**编辑**

[这里](http://uu-kk.blogspot.de/2010/12/intercepting-linux-system-calls-part-ii.html)介绍了如何使用自制库拦截系统调用，您可以轻松找到其他示例。如果您不从事编程，我不知道是否有任何现成的工具能够做到这一点。

# python - 如何在 Python 中通过 step 获得随机浮点数

> ID：11949179
> 
> 赞同：7
> 
> 时间：2012-08-14T09:12:35.467
> 
> 标签：python, random, floating-point

仍在试图弄清楚 Python 中是否有一个函数可以通过 step 获取随机浮点值？类似于 randrange(start, stop, step) 但用于浮点数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:15:34.000

```
import random

def randrange_float(start, stop, step):
    return random.randint(0, int((stop - start) / step)) * step + start

randrange_float(2.1, 4.2, 0.3) # returns 2.4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:21:40.453

只需乘以一些适当的常数以获得整数并反转结果的操作。

```
start = 1.5
stop  = 4.5
step  = 0.3
precision = 0.1
f = 1 / precision
random.randrange(start*f, stop*f, step*f)/f 
```

# android - CalendarView 可点击的 Android

> ID：11949183
> 
> 赞同：7
> 
> 时间：2012-08-14T09:12:48.820
> 
> 标签：android, android-layout, android-intent, android-activity, android-calendar

当您单击 CalendarView 中的日期时，我正在尝试开始一项新活动，但我的活动似乎没有触发。我已将 clickable 设置为 true 并指定了 onclick（均在 xml 中）

这是xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

     <CalendarView
     android:id="@+id/calendarView1"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:clickable="true"      
     android:onClick="CalendarClick" />

     </RelativeLayout> 
```

这是我的日历活动代码：

```
 public class CalendarActivity extends Activity 
    {

      @Override
      public void onCreate(Bundle savedInstanceState) 
      {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_calendar);
      }

     @Override
     public boolean onCreateOptionsMenu(Menu menu) 
     {
      getMenuInflater().inflate(R.menu.activity_calendar, menu);
      return true;
     }

     public void CalendarClick(View view)
     {
      Intent myIntent = new Intent(CalendarActivity.this, MainActivity.class);
      CalendarActivity.this.startActivity(myIntent);
     }      
  } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T11:33:58.490

这工作正常......

```
 public class MyActivity extends Activity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.newact);
        CalendarView calendarView=(CalendarView) findViewById(R.id.calendarView1);
        calendarView.setOnDateChangeListener(new OnDateChangeListener() {

            @Override
            public void onSelectedDayChange(CalendarView view, int year, int month,
                    int dayOfMonth) {
                 Toast.makeText(getApplicationContext(), ""+dayOfMonth, 0).show();// TODO Auto-generated method stub

            }
        });
    } 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <CalendarView
        android:id="@+id/calendarView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"  
        />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:03:46.403

使用它可以知道单击了哪个日期

```
CalendarView calendarView=(CalendarView) findViewById(R.id.calendarView1);
    calendarView.setOnDateChangeListener(new OnDateChangeListener() {

        @Override
        public void onSelectedDayChange(CalendarView view, int year, int month,
                int dayOfMonth) {
             Toast.makeText(getApplicationContext(), ""+dayOfMonth, 0).show();// TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T15:44:30.323

如果您想单击已选择的日期，OnGlobalLayoutListener 将起到作用。

```
calendarView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener(){
            @Override
            public void onGlobalLayout()
            {
            //your code here
            }
        }); 
```

# javascript - 使用 facebook api 获取专辑封面

> ID：11949188
> 
> 赞同：2
> 
> 时间：2012-08-14T09:13:15.733
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk, asynccallback

我正在尝试通过 JavaScript 和 Graph API 从 facebook 获取专辑列表。我这样做是这样的：

```
FB.api('/me/albums', function(response){
    //
}); 
```

专辑封面作为照片 ID 返回，而不是我可以插入 html 的网址。所以，我需要在第二步中获取一个网址。但是，通过应用程序设计，我以后无法获取 url 并插入图像。我需要返回一个带有专辑属性（id、name、cover url）的完整数据对象。我的最后一次尝试如下：

```
FB.api('/me/albums', { fields : 'id,name,count,cover_photo' }, function(response){

    if (!response || response.error) {
        callback.call(false);
        return;
    };

    var parsed = $(response.data).map(function(){

        if (this.count > 0) {

            var result = {
                aid : this.id,
                title : this.name,
                cover : this.cover_photo
            };

            return result;
        };
    });

    for (var i = 0; i < parsed.length; i++) {

        (function(i){

            FB.api('/' + parsed[i].cover, { type : 'album' }, function(response){
                parsed[i].thumb = response.picture;
            });

        })(i);

    };

    callback.call(parsed);
}); 
```

问题是循环没有等待覆盖查询并继续前进，使返回对象没有覆盖网址。我认为这并不难做到，但我找不到足够长的解决方案。欢迎任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:16:52.680

```
window.getAlbums = function() {
FB.api({
     method: 'fql.multiquery',
     queries: {
        query1: 'select aid,name,link,photo_count,cover_object_id from album where owner = me()',
        query2: 'SELECT pid,src FROM photo WHERE object_id  IN (SELECT cover_object_id FROM #query1)'
     }
    },
    function(response) {
        var parsed = new Array();
        $(response[0].fql_result_set).each(function(index,value){
                var result = {
            aid : value.aid,
            title : value.name,
            cover : response[1].fql_result_set[index].src,
                            link :value.link
        };
                parsed.push(result);
        })
    getdata(parsed);
}); 
```

};

使用添加了您的专辑详细信息

```
function getdata(data){

$(data).each(function(index,value){
    // console.log(value.aid + ' - '+ value.cover+ ' - '+ value.title );
    $("#fb_albumb").append('<h3>'+ value.title +'</h3><a href="'+ value.link  +'" target="_blank" ><img src="'+ value.cover +'" title="'+ value.title +'" /></a><br/>');
}) 
```

}

HTML

```
<fb:login-button scope="user_photos" onlogin="getAlbums()">Grant Permissions to Allow access to Photos and Albums</fb:login-button> 
```

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:31:57.563

> 问题是循环没有等待覆盖查询并继续前进，使返回对象没有覆盖网址。

当然，因为 FB.api 是一个*异步*方法。

> 我认为这并不难做到，但我找不到足够长的解决方案。

您还必须对循环中的第二个 FB.api 调用使用回调函数，并在其中实现一个计数器——当该计数器显示所有请求都已完成时，*您*可以将数据传递到其他地方（或者在那个函数中直接使用它，因为“返回”它不起作用——因为该方法是异步的）。

最好立即使用 FQL，因为您可以将必要的数据“连接”在一起，一次调用即可获得所有数据；像 fe 这样的多查询

```
{
  "q1" : "SELECT aid, name, cover_object_id FROM album WHERE owner = me()",
  "q2" : "SELECT aid, src_big FROM photo WHERE object_id IN
                 (SELECT cover_object_id FROM #q1)"
} 
```

（[在 Graph API 资源管理器中测试此查询。](https://developers.facebook.com/tools/explorer?fql=%7B%20%22q1%22%20%3A%20%22SELECT%20aid%2C%20name%2C%20cover_object_id%20FROM%20album%20WHERE%20owner%20%3D%20me%28%29%22%2C%20%22q2%22%20%3A%20%22SELECT%20aid%2C%20src_big%20FROM%20photo%20WHERE%20object_id%20IN%20%28SELECT%20cover_object_id%20FROM%20%23q1%29%22%20%7D#q1%29%22%20%7D)）

# javascript - Javascript - 从当前日期计算上个月

> ID：11949191
> 
> 赞同：2
> 
> 时间：2012-08-14T09:13:19.633
> 
> 标签：javascript

我有一个下面的 JS，我在其中获取用户允许从后端脚本输入的最大日期：

```
var max_date = new Date(pdate + " " + ptime); 
```

其中 pdate 和 ptime 是从脚本中获取的。

现在我需要将最小日期设置为比 max_date 少 1 个月

```
if (max_date.getMonth() == 0)
subtractyear = 1;
var min_date = new Date(Date.UTC(max_date.getFullYear() - subtractyear,max_date.getMonth() - 1,max_date.getDate(),max_date.getHours(),0,0)); 
```

我的问题是，如果 max_date 是 3 月 31 日 - 那么 min_date 是否会滚动到 2 月 28 日或 2 月 29 日或 2 月 31 日或 2 月 30 日？

如果形成的日期不正确 - 比如 2 月 30 日，我该如何纠正？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T09:24:41.947

简单的 1 月份的主题将获得一个有效的日期——`setMonth`方法永远不会返回一个无效的`Date`对象（与`setDate`,`setYear`和`Date`构造函数相同）：

```
var date = new Date(2012, 02, 31); // 2012-03-31
date.setMonth(date.getMonth() - 1); // This gets 2012-03-02 
```

我不太清楚您期望的日期**是上个月的最后一天**还是**一个月前的一天**？

# android - 包装和填充父布局android

> ID：11949192
> 
> 赞同：0
> 
> 时间：2012-08-14T09:13:24.373
> 
> 标签：android, android-layout

我的布局有 3 个视图（垂直）：View1、View2、View3。

我希望根视图的宽度是 View1、View2 和 View3 的最大宽度。但其他视图的宽度（不是最大宽度）为`fill parent`. 怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:12:51.847

将根视图宽度设置为 wrap_content。它应该适合你。

# html - (html/css) 全角页眉/页脚需要帮助：白边距/所有 3 边的空间

> ID：11949196
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:13:29.850
> 
> 标签：html, css, header, margin, footer

对于任何想要构建具有全宽页眉和/或页脚的简单 html 页面的相关业余爱好者/初学者来说，这是一个很有帮助的问题。

我是如此业余，并试图帮助朋友以零预算建立一个网站。

我正在为此使用 Kompozer/NVU，以防与答案相关。

当您听到/看到我是如何做到这一点时，请不要畏缩，不知道我冒犯了多少 html 或 css 神 ;-) 我的问题也将是简单的英语，很少或没有适当的术语......你一直警告。

[mods注意：我也敢于绕过你的垃圾邮件保护新手规则，最多2个链接，因为我缺乏程序员语言，一个链接说了一千个字来帮助澄清我的问题，因此我希望这对每个人来说都可以益处。没有垃圾邮件，保证！]

我的具体目标：

我希望我的页眉和页脚（在此页面上： http: [//abchealth.info/doc-mike-special/test/](http://abchealth.info/doc-mike-special/test/)）

1.  粘/总是在底部
2.  周围有 0 个边距/空白

最好的

1.  ~760-960px 内容区域始终居中
2.  除非小于内容区域，否则在未最大化的浏览器中不会出现滚动条。

（我知道 3&4 [哦，第二组 1/2，这个编辑正在编辑我......] 是单独的问题，所以不需要解决它们来完成回复，但似乎它们会成对出现很多人，所以为什么不尝试将它放在一个地方......）

我的问题：

好吧，简而言之，目前情况并非如此。

页眉和页脚是简单的表格（所有 0px 边距、填充等），我目前的研究表明

1.  这是一种过时/愚蠢的方式（我应该在身体外使用CSS框？）和
2.  它周围的空白不是来自网站，而是实际的“父”，即浏览器。

我学到了什么/尝试了什么

我经历了几个小时的研究和尝试，但事实证明，如果你知道正确的关键字，谷歌和 stackoverflow 会更好地工作......我知道，这很令人震惊。

我似乎找到的最合适的教程是 [http://www.sitepoint.com/css-extend-full-width-bars/#fbid=5AozZvdpZOs](http://www.sitepoint.com/css-extend-full-width-bars/#fbid=5AozZvdpZOs)，

但我什至无法遵循这些简单的指示，因为它们似乎假设了我显然缺乏的非常基本的理解。

我的跟随看起来像这样：

abchealth.info/testx/

页眉解决方案运行良好，但我使用 CSS body 标签作为页面背景图像，所以这不是我的选择，我需要另一种方法来做到这一点（与页脚相同？）。

页脚我可能做对了，也可能做错了，我什至不知道，我只知道我现在无法让它看起来像我想要的那样/为页脚添加一个水平重复的图像并让它看起来像我的页面链接到上面（只是没有空白/居中/没有不必要的滚动条）。

什么对我最有帮助

您的回答越“通俗易懂”——或者甚至更好地直接复制/粘贴到这里，将这些设置用于那个 CSS 标记有点东西——我就越有可能不必再提出一个更愚蠢的问题......

我希望我的问题没有冒犯任何人，如果我这样做了，你不应该读到这么远，无论如何我仍然爱你:-)

如果它可以帮助/节省您 30 秒，则 css 文件是上面链接到的“test”文件夹中的 main.css（不是“testx”）。

非常感谢您的帮助！

迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:30:01.290

首先，您[真的不应该使用表格](http://webdesign.about.com/od/layout/a/aa111102a.htm)来控制您的页面布局。表格可以很好地显示表格数据，但肯定不是网站。我已经将[这个 jsFiddle 示例](http://jsfiddle.net/qVu2P/1/)放在一起，它应该让您开始了解如何“某种”实现您正在寻找的东西。我会尽力回答你的任何问题。

**标记**

```
<div id="mastercontainer">
    <div id="header">This is the header</div>
    <div id="content">
        <div id="innercontentmiddle">
            <p>This is some content</p>
            <p>This is some content</p>
            <p>This is some content</p>
            <p>This is some content</p>
        </div>
    </div>
    <div id="footerclear"></div>
</div>
<div id="footer">This is the footer</div> 
```

**CSS**

```
html, body {
    height: 100%;
    min-height: 100%;
    color: #fff;
}

div#mastercontainer {
    width: 100%;
    height: 100%;
    min-height: 100%;
    margin-bottom: -100px;
}

div#header {
    background-color: #f00;
    height: 100px;
}

div#content {
}

div#innercontentmiddle {
    background-color: #0f0;
    margin: 0 auto;
    width: 300px;
}

div#footerclear {
}

div#footer {
    background-color: #00f;
    height: 100px;
}​ 
```

基本上我们在这里所说的是，我们希望我们的主容器是可用空间的 100% 的宽度和高度。它包括一个页眉和内容以及一个**footerclear**元素（这是为了防止内容从您的**内容**流过您的页脚，因此在此设置一个合理的高度）。出**页脚**元素位于主容器之外，并在主容器中 100 像素（以防止它在没有足够的内容来保证它时显示在页面之外）。**mastercontainer**上的 margin-bottom必须始终与**页脚**的高度相同才能正常工作。

为了进一步阅读，我一直很喜欢[这篇](http://www.htmldog.com/guides/cssadvanced/layout/)关于布局的文章。

**编辑 1**

如果您的页眉和页脚仍然有间距，那么很可能是您的 BODY 元素边距/填充。在您的 CSS 中尝试以下操作：

```
html, body {
    height: 100%;
    min-height: 100%;
    color: #fff;
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:36:38.390

不是 100% 肯定，但我认为这可能是您所要求的：

[http://jsfiddle.net/gHWVe/5/](http://jsfiddle.net/gHWVe/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:41:18.307

我的解决方案与 Delan 的类似，但我现在已经编写了所有代码，所以无论如何我都会发布它：http: [//jsfiddle.net/EB8GP/](http://jsfiddle.net/EB8GP/)

编辑：嗯，他似乎删除了他的答案。

**HTML**

```
<header>
    <h1>MySite</h1>
</header>
<section>
    <h2>Content</h2>
    <p>Lorem ipsum dolor</p>
    <p>Lorem ipsum dolor</p>
    <p>Lorem ipsum dolor</p>
    <p>Lorem ipsum dolor</p>
</section>
<footer>
    <p>Copyright &copy; 2012</p>
</footer>​ 
```

**CSS**

```
header,
footer {
    background: #06c;
    text-align: center;

    /* Makes the header and footer stick to the top */
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
}
footer {
    /* We want the footer in the bottom */
    top: auto;
    bottom: 0;
}
section {
    background: #eee;

    /* Centers the content area (margin: 0 auto) */
    width: 70%;
    margin: 0 auto;

    /* Here's the tricky bit, the margin-top needs to be exactly the height of the header (which may not be known) and the margin-bottom needs to be the height of the footer - I'm using an arbitrary number here and setting it properly with JS */
    margin-top: 15px;
    margin-bottom: 15px;
}
​ 
```

除非您为页眉和页脚都设置了固定高度，否则您需要使用 JS 计算它们的高度并相应地更改内容区域的边距：

```
$(function () {
    var headerHeight = $('header').outerHeight();
    var footerHeight = $('footer').outerHeight();

    $('section').css({
        marginTop:    headerHeight + 'px', 
        marginBottom: footerHeight + 'px', 
    });
});​ 
```

Edit2：在一个大型站点（不是 JSFiddle 示例）上，我会给出这些元素 ID 和样式以及脚本，因为您可能会使用多个`header`,`footer`和`section`.

# python - PYGame - ImportError：没有名为 locals Raspberry Pi 的模块

> ID：11949200
> 
> 赞同：0
> 
> 时间：2012-08-14T09:13:45.167
> 
> 标签：python, pygame, raspberry-pi

我有以下代码：

```
 #!/usr/bin/python
 # -*- coding: iso-8859-15 -*-

 import pygame, random
 from pygame.locals import *
 pygame.init()
 clock = pygame.time.Clock()

 and so on 
```

该应用程序看起来一切正常，但是当我编译代码时出现以下错误：

```
 Traceback (most recent call last):
 File "fish.py", line 4, in <module>
import pygame, random
 File "/home/pi/pygame/pygame.py", line 2, in <module>
ImportError: No module named locals

------------------
(program exited with code: 1)
Press return to continue 
```

任何人都可以帮忙吗？我是 Python 和 Linux 的新手。

我做了以下事情：

```
 pi@raspberrypi:~$ sudo apt-get install python-pygame
 Reading package lists... Done
 Building dependency tree       
 Reading state information... Done
 python-pygame is already the newest version.
 0 upgraded, 0 newly installed, 0 to remove and 40 not upgraded.
 pi@raspberrypi:~$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:23:26.017

您的问题是您有一个名为 的文件`pygame.py`，或者是一个名为`pygame.pyc`.

* * *

调用`import pygame`有效，但它不会导入 pygame，而是导入那个文件。

并且由于您的文件找不到`locals`该文件中命名的模块，因此会引发错误。

因此，只需将文件重命名为`pygame.py`要导入的模块以外的任何内容，或者，如果有 `pygame.pyc`字节码文件，请将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:35:39.843

尝试使用 IDLE 而不是 IDLE 3。它对我有用，我遇到了与上面显示的完全相同的问题。

# c# - 使用asp.net mvc3在nHibernate中创建动态表

> ID：11949201
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:13:45.853
> 
> 标签：c#, asp.net-mvc-3, nhibernate

我使用带有 asp.net mvc3 的实体框架来创建结果发布站点。由于此类站点需要在运行时以编程方式生成表。例如，我需要添加一个带有标记的科目表；并且用户决定插入哪个字段和字段类型，就像 phpmyadmin 在创建新表时所做的那样。那么是否有可能通过 nHibernate 来做到这一点，因为我听说实体框架在这种情况下缺乏？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:32:40.340

您可以使用`Table`and`Driver`类执行此操作，但每次添加新表/实体时都必须重建 sessionfactory。像这样的东西：

```
var dialect = Dialect.GetDialect(properties);
var table = new Table();
// add columns

var sql = table.GetSqlCreatestring(dialect);

using (var sf = emptyConfig.BuildSessionfactory())
{
    session.CreateSqlQuery(sql).ExecuteUpdate();
} 
```

# javascript - 复制 3D 阵列

> ID：11949209
> 
> 赞同：0
> 
> 时间：2012-08-14T09:13:56.527
> 
> 标签：javascript, arrays, copy

我有一个 3D 数组，我想将它的另一个副本复制到另一个数组中。

直接分配会将字符串返回到新数组，而不是 3D 数组。

```
foo = [] //3D array; 
boo = foo //boo becomes a string 
```

知道如何做到这一点吗？

编辑：这是代码

**背景.js**

```
function onRequest(request, sender, sendResponse) {
localStorage = request.mes; // mes is an array
}; 
chrome.extension.onMessage.addListener(onRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:21:11.577

你可能会使用克隆。试试这个，

```
var a = [1,2,[3,4,[5,6]]];

Array.prototype.clone = function() {
    var arr = [];
    for( var i = 0; i < this.length; i++ ) {
//      if( this[i].constructor == this.constructor ) {
        if( this[i].clone ) {
            //recursion
            arr[i] = this[i].clone();
            break;
        }
        arr[i] = this[i];
    }
    return arr;
}

var b = a.clone()

console.log(a);
console.log(b);

b[2][0] = 'a';

console.log(a);
console.log(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:25:18.720

我发现的解决方案依赖于使用 jQuery，希望这不会成为问题？

```
var a1 = ['test', ['a','b',1], [[1,2,3],[4,5,6]]];
console.log(a1);
var a2 = jQuery.extend(true, {}, a1);
a1[0] = 'test - changed';
console.log(a1);
console.log(a2); 
```

小提琴：http: [//jsfiddle.net/gRoberts/AhKNx/](http://jsfiddle.net/gRoberts/AhKNx/)

简单的设置`var a2 = a1;`只是创建一个对原始对象的引用，导致`a2[0]`被更改为`test - changed`;

查看您的控制台（Firefox/Chrome 中的 F12）以查看我的小提琴的输出；）

希望有帮助吗？

加文

# c# - 基于 3 个表的 DropDown 依赖

> ID：11949210
> 
> 赞同：0
> 
> 时间：2012-08-14T09:13:58.190
> 
> 标签：c#, asp.net

我需要根据以前的下拉列表值获取值。但我很困惑，因为有 3 个表是依赖的。

```
dbo.Client
ClientID(PK) | ClientName

dbo.Client_POC_Bridge
ClientID(FK) | POCID (FK)

dbo.PointOfContact
POCID(PK) | FName | LName 
```

我有 2 个下拉列表：

DropDownList1：我已经绑定了CLient的表信息

```
DropDownList2: I need FName and Lname from dbo.PointOfContact 
```

到目前为止，这是代码，但它不起作用..

```
protected void DropDownList4_SelectedIndexChanged(object sender, EventArgs e)
        {

            DropDownList6.Items.Clear();
            DropDownList6.Items.Add(new ListItem("--Select Point Of Contact--", ""));
            DropDownList6.AppendDataBoundItems = true;

            String var = System.Configuration.ConfigurationManager.ConnectionStrings["KKSTechConnectionString"].ConnectionString;

            String strQuery = "select FirstName, POCID from PointOfCContact " +
                               "where ClientID=@ClientID";
            SqlConnection con = new SqlConnection(var);
            SqlCommand cmd = new SqlCommand();
            cmd.Parameters.AddWithValue("@ClientID",
                DropDownList3.SelectedItem.Value);
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = strQuery;
            cmd.Connection = con;
            try
            {
                con.Open();
                DropDownList6.DataSource = cmd.ExecuteReader();
                DropDownList6.DataTextField = "FirstName";
                DropDownList6.DataValueField = "POCID";
                DropDownList6.DataBind();
                if (DropDownList6.Items.Count > 1)
                {
                    DropDownList6.Enabled = true;
                }
                else
                {
                    DropDownList6.Enabled = false;

                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                con.Close();
                con.Dispose();
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:22:41.170

更改以下行...使用内部联接获取值...

```
String strQuery ="select pof.FirstName, pof.POCID from PointOfCContact pof Inner Join Client_POC_Bridge cpb On pof.POCID =cpb.POCID where cpb.ClientID=@ClientID"; 
```

# javascript - JavaScript 基本变量返回用户输入的值

> ID：11949212
> 
> 赞同：0
> 
> 时间：2012-08-14T09:14:02.953
> 
> 标签：javascript

我想尝试返回用户输入的值。例如，我要他/她的名字，然后他/她会在文本框中输入它。应该显示文本框的值。我将如何做到这一点？

在Java中，我是这样做的：

```
Scanner in = new Scanner(System.in);
String uname;

System.out.print("Enter your name: ");
uname = in.nextLine();
System.out.println("Hello " + uname); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:16:41.280

你试过什么了？听起来您想使用 JavaScript 提示符...这是一个粗略的示例，这里有一些您应该阅读的信息... [https://developer.mozilla.org/en-US/docs/DOM/window.prompt](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to demonstrate....</p>

<button onclick="myFunction()">Try it</button>

<input type="text" id="demo"></p>

<script type="text/javascript">
function myFunction(){
var x;

var name=prompt("Please enter your name","Bob Mould"); // note that you can put a default value...

if (name!=null){
  x="Hello " + name + "!";
  document.getElementById("demo").value=x;
  }
}
</script>

</body> 
```

****更新 ******

 **从下面的评论“*不，我想做的是从这个`<input type="text" name="uname" /`>中获取用户的名字，然后当点击按钮时，它应该显示在另一个文本框中。* ”这与原始问题不同，这就是你想要的但是您最初的问题具有误导性...

尝试这个...

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button</p>

<input type="text" id="uname" />

<input type="text" id="demo" />

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">
function myFunction(){
  if(document.getElementById("uname").value.length > 0){
    document.getElementById("demo").value = document.getElementById("uname").value;
  }else{
    alert("please enter a value");
  }
}
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:16:15.057

最简单的方法是使用`prompt`方法：

```
var name = window.prompt('Please enter your name:'); 
```

然后用户会看到一个弹出窗口并在文本框中输入他/她的名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:16:55.027

```
<input type="text" onclick="returnValue(this)" />

function returnValue(element)
{
  alert(this.value);
} 
```

简单但有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:17:08.177

如果您想通过提示从用户那里获得输入，请使用此功能，

```
var name = prompt("Please enter your name");
alert(name) 
```

变量“名称”将返回用户给出的输入**

# c# - C# 将字符串转换为日期时间

> ID：11949217
> 
> 赞同：0
> 
> 时间：2012-08-14T09:14:06.400
> 
> 标签：c#, datetime, converter

我有字符串 token[5] = Aug 和字符串 token[6]=1（见图片![令牌](../Images/142f28f1de6a1136b241e8458002fb14.png)）

我想转换为日期时间。

我尝试：

```
DateTime DateCreated = DateTime.ParseExact(tokens[5] + tokens[6], "MM-dd", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T09:16:29.987

有几个问题：

*   您在构建的字符串中缺少预期的连字符“-” `tokens[5] + tokens[6]`。
*   您`MM`会期望一个两位数的月份，用于三个字母的速记月份`MMM`。
*   最后，您`dd`期望两位数的日期（因此在您的情况下，是 01 而不是 1）。用于`d`取一位数或两位数的天数。

说了这么多，你实际上并不*需要*连字符：

```
var dateCreated = DateTime.ParseExact(tokens[5] + tokens[6], "MMMd", CultureInfo.InvariantCulture); 
```

有关更多选项，请参阅此 MSDN 条目：

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# drupal - 用 HTML 包装的“JSON 数据文档”输出

> ID：11949218
> 
> 赞同：1
> 
> 时间：2012-08-14T09:14:10.663
> 
> 标签：drupal, drupal-views

我正在关注本教程[http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile](http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile) 它描述了如何使用 JSON 输出创建视图。但是在第 19 步，我将我的 JSON 用 HTML 包裹起来，以便显示为一篇文章。顺便说一句，它与“XML 数据文档”一起工作得很好，我得到了我的 XML，没有任何意外的 HTML 包装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:16:10.830

视图设置中有一个名为“视图 API 模式”的复选框，它应该被取消选中： ![在此处输入图像描述](../Images/00002bd0c5f4e7258acb0c2f3829af19.png)

# ruby-on-rails-3 - Rails/Rspec 测试因管道破裂而失败...？

> ID：11949219
> 
> 赞同：3
> 
> 时间：2012-08-14T09:14:19.967
> 
> 标签：ruby-on-rails-3, rspec

我最近更新了我的应用程序中的一些 gem（不幸的是我没有一一进行），现在我的所有测试都失败了，并出现以下错误：

```
An error occurred in an after hook
  Errno::EPIPE: Broken pipe
  occurred at /Users/brandon/.rvm/gems/ruby-1.9.3-p194@xxx/gems/capybara-webkit-0.12.1/lib/capybara/driver/webkit/connection.rb:21:in `write' 
```

我在用：

*   导轨 3.2.7/3.2.8
*   rspec
*   叉子
*   postgres
*   工厂女工
*   内存缓存

显然还有很多其他...我可以根据需要提供更多详细信息（我不确定要发布什么）

我也试过：

```
RAILS_ENV=test rspec spec 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-28T08:47:55.877

尝试`sleep`在每次测试后添加。

我在使用 rspec 进行验收测试时遇到了类似的问题

单独运行时，所有测试都是绿色的。但是当我尝试一次运行所有测试时，它们会在中间的某个地方中断

在每次测试后添加`sleep`对我有帮助（但我不知道*为什么*）：

```
RSpec.configure do |config|
  ...
  config.after(:each, js: true) { sleep 0.1 }
end 
```

# php - PHP - 正则表达式 - 特定字符之前的数字匹配

> ID：11949227
> 
> 赞同：1
> 
> 时间：2012-08-14T09:14:40.970
> 
> 标签：php, regex

我有这种字符串：

> 1234567890（没有特定字符数的数字）-（减号用作分隔符）文本

如何在**-**符号之前查看和提取数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:16:54.460

使用这样的正则表达式：

```
preg_match('/^(\d+)/', '123-something', $match); 
```

这将捕获从字符串开头到第一个非十进制数字的所有十进制数字，结果将在`$match`变量中。

```
if (preg_match('/^(\d+)/', $string, $match)) {
    $number = $match[1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:25:15.860

采用`preg_split()`

```
$bla=preg_split('#(?<=\d)-(?=[a-z])#i', "1234567890-asdlkj");
echo $bla[0]; 
```

给`1234567890`

如果你想要文本字段，你可以使用

```
echo $bla[1]; 
```

给`asdlkj`

# ios - Dropbox iOS API - 我如何结束会话？

> ID：11949231
> 
> 赞同：0
> 
> 时间：2012-08-14T09:14:50.503
> 
> 标签：ios, xcode, dropbox, dropbox-api

我已经使用他们的 iOS API 成功连接到 Dropbox，我现在希望能够通过 IBAction 断开与 Dropbox 的连接，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:45:06.203

使用 IBAction 设置一个按钮，然后尝试调用`deleteCredentials`位于 DBKeychain.h 和`unlinkAll`. 从未使用过 Dropbox SDK，但这看起来应该断开您的连接。

# ckeditor - 使用 ckfinder 时出错

> ID：11949233
> 
> 赞同：0
> 
> 时间：2012-08-14T09:14:58.863
> 
> 标签：ckeditor, ckfinder

我在我的 C# Web 项目中使用 CkEditor 和 CKFinder。但是当我在我的代码中使用 ckfinder 时，我得到一个错误：

命名空间“System.Web.UI.Design”中不存在类型或命名空间名称“ControlDesigner”（您是否缺少程序集引用？）

当我将 System.Design 添加到我的参考文献时，这个错误已经解决，但现在我得到了一些错误，例如：

重复的“AssemblyTitle”属性

我需要使用 ckeditor 和 ckfinder，我只使用 Web 项目而不是 Web 应用程序，任何人都可以帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:57:35.603

我找到了一个答案，这个问题是因为 C# web 项目的属性中有一个 AssemblyInfo。我从 CKFinder 文件夹中删除了所有 AssemblyInfo，问题解决了。

但我不确定这种方式是对还是错......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:04:30.147

从项目中排除所有 CkFinder 程序集，然后您可以运行项目。我试过并解决了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T23:47:53.040

正确的方法是从ckfinder文件夹（“_samples”和“_source”）中删除以'_'字符开头的文件夹，因为它们是演示和开发文件夹。这些文件夹对您没有任何实用程序。

# java - Android：问题图像分辨率

> ID：11949234
> 
> 赞同：2
> 
> 时间：2012-08-14T09:15:03.327
> 
> 标签：java, android, imageview, resolution

在设备中使用高分辨率图像时出现问题。

```
 imageview a;
InputStream ims = getAssets().open("sam.png");//sam.png=520*1400 device=320*480 or 480*800
Drawable d=Drawable.createFromStream(ims, null);
a.setLayoutParams(new        LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
a.setImageDrawable(d); 
```

通过使用上面的代码图像在下一个内容的顶部和底部留下空间，或者如果我通过提供固定像素来缩小图像，它会在其大小上获得模糊图像。无论如何要解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:20:11.700

尝试创建`Bitmap`而不是`Drawable`：

```
Bitmap bmp = BitmapFactory.decodeStream(ims);
a.setImageBitmap(bmp); 
```

看起来Android根据屏幕密度做了一些可绘制的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:44:05.270

希望以下解决方案有所帮助。您可以制作固定大小的 imageView 并将该 imageView 的宽度和高度传递给`calculateInSampleSize`方法。根据图像大小，它将决定是否对图像进行下采样。

```
public Bitmap getBitmap(Context context, final String imagePath)
{
    AssetManager assetManager = context.getAssets();
    InputStream inputStream = null;
    Bitmap bitmap = null;
    try
    {
        inputStream = assetManager.open(imagePath);         

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = true;
        options.inJustDecodeBounds = true;

        // First decode with inJustDecodeBounds=true to check dimensions
        bitmap = BitmapFactory.decodeStream(inputStream);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, requiredWidth, requiredHeight);

        options.inJustDecodeBounds = false;

        bitmap = BitmapFactory.decodeStream(inputStream);
    }
    catch(Exception exception) 
    {
        exception.printStackTrace();
        bitmap = null;
    }

    return bitmap;
}

public int calculateInSampleSize(BitmapFactory.Options options, final int requiredWidth, final int requiredHeight) 
{
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if(height > requiredHeight || width > requiredWidth) 
    {
        if(width > height) 
        {
            inSampleSize = Math.round((float)height / (float)requiredHeight);
        } 
        else 
        {
            inSampleSize = Math.round((float)width / (float)requiredWidth);
        }
    }

    return inSampleSize;
} 
```

# javascript - 使用 JavaScript 模拟 iOS 的“下一步”按钮行为

> ID：11949235
> 
> 赞同：1
> 
> 时间：2012-08-14T09:15:12.483
> 
> 标签：javascript, jquery, iphone, ios, ipad

是否可以使用 JavaScript 模拟 iOS 的“下一个”按钮行为（自动聚焦下一个字段）？

当我触发下一个元素的焦点时，键盘不会出现。这是一个简单的[例子](http://jsfiddle.net/jvqkS/)。

# android - 滚动视图没有滚动到线性布局的顶部

> ID：11949236
> 
> 赞同：4
> 
> 时间：2012-08-14T09:15:14.980
> 
> 标签：android, scrollview

我有一个相当简单的滚动视图，当我向上滚动时，它不会一直滚动到屏幕顶部。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:myapp="http://schemas.android.com/apk/res/com.surreall.matchit"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 

    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:id="@+id/main_layout2"
    >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_marginTop="1dp"
            android:layout_gravity="center" 
            android:id="@+id/board"
            android:layout_weight="6"
            android:baselineAligned="false"

            >     
        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1" 
            >

            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card1"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>

            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card2"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card3"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card4"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>

            </LinearLayout>  
       <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" 
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card5"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>

            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card6"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
           <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card7"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card8"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout> 
       <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_weight="1"
            android:layout_gravity="center" 
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card9"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card10"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card11"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card12"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card13"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card14"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card15"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card16"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
            <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card17"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card18"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card19"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card20"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
            <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card21"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card22"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card23"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card24"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
            <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card25"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card26"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card27"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card28"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
            <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            >
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card29"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card30"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card31"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>
            <com.surreall.logo.SquareButton         
                android:layout_height="fill_parent"
                android:layout_width="0dip"          
                android:layout_weight="1"  >        
                <ImageView
                android:id="@+id/card32"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:scaleType="centerInside"
                android:layout_height="wrap_content"
                android:layout_width="0dp"          
                android:layout_weight="1" 
                android:layout_margin="4dp"
                /> </com.surreall.logo.SquareButton>       
            </LinearLayout>
     </LinearLayout> 
 </ScrollView>
</LinearLayout> 
```

![看起来像这样](../Images/2aedb74b2f756f2c81a89bb89e269d24.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-03T13:16:53.377

嗨，我遇到了同样的问题，经过调查，我找到了解决方案，在您的 XML 代码中，我可以看到您在布局中犯了同样的错误。

问题是您将 ScrollView 子 (LinearLayout) 布局重力设置为中心。删除此行，它应该适合您。

```
android:layout_gravity="center"   //remove this line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:42:42.523

为什么将线性布局父级的高度设置为 0dp。它还应该 wrap_content 只进行更改并再次测试。

```
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  // changed to wrap content
        android:layout_marginTop="1dp"
        android:layout_gravity="center" 
        android:id="@+id/board"
        android:layout_weight="6"
        android:baselineAligned="false"

        > 
```

它应该可以正常工作...好吧，您也可以尝试对父布局进行此更改

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:myapp="http://schemas.android.com/apk/res/com.surreall.matchit"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 

android:orientation="vertical"
android:layout_width="match_content"         // changed to match_parent
android:layout_height="match_parent"         // changed to match parent
android:background="@drawable/background"
android:id="@+id/main_layout2"
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T16:16:09.277

您的布局中有几个问题：删除 topmost `LinearLayout`，`ScrollView`应该只包含一个直接子级`layout_height="match_parent"`，因此如果您想使用权重进行技巧，您需要在一个 LinearLayout 中执行它，该LinearLayout 将是 ScrollView 的单个子级。

# python - 按一天中的时间安排网络测功机的数量

> ID：11949240
> 
> 赞同：15
> 
> 时间：2012-08-14T09:15:27.100
> 
> 标签：python, django, dynamic, heroku

有没有办法使用 Heroku 调度程序在一天中的特定时段启动和停止 web dynos？比如在工作时间2个测功机，晚上只有1个测功机？

我真的很想避免将普通用户/密码凭据放入应用程序本身，因此我正在寻找一种安全的方法来执行此操作（除了每天为每个应用程序手动执行此操作）。直接使用“heroku ps:scale web=2”自然会很好，但据我所知，这是不支持的。

感谢您提前提供任何反馈...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T22:46:27.093

您可以通过创建使用 Heroku API 的脚本来按计划扩展 heroku dynos。然后，您在 Procfile 中创建一个条目，并通过 Heroku Scheduler 插件调用它。就是这样：

首先，您需要将“heroku”python 模块添加到您的`requirements.txt`：

> heroku==0.1.2

接下来，创建一个包含您的 API 密钥的配置变量，以便您的脚本可以使用该 API。

> heroku 配置：添加 HEROKU_API_KEY=your_api_key_string

[您可以在您的 heroku 帐户页面上](https://api.heroku.com/account/)找到您的 API 密钥。

现在您将能够编写一个扩展您的测功机的 python 脚本。这是一个非常基本的脚本，它接受测功机的数量作为命令行参数。

```
import os
import sys

import heroku

"""Scale heroku web processes using the heroku python API."""

# you may want to add better argument processing, use argparse, etc.
dynos = int(sys.argv[1])
cloud = heroku.from_key(os.environ.get('HEROKU_API_KEY'))
app = cloud.apps['your_app_name']

try:
    # you may want to add a maximum dyno check here to prevent costly mistakes ;)
    webproc = app.processes['web']  
    webproc.scale(dynos)

except KeyError:
    # note: scaling to 0 dynos or attempting to scale up if 0 web dynos exist
    # both throw this error. Make sure you have at least one dyno.
    print >> sys.stderr, "Could not scale web processes - are there 0 web dynos running?" 
```

然后您可以在 Heroku Scheduler 网页中定义您的整个任务，或者在您的 Procfile 中定义它并从网页中调用 Procfile 进程名称。我更喜欢后者，因为它可以轻松更新或更改流程，而无需登录 heroku 的网站。

因此，在您的 Procfile 中创建条目：

```
scale_up: python scale.py 2
scale_down: python scale.py 1 
```

然后安排他们：

[![[图片]](../Images/269798276fec64dd0f9b11deb8147c8f.png)](https://i.stack.imgur.com/1r8X6.png)

瞧！您的测功机现在将在一天中的指定时间放大或缩小。

--

请注意，一旦您在调度程序网页上创建了计划任务，您就无法编辑它运行的时间，但如果您创建新任务，您可以设置时间日期，然后删除旧任务。

**注意 2：**如果您尝试缩小到 0 dyno，或者如果您尝试扩大当前存在 0 个 web dyno，heroku python API 似乎会抛出 KeyError。为了避免两者，只是不要缩小到 0 dynos。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:00:57.447

它不是内置在平台中的，但应该很容易通过调度程序和使用您的 API 令牌来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-13T17:12:35.317

现在很容易使用 heroku 插件插件 crontogo [https://elements.heroku.com/addons/crontogo](https://elements.heroku.com/addons/crontogo)

注意：这是一个付费插件，自 2021 年 10 月起仅在美国/欧洲地区可用

参考[https://crontogo.com/blog/how-to-schedule-heroku-cli-commands/](https://crontogo.com/blog/how-to-schedule-heroku-cli-commands/)

设置 2 个作业

**第一份工作“Dyno scale down”：**

cron 表达式：0 18 * * 1-5

命令：heroku dyno:scale web=1:Standard-1X

这项工作将在工作日（周一至周五）下午 6 点运行，并将应用程序缩小到 1 个 Standard-1X dyno。

**第二个工作“Dyno scale up”：**

cron 表达式：0 9 * * 1-5

命令：heroku dyno:scale web=2:Standard-1X

这项工作将在工作日（周一至周五）上午 9 点运行，并将应用程序扩展到 2 个 Standard-1X dynos。

# python - Matplotlib：彩条不能正常工作？

> ID：11949241
> 
> 赞同：3
> 
> 时间：2012-08-14T09:15:29.767
> 
> 标签：python, matplotlib

我正在尝试创建一个与此类似的图，但在彩色方块下方没有字母：

![在此处输入图像描述](../Images/783e8e34cfa4674cb707fe6e308505c4.png)

到目前为止，我已经能够创建：

![在此处输入图像描述](../Images/85d5e290ca8ca87c5c47d2727d77846c.png)

到目前为止，我对此感到非常满意，但我的问题在于彩条。如果你看我图上的最后一个位置（位置 614）。已在该位置上绘制了一张颜色图，颜色条位于其旁边。

如何仅绘制颜色条并将其移动到图形的一侧，以便颜色条更大更清晰。

我的代码是：

```
def plot_solv_acc_graph(self):
    '''
    PLots the average data from the make_solv_access_table function 
    '''

import math
import numpy as np
from pylab import *
from matplotlib import mpl
import matplotlib.pyplot as plt

aa_key = {'ARG':'R', 'HIS':'H', 'LYS':'K', 'ASP':'D', 'GLU':'E', 'SER':'S', 'THR':'T', 'ASN':'N', 'GLN':'Q', 'CYS':'C', 'SEC':'C', 'GLY':'G', 'PRO':'P', 'ALA':'A', 'VAL':'V', 'ILE':'I', 'LEU':'L', 'MET':'M', 'PHE':'F', 'TYR':'Y', 'TRP':'W'}

avg = [93.89, 69.34, 62.14, 33.65, 59.14, 41.73, 22.27, 0.81, 43.57, 5.12, 0.06, 32.58, 18.07, 77.43, 38.97, 83.38, 31.26, 75.33, 68.95, 142.75, 19.71, 0.16, 57.19, 59.74, 0.2, 27.25, 125.09, 116.5, 7.9, 7.49, 131.04, 64.21, 18.45, 62.13, 51.68, 96.93, 80.49, 35.64, 153.67, 28.97, 117.85, 67.19, 4.77, 86.98, 40.65, 56.09, 28.04, 97.77, 25.68, 0.0, 21.36, 47.02, 0.0, 37.21, 66.44, 4.63, 5.51, 43.05, 42.99, 125.41, 100.06, 91.02, 59.16, 32.02, 63.1, 0.58, 5.66, 54.43, 40.13, 67.42, 74.4, 76.45, 105.18, 68.41, 75.86, 74.01, 103.7, 117.79, 90.08, 139.55, 89.3, 136.44, 104.58, 105.68, 42.46, 91.42, 35.22, 93.86, 48.37, 120.37, 66.23, 50.54, 64.71, 41.54, 71.54, 49.17, 60.97, 85.65, 111.92, 51.99, 53.2, 113.7, 126.62, 38.5, 102.27, 116.62, 60.34, 131.57, 78.68, 46.47, 120.32, 90.04, 122.09, 126.92, 72.98, 65.15, 82.23, 20.38, 50.95, 39.32, 20.96, 75.01, 14.44, 88.34, 1.94, 51.8, 2.06, 90.28, 3.36, 64.76, 31.06, 0.51, 29.15, 87.07, 84.27, 65.24, 128.51, 38.39, 94.71, 16.21, 85.0, 31.2, 59.57, 6.18, 33.06, 33.73, 60.79, 61.36, 95.3, 197.35, 26.78, 112.83, 64.85, 131.5, 97.56, 94.93, 79.31, 95.74, 60.12, 89.47, 19.11, 87.26, 16.72, 110.99, 1.96, 33.8, 18.2, 21.86, 13.52, 24.27, 62.86, 31.47, 39.23, 80.43, 38.0, 85.39, 48.59, 136.98, 35.9, 45.6, 4.45, 17.14, 70.42, 34.51, 124.57, 116.16, 66.84, 23.42, 109.71, 58.46, 6.64, 11.81, 0.2, 43.98, 0.2, 15.75, 2.59, 47.25, 11.7, 30.86, 81.7, 30.13, 104.47, 69.54, 7.08, 67.92, 56.72, 63.09, 47.24, 45.87, 23.58, 0.05, 41.5, 3.43, 72.93, 5.42, 60.21, 1.23, 20.09, 1.81, 39.74, 47.41, 0.08, 3.54, 67.77, 19.85, 26.79, 124.72, 33.09, 78.66, 0.99, 55.68, 13.74, 16.07, 119.38, 93.24, 64.98, 43.75, 107.65, 14.95, 69.54, 3.25, 68.41, 56.43, 16.03, 4.43, 61.51, 24.86, 46.78, 43.31, 87.59, 24.02, 108.74, 15.55, 128.87, 35.05, 31.09, 3.57, 6.79, 40.17, 23.66, 116.78, 131.23, 81.16, 58.18, 3.68, 13.18, 0.0, 28.06, 0.0, 25.68, 3.37, 51.95, 1.15, 24.84, 4.6, 22.33, 33.47, 108.62, 16.1, 49.53, 135.2, 71.43, 5.79, 15.91, 48.61, 13.73, 9.4, 87.11, 63.19, 7.91, 21.25, 94.15, 45.86, 26.36, 80.05, 105.57, 52.3, 51.13, 56.83, 113.51, 92.92, 67.0, 148.45, 35.13, 114.23, 108.02, 94.94, 68.44, 62.22, 31.15, 60.04, 38.47, 22.3, 0.78, 39.35, 4.7, 0.09, 28.1, 17.58, 73.04, 37.55, 83.03, 31.78, 75.43, 69.08, 142.08, 19.87, 0.12, 57.8, 56.07, 0.33, 27.34, 124.44, 98.74, 6.57, 7.63, 126.51, 54.26, 16.13, 62.16, 51.03, 96.26, 78.31, 33.71, 142.46, 25.05, 101.93, 59.35, 5.0, 82.65, 36.26, 52.16, 27.37, 96.5, 24.5, 0.0, 21.25, 46.08, 0.0, 37.11, 62.57, 4.14, 5.19, 40.52, 38.78, 122.3, 97.2, 87.08, 57.43, 31.35, 61.98, 0.47, 5.45, 52.48, 41.73, 61.9, 73.38, 76.32, 104.43, 69.92, 78.78, 76.66, 107.05, 121.75, 91.06, 137.56, 91.2, 135.56, 107.81, 103.62, 41.7, 91.29, 35.24, 95.06, 48.72, 120.38, 65.02, 51.42, 63.83, 42.03, 72.09, 46.49, 58.56, 88.6, 111.84, 51.98, 53.78, 113.33, 126.69, 39.08, 101.86, 118.26, 59.34, 131.83, 79.09, 46.05, 119.72, 88.5, 121.97, 124.3, 72.72, 64.42, 83.82, 21.05, 52.81, 39.94, 21.72, 74.56, 12.92, 83.91, 1.73, 50.29, 1.86, 90.79, 3.81, 63.99, 31.36, 0.57, 29.63, 84.77, 89.53, 63.56, 125.84, 35.8, 92.01, 15.26, 83.0, 30.76, 59.25, 6.29, 34.43, 33.28, 62.53, 61.09, 95.55, 196.45, 27.62, 113.44, 63.2, 129.38, 94.13, 92.39, 78.32, 91.58, 60.28, 89.43, 19.21, 88.07, 16.92, 114.43, 1.85, 41.76, 18.49, 24.06, 14.87, 26.1, 62.6, 33.32, 47.49, 87.78, 43.66, 89.01, 50.82, 137.19, 36.07, 45.04, 4.74, 17.27, 70.76, 34.06, 122.94, 115.74, 67.75, 22.31, 109.71, 58.98, 6.2, 11.94, 0.17, 44.87, 0.2, 13.79, 2.98, 45.03, 10.99, 29.79, 79.91, 29.46, 100.54, 66.28, 6.74, 68.25, 56.62, 70.73, 50.56, 58.69, 26.22, 0.2, 42.1, 2.29, 65.71, 5.29, 54.8, 0.74, 17.54, 1.47, 28.1, 38.62, 0.3, 4.99, 67.47, 18.73, 25.92, 125.97, 26.34, 60.35, 0.94, 52.67, 13.45, 15.84, 117.19, 92.53, 62.5, 43.79, 106.85, 16.62, 71.9, 2.93, 68.08, 71.72, 10.62, 4.19, 46.87, 24.12, 47.09, 42.94, 92.39, 26.66, 109.61, 13.34, 129.23, 34.47, 31.0, 3.22, 7.69, 42.03, 28.05, 149.01, 156.76, 92.83, 57.73, 3.86, 14.9, 0.0, 29.23, 0.03, 25.92, 3.87, 45.65, 1.09, 20.81, 3.66, 27.06, 28.97, 94.28, 12.82, 63.89, 134.81, 81.96, 10.38, 17.27, 47.6, 23.26, 11.64, 94.27, 71.8, 2.46, 33.86, 93.88, 44.6, 20.61, 80.47, 97.13, 47.26, 50.87, 56.86, 126.64, 84.4, 57.84, 167.2, 37.38, 118.34, 106.89]
aa = ['ALA', 'SER', 'ALA', 'LEU', 'LYS', 'ASP', 'TYR', 'TYR', 'ALA', 'ILE', 'MET', 'GLY', 'VAL', 'LYS', 'PRO', 'THR', 'ASP', 'ASP', 'LEU', 'LYS', 'THR', 'ILE', 'LYS', 'THR', 'ALA', 'TYR', 'ARG', 'ARG', 'LEU', 'ALA', 'ARG', 'LYS', 'TYR', 'HIS', 'PRO', 'ASP', 'VAL', 'SER', 'LYS', 'GLU', 'PRO', 'ASP', 'ALA', 'GLU', 'ALA', 'ARG', 'PHE', 'LYS', 'GLU', 'VAL', 'ALA', 'GLU', 'ALA', 'TRP', 'GLU', 'VAL', 'LEU', 'SER', 'ASP', 'GLU', 'GLN', 'ARG', 'ARG', 'ALA', 'GLU', 'TYR', 'ASP', 'GLN', 'MET', 'TRP', 'GLN', 'HIS', 'ARG', 'ASN', 'ASP', 'PRO', 'GLN', 'PHE', 'ASN', 'ARG', 'GLN', 'PHE', 'HIS', 'HIS', 'GLY', 'ASP', 'GLY', 'GLN', 'SER', 'PHE', 'ASN', 'ALA', 'GLU', 'ASP', 'PHE', 'ASP', 'ASP', 'ILE', 'PHE', 'SER', 'SER', 'ILE', 'PHE', 'GLY', 'GLN', 'HIS', 'ALA', 'ARG', 'GLN', 'SER', 'ARG', 'GLN', 'ARG', 'PRO', 'ALA', 'THR', 'ARG', 'GLY', 'HIS', 'ASP', 'ILE', 'GLU', 'ILE', 'GLU', 'VAL', 'ALA', 'VAL', 'PHE', 'LEU', 'GLU', 'GLU', 'THR', 'LEU', 'THR', 'GLU', 'HIS', 'LYS', 'ARG', 'THR', 'ILE', 'SER', 'TYR', 'ASN', 'LEU', 'PRO', 'VAL', 'TYR', 'ASN', 'ALA', 'PHE', 'GLY', 'MET', 'ILE', 'GLU', 'GLN', 'GLU', 'ILE', 'PRO', 'LYS', 'THR', 'LEU', 'ASN', 'VAL', 'LYS', 'ILE', 'PRO', 'ALA', 'GLY', 'VAL', 'GLY', 'ASN', 'GLY', 'GLN', 'ARG', 'ILE', 'ARG', 'LEU', 'LYS', 'GLY', 'GLN', 'GLY', 'THR', 'PRO', 'GLY', 'GLU', 'ASN', 'GLY', 'GLY', 'PRO', 'ASN', 'GLY', 'ASP', 'LEU', 'TRP', 'LEU', 'VAL', 'ILE', 'HIS', 'ILE', 'ALA', 'PRO', 'HIS', 'PRO', 'LEU', 'PHE', 'ASP', 'ILE', 'VAL', 'GLY', 'GLN', 'ASP', 'LEU', 'GLU', 'ILE', 'VAL', 'VAL', 'PRO', 'VAL', 'SER', 'PRO', 'TRP', 'GLU', 'ALA', 'ALA', 'LEU', 'GLY', 'ALA', 'LYS', 'VAL', 'THR', 'VAL', 'PRO', 'THR', 'LEU', 'LYS', 'GLU', 'SER', 'ILE', 'LEU', 'LEU', 'THR', 'ILE', 'PRO', 'PRO', 'GLY', 'SER', 'GLN', 'ALA', 'GLY', 'GLN', 'ARG', 'LEU', 'ARG', 'VAL', 'LYS', 'GLY', 'LYS', 'GLY', 'LEU', 'VAL', 'SER', 'LYS', 'LYS', 'GLN', 'THR', 'GLY', 'ASP', 'LEU', 'TYR', 'ALA', 'VAL', 'LEU', 'LYS', 'ILE', 'VAL', 'MET', 'PRO', 'PRO', 'LYS', 'PRO', 'ASP', 'GLU', 'ASN', 'THR', 'ALA', 'ALA', 'LEU', 'TRP', 'GLN', 'GLN', 'LEU', 'ALA', 'ASP', 'ALA', 'GLN', 'SER', 'SER', 'PHE', 'ASP', 'PRO', 'ARG', 'LYS', 'ASP', 'TRP', 'GLY', 'LYS', 'ALA', 'ALA', 'SER', 'ALA', 'LEU', 'LYS', 'ASP', 'TYR', 'TYR', 'ALA', 'ILE', 'MET', 'GLY', 'VAL', 'LYS', 'PRO', 'THR', 'ASP', 'ASP', 'LEU', 'LYS', 'THR', 'ILE', 'LYS', 'THR', 'ALA', 'TYR', 'ARG', 'ARG', 'LEU', 'ALA', 'ARG', 'LYS', 'TYR', 'HIS', 'PRO', 'ASP', 'VAL', 'SER', 'LYS', 'GLU', 'PRO', 'ASP', 'ALA', 'GLU', 'ALA', 'ARG', 'PHE', 'LYS', 'GLU', 'VAL', 'ALA', 'GLU', 'ALA', 'TRP', 'GLU', 'VAL', 'LEU', 'SER', 'ASP', 'GLU', 'GLN', 'ARG', 'ARG', 'ALA', 'GLU', 'TYR', 'ASP', 'GLN', 'MET', 'TRP', 'GLN', 'HIS', 'ARG', 'ASN', 'ASP', 'PRO', 'GLN', 'PHE', 'ASN', 'ARG', 'GLN', 'PHE', 'HIS', 'HIS', 'GLY', 'ASP', 'GLY', 'GLN', 'SER', 'PHE', 'ASN', 'ALA', 'GLU', 'ASP', 'PHE', 'ASP', 'ASP', 'ILE', 'PHE', 'SER', 'SER', 'ILE', 'PHE', 'GLY', 'GLN', 'HIS', 'ALA', 'ARG', 'GLN', 'SER', 'ARG', 'GLN', 'ARG', 'PRO', 'ALA', 'THR', 'ARG', 'GLY', 'HIS', 'ASP', 'ILE', 'GLU', 'ILE', 'GLU', 'VAL', 'ALA', 'VAL', 'PHE', 'LEU', 'GLU', 'GLU', 'THR', 'LEU', 'THR', 'GLU', 'HIS', 'LYS', 'ARG', 'THR', 'ILE', 'SER', 'TYR', 'ASN', 'LEU', 'PRO', 'VAL', 'TYR', 'ASN', 'ALA', 'PHE', 'GLY', 'MET', 'ILE', 'GLU', 'GLN', 'GLU', 'ILE', 'PRO', 'LYS', 'THR', 'LEU', 'ASN', 'VAL', 'LYS', 'ILE', 'PRO', 'ALA', 'GLY', 'VAL', 'GLY', 'ASN', 'GLY', 'GLN', 'ARG', 'ILE', 'ARG', 'LEU', 'LYS', 'GLY', 'GLN', 'GLY', 'THR', 'PRO', 'GLY', 'GLU', 'ASN', 'GLY', 'GLY', 'PRO', 'ASN', 'GLY', 'ASP', 'LEU', 'TRP', 'LEU', 'VAL', 'ILE', 'HIS', 'ILE', 'ALA', 'PRO', 'HIS', 'PRO', 'LEU', 'PHE', 'ASP', 'ILE', 'VAL', 'GLY', 'GLN', 'ASP', 'LEU', 'GLU', 'ILE', 'VAL', 'VAL', 'PRO', 'VAL', 'SER', 'PRO', 'TRP', 'GLU', 'ALA', 'ALA', 'LEU', 'GLY', 'ALA', 'LYS', 'VAL', 'THR', 'VAL', 'PRO', 'THR', 'LEU', 'LYS', 'GLU', 'SER', 'ILE', 'LEU', 'LEU', 'THR', 'ILE', 'PRO', 'PRO', 'GLY', 'SER', 'GLN', 'ALA', 'GLY', 'GLN', 'ARG', 'LEU', 'ARG', 'VAL', 'LYS', 'GLY', 'LYS', 'GLY', 'LEU', 'VAL', 'SER', 'LYS', 'LYS', 'GLN', 'THR', 'GLY', 'ASP', 'LEU', 'TYR', 'ALA', 'VAL', 'LEU', 'LYS', 'ILE', 'VAL', 'MET', 'PRO', 'PRO', 'LYS', 'PRO', 'ASP', 'GLU', 'ASN', 'THR', 'ALA', 'ALA', 'LEU', 'TRP', 'GLN', 'GLN', 'LEU', 'ALA', 'ASP', 'ALA', 'GLN', 'SER', 'SER', 'PHE', 'ASP', 'PRO', 'ARG', 'LYS', 'ASP', 'TRP', 'GLY', 'LYS', 'ALA']
colours = ['#FFFFFF','#CCFFFF','#99FFFF','#00CCFF','#0099FF','#0066FF','#0033FF','#0000CC','#000066']

high_val = max(avg)
segments = high_val/9.0
divider = segments
boundaries = []

for z in xrange(9):
    boundaries.append(divider)
    divider = divider + segments

rows = math.ceil(len(aa)/40.0)

list_numbers = [i for i in range(1, len(aa), 10)]

fig = plt.figure(figsize=(20,20),facecolor='white')
fig.subplots_adjust(top=0.99, bottom=0.40, left=0.01, right=0.45, wspace = 0.0, hspace = 2)

its = 0
for i in xrange(len(aa)):
    for bound in boundaries:
        if avg[i] <= bound: 
            ax = plt.subplot(rows, 40, i+1, axisbg=colours[its])
            if colours[its] == '#000066':
                ax.text(0.5, 0.5, "%s" % aa_key[aa[i]], ha="center", va="center", size=15, color='white')
            else:
                ax.text(0.5, 0.5, "%s" % aa_key[aa[i]], ha="center", va="center", size=15, color='black')
        else:
            its +=1

    for spine in ax.spines.itervalues():
        spine.set_visible(False)

    ax.axes.get_xaxis().set_ticks([])
    ax.axes.get_yaxis().set_ticks([])

    if i+1 in list_numbers:
        ax.set_xlabel(i+1)
        ax.xaxis.set_label_position('top')

    its = 0  

a = np.linspace(0, high_val, 9)
a = np.vstack((a,a))
cmap = mpl.colors.ListedColormap(['#FFFFFF','#CCFFFF','#99FFFF','#00CCFF','#0099FF','#0066FF','#0033FF','#0000CC','#000066'])  
im = imshow(a, aspect='auto', cmap=plt.get_cmap(cmap), origin='lower')         
colorbar()

plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:18:21.453

您可以将矩形添加到一个轴上，而不是创建这么多轴，这里是代码：

```
import math
import numpy as np
from pylab import *
from matplotlib import mpl
import matplotlib.pyplot as plt

aa_key = {'ARG':'R', 'HIS':'H', 'LYS':'K', 'ASP':'D', 'GLU':'E', 'SER':'S', 'THR':'T', 'ASN':'N', 'GLN':'Q', 'CYS':'C', 'SEC':'C', 'GLY':'G', 'PRO':'P', 'ALA':'A', 'VAL':'V', 'ILE':'I', 'LEU':'L', 'MET':'M', 'PHE':'F', 'TYR':'Y', 'TRP':'W'}

avg = [93.89, 69.34, 62.14, 33.65, 59.14, 41.73, 22.27, 0.81, 43.57, 5.12, 0.06, 32.58, 18.07, 77.43, 38.97, 83.38, 31.26, 75.33, 68.95, 142.75, 19.71, 0.16, 57.19, 59.74, 0.2, 27.25, 125.09, 116.5, 7.9, 7.49, 131.04, 64.21, 18.45, 62.13, 51.68, 96.93, 80.49, 35.64, 153.67, 28.97, 117.85, 67.19, 4.77, 86.98, 40.65, 56.09, 28.04, 97.77, 25.68, 0.0, 21.36, 47.02, 0.0, 37.21, 66.44, 4.63, 5.51, 43.05, 42.99, 125.41, 100.06, 91.02, 59.16, 32.02, 63.1, 0.58, 5.66, 54.43, 40.13, 67.42, 74.4, 76.45, 105.18, 68.41, 75.86, 74.01, 103.7, 117.79, 90.08, 139.55, 89.3, 136.44, 104.58, 105.68, 42.46, 91.42, 35.22, 93.86, 48.37, 120.37, 66.23, 50.54, 64.71, 41.54, 71.54, 49.17, 60.97, 85.65, 111.92, 51.99, 53.2, 113.7, 126.62, 38.5, 102.27, 116.62, 60.34, 131.57, 78.68, 46.47, 120.32, 90.04, 122.09, 126.92, 72.98, 65.15, 82.23, 20.38, 50.95, 39.32, 20.96, 75.01, 14.44, 88.34, 1.94, 51.8, 2.06, 90.28, 3.36, 64.76, 31.06, 0.51, 29.15, 87.07, 84.27, 65.24, 128.51, 38.39, 94.71, 16.21, 85.0, 31.2, 59.57, 6.18, 33.06, 33.73, 60.79, 61.36, 95.3, 197.35, 26.78, 112.83, 64.85, 131.5, 97.56, 94.93, 79.31, 95.74, 60.12, 89.47, 19.11, 87.26, 16.72, 110.99, 1.96, 33.8, 18.2, 21.86, 13.52, 24.27, 62.86, 31.47, 39.23, 80.43, 38.0, 85.39, 48.59, 136.98, 35.9, 45.6, 4.45, 17.14, 70.42, 34.51, 124.57, 116.16, 66.84, 23.42, 109.71, 58.46, 6.64, 11.81, 0.2, 43.98, 0.2, 15.75, 2.59, 47.25, 11.7, 30.86, 81.7, 30.13, 104.47, 69.54, 7.08, 67.92, 56.72, 63.09, 47.24, 45.87, 23.58, 0.05, 41.5, 3.43, 72.93, 5.42, 60.21, 1.23, 20.09, 1.81, 39.74, 47.41, 0.08, 3.54, 67.77, 19.85, 26.79, 124.72, 33.09, 78.66, 0.99, 55.68, 13.74, 16.07, 119.38, 93.24, 64.98, 43.75, 107.65, 14.95, 69.54, 3.25, 68.41, 56.43, 16.03, 4.43, 61.51, 24.86, 46.78, 43.31, 87.59, 24.02, 108.74, 15.55, 128.87, 35.05, 31.09, 3.57, 6.79, 40.17, 23.66, 116.78, 131.23, 81.16, 58.18, 3.68, 13.18, 0.0, 28.06, 0.0, 25.68, 3.37, 51.95, 1.15, 24.84, 4.6, 22.33, 33.47, 108.62, 16.1, 49.53, 135.2, 71.43, 5.79, 15.91, 48.61, 13.73, 9.4, 87.11, 63.19, 7.91, 21.25, 94.15, 45.86, 26.36, 80.05, 105.57, 52.3, 51.13, 56.83, 113.51, 92.92, 67.0, 148.45, 35.13, 114.23, 108.02, 94.94, 68.44, 62.22, 31.15, 60.04, 38.47, 22.3, 0.78, 39.35, 4.7, 0.09, 28.1, 17.58, 73.04, 37.55, 83.03, 31.78, 75.43, 69.08, 142.08, 19.87, 0.12, 57.8, 56.07, 0.33, 27.34, 124.44, 98.74, 6.57, 7.63, 126.51, 54.26, 16.13, 62.16, 51.03, 96.26, 78.31, 33.71, 142.46, 25.05, 101.93, 59.35, 5.0, 82.65, 36.26, 52.16, 27.37, 96.5, 24.5, 0.0, 21.25, 46.08, 0.0, 37.11, 62.57, 4.14, 5.19, 40.52, 38.78, 122.3, 97.2, 87.08, 57.43, 31.35, 61.98, 0.47, 5.45, 52.48, 41.73, 61.9, 73.38, 76.32, 104.43, 69.92, 78.78, 76.66, 107.05, 121.75, 91.06, 137.56, 91.2, 135.56, 107.81, 103.62, 41.7, 91.29, 35.24, 95.06, 48.72, 120.38, 65.02, 51.42, 63.83, 42.03, 72.09, 46.49, 58.56, 88.6, 111.84, 51.98, 53.78, 113.33, 126.69, 39.08, 101.86, 118.26, 59.34, 131.83, 79.09, 46.05, 119.72, 88.5, 121.97, 124.3, 72.72, 64.42, 83.82, 21.05, 52.81, 39.94, 21.72, 74.56, 12.92, 83.91, 1.73, 50.29, 1.86, 90.79, 3.81, 63.99, 31.36, 0.57, 29.63, 84.77, 89.53, 63.56, 125.84, 35.8, 92.01, 15.26, 83.0, 30.76, 59.25, 6.29, 34.43, 33.28, 62.53, 61.09, 95.55, 196.45, 27.62, 113.44, 63.2, 129.38, 94.13, 92.39, 78.32, 91.58, 60.28, 89.43, 19.21, 88.07, 16.92, 114.43, 1.85, 41.76, 18.49, 24.06, 14.87, 26.1, 62.6, 33.32, 47.49, 87.78, 43.66, 89.01, 50.82, 137.19, 36.07, 45.04, 4.74, 17.27, 70.76, 34.06, 122.94, 115.74, 67.75, 22.31, 109.71, 58.98, 6.2, 11.94, 0.17, 44.87, 0.2, 13.79, 2.98, 45.03, 10.99, 29.79, 79.91, 29.46, 100.54, 66.28, 6.74, 68.25, 56.62, 70.73, 50.56, 58.69, 26.22, 0.2, 42.1, 2.29, 65.71, 5.29, 54.8, 0.74, 17.54, 1.47, 28.1, 38.62, 0.3, 4.99, 67.47, 18.73, 25.92, 125.97, 26.34, 60.35, 0.94, 52.67, 13.45, 15.84, 117.19, 92.53, 62.5, 43.79, 106.85, 16.62, 71.9, 2.93, 68.08, 71.72, 10.62, 4.19, 46.87, 24.12, 47.09, 42.94, 92.39, 26.66, 109.61, 13.34, 129.23, 34.47, 31.0, 3.22, 7.69, 42.03, 28.05, 149.01, 156.76, 92.83, 57.73, 3.86, 14.9, 0.0, 29.23, 0.03, 25.92, 3.87, 45.65, 1.09, 20.81, 3.66, 27.06, 28.97, 94.28, 12.82, 63.89, 134.81, 81.96, 10.38, 17.27, 47.6, 23.26, 11.64, 94.27, 71.8, 2.46, 33.86, 93.88, 44.6, 20.61, 80.47, 97.13, 47.26, 50.87, 56.86, 126.64, 84.4, 57.84, 167.2, 37.38, 118.34, 106.89]
aa = ['ALA', 'SER', 'ALA', 'LEU', 'LYS', 'ASP', 'TYR', 'TYR', 'ALA', 'ILE', 'MET', 'GLY', 'VAL', 'LYS', 'PRO', 'THR', 'ASP', 'ASP', 'LEU', 'LYS', 'THR', 'ILE', 'LYS', 'THR', 'ALA', 'TYR', 'ARG', 'ARG', 'LEU', 'ALA', 'ARG', 'LYS', 'TYR', 'HIS', 'PRO', 'ASP', 'VAL', 'SER', 'LYS', 'GLU', 'PRO', 'ASP', 'ALA', 'GLU', 'ALA', 'ARG', 'PHE', 'LYS', 'GLU', 'VAL', 'ALA', 'GLU', 'ALA', 'TRP', 'GLU', 'VAL', 'LEU', 'SER', 'ASP', 'GLU', 'GLN', 'ARG', 'ARG', 'ALA', 'GLU', 'TYR', 'ASP', 'GLN', 'MET', 'TRP', 'GLN', 'HIS', 'ARG', 'ASN', 'ASP', 'PRO', 'GLN', 'PHE', 'ASN', 'ARG', 'GLN', 'PHE', 'HIS', 'HIS', 'GLY', 'ASP', 'GLY', 'GLN', 'SER', 'PHE', 'ASN', 'ALA', 'GLU', 'ASP', 'PHE', 'ASP', 'ASP', 'ILE', 'PHE', 'SER', 'SER', 'ILE', 'PHE', 'GLY', 'GLN', 'HIS', 'ALA', 'ARG', 'GLN', 'SER', 'ARG', 'GLN', 'ARG', 'PRO', 'ALA', 'THR', 'ARG', 'GLY', 'HIS', 'ASP', 'ILE', 'GLU', 'ILE', 'GLU', 'VAL', 'ALA', 'VAL', 'PHE', 'LEU', 'GLU', 'GLU', 'THR', 'LEU', 'THR', 'GLU', 'HIS', 'LYS', 'ARG', 'THR', 'ILE', 'SER', 'TYR', 'ASN', 'LEU', 'PRO', 'VAL', 'TYR', 'ASN', 'ALA', 'PHE', 'GLY', 'MET', 'ILE', 'GLU', 'GLN', 'GLU', 'ILE', 'PRO', 'LYS', 'THR', 'LEU', 'ASN', 'VAL', 'LYS', 'ILE', 'PRO', 'ALA', 'GLY', 'VAL', 'GLY', 'ASN', 'GLY', 'GLN', 'ARG', 'ILE', 'ARG', 'LEU', 'LYS', 'GLY', 'GLN', 'GLY', 'THR', 'PRO', 'GLY', 'GLU', 'ASN', 'GLY', 'GLY', 'PRO', 'ASN', 'GLY', 'ASP', 'LEU', 'TRP', 'LEU', 'VAL', 'ILE', 'HIS', 'ILE', 'ALA', 'PRO', 'HIS', 'PRO', 'LEU', 'PHE', 'ASP', 'ILE', 'VAL', 'GLY', 'GLN', 'ASP', 'LEU', 'GLU', 'ILE', 'VAL', 'VAL', 'PRO', 'VAL', 'SER', 'PRO', 'TRP', 'GLU', 'ALA', 'ALA', 'LEU', 'GLY', 'ALA', 'LYS', 'VAL', 'THR', 'VAL', 'PRO', 'THR', 'LEU', 'LYS', 'GLU', 'SER', 'ILE', 'LEU', 'LEU', 'THR', 'ILE', 'PRO', 'PRO', 'GLY', 'SER', 'GLN', 'ALA', 'GLY', 'GLN', 'ARG', 'LEU', 'ARG', 'VAL', 'LYS', 'GLY', 'LYS', 'GLY', 'LEU', 'VAL', 'SER', 'LYS', 'LYS', 'GLN', 'THR', 'GLY', 'ASP', 'LEU', 'TYR', 'ALA', 'VAL', 'LEU', 'LYS', 'ILE', 'VAL', 'MET', 'PRO', 'PRO', 'LYS', 'PRO', 'ASP', 'GLU', 'ASN', 'THR', 'ALA', 'ALA', 'LEU', 'TRP', 'GLN', 'GLN', 'LEU', 'ALA', 'ASP', 'ALA', 'GLN', 'SER', 'SER', 'PHE', 'ASP', 'PRO', 'ARG', 'LYS', 'ASP', 'TRP', 'GLY', 'LYS', 'ALA', 'ALA', 'SER', 'ALA', 'LEU', 'LYS', 'ASP', 'TYR', 'TYR', 'ALA', 'ILE', 'MET', 'GLY', 'VAL', 'LYS', 'PRO', 'THR', 'ASP', 'ASP', 'LEU', 'LYS', 'THR', 'ILE', 'LYS', 'THR', 'ALA', 'TYR', 'ARG', 'ARG', 'LEU', 'ALA', 'ARG', 'LYS', 'TYR', 'HIS', 'PRO', 'ASP', 'VAL', 'SER', 'LYS', 'GLU', 'PRO', 'ASP', 'ALA', 'GLU', 'ALA', 'ARG', 'PHE', 'LYS', 'GLU', 'VAL', 'ALA', 'GLU', 'ALA', 'TRP', 'GLU', 'VAL', 'LEU', 'SER', 'ASP', 'GLU', 'GLN', 'ARG', 'ARG', 'ALA', 'GLU', 'TYR', 'ASP', 'GLN', 'MET', 'TRP', 'GLN', 'HIS', 'ARG', 'ASN', 'ASP', 'PRO', 'GLN', 'PHE', 'ASN', 'ARG', 'GLN', 'PHE', 'HIS', 'HIS', 'GLY', 'ASP', 'GLY', 'GLN', 'SER', 'PHE', 'ASN', 'ALA', 'GLU', 'ASP', 'PHE', 'ASP', 'ASP', 'ILE', 'PHE', 'SER', 'SER', 'ILE', 'PHE', 'GLY', 'GLN', 'HIS', 'ALA', 'ARG', 'GLN', 'SER', 'ARG', 'GLN', 'ARG', 'PRO', 'ALA', 'THR', 'ARG', 'GLY', 'HIS', 'ASP', 'ILE', 'GLU', 'ILE', 'GLU', 'VAL', 'ALA', 'VAL', 'PHE', 'LEU', 'GLU', 'GLU', 'THR', 'LEU', 'THR', 'GLU', 'HIS', 'LYS', 'ARG', 'THR', 'ILE', 'SER', 'TYR', 'ASN', 'LEU', 'PRO', 'VAL', 'TYR', 'ASN', 'ALA', 'PHE', 'GLY', 'MET', 'ILE', 'GLU', 'GLN', 'GLU', 'ILE', 'PRO', 'LYS', 'THR', 'LEU', 'ASN', 'VAL', 'LYS', 'ILE', 'PRO', 'ALA', 'GLY', 'VAL', 'GLY', 'ASN', 'GLY', 'GLN', 'ARG', 'ILE', 'ARG', 'LEU', 'LYS', 'GLY', 'GLN', 'GLY', 'THR', 'PRO', 'GLY', 'GLU', 'ASN', 'GLY', 'GLY', 'PRO', 'ASN', 'GLY', 'ASP', 'LEU', 'TRP', 'LEU', 'VAL', 'ILE', 'HIS', 'ILE', 'ALA', 'PRO', 'HIS', 'PRO', 'LEU', 'PHE', 'ASP', 'ILE', 'VAL', 'GLY', 'GLN', 'ASP', 'LEU', 'GLU', 'ILE', 'VAL', 'VAL', 'PRO', 'VAL', 'SER', 'PRO', 'TRP', 'GLU', 'ALA', 'ALA', 'LEU', 'GLY', 'ALA', 'LYS', 'VAL', 'THR', 'VAL', 'PRO', 'THR', 'LEU', 'LYS', 'GLU', 'SER', 'ILE', 'LEU', 'LEU', 'THR', 'ILE', 'PRO', 'PRO', 'GLY', 'SER', 'GLN', 'ALA', 'GLY', 'GLN', 'ARG', 'LEU', 'ARG', 'VAL', 'LYS', 'GLY', 'LYS', 'GLY', 'LEU', 'VAL', 'SER', 'LYS', 'LYS', 'GLN', 'THR', 'GLY', 'ASP', 'LEU', 'TYR', 'ALA', 'VAL', 'LEU', 'LYS', 'ILE', 'VAL', 'MET', 'PRO', 'PRO', 'LYS', 'PRO', 'ASP', 'GLU', 'ASN', 'THR', 'ALA', 'ALA', 'LEU', 'TRP', 'GLN', 'GLN', 'LEU', 'ALA', 'ASP', 'ALA', 'GLN', 'SER', 'SER', 'PHE', 'ASP', 'PRO', 'ARG', 'LYS', 'ASP', 'TRP', 'GLY', 'LYS', 'ALA']
colours = ['#FFFFFF','#CCFFFF','#99FFFF','#00CCFF','#0099FF','#0066FF','#0033FF','#0000CC','#000066']

high_val = max(avg)
boundaries = np.linspace(0, np.max(avg), 10)[1:]
rows = math.ceil(len(aa)/40.0)
list_numbers = set(range(1, len(aa), 10))

fig = plt.figure(figsize=(10, 10), facecolor="white")
ax = plt.subplot(111)
ax.set_axis_off()
color_index = np.searchsorted(boundaries, avg)
x, y = 0, -1
for i in xrange(len(aa)):
    rect = plt.Rectangle((x, y), 1, 1, facecolor=colours[color_index[i]])
    ax.add_artist(rect)
    ax.text(x+0.5, y+0.5, aa_key[aa[i]], ha="center", va="center", color="white" if color_index[i]==8 else "black")
    if i+1 in list_numbers:
        ax.text(x+0.5, y+1.6, "%d" % (i+1), ha="center", va="center")
    x += 1
    if x == 40:
        y -= 3.0
        x = 0
ax.set_xlim(-1, 41)
ax.set_ylim(y-3, 3)

a = np.linspace(0, high_val, 9)
a = np.vstack((a,a))
cmap = mpl.colors.ListedColormap(['#FFFFFF','#CCFFFF','#99FFFF','#00CCFF','#0099FF','#0066FF','#0033FF','#0000CC','#000066'])  
im = imshow(a, aspect='auto', cmap=plt.get_cmap(cmap), origin='lower')       
im.set_visible(False)  
colorbar()
plt.show() 
```

结果是：

![在此处输入图像描述](../Images/851845e7bb8d661edb16122149f2d528.png)

# c# - 使用 Cast 作为测试的一部分或明确使用 Assert.IsInstanceOfType

> ID：11949242
> 
> 赞同：1
> 
> 时间：2012-08-14T09:15:29.897
> 
> 标签：c#, asp.net-mvc, unit-testing

我对测试很陌生，并且一直在编写我的控制器测试，如下所示：

```
var result = myController.Create(It.IsAny<int>());

Assert.IsInstanceOfType(result, typeof(ViewResult));
Assert.AreEqual(string.Empty, ((ViewResult)result).ViewName, "Default view expected.");
Assert.IsInstanceOfType(((ViewResult)result).ViewData.Model, typeof(FooBarCreateEditViewModel)); 
```

这工作正常，但不那么可读，因为我必须为测试 2 和 3 执行强制转换。另一种方法可能是执行以下操作：

```
var result = (ViewResult)myController.Create(It.IsAny<int>());

Assert.AreEqual(string.Empty, result.ViewName, "Default view expected.");
Assert.IsInstanceOfType(result.ViewData.Model, typeof(FooBarCreateEditViewModel)); 
```

这似乎也有效，并且在我看来更具可读性。我的问题是它依赖于测试的“行为”部分来执行 IsInstanceOfType 测试，而不是明确定义一个 Assert 来完成这项工作。

那么我的第二个方法可以继续吗？如果方法返回不同的类型，我可能会遇到依赖强制转换抛出错误的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:21:37.970

您可以使用[MVCContrib.TestHelper](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)。允许您编写非常易读的单元测试，例如：

```
// arrange
...

// act
var actual = controller.Create(123);

// assert
actual
    .AssertViewRendered()
    .WithViewData<FooBarCreateEditViewModel>(); 
```

查看我编写的[以下示例单元测试。](https://github.com/darind/samplemvc/blob/master/tests/SampleMvc.Web.Tests/Controllers/UsersControllerTests.cs)

# android - 在服务中调用 getIntent 方法

> ID：11949248
> 
> 赞同：24
> 
> 时间：2012-08-14T09:15:37.450
> 
> 标签：android, service, android-intent

我必须将参数从 MyActivity.class 传递给 TestService.class。MyActivity 是一个 Activity 类，而 TestService 是我为发送消息而制作的一个服务。我必须将参数从 Activity 传递给服务，但是当我调用`Intent i = getIntent();`服务类时，我收到错误**getIntent() is undefined**。

那么，如何将参数从我的 Activity 发送到 Service？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-14T09:19:51.187

像这样开始你的服务；

```
 Intent ir=new Intent(this, Service.class); 
 ir.putExtra("data", data); 
 this.startService(ir); 
```

您附加您的数据作为额外的意图。

然后从服务中检索数据；

```
data=(String) intent.getExtras().get("data"); 
```

因此，您可以从 onHandleIntent 或 onStartCommand Intent 参数访问您的参数。（取决于您正在运行的服务类型）例如；

**服务**

```
protected void onStartCommand (Intent intent, int flags, int startId) {
    data=(String) intent.getExtras().get("data"); 
} 
```

[public int onStartCommand (Intent intent, int flags, int startId)](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)

**意向服务**

```
protected void onHandleIntent(Intent intent) {
    data=(String) intent.getExtras().get("data"); 
} 
```

[protected abstract void onHandleIntent（意图意图）](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent%28android.content.Intent%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:34:25.323

当您以意图（具有数据）启动服务时，该意图会在方法
`onStart(Intent intent, int startId)` 或

```
onStartCommand (Intent intent, int flags, int startId)
{
this **intent** is your intent with data
} 
```

您的 Service.So 以意图作为参数从该方法接收您的数据

# objective-c - 如何调整 NSImage 的大小？

> ID：11949250
> 
> 赞同：26
> 
> 时间：2012-08-14T09:15:49.460
> 
> 标签：objective-c, macos, jpeg, nsimage

我有一个`NSBitmapImageRep`x`W`大小`H`的。

我创建`NSImage`并调用`addRepresentation:`. 然后我需要调整`NSImage`.

我尝试`setSize`了方法，但它不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-07-01T01:54:43.240

**编辑：** 由于这个答案仍然是公认的答案，但没有考虑到 Retina 屏幕，我将直接链接到一个更好的解决方案：[Objective-C](https://stackoverflow.com/a/38442746/1277898) [Swift 4](https://stackoverflow.com/a/42915296/1277898)

* * *

因为 Paresh 的方法是完全正确的，但自 10.8 以来已弃用，我将在下面发布有效的 10.8 代码。不过，所有功劳都归功于 Paresh 的回答。

```
- (NSImage *)imageResize:(NSImage*)anImage newSize:(NSSize)newSize {
    NSImage *sourceImage = anImage;
    [sourceImage setScalesWhenResized:YES];

    // Report an error if the source isn't a valid image
    if (![sourceImage isValid]){
        NSLog(@"Invalid Image");
    } else {
        NSImage *smallImage = [[NSImage alloc] initWithSize: newSize];
        [smallImage lockFocus];
        [sourceImage setSize: newSize];
        [[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationHigh];
        [sourceImage drawAtPoint:NSZeroPoint fromRect:CGRectMake(0, 0, newSize.width, newSize.height) operation:NSCompositingOperationCopy fraction:1.0];
        [smallImage unlockFocus];
        return smallImage;
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-07-18T17:31:17.540

Thomas Johannesmeyer 的回答 using `lockFocus`doesn't work as you may want on Retina/HiDPI screen: it resizing to the desired **points** in the native scale, not **pixels**。

*   如果要调整大小以**在屏幕上显示**，请使用[该方法](https://stackoverflow.com/a/17396521/30480)。
*   如果您正在为具有精确像素尺寸**的文件**调整大小，则在 Retina (2x DPI) 屏幕上运行时，文件大小将是原来的两倍。

[此方法由各种答案（包括此相关问题](https://stackoverflow.com/questions/17507170/how-to-save-png-file-from-nsimage-retina-issues)中的一些答案）拼凑而成，无论当前屏幕 DPI 如何，都将大小调整为指定的**像素尺寸：**

```
+ (NSImage *)resizedImage:(NSImage *)sourceImage toPixelDimensions:(NSSize)newSize
{
    if (! sourceImage.isValid) return nil;

    NSBitmapImageRep *rep = [[NSBitmapImageRep alloc]
              initWithBitmapDataPlanes:NULL
                            pixelsWide:newSize.width
                            pixelsHigh:newSize.height
                         bitsPerSample:8
                       samplesPerPixel:4
                              hasAlpha:YES
                              isPlanar:NO
                        colorSpaceName:NSCalibratedRGBColorSpace
                           bytesPerRow:0
                          bitsPerPixel:0];
    rep.size = newSize;

    [NSGraphicsContext saveGraphicsState];
    [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithBitmapImageRep:rep]];
    [sourceImage drawInRect:NSMakeRect(0, 0, newSize.width, newSize.height) fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];
    [NSGraphicsContext restoreGraphicsState];

    NSImage *newImage = [[NSImage alloc] initWithSize:newSize];
    [newImage addRepresentation:rep];
    return newImage;
} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-03-20T22:42:31.910

[@Marco用](https://stackoverflow.com/a/38442746/657988)**Swift 4**编写的答案：

 **```
extension NSImage {
    func resized(to newSize: NSSize) -> NSImage? {
        if let bitmapRep = NSBitmapImageRep(
            bitmapDataPlanes: nil, pixelsWide: Int(newSize.width), pixelsHigh: Int(newSize.height),
            bitsPerSample: 8, samplesPerPixel: 4, hasAlpha: true, isPlanar: false,
            colorSpaceName: .calibratedRGB, bytesPerRow: 0, bitsPerPixel: 0
        ) {
            bitmapRep.size = newSize
            NSGraphicsContext.saveGraphicsState()
            NSGraphicsContext.current = NSGraphicsContext(bitmapImageRep: bitmapRep)
            draw(in: NSRect(x: 0, y: 0, width: newSize.width, height: newSize.height), from: .zero, operation: .copy, fraction: 1.0)
            NSGraphicsContext.restoreGraphicsState()

            let resizedImage = NSImage(size: newSize)
            resizedImage.addRepresentation(bitmapRep)
            return resizedImage
        }

        return nil
    }
}

let targetSize = NSSize(width: 256.0, height: 256.0)
let newImageResized = myimage.resized(to: targetSize) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-08-14T09:37:31.120

**编辑**您可以使用以下功能调整图像大小：

```
- (NSImage *)imageResize:(NSImage*)anImage
         newSize:(NSSize)newSize 
{
 NSImage *sourceImage = anImage;
 [sourceImage setScalesWhenResized:YES];

 // Report an error if the source isn't a valid image
 if (![sourceImage isValid])
 {
    NSLog(@"Invalid Image");
 } else
 {
    NSImage *smallImage = [[[NSImage alloc] initWithSize: newSize] autorelease];
    [smallImage lockFocus];
    [sourceImage setSize: newSize];
    [[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationHigh];
    [sourceImage compositeToPoint:NSZeroPoint operation:NSCompositeCopy];
    [smallImage unlockFocus];
    return smallImage;
 }
 return nil;
} 
```

其次像这样：

```
NSData *imageData = [yourImg  TIFFRepresentation]; // converting img into data
NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData]; // converting into BitmapImageRep 
NSDictionary *imageProps = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:0.9] forKey:NSImageCompressionFactor]; // any number betwwen 0 to 1
imageData = [imageRep representationUsingType:NSJPEGFileType properties:imageProps]; // use NSPNGFileType if needed
NSImage *resizedImage = [[NSImage alloc] initWithData:imageData]; // image created from data 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-05-24T10:11:25.823

实际上**没有必要**修改任何源图像参数，如`size`. 以下片段已经在 Swift 中，但我认为您可以从中推断出 Objective-C 版本：

```
func resized(to: CGSize) -> NSImage {
    let img = NSImage(size: to)

    img.lockFocus()
    defer {
        img.unlockFocus()
    }

    if let ctx = NSGraphicsContext.current {
        ctx.imageInterpolation = .high
        draw(in: NSRect(origin: .zero, size: to),
             from: NSRect(origin: .zero, size: size),
             operation: .copy,
             fraction: 1)
    }

    return img
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-03T20:09:19.060

[这是Thomas Johannesmeyer 回答](https://stackoverflow.com/a/17396521/6283604)的 Swift 4 版本：

```
func resize(image: NSImage, w: Int, h: Int) -> NSImage {
    var destSize = NSMakeSize(CGFloat(w), CGFloat(h))
    var newImage = NSImage(size: destSize)
    newImage.lockFocus()
    image.draw(in: NSMakeRect(0, 0, destSize.width, destSize.height), from: NSMakeRect(0, 0, image.size.width, image.size.height), operation: NSCompositingOperation.sourceOver, fraction: CGFloat(1))
    newImage.unlockFocus()
    newImage.size = destSize
    return NSImage(data: newImage.tiffRepresentation!)!
} 
```

和 Swift 4 版本的[Marco 的回答](https://stackoverflow.com/a/38442746/6283604)：

```
func resize(image: NSImage, w: Int, h: Int) -> NSImage {
    let destSize = NSMakeSize(CGFloat(w), CGFloat(h))
    let rep = NSBitmapImageRep(bitmapDataPlanes: nil, pixelsWide: Int(destSize.width), pixelsHigh: Int(destSize.height), bitsPerSample: 8, samplesPerPixel: 4, hasAlpha: true, isPlanar: false, colorSpaceName: .calibratedRGB, bytesPerRow: 0, bitsPerPixel: 0)
    rep?.size = destSize
    NSGraphicsContext.saveGraphicsState()
    if let aRep = rep {
        NSGraphicsContext.current = NSGraphicsContext(bitmapImageRep: aRep)
    }
    image.draw(in: NSMakeRect(0, 0, destSize.width, destSize.height),     from: NSZeroRect, operation: NSCompositingOperation.copy, fraction: 1.0)
    NSGraphicsContext.restoreGraphicsState()
    let newImage = NSImage(size: destSize)
    if let aRep = rep {
        newImage.addRepresentation(aRep)
    }
    return newImage
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-07-16T02:09:58.330

**2020 | 斯威夫特 4 和 5：**

用法：

```
let resizedImg = someImage.resizedCopy(w: 500.0, h:500.0)
let scaledImg = someImage.scaledCopy( sizeOfLargerSide: 1000.0)

//and bonus:
scaledImg.writePNG(toURL: someUrl ) 
```

代码：

```
extension NSImage {
    func scaledCopy( sizeOfLargerSide: CGFloat) ->  NSImage {
        var newW: CGFloat
        var newH: CGFloat
        var scaleFactor: CGFloat

        if ( self.size.width > self.size.height) {
            scaleFactor = self.size.width / sizeOfLargerSide
            newW = sizeOfLargerSide
            newH = self.size.height / scaleFactor
        }
        else{
            scaleFactor = self.size.height / sizeOfLargerSide
            newH = sizeOfLargerSide
            newW = self.size.width / scaleFactor
        }

        return resizedCopy(w: newW, h: newH)
    }

    func resizedCopy( w: CGFloat, h: CGFloat) -> NSImage {
        let destSize = NSMakeSize(w, h)
        let newImage = NSImage(size: destSize)

        newImage.lockFocus()

        self.draw(in: NSRect(origin: .zero, size: destSize),
                  from: NSRect(origin: .zero, size: self.size),
                  operation: .copy,
                  fraction: CGFloat(1)
        )

        newImage.unlockFocus()

        guard let data = newImage.tiffRepresentation,
              let result = NSImage(data: data)
        else { return NSImage() }

        return result
    }

    public func writePNG(toURL url: URL) {
        guard let data = tiffRepresentation,
              let rep = NSBitmapImageRep(data: data),
              let imgData = rep.representation(using: .png, properties: [.compressionFactor : NSNumber(floatLiteral: 1.0)]) else {

            Swift.print("\(self) Error Function '\(#function)' Line: \(#line) No tiff rep found for image writing to \(url)")
            return
        }

        do {
            try imgData.write(to: url)
        }catch let error {
            Swift.print("\(self) Error Function '\(#function)' Line: \(#line) \(error.localizedDescription)")
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-07T22:14:38.887

[完整的 Swift 3 答案（从上面](https://stackoverflow.com/a/30422317/561677)的@Erik Aigner 修改）：

```
extension NSImage {
    func resizeImage(width: CGFloat, _ height: CGFloat) -> NSImage {
        let img = NSImage(size: CGSize(width:width, height:height))

        img.lockFocus()
        let ctx = NSGraphicsContext.current()
        ctx?.imageInterpolation = .high
        self.draw(in: NSMakeRect(0, 0, width, height), from: NSMakeRect(0, 0, size.width, size.height), operation: .copy, fraction: 1)
        img.unlockFocus()

        return img
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-10T20:09:00.220

这是一个 Swift 3 版本的图像保持比例，只需将 minimumSize 设置为您想要的最小高度或宽度：

```
func imageResized(image: NSImage) -> NSImage {
    let ratio = image.size.height / image.size.width

    let width: CGFloat
    let height: CGFloat
    // We keep ratio of image
    if ratio > 1 {
        width = minimumSize
        height = minimumSize * ratio
    } else {
        width = minimumSize
        height = minimumSize * (1 / ratio)
    }
    let destSize = NSSize(width: width, height: height)

    let newImage = NSImage(size: destSize)
    newImage.lockFocus()
    image.draw(in: NSRect(x: 0, y: 0, width: destSize.width, height: destSize.height), from: NSRect(x: 0, y: 0, width: image.size.width, height: image.size.height), operation: .sourceOver, fraction: 1.0)
    newImage.unlockFocus()
    newImage.size = destSize
    return NSImage(data: newImage.tiffRepresentation!)!
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-08-02T10:07:55.637

仅用于缩放 NSBitmapImageRep

```
static NSBitmapImageRep *i_scale_bitmap(const NSBitmapImageRep *bitmap, const uint32_t width, const uint32_t height)
{
    NSBitmapImageRep *new_bitmap = NULL;
    CGImageRef dest_image = NULL;
    CGColorSpaceRef space = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
    CGContextRef context = CGBitmapContextCreate(NULL, (size_t)width, (size_t)height, PARAM(bitsPerComponent, 8), PARAM(bytesPerRow, (size_t)(width * 4)), space, kCGImageAlphaPremultipliedLast);
    CGImageRef src_image = [bitmap CGImage];
    CGRect rect = CGRectMake((CGFloat)0.f, (CGFloat)0.f, (CGFloat)width, (CGFloat)height);
    CGContextDrawImage(context, rect, src_image);
    dest_image = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(space);
    new_bitmap = [[NSBitmapImageRep alloc] initWithCGImage:dest_image];
    CGImageRelease(dest_image);
    return new_bitmap;
} 
```

以及基于 NSBitmapImageRep 缩放 NSImage

```
ImageImp *imgimp_create_scaled(const ImageImp *image, const uint32_t new_width, const uint32_t new_height)
{
    NSImage *src_image = (NSImage*)image;
    NSBitmapImageRep *src_bitmap, *dest_bitmap;
    NSImage *scaled_image = nil;
    cassert_no_null(src_image);
    cassert([[src_image representations] count] == 1);
    cassert([[[src_image representations] objectAtIndex:0] isKindOfClass:[NSBitmapImageRep class]]);
    src_bitmap = (NSBitmapImageRep*)[[(NSImage*)image representations] objectAtIndex:0];
    cassert_no_null(src_bitmap);
    dest_bitmap = i_scale_bitmap(src_bitmap, new_width, new_height);
    scaled_image = [[NSImage alloc] initWithSize:NSMakeSize((CGFloat)new_width, (CGFloat)new_height)];
    [scaled_image addRepresentation:dest_bitmap];
    cassert([scaled_image retainCount] == 1);
    [dest_bitmap release];
    return (ImageImp*)scaled_image;
} 
```

直接在 NSImage 上绘制（[NSImage lockFocus] 等）将创建一个 NSCGImageSnapshotRep 而不是 NSBitmapImageRep。**

# backbone.js - 骨干网收集网址功能

> ID：11949251
> 
> 赞同：0
> 
> 时间：2012-08-14T09:15:50.820
> 
> 标签：backbone.js

我们正在使用骨干集合从文件中加载 JSON。现在，如果我将文件的相同内容放入数组中并调用 url 函数，似乎没有任何效果。请您帮忙。

```
var cool = {};
cool.Item = Backbone.Model.extend({});
cool.Items = Backbone.Collection.extend({
        model: cool.Item,
                url: "data.json" 
```

此代码有效

```
var cool = {};
cool.Item = Backbone.Model.extend({});
cool.Items = Backbone.Collection.extend({
        model: cool.Item,
                url: this.return(cool_cont());

function cool_cont()
{
* JSON object*
} 
```

此代码不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:22:07.380

你在这方面的逻辑有一些谬误。此处适用的示例是将 url-attribute 定义为`data.json`. 当您获取时会发生什么，Backbone`ajax`对该 url 发出 -request（偶然发现您的文件）并在那里返回内容（您的 json 数据）。

现在你的第二次尝试是一切都出错了。首先：

```
url: this.return(cool_cont()); 
```

我不知道这是做什么的（或更可能不做什么），我也不想知道。url-attribute/function 的基本前提是它旨在

> 在集合上设置 url 属性（或函数）以引用其在服务器上的位置。

-引自[Backbone.js 文档](http://backbonejs.org/#Collection-url)（真实故事）

因此，您在这里所做的是传递要用于填充集合的数据作为对其在服务器上位置的引用（坦率地说，我认为您甚至没有这样做），这是完全错误的。

所以 url == path_to_your_data_be_it_url_or_file

url 可以是字符串（又名静态路径）或函数（例如，使用模型的某些属性作为路径的一部分创建路径）。

如果您想将一些虚假数据插入到您的集合中并且您不想使用外部文件执行此操作，请执行以下操作：

```
var json_data = [
  {"foo": "bar"}, // model 1
  {"foo": "bar2"}, // model 2
  ...
  {"foo": "barN"}, // model N
];

var options = {...}; // optional

var myCollection = new MyCollection(json_data, options); 
```

希望这可以帮助！

# iphone - xcode 中的 xmlparser 和 ASCII 字符

> ID：11949253
> 
> 赞同：0
> 
> 时间：2012-08-14T09:15:53.217
> 
> 标签：iphone, xcode

我在我的项目中遇到了解析器问题。我从 xml 中获取数据，因为我有特殊字符，如 &,%20...。我想将这些符号转换为常规字符，如 &,space() . 请帮我解决这个问题。

我知道一种方法，我们是否需要将 & 替换为 &。但是是否有任何解析器属性可以将这些特殊字符转换为符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:21:01.293

[Objective C HTML 转义/取消转义](https://stackoverflow.com/questions/659602/objective-c-html-escape-unescape)的副本

根据迈克尔瀑布在那篇文章中的建议..

我们有一些类别的 NSString 用于转义 html 标签，请[在此处下载](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

```
- (NSString *)stringByConvertingHTMLToPlainText;
- (NSString *)stringByDecodingHTMLEntities;
- (NSString *)stringByEncodingHTMLEntities;
- (NSString *)stringWithNewLinesAsBRs;
- (NSString *)stringByRemovingNewLinesAndWhitespace; 
```

# mysql - 从字典数据库中获取每个字母系列的索引

> ID：11949255
> 
> 赞同：0
> 
> 时间：2012-08-14T09:16:06.037
> 
> 标签：mysql, sql, algorithm, sql-server-2008

我有字典数据库，我创建了一个 UI 界面，按字母顺序放置按钮，单击每个字母时，我想获取字母系列中的第一个单词

是否有任何技巧或 sql 查询可以列出，每个系列的第一个单词与它的索引

注意：我也有 , 数据库中每个单词的索引列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:47:57.913

对于 SQL 服务器。

```
select ID,
       Word
from
  (
  select ID,
         Word,
         row_number() over(partition by left(Word, 1) order by Word) as rn
  from YourTable
  ) as T
where rn = 1 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/77281)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:20:37.800

尝试：

```
 word like '<letter>%' 
```

前任：

```
word like 'a%'
word like 'b%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:20:59.047

我认为这就是你要找的：

```
SELECT * 
FROM table_name
WHERE word LIKE 'a%'; 
```

在搜索列上添加索引将有助于提高性能：

```
ALTER TABLE table_name add key ix1(word); 
```

或使用`REGEXP`您可以搜索多个字符：

```
WHERE word REGEXP '^[a-d]'; 
```

# python - suds：谷歌应用引擎支持

> ID：11949257
> 
> 赞同：1
> 
> 时间：2012-08-14T09:16:12.250
> 
> 标签：python, xml, google-app-engine, soap, suds

我正在尝试在 python Google App Engine 应用程序中使用 suds。这是回溯：

```
client = Client(url)
  File "/base/data/home/apps/sandbox/test.349741318547153856/suds/client.py",
line 109, in __init__
    options.cache = ObjectCache(days=1)
  File "/base/data/home/apps/sandbox/test.349741318547153856/suds/cache.py",
line 141, in __init__
    location = os.path.join(tmp(), 'suds')
  File "/base/python_runtime/python_dist/lib/python2.5/tempfile.py",
line 45, in PlaceHolder
    raise NotImplementedError("Only tempfile.TemporaryFile is
available for use")
NotImplementedError: Only tempfile.TemporaryFile is available for use 
```

我尝试在**client.py**更改第 109 行：

```
options.cache = ObjectCache(days=1) 
```

至：

```
options.cache = None 
```

它现在有效，但我不确定这是否会影响未来的某些事情。

如果有人可以在这里帮助我，我真的很感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:21:04.117

您无法在 appengine 中写入本地文件。这就是为什么您会遇到错误，它试图将已处理的 WSDL 缓存写入临时文件。您将不必缓存或提供备用缓存机制。我在带有非常昂贵的 WSDL 文件的 appengine 上使用 suds，所以我破解了缓存以在开发服务器文件系统上写入缓存，然后使用部署的代码上传缓存。

我作弊 - 有点。

```
def precache_wsdl(wsdl,principal):
    log = logging.getLogger()
    log.setLevel = logging.info
    cache_location = os.path.join(os.path.dirname(__file__),"cache")
    security = Security()
    token = UsernameToken(*principal)
    security.tokens.append(token)
    client = Client(wsdl,cache=FileCache(cache_location))
    client.set_options(wsse=security) 
```

我在我的 appengine 代码中定义了这段代码。加载远程命令 api，在本地运行，预填充缓存。然后我确定在我的真实 appengine 代码中正确设置了 cach_location。当您在 remote_api shell 中运行时，您不会受到与服务器代码相同的限制。事实上，你甚至不必在 shell 下运行它，但我倾向于这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-22T18:41:16.573

使用 pip 中的 jurko-suds，并`cache=`在构造函数中设置。

```
from suds.cache import NoCache
[...]
client = Client(url, cache=NoCache()) 
```

# php - 我的 facebook 网站应用程序很慢

> ID：11949258
> 
> 赞同：0
> 
> 时间：2012-08-14T09:16:13.760
> 
> 标签：php, facebook, facebook-graph-api

我正在使用专用服务器。1Gbps 端口。

有以下代码（与facebook连接）

```
 if($_POST['friend_id'] != 0) {
        $query = "SELECT uid, first_name, pic, sex FROM user WHERE uid = ".$_POST['friend_id'];
    }
    else {
        $query = "SELECT uid, first_name, pic, sex FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me() order by rand() limit 1)";
    }

    $query = urlencode($query);
    $fql_query_url = 'https://graph.facebook.com/'. 'fql?q='.$query. '&access_token=' . $access_token;
    $response = $facebook->api("/fql?q=$query");
    $data = $response['data']; 
```

然后我使用 uid 来获取用户的照片。

```
 $img = file_get_contents('https://graph.facebook.com/'.$friend_id.'/picture?type=normal');
    $imagesurse1 = $friend_id.uniqid().'.jpg';
    file_put_contents($imagesurse1, $img);

    $img = file_get_contents('https://graph.facebook.com/'.$user_id.'/picture?type=normal');
    $imagesurse2 = $user_id.uniqid().'.jpg';
    file_put_contents($imagesurse2, $img); 
```

这些代码需要 10 秒到 xx 秒。xx 达到了 60。可能是什么问题。

它是一个网站应用程序。网站没有“https”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:21:01.263

Facebook通常很慢。你不能缓存你的结果吗？您可以逐个测试您的代码，以便找出导致问题的部分吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:29:46.940

一般来说，你可以说 Facebook 的 API 有点慢。您应该对您的页面进行基准测试以及最耗时的内容。但我敢打赌这是 Facebook API 调用。

你真的必须下载所有的图片吗？您不能只使用 OpenGraph-URL ( `https://graph.facebook.com/'.$user_id.'/picture?type=normal`) 作为 HTML 图像标签吗？

是否有可能使此调用与 AJAX 异步？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:31:28.670

从头开始：调试问题。很可能只是 Facebook API 很慢，这确实会导致您的脚本等到所有资源都加载完毕，但这些结果可以被缓存。另一个问题可能是您的查询花费的时间太长。尝试使用 XDebug 进行基准测试以查看脚本的慢速部分，并查看您的查询是否具有正确的索引。例如，可以通过使用子查询来优化第二个`join`查询。

# image - 电脑五金店的图片

> ID：11949273
> 
> 赞同：-4
> 
> 时间：2012-08-14T09:17:08.380
> 
> 标签：image, shop

我正在用 asp.net MVC 3 写在线商店。

在查看现有商店时，它们都有产品图片，具有相同的尺寸、分辨率、颜色深度……它们看起来或多或少相似。

他们从哪里得到这些产品图片？产品制造商是否公开？在这种情况下，我发现尺寸、分辨率、颜色深度可能存在问题......

我可以从其他网站“借用”图片吗？或者这不合法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:26:11.447

一般来说，从其他网站“借用”图片是不合法的，尤其是在您经营商业网站的情况下。您可能因提议执行非法行为而被否决，您可能应该将其编辑掉。

您可以检查给定网站/公司对其产品图片的许可，尽管我怀疑这个问题通常是否得到解决（因此许可/版权只是分配给制作该作品的公司，您可以'不要使用它）。您当然可以委托自己的照片（通过库存照片网站或通过您认识的人）。假设您手头有产品，您甚至可以自己拍照（我建议靠近窗户的白色毡背景开始）。

您还可以查找库存照片服务。他们可能已经提供了一些你想要的图片，你可能需要一些。图片要花钱。

# java - JFreeChart - 监听系列的变化

> ID：11949280
> 
> 赞同：2
> 
> 时间：2012-08-14T09:17:45.093
> 
> 标签：java, jfreechart

我如何订阅给定的 JFreeChart 对象以收到有关系列集更改的通知，即插入的新系列或添加到系列的新数据点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:36:37.027

对于数据集：

```
Dataset coll = new XYSeriesCollection();
coll.addChangeListener(new DatasetChangeListener() {
    @Override
    public void datasetChanged(DatasetChangeEvent arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

或者对于 JFreeChart 本身：

```
JFreeChart chart = createChart();
chart.addChangeListener(new ChartChangeListener() {
    @Override
    public void chartChanged(ChartChangeEvent arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

我敢肯定，这也适用于中间的情节和最后的系列。

编辑：只收听添加/删除的系列：

```
final XYSeriesCollection coll = new XYSeriesCollection();
coll.addChangeListener(new DatasetChangeListener() {
    private int numberOfSeries = -1;

    @Override
    public void datasetChanged(DatasetChangeEvent arg0) {
        int numberOfSeriesNew = coll.getSeriesCount();
        if (numberOfSeriesNew == numberOfSeries) {
            // no series was added/removed
        } else if (numberOfSeriesNew < numberOfSeries) {
            // series was removed
            numberOfSeries = numberOfSeriesNew;
        } else {
            // series was added
            numberOfSeries = numberOfSeriesNew;
        }
    }
}); 
```

# c# - C# 阻止从其他线程访问所有对象方法

> ID：11949287
> 
> 赞同：3
> 
> 时间：2012-08-14T09:18:10.123
> 
> 标签：c#, multithreading, locking

我有一个对象，一次只能由一个线程使用。例如，我的对象包含 3 个方法`A`，`B`并且`C`如果线程访问该方法，我想锁定对象（所有方法/属性都被锁定）`A`。

主要困难是我无法修改该对象的代码。我必须防止多线程访问我调用对象的地方。

我的第一个想法是使用单例模式，但我没能成功！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T09:23:26.503

如果您无法更改对象的代码，则必须处理对象*外部*的锁定。例如，您可以将其封装在另一个类中（可能将其隐藏在接口后面），并让该包装类应用同步：

```
public class Foo {
    private readonly YourType tail;
    private readonly object syncLock = new object();
    public Foo(YourType tail) {this.tail = tail;}

    public A() { lock(syncLock) { tail.A(); } }
    public B() { lock(syncLock) { tail.B(); } }
    public C() { lock(syncLock) { tail.C(); } }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T09:24:18.313

单例模式在这里并不合适——它确保对象只有一个实例，但并不规定如何使用它。

代码的线程安全必须*在该代码*中定义。也就是说，如果您无法修改对象的代码，您将无法使其正确地成为线程安全的。但是，有一个解决方法：您可以将对象包装在您创建的新类中，并确保您的新对象*是*线程安全的。通过为不安全对象的方法公开线程安全包装器，您可以确保以您希望的方式访问它。

最简单的方法是使用`lock`关键字。像这样的东西可能会起作用：

```
public class ThreadSafeThing
{
    private UnsafeThing _thing = new UnsafeThing();
    private object _syncRoot = new object();

    public void DoSomething()   // this is your thread-safe version of Thing.DoSomething
    {
        lock (_syncRoot)
        {
            _thing.DoSomething();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:11:23.543

OP没有指定，但如果他的场景包括他需要在多个客户端调用中保持对象锁定的可能性（例如，他需要从客户端调用函数A，然后根据结果调用函数B或C，将对象一直锁定到其他线程）你需要实现一些不同的，例如：

```
public static class ThreadSafeThing {
    private static UnsafeThing _thing = new UnsafeThing();
    private static readonly object _lock = new object();

    public static void getLock() {
        Monitor.Enter(_lock);
    }

    public static void releaseLock() {
        Monitor.Exit(_lock);
    }

    // this is your thread-safe version of Thing.DoSomething             
    public static bool DoSomething() {
        try {
            Monitor.Enter(_lock);
            return _thing.DoSomething();
        }
        finally {
            Monitor.Exit(_lock);
        }
    }

    // this is your thread-safe version of Thing.DoSomethingElse
    public static void DoSomethingElse() {
        try {
            Monitor.Enter(_lock);
            return _thing.DoSomethingElse();
        }
        finally {
            Monitor.Exit(_lock);
        }
    }
} 
```

像这样从客户电话中...

```
try {
    ThreadSafeThing.getLock();
    if (ThreadSafeThing.DoSomething()) {
        ThreadSafeThing.DoSomethingElse();
    } 
}
finally {
    // This must be called no matter what happens
    ThreadSafeThing.releaseLock();
} 
```

这里的主要区别是客户端负责获取锁并在完成后释放它。这允许在保持锁定的同时跨对象调用多个函数。所有其他线程将阻塞 getLock 调用，直到使用 releaseLock 释放锁为止。

EDIT: Added auto-obtaining a lock in the DoSomething and DoSomethingElse methods allowing a thread to also obtain a single-use lock if directly calling these methods without first obtaining a lock via the getLock method. It should be noted, however, that if the lock is obtained this way, it only lasts for the single method call.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:06:03.470

假设您不能只为每个线程创建一个对象，另一种方法是再增加一个线程来调用非线程安全对象的方法，然后将调用请求排队到该线程。通常，线程在对非线程安全对象执行了请求的操作后，应该触发队列​​请求中提供的“OnCompletion”回调。

然后异步执行操作，但您可以通过将请求排队并等待回调发出的事件来进行同步调用。

..只是另一种比简单锁定包装对象更灵活的可能性。

# javascript - 如何从 3taps API 中提取房地产列表？

> ID：11949295
> 
> 赞同：2
> 
> 时间：2012-08-14T09:18:56.280
> 
> 标签：javascript, asp.net, .net

我想从 3taps API 中提取房地产列表。

[http://3taps.com/developers](http://3taps.com/developers)提供了许多类别的列表，但我只想提取房地产类别。

我的开发将在 Microsoft .Net 中所以，我只有一个选择，我有[JS](https://github.com/3taps/3taps-Javascript-Client)

谁能指导我如何实现这个 API？

我已经尝试了以下代码。

```
<html>
<head>
    <title>Jasmine Test Runner</title>
    <link rel="stylesheet" type="text/css" href="lib/jasmine-1.0.2/jasmine.css">
    <script type="text/javascript" src="lib/jasmine-1.0.2/jasmine.js"></script>
    <script type="text/javascript" src="lib/jasmine-1.0.2/jasmine-html.js"></script>
    <!-- include source files here... -->
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="json.js"></script>
    <script type="text/javascript" src="3taps.js"></script>
    <!-- include spec files here... -->
    <script type="text/javascript" src="3tapsSpec.js"></script>
</head>
<body>
    <script type="text/javascript">
        jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
        jasmine.getEnv().execute();

    var items = new threeTapsClient("crcq5ztyvj6duvuzk4pbatqn").search.search({ text: 'Real Estate', category: 'Want Housing' }, function (results) { console.log(results) });

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-12T14:23:07.230

不确定这是否有帮助，但 3taps 的文档在这里：[http ://docs.3taps.com/index.html](http://docs.3taps.com/index.html)

有一个“参考”和一个“搜索”API。参考 API 对于选择要传递给“搜索”API 的类别和位置很有用。该文档应该让您了解如何格式化 url 以传递给 API。

# iphone - iOS 错误：“Project”没有可见的@interface 声明选择器“alloc”

> ID：11949297
> 
> 赞同：12
> 
> 时间：2012-08-14T09:19:03.813
> 
> 标签：iphone, objective-c, ios

我正在初始化一个像这样的对象：

```
Project *Project = [[Project alloc] init]; 
```

这是项目类的代码：

**项目.h**

```
#import <Foundation/Foundation.h>

@interface Project : NSObject
{

}

    @property (nonatomic,assign) int projectID; 
    @property (nonatomic,strong) NSString *name; 

@end 
```

**项目.m**

```
#import "Project.h"

@implementation Project

    @synthesize projectID, name;

@end 
```

**`No visible @interface for 'Project' declares the selector 'alloc'` **尝试初始化对象时****出现错误。**我该如何解决这个问题？**

 *** * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-14T09:21:28.580

您似乎正在尝试调用与类完全相同的变量：`Project *Project`。难怪编译器会感到困惑！

将变量名切换为小写，`Project *project`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T09:27:36.033

永远不要使用类名作为实例引用名。

```
GoddamnClass *GoddamnClass = [GoddamnClass new]; // will have problems

GoddamnClass *anInstanceOfGoddamnClass = [GoddamnClass new]; // works like a magic 
```**

# asp.net - 根据数据绑定值显示或隐藏控件

> ID：11949299
> 
> 赞同：1
> 
> 时间：2012-08-14T09:19:12.200
> 
> 标签：asp.net

我在编辑表单中有一个部分（使用`<asp:FormView>`），我想根据数据绑定字段的值以不同的方式显示该部分。

它目前看起来像这样：

```
<asp:Panel runat="server" Visible='<%# Eval("ClosedBy") != null %>'>
   Closed by user <%# Eval("ClosedBy") %> on <%# Eval("ClosedDate") %>
   <asp:Button runat="server" Text="Reopen" OnClick="Reopen" />
</asp:Panel>
<asp:Panel runat="server" Visible='<%# Eval("ClosedBy") == null %>'>
   <asp:Button runat="server" Text="Close" OnClick="Close" />
</asp:Panel> 
```

（我稍微简化了这个例子，两个面板都有更多的内容。）

有没有更好的方法来处理这个问题？有没有办法避免两次写入显示条件，一次用于“if”面板，一次用于“else”面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:24:46.613

您可以在页面的 OnLoad 处理程序的后端代码中执行此操作。OnLoad 在页面加载并数据绑定后立即触发，因此您的面板和数据源都可用。

您需要为两个面板提供如下 ID：

```
<asp:Panel id="closedByPanel" runat="server">
   <asp:Button runat="server" Text="Close" OnClick="Close" />
</asp:Panel> 
```

在您的后端代码中，您现在可以这样做：

```
protected void OnLoad(object sender, EventArgs e)
{
  closedByPanel.Visible = (someDomainItem.ClosedBy != null);
} 
```

# c# - 找不到方法：GetCipher Org.BouncyCastle.Security.CipherUtilities

> ID：11949301
> 
> 赞同：1
> 
> 时间：2012-08-14T09:19:18.270
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, aes, bouncycastle

我在我的 windows phone 项目中使用 BouncyCastle dll。但是会抛出一个错误：

找不到方法：GetCipher Org.BouncyCastle.Security.CipherUtilities。

有什么问题？以下是我的用法：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.IO.IsolatedStorage;
using System.Linq;
using System.Net;
using System.Security.Cryptography;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Xml.Linq;
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Parameters;
using Org.BouncyCastle.Security; 
```

和我的代码：

```
**string result = decrypt("string", "key");//error here!**

public static string decrypt(string encryptedhexstring, string password)
        {
            #region decrypt

            //Covert from hexstring to bytearray
            byte[] encryptedData = Encoding.UTF8.GetBytes(encryptedhexstring);

            var key = Encoding.UTF8.GetBytes(password);
            // AES algorthim with ECB cipher &amp; PKCS5 padding...
            var cipher = CipherUtilities.GetCipher("AES/ECB/PKCS5PADDING");

            // Initialise the cipher...
            cipher.Init(false, new KeyParameter(key));

            // Decrypt the data and write the 'final' byte stream...
            var decryptionbytes = cipher.ProcessBytes(encryptedData);
            var decryptedfinal = cipher.DoFinal();

            // Write the decrypt bytes &amp; final to memory...
            var decryptedstream = new MemoryStream(decryptionbytes.Length);
            decryptedstream.Write(decryptionbytes, 0, decryptionbytes.Length);
            decryptedstream.Write(decryptedfinal, 0, decryptedfinal.Length);
            decryptedstream.Flush();

            var decryptedData = new byte[decryptedstream.Length];
            decryptedstream.Position = 0;
            decryptedstream.Read(decryptedData, 0, (int)decryptedstream.Length);

            // Convert the decrypted data to a string value...
            var resultdecrypted = Encoding.UTF8.GetString(decryptedData, 0, decryptedData.Length);

            return resultdecrypted;

            #endregion
        } 
```

# actionscript-3 - 是否可以将 Flash Player 11 API 与 OpenLaszlo 一起使用？

> ID：11949303
> 
> 赞同：2
> 
> 时间：2012-08-14T09:19:27.533
> 
> 标签：actionscript-3, flash, openlaszlo

我正计划构建一个小型应用程序，它使用 Flash Player 11 的某些功能。是否可以使用 OpenLaszlo 来定位 Flash Player 11 API？在[这个讨论](https://stackoverflow.com/questions/11881562/how-can-i-add-actionscript-3-import-statements-to-lzx-class-definitions-with-ope)中，它展示了如何将 ActionScript 包导入 OpenLaszlo 应用程序，但根据[4.9 版的编译器描述，](http://www.openlaszlo.org/lps4.9/docs/developers/compiler.html)似乎只有一个 swf10 运行时，针对 Flash Player 10 APIS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:28:32.737

OpenLaszlo 的一个分支是几周前创建的，支持 SWF11 运行时。[在 Assembla.com 的 OpenLaszlo 社区空间中](http://www.assembla.com/spaces/openlaszlo-community/messages/2084343)查看相应的线程

目前，该版本的 OpenLaszlo 仅作为夜间构建提供，可在[此处](http://download.openlaszlo.org/nightly/flex4.6/)下载。似乎计划发布支持 SWF11 运行时的 OpenLaszlo 5.0 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:50:20.363

我为 OpenLaszlo 实现了 SWF11 运行时功能，但不知道什么时候会有新的运行时支持的正式版本。flex4.6 分支对于 SWFx 开发应该非常稳定，您可以在生产中使用它。

下面是一个代码示例，展示了如何[在 ActionScript 中使用新的 JSON 类，该类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)是随 Flash Player 11.0 添加的：

```
<canvas debug="true">

  <script>
    var person = {
      lastname: "Hendrix",
      firstname: "Jimmy",
      birthday: "November 27, 1942"
    };
    var jsonStr = JSON.stringify(person)
    Debug.info(jsonStr);
  </script>

</canvas> 
```

如果您使用 swf11 运行时编译应用程序，您应该在 OpenLaszlo 调试器中看到以下输出：

> 信息：{“名字”：“吉米”，“姓氏”：“亨德里克斯”，“生日”：“1942 年 11 月 27 日”}

如果您尝试使用 swf10 运行时编译应用程序，您将看到以下编译器错误：

> 编译错误
> 
> org.openlaszlo.sc.CompilerError: json.lzx: 9: Error: Access of undefined property JSON, in line: jsonStr = JSON.stringify(person);

# string - 询问用户并在消息接收器中发回响应

> ID：11949312
> 
> 赞同：4
> 
> 时间：2012-08-14T09:20:13.690
> 
> 标签：string, delphi, delphi-7, pchar

我想要求用户输入密码。由于有时在与运行 VCL 的主线程不同的线程中需要密码，因此我尝试向主窗口发送一条消息并询问密码。然后主窗口询问用户。

我如何询问用户：

```
procedure TMainForm.WMGetPassword(var Msg: TMessage);
var
  Password: String;
begin
  if QueryPassword(Password) then // function QueryPassword(out Password: String): boolean;
  begin
    Password := Password + #0; // Add #0-Terminator
    Move(Password[1], Msg.wParam, Length(Password) * sizeOf(Char)); // Copy the String in my buffer
    Msg.Result := 1;
  end
  else
  begin
    Msg.Result := 0;
  end;
end; 
```

我如何询问主窗口：

```
var
  PasswordBuffer: PChar;
  Password: String;
begin
  PasswordBuffer := AllocMem(100 * sizeof(Char));
  PasswordResult := SendMessage(MainFormHWND, WM_GetPassword, Integer(PasswordBuffer), 0);
  Result := (PasswordResult <> -1);
  if not Result then
    Exit;

  SetString(Password, PasswordBuffer, 100);
  ShowMessage(Password);
end; 
```

但是`Password`之后`PasswordBuffer`是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:30:15.657

由于您将 Msg.wParam 作为第二个参数传递，因此它将您的字符串写入该位置，而不是您尝试指向的位置。它将覆盖存储在 Msg.wParam、Msg.lParam、Msg.Result 中的值 + 可能还有堆栈上的其他一些信息。

代替：

```
Move(Password[1], Msg.wParam, Length(Password) * sizeOf(Char)); 
```

你应该使用：

```
Move(Password[1], PChar(Msg.wParam)^, Length(Password) * sizeOf(Char)); 
```

如果要使用指针，请使用 MoveMemory。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:33:02.697

只要线程在同一个进程中（因此它共享相同的地址空间），您的代码就应该可以工作。然而，它不必要地复杂并且有内存泄漏（`PasswordBuffer`永远不会被释放）。

您可以在线程中使用字符串变量并将地址传递给其内部预分配缓冲区到主线程：

```
type
  TTestThread = class(TThread)
  private
    fHwnd: HWND;
  protected
    procedure Execute; override;
  public
    constructor Create(AWnd: HWND);
  end;

constructor TTestThread.Create(AWnd: HWND);
begin
  fHwnd := AWnd;
  inherited Create(False);
end;

procedure TTestThread.Execute;
const
  MAXLEN = 1024;
var
  s: string;
begin
  SetLength(s, MAXLEN);
  if SendMessage(fHwnd, WM_GETPASSWORD, MAXLEN, LPARAM(@s[1])) > 0 then begin
    s := PChar(s);
    // don't use VCL here
    Windows.MessageBox(0, PChar('password is "' + s + '"'), 'password',
      MB_ICONINFORMATION or MB_OK);
  end;
end; 
```

在主线程中，密码被放入缓冲区，长度限制为缓冲区大小：

```
procedure TForm1.WMGetPassword(var AMsg: TMessage);
var
  Pwd: string;
begin
  if InputQuery('Password Entry', 'Please enter the password:', Pwd)
    and (Pwd <> '')
  then begin
    StrPLCopy(PChar(AMsg.LParam), Pwd, AMsg.WParam);
    AMsg.Result := 1;
  end else
    AMsg.Result := -1;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T10:55:44.990

@Dan 做对了，加上 @mghie 发现了泄漏。

这是不涉及指针的另一种方法：

```
type
  TMyMessage = class
    msg: string;
  end;

procedure TMainForm.WMGetPassword(var Msg: TMessage);
var
  SMessage: TMyMessage;
  Password: string;
begin
  if QueryPassword(Password) then 
  begin
    SMessage := TMyMessage(msg.WParam);
    SMessage.msg := Password;
    msg.Result := 1;
  end
  else
  begin
    Msg.Result := 0;
  end;
end;

var
  MyMsg: TMyMessage;
begin
  MyMsg := TMyMessage.Create('');
  try
    PasswordResult := SendMessage(FormHandleHWND,WM_GetPassword,WPARAM(MyMsg),0);
    Result := (PasswordResult <> -1);
    if Result
      then Password := MyMsg.msg;
  finally
    MyMsg.Free;
  end;
end; 
```

# java - Hibernate Envers 审计 - 'delete' 没有被审计，在 'add' 许多 'edit' 记录被添加之后

> ID：11949313
> 
> 赞同：2
> 
> 时间：2012-08-14T09:20:25.177
> 
> 标签：java, spring, hibernate, hibernate-envers

我们有一个实体（'Something'），它的 ManyToOne 映射到 'ListOfSomething' 和 'SomethingSource'。我们用@Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED) 标记了ManyToOne 关联字段。

删除实体后，Something_Aud 表中不会创建任何记录。添加实体后 - 一些记录被添加到 Something_Aud 表中：单个“添加”记录，以及与匹配 ListOfSomething 中的实体数量一样多的“编辑”记录。

我们做错了什么？如果需要，将很乐意提供更多信息。

# symfony-2.1 - Symfony 2.1 - 在没有 Composer 的情况下安装包

> ID：11949317
> 
> 赞同：1
> 
> 时间：2012-08-14T09:20:44.697
> 
> 标签：symfony-2.1, composer-php

仍然没有`composer.json`包含许多捆绑包，那么在没有 composer 的情况下安装它们的正确方法是什么？我们还应该使用`deps`file 吗？在这种情况下如何管理自动加载器？请不要告诉我分叉每个项目并添加`composer.json`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:28:09.463

您可以使用[包存储库](https://getcomposer.org/doc/05-repositories.md#package-2)为您的内联包指定 composer.json 。也就是说，一旦你这样做了，最好的办法就是分叉捆绑包并使用 composer.json 发送拉取请求。大多数捆绑包已经可用，如果边缘捆绑包在有人需要时立即收到拉取请求，情况将很快得到改善。

# ruby - Watir-Webdriver - 运行测试时框架中的 Div 永远不会停止加载

> ID：11949320
> 
> 赞同：0
> 
> 时间：2012-08-14T09:20:54.100
> 
> 标签：ruby, cucumber, watir-webdriver

我正在使用 cucumber、watir-webdriver 和 ruby​​ 进行自动化项目。我在加载不停止的 div 时遇到了一些大问题。我正在处理的网页包含一个在报告生成表单中的框架。从表单中选择设置并生成报告后，应在表单下加载一个带有结果的 div。可以为其生成报告的选项和元素有很多。如果我选择生成较小报告的选项，则一切正常，并且 Div 会按预期加载。但是，当生成更大的报告时，带有结果的 Div 会在不停止的情况下加载（没有结果出现，只有在加载过程完成后才会出现带有结果的实际 Div）。

如果我手动执行这些操作，一切都会正常工作。我添加了一个“wait_until_present(500)”，但这没用。

在 watir-webdriver 的框架内加载 Div 是否存在问题？或者在测试运行时是否存在导致应用程序工作错误的事情？

如果应用程序必须等待很长时间才能加载 Div，则该应用程序似乎正在停止。我再说一遍，这不能手动复制。

有人知道为什么会这样吗？:(

谢谢你。

# ajax - 从 Struts 列表中获取特定对象

> ID：11949324
> 
> 赞同：0
> 
> 时间：2012-08-14T09:21:00.607
> 
> 标签：ajax, struts2

在我的视图页面中，我有

```
 <s:if test="%{!assignedProductBean.roleList.isEmpty()}">
  <s:select theme="simple" name="roleCode" id="selectRole"
    cssStyle="width:118px;" list="assignedProductBean.roleList"
    listKey="roleCode" listValue="roleCode" headerKey=""
    headerValue="--Select--" onchange="javascript:showRoleCharDiv()" />
 </s:if> 
```

在 showRoleCharDiv 中，我有一些代码从 roleList arrayList 中获取所选角色的数据。

我如何知道选择了哪个对象，以便我可以直接显示相应的角色对象的其他属性而无需点击 Action。

还有一个疑问，是否有可能使用 Ajax 获取任何 jsp 页面，而无需实际访问 struts 中的 Action 类。我的 bean 中有所需的所有数据，但没有击中动作类，我需要用另一个 jsp 替换 div 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:55:58.933

即使您在第一次操作调用中获得了 bean 中的所有数据，但除非您在`showRoleCharDiv`JSP 中评估并打印它，否则不会存储该数据。如果您不想再次调用 Action，那么您必须在第一次将所有对象加载到 JSP 中并使用 CSS 将其隐藏在视图中。您可以使用 javascript 然后取消隐藏所选对象的数据。

但我不建议走这条路。

您可以使用 Ajax 将 div 元素替换为另一个 jsp，但这需要再次调用 Action 类。

# gwt - 谷歌地图自动完成鼠标点击选择不起作用

> ID：11949326
> 
> 赞同：4
> 
> 时间：2012-08-14T09:21:05.787
> 
> 标签：gwt, google-maps-api-3

我有我的 GWT TextBox 小部件，我在其中添加了 google maps api Autocomplete。我可以在那里看到建议，但我无法通过单击鼠标来选择任何内容。当我将鼠标悬停在项目上时，我可以看到线条正在改变颜色。任何想法要检查什么或在哪里看？

我的 GWT 代码：

```
public void setAutocomplete() {
    Element element = text.getElement();
    MapWidget mapWidget = AbstractController.getInstance().getMapWidget();
    LatLng sw = LatLng.newInstance(47.1060978, 11.00138);
    LatLng ne = LatLng.newInstance(47.5904034, 11.9958484);
    LatLngBounds c = LatLngBounds.newInstance(sw, ne);
    initAutocomplete(element, c, mapWidget);
}

public static native void initAutocomplete(Element element, LatLngBounds mybounds, MapWidget mapWidget) /*-{
    var options = {
        types : [ 'geocode' ],
        componentRestrictions : {
            country : 'at'
        },
        bounds : mybounds
    };

    autocomplete = new $wnd.google.maps.places.Autocomplete(element,options);
    autocomplete.setBounds(mybounds);
}-*/; 
```

# xml - 难以成功定义唯一约束

> ID：11949329
> 
> 赞同：2
> 
> 时间：2012-08-14T09:21:14.353
> 
> 标签：xml, xsd, xml-validation

我有以下 XML 文档：

```
<?xml version="1.0"?>
<BillingRunParameters>
 <BusinessUnit BillFullBusinessUnit="false">XXXXXXXX</BusinessUnit>
 <Portal BillFullPortal="false">XXXXXXX</Portal>
 <BillingTargets>
  <CustomerIdList CustomerBilling="true">
   <CustomerId>1234567891</CustomerId>
   <CustomerId>1234567891</CustomerId>
  </CustomerIdList>
  <TransactionIdList TransactionBilling="true" ApplicationTransactions="true">
   <TransactionId>12345ABC</TransactionId>
   <TransactionId>1232K89C</TransactionId>
  </TransactionIdList>
 </BillingTargets>
</BillingRunParameters> 
```

我将以下 XML Schema 放在一起进行验证。我的 XSD 包含对 CustomerId 元素的唯一约束。可以存在多个 CustomerId 元素，但不能有多个包含相同值的元素（如上所示）。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xdb="http://xmlns.oracle.com/xdb" version="1.0" xdb:storeVarrayAsTable = "true">
  <xs:element name="BillingRunParameters" xdb:defaultTable="XSD_BILLING_PARAMETERS">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="BusinessUnit" type="typeBusinessUnit" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Portal" type="typePortal" minOccurs="1" maxOccurs="1"/>
        <xs:element name="BillingTargets" type="typeBillingTargets"  minOccurs="0" maxOccurs="1" xdb:defaultTable="XSD_BILLING_TARGETS"/>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="testCustomerIdUnique">
      <xs:selector xpath="BillingTargets/CustomerIdList"/>
      <xs:field xpath="CustomerId"/>
    </xs:unique>
  </xs:element>

  <xs:simpleType name="valiatorBusinessUnit">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="30"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="typeBusinessUnit">
    <xs:simpleContent>
      <xs:extension base="valiatorBusinessUnit">
        <xs:attribute name="BillFullBusinessUnit" type="xs:boolean" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType >

  <xs:simpleType name="valiatorPortal">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="30"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="typePortal">
    <xs:simpleContent>
      <xs:extension base="valiatorPortal">
        <xs:attribute name="BillFullPortal" type="xs:boolean" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <xs:complexType name="typeBillingTargets">
    <xs:sequence>
      <xs:element name="CustomerIdList" type="typeCustomerIdList" minOccurs="1" maxOccurs="1"/>
      <xs:element name="TransactionIdList" type="typeTransactionIdList" minOccurs="1" maxOccurs="1"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="typeCustomerIdList">
    <xs:sequence>
      <xs:element name="CustomerId" type="typeCustomerId" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="CustomerBilling" type="xs:boolean" use="required"/>
  </xs:complexType>
  <xs:simpleType name="typeCustomerId">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="20"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="typeTransactionIdList">
    <xs:sequence>
      <xs:element name="TransactionId" type="typeTransactionId" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="TransactionBilling" type="xs:boolean" use="required"/>
    <xs:attribute name="ApplicationTransactions" type="xs:boolean" use="required"/>
  </xs:complexType>
  <xs:simpleType name="typeTransactionId">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="20"/>
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

我正在使用以下在线验证工具：

[XML-XSD 验证工具](http://www.xmlforasp.net/schemavalidator.aspx)

不幸的是，所有唯一约束指令似乎都将我限制为单个 CustomerId 元素。我收到以下错误消息：

**“CustomerId”字段最多需要一个值。行：1 列：271 **

这里值得一提的是，如果我更改第二个元素的值，我仍然会收到此错误消息。最让人头疼的是......

我很确定这不是在线验证工具的问题。它适用于我在 Stackoverflow 上找到的以下示例：

[如何确保 XML 模式验证文档中的唯一值](https://stackoverflow.com/questions/2386633/how-do-i-ensure-unique-element-values-in-an-xml-schema)

这整个问题都在驱使我思考。我花了几个小时尝试各种语法都无济于事。**上面的错误消息与我在我的架构中实际有独特的**工作一样接近.....

有没有人有任何想法......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:14:20.407

你所要做的就是改变这个约束：

![在此处输入图像描述](../Images/877d001d03bb41f60c97c74d24c32013.png)

对此：

![在此处输入图像描述](../Images/2cde7f6586a6a6945dad2e780312219e.png)

相关的 XSD：

```
<xs:unique name="testCustomerIdUnique"> 
    <xs:selector xpath="BillingTargets/CustomerIdList/CustomerId"/> 
    <xs:field xpath="."/> 
</xs:unique> 
```

这个想法是具有值的唯一性，而不是元素的唯一性（这就是错误消息告诉您的内容）。

# java - BigDecimal 乘以零

> ID：11949330
> 
> 赞同：58
> 
> 时间：2012-08-14T09:21:16.067
> 
> 标签：java, bigdecimal, numerical-analysis, rounding-error

我正在使用 BigDecimal 执行简单的乘法运算，并且在乘以零时发现了一些奇怪的行为（在此用例中乘以零是正确的）。

基本数学告诉我，任何乘以零都将等于零（请参阅：[零乘积属性](http://en.wikipedia.org/wiki/Zero-product_property)和[乘法属性](http://en.wikipedia.org/wiki/Multiplication#Properties)）

但是，以下代码将始终失败并出现相同的错误：

```
assertEquals(new BigDecimal(0), new BigDecimal(22.3).multiply(new BigDecimal(0))); 
```

> ```
> java.lang.AssertionError: 
> Expected :0
> Actual   :0E-48 
> ```

这是 BigDecimal 的不准确之处，还是我在某处遗漏了一些特定的数学分支？

注意：在 IntelliJ 11 中运行的 JDK 1.6.0_27

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-14T09:24:35.130

你不能使用`equals()`方法来比较`BigDecimals`，就像这个断言一样。那是因为 this equals 函数会比较***scale***。如果比例不同，`equals()`将返回 false，即使它们在数学上是相同的数字。

但是，您可以`compareTo()`用来做您想做的事情：

正如@assylias 指出的那样，您还应该使用`new BigDecimal("22.3")`构造函数来避免双精度问题。

```
BigDecimal expected = BigDecimal.ZERO;
BigDecimal actual = new BigDecimal("22.3").multiply(BigDecimal.ZERO);
assertEquals(0, expected.compareTo(actual)); 
```

还有一个称为 的方法`signum()`，它返回 -1、0 或 1 表示负数、零和正数。所以你也可以用

```
assertEquals(0, actual.signum()); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-14T09:28:15.943

您的代码有两个问题：

*   您应该按照其他答案的建议将 BigDecimal 与 compareTo 而不是 equals 进行比较
*   但你也应该使用字符串构造函数：`new BigDecimal("22.3")`而不是双构造函数`new BigDecimal(22.3)`以避免双精度问题

换句话说，以下代码（正确使用 compareTo）仍然返回 false：

```
BigDecimal bd = new BigDecimal(0.1).multiply(new BigDecimal(10));
System.out.println(bd.compareTo(BigDecimal.ONE) == 0); 
```

因为`0.1d * 10d != 1`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-14T09:25:50.030

`equals()`on[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)检查内部状态以`BigDecimal`进行比较

参考下面的代码

```
public boolean equals(Object x) {
    if (!(x instanceof BigDecimal))
        return false;
    BigDecimal xDec = (BigDecimal) x;
    if (x == this)
        return true;
    if (scale != xDec.scale)
        return false;
    long s = this.intCompact;
    long xs = xDec.intCompact;
    if (s != INFLATED) {
        if (xs == INFLATED)
            xs = compactValFor(xDec.intVal);
        return xs == s;
    } else if (xs != INFLATED)
        return xs == compactValFor(this.intVal);

    return this.inflate().equals(xDec.inflate());
} 
```

如果你想比较值使用[`compareTo()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)

将您的代码更改为

```
assertEquals(0 , new BigDecimal(0).compareTo(new BigDecimal(22.3).multiply(new BigDecimal(0))); 
```

* * *

**更新：**

使用构造函数将 String 作为 BigDecimal 的参数，以确保精度检查下面的相关链接

* * *

**另见**

*   [评估 100 * 2.55 值时得到错误结果](https://stackoverflow.com/questions/11737768/getting-wrong-result-for-evaluation-of-100-2-55-values)
*   [带有字符串构造函数的 Java BigDecimal 错误以使用 ROUND_HALF_UP 进行舍入](https://stackoverflow.com/questions/11368496/java-bigdecimal-bugs-with-string-constructor-to-rounding-with-round-half-up)

# r - 将三阶多项式及其方程添加到 r 中的 ggplot

> ID：11949331
> 
> 赞同：33
> 
> 时间：2012-08-14T09:21:18.143
> 
> 标签：r, ggplot2

我绘制了以下数据并添加了黄土平滑器。我想在图中添加一个三阶多项式及其方程（包括残差）。有什么建议吗？

```
set.seed(1410)
dsmall<-diamonds[sample(nrow(diamonds), 100), ]
df<-data.frame("x"=dsmall$carat, "y"=dsmall$price)

p <-ggplot(df, aes(x, y)) 
p <- p + geom_point(alpha=2/10, shape=21, fill="blue", colour="black", size=5)

#Add a loess smoother
p<- p + geom_smooth(method="loess",se=TRUE) 
```

![在此处输入图像描述](../Images/82104b4a5dc617ab2c8201f43f645540.png)

如何添加三阶多项式？我试过了：

```
p<- p + geom_smooth(method="lm", se=TRUE, fill=NA,formula=lm(y ~ poly(x, 3, raw=TRUE)),colour="red") 
```

最后，如何将三阶多项式方程和残差添加到图中？我试过了：

```
 lm_eqn = function(df){
    m=lm(y ~ poly(x, 3, df))#3rd degree polynomial
    eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2,
    list(a = format(coef(m)[1], digits = 2),
    b = format(coef(m)[2], digits = 2),
    r2 = format(summary(m)$r.squared, digits = 3)))
    as.character(as.expression(eq))
}

data.label <- data.frame(x = 1.5,y = 10000,label = c(lm_eqn(df)))

p<- p + geom_text(data=data.label,aes(x = x, y = y,label =label), size=8,family="Times",face="italic",parse = TRUE) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-14T09:26:06.923

第 1 部分：要拟合多项式，请使用以下参数：

*   `method=lm`- 你做对了
*   `formula=y ~ poly(x, 3, raw=TRUE)`- 即不要将其包装在调用中`lm`

编码：

```
p + stat_smooth(method="lm", se=TRUE, fill=NA,
                formula=y ~ poly(x, 3, raw=TRUE),colour="red") 
```

![在此处输入图像描述](../Images/c5726bfce2e5fca2a04678a6b59c012a.png)

* * *

第 2 部分：添加等式：

*   修改您的函数`lm_eqn()`以正确指定数据源`lm`- 您在错误的地方有一个右括号
*   用于`annotate()`定位标签，而不是`geom_text`

编码：

```
lm_eqn = function(df){
  m=lm(y ~ poly(x, 3), df)#3rd degree polynomial
  eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2,
                   list(a = format(coef(m)[1], digits = 2),
                        b = format(coef(m)[2], digits = 2),
                        r2 = format(summary(m)$r.squared, digits = 3)))
  as.character(as.expression(eq))
}

p + annotate("text", x=0.5, y=15000, label=lm_eqn(df), hjust=0, size=8, 
             family="Times", face="italic", parse=TRUE) 
```

![在此处输入图像描述](../Images/68e465b5a9d82a14685d3d4492d54be0.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-01-07T15:27:43.367

答案 1，是一个好的开始，但它不是所要求的 3 次多项式，并且不能正确处理参数估计的负值。最简单的是使用 package `polynom`。我将展示一个不定义函数的版本，因为在这种情况下，真的应该使用**ggplot 。** `stat_`

下面我将展示如何生成文本以用作任何次数多项式的解析标签。我使用`signif()`而不是`format()`因为这对参数估计更有用。另请注意，`face`不再需要。使用`family = "Times"`是不可移植的，使用`"serif"`. 所有的辛苦都是由`as.character.polynomial()`！

```
library(polynom)
library(ggplot2)

set.seed(1410)
dsmall <- diamonds[sample(nrow(diamonds), 100), ]
df <- data.frame("x"=dsmall$carat, "y"=dsmall$price)

my.formula <- y ~ poly(x, 3, raw = TRUE)
p <- ggplot(df, aes(x, y)) 
p <- p + geom_point(alpha=2/10, shape=21, fill="blue", colour="black", size=5)
p <- p + geom_smooth(method = "lm", se = FALSE, 
                     formula = my.formula, 
                     colour = "red")

m <- lm(my.formula, df)
my.eq <- as.character(signif(as.polynomial(coef(m)), 3))
label.text <- paste(gsub("x", "~italic(x)", my.eq, fixed = TRUE),
              paste("italic(R)^2",  
                    format(summary(m)$r.squared, digits = 2), 
                    sep = "~`=`~"),
                    sep = "~~~~")

p + annotate(geom = "text", x = 0.2, y = 15000, label = label.text, 
             family = "serif", hjust = 0, parse = TRUE, size = 4) 
```

[![在此处输入图像描述](../Images/1f391804e0f529b698e1931bac28894f.png)](https://i.stack.imgur.com/IF9mj.png)

最后一点：方差随均值的增加而增加，因此使用`lm()`3 次多项式模型可能不是分析这些数据的最佳方法。

# java - 将原始类型对象列表作为子报表的数据源传递

> ID：11949333
> 
> 赞同：18
> 
> 时间：2012-08-14T09:21:22.293
> 
> 标签：java, jasper-reports

我需要借助主报表的参数将*数据源传递给我的子报表。****`List<String>`***我不知道什么是正确的数据源类型*以及*如何在子报表中获取值。

我的主报告中的片段：

```
<parameter name="seznamPriloh" class="java.util.List" isForPrompting="false"/>
....
<subreport>
    <reportElement x="0" y="56" width="555" height="76"/>
    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{seznamPriloh})]]></dataSourceExpression>
            <subreportExpression><![CDATA[cz.alis.keong.jasjdr.reporting.ReportCompiler.compile("R79_SeznamPriloh")]]></subreportExpression>
</subreport> 
```

我的子报告中的片段：

```
<detail>
    <band height="23">
        <textField>
            <reportElement x="56" y="3" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$F{}]]></textFieldExpression>
        </textField>
    </band>
</detail> 
```

请告诉我如何通过主报告的***`java.util.List<String>`***类型参数将数据源传递给子报告。

编辑：08.14 14:20 将标签添加到 Java

编辑：08.14 15:30 与[如何打印 iReport 中另一个列表中包含的字符串列表有关？](https://stackoverflow.com/questions/1771864/how-do-i-print-a-list-of-strings-contained-within-another-list-in-ireport)适用于 4.5.0 和***`List<String>`***

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-14T10:57:11.987

您必须指定您在子报告中使用的字段。您正在传递*`$F{}`*，并且当您传递 a`List<String>`作为 DataSource 时，您应该输入**`$F{_THIS}`**. 当然，您也必须添加一个具有该名称的字段，只有这样做您才能使用表达式`$F{somefield}`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T11:09:25.223

您可以使用此数据源表达式将***java.util.List***（通过参数）传递给子报表：

```
<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{seznamPriloh})]]></dataSourceExpression> 
```

*工作样本，主报告：*

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="listParam" class="java.util.List"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["<subreport_dir>"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT id, street, city FROM address]]>
    </queryString>
    <field name="ID" class="java.lang.Integer"/>
    <field name="STREET" class="java.lang.String"/>
    <field name="CITY" class="java.lang.String"/>
    <detail>
        <band height="57" splitType="Stretch">
            <frame>
                <reportElement x="0" y="0" width="539" height="57"/>
                <box>
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <subreport>
                    <reportElement x="0" y="32" width="523" height="17"/>
                    <subreportParameter name="cityParam">
                        <subreportParameterExpression><![CDATA[$F{CITY}]]></subreportParameterExpression>
                    </subreportParameter>
                    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{listParam})]]></dataSourceExpression>
                    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "subreport_list_as_param.jasper"]]></subreportExpression>
                </subreport>
                <textField>
                    <reportElement x="300" y="0" width="208" height="20"/>
                    <box leftPadding="10"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA["City: " + $F{CITY}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="100" y="0" width="200" height="20"/>
                    <box leftPadding="10"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA["Street: " + $F{STREET}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="0" y="0" width="100" height="20"/>
                    <box leftPadding="10"/>
                    <textElement>
                        <font isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA["Id: " + $F{ID}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </detail>
</jasperReport> 
```

*子报告*：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="cityParam" class="java.lang.String"/>
    <field name="id" class="java.lang.Integer"/>
    <field name="station" class="java.lang.String"/>
    <field name="city" class="java.lang.String"/>
    <filterExpression><![CDATA[$F{city}.equals($P{cityParam})]]></filterExpression>
    <title>
        <band height="39">
            <textField>
                <reportElement x="220" y="14" width="161" height="20"/>
                <box leftPadding="10"/>
                <textElement>
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA["City param: " + $P{cityParam}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <box leftPadding="10"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{station}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <noData>
        <band height="50">
            <textField>
                <reportElement x="220" y="17" width="161" height="20"/>
                <box leftPadding="10"/>
                <textElement>
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA["No data for city param: " + $P{cityParam}]]></textFieldExpression>
            </textField>
        </band>
    </noData>
</jasperReport> 
```

****用于传递List****的 Java 代码*：*

 *```
Map<String, Object> params = new HashMap<String, Object>();

List<TestBean> beansList = new ArrayList<TestBean>();

// The TestBean class constructor is: 
//public TestBean(String city, Integer id, String station)
TestBean bean = new TestBean("Dallas", 10, "Central park st.");
beansList.add(bean);

bean = new TestBean("Dallas", 11, "Railway st.");
beansList.add(bean);

bean = new TestBean("Dallas", 12, "Market st.");
beansList.add(bean);

bean = new TestBean("Lyon", 20, "Airport st.");
beansList.add(bean);

params.put("listParam", beansList);

JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, getDemoHsqldbConnection());

JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName); 
```

*结果将是（生成的 PDF 文件的视图）*：

![生成 PDF 格式的结果](../Images/17203551b7f6e44036165646c03bc2c9.png)

* * *

您可以查看***[net.sf.jasperreports.engine.JRDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRDataSource.html)***的实现。最适合您的情况是：***[JRBeanCollectionDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRBeanCollectionDataSource.html)***和***[JRBeanArrayDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRBeanArrayDataSource.html)***。如您所见，它们都是基于 Bean 的。

我认为您可以轻松地将您的转换***`List<String>`***为***`List<StringBean>`***.

或者您可以实现自己的*JRDataSource*。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-07T08:30:23.580

是的，它有效。它完全没有明确记录，但它适用于 jasperreport 4.5.1。

您必须在您的子报表中声明一个名为“_THIS”的字段，输入您要显示的原始类型。在这种情况下，一个字符串。

**子报告**

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="testSubReport" pageWidth="555" pageHeight="802" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isSummaryWithPageHeaderAndFooter="true" whenResourceMissingType="Empty">

    <queryString>
        <![CDATA[]]>
    </queryString>
    <field name="_THIS" class="java.lang.String"/>
    <pageHeader>
  ... 
```

然后在这个要显示字符串值的子报表中，只需使用 $F{_THIS}。

```
<detail>
    <band height="25">
        <textField isStretchWithOverflow="true">
            <reportElement x="37" y="5" width="503" height="15">
            </reportElement>
            <textFieldExpression><![CDATA[$F{_THIS}]]></textFieldExpression>
        </textField>
    </band>
</detail> 
```

**主要报告**

父报表提供 List 作为 datasourceExpression

```
<subreport>
    <reportElement positionType="Float" x="0" y="4" width="554" height="1"/>
    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{bean}.getListeOfStringsMethode())]]></dataSourceExpression>
    <subreportExpression><![CDATA[$P{subreportPrimitiveTypeList}]]></subreportExpression>
</subreport> 
```

[我从这里](http://www.adictosaltrabajo.com/tutoriales/tutoriales.php?pagina=jasperReportJRBeanCollectionDataSource)获得灵感*

# sql-server-2008 - SQL Server 2008：SELECT FOR UPDATE 等效

> ID：11949336
> 
> 赞同：0
> 
> 时间：2012-08-14T09:21:31.950
> 
> 标签：sql-server-2008, locking

> **可能重复：**
> [SQL Server 2008：SELECT FOR UPDATE](https://stackoverflow.com/questions/11950031/sql-server-2008-select-for-update)

我在这里看到了一个关于这个的问题，但是它很旧，所以如果现在存在解决方案，我会再次询问。

我的问题是这个。我有一个我想从中选择的数据库表，但我想锁定我选择的行。这样做的原因是我可能正在运行另一个进程，它也想选择相同的行，我想阻止这种情况。

想象一下，我有两个进程在做同样的事情。一个执行选择并开始执行数据处理。然后几秒钟后，下一个进程出现并进行选择，但由于行没有被锁定，它也需要相同的记录并开始处理它们。这当然是一个糟糕的情况。在 Oracle 中，您可以使用 SELECT FOR UPDATE 来锁定行以防止它们被第二个进程使用。这在 SQL Server 2008 中如何实现？

编辑：

我应该补充一点，我只能使用标准的 sql 语句。我无权访问过程、函数等。它必须通过一个简单的语句来完成。这是一个很长的故事和一个设计考虑，已经脱离了我的掌控。解决方案必须能够存储在表中，稍后检索，然后通过 C# 中的 ADO 对象运行，特别是分配给命令对象。

最终编辑：

如何将锁应用于此语句？

```
SELECT  * FROM (SELECT TOP (20) * FROM  [TMA_NOT_TO_ENTITY_QUEUE]  WHERE [TMA_NOT_TO_ENTITY_QUEUE].[STATE_ID] = 2 ORDER BY TMA_NOT_TO_ENTITY_QUEUE.ID) a 
```

# asp.net - 从页面访问 HttpModule 的属性

> ID：11949341
> 
> 赞同：3
> 
> 时间：2012-08-14T09:21:50.687
> 
> 标签：asp.net, httpmodule

有没有办法从 asp.net 页面访问 HttpModule 的属性？

```
namespace MyHttpModule
{
    public class Module : IHttpModule
    {
        public string M_Property { get; set; }

        public void Init(HttpApplication context)
        { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:26:19.180

您可以从 ApplicationInstance 获取活动模块，例如我有一个模块可以将当前 RawUrl 保存在 BeginRequest 中：

```
 public class PlainModule : IHttpModule
  {
    private HttpApplication app = null;    
    public string CurrentRequestUrl;

    public void Init(HttpApplication Context)
    {
      this.app = Context;
      Context.BeginRequest += new System.EventHandler(Begin);
    }

    public void Dispose()
    {
    }

    private void Begin(Object Sender, EventArgs e)
    {
      this.CurrentRequestUrl = this.app.Request.RawUrl;
    }
  } 
```

当然，您必须在 web.config 中注册您的模块：

```
 <system.web>
    <httpModules>
      <add name="PlainModule" type="WebApplication1.PlainModule, WebApplication1"/>
    </httpModules>
  </system.web> 
```

然后您可以使用在 Web 配置中注册的名称获取模块实例，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
  PlainModule pm = (PlainModule)HttpContext.Current.ApplicationInstance.Modules["PlainModule"];
  Response.Write("Current request URL : "  + pm.CurrentRequestUrl);
} 
```

# ios - 如何将 PDF“页码”与 UISlider 链接？

> ID：11949344
> 
> 赞同：1
> 
> 时间：2012-08-14T09:22:09.517
> 
> 标签：ios, xcode, cocoa-touch, uiwebview, uislider

有没有办法将 PDF 页码与 UISlider 链接？

我在 UIWebView 顶部安装 pdf（100 页）：我基本上想使用 UISlider 在 pdf 页面之间快速跳转 - 有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:20:05.170

First off, yes... you can have the UISlider send JavaScript to a UIWebView.

Second, I think you should use something else. Try this PDF reader library instead:

[https://github.com/vfr/Reader/](https://github.com/vfr/Reader/)

# asp.net - 构建后运行应用程序时出错：无法加载文件或程序集'Microsoft.Practices.EnterpriseLibrary.Common

> ID：11949345
> 
> 赞同：0
> 
> 时间：2012-08-14T09:22:15.537
> 
> 标签：asp.net, .net, web-applications, enterprise-library, .net-assembly

我有一个 asp.net 应用程序，当我构建应用程序然后运行它时，我收到以下服务器错误：

> 无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Source Error:

Line 25:     <form id="form1" runat="server" dir="rtl" >
Line 26:     <div>
Line 27:     <asp:ScriptManager ID="ScriptManager1" runat="server" AsyncPostBackTimeout="3600" >
Line 28:       <Services>
Line 29:        <asp:ServiceReference Path="~/myService.asmx" InlineScript="true"/> 
```

这发生在我在构建后第一次运行应用程序时，如果我在浏览器中刷新页面或再次运行它而不重新构建，我不会收到错误消息。有谁知道为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:00:59.477

在此处查看编辑器的最后一条建议：http: [//entlib.codeplex.com/discussions/363098](http://entlib.codeplex.com/discussions/363098)

# asp.net - VB.Net中文本框中文本更改事件的文本连接问题

> ID：11949353
> 
> 赞同：1
> 
> 时间：2012-08-14T09:23:08.637
> 
> 标签：asp.net, vb.net

我想在文本框中的文本更改上使用文本框连接 VB.Net 中的文本字段。

目前我正在做下拉选择更改的任务：

**VB代码**

```
Protected Sub ddlCitizenSex_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlCitizenSex.SelectedIndexChanged
    If ddlCitizenSex.SelectedValue = "Male" Then
        txtCitizenName.Text = 
            txtCitizenFirstName.Text + " " + "S/O" + 
            txtCitizenFatherName.Text + " " + "S/O" + 
            txtCitizenGFatherName.Text + " " + txtCitizenFamilyName.Text
    Else
        txtCitizenName.Text = 
            txtCitizenFirstName.Text + " " + "D/O" +
            txtCitizenFatherName.Text + " " + "S/O" + 
            txtCitizenGFatherName.Text + " " + txtCitizenFamilyName.Text
    End If
End Sub 
```

我写了下面的代码来试试，但没有用：

**VB代码**

```
Private Sub ModifyCitizenName()
    If ddlCitizenSex.SelectedValue = "Male" Then
        txtCitizenName.Text = 
            txtCitizenFirstName.Text + " " + "S/O" + 
            txtCitizenFatherName.Text + " " + "S/O" + 
            txtCitizenGFatherName.Text + " " + txtCitizenFamilyName.Text
    Else
        txtCitizenName.Text = 
            txtCitizenFirstName.Text + " " + "D/O" + 
            txtCitizenFatherName.Text + " " + "S/O" + 
            txtCitizenGFatherName.Text + " " + txtCitizenFamilyName.Text
    End If
End Sub

Protected Sub txtCitizenFirstName_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtCitizenFirstName.TextChanged
    ModifyCitizenName()
End Sub

Protected Sub txtCitizenFamilyName_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtCitizenFamilyName.TextChanged
    ModifyCitizenName()
End Sub 
```

**ASP 代码**

```
 <asp:Label ID="lblCitizenFamilyName" runat="server"  Text="">Family Name</asp:Label>
    <asp:TextBox ID="txtCitizenFamilyName"  AutoPostBack="true" runat="server"></asp:TextBox>

    <asp:Label ID="lblCitizenFirstName" runat="server"  Text="">First Name</asp:Label>
    <asp:TextBox ID="txtCitizenFirstName"  AutoPostBack="true" runat="server"></asp:TextBox>

    <asp:Label ID="lblCitizenSex" runat="server" Text="">Sex</asp:Label>
    <asp:DropDownList ID="ddlCitizenSex" runat="server"></asp:DropDownList> 
```

如您所见，我在两个文本框中都使用了***AutoPostBack 。***

我是否必须使用**`<Triggers>`**文本框。

以及如何执行任务。希望大家帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:33:55.340

ASP.NET 不会触发回发，因为用户已经编辑了文本框的内容。如果是这样，那么每次您输入一个字符时，您都必须等待大约 2 秒，因为执行了完整的往返。

此功能（使用 JavaScript （尤其是 jQuery 库）最好在客户端实现使用 的内容更新文本框[。Knockout.js](http://learn.knockoutjs.com/#/?tutorial=intro)也可用于轻松地将[Observer](http://en.wikipedia.org/wiki/Observer_pattern)添加到您的`txtCitizenFamilyName`文本框，这将允许您轻松实现这一点。

# linux - 使用 HTACCESS 在 URL 中隐藏文件夹

> ID：11949354
> 
> 赞同：2
> 
> 时间：2012-08-14T09:23:09.950
> 
> 标签：linux, apache, .htaccess

我有一个像“360research.pchealth.ca”这样的域，如果用户点击“360research.pchealth.ca/admin”，系统将进入 ADMIN 文件夹，但是如果用户点击“360research.pchealth.ca”，我需要它转到 ADMIN 但不在 URL 中显示用户在 ADMIN 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:26:43.897

将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} 360research\.pchealth\.ca [NC]
RewriteCond %{REQUEST_URI} !^/admin/
RewriteRule ^(.*)$ /admin/$1 [L] 
```

# java - 确定 BMT 或 CMT

> ID：11949357
> 
> 赞同：1
> 
> 时间：2012-08-14T09:23:15.017
> 
> 标签：java, jakarta-ee, java-ee-6

环境：Java EE 6

如何在拦截器中确定调用的 bean 是容器管理 (CMT) 还是 bean 管理 (BMT)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:56:33.497

根据定义，Bean 始终是容器管理的。

您可能想知道的是当前交易 CMT 还是 BMT。由于[@AroundInvoke](http://docs.oracle.com/javaee/6/api/javax/interceptor/AroundInvoke.html)拦截器方法与被拦截的业务方法在同一事务中执行，您可以通过以下方式检查事务类型：

```
public class SomeInterceptor {
    @Resource
    private javax.ejb.SessionContext sessionContext;

    @AroundInvoke
    public Object intercept(InvocationContext ctx) throws Exception {
        if (isCMT()) {

        }
        ...
    }

    private boolean isCMT() {
        try {
           //throws IllegalStateException if not BMT
           sessionContext.getUserTransaction();
           return false;
        }
        catch (IllegalStateException ise) {
           return true;
        }
    }
} 
```

当然，使用异常来控制流是不好的，但我不知道区分 BMT 和 CMT 的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:42:03.100

您可以使用`InvocationContext`获取`Class`和`Method`调用拦截器的对象。然后您可以尝试为它们解析注释并确定事务管理类型。但是这种方法有一个巨大的缺点：如果事务管理属性是使用`ejb-jar.xml`部署描述符设置的，那么您根本找不到任何注释或无效的覆盖注释。您也可以尝试调用`java.util.Map<java.lang.String,java.lang.Object> getContextData()`和发现结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:40:20.313

似乎在错误的层面上解决了问题。如果像这样`isCMT()`的测试无论如何都不是非常面向对象的。为什么不使用两个拦截器，一个用于带有 BMT 的 bean，另一个用于 CMT？为正确的 bean 使用正确的拦截器......如果需要，两个拦截器仍然可以通过继承一个公共父类来重用公共逻辑。

# c++ - 加载共享库时出错：libgomp.so.1: ，错误的 GCC 版本？

> ID：11949359
> 
> 赞同：7
> 
> 时间：2012-08-14T09:23:20.200
> 
> 标签：c++, gcc, c-libraries

在执行第 3 方 c++ 程序时，出现以下错误：

加载共享库时出错：libgomp.so.1：无法打开共享对象文件：没有这样的文件或目录

libgomp.so.1 库是 GNU 编译器集合 OpenMP 运行时库。

这是 GCC 包的一部分吗？我可以在带有 gcc-4.5 的系统上运行该程序，但不能在带有 gcc-4.3 或 gcc-4.6 的系统上运行。

还是我需要安装另一个包？

我尝试通过下载库并将其放在 LD_LIBRARY_PATH 上使用 gcc-4.3 在系统上手动修复此问题，但后来我得到另一个丢失的库：/usr/lib/libstdc++.so.6: 版本 `GLIBCXX_3.4.11' 不是成立 。libstdc 是 GNU 标准 C++ 库，所以这也表明 GCC 版本错误？

我不是 C++ 开发人员，所以我不完全了解这些库是什么以及库通常如何与 C++ 代码一起工作。

操作系统是 linux 64 位。

gcc-4.3 机器：openSUSE 11.1

gcc-4.5 机器：openSUSE 11.4（在这台机器上程序工作）

gcc-4.6 机器：openSUSE 12.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:53:11.683

该程序与特定版本的 libgomp ( `libgomp.so.1`) 相关联，并且只能由该版本使用。所以你必须：

1.  获取应用程序的源代码并为您的系统自行编译，
2.  获取针对较新版本的 gcc 编译的应用程序的另一个版本，
3.  获取应用程序的静态链接版本，
4.  如果您的发行版支持，请并行安装旧版本的 libgomp，
5.  如果没有，您仍然可以获取较旧的 libgomp 二进制文件并将其放入您的`/usr/lib`（最好是，`/usr/local/lib`如果该路径在您的`/etc/ld.so.conf`.
6.  最后，如果可能的话，您可以将 gcc 降级到旧版本以使其正常工作。但这是一个糟糕的、短期的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:52:56.863

您可以使用 comamnd 查看程序的所有共享库链接依赖项`ldd`。例如：

```
$ ldd /bin/ls
    linux-gate.so.1 =>  (0xb76fe000)
    libselinux.so.1 => /lib/i386-linux-gnu/libselinux.so.1 (0xb76be000)
    librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0xb76b5000)
    libacl.so.1 => /lib/i386-linux-gnu/libacl.so.1 (0xb76ab000)
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb7506000)
    libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0xb7501000)
    /lib/ld-linux.so.2 (0xb76ff000)
    libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0xb74e6000)
    libattr.so.1 => /lib/i386-linux-gnu/libattr.so.1 (0xb74e0000) 
```

现在，如果你想在另一台机器上运行这个程序并且共享库的版本有问题，你可以尝试将很多复制到一个目录，然后使用这个`LD_LIBRARY_PATH`技巧。但请注意，某些库*不得*复制：

*   `linux-gate.so`: 不是真正的文件，而是通往内核领域的门户。
*   `/lib/ld-linux-so.2`: 动态加载器，（或 ELF 解释器，有些人称之为）。在每个动态链接的可执行文件的标头中都有对它的静态引用。不要复制它。
*   `[/usr]/lib/i386-linux-gnu/*`：此目录中的所有内容都是特定于体系结构的。如果两台机器具有相同的架构，它可能会工作。如果没有，则必须在`[/usr]/lib/<your-real-arch>/*`.

在目标机器中，您还可以使用该`ldd`工具`export LD_LIBRARY_PATH=...`查看它是否按预期解析库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:51:49.753

似乎您的程序是使用 gcc-4.5 编译和链接的，这意味着您将很难将其移植到 4.5 之前的版本。发行版中的依赖项（假设是 Linux）不容易被带到核心库的下一个主要版本，如 clib 和 c++lib。将 gcc-4.3 机器标准升级到下一个 Linux 发行版要容易得多。

对于 gcc-4.6 机器，您可能需要搜索包含 libgomp.so.1 的兼容包。这取决于发行版，我不知道这里的细节。

可能有用于在您的盒子上提取 so-dependency 信息的工具，尝试

> 人 ldd

# javascript - 在 javascript/jsp 中转义字符

> ID：11949364
> 
> 赞同：0
> 
> 时间：2012-08-14T09:23:31.710
> 
> 标签：javascript, jsp

我有这个代码位：

```
var description = '${requestScope.description}'; 
```

在上面的代码中如果

```
${requestScope.description} = ''''''''' 
```

IE 抛出脚本错误。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:35:18.220

您能否按照[@xdazz](https://stackoverflow.com/questions/11949364/to-escape-character-in-javascript-jsp#comment15920527_11949364)的建议使用[https://stackoverflow.com/a/1473192/476786](https://stackoverflow.com/a/1473192/476786)中提到的技术来修复它。

如果不是，请尝试使用**双引号**，如下所示：

```
var description = "${requestScope.description}"; 
```

* * *

编辑：OP说这`description`也可能包含**“（双引号）**：

在这种情况下，您可以在将字符串输出为之前替换双引号：

```
var description = "${requestScope.description.replace("\"", "''")}"; 
```

这将用 2 个单引号替换所有双引号实例。

* * *

请注意，我`jsp`的非常弱，因此上面的代码示例可能需要一两次调整...... :)

# linux - Amazon EC2 服务器 - 具有 root 权限的登录服务器

> ID：11949366
> 
> 赞同：1
> 
> 时间：2012-08-14T09:23:44.210
> 
> 标签：linux, amazon-ec2, amazon

我刚得到一个 Amazon EC2 服务器，发现我只能使用 ec2-user 帐户连接到服务器。

这个帐户没有root权限，因此，我必须在SSH上使用sudo命令来获得root权限。

但是，我通常在 EditPlus 或 Aptana Studio 上编辑代码以更改文件中的代码。

我在 EditPlus 上成功地将服务器与 ec2-user 连接起来，但无法写入其他文件夹文件。

我登录时 ec2-user 没有 root 权限。

有没有办法在登录时向 ec2-user 授予 root 权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:32:16.837

[您可以在 ssh( how](http://www.howtogeek.com/howto/linux/security-tip-disable-root-ssh-login-on-linux/) )中启用 Rootlogin ，但这不是一个好的安全实践。在 /etc/ssh/sshd_config 文件中更改以下条目。

```
 PermitRootLogin yes 
```

有两种方法可以在 ssh 中验证 root 用户。

1.  密钥对
2.  密码

其他方法是将修改后的文件保存在 ec2-user home 中，稍后使用 sudo 移动它。

# google-app-engine - 有什么方法可以强制重置 AppEngine 上所有缓存的静态文件？

> ID：11949367
> 
> 赞同：18
> 
> 时间：2012-08-14T09:23:48.890
> 
> 标签：google-app-engine, caching, google-cloud-platform

我遇到了一个已知的 AppEngine 问题，如果我转到我的应用程序的特定 URL，则会缓存错误的静态内容，但如果我附加一个 ?foo 参数来破坏缓存和 VERSION.myapp，则会显示正确的静态内容。 apppot.com 也可以。

有没有办法让正确的内容显示在未修改的 URL 上？

我很乐意删除该应用程序并恢复它或任何激烈的事情。该应用程序尚未上线，但我需要它在几个小时内上线。使这些 URL 正常工作的任何方法，以便与 AppEngine 应用程序对话的移动应用程序获取正确的数据。

**编辑**

卷曲标题，我看到：

```
HTTP/1.1 200 OK
ETag: "ZN9VxQ"
Date: Tue, 14 Aug 2012 02:00:58 GMT
Expires: Wed, 15 Aug 2012 02:00:58 GMT
Content-Type: text/html
Server: Google Frontend
Cache-Control: public, max-age=86400
Age: 34623
Transfer-Encoding: chunked 
```

我是否又被冲洗了 50,000 秒？无论如何要缩短它？

**编辑评论：**

在 app.yaml 中，我有这个处理程序：

```
- url: /static
  static_dir: static
  expiration: 1s 
```

我现在尝试删除过期：

```
- url: /static
  static_dir: static 
```

我根据文档将它添加到 app.yaml 的顶部：

```
default_expiration: "1m" 
```

此外，删除文件不会使它们在我部署时消失。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-10-28T16:17:45.697

有一种方法可以缩短您的应用在 Google Cloud 上缓存的静态文件的过期时间。

前往您的[Google Cloud Console](https://console.cloud.google.com/)并打开您的项目。在左侧汉堡菜单下，前往存储 -> 浏览器。您应该在那里找到至少一个 Bucket：your-project-name.appspot.com。在 Lifecycle 列下，单击与 your-project-name.appspot.com 相关的链接。删除任何现有规则，因为它们可能与您现在将创建的规则冲突。

通过单击“添加规则”按钮创建新规则。对于对象条件，**仅**选择“较新版本”选项并将其设置为 1。不要忘记单击“继续”按钮。对于该操作，选择“删除”并单击“继续”按钮。保存您的新规则。

这条新规则最多需要 24 小时才能生效，但至少对我的项目来说只用了几分钟。一旦启动并运行，您的应用程序在 your-project-name.appspot.com 下提供的文件版本**将始终是最新部署**的，从而解决了问题。此外，如果您经常编辑静态文件，则应`expiration`从与这些静态文件相关的处理程序中删除任何元素以及`default_expiration`从 app.yaml 文件中删除元素，这将有助于避免其他服务器意外缓存。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-14T11:00:28.760

这取决于使用什么缓存控制。检查 firebug och chrome 检查器并查看设置的到期日期。

如果您已将缓存控制设置为公共，则无法影响该控制，因为文件在此过程中缓存在各种代理和服务器上。

如果您使用缓存控制私有，您应该能够重置您的浏览器缓存并且没问题，但正如您所说，有时您会从 Google 的生产环境中获得错误的文件。我有同样的问题。最快的解决方案是向加载的文件添加查询参数。

# c++ - 如何在 cocos2d、iOS 中正确分配和解除分配 box2d 对象

> ID：11949375
> 
> 赞同：6
> 
> 时间：2012-08-14T09:24:20.997
> 
> 标签：c++, objective-c, ios, memory-management, box2d-iphone

我想知道在 iOS 的 cocos2d 中分配和取消分配 box2d 对象（b2World 和 b2Body）的最佳方法是什么？

**分配**

```
@property (nonatomic, assign) b2World * world;
@property (nonatomic, assign) b2Body * body; 
```

**解除分配**

```
-(void)dealloc {
      delete _world;
      _world = nil;
      _body = nil; 
```

有人可以解释为什么我不能对 b2World 和 b2Body 使用保留和释放以及为什么我们在 dealloc 方法中使用 delete _world 吗？为什么我们也不删除 body 对象？（删除 _body 不起作用）。设置指向 nil 的指针时：我应该使用 nil 还是 NULL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:59:10.637

> 我想知道在 iOS 的 cocos2d 中分配和取消分配 box2d 对象（b2World 和 b2Body）的最佳方法是什么？

使用惯用的现代 C++。

* * *

```
@property (nonatomic, assign) b2World * world;
@property (nonatomic, assign) b2Body * body; 
```

**不**

（除非你自己正确地实现这些，这需要对语言有更多的理解）

* * *

```
-(void)dealloc {
      delete _world;
      _world = nil;
      _body = nil; 
```

**不**

详情如下。

* * *

> 有人可以解释为什么我不能对 b2World 和 b2Body 使用保留和释放吗

这些是 C++ 类型，而不是 objc 类型。C++ 类型可以分配在许多区域（例如堆栈、堆或用户定义区域）——C++ 类型不支持引用计数。如果您需要引用计数，请参阅`std::shared_ptr`. `std::shared_ptr`在 C++ 中很少需要，顺便说一句——如果你使用其中的几个，你可能做错了什么。

> 为什么我们在 dealloc 方法中使用 delete _world？

这就是 C++ 对象被销毁和释放的方式。具体来说，使用`new`. 如果您遇到值不合适的异常情况，您永远不必编写或使用智能`delete`指针`delete`。`delete[]`

> 为什么我们也不删除 body 对象？

您将不得不询问编写它的程序员-它要么是泄漏，要么是在其他地方引用/拥有。

> 设置指向 nil 的指针时：我应该使用 nil 还是 NULL？

`0`

* * *

无论如何，要进入您的主题：

如果对象具有默认构造函数，您通常会使用它：

```
@interface MONObject : NSObject {
@private
  b2World world;
  b2Body body;
}
@end 
```

如果您可以将它们放在您的`@implementation`街区中，请这样做。

并且您的对象将在之前默认构造`-init`（除非您设置`GCC_OBJC_CALL_CXX_CDTORS`为`NO`，这是一个非常糟糕的主意）。

你的 dealloc 看起来像这样：

```
- (void)dealloc {
  [super dealloc];
} 
```

在这种情况下，您不会实施`dealloc`. 将调用析构函数（前提`GCC_OBJC_CALL_CXX_CDTORS`是已启用）。

当您想要比值更复杂的东西时（见上文），请使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

最后，小心你如何传递和返回 C++ 类型——它们知道如何复制自己。所以返回一个值（例如）实际上可以执行非常复杂的复制。

# javascript - 使用 Marionette.CompositeView 进行单元测试

> ID：11949377
> 
> 赞同：4
> 
> 时间：2012-08-14T09:24:31.853
> 
> 标签：javascript, backbone.js, jasmine, marionette

通过使用`jasmine`，我正在尝试测试一个返回`Marionette.CompositeView`.

这是 javascript 模块（2）和 javascript 单元测试（1）。

我的问题是如何从 (1) 访问渲染视图？
有关更多详细信息，请参阅代码注释。

PS：
1）javascript模块可以生成正确的渲染视图。
2）当我运行测试时，javascript控制台给了我以下错误：`backbone.marionette.min.js:9`

```
Uncaught NoTemplateError: Could not find template: 'function (context, options) {
    if (!compiled) {
      compiled = compile();
    }
    return compiled.call(this, context, options);
  }' 
```

3）由于我正在使用，我以这种方式`handlebars`重写了：`Marionette.Renderer.render`

```
enter code here
define([
    'marionette'
], function (Marionette) {
    Marionette.Renderer.render = function (template, data) {
        return template(data);
    };
}); 
```

* * *

(1)

```
(function () {
    'use strict';
    define([
        // some code
    ], function (MyView) {
        describe('Layout App - Header View ', function () {
            beforeEach(function () {
                this.view = new MyView({
                    currentUser: new Backbone.Model()
                });
            });

            describe('Instantiation', function () {
                it('should create a div element', function () {
                    expect(this.view.el.nodeName).toEqual('DIV'); // it works
                });

            });

            describe("Rendering", function () {

                it("returns the view object", function () {
                    console.log(this.view.render()); // undefined // why?
                    expect(this.view.render()).toEqual(this.view); // it fails
                });
            });
        });
    });
}); 
```

* * *

(2)

```
define([
    // some code
], function (myTemplate, MyItemView) {
    return Marionette.CompositeView.extend({
        template: myTemplate,
        itemView: MyItemView,
        // some code
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:36:27.037

调用`render`它的方法，就像使用任何其他主干视图一样

```
 beforeEach(function () {
                this.view = new MyView({
                    currentUser: new Backbone.Model()
                });

                // render it
                this.view.render();
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T20:45:50.183

实际上，render 方法确实返回了`undefined`. 而不是`expect(this.view.render())`，你应该做类似的事情

`this.view.render(); expect(this.view.$el.find('.class_in_template').length).to.be.greaterThan(0);`

# linq - 使用 LINQ 使用其他列表更新对象属性列表

> ID：11949381
> 
> 赞同：0
> 
> 时间：2012-08-14T09:24:46.910
> 
> 标签：linq, list

我有这两个清单

```
var amountList = (from i in outstandingsList
                  join f in accountablesList
                       on i.Contract equals f.Contract
                  select f.Amount).ToList();

var commonContractsList = (from i in outstandingsList
                           join f in accountablesDdrsList
                                on i.Contract equals f.Contract
                           select i).ToList(); 
```

List amountlist 获取accountablesList和outstandingsList中所有普通合约的accountablesList金额。

List commonContractsList 获取outstandingsList 和accountablesDdrsList 中的所有共同合约。

我想要的是更新 commonContractsList 中的金额，其中以合同为键的金额列表中的所有金额。

我试图做一个 foreach，但我似乎无法正确执行操作的顺序。

有任何想法吗？提前谢谢。瑞马丁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:44:28.607

请看下面的代码..您可以在第一个 Linq 查询中添加 f.Contract，然后在循环中使用那个来搜索其他实体以获取值，然后分配值..

```
var amountList =(
                 from i in outstandingsList
                 join f in accountablesList
                    on i.Contract equals f.Contract
                 select f.Amount,f.Contract).ToList();  

var commonContractsList = (from i in outstandingsList
                           join f in accountablesDdrsList
                             on i.Contract equals f.Contract
                           select i).ToList();

foreach(var contract in commonContractsList)
{
   var amount=amountList.Where(o=>o.Contract==contract.Contract).Select(o=>o.Amount);
   contract.Amount=amount;
} 
```

# php - 无法使用 php mysql 获取带单引号的字段

> ID：11949386
> 
> 赞同：0
> 
> 时间：2012-08-14T09:25:08.797
> 
> 标签：php, mysql, json

以下是我的代码：-

```
$cat=mysql_real_escape_string($_REQUEST['cat']);
$selqry="select * from quizes where category='$cat'";
$selres=mysql_query($selqry) or die(mysql_error());
$questions = array();
if(mysql_num_rows($selres)) {
while($question = mysql_fetch_assoc($selres)) {
  $questions[] = array('post'=>$question);
}
}
else
{
echo "[{\"Result\":\"No questions in this category\"}]";
exit(0);
}
header('Content-type: application/json');
echo json_encode(array('questions'=>$questions)); 
```

现在，quises 表中的所有内容都以正确的 json 格式输出，除了其中包含单引号的字段将输出为 null ..

那我做错了吗？

提前致谢

# python - 如何使用 Tkinter 创建填充窗口宽度的换行文本？

> ID：11949391
> 
> 赞同：25
> 
> 时间：2012-08-14T09:25:28.297
> 
> 标签：python, tkinter

小`Label`部件不换行。小`Message`部件将换行文本，但强制它大致是方形的。这是一个例子：

```
from Tkinter import *

root = Tk()
root.title("hello")

Message(root, text=48*'xxxxx ').grid(row=0, column=0, columnspan=3)

Label(root, text='Name:').grid(row=1, column=0)
Entry(root, width=50).grid(row=1, column=1)
Button(root, text="?").grid(row=1, column=2)

Button(root, text="Left").grid(row=2, column=0)
Button(root, text="Center").grid(row=2, column=1)
Button(root, text="Right").grid(row=2, column=2)

root.mainloop() 
```

我知道我可以用它`aspect=700`来改变形状，但像这样的硬编码数字是我试图避免的。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-14T11:53:31.293

Tkinter`Label`小部件确实包装了。只是默认设置是不换行。要使文本换行设置`wraplength`参数，其单位是屏幕单位，因此请尝试`wraplength=50`根据需要进行调整。您还需要设置`justify`为`LEFT`、`RIGHT`或`CENTER`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-04-22T14:38:08.003

```
welcomenote = Label(root, text="Your long text", font="helvetica 14", 
wraplength=300, justify="center")
welcomenote.pack() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-15T15:48:53.703

尝试以下操作：

```
tk.Label(root, textvariable=text, wraplength=500).pack() 
```

这里 500 是字符被放到下一行之前的像素数量。

# bash - 使用 ssh 测试远程访问

> ID：11949394
> 
> 赞同：0
> 
> 时间：2012-08-14T09:25:43.100
> 
> 标签：bash, shell, ssh

我有以下命令来检查远程客户端是否允许不通过 ssh 登录

```
 ssh -o PasswordAuthentication=no \
     $REMOTE_HOST_USER@$REMOTE_HOST_IP 1>/dev/null 2>/dev/null 
```

执行命令，如果`permission=no`我在其余代码中设置权限。顺便说一下“permissin denied 消息被发送到 /dev/null”。但是当我第二次执行我的命令时，这一次`permission=yes`我必须登录到机器但它挂起，因为我认为没有错误或输出。因为我在获得代码许可时尝试过；

```
ssh -o PasswordAuthentication=no $REMOTE_HOST_USER@$REMOTE_HOST_IP 
```

这次有效。

那么我该如何安排它第一次发送错误消息而不是在休息时发送

编辑：正如我可以简单解释的那样，我的问题是，假设我的脚本中有一个命令，在我第一次运行我的脚本时可能会出错，所以我不想看到错误和输出，我运行它

```
command 1>/dev/null 2>/dev/null(it is in my script) 
```

当我第二次运行脚本时，该命令不会给出错误和输出，因为我做了一些操作，所以它没有错误。但是当它第二次运行时它挂起，因为 /dev/null（我认为是这样）。因为当它在没有 /dev/null 的情况下运行时它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:38:21.490

添加要在另一侧执行的命令。

我通常使用`:`or `echo ok`。第一个不应该产生任何输出，我喜欢错误消息。

```
remote_account=$REMOTE_HOST_USER@$REMOTE_HOST_IP 

ssh -o PasswordAuthentication=no $remote_account : 2> /dev/null 
```

或者

```
ssh -o PasswordAuthentication=no $remote_account echo ok | grep ok 
```

你剩下的问题不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:53:43.620

目前尚不清楚您要做什么。

如果您不指定命令，`ssh`将创建一个 shell，但您的所有输出都是定向的`/dev/null`，因此您什么也看不到。它看起来像是挂了，但不是，它只是在等你输入命令。如果键入`exit`+ ENTER，它将退出 shell。

```
ssh -o PasswordAuthentication=no $REMOTE_HOST_USER@$REMOTE_HOST_IP 'command here' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:58:22.050

该脚本不会挂起，因为没有错误消息。它挂起是因为 ssh 正在等待您的输入。如果你给 ssh 一个运行命令，如 Henk 所示，那么 ssh 将运行该命令然后退出。如果你不给它一个命令，它将启动一个交互式 shell。shell 会打印一个提示符（例如“$”）并等待您输入。您看不到提示，因为您将所有输出发送到`/dev/null`.

Henk 的代码将使您的脚本工作，因为如果它成功登录，它将运行一个非常短的命令，然后将控制权返回给您。

# c# - 如何仅在出现 GridView 时显示此 ImageButton？

> ID：11949396
> 
> 赞同：0
> 
> 时间：2012-08-14T09:25:47.050
> 
> 标签：c#, asp.net, gridview, imagebutton

我正在开发一个具有小型报告服务的简单系统。报表服务一般是一个 DropDownList，根据 DropDownList 的值生成一个 Gridview。在此 GridView 下有一个 ImageButton 用于将 GridView 打印为 Word 文档。我现在的问题是：那个按钮一直出现。它应该与 GridView 一起出现，因为它与之相关。**那么该怎么做呢？**

ASP.NET 代码：

```
<div>

        <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true"
            DataSourceID="SqlDataSource2" DataTextField="Title" DataValueField="ID" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:PM_RegistrationSysDBConnectionString %>" 
            SelectCommand="SELECT [ID], [Title] FROM [Events]"></asp:SqlDataSource>

    </div>

    <br />

    <div>    
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" ShowFooter="true">
            <Columns>
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />

                <%--<asp:TemplateField>
                    <FooterTemplate>
                        <asp:ImageButton ID="wordBtn" CssClass="icon" runat="server" ImageUrl="images/word.png" 
                           ToolTip="Generate a Word Document" OnClick="creat_word_table"></asp:ImageButton>
                    </FooterTemplate>
                </asp:TemplateField>--%>
            </Columns>
        </asp:GridView>
        <br />
        <asp:ImageButton ID="wordBtn" CssClass="icon" runat="server" ImageUrl="images/word.png" 
                           ToolTip="Generate a Word Document" OnClick="creat_word_table"></asp:ImageButton>
    </div> 
```

C#代码：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string connString = ConfigurationManager.ConnectionStrings["PM_RegistrationSysDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string eventTitle = DropDownList1.SelectedItem.Text;
        string cmd = @"SELECT     dbo.Events.Title, dbo.Users.Name
                        FROM         dbo.BookingDetails INNER JOIN
                                              dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID INNER JOIN
                                              dbo.Users ON dbo.BookingDetails.NetworkID = dbo.Users.NetworkID
                        WHERE     (dbo.Events.IsActive = 1) AND (dbo.Events.Title = '"+eventTitle+"')";
        SqlDataAdapter da = new SqlDataAdapter(cmd, conn);
        DataTable dt = new DataTable();
        da.Fill(dt);
        GridView1.DataSource = dt;
        GridView1.DataBind();
    }

    public void creat_word_table(object sender, EventArgs e)
    {
        Response.AddHeader("content-disposition", "attachment;filename=Export.doc");
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.ContentType = "application/vnd.word";

        StringWriter stringWrite = new StringWriter();
        HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);

        HtmlForm frm = new HtmlForm();
        GridView1.Parent.Controls.Add(frm);
        frm.Attributes["runat"] = "server";
        frm.Controls.Add(GridView1);
        frm.RenderControl(htmlWrite);

        Response.Write(stringWrite.ToString());
        Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:37:50.583

试试这个

默认情况下，将您的图像按钮设置为`visible = false;`

myImageButton.Visible = false;

然后在设置网格的数据源之前检查是否有任何记录

就像是`dt.Rows.Count`

例如

```
if(dt.Rows.Count > 0)
   myImageButon.Visible = true; 
```

# java - TableModel - 在设置值时修改外部对象

> ID：11949397
> 
> 赞同：2
> 
> 时间：2012-08-14T09:25:48.357
> 
> 标签：java, swing, jtable, tablemodel

我有一个单独的类，它实现了用于 JTable 的 TableModel 接口。我有一个布尔列，显示为一列复选框，我想知道如何通知外部对象某些值需要更新？如果我将此实现作为嵌套类，我可以从内部访问主类的成员，但如果我决定将其移至单独的类，我是否需要将我的主类注册为表模型实现的侦听器然后引发事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:19:05.447

扩展@gontard 的正确答案，您可以安排您的*视图*（比如 a [`CombinedDomainXYPlot`](https://stackoverflow.com/q/11904583/230513)）来收听您的`TableModel`. 两个[已知的子类](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html)都包含所需的`addTableModelListener()`实现。然后，您的*视图*可以在看到更改时做出相应的反应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:36:40.573

您的外部对象应该直接监听模型值的变化。无需添加对视图的依赖项。

# sql - Postgres 在特定数据库中创建模式

> ID：11949401
> 
> 赞同：11
> 
> 时间：2012-08-14T09:25:57.873
> 
> 标签：sql, postgresql, schema

我收到了一份来自 stackoverflow.com 的建议，用于在特定数据库中创建模式，如下所示：

```
CREATE DATABASE foo; 
 \connect foo; 
CREATE SCHEMA yourschema; 
```

但我收到如下错误：

> 错误：“\”第 2 行或附近的语法错误：\connect foo; ^
> 
> ***********错误******* **********
> 
>  *****错误：“\”处或附近的语法错误*****

 *****情况 ：

以 postgress 身份登录
创建用户 u1
创建数据库 db1 所有者为 u1
\connect u1
创建架构 s1

请帮助我在特定数据库中创建模式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T09:45:35.133

这有效，当*且仅当*您使用 psql 时：

```
postgres@berry-pc:~$ psql template1
psql (8.4.10)
Type "help" for help.

template1=# CREATE DATABASE foo;
CREATE DATABASE
template1=# \connect foo;
psql (8.4.10)
You are now connected to database "foo".
foo=# \connect template1
psql (8.4.10)
You are now connected to database "template1".
template1=# DROP DATABASE foo;
DROP DATABASE
template1=# \q 
```

`\connect`是一个 psql 命令。这不是普通的 SQL，因此您不能在 .sql 文件中使用它。据我所知，无法从 sql 文件中执行此操作。这背后的基本原理是，一旦您想使用不同的数据库，就应该重新连接到不同的数据库。这是为了数据库分离。MySQL 实现`use $database`语法的原因是因为它缺少模式，但 PostgreSQL 没有这样的命令，因为数据库应该在模式而不是数据库中分开。*****

# java-me - LWUIT 标签创建

> ID：11949402
> 
> 赞同：0
> 
> 时间：2012-08-14T09:25:59.623
> 
> 标签：java-me, lwuit

我已经创建了 LWUIT 选项卡并将我的 LWUIT 列表添加到选项卡并显示，但我的问题是，当我将列表项的数量添加到选项卡时，会显示这些列表项，但是当我向上滚动列表时，我的选项卡也会滚动，如何修复我的标签位置？这是我的代码：

```
tabs=new Tabs(Component.BOTTOM);
        tabs.addTab("TopNews", myNewsList);       
        form1.addComponent(tabs);
        form1.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:49:58.387

利用：

```
form1.setScrollable(false); 
```

理想情况下还有：

```
form1.setLayout(new BorderLayout());
form1.addComponent(BorderLayout.CENTER, tabs); 
```

# c++ - 如何计算没有标签信息的 mp3 文件的哈希？

> ID：11949409
> 
> 赞同：5
> 
> 时间：2012-08-14T09:26:37.390
> 
> 标签：c++, id3lib

我们需要计算一个 mp3 文件的哈希值来唯一标识它。问题是 Traktor 软件修改了文件的标签，没有机会改变它。

我们使用 id3lib 库，所以我想也许有一些方法可以获取各种版本标签的前置和附加大小，并且只读取它们之间的媒体内容来计算它的哈希值。我一直在 id3lib 文档中搜索，我发现的唯一内容是`ID3_Tag::GetPrependedBytes()`and `ID3_Tag::GetAppendedBytes()`，就像这样：

```
const std::size_t prepend = tagOpener.GetPrependedBytes();
const std::size_t append = tagOpener.GetAppendedBytes();
const std::size_t overall = tagOpener.Size(); 
```

但他们只返回 0。

如果这有帮助，我们正在用 C++ 和 Qt 一起开发，所以也许有一些东西可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:59:52.957

我已经用下面的代码解决了这个问题。也许它会帮助某人。

```
/** Return QString hash for the given path */
inline QString GetHash( const QString& filePath )
{
   /// Determine positions of ID3 tags
   ID3_Tag tagOpener( filePath.toLocal8Bit() );
   const std::size_t prepend = tagOpener.GetPrependedBytes();
   const std::size_t append = tagOpener.GetAppendedBytes();

   /// Calculate a hash
   QString hashValueString;
   QFile file( filePath );
   QCryptographicHash hash( QCryptographicHash::Md5 );
   if( file.open(QIODevice::ReadOnly) )
   {
      /// Read only useful media data and skip tags
      const bool seekRes = file.seek( prepend ); // skip prepend tags info
      const qint64 mediaDataSize = file.size() - append - prepend;
      hash.addData( file.read(mediaDataSize) );

      /// Set hash md5 for current file
      hashValueString =  hash.result().toHex().data();
      file.close();
   }

   tagOpener.Clear();
   return hashValueString;
} 
```

这是一个使用 Qt 和 ID3Lib 的解决方案。您只能使用`hash.result()`代码返回的值来获取数字表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:28:01.333

另一种解决方案可能是使用音频有效负载的哈希来识别 mp3 文件。您可以使用库来解析 mpeg 音频文件而不是 id3lib 吗？

# asp.net - 如何知道当前用户身份

> ID：11949413
> 
> 赞同：1
> 
> 时间：2012-08-14T09:27:09.857
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在使用表单身份验证的 mvc .net Web 应用程序中，如何知道控制器中的当前用户身份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:32:15.860

你可以使用`User.Identity.Name`：

```
[Authorize]
public ActionResult SomeAction()
{
    string currentlyLoggedInUsername = User.Identity.Name;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:30:30.053

```
 this.HttpContext.User.Identity 
```

请注意，您还应该检查是否

```
 this.HttpContext.User.Identity.IsAuthenticated 
```

区分匿名用户和经过身份验证的用户。

# jquery - 使用 jquery 检查文件大小

> ID：11949415
> 
> 赞同：0
> 
> 时间：2012-08-14T09:27:12.787
> 
> 标签：jquery, asp.net

> **可能重复：**
> [使用 jQuery 检查文件输入大小](https://stackoverflow.com/questions/1601455/check-file-input-size-with-jquery)

我需要检查上传的图片大小是否小于 5mb

我使用以下代码

```
$("#fileUpload").change(function () {

        $file = $("#fileUpload");
        var a = $file[0];

        var iSize = ($file[0].files[0].size / 1024);
        if (iSize / 1024 > 1) {
            iSize = (Math.round((iSize / 1024) * 100) / 100)
            alert('file size is ' + iSize);
            if (iSize > 5) {
                $('#FileImageSizeValidation').show();
            }

        }

    }); 
```

在那，我在 $file[0].files[0] 上得到了未定义的错误。它在这一行显示错误。这个怎么做。

谢谢普加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:48:05.690

IE 9 及更低版本不支持 HTML5 File API，因此您无法在客户端获取文件大小。确保您使用的浏览器支持此 API。

# iis - 在 IIS7 上看不到已部署的 asp.net mvc3 项目

> ID：11949417
> 
> 赞同：0
> 
> 时间：2012-08-14T09:27:14.677
> 
> 标签：iis, hostheader

我在计算机的 IIS7 上部署了我的 asp.net mvc3 项目。这里一切正常，当我在浏览器中浏览 localhost 或在 visual studu 2010 中运行应用程序时，我可以看到我的项目，但在其他计算机上搜索 localhost 时，我看不到它。我这样做是为了在 IIS7 上部署应用程序：

1.  安装 IIS7
2.  在 Visual Studio 2010 中创建我的项目
3.  在默认网站部分的 IIS7 管理器中，使用 ASP.NET V4.0 应用程序池创建了一个名为 tile-shop2 的新应用程序，物理路径是 inetpub 中的 wwwroot
4.  在 wwwroot 文件夹中发布项目
5.  在 VS2010 中的项目菜单 => tile-shop2 属性 => Web => 服务器 => 勾选使用本地 IIS Web 服务器

我还应该做什么才能在其他计算机上查看项目？我可以在 windows 和 mac 中看到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:29:21.807

localhost 表示当前计算机。因此，来自其他计算机的 localhost 将访问该计算机。您需要使用主机头或安装网站的计算机的 IP 地址来访问该网站。例如 http:///

但是从生产的角度来看，基于主机头的解决方案会更好。本文解释了什么是主机头 it-notebook.org/iis/article/understanding_host_headers.htm

# node.js - npm - 如何显示包的最新版本

> ID：11949419
> 
> 赞同：358
> 
> 时间：2012-08-14T09:27:16.267
> 
> 标签：node.js, npm, versioning

如何使用 npm 显示模块的最新版本？我期待像`npm --latest express`打印出来的东西`v3.0.0`。

* * *

## 回答 #1

> 赞同：540
> 
> 时间：2012-08-14T09:33:04.797

您可以使用：

```
npm show {pkg} version 
```

（所以`npm show express version`现在会回来`3.0.0rc3`）。

* * *

## 回答 #2

> 赞同：265
> 
> 时间：2014-03-06T14:32:21.483

如果您正在寻找所有已安装软件包的当前和最新版本，您还可以使用：

`npm outdated`

* * *

## 回答 #3

> 赞同：94
> 
> 时间：2014-10-03T07:28:13.497

截至**2014 年 10 月**：

[![npm 查看说明](../Images/c7b066e141e572b281598f3106d28a70.png)](https://i.stack.imgur.com/YJBuw.gif)

对于最新的远程版本：

```
npm view <module_name> version 
```

注意，*版本*是单数。

如果您想查看所有可用（远程）版本，请执行以下操作：

```
npm view <module_name> versions 
```

注意，*versions*是复数。这将为您提供可供选择的版本的完整列表。

要获取您在本地实际拥有的版本，您可以使用：

```
npm list --depth=0 | grep <module_name> 
```

请注意，即使 package.json 声明了您的版本，安装的版本实际上也可能略有不同 - 例如，如果在版本声明中使用了 tilda

应该适用于 NPM 版本 1.3.x、1.4.x、2.x 和 3.x

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-10-05T10:28:14.087

您可以使用 . 查看模块的所有版本`npm view`。例如：列出所有版本的引导程序，包括测试版。

```
npm view bootstrap versions 
```

但是如果版本列表很大，它会被截断。一个`--json`选项将打印所有版本，包括测试版。

```
npm view bootstrap versions --json 
```

如果您只想列出稳定版本而不是测试版，请使用单数`version`

```
npm view bootstrap@* versions 
```

或者

```
npm view bootstrap@* versions --json 
```

而且，如果您只想查看最新版本，那么就可以了。

```
npm view bootstrap version 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-10-07T10:32:04.980

`npm view <pkg> version`按发布日期打印最新版本。有时，这很可能是较旧的稳定分支的修补程序版本。

解决方案是列出所有版本并按版本号获取最后一个

```
$ npm view <pkg> versions --json | jq -r '.[-1]' 
```

或者用 awk 代替 jq：

```
$ npm view <pkg> --json  | awk '/"$/{print gensub("[ \"]", "", "G")}' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-15T09:38:11.037

如果您使用的是 VS Code，还有另一种简单的方法可以检查最新版本而无需前往 NPM。

> 在 package.json 文件中检查你想知道最新版本的模块。删除已经存在的当前版本并执行 CTRL + 空格或 CMD + 空格（mac）。VS 代码将显示最新版本

[![图像显示了 vscode 中模块的最新版本](../Images/1c08b48513cbee34f097511a1655fe27.png)](https://i.stack.imgur.com/8hptA.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-02T04:19:04.133

此`npm-check-updates`软件包将帮助您更新和检查最新的可用软件包。

*   `$ ncu` 检查 package.json
*   `$ ncu -u` 更新所有软件包。
*   `$ ncu -g`检查全局包。

有关更多详细信息，请查看此链接

[https://www.npmjs.com/package/npm-check-updates](https://www.npmjs.com/package/npm-check-updates)

# c# - 从阻塞集合中异步获取

> ID：11949424
> 
> 赞同：16
> 
> 时间：2012-08-14T09:27:33.070
> 
> 标签：c#, asynchronous, task-parallel-library

我正在使用 a`BlockingCollection`来实现生产者/消费者模式。我有一个异步循环，它用要处理的数据填充集合，然后客户端可以在以后访问这些数据。数据包很少到达，我希望在不使用阻塞调用的情况下完成轮询。

本质上，我正在寻找阻塞集合中不存在的类似 a 的东西，以便我可以在回调中使用内部线程池`BeginTake`。`EndTake`它不一定是 a `BlockingCollection`。任何能满足我需要的东西都会很棒。

这就是我现在所拥有的。`_bufferedPackets`是一个`BlockingCollection<byte[]>`：

```
public byte[] Read(int timeout)
{
    byte[] result;
    if (_bufferedPackets.IsCompleted)
    {
        throw new Exception("Out of packets");
    }
    _bufferedPackets.TryTake(out result, timeout);      
    return result;
} 
```

我希望它是这样的，在伪代码中：

```
public void Read(int timeout)
{
    _bufferedPackets.BeginTake(result =>
        {
            var bytes = _bufferedPackets.EndTake(result);
            // Process the bytes, or the resuting timeout
        }, timeout, _bufferedPackets);
} 
```

我有什么选择？我不想让**任何**线程处于等待状态，因为还有很多其他的 IO 东西要处理，而且我很快就会用完线程。

**更新：**我已经重写了有问题的代码以不同地使用异步过程，本质上是根据超时限制内是否有等待请求来交换回调。这工作得很好，但如果有一种方法可以做到这一点，而无需求助于计时器和交换可能导致竞争条件并且难以编写（和理解）的 lambdas，那仍然会很棒。我也通过自己的异步队列实现解决了这个问题，但如果有一个更标准且经过良好测试的选项，它仍然会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:17:00.930

我可能误解了您的情况，但是您不能使用非阻塞集合吗？

我创建了这个例子来说明：

```
using System;
using System.Collections.Concurrent;
using System.Threading;
using System.Threading.Tasks;

namespace AsyncTakeFromBlockingCollection
{
    class Program
    {
        static void Main(string[] args)
        {
            var queue = new ConcurrentQueue<string>();

            var producer1 = Task.Factory.StartNew(() =>
            {
                for (int i = 0; i < 10; i += 1)
                {
                    queue.Enqueue("=======");
                    Thread.Sleep(10);
                }
            });

            var producer2 = Task.Factory.StartNew(() =>
            {
                for (int i = 0; i < 10; i += 1)
                {
                    queue.Enqueue("*******");
                    Thread.Sleep(3);
                }
            });

            CreateConsumerTask("One  ", 3, queue);
            CreateConsumerTask("Two  ", 4, queue);
            CreateConsumerTask("Three", 7, queue);

            producer1.Wait();
            producer2.Wait();
            Console.WriteLine("  Producers Finished");
            Console.ReadLine();
        }

        static void CreateConsumerTask(string taskName, int sleepTime, ConcurrentQueue<string> queue)
        {
            Task.Factory.StartNew(() =>
            {
                while (true)
                {
                    string result;
                    if (queue.TryDequeue(out result))
                    {
                        Console.WriteLine("  {0} consumed {1}", taskName, result);
                    }
                    Thread.Sleep(sleepTime);
                }
            });
        }
    }
} 
```

这是程序的输出

![在此处输入图像描述](../Images/70056edd2cc0f472b7020d8276396aa6.png)

我相信 BlockingCollection 旨在包装并发集合并提供允许多个消费者阻塞的机制；等待生产者。这种用法似乎与您的要求相反。

我发现[这篇关于 BlockingCollection 类](http://www.codethinked.com/blockingcollection-and-iproducerconsumercollection)的文章很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:32:50.007

所以看起来没有内置选项，我出去尝试尽我所能做我想要的实验。事实证明，要使这项工作与旧异步模式的其他用户大致相同，还有很多工作要做。

```
public class AsyncQueue<T>
{
    private readonly ConcurrentQueue<T> queue;
    private readonly ConcurrentQueue<DequeueAsyncResult> dequeueQueue; 

    private class DequeueAsyncResult : IAsyncResult
    {
        public bool IsCompleted { get; set; }
        public WaitHandle AsyncWaitHandle { get; set; }
        public object AsyncState { get; set; }
        public bool CompletedSynchronously { get; set; }
        public T Result { get; set; }

        public AsyncCallback Callback { get; set; }
    }

    public AsyncQueue()
    {
        dequeueQueue = new ConcurrentQueue<DequeueAsyncResult>();
        queue = new ConcurrentQueue<T>();
    }

    public void Enqueue(T item)
    {
        DequeueAsyncResult asyncResult;
        while  (dequeueQueue.TryDequeue(out asyncResult))
        {
            if (!asyncResult.IsCompleted)
            {
                asyncResult.IsCompleted = true;
                asyncResult.Result = item;

                ThreadPool.QueueUserWorkItem(state =>
                {
                    if (asyncResult.Callback != null)
                    {
                        asyncResult.Callback(asyncResult);
                    }
                    else
                    {
                        ((EventWaitHandle) asyncResult.AsyncWaitHandle).Set();
                    }
                });
                return;
            }
        }
        queue.Enqueue(item);
    }

    public IAsyncResult BeginDequeue(int timeout, AsyncCallback callback, object state)
    {
        T result;
        if (queue.TryDequeue(out result))
        {
            var dequeueAsyncResult = new DequeueAsyncResult
            {
                IsCompleted = true, 
                AsyncWaitHandle = new EventWaitHandle(true, EventResetMode.ManualReset), 
                AsyncState = state, 
                CompletedSynchronously = true, 
                Result = result
            };
            if (null != callback)
            {
                callback(dequeueAsyncResult);
            }
            return dequeueAsyncResult;
        }

        var pendingResult = new DequeueAsyncResult
        {
            AsyncState = state, 
            IsCompleted = false, 
            AsyncWaitHandle = new EventWaitHandle(false, EventResetMode.ManualReset), 
            CompletedSynchronously = false,
            Callback = callback
        };
        dequeueQueue.Enqueue(pendingResult);
        Timer t = null;
        t = new Timer(_ =>
        {
            if (!pendingResult.IsCompleted)
            {
                pendingResult.IsCompleted = true;
                if (null != callback)
                {
                    callback(pendingResult);
                }
                else
                {
                    ((EventWaitHandle)pendingResult.AsyncWaitHandle).Set();
                }
            }
            t.Dispose();
        }, new object(), timeout, Timeout.Infinite);

        return pendingResult;
    }

    public T EndDequeue(IAsyncResult result)
    {
        var dequeueResult = (DequeueAsyncResult) result;
        return dequeueResult.Result;
    }
} 
```

我不太确定该属性的同步`IsComplete`性，并且我不太关心如何在后续调用中`dequeueQueue`清理唯一的。`Enqueue`我也不确定何时是发出等待句柄信号的正确时间，但这是迄今为止我得到的最佳解决方案。

请不要以任何方式考虑此生产质量代码。我只是想展示我如何在不等待锁的情况下保持所有线程旋转的一般要点。我确信这充满了各种边缘情况和错误，但它满足了要求，我想回馈遇到这个问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:28:29.813

我很确定`BlockingCollection<T>`不能这样做，你必须自己动手。我想出了这个：

```
class NotifyingCollection<T>
{
    private ConcurrentQueue<Action<T>> _subscribers = new ConcurrentQueue<Action<T>>();
    private ConcurrentQueue<T> _overflow = new ConcurrentQueue<T>();

    private object _lock = new object();

    public void Add(T item)
    {
        _overflow.Enqueue(item);
        Dispatch();
    }

    private void Dispatch()
    {
        // this lock is needed since we need to atomically dequeue from both queues...
        lock (_lock)
        {
            while (_overflow.Count > 0 && _subscribers.Count > 0)
            {
                Action<T> callback;
                T item;

                var r1 = _overflow.TryDequeue(out item);
                var r2 = _subscribers.TryDequeue(out callback);

                Debug.Assert(r1 && r2);
                callback(item);
                // or, optionally so that the caller thread's doesn't take too long ...
                Task.Factory.StartNew(() => callback(item));
                // but you'll have to consider how exceptions will be handled.
            }
        }
    }

    public void TakeAsync(Action<T> callback)
    {
        _subscribers.Enqueue(callback);
        Dispatch();
    }
} 
```

我使用了调用`TakeAsync()`或`Add()`用作回调线程的线程。当您调用时`Add()`，`TakeAsync()`它会尝试将所有排队的项目分派到排队的回调中。这样就没有创建线程只是坐在那里睡觉，等待发出信号。

那个锁有点难看，但是你可以在不加锁的情况下在多个线程上排队和订阅。*如果另一个队列上有可用的东西*而不使用那个锁，我想不出一种方法来做相当于只出队的方法。

*注意：我只用几个线程对此进行了最低限度的测试。*

# iphone - 如果有条件，如何将其更改为 switch 语句？

> ID：11949426
> 
> 赞同：0
> 
> 时间：2012-08-14T09:27:37.627
> 
> 标签：iphone, objective-c, ios, switch-statement

我试图将以下代码从 if 语句更改为 switch 语句，但我收到一条错误消息，提示我需要一个整数而不是 id 对象。

这是我的开关：

```
-(void) nearestIndexAfterRotationEnded:(int)index {
NSLog(@"Selected item is: %@", [colorNames objectAtIndex:index]);
statusLabel.text = [NSString stringWithFormat:@"Selected item is: %@", [colorNames objectAtIndex:index]];

switch ([colorNames objectAtIndex:])) {
    case 1:
        [redButton setImage:[UIImage imageNamed:@"Btn1_1.png"] forState:UIControlStateNormal];

        break;

    case 2:
        [redButton setImage:[UIImage imageNamed:@"Btn1_2.png"] forState:UIControlStateNormal];

        break;

    default:
        break;
} 
```

这是我的 if 条件语句：

```
-(void) nearestIndexAfterRotationEnded:(int)index {
NSLog(@"Selected item is: %@", [colorNames objectAtIndex:index]);
statusLabel.text = [NSString stringWithFormat:@"Selected item is: %@", [colorNames objectAtIndex:index]];

if ([colorNames objectAtIndex:0]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_1.png"] forState:UIControlStateNormal];

}

if ([colorNames objectAtIndex:1]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_2.png"] forState:UIControlStateNormal];

}

if ([colorNames objectAtIndex:2]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_3.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:3]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_4.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:4]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_5.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:5]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_6.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:6]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_7.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:7]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_8.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:8]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_9.png"] forState:UIControlStateNormal];
} 
```

}

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:32:22.463

```
- (void)nearestIndexAfterRotationEnded:(int)index {
    NSLog(@"Selected item is: %@", [colorNames objectAtIndex:index]);
    statusLabel.text = [NSString stringWithFormat:@"Selected item is: %@", [colorNames objectAtIndex:index]];

    for (int i=0; i<9; i++) {
        if ([colorNames objectAtIndex:i]) {
            [redButton setImage:[UIImage imageNamed:[NSString stringWithFormat:@"Btn1_%d.png", i+1]] forState:UIControlStateNormal];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:09:47.107

好吧，我忍不住回答了，虽然大部分已经说了。

这是您要更改为 switch 语句的原始 if 语句：

```
-(void) nearestIndexAfterRotationEnded:(int)index {
NSLog(@"Selected item is: %@", [colorNames objectAtIndex:index]);
statusLabel.text = [NSString stringWithFormat:@"Selected item is: %@", [colorNames objectAtIndex:index]];

if ([colorNames objectAtIndex:0]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_1.png"] forState:UIControlStateNormal];

}

if ([colorNames objectAtIndex:1]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_2.png"] forState:UIControlStateNormal];

}

if ([colorNames objectAtIndex:2]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_3.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:3]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_4.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:4]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_5.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:5]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_6.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:6]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_7.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:7]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_8.png"] forState:UIControlStateNormal];
}

if ([colorNames objectAtIndex:8]) {
    [redButton setImage:[UIImage imageNamed:@"Btn1_9.png"] forState:UIControlStateNormal];
}
} 
```

现在这是不可能的，因为您需要一个变量来切换。

**现在，所有答案都没有看到，您在 if 语句中所做的与传递的索引变量无关。它从来没有出现在那里。（我认为这是错误的）**

相反，您从 0-8 检查 colorNames 数组中索引 0-8 处是否存在对象。如果任何 if 语句失败，则意味着以下所有语句也将失败，因为

```
if ([colorNames objectAtIndex: i]) 
```

返回 NIL，表示这是数组的结尾！

所以检查 if ([colorNames objectAtIndex: 0-8]) 本质上是没有意义的，或者至少需要简化。整个 if 语句可以浓缩为一行代码：

```
 [redButton setImage:[UIImage imageNamed:[NSString stringWithFormat:@"Btn1_%d.png", colorNames.count]] forState:UIControlStateNormal]; 
```

也就是说，如果 colorNames 不包含超过 9 个对象。如果它包含 9 个以上的对象，并且您仍然只想检查前 9 个是否存在，那么这行代码就可以了：

```
[redButton setImage:[UIImage imageNamed:[NSString stringWithFormat:@"Btn1_%d.png", MAX(9,colorNames.count)]] forState:UIControlStateNormal]; 
```

请记住，在整个 if-thing 中，传入的索引变量没有被考虑在内。

如果这是错误的，并且您想在索引处返回数组中对象的名称，则也不需要多个 if：

```
if ([colorNames objectAtIndex: index])
 [redButton setImage:[UIImage imageNamed:[NSString stringWithFormat:@"Btn1_%d.png", index+1]] forState:UIControlStateNormal]; 
```

所以我认为，您要么需要澄清您的问题（因为您的代码片段无法完成更多工作），要么需要改进您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:32:23.623

您不能将其更改为 switch 语句，因为它不满足 switch 的先决条件。

开关始终遵循模式

```
switch aVar {

case value1:
case value2:
default: 

} 
```

如果您坚持使用 switch 语句，则必须找到替代算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T09:34:37.273

```
Change it the code 
 switch ([colorNames objectAtIndex:]))
to 
switch (index)  This will be helpful for you. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:33:24.377

您必须在开关中使用 int 。因此，您必须转换`[colorNames objectAtIndex:1]`为整数。我不知道颜色对象是什么，它们是 NSNumber 还是 NSString，但我将假设是最新的。

你必须像这样切换：

```
switch ([[colorNames objectAtIndex:index] intValue])) 
```

intValue 消息告诉 NSString 返回它的整数表示。这样你就可以切换了。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-14T09:31:33.790

你能运行这段代码吗？

```
switch ([colorNames objectAtIndex:])) { 
```

应该抛出一个错误。您没有将值传递给 objectAtIndex！

它应该是

```
switch ([colorNames objectAtIndex:index])) { 
```

# soap - Orchard：在 Module 中消费 Webservice

> ID：11949427
> 
> 赞同：0
> 
> 时间：2012-08-14T09:27:42.223
> 
> 标签：soap, web-config, orchardcms

我需要在我正在编写的模块中使用现有的 SOAP-Webservice。

我的模块的 web.config 包含：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="WebShopServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
      receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
      bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://10.0.0.123/LCWebservices/LC.MiscService/webshopservice.asmx"
    binding="basicHttpBinding" bindingConfiguration="WebShopServiceSoap"
    contract="LCWebshopServiceReference.WebShopServiceSoap" name="WebShopServiceSoap" />
</client> 
```

但我的模块抛出

```
Oops. Something went wrong ... sorry
An unhandled exception has occurred and the request was terminated. 
Please refresh the page. If the error persists, go back

Es wurde kein standardmäßiges Endpunktelement gefunden, das auf den Vertrag
 "LCWebshopServiceReference.WebShopServiceSoap" im ServiceModel-
Clientkonfigurationsabschnitt verweist. 
Dies kann folgende Ursachen haben: Für die Anwendung wurde keine 
Konfigurationsdatei gefunden, oder im Clientelement wurde kein 
Endpunktelement gefunden, das diesem Vertrag entsprach. 
```

这大致翻译为找不到端点元素。我怀疑这是因为这个 web.config 不驻留在 Orchard-Root 中。

最好的办法是什么？

谢谢莱因哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:57:26.427

您可以使用 web.config 使用

```
Configuration configuration = ConfigurationManager.OpenMappedExeConfiguration(
                new ExeConfigurationFileMap { ExeConfigFilename = HostingEnvironment.ApplicationPhysicalPath + @"/Modules/MyModule/Web.config" }, ConfigurationUserLevel.None);

        var factory = new ConfigurationChannelFactory<IMyService>("IMyService", configuration, null);
        var client = factory.CreateChannel();
        client.MyMethod(); 
```

但我不建议这样做，基本上您必须使用自己的设置扩展 siteSettings 内容部分并将地址和绑定信息存储在那里。然后在您自己的 IoC 服务类中使用这些设置。

服务类可以创建绑定和 ChannelFactory 来调用 web 服务。

```
var factory = new ChannelFactory<WorkflowServiceRef.IWorkflowService>(
             binding,
             new EndpointAddress(endpointUri));
factory.Credentials.SupportInteractive = false;
factory.ConfigureChannelFactory();
var channel = factory.CreateChannel();

channel.MyMethod() 
```

# android - videoview 不支持 mpg 格式？

> ID：11949433
> 
> 赞同：0
> 
> 时间：2012-08-14T09:28:02.133
> 
> 标签：android, android-videoview

我正在尝试使用 url 在 vi​​deoView 中打开视频。

这是我使用的代码：

```
public void playVideo(){
String path= "http://s3.amazonaws.com/yendis_development/uploads/container/content/4fd79353c83b7260e6000003/3.mpg";
String path1="http://commonsware.com/misc/test2.3gp";

Uri uri=Uri.parse(path);
VideoView video=(VideoView)findViewById(R.id.video_view);
video.setVideoURI(uri);
video.start();
} 
```

当我使用“path1”时，我的 VideoView 会获取视频并正常播放。但是当我使用“路径”时，我看不到视频，并且出现一个对话框，上面写着“抱歉，无法播放此视频”。

为什么视频适用于 path1（3gp 文件）而不适用于 path（mpg 文件）？您可以在导航器中打开 path 和 path1 以便查看视频的测试，这两个链接在导航器中有效，但在 videoView 中无效。

当路径时，在我的 logcat 中，我收到此消息（错误）：

```
08-11 17:08:47.411: E/MediaPlayer(10064): error (1, -2147483648)
08-11 17:08:47.411: E/MediaPlayer(10064): Error (1,-2147483648)
08-11 17:08:47.411: D/VideoView(10064): Error: 1,-2147483648 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:34:35.893

mpeg 可以在一系列不同的格式/算法/编解码器上压缩视频，有些受支持，有些则不支持。3gp 只是其中之一，它受到支持（尽管格式很差）。

尝试自己编码视频，您会看到所有不同的选项。通常 H264 上的 mp4 可以在手机上完美运行。

# c# - 如何使用 WinNT 访问扩展属性？

> ID：11949434
> 
> 赞同：0
> 
> 时间：2012-08-14T09:28:02.260
> 
> 标签：c#, asp.net, c#-4.0, active-directory

我正在尝试制作一个 Web 应用程序，让用户有权在其 AD 帐户中编辑某个扩展属性。选择 WinNT ("WinNT://Domain/Username,user") 是因为它允许对 Active Directory 对象进行松散耦合的访问，而无需指定域控制器或完全限定的域名。**连接成功，但我无法检索扩展属性“extension_attribute_10”。**

WinNT 能否访问扩展属性？如果没有，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:29:58.857

您需要在 DirectoryServices 查询中指定要检索的属性。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.aspx)

# javascript - 这个正则表达式的含义

> ID：11949435
> 
> 赞同：0
> 
> 时间：2012-08-14T09:28:04.753
> 
> 标签：javascript, jquery, regex, jquery-plugins

我不太熟悉正则表达式，所以我需要一些帮助。我正在使用一个`jQuery`dynacloud 插件，当发生正则表达式匹配时，该插件会在我的代码中的某个识别点中断。我需要有人帮我弄清楚这个正则表达式匹配什么

```
/^[a-z\xE4\xF6\xFC]*[A-Z\xC4\xD6\xDC]([A-Z\xC4\xD6\xDC\xDF]+|[a-z\xE4\xF6\xFC\xDF]{3,} 
```

任何帮助请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:34:03.913

我建议你看看[Expresso](http://www.ultrapico.com/Expresso.htm)，因为你错过了右括号，结果如下：

![在此处输入图像描述](../Images/35aa5e3858ab61ddc1ee58ac60a1f78a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:35:57.423

`^`行首

`[...]`一类可能的字符

`a-z`范围（abcde...yz）

`\xE4`char 的十六进制值（“ascii”代码）。

`{n,m}`在 n 和 m 次出现之间。

`*`相当于 {0,}

`+`相当于 {1,}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:36:28.923

如果你替换那些你基本上得到的`\x**`部分，那么这些部分会转化为一个特殊的字符：

```
/^[a-zäöü]*[A-ZÄÖÜ]([A-ZÄÖÜß]+|[a-zäöüß]{3,})/ 
```

我给你拆开看：

`^`字符串的开头

`[a-zäöü]`字符集：从 a 到 z 或 äöü`*`零次或多次的任何字符

`[A-ZÄÖÜ]`字符集：从 A 到 Z 或 ÄÖÜ 的任何字符仅一次

`(`小组开始

`[A-ZÄÖÜß]`另一个字符集，你现在应该得到它:)`+`一次或多次

`|`或者

`[a-zäöüß]`字符集，`{3,}`3 次或更多次

`)`组结束

另外，您最后错过了 a `)/`，`/`开头和结尾的意思是介于两者之间的是正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:18:27.163

假设这是您的正则表达式：

```
/^[a-z\xE4\xF6\xFC]*[A-Z\xC4\xD6\xDC]([A-Z\xC4\xD6\xDC\xDF]+|[a-z\xE4\xF6\xFC\xDF]{3,})/ 
```

以下是对正则表达式的解释：

```
"^" +                              // Assert position at the beginning of a line (at beginning of the string or after a line break character)
"[a-z\xE4\xF6\xFC]" +              // Match a single character present in the list below
                                      // A character in the range between “a” and “z”
                                      // ASCII character 0xE4 (228 decimal)
                                      // ASCII character 0xF6 (246 decimal)
                                      // ASCII character 0xFC (252 decimal)
   "*" +                              // Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
"[A-Z\xC4\xD6\xDC]" +              // Match a single character present in the list below
                                      // A character in the range between “A” and “Z”
                                      // ASCII character 0xC4 (196 decimal)
                                      // ASCII character 0xD6 (214 decimal)
                                      // ASCII character 0xDC (220 decimal)
"(" +                              // Match the regular expression below and capture its match into backreference number 1
                                      // Match either the regular expression below (attempting the next alternative only if this one fails)
      "[A-Z\xC4\xD6\xDC\xDF]" +          // Match a single character present in the list below
                                            // A character in the range between “A” and “Z”
                                            // ASCII character 0xC4 (196 decimal)
                                            // ASCII character 0xD6 (214 decimal)
                                            // ASCII character 0xDC (220 decimal)
                                            // ASCII character 0xDF (223 decimal)
         "+" +                              // Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   "|" +                              // Or match regular expression number 2 below (the entire group fails if this one fails to match)
      "[a-z\xE4\xF6\xFC\xDF]" +          // Match a single character present in the list below
                                            // A character in the range between “a” and “z”
                                            // ASCII character 0xE4 (228 decimal)
                                            // ASCII character 0xF6 (246 decimal)
                                            // ASCII character 0xFC (252 decimal)
                                            // ASCII character 0xDF (223 decimal)
         "{3,}" +                           // Between 3 and unlimited times, as many times as possible, giving back as needed (greedy)
")" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:47:18.420

我假设`)/`正则表达式中缺少的只是您的剪切粘贴错误；它们存在于[DynaCloud 源代码](http://johannburkard.de/resources/Johann/jquery.dynacloud-5.js)中。*不*存在的是结束锚 ( ) `$`，我觉得这很令人惊讶。以下是相关代码：

```
var elems = jQuery(this).text()
            .replace(/[^A-Z\xC4\xD6\xDCa-z\xE4\xF6\xFC\xDF0-9_]/g, ' ')
            .replace(jQuery.dynaCloud.stopwords, ' ')
            .split(' ');
var word = 
  /^[a-z\xE4\xF6\xFC]*[A-Z\xC4\xD6\xDC]([A-Z\xC4\xD6\xDC\xDF]+|[a-z\xE4\xF6\xFC\xDF]{3,})/; 
```

第一条语句过滤掉不需要的字符，但只留下数字和下划线。第二条语句尝试匹配由 ASCII 字母加上一些在（例如）德语中使用的非 ASCII 字母组成的单词。但是，一旦匹配的字母用完，就可以继续匹配*任何*字符，而不仅仅是第一个正则表达式中列出的字符。此外，单词中的任何数字或下划线都会导致该单词被分成两个或多个单词。

我会尝试在末尾锚定正则表达式并添加对数字和下划线的支持，如下所示：

```
/^[a-z\xE4\xF6\xFC]*[A-Z\xC4\xD6\xDC]([A-Z\xC4\xD6\xDC\xDF0-9_]+|[a-z\xE4\xF6\xFC\xDF0-9_]{3,})$/g 
```

此正则表达式仅用于说明目的；它不是一个解决方案。一方面，我对数字和下划线的位置做了一个疯狂的猜测。另一方面，它现在可以匹配以数字和下划线结尾的单词，而您可能不希望这样。

# java - 我如何将元素附加到 xml？

> ID：11949436
> 
> 赞同：1
> 
> 时间：2012-08-14T09:28:04.130
> 
> 标签：java, xml

我有一个 xml 文件。我想追加新元素。当我添加新项目时，我控制 xml，并且在 xml 中有没有现有条目的新条目。我想看到他们所有人。为什么现有项目条目被删除？

**我的意思是我在 xml 中有记录，当我通过这种方式添加新条目时，旧条目就消失了。为什么？如何解决这个问题？**

```
String filepath = System.getProperty("user.dir")+"\\xxx.xml";
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.parse(filepath);                             

Element newB = doc.createElement("Script");
Element newC = doc.createElement("Script_No");
newC.setTextContent(script_no);
Element newD = doc.createElement("Script_Name");
newD.setTextContent(script_name);
Element newE = doc.createElement("Script_Version");
newE.setTextContent(script_version);
Element newF = doc.createElement("Script_Modified_By");
newF.setTextContent(who);
Element newG = doc.createElement("Script_Result");
newG.setTextContent(result);
Element newH = doc.createElement("Script_Date");
newH.setTextContent(dateNow);

newB.appendChild(newC);
newB.appendChild(newD);
newB.appendChild(newE);
newB.appendChild(newF);
newB.appendChild(newG);
newB.appendChild(newH);
doc.getDocumentElement().appendChild(newB);

TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer2 = transformerFactory.newTransformer();
DOMSource source = new DOMSource(doc);
StreamResult resultttt = new StreamResult(new File(filepath));
transformer2.transform(source, resultttt); 
```

我有这个条目

![在此处输入图像描述](../Images/8a743ecaacd44b7d2811f12d9649b525.png)

* * *

我附加了一个新值，我的 xml 就是这个，但我不想要这个：

## ![在此处输入图像描述](../Images/05295c0a977e8654d13e034b0ff5612d.png)

我等它看起来像这样（但它不是）： ![在此处输入图像描述](../Images/88f36729e48a11ffa90b5a4298f7a789.png)

# matplotlib - Matplotlib 库示例上的居中标题

> ID：11949437
> 
> 赞同：1
> 
> 时间：2012-08-14T09:28:07.610
> 
> 标签：matplotlib, label, subplot

我有以下代码，从图库中撕下

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.ticker import NullFormatter
from itertools import groupby
import matplotlib.pyplot as plt
import numpy
#fig = plt.figure(figsize=(13, 12))

files = ("file1","file2")
place = (1,2)
print files
print place
plt.bone()
for f in zip(files,place):
    print "file", f
    # would like the two below each other, don't know how, so i clear
    plt.clf()
    # data comes from the files normally
    x = np.random.randn(1000)
    y = np.random.randn(1000)
    z = np.random.randn(100)

    nullfmt   = NullFormatter()         # no labels

    # definitions for the axes
    left, width = 0.1, 0.65
    bottom, height = 0.1, 0.65
    bottom_h = left_h = left+width+0.02

    rect_scatter = [left, bottom, width, height]
    rect_histx = [left, bottom_h, width, 0.2]
    rect_histy = [left_h, bottom, 0.2, height]

    # start with a rectangular Figure
    plt.figure(1, figsize=(8,8))
    plt.xlabel('$^{13}$C (ppm)')
    plt.ylabel('$^{15}$H (ppm)')

    axScatter = plt.axes(rect_scatter)
    axHistx = plt.axes(rect_histx)
    axHisty = plt.axes(rect_histy)

    # no labelsfor the histgrams
    axHistx.xaxis.set_major_formatter(nullfmt)
    axHisty.yaxis.set_major_formatter(nullfmt)

    # the scatter plot:
    #axScatter.scatter(x, y)
    axScatter.scatter(numpy.float64(x),numpy.float64(y), c=numpy.float64(z),lw=0.1,s=5)

    # now determine nice limits by hand:
    binwidth = 0.25
    xymax = np.max( [np.max(np.fabs(x)), np.max(np.fabs(y))] )
    lim = ( int(xymax/binwidth) + 1) * binwidth

    axScatter.set_xlim( (min(x), max(x)+binwidth) )
    axScatter.set_ylim( (min(y), max(y)+binwidth) )
    #axScatter.set_ylim( (-lim, lim) )
    binwidth = (max(x) - min(x))/20
    bins = np.arange(min(x), max(x) + binwidth, binwidth)
    axHistx.hist(x, bins=bins)
    binwidth = (max(y) - min(y))/20
    bins = np.arange(min(y), max(y) + binwidth, binwidth)
    axHisty.hist(y, bins=bins, orientation='horizontal')

    axHistx.set_xlim( axScatter.get_xlim() )
    axHisty.set_ylim( axScatter.get_ylim() )
    plt.savefig(f[0]+"out_hist.png", format='png',dpi=1200)
    plt.savefig(f[0]+"out_hist.svg", format='svg') 
```

这段代码给了我： ![例子](../Images/a097c8d7180255e5fc9eaac8e6d0d955.png)

但是，我不知道背景中的这个框架来自哪里。而且我想让我的字幕集中在情节上，而不是整个事情。最后，我无法在一个简单的 JPG 中将这些图放在一起。我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:30:44.350

当您调用 时`plt.xlabel()`，pyplot 将创建一个轴，即背景轴。删除两行调用 plt.xlabel() & plt.ylabel() 并在后面添加以下行`axScatter = plt.axes(rect_scatter)`

```
axScatter.set_xlabel('$^{13}$C (ppm)')
axScatter.set_ylabel('$^{15}$H (ppm)') 
```

![在此处输入图像描述](../Images/db6b53318934a0e8cb8e2578776b172d.png)

# silverlight - SilverLight ListBoxDragDropTarget 不改变顺序

> ID：11949441
> 
> 赞同：0
> 
> 时间：2012-08-14T09:28:26.920
> 
> 标签：silverlight, silverlight-5.0

我正在使用 ListBoxDragDropTarget，当我拖放一个项目时，绑定到 ListBox 的 ObservableCollection 不会更改其项目顺序。

```
 <controlsToolkit:ListBoxDragDropTarget AllowDrop="True"
                                               Grid.Row="1"
                                               HorizontalContentAlignment="Stretch"             
                                               VerticalAlignment="Top"
                                               Margin="0,10,8,10"
                                               ItemDragCompleted="ListBoxDragDropTarget_ItemDragCompleted_1"
                                               BorderThickness="0">
                  <ListBox x:Name="servicesListBox" ItemsSource="{Binding ServiceCollection}" 
                           ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                           SelectionChanged="servicesListBox_SelectionChanged_1"
                           SelectedItem="{Binding SelectedService, Mode=TwoWay}" 
                           Margin="0,102,0,0" Background="#FF040404"
                           SelectionMode="Extended"
                           Foreground="White" Width="800" HorizontalAlignment="Center" BorderBrush="#FF040404" Height="340" VerticalAlignment="Top" >
                      <ListBox.ItemsPanel>
                          <ItemsPanelTemplate>
                            <controlsToolkit:WrapPanel />
                          </ItemsPanelTemplate>
                      </ListBox.ItemsPanel>
                      <ListBox.ItemTemplate>
                          <DataTemplate>
                            <StackPanel Width="250" Margin="4" Orientation="Horizontal">                                    
                                  <TextBlock Text="{Binding Title}" Foreground="{Binding IsDesactivated, Converter={StaticResource OnlineColorConverter}}"
                                            HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2,0,0,0" Width="190" />
                            </StackPanel>
                          </DataTemplate>
                      </ListBox.ItemTemplate>
                  </ListBox>
            </controlsToolkit:ListBoxDragDropTarget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:16:35.070

可能是您在 ObservableCollection 中的项目是异构的。当您使用多态性时会发生这种情况，例如，如果您有一个 ObservableCollection，但它实际上包含 MyClass 类型的元素。这是 ListBoxDragDropTarget 的错误，但此控件在“实验”质量范围内。

两个可能的修复：

*   使用 ObservableCollection 并确保其中只有 MyClass 的实例
*   使用该修复： [http ://cjbhaines.wordpress.com/2011/07/09/silverlight-listboxdragdroptarget-why-cant-i-drop-it-there/](http://cjbhaines.wordpress.com/2011/07/09/silverlight-listboxdragdroptarget-why-cant-i-drop-it-there/)

# zend-framework - 在 Zend 框架中 renderViewHelper 做了什么？

> ID：11949443
> 
> 赞同：3
> 
> 时间：2012-08-14T09:28:33.130
> 
> 标签：zend-framework

微不足道，但我发誓我在任何地方都找不到信息。

```
<?php $username = $this->form->username ?>
<?php echo $username->renderViewHelper() ?> 
```

renderViewHelper() 在这里做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:17:54.733

有时，您可能希望将 Zend_Form 与视图中的现有标记一起使用，例如考虑将在视图文件中找到的以下标记。

```
<form method="<?php echo $form->getMethod() ?>" action="<?php echo $form->getAction()?>">
    <div id="elements">
        <?php echo $form->element1->renderLabel() . $form->element1->renderViewHelper() ?>
        <?php echo $form->element2->renderLabel() . $form->element2->renderViewHelper() ?>
    </div>
</form> 
```

下面的语法

```
$form->element1->renderLabel() 
```

将仅获取标签标签。没有花哨的包装标签或任何东西。同样的

```
$form->element1->renderViewHelper() 
```

这只会获取输入（或任何指定的）元素标签。这样您就可以使用自己的现有标记嵌入表单，而不是允许`zend_form`自己创建标记。

检查此链接以获取更多信息[http://framework.zend.com/manual/en/learning.form.decorators.individual.html](http://framework.zend.com/manual/en/learning.form.decorators.individual.html)

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:04:50.203

它呈现表单元素，特别是`viewHelper`来自表单元素的装饰器，它是呈现元素本身的装饰器（没有任何额外的标记）。

# c# - 在 C# 上编译错误 FreeImage

> ID：11949447
> 
> 赞同：0
> 
> 时间：2012-08-14T09:28:57.940
> 
> 标签：c#, visual-studio-2010, freeimage

当我尝试编译 FreeImageNET C# 包装器时，我不断收到几条错误消息（当前为 35 条）。所有消息都采用相同的格式。

其实我发现这个问题以前也有人问过，答案是把“typeparamref”改成“paramref”。但是，其余的错误消息已经包含“paramref”，所以我不知道要更改什么来纠正这些错误。

任何帮助，将不胜感激。

其中两条错误消息如下：

```
Error   1   Warning as Error: XML comment on 'FreeImageAPI.Palette.Palette(FreeImageAPI.Metadata.MetadataTag)' has a paramref tag for 'dib', but there is no parameter by that name D:\[kur]\[csharp]\image_tools\FreeImage\Wrapper\FreeImage.NET\cs\Library\Classes\Palette.cs 70  63  Library

Error   2   Warning as Error: XML comment on 'FreeImageAPI.Metadata.GifInformation.CreateGlobalPalette(int)' has a paramref tag for 'palette', but there is no parameter by that name   D:\[kur]\[csharp]\image_tools\FreeImage\Wrapper\FreeImage.NET\cs\Library\Classes\GifInformation.cs  76  23  Library 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:43:49.810

正如错误所说，在描述不存在的参数的方法上有一个 XML 注释。除了不将警告视为错误之外，另一种解决方案是不让 Visual Studio 创建 XML 文档（可以在项目设置的“构建”选项卡上找到）。

# android - Android上的温度传感器

> ID：11949452
> 
> 赞同：7
> 
> 时间：2012-08-14T09:29:11.477
> 
> 标签：android, sensors

```
 public class MainActivity extends Activity implements SensorEventListener {
    private TextView temperaturelabel;
    private SensorManager sensormanager;
    private Sensor temperature;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    temperaturelabel = (TextView) findViewById(R.id.text);

    sensormanager = (SensorManager)getSystemService(SENSOR_SERVICE);

    temperature= sensormanager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);

   temperaturelabel.setText(""+temperature.getPower());
 }

 protected void onResume() {
     super.onResume();
     sensormanager.registerListener(this, temperature, SensorManager.SENSOR_DELAY_FASTEST);
 }

 protected void onPause() {                 
     super.onPause();
     sensormanager.unregisterListener(this);
 }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {}

 public void onSensorChanged(SensorEvent event) {   
        if (event.sensor.getType() != Sensor.TYPE_AMBIENT_TEMPERATURE) return;

        temperaturelabel.setText(""+temperature.getPower());
    }
 } 
```

我想从设备中获取温度。

我编写了这段代码，并在 HTC One X 上尝试过，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:53:53.747

就 htc one x 的规格而言，它看起来这个设备没有温度传感器。

看看它的[官方规格](http://www.htc.com/www/smartphones/htc-one-x/#specs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T08:58:53.937

目前，只有少数设备具有温度传感器（例如，三星 S4）。

您应该始终测试传感器是否可用，即 {

```
temperatureSensor = sensormanager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE)
if (temperatureSensor != null) {
    /* register listener and do other magic... */
} 
```

您可以在 HTC 上做的，是在系统中找到其他一些热敏电阻并读取 sysfs 路径，它的值暴露在哪里，例如，电池中的热敏电阻或压力传感器中的热敏电阻，如果这部手机中有的话。

这种方法的缺点是这些是原始热敏电阻值 - 有时你必须知道如何将它们转换为摄氏度，更糟糕的是，它们没有得到补偿（就像来自 API 的温度一样） - 例如，如果手机会运行一些计算，处理器会加热手机，这个值很容易比环境温度高 10 度，因此不是很有用......

# javascript - 加载包含 Javascript 的外部 PHP 文件

> ID：11949457
> 
> 赞同：0
> 
> 时间：2012-08-14T09:29:34.210
> 
> 标签：javascript, jquery, ajax

我正在尝试使以下工作。我的页脚文件中有这段代码：

页脚.php：

```
<script type="text/javascript">
$(document).ready(function(){
$.ajax({ 
url: '', 
type: 'GET', 
dataType: "script",
success: function(data){ 
  //data is returned back 
  $('#latestforumposts').html(data); 
} 

});

}); 
</script> 
```

这是文件 forumposts.php：

```
<script type="text/javascript" src='http://www.habboxforum.com/external.php?forumids=1382,1384,4,5,14,1410,7,85,40,43,124,123,24,30,306,34,446,38,214,1409,249,767,69,71,73,134,56,45,1230,54,135,1424,1425,601,893,209,1086&type=js'></script>

<script type="text/javascript">
<!--
for (x = 0; x < 5; x++)
{
document.writeln("<tr class='forumnewposts'><td><div class='forumpostwidth'><a target='_blank' href='http://www.habboxforum.com/showthread.php?t="+threads[x].threadid+"'>"+threads[x].title+"</a></div></td><td><div class='forumuserwidth'>"+threads[x].poster+"</div></td></tr>");
}
//-->
</script> 
```

基本上，该文件似乎并没有`#latestforumposts`像预期的那样加载到 div 中，但如果您直接访问 forumposts.php 页面，它会显示应有的内容（例如 forumposts.php 中的脚本有效）。

如何拖动该脚本并将其放置在页面上的 div 中。我需要这样做的原因是我需要它每 x 秒自动刷新一次。

**更新：**

好的，现在我的页脚中有以下代码：

```
<script type="text/javascript" src="http://www.habboxforum.com/external.php?forumids=1382,1384,4,5,14,1410,7,85,40,43,124,123,24,30,306,34,446,38,214,1409,249,767,69,71,73,134,56,45,1230,54,135,1424,1425,601,893,209,1086&type=js"></script>
  <script type="text/javascript">
$(document).ready(function(){
$.ajax({ 
url: '', 
type: 'GET', 
dataType: "html",
success: function(data){ 
  //data is returned back 
  $('div#latestforumposts').html(data); 
} 

});

}); 
</script> 
```

这现在加载脚本，但不是显示加载到 div#latestforumposts 中的 html，而是用它刷新整个页面内容。知道为什么它不加载到 div 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:00:55.470

**jQuery**

```
$(document).ready(function()
{
    update(false);
});

function update(load)
{
    if(load)
    {
        $.get(url,function(data)
        {
            $('#latestforumposts').html(data); 
        });
    }

    setTimeout(function(){update(true)},5000);
} 
```

**PHP (/forumposts.php)**

```
<script type="text/javascript" src="http://www.habboxforum.com/external.php?forumids=1382,1384,4,5,14,1410,7,85,40,43,124,123,24,30,306,34,446,38,214,1409,249,767,69,71,73,134,56,45,1230,54,135,1424,1425,601,893,209,1086&type=js"></script>
<script type="text/javascript">
    for(x = 0; x < 5; x++)
    {
        $('#new_posts tbody').append('<tr class="forumnewposts"><td><div class="forumpostwidth"><a target="_blank" href="http://www.habboxforum.com/showthread.php?t='+threads[x].threadid+'">'+threads[x].title+'</a></div></td><td><div class="forumuserwidth">'+threads[x].poster+'</div></td></tr>');
    }
</script>
<table id="new_posts"><tbody></tbody></table> 
```

**HTML**

```
<div id="latestforumposts"></div> 
```

# batch-file - 使用添加到文件夹的每个新文件更新文件的批处理文件

> ID：11949458
> 
> 赞同：0
> 
> 时间：2012-08-14T09:29:44.020
> 
> 标签：batch-file

我有一个 Html 文件 my.html 有这样的链接：

```
<a href="1.html">1.html</a> 
```

我如何制作批处理脚本（对于 Windows，BAT 文件），每次将新的 Html 文件添加到文件夹时，my.html 添加新行，例如在添加**test.html**之后：

```
 <a href="test.html">test.html</a><br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:25:07.507

[Sed](http://www.gnu.org/software/sed/manual/sed.html) ¹非常适合此类事情。你可以做：

```
sed "s#\(<a href=.*>.*</a>\)#\1</br>#g" my.html > my_out.html 
```

**简短说明：**
Sed 命令如下所示：`s#*search_string*#*replace string*#g`

1.  `s`告诉 Sed 搜索和替换
2.  这`#`是 Sed 命令的分隔符（可以使用任何字符）。
3.  搜索字符串的模式是[正则表达式](http://en.wikipedia.org/wiki/Regular_expression) `"<a href=.*>.*</a>"` （*即*任何以 开头并`<a href=`以`>`结尾的字符串`</a>`）。
    该模式包含在转义括号中，*即* . 这允许 Sed 记住将该模式数学化为的字符串的出现。`\(*pattern*\)``\1`
4.  替换字符串是`\1<br/>`，*即*搜索字符串被自身替换，并`<br/>`在末尾附加。
5.  `g`告诉 Sed 对文件中所有出现的搜索字符串重复该操作。

希望有帮助！

* * *

^(¹ Sed 也已移植到 Windows（请参阅[此处](http://gnuwin32.sourceforge.net/packages/sed.htm)）。)

# unity3d - 如何获取父游戏对象的大小？

> ID：11949463
> 
> 赞同：9
> 
> 时间：2012-08-14T09:30:01.947
> 
> 标签：unity3d

我有三个子游戏对象（如下图所示，**红色**、**粉色**和**蓝色**）。它们是父游戏对象 Green 的子对象。

我不知道，如何计算 Parent(Green) *GameObject 的*大小？

我正在使用以下代码在运行时创建所有这些游戏对象：

```
GameObject CreatePattern(int difficultyLevel)    
    {    
        GameObject gameObjectTemp = new GameObject();    
        SinglePattern singlePattern;    
        gameObjectTemp = (GameObject) Instantiate(gameObjectTemp);   

        singlePattern = freeRunDataHandler.GetSinglePatternRandom(1);    
        GameObject gameObjectSingleObject = null;    
        foreach (SingleObject singleObject in singlePattern.singleObjectList)    
        {
                gameObjectSingleObject = GetGameObjectByCategory(singleObject.catergory, singleObject.type);

            if (gameObjectSingleObject != null)    
            {    
                gameObjectSingleObject = (GameObject) Instantiate(gameObjectSingleObject, new Vector3(singleObject.positionX, singleObject.positionY, singleObject.positionZ), Quaternion.identity);    
                gameObjectSingleObject.transform.localScale = new Vector3(singleObject.length, 1, singleObject.width);    
                gameObjectSingleObject.transform.parent = gameObjectTemp.transform;    
            }    
        }        

        return gameObjectTemp;    
    } 
```

添加所有孩子后，此函数返回父（绿色）游戏对象。我的父级（绿色）没有任何附加内容，甚至没有任何组件（BoxCollider、MeshFilter、MeshRenderer 等）。

我已附加 BoxCollider、MeshRenderer 和 MeshFilter（仅用于测试）并且我在父级上尝试过：

```
parent.collider.bounds.size.x  ----- > box collider
parent.renderer.bounds.size.x  ----- > mesh renderer 
```

但没有任何效果。在某些情况下返回 1 或零。请帮助我如何获取父（绿色）游戏对象的大小？

![在此处输入图像描述](../Images/9f41618e836aab4e13d19f43f9501225.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-14T21:21:41.567

大小是指边界吗？如果是这样，它应该比你做的简单得多。我的代码未经测试，我手边没有 Unity，但这应该可以。它假定“父级”是您的层次结构中的一个游戏对象，并且它在层次结构中具有“子级”。

```
Bounds bounds = parent.renderer.bounds;
foreach (Transform child in parent.transform)
{
    bounds.encapsulate(child.gameObject.renderer.bounds);
} 
```

更新：

或者，如果您不想要带有渲染器的父级：

```
// First find a center for your bounds.
Vector3 center = Vector3.zero;

foreach (Transform child in parent.transform)
{
    center += child.gameObject.renderer.bounds.center;   
}
center /= parent.transform.childCount; //center is average center of children

//Now you have a center, calculate the bounds by creating a zero sized 'Bounds', 
Bounds bounds = new Bounds(center,Vector3.zero); 

foreach (Transform child in parent.transform)
{
    bounds.encapsulate(child.gameObject.renderer.bounds);   
} 
```

您提到不想使用父/子层次结构。如果您不走那条路线，则需要将“孩子”添加到某种数组中，或者您必须使用 GameObject.Find() 方法按名称查找每个孩子。如果您命名诸如“child_1”、“child_2”之类的名称，您可以很容易地查找它们，但简单地创建一个父对象是一种简单得多的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T23:47:58.717

这是一篇较旧的帖子，但我有类似的需求，并且由于一些问题而遇到了一些问题

第一次我注意到我计算出来的父框比它应该的要宽，而且它的中心不是很正确

原因是我的对象应用了旋转，而边界永远不会这样做；所以在运行我的计算之前，我首先需要旋转回零；然后一旦计算出来，我就可以恢复原来的旋转。

第二，在我的情况下，并不是我所有的子对象都有渲染器，此外我的孩子可能有自己的孩子，所以我不想计算中心在变换孩子上，我想要孩子渲染组件。

下面是我想出的结果代码；重磅评论；没有优化，但可以解决问题，如果您愿意，可以考虑孙子，并在开始时处理具有旋转的对象。

```
 //Store our current rotation
        Vector3 LocalAngle = transform.localEulerAngles;
        //Zero the rotation before we calculate as bounds are never rotated
        transform.localEulerAngles = Vector3.zero;
        //Establish a default center location
        Vector3 center = Vector3.zero;
        //Establish a default empty bound
        occupiedSpace = new Bounds (Vector3.zero, Vector3.zero);
        //Count the children with renderers
        int count = 0;
        //We only count childrent with renderers which should be fine as the bounds center is global space
        foreach (Renderer render in transform.GetComponentsInChildren<Renderer>()) {
            center += render.bounds.center;  
            count++;
        }
        //Return the average center assuming we have any renderers
        if(count > 0)
            center /= count;
        //Update the parent bound accordingly
        occupiedSpace.center = center;
        //Again for each and only after updating the center expand via encapsulate
        foreach (Renderer render in transform.GetComponentsInChildren<Renderer>()) {
            occupiedSpace.Encapsulate(render.bounds);
        }
        //In by case I want to update the parents box collider so first I need to bring things into local space
        occupiedSpace.center -= transform.position;
        boxCollider.center = occupiedSpace.center;
        boxCollider.size = occupiedSpace.size;
        //Restore our original rotation
        transform.localEulerAngles = LocalAngle; 
```

# objective-c - NSStreamStatus 手动更改

> ID：11949467
> 
> 赞同：0
> 
> 时间：2012-08-14T09:30:14.253
> 
> 标签：objective-c, ios, nsstream

有什么方法可以手动更改streamStatus

```
 NSStreamStatusNotOpen = 0,
   NSStreamStatusOpening = 1,
   NSStreamStatusOpen = 2,
   NSStreamStatusReading = 3,
   NSStreamStatusWriting = 4,
   NSStreamStatusAtEnd = 5,
   NSStreamStatusClosed = 6,
   NSStreamStatusError = 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:05:57.650

[NSStreamStatus](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)用于获取流信息。因此，它不能手动更改，因为它提供了接收器的状态。

# entity-framework - 实体框架 - 如何映射这种关系

> ID：11949468
> 
> 赞同：0
> 
> 时间：2012-08-14T09:30:18.673
> 
> 标签：entity-framework

我有：

用户：-ID -名称

项目 -ID -标题

所以我的配置很糟糕，Stackover flow 的好人指出我是对的。极好的！问题是，我现在意识到我有一个改变事情的额外要求。

在用户（类）中，我有： public virtual ICollection Items { get; 放; }

这会使用 UserID 和 ItemID 自动创建一个表（用于查找）。

问题是，我想将某些项目标记为收藏项（如果使用收藏夹，则为 IE），现在因为表是自动创建的并且没有类，我无法在此类/表上添加属性“IsFavourite”。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:08:21.423

EF 多对多关系不允许额外的属性，因此最简单的方法可能是为您的链接表创建一个显式实体对象，您可以根据需要对其进行修改。

```
public class User
{
    [Key]
    public int ID { get; set; }

    public virtual ICollection<UserItem> UserItems { get; set; }
}

public class Item
{
    [Key]
    public int ID { get; set; }

    public virtual ICollection<UserItem> UserItems { get; set; }
}

public class UserItem
{
    [Key]
    public int UserID { get; set; }
    [Key]
    public int ItemID { get; set; }

    [ForeignKey("UserID")]
    public virtual User User { get; set; }
    [ForeignKey("ItemID")]
    public virtual Item Item { get; set; }

    public bool IsFavourite { get; set; }
} 
```

# cuda-gdb - 未对齐的共享或本地地址

> ID：11949476
> 
> 赞同：2
> 
> 时间：2012-08-14T09:30:54.707
> 
> 标签：cuda-gdb

我正在使用 cuda-memcheck 来检查内存错误。一个简单的问题。*Misaligned Shared or Local Address*到底是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:39:56.063

有关 CUDA-MEMCHECK 错误的更多信息，请参阅[CUDA-MEMCHECK 用户手册](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/cuda-memcheck.pdf)。

当地址不符合数据访问大小的自然对齐时，就会发生地址未对齐异常。

```
error if (address & (access_size_in_bytes - 1)) 
```

例如，如果您尝试从地址 0x1 执行 32 位共享加载，您将收到未对齐的地址异常。地址必须是 4 的倍数。

# c# - 在 DataGridView 中禁用导航 - C#

> ID：11949477
> 
> 赞同：0
> 
> 时间：2012-08-14T09:30:55.423
> 
> 标签：c#, events, datagridview

如何禁用 DataGridView 中的导航？我不确定为什么这是因为所有属性都已“禁用”或变为错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:07:56.293

DataGridView 上有一个名为“SelectionMode”的属性，您可以将其设置为“FullRowSelect”，它只允许用户选择行。

# c# - 字符串拆分逻辑 C#

> ID：11949479
> 
> 赞同：3
> 
> 时间：2012-08-14T09:31:10.290
> 
> 标签：c#, string, split

我有一个 REST 服务，它返回一个带有字符串的 JSON。该字符串是几个单词的聚合。组合这些字符串时，我使用“/”稍后将其拆分为分隔符。

例如：- 我得到的 json 字符串- AAA/BBB/CCC（我正在从数据库中读取这些值）

在 UI 中，我从分隔符“/”中吐出这个字符串，我引入该分隔符以提出业务逻辑。

我的问题是我引入的分隔符“/”是用户甚至可以输入的东西。因此，例如，如果用户也将“/”输入到其中一个字符串中，那么我的 JSON 将如下所示

例如：- AAA/BBB/CC/C（/在用户输入两个 C 之后）

然后我的字符串拆分逻辑是错误的，因为我也使用相同的值来拆分字符串

处理此类问题的理想方法应该是什么。我使用.NET C#

理想情况下，我想要一种方法来组合我的字符串并根据最终用户永远不会输入的内容拆分字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:35:12.307

一种选择是不将集合存储为标量值。您可以使用一对多关系在数据库中对此进行建模，或者您可以将集合序列化为 XML，并将其存储在单个列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:38:31.807

请不要使用字符串来表示数组。您应该返回一个 JSON `['First', 'Second', 'Third', 'etc']`。您可以使用任何 JSON 库从 C# 生成它（如果您使用 MVC3，您可以轻松地`return Json(...)`创建一个数组）。

就 Javascript 而言，您会得到一个可以轻松使用的数组。此外，将其发回应该很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:46:44.080

而不是重新发明轮子，编写自己的序列化代码。为什么不使用标准 JSON 库为您进行序列化。

JSON 已经迎合了数组或集合的概念，并且旨在逃避其自己的分隔符。无需将您自己的专有格式添加到某些标准 JSON 的中间。

[这个问题](https://stackoverflow.com/questions/391157/is-there-any-off-the-shelf-json-serialization-helper-class-in-net-bcl)已经处理了 JSON 序列化程序选择问题。

* * *

只需将对象上的字符串存储为 some `IEnumerable<string>`。无论如何，它们可能都是从您的数据模型中出来的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:59:34.833

如果您要发布或放置此字符串，则根本不要像这样滚动您自己的编码。我们已经定义了 XML 和 JSON，尽管人们可能会无休止地争论它们的优缺点，但它们都可以工作，所以请使用其中之一。

如果您在 URI 中使用此字符串进行 GET（当它自然是 GET 时这是一个更好的选择，如果不是，则更糟糕到容易出错的选择），那么 application/x-www-form-urlencoded 很好为这个用途定义：`item=AAA&item=BBB&item=CCC`and `&`from`=`不是 uri 编码的，而是任何`&`or `=`（以及任何其他在 URI 中受限的字符）以正常方式编码（计算出字符的 UTF-8 并添加每个八位字节的值在`%`so eg `=`is `%3D`, `ë`is`%C3%AB`等之后。

如果你真的需要坚持你的基本方法，那么 U+001F 是一个控制字符，传统上用于在最低级别分隔字段（U+001E、U+001D 和 U+001C 被用于越来越高的级别分隔字段组）并且不会出现在大多数键盘上（并且任何书呆子和老派的人都设置了键盘来键入它们，希望它们分隔字段）。如果可以避免的话，我不建议采用这种 1960 年代的方法来解决 2012 年的问题（尽管我认为美国的计算机仍然由约翰逊总统授权支持这些角色！）

并且出于对 Ada Lovelace 的喜爱，如果可以避免的话，不要将编码的字符串存储在数据库中（可能在一个日志表中，它只是为了记录为诊断目的而发送的日志）。将单独的字段存储在数据库中，作为单独的字段。标准化是 1960 年代的方法，在 2012 年仍然**适用。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:35:32.273

在“/”之前添加一个“/”。额外的“/”很好地表明您应该将其作为字符处理，而不是分隔标志。你可以用[正则表达式做的分裂](http://www.dotnetperls.com/regex-split)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T09:41:52.057

你可以做类似的事情，使用组合字符串

> 字符串 S='AAA','BBB','CCC'

比你可以写的代码

> string[] ary=S.Replace("|","Pipe;").Replace("','","|").Split('|') ary[0] = ary[0].Replace( "管道；","|")

# android - android圆形进度条

> ID：11949482
> 
> 赞同：3
> 
> 时间：2012-08-14T09:31:30.917
> 
> 标签：android, progress-bar

我需要制作一个圆形进度条，仅在接收数据时旋转。我在布局中写道：

```
 <ProgressBar
            android:id="@+id/progress_bar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:indeterminateOnly="true"
            style="?android:attr/progressBarStyleSmall"
            /> 
```

然后收到部分数据，我做

```
mProgressBar.incrementProgressBy(10); 
```

我认为最初 mProgressBar 应该停止，但它正在永久旋转，甚至没有建立连接！

我应该怎么做才能使 ProgressBar 在收到另一部分数据时最初停止并旋转？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:04:24.643

没有办法停止不确定的进度条。您要么必须创建自己的自定义进度条，要么可以使用不确定的可绘制对象做一些小技巧。

您可以在进度条上放置一个图像视图并在其中设置相同的可绘制对象。

当您想停止动画时，隐藏进度条并显示图像视图。

当您想开始动画时，隐藏图像视图并显示进度条。

它应该给你同样的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:40:47.317

使用`visible`和`gone`用于布局中的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:35:58.130

抱歉，您无法通过不确定的进度条实现这一目标。该控件用于显示正在后台执行某些操作。没有指示此操作何时开始或何时完成。

因此，您要么必须用户确定进度条，要么创建自己的自定义组件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:35:20.790

完成工作后拨打此电话。

```
 mProgressBar.dismiss(); 
```

# iphone - iOS-dismissModalViewController 不起作用

> ID：11949487
> 
> 赞同：0
> 
> 时间：2012-08-14T09:32:06.387
> 
> 标签：iphone, ios, uiviewcontroller, uiwebview, uiwebviewdelegate

点击 上`ShowWebsiteButton`显示`MainViewController`网站`WebViewController`。轻按一下`CloseWebViewButton`应该`WebViewController`会关闭`WebViewController`并再次显示给我`MainViewController`。注意：成功`MainViewController`打开`WebViewController`并加载网站，我只是无法返回`MainViewController`.

主视图控制器.h

```
@interface MainViewController : UIViewController <UIWebViewDelegate>
@property (strong, nonatomic) WebViewController *webViewController; 
```

主视图控制器.m

```
 - (IBAction)showWebsiteButton:(id)sender {

        NSString *fullURL = @"http://www.apple.com"

        self.webViewController.delegate = self;

        self.webViewController.websiteName = fullURL;

        self.webViewController.serviceName = @"Apple";

        [self.view addSubview:self.webViewController.view];
    }

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
             [self dismissModalViewControllerAnimated:YES];
} 
```

WebViewController.h

```
@property id <UIWebViewDelegate>delegate; 
```

WebViewController.m

```
- (IBAction)closeBtnTapped:(id)sender {

   [self.delegate webViewDidFinishLoad:self.webView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:36:11.843

您没有在代码中使用 presentModalViewController。您只是将 webView 添加为子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:39:35.457

您将`UIWebViewDelegate`in分配`WebViewController`给 的实例`WebViewController`。因此，您`MainViewController`没有在听`UIWebView`委托方法。

但是，您并没有展示您`WebViewController`的`presentModalViewController`方法。

在`closeBtnTapped`只是调用该`dismissModalViewController`方法并将其发送到`self`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:56:29.843

让我澄清一件事。ashokbabuy 是对的。每当您在代码中使用 presentModalViewController 时，只需记住您在当前控制器中呈现的 Viewcontroller，在该呈现的控制器中关闭它是一个好习惯。

我的意思是如果你在 MainController 中展示 WebViewcontroller。在 WebViewController closebuttontap 事件中将其关闭是一种很好的做法。

所以这只是简单的代码如下

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:52:42.103

而不是`[self.view addSubview:self.webViewController.view];` 使用`[self presentModalViewCOntroller:webViewController animated:yes];`

然后`dismissModalViewControllerAnimated`将起作用。

# android - 交换安卓视图

> ID：11949488
> 
> 赞同：6
> 
> 时间：2012-08-14T09:32:07.733
> 
> 标签：android

我需要提供如图所示的设施。

![在此处输入图像描述](../Images/cfd97067ed477609f2267167693f76e7.png)

![第二视图](../Images/3ecd5c11d69b3c1a2817120b94654c81.png)

在底部有 viewpager 时的第一个视图。当用户从右到左交换时，第一个应替换为第二个。我能做到的。但
我的问题是如何将下一个视图的一半放在右侧和左侧的末端。

即第一视图的“第一”和第二视图的“第三”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T10:09:48.557

你可以在这里使用画廊。在每个项目的画廊内，设置布局参数（宽度）以符合您的要求。

画廊的问题是它不会旋转项目。这意味着一旦你到达列表的末尾，你就不会得到第一个项目。

但也有一个技巧可以克服这一点。您需要做的就是将列表计数设置为非常大的数字 (INT_MAX)，并在您的适配器中通过 % 计算小心地返回正确的视图。

这将确保您不会很快到达列表末尾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T00:16:31.867

我建议查看问题的解决方案[Android ViewPager with previous and next pages visible?](https://stackoverflow.com/questions/7725045/android-viewpager-with-previous-and-next-pages-visible) ) - 使用负页边距 (via `ViewPager.setPageMargin`) 将允许您一次查看多个页面（即，在当前页面的左侧和右侧）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T10:15:44.287

您应该使用 Horizo​​ntalScrollView 而不是画廊，因为它已从 jellybeans 版本中弃用。

[http://developer.android.com/reference/android/widget/Gallery.html](http://developer.android.com/reference/android/widget/Gallery.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T19:06:48.243

最后我找到了解决方案。您正在项目中使用视图寻呼机指示器的 TitlePageIndicator。为了达到这个效果，您需要对 TitlePageIndicator 类进行少量修改。
这个想法是将左侧的文本向左移动等于其大小一半的量（可以是任何东西），而右侧的文本向右移动等于其大小一半的量（可以是任何东西） .

为设置左侧文本的边界，使用**clipViewOnTheLeft(...)**方法，用于设置右侧文本的边界，使用**clipViewOnTheRight(...)**方法。在这里您需要进行这些修改。

这是您需要做的：

```
/**
 * Set bounds for the right textView including clip padding.
 *
 * @param curViewBound
 *            current bounds.
 * @param curViewWidth
 *            width of the view.
 */
private void clipViewOnTheRight(RectF curViewBound, float curViewWidth, int right) {
    curViewBound.right = right - mClipPadding + curViewWidth/2;
    curViewBound.left = curViewBound.right - curViewWidth;
}

/**
 * Set bounds for the left textView including clip padding.
 *
 * @param curViewBound
 *            current bounds.
 * @param curViewWidth
 *            width of the view.
 */
private void clipViewOnTheLeft(RectF curViewBound, float curViewWidth, int left) {
    curViewBound.left = left + mClipPadding - curViewWidth/2;
    curViewBound.right = mClipPadding + curViewWidth;
} 
```

您需要对 TitlePageIndicator.java 文件进行这些更改。

# c# - 将完全相同的 XML 发送到服务器 - 一个有效，一个出错？

> ID：11949489
> 
> 赞同：0
> 
> 时间：2012-08-14T09:32:14.473
> 
> 标签：c#, xml, http, networking, post

我有一个服务器配置为通过 POST 接收 XML 文件，解析它们，并相应地显示一些信息。该服务器运行良好，并且已经过广泛测试。

我有这台服务器的两个客户端。在两者中，我都硬编码了一些格式良好的 XML。当第一个客户端发送它的 post 消息时，服务器会完美响应。

当第二个发送它的 post 消息时，服务器以错误响应（如下）。

尽管这两个客户

*   运行相同的代码
*   发布相同的 XML

这是用于发送 POST 的代码：

```
 public void SendPost(string xmlInfo)
        {
            ErrorHandler.Execute(() => {
                XMLHTTP objhttp = new XMLHTTP();
                objhttp.open("POST", Properties.Settings.Default.postpath, false, "", "");
                objhttp.send(xmlInfo);

                var x = XElement.Parse(objhttp.responseText);
            });
        }
    } 
```

问题不在发送的 XML 中（它是硬编码的，在两种情况下都完全相同），也不在服务器上，因为它会完美响应并且已经过大量测试。什么可能导致我的问题？

错误消息现在是：

> 处理 URL 时服务器发生错误。请联系系统管理员。如果您是系统管理员，请单击此处了解有关此错误的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:36:21.307

> 问题不在于发送的 XML（它是硬编码的，在两种情况下完全相同），也不在服务器上，因为它会完美响应并且已经过大量测试。

如果您的服务器响应代码 500（表示“内部错误”），那么几乎可以肯定问题*出*在服务器上 - 或者至少，服务器可能*存在*问题。

您应该查看接收数据的服务器的日志——我*希望*任何编写良好的服务器都会将诊断信息（例如异常）转储到登录失败中。

（“经过大量测试”并不意味着“没有可想象的故障模式”......）

# python - 使用正则表达式python在字符串中多次替换数字

> ID：11949499
> 
> 赞同：6
> 
> 时间：2012-08-14T09:32:45.567
> 
> 标签：python, regex, string

当我使用 re.sub 将字符串中的两个单词更改为其他两个单词时，我得到了输出。但是当我尝试用数字输出不正确时

```
>>> import re
>>> a='this is the string i want to change'
>>> re.sub('(.*)is(.*)want(.*)','\\1%s\\2%s\\3' %('was','wanted'),a)
'this was the string i wanted to change'
>>> re.sub('(.*)is(.*)want(.*)','\\1%s\\2%s\\3' %('was','12345'),a)
'this was\x8a345 to change'
>>> 
```

我不知道为什么会这样

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:36:51.200

发生的情况是您传入了 replacement `r'\1was\212345\3'`，而 Python 无法确定您是否需要反向引用编号 2, 21, 211, ... 。它只选择最大的 212345，这显然不是您表达式中的组索引。因此，Python 决定您的意思是 bytestring 文字`b'\212'`，这是一种奇怪的`b'\x8a'`.

要解决歧义，请使用长反向引用语法`\g<GROUP_NUMBER_HERE>`：

```
>>> re.sub('(.*)is(.*)want(.*)','\\g<1>%s\\g<2>%s\\g<3>' %('was','12345'),a)
'this was the string i 12345 to change' 
```

# asp.net - ScriptManager EnableCdn - 不适用于 SSL

> ID：11949504
> 
> 赞同：4
> 
> 时间：2012-08-14T09:33:09.883
> 
> 标签：asp.net, webforms, scriptmanager, microsoft-cdn

我正在尝试在 ScriptManager 中使用 EnableCdn 属性。基本上我的母版页文件中有这段代码：

```
<asp:ScriptManager ID="MainScriptManager" runat="server" EnablePartialRendering="true"
    EnableScriptGlobalization="true" EnableScriptLocalization="true" AsyncPostBackTimeout="3600" EnableCdn="True"> 
```

这适用于我们通过 HTTP 连接的开发环境 - 它引用了这样的脚本：

```
<script src="http://ajax.aspnetcdn.com/ajax/4.5/5/WebForms.js" type="text/javascript"></script> 
```

但是在我们使用 SSL 的生产服务器上，它会尝试包含这样的脚本：

```
<script src="https://ajax.microsoft.com/ajax/4.0/2/WebForms.js" type="text/javascript"></script> 
```

有两个不同之处（版本和域），但大多数来自 4.0 版的文件不在 CDN 服务器上（通过 https！）。

任何人都可以为这个问题提出某种解决方案吗？这是否意味着通过 https 不支持 4.0 版本，但通过 http 支持（我可以通过两种方法从 4.5 版本下载文件，但 4.0 只能通过 HTTP 获得）。

编辑：

我找到了“ajax.microsoft.com 重命名为 ajax.aspnetcdn.com”的信息 - 这似乎是我的版本的问题，但我找不到如何将域更改为正确域的信息。我们应该在生产中重新安装框架吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T08:31:19.180

文件**在**服务器上，但它最近表现得非常烦躁（现在甚至根本无法访问任何文件），所以总是使用本地故障转移。

对于 .Net 4.0，只需将其添加到您的 Global.asax 文件中 - 它会使用新的 CDN 域更新所有 CDN 域（对于以前的版本，只需适当地更改链接）：

```
protected void Application_Start(object sender, EventArgs e)
{
    System.Reflection.Assembly web = typeof(HttpApplication).Assembly;
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "WebForms.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "WebForms.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebForms.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebForms.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "Focus.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "Focus.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Focus.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Focus.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "SmartNav.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "SmartNav.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/SmartNav.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/SmartNav.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "WebUIValidation.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "WebUIValidation.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebUIValidation.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebUIValidation.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "TreeView.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "TreeView.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/TreeView.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/TreeView.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "Menu.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "Menu.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Menu.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Menu.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MenuStandards.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "MenuStandards.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MenuStandards.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MenuStandards.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "WebParts.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "WebParts.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebParts.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/WebParts.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "GridView.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "GridView.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/GridView.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/GridView.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "DetailsView.js",
        web,
        new ScriptResourceDefinition
        {
            ResourceName = "DetailsView.js",
            ResourceAssembly = web,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/DetailsView.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/DetailsView.js",
            CdnSupportsSecureConnection = true
        }
    );
    System.Reflection.Assembly ext = typeof(ScriptManager).Assembly;
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjax.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjax.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjax.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjax.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxApplicationServices.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxApplicationServices.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxApplicationServices.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxApplicationServices.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxComponentModel.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxComponentModel.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxComponentModel.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxComponentModel.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxCore.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxCore.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxCore.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxCore.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxGlobalization.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxGlobalization.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxGlobalization.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxGlobalization.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxHistory.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxHistory.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxHistory.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxHistory.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxNetwork.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxNetwork.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxNetwork.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxNetwork.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxSerialization.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxSerialization.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxSerialization.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxSerialization.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxTimer.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxTimer.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxTimer.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxTimer.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxWebForms.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxWebForms.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxWebForms.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxWebForms.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "MicrosoftAjaxWebServices.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "MicrosoftAjaxWebServices.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxWebServices.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/MicrosoftAjaxWebServices.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "Date.HijriCalendar.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "Date.HijriCalendar.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Date.HijriCalendar.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Date.HijriCalendar.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
    ScriptManager.ScriptResourceMapping.AddDefinition(
        "Date.UmAlQuraCalendar.js",
        ext,
        new ScriptResourceDefinition
        {
            ResourceName = "Date.UmAlQuraCalendar.js",
            ResourceAssembly = ext,
            CdnPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Date.UmAlQuraCalendar.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/4.0/2/Date.UmAlQuraCalendar.debug.js",
            CdnSupportsSecureConnection = true
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:15:46.647

我在运行 4.0 时也遇到了同样的问题，我找不到任何表明应该如何解决这个问题的东西，因为对 ajax.microsoft.com 的引用是由框架本身放置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T05:44:19.323

签出[此链接](http://blogs.msdn.com/b/pranav_rastogi/archive/2012/09/21/asp-net-4-5-scriptmanager-improvements-in-webforms.aspx)

我知道这并不能解决所提出的问题。但这更清楚地说明了我们如何使用它，因为这个链接很好地解释了它。它具有与“Nikola Bogdanovic”提到的类似的语法，但它还包括在 CDN 不响应请求时将使用的本地路径。

例如。（示例代码）：

```
string str = "1.7.1";

ScriptManager.ScriptResourceMapping.AddDefinition("jquery", new ScriptResourceDefinition

{

    Path = "~/Scripts/jquery-" + str + ".min.js", 

    DebugPath = "~/Scripts/jquery-" + str + ".js", 

    CdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-" + str + ".min.js", 

    CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-" + str + ".js", 

    CdnSupportsSecureConnection = true, 

    LoadSuccessExpression = "window.jQuery"

}); 
```

# javascript - 显示 JSON 不起作用

> ID：11949506
> 
> 赞同：0
> 
> 时间：2012-08-14T09:33:16.337
> 
> 标签：javascript, html, json, jsonp

看看这个小提琴：http: [//jsfiddle.net/3JRU6/](http://jsfiddle.net/3JRU6/)

```
$(document).ready(function(){
var url='http://api.worldbank.org/topic/4?per_page=10&format=json&callback=?';
var query;
  $('button').click(function(){
    $.getJSON(url,function(json){
      $.each(json.results,function(i,data){
          window.alert("found");
         $("#results").append('<p>'+data.value+'</p>');
      });
    });
  });
});​ 
```

我想连接到世界银行的开放数据，但是当我按下按钮时，什么也没有发生。我已经使用 twitter API 尝试了相同的脚本，然后它确实起作用了。原始链接没有 &callback=? 但我不得不添加它，因为我遇到了一个错误。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:50:36.397

`getJSON`如果 URL 包含回调属性，该方法将进行 JSONP 调用。

> “如果 URL 包含字符串“callback=?”（或类似的，由服务器端 API 定义），则请求将被视为 JSONP。

参考：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

请求工作正常，数据到达浏览器，但由于响应是 JSON 而不是 JSONP，数据只是被丢弃，不会调用成功回调方法。

我尝试在 URL 中更改`format=json`为`format=jsonp`，但响应是错误消息：

```
<fault>
        <faultstring>Fault raised in a policy</faultstring>
        <detail>
            <errorcode>31326</errorcode>
                <trace>
                    Fault Name: JSONP Bad Request
                    Error Type: MessageRouter
                    Description: Fault raised in a policy
                    Service: worldbank
                    Endpoint: target
                    Operation (Target):defaultOperation
                    FlowTransitionState : Target_Request_User_Error
                    Policy : EnforceMediationOnRequestPolicy
                    RaiseFaultAssertion
                </trace>
        </detail>
</fault> 
```

您必须向您的 API 提供商咨询如何发出 JSONP 请求而不是 JSON 请求。

### 编辑：

正如 Jimmy Oliger 所说，API 使用`prefix`属性而不是`callback`. 我试过了，jQuery 实际上使用了该属性，并调用了成功回调。

响应是一个数组，其中第一项是分页信息，第二项是包含数据的数组，所以循环`json[1]`显示数据：

演示：http: [//jsfiddle.net/Guffa/3JRU6/4/](http://jsfiddle.net/Guffa/3JRU6/4/)

```
var url = 'http://api.worldbank.org/topic/4?per_page=10&format=jsonp&prefix=?';
var query;
$('button').click(function() {
    $.getJSON(url, function(json) {
        $.each(json[1], function(i, data) {
            $("#results").append('<p>' + data.value + '</p>');
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:48:34.683

Wordbank API 不使用该`callback`属性将响应输出为`JSONP`，您必须`format=jsonP&prefix=?`在 URL 的末尾添加才能使其正常工作。

[您可以在此处](http://data.worldbank.org/node/11)找到有关“请求格式”的更多信息。

```
var url = 'http://api.worldbank.org/topic/4?per_page=10&format=jsonP&prefix=?';

$.getJSON(url, function(data) {
  console.log(data);
});​ 
```

# bootloader - 引导加载程序在哪里运行？

> ID：11949511
> 
> 赞同：1
> 
> 时间：2012-08-14T09:33:53.003
> 
> 标签：bootloader

我想知道引导加载程序在哪个硬件上运行？它是在 RAM 上运行，还是在主板的处理器等上运行，如果它不在处理器上运行，加载操作系统时处理器的用途是什么，比如将操作系统的内核加载到处理器中（如果它' 这样做）和类似的事情。对论文、教程等的任何引用也值得赞赏

你的信仰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-22T16:38:22.107

上电时，CPU 默认执行位于闪存中的 BIOS。这意味着 POST 过程发生并且 BIOS 本身被复制到 RAM。然后 BIOS 检查 BIOS 设置中设置的第一个引导设备，并将该设备的第一个扇区（前 512 个字节）复制到 RAM 的位置`0x7C00`，并指示 CPU 跳转到该内存地址。这 512 个字节包含引导加载程序并由 CPU 执行。

因此，简而言之，CPU 从内存中读取指令并执行它们。您还应该检查[这个页面](http://www.brokenthorn.com/Resources/OSDev3.html)和[这个页面](http://duartes.org/gustavo/blog/post/motherboard-chipsets-memory-map/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:35:37.520

当你开车去商店时，你会使用发动机、方向盘、座椅还是刹车？计算机运行引导加载程序的方式与运行任何其他软件的方式相同。所有部分协同工作，每个部分都执行其特定的功能以实现协调的结果。

由于您谈论“将操作系统的内核加载到处理器中”，听起来您对计算机的各个部分的作用没有基本的了解。您可能希望阅读[一些](http://homepage.cs.uri.edu/faculty/wolfe/book/Readings/Reading04.htm)关于计算机如何[工作](http://www.carnegiecyberacademy.com/facultyPages/computer/computers.html)的基本文章。

# ruby-on-rails - 何时在 Rails 中使用 html 键？

> ID：11949514
> 
> 赞同：1
> 
> 时间：2012-08-14T09:34:02.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在rails中，我见过类似的代码

```
form_for(@post, html: {:class => "foo"}) 
```

但有时rails自动将它无法识别的任何键转换为html？

在上面的例子中，如果你不使用`:html`键，类分配将不会反映在 DOM 中。

什么时候用这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:02:41.133

根据[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)，只要您想向表单标签添加属性，就应该使用 html 选项：

":html - 表单标签的可选 HTML 属性。"

rails 可以选择其他预定义的选项。有很多。您可以在[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)中准确查看哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:28:44.270

只是因为 rails form_for 是这样定义的……您始终可以在传递正确的选项及其顺序时检查 api。

[http://api.rubyonrails.org#for_for](http://api.rubyonrails.org#for_for)

# iphone - 让阅读器应用全屏显示？

> ID：11949521
> 
> 赞同：0
> 
> 时间：2012-08-14T09:34:35.567
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

您好，我有一个带有视图控制器的应用程序，我在其中显示一些文本 - 它还有一个工具栏和一个导航栏。

我希望当我按下一个按钮来隐藏导航栏和工具栏以及状态栏并使带有文本的视图全屏显示并且如果用户点击视图导航栏和工具栏来显示。

那么我该怎么做呢？我尝试使用视图的 frame 属性，但没有成功。

编辑这里是我现在的代码。我的问题只有 1 - 状态栏未填充 - 它只是一个黑色的东西。

```
- (IBAction)goFullScreen:(id)sender {
    self.isFullScreenOn = !self.isFullScreenOn;
    if (self.isFullScreenOn) {
        self.navigationController.navigationBarHidden = NO;
        self.toolbar.hidden = NO;
        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];
        self.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    }else{
        [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
        self.navigationController.navigationBarHidden = YES;
        self.toolbar.hidden = YES;
        self.view.frame = CGRectMake(0, -60, self.view.frame.size.width, self.view.frame.size.height + 60);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:46:10.580

试试这个

```
[[UIApplication sharedApplication] setStatusBarHidden: YES withAnimation: UIStatusBarAnimationFade]; 

[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:42:32.157

隐藏导航栏： -

```
 self.navigationController.navigationBarHidden = YES ; 
```

隐藏状态栏： -

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

设置`hidden`工具栏属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:12:20.360

最初让栏不隐藏

```
self.currentView.toolBar.hidden=NO; 
```

现在要让它在屏幕上单击显示和消失，在视图控制器中添加一个轻触识别器

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired=1;
    [self.currentView addGestureRecognizer:tapGesture];
    [tapGesture release]; 
```

现在将 handleTapGesture 函数定义为

```
-(void) handleTapGesture:(UITapGestureRecognizer *)sender {

     if(self.currentView.toolBar.alpha==1.0 ){

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.8];
    self.currentView.toolBar.alpha = 0.0;
    //similarly add other properties to be hidden like label,button etc
    [UIView commitAnimations]; 
}
else{

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.8];
    self.currentView.toolBar.alpha = 1.0;
    [UIView commitAnimations]; 
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:39:56.427

将`hidden`导航栏和工具栏的属性设置为`YES`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:42:21.103

您可以使用 presentModalViewController 显示一个新的 Viewcontroller。您可以简单地再次关闭它，而不必进行任何调整。

# c++ - 如何知道 std::iterator_traits 是否 ::value_type 已定义

> ID：11949524
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:34:48.837
> 
> 标签：c++, templates, std

> **可能重复：**
> [enable_if 迭代器作为默认模板参数？](https://stackoverflow.com/questions/11898657/enable-if-iterator-as-a-default-template-parameter)

我正在寻找在编译时知道是否`std::iterator_traits<T>::value_type`有效和定义的解决方案。问题在于 std 库将 value_type 的声明转发到 T 中的派生类型：

```
typedef T::value_type value_type; 
```

我需要在编译时知道 T::value_type 是否是有效类型，以避免与 v​​alue_type 不存在相关的错误。

请考虑以下示例：

```
std::iterator_traits<int *>::value_type; // OK - should return that value_type exists as it's defined in specialization of std::iterator_traits

std::iterator_traits<const int *>::value_type; // OK - should return that value_type exists as it's defined in specialization of std::iterator_traits

std::iterator_traits<std::vector<int>::const_iterator> >::value_type; // OK - the value_type exists defined within std::vector<int>::const_iterator

std::iterator_traits<int>::value_type; // ERROR - the value_type is not defined within int class - this is what I'm trying to avoid to resolve the value_type of. 
```

我需要该解决方案完全符合 C++ 标准和标准库标准并且独立于编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:19:11.807

该问题可以通过对此的评论中的方法来显示：

```
#include <iterator>
#include <iostream>

template <typename T>
class IsIterator {
public:
  struct TrueValue {
  char val;
 };

 struct FalseValue {
   char val[2];
 };

template <typename U>  
 static TrueValue evaluateIsIter(typename U::iterator_category*);

 template <typename U>
 static FalseValue evaluateIsIter(...);

 static const bool value = sizeof(evaluateIsIter<T>(0)) == sizeof(TrueValue);
};

int _tmain(int argc, _TCHAR* argv[])
{
std::cout << IsIterator< int >::value << std::endl;
std::cout << IsIterator< std::iterator_traits<int> >::value << std::endl;
return 0;
 } 
```

VS2005 编译器的结果为：0 1

对此可以看出，这还不足以解决问题。还是我做错了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:45:51.623

解决方案是这样，但缺点是自定义的迭代器类必须在类内部定义 typedef，而不仅仅是专门的 std::iterator_traits 类。

```
// IsIterator.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include <iterator>
#include <iostream>
#include <vector>

template <typename T>
class ExtractType {
public:
  typedef T Result;  
};

template <typename U>
class ExtractType<std::iterator_traits<U> >
{
public:
  typedef U Result;
};

template <typename T>
class IsIteratorPointer
{
public:
  static const bool value = false;
};

template <typename T>
class IsIteratorPointer<T*>
{
public:
  static const bool value = true;
};

template <typename T>
class IsIteratorPointer<const T*>
{
public:
  static const bool value = true;
};

template <typename T>
class IsIterator {
public:
  struct TrueValue {
    char val;
  };

  struct FalseValue {
    char val[2];
  };

  template <typename U>  
  static TrueValue evaluateIsIter(typename U::iterator_category*);

  template <typename U>
  static FalseValue evaluateIsIter(...);

  typedef typename ExtractType<T>::Result TestType;

  static const bool value = IsIteratorPointer<TestType>::value || sizeof(evaluateIsIter<TestType>(0)) == sizeof(TrueValue);
};

struct Foo {  
};

template <> 
struct std::iterator_traits<Foo>
{
  typedef random_access_iterator_tag iterator_category;
};

int _tmain(int argc, _TCHAR* argv[])
{
  std::cout << IsIterator< int >::value << std::endl;
  std::cout << IsIterator< std::iterator_traits<int> >::value << std::endl;
  std::cout << IsIterator< std::iterator_traits<int*> >::value << std::endl;
  std::cout << IsIterator< std::iterator_traits<Foo> >::value << std::endl; // Will be 0 (only drawback) - typedef must be in Foo directly
  std::cout << IsIterator< std::vector<int>::const_iterator >::value << std::endl;

    return 0;
} 
```

现在的问题仍然存在：这个缺点能以某种方式消除吗？

# android - 网格视图中图像的图像视图

> ID：11949526
> 
> 赞同：0
> 
> 时间：2012-08-14T09:34:54.623
> 
> 标签：android

我正在制作一个 android 应用程序，我必须在其中旋转网格视图中的图像。我写了以下代码：

```
 public boolean onTouch(View v, MotionEvent me) {

            .............

     int position = parent.pointToPosition(x, y);
    switch(me.getAction())
    {

    case MotionEvent.ACTION_DOWN :
        //int z = fPosition(x,y);
        sr = position;
        doRotation(v,position);

        //startAnimation(v);
        //Toast.makeText(GameActivity.this, "down "+position,Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_UP :
        //popUp.dismiss();
        ds = position;
        images.cPositions(sr,ds);
        images.notifyDataSetChanged();
        //int z1 = fPosition(x,y);
    //Toast.makeText(GameActivity.this, "up " + position, Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_MOVE :
        //Toast.makeText(GameActivity.this, "move", Toast.LENGTH_SHORT).show();
        break;
    }
    return true;
}

 void doRotation(View v, int position) {

    final ImageView im;
    final RotateAnimation rAnim;
    ViewGroup vg = (ViewGroup) findViewById(R.id.mlinear);

    rAnim = new RotateAnimation(0f,360, RotateAnimation.RELATIVE_TO_SELF, 0.5f, RotateAnimation.RELATIVE_TO_SELF, 0.5f);
    rAnim.setStartOffset(0);
    rAnim.setDuration(2000);
    rAnim.setFillAfter(true);
    rAnim.setFillEnabled(true);
    v.startAnimation(rAnim);
} 
```

我在 android 2.2（8 级）上，它正在做的是它的旋转整个网格视图，我想在图像上旋转。只想知道如何在网格视图中获取图像的图像视图..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:59:49.713

我想`GridView`你正在设置`onTouchListener`。这就是为什么它旋转整个视图。尝试为 GridView 中的视图设置监听器。它更好地实现`setOnItemClickListener`，以便您可以轻松获取您单击的项目。

# jquery - 如何在jquery中一次激活两个分区

> ID：11949529
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:35:13.007
> 
> 标签：jquery, css

这是我的代码

```
<ul class="nav nav-tabs" id="myTab">
<li class="active"><a href="#home">Home</a></li>
<li><a href="#profile">Profile</a></li>
<li><a href="#messages">Messages</a></li>
<li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
 <div class="tab-pane active" id="home">one</div>
<div class="tab-pane" id="profile">two</div>
<div class="tab-pane" id="messages">three</div>
<div class="tab-pane" id="settings">four</div>
</div>
<div class="tab">
 <div class="tab active" id="home">1</div>
<div class="tab" id="profile">2</div>
<div class="tab" id="messages">3</div>
<div class="tab" id="settings">4</div>
</div> 
```

这里是css代码

```
.tab-one > .tab-pane, .tab-two > .tab{
display: none;
 }
.tab-one > .active, .tab-two > .active{
display: block;
} 
```

当我单击主页以显示两个除法值时，我需要 jquery 的 about 代码。
例如，如果我单击配置文件以显示两个和 2。 [http://jsfiddle.net/DcGMG/2/](http://jsfiddle.net/DcGMG/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:40:54.023

您已经定义了多个 id，而是使用类，并且您有选择器；）

```
 <div class="tab-content">
            <div class="tab-pane active home">one</div>
            <div class="tab-pane profile">two</div>
            <div class="tab-pane messages">three</div>
            <div class="tab-pane settings">four</div>
    </div>
    <div class="tab">
            <div class="tab active home">1</div>
            <div class="tab profile">2</div>
            <div class="tab messages">3</div>
            <div class="tab settings">4</div>
    </div> 
```

不要忘记先删除活动课程；）

```
 $.each($('.active'), function(key, value) {
            $(this).removeClass('active');
    } 
```

现在添加新的活动项目

```
 $.each($('.profile'), function(key, value) {
            $(this).addClass('active');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:43:32.380

首先，将选项卡的 ID 更改为类。然后做这样的事情：

```
jQuery(document).ready(function(){
    //add click handlers to your links
    jQuery("#myTab a").click(function(){
        //get the name for the tab that should be displayed
        var tab = jQuery(this).attr("href").replace("#","");

        //add the active class to the correct tab divs, and remove it from the others
        jQuery(".tab-content .tab-pane." + tab)
            .addClass("active")
            .siblings()
            .removeClass("active");

        jQuery(".tab .tab." + tab)
            .addClass("active")
            .siblings()
            .removeClass("active");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:02:14.567

试试这个

```
$(function(){
    var myTabs = $('#myTab a');
    var tabOne = $('.tab-one > .tab-pane');
    var tabTwo = $('.tab-two > .tab');
    myTabs.on('click', function(){
        var tab = $(this).attr("href");
        tabOne.removeClass('active');
        tabTwo.removeClass('active');

        $('.tab-one').find('#'+tab).addClass('active');
        $('.tab-two').find('#'+tab).addClass('active');

    });
}); 
```

并检查此[演示](http://jsfiddle.net/DcGMG/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:08:31.197

```
$('ul#myTab​​​​​​​ li a').click(function(){
    $('div.tab-one div.tab-pane, div.tab-two div.tab').removeClass('active');
    var tab = $(this).attr('href');
    $('div.tab-one div' +tab +', div.tab-two div' +tab).addClass('active');
});​​​ 
```

# javascript - Actionscript 2 计时器快速减少

> ID：11949535
> 
> 赞同：0
> 
> 时间：2012-08-14T09:35:31.287
> 
> 标签：javascript, actionscript, actionscript-2, flash-cs5

所以，我在 2 个场景中有这个计时器。第一个场景中的计时器完美运行。然而，当我尝试到第二个场景时，计时器变得如此之快。我有两组代码：

```
_root.timer = 10;
clearInterval(id);
id = setInterval (function ()
           { 
                _root.timer--;
                if(timer==0)
                {
                    gotoAndStop(65);
                }
           }, 1000); 
```

还有这个：

```
timer = 10;
timer.text= timer;
countdown = function(){
            timer--;
            if(timer==0){
                         clearInterval(countdownInterval);
                         gotoAndStop(65);
                        }
                      }
countdownInterval = setInterval(countdown,1000); 
```

我知道 1000 毫秒 = 1 秒。我只是不知道是什么导致计时器在第二个场景中快速减少。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:23:32.467

在第二个场景中，timer 减少了 2 倍，因为有两个 setInterval 运行，_root.timer 将在两个阶段等于 timer。所以每秒有两个函数调用，并且每个函数都减少相同的变量。

**解决方案：**在第二个场景中，将定时器变量重命名为 timer2 或 timernew。

# ruby - IOCTL 调用中指向缓冲区的指针

> ID：11949538
> 
> 赞同：4
> 
> 时间：2012-08-14T09:35:36.830
> 
> 标签：ruby

我正在使用 Ruby 和 bit-struct 在测试设置中配置我的网络接口。这适用于大多数 IOCTL 调用，但我不知道如何调用 SIOCGIFCONF

这是一个例子：

如果我想获取接口的 MAC 地址，我会这样写：

```
class LinuxIfreqMacAddr < BitStruct
  char       :name,    128
  unsigned   :type,     16, :endian => :native
  hex_octets :macaddr,  48
  pad        :padding,  64
end

ifr = LinuxIfreqMacAddr.new
ifr.name = "eth0"
s.ioctl(SIOCGIFHWADDR, ifr) # s is a socket
puts ifr.macaddr 
```

这工作正常，并将打印 eth0 的 MAC 地址。但是“struct ifconf”的签名（与 SIOCGIFCONF 一起使用）需要传递一个缓冲区。

这是签名：

```
struct ifconf  {
    int     ifc_len;
    char __user *ifcu_buf;
}; 
```

如何从 ruby​​ 调用具有 4096 字节缓冲区的 SIOCGIFCONF ioctl 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-10T00:35:06.017

使用[Array#pack](http://apidock.com/ruby/Array/pack)的“P”说明符来存储指向缓冲区的指针：

```
require 'socket'
sock = UDPSocket.new
ifreqs = ' ' * 4096
ifconf = [ifreqs.size, ifreqs].pack("l!P")
SIOCGIFCONF = 0x8912
sock.ioctl(SIOCGIFCONF, ifconf)
data_size = ifconf.unpack('l!').first
p data_size # => 120 
```

# 这是如何工作的

创建 ioctl 将存储接口信息数组的缓冲区：

```
ifreqs = ' ' * 4096 
```

现在创建缓冲区以传递给 ioctl 调用。缓冲区将是一个表示[*ifconf*结构](http://linux.die.net/man/7/netdevice)的字符串：

```
struct ifconf {
    int                 ifc_len; /* size of buffer */
    union {
        char           *ifc_buf; /* buffer address */
        struct ifreq   *ifc_req; /* array of structures */
    };
}; 
```

我们使用[Array#pack](http://apidock.com/ruby/Array/pack)来做到这一点：

```
ifconf = [ifreqs.size, ifreqs].pack("l!P") 
```

格式说明符分为：

*   “我！” - 平台原生大小的有符号长整数。这编码`ifreqs.size`.

*   "P" - 指向固定长度缓冲区的指针。这对存储在`ifreqs`字符串中的缓冲区的地址进行编码。

现在我们可以打电话了：

```
SIOCGIFCONF = 0x8912
sock.ioctl(SIOCGIFCONF, ifconf) 
```

SIOCGIFCONF 调用修改 ifconf 缓冲区，更新`ifc_len`为实际存储在缓冲区中的数据字节数`ifreqs`。我们可以通过解包数组的那个元素来看到：

```
data_size = ifconf.unpack('l!').first
p data_size # => 120 
```

将存储到*ifreqs*中的数据解码留给读者作为练习。

# knockout.js - 在运行时向模型添加 observables。但 ko.mapping.toJS 不返回它们

> ID：11949544
> 
> 赞同：2
> 
> 时间：2012-08-14T09:36:01.490
> 
> 标签：knockout.js, knockout-mapping-plugin

js 和淘汰赛映射插件

我的问题是这样的：

我有模型，我在运行时向它添加 observables，如下所示：

```
viewModel[value] = new ko.observable(valueFromTextBox); 
```

这工作正常，并且可观察对象绑定到屏幕，这部分工作正常有问题的部分是当我尝试采用该模型并将其转换为 JSON 时，如下所示：

```
var JSON = ko.mapping.toJS(page.model); 
```

当我调试它时，我看到 page.model 具有所有新的 observables。但我最终的 JSON 只有模型中的那些。不是稍后在运行时添加的。在运行时添加可观察对象的正确方法是什么？

谢谢

编辑：

我将描述我的整个场景，然后发布我的解决方案作为答案。

我正在使用 ASP.Net MVC，我创建了一个视图模型，然后进行了 ajax 调用以从服务器接收我的实际模型。然后使用：

```
ko.mapping.fromJS(model, page.model); 
```

之后，当用户添加我使用的新字段时，绑定会发生：

```
viewModel[value] = new ko.observable(valueFromTextBox); 
```

最后在将其发送回我使用的服务器之前：

```
 var JSON = ko.mapping.toJS(page.model); 
```

在这一点上，JSON 中不存在添加的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:18:13.927

调试后

```
ko.mapping.fromJS(model, page.model); 
```

我意识到该函数读取字典中的值

```
 __ko_mapping__.mappedProperties 
```

这是在使用 toJS 函数期间创建的

```
var JSON = ko.mapping.toJS(page.model); 
```

无论如何，因为我新添加的 observables 不存在于`__ko_mapping__.mappedProperties`字典中，它们也不存在于使用 ko.mapping.toJS 函数返回给我的 JSON 对象中，所以我为使其工作所做的工作是这样的：

```
viewModel[value] = ko.observable(valueFromTextBox);
viewModel.__ko_mapping__.mappedProperties[value] = true; 
```

我在模型中添加了一个 observable，但也更新了 mappedProperties 字典，仅此而已。现在，当调用`ko.mapping.toJS`我的整个模型时，将返回一个 JSON 对象，包括我添加的 observables。

我意识到这可能不是最优雅的方式。但它确实很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:45:09.023

您的意思是 .toJSON 而不是 .toJS？

这种情况对我有用，虽然我认为你不应该使用“新”，它应该只是：

viewModel['PropertyName'] = ko.observable(value);

实际上，这两种方法都对我有用，无论有没有 new，但在所有使用它的文档中，它都没有使用，比如工厂方法。你能创建一个演示你的问题的小提琴吗？

# arduino - 在 Arduino 上存储字符串的最佳方法是什么？

> ID：11949548
> 
> 赞同：1
> 
> 时间：2012-08-14T09:36:20.097
> 
> 标签：arduino, webserver

我的 Arduino 上有一个 Web 服务器，它应该呈现一个表单以将一些数据保存到[EEPROM](http://en.wikipedia.org/wiki/EEPROM)。HTML 数据有大约`1500`字符。目前，我的代码如下所示：

```
[...]
  serverClient.println("HTTP/1.1 200 OK");
  serverClient.println("Content-Type: text/html");
  serverClient.println("Connnection: close");
  serverClient.println();
  serverClient.println("<!DOCTYPE html>");
[...] 
```

我阅读了有关`PROGMEM`使用以下`F`关键字存储数据的信息：

```
[...]
  serverClient.println(F("HTTP/1.1 200 OK"));
  serverClient.println(F("Content-Type: text/html"));
  serverClient.println(F("Connnection: close"));
  serverClient.println();
  serverClient.println(F("<!DOCTYPE html>"));
[...] 
```

但这需要更多的闪存。

使用第二种方式有什么好处吗？还是有更好的解决方案？

（我不能使用[SD 卡](http://en.wikipedia.org/wiki/Secure_Digital)来存储数据。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:02:45.357

这是闪存使用和 RAM 使用之间的权衡，并且这些微控制器上的闪存比 RAM 多得多。

除非我的 Arduino 草图内存不足，否则我通常不会费心将字符串存储在闪存中。不幸的是，要判断一个草图是否需要比可用内存更多的内存并不容易 - 没有编译警告，事情就是行不通，或者你会得到奇怪的行为。在这种情况下，我会找到一些可以暂时缩短的数组，然后再次编译草图。如果事情表现得更好，我知道我在某个地方的 RAM 用完了，所以我会去寻找我能做的事情，`PROGMEM`或者考虑另一种使用更少 RAM 编写程序的方法。

# android - 短信对话

> ID：11949553
> 
> 赞同：4
> 
> 时间：2012-08-14T09:36:36.113
> 
> 标签：android, listview

我正在开发一个短信应用程序。我能够发送和接收短信。

我有一个名为“收件箱”的标签。单击它时，我会使用 URI 显示所有对话`content://mms-sms/conversations/`。

单击任何对话时，我想显示该人和我之间的所有 SMS 对话。

我已经从 URI 获取了那个人的所有消息`content://sms/inbox`，并从 URI 获取了我给那个人的消息`content://sms/sent`。

现在，如何在自定义列表视图中显示这些消息，以便我的消息具有前缀“我”，而其他人的消息具有前缀“<名称/号码>”并根据日期和时间排列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:30:01.657

我正在尝试做类似的事情。你解决了吗？我想我应该手动完成！我认为使用电话号码作为登录名（并非所有公司都将号码存储在电话上），然后将消息号码与登录号码进行比较。在布局上你可以有这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:weightSum="1.0" >

    <TextView
        android:id="@+id/txtMessageDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="10dip"
        android:maxWidth="250dip"/>

    <TextView
        android:id="@+id/txtMessageRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/righttext"
        android:layout_marginLeft="16dp"
        android:maxWidth="250dip" />

    <TextView
        android:id="@+id/txtMessageLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="37dp"
        android:layout_toRightOf="@+id/lefttext"
        android:maxWidth="250dip"/>

</RelativeLayout> 
```

Whit 记录的号码您可以知道该号码是来自您的号码还是来自另一方的号码，因此在代码中您可以扩展布局并使用“如果”您可以写下您的姓名或联系人姓名。与此类似的东西：

```
if(o.getOriginatingAddress().equals(MainActivity.loggedNumber))                
    tvOutMessage.setText("me: " + o.getMessageBody());
else
    tvInMessage.setText("contact:" + o.getMessageBody()); 
```

我不知道这是否是最好的解决方案，但希望它有所帮助。

# php - 获取用户对 php 文件的输入

> ID：11949555
> 
> 赞同：0
> 
> 时间：2012-08-14T09:36:35.677
> 
> 标签：php

我刚开始从互联网学习 php。我看到了一些文件处理的例子。但是，当我按照相同的程序进行**文件写入**时，它不起作用。

阅读功能是工作文件。但是写入文件不起作用。我也试过用**file_put_content**函数来写。:(

```
<?php
    if(isset($_POST['submit1'])){
    $fileName = "Text.txt";
    $fh = fopen($fileName,"a") or die("can not open the file to write");

    //Writing to a file
    $newData = "Hello This is new Data";
    fwrite($fh,$newData);
    fclose($fh);

    //Reading a file -- Working
    $text = fopen("Text.txt","r") or die ("can not open the file to read");     
    while(!feof($text))
    {
        $myLine = fgets($text);
        print $myLine;
    }
    fclose($text);
    }

?> 
```

请指导我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:47:51.603

这工作正常，你得到什么错误？

```
 <?php
    $file = 'text.txt';
    $writer = fopen($file, 'a');
    $addData = 'This is a new string to be added at the end of the file';
    fwrite($writer, $addData);
    fclose($writer);
  ?> 
```

EDIT1：要输入来自 POST 请求的输入，您可以执行以下操作：

```
 <?php
      if ($_SERVER['REQUEST_METHOD'] == 'POST'){
        $addData = $_POST['input-name'];
        $file = 'text.txt';
        $writer = fopen($file, 'a');

        fwrite($writer, $addData);
        fclose($writer);
      }
    ?> 
```

# ios - 在 ios 中过滤好友选择器视图控制器

> ID：11949559
> 
> 赞同：0
> 
> 时间：2012-08-14T09:36:47.880
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我想过滤 facebook 朋友选择器控制器以仅显示拥有该应用程序的朋友。我使用哪个 api 来检查用户是否已授权应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:22:26.773

[Graph API User 对象](https://developers.facebook.com/docs/reference/api/user/)具有`installed`字段，FQL [User 表](https://developers.facebook.com/docs/reference/fql/user/)具有列`is_app_user`。

如果你想自己过滤好友，你可以使用API​​；如果您只想获取已过滤的列表，请使用 FQL。

# java - 如何在给定的搜索中加载相应的数据

> ID：11949569
> 
> 赞同：1
> 
> 时间：2012-08-14T09:37:23.553
> 
> 标签：java, arrays, string, search, java-io

我已经制作了一个程序，将输入的数据保存在文本字段中。它的保存技术是这样的

```
data0 = student number
data1 = name
data2 = section
data3 = cp
data4 = email
data5 = address 
```

在保存的文件中：

```
data0 | data1 | data2 | data3 | data4 | data5
data0 | data1 | data2 | data3 | data4 | data5
data0 | data1 | data2 | data3 | data4 | data5
data0 | data1 | data2 | data3 | data4 | data5
data0 | data1 | data2 | data3 | data4 | data5 
```

data0 是唯一的，如果我搜索 12293，这是我用来搜索学生编号“data0”的代码

```
data0 | data1 | data2 | data3 | data4 | data5
data0 | data1 | data2 | data3 | data4 | data5
12293 | blahh | blehh | blihh | blohh | bluhh
data0 | data1 | data2 | data3 | data4 | data5 
```

并且第 3 行有一个匹配项，blah,blehh,blihh,blohh,bluhh 必须打印在不同的 textarea 中

但我不知道如何切片 data1|data2|data3|data4|data5| 当搜索匹配时进入数组

这是我的代码：

```
import java.io.*;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Jfetizanan
 */
public class DATALOAD {

    /**
     * @param args the command line arguments
     * @throws UnsupportedEncodingException
     * @throws FileNotFoundException
     * @throws IOException  
     */
    public static void main(String[] args) throws UnsupportedEncodingException, FileNotFoundException, IOException {
        try{
      FileInputStream fstream = new FileInputStream("data.dat");
            try (DataInputStream in = new DataInputStream(fstream)) {
                BufferedReader br = new BufferedReader(new InputStreamReader(in));
                String strLine;
                while ((strLine = br.readLine()) != null)   {

                 if (strLine.startsWith("JFETZ")){
                 System.out.println("Data Found");

                 }
                 else
                 {System.out.println("Nothing Found in this line");}
                }
            }
      }catch (Exception e){
          System.err.println("Error: " + e.getMessage());
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:39:19.513

[`split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)它通过`|`做

```
String values[] = strLine.split("\\|"); 
```

并将搜索键与数组的第一个元素进行比较`values[0]`

```
while ((strLine = br.readLine()) != null)   {
 String values[] = strLine.split("\\|");
 if ("JFETZ".equals(values[0]))){
   System.out.println("Data Found");
 }else{
   System.out.println("Nothing Found in this line");}
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:39:54.193

你会得到`str`：

```
String str = "12293 | blahh | blehh | blihh | blohh | bluhh";
String[] arr = str.split("\\| "); // give space after | to trim spaces 
```

# eclipse - git eclipse synchronize workspace 由于行尾显示太多传入的更改

> ID：11949570
> 
> 赞同：2
> 
> 时间：2012-08-14T09:37:29.767
> 
> 标签：eclipse, git, egit

在 Windows 中，我使用的是`egit`新升级到 20120613 版本的插件。

`git status`并`git diff`在命令行上显示正确的未提交更改。

在 Eclipse 中，*项目资源管理器*正确显示了已修改的项目和文件。

**很遗憾：**

如果我右键单击一个项目并选择*团队/同步工作区*，它会显示所有已更改的文件。

如果我右键单击更改的文件并选择*比较 / HEAD 修订*它显示整个文件已更改，我必须让它忽略空格以显示实际的相关更改。

我`core.autocrlf=true`在全局配置中，在我的用户配置中，Eclipse *Preferences*也同意这一点。（我不会在回购中覆盖它。）

该项目来自一个`git svn clone`，如果这很重要的话。规范所有行结尾并提交回主项目也不是一种选择。问题显然不在于 git，而在于 egit 插件。并且仅在 Team Synchronize 中，否则它工作正常。

我实际上是在推销使用 git 而不是 Subversion 的想法，但是如果 Team Synchronization 不能很好地工作，那么与使用 Subversion 相比，这是一个巨大的劣势。

**更新**

在最新版本的插件中，问题似乎得到了解决。我刚刚将我的工作区迁移到 Eclipse 4.2 (Juno)，安装了 egit，现在*Synchronize Workspace*似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:58:04.310

我不确定此[问答，](https://stackoverflow.com/questions/1066914/can-git-svn-be-made-to-handle-crlf-like-native-subversion-clients)因为它不了解 Eclipse，但我相信那里的某些内容可能适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:49:33.840

**解决方案：**

*   选择所有文件
*   右键点击
*   并选择“**添加到 git 索引**”
*   然后提交所有文件并推送到服务器

# python - base_field 初始值不是从 _init_ 函数设置的

> ID：11949571
> 
> 赞同：0
> 
> 时间：2012-08-14T09:37:29.920
> 
> 标签：python, django

看看这个问题[字段和 base_fields - Django](https://stackoverflow.com/questions/2140862/fields-and-base-fields-django)。我想做确切的事情，除了我需要为这个字段设置初始值而不是选择。即使我也**交换了**该问题的答案中提到的行顺序，但我没有在前端获得初始设定值。意思是当我尝试检查代码时`pdb`，我没有收到任何错误，并且值也成功设置为 5

```
class NewFlatpageForm(FlatpageForm):
        template_name = forms.ChoiceField(choices = [])
        def __init__(self, *args, **kwargs):
           super(NewFlatpageForm, self).__init__(*args, **kwargs)
           self.base_fields['template_name'].initial = 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:08:26.807

确保`super`调用首先在您的`__init__`方法中进行，然后在 中修改字段的初始值`self.fields`，而不是`self.base_fields`。

```
 def __init__(self, *args, **kwargs):
       super(NewFlatpageForm, self).__init__(*args, **kwargs)
       self.fields['template_name'].initial = 5 
```

# ruby-on-rails-3 - pdfkit gem 将 pdf 链接生成为文本（不可点击的链接）

> ID：11949573
> 
> 赞同：0
> 
> 时间：2012-08-14T09:37:36.357
> 
> 标签：ruby-on-rails-3, pdf-generation, wkhtmltopdf, pdfkit

我正在使用 gem *[pdfkit](https://github.com/pdfkit/pdfkit)*（成功）生成 pdf

**生成的pdf文件**： [http ://bit.ly/MZBdmL](http://bit.ly/MZBdmL)

HTML

```
<h2>links</h2>
<p>
<a href="http://google.com" title="">google.com</a>
</p>
<p>
<a href="http://github.com">github</a>
</p>
<p>
<br>
</p>
<p>
<a href="http://google.sk" title="">http://google.com</a>
<br>
</p> 
```

我是否缺少*pdfkit*或*wkhtmltopdf*中的某些选项？

```
wkhtmltopdf version 0.9.9
pdfkit gem version  0.5.2 
```

* * *

我生成pdf的方式：

```
class DocumentController < ApplicationController

  def download
    @document = Document.last  #just example
    #...
    kit = PDFKit.new(@document.content.html_safe, :page_size => 'Letter')
    kit.stylesheets << "#{Rails.root}/app/assets/stylesheets/pdf.css"
    send_data kit.to_pdf, :filename => "#{@document.title}.pdf", :type => 'application/pdf'
  end
end 
```

# -------------------------------------------------- --------------------------

# 解决方案：

正如@Nenotlep 在下面的回答中所建议的那样，解决方案是重新安装 wkhtmltopdf。我之前的版本来自 Ubuntu 源（懒惰的 Synaptic 安装）。

所以我从官方网站[http://code.google.com/p/wkhtmltopdf/downloads/list下载](http://code.google.com/p/wkhtmltopdf/downloads/list)**了 wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2**（i386，如果你不在 64 位平台上）并解压到

```
 ~/.rvm/gems/ruby-1.9.3-p194@my_project_gemset/bin 
```

所以你会得到可执行的

```
 ~/.rvm/gems/ruby-1.9.3-p194@my_project_gemset/bin/wkhtmltopdf 
```

重启服务器并完成

**注意 1** wkhtmltopdf[手册](https://github.com/pdfkit/pdfkit/wiki/Installing-WKHTMLTOPDF)建议将 wkhtmltopdf 静态文件放置在我的 $PATH 指向的任何位置。我试图把它放在 /usr/locale/bin 但这不起作用。如您所见，我使用 RVM。该文件必须在特定的 gemset bin 文件夹中

**笔记2**

下载页面上还有 wkhtmltoimage 的文件。不要像我一样愚蠢地安装它并想知道它为什么不起作用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:37:08.430

我建议立即尝试手动安装 wkhtmltopdf，就像它在[pdfkit 主页的安装部分中所说的那样](https://github.com/pdfkit/PDFKit#install)。这样您将获得最新版本的 wkhtmltopdf (0.11.0 rc2)，它可能会解决许多问题。（[虽然变更日志](http://code.google.com/p/wkhtmltopdf/wiki/ChangeLog)似乎没有列出这个问题，所以它可能无法解决这里的任何问题。）

与 wkhtmltopdf 问题一样，真正有助于解决问题的一步是在命令行中手动进行转换，这样您就可以确保问题出在 wkhtmltopdf 而不是包装器上，而且您可以获得更好的反馈你在做。

对不起，这不是直接回答你的问题。

# ios - iCloud 间歇性崩溃，日志中出现“有错误的魔法”行

> ID：11949580
> 
> 赞同：1
> 
> 时间：2012-08-14T09:37:51.140
> 
> 标签：ios, sync, icloud

在我的一个应用程序中测试 iCloud 集成时，我偶尔会发现更改不会在设备之间传播，并且所有设备的日志中都充斥着以下格式的行：

```
// device 1 log
Aug 14 19:18:56 unknown ubd[3585] <Warning>: Unknown error: 316: attr blob @ 0x2a7710 has wrong magic (0x00000000 != 0x41545452)
// device 2 log
Aug 14 19:19:06 unknown ubd[99] <Warning>: Unknown error: 316: attr blob @ 0x2b8240 has wrong magic (0x00000101 != 0x41545452)
// device 3 log
Aug 14 19:19:24 unknown ubd[1328] <Warning>: Unknown error: 316: attr blob @ 0xed7c0b0 has wrong magic (0xc0ed7bdb != 0x41545452) 
```

似乎这`ubd`是为 iCloud 提供动力的 Ubiquity 守护程序，并且可能`blob`与我要同步的文档有关，但是`magic`？

需要明确的是，此应用程序中的 iCloud 同步通常确实有效（并且 DropBox 同步非常可靠）。这个问题只是一个偶然的阶段。我还没有完全确定导致它发生或消失的原因。

简而言之，问题是：这`magic`是什么，它是“错误的”重要吗？还有其他人有过这个问题的经验吗？

# opencv - OpenCv Emgu - 如何设置灰度图像像素强度

> ID：11949587
> 
> 赞同：0
> 
> 时间：2012-08-14T09:38:29.220
> 
> 标签：opencv, grayscale, emgucv

我正在尝试初始化一个新的`Image<Gray,float>`并根据渐变手动设置所有像素值。我的问题是：如何设置像素灰度强度。它不接受双精度数字。

```
if (i >= 1 && j >= 1 && grayTextIm[i, j].Intensity + gthres < grayTextIm[i, j].Intensity && grayTextIm[i, j].Intensity < grayTextIm[i, j].Intensity-gthres)
{
    gradIm[i, j].Intensity = 1.0;
}
else
{
    gradIm[i,j]= 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T02:31:37.610

你不能设置`intensity`属性。但是，您可以将灰色像素替换为另一个不同强度的像素：`gradIm[i, j] = new Gray();`

# android - 将复选框的状态保存在列表中

> ID：11949589
> 
> 赞同：0
> 
> 时间：2012-08-14T09:38:34.437
> 
> 标签：android, sharedpreferences, checkbox

我有一个带有相应复选框的列表，我想保存它们的状态，以便在应用程序运行时加载选中项目的列表。我该怎么做？

我的 onRetain 看起来像：

```
public Object onRetainNonConfigurationInstance() {
    return planets;
} 
```

行星是整个列表。

我已经阅读了 SharedPreferences 但我似乎无法让它工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:53:12.137

数据库::: 表名：state_checkBox

字段位置：int 状态：布尔值

有关代码，请参阅此链接..

1.  [视频](http://www.youtube.com/watch?v=afVQ04EnX6w)

2.  [示例代码](http://www.mindstick.com/Articles/836467e3-f7aa-499f-a001-5a963ccc6104/?Insert,%20Update,%20Delete%20in%20Android)

您只需在数据库中将状态更新为“true”或“false”，但在 getview 中，您必须始终调用查询 setChecked() 复选框

并且您必须在复选框的 checkedchangedlistner() 上更新数据库...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:43:56.623

如果你想持久存储，你应该[像这样使用数据库](https://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

如果您只想用于会话，则应使用捆绑包， [例如](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

# wso2 - WSO2 API 管理器和 XACML 权利

> ID：11949590
> 
> 赞同：3
> 
> 时间：2012-08-14T09:38:38.837
> 
> 标签：wso2, wso2-am

我正在研究使用 WSO2 API Manager 1.0 创建 API 商店以供我公司内部使用的可能性；我试图弄清楚它是否符合所有要求。

特别是我想了解是否可以使用基于 XACML 策略的 API 访问权限机制：我发现了几篇描述如何使用 WSO2 ESB 和 WSO2 IS 实现“XACML 细粒度授权”的文章。

所以我的问题是是否可以（以及如何）配置 WSO2 API Manager 以使用 XACML 策略强制执行 API 访问，或者，如何配置它以使用 WSO2 IS 作为权利服务（如 API Manager 似乎几乎基于 ESB）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:31:35.887

无法将 WSO2 API Manager 配置为 XACML 引擎，但您当然可以将其配置为与 WSO2 身份服务器 (IS) 通信的***策略执行点 (PEP)***，后者将充当***策略决策点***( ***PDP*** ) /XACML 引擎）并检索授权决策。

正如您所指出的，WSO2 API Manager 网关基于 WSO2 企业服务总线 (ESB)。在 ESB 中，通过向***inSequence添加******权利中介***来实现策略实施（正如您在提到的文章中一定遇到过的那样）。在 API Manager 中执行策略的方式或多或少是相同的。

 *然而，目前没有 UI 支持在 WSO2 API 管理器中向序列添加中介。因此，您必须使用WSO2 API Manager 管理控制台 UI 中的***源视图来编辑配置文件。***一种更简单的方法是首先尝试使用 WSO2 ESB 中的管理控制台 UI 添加权利中介，然后将相关配置从其*源视图*复制粘贴到WSO2 API 管理器中的***api***元素的*inSequence中。*

还有一个称为***api 处理程序***的概念，可以在 API 级别使用。如果您认为默认权利调解器不足以/不适合您的要求，这可能对您有用。这种方法的优点是您可以灵活地编写具有任何逻辑的自定义*PEP*并将其放入请求流中，但另一方面是您必须编写自己的代码。*

# asp.net - 将自动增量插入数据库 ASP.net

> ID：11949598
> 
> 赞同：2
> 
> 时间：2012-08-14T09:39:25.723
> 
> 标签：asp.net, mysql, sql, database, auto-increment

我正在尝试使用以下查询注册用户：

```
"INSERT INTO Users (Username, Password, FirstName, Surname, Age, HouseNumber, 
                    StreetName, Town, County, Postcode, TelephoneNumber, 
                   isBanned, isAdmin) 
 VALUES ('" + textboxUsername.Text + "','" + textboxPassword.Text + "','" + 
             textboxFirstName.Text + "','" + textboxSurname.Text + "','" + textboxAge.Text + "','" + textboxHouseNumber.Text + 
     "','" + textboxStreetName.Text + "','" + 
              textboxTown.Text + "','" + textboxCounty.Text + "','" + 
             textboxPostcode.Text + "','" + textboxTelephoneNumber.Text + 
          "', 'false', 'false')", con); 
```

数据库按照您的预期设置，只有上述值和用户 ID，它应该是使用身份规范的自动增量值。但是，我收到以下错误：

```
Cannot insert the value NULL into column 'UserID', table 'myFilePath'; column does not allow nulls. INSERT fails. 
```

为什么是这样？我不能告诉它为 UserID 插入任何内容，因为数据库需要处理它，目前 UserID 是主键，因此不能不为空。我究竟做错了什么？这曾经在几个月前工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:44:37.020

确保您的列上有一个序列，如果没有添加一个：

```
CREATE SEQUENCE yourschemaname.Users
    START WITH 1
    INCREMENT BY 1;
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:45:27.100

您也可以`id`在`NULL`查询中提及。它将使用以下方式填充`auto-increment`：

```
INSERT INTO Users 
(UserID, Username, Password, FirstName, Surname, Age, HouseNumber, StreetName, 
 Town, County, Postcode, TelephoneNumber, isBanned, isAdmin
) 
VALUES 
(NULL,'" + textboxUsername.Text + "','" + 
 textboxPassword.Text + "','" + textboxFirstName.Text + "','" + 
 textboxSurname.Text + "','" + textboxAge.Text + "','" + textboxHouseNumber.Text + "','" +
 textboxStreetName.Text + "','" + textboxTown.Text + "','" + textboxCounty.Text + "','" +
 textboxPostcode.Text + "','" + textboxTelephoneNumber.Text + "', 'false', 'false')", 
 con); 
```

还要检查字段的数据类型`UserID`它应该是这样的：

```
UserID INT unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:42:15.293

您可以使用 SQL 自动增量：

用 AUTO_INCREMENT 定义你的表：

```
CREATE TABLE Users
(
UserID int NOT NULL AUTO_INCREMENT,
Username varchar(255) NOT NULL,
Password varchar(255) ,
.....
PRIMARY KEY (UserID)
) 
```

然后插入：

```
INSERT INTO Users (Username, Password, FirstName, Surname, Age, HouseNumber, 
                    StreetName, Town, County, Postcode, TelephoneNumber, 
                   isBanned, isAdmin) 
```

[http://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T10:54:44.517

不敢相信我必须这样做，但数据库连接路径是错误的。对不起，伙计们，我丢失了一封信。我会投票给每个人，并“回答”自己，以便人们看到。

# ms-access - 访问 VBA：在列中查找最大数并加 1

> ID：11949603
> 
> 赞同：3
> 
> 时间：2012-08-14T09:39:49.123
> 
> 标签：ms-access, find, vba

在我的 Access 数据库中，我有一个名为“Demande”的表。我想读取“Numero de Commande”列中的所有记录并读取该列中的最大数字，以便我可以将该数字用于下一个新记录。

所以这是我的桌子：

![表格图片](../Images/f2cb7f64a902bb474f8f2cb002430aa0.png)

关键索引适用于 Numero de Commande。

这是我目前的代码：

```
 Dim highestInt as Integer
 Dim newNumeroCommande as Integer

 Set currentDatabase = CurrentDb
 Set rstDemande = currentDatabase.OpenRecordset("Demande")

 ' Find the highest integer in the column "Numero de Commande"

 newNumeroCommande = highestInt + 1
 rstDemande.AddNew
 rstDemande("Numero de Commande").Value = newNumeroCommande 
 rstDemande.Update 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:47:34.980

只要该列仅包含没有字母的数值，那么您可以使用：

```
NewNumeroCommande = Dmax("[Numero de Commande]", "Demande") + 1 
```

注意：这不是我推荐的方法，而只是 Access 的一个内置选项，如果可能的话，您可以通过使用自动编号来省去麻烦，或者您可以有一个单独的“计数器”表来记录最高记录号，当如果您希望创建另一个，您可以锁定此表，将值加一（然后使用它）然后释放锁定，这在多用户环境中会更有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T10:46:05.107

关于获取序列号的一些说明。这需要参考 Microsoft ActiveX 数据对象 xx 库

**序号**

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim strSQL As String
Dim lngResult As Long
Dim strCon As String

    lngResult = 0  'assume fail

    strCon = "Provider=" ''Connection to back-end
    cn.Open strCon

    rs.CursorType = adOpenKeyset
    rs.LockType = adLockPessimistic
    rs.CursorLocation = adUseServer

    ''Where BEInfo is a single line table
    strSQL = "SELECT ASeqNumber FROM BEInfo"

    rs.Open strSQL, cn, , , adCmdText

    'Note this is ADO, so no rs.Edit
    rs!ASeqNumber = rs!ASeqNumber + 1
    rs.Update

    lngResult = rs!ASeqNumber

    ''This should not happen, but just to be sure
    If DCount("ASeqNumber", "Table", "ASeqNumber=" & lngResult) > 0 Then
        lngResult = 0
    End If 
```

# java - JAVA ASM 中的类转换器 - 可以生成吗？

> ID：11949605
> 
> 赞同：3
> 
> 时间：2012-08-14T09:39:54.703
> 
> 标签：java, java-bytecode-asm

我想开始使用 Java ASM 来转换我的项目中的类 - 向`String`某些方法添加一个参数并使用该参数发送日志。

在我读过的[asm网站上](http://asm.ow2.org/index.html)

> 如果要实现类转换器，编写两个Java源文件（转换前后），并使用ASMifier模式下插件的比较视图来比较等效的ASM代码。

但是我发现使用 Java ASM 非常困难。有没有可以生成的工具`class transformer`？这将非常有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:49:41.593

看看[ASMifier](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/util/ASMifier.html)类。这可用于生成代码以创建字节码。[http://asm.ow2.org/doc/tutorial.html](http://asm.ow2.org/doc/tutorial.html)

您可能会发现其他工具（例如 Javassist 或 BCEL）更容易完成简单任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:52:26.597

如果您使用的是 Eclipse，则应该安装[Bytecode Outline](http://andrei.gmxhome.de/bytecode/index.html) - 它调用 ASMifier（[Peter Lawry](https://stackoverflow.com/users/57695/peter-lawrey)在另一个答案中提到）并提供可以检查每个类或方法的视图。

**编辑**（从我下面的评论中复制）
要获得您需要的变压器，请按照以下步骤操作：编写示例方法，复制代码以创建它（您可以通过单击带有“ASM”的图标获得），更改其来源转换成你想要的样子，复制它的输出，把它们放在一个 diff 程序中（我喜欢并推荐[Diffuse](http://diffuse.sourceforge.net/)）。查看 ASM 代码中的变化，将其应用到您的 ASM 转换器中。

# javascript - 如何删除javascript画布

> ID：11949607
> 
> 赞同：9
> 
> 时间：2012-08-14T09:40:01.030
> 
> 标签：javascript, canvas, garbage-collection

我想要一堆对象，比如说：

```
function Block() {
  this.canvas;
}

blocks = []; 
```

我有时会指定：

```
block[x] = new Block(); 
```

进而：

```
block.canvas = document.createElement('canvas'); 
```

但有时我也想删除这个新画布以释放内存。我只需要这样做：

```
block.canvas = null; (or whatever the appropriate method is) 
```

然后javascript会在某个阶段释放内存？或者有没有明确的方法来删除对象并释放内存？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T09:45:22.287

被无处引用的对象占用的内存在 JavaScript 中由*垃圾回收*（[MDN 文档 on this](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)）回收。

因此，为了释放内存，您只需删除对`canvas`对象的所有引用，并且在垃圾收集器的下一次运行中，内存将再次被释放。

这可以像您一样使用`block.canvas = null;`or （取决于对象/属性范围） by 来完成`delete block.canvas`。

但请确保您删除了*所有*引用。这也可以是 DOM 或任何其他对象的引用！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T09:48:12.173

如果您实际使用该画布来绘制对象，这还不够。如果要将画布添加到 DOM，则还需要将其从中删除，否则它当然会保留在内存中。如果您使用 添加它[`appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild?redirectlocale=en-US&redirectslug=DOM/element.appendChild)，则应使用删除它[`removeChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)

* * *

附带说明一下，如果您要像您所说的那样拥有一堆对象，那么每个对象都有画布真是个坏主意。您应该考虑为每个可视层设置画布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T09:47:22.687

大多数 javascript 引擎使用**引用计数**或**标记和交换**作为其 GC 策略，因此任何没有引用全局对象（浏览器环境中的窗口）的对象都会在某个阶段被释放。

因此，为了确保您的`<canvas>`元素可以被收集，您应该确保：

*   没有变量或属性引用这个，通过运行`block.canvas = null`你可以完成任务
*   `<canvas>`元素不再附加到 DOM 树，通过运行你`canvas.parentNode.removeChild(canvas)`可以完成

从您提供的代码中，您没有执行**DOM 删除**，也许您`<canvas>`没有附加到 DOM 树，但如果是，请记住将其删除。

PS：我注意到一些答案提到了`delete`删除`canvas`属性的关键字，但这确实不是必需的，GC在`block.canvas`设置为之后按预期工作`null`，因为[a`delete`可能导致V8运行更慢](http://kendsnyder.com/posts/chrome-v8-creators-with-and-delete-are-dog-slow)，我的建议是防止使用`delete`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T09:45:40.983

Javascript 有一个名为 delete 的运算符：

```
delete block.canvas; 
```

示例：[http ://www.openjs.com/articles/delete.php](http://www.openjs.com/articles/delete.php)

# java - 消费输入事件失败.Android

> ID：11949609
> 
> 赞同：3
> 
> 时间：2012-08-14T09:40:15.380
> 
> 标签：java, android

这是我在我的应用程序中经常看到的错误。任何人都可以知道，任何想法，这个错误的原因是什么。

错误有两行：

```
 consumer ~ Error -1 pinning ashmem fd 69
' ~ Failed to consume input event.  status=-2147483648 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T11:09:37.727

我最近在我工作的应用程序中修复了类似的错误。问题在于关闭文件描述符两次的错误本机代码 - 这意味着它首先在 Close 方法中关闭它，然后在析构函数中再次调用 Close 而没有检查文件描述符是否已经关闭。

本机`open`函数作为文件描述符返回第一个空闲的最低数字。因此，有时上述错误是关闭描述符，该描述符在一次关闭和第二次调用之间被重用。大多数情况下，这个描述符被包裹使用。

在寻找此错误的解决方案时，我发现此错误发生在两种情况下：

1.  当打开的文件描述符过多时，这可能表明存在泄漏
2.  当代码关闭文件描述符两次时

调试这并不容易，很难重现，而且如果您不使用本机代码，则更难理解问题。

如果您没有本机代码，则在尝试与关闭的窗口进行通信时可能会出现此错误。就像您没有关闭某些对话框但关闭了拥有它的活动一样。我从未经历过这种情况，但我将其添加为提示。

# jquery - 如何从 jQuery UI Selectable 中排除锚标签？

> ID：11949611
> 
> 赞同：3
> 
> 时间：2012-08-14T09:40:36.330
> 
> 标签：jquery, html, jquery-ui, jquery-ui-selectable

我正在制作一个可选择 jQuery 的日历，因此您可以选择 li 项目并将事件添加到所选日期。

在每个 li 中都有一个锚标记，我想向它添加一个 javascript onclick 函数 - 但 jQuery UI 可选函数似乎是冲突的。

如何排除应用 jQuery UI 可选功能的项目？我正在尝试使用“NOT”选择器，但它不起作用......

这是我的代码片段：

```
 <ol id='selectable' class='selectable'>
                <li class='ui-widget-content' data-date='' date-uid=''>
                    <span class='dayOfWeek disabled'>1</span>
                    <span class='dayName disabled'>Thursday</span>
                    <a href='#' data-travel-day-id='' class='close' onclick='alert("hi");return false;'></a>
                </li>
            </ol>

           $(function () {
            $("#selectable").selectable();
           }); 
```

因此，我只是想让我的“嗨”消息弹出，并在他们单击锚标记时不选择该列表项。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:42:48.280

```
$("#selectable").selectable({
  cancel: "a.close"   
}); 
```

jQuery UI 可选选项：[取消](http://api.jqueryui.com/selectable/#option-cancel)

# ruby-on-rails - 如何使用 facebook 和 linkedin 让我的应用程序快速运行？

> ID：11949612
> 
> 赞同：1
> 
> 时间：2012-08-14T09:40:38.010
> 
> 标签：ruby-on-rails, facebook, performance, rest, linkedin

当我提供简短的背景时，请耐心等待：

1.  我的应用程序从 Facebook 和 LinkeIn 检索用户数据。
2.  两者都有非常严格的使用条款。具体来说，**他们不允许在我的应用程序上保存用户数据**（嗯，有点。Facebook 允许缓存。链接甚至不允许缓存）。
3.  天真的解决方案是在我需要他们的数据时调用 Facebook/LinkedIn。问题是，如果我需要大量数据（例如 100 个用户的个人资料），这会变得太慢。批量调用使事情变得更好，但它们有局限性，我不确定这种方法是否可以扩展。

**所以问题是如何让我的应用程序在使用来自 Facebook/LinkedIn 的数据时快速运行？**

如果您可以分享您的经验，或者有一个使用大量来自 Facebook/LinkedIn 数据的网站的示例，我很乐意听到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:20:03.153

> 具体来说，他们不允许在我的应用程序上保存用户数据（嗯，有点。Facebook 允许缓存。**链接甚至不允许缓存**）。

这不是真的…… [http://developer.linkedin.com/documents/linkedin-apis-terms-use](http://developer.linkedin.com/documents/linkedin-apis-terms-use)：

> B. 仅在允许的情况下存储内容，3\. 缓存性能：
> 
> 为改善会员体验，您可以缓存领英内容，但您在最初请求后的 24 小时内不得这样做。这种有限的缓存权限仅出于性能原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:36:50.710

当您谈论使您的应用程序“快速”时，请注意“快速”可以表示“高吞吐量”或“低延迟”，两者之间存在很大差异。最好为延迟（应为每个用户提供服务的速度）和吞吐量（每单位时间应该能够服务多少用户）设置性能目标。

如果从 FB/LinkedIn 获取数据是*吞吐量*的瓶颈，

1.  使用批处理请求。
2.  如果可以重复使用相同的数据，请尽可能多地缓存它，并尽可能长时间地缓存它。
3.  确保您的应用程序能够并行发出许多请求。由于通过网络发送查询是一种高延迟操作，因此您可以通过这种方式获得大量吞吐量。

如果从 FB/LinkedIn 获取数据是*延迟*的瓶颈，

1.  同样，在本地缓存尽可能多的数据。
2.  如果可以“猜到”很快需要哪些数据，请预先获取它。（例如：如果您的用户必须填写一个大表单然后提交，但该表单中有一个关键字段标识您需要的数据，您可以使用 AJAX 使页面尽快发送该字段它被填写，而不是等待整个表单被提交！）
3.  如果您需要多条数据来为单个用户提供服务，请不要使用多个顺序请求来获取它们——要么使用批处理请求，要么使用多个并行请求（可能两者兼而有之）。
4.  当需要让用户等待时，“分散”他们的注意力——尽你所能让等待*看起来*更短。
5.  如果页面的某些部分可以在没有 FB/LinkedIn 数据的情况下呈现，请先将这些部分发回，并在数据准备好时使用 AJAX 调用填充其他部分。

如果您绝对必须拥有来自 FB/LinkedIn 的数据 XYZ 才能为用户提供服务，并且单个 API 请求的延迟是 N 秒，并且您为每个用户提供服务的目标最大时间是 < N 秒，那么您可以达到您的唯一可能的方式目标是通过预取数据。也许当您看到用户的第一个页面请求进入（例如主页）时，您可以开始将该用户所需的所有数据加载到缓存中（如果它不存在的话）。

无论您做什么，我都建议您将 FB/LinkedIn 数据访问代码封装在“数据访问层”中。缓存应该严格地发生*在数据访问层内部*——应用程序代码不需要知道缓存。是否使用批处理调用，是否并行发出多个调用也是一个实现细节，应严格保留在数据访问层内部。

# r - 在 R 中将列值从一个数据帧分配给另一个数据帧

> ID：11949613
> 
> 赞同：2
> 
> 时间：2012-08-14T09:40:39.437
> 
> 标签：r

我使用带有以下代码的另一个数据框创建了一个空数据框。

```
compare<-data.frame(nrow=nrow(test_email),ncol=ncol(test_data))
colnames(compare)<-c("email", "gender") 
```

现在，我正在尝试使用简单的赋值语句根据某些条件为比较数据框的列赋值。

```
compare[1,1]<-test_email[1,1]
compare[1,2]<-test_data[1,2] 
```

在上面，`test_email[1,1]`有一个类似“abc@gmail.com”的电子邮件 ID，但是，分配后`compare[1,1]`的值为 81，而不是电子邮件 ID。我无法理解为什么没有分配电子邮件并且分配了一些数字值。谁能告诉我这个原因以及如何解决。test_email 的结构如下：

```
structure(list(email = structure(c(81L, 75L, 57L, 61L, 79L, 76L),
.Label = "ajay.bansal@siemens.com", "amanmeet.bhalla@gmail.com",
"aoneshp@gmail.com", "aparna_anand@msn.com", "ar.ashwani@gmail.com",
"ar.parulbansal@gmail.com", "ar.preet02@gmail.com",
"asdawsd@yahoo.com", "assd@yopmail.com",
"avijeet_yadav@rediffmail.com", "avneng1.negi@gmail.com",
"avnihatnagar@yahoo.com", "bansalanuj007@yahoo.com.au",
"bhanu5877@yahoo.co.in"), class = "factor")), .Names = "email",
w.names = c(NA, 6L), class = "data.frame") 
```

我无法找出为什么 R 在分配过程中将电子邮件转换为一些数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:17:31.467

您的作业仍在阅读电子邮件地址作为因素。

一个简单的方法是：

```
compare[1,1] <- as.character(test_email[1,1]) 
```

# python - 使用 funnelweb 将现有文件夹/文件结构迁移到 Plone

> ID：11949620
> 
> 赞同：5
> 
> 时间：2012-08-14T09:40:54.833
> 
> 标签：python, plone, plone-funnelweb

我希望将**现有文件和文件夹结构**从我的 PC 迁移到 Plone 4.1，而不考虑操作系统，即 Windows/Linux。

我已经浏览了有关 Mr.migrator、transmogrifier、Enfold 桌面、FTP 等的文档。但我希望有一个**批处理**，它将遍历文件夹结构并使用其中的文件创建相同的文件并上传到 Plone**没有任何干预**。文件结构应该与最初指定的相同，作为服务器路径。目的是在上传新文件之前将遗留内容上传到 Plone 中，并进一步对其进行定制以满足要求。

有没有这样的产品，可以直接在buildout.cfg中使用？

buildout.cfg 的部分片段现在在 linux debian 上使用 funnelweb for plone 4.1

```
parts =
    instance
    zopepy
    zopeskel
    unifiedinstaller
    repozo
    backup
    chown
    funnelweb

[funnelweb]
recipe = funnelweb
crawler-site_url=file:///home/xyz/Desktop/MassMail/mm_files 
ploneupload-target=http://admin:admin@localhost:8081/VAGroup 
```

来自 url 的文件需要上传到文件夹中的 plone 实例中`/mysore`。如果

```
url=file:///home/xyz/Desktop/MassMail/mm_files 
```

使用而不是网页，我本地系统的 MassMail 文件夹中的文件应该自动上传到指定目标文件夹的 VAGroup 站点吗？

具体应该怎么做？文件可以包含需要上传到站点的 .doc、.xls、.img、.png、.pdf 等。我看到 /var/funnelwebcache/ 中的所有文件以及带有 file.metadata 的文件。为什么没有上传到网站？我是否必须指定其他内容。此外，我只需要文件夹中的文件：`mm_files`不需要来自父/祖父母，即不需要来自`home/xyz/Desktop/MassMail`我在缓存中看到的子目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:28:30.513

我认为问题在于 mr.migrator、transmogrifier 和 funnelweb 之间存在混淆。

Mr.migrator 是一种通过命令行运行变形器管道的方法。Funnelweb 是一个预打包的管道。

因此，如果您像上面一样使用 mr.migrator，则需要创建一个完整的 transmogrifier pipeline.cfg 自己配置所有部分。

如果您在使用 funnelweb 时可以按照此处的说明[https://github.com/collective/funnelweb](https://github.com/collective/funnelweb)并使用文件 url，例如 url=file:///home/xyz/Desktop/MassMail/mm_files，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T17:21:40.827

您可以使用 Zope 的内置 FTP 和/或 WebDAV 服务来允许将多种文件 + 文件夹批量上传到 Plone 中。这对图像、PDF、Office 文档、纯 HTML 文件等非常有效 。http: [//plone.org/documentation/kb/webdav/](http://plone.org/documentation/kb/webdav/)是一个很好的起点。（FTP 的工作方式非常相似。）Enfold Desktop 为此提供了一个友好的 Windows 前端。（http://www.enfoldsystems.com/news/enfold-desktop-windows-7-plone-4-compatibility）

# sql - 触发失败时发送电子邮件

> ID：11949622
> 
> 赞同：0
> 
> 时间：2012-08-14T09:41:05.940
> 
> 标签：sql, sql-server, email, triggers, django-mssql

我已成功配置并能够通过调用 msdb.dbo.sp_send_dbmail 存储过程在 SQL Server 2008 R2 上使用“数据库邮件”发送电子邮件。我可以通过将它放在 try-catch 块中来捕获触发器中的查询失败。

但我需要做的是，当触发器无法执行查询时发送电子邮件。但是我不能在 catch 块中执行上面的存储过程。它给了我以下错误。

```
Msg 3930, Level 16, State 1, Procedure sp_send_dbmail, Line 64
The current transaction cannot be committed and cannot support operations that write to the log file. Roll back the transaction.
The statement has been terminated. 
```

有没有其他方法可以在触发失败时发送电子邮件？或者如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:35:10.377

触发器失败总是会导致事务回滚，因此它不能执行任何事务操作，例如调用`sp_send_dbmail`. 一个技巧是利用自定义分析器跟踪事件，因为它们是在独立事务中发送的：

```
create queue q;
create service sq 
    on queue q
    ([http://schemas.microsoft.com/SQL/Notifications/PostEventNotification]);
go

create event notification trace_user_0
    on server 
    for TRC_USER_CONFIGURABLE
    to service N'sq', N'current database';
go

create procedure usp_sq
as
begin

    declare @dh uniqueidentifier, 
        @mt sysname, 
        @mb varbinary(max),
        @mx xml;

    begin transaction

    receive top(1) 
        @dh = conversation_handle,
        @mt = message_type_name,
        @mb = message_body
        from q;

    if @mt = N'http://schemas.microsoft.com/SQL/Notifications/EventNotification'
    begin
        set @mx = cast(@mb as xml);

        declare @eventText nvarchar(4000);
        select @eventText = @mx.value (N'(//EVENT_INSTANCE/TextData)[1]', N'nvarchar(4000)');

        exec sp_send_dbmail @subject = 'Error in trigger', @body = @eventText;

    end
    else if @mt in (
        N'http://schemas.microsoft.com/SQL/ServiceBroker/Error', 
        N'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog')
    begin
        end conversation @dh;
    end

    commit

end
go

alter queue q with activation (
    status = on,
    max_queue_readers = 1,
    execute as = 'owner',
    procedure_name = 'usp_sq');
go

create table MyTable (a int);
go

create trigger MyTrigger 
    on MyTable 
    after insert
as
begin try
    if rand() > 0.5
        raiserror (N'Something horrible happend in this trigger!', 16,1);
end try
begin catch
    declare @error_message nvarchar(256) = cast(error_message() as nvarchar(256));
    exec sp_trace_generateevent 82, @error_message;
end catch
go

insert into MyTable (a) values (1);
insert into MyTable (a) values (2);
insert into MyTable (a) values (3);
insert into MyTable (a) values (4);
insert into MyTable (a) values (5);
insert into MyTable (a) values (6);
go 
```

# ruby-on-rails - RubyMine 控制台：强制 Ruby / Rails 中止执行未键入的语句

> ID：11949625
> 
> 赞同：2
> 
> 时间：2012-08-14T09:41:20.067
> 
> 标签：ruby-on-rails, ruby, rubymine

我在 RubyMine 的 Rails 控制台中工作了很多，但对以下情况感到非常沮丧：

```
>> User.find_by_name("Joe).id   
# Oh no, I forgot the closing double quote marks
# I'll try and cause an exception
>> "
>> ""
>> end
>> exit
# Well this is frustrating...
>> Foo
>> Bar
# rage quit 
```

控制台不断等待，我想做的就是打破我的表情。我最终必须关闭控制台（或完全关闭 RubyMine）并重新启动它。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:01:44.410

在这种特殊情况下，按下`Ctrl+d`然后输入括号`)`应该可以：

```
1.9.3p194 :004 > Team.find_by_name("equipo1).id
1.9.3p194 :005"> cannot get out of here"
1.9.3p194 :006?>   hold on...
1.9.3p194 :007 >     ^D
1.9.3p194 :007?>   )
SyntaxError: (irb):6: syntax error, unexpected tIDENTIFIER, expecting ')'
hold on...
    ^
(irb):7: syntax error, unexpected ')'
    from /Users/dgarcia/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
    from /Users/dgarcia/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
    from /Users/dgarcia/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.3p194 :008 > puts "hooray!!"
hooray!!
 => nil 
1.9.3p194 :009 > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:45:19.893

只需按 ctrl c 即可退出此模式。

```
irb(main):265:0* "hello
irb(main):266:0"
irb(main):267:0"
irb(main):268:0"
irb(main):269:0" ^C
irb(main):269:0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T21:40:42.593

刚刚用 RubyMine **6.0**解决了这个问题。

采用`CTRL` `+` **`SHIFT`** `+` `C`

# flash - flex：flex里面有绘图组件吗？

> ID：11949627
> 
> 赞同：0
> 
> 时间：2012-08-14T09:41:25.623
> 
> 标签：flash, apache-flex

flex里面有没有矢量图编辑组件，我的意思是允许绘制线条、曲线、形状等的组件。

先感谢您！

**UPD：**实际上问题是“如果我想在我的 Flash 应用程序中嵌入图形编辑器，是处理 flex 还是用我自己的双手做某事更好”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:05:43.940

`Path`您可以使用该类 进行绘制。[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Path.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Path.html)

但是，使用 fxg 图形可能会更快、更简单。

编辑：好的，最近的评论和问题的编辑，这不是正确的。不过一开始也不是很清楚。

# objective-c - 带有日期范围部分的表格视图

> ID：11949629
> 
> 赞同：1
> 
> 时间：2012-08-14T09:41:34.660
> 
> 标签：objective-c, datetime, nsmutablearray, nsarray

我在表视图中显示了以下数据

```
// declaration of Array
 NSMutableArray *listOfItems;

//Initialize the array.
listOfItems = [[NSMutableArray alloc] init];

// Adding Item to array
[listOfItems addObject:[object description]];

// Populating tableView with Array
NSString *cellValue = [listOfItems objectAtIndex:[indexPath row]]; 
```

这表明 ：

*   2012-08-10 07:52:39 +0000

    2012-08-10 07:56:46 +0000

    2012-08-10 07:57:01 +0000

    2012-08-13 02:14:02 +0000

    2012-08-13 02:20:29 +0000

    2012-08-10 07:56:46 +0000

    2012-08-14 08:44:33 +0000

现在我需要有一个分段表视图，以便最终结果应该是这样的

*   标题

    *   2012-08-10

    价值观

    *   2012-08-10 07:52:39 +0000
    *   2012-08-10 07:56:46 +0000
    *   2012-08-10 07:57:01 +0000
    *   2012-08-10 07:56:46 +0000
*   标题

    *   2012-08-13

    价值观

    *   2012-08-13 02:14:02 +0000
    *   2012-08-13 02:20:29 +0000

    *   标题 2012-08-14

    价值观

    *   2012-08-14 08:44:33 +0000

即每天的标题和每个部分中每天的不同值我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:06:22.600

```
NSMutableArray *array=[[NSMutableArray alloc]init];
[array addObject:[NSArray alloc]initWithObjets:@"2012-08-10 07:52:39 +0000",@"2012-08-10    07:56:46 +0000",@"2012-08-10 07:57:01 +0000",nil]];
[array addObject:[NSArray alloc]initWithObjets:@"2012-08-13 02:14:02 +0000",@"2012-08-13 02:20:29 +0000",nil]];
[array addObject:[NSArray alloc]initWithObjets:@"2012-08-14 08:44:33 +0000",nil]];
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return array.count;
}
-(NSInteger)tableView:(UITableView *)tableViewl numberOfRowsInSection:(NSInteger)section
{
    NSArray *tempArray=[array objectAtIndex:section];
    return tempArray.count;
}
-(UITableViewCell *)tableView:(UITableView *)tableViewl cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *tempArray=[array objectAtIndex:indexPath.session]
    cell.textLabel.text=[tempArray objectAtIndex:indexPath.row];
    return cell;
}
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSArray *tempArray=[array objectAtIndex:section];
    return [tempArray objectAtIndex:0];
} 
```

# python - 为什么不能 select.select() 捕获关闭的套接字错误？

> ID：11949631
> 
> 赞同：5
> 
> 时间：2012-08-14T09:41:37.177
> 
> 标签：python, sockets

一个封闭的客户端套接字附加到 elist 中，但在调用 select 时 ex 中没有异常。我不知道为什么，请你帮帮我。非常感谢！

```
r,w,ex = select.select(rlist, wlist,elist )
    for s in ex:
       print "catch a closed socket error!" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:51:44.867

要捕获套接字关闭事件，您需要将套接字放入`rlist`. 当连接在另一端关闭时，`select`返回并表示已关闭的套接字已准备好**读取**（即它在您的`r`列表中）。如果您`recv`在此套接字上执行并返回一个空列表（未读取任何内容），则表示连接已关闭。

```
 data = s.recv(size) 
 if not data: 
    # socket has been closed by peer
    s.close() 
```

据我所见，异常列表（select 的最后一个参数）并没有被广泛使用。它的主要问题是不同的操作系统对这个参数的解释不同。有时它甚至仅用于似乎根本不是例外的情况（OOB 数据）。

`socket`模块文档并未具体说明该参数的含义，因此依赖它通常不是一个好主意：

> xlist：等待“异常情况”（请参阅​​手册页了解您的系统认为这种情况的原因）

# jsf-2 - 如何检索 JSF 丰富的选定值：选择控件？

> ID：11949632
> 
> 赞同：0
> 
> 时间：2012-08-14T09:41:39.777
> 
> 标签：jsf-2, richfaces, managed-bean

我有一个这样的组合框：

```
<rich:select id="foo" value="#{fooVo.selectedFoo}" defaultLabel="Please select one">
  <f:selectItems value="#{fooVo.fooList}"/>
</rich:select> 
```

当我试图从列表中选择一个条目时，`fooVo.selectedFoo`它是空的。我发现 setter of `fooVo.selectedFoo`is not call。

这是豆子：

```
@ManagedBean(name="fooVo")
@SessionScoped
public class FooVo {
  private List<SelectItem> fooList = new ArrayList<SelectItem>();

  private String selectedFoo;

  /** getter and setter **/
} 
```

假设`selectedFoo`应该填写选定的条目，我可以知道这个问题应该如何解决吗？

**2012 年 8 月 15 日更新 - fooList 如何更新？**

列表的构造在 DAO 中：

```
public List<SelectItem> getFooList() {
  List<SelectItem> newList = new ArrayList<SelectItem>();

  Integer theValue = ...;
  String theLabel = ...;
  newList.add(new SelectItem(theValue.toString(), theLabel));
} 
```

然后`newList`将返回到 BOC 并由一个局部变量保存，在做一些其他处理工作后，这`newList`将移动到另一个 ActionBean 类，如下所示：

```
public List<SelectItem> processFooList() {
  ...
  List<SelectItem> theList = theDao.getFooList();
  return theList;
} 
```

`fooVo`而在 ActionBean 类中，这个列表最终将通过 Spring 依赖注入到达托管 bean ：

```
@ManagedBean(name="theAction")
@SessionScoped
public class ActionBean {

  @ManagedProperty(value="#{fooVo}")
  private FooVo fooVo;

  public void setTheBo(IBoc theBo) {
    this.theBoc = theBo;
    this.FooVo.setFooList(theBo.processFooList());
  }
} 
```

我在设置器 Spring DI 期间填写了`fooVo`fooList，因为我希望在`fooList`加载页面时准备好。

# sql-server - 无法扩展服务器是 SSMS

> ID：11949635
> 
> 赞同：0
> 
> 时间：2012-08-14T09:41:45.273
> 
> 标签：sql-server, database, object, ssms

今天我遇到了一个奇怪的问题，我被困在哪里出了问题以及如何解决它。

当我登录到 SSMS 时，我可以看到我的服务器并且连接正常，但是服务器级别下面没有任何内容（即数据库、对象等），并且没有 +/- 扩展框。

根据 sys.databases，服务器上的所有数据库都在线，都将 is_read_only 设置为 0，并且都具有 MULTI_USER 访问权限。

我可以直接在服务器上打开一个查询窗口，然后使用完整路径或 USE 语句在数据库上执行语句，但我无法让服务器展开/折叠工作。

我尝试重新启动 SSMS，从对服务器的直接访问中注销，并在连接到服务器的另一个客户端上访问 SSMS，但同样的事情发生了。这让我相信我的个人资料或服务器配置本身存在问题？

有没有其他人遇到过这个问题？

**使用**

*   SSMS 10.50.2500.0
*   访问 SQL Server 2008 R2

# sql - 递归地从表中获取数据

> ID：11949638
> 
> 赞同：2
> 
> 时间：2012-08-14T09:42:01.487
> 
> 标签：sql, stored-procedures, sybase

我需要以递归方式从表中获取数据。数据就像会有一个父母，其中有很多孩子。数据的结构就像一棵树，但每个节点都有多个子节点。

表结构如下：

```
Description----column name
--------------------------
key of the item---key
parent of the item----parent 
```

我可以从另一个表中获取根的密钥，如下所示：

```
select key from BSC where name="0201". 
```

使用这把钥匙，我需要把所有的孩子都带到这棵树的叶子上。

我唯一的输入是项目的名称。如果我想要根的孩子，我可以使用：

```
select bpkey from MYTABLE where parent in (select bpkey from BSC where name="0201") 
```

但这只是根的孩子。我需要获取孩子和孩子的孩子......而且它还在继续。

但我需要获取该树中的所有键。

我不太擅长编写 sql 查询。可能我认为我们需要在这里进行递归和存储过程。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:15:22.857

假设您有一个临时表来保存层次结构的结果。

```
create table #temp2(id int, parentid int null) 
```

插入您期望从中获得层次结构结果的唯一记录。

```
declare loop cursor
   for select * from #temp2
go

declare @id int
declare @parentid int

open loop
fetch loop
    into @id, @parentid
while(@@sqlstatus = 0)
begin 

insert into #temp2
select id,parentid from #temp1 where parentid=@id

fetch loop
    into @id, @parentid
end
close loop
DEALLOCATE cursor loop 
```

上述查询还假设源表为`#temp1`，结果表为`#temp2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:42:17.620

如果您的 Sybase 版本支持公用表表达式（即：sql 任何地方）

```
;with cte as
(
    select [key], parent from yourtable
    union all
    select t1.[key], t2.parent from yourtable t1
    inner join cte t2 on t1.parent=t2.[key]
)
    select * from cte where parent= [parent to search for] 
```

# ms-access - Access 2007 - 我可以用宏检查记录集吗？

> ID：11949646
> 
> 赞同：0
> 
> 时间：2012-08-14T09:42:18.840
> 
> 标签：ms-access, macros

我的数据库的菜单页面有一系列按钮，每个按钮都有一个宏，该宏运行查询以查找用户需要的特定记录集，然后打开表单以显示记录。如果没有返回记录，那么只会看到表单标题 - 通常的选项卡控件和子表单不存在。有没有一种方法可以从宏中测试查询是否没有记录？如果是这样，那么我可以使用 MsgBox 让用户知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:48:41.943

在 VBA 中，您可以在以下几行中执行一些操作：

```
If DCount("ID","MyQuery")=0 Then
    MsgBox "No records"
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:49:25.877

Recordset.count 是一个属性，如果对宏可用，您可以使用

或者你可以写成的条件

如果 recordset.EOF 那么 something() else

# java - Java EE 模块依赖关系 Eclipse

> ID：11949654
> 
> 赞同：0
> 
> 时间：2012-08-14T09:42:52.627
> 
> 标签：java, web-applications, classnotfoundexception, build-dependencies

我正在使用 Eclipse 开发一个 Web 应用程序。我已经设置了构建路径以包含我的类，但有时我得到了`ClassNotFoundException`，现在我得到了：

```
SEVERE: Allocate exception for servlet MyServlet
java.lang.ClassNotFoundException: com.free.MyServlet 
```

来自 Servlet！*这怎么可能*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:53:29.143

我假设您正在使用集成到 Eclipse 的 tomcat。
最有可能的是，您的课程没有被复制`WEB-INF\lib`到您在 tomcat 中的 Web 应用程序下。Eclipse 就是这样做的。手动复制它们（从您的项目`bin`目录中）。我不确定您如何将其与您的编码项目保持同步以避免手动步骤

# arrays - 如何使用 Yii ActiveRecord 接收数组

> ID：11949655
> 
> 赞同：3
> 
> 时间：2012-08-14T09:43:10.453
> 
> 标签：arrays, activerecord, yii

考虑这个查询及其结果：

```
Yii::app()->db->createCommand(
    "SELECT name FROM users WHERE city='Paris'"
)->queryColumn(); 
```

结果：

```
Array
(
    [0] => John Kerry
    [1] => Marry White
    [2] => Mike Jain
) 
```

关于如何构建此查询的任何建议`ActiveRecord`？有必要接收**数组**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:30:12.780

重复： [Yii - 如何从活动记录中获取值数组](https://stackoverflow.com/questions/9377024/yii-how-to-get-a-values-array-from-an-active-record/)

使用`CHtml::listData`（见[http://www.yiiframework.com/wiki/48/by-example-chtml/#hh3](http://www.yiiframework.com/wiki/48/by-example-chtml/#hh3)）

```
$users = User::model()->findAll();
$usersArr = CHtml::listData( $users, 'id' , 'city');
print_r( $usersArr ); 
```

它会给你数组 id => city

```
Array {
    2 => 'Paris',
    102 => 'Riga',
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:42:00.307

一条活动记录，顾名思义，将为数据库中的每一行返回一条完整的记录，因此从每一行中仅获取一个字段的最佳方法是使用查询[构建器](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)，类似于上面的内容。

如果您真的想使用 AR 并且只想要数组中的名称，那么这样的事情可能会起作用：

```
$names = array();
$users = users::model()->findAllByAttributes(array('city'=>'Paris'));
foreach(array_keys($users) as $key)
{
    $names[] = $users[$key]->name;
} 
```

尽管如果您不使用 AR 搜索中的任何其他详细信息，那么仅提取名称会产生很多开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-27T08:26:48.417

Actually I have dealt with the same problem, I would like to use the ActiveRecord instead of CDBCommand. I have answered on the similar question before

[get array from active record](https://stackoverflow.com/questions/14235249/yii-find-query-result-without-table-structure?answertab=active#tab-top)

```
$words = Word::model()->findAll();
$data=array_map(create_function('$m','return $m->getAttributes();'),$words);
var_dump($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T14:47:56.010

使用 Chtml 这是一个丑陋的黑客！简而言之，您可以这样做：

```
public function queryAll($condition = '', $params = array())
{
    $criteria = $this->getCommandBuilder()->createCriteria($condition, $params);
    $this->applyScopes($criteria);
    $command = $this->getCommandBuilder()->createFindCommand($this->getTableSchema(), $criteria);
    $results = $command->queryAll();
    return $results;
} 
```

[在此链接](https://stackoverflow.com/questions/9377024/yii-how-to-get-a-values-array-from-an-active-record/20546540#20546540)中按照我对其他问题中相同问题的回答。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:06:28.317

如前所述，您可以使用[findAllByAttributes](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllByAttributes-detail) (array $attributes, mixed $condition='', array $params=array ( )) 并告诉此方法仅获取匹配记录的“名称”列。为此，您需要将[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)的实例作为 $condition 传递，并在此实例上指定“选择”列。

# python - 在scrapy中设置粘性cookie

> ID：11949667
> 
> 赞同：0
> 
> 时间：2012-08-14T09:44:14.113
> 
> 标签：python, cookies, scrapy

我正在抓取的网站具有设置 cookie 并在后端检查它以确保启用 js 的 javascript。从 html 代码中提取 cookie 很简单，但是在 scrapy 中设置它似乎是个问题。所以我的代码是：

```
from scrapy.contrib.spiders.init import InitSpider

class TestSpider(InitSpider):
    ...
    rules = (Rule(SgmlLinkExtractor(allow=('products/./index\.html', )), callback='parse_page'),)

    def init_request(self):
        return Request(url = self.init_url, callback=self.parse_js)

    def parse_js(self, response):
        match = re.search('setCookie\(\'(.+?)\',\s*?\'(.+?)\',', response.body, re.M)
        if match:
            cookie = match.group(1)
            value = match.group(2)
        else:
            raise BaseException("Did not find the cookie", response.body)
        return Request(url=self.test_page, callback=self.check_test_page, cookies={cookie:value})

    def check_test_page(self, response):
        if 'Welcome' in response.body:
            self.initialized()

    def parse_page(self, response):
        scraping.... 
```

我可以看到内容在 中可用`check_test_page`，cookie 运行良好。但它甚至从来没有得到，`parse_page`因为没有正确的 cookie 的 CrawlSpider 看不到任何链接。有没有办法在抓取会话期间设置 cookie？还是我必须使用 BaseSpider 并将 cookie 手动添加到每个请求中？

一个不太理想的选择是通过scrapy配置文件以某种方式设置cookie（值似乎永远不会改变）。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:18:16.943

我以前没用过`InitSpider`。

`scrapy.contrib.spiders.init.InitSpider`查看我看到的代码：

```
def initialized(self, response=None):
    """This method must be set as the callback of your last initialization
    request. See self.init_request() docstring for more info.
    """
    self._init_complete = True
    reqs = self._postinit_reqs[:]
    del self._postinit_reqs
    return reqs

def init_request(self):
    """This function should return one initialization request, with the
    self.initialized method as callback. When the self.initialized method
    is called this spider is considered initialized. If you need to perform
    several requests for initializing your spider, you can do so by using
    different callbacks. The only requirement is that the final callback
    (of the last initialization request) must be self.initialized. 

    The default implementation calls self.initialized immediately, and
    means that no initialization is needed. This method should be
    overridden only when you need to perform requests to initialize your
    spider
    """
    return self.initialized() 
```

你写了：

> 我可以看到内容在 中可用`check_test_page`，cookie 运行良好。但它甚至永远不会到达，`parse_page`因为 `CrawlSpider`没有正确的 cookie 就看不到任何链接。

我认为`parse_page`没有被调用，因为你没有发出请求`self.initialized`作为回调。

我认为这应该有效：

```
def check_test_page(self, response):
    if 'Welcome' in response.body:
        return self.initialized() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:18:02.623

原来InitSpider是一个BaseSpider。所以看起来像 1) 在这种情况下无法使用 CrawlSpider 2) 无法设置粘性 cookie

# specflow - Specflow 参数化整表

> ID：11949669
> 
> 赞同：4
> 
> 时间：2012-08-14T09:44:43.577
> 
> 标签：specflow

我正在编写一个测试，我想重用它，因此我试图参数化整个表。该表位于我的“然后”语句中，取决于团队是需要验证的表。

目前我的场景大纲如下所示：

```
Given <teamName> uses this end point
And the response is a Json
When I perform a query to http:...
Then I validate all the fields I need:
|DataElement|Validation                     |jsonPath           |
|element1   |validate that it is not null   |data.structure.path|
|element2   |validate a name                |data.structure.name| 
```

所以我知道我可以通过参数化表中的数据来验证每一行：

```
|DataElement|Validation                     |jsonPath           |
|<value>    |<Specific validation performed>|<Json Path to query| 
```

然后做例子

但是根据哪个团队使用相同的端点，所需的数据元素和验证非常不同，所以我想参数化整个表对象，如下所示：

然后我验证我需要的所有字段：

```
<TeamTable>

Examples:
|Team A Table|
|DataElement|Validation                     |jsonPath           |
|element1   |validate that it is not null   |data.structure.path|
|element2   |validate a name                |data.structure.name|
|element1   |validate age is valid          |data.structure.age |

|Team B Table|
|DataElement|Validation                     |jsonPath                |
|element1   |validate is a Date             |data.structure.date     |
|element2   |validate something more        |data.structure.something|
|element1   |validate US postcode           |data.structure.postcode | 
```

可能吗？如何参数化整个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:49:37.540

Specflow 确实支持表参数，这是一个示例：

```
When following transactions are added
| TransactionDate | TransactionAmount | AccountNumber | Type | CR/DR |
| 1/20/12         | 10,000            | 102           | Cash | DR    |
| 1/20/12         | 6,500             | 106           | Cash | DR    |
| 1/21/12         | 10,001            | 102           | Cash | DR    |

    [When(@"following transactions are added")]
    public void WhenFollowingTransactionsAreAdded(Table table)
    {
        // Now you can either do for each
        foreach (var row in table.Rows)
        {
             // do stuf
        }

        // Or use an assist helpers to map table to an object
        var transactions = table.CreateSet<Transaction>();
    } 
```

有关 Assist 助手的更多帮助，请参阅 SpecFlow[文档](https://github.com/techtalk/SpecFlow/wiki/SpecFlow-Assist-Helpers)

更多关于表格的基本内容在[这里](https://github.com/techtalk/SpecFlow/wiki/Step-Definitions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:32:08.260

我认为 Specflow 不可能 - 我可能错了。

我还认为，对于您想做的那种测试，最好使用不同的测试框架。当您需要与业务人员分享和讨论功能时，Specflow 会带来最大的价值。在您的示例中，企业不会对此感兴趣，`jsonPath`因此我建议您进行简单`NUnit`的测试，您可以轻松地创建模板化测试。

# php - 用 PHP 在浏览器中显示文件

> ID：11949670
> 
> 赞同：0
> 
> 时间：2012-08-14T09:44:43.770
> 
> 标签：php, mime-types, content-type

我已经建立了一个上传机制，现在我想创建一个页面，让您查看您上传的文件。但是，我想在浏览器中显示它们（我只有浏览器支持的文件，如图像、PDF 等）。

我的猜测是我可以通过只设置一些标题并打印文件的字节来做到这一点。但据我所知，我需要设置`Content-type`标题才能正确显示内容。如何获取文件的内容类型？它和mime类型一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:57:24.383

为了在浏览器本身中处理许多不同的文件类型，您可以使用已弃用的[MIME Con​​tent-type的帮助。](http://us3.php.net/manual/en/function.mime-content-type.php)

或者你也可以使用[finfo-file](http://us2.php.net/manual/en/function.finfo-file.php)它也返回关于文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:51:06.007

是的，它的 MIME 类型。在以下位置查找列表

[http://en.wikipedia.org/wiki/MIME_type](http://en.wikipedia.org/wiki/MIME_type)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:03:06.217

您必须阅读文件的内容，打印适当的标题并回显内容。如果浏览器检测到它可以显示这些文件类型，它将显示它们，否则它将提示用户保存到本地系统。该代码将类似于下面指定的代码段：

```
header('Content-disposition: attachment; filename=huge_document.pdf');
header('Content-type: application/pdf');
readfile('file1.pdf'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:58:08.147

尝试这个：

```
$file = file_get_contents($_FILES['myupload']['tmp_name'];
$type = $_FILES['myupload']['type'];

header("Content-Type: ".$type);
echo $file; 
```

它可能无法完全发挥作用，但它是一个起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:56:05.477

我为这个问题制定的最佳解决方案是使用 Apache 的索引并应用一些样式`FancyIndexing`，查看[Apache Indexing Options](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html#indexoptions)，您可以显示您想要的 MIME。

在`.htaccess`：

```
<IfModule mod_autoindex.c>
        IndexOptions FancyIndexing 
        IndexOptions VersionSort 
        IndexOptions HTMLTable 
        IndexOptions FoldersFirst 
        IndexOptions IconsAreLinks 
        IndexOptions IgnoreCase 
        IndexOptions SuppressDescription 
        IndexOptions SuppressHTMLPreamble 
        IndexOptions XHTML 
        IndexOptions IconWidth=16 
        IndexOptions IconHeight=16 
        IndexOptions NameWidth=*
        IndexOrderDefault Descending Name
        HeaderName /style/header.php
        ReadmeName /style/footer.php
</ifModule> 
```

# java - LibUSBJava 写入失败

> ID：11949671
> 
> 赞同：1
> 
> 时间：2012-08-14T09:44:44.293
> 
> 标签：java, camera, usb, libusb

我想在 Java 上将数据写入 USB 摄像头。为此，我正在使用[LibUSBJava](http://libusbjava.sourceforge.net/wp/)。`output endpoint`我可以打开USB摄像头并成功读取数据，但是当我尝试写入数据时，我在打开的设备上找不到任何数据。对于 find `output endpoint`，我已经实现了这个功能。当我调用这个函数时，它返回`null`. 我调试了这个方法，发现`dev`有4个接口。它们都有`input endpoint`，但`output endpoint`这些接口上没有。

```
private static Integer getActiveOutputEndPoint(Device dev) {
    try {
        Configuration cd = dev.getConfiguration();
        if (cd == null)
            System.out.println("Configuration Descriptor: null!");
        else {
            for (int i = 0; i < cd.getNumInterfaces(); i++) {
                Interface ifc = cd.getInterface(i, 0);
                if (ifc == null)
                    System.out.println("Interface Descriptor: null!");
                else {
                    for (int k = 0; k < ifc.getNumEndpoints(); k++) {

                        Endpoint ep = ifc.getEndpoint(k);
                        if (ep == null)
                            System.out.println("Endpoint Descriptor: null!");
                        else {
                            if (ep.isInput()) {
                                continue;
                            } else {
                                return ep.getEndpointAddress(); 
                            }
                        }
                    }
                }
            }
        }
    } catch (IOException e) {
        System.out.println("ERROR ! Configuration Descriptor: null! or Interface Descriptor: null!");
    }
    return null;
} 
```

有没有人可以帮助我？

# android - Android Listview：getView 在开始时为每个位置调用

> ID：11949675
> 
> 赞同：0
> 
> 时间：2012-08-14T09:44:50.717
> 
> 标签：android, android-listview, android-adapter

我有一个`Listview`大约 10 个单元格，它们都有自定义布局。这就是为什么我有`itemVIewCount`10 个，因为我无法回收视图，因为所有单元格都不同。

我遇到的问题是，当我设置my`getView`时，每个位置都会调用它，而不仅仅是可见的。此外，我无法滚动，我只能看到前 3 个单元格。`adapter``listview``listVIew`

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView != null) {
        //recycled view is unique, so it is correct
        return convertView;
    }

    return preLoadedViews.get(position);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:13:26.830

愚蠢的问题，误读了 Hierarchyiew 中 ListView 的高度。这确实是问题所在，设置不正确。

# c# - 条件不应该返回真

> ID：11949676
> 
> 赞同：0
> 
> 时间：2012-08-14T09:44:54.823
> 
> 标签：c#, linq, conditional-statements, where

我有以下方法：

```
public static List<string> GetArgsListStartsWith(string filter, bool invertSelection, bool lowercaseArgs)
{
    return GetArgumentsList(lowercaseArgs)
          .Where(x => !invertSelection && x.StartsWith(filter)).ToList();
} 
```

然后我这样称呼它`GetArgsListStartsWith("/", true, false)`

这将转化为：获取所有不以“/”开头的参数的列表。问题是列表没有被填充，即使所有参数都不以“/”开头。

如果我调用`GetArgsListStartsWith("/", false, false)`which 转换为：获取以“/”开头的所有参数的列表，该列表确实会填充以“/”开头的参数。

我怀疑设置为true并返回false时`!invertSelection && x.StartsWith(filter)`不会返回，但我不明白为什么。有人看到我看不到的东西吗？`true``invertSelection``x.StartsWith(filter)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T09:49:20.947

正如其他答案所说，您的条件只有在为假时*才会*返回真。`invertSelection`

有条件地反转结果的最简单方法是使用[XOR 运算符](http://msdn.microsoft.com/en-US/library/zkacc7k1)：

```
.Where(x => x.StartsWith(filter) ^ invertSelection) 
```

我更喜欢这个而不是 lc 的解决方案，因为它只指定`StartsWith`一次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T09:47:23.253

```
.Where(x => invertSelection ? !x.StartsWith(filter) : x.StartsWith(filter)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T09:49:25.093

!invertSelection && x.StartsWith(filter) 其中 invertSelection = true 的值始终为 false。

# c# - Visual Studio 2010 和 VSIX 中的项目模板

> ID：11949692
> 
> 赞同：1
> 
> 时间：2012-08-14T09:45:44.793
> 
> 标签：c#, visual-studio-2010, vsix, project-template

我用两个项目创建了解决方案：WinForms 和一个 Web 服务。我创建了从 WinForms 到 Web 服务的 Web 引用。现在我想用[vsix](http://www.c-sharpcorner.com/UploadFile/40e97e/create-template-using-vsix-in-visual-studio)创建一个多项目模板。

**我使用了这个工具，当我想从这个模板创建新项目时，VS 向我显示了一个问题，它在web 参考**文件夹中找不到 4 个文件中的 2 个文件。它找不到`disco`和`wsdl`文件。

[这很奇怪，因为当我使用它](http://msdn.microsoft.com/en-us/library/ms185308.aspx?appId=Dev10IDEF1&l=EN-US&k=k%28VS.EXPORTTEMPLATEWIZARD%29;k%28TargetFrameworkMoniker-%22SILVERLIGHT&k=VERSION=V4.0%22%29&rd=true)手动创建项目模板并将压缩文件粘贴到 VS 项目模板时，一切正常。

**编辑**

当我使用 WinForms 和 Web 参考创建 1 个项目模板时，一切正常。后来我用网络服务创建了另一个模板，也可以工作，但一起工作就不行了。

# javascript - 使用左侧隐藏列排序不起作用

> ID：11949694
> 
> 赞同：0
> 
> 时间：2012-08-14T09:45:58.407
> 
> 标签：javascript, jquery, sorting, datatables

我正在尝试使用选择元素对某些列进行排序以在我的表中工作。在列的左侧，我有一列在初始化时隐藏。

我正在使用来自 DataTables.net 的 dom-select 排序插件：

```
$.fn.dataTableExt.afnSortData['dom-select'] = function  ( oSettings, iColumn )
{
        console.log(iColumn);

    var aData = [];
    $( 'td:eq('+iColumn+') select', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
        aData.push( $(this).val() );
    } );
    return aData;
}; 
```

对一列进行排序时，该列的索引在左侧有隐藏列和没有隐藏列时是相同的（上面 afnSortData 中的 iColumn）。但是，当左侧的列被隐藏时，排序将应用于右侧的列。如果它是未隐藏的排序工作应该。

当左侧有隐藏列时，如何确保将排序应用于我单击的同一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:35:30.333

一种快速而肮脏的方法是将 iColumn 值设置为少 1。

```
iColumn = iColumn - 1; 
```

* * *

**更新** 更清晰的方法是这条路线，如[DataTables 论坛](http://datatables.net/forums/discussion/5142/hidden-column-checkbox-column-sorting-bug/p1)所述：

```
iColumn = oSettings.oApi._fnColumnIndexToVisible( oSettings, iColumn ); 
```

# php - 无法检索 magento 子类别图像

> ID：11949697
> 
> 赞同：0
> 
> 时间：2012-08-14T09:46:02.310
> 
> 标签：php, magento, magento-1.6, mage

我正在尝试在父类别的页面上显示子类别网格。我已按照[本](http://www.sjlwebdesign.co.uk/sjl-blog/index.php/web-design/magento-subcategories-inside-parent-category/)教程进行操作，一切正常，除了即使我已将图像分配给每个子类别，页面仍显示占位符图像而不是实际图像。

我认为 phtml 代码中的某个地方存在问题。

```
// Retrieve the current category and it's children
<?php
$_maincategorylisting=$this->getCurrentCategory();
$_categories=$this->getCurrentChildCategories();
if($_categories->count()):
    foreach ($_categories as $_category):
        if($_category->getIsActive()):
            $cur_category=Mage::getModel('catalog/category')->load($_category->getId());
            $layer = Mage::getSingleton('catalog/layer');
            $layer->setCurrentCategory($cur_category);
            $catName = $this->getCurrentCategory()->getName();
            $_imageUrl=$cur_category->getImageUrl();
            if (!$_imageUrl) : //if the image url is false set it to the placeholder 
                $_imageUrl = $this->getSkinUrl('images/catalog/product/placeholder/thumbnail.jpg');
            endif;
            /* output */ ?>
                <div class="category-box">
                    <a href="<?php echo $this->getCategoryUrl($_category)?>">
                        <img src="<?php echo $_imageUrl?>" height="80">
                    </a>
                    <p><a href="<?php echo $this->getCategoryUrl($_category)?>"> <?php echo $_category->getName()?></a></p>
                </div>
        <?php endif;
    endforeach;
    $layer->setCurrentCategory($_maincategorylisting);
endif; ?> 
```

笔记：

我正在运行 Magento v 1.6.0.0

[这](http://accesorii-acvariu.ro/index.php/filtrare.html)是我正在测试的类别页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:51:50.233

我注意到，在 foreach 循环中，您使用 $this->getCurrentCategory() 总是会返回“Filtrare”类别。

基本上在 foreach 循环中，您需要将 $this->getCurrentCategory() 替换为 $cur_category

# linq - 如何使用 linq 过滤到最大组

> ID：11949698
> 
> 赞同：3
> 
> 时间：2012-08-14T09:46:03.390
> 
> 标签：linq, search

我有这个清单

```
var commonContractsList = (
        from i in referredDilutions
        join f in dilutionsList
            on i.Contract equals f.Contract
        select f)
    .ToList(); 
```

该列表`commonContractsList`有几个字段，特别是三个`contract`，`instalment`和`amount`。我们可以有几个`instalment`s 一个`contract`。每个`contract`/`instalment`都有一个`amount`.

现在，我想要做的是为每个 s 获取`contract`所有记录的列表，`contract`其中 s`instalment`具有更高的`amount`。

> **源数据**
> 
> ```
> contract    instalment    amount
> 1           1             100
> 1           2             1000
> 2           1             100
> 3           1             1000
> 4           1             200
> 4           2             100
> 5           1             1000 
> ```

所以我需要，

> **结果**
> 
> ```
> contract    instalment    amount
> 1           2             1000
> 2           1             100
> 3           1             1000
> 4           1             200
> 5           1             1000 
> ```

我对 linq 的了解有限，而且我在项目方面遇到了困难。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:22:55.820

以下代码应为您提供预期的结果：

```
var data = new[]
{
    new { contract = 1, installment =  1, amount = 100},
    new { contract = 1, installment =  2, amount = 1000},
    new { contract = 2, installment =  1, amount = 100},
    new { contract = 3, installment =  1, amount = 1000},
    new { contract = 4, installment =  1, amount = 200},
    new { contract = 4, installment =  2, amount = 100},
    new { contract = 5, installment =  1, amount = 1000},
};

var result = from d in data
             group d by d.contract into g
             let highestInstallment = (from x in g
                                       orderby x.amount descending
                                       select x).First()
             select new
             {
                 contract = g.Key,
                 installment = highestInstallment.installment,
                 amount = highestInstallment.amount
             }; 
```

您分组`contract`，然后在每个组中检查最高金额。我添加了该`let`子句，因此您不必对`installment`and重复子查询`amount`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T15:10:39.650

为那些寻找极简示例的人修改接受的答案：

```
var data = new[]
{
    new { contract = 1, installment =  1, amount = 100},
    new { contract = 1, installment =  2, amount = 1000},
    new { contract = 2, installment =  1, amount = 100},
    new { contract = 3, installment =  1, amount = 1000},
    new { contract = 4, installment =  1, amount = 200},
    new { contract = 4, installment =  2, amount = 100},
    new { contract = 5, installment =  1, amount = 1000},
}; 
```

这给出了相同的结果（不需要额外的选择）：

```
var result1 = from d in data
            group d by d.contract
            into g
            select (from x in g
                    orderby x.amount descending
                    select x).First(); 
```

Linq方法链写的一样（一行代码）：

```
var result2 = data.GroupBy(d => d.contract).Select(g => g.OrderByDescending(x => x.amount).First() ); 
```

将接受的答案重写为方法链（无论如何都有很多代码，但让它在这里）

```
var result3 = data.GroupBy(d => d.contract)
                .Select(g => new {g, highestInstallment = (g.OrderByDescending(x => x.amount)).First()})
                .Select(@t => new
                {
                    contract = @t.g.Key,
                    installment = @t.highestInstallment.installment,
                    amount = @t.highestInstallment.amount
                }); 
```

# visual-studio-2010 - Visual Studio 2010 - 调试/构建问题

> ID：11949700
> 
> 赞同：6
> 
> 时间：2012-08-14T09:46:17.913
> 
> 标签：visual-studio-2010, build-process, visual-studio-debugging

我正在使用 Visual Studio Professional 2010 和 Team Foundation Server Express（测试版）。我的 VS 项目（C#.Net / WPF）已从 VS 2008（无 TFS）迁移到 VS 2010（有 TFS）。

每当我对我的代码应用更改并尝试调试我的应用程序时，我都会收到类似`This breakpoint will not be hit.`（德语：）`Der Haltepunkt wird momentan nicht erreicht. Der Quellcode weist Unterschiede zur Originalversion auf.`的消息，并且项目使用旧的可执行版本（最后一次成功构建的版本）启动。没有发生错误，代码正常，但也没有应用更改。

当我手动清理和重建我的项目时，一切正常 - 但必须解决这个问题吗？

* * *

**编辑：**我刚刚在我的 VS 解决方案中添加了一个新项目，并在 TFS 服务器上签入。使用这个新项目不会出现问题。即使我添加了我在上述项目中使用的相同依赖项，新项目的调试和构建也可以正常工作，而不会出现上述错误。

也许这些信息可以帮助您引导我找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:18:30.700

目前尚不清楚现有答案是否不够。我无法确切知道是什么导致了您的问题；但是，我可以详细说明这可能会出现的一些地方。

我通常看到的第一个领域是项目直接引用程序集时。您可以创建一个创建程序集的项目。另一个项目可能使用该程序集，您可以直接按程序集引用（而不是添加对“项目”的引用）。这使 VS 无法真正知道它需要首先“构建”引用的程序集，并且它有时会与调试符号 (PDB) 不同步。您可以在引用的属性中判断是否引用了项目或程序集（在解决方案资源管理器中展开引用，右键单击引用，然后选择属性）。引用的项目将没有特定版本属性，而程序集引用将。您有时也可以从 Project\Project Dependencies 中得知。如果您有对另一个项目生成的程序集的引用，但该项目不是 Project Dependencies 中的依赖项，则它可能是程序集引用。要解决此问题，您通常可以删除引用并添加对项目的引用。

我还发现有时断点会使调试器感到困惑。如果我有很多断点或者它们已经运行了很长时间，调试器有时会做一些奇怪的事情。如果我删除所有现有的断点（调试/删除所有断点）并重新应用它们，调试器通常会更快乐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:12:33.657

我的猜测是您将断点放在程序无法访问的地方。

前任：

```
const int x = 5;

if(this.x == 1)
   //do sth <--- breakpoint here 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T12:33:01.217

[你可以在这里](https://stackoverflow.com/questions/2155930/fixing-the-breakpoint-will-not-currently-be-hit-no-symbols-have-been-loaded-fo)找到答案。程序集可能在 GAC 或项目中，或者某些项目需要重新生成以再次生成用于调试的 pdb 文件。如果您不选择重建它可能会使用旧的 pdb 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T18:47:41.860

如果您正在运行混合模式应用程序（非托管本机 C++ 和托管 C#），请确保`Enable unmanaged code debugging`在 C# 应用程序的“属性”窗口中进行设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T03:54:03.593

你必须重建，没有更简单的方法。

需要重新创建程序数据库文件 (PDB)。您还应该将配置设置设置为调试。

这个[问题](https://stackoverflow.com/questions/2155930/fixing-the-breakpoint-will-not-currently-be-hit-no-symbols-have-been-loaded-fo)的第一个答案也必须有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-21T17:24:33.490

This happened to me when I started VS as an admin, and it also happened to me when the project is set to a different architecture than a DLL that I used in this project.

# php - drupal中的多文件PHP代码

> ID：11949702
> 
> 赞同：0
> 
> 时间：2012-08-14T09:46:22.487
> 
> 标签：php, drupal

我有一个应用程序分成 4 个 PHP 文件。应用程序的主要 PHP 代码和赢/输/退出页面。

当我在drupal上将代码实现到一个节点时，主PHP文件完全没有问题。当我单击退出时，链接到包含 exit.php 代码的其他节点，页面布局变得混乱。

如果您需要代码，请告诉我，包含 PHP 代码的 drupal 节点之间的链接似乎更有问题。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:03:07.827

听起来您几乎将 php 代码编写为一个独立的应用程序，然后您通过编写 PHP 将其包含在 drupal 节点中。是这样吗？

如果是这样，您为什么不选择将其编写为模块？

# php - Codeigniter 2.1 - 在 foreach 循环中使用爆炸

> ID：11949705
> 
> 赞同：0
> 
> 时间：2012-08-14T09:46:41.687
> 
> 标签：php, codeigniter

我很难用简单的方式解释这个问题，所以解释会很长。如果评论有用与否，用户可以投票（简单的是或否），当他这样做时，他的投票被发送到数据库 -> 表'user_vote'。

表**user_vote**有两列 - user_id 和容器。每个用户在此表中只有一行。当他投新票时，字段容器会更新。例如，用户对**id 为 205**的评论投了票，他投了**yes**，对**id 为 300**的评论投了**no**。表**user_vote**将如下所示：

**user_id->111；**

**容器->205-是，300-否**

这工作正常，直到这里的代码，我需要检查用户是否对特定评论进行了投票。这里的代码部分工作 - 问题如下：

用户是否投票了 3 次，如果评论的**id**匹配**$split[0]**它将一次写入**$text**并生成 2 组按钮，如果评论的**id**不匹配，它将生成 3 组按钮（**elseif**之后的部分工作正常）。

我做错了什么，如何以正确的方式编写代码？

```
<div class="zuta_strana_komentar_korisno" data-id="<?php echo $cmm['id_comment'] ?>">
    <?php if(isset($glas) && !empty($glas)) : 
    $br = explode(',', $glas->container);
    foreach($br as $br) :                                  
    $split = explode('-', $br);
    if($split[0] == $cmm['id_comment']) : ?>
    <?php 
    if($split[1] == 'yes') :
    $text = 'koristan.';
    else :
    $text = 'nekoristan.';
    endif;
    ?>
    <p>Ovaj komentar vam je bio <?php echo $text ?></p>
    <?php else :?>
    <p>Da li vam je ovaj komentar bio od pomoći?</p>
    <button role="yes">Da</button><button role="no">Ne</button>
    <?php 
    endif;
    endforeach;             
    elseif($this->session->userdata('is_logged_in') == TRUE && empty($glas)) : ?>
    <p>Da li vam je ovaj komentar bio od pomoći?</p>
    <button role="yes">Da</button><button role="no">Ne</button>
    <?php endif ?>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:01:20.207

您从根本上不正确地设计了您的数据库。良好的数据库设计不会在字段中使用逗号分隔的列表来存储信息。通过将数据存储在逗号分隔的列表中，您实际上取消了所有数据库的查询功能。使用表格，这就是为什么给你它们！

我建议创建表：`users`、、`comments`和`votes`

`users`表包含`id`, `username`... 在其他字段中

`comments`表包含`id`, `body`, `user_id`...以及其他字段

`votes`表包含`id`, `comment_id`, `user_id`, `yes_or_no`... 等字段

然后掌握如何正确使用[SQL 连接](http://en.wikipedia.org/wiki/Join_%28SQL%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:57:02.530

你所要做的就是改变

```
$br = explode(',', $glas->container);
foreach($br as $br) : 
```

到

```
$br_lines = explode(',', $glas->container);
foreach($br_lines as $br) : 
```

但是您确实需要首先将您的 PHP 逻辑与 HTML 分开。它看起来太可怕了，我的眼睛想要流血。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:16:22.927

试试这个代码：

```
<?php if(isset($glas) && !empty($glas)) {
    $br = explode(',', $glas->container);
    foreach($br as $b) {                                  
       $split = explode('-', $b);
       if($split[0] == $cmm['id_comment']) {
       ?>
       <p>Ovaj komentar vam je bio <?php echo ($split[1] == 'yes')?'koristan.':'nekoristan.'; ?></p>
       <?php } else {?>
       <p>Da li vam je ovaj komentar bio od pomoći?</p>
       <button role="yes">Da</button><button role="no">Ne</button>
       }
    }
} 
```

# c# - 在单独的窗口/选项卡中提交表单时显示两个 pdf 文档

> ID：11949708
> 
> 赞同：0
> 
> 时间：2012-08-14T09:46:50.923
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有 .NET MVC Web 应用程序。在我的页面上有一个表格可以选择要显示的 pdf 文档。我想在新窗口或标签中打开 pdf 文件。用户可以选择显示一个或两个 pdf 文件。我的表单将数据发布到控制器，但我不知道如何从控制器返回两个 pdf 并显示在单独的窗口/选项卡中。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:04:12.193

我以这种方式制作了类似的东西（但我使用 ReportViewer 构建了 pdf 服务器端）：

我的表单将数据发布到控制器操作（使用 ajax）

*   控制器操作读取发布的数据，据此查询数据库，并决定我必须返回多少个 pdf；
*   控制器操作保存在会话中，每个 pdf （由我的逻辑确定）使用不同的键，将数据传递给 ReportViewer；
*   控制器操作返回（到 ajax 调用的回调）一个数组，其中包含用于在会话中存储数据的所有键；
*   客户端，js 回调循环遍历返回的数组，并且对于每个项目，调用（它在不同的选项卡中打开一个链接）不同的控制器（其唯一职责是将 pdf 发送到请求）在查询字符串中传递它，该pdf的密钥；
*   PrintController 从会话中读取数据（使用收到的密钥），构建报告并在响应中发送它。

我认为您可以做类似的事情；我不明白您的 pdf 是如何构建的（它们是依赖于数据的还是服务器上预先存在的 pdf？），但是您可以保存 pdf 流或会话中的 pdf 路径，而不是像我这样的数据。

希望有所帮助；如果您认为我的解决方案可以为您工作并且您需要一些代码，我可以尝试从我的代码库中提取一些（在我的情况下还有其他问题，如果您需要，我必须重写代码......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:52:46.053

您可以让模型将文档的 url 写入 javascript 代码块

```
@if(model.ShowPDFs)
{

<script>
function ShowPDF()
{
    window.open('@model.PdfUrl1');
    @if(model.Open2Pdf)
    {
        window.open('@model.PdfUrl2');
    }
}

// opens the document after 3 seconds after the page has loaded
setTimeOut("ShowPDF()", 3000);

</script>

} 
```

# android - 对 PixelFormat 感到困惑

> ID：11949709
> 
> 赞同：14
> 
> 时间：2012-08-14T09:46:55.727
> 
> 标签：android, pixelformat

我对 Android 上的[PixelFormat感到困惑。](http://developer.android.com/reference/android/graphics/PixelFormat.html)

我的设备是摩托罗拉 Defy。

我有两个问题：

*   在 Android 2.3 上`getWindowManager().getDefaultDisplay().getPixelFormat()`返回**4**代表[RGB_565](http://developer.android.com/reference/android/graphics/PixelFormat.html#RGB_565)。据我所知，我的设备有*1600 万种*颜色，这意味着每个像素 3 个（或 4 个带 alpha 通道的）字节：

> ```
>  2^(8*3) = 2^24 = 16M 
> ```

但是`RGB_565`格式每个像素有 2 个字节（16 位），代表*65K*色：

> ```
>  2^(8*2) = 2^16 = 65K 
> ```

那么，为什么`getPixelFormat()`不返回每像素 3 个（或 4 个如 RGBA）字节的格式呢？是显卡驱动问题还是什么？我可以设置`PixelFormat`为[RGBA_8888](http://developer.android.com/reference/android/graphics/PixelFormat.html#RGBA_8888)（或模拟）吗？

*   在 Android 4.1（自定义 rom）上，`getPixelFormat()`返回**5**。但是这个值是无证的。它代表什么？实际上，在这种情况下效果与 constant 相同`4`。但是从[这个讨论](http://community.developer.motorola.com/t5/Android-App-Development-for/Android-Milestone-A853-getPixelFormat/td-p/8580)中我发现**5**代表`RGBA_8888`（但没有证据证明这个说法）。那么如何才能确定设备屏幕的*真实*格式呢？我还发现了一台 Android 2.2 上的中文设备，它也有`PixelFormat` **5**，但真正的格式是**4**（作为我的摩托罗拉）。

我用谷歌搜索了这些问题，一无所获。我唯一发现的是[nexus 7 也有 5 格式](https://stackoverflow.com/questions/8829943/how-to-find-the-best-pixelformat-for-an-android-surfaceview)。

**更新：**

我找到了方法[`getWindow().setFormat()`](http://developer.android.com/reference/android/view/Window.html#setFormat%28int%29)，但它实际上并没有改变主像素格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T08:00:50.993

我将在这次讨论中加两分钱，尽管我应该提前承认，我无法为您的所有问题找到确凿的答案。

> 那么，为什么`getPixelFormat()`不返回每像素 3 个（或 4 个如 RGBA）字节的格式呢？是显卡驱动问题还是什么？我可以设置 `PixelFormat`为[RGBA_8888](http://developer.android.com/reference/android/graphics/PixelFormat.html#RGBA_8888)（或模拟）吗？

我对你在这里确切地问什么感到有点困惑。的返回值`getPixelFormat()`只是一个整数，它提供了一种识别活动像素格式的方法；它并不意味着表示任何压缩成数字的数据（例如，与`MeasureSpec`）。不幸的是，我没有解释为什么返回的结果与您预期的不同。我最好的猜测可能是由于操作系统的决定，因为从硬件的角度来看似乎没有限制，或者本机实现中定义的常量与 Java 中的常量不匹配。如果摩托罗拉搞砸了定义，那么您返回像素格式的事实`4`并不一定意味着它真的是 RGB_565。

附带说明：实际上我之前在 Android 中遇到过未对齐的常量定义，尽管我目前不记得确切的位置......

只是为了确认一下，可能值得在运行时打印出像素格式的详细信息。如果确实定义了一个使用 Java`PixelFormat`值但不匹配的本机常量，那么您可能会以这种方式显示“真实”格式。使用该[`getPixelFormatInfo(int format, PixelFormat info)`](http://developer.android.com/reference/android/graphics/PixelFormat.html#getPixelFormatInfo%28int,%20android.graphics.PixelFormat%29)方法，它只是委托从本机实现中检索实际值。

> 在 Android 4.1（自定义 rom）上，getPixelFormat() 返回 5。但此值未记录在案。它代表什么？

如前所述，有时本地代码中定义的常量与 Java 中的常量不匹配，或者根本没有定义。大概就是这种情况。您必须进行一些挖掘才能找出它所代表的含义，但这相当简单：

```
/**
 * pixel format definitions
 */

enum {
    HAL_PIXEL_FORMAT_RGBA_8888          = 1,
    HAL_PIXEL_FORMAT_RGBX_8888          = 2,
    HAL_PIXEL_FORMAT_RGB_888            = 3,
    HAL_PIXEL_FORMAT_RGB_565            = 4,
    HAL_PIXEL_FORMAT_BGRA_8888          = 5,
    HAL_PIXEL_FORMAT_RGBA_5551          = 6,
    HAL_PIXEL_FORMAT_RGBA_4444          = 7,
    /* 0x8 - 0xF range unavailable */
    HAL_PIXEL_FORMAT_YCbCr_422_SP       = 0x10,     // NV16
    HAL_PIXEL_FORMAT_YCrCb_420_SP       = 0x11,     // NV21 (_adreno)
    HAL_PIXEL_FORMAT_YCbCr_422_P        = 0x12,     // IYUV
    HAL_PIXEL_FORMAT_YCbCr_420_P        = 0x13,     // YUV9
    HAL_PIXEL_FORMAT_YCbCr_422_I        = 0x14,     // YUY2 (_adreno)
    /* 0x15 reserved */
    HAL_PIXEL_FORMAT_CbYCrY_422_I       = 0x16,     // UYVY (_adreno)
    /* 0x17 reserved */
    /* 0x18 - 0x1F range unavailable */
    HAL_PIXEL_FORMAT_YCbCr_420_SP_TILED = 0x20,     // NV12_adreno_tiled
    HAL_PIXEL_FORMAT_YCbCr_420_SP       = 0x21,     // NV12
    HAL_PIXEL_FORMAT_YCrCb_420_SP_TILED = 0x22,     // NV21_adreno_tiled
    HAL_PIXEL_FORMAT_YCrCb_422_SP       = 0x23,     // NV61
    HAL_PIXEL_FORMAT_YCrCb_422_P        = 0x24,     // YV12 (_adreno)
}; 
```

[资料来源：（`hardware.h`第 121-148 行）](http://nv-tegra.nvidia.com/gitweb/?p=android/platform/hardware/libhardware.git;a=blob;f=include/hardware/hardware.h;h=d316ccf1828d7eb20cdd170fd702ae418b12d852;hb=373a9c6efebc97ade940dc5996f24992cda450c7)

如果您将这些值与 中定义的值进行比较`PixelFormat.java`，您会发现它们相加得非常好（应该如此）。也说明了神秘的含义`5`，即BGRA_8888；RGBA_8888 的变体。

顺便说一句，您可能想尝试使用上述`getPixelFormatInfo(...)`方法通过`5`作为标识符传入来确定此整数值的像素格式详细信息。看看会返回什么会很有趣。我希望它显示与 BGRA_8888 定义匹配的值，因此类似于摩托罗拉板上链接讨论中给出的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:54:32.607

根据motodev 论坛上的这个帖子，返回值 5 对应于 RGBA_8888 [。](http://community.developer.motorola.com/t5/Android-App-Development-for/Android-Milestone-A853-getPixelFormat/td-p/8580)该线程指出 PixelFormat 的文档不完整且已过时，并[链接到为其](http://code.google.com/p/android/issues/detail?id=371)提交的错误。~~但是，该错误的链接现在返回 404。~~

此外，我似乎在[PixelFormat 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/graphics/PixelFormat.java?av=f)(4.1) 中找不到任何支持该声明的东西，因为那里 RGBA_8888 被赋值为 1。

我的猜测是这个值特定于摩托罗拉和其他一些设备，因为我在 Nexus 7 和 Galaxy Nexus 上看到了相同的输出。

编辑：我给谷歌员工发了一封电子邮件，他告诉我 5 对应于 BGRA_8888，如 MH 的回答和我之前链接的摩托罗拉论坛帖子所示。他建议我为文档问题提交一个错误，[我已经这样做了](http://code.google.com/p/android/issues/detail?id=36582&thanks=36582&ts=1345654027)。请为错误报告加注星标，以便尽快采取行动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T11:20:56.610

RGBA_8888 对应于 1，如下面的附件所示。

如果您转到与 mPixelFormat 相关的代码，您会发现以下内容。

```
// Following fields are initialized from native code
private int mPixelFormat; 
```

这意味着由于某种原因，由于操作系统决定而不是硬件功能，您的设备被视为 RGB_565。事实上，这让我感到好奇。

有趣的是，对 Galaxy Nexus 和 Nexus 7 的描述并没有太多共同之处。[GN](http://en.wikipedia.org/wiki/Galaxy_Nexus) [N7](http://en.wikipedia.org/wiki/Nexus_7)

```
public static final int RGBA_8888   = 1;
public static final int RGBX_8888   = 2;
public static final int RGB_888     = 3;
public static final int RGB_565     = 4;

@Deprecated
public static final int RGBA_5551   = 6;
@Deprecated
public static final int RGBA_4444   = 7;
public static final int A_8         = 8;
public static final int L_8         = 9;
@Deprecated
public static final int LA_88       = 0xA;
@Deprecated
public static final int RGB_332     = 0xB; 
```

# c# - FaceBook 与 Asp.Net 网站的集成以获取最近的活动

> ID：11949712
> 
> 赞同：-2
> 
> 时间：2012-08-14T09:47:13.643
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

我怎样才能创建类似于雅虎在 www.news.yahoo.com 中所做的类似功能？我的网站有很多文章。当用户从我的网站登录到 FB 时，他在我的网站中访问的页面的链接应显示在他的 FB 最近活动中。如何 ？

![在此处输入图像描述](../Images/7f645349ecbfecbacd4d6d8bb02ee3cc.png)

```
Functionality : 

Your Activity : Shows the News that has been read after logged in.

It Posts in Face Book activities.

Social ON : To allow the script to post in FB

Social OFF : To not allow the script to post in FB 
```

我试图创建一个 facebook 应用程序并获得了 AppKey。但它没有提供我需要的功能。我怎样才能做到这一点 ？

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Sample4.aspx.cs" Inherits="Sample4" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
<div id="fb-root"></div>
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script>
    <div id="Div1"></div>
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APPKEY";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script>
    <div id="Div2"></div>
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APPKEY";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script>
    <form id="form1" runat="server">
    <div>
    <div class="fb-activity" data-width="300" data-height="300" data-header="false" data-colorscheme="light" data-linktarget="_blank" data-recommendations="false"></div>
    </div>
    <div class="fb-like" data-href="http://localhost:27531/FaceBook-Integration/Sample4.aspx" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true" data-font="tahoma"></div>
  <div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:15:26.837

> 他在我的网站上访问的页面的链接应该显示在他的 FB 最近活动中。如何 ？

熟悉[Open Graph](https://developers.facebook.com/docs/opengraph/)概念，并阅读有关如何在您的应用程序中使用 Open Graph 操作的文档。

> 我试图创建一个 facebook 应用程序并获得了 AppKey。但它没有提供我需要的功能。我怎样才能做到这一点 ？

通过实现您希望您的应用程序具有的功能。

说真的，这个问题在这里要回答的范围很广。熟悉 API 文档和基本概念，然后从那里开始。

# ruby - 解析大文件（10+gb）并将内容写入另一个文件

> ID：11949714
> 
> 赞同：1
> 
> 时间：2012-08-14T09:47:15.573
> 
> 标签：ruby, file, parsing, io

我正在尝试使用[Sphinx 搜索服务器](http://sphinxsearch.com/)来索引一个非常大的文件（大约 14gb）。该文件以空格分隔，每行一个条目。

为了能够将它与 Sphinx 一起使用，我需要向 Sphinx 服务器提供一个 xml 文件。我怎样才能在不杀死我的电脑的情况下做到这一点？

什么是最好的策略？我应该尝试将主文件拆分为几个小文件吗？最好的方法是什么？

注意：我是用 Ruby 做的，但我完全愿意接受其他提示。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:55:10.483

我认为主要思想是逐行解析主文件，同时生成结果 XML。每次它变得足够大时，就可以将它喂给狮身人面像。冲洗并重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:00:15.097

你需要做什么解析？如果转换一次仅限于输入中的一行并且不太复杂，我会使用[awk](http://en.wikipedia.org/wiki/AWK)而不是 Ruby ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:20:24.460

我讨厌那些在提出问题后不写解决方案的人。所以我会尽量不要成为他们中的一员，希望它会对某人有所帮助。

我向 File 类添加了一个简单的读取器方法，然后使用它根据我选择的块大小循环文件。实际上很简单，就像 Sphinx 的魅力一样。

```
class File

  # New static method
  def self.seq_read(file_path,chunk_size=nil)
    open(file_path,"rb") do |f|
      f.each_chunk(chunk_size) do |chunk|
        yield chunk
      end
    end
  end

  # New instance method
  def each_chunk(chunk_size=1.kilobyte)
    yield read(chunk_size) until eof?
  end

end 
```

然后像这样使用它：

```
source_path = "./my_very_big_file.txt"
CHUNK_SIZE  = 10.megabytes
File.seq_read(source_path, CHUNK_SIZE) do |chunk|
  chunk.each_line do |line|
    ...
  end
end 
```

# jsp - 在 JSP 中启用浏览器缓存

> ID：11949718
> 
> 赞同：1
> 
> 时间：2012-08-14T09:47:30.570
> 
> 标签：jsp, http-headers, jboss7.x, browser-cache, developer-tools

如何定义可缓存页面的内容？我正在使用 Google Chrome 审核功能，它告诉我：

```
The following resources are explicitly non-cacheable. Consider making them cacheable if possible. 
```

我创建了一个新`Filter`的，每个请求都会调用它：

```
public class CachingFilter implements Filter {

    public void init(FilterConfig filterConfig) {
    }

    public void destroy() {
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

    HttpServletResponse httpResponse = (HttpServletResponse) response;

        httpResponse.setHeader("Cache-Control", "private");
        httpResponse.setDateHeader("Expires", System.currentTimeMillis() + 604800000L); // one week
        httpResponse.setDateHeader("Max-Age", System.currentTimeMillis() + 604800000L);

        chain.doFilter(request, response);
    }
} 
```

这`Filter`适用于所有 JavaScript 文件，因为它们不再出现在 Google 审计工具中。但我仍然得到一个图像列表和主 JSP 文件。我还必须设置哪些其他标头才能为它们启用缓存？

这是`Request-Header`图像的：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:entries=20; JSESSIONID=fSSOjMOknqW4yk0bH1Nxy2Ea.undefined
Host:localhost:8080
If-Modified-Since:Mon, 13 Aug 2012 12:52:32 GMT
If-None-Match:W/"1685-1344862352945"
Referer:http://localhost:8080/SSIS2_JBoss7/View/PackageManagement/Packages.jsp
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1 
```

和`Response-Header`图像：

```
Cache-Control:private
Date:Thu, 16 Aug 2012 08:33:05 GMT
ETag:W/"1685-1344862352945"
Expires:Thu, 23 Aug 2012 08:33:05 GMT
Max-Age:Thu, 23 Aug 2012 08:33:05 GMT
Pragma:No-cache 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:51:52.470

我必须添加这一行以缓存所有图像和主 JSP 文件：

```
httpResponse.setHeader("Pragma", "private"); 
```

# faye - Faye 在生产中不发送消息

> ID：11949722
> 
> 赞同：3
> 
> 时间：2012-08-14T09:47:42.390
> 
> 标签：faye

我通过 PrivatePub gem 使用 faye 向我的客户发布消息。它在我的机器上的开发中运行良好，但在我的生产服务器上，消息永远不会发送给客户端。

我很确定 faye 设置正确，因为它从服务器请求 faye.js 没有问题，并且它没有在客户端记录任何错误。我也没有在服务器上看到任何错误，所以我不知道为什么它不向客户端发送消息。

# android - 切换布局会导致图像背景崩溃

> ID：11949724
> 
> 赞同：0
> 
> 时间：2012-08-14T09:47:48.957
> 
> 标签：android, android-layout, android-intent

> **可能重复：**
> [切换 xml 布局会导致 Android 崩溃](https://stackoverflow.com/questions/11870254/switching-xml-layout-causes-crash-in-android)

我有许多带有图像背景的 xml 布局和`Buttons`. 我需要切换布局，所以我多次使用此功能 `setContentView(R.layout...)`；

`setContentView()`由于以前的布局，它会在 4\. 或 5\. call of 导致崩溃...使用 of`System.gc();` `Runtime.getRuntime().gc();`

没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:23:22.643

我认为您可以根据需要在主布局中添加和删除视图（其他 xml 布局），而不是每次都为活动设置内容视图。例如

```
main_layout.addView(view); 
```

在添加其他视图之前，您必须删除如下视图

```
main_layout.removeAllViewsInLayout(); 
```

希望能帮助到你。

# mongodb - SaaS 可能的 mongo 架构

> ID：11949729
> 
> 赞同：1
> 
> 时间：2012-08-14T09:48:08.800
> 
> 标签：mongodb, saas

我正在创建一个平台，客户（用户）来自不同的组织。因此，我想根据他们所属的组织将他们的数据完全分开。您如何建议将此类数据存储在 mongo db 中？在哪个级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:46:55.823

您是出于安全原因（即合规性或法规）还是仅仅为了管理/易用性而将数据分开？

如果是前者，我至少会使用单独的数据库，如果不是单独的 MongoDB 实例的话。单独的实例使您能够通过类似的方式在 IP 级别执行隔离，`iptables`以便您可以将不同的实例绑定到不同的 IP 范围，代表不同的组织假设他们将访问数据。

如果是后者，我仍然会使用单独的数据库，因为它使您能够[在数据库级别拥有不同的用户，](http://www.mongodb.org/display/DOCS/Security+and+Authentication)并且从[版本 2.2](http://docs.mongodb.org/manual/release-notes/2.2/)开始，并发将[在数据库级别](https://jira.mongodb.org/browse/SERVER-4328)（因此没有共享写锁，因为例如，如果您在集合级别将其拆分出来，您将拥有）。

作为仅供参考，这里有一些关于 MongoDB 中模式设计的附加信息 -

*   [架构设计](http://www.mongodb.org/display/DOCS/Schema+Design)

*   [Kyle Banker 的模式设计演示](http://www.slideshare.net/kbanker/mongodb-schema-design)

*   [来自客户的架构设计博客](http://blog.10gen.com/post/23237721457/blogging-contest-mongodb-schema-design)

*   [MongoSF2012：mongodb-schema-design-insights-and-tradeoffs](https://www.10gen.com/presentations/mongosf-2012/mongodb-schema-design-insights-and-tradeoffs)

*   实际上，[上周举行了一个架构介绍网络研讨会](https://www.10gen.com/events/webinar/intro-to-schema-design)，您现在可以收听了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:12:26.430

您可以为每个组织创建一个文档，并将用户的详细信息放入根文档内的子文档中。

如果整体用户的配置文件太大以至于不适合 MongoDB 文档大小 (16 mg)，那么您可以使用不同的方法，为每个用户创建一个文档并添加一个引用该组织的字段。

# sql - clustered index on a column which has duplicate values

> ID：11949731
> 
> 赞同：0
> 
> 时间：2012-08-14T09:48:12.467
> 
> 标签：sql, sql-server-2008

I have a table with no index. I need to add a clustered index on one column but the table does not have any column having unique data.Will this allow me to add clustered index on a duplicate column?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:51:43.213

A clustered index does not enforce uniqueness unless you specify the keyword UNIQUE.

```
CREATE CLUSTERED INDEX bob ON foo( bar ) 
```

is not the same as

```
CREATE UNIQUE CLUSTERED INDEX bob on foo( bar ) 
```

You may be thinking of a PRIMARY KEY constraint in a CREATE TABLE statement. In this example:

```
CREATE TABLE foo ( bar PRIMARY KEY ) 
```

ASE will create a UNIQUE, CLUSTERED index on bar.

# c++ - C++ 并将枚举值写入 Windows 注册表

> ID：11949738
> 
> 赞同：1
> 
> 时间：2012-08-14T09:48:42.757
> 
> 标签：c++, windows, winapi

我正在编写如下函数：

```
bool abc::GetLoggingStatus() {
    //true or false is returned
    int value;
    if (regKey->HasValue("LoggingStatus")) {
        regKey->QueryValue("LoggingStatus", &value);
        if (value == 1)
            return true; //no logging possible
        else
            return false;
    }
    regKey->SetValue("LoggingStatus", 1);
    return true;
} 
```

日志记录级别定义为：

```
typedef enum {
    Entry,
    Exit,
    Debug,
    Warning,
    Notification,
    Error
} TYPE; 
```

如果我选择 1 需要什么，则必须显示日志记录级别，即调试、错误...在 regedit 中，如果为 0，则不应显示任何内容并禁用日志记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:09:37.320

您无法在 regedit 中创建下拉菜单，但您可以创建一个名为`LoggingLevel`. `LoggingStatus`如果为 0 ，则忽略此条目。是`LoggingLevel`定义级别的字符串。

如果您想将此字符串转换回枚举，最简单的方法是创建一个从字符串到您的 Enum 类型的映射：

```
std::map<std::string, TYPE> typeMap;
typeMap["Warning"] = Warning;
... 
```

在您的代码中，您查询日志记录级别：

```
char* level;
regKey->QueryValue("LoggingLevel", level);
TYPE theLevel = typeMap[level]; 
```

当然，您需要进行适当的错误检查。

**编辑**

您应该添加两个函数来获取日志设置，`shouldLog()`以及`getLevel()`. 日志函数将如下所示：

```
void log(Logger* logger, TYPE type, string sClassName, string sMethodName, string sMessage = "") { 
if (!logger || !abc::shouldLog()) {
   return;
}

TYPE curLevel = abc::getLevel();
bool shouldLog = false;

if (type == Warning && (curLevel == All || curLevel == Warning) ...) {
  shouldLog = true;
}

if (shouldLog) {logger->WriteEntry(sClassName, sMethodName); }

} 
```

如果您想避免复杂的 if 结构，您还可以尝试将枚举映射到一个值并进行比较。例如，Warning = 1 和 ALL = 0。然后您可以检查是否`curLevel < type`要查看记录器是否应该记录。

# jquery - Jquery DOM修改不保留在前进和后退

> ID：11949740
> 
> 赞同：0
> 
> 时间：2012-08-14T09:48:43.903
> 
> 标签：jquery, ruby-on-rails

我能够在用户操作上成功更新 DOM 元素（按钮） - 单击“添加收藏夹”按钮时，收藏夹被添加并且按钮变为“删除收藏夹”。

按钮更新如下：

```
$("#favorite_box").html("<%= escape_javascript(render(:partial => 'favorite' )) %>") 
```

部分是：

```
<% if current_user.favorites("Style").where(:favoritable_id=>@style.id).empty? == true
%>
  <%= link_to "<i class = \"icon-star-empty\"></i> Add Favorite".html_safe, "/fav_style/#{@style.id}", :remote=>true %>
<% else %>
  <%= link_to "<i class = \"icon-star\"></i> Delete Favorite".html_safe, "/delete_fav_style/#{@style.id}", :remote=>true %>
<% end %> 
```

**所以问题是，当我点击另一个链接，然后点击后退按钮时，该按钮反映的是初始加载状态，并不反映上次 Jquery DOM 更新。**

谢谢你的帮助

# python - django vars in ram

> ID：11949741
> 
> 赞同：5
> 
> 时间：2012-08-14T09:48:46.750
> 
> 标签：python, django, global-variables

I am implementing a really lightweight Web Project, which has just one page, showing data in a diagram. I use Django as a Webserver and d3.js as plotting routine for this diagram. As you can imagine, there are just a few simple time series which have to be responded by Django server, so I was wondering if I simply could hold this variable in ram. My first test was positive, I had something like this in my views.py:

```
X = np.array([123,23,1,32,123,1])

@csrf_exempt
def getGraph(request):
    global X
    return HttpResponse(json.dumps(X)) 
```

Notice, `X` is updated by another function every now and then, but all user access is read-only. Do I have to deal with

1.  security issues by defining a global variable?
2.  inconsistencies in general?

I found [a thread](https://stackoverflow.com/questions/2680902/python-django-global-variables) discussing global variables in Django, but in that case, the difficulty is of handling multiple write-access.

To answer potential questions on why I don't want store data in database: All data I got in my `X` is already stored in a huge remote database and this web app just needs to display data.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:51:00.467

Storing it in a variable does indeed have threading implications (and also scalibility - what if you have two Django servers running the same app?). The advice from the Django community is *don't*!.

This sounds like a good fit for the Django cache system though. Just cache your `getGraph` view with `@cache_page` and the job is done. No need to use memcache, the built-in in-memory memory-cache cache-backend^* will work fine. Put a very high number as the time-out on the cache (years).

This way you are storing the HTTP response (JSON) not the value of X. But from your code sample, that is not a problem. If you need to re-calculate X you need to re-calculate the JSON, and if you need to re-calculate the JSON you will need to re-calculate X.

[https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/)

* * *

¹ or just 'built-in memory backend', I couldn't resist

# c# - Entity Framework 多租户共享数据架构：单列，多外键

> ID：11949742
> 
> 赞同：8
> 
> 时间：2012-08-14T09:48:46.533
> 
> 标签：c#, entity-framework, data-modeling, multi-tenant

我有以下数据结构：

```
//property Notification
abstract class BindableBase { }
//base class for all tenant-scoped objects
abstract class TenantModelBase : BindableBase 
{ 
  int TenantId;
} 

abstract class Order : TenantModelBase 
{
   Customer Customer; //works: mapped using TenantId and CustomerId
   Product Product; //again, works with TenantId and ProductId
   string ProductId;
   string CustomerId;
}
class Customer: TenantModelBase 
{
   string CustomerId; 
}

class Product  : TenantModelBase 
{
   string ProductId;
}

class SpecialOrder : Order
{
    OtherClass OtherClass; //this fails!, see below
    string OtherClassId;
}
class SuperSpecialOrder : SpecialOrder {  }

class OtherClass  : TenantModelBase 
{
    string OtherClassId;
} 
```

我收到以下错误：

> 外键组件“TenantId”不是“SpecialOrder”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的原始属性。

使用 Fluent Api 配置时发生错误：

```
 config.HasRequired(p => p.OtherClass)
            .WithMany(oc => oc.SpecialOrders)
            .HasForeignKey(p => new {  p.TenantId, p.OtherClassId}); 
```

如果没有`OtherClass`参考，`SpecialOrder`我可以毫无问题地自由创建对象（包括`SpecialOrder`等`SuperSpecialOrder`）。

有人知道发生了什么吗？我在这里迷路了:(

**编辑** 我在其他问题中看到人们从表中删除 TenantId，这不是一个选项，因为主键在租户之间不是唯一的，我们希望保留共享数据架构。

我知道解决方法是在 SpecialOrder 类中有第二个 TenantId，但这对我来说似乎不合逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T03:18:00.173

您是否尝试进行 TPT，其中有一个单独的订单/租户表？如果是这样，我认为另一张海报是正确的，并且 EF 中存在错误。

如果客户/产品是您基于映射的类，这可能对您有用。

当我创建您的数据库时发生在我身上的事情是它试图映射抽象的 Order 类。

通过增加：

```
modelBuilder.Ignore<Order>(); 
```

由于 MapInheritedProperties，构建器保留了映射的属性，但没有创建表以便正确创建所有 FK。

我假设您想要为每个类使用单独的表，例如上面的相关帖子，并且不映射您的抽象表。

整个模型：

```
 public abstract class BindableBase { }
   //base class for all tenant-scoped objects
   public abstract class TenantModelBase : BindableBase
   {
      [Key]
      public virtual int TenantId { get; set; }
   }

   public abstract class Order : TenantModelBase
   {
      public Customer Customer { get; set; } //works: mapped using TenantId and CustomerId
      public Product Product { get; set; } //again, works with TenantId and ProductId
      public string ProductId { get; set; }
      public string CustomerId { get; set; }
   }
   public class Customer : TenantModelBase
   {
      [Key]
      public string CustomerId { get; set; }
   }

   public class Product : TenantModelBase
   {
      [Key]
      public string ProductId { get; set; }
   }

   public class SpecialOrder : Order
   {
      [Key]
      public int SpecialOrderId { get; set; }
      public OtherClass OtherClass { get; set; } //this fails!, see below
      public string OtherClassId { get; set; }
   }
   public class SuperSpecialOrder : SpecialOrder { }

   public class OtherClass : TenantModelBase
   {
      public string OtherClassId { get; set; }
      public ICollection<SpecialOrder> SpecialOrders { get; set; }
   }

   public class Model : DbContext
   {
      public DbSet<Customer> Customers { get; set; }
      public DbSet<Product> Products { get; set; }
      public DbSet<SpecialOrder> SpecialOrders { get; set; }
      public DbSet<SuperSpecialOrder> SuperSpecialOrders { get; set; }

      public DbSet<OtherClass> OtherClasses { get; set; }

      protected override void OnModelCreating( DbModelBuilder modelBuilder )
      {
         modelBuilder.Entity<OtherClass>()
            .HasKey( k => new { k.TenantId, k.OtherClassId } );

         modelBuilder.Entity<Customer>()
            .HasKey( k => new { k.TenantId, k.CustomerId } );

         modelBuilder.Entity<Product>()
            .HasKey( k => new { k.TenantId, k.ProductId } );

         modelBuilder.Entity<SpecialOrder>()
            .Map( m =>
                     {
                        m.MapInheritedProperties();
                        m.ToTable( "SpecialOrders" );
                     } );

         modelBuilder.Entity<SpecialOrder>().HasKey( k => new { k.TenantId, k.SpecialOrderId } );

         modelBuilder.Entity<SuperSpecialOrder>()
          .Map( m =>
          {
             m.MapInheritedProperties();
             m.ToTable( "SuperSpecialOrders" );
          } )
          .HasKey( k => new { k.TenantId, k.SpecialOrderId } );

         modelBuilder.Entity<SpecialOrder>()
          .HasRequired( p => p.OtherClass )
          .WithMany( o => o.SpecialOrders )
          .HasForeignKey( p => new { p.TenantId, p.OtherClassId } );

         modelBuilder.Entity<Order>()
            .HasRequired( o => o.Customer )
            .WithMany()
            .HasForeignKey( k => new { k.TenantId, k.CustomerId } );

         modelBuilder.Entity<Order>()
          .HasRequired( o => o.Product )
          .WithMany()
          .HasForeignKey( k => new { k.TenantId, k.ProductId } );

         modelBuilder.Ignore<Order>();

      }
   } 
```

创建的数据库： ![在此处输入图像描述](../Images/548abd79d8118a007e93840286fe9814.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:46:54.740

我在这里猜测一下，因为我在 Julie Lermann 使用 ef4.1 所做的博客中看到了一个不寻常的错误。查询中的命名空间导致了一个问题。

只是为了快速测试此错误是否是您的问题，请将所有对象的名称空间更改为相同。命名空间 xyz // 与 dbcontext 和实体相同 public class OtherClass{}

快速测试。如果不是，很抱歉浪费您的时间。

# c++ - 圆柱体上的纹理映射

> ID：11949745
> 
> 赞同：3
> 
> 时间：2012-08-14T09:48:55.970
> 
> 标签：c++, opengl, glsl, textures, texture-mapping

我想将统一的棋盘纹理应用于高度`h`和半半径的圆柱表面`(a,b)`。

我已经实现了这个着色器：

**顶点着色器：**

```
varying vec2 texture_coordinate;
float twopi = 6.283185307;
float pi=3.141592654;

float ra = 1.5;
float rb= 1.0;

void main()
{
// Transforming The Vertex
gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
// -pi/2 < theta < pi/2
float theta =  (atan2( rb*gl_Vertex.y , ra*gl_Vertex.x)+pi*0.5)/pi;

// Passing The Texture Coordinate Of Texture Unit 0 To The Fragment Shader
    texture_coordinate = vec2(  theta , -(-gl_Vertex.z+0.5) );
} 
```

**片段着色器：**

```
varying vec2 texture_coordinate;
uniform sampler2D my_color_texture;
void main()
{
    // Sampling The Texture And Passing It To The Frame Buffer
    gl_FragColor = texture2D(my_color_texture, texture_coordinate);
} 
```

在客户端，我指定了以下选项：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT); 
```

我的纹理是 3768x1200 棋盘格。现在我希望应用纹理以保持棋盘格均匀（没有拉伸的正方形），但我仅在曲面的较少弯曲部分获得正确的纵横比，而在弯曲较多的部分，瓷砖被拉伸。

我想了解如何应用纹理而不扭曲和拉伸它，也许是通过重复纹理而不是拉伸它。

![在第一张图片中，弯曲度较小的部分上的瓷砖是方形的](../Images/60ca1fd337758ddd8405495d7c65edea.png)

![而在曲率较高的地方，它们会被拉伸得更多](../Images/d1556673d8de3624897546f895c67420.png)

我也有纹理边界奇怪闪烁的问题，两个边界相交的地方，如何解决（可以在第二张图中看到）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:42:15.233

您可以修改纹理坐标以将其在对象上“缩小”一点。你不能做的是将纹理坐标参数化为非线性缩放。

所以，选项是：

1.  量化采样，修改纹理坐标以更好地适应非圆形（*动态，但使用低多边形镶嵌时质量较低；但这是最简单的实现解决方案*）。
2.  使用片段着色器非线性缩放纹理坐标（*可能有点复杂，但动态并给出相当好的结果，具体取决于纹理大小、使用的过滤和纹理内容（**！**）*）
3.  修改纹理（*静态解决方案 - 仅适用于给定的 Ra/Rb 比率。但是，质量将是最好的*）。

至于边界上的闪烁，您必须为您的纹理生成 mipmap。

如果您需要更多信息，请与我们联系。

# android - 无法在 Android 的单声道选项卡之间切换

> ID：11949749
> 
> 赞同：0
> 
> 时间：2012-08-14T09:49:11.967
> 
> 标签：android, for-loop, mono

我有两个片段和一个活动。ChatFragment 和 UserListFragment。ChatActivity 是启动活动，我在其中编写了愚蠢的代码

```
protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            SetContentView(Resource.Layout.QChatLayout);

            var newFragment = new UserFragment(this, this);
            var ft = FragmentManager.BeginTransaction();
            ft.Add(Resource.Id.Frame_container, newFragment);
            ActionBar.NavigationMode = ActionBarNavigationMode.Tabs;
            var homeTab = ActionBar.NewTab();

            homeTab.SetTabListener(
                new TabListener<UserFragment>(newFragment));
            homeTab.SetText("Users");

            // Add the new tab to the action bar
            ActionBar.AddTab(homeTab);

            ft.Commit();
        } 
```

它使用 UserFragment 显示可用用户列表当我单击其中一个用户时，chatt 窗口会在新选项卡中打开，这只是 ChatFragment 要打开新窗口，我在 ActionBar 中添加选项卡

```
User user = GetUserByName(userName);
                ChatFragment chatFragment = null;
                Fragment fragment = FragmentManager.FindFragmentByTag(user.Name);
                var ft = FragmentManager.BeginTransaction();
                if (fragment == null)
                {
                    chatFragment = new ChatFragment(context, activity);
                    chatFragment.User = user;
                    chatFragment.CurrentUser = Global.Host.Username;
                    Global.ChatWindows.Add(chatFragment);
                    ft.SetBreadCrumbTitle(user.Name);
                    ft.Add(Resource.Id.Frame_container, chatFragment, user.Name);
                   var homeTab = this.activity.ActionBar.NewTab();

        homeTab.SetTabListener(
            new TabListener<ChatFragment>(fragment));
        homeTab.SetIcon(Resource.Drawable.QChatOffline);
        homeTab.SetText(userName);

        // Add the new tab to the action bar
        this.activity.ActionBar.AddTab(homeTab);                    }
                else
                {
                    chatFragment = (ChatFragment)fragment;
                }

                ft.Commit();
                chatFragment.ShowMessage(String.Format("{0} is {1}.", user.Name, m_chatWindowManager.GetStatusText(user.Status)), MessageType.Status); 
```

我用过 tablistner 类：

```
public class TabListener<T> : Java.Lang.Object, ActionBar.ITabListener
        where T : Fragment, new()
    {
        private T _fragment;

        /// <summary>
        /// initializes a new instance of the tab listener
        /// </summary>
        public TabListener()
        {
            _fragment = new T();
        }

        /// <summary>
        /// Initializes a new instance of the tab listener
        /// </summary>
        /// <param name="fragment"></param>
        public TabListener(T fragment)
        {
            _fragment = fragment;
        }

        /// <summary>
        /// Handles the reselection of the tab
        /// </summary>
        /// <param name="tab"></param>
        /// <param name="ft"></param>
        public void OnTabReselected(ActionBar.Tab tab, FragmentTransaction ft)
        {

        }

        /// <summary>
        /// Adds the fragment when the tab was selected
        /// </summary>
        /// <param name="tab"></param>
        /// <param name="ft"></param>
        public void OnTabSelected(ActionBar.Tab tab, FragmentTransaction ft)
        {
            //ft.Add(Resource.Id.Frame_container, _fragment, typeof(T).FullName);
            //int index = Global.ChatWindows.FindIndex(c => c.User.Name == tab.Tag.ToString());
            //Activity.ActionBar.SelectTab(Activity.ActionBar.GetTabAt(index + 1));
            //ft.Show(_fragment);
            //tab.Select();
            //tab.Notify();
        }

        /// <summary>
        /// Removes the fragment when the tab was deselected
        /// </summary>
        /// <param name="tab"></param>
        /// <param name="ft"></param>
        public void OnTabUnselected(ActionBar.Tab tab, FragmentTransaction ft)
        {
            //ft.Remove(_fragment);
            //ft.AddToBackStack(tab.Tag.ToString());
        }
    } 
```

我应该假设在 OnTabSelected 和 Deselected 中编写什么代码。我无法在操作栏中的选项卡之间切换。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:37:03.773

事情实际上很简单（我正在使用 API 级别 14）并且要记住它是我调用的 listener 类`SimpleTabListener`。

```
 public void OnTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        fragmentTransaction.Add(Resource.Id.fragment_container, fragment, typeof(T).Name);
    }

    public void OnTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        fragmentTransaction.Remove(fragment);
    } 
```

我对您的问题很感兴趣，因为我认为选项卡切换无法正常工作，如 android 教程所示。事实上，我在更新选项卡视图时犯了一个错误，并且在错误的方向上搜索解决方案时浪费了几个小时。我在stackoverflow上看到了您关于标签的其他问题，我认为您处于类似情况;-)。

编辑：事实上，从 android 3.2 开始，在切换选项卡时似乎是一个更好的主意，因为片段保留在 FragmentManager 中并删除了视图。以前的方法是：

```
 public void OnTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        // Allows the view to be refreshed
        fragmentTransaction.Detach(fragment);
        fragmentTransaction.Attach(fragment);          
    }

    public void OnTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        if (fragment == null)
        {
            fragment = Fragment.Instantiate(context, typeof(T).Namespace.ToLower() + "." + typeof(T).Name);
            fragmentTransaction.Add(Resource.Id.fragment_container, fragment);
        }
        else
        {
            fragmentTransaction.Attach(fragment);
        }
    }

    public void OnTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        if (fragment != null)
        {
            fragmentTransaction.Detach(fragment);
        }
    } 
```

[这篇博](http://daniel-codes.blogspot.fr/2012/06/fragment-transactions-reference.html)文对这个主题非常有趣。

# c# - TCP/IP 消息成帧

> ID：11949753
> 
> 赞同：4
> 
> 时间：2012-08-14T09:49:21.927
> 
> 标签：c#, vb.net, sockets, networking, tcp

我制作了一个 TCP/IP 服务器/客户端，它是异步的，但它连接了消息。我如何正确地在开始时添加一个标题，然后在最后使用一个字符串生成器来取消连接完整的消息。

**服务器读取消息：**

```
 Private Sub ReadCallback(ByVal result As IAsyncResult)
    Try
        allDone.Set()
        Dim success As Boolean = result.AsyncWaitHandle.WaitOne(500, True)
        If success Then
            Dim client As ServerClient = TryCast(result.AsyncState, ServerClient)
            If client Is Nothing Then
                Return
            End If
            Dim networkStream As NetworkStream = client.NetworkStream
            Dim read As Integer = networkStream.EndRead(result)
            If read = 0 Then
                SyncLock Me.Clients
                    Me.Clients.Remove(client.ClientID)
                    Return
                End SyncLock
            End If
            If client.NetworkStream.CanRead Then

                dataString.Append(Me.Encoding.GetString(client.buffer, 0, read))

                networkStream.BeginRead(client.buffer, 0, client.buffer.Length, AddressOf ReadCallback, client)
                allDone.WaitOne(500, True)
            End If
        End If
    Catch ex As IO.IOException
        Dim client As ServerClient = TryCast(result.AsyncState, ServerClient)
        SyncLock Me.Clients
            Me.Clients.Remove(client.ClientID)
            Return
        End SyncLock
    Catch ex As Exception
        If Not Me.tcpListener.Server.Connected Then
            Return
        End If
    End Try
End Sub 
```

**客户端写消息：**

```
 Public Function Write(value As String, encoding As Encoding) As Guid
    Dim buffer As Byte() = encoding.GetBytes(value)
    Return Me.Write(buffer)
End Function

Public Function Write(buffer As Byte()) As Guid
    Dim guid__1 As Guid = Guid.NewGuid()
    Dim networkStream As NetworkStream = Me.client.GetStream()
    Dim result As IAsyncResult = networkStream.BeginWrite(buffer, 0, buffer.Length, Nothing, guid__1)

    result.AsyncWaitHandle.WaitOne()
    networkStream.EndWrite(result)
    Return guid__1
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:14:39.420

您需要在 TCP/IP 之上定义一个（可能很简单）协议，以让您知道一条消息的开始和结束位置。TCP/IP 可以并且将会对您发送的消息进行分段，以便接收者可以获得消息的一部分、整个消息或多条消息。一个简单的方法是写一个消息长度，然后是消息。然后接收器读入一个字节缓冲区，一旦接收到适当数量的字节（基于发送的长度），就可以提取消息并将其编码为字符串。

# javascript - 通过 AJAX 加载 jQuery 插件 RhinoSlider 内容

> ID：11949758
> 
> 赞同：0
> 
> 时间：2012-08-14T09:49:40.953
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 jQuery 插件`RhinoSlider`并且它工作正常，但是我想通过 AJAX 加载内容以加快页面加载时间。根据他们的网站，您需要根据以下内容稍微更改调用：[http ://rhinoslider.com/tricks/get-the-content-of-the-slider-via-ajax/](http://rhinoslider.com/tricks/get-the-content-of-the-slider-via-ajax/)

默认调用是：

```
$(document).ready(function(){
    // store the jquery object
    var $slider = $('#slider');
    $.get('content-of-slider.php', function(data){
        $slider.append(data).rhinoslider();
    });
}); 
```

效果很好，但是我仍然需要包括我的选项，我尝试了下面的方法，但它没有用..

```
$(document).ready(function(){
    // store the jquery object
    var $slider = $('#slider');
    $.get('content-of-slider.php', function(data){
        $slider.append(data).rhinoslider(
            showTime: 6000,
            effectTime: 2500,
            autoPlay: true,
            showBullets: 'always',
            showControls: 'never',
            slidePrevDirection: 'toRight',
            slideNextDirection: 'toLeft'            
        );
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:26:17.563

似乎我在部分之后错过了花括号`rhinoslider(`；我将它们添加如下，现在可以使用了。

```
$(document).ready(function() {
    // store the jquery object
    var $slider = $('#slider');
    $.get('content-of-slider.php', function(data){
        $slider.append(data).rhinoslider({
            showTime: 6000,
            effectTime: 2500,
            autoPlay: false,
            showBullets: 'always',
            showControls: 'never',
            slidePrevDirection: 'toRight',
            slideNextDirection: 'toLeft'
        });
    });        
}); 
```

# user-interface - 多平台“简易”窗口编程

> ID：11949760
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:49:42.540
> 
> 标签：user-interface, mono, window

我正在考虑编写一个在 Windows 和 Mac 中有用的工具（因为我们在工作中使用这些工具），并且它 100% 必须在操作系统窗口内部。

我想到的第一件事是使用 java——因为它是跨平台的——但是，除了基于跨平台窗口的程序之外，还有其他选择吗？

有没有人尝试在其他操作系统中使用带有 Mono 的 C# windows 窗体？如果可能的话，我对垃圾收集语言感兴趣，因为我不想考虑可能会更慢或更快而没有任何麻烦的工具的内存泄漏。此外，如果它可以像在 Visual Studio + C# 中一样简单，那就太棒了！

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:58:00.903

如果您对它感到满意，Java 就很好。

许多语言都绑定到跨平台工具包：例如 Python 非常好用，它有 PyQt4 或 WxPython，这两种语言都可以用来制作在 Windows 或 Mac 上运行良好的 GUI。

在管理你的内存世界中，在 C++ 中使用 Qt 实际上是非常愉快的（他们有一个很好的 API）。我发现它创建了比我的 Java 代码更优雅的应用程序（它们感觉更原生）虽然 YMMV。

# sql - SQL 插入到存在列的位置

> ID：11949761
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:49:56.983
> 
> 标签：sql, csv, if-statement, insert, exists

我在使用 SQL 插入语句时遇到问题。

目前，Insert 语句用于将数据从 .CSV 文件传输到 SQL 表中，但 .CSV 文件的内容可能会有所不同，即它可能包含与之前不同的列。

我用来从 .CSV 文件中获取数据的语句支持不同的列，因为它创建了一个与 .CSV 完全相同的临时表。

我目前使用的插入语句是：

```
INSERT INTO RTCU(ItemDATE, ItemTIME, SITENAME, GENSETNAME, GENSET_SN, REASON, EVENT, RPM, Pwr
                 ,Gfrq ,Vg1 ,Vg2 ,Vg3 ,Vg12 ,Vg23 ,Vg31, Ig1, Ig2, Ig3, Mfrq, Vm1, Vm2, Vm3
                 ,Vm12 ,Vm23 ,Vm31 ,BIN ,BOUT ,Mode ,CCpres ,OilLev
                 ,ActDem ,OilT ,AirInT ,RecAT ,JWTout ,JWTin ,JWGKin ,CylA1 ,CylA2 ,CylA3 ,CylA4 ,CylA5
                 ,CylA6 ,CylB1 ,CylB2 ,CylB3 ,CylB4 ,CylB5 ,CylB6 ,ActPwr ,kWhour ,Runhrs ,VRO)      
SELECT CONVERT(DATETIME,ItemDATE,103), ItemTIME, SITENAME, GENSETNAME, GENSET_SN, REASON, EVENT, RPM, Pwr
                 ,Gfrq ,Vg1 ,Vg2 ,Vg3 ,Vg12 ,Vg23 ,Vg31, Ig1, Ig2, Ig3, Mfrq, Vm1, Vm2, Vm3
                 ,Vm12 ,Vm23 ,Vm31 ,BIN ,BOUT ,Mode ,CCpres ,OilLev
                 ,ActDem ,OilT ,AirInT ,RecAT ,JWTout ,JWTin ,JWGKin ,CylA1 ,CylA2 ,CylA3 ,CylA4 ,CylA5
                 ,CylA6 ,CylB1 ,CylB2 ,CylB3 ,CylB4 ,CylB5 ,CylB6 ,ActPwr ,kWhour ,Runhrs ,VRO
FROM tmpDATA 
```

但是正如您所看到的，我复制的列是固定的，那么如果我的一个 .CSV 文件有一个列“HeatMeter”，我将如何将该列复制到 RTCU 表中呢？

提前致谢！！尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:40:26.217

我不能 100% 确定我了解您的需求，但这是我最好的猜测......

你有一个目标表...

```
 ID | val_1 | val_2 | val_3 
```

你有一个源表...

```
 ID | val_1 | val_3 
```

你有第二个源表......

```
 ID | val_2 | val_3 
```

您想将来自两个不同来源的数据插入到目标表中......

一种选择是在不同的列上指定默认值...

```
CREATE TABLE destination (
  id      INT,
  val_1   INT DEFAULT(-1),
  val_2   INT DEFAULT(-2),
  val_3   INT DEFAULT(-3)
)

-- val3 is not specified in this insert
-- This means that it will appear as -3 for all the inserted rows
------------------------------------------------------------------
INSERT INTO destination (id, val_1, val_2)
SELECT id, val_1, val_2 FROM source1

-- val1 is not specified in this insert
-- This means that it will appear as -1 for all the inserted rows
------------------------------------------------------------------
INSERT INTO destination (id, val_2, val_3)
SELECT id, val_2, val_3 FROM source2 
```

另一种选择是简单地硬编码您希望在“缺失”字段中出现的值......

```
-- source1 does not have a val_3 field, so we hard-code the insert
-- to always put NULL in that field.
-------------------------------------------------------------------
INSERT INTO destination (id, val_1, val_2, val3)
SELECT id, val_1, val_2, NULL  FROM source1

-- source2 does not have a val_1 field, so we hard-code the insert
-- to always put 0 in that field.
-------------------------------------------------------------------
INSERT INTO destination (id, val_1, val_2, val_3)
SELECT id, 0,  val_2, val_3 FROM source2 
```

任何值都可以用作默认值或硬编码值。

# iphone - 如何使 scollView （用于 T&C）只在应用程序开始时显示一次，然后不再显示？

> ID：11949762
> 
> 赞同：0
> 
> 时间：2012-08-14T09:49:58.347
> 
> 标签：iphone, objective-c, ios, scrollview, startup

我的问题是......如何制作......这个......当用户第一次使用该应用程序时，我正在尝试制作一个 scollview 以在我的应用程序开始时显示条款和条件。如果用户接受了 T&C（通过单击接受按钮），则此 T&C scollview 将永远不会在应用程序开始时再次出现，因为他已经接受了。因此，他将来可以免费使用该应用程序。我该如何实施？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:52:18.787

将 NSUserDefaults 与“TCShown”之类的键一起使用。如果在启动开始时 NSUserDefaults 中不存在密钥，则显示 T&C 并创建“TCShown”值，将其设置为 YES ([NSNumber numberWithBool:YES];) 并将其存储到 NSUserDefaults。

**编辑：**

假设你想在你的第一个 viewController 中展示 T&C，

```
#define kTCViewedFlag = @"tcViewed" 

-(void) viewDidAppear {

NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];

if(![myDefaults objectForKey:kTCViewedFlag]) {

//show the TC
    }

}

-(IBAction) userAcceptedTC {

[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:YES] forKey:kTCViewedFlag];

[[NSUserDefaults standardUserDefaults] synchronize];
//dismiss the scrollView
}

-(IBAction) userDidDeclineTC {

//handle refusal of TC

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:44:47.633

In addition to Kaan's answer, you can add the TCShown field to the server and update the values accordingly. This will take care of the case when the user who has already accepted the T&C's logs in from a different device.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:52:29.043

也许你会发现这很有用：[RLAgreement View Controller](https://github.com/riveralabs/RLAgreement)

> 该项目允许开发人员在 iPhone 应用程序中包含协议、服务条款、保密协议等。当用户有有效的协议时，控制器会在用户的设置中存储一个变量，并在用户每次打开应用程序时进行检查。

# mysql - Mysql原子id增量

> ID：11949763
> 
> 赞同：0
> 
> 时间：2012-08-14T09:50:01.123
> 
> 标签：mysql

我想创建一个修订控制系统，并且对修订版 nr 1 的新条目的查询将如下所示：

id 和修订号结合起来是主键。

```
insert into contentfile (id, name, revision, active) 
values ((select max(id) +1 from contentfile), 'name', 1, 1) 
```

这是否足够原子化，或者生成的带有子查询的 id 是否可能会被该查询的另一个调用同时选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:45:51.770

不要试图重新发明已经存在的东西。通过将自动增量选项添加到`id`字段来修改您的表，然后像这样插入您的记录：

```
INSERT INTO contentfile(name, revision, active) VALUES('name', 1, 1); 
```

id 将由 MySQL 服务器自动递增。所有 id 值都是唯一的。

# scala - 如何从命令行启动 Scala 方法？

> ID：11949764
> 
> 赞同：11
> 
> 时间：2012-08-14T09:50:05.450
> 
> 标签：scala, console

这个问题可能听起来有点愚蠢，但我不知道如何从命令行启动 Scala 方法。

我编译了以下文件`Test.scala`：

```
package example

object Test {
  def print() {
    println("Hello World")
  } 
```

}

与`scalac Test.scala`.

然后，我可以分两步`print`运行该方法：`scala`

```
C:\Users\John\Scala\Examples>scala
Welcome to Scala version 2.9.2 (Java HotSpot(TM) Client VM, Java 1.6.0_32).
Type in expressions to have them evaluated.
Type :help for more information.

scala> example.Test.print
Hello World 
```

但我真正喜欢做的是，直接从命令行使用一个命令运行该方法，例如`scala example.Test.print`.

我怎样才能实现这个目标？

**更新：** ArikG 建议的解决方案对我不起作用 - 我错过了什么？

```
C:\Users\John\Scala\Examples>scala -e 'example.Test.print'
C:\Users\John\AppData\Local\Temp\scalacmd1874056752498579477.scala:1: error: u
nclosed character literal
'example.Test.print'
         ^
one error found

C:\Users\John\Scala\Examples>scala -e "example.Test.print"
C:\Users\John\AppData\Local\Temp\scalacmd1889443681948722298.scala:1: error: o
bject Test in package example cannot be accessed in package example
example.Test.print
        ^
one error found 
```

在哪里

```
C:\Users\John\Scala\Examples>dir example
 Volume in drive C has no label.
 Volume Serial Number is 4C49-8C7F 

 Directory of C:\Users\John\Scala\Examples\example

14.08.2012  12:14    <DIR>          .
14.08.2012  12:14    <DIR>          ..
14.08.2012  12:14               493 Test$.class
14.08.2012  12:14               530 Test.class
               2 File(s)          1.023 bytes
               2 Dir(s)  107.935.760.384 bytes free 
```

**更新 2 - 可能的解决方案：**

*   正如 ArikG 正确建议的那样，with`scala -e "import example.Test._; print"`适用于 Windows 7。
*   请参阅 Daniel 的答案以使其在没有导入语句的情况下工作

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T17:30:56.847

让我稍微扩展一下这个解决方案：

```
scala -e 'example.Test.print' 
```

相反，请尝试：

```
scala -cp path-to-the-target-directory -e 'example.Test.print' 
```

目标目录是 scala 用作编译目标的目录。在您的示例中，**它不是** `C:\Users\John\Scala\Examples\example`，而是`C:\Users\John\Scala\Examples`。该目录`example`是 Scala 将在其中查找属于该*包* `example`的类的位置。

这就是为什么事情不起作用的原因：它希望`example`在目录 example 下找到包，但是在您运行的当前目录下没有这样的目录，并且当前目录中`scala`存在的类文件应该在默认包。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T09:54:51.220

最好的方法是扩展[App](http://www.scala-lang.org/api/current/scala/App.html)，它是一个稍微特殊的类（或者至少是它的基础的 DelayedInit ）：

```
package example

object Test extends App {
  println("Hello World")      
} 
```

仍然可以为此添加方法，对象的主体在启动时执行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T09:57:48.000

干得好：

```
scala -e 'example.Test.print' 
```

# r - 如何使用 lattice xyplot 函数添加 abline？

> ID：11949766
> 
> 赞同：9
> 
> 时间：2012-08-14T09:50:11.783
> 
> 标签：r, lattice

我正在尝试绘制两个变量：Eeff vs Neff 使用 lattice 包的 xyplot 函数。我想知道如何在这个散点图中添加一条线（这是普通 R 图形系统中的 abline 函数）。

```
xyplot(Neff ~ Eeff, data = phuong,
       xlab = "Energy efficiency (%)", 
       ylab = "Nitrogen efficiency (%)") 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-14T10:05:55.593

该`lattice`软件包有几个“面板功能”，其中之一是`panel.abline`.

试试这个，看看它是否能给你你想要的东西：

```
xyplot(Neff ~ Eeff, data = phuong,
       panel = function(x, y) {
         panel.xyplot(x, y)
         panel.abline(lm(y ~ x))
       }, 
       xlab = "Energy efficiency (%)", 
       ylab = "Nitrogen efficiency (%)") 
```

# javascript - 如何在 Python 中获取此 JavaScript 函数的返回值？

> ID：11949767
> 
> 赞同：-2
> 
> 时间：2012-08-14T09:50:14.277
> 
> 标签：javascript, python, html

我们有一个程序可以在实时环境或测试环境中运行。唯一的区别是测试环境上的 URL 包含“/test/”。在测试环境中，某些功能会导致它切换到实时环境（当 URL 被硬编码时！），所以我正在尝试解决这个问题。

我在 JavaScript 中创建了这个函数：

```
function GetTestMode()
{
    // If "/test/" exists in URL, keep it there (we are in test mode).
    var currentURL = document.URL;
    var sTestMode = "";
    if (currentURL.indexOf("/test/") != -1)
    {
    // test mode (according to URL)
      sTestMode = "test/";
    }
    return sTestMode;
} 
```

这由 JavaScript 函数使用并按预期工作。

但是，大部分 UI 代码都是 Python 代码（创建 HTML）。所以我想在 Python 中得到这个 JavaScript 结果。到目前为止，我有：

```
import cgi
import os
import sys
import re

def DrawUI (self, short=False):
    print '<br />'
    print '<div class="box2">'
    print '<table cellspacing=0 cellpadding=0 border="0">'
    print '<tr>'

    sTestMode = "test mode = %s" % ('<a href="javascript:GetTestMode()" >')
    print 'sTestMode = ' + sTestMode + '<br />' 
```

这会导致此代码后面的打印语句（甚至可以是`print 'hello world'`）成为一个链接，如果我单击它，它将显示浏览器中 JavaScript 函数的正确返回值。

如何才能`sTestMode`包含返回值（无需用户交互）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:16:17.600

我假设您正在使用[mod_python](http://www.modpython.org/live/current/doc-html/)。

这是一个破解示例，如何将 Javascript 变量发送到服务器。

在 Python 中，使用[cgi 模块](http://webpython.codepoint.net/cgi_unique_field_names)：

```
form = cgi.FieldStorage()
sTestMode = form.getfirst('sTestMode')
sTestMode = cgi.escape(sTestMode)  # Avoid script injection escaping the user input 
```

在 JavaScript 中，使用 JQuery（不确定这是否正确，如果错误，也许一些 JQuery 大师可以解决此问题）：

```
var filename = '/url/to/your/script';
$.ajax({
  url: filename + '?sTestMode=' + sTestMode,
  type: 'GET'
}); 
```

`/url/to/your/script?sTestMode=something_funny`如果您在实现 Javascript 版本时遇到问题，您可以通过在浏览器中调用来确保您的 Python 脚本是正确的。

但是，您应该阅读[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)、[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的概念以及[mod_python](http://www.modpython.org/live/current/doc-html/)的工作原理。

# iphone - 在 UIScrollView 中延迟添加视图会减慢 App

> ID：11949775
> 
> 赞同：0
> 
> 时间：2012-08-14T09:50:57.093
> 
> 标签：iphone, objective-c, performance, uiscrollview, lazy-loading

> 我正在尝试使用 mainScrollView 实现视图。在 mainScrollView 里面我有 10 个 UIView，每个都有 subScrollView。现在，我想在每个 subScrollView 中添加许多（大约 150 到 200 个）视图（imageview、label、textview、uiview、webview 等）。

像这样的东西：

[二战时间线](http://www.youtube.com/watch?v=XF7aVY2F5qc%22timeline%20ww2%22) 和 [爵士乐历史](http://www.youtube.com/watch?v=cKphAh701Js%22History%20of%20Jazz%22)

我尝试了以下方法：
**方法1：**

> 延迟加载每个 subScrollView 以添加视图。

代码：

```
-(void)loadInnerScrollViewLazily:(int)tag pageNo:(int)pageNo{

/// this array will contain all the views for subScrollView

NSMutableArray *array=[NSMutableArray array];
array=[self.tlScrollContentArray objectAtIndex:tag];  

if (pageNo < 0)
    return;
if (pageNo >= [array count])
    return;

UIView *controller = [array objectAtIndex:pageNo];
CGRect frame = [[array objectAtIndex:0] frame];
frame.origin.x = 350;
frame.origin.y = 0;
controller.frame = frame;

for (UIView* view in [mainScrollView subviews]) {
    for (UIScrollView* scroll in [view subviews]) {
        if ([scroll isKindOfClass:[UIScrollView class]]) {
              if (scroll.tag == tag+11) {

                [scroll addSubview:controller];   /// adds view in particular subScrollView

            }
        }
    }
} 
```

}

> 此方法在 scrollViewDidScroll 方法中调用，该方法检查特定的 scrollView 并删除屏幕外的视图，然后根据条件添加视图。

随着滚动速度的增加，此代码正在减慢应用程序的速度。

**方法二：**

参考[本](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html%22click%20here%22)教程：

> 在 mainScrollView 中添加三个 UIView（每个都有 subScrollView）。根据条件更新 subScrollView 的内容。

但是这个解决方案也减慢了我的应用程序，因为它每次出现时都会更新 subScrollView。

是否有任何库或代码可用于管理它。

任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:12:00.590

I think your code has many, many errors, and you would need to post your complete source to be helped. It's unclear if you are ever removing images from your scrollview. If not, that is your problem.

Look at Apple's sample PhotoScroller code: [http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)

This dequeues and manages the ImageViews on the scrollview... I implemented something similar based on this.

# javascript - Python搜索引擎上线

> ID：11949777
> 
> 赞同：2
> 
> 时间：2012-08-14T09:51:02.643
> 
> 标签：javascript, python

我用 Python 写了一个本地搜索引擎，我觉得这是个好主意。它需要不断的小改动，当我回去时，Python 似乎总是可读的。正则表达式也很好。但现在这个引擎在网上很受欢迎。我应该坚持使用python吗？是否有一个很好的模块/库（我表面上知道 urllib，但我的意思是更专业的东西）用于包装本地搜索引擎（就像获取字符串/查询的方法一样简单）与可以与 Javascript 通信并保持/排序的方法/order 传入的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:37:09.047

如果你喜欢 Python，我会使用 Django 甚至 Ruby on Rails。两者都是出色的 MVC（模型、视图、控制器）框架，具有可管理的学习曲线。我建议使用 Ruby on Rails，因为我能够从 Python 过渡到它，而且我真的很喜欢它的约定和易用性。去看一下。

# c# - 获取每个进程的功耗

> ID：11949778
> 
> 赞同：0
> 
> 时间：2012-08-14T09:51:02.403
> 
> 标签：c#, process

> **可能重复：**
> [按进程获取电池使用情况](https://stackoverflow.com/questions/11737773/get-battery-usage-by-process)

有没有办法找到每个进程消耗了多少电量并使用 c# 在列表中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:00:34.737

这是一项相当困难的任务，在普通计算机中通常没有标准的硬件支持。

如果您刚刚发现您的 PC 消耗了多少电量，我建议您使用墙上插头电源监视器：[http ://www.amazon.com/P3-International-P4400-Electricity-Monitor/dp/B00009MDBU](https://rads.stackoverflow.com/amzn/click/com/B00009MDBU)

另一个提示可能是，如果您使用的是 UPS，您有时可以使用供应商特定的 API 获取功耗。

这里也是msdn上的一个帖子，讨论如何通过C#获取一般功耗，即使这样也很难，也没有给出明确的答案。[http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/1eb2fc16-ceca-4984-acf8-cf81185d528f](http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/1eb2fc16-ceca-4984-acf8-cf81185d528f)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:00:57.737

我遇到过各种型号，但我不确定您所说的电源是什么*意思*。

您想考虑以下哪一项？

*   中央处理器
*   记忆
*   磁盘 IO

例如，对于大型机上的充电进程，它们使用纯 CPU 功率 (MIPS)

对于大型数据库的计费，使用了 CPU & 磁盘 IO 的函数（源自执行计划）

# jquery - jquery gzoom如何将默认图像大小设置为defualt

> ID：11949780
> 
> 赞同：0
> 
> 时间：2012-08-14T09:51:05.717
> 
> 标签：jquery, zooming

我正在尝试使用 jquery gzoom：

```
http://lab.gianiaz.com/jquery/gzoom/ 
```

这是我的jQuery：

```
 $(".zoom_no_lbox").gzoom({
    sW: 800,
    sH: 500,
    lW: 1600,
    lH: 1000,
    lightbox: true
}); 
```

这是我的形象：

```
<div class="zoom zoom_no_lbox" id="zoom02"><img src="uploads/007/pg_0009.jpeg" alt="007" class=" "></div> 
```

但正如您在 gzoom 功能中看到的那样，我已经输入了图像的大小。但是，页面上的图像是动态加载的，并且默认长度可能会有所不同。那么如何将默认设置为图像的默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:58:31.540

首先给你的图片一个id，然后

```
$('#ImageId').load(function(){
$(".zoom_no_lbox").gzoom({
    sW: value,
    sH: value,
    lW: value,
    lH: value,
    lightbox: true
});
}); 
```

尝试通过获取图像的属性在这里设置值

# ftp - 为什么 FTP 发送取决于其目录大小？

> ID：11949784
> 
> 赞同：1
> 
> 时间：2012-08-14T09:51:24.560
> 
> 标签：ftp, wso2, wso2esb, vfs

我们有一个代理，它从 JMS 队列中获取消息并将它们发送到 FTP 文件夹。我们现在发现，当 FTP 上的目标目录已经包含很多文件时，发送到 FTP 非常慢。（即当我在一个目录中有大约 2000 个文件时，已经需要几秒钟了）

这里是我们代理的代码（从 JMS 获取消息（纯文本）并将它们写入 FTP）：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="myProxy" statistics="disable" trace="disable" transports="jms">
<parameter name="transport.jms.Destination">myQueue</parameter>
<parameter name="transport.jms.ConnectionFactory">myQueueConnectionFactory</parameter>
<parameter name="transport.jms.DestinationType">queue</parameter>
<parameter name="transport.jms.ContentType">
    <rules>
        <jmsProperty>contentType</jmsProperty>
        <default>text/plain</default>
    </rules>
</parameter>
<target faultSequence="rollbackSequence">
    <inSequence>
        <log level="custom">
            <property name="STATUS" value="myProxy called"/>
        </log>
        <property name="ClientApiNonBlocking" scope="axis2" action="remove"/>
        <property name="OUT_ONLY" value="true"/>
        <property name="transport.vfs.ReplyFileName" expression="fn:concat(get-property('SYSTEM_DATE','yyyyMMddHHmmss_SSS'), '_result.txt')" scope="transport"/>

        <send>
            <endpoint key="myFTPendpoint"/>
        </send>
    </inSequence>
</target> 
```

FTPEndpoint 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="myFTPendpoint">
    <address uri="vfs:ftp://USER:PASSWORD@SERVER.com/path/toSomewhere?vfs.passive=true"/>
</endpoint> 
```

我现在的分析：

1.  仅在将 FTP 与 VFS 一起使用时速度较慢。使用本地文件系统时 - 它很快。
2.  文件很小 - 所以不是上传时间
3.  网络速度很快
4.  **!速度取决于 FTP 目录中已有文件的数量！**

可能的解决方案？

*   修复速度问题。禁用目录列表？
*   解决方法：在输出处创建新文件夹（没有一个文件夹被填得太多）

有人也发现了同样的问题吗？以及如何提高大目录的 FTP 速度？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:40:22.683

通常，如果您有性能问题，您应该进行基准测试。

尝试从命令行 FTP 客户端执行相同的操作，看看慢点在哪里。一个一个地运行每个命令将允许您查看在放入包含许多文件的文件夹和空文件夹时哪些确切的步骤执行不同。

您还应该考虑到性能问题可能与 FTP 无关。仅仅因为这是您看到问题的渠道，并不意味着（仅作为示例）操作系统在处理大型文件夹（如 NT 过去那样）时不仅速度慢。FTP 是您看到此错误的方式，这并不意味着它与原因有关。

为了测试这一点，我将直接访问服务器并访问包含文件的文件夹。

最后，如果这些都没有给你任何线索，我可能会尝试在不同的端点上做同样的事情，看看是否存在持续存在的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:02:50.817

您在 FTP 上总是会遇到这么多文件的问题，这是一个常见问题，与 JMS 无关，要确认这一点，请使用像 filezilla 这样的 ftp 客户端并尝试列出 2000 个文件所在的目录...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T03:30:43.923

我相信无论您是否执行显式目录列表，总会有一个推断的目录列表来确定文件写入操作是覆盖还是创建。

这为您提供了其他解决方法。

您应该在输出中创建新文件夹。实施散列方案以帮助文件夹命名，以便您知道文件夹不会被填充太多。例如，而不是`file1234.ext`考虑`file/1/2/3/4.ext`.

# google-api-java-client - GoogleTransport 无法解析

> ID：11949787
> 
> 赞同：2
> 
> 时间：2012-08-14T09:51:46.983
> 
> 标签：google-api-java-client, google-url-shortener

我正在尝试在我的 Spring MVC 应用程序中使用 Google URL Shorter API。我已经下载了 Google API java 客户端 zip 并将所有 jar 添加到我的项目构建路径并尝试运行示例代码。

```
// setup up the HTTP transport
    HttpTransport transport = GoogleTransport.create();
    // add default headers
    GoogleHeaders defaultHeaders = new GoogleHeaders();
    transport.defaultHeaders = defaultHeaders;
    transport.defaultHeaders.put("Content-Type", "application/json");
    transport.addParser(new JsonCParser());
    // build the HTTP GET request and URL

    GenericData data = new GenericData();
    data.put("longUrl", "http://www.google.com/");

    JsonHttpContent content = new JsonHttpContent();
    content.data = data;

    HttpRequest request = transport.buildPostRequest();
    request.content = content;
    request.setUrl(GOOGL_URL);
    HttpResponse response;
    try {
        JSONObject json = request.execute().parseAs(JSONObject.class);      
    } catch (IOException e) {           
       // TODO Auto-generated catch block                                
       e.printStackTrace();
    } 
```

但问题是它无法解析 GoogleTransport。我只是在任何罐子里都找不到它。有人可以指点我在哪里可以找到它。我不知道出了什么问题，不断的谷歌搜索让我无处可去。是的，我不能使用 Maven，下载的 jars 是我唯一的选择:(。请任何帮助都会很棒。

# asp.net - 如何在 ASP.NET 的 button_click 中展开和折叠 AJAX ACCORDION？

> ID：11949788
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:51:48.080
> 
> 标签：asp.net, ajaxcontroltoolkit

在我的 ASP.NET 网页中，Ajax Accordion 带有两个 AccordionPane（tab1，tab2）。在 tab2 中包含一个按钮。如果我单击 tab2 中的按钮，那么它将展开 tab1 并折叠 tab2。没有客户端编码。我需要在 button_click 中的 cs 文件上编写编码

如何在 button_click 中展开和折叠 AJAX ACCORDION？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:23:48.343

试试这个：

```
UserAccordion.SelectedIndex = 1 
```

# android - 从保存的联系人中拨打号码

> ID：11949792
> 
> 赞同：0
> 
> 时间：2012-08-14T09:52:02.217
> 
> 标签：android, android-intent, phone-call

我想从我保存的联系人中拨打一个号码。我有以下代码。它正确吗？

我的代码：

```
Button okButton=(Button)findViewById(R.id.ok_Button);
okButton.setOnCLickListener(new View.OnCLickListener() {
public void onCLick(View V){
Intent intent=new Intent(Intent.ACTION_DIAL,Uri.parse("Content//Contats/people");
setResult(RESULT_OK,result);
finish();
}
}); 
```

# php - 使用 PHP/OO 的 ODT 到 PDF 转换

> ID：11949797
> 
> 赞同：5
> 
> 时间：2012-08-14T09:52:35.027
> 
> 标签：php, windows, pdf, odt

我目前正在尝试使用 OO 从 PHP 静默地将 ODT 转换为 PDF。这是代码：

```
function MakePropertyValue($name, $value,$osm){ 
   $oStruct = $osm->Bridge_GetStruct("com.sun.star.beans.PropertyValue"); 
   $oStruct->Name = $name; 
   $oStruct->Value = $value; 
   return $oStruct; 
} 
function odt2pdf($doc_url, $output_url){
$osm = new COM("com.sun.star.ServiceManager") or die ("Please be sure that OpenOffice.org is installed.\n");
$args = array(MakePropertyValue("Hidden",true,$osm));
$oDesktop = $osm->createInstance("com.sun.star.frame.Desktop");
$oWriterDoc = $oDesktop->loadComponentFromURL($doc_url,"_blank", 0, $args);
$aFilterData  = array();
$aFilterData [0] = $osm->Bridge_GetStruct("com.sun.star.beans.PropertyValue");
$aFilterData [0]->Name = "SelectPdfVersion";
$aFilterData [0]->Value = 1;
$obj  = $osm->Bridge_GetValueObject();
$obj->set("[]com.sun.star.beans.PropertyValue",$aFilterData );
$storePDF = array();
$storePDF[0] = $osm->Bridge_GetStruct("com.sun.star.beans.PropertyValue");
$storePDF[0]->Name = "FilterName";
$storePDF[0]->Value = "writer_pdf_Export";
$storePDF[1] = $osm->Bridge_GetStruct("com.sun.star.beans.PropertyValue");   
$storePDF[1]->Name = "FilterData";
$storePDF[1]->Value = $obj;
$oWriterDoc->storeToURL($output_url,$storePDF);
$oWriterDoc->close(true);
}
$output_dir = "C:/wamp/www/cert/pdf/";
$doc_file = "C:/wamp/www/cert/output2.odt";
$pdf_file = "output2.pdf";
$output_file = $output_dir . $pdf_file;
$doc_file = "file:///" . $doc_file;
$output_file = "file:///" . $output_file;
odt2pdf($doc_file,$output_file); 
```

可以看出，我已设法将其转换为 PDF/A-1a，但它仍然不保留正在使用的字体。如果我从 Open Office 的 GUI 中转换它，那么字体会被保留。怎么了？

**更新：**我决定停止转换为 PDF，并使用 PHP 中的 exec() 使用 Open Office 将 odt 静默打印到打印机。

另外请注意，确保在打印机驱动程序上关闭字体替换，以防止在打印到 PostScript 打印机时出现任何字体替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:59:43.560

尝试首先使用此库将 ODT 转换为 HTML（以保持格式）

[https://gist.github.com/1918801](https://gist.github.com/1918801)

然后使用这个[FPDF](http://www.fpdf.org/)库从 html 转换为 pdf

我猜[FPDF](http://www.fpdf.org/)不会那么容易支持从 html 转换，所以有一个 FPDF 的插件

这是插件的链接

[FPDF 从 HTML 转换的插件](http://hulan.info/item/html2pdf-convert-your-xhtml-to-pdf-easily)

# c++ - 在旧机器上与 MSADO 通信

> ID：11949802
> 
> 赞同：0
> 
> 时间：2012-08-14T09:53:07.957
> 
> 标签：c++, windows

我正在编写一个小型 MFC 应用程序来使用 ADO 方法与 Access 数据库通信。问题是它适用于某些计算机（主要是较新的 Windows 7 SP1），但不适用于较旧的计算机，我真的需要解决这个问题，否则我没有应用程序。

该错误通常是信息丰富的“应用程序已停止工作”，因此那里没有消息。

我最初使用导入数据库

```
#import "libid:B691E011-1797-432E-907A-4D8C69339129" \
rename( "EOF", "AdoNSEOF" ) 
```

这是 MSAdo60.tlb 的 UUID。我使用以下连接字符串连接到它：

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+dbPath+"; 
```

两台机器都有 msado15.dll 和 mado60.tlb。我需要检查版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:24:03.857

刚刚使用知识库 2640696 解决了这个问题，并删除了 msado15.dll 的 UUID。微软深思熟虑地打破了向 W7SP1 移动的界面。

# actionscript-3 - 统一swf的大小

> ID：11949807
> 
> 赞同：0
> 
> 时间：2012-08-14T09:53:23.297
> 
> 标签：actionscript-3, flash, apache-flex, ant, flex4.5

当我用 ant 多次编译同一个项目时，它为每次编译提供了不同的大小我向 mxml 添加了 rsl 和更多选项，它工作正常，但大小仍然改变

请任何想法统一尺寸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:38:19.290

这实际上是不可能的，除非你做一些非常复杂的后处理。以下是我所知道的更改编译之间大小的列表，但可能并不详尽：

*   编译纯 AS3 项目或使用框架的项目时：

    1.  您嵌入变量的资源使用名称中的当前日期生成其类名。

    2.  Flex 编译器生成一个目的不明的标签（可以手动删除，但在发布版本中仍然存在），它似乎包含一个 GUID 和一个编译时间或类似的东西。它通常位于 SWF 文件的开头，位于 SWF 尺寸的矩形之后的某个位置。

*   在使用框架的项目中：

    1.  怀疑所有代码生成都会产生不一致的名称，特别是所有绑定在每次编译时肯定会产生不同的程序集。样式和其他一些很少使用的元数据也会导致这种情况。

    2.  特别是火花皮肤，它作为源而不是编译库提供 - 其中一些以不好的方式嵌入资源，因此您可能需要将它们编译到库中并将其插入项目中，从源路径中删除源。

总而言之，如果您使用的是纯 AS3 项目，您的任务很困难，但可行（需要遵循某些约定和一些解压缩 SWF、清除编译器添加的额外标签并将 SWF 压缩回来的构建后脚本。但是如果它是基于框架的 SWF - 我会说努力是不值得的，只是接受它无法完成。

# python - 函数、未绑定方法和绑定方法有什么区别？

> ID：11949808
> 
> 赞同：71
> 
> 时间：2012-08-14T09:53:23.387
> 
> 标签：python, oop, function, methods

我之所以问这个问题是因为对此[答案](https://stackoverflow.com/a/11934332/1523776)的评论线程进行了讨论。我已经完成了 90% 的工作。

```
In [1]: class A(object):  # class named 'A'
   ...:     def f1(self): pass
   ...:
In [2]: a = A()  # an instance 
```

`f1`以三种不同的形式存在：

```
In [3]: a.f1  # a bound method
Out[3]: <bound method a.f1 of <__main__.A object at 0x039BE870>>
In [4]: A.f1  # an unbound method
Out[4]: <unbound method A.f1>
In [5]: a.__dict__['f1']  # doesn't exist
KeyError: 'f1'
In [6]: A.__dict__['f1']  # a function
Out[6]: <function __main__.f1> 
```

*绑定方法*、*未绑定方法*和*函数*对象有什么区别，都是f1描述的？如何称呼这三个对象？它们如何相互转化？关于这些东西的[文档](http://docs.python.org/reference/datamodel.html#invoking-descriptors)很难理解。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-14T10:09:53.380

*函数*由`def`语句创建，或由`lambda`. 在 Python 2 中，当函数出现在`class`语句的主体中（或传递给`type`类构造调用）时，它会被转换为*未绑定的方法*。（Python 3 没有未绑定的方法；见下文。）在类实例上访问函数时，它会转换为*绑定的方法*，该方法会自动将实例作为第一个`self`参数提供给该方法。

```
def f1(self):
    pass 
```

这`f1`是一个*函数*。

```
class C(object):
    f1 = f1 
```

现在`C.f1`是一个未绑定的方法。

```
>>> C.f1
<unbound method C.f1>
>>> C.f1.im_func is f1
True 
```

我们还可以使用`type`类构造函数：

```
>>> C2 = type('C2', (object,), {'f1': f1})
>>> C2.f1
<unbound method C2.f1> 
```

我们可以`f1`手动转换为未绑定的方法：

```
>>> import types
>>> types.MethodType(f1, None, C)
<unbound method C.f1> 
```

未绑定的方法通过对类实例的访问进行绑定：

```
>>> C().f1
<bound method C.f1 of <__main__.C object at 0x2abeecf87250>> 
```

访问通过描述符协议转换为调用：

```
>>> C.f1.__get__(C(), C)
<bound method C.f1 of <__main__.C object at 0x2abeecf871d0>> 
```

结合这些：

```
>>> types.MethodType(f1, None, C).__get__(C(), C)
<bound method C.f1 of <__main__.C object at 0x2abeecf87310>> 
```

或直接：

```
>>> types.MethodType(f1, C(), C)                
<bound method C.f1 of <__main__.C object at 0x2abeecf871d0>> 
```

函数和未绑定方法的主要区别在于后者知道它绑定到哪个类；调用或绑定未绑定的方法需要其类类型的实例：

```
>>> f1(None)
>>> C.f1(None)
TypeError: unbound method f1() must be called with C instance as first argument (got NoneType instance instead)
>>> class D(object): pass
>>> f1.__get__(D(), D)
<bound method D.f1 of <__main__.D object at 0x7f6c98cfe290>>
>>> C.f1.__get__(D(), D)
<unbound method C.f1> 
```

由于函数和未绑定方法之间的区别非常小，Python 3[摆脱了这种区别](https://docs.python.org/3/whatsnew/3.0.html#operators-and-special-methods)；在 Python 3 下，访问类实例上的函数只会为您提供函数本身：

```
>>> C.f1
<function f1 at 0x7fdd06c4cd40>
>>> C.f1 is f1
True 
```

那么，在 Python 2 和 Python 3 中，这三个是等价的：

```
f1(C())
C.f1(C())
C().f1() 
```

将函数绑定到实例具有将其第一个参数（通常称为`self`）固定到实例的效果。因此，绑定方法`C().f1`等效于以下任一方法：

```
(lamdba *args, **kwargs: f1(C(), *args, **kwargs))
functools.partial(f1, C()) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T10:25:37.870

> 很难理解

嗯，这是一个相当困难的话题，它与描述符有关。

让我们从功能开始。这里一切都很清楚 - 你只需调用它，所有提供的参数都会在执行时传递：

```
>>> f = A.__dict__['f1']
>>> f(1)
1 
```

`TypeError`如果参数数量有任何问题，则会引发常规：

```
>>> f()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f1() takes exactly 1 argument (0 given) 
```

现在，方法。方法是带有一点香料的函数。描述符在这里出现。如[数据模型](http://docs.python.org/reference/datamodel.html)中所述，`A.f1`并`A().f1`分别翻译为`A.__dict__['f1'].__get__(None, A)`和`type(a).__dict__['f1'].__get__(a, type(a))`。这些`__get__`'s 的结果与原始`f1`函数不同。这些对象是原始对象的包装器，`f1`并包含一些额外的逻辑。

如果`unbound method`这种逻辑包括检查第一个参数是否是 的实例`A`：

```
>>> f = A.f1
>>> f()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method f1() must be called with A instance as first argument (got nothing instead)
>>> f(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method f1() must be called with A instance as first argument (got int instance instead) 
```

如果此检查成功，它将`f1`以该实例作为第一个参数执行 original：

```
>>> f(A())
<__main__.A object at 0x800f238d0> 
```

请注意，该`im_self`属性是`None`：

```
>>> f.im_self is None
True 
```

如果`bound method`此逻辑立即提供原始`f1`实例，`A`则创建它的实例（此实例实际上存储在`im_self`属性中）：

```
>>> f = A().f1
>>> f.im_self
<__main__.A object at 0x800f23950>
>>> f()
<__main__.A object at 0x800f23950> 
```

因此，`bound`意味着底层函数绑定到某个实例。`unbound`意味着它仍然是绑定的，但仅限于一个类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T10:49:30.363

函数对象是由函数定义创建的可调用对象。绑定和未绑定方法都是由点二元运算符调用的描述符创建的可调用对象。

绑定和未绑定的方法对象有3个主要属性：`im_func`是类中定义的函数对象，`im_class`是类，`im_self`是类实例。对于未绑定的方法，`im_self`是`None`.

当一个绑定的方法被调用时，它调用`im_func`with`im_self`作为第一个参数，然后是它的调用参数。未绑定的方法仅使用其调用参数调用底层函数。

从 Python 3 开始，没有未绑定的方法。`Class.method`返回对该方法的直接引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-22T08:00:09.430

有关详细信息，请参阅[Python 2](https://docs.python.org/2/howto/descriptor.html)和[Python 3文档。](https://docs.python.org/3/howto/descriptor.html)

我的解释如下。

类`Function`片段：

蟒蛇 3：

```
class Function(object):
    . . .
    def __get__(self, obj, objtype=None):
        "Simulate func_descr_get() in Objects/funcobject.c"
        if obj is None:
            return self
        return types.MethodType(self, obj) 
```

蟒蛇2：

```
class Function(object):
    . . .
    def __get__(self, obj, objtype=None):
        "Simulate func_descr_get() in Objects/funcobject.c"
        return types.MethodType(self, obj, objtype) 
```

1.  如果一个函数在没有类或实例的情况下被调用，它就是一个普通函数。
2.  如果从类或实例调用函数，`__get__`则调用它来检索包装函数
    ：`B.x`与 相同`B.__dict__['x'].__get__(None, B)`。在 Python 3 中，这将返回普通函数。在 Python 2 中，这将返回一个未绑定的函数。

    湾。`b.x`与 相同`type(b).__dict__['x'].__get__(b, type(b)`。这将在 Python 2 和 Python 3 中返回一个绑定方法，这意味着`self`将作为第一个参数隐式传递。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-24T14:49:47.463

> 函数、未绑定方法和绑定方法有什么区别？

从开创性的角度来看，*什么是功能*没有区别。Python 面向对象的特性建立在基于函数的环境之上。

*被绑定*等于：

### 该函数是否将*类*（**cls**）或*对象实例*（**self**）作为第一个参数？

这是示例：

```
class C:

    #instance method 
    def m1(self, x):
        print(f"Excellent m1 self {self} {x}")

    @classmethod
    def m2(cls, x):
        print(f"Excellent m2 cls {cls} {x}")

    @staticmethod
    def m3(x):
        print(f"Excellent m3 static {x}")    

ci=C()
ci.m1(1)
ci.m2(2)
ci.m3(3)

print(ci.m1)
print(ci.m2)
print(ci.m3)
print(C.m1)
print(C.m2)
print(C.m3) 
```

* * *

输出：

```
Excellent m1 self <__main__.C object at 0x000001AF40319160> 1
Excellent m2 cls <class '__main__.C'> 2
Excellent m3 static 3
<bound method C.m1 of <__main__.C object at 0x000001AF40319160>>
<bound method C.m2 of <class '__main__.C'>>
<function C.m3 at 0x000001AF4023CBF8>
<function C.m1 at 0x000001AF402FBB70>
<bound method C.m2 of <class '__main__.C'>>
<function C.m3 at 0x000001AF4023CBF8> 
```

输出显示静态函数`m3`永远不会被调用*bound*。 `C.m2`绑定到`C`类，因为我们发送的`cls`参数是类指针。

`ci.m1`并且`ci.m2`都受到约束；`ci.m1`因为我们发送`self`了指向实例的指针，并且`ci.m2`因为实例知道类已绑定；）。

### 总而言之，您可以根据方法采用的第一个参数将方法绑定到类或类对象。如果方法未绑定，则可以将其称为未绑定。

* * *

请注意，方法最初可能不是该类的一部分。查看Alex Martelli 的[这个](https://stackoverflow.com/a/1015405/5884955)答案以获取更多详细信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-15T06:45:27.837

我今天看到的一件有趣的事情是，当我将一个函数分配给一个类成员时，它就变成了一个未绑定的方法。如：

```
class Test(object):
    @classmethod
    def initialize_class(cls):
        def print_string(self, str):
            print(str)
        # Here if I do print(print_string), I see a function
        cls.print_proc = print_string
        # Here if I do print(cls.print_proc), I see an unbound method; so if I
        # get a Test object o, I can call o.print_proc("Hello") 
```

# php - PostgreSQL 中的 UTF-8 问题

> ID：11949809
> 
> 赞同：0
> 
> 时间：2012-08-14T09:53:24.087
> 
> 标签：php, postgresql, unicode, utf-8

我的数据库是 UTF-8 (PostgreSQL)。我将“TESTµTEST”保存到数据库中，没关系。但是当我从数据库中选择这个值时，我看到了“TESTÂµTEST”。

此外，当我提出请求时`select * from tbl where f='TESTµTEST'`，我收到了这个错误：

> 错误：编码“UTF8”的字节序列无效：0xb5。

你能给我任何解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:14:57.190

该错误表明您正在尝试将 latin-1 文本解码为 utf-8。您在 PHP 中的设置很可能`client_encoding`与您实际发送的数据的编码不匹配。

字符串“TESTÂµTEST”是通过将数据从 Unicode 编码为 utf-8 字节序列，然后将其解码为 latin-1 生成的。你可以在 psql 中看到：

```
regress=# select convert_from(convert_to('TESTµTEST','utf-8'),'latin-1');
 convert_from 
--------------
 TESTÂµTEST 
```

如果 PostgreSQL 数据库是`utf-8`，它会将`latin-1`输入转换为`utf-8`if`client_encoding`正确设置为`latin-1`. 如果`client_encoding`设置不正确`utf-8`并且您发送`latin-1`编码数据，PostgreSQL 将拒绝接受它并显示以下消息：

```
invalid byte sequence for encoding "UTF8": 0xb5 
```

...这就是您运行时`SELECT`所显示的情况。所以 - 我会说您的客户端设置为`client_encoding = 'utf-8'`但您的 PHP 脚本实际上正在发送`latin-1`数据。我希望这是因为，正如@dezso 所说，您正在使用使用`latin-1`编码的文本编辑器编辑 PHP 脚本。

要找出 PHP 正在使用哪种编码，请使用 PHP 数据库连接来运行`SHOW client_encoding;`.

要显示数据库编码，请运行：

```
SELECT d.datname, pg_catalog.pg_encoding_to_char(d.encoding) as "Encoding" 
FROM pg_database d WHERE datname = 'my_db_name_here'; 
```

哦，另一种可能性是 Apache（或其他）希望您的 PHP 脚本被`utf-8`编码，但它们实际上是`latin-1`编码文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T23:06:51.630

将表复制到包含相同符号的 PostgreSQL 9.1 时遇到了同样的错误（来自[标准营养数据库 v26](http://www.ars.usda.gov/Services/docs.htm?docid=23602)的表）。我使用新编码重新创建了数据库，但我还必须指定适当的[语言环境和模板](http://www.postgresql.org/message-id/BANLkTikSPsF7-Vu6KSwqKcYzK8O5hBZPvw@mail.gmail.com)。

```
CREATE DATABASE testdb
  WITH OWNER = postgres
  ENCODING = 'LATIN1'
  LC_COLLATE = 'eng_canada.28591'
  LC_CTYPE = 'eng_canada.28591'
  TEMPLATE = template0; 
```

# java - 如何生成这个霍夫曼树（类似于二叉树）

> ID：11949810
> 
> 赞同：3
> 
> 时间：2012-08-14T09:53:26.290
> 
> 标签：java, tree, binary-tree, huffman-code

我了解当频率彼此不同时如何创建霍夫曼树，但是如果频率很少相同，我将如何绘制这个霍夫曼树：

[在这里](http://www.siggraph.org/education/materials/HyperGraph/video/mpeg/mpegfaq/huffman_tutorial.html)可以找到 Huffmann 树的简单解释

我正在尝试创建的霍夫曼树的数据：

```
Letter Frequency
A       15%
B       15%
C       10%
D       10%
E       30%
F       20% 
```

现在我从两个最低频率开始，分别是 Letter`C`和`D`

```
 .
  / \
 C   D 
```

但是下一步会是什么？因为我们有`A`相同`B`的频率，所以我们选择哪一个？如果我们选择其中一个，那么在选择第二个时，结构将如何看起来？

如果我选择`B`那么它将看起来像这样（除非我错了）

```
 .
    / \
   B   .
      / \
     C   D 
```

这一步之后呢？？？

这些也可以用 Java 和 C 编码，我试图在实现它们之前先弄清楚它们是如何工作的。

**编辑**

我的树看起来像这样：

```
 ___________|_________________
        /\                            |
       /  \                           |
      F    E                          |
     / \                              |
    /   \                             |
   B     A                           /\
                                    /  \
                                   C    D 
```

还从网上得到了一个例子

![在此处输入图像描述](../Images/4e839890b0e6a7ee3758576fe958ac5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:29:40.033

一步一步回答你的问题。

所以你从

```
A = 15%  
B = 15% 
C = 10% * 
D = 10% *
E = 30%
F = 20% 
```

您选择两个最低的 (C+D) 并加入他们（他们的总和是 20。

```
 20
 / \
C   D 
```

你现在有

```
A = 15%  *
B = 15%  *
C+D = 20% 
E = 30%
F = 20% 
```

现在你加入另外两个最低的（A，B），总和为 30。

```
 20      30
     / \     / \
    C   D    A  B 
```

你现在有

```
A+B = 30%  
C+D = 20% *
E = 30%
F = 20%   * 
```

最低的是 (C+D, F)，所以你加入他们

```
 40
   /  \      
  F   20      30
     / \     / \
    C   D    A  B

A+B = 30% *
C+D+F = 40% 
E = 30% * 
```

下一步，和之前一样：

```
A+B+E = 60% *
C+D+F = 40% *

        100
       /   \
    40        60
   /  \      /  \
  F   20    E    30
     / \        / \
    C   D       A  B 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:03:37.667

您将拥有任何相同频率的一些代码。

```
|     letter      |  A  |  B  |  C  |  D  |  E  |  F  |
|-----------------|-----|-----|-----|-----|-----|-----|
|      freq       |  10 |  20 |  30 |  5  |  25 |  10 |
|-----------------|-----|-----|-----|-----|-----|-----| 
```

按最大值排序

```
|-----------------|-----|-----|-----|-----|-----|-----|
|     letter      |  C  |  E  |  B  |  F  |  A  |  D  |
|-----------------|-----|-----|-----|-----|-----|-----|
|      freq       |  30 |  25 |  20 |  10 |  10 |  5  |
|-----------------|-----|-----|-----|-----|-----|-----| 
```

`tree creating`

```
freq           30    10     5     10     20     25
symbol          C     A     D      F      B      E
                      |     |
                      |--|--|
                        ||-|
                        |15|  = 5 + 10 
```

`2 step`

```
freq          30    10     5     10     20     25
symbol         C     A     D      F      B      E
                     |     |      |
                     |     |      |
                     | |--||      |
                     |-|15||      |
                       ||-|       |
                        |         |
                        |    |--| |
                        |----|25|-| = 10 + 15
                             |--| 
```

`3 step`

```
freq         30    10     5     10     20     25
sym          C     A     D      F      B      E
             |     |     |      |      |      |
             |     |     |      |      |      |
             |     | |--||      |      |      |
             |     |-|15||      |      |      |
             |       ||-|       |      |      |
             |        |         |      |      |
             |        |    |--| |      | |--| |
             |        |----|25|-|      |-|45|-|
             |             ||-|          ||-|
             |    |--|      |             |
             |----|55|------|             |
                  |-||                    |
                    |   |------------|    |
                    |---| Root (100) |----|
                        |------------| 
```

编码：

```
 C = 00   
   A = 0100 
   D = 0101 
   F = 011  
   B = 10   
   E = 11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:45:22.677

您选择哪种并不重要，您会得到一些不同的编码，但概率相同。在某些情况下有更多可能的方式来构建树，但这并不重要。

我编辑了图像，因为我犯了一个错误，但请查看我的第二个答案以获得正确的答案。

# wget - Rename the Directory Index of a web page downloaded with wget to index.html

> ID：11949812
> 
> 赞同：2
> 
> 时间：2012-08-14T09:53:29.923
> 
> 标签：wget

I am currently using a wget command that is fairly complicated, but the essence of it is the `-p` and `-k` flags to download all the pre-requisites. How do I rename the main downloaded file to index.html?

For instance, I download a webpage

```
http://myawesomewebsite.com/something/derp.html 
```

This will, for example, download:

1.  `derp.html`
2.  `style.css`
3.  `firstimage.png`
4.  `secondimage.jpg`

And maybe even an iFrame:

1.  `iframe.html`
2.  `iframe-style.css`

So now the question is how do I rename `derp.html` to `index.html`, without accidentally renaming `iframe.html` to `index.html` as well, given that I don't know what the name of the resolved downloaded file may be?

When I tried this method on a Tumblr page with URL `http://something.tumblr.com/34324/post` it downloaded as `page.html`.

I've tried the `--output-document` flag, but that results in nothing being downloaded at all.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:12:38.803

This is what I ended up doing:

If there was no `index.html` found after downloading, I used Ruby to get the `derp.html` part of the URL, and then searched for `derp.html` and then renamed it to `index.html`.

It's not as elegant as I would like, but it works.

# android - 在 Android 的自定义 Listview 中动态隐藏视图

> ID：11949813
> 
> 赞同：0
> 
> 时间：2012-08-14T09:53:33.670
> 
> 标签：android, listview, dynamic, view, hide

我有一个自定义列表视图，其中有一个 Textview 和 Imageview 现在我想隐藏或显示 Listview 中某些项目的 Imageview。

我已经使用 getview 方法完成了此操作，但问题是当第一次显示 Listview 时，视图不会隐藏，但是当我向下滚动并向上滚动时，它会被隐藏。以下是代码片段。提前致谢。

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        ViewHolder holder;
        if (v != convertView && v != null) {
             holder = new ViewHolder();            
             convertView = mInflater.inflate(R.layout.jazzartist, null);
             holder.albumsView = (TextView)convertView.findViewById(R.id.artist_albums_textview);
             v.setTag(holder);

          }
        else{     
       holder = (ViewHolder) convertView.getTag();     }        

        ViewHolder holder1 = (ViewHolder) v.getTag();
        holder1.objimg =  (ImageView)convertView.findViewById(R.id.drag); 
        if(position == 4){  

            (holder1.objimg).setVisibility(View.INVISIBLE); // here I am hiding Imageview for position 4

            } 
        else
        {

            (holder1.objimg).setVisibility(View.VISIBLE); // here I am showing Imageview for rest of items
        }
                 String albums = getItem(position).albums;

        holder1.albumsView.setText(albums);

        return v;
      }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:10:50.867

试试下面的代码。希望能帮助到你

```
 ViewHolder holder;
            if(convertView == null) 
            {
                 holder = new ViewHolder();            
                 convertView = mInflater.inflate(R.layout.jazzartist, null);
                 holder.albumsView = (TextView)convertView.findViewById(R.id.artist_albums_textview);
                 holder.objimg =  (ImageView)convertView.findViewById(R.id.drag); 
                 convertView.setTag(holder);
            }
            else
            {     
                holder = (ViewHolder) convertView.getTag();     
            } 

            if(position == 4)
            {
                holder.objimg.setVisibility(View.INVISIBLE); // here I am hiding Imageview for position 4
            } 
            else
            {
                holder.objimg.setVisibility(View.VISIBLE); // here I am showing Imageview for rest of items
            }

            String albums = getItem(position).albums;
            holder.albumsView.setText(albums);

            return convertView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:15:23.573

请删除条件，即 if else（不要检查 convertView）

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
           holder = new ViewHolder();            
         convertView = mInflater.inflate(R.layout.jazzartist, null);
         holder.albumsView = (TextView)convertView.findViewById(R.id.artist_albums_textview);

    holder1.objimg =  (ImageView)convertView.findViewById(R.id.drag); 
    if(position == 4){  

        (holder1.objimg).setVisibility(View.INVISIBLE); // here I am hiding Imageview for position 4

        } 
    else
    {

        (holder1.objimg).setVisibility(View.VISIBLE); // here I am showing Imageview for rest of items
    }
             String albums = getItem(position).albums;

    holder1.albumsView.setText(albums);

    return convertView;
  } 
```

# c# - 如何将 DataTable 绑定到 mschart 中的图例

> ID：11949814
> 
> 赞同：1
> 
> 时间：2012-08-14T09:53:40.393
> 
> 标签：c#, excel, mschart, legend

我使用excel绘制图片如下： **![http://i.stack.imgur.com/hNMKy.png](../Images/3fe132f2331ae3407c47a43588a4613a.png)**

请注意红色区域高亮

我的问题是：如何将数据表绑定到 mschart 中的图例？因此，除了图例颜色，人们还可以从图例中看到详细数据。

或者，你们可以告诉在 mschart 中绑定是否可行？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:03:15.713

据我所知，API 中没有任何内容可以让您简单地将 DataTable“绑定”到图例。

但是您仍然应该能够使用一些代码来管理类似的事情：

```
var l = chart1.Legends[0];
l.LegendStyle = LegendStyle.Table;
l.TableStyle = LegendTableStyle.Tall;
l.BorderColor = Color.OrangeRed;
l.Docking = Docking.Bottom;
l.LegendStyle = LegendStyle.Table;
l.HeaderSeparator = LegendSeparatorStyle.DashLine;
l.HeaderSeparatorColor = Color.Red;

var firstColumn = new LegendCellColumn();
l.ColumnType = LegendCellColumnType.SeriesSymbol;
l.CellColumns.Add(firstColumn);

var secondColumn = new LegendCellColumn();
l.ColumnType = LegendCellColumnType.Text;
secondColumn.Text = "#SER";
l.CellColumns.Add(secondColumn);

foreach (DataRow row in dt.Rows)
{
    var column = new LegendCellColumn();
    column.ColumnType = LegendCellColumnType.Text;
    column.HeaderText = row["x"].ToString();
    column.Text = "#VALY";
    l.CellColumns.Add(column);
} 
```

但是，我的建议是将数据包含在单独的控件中，而不是作为图表本身的一部分。如果您将它保存在用于表格数据的 .net 控件之一中，无论您是在 winforms 还是 webforms 中，使用起来都会容易得多。

# c++ - 在 C++ 中使用 ASM

> ID：11949818
> 
> 赞同：0
> 
> 时间：2012-08-14T09:54:05.020
> 
> 标签：c++, assembly

我正在使用以下代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
    __asm{ 
           "MOV EAX, DMSN[0]";
           "LEA EBX, DMSN[0]";
           "CALL EBX";
         };
    return 0;
} 
```

`MOV EAX`和`LEA EBX`, 稍后将包含两个不同的数组。但是对于示例，它们将包含相同的内容。

我正在使用以下内容：

```
const BYTE DMSN[694]={blah, blah, blah}; 
```

但我出现了这些错误：

```
1>c:\users\1337\documents\visual studio 2010\projects\test2\test2\test2.cpp(49): error     C2400: inline assembler syntax error in 'opcode'; found 'bad token'
1>c:\users\1337\documents\visual studio 2010\projects\test2\test2\test2.cpp(50): error     C2400: inline assembler syntax error in 'opcode'; found 'bad token'
1>c:\users\1337\documents\visual studio 2010\projects\test2\test2\test2.cpp(51): error     C2400: inline assembler syntax error in 'opcode'; found 'bad token'**strong text** 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:56:41.590

您的语法有问题，请像这样使用它：-

```
 int _tmain(int argc, _TCHAR* argv[])
    {
      _asm{ 
           mov eax, DMSN[0]
           lea ebx, DMSN[0]
           call ebx
          }
        return 0;
    } 
```

用于基于 VS 的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:24:59.607

如果 dmsn 是数组，则不必输入 [0] 来访问第一个元素

```
int _tmain(int argc, _TCHAR* argv[])
{
    __asm{ 
           mov eax, DMSN
           lea ebx, DMSN
           call ebx
         };
    return 0;
} 
```

mov 指令将自动检查操作数大小，并将前 32 位放入寄存器（eax），将 32 位有效地址放入寄存器（ebx）

VC++ 2010 速递

# ruby-on-rails - rails jquery change event not working

> ID：11949821
> 
> 赞同：0
> 
> 时间：2012-08-14T09:54:12.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I am building a rails app where I want to simply fire code when a user selects an option on a element (unobtrusively). I have read that the most supported way of doing this is by attaching the element directly to the change event:

```
$('#country_selection').change(function() { alert('it works'); }); 
```

However, for me, this is not working. If I put it in the console, it works just fine. However, putting it in the js file of my view, it does not work. I know my js file is being loaded because inserting a simple `alert('in the js file');` returns just fine. The other strange part is that using the live method works:

```
$('#country_selection').live('change', function() { alert('hello'); }); 
```

However, I do not want to do this b/c it is not as supported. The other option I tried which does not work is the 'delegate' method:

```
$('#country_selection').delegate('change', function() { alert('hello'); }); 
```

Why isn't my change function working?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:18:48.243

If you have a select element like

```
<select id="my-select-box">
  <option value="1">First Value</option>
  <option value="2">Second Value</option>
</select> 
```

Then the following Jquery code should work

```
$('#my-select-box').change(function() {
  alert("hey, i got changed");
 }); 
```

It is imperative that the DOM is loaded before JQuery binds your code to the selector. To do this, ensure that you have your code within an anonymous function as such:

```
jQuery(function(){

  $('#my-select-box').change(function() {
    alert("hey, i got changed");
   });

}); 
```

This ensures that the DOM is loaded before the JQuery executes and tries to bind. Otherwise the JavaScript will execute before the element is loaded, and it will not execute correctly.

# jquery - 获取数据时骨干模板/html 不起作用 - 用 CoffeeScript 编写

> ID：11949823
> 
> 赞同：0
> 
> 时间：2012-08-14T09:54:16.720
> 
> 标签：jquery, backbone.js, coffeescript, underscore.js

基本上，在 Backbone & coffeescript 中，我从 Twitter API 中提取推文。获取 JSON 有效，但将模板加载到 html 中无效。拉入模板在渲染函数中起作用，但在 @Tweets.fetch() 函数中不起作用。

似乎失败的代码行是..

```
$(@.el).html(_.template($('#leTweets').html(), {tweets: tweets.models, _:_} )) 
```

我的视图看起来像这样......

```
class HomeView extends Backbone.View
        constructor: ->
            super

        initialize: ->
            @Tweets= new TweetsCollection

        render: ->
            @loadResults()

        loadResults: ->
            @Tweets.fetch({
                success: (tweets) ->
                    $(@.el).html(_.template($('#leTweets').html(), {tweets: tweets.models, _:_} ))
                error: ->
                    alert('Error!')
            }) 
```

我的 HTML 如下所示：

```
<script type="text/template" id="leTweets">

    <div data-role="header" data-position="fixed">
        <h1>TWEETS</h1>
    </div>

    <div data-role="content">
        <h3>Tweets</h3>
        <ul class="tweets">
        <% _.each(tweets, function (tweet) { %>

          <li><%= tweet.get('text') %></li> 

        <% }); %>
        </ul>
    </div>

</script> 
```

我的收藏看起来像这样：

```
class PropertyCollection extends Backbone.Collection

    constructor: ->
        super

    url: ->
        'http://search.twitter.com/search.json?q=' + @query + '&page=' + @page + '&callback=?'

    parse: (resp, xhr) ->
        resp.results

    page: 1,
    query: "Backbone" 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:26:08.513

我认为问题在于您的成功处理程序中的“this”（coffeescript 中的@）的范围不是您的 HomeView，而是“窗口”。因此“window.el”不存在。

简单的解决方案是使用“胖箭头”将事件处理程序的范围设置为视图：

```
 success: (tweets) =>
      $(@.el).html(_.template($('#leTweets').html(), {tweets: tweets.models, _:_} )) 
```

This jsFiddle shows a working example: [http://jsfiddle.net/edwardmsmith/PwMSP/6/](http://jsfiddle.net/edwardmsmith/PwMSP/6/)

# javascript - 简单的鼠标悬停在 Chrome 中不起作用？

> ID：11949826
> 
> 赞同：0
> 
> 时间：2012-08-14T09:54:23.370
> 
> 标签：javascript, google-chrome, mouseover

好的，所以我正在开发一个游戏中心。我有了这个很酷的想法，所以当我将鼠标悬停在一个超链接上时，它会显示出一张可怕的脸（只为 kickz & gigglez）；

问题是，它在 Firefox 中完美运行，但在 Google Chrome 中却不行？演示在这里：

[http://bouncygames.org/games/scary/](http://bouncygames.org/games/scary/)

请帮忙... ：（

**我的问题：** *为什么这在 Chrome 中不起作用，我该如何解决？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:03:43.083

您不需要任何 javascript，只需使用此 css-declaration，它将在所有浏览器中完美运行：

```
#img{
   display:none;
}

a:hover ~ #img{
   display:block;
} 
```

为了使它更具体（这样它不会在所有悬停的锚上触发），将一个类放在你的锚上并写（例如`.scary:hover ~ #img`）。

不要使用 onmouseover 和 onmouseout 这些被认为是不好的编码实践有几个原因。
另外，不要使用`center`标签，而是使用 css-declaration `text-align:center`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:58:24.990

在您的脚本中，不要使用 img.style.visibility，而是使用

```
img.style.display="none"; 
```

和

```
img.style.display="block"; 
```

确保您还从 img 标签中删除了 visibility='hidden' 属性，否则它将不起作用

getElementById 和 ('img') 之间有一个空格，删除它并重试。

# javascript - 如何克服jquery中的这个问题以获得动画悬停效果？

> ID：11949829
> 
> 赞同：1
> 
> 时间：2012-08-14T09:54:33.060
> 
> 标签：javascript, jquery, html, tooltip, jquery-hover

在以下链接中有一个[动画悬停效果](http://www.webdesignerwall.com/demo/jquery/animated-hover1.html)的示例。如果我们将鼠标悬停在特定列表中，工具提示将出现和消失，这没有问题。如果我们在特定列表中连续上下移动鼠标，工具提示会出现几次（例如，如果我们移动鼠标十次，工具提示也会出现十次）。

如何克服这个问题（即）如果我们将特定列表悬停几次，工具提示应该只出现一次。

我通过将脚本更改为（通过添加 stop() 函数）进行了尝试

```
 $(".menu a").hover(function() {
    $(this).next("em").stop().animate({opacity: "show", top: "-75"}, "slow"); 
```

但它失败了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:02:19.497

用于`.stop(true, true)`停止动画。***[检查工作演示](http://jsfiddle.net/ZYLzs/)***。

```
$(document).ready(function(){
    $(".menu a").hover(function() {
        $(this).next("em").stop(true, true).animate({opacity: "show", top: "-75"}, "slow");
    }, function() {
        $(this).next("em").stop(true, true).animate({opacity: "hide", top: "-85"}, "fast");
    });
}); 
```

***解释：***

`.stop(true, true)`将删除排队的动画并立即完成当前动画。

> ```
> .stop( [clearQueue] [, jumpToEnd] ) 
> ```
> 
> **clearQueue**一个布尔值，指示是否也删除排队的动画。默认为假。
> 
> **jumpToEnd 一个**布尔值，指示是否立即完成当前动画。默认为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:57:56.520

使用 $(".menu li").hover 使工具提示出现一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:01:57.203

您只能指定一个悬停事件，只要有 ，就会触发`mouseenter`，您不能指定类似“只有在前一个悬停在 5 秒前向东触发时才触发此悬停”之类的内容。您可以使用[Hoverintent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件来指定只有当鼠标在内部停留 0.5 秒时才会触发悬停。

# java - Java：日期差异

> ID：11949830
> 
> 赞同：1
> 
> 时间：2012-08-14T09:54:44.740
> 
> 标签：java, date

我正在用 Java 处理日期。我正在找出两个日期之间的差异。

```
public static void main(String[] args) {
    final Date futDate = new GregorianCalendar(2012, 8, 15, 0, 0, 0).getTime();

    final Date currentDate = new GregorianCalendar().getTime();

    long diff = Math.round((futDate.getTime() - currentDate.getTime()) / 1000);

    System.out.println(diff / 86400 + " days");
    System.out.println((diff % 86400) / 3600 + " hrs");
    System.out.println(((diff % 86400) % 3600) / 60 + " mins");
    System.out.println((((diff % 86400) % 3600) % 60) % 60 + " secs");
} 
```

输出：

```
31 days
8 hrs
37 mins
30 secs 
```

即使日期差不到一天，输出也超过 31 天。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:57:04.150

8 不是当前月份数:)

月份**从 0 开始编号**

Java 的日期很痛苦，所以我建议看看[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T09:58:15.953

更好的是，使用内置常量：

```
Calendar.AUGUST 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T10:01:07.843

> 我正在用 Java 处理日期。

使用[Joda Time](http://joda-time.sf.net)会*更好*

> 我正在找出两个日期之间的差异。

Joda Time 让这变得非常简单：

```
LocalDateTime start = ...;
LocalDateTime end = ...;
Period period = new Period(start, end, PeriodType.dayTime());

System.out.println(period.getDays() + " days");
System.out.println(period.getHours() + " hrs");
System.out.println(period.getMinutes() + " mins");
System.out.println(period.getSeconds() + " secs"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:02:53.037

月份为 0，如[API中所述](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH "API")

因此，您可能希望将其设置为 7 而不是 8。

对于持续时间计算，还有[Joda Time](http://joda-time.sourceforge.net/ "乔达时间")是一个 IMO 非常复杂的时间 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-18T21:20:56.633

# c - 我可以检查预编译中定义的宏吗？

> ID：11949837
> 
> 赞同：1
> 
> 时间：2012-08-14T09:55:32.943
> 
> 标签：c, macros, precompile

```
#define STR_A  abc
#if STR_A == abc   //I want to make some check here
    do something A
#else
    do something B
#endif 
```

我可以检查 STR_A 定义的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:21:45.953

如果你想检查是否`STR_A`定义了令牌`abc`（它本身不应该是另一个宏）你可以帮助自己一些技巧

```
#define STR_A_TESTER_abc 1
#define CONCAT(A, B) A ## B
#define STR_A_TESTER CONCAT(STR_A_TESTER_, STR_A)

#if STR_A_TESTER
// do whatever
#else
// or other
#endif 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T10:06:08.293

在尝试区分操作系统时，这种情况经常发生。

同样可以用于您的**STR_A**。

```
#if defined(STR_A)
#  if (STR_A == "abc")
    // do something
#  else
    // do something else
#  endif
#else
  #warning "STR_A has not been defined."
#endif 
```

# android - 自定义操作栏选项卡视图

> ID：11949838
> 
> 赞同：2
> 
> 时间：2012-08-14T09:55:36.463
> 
> 标签：android, android-actionbar, fragment, tabview

我正在尝试在操作栏中创建一个自定义选项卡视图，如下所示： ![在此处输入图像描述](../Images/25f6e23c750c527f0d42e1e7bedb95c1.png)

我得到了这样的看法：

![在此处输入图像描述](../Images/b2e262042d3cadd3fcb86994947005f0.png)

我想更改标签视图指示器的背景，因此背景颜色变得不可见，并且我们在选定的标签视图指示器下方有绿线。

这是我的代码（我使用默认的tabview）：

```
public class BaseActivity extends Activity{

    ActionBar bar;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState); setContentView(R.layout.base_activity);

        bar = getActionBar(); 

        // Change action bar background

        BitmapDrawable background = new BitmapDrawable(BitmapFactory.decodeResource(getResources(), R.drawable.background_actionbar)); background.setTileModeX(android.graphics.Shader.TileMode.REPEAT); 

        bar.setBackgroundDrawable(background);

        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 

        ActionBar.Tab tabA = bar.newTab().setText(getResources().getString(R.string.documents)); 

        ActionBar.Tab tabB = bar.newTab().setText(getResources().getString(R.string.videos)); 

        ActionBar.Tab tabC = bar.newTab().setText(getResources().getString(R.string.menu_settings)); 

        Fragment fragmentA = new DocumentsListFragment();

        Fragment fragmentB = new VideosListFragment();

        Fragment fragmentC = new UserAccountFragment();

        tabA.setTabListener(new MyTabsListener(fragmentA)); 

        tabB.setTabListener(new MyTabsListener(fragmentB)); 

        tabC.setTabListener(new MyTabsListener(fragmentC)); 

        bar.addTab(tabA);

        bar.addTab(tabB);

        bar.addTab(tabC);
    }

    protected class MyTabsListener implements ActionBar.TabListener
    {
        private Fragment fragment;

        public MyTabsListener(Fragment fragment) {
            this.fragment = fragment; }

        @Override

        public void onTabSelected(Tab tab, FragmentTransaction ft)
        {
            ft.replace(R.id.fragment_place, fragment, null); }

        @Override

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

        @Override

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }
    }

} 
```

拜托，我怎样才能夸大那些标签视图指示器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:23:33.753

添加这些是在styles.xml 下的值

```
 <style name="Theme.AndroidDevelopers" parent="Theme.Sherlock.Light.ForceOverflow"> 
 <item name=" android:actionBarItemBackground">@drawable/ad_selectable_background
 </item>
    <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
    <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>
 </style>

<style name="MyActionBarTabStyle" parent="Widget.Sherlock.Light.ActionBar.TabBar">
    <item name="android:background">@drawable/actionbar_tab_bg</item>
   <item name="android:gravity">center</item>
   <item name="android:layout_gravity">center</item>
    <item name="android:paddingLeft">10dp</item>
    <item name="android:paddingRight">10dp</item>
</style> 
```

这类似于您的选项卡选择器：

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/ad_tab_selected_pressed_holo"           android:state_selected="true"/>
<item android:drawable="@android:color/transparent"/> 
```

# php - 如何使用现有的 Symfony 2 项目安装 symfony cmf？

> ID：11949840
> 
> 赞同：3
> 
> 时间：2012-08-14T09:55:42.620
> 
> 标签：php, symfony, composer-php

我想将 Symfony CMF 安装到现有的 Symfony2 项目中。

我正在使用[这个文档](http://symfony-cmf.readthedocs.org/en/latest/tutorials/installing-configuring-cmf.html#download-the-bundles)。

运行后`php composer.phar update`，我收到以下错误：

```
[RuntimeException]

  Could not read http://packagist.org/packages-dev-n.json, either you or the remote host is probably offline.

  The "http://packagist.org/packages-dev-n.json" file could not be downloaded

update [--prefer-source] [--dry-run] [--dev] [--no-scripts] [packages1] ... [packagesN]

X-Powered-By: PHP/5.3.13
Content-type: text/html 
```

我究竟做错了什么？

# javascript - jQuery datepicker 开始日期间隔不显示

> ID：11949842
> 
> 赞同：3
> 
> 时间：2012-08-14T09:55:54.637
> 
> 标签：javascript, jquery, date, datepicker, weekday

我使用 jQuery datepicker 向用户显示可用天数，并希望禁用并标记红色繁忙天数。我使用这个**beforeShowDay**日期选择器选项：

```
beforeShowDay: function(date) {
            var cssClass = '';

            for (var i=0; i < busyStarts.length; i++) {
                var busyStart = new Date(busyStarts[i]);
                var busyEnd = new Date(busyEnds[i]);
                if (date >= busyStart && date <= busyEnd) {
                    cssClass = 'ui-state-disabled busy_date';
                }
            }

            return [true, cssClass];
        } 
```

**busyStarts**和**busyEnds**变量是：

![在此处输入图像描述](../Images/68c368ffe8e35e6d0f4f49223f1f405c.png)

但我看到了这个结果：

![在此处输入图像描述](../Images/056f01a50d7ab511d21df41680a0dee3.png)

未选择间隔的第一天。为什么？我有条件**日期 >=busyStart**

当我查看调试器时： ![在此处输入图像描述](../Images/d8d69ab48c53f43571f8f839ed3bca5b.png)

这就是为什么相等（=）条件不起作用的原因。开始和结束日期的时间为 03:00:00，但日期为 00:00:00，并且日期相同的**日期**<= 在同一天，因为 00:00:00 < 03:00:00。

现在我问，为什么？以及如何正确解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:47:23.207

解决

我已经更改了我的代码。添加了 setHours(0, 0, 0, 0) 来初始化开始和结束日期。

```
beforeShowDay: function(date) {
            var cssClass = '';

            for (var i=0; i < busyStarts.length; i++) {
                var busyStart = new Date(busyStarts[i]).setHours(0, 0, 0, 0);
                var busyEnd = new Date(busyEnds[i]).setHours(0, 0, 0, 0);
                if (date >= busyStart && date <= busyEnd) {
                    cssClass = 'ui-state-disabled busy_date';
                }
            }

            return [true, cssClass];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:04:19.287

试试这个说法：

```
beforeShowDay: function(date) {
        var cssClass = '';

        for (var i=0; i < busyStarts.length; i++) {
            var date = new Date(date),
                busyStart = new Date(busyStarts[i]),
                busyEnd = new Date(busyEnds[i]);
            if (date.getTime() >= busyStart.getTime() && date.getTime() <= busyEnd.getTime()) {
                cssClass = 'ui-state-disabled busy_date';
            }
        }

        return [true, cssClass];
    } 
```

getTime() 将您的 Date 对象转换为自 1970 年 1 月 1 日 00:00:00 UTC 以来经过的时间（以毫秒为单位）。这为您提供了一个可以轻松比较的整数。

# linux - 让 jsvc 监听 ipv4

> ID：11949844
> 
> 赞同：0
> 
> 时间：2012-08-14T09:56:16.003
> 
> 标签：linux, ipv6, ipv4, jsvc

我正在设置电子邮件归档，它需要 jsvc。我已经设置好了，但是运行以下命令显示它没有在监听 ipv4。我怎样才能改变这个？

```
netstat -pan --tcp | grep jsvc
tcp        0      0 :::8888                     :::*                        LISTEN      3180/jsvc.exec      
tcp        0      0 :::2526                     :::*                        LISTEN      3180/jsvc.exec      
tcp        0      0 :::2527                     :::*                        LISTEN      3180/jsvc.exec      
tcp        0      0 ::ffff:172.16.0.3:43930     ::ffff:172.16.0.3:27017     ESTABLISHED 3180/jsvc.exec      
tcp        0      0 ::ffff:172.16.0.3:43929     ::ffff:172.16.0.3:27017     ESTABLISHED 3180/jsvc.exec 
```

# android - Android 中的 OpenStreetMap

> ID：11949847
> 
> 赞同：15
> 
> 时间：2012-08-14T09:56:22.047
> 
> 标签：android, openstreetmap

有人知道在 Android 中集成 OpenStreetMap 的库吗？我尝试使用 OSMDROID 和 MapsForge，还有吗？这很好奇，但我只找到免费图书馆。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T17:51:41.203

有关在 Android 上支持 OpenStreetMap 的软件库列表，请参阅[http://wiki.openstreetmap.org/wiki/Android 。](http://wiki.openstreetmap.org/wiki/Android)免责声明：我是其中之一的作者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-08T05:21:46.457

在 android 中使用 OSM 的三个最流行的库是 osmdroid、graphhopper 和 mapsforge。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T08:24:35.227

一个新站点已经启动，以帮助开发人员在 Web 或移动设备上使用 OpenStreetMap：http: [//switch2osm.org/](http://switch2osm.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T15:09:15.177

如果你想要一个更接近谷歌地图的 API，你可以试试 AnyMaps： [https ://github.com/car2go/AnyMaps](https://github.com/car2go/AnyMaps)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T07:23:00.333

```
dependencies {

    compile 'org.osmdroid:osmdroid-android:5.6.5@aar'

}

for (int k = 0; k < mBeanList.size(); k++) {

                        mMyMarkersArray.add(new 

MyMarkers(mBeanList.get(k).getSpecies(),

                                mBeanList.get(k).getArea(), mBeanList.get(k).getTaxon(),
                                Double.parseDouble(mBeanList.get(k).getLatitude()),
                                Double.parseDouble(mBeanList.get(k).getLongitude()),

                                mBeanList.get(k).getDate(), mBeanList.get(k).getTime()));

                        org.osmdroid.views.overlay.Marker osmMarker = new org.osmdroid.views.overlay.Marker(mOpenStreetMapView);
                        Drawable newMarker = ContextCompat.getDrawable(OpenStreetMapActivity.this, R.mipmap.ic_map_72);
                        GeoPoint startPoint = new GeoPoint(Double.parseDouble(mBeanList.get(k).getLatitude()), Double.parseDouble(mBeanList.get(k).getLongitude()));
                        osmMarker.setIcon(newMarker);
                        osmMarker.setPosition(startPoint);
                        osmMarker.setAnchor(org.osmdroid.views.overlay.Marker.ANCHOR_CENTER, org.osmdroid.views.overlay.Marker.ANCHOR_BOTTOM);

                        mOpenStreetMapView.getOverlays().add(osmMarker);
                        mOpenStreetMapView.invalidate();
                        mOpenStreetMapView.setMinZoomLevel(2);
                        IMapController mapController = mOpenStreetMapView.getController();
                        GeoPoint geoIndia = new GeoPoint(20.593684, 78.962880);
                        mapController.setZoom(3);
                        mapController.setCenter(geoIndia);

                        osmMarker.setInfoWindow(new CustomMarkerInfoWindow(mOpenStreetMapView, k));

                    }

private class CustomMarkerInfoWindow extends InfoWindow {
    int position;

    LinearLayout linearLayout;

    //Constructor
    public CustomMarkerInfoWindow(MapView mOpenStreetMapView, int pos) {
        super(R.layout.bonuspack_bubble_black, mOpenStreetMapView);

        linearLayout = (LinearLayout) mView.findViewById(R.id.linear_lay_out_bonuspack_bubble);
        //linearLayout.setVisibility(View.GONE);
        //mOpenStreetMapView.getOverlays().clear();
        this.position = pos;
    }

    @Override
    public void onOpen(Object item) {
        //super.onOpen(item);
        linearLayout.setVisibility(View.VISIBLE);
        TextView species = (TextView) mView.findViewById(R.id.bonuspack_bubble_text_view_species_name);
        species.setText(mBeanList.get(position).getSpecies());
        TextView area = (TextView) mView.findViewById(R.id.bonuspack_bubble_text_view_address);
        area.setText(mBeanList.get(position).getArea());
        TextView taxon = (TextView) mView.findViewById(R.id.bonuspack_bubble_text_view_taxon);
        taxon.setText(mBeanList.get(position).getTaxon());
        TextView dateTime = (TextView) mView.findViewById(R.id.bonuspack_bubble_text_view_date_time);
        dateTime.setText(mBeanList.get(position).getDate());

        linearLayout.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                linearLayout.setVisibility(View.GONE);
            }
        });
    }

    @Override
    public void onClose() {
        //super.onClose();
        //linearLayout.setVisibility(View.GONE);
    }

} 
```

# javascript - 如何手动输入 Highcharts 的主详细图表的输入？

> ID：11949855
> 
> 赞同：0
> 
> 时间：2012-08-14T09:56:46.287
> 
> 标签：javascript, date, highcharts, visualization, time-series

我想使用此处显示的 Highcharts 的主详细信息图表：http: [//www.highcharts.com/demo/dynamic-master-detail](http://www.highcharts.com/demo/dynamic-master-detail)

但是，我不想使用间隔来让脚本自动将日期值分配给每个数据点，因为我的数据不一定是连续的。例如，我可能有一分钟有数据，下一分钟没有数据。

理想情况下，我想在此图表中可视化三天。每个点将是特定日期的特定分钟的值。

有什么建议我该怎么做？如果有必要，我不介意使用其他库。

如果我没有说清楚，或者您需要更多信息，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:57:38.690

系列对象中的数据属性可以不包含值数组，在这种情况下，它将假定数据是等距的。或者，您可以传递一个数组数组，其中外部数组的大小与点数相同，并且该数组的每个元素都是另一个大小为 2 的数组，第一个元素为 epochTime，第二个为值。还有第三种选择，如下所述

文档@ [http://www.highcharts.com/stock/ref/#series--data](http://www.highcharts.com/stock/ref/#series--data)

文档摘录

`data : Array<Mixed>`

系列的数据点数组。系列对象期望点从低到高排序。这样做的原因是为了提高性能。虽然在许多情况下数据是从服务器获取的，但在服务器上进行排序也更方便，从而节省了客户端资源。积分可以通过三种方式给出：

数值列表。在这种情况下，数值将被解释为 y 值，并且 x 值将自动计算，从 0 开始并以 1 递增，或者从 plotOptions 中给出的 pointStart 和 pointInterval 计算。例子：

```
data: [0, 5, 3, 5] 
```

具有两个值的数组列表。在这种情况下，第一个值是 x 值，第二个是 y 值。如果第一个值是字符串，则将其用作点的名称，并且 x 值按照上述规则递增。例子：

```
data: [[5, 2], [6, 3], [8, 2]] 
```

具有命名值的对象列表。在这种情况下，对象是点配置对象，如 options.point 下所示。例子：

```
data: [{
    name: 'Point 1',
    color: '#00FF00',
    y: 0
}, {
    name: 'Point 2',
    color: '#FF00FF',
    y: 5
}] 
```

[查看 JSFiddle 示例](http://jsfiddle.net/jugal/hw2JL)

# objective-c - 横向加载时iPad上的UIPageViewController黑屏

> ID：11949856
> 
> 赞同：1
> 
> 时间：2012-08-14T09:56:56.237
> 
> 标签：objective-c, ipad, ios5, landscape, uipageviewcontroller

我正在开发一个基于 UIPageViewController 的应用程序，它可以在 iPhone 和 iPad 上运行。使用 iPhone 没有问题，因为控制器的脊椎位置始终设置为 UIPageViewControllerSpineLocationMin。然而，在 iPad 中，当设备方向设置为横向时，我需要将脊椎位置设置为 UIPageViewControllerSpineLocationMid。

只有当我以横向加载控制器时，我才会遇到一个奇怪的问题，下面的视频将解释这种情况.. [YouTubeVideo](http://www.youtube.com/watch?v=wDYpD_rbWCg&feature=youtube_gdata_player)

如您所见，当我以纵向加载控制器时，以及在横向加载时旋转设备后，一切正常。

我实在想不通问题出在哪里。这是我用来加载控制器的代码：

```
 if (chapter.controllers) {

        currentPage = [chapter bookPageForCharIndex:location];

        //Load the correct controller for the bookmark page
        NSArray *array = nil;
        if (currentPage >= 0 && currentPage < chapter.controllers.count) {
            if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice]orientation])  && UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) {
                [self setDoubleSided:YES];
                if (chapter.controllers.count > currentPage+1) {
                    array = [[NSArray alloc]initWithObjects:[chapter.controllers objectAtIndex:currentPage],[chapter.controllers objectAtIndex:currentPage+1],nil];
                }
                else {
                    array = [[NSArray alloc]initWithObjects:[chapter.controllers objectAtIndex:currentPage],[[[LSBookPageViewController alloc]init]autorelease],nil];
                }
            }
            else {
                array = [[NSArray alloc]initWithObjects:[chapter.controllers objectAtIndex:currentPage],nil];
            }
        }
        else {
            return;
        }
        [self playSoundsOfChapter:chapter];

        if (isRestarting) {
            [self setViewControllers:array
                           direction:UIPageViewControllerNavigationDirectionReverse 
                            animated:YES 
                          completion:nil];
            isRestarting = NO;
        }
        else {
            [self setViewControllers:array
                           direction:UIPageViewControllerNavigationDirectionForward 
                            animated:YES 
                          completion:nil];
        }
        [array release];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:03:01.780

我认为错误出现在第一个 else 子句中。您应该在检查设备方向和设备后设置断点，并单步执行代码。我猜你的`array`回来是空的。

# android - 在安卓中使用 adfonic

> ID：11949860
> 
> 赞同：1
> 
> 时间：2012-08-14T09:57:03.947
> 
> 标签：android

再会！

我想问一下，如果有人可以分享有关使用 adfonic android API 的信息、链接或教程吗？

我知道[Android SDK](http://developer.adfonic.com/index.php/Android_SDK)，但没有关于如何在代码中使用它的信息。

现在，我只需要在绘图视图之前发送请求，所以当我将它放置在某个地方时，一些广告已经在视图中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:47:51.270

源代码示例在“AdfonicView”下的文档中隐藏了一点。您可以在使用 AdfonicView 向用户显示之前发出广告请求。

1 将 sdk jar 添加到您的项目构建路径 2 将权限和活动添加到您的清单 - 请参阅开发人员 wiki 以获取可选参数

```

    `在“应用程序”打开 XML 标记之前插入
    a) 使用权限 android:name="android.permission.INTERNET"
    b) 使用权限 android:name="android.permission.ACCESS_NETWORK_STATE"
    c) 使用权限 android:name="android.permission.ACCESS_FINE_LOCATION"

    在“应用程序”XML 标记中插入
    活动 android:name="com.adfonic.android.AdfonicActivity"`

```

3 确保您有一个容器/布局来容纳广告 4 发出广告请求（测试 ID 22222222-2222-2222-2222-222222222222）并显示给用户

```
    `@覆盖
    公共无效 onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        AdfonicView 广告 = 新的 AdfonicView(this);
        字符串 adSlotId = "22222222-2222-2222-2222-222222222222";
        请求 adRequest = new Request.RequestBuilder().withSlotId(adSlotId).withAllowLocation(true).withIsMale(false).build();
        ad.setRequest(adRequest);
        设置内容视图（R.layout.main）；
        ViewGroup 容器 = ((ViewGroup)findViewById(R.id.adHolder));
        容器.addView(广告);
    }`

```

希望这可以帮助。请随时发送电子邮件至 support@adfonic.com

最好的问候，格雷姆

# c# - 通过 Oledb c# 的错误数据

> ID：11949863
> 
> 赞同：1
> 
> 时间：2012-08-14T09:57:18.687
> 
> 标签：c#, csv, oledb, oledbconnection

我正在尝试通过 OleDb 和 C# 读取 CSV 文件。我能够完美地读取大多数文件，但仅在某些情况下，我会得到空单元格值（即使在这个文件中，也会有一些单元格值出现但不是全部），即使值在那里。你们中有人遇到过 oleDB 和 CSV 文件的问题吗？如果是，那么请告诉解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:51:52.713

OLEDB 喜欢根据前几行中找到的值来猜测数据类型，并且在猜测后不符合该数据类型的任何内容都会返回 null/empty。

所以如果你有一个像下面这样的csv......

```
1,A
2,B
3,C
4,D
5A,E
5B,F
6,G
7,H 
```

取决于注册表设置（我更熟悉 Excel 的这个问题，不确定它是否为 CSV 配置了相同的方式），OLEDB 可能会读取前 8 条记录，并决定第一列是数字，因为大部分数据是数字，第二个是字符，一旦它设置了这些数据类型，如果它读取第一列的非数字值，它不会抛出任何错误，只是将值返回为空。

如果这是您的问题，我相信您可以通过在连接字符串中使用 IMEX=1 来强制混合数据被读取为文本，然后当您检索值时，我总是使用 GetValue，而不是 GetString 或GetDouble 等

# sql-server - SQL Server 空间索引最近邻

> ID：11949867
> 
> 赞同：0
> 
> 时间：2012-08-14T09:57:34.310
> 
> 标签：sql-server, sql-server-2008, spatial, spatial-index, spatial-query

我正在尝试查询最近邻居的地理点，无论我是否使用空间索引，我总是得到相似的时间，大约需要 6 秒。我怎样才能加快这个查询？

这是我的查询：

```
Declare @param nvarchar(50);
set @param = 'POINT(32.489491 37.864724)'

Declare @paramGeom geometry = geometry::STPointFromText(@param, 4326);
Select top 1 MI_PRINX, MI_STYLE, TrafikIsigi, Demiryolu, UlkeSinir, ID, SP_GEOMETRY.STX AS Longitude, SP_GEOMETRY.STY AS Latitude, SP_GEOMETRY AS Geometry FROM dbo.NODE  (nolock)
WHERE NODE.SP_GEOMETRY.STDistance(@paramGeom) < 0.1
ORDER BY NODE.SP_GEOMETRY.STDistance(@paramGeom); 
```

这是我的索引：

```
CREATE SPATIAL INDEX [IX_Spatial] ON [dbo].[NODE] 
(
    [SP_GEOMETRY]
)USING  GEOMETRY_GRID 
WITH (
BOUNDING_BOX =(25, 35, 46, 43), GRIDS =(LEVEL_1 = HIGH,LEVEL_2 = MEDIUM,LEVEL_3 = MEDIUM,LEVEL_4 = MEDIUM), 
CELLS_PER_OBJECT = 64, PAD_INDEX  = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

任何帮助将不胜感激。

**编辑/解决方案：**

我像这样更改了我的查询：

```
Declare @param nvarchar(50);
set @param = 'POINT(32.489491 37.864724)'

Declare @paramGeom geometry = geometry::STPointFromText(@param, 4326);

Select top 1 MI_PRINX, MI_STYLE, TrafikIsigi, Demiryolu, UlkeSinir, ID, SP_GEOMETRY.STX AS Longitude, SP_GEOMETRY.STY AS Latitude, SP_GEOMETRY AS Geometry FROM [dbo].[NODE] n WITH (INDEX(IX_Spatial))
WHERE n.SP_GEOMETRY.STDistance(@paramGeom) < 0.1
ORDER BY n.SP_GEOMETRY.STDistance(@paramGeom); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:55:31.310

试试[这个](https://stackoverflow.com/questions/3350965/how-can-i-speed-up-this-sql-server-spatial-query)，似乎它可能是一个类似的问题，也许它没有使用空间索引。——</p>

# ruby-on-rails - 引用 has_many (Rails) 中的实例

> ID：11949868
> 
> 赞同：6
> 
> 时间：2012-08-14T09:57:41.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, has-many

我有一个游戏模型，它 has_many :texts。问题是我必须根据它们所属的游戏对文本进行不同的排序（是的，丑陋，但它是遗留数据）。我创建了一个`Text.in_game_order_query(game)`方法，它返回适当的顺序。

我最喜欢的解决方案是在 Text 模型中放置一个默认范围，但这需要知道它们属于哪个游戏。我也不想为每个游戏的文本创建单独的类 - 有很多游戏，而且还会有更多游戏，而且所有较新的游戏都将使用相同的顺序。所以我有了另一个想法：在 has_many 中排序文本，当我知道它们属于哪个游戏时：

```
has_many :texts, :order => Text.in_game_order_query(self) 
```

但是， self 是这里的类，所以这不起作用。

`@game.texts.in_game_order(@game)`除了每次打电话真的没有其他解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-11T21:16:52.190

我最近遇到了一个非常相似的问题，我确信这在 Rails 中是不可能的，但我学到了一些非常有趣的东西。

你可以为作用域声明一个参数，然后不传入它，默认情况下它会传入父对象！

所以，你可以这样做：

```
class Game < ActiveRecord
  has_many :texts, -> (game) { Text.in_game_order_query(game) } 
```

信不信由你，你不必在游戏中通过。Rails 会为你神奇地做到这一点。你可以简单地做：

```
game.texts 
```

不过，有一个警告。如果您启用了预加载，这目前在 Rails 中不起作用。如果这样做，您可能会收到以下警告：

> 弃用警告：关联范围“文本”是实例相关的（范围块接受一个参数）。预加载发生在创建单个实例之前。这意味着没有实例被传递到关联范围。这很可能会导致损坏或不正确的行为。这些关联的加入、预加载和预先加载已被弃用，将来将被删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T20:12:08.123

跟进使用 PradeepKumar 的想法，我发现以下解决方案可行

假设一个类`Block`有一个属性`block_type`和一个容器类（比如 Page），你可以有这样的东西：

```
class Page
  ...

  has_many :blocks do
    def ordered_by_type
      # self is the array of blocks
      self.sort_by(&:block_type)
    end
  end

  ...
end 
```

然后当你打电话

```
page.blocks.ordered_by_type 
```

你得到你想要的 - 由 Proc 定义。显然，Proc 可能要复杂得多，并且在 SQL 调用中不工作，但在编译结果集之后。

更新：
经过一段时间后，我重新阅读了这篇文章和我的答案，我想知道你是否可以做一些简单的事情，就像你在帖子中基本上建议自己的另一种方法一样。

如果你添加了一个方法来`Game`调用`ordered_texts`

```
 def ordered_texts
    texts.in_game_order(self)
  end 
```

这能解决问题吗？或者这个方法是否需要与其他`Game`关系方法链接？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:04:49.223

[协会扩展](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)是否有可能？

看来您可以完成这项工作：

```
module Legacy
  def legacy_game_order
    order(proxy_association.owner.custom_texts_order)
  end
end

class Game << ActiveRecord::Base
  includes Legacy
  has_many :texts, :extend => Legacy

  def custom_texts_order
    # your custom query logic goes here
  end
end 
```

这样，给定一个游戏实例，您应该能够访问实例的自定义查询，而无需传入 self：

```
g = Game.find(123)
g.texts.legacy_game_order 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:12:07.340

这是您可以做到的一种方法，

```
 has_many :texts, :order => lambda { Text.in_game_order_query(self) } 
```

这是我通常不推荐的另一种方式（但会起作用），

```
has_many :texts do
  def game_order(game)
    find(:all, :order => Text.in_game_order_query(game))
  end
end 
```

你可以打电话给他们，

```
game.texts.game_order(game) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T02:59:42.283

我不确定您的订单/查询在 in_game_order_query 类方法中是什么样的，但我相信您可以做到这一点

```
has_many :texts, :finder_sql => proc{Text.in_game_order_query(self)} 
```

只是让您知道我以前从未使用过它，但如果您让我知道这是否适合您，我将不胜感激。

查看[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)了解更多关于 :finder_sql 的文档

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T10:08:45.967

我认为如果您想要处理运行时信息，您应该通过以下方式完成：

```
has_many :texts, :order => proc{ {Text.in_game_order_query(self)} } 
```

# sql - SQL 从多个表中选择和匹配

> ID：11949876
> 
> 赞同：1
> 
> 时间：2012-08-14T09:58:04.107
> 
> 标签：sql

虽然我查看了互联网上的不同示例，但我无法从多个表中选择数据。我有 2 张桌子。

```
 1st  has 'logUID', 'groupUID' field. 
```

另一个

```
 2nd has 'logUID' , 'User ID' , 'LogEntry' , 'LogTypeUID' 
```

我想要完成的是获取 LogUID 相互匹配的日志条目并返回 groupUID 字段，这样我就知道日志针对的是哪个组。当我尝试选择或加入时，我似乎正在重复一个 logUID 字段。

```
SELECT TOP 10000 [log].[dbo].[Logs].[LogUID], [log].[dbo].[LogGroups].[LogUID],     [Weblog].[dbo].[LogGroups].[GroupUID] 

FROM [log].[dbo].[LogGroups], [log].[dbo].[Logs] INNER JOIN [log].[dbo].[LogGroups] as LG
ON [log].[dbo].[Logs].[LogUID] = LG.LogUID ; 
```

任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:05:17.197

删除额外的 FROM`[log].[dbo].[LogGroups],`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:06:27.543

你`[LogGroups]`有两次桌子在那里......

*   `FROM table1, table2`方法`table1 CROSS JOIN table2`

所以，只需将您的代码更改为以下...

```
SELECT TOP 10000
  [Logs].[LogUID],
  [LogGroups].[LogUID],
  [LogGroups].[GroupUID]
FROM
  [log].[dbo].[Logs]
INNER JOIN
  [log].[dbo].[LogGroups]
    ON [Logs].[LogUID] = [LogGroups].LogUID ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T10:10:48.510

See first of all you need to create a relationship between the tables you have created. After creating a relationship you can either create a key relationship using the two columns. So that whatever data goes in the logUID field of first table, the same data goes in the logUID field of second table. So this would help you to fetch the data from both the tables.

Hope this would help.

# ckeditor - 添加 CKeditor 中可用的字体

> ID：11949878
> 
> 赞同：0
> 
> 时间：2012-08-14T09:58:06.780
> 
> 标签：ckeditor

我看过[这个答案](https://stackoverflow.com/questions/6393382/how-to-customize-fonts-in-ckeditor)。但我似乎无法让它工作。

在 /ckeditor/_source/plugins/font/plugin.js 中，我有：

```
CKEDITOR.config.font_names =
  'Arial/Arial, Helvetica, sans-serif;' +
  'Comic Sans MS/Comic Sans MS, cursive;' +
  'Courier New/Courier New, Courier, monospace;' +
  'Georgia/Georgia, serif;' +
  'Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;' +
  'Tahoma/Tahoma, Geneva, sans-serif;' +
  'Times New Roman/Times New Roman, Times, serif;' +
  'Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;' +
  'Verdana/Verdana, Geneva, sans-serif'; 
```

我刚刚添加了一个新行：

```
 'Calibri/Calibri, Verdana, Geneva, sans-serif;' + 
```

我已经硬刷新了页面，但我没有在下拉菜单中获得新的“Calibri”字体。我应该做点别的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:58:45.033

永远不要更改`_source`文件！

用于`config.js`更改您的配置

例如：

```
CKEDITOR.editorConfig = function( config )
{
    config.font_names =
            'Arial/Arial, Helvetica, sans-serif;' +
            'Comic Sans MS/Comic Sans MS, cursive;' +
            'Courier New/Courier New, Courier, monospace;' +
            'Georgia/Georgia, serif;' +
            'Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;' +
            'Tahoma/Tahoma, Geneva, sans-serif;' +
            'Times New Roman/Times New Roman, Times, serif;' +
            'Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;' +
            'Calibri/Calibri, Verdana, Geneva, sans-serif;' + /* here is your font */
            'Verdana/Verdana, Geneva, sans-serif';

   // here you can add more config.*
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:19:00.013

您不应该更改 _source 文件，因为它们不用于生产。

使用任何记录在案的方法来更改配置值：[http ://docs.cksource.com/CKEditor_3.x/Developers_Guide/Setting_Configurations](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Setting_Configurations)

# c# - 如何从 ListView 打开关于 LinkBut ton 的 ModalDialog

> ID：11949881
> 
> 赞同：0
> 
> 时间：2012-08-14T09:58:12.290
> 
> 标签：c#, asp.net, ajax, listview, modal-dialog

我想打开一个带有控件的对话框，如果我单击 ListView 中的 LinkBut​​ton，它必须打开。我想用 CommandName 和 OnCommand Argumen 来实现。

我的应用程序：

在我的应用程序中，用户可以搜索有关文本框的其他用户并在 ListView 中列出用户。如果用户单击链接按钮，他可以显示有关一个用户的更多信息。

![在此处输入图像描述](../Images/118e2bc2d597542b0788945919fc6ee0.png)

如果我将其设为普通按钮，则对话框将打开，但如果我将其设为带有 CommandName 的 LinkBut​​ton，则它不起作用。

我的代码：

```
<form id="form1" runat="server">

    <asp:HiddenField ID="hidForModel" runat="server" />

    <asp:scriptmanager id="ScriptManager1" runat="server">
       </asp:scriptmanager> 

       <asp:modalpopupextender id="ModalPopupExtender1" 
                runat="server" cancelcontrolid="btnCancel" 
                okcontrolid="btnOkay" targetcontrolid="hidForModel" 
                popupcontrolid="Panel1" popupdraghandlecontrolid="PopupHeader" 
                drag="true" backgroundcssclass="ModalPopupBG">

</asp:modalpopupextender>

            <div class="popupConfirmation" id="Panel1" >
              <asp:Panel runat="server" ID="PopupHeader" CssClass="modalPopup">Benutzerinformationen</asp:Panel>
                <div class="Body">
                    Hallo
                    <asp:Button id="btnOkay" runat="server" text="Speichern" />
                    <asp:Button id="btnCancel" runat="server" text="Abbrechen" />
                </div>

            </div>

    <div class="header">
        <table id="SuchTabelle" runat="server" border="0">

            <tr>
                <th><asp:Label ID="id_SearchUser" runat="server" Text="lblSearchUser"></asp:Label></th>
                <th><asp:TextBox ID="txtBenutzer" runat="server" Width="250px"></asp:TextBox></th>

            </tr>
            <tr>
                <th><asp:Label ID="id_location" runat="server" Text="lblLocation"></asp:Label></th>
                <th><asp:DropDownList ID="dropWerk" runat="server" Width="250px" /></th>
                <th><asp:Button ID="Button2" runat="server" Text="Suchen" 
                                onclick="btnBenutzerSuchen_Click" Width="219px" /></th>
            </tr>

        </table>

        <div id="bild">
            <asp:Image runat="server" ImageUrl="~/App_Theme/lw_logo.jpg" Height="58px" 
                Width="277px" />
        </div>

      </div>

      <div class="bodyList">

        <asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
                <tr style="background-color:#E5E5FE" class="TableClass">
                    <th id="th1" runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th id="th2" runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th id="th3" runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th id="th4" runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th id="th5" runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr class="TableClass">    
                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server"  /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr class="TableClass"> 

                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView>

        <br />
        <br />

    </div>

    </form> 
```

我的 C# 代码：

```
protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                ModalPopupExtender1.Show(); // error :(

            }

        } 
```

我的错误文本：

System.InvalidOperationException：ListView“myListView”有一个 SelectedIndexChanging-Event 执行，未处理。

我需要帮助 ：（

更新：

```
protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                txtVorname.Text = "test";

                PopUpDialog.Show();  //<-- Here is the error 

            }
        } 
```

我做一个断点，看看......

![在此处输入图像描述](../Images/cb0a6d27bfbd49207a4ba02806e17df0.png)

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:22:14.487

尝试这个：

**处理“ListView”的“ItemCommand”事件：**

```
protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
  {
    if (String.Equals(e.CommandName, "Select"))
    {
      ModalPopupExtender1.Show();
      //your code
    }
 } 
```

# grails - 多个数据库 - 带有 Grails 2 的数据库迁移插件

> ID：11949883
> 
> 赞同：2
> 
> 时间：2012-08-14T09:58:19.357
> 
> 标签：grails, database-migration

我一直在使用 grails 数据库迁移插件，但我总是只使用一个数据库。我一直在寻找一个示例，或者至少知道是否可以使用多个数据库来完成，我有 8 个以上的数据库，并且手动更改所有这些数据库非常复杂。

预先感谢您的帮助

吉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:48:52.823

因此，由于我的问题没有答案，我将自己回答。在收到 Burt Beckwith 的消息后，他告诉我这是目前不可能的，但他会尽力添加此功能。

***2013 年 1 月 8 日更新********

新版本的 db 迁移插件现在涵盖了多个数据源：

[https://github.com/grails-plugins/grails-database-migration/pull/11](https://github.com/grails-plugins/grails-database-migration/pull/11)

怎么做：

```
grails.plugin.databasemigration.reports.updateOnStart = true
grails.plugin.databasemigration.reports.updateOnStartFileNames = ['changelog-reports.groovy'] 
```

# c# - 动态树控制

> ID：11949884
> 
> 赞同：0
> 
> 时间：2012-08-14T09:58:24.003
> 
> 标签：c#, javascript, asp.net-mvc, jquery

我正在使用来自[http://www.jeasyui.com](http://www.jeasyui.com)的名为“tree”的控件。但在我的情况下，我想在第一个最高级别加载，然后单击其中一个节点加载它的子节点。

```
<ul id="tt" checkbox="true" animate="true"></ul>

  $(function() {
        $('#tt').tree({
                data: @Html.Raw(Model.Tree)
            });
    }); 
```

在此函数上，我从 DB 中获取所选节点的子节点：

```
$(function() {
        $('#tt').tree({
                onBeforeExpand: function(node) {
                    var hospitalId = node.id;

            $.getJSON('@Url.Action("LoadDepartments")', { hospitalId: hospitalId }, function () {
                });
                }});});

  [HttpGet]
        public ActionResult LoadDepartments(Guid hospitalId)
        {

            LoadHospitals();
            var departments = _templateAccessor.GetDepartments(hospitalId);
            var hospital = tree.Where(obj => obj.id == hospitalId.ToString()).FirstOrDefault();
            if (hospital != null)
            {
                foreach (var department in departments)
                {
                    DataTreeModel dep = new DataTreeModel();
                    dep.id = department.Id.ToString();
                    dep.text = department.Name;
                    dep.state = "closed";
                    hospital.children.Add(dep);
                    hospital.state = "open";
                }
            }

              var result = SerializeToJsonString(tree);
        return Json(result, JsonRequestBehavior.AllowGet);
        } 
```

在方法 LoadDepartments 我有正确的结构，但树没有显示新元素。问题是如何清理树的先前内容并用新内容填充它，也许我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:06:15.207

[jq树](https://github.com/mbraak/jqTree)

这棵树应该具有您需要的功能，它非常轻巧且易于使用。我不是在做广告，但几周前我也遇到过同样的情况，这为我提供了一个解决方案。它还将跟踪打开的节点等...

# c++ - Swig 包装 GLM 库

> ID：11949886
> 
> 赞同：2
> 
> 时间：2012-08-14T09:58:27.533
> 
> 标签：c++, lua, swig, glm-math

我目前正在开发一个 2D 游戏引擎，并且在实现 LUA 脚本/解释器时遇到了一个绊脚石。

我正在使用 SWIG，并且基础知识一切正常。

在引擎中，我将 GLM（OpenGL 数学库[http://glm.g-truc.net/](http://glm.g-truc.net/)）用于所有向量和矩阵相关区域。

我真的需要通过 SWIG 向 LUA 公开 glm（在基本级别），这样我就可以在 LUA 中调用方法，例如：

```
actor:GetPosition()  <- Which returns a glm::vec2 
```

GLM 是一个相当复杂的库（可能是轻描淡写的哈哈），我不需要暴露整个东西，我认为这将是荒谬的工作量。我只是希望能够访问 glm::vec2 类的 xy 组件。

我确信这一定很容易，因为 SWIG 不需要完整的类定义，并且必须有一种方法让 SWIG 假设 glm::vec2 类只有 x,y 参数。

我不确定是否在 SWIG 中使用代理类是这样做的方法？还是其他方法？我对 LUA 集成和 SWIG 也很陌生。

我真的不想走的一条路线是放弃 GLM 并编写我自己的向量/矩阵库，它更简单，没有模板等，然后我可以简单地用 SWIG 包装，但我觉得这会浪费时间我最终会得到一个功能不那么强大的数学库:(。

在此先感谢，如有必要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:15:56.630

GLM 的一个大问题是它的向量类型使用了具有可疑 C++ 有效性的东西。*许多编译器允许*但标准不允许的事情。SWIG 使用自己的解析器来工作，因此很难对 GLM 的定义做出正面或反面。

在这种情况下，我建议使用 Luabind 而不是 SWIG。在这种情况下，它提供了更细粒度的控制，并且它的好处是不使用自己的解析器。当然，您可以在 .swig 文件中有效地重写 GLM 重要部分的原型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:11:35.057

[luabind](http://www.rasterbar.com/products/luabind/docs.html)中的解决方案如下所示：

```
#include <luabind/luabind.hpp>

extern "C" int init(lua_State* L)
{
    using namespace luabind;
    using namespace glm;

    open(L);

    module(L)
    [
        class_<dvec2>("dvec2")
            .def_readwrite("x", &dvec2::x)
            .def_readwrite("y", &dvec2::y)
    ];

    return 0;
} 
```

# ajax - 在 Ext JS 中未定义 request.xhr

> ID：11949887
> 
> 赞同：6
> 
> 时间：2012-08-14T09:58:29.330
> 
> 标签：ajax, xmlhttprequest, extjs4.1, readystate

我的网站是使用 Ext JS 4.1 框架和 ASP .Net MVC v3 制作的。呈现新帧时，有 19 个单独的 AJAX 请求以 JSON 格式检索数据。所有请求都是熟悉的，由 Ext.Ajax.request() 发出。例子：

```
Ext.Ajax.request({
    url: getOrderLink,
    method: "GET",
    params: { recId: orderRecId },
    headers: {
        'Accept': 'application/json'
    },
    success: function (response) {
        var order = Ext.decode(response.responseText);
        ...
    }
}); 
```

在某些情况下，ext-all.js 中有错误

```
onStateChange : function(request) {
    if (request.xhr.readyState == 4) {
        this.clearTimeout(request);
        this.onComplete(request);
        this.cleanup(request);
    }
}, 
```

其中请求没有属性 xhr，因此 request.xhr.readyState 抛出异常“无法读取未定义的属性‘readState’”。并非所有请求都会出现此错误，并且不会影响站点工作（成功检索响应）。有时这个错误根本不会出现。所有请求的超时默认设置为 30 秒，每个请求大约需要 1.5-2 秒。我正在使用 Google Chrome 21。请您告诉我为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:01:42.087

当且仅当您有断点或“调试器”时，问题似乎才会发生；加入与 AJAX 相关的任何内容。对我来说，它发生在 Chrome 中，还没有尝试过其他浏览器。

在我的情况下，当我在加载事件处理程序中为商店设置断点时发生这种情况，如下面的代码示例。

但是，如果您在框架本身的 Ext onStateChange 函数内设置断点，也会发生错误。

如果禁用断点和`debugger;`调用可以消除错误，您可以放心地忽略它！

[ExtJS 论坛上有一个类似的帖子。Sencha 可能会添加一个修复程序。](http://www.sencha.com/forum/showthread.php?240574-request.xhr.readyState-undefined-for-some-AJAX-calls)

```
Ext.define('MyApp.controller.MyController', {
    extend: 'Ext.app.Controller',

    stores: ['Projects'],

    init: function () {
        this.getProjectsStore().addListener(
            "load",
            this.onProjectsStoreLoaded,
            this
        );
    },

    onProjectsStoreLoaded: function () {
        console.log('MyController: onProjectsStoreLoaded');

        debugger; // <- this causes the errors to appear in the console

        SomeOtherThingsIWantedToDebug();
    }
} 
```

# java - JavaFX2、LineChart 符号和 CSS

> ID：11949891
> 
> 赞同：2
> 
> 时间：2012-08-14T09:58:37.810
> 
> 标签：java, css, charts, javafx

我正在尝试使用 CSS 自定义折线图。我想：

*   显示图例项目符号（即具有所有系列及其线条颜色的图例）
*   不显示线系列符号（即不在图表中显示数据点）

我尝试了以下方法：

```
.default-color0.chart-series-line { -fx-stroke: #20ABD9; }
.default-color1.chart-series-line { -fx-stroke: #F19A2A; }

.default-color0.chart-line-symbol { -fx-background-color: transparent; }
.default-color1.chart-line-symbol { -fx-background-color: transparent; } 
```

结果是没有更多的折线图符号，正如预期的那样，但图表图例中没有更多的符号。

然后，如果我在背景色中设置了不透明的颜色，图表中仍然有符号。

我不确定这是否可能。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:30:33.343

如果要隐藏图表符号。

```
lineChart.setCreateSymbols(false); 
```

[Oracle 折线图文章](http://docs.oracle.com/javafx/2/charts/line-chart.htm#CIHGBCFI)

# joomla2.5 - joomla 禁止直接访问组件和模块

> ID：11949893
> 
> 赞同：1
> 
> 时间：2012-08-14T09:58:43.273
> 
> 标签：joomla2.5

我激活了 SEO 友好的 URL。基本上，我的应用程序中的 URL 如下所示： `http://x.com/en`或`http://x.com/en/gallery`.

在我的应用程序中，com_users 上没有链接，比方说。但用户仍然可以使用以下 URL 之一打开它：`http://x.com/component/users`或`http://x.com/?option=com_banners`.

我用这个阻止了第一个：

```
RewriteCond %{REQUEST_URI} /component/ [NC]
RewriteRule ^.*$ - [F,L] 
```

**如何阻止第二个（？option=com_users）？**

我知道这种行为可能是 Joomla 的默认行为和预期行为，但我只想给你一个例子。

当我只允许注册用户访问我的所有页面时，他们仍然可以访问组件。同时在 Joomla 管理中没有读取权限。最后，用户将获得模板页面或一些公开数据，例如来自 com_content 的文章。还有问题：***在这种情况下如何引发 403 或者至少重定向到 / ？***

**更新：** 我需要阻止 /users?view=registration，重置提醒和配置文件。我需要将任何错误重定向到登录页面。不管是整个 Joomla 组件还是视图、任务等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:16:20.327

我编写了自己的插件来处理所有情况，并在出现任何不便时重定向到登录页面（/login）。不便之处是指直接访问 Joomla 中的任何组件，或 403 或 404，但不是 500。目前，我的应用程序运行良好，仅接受以下 URL：/login、/home、/gallery、/gallery/album/任何，以及其他几个。完全禁止直接访问，但用户不能使用 URL 参数（如`?option=com_users`）或`/component/`路径。

这种方法不适用于关闭 SEO URL。

```
<?php // no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.event.plugin' );

class  plgSystemComontrol extends JPlugin {

    function plgSystemComcontrol(& $subject, $config) {
        parent::__construct($subject, $config);
    }

    function onAfterRoute() {
        //  get plugin parameters
        $com_redirect_url = $this->params->def('com_redirect_url', 'index.php?option=com_user&view=login');
        $com_debug = $this->params->def('com_debug', '0');
        $com_message = $this->params->def('com_message', '');

        // get option, view, task ..
        $mainframe = JFactory::getApplication();
        $option = JRequest::getCmd('option');
        $view = JRequest::getCmd('view');
        $task = JRequest::getCmd('task');

        //  get current URL
        $uri = JFactory::getURI();
        $url = $uri->toString();
        $u_host = $uri->getHost();
        $u_path = $uri->getPath();
        $path = substr($url, strlen(JURI::root()));

        // get user permissions
        $groupsUserIsIn = JAccess::getGroupsByUser(JFactory::getUser()->id);
        $user_type = implode(" ",$groupsUserIsIn);
        $group_sum = array_sum($groupsUserIsIn);

        if ($com_debug == '1') {
            $mainframe->enqueueMessage('--------------------------------');
            $mainframe->enqueueMessage('$option = '.$option);
            $mainframe->enqueueMessage('$view = '.$view);
            $mainframe->enqueueMessage('$task = '.$task);
            $mainframe->enqueueMessage('$url = '.$url);
            $mainframe->enqueueMessage('$path = '.$path);
        }

        if (strpos($path, 'administrator') === 0) {
            return;
        }

        // set default redirect page
        $redirectPage = ($group_sum > 1) ? 'index.php' : 'index.php/login';
        $directAccess = strpos($path, 'component') !== false || strpos($path, 'option') !== false;

        // allow login page only
        if ($option == 'com_users') {
            if (($view == 'login' || empty($view) || $task == 'user.login' || $task == 'user.logout') && !$directAccess) { // $view == 'default'
                return;
            } else {
                $mainframe->redirect($redirectPage, $directAccess ? 'Direct access to components forbidden' : 'Login/logout is enabled only');
                //JError::raiseError(403, JText::_('Forbidden'));
                //return;
            }
        }

        // deny direct access to components
        if ($directAccess) {
            $mainframe->redirect($redirectPage, 'Direct access to components forbidden');
            //JError::raiseError(401, JText::_('/component/'));
        }

        // get usertype to see if logged-in
        // $user =& JFactory::getUser();
        // $user_type = $user->get('usertype');
        $groupsUserIsIn = JAccess::getGroupsByUser(JFactory::getUser()->id);
        $user_type = implode(" ",$groupsUserIsIn);
        $group_sum = array_sum($groupsUserIsIn);
        if ($group_sum > '1') {
            return ;
        }

        //if user logged-in, then return from function
        if (empty($option)) {
            return;
        }

        $mainframe->redirect( $com_redirect_url, $com_message );

        return;
    }
}
?> 
```

我希望这将有助于了解如何进行一些自定义重定向并禁用对组件的直接访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:49:50.083

我会采用另一种方式，并为此使用 rel=canonical 。

这是一种更容易/更好的做事方式，因为标签将出现在所有“页面版本”上，并且您不需要设置许多特定于案例的规则或携带大量重定向文件......

这只是一个有助于规范化的插件。

[http://extensions.joomla.org/extensions/site-management/seo-a-metadata/meta-data/11038?qh=YTo0OntpOjA7czo5OiJjYW5vbmljYWwiO2k6MTtzOjExOiInY2Fub25pY2FsJyI7aToyO3M6MTI6IidjYW5vbmlj30%YWwnLiFub2aToiZO](http://extensions.joomla.org/extensions/site-management/seo-a-metadata/meta-data/11038?qh=YTo0OntpOjA7czo5OiJjYW5vbmljYWwiO2k6MTtzOjExOiInY2Fub25pY2FsJyI7aToyO3M6MTI6IidjYW5vbmljYWwnLiI7aTozO3M6NToiY2Fub24iO30%3D)

# xpolog - xpolog 计数语法

> ID：11949895
> 
> 赞同：0
> 
> 时间：2012-08-14T09:58:47.273
> 
> 标签：xpolog, xpolog-search

我有一个带有应用程序池“accounts.services”的网站

我想使用 xpolog 按标题对所有日志进行分组

并按他们的数量排序

我努力了：

```
(Computer = VM2014.conduit.local ) in app.accountsservices | count | group by Source | order by count des 
```

但是 go 语法错误有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:29:29.887

```
Computer contains VM2014 in app.accountsservices | count | group by source | order by count desc 
```

# mahout - 如何在实际项目中使用 mahout naive bayes 模型

> ID：11949896
> 
> 赞同：4
> 
> 时间：2012-08-14T09:59:00.823
> 
> 标签：mahout

我的环境：mahout：0.7 hadoop：1.0.3

我所做的：安装了 mahout，并测试了朴素的贝叶斯示例 - 20newsgroup，它运行良好。

我想要实现的：有*trainnb*和*testnb*工作，但是，在实际应用中，我们需要这样的接口：

> 输入：[要分类的文本] [要使用的模型] 输出：类标签列表（按概率排序）

我已经尝试过：首先我尝试作为*testnb*工作，但我不知道如何将文本转换为由 StandardNaiveBayesClassifier 或 ComplementaryNaiveBayesClassifier 处理的“VectorWritable”对象。

代码：

```
SequenceFile.Writer writer = new SequenceFile.Writer
 (fs, getConf(), getOutputPath(), Text.class, VectorWritable.class);
Path inputFile = new Path(getOption("if"));
Reader reader = new Reader(fs, getInputPath(), getConf());
Text key = new Text();
  VectorWritable vw = new VectorWritable();
  while (reader.next(key, vw)) {
    writer.append(
            new Text(SLASH.split(key.toString())[1]),
            new VectorWritable(classifier.classifyFull(vw.get()))
            );
  } 
```

任何帮助将不胜感激！

我想我明白了，在“mahout in action”中，第 16 章有一些示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T10:12:43.160

你检查过这篇文章吗

[http://chimpler.wordpress.com/2013/03/13/using-the-mahout-naive-bayes-classifier-to-automatically-classify-twitter-messages/](http://chimpler.wordpress.com/2013/03/13/using-the-mahout-naive-bayes-classifier-to-automatically-classify-twitter-messages/)

我完成了教程，一切正常

# javascript - 在 Jquery 中制作可搜索的脚本

> ID：11949898
> 
> 赞同：-1
> 
> 时间：2012-08-14T09:59:16.440
> 
> 标签：javascript, jquery

嗨，我是 Jquery 的新手并试图掌握它，我有 160,000 个文档都以这种风格格式化

> {"玩家":{"名字":"乔瓦尼","姓氏":"Pasquale","CommonName":null,"身高":"182","DateOfBirth":{"年份":"1982"," Month":"1","Day":"5"},"PreferredFoot":"Left","ClubId":"55","LeagueId":"31","NationId":"27","Rating ":"73","Attribute1":"77","Attribute2":"63","Attribute3":"70","Attribute4":"69","Attribute5":"74","Attribute6": "65","稀有":"0","ItemType":"PlayerD"}}

我想让玩家的名字和姓氏可搜索，然后单击后显示他们的评级、属性 1、属性 2、属性 3、4 和 5。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:09:20.367

将您的文档导入数据库（例如 MySql）并在所需字段上创建全文索引。

[这](http://viralpatel.net/blogs/full-text-search-using-mysql-full-text-search-capabilities/)应该让你开始。

# android - ImageSwitcher Android 的动画回调

> ID：11949900
> 
> 赞同：2
> 
> 时间：2012-08-14T09:59:22.850
> 
> 标签：android, animation, callback, imageswitcher

我正在使用 ImageSwitcher 显示一系列带有过渡动画的图像。有没有办法可以根据动画的持续时间来调整过渡的速度？是否有可能有一个 AnimationListener 或类似的东西来识别动画的开始和结束？

# c# - 登录失败。详细信息：28000：[Microsoft][ODBC SQL Server Driver][SQL Server]用户“用户”登录失败

> ID：11949901
> 
> 赞同：0
> 
> 时间：2012-08-14T09:59:23.790
> 
> 标签：c#, asp.net-mvc-2, crystal-reports

我正在使用 Visual Studio 2008、mvc 2 附带的 Crystal 报告。我希望当用户单击链接时生成 PDF 报告。

这是我配置水晶报表的方法

```
 public ReportClass ConfigureReportClass(string strReportPath, object[] objParameters)
    {
        ReportClass rptH = new ReportClass();
        try
        {
                rptH = new ReportClass();
                rptH.FileName = strReportPath;
                int Count = 0;
                rptH.Load();
                if (objParameters == null)
                    return rptH;
                foreach (object obj in objParameters)
                {
                    ParameterField param = rptH.ParameterFields[Count++];  // first param 
                    param.AllowCustomValues = true;
                    ParameterDiscreteValue Disparam = new ParameterDiscreteValue();
                    Disparam.Value = obj;
                    param.CurrentValues.Add(Disparam);
                }

        }
        catch (Exception ex)
        {
            throw ex;
        }
        return rptH;
    } 
```

和这个把它转换成PDF

```
 public System.IO.Stream GetPDFStream(CrystalDecisions.CrystalReports.Engine.ReportClass rptClass)
    {
        System.IO.Stream stream = rptClass.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);
        return stream;
    } 
```

这是我在控制器中的操作方法

```
 public FileResult GetComplaintFile(String ComplaintNumber)
    {
        HomeBLLC objHomeBLLC = new HomeBLLC();
        ReportClass rptH = objHomeBLLC .ConfigureReportClass(Server.MapPath("~/Views/Complaint/ComplaintReport.rpt"), new object[] { ComplaintNumber });
        return File( objHomeBLLC.GetPDFStream(rptH),"application/pdf" );
    } 
```

我可以在 Visual Studio 的设计视图中看到我的报告的预览，但在运行时出现异常

```
 Logon failed. 
```

详细信息：28000：[Microsoft][ODBC SQL Server Driver][SQL Server]用户“user”登录失败。文件 C:\Windows\TEMP\ComplaintReport {5BDD522D-04DA-48CD-9F43-A9C648F195D9}.rpt 中的错误：无法连接：登录参数不正确。在 CrystalDecisions.ReportAppServer.ConvertDotNetToErom.ThrowDotNetException(Exception e) 在 CrystalDecisions.ReportSource.EromReportSourceBase.ExportToStream(ExportRequestContext reqContext) 在 CrystalDecisions.CrystalReports.Engine.FormatEngine.ExportToStream(ExportRequestContext reqContext) 在 CrystalDecisions.CrystalReports.Engine.ReportDocument.ExportToStream(ExportOptions选项）在 CrystalDecisions.CrystalReports.Engine.ReportDocument.ExportToStream(ExportFormatType formatType) 在 myapp.BLL.Home.HomeBLLC.GetPDFStream(ReportClass rptClass) 在 F:\myapp\BLL\Home\HomeBLLC.CS:line 1082

在 myapp.Controllers.ComplaintController.GetComplaintFile(String ComplaintNumber) 在 F:\myapp\Controllers\ComplaintController.cs:line 709 在 myapp.Controllers.ComplaintController.Complaint() 在 F:\myapp\Controllers\ComplaintController.cs:line 76在 lambda_method(ExecutionScope , ControllerBase , Object[] ) 在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase 控制器, Object[] 参数) 在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary `2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 参数) 在 System .Web.Mvc.ControllerActionInvoker.<>c_ *DisplayClassd.b* _a() at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassd.<>c__DisplayClassf.<InvokeActionMethodWithFilters>b__c() at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 处的 1 个过滤器、ActionDescriptor actionDescriptor、IDictionary`2 参数)

我的 DSN 配置正确，因为使用相同 DSN 的其他应用程序正在正确运行 Crystal 报表。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:06:07.553

我错过了基本的东西，在研究了相关问题后，我才知道我忘记在我的配置水晶报告方法中进行身份验证，这是必要的我修改的方法如下

```
 public ReportClass ConfigureReportClass(string strReportPath, object[] objParameters)
    {
        ReportClass rptH = new ReportClass();
        rptH.FileName = strReportPath;
        int Count = 0;
        rptH.Load();
        rptH.SetDatabaseLogon("myusername", "mypassword");
        try
        {
            if (objParameters == null)
                return rptH;
            foreach (object obj in objParameters)
            {
                ParameterField param = rptH.ParameterFields[Count++];  // first param 
                param.AllowCustomValues = true;
                ParameterDiscreteValue Disparam = new ParameterDiscreteValue();
                Disparam.Value = obj;
                param.CurrentValues.Add(Disparam);
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return rptH;
    } 
```

我唯一添加的是 **rptH.SetDatabaseLogon("myusername", "mypassword");** 我的代码及其工作。不知道为什么我必须再次进行身份验证，因为我已经在我的 DSN 中进行了身份验证。欢迎任何建议。

# c - 源代码浏览、理解和阅读工具

> ID：11949907
> 
> 赞同：8
> 
> 时间：2012-08-14T09:59:28.327
> 
> 标签：c, call-graph

我主要是一名 C 和 C++ 程序员，我经常需要快速理解非常大的代码库（gcc、linux 内核）的结构。我想知道在这方面是否有任何工具可以提供帮助。我对调用图、整个项目的数据结构引用特别感兴趣，包括依赖图、快速符号位置等。我知道 ctags 和 cscope，但我正在寻找更可视化的东西，比如允许快速定位定义的调用图函数，在特定调用处根图，反转它（即定位对给定函数的所有调用）等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:11:36.023

如果您想构建调用图，您可以使用 GCC 的[`-finstrument-functions`](http://gcc.gnu.org/onlinedocs/gcc-4.4.6/gcc/Code-Gen-Options.html).

基本上，当您在启用该选项的情况下编译程序时，每当目标程序进入或退出函数时，GCC 都会调用以下函数：

```
 void __cyg_profile_func_enter (void *this_fn,
                                     void *call_site);
      void __cyg_profile_func_exit  (void *this_fn,
                                     void *call_site); 
```

您需要做的是定义这些函数，并写入您的逻辑以在那里生成调用图。

`-finstrument-functions`这个非常详尽的[教程](http://www.ibm.com/developerworks/library/l-graphvis/)解释了如何使用[GraphViz](http://www.graphviz.org/)生成调用图。所涉及的所有工具都是自由和免费的。

当然：

1.  GraphViz 生成的图表是独立的，而不是 IDE 的一部分。
2.  我不确定是否可以*通过这种方式*生成 Linux（内核）的调用图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:54:47.743

你可以试试cflow。它为您提供了内部函数调用的概览。虽然它不是很灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:04:19.073

请尝试使用[SourceInsight](http://www.sourceinsight.com/)。这对浏览代码和理解代码很有帮助。它提供了您要求的大部分功能。

# php - 在 php 中存储 jquery.ajax POST 数据

> ID：11949912
> 
> 赞同：1
> 
> 时间：2012-08-14T09:59:57.273
> 
> 标签：php, javascript, ajax, jquery

这就是我想要做的。

我有以下脚本，它将在同一页面（index.php）上发布来自 index.php 的数据：

```
<script type="text/javascript">

function loadabc(){
            var optionValue = jQuery("select[name='citycountrystores']").val();     
                    jQuery.ajax({
                        type: "POST",
                        url: "index.php",
                        data: ({result: optionValue}),
                        success: function(response){
                            jQuery("#cityAjax").html(response);
                            jQuery("#cityAjax").show();
                        }
                    }); 
```

我想访问 php 中的 POST 数据。php 语句是用相同的 javascript 编写的。我需要在 php if 语句中访问 $_POST['result']，例如：

```
<?php
if($check==$_POST['result'])
{
code....
.........
    }
    ?>
}//Function loadabc end
    </script> 
```

这是我的选择框

```
<select id="citycountrystores" name="citycountrystores" onchange="loadabc();">
  <option value="76">City1</option>
  <option value="77">City2</option>
  <option value="78">City3</option>
</select> 
```

我可以在控制台中看到 POST 值（76 或 77 或 78）。但我想知道如何将它存储在 php 变量中以便立即访问。

有人可以告诉我如何做到这一点，或任何其他方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:06:42.490

如果您想访问同一页面，`AJAX`您需要在打印页面的其余部分之前结束脚本，代码中的第一行应该是：

```
<?php
    if(isset($_POST['result']) &&  ($_POST['result'] != '')){
            if($_POST['result'] == 77){
                echo "My selected code: ".$_POST['result'];
            } else {
                echo "something else";
            }
            die();
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:12:45.027

像这样在 php 数组中声明你的城市

```
$cities = array(
    76 => "City 1",
    77 => "City 2",
    78 => "City 3",
); 
```

然后要在选项中使用这些值，您可以执行以下操作

```
<select id="citycountrystores" name="citycountrystores">
    <?php foreach($cities as $value => $label) {
        echo "<option value=\"{$value}\">{$label}</option>";
    } ?>
</select> 
```

然后，您还可以使用该数组通过查看发布值索引处的数组来查看提交的值。

```
$submittedCity = $cities[$_POST['result']]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:14:23.030

嗯，不确定您的意思，但是如果您尝试将 ajax 发布的数据用作同一页面中的 php 变量，那么我相信您可以尝试使用 jquery 加载方法来刷新所需的 DOM 节点。由于我不确定我是否理解您的问题，所以我不会详细说明。让我知道这是否是你想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:15:01.393

除了 Mihai 的建议，我认为您需要修改获取选择框值的 jquery 代码

```
var optionValue = jQuery("#citycountrystores").val(); 
```

# mysql - 如何在插入 MySQL 表时将自动增量 ID 列的值插入另一列？

> ID：11949913
> 
> 赞同：2
> 
> 时间：2012-08-14T10:00:00.010
> 
> 标签：mysql, insert, auto-increment

我的 MySQL 表中的第一列包含一个自动增量 ID。我想在向表中插入新行时将此值输入另一列，即我需要读取 ID 列中的值并将其插入下一列。

是否有可能做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:13:23.390

这应该有效：

```
INSERT INTO table(id, same_id, col1)
(
 SELECT NULL AS id,
        (SELECT AUTO_INCREMENT
         FROM information_schema.TABLES
         WHERE TABLE_SCHEMA=DATABASE() AND
               TABLE_NAME='table') AS same_id,
        "value" AS col1
); 
```

编辑：正如它所指出的那样，`Jonathan Swartz`它确实受到竞争条件的影响。要修复此使用`LAST_INSERT_ID()`以获取最后插入的 id 并在新列中更新此值：

```
INSERT INTO table(id, same_id, col1)
(
 SELECT NULL AS id,
        NULL AS same_id,
        "value" AS col1
);

SELECT LAST_INSERT_ID() INTO @var_id;

UPDATE  table
SET     same_id = @var_id
WHERE   id = @var_id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:04:03.067

一个简单的触发器就可以完成这项工作。

将行插入表 1 时调用

并将从中获取 ID 并将文件插入表 2

[检查手册](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T19:46:59.277

我确信上面的一些答案是有效的，但我无法弄清楚如何实现它们。然而，我确实使用 成功实现了一个解决方案`$pdo->lastInsertId()`，即在执行我的 INSERT 查询后，我添加了：

```
$new_id = $pdo->lastInsertId();

$sth2 = $pdo->prepare("UPDATE `tracks` SET `fav_id`= IF(`fav_id`=0,$new_id,fav_id) WHERE `id`=$new_id");
$sth2->execute(); 
```

如果 fav_id 尚未设置，这会将最后插入的行的 fav_id 列设置为与该行的 id 列相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:02:55.597

`mysqli_insert_id`如果你正在使用这个，你可以使用`PHP`。

例子。

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli->query("CREATE TABLE myCity LIKE City");

$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli->query($query);

printf ("New Record has id %d.\n", $mysqli->insert_id);

/* drop table */
$mysqli->query("DROP TABLE myCity");

/* close connection */
$mysqli->close();
?> 
```

该`mysqli_insert_id()`函数返回由对具有 AUTO_INCREMENT 属性的列的表的查询生成的 ID。如果最后一个查询不是 INSERT 或 UPDATE 语句，或者修改后的表没有具有 AUTO_INCREMENT 属性的列，则此函数将返回零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:06:28.057

您也可以使第二列自动递增（使用匹配的 AUTOINCREMENT 初始值），有或没有任何键。

# visual-c++ - 如何从 vc++ 编码中删除注册表项

> ID：11949915
> 
> 赞同：0
> 
> 时间：2012-08-14T10:00:18.110
> 
> 标签：visual-c++, registry

我在注册表名称**my_software**中有一个键。

我想从 vc++ 编码中删除它。![在此处输入图像描述](../Images/705115963939b1d9dc82fb0bf693f21a.png)

```
CRegKey key;
LPCSTR lpszKey =  "SOFTWARE\\my_software";
key.m_hKey = HKEY_LOCAL_MACHINE;
LONG lRes = key.Open(key.m_hKey, lpszKey);
LONG err = key.DeleteSubKey(lpszKey); 
```

当我调试代码错误的值为0x00000002。当我在 winerror.h 文件中看到它意味着 ERROR_FILE_NOT_FOUND

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:24:49.623

像这样：

```
bool DeleteValueKey(HKEY hKeyRoot, std::string Subkey, std::string ValueKey)
{
    HKEY    hKey        = NULL;
    bool    bReturn     = false;

    if (RegOpenKeyEx(hKeyRoot, Subkey.c_str(), 0, KEY_SET_VALUE , &hKey) == ERROR_SUCCESS)
    {                   
        if (RegDeleteKey(hKey, ValueKey.c_str() ) == ERROR_SUCCESS)
        {
            bReturn = true;
        }
    }

    if(hKey != NULL){RegCloseKey(hKey);}

    return bReturn;
} 
```

# matlab - 加载不同数据集的参数文件

> ID：11949924
> 
> 赞同：0
> 
> 时间：2012-08-14T10:01:02.973
> 
> 标签：matlab

我需要分析与不同参数集相关的几组数据（每组数据的一组参数）。我目前正在努力寻找一种存储这些参数的好方法，以便在分析特定数据集时可以随时使用它们。

我尝试的第一件事是将它们保存在`parameters.m`数据目录中的脚本文件中，并使用`run([path_to_data,'/parameters.m'])`. 然而，我理解这不是好的编码实践，而且它也给我带来了范围问题（我认为），因为变化`parameters.m`并不总是反映在我的工作区变量中。（工作区变量仅在`Clear all`重新运行代码后更改。）

一个干净的解决方案是在每个数据目录中定义一个函数`parameters()`，但是我需要再次将目录添加到搜索路径中。另外我担心如果我不给函数提供唯一的名称，我可能会遇到命名空间冲突。另一方面，使用唯一名称不是很实用......

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:15:13.177

所以定义一个`struct`或`cell array`调用`parameters`并将它存储在它所属的数据目录中。我不知道你的参数是什么样的，但我们的可能看起来像这样：

```
parameters.relative_tolerance = 10e-6
parameters.absolute_tolerance = 10e-6
parameters.solver_type = 3
.
.
. 
```

我可以写

```
save('parameter_file', 'parameters') 
```

甚至

```
save('parameter_file', '-struct', 'parameters', *fieldnames*) 
```

在线帮助揭示了如何使用`-struct`将结构中的字段存储为对您有用的单个变量。

保存参数后，您可以使用`load`命令加载它们。

总结一下：在它所引用的实验的数据目录中创建一个名为`parameters`的变量（很可能是一个结构或单元数组）。`save`然后，您将拥有所有常用的 Matlab 工具，用于读取、写入和调查参数以及数据。我认为不需要比这更复杂的解决方案（尽管您的参数本身可能很复杂）。

# c# - 在运行时从数据模板应用渲染转换

> ID：11949926
> 
> 赞同：0
> 
> 时间：2012-08-14T10:01:03.537
> 
> 标签：c#, silverlight

我有一个 silverlight 应用程序，其中有一个数据模板，如下所示

```
<DataTemplate x:Name="Template">
<StackPanel>
    <TextBlock Text="{Binding txtCap}"/>
    <Grid>
       <Grid.RenderTransform>
           <CompositeTransform/>
           <TranslateTransform x:Name="gridTransform" X="0" Y="0"/>
       </Grid.RenderTransform>
        <ContentControl Content="{Binding txtContent}"/>
    <Grid>
<StackPanel>
</DataTemplate> 
```

`data template`是 的模板，`items control`并且项目控件本身绑定到`ObservableCollection`

在代码中，我实际上能够获得我正在拖动的任何网格（例如：`sender as Grid`在鼠标按下事件中）但我想问一下当我拥有这个控件时如何实际应用转换？例如：我在鼠标事件中有这个：`var targetLB = sender as ContentControl;`
但是如何在运行时将转换转换应用于该元素？

如果这不在数据模板中，我将直接访问 TranslateTransform 的名称并执行类似的操作`this.gridTransform.X = ...`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:12:19.167

您也可以绑定 Transform 的属性。

编辑：

> 在代码中，我实际上能够获取我正在拖动的任何网格（例如：鼠标按下事件中的发送者作为网格）

如果你有网格，你可以像这样得到 TranslateTransform 对象：

```
 var transform = ((sender as Grid).RenderTransform as TransformGroup).Children[1] as TranslateTransform;
        transform.X = ...
        transform.Y = ... 
```

# python - 我正在用 Python 制作一个“密码程序”，它会发出奇怪的答案

> ID：11949928
> 
> 赞同：0
> 
> 时间：2012-08-14T10:01:13.617
> 
> 标签：python, user-input, long-integer, encryption

我正在制作一个密码程序，稍后我将使用不同的密码填充它，但现在我有摩尔斯电码。我还不是最擅长编程的，所以下面的代码可能看起来过多，很容易分解成更好的代码。

```
import os

def c():
    os.system('cls')

doneOnce = False

while True:
    print 'Code Maker Breaker!'
    print '-------------------\n'
    if doneOnce == False:
        print 'Welcome to CMB!'
        print 'In CMB you can pick several types of codes,'
        print 'Then convert text into this code! If you want,'
        print 'You can then convert text back into this code!'
        print 'Use numbers to select different codes.\n'
        doneOnce = True
    print 'Codes! Please select with corresponding numbers.\n'
    print '1\. Morse'
    code = raw_input('Enter the number for your code: ')
    c()
    if code == '1':
        print 'The Morse code should be used with spaces'
        print 'after every letter to avoid the wrong translation.\n'
        print '1\. Translate from English to -- --- .-. ... .'
        print '2\. Translate from -- --- .-. ... . to English'
        morse = raw_input('Enter what you want: ')
        c()
        if morse == '1':
            print 'Translating to Morse.'
            print 'Enter your English sentence'
            engtomorse = raw_input('>>> ').lower()
            engtomorse = engtomorse.replace('a', '.-')
            engtomorse = engtomorse.replace('b', '-...')
            engtomorse = engtomorse.replace('c', '-.-.')
            engtomorse = engtomorse.replace('d', '-..')
            engtomorse = engtomorse.replace('e', '.')
            engtomorse = engtomorse.replace('f', '..-.')
            engtomorse = engtomorse.replace('g', '--.')
            engtomorse = engtomorse.replace('h', '....')
            engtomorse = engtomorse.replace('i', '..')
            engtomorse = engtomorse.replace('j', '.---')
            engtomorse = engtomorse.replace('k', '-.-')
            engtomorse = engtomorse.replace('l', '.-..')
            engtomorse = engtomorse.replace('m', '--')
            engtomorse = engtomorse.replace('n', '-.')
            engtomorse = engtomorse.replace('o', '---')
            engtomorse = engtomorse.replace('p', '.--.')
            engtomorse = engtomorse.replace('q', '--.-')
            engtomorse = engtomorse.replace('r', '.-.')
            engtomorse = engtomorse.replace('s', '...')
            engtomorse = engtomorse.replace('t', '-')
            engtomorse = engtomorse.replace('u', '..-')
            engtomorse = engtomorse.replace('v', '...-')
            engtomorse = engtomorse.replace('w', '.--')
            engtomorse = engtomorse.replace('x', '-..-')
            engtomorse = engtomorse.replace('y', '-.--')
            engtomorse = engtomorse.replace('z', '--..')
            engtomorse = engtomorse.replace('0', '-----')
            engtomorse = engtomorse.replace('1', '.----')
            engtomorse = engtomorse.replace('2', '..---')
            engtomorse = engtomorse.replace('3', '...--')
            engtomorse = engtomorse.replace('4', '....-')
            engtomorse = engtomorse.replace('5', '.....')
            engtomorse = engtomorse.replace('6', '-....')
            engtomorse = engtomorse.replace('7', '--...')
            engtomorse = engtomorse.replace('8', '---..')
            engtomorse = engtomorse.replace('9', '----.')
            engtomorse = engtomorse.replace('.', '.-.-.-')
            engtomorse = engtomorse.replace(',', '--..--')
            engtomorse = engtomorse.replace('?', '..--..')
            engtomorse = engtomorse.replace('!', '..--.')
            engtomorse = engtomorse.replace(':', '---...')
            engtomorse = engtomorse.replace('"', '.-..-.')
            engtomorse = engtomorse.replace("'", '.----.')
            engtomorse = engtomorse.replace('=', '-...-')
            c()
            print 'Your sentence in Morse code is', engtomorse
            print 'Press enter.'
            raw_input()
        elif morse == '2':
            pass
        else:
            print 'You entered something wrong... Go back!'
            print 'Press enter.'
            raw_input()
    else:
        print 'What?'
        print 'Press enter.'
        raw_input()
    c() 
```

好的，这很多。但对我来说出错的部分是当用户输入一个句子时，程序会用摩尔斯电码等价物替换所有字母。一旦打印出来，我就会得到一个奇怪的答案。例如，如果我将我的句子输入为 A，它将输出`.-.-.--`. 为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T10:06:25.593

这将替换您已插入的所有 '.'。您可以先尝试进行此替换

```
 engtomorse = engtomorse.replace('.', '.-.-.-') 
```

你可能也想在摩尔斯电码字母之间有空格，否则它们会一起运行

另一种方法是使用字典

```
replace_dict = {'a': '.-', 'b': '-...', ...}
engtomorse = " ".join(replace_dict[k] for k in engtomorse) 
```

像这样替换每个字符更有效，并且意味着您完全避免了该特定错误

# ruby-on-rails - 如何用 mongoid 实现模型之间的关系

> ID：11949929
> 
> 赞同：0
> 
> 时间：2012-08-14T10:01:19.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

1º用户**约翰**有很多礼物

**用户.rb**

```
class User
  include Mongoid::Document
  has_many :gifts, dependent: :destroy, :autosave => true
  has_many :orders, dependent: :destroy, :autosave => true
 end 
```

**礼物.rb**

```
 class Gift
      include Mongoid::Document
      belongs_to :user
      has_many :orders ,dependent: :destroy, :autosave => true
     end 
```

2º 用户**Anthony给****John**买礼物并下新订单

```
class Order
   include Mongoid::Document
   belongs_to :gift
   belongs_to :user
  end 
```

现在，用户 Anthony 想要访问他所做的所有销售。

**这里的挑战是用户可能有两个角色，买方或卖方。**

我应该如何在 Antonio 可以访问其销售额的模型之间建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:19:56.780

## 模型结构

```
class User
  include Mongoid::Document

  has_many :gifts, dependent: :destroy, :autosave => true
  has_many :orders, dependent: :destroy, :autosave => true
end

class Gift
  include Mongoid::Document

  belongs_to :user
  belongs_to :gifted_to, :class_name => 'User'

  has_one :order ,dependent: :destroy, :autosave => true
end

class Order
  include Mongoid::Document

  belongs_to :gift
  # below associtation is just for quicker ref 
  # otherwise you can have access to it via gift also
  belongs_to :user
end 
```

# java - 在 Jar 外放置和使用 .properties 文件

> ID：11949931
> 
> 赞同：2
> 
> 时间：2012-08-14T10:01:42.023
> 
> 标签：java, netbeans, properties, jar

我正在 Netbeans 中开发 Java 应用程序。该应用程序使用**.properties**文件（`Properties`类）。问题是 Netbeans 将此属性文件插入到最终的 .jar 文件中。

1.  我怎样才能让 Netbeans 不这样做并将属性文件从 jar 文件中取出？
2.  在这种情况下，如何在代码中使用属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:08:28.403

查看要求 NetBeans 插入 JAR 并`.properties`从列表中删除的源目录。

只要`.properties`文件`InputStream`位于`CLASSPATH`.

问题是：为什么你觉得有必要把它从那个 JAR 中移出？至少它在 CLASSPATH 中是这样的。你似乎在这里违背了你自己的最大利益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:11:13.643

当您从 Eclipse IDE 以 jar 格式导出项目时，您可以配置它不要将文件 .properties 导入 jar 文件。

如果你想在同一个文件夹中使用 .properties 文件和文件 jar，你可以通过代码获取当前路径：

```
String path = <NameClass>.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

现在，您可以从上述路径加载文件 .properties。

祝你好运！

# javascript - 硬币滑块在 ASP.net 服务器上不起作用

> ID：11949932
> 
> 赞同：0
> 
> 时间：2012-08-14T10:01:43.320
> 
> 标签：javascript, jquery, asp.net, webserver, slider

我正在为一家公司制作网站，我想在主页上使用 Jquery 滑块。我正在使用 Visual Studio 制作网站，并尝试在页面上实现 Coin 滑块。我为它下载了文件并复制了代码，更改了图片，当我尝试在本地主机上查看它时一切正常。但问题是，当我将它上传到服务器时，滑块根本不起作用，它只是将图片放在彼此下方。
我正在使用的代码如下：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript" src="/Jquery/coin-slider.min.js" ></script>
<link rel="stylesheet" href="/coin-slider-styles.css" type="text/css" /> 
```

和：

```
<script type="text/javascript">
$(document).ready(function () {
$('#coin-slider').coinslider({ width: 759, navigation: true, delay: 5000,effect: 'straight', });
 });
</script> 
```

对于图像：

```
<div id="coin-slider">

     <img src="Images/image1.jpg" alt="" width="759px" height="256px" />
     <img src="Images/image2.jpg" alt="" width="759px" height="256px" />
     <img src="Images/image3.jpg" alt="" width="759px" height="256px" />

</div> 
```

如果我尝试查看 Firefox 的 Web 控制台的问题，则会收到以下消息：

```
 TypeError: $("#coin-slider").coinslider is not a function 
```

当我将它上传到服务器时，我不知道出了什么问题，所以我将不胜感激。:) 我还尝试使用 Nivo 滑块而不是 Coin 滑块来查看问题是否出在滑块上，但一切都一样——它在我的本地主机上工作，但在服务器上不工作。

这是您可以看到该网站现在的链接：
[http ://web.bptech.dk:33001/](http://web.bptech.dk:33001/)

感谢您的任何帮助！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:05:53.893

我建议你有一个路径问题，“/”，可能不是两台机器上的相同路径。

# c# - 如何在 DirectShow.NET 中只播放特定的音频通道并将其余通道静音？

> ID：11949942
> 
> 赞同：1
> 
> 时间：2012-08-14T10:02:27.983
> 
> 标签：c#, audio, directshow, directshow.net

我正在尝试播放带有多声道音频的 AVI 文件。
如何使用 DirectShow.NET 静音或播放特定频道？

有没有办法使用现有的 DirectShow 过滤器接口来做到这一点，或者是否有可以做到这一点的 3rd 方过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:31:06.903

您需要将所有通道合并为一个并指定`WaveFormatExtensible`，而不是`WaveFormatEx`因为您需要指定输出通道的掩码。如果您收到较少或相同数量的需要输出的通道，则采样采集器方式将起作用：例如 - 您接收立体声并且您需要输出到后置或中央通道 - 这种方式不起作用，因为您无法更改采样采集器中的类型，但输出到左声道或右声道可以正常工作。

您可以使用我的执行该功能的 directshow 示例过滤器，您可以在此处找到它：[Pure .NET DirectShow Filters in C#](http://www.codeproject.com/Articles/421167/Pure-NET-DirectShow-Filters-in-Csharp)

# erlang - 如何确定氮气中的referer？

> ID：11949944
> 
> 赞同：1
> 
> 时间：2012-08-14T10:02:29.620
> 
> 标签：erlang, referrer, nitrogen

我知道 PHP 中的 $_SERVER['HTTP_REFERER'] ，并且我相信在 Nitrogen 中有一些简单的东西，但我只是在文档中找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:25:47.013

你在找[`wf:header(referer)`](http://nitrogenproject.com/doc/api.html#sec-12)，我想。

# python - Django：有什么方法可以删除这个明确的字段？

> ID：11949945
> 
> 赞同：7
> 
> 时间：2012-08-14T10:02:31.477
> 
> 标签：python, django

有什么办法可以删除这个模型表单文件字段的“清除”复选框？我知道我可以为文件字段定义“自定义”小部件，但是如何解决这个复选框？![在此处输入图像描述](../Images/869f55f0794adf14ce993f7faba0d5d3.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T11:04:47.387

您需要将小部件从 ClearableFileInput 更改为 Fileinput [https://docs.djangoproject.com/en/dev/ref/forms/widgets/#fileinput](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#fileinput)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-13T16:16:39.153

添加到@shacki的答案。以下是如何使用更简单的`FileInput`小部件：

```
# forms.py
from django.forms.widgets import FileInput

class SomeForm(forms.Form):
    foofile = forms.FileField(widget=FileInput) 
```

默认的 FileField 小部件似乎是`ClearableFileInput`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-02T03:04:25.317

我知道这个问题很长，但是对于仍然试图从表单上显示的清除复选框中删除的任何人，只需从模型中删除 blank=True 即可。

IE

## 楷模

myimage = models.Image(blank=True, upload_to='my_profile')

到

myimage = models.Image(upload_to='my_profile')

这是因为空白 = True 是使复选框出现在表单中的图像输入之外的原因。

# 希望这可以帮助

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T10:46:23.967

如果您在模板中直接使用典型渲染 ImageField，您`{{ imagefieldname }}`可以轻松地格式化它，只需在渲染模板后用 Django 生成的 HTML 的复制粘贴替换它。

您可以在 Django 生成的 HTML 中看到“清除”复选框，如果需要，可以将其删除。

# php - Redis 中的 Geohash 与 php

> ID：11949946
> 
> 赞同：2
> 
> 时间：2012-08-14T10:02:32.320
> 
> 标签：php, redis, geohashing

我将 Redis 与 php 及其库**phpredis 一起**使用。

我有以下结构：

```
city:1 {
 lat->14.02,
 lon->10.00,
 hash->sp2f1h60w5j
}

city:2 {
 lat->14.03,
 lon->10.1,
 hash->sp2f1h60w5m
} 
```

但我还没有找到一种通过哈希搜索的方法。我想搜索例如完全相同的哈希或大致相同的哈希。我应该改变我的结构吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:00:53.237

[您可以按照此线程](https://groups.google.com/forum/?fromgroups#!topic/redis-db/Mw0lRzutnkE%5B1-25%5D)中Josiah Carlson 的建议，将散列转换为数字，并将其用作排序集中的分数。像这样的东西：

```
city:1 {
 lat->14.02,
 lon->10.00,
 hash->sp2f1h60w5j
}

city:2 {
 lat->14.03,
 lon->10.1,
 hash->sp2f1h60w5m
} 
```

要将 geohash 用作数字，您需要使用特定的字符映射从 base 32 解码它们 - 请参阅[Wikipedia 上的 Geohash](http://en.wikipedia.org/wiki/Geohash)。我将在下面使用示例数字。

```
cities { (1, 4711), (2, 4712) } 
```

现在您可以使用[zrangebyscore](http://redis.io/commands/zrangebyscore)来查找某个地区的城市：

```
zrangebyscore cities 4000 5000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T16:30:37.690

为什么不使用redis中的key来获取元素。

喜欢：

城市-sp2f1h60w5j = 1

城市-sp2f1h60w5m = 2

然后，如果您希望壁橱：通过“钥匙”获得：city-sp2f1h60w* 如果将返回钥匙的“数组”......或城市ID。不记得确切的返回数据。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-08T11:22:27.453

您想查找特定点附近的所有项目吗？由于您正在寻找完全匹配或近似匹配，我认为是这种情况。Redis 昨天刚刚发布了全新的地理功能 ( [http://redis.io/commands#geo](http://redis.io/commands#geo) )。

GeoRadius 和 GeoRadiusByMember 是您正在寻找的。

# c# - 使用控制台 writeline c#

> ID：11949951
> 
> 赞同：3
> 
> 时间：2012-08-14T10:02:48.057
> 
> 标签：c#

我需要输出`d`使用相同的值`Console.WriteLine`。但我只得到*结果*而不是`d`输出的值。我可以通过什么方式实现这一目标？

```
namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            int a;
            int b;
            Console.WriteLine("Please Enter the first Digit");
            a = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Please Enter the Second Digit");
            b = Convert.ToInt32(Console.ReadLine());
            int d = a + b;
            Console.WriteLine("Result",(d));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T10:04:07.297

采用：

```
Console.WriteLine("Result {0}", d); 
```

您正在使用[此重载](http://msdn.microsoft.com/en-us/library/828t9b9h.aspx)。

更新

如果您查看上面的链接，您可以了解它是如何工作的。简而言之，首先您指定格式，其中 {0} 引用 param 对象数组的第一个值，{1} 引用 param 对象数组的第二个值，依此类推。在格式化之后，您给出要使用的对象.

因此，在您的情况下，您需要一个值，这意味着两个参数、一个格式和一个值。因此，带有 d 的“结果 {0}”将变为（例如当 d=10 时）“结果 10”。

注意：也去掉了不必要的括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:05:49.647

采用

```
Console.WriteLine("Result {0}", d); 
```

# android - How to make FrameLayout focusable?

> ID：11949958
> 
> 赞同：0
> 
> 时间：2012-08-14T10:03:10.090
> 
> 标签：android

My `FrameLayout` have few `EditText`s and I want them to drop focus when I'm touching `FrameLayout`. Is that possible and how?

I'm tried to set `android:focusable` to `true`, but with no luck.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:22:51.813

In addition to what I've done it's required to call `requestFocus()` on `FrameLayout`.

# database - postgresql 超级用户没有密码提示

> ID：11949959
> 
> 赞同：13
> 
> 时间：2012-08-14T10:03:21.400
> 
> 标签：database, postgresql, authentication, postgresql-9.1

在 Ubuntu 12.04 上安装 PostgreSQL 9.1 后，我为“postgres”超级用户帐户设置了密码。我希望所有用户在登录时都必须输入密码。这就是我这样配置 pg_hba.conf 的原因：

```
#Database administrative login by Unix domain socket
local   all             postgres                                md5

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     md5 
```

进行这些更改后，我重新启动了 postgresql。当我这样做时，`psql -U testuser`我被要求输入密码，但是当我使用“postgres”帐户登录时，`psql -U postgres`我没有密码提示并已登录。如果我强制输入密码提示，`psql -U postgres -W`我可以通过输入正确的密码登录或者根本不输入任何内容。输入错误的密码会被拒绝。

有人可以向我解释为什么会这样吗？

在相关说明中：我看到很多示例，人们使用 ident 作为“postgres”用户的身份验证方法，认为要成为“postgres”用户需要机器的 root 密码。我假设原因是，如果攻击者获得了 root 访问权限，那么无论如何你都完成了。不过，我更喜欢使用密码登录，该密码与 root 密码不同。我更喜欢为不同的事情使用不同的密码。这合理吗？

的输出`grep '^[^#]' pg_hba.conf`

```
local   all             postgres                                md5
local   all             all                                     md5
host    all             all             127.0.0.1/32            md5 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T15:49:47.187

您`pg_hba.conf`确实应该为 unix 套接字连接提供密码，但仍有一些方法可以验证：

1.  `.pgpass`postgres 主目录中包含密码的文件（还要检查[PGPASSFILE](http://www.postgresql.org/docs/9.1/static/libpq-pgpass.html)环境变量以获取非标准路径）。

2.  可以设置 PGPASSWORD 环境变量[。](http://www.postgresql.org/docs/9.1/static/libpq-envars.html)

而且还有可能您正在编辑错误的 pg_hba.conf 文件。以 postgres 连接时，可以通过`SHOW hba_file`SQL 命令获取正确的路径进行验证。

此外，您可能需要检查日志文件，`/var/log/postgresql/postgresql-9.1-main.log`以确认在您请求时重新加载了配置文件，并在身份验证期间查找任何可疑消息。

至于与 postgres 用户的无密码连接很常见的原因，debian PG-9.1`pg_hba.conf`有关于禁止它们的评论：

```
# DO NOT DISABLE!  
# If you change this first entry you will need to make sure that the  
# database superuser can access the database using some other method.  
# Noninteractive access to all databases is required during automatic  
# maintenance (custom daily cronjobs, replication, and similar tasks).  
#  
# Database administrative login by Unix domain socket  
local   all             postgres                                peer 
```

由于 Debian 和 Ubuntu 使用相同的 postgres 包，这也适用于 Ubuntu。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T10:36:23.393

关于您的奇怪行为，我认为您错过了`pg_hba.conf`特定于`postgres`用户的一行。请显示以下输出：

```
grep '^[^#]' pg_hba.conf 
```

至于ident vs md5；就我个人而言，我更喜欢 ident 在开发中进行交互式使用，这对普通用户来说很好，但我认为`postgres`通过提供用户访问权限并不是`sudo`一个好主意。两者都`sudo -u postgres psql`授予`psql -U postgres -W` 对 postgres 超级用户角色的访问权限，从而作为数据库用户授予文件系统访问权限。两者都不需要root密码，并且`sudo`可以很容易地通过`sudoers`限制调用用户来限制运行`psql`。然而，`sudo -u postgres psql`客户*端*代码也运行`postgres`，所以它是一个更大的攻击面，并且用户总是有机会找到绕过你的`sudoer`限制的方法。

我`ident`在开发中使用，`md5`在生产中。

# javascript - 如何获得检查的行 ID？

> ID：11949960
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:03:22.923
> 
> 标签：javascript, asp.net, jqgrid, checkbox

我正在使用 jqGrid，并添加了一个复选框列，我希望能够获得选中的行，以便我可以使用它们调用服务器......

我的 jqGrid 代码：

```
<script type="text/javascript">
    $(function () {
        $("#UsersGrid").jqGrid({
            url: "Handler.ashx",
            datatype: 'json',
            height: '100%',
            width: '500',
            colNames: [' ', 'ref#', 'Module', 'TT#', 'AssignedOn', 'TrialNo'],
            colModel: [
                    { name: ' ', index: 'ChkBox', width: 16, sortable: false, editable: true, formatter: "checkbox", formatoptions: { disabled: false }, editable: true, edittype: "checkbox" },
                    { name: 'ref#', width: 50, sortable: true },
                    { name: 'Module', width: 50, sortable: true },
                    { name: 'TT#', width: 110, sortable: true },
                    { name: 'AssignedOn', width: 110, sortable: true },
                    { name: 'TrialNo', width: 50, sortable: true }
                ],
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#UsersGridPager',
            sortname: ' ',
            viewrecords: true,
            sortorder: 'asc'
            //caption: "Cases"
        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false });
</script> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:33:21.837

您不必手动添加复选框列。这是我的做法：

1.  指定`editurl`和`multiselect`选项：

    ```
    $("#UsersGrid").jqGrid({
      // The grid will send modification data to this url
      //     
      editurl: "url which will handle the edit/delete operations",
      // This ensures there will be a checkbox column in your grid
      //
      multiselect: true,
      ...
    }); 
    ```

2.  为修改操作提供处理程序（响应`editurl`请求）。在我的例子中，它是一个带有这个签名的动作方法：

    ```
    public ActionResult EditItems(string id, string oper, string source, string target)
    {
        // id: list of IDs of the selected items (e.g. "1234,5678")
        // oper: the requested operation ("edit" or "del", if you use the standard ones)
        // source, target: in case of the "edit" operation, these are the new values of the respective columns. I.e. these parameters are model-specific (I have "source" and "target" columns in my grid)
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:31:36.667

您应该更好地选择：true，因为我可以看到您使用复选框实现的功能是选择多行。

这就是它对你的作用。1.在jqgrid参数中设置multiselect:true。

1.  像这样在你的 html 中添加一个按钮

button type="button" value="submit" id="clickMe" >Submit /button> //正确启动和关闭标签。

1.  现在在此按钮的单击事件上，获取所选行的数据并向您的服务器发出一个 ajax 请求。

$('#clickMe').click(function(){ var selRowIds = $('#grid').jqGrid('getGridParam', 'selarrrow');

```
if(selRowIds.length>0)
               {
                   for( var i=0;i<selRowIds.length;i++){
           var ref#=getCellValue(selRowIds[i],'ref#');
           var Module=getCellValue(selRowIds[i],'Module');
           var TT#=getCellValue(selRowIds[i],'TT#');

           var AssignedOn=getCellValue(selRowIds[i],'AssignedOn');
               var TrialNo=getCellValue(selRowIds[i],'TrialNo');

               $.ajax({
               type: 'POST',
               url: '@Url.Action("editMe")',
               contentType: 'application/json; charset=utf-8',
               data:JSON.stringify({ref#: ref#, Module:Module,TT#:TT#,AssignedOn:AssignedOn,TrialNo:TrialNo}),
               dataType: "json",
               success:function(){
               $('#grid').trigger("reloadGrid");
                },

                error: function () {
                       alert("error");
                    }
                }); 
                }
                }
           }); 
```

你的控制器应该是这样的

```
 public ActionResult editMe(string ref#, string Module, string TT#, string AssignedOn, string TrialNo)
        {
          } 
```

我假设您将所有列的数据类型作为字符串，并且它们都是可编辑的：true（您可以使用 colModal 提及这一点。因此，如果只有 Module，AppliedOn 是可编辑的，那么您只能在按钮单击中获取这两个值。根据您的需要，您可以更改代码。

# javascript - 使用数组映射/过滤/减少

> ID：11949961
> 
> 赞同：2
> 
> 时间：2012-08-14T10:03:39.620
> 
> 标签：javascript

我有一个以 Array 作为类成员的类。而且我有许多类函数可以对数组的每个元素做一些事情：

```
function MyClass {
    this.data = new Array();
}

MyClass.prototype.something_to_do = function() {
    for(var i = 0; i <= this.data.length; i++) {
        // do something with this.data[i]
    }
}

MyClass.prototype.another_thing_to_do = function() {
    for(var i = 0; i <= this.data.length; i++) {
        // do something with this.data[i]
    }
} 
```

如果有什么方法可以改进此代码？我正在功能语言中搜索类似“map()、filter()、reduce()”的内容：

```
MyClass.prototype.something_to_do = function() {
    this.data.map/filter/reduce = function(element) {       
    }
} 
```

删除显式 for 循环的任何方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T10:08:56.773

JavaScript中有一个`map()`函数。看看[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

> 创建一个新数组，其结果是对该数组中的每个元素调用提供的函数。

```
MyClass.prototype.something_to_do = function() {
  this.data = this.data.map( function( item ) { 
    // do something with item aka this.data[i]
    // and return the new version afterwards
    return item;
  } );
} 
```

因此有`filter()`( [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter) ) 和`reduce()`( [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce) )。

# c++ - 在 Xcode 中使用不同路径中的标头创建框架

> ID：11949978
> 
> 赞同：1
> 
> 时间：2012-08-14T10:04:19.497
> 
> 标签：c++, xcode, frameworks, header, include

我制作了自己的框架，发现我的测试应用程序可以加载像

```
#include <global.h> 
```

问题是这个 global.h 有更多包含，例如

```
<lol/head.h> 
```

指的是global.h。所以问题是xcode找不到那种头文件，因为当我创建框架时，在Target中，我的Copy Headers构建阶段的所有头文件都在同一级别（global.h的级别）（都在同一个框架中的文件夹）。

任何人都可以帮助我解决这个问题吗？:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:57:46.257

好吧，我发现另一个帖子有同样的问题和一些答案。

[在 xcode 中创建框架时保持目录结构](https://stackoverflow.com/questions/3807241/keeping-directory-structure-when-creating-frameworks-in-xcode)

我所做的是：创建一个运行脚本，将标头从“基本”目录复制到该基本目录中的新文件夹。现在所有的包括工作正常^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:56:53.260

您可以包含放置所有标题的路径。

# html - 如何在 HTML5 Indexed Db 中使用连接？

> ID：11949981
> 
> 赞同：9
> 
> 时间：2012-08-14T10:04:28.367
> 
> 标签：html, join, indexeddb

我确实想在 HTML5 索引数据库中加入两个表。我找到了很多要添加、更新、删除和列出记录的样本，但找不到任何要加入多个表的样本。

*   **示例网址：** * *http://users.telenet.be/kristofdegrave/* *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T08:28:15.850

只是在一般地查看这些技术时想知道同样的问题。没有检查您的特定示例，但这里有一个来自 Mozilla 的示例，说明您需要时如何进行加入：

[https://hacks.mozilla.org/2010/06/comparing-indexeddb-and-webdatabase/](https://hacks.mozilla.org/2010/06/comparing-indexeddb-and-webdatabase/)

与 SQL 相比，这是相当多的代码，但我认为这个想法是稍后使用 JavaScript 抽象这些代码非常容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T16:53:51.863

没有连接，但您可以在游标迭代期间打开多个对象存储并连接。

使用我自己的[ydn-db](https://github.com/yathit/ydn-db)库，您可以`SELECT * FROM Supplier, Part WHERE Supplier.CITY = Part.CITY`通过以下方式查询

```
var iter_supplier = new ydn.db.IndexValueIterator('Supplier', 'CITY');
var iter_part = new ydn.db.IndexValueIterator('Part', 'CITY');
var req = db.scan(function(keys, values) {
  var SID = keys[0];
  var PID = keys[1];
  console.log(SID, PID);
  if (!SID || !PID) {
    return []; // done
  }
  var cmp = ydn.db.cmp(SID, PID); // compare keys
  if (cmp == 0) {
    console.log(values[0], values[1]);
    return [true, true]; // advance both
  } else if (cmp == 1) {
    return [undefined, SID]; // jump PID cursor to match SID
  } else {
    return [PID, undefined]; // jump SID cursor to match PID
  }
}, [iter_supplier, iter_part]); 
```

请参阅[加入查询文章](http://dev.yathit.com/ydn-db/doc/query/join-query.html)的更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-27T16:09:20.380

与其尝试加入，不如重新设计存储数据的方式，以便不需要加入。当您使用 no-sql 方法时，您不需要遵循与 SQL 相同的规范化约束。No-sql 支持在适当的时候冗余存储数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T10:12:30.790

据我所知，IndexedDB 还没有用于执行 JOIN 的 API。我采用的解决方案包括打开游标、遍历结果并手动进行连接。这是可怕的 RBAR 方法，但我找不到更好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T12:25:43.370

IndexedDB 实际上是一个对象存储，并且在对象存储中通常不需要连接，因为您可以只保存嵌套结构。

在您展示的情况下，来自代码表的数据与真实数据相结合。在没有连接的情况下解决这个问题的情况是将您的代码表提取到内存中（通常这些数据永远不会改变）并在代码中进行连接。

# c# - 如何防止机器上安装的语言发生变化

> ID：11949986
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:04:49.200
> 
> 标签：c#, winforms, currentuiculture

我需要使用 alt + shift 键禁用文本框的语言更改。我有改变 currentCulture 的功能，但即使我在 keydown 或 keyup 事件上设置它，按 Alt + Shift 总是切换到下一种语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:57:20.137

您必须检测 Windows 操作系统输入语言的变化，并在应用程序获得焦点时将其更改为您所需的语言。因此，请阅读以下文章以检测 Windows 操作系统输入语言更改： 1\. [http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx) 2\. [http://www.codeproject.com/ KB/system/TrayMe.aspx](http://www.codeproject.com/KB/system/TrayMe.aspx) 然后使用下面的代码来实现你的目标：

```
/// <summary>
/// Changing Current Input Language to a next installed language
/// </summary>
public void ChangeInputLanguage()
{
    // Nothing to do if there is only one Input Language supported:
    if (InputLanguage.InstalledInputLanguages.Count == 1)
        return;
    // Get index of current Input Language
    int currentLang = InputLanguage.InstalledInputLanguages.IndexOf(InputLanguage.CurrentInputLanguage);
    // Calculate next Input Language
    InputLanguage nextLang = ++currentLang == InputLanguage.InstalledInputLanguages.Count ? 
    InputLanguage.InstalledInputLanguages[0] : InputLanguage.InstalledInputLanguages[currentLang];
    // Change current Language to the calculated:
    ChangeInputLanguage(nextLang);
}

/// <summary>
/// Changing current Input Language to a new one passed in the param
/// </summary>
/// <param name="ISOLang">ISO Culture name string code e.g. "en" for English</param>
public void ChangeInputLanguage(string ISOLang)
{
    // Convert ISO Culture name to InputLanguage object. Be aware: if ISO is not supported
    // ArgumentException will be invoked here
    InputLanguage nextLang = InputLanguage.FromCulture(new System.Globalization.CultureInfo(ISOLang));
    ChangeInputLanguage(nextLang);
}

/// <summary>
/// Changing current Input Language to a new one passed in the param
/// </summary>
/// <param name="LangID">Integer Culture code e.g. 1033 for English</param>
public void ChangeInputLanguage(int LangID)
{
    // Convert Integer Culture code to InputLanguage object. Be aware: if Culture code is not supported
    // ArgumentException will be invoked here
    InputLanguage nextLang = InputLanguage.FromCulture(new System.Globalization.CultureInfo(LangID));
    ChangeInputLanguage(nextLang);
}

/// <summary>
/// Changing current Input Language to a new one passed in the param
/// </summary>
/// <param name="InputLang">New Input Language as InputLanguage object</param>
public void ChangeInputLanguage(InputLanguage InputLang)
{
    // Check is this Language really installed. Raise exception to warn if it is not:
    if (InputLanguage.InstalledInputLanguages.IndexOf(InputLang) == -1)
        throw new ArgumentOutOfRangeException();

    // InputLAnguage changes here:
    InputLanguage.CurrentInputLanguage = InputLang;
} 
```

# javascript - Slimbox 以整个页面为中心，而不是窗口

> ID：11949989
> 
> 赞同：0
> 
> 时间：2012-08-14T10:05:01.553
> 
> 标签：javascript, positioning, slimbox

我试图将 Slimbox 集成到我的网页中，但无法使其正常工作。出于某种原因，弹出窗口以整个页面为中心，而不仅仅是其可见部分。这是情况的一个例子：[here](http://ondra.cifka.com/_/slimbox/index.html)。

我在 Linux 上的 Firefox 和 Chrome 中对其进行了测试，其他网页上的 Slimboxes 看起来还不错。知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T23:31:04.517

还记得`<!DOCTYPE html>`在 HTML5 文档中。就我而言，这在 Slimbox 2.05 中很重要！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:59:08.117

所以我将 doctype 从 HTML 4.0 Transitional 更改为 XHTML 1.0 Transitional，它就像魔术一样工作。有人知道为什么吗？在 Slimbox 1 自述文件中有一个 XHTML 文档类型，但他们没有在版本 2 的自述文件中提到它。

# android - Android：捆绑始终为空

> ID：11949990
> 
> 赞同：1
> 
> 时间：2012-08-14T10:05:01.633
> 
> 标签：android, android-fragments, android-lifecycle

我有一个片段，对于屏幕旋转，我想保存一些我拥有的状态

```
@Override
public void onSaveInstanceState(Bundle bundle)
{
    super.onSaveInstanceState(bundle);
    bundle.putSerializable("myList", myList);
    bundle.putString("test", "test");
 } 
```

为了保存我需要的数据，我可以在调试器中看到至少调用了代码然后获取我拥有的数据

```
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    if(savedInstanceState != null)
    {
        //do something        
    }
    else
    {
        //do something else
    }
} 
```

但在这里，我总是以 if 语句的 else-brach 结尾。我不知道为什么它是空的。谢谢。

**编辑** 根据第一个答案更改了代码加上：

旋转屏幕时，我在调试器中看到：

> 1.  onSaveInstanceState 被调用
> 2.  onCreate 被调用 --> bundle != null
> 3.  再次调用 onCreate（为什么？）--> bundle = null
> 4.  onCreateActivity 被调用 --> bundle = null

**编辑 2** 我发现了关于标签的类似帖子，它们在哪里分离，这就是为什么它被调用两次。我不得不承认我还没有完全理解这些帖子......但它可能与此有关。在我的活动中，我有以下代码

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    OverviewFragment of = new OverviewFragment();
    FragmentTransaction tof = getFragmentManager().beginTransaction();

    tof.replace(R.id.frag_overview, of);
    DetailFragmentInitial df = new DetailFragmentInitial();
    tof.replace(R.id.frag_details, df);
    tof.commit();

} 
```

并且可能不得不以某种方式改变它......但我不确定......如果我仅在 savedInstaceState 为空时执行片段事务，那么它似乎可以工作。但我不确定我以后是否会遇到不同的问题。有人对此有一些背景知识吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:30:47.473

为了更好地了解，这里是**@AndyAndroid**的工作解决方案（如他的评论中所述）：

> 答案是在编辑 2 中使用 `if(getFragmentManager().findFragmentByTag("overviewFrag") == null)`并且当然设置标签来包围我的片段事务。

* * *

关于同一主题有一个较旧的问题，可以在此处找到：[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

为了概述代码（在接受的答案中）与您的代码之间的区别，该示例在将其自己的值放入包**之前调用超级方法。**

**@jkschneider**的评论概述了这一点：

> **小心：您需要在将值添加到 Bundle 之前**调用 super.onSaveInstanceState(savedInstanceState) ，否则它们将在该调用中被清除（Droid X And​​roid 2.2）。

* * *

作为一般建议，始终使用`@Override`-annotation 注释覆盖的方法，以获得编译时安全性。有关更多信息，请参阅：[何时使用 Java 的 @Override 注释以及为什么？](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)

* * *

以下是一些更相关的问题，可能会有所帮助：

*   [片段 onCreateView 和 onActivityCreated 调用了两次](https://stackoverflow.com/questions/10983396/fragment-oncreateview-and-onactivitycreated-called-twice)（你所说的那个）
*   [android onCreateOptionsMenu 恢复状态时调用了两次](https://stackoverflow.com/questions/11003941/android-oncreateoptionsmenu-called-twice-when-restoring-state)（同一个人一天后问，得到了别人的回复）
*   [使用选项卡在 ActionBar 中调用 onCreateOptionsMenu 的次数过多](https://stackoverflow.com/questions/7224415/oncreateoptionsmenu-is-being-called-to-many-times-in-actionbar-using-tabs/7225296#7225296)（他提供的链接）

检查最后一个答案中给出的代码是否适合您，因为它似乎适用于其他两个问题的 OP。

# c# - 赋值兼容性、逆变和隐式类型转换

> ID：11949992
> 
> 赞同：4
> 
> 时间：2012-08-14T10:05:18.573
> 
> 标签：c#, contravariance

```
static void HandleDemoEvent(object sender, EventArgs e)
{
    Console.WriteLine("bla-bla");
}

static void Main(string[] args)
{
    EventHandler handler;
    MouseEventHandler mouseHandler;

    handler = HandleDemoEvent; //Line#1 - Compile OK
    mouseHandler = HandleDemoEvent; //Line#2 - Compile OK
    mouseHandler = handler; //Line#3 Compile Error  1   Cannot implicitly convert type 'System.EventHandler' to 'System.Windows.Forms.MouseEventHandler'

} 
```

`EventHandler`委托类型和我自己的方法都`HandleDemoEvent`具有相同的方法签名。然而 Line#2 编译得很好（发挥逆变性），但 Line#3 因隐式类型转换错误失败而失败。一个简单的例子，我直观地理解为什么 Line#3 会发生编译错误，但我无法通过某种形式的解释来解决这个问题。任何人都可以提出一个很好的理解来解释差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:22:28.207

委托协变/逆变仅适用于从方法构建委托时，如前两种情况。

当您将一个代表分配给另一个代表时，它不起作用，就像您的最后一种情况一样。（除非您使用泛型委托，在这种情况下，您可以对泛型参数使用协变/逆变。）

An`EventHandler`不是`MouseEventHandler`- 但两者都可以包装`void`采用 an`object`和 an的方法`EventArgs`。

# xml - 通过他们的兄弟姐妹查找 XML 元素

> ID：11949993
> 
> 赞同：0
> 
> 时间：2012-08-14T10:05:21.537
> 
> 标签：xml, vb.net, siblings

如何使用 Visual Basic 找到 XML 元素的兄弟？假设我有：

```
<Data>
  <Mail>
    <Subject>Welcome!</Subject>
    <From>Antonios</From>
    <Content>Welcome! How can I assist you?</Content>
  </Mail>
  <Mail>
    <Subject>Test!</Subject>
    <From>John</From>
    <Content>Hello Friend!</Content>
  </Mail>
</Data> 
```

现在我有一个添加每个主题的列表框，所以列表显示：*欢迎！*和*测试！* 现在我想要那个，当我点击**“欢迎！”时** ，一个文本框显示 **“欢迎”的****“发件人”**元素的内容。另一个文本框显示了**"Welcome"的****"Content"**元素。换句话说，我正在寻找**特定元素的 Sibling**。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:06:29.387

您可以通过多种方式执行此操作。以下是使用`XmlDocument`XPath 的方法：

```
Dim doc As New XmlDocument()
Dim From As String = doc.SelectSingleNode("/Data/Mail[Subject='Welcome!']/From").InnerText
Dim Content As String = doc.SelectSingleNode("/Data/Mail[Subject='Welcome!']/Content").InnerText 
```

显然，由于主题可能不是唯一的，因此最好使用一些作为唯一 ID 的元素，或者您可以通过索引来完成。例如，这从第一封邮件中选择：

```
Dim From As String = doc.SelectSingleNode("/Data/Mail[1]/From").InnerText 
```

但是，执行此类操作的最佳方法是将所有需要的数据预先加载到内存中。除非数据量太大，听起来不像，否则这通常是最有意义的。因此，例如，我建议创建一个表示邮件消息的数据对象，例如：

```
Public Class Mail
    Public Property Subject() As String
        Get
            Return _subject
        End Get
        Set(ByVal value As String)
            _subject = value
        End Set
    End Property
    Private _subject As String

    Public Property From() As String
        Get
            Return _from
        End Get
        Set(ByVal value As String)
            _from = value
        End Set
    End Property
    Private _from As String

    Public Property Content() As String
        Get
            Return _content
        End Get
        Set(ByVal value As String)
            _content = value
        End Set
    End Property
    Private _content As String

    Public Overrides Function ToString() As String
        Return _subject
    End Function
End Class 
```

然后，您可以为 XML 中的每个 Mail 元素加载一个`Mail`对象。因为该`ToString`方法被重写以显示主题，所以您可以直接将对象添加到列表框中，例如：

```
Dim doc As New XmlDocument()
For Each node As XmlNode In doc.SelectNodes("/Data/Mail")
    Dim mail As New Mail()
    mail.Subject = node.SelectSingleNode("Subject").InnerText
    mail.From = node.SelectSingleNode("From").InnerText
    mail.Content = node.SelectSingleNode("Content").InnerText
    ListBox1.Items.Add(mail)
Next 
```

然后，当列表框中的项目被选中时，您可以将所选项目强制转换为`Mail`类型并访问其属性，例如：

```
Dim mail As Mail = CType(ListBox1.SelectedItem, Mail)
Label1.Text = mail.From
Label2.Text = mail.Content 
```

但是，此时，如果数据不是太大，使用 将`XmlSerializer`XML 简单地反序列化为对象会更容易，例如，首先创建一个定义整个 XML 文档的类，如下所示：

```
Public Class Data
    <XmlElement("Mail")> _
    Public Property Mails() As List(Of Mail)
        Get
            Return _mails
        End Get
        Set(ByVal value As List(Of Mail))
            _mails = value
        End Set
    End Property
    Private _mails As List(Of Mail)
End Class 
```

然后像这样将 XML 加载到列表框中（其中`xml`是包含 XML 文档的字符串）：

```
Dim serializer As New XmlSerializer(GetType(Data))
Dim reader As New StringReader(xml)
Dim data As Data = CType(serializer.Deserialize(reader), Data)
ListBox1.Items.AddRange(data.Mails.ToArray()) 
```

或者，如果您想直接从 XML 文件中读取，而不是从字符串中反序列化：

```
Dim serializer As New XmlSerializer(GetType(Data))
Using stream As New FileStream("Test.xml", FileMode.Open)
    Dim data As Data = CType(serializer.Deserialize(stream), Data)
    ListBox1.Items.AddRange(data.Mails.ToArray())
End Using 
```

要回答您在下面的评论中提出的第二个问题，要删除给定的邮件，您可以这样做：

```
Dim node As XmlNode = doc.SelectSingleNode("/Data/Mail[Subject='Welcome!']")
node.ParentNode.RemoveChild(node) 
```******

# delphi - 如何优化通过 dbxmss.dll/sqlncli.dll 执行的 sql 处理？

> ID：11949997
> 
> 赞同：3
> 
> 时间：2012-08-14T10:05:36.093
> 
> 标签：delphi, oledb, dbexpress

在我的 MS SQL Server (2008R2) 上定义的表定义如下：

```
create table stagefm.dbo.article (id nvarchar(10)); 
```

我通过 dbexpress (dbxmss.dll) 向我的 MS SQL Server 发送一个简单的插入语句：

```
Q.SQL.Text:= 'INSERT into stagefm.dbo.article (id) values (':id')';
Q.Prepared:= true;
Q.ParamByName('id').AsString:= 'test';
Q.ExecSQL; 
```

使用 SQL Profiler，我看到在我的服务器上执行了以下 SQL：

```
exec sp_executesql N'INSERT INTO stagefm.dbo.artikelstamm (id) values (@P1)', 
N'@P1 nvarchar(4000)',
N'test' 
```

当我使用第三方 dbexpress 驱动程序 (DevArt dbxsda40.dll) 时，当指示驱动程序使用 Native Client 驱动程序 (vendorlib=sqlncli) 时，我可以看到相同的行为。我相信标准的 Delphi 驱动程序也使用本机客户端（sqlncli10.dll）。

现在，当我指示 DevArt 驱动程序使用 sqloledb 作为供应商库时，我可以使用 SQL Profiler 看到以下内容：

```
exec sp_executesql N'INSERT INTO stagefm.dbo.artikelstamm (id) values (@P1)', 
N'@P1 nvarchar(10)',
N'test' 
```

我也希望本机客户端 SQL 的代码也如此，但本机客户端似乎总是生成 nvarchar(4000) 变量，即使对于简单的 nvarchar(1) 或 char(3) 字段也是如此。

是否也可以优化 Native 客户端的 SQL 处理？