# StackOverflow 问答 10696000-10696999

# html - 如何更改下拉列表项的字体系列？

> ID：10696004
> 
> 赞同：29
> 
> 时间：2012-05-22T05:09:46.807
> 
> 标签：html, css, select, drop-down-menu

我有一个列出字体系列的下拉列表。像 Tahoma、Arial、Verdana 等。我想根据它所代表的值更改每个下拉项的 font-family。就像 Photoshop 一样。

我更改了每个下拉项的 CSS，但它仅适用于 FireFox。它不适用于任何其他浏览器。

我不想使用任何 jQuery 插件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-22T05:30:11.750

那是因为`select`元素 children ( `option`s) 并不是真正可设置样式的，而 firefox 似乎是唯一一个忽略该规范部分的浏览器。

解决方法是用一个自定义小部件替换您的`select`元素，该小部件仅使用可样式化元素，也许还有一些用于交互的 javascript。就像这里所做的：http: ~~[//jsfiddle.net/sidonaldson/jL7uU/](http://jsfiddle.net/sidonaldson/jL7uU/)~~或[http://jsfiddle.net/theredhead/4PQzp/](http://jsfiddle.net/theredhead/4PQzp/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-03T09:44:34.330

你可以做这样的事情

```
<select>
<optgroup style="font-family:arial">
    <option>Arial</option>
</optgroup>
<optgroup style="font-family:verdana">
    <option>veranda</option>
</optgroup> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-08T17:01:47.403

您可以通过以下方式为 HTML 下拉列表设置字体：
1\. 构建将显示在下拉列表中的选项列表，但不要将任何样式/类应用于任何这些选项。在 PHP 中，我会将我的选项列表存储到一个变量中，然后使用该变量将选项添加到我将在下面显示的下拉列表中。
2\. 当您想将下拉菜单实际插入页面时，请使用 SELECT 标记并在该标记内放置一些 CSS 样式，如下所示：

```
<SELECT style='font-size: 10px; font-family: "Verdana", Sans-Serif;' name='???????'>
<?php echo $your_variable_containing_dropdown_content; ?>
</SELECT> 
```

在我目前正在工作的网站上，这对我来说 100% 没问题。这只是我在页面中使用的样式，但它可以是您需要的任何样式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-10T17:30:41.873

我知道这是一个老问题，但我找到了一个更简单的解决方案，它似乎适用于大多数浏览器，如果不是全部的话（在 FireFox、Chrome 和 Edge 中测试）。

要更改 a 中每个单独项目的样式`select`，我只是向标签添加了一个`style`属性。`option`

这是一个例子：

```
<select>
    <option style="font-family:Arial;background-color:#F22">Arial</option>
    <option style="font-family:'Arial Black'">Arial Black</option>
    <option style="font-family:Verdana">Verdana</option>
</select>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T05:26:18.633

您在 CSS 中可以做的就是您所描述的：设置元素，这对浏览器的支持有限`font-family`。`option`浏览器可以`select`使用部分或完全不受 CSS 影响的例程来实现元素。

解决方法是使用元素以外的东西`select`，例如一组单选按钮，但它的呈现方式当然与下拉菜单不同。然后你可以使用例如

```
<div><input type="radio" name="font" value="Tahoma" id="tahoma">
<label for="tahoma" style="font-family: Tahoma">Tahoma</label></div>
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-12T00:50:38.520

我不是最聪明的 CSS 人，但在我看来，如果*选择*元素的样式会改变字体，正如许多其他答案所提交的那样，那么引用 selects 的 CSS 规则也应该起作用。

就我而言，我在*html*上设置了 font-family ，它适用于除*选择*元素之外的所有地方。所以我将规则更改为适用于*html*并*选择*元素，它起作用了。在 Chrome 和 Edge 上测试（虽然 Edge 不需要选择规则开始）。

底线：*html，选择 { font-family: Verdana, Geneva, sans-serif; }*

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-05-23T14:12:14.077

尝试这个：

```
<html>
  <head>
    <style>
.styled-select {
        overflow: hidden;
        height: 30px;
}
.styled-select select {
        font-size: 14pt;
        font-family:"Times New Roman",Times,serif;
        height: 10px;
}
</style>
    <title></title>
  </head>
  <body>
    <div class="styled-select">
      <select>
        <option selected="selected" >One</option>
        <option >Two</option>
      </select>
    </div>
  </body>
</html> 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2012-05-22T05:27:39.053

这应该给你一个想法来完成这个：

```
<select>

    <option value="Arial">First</option>
    <option value="Verdana">Second</option>

    </select>

    $(function() {
    $('select > option').hover(function() {
        $(this).parent().css({fontFamily:$(this).val()})    
})            
}) 
```

**[JSFIDDLE](http://jsfiddle.net/gdJCN/17/)**

# android - Android NDK：您的 APP_BUILD_SCRIPT 指向一个未知文件：

> ID：10696005
> 
> 赞同：2
> 
> 时间：2012-05-22T05:10:00.120
> 
> 标签：android, command-line, android-ndk

```
cd Documents/workspace/ndkfoo 
```

我的项目之家

然后我尝试运行 ndk-build 命令但不断得到

```
ndk-build
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: /Users/naveenkumar/workspace/com.gslab.zap:/Users/naveenkumar/Android/android-ndk-r8:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/naveenkumar/Android/android-ndk-r8:/usr/X11/bin:/usr/local/git/bin/jni/Android.mk 
```

我知道 APP_BUILD_SCRIPT 指向不同的地方，它应该是 /Users/naveenkumar/Documents/workspace/ndkfoo/jni/Android.mk 我在这个地方有我的 Android.mk ......

但我不知道如何将 APP_BUILD_SCRIPT 更改为此路径:( ,,thnks 提前

我的 Android.mk 很好……这是我的 Android.mk，它位于项目的 jni 文件夹下：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
#here we give our module name and source files.
LOCAL_MODULE := ndkfoo
LOCAL_SRC_FILES := ndkfoo.c
include $(BUILD_SHARED_LIBRARY) 
```

当我使用 NDK_LOG=1 运行它时，我得到以下信息

```
NAVEEN-KUMARs-MacBook-Pro:ndkfoo naveenkumar$ /Users/naveenkumar/Downloads/android-ndk-r8/ndk-build NDK_LOG=1
HOST_OS=darwin
HOST_ARCH=x86_64
HOST_TAG=darwin-x86 (no 64-bit prebuilt binaries detected)
GNUMAKE=/Users/naveenkumar/Downloads/android-ndk-r8/prebuilt/darwin-x86/bin/make (NDK prebuilt)
Android NDK: NDK installation path auto-detected: '/Users/naveenkumar/Downloads/android-ndk-r8'
Android NDK: GNU Make version 3.81 detected
Android NDK: Host OS was auto-detected: darwin
Android NDK:  Host operating system detected: darwin
Android NDK: Host CPU was auto-detected: x86
Android NDK: HOST_TAG set to darwin-x86
Android NDK: Host tools prebuilt directory: /Users/naveenkumar/Downloads/android-ndk-r8/prebuilt/darwin-x86/bin
Android NDK: Host 'echo' tool: echo
Android NDK: Host 'awk' tool: /Users/naveenkumar/Downloads/android-ndk-r8/prebuilt/darwin-x86/bin/awk
Android NDK: Host 'awk' test returned: Pass
Android NDK:  This NDK supports the following target architectures and ABIS:
Android NDK:    arm: armeabi armeabi-v7a
Android NDK:    mips: mips
Android NDK:    x86: x86
Android NDK:  This NDK supports the following toolchains and target ABIs:
Android NDK:    arm-linux-androideabi-4.4.3:  armeabi armeabi-v7a
Android NDK:    mipsel-linux-android-4.4.3:  mips
Android NDK:    x86-4.4.3:  x86
Android NDK: Found platform root directory: /Users/naveenkumar/Downloads/android-ndk-r8/platforms
Android NDK: Found supported platforms: android-14 android-3 android-4 android-5 android-8 android-9
Android NDK: PLATFORM android-14 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-14/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-14/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-14/arch-x86
Android NDK: PLATFORM android-3 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-3/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-3/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-3/arch-x86
Android NDK: PLATFORM android-4 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-4/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-4/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-4/arch-x86
Android NDK: PLATFORM android-5 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-5/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-5/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-5/arch-x86
Android NDK: PLATFORM android-8 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-8/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-8/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-8/arch-x86
Android NDK: PLATFORM android-9 supports: arm mips x86
Android NDK:   ABI arm sysroot is: /Users/naveenkumar/Downloads/android-ndk-    r8/platforms/android-9/arch-arm
Android NDK:   ABI mips sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-9/arch-mips
Android NDK:   ABI x86 sysroot is: /Users/naveenkumar/Downloads/android-ndk-r8/platforms/android-9/arch-x86
Android NDK: Found stable platform levels: 14 3 4 5 8 9
Android NDK: Found max platform level: 14
Android NDK: Found project path: /Users/naveenkumar/workspace/com.gslab.zap:/Users/naveenkumar/Android/android-ndk-r8:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/naveenkumar/Android/android-ndk-r8:/usr/X11/bin:/usr/local/git/bin
Android NDK: Ouput path: /Users/naveenkumar/workspace/com.gslab.zap:/Users/naveenkumar/Android/android-ndk-r8:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/naveenkumar/Android/android-ndk-r8:/usr/X11/bin:/usr/local/git/bin/obj
Android NDK: Parsing /Users/naveenkumar/Downloads/android-ndk-r8/build/core/default-application.mk
Android NDK:   Defaulted to APP_PLATFORM=android-3
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: /Users/naveenkumar/workspace/com.gslab.zap:/Users/naveenkumar/Android/android-ndk-r8:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/naveenkumar/Android/android-ndk-r8:/usr/X11/bin:/usr/local/git/bin/jni/Android.mk    
/Users/naveenkumar/Downloads/android-ndk-r8/build/core/add-application.mk:133: *** Android NDK: Aborting...    .  Stop. 
```

正如我们所看到的，我是主目录..仍然是错误的，还有我放在 jni 下的 Application.mk，所以我尝试将这三行粘贴到 Application.mk

```
APP_PROJECT_PATH := /Users/naveenkumar/Documents/workspace/ndkfoo
APP_BUILD_SCRIPT := /Users/naveenkumar/Documents/workspace/ndkfoo/jni/Android.mk
APP_MODULES      := ndkfoo 
```

目录结构如下：现在我能够运行一次，所以它有.o和它生成的其他库......

NAVEEN-KUMARs-MacBook-Pro:workspace naveenkumar$ find ndkfoo/ -type f

```
ndkfoo//.classpath
ndkfoo//.project
ndkfoo//AndroidManifest.xml
ndkfoo//bin/classes/com/gslab/ndkdemo/BuildConfig.class
ndkfoo//bin/classes/com/gslab/ndkdemo/NDKFooActivity.class
ndkfoo//bin/classes/com/gslab/ndkdemo/R$attr.class
ndkfoo//bin/classes/com/gslab/ndkdemo/R$drawable.class
ndkfoo//bin/classes/com/gslab/ndkdemo/R$layout.class
ndkfoo//bin/classes/com/gslab/ndkdemo/R$string.class
ndkfoo//bin/classes/com/gslab/ndkdemo/R.class
ndkfoo//bin/classes.dex
ndkfoo//bin/ndkfoo.apk
ndkfoo//bin/res/drawable-hdpi/icon.png
ndkfoo//bin/res/drawable-ldpi/icon.png
ndkfoo//bin/res/drawable-mdpi/icon.png
ndkfoo//bin/resources.ap_
ndkfoo//gen/com/gslab/ndkdemo/BuildConfig.java
ndkfoo//gen/com/gslab/ndkdemo/R.java
ndkfoo//jni/Android.mk
ndkfoo//jni/Application.mk
ndkfoo//jni/ndkfoo.c
ndkfoo//libs/armeabi/libndkfoo.so
ndkfoo//obj/local/armeabi/libndkfoo.so
ndkfoo//obj/local/armeabi/objs/ndkfoo/ndkfoo.o
ndkfoo//obj/local/armeabi/objs/ndkfoo/ndkfoo.o.d
ndkfoo//proguard.cfg
ndkfoo//project.properties
ndkfoo//res/drawable-hdpi/icon.png
ndkfoo//res/drawable-ldpi/icon.png
ndkfoo//res/drawable-mdpi/icon.png
ndkfoo//res/layout/main.xml
ndkfoo//res/values/strings.xml
ndkfoo//src/com/gslab/ndkdemo/NDKFooActivity.java 
```

这与未找到的构建脚本不重复，因为我指向正确的构建路径并触发了 cmake。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:31:59.013

引用自此来源：[https ://groups.google.com/forum/#!topic/android-ndk/HIUR2gL6Xj0](https://groups.google.com/forum/#!topic/android-ndk/HIUR2gL6Xj0)

> 构建系统尝试通过回溯目录来找到您的 AndroidManifest.xml。看起来它在 /home/myhome/AndroidManifest.xml 下找到了一个，并认为这是您的项目路径的根目录。我认为这对应于另一个（可能是陈旧的）项目，而不是您想要处理的项目。
> 
> 尝试从包含您的 AndroidManifest.xml 的目录中调用 ndk-build

我想你在这里也有类似的问题。

# asp.net-mvc - Asp Mvc - 提供来自其他本地托管站点的内容

> ID：10696006
> 
> 赞同：1
> 
> 时间：2012-05-22T05:10:05.533
> 
> 标签：asp.net-mvc

我正在尝试找出一个针对asp mvc网站实际编写javascript单元测试的好模式。

我关于如何实现这一点的想法是并行运行两个站点

*   localhost:12345 - 当前实际网站
*   localhost:54321 - 测试网站（设置为运行 jasmine）

当然，为了能够测试任何重要的结果，后者必须能够提供来自前者的文件。我想我应该能够配置一个包罗万象的路由，对于在测试站点上未解析的任何路由，使用相同的 url 和参数请求实际站点并传递结果响应。

我不知道理论上可以阻止这种情况，但是我缺少什么吗？你会如何做重定向部分？

# joomla - Joomla ACL：只允许访问后端的自定义组件？

> ID：10696015
> 
> 赞同：3
> 
> 时间：2012-05-22T05:11:30.253
> 
> 标签：joomla, joomla1.7, joomla1.6, joomla2.5

我正在为后端构建一个组件。我不希望将访问它的用户访问后端中除此组件之外的任何其他内容。

我尝试按照以下两个说明进行操作：

[http://www.aclmanager.net/blog/general/31-how-to-add-basic-acl-support-to-your-extension](http://www.aclmanager.net/blog/general/31-how-to-add-basic-acl-support-to-your-extension)

[http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!1.6_-_Part_14#Describing_the_ACL](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!1.6_-_Part_14#Describing_the_ACL)

我用 public 的父级创建了一个新的用户组并允许管理员登录（这会将他们锁定在一切之外），然后尝试从上面的链接中添加 ACL 代码，并具有创建和编辑权限，但我只是得到一个空白屏幕（不是甚至是注销链接）。“调试权限报告”显示了正确的权限，但没有显示任何内容。

有任何想法吗？我的下一步是手动检查每个组件，并且不允许访问该新用户组，但似乎有一种更简单的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:11:49.380

在 Joomla！2.5 我们定期只创建“内容”后端用户，这些用户只能访问“com_content”组件。

回到我们的步骤，您唯一没有指定的是将新用户组添加到**View Access Level**。如果您使用设置 Joomla 时安装的标准示例内容！网站，您可以将新用户组添加到“特殊”视图访问权限（尽管任何都可以）。

如果一个新组具有“管理员登录”权限，它可以登录，但没有查看访问级别，它什么也看不到.. 这是一个细微的区别，但它是 Joomla 的方式！作品。

# python - 使用 App Engine Python 处理/退回收到的电子邮件

> ID：10696017
> 
> 赞同：0
> 
> 时间：2012-05-22T05:11:52.140
> 
> 标签：python, google-app-engine, email, error-handling, python-2.7

当收到一封产生错误的电子邮件时，退回邮件的最佳方式是什么？例如，您将文件存储在 db.BlobProperty 中，但收到的电子邮件超出了 1m 的限制。请求需要以某种方式出现退回错误，这样电子邮件就不会一直打到服务器并每 15 分钟增加一次计费。（不要问我是怎么知道的：-P ...这不是我在另一个问题中发布的一个单独但相关的问题。[这里](https://stackoverflow.com/questions/10695851/receiving-email-attachments-in-app-engine-python-errors-on-unicode-text-file)）

但是另一个错误清楚地表明我需要处理这个问题，然后才能收到包含多个附件的电子邮件，这些附件让我需要 1gb 的数据。

通常，邮件服务器会处理退回邮件，例如当您发送到错误地址并向客户端/服务器返回错误时。我已经搜索并没有发现任何有用的信息。YMMV

是否有未记录的功能？返回的正确响应是什么，以便源服务器停止发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:39:58.860

一旦消息到达您的 App Engine 应用程序，就无法退回消息。你有两个选择：

1.  使用外发电子邮件 API 自己向用户发送“退回邮件”
2.  默默地丢弃消息

在任何一种情况下，您都应该安装一个顶级异常处理程序（webapp 和 webapp2 等框架对此提供支持）记录异常，执行适当的操作，然后返回状态代码 200 而不是 500，因此消息不会被反复重新交付。

在您的具体情况下，我也会开始将附件存储在 blobstore 而不是 blob 属性中，以避免 1MB 限制。

# arrays - 数组是如何存储在内存中的？

> ID：10696024
> 
> 赞同：12
> 
> 时间：2012-05-22T05:12:31.470
> 
> 标签：arrays, c, pointers, heap-memory, stack-memory

我有一个简单的程序将数组初始化为：

```
int a[]={10,20,30,40,50};   
char *p;
p=(char*)a; 
```

现在我想通过指针访问每个字节的值`p`。为此我需要知道：数组是如何存储在内存中的？它是存储在堆栈上还是堆上？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-22T05:14:11.523

数组将其元素存储在连续的内存位置。
如果您在本地创建了数组，它将在堆栈上。元素的存储位置取决于***存储规范***。
例如：
全局或静态声明的数组与本地声明的数组具有不同的存储规范。从技术上讲，*where*部分是***实现定义***的，但通常实现会使用类似的使用模式。

*   ***本地数组***将（通常）在***堆栈***上创建，而
*   将（通常）在***bss/data 段***上创建一个***全局或静态数组***，并且
**   将在***heap***上创建一个***动态创建的数组***。*

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T05:45:49.247

由于我还不能添加评论，所以这是我的两分钱的答案：

如果您只想知道内存是在堆栈上还是在堆上，请阅读其他答案，他们比我更了解情况。

如果您想知道值的确切位置，您可以随时打印地址：

```
printf("address at a[0] = %p\n", (void *)&a[0]);
printf("address at p[0] = %p\n", (void *)&p[0]); 
```

你会注意到同样的答案。但是，再看看

```
printf("address at a[1] = %p\n", (void *)&a[1]);
printf("address at p[1] = %p\n", (void *)&p[1]); 
```

这是一个有趣的小练习。只是为了好玩，运行以下代码，看看你得到了什么：

```
 p[2] = 'a';
 printf("a[0] is %d\n", a[0]);
 printf("a[1] is %d\n", a[1]);
 printf("p[2] is %d\n", p[2]);
 putchar(p[2]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T05:15:15.380

静态创建的数组将在堆栈上或二进制文件的`.data`/`.bss`部分中。将在堆上分配一个动态创建的数组（带有`new`or ）。`malloc`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-22T05:17:13.540

首先，您的指针必须是 int 类型。数组只是一组整数，作为单个整数保存在内存中，但在一行中。一个整数在内存中有 4 个字节，因此您可以通过将指针增加 4 来访问数组的每个值。

```
int *p = (int*)a;
for(i = 0; i < 5; i++) {
    p += 4;
    printf("%d ", *p);
} 
```**

# user-interface - 如何在黑莓屏幕上的列表项中设置默认选择

> ID：10696026
> 
> 赞同：0
> 
> 时间：2012-05-22T05:12:41.353
> 
> 标签：user-interface, blackberry

我使用自定义列表字段类在我的 blckberry 屏幕中添加了一个项目列表。我可以在我的 bb 屏幕上显示项目列表，但是如何将默认选择设置为列表中的第一项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:29:59.647

检查API 文档中的[setSelectedIndex(int index)](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/ListField.html#setSelectedIndex%28int%29)。

例子：

```
ListField list = new ListField();

// do other task, add on screen

list .setSelectedIndex(3); 
```

# python - 在龙卷风中，如何在没有 tornado.web.RequestHandler 的类中使用 static_url()？

> ID：10696033
> 
> 赞同：1
> 
> 时间：2012-05-22T05:13:12.910
> 
> 标签：python, tornado, static-linking, requesthandler

我正在使用 Tornado，我想在模板中加载一些静态文件。现在我`tornado.web.UIModule`用来加载它们。但是我得到了一些错误，说`static_url()`没有定义。所以我查阅了文档，发现这个函数是`tornado.web.RequestHandler`. 但是我怎样才能在下面的类中加载像这个函数这样的静态文件呢？

```
# _ * _ coding:utf-8 _ * _

import tornado.web
from tornado import template

class Header(tornado.web.UIModule):
"""docstring for Header"""
def render(self, hightlight = "index"):
    return self.render_string("header.html", hightlight = hightlight)

def css_files(self):
    css = [
        static_url("css/smoothness/jquery-ui-1.8.20.custom.css"),
        static_url("css/common.css"),
        static_url("css/jquery.jqplot.min.css"),
        static_url("css/blue/style.css"),
        static_url("css/jquery.vector-map.css")
    ]
    return css;

def javascript_files(self):
    javascript = [
        static_url("js/convert.color.js"),
        static_url("js/jquery-1.7.2.min.js"),
        static_url("js/jquery-ui-1.8.20.custom.min.js"),
        static_url("js/common.js"),
        static_url("js/jquery.jqplot.min.js"),
        static_url("js/plugins/jqplot.highlighter.min.js"),
        static_url("js/plugins/jqplot.cursor.min.js"),
        static_url("js/plugins/jqplot.dateAxisRenderer.min.js"),
        static_url("js/plugins/jqplot.canvasTextRenderer.min.js"),
        static_url("js/plugins/jqplot.canvasAxisLabelRenderer.min.js"),
        static_url("js/jquery.vector-map.js"),
        static_url("js/china-cn.js"),
        static_url("js/jquery.tablesorter.min.js"),
        static_url("js/charts.js")
    ]
    return javascript

def html_body(self):
    return "<!--[if lt IE 9]><script src=\"{{ static_url(\"js/excanvas.js\") }}\"></script><![endif]-->"

def embedded_javascript(self):
    return "<script>var current = null;</script>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:30:48.110

正如您已经提到的，`static_url`是 的一种方法`tornado.web.RequestHandler`，但您将其称为全局函数。

改变

```
static_url(...) 
```

到

```
self.handler.static_url(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:07:15.103

你不需要。如果你给出一个相对路径（在`javascript_files`and中`css_files`，Tornado 会自动运行它通过`static_url`.

# iphone - 将图层阴影裁剪为宽度而不是高度？

> ID：10696042
> 
> 赞同：0
> 
> 时间：2012-05-22T05:14:16.953
> 
> 标签：iphone, objective-c, ios, core-graphics

我正在向视图层添加阴影，如下所示：

```
 self.view.layer.shadowOffset = CGSizeZero;
    self.view.layer.shadowOpacity = 0.10f;
    self.view.layer.shadowRadius = 5.0f;
    self.view.layer.shadowColor = [UIColor blackColor].CGColor;
    self.view.layer.shadowPath = [UIBezierPath bezierPathWithRect:
                                 CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width - 5.0, self.view.bounds.size.height)].CGPath;
    self.view.clipsToBounds = NO; 
```

我想要做的是以某种方式剪辑阴影，使其不会超出宽度，但会超出高度。基本上，我只想要一个 90 度的阴影，而不是我的边界周围的阴影。我尝试从 bezierRect 宽度中减去 shadowRadius 量，但这会稍微弄乱底部的阴影流。

任何想法如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:26:18.117

您可以添加一个新的“容器”视图并将您的视图（内容视图）添加为子视图。容器视图应高于您的视图但宽度相同。如果您将容器视图设置为裁剪到其边界，它将裁剪侧面的阴影，但允许底部和顶部的阴影。

```
 _________  
| _______ |  <-- container
||       ||
||       ||  <-- your view (inside container)
||_______||
|`````````|  <-- shadow of your view (inside container)
|_________| 
```

* * *

在代码中，这看起来像

```
// contentView is already created and configured...
UIView *containerView = [[UIView alloc] initWithFrame:
                                 CGRectInset([contentView frame], 
                                             0,         // keep the same width 
                                             -radius)]; // increase the height
[[self view] addSubview:containerView];
[contentView setCenter:CGPointMake(CGRectGetMidX([contentView bounds]), 
                                   CGRectGetMidY([contentView bounds]));
[containerView addSubview:contentView];
[containerView setClipsToBounds:YES]; 
```

# php - 刷新jquery时返回主页

> ID：10696044
> 
> 赞同：0
> 
> 时间：2012-05-22T05:14:21.977
> 
> 标签：php, jquery

我有一个具有 jquery 导航功能的网站。我使用 jquery 的 load() 函数，使网站无需刷新即可导航。但是，当我点击 f5 进行刷新时，例如我在“联系我们”页面中，它会在作为父页面的索引页面上进行回击。jquery 或 ajax 中有没有办法在点击刷新时专注于加载的页面，而不是将其重定向到 index.php 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:19:25.973

最好的方法是使用某种形式的历史导航。[pjax](http://pjax.heroku.com/)是一个很棒的插件，它允许您使用真实的 URL 和 ajax 加载功能。

您也可以通过`window.location.hash`在加载新内容时简单地更改来实现它。然后在页面加载完毕后，就可以查看`window.location.hash`并加载相关内容了。

# php - 无法通过 PHP cURL 将数据正确发布到 Chargify

> ID：10696046
> 
> 赞同：0
> 
> 时间：2012-05-22T05:14:47.390
> 
> 标签：php, api, curl, chargify

我想我没有正确发送 API 所需的数据。任何想法我做错了什么？

```
$ch = curl_init("https://test.chargify.com/customers.json");

$data = array(
  'first_name' => 'Test',
  'last_name' => 'User',
  'email' => 'user@test.com'
);

$data = json_encode($data);

curl_setopt_array($ch, array(
  CURLOPT_USERPWD => "yyyyyyyyyyyyyyy:x", // assume this is correct
  CURLOPT_RETURNTRANSFER => 1,
  CURLOPT_CUSTOMREQUEST => "POST",
  CURLOPT_POSTFIELDS => $data,
  CURLOPT_HTTPHEADER => array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($data)
  )
));

$output = curl_exec($ch);
curl_close($ch); 
```

它返回

```
{
errors: [
        "First name: cannot be blank.",
        "Last name: cannot be blank.",
        "Email address: cannot be blank."
    ]
} 
```

这是 API 的文档：http: [//docs.chargify.com/api-customers](http://docs.chargify.com/api-customers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:33:01.373

尝试这个：

```
$data = array( 'customer' => array(
  'first_name' => 'Test',
  'last_name' => 'User',
  'email' => 'user@test.com'
)); 
```

# ruby - 如何设置 ruby 应用程序以在多个环境中运行

> ID：10696047
> 
> 赞同：1
> 
> 时间：2012-05-22T05:15:02.217
> 
> 标签：ruby, environment

我开发了一个没有任何 MVC 的简单 ruby​​ 应用程序，并使用 ruby​​ 1.9.2 在命令提示符下运行。它还有一个 Gemfile。我希望这个应用程序也能在运行 ruby​​ 1.8.7 和 1.9.3 的机器上运行。那么如何才能将其设置为适合多种环境。

请指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:35:40.313

首先，您必须确保您的代码与 ruby​​ 1.8 和 1.9 [https://stackoverflow.com/a/21621/335523的语法兼容](https://stackoverflow.com/a/21621/335523)

然后确保您使用的 gem 支持两个版本的 ruby​​。（阅读他们的 github 页面或文档）

如果您使用的 gem 不支持两个版本的 ruby​​，您必须找到在每个环境中提供相同功能的替代 gem，并在 gem 文件中指定它们，如下所示：

```
gem 'rcov', :platforms => :ruby_18
gem 'simplecov', :platforms => :ruby_19 
```

# windows-phone-7 - 如何在 Windows Phone 中增加 TextBlock 控件的高度限制

> ID：10696050
> 
> 赞同：1
> 
> 时间：2012-05-22T05:15:12.170
> 
> 标签：windows-phone-7, textblock

我需要创建一个包含多个 TextBlocks 的视图来填充数千个单词。不幸的是，当我将 TextBlock 的 Text 设置为包含一个长于大约 0 的字符串时。2000 个字符字符串的后半部分不显示。TextBlock 的大小仍然好像包含所有字符，但它的底部只是空白。

你知道限制TextBlock长度的约束是什么吗？我怎样才能覆盖它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:20:43.163

No`UIElement`可以在任一维度上大于 2048 像素，但是，如果您超过此限制，则仍会为较大元素保留空间。

作为一种解决方法，[请参阅此博客文章](http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx)，其中包含将文本拆分为多个 TextBlock 的简单技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T05:21:24.110

这是`TextBox`在 Windows Phone 上实现的限制。如果该区域大于 2048 x 2048，则会被剪裁。

这篇[博文](https://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx?Redirected=true)有一个解决方法。

# css - 如何隔离页面的一部分的 css？

> ID：10696062
> 
> 赞同：4
> 
> 时间：2012-05-22T05:17:12.307
> 
> 标签：css, html, iframe

简单的“HTML5”方式是：

```
<iframe srcdoc="<p>Hello world!</p>"></iframe> 
```

这里有更多信息：[http ://www.w3schools.com/html5/att_iframe_srcdoc.asp](http://www.w3schools.com/html5/att_iframe_srcdoc.asp)

但这在任何现代浏览器中都不支持。有关使这项工作的替代方法的任何建议？

[编辑] 抱歉，不清楚。我的目标是在页面的框架（或其他元素）中使用自己的 css 打开第 3 方网站。我有自己的 css 来管理我的内容，但我希望第 3 方网站也可以使用自己的 css 正确呈现，并且不要让 2 相互干扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:37:36.683

如果我理解正确，“隔离”是指将样式子集限制为仅适用于给定页面上的某些内容。

我通常会避免使用`iframe`（或者更`<object>`合适的），除非这是集成第三方内容的唯一方法，即使它实际上会限制任何应用 css 的适用范围。

父选择器可能适合您要完成的工作，有效地充当您的规则的“伪命名空间”：

```
<p>Hello world!</p>
<p>Some great content here!</p>
<div id="isolated-content"><p>Hello world styled differently!</p></div> 
```

和

```
p {color:black;}
#isolated-content p {color:red;} 
```

只会将红色应用于第二个“Hello world”段落。

自然，所有正常的 css 机制仍然适用（继承、级联等），因此您可能必须相应地覆盖规则。除非您提供具体的场景细节，否则这是我能提供的最多细节。

# android - 在 Facebook 应用页面上发布

> ID：10696066
> 
> 赞同：0
> 
> 时间：2012-05-22T05:17:36.737
> 
> 标签：android, facebook, facebook-graph-api

我可以使用 android 应用程序发布到用户墙上。但我有另一个请求发布到特定的应用程序页面（这是为同一个应用程序创建的）。但我找不到任何关于这个的资源......

任何人都可以帮助如何存档这个...

到目前为止，要在用户墙上分享这段代码正在运行..

```
private void postOnFB(byte[] data) {
    try {
        Log.v("postImage", "in");
        Bundle params = new Bundle();
        params.putString("description", "Play this awesome bible game..");
        params.putByteArray("picture", data);
        params.putString("message", facebookPostingMessage
                + "\n http://www.momaco.lk/");
        mAsyncFacebookRunner.request("me/photos", params, "POST",
                new SampleUploadListener(), null);
    } catch (Exception e) {
        // Do nothing only to catch exception
        e.printStackTrace();
    }
} 
```

请有人可以帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:19:52.523

您可以通过向应用页面的提要连接发出 HTTP POST 请求来发布到应用页面的墙上：

```
http://graph.facebook.com/APP_PAGE_ID/feed 
```

也就是说，您的代码应该阅读

```
 mAsyncFacebookRunner.request(APP_PAGE_ID + "/feed", params, "POST",
            new SampleUploadListener(), null); 
```

请注意，它是您发布到的应用程序页面 ID，而不是应用程序 ID。

# php - php数组键中允许的字符？

> ID：10696067
> 
> 赞同：89
> 
> 时间：2012-05-22T05:17:48.517
> 
> 标签：php, arrays, key

我有一些 php 数组键，其中填充了很多奇怪的字符。

这是允许的吗？我不能使用的东西有什么限制吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-22T05:21:03.223

根据[手册](http://php.net/manual/en/language.types.array.php)：

> 键可以是整数或字符串。该值可以是任何类型。
> 
> 此外，还会发生以下关键转换：
> 
> *   包含有效整数的字符串将被转换为整数类型。例如，键“8”实际上将存储在 8 下。另一方面，“08”不会被强制转换，因为它不是有效的十进制整数。
> *   浮点数也被转换为整数，这意味着小数部分将被截断。例如，密钥 8.7 实际上将存储在 8 之下。
> *   布尔值也被转换为整数，即键 true 将实际存储在 1 下，而键 false 将存储在 0 下。
> *   Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。
> *   数组和对象不能用作键。这样做会导致警告：非法偏移类型。

[再次](http://www.php.net/manual/en/language.types.string.php)使用手册：

> 字符串是一系列字符，其中一个字符与一个字节相同。这意味着 PHP 仅支持 256 个字符集，因此不提供原生 Unicode 支持。查看字符串类型的详细信息。

所以简而言之，任何字符串都可以是键。一个字符串可以包含任何二进制数据（最大 2GB）。因此，键可以是任何二进制数据（因为字符串可以是任何二进制数据）。

一些随机（有效）滥用数组键：

```
$w = array(chr(0) => 'null byte?', chr(rand(0, 255)) => 'random byte?');
var_dump($w); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-22T05:20:50.110

键必须是字符串或整数。发生了一些演员表，但我认为手册很好地解释了：

> 键可以是整数或字符串。该值可以是任何类型。
> 
> 此外，还会发生以下关键转换：
> 
> *   包含有效整数的字符串将被转换为整数类型。例如，键“8”实际上将存储在 8 下。另一方面，“08”不会被强制转换，因为它不是有效的十进制整数。
> *   浮点数也被转换为整数，这意味着小数部分将被截断。例如，密钥 8.7 实际上将存储在 8 之下。
> *   布尔值也被转换为整数，即键 true 将实际存储在 1 下，而键 false 将存储在 0 下。
> *   Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。
> *   数组和对象不能用作键。这样做会导致警告：非法偏移类型。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-11T10:22:48.997

我找到了这个答案，以寻找有关我遇到的问题的更多信息。我使用的是带有 UTF-8 字符的字符串，它不能作为我拥有的数组的键。

就像是

```
$str = "R&D - Solution";
$arr = array( "R&D - Solution" => "Research" );
echo $arr[$str];  // did not work 
```

对我来说（不是大或聪明的）解决方案是这样做..

```
$str = md5("R&D - Solution");
$arr = array( md5("R&D - Solution") => "Research" );
echo $arr[$str];  // works! 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-22T05:22:03.240

PHP 数组键可以是整数或字符串。PHP 字符串是字节数组，即字节序列。没有其他类型的字符串，PHP 不会对数组键字符串施加任何特殊限制。换句话说：只要它是一个字符串，任何事情都会发生。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-22T05:21:38.077

任何可以填充到 PHP 字符串中的东西都可以用作数组键。允许的字符没有限制。

```
$a = array();

$x = 'long string of random garage';
echo $a[$x]; // this is ok

$x = array();
echo $a[$x]; // not ok 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-21T10:57:27.300

如果复杂键导致“未定义索引”错误，您可能只是遇到了“修剪”问题。

我要疯了，因为一个复杂的键正在吐出“未定义的索引”错误，我认为这可能是语法违规。导致错误的数组键是从 MySQL 数据库查询中的字段构建的，我将其转换为键并在新数组中使用。关键看起来像这样：`pl_1DNKoiJKwotCqAycickBVhTy`这就是代码的构造方式。

```
//new array created from database query
$new_array[$dbquery['fieldname']] = {some value};

//key value found in field of second array
$keyval = $array_two['fieldname'];

//this produced the "undefined index" error
echo $new_array[$keyval]; 
```

实际上，当`$keyval`和`$dbquery['fieldname']`看起来是完美匹配时（通过将两者都回显到浏览器来进行视觉验证）。`trim`通过简单地在第二个语句中使用这样的方法解决了这个谜团：`$keyval = trim($array_two['fieldname']);`一旦“修剪”，php 就不再抱怨了。

希望这可以使其他人免于一些令人沮丧的时刻......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T05:21:56.013

我个人对数组键中的异常字符没有任何问题。什么是合法的和不合法的并没有很好的记录，只是说密钥必须是一个标量。你最好的选择是试试看。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-27T06:16:15.853

在 php 数组中，您不能使用键：2.3 或十进制数

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-19T13:03:49.343

除了所有正确的答案之外：您可以使用[PSR](http://php-fig.org)，它们是最好的程序员之间的某种规则，以获得良好和标准的编码风格。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-05T08:49:34.127

对于这种和平的代码：

```
$a = (object) ['@km³' => 123]; 
```

这个 ：

```
error_log($a->@km³); 
```

产生此错误：

```
PHP Parse error: Syntax error, unexpected '@', expecting T_STRING or T_VARIABLE or '{' or '$' on line 1 
```

但这是有效的：

```
error_log($a->{"@km³"}); 
```

*（带**{}**）*

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-09-10T12:10:34.667

用ANSI“é”编码php页面就可以使用（Cinéma不会显示为Cinéma）。在 Notepad++ 中，只需使用菜单 Encode=>Convert ANSI 并保存

# javascript - 为网站自动化生成 JavaScript 测试对象的最佳方法是什么

> ID：10696076
> 
> 赞同：3
> 
> 时间：2012-05-22T05:18:38.903
> 
> 标签：javascript, html-parsing, functional-testing

背景介绍：团队正在使用 C#编写 QUnit UI 测试**和浏览器自动化测试。**我想创建一个可以在两者之间共享的 JSON 对象。这样，如果类名被更改，配置文件只需要在一个地方更新。

该站点使用模板非常动态，因此这些测试对象配置文件必须在运行时创建，不能只解析静态 html。

我可以手动*生成*数据结构或编写一个工具来帮助我捕获 ids/classes，然后修改生成的数据结构。我不想手动编写代码，因为我的团队正在测试的网站有数百个控件。

测试将利用这些测试对象使维护更容易，因为该站点处于大量流失状态并且我们当前的测试每天都会中断。一旦所有测试都引用同一个测试对象，它只需要修复该对象配置。

目前我正在考虑创建一个 JavaScript 函数，该函数接受一个选择器并为该元素及其子元素生成所有属性。我可以在运行时调用传递我想要抓取、剪切和粘贴输出以供以后使用的控件的函数。有没有更好的方法来生成这些对象？

插图：

带有儿童 A、B、C 的导航栏。可以选择一个。

```
<div id="nav-bar">
    <div class="a selected">A</div>
    <div class="b">B</div>
    <div class="c">C</div>
</div> 
```

我想创建以下代码（jQuery 样式选择器）：

```
var nav_bar = {
    selector: "#nav-bar",
    children: {
        a: { selector: ".a" },
        b: { selector: ".b" },
        c: { selector: ".c" },
    }
} 
```

然后我可以手动添加一些特殊属性，例如 selectedItem：

```
var nav_bar = {
    selector: "#nav-bar",
    children: {
        a: { selector: ".a" },
        b: { selector: ".b" },
        c: { selector: ".c" },
        selectedItem: { selector: ".selected" }
    }
} 
```

有了它，我可以解析 nav_bar 对象来创建一个有用的测试对象：

```
var nav = createTestObject(nav_bar);
// var nav = {a: $(".a", "#nav-bar"), b: $(".b", "#nav-bar"), selectedItem: function() { return $(".selected", "#nav-bar"); }}
// Can automate a simple test at this point...could use some more helper functions
// Click b if not already selected
if(nav.b[0] != nav.selectedItem()[0])
{
   nav.b.click(); // assumes clicking causes selected class to change
} 
```

如果“.selected”类发生变化，我不必在整个测试代码中搜索和替换，只需更新 selectedItem.selector 的一个配置文件。

在此先感谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:53:32.490

我不明白你试图通过生成测试对象来实现什么。一旦你这样`nav.b.click()`做了，你想测试`b`现在选择的类吗？

您应该考虑使用[PhantomJS](http://phantomjs.org/)或使用[Zombie.js](http://zombie.labnotes.org/)进行测试。

# android - 保护 SQLite 语句 (Android)

> ID：10696078
> 
> 赞同：0
> 
> 时间：2012-05-22T05:18:50.420
> 
> 标签：android, sqlite

我有一个使用 SQLite 联系人数据库的 android 应用程序。用户插入新的联系人详细信息，按下按钮，新联系人应插入数据库。无论如何，用户可以插入非法字符或单词，例如“'”或“DELETE”，这可能会导致问题。我怎样才能避免它？我应该使用模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:41:15.803

使用已编译的[`SQLiteStatement`](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)

# java - 是否有任何“阈值”证明多线程计算是合理的？

> ID：10696079
> 
> 赞同：7
> 
> 时间：2012-05-22T05:18:52.303
> 
> 标签：java, multithreading

所以基本上我今天需要优化这段代码。它试图找到由某个函数为前一百万个起始数字生成的最长序列：

```
public static void main(String[] args) {
    int mostLen = 0;
    int mostInt = 0;
    long currTime = System.currentTimeMillis();
    for(int j=2; j<=1000000; j++) {
        long i = j;
        int len = 0;
        while((i=next(i)) != 1) {
            len++;
        }
        if(len > mostLen) {
            mostLen = len;
            mostInt = j;
        }
    }
    System.out.println(System.currentTimeMillis() - currTime);
    System.out.println("Most len is " + mostLen + " for " + mostInt);
}

static long next(long i) {
    if(i%2==0) {
        return i/2;
    } else {
        return i*3+1;
    }
} 
```

我的错误是尝试引入多线程：

```
void doSearch() throws ExecutionException, InterruptedException {
    final int numProc = Runtime.getRuntime().availableProcessors();
    System.out.println("numProc = " + numProc);
    ExecutorService executor = Executors.newFixedThreadPool(numProc);
    long currTime = System.currentTimeMillis();
    List<Future<ValueBean>> list = new ArrayList<Future<ValueBean>>();
    for (int j = 2; j <= 1000000; j++) {
        MyCallable<ValueBean> worker = new MyCallable<ValueBean>();
        worker.setBean(new ValueBean(j, 0));
        Future<ValueBean> f = executor.submit(worker);
        list.add(f);
    }
    System.out.println(System.currentTimeMillis() - currTime);

    int mostLen = 0;
    int mostInt = 0;
    for (Future<ValueBean> f : list) {
        final int len = f.get().getLen();
        if (len > mostLen) {
            mostLen = len;
            mostInt = f.get().getNum();
        }
    }
    executor.shutdown();
    System.out.println(System.currentTimeMillis() - currTime);
    System.out.println("Most len is " + mostLen + " for " + mostInt);
}

public class MyCallable<T> implements Callable<ValueBean> {
    public ValueBean bean;

    public void setBean(ValueBean bean) {
        this.bean = bean;
    }

    public ValueBean call() throws Exception {
        long i = bean.getNum();
        int len = 0;
        while ((i = next(i)) != 1) {
            len++;
        }
        return new ValueBean(bean.getNum(), len);
    }
}

public class ValueBean {
    int num;
    int len;

    public ValueBean(int num, int len) {
        this.num = num;
        this.len = len;
    }

    public int getNum() {
        return num;
    }

    public int getLen() {
        return len;
    }
}

long next(long i) {
    if (i % 2 == 0) {
        return i / 2;
    } else {
        return i * 3 + 1;
    }
} 
```

不幸的是，多线程版本在 4 个处理器（内核）上的运行速度比单线程版本慢 5 倍。

然后我尝试了更粗略的方法：

```
static int mostLen = 0;
static int mostInt = 0;

synchronized static void updateIfMore(int len, int intgr) {
    if (len > mostLen) {
        mostLen = len;
        mostInt = intgr;
    }
}

public static void main(String[] args) throws InterruptedException {
    long currTime = System.currentTimeMillis();
    final int numProc = Runtime.getRuntime().availableProcessors();
    System.out.println("numProc = " + numProc);
    ExecutorService executor = Executors.newFixedThreadPool(numProc);
    for (int i = 2; i <= 1000000; i++) {
        final int j = i;
        executor.execute(new Runnable() {
            public void run() {
                long l = j;
                int len = 0;
                while ((l = next(l)) != 1) {
                    len++;
                }
                updateIfMore(len, j);
            }
        });
    }
    executor.shutdown();
    executor.awaitTermination(30, TimeUnit.SECONDS);
    System.out.println(System.currentTimeMillis() - currTime);
    System.out.println("Most len is " + mostLen + " for " + mostInt);
}

static long next(long i) {
    if (i % 2 == 0) {
        return i / 2;
    } else {
        return i * 3 + 1;
    }
} 
```

它工作得更快，但仍然比单线程方法慢。

我希望这不是因为我搞砸了我做多线程的方式，而是这个特定的计算/算法不适合并行计算。如果我通过将方法替换为以下内容来更改计算以使其更占用处理器`next`：

```
long next(long i) {
    Random r = new Random();
    for(int j=0; j<10; j++) {
        r.nextLong();
    }
    if (i % 2 == 0) {
        return i / 2;
    } else {
        return i * 3 + 1;
    }
} 
```

两个多线程版本在 4 核机器上的执行速度都比单线程版本快两倍以上。

很明显，必须有一些阈值可以用来确定是否值得引入多线程，我的问题是：

*有助于确定给定计算是否足够密集以通过并行运行对其进行优化的基本规则是什么（无需花费精力来实际实现它？）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:35:10.250

高效实现多线程的关键是确保成本不会太高。没有固定的规则，因为它们在很大程度上取决于您的硬件。

启动和停止线程的成本很高。当然，您已经使用了 executor 服务，这大大降低了这些成本，因为它使用一堆工作线程来执行您的 Runnables。然而，每个 Runnable 仍然会带来一些开销。减少 runnable 的数量并增加每个必须做的工作量将提高性能，但您仍然希望为 executor 服务提供足够的 runnable，以便有效地将它们分布在工作线程上。

您选择为每个起始值创建一个可运行文件，因此您最终创建了 1000000 个可运行文件。如果让每个 Runnable 执行一批比如 1000 个起始值，您可能会得到更好的结果。这意味着您只需要 1000 个可运行文件，从而大大降低了开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:24:57.710

“性能增益会大于上下文切换和线程创建的成本吗？”

这是非常依赖于操作系统、语言和硬件的成本；[这个问题](https://stackoverflow.com/questions/5483047/why-is-creating-a-thread-said-to-be-expensive)有一些关于Java成本的讨论，但有一些数字和一些关于如何计算成本的指针。

对于 CPU 密集型工作，您还希望每个 CPU 有一个线程或更少线程。感谢 David Harkness 提供了[关于如何计算该数字的线索](https://stackoverflow.com/questions/1980832/java-how-to-scale-threads-according-to-cpu-cores/1980858#1980858)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T07:13:54.187

我认为您没有考虑到另一个组件。当工作单元彼此不依赖时，并行化效果最好。当后面的计算结果依赖于前面的计算结果时，并行运行计算是次优的。在“我需要第一个值来计算第二个值”的意义上，这种依赖性可能很强。在这种情况下，任务是完全串行的，如果不等待早期的计算，就无法计算后面的值。在“如果我有第一个值，我可以更快地计算第二个值”的意义上，也可能存在较弱的依赖性。在这种情况下，并行化的代价是一些工作可能会重复。

这个问题有助于在不使用多线程的情况下进行优化，因为如果您已经掌握了先前的结果，则可以更快地计算一些后面的值。举个例子`j == 4`。一旦通过内部循环产生`i == 2`，但您刚刚计算了`j == 2`两次迭代的结果，如果您保存了 的值，`len`您可以将其计算为 len(4) = 1 + len(2)。

使用一个数组来存储之前计算的值，`len`并在方法中稍微调整一下`next`，您可以以 > 50 倍的速度完成任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T06:48:48.733

估计一个线程在不与其他线程交互（直接或通过公共数据）的情况下可以完成的工作量。如果那件工作可以在 1 微秒或更短的时间内完成，那么开销就太大了，多线程是没有用的。如果是 1 毫秒或更长，多线程应该可以正常工作。如果介于两者之间，则需要进行实验测试。

# python - 将文本划分为 10 个列表的高效/优雅方式

> ID：10696080
> 
> 赞同：0
> 
> 时间：2012-05-22T05:19:25.530
> 
> 标签：python, list, parsing

有没有更有效的方法来做下面发生的事情？我非常愿意认为有。该脚本没有特别的用途，但如果知道一种更有效的方法来执行此操作，仍然会非常好。

```
# Divides text into 10 lists.. you'll see what I mean.
# 5/21/2012

filename = "test.txt"

FILE = open(filename,"r")

# READ FILE WORD-BY-WORD:
f = open(filename,"r")
lines = f.readlines()
for i in lines:
    thisline = i.split(" ")

FILE.close()

# DIVIDE INTO 10 LISTS:
list1 = []
list2 = []
list3 = []
list4 = []
list5 = []
list6 = []
list7 = []
list8 = []
list9 = []
list10 = []

j = 0
while j < len(thisline):
    x = thisline[j]
    list1.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list2.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list3.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list4.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list5.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list6.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list7.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list8.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list9.append(x)
    j+=1
    if j >= len(thisline):
        break

    x = thisline[j]
    list10.append(x)
    j+=1
    if j >= len(thisline):
        break

print "list 1 = "," ".join(list1)
print "list 2 = "," ".join(list2)
print "list 3 = "," ".join(list3)
print "list 4 = "," ".join(list4)
print "list 5 = "," ".join(list5)
print "list 6 = "," ".join(list6)
print "list 7 = "," ".join(list7)
print "list 8 = "," ".join(list8)
print "list 9 = "," ".join(list9)
print "list 10 = "," ".join(list10)

# EOF 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:26:08.727

如果这个程序的目的是读取文件的行，将它们分解成单词，然后将单词附加到列表中，这样第 N 个列表包含从第 N 个开始的每 10 个单词，那么这就是以下内容做：

```
from itertools import izip, cycle

filename = "test.txt"
f = open(filename,"r")

lsts = list([] for _ in range(10))
oracle = cycle(lsts)

for line in f:
    parts = line.split(" ")

    for lst, part in izip(oracle, parts):
        lst.append(part)

f.close()

for index, lst in enumerate(lsts):
    print "list %u = " % (index+1,)," ".join(lst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:31:39.367

这会填充较短的列表`None`，如果您愿意，您可以轻松地将它们过滤掉

```
with open("test.txt") as f:
    result = zip(*map(None, *[(word for line in f for word in line.split())]*10)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:41:30.497

如果您有一个包含十行条目的文件，这将起作用：

```
line1, line2, line3, line4, line5, line6, line7, line8, line9, line10 = open('test.txt','r').readlines() 
```

您可以将`open().readlines()`调用替换为执行所需拆分的任何函数。向我们展示您的输入文件的示例将对此有所帮助。

但是，既然可以使用索引序列，为什么还要使用 10 个变量呢？

```
lines = open('test.txt', 'r').readlines()
assert line1 == lines[0] # etc 
```

# iphone - 独立于标签解析xml文件

> ID：10696084
> 
> 赞同：2
> 
> 时间：2012-05-22T05:19:33.550
> 
> 标签：iphone, objective-c, ios

我想解析独立于标签的 xml 文件。所以解析的代码应该是通用的。有没有办法在 iPhone 中做到这一点，它可以灵活地使用标签。我试图通过解析 xml 两次来解决这个问题。在第一次解析中我只提取了标签，在第二遍中我试图找到该标签的值。但是这种方法存在问题。那么是否有任何 api 或逻辑来解析独立于标签的 xml？真的有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:47:44.477

在 iOS 中，没有用于解析带有未知标签的 xml 文件的现有 API 或逻辑。要解析 xml，您需要知道该 xml 的标签。

# c# - "If" 和 "else" C# 输出不正确

> ID：10696085
> 
> 赞同：0
> 
> 时间：2012-05-22T05:19:34.847
> 
> 标签：c#, xml

我有一个应用程序将 xml 文件与文本文件进行比较，如果 xml 特定行的内容与文本文件相同，则程序输出 1，但如果它们不同，则输出 0。不幸的是，我无法让它输出 1。它似乎总是输出 0。

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml;
using System.Xml.Linq;
using System.IO;

namespace CompareIt
{
    class Program
    {
        static void Main(string[] args)
        {
            using (XmlReader reader = XmlReader.Create("2.xml"))
            {
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element)
                    {
                        if (reader.Name.ToLower() == "data")
                        {
                            string xml = reader.ReadOuterXml();

                            var xmlString = (from data in XDocument.Parse(xml).Elements()
                                             select data.Elements().First().Value).FirstOrDefault();

                            xmlString = xmlString.Replace("\n", "").Trim();

                            var fileString = File.ReadAllText(@"8.txt");
                            if (xmlString == fileString)
                                Console.WriteLine("1");
                            else
                                Console.WriteLine("0");
                        }
                    }
                }
            }
        }
    }
} 
```

XML 文件（程序应该只读取数据部分）：

```
 <?xml version="1.0"?>
    <root>
     <Data>
      <Seperator>1</Seperator>
     </Data>
     <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
      <SignedInfo>
        <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
        <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <Reference URI="">
          <Transforms>
             <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
           </Transforms>
           <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
           <DigestValue>GHOSJRUqcHnZ3M090/5/KhvghyQ=</DigestValue>
         </Reference>
       </SignedInfo>
      <SignatureValue>oib+LAXqJshDFm3YM63qkSsJxxF+t0uahGax8tLrjSPJUjW045iYvB4LJCgMeF9oxatbWnVB9hGbvtVnl4iewJDL3kjnjvot5CLozMOaIGJgdys5MP8ncx771itANTm8wi8KgnqVjGjvTakEmcdwcSdRXuCP1WGOwuXm5StkY8Q=</SignatureValue>
    </Signature>
    </root> 
```

并且文本文件只包含一个：

```
1 
```

当我这样做 `Console.WriteLine(fileString);` 或

```
Console.WriteLine(xmlString); 
```

他们确实输出了同样的东西，就像他们应该做的那样，这让我更加困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:34:50.910

我测试了你的代码，我看到它输出 1 时

```
<Data>
  <Seperator>1</Seperator>
</Data> 
```

当它输出 0

```
<Data>
  <Seperator>0</Seperator>
</Data> 
```

完全合法且正确的输出。

您是否尝试过删除项目的 BIN 文件夹的内容？然后重建您的项目并确保将文本文件和 xml 文件属性设置为“如果较新则复制”或“始终复制”，前提是这些文件是您项目的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:28:01.203

很可能您的文本文件还包含换行符，从而使字符串不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:28:03.640

如何确保 File.ReadAllText 真的只返回一个字符？首先输出它以用于调试目的，或修剪它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:57:44.373

我已经测试了您的代码，它运行良好，唯一的原因可能是您的文本文件在 1 之后包含新行。您可以尝试在 if 语句之前删除新行。采用

```
fileString = fileString.Replace(Environment.NewLine,"");
  if(....) //your if 
```

# machine-learning - 时间差异学习的更新

> ID：10696087
> 
> 赞同：4
> 
> 时间：2012-05-22T05:20:06.100
> 
> 标签：machine-learning, tic-tac-toe, reinforcement-learning, temporal-difference

我阅读了有关 Tesauro 的 TD-Gammon 程序的信息，并且很想为井字游戏实施它，但作为一名高中生，我几乎无法获得所有信息，因为我不知道这些术语。

这里的第一个方程，[http://www.stanford.edu/group/pdplab/pdphandbook/handbookch10.html#x26-1310009.2](http://www.stanford.edu/group/pdplab/pdphandbook/handbookch10.html#x26-1310009.2)

给出了“一般监督学习范式”。它表示等式左侧的 w sub t 是时间步 t 的参数向量。“时间步长”究竟是什么意思？在设计用于输出棋盘状态值的井字游戏神经网络的框架内，时间步长是否指给定游戏中的棋子数量？例如，由字符串“xoxoxoxox”表示的棋盘将在时间步 9，而棋盘“xoxoxoxo”将在时间步 8？或者时间步长是指自训练开始以来经过的时间量？

由于 w sub t 是给定时间步的权重向量，这是否意味着每个时间步都有自己的评估函数（神经网络）？所以要评估一个只有一步棋的棋盘状态，你必须输入一个不同的神经网络，而不是用两个棋步传递棋盘状态？我想我在这里误解了一些东西，因为据我所知 Tesauro 仅使用一个 NN 来评估所有董事会状态（尽管很难找到有关 TD-Gammon 的可靠信息）。

为什么输出的梯度是关于 w 而不是 w sub t 的？

提前感谢您澄清这些想法。对于我的项目或无障碍阅读材料的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T16:32:53.913

[TD 处理马尔可夫决策过程](http://en.wikipedia.org/wiki/Markov_decision_process)框架内的学习。也就是说，您从某个状态 s [t]开始，执行一个动作 a [t]，获得奖励 r [t]，最后进入另一个状态 - s [t+1]。初始状态称为s [0]。下标称为时间。

TD 智能体开始不知道它会因为什么动作或这些动作将它带到什么其他状态而获得什么奖励。它的目标是了解哪些行为可以最大化长期总回报。

状态可以代表井字棋棋盘的状态。因此，在您的情况下 s [0]将是一个清晰的板：“------”，s [1]可能是“-o-------”，s [2]可能是“-o-- x----"等。动作可能是要标记的单元格索引。使用此表示，您将有 3 ⁹ =19 683 个可能的状态和 9 个可能的操作。学完游戏后，你会得到一张表格，告诉你在每个可能的棋盘上标记哪个单元格。

相同类型的直接表示不适用于双陆棋，因为可能的状态太多了。TD-Gammon 所做的是使用神经网络的近似状态。网络的权重被视为状态向量，奖励始终为 0，除非获胜。

这里棘手的部分是 TD-Gammon 算法学习的状态是用于评估棋盘位置的神经网络的状态，而不是棋盘的状态。因此，在 t=0 时，您还没有玩过一场游戏，并且网络处于初始状态。每次您必须采取行动时，您都使用网络选择可能的最佳行动，然后根据该行动是否导致胜利来更新网络的权重。在移动之前，网络具有权重 w [t]，之后具有权重 w [t+1]。在玩了数十万场游戏之后，您学习了权重，使神经网络能够非常准确地评估棋盘位置。

我希望这能解决问题。

# asp.net - 如何通过 Facebook 登录登录我的 ASP.NET MVC 网站

> ID：10696088
> 
> 赞同：0
> 
> 时间：2012-05-22T05:20:07.277
> 
> 标签：asp.net, asp.net-mvc, facebook

我想将 facebook 登录按钮添加到我的 ASP.NET MVC 网站中，但出现错误：

> API错误代码：191
> API错误描述：指定的URL不属于应用程序
> 错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:29:38.850

我假设您将使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)路由。此错误表示您的`redirect_url`参数的域未列在您的 Facebook 应用程序的“应用程序域”列表中。

因此，要么您在 OAuth 对话框链接中错误地输入了重定向 URL，要么正确的域未在您的应用程序的“应用程序域”列表中列出。建议您在应用的 App Domains 列表中输入通配符域（例如 example.com），以便包含子域（例如 www.example.com、blog.example.com）

您可以通过转到设置 -> 基本 -> 基本信息来查看 Facebook 应用程序的应用程序域。

# python - 为什么我不能在 Python 中获得迭代器的倒数第二个结果？

> ID：10696090
> 
> 赞同：1
> 
> 时间：2012-05-22T05:20:31.240
> 
> 标签：python, iterator, group-by

我花了几个小时试图调试这段代码。我想获取列表的倒数第二个元素。

```
for x, y in itertools.groupby(range(0,10), lambda x: int(x / 3)):
    print("the group's key is %d and values are %s" % (x, ','.join(map(str,y))))

temp = itertools.groupby(range(0,10), lambda x: int(x / 3))
the_last_one = None
second_to_last = None
for x,y in temp:
    second_to_last = the_last_one
    the_last_one = y
print(next(iter(second_to_last))) 
```

为了演示，第一部分的输出是：

```
the group's key is 0 and values are 0,1,2
the group's key is 1 and values are 3,4,5
the group's key is 2 and values are 6,7,8
the group's key is 3 and values are 9 
```

第二部分的目标是输出倒数第二组中的第一个元素。我期望`6`但相反，我得到了异常`StopIteration`。如果我将最后一行更改为：

```
print(next(the_last_one)) 
```

然后我得到了预期的结果`9`。`groupby`也使用与作品输出具有相同结构的元组列表。此代码仅在迭代器上失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:20:31.413

（我想我知道发生了什么，但我是 Python 新手。请随意编辑！）

groupby`yield`是`(int, iterator)`. 迭代器调用`repeat()`来获取值。

当我调用`next()`并提前通过`[6,7,8]`迭代器时，这些值从`repeat()` *永远*的输出中消失了。 `9`是下一个输出，`repeat()`而 second_to_last 是一个迭代器，指向迭代器*未保存*的过去。（不确定这部分...）

将迭代器保存在 second_to_last 是不够的，我需要保存这些值。解决方案是将行更改为：

```
the_last_one = list(y) 
```

`list()`强制将迭代器的结果保存到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:54:44.613

根据以下文档`itertools.groupby`：

> 返回的组本身就是一个迭代器，它与 groupby() 共享底层迭代。因为源是共享的，所以当 groupby() 对象前进时，之前的组不再可见。因此，如果以后需要该数据，则应将其存储为列表：

这意味着在您第一次迭代时会消耗可迭代对象。

改变

```
for x,y in temp:
    second_to_last = the_last_one
    the_last_one = y 
```

到

```
for x,y in temp:
    second_to_last = the_last_one
    the_last_one = list(y) 
```

在迭代时存储值。

# knockout.js - knockoutjs $index 在映射插件中不起作用

> ID：10696092
> 
> 赞同：0
> 
> 时间：2012-05-22T05:20:37.627
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用 asp.net mvc 3 和 knockoutjs 2.0 和映射插件我已使用映射插件将我的模型转换为 json 如下

```
viewModel=ko.mapping.fromJS(@Html.Raw(Html.Serialize(Model)));

<div class="orders">
        <div data-bind="foreach: JobOrder">
            <div data-bind="text:$index">
            </div>
        </div>
</div> 
```

我的模型是

```
 public class Jobs : EntityBase
    {

        [MLLAttr(ObjectType = MLLObjectType.Child, IsCreate = true, ParentName = "Jobs", IsRequired = true)]
        public List<JobOrder> JobOrder { get; set; }
   } 
```

$index 不工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:15:16.517

正如迈克尔指出的那样，`$index`在淘汰赛 2.1 中引入了。您需要更新才能使用它

# android - Android：相机给出空白图片

> ID：10696098
> 
> 赞同：0
> 
> 时间：2012-05-22T05:21:06.777
> 
> 标签：android

这是我在 Android 中拍照的代码。但是，它总是返回一个空白图像。可能是什么错误？我看到了一些设置闪光灯、曝光和对焦模式的问题，我在代码中设置了这些问题，但即使照片被拍摄，相机仍然返回空白图像。（至少我听到了光圈的声音。）

```
C

amera.Parameters p = camera.getParameters();
            List<Size> sizes = p.getSupportedPictureSizes();
            // Choose any one you want among sizes
            Size size = sizes.get(0);
            p.setPictureSize(size.width, size.height);

            p.set("flash-mode","off");
            p.set("focus-mode","auto");
            p.setExposureCompensation(100);
            p.setFocusMode("auto");
            camera.setParameters(p);
            camera.startPreview();
            camera.takePicture(shutterCallback, rawCallback,
                    jpegCallback);

ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            Log.d(TAG, "onShutter'd");
        }
    };

    /** Handles data for raw picture */
    PictureCallback rawCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.d(TAG, "onPictureTaken - raw");
        }
    };

    /** Handles data for jpeg picture */
    PictureCallback jpegCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            FileOutputStream outStream = null;
            try {
                // write to local sandbox file system
                // outStream =
                // CameraDemo.this.openFileOutput(String.format("%d.jpg",
                // System.currentTimeMillis()), 0);
                // Or write to sdcard
                outStream = new FileOutputStream(String.format(
                        "/sdcard/%d.jpg", System.currentTimeMillis()));
                outStream.write(data);
                outStream.close();
                Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }
            Log.d(TAG, "onPictureTaken - jpeg");
        }
    };
    @Override
    public void draw(Canvas canvas) {
        super.draw(canvas);
        Paint p = new Paint(Color.RED);
        Log.d(TAG, "draw");
        canvas.drawText("PREVIEW", canvas.getWidth() / 2,
                canvas.getHeight() / 2, p);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:34:13.900

相机.java

```
public class Camera extends Activity 
  {
 private static final int CAMERA_REQUEST = 1888;
 private String selectedImagePath;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_REQUEST) 
        { 
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
            Random randomGenerator = new Random();randomGenerator.nextInt();
            String newimagename=randomGenerator.toString()+".jpg";
            File f = new File(Environment.getExternalStorageDirectory()
                                    + File.separator + newimagename);
            try {
                f.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //write the bytes in file

            try {
                fo = new FileOutputStream(f.getAbsoluteFile());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo.write(bytes.toByteArray());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                uri=f.getAbsolutePath(); 
    //this is the url that where you are saved the image
      }

  } 
```

# azure - 从未调用 azure webrole Global.Application_Start

> ID：10696100
> 
> 赞同：4
> 
> 时间：2012-05-22T05:21:14.830
> 
> 标签：azure, azure-web-roles, application-start

我创建了一个简单的 ASP.NET 项目，然后使用 Visual Studio 添加了云部署描述符。一旦我这样做了，global.asax 文件中的 Application_Start() 方法就永远不会被调用。在我的项目中，我做了很多初始化，例如加载 web.config 文件、加载连接字符串、初始化缓存等。我不能将它们全部放入 WebRole.OnStart() 方法中。

调用 Global 类中的 Application_Start() 方法是否需要任何特殊配置？

谢谢，普拉萨纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:02:44.823

正如 SMARX 所说，Applicaton_start() 总是用你的 Web 角色调用，但是如果你有完整的 IIS 角色，那么 VS2010 调试器不会命中 Application_start()。我正在下面详细说明如何在 Global.asax.cs 中的 Application_Start() 处点击 BP：

首先，您可以在 Application_Start() 中编写 Debugger.Break() 代码，如下所示： ![在此处输入图像描述](../Images/088b90828f0557d68ab7a88e5f2bc2a3.png)

现在请打开您的角色属性 > Web 并选择

1.  使用 Visual Studio 开发服务器设置（我选择如下图所示）
2.  使用本地 IIS Web 服务器

![在此处输入图像描述](../Images/79a47665a2d75619a0defc3714fc16a3.png)

现在调试您的应用程序，您将看到如下消息来调试 W3WP.EXE 进程

![在此处输入图像描述](../Images/4a35e031282b3f834c080c8a24684547.png)

选择上面的 Debug 选项，然后您将看到 BS JIT Debugger 窗口，如下所示：

![在此处输入图像描述](../Images/b067a0bbae1a4e48f36d3eae298d355d.png)

一旦您接受 VS JIT 调试器启动过程，您将在 Applicaton_start() 中看到 PB 命中，如下所示：

![在此处输入图像描述](../Images/2c2f50ee4f3f21123ae23dfe3dce90e2.png)

而已！！

# spring - dispatcherservlet 不将模型连接到视图

> ID：10696104
> 
> 赞同：0
> 
> 时间：2012-05-22T05:21:37.027
> 
> 标签：spring

我从控制器制作了一个模型并返回到 dispatcherservlet。看起来没有问题

在模型中，因为我仔细检查了 system.out.println 的输出。对于 viewname 字符串，我仔细检查了

一个实际的目录名称，即“WEB-INF/views/hello.jsp”。

但我相信调度程序 servlet 不会使模型适应视图，因为浏览器不显示

应显示的模型值。更容易理解我正在经历的事情

如果我把我的代码放在这里。所以...这是我的代码。

web.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/appServlet/spring-servlet.xml
    </param-value>
</context-param> 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd"
>
<context:annotation-config/>
<bean name="/hello" class="com.spring.toby.HelloController"/>
<bean id="HelloSpring" class="com.spring.toby.HelloSpring"></bean>  
</beans> 
```

和控制器java文件

```
public class HelloController implements Controller{

@Autowired HelloSpring helloSpring;
public ModelAndView handleRequest(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    // TODO Auto-generated method stub
    String name = request.getParameter("name");
    String msg = this.helloSpring.sayHello(name);
    System.out.println(msg);
    Map<String, Object> model = new HashMap<String, Object>();
    model.put("msg", msg);
    return new ModelAndView("WEB-INF/views/hello.jsp", model);
}
} 
```

和 bean 文件

```
public class HelloSpring {
public String sayHello(String name){
    return "Hello " + name;
}
} 
```

和jsp文件

```
</head>
    <body>
    <div><h1>Testing</h1></div>
    ${message}
    </body> 
```

谁能告诉我我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:25:06.980

这只是一个愚蠢的错误。

请将您的 jsp 中的 ${message} 替换为**$** **{msg}**，您将在您的 jsp 中打印出消息。

希望这对您有所帮助。

干杯。

# iphone - 动画UILabel文本大小增加和减少

> ID：10696105
> 
> 赞同：4
> 
> 时间：2012-05-22T05:21:37.790
> 
> 标签：iphone, ios

我想在 UILabel 文本上应用动画。我编写代码以增加动画块中的字体大小，但未应用动画。

```
[UIView beginAnimations:nil context:nil/*contextPoint*/];
    monthsOnBoard.font=[UIFont fontWithName:@"digital-7" size:150];
    daysOnBoard.font=[UIFont fontWithName:@"digital-7" size:150];
    hoursOnBoard.font=[UIFont fontWithName:@"digital-7" size:100];
    minutesOnBoard.font=[UIFont fontWithName:@"digital-7" size:100];
    secondsOnBoard.font=[UIFont fontWithName:@"digital-7" size:100];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDelay:0.5];
    [UIView setAnimationDuration:1];
    [UIView setAnimationRepeatCount:4];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T05:34:49.927

UIView 的字体不是动画属性。您应该改用转换。

```
[UIView beginAnimations:nil context:nil/*contextPoint*/];
monthsOnBoard.transform = CGAffineTransformMakeScale(2.0, 2.0); //increase the size by 2
 //etc etc same procedure for the other labels.
[UIView setAnimationDelegate:self];
[UIView setAnimationDelay:0.5];
[UIView setAnimationDuration:1];
[UIView setAnimationRepeatCount:4];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView commitAnimations]; 
```

同样，您可以使用以下值`CGAffineTransformMakeScale(x, y);`- x 是水平比例常数，y 是垂直比例常数。享受！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:39:24.067

可能对你有帮助

```
 monthsOnBoard.transform = CGAffineTransformScale(monthsOnBoard.transform, 1, 1); 
    [UIView beginAnimations:nil context:nil/*contextPoint*/];
    monthsOnBoard.transform = CGAffineTransformScale(monthsOnBoard.transform, 4, 4); 
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDelay:0.5];
    [UIView setAnimationDuration:1];
    [UIView setAnimationRepeatCount:4];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView commitAnimations]; 
```

# github - GitHub 组织回购 + Jenkins（GitHub 插件）集成

> ID：10696112
> 
> 赞同：6
> 
> 时间：2012-05-22T05:22:06.887
> 
> 标签：github, continuous-integration, hudson, jenkins, jenkins-plugins

我在 GitHub 上有一个带有私有存储库的组织。我还设置了 Jenkins 在服务器上的 8080 端口上运行，并安装了 GitHub 插件。我在 GitHub 上为我的 jenkins 用户创建了一个帐户，该帐户位于所有者组中。

当更改被推送到我的开发分支（或主分支，似乎都没有工作）时，我试图在 jenkins 上触发工作。

当我查看 Jenkins 中的 GitHub Hook Logs 时，它说轮询尚未运行。当我转到“管理 Jenkins”时，GitHub 插件说我的帐户在我测试时已验证。

关于如何配置它的任何见解？我有多个我想使用的存储库，所以部署密钥对我来说似乎不是解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T06:09:22.357

更新：

正如[Craig Ringer在](https://stackoverflow.com/users/398670/craig-ringer)[他的回答](https://stackoverflow.com/a/13818123/6309)中提到的那样，您可以`Grant READ permissions for /github-webhook`在 GitHub 插件设置下的“配置 Jenkins”中进行选择，从而允许在没有身份验证的情况下调用 webhook。

另一个更新：[Webhooks 现在（2014 年 12 月）可用于组织](https://github.com/blog/1933-introducing-organization-webhooks)：请参阅[WebHooks API for orgs](https://developer.github.com/v3/orgs/hooks/)。

* * *

注意：[hudson-github-plugin的](https://github.com/juretta/hudson-github-plugin)[第 4](https://github.com/juretta/hudson-github-plugin/issues/4)期是关于：

```
Last GitHub Push

Polling has not run yet. 
```

结论是：

> 没关系，唯一缺少的部分是 github 用户的权限复选框，它没有在互联网上的任何地方记录。

那么这是关于您的 Jenkins 用户的权限问题吗？

文章“[在 Ubuntu 上设置 Jenkins-CI 以进行无痛 Rails3 应用程序 CI 测试](http://nepalonrails.tumblr.com/post/14217655627/set-up-jenkins-ci-on-ubuntu-for-painless-rails3-app-ci)”包括以下过程：

> 要限制 CI 系统并允许您的团队成员使用或查看构建日志，首先您必须创建一个帐户。
> 
> *   去`Manage Jenkins > Configure System`，
> *   选中`Enable Security`复选框
> *   下`Security Realm`，选择Jenkins自己的用户数据库
> *   选中`Allow users to sign up`复选框
> *   在 下`Authorization`，选择`Project-based Matrix Authorization Strategy`
> *   添加名为 admin 的第一个用户和另一个具有 GitHub 的用户（注意：管理员访问的用户名必须是 admin）**对于 GitHub 命名用户，只需选择整体只读权限。稍后我们将在 GitHub 挂钩中使用此用户。**
> 
> 注意：我们在上述步骤中添加的 admin 和 GitHub 用户不会创建用户。然后你必须创建一个具有相同名称的真实用户。是的，我知道，Jenkins UI 有点奇怪。
> 
> 转到管理`Jenkins > Manage Users > Create User`。创建管理员和 GitHub 用户。
> 
> ### 与 Github 网络挂钩挂钩
> 
> 现在要在新的提交或分支被推送到 Github 时自动运行构建，我们必须设置存储库。
> 
> 转到您的存储库的挂钩页面。例如

```
github.com/<username>/<project_name>/admin/hooks 
```

> 在 下`AVAILABLE SERVICE HOOKS > Post-Receive URLs`，添加`github:github@your-ci-server.com/github-webhook/`。
> 
> `github:github`是我们之前创建的用户。
> 
> 然后我们必须用 Github 验证 Jenkins。转到 Manage Jenkins > Configure System 并在 GitHub Web Hook 下，添加您的 Github 用户名和密码，然后单击 Test Credential 按钮以使用 Github 进行一次授权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:19:32.420

当前版本的 GitHub 插件似乎不再需要接受的答案。您可以改为检查`Grant READ permissions for /github-webhook`GitHub 插件设置下的“配置 Jenkins”，允许在没有身份验证的情况下调用 webhook。

正如这个选项的帮助中所解释的那样，这是非常安全的，坦率地说，这并不比拥有一个名为“github”且密码为“github”的用户更糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:41:29.247

有两种方法可以在 Jenkins 上实现自动构建。您选择什么取决于 GitHub 是否可以调用您提供的 Jenkins 服务器 URL。如果您在防火墙后面运行 Jenkins，情况可能并非如此。

1.  如果 GitHub 可以访问该 URL，您可以在那里在您的存储库中设置**服务挂钩**。
2.  如果没有，您可以设置 Jenkins**定期轮询**。

您可以同时设置两者，但一种解决方案足以让它发挥作用。如果可行，我总是会选择第一个，因为它可以节省资源 CPU 和流量。

无论哪种方式，您都需要[Jenkins 的 GitHub 插件](https://wiki.jenkins-ci.org/display/JENKINS/Github+plugin)。

希望有点帮助。

# java - Java Swing 按键事件

> ID：10696113
> 
> 赞同：1
> 
> 时间：2012-05-22T05:22:14.430
> 
> 标签：java, swing, focus, keypress

我正在为我的 JFrame 使用我预定义的继承的焦点遍历类

我已经为我的一个按钮定义了按键事件，并在按下 Tab 键以选择我的 jTabbed Pane 的其他选项卡时进行了一些操作。此按钮仅对 tab 键没有响应。

```
 int index=1;

    if(evt.getKeyCode() == KeyEvent.VK_TAB) 
      {

          // wrap around

    if(evt.isShiftDown())
    {

      KeyboardFocusManager.getCurrentKeyboardFocusManager().focusPreviousComponent();

    }   
    else
    {
     System.out.print("Shift Up");

      KeyboardFocusManager.getCurrentKeyboardFocusManager().focusNextComponent();
      jtabPaneProducts.setSelectedIndex(index);
    }
    } 
```

请指导我如何使 jbutton 除了焦点遍历功能之外，还可以响应 TAB 按键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:24:49.363

您应该有兴趣阅读[How to Write a Key Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)：

> 或者，您可以使用 KeyEventDispatcher 类来预听所有关键事件。焦点页面有关于焦点子系统的详细信息。

因此：[接口 KeyEventDispatcher](http://docs.oracle.com/javase/7/docs/api/java/awt/KeyEventDispatcher.html)

# java - GWT Maven 依赖项

> ID：10696117
> 
> 赞同：0
> 
> 时间：2012-05-22T05:22:40.383
> 
> 标签：java, gwt, maven

我有 Maven 项目 Main 和项目 Util。

Project Util 依赖于一个依赖于 gwt-dev 的第三方库 Lib。gwt-dev 会引起很多冲突，只有GWT编译需要，所以应该标记为“provided”，但它是“compile”。

所以我应该在 Util 中将 Lib 标记为“提供”。但是如果我这样做，我的 Main 项目将无法编译，因为它找不到 Lib 类。

目前，我将 Lib 标记为“已提供”，然后将其作为“已提供”包含在 Main 中。这很不方便，因为我必须记住 Util 依赖项。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:26:52.760

`Lib`在`compile`范围内使用并[排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)gwt-dev：

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>Lib group</groupId>
      <artifactId>Lib artifact id</artifactId>
      <version>Lib version</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>  <!-- declare the exclusion here -->
          <groupId>com.google.gwt</groupId>
          <artifactId>gwt-dev</artifactId>
        </exclusion>
      </exclusions> 
    </dependency>
  </dependencies>
</project> 
```

只是一句话，排除通常是一种不好的做法。在这种情况下，您没有太多选择，因为`Lib`' 的工件应该具有`gwt-dev`as `provided`(它是`Lib`' 的错误...)。所以，不要忘记添加一个体面的评论来解释排除。

# android - 获取android中所有已安装应用的图标

> ID：10696121
> 
> 赞同：32
> 
> 时间：2012-05-22T05:23:15.920
> 
> 标签：android, android-package-managers

我想获取所有已安装应用程序的图标。我可以使用包管理器获取该图标吗？它有什么功能吗？或任何其他方式在位图中获取所有已安装应用程序的图标？

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-22T05:28:40.173

```
try {
    String pkg = "com.app.my";//your package name
    Drawable icon = getContext().getPackageManager().getApplicationIcon(pkg);
    imageView.setImageDrawable(icon);
} catch (PackageManager.NameNotFoundException ne) {

} 
```

[在这里](https://stackoverflow.com/questions/5612233/android-how-to-get-the-icon-of-an-app)查看更多详情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-08T06:49:05.627

上面的答案都很好。

您的问题是：-**获取 android 中所有已安装应用程序的图标？** 你想要安装应用程序图标列表

这是帮助您使用 Application **(icons,packages names)**获取安装应用程序列表的代码。

```
**Declare variable in your Activity**

private CustomAppListAdapter customAppListAdapter;
private ArrayList<AppListMain> appListMainArrayList;
private AppListMain appListMain; 
```

只需在您的活动 onCreate() 中调用以下函数 loadApps()

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_app_list);
    loadApps();

}

public void loadApps() {
    try {
        packageManager = getPackageManager();
        appListMainArrayList = new ArrayList<>();
        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        List<ResolveInfo> resolveInfoList = packageManager.queryIntentActivities(intent, 0);

        for (ResolveInfo resolveInfo : resolveInfoList) {
            AppListMain appListMain = new AppListMain();
            appListMain.setAppIcon(resolveInfo.activityInfo.loadIcon(packageManager));
            appListMain.setAppName(resolveInfo.loadLabel(packageManager).toString());
            appListMain.setAppPackage(resolveInfo.activityInfo.packageName);
            appListMainArrayList.add(appListMain);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

*这是[链接](https://github.com/ArbazGitHub/Custom-Launcher/blob/master/app/src/main/java/com/techno/minilauncher/screens/AppListActivity.java)供参考*

或者

*您可以从 My [Github](https://github.com/ArbazGitHub/Custom-Launcher.git)存储库下载自定义启动器代码*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-03T16:58:49.630

我发现它是最简单的方法：

```
private List<ResolveInfo> installedApps() {
    final Intent main_intent = new Intent(Intent.ACTION_MAIN, null);
    main_intent.addCategory(Intent.CATEGORY_LAUNCHER);
    return package_manager.queryIntentActivities(main_intent, 0);
} 
```

现在要获取图标，请使用以下命令：

```
for(ResolveInfo ri : installedApps()) { 
    // to get drawable icon -->  ri.loadIcon(package_manager)
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-11T00:01:21.553

试试这个方法：创建一个名为`PackageInformation`：

```
public class PackageInformation {

    private Context mContext;

    public PackageInformation(Context context) {
        mContext = context;
    }

    class InfoObject {
        public String appname = "";
        public String pname = "";
        public String versionName = "";
        public int versionCode = 0;
        public Drawable icon;

        public void InfoObjectAggregatePrint() { //not used yet
            Log.v(appname, appname + "\t" + pname + "\t" + versionName + "\t" + versionCode);
        }

    }

    private ArrayList < InfoObject > getPackages() {
        ArrayList < InfoObject > apps = getInstalledApps(false);
        final int max = apps.size();
        for (int i = 0; i < max; i++) {
            apps.get(i).prettyPrint();
        }
        return apps;
    }

    public ArrayList < InfoObject > getInstalledApps(boolean getSysPackages) {
        ArrayList < InfoObject > res = new ArrayList < InfoObject > ();
        List < PackageInfo > packs = mContext.getPackageManager().getInstalledPackages(0);
        for (int i = 0; i < packs.size(); i++) {
            PackageInfo p = packs.get(i);
            if ((!getSysPackages) && (p.versionName == null)) {
                continue;
            }
            InfoObject newInfo = new InfoObject();
            newInfo.appname = p.applicationInfo.loadLabel(mContext.getPackageManager()).toString();
            newInfo.pname = p.packageName;
            newInfo.versionName = p.versionName;
            newInfo.versionCode = p.versionCode;
            newInfo.icon = p.applicationInfo.loadIcon(mContext.getPackageManager());
            res.add(newInfo);
        }
        return res;
    }

} 
```

把它藏在某个地方，现在要从你的工作活动类中访问信息，请执行以下操作：

```
PackageInformation androidPackagesInfo = new PackageInformation(this);
ArrayList < InfoObject > appsData = androidPackagesInfo.getInstalledApps(true);

for (InfoObject info: appsData) {
    Toast.makeText(MainActivity.this, info.appname, 2).show();
    Drawable somedrawable = info.icon;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-11T13:33:56.270

下面是获取所有已安装应用程序图标的代码。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            try {
                // try getting the properly colored launcher icons
                LauncherApps launcher = (LauncherApps) this.getSystemService(LAUNCHER_APPS_SERVICE);
                List<LauncherActivityInfo> activityList = launcher.getActivityList(packageName, android.os.Process.myUserHandle());
                drawable = activityList.get(0).getBadgedIcon(0);
            } catch (Exception e) {
            }
        }

        if (drawable == null) {

            try {
                getPackageManager().getApplicationIcon(packageName);
            } catch (PackageManager.NameNotFoundException e) {
                e.printStackTrace();
            }
        } 
```

# iphone - NSMutableURLRequest 上的内存管理

> ID：10696123
> 
> 赞同：0
> 
> 时间：2012-05-22T05:23:36.740
> 
> 标签：iphone

我是 iPhone 开发的新手。我的问题是关于内存管理这是我的代码：

```
- (void)asynchronousRequestServerWithXMLPost:(NSString *)urlAddress PostData:(NSString *)postContent {

urlAddress = [self encodeStringForURL:urlAddress];
theRequest = [[[NSMutableURLRequest alloc] init]autorelease];
[theRequest setURL:[NSURL URLWithString:urlAddress]];
if([postContent length] > 0) {
    [theRequest setHTTPMethod:@"POST"];
} else {
    [theRequest setHTTPMethod:@"GET"];
}

NSData *theBodyData = [postContent dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
[theRequest setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
NSString *postLength = [NSString stringWithFormat:@"%d", [theBodyData length]];
[theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPBody:theBodyData];    

[NSThread detachNewThreadSelector:@selector(sendSyncRequest) toTarget:self withObject:nil]; 
```

}

我在这些方面得到了泄漏：

```
theRequest = [[[NSMutableURLRequest alloc] init]autorelease];
[theRequest setURL:[NSURL URLWithString:urlAddress]];
NSData *theBodyData = [postContent dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
[theRequest setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"]; 
```

如果有人可以帮助，那么请帮助我。感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:11:33.867

我猜你的泄漏是由这条线造成的：

```
urlAddress = [self encodeStringForURL:urlAddress]; 
```

我需要查看您的 encodeStringForURL 代码，但我猜您是否在没有自动释放的情况下将其传回。此外，我不会将该方法的结果分配给您的参数变量，然后您将失去对其的引用。你应该这样做：

```
NSString *encodedUrlAddress = [self encodeStringForURL:urlAddress]; 
```

然后在调用 URLWithString 时使用 encodedUrlAddress。

# c++ - Vector:clear/pop_back 不会运行析构函数

> ID：10696124
> 
> 赞同：2
> 
> 时间：2012-05-22T05:23:39.883
> 
> 标签：c++, vector, destructor, irrlicht

我有一个“Pictureframe”的向量（pflist），我想销毁所有这些。所以我运行 pflist.clear(); 文档说这会运行向量中每个项目的析构函数，但事实并非如此！

我有一个：

```
vector<Pictureframe*> pflist; 
```

这是其余的：

```
class Pictureframe{
    scene::IMeshSceneNode *picture;
    scene::IMeshSceneNode *frame;

public:
    Pictureframe();
    ~Pictureframe();
}; 
```

然后在cpp文件中：

```
Pictureframe::~Pictureframe(){
//  delete picture;
//  delete frame;
    cout<<"Destructor Called.\n\n";
} 
```

看不到一个“被调用的析构函数”！这就是我所说的：

```
pflist.clear(); 
```

我确信这条线正在运行，并且由 5 个相框填充。我还尝试了一个通过向量 pop_back'ing 的 for 循环，并且遇到了同样的问题。

所以析构者，YU NO CALL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T05:37:48.707

你的问题没有说明是什么类型`std::vector`。如果类型是，`std::vector<Pictureframe *>`则调用时不会调用每个元素的析构函数`std::vector::clear`。在这种情况下，您需要在清除向量***之前***`delete`对这些对象负责。

 *如果您不需要动态分配这些对象，请将向量类型更改为`std::vector<Pictureframe>`. 将其用作：

```
std::vector<Pictureframe> vec;
vec.push_back( Pictureframe( ... ) );
// do stuff
vec.clear(); 
```

现在将调用每个对象的析构函数。请记住创建一个复制构造函数和赋值运算符，`Pictureframe`因为它看起来像该类正在管理一些资源。

如果必须动态分配`Pictureframe`对象，请将向量更改为

```
std::vector<std::unique_ptr<Pictureframe>> vec;
vec.push_back( std::unique_ptr<Pictureframe>( new Pictureframe( ... ) ) );
// do stuff
vec.clear(); 
```

`unique_ptr`在这种情况下将自动`delete`生成对象。

其他替代方法是`boost::shared_ptr`代替`std::unique_ptr`or [`boost::ptr_vector`](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_vector.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:24:54.233

我很确定你有一个`std::vector<Pictureframe *>`
Any 标准库容器不负责清除动态分配的指针元素。

您将不得不遍历`std::vector`并调用`delete`每个元素。

我对一个老问题的这个答案应该是一个很好的阅读：
[**向量::erase() 会破坏被移除的对象吗？**](https://stackoverflow.com/questions/6353149/does-vectorerase-destroy-the-removed-object/6353169#6353169)*

# .net - ConfigurationManager.ConnectionStrings(2).ConnectionString

> ID：10696125
> 
> 赞同：0
> 
> 时间：2012-05-22T05:24:03.640
> 
> 标签：.net, sql-server, vb.net

我只是很难弄清楚数字 2 在

```
ConfigurationManager.ConnectionStrings(2).ConnectionString 
```

定义？

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:28:44.590

它是配置中连接字符串集合中第 n 个索引（在您的情况下为 2）处的连接字符串。

查看 web.config/app.Config 中的 ConnectionStrings 部分，您将看到使用 index = 2 定义的连接字符串

我更喜欢按名称引用而不是整数索引，因为它更清楚您要定位哪个连接字符串。

前任：`ConfigurationManager.ConnectionStrings("SomeConnectionStringName").ConnectionString`

# android - 我应该创建许多活动还是制作一个很长的活动？

> ID：10696126
> 
> 赞同：1
> 
> 时间：2012-05-22T05:24:11.013
> 
> 标签：android

好的，我被告知要制作一个高尔夫记分卡应用程序，但我被困在如何实现每个洞的得分。

在高尔夫中，每个洞都有自己的得分，而我正在为其制作应用程序的洞每场比赛多达 27 个洞。

我不知道我是否应该为 27 个洞制作 27 个活动，或者为整个事情使用一个 Activity 和 ViewFlip 以及 27 个不同的相同布局。

现在我只想知道解决这个问题的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:34:38.767

> 我不知道我是否应该为 27 个洞制作 27 个活动，或者为整个事情使用一个 Activity 和 ViewFlip 以及 27 个不同的相同布局。

每个洞的布局都是相同的（我假设），所以用那个布局做一个活动，当需要去下一个洞得分时，只需更新那个布局中的数据。即使不同孔的布局略有不同，您仍然应该使用您更新的单个布局（当然还要动态修改它）。

`ViewFlipper`如果您打算在 27个相同的布局之间翻转，请不要使用。

# 3d - 渲染不可见的对象？

> ID：10696127
> 
> 赞同：1
> 
> 时间：2012-05-22T05:24:18.693
> 
> 标签：3d, game-engine

你知道在 3D 游戏中，有很多对象。我的问题是 GPU 是否渲染不可见的对象？即世界游戏的那些部分，例如在相机后面...tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:27:56.273

不，在适当的引擎上，信息不会在该帧期间传递到 GPU，对于不可见对象也是如此。将它们发送到 GPU 只会减慢帧速率（大多数游戏在 GPU 上的瓶颈），因此在要求渲染它们之前，会预先进行计算以确保某些内容实际上会出现在屏幕上。如果不是这种情况，显卡仍然会在屏幕外渲染，这在很多情况下会导致低帧率。就像我之前说的，大多数图形和/或游戏引擎已经正确地解释了这一点。

# json - Jackson Json 反序列化问题

> ID：10696128
> 
> 赞同：1
> 
> 时间：2012-05-22T05:24:27.447
> 
> 标签：json, jackson, deserialization

尝试反序列化 JSON 字符串时，出现异常：

```
org.codehaus.jackson.map.JsonMappingException: Invalid type id 'subStatus' (for id type 'Id.class'): no such class found (through reference chain: context.ValueBean["valueObject"]->multipleProfiles.ProfileEntries["m_profileDataMap"]->multipleProfiles.ProfileData["contextMap"])
    at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:218)
    at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:183)
    at org.codehaus.jackson.map.deser.BeanDeserializer.wrapAndThrow(BeanDeserializer.java:1472)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:699)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer._deserialize(AsWrapperTypeDeserializer.java:95)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer.deserializeTypedFromObject(AsWrapperTypeDeserializer.java:45)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeWithType(BeanDeserializer.java:664)
    at org.codehaus.jackson.map.deser.std.MapDeserializer._readAndBind(MapDeserializer.java:321)
    at org.codehaus.jackson.map.deser.std.MapDeserializer.deserialize(MapDeserializer.java:249)
    at org.codehaus.jackson.map.deser.std.MapDeserializer.deserialize(MapDeserializer.java:33)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer._deserialize(AsWrapperTypeDeserializer.java:95)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer.deserializeTypedFromObject(AsWrapperTypeDeserializer.java:45)
    at org.codehaus.jackson.map.deser.std.MapDeserializer.deserializeWithType(MapDeserializer.java:273)
    at org.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:297)
    at org.codehaus.jackson.map.deser.SettableBeanProperty$FieldProperty.deserializeAndSet(SettableBeanProperty.java:579)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:697)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer._deserialize(AsWrapperTypeDeserializer.java:95)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer.deserializeTypedFromAny(AsWrapperTypeDeserializer.java:66)
    at org.codehaus.jackson.map.deser.std.UntypedObjectDeserializer.deserializeWithType(UntypedObjectDeserializer.java:106)
    at org.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:297)
    at org.codehaus.jackson.map.deser.SettableBeanProperty$MethodProperty.deserializeAndSet(SettableBeanProperty.java:414)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:697)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer._deserialize(AsWrapperTypeDeserializer.java:95)
    at org.codehaus.jackson.map.jsontype.impl.AsWrapperTypeDeserializer.deserializeTypedFromObject(AsWrapperTypeDeserializer.java:45)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeWithType(BeanDeserializer.java:664)
    at org.codehaus.jackson.map.deser.StdDeserializerProvider$WrappedDeserializer.deserialize(StdDeserializerProvider.java:461)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1863) 
```

我的杰克逊配置是：

```
 ObjectMapper mapper = new ObjectMapper();
    mapper.setVisibility(JsonMethod.FIELD, JsonAutoDetect.Visibility.ANY);
    mapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);
    mapper.enableDefaultTyping(); 
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_OBJECT); 
    Object jsonObj = null;
    try
    {
        jsonObj = mapper.readValue(objStr, clazz);
    }
    catch (JsonGenerationException e)
    {
        g_log.error(e, e);
    }
    catch (JsonMappingException e)
    {
        g_log.error(e, e);
    }
    catch (IOException e)
    {
        g_log.error(e, e);
    } 
```

我一直在寻找这个问题的几个小时。我看到的问题是地图的键实际上是一个字符串。但杰克逊将其视为一个类并试图加载该类。

如果我错过了导致此问题的某些配置，请告诉我。

# android - 在 Facebook 上分享 HTML 内容

> ID：10696133
> 
> 赞同：4
> 
> 时间：2012-05-22T05:25:39.977
> 
> 标签：android, html, facebook

如何在 Facebook 上分享 html 内容？我想要的是在 facebook 上以表格格式分享文本。我尝试将它作为文字分享在墙上，它没有用。此外，我尝试将其保存为 .html 并像我们共享图像一样发布到 Facebook。它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:08:32.247

发布到用户的墙上完成发布 POST 到

```
https://graph.facebook.com/USER_ID/feed 
```

[使用Post](https://developers.facebook.com/docs/reference/api/post/)类型的 Facebook 对象。Facebook Post 类型包括这些在发布后可见的 String 内容字段：

```
description
caption
message 
```

这些字段都不支持 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:48:22.693

为此目的使用 facebook post API...
[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)
它可以帮助您为 Facebook post 提供不同的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:48:37.140

从我在谷歌上看到的，在你的 Facebook 墙上发布原始 HTML 是不可能的，你可以做的是上传一个页面并通过链接在墙上引用它。

# multithreading - 对于 Excel 2003，XLL 中的 UDF 可以使用多个线程吗？

> ID：10696135
> 
> 赞同：0
> 
> 时间：2012-05-22T05:25:45.980
> 
> 标签：multithreading, excel, user-defined-functions, xll

仅供参考 1：UDF = 用户定义（工作表）函数 仅供参考 2：XLL = Excel 插件（DLL -> XLL）

我正在使用 Microsoft 的 Excel4() API 在 C/C++ 中为 Excel 编写 XLL 加载项。
链接：http: [//msdn.microsoft.com/en-us/library/bb687835.aspx](http://msdn.microsoft.com/en-us/library/bb687835.aspx)

我有一个“复杂”的任务，我想使用多个线程来获得更好的性能。虽然我知道 Excel 2003 中的计算是单线程的，但我想知道我的 UDF 是否可以 (a) 产生线程来完成工作，(b) 等待线程完成，以及 (c) 返回结果。

非常清楚，我不会做任何 Excel 自动化，也不会在线程中调用 Excel4()。

伪代码：

```
变体 MyComplexUDF（变体输入 1，变体输入 2）
{
    线程 t1 = new WorkerThread(input1);
    线程 t2 = new WorkerThread(input2);
    t1.join();
    t2.join();
    返回 [t1.Result(), t2.Result()];
}

```

从表面上看，这看起来不错，但我不是 DLL/XLL 和线程方面的专家。

PS我已经在谷歌（高和低）搜索了这个答案，但找不到任何关于此事的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:46:51.667

您可以根据需要启动任意数量的线程，然后等待它们。最新版本的 API 还支持异步 UDF。[您可以在http://xll.codeplex.com](http://xll.codeplex.com)中找到一些示例。看看 test/async.cpp：http: [//xll.codeplex.com/SourceControl/changeset/view/14528#139508](http://xll.codeplex.com/SourceControl/changeset/view/14528#139508)

# iphone - 谷歌地图在 Iphone 中的实现

> ID：10696139
> 
> 赞同：5
> 
> 时间：2012-05-22T05:26:12.687
> 
> 标签：iphone, objective-c, google-maps

我已经在我的 iphone 应用程序中实现了谷歌地图功能。它工作正常，但如果要搜索的位置是错误的字符串，那么它会映射一个位置，并且只有在单击搜索按钮后才会重定向到当前位置。如何实现，如果位置错误则直接转到当前位置？我的代码如下

```
NSString *urlString = [[NSString stringWithFormat:@"http://maps.google.com/maps?z=14&q=%@",message] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL *url = [NSURL URLWithString:urlString];

if ([[UIApplication sharedApplication] canOpenURL:url]) {
    [[UIApplication sharedApplication] openURL:url];        
} 
```

请尽快给我一个解决方案提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T02:58:45.393

由于您在离开应用程序的那一刻失去控制，因此您应该始终在打开 URL**之前**`message`执行有效性检查，方法是传递给 CLGeocoder 或第 3 方 Geocoder 。

[CLGeocoder 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)

基本上查询应用程序内的位置字符串，**然后**相应地格式化您的 url。

# java - 执行过程中变量的地址可以改变吗？

> ID：10696145
> 
> 赞同：1
> 
> 时间：2012-05-22T05:26:37.430
> 
> 标签：java, c++, c, variables, clr

我正在阅读变量的地址绑定，并想知道在任何情况下执行期间变量的地址是否会发生变化？它会由于 JVM 或 CLR 中的垃圾收集而发生吗？那么 C 和 C++ 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:29:45.790

如果你的代码有未定义的行为，那么所有的赌注都没有了，是的，它可能会发生。
但在有效的 C/C++ 程序中，变量的地址不会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:51:00.523

*这在很大程度上取决于语言以及更改地址的*含义。在 C++ 中，对象的地址是唯一标识它的对象，它们不能移动。一些托管语言（包括 Java 和 C#）使用分代垃圾收集器，它们实际上在内存中移动对象（在分代 GC 中，对象会随着时间从一代移动到另一代），但事实是您不应该关心：那些你可以获得对象地址的语言，地址是固定的，在那些地址固定的语言中，它不是对象*可感知*状态的一部分......

另请注意，我在这里使用的是*object*，而不是 variable，因为我相信这是您感兴趣的。有一条细线将对象和变量分开，例如在Java中，引用是可以用来访问对象的变量。但我什至不会尝试进入任何一个的精确定义......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:36:34.197

在一个有效的 C/C++ 程序中，除非您的代码故意或以其他方式更改变量的地址，否则执行环境不会更改该地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:15:41.213

基本上，变量在程序的执行时间内继续引用相同的值或内存位置。但这可以更改，使其`uninitialized`（具有未定义的值），因此尚未明确赋予它特定的值。这可能会产生不可预知的结果。为了处理这样的问题，内存中变量所需的空间可以仅在变量第一次使用时分配，在不再需要时释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T05:43:18.057

在Java 中，某些类型的变量的地址可以改变（例如静态或实例字段），而另一些通常不能（例如局部变量）。对于当前一代 JVM，线程堆栈位于堆外的内存段中，GC 不会移动它们。

但是，这对于“获取变量的地址”是没有实际意义的，因为您不能在 Java 中这样做。（如果可以，那么 GC 负责处理重定位。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T07:58:07.937

在 c++ 中，地址不会改变。

请注意，在 c++ 中，您可以为类 tyoe 的变量覆盖 & 运算符，因此即使地址不会更改，您可能从 &variable 获得的值也可能会更改（这不是地址更改，但可能会令人困惑）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T05:40:39.193

它不太可能改变，但不要将你的代码基于它不会改变的假设。

# sql-server-2005 - 从插入触发器中的另一个表中选择

> ID：10696147
> 
> 赞同：0
> 
> 时间：2012-05-22T05:26:51.207
> 
> 标签：sql-server-2005, triggers

我正在维护一个审计表，其中我有一个父表，它是子表。我想将父审计表的主键插入到它的子审计表中。
我是否应该声明**“插入前”**而不是**“插入”**触发器。这是我的代码：

```
CREATE trigger [trgAudtblChild] On [tblChild]
for Insert 
as
BEGIN

declare @serNo  bigint 
declare @expSerNo  int 
declare @postPercent  numeric  (12, 2) 
declare @prdSAPid  varchar  (50) 
declare @lastUpdatedBy  int 
declare @lastUpdatedOn  smalldatetime 

SELECT 
 --@serno = serno,
 @expSerNo = expSerNo ,
 @postPercent = postPercent ,
 @prdSAPid = prdSAPid ,
 @lastUpdatedBy = lastUpdatedBy ,
 @lastUpdatedOn = lastUpdatedOn
FROM INSERTED

select @serno = max(at_serno) from AT_tblParent

insert into AT_tblChild(serNo, expSerNo, postPercent
                       , prdSAPid, lastUpdatedBy, lastUpdatedOn
                       , change_column_index) values(
                                  @serNo, @expSerNo, @postPercent
                          , @prdSAPid, @lastUpdatedBy, @lastUpdatedOn
                          , 'INSERTED')

End
Return 
```

上面的代码不起作用并将表放入事务中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:11:56.057

**`Before Trigger`**- 当您想在数据实际插入表之前拦截数据。

**`For Trigger`**- 您的记录已插入，但仍可修改。

唯一的区别是关于记录实际上是否插入。

## 回到原来的查询

在你上面提到的情况下，你不应该使用`Before Trigger`. 考虑一个案例，当您的父表记录在某些事务下插入并且相同的事务被回滚时。在这种情况下，它将因外键约束而崩溃。因为您将尝试在插入期间将父表的外键记录引用到子表中，而父表中不存在该外键记录。

# linux - 设备节点已创建，但设备驱动程序未链接

> ID：10696148
> 
> 赞同：0
> 
> 时间：2012-05-22T05:26:59.643
> 
> 标签：linux, char, kernel, driver, device

我写了一个简单的设备驱动程序。仅加载我的设备文件正在创建的模块。但是当我的应用程序尝试打开设备文件时，我收到错误消息`-1 (operation not permitted)`。当我尝试通过执行命令查看设备特性时：

```
 $udevadm info -a -p /sys/class/char/<devname> 
```

我得到输出：

```
KERNEL=="<devname>"
SUBSYSTEM=="char" 
DRIVER==" " 
```

所以显然我的设备节点没有链接到设备驱动程序。

任何人都可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:12:44.073

您是否检查了 udev 创建的设备节点的权限？

Udev 管理这些设备节点的权限，除非您以 root 身份运行，否则很可能不允许您从/向设备节点读取/写入。

**编辑**

如果您以 root 身份运行，则设备节点上的权限将不是一个因素。请向我们展示 /proc/devices 的内容、输出`ls -la /dev/my-device-node`和*您的代码*。

# android - 在地图程序中，我收到错误，因为无法在设备 'emulator-5554 上安装 map.apk

> ID：10696150
> 
> 赞同：0
> 
> 时间：2012-05-22T05:27:22.593
> 
> 标签：android, google-maps, map

我做的一切都正确，通过使用debug.keystore我生成了我的MD%代码，我从谷歌网站获得了我的有效API密钥，我允许在MasinFest.xml中使用互联网连接，并在main.xml.和MapActivity中使用我的映射键值文件我只是在下面的代码中使用了这个

```
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class MapsActivity extends MapActivity 
{    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

我正在使用 Android 4.0.3 版本和 Google API Level 15，我收到错误为 05-22 10:32:42.086: E/MapActivity(656): Couldn't get connection factory client in LogCat.. 帮我解决这个问题请..在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:34:59.407

好吧，您正在尝试导入谷歌地图的类。为此，您需要确保您尝试使用的设备上已经安装了谷歌地图应用程序。除非它在您的设备上找到谷歌地图应用程序，否则您的应用程序将无法工作。

# android - Listview 和 textview 在同一个布局中

> ID：10696152
> 
> 赞同：1
> 
> 时间：2012-05-22T05:27:28.460
> 
> 标签：android, listview

在我的应用程序中，我必须显示一个列表视图，并且在下面我必须显示一个文本视图。是否可以在同一布局中使用列表视图和文本视图？我的代码如下：

```
 setContentView(R.layout.report);  
     ListView lv=(ListView)findViewById(R.id.listView1);
     db.open();
     Cursor c = db.getAllTitles();
     startManagingCursor(c);    
     String[] from = new String[] { db.KEY_INCOME,db.KEY_DESC};
     int[] to = new int[] { R.id.textView1 ,R.id.textView2};
     SimpleCursorAdapter notes =
                new SimpleCursorAdapter(this, R.layout.report, c, from, to);
//     System.out.println("notes="+notes.getCount());
     lv.setAdapter(notes);
    String total=  db.add(); 
```

实际上，我正在显示 2 个文本视图以在列表中显示数据，最后我必须添加第 3 个文本视图以显示总计，如果我放置相对布局，此列表视图将正确覆盖另一个。我的 Xml 文件如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >   

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   />
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   /> 
<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    >
</ListView> 
```

任何人请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:36:44.417

是的，这是可能的，但是只要列表大小超过屏幕高度，您将永远无法看到 textview。因此，不要将视图添加到 LinearLayout 中，而是将这些视图添加到 RelativeLayout 中，将 ListView 高度设置为填充父视图，以及高于文本视图。和 TextView 在父底部的对齐方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:43:11.180

是的，您可以在 Listview 下面使用 Textview 使用**Layout margin bottom** to listview 提供一些填充，并将您的 Textview 添加到 Listview 下方。因此，请使用**RelativeLayout**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:12:48.280

使用 Linearlayout 而不是 Realitivelayout 并将方向设置为“垂直”

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 

<your textview/>
<your textview/>   

<your listview/>
<your textview with proper id/>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:40:45.143

您可以在屏幕底部放置一个文本视图，并让列表视图占据屏幕顶部和底部文本视图之间的整个空间

这种布局应该可以解决问题：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">  

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"/>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_above="@id/textView1"/>
</RelativeLayout> 
```

# c - 错误：v.contents[30] 在此函数中未初始化使用

> ID：10696169
> 
> 赞同：0
> 
> 时间：2012-05-22T05:28:52.000
> 
> 标签：c

这是我的结构；

```
typedef struct _values {
int contents[MAX_CONTENTS];
    ... more ints;
} values; 
```

在另一个函数中，我初始化这个特定的数组；

```
int contents[MAX_CONTENTS] = {0};

for (i = 0; i < MAX_CONTENTS; i++) {
    v.contents[i] = contents[i];
} 
```

我主要有这个；

```
values v;
newValues (v); 
```

每当我尝试像这样修改 main 中的元素时，我都会收到错误消息；

```
v.contents[30] = 3; 
```

这是我得到的唯一错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:46:02.507

`v`（及其`contents`内部）可能会按值传递。将函数的原型更改为：

```
void newValues(values *v); 
```

将您的调用方式更改为：

```
newValues(&v); 
```

而不是：

```
v.contents[i] = /* ... */; 
```

采用：

```
v->contents[i] = /* ... */; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:30:31.453

您可能打算这样复制：

```
for (i = 0; i < MAX_CONTENTS; i++) {
    v.contents[i] = contents[i];
} 
```

# eclipse - 使用 m2e 配置 Eclipse 格式化程序

> ID：10696170
> 
> 赞同：5
> 
> 时间：2012-05-22T05:28:53.170
> 
> 标签：eclipse, maven, m2eclipse, m2e, eclipse-formatter

将 Maven 项目导入 Eclipse 时，是否有任何现有的 m2e 扩展来配置 Eclipse 格式化程序？我们正在使用自定义的 checkstyle 规则，m2eclipse 为我们配置了 Eclipse-CS-plugin。但除此之外，我还希望配置 Eclipse 格式化程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:48:07.327

这个 Eclipse 插件可能有用（[https://github.com/SciSysUK/m2eclipse-maveneclipse](https://github.com/SciSysUK/m2eclipse-maveneclipse)）。

您可以用它做的一件事是复制文件，例如将格式化程序的首选项文件复制到 Eclipse .settings 文件夹中。它并不完美，但可以完成工作（我真的会对实现这一目标的更好/替代方式感兴趣）。

这里有一个例子：[https](https://github.com/philwebb/springfaces/blob/master/springfaces/pom.xml) ://github.com/philwebb/springfaces/blob/master/springfaces/pom.xml 。请注意，您还可以使用 URL，以便在某处托管这些文件

# sql - SQL 查询 - 如何删除 null 并替换为空白

> ID：10696173
> 
> 赞同：1
> 
> 时间：2012-05-22T05:28:59.740
> 
> 标签：sql

这是我的查询：

```
SELECT ename, sal, comm
FROM EMP
WHERE comm IS NULL
ORDER BY sal DESC; 
```

我想用空格替换列`NULL`中的结果。`comm`我被告知要 under `SELECT, write NULL(comm,' ')`，但是这会出现一个错误，说无效号码。如果我有`NULL(comm, 0)`，则查询有效，在列中返回 0。

据我了解，这意味着我只能在此列中有一个数字值，但是我想要空格。有人可以请给我一些指导吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:59:22.890

如果您想从查询中输出空格/空白，并且您使用的是 Oracle（正如您的 SQL Developer 参考建议的那样），那么您需要使用该`NVL()`函数`TO_CHAR()`：

```
SELECT ename, sal, NVL( TO_CHAR(comm), ' ' ) comm
FROM   EMP
WHERE  comm IS NULL
ORDER  BY sal DESC; 
```

`TO_CHAR()`需要将 a 转换为`NUMBER`a`VARCHAR2`以使其与空白兼容（即某种字符值，可能存储为`VARCHAR2`内部）。这使您可以避免“无效号码”错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:31:47.397

试试这个查询：

```
UPDATE EMP SET `ename`='' WHERE `ename` IS NULL 
```

而且我认为，您已经对表中的每一列重复此查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T05:32:16.087

我会用

```
SELECT coalesce(Comm,'') FROM EMP WHERE comm IS NULL ORDER BY sal DESC 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T09:52:01.663

```
SELECT SUBJECT, DESCRIPTION, NVL(A.FILENAME,' ') AS FILENAME, 
            to_char(CREATEDATE, 'yyyy-mm-dd') AS CURRDATE, STATUS,  
            ASSIGNTO FROM RQST_DETAIL 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T07:35:05.867

使用以下查询

select ename, ISNULL(comm ,' ') AS comm ,sal from EMP ORDER BY sal desc

它将用空白的 comm 列替换空值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T16:49:27.467

如果列不是字符串，您可以先转换它，然后使用 isnull

```
select isnull(cast(columnname as varchar(102)),'') as XYZ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T05:57:13.360

为了将来参考，运行`DESCRIBE EMP`并将结果发布到问题中。在您运行的查询的结果输出中，按 CTRL-A CTRL-SHIFT-C 并将其粘贴到问题中。这将更好地描绘您所取得的成就以及您希望它如何改变。

最后，您可以运行以下 SQL 来验证您正在运行的 Oracle 版本

```
select * from v$version 
```

你应该看到这样的东西

```
BANNER
Personal Oracle Database 11g Release 11.2.0.1.0 - 64bit Production
PL/SQL Release 11.2.0.1.0 - Production
"CORE   11.2.0.1.0  Production"
TNS for 64-bit Windows: Version 11.2.0.1.0 - Production
NLSRTL Version 11.2.0.1.0 - Production 
```

如果这不起作用，则 SQL Developer 可能没有连接到 Oracle DB。开箱即用的 SQL Developer 仅连接到 Oracle DB 和 MS Access ??

最后，为了回答您的实际问题，NVL 函数用传递给它的第二个参数替换空值。

这里有空间。

```
SELECT ename, sal, NVL(TO_CHAR(comm),' ')
FROM EMP
WHERE comm IS NULL
ORDER BY sal DESC; 
```

# visual-studio-2010 - 如何处理错误“无法加载程序集文件：///C:\sample.dll。此程序集可能已从 Web 下载。”

> ID：10696176
> 
> 赞同：2
> 
> 时间：2012-05-22T05:29:16.620
> 
> 标签：visual-studio-2010, dll

我下载了一些 Windows Phone 应用程序的示例代码。当我尝试在 vs2010 中运行它时，它显示此错误

**“无法加载程序集文件：///C:\Users\sample\Microsoft.Phone.Controls.Toolkit.dll。此程序集可能已从 Web 下载。”**

我更改了此文件的属性并取消阻止它，但它仍然显示相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T06:33:06.447

我也没有看到有问题的 dll 上的取消阻止按钮。将我的项目移动到我的文件夹之外的`Documents`文件夹为我解决了这个问题。我使用 c:\myprojects\ 而不是 c:\users\\Documents\Visual Studio 2010\Projects

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T04:15:24.367

原因是出于某种安全原因，目标程序集被阻止。您必须转到存储程序集的文件夹并通过右键单击属性然后取消阻止按钮来解锁它。

# c# - 如何在 Asp.net 的文件夹中保存图像控制图像

> ID：10696185
> 
> 赞同：2
> 
> 时间：2012-05-22T05:30:31.313
> 
> 标签：c#, asp.net, sql

我知道如何使用带有 saveas 方法的 fileupload 控件将图像保存到文件夹中。但是我从图像控件中获取图像并将其保存到文件中而不使用文件上传控件 n 将其保存在文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:43:49.070

```
string filepath = img1.ImageUrl;           
using (WebClient client = new WebClient())
{
       client.DownloadFile(filepath,Server.MapPath("~/Image/apple.jpg"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:38:27.643

你知道图片路径吗？您可以从图像控件中获取图像路径，然后在代码中下载图像：

[从 .NET/C# 中的站点下载图像](https://stackoverflow.com/questions/3615800/download-image-from-the-site-in-net-c)

```
using(WebClient client = new WebClient()) 
{
    client.DownloadFile("http://www.example.com/image.jpg", localFilename); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:50:37.653

首先获取图像的 URL，然后使用 webclient 可以将文件保存在文件夹中

```
string filepath = img1.ImageUrl;           
using (WebClient client = new WebClient())
{
       client.DownloadFile(filepath,Server.MapPath("~/Image/apple.jpg"));
} 
```

这将使用 ImageName 苹果将图像保存在图像文件夹中...

# msmq - 无法读取远程专用队列

> ID：10696188
> 
> 赞同：4
> 
> 时间：2012-05-22T05:30:42.250
> 
> 标签：msmq

我正在尝试让 MSMQ 5 在我的两台 Windows Server 2008 R2 虚拟机上运行。我可以发送到本地和远程私有队列，我可以从本地私有队列中读取。我无法从远程专用队列中读取。

我已经阅读了许多建议，尤其是 John Breakwell 在[MSMQ 问题上阅读远程私有队列（再次）](https://stackoverflow.com/questions/6983761/msmq-issue-reading-remote-private-queues-again)总结的建议。

我已经做过的事情：

*   关闭两台机器上的防火墙。
*   确保Everyone 和AnonymousLogon 完全控制队列。（如果我取消 AnonymousLogon 访问，那么我就无法远程发送到队列，并且消息在接收机器上以“访问被拒绝”结束。）
*   在两台机器上都允许未经身份验证的 Rpc。
*   在两台机器上都允许 NewRemoteReadServerAllowNoneSecurityClient。

发送代码片段是：

```
 MessageQueue queue = new MessageQueue(queueName, false, false, QueueAccessMode.Send);
        Message msg = new Message("Blah");
        msg.UseDeadLetterQueue = true;
        msg.UseJournalQueue = true;
        queue.Send(msg, MessageQueueTransactionType.Automatic);
        queue.Close(); 
```

接收代码片段为：

```
 queueName = String.Format("FormatName:DIRECT=OS:{0}\\private$\\{1}",host,id);
   queue = new MessageQueue(queueName, QueueAccessMode.Receive);
   queue.ReceiveCompleted += new ReceiveCompletedEventHandler(receive);
   queue.BeginReceive(); 
```

...

```
 public void receive(object sender, ReceiveCompletedEventArgs e)
    {
        queue.EndReceive(e.AsyncResult);
        Console.WriteLine("Message received");
        queue.BeginReceive();
    } 
```

我的 queueName 最终为`FormatName:DIRECT=OS:server2\private$\TestQueue`

当我在队列上调用 beginReceive() 时，我得到

```
Exception: System.Messaging.MessageQueueException (0x80004005)
   at System.Messaging.MessageQueue.MQCacheableInfo.get_ReadHandle()
   at System.Messaging.MessageQueue.ReceiveAsync(TimeSpan timeout, CursorHandle cursorHandle, Int32 action, AsyncCallback callback, Object stateObject)
   at System.Messaging.MessageQueue.BeginReceive() 
```

我在 Server1 上使用了 Wireshark 来查看网络流量。在不发布所有细节的情况下，它似乎经历了以下阶段。（Server1 正在尝试从 Server2 上的队列中读取数据。）

*   Server1 联系 Server2，并且有一个 NTLMSSP 质询/响应协商。一些回复提到“未知结果 (3)，原因：超出本地限制”。
*   Server1 向 Server2 发送 rpc__mgmt_inq_princ_name 请求，Server2 以相应的响应进行回复。
*   有一些 ldap 交换查找域，然后引用 ldap://domain/cn=msmq,CN=Server2,CN=Computers,DC=domain 返回“没有这样的对象”响应。
*   然后与 LDAP 服务器进行一些 SASL GSS-API 加密交换
*   然后关闭到 ldap 服务器和 Server2 的连接。

我尝试启用事件查看器 > 应用程序和服务日志 > Microsoft > Windows > MSMQ > End2End。它显示正在发送的消息，但没有说明尝试接收失败的原因。我该如何进一步调试呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:56:01.150

问题与域有关。Server1 和 Server2 是开发域的一部分。我的登录帐户是公司域的一部分。开发域对公司域的信任足以让我登录、成为管理员成员、安装功能等。但读取远程队列似乎不够信任。

我通过查看公共队列发现了这一点。*如果我在读取远程私有*队列时遇到问题，也许我应该通过尝试*公共*队列来获取更多数据。安装适当的目录集成功能后，我能够创建一个公共队列，但在公共队列列表中看不到它。试图刷新公共队列列表给了我这个错误：

> 并非所有公共队列都可以显示。只能显示本地缓存的公共队列。错误：在 Active Directory 中找不到对象。

谷歌向我指出了 John Breakwell 对类似问题的回答[，](http://news.goldenweb.it/article.php?l=it&id=51&group_dir=microsoft&grouplist=microsoft.public.msmq&group=microsoft.public.msmq.security)这表明信任关系不适用于消息传递协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:28:07.587

尝试改用标准**Receive**方法并指定事务类型，因为**BeginReceive**似乎不支持从事务队列接收。

```
Message msg = queue.Receive(MessageQueueTransactionType.Automatic); 
```

MSMQ 并不总是返回逻辑错误消息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T04:56:50.173

System.Messaging.MessageQueueException (0x80004005) 在 System.Messaging.MessageQueue.MQCacheableInfo.get_ReadHandle()

由于 BeginReceive Read 在不存在的队列上也可能导致此错误。检查配置以确保指定的队列路径物理存在并且具有“所有人”完全权限

# asp.net - (JSON.stringify) ---> (asp.net function) ----> (JSON.parse) ---->Microsoft JScript runtime error: Invalid character

> ID：10696189
> 
> 赞同：1
> 
> 时间：2012-05-22T05:30:42.373
> 
> 标签：asp.net, json, serialization

我有一个简单的 javascript 对象。我用 JSON.stringify 对其进行序列化，然后将它发送到一个只返回它的 asp.net Web 函数。但是当我尝试用 JSON 解析返回的字符串时，我得到了

**Microsoft JScript 运行时错误：无效字符**

```
 $(document).ready(function() {
          $.ajax({
              type: "POST",
              url: "test.aspx/PassBackdata",
              contentType: "application/json; charset=utf-8",
              data: "{'args': '" + JSON.stringify(MyObject) + "'}",
                   dataType: "json",
                   success: AjaxSucceeded,
                   error: AjaxFailed
               }); 
           });
           function AjaxSucceeded(result) {

            var a=JSON.parse(result);

           }
           function AjaxFailed(result) {
               alert(result.status + ' ' + result.statusText);
           }  

      };

  <System.Web.Services.WebMethod()> _
    Public Shared Function PassBackdata(args As String)
            Return args
     End Function 
```

我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:46:02.387

如果错误发生在 succes 函数上，您可能需要检查结果对象的格式。我不得不使用`var a=JSON.parse(result.d);`它，因为它是由 web 服务返回的，它不是直接的 json，而是一个带有“d”字段的对象，它是 json。

为了检查结果，我使用 fiddler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:36:04.527

但是，了解 MyObject 的样子会有所帮助：

JSON 必须有双引号中的键名，而不是单引号。尝试这样的事情：

```
$(document).ready(function() {
          $.ajax({
              type: "POST",
              url: "test.aspx/PassBackdata",
              contentType: "application/json; charset=utf-8",
              data: JSON.stringify({args:MyObject}),
                   dataType: "json",
                   success: AjaxSucceeded,
                   error: AjaxFailed
               }); 
           });
           function AjaxSucceeded(result) {

            var a=JSON.parse(result);

           }
           function AjaxFailed(result) {
               alert(result.status + ' ' + result.statusText);
           }  

      }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:17:15.010

如果我这样做：`JSON.parse(result.d)`而不是`JSON.parse(result)`它的作品。

```
function AjaxSucceeded(result) {

    var a=JSON.parse(result.d);

} 
```

不知道为什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:35:09.967

代替：

```
"{'args': '" + JSON.stringify(MyObject) + "'}" 
```

尝试这个：

```
JSON.stringify({args: MyObject}) 
```

不要自己做 JavaScript 可以为您做的事情 ;)

# log4net - 带有 HTTPhandler 的 log4net

> ID：10696193
> 
> 赞同：1
> 
> 时间：2012-05-22T05:31:07.150
> 
> 标签：log4net

在我的 AssemblyInfo.cs 中，我有：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile="ReverseProxy.config", Watch=true)] 
```

在处理程序 dll 所在的 bin 目录中，我有包含以下内容的文件 ReverseProxy.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" 
        requirePermission="false"/>        
</configSections>

<log4net>
    <appender name="LogFileAppender" type="log4net.Appender.FileAppender, log4net">
            <file value="e:\temp\reverseProxy.log" />
            <appendToFile value="true" />
            <rollingStyle value="Size" />
            <maxSizeRollBackups value="5" />
            <maximumFileSize value="1000KB" />
            <encoding value="utf-8" />
            <layout type="log4net.Layout.SimpleLayout" />
    </appender>

    <root>
        <level value="ALL" />
        <appender-ref ref="LogFileAppender" />
    </root>
</log4net>
</configuration> 
```

没有写入日志文件。我已经能够调试处理程序并且它命中了`Log.Info(..)`行但没有写入任何内容。我想知道是否真的找到了配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:21:29.873

答案是config文件需要在website目录下，而不是bin目录下。

# android - Android 应用程序方向更改行为

> ID：10696194
> 
> 赞同：3
> 
> 时间：2012-05-22T05:31:12.090
> 
> 标签：android, testing, screen-orientation

我已经完成了一个 android 应用程序的开发并处于测试阶段。我已经用模拟器对其进行了测试，一切正常，但是当我将它部署在设备上时，其中一些当您更改屏幕方向时，应用程序屏幕开始闪烁。

任何线索从哪里开始问题调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:50:12.490

当方向从纵向变为横向或反之时，再次调用 onCreate，使应用程序从头开始。`android:configChanges="keyboardHidden|orientation"`通过在类名或覆盖`onConfigChanged()`函数前面声明，确保在清单中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:37:33.490

请检查设备版本和开发应用程序版本是否相同，并在安装到设备后清除应用程序然后运行。

# google-bigquery - 配额限制

> ID：10696195
> 
> 赞同：1
> 
> 时间：2012-05-22T05:31:20.987
> 
> 标签：google-bigquery

如何增加查询和导入数据到大查询的配额限制？

[https://developers.google.com/bigquery/docs/quota-policy](https://developers.google.com/bigquery/docs/quota-policy)

为此我需要提交任何表格吗？可以离线做吗？

```
Queries
    Daily limit: 1,000 queries

Import Requests
    Daily limit: 1,000 import requests per day (including failures) 
```

1000 的查询限制不足以满足我的大多数要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:31:38.483

[定价页面](https://developers.google.com/bigquery/docs/pricing)上对此进行了解释：

> 如果您的需求超出以下默认限制，我们建议您 [联系销售代表](http://www.google.com/enterprise/cloud/contact.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T23:13:29.170

BigQuery 查询配额今天正在增加。它们应该很快就会反映在[https://developers.google.com/bigquery/docs/quota-policy](https://developers.google.com/bigquery/docs/quota-policy)中，但它们已经上线了。现在每日限制为每天 20k 查询，并且放宽了一些并发查询配额。

# android - ondraw 方法不起作用

> ID：10696197
> 
> 赞同：1
> 
> 时间：2012-05-22T05:31:28.380
> 
> 标签：android, ondraw

我正在处理我的 ondraw 方法无法正常工作的应用程序......在我的应用程序中我正在使用框架布局......所以我使用了三个类...... 1）活动 2）图像选择 3）绘图

我的图像选择工作正常，但我的绘图类工作不正常..它没有显示任何东西....我的绘图类如下......

```
public class Draw extends View {
    String info = "";
    float x = 0;    
    float y = 0;    
    int color = Color.GREEN;    
    public Draw(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }
    public Draw(Context context, AttributeSet attrs) {
          super(context, attrs);

    }

    @Override protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint = new Paint();
        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        paint.setColor(color);
        paint.setStrokeWidth(15);
        paint.setTextSize(30);

        canvas.drawLine(x-10, y, x+10, y, paint);
        canvas.drawLine(x, y-10, x, y+10, paint);
        canvas.drawText(info, x, y, paint);

    }

    public void updateInfo(String t_info, float t_x, float t_y){
        info = t_info;
        x = t_x;
        y = t_y;

        invalidate();
    }

    public void clearInfo(){
        info = "";
        x = 0;
        y = 0;
        invalidate();
    }
} 
```

我从我的 mainactivity 类中调用它。但我首先从图像选择类中调用它，如下所示

```
public class FirstImage extends ImageView implements OnTouchListener {

    MotionEvent event;
    int a;
    Bitmap image;
    String huma ="human";
    String info = "human";
     float x = 0; //init value 
     float y = 0; //init value
     Animation animationFadeIn;

    public FirstImage(Context context) { 
        super(context); 

    } 
    public FirstImage(Context context, AttributeSet attrs) { 
        super(context, attrs);
        } 

    public void changeImage(int id){

                    this.setImageResource(id);
                a=id;
                    final Animation animationFadeout=AnimationUtils.loadAnimation(getContext(), R.anim.zoomin);
                    this.startAnimation(animationFadeout);
                    this.setOnTouchListener(this);

    }
    @Override
    public boolean onTouch(View arg0, MotionEvent me) {

        switch(me.getAction()){
        case MotionEvent.ACTION_DOWN:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_MOVE:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_UP:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_OUTSIDE:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        default: return true;
        }
        return false;
    }
    public void pageinfo(float x, float y) {
        // TODO Auto-generated method stub
        ((AshActivity)getContext()).updateMsg(info, x,y);
    }
    } 
```

它是从主要活动类中调用的

```
 public class AshActivity extends Activity  {
ImageView i;
    Draw j;
    TextView t,k;
    ImageButton back;
    ImageButton next;
    OnClickListener l2 = null;
       OnClickListener l = null;
    int count=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         i = (FirstImage)findViewById(R.id.image);

         j=(Draw)findViewById(R.id.info);
         t=(TextView)findViewById(R.id.textView);
         k=(TextView)findViewById(R.id.textView1);
         back=(ImageButton)findViewById(R.id.button1);
         next=(ImageButton)findViewById(R.id.button2);
         if (count==0){
             ((FirstImage) i).changeImage(R.drawable.human);

         }
         //addListenerOnButton();
    }

    public void updateMsg(String info, float x, float y) {
        // TODO Auto-generated method stub
        j.updateInfo(info, x, y);
    }

} 
```

我的布局 xml 文件如下

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:name="http://schemas.android.com/apk/res/com.example.nam" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

  <!--  Screen Design for VIDEOS -->
<TableLayout 
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:stretchColumns="1">

     <TableRow
          android:id="@+id/tableRow1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <TextView
               android:id="@+id/textView"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:padding="15dip"
              android:text="pic on click which will tell where is the dna located in human body or cell "
              android:textSize="18dip" />
      </TableRow>

      <TableRow
          android:id="@+id/tableRow2"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >
    <FrameLayout
        android:layout_width="wrap_content"
          android:layout_height="wrap_content" >
         <com.example.nam.FirstImage
             android:id="@+id/image"
             android:layout_height="wrap_content" 
             android:layout_width="fill_parent" />
          <com.example.nam.Draw
             android:id="@+id/info"
             android:layout_height="wrap_content" 
             android:layout_width="fill_parent" />

      </FrameLayout>   
      </TableRow>

      <TableRow
          android:id="@+id/tableRow3"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <LinearLayout
              android:id="@+id/linearLayout1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

              <ImageButton
                  android:id="@+id/button1"
                  android:layout_width="100dp"
                  android:layout_height="wrap_content"
                  android:src="@drawable/monotone_arrow_next_left"/>
              <ImageButton
                  android:id="@+id/button2"
                  android:layout_width="100dp"
                  android:layout_height="wrap_content"
                 android:src="@drawable/monotone_arrow_next_lrightcopy"/>

          </LinearLayout>

      </TableRow>
       <TableRow
          android:id="@+id/tableRow4"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >
          <TextView
              android:id="@+id/textView1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:padding="15dip"
              android:text="please don't mind  "
              android:textSize="18dip" />
          </TableRow>

  </TableLayout>
  </ScrollView> 
```

什么问题我没明白....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:24:56.080

问题是您的`Draw`实例`layout_height`为 0。

这是因为`LayoutParams`您已经注册了它 ( `wrap_content`); 如果更改`FrameLayout's`属性，将显示所需的文本：

```
<FrameLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ro.rekaszeru.sample.FirstImage android:id="@+id/image"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" />
    <ro.rekaszeru.sample.Draw android:id="@+id/info"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" />
</FrameLayout> 
```

另请注意，30 的文本大小非常大......

# java - Appengine 基础知识

> ID：10696203
> 
> 赞同：0
> 
> 时间：2012-05-22T05:32:06.663
> 
> 标签：java, google-app-engine, servlets, oauth-2.0

我正在谷歌应用引擎上构建这个应用程序，它可以获取一个人的日历。

由于我是谷歌应用引擎和 OAuth 2.0 的新手，因此我提出了以下流程：

1.  重定向到谷歌帐户并获取`authorization_code`设置 `scope`为日历 api

2.  将代码换成`access_token`

3.  使用令牌获取日历提要。

我有授权码，但卡在第 2 步。文档说“发帖”以获取访问令牌。是否有执行此操作的 API？

[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)

我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:41:48.250

好吧，我猜“做一个帖子”是指http-post ...

[https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet?hl=en](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet?hl=en)

# iphone - 城市飞艇在哪里获得

> ID：10696205
> 
> 赞同：-1
> 
> 时间：2012-05-22T05:32:19.067
> 
> 标签：iphone, newsstand-kit

我想在我的应用程序中集成报亭功能。

我做了一些搜索，发现[了这个](https://github.com/viggiosoft/NewsstandTutorial) 和 [这个](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)

但是在这两个方面我都需要 Urban Airship 来推送通知

我也在[这里](http://urbanairship.com/)得到了这个链接 但我无法获得飞艇库。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:20:30.433

Urban Airship 是为推送通知提供服务的组织。要获得服务，您将需要订阅在这种情况下付费的服务。您可以在此处查看不同的计划：[城市飞艇服务定价。](http://urbanairship.com/pricing/)

另外，请在发布前检查解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:01:46.423

阅读此链接并对我有用，我认为此链接是您的帮助

[如何使用从城市飞艇获取推送通知](https://docs.urbanairship.com/display/DOCS/Getting+Started%3a+iOS%3a+Push)

如何在您的项目中实施，请[阅读此内容](https://docs.urbanairship.com/display/DOCS/Client%3a+iOS%3a+Push)

如果你想图书馆，[使用这个](https://github.com/shacked/SuburbanAirship)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:59:04.533

注册一个基本计划，您可以获得 SDK（前 100 万条消息/月免费）。

[https://go.urbanairship.com/accounts/register/](https://go.urbanairship.com/accounts/register/)

# android - 对话框显示字母字符？

> ID：10696215
> 
> 赞同：1
> 
> 时间：2012-05-22T05:33:07.457
> 
> 标签：android, customdialog

我正在使用自定义对话框在编辑文本框中显示基于用户输入的数字列表。我添加了 Textwatcher 一切都很好，直到用户尝试更快地提供输入，它显示了一个带有黑色条纹和一些字母字符的更多对话框 如何纠正这个？

我的截图是[1](https://i.stack.imgur.com/1cekZ.png)

[自定义对话框代码在这里](https://stackoverflow.com/questions/10634920/settext-to-edittextbox-from-dialog-content/10635027#10635027)

这是我在 textwatcher 中使用的代码

```
@Override
    public void afterTextChanged(Editable s) {
        String str = s.toString();
        str_length = str.length();
        Log.v("length_before", "" + count + "" + str_length);
        if (str_length == count + 1) {
            return;
        }
        if (str_length >= 3) {
            return;

        }

        if (str_length > count) {
            count = str.length();
            AmountDialog.amount_dialog(TicketIssueActivity.this, str,
                    amount);

        } else if (str_length < count) {
            count = str_length - 1;
            Log.v("length slese", "" + count + "" + str_length);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:00:08.730

如果您想要的只是金额字段中的数字。你可以设置：

```
android:inputType="number" 
```

在布局 xml 文件的 EditText 字段中。

这就是我从这个问题中得到的全部信息。如果这不能解决问题，请发布更多详细信息或代码。

# objective-c - UIView 使用手柄调整大小

> ID：10696216
> 
> 赞同：0
> 
> 时间：2012-05-22T05:33:08.877
> 
> 标签：objective-c, ios, cocoa-touch, uiview

我想让一个`UIView`用户可移动和可调整大小。它应该在每个角落都有“手柄”，以便用户可以调整它的大小。

（Camera+ 有这种功能，但他们用它来裁剪。）

是否存在用于此功能的库或类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:10:25.663

这是您可以使用的一个： http: [//cocoacontrols.com/platforms/ios/controls/spuserresizableview](http://cocoacontrols.com/platforms/ios/controls/spuserresizableview)

# qt - 不要在 Qt 中的 setVisble 之后立即重新绘制

> ID：10696218
> 
> 赞同：2
> 
> 时间：2012-05-22T05:33:23.047
> 
> 标签：qt, user-interface

我在扫雷游戏中使用[QPushButton](http://qt-project.org/doc/qt-4.8/QPushButton.html)。

从简单模式更改为困难模式后，*QPushButton*的数量应该从 9x9 更改为 30x16。

因此，我在*MainWindow*的构造函数中将具有最大数字（硬模式）的*QPushButton添加到**GridLayout*。

 *```
btnArr = new QPushButton[HARD_WIDTH * HARD_HEIGHT]; // member element
int index = 0;
for (int i = 0; i < HARD_HEIGHT; ++i) {
    for (int j = 0; j < HARD_WIDTH; ++j) {
        ui->mainGrid->addWidget(&btnArr[index], i, j, 1, 1,
                                Qt::AlignCenter);
        ++index;
    }
} 
```

然后如果用户改变模式（例如：简单模式到困难模式），`resetBtn(HARD_WIDTH, HARD_HEIGHT);`将被调用。

```
void MainWindow::resetBtn(const int width, const int height)
{
    int index = 0;
    for (int i = 0; i < HARD_HEIGHT; ++i) {
        for (int j = 0; j < HARD_WIDTH; ++j) {
            if (j < width && i < height) {
                btnArr[index].setVisible(true);
            } else {
                btnArr[index].setVisible(false);
            }
            ++index;
        }
    }
} 
```

问题是似乎每次`setVisible`调用小部件都会重新绘制。所以在困难模式的情况下，它会被调用 30x16 次，这会产生如下奇怪的效果： ![在此处输入图像描述](../Images/5b12876a5b640750255b66f0e50c464c.png)

那么如何在此循环期间设置小部件不重绘？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:09:42.650

我认为您正在尝试解决错误的问题。您不应该像这样更新小部件。如果您必须这样做，那么在更改之前隐藏布局的父小部件并在之后再次显示它应该可以工作。

更好的方法是使用[QStackedWidget](http://qt-project.org/doc/qt-4.8/qstackedwidget.html)并首先准备好所有电路板。然后，切换到不同的板只是切换活动小部件的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:48:59.620

您可以在进行这些“大规模”更改之前尝试调用[`setUpdatesEnabled(false)`](http://qt-project.org/doc/qt-4.8/qwidget.html#updatesEnabled-prop)父小部件，并在所有操作完成后重新启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:12:44.483

也许我错了，但据我所知，Qt 不会在调用 setVisible() 后立即呈现小部件。渲染是“渲染”事件的结果，除非您手动调用 render()。

来自官方 Qt 文档（[http://qt-project.org/doc/qt-4.8/qwidget.html#paintEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#paintEvent)）：

> Qt 还试图通过将多个绘制事件合并为一个来加速绘制。当 update() 被多次调用或窗口系统发送多个绘制事件时，Qt 将这些事件合并为一个具有更大区域的事件（参见 QRegion::united()）。repaint() 函数不允许这种优化，因此我们建议尽可能使用 update()。

我的直觉告诉我，这不是绘画问题，而是布局问题（没有足够的空间以“硬模式”显示每个按钮）。此外，我认为在将按钮添加到布局时不应使用 Qt::AlignCenter，它会尝试将布局中的每个按钮居中。您应该将布局的父小部件居中（如果您没有创建一个并将其居中）并正确设置大小策略（QWidget setSizePolicy）。

但是正如@Mat 建议的那样，如果这真的是一个绘画问题，您可以使用 setUpdatesEnabled(false/true) （如果 setUpdatesEnabled 解决了您的问题，请接受@Mat 的解决方案）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T05:20:27.637

总数`QPushButton`真的很大：30x16 = 480！！！我不习惯让人们改变他们的编程逻辑，但在这种情况下，我认为使用`QPushButton`s 并不是更好的方法。布局在添加对象时尝试移动对象的时间肯定很糟糕，并且您可能在刷新时间方面达到了一些内部限制，以便重新绘制布局。

我会做的是一个带有自定义`paintEvent`方法的自定义小部件。在那里，您可以将其宽度和高度划分为您希望的列数和行数，并在玩游戏时用像素图绘制单元格。

对于鼠标交互，最好的方法是`mousePressEvent`使用自定义逻辑来覆盖 ，该逻辑计算鼠标在网格中的位置并调用相应的方法或发出指示事件位置的信号。不是很难编码。您还可以使用该`event->buttons()`方法了解按下了哪个鼠标按钮，并根据需要发出不同的信号。

我不习惯回答说最好改变你的整个程序，但在这种情况下，我认为你正在走“艰难的道路”。我知道这不是您正在寻找的答案，但请考虑这种可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T08:22:19.907

尝试启用/禁用而不是可见/不可见：

```
void MainWindow::resetBtn(const int width, const int height)
{
    int index = 0;
    for (int i = 0; i < HARD_HEIGHT; i++)
        for (int j = 0; j < HARD_WIDTH; j++)
            btnArr[index++].setEnabled(j < width && i < height);
} 
```*

# android - Activity中的透明矩形

> ID：10696220
> 
> 赞同：0
> 
> 时间：2012-05-22T05:33:26.317
> 
> 标签：android, android-layout

我需要将视频显示到 VideoView 中，该视频位于具有样式的活动内部（Theme.Dialog 的扩展）。

```
<resources>
    <style name="Custom" parent="android:style/Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
    </style>
</resources> 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <VideoView
        android:id="@+id/video_surface"
        android:layout_width="500dp"
        android:layout_height="200dp"
        android:layout_marginTop="20dp" />
</FrameLayout> 
```

我有下一个： ![在此处输入图像描述](../Images/01e176611bdc5feea393ab3463c942a2.png)

如您所见，左上角是透明的。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:22:21.383

问题的解决方法是以下活动的正确方式：

```
<resources>
  <style name="Custom">
    <item name="android:windowNoTitle">true</item>
    <item name="android:gravity">center</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsTranslucent">true</item>
 </style>
</resources> 
```

只有在这种情况下，您才能通过点击窗口周围的灰色区域来关闭活动

# jquery - webkit-transform on overflow:auto div 导致 Chrome 中的滚动条消失

> ID：10696221
> 
> 赞同：2
> 
> 时间：2012-05-22T05:33:30.297
> 
> 标签：jquery, webkit

我已将图像加载到溢出：自动 div 中。加载时，当您滚动 div 时，滚动条会立即消失。如果我运行，例如，在 div 的高度上设置动画（甚至不改变高度），我可以让它回来，但只有*在*它消失之后。在动画之后，它就被永久修复了。

如果我删除 -webkit-transform:translationZ(0); ，我可以解决这个问题。来自 div 的 CSS，但我*需要*它提供的性能提升（不是为了这个小测试程序，而是为了它派生的代码），所以我不能删除它。

知道这里发生了什么，以及如何解决它吗？

这一切都在一个jsfiddle：http: [//jsfiddle.net/forgetcolor/dB38c/5/](http://jsfiddle.net/forgetcolor/dB38c/5/)

还有下面：

HTML：

```
<div id="overflow"></div>
<p id="btn">click to fix</p> 
```

CSS：

```
#overflow {
    overflow:auto;
    width:500px;
    height:200px;
    /* comment out the webkit-transform and the problem dissapears 
     * (but I need the transform for acceleration
     */
    -webkit-transform:translateZ(0);
    border:1px solid #000;
} 
```

Javascript：

```
var scrollbarWidth = 15;
var r = Math.floor((Math.random()*100000)+1);
//adding r to simulate non-cached images
var pagelink = 'http://lorempixel.com/output/city-q-c-1920-1920-4.jpg?'+r;

$('#overflow').html(
    "<img width='485' id='imgload' src='"+pagelink+"' />"
);

$('#btn').click(function() {
    $('#overflow').animate({height:200},0);
}); 
```

更新：提交的错误报告：[https ://code.google.com/p/chromium/issues/detail?id=129186](https://code.google.com/p/chromium/issues/detail?id=129186)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:44:03.200

将此添加到有问题的可滚动似乎可以解决问题。

```
-webkit-transform: translateZ(0); 
```

查看更新的小提琴：http: [//jsfiddle.net/dB38c/13/](http://jsfiddle.net/dB38c/13/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:29:16.717

这确实是一个 Chrome 错误。我可以在 Chrome Stable 和 Canary 中重现这一点（但不能在 Webkit Nightly 中）。你能把这个报告给new.crbug.com吗？顺便说一句，测试用例很棒。

## 解决方法

同时，您可以`overflow:scroll`根据自己计算的 div 内部大小应用条件。

就您的代码而言，

```
var elem    = $('#overflow');
var heights = elem.children().map(function(){ return $(this).height(); }).get();
var sum     = _.reduce(heights], function(memo, num){ return memo + num; }, 0);

if (sum > elem.innerHeight()) elem.css('overflow', 'scroll'); 
```

我用[下划线](http://underscorejs.org/)表示`reduce()`糖，但你可以不用。很确定有一些关于计算子元素大小的答案，以便做这样的事情（这可能比我的方法更强大）。

# javascript - 让 Node.js 支持 JavaScript 文件的 shebang (#!)

> ID：10696222
> 
> 赞同：26
> 
> 时间：2012-05-22T05:33:35.913
> 
> 标签：javascript, node.js, bash, shebang

一些脚本语言（例如 Python 或 Bash）`#`用于注释。

```
#!/usr/bin/env python
print 'hello, world' 
```

我可以运行脚本：

```
python script.py 
```

或者

```
./script.py 
```

是否可以让 JavaScript 支持 shebang？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-22T05:36:34.167

是的，您可以简单地使用`#!/usr/bin/env node`（或者无论您的 JavaScript 解释器的名称是什么，它也可以与`js`(spidermonkey) 一起使用）。

```
[me@hades:~]> cat > test.js
#!/usr/bin/env node
console.log('hi');
[me@hades:~]> chmod +x test.js
[me@hades:~]> ./test.js
hi 
```

很可能两个解释器都测试第一行是否以开头，`#!`在这种情况下它被跳过。

# algorithm - DJB 哈希函数中数字 5381 的原因？

> ID：10696223
> 
> 赞同：58
> 
> 时间：2012-05-22T05:34:06.163
> 
> 标签：algorithm, hash, primes

谁能告诉我为什么在 DJB 哈希函数中使用数字 5381？

DJB 哈希函数定义为：

*   h [0] = 5381

*   h [i] = 33h [i - 1] + s [i]

这是一个C实现：

```
unsigned int DJBHash(char* str, unsigned int len)
{
   unsigned int hash = 5381;
   unsigned int i    = 0;

   for(i = 0; i < len; str++, i++)
   {   
      hash = ((hash << 5) + hash) + (*str);
   }   

   return hash;
} 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-10T21:08:49.253

我偶然发现了一条[评论](https://gist.github.com/1676398)，它揭示了 DJB 的所作所为：

```
/*
* DJBX33A (Daniel J. Bernstein, Times 33 with Addition)
*
* This is Daniel J. Bernstein's popular `times 33' hash function as
* posted by him years ago on comp.lang.c. It basically uses a function
* like ``hash(i) = hash(i-1) * 33 + str[i]''. This is one of the best
* known hash functions for strings. Because it is both computed very
* fast and distributes very well.
*
* The magic of number 33, i.e. why it works better than many other
* constants, prime or not, has never been adequately explained by
* anyone. So I try an explanation: if one experimentally tests all
* multipliers between 1 and 256 (as RSE did now) one detects that even
* numbers are not useable at all. The remaining 128 odd numbers
* (except for the number 1) work more or less all equally well. They
* all distribute in an acceptable way and this way fill a hash table
* with an average percent of approx. 86%.
*
* If one compares the Chi^2 values of the variants, the number 33 not
* even has the best value. But the number 33 and a few other equally
* good numbers like 17, 31, 63, 127 and 129 have nevertheless a great
* advantage to the remaining numbers in the large set of possible
* multipliers: their multiply operation can be replaced by a faster
* operation based on just one shift plus either a single addition
* or subtraction operation. And because a hash function has to both
* distribute good _and_ has to be very fast to compute, those few
* numbers should be preferred and seems to be the reason why Daniel J.
* Bernstein also preferred it.
*
*
* -- Ralf S. Engelschall <rse@engelschall.com>
*/ 
```

这是一个与您正在查看的哈希函数略有不同的哈希函数，尽管它确实使用了 5381 幻数。链接目标处该注释下方的代码已展开。

然后我发现[了这个](http://www.cnblogs.com/napoleon_liu/articles/1911571.html)：

> ```
> Magic Constant 5381:
> 
>   1\. odd number
> 
>   2\. prime number
> 
>   3\. deficient number
> 
>   4\. 001/010/100/000/101 b 
> ```

也有[这个](https://stackoverflow.com/a/2854205/63474)答案[有人可以解释 djb2 哈希函数背后的逻辑吗？](https://stackoverflow.com/questions/1579721/can-anybody-explain-the-logic-behind-djb2-hash-funcition) 它引用了DJB 本人在邮件列表中提到 5381 的[帖子](http://groups.google.com/group/comp.lang.c/browse_thread/thread/9522965e2b8d3809)（摘自该答案摘录在这里）：

> [...] 几乎任何好的乘数都有效。我认为您担心的是，如果 c 和 d 介于 0 到 255 之间，31c + d 不涵盖任何合理的哈希值范围。这就是为什么当我发现 33 哈希函数并开始在我的压缩器中使用它时，我从 5381 的哈希值开始。我想你会发现这和 261 乘数一样好。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-22T07:22:33.217

5381 只是一个数字，在测试中，它导致[更少的碰撞](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)和[更好的雪崩](http://en.wikipedia.org/wiki/Avalanche_effect)。您会在几乎每个哈希算法中找到“神奇常数”。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-01-25T11:07:13.153

我发现这个数字的一​​个非常有趣的属性可能是一个原因。

5381 是第 709 个素数。
709 是第 127 个素数。
127 是第 31 个素数。
31 是第 11 个素数。
11 是第 5 个素数。
5 是第三个素数。
3 是第二个素数。
2 是第一个素数。

5381 是第一个发生 8 次的数字。5381st prime 可能会超过signed int 的限制，因此最好停止链。

# c - Windows 上的 MinGW 和 Eclipse - 生成程序集输出

> ID：10696226
> 
> 赞同：1
> 
> 时间：2012-05-22T05:34:13.930
> 
> 标签：c, eclipse, assembly, mingw

我最近安装了 MinGW 来在 Windows 上进行（非 AVR 特定的）C 开发。我希望看到 GCC 生成的程序集以及 .o 文件；我已经尝试更改我正在使用的测试项目的“C/C++ 构建”和“属性”下的一些命令行标志，但我似乎无法改变构建行为。有没有一种简单的方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:23:21.257

方法是添加`-Wa,-aln=output.s`到“属性”>“C/C++ 构建”>“设置”>“工具设置”>“GCC C 编译器”下的“命令”框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T20:29:24.767

[Bitrex](https://stackoverflow.com/questions/10696226/mingw-and-eclipse-on-windows-generating-assembly-output/10697544#10697544)走在正确的道路上，但更好的方法是在“属性 > C/C++ 构建 > 设置 > 工具设置 > GCC C 编译器 > 杂项”下，将`-Wa,-aln='${CWD}\\${InputFileBaseName}.cod'`（注意单引号）附加到“其他标志”的末尾”。这不仅会生成程序集，还会通过源文件将它们分开。

使用[Bitrex](https://stackoverflow.com/questions/10696226/mingw-and-eclipse-on-windows-generating-assembly-output/10697544#10697544)的方式，如果您有多个源文件，每个程序集输出将被下一个源文件覆盖，因为他强制将它们全部命名为“output.s”。

**注意**：如果您编译 C++ 代码，请使用“GCC C++ 编译器”。

# ruby-on-rails - 如何使 select_tag 保持上次搜索的值？

> ID：10696227
> 
> 赞同：1
> 
> 时间：2012-05-22T05:34:27.883
> 
> 标签：ruby-on-rails

我有一个使用 select_tag 的价格下拉列表，但是每次我使用下拉列表设置价格然后进行搜索时，当返回搜索结果时，下拉列表中的值会恢复为默认值。如何使下拉列表保持在最后一个值？这是代码，最后我得到了 :selected => 但不知道要赋予它什么价值：

```
<%= label :price, 'max', "to $" %>
<%= select_tag(:max, options_for_select([['$100,000', 100000], ['$200,000', 200000], ...['$20,000,000', 20000000]], :selected => ['$1,000,000', 1000000])) %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:52:10.023

`:selected`应该指向要预选的数组元素的最后一个元素。

尝试

`<%= select_tag(:max, options_for_select([['$100,000', 100000], ['$200,000', 200000], ...['$20,000,000', 20000000]], :selected => 1000000)) %>`

如果您想保留当前请求的价值，您可以选择

`<%= select_tag(:max, options_for_select([['$100,000', 100000], ['$200,000', 200000], ...['$20,000,000', 20000000]], :selected => params[:max])) %>`

请参阅[Rails API 上的 options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)。

# asp.net-mvc - 从客户端应用程序调用时的 asp.net mvc 身份验证

> ID：10696230
> 
> 赞同：2
> 
> 时间：2012-05-22T05:34:46.770
> 
> 标签：asp.net-mvc

我在我的项目中使用 asp.net mvc 控制器而不是 Web 服务。

当我从客户端应用程序调用控制器时，会出现身份验证问题。如果我使用 Web 服务，我可以使用 SOAP 标头，但现在在 asp.net mvc 中，没有肥皂标头。

请帮忙。

我真的对网络安全略知一二。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:40:36.270

你有几个选择。

1.  使用请求标头来包含一些安全令牌。
2.  在您在请求正文中发送的消息中包含安全令牌。
3.  如果您的应用程序使用类似 Forms Authentication 的东西，您可以要求消费者调用登录操作，然后获取 Forms Auth cookie 并将该 cookie 包含在后续调用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:44:49.557

当您使用 http 服务时，执行此操作的正常方法是以以下格式在授权标头中传递它（如果您正在执行来自提琴手的请求）

```
Authorization: Basic user123:pass123 
```

`user123:pass123`字符串通常是 base64 编码的，您必须在服务器端对其进行解码，对照用户存储检查它并验证用户。一个例子可以在[这里找到](https://stackoverflow.com/questions/1407153/rest-ful-basic-authentication-with-asp-net-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:44:51.150

因为你没有使用肥皂。您可以使用简单的http方式。这意味着您启动一个 HttpRequest 并通过 HttpResponse 处理结果。因此，您必须将身份验证操作模拟为从 Web 浏览器登录。

您需要从响应中获取安全令牌或 cookie。并将它们放入您的以下请求中。因此，您的控制器将识别请求的身份。

# xcode - 澄清供应商，以及如何处理它们

> ID：10696233
> 
> 赞同：2
> 
> 时间：2012-05-22T05:34:51.937
> 
> 标签：xcode, code-organization

所以，我遇到了一个名为[RestKit](https://github.com/RestKit/RestKit)框架的 XCode 项目，我在其中看到了这个供应商组......

那么 Vendor 只是组织一些第三方代码的一种方式吗？术语“供应商”是通用的，还是不仅在 Obj-C 中与其他项目一起使用？

如果是这样，当所有者将更新这些第三方代码时，您将如何处理它们？

# c# - C#ReaderWriteLock 中可升级读锁与写锁的区别

> ID：10696238
> 
> 赞同：5
> 
> 时间：2012-05-22T05:35:12.777
> 
> 标签：c#, multithreading

ReaderWriterLock 类中的可升级读锁和写锁有什么区别？

根据 MSDN 的描述，只有一个线程可以进入可升级的读锁。如果我遵循正确，我可能会忘记升级它，因为它与写锁相同。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T05:43:23.143

（我假设您的意思是`ReaderWriterLockSlim`，因为我认为没有`ReaderWriterLock`可升级的读取模式。）

虽然只有一个线程可以进入可升级读锁，但一个线程可以拥有可升级读锁*，其他线程仍然可以进入读锁*：

> 在任何给定时间，只有一个线程可以进入可升级模式。如果一个线程处于可升级模式，并且没有线程等待进入写入模式，那么任何数量的其他线程都可以进入读取模式，即使有线程等待进入可升级模式。

将其与写锁进行比较：

> 当有线程等待进入写模式时，其他试图进入读模式或可升级模式的线程会阻塞，直到所有等待进入写模式的线程都超时或进入写模式然后退出。

换句话说，写锁是完全独占的，而可升级的读锁将允许其他线程继续进入/退出读取模式*，直到需要升级*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:43:40.787

我认为UpgradableReadLock 是一种特殊的ReadLock，可以变成WriteLock。MSDN 声明的是，当时只有一个线程可以变成 WriteLock。这是合乎逻辑的，因为只能有一个作家。

# python - 使用 cx_freeze 内置到 exe 中的 python 脚本无法正确评估控制台输入

> ID：10696239
> 
> 赞同：1
> 
> 时间：2012-05-22T05:35:17.740
> 
> 标签：python, python-3.x, cx-freeze

我有一个由 3 个文件和 2 个包组成的脚本。当我在 IDLE 中或通过命令行运行脚本时，它会完美执行。我使用 cx_freeze 将程序转换为可执行文件，它仍然可以正常工作，除了通过 input() 方法接收的文本评估错误。这段代码反映了我自己的：

```
x = str(input("Continue? (y/n): "))
if x.lower() == "y" or x.lower() == "yes":
    cont = True
else:
    print("thanks for playing.")
    cont = False
input("press enter key to exit...") 
```

我将 str() 转换器添加到输入函数以查看它是否有帮助，但没有。无论我输入“yes”还是“y”，条件仍然评估为假，我不知道为什么。我还在条件的每个分支中添加了打印语句，为 x 打印的值是正确的，但它仍然评估为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:38:32.453

有时输入最后会得到一个换行符。尝试剥离它：

```
x = input("Continue? ").strip() 
```

# php - 从 PHP 中检索数据库中的数据

> ID：10696241
> 
> 赞同：0
> 
> 时间：2012-05-22T05:35:40.513
> 
> 标签：php, mysql

在用户单击上一页上的书名后，尝试从关系表中检索相关数据。即使数据库中有数据，页面上也没有打印任何内容。

表架构是：

关系ID,bookone,booktwo,relation,relationlike,relationdislike

```
<html>
    <head>
    <title>Retrieve Relationships</title>
    </head>
    <body>

    <dl>

    <?php
    // Connect to database server
    mysql_connect("latcs7.cs.latrobe.edu.au","12ice06","EsnYkuxuwh9RbtQuRcQt") or die (mysql_error ());

    // Select database
    mysql_select_db("12ice06") or die(mysql_error());
        $sTitle=0;
    // Get data from the database depending on the value of the id in the URL
    $title = (isset($_GET['title']) && is_string($_GET['title'])) ? $_GET['title'] : null;
$sTitle = mysql_real_escape_string($title);
$strSQL = "SELECT R.bookone, B.title, B.author,
        R.booktwo, B.title, B.author,
        R.relation, R.relationlike, R.relationdislike 
        FROM relationships R
        INNER JOIN books B ON R.bookone = B.bookid";     

$rs = mysql_query($strSQL) or die(mysql_error());
    // Loop the recordset $rs

while($row = mysql_fetch_array($rs)){
    // Write the data of the book

    echo "<dt>Book One:</dt><dd>" . $row["bookone"] . "</dd>";
    echo "<dt>Title:</dt><dd>" . $row["title"] . "</dd>";
    echo "<dt>Author:</dt><dd>" . $row["author"] . "</dd>";
    echo "<dt>Book Two:</dt><dd>" . $row["booktwo"] . "</dd>";
        echo "<dt>Title:</dt><dd>" . $row["title"] . "</dd>";
    echo "<dt>Author:</dt><dd>" . $row["author"] . "</dd>";
    echo "<dt>Relationship:</dt><dd>" . $row["relation"] . "</dd>";
    echo "<dt>Likes:</dt><dd>" . $row["relationshiplikes"] . "</dd>";
    echo "<dt>Dislikes:</dt><dd>" . $row["relationshipdislikes"] . "</dd>";
}

echo $strSQL;
    // Close the database connection
    mysql_close();
    ?>

    </dl>
    <p><a href="search_bookl.php">Return to the list</a></p>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:46:27.950

```
if($row = mysql_fetch_array($rs)){

    // Write the data of the book
    echo "<dt>Book One:</dt><dd>" . $row["bookone"] . "</dd>";
    echo "<dt>Book Two:</dt><dd>" . $row["booktwo"] . "</dd>";
    echo "<dt>Relationship:</dt><dd>" . $row["relation"] . "</dd>";
    echo "<dt>Likes:</dt><dd>" . $row["relationshiplikes"] . "</dd>";
    echo "<dt>Dislikes:</dt><dd>" . $row["relationshipdislikes"] . "</dd>";
}while($row!=0); 
```

应该

```
while($row = mysql_fetch_array($rs)){
    // Write the data of the book
    echo "<dt>Book One:</dt><dd>" . $row["bookone"] . "</dd>";
    echo "<dt>Book Two:</dt><dd>" . $row["booktwo"] . "</dd>";
    echo "<dt>Relationship:</dt><dd>" . $row["relation"] . "</dd>";
    echo "<dt>Likes:</dt><dd>" . $row["relationshiplikes"] . "</dd>";
    echo "<dt>Dislikes:</dt><dd>" . $row["relationshipdislikes"] . "</dd>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:52:06.357

我的建议：

a) 请像这样修改 SQL 语句中的变量：

```
$strSQL = "SELECT [...]
           WHERE books.bookid=relationships.bookone 
               AND relationships.bookone='".$sTitle."'"; 
```

b) 确保您的变量`$sTitle`不为空。如果仍然存在问题，请回显整个 SQL 语句 ( `echo $strSQL;`) 以进行进一步调试。

c) 在此过程中，请修改整个 SQL 语句。以下语句的作用相同，并且更具可读性：

```
$strSQL = "SELECT R.bookone, R.booktwo, 
              R.relation,
              R.relationlike, R.relationdislike
           FROM relationships R
           INNER JOIN books B ON R.bookone = B.bookid
           WHERE R.bookone='".$sTitle."'"; 
```

d) 不要在 之后输出数据`if($row = mysql_fetch_array($rs)){`，而是使用 while 语句，例如

```
while ($row = mysql_fetch_array($rs)) {
    // Write the data of the book
    // Insert your echos here
} 
```

e) 问题：是否有特定原因表书已`INNER JOIN`编辑，但未在某种条件下使用？

# eclipse - 有什么方法可以在不使用 Ctrl + Z 的情况下撤消 e-clipse 中的 Ctrl + Shif + F

> ID：10696244
> 
> 赞同：0
> 
> 时间：2012-05-22T05:36:25.747
> 
> 标签：eclipse

有什么方法可以在不使用 + 的情况下撤消`Ctrl`e - clipse 中的`Shift`++ ！`F``Ctrl``Z`

以前我的代码是这样的：
cityCode = HotelSubList.item(h).getAttributes().getNamedItem("Code").getNodeValue();

`Ctrl`++之后`Shift`是`F`这样的。

cityCode = HotelSubList
.item(h)
.getAttributes()
.getNamedItem(
"代码")
.getNodeValue();

现在我需要在不使用`Ctrl`+的情况下转换格式`Z`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:42:16.217

您可以更改代码格式化程序设置

`Window->Preferences->Java->Code Style->Formatter`

并使用新设置重新格式化您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:39:29.587

您还可以使用 Eclipse 的内置历史记录。如果您想一举更改整个文档，请在项目资源管理器中右键单击该文件，然后选择“替换为”->“本地历史记录”。

如果您想选择要保留哪些更改以及要撤消哪些更改，请右键单击项目资源管理器中的文件并选择“比较”->“本地历史记录”。选择要并排查看的先前版本，然后对于检测到的每个差异，您可以选择是否要恢复到先前版本。

# html - 如何在css中设置z-index？

> ID：10696257
> 
> 赞同：-2
> 
> 时间：2012-05-22T05:37:33.617
> 
> 标签：html, css

我无法设置 z-index。请你定义我，如何设置 z-index 位置或值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:39:47.947

z-index : [某个数字];

您必须使用绝对或相对定位才能使其生效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:39:58.423

这是尝试的代码和示例：

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_zindex](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_zindex)

只需输入 z-index 和其他属性的测试值并立即测试其行为方式。

**添加了更多信息**

图像的 z-index 定义如下：

```
img
{
 position:absolute;
 left:0px;
 top:0px;
 z-index:-1;
} 
```

关于 z-index，您可以修改两件事：

```
position: absolute  | relative | fixed
z-index: +ve | -ve value from -9999 to 9999 
```

在上面的示例中，您可以实时更改值以查看效果，这将有助于您更好地理解它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:58:43.630

`z-index`仅适用于定位元素。也许您没有申请`position`财产并`z-index`尝试过

```
<style type="text/css">
.myelement{
    position:relative; /*You can put position relative absolute or fixed for z-index to work*/
    z-index:100;
}
</style> 
```

如需进一步参考，请参阅此页面 [W3Schools 页面](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T05:40:50.353

对于 Div：

```
#yourdiv {
 z-index: 9999 ; //whatever the value you want
} 
```

上课：

```
.class {
 z-index: 9999;
} 
```

# git - 成功构建gnuradio后如何更新？

> ID：10696262
> 
> 赞同：3
> 
> 时间：2012-05-22T05:37:49.953
> 
> 标签：git, build, installation, gnuradio

使用 build-gnuradio 脚本（[使用 build-gnuradio 脚本](http://gnuradio.org/redmine/projects/gnuradio/wiki/InstallingGR#Using-the-build-gnuradio-script)）成功构建 gnuradio 后，有没有办法更新和构建所有新内容而无需重新开始？

例如，根据更改的文件/依赖项执行所有正确的 git pull 和构建/安装所有内容的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:04:43.510

我从未使用过 build-gnuradio，但它看起来只是从存储库中进行了 git 克隆。如果你进入 gnuradio 目录，你应该能够做到

```
git pull
cd build
make
sudo make install 
```

或类似的规定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:16:26.387

```
git pull
rm -Rf build
mkdir build
cd build
cmake ../
make
sudo make install 
```

更新到 3.6.2 时，这对我有用

# php - 没有配置或找到 404 CMS 页面

> ID：10696270
> 
> 赞同：1
> 
> 时间：2012-05-22T05:38:44.570
> 
> 标签：php, magento

我建立了多个网站：一个是基本的 Magento 文件夹，另一个位于 Magento 文件夹内的单独文件夹中（其中有一个索引文件和 .htaccess 文件）。我收到错误消息：`There was no 404 CMS page configured or found`当我转到类别顶部菜单时。

主站点的 htaccess 文件没有变化：

```
#RewriteBase /magento/ 
```

第二个站点即：magento/mywebsite：

```
RewriteBase /Ki-cartonn/ 
```

主站点索引文件：

```
 $compilerConfig = 'includes/config.php';
                  $mageFilename = 'app/Mage.php';
                  umask(0);
                  Mage::run(); 
```

第二个站点：$compilerConfig =

```
 '..includes/config.php';
                         $mageFilename = '..app/Mage.php';
                         umask(0);
                         Mage::run('mywebsite','website'); 
```

我已经正确设置了配置和类别。在本地运行良好。我怎样才能弄清楚这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:57:51.890

你可能需要把

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

在父文件夹上的规则之前，`.htacess`因此它排除了现有文件和文件夹

# css - 确定呈现网页的原色？

> ID：10696274
> 
> 赞同：2
> 
> 时间：2012-05-22T05:39:37.807
> 
> 标签：css, browser, image-processing, rendering

有谁知道是否存在一个系统的算法（或实现），给定一个完整的网站（带有 HTML、CSS、图像等），确定“主调色板”？

我所说的“主要调色板”是指如果要求人类设计师提出网站设计中“最突出的颜色”，他们将能够写下前 4 或 5 种颜色。

我想它可以通过使用像 webkit（或者可能是完整的浏览器实例）这样的渲染引擎来正确渲染给定的资产，然后可能“屏幕捕获”结果并进行某种像素颜色 + 区域分析。或者也许会有一些更聪明的方法来用 CSS 分析事物？

这样的用例可能适用于像 [getsatisfaction.com] 这样使用 Javascript 将元素注入页面的人。他们可能会提前设置这些元素的样式，以便更好地适应页面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:24:42.823

该站点将采用 URL 并输出配色方案。

[颜色组合](http://www.colorcombos.com/grabcolors.html)

# void - 是否“EasyMock.expectLastCall();” 在不进一步调用生成的 IExpectationSetters 的情况下做任何事情？

> ID：10696281
> 
> 赞同：6
> 
> 时间：2012-05-22T05:40:17.673
> 
> 标签：void, easymock

考虑这个代码片段： -

```
Whatever mock = EasyMock.createMock( Whatever.class );
mock.doSomething();
EasyMock.expectLastCall();   // <- Does this do anything?
EasyMock.replay( whatever ); 
```

`expectLastCall()`这里真的有什么作用吗？在我的测试中添加或删除这一行似乎没有任何区别。

`.andThrow`显然，如果您在调用中添加or`.atLeastOnce()`等​​，这很有用。这不是我要问的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T05:46:18.897

不，您通常只`expectLastCall()`在需要结果来指定行为时使用。这就是它的目的。

当然，如果您发现它使您的测试更具可读性，那么调用它并没有什么*坏处。*例如，为了保持一致性，我可能会这样做——如果我*不得不*调用它两次以指定更多行为，我可能会第三次包含它，即使我不需要。我可能会明确添加默认行为，只是为了增加一致性。

# javascript - JavaScript中的出生日期验证？

> ID：10696283
> 
> 赞同：0
> 
> 时间：2012-05-22T05:40:24.490
> 
> 标签：javascript

我在 HTML 的文本框中有一个出生日期，例如 12-08-1989。我想在 javascript 中验证用户必须年满 18 岁。

我在 javascript 中使用了 Date 函数，但它似乎接受 YYYY-MM-DD 格式，但我想在 DD-MM-YYYY 中进行验证。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:45:39.443

```
var pattern =/^([0-9]{2})-([0-9]{2})-([0-9]{4})$/;
if(pattern.test(str_input_date))
{
     alert("valid date");
} 
```

这应该给你一个开始。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:58:01.003

您可能应该使用一些验证框架，例如[jQuery.validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。这是迄今为止在代码中处理验证的更加一致的方式。如果这是您的应用程序中唯一经过验证的字段，您当然可以使用上面提供的简单实现。

无论您需要一些高级日期验证规则，您都可以使用 JS 日期框架，例如[Moment.js](http://momentjs.com/)（或[Date.js](http://datejs.com)，目前已经过时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:21:43.317

*“我在 javascript 中使用过 Date 函数，但它似乎接受 YYYY-MM-DD 格式，但我想在 DD-MM-YYYY 中验证”*

您可以通过分别传递年、月和日（以及可选的小时、分钟、秒和毫秒）值来创建 Date 对象：

```
var aDate = new Date(2012, 5, 22); 
```

因此，如果您使用正则表达式或其他字符串方法从用户输入的内容中提取片段，那么您可以根据您喜欢的 DD-MM-YYYY（或任何其他）格式创建日期。

我测试用户是否至少 18 岁的方法是在他们的出生日期上加上 18 年，看看是不是在今天的日期或之前：

```
aDate.setFullYear( aDate.getFullYear() + 18 ) 
```

[在 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date#Methods)中列出了 Date 对象上可用的各种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:48:01.773

你可以使用日期类，就像这样

```
try{
    var x=new Date('1/1/2001');
    var Cnow=new Date();//current Date
    if(Cnow.getFullYear()- x.getFullYear()<18){
    alert('not old enough');
    }
    else{
      //success !!!
    }

}
catch(ejs){alert('invalid')} 
```

# mysql - 在 phpMyAdmin 中启用配置存储

> ID：10696285
> 
> 赞同：2
> 
> 时间：2012-05-22T05:40:36.770
> 
> 标签：mysql, phpmyadmin

我按照指示，创建了一个控制用户和数据库，运行了 create_tables.sql 脚本（在我用正确的数据库名称修改它之后），使用安装脚本创建了一个配置文件并填写了“编辑”中的所有字段服务器 -> 配置存储”页面。我将生成的配置文件移动到顶级 PMA 目录中。

我可以很好地使用 PMA，但配置存储功能不起作用。外键字段没有超链接到不同字段中的各自实体。我检查了配置表（pma_*），除了 pma_recent 之外，它们都是空的，它有两个条目（登录尝试或其他什么？）。

我应该注意到我在安装 phpMyAdmin 之前构建了数据库，所以是否有一些脚本或我必须运行它来扫描当前表并找到外键/链接？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T07:35:31.193

This solved the problem for me `$cfg['QueryHistoryDB'] = true;` Thanks to [http://sourceforge.net/p/phpmyadmin/bugs/3998/](http://sourceforge.net/p/phpmyadmin/bugs/3998/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:07:18.110

phpMyAdmin 的配置在 config.inc.php 文件中，您可以查看此文件 config.sample.inc.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T00:13:05.020

我总是有同样的问题。我永远无法让 pma 配置数据库工作。SQL历史也没有。

现在 phpMyAdmin 有浏览器存储，这很幸运。除了每次刷新[或新标签]时都在唠叨我从浏览器存储中加载配置。

我只是依靠 php 配置，然后把所有东西都放在那里。

# javascript - RAILS/Ruby 错误“CALL_AND_RETRY_0：分配失败 - 进程内存不足”

> ID：10696297
> 
> 赞同：1
> 
> 时间：2012-05-22T05:41:36.737
> 
> 标签：javascript, ruby-on-rails, memory, amazon-ec2, amazon-web-services

我的应用程序在[http://rocksuper.bitnamiapp.com/](http://rocksuper.bitnamiapp.com/)上运行，它运行良好，但是当我使用`<%= javascript_include_tag "application" %>`该页面包含 javascript 时，我会收到一个错误消息

**Public#index 中的致命**错误 - CALL_AND_RETRY_0：分配失败 - 进程内存不足

看这个屏幕截图：

![在此处输入图像描述](../Images/0fdd1207778b5554263848c973e615f5.png)

我想知道如何解决这个错误，

任何意见都非常欢迎..

顺便说一句：我尝试删除

`<%= javascript_include_tag "application" %>`

并将其替换为

`<%= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" %>`

然后它工作正常，它没有给我一个错误，并且 jquery 被正确嵌入（通过控制台测试）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:30:16.947

这看起来像是项目中自定义 javascript 的问题，而不是 jQuery 库的问题。您是否正在递归地关闭一个对象？

尝试在 JS 中可能发生内存错误的位置之前设置断点。

# opengl - 已弃用的 OpenGL 函数仍在面向着色器的应用程序中使用

> ID：10696300
> 
> 赞同：2
> 
> 时间：2012-05-22T05:42:39.587
> 
> 标签：opengl

为什么人们倾向于混合已弃用的固定功能管道功能，如矩阵堆栈、gluPerspective()、glMatrixMode()，以及当这意味着手动完成并作为统一推送到 GLSL 中时，为什么不这样做。

这种方法有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:19:57.993

就用户的理智而言，这样做是有正当理由的。固定功能矩阵（以及 GLSL 中跟踪的其他固定功能状态）是全局状态，在所有 Uniform 之间共享。如果要更改每个着色器中的投影矩阵，只需在一个地方更改即可。

在没有固定功能的 GLSL 中执行此操作需要使用统一缓冲区。要么，要么您必须构建一些系统，将状态信息发送到您要使用的每个着色器。后者是完全可行的，但很*麻烦*。前者比较新，2009年才推出，*需要*DX10级硬件。

仅使用固定功能和 GLSL 状态跟踪要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:45:43.927

据我所知，没有任何好处（除非您认为不必重新编码功能是一种好处）。

很可能只是懒惰，或者对替代方法缺乏了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:51:53.847

本质上是因为这些应用程序需要着色器才能运行，但程序员太懒惰/压力太大，无法重新实现那些使用 OpenGL 兼容性配置文件已经可用的功能。

“难以”替换的显着特征是线条宽度（大于 1）、线条点画和单独的前后多边形模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:15:41.200

大多数教程都教授过时的 OpenGL，所以也许人们不知道更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T07:11:59.127

好处是您使用的是众所周知的、经过全面测试且可靠的代码。如果它用于 MS Windows 或 Linux 专有驱动程序，由构建您的 GPU 的人编写，因此可以假定知道如何使其真正快速。

小组项目的另一个好处是只有一种方法可以做到。关于您是否应该编写自己的 C++ 矩阵类、应该调用什么、要重载哪些运算符以及内部实现应该是 1D 还是 2D 数组，没有任何争论...

# c# - 对于 WCF 服务，没有证书的 TransportWithMessageCredential 是否足够安全？

> ID：10696303
> 
> 赞同：9
> 
> 时间：2012-05-22T05:42:50.480
> 
> 标签：c#, .net, wcf, web-services, security

我开发了一个 WCF 自托管服务，我有两个基本的安全要求，因为它将通过 Internet 访问：

*   传输层应防止篡改和嗅探，尤其是检索身份验证凭据。这就是 SSL 所做的，但据我所见，设置 SSL 需要安装证书（可能通过使用普通证书文件的[这个 hack](http://www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti)除外），我不想这样做。

*   身份验证层应包含用户名/密码验证器。

我将我的服务配置为使用：

```
 <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName" />
        <transport clientCredentialType="Basic" />
      </security> 
```

即使传输层是 HTTP（不是 HTTPS），这是否会使 WCF 创建另一个等效于 SSL 的安全层？如果不是，在安全强度方面有什么区别？

此外，是否有任何方法可以在不使用 SSL 证书的情况下保护元数据端点（不是必需的，但将不胜感激）？

这是我的自托管服务的完整配置代码：

```
<?xml version="1.0"?>
<configuration>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <system.serviceModel>
    <services>
      <service name="MyService">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8000/Services" />
          </baseAddresses>
        </host>
        <endpoint address ="MyService" binding="wsHttpBinding" contract="IMyService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="Binding1" maxReceivedMessageSize="2147483647">
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="UserName" />
            <transport clientCredentialType="Basic" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="CR.Common.Services.CustomValidator, Common" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T06:51:59.713

默认情况下，所有**安全**的WCF 绑定（如 wsHttpBinding）都会对消息进行加密和签名。

SSL 强制使用证书，您提供的链接中的黑客攻击是攻击 wcf，而不是 SSL。因为没有 SSL WCF 禁止使用 basicHttpBinding（以明文形式发送 xml）和 UserNamePasswordValidator，因为在这种情况下，任何拦截消息的人都可以获得用户名/密码。

使用 WSHttpBinding，您可以避免 SSL 并将安全性置于消息级别。

我强烈建议您阅读[这篇文章](http://web.archive.org/web/20120801204013/http://www.devx.com/codemag/Article/33342/1763/page/2)，尤其是**服务凭证和协商**一章：

> 为了支持相互身份验证和消息保护，服务必须向调用者提供凭据。当使用传输安全 (SSL) 时，服务凭证通过传输协议进行协商。使用 Windows 凭据时，也可以协商用于消息安全的服务凭据；否则必须指定服务证书

使用`UserNamePasswordValidator`，您必须在服务器上配置证书以允许客户端签名并加密每条消息（使用证书的公钥）。如果您使用的是 Windows 身份验证，则不需要它。

你为什么这么担心证书？

# c# - 将 DebuggerStepThrough 属性添加到类

> ID：10696304
> 
> 赞同：22
> 
> 时间：2012-05-22T05:42:58.993
> 
> 标签：c#, visual-studio-debugging

我想将[DebuggerStepThrough](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)属性添加到我的类的所有方法中。加入`DebuggerStepThrough`课堂就够了吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-08T22:58:47.693

是的，将它添加到类将导致整个类（方法、属性等）被调试器绕过。

# database - 我应该在哪些情况下使用时间戳？

> ID：10696311
> 
> 赞同：0
> 
> 时间：2012-05-22T05:43:21.277
> 
> 标签：database, timestamp

我应该在哪些情况下使用时间戳？我知道时间戳是什么，但我想听听它如何帮助人们在现实生活中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:39:35.823

像@Paul McCowat 一样，我们很久以前也使用时间戳进行并发处理。随着我们切换到 NHibernate (ORM)，趋势是使用更简单的版本号而不是时间戳。Rails 框架也使用版本号而不是时间戳来实现并发性。当我们迁移到更新的 ORM 时，我们已经从我们的数据库结构中提取了时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:59:34.253

在我使用 ORM（在我的例子中是 Linq2Sql 或 Enitity）之前，我阅读了[Imar Spaanjaars](http://imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1)的一篇有趣的文章，关于使用 ado.net 在 asp.net 中进行 n-tiered。在这个处理并发的例子中，当一个记录被返回时检查时间戳列，比如一个gridview，然后在进行编辑之前检查数据库。通过比较内存和数据库中的时间戳，您可以查看在检索记录和询问然后向用户报告之间是否发生了变化。

所以总而言之，我使用了时间戳列来处理并发。

# mysql - WHERE 中的 MySQL IF/ELSE 语句

> ID：10696313
> 
> 赞同：0
> 
> 时间：2012-05-22T05:43:35.067
> 
> 标签：mysql

我想在数据库中查找重复的成员。

1.  首先，我想检查他们的用户名是否存在。
2.  如果没有，我想检查他们的名字、姓氏和电子邮件地址。
3.  最后，如果这与任何人都不匹配，我只想检查名字和姓氏是否存在。

我一直在查看 IF/ELSE 语句，甚至是 Google 中的 CASE，但我似乎无法弄清楚它在我的情况下是如何工作的。

这是一些我认为有意义的代码（作为一名 PHP 程序员），但这不是 MySQL 做事的方式......

```
SELECT id FROM members WHERE (
    IF (member_username = 'john.doe')
    ELSEIF (member_firstname = 'John' AND member_lastname = 'Doe' AND member_email = 'john@doe.com')
    ELSE (member_firstname = 'John' AND member_lastname = 'Doe')
) AND deleted = 0 
```

如果可能的话，我将如何将上述内容转换为有效的 MySQL 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:58:10.927

我最终接受了@Corbin 的建议并使用了

```
SELECT username, first_name, last_name, email_addr FROM members WHERE username = 'username' OR (first_name = 'first name' AND last_name = 'last name') 
```

然后使用 PHP if/else 语句来确定哪条记录是完全重复的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:49:02.780

这会有什么问题？

```
SELECT id
FROM members
WHERE (member_username = 'john.doe'
    OR (member_firstname = 'John' AND member_lastname = 'Doe' AND member_email = 'john@doe.com')
    OR (member_firstname = 'John' AND member_lastname = 'Do'))
AND deleted = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:49:09.557

不要忘记**TOP 1！**

```
SELECT TOP 1 id FROM members WHERE deleted = 0 AND
(
  (member_username = 'john.doe') OR
  (member_email = 'john@doe.com' AND member_firstname = 'John' AND member_lastname = 'Doe') OR
  (member_firstname = 'John' AND member_lastname = 'Doe')
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:51:00.180

看看这个：[http ://docs.oracle.com/cd/E17952_01/refman-5.5-en/control-flow-functions.html#operator_case](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/control-flow-functions.html#operator_case)

# php - 我可以将命名空间与 restler 一起使用吗？

> ID：10696315
> 
> 赞同：3
> 
> 时间：2012-05-22T05:43:56.423
> 
> 标签：php, restler

我正在使用来自 Luracast 的 restler 库，并且我想为我的 API 类使用命名空间。例如，我可以这样做：

```
$r = new Restler();
$r->addAPIClass('\fully\qualified\path\Foo');
$r->handle(); 
```

目前它在restler.php的第340行抛出一个错误：

```
Fatal error: Class 'Foo' not found in /work/projects/xxxx/lib/Restler/restler/restler.php on line 341 
```

现在我有冲突的类名，我想使用命名空间而不是解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:39:55.793

Restler 直到现在才支持命名空间！

我们刚刚为[Restler 2.1.7](https://github.com/Luracast/Restler/commit/987b4fe0c3673d5cd9d447e372ea501c16e0bdb8)添加了命名空间支持并刚刚发布

```
$r = new Restler();
$r->addAPIClass('fully\qualified\path\Foo');
$r->handle(); 
```

现在应该可以正常工作了:)

# c# - 如何在linq中获得不同的价值

> ID：10696316
> 
> 赞同：1
> 
> 时间：2012-05-22T05:44:01.440
> 
> 标签：c#, linq

我已经使用下面的 linq 查询来加入一些表以获取准确的数据..

```
(from row in
  (from c in DbContext.Customer
   join cd in DbContext.CustomerDetails
   on c.Customer_Id equals cd.CustomerDetail_CustomerId
   join cp in DbContext.ProductPurchases
   on cd.CustomerDetail_OrgID equals cp.ProductPurchase_OrgID
   where cd.CustomerDetail_OrgId == OrganizationID --organization Id is common
   && c.Customer_Org_Id == OrganizationID
   && cp.ProductPurchase_OrgID == OrganizationID
   orderby cd.CustomerDetail_CreatedDate descending
   select new { c, cd, cp })
   select new CustomerDTO
   {
      CustomerId = row.cpd.CustomerDetail_CustomerID,
      CustomerName = row.c.Customer_LastName+", "+row.c.Customer_FirstName,
   }).ToList(); 
```

我在 CustomerDetail 记录中有一个小问题我只想根据 CustomerId 从 CustomerDetail 中获取不同的记录......

CustomerDetail 可以有多个相同 CustomerId 的记录

请建议我如何过滤我的查询以仅从 CustomerDetail 表中获取不同的记录

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:56:33.063

您可以为您的 CustomerDetail(s)-Objects 实现一个比较器类，然后使用接受您的比较器的重载版本。

像这样的东西：

```
class CustomerDetailsComparer: IEqualityComparer<CustomerDetail>
{
    public bool Equals(CustomerDetail x, CustomerDetail y)
    {

        if (Object.ReferenceEquals(x, y)) return true;

        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        return x.CustomerId == y.CustomerId;
    }

    public int GetHashCode(CustomerDetail cd)  
    {
         // Do something here
    }  
}

// ...

DbContext.CustomerDetails.Distinct(new CustomerDetailsComparer()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:48:35.657

LINQ 提供了`Distinct`方法。但是，它默认使用默认的相等比较器，或者您指定的一个可选。

我建议不要使用匿名类型，而是使用属性 CustomerId 和 CustomerName 定义一个类，然后覆盖 Equals。

```
public class DistinctCustomer
{
   public int CustomerId { get; set; }
   public string CustomerName { get; set; }

   public override bool Equals(object obj)
   {
        if (ReferenceEquals(obj, null)) return false;
        if (ReferenceEquals(this, obj)) return true;

        var other = obj as DistinctCustomer;

        if (other == null) return false;

        return CustomerId == other.CustomerId;
   }

   public override int GetHashCode()
   {
        return CustomerId.GetHashCode();
   }
} 
```

接着

```
(from row in
  (from c in DbContext.Customer
   join cd in DbContext.CustomerDetails
   on c.Customer_Id equals cd.CustomerDetail_CustomerId
   join cp in DbContext.ProductPurchases
   on cd.CustomerDetail_OrgID equals cp.ProductPurchase_OrgID
   where cd.CustomerDetail_OrgId == OrganizationID --organization Id is common
   && c.Customer_Org_Id == OrganizationID
   && cp.ProductPurchase_OrgID == OrganizationID
   orderby cd.CustomerDetail_CreatedDate descending
   select new { c, cd, cp })
   select new DistinctCustomer
   {
      CustomerId = row.cpd.CustomerDetail_CustomerID,
      CustomerName = row.c.Customer_LastName+", "+row.c.Customer_FirstName,
   }).Distinct().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:48:49.870

`.ToList()` 只需在Ie之前使用 .Distinct()

```
(from row in
  (from c in DbContext.Customer
   join cd in DbContext.CustomerDetails
   on c.Customer_Id equals cd.CustomerDetail_CustomerId
   join cp in DbContext.ProductPurchases
   on cd.CustomerDetail_OrgID equals cp.ProductPurchase_OrgID
   where cd.CustomerDetail_OrgId == OrganizationID --organization Id is common
   && c.Customer_Org_Id == OrganizationID
   && cp.ProductPurchase_OrgID == OrganizationID
   orderby cd.CustomerDetail_CreatedDate descending
   select new { c, cd, cp })
   select new 
   {
      CustomerId = row.cpd.CustomerDetail_CustomerID,
      CustomerName = row.c.Customer_LastName+", "+row.c.Customer_FirstName,
   }).Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:52:56.983

尝试：

```
(--your code--).Distinct().ToList(); 
```

# delphi - 导入 COM 组件：c# 与 Delphi XE 的区别

> ID：10696320
> 
> 赞同：3
> 
> 时间：2012-05-22T05:44:23.787
> 
> 标签：delphi, com, activex, delphi-xe

我需要使用 COM 组件。不幸的是，它的生产者明确不支持 Delphi，只提供 C# 和 VB.NET 示例。该组件没有可用的类型库。

OTOH 它在 VS2010 中非常简单，因为相应的 COM 库 (WinSig.exe) 被列为参考。

在 VS2010 IDE 中，它位于“项目 - 添加引用 - COM 选项卡”中。在 Delphi XE 中，我在“组件 - 导入组件 - ActiveX”中找不到该条目。

我检查了两个 IDE 中的条目，发现 Delphi IDE 中包含一些 COM 组件，这些组件也在 VS IDE 中，但 Delphi IDE 中缺少很多 COM 组件。

请参阅[屏幕截图文件](http://dl.dropbox.com/u/10252995/Delphi_VS.jpg)，该文件显示前七个 COM 组件未显示在 Delphi IDE 中。

有人可以解释为什么会这样，也许对这个特定问题有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T07:37:57.373

Did you checked `Import a Type Library` option in `Import Component` wizard (on the first page)? ActiveX is narrower thing than COM. Also, you can use `Add` button to choose a file if you know library location.

# regex - 如何在 tcl 中严格使用正则表达式删除重复字符

> ID：10696322
> 
> 赞同：2
> 
> 时间：2012-05-22T05:44:39.387
> 
> 标签：regex, tcl

如何在 TCL 中严格使用正则表达式删除字符串中的重复字符？例如，我有一个这样的字符串`aabbcddeffghh`，我只需要“ `abcdefgh`”字符。我试过了`lsort unique`，我能够得到独特的字符：

```
join [lsort -unique [split $mystring {}]] 
```

但我`regexp`只需要使用命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:46:31.163

**试试这个：**

```
regsub -linestop -lineanchor -all {([a-z])\1+} $subject {\1} result 
```

或者

```
regsub -linestop -nocase -lineanchor -all {([a-z])\1+} $subject {\1} result 
```

**解释**

```
{
(           # Match the regular expression below and capture its match into backreference number 1
   [a-z]       # Match a single character in the range between “a” and “z”
)
\1          # Match the same text as most recently matched by capturing group number 1
   +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:06:56.363

您不能仅使用 Tcl 的`regsub`命令从字符串中删除所有不连续的双字符。它不支持访问前瞻序列中的反向引用，这意味着任何删除方案都必然会遇到重叠匹配区域的问题。

最简单的解决方法是包装在一个`while`循环中（带有一个空的主体），使用`regsub`将返回在给定一个变量来存储结果时执行的替换次数的事实（下面的最后一个参数）：

```
set str "mississippi mud pie"
while {[regsub -all {(.)(.*)\1+} $str {\1\2} str]} {}
puts $str;          # Prints "misp ude" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:16:02.493

```
regsub -all {(.)(?=.*\1)} $subject {} result 
```

它使用前瞻来检查是否有更多的角色实例。如果有，它会删除该字符。

您将始终保留最后一个字符。如果没有额外的库，就不可能在 TCL 中进行后视。

有关环视的更多信息：[Regex 教程 - Lookahead and Lookbehind Zero-Width Assertions](http://www.regular-expressions.info/lookaround.html)

* * *

编辑：嗯...似乎是 Tcl 8.5 中反向引用的错误。`{(.).*\1}`匹配，但不匹配`{(.)(?=.*\1)}`。它抱怨`Invalid backreference number`. 如果没有前瞻中的反向引用，我看不到任何解决方案。

它可能只是我测试过的版本（[ideone.com/pFS0Q](http://ideone.com/pFS0Q)）。我在网上找不到任何其他版本的 Tcl 解释器来测试。

# vb.net - VB.Net 为数据表赋值

> ID：10696326
> 
> 赞同：1
> 
> 时间：2012-05-22T05:44:51.457
> 
> 标签：vb.net

嗨，我有分配了一些值的字符串和整数。现在我需要读取字符串和整数值并将它们分配给我使用 VB.Net 创建的数据表。

```
If dt.Rows.Count > 0 Then 
For n As Integer = 0 To dt.Rows.Count - 1 
EmployeeNo = (dt.Rows(n)(0)) 
EmpName = (dt.Rows(n)(1)).ToString 
Commission = CDbl(dt.Rows(n)(2)) 
'I need to read one by one and assign the [EmployeeNo,EmpName,Commission] 
'to the dataset DtEmployee in which Employee is the table and EmpNo, EmpName, Commission 'are the coloumns.. 
Next 
End If 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:40:56.713

试试这个将整个工作表转储到 DataTable：

```
var connectionString = " Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\file.xlsx;Extended Properties="Excel 12.0 Xml;HDR=YES;IMEX=1";"
        var sheetName = "Sheet1";

        using (var con = new OleDbConnection(connectionString))
        {
            con.Open();

            var table = new DataTable(sheetName);
            var query = "SELECT * FROM [" + sheetName + "]";
            OleDbDataAdapter adapter = new OleDbDataAdapter(query, con);
            adapter.Fill(table);
            return table;
        } 
```

编辑：根据更新的问题

```
If dt.Rows.Count > 0 Then 
For n As Integer = 0 To dt.Rows.Count - 1 
EmployeeNo = (dt.Rows(n)(0)) 
EmpName = (dt.Rows(n)(1)).ToString 
Commission = CDbl(dt.Rows(n)(2)) 
'I need to read one by one and assign the [EmployeeNo,EmpName,Commission] 
'to the dataset DtEmployee in which Employee is the table and EmpNo, EmpName, Commission 'are the coloumns.. 

Dim dataRow As DataRow = DtEmployee.Tables("Employee").AsEnumerable().Where(Function(row) row.Field(Of String)("EmpNo") = EmployeeNo).SingleOrDefault()
If dataRow IsNot Nothing Then

//Set your DataRow
dataRow("EmpName") = EmpName 
dataRow("Commission ") = Commission
DtEmployee.AcceptChanges();
End If

Next 
End If 
```

从 DtEmployee 表中找到行并更新该行，或者如果您想添加新行则不要找到行，只需创建新行并设置值并添加到 DtEmployee

```
DataRow dataRow  = DtEmployee.Tables("Employee").NewRow()
//Set your DataRow
 dataRow("EmpName") = EmpName 
 dataRow("Commission ") = Commission
DtEmployee.Tables("Employee").Rows.Add(dataRow) 
```

希望这有帮助..

# gwt - gwt-maven-plugin 如何在另一个模块 pom.xml 中添加源 jar

> ID：10696331
> 
> 赞同：1
> 
> 时间：2012-05-22T05:45:31.847
> 
> 标签：gwt, maven

我的应用程序有 2 个模块，一个是 jar，另一个是 gwt war。在 jar 模块（非 gwt）pom.xml 中，我添加

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-source-plugin</artifactId>
      <version>2.1.2</version>
      <executions>
         <execution>
           <phase>package</phase>
           <goals>
              <goal>jar-no-fork</goal>
           </goals>
         </execution>
      </executions>
     </plugin>
   </plugins>
</build> 
```

并且 als-admin-viewer-core-1.0.0-sources.jar 已成功创建。然后在 webapp(a gwt application) pom.xml 中，我想使用这个 jar，在段中，我添加

```
 <plugin>
   <groupId>org.codehaus.mojo<groupId>
   <artifactId>gwt-maven-plugin</artifactId>
   <version>2.4.0</version>
   <dependencies>
      <dependency>
    <groupId>hk.gov.ehr.service.tch.als</groupId>
    <artifactId>als-admin-viewer-core</artifactId>
    <version>1.0.0</version>    
   </dependency>
   <dependency>
    <groupId>hk.gov.ehr.service.tch.als</groupId>
    <artifactId>als-admin-viewer-core</artifactId>
    <version>1.0.0</version>
    <classifier>sources</classifier>
   </dependency>
  </dependencies>
  <execution>
  <phase>prepare-package</phase>
  <goals> 
    <goal>compile</goal>
  </goals>
  </executions>
........ 
```

但是当我为这个项目（als-admin-viewer-webapp）运行 maven install 时，错误 No source code is available for type hk.gov.ehr.service.tch.als.admin.viewer.core.LogSearchCriteria; 你忘了继承一个必需的模块吗？被提示。

问题是什么？！！

我什至尝试添加

```
<compileSourcesArtifacts>
  <compileSourcesArtifact>hk.gov.ehr.service.tch.als:als-admin-viewer-core</compileSourcesArtifact>  <!-- groupId:artifactId -->
</compileSourcesArtifacts> 
```

在

```
<configuration> 
```

gwt-maven-plugin 的部分，但它仍然没有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T14:37:58.567

我想你忘了在你的 jar 模块中创建“gwt.xml”文件并在你的主 gwt.xml （在 gwt maven 模块内）中继承它。

请看 [http://mojo.codehaus.org/gwt-maven-plugin/user-guide/library.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/library.html)

有关详细信息（“使用通用 JAR 作为 GWT 库”一节）。

还要记住：如果您使用 maven-source-plugin 附加源，您的源将与 Web 应用程序一起分发。如果您使用“compileSourcesArtifacts”，您可以避免这种副作用。

# javascript - 使用哈希附加 url 而不重定向到新页面

> ID：10696336
> 
> 赞同：0
> 
> 时间：2012-05-22T05:45:44.093
> 
> 标签：javascript, ajax

我正在使用具有多行的表。我只想在单击任何行时更改 url。例如，如果我点击第一行 url 附加到 www.abc.com#1 和第 2 行 www.abc.com#2??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:55:18.667

这个怎么样：

```
... onclick="location.hash='1'; return false;" 
```

在您要为其启用此行为的标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:57:48.857

像这样放入`onclick`事件`<tr>`

```
<tr id="row6" onclick="goTo();">
      .....
   </tr> 
```

然后你的java脚本

```
function goTo() {
        var input = "give your url like #1",
            frame = get("frame");

            input = "http://www.abc.com" + input;
            frame.src = input;

    } 
```

# iphone - iPhone应用程序的UI自动化

> ID：10696341
> 
> 赞同：0
> 
> 时间：2012-05-22T05:46:03.817
> 
> 标签：iphone, xcode, testing, ios4, ui-testing

我需要自动化 iPhone 应用程序的 UI 测试，即如果在我的 iPhone 应用程序中有两个与用户名和密码相对应的文本字段，则测试应该自动填写值并按下提交按钮，但由于我是iPhone 编程领域 我不知道自动化此测试所需的流程和程序。

任何人都可以建议一个如何缓解这个问题的完整程序，或者指向一些链接，我可以在其中找到有关该问题的一些相关信息？
我只需要自动化上述场景，即在两个文本字段中填写详细信息并自动按下提交按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:07:50.420

如果这是 iOS 上的 Web 应用程序，我可以建议 Selenium WebDriver 使用[iPhoneDriver](http://code.google.com/p/selenium/wiki/IPhoneDriver)。如果没有，这篇[SO 帖子](https://stackoverflow.com/questions/3801344/how-do-i-test-my-ios-apps)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:16:39.827

这应该正是您所需要的。它允许自动填充文本字段和 UI 自动化 [https://github.com/square/KIF](https://github.com/square/KIF)

这是介绍它的博客文章 [http://corner.squareup.com/2011/07/ios-integration-testing.html](http://corner.squareup.com/2011/07/ios-integration-testing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T00:09:13.960

有几个用于 iOS UI 测试的新兴开源框架，包括[Appium](http://appium.io/)、[Calabash](http://calaba.sh/)、[Frank](http://testingwithfrank.com/)和[Zucchini](http://www.zucchiniframework.org/)。

# vector - 如何在一条线旁边画一个点？

> ID：10696348
> 
> 赞同：-1
> 
> 时间：2012-05-22T05:46:41.037
> 
> 标签：vector, drawing, 2d, line, point

我有一个可以指向任何方向的箭头。我需要在特定距离处画一个点。该点需要保持在箭头的正确一侧。我该怎么做呢？我知道箭头的角度。

插图：

--->

○

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:06:44.150

您已经知道箭头的角度和位置，所以您应该做的只是根据箭头端点（钝端点）和箭头 + 90º 的方向绘制点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:00:42.763

如果你有一个代表箭头的向量，你可以制作一个单位向量，然后将它乘以你想要的长度，并将点放在新的缩短向量的末尾。

# python - 从列表列表中的字符串中查找和拆分字符

> ID：10696349
> 
> 赞同：1
> 
> 时间：2012-05-22T05:46:44.750
> 
> 标签：python, string, list, bioinformatics

我已经在这几天了，尝试了各种不同的方法，检查了至少 50 个不同的 stackoverflow/python 库/python 新闻组问题，没有一个提供了太多帮助。（虽然如果它在那里并且我错过了它，我不会感到惊讶）。

反正！

我有一个包含字符串的列表列表。如下：

```
[['CAA46951&Homeobox domain&192:248&F&#CDC1C5&NULL&PFAM&Y&433&'],
 ['CAA46951&Homeodomain-like&165:252&S&#CD5B45&NULL&SCOP&Y&433&'],
 ['5330400P12&WD domain, G-beta repeat&131:168&F&#FF8C69&NULL&PFAM&Y&296&'],
 ['5330400P12&WD domain, G-beta repeat&173:210&F&#FF8C69&NULL&PFAM&Y&296&'],
 ['5330400P12&WD40-repeat&1:296&S&#00FF7F&NULL&SCOP&Y&296&'],
 ['AAH62206&Cell division protein&38:311&S&#00CED1&NULL&PFAM&Y&425&'],
 ['AAH62206&P-loop containing nucleoside triphosphate hydrolases&36:279&S&#00FFFF&NULL&SCOP&Y&425&']] 
```

我想在一个列表中将每个字符串拆分为一个单独的字符串（因此 [['a','b','c'],['a2','b2','c2']] 排序列表[['a&b&c'],['a2&b2&c2]]

我已经尝试了从 for 循环枚举到递归函数的所有方法，但我无法让它工作。我知道这真的是一个非常愚蠢的问题，但请帮忙。

（值得注意的是，列表作为 txt. 文件传入并转换为字符串列表列表。最初它是：

`CAA46951&Homeobox domain&192:248&F&#CDC1C5&NULL&PFAM&Y&433&` `CAA46951&Homeodomain-like&165:252&S&#CD5B45&NULL&SCOP&Y&433&`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:18:16.017

```
LofL=[['CAA46951&Homeobox domain&192:248&F&#CDC1C5&NULL&PFAM&Y&433&'], 
      ['CAA46951&Homeodomain-like&165:252&S&#CD5B45&NULL&SCOP&Y&433&'], 
      ['5330400P12&WD domain, G-beta repeat&131:168&F&#FF8C69&NULL&PFAM&Y&296&'], 
      ['5330400P12&WD domain, G-beta repeat&173:210&F&#FF8C69&NULL&PFAM&Y&296&'], 
      ['5330400P12&WD40-repeat&1:296&S&#00FF7F&NULL&SCOP&Y&296&'], 
      ['AAH62206&Cell division protein&38:311&S&#00CED1&NULL&PFAM&Y&425&'], 
      ['AAH62206&P-loop containing nucleoside triphosphate hydrolases&36:279&S&#00FFFF&NULL&SCOP&Y&425&']]

newL=[]      
for L in LofL:
    newSubL=[]
    for e in L:
        for s in e.split('&'):
            if s:
                newSubL.append(s)
    newL.append(newSubL) 
```

输出：

```
[['CAA46951', 'Homeobox domain', '192:248', 'F', '#CDC1C5', 'NULL', 'PFAM', 'Y', '433'], ['CAA46951', 'Homeodomain-like', '165:252', 'S', '#CD5B45', 'NULL', 'SCOP', 'Y', '433'], ['5330400P12', 'WD domain, G-beta repeat', '131:168', 'F', '#FF8C69', 'NULL', 'PFAM', 'Y', '296'], ['5330400P12', 'WD domain, G-beta repeat', '173:210', 'F', '#FF8C69', 'NULL', 'PFAM', 'Y', '296'], ['5330400P12', 'WD40-repeat', '1:296', 'S', '#00FF7F', 'NULL', 'SCOP', 'Y', '296'], ['AAH62206', 'Cell division protein', '38:311', 'S', '#00CED1', 'NULL', 'PFAM', 'Y', '425'], ['AAH62206', 'P-loop containing nucleoside triphosphate hydrolases', '36:279', 'S', '#00FFFF', 'NULL', 'SCOP', 'Y', '425']] 
```

如果你想进一步减少，你可以这样做：

```
newL=[filter(len, e.split('&')) for l in LofL for e in l] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:57:05.190

```
>>> oldList = [['a&b&c'], ['d&e&f']]
>>> newList = [item[0].split('&') for item in oldList]
>>> newList
[['a', 'b', 'c'], ['d', 'e', 'f']] 
```

# javascript - 使用 Scroll 重新加载 Jqgrid 时出现问题 - 行数据重复且缺少最后一页

> ID：10696350
> 
> 赞同：0
> 
> 时间：2012-05-22T05:47:14.657
> 
> 标签：javascript, ajax, jquery, jqgrid

请参考下面的代码，我用它来从数据库加载数据。代码在第一次加载数据时运行良好。每条记录和每一页都能完美加载。

现在，如果我调用 Reload 函数，它会产生问题。

1.  有时它会加载重复的行（例如，如果我的 jason 返回 20 行，网格将显示 40）
2.  我松开了网格中记录的最后一页。

* * *

```
 jQuery("#list").jqGrid({
            url: "http://localhost/myapp/myfile.php",
            datatype: "json",                
            mtype:"POST",
            postData:{folder: 'INBOX' },
            jsonReader: 
            {
                root: "rows",
                page: "currpage",
                total: "totalpages",
                records: "totalrecords",
                id: "0",
                cell:"",
                repeatitems: false
            },
            colNames: ['Id','Message'],
            colModel: [ 
                        { name: 'messageid', index: 'messageid', hidden: true, search:false},
                        { name: 'message', index: 'message', search:false},
                      ],
            rowNum: 10,
            scroll: 1,
            prmNames:{npage:1},
            autowidth: true,
            height: 470,
            loadonce: true,
            viewrecords: true,
            altRows:true,                
            caption: "",
            pager: "#plist",
        });
        jQuery("#list").jqGrid('setFrozenColumns');

    function reload_list()
    {
        $("#list").setGridParam({datatype:'json'}).trigger('reloadGrid');
    } 
```

* * *

请注意以下信息

我使用的框架是带有**JqGrid**版本**jquery.jqGrid-4.3.1**的 Codeigniter 。

我的代码中包含的文件是

1.  css/ui.jqgrid.css
2.  js/grid.locale-en.js
3.  js/jquery.jqGrid.src.js
4.  插件/grid.posttext.js
5.  src/jqModal.js
6.  src/jqDnR.js

* * *

演示：[http ://www.trimantra.com/demo/appointmentsystem/grid.php](http://www.trimantra.com/demo/appointmentsystem/grid.php)

请让我知道如何解决此问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:49:15.250

从您的代码中删除这一行：

```
jQuery("#list").jqGrid('setFrozenColumns'); 
```

正因为如此，它正在创建一个新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:32:51.917

我无法重现行重复问题，但我可以在您的应用程序中看到很多其他问题。

我想您的主要问题是因为您在所有三个网格中**加载了具有相同 ID 的数据。**作为结果，您在页面上有 id 重复项。解决问题的最简单方法是使用`idPrefix`jqGrid 选项。

您可以在下面找到我发现的最重要问题的列表：

*   您在应用程序中包含错误的 jQuery UI。您没有包含`images`主题的子目录。所以应用程序在加载`http://www.trimantra.com/demo/appointmentsystem/lib/jquery.jqGrid-4.3.1/themes/ui-lightness/images/ui-bg_diagonals-thick_20_666666_40x40.png`. 您应该将所有内容都包含`images`在您的项目中。
*   您不在网格中使用`idPrefix`选项，而是*在三个网格中加载相同的数据*。结果，所有三个网格都将具有`<tr>`相同 id 的元素。HTML 不允许 id 重复。要解决此问题，您可以将`idPrefix: "a"`,用于三个网格。结果，该行将进入第一个网格和最后一个网格，并且您将在页面上没有 id 重复项。`idPrefix: "b"``idPrefix: "c"``messageid: "45"``id="a45"``id="b45"``id="c45"`
*   `scroll: 1`我认为和的组合没有意义`loadonce: true`。如果我了解您需要做什么，您应该 从所有网格中删除`scroll: 1`和删除。`prmNames:{npage:1}`虚拟滚动需要这些选项。
*   您应该添加`gridview: true`选项，以在大量行的情况下多次提高网格的性能。
*   产生服务器的服务器响应当前不对应 jqGrid 请求。该请求将包含`rows=10`, `page=1`, `sidx=toname`, `sord=asc`。服务器返回**所有 48 行数据**，数据**未排序**。无论如何，您应该在服务器代码中插入数据排序。
*   您`frozen:true`在所有可见列中使用。我认为设置没有意义。
*   如果您不需要显示`'messageid'`列，您可以从 中*删除*列定义`colModel`并使用`jsonReader: {id: "messageid", repeatitems: false }`. 结果将保存在页面上的位置（隐藏的列仍然在页面上放置）。
*   您最好以独立于区域设置的格式[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)传输日期。此外，您应该使用您可以使用`formatter: 'data'`的格式显示日期。主要好处是在使用的情况下正确的列排序顺序。`05/16/2012 07:45 AM``formatoptions: { newformat: "d/m/Y H:i A" }``loadonce: true`
*   `colModel`您应该从定义中删除尾随逗号。该组合`},]`是 JavaScript 中的错误。在最现代的网络浏览器中（但在 IE6 等旧版浏览器中不会），该错误将被忽略。最好编写无错误的代码。

# ipad - 在uiwebview中编辑html文件

> ID：10696351
> 
> 赞同：1
> 
> 时间：2012-05-22T05:47:23.927
> 
> 标签：ipad, ios4, ios5, xcode4.2

我正在尝试使用 ios 5 的 contenteditability 功能在 uiwebview 中编辑 html 文件。编辑后，我只想在相同的 uiwebview 中重新加载编辑后的内容，而不更改格式和所有内容。我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T00:00:29.787

```
[webView loadHTMLString:[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"]; baseURL:nil]; 
```

# c# - 在两个数字之间删除一个字符（正则表达式）

> ID：10696357
> 
> 赞同：0
> 
> 时间：2012-05-22T05:48:10.750
> 
> 标签：c#, .net, regex

我有一个使用这种格式的星期日期：

`2012-15 - 2012-20`

我想将其格式化为

`2012 v15 - 2012 v20`

c#怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:54:09.850

这应该可以解决问题：

```
 String str = "2012-15 - 2012-20";
        String newStr = Regex.Replace(str, "(\\d+)-(\\d+)", "$1 v$2");
        Console.WriteLine(str);
        Console.WriteLine(newStr);
        Console.ReadLine(); 
```

打印出来：

> 2012-15 - 2012-20
> 
> 2012 v15 - 2012 v20

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:55:41.113

试试这个：

```
string input = "2012-15 - 2012-20";
string output = Regex.Replace(input, @"(\d{4})-(\d+)", "$1 v$2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:54:45.130

```
string input = "2012-15 - 2012-20";
string output = Regex.Replace(input, @"\b(-)\b", "v"); 
```

# iphone - 导航控制器上的内存管理

> ID：10696358
> 
> 赞同：0
> 
> 时间：2012-05-22T05:48:11.490
> 
> 标签：iphone

我是 iPhone SDK 的新手，我在导航控制器上遇到了漏洞。这是我的代码：

-(void)SignupClicked:(id)sender {

```
if(appdelegate.isiPad){
    SignUpViewController *obj_SignUpViewController =[[SignUpViewController alloc] initWithNibName:@"SignUpViewControllerIpad" bundle:nil];
    [self.navigationController pushViewController:obj_SignUpViewController animated:YES];
    [obj_SignUpViewController release];
}
else {
    SignUpViewController *obj_SignUpViewController =[[SignUpViewController alloc] initWithNibName:@"SignUpViewController" bundle:nil];
    [self.navigationController pushViewController:obj_SignUpViewController animated:YES];
    [obj_SignUpViewController release];
} 
```

}

我在这些方面有泄漏：

```
[self.navigationController pushViewController:obj_SignUpViewController animated:YES];
[self.navigationController pushViewController:obj_SignUpViewController animated:YES]; 
```

请帮助我...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:58:49.713

当您将视图控制器推送到导航控制器时，它会被保留。因此，您需要在之后立即释放它，否则您会泄漏。

```
[obj_SignUpViewController release]; 
```

# java - 在 Android 中打包/传输 EventObject

> ID：10696365
> 
> 赞同：0
> 
> 时间：2012-05-22T05:48:34.817
> 
> 标签：java, android

我有一个`CustomEvent`扩展类`java.util.EventObject`。

```
public class CustomEvent extends EventObject {
public CustomEvent(Object _src) {
 super(_src);
}
private String name;
public String getName()
 {
  return name;
 }
public void setName(String name)
 {
  this.name = name;
 }
} 
```

我想在我的 Android 应用程序中以这种方式传输此对象：- `Service`> `Notification`>`Activity`

我读到传输对象的理想方法是使用 a`Parcelable`并通过 an 传递该对象，`Intent`但我不确定是否可以使此类实现`Parcelable`。如果可以，那么我的`writeToParcel(..)`和`readFromParcel(..)`方法应该如何实现？

由于`java.util.EventObject`实现了这个`Serializable`接口，即使不是，我也不能直接通过`Object`Intent 传递它`Parcelable`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:31:54.893

You can pass a `Serializable` Object via an Inent:

```
Intent intent = new Intent(...);
intent.putExtra("ser-object", someSerializableObject); 
```

You can then get this value from the `Intent` using `getSerializableExtra(String name)` method.

While `Parselable` is the Android way of passing objects around, support for `Serializable` is still present.

# android - 在后期 Web 服务中处理响应时出错

> ID：10696370
> 
> 赞同：0
> 
> 时间：2012-05-22T05:48:47.593
> 
> 标签：android, memory, virtual

我正在调用网络服务在地图上绘制点。我在回复中找到了 750 条记录。当页面第二次加载时，它向我显示了这个错误。

致命异常： org.apache.http.util.CharArrayBuffer.toString(CharArrayBuffer.java:261) 的 java.lang.String.(String.java:513) 的 org.apache.http 的 Thread-26 java.lang.OutOfMemoryError .util.EntityUtils.toString(EntityUtils.java:141) 在 org.apache.http.util.EntityUtils.toString(EntityUtils.java:146) 在 org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java :76) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657) 上的 org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)。 http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616) at com.roundmenu.Nearme.run(Nearme.java: 583）在java.lang。线程.run(线程.java:1019)

```
@Override
public void run() {
    try {
        HttpGet post = null;

        Log.e("", "Share.isfromfilter =  " + Share.isfromfilter);
        if (Share.isfromfilter) {

            Log.e("", "Teset 1");

            Log.e("", "Share.CuisineValue =  " + Share.CuisineValue);

            if (Share.CuisineValue.equalsIgnoreCase("")) {
                Log.e("", "Teset 2");
                post = new HttpGet("my url here");
            } else {
                Log.e("", "Teset 3");
                post = new HttpGet("my url here");
            }

        } else {
            Log.e("", "Teset 4");
            post = new HttpGet("my url here");

        }
        post.addHeader("apikey", "880639B3638597349AC1BE6F70FC5682");
        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        response = client.execute(post, responseHandler);
        System.out.println("----------------------------------------");
        System.out.println(response);

        handler.sendEmptyMessage(0);
    } catch (Exception e) {
        e.printStackTrace();
        handler.sendEmptyMessage(1);
    }
} 
```

在执行此代码期间，我也收到了 VM Out of Budget 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:03:38.533

Android Dalvik VM 有堆限制。你能告诉 Web 服务返回多少字节吗？如果数据量很大，建议增量读取数据，而不是全部传输到一个大的字符串缓冲区中。

请参考[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)

```
HttpResponse response = httpclient.execute(post);
HttpEntity entity = response.getEntity();

if (entity != null) {
  InputStream instream = entity.getContent();
  try {
    BufferedReader reader = new BufferedReader(
             new InputStreamReader(instream));
    String data = null;
    while ((data = reader.readLine()) != null) {
      ...
    }
  }
} 
```

# java - 我在android中的应用程序中的屏幕旋转问题？

> ID：10696372
> 
> 赞同：1
> 
> 时间：2012-05-22T05:48:53.533
> 
> 标签：java, android, rotation, screen-orientation

我为我的应用程序设置屏幕方向的代码不起作用我的手机挂起？

```
 Display display = getWindowManager().getDefaultDisplay();
    float width = display.getWidth();
    float height = display.getHeight();
    if (width>height)
    {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
    else setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    // then

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR); 
```

**编辑1：解决**

```
 and also can i prevent the content to reload on screen rotation? 
```

**编辑 2：**

> ```
>  CAn i prevent activity to reload when call is recieved specially problem is with list view it just flushed. 
> ```

请回答**编辑2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:06:29.107

在你的 android 清单中使用这个

```
android:configChanges="orientation" 
```

景观

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

如果你想要未指定

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:52:04.507

将此添加到应用程序下的活动标签中

```
android:screenOrientation="portrait" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:52:28.497

我不太了解您的标准，但设置屏幕方向的方法是：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

或者

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:58:31.960

我的标准与回答一些问题

```
Display display = getWindowManager().getDefaultDisplay();
float width = display.getWidth();
float height = display.getHeight();
if (width>height)
{
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}
else setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

# java - ORA-27101 使用通用连接池

> ID：10696375
> 
> 赞同：1
> 
> 时间：2012-05-22T05:49:07.233
> 
> 标签：java, oracle, jdbc, ucp

我目前在我的 java 服务器应用程序中面临 ORA-27101。当它开始时它工作了几天，然后出现故障并且应用程序丢失了。我只能在我的日志中看到这些 ORA。数据库可能关闭了一两个小时。但在那段时间之后，该应用程序也再也没有恢复运行。重新启动后一切都很好。

所以我的问题是：是什么导致了应用程序的这种行为？当此异常出现在我的应用程序中时，我该怎么办？重新启动是唯一的方法还是我可以在应用程序中处理这个？

操作系统是 Windows Server 2008，Oracle 数据库是 11g。我正在使用 oracle jdbc 驱动程序和通用连接池来管理多个连接。

最后是堆栈跟踪：

```
java.sql.SQLException: Exception while getting connection: oracle.ucp.UniversalConnectionPoolException: cannot get connection from datasource: java.sql.SQLRecoverableException: ORA-01034: ORACLE not available
ORA-27101: shared memory realm does not exist
           at oracle.ucp.util.UCPErrorHandler.newSQLException(UCPErrorHandler.java:488)
           at oracle.ucp.util.UCPErrorHandler.throwSQLException(UCPErrorHandler.java:163)
           at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:928)
           at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:863)
           at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:855) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:00:21.033

此错误表示您的数据库已关闭。

> ORA-01034 ORACLE 不可用原因：Oracle 没有启动。可能的原因包括： - SGA 需要的空间多于为其分配的空间。
> 
> *   指向实例的操作系统变量定义不正确。
> 
> 措施：请参阅随附的消息以了解可能的原因并更正其他消息中提到的问题。如果 Oracle 已初始化，则在某些操作系统上，验证 Oracle 是否已正确链接。请参阅特定于平台的 Oracle 文档。

此错误有多种原因：

1.  服务器崩溃
2.  某些数据库操作导致数据库处于不稳定状态。
3.  没有足够的空间

# html - 搜索表单不显示

> ID：10696378
> 
> 赞同：0
> 
> 时间：2012-05-22T05:50:01.040
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我正在构建一个玩具 Rails 应用程序。我为我的 Post 对象生成了一个脚手架。现在，我想为脚手架生成的视图添加一些搜索功能。我正在关注[http://railscasts.com/episodes/37-simple-search-form](http://railscasts.com/episodes/37-simple-search-form)添加搜索功能。

我添加到 app/views/posts/index.html.erb

```
<% form_tag posts_path, :method => 'get' do %>
  <p>
     <%= text_field_tag :search, params[:search]   %>
     <%= submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

然后是列表代码。

在 controllers/posts_controller.rb 我有

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.search(params[:search])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end 
```

在 model/post.rb 我有

```
class Post < ActiveRecord::Base
  attr_accessible :description, :image_url, :title
        validates :name, :presence => true
        validates :title, :presence => true,
                        :length => { :minimum => 5 }
  def self.search(search)
        if search
                find(:all, :conditions => ['name LIKE?', "%#{$search}%"])
        else
                find(:all)
        end
  end
end 
```

当我运行服务器时，我没有收到任何错误，但没有显示表单。我查看了生成的页面源，那里没有表单。到底是怎么回事？有没有办法调试这样的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:58:34.433

从 Rails 3 开始，`form_tag`助手本身返回它生成的 html。需要等号。所以请将第一行更改为

```
<%= form_tag posts_path, :method => 'get' do %> 
```

这在 Rails 2 中是不同的。由于 railscasts 情节已经很老了，您也可能会遇到其他问题。

另请参阅[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:55:01.287

好的，根据[Rails 3 App not Displaying 中的 Simple Search Form](https://stackoverflow.com/q/9151655/429850)，我需要`=`在 form_tag 之前表示这是一个方法。

# sqlite - 从 SQLite 数据库中删除行：黑莓

> ID：10696386
> 
> 赞同：0
> 
> 时间：2012-05-22T05:50:52.690
> 
> 标签：sqlite, blackberry, blackberry-eclipse-plugin

我正在使用表格适配器屏幕创建一个布局，以表格方式显示数据库中的数据。我在布局的每一行中添加了一个按钮字段以删除该特定行。下面我附上了删除代码。它显示异常：SQL 逻辑错误或缺少数据库。我的查询有什么问题吗？？？创建，表，插入，检索等数据库功能没有问题。请在这里帮助我。它在 .prepare() 处给出错误；陈述。

```
 public void deletetarget(String cname) {

        Statement deletetarget = null;

        try

        {
            URI myURI = URI.create("file:///store/home/Databases/SampleDatabase.db");

            d.close();
            d = DatabaseFactory.open(myURI);

    deletetarget = d.createStatement("DELETE  FROM targetCity WHERE KEY_CITYNAME         ='"+cname+"'");

            deletetarget.prepare();

                deletetarget.execute();
            deletetarget.close();
            d.close();  
        }

        catch ( Exception e ) 

        {         

            System.out.println("Delete Statement Exception "+e);
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:13:37.753

在创建 URI 之前关闭数据库。

像这样更改您的查询编写...

```
deletetarget = d.createStatement("DELETE  FROM targetCity WHERE KEY_CITYNAME = '"+cname+"'"); 
```

# c# - 配置系统初始化失败

> ID：10696390
> 
> 赞同：3
> 
> 时间：2012-05-22T05:51:00.803
> 
> 标签：c#, app-config

我正在使用 2.0 .Net 框架在 C# Visual Studio 2010 中编写一个小程序。我正在尝试从 App.config 文件中读取值。我的配置文件看起来像这样......

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup> 
  </configSections>
  <applicationSettings>
    <add key="Path" value ="C:\Program Files\MyApp\bin\" />
    <add key="UserName" value="UserName" />
    <add key="Pword" value="Password" />
  </applicationSettings>
</configuration> 
```

然后在我的代码中：

```
path = ConfigurationManager.AppSettings["Path"]; 
```

我收到运行时错误“配置系统无法初始化”。从我读过的内容来看，configSection 必须是文件中的第一个，但我已经这样做了，但仍然出现错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-06T09:15:45.550

放在`<configSections>`前面`<appSettings>`，它应该可以工作

```
<configuration>
<configSections>
...
</configSections>
<appSettings>
...
</appSettings>
</configurations> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:25:56.913

我已经解决了，标签`applicationSettings`应该被称为`appSettings`. 然后我可以摆脱`sectionGroup`只留下这个的标签。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
  </configSections>
  <appSettings>
    <add key="Path" value="C:\Program Files\MyApp\bin\" />
    <add key="UserName" value="username" />
    <add key="Pword" value="password" />
  </appSettings>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:12:16.987

可能是配置文件已损坏且无法读取。删除现有的 .Config 文件并创建一个具有相同名称和设置的新文件。

通过使用相同的做法，我已经多次解决相同的问题。

```
 <add key="Path" value ="C:\\Program Files\\MyApp\bin\\" /> 
```

如果您想在代码中使用多个路径，请使用[组合路径](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:52:53.767

我可能在这个问题上很遥远，你应该避开你的反斜杠。即`C:\Program Files\MyApp\bin\`变成`C:\\Program Files\\MyApp\\bin\\`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T09:21:19.400

请检查下图...您需要将密钥添加到标签中。

![在此处输入图像描述](../Images/5565fdef43fea633a99e07738bfbb5c4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-01T10:06:12.940

我知道这是一个非常晚的添加，但只是想如果它会帮助其他人，为什么不呢。当谈到使用“applicationSettings”时，请注意你不能混合使用“applicationSettings”的“settings”和“appSettings”的“add”，换句话说，你不能拥有

```
<setting name="Name You choose" serializeAs="String">
        <value>True</value>
      </setting> 
```

和

```
<add key="Name You choose" value="1000" /> 
```

在同一个 App.config 文件中。

# iphone - 将 NSData 转换为字节数组

> ID：10696391
> 
> 赞同：1
> 
> 时间：2012-05-22T05:51:07.270
> 
> 标签：iphone, objective-c, ios, xcode, nsdata

我想将 NSData 转换为字节数组，下面给出的是我使用过的代码

```
    NSData *imageData = UIImagePNGRepresentation(recipeImage.image);
    NSUInteger len = [图像数据长度];
    字节 *byteData = (Byte*)malloc(len);
    memcpy(byteData, [imageData 字节], len);
    NSLog(@"%8s",byteData);

```

但是当我将 byteData 发布到下面给出的 web 服务时，它给了我一个错误

“服务器无法处理请求。---> 参数无效。”

当我打印 byteData 这就是我在控制台中得到的

```
âPNG

```

我尝试在文档中搜索 NSData 并找到了 getBytes 方法，但这也没有任何用处，我仍然遇到同样的错误。

您能否让我从上面的代码中知道我错在哪里或者我在将数据转换为字节数组时犯了什么错误

编辑：我试过使用

```
[imageData getBytes:&byteData 长度:length];

```

它给了我一个糟糕的访问错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:04:58.863

尝试这个

```
NSData *imageData = UIImagePNGRepresentation(recipeImage.image);  
NSUInteger len = [imageData length];
Byte *byteData= (Byte*)malloc(len);
[imageData  getBytes:byteData length:len]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-09T12:06:29.543

你的问题是完全不同的地方。

您正在向 Web 服务发送数据，但失败了。**向我们展示您如何将数据发送到网络服务**。将 NSData 转换为字节数组是绝对没有意义的。imageData.bytes 是一个字节数组，你将得到的一样好。

# ruby - 搜索coffee和scss方法的源码

> ID：10696394
> 
> 赞同：2
> 
> 时间：2012-05-22T05:51:34.703
> 
> 标签：ruby, coffeescript, sinatra, sass, padrino

在我的 Sinatra/Padrino 应用程序中，我有

```
require 'sass'
require 'coffee-script'

# Routes to COFFEE-JS and SCSS-CSS
get '/javascripts/:name.js' do
  content_type 'text/javascript', charset: 'utf-8'
  coffee :"../../public/javascripts/coffee/#{params[:name]}"
end

get '/stylesheets/:name.css' do
  content_type 'text/css', charset: 'utf-8'
  scss :"../../public/stylesheets/scss/#{params[:name]}"
end 
```

我想知道，在哪里可以找到方法**coffee**和**scss**的定义。我想学习这个方法的源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:32:41.897

正如@hugo 所说，您可以（我以咖啡为例）从这里开始：

[https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L628](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L628)

然后：

[https://github.com/rtomayko/tilt/blob/master/lib/tilt/coffee.rb#L45](https://github.com/rtomayko/tilt/blob/master/lib/tilt/coffee.rb#L45)

最后：

[https://github.com/rtomayko/tilt/blob/master/lib/tilt/coffee.rb#L45](https://github.com/rtomayko/tilt/blob/master/lib/tilt/coffee.rb#L45)

[https://github.com/sstephenson/execjs/blob/master/lib/execjs/runtime.rb#L43](https://github.com/sstephenson/execjs/blob/master/lib/execjs/runtime.rb#L43)

根据您的 js 运行时：

[https://github.com/sstephenson/execjs/blob/master/lib/execjs/external_runtime.rb#L46](https://github.com/sstephenson/execjs/blob/master/lib/execjs/external_runtime.rb#L46)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:17:27.250

通常，gem 作者将指向源代码的链接放在 ruby​​gems 主页中

```
https://rubygems.org/gems/<gem_name> 
```

对于您提到的宝石，可以找到来源

[https://github.com/josh/ruby-coffee-script](https://github.com/josh/ruby-coffee-script)

和

[https://github.com/nex3/sass](https://github.com/nex3/sass)

# c# - WPF D3 动态数据显示多轴

> ID：10696407
> 
> 赞同：1
> 
> 时间：2012-05-22T05:52:35.517
> 
> 标签：c#, wpf, dynamic-data-display

我有一个动态数据显示图表。我正在使用 ChartPlotter。它有一个默认的 X 和 Y 轴。我需要添加一个额外的 X 轴和另外两个 Y 轴。如何在 XAML 中并在代码中动态实现这一点？

开发人员可以使用这些图表通过提供轴编号的枚举，例如 Y1、Y2、Y3 等或 X1、X2，将数据附加到这些轴中的任何一个。目前我想拥有上述有限数量的轴。

有人可以帮我解决这个问题吗？我知道要添加 Injected Plotter，但我是否必须添加多个注入绘图仪？如果轴的数量确实增加了，我还需要添加多少？感觉有点低效，因此关于向单个 ChartPlotter 添加轴的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:33:20.817

在动态数据显示中，每个 ChartPlotter 都有一个 MainHorizo​​ntalAxis 和一个 MainVerticalAxis。最重要的是，您可以添加新轴。您可以创建一个新的 Axis 对象并将其添加到您的绘图仪中非常容易。您可以像这样将轴添加到绘图仪子级：

```
plotter.Children.Add(axis); 
```

您将预先设置轴对象以匹配您想要的行为，然后将轴添加到绘图中。

**编辑**

在我看来，可以创建多个 Graph 对象并将它们也添加到绘图仪子级中。看起来您可以分配哪些轴应用于哪个图形对象，然后相应地映射它们。[从此](http://dynamicdatadisplay.codeplex.com/discussions/370098)讨论中获取的信息，以及那里发布的代码。

# c# - How do I prevent a memory leak with UIImage.FromImage(context.ToImage())?

> ID：10696412
> 
> 赞同：1
> 
> 时间：2012-05-22T05:53:01.537
> 
> 标签：c#, xamarin.ios, uiimage, byte, pixels

I have the following function to convert a byte array of pixels into an image. However, I have a memory leak in the line:

unpackedImage = UIImage.FromImage(context.ToImage());

When I comment out the line above, the leak goes away. The leak is so bad that iOS is killing my app within about 30 seconds of startup. It's because of this line of code.

How do I prevent this memory leak? Is there a better way to do what I am trying to do?

```
 public static void DrawCustomImage2(IntPtr buffer, int width, int height, int bytesPerRow, CGColorSpace colSpace, byte[] rawPixels, ref UIImage unpackedImage)
    {
        GCHandle pinnedArray = GCHandle.Alloc(rawPixels, GCHandleType.Pinned);
        IntPtr pointer = pinnedArray.AddrOfPinnedObject();

        // Set a grayscale drawing context using the image buffer
        CGBitmapContext context = new CGBitmapContext(pointer, width, height, 8, bytesPerRow, colSpace, CGImageAlphaInfo.None);

        // Turning off interpolation and Antialiasing is supposed to speed things up
        context.InterpolationQuality = CGInterpolationQuality.None;
        context.SetAllowsAntialiasing(false);

        try
        {
            unpackedImage = UIImage.FromImage(context.ToImage());   // Convert the drawing context to an image and set it as the unpacked image
        } finally
        {
            pinnedArray.Free();
            if (context != null)
                context.Dispose();
        }
    } 
```

Here is the profiling screenshot (checked items all disappear when the critical line of code is commented out). You can see how the checked items (especially the Malloc) grow over time.

![Profiling Screenshot](../Images/53ce3890aaf0689425b94a0fa708a4de.png)

Here is the zoom-in view on the Malloc 1.50KB. You can see in the Extended Detail pane on the right that it is calling CGBitmapContextCreateImage and CGDataProviderCreateWithCopyOfData and then a malloc. ![Malloc 1.50KB Profiling Screenshot](../Images/cf72fba4eeccbed0e159835855133fb3.png)

Here is the profiling screenshot with Rolf's suggestion. I ran the image loop twice. You can see that it cleans up the extra memory at the end of the first loop, but the system didn't clean it up fast enough the second time and iOS killed my app (you can see the low memory warning flags in the top right corner). ![enter image description here](../Images/97fff21c60ab88deb4294e8c6093537f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:21:16.367

Do it like this:

```
using (var pool = new NSAutoreleasePool ()) {
    using (var img = context.ToImage ()) {
        unpackedImage = UIImage.FromImage (img); 
    }
} 
```

# c - 释放 C 中结构的内存数组

> ID：10696413
> 
> 赞同：1
> 
> 时间：2012-05-22T05:53:02.397
> 
> 标签：c, arrays, malloc, free

假设以下情况：

```
typedef struct {
    int ID1;
    int ID2;
    char string[256];
} Reg; 
```

我动态创建一个数组，这个结构：

```
Reg *myReg = (Reg*) malloc(sizeof(Reg)*100); //array of type Reg with 100 positions. 
```

在整个示例系统中，我填充了这个数组。

有一点我不希望指针“myReg”指向这个向量。我希望他指向NULL。并且还清除了 malloc 占用的内存空间。

问题：

如果我做：

```
free(myReg); 
```

这将使 myReg 指向 NULL 并释放我分配的空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:54:39.510

> ```
> free(myReg); 
> ```
> 
> 这将使 myReg 指向 NULL 并释放我分配的空间？

它只会释放内存。即使不阅读规范，如果您查看`free`函数的声明方式，您会发现它实际上**无法**更改指针指向的内容。

```
/* Even if it wanted, `free` can't make `ptr` point to anything else. */
void free(void *ptr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:57:43.967

调用[free](http://www.manpagez.com/man/3/free/)只释放分配的内存并将其返回到堆中。它不会将您的 myReg 设置为 NULL。你必须自己做。

一种方法是编写如下宏：

```
#define MY_FREE(ptr) free(ptr); ptr = NULL; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T06:23:21.347

其他答案是正确的。

为了帮助理解为什么必须这样，考虑可能有多个指针指向这个内存，或者它的不同部分：

```
Reg *myReg = (Reg*) malloc(sizeof(Reg)*100);
Reg *myReg2 = myReg;
Reg *myReg3 = &myReg[50]; 
```

当你 free 时`myReg`，所有这些指针都不会改变。它们和以前一样指向同一块内存，但不能再使用这块内存。
您，程序员，应该将它们设置为 NULL（或者在空闲后避免使用它们）。
C 无法找到它们并将它们设置为 NULL。更现代的语言，如 Java，知道如何跟踪指向给定对象的所有指针，但 C 不这样做。

# php - PECL bbcode 包构建失败

> ID：10696415
> 
> 赞同：3
> 
> 时间：2012-05-22T05:53:34.000
> 
> 标签：php, debian, bbcode, pecl

我在 Debian Squeeze 上运行 PHP5.3，安装很顺利。我使用 dotdeb 存储库升级到 PHP5.4，发现 bbcode 函数不再起作用。然后我尝试重新安装：

```
pecl uninstall bbcode
pecl install bbcode 
```

但是它返回以下内容：

```
/tmp/pear/temp/bbcode/php_bbcode.c:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘bbcode_functions’
/tmp/pear/temp/bbcode/php_bbcode.c:65: error: ‘bbcode_functions’ undeclared here (not in a function)
make: *** [php_bbcode.lo] Error 1 
```

我已经安装了 php5-dev、build-essential 和 ubuntu-dev-tools。完整结果如下：

```
# pecl install bbcode
downloading bbcode-1.0.2.tgz ...
Starting to download bbcode-1.0.2.tgz (46,961 bytes)
.............done: 46,961 bytes
7 source files, building
running: phpize
Configuring for:
PHP Api Version:         20100412
Zend Module Api No:      20100525
Zend Extension Api No:   220100525
building in /tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2
running: /tmp/pear/temp/bbcode/configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib
checking for PHP extension directory... /usr/lib/php5/20100525
checking for PHP installed headers prefix... /usr/include/php5
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... re2c
checking for re2c version... 0.13.5 (ok)
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking whether to enable C based BBCode support... yes, shared
checking for a sed that does not truncate output... (cached) /bin/sed
checking for fgrep... /bin/grep -F
checking for ld used by cc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC -DPIC
checking if cc PIC flag -fPIC -DPIC works... yes
checking if cc static flag -static works... yes
checking if cc supports -c -o file.o... yes
checking if cc supports -c -o file.o... (cached) yes
checking whether the cc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating ./config.status
config.status: creating config.h
config.status: executing libtool commands
running: make
/bin/bash /tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2/libtool --mode=compile cc -I/tmp/pear/temp/bbcode/lib -I. -I/tmp/pear/temp/bbcode -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2/include -I/tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2/main -I/tmp/pear/temp/bbcode -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -c /tmp/pear/temp/bbcode/php_bbcode.c -o php_bbcode.lo
libtool: compile:  cc -I/tmp/pear/temp/bbcode/lib -I. -I/tmp/pear/temp/bbcode -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2/include -I/tmp/pear/temp/pear-build-root30VR7V/bbcode-1.0.2/main -I/tmp/pear/temp/bbcode -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /tmp/pear/temp/bbcode/php_bbcode.c  -fPIC -DPIC -o .libs/php_bbcode.o
/tmp/pear/temp/bbcode/php_bbcode.c:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘bbcode_functions’
/tmp/pear/temp/bbcode/php_bbcode.c:65: error: ‘bbcode_functions’ undeclared here (not in a function)
make: *** [php_bbcode.lo] Error 1
ERROR: `make' failed 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T21:18:17.373

尝试安装 1.0.3b1 版本。这应该可以用 PHP 5.4 编译。

```
pecl install bbcode-1.0.3b1 
```

# objective-c - 如何知道给定字体名称允许的最大字体大小？

> ID：10696421
> 
> 赞同：13
> 
> 时间：2012-05-22T05:54:13.563
> 
> 标签：objective-c, ios

有没有办法知道字体允许的最大尺寸。

我在做

```
textInputTextView.font = [UIFont fontWithName:currentFontName size:doubleFontSize];
frame.size = textInputTextView.contentSize; 
```

对于不同的字体，当**doubleFontSize**超过 70 时，我得到错误的 contentSize。对于某些字体，当**doubleFontSize**变量仅为 40 时，我得到错误的 contentSize。

我猜**textView.font = doubleSizeFont**对于那些特定的字体来说太大了。当字体大小在 10 到 30 之间时，一切正常。

有没有办法知道特定字体允许的最大尺寸？

细节：

我需要**来自 UITextView 的图像**。我正在使用 **UIGraphicsGetImageFromCurrentImageContext**图像生成正常。但我意识到图像质量很低。所以我试图使**TextView**框架和字体加倍。

当我用大字体写**“我是个好孩子”**时，如果**好**是最合适的词。我得到“我是男孩”最右边的单词**好**消失了我在图像的右侧得到了一些空白。**多么悲惨** :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:14:06.347

您可以使用以下代码计算内容的高度/宽度。然后调整框架的大小。这里我的宽度是固定的（290）并计算高度。

```
CGSize strSize= [DataToBeDisplayed sizeWithFont:[UIFont systemFontOfSize:17.0] constrainedToSize:CGSizeMake(290.0,99999.0)];
frame.size.height = strSize.height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:10:00.433

我相信您遇到的问题是因为您使用的是*UITextView*。文本视图继承自*UIScrollView*，因此它**不会**减小字体的大小，只会调整其内容大小并使文本可滚动。

使用*UITextField*代替，它也继承自 UIView （因此可以用作图像），但允许更好的控制。将其大小固定为您希望它在屏幕上显示的最大值，然后使用`[mylabel adjustsFontSizeToFitWidth:Y/N]`和`[mylabel setminimumfontsize:somefontsize]`方法，如果输入的文本过多，请限制它。这将为您提供清晰的大字体并在输入时动态调整它

~/行尾

# api - 交换访问令牌时出现 Google OAuth2 错误 400

> ID：10696422
> 
> 赞同：0
> 
> 时间：2012-05-22T05:54:24.250
> 
> 标签：api, oauth

使用以下 VBA 代码将有效的授权令牌交换为 Google API 中的访问令牌时，我收到“400 错误请求”错误。谁能解释为什么，我已经为此苦苦挣扎了一个多星期。

```
Dim http As MSXML2.XMLHTTP
Dim sUrl As String
Dim sUrlHeader As String
Dim svarbody As String

Set http = New MSXML2.XMLHTTP

sUrl = "https://accounts.google.com/o/oauth2/token? HTTP/1.1"

http.Open "POST", sUrl

http.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"

svarbody = "code=4%2FXAjmXiUlBXUAUGCnMvNKsxdyuJEJ.8kfzzrqo3wwTuJJVnL49Cc9gML_lbgI&" & _
"client_id=50487549202#-q27v28nvhmjhc0uobq35tjn09lhrh47r.apps.googleusercontent.com&" &         _
"redirect_uri=http%3A%2F%2Flocalhost&" & _
"scope=https%3A%2F%2Fwww.google.com%2Fcalendar%2Ffeeds&" & _
"client_secret=<secret delete for this post>&" & _
"grant_type=authorization_code"

http.send svarbody

Me.Text3 = http.status & vbCrLf & http.statusText & vbCrLf & http.responseText 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:52:47.367

根据我在 VBA 中使用 Oauth 2.0 的经验，当您多次使用代码请求令牌时会发生此错误。我根据文档和经验使用的使用顺序是：访问 GET [https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth) **一次**获取代码访问 POST [https://accounts.google.com/o/oauth2 /token](https://accounts.google.com/o/oauth2/token) **一次**用于获取令牌，之后使用令牌，只要它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:06:31.557

您可能需要在您的 Google 帐户中设置帐单信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:23:30.407

这是一个非常普遍的问题。您可以尝试通过许多方法和测试来解决它......但是......

您应该首先尝试的真正方法是：

更新您的服务器/计算机 WINDOWS 时钟，使用 time.nist.gov（或兄弟）。双击您的 Windows 小时日期（在屏幕底部并以这种方式更改 Internet 时间）

SntsDev

# android - android中的返回功能

> ID：10696423
> 
> 赞同：1
> 
> 时间：2012-05-22T05:54:36.137
> 
> 标签：android, android-layout, android-intent

我正在开发一个从 LoginPage 开始的应用程序。当用户登录时，他会移动到主屏幕，其中存在不同部门的网格视图。

除登录页面外，应用程序的每个页面都有一个页脚，页脚有不同的图标，如主页、注销等。

我想使用移动返回按钮添加条件返回功能。一些条件如下：

1) LoginPage ---> Main Screen ---> 在后台用户应该注销并进入登录页面

2) 主屏幕 --> 任何部门 ---> 任何子部门 --> 如果用户按返回按钮，则按相同顺序返回

3）用户在应用程序中的任何位置--->如果从页脚按主页按钮--->进入主屏幕->没有返回上一页的功能，它应该遵循条件1。

4）如果用户在登录页面上，那么他将在按下返回按钮时退出应用程序

5）如果用户在主屏幕上，那么用户应该注销并在看到返回按钮时进入登录页面

我已经尝试在 Manifest 中使用“noHistory=true”，在 Activity 文件中使用 Intent 标志。

任何机构都可以建议我解决它的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:58:14.530

1.  应该不是问题，您所要做的就是覆盖该`onBack`功能并添加注销过程。

2.  没问题，后退按钮的正常行为正是如此。

3.  **不要这样做！！！不良行为**。

4.  返回按钮的正常行为。

5.  这是第一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:02:49.970

这用于在后按时退出应用程序。

```
@Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            // TODO Auto-generated method stub
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                finish();
                System.exit(0);
            }
            return super.onKeyDown(keyCode, event);
        } 
```

如果你只想回来然后从上面的代码中删除 System.exit(0) 。通过使用它，您可以管理您想要的所有条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:23:55.873

全局使用堆栈来保存屏幕顺序。堆栈必须在应用程序级别可用。并在单击后退按钮时获取屏幕顺序。为屏幕顺序编写开关盒并启动该活动。就是这样。

例如。

```
crate a class class MyStack{
//here declare a static stack 
//create setter,getter method for assinging values to stack
} 
```

当使用 setter 方法在堆栈中分配屏幕值时启动新活动时，如果您从主屏幕开始一个活动，将 1 分配到堆栈中，您正在启动子屏幕将 2 分配到堆栈中。

当点击返回时获取该值

```
switch(value){
case 1: //start mainscreen break;
case 2: //start sub screen break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:57:29.633

试试这个来捕获后退按钮上的事件

```
public boolean onKeyDown(int keyCode, KeyEvent event){
    if(keyCode == KeyEvent.KEYCODE_BACK) {
            Intent Act2Intent = new Intent(thisActivity, Activity2.class);              
            startActivity(Act2Intent);          
            finish();
            return true;
    }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T06:00:56.557

在每个活动上实现 OnBackPress()。覆盖它并添加您想要的功能，例如注销、清除历史堆栈和启动新的（以前的）活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T06:13:25.987

我认为最简单的方法可能是覆盖“主屏幕”活动中的后退按钮，以便在按下后退按钮时您可以执行以下操作：1.执行注销逻辑：2.显式调用您的登录页面

这可能会给出您正在寻找的行为。关于如何覆盖后退按钮，您可以参考此链接： [http ://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html)

希望这可以帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T06:33:14.060

据我了解，您不能覆盖主页按钮的功能。默认情况下，它通过调用 onPause() 以当前状态最小化您的应用程序。当您再次打开应用程序时，会调用 onResume() 并从暂停的位置启动应用程序。就您的后退按钮功能而言，上述大多数答案都很好。

**尝试，**

```
@Override
public void onBackPressed()
{
finish();   //finishes the current activity and doesnt save in stock
Intent i = new Intent(CurrentActivity.this, Login.class);
i.addflags(Intent.flag_activity_no_history);
startActivity(i);
} 
```

# ios-ui-automation - iOS UI 自动化 - 如何在 tableView 中查找一行

> ID：10696428
> 
> 赞同：1
> 
> 时间：2012-05-22T05:54:49.903
> 
> 标签：ios-ui-automation

我想使用 UI 自动化查看 tableView 并找到与某个标签匹配的行，然后选择该行。有没有办法用 UIAutomation 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:28:45.113

UIAutomation 框架使用 UI 元素层次结构来定位您要对其执行自动化操作的特定元素。从应用程序的 UI 元素层次结构中找到表格视图后，您可以调用函数`.cells().firstWithName(The value of the name property of that cell).tap()`. 此函数将搜索表的所有行并点击名称与您作为参数传递的名称字符串匹配的第一行。还有一个函数`.withName(The value of the name property of that cell)`返回一个行对象数组，所有这些对象都包含与您作为参数传递的名称字符串匹配的名称。

ps 上述函数仅适用于 name 属性。

希望这可以帮助！

# c - calloc 和 malloc 后跟 memset 有什么区别？

> ID：10696430
> 
> 赞同：2
> 
> 时间：2012-05-22T05:55:09.117
> 
> 标签：c, malloc, calloc

> **可能重复：**
> [c malloc 和 calloc 之间的区别](https://stackoverflow.com/questions/1538420/c-difference-between-malloc-and-calloc)
> [为什么 malloc+memset 比 calloc 慢？](https://stackoverflow.com/questions/2688466/why-mallocmemset-slower-than-calloc)

calloc 和 malloc 后跟 memset 有什么区别？如果我用 malloc 后跟 memset 替换对 calloc 的所有调用，它会一样吗？

如果是这样，那为什么要分别提供两个函数 malloc 和 calloc 呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T06:01:16.133

虽然`calloc()`总是用零 ( `'\0'`) 初始化内存区域，但该`memset()`调用允许您选择用哪些字节填充内存。

在速度方面，如果内存需要清零，`calloc()`可能会比`malloc()`+快；更快地返回未初始化的内存，但它仍然需要额外调用.`memset()``malloc()``memset()`

基本上，如果您想将内存归零，请使用`calloc()`; 如果您想让它保持未初始化状态，请使用`malloc()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:54:25.780

一个重要的区别是，如果溢出，我希望`calloc(nmemb, size)`返回。如果您改为使用，则乘法溢出可能会导致您请求的缓冲区比您预期的要小（这可能会导致以后出现安全问题）。因此，如果您打算用电话替换电话，则需要小心。`NULL``nmemb * size``malloc(nmemb * size)``calloc``malloc`

# java - Java或MySQL中的密码加密？

> ID：10696432
> 
> 赞同：0
> 
> 时间：2012-05-22T05:55:11.383
> 
> 标签：java, mysql

我正在尝试在用户注册中使用 MD5 加密密码，并在登录期间匹配相同的密码。我使用 Mysql 作为我的数据库。Mysql 也提供了将密码转换为 MD5（即 MD5（密码））的选项。我想知道加密它的更好方法..是使用java代码还是mysql查询..

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T05:59:03.013

> **不要存储密码**。如果它曾经放在磁盘上，它可能会被盗。相反，**存储密码哈希**。使用正确的**[散列算法](http://www.networksorcery.com/enp/data/hashing.htm)**，如[**SHA256**](http://en.wikipedia.org/wiki/Secure_Hash_Algorithm)、**[BCrypt](http://en.wikipedia.org/wiki/Bcrypt)**或[**Salt**](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)散列。

以下是您必须查看的一些有用链接：

*   [如何最好地存储用户信息和用户登录名和密码](https://stackoverflow.com/questions/947618/how-to-best-store-user-information-and-user-login-and-password)
*   [存储数据库密码的最佳实践](https://stackoverflow.com/questions/258299/best-practices-for-storing-database-passwords)
*   [密码管理最佳实践（非常简单，不仅仅是存储或生成）](https://stackoverflow.com/questions/270485/password-management-best-practices-soup-to-nuts-not-just-storage-or-generation)
*   [加盐密码：最佳实践？](https://stackoverflow.com/questions/674904/salting-your-password-best-practices)
*   [可以将密码以纯文本形式存储在 php 变量或 php 常量中吗？](https://stackoverflow.com/questions/568657/is-it-ever-ok-to-store-password-in-plain-text-in-a-php-variable-or-php-constant)
*   [哈希算法和加密算法之间的根本区别](https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms)
*   [http://www.jasypt.org/howtoencryptuserpasswords.html](http://www.jasypt.org/howtoencryptuserpasswords.html)
*   [http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)
*   [Java - 哈希算法 - 最快的实现](https://stackoverflow.com/questions/5446080/java-hash-algorithms-fastest-implementations)
*   [Java中的快速MD5实现](http://www.twmacinta.com/myjava/fast_md5.php)
*   [https://security.stackexchange.com/questions/12009/definitely-safest-password-storage-scheme](https://security.stackexchange.com/questions/12009/definitely-safest-password-storage-scheme)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:35:42.613

这是我使用 MD5 加密的算法。它返回您的加密输出。

```
 public class CryptWithMD5 {
   private static MessageDigest md;

   public static String cryptWithMD5(String pass){
    try {
        md = MessageDigest.getInstance("MD5");
        byte[] passBytes = pass.getBytes();
        md.reset();
        byte[] digested = md.digest(passBytes);
        StringBuffer sb = new StringBuffer();
        for(int i=0;i<digested.length;i++){
            sb.append(Integer.toHexString(0xff & digested[i]));
        }
        return sb.toString();
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(CryptWithMD5.class.getName()).log(Level.SEVERE, null, ex);
    }
        return null;

   }
} 
```

您无法解密 MD5，但您可以比较输出，因为如果您在此方法中放入相同的字符串，它将返回相同的加密输出。如果要解密，您需要使用 SHA。您永远不会对用户密码使用解密。为此，请始终使用 MD5。该异常是非常多余的。它永远不会抛出它。当您将密码添加到数据库时，您会添加此方法返回的内容。登录时您可以比较它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T05:57:18.803

由于逻辑上您的应用程序和数据库可以存在于两个单独的物理盒子中，因此如果您在应用程序层加密密码然后将其移动到数据库中，这是一个更安全的选择。

从应用程序设计的角度来看，您应该考虑加密，在很早的时候对您的密码进行哈希处理，这样您的密码就不会像纯字符串一样从一层到另一层移动。

无关：

MD5容易发生[碰撞攻击](http://en.wikipedia.org/wiki/MD5)，你可以考虑使用[salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)之类的附加电子邮件或动态生成的值来防止[Rainbow Table](http://en.wikipedia.org/wiki/Rainbow_table)。

[绝对安全的密码存储方案](https://security.stackexchange.com/questions/12009/definitely-safest-password-storage-scheme)

# jquery - 如何使用 window.location.hash？

> ID：10696437
> 
> 赞同：1
> 
> 时间：2012-05-22T05:55:39.740
> 
> 标签：jquery, hash

我真的不知道哈希的概念，但根据我的理解，当用户按下 F5 键时，它可以防止页面重定向到其他页面。

我有这个 jquery 函数：

```
$('#f1').click(function()
{
    alert(window.location.hash);
    $("#body").load("sample.php");

}); 
```

HTML：

```
<a href = "#!sample" id = "f1">FUNC 1</a>
<div id = "body">
<!-- OUTPUT HERE -->
</div> 
```

它成功输出了我的 sample.php 的内容，但是当我点击键盘上的刷新按钮或 F5 时，它重定向回父页面。

我希望当我点击刷新时 sample.php 的内容将保留在正文中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:57:24.270

不，那是错误的。哈希只是一个锚点，它允许用户跳转到文档中的静态位置。

对于许多应用程序，哈希用于保存不再需要的状态，有一些技术可以更改 URL 而无需为同一域重新加载。另请参阅[MDN 站点](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。

如果您更改哈希，则不会重新加载页面，但如果用户按 F5 将重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:25:23.647

确保在刷新时加载内容的一种方法是在文档加载时调用 .load() 函数，即

```
$(function() {
    $("#body").load("sample.php");
)}; 
```

除非有非常充分的理由让您使用单击来重新加载#body div 中的内容

# javascript - jQuery UI 对话框 - 第二次显示未选择的文本

> ID：10696439
> 
> 赞同：0
> 
> 时间：2012-05-22T05:55:45.390
> 
> 标签：javascript, jquery, jquery-ui, dialog, prompt

我正在尝试使用 jQuery UI 对话框模拟内部 javascript 函数提示。几乎可以完美运行——只有一个小错误:-)

当对话框第二次显示（没有重新加载页面）时，输入字段中的文本没有被选中 - 为什么。

我使用这段代码：

```
function modalprompt(text, title, prompt, callback) {
    var newDiv = $("<div title='" + title + "'/>");

    function okreply() {
        newDiv.dialog("close");
        if (callback) callback($("#promptid").val());
    }

    function cancelreply() {
        newDiv.dialog("close");
        if (callback) callback(false);
    }
    newDiv.keyup(function (e) {
        if (e.keyCode == 13) {
            okreply();
        }
    });
    /*
  newDiv.focus(function()
  {
    this.select();
  });
  */
    var htmltext = "<p>" + text + "</p>";
    htmltext += "<input id='promptid' type='text' name='promptid' value='" + prompt + "' style='width: 100%; box-sizing: border-box; -webkit-box-sizing:border-box; -moz-box-sizing: border-box;'>";
    newDiv.html(htmltext).dialog({
        modal: true,
        width: 480,
        show: "blind",
        hide: "blind",
        focus: function (event, ui) {
            $("#promptid").select();
        },
        open: function (event, ui) {
            $("#promptid").select();
        },
        create: function (event, ui) {
            $("#promptid").select();
        },
        buttons: [{
            text: $.alerts.okButton,
            click: function () {
                okreply();
            }
        }, {
            text: $.alerts.cancelButton,
            click: function () {
                cancelreply();
            }
        }]
    });
} 
```

你可以在这里自己测试：http: [//pcrypt.dk/dev/login.php ?logout](http://pcrypt.dk/dev/login.php?logout)

只需激活链接“ModalPrompt 测试”2 次

一定与第二次显示的对话框已经创建有关。所有的 $("#promptid").select(); 调用没有任何结果就触发了，所以事后必须改变它吗？

先感谢您！本尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:03:20.517

好的，我不知道为什么它不起作用，但是添加了这个事件处理程序：

```
close: function(event, ui) { newDiv.remove(); }, 
```

行得通。因此，以某种方式，当创建了多个 div 时，所选调用会转到第一个 div 并且不会影响显示的对话框。

# sql - sql 休眠

> ID：10696444
> 
> 赞同：0
> 
> 时间：2012-05-22T05:56:42.020
> 
> 标签：sql, nhibernate

我需要将此 SQL 查询转换为 nhibernate

```
declare @i int set @i=2
while (@i>0)
begin 
insert into #tmp_table3 (id , descr , RangeType , createdate )
select  * from AgeRanges as ar where AgeRangeID in (
select AgeRangeID as id from AgeRangeDetails where  agerangeid in
(select AgeRangeID from agerangedetails group by AgeRangeID having COUNT(AgeRangeID)=2)  
and agestart =(select AgeStart from #tmp_table2 where id=@i)
and AgeEnd = (select AgeEnd from #tmp_table2 where id=@i)
and Payment = (select Payment from #tmp_table2 where id=@i)
group by AgeRangeID)
and AgeRangeType=0
and AgeRangeID<>5 
set @i=@i-1
end
select id from #tmp_table3 where id in
(select id from #tmp_table3 group by id having COUNT(id)=2) group by id 
```

有人可以帮我做到这一点。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:29:18.540

这是一段相当自定义的 SQL，它有一个 while 循环、tmp 表和变量。因此，您只能创建存储过程或使用命名查询。

a）创建一个存储过程并使用以下方法调用它：-

```
session.CreateSqlQuery("exe sp_name")... 
```

[更多细节](http://puredotnetcoder.blogspot.co.uk/2012/04/using-stored-procedures-with-nhibernate.html)...

b）在映射中创建一个命名查询并像这样调用它：-

```
session.GetNamedQuery("MyNamedQuery")... 
```

[更多细节](https://stackoverflow.com/questions/5576242/creating-class-for-stored-procedure-returning-data-from-multiple-tables)...

# javascript - 淘汰赛没有调用可见的函数

> ID：10696448
> 
> 赞同：2
> 
> 时间：2012-05-22T05:56:47.687
> 
> 标签：javascript, jquery, knockout.js

假设我有，

```
<ul data-bind="foreach: items">
    <li>        
        <span data-bind="text: name"></span>
            <span data-bind="visible: $parent.checkVisiblity"></span>
    </li>
</ul> 
```

和

```
var ViewModel = function() {
this.items = [{name: 'a'},{name: 'b'}];
 this.checkVisiblity = function(item) {
     console.log(item)
     return item.name === 'a';
     }
}; 
```

ko.applyBindings(new ViewModel());

为什么剔除不调用函数 checkVisiblity？这个怎么称呼。

[http://jsfiddle.net/cPVGg/1/](http://jsfiddle.net/cPVGg/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:05:40.063

`visible`将您的绑定更改为：

```
<span data-bind="visible: $parent.checkVisibility($data)"></span> 
```

# asp.net - 在 Sitefinity CMS 中集成完成的 ASP.NET 网站

> ID：10696449
> 
> 赞同：0
> 
> 时间：2012-05-22T05:56:54.250
> 
> 标签：asp.net, content-management-system, sitefinity

有没有办法将完成的 ASP.NET 网站集成到 Sitefinity CMS 中？包括母版页和所有东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:44:40.627

没有“快速集成”类型的解决方案。也就是说，获取现有站点并将其与 Sitefinity 集成并不是很困难。您需要：

1.  [下载并运行安装](http://www.sitefinity.com/documentation/documentationarticles/installation-and-administration-guide/install-sitefinity/downloading-and-installing-sitefinity)
2.  获取您的母版页并将[它们转换为模板](http://www.sitefinity.com/documentation/documentationarticles/designer-s-guide/page-templates/creating-a-template-using-master-pages)
3.  [创建您的页面](http://www.sitefinity.com/documentation/documentationarticles/user-guide/pages)并[添加您的内容](http://www.sitefinity.com/documentation/documentationarticles/user-guide/website-content)

# php - 如何加密文件和附件在 php 中发送？

> ID：10696450
> 
> 赞同：1
> 
> 时间：2012-05-22T05:57:00.183
> 
> 标签：php

有谁知道如何加密文件和附件在 php 中发送？

示例：如果我有一个 csv 文件，请调用 test.csv。我可以加密文件然后附加并将其发送给某人的任何方式。另外，如何从另一端解密文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:18:50.423

将文件放入 $file_str：

```
$file_string = file_get_contents("text.csv"); 
```

[通过mcrypt](http://www.php.net/manual/en/function.mcrypt-encrypt.php)加密

```
$key = "mykey";
$data = mcrypt_encrypt(MCRYPT_RIJNDAEL_256,$key,$file_string,MCRYPT_MODE_CBC,$key); 
```

在客户端解密

```
$file_string = mcrypt_decrypt(MCRYPT_RIJNDAEL_256,$key,$data,MCRYPT_MODE_CBC,$key); 
```

再次创建文件

```
file_put_contents("text.csv",$file_string); 
```

# c# - C#：IEnumerable 的循环枚举

> ID：10696452
> 
> 赞同：10
> 
> 时间：2012-05-22T05:57:09.963
> 
> 标签：c#, ienumerable, ienumerator

我当前的应用程序中有命令层次结构。

```
public interface ICommand
{
    void Execute();
} 
```

因此，有些命令是有状态的，有些则不是。

我需要在命令执行期间以循环方式枚举 IEnumerable 以实现某些命令。

```
public class GetNumberCommand : ICommand
{
    public GetNumberCommand()
    {
        List<int> numbers = new List<int>
            {
                1, 2, 3
            };
    }

    public void Execute()
    {
        // Circular iteration here.
        // 1 => 2 => 3 => 1 => 2 => 3 => ...
    }

    public void Stop()
    {
        // Log current value. (2 for example)
    }
} 
```

`Execute`时不时调用，所以需要存储迭代状态。

如何实现该循环枚举？

我找到了两个解决方案：

1.  使用`IEnumerator<T>`界面。看起来像：

    ```
     if (!_enumerator.MoveNext())
     {
         _enumerator.Reset();
         _enumerator.MoveNext();
     } 
    ```

2.  使用循环`IEnumerable<T>`（`yield`永远相同的序列）：[“实现循环迭代器”-HonestIllusion.Com](https://honestillusion.com/2007/02/28/implementing-a-circular-iterator.html)。

也许，有更多的方法来实现它。
你会推荐使用什么，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T06:03:59.530

而不是处理 IEnumerator 接口，

```
foreach (var x in GetSomething())
{
     if (someCondition) break;
}

public IEnumerable<int> GetSomething()
{
    List<int> list = new List<int>() { 1, 2, 3 };
    int index=0;

    while (true)
        yield return list[index++ % list.Count];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-15T16:23:41.073

这是我刚刚作为扩展实现的一个。

```
using System.Collections;
using System.Collections.Generic;
using System.Linq;

namespace DroopyExtensions
{
    public static class CircularEnumaratorExtensionMethod
    {

        public static IEnumerator<T> GetCircularEnumerator<T>(this IEnumerable<T> t) 
        {
            return new CircularEnumarator<T>(t.GetEnumerator());
        }

        private class CircularEnumarator<T> : IEnumerator<T>
        {
            private readonly IEnumerator _wrapedEnumerator;

            public CircularEnumarator(IEnumerator wrapedEnumerator)
            {
                this._wrapedEnumerator = wrapedEnumerator;
            }

            public object Current => _wrapedEnumerator.Current;

            T IEnumerator<T>.Current =>  (T)Current;

            public void Dispose()
            {

            }

            public bool MoveNext()
            {
                if (!_wrapedEnumerator.MoveNext())
                {
                    _wrapedEnumerator.Reset();
                    return _wrapedEnumerator.MoveNext();
                }
                return true;
            }

            public void Reset()
            {
                _wrapedEnumerator.Reset();
            }
        }
    }   
} 
```

要使用它，您所要做的就是

```
using DroopyExtensions;

class Program
{
    static void Main(string[] args)
    {
        var data = new List<string>() {"One", "Two", "Tree"};
        var dataEnumerator = data.GetCircularEnumerator();
        while(dataEnumerator.MoveNext())
        {
            Console.WriteLine(dataEnumerator.Current);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:00:52.847

```
while (!stop)
{
   foreach (var i in numbers)
   {
     // do something
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-13T10:24:33.447

您可以使用此扩展方法：

```
public static IEnumerable<T> Cyclic<T>(this IEnumerable<T> @this)
{
    while (true)
        foreach (var x in @this)
            yield return x;
} 
```

以这种方式：

```
public class GetNumberCommand : ICommand
{
    private readonly IEnumerator<int> _commandState = new[] { 1, 2, 3 }.Cyclic().GetEnumerator();

    public void Execute()
    {
        _commandState.MoveNext();
        var state = _commandState.Current;

        //
        // Do stuff with state
        //
    }

    public void Stop()
    {
        var state = _commandState.Current;                
        // Log state value. (2 for example)
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-22T06:08:11.560

我认为，最舒适的方法是使用自定义枚举器实现自定义集合并在其中封装循环逻辑。

```
class Collection<T> : IEnumerable<T>
{
  bool circle;

  List<T> collection = new List<T>();

  public IEnumerable<T> IEnumerable<T>.GetEnumerator()
  {
     if(circle) return new CustomEnumerator<T>(this);
     return circle.GetEnumerator();
  }
}

class CustomEnumerator : Enumerator<T> {} 
```

像这样的东西......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-13T20:02:22.543

您可以编写一个没有收益返回的循环枚举。

```
 public class CircularEnumerable<T> : IEnumerable<T>
  {
    public CircularEnumerable (IEnumerable<T> sequence)
    {
      InfiniteLoop = sequence.Concat (this);
    }

    private readonly IEnumerable<T> InfiniteLoop;

    public IEnumerator<T> GetEnumerator ()
    {
      return InfiniteLoop.GetEnumerator ();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator ()
    {
      return InfiniteLoop.GetEnumerator ();
    }
  }

public class GetNumberCommand : ICommand
{
    public GetNumberCommand()
    {
        List<int> numbers = new List<int>
            {
                1, 2, 3
            };
        infiniteLoopOnNumbers = new CircularEnumerable<int>(numbers).GetEnumerator();
    }

    IEnumerator<int> infiniteLoopOnNumbers; 

    public void Execute()
    {
        infiniteLoopOnNumbers.MoveNext();
    }

    public void Stop()
    {
        int value = infiniteLoopOnNumbers.Current;
    }
} 
```

# java - 我正在制作动画的这个正方形在它后面留下了痕迹，有人能找出原因吗？

> ID：10696457
> 
> 赞同：3
> 
> 时间：2012-05-22T05:57:19.710
> 
> 标签：java, swing, animation, paintcomponent, graphic

感谢您查看此问题。我想我只是沮丧地挠了挠头骨。所以我得到的是一个包含“JPanel”的“JFrame”。'JPanel' 包含一个彩色的小方块，当我单击窗口时它应该会移动 X 像素。

好吧，基本上一切都按其应有的方式运行，但有一个例外。当蓝色方块向右移动时，它会在其后面留下一串其他方块。它不应该离开踪迹，但是，当我重新调整窗口大小时，踪迹消失了。

催化剂.java

```
package Prototype;

import java.awt.*;

public class Catalyst {

public static void main(String[] args){
    World theWorldInstance = new World("Prototype", 100,100, 600,100);  /*title,xpos,ypos,width,height*/
}

} 
```

世界.java

```
package Prototype;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class World extends JFrame  {

Level mainPanel;    

public World(String title, int x, int y, int width, int height) {

    setTitle(title);
    setBounds(x,y,width,height);
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setBackground(new Color(0x00000000));
    initLevel();

}

public void initLevel(){
    mainPanel = new Level();
    Container visibleArea = getContentPane();
    visibleArea.add(mainPanel);
    setVisible(true);
    add(mainPanel);
}

} 
```

级别.java

```
package Prototype;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Level extends JPanel implements MouseListener, ActionListener {
Square x;

public Level() {
    System.out.println("This is working correctly[JPANEL Cons]");
    addMouseListener(this);
    x = new Square();
}

public void paintComponent(Graphics g){
    x.draw(g);
}

public void actionPerformed(ActionEvent e){
}

public void mousePressed(MouseEvent e){
    requestFocus();
    x.move();
    repaint();
    System.out.println("Focus Acquired");

}

public void mouseClicked(MouseEvent e) {}
public void mouseReleased(MouseEvent e) {}
public void mouseExited(MouseEvent e) {}
public void mouseEntered(MouseEvent e) {}
} 
```

Square.java

```
package Prototype;

import java.awt.*;

public class Square {

private Point position;
private int size;
private final int displacement;

public Square(){
    position = new Point(10,10);
    size = 20;
    displacement = 5;

}

public void draw(Graphics g){
    g.setColor(Color.blue);
    g.fillRect(position.x-(size/2), position.y-(size/2), size,size );
    g.setColor(Color.black);
    g.drawRect(position.x-(size/2), position.y-(size/2), size,size );

}

public void move() {
    position.x += displacement;
}
} 
```

这些都是我的文件。我希望我已经正确表达了所有内容并提供了所需的所有内容。每当我过去做过类似的事情时，这从未发生过。我想我错过了一些小东西，或者我做了一些愚蠢的事情。如果你能帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:12:39.907

还有另一种方法可以做到这一点。您可以简单地调用父对象的paintComponent 方法来清除面板。

将此添加到您的构造函数中 Level ：

```
this.setBackground(Color.BLACK); 
```

这是paintComponent中的第一次调用：

```
super.paintComponent(g); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:03:04.633

您可以使用[g.clearRect(x, y, width, height)](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#clearRect%28int,%20int,%20int,%20int%29)，并提供您希望从其中清除绘画的坐标。或者你可以给出`JPanel/JComponent`你正在绘制的整体的尺寸，虽然这样做请记住一件事，即所述绘图不是一项繁重的工作，否则过多的清洁会给绘画调用带来额外的负担。

# mongodb - 带有 redis 的 MongoDB

> ID：10696463
> 
> 赞同：97
> 
> 时间：2012-05-22T05:57:35.017
> 
> 标签：mongodb, redis, nosql

任何人都可以举例说明您何时可以从结合使用 Redis 和 MongoDB 中受益？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-05-23T13:44:06.737

Redis 和 MongoDB 可以一起使用，效果很好。一家以运行 MongoDB 和 Redis（以及 MySQL 和 Sphinx）而闻名的公司是 Craiglist。请参阅Jeremy Zawodny 的[此演示文稿](http://www.slideshare.net/jzawodn/living-with-sql-and-nosql-at-craigslist-a-pragmatic-approach)。

MongoDB 对持久的、面向文档的、以各种方式索引的数据很感兴趣。Redis 对于易失性数据或延迟敏感的半持久性数据更有趣。

以下是在 MongoDB 之上具体使用 Redis 的几个示例。

*   Pre-2.2 MongoDB 还没有过期机制。Capped collections 不能真正用于实现真正的 TTL。Redis 有基于 TTL 的过期机制，方便存储易失数据。例如，用户会话通常存储在 Redis 中，而用户数据将存储和索引在 MongoDB 中。请注意，MongoDB 2.2 在集合级别引入了低精度过期机制（例如，用于清除数据）。

*   Redis 提供了一种方便的集合数据类型及其相关操作（联合、交集、多个集合的差异等...）。在此功能之上实现基本的分面搜索或标记引擎非常容易，这是对 MongoDB 更传统的索引功能的有趣补充。

*   Redis 支持对列表进行高效的阻塞弹出操作。这可以用来实现一个 ad-hoc 分布式排队系统。它比 MongoDB 可尾游标 IMO 更灵活，因为后端应用程序可以在超时时监听多个队列，以原子方式将项目传输到另一个队列等......如果应用程序需要一些排队，则将队列存储在 Redis 中是有意义的，并将持久化的功能数据保存在 MongoDB 中。

*   Redis 还提供了发布/订阅机制。在分布式应用程序中，事件传播系统可能很有用。这又是 Redis 的一个很好的用例，而持久性数据保存在 MongoDB 中。

因为使用 MongoDB 设计数据模型比使用 Redis 容易得多（Redis 更底层），有趣的是从 MongoDB 对主要持久数据的灵活性以及 Redis 提供的额外功能（低延迟，项目到期，队列，发布/订阅，原子块等...）。这确实是一个很好的组合。

请注意，您永远不应该在同一台机器上运行 Redis 和 MongoDB 服务器。MongoDB 内存被设计为可以换出，Redis 不是。如果 MongoDB 触发一些交换活动，Redis 的性能将是灾难性的。它们应该在不同的节点上隔离。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-14T02:14:03.193

显然有*比*这更多的差异，但对于一个非常高的概述：

对于用例：

*   Redis 经常被用作分布式计算的缓存层或共享白板。
*   MongoDB 通常用作传统 SQL 数据库的交换替代品。

技术上：

*   Redis 是具有磁盘持久性的内存数据库（整个数据库需要适合 RAM）。
*   MongoDB 是一个磁盘支持的数据库，它只需要足够的内存来存储索引。

有一些重叠，但两者都使用是非常常见的。原因如下：

*   MongoDB可以更便宜地存储更多数据。
*   Redis 对于整个数据集来说更快。
*   MongoDB 的文化是“全部存储，以后再找出访问模式”
*   Redis 的文化是“仔细考虑如何访问数据，然后存储”
*   两者都有依赖于它们的开源工具，其中许多工具可以一起使用。

Redis 可以用作传统数据存储的替代品，但它最常*与*另一种普通的“长”数据存储一起使用，例如 Mongo、Postgresql、MySQL 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-22T07:03:09.143

Redis 与 MongoDB 作为缓存服务器配合得非常好。这就是发生的事情。

每当猫鼬发出缓存查询时，它都会首先转到缓存服务器。

缓存服务器将检查以前是否曾发出过该确切查询。

如果没有，那么缓存服务器将接受查询，将其发送到 mongodb，Mongo 将执行查询。

然后我们将获取该查询的结果，然后将其返回到缓存服务器，缓存服务器会将查询结果存储在自身上。

它会说，每当我执行该查询时，我都会收到此响应，因此它将在发出的查询和从这些查询返回的响应之间保持记录。

缓存服务器将接收响应并将其发送回 mongoose，mongoose 将其交给 express 并最终在应用程序中结束。

每当再次发出相同的确切查询时，mongoose 都会将相同的查询发送到缓存服务器，但是如果缓存服务器在将查询发送到 mongodb 之前发现该查询已发出，而是将响应发送到它最后一次得到的查询并立即将其发送回猫鼬。这里没有索引，没有全表扫描，什么都没有。

我们正在做一个简单的查询来说明这个查询是否被执行了？是的？好的，接受请求并立即将其发送回去，不要向 mongo 发送任何内容。

我们有 mongoose 服务器、缓存服务器 (Redis) 和 Mongodb。

在缓存服务器上，可能有一个数据存储具有键值类型的数据存储，其中所有键都是之前发出的某种类型的查询，值是该查询的结果。

所以也许我们正在查找 _id 的一堆博文。

所以也许这里的键是我们之前查过的记录的_id。

所以让我们想象一下 mongoose 发出一个新查询，它试图找到一个 _id 为 123 的博客文章，查询流入缓存服务器，缓存服务器将检查它是否有任何正在寻找 _id 的查询的结果123 个。

如果它在缓存服务器中不存在，则获取此查询并将其发送到 mongodb 实例。Mongodb 将执行查询，获得响应并将其发回。

该结果被发送回缓存服务器，缓存服务器接收该结果并立即将其发送回 mongoose，以便我们尽可能快地获得响应。

在那之后，缓存服务器也将获取发出的查询，并将其添加到已发出的查询集合中，并获取查询的结果并将其存储在查询中。

所以我们可以想象，将来我们再次发出相同的查询，它会访问缓存服务器，它会查看它拥有的所有键，然后说哦，我已经找到了那篇博文，它没有联系到 mongo，它只需要查询结果并将其直接发送给 mongoose。

我们没有做复杂的查询逻辑，没有索引，没有类似的东西。它尽可能快。它是一个简单的键值查找。

这就是缓存服务器（Redis）如何与 MongoDB 一起工作的概述。

现在还有其他担忧。我们是否永远缓存数据？我们如何更新记录？

我们不想总是将数据存储在缓存中并从缓存中读取。

缓存服务器不用于任何写入操作。缓存层仅用于读取数据。如果我们曾经写入数据，写入将始终转到 mongodb 实例，我们需要确保每当我们写入数据时，我们都会清除缓存服务器上存储的与我们刚刚在 Mongo 中更新的记录相关的任何数据。

# jquery - jQuery：为 json 响应设置编码为 utf8

> ID：10696466
> 
> 赞同：3
> 
> 时间：2012-05-22T05:57:46.230
> 
> 标签：jquery, encoding, utf-8

我在 json 中收到了对 jQuery 的回复。逻辑工作正常，但我无法让他正确编码数据（如 üäö）。

我在 SO 上搜索并找到[了这个](https://stackoverflow.com/questions/26620/how-to-set-encoding-in-getjson-jquery)问题，它建议将其更改`getJSON`为普通的 AJAX 调用。我已经这样做了，并添加了`setContentType`选项，但是，只要出现 äüö，我仍然会得到奇怪的迹象。

关于如何解决这个问题的任何想法？

```
$(function() {
    $("#cnAntragsteller").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "http://localhost/api",
                dataType: "jsonp", 
                data: {
                    search: request.term
                },
                success: function(data) {
                    response($.map(data.persons, function(item) {
                        return {
                            label: item.cn + " (PN: " + item.imPersonalNumber + ")",
                            value: item.cn,
                            pn: item.imPersonalNumber,
                            cn: item.cn,
                            cc: item.imCostCenter,
                            jb: item.imJobTitle,
                            jbd: item.imJobTitleDescription
                        }
                    }));
                }
            });
        },

        minLength: 0,
        select: function(event, ui) {
            $("#pnAntragsteller").val(ui.item.pn);
            $("#jbAntragsteller").val(ui.item.jb);
            $("#jbdAntragsteller").val(ui.item.jbd);
            $("#ouKostenstelle").val(ui.item.cc);

            $.ajax({
                url: "http://localhost/api",
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: {
                    pn: ui.item.pn
                },
                success: function(data) {
                    $("#cnLeiter").val(data.cn);
                }
            });
            }
        })
}) 
```

响应标头（第一个标头不显示数据，它只是重定向到输出）：

```
Content-Length:0
Date:Tue, 22 May 2012 06:13:41 GMT
Location:http://localhost/api/redirection
Server:Apache-Coyote/1.1

Content-Length:177
Content-Type:text/html
Date:Tue, 22 May 2012 06:13:41 GMT
Expires:0
Server:Apache-Coyote/1.1 
```

注意：这些只是响应头，请求头是否也包含重要信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T18:48:00.503

尽管您似乎已经解决了问题，但最好指出两点：

1.  jQuery`getJSON`默认使用 UTF-8。您给出的页面上接受的答案是，如果您想要 UTF-8 以外的其他编码，您可以使用`$.ajax()`. 实际上，正如该页面上的另一个答案所说，即使您使用`getJSON`，您仍然可以使用`$.ajaxSetup`来设置编码。

2.  您可能希望将 JSP 标头 contentType 更改为`'application/json; charset=utf-8'`，因为这是您的 jQuery 方面所期望的。让事情保持一致总是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:46:15.753

通过添加 JSP 标头解决了它（我不知道 JSP，所以我花了一些谷歌搜索）。在页面导入标签上添加这个解决了这个问题：

```
<%@ page import="someEngine"  contentType="text/html; charset=UTF-8" pageEncoding="ISO-8859-1"%> 
```

# c# - Asp.net 网站设计考虑和重定向

> ID：10696468
> 
> 赞同：1
> 
> 时间：2012-05-22T05:58:00.083
> 
> 标签：c#, asp.net, architecture, webforms, multilingual

我设计了英语和阿拉伯语的多语言网站，同时为两种语言保留一个页面，并为英语和阿拉伯语使用不同的 CSS 文件以及资源文件。这种方法很好，但如果我们对相同的页面有不同的功能限制了设计，那么这种方法很难处理。

我正在设计新网站，并考虑为英语和阿拉伯语版本设置单独的 .ASPX 页面。在新设计中，我将英语版本文件保存在“en”文件夹下，阿拉伯语保存在“ar”文件夹下，我将使用 Default.aspx 文件检测浏览器语言并将用户重定向到特定语言版本。

这样我可以拥有更灵活的多语言网站，但会使管理网站稍微耗时。

现在我的问题是我应该使用什么方法来重定向到特定版本，我应该使用一般的 response.redirect 方法还是我应该做一个正确的 301 重定向。

我不确定什么是最好的和搜索引擎友好的方法。

ASP.Net 4.0 Web 表单、C# 3.0 中的网站开发

如果有人可以推荐一种更好的方法或者我如何以更专业的方式设计它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:41:47.440

要回答重定向问题，如果您决定以这种方式设置解决方案，则应使用正确的 301 重定向。

为了回答正确架构是什么的更普遍的问题，我会避免将语言检测与自动重定向结合使用。有几个原因：

*   搜索引擎机器人可能不会发送任何用户字符串。出于这个原因，充其量他们只会选择一个版本的网站，最坏的情况是会出现问题，他们不会选择任何一个版本。
*   检测错误的可能性很高。例如，如果有人将他们的语言设置为法语怎么办？你把它们送到哪里？

相反，您应该做的是在导航（或您认为合适的任何地方）中进行语言切换，将您带到其他语言的相应页面。这将允许用户轻松切换到适当的语言，并确保机器人可以正确索引您网站的两个版本（作为额外的奖励，它还确保机器人看到该页面的另一个版本，搜索引擎将然后注意识别语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:53:34.817

搜索引擎实际上区分了 301 和 302 重定向。使用 302 意味着页面已临时移动到可能会混淆搜索引擎的新位置。

您可以使用 Response.RedirectPermanent 在 ASP.NET 4.0 中执行永久重定向。

此链接更详细地解释了 302 和 301 重定向之间的区别：http: [//www.hochmanconsultants.com/articles/301-versus-302.shtml](http://www.hochmanconsultants.com/articles/301-versus-302.shtml)

# ios - Metro 风格的应用程序是否可以在 iphone 和 ipad 以及 Web 应用程序上移植？

> ID：10696480
> 
> 赞同：0
> 
> 时间：2012-05-22T05:58:46.337
> 
> 标签：ios, html, windows-8, windows-runtime, winjs

我想知道的是，如果我使用 html5 和 javascript 开发一个单一的 Metro 风格应用程序，同样的应用程序也可以用于 iphone 和 ipad 吗？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:26:02.773

我相信您可以使用纯 JavaScript+HTML5+CSS3 创建一个应用程序，它应该可以跨平台工作（在浏览器中支持 Web 标准的程度）。您需要为不同的平台以不同的方式打包应用程序，或者只是像网站一样托管它，但它应该可以工作。问题是——通常当你为 Windows 8 开发 Metro 风格的应用程序时——你使用 WinJS API 或通用 WinRT API 来与操作系统交互，这不能跨平台工作，所以这真的取决于你的应用程序有多复杂，多少您想在开发中投入的精力，让它在所有平台上看起来都一样真的是正确的选择。Metro 风格的应用程序在 iOS 或 Android 设备上可能看起来有点不合适，反之亦然（尽管您可能会争辩 Metro 风格在任何地方看起来都很棒，应该是最容易移植的），而如果您尝试创建在任何地方都可以使用的东西 - 您最终可能会得到与历史上桌面 Java 应用程序一样丑陋的东西。进行共享的跨平台设计可能会适得其反。

# css - 为什么我的 CSS 过渡在鼠标移出时突然结束？

> ID：10696481
> 
> 赞同：3
> 
> 时间：2012-05-22T05:58:46.620
> 
> 标签：css, css-transitions

我只是在测试一些 CSS 转换（我是 CSS 的初学者）。所有的过渡都很顺利。但是在其中一个过渡中，当鼠标悬停完成时，过渡会顺利播放，并且一旦您将鼠标移出，它就会突然结束。在所有其他情况下，mouseover 和 mouseout 都可以正常播放。

**过渡以这种方式结束的原因是什么？**如何解决？（固定：感谢@Edwin）。*现在，请解释为什么它不能在没有变化的情况下工作。*

jsbin：~~http~~ ://jsbin.com/oposof，http : [//jsbin.com/oposof/5](http://jsbin.com/oposof/5)（我担心第一个过渡“三角形”）。

```
 #container1 >  div.triangle {
     border-bottom: 80px solid red;
     border-left: 60px solid transparent; 
     border-right: 60px solid transparent;
      width: 0px;
      height: 0px;

    -webkit-transition: all 1.2s ease-in-out;

  }

  #container1 >  div.triangle:hover {
    border-top: 80px solid green;
    border-left: 60px solid transparent; 
    border-right: 60px solid transparent;
  }

  #container1 >  div.triangle:active {
    border-left: 80px solid blue; 
    border-right: 60px solid transparent;

  }

  #container2 > div.testt {
    color: red;
    -webkit-transition: all 1s ease-in-out;
  }

  #container2 > div.testt:hover {
    color:yellow;
  }

  #container3 >  div.circle {
    border-radius: 70px;
    width: 100px;
    height: 100px;
    background: red;
    -webkit-border-radius: 50px;

    -webkit-transition: all 1.2s ease-in-out;

  }

  #container3 >  div.circle:hover {
    -webkit-border-radius: 20px;
    -webkit-transform: rotate(-45deg);
  } 
```

~~我用过`-webkit-`，所以上面的演示只适用于 chrome 和 safari。~~已添加`-moz-`现在，您也可以在 Mozilla 上对其进行测试（希望在 IE 中也是如此）。 [http://jsbin.com/oposof/5](http://jsbin.com/oposof/5)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:24:22.317

似乎突然性是由于默认情况下它在顶部没有边框，然后在悬停时它突然在顶部有边框。因此，在 mouseout 中，它所做的不是过渡，而是隐藏顶部边框，因为没有初始值可供过渡参考。

试试这个：

```
#container1 >  div.triangle {
    border-bottom: 80px solid red;
    border-top: 0 solid green;
    border-left: 60px solid transparent; 
    border-right: 60px solid transparent;
    width: 0px;
    height: 0px;

   -webkit-transition: all 1.2s ease-in-out;
} 
```

# ruby - 如何以块的形式回显 Ruby shell 脚本的输出？

> ID：10696483
> 
> 赞同：3
> 
> 时间：2012-05-22T05:58:58.460
> 
> 标签：ruby, shell, sinatra

我正在使用 Ruby、Sinatra 和 Shell 脚本设置一个小型部署系统，当我触发部署脚本时，我希望 ruby​​ 继续回显以下输出：

```
post '/' do
  `/home/deploy/deploy.sh`
end 
```

如何确保 Ruby 将回显输出并发送分块响应（以便内容可以继续加载）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:09:20.943

您在这里有两个明显的问题：

1.  *如何在运行时流式接收命令的输出？*
    *   你想用[`IO.popen`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen).
2.  在 Sinatra 中，如何将响应流式传输给用户？
    *   您想使用[Sinatra 1.3 的`stream`](http://rubydoc.info/gems/sinatra#Streaming_Responses). （另见[这个问题](https://stackoverflow.com/questions/3669674/streaming-data-from-sinatra-rack-application)。）

# c# - 如何在 C# 中给出基于服务的数据库的路径

> ID：10696484
> 
> 赞同：0
> 
> 时间：2012-05-22T05:59:01.850
> 
> 标签：c#, database

我已将**基于服务的数据库（.mdf）**添加到我的 Window 窗体应用程序项目中。但我

我无法给出数据库的正确路径。我给出的路径如下，但它

给出无法打开连接的异常

```
connection = new SqlConnection("user id=Sarao-PC\\Sarao;" +
                                      "password=sarao;server=SARAO-PC\\SQLEXPRESS" +
                                      "Trusted_Connection=yes;" +
                                      "database=Database11 " +
                                      "connection timeout=30"); 
```

**Database11 是一个基于服务的数据库**。

给出**.mdf**文件路径的正确方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:18:44.353

你应该像下面这样写：

```
Server=.\SQLExpress;AttachDbFilename=c:\mydbfile.mdf;Database=dbname; Trusted_Connection=Yes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:18:51.833

标准安全连接字符串

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:32:48.613

首先，您需要构建文件的路径。

那么如何打包 mdf 文件呢？如果你把它放在你的 VS 项目中，那么你将构建操作设置为“内容”，你将把文件放在与你的 exe 相同的目录中。所以构建路径很容易：

```
string mdfPath = Path.Combine(Application.StartupPath, "MyDb.mdf"); 
```

然后只需使用此路径创建连接字符串：

```
connection = new SqlConnection("user id=Sarao-PC\\Sarao;" +
                                      "password=sarao;" +
                                      "Trusted_Connection=yes;" +
                                      "database=Database11;" +
                                      "AttachDbFilename=" + mdfPath + ";"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:55:20.153

为什么不从数据库的属性中复制它？转到查看选项卡，选择服务器资源管理器。它在您的左侧打开，您应该在那里看到您的数据库，然后只需右键单击>属性。并从“连接字符串”字段中复制文本。

# c# - 创建 .NET 页面以嵌入其他 .NET 页面

> ID：10696488
> 
> 赞同：0
> 
> 时间：2012-05-22T05:59:19.293
> 
> 标签：c#, asp.net

我为应用程序创建了某些功能。这些功能包括 -

1.  添加用户
2.  编辑用户
3.  删除用户等

现在我把所有这些都写在单独的页面中。因此，当我必须删除用户时，我会转到`USER_DELETE.aspx`页面来执行此操作。

我的新要求是应该有一个页面可以完成所有这些操作。更具体地说，我希望在名为“USER_MANAGER”的页面中应该有单独的面板。每个面板都将具有所需的功能。

有没有一种方法可以通过创建 USER_MANAGER 页面的新 UI 并将其他页面（作为用户控件或任何其他更简单的方式）调用到 USER_MANAGER 的 UI 中来做到这一点？

我不想对各种功能的现有页面进行任何更改。我希望这个问题很清楚，我对这项技术有点新手，所以我不太确定。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:20:55.003

听起来您想将页面转换为 ASP.NET [User Controls](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)。用户控件与页面一样易于创建，并且可以以与服务器控件类似的方式使用。如果您想创建可以在项目之间共享的控件，那么您想编写[服务器控件](http://msdn.microsoft.com/en-us/library/zt27tfhy.aspx)，但这种情况可能并不常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:05:38.233

有很多方法可以解决这个问题。如果您在 gridview 中列出用户，您可以使用内联编辑并在其中进行操作。

您可以保留您编写的页面并使用模态弹出窗口或 iframe。另一种方法是使用多视图或选项卡或面板。

我会设计 UI，然后决定最适合您的应用程序的解决方案是什么，然后编写这些元素。

# java - Spring Data JPA 有没有办法使用方法名称解析来计算实体？

> ID：10696490
> 
> 赞同：164
> 
> 时间：2012-05-22T05:59:30.737
> 
> 标签：java, spring, spring-data-jpa

[Spring Data JPA](http://static.springsource.org/spring-data/data-jpa/docs/1.1.0.RELEASE/reference/html/)支持使用规范对实体进行计数。但是它有没有办法使用方法名称解析来计算实体？假设我想要一种方法`countByName`来计算具有特定名称的实体，就像`findByName`获取具有特定名称的所有实体的方法一样。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2014-12-13T12:07:04.193

从**Spring Data 1.7.1.RELEASE 开始**，您可以通过两种不同的方式进行操作，

1.  新*方法*，对计数和删除查询使用查询派生。阅读[本文](http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts)，（示例 5）。例子，

```
 public interface UserRepository extends CrudRepository<User, Integer> {
        long countByName(String name);
    } 
```

2.  老*办法*，使用`@Query`注解。
    例子，

```
 public interface UserRepository extends CrudRepository<User, Integer> {
        @Query("SELECT COUNT(u) FROM User u WHERE u.name=?1")
        long aMethodNameOrSomething(String name);
    } 
```

或者也使用`@Param`注释，

```
public interface UserRepository extends CrudRepository<User, Integer> {
    @Query("SELECT COUNT(u) FROM User u WHERE u.name=:name")
    long aMethodNameOrSomething(@Param("name") String name);
} 
```

也检查[this so answer](https://stackoverflow.com/questions/48520827/use-queryhint-when-using-jpaspecificationexecutor/48541323#48541323)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-05-24T07:48:23.840

只要不使用 1.4 版本，都可以使用显式注解：

例子：

```
@Query("select count(e) from Product e where e.area.code = ?1")
long countByAreaCode(String code); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-02-22T01:27:25.513

JpaRepository 还扩展了 QueryByExampleExecutor。所以你甚至不需要在你的界面上定义自定义方法：

```
public interface UserRepository extends JpaRepository<User, Long> {
    // no need of custom method
} 
```

然后像这样查询：

```
User probe = new User();
u.setName = "John";
long count = repo.count(Example.of(probe)); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-06-23T07:04:40.283

工作示例

```
@Repository
public interface TenantRepository extends JpaRepository< Tenant, Long > {
    List<Tenant>findByTenantName(String tenantName,Pageable pageRequest);
    long countByTenantName(String tenantName);
} 
```

从 DAO 层调用

```
@Override
public long countByTenantName(String tenantName) {
    return repository.countByTenantName(tenantName);
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-05-13T09:00:00.983

此功能已在 1.4 M1 版本中添加

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-16T14:39:45.160

显然它现在实现了[DATAJPA-231](https://jira.springsource.org/browse/DATAJPA-231)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-01-22T15:29:49.977

根据 Abel 的说法，在 1.4 版之后（在 1.4.3.RELEASE 版中测试）可以这样做：

public long countByName(String name);

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-07T19:26:27.263

```
@Autowired
private UserRepository userRepository;

@RequestMapping("/user/count")
private Long getNumberOfUsers(){
    return userRepository.count();
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-11-03T05:27:51.447

谢谢大家！现在它的工作。[数据JPA-231](https://jira.spring.io/browse/DATAJPA-231)

如果可以创建 count...By... 方法，就像 find...By 个一样，那就太好了。例子：

```
public interface UserRepository extends JpaRepository<User, Long> {

   public Long /*or BigInteger */ countByActiveTrue();
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-26T16:50:06.130

我只使用了几个星期，但我不认为这是绝对可行的，但是您应该能够通过更多的努力获得相同的效果；只需自己编写查询并注释方法名称即可。它可能并不比自己编写方法简单得多，但在我看来它更干净。

编辑：现在可以根据[DATAJPA-231](https://jira.springsource.org/browse/DATAJPA-231)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-11T06:06:38.977

根据问题[DATAJPA-231](https://jira.springsource.org/browse/DATAJPA-231)，该功能尚未实现。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-10T23:59:38.433

如果有人想根据多个条件获取计数，这里是一个示例自定义查询

```
@Query("select count(sl) from SlUrl sl where sl.user =?1 And sl.creationDate between ?2 And ?3")
    long countUrlsBetweenDates(User user, Date date1, Date date2); 
```

# javascript - 赋予文本框外观和感觉

> ID：10696492
> 
> 赞同：0
> 
> 时间：2012-05-22T05:59:43.863
> 
> 标签：javascript, jquery, css, html-lists

我一直在寻找 jQ 插件，它提供与 StackOverflow 标签相同的结果。使用[Tokeninput](http://loopj.com/jquery-tokeninput/)找到一个。问题是，它使用了`ul, li`技术，当我将它与另一个真实的文本框一起使用时，它看起来完全不同。例如看看这张照片。

![在此处输入图像描述](../Images/a21a4cb6a02dcd102d3f6877ca5188a7.png)

第一个是 - Tokeninput。其次是标准文本框。我想要得到的是与文本框或另一个 jQ 插件完全相同的外观和感觉，它与 Tokeninput 做同样的事情，但用于文本框（不是`ul li`基于）。

这是用于水平 ul 的 CSS，插件作者试图提供与真实文本框相同的外观。

```
ul.token-input-list {
    overflow: hidden; 
    height: auto !important; 
    height: 1%;
    width: 400px;
    border: 1px solid rgb(240,240,240);
    cursor: text;
    font-size: 12px;
    font-family: Verdana;
    min-height: 1px;
    z-index: 999;
    margin: 0;
    padding: 0;
    background-color: #fff;
    list-style-type: none;
    clear: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:29:08.227

[这是类似的东西](http://jsfiddle.net/Cb3CX/1/)，我几个月前写的

它增强了普通的 textarea 并在 "," 字符上拆分初始 textarea 值以创建标签。

它可能无法 100% 满足您的需求，但它是一个很好的起点并且可以轻松修改。

# jquery - $ 替换为“ jQuery” - 为什么这个问题“$ 不是函数”

> ID：10696497
> 
> 赞同：0
> 
> 时间：2012-05-22T06:00:13.943
> 
> 标签：jquery, joomla

$ 和 jQuery 之间有什么区别？

现在我正在做 joomla 项目，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T06:02:32.793

如果您只安装了 jQuery 而没有安装其他库，那么`$`和`jQuery`是一样的（`$`是 的别名`jQuery`）。如果安装了多个库，每个库都尝试使用该`$`符号，那么只有一个库可以拥有它，并且 jQuery 可能不再使用它。在这种情况下，您可以使用该`jQuery`符号来访问所有 jQuery 函数。

jQuery 的函数[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)将取消分配`$`符号，以便在发生冲突时可以被另一个库使用。如果您发现`$`未定义，则可能是因为某些代码已将其重新定义为其他内容，`jQuery`或者某些代码已明确取消分配`jQuery.noConflict()`.

如果是这种情况，您始终可以使用`jQuery`而不是`$`访问任何 jQuery 功能，例如`jQuery(selector)`or`jQuery.each()`等​​...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T11:22:00.443

继 jfriend00 的回答之后，如果您*确实*发现自己必须`jQuery`在全局范围内使用以避免冲突，您可以将其“映射”到美元符号并在本地范围内使用它，如下所示：

```
(function($) {
    // your familiar jQuery code using '$' can now go here
    // e.g.
    // $('#foo').hide();
})(jQuery); 
```

我在 Joomla 中将这种方法用于我自己的 jQuery 代码。Joomla 默认使用 mootools。

# django - 如何更改 django 中的过滤器以反映不等于？

> ID：10696499
> 
> 赞同：7
> 
> 时间：2012-05-22T06:00:17.047
> 
> 标签：django, view, filter, equals

我有以下过滤器：

```
open_slots = Opening.objects.filter(club_id=club_id, day=datetime.date.today(), reservation ='Open') 
```

我想创建另一个列表“closed_slots”，它具有与上述所有相同的属性，除了保留不等于“打开”。当我尝试使用 reservation !='Open' 时出现错误。我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T06:06:46.023

使用`exclude`方法。详情[在这里](https://docs.djangoproject.com/en/dev/topics/db/queries/)。

```
open_slots = Opening.objects.filter(club_id=club_id, day=datetime.date.today()).exclude(reservation ='Open') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-02T07:56:22.667

我尝试过以下操作，效果很好。

```
from django.db.models import Q
open_slots = Opening.objects.filter(~Q(reservation ='Open'),club_id=club_id, day=datetime.date.today() ) 
```

# c++ - 从服务启动的可执行文件中获取服务名称

> ID：10696501
> 
> 赞同：1
> 
> 时间：2012-05-22T06:00:21.900
> 
> 标签：c++, windows-services

我已经编写了一个应用程序并使用服务来启动它。全部使用 C++，在 Windows 7 上。我的查询类似于[Windows 服务如何确定其服务名称？](https://stackoverflow.com/questions/1841790/how-can-a-windows-service-determine-its-servicename)

有没有办法在运行时确定（在 C++ 中）可执行文件中启动该可执行文件的服务的名称。

只需要一个指向正确方向的指针。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:27:55.670

您可以使用[`EnumServicesStatus`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682637%28v=vs.85%29.aspx)获取所有服务的列表然后过滤它们，我想最好的方法是比较二进制名称。然后调用[`QueryServiceConfig`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684932%28v=vs.85%29.aspx)获取服务配置，包括服务名称。

我希望这就是你要找的。当然，要做到这一点，您的应用程序必须在 Windows Vista 和 7 中以管理员身份运行，否则调用[`OpenSCManager`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684323%28v=vs.85%29.aspx)肯定会失败。

**编辑：** 另一种快速方法是将服务名称硬编码在服务和可执行文件之间共享的 def 文件或单独的配置文件中，从而消除 SCManager 的所有麻烦

# javascript - 如何使用纯 javascript 使整个 div 可点击？

> ID：10696502
> 
> 赞同：0
> 
> 时间：2012-05-22T06:00:28.530
> 
> 标签：javascript, html, clickable

我不需要用 jQuery 写这个，但我对普通的 javascript 不够精通，无法弄清楚。Chris Coyier[为我在这里谈论的内容写了一个很好的解释](http://css-tricks.com/snippets/jquery/make-entire-div-clickable/)。

我想要转换它的原因是因为我不需要为这段代码包含整个 jQuery 库。我可以使用普通的旧 javascript 来保存额外的请求。

这是我要转换的示例代码：

```
$(document).ready(function() {
    $(".featured").click(function(){
        window.location=$(this).find("a").attr("href"); return false;
    });
}); 
```

到目前为止，这是我想出的：

```
document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll("div.feature").click(function(){
        window.location=$(this).find("a").setAttribute("href"); 
        return false;
    });
}); 
```

据我所知，其中不正确的一件事是`querySelectorAll`，它正在寻找一个 div 元素，对吗？另一件事是`$(this)`，我不知道如何翻译成普通的 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:08:32.497

假设...

*   你知道浏览器支持[`querySelectorAll`](http://caniuse.com/#search=queryse)，但你仍然使用它
*   仅`addEventListener`适用于符合标准的浏览器

我相信你的意思是：

```
//get all a's inside divs that have class "featured"
var feat = document.querySelectorAll("div.featured a"),
    featlen = feat.length,
    i;

//loop through each
for(i=0;i<featlen;++i){
    //add listeners to each
    feat[i].addEventListener('click',function(){
        window.location = this.href;
    },false);
} 
```

* * *

或者你可以把`<div>`包裹在`<a>`. 不需要 JS。尽管内联元素不应包含块元素，但它是完全有效的 HTML，并且浏览器确实可以按预期工作。只需确保`display:block`打开`<a>`并调整其大小即可。

```
<a href="location">
    <div> content </div>
</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T06:18:01.760

您可以使用[this.querySelectorAll(...)](https://developer.mozilla.org/En/DOM/Element.querySelectorAll)进行选择：

IE8：

```
window.onload = function() {
    // get all dom elements with class "feature"
    var aFeatures = document.querySelectorAll(".feature");
    // for each selected element
    for (var i = 0; i < aFeatures.length; i++) {
        // add click handler
        aFeatures[i].onclick = function() {
            // get href of first anchor in element and change location
            window.location = this.querySelectorAll("a")[0].href;
            return false;
        };
    }
}; 
```

IE9等当前浏览器：

```
document.addEventListener("DOMContentLoaded", function() {
    // get all dom elements with class "feature"
    var aFeatures = document.querySelectorAll(".feature");
    // for each selected element
    for (var i = 0; i < aFeatures.length; i++) {
        // add click handler
        aFeatures[i].addEventListener('click', function() {
            // get href of first anchor in element and change location
            window.location = this.querySelectorAll("a")[0].href;
            return false;
        });
    }
}); 
```

=== 更新 ===

对于 IE7 支持，您应该在之前添加以下（未经测试的）脚本（另见[此处](https://gist.github.com/868532)）：

```
(function(d){d=document,a=d.styleSheets[0]||d.createStyleSheet();d.querySelectorAll=function(e){a.addRule(e,'f:b');for(var l=d.all,b=0,c=[],f=l.length;b<f;b++)l[b].currentStyle.f&&c.push(l[b]);a.removeRule(0);return c}})() 
```

它可能只支持`document.querySelectorAll`not `element.querySelectorAll`。

# css - 屏幕分辨率改变元素的宽度？

> ID：10696504
> 
> 赞同：1
> 
> 时间：2012-05-22T06:00:37.997
> 
> 标签：css

到目前为止，我有一个相当简单的网站布局，并注意到如果我在浏览器中更改屏幕分辨率，我为某些元素指定的一些宽度会发生变化。

从我读过的其他问题中，人们找到了按像素而不是百分比指定宽度的解决方法。我已经这样做了，但是每次更改分辨率时宽度都会继续变化 1-3 个像素？

任何帮助将不胜感激。不幸的是，我没有相关代码，因此如果需要，我会尽力提供示例。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:04:17.583

像这样使用 HTML。

```
<div style="width:950px">
<div class="wrapper"><!--all content goes here--></div>
</div> 
```

# c# - SQL 参数 IsNullable

> ID：10696509
> 
> 赞同：0
> 
> 时间：2012-05-22T06:00:57.993
> 
> 标签：c#, sql, parameters

通过 SqlParameter 类（用于 C#），我可以看到存储过程中的参数。

你怎么知道一个参数是否是强制性的？我尝试使用 IsNullable 但它总是错误的。

也许我写了一个错误的存储过程，或者 IsNullable 只是为了设置？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:07:16.353

“可选”仅仅意味着存储过程参数有一个默认值。
否则，*所有*参数都可以为 NULL：没有定义约束来阻止它。

您必须解析存储的过程 T-SQL 才能看到默认值，根据这个答案[是否有解决方案来获取给定存储过程的参数的默认值？](https://stackoverflow.com/q/6992561/27535)

如果你可以解析存储过程的定义，那么你开始失去封装的好处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:03:10.870

在 Codebehind 中使用它来检查数据库值是否为空

```
bool isnull = Convert.IsDBNull(yourvalue); 
```

在 SQL 中使用[ISNULL (check_expression, replacement_value)](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

```
select ISNULL(columnname, 0) from tablename 
```

# java - DB 错误=ORA-01407：无法将 ("XXX"."XXX"."VALUE") 更新为 NULL。

> ID：10696514
> 
> 赞同：1
> 
> 时间：2012-05-22T06:01:37.633
> 
> 标签：java, sql, database, oracle

我有（针对这个问题进行了简化）一个表“TAB”，其中包含两列“id”（整数而不是 db 中的空值）和“值”（varchar，而不是 db 中的空值）。我正在使用Java应用程序一次更新多行的“值”列（这是我的要求）。我使用了带有 case 和 when 关键字的 update 语句。查询是在运行时根据修改的行数生成的。

如果为所有行一起更新数据，则查询工作正常，但在更新较少行时它会给我错误。假设我们有 id = 1、2 和 3 的三行，其值分别为 A、B 和 C。
当对所有三行一起触发查询时，它可以正常工作

```
UPDATE 
     TAB set value = CASE 
       WHEN id = 1 THEN 'X' WHEN id = 2 THEN 'Y' WHEN id = 3 THEN 'Z' 
END 
```

但是，当查询被触发少于三行时，我遇到了数据库错误。

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' END 
```

导致以下错误：

> DB 错误=ORA-01407：无法将 ("XXX"."XXX"."VALUE") 更新为 NULL。

我知道发生这种情况是因为 DB 中的“值”列不为空。我想知道上面的查询是否试图用 NULL 更新所有剩余的值？

如果我添加如下所示的 ELSE 部分，查询工作正常。

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' ELSE TAB.value END 
```

如果数据库中有多行，上述查询是否会影响任何性能问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:06:20.347

您正在更新表中的所有行。这是因为您没有**where**子句。

要更新一行，请添加 where 子句。

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' END where id = 1; 
```

或者在您的 3 行案例中，

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' WHEN id = 2 THEN 'Y'
WHEN id = 3 THEN 'Z' END where id in ( 1,2,3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T06:07:22.857

你这样做的方式非常好。

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' ELSE TAB.value END 
```

其他解决方案可能是使用`where`子句

```
UPDATE TAB set value = CASE WHEN id = 1 THEN 'X' when ID = 2 then 'Y' END where id in ( 1, 2 ) 
```

# android - 使用 SharedPreferences 保存用户数据

> ID：10696515
> 
> 赞同：1
> 
> 时间：2012-05-22T06:01:38.623
> 
> 标签：android, sharedpreferences

我正在编写一个应用程序来使用登录界面保存密码。用户可以更改登录密码。第一次，我使用下面的代码保存密码，这样应用重启时密码不会重置：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState){
    savedInstanceState.putString("pwd", currentPwd);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState){
    currentPwd = savedInstanceState.getString("pwd");
} 
```

但在我问完之后，这个网站上有人建议我使用“SharedPreferences”。因此，我将代码更改如下：

```
@Override public void onCreate(Bundle savedInstanceState) {     
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    SharedPreferences settings = getSharedPreferences("setting", 0);
    currentPwd = settings.getString("pwd", "abc");
}

@Override public void onStop(){
    super.onStop();
    SharedPreferences settings = getSharedPreferences("setting", 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("pwd", currentPwd);
    editor.commit();
} 
```

经过我的实验，我发现密码会在一个小时后重置，与第一个密码相同。我是否为第二个代码更改了错误？或者有什么建议的方法来解决它？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:31:10.300

不确定我是否遵循您的代码，但我会这样做：

获取密码：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
sp.getString("pwd", "abc"); 
```

设置密码：

```
SharedPreferences.Editor editor = sp.edit();
editor.putString("pwd", currentPwd);
editor.commit(); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T06:00:27.220

您可以使用以下函数保存值。它仅包含上下文、键和值：

```
public void savePreferencesForReasonCode(Context context,
    String key, String value) {
    SharedPreferences sharedPreferences = PreferenceManager
    .getDefaultSharedPreferences(context);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
    } 
```

要获得更多信息，请参阅[此答案](https://stackoverflow.com/a/31890031/3073945)

# c# - 从代码启动 GPS 导航应用程序

> ID：10696520
> 
> 赞同：0
> 
> 时间：2012-05-22T06:02:02.220
> 
> 标签：c#, windows-mobile, gps

我正在使用 .NET 和 C# 构建一个 Windows Mobile 6.1 应用程序。

我想购买 GPS 导航应用程序或控件，以便可以将导航功能添加到我的应用程序。我的软件显示客户列表。我希望用户能够单击一个地址，然后使用“轮流”导航（类似于 Tom Tom 或 Navman 等）导航到该位置。

下载演示和评估所有选项非常耗时。有没有人经历过这个过程并找到了一个好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:07:11.407

在浪费时间与谷歌、必应和其他人打交道后，我遇到了这些人。真正优秀的产品！将地址发送到他们的应用程序，您就完成了。简单的 ：）

[http://www.sygic.com/en/business](http://www.sygic.com/en/business)

# c# - 关于构建操作的说明

> ID：10696521
> 
> 赞同：2
> 
> 时间：2012-05-22T06:02:02.420
> 
> 标签：c#, wpf, build, embedded-resource

我有一个使用 Access DB 文件作为参考表的项目。这是在工作中使用的，但我正在家里开发它。到目前为止，我只是简单地在VS2010中运行调试器，然后将相关的类文件，exe等从/bin文件夹复制到闪存驱动器，它工作正常。但是随着数据库的添加，它在启动时突然崩溃。

我知道问题是数据库文件的文件位置。最初 DB 的 Build Action 被发送到 Content。我已将其更改为 Embedded Resource，据我所知，这意味着它将成为 exe 文件的一部分。

我在这方面是正确的吗？如果不是，我需要选择什么选项才能让数据库成为 exe 的编译部分或其他 dll 之一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:20:14.143

如果嵌入了 db 文件，则无法访问它来添加/删除行等。为什么将构建操作更改为 Embedded Resource ？作为Content 会更好，所以db 是一个单独的文件而不是exe（但仍然在同一目录中），然后构建db 文件的路径（即使用Application.StartupPath）。

无论如何，如果要将其设置为嵌入式，则需要在运行时提取数据库并将其存储在某处，然后再使用它。

这是一种可以从嵌入式资源中提取文件的方法（当然您需要更改文件名，或者将其作为参数传递）：

```
private void ExtractFromAssembly()
{
    string strPath = Application.LocalUserAppDataPath + "\\MyFile.db";
    if (File.Exists(strPath)) return; // already exist, don't overwrite
    Assembly assembly = Assembly.GetExecutingAssembly();
    //In the next line you should provide NameSpace.FileName.Extension that you have embedded
    var input = assembly.GetManifestResourceStream("MyFile.db");
    var output = File.Open(strPath, FileMode.CreateNew);
    CopyStream(input, output);
    input.Dispose();
    output.Dispose();
    System.Diagnostics.Process.Start(strPath);
}

private void CopyStream(Stream input, Stream output)
{
    byte[] buffer = new byte[32768];
    while (true)
    {
        int read = input.Read(buffer, 0, buffer.Length);
        if (read <= 0)
            return;
        output.Write(buffer, 0, read);
    }
} 
```

该文件将被复制到本地应用程序路径中的用户目录中。它将在应用程序第一次启动时完成，否则每次应用程序启动时都会覆盖 db 文件（用 exe 中的 clean db 包覆盖）

# android - Android listview 延迟加载

> ID：10696530
> 
> 赞同：15
> 
> 时间：2012-05-22T06:02:48.023
> 
> 标签：android, android-listview, lazy-loading

我想做一些事情。我想做延迟加载`ListView`。我的`ListView`包含超过 10,000 个数据并且仅在`TextView`. 所以当我启动列表活动时，我无法在第一次加载所有数据。它效率不高，所以我可以加载列表中的前 20 或 30 个项目。`ListView`当我滚动它们时，会进一步加载这些行。因此，当我到达最后一个索引的`ListView`最后一个索引时，我将放置进度条 n 它会注意到新数据已加载，因此届时将使用 last + 1 索引加载新数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T06:12:01.667

您可以通过使用无限适配器实现来实现这一点。这正是你想要的。您还可以限制每次滚动刷新的行数。这是它的链接。,

[Android：为 Android Market 等 Endless List 实现进度条和“正在加载...”](https://stackoverflow.com/q/4667064/603744)

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

要使用它，您可以扩展 EndlessAdapter 以提供有关如何处理无穷无尽的详细信息。具体来说，您需要能够提供一个独立于实际适配器中的任何行的行视图，该视图将用作占位符，而您可以通过另一种方法将实际数据加载到主适配器。然后，在您的帮助下，它会在新数据中无缝转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-12T06:03:43.790

**让您的列表滚动得更快：-**

1.  减少`getView`适配器中使用的条件数量。
2.  减少您在日志中收到的垃圾收集警告的数量
3.  添加滚动功能（限制每次滚动刷新的行数）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-26T19:11:20.737

将[onScrollListener](https://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)添加到 ListView。当用户滚动时，检查 ListView 是否接近尾声。如果是，则获取更多数据。举个例子 ：

```
public abstract class LazyLoader implements AbsListView.OnScrollListener {

    private static final int DEFAULT_THRESHOLD = 10 ;

    private boolean loading = true  ;
    private int previousTotal = 0 ;
    private int threshold = DEFAULT_THRESHOLD ;

    public LazyLoader() {}

    public LazyLoader(int threshold) {
        this.threshold = threshold;
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
                         int visibleItemCount, int totalItemCount) {
        if(loading) {
            if(totalItemCount > previousTotal) {
                // the loading has finished
                loading = false ;
                previousTotal = totalItemCount ;
            }
        }

        // check if the List needs more data
        if(!loading && ((firstVisibleItem + visibleItemCount ) >= (totalItemCount - threshold))) {
            loading = true ;

            // List needs more data. Go fetch !!
            loadMore(view, firstVisibleItem,
                    visibleItemCount, totalItemCount);
        }
    }

    // Called when the user is nearing the end of the ListView
    // and the ListView is ready to add more items.
    public abstract void loadMore(AbsListView view, int firstVisibleItem,
                                  int visibleItemCount, int totalItemCount);
} 
```

活动 ：

```
public class MainActivity extends AppCompatActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main_layout);
            ListView listView = (ListView) findViewById(R.id.listView);

            listView.setOnScrollListener(new LazyLoader() {
                @Override
                public void loadMore(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                    // Fetch your data here !!!
                }
            });
        }
    } 
```

您可以[在此链接中找到完整的实现](http://androidcocktail.blogspot.in/2016/05/lazily-loaded-listview-in-android.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T10:48:24.197

//put in calling function :

```
@Override
public View onCreateView(android.view.LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
  ScrollListener scrollListener = new ScrollListener();
  listView.setOnScrollListener(scrollListener);
} 
```

and inner class:

```
class ScrollListener implements OnScrollListener
{

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)
    {
        int size = searchedPeople.size();
        if(isScrolled && totalItemCount != 0 && size < totalPeoples)
        {

            if(firstVisibleItem + visibleItemCount >= totalItemCount)
            {

                    yourfunction(size, size + limit); // call service in your functioin

                isScrolled = false;
            }
        }

    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState)
    {

    }

} 
```

# php - 如何从php中提取电子邮件

> ID：10696532
> 
> 赞同：1
> 
> 时间：2012-05-22T06:02:56.210
> 
> 标签：php, javascript, jquery, html

从以下 HTML 中，我只需要提取电子邮件地址以将其保存在数据库中。我需要将它拉入数组，我计划使用 jquery/ajax 使用 dom 提取所有电子邮件并使用 ajax 将其保存到另一个页面，但问题是 `<td>`与其他没有唯一标识，`<td>`即我可以做到如果td 具有类或 id 名称

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

    <body>
    <table width="100%" border="1">
    <tr></tr>
    <tr>
      <td>NAME</td>
      <td>ADDRESS</td>
      <td>PHONE</td>
      <td>EMAIL</td>
    </tr>
    <tr>
      <td>wwqw</td>
      <td>qww</td>
      <td>ew</td>
      <td>email@exmaple.com</td>
    </tr>
    <tr>
      <td>e</td>
      <td>wew</td>
      <td>ew</td>
      <td>emai1l@exmaple.com</td>
    </tr>
    <tr>
      <td>e</td>
      <td>ewe</td>
      <td>we</td>
      <td>email2@exmaple.com</td>
    </tr>
    <tr>
      <td>we</td>
      <td>we</td>
      <td>we</td>
      <td>emai3l@exmaple.com</td>
    </tr>
    <tr>
      <td>ww</td>
      <td>w</td>
      <td>w</td>
      <td>emai4l@exmaple.com</td>
    </tr>
    </table>
    </body>
    </html> 
```

我需要获取电子邮件地址并存储在数组中，如下所示

```
Array
(
    [0] => email@exmaple.com
    [1] => emai1l@exmaple.com
    [2] => email2@exmaple.com
    [3] => emai3l@exmaple.com
    [4] => emai4l@exmaple.com
) 
```

`<td>`可以有变量 class 和 id ，所以很难使用 jquery 等来拉它们。我被它挡住了。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:29:44.483

使用 jQuery-->

```
$(document).ready(function() {
    $('tr').find('td:last').each(function(){
        var t = $(this).text();
if(typeof(t) === 'string' && t.indexOf('@') >-1) alert(t);
    })
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:09:37.910

不要使用jquery，正则表达式会让你的工作变得轻松。

```
$string='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="100%" border="1">
<tr></tr>
<tr>
  <td>NAME</td>
  <td>ADDRESS</td>
  <td>PHONE</td>
  <td>EMAIL</td>
</tr>
<tr>
  <td>wwqw</td>
  <td>qww</td>
  <td>ew</td>
  <td>email@exmaple.com</td>
</tr>
<tr>
  <td>e</td>
  <td>wew</td>
  <td>ew</td>
  <td>emai1l@exmaple.com</td>
</tr>
<tr>
  <td>e</td>
  <td>ewe</td>
  <td>we</td>
  <td>email2@exmaple.com</td>
</tr>
<tr>
  <td>we</td>
  <td>we</td>
  <td>we</td>
  <td>emai3l@exmaple.com</td>
</tr>
<tr>
  <td>ww</td>
  <td>w</td>
  <td>w</td>
  <td>emai4l@exmaple.com</td>
</tr>
</table>
</body>
</html>';
echo "<pre>";
$pattern="/([\s]*)([_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*([ ]+|)@([ ]+|)([a-zA-Z0-9-]+\.)+([a-zA-Z]{2,}))([\s]*)/i"; 
preg_match_all($pattern, $string, $matches);
print_r($matches[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:37:42.873

```
<?php 
    include('simple_html_dom.php');
    $html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

    <body>
    <table width="100%" border="1">
    <tr></tr>
    <tr>
      <td>NAME</td>
      <td>ADDRESS</td>
      <td>PHONE</td>
      <td>EMAIL</td>
    </tr>
    <tr>
      <td>wwqw</td>
      <td>qww</td>
      <td>ew</td>
      <td>email@exmaple.com</td>
    </tr>
    <tr>
      <td>e</td>
      <td>wew</td>
      <td>ew</td>
      <td>emai1l@exmaple.com</td>
    </tr>
    <tr>
      <td>e</td>
      <td>ewe</td>
      <td>we</td>
      <td>email2@exmaple.com</td>
    </tr>
    <tr>
      <td>we</td>
      <td>we</td>
      <td>we</td>
      <td>emai3l@exmaple.com</td>
    </tr>
    <tr>
      <td>ww</td>
      <td>w</td>
      <td>w</td>
      <td>emai4l@exmaple.com</td>
    </tr>
    </table>
    </body>
    </html>';

    $dom = new simple_html_dom();
    $dom->load($html);
    $table = $dom->find('table', 0);
    if($table){
        foreach($table->find('tr') as $row) {
            $rowData = array();
            foreach($row->find('td') as $cell) {
                $rowData[] = $cell->innertext;
            }
            $theData[] = $rowData;
        }
        print_r($theData);
    }
?> 
```

或者你可以用jquery来做

```
$(document).ready(function() {
    $('tr').find('td:last').each(function(){
        console.log($(this).text());
    })
}); 
```

# android - 如何像以前一样设置 ListView 的范围

> ID：10696535
> 
> 赞同：1
> 
> 时间：2012-05-22T06:03:09.020
> 
> 标签：android, listview

我使用下面的代码来显示 ListView 的相同范围：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
FirstPosition = this.getListView().getFirstVisiblePosition();
//call B activity
}

@Override
public void onResume() {
this.getListView().setSelection(FirstPosition);
//.....
} 
```

我想让 ListView 在调用 B 活动之前显示相同的范围，并在 B 活动之后恢复。
但我的方法可能有一些偏移。
我该怎么办？

# wordpress - 如何显示从 wordpress 网站到 magento 的最近 5 个帖子

> ID：10696536
> 
> 赞同：0
> 
> 时间：2012-05-22T06:03:09.503
> 
> 标签：wordpress, magento, integration

我有 magento 电子商务网站和 wordpress 博客网站。我想在我的 magento 主页上显示最近的 5 篇博客文章。我尝试使用以下代码

```
// Get the last 3 posts.
<?php
require('/the/path/to/your/wp-blog-header.php');
?>
<?php query_posts('showposts=3'); ?>
<?php while (have_posts()) : the_post(); ?>
<a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><?php the_title(); ?></a><br />
<?php endwhile;?> 
```

我将此文件复制到新的 .phtml 文件中，并将该文件称为主页。但是在这样做之后，我的主页只显示标题和品种屑......这个问题的任何解决方案表示赞赏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:16:15.593

不要在 php 端集成，将 rss 提要与提要阅读器一起使用，例如[http://www.magentocommerce.com/magento-connect/flagbit-feed-reader.html](http://www.magentocommerce.com/magento-connect/flagbit-feed-reader.html)

# nhibernate - “？”附近的语法不正确 : Nhibernate 生成的查询

> ID：10696539
> 
> 赞同：3
> 
> 时间：2012-05-22T06:03:13.247
> 
> 标签：nhibernate, nhibernate-criteria

在 Nhbernate 中使用位置参数时遇到问题。

Criteria GroupProperty 发出带有命名变量和位置变量的 sql。

这个说法：

```
session.CreateCriteria(typeof(MatchStageFrom))
                .SetProjection(Projections.GroupProperty(
                    Projections.SqlFunction("substring", NHibernateUtil.String, Projections.Property("LastName"), Projections.Constant(0), Projections.Constant(1))
                    )
                ); 
```

正在生成此 SQL：

```
SELECT substring(this_.LAST_NAME, @p0, @p1) as y0_ FROM MATCH_STAGING_FROM this_ GROUP BY substring(this_.LAST_NAME, ?, ?) 
```

这会导致 SQL 出错：

```
Incorrect syntax near '?'.

could not execute query
[ SELECT substring(this_.LAST_NAME, @p0, @p1) as y0_ FROM MATCH_STAGING_FROM this_ GROUP BY substring(this_.LAST_NAME, ?, ?) ]
Positional parameters: #0>0 #1>1 #2>0 #3>1
[SQL: SELECT substring(this_.LAST_NAME, @p0, @p1) as y0_ FROM MATCH_STAGING_FROM this_ GROUP BY substring(this_.LAST_NAME, ?, ?)] 
```

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:52:59.437

它看起来像 NHibernate 中的一个错误，但如果您只想要这些结果，您可以通过使用 Projections.Distinct 而不是 Projections.GroupProperty 来获得相同的结果，即：

```
session.CreateCriteria(typeof(MatchStageFrom))
            .SetProjection(Projections.Distinct(
                Projections.SqlFunction("substring", NHibernateUtil.String, 
                    Projections.Property("LastName"), 
                    Projections.Constant(0), 
                    Projections.Constant(1))
                )
            ); 
```

或者，如果您选择的不仅仅是名称的第一个字符，那么您可能会使用子选择让它工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:45:50.083

我遇到了类似的问题`Projections.SqlFunction("concat" ...)`。最后，我通过使用`Projections.SqlProjection(...)`来解决它。我不喜欢这个答案，因为我认为它可能不太便携，但它确实对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:25:32.797

**解决方法**

在使用 group by 和 SqlFunction 参数时，NHibernate 中有一个错误。“如果适用`Projections.GroupProperty(customProjection)`，则投影中的参数仅发送一次（对于`SELECT`子句），而`GROUP BY`子句中的参数是定位的并且在查询中丢失......”（[参见](https://nhibernate.jira.com/browse/NH-3131)）

遇到同样的错误并通过在运行时向 NHibernate 添加自定义 SQL 函数来解决它，（[请参阅](http://weblogs.asp.net/ricardoperes/archive/2011/06/14/adding-custom-sql-functions-to-nhibernate-at-runtime.aspx)）

变通方法将常量参数移出 Projections.SqlFunction 调用并移入自定义函数的定义（“year_week”）。

老失败：

```
Projections.GroupProperty(
   Projections.Cast(NHibernateUtil.AnsiString,
      Projections.SqlFunction("to_char", NHibernateUtil.AnsiChar,
         Projections.Property(() => myAlias.Date),
         Projections.Constant("IYYYIW") // Turns into "?" in group by
      )
   )
) 
```

解决方法：

```
Projections.GroupProperty(
   Projections.Cast(NHibernateUtil.AnsiString,
      Projections.SqlFunction("year_week", NHibernateUtil.AnsiChar,
         Projections.Property(() => myAlias.Date)
         // constant moved to function definition
      )
    )
) 
```

函数“year_week”定义如下：

```
DialectExtensions.RegisterFunction(sessionFactory, "year_week", new SQLFunctionTemplate(NHibernateUtil.String, "TO_CHAR(?1,'IYYYIW')")); 
```

# javascript - 通过互联网从浏览器调用服务器端javascript

> ID：10696540
> 
> 赞同：0
> 
> 时间：2012-05-22T06:03:21.563
> 
> 标签：javascript, node.js, serverside-javascript

任何人都可以帮助我从客户端 HTML 页面（浏览器）调用服务器端 javascript 方法并从服务器取回对象并通过互联网进行处理。就像谷歌地图API一样。

例如我们如何添加：我们添加了代码以从 html 代码中包含服务器端 java 脚本。脚本类型="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"

我们通过调用google map api的方法来获取地图对象。

```
var map = new google.maps.Map(document.getElementById("map"), settings); 
```

谢谢。萨蒂什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:06:57.893

我认为你应该看看[AJAX 是如何工作](https://stackoverflow.com/questions/1510011/how-does-ajax-work)的。

您需要向服务器发出 AJAX 请求，服务器将向浏览器响应数据。

# asp.net - 如何在单个视图页面中编辑两个或多个模型

> ID：10696541
> 
> 赞同：0
> 
> 时间：2012-05-22T06:03:31.510
> 
> 标签：asp.net, asp.net-mvc-3

我是 MVC3 的新手，我有多个模型，例如 BussinessDetails、ContactPerson、servicearea、address 和更多模型。我有一个单一的视图页面，其中共享视图页面，如联系人、业务详细信息、地址、服务区等。这些都在选项卡中。它们有自己的模型。

我的问题是如何在同一个编辑视图页面中编辑多个模型。在发送这篇文章之前，我求助于 MVC3“音乐商店”示例，但只有一个模型“专辑”，如果有，他们会为一个模型提供编辑操作是一个或多个模型，我将如何在同一视图页面中进行编辑。

我已经制作了父业务规范类。这是来自 MVC“音乐商店”

```
 public ActionResult Edit(int id) {
   Album album = db.Albums.Find(id);
   ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
   ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", 
                                                             album.ArtistId);

   return View(album);
 }                                                        

[HttpPost]
public ActionResult Edit(Album album) {

  if (ModelState.IsValid) {
     db.Entry(album).State = EntityState.Modified;
     db.SaveChanges();
     return RedirectToAction("Index");
  }

  ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
  ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", 
                                                             album.ArtistId);

  return View(album);
} 
```

在 HTTP POST 中，如果有更多模型，则仅在模型“ALBUM”上我如何对多个模型执行编辑操作并查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:10:42.340

创建一个新模型，其中包含有关两个或多个模型的信息，例如

```
public class MainPageModel{
    public mod mod{get; set;}
    public mod2 mod2{get; set;}
} 
```

并且在您的操作中引用 MainPageModel 并仅在对象上编辑返回对象所属的模型

这是一个很好的教程

[http://francorobles.wordpress.com/2011/05/03/returning-multiple-models-in-1-view-in-asp-net-mvc3/](http://francorobles.wordpress.com/2011/05/03/returning-multiple-models-in-1-view-in-asp-net-mvc3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:32:49.570

是的，你可以通过使用视图模型来做到这一点，请看看我在这篇文章中的回答

[所需字段验证 MVC](https://stackoverflow.com/questions/10650405/requred-field-validate-mvc/10651273#10651273)

# assembly - 在 MIPS 程序集中将 int 转换为 float

> ID：10696543
> 
> 赞同：1
> 
> 时间：2012-05-22T06:03:40.720
> 
> 标签：assembly, mips

我的方法是将int寄存器溢出并加载到float寄存器中然后转换

```
li $t0, 2       
sw $t0, -88($fp)    
l.s $f4, -88($fp)
cvt.d.s $f6, $f4 
```

我正在尝试翻译一个表达式

```
float a = 3.0;
float b = a / 2; 
```

但是上面的方法并没有给我一个正确的答案（打印出来`inf`）。

那我哪里做错了？有什么建议么？

PS `2`不知道 lhs 操作数是浮点类型，所以我无法`2.0`加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:18:23.603

您使用了不正确的后缀；`.d`将对双字（64 位）进行操作。这就是你想要的：

```
li   $t0, 2
sw   $t0, -88($fp)
lwc1 $f4, -88($fp)
cvt.s.w $f6, $f4 
```

# python - 带有 Python 的 OpenCV 是否需要 X Windows？

> ID：10696545
> 
> 赞同：1
> 
> 时间：2012-05-22T06:04:03.070
> 
> 标签：python, opencv

我正在尝试运行一个使用 samples/python2/facedetect.py 示例的简单 OpenCV python 脚本，但不是循环运行，而是希望它检测面部，然后编写图像。

本质上，我将 cv2.imshow 更改为 cv2.imwrite，它在 Windows 上运行良好。

当我在 Linux (Debian) 上尝试同样的事情时，我得到 Xwindows 错误，例如：

```
import: unable to grab mouse `': Resource temporarily unavailable @ error/xwindow.c/XSelectWindow/9007.
from: can't read /var/mail/video
from: can't read /var/mail/common
./facedetect.py: line 7: syntax error near unexpected token `('
./facedetect.py: line 7: `def detect(img, cascade):' 
```

我不想绘制任何窗口，我想要的只是代码打开一个 jpg，检测面部，然后写一个新的 jpg。OpenCV 是否需要 X 窗口？我浏览了代码，但无法识别需要 X windows 的特定代码行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:09:47.097

您刚刚将您的程序作为 shell 的输入。您需要添加一个 hashbang 行，就像`#!/usr/bin/python`程序文件的第一行一样。或将其调用为`python ./facedetect.py`

# matlab - Matlab ActiveX 到 Labview Vi 服务器，在项目应用实例中打开 Vi

> ID：10696550
> 
> 赞同：1
> 
> 时间：2012-05-22T06:04:39.257
> 
> 标签：matlab, activex, labview

我在windows上使用matlab来控制一些labview vi，带有activeX vi服务器。这些 vi 是 labview 项目的一部分。我想打开对该labview 项目实例的引用，而不是主应用程序实例。这可能吗？

在 Labview 中，我会通过调用：打开 Application Reference.vi，并将 vi 端口输入/服务名称设置为我的项目的名称。然后，这将返回对我的项目应用程序实例的引用，然后我可以使用它来打开和运行 vi。

在 Matlab 中，我不确定如何做同样的事情。我正在使用以下代码：

```
e = actxserver('LabVIEW.Application'); %Obtain a reference to labview vi server
vipath = full path to the vi I want to open; 
vi = invoke(e, 'GetVIReference', vipath); %Get a reference to the vi I want to open
vi.FPWinOpen = 1; %Open the front panel of the vi. 
```

但是，这会在主应用程序实例中打开 vi，而不是在项目实例中。

希望我的问题以一种可以理解的方式写出来！任何建议都会很棒。

还有谁知道我在哪里可以找到在外部程序（如 matlab）中使用 labview vi 服务器的文档？例如，有哪些可用的方法以及如何使用它们？

谢谢，实验室迷

# solr - 如何动态操作 solr 中的多核

> ID：10696553
> 
> 赞同：1
> 
> 时间：2012-05-22T06:05:12.867
> 
> 标签：solr, solrj

我是 apache solr 的新手。
我想使用 CoreAdminHandler 类动态操作多核
`org.apache.solr.handler.admin.CoreAdminHandler;`

没有关于如何使用它的教程，也没有任何我可以谷歌搜索的好例子。
请给我一些示例，说明如何使用 CoreAdminHandler 和 solrj 操作部署在 tomcat（非嵌入式）中的多核。
如何指定为 CoreAdminHandler/coreContainer 部署 solr 的 tomcat 服务器的路径。
以及如何指定放置多核的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:23:04.560

这是一个示例，您可以使用它通过状态请求获取可用内核的列表：

```
CoreAdminRequest adminRequest = new CoreAdminRequest();
adminRequest.setAction(CoreAdminAction.STATUS);
CoreAdminResponse adminResponse = adminRequest.process(new CommonsHttpSolrServer(solrUrl));
NamedList<NamedList<Object>> coreStatus = adminResponse.getCoreStatus(); 
```

以下是`CoreAdmin`您可以使用的可用操作：

```
STATUS,  
LOAD,
UNLOAD,
RELOAD,
CREATE,
PERSIST,
SWAP,
RENAME,
@Deprecated
ALIAS,
MERGEINDEXES; 
```

您可以使用的代码几乎相同，您只需选择正确的操作并正确读取返回`NamedList`对象中的结果。如果您有更具体的问题，请告诉我。

# android - android 我如何为 android 2.2 使用 ObjectAnimator 类

> ID：10696555
> 
> 赞同：7
> 
> 时间：2012-05-22T06:05:33.897
> 
> 标签：android, android-animation, android-2.2-froyo, android-library

我想在我的 android 2.2 项目中使用 ObjectAnimator 类动画。我尝试使用支持包 4，但它不起作用。有什么方法可以将此类和相关文件导入我的项目或此类动画的任何外部库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T07:10:56.160

这家伙为*Android < 3.0*`Property Animation`制作了一个很棒的框架包，看看[这里](http://nineoldandroids.com/)

# c# - 购物车中的特殊逻辑\算法

> ID：10696556
> 
> 赞同：0
> 
> 时间：2012-05-22T06:05:37.053
> 
> 标签：c#, algorithm, shopping-cart

我正在实现一个在 c# 中有购物车的网站。

假设我的数据库中有这些产品

产品 A 价格 50
产品 B 价格 50
产品 C 价格 50
产品 D 价格 50

用户可以将这些产品添加到他的购物车。

现在有一个报价正在运行。用户可以购买 3 件产品 A 或产品 B（这些产品的任意组合 - 产品 A 的示例 2 和产品 B 的示例 2 或产品 A 的所有 3 件），他将免费获得一件。

（所以在这个例子中，如果他买了 3 件，他必须支付 100，4 然后支付 150 和 5 件，然后他必须支付 200，6 件也支付 200）

我如何获得一个算法\伪代码来实现这个？

人的问题在于产品可以按任何顺序添加，例如产品按
A、A、A
或
2A、B
或
A、C、D、B、A
或
A、C、C、A 的顺序添加

2A 表示他在一个动作中添加了 2 件产品 A。（在最后一种情况下，他不会利用该提议）

请告诉我解决这个问题的最简单方法是什么？谁能指出一些解决此类问题的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:21:54.597

获取正在购买的产品 A 和产品 B 的总数，然后除以 3 即可查看有多少产品是免费的。例如。

```
int cost = 50;
int a = numOfProductA();
int b = numOfProductB();
int total = a + b;
int totalFree = total/3;
int totalCost = (total - totalFree)*cost; 
```

可能有一种有效的方法可以做到这一点，尽管更多信息会很好:) 就像获得 A 或 B 的数量一样困难吗？一些显示您已经尝试过的代码会很好。

编辑：回应您的评论，这将是非常相似的逻辑。我不会给你代码，因为我相信你可以从我之前的例子中自己弄清楚，这将帮助你更好地学习:) 但是，粗略地说，我会先找到 5 A 的实例，然后删除他们从购买的数量，然后算出 3 A 或 B 免费项目。（例如，如果 7 A 和 1 B，发现 5 A 存在并给出两个免费然后计算剩余的，所以 2 A 和 1 B 计算第二个报价）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:09:52.063

也许这会帮助你：

交易示例：买 4 件**PRODUCT_A 送**2件**PRODUCT_B**

变量：

*   `numSkuRequired`：交易所需的产品数量（在本例中为 4）
*   `skuRequired`：交易所需的产品（在本例中为**PRODUCT_A**的标识符、sku/id 或其他东西）
*   `numSkuFree`：免费提供的产品数量（在这种情况下为 2）
*   `skuFree`：免费赠送的产品（在这种情况下为**PRODUCT_B**的标识符，sku/id 或其他东西）
*   `quantityLookupRequired`: **PRODUCT_A**在购物车中的总和，默认`false`
*   `quantityLookupFree`: **PRODUCT_B**在购物车中的总和，默认`false`
*   `quantityFree`：我们正在寻找的最终结果来计算总金额，免费产品的数量（**PRODUCT_B**），默认值`0`
*   `price`: **PRODUCT_B**的价格，默认`0`
*   `discount`: 总折扣金额，默认`0`

脚步

1.  在购物车中找到 PRODUCT_A 的总和，保存在变量中`quantityLookupRequired`
2.  确保这`quantityLookupRequired`是`>=` `numSkuRequired`
3.  在购物车中找到 PRODUCT_B 的总和，保存在变量中`quantityLookupFree`
4.  确保这`quantityLookupFree`是`>=` `numSkuFree`
5.  找到 PRODUCT_B 的价格并保存在变量中`price`
6.  循环（见下文）找到`quantityFree`（编辑不允许我让这个看起来好多了抱歉）。
7.  `discount`将会`quantityFree * price`

`for(int i = 0; i < numSkuRequired + numSkuFree; i <= quantityLookupRequired + quantityLookupFree; i += (numSkuRequired + numSkuFree)) { quantityFree += numSkuFree; } while(quantityFree % numSkuFree != 0)/* don't allow partial discounts */ { quantityFree--; } discount = quantityFree * price;`

注意：当交易仅包含 1 个产品时，采取的方法略有不同（购买 4 件**PRODUCT_A 送**2 件**PRODUCT_A**）

# queue - 关于同步 ZeroMQ 管道架构的问题

> ID：10696560
> 
> 赞同：1
> 
> 时间：2012-05-22T06:05:49.190
> 
> 标签：queue, message-queue, zeromq

所以，我构建了这个 ZeroMQ 管道架构的小例子，因为我很快就不得不做类似的事情，而且我正试图以正确的方式掌握管道概念。

[https://gist.github.com/2765708](https://gist.github.com/2765708)

现在，这是完全异步的。控制器将一批任务分派给各个工作人员，这些工作人员依次向接收器发送消息。控制器和接收器是我架构的固定部分，而工作人员是动态的。那很完美。

但是，我想知道工人们何时完成了所有任务。在那个例子中，我确实知道消息的数量，但在现实生活中情况并非如此。我可能有 100 条消息或 10,000 条消息。那么，接收器或控制器如何知道工人何时完成了他们的任务呢？我必须执行一些操作，这些操作取决于发送给工人的工作的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:06:31.667

一个想法（免责声明：我对 0MQ 的经验很少！）：

在相反方向设置“确认”管道。由于控制器大概知道它已经分派了多少个任务给工人（例如它调用的次数`send`），它可以使用一个 PULL 套接字从每个工人接收一个小消息（例如一个整数），指示任务完成. 工作进程将其完成的结果分派给接收器，同时将确认发送回控制器。一旦控制器收集到正确数量的确认，它就可以在进行下一组工作之前进行任何必要的后处理。

您也可以将其向下游推送到水槽，但您需要先通知水槽预期的工作单元总数，*然后再将*它们分给工人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:08:20.597

*我想扩展@bjlaub 的答案。一开始是评论，但我打字太多了。我同意确认的概念，但相信它可以起源于多个地方*。

这种通信有多种方法，这完全取决于您在系统中所追求的行为。

首先，您可以在工作人员完成每个任务时发送消息，或者在接收器接收每个任务时从接收器发送消息。现在我没有解决套接字的类型，只是通信的行为。我相信从接收器发送它会更有效，因为您只需要一个连接回控制器而不是每个工作人员一个连接。接收器不需要知道总共有多少任务。只是它在收到每个结果后都会触发一条消息。控制器可以确定预期有多少，因为它是提交点，以及当它用尽提交时新的（计数）。

现在不管你是从worker还是sink发送消息，你都可以使用不同的socket类型。如果您希望控制器在所有工作完成之前完全阻塞，那么您可以让它成为推/拉，直到它收到 X 消息（消息内容可以是任何东西。它只是一个触发器）。

如果控制器希望在这些任务发生时能够做其他工作，这可能会受到限制。如果是这样，您可以使用 pub/sub，并让控制器订阅在任务完成时收到通知，并异步维护计数，直到总数得到满足。

最后，也许您希望控制器在您认为合适时向接收器询问状态。您可以为控制器设置一个 req/rep 模式来询问接收器它按需收到了多少请求。

我确信其中一种模式将满足您的特定需求。

# android - Android 浏览器不支持后台模式下带有 HTML5 音频的播放列表

> ID：10696565
> 
> 赞同：2
> 
> 时间：2012-05-22T06:06:15.650
> 
> 标签：android, html, audio, browser, background-process

我想制作基于 Android 浏览器的 Radio Web App。我的 Web App 的关键功能是连续播放音乐列表（mp3 文件）...... JavaScript 代码很简单...... 它在 PC 浏览器、iOS safari 和 Android Dolphin 浏览器（第 3 方浏览器）中运行良好......

* * *

```
var audioPlayer = new Audio();

audioPlayer.addEventListener('ended', nextSong, false);

function nextSong() {
  audioPlayer.src = nextMusic_src; 
} 
```

* * *

但。在 Android 默认浏览器中，当 android 处于后台模式（主屏幕模式和 LCD-off 睡眠模式）时，Android 浏览器的 onPause() 会阻止“结束”事件和 nextSong() 的执行。所以，我的网络应用程序只能播放一首音乐......并且不再工作...... Android浏览器的onPause（）源代码是这样的......

* * *

## 浏览器活动.java

```
public class BrowserActivity extends Activity 
{

   private Controller mController;

   // ...

   @Override

   protected void onPause() {

       if (mController != null) {
           mController.onPause();        //   <<==== here
       }
       super.onPause();
   }

} 
```

* * *

## 控制器.java

```
public class Controller implements WebViewController, UiController {

   protected void onPause() {

       // ...
       mActivityPaused = true;
       // ...
       mUi.onPause();
       mNetworkHandler.onPause();        //   <<==== here

       WebView.disablePlatformNotifications();      //   <<====here
   }

} 
```

* * *

* * *

## NetworkStateHandler.java

```
public class NetworkStateHandler {

   // ...

   void onPause() {

       // unregister network state listener

       mActivity.unregisterReceiver(mNetworkStateIntentReceiver);  //  <<==== here

   }

} 
```

* * *

是否有任何浏览器策略可以防止后台模式中的事件......？如果没有，我怎么能注意到这个报告给谷歌开发者请求使用网络应用播放背景音乐......？我认为不是基于 WebView 的网络应用程序（混合），而是基于浏览器的网络应用程序......谢谢......

郭诺贤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:12:02.543

Droid 的结束事件不会持续触发。我听说，它在 ICS 中已修复。但是姜饼和以前的有问题。

除了收听 .ended 之外，您是否可以收听 .timeupdate 并在该处理程序中查看时间是否是歌曲的结尾？这可能会解决您的问题。

# c# - 在扩展类本身中使用扩展方法

> ID：10696567
> 
> 赞同：5
> 
> 时间：2012-05-22T06:06:28.470
> 
> 标签：c#, logging, extension-methods

假设我有一个界面，如下所示：

```
public interface ILoggable
{
    void Log(Func<string> message, Logger.Type type);
} 
```

还有一些扩展方法，像这样：

```
public static class Logger
{
    public static void Log(this ILoggable loggable, Func<string> message) { loggable.Log(message, Type.Information); }
    public static void Log(this ILoggable loggable, string prefix, byte[] data, int len) { /* snip */ }
    public static void Log(this ILoggable loggable, Exception ex) { /* snip */ }
    // And so on...
} 
```

然后在任何`class CoreService : ServiceBase, ILoggable`或这样的情况下，我将它实现`public void Log(Func<string> message, Logger.Type type)`为我喜欢的任何东西（公共修饰符有点……）并使用所有扩展方法来进行实际的日志记录。

到目前为止这么好……还是不太好？这种方法有问题吗？如果没有，那么为什么会带来不便：

```
catch (Exception ex) {
    this.Log(ex); // this works
    Log(ex); // this goes not 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:09:44.383

这对我来说似乎是一种合理的方法¹ - 但明确声明的要求`this`只是语言如何围绕扩展方法工作的一部分。我怀疑这会使语言规范的各个方面变得更清晰，而且这个要求非常罕见（而且解决方法也足够简单），人们认为使用当前的解决方案比仅仅为了避免在一个比较少见的场景。

简单名称的成员查找（C# 4 规范的第 7.6.2 节）已经足够复杂，而且不会变得更糟。不要忘记简单名称可以引用类型或类型参数，以及方法。那里已经发生了很多事情。

当我开始工作时，我会检查第 7.6.5.2 节（扩展方法调用）周围是否有任何注释，这些注释提供了关于此的“内部信息”。

* * *

^(1回想起来，进行日志记录的实体)*还想*记录其他事情似乎有点奇怪- 我希望它看到的唯一一种异常是当日志记录失败时，在这种情况下记录异常会也失败了。

# android - GridView中每个项目的高度不同

> ID：10696572
> 
> 赞同：10
> 
> 时间：2012-05-22T06:06:42.170
> 
> 标签：android, gridview

我的客户开发了一个 iPhone 应用程序，该应用程序有一个照片库，其中包含不同高度的照片，所以画廊看起来像这样：

![图库模板](../Images/8aaabb6af2fe6a075f192fde04dc6dbd.png)

我被要求在 Android 上做同样的事情，所以我一直在尝试用 GridView 来做这件事，但没有运气，我什至开始相信这在 Android 中是不可能的！

我的问题是，这可以在 Android 中使用 Gridview 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:41:35.197

这被称为 Masonry-View，实现它并不容易，因为现在没有太多有用的东西。

有[一些可用的](http://code.google.com/p/android-masonry/) [库](https://github.com/expilu/AntipodalWall)，但是当我几个月前尝试它们时，它们并不能满足我的需求，因此我放弃了使用 Masonry 的想法。但你可以试一试。也许他们有所改进，或者在一些更好的东西之间。

# java - 如何在 Java 中连接到网络摄像头？

> ID：10696580
> 
> 赞同：3
> 
> 时间：2012-05-22T06:07:13.460
> 
> 标签：java, webcam, hardware-interface

我有一个表单，我想在其中捕获人的图像并在表单中显示该图像。

如何通过 java 连接到网络摄像头并在表单中显示该图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:13:06.317

您可以使用[JavaCV](http://code.google.com/p/javacv/)来捕获图像。

这段代码应该让你开始（取自[这里](https://stackoverflow.com/questions/276292/capturing-image-from-webcam-in-java)）：

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.VideoInputFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
public class GrabberShow implements Runnable {
    //final int INTERVAL=1000;///you may use interval
    IplImage image;
    CanvasFrame canvas = new CanvasFrame("Web Cam");
    public GrabberShow() {
        canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    }
    @Override
    public void run() {
        FrameGrabber grabber = new VideoInputFrameGrabber(0); 
        int i=0;
        try {
            grabber.start();
            IplImage img;
            while (true) {
                img = grabber.grab();
                if (img != null) {
                    cvFlip(img, img, 1);// l-r = 90_degrees_steps_anti_clockwise
                    cvSaveImage((i++)+"-capture.jpg", img);
                    // show image on window
                    canvas.showImage(img);
                }
                 //Thread.sleep(INTERVAL);
            }
        } catch (Exception e) {
        }
    }
} 
```

另一种选择是使用 Java Media Framework ( [JMF](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html) )。[你可以在这里](http://leejava.wordpress.com/2009/09/23/jmf-webcam-app-with-saving-jpeg/)找到一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:23:35.753

You can use [Webcam Capture](https://github.com/sarxos/webcam-capture) project to do that. It's working on Windows XP, Vista, 7, Linux, Mac OS, Raspberry Pi and more. There is a ready-to-use Swing component extending JPanel which can be used to display image from your webcam. Please found [this example](https://github.com/sarxos/webcam-capture/blob/master/webcam-capture/src/example/java/WebcamViewerExample.java) for more details of how this can be done - it presents some advanced capabilities of this component, but basic usage would be the following:

```
JFrame window = new JFrame("Test webcam panel");
window.add(new WebcamPanel(Webcam.getDefault()));
window.pack();
window.setVisible(true);
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

After you run this code you should see JFrame with image from your webcam inside.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T07:25:03.497

```
Webcam.setAutoOpenMode(true);
BufferedImage image = Webcam.getDefault().getImage();
ImageIO.write(image, "PNG", new File("F:/test.png")); 
```

can download the latest version from [https://github.com/sarxos/webcam-capture](https://github.com/sarxos/webcam-capture)

and add other library file that in the zip file

# windows-phone-7 - 禁用屏幕捕获 wp7

> ID：10696581
> 
> 赞同：1
> 
> 时间：2012-05-22T06:07:14.473
> 
> 标签：windows-phone-7

我正在开发一个与安全相关的 Windows Phone 应用程序。我需要为我的应用程序禁用/阻止屏幕截图。

`FLAG_SECURE`在 Android 中，我们曾经为要阻止屏幕捕获的窗口设置一个标志。wp7中也有类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:43:52.670

除非您使用自制应用程序，否则您无法在 Windows Phone 上进行屏幕截图，所以我不会太担心。

即使市场上有屏幕捕获应用程序，您也无法保证安全。即使您找到了防止屏幕捕获的方法，您如何防止用户使用相机拍摄手机照片，或者在模拟器上侧载应用程序然后对模拟器进行屏幕捕获？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:36:45.063

目前没有可供开发人员使用的 API 允许您使用**锁定的设备**执行屏幕截图。

替代方案如下：

1.  解锁您的设备并旁加载基于自制软件的屏幕捕获应用程序之一。
2.  拍摄屏幕本身的照片（粗略，但它会完成这项工作）。

微软表示他们不打算在不久的将来改变这一点[（CNET 文章）](http://news.cnet.com/8301-10805_3-20028597-75.html)

# php - 是否有（PHP）快捷方式来压缩文件夹中的所有文件（执行 ZipArchive extractTo 操作的相反操作）？

> ID：10696582
> 
> 赞同：0
> 
> 时间：2012-05-22T06:07:17.240
> 
> 标签：php, zip, ziparchive

[此答案](https://stackoverflow.com/a/8889126/612253)中的代码只是将 zip 文件的内容提取到文件夹中：

```
<?php
$zip = new ZipArchive;
$res = $zip->open('file.zip');
if ($res === TRUE) {
  $zip->extractTo('/myzips/extract_path/');
  $zip->close();
  echo 'woot!';
} else {
  echo 'doh!';
}
?> 
```

是否有任何简单[的方法（没有 foreach 循环，每个文件，并递归下降到子文件夹](https://stackoverflow.com/questions/1334613/how-to-recursively-zip-a-directory-in-php)）在 PHP 中反向运行此操作，以便再次创建原始 zip 文件？

“extract_path”文件夹不能包含在 zip 文件中，这就是为什么我不能简单地使用上面链接的递归函数。

这将是执行这些 linux shell 命令的 PHP 等价物，这些命令非常简单：

```
cd /myzips/extract_path/
zip /dest/file.zip * 
```

（在任何人评论“你为什么要这样做？”之前，这是因为我想修改一个文件然后重新创建 zip 文件）

# .net - .Net Google OAuth 令牌 WebRequest 错误请求协议错误

> ID：10696584
> 
> 赞同：1
> 
> 时间：2012-05-22T06:07:25.087
> 
> 标签：.net, httpwebrequest, oauth-2.0, content-type

在我尝试获取令牌之前，我对这个 OAuth2 的东西做得很好。

我想我正在做一些与编码有关的事情。

这是我的代码：

```
string url = "https://accounts.google.com/o/oauth2/token";

StringBuilder postDataBuider = new StringBuilder();
postDataBuider.AppendLine("code=" + code);
postDataBuider.AppendLine("client_id=" + System.Configuration.ConfigurationManager.AppSettings["GoogleApplicationClientId"].ToString());
postDataBuider.AppendLine("client_secret=" + System.Configuration.ConfigurationManager.AppSettings["GoogleApplicationClientSecret"].ToString());
postDataBuider.AppendLine("redirect_uri=" + System.Configuration.ConfigurationManager.AppSettings["AppDomain"] + "Account/YouTubeOAuth2Callback");
postDataBuider.AppendLine("grant_type=authorization_code");

string postDataStr = postDataBuider.ToString();
// byte[] postDataBytes = System.Text.Encoding.GetEncoding("application/x-www-form-urlencoded").GetBytes(postDataStr);
byte[] postDataBytes = System.Text.Encoding.UTF8.GetBytes(postDataStr);

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Accept = "application/json";
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = postDataBytes.Length;

Stream dataStream = request.GetRequestStream();
dataStream.Write(postDataBytes, 0, postDataBytes.Length);
dataStream.Close();

string responseStr = "";

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    using (Stream responseStream = response.GetResponseStream())
    {
        using (StreamReader readStream = new StreamReader(responseStream, Encoding.UTF8))
        {
            responseStr = readStream.ReadToEnd();

            if (String.IsNullOrWhiteSpace(responseStr))
            {
                throw new Exception("Response is null or empty");
            }
        }
    }
} 
```

这是我记录的有关错误的信息：

```
The remote server returned an error: (400) Bad Request.

Response Status: ProtocolError
Response Header: Cache-Control = no-cache, no-store, max-age=0, must-revalidate
Response Header: Pragma = no-cache
Response Header: Expires = Fri, 01 Jan 1990 00:00:00 GMT
Response Header: Date = Tue, 22 May 2012 05:55:54 GMT
Response Header: Content-Type = application/json
Response Header: X-Content-Type-Options = nosniff
Response Header: X-Frame-Options = SAMEORIGIN
Response Header: X-XSS-Protection = 1; mode=block
Response Header: Server = GSE
Response Header: Transfer-Encoding = chunked 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:51:06.980

不知道你是否还遇到这个问题，但是你的Request body应该在同一行（改成） `StringBuilder.AppendLine`，`StringBuilder.Append`参数用“&”隔开：

```
StringBuilder postDataBuider = new StringBuilder();
postDataBuider.Append("code=" + this.code.Text);
postDataBuider.Append("&client_id=" + clientId);
postDataBuider.Append("&client_secret=" + clientSecret);
postDataBuider.Append("&redirect_uri=" + redirectUri);
postDataBuider.Append("&grant_type=authorization_code"); 
```

在这些更改之后，您的代码可以正常工作并返回访问令牌。

# javascript - 如何使用 Javascript 在 Blackberry Phonegap 中显示当前文档的 URL？

> ID：10696585
> 
> 赞同：0
> 
> 时间：2012-05-22T06:07:38.250
> 
> 标签：javascript, html, blackberry, cordova, blackberry-simulator

如何使用 Javascript 在 Blackberry Phonegap 中显示当前文档的 URL？我试图显示当前文档的 url，但它显示了近 1000 行加密文本。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:41:01.617

您是否尝试过警报（location.href）？

# php - 网址意外更改

> ID：10696586
> 
> 赞同：0
> 
> 时间：2012-05-22T06:07:45.053
> 
> 标签：php, html, codeigniter, cakephp

我在表单帖子的操作中对 url 有一点问题。我的表格看起来像这样

```
<form action="../method" type="POST">
    <input type="submit" value="Submit">
</form> 
```

我的方法看起来像

```
function method()
{
   $bool=dosomething();
   if($bool)
   {
      $this->redirect('mainpage');
   }
   else
   {
      $this->redirect('currentpage');
   }
} 
```

如果 $bool 值被评估为 false，我希望我的按钮按下事件将我引导到当前页面。但是我第一次访问当前页面时，url 是例如`http://localhost/dir/controllers/method`当我将鼠标悬停在提交按钮上但是当上面的 $bool 变为 false （第二次重新加载）时，上面按钮的执行 url 变为`http://localhost/dir/method`.

我现在应该解决什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:28:16.453

不要使用表单来重定向。

您可以像这样在自动加载中激活 url_helper：

> 自动加载['helper'] = array('url');

用这个替换你的表格：

> echo anchor('控制器/方法', '我的文本', 'title="myTitle"');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:28:22.983

是的，就像 Broncha 说的：你的表单标签中的 action 属性是错误的。“../”表示父目录，所以他“上一级”。

只需使用 Cakes Form Helper 创建表单：
[http ://book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

或者 url() - Cakes HtmlHelper 的方法：
[http ://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::url](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3aurl)

# android - Ant创建android项目

> ID：10696588
> 
> 赞同：0
> 
> 时间：2012-05-22T06:07:48.287
> 
> 标签：android, ant, project

我知道 Ant 是一个构建工具。我们编写脚本（发布 android 项目时的步骤）来构建一个 android 项目并创建一个签名的 apk。这就是 Ant 的用途之一。

但是我想要一个方法/脚本来在 Android 中创建一个新项目，并且我还想构建它以便可以通过该方法/脚本创建一个 apk 文件。可以通过蚂蚁吗？
即 Ant 脚本使用脚本中提供的包名称和活动名称创建一个新项目，构建它并创建一个准备加载到模拟器或设备中的 apk 文件。

上述问题是否有任何解决方案（方法/脚本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:11:12.310

是的，您可以通过 ant 通过命令行调用“android create project”来执行此操作，这将生成所有 ant 脚本。

# c# - 使用 c# 从 doc 文件中检索表数据

> ID：10696591
> 
> 赞同：2
> 
> 时间：2012-05-22T06:08:00.220
> 
> 标签：c#, interop

我正在从事一个涉及从 .doc 或 .docx 文件获取数据的项目。输入要求采用表格格式。是否可以按行方式或作为数据集从表中检索数据。我正在使用**Microsoft.Office.Interop.Word**从 doc 文件中获取数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T06:48:24.627

您可以使用 Document 接口的属性 Tables 来获取包含文档中所有表格的集合。对于此集合中的每个表，您可以获得行和每行的单元格。

即，如果 app 是您的 Application 对象，您可以编写类似这样的内容来获取每个单元格中包含的文本（假设您的文档中恰好有一个）：

```
 string aCellText;
    foreach (Row aRow in Application.ActiveDocument.Tables[0].Rows)
        foreach (Cell aCell in aRow.Cells)
            aCellText = aCell.Range.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:11:37.500

用这个词是不可能的，但是如果你想要这样的东西，你应该把表格数据放在你的 excel 文件中，然后你可以很容易地在数据集对象中读取它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:18:58.793

这是不可能从 .doc 或 .docx 文件中获取数据集对象中的数据的。但是，如果您的数据是表格形式并且也在 Excel 工作表中，那么您可以检索数据集对象中的数据。MS Word 用于文档目的，excel 用于维护数据表。

# android - 如何从选定的联系人那里获取电话号码？

> ID：10696593
> 
> 赞同：2
> 
> 时间：2012-05-22T06:08:08.673
> 
> 标签：android, android-contacts

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {

    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
    case (1) :
        if (resultCode == Activity.RESULT_OK) {
            Uri contactData = data.getData();
            Cursor cursor =  managedQuery(contactData, null, null, null, null);
            ContentResolver cr = getContentResolver();
            Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
            Cursor phones = cr.query(Phone.CONTENT_URI, null, null, null, null);
            if (cur.getCount() > 0) {
                while (cur.moveToNext()) {
                    String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                    //String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0){
                        Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, 
                                             ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                                             new String[]{id}, null);
                        //while (pCur.moveToNext()) {
                            // Do something with phones
                            //nameView = (TextView) findViewById(R.id.textView4);
                            //nameView.setText(name.toString());
                        //} 
                        pCur.close();
                    }
                }
            }

            cursor.moveToFirst();
            String name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME));
            String number = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER));
            //String number = phones.getString(phones.getColumnIndex(Phone.NUMBER)); 
```

我想从选定的联系人中检索电话号码，并且我成功检索了联系人姓名，但是对于该号码我仍然无法获取...有人可以在编码部分帮助我从选定的联系人中检索电话号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:15:51.683

```
 final Uri Person = Uri.withAppendedPath(
            ContactsContract.CommonDataKinds.Phone.CONTENT_FILTER_URI,
            Uri.encode(number));

    final String[] projection = new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME };

    final Cursor cursor = context.getContentResolver().query(Person, projection,
            null, null, null);

    if (cursor.moveToFirst()) {

        final String number = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        return number;
    }
    cursor.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:17:20.057

试试下面的，

```
public void getContactDetails(String conatctname)
    {
        try
        {
            ContentResolver cr =getContentResolver();
            Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
            while (cursor.moveToNext()) 
            {

                FirstName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                if(FirstName!=null)
                {
                    try
                    {
                    String[] splitval=FirstName.split(" ");
                    if(splitval.length>=1)
                    {
                        FirstName=splitval[0];
                        if(FirstName.equals(conatctname))
                        {
                            if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
                            {
                            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
                            while (pCur.moveToNext()) 
                            {
                            PhoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                            PhoneNumberArray.add(PhoneNumber);
                            }
                            pCur.close();
                        }

                    }
                    }
                    catch(Exception error)
                    {
                        Log.d("SplitError", error.getMessage());
                    }                   

            }
            cursor.close();
        }
        catch (NumberFormatException e)
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T07:09:22.490

您可以从电话联系人中获取选定的姓名和号码

```
 Uri uri = data.getData();
        String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER};

        Cursor people = getActivity().getContentResolver().query(uri, projection, null, null, null);

        int indexName = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
        int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

        people.moveToFirst();
        do {
            String name   = people.getString(indexName);
            String number = people.getString(indexNumber);
            System.out.println(name+number);

        } while (people.moveToNext()); 
```

# javascript - 嵌入式 Javascript

> ID：10696595
> 
> 赞同：0
> 
> 时间：2012-05-22T06:08:18.613
> 
> 标签：javascript, html

我打算从 Linux/Unix 端的 perl 脚本创建 HTML 报告。该报告主要以表格形式包含各种统计数据。由于有很多这样的表，我想使用选项卡将它们分成类别。然后该报告将作为附件发送到某些电子邮件 ID。

问题是：

1.  是否有一个很好的 HTML + Javascript 示例来创建此类选项卡？我找不到完整的例子

2.  像 jQuery 这样的库符合要求，只是我还需要提供 .js 文件，这变得有点乏味。是否有可能以某种方式在 HTML 中嵌入 jQuery（或任何其他库）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:17:01.057

我希望这能回答你的问题

1.  使用 jQuery UI，它是 jQuery 库的扩展，或者你可以使用 ExtJS，有很多 UI 库取决于你想要多少。

2.  为什么给 JS 文件会变得乏味？使用脚本标签调用外部 JS 文件来使用这些库。在您的 HTML 中嵌入 JS 会使它变得混乱，这是一种不好的做法。

查看

*   jquery 的标签示例：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)
*   ExtJS 选项卡示例：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/tabs/tabs.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/tabs/tabs.html)

**编辑：**

如果您打算在电子邮件中使用 JS，请忘记它。许多电子邮件客户端删除了 JS 内容。反而

1.  通过电子邮件共享 Google 电子表格链接
2.  生成包含报告的 PDF，有很多库可以将 HTML 转换为 pdf ，使用它们并将 HTML 表格转换为 PDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:41:22.533

对此采取一种挑逗方法，它混合了 INLINE html + 实际链接以转到真实内容。

1.  只需截取真实标签的屏幕截图，并将其作为标题图像放在您的电子邮件中
2.  在标签图像下方，仅放置标签内容的第一页
3.  单击电子邮件中的选项卡后，会将它们带到实际页面
4.  URL 可以被标记化并且是 HTTPS，因此通过链接查看会比较安全

正如其他人所建议的那样，真正的选项卡可以使用 jQuery UI。

# clojure - Clojure 函数命名约定

> ID：10696597
> 
> 赞同：3
> 
> 时间：2012-05-22T06:08:31.840
> 
> 标签：clojure

## 语境

假设我有协议 ICursor、IFoo、IBar，那么我可以有一个名为：

```
(defn IFoo->IBar [foo] ... ) 
```

现在，假设我有一个带有两个参数的函数

```
x: ICursor
y: IFoo 
```

并输出一个 IBar 类型的对象。

现在，是否有任何标准方法可以在函数名中表示这一点？例如，以下都不起作用：

```
(defn ICursor,IFoo->IBar [x y] ...) 
```

因为“，”被视为空格

```
(defn (ICursor, IFoo)->IBar [x y] ... ) 
```

因为 () 被视为函数应用程序。

```
(defn [ICursor, IFoo]->IBar [x y] ... ) 
```

因为 [] 被视为向量。

## 问题

是否有一种标准方法可以在函数名称中对协议类型的参数进行编码？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T06:35:42.360

我不认为有任何这样的推荐方式，它似乎是一种类型注释。有一个这样的项目围绕在此[链接](https://github.com/frenchy64/typed-clojure)上为 clojure 代码提供类型注释。

您可以使用类似：`(defn ICursor->IFoo->IBar [x y] ...)` 这表示该函数将 ICursor 和 IFoo 作为参数并返回 IBar，所以基本上最后一个类型是返回类型，在此之前一切都是参数类型，但我不确定这是否可以是长期或惯用的解决方案因为那么方法实际名称在哪里 :) 这很重要，然后键入注释。

# oracle - 用于终止在给定时间内未完成的作业的 Oracle 过程

> ID：10696606
> 
> 赞同：0
> 
> 时间：2012-05-22T06:09:24.647
> 
> 标签：oracle, session, plsql, oracle11g, jobs

我创建了一个 oracle 程序来重新安排在给定时间内未完成的作业：

```
create or replace procedure kill_stuck_jobs
as
begin     
    for x in (  
            select j.sid,
                   s.spid,
                   s.serial#,
                   j.log_user,
                   j.job,
                   j.broken,
                   j.failures,
                   j.last_date,
                   j.this_date,
                   j.next_date,
                   j.next_date - j.last_date interval,
                   j.what
                  from 
                  (select 
                  djr.SID, 
                  dj.LOG_USER,
                  dj.JOB, 
                  dj.BROKEN,
                  dj.FAILURES, 
                  dj.LAST_DATE,
                  dj.LAST_SEC,
                  dj.THIS_DATE, dj.THIS_SEC, 
                  dj.NEXT_DATE, dj.NEXT_SEC, dj.INTERVAL, dj.WHAT
                  from dba_jobs dj, dba_jobs_running djr
                  where dj.job = djr.job ) j,
                  (select p.spid, s.sid, s.serial#
                  from v$process p, v$session s
                  where p.addr = s.paddr ) s
                  where j.sid = s.sid and 
                  j.next_date+15/1440 < sysdate  
        ) loop  
         EXEC DBMS_JOB.BROKEN(x.job,TRUE);
         execute immediate 'alter system disconnect session '''|| x.sid|| ',' || x.serial# || ''' immediate';
         EXEC DBMS_JOB.BROKEN(x.job,FALSE);
         dbms_output.put_line( 'Alter session done' );             
    end loop;  
end; 
```

但是此过程编译时出错：

```
PLS-00103: Encountered the symbol "DBMS_JOB" when expecting one of the following:

   := . ( @ % ;
The symbol ":=" was substituted for "DBMS_JOB" to continue. 
```

![在此处输入图像描述](../Images/703b917d425b37bad05de960074d57e5.png)

*   这里是关于 dbms_job 和 dbms_scheduler_job 的讨论。实际上这里的问题是我使用链接数据库创建了物化视图，但有时查询在与`SQL*Net more data from dblink`. 我使用上述过程来终止创建物化视图时创建的作业，并且我正在使用以下方法终止会话：

    ```
    create or replace procedure kill_stuck_refresh as 
     begin     
         for x in (  
                select username, osuser, sid, serial#, seconds_in_wait, 
                event, state, wait_class
                from v$session
                where username is not null 
                      and seconds_in_wait > 600 
                      and event = 'SQL*Net more data from dblink'  
            ) loop  
            execute immediate 'alter system disconnect session '''|| x.sid  
                         || ',' || x.serial# || ''' immediate';
            dbms_output.put_line( 'Alter session done' );             
         end loop;  
       end; -- end of kill_stuck_refresh; 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:49:13.600

您的错误堆栈都源于您的光标无效这一事实。原因是 ORA-00942。这可能意味着表名拼写错误，但是当您使用数据字典时，它通常指向权限问题，即表（或本例中的视图）不存在于您的范围内。

这给我们带来了您的评论：

> “我可以独立运行选择查询，我认为这意味着我拥有这些特权。”

这向我表明，您的权限已授予您拥有权限的角色。我们可以使用通过 SQL 中的角色授予的权限，但不能使用它们来构建永久对象，例如视图或存储过程。为此，您需要对直接授予您的用户的那些视图具有权限。没有变通方法，这是 Oracle 安全模型的工作方式。

* * *

顺便说一句，您应该调查为什么这些工作需要太长时间。我假设这是一个持续存在的问题（否则你为什么要构建一个存储过程来杀死这些工作？）。杀死工作是一种钝器，它浪费资源并抹杀有用的证据。一个更好的主意是找出性能不佳的根本原因并修复它。也许阻塞会话存在问题，您需要锁定策略。也许你的 SQL 调得不好。其他一些工作可能同时运行并占用所有资源，在这种情况下，您需要一个体面的调度程序。或者您现在可能刚刚获得了更多数据——成功的代价——并且您需要给工作更多的时间来完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:11:28.940

您不需要`EXEC`在这种情况下（在存储过程/函数中）。只有当您想从 SQL（从 SQL*Plus）调用存储过程时才需要它。直接调用`dbms_job.broken()`即可：

```
...
DBMS_JOB.BROKEN(x.job,TRUE);
execute immediate 'alter system disconnect session '''|| x.sid|| ',' || x.serial# || ''' immediate';
DBMS_JOB.BROKEN(x.job,FALSE);
dbms_output.put_line( 'Alter session done' );
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T14:52:34.800

正如@David Aldridge 提到的，DBMS_Scheduler 主要是为了取代 DBMS_Job（实际上是从 10g 开始）。他没有提到的是为什么这会对你有所帮助。

DBMS_Scheduler 对其作业提供了更多控制，包括更好的日志记录。但是，对您来说最重要的是，DBMS_Scheduler`max_run_duration`为作业添加了一个参数。如果作业的运行时间超过该持续时间，则作业将自动结束（并且可能以比终止会话更优雅的方式）。然后，只要`max_failures`未设置该参数，该作业将在下一个预定时间再次尝试。

如果您可以将当前作业迁移到 DBMS_Scheduler，您就可以省去编写代码以提供已经存在的功能的麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:33:52.087

如果您使用的是 Oracle 11g，那么您应该使用 DBMS_Scheduler，而不是 DBMS_Job。首先看看迁移到新包，然后在这种情况下重新考虑您的要求。

# javascript - Flash Video Player 自动启动和控制按钮

> ID：10696611
> 
> 赞同：-6
> 
> 时间：2012-05-22T06:09:49.873
> 
> 标签：javascript, php, flash

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="500" height="208">
    <param name="movie" value="Myanimation.swf" />
    <param name="quality" value="high" />
    <embed src="Myanimation.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="500" height="208" autostart="false" ></embed>
</object> 
```

我正在使用此代码播放 Flash 视频。自动启动不起作用。以及如何创建开始/停止/暂停按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:13:58.560

检查此链接：http: [//jquery.malsup.com/media/video.html](http://jquery.malsup.com/media/video.html)

[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

[http://videolightbox.com/rq/jquery-video-player/](http://videolightbox.com/rq/jquery-video-player/)

# ruby - 如何为 https 请求实现自定义“超时”？

> ID：10696612
> 
> 赞同：0
> 
> 时间：2012-05-22T06:09:57.800
> 
> 标签：ruby, timeout

我有通过 https 获取数据的工作代码（如下）。事实上，它通过 php 运行一些测试。我使用了正常的标准超时。现在，在“等待”服务器响应时，我需要实现计时器。因为在某些情况下测试不会完成 - php 代码不会完成 - ruby​​ 超时工作正常。所以我需要杀死一些进程来捕获现有 https 会话中的错误。

**如何在现有超时之上实现我自己的 https 请求超时？**

现有超时将始终大于自定义超时。例如，现有超时为 10 分钟，自定义为 5 分钟。

```
uri = URI.parse(url)
start = Time.new
http_read_timeout=60*10

connection = Net::HTTP.new(uri.host, 443)
connection.use_ssl = true
begin   
        response = connection.start() do |http|
            http.open_timeout =  50
            http.read_timeout = http_read_timeout
            http.request_get(uri.request_uri)
            # here I need to place a code that is triggered 
            # in case of custom timeout is reached
        end
rescue Timeout::Error
#  "Connection failed
    time_out_message ="security time out - after #{http_read_timeout} sec"
return time_out_message         

end

puts "finished" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:52:48.070

我不明白。您的自定义超时有什么作用？您正在发出 HTTP 请求……它要么返回，要么超时。

您已经在设置超时值。您的代码无法进入未来并告诉您外部代码最终会返回什么，如果确实如此......那么您到底想要它做什么？

但是如果你真的只需要一个外部 Timeout 包装器，你可以使用 Timeout::Timeout。像这样：

```
require 'timeout'
Timeout::timeout(your_timeout_period) do
  run_some_code
rescue => err
  do_something_with err
  # and maybe the below?
  raise
end 
```

# jquery - 简单模态：嵌套模态

> ID：10696613
> 
> 赞同：1
> 
> 时间：2012-05-22T06:10:01.607
> 
> 标签：jquery, simplemodal

我正在使用 jquery simplemodal 插件，但我不确定使用这个插件是否可以从另一个 simplemodal 对话框打开一个 simplemodal 对话框。Ans 我也只想在打开第二个模态对话框时显示打开的第一个模态对话框并显示为灰色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:26:23.083

SimpleModal 不支持嵌套模式。也许其中一些[可能](http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T07:50:32.183

SimpleModal 不支持嵌套模式

检查 bpopup JQuery 插件。它允许嵌套模式弹出窗口非常非常容易。

[http://dinbror.dk/bpopup/](http://dinbror.dk/bpopup/)

在上一个 url 中查找示例 6a ;-)

# ajax - 通过 JSONP 跨域调用

> ID：10696616
> 
> 赞同：0
> 
> 时间：2012-05-22T06:10:31.823
> 
> 标签：ajax, extjs, cross-domain, jsonp

我想显示来自外部域的 html 页面，但无法通过 JSONP 执行此操作，即当页面加载时，页面不包含任何内容。它只是显示一个空白页。请在下面找到我的代码以供参考。代码：

```
 Ext.util.JSONP.request({                
             url:wikiurl,
            callbackKey:'callback',
            params:{},
            callback:function(data){
                console.log(data);
                console.log("inside callback");
            },
            success:function(result,opts){
                console.log(result);
            },
               failure:function(result,opts){
                console.log(result);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:15:23.960

=>网址是什么？

=>谁在发送响应，当有人需要 JASONP 数据时，您需要从服务器发送特定的响应。

=>您正在将所有内容记录到控制台，它不会显示在页面中，可能在萤火虫控制台或类似的控制台中是可见的。

=>要在页面中查看响应，只需将数据转储到页面中的 div 元素中。

# json - 查找和替换 JSON 对象？

> ID：10696620
> 
> 赞同：1
> 
> 时间：2012-05-22T06:11:12.153
> 
> 标签：json, replace

我有一个包含大量不需要的数据的 JSON 文件，我希望摆脱其中的大部分。这是一个巨大的文件，所以我需要进行一个操作来做到这一点。

我尝试了正则表达式，但我尝试的大多数应用程序似乎都卡在了过程的中间。

我需要的只是通过它们的键找到对象并将它们从文件中删除。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:16:56.937

如果文件太大而无法读入内存，您可能需要使用类似[yajl](http://lloyd.github.com/yajl/)的东西，它提供了一个事件驱动的、类似 SAX 的接口。这允许您在读取 ​​JSON 时对其进行更改（并且，我想，将其写入另一个文件）。

# java - Java 小程序可视化编辑器 gui

> ID：10696623
> 
> 赞同：0
> 
> 时间：2012-05-22T06:11:18.657
> 
> 标签：java, user-interface, drag-and-drop, applet, editor

我正在为大学课程开发一个 Java 小程序。在开发 Java 小程序时，最好的 GUI 组件可视化编辑器是什么？除了 Microsoft 技术之外，我对可视化编辑器没有太多经验，Java 小程序可视化编辑器在幕后发生了什么？

日食怎么样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:31:12.017

我推荐 NetBeans IDE。它是 Java 开发的一体化解决方案，多年来他们一直在使用可视化编辑器做伟大的事情。

[http://netbeans.org/](http://netbeans.org/)

您也可以尝试 Eclipse，我两者都用，但我发现 NetBeans 更适合可视化工作，而 Eclipse 更适合 Web 应用程序开发。

# php - 将带有 PHP CURL 的 JSON 发布到 Tin Can API LRS

> ID：10696627
> 
> 赞同：1
> 
> 时间：2012-05-22T06:11:36.050
> 
> 标签：php, json, post, curl

抱歉，我只能发布 2 个超链接，所以我将不得不删除 http：//

**背景** 我，试图在这里转换代码：[https ://github.com/RusticiSoftware/TinCan_Prototypes/blob/92969623efebe2588fdbf723dd9f33165694970c/ClientPrototypes/StatementIssuer/StatementIssuer.java](https://github.com/RusticiSoftware/TinCan_Prototypes/blob/92969623efebe2588fdbf723dd9f33165694970c/ClientPrototypes/StatementIssuer/StatementIssuer.java)

进入 PHP，特别是 makeRequest 函数。此代码将数据发布到符合锡罐标准的学习者记录存储。

我的 PHP 代码的当前版本在这里：tincanapi.co.uk/wiki/tincanapi.co.uk:MediaWikiTinCan

一切都应符合的 Tin Can API 规范在这里：scorm.com/wp-content/assets/tincandocs/TinCanAPI.pdf

还有一个有效的 java 脚本函数，可以在此处以正确的格式发布数据（请参阅我认为的 XHR_request 函数）： [https ://github.com/RusticiSoftware/TinCan_Prototypes/blob/92969623efebe2588fdbf723dd9f33165694970c/ClientPrototypes/GolfExample_TCAPI/scripts/TCDriver.js](https://github.com/RusticiSoftware/TinCan_Prototypes/blob/92969623efebe2588fdbf723dd9f33165694970c/ClientPrototypes/GolfExample_TCAPI/scripts/TCDriver.js)

我无权访问要发布到的代码或服务器，但最终结果应该是此处的输出：beta.projecttincan.com/ClientPrototypes/ReportSample/index.html

**问题** 我正在尝试使用 Curl 在 PHP 中将数据作为 JSON 发布。Curl 返回 'false' 但没有错误，也没有发布数据。

根据本网站上其他问题的建议，我尝试在 POSTFIELDS 的开头添加 'json='，但由于 Java 和 JavaScript 版本确实有这个，我不确定这是正确的。

任何人都可以建议我如何解决这个问题或者我如何从 curl 中得到有用的错误？我的备份是将相关的 JavaScript 输出到用户的浏览器，但是 PHP 应该能够做到这个服务器端吗？

非常感谢任何帮助。

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:15:02.500

至少有一件事是错误的：您不应该`rawurlencode`在`Authorization`标题值上使用。

考虑使用 php 流`json_encode()`和`json_decode()`代替。以下代码有效。

```
function fopen_request_json($data, $url)
{
    $streamopt = array(
        'ssl' => array(
            'verify-peer' => false,
        ),
        'http' => array(
            'method' => 'POST',
            'ignore_errors' => true,
            'header' =>  array(
                'Authorization: Basic VGVzdFVzZXI6cGFzc3dvcmQ=',
                'Content-Type: application/json',
                'Accept: application/json, */*; q=0.01',
            ),
            'content' => json_encode($data),
        ),
    );

    $context = stream_context_create($streamopt);
    $stream = fopen($url, 'rb', false, $context);
    $ret = stream_get_contents($stream);
    $meta = stream_get_meta_data($stream);
    if ($ret) {
        $ret = json_decode($ret);
    }
    return array($ret, $meta);
}

function make_request()
{
    $url = 'https://cloud.scorm.com/ScormEngineInterface/TCAPI/public/statements';

    $statements = array(
        array(
            'actor' => array(
                'name' => array('Example Name'),
                'mbox'  => array('mailto:example@example.com'),
                'objectType' => 'Person',
            ),
            'verb' => 'experienced',
            'object' => array(
                'objectType' => 'Activity',
                'id'=> 'http://www.thincanapi.co.uk/wiki/index.php?Main_Page',
                'definition' => array(
                    'name' => array('en-US'=>'TinCanAPI.co.uk-tincanapi.co.uk'),
                    'description' => array('en-US'=> 'TinCanAPI.co.uk-tincanapi.co.uk'),
                ),
            ),
        ),
    );
    return fopen_request_json($statements, $url);

}

list($resp, $meta) =  make_request();

var_export($resp); // Returned headers, including errors, are in $meta 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T13:29:35.920

我们现在发布了一个专门用于 PHP 的开源库，它使用与公认答案类似的方法，但也完善了库的其余部分。看：

[http://rusticisoftware.github.io/TinCanPHP/](http://rusticisoftware.github.io/TinCanPHP/)

[https://github.com/RusticiSoftware/TinCanPHP](https://github.com/RusticiSoftware/TinCanPHP)

# networking - 在Vxworks中，Send() api在什么情况下会卡住或者需要更多时间？

> ID：10696629
> 
> 赞同：0
> 
> 时间：2012-05-22T06:11:56.223
> 
> 标签：networking, vxworks

我正在使用两个 m/c A 和 B，它们都具有相同的 vxworks 映像和硬件。但唯一的变化是应用程序。假设 M/c A 是服务器，M/c B 是客户端。而通过以太网客户端 M/c 的通信无法发送数据。它卡住了 send() 并且任务状态将是挂起。

```
wState = send(vstCCEUSerSocket.wCCEUAcceptFD,(char* )vstCCEUAppTask.rgubyCCEUTxPkt,sizeof(vstCCEUAppTask.rgubyCCEUTxPkt),0);
/*logMsg("\nTrmtd = %d\t",wState);*/ 
if(wState == ERROR) 
{ 
   perror("write"); 
   Close the Fd
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:16:31.327

来自[VxWorks 操作系统库 API 参考](http://www.akae.cn/study/ebook/wrs/vx5.5/vxworks_os_libraries_api_reference_5.5.pdf)

第 497/498 页您可以找到有关 connect() 的信息，但还有一个 connectWithTimeout()

第 1203/1204 页您可能会发现一些有关 TCP 套接字的有趣项目。例如 KEEP_ALIVE

如果您依赖快速连接时间，并且想要保持控制，则可以将 connectWithTimeout 与保持连接结合使用。

我可能需要一天的时间来回忆旧代码，以检查我是如何在我的一个项目中解决这个问题的。

[VxWorks 5.5 网络程序员指南 - 流套接字](http://www-kryo.desy.de/documents/vxWorks/V5.5/vxworks/netguide/c-sockets.html#87079)

# c - 启动时应用程序名称以彩色文本和控制台中的正确模式显示

> ID：10696632
> 
> 赞同：3
> 
> 时间：2012-05-22T06:12:24.507
> 
> 标签：c, stdout

我想在控制台上启动应用程序时以特定模式添加应用程序名称和文本颜色。模式类似于下面的例子。

```
 _   _ ____  _
 *  Project                     ___| | | |  _ \| |
 *                             / __| | | | |_) | |
 *                            | (__| |_| |  _ <| |___
 *                             \___|\___/|_| \_\_____| 
```

C中是否有任何库或API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:56:21.220

您可以使用 VT100 命令。这里的好例子：http: [//forums.anandtech.com/showthread.php?t=1278116](http://forums.anandtech.com/showthread.php?t=1278116)

# c# - Excel VBA项目没有关闭

> ID：10696636
> 
> 赞同：3
> 
> 时间：2012-05-22T06:12:42.073
> 
> 标签：c#, excel, comaddin, vba

我有一个 COM 插件，我在其中处理 excel 事件。我点击`Alt F11`查看与excel相关的VBA项目。但是，当我关闭工作簿时，项目资源管理器中的 Excel VBA 项目也没有关闭。

当我的 COM 插件未安装时，它会正常关闭。发生了什么事，我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T12:34:01.660

我在我的 COM-Add-In (C# / VSTO) 中遇到了类似的问题：

*   当工作簿关闭并将它们设置为空时，您必须释放代码中的所有工作簿引用。
*   如果您在内部存储对工作簿的引用，请始终使用[Wea​​kReference](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0CDAQFjAB&url=http%3A%2F%2Fmsdn.microsoft.com%2Fde-de%2Flibrary%2Fsystem.weakreference(v%3Dvs.110).aspx&ei=avEOVKHpHsHfaO3fgaAN&usg=AFQjCNH2R3k02cZWnaqi9ZoItQKmlFz6Vw&sig2=RR9A7RBwrdAKdctWLpmFqg&bvm=bv.74649129,d.d2s "弱引用")让垃圾收集器完成其工作。

就我而言，我在自定义任务窗格中有一个包含所有工作簿的 Windows.Forms.Tree。引用的 Workbook 对象存储在 TreeNode.Tag 中。在我关闭工作簿后，树会根据事件进行更新，但此时我已经生成了我称之为 VBA 工作簿“幽灵”的东西。我通过用 Workbook.FullName-String 替换 TreeNode 标记中的 Workbook-Objects 解决了这个问题（以便稍后引用它们）。

希望它有帮助，约尔格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:54:02.800

问题在于内存中剩余的工作簿对象。通过清除工作簿停用事件中的对象，当我关闭工作簿时，VBA 项目将关闭。

看到这个： [http ://social.msdn.microsoft.com/Forums/en-US/vsto/thread/377fbebc-021d-4e48-aaef-d4658cc221b3](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/377fbebc-021d-4e48-aaef-d4658cc221b3)

谢谢

# blackberry - 显示 BlackBerry 应用程序的进度屏幕

> ID：10696644
> 
> 赞同：-3
> 
> 时间：2012-05-22T06:13:07.627
> 
> 标签：blackberry

BlackBerry 应用程序从远程服务器获取数据时如何显示进度屏幕？

我想要一个没有任何按钮的没有动画 gif 的进度屏幕。（确定或取消）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:22:47.910

```
 public class ProgressDialog extends PopupScreen
    {
        public ProgressDialog(String waitString)
        {
            super(new VerticalFieldManager());
            add(new LabelField(waitString,Field.FIELD_HCENTER));//add a string which u want to show for progressing
        }
    }

ProgressDialog progress = new ProgressDialog("Please Wait...");
//Add screen to UI
UiApplication.getUiApplication().pushScreen(progress);

//Remove screen from UI
progress.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:51:32.880

```
ProgressBar progressBar = new ProgressBar("Waiting for location update....",50,1000);

progressBar.start(); // Start progress bar
progressBar.remove(); //remove progress bar 
```

**进度条线程**

```
public class ProgressBar extends Thread {

    Thread thd;
    private int maximum, timeout;

    private boolean useful = true;

    private PopupScreen popup;

    private int iterations = 0;

    /**
     * Object constructor
     * 
     * @param title
     *           Text to display on popup area
     * @param maximum
     *           Range / width of the gauge field of progress bar
     * @param timeout
     *           Milliseconds to pause between updates to progress bar
     * @see GaugeField
     * @see Thread
     * @see PopupScreen
     */

    public ProgressBar(String title, int maximum, int timeout) {
        this.maximum = maximum;
        this.timeout = timeout;

        VerticalFieldManager manager = new VerticalFieldManager();

        popup = new PopupScreen(manager);

        manager.add(new LabelField(title));

    }

    /**
     * run() method for starting thread
     */

    public void run() {

        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                UiApplication.getUiApplication().pushScreen(popup);
            }
        });

        int iterations = 0;     

        while (useful) {
            System.out.println("I m  here in while runn  "+ useful);
            try {
                Thread.sleep(timeout);
            } catch (Exception e) {

            }

            if (++iterations > maximum)
            {
                iterations = 1;
                useful = false;
                UiApplication.getUiApplication().invokeLater( new Runnable()
                {
                    public void run ()
                    {
                        _locationProvider.reset();
                        Dialog.alert("Location not found.");

                    }
                } );

            }

            //          gaugeField.setValue(iterations);            
        }

        if (popup.isDisplayed()) {
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    UiApplication.getUiApplication().popScreen(popup);
                }
            });
        }
    }

    /**
     * Method to shutdown the thread and remove the popup screen
     *  
     */

    public synchronized void remove() {
        useful = false;
    }

} 
```

# php - 什么时候在子域中保存静态文件（图像、js、css 等）是个好主意？

> ID：10696645
> 
> 赞同：0
> 
> 时间：2012-05-22T06:13:11.917
> 
> 标签：php, hosting

问题很简单：

什么时候在子域中保存静态文件（图像、js、css 等）是个好主意？什么时候不是一个好主意？为什么？

现在，我使用的是共享主机，但将来我将使用专用服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:23:03.433

这不是具有任何相关性的子域，而是相关的内容交付机制......

如果您的网站流量很大，导致性能不佳或您当前的主机无法跟上，那么将常用请求或大型资产（图像、视频、某些 CSS 或 Javascript 等）的服务卸载到更专业的内容交付服务器。

例如，我使用 Amazon 的 CloudFront 内容分发网络 (CDN) 来提供我所有的静态图像。**它提供静态**内容的速度要快得多（它将内容缓存在世界各地的几个边缘位置），并且它释放了我的服务器以更好地处理和提供动态内容（动态 PHP 和 CSS 文件）。直到最近，亚马逊的 CDN 还只能提供静态文件，所以这种方式是有意义的。

我将我自己的子域映射到 Amazon CDN 服务器，但您不必这样做 - 没有要求您必须映射子域才能执行此操作。如果您愿意，可以使用您的内容交付提供商的默认 URL。

那么您如何知道您的网站是否会从 CDN 提供的静态资产中受益呢？我使用[YSlow](http://yslow.org)进行了评估。TSlow 描述您的网站响应能力和速度，并提出建议以加快网站速度。我在之前和之后进行了测量，并看到了改进。不过要小心——很容易沉迷于分析！最好的衡量标准是分析您的用户行为。他们是否放弃并过早离开您的网站？人们会抱怨表现不佳吗？如果没有，然后找到其他可能更好地提高你的底线的领域。

# sql-server - 如何获取表的架构名称

> ID：10696649
> 
> 赞同：7
> 
> 时间：2012-05-22T06:13:35.643
> 
> 标签：sql-server, sql-server-2008, database-schema

我正在使用 SQL Server 2008 并有以下查询：

```
SELECT SO1.name AS Tab, 
       SC1.name AS Col, 
       SO2.name AS RefTab, 
       SC2.name AS RefCol, 
       FO.name AS FKName
FROM dbo.sysforeignkeys FK  
INNER JOIN dbo.syscolumns SC1 ON FK.fkeyid = SC1.id AND FK.fkey = SC1.colid 
INNER JOIN dbo.syscolumns SC2 ON FK.rkeyid = SC2.id AND FK.rkey = SC2.colid 
INNER JOIN dbo.sysobjects SO1 ON FK.fkeyid = SO1.id 
INNER JOIN dbo.sysobjects SO2 ON FK.rkeyid = SO2.id 
INNER JOIN dbo.sysobjects FO ON FK.constid = FO.id 
```

你如何检索表的模式名称？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-22T06:59:34.063

使用[OBJECT_SCHEMA_NAME](http://msdn.microsoft.com/en-us/library/bb326599.aspx)

```
SELECT 
  OBJECT_SCHEMA_NAME(f.parent_object_id) AS TableNameSchema, -- this
  OBJECT_NAME(f.parent_object_id) AS TableName,
  COL_NAME(fc.parent_object_id,fc.parent_column_id) AS ColumnName,
  OBJECT_SCHEMA_NAME(f.referenced_object_id) AS ReferenceTableNameSchema,
  OBJECT_NAME (f.referenced_object_id) AS ReferenceTableName,
  COL_NAME(fc.referenced_object_id,fc.referenced_column_id) AS ReferenceColumnName,
  f.name AS ForeignKey
FROM
  sys.foreign_keys AS f
  INNER JOIN sys.foreign_key_columns AS fc ON f.OBJECT_ID = fc.constraint_object_id
  INNER JOIN sys.objects AS o ON o.OBJECT_ID = fc.referenced_object_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T06:40:16.180

根据 Sql Server 2008：

```
 SELECT Object_name(f.parent_object_id) 
       AS 
       TableName, 
       Col_name(fc.parent_object_id, fc.parent_column_id) 
       AS ColumnName, 
       Object_name (f.referenced_object_id) 
       AS ReferenceTableName, 
       Col_name(fc.referenced_object_id, fc.referenced_column_id) 
       AS 
       ReferenceColumnName, 
       f.name 
       AS ForeignKey, 
       Quotename(Schema_name(f.schema_id)) + '.' + Quotename( 
       Object_name(f.parent_object_id)) AS 
       schemaname, 
       Quotename(Schema_name(o.schema_id)) + '.' + Quotename( 
       Object_name(f.referenced_object_id)) 
                                        AS ReferenceSchemaName 
FROM   sys.foreign_keys AS f 
       INNER JOIN sys.foreign_key_columns AS fc 
         ON f.OBJECT_ID = fc.constraint_object_id 
       INNER JOIN sys.objects AS o 
         ON o.OBJECT_ID = fc.referenced_object_id 
```

如果想知道模式名就`object_id`用`OBJECT_SCHEMA_NAME()`，如果想得到模式名就`schema_id`用`SCHEMA_NAME()`。

# c# - 在 asp.net 中为 WebControl 定义自定义事件

> ID：10696651
> 
> 赞同：8
> 
> 时间：2012-05-22T06:13:38.313
> 
> 标签：c#, asp.net, custom-controls, web-controls, custom-event

我需要在自定义控件中将 3 个事件定义为`OnChange`、`OnSave`和`OnDelete`。我有一个`GridView`并使用它的行。

你能帮我看看这段代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T06:19:15.813

可以帮助您完成任务的好文章：

[Visual C# .NET 中的自定义控件](http://www.akadia.com/services/dotnet_user_controls.html) ![在此处输入图像描述](../Images/d2ed9fbacd2808e9b21ca7824b7d120d.png)

**第 1 步：**在您的控件中创建事件处理程序，如下所示。

```
public event SubmitClickedHandler SubmitClicked;

// Add a protected method called OnSubmitClicked().
// You may use this in child classes instead of adding
// event handlers.
protected virtual void OnSubmitClicked()
{
    // If an event has no subscribers registered, it will
    // evaluate to null. The test checks that the value is not
    // null, ensuring that there are subscribers before
    // calling the event itself.
    if (SubmitClicked != null)
    {
        SubmitClicked();  // Notify Subscribers
    }
}

// Handler for Submit Button. Do some validation before
// calling the event.
private void btnSubmit_Click(object sender, System.EventArgs e)
{
    OnSubmitClicked();
} 
```

**第 2 步：**利用您注册控件的页面中的事件。以下代码将成为您注册控件的页面的一部分。如果你注册它，它会被控件的提交按钮触发。

```
// Handle the SubmitClicked Event
private void SubmitClicked()
{
    MessageBox.Show(String.Format("Hello, {0}!",
        submitButtonControl.UserName));
} 
```

# php - 使用php获取两个日期之间的总时间差

> ID：10696654
> 
> 赞同：12
> 
> 时间：2012-05-22T06:13:53.380
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

在这里我两次提到它的日期

> 2008-12-13 10:42:00
> 
> 2010-10-20 08:10:00

我想获得 (h:m:s) 格式的总时差

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-22T06:23:12.737

如果您正在使用或能够使用 PHP 5.3.x 或更高版本，则可以使用其 DateTime 对象功能：

```
$date_a = new DateTime('2010-10-20 08:10:00');
$date_b = new DateTime('2008-12-13 10:42:00');

$interval = date_diff($date_a,$date_b);

echo $interval->format('%h:%i:%s'); 
```

您可以通过多种方式使用该格式，一旦您在 DateTime 对象中有日期，您就可以利用许多不同的功能，例如通过普通运算符进行比较。有关更多信息，请参阅手册：http: [//us3.php.net/manual/en/datetime.diff.php](http://us3.php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-22T06:29:07.790

我在用什么：

```
$seconds = strtotime("2010-10-20 08:10:00") - strtotime("2008-12-13 10:42:00");

$days    = floor($seconds / 86400);
$hours   = floor(($seconds - ($days * 86400)) / 3600);
$minutes = floor(($seconds - ($days * 86400) - ($hours * 3600))/60);
$seconds = floor(($seconds - ($days * 86400) - ($hours * 3600) - ($minutes*60))); 
```

您现在可以按照自己的方式格式化

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T06:16:22.770

您可以使用[strtotime 函数](http://us2.php.net/manual/en/function.strtotime.php)将时间转换为整数并减去它们。

```
$time1 = strtotime("2008-12-13 10:42:00");
$time2 = strtotime("2010-10-20 08:10:00");

$diff = $time2-$time1;
// the difference in int. then you can divide by 60,60,24 and 
// so on to get the h:m:s out of it 
```

# c# - 具有来自 SharePoint 2010 列表的列名称的空 DataTable

> ID：10696657
> 
> 赞同：0
> 
> 时间：2012-05-22T06:14:39.813
> 
> 标签：c#, asp.net, sharepoint-2010, sharepoint-list

我正在 SharePoint 2010 中开发一个项目。

我的要求是从 SharePoint 列表中获取一个空的 DataTable，但其中包含列名。

.GetDataTable() 方法仅在有值时才返回。

所以基本上我需要一个数据表中的列表结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:57:03.753

如果 GetDataTable 不检索列信息，这应该会给您一个空的数据表。

```
DataTable _dt = new DataTable();

foreach (SPField spf in _lst.Fields)
{
   _dt.Columns.Add(spf.InternalName.ToString(), spf.Type.GetType());
} 
```

# android - 在外部单击对话框时如何捕获对话框的触摸事件

> ID：10696658
> 
> 赞同：7
> 
> 时间：2012-05-22T06:14:48.157
> 
> 标签：android

我`Dialog`在我的活动中，我想要的是假设对话框是打开的，然后在触摸外部对话框时我想关闭对话框，同时，我想调用一个在我的活动中进行一些更新的函数。

最初我使用`MyDialog.setCanceledOnTouchOutside(true);`但这些只会关闭，在我的情况下，同时我想在用户单击对话框外部时调用一些函数。所以我该怎么做？我知道如果我可以扩展`Dialog`类并覆盖它的`onTouchEvent`方法，那么它将得到解决，但在我的情况下，我的类已经扩展了 Activity 类，而在 java 中，我们不能扩展一个以上的类。

那么什么是最好的解决方案呢？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:19:43.503

该线程上的第二个答案显示了如何执行此操作（我自己使用过，有效）：

[在窗口外触摸时如何取消以 Activity 为主题的对话框？](https://stackoverflow.com/questions/4650246/how-to-cancel-an-dialog-themed-like-activity-when-touched-outside-the-window)

# css - IE7 中带有焦点文本区域的 CSS 问题

> ID：10696660
> 
> 赞同：0
> 
> 时间：2012-05-22T06:15:33.600
> 
> 标签：css

[https://www.dropbox.com/s/k2im4wtnq5ygkms/ie7wtf.png](https://www.dropbox.com/s/k2im4wtnq5ygkms/ie7wtf.png)

Textarea 在该 div 元素下方，并且焦点仍在 textarea 上。如何重叠该光标，使其不可见？

这是示例：http: [//jsfiddle.net/JkDZr/](http://jsfiddle.net/JkDZr/)

**例如，在 jsfiddle 中按 run 即可工作。**

# spring - Spring 和 Hibernate 的示例项目

> ID：10696666
> 
> 赞同：0
> 
> 时间：2012-05-22T06:16:09.437
> 
> 标签：spring, hibernate, maven

我是 Spring 和 Hibernate 的新手。我从 www.mkyong.com 、krams915.blogspot.com 等网站学习并尝试了基本示例。

现在我想尝试使用 Spring、hibernate 构建一些应用程序。我正在寻找一些我可以参考的项目示例。

我在谷歌上搜索过这个，但找不到

有人可以建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:46:50.430

尝试搜索[GitHub](https://github.com/search?q=spring+hibernate&repo=&langOverride=&start_value=1&type=Repositories&language=Java)、[BitBucket](https://bitbucket.org/repo/all/followers?name=spring+hibernate)或[SourceForge](http://sourceforge.net/directory/language%3ajava/os%3awindows/freshness%3arecently-updated/?q=spring%20hibernate)。还有一个由 SpringSource 开发的“半官方”示例应用[PetClinic 。](http://static.springsource.org/docs/petclinic.html)

# android - 我的卫星图标一直亮着又灭。即使我没有连接到互联网？断开互联网时如何禁用此图标？

> ID：10696672
> 
> 赞同：0
> 
> 时间：2012-05-22T06:16:48.267
> 
> 标签：android, android-location

我的申请有一个问题，

标题栏上的 GPS 卫星图标不断亮起和熄灭。即使我没有连接到互联网？如何在互联网断开时禁用此图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:22:29.293

这是预期的行为。获取位置修复不依赖于互联网连接。即使您没有连接到互联网，它也只是试图从卫星中获取一个纬度。

# magento - magento - 名义产品在小计运费中显示为零

> ID：10696674
> 
> 赞同：0
> 
> 时间：2012-05-22T06:16:53.083
> 
> 标签：magento, shipping, recurring

我写了一个带有asiapay支付的循环支付模块，

但是，当我在结帐时，**运费和小计为零**，尽管实际费用将显示在小计下面的部分中，称为“名义项目总计”，

运费为零仍然让客户感到困惑，但在最后一步中再次出现了一些价值。

* * *

另外，我**使用的是表率（价格 VS 目的地）** ....

在第 3 步发货方式中，更糟糕的是它没有找到任何发货方式...我不允许移动第 4 步！

所以我想知道如何硬编码设置名义项目结账**的小计和运费？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T17:49:28.807

请在本网站上查看对此的修复

[http://www.webamondo.co.uk/blog/magento-recurring-profile-remove-totals/](http://www.webamondo.co.uk/blog/magento-recurring-profile-remove-totals/)

正如它所提到的，它不是最整洁的，但它可以工作，它只是添加了一些内联样式，但也应该适合你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:56:21.610

发货：app/code/core/Mage/Sales/Model/Quote/Address/Total/Nominal/Shipping.php

# html - chrome 扩展中的本地存储兼容性

> ID：10696678
> 
> 赞同：1
> 
> 时间：2012-05-22T06:17:07.063
> 
> 标签：html, google-chrome-extension

我正在开发一个**chrome 扩展**，我想知道它是从哪个版本的**google chrmoe**开始支持**本地存储**和**会话存储**的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:53:35.127

Chrome 4 中的本地存储

Chrome 5 中的会话存储

来源：[https](https://developer.mozilla.org/en/DOM/Storage#localStorage) ://developer.mozilla.org/en/DOM/Storage#localStorage （朝向底部）

我认为没有人仍然使用这种早期版本的 Chrome。

T。

# jquery - 如何使用 jQuery 将所选元素按文本、索引或值放入下拉列表中？

> ID：10696681
> 
> 赞同：0
> 
> 时间：2012-05-22T06:17:21.553
> 
> 标签：jquery

我有一个具有这种结构的选择元素：

```
<div class="ddl">
    <select>
        <option selected value="select">Select</option>
        <option value="T">Toyota</option>
        <option value="P">Porsche</option>
        <option value="N">Nissan</option>
        <option value="V">Volkswagen</option>
    </select>
</div> 
```

并且没有选择元素的 ID 将其传递给 jQuery 选择器，只有 div 的父类。

如何通过文本、索引或值将这些元素中的任何一个作为选定元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:22:18.180

有多种与选择器交互的方式。

**使用 jQuery 1.6 及更高版本：**

按文字：

```
$('.ddl option:contains("Porsche")').prop('selected', true); 
```

按索引：

```
$('.ddl option:eq(1)').prop('selected', true); 
```

按价值：

```
$('.ddl option[value="T"]').prop('selected', true); 
```

* * *

**对于旧版本：**

按文字：

```
$('.ddl option:contains("Porsche")').attr('selected', 'selected'); 
```

按索引：

```
$('.ddl option:eq(1)').attr('selected', 'selected'); 
```

按价值：

```
$('.ddl option[value="T"]').attr('selected', 'selected'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:20:19.627

试试这个：

例如（选择值）：

```
$(".ddl select").val("T"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:21:03.080

```
$(document).ready(function(){
$('div.ddl >select option:selected').text(); //for getting text
$('div.ddl >select option:selected').val(); //value
$('div.ddl >select option').each(function(){ //looping
alert($(this).val());
});

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:21:18.573

```
$(".ddl select").attr("value","T"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T06:21:47.390

$('.ddl>select') 应该可以工作，这是 ddl 类的 div，'>' 告诉 jQuery 找到该类的直接子级。不过要注意多个 ddl 类的 div。

# android - 无法在 android 的 Facebook 中发布视频

> ID：10696683
> 
> 赞同：1
> 
> 时间：2012-05-22T06:17:35.773
> 
> 标签：android, facebook

我正在尝试通过我的 android 应用程序在 facebook 中发布视频。但我无法完成那个。Logcat 中没有错误。在下面添加我的代码。

```
private void PostVdoFacebook(String review){
      mProgress.setMessage("Posting ...");
      mProgress.show();
      String response=" ";
      AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);
      FileInputStream is;
      Bundle params = new Bundle();
      try{
       is = new FileInputStream(getRealPathFromURI(uriVideo));
       byte[] data = readBytes(is);

      params.putByteArray("video",
        data);

     } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
      params.putString("caption", review);
      mAsyncFbRunner.request("me/videos", params, "POST",
                 new PhotoUploadListener());
     } 
```

readBytes 函数是

```
 public byte[] readBytes(InputStream inputStream) throws IOException {
      // This dynamically extends to take the bytes you read.
      ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

      // This is storage overwritten on each iteration with bytes.
      int bufferSize = 1024;
      byte[] buffer = new byte[bufferSize];

      // We need to know how may bytes were read to write them to the byteBuffer.
      int len = 0;
      while ((len = inputStream.read(buffer)) != -1) {
          byteBuffer.write(buffer, 0, len);
      }

      // And then we can return your byte array.
      return byteBuffer.toByteArray();
  } 
```

# asp.net-mvc-3 - 将数据动态绑定到 mvc 中的下拉列表

> ID：10696687
> 
> 赞同：0
> 
> 时间：2012-05-22T06:18:03.300
> 
> 标签：asp.net-mvc-3

我有一个要输入两个不同日期的视图，因此我希望这两个日期之间的数据库中的所有条目都应显示在下拉列表中。我怎样才能做到这一点？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:47:50.357

从您的控制器返回这两个日期之间的条目列表，例如

```
enteries.Where(a => a.startdate < FirstDate &&  a => a.enddate < SecondDate  ).ToList() 
```

然后将这些条目传递给 DropDownListFor 之类的

```
@Html.DropDownListFor(model => model.entryID,
    new SelectList(model.entries, "ID", "Title")) 
```

# java - 为什么我会收到这些错误？

> ID：10696688
> 
> 赞同：3
> 
> 时间：2012-05-22T06:18:05.330
> 
> 标签：java

*代码 ：*

```
package keylogger;

import org.jnativehook.GlobalScreen;
import org.jnativehook.NativeHookException;
import org.jnativehook.keyboard.NativeKeyEvent;
import org.jnativehook.keyboard.NativeKeyListener;

public class GlobalKeyListenerExample implements NativeKeyListener {
    public void nativeKeyPressed(NativeKeyEvent e) {
            System.out.println("Key Pressed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));

            if (e.getKeyCode() == NativeKeyEvent.VK_ESCAPE) {
                    try {
                            GlobalScreen.unregisterNativeHook(); // LINE 18
                    }
                    catch (NativeHookException ex) {
                            System.err.println("You cannot call unregisterNativeHook() from the native dispatch thread.");
                    }
            }
    }

    public void nativeKeyReleased(NativeKeyEvent e) {
            System.out.println("Key Released: " + NativeKeyEvent.getKeyText(e.getKeyCode()));
    }

    public void nativeKeyTyped(NativeKeyEvent e) {
            System.out.println("Key Typed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));
    }

    public static void main(String[] args) {
            try {
                    GlobalScreen.registerNativeHook(); // LINE 38
            }
            catch (NativeHookException ex) {
                    System.err.println("There was a problem registering the native hook.");
                    System.err.println(ex.getMessage());
                    ex.printStackTrace();
            }

            //Construct the example object and initialze native hook.
            GlobalScreen.getInstance().addNativeKeyListener(new GlobalKeyListenerExample());
    }
} 
```

这与[google code 上](http://code.google.com/p/jnativehook/wiki/examples)给出的代码相同。我下载并在我的项目中使用了[JNativeHost 库。](http://code.google.com/p/jnativehook/downloads/list)但我收到以下错误：

```
Cannot find unregisterNativeHook,registerNativeHook. //(line 18,38)
The IDE also says GlobalKeyListenerExample is not abstract and doesn't override abstract method keyReleased. 
```

对于第一个错误[，方法是在此处定义的，它们是本机方法](http://code.google.com/p/jnativehook/source/browse/trunk/src/java/org/jnativehook/GlobalScreen.java)，我还导入了 GlobalScreen 类。

为什么我已经覆盖了第二个错误？**但是，当我`@Override`在该方法之前添加注释时，IDE 会给出一个错误，指出该方法不会覆盖或从超类型实现。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:22:50.417

如果您使用的是 eclipse，请尝试从一个空类开始，如下所示：

```
public class GlobalKeyListenerExample implements NativeKeyListener {
} 
```

您应该在声明中收到错误，并且应该可以使用快速修复“实现抽象方法”。执行快速修复并查看它是否在之后编译（通常应该）。然后你可以继续添加你的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T07:26:41.307

一切安好 ！我认为可能是错误的一件事是您可能针对您复制和粘贴的代码使用的库版本！使用下面标记的库。[你可以在这里下载](http://code.google.com/p/jnativehook/downloads/list)

![在此处输入图像描述](../Images/86732190125e58d8805776a54c8e1b99.png)

从评论中我猜你正在使用netbeans。将此 jar 文件添加到您的库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:36:26.663

您说您已覆盖的方法很可能与基类中存在的签名不同。因此，您的方法不被视为被覆盖，而是完全是一个新的重载版本。验证方法签名是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:19:06.433

如果您使用的是 JDK 1.5，则只能在覆盖基类的方法时使用 @Override，而不能在从接口实现方法时使用。

# jquery - 如何在 jquery 中传递数据库值？

> ID：10696689
> 
> 赞同：1
> 
> 时间：2012-05-22T06:18:11.760
> 
> 标签：jquery, asp.net

我有几个盒子（超过 100 个）将动态创建

现在，每次单击该框时，我都应该在一个弹出框中滑动而不刷新页面。我下载了 jquery UI（http://jqueryui.com/demos/dialog/#option-position）并在我的项目中使用。现在我想要在每次单击该框时传递公司 ID 以从数据库中获取详细信息。如果单击窗口 5，则公司 ID 5 应通过获取对话框内的公司的所有其他详细信息。

jQuery代码：

```
<script type="text/javascript">
     // increase the default animation speed to exaggerate the effect
     $.fx.speeds._default = 1000;
     $(function () {

         $("#dialog").dialog({
             autoOpen: false,
             show: "slide",
             hide: "explode"
         });

         $("div[id *= 'window']").live('click', function (e) {

             $("#dialog").dialog("open");

             return false;
         });
     });
    </script> 
```

ASP.NET 代码

```
<div id="dialog" title="Basic dialog">
     <div><%#Eval("comp_name")%> </div>
      <div><%#Eval("comp_city")%> </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:58:19.647

```
 $.fx.speeds._default = 1000;
        $(document).ready(function () {
            $("div[id*='window']").live('click', function (e) {
                $.ajax({
                    url: 'YourUrl', type: 'Get', dataType: 'json',
                    data: { id: $(this).attr('id').replace(/window/g, '') },
                    success: function (data) {
                        $('<div></div>').appendTo('body').html('<div>' + data.comp_name + '</div><div>' + data.comp_city + '</div>').dialog({
                            modal: true, title: 'Test message', zIndex: 10000, autoOpen: true,
                            width: 460, height: 300, modal: true, resizable: false, closeOnEscape: false,
                            show: "slide", hide: "explode",
                            buttons: {
                                Ok: function () {
                                    $(this).dialog("close");
                                }
                            },
                            close: function (event, ui) {
                                $(this).remove();
                            }
                        });
                    }
                });
            });
        }); 
```

你使用 asp.net mvc 3 吗？

```
$("div[id*='window']").live('click', function (e) {
            alert('Id : ' + $(this).attr('id') + '   ' + 'Replaced Id ' + $(this).attr('id').replace(/window/g, ''));
        });

<div id="window1">
    Click Me1 !
</div>
<br />
<div id="window2">
    Click Me2 !
</div>
<br />
<div id="Div1">
    Click Me !. I am not window id.
</div>
<br />
<div id="window3">
    Click Me3 !
</div> 
```

从现场演示看到这个链接：http: [//jsfiddle.net/nanoquantumtech/865Su/](http://jsfiddle.net/nanoquantumtech/865Su/)

对于替换方法，请参阅此链接：[http ://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

# c# - 无法编辑/删除目录中的文件

> ID：10696690
> 
> 赞同：0
> 
> 时间：2012-05-22T06:18:12.383
> 
> 标签：c#, asp.net, image

在执行以下操作时，我无法在 Visual Studio 2005 中更新文件 (noimg100.gif)。

这是代码，

```
String fileNotFoundPath = context.Server.MapPath("~/common/images/noimg100.gif");
context.Response.ContentType = "image/gif";
Image notFoundImage = Image.FromFile(fileNotFoundPath);
notFoundImage.Save(context.Response.OutputStream, ImageFormat.Gif); 
```

我做错了什么还是需要在最后处理图像？

编辑：我找到了以下链接，它说不要像我使用的那样使用 Image.FromFile：http: [//support.microsoft.com/kb/309482](http://support.microsoft.com/kb/309482)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:26:05.543

从文件中打开图像时，只要图像存在，文件就会保持打开状态。由于您不处置该`Image`对象，因此它将继续存在，直到垃圾收集器完成并处置它。

在代码末尾释放`Image`对象，就可以再次写入文件。

您可以使用`using`块来释放对象，然后您可以确定它始终会被释放，即使代码中出现错误：

```
String fileNotFoundPath = context.Server.MapPath("~/common/images/noimg100.gif");
context.Response.ContentType = "image/gif";
using (Image notFoundImage = Image.FromFile(fileNotFoundPath)) {
  notFoundImage.Save(context.Response.OutputStream, ImageFormat.Gif);
} 
```

此外，由于您不以任何方式更改图像，因此解压缩然后重新压缩它是一种浪费。只需打开文件并将其写入流：

```
String fileNotFoundPath = context.Server.MapPath("~/common/images/noimg100.gif");
context.Response.ContentType = "image/gif";
using (FileStream notFoundImage = File.OpenRead(fileNotFoundPath)) {
  notFoundImage.CopyTo(context.Response.OutputStream);
} 
```

# jquery - Jquery 弹出错误消息？

> ID：10696692
> 
> 赞同：2
> 
> 时间：2012-05-22T06:18:22.193
> 
> 标签：jquery

对你来说可能是愚蠢的 Q，但我正在努力提高我的 jquery 知识。我在警告框中显示错误消息。是否有任何标准 API 可以使程序员的生活变得简单。我搜索了但是没找到。。

我知道，我们可以通过使用 css 和 html 来做到这一点。但是，我正在寻找 jquery API。因此，我们可以简单地使用 API，而不是用 css 编写代码。

如果您有任何建议，我很乐意按照您的建议进行尝试。将不胜感激帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T06:24:33.590

你可以看看 jqueryui。该项目为您提供了应该执行您想要的操作的模式对话框。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

从 jqueryui 网站：

> 对 $(foo).dialog() 的调用将初始化一个对话框实例，并默认自动打开对话框。如果要重用对话框，最简单的方法是禁用“自动打开”选项： $(foo).dialog({ autoOpen: false }) 并使用 $(foo).dialog('open' ）。要关闭它，请使用 $(foo).dialog('close')

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:36:12.203

[**工作演示点击这里**](http://jsfiddle.net/ptJBK/1/)

这可能有助于休息我可以看到@jos 提供了一个 API 链接：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

**对话代码**

```
function showDialog() {
    $("#dialog-modal").dialog({
        resizable: true,
        height: 140,
        modal: true,
        position: 'center',
        buttons: {
            'Yes': function () {
                $(this).dialog("close");
                return true;
            },
            'No': function () {
                $(this).dialog("close");
                return false;
            }
        }
    });
};

$('input').click(function(){
    showDialog();
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T20:37:11.420

jquery-confirm 库是一个不错的选择。查看[https://craftpip.github.io/jquery-confirm/](https://craftpip.github.io/jquery-confirm/) 不仅可以用于确认，还可以用作弹出窗口、警报等。

# php - 哪个更快更轻——mysqli & PDO

> ID：10696696
> 
> 赞同：11
> 
> 时间：2012-05-22T06:18:43.413
> 
> 标签：php, mysql, pdo, mysqli

我正在使用**MySQL**和**PHP5**。我了解到古老`mysql_*`的功能已不再维护，社区已开始[弃用](http://news.php.net/php.internals/53799)。所以我决定离开`mysql_*`。问题是去哪里？我正在寻找更轻、更简单、更快捷的方法。有人告诉我这些 (`mysqli`和`PDO`) 是哪个；

1.  快点
2.  易于学习和编码
3.  占用更少的空间和内存

*注意：这两个初学者级别的教程链接会有所帮助。*

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-22T06:21:44.987

**[PDO 与 MySQLi：您应该使用哪个？](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)**

> **PDO**和**MySQLi**都提供了**面向对象的 API**，但 MySQLi 还提供了**过程**API——这使得新手更容易理解。如果您熟悉原生 PHP MySQL 驱动程序，您会发现迁移到程序化 MySQLi 界面要容易得多。另一方面，一旦您掌握了 PDO，您就可以将它与您想要的任何数据库一起使用！

![概括](../Images/badb11b5cb31f052096317ae6e5b6384.png)

![数据库支持](../Images/e12d55a39006dcec92feea12854a7fb4.png)

> **最终，PDO**轻松赢得了这场战斗。通过支持十二种不同的数据库驱动程序（十八种不同的数据库！）和命名参数，我们可以忽略小的性能损失，并习惯它的 API。从安全的角度来看，只要开发人员以应有的方式使用它们，它们都是**安全的。**

***因此，如果您仍在使用 MySQLi，也许是时候做出改变了！***

**[PDO 与 MySQLi：您应该使用哪个？——德扬·马里亚诺维奇](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)**

希望这可以帮助 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:47:59.680

除了上面的问题，这里还有一张对比图；

![在此处输入图像描述](../Images/9b76dc4ab6289a36e03a2320aa8647c5.png)

**[为什么你应该使用 PHP 的 PDO 进行数据库访问](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)**的信息非常有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-26T14:56:18.573

**About Performance**

While both PDO and MySQLi are quite fast, MySQLi performs insignificantly faster in benchmarks - ~2.5% for non-prepared statements, and ~6.5% for prepared ones. The MySQL extension was even faster.

# visual-studio-2010 - Visual Studio 2010 上的 OpenCV 2.4 -- 应用程序无法正确启动 (0xc0150002)

> ID：10696698
> 
> 赞同：1
> 
> 时间：2012-05-22T06:18:44.580
> 
> 标签：visual-studio-2010

我目前正在尝试了解 OpenCV 2.4 功能并尝试实现一些给出的示例代码。我已经根据此处给出的规则设置了 OpenCV 并将其链接到 Visual Studio 2010 - [http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windowssetpathandenviromentvariable](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windowssetpathandenviromentvariable)

我能够毫无问题地构建解决方案，但无法执行（调试）生成的 .exe 文件。我不断收到错误消息说应用程序无法启动 (0xc0150002)

在包含此处提到的所有 dll 后，我尝试重复相同的操作，但无济于事 - [C++ - 无法正确启动（0xc0150002）](https://stackoverflow.com/questions/5126105/c-unable-to-start-correctly-0xc0150002)

在寻找这个问题的可能原因时，我通过dependency walker软件发现opencv dll的并行配置存在一些问题。

然后，我遇到了这个 - [http://answers.microsoft.com/en-us/windows/forum/windows_7-pictures/error-the-application-has-failed-to-start-because/df019c0d-746e-42d0 -ad68-465e18e3f3ef](http://answers.microsoft.com/en-us/windows/forum/windows_7-pictures/error-the-application-has-failed-to-start-because/df019c0d-746e-42d0-ad68-465e18e3f3ef) 要求我安装 Visual C++ 2010 Redistributable Package (x86)。我这样做了，但我的问题仍然存在。

任何有关此问题的帮助将不胜感激。谢谢。

# git - 如何从另一个子文件夹合并一个 git 子文件夹？

> ID：10696701
> 
> 赞同：0
> 
> 时间：2012-05-22T06:18:57.233
> 
> 标签：git

这是我们的 git 文件夹。

**文件夹1/xxx/a/b/c**

**文件夹 2/yyy/a/b/c**

过去，我们可以使用 SVN 将*folder1/xxx*从*folder2/yyy*合并。

是否有可能在 Git 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:51:44.340

最简单的解决方案是将两个目录都设置为子模块/子树（它们已经有一些单独的历史/svn 存储库，对吧？）。然后，您只需向 folder1 存储库添加一个指向 folder2 存储库的远程，然后您只需像其他任何远程一样合并更改：

```
# go to folder1 repository
cd /path/to/folder1repo
# or `cd folder1` if you are familiar with inline submodule editing caveats
# add a remote pointing to folder2 repo
git remote add folder2 /path/to/repo/folder2
# fetch it
git fetch folder2
# merge folder2 into folder1
git merge folder2/master 
```

唯一需要注意的是，您实际上有一个子模块，并且每次合并这些文件夹时都必须提交到超级项目（例如，因为 folder1 将更改并且超级项目必须指向不同的提交）：

```
cd /path/to/superproject
git add folder1
git commit -m "Merged folder2 submodule into folder1" 
```

作为子模块的替代方案，您可以使用两个 forlders 存储库的子树合并，设置有点复杂，但是您只需拉更新所有此类子树 :)

这是一个不错的子树教程： http: [//nuclearsquid.com/writings/subtree-merging-and-you/](http://nuclearsquid.com/writings/subtree-merging-and-you/)

顺便提一句。您可以创建一个完全不同的项目的远程，您可以使用简单的合并将它的代码与您的代码合并:) git 使用场景是无限的:)

# scala - Scala的函数作为参数使用

> ID：10696704
> 
> 赞同：2
> 
> 时间：2012-05-22T06:19:10.480
> 
> 标签：scala, functional-programming

```
class ClosureClass {
  def printResult[T](f: => T) = {
    println("choice 1")
    println(f)
  }

  def printResult[T](f: String => T) = {
    println("choice 2")
    println(f("HI THERE"))
  }
}

object demo {
  def main(args: Array[String]) {
    val cc = new ClosureClass
    cc.printResult()   // call 1
    cc.printResult("Hi")  // call 2
  }
} 
```

我玩了上面的代码，结果告诉了我。我有两个问题

1) 为什么呼叫 1 和呼叫 2 都进入选择 1？

2）如何传递参数以便我可以进入选择 2。

谢谢，

```
choice 1
()
choice 1
Hi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T06:23:07.943

类型`=> T`意味着这`f`是一个按名称调用的参数。这意味着 that`f`是 type `T`，传递给函数的表达式将在使用时进行计算（而不是在调用函数时。

类型`String => T`表示 that `f`is a `Function[String,T]`，即从 a`String`到 a的函数`T`。

当您使用`"Hi"`, a`String`作为参数调用时，Scala 发现 有两种选择`printResult`：

1) `=> T`：在这种情况下`T`会绑定到`String`，这很好。

2）`String => T`：这不起作用，因为`String`它不是`String`任何东西的功能......它根本不是功能。

你如何解决这个问题取决于你想要做什么。如果您只想修复如何`printResult`调用它，那么您可以使用以下命令调用它：

```
val g: (String => String) = (s: String) => s + "***"
cc.printResult(g) 
```

打印：

```
choice 2
HI THERE*** 
```

因为您现在正在正确地将*函数*,`g`传递`String`给 some `T`。`T`这里是，因为该`String`函数只是添加`***`到它传递的任何内容的末尾并返回修改后的字符串。

# android - 加密 IMEI 号码

> ID：10696706
> 
> 赞同：0
> 
> 时间：2012-05-22T06:19:18.020
> 
> 标签：android, imei

我有找到设备 IMEI 号码的代码，但现在我想加密那种格式，我该如何加密呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:22:10.057

如果您尝试加密设备本身的号码，这是不可能的。

如果你想用你的代码加密你得到的数字，有很多方法可以做到这一点，试着看看这个代码片段：[http ://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:24:10.267

这里给出了使用 Cipher 对字符串进行加密广告解密的示例

```
http://www.androidsnippets.com/encryptdecrypt-strings 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:27:52.923

您可以使用如下函数：

```
private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
    } 
```

并像这样调用它们：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.PNG, 100, baos); // bm is the bitmap object   
byte[] b = baos.toByteArray();  

byte[] keyStart = "this is a key".getBytes();
KeyGenerator kgen = KeyGenerator.getInstance("AES");
SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
sr.setSeed(keyStart);
kgen.init(128, sr); // 192 and 256 bits may not be available
SecretKey skey = kgen.generateKey();
byte[] key = skey.getEncoded();    

// encrypt
byte[] encryptedData = encrypt(key,b);
// decrypt
byte[] decryptedData = decrypt(key,encryptedData); 
```

参考：[使用 AES 的 android 加密/解密](https://stackoverflow.com/questions/6788018/android-encryption-decryption-with-aes)

# java - 加密算法为任何类型的任何输入获取有限的密文

> ID：10696707
> 
> 赞同：-2
> 
> 时间：2012-05-22T06:19:33.350
> 
> 标签：java, encryption

是任何加密算法，它为java中的任何类型的输入值提供有限的密码字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:32:18.817

您需要的是加密文本的固定长度哈希值。使用您想要的任何算法加密文本，然后使用 MD5 或任何其他散列算法对其进行散列。对于输入，哈希实际上是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:22:30.423

如果您不需要再次解密，则可以使用哈希码。

```
object.hashCode() 
```

# git - Git Fetch 无法在裸仓库上工作，但 git pull 在普通仓库上工作

> ID：10696718
> 
> 赞同：11
> 
> 时间：2012-05-22T06:20:32.173
> 
> 标签：git

首先，大局：我正在尝试为我正在运行的 Redmine / Gitolite 服务器编写一个 git post-receive 脚本。根据各种建议，我正在为 Redmine 创建一个裸露的本地存储库以供读取，并且我正在 Gitolite 上设置一个接收后脚本以将更改推送到 Redmine 存储库。

但是，我对 Git 非常不熟悉，所以我什至无法在这里做一个简单的任务>_<。我想如果我弄清楚这一点，我应该能够编写上面的脚本。设置我的测试仓库后，我创建了两个仓库作为测试。

（“Central Repo”是一个 Gitolite 存储库，位于 git@localhost:testing）

```
cd /tmp
mkdir /tmp/test
$ git clone git@localhost:testing
$ git clone git@localhost:testing testing2
$ git clone git@localhost:testing --bare 
```

现在当我运行 ls 时：

```
$ ls
testing  testing2  testing.git 
```

现在，我更改了 testing2 中的测试文件，然后将更改推送到中央存储库。

```
$ cd testing2
$ echo 'testline' >> test && git commit --allow-empty-message -a -m '' && git push 
```

正如预期的那样，如果我在“测试”文件夹上运行“git pull”，一切都会按预期工作。

```
$ cd testing
$ git pull
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From localhost:testing
   3242dba..a1ca5ba  master     -> origin/master
Updating 3242dba..a1ca5ba
Fast-forward
 test |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
$ diff ./test ../testing2/test
$ 
```

如最后一个“diff”所示，“testing”目录和“testing2”目录完全按预期工作。“git pull”命令同步两个目录。

但是，如果我 cd 进入 testing.git（又名：裸仓库）， git fetch / git reset --soft 无法将裸仓库更新到最新版本。

```
$ ls
branches  config  description  HEAD  hooks  info  objects  packed-refs  refs
$ git fetch
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From localhost:testing
 * branch            HEAD       -> FETCH_HEAD
$ git reset --soft
$ cd ..
$ git clone ./testing.git testing3
Cloning into testing3...
done.
$ cd testing3
$ diff test ../testing2/test
5a6
> testline 
```

正如您从上一个示例中看到的，裸存储库未能更新，并且两个文件之间存在某种差异。我做错什么了？

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-22T07:19:25.787

您的 fetch 没有更新`master`分支，只是`FETCH_HEAD`（请参阅“ [Git 中的含义是什么？](https://stackoverflow.com/questions/9237348/what-does-fetch-head-in-git-mean)[”`FETCH_HEAD`](https://stackoverflow.com/questions/9237348/what-does-fetch-head-in-git-mean)）。

如“[我如何拉到裸存储库？](https://stackoverflow.com/questions/7274697/how-do-i-pull-to-a-bare-repository) ”中所述，您应该执行以下操作：

```
git fetch origin master:master 
```

或者，对于[所有分支](https://stackoverflow.com/a/6723612/6309)：

```
git fetch origin +refs/heads/*:refs/heads/* 
```

* * *

[Colin D Bennett](https://stackoverflow.com/users/994153/colin-d-bennett)补充道：

> 如果您想定期获取这些，您应该考虑：

```
git config remote.origin.fetch +refs/heads/*:refs/heads/* 
```

> 这将允许您键入`git fetch`以将您的分支与遥控器同步。
> **请注意，这仅在不应编辑本地分支的裸存储库中才有意义**。

# asp.net - 通过剥离 html 显示字符串的前 n 个字符

> ID：10696725
> 
> 赞同：0
> 
> 时间：2012-05-22T06:20:56.420
> 
> 标签：asp.net, string, c#-4.0

我有一个长字符串，我想显示它的前 50 个字符（不包括 HTML 内容）。任何人都可以提出任何方法吗？

这是代码：

```
eBdb.EpubReader.Epub Epubobj = new eBdb.EpubReader.Epub(myPath);
litepub.Text = Epubobj.GetContentAsHtml(); 
```

在 litepub.Text 中，我正在获取文本和 HTML。但我只想显示该函数结果的前 50 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:24:47.713

尝试这个：

```
Regex.Replace(source, "<.*?>", string.Empty).Substring(0,49); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:27:46.870

看看[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。您可以在[此处](https://stackoverflow.com/questions/2785092/c-htmlagilitypack-extract-inner-text)查看有关如何开始的更多信息。

# cakephp - SoftDelete 行为 CakePHP - 删除问题

> ID：10696728
> 
> 赞同：2
> 
> 时间：2012-05-22T06:21:08.877
> 
> 标签：cakephp, soft-delete

我正在使用 CakeDC 的 utils 包中的 Soft Delete - Behavior。
（[https://github.com/CakeDC/utils](https://github.com/CakeDC/utils)）

现在的问题是：我想检查控制器是否有软（已删除），如下所示：

```
<?php
  if ($this->User->delete($id)) {
    $this->Session->setFlash(__('user has been deleted'));
  } else {
    $this->Session->setFlash(__('user has not been deleted'));
  }
 ?> 
```

不幸的是，我得到的结果是错误的。意味着如果用户被（软）删除，我将收到“用户尚未被删除”消息，反之亦然。

我知道 Cake 如何处理这个请求，并且 beforeDelete 钩子必须返回 false，才能停止（硬）删除数据。但是在 github 上提到这个[问题](https://github.com/CakeDC/utils/issues/19)，现在应该已经修复了。我是唯一一个这不起作用的吗？

除了简单地否定条件之外，还有其他解决此问题的方法吗？（不想那样做，这是不对的）

提前问候和感谢！
纳赫里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:16:27.363

我为此使用的解决方案是从@mark 链接到的线程中复制一半并编写一半。

将此添加到您的`AppModel`

```
/**
 * Override the delete() model method so that we can account for the
 * SoftDelete behaviours return
 *
 * @param int $id
 * @param bool $cascade
 * @return bool
 */
    public function delete($id = null, $cascade = true) {
        $result = parent::delete($id, $cascade);
        if ($result === false && $this->Behaviors->enabled('SoftDelete')) {
            return $this->field('deleted', array('deleted' => 1));
        }
        return $result;
    } 
```

请记住此代码段使用行为`default`设置。这就是为什么`'deleted' => 1`如果您以不同的方式命名您的字段，那么我使用它，那么您将想要更改它。

# java - 如何防止 GXT Grid 中的 Click 和 DoubleClick 事件冲突？

> ID：10696730
> 
> 赞同：0
> 
> 时间：2012-05-22T06:21:15.377
> 
> 标签：java, click, gxt, double-click

我正在使用 GXT2.2.5`Grid`并希望同时处理这两个`Click`事件`DoubleClick`。

问题是这样做时，`Click`有时每次`DoubleClick`触发事件都会调用两次。我的目的是防止第二次调用`Click`.

以下是相关代码：

```
grid.addListener(Events.OnDoubleClick, new Listener<BaseEvent>() {
    public void handleEvent(BaseEvent e) {
        GridEvent event = (GridEvent) e;
        doubleClick(getSelectedContent());
    }
});

view.getGridContent().addListener(Events.OnClick, new Listener<BaseEvent>() {
    public void handleEvent(BaseEvent be) {
        final GridEvent event = (GridEvent) be;

        Date date = new Date(); 
        long current =  date.getTime();

        if ((current - lastClicked) > 1000){
            click(getSelectedContent());
        }
        lastClicked = current;                              
    }
}); 
```

可以看出，我目前的方法是检查第二次点击是否在 1000 毫秒后触发，而不是将调用委托给`click()`，但这不能正常工作。

否则如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:30:18.383

尝试这个...

使用 getClickCount() 方法。此方法讲述点击的类型（即单次、双次、三次，等等），但不跟踪点击次数......

使用这种方法，您可以知道点击是单次还是双次、三次等......然后在此基础上您可以做出决定。

# iphone - iPhone 屏幕截图错误。 : ImageIO: CGImageDestinationFinalize 图像目的地没有足够的图像

> ID：10696734
> 
> 赞同：2
> 
> 时间：2012-05-22T06:21:35.930
> 
> 标签：iphone, ios, xcode, uiimage

编辑答案：

```
- (UIImage*) maskImage:(UIImageView *)maskImage withMask:(UIImageView *)cropImage
{

    UIImage *image = nil;
    UIImage *imagePNG = nil;

    CGSize newImageSize = CGSizeMake(cropImage.frame.size.width, cropImage.frame.size.height);

    UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
    [self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];

    image = UIGraphicsGetImageFromCurrentImageContext();

    NSData *imgData =  UIImagePNGRepresentation ( image ); // get PNG representation
    imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation
    UIGraphicsEndImageContext(); 
    return imagePNG;
} 
```

我试图截取我的 iPhone 屏幕以将图片保存到我的相机胶卷中。但是遇到了这个错误。有人知道我的代码是否有问题吗？

```
May 22 14:13:34 unknown assetsd[281] <Error>: ImageIO: CGImageDestinationAddImage image parameter is nil
May 22 14:13:34 unknown assetsd[281] <Error>: ImageIO: CGImageDestinationFinalize image destination does not have enough images
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetBaseCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSaveGState: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetInterpolationQuality: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextFillRects: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextTranslateCTM: invalid context 0x0
May 22 14:13:34 unknown assetsd[281] <Error>: CGContextScaleCTM: invalid context 0x0 
```

代码：

```
- (IBAction)saveImage:(id)sender {

    self.imageOverlay.alpha = 1;
    self.savedImage = [self maskImage:self.imgView withMask:self.baseImgView];

    UIImageWriteToSavedPhotosAlbum(self.savedImage, self, @selector(imageSavedToPhotosAlbum: didFinishSavingWithError: contextInfo:), nil);
}

- (UIImage*) maskImage:(UIImageView *)maskImage withMask:(UIImageView *)cropImage
{

    UIImage *image = nil;
    UIImage *imagePNG = nil;

    CGSize newImageSize = CGSizeMake(cropImage.frame.size.width, cropImage.frame.size.height);

    UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
    [self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];

    image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 

    NSData *imgData =  UIImagePNGRepresentation ( image ); // get PNG representation
    imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation

    return imagePNG;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:06:27.820

如果`CGSize`您传递给`UIGraphicsBeginImageContextWithOptions`is ，则可能会发生这种情况`CGSizeZero`。我想`cropImage`参数是`nil`或者它的大小是`CGSizeZero`。请调试并确保您已初始化所有对象并具有正确的帧。

# perl - perl Win32::SerialPort：读取和输入方法之间的区别

> ID：10696735
> 
> 赞同：4
> 
> 时间：2012-05-22T06:21:35.827
> 
> 标签：perl, winapi, serial-port, at-command

我一直在尝试使用该模块`Win32::SerialPort`（`perl 5.10`也许它与 5.14 有一些问题）。我必须向串行端口发出命令并获取它们的输出。我已经发现 write 将为我完成前面的部分。对于输出部分，我看到了如下实现：

```
$port_obj->write("ATE");  #assuming we give the AT command Echo
$res = $port_obj->input; 
```

如果这给出了命令的输出，为什么我们不能像下面这样更直观（即使`$res`会返回写入的位数）并`$res`捕获写入的输出。

```
$res = $port_obj->write("ATE"); 
```

此外，我还看到了一些实现，`$port_obj->read()`但我不确定读取和输入方法之间有什么区别。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:47:40.290

1.）由于连接的设备，在所有（大多数？）情况下，直接从写入返回接收到的数据将不起作用。如果它不回复或不立即回复怎么办？那里有无数的串行设备，你永远不知道会发生什么。

2.)`$PortObj->read`是一个阻塞调用，即它一直等到接收到请求的字节数。`$PortObj->input`是非阻塞的，即它立即返回，告诉你收到了多少字节（如果有的话）。在这一点上，文档有点模糊。

干杯。

# java - 如何通过 android 应用程序向 google 发送参数

> ID：10696742
> 
> 赞同：-2
> 
> 时间：2012-05-22T06:22:03.020
> 
> 标签：java, android, android-intent

我有一个包含一些文本字段和单选按钮的应用程序。现在我想获取文本视图和单选按钮的这些值，并在单击搜索按钮时将其发送给 Google 进行搜索，搜索后我还想从 Google 接收数据.目前可以使用 Intent 切换到谷歌，但我无法将文本字段的值发送到谷歌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:33:45.767

我假设您正在`Intent`使用类似的网址启动您的

```
http://www.google.com 
```

相反，您可以使用

```
http://www.google.com/search?q=myParam 
```

其中 myParam 是您要搜索的内容。

你可以从一个`EditText`这样的

```
mEdit = (EditText)findViewById(R.id.edittext);
String myParam = mEdit.getText().toString(); 
```

`Intent`然后你可以在你启动时设置你的 url

```
String intentURL = "http://www.google.com/search?q=" + myParam; 
```

要搜索多个参数，请使用“+”分隔它们。例如

```
http://www.google.com/search?q=myParam+myParam2 
```

以下问题提供了一种处理返回结果的方法：[Chrome extension to parse google search results](https://stackoverflow.com/questions/9180689/chrome-extension-to-parse-google-search-results)

# android - Android地图叠加精确坐标

> ID：10696748
> 
> 赞同：0
> 
> 时间：2012-05-22T06:22:24.440
> 
> 标签：android, map, overlay

我将图像作为叠加层放在 Android 谷歌地图上。图像是否在坐标处对齐图像的原点？有没有办法控制它？如果我希望图像的中心位于叠加坐标处，我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:32:28.933

```
//This will make the center of the image to be at the coordinates.

public abstract class CustomOverlay<Item extends OverlayItem> extends ItemizedOverlay<Item> {

public CustomOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView); 
    .
    .
    .

} 
```

# java - 内部类的公共属性中的 IllegalAccessException

> ID：10696749
> 
> 赞同：-1
> 
> 时间：2012-05-22T06:22:24.917
> 
> 标签：java, playframework, inner-classes, access-modifiers, playframework-1.x

我正在使用 play framework 1.2.x 构建一个类。

我有一个 Controller 类，其中包含一个非匿名（命名）私有内部类。

当我尝试通过其构造函数访问内部类的公共字段之一时，出现以下错误[![NonAnonymous 内部类访问异常](../Images/35affce1ef372c413d841957e35ac2ad.png)](https://i.stack.imgur.com/1NyTP.png)

上面的代码

```
private static class FinancialTransactionJSONPacket implements JSONPacket{
    public final boolean isSuccess;
    public final List<FinancialTransaction> financialTransactions;
    public final  OPERATIONS operation;

    public FinancialTransactionJSONPacket(boolean isSuccess,FinancialTransaction financialTransaction,OPERATIONS operation) {           
        this(isSuccess,new ArrayList<FinancialTransaction>(),operation);
/* Line 43 */   this.financialTransactions.add(financialTransaction);           
    }
} 
```

我不明白逻辑，这怎么可能？我正在从其构造函数中访问类的属性，访问说明符有什么关系？

我尝试搜索并找到[了这篇文章](http://blog.mograbi.info/2010/08/play-framework-cannot-access-public.html)，但它与匿名内部类有关，并且提出的解决方案是将匿名内部类作为命名类。

声明

*   `public final List<FinancialTransaction> financialTransactions;`
*   `private static class FinancialTransactionJSONPacket`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:37:50.360

静态类是私有的，所以只有封闭类可以访问它的成员，无论它们是否是公共的。

我在您难以辨认的图形中看不到任何证据表明访问是在静态类自己的构造函数中发生的。当我凝视它时，它看起来更像是一个外部类正在尝试访问该类的内部结构。

注意 这不是内部类，因为它是静态的。

# python - 在 python 中使用 Requests 库时的 IOError

> ID：10696757
> 
> 赞同：1
> 
> 时间：2012-05-22T06:22:55.093
> 
> 标签：python, httprequest, gevent, python-requests, ioerror

当我使用 Requests 库时，使用它的`async.map(reqs, size)`方法，当`reqs`是位时，会发生以下错误：

```
 IOError: zipimport: can not open file /Library/Python/2.7/site-packages/gevent-0.13.6-py2.7-macosx-10.7-intel.egg 
```

但是请求列表很小，那么没问题，有人可以帮我吗？

代码如下：

```
from requests import async
from time import time
import numpy as np

#urls list
urls = np.loadtxt('data.txt', dtype=str)
#urls = urls[:10]
cnt = 100

#main method
results = []
reqs=[]
def main():
   for i in range(cnt):
       start = time()
       for u in urls:
           reqs.append(async.get(u)) 
       stop = time()
       #print 'cicle %s = %s' %(i, stop-start)
       #results.append(stop-start)
   print len(reqs)
   async.map(reqs, size=100)

if __name__ == '__main__':
   begin = time()
   main()
   end = time()
   print end-begin 
```

它在 时工作正常`cnt = 10`，但在尝试时出错`cnt = 100`。

# linux - 使用 wget 自动打开 URL 并保存它们

> ID：10696765
> 
> 赞同：1
> 
> 时间：2012-05-22T06:23:21.977
> 
> 标签：linux, bash, csv, wget

我想用来`wget`自动打开一个 URL 并将其保存为`csv`格式。这是问题所在：

1-我想运行这个命令`./mydownload 2011 8 29`

2-`wget`应该打开网址`http://d1.website.com/2011/8/29/MonthlyReport.html?format=1`

3-然后将该文件保存到`2011_8_29.csv`

如何使用 bash 脚本来做到这一点？还有更简单的解决方案，请说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:28:05.993

```
#/bin/bash

wget --output-document=$1_$2_$3.csv http://d1.website.com/$1/$2/$3/MonthlyReport.html?format=1 
```

**编辑** 尝试类似

```
wget -qO- http://d1.website.com/$1/$2/$3/MonthlyReport.html?format=1 \
    | sed 's+<br />++g' > $1_$2_$3.csv 
```

# html - 由于某种原因，我无法将图像直接放在块的顶部

> ID：10696767
> 
> 赞同：0
> 
> 时间：2012-05-22T06:23:30.650
> 
> 标签：html, css, image, positioning

**我的问题**

我想让 2 个ribbonpurplefade.gif 再次出现在我涂成粉红色的导航菜单栏块上（我把它变成了丑陋的粉红色，这样我就可以看到块的边界）。

***顶部的ribbonpurplefade.gif 应该位于导航菜单的顶部，它们之间没有间隙。底部的ribbonpurplefade.gif 应该紧贴导航菜单的底部，它们之间没有间隙。***

***我所做的任何事情都无法消除差距！那是我的问题！:)***

我在所有东西周围都涂上了颜色，这样我就可以直观地看到块的位置。如果你知道我做错了什么 - 请告诉我 :) 是的，颜色真的很难看 - 这样我就可以看到积木了 :) 提前致谢！

*如果您不知道什么是块，请查看 w3.org - 他们使用术语自由地描述匿名块`<div>This is a block</div>` `<p>This is also a block</p>`等......*

**我尝试了什么**

我已经在 img 标签上尝试了 0px 的边距和填充。唯一似乎有效的方法是使用负值，但我不明白为什么会这样......我似乎能够使用ribbonpurplefade.gif作为背景图像让它们排列，但后来我无法拉伸它们的CSS。因此，我从使用背景图像更改为使用如下所示的图像，并一直试图让它们触摸导航菜单。

我想要的是 2 个ribbonpurplefade.gif 紧贴导航菜单块。为什么这不起作用超出了我的范围。我什至尝试了重置 CSS 文件，但它仍然可以。也许这是不可能的。我什至尝试过 hspace 和 vspace 但它们现在已经贬值了。

***任何解决方案都需要与 IE7 及更高版本（以及备用浏览器 FF、Chrome、Op）一起使用***

**HTML**

```
<div class="navribbon"><img src="graphics/common/ribbonpurplefade.gif"></div>
<!-- THIS IS WHERE THE TOP GAP IS. I CANT GET RID OF IT COMPLETELY -->
<!-- NAVIGATION BAR HERE -->
<div class="navmenu">
    <ul>
        <li>Home</li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Services & Pricing</a></li>
        <li><a href="#">Online Store</a></li>
        <li><a href="#">Support & Drivers</a></li>
        <li><a href="#">Company Information</a></li>
    </ul>
</div>
<!-- NAVIGATION ENDED -->
<!-- THIS IS WHERE THE BOTTOM GAP IS. I CANT GET RID OF IT COMPLETELY -->
<div class="navribbon"><img src="graphics/common/ribbonpurplefade.gif"></div> 
```

**CSS**

```
/* NAVIGATION RIBBONS BELOW */
.navribbon {
    padding:0px;
    margin:0px;
    /*background-color:#129933;*/
}

.navribbon img {
    padding:2px;
    margin:0px;
    background-color:#00FF66;
}

/* NAVIGATION CSS BELOW*/
.navmenu {
    text-align:center;
    padding:9px;
    margin:0px;
    font-size:14px;
    background-color: #FF0066;
    border:dotted;
}

.navmenu ul {
    margin: 0px;
    padding: 0px;
}

.navmenu li {
    display:inline;
    font-weight:bold;
    /*background-color: #99FF99;*/
}

.navmenu ul a {
    text-decoration:none;
    /*color:#4E4E4E;*/
    /*color: #276056;*/
    color:#267CB2;
}

.navmenu a:hover {
    text-decoration:underline;
    color:black;
}

.navmenu li:after {
    content: "\\";
    padding: 0px 5px;
    color: #999;
}

.navmenu li:last-child:after {
    content: none;
} 
```

**更新：2012 年 5 月 22 日**

好吧，我尝试使用表格并将顶部图像向下居中，底部图像向上居中，但它仍然在那里留有空隙。我想我剩下的唯一解决方案是创建一个 DIV 块并将元素绝对定位在 div 内或在 Photoshop 中重做所有这些功能区，调整它们的大小，然后重新保存它们。呃……为了这么简单的事情做了这么多工作。我只是不明白为什么在我说的每个元素上都有一个间隙 - 0px 表示边距，填充 - 我的意思是......我们无法控制东西的去向吗？为什么它必须是与另一个块元素紧密排列的背景？愚蠢的网页设计真的让我很生气。几乎感觉要把一切都变得绝对。啊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:56:02.653

我想在我的头撞到砖墙上一个小时后，我已经想通了。默认情况下，`img`标签是一个`inline`元素，所以它有一个最小高度，由`font-size`放置它的地方决定。这意味着，无论您给它低于该最小值的高度是多少，它总是希望为可能围绕它的文本腾出空间。这就是为什么在它的上方和下方总是有一些边距或填充。

解决您的问题的方法是制作您的`img`标签`display:block`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:20:16.957

我想你的意思是 2 个紫色渐变条吧？如果是这种情况：您忘记在下栏中添加 width="100%" 。

因此，在 css 中执行以下操作要好得多：

```
.navribbon
{
background-image: url('../graphics/common/ribbonpurplefade.gif'); <-- Check path to be sure
background-repeat: repeat-x;
height: 11px;
width: 100%;
} 
```

如果您选择 CSS 解决方案.. 然后删除`<img>`您的 div 内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T07:58:14.267

据我了解，您对色带图像宽度都有问题

```
<img src="graphics/common/ribbonpurplefade.gif" alt="ribbon" width="100%" border="1"> 
```

使用这个我在第二个图像宽度=“100%”中有变化，如果你有任何其他问题，那么请使用 [http://jsfiddle.net/](http://jsfiddle.net/)

谢谢。

# java - . Derby , XML 数据 , 长度 ;

> ID：10696768
> 
> 赞同：1
> 
> 时间：2012-05-22T06:23:47.093
> 
> 标签：java, xml, database, derby

我正在尝试将 xml 对象插入数据库。列的类型是 XML。当我的 XML 有大约 1100 行时，我得到一个异常说，

```
" A string constant starting with ''<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
' is too long." 
```

请提出一些可能的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:13:07.347

你能从你的异常中提供完整的堆栈跟踪吗？

一些演示问题的示例代码？

你的字符串常量的实际长度是多少？

XML 数据类型的基本长度限制非常大：[http ://db.apache.org/derby/docs/10.8/ref/rreflimitsxml.html](http://db.apache.org/derby/docs/10.8/ref/rreflimitsxml.html)

我怀疑您遇到的问题与 XML 数据类型本身无关，而是与您用于在程序中操作数据的特定技术有关，例如[http://db 中的限制之一。 apache.org/derby/docs/10.8/ref/rrefstringlimits.html](http://db.apache.org/derby/docs/10.8/ref/rrefstringlimits.html)

也就是说，您可能没有有效地使用 XMLPARSE 和/或 XMLSERIALIZE。

更多细节肯定会有所帮助。

# android - android单声道的消息框

> ID：10696769
> 
> 赞同：5
> 
> 时间：2012-05-22T06:23:50.523
> 
> 标签：android, mono, monodevelop, xamarin.android, android-alertdialog

在函数完成之前用户的响应 AlertDialog.Builder 就像消息框一样，但我想等到用户回答。我该怎么办？

```
 public bool test() 
            { 
                    bool tst=false; 

                    AlertDialog.Builder builder = new AlertDialog.Builder (this); 
                    builder.SetTitle (Android.Resource.String.DialogAlertTitle); 
                    builder.SetIcon (Android.Resource.Drawable.IcDialogAlert); 
                    builder.SetMessage ("message"); 
                    builder.SetPositiveButton ("OK",(sender,e)=>{ 
                            tst=true; 
                    }); 
                    builder.SetNegativeButton ("NO",(sender,e)=>{ 
                            tst=false; 
                    }); 

                    builder.Show(); 

                    return tst; 
            } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T14:14:35.057

斯图尔特在这里的回答是正确的，但我只是想对其进行一些扩展，因为似乎仍然存在一些混淆，这是设计应用程序的重要概念。

当您在 UI 中处理事情时，例如响应用户输入或提示信息，您永远不想阻塞 UI。因此，在这种情况下，您需要以允许异步执行的方式设计代码。正如您所注意到的，在您的代码示例中，函数会立即返回，因为它不会等待回调被执行。如果它确实等待，UI 线程将被阻塞并且您的应用程序将被冻结，这几乎肯定不是您想要的。

由于我没有此函数调用的任何上下文，因此我将组成一个简单的示例。假设您想获取函数的返回值并将其写入日志。使用您提供的同步方法，看起来像这样：

```
bool returnValue = test();

Console.WriteLine(returnValue); 
```

相反，我建议做的是重组`test()`方法，使其行为异步。我会重写它看起来像这样：

```
public void test(Action<bool> callback)
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.SetTitle(Android.Resource.String.DialogAlertTitle);
    builder.SetIcon(Android.Resource.Drawable.IcDialogAlert);
    builder.SetMessage("message");
    builder.SetPositiveButton("OK", (sender, e) =>
                                    {
                                        callback(true);
                                    });
    builder.SetNegativeButton("NO", (sender, e) =>
                                    {
                                        callback(false);
                                    });

    builder.Show();
} 
```

这个版本和你的很相似，只是不是直接从方法调用返回值，而是通过方法的回调参数发回。然后可以将写入日志的代码更新为：

```
test(returnValue =>
{
    Console.WriteLine(returnValue);
}); 
```

我在[这里有一篇博](http://www.gregshackles.com/2011/04/using-background-threads-in-mono-for-android-applications/)文，还讨论了在后台线程中工作并在 UI 中显示结果的不同方法，如果这适用于您的情况的话。希望这有助于澄清事情！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T23:15:38.410

我知道这是旧的，但我已经根据我在这里和那里找到的答案开发了一个简单的助手，所以我在这里希望它可以帮助某人。享受..

```
using System;
using Android.App;
using Android.Content;

namespace MyApp.Helpers
{
    #region Enums
    public enum MessageBoxResult
    {
        None = 0,
        OK,
        Cancel,
        Yes,
        No
    }

    public enum MessageBoxButton
    {
        OK = 0,
        OKCancel,
        YesNo,
        YesNoCancel
    }

    public enum MessageBoxButtonText
    {
        Ok, 
        Cancel, 
        Yes, 
        No
    }

    #endregion

    public static class MessageBoxHelper
    {
        public static void Show(Context context, Action<bool> callback, string messageBoxText, string caption, MessageBoxButton buttonType)
        {
            AlertDialog.Builder alertBuilder = new AlertDialog.Builder(context);
            alertBuilder.SetTitle(caption);
            //builder.SetIcon(Android.Resource.Drawable.IcDialogAlert);
            alertBuilder.SetMessage(messageBoxText);

            switch (buttonType)
            {
                case MessageBoxButton.OK:
                    alertBuilder.SetPositiveButton(MessageBoxButtonText.Ok.ToString(), (sender, e) => callback(true));
                    break;

                case MessageBoxButton.OKCancel:
                    alertBuilder.SetPositiveButton(MessageBoxButtonText.Ok.ToString(), (sender, e) => callback(true));
                    alertBuilder.SetNegativeButton(MessageBoxButtonText.Cancel.ToString(), (sender, e) => callback(false));
                    break;

                case MessageBoxButton.YesNo:
                    alertBuilder.SetPositiveButton(MessageBoxButtonText.Yes.ToString(), (sender, e) => callback(true));
                    alertBuilder.SetNegativeButton(MessageBoxButtonText.No.ToString(), (sender, e) => callback(false));
                    break;
            }
            alertBuilder.Show();
        }

        public static void Show(Context context, string messageBoxText)
        {
             Show(context, delegate(bool b) { }, messageBoxText, "", MessageBoxButton.OK);
        }

        public static void Show(Context context, string messageBoxText, string caption)
        {
            Show(context, delegate(bool b) { }, messageBoxText, caption, MessageBoxButton.OK);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:27:34.700

在[https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/App/AlertDialogSamples.cs](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/App/AlertDialogSamples.cs)中有来自 Xamarin的完整示例

您不能阻止代码并等待答案 - 您必须改为响应 answer 事件。

# embedded - 通过 IRmate 210 从 I:MX53 到 Linux 的 IrDa 连接

> ID：10696771
> 
> 赞同：0
> 
> 时间：2012-05-22T06:24:00.210
> 
> 标签：embedded, arm, infrared

我正在尝试通过 IrDa 将 I:MX53 板与我的 PC 连接。

到目前为止，我已经建立了一个 9600 bps 的连接，但是一旦我尝试提高比特率，我就会丢失我电脑上的数据，即使我已经将我的串行读取设置为与板发送比特率相同。

我可以在两个 I:MX43 板之间以 115.2kbps 成功通信，所以我知道它们都可以正确发送和接收..

我错过了用 IrDa 选择比特率的东西吗？一些标准也许？

**Irmate 210 兼容 115.2kbps。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:43:13.790

似乎 IRMate 210 单元需要知道波特率本身才能传递信号.. 然后它就可以正常工作了......

# string - 如何在 Mathematica 8 中使用字符串列表作为变量？

> ID：10696773
> 
> 赞同：0
> 
> 时间：2012-05-22T06:24:09.970
> 
> 标签：string, list, wolfram-mathematica

我相信我的问题很简单，我只是找不到解决方案，我已经用尽了帮助文档来寻找类似的情况。

我有一个字符串列表，这些字符串是城市名称，我想设置一个函数/表达式，它使用函数列表中的每个名称，然后在表中输出结果。在使用 Mathematica 语言或任何语言写作时，我是一个完全的新手。如果我使用了错误的术语，请多多包涵。这是我到目前为止所写内容的示例。

```
Module[
 {dateRange, mean, cdd, hdd, station, country, location, population, 
  GDPPerCapita,
  reference = (65 - 32)/1.8, cumList},

 cityLIST = CityData[#, "Name"] & /@ CityData[];

 station =;
 country = CityData[station, "Country"];
 population = CityData[station, "Population"];
 location = CityData[station, "Coordinates"];
 GDPPerCapita = CountryData[country, "GDPPerCapita"];
 dateRange = {{2011, 1, 1}, {2011, 12, 31}, "Day"};
 mean = WeatherData[station, "MeanTemperature", dateRange];
 cdd = Join[Transpose[{mean[[All, 1]]}], 
   Transpose[{Max[# - reference, 0] & /@ mean[[All, 2]]}], 2];
 hdd = Join[Transpose[{mean[[All, 1]]}], 
   Transpose[{Min[# - reference, 0] & /@ mean[[All, 2]]}], 2];
 cumList = Transpose[{Join[
     Transpose[{cdd[[All, 1]]}],
     Transpose[{Drop[FoldList[Plus, 0, cdd[[All, 2]] + hdd[[All, 2]]],
         1]}],
     2]}];

 Grid[station, country, location, population, GDPPerCapita, 
  Last[cumList]]] 
```

cityList 是我要使用的输入列表。我希望 cityList 中的项目成为车站的变量。然后我希望所有这些都输出到一个表中（我上面列出的网格只是一个占位符）。我提前道歉，因为这是一些非常基本的东西，我只是无法找到让它工作的方法。请注意，我使用的是来自 Mathematica 精选数据集的数据...cityData、countryData 和 WeatherData。

如果这里有人对我有一些有用的技巧，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:03:47.553

我没有在这台机器上安装 Mathematica，所以这可能是一个语法变形的答案。

Mathematica 和列表操作的一个有用技巧是首先定义一个对列表元素类型进行操作的函数。在您的情况下，您需要一个功能，例如：

```
writeARowOfMyTable[city_String]:=... 
```

拥有该功能后，您可以通过多种方式将其应用于城市名称列表。一种方法是为函数赋予属性`Listable`（检查文档），这意味着调用如

```
writeARowOfMyTable[listOfCityNames_List] 
```

将返回列表中每个城市的行。另一种方法是使用`Map`或`Apply`再次检查文档。

那只剩下你编写函数了`writeARowOfMyTable[]`。我从您的一条评论中看到您已经这样做了。那么，我建议的只是将您的代码包装到一个模块中，如下所示：

```
writeARowOfMyTable[city_String] := Module[{localVariablesGoHere},codeGoesHere] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:59:14.537

这是解决方案的大纲：

为您想要的每个城市收集数据的功能：

```
GetData[city_List] := {city, 
  CityData[city // First, "Population"], 
  CountryData[city // Last, "GDPPerCapita"], 
  CityData[city, "Coordinates"], 
  WeatherData[First@city, 
     "MeanTemperature", {{2011, 1, 1}, {2011, 12, 31}, "Day"}][[All, 2]] // Mean} 
```

将函数映射到您想要的城市，在本例中为所有可用的城市：

```
res=GetData/@CityData[]; 
```

以下是前 10 个城市的输出：

```
GetData /@ (CityData[][[1 ;; 10]]) // TableForm 
```

但请注意，您可能必须处理一些丢失的数据。

![数学图形](../Images/3e86cc1612d6d6dda522ddb9d98365e5.png)

# wso2 - WSO2 身份服务器 api

> ID：10696775
> 
> 赞同：7
> 
> 时间：2012-05-22T06:24:14.423
> 
> 标签：wso2, wso2is

我正在设计一个需要身份管理功能（即管理用户帐户和角色）的新应用程序。我想将该功能委托给身份服务器。

1.  WSO2 Identity Server 是否公开了用于管理用户帐户的 REST 或 SOAP API（例如，类似于[OpenAM 的 REST api](https://wikis.forgerock.org/confluence/display/openam/Use+OpenAM+RESTful+Services#UseOpenAMRESTfulServices-IdentityManagement)）？

我确实找到了 WSO2 AuthenticationAdmin wsdl `https://localhost:9443/services/AuthenticationAdmin?wsdl`，但它没有用户帐户管理功能。

2.  是否有 WSO2 平台公开的所有 wsdl 的权威列表？到目前为止，我通过在 google 上搜索找到了 AuthenticationAdmin wsdl 和 EventBrokerService wsdl。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:54:59.960

1) 您也可以尝试使用位于的 UserAdmin `https://localhost:9443/services/UserAdmin?wsdl`。

2) 您可以使用 osgi 控制台来执行此操作。使用 -DosgiConsole 标志启动服务器，即 ./wso2server.sh -DosgiConsole 或 ./wso2server.bat -DosgiConosle

然后在服务器启动后，您将获得 osgi 控制台。输入 listAdminServices，您将获得列表。前任：

```
osgi> listAdminServices
Admin services deployed on this server:
1\. ProvisioningAdminService, ProvisioningAdminService, https://10.150.3.140:9443/services/ProvisioningAdminService/ 
```

通过从 osgi 控制台键入“help”可以列出所有命令，例如“listAdminServices”。

注意：所有服务器都公开 Web 服务 API，可用于访问后端功能。

# algorithm - 二部图中的交叉点数

> ID：10696777
> 
> 赞同：4
> 
> 时间：2012-05-22T06:24:19.260
> 
> 标签：algorithm

在二分图中，左边有 n 个节点，右边有 m 个节点。节点从 1 到 n 和 1 到 m 排序。左边的节点连接到右边的节点。所有节点都没有连接。例如：

```
1 is connected to 4

2 is connected to 3

3 is connected to 2

3 is connected to 1 
```

我想知道图中有多少个交叉口（这里有 5 个交叉口）。[SPOJ](http://www.spoj.pl/problems/MSE06H/)也有类似的问题

我想知道如何通过使用一些用户提到的二进制索引树来解决这个问题。我正在使用 O(n^2) 算法解决并获得 TLE。

这不是家庭作业。昨天我学习了BIT并且正在寻找一些问题所以我遇到了这个。告诉我诀窍。请不要编写整个程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:45:36.410

按左节点的索引对边进行排序，然后（对于相等的左索引）按右节点的索引。查看正确节点的索引。图中的每个交叉点对应于在该排序列表中不按顺序排列的一对索引。你只需要计算这样的“不按顺序”对。

将排序列表中右节点的每个索引顺序插入到二叉索引树中。每次插入后，您可以在 O(log(m)) 时间内找到树中有多少更大的索引。所以整个算法的时间复杂度是 O(h * (log(h) + log(m))): O(h * log(h)) 用于排序和 O(h * log(m)) 用于计算数量索引反转数（这里的“h”是边数）。您可以使用基数排序或桶排序将其改进为 O(h * log(m))。

* * *

**更新：**

正如 Android Decoded 所注意到的，倒数问题可以使用基于 Merge Sort 的分治算法来解决。[请参阅此处](http://www.cp.eng.chula.ac.th/~piak/teaching/algo/algo2008/count-inv.htm)的详细说明。这种方法的时间复杂度 O(h * log(h)) 比使用二叉索引树 O(h * log(m)) 的复杂度要大，但是对于稀疏图来说，边的数量并不比边的数量大很多节点，它应该更快，因为它需要更少的内存并且对缓存更友好。

如果我们在合并期间消除重复条目，则合并排序方法的复杂性可能会提高到 O(h * log(m))。为此，将合并排序应用于 (value, numberOfInstances) 对，其中相邻的相同值通过适当的“numberOfInstances”组合到一个条目中。在最坏的情况下，第一个 log(m) 合并通道不会消除重复，这具有 O(h * log(m)); 的复杂性；然后在 O(h) 时间内快速消除重复项时，最多保留 log(n) 次。

**二叉索引树使用细节：**

实现一个二叉索引树，对于给定的键可以返回它在树中的索引，从最大值开始（最大的 -> 索引 0，第二大的 -> 索引 1，...）。然后在将每个元素插入树之后，请求它的索引 - 这将是排序列表中该元素左侧的较大值的数量。

更多细节：二叉索引树可以实现为搜索树，其每个节点都由后代节点的计数器增加。不要为重复元素创建单独的节点，只需更新每个元素的后代节点计数器。当询问某个键的索引时，我们应该首先在树中搜索一个与该索引对应的节点；那么我们应该对当前节点的每个祖先的直接右后代的所有计数器求和，包括当前节点本身的右后代，但排除当前节点位于其某些祖先右侧的所有情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:44:52.127

如果我正确理解了你的问题

我们知道我们可以在两个集合之间有 NpowerM（让这个值是 X）关系，如果我们能找到没有交集的集合（假设我们发现它是 Y）然后我们从 X 中减去 Y，即 XY 将回答你数学上的问题..为了找到Y，你对另一边的元素进行排序，在集合M上说，然后找到N和M的最长增加子序列（“http://en.wikipedia.org/wiki/Longest_increasing_subsequence”）如果你足够聪明，可以在 O(nm) 内完成，那么你可以在 O(NlogM) ... time 内完成。为了明确解决方案（此处存在类似问题“http://people.csail.mit.edu/bdean/6.046/dp/”单击构建桥梁链接）

# google-maps-api-3 - Google Maps JavaScript API v3 将动态变量发送到地图

> ID：10696785
> 
> 赞同：0
> 
> 时间：2012-05-22T06:25:00.757
> 
> 标签：google-maps-api-3, parameter-passing

这是概率。很简单，但我无法理解。我有一个 href 链接，例如`<a href="includes/driving.php?lat=38.254181&long=20.649962" class="driving" >Driving instructions</a>`，当单击（使用 jQuery）时会打开一个像这样的 googlemap：

```
jQuery('a.driving').live('click',function(){
jQuery('#content').empty().load(jQuery(this).attr('href'), function(){
initGeolocation();
})
return false;
}); 
```

函数`initGeolocation();`抓取 HTML5 位置，页面上有超过 1 个`class="driving"`链接。我无法将 lat 和 long 变量传递给地图。我需要让他们进入这个功能：

```
function calcRoute(position) {
var start = '38.313393,20.562651';
var end   = 'lat' , 'long'
var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
}); 
```

}

如果需要，可以像这样调用地图（标准代码）

```
function success(position) {
    var myOptions = {
      zoom: 13,
      center: new google.maps.LatLng(38.313393, 20.562651),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
   directionsDisplay = new google.maps.DirectionsRenderer({
        'map': map,
        'preserveViewport': true,
        'draggable': true
    });
    directionsDisplay.setPanel(document.getElementById("directions_panel"));
    google.maps.event.addListener(directionsDisplay, 'directions_changed',
      function() {
        if (currentDirections) {
          oldDirections.push(currentDirections);
          setUndoDisabled(false);
        }
        currentDirections = directionsDisplay.getDirections();
      });
    setUndoDisabled(true);
    calcRoute(position);
  } 
```

帮助感谢感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:52:08.137

嗨，如果你准备好了坐标，那么为什么不`google.maps.LatLng`通过这种方式创建对象：`new google.maps.LatLng(your lat, your lon)`如果你想指定，`string`那么这样做`new google.maps.LatLng("address")`并分配这个 latlng 对象开始和结束。这将解决您的问题。有关更多详细信息，请访问 Google 的文档。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:14:59.297

您可以获取 PHP 变量，将 lat 和 long 传递给 javascript var，然后在 calcRoute 函数中使用这两个 var：

```
var lat = "<?= $lat ?>";
var long = "<?= $long ?>";

function calcRoute(lat, long) {
   var start = '38.313393,20.562651';
   var end   = lat , long;
   var request = {
       origin:start,
       destination:end,
       travelMode: google.maps.DirectionsTravelMode.DRIVING
   };
   directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
          directionsDisplay.setDirections(response);
      }
}); 
```

你可以打电话：

```
calcRoute(lat, long); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:07:35.577

哦，我明白了。您想从链接中获取属性 lat 和 long 并将它们传递给 calcRoute 函数。好的，这样做 [elem 是当前`<A href...>`元素，名称是 'lat' 或 'long'：

```
function getParameterByName(name) {
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}

var lat=getParameterByName(elem, "lat");
var long=getParameterByName(elem, "long"); 
```

从[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript).

# sql-server-2008 - Sql Sum 具体时间

> ID：10696793
> 
> 赞同：0
> 
> 时间：2012-05-22T06:25:41.880
> 
> 标签：sql-server-2008

我的 sql 表中有一个 varchar 类型的列，并且正在从中收集工作时间......如果我给工作时间像

```
WorkingHours
------------
     1
     5
     8 
```

我可以找到这个 WorkingHours 列值的总和`Sum(WorkingHours)`，但在这里我需要给出更具体的时间，比如

```
WorkingHours
------------
    01:30
      2
    01:15
    04:45 
```

像这样，是否可以对这些值求和，我尝试了同样的方法，但我无法想出任何解决方案，任何人都可以在这里帮助我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:50:45.987

为什么将时间存储为 varchar？当然使用时间或日期时间......

请注意，“2”（如果可转换）将是 48 小时或 2 天。如果您不想修复数据或数据类型，则必须解决此问题

```
DECLARE @feckedTable TABLE (WorkingHours varchar(5));

INSERT @feckedTable (WorkingHours) VALUES ('01:30'), ('02:00'), ('01:15'), ('04:45');

SELECT
    SUM(DATEDIFF(minute, 0, CAST(WorkingHours AS smalldatetime))) AS TotalTime
FROM
    @feckedTable

SELECT
    CAST(TotalTime/60 AS varchar(4)) + ':' + CAST(TotalTime % 60 AS char(2))
FROM
    (
    SELECT
        SUM(DATEDIFF(minute, 0, CAST(WorkingHours AS smalldatetime))) AS TotalTime
    FROM
        @feckedTable
    ) X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:29:15.333

从表中选择 cast(dateadd(millisecond,sum(datediff(millisecond,0,cast(totalhrs as datetime))),0) as time)

这是获得精确到毫秒的语法。

有关详细说明，请参阅[此解决方案。](https://stackoverflow.com/questions/7793531/how-can-i-get-the-sum-of-multiple-datetime-values)

# iphone - Objective c 将一个数字范围映射到另一个

> ID：10696794
> 
> 赞同：1
> 
> 时间：2012-05-22T06:25:56.297
> 
> 标签：iphone, objective-c, ios5

嗨，我想为 iPad 应用程序将特定范围的数字映射到目标 C 中的不同范围。

例如，我的输入值可能在 0-255 范围内，但我希望输出在 0.5-1 范围内。例如，输入 127.5 将导致输出 0.75。

提前喝彩。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T06:36:04.790

这是通用解决方案（它应该适用于范围和输入值的任何组合）：

```
CGFloat const inMin = 0.0;
CGFloat const inMax = 255.0;

CGFloat const outMin = 0.5;
CGFloat const outMax = 1.0;

CGFloat in = 127.5;
CGFloat out = outMin + (outMax - outMin) * (in - inMin) / (inMax - inMin); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T06:31:52.093

计算第一个的比率并将其应用于第二个的范围：

```
CGFloat result = ((127.5 / 255) * 0.5) + 0.5; 
```

# c# - DataGridView 列排序取决于其他列值

> ID：10696795
> 
> 赞同：1
> 
> 时间：2012-05-22T06:25:59.520
> 
> 标签：c#, .net, datagridview

我正在使用 DataGridView 并有两列“索引”和“子索引”。当我单击“索引”列的升序排序时。我希望“子索引”列根据“索引”列数据自动排序为升序。

*排序前*：

**指数** **子指数**
3 2
3 1
2 3
1 3
2 2
1 2

*排序后*：

**指数** **子指数**
1 2
1 3
2 2
2 3
3 1
3 2

我不会允许对“子索引”列进行排序。每当我单击排序“索引”列时，应根据“索引”列值对“子索引”列进行排序。

我的 DataGridView 没有绑定到任何 DataTable。我通过添加行和列来手动填充 dataGridview。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:51:49.763

您可以在默认视图上对多列进行排序。将此代码放在您的列标题单击事件中。

```
 private void dataGridView1_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        if (dataGridView1.Columns[e.ColumnIndex].Name == "Index")
        {
            ((DataTable)dataGridView1.DataSource).DefaultView.Sort = "Index, Subindex";
        }
    } 
```

`DataTable`这确实假设您必须遵守

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:35:01.673

您可以像[DataGridView 多列排序一样对其进行排序](http://www.codeproject.com/Articles/18440/DataGridView-Multi-column-Sort)

# android - 如果可能，通过基于广播接收器监听相应意图的手机来启动应用程序？

> ID：10696800
> 
> 赞同：4
> 
> 时间：2012-05-22T06:26:30.960
> 
> 标签：android

是否有任何系统/默认意图可以被广播接收器捕获，或者可能是可以在后台运行并在我摇动手机时打开我的应用程序的服务！

加速度计和广播接收器的概念可以结合起来实现上述目的，还是这种方法存在根本性的问题？

# asp.net-mvc-3 - 在 TempData MVC3 C# 中保存流

> ID：10696801
> 
> 赞同：0
> 
> 时间：2012-05-22T06:26:47.323
> 
> 标签：asp.net-mvc-3, c#-4.0, razor

我有一个 InputStream，我在文件加载期间将其保存到 TempData["stream1"] 中。然后，我将通过在不同控制器中单击按钮来处理此文件。

我将 InputStream 保存在 Temp Data 中的原因是为了在我的下一个按钮单击中访问它。

```
public string Upload(HttpPostedFileBase fileData)
{
  Stream stream1 = fileData.InputStream;
  TempData["stream1"] = stream1;
  return "ok";
} 
```

接下来我从 TempData 取回我的流。按钮“查看”将调用以下操作

```
[Authorize]
public ActionResult MyView(string IsAll)
{
  string html = "";
  TempData["HeaderDetailHTML"] = "";
  Stream str = (Stream)TempData["stream1"];
  if (str != null)
  {
     if (str.Length == 0)
     {
     }
     else
       html = ProcessRTFFile(str, IsAll);
  }
  TempData["CustomHTML"] = html;
  return PartialView("Widgets/MyList",null);
} 
```

现在，问题是，以上在带有 asp.NET IIS 开发服务器的开发环境中工作得很好，但是当我将它部署到 IIS 7 或任何服务器时，这只适用于容量较小的小文件。对于较大的文件，当我尝试访问 TempData 时，它会丢失密钥和值。

我想不出原因。任何理由/解决方案将不胜感激。

# silverlight - 自定义网格面板网格线颜色

> ID：10696804
> 
> 赞同：2
> 
> 时间：2012-05-22T06:27:01.333
> 
> 标签：silverlight, windows-phone-7

如何在silverlight中自定义网格面板网格线颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:36:19.010

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.showgridlines%28v=vs.95%29.aspx)：

> 将**ShowGridLines**设置为**true**不适用于生产质量代码。如果您想要 Grid 内的线条[，请将](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=vs.95%29.aspx)[Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=vs.95%29.aspx)内的元素设置为具有边框。有关详细信息，请参阅 [边框](http://msdn.microsoft.com/en-us/library/system.windows.controls.border%28v=vs.95%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:10:31.027

您应该使用边框或矩形等来设置网格线的样式。您可以创建一个带有附加依赖属性的静态网格助手，这是需要的（例如：网格线样式、可见性等）。您应该将这些属性用于线条样式（如果您将使用边框，则应设置边框样式、矩形 - 矩形样式等）并检测线条的可见性。您可以在 Internet 上找到一些示例。

至于使用。应该这样使用：

```
<Grid GridHelper.LineVisibility="Visible" GridHelper.LineStyle="{StaticResource CustomBorderStyle}" /> 
```

这是一个使用静态网格助手的简单示例。我无法上传此助手的代码。如果你理解了一个想法，你可以开始做助手，像这样。以其他方式，您可以在互联网上找到一些资源。

# smartgwt - SmartGWT：从 Listgrid 中选择的记录绑定到另一个窗口中的 TextBox

> ID：10696807
> 
> 赞同：0
> 
> 时间：2012-05-22T06:27:26.933
> 
> 标签：smartgwt, listgrid, popuppanel

我是 SmartGWT 的新手，

我有两个窗口。Window1 中的 Button1 显示了一个包含列表网格的 Window2。在 Window2 中按下 Button2 时，listgrid 中的选定记录必须显示在 Window1 的 TextBox 中。最好的方法是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:30:25.720

您需要为两个类 Window1 和 Window2 子类化 Window 您可以在 Window1 中定义 setTextBox1，这将是公共的，并且您可以在 Window2 中访问，如果在其中您使用方法 setRefWindow1 对 Window1 的实例有引用。所以当你实例化时：

```
 Window1 w1 = new Window1();Window2 w2 = new Window2();w2.setRefWindow1(w1);
...... 
```

并在 Window2 中的 buttonCLick

```
refWindow1.setTextBox1(dataFromSelectedRecord); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:56:15.447

如果您可以在 Window2 中访问 Window1.Textbox，然后单击 Wondow2.Button2，您可以从 listgrid 的选定记录中获取值并在 Window1.Textbox 中设置该值。

# wpf - 此 html 代码的 XAML 等效项是什么？（嵌套文本元素）

> ID：10696808
> 
> 赞同：0
> 
> 时间：2012-05-22T06:27:29.507
> 
> 标签：wpf, xaml

```
<div>
    <p>Heading 1</p>
    <div>
        <p>Heading 1.1</p>
        <div>
            <p>Heading 1.1.1</p>
        </div>
    </div>
    <div>
        <p>Heading 1.2</p>
    </div>
</div> 
```

只是试图让每个块包含在任何其他块中以有更多的边距（缩进）。我试图在 FlowDocumentReader 中显示这一点，将其转换为 XPS（和/或打印），但这只是额外的信息，您可能会建议更聪明的方法来实现相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:38:44.593

**编辑：**

```
 <FlowDocumentReader>
        <FlowDocument>
            <Paragraph FontSize="20">Heading 1</Paragraph>
            <Section>
                <Paragraph FontSize="18">Heading 1.1</Paragraph>
                <Section>
                    <Paragraph FontSize="16">Heading 1.1.1</Paragraph>
                </Section>
            </Section>
            <Section>
                <Paragraph FontSize="20">Heading 1.2</Paragraph>
            </Section>
        </FlowDocument>
    </FlowDocumentReader> 
```

# c# - IIS 7 满足 Google If-Modified-Since HTTP 标头要求

> ID：10696812
> 
> 赞同：3
> 
> 时间：2012-05-22T06:27:49.533
> 
> 标签：c#, iis-7, umbraco

来自谷歌

> 确保您的 Web 服务器支持 If-Modified-Since HTTP 标头。此功能可让您的网络服务器告知 Google 自我们上次抓取您的网站以来您的内容是否发生了变化。支持此功能可以节省带宽和开销。

我们经营一个 Umbraco 网站，想知道如何满足这个要求，我知道数据是“动态的”存在问题，并且至少想说让它在 1 天后过期。

由于上次 Google 更新，我的客户和她的 SEO 代表认为这很重要。

先谢谢各位了！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:02:18.867

这与 Umbraco 没有直接关系，而是对我如何解决类似情况的更一般的描述。

我首先确保数据库中存在 LastModified/LastUpdated 字段，并且每次插入或更新帖子时都会对其进行更新。然后我使用 Last-Modified HTTP-Header 将它发送到客户端。

当客户端再次请求同一页面并发送 If-Modified-Since 标头时，我查看它发送的日期。将其与数据库中的值进行比较。如果相同，我将状态 304 Not Modified 返回给客户端并停止执行 ASP.NET 代码。

如果值不同，我照常加载页面。

所以基本上我所要做的就是向客户端发送一个 Modified-Since 标头，从客户端读取 If-Modified-Since 标头，然后在该值上多做一个。这应该可以在 Umbraco 中完成，但由于我自己不运行它，所以我无法准确告诉您在哪里进行更改。

# mysql - 循环遍历 mySQL 中可能的逗号分隔字符串

> ID：10696813
> 
> 赞同：0
> 
> 时间：2012-05-22T06:27:52.627
> 
> 标签：mysql

如何在 MYSQL 中循环使用逗号分隔的字符串。

这就是我要的

```
 select exp from expertise where user_name = 'userName';

 if exp != null then
     LOOP
       INSERT into table T1(exp1) VALUES(exp)
     UNTIL NO COMMA FOUND
 END IF; 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:37:21.047

计划A：

编写一个存储过程来解析字符串并运行 INSERT 语句。

B计划：

从“exp”值构建 INSERT 语句字符串，并使用准备好的语句来执行该语句。

* * *

例子：

假设我们有一个字符串 - 'apple,cherry,strawberry'。我们必须生成这样的 INSERT 语句 -`INSERT INTO table_name VALUES('apple'),('cherry'),('strawberry')`

```
-- build a query
SET @table_name = 'table1';
SET @words = 'apple,cherry,strawberry';
SET @query = CONCAT('INSERT INTO ', @table_name, ' VALUES(\'',  REPLACE(@words, ',', '\'),(\''), '\')');

-- run the query
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# iphone - 如何在 AVAudioPlayer 中从指定时间点播放歌曲

> ID：10696815
> 
> 赞同：1
> 
> 时间：2012-05-22T06:27:53.713
> 
> 标签：iphone

我是 iphone 新手。我正在开发一个属于音频播放器的项目，因为在我的项目中，我在资源中有 mp3 歌曲并且我已经播放了整首歌曲（持续时间为 5 分钟） ）正确，但我的任务是，从音频中的指定点开始播放歌曲。如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T06:38:53.637

这可以像这样实现

```
NSURL *urlOfSong = [[NSURL alloc] initFileURLWithPath: soundFilePath];
AVAudioPlayer *newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:urlOfSong error: nil];
[newPlayer setCurrentTime:Time_Of_Play]; 
```

# ios - Interface Builder 中的方向处理

> ID：10696819
> 
> 赞同：2
> 
> 时间：2012-05-22T06:28:14.450
> 
> 标签：ios, xcode, interface-builder, orientation

我需要在我的应用程序中处理方向（纵向 - 横向）。我的屏幕的基本布局是 UIView -> UIImageView -> UITableView (Background = ClearColor) （在那个 z 顺序中），所以看起来表格有背景图像。

我需要执行以下操作：

*   两种模式下 UIImageView 中的不同图像。
*   表格中的每个单元格需要并排放置 3/4 个图像（纵向 3 个，横向 4 个）。

**所有这些都需要在界面构建器中完成（尽可能地）。**

到目前为止我已经尝试过：

*   IB 确实为您提供了视图方向的选项。但我找不到为每个方向设置不同图像的方法。
*   遵循一个层次结构，我从一个基类派生 2 个单独的 VC（带有 2 个单独的 NIB）。唯一的问题是这是一个通用版本，所以我必须为 iPad 和 iPhone 中的每个视图执行此操作。

还有其他更好的方法吗？如果不是，第二个选项更好吗？这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:34:57.257

您想要实现的是根据 xib 中的方向添加不同的视图，简短的回答是您不能，

但是，您可以实现 2 个 Xib，每个方向一个 xib 请参阅此问题的答案以获得进一步解释 [支持多个方向的最简单方法是什么？当应用程序处于横向时，如何加载自定义 NIB？](https://stackoverflow.com/questions/2496554/easiest-way-to-support-multiple-orientations-how-do-i-load-a-custom-nib-when-th/2496719#2496719)

这对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:09:42.430

请查看以下代码，它也支持方向

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"CountryCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    //    NSString *continent = [[self.countries allKeys] objectAtIndex:indexPath.row];
    NSString *continent1 = [self tableView:tableView titleForHeaderInSection:indexPath.section];
    NSLog(@"Contine............%@", continent1);
    int k = [[self.countries valueForKey:continent1] count];
    UIScrollView *previewScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, cell.contentView.frame.size.width, 250)];
    previewScrollView.backgroundColor = [UIColor clearColor];
    previewScrollView.pagingEnabled = TRUE;
    previewScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [previewScrollView setContentSize:CGSizeMake(250*k, 60.0)];
    previewScrollView.showsHorizontalScrollIndicator = YES;
    NSLog(@"cell.contentView.frame.size.widt  %f",cell.contentView.frame.size.width);
    NSLog(@"K %@   %d",continent1,  k);
    for(int i=0 ; i<k; i++ ){

        imageView.image = [UIImage imageNamed:[[self.countries valueForKey:continent1] objectAtIndex:i]];
        imageView.contentMode = UIViewContentModeCenter;
        [previewScrollView addSubview:imageView];

        UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
        btn.frame = CGRectMake(250.0*i, 10, 200, 250);
        NSLog(@"%@", [NSString stringWithFormat:@"%d%d",indexPath.section,i]);
        btn.tag = [[NSString stringWithFormat:@"%d%d",indexPath.section,i] intValue];
        [btn addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchDown];
        [previewScrollView addSubview:btn];
    }

    [[cell contentView] insertSubview:previewScrollView atIndex:0];
    // [cell addSubview:previewScrollView];

}
return cell;
} 
```

# php - isset($_SESSION) 显示 $_SESSION 名称

> ID：10696821
> 
> 赞同：0
> 
> 时间：2012-05-22T06:28:17.120
> 
> 标签：php, session, if-statement

如果有人可以制作更好的标题，请编辑它。

我遇到的问题是无法在他们的帖子中显示用户名。快速截取代码。

```
if (isset($_SESSION['username']) )
{ 
$name = $_SESSION['username'];
}
else 
{
$name = $_POST['name']; 
} 
```

当用户发布它检查是否有会话然后在他们的帖子中显示他们的名字时，我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:36:58.643

你在这里所做的没有什么特别的错误。$_SESSION['username'] 实际上有值吗？

此外，请确保在使用会话时调用 session_start()，然后再保存或提取会话数据。

```
 <?php
    session_start();

    $_SESSION['username'] = 'Greg';

    if (isset($_SESSION['username']) )
    { 
    $name = $_SESSION['username'];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:43:50.890

Garrett 我是否正确地认为您的路线是`$_SESSION['name']`首先创建的，除非他们已经登录，否则就会`$_SESSION['name']`变成`$_SESSION['username']`

如果我是对的并且您在登录时创建 $_SESSION['username'] ，那么您需要做的就是检查 if `$_SESSION['name']`=`$_SESSION['username']`是否取消设置例如：

```
// YOUR LOGIN CODE TO CHECK ASSUME SQL QUERY OF SOME DESCRIPTION AND 'true' IS YOUR RESULT and 'false' NOT A USER
if(true) {
$_SESSION['username'] = $result;
if($_SESSION['name'] && $_SESSION['name'] == $_SESSION['username'] ){
unset($_SESSION['name'])
}
// ACTION TO GO TO PAGE
} else {
// YOUR ERROR ACTION
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:41:54.790

请尝试以下

```
session_start();

if (isset($_SESSION['username']) )
{ 
    $name = $_SESSION['username'];
}
else 
{
    $name = $_POST['name']; 
    $_SESSION['username'] = $name;
} 
```

然后重新加载页面， $_SESSION['username'] 现在应该包含用户名

# javascript - 如何在 mustache 标记中呈现对象数组

> ID：10696824
> 
> 赞同：0
> 
> 时间：2012-05-22T06:28:26.053
> 
> 标签：javascript, html, mustache

我有一个对象数组，如下所示：

```
 var games_string = new Array();
 games_string[0] = { display_name: "sanket" };
 games_string[1] = { display_name: "sky" }; 
```

我想在 html 页面的 mustache 标记中呈现这个对象数组。我参考了这个网站[http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)并找到了这个解决方案，但它不起作用......

```
 <table>
 <tr>
 {{#games_string}}
     <td>
        <b>{{display_name}}</b>
    </td>
 {{/games_string}}
 </tr>
 <table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:05:53.773

[精美手册](https://github.com/janl/mustache.js)中的示例列出了基本用法：

```
var view = {
  title: "Joe",
  calc: function () {
    return 2 + 4;
  }
};

var output = Mustache.render("{{title}} spends {{calc}}", view); 
```

如果您的模板在其中，`tmpl`那么您需要执行以下操作：

```
var data = {
    games_string: [
        { display_name: "sanket" },
        { display_name: "sky" }
    ]
};
var html = Mustache.render(tmpl, data); 
```

您需要提供`render`一个对象来将名称与值相关联，否则 Mustache 将不知道`{{#games_string}}`应该在模板中引用什么。仅仅创建一个名为的变量`games_string`是不够的，您必须告诉 Mustache 哪些数据应该与`games_string`模板中的名称相关联。

演示：http: [//jsfiddle.net/ambiguous/9y7ju/](http://jsfiddle.net/ambiguous/9y7ju/)

# php - Ajax 请求冻结网页

> ID：10696825
> 
> 赞同：2
> 
> 时间：2012-05-22T06:28:28.273
> 
> 标签：php, javascript, ajax, google-chrome

我正在尝试创建一种通用方式来在我的网页中调用 ajax 请求。我创建了一个不错的小扩展方法来异步调用发布请求。

```
$.tiqPost = function(action,data,callback)
{
    alert('Posting...');
    $.fancybox.showActivity();
    $.ajaxSetup({async:true});
    $.post('/portfolios/mod/t:'+action+'/',data,function(response)
    {
        callback(response);
        $.fancybox.hideActivity();
        alert('Finished Post.');
    });
    alert('Posting Set.');
} 
```

但是，每当此请求触发时，我的页面就会无限期冻结。在某些版本的 Chrome 中，它会冻结而没有反馈（单击停止工作，我无法关闭选项卡）。但是，在大多数其他浏览器中，它会显示“正在发布”，然后在没有到达“发布集”或“完成发布”的情况下停止。

所以 Chrome 没有发现任何错误，只是冻结了。这对我来说非常令人费解。任何人有任何提示（甚至只是不同的实现）？

编辑：

并非每个请求都会发生这种情况。事实上，让我发布一些有效的案例和一些无效的案例。坚持，稍等...

编辑编辑：

所以在这个例子中

```
$.tiqPost('newcat',{t:"n"},function(response)
                {
                    if(response)
                    {
                        $tabs.tabs('add','#tiq-tab-'+response,"New Category",0);
                    }
                }); 
```

我没有问题。然而：

```
$(this).bind('blur',function(postdata)
    {
        //blur
        if(postdata==null)
            postdata = {value:$(this).text()};
        $.tiqPost($(this).attr('id').replace('tiq-submit-',''),
            postdata,
            function (response) {
                $(this).text(response);
            });
        $(this).removeClass('tiq-editable-editstate');
        $(this).attr('contentEditable','false');
    }); 
```

导致冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:45:03.243

does doing

```
$.post('/portfolios/mod/t:'+action+'/',data,function(response)
    {
        callback(response);
        alert('Finished Post.');
    }); 
```

alone, works? if it does, then you may have a problem configuring the function itself

# php - 我们可以在不使用 ajax 重新加载页面的情况下更新 javascript 数组变量吗？

> ID：10696827
> 
> 赞同：0
> 
> 时间：2012-05-22T06:28:41.113
> 
> 标签：php, javascript, ajax

我们可以在不重新加载页面和不刷新的情况下更新 javascript 数组变量吗？我有一个数组中的数据列表。后来我使用 php 和 ajax 获得了更多数据。现在我想将从 php ajax 获得的新数据附加到已经有一个数组的旧 javascript 变量中。我不想重新加载页面。但是我们也可以覆盖数据。使用这个 javascript 变量，一些 javascript 函数正在执行并根据数据显示一些图片。我们可以做这样的事情吗？还是我们必须重新加载框架才能执行 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:31:14.083

如果我以是/否的方式回答这个问题，那么是的，通过 ajax 回调函数返回数据将被附加/连接到 js 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:31:51.813

就像`AJAX`，你需要调用一个 JavaScript 函数来让某事发生，你也可以用同样的方式调用一个 JavaScript 函数，而不是做`AJAX`一些事情，你可以做其他事情。例如向数组中添加一些东西。或者覆盖它。

只需在您想要的位置调用您的函数（在 中`onclick`，或在`AJAX`调用的返回（成功或错误回调）中），然后让该函数修改您的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:32:17.993

简短回答：**是**的，您可以向现有数组添加/追加/连接/任何新数组项。

说明：假设您有一个包含数组的变量，以及一个数组或包含数组的响应，您可以使用该[`array.concat()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)方法将新内容附加到旧数组。

```
//let existingArray be your array in the page
var existingArray = [];

//during AJAX success, you overwrite the existing variable with
//a concatenated array comprising the old and the new.
existingArray = existingArray.concat(newArray); 
```

# java - 定义动作和目标的设计模式

> ID：10696828
> 
> 赞同：1
> 
> 时间：2012-05-22T06:28:41.660
> 
> 标签：java, design-patterns

我有一个 GenericDAO，它将其操作委托给 DataSource 类

```
public class BaseDAOImpl<T> implements BaseDAO<T> {     
    DataSource ds;      

    public T update(T entity) {
    ds.update(entity);
    } 
```

我现在遇到的问题是我们希望它与多个数据源一起工作。这给我留下了 2 个选择

1）在DAO中为数据源创建一个setter并在每次操作之前使用它

2) 每个数据源数量创建 BaseDAO 的每个子节点 n 次

我希望 DataSource 退出 DAO，但是如何将操作委派给它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:37:19.783

您可以使用工厂来创建数据源，因此根据您的要求创建数据源，然后是否可以使用依赖注入将数据源注入 DAO。

要摆脱 DAO 中的数据源，您可以使用委托模式，在您的 DAO 中注入委托者，您的委托将具有数据源的引用。

另请注意，如果您只使用一个通用 DAO，您的 DAO 最终可能会被非通用但更特定于应用程序的某些功能的方法弄脏，恕我直言，您还应该考虑将 DAO 分解到更具体的级别，留下通用的DAO 实际上做的是通用工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:48:35.457

我猜你想实现类似多租户的东西：当请求来自用户 A 时，所有参与处理该请求的 DAO 都应该与用户 A 对话`DataSource`，依此类推。

如果是这样，`DataSource`是您请求的上下文的一部分，存储这种上下文数据的一个可能选项是使用`ThreadLocal`：

*   当请求到来时，您将适当的`DataSource`放入`ThreadLocal`
*   所有 DAO 都从中`DataSource`获得`ThreadLocal`.
    显然，为了单一职责原则，最好将此逻辑隐藏在工厂后面并将该工厂注入您的 DAO 中，以便 DAO 将调用`factory.getCurrentDataSource()`每个操作。
*   `ThreadLocal`完成请求处理后清除。

请注意，它仅在每个请求由单个线程处理时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T07:00:54.000

我不会对数据源使用 setter，而是将它传递给 DAO 的构造函数。在 DAO 对象的生命周期内更改数据源似乎是不对的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:55:04.720

好吧，我认为，在这种情况下，您应该尝试使用依赖注入。您的基类将从数据源类型中抽象出来。因此，即使您要添加一种新类型的数据源，您最终要做的唯一更改将是工厂方法，该方法将根据当前请求生成一种 DataSource 对象，从而增加应用程序的松散耦合

```
interface IDataSource<T>
{
    T update<T>(T entity);
}

public ConcereteDataSource<T> : IDataSource<T>
{
    public T update<T>(T entity)
    {
        //Concerete implementation
    }
}

public class BaseDAOImpl<T> implements BaseDAO<T> 
{     

    public IDataSource ds {get;set;}
    public T update(T entity) {
    ds.update(entity);
}

//where you try to instansiate a new instance of Base DAO

//Factory to create a new instance of datasource for this context
IDataSource contextualDs = GetDataSourceForThisUser();

BaseDAOImpl<SomeType> dao = new BaseDAOImpl<SomeType>();
//inject the dependency
dao.ds = contextualDs; 
```

# php - URL Rewrite PHP 仍然得到相同的 $_GET['']？

> ID：10696830
> 
> 赞同：0
> 
> 时间：2012-05-22T06:28:59.040
> 
> 标签：php, apache, url-rewriting

我很不喜欢这个 URL 重写。我脑子里有个问题。

**www.example.com/?page_name=home**

$_GET['page_name'] 实际上是 home

URL 重写后 url 变为

**www.example.com/home**

PHP 仍然可以得到 $_GET['page_name'] 是 'home' 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:36:08.137

URL 重写由*Web 服务器*完成，在这种情况下是 Apache。这与 PHP 不同。

Apache 收到对 URL 的请求`www.example.com/home`。它现在需要弄清楚如何处理这个请求。它将检查其配置是否匹配`www.example.com`，这会将其指向*文档根目录*，即硬盘上的某个文件夹。它检查硬盘上的那个文件夹并遇到一个 .htaccess 文件。它评估 .htaccess 文件，该文件告诉它将URL 从*重写*`/home`为`?page_name=home`。

Apache 现在试图弄清楚如何处理`?page_name=home`. 由于没有给出文件名，它默认为`index.php`（希望存在）。它现在`index.php`在文档根目录中运行该文件，并将其`?page_name=home`作为接收到的 URL 传递。PHP 从那里获取它，忘记了发生的重写。对于 PHP，您似乎已将参数`page_name`作为查询参数接收并将其放入`$_GET`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:42:48.113

尝试使用这样的重写（根据需要进行更改）：

```
RewriteRule ^([A-Za-Z0-9-_]+)/?$ index.php?page_name=$1 [L] 
```

以上规则重定向

```
http://www.domain.com/string_LiKe-this53/ 
```

在真实的现有页面上

```
http://www.domain.com/index.php?page=string_LiKe-this53 
```

您可以在其上使用您的`$_GET['page']`，这将具有价值`string_LiKe-this53`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:38:52.877

这取决于重写规则，但是是的，您可以让它按预期工作。

以下重写规则：

```
RewriteRule /home /index.php?page_name=home 
```

只会导致对 /home 的请求以`$_GET['page_name']`等于“home”的方式执行 index.php。

但是，根据您网站的复杂性，最好使用更通用的重写规则，例如：

```
RewriteRule ^(.+)$ index.php/$1 
```

然后您将查询 $_SERVER['PATH_INFO'] 以查看它是否包含“home”。这将与可能传入的其他 $_GET 参数很好地配合。

# css - CSS 验证器，您可以在其中禁用基于每个文件的错误消息

> ID：10696834
> 
> 赞同：2
> 
> 时间：2012-05-22T06:29:10.007
> 
> 标签：css, validation, w3c-validation, csslint

是否存在可以在文件中提示的 CSS 验证器，例如 jslint，哪些验证规则在该文件或规则中有效和无效。

我试过

*   W3C 验证器

*   csslint

它们都不提供此功能，并且总是会导致想要使用的标记的验证错误（IE hack、供应商扩展）

为了进一步澄清问题：我想在提交挂钩中使用这个验证器来捕获不符合项目策略的 CSS。如果人们认为供应商前缀是好是坏，我并不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:48:45.633

我不相信有一个工具足够复杂，可以找到您的页面链接到的所有样式表，并为每个样式表提供定制的验证规则。

我总是做的是将我的 IE hack 隔离在一个单独的文件中，隐藏在条件注释中，因此即使我传递了链接到其所有样式表的页面的 URI，验证器也永远不会看到它们。

对于供应商前缀，您可以告诉 W3C 验证器[发出警告而不是错误](https://stackoverflow.com/a/8470345/106224)，尽管您无法让它完全忽略它们，因为它们根本*不验证*。

# java - 在启动期间禁用@Webservice 加载

> ID：10696837
> 
> 赞同：0
> 
> 时间：2012-05-22T06:29:20.237
> 
> 标签：java, web-services, xfire

如何在启动期间禁用@Webservice 加载以节省 xfire 中的一些加载时间？

我有一堆带有@Webservice 注释的服务。它们都在启动过程中被加载并导致启动缓慢。如果我在开发实例中测试非服务，我不想加载这些。我想知道是否有办法通过设置系统属性或其他东西来禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:21:47.040

当然，在您配置 xfire servlet 的 web.xml 中：

```
<servlet>
    <servlet-name>xfire</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>-1</load-on-startup>
</servlet> 
```

load-on-startup 的负值意味着 servlet 仅在容器“感觉像”时才被初始化，对于大多数容器来说，这意味着当第一个请求进入时。

从 servlet 规范：

> load-on-startup 元素表明这个 servlet 应该在 Web 应用程序启动时被加载（实例化并调用它的 init()）。这些元素的可选内容必须是一个整数，指示应加载 servlet 的顺序。如果该值为负整数，或者该元素不存在，则容器可以在选择时自由加载 servlet。如果该值为 128 正整数或 0，则容器必须在部署应用程序时加载并初始化 servlet。容器必须保证在标有大整数的 servlet 之前加载标有小整数的 servlet。容器可以选择加载具有相同加载启动值的 servlet 的顺序。

因此，请查阅您的 Web 容器的文档，以确保这在您的情况下具有预期的效果。

# c - fread 会移动文件指针吗？

> ID：10696845
> 
> 赞同：22
> 
> 时间：2012-05-22T06:29:53.423
> 
> 标签：c, file, fread

简单的问题，

当我使用 fread 时：

```
fread(ArrayA, sizeof(Reg), sizeBlock, fp); 
```

我的文件指针`fp`向前移动了？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-22T06:35:25.280

**答：**是的，文件指针的位置在读取操作后会自动更新，以便后续`fread()`函数读取连续的文件记录。

**澄清：** `fread()`是一个面向块的功能。标准原型是：

```
size_t fread(void *ptr,
             size_t size,
             size_t limit,
             FILE *stream); 
```

该函数从 指向的流中读取，并将`stream`读取的字节放入 指向的数组中`ptr`，当满足以下任一条件时，它将停止读取：

*   它已读取`limit`size 的元素`size`，或
*   它到达文件的末尾，或者
*   发生读取错误。

`fread()`为您提供与 一样多的控制权`fgetc()`，并且具有能够在单个 I/O 操作中读取多个字符的优势。事实上，如果内存允许，您可以将整个文件读入一个数组并在内存中进行所有处理。这具有显着的性能优势。

`fread()`通常用于将固定长度的数据记录直接读取到结构中，但您可以使用它来读取任何文件。这是我个人阅读大多数磁盘文件的选择。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-22T06:32:11.220

是的，调用 fread 确实会移动文件指针。文件指针将按实际读取的字节数前进。如果 fread 出错，调用 fread 后的文件位置是未指定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T06:36:34.607

是的，`fp`将按读取的字节总数提前。
在您的情况下，函数**fread**从 指向的流中读取`sizeBlock`每个字节长的对象，并将它们存储在 给定的位置。`sizeof(Reg)``fp``ArrayA`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-08T17:19:29.317

是的，它确实。可以使用[ftell()](https://linux.die.net/man/3/ftell)函数来检查它以显示当前位置（实际上是到目前为止读取的字节数），看看它：

```
int main() {

    typedef struct person {
        char *nome; int age;
    } person;

    // write struct to file 2x or more...

    FILE *file = fopen(filename, "rb");
    person p;
    size_t byteslength = sizeof(struct person);

    printf("ftell: %ld\n", ftell(file));
    fread(&p, byteslength, 1, file);
    printf("name: %s | age: %d\n", p.nome, p.idade);

    printf("ftell: %ld\n", ftell(file));
    fread(&p, byteslength, 1, file);
    printf("name: %s | age: %d\n", p.nome, p.idade);

    //...

    fclose(file);

    return 0;
} 
```

# android - 如何在android中以编程方式隐藏三星galaxy note的键盘

> ID：10696848
> 
> 赞同：1
> 
> 时间：2012-05-22T06:30:02.010
> 
> 标签：android, android-softkeyboard

我正在为两个编辑文本使用数据和时间选择器，我想为两个编辑文本隐藏键盘。我正在这样做

```
mDatePickerEdt = (EditText)findViewById(R.id.createwedding_datepicker_edt);
mTimePickerEdt = (EditText)findViewById(R.id.createwedding_timepicker_edt);
mDatePickerEdt.setInputType(InputType.TYPE_NULL);
mTimePickerEdt.setInputType(InputType.TYPE_NULL); 
```

它适用于智能手机。我在三星 Galaxy Note 中遇到问题。如果有人有想法。请帮助，提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:00:19.950

您可以使用以下代码隐藏键盘。

```
 getWindow().setSoftInputMode(
WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:18:29.103

尝试这个

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

或尝试输入 InputMethodManager.HIDE_NOT_ALWAYS 而不是 0

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

您可以使用下面的代码来抑制键盘，直到用户触摸 edittext 视图。

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# c# - C# 中的 windows 商店应用程序

> ID：10696849
> 
> 赞同：2
> 
> 时间：2012-05-22T06:30:11.953
> 
> 标签：c#, windows-store-apps

这可能是非常新手，我是经验丰富的 asp.net 和 c# 开发人员，也有 winforms 经验。

我想知道我需要学习什么来开始制作 Windows 商店应用程序，什么新的技术，语言？

第二个问题是：如果现在可以，我如何向新的 Windows 商店提交申请？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:29:18.527

先说第二个问题。目前，您无法向 Windows 应用商店提交应用程序。该操作系统仍处于测试阶段（消费者预览版），商店并非对所有人开放。

在 Windows 8 上有多种编程方式。您可以使用 JavaScript/HTML5，也可以使用 C#/XAML 或 C++/XAML。鉴于您的背景，您应该将 C# 视为一门语言，并将 XAML 作为 UI 框架。这与您可能遇到的 Silverlight 或 WPF 非常相似。

一个很好的起点是查尔斯·佩佐德即将出版的书。它现在正在[出售。](http://shop.oreilly.com/product/0790145369079.do)另一个地方是[http://dev.windows.com](http://dev.windows.com)。这将为您提供教程、参考文档和示例。

# android - 在android中解压Gzip sqlite数据库

> ID：10696851
> 
> 赞同：2
> 
> 时间：2012-05-22T06:30:28.443
> 
> 标签：android

我是安卓开发者。我有一个 `Gzip`包含一堆“sqlite”数据库的文件。如何解压缩并将其保存在 Android 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:37:24.027

```
private byte[] readFromZip(InputStream is) {
    try {
        GZIPInputStream gzip = new GZIPInputStream(is);
        byte[] buff = new byte[2048];
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int len;
        while ((len = gzip.read(buff)) != 0) {
            baos.write(buff, 0, len);
        }
        return baos.toByteArray();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

1.  使用[GZIPInputStream](http://developer.android.com/reference/java/util/zip/GZIPInputStream.html)读取您的 gzip 文件。并将文件输出到您的 SD 卡或内部存储器。

2.  使用[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)打开数据库。

# asp.net - Running a part of MVC application separately under webforms application

> ID：10696852
> 
> 赞同：1
> 
> 时间：2012-05-22T06:30:41.393
> 
> 标签：asp.net, asp.net-mvc-3, iis-7, iis-7.5

I have a working MVC3 application with different modules. I want to use one of those modules as a separate application under IIS, this separate application will be under an already running WebForms application.

```
e.g.

My MVC application is running at http://mymvcappdomain.com/

There is a feature under this called "MyFeature" which runs at http://mymvcappdomain.com/MyFeature

I want another site (WebForms application) http://mywebformssitedomain/ to display exactly as http://mymvcappdomain.com/MyFeature when I browse to http://mywebformssitedomain/MyFeature 
```

Is it possible? If so, how?

What I have already tried is dynamically registering selected number of routes based on the URL. I thought it'd work but as per the stackoverflow topic (http://stackoverflow.com/questions/2518057/request-is-not-available-in-this-context), I am not allowed to access the request object in the global.asax for registering routes.

Many thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:15:43.950

Actually I was able to achieve what I wanted by changing the home controller. But it was purely because my requirements were not too complicated. The part of the MVC app I wanted to run was kind of standalone without any interference from other modules. But I guess the approach should work in resolving the issue.

```
public ActionResult Index()
    {
        if (URL is different to your normal MVC App URL)
        {
            return RedirectToRoute("YourCustomRouteForModule");
        }
        return View();
    } 
```

# c# - 可扩展的网格视图

> ID：10696858
> 
> 赞同：0
> 
> 时间：2012-05-22T06:31:13.013
> 
> 标签：c#, asp.net, html, gridview

我想使用一个可以扩展其行的网格视图，里面的行也应该能够扩展。所以基本上我想看到三个层次的信息。我在 Google 上看到了很多工具，但它们不是免费的，或者它们没有降到 3 级。我也不想使用树网格视图对此的任何建议将不胜感激。

提前致谢

这是我到目前为止所拥有的：

```
 <asp:TemplateField>
                <ItemStyle CssClass="inv" Width="0" />
                <HeaderStyle CssClass="inv" Width="0"></HeaderStyle>
                <HeaderTemplate>
                    </th></tr></HeaderTemplate>
                <ItemTemplate>
                    </td>
                    <asp:PlaceHolder ID="Project" runat="server" Visible="False">
                        <tr>
                            <td colspan="1" style="border: 0px solid #fff; background-color: transparent;">
                            </td>
                            <td colspan="9"  style="padding: 0px; padding-top: 3px; padding-bottom: 7px; border-right-width: 0px;
                                border-bottom-width: 0px; background-color: #FFFFFF;">
                                <asp:UpdatePanel runat="server" ID="ChildControl">
                                    <ContentTemplate>
                                        <asp:LinkButton ID="lbtnAddDeliverable" runat="server" OnClick="lbtnAddDeliverable_Click"
                                            Height="17px">Add Deliverable </asp:LinkButton>&nbsp; &nbsp;
                                        <asp:GridView ID="grid0" runat="server" AllowPaging="True" DataKeyNames="DeliverableID"
                                            AutoGenerateColumns="False" CellPadding="4" ForeColor="#333333" GridLines="None"
                                            OnRowDataBound="grid0RowDataBound"
                                            OnRowCommand="grid0_RowCommand" Width="970px" DataSourceID="odsGetDelivbyProjects">
                                            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                                            <Columns>
                                                <asp:BoundField DataField="DeliverableID" HeaderText="DeliverableID" SortExpression="DeliverableID" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"
                                                    HeaderStyle-CssClass="invisible" ItemStyle-CssClass="invisible">
                                                    <HeaderStyle CssClass="invisible" />
                                                    <ItemStyle CssClass="invisible" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" HeaderStyle-CssClass="invisible" ItemStyle-CssClass="invisible" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"/>
                                                <asp:TemplateField HeaderText="Name" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left">
                                                    <ItemTemplate>
                                                        <asp:LinkButton ID="lbtnEditDeliverable"  CommandName="EditDeliverable" runat="server" OnClick="lbtnEditDeliverable_Click"> Edit Deliverable</asp:LinkButton>
                                                    </ItemTemplate>
                                                </asp:TemplateField>
                                                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"/>
                                                <asp:BoundField DataField="StartDate" HeaderText="StartDate" SortExpression="StartDate" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"/>
                                                <asp:BoundField DataField="EndDate" HeaderText="EndDate" SortExpression="EndDate" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"/>

                                                <asp:TemplateField HeaderText="" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left">
                                                    <ItemTemplate>
                                                        <asp:LinkButton ID="lbtnAddDelivResource" CommandName="DeliverableResource" runat="server" OnClick="lbtnAddDelivResource_Click"> Add Resources</asp:LinkButton>
                                                    </ItemTemplate>
                                                </asp:TemplateField>
                                                <asp:TemplateField HeaderText="" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>
                    <asp:LinkButton ID="DeleteButton" runat="server" CausesValidation="False" CommandName="Delete"
                        Text="Delete" OnClientClick="return confirm('Are you certain you want to delete this Delivirable?');">
                    </asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
                                                <%--                                <asp:TemplateField HeaderText="">
                <ItemTemplate>
            <asp:LinkButton ID="lbtnAddDeliverable" runat="server"  OnClick="lbtnAddDeliverable_Click"
        Height="17px">Add Deliverable </asp:LinkButton>
                    </ItemTemplate>
            </asp:TemplateField>--%>
                                            </Columns>
                                            <EditRowStyle BackColor="#999999" />
                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                                            <SortedAscendingCellStyle BackColor="#E9E7E2" />
                                            <SortedAscendingHeaderStyle BackColor="#506C8C" />
                                            <SortedDescendingCellStyle BackColor="#FFFDF8" />
                                            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
                                        </asp:GridView>
                                        <borderskin bordercolor="Transparent" />
                                        <div class="graph_aux" style="font-size: .7em;">
                                            <span></span>
                                        </div>
                                        <asp:ObjectDataSource ID="odsGetDelivbyProjects" runat="server" SelectMethod="CallDeliverableDetails"
                                            TypeName="Pbel_Resource_Management.Classes.Object_Classes.Projects.ProjectCalls">
                                            <SelectParameters>
                                                <asp:SessionParameter Name="ProjectID" SessionField="DeliverableFromProject" Type="Int32" />
                                            </SelectParameters>
                                        </asp:ObjectDataSource>
                                    </ContentTemplate>
                                </asp:UpdatePanel>
                            </td>
                        </tr>
                    </asp:PlaceHolder>
                </ItemTemplate>
            </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:41:49.320

您可以[像 Gridview « Teme on .NET 一样像 Tree 一样执行此操作](http://temebele.wordpress.com/tag/tree-like-gridview)

# c# - 在c#中用0-9之间的随机数填充数组

> ID：10696861
> 
> 赞同：-7
> 
> 时间：2012-05-22T06:31:27.307
> 
> 标签：c#

> **可能重复：**
> [用 c# 中 0-9 之间的唯一随机数填充数组](https://stackoverflow.com/questions/10688044/filling-a-array-with-uniqe-random-numbers-between-0-9-in-c-sharp)

我有一个像“page [100]”这样的数组，我想用c＃中0-9之间的随机数填充它......我该怎么做？我用了 ：

```
IEnumerable<int> UniqueRandom(int minInclusive, int maxInclusive)
{
    List<int> candidates = new List<int>();
    for (int i = minInclusive; i <= maxInclusive; i++)
    {
        candidates.Add(i);
    }
    Random rnd = new Random();
    while (candidates.Count > 1)
    {
        int index = rnd.Next(candidates.Count);
        yield return candidates[index];
        candidates.RemoveAt(index);
    }
} 
```

这边走 ：

```
int[] page = UniqueRandom(0,9).Take(array size).ToArray(); 
```

但它只给了我 9 个唯一的随机数，但我需要更多。我怎么能有一个随机数不相同的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:36:11.810

怎么样

```
int[] page = new int[100];
Random rnd = new Random();
for (int i = 0; i < page.Length; ++i)
  page[i] = rnd.Next(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:35:21.690

```
Random r = new Random(); //add some seed
int[] randNums = new int[100]; //100 is just an example
for (int i = 0; i < randNums.Length; i++)
    randNums[i] = r.Next(10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:37:11.063

您有一个包含 100 个数字的数组，并从包含 10 个不同数字的池中抽取。您如何期望没有重复项？

不要把事情复杂化，只写需要写的东西。IE：

1.  创建数组
2.  循环它的大小
3.  将一个介于 [0, 9] 之间的随机数放入数组中。

# ios - 摇动 iPhone 打开我的应用程序。可能的？

> ID：10696862
> 
> 赞同：2
> 
> 时间：2012-05-22T06:31:35.840
> 
> 标签：ios

是否可以在显示主屏幕并打开我的应用程序时摇动 iphone？

例如：触发

`(void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event`打开我的应用程序。在ios5中可以使用公共sdk吗？

我对技术方面比可用性更感兴趣，所以请，如果你认为这是一个可怕的想法，或者你想问我会怎么做这样的事情，那么我会说谢谢，但我明白这一点！

我不想侵入操作系统，使用越狱手机......但更想知道应用程序本身是否具有实现相同功能的完整逻辑？

**编辑**

我接受了“不可能”的答案，但随后得到了@skippy 的另一个答案/评论，说这可能是可能的，所以我要回去弄清楚它的模式。将相应地更新接受的答案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T06:35:39.833

这是不可能的。即使这不是一个好主意，想想如果两个应用程序可以做到这一点会发生什么......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T06:43:54.650

抱歉不行。只有当您的应用程序已经在运行时，您才能处理抖动式事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:48:23.057

我认为这是可能的，但很复杂。
第一个应用程序在后台运行（阅读所需的后台模式）。
此应用程序必须调用第二个应用程序以防抖动。

这是奇怪的行为，请阅读：
[从另一个应用程序中启动一个应用程序](https://stackoverflow.com/questions/419119/launch-an-app-from-within-another-iphone)

# c - copy_from_user() 的任何示例？内核和用户空间

> ID：10696863
> 
> 赞同：3
> 
> 时间：2012-05-22T06:31:36.027
> 
> 标签：c, linux-kernel, linux-device-driver, pid

我正在寻找将 PID 值从用户空间复制到内核空间，这是我的代码快照。

内核模块：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/init.h>
#include <asm/siginfo.h>
#include <linux/rcupdate.h>
#include <linux/sched.h>
#include <linux/uaccess.h>
#include <linux/signal.h>

MODULE_LICENSE ("GPL");

struct siginfo sinfo;
pid_t pid;
struct task_struct *task;

int init_module() 
{
    memset(&sinfo, 0, sizeof(struct siginfo));
    sinfo.si_signo = SIGIO;
    sinfo.si_code = SI_USER;
    pid = 5218; // Everytime a new PID 
    // task = find_task_by_vpid(pid); I am also working on new and old version of UBUNTU so thats why this is here
    task = pid_task(find_vpid(pid), PIDTYPE_PID); 
    printk("%d .\n", task);

    if(task == NULL) {
        printk("Cannot find PID from user program\r\n");
        return 0;
    }

    send_sig_info(SIGIO, &sinfo, task);
    return 0;
}
void cleanup_module () 
{
    printk(KERN_ALERT"\nGoodBye World\n\n");
} 
```

用户空间代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <string.h>

void signal_handler(int signum)
{
    if (signum == SIGIO) printf("SIGIO\r\n"); return;
}

int main()
{
    int i = 1;
    signal(SIGIO, signal_handler);
    printf("My PID is %d.\n", getpid());

    while (i);
    return 0;
} 
```

现在，在这里我总是运行用户空间程序来获取 PID，然后我总是必须在内核模块中编辑 pid 变量。

我找到了一种将信息从用户空间访问到内核空间的方法，反之亦然（即，使用`copy_from/to_user()`）

但是我无法理解它们中的任何一个从用户空间获取 PID，我必须在`/dev`目录中创建文件，并且应该应用所有必需的函数来获取 PID？

还有其他方法吗？如果没有，那么任何人都可以帮我这样做吗？我是 c 编程新手，直接玩内核模块，所以对我来说很难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-06T07:05:41.197

查看您提供的代码，您似乎想要处理`SIGIO`信号

这是我尝试解决您的问题，

`signal_kernel.c`文件 ：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/init.h>
#include <asm/siginfo.h>
#include <linux/rcupdate.h>
#include <linux/sched.h>
#include <linux/uaccess.h>
#include <linux/signal.h>
#include <linux/debugfs.h>
#include <linux/pid.h>

#define MAX 10

MODULE_LICENSE("GPL");

struct dentry *file;

static ssize_t write_conf_pid(struct file *file, const char *buf,
            size_t count, loff_t *position)
{
    char temp_str[MAX];
    int ret;
    int pid = 0;
    struct siginfo sinfo;
    struct task_struct *task;

    /* NEVER TRUST USER INPUT */
    if (count > MAX)
        return -EINVAL;

    if (copy_from_user(temp_str, buf, MAX) != 0)
        return -EFAULT;

    ret = sscanf(temp_str, "%d", &pid);
    if (ret != 1) {
        pr_info("Error in reading PID value from user");
        return -EINVAL;
    }

    pr_info("User entered pid %d\n", pid);
    memset(&sinfo, 0, sizeof(struct siginfo));
    sinfo.si_signo = SIGIO;
    sinfo.si_code = SI_USER;
    task = pid_task(find_vpid(pid), PIDTYPE_PID);
    if (task == NULL) {
        pr_info("Cannot find PID from user program\r\n");
        return -ENODEV;
    }
    ret = send_sig_info(SIGIO, &sinfo, task);
    if (ret < 0)
        pr_info("Error sending signal\n");
    return count;
}

static const struct file_operations my_fops = {
    .write = write_conf_pid,
};

int init_module()
{
    /* Only root can write to this file */
    file = debugfs_create_file("pidconf", 0200, NULL, NULL, &my_fops);
    return 0;
}

void cleanup_module()
{
    pr_info("\nGoodBye World\n\n");
} 
```

`signal_user.c`文件 ：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <string.h>

void signal_handler(int signum)
{
    if (signum == SIGIO)
        printf("SIGIO\r\n");
    return;
}

int main()
{
    int i = 1;
    signal(SIGIO, signal_handler);
    printf("My PID is %d.\n", getpid());
    while (i);
    return 0;
} 
```

编译并运行用户空间和内核空间程序后，使用`debugfs`接口将PID值发送到内核空间，

```
$ insmod signal_kernel.ko
$ ./signal_user 
My PID is 17633.

... # Process will run in loop due to while(1) 
```

`debugfs`从另一个终端，向接口提供 PID ，

```
$ echo 17633 > /sys/kernel/debug/pidconf 
```

此任务有多种方法（`sysfs`、`misc_char_device`等`char device`），但这将为您提供有关使用`copy_from_user()`和`copy_to_user()`

请注意，在`signal_user.c`和中几乎没有错误处理`signal_kernel.c`。

# newsstand-kit - 报亭自动更新或免费应用内

> ID：10696867
> 
> 赞同：0
> 
> 时间：2012-05-22T06:31:45.293
> 
> 标签：newsstand-kit, auto-renewing

我创建了一个应用程序，并在应用程序商店上线。

现在，我想将此应用程序启用为报亭。

我为报亭阅读以下内容：

“报亭应用程序必须提供至少一项自动更新或免费的应用内购买订阅。”

在应用程序内部，它将从服务器读取 XML 文件，如果在 XML 中添加新问题标签，则它将要求用户下载新问题。

意味着，我正在通过 XML 从我的服务器端管理所有新问题。（不通过 Apple 的自动更新或免费应用内）。

但是我已经添加了 Newsstand 的键，以便应用程序将显示为 Newsstand。

可以吗？Apple 会批准我的应用程序吗？

因为我没有使用“自动更新或免费应用内”。并在服务器端管理来自 XML 的问题。

请让我提供您的反馈，并让我知道如何处理“自动更新或免费应用内”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:08:09.897

如果没有您必须在 iTunes 中创建的任何订阅（免费/付费），Apple 肯定不会批准您的 Newsstand 应用程序。想法是用户可以订阅，您的应用程序可以使用报亭推送通知在 bachround 中自动下载新问题。让我知道，我会更详细地写答案（现在在电话上）

# android - 在 Android 中解析 XML - AsyncTask

> ID：10696872
> 
> 赞同：0
> 
> 时间：2012-05-22T06:31:59.537
> 
> 标签：android, xml

我是Android开发的新手。现在我正在尝试解析。我有很多解析 XML 的教程。但我想知道异步解析 XML。我在某个地方找到了，xml 可以使用 AsyncTask 异步加载。谁能帮我找出来。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:34:58.770

下面是使用 AsyncTask 的教程：

[http://droidapp.co.uk/?p=177](http://droidapp.co.uk/?p=177)

还有一个用于解析 RSS / XML：

[http://droidapp.co.uk/?p=166](http://droidapp.co.uk/?p=166)

您需要在 AsyncTask 的 doInBackground 中调用您的解析函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:40:56.260

```
public class _StackOverflowActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String yourXmlString = "<put your xml String here>"; 

        ParseXMLTask parseXMLTask = new ParseXMLTask();
        parseXMLTask.execute(yourXmlString); 
    }

    class ParseXMLTask extends AsyncTask<String, Void, Void> {
        @Override
        protected Void doInBackground(String... params) {
            String yourXml = params[0]; 

            //Parse your xml here
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            //do something after parsing is done
        }   
    }
} 
```

首先，您必须扩展类 AsyncTask。在我的示例中，我将其命名为 ParseXMLTask。

AsyncTask 要求您实现一种方法，即“doInBackground”。doInBackground 在单独的线程中运行，将用于解析 xml 的代码放在那里。

线程完成后，调用 onPostExecute。onPostExecute 在您的主线程中运行，如果您希望在 doInBackground 完成后执行某些操作，可以使用它

要使用 ParseXMLTask，您必须将它实例化为一个对象。然后运行命令`.execute()`。您可以传递`execute`与我所做的类似的对象`parseXMLTask.execute(yourXmlString);`。您可以传递任意数量的变量，并确保以`doInBackground`类似于`String yourXml = params[0];`. 如果您在 .execute say... 中传递了第二个变量，请通过 doInBackground`parseXml.execute(yourXmlString, my2ndVariable);`处理它

```
 String yourXml = params[0]; 
 String the2ndVariable = params[1]; 
```

当您调用 .execute 时，您告诉 AsyncTask 在单独的线程中运行您放置在 doInBackground 中的任何代码。

# android - 如何使用代码从 VCF 文件中导入联系人

> ID：10696873
> 
> 赞同：0
> 
> 时间：2012-05-22T06:32:10.613
> 
> 标签：android, import-contacts

我使用此代码创建了一个包含联系人的 vcf 文件

```
ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
                        Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);
                        System.out.println("The value is " + cr.getType(uri));
                        AssetFileDescriptor fd = this.getContentResolver().openAssetFileDescriptor(uri, "r");
                        FileInputStream fis = fd.createInputStream(); 
```

如何通过代码将此文件导入设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:56:06.763

网上搜索后导入联系人的最佳方式如下

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
             int rawContactInsertIndex = ops.size();
             ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
                      .withValue(RawContacts.ACCOUNT_TYPE,null)
                      .withValue(RawContacts.ACCOUNT_NAME, null)
                      .withValue(RawContacts.STARRED, Starred)
                      .withValue(RawContacts.CUSTOM_RINGTONE, CustRingTone)
                      .build());

             ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
                      .withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex)
                      .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
                      .withValue(StructuredName.DISPLAY_NAME, displayName)
                      .withValue(StructuredName.PHONETIC_GIVEN_NAME, PhoneticName_First)
                      .withValue(StructuredName.PHONETIC_MIDDLE_NAME, PhoneticName_Middle)
                      .withValue(StructuredName.PHONETIC_FAMILY_NAME, PhoneticName_Last)
                      .build());

             for (RowData phone : phones) {
                 ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
                          .withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex)
                          .withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                          .withValue(Phone.NUMBER, phone.data)
                          .withValue(Phone.TYPE, phone.type)
                          .withValue(Phone.LABEL, phone.customLabel)
                          .build());
                } 
```

# expect - 在 tcl 中使用期望的数据捕获问题

> ID：10696881
> 
> 赞同：0
> 
> 时间：2012-05-22T06:32:37.210
> 
> 标签：expect

我有一个疑问。我想将命令的结果存储在字符串变量中。谁能告诉我代码中的错误是什么？它不工作。我用过`expect_out(buffer)`，但它不起作用。

```
#!/usr/bin/expect
package require Expect
set Argu1 [lindex $argv 0]
set Argu2 [lindex $argv 1]

if {$argc == 2} {

    if {[regexp {^(\d|[1-9]\d|1\d\d|2[0-4]\d|[2][5][0-5])\.(\d|[1-9]\d|1\d\d|2[
        0-4]\d|[2][5][0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|[2][5][0-5])\.(\d|[1-9]
        \d|1\d\d|2[0-4]\d|[2][5][0-5])$} $Argu1 match ]} {
        puts "VALID IP-ADDRESS"
        set timeout $Argu2-1
        spawn ping $Argu1
        expect "Expect"
        set string $expect_out(buffer)
        puts $string
        puts "SUCCESS"
        exit 
    } else { 
        puts "INVALID IP-ADDRESS"
    } 
} else { 
    puts "YOU HAVE TO GIVE TWO ARGUMENTS\n FIRST ARGUMENT SHOULD BE 
    IP-ADDRESS \n SECOND ARGUMENT SHOULD BE THE NUMBER OF PACKETS
    YOU WANT TO SEND"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:44:16.627

我不愿意回答你的问题，因为你还没有回答我对另一个问题的回答。但是，鉴于没有其他人回应，我会尽力帮助您。

我认为您不需要在这里使用**$expect_out(buffer)**。假设 ping 返回“0% loss”或“0% packet loss”表示 ping 成功，您可以尝试以下操作（未经测试）。显然，您可以将“0%”更改为您想要表示成功的任何内容。

```
#!/usr/bin/expect
package require Expect
set Argu1 [lindex $argv 0]
set Argu2 [lindex $argv 1]

if {$argc == 2} {

    if {[regexp {^(\d|[1-9]\d|1\d\d|2[0-4]\d|[2][5][0-5])\.(\d|[1-9]\d|1\d\d|2[
        0-4]\d|[2][5][0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|[2][5][0-5])\.(\d|[1-9]
        \d|1\d\d|2[0-4]\d|[2][5][0-5])$} $Argu1 match ]} {
        puts "VALID IP-ADDRESS"
        set timeout $Argu2-1
        spawn ping $Argu1
        expect {
          "0%" {puts "The IP address was successfully pinged"}
          "default" {puts "Could not ping this IP address"}
        }
        exit 
    } else { 
        puts "INVALID IP-ADDRESS"
    } 
} else { 
    puts "YOU HAVE TO GIVE TWO ARGUMENTS\n FIRST ARGUMENT SHOULD BE 
    IP-ADDRESS \n SECOND ARGUMENT SHOULD BE THE NUMBER OF PACKETS
    YOU WANT TO SEND"
} 
```

我建议“0%”的原因如下。如果您从 Windows 机器上成功执行 ping，您将看到如下内容（注意“0% 丢失”）：

```
C:\Documents and Settings\Brian>ping 192.168.1.1

Pinging 192.168.1.1 with 32 bytes of data:

Reply from 192.168.1.1: bytes=32 time=1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64

Ping statistics for 192.168.1.1:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 1ms, Average = 0ms 
```

在 Unix 机器上，它可能看起来像这样（注意“0% 丢包”）：

```
[brian@rex 4]$ ping -c 1 192.168.1.87
PING 192.168.1.87 (192.168.1.87) 56(84) bytes of data.
64 bytes from 192.168.1.87: icmp_seq=0 ttl=64 time=42.1 ms

--- 192.168.1.87 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 42.153/42.153/42.153/0.000 ms, pipe 2 
```

您可以选择许多 ping 成功的指标，我选择了数据包丢失率为 0%（成功的明确指标）这一事实。该`expect`命令搜索 ping 的结果，如果找到“0%”，则输出“IP 地址已成功 ping”。

# maven - javax.persistence.PersistenceException：没有名为 xxx 的 EntityManager 的持久性提供程序

> ID：10696884
> 
> 赞同：0
> 
> 时间：2012-05-22T06:32:52.453
> 
> 标签：maven, jpa

无法测试 jpa/maven 项目。当我从命令行运行“mvn cleant test”时，出现错误“javax.persistence.PersistenceException: No Persistence provider for EntityManager named xxx”。我有一个 Java SE 项目。

我在“src/test/resources/META-INF/persistence.xml”中有持久性配置。我也有同样的'src/main/...'。我可以在“target/classes/META-INF”中看到 persistence.xml。只有那来自主要，而不是来自我运行测试时的测试。这还不是问题，因为两者都应该工作。第一次尝试 JPA，但正如我所见，文件应该没问题（位置和内容）。

持久性单元名称也应该匹配。

我将 Eclipse (EE) 与 m2 和其他必要的插件一起使用，但从命令行运行 maven。我在项目中没有看到任何错误。

// 更新

尝试修复 maven 构建，因为我注意到它应该在“目标/测试类”中有测试类和资源。将命令更改为“mvn clean test-compile test” 现在可以从正确的位置找到资源，但我仍然遇到同样的错误。

// 更新

为清楚起见，这里是完整的 persistence.xml

```
<persistence version="1.0"
xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="xxx"
    transaction-type="RESOURCE_LOCAL">
    <provider>my.package.EntityManagerFactoryHelper</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/db" />
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        <property name="javax.persistence.jdbc.user" value="yyy" />
        <property name="javax.persistence.jdbc.password" value="zzz" />
        <property name="eclipselink.ddl-generation" value="DROP_AND_CREATE" />
    </properties>
</persistence-unit> 
```

我从其他帖子中获取了帮助示例。基本上它只是使用“xxx”持久单元创建电动势。这是助手类。[http://pastebin.com/1GE6uMa1](http://pastebin.com/1GE6uMa1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:17:18.577

尝试在标签内添加 <provider>org.hibernate.ejb.HibernatePersistence</provider>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:56:36.747

提供者必须是：

```
 <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
```

否则表创建失败，即使从实体创建表时没有错误。

花了大约 2 天的时间解决了这个问题，因为我认为给定的提示指向了正确的方向并且当时没有检查提供者。

提供者必须根据 eclipselink，因为您可以在“persistence.xml”的配置中发现它。

但我没有明确地说出来。不知道它会那么重要，它甚至成功地创建了一次表。当时不太确定我为提供者提供了什么，但随后失败了（在对表格进行更改之后）。提供商可能应该有其他配置。

# php - 从循环中读取最新的数字

> ID：10696886
> 
> 赞同：0
> 
> 时间：2012-05-22T06:32:59.367
> 
> 标签：php, while-loop

如何从以下代码中读取最新号码

```
<table  width="100" border="1" >
   <tr align="center" bgcolor="#999999" >
     <td  >NO</td>
     <td  >Name</td>
     <td  >PBSID</td>
   </tr>

$query ="select * from stock ";
$hasil = mysql_query($query); 
$no=0;

while ($row = mysql_fetch_array($hasil))
{ 
    $no++;
    if($x != $row[pbsid] )
    { 
        $no=1;
        echo "<tr bgcolor=#CCCCCC>
                  <td colspan=4 ><b> GROUP $row[pbsid]</b></td>
              </tr>";
    }

    $mo=count($no);
    echo "<tr><td>$no </td><td> $row[bnama]</td><td>$row[pbsid] </td></tr>";
    $x = $row["pbsid"];
} 
```

结果：

* * *

```
===========
NO | NAME | GROUP
---------------------------------------
===========
GROUP 1
---------------------------------------
===========
1 | A | 1    
2 | B | 1    
3 | C | 1    
4 | D | 1
---------------------------------------
===========
GROUP 2
---------------------------------------
===========
1 | A | 2    
2 | B | 2    
3 | C | 2 
```

我想显示最新的 GROUP 编号，Group 1=4 和 Group 2=3，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:41:58.807

这会起作用

```
$query ="select * from stock ";
$hasil = mysql_query($query); 
$no=0;
$latest = array();
while ($row = mysql_fetch_array($hasil))
{ 
$no++;
if($x != $row[pbsid] ){ 
$no=1;
echo "<tr bgcolor=#CCCCCC>
  <td colspan=4 ><b> GROUP $row[pbsid]</b></td>
</tr>";
}
$mo=count($no);
echo "<tr><td>$no </td><td> $row[bnama]</td><td>$row[pbsid] </td></tr>";
$x = $row["pbsid"];
$key = 'Group'.$row['pbsid'];
$latest[$key] = $no;
}
print_r($latest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:43:17.833

```
<table  width="100" border="1" >
<tr align="center" bgcolor="#999999" >
<td  >NO</td>
<td  >Name</td>
<td  >PBSID</td>
</tr>
$last_no = array();
$query ="select * from stock ";
$hasil = mysql_query($query); 
$no=0;

while ($row = mysql_fetch_array($hasil))
{ 
$no++;
if($x != $row[pbsid] ){ 
$no=1;
echo "<tr bgcolor=#CCCCCC>
  <td colspan=4 ><b> GROUP $row[pbsid]</b></td>
</tr>";
}
$mo=count($no);
echo "<tr><td>$no </td><td> $row[bnama]</td><td>$row[pbsid] </td></tr>";
$x = $row["pbsid"];
$last_no[] = $no;
}
print_r($last_no); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:50:20.620

试试这个查询：

```
SELECT s.*, c.count
FROM stock AS s
LEFT JOIN ( SELECT pbsid, COUNT(1) AS `count` FROM stock GROUP BY pbsid ) AS c
    ON s.pbsid = c.pbsid 
```

现在您将获得每个组的计数，这似乎是您真正想要的。

如果您出于某种原因更喜欢在 PHP 中完成所有工作，您可以这样做：

```
<table  width="100" border="1" >
   <tr align="center" bgcolor="#999999" >
     <td  >NO</td>
     <td  >Name</td>
     <td  >PBSID</td>
   </tr>

$query ="select * from stock ";
$hasil = mysql_query($query); 
$no=0;

$counts = array();  // make an array of counts for each group, keyed by pbsid
$rows = array();  // put all the data from SQL into an array
while ($row = mysql_fetch_array($hasil))
{
    $rows[] = $row;
    if (!isset($counts[$row[pbsid]]))
    {
        $counts[$row[pbsid]] = 0; // initialize it to 0
    }
    $counts[$row[pbsid]]++; // increment for each occurrence of a pbsid 
}

foreach ($rows as $row)
{ 
    $no++;
    if($x != $row[pbsid] )
    { 
        $no=1;
        echo "<tr bgcolor=#CCCCCC>
                  <td colspan=4 ><b> GROUP $row[pbsid]</b> Count = " . $counts[$row[pbsid]] . " </td>
              </tr>";
    }

    $mo=count($no);
    echo "<tr><td>$no </td><td> $row[bnama]</td><td>$row[pbsid] </td></tr>";
    $x = $row["pbsid"];
} 
```

虽然，我认为在查询中计算这些信息要简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:31:06.237

更改您的查询`$query ="select MAX(`没有`),bnama, pbsid from yourtablename GROUP BY pbsid ";`

# actionscript-3 - FileReference：发布文件而不浏览

> ID：10696890
> 
> 赞同：0
> 
> 时间：2012-05-22T06:33:39.473
> 
> 标签：actionscript-3, actionscript

我正在尝试将文件上传到服务器。我这样做是这样的：

```
var fileRef:FileReference = new FileReference();
fileRef.addEventListener(flash.events.Event.SELECT, selectHandler);
fileRef.addEventListener(flash.events.Event.COMPLETE, completeHandler);
fileRef.addEventListener(ProgressEvent.PROGRESS, normalprogressHandler);
fileRef.browse();

function selectHandler(event:flash.events.Event):void
{
    var params:URLVariables = new URLVariables();
    params.date = new Date();
    params.ssid = "94103-1394-2345";
    var request:URLRequest = new URLRequest("http://www.test.com/Uploads"); 
    request.method = URLRequestMethod.POST;
    request.data = params;

    fileRef.upload(request, "Custom1");
}

function completeHandler(event:flash.events.Event):void
{
    trace("uploaded");
}

function normalprogressHandler(event:ProgressEvent):void
{
    var percent:Number = Math.floor((event.bytesLoaded * 100)/ event.bytesTotal );
    trace(percent+"%");
} 
```

是否可以上传文件但无需浏览它？我想自己决定要上传什么文件，而不是用户先执行浏览

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:11:11.347

你不能这样做`FileReference`有以下限制（[参考](http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/)）：

1.  和API 只能在响应用户交互（例如按钮单击）时调用`load()`。`save()`
2.  加载和保存文件的位置不会暴露给 ActionScript。
3.  API 是异步的（非阻塞的）。

显然，如果任意允许 Flash 播放器从本地文件系统上传任何内容到远程服务器，这将带来重大的安全风险。

如果您尝试从 AIR 应用程序上传，您可以对课程执行您想要执行的操作[`File`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)。

# c# - 我们可以在 WPF 中 DataGrid 的单元格内有一个网格吗？

> ID：10696892
> 
> 赞同：1
> 
> 时间：2012-05-22T06:33:50.050
> 
> 标签：c#, wpf, datagrid, grid

我需要一个具有多行和 3 列的 DataGrid。现在DataGrid的每个单元格都是显示一些信息（6到8个参数）和一个按钮。单击此按钮将显示一个弹出窗口。

现在为了在 DataGrid 的单元格内显示数据，我需要正确对齐它们并且正在考虑使用 Grid。如何实现这一点。

另外，我如何在按钮的单击事件中知道单击了哪个单元格按钮？

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T07:04:58.227

您可以将 DataGridTemplateColumn(s) 添加到 DataGrid，然后为该列定义常用数据模板：

```
<DataGrid.Columns>
    <DataGridTemplateColumn Header="Foo" Width="SizeToCells">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid>
                       ...
                      <Button Command="{Binding SomeCommand}" />
                    </Grid>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>  
<DataGrid.Columns> 
```

现在关于点击事件。将您的网格与项目源绑定。该源中的每个项目都必须是具有任何 ICommand 属性的视图模型。将此属性绑定到单元格模板中的按钮命令，您将获得它。

# javascript - (Un)通过字符串输入设置嵌套数组值

> ID：10696893
> 
> 赞同：2
> 
> 时间：2012-05-22T06:33:55.573
> 
> 标签：javascript, arrays, function, session, reference

我有这样的功能：

```
Session.get = function(key) {
    if (!window["_SESSION"] || typeof key == 'undefined') {
        return window["_SESSION"] || {};
    }

    if (key.indexOf('.') === -1) {
        return window["_SESSION"][key] || {};
    }

    var keyArr = key.split('.'), val = window["_SESSION"];

    for ( var i = 0; i < keyArr.length; i++) {
        if (typeof val[keyArr[i]] === 'undefined') {
            return null;
        }
        val = val[keyArr[i]];
    }

    return val;
} 
```

这个函数允许我在函数之外没有临时变量的情况下获取嵌套值。示例`Session.get('var.nestedvar')`是返回值`window[_SESSION']['var']['nestedvar']`。

蝙蝠我怎么能像这样（取消）设置变量？尝试`delete val;`但没有用.. javascript 引用是如何工作的？有人知道完成类似功能的任何替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:00:42.533

您可以像这样按父级删除：

```
[10:00:00.380] a = {'root': {'home':'~'}}
[10:00:00.385] ({root:{home:"~"}})
--
[10:00:09.625] b = a['root']
[10:00:09.631] ({home:"~"})
--
[10:00:20.569] delete b['home']
[10:00:20.573] true
[10:00:21.684] a
[10:00:21.688] ({root:{}}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:27:27.807

您可以对现有代码稍作修改，如下所示：

```
Session.delete = function(key) {
    if (!window["_SESSION"] || typeof key == 'undefined') {
        return false;
    }
    if (key.indexOf('.') === -1) {
        if (key) {
            delete key;
            return true;
        }
    }

    var keyArr = key.split('.'), val = window["_SESSION"];

    var keyDepth = keyArr.length;
    for ( var i = 0; i < keyDepth-1; i++) {
        if (typeof val[keyDepth] === 'undefined') {
            return null;
        }
        val = val[keyDepth];
    }
    if (val[keyDepth-1]) {
        delete val[keyDepth-1];
        return true;
    }
    return false;
} 
```

# xml - 使用 XSLT 遍历带有命名空间的 XML 元素

> ID：10696897
> 
> 赞同：2
> 
> 时间：2012-05-22T06:34:25.170
> 
> 标签：xml, xslt, xpath

我在使用来自网络设备的 XSLT 转换某些 XML 数据时遇到问题。考虑以下 xml 输出...

```
<rpc-reply xmlns:junos="http://xml.juniper.net/junos/11.4X27/junos">
    <multi-routing-engine-results>
        <multi-routing-engine-item>
            <re-name>member0</re-name>
            <environment-information
                xmlns="http://xml.juniper.net/junos/11.4X27/junos-chassis">
                <environment-item>
                    <name>PEM 0</name>
                    <class>Temp</class>
                    <status>OK</status>
                    <temperature junos:celsius="30">30 degrees C / 86 degrees F
                    </temperature>
                </environment-item>
                <environment-item>
                    <name>PEM 1</name>
                    <class>Temp</class>
                    <status>OK</status>
                    <temperature junos:celsius="30">30 degrees C / 86 degrees F
                    </temperature>
                </environment-item>
            </environment-information>
        </multi-routing-engine-item>
        <multi-routing-engine-item>
            <re-name>member1</re-name>
            <environment-information
                xmlns="http://xml.juniper.net/junos/11.4X27/junos-chassis">
                <environment-item>
                    <name>PEM 0</name>
                    <class>Temp</class>
                    <status>OK</status>
                    <temperature junos:celsius="25">25 degrees C / 77 degrees F
                    </temperature>
                </environment-item>
                <environment-item>
                    <name>PEM 1</name>
                    <class>Temp</class>
                    <status>OK</status>
                    <temperature junos:celsius="25">25 degrees C / 77 degrees F
                    </temperature>
                </environment-item>
            </environment-information>
        </multi-routing-engine-item>
    </multi-routing-engine-results>
    <cli>
        <banner>{master:member0-re0}</banner>
    </cli>
</rpc-reply> 
```

如何遍历 XSLT 中的每个“环境项”元素。我目前有类似以下内容....

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:for-each select="rpc-reply/multi-routing-engine-results/multi-routing-engine-item">
                ...
                <xsl:for-each select="./environment-information/environment-item">
                .....
                </xsl:for-each>
            </block>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

但是，当它到达第二个循环时，我的代码不起作用`<xsl:for-each select="./environment-information/environment-item">`。我怀疑这与`<environment-information xmlns="http://xml.juniper.net/junos/11.4X27/junos-chassis">`元素有关。

我应该使用一些特殊的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:43:28.987

问题在于名称空间。`environment-information`并且`environment-item`位于“http://xml.juniper.net/junos/11.4X27/junos-chassis”命名空间中。这有效：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:a="http://xml.juniper.net/junos/11.4X27/junos-chassis">
  <xsl:template match="/" >
    <root>
    <xsl:for-each select="rpc-reply/multi-routing-engine-results/multi-routing-engine-item">
      <xsl:for-each select="a:environment-information/a:environment-item">
        <whatever></whatever>
      </xsl:for-each>
    </xsl:for-each>
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

您不需要在内循环前面的“./”，因为焦点在元素上`multi-routing-engine-item`，并且`environment-information`只需命名该项目即可选择（当然，请注意命名空间）。

# ruby - 在 raise 块内调试时检查隐式异常

> ID：10696899
> 
> 赞同：0
> 
> 时间：2012-05-22T06:34:36.540
> 
> 标签：ruby, exception, ruby-debug

我正在使用 ruby​​-debug 深入研究抛出并默默吃异常的代码。（代码在 gem 中，所以我不愿意在没有充分理由的情况下直接编辑它。）

我到了这一行：

```
 167        def catch_exceptions
   168          begin
   169            yield
   170          rescue Exception
=> 171            rollback
   172          end
   173        end
   174 
```

由于第 170 行未定义为`rescue Exception => e`，因此没有声明异常对象。

**有没有办法检查这个“隐式”异常对象？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:48:29.170

您可以使用全局变量访问最近的异常`$!`。

我知道您并非总是有选择，但可以考虑修复宝石或使用其他宝石。在追踪异常时，这种包罗万象的方法真的很糟糕。

# android - 卸载 Android 应用程序会杀死配置的任何警报吗？

> ID：10696900
> 
> 赞同：2
> 
> 时间：2012-05-22T06:34:42.080
> 
> 标签：android, alarmmanager

我正在应用程序中创建一个警报，每天早上 8 点运行并处理一些业务逻辑。有人可以确认卸载应用程序时警报是否会自动终止/删除？还是我需要专门处理`PACKAGE_REMOVED`删除警报的意图？

提前非常感谢。维奈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T06:36:48.380

如果您使用的`AlarmManager`是，则可以。强制关闭应用程序也是如此。

# javascript - jQuery向下滑动到全高？jQuery 如何知道元素的全高？

> ID：10696906
> 
> 赞同：2
> 
> 时间：2012-05-22T06:35:14.700
> 
> 标签：javascript, jquery, html

我正在为类似于 sublime text 的代码折叠的表单开发一些折叠功能。我希望能够在 20px 和 div 的全高之间进行动画处理。我尝试做`el.animate({'height':'20px'});`then `el.slideUp();`，但如果高度已经设置，jQuery 不会滑动元素。

有没有一种简单的方法可以用 jQuery 做到这一点，当你这样做时，jQuery 是如何知道将高度设置为动画的`.slideDown()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:47:17.063

**您可以使用"display: block"**获得元素的完整高度；

所以如果你有一个隐藏的元素，你可以将它的位置设置为**absolute**，将它定位在屏幕之外并抓住它的尺寸，如下所示：

```
$('#el').css('position', 'absolute').css('left', '99999px').css('display', 'block');
var h = $('#el').height();
$('#el').css('position', 'relative').css('display', 'none'); 
```

至于您的问题，请在动画完成后检查您是否正在滑动。采用：

```
el.animate({'height':'20px'}, delay, function() { slide here }) 
```

# java - 使用球衣在休息服务中仅消耗 csv

> ID：10696909
> 
> 赞同：1
> 
> 时间：2012-05-22T06:35:27.290
> 
> 标签：java, google-app-engine, rest, csv, jersey

我正在尝试在 post 请求中发送 csv 文件，并希望在服务器上获取 csv 数据。我正在使用 jersey 来创建 Web 服务。发送 csv 文件时内容类型应该是什么，@consumes( **__** ) 注释应该是什么在服务器端请帮助

球衣代码

```
@POST

@Consumes("text/plain")
@Produces("text/plain")
public String respondToPost(String incomingCsv) throws IOException {
   return incomingCsv;
} 
```

.csv 文件：

```
email,group_email
member1@visheshapps.uni.me,team3@visheshapps.uni.me
member2@visheshapps.uni.me,team3@visheshapps.uni.me 
```

这返回：

```
----0246824681357ACXZabcxyz
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Content-Transfer-Encoding: 8bit
Content-ID: <startpart>
Content-Disposition: form-data; name="root-fields"

----0246824681357ACXZabcxyz
Content-Type: application/vnd.ms-excel
Content-Transfer-Encoding: binary
Content-ID: <group.csv>
Content-Disposition: attachment; name="file attachment"; filename="group.csv"

email,group_email
member1@visheshapps.uni.me,team3@visheshapps.uni.me
member2@visheshapps.uni.me,team3@visheshapps.uni.me

----0246824681357ACXZabcxyz-- 
```

而我只想

```
email,group_email
member1@visheshapps.uni.me,team3@visheshapps.uni.me
member2@visheshapps.uni.me,team3@visheshapps.uni.me 
```

我更改了代码，但现在我得到了 415 不受支持的媒体类型。我的应用程序托管在谷歌应用程序引擎上

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces("text/plain")
public String respondToPost(@FormDataParam("file") InputStream csv) throws IOException {
    CSVReader csvReader = new CSVReader(new InputStreamReader(csv));
    List<String[]> rows = csvReader.readAll();
    return rows.get(1)[0];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:40:54.570

您可以使用`text\plain`mediatype 来接收请求并使用[OpenCSV](http://opencsv.sourceforge.net/)来解析您的请求正文。

# iphone - 重置内容插入后如何设置滚动偏移量？

> ID：10696910
> 
> 赞同：0
> 
> 时间：2012-05-22T06:35:28.977
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我对 UITextView 有疑问。我必须重置此内容插图，因为我必须在顶部和底部添加一些内容。我在 textViewDidChanged 中写了一段代码。因为我会在 textView 的底部设置一些东西，所以当我输入 blah-blah 时，某些东西会被重新定位，否则会在某些东西上输入 blah-blah。我不想要那个。所以我在 textViewDidChange 中写了一个代码。

这是我的代码：

```
UIEdgeInsets newInset = self.textView.contentInset;
newInset.top = 50;
newInset.bottom = 1000; // just example
self.textView.contentInset = newInset; 
```

OK完成。

我重置了内容插图，但是textView的滚动总是指向uitextView的末尾。我想将滚动偏移设置为打字位置。

我该如何解决？我只想调整我的 textview 内容插图的大小。

我该怎么做？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:34:38.523

由于 UITextView 从 UIScrollView 继承，您可以通过调用设置滚动指示器插入：

```
UIEdgeInsets scrollInsets = UIEdgeInsetsMake(20.0, 0.0, 30.0, 0.0);
yourTextView.scrollIndicatorInsets = scrollInsets; 
```

这将在您的文本视图的顶部为您提供 20 像素，在底部为您提供 30 像素。

# iphone - 在 iPhone 中修改 MWPhotoBrowser

> ID：10696916
> 
> 赞同：2
> 
> 时间：2012-05-22T06:36:00.567
> 
> 标签：iphone, xcode, ios5, subclassing

嗨，我已经在我的 iPhone 应用程序中添加了 MWPhotoBrowser，它运行良好，但现在我需要在我的照片库中添加更多功能。

基本上要做几件事：

*   向导航栏添加按钮
*   减少两个图像之间的空间。

但是我不知道如何解决这个问题。我应该将照片浏览器子类化还是应该在照片浏览器的源代码中进行更改。

PS 我试图直接在 MWPhotoBrowser.h 文件中修改代码，但没有成功。没有进行任何更改。我对 iPhone 编程非常陌生，所以我不太清楚发生了什么。任何帮助将不胜感激。我知道这是一个愚蠢的问题，所以请轻松投反对票:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:44:55.443

在 MWPhotoBrowser.m 文件中找到 setNavBarAppearance 方法并添加这个

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
target:self action:@selector(someAction)]; // This can be changed to your liking

self.navigationItem.rightBarButtonItem = rightButton;
[rightButton release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T14:30:37.727

将 Padding : 10 设置为 0；

完成。

纳克斯

# jquery - jquery附加元素但不会停止循环

> ID：10696925
> 
> 赞同：0
> 
> 时间：2012-05-22T06:36:40.160
> 
> 标签：jquery, append

我创造了一种情况，`elements`倒计时后得到`appendto`一个`ul`，但我不希望现有`li`的被替换或复制，我只想要新的 li 的 id。我已经尝试清空整个`ul`并用新的 1 或 2 和旧的 9-100 替换它，但这需要很长时间，具体取决于 ul 中有多少元素，它会导致负载滞后......所以我只想要一个这是关于如何调整代码的新想法？

jQuery：

```
 $.ajax({
            url: "morphelo/splash.php",
            type: "POST",
            data: "x=int",
            datatype: "html",
            success: function(data){
                var Data = $.parseJSON(data);

                var Clus = Data.clu;
                console.log(Clus);
                var cl = Clus.length; 
                var aci = new Array(); var i = 0;

                if(cl > 0){
                    var clu = $('.clu_holder').children('.clu'); // every clutch li
                    $.each(clu,function(x,y){
                        var clutchid = $(this).attr('id');

                        $.each(Clus,function(){
                            if(this.ckey == clutchid){
                                // dont worrie about me
                            }else{
                                // put me in coach
                                var newLi = '<li class="clu" id="'+this.ckey+'">clu</li>';
                                $(newLi).appendTo('.clu_holder').fadeIn();
                            }
                        });

                    });

                }else{

                }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:38:56.293

我认为你的问题是你在循环中做一个循环。我想我会做这样的事情。我还没有测试它，它只是一个快速的模型。

```
if(cl > 0){
   var holder = $('.clu_holder');
   $.each(Clus,function(){
       if(holder.find("#"+ this.ckey).length == 0){
           var newLi = '<li class="clu" id="'+this.ckey+'">clu</li>';
            holder.append(newLi).fadeIn();
        }
    });
 } 
```

我改变的是：

保存 holder 元素，以便您可以使用它来附加元素，而无需每次都搜索它。

仅循环 1 个集合，并且由于元素上有 id，因此可以通过搜索找到它。

# mysql - MySQL 多集群复制

> ID：10696928
> 
> 赞同：0
> 
> 时间：2012-05-22T06:36:55.383
> 
> 标签：mysql, tungsten-replicator, multi-master-replication

我需要使用 4 个 MySQL 服务器创建多组复制。经过研究，我发现了两种方法：

1）环形连接。... Server_1 -> Server_2 -> Server_3 -> Server_4 -> Server_1 ...

2) 使用钨复制器。 [http://code.google.com/p/tungsten-replicator/wiki/TRCMultiMasterInstallation#Install_a_four_masters_replication](http://code.google.com/p/tungsten-replicator/wiki/TRCMultiMasterInstallation#Install_a_four_masters_replication)

有人在生产模式下使用过它们吗？哪种方式更好？也许还有其他方法可以创建 MySQL 多组复制？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:49:22.133

根据您的要求，MySQL 集群可能会为您提供解决方案 - [http://www.mysql.com/products/cluster/](http://www.mysql.com/products/cluster/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:43:44.353

我在生产中使用过钨，效果很好。我没有将它用于多主机，但我看不出它不应该工作的原因。

根据您对从站必须与每个主站有多接近的要求，您还可以尝试循环解决方案，其中从站运行每个主站一段固定的时间，然后切换到下一个。

这适用于 MySQL 5.5 和更早的[http://mysqlmusings.blogspot.se/2011/04/round-robin-multi-source-in-pure-sql.html](http://mysqlmusings.blogspot.se/2011/04/round-robin-multi-source-in-pure-sql.html) 这是适用于 MySQL 5.6 [http://mysqlmusings.blogspot。 se/2012/10/round-robin-replication-using-gtid.html](http://mysqlmusings.blogspot.se/2012/10/round-robin-replication-using-gtid.html)

第一个实际上也适用于 5.6，但在 5.6 中，对更清洁的解决方案有更好的支持。

# java - 如何在 WAR 文件中添加 weblogic-application.xml

> ID：10696937
> 
> 赞同：6
> 
> 时间：2012-05-22T06:37:28.677
> 
> 标签：java, jakarta-ee, weblogic, descriptor

您能否让我知道是否可以将 weblogic-application.xml 添加到 WAR 文件中，如果可以，那么如何做同样的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T17:06:15.653

不，它不能。如果你这样做，那么它不会被考虑。

它需要在一个 ear-file/META-INF 中

weblogic-application.xml 文件是来自 Sun Microsystems 的 application.xml 部署描述符的特定于 WebLogic Server 的部署描述符扩展。您可以在此处配置应用程序中引用的共享 Java EE 库和 EJB 缓存等功能。

此信息适用于 WLS 10.3.x 的更多详细信息： http: [//docs.oracle.com/cd/E21764_01/web.1111/e13706/app_xml.htm#i1007581](http://docs.oracle.com/cd/E21764_01/web.1111/e13706/app_xml.htm#i1007581)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:11:07.787

该文件位于应用程序存档的 META-INF 子目录中。还可以通过此[链接](http://docs.oracle.com/cd/E13222_01/wls/docs70/programming/app_xml.html)了解更多详细信息。

# javascript - 在循环中生成 Javascript id

> ID：10696938
> 
> 赞同：0
> 
> 时间：2012-05-22T06:37:33.173
> 
> 标签：javascript, jquery-ui, datepicker

以下是日期选择器的代码。当我们在 from 字段中选择日期时，“to”字段中位于“from”字段下方的所有日期都将被阻止。我想在 for 循环的帮助下生成这些 id，但是当我运行此代码时，文本框仅显示具有“from”和“to”功能的日期选择器。

```
$(function () {
    var frm = 0;
    var tu = 0;
    var i = 0;
    for (i = 1; i <= 5; i++) {
        frm = "#from" + i;
        tu = "#to" + i;
        $(frm).datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy/mm/dd',
            maxDate: '-1',
            onSelect: function (selected) {
                $(tu).datepicker("option", "minDate", selected)
            }
        });
        $(tu).datepicker({
            dateFormat: 'yy/mm/dd',
            changeMonth: true,
            changeYear: true,
            maxDate: '-1',
            onSelect: function (selected) {
                $(frm).datepicker("option", "maxDate", selected)
            }
        });
    }
}); 
```

html 由 php 生成 for ($a=1;$a<=$i;$a++) {

```
echo("
    <li>

    <input type=\"text\" name=\"course_name$a\" class=\"jq_watermark required\" placeholder=\"Course Name\" title=\"$x Certified Course Name\" style=\"width:11.6em;\"> 
    <tab></tab>
    <input type=\"text\" name=\"course_institute$a\" class=\"jq_watermark required\" placeholder=\"Institute Name\" title=\"$x Institute Name\" style=\"width:11.6em;\"> 
    <tab></tab>
        <br />
    <input type=\"text\" id=\"from$a\" name=\"course_start_date$a\" class=\"required\" placeholder=\"Certified Course Start Date\" title=\"$x Certified Course Start Date\" style=\"width:11.6em;\" readonly=\"readonly\"> 
    &nbsp to&nbsp
    <input type=\"text\" id=\"to$a\" name=\"course_end_date$a\" class=\"required\" placeholder=\"Certified Course End Date\" title=\"$x Certified Course End Date\" style=\"width:11.6em;\"> 
    <br />
     <input type=\"text\" name=\"course_city$a\" class=\"required\" placeholder=\"City\" title=\"$x Training Institute City Name!\" style=\"width:11.6em;\"> 
    <tab></tab>
     <input type=\"text\" name=\"course_country$a\" class=\" required\" placeholder=\"Country\" title=\"$x Training Institute Country Name!\" style=\"width:11.6em;\"> 
    <tab></tab>
    <button title=\"Your Training Certificate Scanned Picture, Please!\">Upload Training Certificate</button>
    </li> 
    "); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:43:46.210

由于您的匿名函数创建的闭包，您始终拥有相同的`frm`/ `tu`（应该是`to`btw.）变量。通过引入一个接收这些变量作为参数的自调用匿名函数，您可以创建新的变量来避免这个问题：

```
$(function () {
    var frm = 0;
    var tu = 0;
    var i = 0;
    for (i = 1; i <= 5; i++) {
        frm = "#from" + i;
        tu = "#to" + i;
        (function (frm, tu) {
            $(frm).datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: 'yy/mm/dd',
                maxDate: '-1',
                onSelect: function (selected) {
                    $(tu).datepicker("option", "minDate", selected)
                }
            });
            $(tu).datepicker({
                dateFormat: 'yy/mm/dd',
                changeMonth: true,
                changeYear: true,
                maxDate: '-1',
                onSelect: function (selected) {
                    $(frm).datepicker("option", "maxDate", selected)
                }

            });
        })(frm, tu);
    }
}); 
```

# c# - C#从文本框中获取字符串

> ID：10696941
> 
> 赞同：19
> 
> 时间：2012-05-22T06:37:39.283
> 
> 标签：c#, winforms, forms

我只是 C# 的菜鸟，我有这个问题要问你。

我这里有一个表格，要求提供登录详细信息。它有两个文本字段：

1.  用户名
2.  密码

我想要的是***在该文本字段中输入字符串。***

我还不熟悉 C# 中的方法..（在 java 中，使用 getString 方法）。C# 中的“等效”方法可能是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-22T06:39:15.140

在 C# 中，与 java 不同，我们不必使用任何方法。TextBox 属性`Text`用于获取或设置其文本。

**得到**

```
string username = txtusername.Text;
string password = txtpassword.Text; 
```

**放**

```
txtusername.Text = "my_username";
txtpassword.Text = "12345"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T06:39:50.123

该[`TextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)控件有一个[`Text`](http://msdn.microsoft.com/en-us/library/a19tt6sk.aspx)属性，可用于获取（或设置）文本框的文本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-06T09:53:49.137

使用 MVC 时，请尝试使用 ViewBag。从文本框中获取输入并在视图中显示的最佳方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T06:45:53.320

I show you this with an example:

```
string userName= textBox1.text; 
```

and then use it as you wish

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-11T05:09:41.433

如果在字符串中：

```
string yourVar = yourTextBoxname.Text; 
```

如果是数字：

```
int yourVar = int.Parse(yourTextBoxname.Text); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-04T05:27:25.300

获取文本框的值

```
 string username = TextBox1.Text;
   string password = TextBox2.Text; 
```

设置文本框的值

```
 TextBox1.Text = "my_username";
   TextBox2.Text = "12345"; 
```

# asp.net-mvc - Asp.Net MVC：一些未本地化的默认错误消息？

> ID：10696947
> 
> 赞同：11
> 
> 时间：2012-05-22T06:38:12.827
> 
> 标签：asp.net-mvc, localization, validation, data-annotations

我有一个完全本地化的网站，主要是法语/英语/德语。

目前，一切都很好，但我确实注意到一些 asp.net MVC 的错误消息存在问题。

我的模型中有一个属性：

```
[Required]
[LocalizedDisplayName("PublicationDate", NameResourceType = typeof(LocalizationResources.Views.Composer.BaseInfoForm))]
public DateTime PublicationDate { get; set; } 
```

LocalizedDisplayname 是 DisplayNameAttribute 的扩展，它进入 Resx 文件以获得正确的翻译

线程 CurrentCulture 和 CurrentCultureUI 在 fr-FR 中，因此消息应该以法语显示（就像我的`[Required]`属性一样，自动显示“Le champ Publication est requis”。

但是在 DateTime 的情况下，如果我输入的不是日期，验证器只会返回一个“ `The value 'asdfasdf' is not valid for Publication.`”所以：

*   为什么 MVC 有时会以相同的形式返回法语错误消息，有时会以英语返回错误消息（我准确地说，这是默认错误消息）
*   如何一般地替换此消息，通过指示类似“La valeur {0} n'est pas une date valide pour le champ {1}”的文本

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:42:59.923

我认为这些回答了你的两个问题：

> *   为什么 MVC 有时会以相同的形式返回法语错误消息，有时会以英语返回错误消息（我准确地说，这是默认错误消息）

一个显着的区别是该`[Required]`属性执行显式客户端验证，而当您的字段不包含有效的 DateTime 时，您将通过默认模型绑定器从发布的表单数据创建 DateTime 对象失败来获得服务器端验证。这是一种完全不同的机制，我想这可以解释不同的结果。当然，如果结果是一致的，那就太好了。

> *   如何一般地替换此消息，通过指示类似“La valeur {0} n'est pas une date valide pour le champ {1}”的文本

有两种方法：

1.  使用属性告诉默认模型绑定器使用什么资源字符串来显示错误消息`DefaultModelBinder.ResourceClassKey`。[有关如何实现此目的的描述，请参阅此相关问题](https://stackoverflow.com/questions/6214066/how-to-change-default-validation-error-message-in-asp-net-mvc)的答案（适用于 MVC 2，但在 MVC 3 中未更改）
2.  一个更好的方法（我认为）是进行客户端验证。这允许您从本地化资源中提供您希望的错误消息字符串。通过添加一个`DataType`如下所示的属性来做到这一点，假设您创建了一个资源类，该资源类`MyLocalizedResources`使用一个字符串调用，该字符串的键`DateTimeFormatValidationMessage`在法语中翻译为“La valeur {0} n'est pas une date valide pour le champ {1}”：

    ```
    [Required]
    [DataType(DataType.Date, ErrorMessageResourceType = typeof(MyLocalizedResources), ErrorMessageResourceName = "DateTimeFormatValidationMessage")]
    [LocalizedDisplayName("PublicationDate", NameResourceType = typeof(LocalizationResources.Views.Composer.BaseInfoForm))]
    public DateTime PublicationDate { get; set; } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T20:04:38.157

我有同样的问题，同样的项目结构。我终于使用了MVC的约定，试试这种方式。

我将所有 [Required] 数据注释替换为

[必需(ErrorMessageResourceName = "Common_Mandatory_Field", ErrorMessageResourceType = typeof(MyExternalDllResources.Language))]

在资源字符串中“Common_Mandatory_Field”是这样定义的，例子：意大利资源文件::Il campo {0}è obbligatorio.

英文资源文件:: {0} 字段是必需的。

日本资源文件:: {0}フィールドが必需です。</p>

MVC 会将 {0} 替换为关联控件的 [Display] 数据注释值的名称，以防万一。如果您不提供 [Display] 数据注释，则将使用属性定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:41:31.367

ASP.NET MVC 框架进行了几个隐式验证：一个是必需的验证，另一个是值是否对属性有效或无效的验证，即使我们没有用数据注释装饰属性，这两个也会发生。

您必须在全局资源类中`PropertyValueInvalid`创建密钥。`PropertyValueRequired`

该线程将帮助您[全球本地化验证](https://stackoverflow.com/questions/5395040/globally-localize-validation/5395297#5395297)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T00:14:53.473

您可以本地化您的自定义验证属性。您还可以本地化 ASP.NET MVC 内置属性。

像 [必需] 属性。

一个例子：

```
[LocalizedRequired(ErrorMessage = "You must specify an email address")] 
string SomeProperty { get; set; } 
```

你可以重写Required属性：

```
public class LocalizedRequiredAttribute: RequiredAttribute
{
    public override string FormatErrorMessage(string name)
    {
        return LocalizedString(ErrorMessage, name);
    }
} 
```

以不同语言显示的原因是：我认为 mvc 在客户端获取当前用户的文化代码。

# android - 方向改变时Android横向到纵向不加载屏幕

> ID：10696948
> 
> 赞同：2
> 
> 时间：2012-05-22T06:38:18.567
> 
> 标签：android, screen-orientation

我已经为纵向和横向的大屏幕创建了布局，并且在两种布局中都有一个 signin.xml，但是当我更改屏幕方向时，它不会加载横向 xml，而是更改为横向模式，但纵向 xml 是已加载。我也提到了清单中的 onconfig 更改，请让我知道如何在方向更改时保存数据，并请给我一些示例。

下面是我的java代码

```
 public void onConfigurationChanged(Configuration newConfig) {
          super.onConfigurationChanged(newConfig);

               Display display = ((WindowManager)       getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
            int   orientation = display.getOrientation(); 
            boolean oAllow = false;
            switch(orientation) {
            case Configuration.ORIENTATION_PORTRAIT:
            if(!oAllow ) {
                    setRequestedOrientation    (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

            }
            break;
        case Configuration.ORIENTATION_LANDSCAPE:
            if(!oAllow) {
                    setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            }
            break;
    }
      } 
```

当我将横向更改为纵向到横向时，如何获得横向视图？

请问有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:09:16.087

您的纵向 xml 文件夹布局还是布局纵向？如果它的布局纵向，请不要这样声明。只需创建默认的“布局”文件夹，当方向为纵向时，操作系统将获取 xml。

接下来，在 java 中注释上述代码，并在 androidmanifest.xml 中声明 android:configChanges="keyboardHidden|orientation" 在你的活动声明前面并测试它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:44:49.143

why exactly are you overriding onconfigchanges? This might be what messes up your layout. android is able to handle the layout changes when you have a layout and layout-land folder containing your layouts.

# android - 卡在android中的achartengine

> ID：10696950
> 
> 赞同：1
> 
> 时间：2012-05-22T06:38:29.227
> 
> 标签：android, graph, achartengine

我正在开发使用 achartengine 来创建图形的 android 应用程序。现在，我在下图中显示的问题表示感谢。![在此处输入图像描述](../Images/40c371c6b7dfc5d38af28de66411e77b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:54:23.100

应用它来改变颜色

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.WHITE);
renderer.setMarginsColor(Color.WHITE); 
```

# c# - 使用内部类中存在的值更新进度条

> ID：10696951
> 
> 赞同：3
> 
> 时间：2012-05-22T06:38:30.177
> 
> 标签：c#, .net, wpf, xaml, progress-bar

下面的两个代码段位于不同的命名空间中。第二个代码的访问修饰符是内部的。我正在那里做一些操作，我想计算百分比并在 MgmntApp 进度条中更新。我怎样才能做到这一点？

> WpfApplication1
> 
> 主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid Height="204">
        <ProgressBar Height="35" HorizontalAlignment="Left" Margin="57,83,0,0" Name="progressBar1" VerticalAlignment="Top" Width="346" />
    </Grid>
</Window> 
```

我想在下面的类中进行长时间运行的操作时更新进度条的值。

> 不同的
> 
> 文件解析器.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Different
{
    /// <summary>
    /// </summary>
    internal class FileParser:ImageFileParser
    {
        ImageFileParser.GenerateCmds()
        {
            percentage=change;    //0 to 100
            //long time operation
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:24:08.560

如果解析需要很长时间，您可能希望在单独的线程上运行它。

您可以在进度更改时在 FileParser 上引发事件并在 MainWindow 中订阅此事件：

```
private void StartParsing()
{
    FileParser fp = new FileParser("FileName.txt");
    fp.ProgressChanged += FileParser_ProgressChanged;
    Thread t = new Thread(fp.GenerateCmds);
    t.Start();
}

private void FileParser_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // switch to the UI thread if fileparser is running on a different thread
    Dispatcher.BeginInvoke(new Action(
                              () => { progressbar.Value = e.ProgressPercentage; }));
} 
```

为此，您需要将事件添加到 FileParser：

```
internal class FileParser:ImageFileParser
{
    internal event EventHandler<ProgressChangedEventArgs> ProgressChanged;

    ImageFileParser.GenerateCmds()
    {
        percentage=change;    //0 to 100
        OnProgressChanged(percentage);
        //long time operation
    }

    internal protected void OnProgressChanged(int percentage)
    {
        var p = ProgressChanged;
        if(p != null)
        {
            p(this, new ProgressChangedEventArgs(percentage, null));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:17:05.197

为什么不直接绑定到*FileParser*类的属性？

```
<ProgressBar Value="{Binding MyFileParser.PercentComplete}" ... 
```

然后让*FileParser*实现*INotifyPropertyChanged*：

```
internal class FileParser:ImageFileParser, INotifyPropertyChanged
{
    private decimal _pct;
    internal decimal PercentComplete { 
        get { return _pct; }
        set {
            _pct = value;
            PropertyChanged(this, new PropertyChangedEventArgs("PercentComplete"));
        }
    }
    PropertyChanged(this, new PropertyChangedEventArgs(info));

    ImageFileParser.GenerateCmds()
    {
        PercentComplete = change;    //0 to 100
        //long time operation
    }
} 
```

然后只需根据需要更新*PercentComplete*属性...

# android - 我们可以使用带有访问令牌的 URL 在浏览器中登录 Facebook

> ID：10696954
> 
> 赞同：2
> 
> 时间：2012-05-22T06:38:43.673
> 
> 标签：android, facebook, login

在我自己的Android App（使用Facebook SDK）中登录Facebook后，已经获得了访问令牌，然后点击一个图标链接到相关的Facebook URL，这样，用户必须再次在浏览器中登录Facebook。

我们可以使用带有访问令牌的 URL 在浏览器中登录 Facebook 吗？

也许像这样 *www.facebook.com?access_token=xxxxxxxxxxx...* ？

任何建议都有帮助。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:07:16.727

不，您不能使用用户的`access_token`. 如果允许，这将是主要的安全问题！

`access_token`绑定到应用程序（使用[调试工具](https://developers.facebook.com/tools/debug)深入挖掘与之关联的数据）并且仅授予应用程序访问允许特定应用程序`access_token`所属的数据的用户...

最好使用[单点登录 (SSO)](https://developers.facebook.com/docs/mobile/android/build/#sso)，因此可以通过本机 Facebook 应用程序传递身份验证流程，这并不能真正帮助您在浏览器中对用户进行身份验证，但允许跳过用户凭据的输入以登录-进入您的应用程序。

# cakephp - 贝宝中的地址覆盖

> ID：10696962
> 
> 赞同：0
> 
> 时间：2012-05-22T06:39:05.477
> 
> 标签：cakephp, paypal

我有这种情况，我需要覆盖我的买家的送货地址，所以我在我的 PaypalIpnConfig.php 文件中得到了这个代码：

```
var $settings = array(
//more settings
  'address1'=>'test address st',
  'address2'=>'test address st 2',
  'country'=>'United States',
  'state'=>'Alaska',
  'city'=> 'Anchorage',
  'zip'=>'99501',
  'address_override' =>'1'
); 
```

但是在重新加载我的网站后，我收到了这个警告：

```
Unable to process payment. Please contact the merchant as the shipping address provided by the merchant is invalid, and the merchant has requested that your order must be shipped to that address. 
```

我检查了一些与我的问题类似的问题，但是我没有得到我需要的答案

[使用 Paypal IPN 时如何将送货地址发送到 Paypal](https://stackoverflow.com/questions/5733926/how-to-send-shipping-address-to-paypal-when-using-paypal-ipn)

[贝宝地址覆盖不起作用](https://stackoverflow.com/questions/8851698/paypal-address-override-not-working)

什么可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:52:10.187

状态必须以 2 个字符的形式给出。因此，在您的情况下，它将是： 'state'=>'AL' 之类的

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI0J0VU](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI0J0VU)

# c++ - 评估集合表达式

> ID：10696966
> 
> 赞同：5
> 
> 时间：2012-05-22T06:39:19.783
> 
> 标签：c++, c, set

我有一个元素的宇宙，它被组织成 n 个不相交的集合。我使用这些集合构建了 m 个表达式，使用联合/交集/差异运算符。因此，给定一个元素，我需要评估这些 m 表达式，以找出哪些“派生”集合包含该元素。我不想计算“派生”集，因为它会在时间和空间上非常低效。有没有办法仅仅通过查看它的表达式来判断一个元素是否位于某个派生集中？例如，如果表达式是 C = AUB 并且元素位于集合 A 中，那么我可以说它将位于集合 C 中。是否有任何 C 库来执行这种性质的计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:44:52.370

如果我没记错，让 e = 元素

如果 e 在集合中，则将每个集合 A、B 替换为 true，否则为 false。然后，将集合运算符转换为其逻辑等效项，并将表达式计算为布尔值。它应该很好地映射到布尔运算符，甚至是异或之类的东西。

例如，如果 e 在 AB 中，但不在 D 中

```
C = (A U B) xor D 
```

它会在 C 中，因为

```
 C = (true or true) xor false
->      (true)        xor false
-> true 
```

如果您可以快速找到一个元素是否在集合中，那可能会非常快

# java - 当未指定 -d32 或 -d64 之类的选项时，64 位 JVM 是否会在 64 位模式下运行

> ID：10696967
> 
> 赞同：15
> 
> 时间：2012-05-22T06:39:23.513
> 
> 标签：java, jvm

我在 64 位 Centos 机器上安装了 64 位 Java。我的疑问是，如果我不指定 -d64 选项，即使没有安装 32 位 JVM，JVM 也会以 32 位模式运行吗？

我也有点好奇我们是否可以将 -d64 选项与“javac”一起使用。如果是，那么它意味着什么或可以在哪里使用？[我在阅读这篇文章](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html)时遇到了这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:48:21.377

JRE 的数据模型（位）的选择是将应用程序的操作限制为仅在一种模式下运行。Java 字节码设计用于两种数据模型，因此对于 100% 纯 Java 应用程序，将根据每种架构的行为和优势工作。

但是，如果您的应用程序使用仅在一种模式下工作的本机库，那么应用程序将在不受支持的模式下失败。为此，您必须明确指出它应该以哪种模式运行。

当您设置 -d32 或 -d64 时，如果 JRE 无法在所选模式下运行，它将**不会启动**您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T07:04:35.387

从您链接到的 Oracle 文档中：

> 如何在 32 位和 64 位操作之间进行选择？默认是什么？
> 
> 选项 -d32 和 -d64 已添加到 Java 启动器中，以指定程序是在 32 位还是 64 位环境中运行。在 Solaris 上，这些分别对应于 ILP32 和 LP64 数据模型。由于 Solaris 在同一 Java 安装中同时包含 32 位和 64 位 J2SE 实现，因此您可以指定任一版本。 *如果既未指定 -d32 也未指定 -d64，则默认为在 32 位环境中运行。*
> 其他 Java 命令（javac、javadoc 等）很少需要在 64 位环境中执行。但是，-d32/-d64 选项可以传递给这些命令，然后使用已建立的 -J 前缀选项（例如：-J-d64）传递给 Java 启动器。
> 所有其他平台（Windows 和 Linux）都包含单独的 32 位和 64 位安装包。如果两个软件包都安装在一个系统上，您可以通过将适当的“bin”目录添加到您的路径来选择其中一个。为了保持一致性，Linux 上的 Java 实现接受 -d64 选项。

（强调我的）

因此，根据您链接到的文档，默认是在 32 位 JRE 中运行，并且可以通过传递`-J-d64`而不是简单地在 64 位 JRE 中运行 javac `-d64`。

但是，请注意，该文档还说它适用于 Java 1.4，并*没有*提及 Java的最新版本。

# r - 将R中矩阵中每一列的相邻列相加

> ID：10696971
> 
> 赞同：3
> 
> 时间：2012-05-22T06:40:06.473
> 
> 标签：r, matrix, diff

我试图获得一个与 diff() 相反的函数我想为矩阵中的每一列添加矩阵中相邻列的值。我不需要整列或整行的总和。例如：

如果我有：

```
[ 1  2  4;
  3  5  8 ] 
```

我最终会得到：

```
[ 3  6;
  8  13 ] 
```

当然，对于一两列，这很简单，因为我可以只做 x[,1]+x[,2]，但是这些矩阵非常大。

我很惊讶我似乎找不到有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:49:43.710

```
m <- matrix(c(1,3,2,5,4,8), nrow=2)
m[,-1] + m[,-ncol(m)]

     [,1] [,2]
[1,]    3    6
[2,]    8   13 
```

或者，只是为了好玩：

```
n <- ncol(m)
x <- suppressWarnings(matrix(c(1, 1, rep(0, n-1)), 
                             nrow = n, ncol = n-1))
m %*% x

     [,1] [,2]
[1,]    3    6
[2,]    8   13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T06:50:05.720

虚拟数据

```
mat <- matrix(sample(0:9, 100, replace = TRUE), nrow = 10) 
```

解决方案：

```
sum.mat <- lapply(1:(ncol(mat)-1), function(i) mat[,i] + mat[,i+1])
sum.mat <- matrix(unlist(sum.mat), byrow = FALSE, nrow = nrow(mat)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:56:05.830

你可以使用：

```
m <- matrix(c(1,2,4,3,5,8), nrow=2, byrow=T)
sapply(2:ncol(m), function(x) m[,x] + m[,(x-1)]) 
```

# java - Android：从 mysql 检索数据

> ID：10696975
> 
> 赞同：0
> 
> 时间：2012-05-22T06:40:34.870
> 
> 标签：java, android, listview, android-layout, android-listview

我一直在编写 PHP，但正在学习如何构建一个 android 应用程序。在 PHP 中，我能够从 mysql 中检索数据，然后我可以通过将数据设置为变量来设计我的 Web 布局......

```
$name = $SQL["name"]; 
```

像这样的东西，然后我可以弄乱 HTML。我知道 android 是完全不同的，但我想知道是否有人可以解释我需要研究的内容或有示例来表明我可以设计一个漂亮的 UI。

我目前有这个：

```
try {
            JSONArray jArray = new JSONArray(result);
            int jArrayLength = jArray.length();
            List<String> listContents = new ArrayList<String>(jArrayLength);

            for(int i =0; i<jArray.length(); i++){
                JSONObject json_data = jArray.getJSONObject(i);
                listContents.add(json_data.getString("full_name"));
            }

            ListView myListView = (ListView) findViewById(R.id.front_page_listview);
            myListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listContents));

        }catch(JSONException e){
            Log.e("log_tag","Error parsin data "+e.toString());
} 
```

在哪里

```
listContents.add(json_data.getString("full_name")); 
```

显示全名，但如果我想添加其他信息怎么办？比如电子邮件、电话号码、一些文本等。

如果我这样做：

```
listContents.add(json_data.getString("full_name"));
listContents.add(json_data.getString("email")); 
```

它只是要给出另一行，但我希望姓名和电子邮件在同一行，我希望能够自己设计行，

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:33:24.090

您可以制作自定义适配器和自定义行布局。然后代替 android.R.layout.simple_list_item_1 你放一个你想要的布局的引用。Adapter 可以来自您的 JSONObject 数组 - jArray，包含您要显示的所有数据。然后在它的 getView 方法中，它膨胀自定义视图并将您想要的所有数据放入其中。

对不起，如果这还不够清楚。

# php - 如何像 facebook 的 linter 一样生成元标签

> ID：10696976
> 
> 赞同：0
> 
> 时间：2012-05-22T06:40:36.427
> 
> 标签：php, facebook

我正在做一个项目，我必须向应用程序用户显示项目描述，我拥有的是产品的 url，该 url 可以来自任何网站，它可以是搜索后来自亚马逊、ebay 等的产品 url很多我发现facebook的链接器和我的项目做的事情是一样的那些标签。

下面是我用来在 facebook linter 上调试的 product.php 中的代码

```
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
<meta property="fb:app_id" content="xxxxxxxxxxxxxx" /> 
<meta property="og:url" content="http://www.amazon.com/Programming-PHP-Rasmus-Lerdorf/dp/0596006810/ref=pd_sim_b_4" />
<meta property="og:site_name" content="social" />
<meta property="fb:profile_id" content="">
<meta property="og:type" content="website" />
<meta property="og:image" content="" />
<meta property="og:title" content="" />     
</head>
<body>
</body>
</html> 
```

当我按下调试按钮时，它会生成元标记，如下所示 ![在此处输入图像描述](../Images/a7dc799f2d5835ab8b321de0d77c52bb.png)

我想显示与 facebook linter 生成的输出完全相同的输出，以向我的用户显示产品图像、描述。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:49:32.167

如果我理解你的问题是正确的......

您的网站元标记：

```
<meta name="custom_image_tag" content="http://yoursite.com/images/product_1.jpg" />
<meta name="custom_description_tag" content="The product description" /> 
```

获取标签的 PHP 代码

```
$tags = get_meta_tags('http://www.yoursite.com/some-page.html');

echo $tags['custom_image_tag'];
echo $tags['custom_description_tag']; 
```

至于亚马逊，您可以使用他们的标题元标记并从页面中删除图像。

# file - 在文件名中使用通配符在 unix 中查找文件

> ID：10696981
> 
> 赞同：0
> 
> 时间：2012-05-22T06:41:07.050
> 
> 标签：file, unix, find, ksh

我在具有名称模式的文件夹中有几个文件，其中一个部分是可变的。

```
file1.abc.12.xyz
file2.abc.14.xyz
file3.abc.98.xyz 
```

所以上面三个文件名中的第三部分（数字）每天都在变化。

现在，我有一个脚本可以对文件数据执行一些任务。但是，在工作之前，我想检查文件是否存在，然后执行任务：

```
if(file exist) then
     //do this
fi 
```

我在数字部分使用通配符“*”编写了以下代码：

```
export mydir=/myprog/mydata

if[find $mydir/file1.abc.*.xyz]; then 
   # my tasks here

fi 
```

但是，它不起作用并给出以下错误：

```
 [find: not found [No such file or directory] 
```

使用 -f 而不是 find 也不起作用：

```
if[-f $mydir/file1.abc.*.xyz]; then
  # my tasks here

fi 
```

我在这里做错了什么？我正在使用 korn shell。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:50:23.257

```
for i in file1.abc.*.xyz ; do
    # use $i here ...
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:30:39.523

我没有在 unix 关键字之前使用空格...

例如，“if[-f”实际上应该是“if [-f”，括号前后有空格。

# android - android/java 提交表单 post https cookie

> ID：10696983
> 
> 赞同：0
> 
> 时间：2012-05-22T06:41:22.170
> 
> 标签：android, forms, post, cookies, https

我需要一些帮助。我正在开发一个需要以 https html 表单登录的 Android 应用程序。几天前，表单不是https，而是http，我的代码是：

```
String sessionId = "";
    int TIMEOUT_MS = 10000; //10 segundos hasta la conexion

    //El POST
    HttpClient httpClient = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(httpClient.getParams(), TIMEOUT_MS);
    HttpConnectionParams.setSoTimeout(httpClient.getParams(), TIMEOUT_MS);
    //httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.RFC_2109);
    try {
    HttpPost httpPost = new HttpPost("http://" + servidor + ".pucp.edu.pe/login");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);  
            nameValuePairs.add(new BasicNameValuePair("username", usuarioTxt));  
            nameValuePairs.add(new BasicNameValuePair("password", contrasenaTxt));
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

        //POST request
        HttpResponse response = httpClient.execute(httpPost);
        //Obtenerlo en String
        sessionId = inputStreamToString(response.getEntity().getContent()).toString();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        //si no se llega a obtener la conexión
        //e.printStackTrace();
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setMessage(getResources().getString(R.string.errorDescarga));
        alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
               }
            });
        alertDialog.show();
    }

return sessionId; 
```

这是基于stackoverflow上的一些帖子。

现在，使用 https 表单，我遇到了一些问题。首先，每次你想登录时，服务器都会生成一个“执行代码”，所以我可以从一个简单的 html 文件登录，如下所示：

```
<html>
<form id="fm1" name="form" method="post" action="https://pandora.pucp.edu.pe/pucp/login?TARGET=http://eros.pucp.edu.pe/" >
<input type="text" name="username" value=""><br>
<input type="password" name="password" value=""><br>
<input type="hidden" name="lt" value="" />
<input type="hidden" name="execution" value="6A66F2A063BBB7D56ACC8B75FE90BB7E54300C800915F016B55B1A7B4B18DA0231F875DB909579CEC415A3FACDF98CB5" />
<input type="hidden" name="_eventId" value="submit" />      
<input type="submit" value="Ingresar">
</form>
</html> 
```

`name="execution" value=""`用生成的on替换冗长乏味的96位十六进制字符`https://pandora.pucp.edu.pe/pucp/login`（查看浏览器上的网页源代码）

但我无法使用 Android 应用程序达到相同的点；即我无法登录：它返回一个 HTML 代码，上面写着“对不起，我们无法登录”。这很重要，因为连接不会被拒绝，而是被错误地接受。

`One more thing`：我注意到您需要启用 cookie，因为我尝试在禁用 Firefox 的情况下登录，而服务器只是返回了相同的登录表单。

同样，我可以通过浏览器登录 Android 模拟器。

所以，总而言之，我需要：

*   在 https 网页上发布
*   为 POST 提供用户名、密码、执行代码和其他“参数”，就像在 http 版本上工作的代码一样
*   在应用程序上启用 cookie 以便服务器允许我登录

我已经在这里尝试了几乎数百个片段，但没有一个具有所有三个点（大多数只有一两个）。

先感谢您，

阿尔多

PS：抱歉，代码很长，描述可能很混乱。如果需要，请询问详细信息。

# jsf-2 - 单选按钮选择的值没有反映在命令按钮 ajax 调用中

> ID：10696985
> 
> 赞同：0
> 
> 时间：2012-05-22T06:41:29.913
> 
> 标签：jsf-2

我对单选按钮有疑问。我在字段集中有 2 组单选按钮和一个命令按钮。基于单选按钮的选择，将通过 ajax 调用显示受尊重的值。但问题总是第一个按钮在命令按钮操作中得到考虑，这就是为什么总是显示第一个值，但是选择了第二个单选按钮。这是我的代码

//test.xhtml

```
 <h:panelGroup id="demandDashBoardPanelGroupID">
    <fieldset> 
    <legend style="font-family:Arial;font-size: 12px;">Demand Dashboard</legend>

     <table>
        <tr>
        <td> 
            <h:selectOneRadio immediate="true" id="groupbyid" value="#{demandManagedBean.selectedRadioButton}" styleClass="labelstyle">  
                    <f:selectItem itemLabel="Group By Creation Date Time" itemValue="1" />  
                    <f:selectItem itemLabel="Group By Location" itemValue="2" />
            </h:selectOneRadio>
        </td>
        <td>

            <h:commandButton id="fetchbuttonID" value="Fetch" 
                    style="font-size:13px;width:60px;height:25px;" action="#{demandManagedBean.displayDemandRequestsTable}">
                    <f:setPropertyActionListener target="#{demandManagedBean.selectedRadioButtonParam}" value="#{demandManagedBean.selectedRadioButton}"/>
                    <f:ajax render=":parentformid:demandrequestpanelgrpid" immediate="true"/> 
            </h:commandButton>
        </td>
        </tr>
        </table>

     </fieldset>

     </h:panelGroup>

    <h:panelGroup id="demandrequestpanelgrpid" rendered="#{demandManagedBean.renderedFieldSet}"> 

     <fieldset id="demandrequestfieldsetid"> 

     <legend style="font-family:Arial;font-size: 12px;">Demand Requests</legend>

            <h:outputText rendered="#{demandManagedBean.renderCreationdateDmdtable}" value="first table"/>

            <h:outputText rendered="#{demandManagedBean.renderDmdLocationTable}" value="second table"/>

     </fieldset> 

   </h:panelGroup> 
```

//支持bean动作

```
public void displayDemandRequestsTable(){

        if(selectedRadioButtonParam!= null && selectedRadioButtonParam.endsWith("1")){

            renderCreationdateDmdtable = true;
            renderDmdLocationTable = false;

        }else if(selectedRadioButtonParam!= null && selectedRadioButtonParam.endsWith("2")){

            renderCreationdateDmdtable = false;
            renderDmdLocationTable = true;

        }
        renderedFieldSet = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:04:36.817

您不需要在`f:setPropertyActionListener`这里将选定的值放入您的支持 bean。只需向您的标签添加一个`execute`属性并删除：`f:ajax``immediate=true`

```
<h:commandButton ...>
   <f:ajax render=":parentformid:demandrequestpanelgrpid" execute="@form" /> 
</h:commandButton> 
```

您也可以只给出要执行的组件的 id 而不是整个表单：

```
<h:commandButton ...>
   <f:ajax render=":parentformid:demandrequestpanelgrpid" execute="groupbyid" /> 
</h:commandButton> 
```

还要确保`selectedRadioButton`在您的支持 bean 中正确初始化了 bean，并且该 bean 至少在`@ViewScoped`.

更新：如果删除，`f:setPropertyActionListener`则`selectedRadioButtonParam`不会设置。然后你需要检查`selectedRadioButton`你的动作方法。

# android - 如何设置部分文本视图可点击

> ID：10696986
> 
> 赞同：268
> 
> 时间：2012-05-22T06:41:30.477
> 
> 标签：android, string, textview, clickablespan

我有文字“ **Android 是一个软件堆栈**”。在此文本中，我想设置“**堆栈**”文本是可点击的。从某种意义上说，如果您单击它将重定向到新活动（而不是在浏览器中）。

我试过了，但我没有。

* * *

## 回答 #1

> 赞同：620
> 
> 时间：2012-05-22T07:17:39.437

`android.text.style.ClickableSpan`可以解决你的问题。

```
SpannableString ss = new SpannableString("Android is a Software stack");
ClickableSpan clickableSpan = new ClickableSpan() {
    @Override
    public void onClick(View textView) {
        startActivity(new Intent(MyActivity.this, NextActivity.class));
    }
    @Override
    public void updateDrawState(TextPaint ds) {
        super.updateDrawState(ds);
        ds.setUnderlineText(false);
    }
};
ss.setSpan(clickableSpan, 22, 27, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

TextView textView = (TextView) findViewById(R.id.hello);
textView.setText(ss);
textView.setMovementMethod(LinkMovementMethod.getInstance());
textView.setHighlightColor(Color.TRANSPARENT); 
```

*在 XML 中：*

```
<TextView 
  ...
  android:textColorLink="@drawable/your_selector"
/> 
```

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2017-08-17T06:12:41.253

我在`TextView`
**Update 2020 中创建多个链接的功能：**现在此功能能够支持 1 中的多个相同文本链接`TextView`，但请记住将链接按正确的顺序放置

```
fun TextView.makeLinks(vararg links: Pair<String, View.OnClickListener>) {
    val spannableString = SpannableString(this.text)
    var startIndexOfLink = -1
    for (link in links) {
        val clickableSpan = object : ClickableSpan() {
            override fun updateDrawState(textPaint: TextPaint) {
                // use this to change the link color
                textPaint.color = textPaint.linkColor
                // toggle below value to enable/disable
                // the underline shown below the clickable text
                textPaint.isUnderlineText = true
            }

            override fun onClick(view: View) {
                Selection.setSelection((view as TextView).text as Spannable, 0)
                view.invalidate()
                link.second.onClick(view)
            }
        }
        startIndexOfLink = this.text.toString().indexOf(link.first, startIndexOfLink + 1)
//      if(startIndexOfLink == -1) continue // todo if you want to verify your texts contains links text
        spannableString.setSpan(
            clickableSpan, startIndexOfLink, startIndexOfLink + link.first.length,
            Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
        )
    }
    this.movementMethod =
        LinkMovementMethod.getInstance() // without LinkMovementMethod, link can not click
    this.setText(spannableString, TextView.BufferType.SPANNABLE)
} 
```

**使用**

```
my_text_view.makeLinks(
        Pair("Terms of Service", View.OnClickListener {
            Toast.makeText(applicationContext, "Terms of Service Clicked", Toast.LENGTH_SHORT).show()
        }),
        Pair("Privacy Policy", View.OnClickListener {
            Toast.makeText(applicationContext, "Privacy Policy Clicked", Toast.LENGTH_SHORT).show()
        })) 
```

**XML**

```
<TextView
    android:id="@+id/my_text_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Please accept Terms of Service and Privacy Policy"
    android:textColorHighlight="#f00" // background color when pressed
    android:textColorLink="#0f0"
    android:textSize="20sp" /> 
```

**演示**

![](../Images/cc5603cf66700b0a376421f5452c0ab2.png)

**参考**

清除链接突出显示选择的解决方案遵循[https://stackoverflow.com/a/19445108/5381331](https://stackoverflow.com/a/19445108/5381331)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-05-22T07:15:13.713

您可以按照本文所述[使用](https://stackoverflow.com/questions/9982241/android-clickable-textview-how-to-make-multiple-click-regions-on-text-and-catch)[ClickableSpan](http://developer.android.com/reference/android/text/style/ClickableSpan.html)

### 示例代码：

```
TextView myTextView = new TextView(this);
String myString = "Some text [clickable]";
int i1 = myString.indexOf("[");
int i2 = myString.indexOf("]");
myTextView.setMovementMethod(LinkMovementMethod.getInstance());
myTextView.setText(myString, BufferType.SPANNABLE);
Spannable mySpannable = (Spannable)myTextView.getText();
ClickableSpan myClickableSpan = new ClickableSpan() {
   @Override
   public void onClick(View widget) { /* do something */ }
};
mySpannable.setSpan(myClickableSpan, i1, i2 + 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

[参考](http://adilatwork.blogspot.com/2011/07/android-how-to-make-only-part-of.html)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-04-25T14:15:25.743

您可以使用示例代码。您想了解有关 ClickableSpan 的详细信息。请检查**此[文档](http://developer.android.com/intl/ja/reference/android/text/style/ClickableSpan.html)**

```
 SpannableString myString = new SpannableString("This is example");

            ClickableSpan clickableSpan = new ClickableSpan() {
                    @Override
                    public void onClick(View textView) {
                        ToastUtil.show(getContext(),"Clicked Smile ");
                    }
                };

        //For Click
         myString.setSpan(clickableSpan,startIndex,lastIndex,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

        //For UnderLine
         myString.setSpan(new UnderlineSpan(),startIndex,lastIndex,0);

        //For Bold
        myString.setSpan(new StyleSpan(Typeface.BOLD),startIndex,lastIndex,0);

        //Finally you can set to textView. 

        TextView textView = (TextView) findViewById(R.id.txtSpan);
        textView.setText(myString);
        textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-08-03T07:54:09.433

我制作了这个辅助方法，以防有人需要字符串的开始和结束位置。

```
public static TextView createLink(TextView targetTextView, String completeString,
    String partToClick, ClickableSpan clickableAction) {

    SpannableString spannableString = new SpannableString(completeString);

    // make sure the String is exist, if it doesn't exist
    // it will throw IndexOutOfBoundException
    int startPosition = completeString.indexOf(partToClick);
    int endPosition = completeString.lastIndexOf(partToClick) + partToClick.length();

    spannableString.setSpan(clickableAction, startPosition, endPosition,
        Spanned.SPAN_INCLUSIVE_EXCLUSIVE);

    targetTextView.setText(spannableString);
    targetTextView.setMovementMethod(LinkMovementMethod.getInstance());

    return targetTextView;
} 
```

这就是你如何使用它

```
private void initSignUp() {
    String completeString = "New to Reddit? Sign up here.";
    String partToClick = "Sign up";
    ClickableTextUtil
        .createLink(signUpEditText, completeString, partToClick,
            new ClickableSpan() {
                @Override
                public void onClick(View widget) {
                    // your action
                    Toast.makeText(activity, "Start Sign up activity",
                        Toast.LENGTH_SHORT).show();
                }

                @Override
                public void updateDrawState(TextPaint ds) {
                    super.updateDrawState(ds);
                    // this is where you set link color, underline, typeface etc.
                    int linkColor = ContextCompat.getColor(activity, R.color.blumine);
                    ds.setColor(linkColor);
                    ds.setUnderlineText(false);
                }
            });
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-08-03T14:13:44.167

这是一种制作可点击`Kotlin`部分的方法：`TextView`

```
private fun makeTextLink(textView: TextView, str: String, underlined: Boolean, color: Int?, action: (() -> Unit)? = null) {
    val spannableString = SpannableString(textView.text)
    val textColor = color ?: textView.currentTextColor
    val clickableSpan = object : ClickableSpan() {
        override fun onClick(textView: View) {
            action?.invoke()
        }
        override fun updateDrawState(drawState: TextPaint) {
            super.updateDrawState(drawState)
            drawState.isUnderlineText = underlined
            drawState.color = textColor
        }
    }
    val index = spannableString.indexOf(str)
    spannableString.setSpan(clickableSpan, index, index + str.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    textView.text = spannableString
    textView.movementMethod = LinkMovementMethod.getInstance()
    textView.highlightColor = Color.TRANSPARENT
} 
```

可以多次调用它以在 TextView 中创建多个链接：

```
makeTextLink(myTextView, str, false, Color.RED, action = { Log.d("onClick", "link") })
makeTextLink(myTextView, str1, true, null, action = { Log.d("onClick", "link1") }) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-04-29T12:08:18.013

```
 t= (TextView) findViewById(R.id.PP1);

 t.setText(Html.fromHtml("<bThis is normal text </b>" +
                "<a href=\"http://www.xyz-zyyx.com\">This is cliclable text</a> "));
 t.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-02-19T14:19:24.820

我会建议一种不同的方法，我认为它需要更少的代码并且更“本地化友好”。

假设您的目标活动名为“ActivityStack”，请在清单中为它定义一个意图过滤器，并在 AndroidManifest.xml 中使用自定义方案（例如“myappscheme”）：

```
<activity
    android:name=".ActivityStack">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:host="stack"/>
        <data android:scheme="myappscheme" />
    </intent-filter>
</activity> 
```

定义没有任何特殊标签的 TextView（重要的是不要使用“android:autoLink”标签，请参阅：[https](https://stackoverflow.com/a/20647011/1699702) ://stackoverflow.com/a/20647011/1699702 ）：

```
<TextView
    android:id="@+id/stackView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/stack_string" /> 
```

然后在 TextView 的文本中使用带有自定义方案和主机的链接（在 String.xml 中）：

```
<string name="stack_string">Android is a Software <a href="myappscheme://stack">stack</a></string> 
```

并使用 setMovementMethod()“激活”链接（在 onCreate() 中用于活动或 onCreateView() 用于片段）：

```
TextView stack = findViewById(R.id.stackView);
stack.setMovementMethod(LinkMovementMethod.getInstance()); 
```

这将通过点击“stack”一词打开堆栈活动。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-01-27T22:11:59.057

**Phan Van Linh 答案的Kotlin 版本**。

*请注意它有一些小的修改。*

```
fun makeLinks(textView: TextView, links: Array<String>, clickableSpans: Array<ClickableSpan>) {
    val spannableString = SpannableString(textView.text)

    for (i in links.indices) {
        val clickableSpan = clickableSpans[i]
        val link = links[i]

        val startIndexOfLink = textView.text.indexOf(link)

        spannableString.setSpan(clickableSpan, startIndexOfLink, startIndexOfLink + link.length,
                Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    }

    textView.movementMethod = LinkMovementMethod.getInstance()
    textView.setText(spannableString, TextView.BufferType.SPANNABLE)
}

fun setupClickableTextView() {
    val termsOfServicesClick = object : ClickableSpan() {
        override fun onClick(p0: View?) {
            Toast.makeText(applicationContext, "ToS clicked", Toast.LENGTH_SHORT).show()
        }
    }

    val privacyPolicyClick = object : ClickableSpan() {
        override fun onClick(p0: View?) {
            Toast.makeText(applicationContext, "PP clicked", Toast.LENGTH_SHORT).show()
        }
    }

    makeLinks(termsTextView, arrayOf("terms", "privacy policy"), arrayOf(termsOfServicesClick, privacyPolicyClick))
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-01-31T09:12:37.510

你可以用这个方法来设置可点击的值

```
public void setClickableString(String clickableValue, String wholeValue, TextView yourTextView){
    String value = wholeValue;
    SpannableString spannableString = new SpannableString(value);
    int startIndex = value.indexOf(clickableValue);
    int endIndex = startIndex + clickableValue.length();
    spannableString.setSpan(new ClickableSpan() {
                                @Override
                                public void updateDrawState(TextPaint ds) {
                                    super.updateDrawState(ds);
                                    ds.setUnderlineText(false); // <-- this will remove automatic underline in set span
                                }

                                @Override
                                public void onClick(View widget) {
                                    // do what you want with clickable value
                                }
                            }, startIndex, endIndex, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    yourTextView.setText(spannableString);
    yourTextView.setMovementMethod(LinkMovementMethod.getInstance()); // <-- important, onClick in ClickableSpan won't work without this
} 
```

这是如何使用它：

```
TextView myTextView = findViewById(R.id.myTextView);
setClickableString("stack", "Android is a Software stack", myTextView); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-04T11:48:22.437

**对于那些在Kotlin**中寻找解决方案的人来说，这对我有用：

```
private fun setupTermsAndConditions() {
    val termsAndConditions = resources.getString(R.string.terms_and_conditions)
    val spannableString = SpannableString(termsAndConditions)
    val clickableSpan = object : ClickableSpan() {
        override fun onClick(widget: View) {
            if (checkForWifiAndMobileInternet()) {
                // binding.viewModel!!.openTermsAndConditions()
                showToast("Good, open the link!!!")

            } else {
                showToast("Cannot open this file because of internet connection!")
            }

        }

        override fun updateDrawState(textPaint : TextPaint) {
            super.updateDrawState(textPaint)
            textPaint.color = resources.getColor(R.color.colorGrey)
            textPaint.isFakeBoldText = true
        }
    }

    spannableString.setSpan(clickableSpan, 34, 86, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    binding.tvTermsAndConditions.text = spannableString
    binding.tvTermsAndConditions.movementMethod = LinkMovementMethod.getInstance()
    binding.tvTermsAndConditions.setHighlightColor(Color.TRANSPARENT);

} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-07-31T14:15:27.870

`Kotlin`使用扩展创建优雅的方式：

```
fun TextView.setClickableText(text: Spanned,
                              clickableText: String,
                              @ColorInt clickableColor: Int,
                              clickListener: () -> Unit) {
    val spannableString = SpannableString(text)

    val startingPosition: Int = text.indexOf(clickableText)

    if (startingPosition > -1) {
        val clickableSpan: ClickableSpan = object : ClickableSpan() {
            override fun onClick(textView: View) {
                clickListener()
            }

            override fun updateDrawState(textPaint: TextPaint) {
                super.updateDrawState(textPaint)
                textPaint.isUnderlineText = false
            }
        }

        val endingPosition: Int = startingPosition + clickableText.length
        spannableString.setSpan(clickableSpan, startingPosition,
                endingPosition, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
        spannableString.setSpan(ForegroundColorSpan(clickableColor), startingPosition,
                endingPosition, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
        movementMethod = LinkMovementMethod.getInstance()
        highlightColor = Color.TRANSPARENT
    }

    setText(spannableString)
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-01-15T12:30:13.087

**Boom Check this for java Lovers :D** 我们可以根据需要修改它：

```
List<Pair<String, View.OnClickListener>> pairsList = new ArrayList<>();

        pairsList.add(new Pair<>("38,50", v -> {
            Intent intent = new Intent(SignUpActivity.this, WebActivity.class);
            intent.putExtra("which", "tos");
            startActivity(intent);
        }));

        pairsList.add(new Pair<>("81,95", v -> {
            Intent intent = new Intent(SignUpActivity.this, WebActivity.class);
            intent.putExtra("which", "policy");
            startActivity(intent);
        }));

        makeLinks(pairsList); // Method calling

private void makeLinks(List<Pair<String, View.OnClickListener>> pairsList) {

        SpannableString ss = new SpannableString(By signing up, I’m agree to PAKRISM’s Terms of Use and confirms that I have read Privacy Policy);

        for (Pair<String, View.OnClickListener> pair : pairsList) {

            ClickableSpan clickableSpan = new ClickableSpan() {
                @Override
                public void onClick(View textView) {
                    //Toast.makeText(MyApplication.getAppContext(), "Clicked!", Toast.LENGTH_SHORT).show();
                    pair.second.onClick(textView);
                }

                @Override
                public void updateDrawState(TextPaint ds) {

                    ds.linkColor = ContextCompat.getColor(SignUpActivity.this, R.color.primary_main);
                    ds.setUnderlineText(true);

                    super.updateDrawState(ds);
                }
            };

            String[] indexes = pair.first.split(",");
            ss.setSpan(clickableSpan, Integer.parseInt(indexes[0]), Integer.parseInt(indexes[1]), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
        }

        TextView tv = findViewById(R.id.txtView);
        tv.setText(ss);
        tv.setMovementMethod(LinkMovementMethod.getInstance());
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-06T14:38:12.867

对于大胆，

```
mySpannable.setSpan(new StyleSpan(Typeface.BOLD),termStart,termStop,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-24T16:53:00.823

我编写了一个示例来解决您在 Kotlin 中的问题。

这是代码：

```
 val completeText = getString(R.string.terms_description)
    val textToFind = getString(R.string.show_terms)
    val spannableString: Spannable = SpannableString(completeText)
    val startFocus = completeText.indexOf(textToFind)
    val endFocus = startFocus + textToFind.length

    spannableString.setSpan(object: ClickableSpan() {
        override fun onClick(p0: View) {
            showMessage()
        }
    }, startFocus, endFocus, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    show_terms.text = spannableString
    show_terms.movementMethod = LinkMovementMethod.getInstance();
    show_terms.highlightColor = Color.TRANSPARENT; 
```

这是 XML

```
 <CheckBox
            android:id="@+id/check_agree_terms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    <TextView
            android:id="@+id/show_terms"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textColorLink="@color/colorPrimary"
            android:layout_toEndOf="@id/check_agree_terms"/> 
```

这是它的样子

[在此处输入图像描述](https://i.stack.imgur.com/l8lHF.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-14T11:50:02.647

Kotlin 上复杂但通用的解决方案

```
 /*
    * Receive Pair of Text and Action and set it clickable and appearing as link
    * */
fun TextView.setClickableText(vararg textToSpanAndClickAction: Pair<String, (String) -> Unit>) {
    val builder = SpannableStringBuilder(text.toString())

    textToSpanAndClickAction.forEach { argPair ->
    val clickableSpan = object : ClickableSpan() {
        override fun onClick(widget: View) {
            argPair.second.invoke(argPair.first)
        }
    }

    this.text.toString().let { fullText ->
        val indexOfFirst = fullText.indexOf(argPair.first)
        val indexOfLast = indexOfFirst + argPair.first.length
        if (indexOfFirst < 0){
            //No match found
            return
        }else{
            builder.setSpan(
                clickableSpan,
                indexOfFirst,
                indexOfLast,
                Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
            )
        }
    }
}

this.text = builder
    this.movementMethod = LinkMovementMethod.getInstance()
} 
```

[kotlin](/questions/tagged/kotlin "显示标记为“kotlin”的问题") [可扩展](/questions/tagged/spannable "显示标记为“spannable”的问题")

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-11T16:04:05.947

提供的解决方案相当不错。但是，我通常使用更简单的解决方案。

这是一个链接效用函数

```
/**
 * Method is used to Linkify words in a TextView
 *
 * @param textView TextView who's text you want to change
 * @param textToLink The text to turn into a link
 * @param url   The url you want to send the user to
 */
fun linkify(textView: TextView, textToLink: String, url: String) {
    val pattern = Pattern.compile(textToLink)
    Linkify.addLinks(textView, pattern, url, { _, _, _ -> true })
    { _, _ -> "" }
} 
```

使用这个功能非常简单。这是一个例子

```
 // terms and privacy
    val tvTerms = findViewById<TextView>(R.id.tv_terms)
    val tvPrivacy = findViewById<TextView>(R.id.tv_privacy)
    Utils.linkify(tvTerms, resources.getString(R.string.terms),
            Constants.TERMS_URL)
    Utils.linkify(tvPrivacy, resources.getString(R.string.privacy),
            Constants.PRIVACY_URL) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-01-29T08:06:03.587

这是我`MovementMethod`用于检测链接/文本/图像点击的。它被修改了`LinkMovementMethod`。

```
import android.text.Layout;
import android.text.NoCopySpan;
import android.text.Selection;
import android.text.Spannable;
import android.text.method.ScrollingMovementMethod;
import android.text.style.ClickableSpan;
import android.text.style.ImageSpan;
import android.text.style.URLSpan;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.widget.TextView;

public class ClickMovementMethod extends ScrollingMovementMethod {
private Object FROM_BELOW = new NoCopySpan.Concrete();

private static final int CLICK = 1;
private static final int UP = 2;
private static final int DOWN = 3;

private Listener listener;

public void setListener(Listener listener) {
    this.listener = listener;
}

@Override
public boolean canSelectArbitrarily() {
    return true;
}

@Override
protected boolean handleMovementKey(TextView widget, Spannable buffer, int keyCode,
                                    int movementMetaState, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_CENTER:
        case KeyEvent.KEYCODE_ENTER:
            if (KeyEvent.metaStateHasNoModifiers(movementMetaState)) {
                if (event.getAction() == KeyEvent.ACTION_DOWN &&
                        event.getRepeatCount() == 0 && action(CLICK, widget, buffer)) {
                    return true;
                }
            }
            break;
    }
    return super.handleMovementKey(widget, buffer, keyCode, movementMetaState, event);
}

@Override
protected boolean up(TextView widget, Spannable buffer) {
    if (action(UP, widget, buffer)) {
        return true;
    }

    return super.up(widget, buffer);
}

@Override
protected boolean down(TextView widget, Spannable buffer) {
    if (action(DOWN, widget, buffer)) {
        return true;
    }

    return super.down(widget, buffer);
}

@Override
protected boolean left(TextView widget, Spannable buffer) {
    if (action(UP, widget, buffer)) {
        return true;
    }

    return super.left(widget, buffer);
}

@Override
protected boolean right(TextView widget, Spannable buffer) {
    if (action(DOWN, widget, buffer)) {
        return true;
    }

    return super.right(widget, buffer);
}

private boolean action(int what, TextView widget, Spannable buffer) {
    Layout layout = widget.getLayout();

    int padding = widget.getTotalPaddingTop() +
            widget.getTotalPaddingBottom();
    int areatop = widget.getScrollY();
    int areabot = areatop + widget.getHeight() - padding;

    int linetop = layout.getLineForVertical(areatop);
    int linebot = layout.getLineForVertical(areabot);

    int first = layout.getLineStart(linetop);
    int last = layout.getLineEnd(linebot);

    ClickableSpan[] candidates = buffer.getSpans(first, last, URLSpan.class);

    int a = Selection.getSelectionStart(buffer);
    int b = Selection.getSelectionEnd(buffer);

    int selStart = Math.min(a, b);
    int selEnd = Math.max(a, b);

    if (selStart < 0) {
        if (buffer.getSpanStart(FROM_BELOW) >= 0) {
            selStart = selEnd = buffer.length();
        }
    }

    if (selStart > last)
        selStart = selEnd = Integer.MAX_VALUE;
    if (selEnd < first)
        selStart = selEnd = -1;

    switch (what) {
        case CLICK:
            if (selStart == selEnd) {
                return false;
            }

            if (listener != null) {
                URLSpan[] link = buffer.getSpans(selStart, selEnd, URLSpan.class);
                if (link.length >= 1) {
                    listener.onClick(link[0].getURL());
                } else {
                    ImageSpan[] image = buffer.getSpans(selStart, selEnd, ImageSpan.class);
                    if (image.length >= 1) {
                        listener.onImageClicked(image[0].getSource());
                    } else {
                        listener.onTextClicked();
                    }
                }
            }
            break;

        case UP:
            int beststart, bestend;

            beststart = -1;
            bestend = -1;

            for (int i = 0; i < candidates.length; i++) {
                int end = buffer.getSpanEnd(candidates[i]);

                if (end < selEnd || selStart == selEnd) {
                    if (end > bestend) {
                        beststart = buffer.getSpanStart(candidates[i]);
                        bestend = end;
                    }
                }
            }

            if (beststart >= 0) {
                Selection.setSelection(buffer, bestend, beststart);
                return true;
            }

            break;

        case DOWN:
            beststart = Integer.MAX_VALUE;
            bestend = Integer.MAX_VALUE;

            for (int i = 0; i < candidates.length; i++) {
                int start = buffer.getSpanStart(candidates[i]);

                if (start > selStart || selStart == selEnd) {
                    if (start < beststart) {
                        beststart = start;
                        bestend = buffer.getSpanEnd(candidates[i]);
                    }
                }
            }

            if (bestend < Integer.MAX_VALUE) {
                Selection.setSelection(buffer, beststart, bestend);
                return true;
            }

            break;
    }

    return false;
}

@Override
public boolean onTouchEvent(TextView widget, Spannable buffer,
                            MotionEvent event) {
    int action = event.getAction();

    if (action == MotionEvent.ACTION_UP ||
            action == MotionEvent.ACTION_DOWN) {
        int x = (int) event.getX();
        int y = (int) event.getY();

        x -= widget.getTotalPaddingLeft();
        y -= widget.getTotalPaddingTop();

        x += widget.getScrollX();
        y += widget.getScrollY();

        Layout layout = widget.getLayout();
        int line = layout.getLineForVertical(y);
        int off = layout.getOffsetForHorizontal(line, x);

        URLSpan[] link = buffer.getSpans(off, off, URLSpan.class);

        if (action == MotionEvent.ACTION_UP) {
            if (listener != null) {
                if (link.length >= 1) {
                    listener.onClick(link[0].getURL());
                } else {
                    ImageSpan[] image = buffer.getSpans(off, off, ImageSpan.class);
                    if (image.length >= 1) {
                        listener.onImageClicked(image[0].getSource());
                    } else if (Selection.getSelectionStart(buffer) == Selection.getSelectionEnd(buffer)) {
                        listener.onTextClicked();
                    }
                }
            }
        }

        if (action == MotionEvent.ACTION_DOWN && link.length != 0) {
            Selection.setSelection(buffer,
                    buffer.getSpanStart(link[0]),
                    buffer.getSpanEnd(link[0]));
            return true;
        }

        if (link.length == 0) {
            Selection.removeSelection(buffer);
        }
    }

    return super.onTouchEvent(widget, buffer, event);
}

@Override
public void initialize(TextView widget, Spannable text) {
    Selection.removeSelection(text);
    text.removeSpan(FROM_BELOW);
}

@Override
public void onTakeFocus(TextView view, Spannable text, int dir) {
    Selection.removeSelection(text);

    if ((dir & View.FOCUS_BACKWARD) != 0) {
        text.setSpan(FROM_BELOW, 0, 0, Spannable.SPAN_POINT_POINT);
    } else {
        text.removeSpan(FROM_BELOW);
    }
}

public interface Listener {

    void onClick(String clicked);

    void onTextClicked();

    void onImageClicked(String source);

}

} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-25T14:59:34.100

kotlin 中更通用的答案

```
 fun setClickableText(view: TextView, firstSpan: String, secondSpan: String) {
    val context = view.context
    val builder = SpannableStringBuilder()
    val unClickableSpan = SpannableString(firstSpan)
    val span = SpannableString(" "+secondSpan)

    builder.append(unClickableSpan);
    val clickableSpan: ClickableSpan = object : ClickableSpan() {
        override fun onClick(textView: View) {
            val intent = Intent(context, HomeActivity::class.java)
         context.startActivity(intent)
        }

        override fun updateDrawState(ds: TextPaint) {
            super.updateDrawState(ds)
            ds.isUnderlineText = true
            ds.setTypeface(Typeface.create(Typeface.DEFAULT, Typeface.ITALIC));
        }
    }
    builder.append(span);
    builder.setSpan(clickableSpan, firstSpan.length, firstSpan.length+secondSpan.length+1, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)

    view.setText(builder,TextView.BufferType.SPANNABLE)
    view.setMovementMethod(LinkMovementMethod.getInstance());

} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-24T00:13:23.213

### 使用 URLSpan 类获取 url

```
val spans: Array<URLSpan> = result.getSpans(0, result.length, URLSpan::class.java) 
```

### 方法

```
fun TextView.createClickable(string: String, action:(String)->Unit ) {
      text = HtmlCompat.fromHtml(string, HtmlCompat.FROM_HTML_MODE_LEGACY)
      val result = SpannableString(text)
      val spans = result.getSpans(0, result.length, URLSpan::class.java)
      for (span in spans) {
          val link:Pair<String, View.OnClickListener> = Pair(span.url, View.OnClickListener {
              action(span.url)
          })
          val start = result.getSpanStart(span)
          val end = result.getSpanEnd(span)
          val flags = result.getSpanFlags(span)
          result.removeSpan(span)
          val clickableSpan: ClickableSpan = object : ClickableSpan() {
              override fun onClick(textView: View) {
                  textView.invalidate()
                  link.second.onClick(textView)
              }
              override fun updateDrawState(textPaint: TextPaint) {
                  super.updateDrawState(textPaint)
                  textPaint.isUnderlineText = false
              }
          }
          result.setSpan(clickableSpan, start, end, flags)
          this.movementMethod = LinkMovementMethod.getInstance()
          this.setText(result, TextView.BufferType.SPANNABLE)
      }
  } 
```

### 利用

示例文本：**Android 是一个软件堆栈，它非常棒**

将您的可点击文本包装在锚标记内

喜欢：`Android is a Software <a href='https://example.com/stack'> Stack </a> and it' <a href='https://example.com/awesome'> Awesome </a>.`

```
 val str = "Android is a Software <a href='https://example.com/stack'> Stack </a> and it' <a href='https://example.com/awesome'> Awesome </a>."

textView.createClickable(str) {
    when(it) {
        "https://example.com/stack"->{
  startActivity(Intent(this,StackActivity::class.java))
                  }
        "https://example.com/awesom"->{
            startActivity(Intent(this,AwesomeActivity::class.java))
        }
    }
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-11-10T04:52:43.743

它对文本某些部分的可点击部分非常有帮助。

点是正则表达式中的特殊字符。如果你想跨越 dot 需要将 dot 转义为`\\`. 而不是仅仅将“ `.`”传递给可跨文本方法。或者，您也可以使用正则表达式`[.]`在 Java 中通过点来跨越字符串。

# vb.net - VB.Net 数据表赋值

> ID：10696988
> 
> 赞同：0
> 
> 时间：2012-05-22T06:41:33.533
> 
> 标签：vb.net

嗨，我有一些变量分配了值。我需要一个一个地读取循环中的变量值，并将它们分配给我使用 VB.Net 创建的数据表。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:53:49.777

您将需要创建一个 DataRow 并将这些添加到 DataTable。如果值在 List 中，您可以遍历并一次添加一个。如果这些值是单独的值，则最好依次添加每个值。

有关更多详细信息，请参见此处：

[MSDN 如何：向数据表添加行](http://msdn.microsoft.com/en-us/library/5ycd1034%28v=vs.80%29.aspx)

在此示例中，您可以使用以下内容

```
Dim customerIds() As String= {"ALFKI", "QWERT", "ASDFG", "ZXCVB"}

For Each c As String In customerIds
    Dim newCustomersRow As DataRow = DataSet1.Tables("Customers").NewRow()
    newCustomersRow("CustomerID") = c
    DataSet1.Tables("Customers").Rows.Add(newCustomersRow)
Next

' Then call the data adapter update methode
myDataAdapter.Update(DataSet1) 
```

DataAdapter 的配置特定于您的环境，但您需要连接到数据库和 InsertCommand 以将数据持久保存在数据库中。

# php - 阻止引号在zend where 中被转义

> ID：10696996
> 
> 赞同：0
> 
> 时间：2012-05-22T06:42:05.617
> 
> 标签：php, zend-framework, zend-db

我有 3 列的简单哈希表。ID 是一个电子邮件地址。

现在，我想检索给定 id 和类型的哈希值。

我这样做：

```
$select = $this->getDbTable()->select();
$select->where('id=?', $id)->where('type=?', $type); 
```

我得到

```
SELECT "hashes".* FROM "hashes" WHERE (id=\'randomemail@randomurl.com\') AND (type=\'email\') 
```

代替

```
SELECT "hashes".* FROM "hashes" WHERE (id='randomemail@randomurl.com') AND (type='email') 
```

我玩过quote和quoteInto，但它一直在转义引号。我到处看，似乎这不应该发生。我哪里会出错？

如果 type 和 id 是整数，则相同的查询有效[在这种情况下不需要引号]

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:31:51.850

试试这个

```
select = $this->getDbTable()->select();
$select->where('id=?',trim($id,"'"))->where('type=?', trim($type,"'")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:57:18.930

查询的问题在于创建 $select 之后的代码。即使引号似乎已转义，当与 fetchAll 或 fetchRow 一起使用时，选择也可以正常工作。

以下代码段正常工作，

```
 $select = $this->getDbTable()->select();
    $select->where('id=?', $id)->where('type=?', $type);;
    $hash = $this->getDbTable()->fetchRow($select)->toArray(); 
```

即使 $select->__toString() 显示

```
SELECT "hashes".* FROM "hashes" WHERE (id=\'someemail@gmail.com\') AND (type=\'default\') LIMIT 1 
```

# regex - 如何通过 Linux CLI 在文件中搜索模式？

> ID：10696997
> 
> 赞同：0
> 
> 时间：2012-05-22T06:42:16.020
> 
> 标签：regex, linux, search, sed, command-line-interface

我有如下行的日志文件：

`07:44:24||||234.234.234.234|123.123.123.123|www.website.pl/some,site.html|a:0:{}`

如何仅从`www.website.pl/some,site.html`所有行中获取？

这可以用“sed”或其他命令来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:57:08.447

**Cut**还支持分隔符和字段选择。

```
$ cut -d\| -f7
07:44:24||||234.234.234.234|123.123.123.123|www.website.pl/some,site.html|a:0:{}
www.website.pl/some,site.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:44:27.533

是的，使用 awk。

只需处理您的文件

```
awk -F '|' '{print $7}' 
```

您的示例行上的一个小成绩单：

```
$ echo '07:44:24||||234.234.234.234|123.123.123.123|www.website.pl/some,site.html|a:0:{}' | awk -F '|' '{print $7}'
www.website.pl/some,site.html 
```

**CAVEAT这假定您的文件中***除了*用于分隔符的管道外没有其他管道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T07:01:47.843

这可能对您有用：

```
echo '07:44:24||||234.234.234.234|123.123.123.123|www.website.pl/some,site.html|a:0:{}'|
sed 's/^\(\([^|]*\)|\)\{7\}.*/\2/'
www.website.pl/some,site.html 
```

或者，如果站点都开始`www`：

```
echo '07:44:24||||234.234.234.234|123.123.123.123|www.website.pl/some,site.html|a:0:{}'|
sed 's/.*\(www[^|]*\).*/\1/'
www.website.pl/some,site.html 
```