# StackOverflow 问答 10993000-10993999

# c# - 当我尝试向项目中添加内容时，Visual Studio 会崩溃

> ID：10993003
> 
> 赞同：2
> 
> 时间：2012-06-12T08:29:48.940
> 
> 标签：c#, .net, winforms, visual-studio-2010

我想我在 Visual Studio 中发现了一个可重现的错误。当我尝试将“TestControl”添加到项目中时，Visual Studio 会崩溃。

也许这是我的错，我做错了什么。我所做的只是构建，并将控件添加到表单中：

![VSCrash](../Images/b6c88077c53c27b4747cf741a8e554da.png)

这是项目（11kb）：[https ://www.dropbox.com/s/dk62j347zmwbll8/VisualStudioCrash.zip](https://www.dropbox.com/s/dk62j347zmwbll8/VisualStudioCrash.zip)

我没有包含任何二进制文件。如果要对其进行测试，请构建它并将“TestControl”添加到表单中。如果您以某种方式管理，请单击控件，然后查看它是否崩溃。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T08:32:29.737

原因很明显：

```
public string Description
{
    get
    {
        return Description;
    }
    set
    {
        // lblDescription.Text = value;
    }
} 
```

您正在对`Description`属性的 get 访问器进行递归调用。当您将控件放在设计器上时，Visual Studio 将进入无限循环。

# c - 声明函数的次数

> ID：10993008
> 
> 赞同：3
> 
> 时间：2012-06-12T08:30:24.600
> 
> 标签：c, function

我最近遇到了一个 C 源代码，其中有时在头文件中，有时在 C 文件中多次声明函数名称。我知道多次声明函数并没有错，但我的问题是为什么我们要多次声明一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:31:40.000

我们不应该。编码不好。所有这些声明都必须匹配，否则会出现编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:38:20.920

可以想象，一些声明可能在条件定义块内，并在不同的情况下使用：

```
#ifdef USE_ALT_FUNCS
  myfunc(type1 t);
#else
  myfunc(type2 t);
#endif 
```

但这将是一个令人头疼的维护问题，所以它仍然不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:39:31.443

我不确定，但也许他们多次声明该函数，因为他们使用运算符重载、多态性或方法重载。我认为在您的情况下是方法重载或操作重载。

对不起我的英语，我认为正确的名称是“函数重载”。我希望我能帮助你，但我认为如果你向我们展示一个我们可以看到的例子会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:51:09.147

有时，由于一些微妙的副作用，重新声明（或重新定义）函数很有用。[此处](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Inline.html#Inline)显示了一个示例，在最后一段中，涉及内联函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-02T17:00:16.273

在函数返回非整数值（例如双精度）的情况下，调用函数必须知道被调用函数的返回类型。否则，假定返回类型为 int，但这可能导致信息丢失（例如 double 到 int）。

防止这种信息丢失的一种方法是在调用例程中显式声明该函数。这也许可以解释为什么你注意到同一个函数有这么多声明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-13T01:45:27.027

我有一个实例，我首先将函数声明为占位符，然后使用随附的代码：

```
int mouse[2];
void doit();
void submouse(int btn, int state, int x, int y){
  mouse[0] = x;
  mouse[1] = y;
  doit();
}
void newwindow(){
  subWindow[1][0] = glutCreateSubWindow(mainWindow, 10, 10, 616, 274);
  windowlevel = 1;
  glutMouseFunc(submouse);
}
void doit(){
  // if subwindow has not been created, create subwindow
  if(windowlevel == 0)newwindow();
  else{ //process whatever the mouse clicked
  }
} 
```

过去一年在我的 AMD64 机器上使用 gcc 4:4.8.2-4 一直有效，但我在使用 gcc 4:4.7.2-1 的 i686 机器（Debian stable）上收到错误消息：

> 块引用

```
program.c:4418:6: error: static declaration of ‘doit’ follows non-static declaration
program.c:3745:6: note: previous declaration of ‘doit’ was here 
```

doit() 被声明为占位符，因为它是由 submouse() 调用的。submouse() 被声明为与 newwindow() 创建的子窗口相关联。因为 doit() 调用 newwindow()，所以直到声明 newwindow() 之后才包含 doit() 的代码。注意：doit() 是一个状态函数。在子窗口被构建后，它会消失，直到被 submouse() 调用。

# linux - 如何在 Wanderlust 中查看替代 mime 内容

> ID：10993009
> 
> 赞同：3
> 
> 时间：2012-06-12T08:30:24.823
> 
> 标签：linux, emacs, imap, mime

如何在 Wanderlust 中查看替代 mime 内容？

我所有的邮件都是以 HTML 版本发送的，有时我宁愿看到纯文本版本，即使我不想完全失去查看 HTML 版本的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:57:51.820

我有（在 ~/.wl 中）

```
(setq mime-view-type-subtype-score-alist
  '(((text . plain) . 4)
    ((text . enriched) . 3)
    ((text . html) . 2)
    ((text . richtext) . 1))) 
```

设置默认优先级（我更喜欢纯文本，但如果您大部分时间想要html，只需更改值）。

然后，当我想查看替代版本时，我会显示所有消息部分（在摘要缓冲区中）

```
C-c m runs the command wl-summary-toggle-mime-buttons 
```

显示为`[1 <text/plain; UTF-8 (7bit)>]`和`[2 <text/html; UTF-8 (quoted-printable)>]`

跳转到消息缓冲区，并将光标放在相应的按钮上，

```
C-c C-t C-c runs the command mime-preview-toggle-content 
```

切换该特定部分的显示。

# asp.net-mvc-routing - ASP.NET 4 MVC Web API：复杂路由的文档

> ID：10993017
> 
> 赞同：5
> 
> 时间：2012-06-12T08:31:33.917
> 
> 标签：asp.net-mvc-routing, asp.net-web-api

web api 似乎只适用于标准用例。但我想做更复杂的路由，但找不到复杂路由的文档。如果我有更多控制器，路由会变得越来越复杂。

我可以定义几个具有依赖关系的可选参数吗？像这样：

```
/api/document/{par1}/{par2} 
```

par1 & par2 应该是可选的，但 par2 只有在 par1 存在时才应该匹配。

递归参数是否可能？

```
/api/documents/characteristics/{round/green/red-dots}
/api/documents/characteristics/{square/yellow}
/api/documents/characteristics/{square/yellow/flat}
/api/documents/characteristics/{square/yellow/flat/...} 
```

是否有关于 web api 路由的详细文档？微软教程太基础了……我需要更多关于路由的信息。

我有两个控制器和一些麻烦，因为两个路由非常相似，所以走错了路线。我可以使用 [Action]-Attribute 作为解决方法，但这感觉不对……我还必须考虑路线的顺序。这是合乎逻辑的，但没有提到。web api是否仅适用于简单的rest api？

* * *

**编辑：** 我试过这个：

```
routes.MapHttpRoute(
           name: "DefaultApi",
            routeTemplate: "api/{mandant}/documents/{id}",
            defaults: new { controller = "documents", id = RouteParameter.Optional }
            );

//routes.MapHttpRoute(
//    name: "DefaultApiWithAction",
//    routeTemplate: "api/{mandant}/documents/{id}/{action}",
//    defaults: new { controller = "documents" }
//    ); 
```

我有两种方法：

```
[AcceptVerbs("get")]
public HttpResponseMessage Get(int id)

[ActionName("file")]
[AcceptVerbs("get")]
public HttpResponseMessage filedownload(int id) 
```

现在我遇到了问题，即使我注释掉第二条路线也会触发文件操作，并且不会触发正常的获取特定文档方法，因为多个操作...我尝试了 [NoAction] 属性，但这不起作用.. . 但是为什么route-template中没有action会触发file-method呢？（或者如果第二条路由处于活动状态，如果url中没有任何操作，为什么不会触发正常的get-document方法......）我目前的解决方法是为所有其他方法设置默认操作，但是这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:37:39.327

您可以使用路由约束在 global.asax 中设置路由条件，例如：

```
routes.MapRoute(
    "ApiRoute",
    "api/document/{par1}/{par2}",
    new {controller="Document", action="SomeMethod"},
    new {par1 = @"\d+" }
 ); 
```

在最后一个参数中，您可以指定必须与要使用的路由的指定参数匹配的正则表达式。在上面的示例中，`par1`仅用于数字，但您可以使用任何正则表达式，例如：

```
routes.MapRoute(
    "ApiRoute",
    "api/document/{par1}/{par2}",
    new {controller="Document", action="SomeMethod"},
    new {par1 = @"(value1|value2|value3)" }
 ); 
```

# php - PHP int 到唯一的 rgb 颜色

> ID：10993022
> 
> 赞同：6
> 
> 时间：2012-06-12T08:31:44.587
> 
> 标签：php, colors, int, rgb

我有数字 1000 到 9999。我想要一个函数，它可以为每个数字获取 rgb 中的唯一颜色。每次启动该方法时，每个数字的颜色都必须相同。添加数字时，颜色也需要非常不同。所以数字 1 可以是深红色，2 是浅绿色等。

希望有人知道如何做到这一点！:)

这是我到目前为止得到的，但颜色几乎相同，这不是我想要的！

```
for ($i = 1000; $i < 2099; $i++) {
  $rgb = getRGB(dechex($i));
  echo '<div style="width: 800px; height: 30px; margin-bottom: 10px; background-color: ' . rgb2html($rgb['red'], $rgb['green'], $rgb['blue']) . ';"></div>';
}

function getRGB($psHexColorString) {
  $aColors = array();
  if ($psHexColorString{0} == '#') {
    $psHexColorString = substr($psHexColorString, 1);
  }
  $aColors['red'] = @hexdec($psHexColorString{0} . $psHexColorString{1});
  $aColors['green'] = @hexdec($psHexColorString{2} . $psHexColorString{3});
  $aColors['blue'] = @hexdec($psHexColorString{4} . $psHexColorString{5});
  return $aColors;
}

function rgb2html($r, $g = -1, $b = -1) {
  if (is_array($r) && sizeof($r) == 3)
    list($r, $g, $b) = $r;

  $r = intval($r);
  $g = intval($g);
  $b = intval($b);

  $r = dechex($r < 0 ? 0 : ($r > 255 ? 255 : $r));
  $g = dechex($g < 0 ? 0 : ($g > 255 ? 255 : $g));
  $b = dechex($b < 0 ? 0 : ($b > 255 ? 255 : $b));

  $color = (strlen($r) < 2 ? '0' : '') . $r;
  $color .= (strlen($g) < 2 ? '0' : '') . $g;
  $color .= (strlen($b) < 2 ? '0' : '') . $b;
  return '#' . $color;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:39:24.277

您可以使用 php 函数“dechex”将整数转换为 Hexa RGB：

[http://php.net/manual/en/function.dechex.php](http://php.net/manual/en/function.dechex.php)

在这个页面有这个功能：

```
function toColor($n) {
    return("#".substr("000000".dechex($n),-6));
} 
```

未经测试，但可以提供帮助。

**评论后编辑**：您可以在函数中添加一些伪随机器：

```
function toColor($n) {
    $n = crc32($n);
    $n &= 0xffffffff;
    return("#".substr("000000".dechex($n),-6));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:40:47.600

如果您只想随机选择 9000 种颜色，我认为您可以这样做：

```
$color = substr(md5($number),6); 
```

# windows-phone-7 - WP7 zxing 扫描不可靠

> ID：10993026
> 
> 赞同：0
> 
> 时间：2012-06-12T08:31:53.713
> 
> 标签：windows-phone-7, qr-code

我使用这个算法在页面上打印了一些简短的二维码（如“HAEB16653”）：

```
private void CreateQRCodeFile(int size, string filename, string codecontent)
{
  QRCodeWriter writer = new QRCodeWriter();
  com.google.zxing.common.ByteMatrix matrix;
  matrix = writer.encode(codecontent, BarcodeFormat.QR_CODE, size, size, null);
  Bitmap img = new Bitmap(size, size);
  Color Color = Color.FromArgb(0, 0, 0);
  for (int y = 0; y < matrix.Height; ++y)
  {
    for (int x = 0; x < matrix.Width; ++x)
    {
      Color pixelColor = img.GetPixel(x, y);
      //Find the colour of the dot 
      if (matrix.get_Renamed(x, y) == -1)
      {
        img.SetPixel(x, y, Color.White);
      }
      else
      {
        img.SetPixel(x, y, Color.Black);
      }
    }
  }
  img.Save(filename, ImageFormat.Png);
} 
```

使用集成的 WP7 bing 扫描和搜索，打印的条形码工作得非常好和快速。

当我尝试使用[Stéphanie Hertrichs 示例应用程序](http://blogs.msdn.com/b/stephe/archive/2011/11/07/wp7-real-time-video-scan-a-barcode-qr-code-in-your-app-using-zxing-lib.aspx)扫描相同的打印二维码时，扫描速度非常慢，大多数根本不扫描，或者只有当我慢慢旋转相机时才会被识别。

如何让我的扫描与集成条码识别一样可靠？我只需要扫描二维码，所以我禁用了所有其他的，但大部分时间它仍然不起作用。

是否有其他一些更好的条形码扫描库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:12:17.203

Stéphanie Hertrichs 示例应用程序中的 silverlight 端口非常古老。在我看来，codeplex 的项目自 1 年多以来就不再维护了。您应该尝试更新和维护的端口之一，例如[ZXing.Net](http://zxingnet.codeplex.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:52:39.443

zxing 效果很好——只需在 Android 上尝试一下。如果它是 Bing 搜索的动力，我不会感到惊讶。

问题可能出在港口。任何非 Java 端口充其量都是陈旧且不完整的。我也无法谈论您正在查看的示例中使用的方法的效率。例如，它真的对来自 API 的图像进行了正确的二值化吗？还要确保它没有使用 TRY_HARDER 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:40:01.120

这个问题没有客观答案...

我个人的看法是，您尝试过的 ZXing 库（Stéphanie Hertrichs 示例应用程序）是您能得到的最好的。据我所知，它也用于其他平台（例如 Android）。

几个月前我测试了这个库，我觉得它运行起来非常可靠和快速，但可能是你有其他情况（照明、相机、角度等......）

# java - Java 5 - 检查网络接口是否已启动并正在运行。

> ID：10993027
> 
> 赞同：2
> 
> 时间：2012-06-12T08:31:55.680
> 
> 标签：java, network-programming

Java 6 提供 isUp() 方法来检查网络接口是否启动并运行。

[http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#isUp](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#isUp) ()

有没有办法在 Java 5 中检查相同的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:51:35.543

如果您不介意使用外部库，请查看[Sigar](http://www.hyperic.com/products/sigar)

您可以获取网络接口状态，其中包括接收到的字节数或发送的字节数等统计信息。

唯一的后备方案是带有 java 绑定的 C 库，因此您需要在运行时为您的架构提供特定版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:55:18.123

查看是否*有任何资源可用的最佳方法是**尝试使用它*，从 NIC 到数据库再到世界另一端的 Web 服务器或月球。任何其他技术都可能导致时间问题，即在您测试时它是向上的，而在您使用它时它是向下的，或者相反。当你尝试使用它时，无论如何你都必须处理失败的情况，因为它们通常是检查异常：为什么要两次编写相同的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T10:36:13.487

类`NetworkInterface`有一个方法`getInetAddresses()`，提供一个`InetAddress`-es 的枚举。假设每个适配器都支持 IPv4，您会在`Inet4Address`其中找到一个。如果接口关闭，它将通过方法传递“0.0.0.0”作为地址`toString()`。如果适配器已启动但未链接（未分配动态地址），它将具有模式“169.xxx”的地址。

# android - 在android 2.1中将一个活动添加到另一个活动中

> ID：10993035
> 
> 赞同：2
> 
> 时间：2012-06-12T08:32:36.710
> 
> 标签：android, android-intent

有没有办法将一个活动添加到另一个活动中？我认为 TabHost 可以做到这一点，但我不知道如何。在我的应用程序中，我在按钮列表旁边有一个 LinearLayout。然后我想在其中添加一些活动（或意图），我可以根据单击的按钮使其可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:53:32.840

感谢 MikeIsrael，我找到[了这个库](http://android-developers.blogspot.com/2011/03/fragments-for-all.html)。希望这可以帮助。

# c - 警告：不正确的指针/整数组合：op“=”

> ID：10993036
> 
> 赞同：1
> 
> 时间：2012-06-12T08:32:38.267
> 
> 标签：c, gcc-warning, solaris-10

我在 Solaris 中编译了一个 C 程序并收到此警告。

```
line 68: warning: improper pointer/integer combination: op "=" 
```

我的代码包含

```
struct cmsghdr  *cmsg; 
```

第 68 行是

```
cmsg = CMSG_FIRSTHDR(&msg); 
```

结构 cmsghdr 和 CMSG_FIRSTHDR 在 socket.h 中定义为

```
#define  CMSG_FIRSTHDR(m)
--
--

struct cmsghdr {
        socklen_t       cmsg_len;  
        int             cmsg_level;
        int             cmsg_type; 
}; 
```

我在我的代码中包含了 socket.h。但我仍然收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:24:14.790

宏可能`CMSG_FIRSTHDR`没有进行正确的类型转换，所以你必须自己做：

```
cmsg = (struct msghdr *) (CMSG_FIRSTHDR(&msg)); 
```

也可能是宏本身内部存在一些不正确的转换，在这种情况下，您无能为力，因为它位于系统头文件中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T08:35:31.657

请检查 SOL_SOCKET 是什么类型。它需要是整数。如果不匹配，请更改结构中提交的“cmsg_level”的类型。

我猜 SOL_SOCKET 是一个指针，可能是 int*

# java - 在多线程应用程序中使用 JNI 的正确方法

> ID：10993038
> 
> 赞同：1
> 
> 时间：2012-06-12T08:32:48.703
> 
> 标签：java, android, c++, c, multithreading

## 描述

在我的 C++ 应用程序类`JNIXMLDocument`中进行了一些 JAVA 方法调用。在`JNIXMLDocument`类的构造函数中，我附加当前线程并将其设置为我的类成员`JNIEnv* m_JavaEnv`，然后在所有方法中使用它。同样在构造函数中，我试图找到我的 JAVA 类`com/fido/android/framework/service/XMLDOMDocument`并将其设置为类成员`m_XMLDocumentClass`，并从类中获取该类对象并将其设置为类成员`m_XMLDocumentObject`。

## C++ 代码

```
class JNIXMLDocument
{
    /* Constructor **/
    JNIXMLDocument()
    {
        /* Get JNI right version and set it. **/
        jint interface_id = JNI_VERSION_1_2;
        #ifdef JNI_VERSION_1_2
            interface_id = JNI_VERSION_1_2;
        #else
            interface_id = JNI_VERSION_1_1;
        #endif

        /* Trying to attach current thread. **/
        int res = g_JavaVirtualMachine->GetEnv(&m_JavaEnv, interface_id);
        if (res == JNI_EDETACHED || res == JNI_EVERSION) {
            res = g_JavaVirtualMachine->AttachCurrentThread(&m_JavaEnv, NULL);
        }

        /* Get Class from Java **/
        m_XMLDocumentClass = m_JavaEnv->FindClass("com/fido/android/framework/service/XMLDOMDocument");
        if (m_XMLDocumentClass != NULL) {
            /* Call java class constructor. **/
            jmethodID constructor = m_JavaEnv->GetMethodID(m_XMLDocumentClass , "<init>", "()V");
            m_XMLDocumentObject = m_JavaEnv->NewObject(m_XMLDocumentClass , constructor);    

        }

    }

    bool Initialize()
    {
        jmethodID method = m_JavaEnv->GetMethodID(m_XMLDocumentClass, "Initialize", "()Lorg/w3c/dom/Document;");
        jobject document = m_JavaEnv->CallObjectMethod(m_XMLDocumentObject , method);

    }

    private:
        JNIEnv* m_JavaEnv;
        jclass  m_XMLDocumentClass;
        jobject m_XMLDocumentObject;

}; 
```

## C++ 代码（正确的方式）

```
class JNIXMLDocument
{
    /* Constructor **/
    JNIXMLDocument()
    {
        /* Get JNI right version and set it. **/
        jint interface_id = JNI_VERSION_1_2;
        #ifdef JNI_VERSION_1_2
            interface_id = JNI_VERSION_1_2;
        #else
            interface_id = JNI_VERSION_1_1;
        #endif

        JNIEnv* env;
        /* Trying to attach current thread. **/
        int res = g_JavaVirtualMachine->GetEnv(&env, interface_id);
        if (res == JNI_EDETACHED || res == JNI_EVERSION) {
            res = g_JavaVirtualMachine->AttachCurrentThread(&env, NULL);
        }

        /* Get Class from Java **/
        jclass localClass = env->FindClass("com/fido/android/framework/service/XMLDOMDocument");
        if (localClass != NULL) {
            m_XMLDocumentClass = env->NewGlobalRef(localClass);
            /* Call java class constructor. **/
            jmethodID constructor = env->GetMethodID(localClass, "<init>", "()V");
            jobject localObject = env->NewObject(m_XMLDocumentClass , constructor);    
            m_XMLDocumentObject = env->NewGlobalRef(localObject );
        }

    }

    bool Initialize()
    {

    }

    private:
        jclass  m_XMLDocumentClass;
        jobject m_XMLDocumentObject;

}; 
```

## 问题

1.  在构造函数中设置一次JNI接口指针（`JNIEnv* m_JavaEnv`）并在整个代码中使用它是否正确？
2.  `jclass m_XMLDocumentClass`在构造函数中设置而不是在所有方法中使用该变量是否正确？
3.  `jobject m_XMLDocumentObject`以这种方式在构造函数中设置是否正确，`m_JavaEnv->NewObject(m_XMLDocumentClass , constructor);`或者我必须调用`NewGlobalRef`.
4.  如果我的应用程序不在同一个线程中工作（使用多个线程），会出现什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:39:58.893

> 在构造函数中设置一次JNI接口指针（JNIEnv* m_JavaEnv）并在整个代码中使用它是否正确？

不，它是线程特定的。这就是 Attach/DetachCurrentThread 的用途。唯一可行的方法是在同一个线程中构造和销毁 C++ 对象。

> 在构造函数中设置 jclass m_XMLDocumentClass 并在所有方法中使用该变量是否正确？

不，它是一个本地引用，当它获取的JNI方法返回时它就会过期。您必须保存为全局或弱引用*，除非*它仅用于单个 JNI 方法中。

> ```
> Is it right to set jobject m_XMLDocumentObject in the constructor in this way m_JavaEnv->NewObject(m_XMLDocumentClass , constructor); 
> ```

否：见上文。

> 或者我必须打电话给 NewGlobalRef。

是的，如上所述。

> 如果我的应用程序不在同一个线程中工作（使用多个线程），会出现什么问题？

主要是JVM崩溃。JVM 假定您遵循 JNI 规范中的所有规则。就这样做吧。

# jquery - beforeunload 事件在 IE 中触发两次

> ID：10993040
> 
> 赞同：1
> 
> 时间：2012-06-12T08:32:59.360
> 
> 标签：jquery, javascript-events

> **可能重复：**
> [onbeforeunload 消息出现两次 (Internet Explorer)](https://stackoverflow.com/questions/6917074/onbeforeunload-message-appears-twice-internet-explorer)

我面临在 IE 上两次触发 beforeunload 事件的问题。下面的代码适用于其他浏览器。

```
 window.onbeforeunload = function (evt) {
        evt.preventDefault();
        evt.stopImmediatePropagation();
        evt.stopPropagation();

        if (isDirty) {
            isDirty = false;
            return dirtyMsg;
        }
    }; 
```

我看过很多其他帖子，但没有解决。

谢谢

# drupal - drupal中的自定义图标块

> ID：10993043
> 
> 赞同：1
> 
> 时间：2012-06-12T08:33:10.487
> 
> 标签：drupal, drupal-7, drupal-blocks

如何在 Drupal 7 中创建自定义块以显示自定义可点击图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:58:00.810

您可以使用[菜单属性模块](http://drupal.org/project/menu_attributes)，并提供菜单项 ID/类，然后使用 CSS 设置样式。

希望这行得通……穆罕默德。

# java-me - 什么是本机键盘？

> ID：10993044
> 
> 赞同：1
> 
> 时间：2012-06-12T08:33:12.200
> 
> 标签：java-me, keyboard

我有一个带有触摸屏功能的简单 Java 手机。在“写消息”部分有一个简单/普通键盘（非 Qwerty）来编写消息。现在我的问题是，这个默认的 [简单/普通键盘（非 Qwerty )] 被称为本机键盘还是完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:50:29.370

当手机没有物理键盘时，我们将虚拟键盘（显示在屏幕上）称为本机键盘。

如果您使用 LCDUI 表单或文本框，此键盘将由 Java 虚拟机自动呈现。

# javascript - 使用 ExtJS 创建动态网格

> ID：10993045
> 
> 赞同：10
> 
> 时间：2012-06-12T08:33:24.290
> 
> 标签：javascript, extjs, extjs4, gridpanel, extjs4.1

我正在尝试创建一个动态网格类（我不知道有关列的任何信息，但它们是从 json 响应中给出的，并且网格会相应地自行准备）。[在这里](http://www.jicdesign.com/blog/web-development/extjs-dynamically-creating-grid-panel.html)，我找到了我正在寻找的东西，但是它给了我一个错误：

```
me.model is undefined
me.setProxy(me.proxy || me.model.getProxy());
ext-all-debug.js (line 47323) 
```

我试图同时添加代理和模型，但我没有成功，我一直收到同样的错误。

这是我正在处理的 ExtJS 代码：

```
 // ExtJS 4.1
 Ext.Loader.setConfig({
     enabled: true
 });
 Ext.Loader.setPath('Ext.ux', '../extjs-4.1.0/examples/ux');
 Ext.require([
     'Ext.grid.*',
     'Ext.data.*', ]);

 Ext.define('DynamicGrid', {
     extend: 'Ext.grid.GridPanel',
     storeUrl: '',
     enableColumnHide: true,
     initComponent: function () {
         var store = new Ext.data.Store({
             url: this.storeUrl,
             reader: new Ext.data.JsonReader(),
             autoLoad: true,
             scope: this,
             listeners: {
                 scope: this,
                 metachange: function (store, meta) {
                     if (typeof (store.reader.jsonData.columns) === 'object') {
                         var columns = [];
                         /**
                          * Adding RowNumberer or setting selection model as CheckboxSelectionModel
                          * We need to add them before other columns to display first
                          */
                         if (this.rowNumberer) {
                             columns.push(new Ext.grid.RowNumberer());
                         }
                         if (this.checkboxSelModel) {
                             columns.push(new Ext.grid.CheckboxSelectionModel());
                         }
                         Ext.each(store.reader.jsonData.columns, function (column) {
                             columns.push(column);
                         }); // Set column model configuration 
                         this.getColumnModel().setConfig(columns);
                         this.reconfigure(store, this.getColumnModel());
                     }
                 }
             }
         });
         var config = {
             title: 'Dynamic Columns',
             viewConfig: {
                 emptyText: 'No rows to display'
             },
             loadMask: true,
             border: false,
             stripeRows: true,
             store: store,
             columns: []
         }
         Ext.apply(this, config);
         Ext.apply(this.initialConfig, config);
         DynamicGrid.superclass.initComponent.apply(this, arguments);
     },
     onRender: function (ct, position) {
         this.colModel.defaultSortable = true;
         DynamicGrid.superclass.onRender.call(this, ct, position);
     }
 });

 Ext.onReady(function () {

     Ext.QuickTips.init();

     var grid = Ext.create('DynamicGrid', {
         storeUrl: 'http://300.79.103.188/ApplicationJs/jsontest.json'
     });

     var depV = Ext.create('Ext.Viewport', {
         title: 'Departman Tanımları',
         layout: 'fit',
         items: grid
     }).show();

 }); 
```

我必须做什么才能让它运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T15:55:50.797

那是一篇相当老的帖子，因此您可能很快就会有更多解决方法，但该错误是因为您没有为您的商店定义[模型配置](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-cfg-model)或[字段配置。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-fields)如果您希望仅使用 json 数据创建网格，则还需要动态定义模型。

据我所知，字段配置非常宽容，因此您可以将其设置为最大可能的字段数，例如 20 或 30 左右，但字段名称必须与 json 字段名称匹配它可以使用。即，如果您使用：

```
var store = new Ext.data.Store({
    url: this.storeUrl,
    reader: new Ext.data.JsonReader(),
    fields: [
        'column1',
        'column2',
        'column3',
        'column4',
        'column5',
        // etc
    ], 
```

然后您的 json 数据需要来自数据库，例如：

```
[{"column1":"data1", "column2":"data2", // etc 
```

我过去做过的另一件事是首先加载一个引用存储，其中包含一个记录，其中包含每个动态字段（元数据）的名称和数据类型。然后我遍历这个参考存储并在每次迭代中[添加一个模型字段](https://stackoverflow.com/a/10588523/1062992) *和*列定义，*然后*我加载了网格的存储，它现在定义了正确的数据模型，并且网格将具有正确的列定义。

如果你不想让你的数据库返回上面提到的通用列名，你可能已经做了类似的事情，因为我不知道在你给它一个数据模型*之前*你会如何将数据加载到你的网格存储中利用。

**6 月 13 日更新：**

我还没有尝试过，但我只是[在 4.1 文档中遇到了这个](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-isLoading)（向下滚动到介绍中的“响应元数据”部分）。它描述了在你的 json 响应中使用 metaData 来准确地完成你想要的动态模型和网格列。

处理元数据后，您可能仍然需要执行我上面描述的迭代，但您可以使用它来删除获取元数据的额外请求。

我想如果您的字段配置不会随每个请求而改变，那么在开始时简单地执行额外请求会更容易，但如果您想要一些真正动态的东西，这会做到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:23:34.957

**注意**：这是我的回复的重复：[如何从 json 创建表列和字段？（动态网格）](https://stackoverflow.com/questions/10979269/how-do-you-create-table-columns-and-fields-from-json-dynamic-grid/15282162#15282162)。我只是想在我用来解决这个问题的所有 StackOverflow 问题中解决我的最终解决方案。

Stackoverflow 充满了与此非常相似的问题。我研究了所有这些，但没有找到明确的解决方案。但是，提供的大多数答案都为我指明了正确的方向。我会尽我最大的努力将所有这些建议放在一起，并让其他人明白这一点：

**模型：（**仅显示所有 JSON 响应中的 2 个字段。仍将被覆盖）

```
Ext.define('RTS.model.TestsModel', {
    extend: 'Ext.data.Model',
    alias: 'model.TestsModel',

    fields: [
        {
            name: 'poll_date'
        },
        {
            name: 'poller'
        }
    ]
}); 
```

**店铺：**

```
Ext.define('RTS.store.TestsStore', {
    extend: 'Ext.data.Store',
    alias: 'store.TestsStore',

    model: 'RTS.model.TestsModel',

    constructor: function(cfg) {
        var me = this;

        cfg = cfg || {};

        me.callParent([Ext.apply({
            autoLoad: false,
            proxy       : {
                type    : 'ajax',
                url     : 'tests.php',
                reader  : {
                    type    : 'json',
                    root    : 'tests',
                    successProperty : 'success'
                }
            },            
            storeId: 'tests-store'
        }, cfg)]);
    }
}); 
```

**查看：（**列将在每个 JSON 响应中定义）

```
Ext.define('RTS.view.TestsView', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.TestsView',

    id: 'tests-view',
    title: 'Tests',
    emptyText: '',
    store: 'TestsStore',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            viewConfig: {

            },
            columns: [
            ]
        });

        me.callParent(arguments);
    }

}); 
```

**控制器：（**控制器根据 JSON 响应完成所有强制视图和模型更改的工作）。

```
Ext.define('RTS.controller.TestsController', {
    extend: 'Ext.app.Controller',
    alias: 'controller.TestsController',

    stores: [
        'TestsStore'
    ],
    models: [
        'TestsModel'
    ],
    views: [
        'TestsView'
    ],

    init: function(application) {

        // When store changes, trigger an event on grid
        // to be handled in 'this.control'.  

        // NOTE : Ext JS does not allow control of 
        // non-component events.

        // Ext JS 4.2 beta will allow the controller
        // to detect non-component changes and handle them
        var testsStore = this.getStore('TestsStore');
        testsStore.on("metachange", metaChanged, this);
        function metaChanged(store, meta) {
            var grid = Ext.ComponentQuery.query('TestsView')[0];
            grid.fireEvent('metaChanged', store, meta);
        };

        this.control({
            "TestsView": {
                metaChanged: this.handleStoreMetaChange
            }
        });
    },

    /**
     * Will update the model with the metaData and
     * will reconfigure the grid to use the
     * new model and columns.
     */
    handleStoreMetaChange: function(store, meta) {
        var testsGrids = Ext.ComponentQuery.query('TestsView')[0];
        testsGrids.reconfigure(store, meta.columns);
    }

}); 
```

**JSON 响应：** 您的 json 响应必须包含“元数据”属性。它应该像在静态模型和通常定义为显示字段的视图上一样定义字段。

```
{
    "success": true,
    "msg": "",
    "metaData": {
        "fields": [
            {
                "name": "poller"
            },
            {
                "name": "poll_date"
            },
            {
                "name": "PING",
                "type": "int"
            },
            {
                "name": "SNMP",
                "type": "int"
            },
            {
                "name": "TELNET",
                "type": "int"
            },
            {
                "name": "SSH",
                "type": "int"
            },
            {
                "name": "all_passed"
            }
        ],
        "columns": [
            {
                "dataIndex": "poller",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "Poller"
            },
            {
                "dataIndex": "poll_date",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "Poll Date"
            },
            {
                "dataIndex": "PING",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "PING",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "SNMP",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "SNMP",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "TELNET",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "TELNET",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "SSH",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "SSH",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "all_passed",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "All Passed",
                "renderer": "RenderFailedTests"
            }
        ]
    },
    "tests": [
        {
            "poller": "CHI",
            "poll_date": "2013-03-06",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "DAL",
            "poll_date": "2013-03-06",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "CHI",
            "poll_date": "2013-03-04",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "DAL",
            "poll_date": "2013-03-04",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "CHI",
            "poll_date": "2013-03-01",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        }
    ]
} 
```

# matlab - matlab，print()函数生成一个没有Y渐近线数据的png文件

> ID：10993051
> 
> 赞同：1
> 
> 时间：2012-06-12T08:33:41.043
> 
> 标签：matlab, printing, plot

我目前一直在使用一个 Matlab 脚本来绘制一个函数并将其数据打印到一个 png 文件中，但是我在最后一个阶段遇到了问题。

事实是，从绘制的图像转移到 png 文件，一些数据点消失了。这是我的图像。

Matlab（正确）绘制的内容（注意最大值为（0；7.7））： ![在此处输入图像描述](../Images/9026997dfa50e2cf052313fc356d2d97.png)

这是 Matlab 打印到文件中的内容： ![在此处输入图像描述](../Images/3a7612a4f5218dc9a66a098f114fa6e6.png)

请注意，Y 渐近线上的所有点都丢失了！

为什么会这样？

这是我的代码：

```
grafico2D('filename.dat', -1); 
```

`...`

```
function [result] = grafico2D(filename, max_X)
% function that loads data from a two-column file and plot them in 2D image
close all;

dati = load(filename); % load data from file
X = dati(:,1); % X axis
Y = dati(:,2); % Y axis

temp = size(X);
lungX = temp(1);

hFig = figure();
set(hFig, 'Visible', 'on');

plot(X, Y, 'red'); 
hold on;
ylim([0 1]); 

if(max_X==-1) 
    xlim([1 X(lungX)]); 
else
    xlim([1 max_X]);
end

xlim

title(strrep(filename,'_','\_')); % substitute _ with \_
xlabel('annotation prediction position'), ylabel('likelihood');
grid

 print(hFig, '-dpng', filename); % stampa su file
% }

result = 1;

end 
```

有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:51:59.863

`-r`您可以使用以每英寸点数指定分辨率的选项来增加图像的分辨率（默认为 90）。它应该可以解决您的问题（至少它对我有用）。请参阅 Matlab`print`函数[文档](http://www.mathworks.fr/help/techdoc/ref/print.html)。

PS：您也可以使用带有[line 属性](http://www.mathworks.fr/help/techdoc/ref/line_props.html) `LineWidth`的粗线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:37:37.750

您可以稍微扩展 x 限制：

```
xlim(xlim() - [0.05 0]) 
```

# java-me - 仅在 actionlistner 动态填充 Combobox 一次

> ID：10993057
> 
> 赞同：0
> 
> 时间：2012-06-12T08:33:55.130
> 
> 标签：java-me, lwuit

在我的项目中，我想首先在组合框中查看国家/地区，然后应查看国家/地区状态，然后查看基于状态的城市这是在我的项目中完成的，但问题是当我再次单击国家/地区时，会附加与该国家/地区对应的状态到组合框..这不应该完成组合框应该刷新然后应该添加状态我在lwuit的J2Me中这样做有人可以帮助我吗？？？如果有人请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:08:51.670

如果您能解释一下您是如何使用组合框的，那将会有所帮助...

我猜您正在使用 addItem 添加大量项目（这很糟糕）而不删除这些项目。要替换现有项目，只需执行以下操作：

```
 combo.setModel(new DefaultListModel(arrayWithNewData)); 
```

# php - 从windows机器的mssql中提取数据库，有什么可用的工具吗？

> ID：10993060
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:34:03.650
> 
> 标签：php, sql-server, database

我计划从 mssql 服务器中提取/导出数据并将其导入 mysql，我在过去 4 小时内搜索了 mssql 客户端，但没有成功。运行 SQL Server Management Studio 2005 Express 的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:40:20.713

SSMS 中有一个导出数据向导，它可以连接到 mysql db（通过 ODBC）并导出数据。

# mysql - 使用函数优化 mySQL 查询

> ID：10993074
> 
> 赞同：2
> 
> 时间：2012-06-12T08:35:07.127
> 
> 标签：mysql

我正在运行这个查询（通过 PHP）并想知道是否有更快的方法来获得相同的结果：

```
SELECT 
    date(date_time) as `date`, 
    unix_timestamp(date(date_time)) as `timestamp`, 
    month(date(date_time)) as `month`, 
    dayname(date(date_time)) as `dayname`, 
    dayofmonth(date(date_time)) as `daynum`, 
    hour(date_time) as `hour`, minute(date_time) as `increment`
FROM loc_data 
WHERE loc_id = 2 
```

如您所见，我正在执行该`date(date_time)`功能 5 次，但想存储第一次的结果并从那时起使用该结果。这会提高查询的性能吗？该查询在脚本中被调用了数千次。（当我在 PHP 而不是 mySQL 中执行函数时，与上面的当前查询相比，速度没有太大差异。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:52:07.247

你试过`SQL variables`吗？

```
select @a from (select @a := 1) a 
```

这行得通，与您的查询

```
SELECT 
    @n as `date`, 
    unix_timestamp(@n) as `timestamp`
FROM loc_data l,
     (select @n := date(l.date_time)) a 
WHERE l.loc_id = 2 
```

但我不确定这是否适合你。

# android - 在 android 和 google 地图中相同的坐标不同的地方

> ID：10993075
> 
> 赞同：0
> 
> 时间：2012-06-12T08:35:09.780
> 
> 标签：android, google-maps, android-mapview

我正在使用 android 中的位置管理器获取位置，如下所示：

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Location lastKnownLoc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

geoPoint= new GeoPoint((int) (lastKnownLoc.getLatitude()*1000000),(int) (lastKnownLoc.getLongitude())*1000000); 
```

并将地图视图设置为此坐标：

```
myMC = myMapView.getController();
myMC.setCenter(geoPoint); 
```

但是我得到的地方是该位置的实际位置。[当我在https://maps.google.com/](https://maps.google.com/)上将坐标提供给谷歌地图时，我得到了实际位置。为什么会这样？任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:43:47.427

您正在获取最后一个已知位置。不是当前位置。

[http://developer.android.com/guide/topics/location/obtaining-user-location.html#Updates](http://developer.android.com/guide/topics/location/obtaining-user-location.html#Updates)

这向您展示了如何获取当前位置并提供了一些示例代码。

[这个](https://stackoverflow.com/questions/3577866/android-geopoint-with-lat-long-values)问题表明地理点计算不正确

# c# - 将现有程序集成到新的 GUI

> ID：10993077
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:35:15.940
> 
> 标签：c#, c++, windows, user-interface

我想将现有程序（例如：记事本、资源管理器等）集成到我要创建的新窗口中。目的是在 1 个窗口中有 2 个不同的程序。你知道这是否可能吗？如果是，我可以使用什么样的技术？（我可以在 Windows 7/Visual 中使用 C++、C#）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:40:39.573

如果你想添加一个外部程序，那么我建议你看看`[SetParent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541%28v=vs.85%29.aspx)`,`[ShowWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)`和`[SetWindowLong](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx)`. 理论是将您的窗口（或窗口中的控件）设置为另一个窗口/控件的父级。

# ruby - 如何使用 gsub 替换 ruby 中的多字节字符？

> ID：10993080
> 
> 赞同：2
> 
> 时间：2012-06-12T08:35:30.077
> 
> 标签：ruby, ruby-on-rails-3, mongodb

当记录包含多字节字符时，我在使用 Mongoid 在 MongoDB 中保存记录时遇到问题。这是字符串：

```
a="Chris \xA5\xEB\xAE\xDFe\xA5" 
```

我首先将其转换为 BINARY，然后`gsub`像这样：

```
a.force_encoding("BINARY").gsub(0xA5.chr,"oo") 
```

...效果很好：

```
=> "Chris oo\xEB\xAE\xDFeoo" 
```

但如果我使用，我似乎无法使用该`chr`方法`Regexp`：

```
a.force_encoding("BINARY").gsub(/0x....?/.chr,"")
NoMethodError: undefined method `chr' for /0x....?/:Regexp 
```

有同样问题的人吗？

非常感谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:11:30.463

你可以用插值来做到这一点

```
a.force_encoding("BINARY").gsub(/#{0xA5.chr}/,"") 
```

给

```
"Chris \xEB\xAE\xDFe" 
```

编辑：根据评论，这里有一个将二进制编码字符串转换为 ascii 表示并对该字符串执行正则表达式的版本

```
a.unpack('A*').to_s.gsub(/\\x[A-F0-9]{2}/,"")[2..-3] #=>"Chris " 
```

末尾的 [2..-3] 是去掉开头的 [" 和尾随的 "]

注意：要摆脱特殊字符，您也可以使用

```
a.gsub(/\W/,"") #=> "Chris" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T11:20:13.883

实际的字符串不包含文字字符 \xA5：这就是向您显示原本无法打印的字符的方式（类似于当字符串包含换行符时，ruby 会向您显示 \n）。

如果你想改变任何非 ascii 的东西，你可以这样做

```
a="Chris \xA5\xEB\xAE\xDFe\xA5"
a.force_encoding('BINARY').encode('ASCII', :invalid => :replace, :undef => :replace, :replace => 'oo') 
```

首先将字符串强制为二进制编码（您总是希望从字节对其编码有效的字符串开始。二进制始终有效，因为它可以包含任意字节）。然后它将其转换为 ASCII。通常这会引发错误，因为它不知道如何处理某些字符，但是我们传递的额外选项告诉它用字符 'oo' 替换无效/未定义的序列

# facebook - facebook facepile 只显示我的朋友

> ID：10993082
> 
> 赞同：0
> 
> 时间：2012-06-12T08:35:35.770
> 
> 标签：facebook, facepile

我想向所有使用我的应用程序的人展示。我试过这个facepile代码，但它只显示我的朋友。

```
<iframe id="fbusage" scrolling="no" allowTransparency="true" src="https://www.facebook.com/plugins/facepile.php?app_id=123&amp;amp;width=750&amp;amp;max_rows=1" style="border:none; overflow:hidden; width:750px; height: 60px;" frameborder="0"></iframe> 
```

如何在 iframe 中显示所有使用我的应用程序的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:50:09.587

好吧，这个插件只显示朋友可能是有原因的，这个原因可能被称为*隐私*......？

如果您不关心并且无论如何都想这样做——在这种情况下，请先*彻底*查看平台政策，如果允许的话——您可以自己生成这样的列表。只需从应用程序的数据库中读取存储的用户 ID 或其他任何内容，通过您认为最好的方式选择其中一些，然后输出一些显示其名称和图片的 HTML 代码。（图片可以通过 graph.facebook.com/userid/picture 显示*，*如果您的数据库中还没有存储用户名，则必须先使用 id 向 Graph API 发出请求。）

# php - 为什么“cat”参数给我 404 NOT FOUND http 错误？

> ID：10993083
> 
> 赞同：1
> 
> 时间：2012-06-12T08:35:37.443
> 
> 标签：php, wordpress

我对 wordpress 有一个非常奇怪的问题。我有这种页面：

```
http://www.example.it/page/4 
```

如果我访问：

```
http://www.example.it/page/4?cat=1 
```

我收到**错误 404 未找到**

如果我访问：

```
http://www.example.it/page/4?catt=1 
```

我可以正确地看到页面。

为什么 cat 参数返回这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:48:52.290

Cat 是 wordpress 在解析参数时在内部使用的参数。它实际上是在寻找这样的类别。

如果没有帖子将该类别与该类别 ID 关联，则会出现 404。

如果该类别确实存在，那么 wordpress 将根据您的设置将您重定向到页面或存档列表。

简而言之。Cat 保留为参数。

# c++ - 我可以从我的应用程序的浏览器控件中获取嵌入式 Flash ActiveX 控件的 HWND 吗？

> ID：10993085
> 
> 赞同：0
> 
> 时间：2012-06-12T08:35:44.647
> 
> 标签：c++, flash, com, activex, ole

似乎在浏览器中，Flash 控件使用了一种优化的绘图方式。在直接嵌入控件时我无法实现这一点（快速动画在我直接嵌入的控件中不稳定，而不是在浏览器中）。[我找到了一个实现优化绘图](http://lists.helixcommunity.org/pipermail/datatype-dev/2007-April/005497.html)的开源项目，但是它非常复杂（而且，非常依赖于整个项目，因此在我的项目中不容易重用）。

我想尝试使用一个 IE ActiveX 控件，加载一个嵌入 Flash 控件的 HTML，然后让这个控件的 HWND 做一些特定于应用程序的事情（已经在我的项目中实现）。这可能吗？如何？

# python - 使用 askopenfilename 打开和读取文件

> ID：10993089
> 
> 赞同：14
> 
> 时间：2012-06-12T08:36:00.827
> 
> 标签：python, tkinter

我有以下代码，我试图允许用户打开一个文本文件，一旦用户选择了它，我希望代码读取它（这不是一个完成的代码块，只是为了显示什么我追求）。

但是，我在使用 tkFileDialog.askopenfilename 并添加 'mode='rb'' 或使用如下代码并在产生错误时使用 read 时遇到了困难。

有谁知道我如何安排这样做，因为我不希望为每个项目（例如菜单和列表框）键入 Tkinter.'module'。Tkinter 的初学者，有点困惑！谢谢您的帮助！

```
import sys
from Tkinter import *
import tkFileDialog
from tkFileDialog import askopenfilename # Open dialog box

fen1 = Tk()                              # Create window
fen1.title("Optimisation")               #

menu1 = Menu(fen1)

def open():

    filename = askopenfilename(filetypes=[("Text files","*.txt")])
    txt = filename.read()
    print txt
    filename.close()

fen1.mainloop() 
```

显然我在这里遇到的错误是：

```
AttributeError: 'unicode' object has no attribute 'read' 
```

我不明白如何使用 askopen 也无法读取我正在打开的文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T08:55:31.683

您的`filename`示例代码中的 就是 - 一个字符串，指示您要打开的文件的名称。您需要将其传递给`open()`方法以返回名称的文件句柄。然后您可以从文件句柄中读取。

这是一些直接在 Python 解释器中运行的快速而肮脏的代码。（你*也可以*在脚本中运行它，但我真的很喜欢[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)接口，因为它可以快速尝试。你也可能喜欢它。）

```
$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import Tkinter
>>> from tkFileDialog import askopenfilename
>>> root = Tkinter.Tk() ; root.withdraw()
''
>>> filename = askopenfilename(parent=root)
>>> filename
'/tmp/null.c'
>>> f=open(filename)
>>> f.read()
'#include<stdio.h>\n\nint main()\n{\n  for(;NULL;)\n    printf("STACK");\n\n  return 0;\n}\n\n'
>>> f.close()
>>> 
```

请特别注意，在读取文件时没有任何特定于 Tkinter 的内容——对话框只是为您提供文件名。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T08:57:13.700

`askopenfilename`只返回一个文件名，你想要的是`askopenfile`它接受一个`mode`参数并为你打开文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T08:56:23.310

您的错误是您的函数的名称。我只是改变`def open()`了`def open1()`它，它的工作原理。

```
def open1():

    filename = askopenfilename(parent=fen1)
    print(filename)
    f = open(filename)
    txt = f.read()
    print txt
    f.close() 
```

# php - 如何处理 MySQL 锁？

> ID：10993090
> 
> 赞同：0
> 
> 时间：2012-06-12T08:36:07.613
> 
> 标签：php, mysql, database, transactions, phpmyadmin

我的要求是，用户可以点击并使用该交易。一项交易只能由一个成员使用，因此当用户尝试使用交易时，我会锁定表并解锁它。因此，如果两个用户点击并尝试使用该交易，它将形成一个队列，它将阻止两个用户使用该交易。

代码就像

```
LOCK TABLES deal WRITE;
//MySQL queries and my php code goes here.
UNLOCK TABLES; 
```

现在的问题是，如果我的 php 代码在 lock 和 unlock 之间发生了一些问题，表会被永久锁定吗？无论如何我可以设置锁定表的最长时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:48:05.427

如果客户端会话的连接终止，无论是正常还是异常，服务器都会隐式释放会话持有的所有表锁。

[资源](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:49:01.333

如果我在你的位置，我会创建一个名为locked_deals 的数据库表。它将有一个名为 deal_id 的列。当用户选择一个交易时，它的 deal_id 将被插入到locked_deals 表中。当下一个用户点击同一个交易时，它会首先检查 deal_id 是否在锁定表中。如果是，则不允许用户选择交易。最后，当一切正常时，我们可以在进程结束时从锁表中删除 lock_id。对于由于 php 代码中的任何异常而卡在表中的 lock_ids - 我们可以创建一个后台服务，每 n 分钟清理一次 lock_deals 表中卡住的 ids（在最后 n 分钟内一直被卡住）。希望能帮助到你。

# iphone - 澄清目标 C 中的属性

> ID：10993091
> 
> 赞同：2
> 
> 时间：2012-06-12T08:36:09.717
> 
> 标签：iphone, objective-c, ios, properties

对不起这个简单的问题。
当我在类范围内`h file`但在类范围**之外**`@interface`看到属性的定义时，这是什么意思？

```
@property (nonatomic, readonly) RMMapContents *mapContents; 
```

这是代码：

```
@class RootViewController;
@class RMMapContents;

@interface MapTestbedAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;

    //MAIN VIEW
    //==============

    RootViewController *rootViewController;

    // NETWORK DATA
    // =============

    NSMutableArray  *photoTitles;         // Titles of images
    NSMutableArray  *photoSmallImageData; // Image data (thumbnail)
    NSMutableArray  *photoURLsLargeImage; // URL to larger image
    NSMutableData *receivedData;
    NSURLConnection *theConnection;
    NSURLRequest *request;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet RootViewController *rootViewController;
@property (nonatomic, readonly) RMMapContents *mapContents;

@end 
```

在一个函数中，我看到了这一行：

```
- (void)foo:(xyz *)abc{
  ..
  RMMapContents *mapContents = [self mapContents];
  ..
} 
```

因此，从 C++ 中获取它，它`mapContents`似乎不是全局范围的 var（毕竟，这就是他们称它们为属性的原因，对吗？），但是在函数内部再次定义相同的名称是不是有点奇怪？

我希望有人可以在这里澄清一点。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:19:00.140

@interface 块的范围扩展到 @end 关键字，并且不限于大括号 {}。

所以@property 声明非常位于@interface 的范围内，就像cli_hlt 正确回答一样，它就像mapContents 属性的setter 和getter 方法的替代品。

因此名为 mapContents 的属性将具有如下所示的 setter 和 getter：

```
- (void)setMapContents; //setter

- (RMMapContents *)mapContents; //getter 
```

并且可以使用以下方法从类中访问：

```
[self setMapContents:newContents]; 
```

和

```
RMMapContents *contents = [self mapContents]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:45:36.480

嗯，属性不仅仅是一个变量。属性是一个变量加上它的 setter 和 getter 方法。属性通常被称为由变量**支持**，该变量通常（但不总是）与属性本身具有相同的名称。

所以基本上有三种情况：

1.  开发人员重新定义了支持变量，在实现的开始处寻找类似`@synthesize mapContents=mapContents_`的内容 -> 没有问题。

2.  编译器将变量定义为您现在没有但不等于 `mapContents`-> 没问题。

3.  属性支持变量确实称为“ `mapContents`”，因此本地定义隐藏了全局定义（在此处查找编译器警告）。但是通过调用`[self mapContents]`你不会访问全局变量，而是调用 getter，而 getter 又会访问类变量（因为那时本地`mapContents`超出范围）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:45:07.090

global var mapContents 是只读的，在 foo 函数中，创建一个新指针，然后您可以更改内部 var 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:31:23.987

在您的类中寻找一个方法，其名称`mapContents`将返回您的`RMMapContents`类的初始化。

基本上，这一行 `RMMapContents *mapContents = [self mapContents];`表示使用方法初始化`RMMapContents`调用的实例。`mapContens``mapContents`

# ruby-on-rails - Rails 3 选择包含

> ID：10993095
> 
> 赞同：0
> 
> 时间：2012-06-12T08:36:27.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有真正的问题得到解决。我有两种不同的用户模型（志愿者和老年人），我想将它们联系起来。我已经建立了一个 habtm 关系，并且可以加载，例如，一个附有高级/高级的志愿者。但我想过滤加载了哪些属性。你怎么能做到这一点？（我想这样做是为了安全，但我什至不确定这是一个问题吗？）

我知道 include with select 不起作用，我一直在尝试 join 但无法使其正常工作。

这就是我为志愿者加载所有高级属性的方式

```
class VolunteersController < ApplicationController

    def index
        @volunteer = Volunteer.select(Volunteer::PROFILE_COLUMNS).find(current_volunteer)
    end

end 
```

楷模：

```
class Volunteer < ActiveRecord::Base
    has_and_belongs_to_many :seniors
    ...
end

class Seniors < ActiveRecord::Base
    has_and_belongs_to_many :volunteers
    ...
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:52:44.827

你可以试试：

```
@volunteer = Volunteer.find(current_volunteer, 
:select => Volunteer::PROFILE_COLUMNS, 
:joins => "left outer join seniors on seniors.id = volunteers.senior_id") 
```

虽然没有测试。[在http://www.fortytwo.gr/blog/18/9-Essential-Rails-Tips](http://www.fortytwo.gr/blog/18/9-Essential-Rails-Tips)有更好的解释

# mysql - MySQL 在“选择”时如何使用内存？

> ID：10993097
> 
> 赞同：1
> 
> 时间：2012-06-12T08:36:51.080
> 
> 标签：mysql, memory, select

MySQL 在“选择”时如何使用内存？MySQL只能加载选定的列并且不会在其余列上浪费任何内存是对的吗？

例如，我有一张桌子`1.article ID, 2.article content, 3.publish date, 4\. edit time, 5\. author ID, 6.with_image (binary, 1:yes, image attached, 0:no image).`

文章内容是var(5000)，实际上平均大小在2000左右。

以这种方式保留一张桌子是个好主意吗？我应该将它与 article_ID 和 article_content 表分开吗？

我的想法是（如果）MySQL 只能加载选定的列，并且不会在其余列上浪费任何内存。然后我将使用`SELECT article_id,author_id,publish_date,edit_time FROM thistable WHERE author_id=requirement ORDER BY publish_date DESC,edit_time DESC limit 50`来获取article_id 列表。然后使用SELECT article,article_id WHERE article_id=列表，得到最终结果。

我在某种程度上错了吗？应该修复什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:41:09.713

对我来说看起来不错-是的，查询只会从表中检索所需的列-我不是 MySql 专家，但它可能会尝试缓存尽可能多的数据库，因此您无需担心内存服务器端。客户端将只接收查询的数据（查询在服务器上执行，结果通过网络传回）

除非有充分的理由，否则您不需要将表一分为二。通常在单个表上有一堆列是将表重构为多个表的原因，但目前列数看起来不错

# single-sign-on - SSO 网络和票证会话

> ID：10993106
> 
> 赞同：0
> 
> 时间：2012-06-12T08:38:13.757
> 
> 标签：single-sign-on

我正在为我的公司开发 SSO Web 系统。当人们想要访问应用程序时，它会将用户重定向到 SSO 服务器（Web 应用程序）上，从而将经过身份验证的用户保存在内存中。SSO 服务器然后将用户重定向到正在创建自己的会话的应用程序。

问题是当用户在应用程序上花费大量时间时，SSO 上的会话就会丢失。

你有解决这个问题的想法吗？

我的 SSO 应用程序是一个 ASP .NET 应用程序，其他应用程序可能在 ASP .NET 或 ASP .NET MVC3 中。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:48:16.277

您需要通过观察用户的典型使用模式来设置 WebAgent 的超时值。

那么您目前如何处理用户的 SiteMinder 会话超时..？理想情况下，您将使用重定向 URL 到通知用户会话已终止等的自定义页面。

# java - 无法使用 HTTP 客户端传输图像

> ID：10993115
> 
> 赞同：0
> 
> 时间：2012-06-12T08:38:56.970
> 
> 标签：java, arrays, image, http, byte

我有一个图像字节数组，我需要使用 HTTP 客户端将其发送到服务器上的 servlet。我们知道如何发送正常的文本数据，但无法发送图像数据。

我们使用以下代码从图像字节数组创建了一个字符串数据：

```
String imageData = new String(imagebyteArr); 
```

并通过 HTTP 客户端将上述内容发送`String`到 servlet，但是当我们再次使用以下代码从字符串中检索字节数组时：

```
imageByteArr = imageData.toByteArray(); 
```

生成的字节数组被修改为 1，其中 -127 被替换为 63。

如何解决这种意外行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:44:41.580

字符串被编码。您有 2 个可能性：将二进制数据编码为 base64（例如）发送 base64 并在服务器端解码或使用 PUT 请求进行二进制上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:44:09.010

我完全**不鼓励**您使用图像字节数组并转换为，`String`因为您将不得不担心字符编码。

要做的一件事是使用 直接发送字节数组[`ByteArrayEntity`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/entity/ByteArrayEntity.html)，如下所示：

```
HttpPost post = new HttpPost(url);
post.setEntity(new ByteArrayEntity(bytes));
post.setHeader("Content-type", ""application/octet-stream"); 
```

*不要忘记`Content-Type`适当地设置正确的图像。*

# python - 如何在 Mechanize/Python 中使用 xpath 选择表单？

> ID：10993122
> 
> 赞同：0
> 
> 时间：2012-06-12T08:39:38.293
> 
> 标签：python, xpath, screen-scraping, mechanize

我正在使用 mechanize/Python 访问有状态的 Web 服务。它确认请求的引用者和我的浏览器的 cookie。由于该站点的大多数表单都没有名称属性，因此我厌倦了选择表单。

我想使用 xpath`//*[@id="top"]/div[3]/form/input[@type="submit"]`并提交它。您对使用 xpath 选择表单有什么想法吗？

# css - Bootstrap selector dropdown-menu.pullright not working?

> ID：10993128
> 
> 赞同：1
> 
> 时间：2012-06-12T08:40:01.757
> 
> 标签：css, twitter-bootstrap

The Bootstrap .dropdown-menu.pull-right selector doesn't seem to work (the code is in navbar.less, lines 330 to 341).

As you can see on [this screenshot](http://www.mediafire.com/?9y64l2494b62hyl), the up caret is not aligned to the right.

My dropdown-menu class :

```
<ul class="dropdown-menu pull-right"> 
```

When I change line 286 to

```
right:10px; 
```

it works fine.

Any idea on how to fix this ?

Here is my html code:

```
 <div id="USE_dropdown_signin" class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <i class="icon-user"></i> Sign in
        </a>
        <ul class="dropdown-menu pull-right">
          <form action="" method="post" accept-charset="UTF-8">{% csrf_token %}
            <input id="USE_signin_username" type="text" name="signin[username]" size="30" placeholder="User Name"/>
            <input id="USE_signin_password" type="password" name="signin[password]" size="30" placeholder="Password"/>
            <input id="USE_signin_remember_me" type="checkbox" name="signin[remember_me]" value="1" />
            <label id="USE_signin_remember_me_label" class="string optional" for="signin_remember_me"> Remember me</label>
            <input id="USE_signin_submit" class="btn btn-primary" type="submit" name="commit" value="Sign in" />
          </form>
        </ul>
      </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:30:10.260

From your screenshot, I would assume that you have used .btn-group class to make your white log in button.

Assign "pull-right" class to the div element containing btn-group class instead of the ul element.

Correct Html markup

```
 <div class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <i class="icon-user"></i> Username
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li class="divider"></li>
          <li><a href="#">Sign Out</a></li>
        </ul>
      </div> 
```

Based on what I have analyzed on the twitter bootstrap, you will require the following css to work.

```
.navbar .pull-right .dropdown-menu, .navbar .dropdown-menu.pull-right {
    right: 0;
    left: auto;
}
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}
.pull-right { float: right; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:31:02.740

Here is what I didn't understand:

1) The boostrtap selector in navbar.less line 329-330

```
 .navbar .nav.pull-right .dropdown-menu,
    .navbar .nav .dropdown-menu.pull-right {} 
```

didn't match my dropdown-menu because I don't have the parent .nav class in my hierarchy.

2) My .dropdown-menu has the class .pull-right, and this doesn't match:

```
 .navbar .dropdown-menu:before .pull-right {
     left: auto;
     right: 9px;
    } 
```

but this does:

```
 .navbar .pull-right .dropdown-menu:before {
      left: auto;
      right: 9px;
    } 
```

3) I couldn't debug correctly until I removed the -yui-compress option of the less compiler ;-)

Thanks for everything!

# marionette - 从子视图冒泡的事件无法按预期工作

> ID：10993130
> 
> 赞同：0
> 
> 时间：2012-06-12T08:40:13.550
> 
> 标签：marionette

我想使用集合视图的冒泡行为，但它似乎不起作用。

一点上下文：我显示一个模式`AddPartFromPurchase`，显示一个填充了 collectionView 的表。这很好用。

当用户单击一行时，itemview 会触发`purchase:chosen`事件，因此根据文档，我希望集合视图接收`itemview:purchase:chosen`事件，但不会触发此类事件：既不是 in 也不`AddPartFromPurchase`是`Purchases`. :(

这是示例代码。

```
AddPartFromPurchase = Backbone.Marionette.ItemView.extend
  模板：“页面/车辆/修改/add_part_from_purchase”

  初始化：（属性）->
    @purchases = 属性.purchases

  渲染：->
    视图=新购买（el：@$（'tbody'），收藏：@purchases）
    @bindTo（查看，'全部'，@foo）
    view.render()

  foo: (event, foo, bar, baz)->
    console.log（事件，foo，bar，baz）

购买 = Backbone.Marionette.ItemView.extend
  模板：'页面/车辆/修改/购买'
  标签名：'tr'

  事件：
    “点击”：“选择购买”

  选择购买：->
    @trigger('购买：选择'，@model)
    错误的

  序列化数据：->
    购买：@model
    部分：@model.get('part')

购买 = Backbone.Marionette.CollectionView.extend
  itemView: 购买

  初始化：->
    @bindTo(@, '全部', @foo)

  foo: (event, foo, bar, baz)->
    console.log（事件，foo，bar，baz）

```

也许我做错了，我`onRender`对`el`在`initialize`.

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:56:24.453

基于评论流的回答：请确保您在引入此功能时使用的是 v0.7.6 或更高版本。

# android - 如何在sqlite中创建有关系的数据库？

> ID：10993134
> 
> 赞同：0
> 
> 时间：2012-06-12T08:40:29.150
> 
> 标签：android, sqlite

我创建了 2 个表，我希望这 2 个表有关系。我将创建更多表，它们也应该有关系，但是，我不知道如何实现它。提前致谢。

```
private static final String DATABASE_CREATE = "create table " 
            + CustomerTable
            + "(" 
            + COLUMN_ID + " integer primary key autoincrement, " 
            + COLUMN_CATEGORY + " text not null, " 
            + COLUMN_SUMMARY + " text not null," 
            + COLUMN_DESCRIPTION
            + " text not null" 
            + ");";

    private static final String DATABASE_TABLE = "create table " 
            + OrderTable
            + "("
            + COLUMN_ORDER_ID + " integer primary key autoincrement, "
            + COLUMN_FOOD+ text not null," , " 
            + COLUMN_BOOK + " text not null, " 
            + COLUMN_CAR + " text not null," 
            + ");"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:49:21.503

这取决于您所针对的 Android 版本。外键是关联表的机制，但是直到 v3.6.19 出现在 Android 2.2 中的 v3.6.19 才被引入到 SQlite，根据这个：[https ://stackoverflow.com/a/4377116/201113](https://stackoverflow.com/a/4377116/201113)

如果您的应用要在运行 < Android 2.2 的设备上运行，您将需要使用触发器。我使用这个网站创建了一些触发器，[http://rcs-comp.com/site/index.php/view/Utilities-SQLite_foreign_key_trigger_generator](http://rcs-comp.com/site/index.php/view/Utilities-SQLite_foreign_key_trigger_generator)。您只需在创建数据库时执行这些操作。

# r - 将矩阵添加到 R 中的多行标题

> ID：10993135
> 
> 赞同：1
> 
> 时间：2012-06-12T08:40:37.140
> 
> 标签：r, header, matrix, multiline, fixed-width

我有一个具有固定宽度格式的正好 4 行的头文件（使用 MASS 包中的 write.matrix 函数保存）。

现在我想用上面创建的头文件创建一个新的矩阵。是否可以在 R 中向矩阵添加固定的多行标题（例如“文本”）？

一个例子：我有一个像这样的标题

```
AB
CDEF 123456
GHIJK 789     101112
LMNOP 
```

然后我想在第一列中创建一个带有日期的矩阵，然后在第二列中创建一个数据（来自另一个文件），例如

```
892201 0.1
892202 0.8 
```

等等。注意：它必须是描述的格式，因为程序只是读取上面解释的固定宽度格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:46:45.620

`write.table()`您可以使用带参数的函数将第二组数据写入现有文件`append = TRUE`。

如果我有`foo.txt`带有您显示的标题的文件，那么我可以通过首先创建要附加的数据对象来向该文件添加一些日期和其他数据：

```
dat <- data.frame(dates = Sys.Date() + 0:4, data = seq(0.1, 0.5, by = 0.1))

> dat
       dates data
1 2012-06-12  0.1
2 2012-06-13  0.2
3 2012-06-14  0.3
4 2012-06-15  0.4
5 2012-06-16  0.5 
```

以下内容将不附加`dat`任何无关的标题或行名到现有的头文件中

```
write.table(dat, "foo.txt", append = TRUE, col.names = FALSE, row.names = FALSE) 
```

`foo.txt`现在看起来像这样：

```
$ cat foo.txt
AB
CDEF 123456
GHIJK 789     101112
LMNOP
2012-06-12 0.1
2012-06-13 0.2
2012-06-14 0.3
2012-06-15 0.4
2012-06-16 0.5 
```

# objective-c - Objective-c 枚举对象到字符串

> ID：10993138
> 
> 赞同：5
> 
> 时间：2012-06-12T08:40:40.993
> 
> 标签：objective-c, enums

> **可能重复：**
> [将objective-c typedef转换为其等效的字符串](https://stackoverflow.com/questions/1094984/convert-objective-c-typedef-to-its-string-equivalent)

我有一个声明如下的枚举：

```
typedef enum MODE {
    FRAMED, HALFPAGED, FULLPAGED
} MODE; 
```

有什么方法可以将 FRAMED/HALFPAGED/FULLPAGED 转换为字符串。

我知道 C++ 有能力通过使用：

```
static String^ GetName(
    Type^ enumType,
    Object^ value
) 
```

Objective-C 是否有等价物？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:51:55.730

您可以实现这样的方法：

```
- (NSString*)modeToString:(MODE)mode{
    NSString *result = nil;
    switch(mode) {
        case FRAMED:
            result = @"FRAMED";
            break;
        case HALFPAGED:
            result = @"HALFPAGED";
            break;
        case FULLPAGED:
            result = @"FULLPAGED";
            break;
        default:
            [NSException raise:NSGenericException format:@"Unexpected MODE."];
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:51:15.983

据我所知，没有内置的方法可以满足您的要求。

我的方法是这样的：

```
- (NSString *)modeString:(MODE)mode
{
    if(mode == FRAMED)
    {
        return @"FRAMED";
    }
    else if(mode == HALFPAGED)
    {
        return @"HALFPAGED";
    }

    return @"FULLPAGED";
} 
```

# uml - 在 UML 中描述类之间的朋友关系

> ID：10993139
> 
> 赞同：14
> 
> 时间：2012-06-12T08:40:41.163
> 
> 标签：uml, friend

我有两个班级 A 和 B，其中 B 是 A 的朋友。

如何在 UML 中显示这一点？

可以使用依赖关系显示它，然后像下面这样在关系上添加注释吗？

```
 <<Friend>> 
```

B ------------------> A

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T08:51:15.483

是的，这是完全有效的。对于我自己关于 UML 的问题，我发现[这个网站](http://www.csci.csusb.edu/dick/samples/uml1b.html)特别有用。

# c# - 使用实体框架按受约束表中的列进行过滤

> ID：10993140
> 
> 赞同：0
> 
> 时间：2012-06-12T08:40:43.213
> 
> 标签：c#, asp.net, entity-framework

我的应用程序使用 asp.net 4、C# 和实体框架。我的数据库包含一个有很多的表`Companies`，`Locations`而这又有很多`Devices`。A`Company`被键入到当前登录的 aspnet_user。

我使用网格视图来显示和`Locations`编辑`Devices`单个`Company`. 这很容易实现，`Locations`因为它们有直接链接到`Company`...

```
LocationListEntityDataSource.AutoGenerateWhereClause = true;
LocationListEntityDataSource.WhereParameters.Clear();
LocationListEntityDataSource.WhereParameters.Add("CompanyGuid", System.Data.DbType.Guid, Tools.Tools.getCompanyGuidString()); 
```

但是我无法弄清楚如何过滤`Devices`，`Company`因为它们只有一个指向`Location`. 我曾希望使用类似于以下内容的东西，但我得到一个异常，指出`Location.CompanyGuid`找不到......

```
DeviceListEntityDataSource.AutoGenerateWhereClause = true;
DeviceListEntityDataSource.WhereParameters.Clear();
DeviceListEntityDataSource.WhereParameters.Add("Location.CompanyGuid", System.Data.DbType.Guid, Tools.Tools.getCompanyGuidString()); 
```

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:39:52.170

考虑公司与位置以及设备具有一对多关系。

当你把一个虚拟属性`ICollection<Device> Devices;`放到`Company class`. 这将只是一个导航属性。这不会在公司表中为设备创建任何列。然后，您在 Device 模型中有虚拟财产 Company comapany 和 FK int CompanyId。这只会在`Device`表格中添加一个字段，不会浪费太多空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:42:24.107

我发现公司可以通过使用以下代码手动绑定数据来过滤设备：

```
 protected void Page_Load(object sender, EventArgs e)
      {
           (SalesSQLEntities db = new SalesSQLEntities())
           {
                // Get user ID
                System.Guid UserID = Tools.Tools.getCompanyGuid();

                // Find all transactions of this company
                var devItemList = (from dev in db.Devices
                                       where dev.Location.CompanyGuid == UserID
                                       select dev).ToList();

                DeviceList.DataSource = devItemList;
                DeviceList.DataBind();
            }
      } 
```

我建议这是比在已经具有间接链接的表之间创建直接链接更好的设计。

更少的链接导致更简单的维护、更小的数据库（可以忽略不计）和更清晰的图表。

有异议吗？

# javascript - javascript 幻灯片暂停悬停

> ID：10993141
> 
> 赞同：0
> 
> 时间：2012-06-12T08:40:45.957
> 
> 标签：javascript, slider

我的问题很简单，有些东西可以帮助很多人，

我希望我的幻灯片在有人悬停在它上面时不会停止，

通过访问 .js (nivooSlider.js) 并添加到选项列表中，我能够为我的一个站点做到这一点：将“false”值添加到 pauseOnHover 选项 (pauseOnHover: false,) 并且做到了！...

现在我也试图在我的另一个当前使用 rokSlider 的网站中获得相同的结果，默认情况下它没有该选项，所以我想知道，如果我转到选项列表并简单地添加这个选项+价值……你认为这行得通吗？

问候

```
var Slideshow = new Class({

    version: '3.0.3',

    options: {
        captions: true,
        showTitleCaption: true,
        classes: ['prev', 'next', 'active'],
        duration: [2000, 4000],
        path: '/',
        navigation: false,
        pan: 100,
        resize: true,
        thumbnailre: [/\./, 't.'],
        transition: Fx.Transitions.Sine.easeInOut,
        type: 'fade',
        zoom: 50,
        loadingDiv: true,
        removeDiv: true
    },

    styles: {
        caps: {
            div: {
                opacity: 0,
                position: 'absolute',
                width: '100%',
                margin: 0,
                left: 0,
                bottom: 0,
                height: 40,
                background: '#333',
                color: '#fff',
                textIndent: 0       
            },

            h2: {
                color: 'red',
                padding: 0,
                fontSize: '80%',
                margin: 0,
                margin: '2px 5px',
                fontWeight: 'bold'
            },

            p: {
                padding: 0,
                fontSize: '60%',
                margin: '2px 5px',
                color: '#eee'
            }
        }   
    },

    initialize: function(el, options) {
        this.setOptions($merge({
            onClick: this.onClick.bind(this)
        }, options));

        if(!this.options.images) return;
        this.options.pan = this.mask(this.options.pan);
        this.options.zoom = this.mask(this.options.zoom);

        this.el = $(el).empty();

        this.caps = {
            div: new Element('div', {
                styles: this.styles.caps.div,
                'class': 'captionDiv'
            }),
            h2: new Element('h2', {
                styles: this.styles.caps.h2,
                'class': 'captionTitle'
            }),
            p: new Element('p', {
                styles: this.styles.caps.p,
                'class': 'captionDescription'
            })
        };

        this.fx = [];

        var trash = new ImageLoader(this.el, this.options.images, {
            loadingDiv: this.options.loadingDiv,
            onComplete: this.start.bind(this),
            path: this.options.path,
            removeDiv: this.options.removeDiv
        });
    },

    start: function() {
        this.imgs = $A(arguments);
        this.a = this.imgs[0].clone().set({         
            styles: {
                display: 'block',
                position: 'absolute',
                left: 0,
                'top': 0,
                zIndex: 1
            }
        }).injectInside(this.el);

        var obj = this.a.getCoordinates();
        this.height = this.options.height || obj.height;
        this.width = this.options.width || obj.width;

        this.el.setStyles({
            display: 'block',
            position: 'relative',
            width: this.width
        });

        this.el.empty();
        this.el.adopt((new Element('div', {
            events: {
                'click': this.onClick.bind(this)
            },
            styles: {
                display: 'block',
                overflow: 'hidden',
                position: 'relative',
                width: this.width,
                height: this.height
            }
        })).adopt(this.a));

        this.resize(this.a, obj);
        this.b = this.a.clone().setStyle('opacity', 0).injectAfter(this.a);

        this.timer = [0, 0];
        this.navigation();

        this.direction = 'left';
        this.curr = [0,0];

        $(document.body).adopt(new Element('div', {
            id: 'hiddenDIV',
            styles: {
                visibility: 'hidden',
                height: 0,
                width: 0,
                overflow: 'hidden',
                opacity: 0
            }
        }));
        this.loader = this.imgs[0];
        $('hiddenDIV').adopt(this.loader);
        this.load();
    },

    load: function(fast) {
        if ($time() > this.timer[0]) {
            this.img = (this.curr[1] % 2) ? this.b : this.a;
            this.img.setStyles({
                opacity: 0,
                width: 'auto',
                height: 'auto',
                zIndex: this.curr[1]
            });

            var url = this.options.images[this.curr[0]].url;
            this.img.setStyle('cursor', (url != '#' && url != '') ? 'pointer' : 'default');

            this.img.setProperties({
                src: this.loader.src,
                title: this.loader.title,
                alt: this.loader.alt
            });

            this.resize(this.img, this.loader);

            if(fast){
                this.img.setStyles({
                    top: 0,
                    left: 0,
                    opacity: 1
                });

                this.captions();
                this.loaded();          
                return;
            }

            this.captions();
            this[this.options.type.test(/push|wipe/) ? 'swipe' : 'kens']();
            this.loaded();
        } else {
            this.timeout = this.load.delay(100, this);
        }
    },

    loaded: function() {
        if(this.ul) {
            this.ul.getElements('a[name]').each(function(a, i) {
                a[(i === this.curr[0] ? 'add' : 'remove') + 'Class'](this.options.classes[2]);
            }, this);
        }

        this.direction = 'left';
        this.curr[0] = (this.curr[0] + 1) % this.imgs.length;
        this.curr[1]++;

        this.timer[0] = $time() + this.options.duration[1] + (this.options.type.test(/fade|push|wipe/) ? this.options.duration[0] : 0);     
        this.timer[1] = $time() + this.options.duration[0];

        this.loader = this.imgs[this.curr[0]];
        $('hiddenDIV').empty().adopt(this.loader);
        this.load();
    },

    kens: function() {
        this.img.setStyles({
            bottom: 'auto',
            right: 'auto',
            left: 'auto',
            top: 'auto'
        });

        var arr = ['left top', 'right top', 'left bottom', 'right bottom'].getRandom().split(' ');
        arr.each(function(p) {
            this.img.setStyle(p, 0);
        }, this);

        var zoom = this.options.type.test(/zoom|combo/) ? this.zoom() : {};
        var pan = this.options.type.test(/pan|combo/) ? this.pan(arr) : {};

        this.fx.push(this.img.effect('opacity', {duration: this.options.duration[0]}).start(1));
        this.fx.push(this.img.effects({duration: this.options.duration[0] + this.options.duration[1]}).start($merge(zoom, pan)));
    },

    zoom: function() {
        var n = Math.max(this.width / this.loader.width, this.height / this.loader.height);
        var z = (this.options.zoom === 'rand') ? Math.random() + 1 : (this.options.zoom.toInt() / 100.0) + 1;

        var eh = Math.ceil(this.loader.height * n);
        var ew = Math.ceil(this.loader.width * n);

        var sh = (eh * z).toInt();
        var sw = (ew * z).toInt();

        return {height: [sh, eh], width: [sw, ew]};
    },

    pan: function(arr) {
        var ex = this.width - this.img.width, ey = this.height - this.img.height;
        var p = this.options.pan === 'rand' ? Math.random() : Math.abs((this.options.pan.toInt() / 100) - 1);
        var sx = (ex * p).toInt(), sy = (ey * p).toInt();

        var x = this.width / this.loader.width > this.height / this.loader.height;
        var obj = {};
        obj[arr[x ? 1 : 0]] = x ? [sy, ey] : [sx, ex];
        return obj;
    },

    swipe: function() {
        var arr, p0 = {}, p1 = {}, x;
        this.img.setStyles({
            left: 'auto',
            right: 'auto',
            opacity: 1
        }).setStyle(this.direction, this.width);

        if(this.options.type === 'wipe') {
            this.fx.push(this.img.effect(this.direction, {
                duration: this.options.duration[0],
                transition: this.options.transition
            }).start(0));           
        } else {
            arr = [this.img, this.curr[1] % 2 ? this.a : this.b];
            p0[this.direction] = [this.width, 0];
            p1[this.direction] = [0, -this.width];

            if(arr[1].getStyle(this.direction) === 'auto') {
                x = this.width - arr[1].getStyle('width').toInt();

                arr[1].setStyle(this.direction, x);
                arr[1].setStyle(this.direction === 'left' ? 'right' : 'left', 'auto');

                p1[this.direction][0] = x;
            }

            this.fx.push(new Fx.Elements(arr, {
                duration: this.options.duration[0],
                transition: this.options.transition
            }).start({
                '0': p0,
                '1': p1
            }));
        }
    },

    captions: function(img) {
        img = img || this.img;
        if(!this.options.captions || (!img.title && !img.alt)) return;

        this.el.getFirst().adopt(this.caps.div.adopt(this.caps.h2, this.caps.p));

        (function () {
            if (this.options.showTitleCaption) this.caps.h2.setHTML(img.title);
            this.caps.p.setHTML(img.alt);
            this.caps.div.setStyle('zIndex', img.getStyle('zIndex')*2 || 10);

            this.capsHeight = this.capsHeight || this.options.captionHeight || this.caps.div.offsetHeight;

            var fx = this.caps.div.effects().set({'height': 0}).start({
                opacity: 0.7,
                height: this.capsHeight
            });

            (function(){
                fx.start({
                    opacity: 0,
                    height: 0
                });
            }).delay(1.00*(this.options.duration[1] - this.options.duration[0]));
        }).delay(0.75*(this.options.duration[0]), this);
    },

    navigation: function() {
        if(!this.options.navigation) return;
        var i, j, atemp;
        var fast = this.options.navigation.test(/fast/) ;
        this.ul = new Element('ul');
        var li = new Element('li'), a = new Element('a');

        if (this.options.navigation.test(/arrows/)) {
            this.ul.adopt(li.clone()
                .adopt(a.clone()
                    .addClass(this.options.classes[0])
                    .addEvent('click', function() {
                        if (fast || $time() > this.timer[1]) {  
                            $clear(this.timeout);

                            // Clear the FX array only for fast navigation since this stops combo effects
                            if(fast) {
                                this.fx.each(function(fx) {
                                    fx.time = 0;
                                    fx.options.duration = 0;
                                    fx.stop(true);
                                });
                            }

                            this.direction = 'right';
                            this.curr[0] = (this.curr[0] < 2) ? this.imgs.length - (2 - this.curr[0]) : this.curr[0] - 2;
                            this.timer = [0];

                            this.loader = this.imgs[this.curr[0]];
                            this.load(fast);
                        }
                    }.bind(this))
                )
            );
        }

        if (this.options.navigation.test(/arrows\+|thumbnails/)) {
            for (i = 0, j = this.imgs.length; i < j; i++) {
                atemp = a.clone().setProperty('name', i);
                if (this.options.navigation.test(/thumbnails/)) atemp.setStyle('background-image', 'url(' + this.imgs[i].src + ')');
                if(i === 0) a.className = this.options.classes[2];

                atemp.onclick = function(i) {
                    if(fast || $time() > this.timer[1]) {
                        $clear(this.timeout);

                        if (fast) {
                            this.fx.each(function(fx) {
                                fx.time = 0;
                                fx.options.duration = 0;
                                fx.stop(true);
                            });
                        }

                        this.direction = (i < this.curr[0] || this.curr[0] === 0) ? 'right' : 'left';
                        this.curr[0] = i;
                        this.timer = [0];           

                        this.loader = this.imgs[this.curr[0]];                          
                        this.load(fast);
                    }
                }.pass(i, this);

                this.ul.adopt(li.clone().adopt(atemp));
            }
        }

        if (this.options.navigation.test(/arrows/)) {
            this.ul.adopt(li.clone()
                .adopt(a.clone()
                    .addClass(this.options.classes[1])
                    .addEvent('click', function() {
                        if (fast || $time() > this.timer[1]) {  
                            $clear(this.timeout);

                            // Clear the FX array only for fast navigation since this stops combo effects
                            if (fast) {
                                this.fx.each(function(fx) { 
                                    fx.time = 0;
                                    fx.options.duration = 0;
                                    fx.stop(true); 
                                });
                            }

                            this.timer = [0];                   

                            this.load(fast);
                        }
                    }.bind(this))
                )
            );
        }

        this.ul.injectInside(this.el);
    },

    onClick: function(e) {
        e = new Event(e).stop();
        var cur = this.curr[1] % this.imgs.length;
        var index = this.curr[1] == 0 ? 1 : cur == 0 ? this.imgs.length : cur;
        var url = this.options.images[index - 1].url;
        if(url == '#' || url == '') return;
        window.location.href = url;
    },

    mask: function(val, set, lower, higher) {
        if(val != 'rand') {
            val = val.toInt();
            val = isNaN(val) || val < lower || val > higher ? set : val;
        }

        return val;
    },

    resize: function(obj, to) {
        var n;
        if(this.options.resize) {
            n = Math.max(this.width / to.width, this.height / to.height);
            obj.setStyles({
                height: Math.ceil(to.height*n),
                width: Math.ceil(to.width*n)
            });
        }
    }
});
Slideshow.implement(new Options);

/**

 * 
 * 
 *
 */
var ImageLoader = new Class({

    version:'.5-olmo-ver',

    options: {
        loadingDiv    : false,
        loadingPrefix : 'loading images: ',
        loadingSuffix : '',
        path          : '',
        removeDiv     : true
    },

    initialize: function(container, sources, options){
        this.setOptions(options);
        this.loadingDiv = (this.options.loadingDiv) ? $(container) : false;
        this.images     = [];
        this.index      = 0;
        this.total      = sources.length;

        if(this.loadingDiv) {
            this.loadingText = new Element('div').injectInside(this.loadingDiv);
            this.progressBar = new Element('div', {
                styles: {
                    width: 100,
                    padding: 1,
                    margin: '5px auto',
                    textAlign: 'left',
                    overflow: 'hidden',
                    border: 'solid 1px #333'
                }
            }).adopt(new Element('div', {
                styles: {
                    width: '0%',
                    height: 10,
                    backgroundColor: '#333'
                }
            })).injectInside(this.loadingDiv);
        }

        this.loadImages.delay(200, this, [sources]);
    },

    reset: function() {
        this.index = 0;
        if(this.loadingDiv) {
            this.progressBar.getFirst().setStyle('width', '0%');
            this.loadingText.setHTML(this.options.loadingPrefix);
        }
    },

    loadImages: function(sources) {
        var self = this;
        this.reset();
        this.images  = [];
        this.sources = sources;

        this.timer = setInterval(this.loadProgress.bind(this), 100);
        for(var i = 0, j = sources.length; i < j; i++) {
            this.images[i] = new Asset.image((this.sources[i].path || this.options.path) + this.sources[i].file, {
                title: self.sources[i].title,
                alt: self.sources[i].desc,
                'onload'  : function(){ self.index++; },
                'onerror' : function(){ self.index++; self.images.splice(i,1); },
                'onabort' : function(){ self.index++; self.images.splice(i,1); }
            });
        }
    },

    loadProgress: function() {
        if(this.loadingDiv) {
            this.loadingText.setHTML(this.options.loadingPrefix + this.index + '/' + this.total + this.options.loadingSuffix);
            this.progressBar.getFirst().setStyle('width', (!this.total ? 0 : this.index.toInt()*100 / this.total) + '%');
        }

        if(this.index >= this.total) {
            this.loadComplete();
        } 
    },

    loadComplete: function(){
        $clear(this.timer);
        if(this.loadingDiv) {
            this.loadingText.setHTML('Loading Complete');

            if(this.options.removeDiv) {
                this.loadingText.empty().remove();
                this.progressBar.empty().remove();
            }
        }
        this.fireEvent('onComplete', this.images);
    },

    cancel: function(){
        $clear(this.timer);
    }

});

ImageLoader.implement(new Events, new Options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:57:58.613

如果滑块在鼠标悬停事件上停止，您可以尝试：

```
$('#sliderSelector').mouseover(function (event) {
    event.stopPropagation();
    event.preventDefault();
}); 
```

或者：

```
$('#sliderSelector').mouseover(function () {
    return false;
}); 
```

如果插件中的功能只是停止滑块，那么它应该可以工作。如果后面有更多，它可能会失败。如果这不起作用：您能提供插件代码吗？（我用谷歌找不到它）

# php - PHP 合并 2 个图像（将人脸插入图像）

> ID：10993145
> 
> 赞同：4
> 
> 时间：2012-06-12T08:41:02.720
> 
> 标签：php, image, merge, photo

我需要你的帮助

我有两张图片，
1\. [http://i.imgur.com/pyWGk.jpg](http://i.imgur.com/pyWGk.jpg)（面部图像，类型：jpeg）
2\. [http://i.imgur.com/LYk07.png](http://i.imgur.com/LYk07.png)（框架图像，有孔脸，类型：png）

我想将人脸图像插入帧图像

我试过这个脚本

```
<?php
$image = imagecreatefromjpeg('face.jpg');
$frame = imagecreatefrompng('ironman.png');

$iw = imagesx($image);
$ih = imagesy($image);

$fw = imagesx($frame);
$fh = imagesy($frame);

imagealphablending($frame, true);
imagesavealpha($frame, true);
imagecopy($image, $frame, 0, 0, 0, 0, $fw, $fh);

header('Content-Type: image/jpeg');
imagejpeg($image);

imagedestroy($image);
imagedestroy($frame);
?> 
```

问题是：
结果图像的分辨率与帧图像的分辨率不同，以及
如何改变人脸图像的位置，使人脸图像可以在帧图像的孔上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:44:38.820

您可以缩放图像以获得相同的分辨率。这是缩放的示例代码：

```
function scale($scale){
    //you can get image width and height from image info
    $width = $image_width * $scale / 100;
    $height = $image_height * $scale / 100;

    $scaled_image = imagecreatetruecolor($width, $height);
    imagecopyresampled($scaled_image, $old_image, 0, 0, 0, 0, $width, $height, $image_width, $image_height);
} 
```

要更改**面部图像**的位置，您可以在[`imagecopy`](http://php.net/manual/en/function.imagecopy.php)函数中设置所需的参数。您需要设置`dst_x`和`dst_y`。

# batch-file - 检查 bat 文件中的卷序列号

> ID：10993154
> 
> 赞同：0
> 
> 时间：2012-06-12T08:42:01.930
> 
> 标签：batch-file, serial-number

我正在编写一个在闪存驱动器上运行的批处理脚本。我需要在代码中验证闪存驱动器的卷序列号，因此没有人应该能够从不同的位置运行它。

有谁知道如何验证批处理文件中的序列号？

例子：

```
IF %VOL%==ABCD GOTO A ELSE EXIT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:56:56.057

尽管有几种不同的方法可以实现相同的目的，但用于管理卷和序列号的原始 DOS/Windows*命令*是`VOL`：

```
@echo off
for /F "skip=1 tokens=5" %%a in ('vol %~D0') do set Serial=%%a
if %Serial% equ ABCD-EF01 do (
    echo Valid serial number!
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:49:54.960

您可能可以使用[WMIC](http://technet.microsoft.com/en-us/library/bb742610.aspx)并执行以下操作：

```
wmic logicaldisk where drivetype=3 get volumeserialnumber 
```

请参阅提到的链接中的参数类型。

编辑：

```
@echo off
for /F "skip=1 delims=" %%j in ("wmic logicaldisk where deviceid = 'C:' get volumeserialnumber") do (
  set SERIAL=%%j
  goto :DONE
)
:DONE
echo  SERIAL=%SERIAL%

if "%SERIAL%"=="BLAH" (
   echo "Bluh"
) 
```

# python - Python：导入模块

> ID：10993156
> 
> 赞同：7
> 
> 时间：2012-06-12T08:42:15.517
> 
> 标签：python

`fibo.py`可以说我有一个定义如下的python模型：

```
#Fibonacci numbers module
print "This is a statement"
def fib(n):
    a,b = 0,1
    while b < n:
        print b
        a, b = b, a+b

def fib2(n):
    a,b = 0,1
    result= []
    while(b < n):
        result.append(b)
        a, b = b, a+b
    return result 
```

在我的口译会话中，我执行以下操作：

```
>> import fibo
This is a statement
>>> fibo.fib(10)
1
1
2
3
5
8

>>> fibo.fib2(10)
[1, 1, 2, 3, 5, 8]
>>> fibo.__name__
'fibo'
>>> 
```

到目前为止一切顺利......重新启动解释器：

```
>>> from fibo import fib,fib2
This is a statement
>>> fibo.__name__
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
NameError: name 'fibo' is not defined
>>> 
```

我预计会出现错误，因为我只导入了`fib`和`fib2`. 但是我不明白为什么当我只导入`fib`和时打印声明`fib2`。

其次，如果我将模块更改为：

```
#Fibonacci numbers module
print "This is a statement"
print __name__ 
```

预期的结果应该是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T08:46:11.590

这是预期的行为。当您使用 导入时`from X import Y`，模块仍会加载并执行，如[Language Reference](http://docs.python.org/reference/simple_stmts.html#the-import-statement)中所述。事实上，当你这样做时

```
from fibo import fib
print("foo")
import fibo 
```

将打印`This is a statement`，然后是`foo`. 第二个`import`不打印任何内容，因为模块已经被缓存。

您的第二个模块将打印`This is a statement`，然后是`fibo`. 模块在加载时知道自己的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:45:29.540

Python 必须加载整个模块才能从中导入任何内容。Python 将整个模块导入其模块缓存，但只有您导入的符号对您可见。（如果你第二次导入，它不会运行；这是因为模块在第一次导入时被缓存了。）

# java - 二进制文件读取器字节 [] 到字符串的转换出错了？

> ID：10993157
> 
> 赞同：0
> 
> 时间：2012-06-12T08:42:26.490
> 
> 标签：java, file, file-io, io

我正在尝试显示文件头中应该是文本的内容（文件的其余部分是二进制文件）但是当我打印 strtemp 时，我得到了这个：

```
strTemp: ?????? 
```

这是代码。

```
String fileName = "test.file";

URI logUri = new File(fileName).getAbsoluteFile().toURI();  

BufferedInputStream in = new BufferedInputStream(new FileInputStream(new File(logUri))); 

byte[] btemp = new byte[14];
in.read(btemp);

String strtemp = "";

for(int i = 0; i < btemp.length; i+= 2) {
    strtemp += String.valueOf((char)(((btemp[i]&0x00FF)<<8) + (btemp[i+1]&0x00FF)));
}

System.out.println("strTemp: " + strtemp); 
```

如何让 strtemp 成为文件中的内容？并正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:49:39.343

从[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)的构造函数摘要中可以看出，您可以直接从字节初始化字符串。

您还应该提供源文件中的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:01:23.137

对于这种需要，您可以使用 ByteBuffer 和 CharBuffer ：

```
 FileChannel channel = new RandomAccessFile("/home/alain/toto.txt", "r").getChannel();
    //Map the 14 first bytes
    ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, 14);
    //Set your charset here
    Charset chars = Charset.forName("ISO-8859-1");
    CharBuffer cbuf = chars.decode(buffer);
    System.out.println("str = " + cbuf.toString()); 
```

# mysql - 表连接，将一张表的一行与另一张表的所有行相关联

> ID：10993159
> 
> 赞同：0
> 
> 时间：2012-06-12T08:42:49.407
> 
> 标签：mysql

我有这个代码，我想做的是向所有客户展示他们各自的卡号，但我得到的只是与卡表的所有卡相关联的客户之一.. 怎么了？提前致谢

```
SELECT  `customers.idcustomer`,    
    `customers.EMRI`,    
    `customers.MBIEMRI`,    
    `customers.KONTAKT`,    
    `customers.VENDBANIMI`,
    `customers.Adresa`,
    `customers.email1`,
    `customers.tel1`,
    `xts_cards.CARD_NO`,
    `xts_cards.CARD_TYPE`,
    xts_cards.MER_ID
FROM customers
INNER JOIN `xts_cards` ON `customers.idcustomer` = `xts_cards.MER_ID_OWNED_BY` 
```

# c# - 如何使用 PHP 将 Bing 地图四键转换为缩放级别、x 坐标和 y 坐标？

> ID：10993160
> 
> 赞同：0
> 
> 时间：2012-06-12T08:42:51.307
> 
> 标签：c#, php, geolocation, bing-maps

我正在尝试用 PHP 编写一个脚本，该脚本将接受 Bing 地图四键，然后返回缩放级别、x 坐标和 y 坐标，以便我可以使用自己的地图。我的代码基于 Microsoft 在[此处](http://msdn.microsoft.com/en-us/library/bb259689.aspx)提供的 C# 示例代码：

```
public static void QuadKeyToTileXY(string quadKey, out int tileX, out int tileY, out int levelOfDetail)
{
    tileX = tileY = 0;
    levelOfDetail = quadKey.Length;
    for (int i = levelOfDetail; i > 0; i--)
    {
        int mask = 1 << (i - 1);
        switch (quadKey[levelOfDetail - i])
        {
            case '0':
                break;

            case '1':
                tileX |= mask;
                break;

            case '2':
                tileY |= mask;
                break;

            case '3':
                tileX |= mask;
                tileY |= mask;
                break;

            default:
                throw new ArgumentException("Invalid QuadKey digit sequence.");
        }
    }
} 
```

这是我使用未按预期运行的 PHP 的娱乐：

```
$quadkey = intval($_GET["quadkey"]);

$zoom = count($quadkey);

for ($i = $zoom; $i > 0; $i--)
{
    $mask = 1 << ($i - 1);

    $quadkey_array = str_split($quadkey);

    switch ($quadkey_array[$zoom - $i])
    {
        case 0:
            break;

        case 1:
            $x |= $mask;
            break;

        case 2:
            $y |= $mask;
            break;

        case 3:
            $x |= $mask;
            $y |= $mask;
            break;

        default:
            echo "Error";
    }

    echo "/" . $zoom . "/" . $x . "/" . $y . ".png";
} 
```

我正在使用的示例四键和预期结果如下：

四键：`120202111102203112` X 坐标：`134926` Y 坐标：`86121` 缩放：`18`

任何人都可以阐明我做错了什么吗？我一直在四处寻找，找不到任何其他示例代码来检查！谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T08:14:18.067

在 Bing Ajax 7 中，QuadKey 不仅提供了唯一的项目，还提供了 x、y 和 levelOfDetail，即 Zoom。

在我发现这一点之前，我也考虑过服务器端转换，但它可以在 javascript 中使用。

Bing 地图附带 x、y 和 z，可直接用于 OSM Web 请求：

```
var map = new Microsoft.Maps.Map( <snip> )
function useZXY(tile) {
    return "http://tile.openstreetmap.org/" + 

            tile.levelOfDetail + "/" + 
            tile.x + "/" + 
            tile.y +".png";

}

var omsTS = new Microsoft.Maps.TileSource({ uriConstructor: useZXY  });

var omsTL = new Microsoft.Maps.TileLayer({ mercator: omsTS, opacity: 0.5 });
map.entities.push(omsTL) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:52:34.250

我的代码中有我应该看到的错误。

```
$zoom = count($quadkey); 
```

错误并计算 $quadkeys 的数量，而不是字符串的长度。

```
$zoom = strlen($quadkey); 
```

此外，URL 应该在 for 循环之外生成，就在它的下方。如果其他人需要 PHP 脚本将 Bing 地图四键转换为坐标，我已将更新的代码放在下面。

```
$quadkey = intval($_GET["quadkey"]);

$zoom = strlen($quadkey);

for ($i = $zoom; $i > 0; $i--)
{
    $mask = 1 << ($i - 1);

    $quadkey_array = str_split($quadkey);

    switch ($quadkey_array[$zoom - $i])
    {
        case 0:
            break;

        case 1:
            $x |= $mask;
            break;

        case 2:
            $y |= $mask;
            break;

        case 3:
            $x |= $mask;
            $y |= $mask;
            break;

        default:
            echo "Error";
    }
}

echo "/" . $zoom . "/" . $x . "/" . $y . ".png"; 
```

# ms-access - 访问 mdb 没有给出正确的结果

> ID：10993161
> 
> 赞同：4
> 
> 时间：2012-06-12T08:42:52.887
> 
> 标签：ms-access, odbc, oracle11g

我使用 Access(2003) mdb 文件作为 oracle 11g R2 的前端作为后端。我正在使用 odbc 连接从 oracle 数据库中检索数据。但有时 mdb 显示不正确的输出。

例如，当我在 mdb 中使用以下查询时

```
SELECT *
FROM PLAN 
WHERE (((PLAN.BATCH_REF)="SSU080520122")); 
```

它提供了错误的结果。但是相同的查询在 oracle 中提供了正确的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:56:57.253

`PLAN`是一个[保留字](http://allenbrowne.com/AppIssueBadWord.html#P)。使用保留字作为表名或列名会混淆数据库引擎。尽管这实际上可能不是您的麻烦的根源，但很容易将其排除为贡献者。看看你是否得到了你期望的结果：

```
SELECT *
FROM [PLAN] AS p
WHERE p.BATCH_REF="SSU080520122"; 
```

# php - 在保管箱上，发布要删除的字符串

> ID：10993163
> 
> 赞同：0
> 
> 时间：2012-06-12T08:42:59.213
> 
> 标签：php, post, find

我正在开发一个 PHP 页面：

1.  从 db 文件中读取项目；

2.  将项目转换为保管箱项目；

3.  提交表格以移除选中的项目；接着

4.  另一个页面删除并写入文件

问题：

1.  移除页面可以回显贴出的字符串；

2.  删除页面无法从 db 文件中删除已发布的字符串；和

3.  ***我尝试在删除页面上对字符串进行硬编码，直接***运行删除页面，字符串可以从db文件中删除。即从`$str=str_replace($HTTP_POST_VARS["RMBOX"],'',$str);`到 `$str=str_replace('abc@email.com','',$str);`

代码和db文件如下：

文件（命名为 mailto）包含以下行： `abc@email.com`

Dropbox 页面（名为 mbox.php）包含以下行：

```
<form action="rmbox.php" method="post" name="items">
<?php
$db = "mailto";
?>
<table>
tr><th ALIGN=LEFT>Remove Recipient</th></tr>
<tr><th ALIGN=LEFT>
<select name=RMBOX>
<option selected="selected"></option>
value="<?php
$handle = @fopen($db, 'r');
if ($handle) {
   while (!feof($handle)) {
   $line = fgets($handle, 4096);
   $item = explode('|', $line);
   echo '<option value="' . $item[0] . '">' . $item[0] . '</option>' . "\n";
   }
   fclose($handle);
}
?>
</select>
<th></tr></table>
<input type="submit" name="submit" value="Remove" />
</form> 
```

删除页面（命名为 rmbox.php）包含以下行：

```
<?php
$db = "mailto";
$str=implode("\n",file($db));
$fp=fopen($db,'w');
echo $HTTP_POST_VARS["RMBOX"];
$str=str_replace($HTTP_POST_VARS["RMBOX"],'',$str);
fwrite($fp,$str,strlen($str));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:47:06.613

我解决了这个问题。下面是代码：

```
$item = explode('\n', $line); 
```

# android - 替换android来电和去电的默认屏幕

> ID：10993164
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:43:13.160
> 
> 标签：android, broadcastreceiver

我正在研究安卓。当有来电时，我想用一个新的屏幕替换默认的 android 通话屏幕，该屏幕具有接听和拒绝通话选项。我怎样才能做到这一点？需要一些帮助。任何帮助表示赞赏。

我必须为此使用祝酒词吗？

我确实有传入和传出的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:50:49.640

据我了解，不可能用安装在市场上的应用程序替换呼叫屏幕。

为此，您至少需要 root 权限。也许您还需要重新配置手机上安装的 Android 版本。

# c - 在 gmp 任意精度上计算机器精度

> ID：10993171
> 
> 赞同：0
> 
> 时间：2012-06-12T08:43:37.270
> 
> 标签：c, gmp, floating-point-precision

我正在尝试获取[gmp](http://gmplib.org/)变量的机器精度。

为此，我改编了来自[wikipedia](http://en.wikipedia.org/wiki/Machine_epsilon)的代码，以计算具有固定精度的 gmp 的精度：

```
int main( int argc, char **argv )
{
    long int precision = 100;

mpf_set_default_prec(precision); // in principle redundant, but who cares

    mpf_t machEps, one, temp; // "one" is the "1" in gmp. tmp is to comparison.
    mpf_init2(machEps, precision); 
    mpf_set_ui(machEps, 1); // eps = 1
    mpf_init_set(one,machEps); // ensure "one" has the same precision as machEps
    mpf_init_set(temp,machEps); // ensure "temp" has the same precision as machEps

    do {
        mpf_div_ui(machEps,machEps,2); // eps = eps/2
        mpf_div_ui(temp,machEps,2);    // temp = eps/2
        mpf_add(temp,temp,one);        // temp += 1
    }
    while ( mpf_cmp(temp,one)); // temp == 1
    /// print the result...
    char *t = new char[400];
    mp_exp_t expprt;
    mpf_get_str(NULL, &expprt, 10, 10, machEps);

    sprintf(t, "%se%ld", mpf_get_str(NULL, &expprt, 10, mpf_get_default_prec(), machEps), expprt);

    printf( "Calculated Machine epsilon: %s\n", t);
    return 0;
} 
```

但是，结果与维基百科的公式不一致，也不会随着我设置的精度而变化。我错过了什么？我也尝试过使用 double 和 float （c 标准），结果是正确的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:57:10.197

我得到的结果与[维基百科的公式](http://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics)一致，并且值取决于精度。

但是，值和有效精度仅在越过肢体边界^((1))时发生变化。对我来说，这意味着 64 的倍数，所以对于

```
(k-1)*64 < precision <= k*64 
```

计算出的机器 epsilon 是

```
0.5^(k*64) 
```

一些结果：

```
$ ./a.out 192
Calculated Machine epsilon: 15930919111324522770288803977677118055911045551926187860739e-57
$ ./a.out 193
Calculated Machine epsilon: 8636168555094444625386351862800399571116000364436281385023703470168591803162427e-77 
```

为了比较：

```
Prelude> 0.5^192
1.5930919111324523e-58
Prelude> 0.5^256
8.636168555094445e-78 
```

GMP 程序的输出形式`mantissa,'e',exponent`为

```
0.mantissa * 10^exponent 
```

^((1)) GMP 将浮点数表示为一对指数（以 2 为底）和尾数（和符号）。尾数被维护为一个无符号整数数组，即*肢体*。对我来说，肢体是 64 位，在 32 位系统上通常是 32 位 (iirc)。因此，当所需精度在`(k-1)*LIMB_BITS`（不含）和`k*LIMB_BITS`（含）之间时，尾数的数组包含`k`肢体，并且全部使用，因此有效精度为`k*LIMB_BITS`位。因此，epsilon 仅在肢体数量发生变化时才会发生变化。

# c# - 如何在 Windows Phone 7 隔离存储中保存任何类型的文件？

> ID：10993172
> 
> 赞同：-2
> 
> 时间：2012-06-12T08:43:41.380
> 
> 标签：c#, windows-phone-7

是否有任何技术，或者您可以分享一些关于如何保存 wp7 支持的任何类型文件的代码片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:57:22.937

您基本上可以在隔离存储中写入和读取所有内容。您可以创建文件夹和文件等。将其视为仅适用于您的应用程序的整个文件系统。

您可以编写如下文本文件：

```
using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
using (var fileStream = new IsolatedStorageFileStream("filename", FileMode.Create, myIsolatedStorage))
using (StreamWriter writer = new StreamWriter(fileStream))
{
    writer.Write("Hi I'm a string!");
} 
```

或二进制数据，例如：

```
using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
using (var fileStream = new IsolatedStorageFileStream("filename", FileMode.Create, myIsolatedStorage))
using (var writer = new BinaryWriter(fileStream))
{
    // write some bytes
    writer.Write(new byte[]{0, 1, 2, 3}, 0, 4);
} 
```

有关更多示例，请参阅[本](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:50:35.653

以下链接将帮助您清楚了解 windows phone 7 中的 IsolatedStorage，并附有示例代码块和用法

[IsolagedStorageFile Msdn 文档和示例](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx)

[使用独立存储文件](http://create.msdn.com/en-US/education/quickstarts/Isolated_Storage#files)

# php - 成功下载文件时 PHP 服务器和客户端之间的连接丢失

> ID：10993178
> 
> 赞同：1
> 
> 时间：2012-06-12T08:44:02.443
> 
> 标签：php, readfile

这是我的代码：

```
error_log('download start');
readfile('setup.exe');
error_log('download complete'); 
```

该文件已成功接收，但第三行**未**执行，它没有记录“下载完成”我们长期以来一直面临这个问题，我们也尝试发送该文件的块（使用刷新），并且在几个块之后连接丢失所以其余可执行代码未运行（但已收到文件）。我们知道通过在 php.ini 中使用连接处理会丢失连接。我们还将连接时间限制设置为最大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:48:10.537

您需要先设置某些标题`binary`，等等：

```
$file = 'setup.exe';

if (file_exists($file)) {
    error_log('download start');
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    $result = readfile($file);

    if ($result) {
       error_log('download complete');
    }
    else {
       error_log('unable to download');
    }

    exit;
} 
```

# spring - 用相同的名称定义相同的 Spring bean 两次

> ID：10993181
> 
> 赞同：27
> 
> 时间：2012-06-12T08:44:20.080
> 
> 标签：spring, inversion-of-control, javabeans

在 Spring IOC 中有两个有效的 bean 定义（具有相同的名称和类）吗？

我有两个包含在 web.xml 中的 bean 定义文件。请参阅下面的示例。

**applicationContext-beans1.xml**

```
<bean name="myWao"
    class="com.beans.myBean">       
</bean> 
```

**applicationContext-beans2.xml**

```
<bean name="myWao"
    class="com.beans.myBean">       
</bean> 
```

到目前为止，我没有遇到任何问题。但是，这可能会影响多线程和集群的真实环境吗？

**注意：**两个 XML 都已加载，因为我能够使用两个 XML 中定义的其他 bean（仅一次）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-12T08:49:11.280

这是有效的，但您会发现一个 bean 被另一个覆盖。您将在日志中看到这一点

```
Overriding bean definition for... 
```

此行为允许您覆盖以前提供的 bean 定义。它会影响您的应用程序的静态程序集，并且与您的问题中建议的线程/集群无关。

请注意，`DefaultListableBeanFactory`允许您通过[setAllowBeanDefinitionOverriding()配置此行为](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/support/DefaultListableBeanFactory.html#setAllowBeanDefinitionOverriding%28boolean%29)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-02-15T07:56:01.693

从 Spring Boot 2.1 版开始，它默认被禁用。（[链接](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes#bean-overriding)）

> **Bean Overriding：**默认情况下禁用 Bean 覆盖以防止 bean 被意外覆盖。如果您依赖于覆盖，则需要设置 `spring.main.allow-bean-definition-overriding`为`true`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-12T13:17:35.993

这是有效且有用的，尤其是当您尝试更改第三方 bean 的实现（我的意思是，您不允许更改 bean 的实现）以及您需要提供/配置一些额外（合并）属性的地方时豆子。

bean 的覆盖取决于您提供的用于构建`ApplicationContext`通过 web.xml 或独立的 xml 的顺序。最新的 bean 定义将赢得比赛。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-27T04:54:05.797

我知道现在回复很晚了，但是还是想补充一点……

只要您在两个不同的 spring 配置文件上定义具有相同 bean 的相同 id 的两个 bean 定义，它就有效。而且您正在将一个配置文件导入另一个配置文件（一种合并），无论您如何导入（一种合并）。后一个或最后一个 bean 定义将被第一个 bean 定义覆盖。

```
package com.demo.bean;
public class TestBean {
    private String message;
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
} 
```

例如#1

spring-config1.xml

```
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="INSIDE_SPRING_CONFIG_1"></property>
</bean> 
```

spring-config2.xml

```
<import resource="spring-config1.xml"/><
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="INSIDE_SPRING_CONFIG_1"></property>
</bean> 
```

例如#2

spring-config1.xml

```
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="INSIDE_SPRING_CONFIG_1"></property>
</bean> 
```

spring-config1.xml

```
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="INSIDE_SPRING_CONFIG_1"></property>
</bean> 
```

web.xml

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-config1.xml,
        /WEB-INF/spring-config2.xml
    </param-value>
</context-param> 
```

但是，如果您在同一个文件中定义具有相同 bean 的相同 bean id 的两个 bean 定义，您会发现 spring 应用程序启动失败。Spring 不允许您在同一个 spring 配置文件中定义同一个 bean 的多个 bean 定义。

例如 # 3 spring-config3.xml

```
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="CONFIG_VALUE_1"></property>
</bean>
<bean id="testbean" class="com.demo.TestBean">
    <property name="message"    value="CONFIG_VALUE_2"></property>
</bean> 
```

错误 ：

```
ERROR ContextLoader:331 - Context initialization failed
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Bean name 'testbean' is already used in this <bean> element
Offending resource:  resource [/spring-config3.xml]

    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:70)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:316)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.checkNameUniqueness(BeanDefinitionParserDelegate.java:525)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:471)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:443)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.processBeanDefinition(DefaultBeanDefinitionDocumentReader.java:314)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:205)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:141)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:110)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:391)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:335)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:216)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:187)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:540)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:454)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4716)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5178)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1403)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1393)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745) 
```

# .net - 为什么 DialogResult::Yes 需要 ::？

> ID：10993182
> 
> 赞同：3
> 
> 时间：2012-06-12T08:44:21.147
> 
> 标签：.net, namespaces, c++-cli, messagebox

为什么会这样：

```
using namespace System;
using namespace System::Windows::Forms;
...
if( MessageBox::Show("Really do it?", "Are you sure?", System::Windows::Forms::MessageBoxButtons::YesNo) == System::Windows::Forms::DialogResult::Yes )
{
    Console::WriteLine("Do it!");
} 
```

..当失败时：

```
using namespace System;
using namespace System::Windows::Forms;
...
if( MessageBox::Show("Really do it?", "Are you sure?", System::Windows::Forms::MessageBoxButtons::YesNo) == DialogResult::Yes )
{
    Console::WriteLine("Do it!");
} 
```

...出现以下错误：

```
error C2039: 'Yes' : is not a member of 'System::Windows::Forms::Form::DialogResult' 
```

我假设 Visual Studio 正在获取 DialogResult 但我看不到它在哪里找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:49:48.977

这是一个命名冲突，Form.DialogResult 是 Form 的一个属性。[看这里。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)我假设您的代码是表单的一部分，因此优先。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T08:50:14.867

`System::Windows::Forms::Form`有一个也称为 DialogResult 的属性（属于 type `System::Windows::Forms::DialogResult`），因此出现错误。

[http://msdn.microsoft.com/library/system.windows.forms.form.dialogresult.aspx](http://msdn.microsoft.com/library/system.windows.forms.form.dialogresult.aspx)

[http://msdn.microsoft.com/library/system.windows.forms.dialogresult.aspx](http://msdn.microsoft.com/library/system.windows.forms.dialogresult.aspx)

# android - Android ListView OnItemClickListener 事件不起作用

> ID：10993184
> 
> 赞同：0
> 
> 时间：2012-06-12T08:44:37.607
> 
> 标签：android, android-listview

我的活动课

```
private String[] mStrings2={"Title 01","Title 02"};
private String[] mStrings = {"Link to the image1", "Link to the image2"};

MyAdapter adapter;

        mainList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {              

            adapter=new LazyAdapter(this, mStrings, mStrings2);
            subList.setAdapter(adapternew);                       

        }
    });

MyAdapter class (MyAdapter.java)

    private Activity activity;
    private String[] data;
    private String[] data2;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

//Constructor
public LazyAdapter(Activity a, String[] d, String[] mStrings2) {
        activity = a;
        data=d;
        data2=mStrings2;
        inflater = LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    } 
```

当我单击第一个列表项时，我想在第二个数组中加载元素。但是在执行代码时，我得到了“NullPointerException”。如何解决这个问题。请指导我。

编辑....

```
 06-12 14:21:42.499: E/AndroidRuntime(1429): java.lang.NullPointerException
06-12 14:21:42.499: E/AndroidRuntime(1429):     at com.java.hotelapp.Item_List$1.onItemClick(Item_List.java:106)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.widget.AdapterView.performItemClick(AdapterView.java:282)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.widget.AbsListView.performItemClick(AbsListView.java:1037)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2449)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.widget.AbsListView$1.run(AbsListView.java:3073)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.os.Handler.handleCallback(Handler.java:587)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.os.Looper.loop(Looper.java:132)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at android.app.ActivityThread.main(ActivityThread.java:4123)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at java.lang.reflect.Method.invokeNative(Native Method)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at java.lang.reflect.Method.invoke(Method.java:491)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-12 14:21:42.499: E/AndroidRuntime(1429):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:47:05.540

我看不到`adapternew`适配器的声明，所以它可能是`null`..

```
subList.setAdapter(adapternew); 
```

这条线应该是，

```
adapter = new LazyAdapter(MyActivity.this, mStrings, mStrings2);
subList.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:51:04.670

也许另一个建议：

```
mainList.setOnItemClickListener(new AdapterView.OnItemClickListener() 
```

会不会是这样`mainList == null`？

并且，请提供正确的代码以及故障的确切时刻和线路。堆栈跟踪的特定部分也很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:06:56.127

```
ListView lv = (ListView)this.findViewById(R.id.listviewid);
lv.setItemsCanFocus(false); 

or try onlistitemclick

 @Override    
 protected void onListItemClick(ListView lv, View v, int position, long id) {       
    // TODO Auto-generated method stub  
   super.onListItemClick(lv, v, position, id);  
 } 
```

# c# - 递归调用获取 Excel 工作表值的方法。

> ID：10993187
> 
> 赞同：0
> 
> 时间：2012-06-12T08:44:48.850
> 
> 标签：c#, arrays, excel, recursion

我编写了一个方法来在传递文件名、工作表名和单元格地址时返回 Excel 工作表单元格值。

```
public static string GetCellValue(string fileName, string sheetName, string addressName)
        {
            string value = null;

            using (SpreadsheetDocument document = SpreadsheetDocument.Open(fileName, false))
            {

                WorkbookPart wbPart = document.WorkbookPart;

                  Where(s => s.Name == sheetName).FirstOrDefault();

                if (theSheet == null)
                {
                    throw new ArgumentException("sheetName");
                }

                WorksheetPart wsPart =
                    (WorksheetPart)(wbPart.GetPartById(theSheet.Id));

                Cell theCell = wsPart.Worksheet.Descendants<Cell>().
                  Where(c => c.CellReference == addressName).FirstOrDefault();

                if (theCell != null)
                {
                    value = theCell.InnerText;

                    if (theCell.DataType != null)
                    {
                        switch (theCell.DataType.Value)
                        {
                            case CellValues.SharedString:
.
                                var stringTable =
                                    wbPart.GetPartsOfType<SharedStringTablePart>()
                                    .FirstOrDefault();

                                if (stringTable != null)
                                {
                                    value =
                                        stringTable.SharedStringTable
                                        .ElementAt(int.Parse(value)).InnerText;
                                }
                                break;

                            case CellValues.Boolean:
                                switch (value)
                                {
                                    case "0":
                                        value = "FALSE";
                                        break;
                                    default:
                                        value = "TRUE";
                                        break;
                                }
                                break;
                        }
                    }
                }
            }
            return value;
        } 
```

这是调用上述方法的方法。

```
 private void button1_Click(object sender, EventArgs e)
        {
            const string fileName = @"C:\Users\dkumarage\Desktop\Book1.xlsx";
            string value = GetCellValue(fileName, "Sheet1", "A1");
            textBox1.Text = value;
        } 
```

这样我只能获得 1 个单元格值。如何递归调用此方法以获取所有单元格值。请帮我。（在这里我不能通过范围。因为我不知道范围。相反我必须使用 while（不是行尾））

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:47:50.773

我不知道你为什么希望它是递归的。无论如何，这是您想要做的非递归版本。它使用 Excel 互操作，我没有费心去管理异常（比如找不到文件，或者工作表不存在等等），但它应该给你一个起点。

```
public static List<string> GetCellValue(string fileName, string sheetName, string addressName)
    {
        List<string> result = new List<String>;
        object hmissing = System.Reflection.Missing.Value;
        Application app = new ApplicationClass();
        Workbook aWb = app.Workbooks.Open(fileName, hmissing, hmissing, hmissing, hmissing,
            hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing,
            hmissing);
        Worksheet aWs = aWb.Worksheets[sheetName] as Worksheet;
        object[,] values = aWs.UsedRange.get_Value(hmissing) as object[,];
        foreach (object anObj in values)
             if (anObj != null)
                 result.Add(anObj.ToString());  
        aWb.Close(false, hmissing, hmissing);
        app.Quit();          
        return result;
    } 
```

# regex - Oracle Regex 表达式完全匹配非数字，然后再次匹配数字

> ID：10993189
> 
> 赞同：1
> 
> 时间：2012-06-12T08:44:54.540
> 
> 标签：regex, oracle

如何在 Oracle 中将电话号码（或任何号码）正则表达式精确到正确的长度，后跟非数字，然后可能再次数字？

例如

```
SELECT 1 FROM DUAL WHERE 
  REGEXP_LIKE('555-5555x123', '^[0-9]{3,4}[^[:digit:]][0-9]{4}.*$') 
```

如果数字 555-5555 可以，555-5555x123 可以，但 555-5555123 不行。

可能发生的情况是手指粗的人在输入电话号码时添加了额外的数字而出错（请不要说应该限制输入格式，这不是我的数据），这应该被标记为问题。这个例子更像是 555-55545x123。

Oracle REGEXP_LIKE 值结果的测试用例 555-5555 ok 555-5555x123 ok 555-55551x123 失败 555-55551 失败 555-5555555 失败

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:50:12.050

只需删除`.*`表达式末尾的，它负责匹配其他内容。

```
SELECT 1 FROM DUAL WHERE 
  REGEXP_LIKE('555-5555x123', '^[0-9]{3,4}[^[:digit:]][0-9]{4}$') 
```

这样它确实匹配 3 或 4 个数字、一个非数字和 4 个更多数字。

`{3,4}`和`{4}`是定义要允许的位数的量词。只需将它们更改为您需要的值。例如`{4,}`将匹配 4 个或更多。

`^`将正则表达式锚定到字符串的开头和`$`结尾。

**更新**

为确保最后 4 位数字后没有数字，您可以使用交替

```
SELECT 1 FROM DUAL WHERE 
  REGEXP_LIKE('555-5555x123', '^[0-9]{3,4}[^[:digit:]][0-9]{4}($|[^0-9].*$)') 
```

现在，在您的 4 位数字之后，必须有行尾或非数字（`[^0-9]`是否定字符类），然后是任何内容（但换行符）直到行尾。

我不知道它在你的情况下是否重要，但`[^0-9]`如果你想避免这种使用，它也会匹配换行符`[^0-9\r\n]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T07:22:37.913

```
SELECT regextestcol FROM regexptest WHERE REGEXP_LIKE(address,'^[0-9]{3}-[0-9]{4}(\w\d{3})?$'); 
```

描述：

*   `^`搜索模式的开始

*   `[0-9]{3}-[0-9]{4}`匹配由连字符分隔的三位和四位数字

*   `(\w\d{3})?`匹配一个单词，一个三位数字，两者都可以与`?`符号一起选择
*   `$`搜索模式的结尾

# plone - 用于 Plone 的标题 + 内联图像上传 (BLOB) portlet

> ID：10993193
> 
> 赞同：3
> 
> 时间：2012-06-12T08:45:18.947
> 
> 标签：plone

是否有任何现有的附加组件可以提供该功能

*   从本地计算机 (blob) 上传图像

*   添加一些标题

*   添加一些链接

此功能可以通过静态文本 portlet 和单独的图像上传来实现，但这会在可用性方面引起很大的麻烦。我们想要内联上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:32:38.180

听起来像是扩展静态文本 portlet 的绝佳机会！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:36:09.837

插件collective.quickupload 可以让您上传多个文件和图像并设置每个文件的标题。

但我想我想念这个问题，因为你已经知道这个插件对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:06:11.483

现在有附加组件：

[https://github.com/miohtama/imageportlet/](https://github.com/miohtama/imageportlet/)

# wpf - WPF Prism 仅将事件发送到活动选项卡

> ID：10993198
> 
> 赞同：0
> 
> 时间：2012-06-12T08:46:04.263
> 
> 标签：wpf, events, tabs, prism

我有一个 WPF Prism 应用程序，其中有几个我想编辑的客户。因此，例如，我有 5 个标签供 5 个客户使用。每个客户都有 5 个子选项卡，例如设置、详细信息等。

当我加载客户或更新它时，我希望发布到每个子选项卡的 prism 事件得到更新。唯一的问题是：其他子选项卡也将与同一客户一起更新......这不是计划：D

那么是否有可能只有活动选项卡和那些视图模型可以订阅事件，或者类似的东西？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:50:35.770

不久前我做了这样的事情

我不记得确切的细节，但是标签订阅了带有 a 的事件`LoadConsumerMessage`，并且消息除了通常的消息属性之外还有两个额外的属性：一个`Id`字段和一个`IsHandled`字段。

如果我想要一个特定的选项卡来加载消费者，我会`Id`用我想要的选项卡的 id 填充。例如，要在当前选项卡中加载客户，我会使用

```
// Id was typically a Guid
var event = new LoadConsumerEvent() { Id = this.Id; }; 
```

然后在处理事件的订阅者中，如果事件不匹配，我会忽略它

```
if (e.Id == Guid.Empty || e.Id == this.Id)
{
    // Load Customer
} 
```

如果我只想要第一个可用的选项卡来处理事件，我会`IsHandled`在第一个订阅者中设置属性，如果它是真的则忽略该事件

```
if (e.IsHandled)
    return;

// Do processing

e.IsHandled = true; 
```

# c# - 从 html 节点返回 null

> ID：10993199
> 
> 赞同：2
> 
> 时间：2012-06-12T08:46:10.460
> 
> 标签：c#, html, xpath, html-agility-pack

我正在尝试从此[页面](http://www.google.com/finance?q=NYSE:CASC&fstype=ii "德克萨斯州")访问公司名称。

应该返回一个带有“级联公司”内部文本的节点，但是我得到了 null 。

```
HtmlNode htest = document.DocumentNode.SelectSingleNode("//*[@id='appbar']/div/div[2]/div[1]/span"); 
```

我错过了什么？

PS 必须与 Chrome 一起使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:23:55.920

I tried to reproduce your issue on my machine. I captured request & response data using Fiddler. I was surprised to notice that rendered html output from browser is different from my code.

From Fiddler the difference I noticed is the user agent value. Later I came up with this code and it works for me. Can you please try it and let me know. Please don't down vote me. I'm trying to help you ya..

```
string url = "http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii";
HtmlWeb web = new HtmlWeb();
web.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0"; // latest firefox 
HtmlDocument doc = web.Load(url);

var node = doc.DocumentNode.SelectSingleNode("//*[@id='appbar']/div/div[2]/div[1]/span")
//var node = doc.DocumentNode.SelectSingleNode("//div[@class='appbar-snippet-primary']/span") 
```

When I comment user agent line I am able to reproduce your issue. Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:09:53.023

在您链接到的页面上，没有带有 id 的元素，`appbar`只有一个带有类的 div，`appbar-hide`这是源中唯一存在 appbar 的地方。

当遇到这样的问题时，请尝试一步一步的方法。首先选择 xpath 中的第一个节点，即从它开始，`HtmlNode htest = document.DocumentNode.SelectSingleNode("//*[@id='appbar']");`它返回 null （在这种情况下，它将）你已经找到了错误所在。然后更正错误，如果您确信其余部分正常，请再次尝试完整的 xpath。如果您再次遇到错误，请将其返回到第二个元素，即。`//*[@id='appbar']/div`像这样进步，直到你得到你想要的元素

# plugins - 从网页静默打印

> ID：10993204
> 
> 赞同：3
> 
> 时间：2012-06-12T08:46:18.323
> 
> 标签：plugins, printing, cross-browser

我正在开发一个需要使用客户端打印机进行静默打印（没有打印对话框）的 Web 应用程序。

经过一些研究，我们发现我们可以使用 ActiveX 和 Foxit Reader 使其工作。

目前它工作得很好，但它只限制了我们使用 IE，我们希望它也可以与 Firefox 和 Chrome 一起使用。

我知道没有直接的代码可以让它工作，但必须有一个解决方法吗？

我需要的是启动例如 Chrome/Firefox 插件以访问本地打印机 - 或制作在客户端后台运行的 Windows 服务、更改浏览器设置、使用 ActionScript 等。

如果有人还说明 Facebook 如何从其网站访问本地网络摄像头，它可能会从网站访问客户端外围设备，这也将是很棒的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-13T15:50:50.780

对于仍然想要在不使用 ActiveX、扩展程序或客户端脚本的情况下在 Chrome 和/或 FireFox 上打印的信息的任何人，请参阅我对另一个类似问题的[回答。](https://stackoverflow.com/a/36603281/5516239)

# linux - 有没有一本书讲述了一些命令（例如“ls”）如何与 linux 内核一起使用

> ID：10993207
> 
> 赞同：0
> 
> 时间：2012-06-12T08:46:32.270
> 
> 标签：linux, kernel

我想知道有关这些命令与内核一起使用的详细信息，如果有人可以介绍这些书的话。例如，我在命令行控制台中输入“ls”，我想知道 linux 内核如何处理这个命令等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:49:07.340

你可以试试“Linux Kernel in a Nutshell”： [http ://www.kroah.com/lkn/](http://www.kroah.com/lkn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:49:41.207

这是 bash 命令列表的链接：[Bash commands](http://ss64.com/bash/)。

或者，您可以阅读手册页：在您的终端中，只需键入`man`您想要了解更多信息的命令（不带参数）。例子：

```
$ man ls 
```

这是输出的第一部分：

```
LS(1)                            User Commands                           LS(1)

NAME
       ls - list directory contents

SYNOPSIS
       ls [OPTION]... [FILE]...

DESCRIPTION
       List  information  about  the FILEs (the current directory by default).
       Sort entries alphabetically if none of -cftuvSUX nor --sort  is  speci‐
       fied.

... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T08:59:11.250

找出（如果你知道一些 C）的好方法是运行`strace -o <file-name> <command>`. 这将向您显示该命令进行的所有系统调用。它显示了这些命令如何与内核和标准库交互。但是请注意，您不能在所有*命令*上运行它：仅在*程序*上运行，因此要检查 shell 命令，您可以尝试`strace -o <file> sh -c <command>`。

顺便说一句，如果您不知道 C：您也可以在手册页中查找 strace 输出中命名的函数：例如`man read`

# android - Android PopupWindow 按钮点击后消失

> ID：10993211
> 
> 赞同：1
> 
> 时间：2012-06-12T08:46:41.273
> 
> 标签：android, popupwindow, onclicklistener

我对 Android上的**PopupWindow有一个非常令人沮丧的问题。**我已经实现了自己的类，它继承了**PopupWindow**并实现 **了 OnClickListener**。

使用自定义选择器添加按钮背景后，问题开始。单击按钮（开始新活动并关闭弹出窗口）后，此背景不断消失。*“聚焦并单击*”后它不会消失，只有在“*快速单击*”后才会消失。

任何想法/建议都会非常受欢迎！

```
public class TestPopup extends PopupWindow implements OnClickListener

protected LayoutInflater inflater;
protected Activity caller;
protected View popup;
protected View layout;

public TestPopup(Activity activity) {
    super(activity);
    popup = inflater.inflate(R.layout.popup, (ViewGroup) caller.findViewById(R.id.contentLayout));
    layout = popup.findViewById(R.id.layout);

    popup.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);

    Display display = caller.getWindowManager().getDefaultDisplay();
    setHeight(display.getHeight());
    setWidth(display.getWidth());
    setFocusable(true);
    setContentView(popup);

    // fix to allow Popup to be clickable!
    setBackgroundDrawable(new BitmapDrawable());

    popup.setOnClickListener(this);
    popup.findViewById(R.id.addButton).setOnClickListener(this);
    popup.findViewById(R.id.deleteButton).setOnClickListener(this);
}

public void onClick(View v) {
    Intent intent = null;
    if (v.getId() == R.id.addButton) {
        intent = new Intent(caller, AddActivity.class);
        intent.putExtra(AddActivity.ACTION_ADD, true);
    } else if (v.getId() == R.id.deleteButton) {
        intent = new Intent(caller, AddActivity.class);
        intent.putExtra(AddActivity.ACTION_DELETE, true);
    }

    if (intent != null) {
        caller.startActivity(intent);
    }

    TestPopup.this.dismiss();
} 
```

![弹出窗口](../Images/6527460d0df8e66480bbc3eee4e2878b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:11:33.463

一种解决方案是调用**popup.invalidate();** 在关闭弹出窗口之前。

# c++ - 用于查找给定 DLL 文件的依赖项的 C++ 代码

> ID：10993219
> 
> 赞同：-5
> 
> 时间：2012-06-12T08:46:59.087
> 
> 标签：c++, dll

我想编写一个列出给定 DLL 文件的依赖关系的 c++ 程序。

就像`dumpbin \DEPENDENTS <file name>`命令一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:50:08.400

查看 Matt Pietrek 的[PeDump 示例](http://www.wheaty.net/downloads.htm)。他展示了它是如何工作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:55:02.327

使用 Microsoft 的 PE 规范了解 .exe 和 .dll 文件的结构。还要检查这个：

[http://alcides-mp.com/2012/03/exports-control/](http://alcides-mp.com/2012/03/exports-control/)

# css - CSS-页脚和背景

> ID：10993226
> 
> 赞同：1
> 
> 时间：2012-06-12T08:47:30.377
> 
> 标签：css

我最近一直在做网站，遇到了一个大问题：http://jimbob.webatu.com/index.html（您需要查看网页上的编码）。我已经设置了我的网站所以有两个主要列，但居中在中间。 id wrap 是将所有内容居中，两列向左或向右浮动：

```
 #wrap    {
     width:750px;
     margin:0 auto;
     background-color:#6E6E6E;
     border-left:3px solid #A9E2F3;
     border-right:3px solid #A9E2F3;
     }
     #main    {
     float:left;
     width:496px;
     background:white;
     border-top-right-radius:5px 5px;
     border-bottom-right-radius:5px 5px;
     }
     #sidebar {
     float:right;
     width:250px;
     } ` 
```

最近虽然我尝试添加一个页脚栏，例如顶部的导航栏。这已通过使用“clear：both”设置为整体保持在经线中，并一直试图使其完全避免“wrap” id。但是出现问题并且控制“wrap”和“secondborder”的div不会完全关闭。此外，您可能会看到后面出现了一个灰色条，并且“换行”背景将不适用（我已将侧边栏背景设置为空，以便“换行”背景适用于它。这使它看起来更整洁） .我无法粘贴所需的编码，因为太分散且太长（查看网页上的页面源）。谁能为“换行”背景和“页脚”提供解决方案 不居中？在过去的 3 个月里，我只学习了 html 和编码，所以如果这是我犯的一个愚蠢的错误，请原谅我。再次链接到我的网站问题所在：[http://jimbob.webatu.com/index.html](http://jimbob.webatu.com/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:09:13.507

添加溢出：隐藏；到你的#wrap

```
#wrap {
    width: 750px;
    margin: 0 auto;
    background-color: #6E6E6E;
    border-left: 3px solid #A9E2F3;
    border-right: 3px solid #A9E2F3;
    height: auto;
    overflow: hidden;
    } 
```

为了让您的#footer 像页面底部的页脚一样，您必须将其从#sidebar 中取出并放置在#sidebar 关闭之后。这应该可以解决您的问题。

要修复#sidebar被切断，您需要将其向左浮动而不是向右浮动，

```
#sidebar {
    float: left;
    width: 250px;
    } 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:54:49.470

一般来说，你需要在你的浮动之后清除`div`。这告诉浏览器停止下一个元素的浮动。查看您在之前添加的 HTML`<div id="footer">` `<br style="clear:both" />`

此外，在您关闭之前`#wrap`添加另一个`<br style="clear:both" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:57:09.923

我刚刚在您的 secondborder 元素中添加了一个新的 div：`<div style="clear:both"></div>`这对问题进行了排序。您正在浮动并且没有清除侧边栏或主 div。

# ios - 如何使用 NSKeyedArchiver 归档弱链接？

> ID：10993229
> 
> 赞同：1
> 
> 时间：2012-06-12T08:47:45.343
> 
> 标签：ios, parent, composite, weak-references, nskeyedarchiver

我有一个复合结构，组件中有许多属性。我已经为每个参与者实现了 NSCoding 协议，强大的属性得到了很好的存档。

但是每个组件都与它的父组件有一个薄弱的链接。我想如果我简单地将父母编码为其余拥有的对象，那么冗余/重复的实例将在解码时产生。

如何在对象图中归档这样的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:45:16.807

我想我只需要使用条件编码 - [http://developer.apple.com/library/mac/documentation/cocoa/conceptual/Archiving/Articles/archives.html#//apple_ref/doc/uid/20000946-142208- BBCFHBHA](http://developer.apple.com/library/mac/documentation/cocoa/conceptual/Archiving/Articles/archives.html#//apple_ref/doc/uid/20000946-142208-BBCFHBHA) - 关于弱引用。我很快就会试试看。

> 通常，条件对象用于编码对对象的弱引用或非保留引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T09:51:14.143

根据[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Articles/codingctypes.html#//apple_ref/doc/uid/20001294-BBCBDHBI](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Articles/codingctypes.html#//apple_ref/doc/uid/20001294-BBCBDHBI)

> 您无法对指针进行编码并在解码时取回有用的东西。您必须对指针指向的信息进行编码。在非键控编码中也是如此。

# xml - 如何找到特定的 XML 节点并删除其父节点？

> ID：10993230
> 
> 赞同：1
> 
> 时间：2012-06-12T08:47:58.667
> 
> 标签：xml, vb6, xml-parsing

我有一个这样的 XML 文件

```
<abc>
  <ab>value</ab>
  <aa>time</aa>
  <ac>money</ac>
</abc>
<abc>
  <ab>right</ab>
  <aa>left</aa>
  <ac>straight</ac>
</abc> 
```

我想要的是我能够找到具有“左”值的节点，然后删除它的父节点，这样我最终得到的是

```
<abc>
  <ab>value</ab>
  <aa>time</aa>
  <ac>money</ac>
</abc> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:14:07.453

如果通过添加文档元素将其更正为有效 XML：

```
<doc>
    <abc>
        <ab>value</ab>
        <aa>time</aa>
        <ac>money</ac>
    </abc>
    <abc>
        <ab>right</ab>
        <aa>left</aa>
        <ac>straight</ac>
    </abc>
</doc> 
```

您可以执行以下操作：

```
Dim DOM As MSXML2.DOMDocument
Dim Node As MSXML2.IXMLDOMNode

Set DOM = New MSXML2.DOMDocument
With DOM
    .async = False
    .preserveWhiteSpace = True
    If .Load("sample.xml") Then
        .setProperty "SelectionLanguage", "XPath"
        Set Node = .selectSingleNode("//*[.='left']")
        If Not Node Is Nothing Then
            .documentElement.removeChild Node.parentNode
            On Error Resume Next
            Kill "sample.xml"
            On Error GoTo 0
            .save "sample.xml"
            MsgBox "Done, saved as sample.xml"
        Else
            MsgBox "No ""left"" found"
        End If
    Else
        MsgBox "Load failed!" & vbNewLine & vbNewLine _
             & CStr(.parseError.errorCode) & " " _
             & .parseError.reason
    End If
End With 
```

# ruby-on-rails - Ruby on Rails 以及如何使用 json 和 jquery 渲染部分

> ID：10993235
> 
> 赞同：0
> 
> 时间：2012-06-12T08:48:19.040
> 
> 标签：ruby-on-rails, json, jquery, renderpartial

Ruby on Rails 新手感到困惑和沮丧:) 我在这上面花了一天多的时间，并认为我可能只是让自己感到困惑。

基本上，我试图在视图中渲染一个部分。以下是我的具体内容：一个包含 2 个基本字段的表单：Category 和 SubCategory。SubCategory 会根据用户在 Category 中选择的内容而变化。我正在使用启用了资产管道的“JQuery”。这部分工作：

```
 contact_infos.js.coffee

    jQuery(document).ready(->
        $("select#contact_info_category_id").change(->
          id_value_string = $(@).val()
          if id_value_string == ""
            # if the id is empty remove all the sub_selection options from being selectable     and do not do any ajax
            $("select#contact_info_subcategory_id option").remove()
            row = "" + "" + ""
            $(row).appendTo("select#contact_info_subcategory_id")
          else
            # Send the request and update sub category dropdown
            tmp = '/subcategories/for_categoryid/' + id_value_string + '.json'
          $.ajax(
            type: 'GET',
            dataType: 'json',
            url: tmp,
            timeout: 2000,
            error: (XMLHttpRequest, errorTextStatus, error) -> alert "Failed to submit : " + errorTextStatus + " ;" + error,
              success: (data) ->
                # Clear all options from sub category select
                $("select#contact_info_subcategory_id option").remove()
                # put in a empty default line
                row = "" + "" + ""
                $(row).appendTo("select#contact_info_subcategory_id")
                # Fill sub category select
                $.each(data, (i, j) ->
                  row = "" + j.name + ""
                  $(row).appendTo("select#contact_info_subcategory_id")
                )
          )
        )
      ) 
```

它会正确生成 json 响应。

当表单加载时，除了 Category 和 SubCategory，我还有 2 个文本字段——previous_value 和 current_value；但是，如果 SubCategory == "Full" 那么我隐藏 previous_value 和 current_value 并需要插入一个带有新字段的部分。

我使用 JQuery 隐藏 previous_value 和 current_value 字段没有问题，看起来像这样（这被插入到上面的代码中）：

```
$("select#contact_info_subcategory_id").change(->
    id_text_string = $("#contact_info_subcategory_id option:selected").text()
    if id_text_string == "Full"
      $('#contact_info_previous_value_id').hide()
      $('#contact_info_current_value_id').hide()
    else
      $('#contact_info_previous_value_id').show()
      $('#contact_info_current_value_id').show()
  ) 
```

我在表单中创建了一个名为“test”的 div，如果 SubCategory 为“Full”，我想在其中插入新字段，当然，将此行插入 contact_infos.js.coffee 不起作用：

```
 $('#test').html('<%= escape_javascript render("contact_infos/_full_name_info") %>') 
```

因为我在页面上得到的只是字符串 "<%= escape_javascript render("contact_infos/_full_name_info") %>"

我尝试了以下但无法正常工作：
1\. 使用以下代码创建一个 new.json.erb 文件：

```
<% self.formats = ["html"] %>
      test = {
        "html":"<%= raw escape_javascript(render :partial =>     'contact_infos/full_name_info',
                    :content_type => 'text/html')} 
                %>"
      } 
```

此 json 文件从未触发。我的控制器有这条线：

```
format.json { render json: @contact_info } 
```

这是最好的方法吗？如果是，接下来我可以尝试什么？

2\. 我昨天看到了一个帖子（我现在找不到 - 在另一台计算机上）关于在 application.html.erb 布局文件中创建一个 javascript 变量（我称之为 fullnamefield）以及将 js 变量添加到new.html.erb 视图，我这样做了。我还在contacts_infos.js.coffee 中添加了这一行：

```
('#test').html(fullnamefield) 
```

它奏效了！！除了当我去网站的任何其他区域时，我得到了一个错误。
3\. 作为一种解决方法，我想过尝试将我的 jquery 生成的 json 更改为 js，然后尝试触发 new.js.erb。我在尝试转换 ajax 调用时遇到了麻烦。我可以创建“json”和“text”数据类型，但不能创建脚本（不知道为什么）。

所以...任何想法/帮助？我真的一直在搜索，我很沮丧，以至于我正在考虑从 JQuery 中创建所有字段并根据需要隐藏/显示它们，这实现起来非常简单，但只是错误的。

更新：尝试4（或者是40？）：

你写的让我思考......我想我已经接近了，但还没有。

在我的 _form.html.erb 中，我添加到子类别字段 data-remote、data-url 和 data-type：

```
<div class="field">
      <%= f.label :category_id %>
      <br/>
      <%= collection_select(:contact_info, :category_id, Category.all, :id, :name, options ={:prompt => "--Select a Category--"}) %>
    </div>
    <div class="field">
      <%= f.label :subcategory_id %>
      <br/>
      <%= collection_select(:contact_info, :subcategory_id, Subcategory.find_all_by_category_id(@contact_info.category_id), :id, :name, options ={:prompt => "--Select a SubCategory"}, "data-remote" => true, "data-url" => "/contact_infos/get_full_fields", "data-type" => :json ) %>
    </div> 
```

然后在contact_infos_controller.rb中我添加了：

```
def get_full_fields
    @full_name = FullName.new
    respond_to do |format|
      format.js
    end
  end 
```

在我的 routes.rb 中，我通过添加 collection do 修改了 contact_infos ...

```
 resources :contact_infos do
        collection do
          get 'get_full_fields'
        end
      end 
```

我创建了contact_infos\get_full_fields.js.erb：

```
var full_fields_form = $('<%= j(render(:partial => "contact_infos/full_name_info"))%>');
$('#test').html(full_fields_form); 
```

现在，当我使用调试器在浏览器中测试它并将 SubCategory 更改为“Full”时，我可以看到它运行正确（我认为），因为我得到了这个：

请求网址：http://localhost:3000/contact_infos/get_full_fields?contact_info%5Bsubcategory_id%5D=3 请求方法：GET 状态码：200 OK

“类型”显示为“文本/javascript”。响应选项卡仅显示 javascript 代码，但没有发生/触发。即使我只放置一个

```
alert('hello'); 
```

在 js 文件中没有任何反应。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:32:22.450

为什么不采用与获取子类别数据相同的方式呢？创建一个包含部分（和相应的控制器操作）的视图，并在您想要显示该内容时通过 ajax 调用它。

# java - 有效 web.xml 中的 web-fragment.xml 中缺少元素

> ID：10993236
> 
> 赞同：12
> 
> 时间：2012-06-12T08:48:20.210
> 
> 标签：java, tomcat

在我们的项目中，我们使用 web-fragments 来定义一些 servlet，以便可以轻松地在其他项目中使用这些工件。

现在奇怪的是我们有一个 web-fragment.xml，但它的一些内容并没有被添加到有效的 web.xml 中。

举例：

有效的 web.xml 中存在以下配置：

```
<filter>
    <filter-name>superUserAutomaticLogon</filter-name>
    <filter-class>nl.caiw.cool.util.filters.SuperUserAutomaticLogonFilter</filter-class>
    <async-supported>false</async-supported>
</filter> 
```

但以下不是：

```
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/toolbox/modules/*</url-pattern>
</filter-mapping> 
```

我们已经尝试了几件事，但我们无法弄清楚。希望这里有人可以向我们发送正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T10:43:44.993

> 现在奇怪的是我们有一个 web-fragment.xml，但它的一些内容并没有被添加到有效的 web.xml 中。

首先， a`web-fragment.xml`不会*物理*包含在 main`web.xml`中。所以当你说它没有被添加到有效`web.xml`时，我觉得你可能会出错。

`web.xml`Web 片段允许组件在运行时将自己注册到主组件。您会发现发生这种情况的唯一证据是实际尝试使用该组件。

我尝试了一个带有 web 片段的简单的 hello-world 示例并让它工作。为此，我使用 Tomcat 7 和 Servlet 3.0 webapp。

我的主要`web.xml`内部`WEB-INF`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>hello-world</display-name>

    <absolute-ordering>
        <name>filters</name>
    </absolute-ordering>
</web-app> 
```

我发现我们注册 a 的唯一方法`web-fragment.xml`是遵守以下规则：

1.  它必须被命名`web-fragment.xml`
2.  它必须放在一个JAR文件里面`WEB-INF/lib`
3.  `web-fragment.xml`必须存在于`META-INF`JAR 文件的目录中。

我的`web-fragment.xml`样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-fragment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-fragment_3_0.xsd" id="WebAppFragment_ID" version="3.0">
    <name>filters</name>
    <filter>
        <filter-name>interceptor</filter-name>
        <filter-class>com.adarshr.Interceptor</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>interceptor</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-fragment> 
```

通过上述最小设置，我能够让`Interceptor`过滤器被触发，尽管它被放置在`web-fragment.xml`.

最后，这是我的目录结构（使用[http://www.adarshr.com/treegen](http://www.adarshr.com/treegen)生成）

```
+- hello-world
   |
   +- WEB-INF
       |
       +- lib
       |   |
       |   |- my-library.jar
       |
       |- web.xml 
```

JAR 文件`my-library.jar`具有以下结构：

```
+- my-library.jar
   |
   +- META-INF
       |
       |- web-fragment.xml 
```

一些参考资料：

*   [https://blogs.oracle.com/swchan/entry/servlet_3_0_web_fragment](https://blogs.oracle.com/swchan/entry/servlet_3_0_web_fragment)
*   [http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part2.html](http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part2.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-24T03:07:32.850

也许你可以检查一下`web.xml`没有`metadata-complete="true"`设置。根据 Servlet 规范，如果此标志设置为 true，则不会加载`web-fragment.xml`或任何注释，例如`@WebFilter`

# r - 如何避免图例中的某些值？

> ID：10993238
> 
> 赞同：2
> 
> 时间：2012-06-12T08:48:41.740
> 
> 标签：r

下面给出的代码将读取并显示带有图例的文件图像。我如何告诉 R 在绘制图例时不要考虑 -9999 或任何其他值的值。

```
conne <- file("C:\\DEM.bin", "rb")
image(t(t(y)),ylim=c(1,0))
image.plot(t(t(y)), add = FALSE, legend.shrink = 0.9,legend.width = 1.2,
           legend.mar = NULL, graphics.reset = FALSE, horizontal = FALSE, bigplot = NULL,
           smallplot = NULL,legend.only = FALSE,lab.breaks=NULL, axis.args=NULL)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:58:00.647

让我们创建一个模型数据集（您的数据集不可重现）：

```
m = matrix(runif(100), 10, 10)
m[sample(1:10, size = 2), sample(1:10, size = 2)] = -9999 
```

矩阵`m`现在包含两个您不想绘制的值：

![在此处输入图像描述](../Images/8382bc5d04fbd2c84051cecbffd840a6.png)

解决方案是制作它们`NA`，在这种情况下，R 会知道它们缺少值：

```
m[m == -9999] <- NA
image(m) 
```

![在此处输入图像描述](../Images/f804e4b4be683825fb9f2f9344a0d190.png)

这些`NA`值现在被忽略，并被白色像素替换，您的图像看起来很正常。如果有多个值要设为 NA：

```
m[m %in% c(-9999, 1e30, -1)] <- NA 
```

现在列表中的所有值都标记为`NA`.

# c++ - DirectX 9.0 的多个全屏窗口

> ID：10993241
> 
> 赞同：6
> 
> 时间：2012-06-12T08:49:02.177
> 
> 标签：c++, winapi, directx

这有点极端，但我正在开发一款使用多台显示器的游戏。由于此问题范围之外的原因，我使用的是“多设备方法”而不是交换链。我的代码类似于以下示例：

[http://www.codesampler.com/dx9src/dx9src_1.htm#dx9_multiple_devices](http://www.codesampler.com/dx9src/dx9src_1.htm#dx9_multiple_devices)

我正在努力解决的问题，并且我找不到任何文档，是是否可以在真正的全屏模式下运行两个窗口（即`d3dpp.Windowed = FALSE;`）。目前，我`CreateDevice`在第二次调用时收到“无效参数”HRESULT。如果*其中一个*窗口是全屏的，但不能同时全屏，它可以正常工作。我希望有一个设置来完成这项工作......

提前喝彩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T08:56:42.400

根据 Direct3D 9 文档（[使用多个监视器系统](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206364%28v=vs.85%29.aspx)）：“实际含义是，多监视器应用程序可以将多个设备置于全屏模式，但前提是所有这些设备都用于不同的适配器，由相同的Direct3D9 对象，并且都共享同一个焦点窗口。”

您会注意到每个设备初始化都有两个窗口句柄；演示窗口和焦点窗口。焦点窗口（传递给[IDirect3D9::CreateDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174313%28v=vs.85%29.aspx)）用于处理诸如从前台切换到后台或 Alt+Tab 之类的事件。演示窗口被传递到 D3DPRESENT_PARAMETERS 结构中，并且仅用作 Direct3D 的画布。

您应该将您创建的一个窗口（可能是第一个）标记为焦点窗口。跨设备共享焦点窗口，但保持“画布”（演示）窗口分开。

**编辑：** [这](http://www.gamedev.net/topic/356027-directx-9-multimonitor-devices/page__view__findpost__p__4908277)也可以帮助你。

> 为两个设备创建一个焦点窗口。
> 
> （可选）为第一个适配器创建一个设备窗口。
> 
> 为第二个适配器创建一个设备窗口。
> 
> 创建一个 direct3d9 上下文。
> 
> 使用它来创建两个设备。
> 
> 使用共享焦点窗口和（可选）第一个设备窗口创建第一个全屏设备。
> 
> 使用共享焦点窗口和第二个设备窗口创建第二个全屏设备。
> 
> 重置第一个设备。
> 
> 共享焦点窗口直接作为参数传递给 CreateDevice。
> 
> 设备窗口在表示参数结构中传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-21T15:13:50.097

**Q>**目前我在第二次调用 CreateDevice 时得到一个“无效参数”HRESULT。如果其中一个窗口是全屏的，但不能同时全屏，它可以正常工作。

**因为您正在使用相同的适配器 ID 0 创建两个不同的设备。在第二个创建设备调用中使用适配器 ID 作为 1！**

创建设备 2 或 3 或 4... 后要完成的重要步骤是**重置设备 1（默认设备 id 0）。**

```
Create Device 1
Create Device 2
........
........
Create Device n    
Reset Device 1 
```

为了让您和他人的生活更轻松，我添加了一个**工作代码**，用于支持全屏多显示器（Directx 9）。请注意，我已从您在问题中提到的 Web 链接获取的示例代码中添加/更改了几行代码。

```
#define STRICT
#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <mmsystem.h>
#include <stdio.h>
#include <d3d9.h>
#include <d3dx9.h>
#include "resource.h"

// define the screen resolution
#define SCREEN_WIDTH 1920
#define SCREEN_HEIGHT 1080

//-----------------------------------------------------------------------------
// GLOBALS
//-----------------------------------------------------------------------------
LPDIRECT3D9 g_pD3D = NULL;
HWND g_hWnd_0 = NULL; // Handle to the first window
HWND g_hWnd_1 = NULL; // Handle to the second window

LPDIRECT3DDEVICE9 g_pd3dDevice_0 = NULL; // Direct3d device for the first window
LPDIRECT3DDEVICE9 g_pd3dDevice_1 = NULL; // Direct3d device for the second window

LPD3DXMESH g_pTeapotMesh_0 = NULL; // The two devices can't share resources, so we'll
LPD3DXMESH g_pTeapotMesh_1 = NULL; // have to create two meshes... one for each device

D3DMATERIAL9 g_teapotMtrl;
D3DLIGHT9 g_pLight0;

LPD3DXFONT g_pd3dxFont = NULL;

DWORD g_dwBackBufferWidth = 0;
DWORD g_dwBackBufferHeight = 0;

bool windowed = false;

float g_fSpinX = 0.0f;
float g_fSpinY = 0.0f;

double g_dElpasedFrameTime = 0.0f;
double g_dElpasedAppTime = 0.0f;
double g_dCurrentTime = 0.0f;
double g_dLastTime = 0.0f;

struct Vertex
{
    float x, y, z; // Position of vertex in 3D space
    float nx, ny, nz; // Normal for lighting calculations
    DWORD diffuse; // Diffuse color of vertex

    enum FVF
    {
        FVF_Flags = D3DFVF_XYZ | D3DFVF_NORMAL | D3DFVF_DIFFUSE
    };
};

#define TWO

//-----------------------------------------------------------------------------
// PROTOTYPES
//-----------------------------------------------------------------------------
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow);
LRESULT CALLBACK WindowProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);
void CreateFont(void);
void init_0(void);
void init_1(void);
void shutDown_0(void);
void shutDown_1(void);
void render_0(void);
void render_1(void);
void LoadModels(void);
void ResetDevice(void);

//-----------------------------------------------------------------------------
// Name: WinMain()
// Desc: The application's entry point
//-----------------------------------------------------------------------------
int WINAPI WinMain( HINSTANCE hInstance,
    HINSTANCE hPrevInstance,
    LPSTR lpCmdLine,
    int nCmdShow )
{
    WNDCLASSEX winClass;
    MSG uMsg;
    bool deviceReset = FALSE;

    memset(&uMsg,0,sizeof(uMsg));
    winClass.lpszClassName = "MY_WINDOWS_CLASS";
    winClass.cbSize = sizeof(WNDCLASSEX);
    winClass.style = CS_HREDRAW | CS_VREDRAW;
    winClass.lpfnWndProc = WindowProc;
    winClass.hInstance = hInstance;
    winClass.hIcon = LoadIcon(hInstance, (LPCTSTR)IDI_DIRECTX_ICON);
    winClass.hIconSm = LoadIcon(hInstance, (LPCTSTR)IDI_DIRECTX_ICON);
    winClass.hCursor = LoadCursor(NULL, IDC_ARROW);
    winClass.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);
    winClass.lpszMenuName = NULL;
    winClass.cbClsExtra = 0;
    winClass.cbWndExtra = 0;

    if(!RegisterClassEx( &winClass) )
        return E_FAIL;

    //
    // Create window #0...
    //

    g_hWnd_0 = CreateWindowEx( NULL, "MY_WINDOWS_CLASS",
        "Direct3D (DX9) - Multiple Devices (Window #0)",
        WS_EX_TOPMOST | WS_POPUP, // fullscreen values /* WS_OVERLAPPEDWINDOW | WS_VISIBLE,*/
        0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, NULL, NULL, hInstance, NULL );

    if( g_hWnd_0 == NULL )
        return E_FAIL;

    ShowWindow( g_hWnd_0, nCmdShow );
    UpdateWindow( g_hWnd_0 );

#ifdef TWO
    //
    // Create window #1...
    //
    g_hWnd_1 = CreateWindowEx( NULL, "MY_WINDOWS_CLASS",
        "Direct3D (DX9) - Multiple Devices (Window #1)",
        WS_EX_TOPMOST | WS_POPUP, // fullscreen values /* WS_OVERLAPPEDWINDOW | WS_VISIBLE,*/
        1920, 0, SCREEN_WIDTH, SCREEN_HEIGHT, NULL, NULL, hInstance, NULL );

    if( g_hWnd_1 == NULL )
        return E_FAIL;

    ShowWindow( g_hWnd_1, nCmdShow );
    UpdateWindow( g_hWnd_1 );
#endif
    //
    // Init Direct3D usage on both windows...
    //

    init_0();
#ifdef TWO
    init_1();
#endif

    ResetDevice(); // Important !!!

    LoadModels();

    while( uMsg.message != WM_QUIT )
    {
        if( PeekMessage( &uMsg, NULL, 0, 0, PM_REMOVE ) )
        {
            TranslateMessage( &uMsg );
            DispatchMessage( &uMsg );
        }
        else
        {
            g_dCurrentTime = timeGetTime();
            g_dElpasedFrameTime = g_dCurrentTime - g_dLastTime; // How much time has passed since the last frame?
            g_dElpasedAppTime += g_dElpasedFrameTime; // How much time has passed overall for the application?
            g_dLastTime = g_dCurrentTime;

            render_0();
#ifdef TWO
            render_1();
#endif
        }
    }

    //
    // Cleanup Direct3D usage on both windows...
    //
#ifdef TWO
    shutDown_1();
#endif
    shutDown_0();

    UnregisterClass( "MY_WINDOWS_CLASS", winClass.hInstance );
    return uMsg.wParam;
}

void ResetDevice(void)
{
    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory(&d3dpp, sizeof(d3dpp));
    d3dpp.Windowed = windowed;
    d3dpp.hDeviceWindow = g_hWnd_0;
    d3dpp.SwapEffect = D3DSWAPEFFECT_FLIP;
    d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;
    d3dpp.BackBufferWidth = SCREEN_WIDTH; // set the width of the buffer
    d3dpp.BackBufferHeight = SCREEN_HEIGHT; // set the height of the buffer
    d3dpp.BackBufferCount = 1;
    d3dpp.EnableAutoDepthStencil = TRUE;
    d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_ONE;
    g_pd3dDevice_0->Reset(&d3dpp);
}

void LoadModels(void)
{
    D3DXMATRIX matProj;
    D3DXMatrixPerspectiveFovLH( &matProj, D3DXToRadian(45.0f), 1920.0f / 1080.0f, 0.1f, 100.0f );
    g_pd3dDevice_0->SetTransform( D3DTS_PROJECTION, &matProj );

    g_pd3dDevice_0->SetRenderState( D3DRS_ZENABLE, TRUE );
    g_pd3dDevice_0->SetRenderState( D3DRS_LIGHTING, TRUE );
    g_pd3dDevice_0->SetRenderState( D3DRS_SPECULARENABLE, TRUE );

    // Setup a material for the teapot
    ZeroMemory( &g_teapotMtrl, sizeof(D3DMATERIAL9) );

    g_teapotMtrl.Diffuse.r = 1.0f;
    g_teapotMtrl.Diffuse.g = 1.0f;
    g_teapotMtrl.Diffuse.b = 1.0f;
    g_teapotMtrl.Diffuse.a = 1.0f;

    // Setup a simple directional light and some ambient...
    g_pLight0.Type = D3DLIGHT_DIRECTIONAL;
    g_pLight0.Direction = D3DXVECTOR3( 1.0f, 0.0f, 1.0f );

    g_pLight0.Diffuse.r = 1.0f;
    g_pLight0.Diffuse.g = 1.0f;
    g_pLight0.Diffuse.b = 1.0f;
    g_pLight0.Diffuse.a = 1.0f;

    g_pLight0.Specular.r = 1.0f;
    g_pLight0.Specular.g = 1.0f;
    g_pLight0.Specular.b = 1.0f;
    g_pLight0.Specular.a = 1.0f;

    g_pd3dDevice_0->SetLight( 0, &g_pLight0 );
    g_pd3dDevice_0->LightEnable( 0, TRUE );

    g_pd3dDevice_0->SetRenderState( D3DRS_AMBIENT, D3DCOLOR_COLORVALUE( 0.2f, 0.2f, 0.2f, 1.0f ) );

    // Load up the teapot mesh...
    D3DXLoadMeshFromX( "teapot.x", D3DXMESH_SYSTEMMEM, g_pd3dDevice_0, NULL, NULL, NULL, NULL, &g_pTeapotMesh_0 );

    CreateFont();

#ifndef TWO
    return;
#endif

    D3DXMatrixPerspectiveFovLH( &matProj, D3DXToRadian(45.0f), 1920.0f / 1080.0f, 0.1f, 100.0f );
    g_pd3dDevice_1->SetTransform( D3DTS_PROJECTION, &matProj );

    g_pd3dDevice_1->SetRenderState( D3DRS_ZENABLE, TRUE );
    g_pd3dDevice_1->SetRenderState( D3DRS_LIGHTING, TRUE );
    g_pd3dDevice_1->SetRenderState( D3DRS_SPECULARENABLE, TRUE );

    // Setup a material for the teapot
    ZeroMemory( &g_teapotMtrl, sizeof(D3DMATERIAL9) );

    g_teapotMtrl.Diffuse.r = 1.0f;
    g_teapotMtrl.Diffuse.g = 1.0f;
    g_teapotMtrl.Diffuse.b = 1.0f;
    g_teapotMtrl.Diffuse.a = 1.0f;

    // Setup a simple directional light and some ambient...
    g_pLight0.Type = D3DLIGHT_DIRECTIONAL;
    g_pLight0.Direction = D3DXVECTOR3( 1.0f, 0.0f, 1.0f );

    g_pLight0.Diffuse.r = 1.0f;
    g_pLight0.Diffuse.g = 1.0f;
    g_pLight0.Diffuse.b = 1.0f;
    g_pLight0.Diffuse.a = 1.0f;

    g_pLight0.Specular.r = 1.0f;
    g_pLight0.Specular.g = 1.0f;
    g_pLight0.Specular.b = 1.0f;
    g_pLight0.Specular.a = 1.0f;

    g_pd3dDevice_1->SetLight( 0, &g_pLight0 );
    g_pd3dDevice_1->LightEnable( 0, TRUE );

    g_pd3dDevice_1->SetRenderState( D3DRS_AMBIENT, D3DCOLOR_COLORVALUE( 0.2f, 0.2f, 0.2f, 1.0f ) );

    // Load up the teapot mesh...
    D3DXLoadMeshFromX( "teapot.x", D3DXMESH_SYSTEMMEM, g_pd3dDevice_1, NULL, NULL, NULL, NULL, &g_pTeapotMesh_1 );
}

//-----------------------------------------------------------------------------
// Name: WindowProc()
// Desc: The window's message handler
//-----------------------------------------------------------------------------
LRESULT CALLBACK WindowProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam )
{
    static POINT ptLastMousePosit;
    static POINT ptCurrentMousePosit;
    static bool bMousing;

    switch( msg )
    {
    case WM_KEYDOWN:
        {
            switch( wParam )
            {
            case VK_ESCAPE:
                PostQuitMessage(0);
                break;
            }
        }
        break;

    case WM_LBUTTONDOWN:
        {
            ptLastMousePosit.x = ptCurrentMousePosit.x = LOWORD (lParam);
            ptLastMousePosit.y = ptCurrentMousePosit.y = HIWORD (lParam);
            bMousing = true;
        }
        break;

    case WM_LBUTTONUP:
        {
            bMousing = false;
        }
        break;

    case WM_MOUSEMOVE:
        {
            ptCurrentMousePosit.x = LOWORD (lParam);
            ptCurrentMousePosit.y = HIWORD (lParam);

            if( bMousing )
            {
                g_fSpinX -= (ptCurrentMousePosit.x - ptLastMousePosit.x);
                g_fSpinY -= (ptCurrentMousePosit.y - ptLastMousePosit.y);
            }

            ptLastMousePosit.x = ptCurrentMousePosit.x;
            ptLastMousePosit.y = ptCurrentMousePosit.y;
        }
        break;

    case WM_CLOSE:
        {
            PostQuitMessage(0);
        }

    case WM_DESTROY:
        {
            PostQuitMessage(0);
        }
        break;

    default:
        {
            return DefWindowProc( hWnd, msg, wParam, lParam );
        }
        break;
    }

    return 0;
}

void CreateFont( void )
{
    HRESULT hr;
    HDC hDC;
    //HFONT hFont;
    int nHeight;
    int nPointSize = 9;
    //char strFontName[] = "Arial";

    hDC = GetDC( NULL );

    nHeight = -( MulDiv( nPointSize, GetDeviceCaps(hDC, LOGPIXELSY), 72 ) );

    ReleaseDC( NULL, hDC );

    // Create a font for statistics and help output
    hr = D3DXCreateFont( g_pd3dDevice_0, nHeight, 0, FW_BOLD, 0, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, TEXT("Arial"), &g_pd3dxFont );

    if( FAILED( hr ) ) MessageBox(NULL, "Call to D3DXCreateFont failed!", "ERROR", MB_OK | MB_ICONEXCLAMATION);
}

//-----------------------------------------------------------------------------
// Name: init_0()
// Desc:
//-----------------------------------------------------------------------------
void init_0( void )
{
    g_pD3D = Direct3DCreate9( D3D_SDK_VERSION );

    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory( &d3dpp, sizeof(d3dpp) );

    d3dpp.Windowed = windowed;
    d3dpp.hDeviceWindow = g_hWnd_0;
    d3dpp.SwapEffect = D3DSWAPEFFECT_FLIP;
    d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;
    d3dpp.BackBufferWidth = SCREEN_WIDTH; // set the width of the buffer
    d3dpp.BackBufferHeight = SCREEN_HEIGHT; // set the height of the buffer
    d3dpp.BackBufferCount = 1;
    d3dpp.EnableAutoDepthStencil = TRUE;
    d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_ONE;

    g_pD3D->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, g_hWnd_0, D3DCREATE_HARDWARE_VERTEXPROCESSING, &d3dpp, &g_pd3dDevice_0 );

}

//-----------------------------------------------------------------------------
// Name: init_1()
// Desc:
//-----------------------------------------------------------------------------
void init_1( void )
{
    HWND window;

    if(!windowed)
    {
        window = g_hWnd_0;
    }
    else
    {
        window = g_hWnd_1;
    }

    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory( &d3dpp, sizeof(d3dpp) );
    d3dpp.Windowed = windowed;
    d3dpp.hDeviceWindow = window;
    d3dpp.SwapEffect = D3DSWAPEFFECT_FLIP;
    d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;
    d3dpp.BackBufferWidth = SCREEN_WIDTH; // set the width of the buffer
    d3dpp.BackBufferHeight = SCREEN_HEIGHT; // set the height of the buffer
    d3dpp.BackBufferCount = 1;
    d3dpp.EnableAutoDepthStencil = TRUE;
    d3dpp.AutoDepthStencilFormat = D3DFMT_D16;
    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_ONE;

    g_pD3D->CreateDevice( 1, D3DDEVTYPE_HAL, window, D3DCREATE_HARDWARE_VERTEXPROCESSING, &d3dpp, &g_pd3dDevice_1 );

}

//-----------------------------------------------------------------------------
// Name: shutDown()
// Desc:
//-----------------------------------------------------------------------------
void shutDown_0( void )
{
    if( g_pTeapotMesh_0 != NULL )
        g_pTeapotMesh_0->Release();

    if( g_pd3dDevice_0 != NULL )
        g_pd3dDevice_0->Release();

    if( g_pD3D != NULL )
        g_pD3D->Release();
}

//-----------------------------------------------------------------------------
// Name: shutDown()
// Desc:
//-----------------------------------------------------------------------------
void shutDown_1( void )
{
    if( g_pTeapotMesh_1 != NULL )
        g_pTeapotMesh_1->Release();

    if( g_pd3dDevice_1 != NULL )
        g_pd3dDevice_1->Release();
}

//-----------------------------------------------------------------------------
// Name: render_0()
// Desc:
//-----------------------------------------------------------------------------
void render_0( void )
{
    D3DXMATRIX matView;
    D3DXMATRIX matWorld;
    D3DXMATRIX matRotation;
    D3DXMATRIX matTranslation;
    static int nFrameCount = 0;
    static double nTimeOfLastFPSUpdate = 0.0;
    static char fpsString[50] = "Frames Per Second = ";
    RECT destRect;

    // Now we can clear just view-port's portion of the buffer to red...
    g_pd3dDevice_0->Clear( 0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, D3DCOLOR_COLORVALUE( 1.0f, 0.0f, 0.0f, 1.0f ), 1.0f, 0 );

    g_pd3dDevice_0->BeginScene();

    // For the left view-port, leave the view at the origin...
    D3DXMatrixIdentity( &matView );
    g_pd3dDevice_0->SetTransform( D3DTS_VIEW, &matView );

    // ... and use the world matrix to spin and translate the teapot
    // out where we can see it...
    D3DXMatrixRotationYawPitchRoll( &matRotation, D3DXToRadian(g_fSpinX), D3DXToRadian(g_fSpinY), 0.0f );
    D3DXMatrixTranslation( &matTranslation, 0.0f, 0.0f, 5.0f );
    matWorld = matRotation * matTranslation;
    g_pd3dDevice_0->SetTransform( D3DTS_WORLD, &matWorld );

    g_pd3dDevice_0->SetMaterial( &g_teapotMtrl );
    g_pTeapotMesh_0->DrawSubset(0);

    g_pd3dDevice_0->EndScene();

    // Report frames per second and the number of objects culled...
    ++nFrameCount;

    if( g_dElpasedAppTime - nTimeOfLastFPSUpdate > 1000 ) // Update once a second
    {
        sprintf( fpsString, "Frames Per Second = %4.2f", nFrameCount*1000.0/(g_dElpasedAppTime - nTimeOfLastFPSUpdate) );

        nTimeOfLastFPSUpdate = g_dElpasedAppTime;
        nFrameCount = 0;
    }

    SetRect( &destRect, 5, 5, 0, 0 );

    g_pd3dxFont->DrawText( NULL, fpsString, -1, &destRect, DT_NOCLIP, D3DXCOLOR( 1.0f, 1.0f, 1.0f, 1.0f ) );

    g_pd3dDevice_0->Present( NULL, NULL, NULL, NULL );
}

//-----------------------------------------------------------------------------
// Name: render_1()
// Desc:
//-----------------------------------------------------------------------------
void render_1( void )
{
    D3DXMATRIX matView;
    D3DXMATRIX matWorld;
    D3DXMATRIX matRotation;
    D3DXMATRIX matTranslation;

    // Now we can clear just view-port's portion of the buffer to green...
    g_pd3dDevice_1->Clear( 0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, D3DCOLOR_COLORVALUE( 0.0f, 1.0f, 0.0f, 1.0f ), 1.0f, 0 );

    g_pd3dDevice_1->BeginScene();

    // For the left view-port, leave the view at the origin...
    D3DXMatrixIdentity( &matView );
    g_pd3dDevice_1->SetTransform( D3DTS_VIEW, &matView );

    // ... and use the world matrix to spin and translate the teapot
    // out where we can see it...
    D3DXMatrixRotationYawPitchRoll( &matRotation, D3DXToRadian(g_fSpinX), D3DXToRadian(g_fSpinY), 0.0f );
    D3DXMatrixTranslation( &matTranslation, 0.0f, 0.0f, 5.0f );
    matWorld = matRotation * matTranslation;
    g_pd3dDevice_1->SetTransform( D3DTS_WORLD, &matWorld );

    g_pd3dDevice_1->SetMaterial( &g_teapotMtrl );
    g_pTeapotMesh_1->DrawSubset(0);

    g_pd3dDevice_1->EndScene();

    // We're done! Now, we just call Present()
    g_pd3dDevice_1->Present( NULL, NULL, NULL, NULL );
} 
```

# linux - 当进程在 Linux 中终止时文件描述符是否关闭？

> ID：10993245
> 
> 赞同：3
> 
> 时间：2012-06-12T08:49:15.357
> 
> 标签：linux, ruby-on-rails-3, process, file-descriptor

Linux（Ubuntu）中有一个进程会打开一个文件进行读取，但不会故意关闭它。进程终止时操作系统是否**自动**关闭文件描述符？

我的具体情况是在 Rails 应用程序中，我在其中打开一个二进制文件。我的网络服务器产生了多个 Rails 进程。该文件是从每个 Rails 进程中的单例打开的。我需要知道当 Rails 进程终止时这个二进制文件是否会自动关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:15:53.720

是的，关闭所有打开的描述符是进程终止例程的一部分。您可以在函数中看到它，该[`do_exit()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/exit.c;h=d8bd3b425fa78413f94c9278f481672faebb999c;hb=76e10d158efb6d4516018846f60c2ab5501900bc#n898)函数调用的函数[`exit_files()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/exit.c;h=d8bd3b425fa78413f94c9278f481672faebb999c;hb=76e10d158efb6d4516018846f60c2ab5501900bc#n988)在某些时候也会调用[`close_files()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/exit.c;h=d8bd3b425fa78413f94c9278f481672faebb999c;hb=76e10d158efb6d4516018846f60c2ab5501900bc#n457).

# java - 实时统计中的 Cassandra 计数器列

> ID：10993248
> 
> 赞同：3
> 
> 时间：2012-06-12T08:49:28.493
> 
> 标签：java, statistics, cassandra, hector

我想构建一个基于 Cassandra 进行统计页面视图的程序，我知道如果我们使用计数器列可以做到这一点。但是我有一个麻烦，如果我们有很多客户尝试更新它，Counter 列就不能正常工作。（这使得这个计数器的值是错误的）

我正在阅读`Cage`，但我想知道：这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:19:11.590

即使您有许多客户端更新它们，计数器列也应该工作，应该不需要锁定。

如果您正在使用 cassandra 进行统计，请查看[coutandra 。](http://countandra.org/)

# hibernate - 休眠条件按列表过滤对象

> ID：10993250
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:49:34.773
> 
> 标签：hibernate, criteria

我如何通过它们的列表过滤掉一些实体，我尝试了以下方法，但我无法解析属性：实体：MyEntity：

```
 public List getEntities(Set<MyEntity> blockedEntities) {
            Session session = getCurrentSession();
            Criteria crit = session.createCriteria(MyEntity.class, "entity");
            crit.add(Restrictions.not(Restrictions.in("entity", blockedEntities)));
            return (ArrayList<MyEntity>) crit.list();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:56:18.277

尝试使用 ID：

```
crit.add(Restrictions.not(Restrictions.in("entity.id", idsOfTheBlockedEntities))); 
```

此外，您不应将结果转换为`ArrayList<MyEntity>`，而应转换为`List<MyEntity>`.

# mysql - 将两个 group by 命令合二为一

> ID：10993251
> 
> 赞同：0
> 
> 时间：2012-06-12T08:49:37.820
> 
> 标签：mysql, sql, select, group-by, message

我有一张桌子

```
________________________________________________________________________________
|                         Message                                               |
|_______________________________________________________________________________|
| ID(INT) |  Text(TEXT) |read(TINYINT(0/1)) |deleted(TINYINT(0/1))|  User_id    |
| 1       | How Are You?|      0            |        0            |    6        |
| 2       | Fine        |      0            |        1            |    4        |
| 3       | Message 3   |      1            |        0            |    6        |
| 4       | Message 4   |      0            |        1            |    6        |
| 5       | Message 5   |      1            |        0            |    5        |
|_________|_____________|___________________|_____________________|_____________| 
```

现在我想选择 user_id=6 的消息，并分别选择 read=0 和 read=1 的列数。我知道这可以通过命令分组来完成，我目前使用两个 sql 查询来完成。可能有人加入他们合二为一

```
select message,count(*) from message where User_id=6 and read=0 group by id;//for unread message
select message,count(*) from message where User_id=6 and read=1 group by id;//for read message 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:54:29.890

加入你的两个查询很容易，但我没有得到你真正想要的。

```
SELECT `message`, count(*) AS `cnt` , `read`
FROM message 
WHERE `User_id`=6 
  AND `read` IN ( 0, 1 ) 
GROUP BY `id` , `read`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:05:03.353

你为什么不

```
select
  message,
  sum(read) as num_read,
  sum(case read when 0 then 1 else 0 end) as num_unread
from message
where user_id = 6
group by user_id 
```

? 您可以逐行删除 where 或 group，具体取决于您的实际需要和 SQL 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:58:54.527

尝试这个：

```
select read,id,count(*) 
  from message 
 where user_id = 6 and read in (0,1) group by read,id 
```

# c# - Ruby 与数组有关的 && 运算符

> ID：10993256
> 
> 赞同：1
> 
> 时间：2012-06-12T08:49:53.540
> 
> 标签：c#, ruby, porting

我将 Amp 的[DiffLib](https://bitbucket.org/carbonica/amp/src/7dbef9c17c2e/lib/amp/encoding/difflib.rb#cl-114)实现移植[到 C#](http://bit.ly/MFS4hn)并偶然发现了这一行 (#114)：

```
@b2j[@a[i,1]] && @b2j[@a[i,1]].each do |j| 
```

现在，我移植了其他所有内容，并且大多数测试似乎都通过了，但我仍然不明白这是`&&`为了什么。我认为它是 C# 中的那些内容：

```
if(b2j.ContainsKey(a[i]))
{
    foreach(var j in b2j[a[i]]) 
```

但仍然不是特别确定这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:53:58.507

它说 if `@b2j[@a[i,1]]`is not`nil`和 not `false`，然后继续并`each`对其进行迭代。在这种情况下，它用于控制程序的流程。

# java - 将 Sonar 配置为忽略单行 if 语句

> ID：10993258
> 
> 赞同：2
> 
> 时间：2012-06-12T08:50:02.263
> 
> 标签：java, sonarqube

有没有办法将 Sonar 配置为忽略单行 if 语句，例如

```
if (value == true) return; 
```

同时标记多行 if 语句而没有大括号，例如

```
if (value == true)
    return; 
```

作为违规行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:16:53.303

没有符合您需要的规则，但您可以使用 XPath 编写自己的规则。[你可以在这里](https://web.archive.org/web/20121105194939/http://pmd.sourceforge.net:80/xpathruletutorial.html)找到一个教程

如果你不知道如何扩展声纳的编码规则，你可以在[这里找到一个教程](http://docs.sonarqube.org/display/SONAR/Extending+Coding+Rules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T09:49:44.307

SonarJava（SonarQube 中 Java 静态分析的默认插件）提供了始终为控制流结构强制使用花括号[的规则。](https://rules.sonarsource.com/java/RSPEC-121)

但是，这将不允许单行 if 语句。您需要使用自定义插件为此创建自定义规则。请参阅[编写自定义规则的教程](https://docs.sonarqube.org/display/PLUG/Writing+Custom+Java+Rules+101)。您可以使用[SonarJava 规则的实现](https://github.com/SonarSource/sonar-java/blob/cb1baeadb6f9beaab8a04a639a33b90944f73f19/java-checks/src/main/java/org/sonar/java/checks/MissingCurlyBracesCheck.java "缺少花括号")作为指导。

# visual-studio-2010 - 不知道为什么 REG ADD 命令行不在 VS setup post build 事件中运行

> ID：10993271
> 
> 赞同：1
> 
> 时间：2012-06-12T08:50:52.033
> 
> 标签：visual-studio-2010, registry, vsto, windows-installer, post-build-event

在构建后事件中，我有以下命令行，

```
REG ADD HKLM\SOFTWARE\Microsoft\Office\12.0\Common\General /v EnableLocalMachineVSTO /t REG_DWORD /d 1 
```

，它在注册表项下添加了一个 DWORD 类型的值`General`。

我不知道我在这里还缺少什么-命令行`REG ADD`似乎对我不起作用。安装后，该密钥仍然丢失。如果我使用命令提示符单独运行它，那一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-12T09:54:21.057

Visual Studio 构建事件存在一些问题。即使拥有管理员权限，也无法在 HKLM 中注册。相反，如果您尝试使用`HKEY_CURRENT_USER`，效果很好。

```
REG ADD HKEY_CURRENT_USER\SOFTWARE\Microsoft\Office\12.0\Common\General /v EnableLocalMachineVSTO /t REG_DWORD /d 1 
```

# html - 如何在 sencha touch2 的 buttontap 上浏览 facebook 网站

> ID：10993282
> 
> 赞同：0
> 
> 时间：2012-06-12T08:51:22.940
> 
> 标签：html, sencha-touch, sencha-touch-2

我已经定义了一个按钮。单击我需要导航到 Facebook 登录页面的按钮。当我单击按钮时，它会转到 OnfacebookButtonTap 函数，以获取 facebook 警报消息。在这个函数中，我需要调用 Facebook URL。我想显示脸书登录页面。如何在 Sencha Touch 中存档。谁能告诉我如何做到这一点。谢谢

这是我的按钮点击功能：

```
OnfacebookButtonTap:function () {
    alert('facebook')
    //https://www.facebook.com/
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:40:43.700

我用过`window.location`。它工作正常：

```
OnfacebookButtonTap:function () {
    window.location = 'https://www.facebook.com/';
}, 
```

# android - 访问联系人姓名、号码和电子邮件 ID？

> ID：10993283
> 
> 赞同：0
> 
> 时间：2012-06-12T08:51:23.453
> 
> 标签：android, android-contacts

我正在尝试使用以下代码访问联系人姓名号码和电子邮件 ID：

```
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;

public class GetAllDatas extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    readContacts();
}   

private void readContacts() {
    // TODO Auto-generated method stub

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
           null, null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                System.out.println("name : " + name + ", ID : " + id);

                    // get the <span id="IL_AD1" class="IL_AD">phone number</span>

                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                       ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                       new String[]{id}, null);
                while (pCur.moveToNext()) {
                      String phone = pCur.getString(
                             pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                      System.out.println("phone" + phone);
                }
                pCur.close();

                // get email and type

                Cursor emailCur = cr.query(
                         ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                         null,
                         ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                         new String[]{id}, null);
                 while (emailCur.moveToNext()) {
                     // This would allow you get several email addresses
                         // if the email addresses were stored in an array
                     String email = emailCur.getString(
                                   emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                     String emailType = emailCur.getString(
                                   emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                   System.out.println("Email " + email + " Email Type : " + emailType);
                 }
                 emailCur.close();
            }
        }
    }

}
    } 
```

当我运行此代码时，我的活动中不会显示任何内容。

我需要从活动窗口上的整个联系人列表中访问联系人姓名、号码和电子邮件 ID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T09:14:13.457

检查这个

```
 package stack.examples;

import java.util.ArrayList;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class StackOverFlowGetContactsActivity extends Activity {

    ListView lvItem;
    private Button btnAdd;
    String displayName="", emailAddress="", phoneNumber="";
    ArrayList<String> contactlist=new ArrayList<String>();
    ArrayAdapter<String> itemAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       lvItem = (ListView)this.findViewById(R.id.listView_items);  
       btnAdd = (Button)this.findViewById(R.id.btnAddItem);
       itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
       lvItem.setAdapter(itemAdapter);
       btnAdd.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               readContacts();
           }
       });
    }

    private void readContacts()
    {
        ContentResolver cr =getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) 
        {
            displayName="";emailAddress=""; phoneNumber="";
            displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
            String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
            while (emails.moveToNext()) 
            { 
                emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
                break;
            }
            emails.close();
            if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
            {
                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
                while (pCur.moveToNext()) 
                {
                     phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    break;
                }
                pCur.close();
            }
                contactlist.add("DisplayName: "+displayName+", PhoneNumber: "+phoneNumber+", EmailAddress: "+ emailAddress+"\n");
                itemAdapter.notifyDataSetChanged();
        }
        cursor.close(); 
    }
} 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView_items"
        android:layout_width="match_parent"
        android:layout_height="288dp"
        android:layout_weight="0.03" >

    </ListView>

    <Button
        android:id="@+id/btnAddItem"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.01"
        android:text="@string/add" />

</LinearLayout> 
```

# c# - 具有自定义边框和透明背景的表单

> ID：10993287
> 
> 赞同：1
> 
> 时间：2012-06-12T08:51:37.680
> 
> 标签：c#, wpf, winforms, transparency

> **可能重复：**
> [使用 C# WinForms 的透明图像](https://stackoverflow.com/questions/395256/transparent-images-with-c-sharp-winforms)

我正在编写一个应用程序，该应用程序将具有`No Border`. 它还将有一个`BackgroundImage`[ 将显示为幻灯片；用计时器改变]。

## 示例图像 [您可能需要下载此文件以体验透明度]：

![图片](../Images/aa3af8b618ebcdfb44d2871de627349c.png)

我尝试了以下两种方法来完成此操作：

*   **使用`WindowsFormsApplication`：**

    我使用了`TransparencyKey`属性`Form`以及设置相同的`Background`颜色。[我使用了`Fuchsia`]。现在边框中的一些像素有了颜色`Fuchsia`。

*   **使用`WindowsPresentationFoundation`：**

    我使用了`AllowsTransparency`并将`Window`设置`Background`为 Image 并且图像以透明度正确显示。现在我必须在某个点添加另一个图像 [通过设置边距] 我之前在 Paint 中提到过。 *例如：我从原始背景裁剪图像，然后通过设置前面提到的边距将其放置在表单中的正确位置。* 但这会导致设置错误的边距！

    ### 更新 ：

    在 WPF 中，如果我`BackgroundImage`在 Grid 中使用 ，它可以解决边距问题，但 Transparency 不起作用并使透明区域变白！

请给出一些提示以摆脱这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:07:06.133

这是图像引起的问题。当您将其加载到 Paint.NET 并放大时，您可以看到它，这样您就可以看到各个像素。左上角看起来像这样：

![在此处输入图像描述](../Images/bba3beb3372c467af543446392a98d03.png)

请注意边缘上的像素是如何部分透明的。因此，如果您在例如紫红色的背景上绘制此图像，那么这些边缘像素不再是灰色的，它们与背景混合并产生*不同*的颜色。不再与 TransparencyKey 匹配，因此视频适配器不会过滤它们。你会看到它们是各种洋红色的边缘。

您需要编辑图像以使其具有“硬”边缘而没有任何透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:54:56.273

在 WPF 窗口中：

窗口样式=无

AllowsTransparency=True

背景=透明

然后用你的内容放一张图片不行吗？

# algorithm - 一致性哈希是否有保证的公平变化？

> ID：10993288
> 
> 赞同：3
> 
> 时间：2012-06-12T08:51:50.817
> 
> 标签：algorithm, hash, consistent-hashing

我正在寻找类似[Consistent Hashing](http://en.wikipedia.org/wiki/Consistent_hashing)之类的东西，但要保证分配最终尽可能公平（不仅仅是随机密钥的平均） - 有没有这样的事情，如果有，我在哪里可以找到它？

**编辑：**在我的具体情况下，这组键是预先知道的（和“小”）。确切地说，这些密钥将始终存在，并且必须在任何给定时间点分别分配给每个节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:51:18.847

在我看来，您正在寻找一个[最小的完美哈希](http://en.wikipedia.org/wiki/Perfect_hash_function#Minimal_perfect_hash_function)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:25:25.807

> 不只是平均随机键

这不是对一致散列提供的保证的准确描述。首先，“平均”没有捕捉到这样一个事实，即在圆上随机放置大量虚拟节点和一组良好的哈希函数（例如，对数独立的），负载不平衡很严重不太可能很大（我相信通常的不平衡应该是分配给特定机器的键数的平方根的数量级）。其次，密钥不必是随机的，只要它们不依赖于随机选择的哈希函数（不经意的对手）。

由于您想要*始终*公平的散列，随机化将无济于事，因为 RNG 的结果可能与[这个](http://www.xkcd.com/221/)无法区分。没有确定性算法可以静态地将节点偏好分配给密钥而不会出现不平衡的可能性，除非密钥是离线已知的。

如果您关心平方根不平衡的项目足够少，则可以进行老式的有状态负载平衡。

# ios - 使用 ARC 将模态视图控制器的委托设置为 nil

> ID：10993290
> 
> 赞同：2
> 
> 时间：2012-06-12T08:51:59.623
> 
> 标签：ios, automatic-ref-counting, delegation

我正在使用 ARC 为 iOS 4 编写应用程序。我正在通过标准委托模式呈现和关闭模态视图控制器。iOS 4 中的 ARC 不支持弱引用，因此，我将子视图控制器的委托属性标记为`assign`. `dealloc`我应该在子视图控制器的方法中将该委托设置为 nil吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T05:36:29.287

应该没关系。您的孩子仅使用委托向父视图控制器发送消息。您的子视图控制器在解除分配后不会对父级进行任何调用，因此您不需要将委托归零。通过使用assign 或weak，您没有对父级担任所有权角色，因此无需为内存管理设置nil 委托。

# php - javascript 和 php 中的通知和消息系统（无需安装额外的软件服务器端）

> ID：10993292
> 
> 赞同：0
> 
> 时间：2012-06-12T08:52:00.673
> 
> 标签：php, jquery, notifications, long-polling, push-notification

我正在运行一个具有消息传递和通知功能的社交网络。每次用户发送消息或为另一个用户放置通知时，都会将一行插入到表 news_updates 中，其中包含有关消息或通知的详细信息，并将他的所有朋友插入到 news_seen 表中。（一旦阅读了消息，或者打开了与通知相关的项目，see 设置为 1，我将在我的 ajax 请求的回调函数结束时执行此操作 - 我正在收集所有 newsitem_ids新闻项目，当前打开，然后我正在做一个包含所有 newsitem_ids 的大插入）。

```
news_seen:

newsitem_id bigint, 
user_id big int,
seen int DEFAULT '0' 
```

目前，我每 3 秒运行一次 ajax 请求，以检查 news_updates JOIN news_seen 中的新闻。

现在我得到越来越多的用户，结果证明这是一个巨大的服务器负载。我已经阅读了很多关于 xmpp 之类的内容，我认为推送通知服务对我的网站来说会很棒。

唯一的问题是，我真的无法决定走哪条路，因为有很多选择。

另外，我考虑过创建自己的系统。我打算这样做：

*   在初始注册时为每个用户创建一个 xml 文件（并为已经注册的用户运行批处理）

*   一旦用户发送新闻更新（我有自己的 php 函数将它们写入数据库），我会包含一个小命令来为各自的朋友操作 xml 文件

*   我不会做我的 3sec ajax 请求，而是使用 jquery 流建立到 xml 文件的长连接，如果自上次请求以来进行了更改，我会做我通常的 ajax 请求，从数据库中轮询数据。

*   我不是在 ajax 请求中运行我的 check_seen ，而是将所有新项目插入到一个全局数组中，供一个间隔函数使用，该函数测试当前是否正在查看列表中的任何项目。

你认为这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:39:28.617

老实说，我认为我不会实施您的规范。

*   例如，我会使用比 XML 更轻的数据模型。我会改用 JSON。
*   我会尽可能避免接触 DISC（数据库）（慢）。
*   做两个请求而不是一个（长轮询/轮询）。我会尽量避免这种情况。
*   我可能会尝试通过不使用间隔函数来避免浪费 CPU 时间，而只在需要时调用函数。我可能会使用[REDIS 的 pubsub 之](http://redis.io/topics/pubsub)类的东西。
*   由于阻塞 IO，轮询/长轮询（大多数时候）在 PHP 中是一个坏主意。我发现了一个名为[REACT](http://nodephp.org/)的有趣项目，我相信它可以实现非阻塞 IO（昂贵）。我自己没有测试过这个（性能），但这可能是一个选择。
*   对于 XMPP，您必须安装其他软件。例如，我喜欢[Prosody](http://prosody.im/)，因为它易于安装/使用。然后你需要看看[BOSH](http://prosody.im/doc/setting_up_bosh)。对于您的 bosh 客户端，我会使用[strophe.js](http://strophe.im/)或[JSJaC](https://github.com/sstrigler/JSJaC/)。
*   I would probably use something like [socket.io](http://socket.io), [Faye](http://faye.jcoglan.com/) or maybe [vertx.io](http://vertx.io/) instead, because it would scale a lot better.

# ruby-on-rails - application.html 中的自定义控制器变量

> ID：10993296
> 
> 赞同：0
> 
> 时间：2012-06-12T08:52:24.143
> 
> 标签：ruby-on-rails, ruby

用户故事：

*   具有打开图形对象的 Facebook 操作。
*   为此，我需要修改 application.html 中定义的标签

问题：

*   逻辑需要在 helpers 或 application_controller 中定义
*   据我了解，这并不干净。

**问题：**

*   我想将变量直接传递到 application.html 视图中。
*   最好将这些变量从自定义控制器传递到 application.html。这样我仍然可以利用 rails 路由系统仅在我在 facebook 操作时传递这些变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:44:46.090

将变量传递到视图的常见机制是在控制器中创建实例变量，因为这些变量是自动移植的。

如果几乎可以肯定会使用它们，这是标准方法。对于可能不会使用的东西，创建一个帮助方法来提供它们。

这是这样做的区别：

```
def show
  @facebook_graph = ...
end 
```

这在一个助手中：

```
def facebook_graph
  ...
end 
```

# oop - 类层次结构术语，祖先类与父类

> ID：10993304
> 
> 赞同：9
> 
> 时间：2012-06-12T08:52:50.693
> 
> 标签：oop

我试图理解各种定义，其他学生不太同意我的看法。

我的定义，如有错误请更正：

基类是层次结构中最顶层的类。

Super 和 Ancestor 类，层次结构中更高的任何类（包括基类）

父类，层次结构中的下一个类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:58:22.223

是的。**父类**是类的直接超类（在层次结构中最多一级）。根据您的编程语言，一个类可以有多个父类。

虽然祖先类是您的类的任何超类（父类、父类的父类等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:42:14.423

根据[维基百科的定义](http://en.wikipedia.org/wiki/Base_class#Subclasses_and_superclasses)，基类是另一个类继承一个或多个属性或方法的任何类。如果你接受这个定义，就意味着超级类、祖先类、父类和基类在描述一个类与特定子类的关系方面都是同义词。

# android - Android 中 Xperia 设备的奇怪日期格式行为

> ID：10993306
> 
> 赞同：0
> 
> 时间：2012-06-12T08:53:14.560
> 
> 标签：android, date, simpledateformat

我在 Android 中遇到了日期解析的真正问题。我通过 JSON 接收 dd/MM/yyyy HH:mm z 格式的日期，我只需要获取“本地化”小时和分钟并将其显示在我的应用程序中。使用我的代码在每台设备上一切正常，但我的客户报告我说，他们在使用 Sony XPERIA 设备时看不到应用程序中的时间。他们还告诉我，他们有一个无法显示时间的 XPeria 设备，然后他们将其植根，一切都开始正常工作。所以我认为这与索尼操作系统的日期/简单格式/语言环境/时区的一些奇怪实现有关。这是我的代码。

```
getDateLocalized("18/06/2012 18:00 CEST","HH:mm");

public static String getDateLocalized(String match_date, String pattern) {
    String d = "";
    String format = "dd/MM/yyyy HH:mm z";
    SimpleDateFormat sdf = getSimpleDateFormat();
    try {
        Date date = sdf.parse(match_date);
        sdf.setTimeZone(TimeZone.getDefault());
        sdf.applyLocalizedPattern(pattern);
        d = sdf.format(date);
        sdf.applyLocalizedPattern(format);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return d;
}

private static SimpleDateFormat getSimpleDateFormat() {
    String format = "dd/MM/yyyy HH:mm z";
    if (simpledateformat == null)
        simpledateformat = new SimpleDateFormat(format, Locale.UK);
    return simpledateformat;
} 
```

我正在使用单例模式来检索 SimpleDateFormat 对象，因为它的创建非常昂贵，而且我同时显示了大量的计时。我正在使用 Locale.UK，因为输入日期的语言是英语。

大问题是我没有任何索尼 xperia 设备来测试它:(

谢谢指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T13:14:43.140

问题基本上不是 Xperia 设备我认为默认格式化程序的问题。当我们得到 Calender.getInstance().getTime() 时显示正确的日期，当我们进行格式化时，所有的混乱都会发生。不知道为什么要为此打一个补丁并为我工作。

```
 if(formattedDate.contains("HH")){
                int hris = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);
                formattedDate = formattedDate.replace("HH", ""+hris);

            } 
```

# knockout.js - 淘汰赛自定义绑定多次触发

> ID：10993310
> 
> 赞同：1
> 
> 时间：2012-06-12T08:53:38.443
> 
> 标签：knockout.js, knockout-2.0

我目前正在尝试为我的网页创建一个自定义绑定，其中我有一个可见的跨度和隐藏的输入元素。如果我要单击跨度，它将消失并出现输入。一旦输入失去焦点，跨度将使用输入中的新值进行更新。但是，由于某种原因`blur`，每次单击我的跨度时，我的函数都会再次绑定，这不是我想要的。我怎样才能解决这个问题？

HTML

```
<!-- ko foreach: formula -->
  <span data-bind="text: $data, attr: {name: $index}, convert: $index()"></span>
  <input data-bind="value: $data, attr: {name: $index}" class="hide"/><br/>
<!-- /ko --> 
```

JavaScript

```
ko.bindingHandlers.convert = {
  init: function(element, valueAccessor) {
    $(element).click(function() {
      var index = valueAccessor();
      var inputName = "input[name="+index+"]";
      $(element).addClass("hide");
      $(inputName).removeClass("hide").focus().blur(function() {
        console.log("firing");
        $(inputName).addClass("hide");
        $(element).removeClass("hide");
        $(element).text($(inputName).val());
      });
    });
  }
}; 
```

所以如果我点击我的跨度两次，我会得到

```
firing
firing
firing 
```

在我的控制台中，我应该只得到`firing`两次。

注意：我无法遵循`hasFocus`Knockout 教程中的示例，因为它绑定到所有输入字段，并且我需要我的输入字段仅针对正在单击的特定范围进行切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:04:43.027

这根本不是什么谜。看那个代码：

```
$(element).click(function() {
    /* some code */
    $(inputName).blur(function() {
        /* some code */
    });
}); 
```

每次单击都会添加`blur`处理程序。您可以尝试像这样删除处理程序：

```
$(element).click(function() {
    var $element = $(this);
    var index = valueAccessor();
    var inputName = "input[name="+index+"]";
    var $input = $(inputName);
    $element.addClass("hide");
    $input.unbind('blur');
    $inputName.removeClass("hide").focus().blur(function() {
        console.log("firing");
        $input.addClass("hide");
        $element.removeClass("hide");
        $element.text($input.val());
    });
}); 
```

我认为你可以链接它，但没有测试它。

# javascript - 从 JavaScript 调用 ruby 方法或从 RoR 中的视图传递参数

> ID：10993311
> 
> 赞同：0
> 
> 时间：2012-06-12T08:53:51.110
> 
> 标签：javascript, ruby-on-rails

我有网站列表的视图。有关网站的详细信息以缩回模式显示。

当用户单击某些图像时，我需要显示适当的网站详细信息。

我正在使用这篇文章：[Passing parameters to/from JavaScript & Rails](https://stackoverflow.com/questions/8272147/passing-parameters-to-from-javascript-rails)

这是我的代码：

```
 <table>
   <% @websites.each do |website| %>
  <%if (current_user.id == website.user_id)%>
  <tr>
    <td>  <%= link_to(image_tag("/images/caret-horizontal.png",website_path(website)) %> </td>
<td>  
<h4><%= website.name %></h4> </td>

 </tr>
 <table id="<%= website.id %>">
 <tr >
   <td >
  <td >
  <%= website.url %>
  </td>
  </td>
</tr>
 <tr id="<%= website.id %>">
<td >
<td >
<%= website.category  %>
</td>
</td>
 </tr>
 <tr id="<%= website.id %>">
 <td>
<td><%= website.language %></td>
 </td> 
```

```
<%end%>

 <%end%>
 </table> 
```

application.js 中的代码：

```
 $("#table").show();//here I need something like var table = <%= website.id%> 
```

我应该如何选择合适的网站ID？

或者我应该在数据中传输 website.id ？

我怎么能以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:11:31.963

有一个很棒的教程：[http](http://railscasts.com/episodes/324-passing-data-to-javascript) ://railscasts.com/episodes/324-passing-data-to-javascript 本教程为您提供了几种将数据从 Rails 传递到 js 的方法。:)

无论如何，将您的表 id 更改为任何值，并将 data-id 添加到您的表中

```
<table id="table-data" data-id="<%= website.id %>"> 
```

现在你可以得到值：

```
var yourWebsiteId = $("#table-data").attr("data-id"); 
```

# php - 使用 php 和 javascript 在黑莓中下载和保存图像

> ID：10993314
> 
> 赞同：0
> 
> 时间：2012-06-12T08:54:02.300
> 
> 标签：php, javascript, blackberry-webworks

我正在研究黑莓网络工程应用程序。我在页面上显示一些图像。如果用户单击它，我想将图像保存在黑莓图片文件夹中。我使用了以下代码，但它保存在存储卡中，而不是黑莓图片文件夹中。以下是我的代码：

```
$file = 'images/' . $_GET['file'];
if (file_exists($file)) {
  header('Content-Description: File Transfer');
  header('Content-Type: application/octet-stream');
  header('Content-Disposition: attachment; filename='.basename($file));
  header('Content-Transfer-Encoding: binary');
  header('Expires: 0');
  header('Cache-Control: must-revalidate');
  header('Pragma: public');
  header('Content-Length: ' . filesize($file));
  ob_clean();
  flush();
  readfile($file);
 exit;
 } 
```

我找到了另一种在黑莓中保存文件的方法，但我不明白如何使用以下代码保存图像，它是我从黑莓论坛获得的 javascript 代码。

```
<script type="text/javascript">
var xmlString = "<test>IO functions</test>";
var filePath = "file:///store/home/user/sample.xml";
var parser = new DOMParser();
var doc = parser.parseFromString(xmlString, "text/xml");
var blob_data = blackberry.utils.documentToBlob(doc);
blackberry.io.file.saveFile(filePath, blob_data);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:30:29.797

我也遇到了这个问题，因为我在 API 中找不到任何解决方案，所以我决定为它开发一个 Javascript 扩展。您可以从 GitHub [https://github.com/dbotelho/blackberry.io.filetransfer下载它](https://github.com/dbotelho/blackberry.io.filetransfer)

# mysql - 数据库设计。传递依赖与否？

> ID：10993320
> 
> 赞同：3
> 
> 时间：2012-06-12T08:54:44.573
> 
> 标签：mysql, sql, database-design

我从数据库设计中休息了很长时间（一年多），我刚刚回来。我正在为我正在创建的网站设计一个数据库。我将 2 个布尔值存储在一个表中（两个单独的列）。我意识到，如果第一个值为真，则另一个也将始终为真，但如果第一个值为假，则另一个可以为真或假。就我而言，这不是传递依赖，我不应该创建一个新表，但我想确保我做的一切都是正确的。如果有多个值的行为类似于第二个布尔值，我是否仍将其保留在同一个表中？将此类数据存储在数据库中的最佳方法是什么？

如果 anwser 包含 ER 图，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:20:29.727

**标准化：**
我认为我们应该区分两种情况：

*   布尔值序列的最大长度 == 2;
*   布尔值序列的最大长度 > 2；

第一种情况可以使用具有两个字段的单个表来解决，因为它保证了良好的性能和空间优化（你不能比这种方式节省更多的空间，除非你忽略规范化规则，我在最后一个解决方案）：

```
MyBools (id, firstBool, secondBool); 
```

关于第二种情况，我提出了两个想法，我都不满意。
我们可以说的主要事情是，当您有长序列时，每个布尔值的列不是很方便。这是我的两个想法：

1.  具有 PK、布尔字段和自引用外键的单个表：

    ```
    MyBools (id, thisBool, idNextBool); 
    ```

    `thisBool`显然包含一个布尔值。如果`thisBool`为真，您就完成了，您不需要存储以下布尔值，因为它的值与第一个值匹配。If `thisBool`is false`idNextBool`指向以下布尔值。
    此解决方案仅允许前向搜索。

2.  具有 PK、布尔值和自引用外键的单个表：

    ```
    MyBools (id, thisBool, idNextBool); 
    ```

    如果`idNextBool`为 null，则您已达到序列的第一个值。否则`idNextBool`指向以下布尔值。
    此解决方案仅允许向后搜索。

如您所见，第二种情况（序列长于 2 个值）的解决方案相当难以管理。
这就是我提出非标准化解决方案的原因。

* * *

**未标准化：**
您可以将这些布尔值视为数字字段的位（特别是考虑到布尔值实际上由位表示）。假设我们有两个字段`field1`和`field2`，并考虑我们可以将它们放在一个字段中（我们称之为`myfield`）：

```
1) IF field1 is True THEN field2 True         myfield = 0

                                   __ True      myfield = 10
2) IF field1 is False THEN field2 /
                                  \__ False       myfield = 11 
```

如您所见，您可以将其扩展到尽可能多的布尔值，以适应数字字段（例如，在 32 位数字字段中，您可以存储 32 个布尔值，只要每个布尔值取决于较低的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:25:05.667

它不是函数依赖，因此它不是传递函数依赖。

[根据定义](http://en.wikipedia.org/wiki/Functional_dependency)，X -> Y 当且仅当每个 X 值都与一个 Y 值相关联。

在您的情况下，当 X 为假时，Y 可能是以太真或假，因此上述定义不成立。

* * *

不过，它看起来确实像一个多值依赖项。

除了添加适当的 CHECK 约束之外，我不确定您是否应该对此做任何事情（使事情复杂化的成本对于预期的收益来说太高了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:35:07.393

我想到了一个解决方案，但我不知道它是否有任何好处。如果第一个值为假，我可以使用 FK 为所有其他值创建另一个表，如果值为真，则存储其他值，我无法为这些值生成表，因为无论如何它们都将为真

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T09:15:34.503

你的问题有点模糊，但我会试一试。首先，根据您的描述，您没有传递依赖。原因是，你只提到了两个，我假设你的表中的属性，当传递依赖需要三个属性存在时。

当 A 隐含 B 且 B 隐含 C 时，存在传递依赖。换句话说，A 通过 B 传递隐含 C。

无论如何，我认为寻找具有小数据样本且没有上下文的功能依赖关系会导致糟糕的数据库设计。你的表中有哪些元素？

# java - 使用java将图表导出到visio

> ID：10993324
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:55:00.957
> 
> 标签：java, eclipse

我在eclipse中制作了一个编辑器，在其中我绘制了倒置结构图。如何使用java代码将编辑器中绘制的图表（图表）导出到visio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:51:38.263

导出到 Visio 的库并不多，但您可以尝试这个[http://jgrapht.org](http://jgrapht.org/)库中应该有一个名为 VisioExporter 的类。我不知道它有多少支持，但值得一试。

# ios - 创建 UINavigationBarButton 中的缩进外观 - 以编程方式

> ID：10993328
> 
> 赞同：3
> 
> 时间：2012-06-12T08:55:04.370
> 
> 标签：ios, cocoa-touch, uiview, core-graphics, quartz-graphics

我正在尝试以编程方式重新创建可以在 UINavigationBarButton 上看到的缩进按钮外观。不是闪亮的两色外观或渐变，只是周边阴影：

![在此处输入图像描述](../Images/30c9d86884a70e80e25b525066371df7.png)

它看起来像整个视野周边的内部暗阴影，顶部稍微暗一些？然后是围绕下视图周边的外部突出显示阴影。

我用 Core Graphics 玩了一些，并尝试了 QuartzCore 和 view.layer.shadowRadius 和 .shadowOffset 的阴影，但甚至无法让较低的突出显示看起来正确。我也不确定从哪里开始实现带有内部偏移的暗阴影和带有外部偏移的浅阴影。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:51:40.717

似乎您想要一个看起来像阴影的边框。由于阴影呈现出某种渐变，乍一看无法将边框设置为渐变。但是，可以创建一个表示边界的路径，然后用渐变填充它。Apple 提供了一个似乎鲜为人知的功能，称为[CGPathCreateCopyByStrokingPath](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/func/CGPathCreateCopyByStrokingPath)。这需要一条路径（例如，圆角矩形）并创建一个新路径，该路径将是旧路径的笔划，给定您传递给函数的设置（如线宽、连接/上限设置、斜接限制等）。因此，假设您定义了一条路径（这不完全是 Apple 提供的，但它是相似的）：

```
+ (UIBezierPath *) bezierPathForBackButtonInRect:(CGRect)rect withRoundingRadius:(CGFloat)radius{
    UIBezierPath *path = [UIBezierPath bezierPath];
    CGPoint mPoint = CGPointMake(CGRectGetMaxX(rect) - radius, rect.origin.y);
    CGPoint ctrlPoint = mPoint;
    [path moveToPoint:mPoint];

    ctrlPoint.y += radius;
    mPoint.x += radius;
    mPoint.y += radius;
    if (radius > 0) [path addArcWithCenter:ctrlPoint radius:radius startAngle:M_PI + M_PI_2 endAngle:0 clockwise:YES];

    mPoint.y = CGRectGetMaxY(rect) - radius;
    [path addLineToPoint:mPoint];

    ctrlPoint = mPoint;
    mPoint.y += radius;
    mPoint.x -= radius;
    ctrlPoint.x -= radius;
    if (radius > 0) [path addArcWithCenter:ctrlPoint radius:radius startAngle:0 endAngle:M_PI_2 clockwise:YES];

    mPoint.x = rect.origin.x + (10.0f);
    [path addLineToPoint:mPoint];

    [path addLineToPoint:CGPointMake(rect.origin.x, CGRectGetMidY(rect))];

    mPoint.y = rect.origin.y;
    [path addLineToPoint:mPoint];

    [path closePath];
    return path;
} 
```

这将返回类似于 Apple 的后退按钮的路径（我在我的应用程序中使用它）。我已将此方法（以及更多方法）作为一个类别添加到 UIBezierPath。

现在让我们在绘图例程中添加该内部阴影：

```
- (void) drawRect:(CGRect)rect{
    UIBezierPath *path = [UIBezierPath bezierPathForBackButtonInRect:rect withRoundingRadius:5.0f];
    //Just fill with blue color, do what you want here for the button
    [[UIColor blueColor] setFill]; 
    [path fill];

    [path addClip]; //Not completely necessary, but borders are actually drawn 'around' the path edge, so that half is inside your path, half is outside adding this will ensure the shadow only fills inside the path

    //This strokes the standard path, however you might want to might want to  inset the rect, create a new 'back button path' off the inset rect and create the inner shadow path off that.  
    //The line width of 2.0f will actually show up as 1.0f with the above clip: [path addClip];, due to the fact that borders are drawn around the edge 
    UIBezierPath *innerShadow = [UIBezierPath bezierPathWithCGPath: CGPathCreateCopyByStrokingPath(path.CGPath, NULL, 2.0f, path.lineCapStyle, path.lineJoinStyle, path.miterLimit)];
    //You need this, otherwise the center (inside your path) will also be filled with the gradient, which you don't want
    innerShadow.usesEvenOddFillRule = YES;
    [innerShadow addClip];

    //Now lets fill it with a vertical gradient
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPoint start = CGPointMake(0, 0);
    CGPoint end = CGPointMake(0, CGRectGetMaxY(rect));
    CGFloat locations[2] = { 0.0f, 1.0f};
    NSArray *colors =  [NSArray arrayWithObjects:(id)[UIColor colorWithWhite:.7f alpha:.5f].CGColor, (id)[UIColor colorWithWhite:.3f alpha:.5f].CGColor, nil];
    CGGradientRef gradRef = CGGradientCreateWithColors(CGColorSpaceCreateDeviceRGB(), (__bridge CFArrayRef)colors, locations);
    CGContextDrawLinearGradient(context, gradRef, start, end, 0);
    CGGradientRelease(gradRef);
} 
```

现在这只是一个简单的例子。我不保存/恢复上下文或任何你可能想要做的事情。有些事情你可能仍然想做让它变得更好，比如如果你想使用普通边框，可能会插入“阴影”路径。您可能想要使用更多/不同的颜色和位置。但这应该让你开始。

***更新***

您可以使用另一种方法来创建此效果。我编写了一个算法来斜切核心图形中的任意贝塞尔路径。这可用于创建您正在寻找的效果。这是我如何在我的应用程序中使用它的示例：

![斜面后退按钮](../Images/e9307c045d3dfcd17510dfdcb7f822c1.png)

您将 CGContextRef、CGPathRef、斜角的大小以及您希望它用于高亮/阴影的颜色传递给例程。

我用于此的代码可以在这里找到：[Github - Beveling Algorithm](https://gist.github.com/2830483)。

我还在这里解释了代码和我的方法：[核心图形中的斜切形状](http://aaronhayman.com/2012/beveling-shapes-in-core-graphics/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T07:01:58.380

使用图层的阴影不会这样做。你需要一个浅色的外阴影和一个深色的内阴影来获得这种效果。一个图层只能有一个（外）阴影。（此外，图层阴影会动态重绘，并强制基于 CPU 的渲染，这会降低性能。）

您需要在视图的`drawRect:`方法或层的`drawInContext:`方法中使用 CoreGraphics 进行自己的绘图。（或者您绘制到图像上下文中，然后重用图像。）所述绘图将主要使用[`CGContext functions`](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CGContext/Reference/reference.html). （我会在下面列出一些，但这个链接有他们所有的文档。）

对于圆形矩形按钮，您可能会发现创建适当的 CGPath 很繁琐——相反，您可以使用[`+[UIBezierPath bezierPathWithRoundedRect:cornerRadius:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/clm/UIBezierPath/bezierPathWithRoundedRect%3acornerRadius%3a)和 path 的`CGPath`属性来设置上下文的当前路径`CGContextAddPath`。

您可以通过将剪切路径（see`CGContextClip`和相关函数）设置为按钮的形状，设置阴影（see`CGContextSetShadowWithColor`和相关函数），然后在要添加阴影的形状的外部绘制来创建内部阴影。对于内部阴影，描边 ( `CGContextStrokePath`) 是一个比您的按钮大一点的圆形矩形，使用粗描边宽度 ( `CGContextSetLineWidth`) 所以有大量的“墨水”来生成阴影（请记住，这个描边将不可见，因为剪切路径）。

您可以以几乎相同的方式创建外部阴影——这次不要使用剪切路径，因为您希望阴影位于形状之外，并填充 ( `CGContextFillPath`) 按钮的形状而不是抚摸它。请注意，绘制阴影是一种“模式”：您保存图形状态 ( `CGContextSaveGState`)，设置阴影，然后绘制您想要查看阴影的形状（当您处于模式），最后恢复状态（`CGContextRestoreGState`）以退出“影子模式”。由于该模式不绘制形状，只绘制阴影，因此您需要单独绘制形状本身。

也有一个命令要做这一切。如果您考虑一下使用物理媒体绘制这些东西的顺序，这应该是显而易见的：首先绘制外阴影，然后是按钮的填充，然后是内阴影。如果内部阴影没有给你一个足够明显的轮廓，你可以在那之后添加一个笔触。

* * *

有一些绘图工具可以输出 CoreGraphics 的源代码：[Opacity](http://likethought.com/opacity/)是我使用的一种。但是要小心这些，因为它们生成的代码可能效率不高。

# sql-server - 使用 LEFT JOIN 时没有收到预期的结果？

> ID：10993329
> 
> 赞同：0
> 
> 时间：2012-06-12T08:55:08.043
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我有以下 SQL 语句，即使我有 300 名员工，它也只返回 2 条记录。有谁看到我做错了什么？

```
SELECT     Employees.[Employee ID], 
Employees.Employee, 
Employees.[First Name], 
Employees.[Middle Name], 
Employees.[Last Name], 
Employees.Position,
[Work].[Work ID]
FROM  Employees LEFT JOIN
[Work] ON Employees.[Employee ID] = [Work].[Employee ID]
WHERE [Work].[Work Date] = '06-13-2012' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:07:42.540

在外部表上使用外部联接过滤器时，必须在 ON 子句中应用，否则您将有效地获得内部联接：

```
SELECT     
    Employees.[Employee ID], 
    Employees.Employee, 
    Employees.[First Name], 
    Employees.[Middle Name], 
    Employees.[Last Name], 
    Employees.Position,
    [Work].[Work ID]
FROM  Employees 
LEFT JOIN [Work] 
  ON Employees.[Employee ID] = [Work].[Employee ID]
 AND [Work].[Work Date] = '06-13-2012' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:08:36.753

如果您想要*所有*员工，也许您正在寻找类似的东西：

```
SELECT     Employees.[Employee ID],  ...
FROM  Employees LEFT JOIN 
[Work] ON Employees.[Employee ID] = [Work].[Employee ID] 
AND [Work].[Work Date] = '20120613' 
```

另请注意，您应该使用明确的日期格式，例如 yyyyMMdd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:59:44.540

还可以尝试查看 [Work Date] 列 - 如果它也有时间部分（DateTime 数据类型），那么您应该考虑到这一点：

```
SELECT     
    Employees.[Employee ID], 
    Employees.Employee, 
    Employees.[First Name], 
    Employees.[Middle Name], 
    Employees.[Last Name], 
    Employees.Position,
    [Work].[Work ID]
FROM  Employees 
LEFT JOIN [Work] 
  ON Employees.[Employee ID] = [Work].[Employee ID]
WHERE Convert(Char(10), [Work].[Work Date], 120) = '2012-06-13' -- can find better way 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:58:20.563

您是否检查过 Where 子句中的日期？

尝试转换为日期时间或检查 [Work].[Work Date] 列数据中是否没有定义小时/分钟/秒。

尝试删除连接以查看问题出在哪里：

```
SELECT [Work].[Employee ID], [Work].[Work ID]
FROM [Work]
WHERE [Work].[Work Date] = '06-13-2012' 
```

你有多少这样的记录？是否所有员工 ID 都与员工表中的 ID 匹配？

如果您需要所有员工，则应该执行 LEFT OUTER JOIN：

```
SELECT     Employees.[Employee ID], 
Employees.Employee, 
Employees.[First Name], 
Employees.[Middle Name], 
Employees.[Last Name], 
Employees.Position,
[Work].[Work ID]
FROM  Employees LEFT OUTER JOIN
[Work] ON Employees.[Employee ID] = [Work].[Employee ID]
AND [Work].[Work Date] = '06-13-2012' 
```

这是你想要的吗？

# gmail - 使用 Gmail 和 Java 邮件 API 发送电子邮件 不使用真实姓名发送电子邮件

> ID：10993332
> 
> 赞同：0
> 
> 时间：2012-06-12T08:55:12.587
> 
> 标签：gmail, jakarta-mail

这是使用 Gmail 发送电子邮件的示例函数

```
 public void sendEmail(String from, ArrayList<String> to, String subject,
        String content, boolean contentIsHtml) throws EmailException 
{
    try
    {
        Properties props = new Properties();

        props.put("mail.transport.protocol", EmailConfig.getGmailTransportProtocol());
        props.put("mail.smtp.host", EmailConfig.getGmailSMTPHost());
        props.put("mail.smtp.socketFactory.port", EmailConfig.getGmailSMTPPort());
        props.put("mail.smtp.socketFactory.class", EmailConfig.getSocketFactoryClass());
        props.put("mail.smtp.auth", EmailConfig.getGmailAuthRequired());
        props.put("mail.smtp.port", EmailConfig.getGmailSMTPPort());

        SMTPAuthenticator authenticator = new SMTPAuthenticator();

        Session session = Session.getDefaultInstance(props, authenticator);
        //session.setDebug(true);

        Transport transport = session.getTransport();

        MimeMessage message = new MimeMessage(session);
        message.setSubject(subject);
                    message.setSender(EmailUtil.getInternetAddress(
                    EmailConfig.getGmailUsername(), "jatin Shah"));
        message.setRecipients(
                        RecipientType.TO,  
                       EmailUtil.getInternetAddresses(to));
        if(contentIsHtml)
            message.setContent(content, "text/html");
        else
            message.setContent(content, "text/plain");

        transport.connect();
        transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO));
        transport.close();

        System.out.println("Email Sent!!");

    }
    catch(Exception e)
    {
        e.printStackTrace();
        throw new EmailException(e);
    }
} 
```

这将使用 MyGmail 帐户发送电子邮件

我在测试中从 gmail 帐户向另一个帐户发送电子邮件

但是，当我收到一封电子邮件时，这很好......但是，现在显示了发件人的全名

而不是“Jatin Shah”（我的名字）......它显示的是 bhatin.shah（我的用户名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:41:09.060

首先，阅读[常见错误的常见问题解答条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。

要解决您的问题，请使用 setFrom 而不是 setSender。

# java - Java 正则表达式匹配模式

> ID：10993334
> 
> 赞同：1
> 
> 时间：2012-06-12T08:55:17.303
> 
> 标签：java, regex

我需要检查一些文本的模式（我必须检查我的模式是否在许多文本中）。

这是我的例子

```
String pattern = "^[a-zA-Z ]*toto win(\\W)*[a-zA-Z ]*$";    
if("toto win because of".matches(pattern))
 System.out.println("we have a winner");
else
 System.out.println("we DON'T have a winner"); 
```

对于我的测试，模式必须匹配，但使用我的正则表达式不匹配。必须匹配 ：

```
" toto win bla bla"

"toto win because of"
"toto win. bla bla"

"here. toto win. bla bla"
"here? toto win. bla bla"

"here %dfddfd . toto win. bla bla" 
```

不能匹配：

```
" -toto win bla bla"
" pretoto win bla bla" 
```

我尝试使用我的正则表达式来做到这一点，但它不起作用。

你能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:07:44.847

只需将您的代码更改为`String pattern = "\\s*toto win[\\w\\s]*";`

\W 表示无单词字符，\w 表示单词字符（a-zA-Z_0-9）。

`[\\w\\s]*`将匹配“toto win”之后的任意数量的单词和空格。

**更新**

为了反映您的新要求，此表达式将起作用：

```
"((.*\\s)+|^)toto win[\\w\\s\\p{Punct}]*" 
```

`((.*\\s)+|^)`匹配后跟至少一个空格或行首的任何内容。

`[\\w\\s\\p{Punct}]*`匹配单词、数字、空格和标点符号的任意组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:44:48.137

**这会起作用**

```
(?im)^[?.\s%a-z]*?\btoto win\b.+$ 
```

**解释**

```
"(?im)" +         // Match the remainder of the regex with the options: case insensitive (i); ^ and $ match at line breaks (m)
"^" +             // Assert position at the beginning of a line (at beginning of the string or after a line break character)
"[?.\\s%a-z]" +    // Match a single character present in the list below
                     // One of the characters “?.”
                     // A whitespace character (spaces, tabs, and line breaks)
                     // The character “%”
                     // A character in the range between “a” and “z”
   "*?" +            // Between zero and unlimited times, as few times as possible, expanding as needed (lazy)
"\\b" +            // Assert position at a word boundary
"toto\\ win" +     // Match the characters “toto win” literally
"\\b" +            // Assert position at a word boundary
"." +             // Match any single character that is not a line break character
   "+" +             // Between one and unlimited times, as many times as possible, giving back as needed (greedy)
"$"               // Assert position at the end of a line (at the end of the string or before a line break character) 
```

**更新 1**

```
(?im)^[?~`'!@#$%^&*+.\s%a-z]*? toto win\b.*$ 
```

**更新 2**

```
(?im)^[^-]*?\btoto win\b.*$ 
```

**更新 3**

```
(?im)^.*?(?<!-)toto win\b.*$ 
```

**解释**

```
"(?im)" +       // Match the remainder of the regex with the options: case insensitive (i); ^ and $ match at line breaks (m)
"^" +           // Assert position at the beginning of a line (at beginning of the string or after a line break character)
"." +           // Match any single character that is not a line break character
   "*?" +          // Between zero and unlimited times, as few times as possible, expanding as needed (lazy)
"(?<!" +        // Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind)
   "-" +           // Match the character “-” literally
")" +
"toto\\ win" +   // Match the characters “toto win” literally
"\\b" +          // Assert position at a word boundary
"." +           // Match any single character that is not a line break character
   "*" +           // Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
"$"             // Assert position at the end of a line (at the end of the string or before a line break character) 
```

* * *

***RegEx 需要转义才能在代码中使用***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:58:11.017

您在模式中缺少`win`和下一个单词之间的空格

试试这个：`\\stoto\\swin\\s\\w`

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)在这里你可以试试你的正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:00:01.643

以下正则表达式

```
^[a-zA-Z. ]*toto win[a-zA-Z. ]*$ 
```

将匹配

```
 toto win bla bla
toto win because of
toto win. bla bla 
```

而且不匹配

```
-toto win bla bla" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:56:07.853

如果您包含实际要求，而不是要（不）匹配的内容列表，则会更容易。我强烈怀疑“toto winabc”不应该匹配，但不确定，因为您没有包含此类示例或解释要求。无论如何，这适用于您当前的所有示例：

```
static String[] matchThese = new String[] {
        " toto win bla bla",
        "toto win because of",
        "toto win. bla bla",
        "here. toto win. bla bla",
        "here? toto win. bla bla",
        "here %dfddfd . toto win. bla bla"
};

static String[] dontMatchThese = new String[] {
        " -toto win bla bla",
        " pretoto win bla bla"
};

public static void main(String[] args) {
    // either beginning of a line or whitespace followed by "toto win"
    Pattern p = Pattern.compile("(^|\\s)toto win");

    System.out.println("Should match:");
    for (String s : matchThese) {
        System.out.println(p.matcher(s).find());
    }

    System.out.println("Shouldn't match:");
    for (String s : dontMatchThese) {
        System.out.println(p.matcher(s).find());
    }
} 
```

# java - 密码/3DES/CFB/Java 和 PHP

> ID：10993335
> 
> 赞同：6
> 
> 时间：2012-06-12T08:55:19.000
> 
> 标签：java, encryption, 3des

我有一个 PHP 伺服器，它使用 CFB 模式解密 3DES 中的数据

我用 PHP 加密：

```
$montant = "500";
$message_crypte = mcrypt_encrypt(MCRYPT_3DES, "N4y1FRDRJ7wn7eJNnWaahCIS", $montant, ,CRYPT_MODE_CFB, "NCNPJDcR");
$montant = base64_encode($message_crypte); 
```

PHP 中的此脚本适用于其他系统。

我想用 Java 加密：

```
public class CryptData {
    private KeySpec keySpec;
    private SecretKey key;
    private IvParameterSpec iv;

    public CryptData(String keyString, String ivString) {
        try {
            final MessageDigest md = MessageDigest.getInstance("md5");

            final byte[] digestOfPassword = md.digest(Base64
                    .decodeBase64(keyString.getBytes("ISO-8859-1")));

            final byte[] keyBytes = Arrays.copyOf(digestOfPassword, 24);
            for (int j = 0, k = 16; j < 8;) {
                keyBytes[k++] = keyBytes[j++];
            }

            //keySpec = new DESedeKeySpec(keyBytes);
            keySpec = new DESedeKeySpec(keyString.getBytes());

            key = SecretKeyFactory.getInstance("DESede")
                    .generateSecret(keySpec);

            iv = new IvParameterSpec(ivString.getBytes());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public String encrypt(String value) {
        try {
            Cipher ecipher = Cipher.getInstance("DESede/CFB/NoPadding");

                    //"SunJCE");
            ecipher.init(Cipher.ENCRYPT_MODE, key, iv);

            if (value == null)
                return null;

            // Encode the string into bytes using utf-8
            byte[] valeur = value.getBytes("ISO-8859-1");
            //byte[] utf8 = value.getBytes();

            // Encrypt
            byte[] enc = ecipher.doFinal(valeur);

            // Encode bytes to base64 to get a string
            return new String(Base64.encodeBase64(enc), "ISO-8859-1");
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

我在 PHP 和 Java 中的结果不同

如何修改Java处理以获得与PHP相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:00:26.467

答案是：

```
Cipher ecipher = Cipher.getInstance("DESede/CFB8/NoPadding"); 
```

我需要使用“CFB8”

# css - 让静态 Web 上下文资源在可收藏和不可收藏的 Wicket 页面上工作

> ID：10993336
> 
> 赞同：3
> 
> 时间：2012-06-12T08:55:29.223
> 
> 标签：css, tomcat, wicket, static-resource

在 Wicket 1.4 应用程序中，我分别在`[project root]/WebContent/css`和下有一些静态 CSS 和 JS 资源`[project root]/WebContent/js`。

![在此处输入图像描述](../Images/893b29c860ed27fd0449d0ce780ecd75.png)

我的 Wicket HTML 文件`src/resources/fi/company/product/pages`与`src/main/fi/company/product/pages`. （在生成的 WAR 文件中，HTML 和属性文件当然与 Java 类位于相同的位置。）

HTML 文件包含对资源的引用，例如：

```
<head>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <script type="text/javascript" src="js/calendar.js"></script>
</head> 
```

这在任何地方都可以正常工作（或者我们直到最近才这么认为）。注意：我的 Java 代码根本没有引用这些资源。

查看呈现页面的来源（其 URL 为 eg`http://localhost:8080/report/42.4`或`http://localhost:8080/?wicket:interface=:6::::`），资源引用显示为：

```
<link rel="stylesheet" type="text/css" href="../css/main.css"/> 
```

但是，我们刚刚注意到，**当应用程序部署在 (Tomcat) root 以外的其他位置时**，资源会在**非书签页面**上中断。

换句话说，当 URL 例如

`http://localhost:8080/foobar/?wicket:interface=:2::::`

一个页面是指

```
<link rel="stylesheet" type="text/css" href="../css/main.css"/> 
```

...浏览器尝试在无效 URL 处获取资源

```
http://localhost:8080/css/main.css 
```

现在，不管部署路径如何，**让这些静态资源正常工作的最简单（但非 hacky）方法是什么？**

我可以切换到专门使用可书签页面（这需要更改页面的构造函数），但我认为这不是必需的......

* * *

**编辑**：看起来我只是通过使用 CSS 资源（在大多数地方）工作`<wicket:link>`，[正如这个答案中所建议的](https://stackoverflow.com/questions/10182231/wicket-css-resources)：

```
<head>
    <wicket:link>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    </wicket:link>
</head> 
```

但是，现在 CSS 引用在具有类似 URL 的页面上被破坏`http://localhost:8080/foobar/report/42.9`

Wicket 试图用“css/main.css”路径做一些奇怪的事情：

```
ERROR org.apache.wicket.RequestCycle - Can't instantiate page using constructor public fi.company.product.pages.ReportPage(org.apache.wicket.PageParameters) and argument 0 = "css" 1 = "main"
org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor public fi.company.product.pages.ReportPage(org.apache.wicket.PageParameters) and argument 0 = "css" 1 = "main"
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:212)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:89)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:305) 
```

**编辑2**：实际上我不确定`<wicket:link>`这里是否是正确的解决方案，因为这些资源文件**不是**“[类路径资源](https://stackoverflow.com/a/10186246/56285)”。我想我的问题是，**您能否在仍然使用 Web 上下文资源的同时完成这项工作**（即，不使用这些类路径资源）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:59:01.620

对了，我解决了，结果结果很意外。

早些时候我写道：

> 奇怪的是，如果没有任何更改，似乎我无法再重现该问题...

这并不完全正确，因为我做了*一个*小改动（我认为这无关紧要）：我删除了一个文件，该文件`WebContent/index.jsp`在我们的项目中是一个无用的残余。

一旦我意识到这可以解决它，我做了更多的测试，事实上：

要使静态资源按预期工作，**您不能在根 Web 内容目录`index.html``index.jsp`**（即 CSS 和 JS 资源目录的父级）中有**or**`../`文件，因为在某些情况下会破坏引用。

这甚至可能不是特定于 Wicket 的，但也许是特定于 Tomcat 的——如果有人知道更多，请随时插话。我怀疑这个问题是否对其他人有帮助，但仍然很高兴我让它工作了！

# bash - shell脚本：if语句

> ID：10993339
> 
> 赞同：6
> 
> 时间：2012-06-12T08:55:36.463
> 
> 标签：bash, shell, if-statement

我在这里学习教程：http: [//bash.cyberciti.biz/guide/If..else..fi#Number_Testing_Script](http://bash.cyberciti.biz/guide/If..else..fi#Number_Testing_Script)

我的脚本看起来像：

```
lines=`wc -l $var/customize/script.php`
if test $lines -le 10
then
    echo "script has less than 10 lines"
else
    echo "script has more than 10 lines"
fi 
```

但我的输出看起来像：

```
./boot.sh: line 33: test: too many arguments
script has more than 10 lines 
```

为什么它说我有太多的争论？我看不出我的脚本与教程中的脚本有何不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T08:59:19.063

`wc -l file`命令将打印两个单词。试试这个：

```
lines=`wc -l file | awk '{print $1}'` 
```

* * *

要调试 bash 脚本 (boot.sh)，您可以：

```
$ bash -x ./boot.sh 
```

它将打印执行的每一行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T09:00:54.897

```
wc -l file 
```

输出

```
1234 file 
```

采用

```
lines=`wc -l < file` 
```

只获得行数。此外，有些人更喜欢这种表示法而不是反引号：

```
lines=$(wc -l < file) 
```

另外，由于我们不知道是否`$var`包含空格，以及文件是否存在：

```
fn="$var/customize/script.php"
if test ! -f "$fn"
then
    echo file not found: $fn
elif test $(wc -l < "$fn") -le 10
then
    echo less than 11 lines
else
    echo more than 10 lines
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:16:28.697

此外，您应该使用

```
if [[ $lines -gt 10 ]]; then
    something
else
  something
fi 
```

`test condition`确实过时了，它的直接后继者也是如此`[ condition ]`，主要是因为您必须非常小心这些形式。例如，您必须引用`$var`传递给`test`or的任何内容`[ ]`，并且还有其他细节会让人毛骨悚然。（测试在任何方面都被视为任何其他命令）。查看这篇[文章](http://wiki.bash-hackers.org/commands/classictest#pitfalls_summarized)了解一些细节。

# ios - Janrain appId 可以公开吗？

> ID：10993341
> 
> 赞同：1
> 
> 时间：2012-06-12T08:55:47.633
> 
> 标签：ios, authentication, janrain

对于使用 Janrain AppId 的网站是否可以公开公开 Janrain AppId 以使第三方应用程序使用 iOS SDK 执行身份验证，我无法给出明确的答案。

### 背景

该站点使用 Janrain Engage 进行社交登录 ( [http://jabbr.net](http://jabbr.net) )，并且是一个开源项目。我正在开发一个 iPhone 应用程序，为了使用 Janrain 的 iOS SDK，该应用程序需要知道服务器的 Janrain AppId。

我不想在客户端上硬编码 appId，因为我希望客户端可以与任何 JabbR 服务器一起使用，而不仅仅是这个特定的服务器。

### 问题

我可以在使用社交登录的网站上通过公共 API 调用公开 appId 吗？这样做有什么安全问题吗？

**PS。**我确实问过 Janrain 这个问题，但由于我的帐户只是一个免费的测试帐户，我没有得到任何回复，我的问题被关闭了。~~此外，他们的论坛对免费帐户是只读的，所以那里也没有运气。~~我想出了如何在论坛上发帖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:33:28.450

Janrain 在社区论坛上已经回答了这个问题 - [https://community.janrain.com/requests/870](https://community.janrain.com/requests/870)（需要登录）：

> 公开 AppID 绝对没有什么不安全的。应用程序的秘密是 > 永远不应该暴露的。
> 
> 问候，
> 
> 杜克
> 詹瑞恩支持

# c# - 获取访问者的当前位置

> ID：10993343
> 
> 赞同：0
> 
> 时间：2012-06-12T08:55:55.947
> 
> 标签：c#, javascript, jquery, asp.net, .net

我已经找到了可以使用他或她的 IP 地址为用户提供国家或州的功能。但我真正需要的是确切的位置。

就像您在[此链接](http://htmlfive.appspot.com/static/whereami.html)上看到的那样，可以获得用户非常具体的当前位置。

ASP.NET C#、Javascript 或 jQuery 怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:59:50.477

您可以在 JavaScript 中使用[Geolocation API](https://developer.mozilla.org/en/Using_geolocation) ...获取当前位置，请使用以下命令：

```
navigator.geolocation.getCurrentPosition(function(position) {
  do_something(position.coords.latitude, position.coords.longitude);
}); 
```

`do_something()`可能是更新地图或仅显示当前的经度和纬度。[很好的简单例子在这里](http://jsfiddle.net/ThinkingStiff/aA2zv/)

浏览器支持（[来源](http://html5doctor.com/finding-your-position-with-geolocation/)）：

*   火狐 3.5+
*   铬 5.0+
*   Safari 5.0+
*   歌剧 10.60+
*   浏览器 9.0+

[API规范在这里](http://dev.w3.org/geo/api/spec-source.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T09:02:40.060

```
 navigator.geolocation.getCurrentPosition(
      onSuccess,
      onError, {
        enableHighAccuracy: true,
        timeout: 20000,
        maximumAge: 120000
      });

function onSuccess(position) {
      //the following are available to use
  //position.coords.latitude
  //position.coords.longitude
 // position.coords.altitude
 // position.coords.accuracy
 // position.coords.altitudeAccuracy
 // position.coords.heading
 // position.coords.speed 

} 
```

[你可以在这里找到详细信息](http://www.worldwidewhat.net/2011/08/find-out-you-visitors-positio-using-html5-geolocation/)

**警告**：这将在浏览器中弹出一个权限对话框，看起来像这样（Safari）： ![在此处输入图像描述](../Images/996ef44028cfa2783dcfdff7716927e9.png)

# delphi - 如何制作一个简单的代理服务器？

> ID：10993345
> 
> 赞同：4
> 
> 时间：2012-06-12T08:55:59.637
> 
> 标签：delphi, proxy, indy10

我想为我的本地主机（xampp）创建一个简单的代理。我查看了 IdHTTPProxyServer 但没有可用的示例说明如何使用它。

我的目的是像调试器一样在运行时监视我的应用程序的 Post/Get 请求。

我的应用程序将通过 localhost:8080 发布/获取，然后我的代理将充当到 localhost:80 的桥梁

有什么建议或例子吗？

我使用的是 D2009，D2010 必须支持 Unicode。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T16:24:24.390

我知道它不是 Indy，但 Synapse（我将它与 Lazarus 一起使用）包含一个代理服务器示例，它也应该在 Delphi 上工作。它在 FPC 上对我来说效果很好。该演示包含在您在此处获得的来源中：

[http://www.ararat.cz/synapse/doku.php/download](http://www.ararat.cz/synapse/doku.php/download)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:06:39.130

您可以使用[Overbyte ICS TCP/IP 库](http://www.overbyte.be/frame_index.html?redirTo=/products/ics.html)，在“用户制作”页面上有很多代理示例，其中一个是[tgphttpproxy](http://17slon.com/gp/gp/tgphttpproxy.htm)。

# java-me - LWUIT 日历。在所选日期设置时间并以毫秒为单位查找差异

> ID：10993347
> 
> 赞同：2
> 
> 时间：2012-06-12T08:56:15.803
> 
> 标签：java-me, calendar, lwuit, datediff

我已经在基于 LWUIT 的 UI 中加载了日历。感谢[这个线程](https://stackoverflow.com/questions/6895548/lwuit-calendar-with-button-event)。它很整洁。

1.  当我选择某个日期时，我希望日历关闭并且所选日期以 dd-mmm-yyyy 形式出现在我的原始表格中。

2.  我想选择这个选定的日期，将当天的时钟设置为 1200 小时（下午），然后找到从现在到所选日期的 1200 小时之间经过的毫秒数。我之前[在这里](https://stackoverflow.com/questions/10395351/date-picking-and-finding-difference)问过的东西，但对于使用 netbeans 7.1.2 的桌面 Java 应用程序。

我发现 LWUIT 日历不支持 getInstance、getCalendar、setTime 等方法。他们是吗？我只能有 date = getDate(); 但不能在那个日期设置时钟。

进一步，1.如何选择当前时间（现在），以毫秒为单位。这行得通吗？

`今天的日历 = Calendar.getInstance();

日期 time_now = today.getTime();`

2.  如果可以，我如何找到用户选择的日期和 time_now 之间的差异。（假设我只是简单地将 (12*60*60*1000) 添加到上述差异以补偿无法将时钟设置为中午。）真正的问题是，以上两个对象是日期对象，我想要差异以毫秒为单位作为双精度或长变量。

有什么解决办法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:57:27.123

您将 LWUIT`com.sun.lwuit.Calendar`类和`java.util.Calendar`类混淆了，它们具有相似的名称但完全不同。您可以`java.util.Calendar`通过键入其完全限定名称来使用该类。

请记住，`java.util.Calendar`J2ME 中的类比 Java SE 中的类更受限制，但在某种程度上仍然可以使用。

# iphone - 使用强制转换而不是 CFStringRef 获取联系信息

> ID：10993351
> 
> 赞同：1
> 
> 时间：2012-06-12T08:56:30.930
> 
> 标签：iphone, objective-c, casting

我对使用“CFStringRef”有疑问。我见过几个管理 iPhone 联系人的示例，其中大多数都使用：

```
...
ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
CFStringRef emailRef = ABMultiValueCopyValueAtIndex(emails, 0);
...
NSString *email = (NSString *)emailRef; 
```

我不知道为什么使用 CFStringRef 而不是使用强制转换：

```
...
ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
NSString *email = (NSString *)ABMultiValueCopyValueAtIndex(emails, 0);
... 
```

使用 CFStringRef 是否常规？使用直接铸造是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:58:08.973

没有区别，第一个例子只是使用了一个额外的临时变量。执行直接转换是完全可以的，尽管您应该注意内存管理方面。`ABMultiValueCopyValueAtIndex`尽管文档不清楚，但听起来像是返回了一个保留的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:58:54.557

> [CFString](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html)与 Cocoa Foundation 对应的 NSString 是“免费桥接”。这意味着 Core Foundation 类型在函数或方法调用中可以与桥接的 Foundation 对象互换。因此，在看到 NSString * 参数的方法中，可以传入 CFStringRef，在看到 CFStringRef 参数的函数中，可以传入 NSString 实例。这也适用于 NSString 的具体子类。

两者都是一样的。

# c# - 压缩发送到 ASMX Web 服务的数据

> ID：10993352
> 
> 赞同：0
> 
> 时间：2012-06-12T08:56:36.680
> 
> 标签：c#, .net, web, compression, asmx

我有一个老式的 .NET ASMX (SOAP/XML) Web 服务，用于将数据上传到具有非常简单和轻量级的 ack 响应的中央服务。这已经存在多年并且运行良好。

但是，现在使用情况发生了一些变化，并且正在发送的有效负载数据的整体大小已经增加到不再可行/可靠地发送未压缩数据的程度。

所以问题是：如何对从客户端发送到 Web 服务的数据启用压缩。

谷歌搜索了无数关于压缩来自服务的响应的页面，但是我需要压缩请求。

请记住，这必须保留为 ASMX，并且必须保留在 .NET 2 上

编辑：作为一项临时措施，我在发送之前手动压缩（GZIP）有效负载数据，然后在另一端解压缩。这可行，但我更喜欢“传统传输级别”压缩。

例如：

```
...
<soap:Body>
    <MessageData id="1234">
        <SenderIdentifier>foobar</SenderIdentifier>
        <Payload>....This is what is compressed (GZIP)....</Payload>
    </MessageData>
</soap:Body>
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:16:50.733

3年前我在博客上写过：

[http://netpl.blogspot.com/2009/07/aspnet-webservices-two-way-response-and.html](http://netpl.blogspot.com/2009/07/aspnet-webservices-two-way-response-and.html)

# java - JSF、Spring 应用：不同的用户看到相同的视图

> ID：10993355
> 
> 赞同：0
> 
> 时间：2012-06-12T08:56:46.027
> 
> 标签：java, spring, session, jsf, primefaces

我有一个 JSF 2.1、Primeface 3.2、Spring/Spring security 3.05 Web 应用程序。我使用一个帐户登录并进行一些 UI 操作（按钮单击、一些 ajax 操作等）。我注销然后用另一个用户登录，我看到相同的视图（表示在前一个用户完成操作后的相同状态）

我尝试了一些技巧，例如将范围更改为请求，使会话无效，注销后将面部重定向设置为 true，将 javax.faces.STATE_SAVING_METHOD 设置为客户端等，但没有任何效果。

编辑1：在我看到相同视图的同时尝试使用不同用户的不同浏览器。

编辑2：

场景 1：我有一个复选框列表，我勾选了一些复选框，然后我单击了一个触发 managedBean 事件的人 (actionListener="#{xxxxxMB.doSomething}")，然后我注销并登录，复选框保持勾选,

场景2：同样我勾选了一些复选框，然后我注销并登录，复选框没有勾选。

# c++ - 包含 C++ 项目的 TFS 2010 源代码控制下的 VS2010 解决方案在打开时会发出警告

> ID：10993358
> 
> 赞同：2
> 
> 时间：2012-06-12T08:57:04.947
> 
> 标签：c++, visual-studio-2010, sql-server-ce

我刚刚接手了一个项目的维护。这是一个 VS2010 解决方案，在其项目中包括一个 C++ 项目。整个解决方案作为源代码控制系统保存在 TFS 2010 中。

现在，每当我打开解决方案时，VS2010 都会向我展示这个烦人的对话框；

```
Visual C++ found a suitable location to store its browsing database and IntelliSense files 
for the solution 
"C:\***\****x.sln."

Visual C++ examined the folder "C:\***\A***LL." 
This folder is not suitable because of the following:
The browsing database in this directory has the read-only attribute and cannot be written to.
The directory is on a local drive.

Because a 'Fallback Location' was not specified in the C++ Advanced Options, Visual C++ is 
attempting to use your temporary directory.

Visual C++ examined the folder "C:\Users\***\AppData\Local\Temp\VC++\c****-57e7d5e2." This folder is suitable because of the following:
The directory is on a local drive.

The 'Fallback Location' is configurable under C++ Advanced Options.

Press OK to use this location. 
```

看起来这是由**C++ 解决方案 *.SDF 文件在源代码控制下**引起的，这意味着当解决方案打开时（尽管在源代码控制下）它是只读的，因此对话框的只读​​位。

所以我的问题是 TFS 源代码控制下的 C++ 项目的最佳实践是什么？

1.  我是否应该从源代码管理中删除 .sdf 文件，让 VS 在每次有人获得解决方案时重新创建它？
2.  我是否应该勾选使用回退选项有效地绕过存储库中的 .SDF

**或者** 有没有更好的方法让 VS2010 知道 SDF 文件受源代码控制，以便在打开项目时自动检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:31:23.107

我只能建议从源代码管理中排除 sdf。对它进行版本控制没有任何好处，因为它是在每次发生变化时生成的，几乎每次都发生变化。正如人们可以说的那样，除非绝对有必要共享它们（例如，需要的图标和图像），否则您永远不应该对二进制文件进行版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-05T18:57:33.787

我的问题是虚幻引擎 4 解决方案。问题是我已经移动了项目的中间文件夹（其中包括构建文件），然后在下次打开编辑器时重新生成它（没有构建文件）。修复方法是删除新的中间文件夹并将旧文件夹重新迁移到项目目录。

如果您已经删除了中间文件夹并且没有备份，则修复很可能是 rmb .uproject>generate Visual Studio 项目文件。

# joomla - Jooma K2 在评论中显示用户描述

> ID：10993359
> 
> 赞同：0
> 
> 时间：2012-06-12T08:57:06.560
> 
> 标签：joomla, joomla-k2

这次我真的需要帮助 - Joomla 2.5 和最新的 K2。我正在使用默认的 K2 评论系统，我想为该页面上的每个评论者显示“描述”字段。到目前为止，我有这个代码：

```
$thisUserdata =& JFactory::getUser($comment->userID);
echo $thisUserdata->profile->description; 
```

但这仅显示页面作者的描述。如果我使用其他帐户登录，只要我登录，它也会显示我自己的描述。

我正在做的所有编码都在 /components/com_k2/templates/default/item.php

注释的整个代码如下所示：

```
<?php if($this->item->numOfComments>0 && $this->item->params->get('itemComments') && ($this->item->params->get('comments') == '1' || ($this->item->params->get('comments') == '2'))): ?>
    <!-- Item user comments -->
      <ul>
        <?php foreach ($this->item->comments as $key=>$comment): ?>
        <li class="<?php echo ($key%2) ? "odd" : "even"; echo (!$this->item->created_by_alias && $comment->userID==$this->item->created_by) ? " author-comment" : ""; echo($comment->published) ? '':' unpublishedComment'; ?>">
            <div class="avatar">
                <?php if($comment->userImage): ?>
                <a href="<?php echo JFilterOutput::cleanText($comment->userLink); ?>" target="_blank" rel="nofollow">
                    <img src="<?php echo $comment->userImage; ?>" alt="<?php echo JFilterOutput::cleanText($comment->userName); ?>" width="<?php echo $this->item->params->get('commenterImgWidth'); ?>" />
                </a>
                <?php endif; ?>
            </div>
            <div class="inner">
                <div class="author">
                    <?php if(!empty($comment->userLink)): ?>
                        <a href="<?php echo $comment->userLink; ?>" title="View <?php echo $comment->userName; ?> profile" target="_blank" rel="nofollow">
                            <?php echo $comment->userName; ?>
                        </a>
                    <?php else: ?>
                        <a rel="nofollow"><?php echo $comment->userName; ?></a>
                    <?php endif; ?>
                </div>
                <div class="date">
                    &#160;<?php echo JHTML::_('date', $comment->commentDate, JText::_('K2_DATE_FORMAT_COM_MARIO')); ?>
                </div>
                <p><?php echo $comment->commentText; ?>
                <?php
                // USER DESCRIPTION
                $thisUserdata =& JFactory::getUser($comment->userID);
                echo $thisUserdata->profile->description;
                ?>          
                </div>
            </div>
        </li>
        <?php endforeach; ?>
      </ul>

      <div class="itemCommentsPagination">
        <?php echo $this->pagination->getPagesLinks(); ?>
        <div class="clr"></div>
      </div>
<?php endif; ?>

<?php if($this->item->params->get('commentsFormPosition')=='below' && $this->item->params->get('itemComments') && !JRequest::getInt('print') && ($this->item->params->get('comments') == '1' || ($this->item->params->get('comments') == '2' && K2HelperPermissions::canAddComment($this->item->catid)))): ?>
    <!-- Item comments form -->
    <div class="itemCommentsForm">
        <?php echo $this->loadTemplate('comments_form'); ?>
    </div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:46:33.657

使用 Joomla 2.5，您可以使用它来获取基本用户信息，但您想使用以下内容来获取评论用户的“描述”或“关于我”的内容。

```
$commentUser = JUserHelper::getProfile($comment->userID);
print_r($commentUser);

$about_me = $commentUser->profile['aboutme'];
echo $about_me; 
```

这也是链接，如果您想使用 JUserHelper 做其他事情，这可能会有所帮助。

[http://api.joomla.org/Joomla-Platform/User/JUserHelper.html#getProfile](http://api.joomla.org/Joomla-Platform/User/JUserHelper.html#getProfile)

编辑：确保启用插件“用户 - 个人资料”，否则这将不起作用。

# string - 字符串字典排列和倒置

> ID：10993365
> 
> 赞同：2
> 
> 时间：2012-06-12T08:57:32.567
> 
> 标签：string, algorithm, permutation

考虑字符串上的以下函数：

```
int F(string S)
{
    int N = S.size();

    int T = 0;

    for (int i = 0; i < N; i++)
        for (int j = i + 1; j < N; j++)
            if (S[i] > S[j])
                T++;

    return T;
} 
```

长度为 N 且所有成对不同字符的字符串 S0 总共有 N！独特的排列。

例如“bac”有以下 6 个排列：

```
bac
abc
cba
bca
acb
cab 
```

考虑这些 N! 按字典顺序排列的字符串：

```
abc
acb
bac
bca
cab
cba 
```

现在考虑将 F 应用于这些字符串中的每一个：

```
F("abc") = 0
F("acb") = 1
F("bac") = 1
F("bca") = 2
F("cab") = 2
F("cba") = 3 
```

给定这组排列中的某个字符串 S1，我们希望找到该集合中的下一个字符串 S2，它与 S1 具有以下关系：

```
F(S2) == F(S1) + 1 
```

例如，如果 S1 == "acb" (F = 1) 比 S2 == "bca" (F = 1 + 1 = 2)

一种方法是从过去的 S1 开始并遍历排列列表以寻找 F(S) = F(S1)+1。不幸的是，这是 O(N!)。

我们可以通过 S1 上的 O(N) 函数直接计算 S2 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:58:42.953

假设 S1 的长度为 n，最大值为`F(S1)`，`n(n-1)/2`如果`F(S1) = n(n-1)/2`，表示它是最后一个函数，没有任何下一个，但如果`F(S1) < n(n-1)/2`，表示至少有一个字符`x`大于 char`y`并且`x`在 旁边`y`，找到这样的`x`索引最低，并更改 x 和 y 位置。让我们通过例子来看看：

S1 == "acb" (F = 1) , 1 < 3 所以有一个 char`x`比另一个 char 大`y`并且它的索引大于`y`，这里最小的索引`x`是`c`，并且首先尝试将其替换为`a`（即小于`x`所以算法在这里完成）==> S2= "cab", F(S2) = 2。

现在让我们用 S2 进行测试，cab: x=b, y=a, ==> S3 = "cba".\

查找`x`不难，迭代输入，并有一个变量名 it `min`，而当前访问的字符小于`min`，设置`min`为新访问的字符，并访问下一个字符，第一次访问大于`min`停止迭代的字符，这是`x`：

这是 c# 中的伪代码（但我不小心边界，例如在 input.Substring 中）：

```
string NextString(string input)
{
    var min = input[0];
    int i=1;
    while (i < input.Length && input[i] < min)
    {
       min = input[i];
       i++;
    }

    if (i == input.Length) return "There isn't next item";

    var x = input[i], y=input[i-1];
    return input.Substring(0,i-2) + x + y + input.Substring(i,input.Length - 1 - i);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:29:17.197

这是解决您的问题的算法的大纲。

我假设您有一个函数可以直接返回第`n`-th 排列（给定`n`）及其逆排列，即返回`n`给定排列的函数。让它们分别为`perm(n)`和`perm'(n)`。

如果我猜对了，当你有一个 4 个字母的字符串来置换函数 F 时，如下所示：

```
F("abcd")   = 0
F("abdc")   = 1
F(perm(3))  = 1
F(...)      = 2
F(...)      = 2
F(...)      = 3
F(perm(7))  = 1
F(...)      = 2
F(...)      = 2
F(...)      = 3
F(...)      = 3
F(...)      = 4
F(perm(13)) = 2
F(...)      = 3
F(...)      = 3
F(...)      = 4
F(...)      = 4
F(...)      = 5
F(perm(19)) = 3
F(...)      = 4
F(...)      = 4
F(...)      = 5
F(...)      = 5
F(perm(24)) = 6 
```

换句话说，当您从 3 个字母变为 4 个字母时，您将获得 F 值表的 4 个副本，分别将 (0,1,2,3) 添加到 (1st,2nd,3rd,4th) 副本。例如，在第 2 种情况下，您已经将第 2 个字母放在第 1 位，从而导致一种错乱；这只是以与原始 3 字母字符串相同的模式添加到其他混乱中。

从这个大纲来看，编写函数 F 应该不会太难（但我现在没有时间）。严格来说，F 的逆不是一个函数，因为它是多值的，但是给定`n`, 和`F(n)`只有少数情况下可以找到`m`st `F(m)==F(n)+1`。这些情况是：

*   `n == N!`其中`N`是字符串中字母的个数，没有下一个排列；
*   `F(n+1) < F(n)`, 寻求的解决方案是`perm(n+(N-1)!)`, ;
*   `F(n+1) == F(n)`, 解决方案是`perm(n+2)`;
*   `F(n+1) > F(n)`，解决方案是`perm(n+1)`。

我怀疑其中一些可能只适用于 4 个字母的字符串，其中一些术语必须针对 K 字母排列进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:32:03.567

这不是`O(n)`，但至少是`O(n²)`（其中 n 是排列中的元素数，在您的示例 3 中）。

首先，请注意，每当您在字符串中放置一个字符时，您已经知道 F 增加了多少意味着 - 它比尚未添加到字符串中的字符小很多。

这为我们提供了另一种计算 F(n) 的算法：

```
used = set()

def get_inversions(S1):
    inv = 0
    for index, ch in enumerate(S1):
        character = ord(ch)-ord('a')
        cnt = sum(1 for x in range(character) if x not in used)
        inv += cnt
        used.add(character)
    return inv 
```

这并不比原始版本好多少，但在反转 F 时很有用。您想知道第一个按字典顺序较小的字符串 - 因此，复制原始字符串并仅在强制时更改它是有意义的。当需要进行此类更改时，我们还应该尽可能少地更改字符串。

为此，让我们使用具有`n`字母的字符串的 F 的最大值是的信息`n(n-1)/2`。如果我们不更改原始字符串，每当所需反转的数量大于此数量时，这意味着我们必须在该点交换一个字母。Python中的代码：

```
used = set()

def get_inversions(S1):
    inv = 0
    for index, ch in enumerate(S1):
        character = ord(ch)-ord('a')
        cnt = sum(1 for x in range(character) if x not in used)
        inv += cnt
        used.add(character)
    return inv

def f_recursive(n, S1, inv, ign):
    if n == 0: return ""

    delta = inv - (n-1)*(n-2)/2

    if ign:
        cnt = 0
        ch = 0
    else:
        ch = ord(S1[len(S1)-n])-ord('a')
        cnt = sum(1 for x in range(ch) if x not in used)

    for letter in range(ch, len(S1)):
        if letter not in used:
            if cnt < delta:
                cnt += 1
                continue

            used.add(letter)
            if letter != ch: ign = True

            return chr(letter+ord('a'))+f_recursive(n-1, S1, inv-cnt, ign)

def F_inv(S1):
    used.clear()
    inv = get_inversions(S1)

    used.clear()
    return f_recursive(len(S1), S1, inv+1, False)

print F_inv("acb") 
```

也可以`O(n log n)`通过用诸如[二叉索引树](http://en.wikipedia.org/wiki/Binary_indexed_tree)之类的数据结构替换最内层循环来使其运行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T17:04:56.780

您是否尝试交换字符串中的两个相邻字符？似乎它可以帮助解决问题。如果交换 S[i] 和 S[j]，其中 i < j 且 S[i] < S[j]，则 F(S) 增加 1，因为所有其他索引对都不受此排列的影响。

如果我没记错的话，F 会计算排列的[反转](http://en.wikipedia.org/wiki/Permutation#Inversions)次数。

# websphere - 如何使用 wsadmin 将应用程序安装到 WebSphere 7.0 集群？

> ID：10993366
> 
> 赞同：0
> 
> 时间：2012-06-12T08:57:33.323
> 
> 标签：websphere, wsadmin

我想部署到具有两个节点的 Websphere 集群上的所有四个进程。有没有办法用一个 Jython 命令来做到这一点，还是我必须在每个命令上调用“AdminControl.invoke”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:45:10.893

使用 wsadmin 安装应用程序的最简单方法是使用 AdminApp 而不是 AdminControl。

我建议你下载[wsadminlib.py](http://www.ibm.com/developerworks/apps/download/index.jsp?contentid=166422&filename=wsadminlib.py.zip&method=http&locale=)（从[这里](http://www.ibm.com/developerworks/websphere/library/samples/SampleScripts.html)获得链接）

它有很多功能，其中之一是`installApplication`也适用于集群。

编辑：

最近我发现了 AdminApplication，它是 WAS 7 中包含的一个脚本库（/opt/IBM/WebSphere/AppServer/scriptLibraries/application/V70）

信息中心的文档不是很好，但它是一个 .py 文件，您可以在里面查看它的作用。

它会自动导入到 wsadmin，您无需任何导入或其他配置即可使用它。

值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:00:05.770

@aviram-segal 是对的，[wsadminlib](http://www.ibm.com/developerworks/websphere/library/samples/SampleScripts.html#download)对此非常有帮助。我使用以下语法：

```
 arg = ["-reloadEnabled", "-reloadInterval '0'", "-cell "+self.cellName, "-node "+self.nodeName, "-server '"+ self.serverName+"'", "-appname "+ name, '-MapWebModToVH',[['.*', '.*', self.virtualHost]]]
    AdminApp.install(path, arg) 
```

其中 path 是您的 EAR/WAR 文件的位置。[你可以在这里](http://publib.boulder.ibm.com/infocenter/wsdoc400/v6r0/index.jsp?topic=/com.ibm.websphere.iseries.doc/info/ae/ae/txml_callappinstall.html)找到文档

# javascript - 了解 crossdomain.xml 和恶意脚本？

> ID：10993367
> 
> 赞同：0
> 
> 时间：2012-06-12T08:57:37.200
> 
> 标签：javascript, jquery

试图弄清楚为什么只有 javascript 代码只能回调到托管页面的同一域，并且我知道您不希望代码将个人详细信息等发送到另一个域（可能是恶意站点）。

但是，如果其他域将 crossDomain.xml 文件放在他们的服务器上，这是否意味着恶意站点现在可以接受调用？

你可以猜到我对它的工作原理有一个基本的了解，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:03:45.333

如果站点 A 发布了一个合适的 crossDomain.xml 文件，那么站点 B 可以使用 Adob​​e Flash 从站点 A 读取数据。这与 JavaScript 无关。

JavaScript 等价物是[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

在任何一种情况下，给予的许可都应该是：

*   对于非机密数据
*   到受信任的网站

在第一种情况下，如果站点 B 是恶意的，那么它就不会对数据做任何坏事。第二，Site A的开发者在信任Site B方面犯了严重错误。

# vbscript - VBscript - 读取多个注册表值

> ID：10993369
> 
> 赞同：0
> 
> 时间：2012-06-12T08:57:43.333
> 
> 标签：vbscript, registry, wmi

我无法让我的 VBscript 读取每个 Firefox 插件的版本号。这些插件位于`HKEY_LOCAL_MACHINE\SOFTWARE\MozillaPlugins`. 每个都在一个单独的文件夹中，每个都包含一个`Version`带有我正在寻找的值的键（[截图](http://imgur.com/r0I3y)以使其更清晰）。我知道我需要使用 wmi，但我认为我需要一个循环来遍历每个文件夹。我正在使用[此](http://www.serverwatch.com/tutorials/article.php/1476831/Managing-Windows-Registry-with-Scripting-Part-1.htm)链接来帮助我，但我一直迷路。

任何有关这方面的帮助或更多信息将不胜感激。如果这个问题问得不好，我深表歉意，我的 VBscripting 技能非常有限。如果是这样，请发表评论，我会尝试提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:52:32.897

下次请尽可能少地发布您已经获得的内容。这是我刚刚制作的脚本

```
on error resume next
dim aKeys, version
Const HKEY_CURRENT_USER = &H80000001, HKEY_LOCAL_MACHINE = &H80000002
set oShell    = WScript.CreateObject("WScript.Shell")
set objreg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\default:StdRegProv")
strKeyPath = "Software\MozillaPlugins"
'read subkeys in array aKeys
objreg.EnumKey HKEY_LOCAL_MACHINE, strKeyPath, aKeys
for each subkey In aKeys
  'read from version key if available
  version = oShell.RegRead("HKEY_LOCAL_MACHINE\" & strKeyPath & "\" & subkey & "\version")
  if version = "" then
    'perhaps version info in keyname itself ?
    version = split(split(subkey,"version=")(1),",")(0)
  end if
  if version = "" then
    version = "no version info available"
  end if
  wscript.echo split(subkey,",")(0) & ": " & version
  version = ""
next 
```

给我的系统

```
@adobe.com/FlashPlayer: 10.0.45.2
@docu-track.com/PDF-XChange Viewer Plugin: 1.0
@java.com/JavaPlugin: 160_23
@Microsoft.com/NpCtrl: 4.1
@microsoft.com/WPF: 3.5
@tracker-software.com/PDF-XChange Viewer Plugin: 1.0
@View22/View22: 3.10.50
Adobe Reader: 10.1.0 
```

# mustache - mustache.js 是否支持这样的表达式判断？

> ID：10993373
> 
> 赞同：0
> 
> 时间：2012-06-12T08:57:48.700
> 
> 标签：mustache

mustache.js 是否支持这样的表达方式？-> **{{type == "a"}}**

**我该怎么办？**

小胡子：</p>

```
{{#items}}
  {{type == "a"}} 
    <li>{{name}} {{type}}</li>
  {{/link}}
  {{type == "b"}} 
    <strong>{{name}} {{type}}</strong>
  {{type == "c"}} 
    <span>{{name}} {{type}}</span>
  {{/link}}
{{/items}} 
```

JSON：</p>

```
{
  "header": "Colors",
  "items": [
      {"name": "red", "type": "a", "url": "#Red"},
      {"name": "green", "type": "b", "url": "#Green"},
      {"name": "blue", "type": "c", "url": "#Blue"}
  ],
  "empty": false
} 
```

想要输出：

```
<li>red a</li>
<strong>green b</strong>
<span>blue c</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:54:56.827

你不能，因为 Mustache 没有逻辑。

最佳实践是以“逻辑”已包含在输入中的方式更改您的输入 JSON。就像是：

```
{
  "header": "Colors",
  "items": [
      {"a": {"name": "red", "url": "#Red"}},
      {"b": {"name": "green", "url": "#Green"}},
      {"c": {"name": "blue", "url": "#Blue"}}
  ],
  "empty": false
} 
```

然后：

```
{{#items}}
  {{#a}}
    <li>{{name}} {{type}}</li>
  {{/a}}
  {{#b}}
    <strong>{{name}} {{type}}</strong>
  {{/b}}
  {{#c}}
    <span>{{name}} {{type}}</span>
  {{/c}}
{{/items}} 
```

会产生你想要的。

**编辑** 不知何故我无法让上面的例子工作。我正在使用 Hogan（由 Twitter 维护的 mustache 版本，速度更快，并且你可以用它做一些额外的事情，一定要检查一下）但我很确定它没有任何东西与上述内容应该可以正常工作的事实有关。

无论如何，我可以在提供的演示页面上进行以下操作，该页面与原始示例更接近，并完成了您想要的输出。一般说明：您可以检查字段是否存在（例如使用`{{#isa}}`），但标签中不能有任何其他逻辑。

```
{{#items}}
  {{#isa}}
   <li><strong>{{name}}</strong></li>
  {{/isa}}
  {{#isb}}
   <li><a href="{{url}}">{{name}}</a></li>
  {{/isb}}
  {{#isc}}
    <li><span href="{{url}}">{{name}}</span ></li>
  {{/isc}}
{{/items}} 
```

JSON

```
{
  "header": "Colors",
  "items": [
      {"name": "red", "isa": true, "url": "#Red"},
      {"name": "green", "isb": true, "url": "#Green"},
      {"name": "blue", "isc": true, "url": "#Blue"}
  ],
  "empty": false
} 
```

hth

# automapper - 如何将嵌套对象映射到相同类型的另一个现有对象？

> ID：10993380
> 
> 赞同：1
> 
> 时间：2012-06-12T08:58:11.280
> 
> 标签：automapper

有两个类：

```
public class Foo
{
    public String Name { get; set; }
}

public class FooWrapper
{
    public Foo Foo { get; set; }
} 
```

目标是将 FooWrapper 映射到 Foo。

```
 [TestMethod]
    public void FooWrapperDerived_CanBeAssignToFoo_WithoutAfterMap()
    {
        FooWrapper fw = new FooWrapper { Foo = new Foo { Name = "foo" } };
        Foo foo = new Foo();

        Mapper.CreateMap<Foo, Foo>();
        Mapper.CreateMap<FooWrapper, Foo>();
            //.ConstructUsing(w => w.Foo);                      //Actual:<(null)>
            //.ConvertUsing(w => w.Foo);                        //Actual:<(null)>
            //.ForAllMembers(c => c.MapFrom(w => w.Foo));       //Actual:<MvcArch.Tests.Common.Foo>
            //.ForAllMembers(c => c.ResolveUsing(w => w.Foo));  //Actual:<MvcArch.Tests.Common.Foo>
            //.ForAllMembers(c => c.UseValue(fw.Foo));          //Actual:<MvcArch.Tests.Common.Foo>
            //.ForMember(f => f, c => c.MapFrom(w => w.Foo));   //AutoMapper configuration exception
            //.ForMember(f => f.Name, c => c.ResolveUsing(w => w.Foo)); //Actual:<MvcArch.Tests.Common.Foo>
            //.ForMember(f => f.Name, c => c.MapFrom(w => w.Foo.Name)); //works, but I don't want to repeat each property in the configuration

        Mapper.Map<FooWrapper, Foo>(fw, foo);   //uses the Map defined for the base type FooWrapper

        Assert.AreNotSame(foo, fw.Foo);
        Assert.AreEqual("foo", foo.Name);
    } 
```

它使用 AfterMap 作为： Mapper.CreateMap().AfterMap((w, f) => Mapper.Map(w.Foo, f)); 但是是否可以在不访问全局 Mapper 对象的情况下定义地图？

# xtend - How to assign a char in Xtend?

> ID：10993381
> 
> 赞同：1
> 
> 时间：2012-06-12T08:58:11.583
> 
> 标签：xtend

How can a variable of type `char` be assigned? I am looking for the Xtend equivalent of javas:

```
char c='?';
```

In Xtend the compiler reject all quotation marks like `'` or `"` because they produce a String:

```
var char c='?'; 

```

^ Error: *Incompatible types. Expected char or java.lang.Character but was java.lang.String*

Xtext Version is 2.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:04:48.187

Since 2.4 you can write:

```
val char c = '?' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:54:55.377

Currently you have to use '?'.charAt(0).

# c# - 在 Buttonclick 上更改视图

> ID：10993385
> 
> 赞同：8
> 
> 时间：2012-06-12T08:58:34.720
> 
> 标签：c#, wpf, user-interface, mvvm

我目前正在学习 WPF 和 MVVM（或者至少我正在尝试......）。

我创建了一个小示例应用程序，它显示了一个带有 2 个按钮的窗口，每个按钮都应在单击时显示一个新视图。所以我创建了 3 个用户控件（带有 2 个按钮的决策者，每个“点击目标”一个用户控件）。

因此，我将 MainWindow 的 CotentControl 绑定到 MainWindowViewModel 中名为“CurrentView”的属性

MainWindow.xaml 的代码：

```
<Window x:Class="WpfTestApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfTestApplication"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <local:MainWindowViewModel />
</Window.DataContext>
<Grid>
    <ContentControl Content="{Binding CurrentView, Mode=OneWay}" />
</Grid>
</Window> 
```

MainWindowViewModel 代码：

```
class MainWindowViewModel
{      
    private UserControl _currentView = new DecisionMaker();
    public UserControl CurrentView
    {
        get { return _currentView; }
        set { _currentView = value; }
    }

    public ICommand MausCommand
    {
        get { return new RelayCommand(LoadMouseView); }
    }

    public ICommand TouchCommand
    {
        get { return new RelayCommand(LoadTouchView); }
    }

    private void LoadMouseView()
    {
        CurrentView = new UserControlMouse();
    }

    private void LoadTouchView()
    {
        CurrentView = new UserControlTouch();
    }
} 
```

最初的 UserControl (DecisionMaker) 会按预期显示。该方法`LoadMouseView`也被调用。但是视图没有改变。我错过了什么？

**更新：**非常感谢！我错过了 INotifyPropertyChanged 接口。你所有的答案都很棒，非常准确和有帮助！我不知道该接受哪一个-~~我认为这是接受“第一个”答案的最公平方式？~~

我接受了盲目的回答，因为它解决了问题并帮助我更好地理解了 MVVM。但是每个答案都非常感谢你们所有人！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T09:16:42.023

如果你想做 mvvm - 那么你应该在你的视图模型中**没有**对你的视图/用户控件的引用。你必须实施**INotifyPropertyChanged**！ps：如果您的 Viewmodel 中需要 System.Windows 命名空间 - 那就有问题了。

在您的情况下，您需要什么：

*   1个主视图模型
*   UserControlMouse 的 1 个视图模型
*   UserControlTouch 的 1 个视图模型
*   UserControlMouse 的 1 个视图/用户控件
*   UserControlTouch 的 1 个视图/用户控件

你的 mainviewmodel 应该至少有 2 个命令来切换你的视图和 CurrentView 的 1 个属性。在您的命令中，您只需将 CurrentView 设置为正确的视图模型实例。至少每个定义正确视图的视图模型都需要两个数据模板。

```
public object CurrentView
{
    get { return _currentView; }
    set {
        _currentView = value; this.RaiseNotifyPropertyChanged("CurrentView");}
} 
```

xml

```
<Window x:Class="WpfTestApplication.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:WpfTestApplication"
Title="MainWindow" Height="350" Width="525">
<Window.Resources>
 <DataTemplate DataType="{x:Type local:MyMouseViewModel}">
   <local:MyMouseUserControlView/>
  </DataTemplate>
 <DataTemplate DataType="{x:Type local:MyTouchViewModel}">
   <local:MyTouchUserControlView/>
  </DataTemplate>
</Window.Resources>
<Window.DataContext>
 <local:MainWindowViewModel />
</Window.DataContext>
<Grid>

 <!-- here your buttons with command binding, i'm too lazy to write this. -->

 <!-- you content control -->
 <ContentControl Content="{Binding CurrentView, Mode=OneWay}" />
</Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:09:18.623

我会做这样的事情来选择你想要的输入样式，到 MainWindow 我添加了一个属性，让我选择输入模式。

```
public enum UserInterfaceModes
{
    Mouse,
    Touch,
}

public UserInterfaceModes UserInterfaceMode
{
   get { return (UserInterfaceModes)GetValue(UserInterfaceModeProperty); }
   set { SetValue(UserInterfaceModeProperty, value); }
}

public static readonly DependencyProperty UserInterfaceModeProperty = DependencyProperty.Register("UserInterfaceMode", typeof(UserInterfaceModes), typeof(MainWindow), new UIPropertyMetadata(UserInterfaceModes.Mouse)); 
```

然后对于 xaml 视图部分，您可以使用触发器选择正确的模板。

```
<Style TargetType="{x:Type local:MainWindow}">
   <Style.Triggers>
        <DataTrigger Binding="{Binding UserInterfaceMode}" Value="Mouse">
             <Setter Property="Template">
                  <Setter.Value>
                       <ControlTemplate TargetType="{x:Type local:MainWindow}">
                            <Grid Background="Red"/>
                       </ControlTemplate>
                  </Setter.Value>
             </Setter>
        </DataTrigger>
        <DataTrigger Binding="{Binding UserInterfaceMode}" Value="Touch">
             <Setter Property="Template">
                  <Setter.Value>
                       <ControlTemplate TargetType="{x:Type local:MainWindow}">
                           <Grid Background="Blue"/>
                       </ControlTemplate>
                   </Setter.Value>
              </Setter>
         </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T09:08:06.877

视图模型需要实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。否则，当视图模型中的属性发生更改时，视图将不会收到通知。

```
class MainWindowViewModel : INotifyPropertyChanged
{
    private UserControl _currentView = new DecisionMaker();

    public UserControl CurrentView
    {
        get { return _currentView; }
        set
        {
            _currentView = value;
            OnPropertyChanged("CurrentView");
        }
    } 

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T09:08:25.740

您需要实现`INotifyPropertyChanged`on ，以便在更改属性`MainWindowViewModel`时通知视图。`CurrentView`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T09:09:57.487

听起来你想要的行为几乎就是你得到的`[TabControl][1]`- 为什么不使用这个内置控件并将`DataContext`两个选项卡绑定到同一个视图模型。

这还具有您的视图模型不知道视图类的优点（我假设`UserControlMouse`等是用户控件）。

注意：如果您需要视图模型知道它是处于触摸模式还是鼠标模式，这将不适用。

# javascript - 在 mootools 或 javascript 中动态创建对象

> ID：10993386
> 
> 赞同：0
> 
> 时间：2012-06-12T08:58:34.757
> 
> 标签：javascript, object, mootools

我不确定我是否对我正在尝试做的事情使用了正确的术语，所以请原谅。

Mootools More 有一个[Fx.Elements](http://mootools.net/docs/more/Fx/Fx.Elements)类，允许您对一组元素进行补间。该类的[`set`](http://mootools.net/docs/more/Fx/Fx.Elements#Fx-Elements%3aset)方法只接受一个对象并允许我设置原始值，但是我不确定在动态生成 HTML 时需要补间多少元素。

这是我想做的事情的理论：

```
var n = $$('.element').length; // 5
var myObj = {};
var value = 0;
var i;

for (i = 0; i < n; i++) {
    myObj = {
      i: { property : value }
    }                        
}

console.log(myObj);

//    What I get:
//    Object { i : { property: 0 } }

//    What I would like:
//    Object { 
//      0 : { property : 0 
//      },
//      1 : { property : 0 
//      },
//      2 : { property : 0 
//      },
//      3 : { property : 0 
//      },
//      4 : { property : 0 
//      }
//    } 
```

显然，上面只设置了`i`对象的属性 5 次。我需要`i`向上迭代。

我希望我的解释比我想象的要好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:02:28.550

使用对象字面量语法时，键始终被视为字符串——即使没有引号。除此之外，您每次都会覆盖整个对象。

这段代码做你想做的事。请注意，我将其更改为，`i < n`因为您将进入`i = 5`不适合您发布的示例的最后一个循环。

```
for(var i = 0; i < n; i++) {
    myObj[i] = {
        property: value
    }
} 
```

# facebook - Facebook：从访问令牌中提取用户信息

> ID：10993387
> 
> 赞同：0
> 
> 时间：2012-06-12T08:58:46.227
> 
> 标签：facebook, json, facebook-graph-api, facebook-access-token

我使用用户的有效访问令牌来识别用户...

有了这个：
`https://graph.facebook.com/me?fields=id&access_token=VALID_ACCESS_TOKEN`

它返回：

```
{
   "id": "100000004811603"
} 
```

很明显，我只想提取用户的 id ......这是我需要为用户做所有事情的唯一一件事/

有人可以教我如何解析这个吗？在没有密钥
的情况下看到这种类型的结果对我来说很奇怪`Data:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:01:02.483

根据您描述问题的方式，我将尝试回答。

```
$response = // get facebook response as you do
$data = json_decode($response);
$id_that_you_need = $data['id'] 
```

也许我让你们都错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:36:55.147

使用此功能

```
function objectToArray( $object )
{
    if( !is_object( $object ) && !is_array( $object ) )
    {
        return $object;
    }
    if( is_object( $object ) )
    {
        $object = get_object_vars( $object );
    }
    return array_map( 'objectToArray', $object );
} 
```

传递来自[https://graph.facebook.com/me](https://graph.facebook.com/me)的输出？到这个功能。此函数将返回数组。并且您可以轻松地使用值。

像这样

$Array = objectToArray($Data);

print_r($Array);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T05:39:33.577

```
$facebook_token = <VALID_ACCESS_TOKEN>;
$user_information = curl_init("https://graph.facebook.com/me?access_token=$facebook_token");
curl_setopt($user_information,CURLOPT_SSL_VERIFYPEER,FALSE);
curl_setopt($user_information,CURLOPT_SSL_VERIFYHOST,FALSE);
curl_setopt($user_information,CURLOPT_RETURNTRANSFER,true);
$reps= curl_exec($user_information);
curl_close($user_information);
echo($reps);` 
```

`

# javascript - colorbox 和引导库之间的冲突

> ID：10993391
> 
> 赞同：2
> 
> 时间：2012-06-12T08:58:55.377
> 
> 标签：javascript, jquery, twitter-bootstrap, colorbox

[使用来自 Twitter 的ColorBox iFrame](http://www.jacklmoore.com/colorbox)与[Bootstrap](http://twitter.github.com/bootstrap/index.html)之间存在冲突。我正在尝试使用以下 coee 来解决冲突，但同样的问题：

包括所需的库：

```
<script src="../jq/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../bootstrap/js/bootstrap.js" type="text/javascript"></script>  
<script src="../js/colorbox/jquery.colorbox-min.js" type="text/javascript"></script> 
```

彩盒js：

```
jQuery(document).ready(function ($) {

      // colorbox code here 
        }); 
```

和引导 js：

```
 $(document).ready(function () {

      // bootstrap twitter code here 
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:00:52.763

只要`jQuery === $`在当前范围内（通常是这种情况），这两个函数的作用都是一样的。

第一个版本更好，因为如果`noConflict`使用它也可以工作。

```
jQuery(document).ready(function($) {
    // both colorbox and bootstrap code here 
}); 
```

# php - Drupal，识别访问者是否喜欢 Facebook 页面

> ID：10993393
> 
> 赞同：0
> 
> 时间：2012-06-12T08:59:02.830
> 
> 标签：php, facebook, drupal

> **可能重复：**
> [检测网站上的 Facebook 页面粉丝](https://stackoverflow.com/questions/5070465/detect-facebook-page-fan-on-the-website)

我有一个问题要做，drupal 网站是否可以通过简单的访问来识别访问者是否喜欢 Facebook 页面，无需身份验证？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:14:08.287

它已经作为评论得到了回答，但这就是原因。

如果用户尚未通过您编写的 facebook 应用程序进行身份验证，则您无法使用服务器端脚本访问用户信息。但是，您可以成像以使用 iframe 按钮并使用 Javascript 检查 iframe 内容。它也不起作用。

Javascripts 有一个策略，它不能通过不同域上的 DOM 工作。见[http://www.dyn-web.com/tutorials/iframes/refs.php#access](http://www.dyn-web.com/tutorials/iframes/refs.php#access)

我在这里看到另一个已经结束的问题，我不知道这个问题是否也会发生这种情况。

# android - 按下保存按钮时应用程序崩溃

> ID：10993397
> 
> 赞同：1
> 
> 时间：2012-06-12T08:59:11.497
> 
> 标签：android, button, save, volume

当我按下按钮时，我有一个关于保存音量更改的问题，不明白为什么。你能帮忙吗？我的代码如下：

```
 private AudioManager aManager;
    private SeekBar seekVolume;
    private Button save;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        aManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        Button save = (Button) findViewById(R.id.save);

}
    public void saveOnClickListener(View view){

            int progress = 1;
            int keyCode = 0;
            KeyEvent keyEvent;
                aManager.setStreamVolume(AudioManager.STREAM_RING, progress  , AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);
                if(keyCode==KeyEvent.KEYCODE_VOLUME_DOWN || keyCode==KeyEvent.KEYCODE_VOLUME_UP){
    seekVolume.setProgress(aManager.getStreamVolume(AudioManager.STREAM_RING));

            }else if (keyCode==KeyEvent.KEYCODE_VOLUME_DOWN || keyCode==KeyEvent.KEYCODE_VOLUME_UP){
                seekVolume.setProgress(aManager.getStreamVolume(AudioManager.STREAM_NOTIFICATION));

                }
 }

} 
```

首先，我想对振铃音量进行更改，并在按下保存按钮时提交更改。多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:14:28.450

我认为在 xml 中你没有添加这个，因为你已经使用方法**saveOnClickListener** 在 xml 中添加 Button 属性作为

```
 android:onClick="saveOnClickListener" 
```

或者，如果您没有在 xml 中添加，您可以在活动中使用，如下所示

```
 Button save = (Button) findViewById(R.id.save);    
 save.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
          // do here what u want onclick of save button 
               }
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:04:03.680

您已将 aManager 设为 oncrete 中的本地变量，因此它的同名全局变量在 saveOnClickListener 中仍为 null

而不是这个

```
 AudioManager aManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
```

利用

```
aManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
```

在 Oncreate 中…………

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:10:51.243

您最好将 aManager 和 seekVolume 设为全局并删除

```
 SeekBar seekVolume = (SeekBar) findViewById(R.id.seekVolume); 
```

在 onClickListener

# xml - Xpath 选择节点直到标记

> ID：10993399
> 
> 赞同：6
> 
> 时间：2012-06-12T08:59:17.177
> 
> 标签：xml, xslt, xpath

如何选择所有节点 p 直到节点 div ？

```
<div>
 <div>blbaba</div>
 <p>a</p>
 <p>b</p>
 <p>c</p>
 <p>d</p>
 <div>blbaba</div>
 <p>e</p>
 <p>f</p>
 <p>g</p>
 <p>h</p> 
 <div>blbaba</div>
</div> 
```

我想要 a,b,c,d 或 e,f,g,h 我试过类似的东西：//div/following::p[preceding-sibling::div[1]]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T09:46:32.737

利用：

```
/div/div/following::p[count(preceding::div) = 1] 
```

`p`在 1 ^(st) `div`之后和 2 ^(nd)之前得到。`1`在表达式中替换为在 2 ^(nd)之后和 3 ^(rd)`2`之前进行选择。`p` ^(`div`)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T11:59:48.813

`//div/following-sibling::p[preceding::div]`应该让你得到所有的 p ( `a,b,c,d, e,f,g,h`) 如果 div 中包含不同的文本，你可以添加一些条件。例如，在以下示例中仅获取 a,b,c,d 将是：`//div[text()='a']/following-sibling::p[preceding::div]`

或者，如果您有一些可以区分 div 的类、类别或其他任何东西（例如示例中的类）：`//div[@class='peach']/following-sibling::p[preceding::div]`

```
<div>
 <div class='peach'>a</div>
 <p>a</p>
 <p>b</p>
 <p>c</p>
 <p>d</p>
 <div id='abc_123132' >b</div>
 <p>e</p>
 <p>f</p>
 <p>g</p>
 <p>h</p>
 <div>c</div>
</div> 
```

最后一个例子是你的代码是自动生成的，你只知道 div 的某些属性的一部分。在上面的示例中，您可以像这样选择 e,f,g,h：

`//div[contains(@id,'abc')]/following-sibling::p[preceding::div]`获取在 id 包含 'abc' 的 div 之后并在另一个 div 之前的所有兄弟 p

# ios4 - “消息发送到已释放实例 0x606 ...”时崩溃

> ID：10993400
> 
> 赞同：1
> 
> 时间：2012-06-12T08:59:18.800
> 
> 标签：ios4, uifont

我的 iOS 应用程序出现以下崩溃：

*** -[GSFont retain]：消息发送到释放的实例 0x606c7c0

一些实验告诉我，这种崩溃发生在某些字体选择上，而不是其他字体。

我不明白为什么，而且很难知道崩溃实际发生在哪里。我已经设置了我在 XCode 中知道的所有标志以进行调试，但没有成功。我还尝试了“回溯”和“显示信息”，但都没有真正成功，如下所示：

```
(gdb) backtrace
#0  0x0149d057 in ___forwarding___ ()
#1  0x0149cf22 in __forwarding_prep_0___ ()
#2  0x00481ec7 in -[UILabel font] ()
#3  0x00483eec in -[UILabel _drawTextInRect:baselineCalculationOnly:] ()
#4  0x00481b40 in -[UILabel drawTextInRect:] ()
#5  0x0039b6eb in -[UIView(CALayerDelegate) drawLayer:inContext:] ()
#6  0x022069e9 in -[CALayer drawInContext:] ()
#7  0x022065ef in backing_callback ()
#8  0x02205dea in CABackingStoreUpdate ()
#9  0x02205134 in -[CALayer _display] ()
#10 0x02204be4 in CALayerDisplayIfNeeded ()
#11 0x021f738b in CA::Context::commit_transaction ()
#12 0x021f70d0 in CA::Transaction::commit ()
#13 0x022277d5 in CA::Transaction::observer_callback ()
#14 0x0150cfbb in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
#15 0x014a20e7 in __CFRunLoopDoObservers ()
#16 0x0146abd7 in __CFRunLoopRun ()
#17 0x0146a240 in CFRunLoopRunSpecific ()
#18 0x0146a161 in CFRunLoopRunInMode ()
#19 0x01e60268 in GSEventRunModal ()
#20 0x01e6032d in GSEventRun ()
#21 0x0037242e in UIApplicationMain ()
#22 0x00001c62 in main (argc=1, argv=0xbfffef28) at /Users/.…../main.m:14
(gdb) display info 0x606c7c0
No symbol "info" in current context.
(gdb) 
```

任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:03:26.227

我刚刚经历了这一点。就我而言，它与 UITextView 有关。我发现您无法在设置字体之前设置文本，否则您会收到“-[GSFont retain]: message sent to deallocated instance...”崩溃。这适用于您手动创建或通过 xib 文件创建的 UITextView。如果确实在 xib 文件中使用 UITextView，请确保删除 xib 文件中文本视图的所有默认文本，因为在 xib 文件中定义时，ios 似乎将文本设置在字体之前。

更新..也刚刚遇到了一个事件，其中 xib 文件中的 UILabel 导致了同样的问题 - 即使没有默认文本。不完全确定 UILabel 的问题是什么，但在删除 UILabel 后，崩溃消失了。一次添加几个标签，然后崩溃就消失了（去图）。

希望这可以帮助。

# java - 如何在 Java 中迭代 HashMap 值时替换它们

> ID：10993403
> 
> 赞同：70
> 
> 时间：2012-06-12T08:59:30.360
> 
> 标签：java, hashmap, runnable

我正在使用 Runnable 每秒自动从玩家的冷却时间中减去 20，但我不知道如何在迭代时替换值的值。我怎样才能让它更新每个键的值？

```
public class CoolDownTimer implements Runnable {
    @Override
    public void run() {
        for (Long l : playerCooldowns.values()) {
            l = l - 20;
            playerCooldowns.put(Key???, l);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-06-12T09:01:53.257

**使用 Java 8：**

```
map.replaceAll((k, v) -> v - 20); 
```

* * *

**使用 Java 7 或更早版本：**

您可以遍历条目并更新值，如下所示：

```
for (Map.Entry<Key, Long> entry : playerCooldowns.entrySet()) {
    entry.setValue(entry.getValue() - 20);
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-12T09:07:59.327

好吧，你不能通过迭代中的一组值来做到这一点`Map`（就像你现在所做的那样），因为如果你这样做，那么你就没有对键的引用，如果你没有对键的引用，那么您无法更新地图中的条目，因为您无法找出与刚刚更新的值相关联的键。

使用 Maps 时，您有两个这样的更新选项，遍历`Map.Entry<K,V>`中的每个`Map`，或者您可以遍历 key `Set`。有一些方法`Map`可以做这两件事。就个人而言，我会遍历每个`Map.Entry<K,V>`.

```
for (Map.Entry<String, Long> entry : playerCooldowns.entrySet()) {
    entry.setValue(entry.getValue() - 20);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-12T09:00:37.853

为什么不遍历[Map.Entry](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.Entry.html)对象？每个都`Entry`将为您提供键和值，您无需执行额外`get()`的操作`Map`即可获得值。

# c# - 写入文件但无法进行转换

> ID：10993404
> 
> 赞同：-2
> 
> 时间：2012-06-12T08:59:31.140
> 
> 标签：c#, php

我有一个这样的 php 代码，我需要将它转换为 .Net

```
$A = array_keys($_GET);
$f1 = fopen("doc\\outputreport.txt",'w');
for($i=0; $i<sizeof($A); $i++) {
$args = $A[$i]."=".konvertering($_GET[ $A[$i] ], "ISO8859-1", "UTF-8");
fwrite($f1, $args."\r\n");
} 
```

这是我的转换：

```
 string fileOut = ((Request.QueryString["msisdn"] )+ (Request.QueryString["shortcode"]) + (Request.QueryString["password"]).ToString());
        try
        {
            Filestream filestream = new Filestream(@"\\outputreport.txt",  FileMode.Open, FileAccess.Write,FileMode.Append);

        }
        finally
        {

        }
    } 
```

值通过查询字符串来自另一个页面。在这个文件中，我将转换后的 values.UTF-8 写入 ISO。我有另一个名为 konvertering 的函数将字符从 UTF 8 转换为 ISO。但我不在这里处理那部分..这部分是否正确？我该怎么做那部分..给我一个解决方案或线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:08:25.380

我从未使用过 PHP，但如果您只是想写入文件，那么使用它可能会更好

[System.IO.File.AppendAllText（字符串路径，字符串内容）；](http://msdn.microsoft.com/en-us/library/ms143356.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:13:17.143

根据您的问题，我认为它对您有用：

```
 string fileOut = ((Request.QueryString["msisdn"] )+ (Request.QueryString["shortcode"]) + (Request.QueryString["password"]).ToString());

string mydocpath = 
        Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    StringBuilder sb = new StringBuilder();

    foreach (string txtName in Directory.EnumerateFiles(mydocpath,"outputreport.txt")) 
    {
        using (StreamReader sr = new StreamReader(txtName))
        {
            sb.AppendLine(fileOut);
            sb.AppendLine("= = = = = =");
            sb.Append(sr.ReadToEnd());
            sb.AppendLine();
            sb.AppendLine();
        }

    }

    using (StreamWriter outfile = 
        new StreamWriter(mydocpath + @"\outputreport.txt"))
    {
        outfile.Write(sb.ToString());
    } 
```

# maven - maven -> ant -> jsmoothgen：如何提供 -Djava.awt.headless=true？

> ID：10993407
> 
> 赞同：1
> 
> 时间：2012-06-12T08:59:37.000
> 
> 标签：maven, ant, headless, jsmooth

我有一种情况，我们用 JSmooth 包装一个 jar 以获得合适的 exe 文件。

传统上它是由 ant 构建的，作为我们一般 mavenification 的一部分，当前的短期解决方案是使用 maven-antrun-plugin 设置属性并调用 ant。

不幸的是，这种方法在 Unix 上构建时失败了（因为没有可用的 X11 显示），解决方案是使用`-Djava.awt.headless=true`. 我想在我的 pom.xml 中执行此操作，但无法确定在哪里执行此操作。

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <phase>package</phase>
            <configuration>
                <target>
                    <!-- create one-jar and exefy it -->
                    <property name="maven.project.build.finalName" value="${project.build.finalName}" />
                    <!-- note: fails on headless Linux for now -->
                    <ant />
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

可以直接 fork 一个新的 JVM，但不要依赖于平台细节。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:20:04.837

据我所知，不分叉 JVM 的解决方案是使用 MAVEN_OPT

```
export MAVEN_OPTS="-Djava.awt.headless=true" 
```

由于 -D 是 JVM 选项，因此您必须直接将其指定为 maven。你不能（再一次，据我所知）将它作为内部参数传递（并且没有任何配置选项允许它）

因此，使用 MAVEN_OPT 参数成为正确的方法。

***编辑1：***

您可以使用 better-maven2-antrun-plugin 在这里浏览一下

[http://code.google.com/p/better-maven2-antrun-plugin/wiki/Usage](http://code.google.com/p/better-maven2-antrun-plugin/wiki/Usage)

***编辑 2：*** 可以帮助 maven-antrun developmentpement 为他们提供一种指定这些参数的方法，例如**maven-compiler-plugin**。如果您真的想使用 pom 信息，这将是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T00:51:44.230

ant 手册有一个标题为“[通过 Java 运行 Ant](http://ant.apache.org/manual/running.html#viajava) ”的部分，它展示了如何做你想做的事。下面转载了他们的示例的稍微调整的版本：

```
<java
        classname="org.apache.tools.ant.launch.Launcher"
        fork="true"
        failonerror="true"
        dir="${basedir}"
        taskname="headless-ant"
>
    <classpath>
        <pathelement location="${ant.home}/lib/ant-launcher.jar"/>
    </classpath>
    <arg value="-buildfile"/>
    <arg file="${ant.file}"/>
    <arg value="-Dbasedir=${basedir}"/>
    <jvmarg value="-Djava.awt.headless=true"/>
</java> 
```

如果您将该片段代替片段中的`<ant>`元素，它应该可以解决问题。

# extjs - 日历隐藏/显示不再适用于 Extensible 1.5 和 ExtJS 4.1

> ID：10993408
> 
> 赞同：1
> 
> 时间：2012-06-12T08:59:47.030
> 
> 标签：extjs, extjs4, extjs4.1

我已经使用 ExtJS 4.1 将现有的可扩展日历应用程序移植到可扩展 1.5。从那时起，当单击日历或使用上下文菜单仅显示所选日历时，无法再隐藏/显示日历。

经过广泛的研究，我在代码中找到了相关的地方和错误： `extensible-all-debug.js:4559 rec.set([CM.IsHidden.name], !isHidden);`. 它将向 中添加一个新属性`0: "IsHidden"`，`rec.data`这肯定是不正确的。当更改为`rec.set(CM.IsHidden.name, !isHidden);`它时，但我对破解可扩展代码毫无兴趣。

我发现'TestApp'-Extensible 示例使用ExtJS 4.0.7，一切正常。我`Extensible-config.js`通过将 extJsRoot 更改为“http://cdn.sencha.io/ext-4.1.0-gpl/”来更改为使用 ExtJS 4.1。
现在'TestApp'正在使用ExtJS 4.1并且也被破坏了（隐藏/显示不再起作用），所以肯定有一个错误，可能是可扩展的，但我认为它与ExtJS 4.1更相关，因为当我进入rec.set - 两个版本（4.0.7 和 4.1）的方法看起来差别很大，所以 ExtJS 4.1 可能破坏了 Extensible 所依赖的东西。

要重现错误：

1.  将“Extensible-config.js”中的 extJsRoot 更改为“http://cdn.sencha.io/ext-4.1.0-gpl/”
2.  在本地打开“TestApp”。
3.  在 `extensible-all-debug.js:4559` 处添加断点。
4.  显示/隐藏日历。
5.  断点命中，更进了一步。
6.  检查rec.data，应该有一个新属性`0：“IsHidden”`。
7.  继续脚本，日历不会被隐藏/显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:54:24.847

[我在http://ext.ensible.com/forum/viewtopic.php?f=3&t=570](http://ext.ensible.com/forum/viewtopic.php?f=3&t=570)的支持论坛上发布了解决此问题的方法

加布

# jquery - JQuery 验证忽略具有默认表单字段值的表单字段

> ID：10993410
> 
> 赞同：1
> 
> 时间：2012-06-12T08:59:52.427
> 
> 标签：jquery, jquery-validate

我们有一个使用**JQuery Validation Plugin**的表单，并希望**忽略任何未更改其默认值的表单字段值**。

例如，我们有一个信用卡更新表格，为了安全起见，只显示信用卡号的最后四个。它看起来像这样：

****** ****** 5629 **_****

 **每个用户的此默认值将不同，因为他们的最后四张信用卡将不同。

如果用户在他们的个人资料更新期间没有更改他们的默认信用卡值，我们希望绕过此表单字段上的验证路由，因为显然它不会验证为有效的信用卡号。

这是我们当前的验证片段：

```
card_number: {
  required: true,
  creditcard: true
}

messages: {
  card_number: {
    required: "Please enter a <strong>valid credit card number</strong>.",       
  } 
```

这是表单域：

```
<input type="text" name="card_number" id="card_number" title="Your credit card number." value="************ 5629" /> 
```

我们如何**忽略验证任何未更改默认值的表单字段值**？

谢谢。

================================================

**给安德鲁的新说明：**

我认为由于我们验证信用卡类型的方式，我们遇到了一些小故障。

这是完整的代码段以及您的初始修复：

```
card_number: {
  creditcardtypes: function() {
    // return an object with a property named the same as the pay method
    var result = new Object();
    var propertyName = $('select[name="pay_method"]').val().toLowerCase();
    var propertyValue = 1;
    eval("result."+propertyName+"='"+propertyValue+"'");
    return result;
  },
  ccnotdefault: true,
  required: true
}, 
```

我们如何才能适应信用卡类型规则？目前，验证失败，因为默认**信用卡值不是有效的信用卡类型**。

再次感谢安德鲁。

=================================================

**表格字段：**

```
 <!--- PAYMENT METHOD FIELD --->
      <tr>
        <td style="padding-top:15px; text-align:right; width:45%;"><label for="pay_method">&nbsp;Payment Method:
          <span class="orderlineredsm"><strong> * </strong></span></label></td>
        <td style="padding-top:15px; text-align:left; width:55%;" colspan="2" align="left" id="pmethod">
          <select name="pay_method" id="pay_method" class="highlightme required" style="width: 115px;" onchange="jQuery('#card_number').valid()" title="Your Payment Method.">
              <option value="Visa" <cfif form.pay_method EQ "Visa">selected="selected"</cfif>>Visa</option>
              <option value="Mastercard" <cfif form.pay_method EQ "Mastercard">selected="selected"</cfif>>Mastercard</option>
              <option value="Amex" <cfif form.pay_method EQ "Amex">selected="selected"</cfif>>Amex</option>
              <option value="Discover" <cfif form.pay_method EQ "Discover">selected="selected"</cfif>>Discover</option>
              <option value="Diners" <cfif form.pay_method EQ "Diners">selected="selected"</cfif>>Diners</option>
          </select>
        </td>
      </tr>
      <!--- END PAYMENT METHOD FIELD --->

      <!--- CARD NUMBER FIELD --->
      <tr>
        <td style="text-align:right; width:45%;"><label for="card_number">&nbsp;Credit Card Number:
          <span class="orderlineredsm"><strong> * </strong></span></label></td>
        <td style="text-align:left; width:55%;" colspan="2" align="left" id="cnumber">
          <input type="text" name="card_number" id="card_number" class="highlightme" style="width: 130px;" maxlength="19" title="Your credit card number." value="************<cfoutput>#form.card_number#</cfoutput>" onfocus="clearText(this)" onblur="clearText(this)" />
          &nbsp;<span class="create-tooltip" title="For your protection and security, only the <strong>last four digits of your credit card number</strong> are shown.<br /><br /><strong>NOTE:</strong> Only change if you are updating your credit card number."><img src="/public/images/help_25.png" style="margin-bottom:1px;" alt="help" width="25" height="25" /></span>
        </td>
      </tr>
      <!--- CARD NUMBER FIELD ---> 
```

==================================================== ========

**可能的修复**

```
card_number: {
  ccnotdefault: function(){ return $('#pay_method').val(); },
  required: true
},

jQuery.validator.addMethod("ccnotdefault", function(value, element, param) {
  // if the element is optional, don't validate 
  return this.optional(element) ||
  // or if the value is equal to the default value
  (value === element.defaultValue || 
  // or, finally, if the cc number is valid
  jQuery.validator.methods.creditcard2.call(this, value, element, param));
}, jQuery.validator.messages.creditcard);

http://www.ihwy.com/labs/downloads/jquery-validate-creditcard-2/jquery.validate.creditcard2-1.0.1.js 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:20:06.150

我会为此编写一个自定义规则，该规则调用默认信用卡规则，但也会考虑该字段的默认值：

```
$.validator.addMethod("ccnotdefault", function(value, element) {
    // if the element is optional, don't validate 
    return this.optional(element) ||
       // or if the value is equal to the default value
       (value === element.defaultValue || 
       // or, finally, if the cc number is valid
       $.validator.methods.creditcard.call(this, value, element));
}, $.validator.messages.creditcard);

$(document).ready(function() {
    $("#myform").validate({
        rules: {
            card_number: {
                ccnotdefault: true,
                required: true
            }
        }
    });
}); 
```

**示例：http:** [//jsbin.com/ejonid/2/](http://jsbin.com/ejonid/2/)**

# sql - Freeradius sql_counter：共享账户

> ID：10993415
> 
> 赞同：2
> 
> 时间：2012-06-12T09:00:20.377
> 
> 标签：sql, counter, session-timeout, freeradius

我正在使用 freeradius sqlcounter 模块。我将帐户的 Max-All-Session 设置为 180 秒，因此用户将在超时时注销。当有两个用户使用这个帐户时，如果两个用户的访问时间之和达到180秒，我希望他们退出。但是，他们两个还有180秒。我尝试了以下配置，`query`将返回帐户的总访问时间。`IFZERO(a,b)`函数 return `a`if `a == 0`else `b`return 。但它没有用。我还想知道，既然origin`query`总是在设置`0`之前返回`acctsessiontime`，那么这个模块怎么知道超时发生了？

```
#/etc/freeradius/sql/mysql/counter.conf
sqlcounter noresetcounter {
    counter-name = Max-All-Session-Time 
            check-name = Max-All-Session 
            sqlmod-inst = sql 
            key = User-Name 
            reset = never 
    #query = "SELECT IFNULL(SUM(AcctSessionTime),0) FROM radacct WHERE UserName='%{%k}'" <= origin one
    query = "SELECT IFZERO(SUM(IFZERO(AcctSessionTime, NOW() - acctstarttime)),0) FROM radacct WHERE UserName='%{%k}'" 
} 
```

# forms - 来自 2 个不同数据库的 symfony2 标签和字段

> ID：10993416
> 
> 赞同：2
> 
> 时间：2012-06-12T09:00:29.350
> 
> 标签：forms, symfony, entity

**更新：**我只是准确地说我是 Symfony2 的新手，并且通常使用框架。我想澄清我的问题：我希望有一个包含许多字段的大表单，并且每个字段的标签来自第二个数据库。在没有框架的情况下使用纯 PHP 需要 30 分钟，但是我如何使用 Sf2 来做到这一点？

我在以一种形式多次显示同一实体时遇到问题。
这是上下文：
我有一个有多个停车位的停车场。为了最好地管理停车场，决定对每个要占用的停车位给予优先顺序。
停车场经理可以随时更改优先级，但必须有历史记录。
停车位已被宣布，经理无法对其进行编辑。
为此，我创建了实体：ParkingPlaces 和 Historical。历史悠久的多对一停车位。
我希望对于每个停车位标签，有一个字段可以在一个表格中输入占用优先级。
实体声明如下：

```
class Historical
{
  /**
   * @ORM\Column(name="date", type="datetime")
   */
  private date;
  /**
   * @ORM\ManyToOne(targetEntity="ParkingPlace")
   * @ORM\JoinColumn(name="parkingplace_id", referencedColumnName="id")
   */
  private parkingPlace;
  /**
   * @ORM\Column(name="priority", type="integer")
   */
  private priority;
}

class ParkingPlace
{
  /**
   * @ORM\Column(name="name", type="string", lenght=255)
   */
  private name;
  /**
   * @ORM\OneToMany(targetEntity="Historical", mappedBy="parkingPlace")
   */
  private historical;
} 
```

这就是我希望的渲染：

```
<form>
  <fieldset>
    <legend>Parking A1</legend>
    <input name="priority" type="number" />
  </fieldset>
  <fieldset>
    <legend>Parking A2</legend>
    <input name="priority" type="number" />
  </fieldset>
  <fieldset>
    <legend>Parking A3</legend>
    <input name="priority" type="number" />
  </fieldset>
  <fieldset>
    <legend>Parking A4</legend>
    <input name="priority" type="number" />
  </fieldset>
  ...
</form> 
```

我已经花了很多时间，但我没有任何解决方案。我在 Stack 上尝试了很多解决方案，但没有一个能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:57:43.497

我设法回答了这个问题。我更改了数据库架构并在表单中使用了“集合”字段。

我把整个代码留在这里。我希望它会帮助其他人。

**历史实体**

```
//src/Xxx/YyyBundle/Entity/History.php
namespace Xxx\YyyBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * Xxx\YyyBundle\Entity\History
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Xxx\YyyBundle\Entity\HistoryRepository")
 * @UniqueEntity(
 *      fields="name",
 *      message="Il existe déjà une table ayant ce nom."
 * )
 */
class History
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255, unique=true)
     * @Assert\NotBlank(message="Le nom de la table a été oublié")
     */
    private $name;

    /**
     * @var datetime $date
     *
     * @ORM\Column(name="date", type="datetime")
     */
    private $date;

    /**
     * @var Xxx\ZzzBundle\Entity\User $agent
     *
     * @ORM\ManyToOne(targetEntity="Ratp\AgentBundle\Entity\User")
     * @ORM\JoinColumn(name="agent_id", referencedColumnName="id")
     */
    private $agent;

    /**
     * @var Xxx\YyyBundle\Entity\ParkingPlacePriority $agent
     *
     * @ORM\OneToMany(targetEntity="ParkingPlacePriority", mappedBy="history", cascade={"persist"})
     * @Assert\Valid(traverse=true)
     */
    private $parkingPlacesPriorities;

    /**
     * Constructeur
     *
     * @return string 
     */
    public function __construct()
    {
        $this->parkingPlacesPriorities = new ArrayCollection();
    }

    /**
     * Get History's name
     *
     * @return string 
     */
    public function __toString()
    {
        return $this->name;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set date
     *
     * @param datetime $date
     */
    public function setDate($date)
    {
        $this->date = $date;
    }

    /**
     * Get date
     *
     * @return datetime 
     */
    public function getDate()
    {
        return $this->date;
    }

    /**
     * Set agent
     *
     * @param Xxx\ZzzBundle\Entity\User $agent
     */
    public function setAgent(\Xxx\ZzzBundle\Entity\User $agent)
    {
        $this->agent = $agent;
    }

    /**
     * Get agent
     *
     * @return Xxx\ZzzBundle\Entity\User 
     */
    public function getAgent()
    {
        return $this->agent;
    }

    /**
     * Set parkingPlacesPriorities
     *
     * @param Xxx\YyyBundle\Entity\ParkingPlacePriority $agent
     */
    public function setParkingPlacesPriorities(ArrayCollection $parkingPlacesPriorities)
    {
        $this->parkingPlacesPriorities = $parkingPlacesPriorities;

        foreach($parkingPlacesPriorities as $parkingPlacePriority)
        {
            $parkingPlacePriority->setHistory($this);
        }
    }

    /**
     * Get parkingPlacesPriorities
     *
     * @return Xxx\YyyBundle\Entity\ParkingPlacePriority 
     */
    public function addParkingPlacesPriorities(\Xxx\YyyBundle\Entity\ParkingPlacePriority $parkingPlacesPriorities)
    {
        return $this->parkingPlacesPriorities[] = $parkingPlacesPriorities;

        foreach($parkingPlacesPriorities as $parkingPlacePriority)
        {
            $parkingPlacePriority->setHistory($this);
        }
    }

    /**
     * Get parkingPlacesPriorities
     *
     * @return Xxx\YyyBundle\Entity\ParkingPlacePriority 
     */
    public function getParkingPlacesPriorities()
    {
        return $this->parkingPlacesPriorities;
    }
} 
```

**停车位实体**

```
//src/Xxx/YyyBundle/Entity/ParkingPlace.php
namespace Xxx\YyyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Xxx\YyyBundle\Entity\ParkingPlace
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Xxx\YyyBundle\Entity\ParkingPlaceRepository")
 */
class ParkingPlace
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var integer $orderSequence
     *
     * @ORM\Column(name="orderSequence", type="integer")
     * @Assert\Min(
     *      limit="1",
     *      message="L'ordre d'affichage ne peux être inférieure à 1",
     *      invalidMessage="L'ordre d'affichage doit être un chiffre"
     * )
     */
    private $orderSequence;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     * @Assert\MinLength(
     *      limit=1,
     *      message="Le nom SAET doit comporter au minimum 1 caractère"
     * )
     * @Assert\MaxLength(
     *      limit=255,
     *      message="Le nom SAET doit comporter au maximum 255 caractères"
     * )
     * @Assert\Regex(
     *      pattern="/^[a-z0-9-]+$/i",
     *      message="Le nom d'exploitation contient des caractères invalides (seul les caractères alphanumériques et le tiret '-' sont acceptés)"
     * )
     */
    private $name;

    /**
     * @var string $saetName
     *
     * @ORM\Column(name="saetName", type="string", length=255, unique=true)
     * @Assert\MinLength(
     *      limit=5,
     *      message="Le nom SAET doit comporter au minimum 5 caractères"
     * )
     * @Assert\MaxLength(
     *      limit=255,
     *      message="Le nom SAET doit comporter au maximum 255 caractères"
     * )
     * @Assert\Regex(
     *      pattern="/^prk_/i",
     *      message="Le nom SAET ne commence pas par 'PRK_'"
     * )
     * @Assert\Regex(
     *      pattern="/^[a-z0-9_]+$/i",
     *      message="Le nom SAET  contient des caractères invalides (seul les caractères alphanumériques et le trait de soulignemet '_' sont acceptés)"
     * )
     */
    private $saetName;

    /**
     * @var string $rail
     *
     * @ORM\Column(name="rail", type="string", length=5)
     * @Assert\NotBlank()
     * @Assert\MinLength(
     *      limit=1,
     *      message="Le nom SAET doit comporter au minimum 1 caractères"
     * )
     * @Assert\MaxLength(
     *      limit=5,
     *      message="Le nom SAET doit comporter au maximum 5 caractères"
     * )
     */
    private $rail;

    /**
     * @var Xxx\YyyBundle\Entity\ParkingZone $parkingZone
     *
     * @ORM\ManyToOne(targetEntity="ParkingZone")
     * @ORM\JoinColumn(name="parkingzone_id", referencedColumnName="id")
     */
    private $parkingZone;

    /**
     * Get ParkingPlace's name
     *
     * @return string 
     */
    public function __toString()
    {
        return $this->name;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set orderSequence
     *
     * @param integer $orderSequence
     */
    public function setOrderSequence($orderSequence)
    {
        $this->orderSequence = $orderSequence;
    }

    /**
     * Get orderSequence
     *
     * @return integer 
     */
    public function getOrderSequence()
    {
        return $this->orderSequence;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = strtoupper($name);
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set saetName
     *
     * @param string $saetName
     */
    public function setSaetName($saetName)
    {
        $this->saetName = strtoupper($saetName);
    }

    /**
     * Get saetName
     *
     * @return string 
     */
    public function getSaetName()
    {
        return $this->saetName;
    }

    /**
     * Set rail
     *
     * @param string $rail
     */
    public function setRail($rail)
    {
        $this->rail = strtoupper($rail);
    }

    /**
     * Get rail
     *
     * @return string 
     */
    public function getRail()
    {
        return $this->rail;
    }

    /**
     * Set parkingZone
     *
     * @param Xxx\YyyBundle\Entity\ParkingZone $parkingZone
     */
    public function setParkingZone(\Xxx\YyyBundle\Entity\ParkingZone $parkingZone)
    {
        $this->parkingZone = $parkingZone;
    }

    /**
     * Get parkingZone
     *
     * @return Xxx\YyyBundle\Entity\ParkingZone 
     */
    public function getParkingZone()
    {
        return $this->parkingZone;
    }
} 
```

**ParkingPlacePriority 实体**

```
//src/Xxx/YyyBundle/Entity/ParkingPlacePriority.php
namespace Xxx\YyyBundle\Entity;

use Xxx\YyyBundle\RatpGarageL1Bundle;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\ORM\Mapping as ORM;

/**
 * Xxx\YyyBundle\Entity\ParkingPlacePriority
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Xxx\YyyBundle\Entity\ParkingPlacePriorityRepository")
 */
class ParkingPlacePriority
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var Xxx\YyyBundle\Entity\ParkingPlace $parkingPlace
     *
     * @ORM\ManyToOne(targetEntity="ParkingPlace")
     * @ORM\JoinColumn(name="parkingplace_id", referencedColumnName="id")
     */
    private $parkingPlace;

    /**
     * @var Xxx\YyyBundle\Entity\History $history
     *
     * @ORM\ManyToOne(targetEntity="History", cascade={"persist"})
     * @ORM\JoinColumn(name="history_id", referencedColumnName="id")
     */
    private $history;

    /**
     * @var integer $priorityIn
     *
     * @ORM\Column(name="priorityIn", type="integer")
     * @Assert\NotBlank(message="La priorité de garage n'as pas été donné")
     * @Assert\Min(
     *      limit="1",
     *      message="La priorité de garage ne peux être inférieure à 1",
     *      invalidMessage="La priorité doit être un chiffre"
     * )
     */
    private $priorityIn;

    /**
     * @var integer $priorityOut
     *
     * @ORM\Column(name="priorityOut", type="integer")
     * @Assert\NotBlank(message="La priorité de dégarage n'as pas été donné")
     * @Assert\Min(
     *      limit="1",
     *      message="La priorité de dégarage ne peux être inférieure à 1",
     *      invalidMessage="La priorité doit être un chiffre"
     * )
     */
    private $priorityOut;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set priorityIn
     *
     * @param integer $priorityIn
     */
    public function setPriorityIn($priorityIn)
    {
        $this->priorityIn = $priorityIn;
    }

    /**
     * Get priorityIn
     *
     * @return integer 
     */
    public function getPriorityIn()
    {
        return $this->priorityIn;
    }

    /**
     * Set priorityOut
     *
     * @param integer $priorityOut
     */
    public function setPriorityOut($priorityOut)
    {
        $this->priorityOut = $priorityOut;
    }

    /**
     * Get priorityOut
     *
     * @return integer 
     */
    public function getPriorityOut()
    {
        return $this->priorityOut;
    }

    /**
     * Set parkingPlace
     *
     * @param Xxx\YyyBundle\Entity\ParkingPlace $parkingPlace
     */
    public function setParkingPlace(\Xxx\YyyBundle\Entity\ParkingPlace $parkingPlace)
    {
        $this->parkingPlace = $parkingPlace;
    }

    /**
     * Get parkingPlace
     *
     * @return Xxx\YyyBundle\Entity\ParkingPlace 
     */
    public function getParkingPlace()
    {
        return $this->parkingPlace;
    }

    /**
     * Set history
     *
     * @param Xxx\YyyBundle\Entity\History $history
     */
    public function setHistory(\Xxx\YyyBundle\Entity\History $history)
    {
        $this->history = $history;
    }

    /**
     * Get history
     *
     * @return Xxx\YyyBundle\Entity\History 
     */
    public function getHistory()
    {
        return $this->history;
    }
} 
```

**历史控制器**

```
//src/Xxx/YyyBundle/Controller/HistoryController.php
namespace Xxx\YyyBundle\Controller;

use Xxx\YyyBundle\Entity\ParkingPlacePriority;
use Xxx\YyyBundle\Entity\ParkingPlace;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Xxx\YyyBundle\Entity\History;
use Xxx\YyyBundle\Form\HistoryType;

/**
 * History controller.
 *
 * @Route("")
 */
class HistoryController extends Controller
{
    /**
     * Lists all History entities.
     *
     * @Route("/", name="history")
     * @Template()
     */
    public function indexAction()
    {
        $em = $this->getDoctrine()->getEntityManager();

        $entities = $em->getRepository('XxxYyyBundle:History')->findAll();

        return array('entities' => $entities);
    }

    /**
     * Displays a form to create a new History entity.
     *
     * @Route("/new", name="history_new")
     * @Template()
     */
    public function newAction()
    {
        $em = $this->getDoctrine()->getEntityManager();
        $entities = $em->getRepository('XxxYyyBundle:ParkingPlace')->findAllOrdered();
        $parkingZones = $em->getRepository('XxxYyyBundle:ParkingZone')->findAllOrdered();

        $history = new History();
        foreach ($entities as $entity)
        {
            $parkingPlacePriority = new ParkingPlacePriority();
            $parkingPlacePriority->setParkingPlace($entity);
            $history->addParkingPlacesPriorities($parkingPlacePriority);
        }
        $form   = $this->createForm(new HistoryType(), $history);

        return array(
            'entity' => $history,
            'parkingPlaces' => $entities,
            'parkingZones' => $parkingZones,
            'form'   => $form->createView()
        );
    }

    /**
     * Creates a new History entity.
     *
     * @Route("/create", name="history_create")
     * @Method("post")
     * @Template("XxxYyyBundle:History:new.html.twig")
     */
    public function createAction()
    {
        $em = $this->getDoctrine()->getEntityManager();
        $entities = $em->getRepository('XxxYyyBundle:ParkingPlace')->findAllOrdered();
        $parkingZones = $em->getRepository('XxxYyyBundle:ParkingZone')->findAllOrdered();

        $history  = new History();
        foreach ($entities as $entity)
        {
            $parkingPlacePriority = new ParkingPlacePriority();
            $parkingPlacePriority->setParkingPlace($entity);
            $history->addParkingPlacesPriorities($parkingPlacePriority);
        }
        $history->setDate(new \DateTime());
        $history->setAgent($this->container->get('security.context')->getToken()->getUser());

        $request = $this->getRequest();
        $form   = $this->createForm(new HistoryType(), $history);
        $form->bindRequest($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($history);
            $em->flush();

            return $this->redirect($this->generateUrl('parkingplacepriority_export', array('id' => $history->getId())));

        }

        return array(
            'entity' => $history,
            'parkingPlaces' => $entities,
            'parkingZones' => $parkingZones,
            'form'   => $form->createView()
        );
    }

    /**
     * Displays a form to edit an existing History entity.
     *
     * @Route("/{id}/edit", name="history_edit")
     * @Template("XxxYyyBundle:History:new.html.twig")
     */
    public function editAction($id)
    {
        $em = $this->getDoctrine()->getEntityManager();
        $parkingPlaces = $em->getRepository('XxxYyyBundle:ParkingPlace')->findAllOrdered();
        $parkingZones = $em->getRepository('XxxYyyBundle:ParkingZone')->findAllOrdered();

        $entity = $em->getRepository('XxxYyyBundle:History')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find History entity.');
        }

        $entity->setName('');
        $editForm = $this->createForm(new HistoryType(), $entity);

        return array(
            'entity'      => $entity,
            'parkingPlaces' => $parkingPlaces,
            'parkingZones' => $parkingZones,
            'form'        => $editForm->createView(),
        );
    }

    /**
     * Edits an existing History entity.
     *
     * @Route("/{id}/update", name="history_update")
     * @Method("post")
     * @Template("XxxYyyBundle:History:new.html.twig")
     */
    public function updateAction($id)
    {
        $em = $this->getDoctrine()->getEntityManager();

        $entity = $em->getRepository('XxxYyyBundle:History')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find History entity.');
        }

        $editForm   = $this->createForm(new HistoryType(), $entity);
        $deleteForm = $this->createDeleteForm($id);

        $request = $this->getRequest();

        $editForm->bindRequest($request);

        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('parkingplacepriority_export', array('id' => $id)));
        }

        return array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
        );
    }
} 
```

**历史表格类型**

```
//src/Xxx/YyyBundle/Form/HistoryType.php
namespace Xxx\YyyBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class HistoryType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name', 'text', array(
                    'max_length' => 255,
                    'trim' => true,
                    )
                )
            ->add('parkingPlacesPriorities', 'collection', array(
                    'type' => new ParkingPlacePriorityType(),
                    'by_reference' => false,
                    )
                )
        ;
    }

    public function getName()
    {
        return 'xxx_yyybundle_historytype';
    }
} 
```

**ParkingPlacePriority FormType**

```
//src/Xxx/YyyBundle/Form/ParkingPlacePriorityType.php
namespace Xxx\YyyBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ParkingPlacePriorityType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('priorityIn', 'number', array(
                    'precision' => 0,
                    )
                )
            ->add('priorityOut', 'number', array(
                    'precision' => 0,
                    )
                )
            ->add('parkingPlace', 'entity', array(
                    'class' => 'RatpGarageL1Bundle:ParkingPlace',
                    'read_only' => true,
                    )
                )
        ;
    }

    public function getName()
    {
        return 'xxx_yyybundle_parkingplaceprioritytype';
    }
} 
```

**历史新实体表单模板**

```
// src/Xxx/YyyBundle/Resources/views/History/new.html.twig
{% extends '::base.html.twig' %}

{% block title %}
    {{ parent() }} | Historique | Nouvelle table
{%  endblock %}

{% block zoneMenu %}
    <li class="">
        <a href="" id="save">Enregistrer</a>
    </li>
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Zone de garage
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
        {% for parkingZone in parkingZones %}
            <li class="">
                <a href="#{{ parkingZone.id }}">{{ parkingZone.name }}</a>
            </li>
        {% endfor %}
        </ul>
    </li>
{% endblock %}

{% block content %}

<h1>Nouvelle table de garage/dégarage</h1>

<form action="{{ path('history_create') }}" method="post" {{ form_enctype(form) }} class="form-horizontal">
    <div class="row-fluid">
    <div class="control-group offset7 {% if form_errors(form.name) | length > 0 %}error{% endif %}">
        {{ form_label(form.name, 'Nom de la table', { 'attr': {'class': 'control-label'} } ) }}
        <div class="controls error">
            {{ form_widget(form.name, { 'attr': {'class': ''} } ) }}
            <span class="help-inline">{{ form_errors(form.name) }}</span>
        </div>
    </div>
    </div>
    {% set voie = '0' %}
    {% set zone = '0' %}
    {% set i = 0 %}
    {% for pkPl in form.parkingPlacesPriorities %}
        {% if voie != parkingPlaces[i].rail %}
            {% if voie != '0' %}
        </fieldset>
            {% endif %}
            {% if zone != parkingPlaces[i].parkingZone %}
                {% if zone != '0' %}
    </div>
                {% endif %}
    <div id="{{ parkingPlaces[i].parkingZone.id }}" class="zone row-fluid">
        <h3 class="">{{ parkingPlaces[i].parkingZone.name }}</h3>
        <div class="synoptique">
            <span>{{ asset('bundles/xxxyyy/images/' ~ parkingPlaces[i].parkingZone.image) }}</span>
        </div>
            {% endif %}
            {% set zone = parkingPlaces[i].parkingZone %}
        <fieldset class="voie">
            {% set voie = parkingPlaces[i].rail %}
            <legend class=""><strong>Voie {{ parkingPlaces[i].rail }}</strong></legend>
        {% endif %}
            <fieldset name="{{ parkingPlaces[i].name }}" class="place_garage span5">
                <legend>{{ parkingPlaces[i].name }}</legend>
                <div class="control-group  {% if form_errors(pkPl.priorityIn) | length > 0 %}error{% endif %}">
                    {{ form_label(pkPl.priorityIn, 'Garage', { 'attr': {'class': 'control-label'} } ) }}
                    <div class="controls error">
                        {{ form_widget(pkPl.priorityIn, { 'attr': {'class': 'garage'} } ) }}
                        <span class="help-inline">{{ form_errors(pkPl.priorityIn) }}</span>
                    </div>
                </div>
                <div class="control-group  {% if form_errors(pkPl.priorityOut) | length > 0 %}error{% endif %}">
                    {{ form_label(pkPl.priorityOut, 'Dégarage', { 'attr': {'class': 'control-label'} } ) }}
                    <div class="controls">
                        {{ form_widget(pkPl.priorityOut, { 'attr': {'class': 'degarage'} } ) }}
                        <span class="help-inline">{{ form_errors(pkPl.priorityOut) }}</span>
                    </div>
                </div>
                <div class="control-group">
                    {{ form_label(pkPl.parkingPlace, 'Place de garage', { 'attr': {'class': 'control-label'} } ) }}
                    <div class="controls error">
                        {{ form_widget(pkPl.parkingPlace, { 'attr': {'class': ''} } ) }}
                        <span class="help-inline">{{ form_errors(pkPl.parkingPlace) }}</span>
                    </div>
                </div>
            </fieldset>
        {% set i = i + 1 %}
    {% endfor %}
        </fieldset>
    </div>
    {{ form_rest(form) }}
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Enregistrer</button>
        <a href="{{ path('history') }}" class="btn">Annuler</a>
    </div>
</form>

{% endblock %}

{% block javascript %}
        <script src="{{ asset('bundles/xxxyyy/js/script.js') }}"></script>
{% endblock %} 
```

# java - java中的Package.getPackage返回null

> ID：10993418
> 
> 赞同：19
> 
> 时间：2012-06-12T09:00:37.853
> 
> 标签：java, reflection, packages

我在 com.abc 包中有一些 A、B、C 类

我在包 com.pqr 中有一个主类

现在我想创建一个之前的 pacakge (abc) 的包对象。

为此，我尝试过，

```
Package pkg = Package.getPackage("com.abc");   // This gives me null object in pkg 
```

但当我这样做时，

```
Package pkg = A.class.getPackage();    // It works fine 
```

任何人都可以通知，为什么 Package.getPackage("package-name") 不起作用？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T09:13:35.470

如果当前 ClassLoader 已经知道包，则 Package.getPackage 只会返回非空值。尝试这个：

```
Package pkg = Package.getPackage("com.abc");
System.out.println(pkg);
Class<A> a = A.class;
pkg = Package.getPackage("com.abc");
System.out.println(pkg); 
```

第一个 System.out 将打印“null”，第二个将打印包名，因为 ClassLoader 然后从其中加载了一个类。

# java - 在jsp中打印会话属性

> ID：10993429
> 
> 赞同：23
> 
> 时间：2012-06-12T09:01:17.520
> 
> 标签：java, spring, jsp, servlets

我的 webapp 已经准备好了，但我只想添加一个以用户名作为标题的小下拉菜单。这是我的jsp代码：

```
 <i class="icon-user"></i> 
                <%
                    session.getAttribute("name");
                %>
                <span class="caret"></span> 
```

它说

会话无法解决

```
9:              <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
10:                     <i class="icon-user"></i> 
11:                     <%
12:                         session.getAttribute("name");
13:                     %>
14:                     <span class="caret"></span>
15:                 </a> 
```

有一个会话，因为我已登录。

亲切的问候，

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-12T09:05:29.000

您可以使用 JSP 中首选的 EL。

```
<c:out value="${sessionScope.name}"/> 
```

或者，如果该`name`值是 HTML 安全的，您可以使用

```
${sessionScope.name} 
```

确保 JSP 是允许访问会话。

```
<%@ page session="true" %> 
```

要使用核心 JSTL，请确保包含以下代码。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T09:28:56.163

您可以尝试另一种选择：

```
<% request.getSession().getAttribute("name") %> 
```

没有得到解决的原因`session`是你必须`session="false"`在你的页面指令中设置。

[阅读此内容以供进一步参考](http://www.coderanch.com/t/560090/JSP/java/unable-access-implicit-object-session)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:11:18.420

我同意@Pau Kiat Wee 的回答。但是您也可以在模型映射中从控制器中设置此用户名，然后在 EL 中简单地使用它。那也将是一个不错的选择。希望这对您有所帮助。干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-01T16:09:35.007

在您的 servlet 中：

```
 1) get your parameter:

    String param = request.getParameter("param");

 2) send it to the request object as an attribute:

    request.setAttribute("param", param); 
```

在您的 JSP 中：

```
 use JSTL, and EL to return the attribute you sent from your servlet:

   <input type="text" name="param" value="<c:out value="${param}" />" /> 
```

你去吧。

# ios - 尝试从 iOS 应用程序在 Facebook 上发布分数时的未知方法

> ID：10993433
> 
> 赞同：1
> 
> 时间：2012-06-12T09:01:31.483
> 
> 标签：ios, facebook, facebook-graph-api, ios5

我正在使用以下内容发布针对 facebook 分数 API 的分数

```
- (IBAction)postScoreClicked:(id)sender 
{
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSMutableDictionary * dict = [[NSMutableDictionary alloc]init];
    [dict setObject:@"1" forKey:@"score"];
    [[delegate facebook] requestWithMethodName:@"/563645402/scores" andParams:dict andHttpMethod:@"POST" andDelegate:self];
    NSLog(@"Posting a new score...");
} 
```

但是，覆盖`request didFailWithError`I 可以清楚地看到正在记录以下错误：

```
Error Domain=facebookErrDomain Code=3 "The operation couldn’t be completed. (facebookErrDomain error 3.)" UserInfo=0x68982d0 {request_args=(
        {
        key = method;
        value = "/563645402/scores";
    },
        {
        key = sdk;
        value = ios;
    },
        {
        key = score;
        value = 1;
    },
        {
        key = "sdk_version";
        value = 2;
    },
        {
        key = format;
        value = json;
    },
        {
        key = "access_token";
        value = VALUE-REMOVED-FROM-POST;
    }
), error_msg=Unknown method, error_code=3} 
```

根据[API 文档](https://developers.facebook.com/docs/score/)：

> 只要您拥有 publish_actions 权限，您就可以通过使用应用程序 access_token 向 /USER_ID/scores 发出 HTTP POST 请求来发布分数或用户

在我的登录控制器中，我设置了`publish_actions`这样的权限：

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                                    @"user_games_activity", 
                                    @"friends_games_activity",
                                    @"publish_actions",
                                    nil];
            [[myDelegate facebook] authorize:permissions]; 
```

不太确定我在这里缺少什么，有什么想法吗？

在 facebook 应用控制中心，我的应用注册为原生/桌面，并归类为游戏

# php - JSON 将数据传递给 php 以进行检索

> ID：10993437
> 
> 赞同：0
> 
> 时间：2012-06-12T09:01:40.763
> 
> 标签：php, jquery, json

```
(
[addF] => stdClass Object
    (
        [0] => stdClass Object
            (
                [productID] => 33
                [fQty] => 11
                [fPW] => 11
                [fP] => 
                [fH] => PVC
                [fB] => SideBelt
                [fP] => Single Pleat
                [fPanelT] => stdClass Object
                    (
                    )

            )

    )

[addWP] => stdClass Object
    (
    )

[addRBC] => stdClass Object
    (
    )

[addRB] => stdClass Object
    (
    )

[addT] => stdClass Object
    (
    )

)
{"ErrorMessage":true} 
```

上面的输出基于下面的代码。$arrOutput["ErrorMessage"]=print_r($objData); 我已经使用 json 将数组传递给 PHP，但我无法获取数据。

我尝试设置数据，但我没有任何价值。

```
$ProductID=isset($objData->allData->addF[0]->productID) ? $objData->allData->addF[0]->productID : "123"; 
```

我试图 print_r 将返回 true 打印将输出 1

```
$objData->allData 
```

它输出 1

```
$objData->addF 
```

也输出 1

我不明白解码后无法设置值。

```
$objData=json_decode(stripslashes($Data)); 
```

jQuery部分

```
allData.addF=addF;
    allData.addWP=addWP;
    allData.addRBC=addRBC;
    allData.addRB=addRB;
    allData.addT=addT;
    //convert the data to json
    var dataString = $.toJSON(allData);
    $.post('test.php',"Data="+escape(dataString),function(data)
    {
        var obj=$.parseJSON(data);
        alert(obj.ErrorMessage);
    }); 
```

我需要帮助才能从中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:28:14.403

$ProductID=isset($objData->allData->addF->{"0"}->productID)

# c# - C#中的单色位图到二进制数组

> ID：10993441
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:01:54.960
> 
> 标签：c#, .net, winforms, image-processing, bitmap

> **可能重复：**
> [将图像转换为单色字节数组](https://stackoverflow.com/questions/2593768/convert-a-image-to-a-monochrome-byte-array)

我有一个单色位图图像。我像这样加载图像：

```
Image image = Image.FromFile("myMonoChromeImage.bmp"); 
```

如何获得二进制数组，其中 1 代表白色像素，0 代表黑色像素，反之亦然？（数组中的第一位是左上角的像素，数组中的最后一位是右下角的像素）

如果可能的话，将不胜感激一种有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:40:44.217

您可以使用 LockBits 访问位图数据并直接从位图数组复制值。GetPixel 基本上每次都会锁定和解锁位图，因此效率不高。

您可以将数据提取到字节数组，然后检查 RGBA 值以查看它们是白色 (255,255,255,255) 还是黑色 (0,0,0,255)

[BitmapData](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Drawing.Imaging.BitmapData%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)类示例显示了如何执行此操作。在您的情况下，代码将是这样的：

```
 Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
        BitmapData bmpData = bmp.LockBits(rect, ImageLockMode.ReadOnly, bmp.PixelFormat);

        // Get the address of the first line.
        IntPtr ptr = bmpData.Scan0;

        // Declare an array to hold the bytes of the bitmap.
        int bytes  = Math.Abs(bmpData.Stride) * bmp.Height;
        byte[] rgbValues = new byte[bytes];

        // Copy the RGB values into the array.
        System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes);

        // Unlock the bits.
        bmp.UnlockBits(bmpData); 
```

# ajax - 与 url 相关的 Codeigniter 方法 ajax 问题

> ID：10993443
> 
> 赞同：0
> 
> 时间：2012-06-12T09:02:07.160
> 
> 标签：ajax, codeigniter, url, methods

我有一个控制器，其中有一个名为 index 的方法。在这种方法中，我从数据库中检索数据并使用分页库设置变量来查看分页。当我添加一条新记录时，我正在使用 ajax 访问另一个函数。插入后我打电话

```
$this->index(); 
```

现在在索引中我正在检查一个条件

```
if($this->input->is_ajax_request()){
    //dont load header and footer
} 
```

但问题是，当我从我的保存函数中获取索引时，它会丢失 ajax 请求，并且我在索引函数中的条件未选中，并且始终加载页眉和页脚。即使我从一种 codeigniter 方法跳转到另一种方法，我希望 ajax 请求仍然可用？有什么建议吗？或者改原生。因为我不想创建另一个函数来再次创建分页并省略页眉和页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:25:57.243

可能有用的是[CodeIgniter 的会话类，它有一个 flashdata 方法](http://codeigniter.com/user_guide/libraries/sessions.html)。Flashdata 是一些会话数据，只为下一个服务器请求存储，然后将其删除。

在你的保存功能中，你可以在最后得到这个：

```
$this->session->set_flashdata('ajax', true); 
```

作为索引函数中条件的一部分，您可以拥有：

```
if($this->input->is_ajax_request() || $this->session->flashdata('item')){
    //dont load header and footer
} 
```

然后，这将检查该请求实际上是一个 ajax 请求，或者一个会话变量已被临时设置以告诉 CodeIgniter 它应该被视为一个 ajax 请求。

# c# - 它是错误系列的 Teechart 中的错误吗？

> ID：10993445
> 
> 赞同：0
> 
> 时间：2012-06-12T09:02:20.593
> 
> 标签：c#, .net, teechart

如果在错误系列的情况下标准错误为负，那么如何获得错误系列的上限和下限。在其他情况下 y+std error 和 y - std error 给出正确答案![在此处输入图像描述](../Images/dfbb854cdf1c330fe7206d1d5f276f27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:19:43.720

如果你想计算 Error Series 的 Upper 或 Lower，我建议你使用两个 Series One BarError Series 和其他 Error Series，所以 Error 和 ErrorBar Series 只有 ErrorValue，在下一个代码示例中使用：

```
 private void InitializeChart()
    {

       tChart1.Aspect.View3D = false;
        double[] GraphData_Mean = new double[3];
        GraphData_Mean[0] = 3;
        GraphData_Mean[1] = 11;
        GraphData_Mean[2] = 34;

        double[] GraphData_Max = new double[3];
        GraphData_Max[0] = 5;
        GraphData_Max[1] = 15;
        GraphData_Max[2] = 23;

        double[] GraphData_Min= new double[3];
        GraphData_Min[0] = 1;
        GraphData_Min[1] = 8;
        GraphData_Min[2] = 17;

        tChart1.Series.Clear();
        for (int i = 0; i < 3; i++)
        {
            Steema.TeeChart.Styles.ErrorBar errorBar = new Steema.TeeChart.Styles.ErrorBar(tChart1.Chart);
            Steema.TeeChart.Styles.Error error1 = new Steema.TeeChart.Styles.Error(tChart1.Chart);
            // Error Bar Series
            errorBar.Pen.Color = Color.Black;
            errorBar.ErrorPen.Width = 2;
            errorBar.Brush.Solid = true;
            errorBar.Brush.Color = Color.White;
            errorBar.Marks.Visible = false;
            errorBar.ErrorStyle = ErrorStyles.Top;
            errorBar.HorizAxis = HorizontalAxis.Bottom;
            errorBar.MultiBar = MultiBars.None;
            errorBar.Add(i, GraphData_Mean[i], (GraphData_Max[i] - GraphData_Mean[i]));
            errorBar.BarWidthPercent = 40;
            //  Error Series 
            error1.ErrorPen.Width = 2;
            error1.Brush.Solid = true;
            error1.Color = Color.Black;
            error1.Marks.Visible = false;
            error1.ErrorStyle = ErrorStyles.Bottom;
            error1.HorizAxis = HorizontalAxis.Top;
            error1.MultiBar = MultiBars.None;
            error1.ShowInLegend = false;
            error1.Add(i, GraphData_Mean[i], (GraphData_Mean[i] - GraphData_Min[i]));
            error1.BarWidthPercent = 40;
           }
} 
```

当您实现它时，您只需要获取每个系列的 ErrorValue。如果您有兴趣获取 Series 的 Y 值，您只需要获取每个 Series 的 YValues 列表的值。你能告诉我们以前的代码是否可以帮助你实现你想要的吗？如果它没有帮助，请让我知道并按照您期望的那样一步一步地解释它。

谢谢，

最好的问候，桑德拉

# asp.net-mvc - FluentValidation：验证类型名称必须是唯一的

> ID：10993448
> 
> 赞同：3
> 
> 时间：2012-06-12T09:02:34.333
> 
> 标签：asp.net-mvc, fluentvalidation

我的代码中指定了以下规则

```
 RuleFor(x => x.Auction_Round1Ring1Start).GreaterThan(DateTime.Now);

    RuleFor(x => x.Auction_Round1Ring1End).GreaterThan(x => x.Auction_Round1Ring1Start);

    RuleFor(x => x.Auction_Round1Ring2Start).GreaterThan(x => x.Auction_Round1Ring1End);
    RuleFor(x => x.Auction_Round1Ring2End).GreaterThan(x => x.Auction_Round1Ring2Start);

    RuleFor(x => x.Auction_Round1Ring3Start).GreaterThan(x => x.Auction_Round1Ring2End);
    RuleFor(x => x.Auction_Round1Ring3End).GreaterThan(x => x.Auction_Round1Ring3Start);

    RuleFor(x => x.Auction_Round2Start).GreaterThan(x => x.Auction_Round1Ring3End); 
```

我得到这个错误

```
Validation type names in unobtrusive client validation rules must be unique. The following validation type was seen more than once: required 
```

我在视图中的这一行收到此错误

```
@Html.EditorForModel() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:22:57.820

确保您**没有**使用任何数据注释属性修饰您的视图模型类属性。

正确的：

```
[Validator(typeof(MyViewModelValidator))]
public class MyViewModel
{
    public DateTime Auction_Round1Ring1Start { get; set; }
    public DateTime Auction_Round1Ring1End { get; set; }

    public DateTime Auction_Round1Ring2Start { get; set; }
    public DateTime Auction_Round1Ring2End { get; set; }

    public DateTime Auction_Round1Ring3Start { get; set; }
    public DateTime Auction_Round1Ring3End { get; set; }

    public DateTime Auction_Round2Start { get; set; }
} 
```

错误的：

```
[Validator(typeof(MyViewModelValidator))]
public class MyViewModel
{
    [Required]
    public DateTime Auction_Round1Ring1Start { get; set; }
    public DateTime Auction_Round1Ring1End { get; set; }

    public DateTime Auction_Round1Ring2Start { get; set; }
    public DateTime Auction_Round1Ring2End { get; set; }

    public DateTime Auction_Round1Ring3Start { get; set; }
    public DateTime Auction_Round1Ring3End { get; set; }

    public DateTime Auction_Round2Start { get; set; }
} 
```

# php - filter_var 使用 FILTER_VALIDATE_REGEXP

> ID：10993451
> 
> 赞同：15
> 
> 时间：2012-06-12T09:02:42.327
> 
> 标签：php, filter-var

我正在练习我的初学者 php 技能，想知道为什么这个脚本总是返回 FALSE？

我究竟做错了什么？

```
$namefields = '/[a-zA-Z\s]/';

$value = 'john';

if (!filter_var($value,FILTER_VALIDATE_REGEXP,$namefields)){
    $message = 'wrong';
    echo $message;
}else{
    $message = 'correct';
    echo $message;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T09:26:19.377

正则表达式应该在一个选项数组中。

```
$string = "Match this string";

var_dump(
    filter_var(
        $string, 
        FILTER_VALIDATE_REGEXP,
        array(
             "options" => array("regexp"=>"/^M(.*)/")
        )
    )
); // <-- look here 
```

此外，该

```
$namefields = '/[a-zA-Z\s]/'; 
```

应该是

```
$namefields = '/[a-zA-Z\s]*/'; // alpha, space or empty string 
```

或者

```
$namefields = '/[a-zA-Z\s]+/'; // alpha or spaces, at least 1 char 
```

因为对于第一个版本，我认为您只匹配单字符串

# maven - Maven - 如何执行条件执行

> ID：10993452
> 
> 赞同：6
> 
> 时间：2012-06-12T09:02:45.117
> 
> 标签：maven, conditional-execution

有没有办法在 pom.xml 中执行片段的条件执行？我的要求是根据 pom.xml 中定义的变量复制文件/目录以部署结构...

例如：

```
< if >
    < equals arg1="package" arg2="package"/>
       < then>
              ....
           < /then>
     < /if> 
```

不知道我怎么能做到这一点！

任何指针将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:09:13.070

可能您需要为此使用[Maven AntRun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)。

通常，POM 中没有条件表达式。与此类似的唯一事情是可以在某些指定条件下激活的[构建配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)，但是它们可能不适合您当前的情况。

最后，我的建议在这里。我们不确切知道您的案例是关于什么的，甚至没有任何真正的代码片段，但是根据我的经验，在 Maven 中必须使用这样的黑客工具真的很不寻常。对我来说，这闻起来像是 Maven 理解、项目结构或类似问题的一些问题。我可能错了，也许您的情况确实需要这样做，但请考虑其他选项以适应 Maven 默认方法和约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:09:29.997

好吧，您可以使用 Maven 的[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)来做到这一点。

或者您可以查看 Maven 的[Ant Tasks](http://maven.apache.org/ant-tasks/index.html)。

# ios - Facebook score api with iOS5.1 - Can read scores... but can't post them

> ID：10993453
> 
> 赞同：2
> 
> 时间：2012-06-12T09:02:49.627
> 
> 标签：ios, facebook

我是 iOS 开发的新手，我已经成功集成了 facebook 登录等等......但是我的问题是 Score api。我可以阅读分数，但我似乎无法发布它，我拥有 publish_actions 权限，并且正在取回一个有效的 access_token。不确定是什么问题，这是我的代码 -

```
NSString *accessTokenToUse = [NSString stringWithFormat:@"%@",[self.facebook accessToken] ];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   //@"233", @"score",
                                   accessTokenToUse, @"access_token",
                                   nil];
    NSMutableDictionary *paramsB = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"233", @"score",
                                   accessTokenToUse, @"access_token",
                                   nil];
    NSLog(@"APP ACCESS TOKEN: %@",accessTokenToUse);

    [self.facebook requestWithGraphPath:@"me/scores" andParams:paramsB andHttpMethod:@"POST" andDelegate:self];
    [self.facebook requestWithGraphPath:@"APP_ID/scores" andParams:params andHttpMethod:@"GET" andDelegate:self]; 
```

***编辑 - 仍然不起作用

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"233", @"score", 
                               @"[APP_ACCESS_TOKEN (omitted for stackoverflow)]", @"access_token", nil];
[self.facebook requestWithGraphPath:@"/[userID]/scores" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

编辑 - 已解决

所以基本上我是在传递正确的令牌，但是 facebook sdk 在 Facebook.m 中将它覆盖到用户的访问令牌。所以修复很简单 - 每当我需要传递应用程序的令牌时，我只需添加一个其他参数 < key=@"useAppToken" Value=@"yes" > 并在 Facebook.m 中添加一个 if 语句 isSessionValid -

```
- (FBRequest*)openUrl:(NSString *)url
           params:(NSMutableDictionary *)params
       httpMethod:(NSString *)httpMethod
         delegate:(id<FBRequestDelegate>)delegate {

NSLog(@"PARAMS BFORE: %@ ", params);
[params setValue:@"json" forKey:@"format"];
[params setValue:kSDK forKey:@"sdk"];
[params setValue:kSDKVersion forKey:@"sdk_version"];

if ([self isSessionValid]) {
    if ([params objectForKey:@"useAppToken"] == nil || [params objectForKey:@"useAppToken"] == @"no") {
        [params setValue:self.accessToken forKey:@"access_token"];
    }

}
NSLog(@"PARAMS AFTER: %@ ", params);
[self extendAccessTokenIfNeeded];

FBRequest* _request = [FBRequest getRequestWithParams:params
                                           httpMethod:httpMethod
                                             delegate:delegate
                                           requestURL:url];
[_requests addObject:_request];
[_request addObserver:self forKeyPath:requestFinishedKeyPath options:0    context:finishedContext];
[_request connect];
return _request; 
```

}

请务必在此注释掉 NSLogs... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:09:46.457

分数只能使用应用程序发布`access_token`，而不能为用户发布（您可能正在使用它，可以阅读分数，但不允许您发布它们）。

引用[分数文档](https://developers.facebook.com/docs/score/)：

> **为用户创建或更新分数**只要您有权限，您就可以通过向应用
> 发出`HTTP` `POST`请求来发布分数或用户。`/USER_ID/scores``access_token``publish_actions`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:38:11.773

看起来这是一个错误：http: [//developers.facebook.com/bugs/461900043821056](http://developers.facebook.com/bugs/461900043821056)

但是，如果您将应用程序设置更改为网络应用程序而不是本机应用程序，它将起作用。

# sql-server - SQL Server“XML”数据类型的休眠映射

> ID：10993454
> 
> 赞同：0
> 
> 时间：2012-06-12T09:02:51.483
> 
> 标签：sql-server, hibernate, mapping

我想将 xml 数据类型从 sql server 映射到使用 Java 休眠。我知道用户类型，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T01:33:49.400

Hibernate 自动映射 SQL Server 中的 XML 数据类型。只需在您的 Java 类中使用一个字符串。

```
@Column(name = "my_xml_column")
private String myXML; 
```

# java - 如何分配 ArrayList 哈希图 列出

> ID：10993463
> 
> 赞同：1
> 
> 时间：2012-06-12T09:03:13.620
> 
> 标签：java

我正在尝试将 Double[] 的 Hashmap 值分配给 List，但它会引发错误：

> “类型 List 中的方法 add(Double) 不适用于参数 (Double[])”

```
ArrayList<HashMap<String, Double[]>> arl = (ArrayList<HashMap<String, Double[]>>) pd.getArrayList();

List<Double> empid = new ArrayList<Double>();
Iterator itr = arl.iterator();

while (itr.hasNext()) {
    HashMap<String, Double[]> map = (HashMap<String, Double[]>) itr.next();
    empid.add(map.get("id")));
} 
```

我怎样才能`Double[]`投到`Double.Request`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:12:27.953

如果转换为`List<Double>`是您唯一的选择，请尝试以下操作：

```
ArrayList<HashMap<String, Double[]>> arl = (ArrayList<HashMap<String, Double[]>>) pd.getArrayList();

List<Double> empid = new ArrayList<Double>();
Iterator itr = arl.iterator();

while (itr.hasNext()) {
    HashMap<String, Double[]> map = (HashMap<String, Double[]>) itr.next();
    for (Double d : map.get("id") {
        empid.add(d);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:05:14.463

我认为你有比选角更大的问题。你有一个数组`Doubles`，你最终想要一个`Double`.

这不是选角问题，而是你如何操纵那些`Doubles`只给你一个的问题。

也许您真正想要的是遍历该数组，然后将每个数组`Double`依次添加到列表中。但这确实是一个需求问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:10:21.073

在您提供的代码中，您必须更改

```
List<Double> empid = new ArrayList<Double>(); 
```

经过

```
List<Double[]> empid = new ArrayList<Double[]>(); 
```

使其编译。但我想这不是你想要达到的目标。这就是你想要做的吗？：

```
 ArrayList<HashMap<String, Double[]>> arl = (ArrayList<HashMap<String, Double[]>>) pd.getArrayList();
        List<Double> empid = new ArrayList<Double>();
        Iterator itr = arl.iterator();
        while (itr.hasNext()) {
            HashMap<String, Double[]> map = (HashMap<String, Double[]>) itr.next();
            empid.addAll(Arrays.asList(map.get("id")));
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:11:29.747

问题是`map.get("id")`将返回`Double[]`但`empid`类型为`Double`.

你只要改变

```
List<Double> empid = new ArrayList<Double>(); 
```

到

```
List<Double[]> empid = new ArrayList<Double[]>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T09:11:45.223

您试图在元素为“单个”双精度的列表中插入一个 Double 类型的数组。

要在 empid 列表中插入一个数组，您应该以这种方式声明它：

```
List<Double[]> empid = new ArrayList<Double[]>(); 
```

然后，当您在此列表上调用 add 时，您可以传递 Double[] 类型的参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T09:22:18.910

您似乎正在寻找的是这一行：

```
empid.add(map.get("id"))); 
```

改为：

```
empid.addAll(Arrays.asList(map.get("id")))); 
```

它将一个数组转换`Double`为一个`List`，`Double`并将`addAll`结果集合中的所有项目添加到您的目标集合`empid`。

# git - 詹金斯，通过 ssh 获取多个用户的 git 子模块？

> ID：10993464
> 
> 赞同：4
> 
> 时间：2012-06-12T09:03:23.073
> 
> 标签：git, ssh, jenkins, fetch, git-submodules

不知道标题是否描述了我想说的任何内容，但这里是：

我想知道使用 git 子模块设置 Jenkins 时的“最佳实践”是什么。主模块和子模块 repo 都通过 ssh 访问，并且由于我们有多个用户，所有这些用户都有各自的用户名。拥有自己用户的 Jenkins 也是如此。但是，我们（我）偶然发现了一个问题。如果我创建一个子模块： **git submodule add ssh://my-user-name@address-to-module-repo**并**推送**它，Jenkins 在尝试**获取**子模块时会将我称为用户，这显然会失败。如果其他用户执行**拉取**操作，我的用户名仍将位于路径中（在 .gitmodule、.git/config 等中）。

我发现了另一篇文章[Git submodules and ssh access](https://stackoverflow.com/questions/6031494/git-submodules-and-ssh-access) handling sharing between "normal" users，**但是当 Jenkins 尝试构建时它并没有真正解决问题**，因为我只能在 Jenkins 获取我无法获取的所有内容后执行 shell cmd's按照链接中的说明做，或者我可以（詹金斯新手）吗？

所以，总结一下。如何解决这个问题，以便 Jenkins 在通过 ssh 获取子模块时使用自己的用户？

兄弟，手枪先生

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:20:17.543

我在 StackOverflow 上的另一个问题上找到了一个很好的解决方案：[Git submodule URL not include username?](https://stackoverflow.com/questions/7714326/git-submodule-url-not-including-username)

您可以使用

```
[submodule foosub]
path = foosub
url = ./../foosub 
```

定义一个相对于项目使用的 URL 的 URL。例如，如果您有项目 URL myuser@myserver.com/git/project 和子模块 URL myuser@myserver.com/git/foosub，则配置应该有效。当然，如果子模块位于与项目不同的服务器上，它就无法工作。

现在 Jenkins 应该将自己的用户数据应用到子模块，因为它在项目 URL 中有自己的用户数据集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:30:28.583

如果通用 Jenkins ssh“帐户”被授权至少从这些子模块中提取，那么您可以添加一个脚本，该脚本将：

*   检测它是否在 Jenkins 环境中运行
*   **[检测](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)**`.gitmodules`文件内容
*   更改内容`.gitmodules`以用 Jenkins 替换任何用户

您还可以使用另一个脚本来恢复`.gitmodules`文件的原始内容，以便不记录任何修改。

这些脚本自动工作的方式是通过**[内容过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)**：

![内容过滤器驱动程序](../Images/dc7fff90c8641311bf88517adf6cf1c9.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:59:01.427

解决方案是为我们的 Jenkins 用户更改 ssh 配置文件，以便在设置与子模块存储库的 ssh 连接时使用它自己的默认用户。

# iphone - 如何在 iOS 中为推送通知警报视图设置操作

> ID：10993468
> 
> 赞同：0
> 
> 时间：2012-06-12T09:03:32.247
> 
> 标签：iphone, action, push-notification, uialertview

在我的应用程序中，我实现了推送通知功能，并且正在收到通知。我在 appDelegate 文件中使用了以下代码。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    for (id key in userInfo) {
        NSMutableArray *array = [userInfo objectForKey:key];
        NSString *message = [NSString stringWithFormat:@"%@",[array valueForKey:@"alert"]];
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"iPhoneApp" message:message delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
        [alert show];
        [alert release];
    }    
} 
```

我想对推送通知警报的 OK 按钮单击事件执行操作（当应用程序运行时）。我在这个应用程序中有三个视图控制器。那么我应该在哪个类中添加代码

`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:15:41.137

`delegate`在您设置为该特定 UIAlertView的同一类中。在您当前的情况下，`AppDelegate`是`-clickedButtonAtIndex:`.

如果您想在您拥有的 3 个控制器之一中接收点击事件。您必须将该特定控制器设置为您的委托`UIAlertView`：

```
 UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"iPhoneApp" message:message delegate:myViewController cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
    [alert show];
    [alert release]; 
```

如您所见，我指定`myViewController`为代表。`myViewController`应该符合`UIAlertViewDelegate`协议并实现`-clickedButtonAtIndex:`方法。现在，一旦您选择了其中一个按钮，您就会接到电话`myViewController`。

# jquery - 如何在不丢失事件的情况下动态替换 HTML 标签

> ID：10993470
> 
> 赞同：0
> 
> 时间：2012-06-12T09:03:41.683
> 
> 标签：jquery, html

我有一个 html *ul*标签，我有这样的东西：

```
<div id="sidebar"> 
    <ul id="menu">
        <li>
            <div id="clickable">
                <img src="img/img8.png" alt="Descripción de la igen 8.png">/img>
            </div>
        </li>
        <li>
            <div id="clickable">
                <img src="img/img10.png" alt="Descripción de la imagen 10"></img>
            </div>
        </li>
     </ul>
</div> 
```

这是一个常见的列表，显示为滑块。如您所见，每个图像都在一个 div 中，您可以在其中单击并在另一个 div 中显示它。

好的，我有这个其他列表：

```
<div id="seleccion_galeria">Selecciona la secci&oacute;n que te gustar&iacute;a visualizar:</div>
            <div id="lista_galerias">
                <ul>
                    <li><div id="escaparates_show">Escaparates</div>
                        <script type="text/javascript">
                            $('#escaparates_show').click(function()
                            {
                                console.log('clicked');
                                $('#menu').html('');
                                $('<li><div id="clickable"><img src="img/img8.png" alt="Descripción de la imagen 8."></img></div></li><li><div id="clickable"><img src="img/img10.png" alt="Descripción de la imagen 10"></img></div></li><li><div id="clickable"><img src="img/img13.png" alt="Descripción de la imagen 13"></img></div></li><li><div id="clickable"><img src="img/img15.png" alt="Descripción de la imagen 15"></img></div></li><li><div id="clickable"><img src="img/img20.png" alt="Descripción de la imagen 20"></img></div></li>')
                                    .prependTo('#menu');
                                $('#galeria_seleccionada').html('Escaparates');
                            });
                        </script>
                    </li>
                    <li><div id="decoracion_show">Decoraci&oacute;n</div>
                        <script type="text/javascript">
                            $('#decoracion_show').click(function()
                            {
                                console.log('clicked');
                                $('#menu').html('');
                                $('<li><div id="clickable"><img src="img/img8.png" alt="Descripción de la imagen 8."></img></div></li><li><div id="clickable"><img src="img/img10.png" alt="Descripción de la imagen 10"></img></div></li>')
                                    .prependTo('#menu');
                                $('#galeria_seleccionada').html('Decoración');
                            });
                        </script>
                    </li>
     </ul>
</div> 
```

这是一个列表，显示最后一个列表的每个元素包含的可能图像。当我单击列表中的每个元素时，它会删除第一个*ul* "#menu" 列表的 html 并将其替换为我想要的内容。有了它，我可以在另一个 div 上显示可点击和可展开的不同图像列表。

问题是，当我用新列表替换内容时，它完美地显示了新的图像列表，但它没有继承**“可点击”**事件，所以我第一次替换 HTML 标记时，它失去了可点击性.

任何人都可以知道为什么会发生这种情况？

谢谢！

编辑：

对于同样的问题，我有这个 jquery 事件：

```
$('#menu').on("hover", '#menu li', 
function() {    
//mouse over LI and look for A element for transition
$(this).find('img')
    .animate( { opacity:1 }, 200)
}); 
```

它适用于所有继承的元素，但我不能让“mouseleave”事件继承。如果我添加：

```
 $('#menu').on("hover", '#menu li', 
    function() {    
        //mouse over LI and look for A element for transition
        $(this).find('img')
            .animate( { opacity:1 }, 200)
    },
    function() {
        $(this).find('img')
            .animate( { opacity:0.5 }, 200)
    }); 
```

它不起作用。它如何用于悬停 onleave 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:06:42.510

当您从 DOM 中删除一个元素时，绑定到该元素的任何事件处理程序都将不再起作用。您需要使用事件委托将事件处理程序绑定到始终位于 DOM 中的祖先元素。您可以使用以下[`on`](http://api.jquery.com/on/)方法执行此操作：

```
$("#menu").on("click", ".clickable", function() {
    //Do stuff
}); 
```

这会将事件处理程序绑定到父`ul`元素。由于大多数 DOM 事件在树中冒泡，因此可以在祖先元素上捕获它们。当事件到达 时`ul`，该`on`方法将检查它是否源自与选择器匹配的元素。如果是这样，事件处理程序将被执行。

这样做的额外好处是只有一个事件处理程序而不是多个（每个`.clickable`元素一个），这样更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:08:36.520

```
 $('.clickable').live('click',function(){
      //do stuff here
    });
OR

$('body').delegate('.clickable','click',function(){
  //do stuff here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:06:54.067

使用 .on 方法绑定您的事件，这允许事件委托。见[这里](http://api.jquery.com/on/)。

提炼：

“委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择一个保证在附加委托事件处理程序时存在的元素，您可以使用委托事件避免频繁附加和删除事件处理程序的需要。”

# mysql - Mysql全外连接临时表

> ID：10993476
> 
> 赞同：3
> 
> 时间：2012-06-12T09:04:14.630
> 
> 标签：mysql, join, temp-tables

mysql(5.1.36)中关于全连接的问题很多。当然，解决方案是加入工会组合。

我的问题是我有两个这样的**临时表**：

```
CREATE TEMPORARY TABLE wConfs
(
    idWorker INT,
    confs SMALLINT
) ENGINE=INNODB;

CREATE TEMPORARY TABLE wRejects
(
    idWorker INT,
    rejects SMALLINT
) ENGINE=INNODB; 
```

JOIN-UNION mix 不能用于完全连接临时表，因为它会导致`ERROR 1137 (HY000): Can't reopen table`.

我的问题是——在临时表上实现完全连接的最简单的解决方案是什么？

**编辑**：加入联合组合：

```
SELECT wc.idWorker, wc.confs, wr.rejects FROM wConfs wc LEFT JOIN wRejects wr 
ON (wr.idWorker = wc.idWorker)
UNION
SELECT wc.idWorker, wc.confs, wr.rejects FROM wConfs wc RIGHT JOIN wRejects wr 
ON (wr.idWorker = wc.idWorker); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:47:31.927

尝试使用`idWorker`来自两个表的不同值创建第三个临时表，然后在您的 JOIN-UNION 组合中使用它，例如 -

```
CREATE TEMPORARY TABLE all_id
  SELECT idWorker FROM wConfs UNION SELECT idWorker FROM wRejects;

SELECT t.idWorker, c.confs, r.rejects FROM all_id t
LEFT JOIN wConfs c
  ON t.idWorker = c.idWorker
LEFT JOIN wRejects r
  ON t.idWorker = r.idWorker; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:14:41.200

我找到了另一种解决方法。我还创建了第三个临时表：

```
DROP TABLE IF EXISTS wResults;
CREATE TEMPORARY TABLE wResults
(
    idWorker INT PRIMARY KEY,
    rejects SMALLINT,
    confs SMALLINT
) ENGINE=INNODB; 
```

现在我像这样插入行：

```
INSERT INTO wResults(idWorker, confs)
    SELECT idWorker, confs FROM wConfs;

INSERT INTO wResults(idWorker, rejects)
    SELECT wr.idWorker, wr.rejects FROM wRejects wr
    ON DUPLICATE KEY UPDATE rejects = wr.rejects; 
```

它就像一个魅力。我想如果要插入很多数据 - 它会很慢，但我的表很小。总之谢谢大家！

# watin - 将 Watin 附加到现有浏览器总是超时

> ID：10993477
> 
> 赞同：2
> 
> 时间：2012-06-12T09:04:23.263
> 
> 标签：watin

我正在尝试将 Watin 附加到 Internet Explorer 9 的现有实例。问题是无论我尝试什么，它似乎只是超时。我正在使用的代码是：

```
Settings.AttachToBrowserTimeOut = 240;
Settings.WaitUntilExistsTimeOut = 240;
Settings.WaitForCompleteTimeOut = 240;   

Browser.AttachTo<IE>(Find.ByTitle("Google"), 240); 
```

这段代码是[这里的 Watin 指南](http://watinandmore.blogspot.co.uk/2010/01/browserattachto-and-iattachto.html)中的内容，减去了我尝试过的超时调整。我还尝试将代码设置为运行 x86 而不是任何 cpu 但仍然无法正常工作。任何想法我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:45:26.693

您编写的方法缺少单线程`ApartmentState`。解决此问题的最简单方法是`[STAThread]`在您尝试使用该代码的方法上方添加。

例如这个：

```
//[STAThread]
static void Main(string[] args)
{
    IE.AttachTo<IE>(Find.ByTitle("Google"), 5);
} 
```

像你描述的那样行事。当您取消注释`[STAThread]`

```
[STAThread]
static void Main(string[] args)
{
    IE.AttachTo<IE>(Find.ByTitle("Google"), 5);
} 
```

它按预期工作。

# character-encoding - iconv C API：从/到本地编码的字符集转换

> ID：10993481
> 
> 赞同：1
> 
> 时间：2012-06-12T09:04:58.470
> 
> 标签：character-encoding, locale, detection, iconv

我正在使用 iconv C API，我希望 iconv 检测计算机的本地编码。那可能吗？显然是因为当我查看源代码时，我在文件[iconv_open1.h](http://git.savannah.gnu.org/cgit/libiconv.git/tree/lib/iconv_open1.h)中发现，如果`fromcode`or`tocode`变量是空字符串 ( `""`)，则使用`locale_charset()`函数调用使用本地编码。

有人还告诉我，为了将语言环境编码转换为 unicode，我只需要使用`iconv_open ("UTF-8", "")`

不幸的是，我在文档中没有提到这一点。

当我将一些 iso-8859-1 文本转换为语言环境编码（在我的机器上是 utf-8）时，在转换过程中我得到 errno=EILSEQ（非法序列）。我检查并 iconv_open 没有返回错误。

如果不是`iconv_open`我指定的空字符串`"utf-8"`，那么我不会收到错误。显然 iconv 未能检测到我当前的字符集。

编辑：我检查了一个简单的 C 程序，`puts(nl_langinfo(CODESET))`我得到了`ANSI_X3.4-1968`（它是 ASCII）。显然，我遇到了字符集检测问题。

编辑：这应该与[为什么 nl_langinfo(CODESET) 与 localecharmap 不同？](https://stackoverflow.com/questions/1558379/whi-is-nl-langinfocodeset-different-from-locale-charmap)

附加信息：我的程序是用 Ada 编写的，我在链接时绑定到 C 函数。显然，语言环境设置在 Ada 运行时和 C 运行时中的初始化方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:55:26.730

[我将采取与为什么 nl_langinfo(CODESET) 与 localecharmap 不同](https://stackoverflow.com/questions/1558379/whi-is-nl-langinfocodeset-different-from-locale-charmap)中相同的答案？

> 你需要先打电话
> 
> ```
> setlocale(LC_ALL, ""); 
> ```

# mysql - 使用查询中的条件名称将空字段替换为 0

> ID：10993482
> 
> 赞同：0
> 
> 时间：2012-06-12T09:05:01.277
> 
> 标签：mysql

这是我的 MySQL 查询：

```
SELECT ROUND( AVG(p.votes), 2) AS 'votes', games.*
FROM games
LEFT JOIN polls p ON (p.gid = games.id)
GROUP BY games.id; 
```

它工作正常，但如果`polls`表中没有任何对游戏的投票 - 该`votes`字段为 NULL 然后在结果中 - 我该如何替换它以便它会显示`0`（因为在 中`0`找到了行`polls`）。

还：

是否可以命名我的条件，然后使用它 fe。在 MySQL 中进行计算？

这就是我的意思：

```
SELECT ROUND( AVG(votes), 2) AS 'votes', (votes / 50 * 100) FROM `polls`; 
```

会抛出一条错误消息，说那里`votes`是一个未知的列。

那么是否可以在我的查询中使用条件（如“**投票**”）名称来计算目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:07:21.510

您不能为字段创建别名并在同一选择语句中使用相同的别名。

使用以下查询：

```
SELECT Ifnull(Round(Avg(votes), 2), 0) AS 'votes', 
       ( Ifnull(Round(Avg(votes), 2), 0) / 50 * 100 ) 
FROM   `polls`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:07:42.260

第一的：

```
COALESCE(ROUND( AVG(p.votes), 2), 0) 
```

第二：不，不可能在完全相同的声明中。如果别名部分在子查询中，这是可能的。所以你必须重写

```
(COALESCE(ROUND( AVG(p.votes), 2), 0) / 50 * 100) 
```

COALESCE 和 IFNULL 实现相同的目标（可能方式不完全相同），但 COALESCE 是 ANSI SQL。

# c++ - NURBS 和 opengl 4.2 核心呢？

> ID：10993486
> 
> 赞同：3
> 
> 时间：2012-06-12T09:05:06.767
> 
> 标签：c++, opengl, opengl-4, nurbs

RedBook 中的 NURBS 章节表示已弃用，包括实用程序库：“尽管其中一些功能是 GLU 库的一部分，但它依赖于已从核心 OpenGL 库中删除的功能。”

这是否意味着 OpenGL 4.2 实际上缺少用于操作 NURBS 曲线和曲面的 C++ 工具包？有一些商业 3rd 方工具包，但它们不是跨平台的（主要是 windows）

...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:30:36.260

在 OpenGL-3 和更高版本中，您可以使用几何图形和顶点着色器，OpenGL-4 甚至提供了镶嵌着色器。它们提供了实现 GPU 加速 NURBS 和 Bezier 样条曲线和曲面的一切。OpenGL-1.1 的评估器从未在大多数硬件上进行 GPU 加速。所以实际上没有它们你会过得更好。

只需在着色器中实现 NURBS 或 Bezier 求值器并将顶点作为表面采样点发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T01:06:51.990

关于您关于红皮书的问题，OpenGL ARB 并未正式弃用 GLU 库，而只是忽略了它。但是，GLU 使用了 OpenGL 3.0 中已弃用并在 OpenGL 3.1 中删除的功能：立即模式渲染、显示列表、矩阵堆栈等等。具体到 NURBS，他们使用了其中的几个功能（假设与您的 OpenGL 实现相关的 GLU 库是基于 GLU 的 SGI 版本，大多数都是），因此这些功能在核心上下文中不起作用。这并不是缺少基于 C++ 的 GLU 库，而是 GLU 使用了从现代 OpenGL 中删除的功能。

@datenwolf - 不完全是。GLU NURBS 库支持修剪曲线，在所有情况下使用 OpenGL 顶点着色器管道（即，仅顶点、曲面细分和几何着色）都很难实现。具体来说，在尊重修剪曲线交叉点的同时支持缠绕规则和正确修剪非常困难（可能结合计算着色器和片段着色器中的花哨工作）。您可以使用 alpha 纹理来破解修剪，但您会遇到锯齿结果，但这是一个快速修复。

# sql-server-2008 - 无法打开 SQL Sever 2008 配置管理器

> ID：10993493
> 
> 赞同：1
> 
> 时间：2012-06-12T09:05:31.203
> 
> 标签：sql-server-2008

当我尝试在我的 Windows Server 2003 R2 上访问 SQL 配置管理器时收到以下消息
“无法连接到 WMI 提供程序。您没有权限或服务器无法访问。请注意，您只能管理 SQL Server 2005 及更高版本带有 SQL Server 配置管理器的服务器。
一般故障 [0x80041001]"

也尝试使用以下解决方案，但错误仍然存​​在
解决方案是转到命令提示符，然后运行 ​​mofcomp。
C:\Program Files\Microsoft SQL Server\90\Shared>mofcomp "C:\Program Files\Microsoft SQL Server\90\Shared\sqlmgmproviderxpsp2up.mof"

下面是命令的输出：

```
C:\Documents and Settings\Administrator>mofcomp "%programfiles(x86)%\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"     
Microsoft (R) 32-bit MOF Compiler Version 5.2.3790.1830     
Copyright (c) Microsoft Corp. 1997-2001\. All rights reserved.       
Parsing MOF file: C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmp        
roviderxpsp2up.mof      
MOF file has been successfully parsed       
Storing data in the repository...       
An error occurred while opening the namespace for object 1 defined on lines 4 - 7:      
Error Number: 0x80041001, Facility: WMI     
Description: Generic failure        
Compiler returned error 0x80041001      
C:\Documents and Settings\Administrator> 
```

谁能告诉这个问题如何解决？

# facebook - Facebook API/对话不友好的人？

> ID：10993494
> 
> 赞同：0
> 
> 时间：2012-06-12T09:05:32.090
> 
> 标签：facebook, facebook-graph-api

# 前言

我知道之前有人问过类似的问题，但我相信我的要求略有不同，所以无论如何我都会去做。

# 现有问题/发现

我已经阅读了以下关于 SO 的文章：

*   [通过 Facebook API 取消好友关系？](https://stackoverflow.com/questions/8087714/unfriending-someone-through-the-facebook-api)
*   [有什么方法可以使用 Facebook 的 PHP SDK 或 API 取消好友或删除好友？](https://stackoverflow.com/questions/7555651/any-way-to-unfriend-someone-using-facebooks-php-sdk)

以前的查询主要集中在用户的静默/程序化解除好友关系上。我不一定需要它保持沉默，并且很乐意使用提示对话框。

有没有什么更接近这个，或者我可以使用一些黑客？

在上面的一篇文章中，提到了一个应用程序[汉堡王'Whopper Sacrifice'](http://www.insidefacebook.com/2009/01/14/whopper-sacrifice-shut-down-by-facebook/)，我相信它确实没有朋友。它被关闭的原因似乎是对非好友的隐私侵犯/宣传（这似乎有点苛刻！），而不是非好友本身。

# 示例想法/总结

**我正在寻找某种方法来简单地（使用或不使用提示）帮助用户解除某人的好友关系。**

举个例子，你认为可以使用某种对 iframe 的调用来调出对话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:18:11.577

不，此功能没有 API 或对话框。用户可以使用 Facebook 自己的界面删除朋友，但不能通过 3rd 方应用程序。

旁注，用户可以从该人的时间线中取消某人的好友关系，如果您希望您的用户出于某种原因取消某人的好友关系，只需将他们链接到该时间线并给他们“取消好友”说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:17:45.367

只有添加用户为好友（[Friends Dialog](https://developers.facebook.com/docs/reference/dialogs/friends/)）但不能终止好友关系的方法，在 API 或 SDK-s Facebook 提供的没有这样的功能。

# django - 尝试运行 emencia.django.newsletter 时遇到的小麻烦

> ID：10993496
> 
> 赞同：0
> 
> 时间：2012-06-12T09:05:43.163
> 
> 标签：django

我完全按照文档描述的那样安装（或者我认为）`emencia.django.newsletter`（https://github.com/Fantomas42/emencia-django-newsletter）。`emencia.django.newsletter`我从 github安装了所有依赖项。全部安装成功。

我也在我的`urls.py`

```
urlpatterns += patterns('',
    url(r'^newsletters/', include('emencia.django.newsletter.urls')),
) 
```

我同步了数据库，当我提供`http://localhost:8000/newsletters/`（即使以管理员身份登录）时，我得到一个 404 错误页面。

```
Page not found (404)
Request Method:     GET
Request URL:    http://localhost:8000/newsletters/ 
```

[...]

```
^newsletters/ ^mailing/
^newsletters/ ^tracking/
^newsletters/ ^statistics/
^newsletters/ ^ ^preview/(?P<slug>[-\w]+)/$ [name='newsletter_newsletter_preview']
^newsletters/ ^ ^(?P<slug>[-\w]+)/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$ [name='newsletter_newsletter_contact']
^dowser/
^media/(?P<path>.*)$ 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:32:38.753

显然没有页面，`/newsletters/`如您在`urls.py`.

尝试`/newsletters/mailing/`

# php - 如何在处理 PHP 脚本时用 Javascript 打印报告？

> ID：10993498
> 
> 赞同：0
> 
> 时间：2012-06-12T09:05:54.507
> 
> 标签：php, javascript, jquery, session

我正在尝试使用 Javascript 或 JQuery 在 textArea 中打印报告，因为我想向用户展示 PHP 脚本在后台处理一段时间时发生的事情，因此用户不会认为应用程序挂起。

因此，我尝试使用 setTimeout(...) 自动更新 textArea，并通过 PHP 脚本在会话中设置报告值，同时在客户端获取该变量并将其打印在 textArea 中。

*这是我使用的代码：*

```
/*
 * The client side javascript function that updates the textArea value.
 */
function updateReport() {
    var reportValue = '<?php echo( $_SESSION[ 'report' ] ); ?>';
    document.forms[ 'start_send_form' ].elements[ 'reportTextArea' ].value = reportValue;

    setTimeout(function () {
        updateReport();
    }, 500);
} 
```

客户端通过 Ajax(JQuery) 请求调用的 php 脚本：

```
<?php
    $report = "";

    for( $i = 0; $i < $number_of_items_to_process; $i++ ) {
        $report .= "- Processing a new item";
        $_SESSION[ 'report' ] = $report;    
        // .... Process some long code here.
    }
?> 
```

但似乎 updateReport() 在第一次调用时只执行一次，然后在 PHP 脚本完成后恢复。

**你能为我解释一下吗？**

**有没有办法完成我想要的？**

---------------------------------- >>**更新：我用来获取 $ 更新值的代码_SESSION['report'] 来自服务器端：**

```
// 1\. JavaScript :
function updateReport() {
    $.ajax({  
          url: "test2.php",  
          type: "POST",  
          cache: false,  
          success: function( returned_value ){
                var reportValue = $.trim( returned_value );
                alert(reportValue);  // All messages appear after PHP script ends.
          }
    });  

    setTimeout(function () {
        updateReport();
    }, 500);
}

// 2\. test2.php(Script just made to get $_SESSION[ 'report' ]) :
<?php
    if ( !isset( $_SESSION ) ) session_start();
    echo( $_SESSION[ 'report' ] );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:46:53.537

当您访问一个 php 站点（例如 test.php）时，它会从服务器转换为 html 并发送到您的网络浏览器。

所以：

```
function updateReport() {
    var reportValue = '<?php echo( $_SESSION[ 'report' ] ); ?>';
    document.forms[ 'start_send_form' ].elements[ 'reportTextArea' ].value = reportValue;

    setTimeout(function () {
        updateReport();
    }, 500);
} 
```

将在 webbrowser 中（您可以在 firebug 或 chrome dev 工具中查找）：

```
function updateReport() {
    var reportValue = '';
    document.forms[ 'start_send_form' ].elements[ 'reportTextArea' ].value = reportValue;

    setTimeout(function () {
        updateReport();
    }, 500);
} 
```

因为当您访问该站点时，$_SESSION['report'] 是空的。

当您执行 ajax 请求时，您会调用服务器上的代码。当您设置 $_SESSION['report'] 时，它会在服务器上设置。但是客户端没有获得该信息，因为客户端（您的网络浏览器）不知道 PHP 是什么。它只是一遍又一遍地设置一个空字符串，因为它只在页面请求时获得了生成的 html（来自 PHP 文件）。

您必须发出额外的 Ajax 请求才能从 $_SESSION['report'] 向客户端获取新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:50:49.820

虽然您可以使用[HTTP Streaming](http://ajaxpatterns.org/HTTP_Streaming)来执行此操作，但我会选择一种不同的方法来解决此问题。

由于处理所有项目都需要时间，因此应该由后台进程完成。在 PHP 中，您可以使用[`pcntl_fork()`](http://php.net/manual/en/function.pcntl-fork.php).

首先，您必须开始处理：

1.  检查文件是否`foobar.pid`存在
2.  如果文件不存在，则创建它，否则 -*转到**9***
3.  从队列中选择下一个项目
4.  处理项目
5.  如果`foobar.pid`包含“kill”，则*转到**8***
6.  如果队列为空：*转到**8***
7.  *转到**3***
8.  删除文件`foobar.pid`
9.  结尾

这将导致后台进程检查，已经存在一个这样的进程。此外，它还可以让您通过将“kill”放入文件中来停止循环。

那么..报告呢？作为处理的一部分，您应该有后台服务将状态消息写入某个`status.txt`文件。

然后，您的 XHR（营销人员称之为 - AJAX）脚本可以读取此文件。并且相同的 JavaScript 代码可以检查是否已完成所有项目的处理（因为`foobar.pid`文件已消失）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:46:57.173

试试这个怎么样：

1.  [http://www.silverspider.com/2005/php-progress-bar/](http://www.silverspider.com/2005/php-progress-bar/)
2.  [http://www.redips.net/javascript/ajax-progress-bar/](http://www.redips.net/javascript/ajax-progress-bar/) - 这个有一个功能演示，您可以在其中看到进度条加载...

# mysql - mysql浮动存储大小？

> ID：10993501
> 
> 赞同：1
> 
> 时间：2012-06-12T09:06:06.383
> 
> 标签：mysql, floating-point

在 mysql 文档中，它声明一个`float`列使用，

```
float(p) = 4 bytes if 0 <= p <= 24, 8 bytes if 25 <= p <= 53 
```

那么这是否意味着如果我的专栏表达如下

```
float(20, 6) 
```

那么是否`p`等于添加的数量？所以在上面的例子中，它的总大小为 8 个字节`20 + 6 == 26`。

或者这是否意味着 p 等于 20，所以它的存储大小为 4 个字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:19:14.957

p 等于 20，是的。6 是分号/点后有多少位数字。

即`decimal(5,2)`意味着，该列中的值范围可以从 -999.99 到 999.99

[您可以在手册](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)中阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:20:00.080

这意味着 p 等于 20，因为这是保留的有效数字的数量。第二个数字表示小数点后可以存储的位数。

在示例下方的[输入链接描述](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)中提到了它。

# c# - 从逻辑层 (C#) 在 3 层架构中生成 Web 链接

> ID：10993502
> 
> 赞同：3
> 
> 时间：2012-06-12T09:06:08.750
> 
> 标签：c#, asp.net, n-tier-architecture, 3-tier

我有一个 3 层架构系统（数据、逻辑、演示）。表示层是一个 ASP.Net 网站。

我想不时发送电子邮件。我的假设是这种发送电子邮件的逻辑应该放在逻辑层。但是，此类电子邮件需要具有指向 Web 层路径的链接。我想到的一个例子是，当生成订单时，发送的电子邮件需要有一个链接，用户可以点击该链接进行在线支付。

考虑到这个页面是在表示层中实现的，逻辑层和表示层之间没有直接的联系。人们将如何处理这个问题，以及关于这种层分离的任何最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:24:01.970

它应该在逻辑层，在电子邮件中有链接没有害处。

电子邮件通常包含链接，如果链接托管在同一个域中会怎样。

# ios - SecKeyGetBlockSize 或 SecKeyRawVerify for Public Key throw EXC_BAD_ACCESS code=2

> ID：10993505
> 
> 赞同：5
> 
> 时间：2012-06-12T09:06:20.840
> 
> 标签：ios, exc-bad-access, public-key, commoncrypto

在尝试从 Apple 的示例中实现 Security.Framework SecKeyRawVerify iOS 函数时，程序因指针错误错误（EXC_BAD_ACCESS 代码=2）而停止。任何帮助或建议将不胜感激。

这是我的代码：

```
- (BOOL)verifySignature:(NSData *)plainText signature:(NSData *)sig {
    size_t signedHashBytesSize = 0;

    OSStatus sanityCheck = noErr;
    SecKeyRef publicKeyA = NULL;

    NSMutableDictionary * queryPublicKeyA = [[NSMutableDictionary alloc] init];
    NSData * publicTag = [NSData dataWithBytes:publicKeyAIdentifier length:strlen((const char *)publicKeyAIdentifier)]; // 

    // Set the public key query dictionary.
    [queryPublicKeyA setObject:(id)kSecClassKey forKey:(id)kSecClass];
    [queryPublicKeyA setObject:publicTag forKey:(id)kSecAttrApplicationTag];
    [queryPublicKeyA setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [queryPublicKeyA setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnData];

    // Get the key bits.
    sanityCheck = SecItemCopyMatching((CFDictionaryRef)queryPublicKeyA, (CFTypeRef *)&publicKeyA);

    if (sanityCheck == noErr) {       
        // Get the size of the assymetric block.
        signedHashBytesSize = SecKeyGetBlockSize(publicKeyA); // Halts here
        sanityCheck = SecKeyRawVerify(publicKeyA, 
                                  kSecPaddingPKCS1SHA1, 
                                  (const uint8_t *)[[self getHashBytes:plainText] bytes],
                                  CC_SHA1_DIGEST_LENGTH,
                                  (const uint8_t *)[sig bytes],
                                  signedHashBytesSize
                                  ); // And here
    }
    if(publicKeyA) CFRelease(publicKeyA);
    if(queryPublicKeyA) [queryPublicKeyA release]; 

    return (sanityCheck == noErr) ? YES : NO;
} 
```

链接到 Apple CryptoExcersize：http: [//developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008019-Intro-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008019-Intro-DontLinkElementID_2)

# sql - 有人可以解释为什么这个 select 语句的行为方式是这样的吗

> ID：10993506
> 
> 赞同：1
> 
> 时间：2012-06-12T09:06:23.367
> 
> 标签：sql, mysql4

在为游戏生成排名时，我编写了一个类似于以下代码的查询（为简洁起见，省略了很多列），并注意到排名产生的似乎是乱码（第一个查询）。但是，更改引用 gamenumber 的表会产生正确的结果（第二个查询）。

```
mysql> select @i:=@i+1 as rank, a.usernum, s.buildings from account_data as a, statistics as s join (select @i:=0) rank
where a.gamenumber=144 and a.usernum=s.usernum order by s.buildings desc limit 10;
+------+---------+-----------+
| rank | usernum | buildings |
+------+---------+-----------+
|   49 |   31071 |     87557 |
|   45 |   31047 |     86858 |
|   24 |   31064 |     84753 |
|   69 |   31089 |     79682 |
|   17 |   31103 |     76892 |
|   38 |   31106 |     66186 |
|   29 |   31053 |     65069 |
|   47 |   31081 |     59093 |
|   61 |   31036 |     58056 |
|  100 |   31061 |     56833 |
+------+---------+-----------+
10 rows in set (0.01 sec)
mysql> select @i:=@i+1 as rank, a.usernum, s.buildings from account_data as a, statistics as s join (select @i:=0) rank
where s.gamenumber=144 and a.usernum=s.usernum order by s.buildings desc limit 10;
+------+---------+-----------+
| rank | usernum | buildings |
+------+---------+-----------+
|    1 |   31071 |     87557 |
|    2 |   31047 |     86858 |
|    3 |   31064 |     84753 |
|    4 |   31089 |     79682 |
|    5 |   31103 |     76892 |
|    6 |   31106 |     66186 |
|    7 |   31053 |     65069 |
|    8 |   31081 |     59093 |
|    9 |   31036 |     58056 |
|   10 |   31061 |     56833 |
+------+---------+-----------+
10 rows in set (0.00 sec) 
```

谁能向我解释为什么顺序正确时排名不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:10:50.370

以这种方式使用变量有点像 hack：

```
select @i:=@i+1 as rank 
```

如果您只从一个表中选择，您可以期望这会起作用。当您将更多表连接在一起时，MySQL 可能会评估`@i:=@i+1`稍后被该`where`子句过滤掉的行。

要解决此问题，请确保在连接之外计算排名。一种方法是将连接结果存储在临时表中，并计算其排名。

# bash - 带有文件名的bash自动完成

> ID：10993514
> 
> 赞同：3
> 
> 时间：2012-06-12T09:06:46.410
> 
> 标签：bash, autocomplete, bash-completion

我无法使用简单的 bash 自动完成功能。我需要从预定义的目录中自动完成文件名，所以它看起来像这样：

```
$ cmd log<TAB><TAB>
file1.log file2.log file3.log 
```

文件来自哪里`/var/log/app`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:28:28.103

当 shell 可以单独列出文件时，我看不到使用的意义`ls`，所以这里只使用 shell。

```
_cmd() {
    local files=("/var/log/app/$2"*)
    [[ -e ${files[0]} ]] && COMPREPLY=( "${files[@]##*/}" )
}
complete -F _cmd cmd 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T09:14:44.070

将它们放入`~/.bashrc`

```
_cmd() { COMPREPLY=($(ls /var/log/app)); }    
complete -F _cmd cmd 
```

要编写功能齐全的自动完成功能，
请查看`/etc/bash_completion.d/python`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T14:30:28.740

我发现这可以根据需要工作：

```
COMPREPLY=( $(compgen -W "$(ls /var/log/app/)" -- $cur) ) 
```

感谢[https://unix.stackexchange.com/questions/28283/autocomplete-of-filename-in-directory](https://unix.stackexchange.com/questions/28283/autocomplete-of-filename-in-directory)中的 dogbane ！

# java - 无法绑定 ConnectionPoolDataSource 实例

> ID：10993519
> 
> 赞同：1
> 
> 时间：2012-06-12T09:07:05.113
> 
> 标签：java, database, jdbc, connection-pooling

```
public static void main(String Data[])
{  
        ConnectionPoolDataSource dps;
        try 
        {
            cnt=new InitialContext();
            cnt.rebind("java:comp/env/jdbc/pool/dragon", dps);
        } '
        catch (NamingException ex) 
        {
            Logger.getLogger(Database.class.getName()).log(Level.SEVERE, null, ex);
        }
} 
```

以下是我绑定 ConnectionPoolDataSource 对象的程序，使用 JNDI 在 mysql 中连接数据库。在编译它时，我遇到了一个错误：

***线程“main”中的异常 java.lang.IllegalArgumentException：RegistryContext：要绑定的对象必须是 Remote、Reference 或 Referenceable***

现在我有以下疑问：

1.  如何创建用于连接到 mysql 数据库的远程对象？
2.  如何将数据库名称...等...分配给该远程对象？

`ConnectionPoolDataSource`不提供设置服务器名称、数据库名称等的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:45:43.827

好像你试图使用 JNDI 命名来绑定它......

我建议你一些东西......尝试c3p0池......这对你来说更容易......你可以避免使用JNDI命名......

从以下链接阅读教程，您可以下载 jar 文件.....

[http://www.mchange.com/projects/c3p0/](http://www.mchange.com/projects/c3p0/)

# c# - c# struct数组的并发

> ID：10993521
> 
> 赞同：2
> 
> 时间：2012-06-12T09:07:11.310
> 
> 标签：c#, concurrency, struct, volatile, memory-barriers

给定一个结构数组：

```
public struct Instrument
{
    public double NoS;
    public double Last;
}

var a1 = new Instrument[100]; 
```

以及一个线程任务池，它基于单个元素最多可以由两个线程同时写入，一个用于双字段中的每一个（有效地按主题进行上游排队）来写入这些元素。

并且可以在 64 位上原子地写入 double 的知识。（编辑这个误说原来是32位）

我需要使用数组中的所有值定期执行计算，并且我希望它们在计算期间保持一致。

所以我可以使用以下方法对数组进行快照：

```
var snapshot = a1.Clone(); 
```

现在我的问题是关于同步的细节。如果我让成员变得易变，我认为这根本不会帮助克隆，因为读/写获取/释放不在数组级别。

现在我可以有一个数组锁，但这会在最频繁的向数组中写入数据的过程中增加很多争用。所以不太理想。

或者我可以有一个每行锁，但这将是一个真正的痛苦，因为它们都需要在克隆之前被获取，同时我已经得到了所有的写入备份。

现在，如果快照没有最新的值，如果它只是微秒等问题，这并不重要，所以我想我可能只是没有锁就可以逃脱。我唯一担心的是，是否可能存在持续一段时间没有缓存写回的情况。这是我应该担心的事情吗？编写者在 TPL 数据流中，唯一的逻辑是在结构中设置两个字段。我真的不知道函数范围如何或是否倾向于与缓存回写相关。

想法/建议？

**编辑**：如果我对结构中的变量使用互锁写入怎么办？

**edit2**：写入量远高于读取量。还有两个单独和并发的服务写入 Nos 和 Last 字段。所以它们可以同时被写入。这会导致原子性参考对象方法出现问题。

***编辑3***：更多细节。假设数组包含 30-1000 个元素，并且每个元素可以每秒更新多次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:21:26.357

由于`Instrument`包含两个双精度值（两个 64 位值），因此您不能以原子方式编写它（即使在 64 位机器上也是如此）。这意味着该`Clone`方法在不进行某种同步的情况下永远无法创建线程安全的副本。

**TLDR；不要使用结构，使用不可变类。**

进行一次小的重新设计，您可能会有更多的运气。尝试使用 .NET 框架中的不可变数据结构和并发集合。例如，使您`Instrument`的类成为**不可变类**：

```
// Important: Note that Instrument is now a CLASS!! 
public class Instrument
{
    public Instrument(double nos, double last)
    {
        this.NoS = nos;
        this.Last = last;
    }

    // NOTE: Private setters. Class can't be changed
    // after initialization.
    public double NoS { get; private set; }
    public double Last { get; private set; }
} 
```

这样更新一个`Instrument`意味着你必须创建一个新的，这使得推理更容易。当您确定只有一个线程正在处理单个线程时，`Instrument`您就完成了，因为工作人员现在可以安全地执行此操作：

```
Instrument old = a[5];

var newValue = new Instrument(old.NoS + 1, old.Last - 10);

a[5] = newValue; 
```

因为，引用类型是 32 位（或 64 位机器上的 64 位），所以更新引用保证是原子的。克隆现在将始终生成正确的副本（它可能缺少后面，但这对您来说似乎不是问题）。

**更新**

重新阅读您的问题后，我发现我误读了它，因为一个线程没有写入`Instrument`，而是写入仪器值，但解决方案实际上是相同的：使用不可变引用类型。例如，一个简单的技巧是将`NoS`和`Last`属性的支持字段更改为对象。这使得更新它们是原子的：

```
// Instrument can be a struct again.
public struct Instrument
{
    private object nos;
    private object last;

    public double NoS
    {
        get { return (double)(this.nos ?? 0d); }
        set { this.nos = value; }
    }

    public double Last
    {
        get { return (double)(this.last ?? 0d); }
        set { this.last = value; }
    }
} 
```

当更改其中一个属性时，该值将被装箱，而装箱的值是不可变的引用类型。这样您就可以安全地更新这些属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:26:06.630

> 并且可以在 32 位上原子地写入 double 的知识。

不，不能保证：

> 12.5 变量引用的原子性
> 
> 以下数据类型的读取和写入应是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。此外，具有上一个列表中的基础类型的枚举类型的读取和写入也应该是原子的。其他类型的读取和写入，包括 long、ulong、**double**和 decimal，以及用户定义的类型，不必是原子的。

（强调我的）

对于 32 位或什至 64 位上的双精度，不做任何保证。由 2 个双打组成的A`strcut`更成问题。你应该重新考虑你的策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:32:02.000

你可以（ab）使用`ReaderWriterLockSlim`.

写时取读锁（因为你说写者之间没有争用）。并在克隆时取写锁。

除非真的别无选择，否则我不确定我会这样做。对于维护这一点的人来说，这可能会让人感到困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T15:43:42.763

单个数组元素或单个结构字段的读取和写入通常是独立的。如果当一个线程正在写入特定结构实例的特定字段时，没有其他线程将尝试访问该相同字段，则结构数组将隐式线程安全，除了强制执行上述条件的逻辑之外不需要任何锁定。

如果一个线程可能会`double`在另一个线程正在写入时尝试读取，但两个线程不可能同时尝试写入，则可以采取多种方法来确保读取不会看到部分写入的值。尚未提及的一种方法是定义一个`int64`字段，并使用自定义方法在那里读取和写入`double`值（按位转换它们，并`Interlocked`根据需要使用）。

另一种方法是`changeCount`为每个数组插槽设置一个变量，该变量会递增，因此在写入结构之前，两个 LSB 在其他任何内容之前为“10”，`Interlocked.Increment`之后为 2（参见下面的注释）。在代码读取结构之前，它应该检查是否正在进行写入。如果不是，它应该执行读取并确保写入尚未开始或发生（如果在读取开始后发生写入，则循环回到开头）。如果代码要读取时正在写入，则应获取共享锁，检查写入是否仍在进行中，如果是，则使用互锁操作设置锁的`changeCount`和`Monitor.Wait`上的LSB。编写结构的代码应该在其中注意到`Interlocked.Increment`LSB 已设置，并且应该`Pulse`锁。如果内存模型确保单个线程的读取将按顺序处理，并且单个线程的写入将按顺序处理，并且如果一次只有一个线程会尝试写入数组槽，那么这种方法应该`Interlocked`在非争用情况下，将多处理器开销限制为单个操作。请注意，在使用此类代码之前，必须仔细研究内存模型隐含或不隐含的规则，因为它可能很棘手。

顺便说一句，如果想让每个数组元素成为类类型而不是结构，还有两种方法可以采取：

1.  使用不可变的类类型，并在您想要更新元素的任何时候使用 `Interlocked.CompareExchange`。使用的模式是这样的：

    ```
      MyClass oldVal,newVal;
      做
      {
        oldVal = theArray[下标];
        newVal = new MyClass(oldVal.this, oldVal.that+5); // 或者任何改变
      } while (Threading.Interlocked.CompareExchange(theArray[subscript], newVal, oldVal) != oldVal);

    ```

    这种方法将始终产生数组元素的逻辑正确原子更新。如果在读取数组元素和更新它的时间之间，有其他东西改变了值，`CompareExchange` 将使数组元素不受影响，代码将循环回来并重试。这种方法在没有争用的情况下工作得相当好，尽管每次更新都需要生成一个新的对象实例。但是，如果许多线程试图更新同一个数组槽，并且“MyClass”的构造函数需要花费大量时间来执行，那么代码可能会颠簸，反复创建新对象，然后发现它们已经过时了它们可以存储的时间。代码总是会向前发展，但不一定很快。
2.  使用可变类，并在任何时候希望读取或写入类对象时锁定它们。这种方法将避免在任何更改某些内容时都必须创建新的类对象实例，但锁定会增加其自身的一些开销。请注意，读取和写入都必须被锁定，而不可变类方法只需要在写入时使用“互锁”方法。

我倾向于认为结构数组是比类对象数组更好的数据持有者，但这两种方法都有优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:16:22.423

好的，所以在午餐时考虑一下。

我在这里看到两个，可能是 3 个解决方案。

第一个重要说明：不可变的想法在我的用例中不起作用，因为我有两个服务并行运行，分别写入 NoS 和 Last。这意味着我需要在这两个服务之间增加一层同步逻辑，以确保在一个服务创建新 ref 时，另一个服务不这样做。经典的比赛条件问题，所以绝对不适合这个问题（虽然是的，我可以为每个双打都有一个裁判并这样做，但在那时它变得荒谬）

**解决方案 1** 整个缓存级别锁定。也许使用自旋锁并锁定所有更新和快照（使用 memcpy）。对于我正在谈论的卷，这是最简单的并且可能完全没问题。

**解决方案 2** 使所有对双打的写入都使用互锁写入。当我想要快照时，使用互锁读取迭代数组和每个值以填充副本。这可能会导致每个结构撕裂，但双打是完整的，这很好，因为它不断更新数据，所以最新的概念有点抽象。

**解决方案 3** 不要认为这会起作用，但是对所有双精度进行联锁写入怎么样，然后只使用 memcopy。我不确定我是否会撕裂双打？（请记住，我不在乎结构级别的撕裂）。

如果解决方案 3 有效，那么我猜它的最佳性能，但否则我更倾向于解决方案 1。

# c# - 压缩一个短但重复的字符串

> ID：10993524
> 
> 赞同：2
> 
> 时间：2012-06-12T09:07:20.650
> 
> 标签：c#, .net, compression

我正在开发一个需要在查询字符串（特别是 GET 而不是 POST）上获取文件列表的网络应用程序，例如：

```
http://site.com/app?things=/stuff/things/item123,/stuff/things/item456,/stuff/things/item789 
```

我想缩短那个字符串：

```
http://site.com/app?things=somekindofencoding 
```

字符串不是很长，从 20 到 150 个字符不等。这么短的东西并不适合 GZip，但它确实有很多重复，所以压缩应该是可能的。

我不想要字符串的数据库或字典 - URL 将由与使用它的应用程序不同的应用程序构建。我想要一个可缩短此 URL 的可逆压缩。它不需要是安全的。

有没有现有的方法可以做到这一点？我在 C#/.Net 中工作，但很乐意从其他语言/堆栈中调整算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:33:42.120

如果您可以在 BNF 中表达数据，则可以为数据构建解析器。您可以发送 AST，而不是发送数据，其中每个节点将被标识为一个字符（或者如果您有很多不同的节点，则为多个字符）。在你的例子中

我们可以有

```
files : file files
      | 
file : path id
path : itemsthing
     | filesitem
     | stuffthingsitem 
```

您可以将文件列表表示为 path[id1,id2,...,idn] 使用 0,1,2 作为路径和输入：

```
/stuff/things/item123,/stuff/things/item456,/stuff/things/item789
/files/item1,/files/item46,/files/item7 
```

然后你会得到`?things=2[123,456,789]1[1,46,7]`

其中`/stuff/things/item`用表示`2`，`/files/item/`用其中的`1`每个数字表示`[...]`是一个 id。所以`2[123]`会扩展到`/stuff/things/item123`

**编辑**该方法不必是静态的。如果您必须动态发现重复的项目，您可以使用相同的方法并在标识符和令牌之间传递映射。在这种情况下，上面的例子将是

```
?things=2[123,456,789]1[1,46,7]&tokens=2=/stuff/things/,1=/files/item 
```

如果语法如此简单，当然会做得更好

```
?things=/stuff/things/[123,456,789]/files/item[1,46,7] 
```

使用如此短的字符串将重复的部分压缩到小于唯一值是可能的，但很可能必须基于限制可能的值或在“压缩”时实际增加大小的风险

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:56:06.863

您可以尝试使用原始 deflate 的[zlib](http://zlib.net/)（没有 zlib 或 gzip 标头和预告片）。即使在由可打印字符组成的短字符串上，它通常也会提供一些压缩，并且会寻找并利用重复的字符串。我还没有尝试过，但也可以看看[smaz](https://github.com/antirez/smaz)是否适用于您的数据。

我建议获取大量真实示例 URL，用于对可能的压缩方法进行基准测试。

# javascript - 将客户端模板与主布局分开的好方法

> ID：10993526
> 
> 赞同：1
> 
> 时间：2012-06-12T09:07:21.917
> 
> 标签：javascript, backbone.js, jquery-templates, mustache

处理多个客户端模板的最佳方法是什么？

我注意到如果我将它们保存在我的“母亲”html 文件中，它很快就会变得臃肿，所以我认为如果我将它们放在单独的 js 文件中并一一加载它们会更好。

我的另一个想法是避免将它们作为模板分开放置，而是将它们写成字符串，然后将它们与要使用它们的主干.js 视图结合起来。我知道这会给设计师、网络开发人员和软件工程师带来很多负面影响，但是对于我正在从事的项目来说，这似乎是一种非常快速的开发方式，因为我在同一个地方有逻辑和布局. 另外，通过逆向工程，我证明了许多著名的 Web 服务也在做同样的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:28:32.187

一种选择是使用[RequireJS](http://requirejs.org/)，它包括一个用于模板的[“文本”插件。](http://requirejs.org/docs/api.html#text)

然后，您可以使用[r.js 优化器](http://requirejs.org/docs/optimization.html)将所有这些（加上 JS 模块，如果您走那条路线）组合到一个文件中。

优化器可以作为构建过程的一部分运行，如果您使用的是 node.js，也可以在进程内运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:56:00.543

正如@stusmith 所说，require.js 是一个不错的选择。

另外，看看样板的例子

*   [http://backboneboilerplate.com/](http://backboneboilerplate.com/)
*   [https://github.com/thomasdavis/backboneboilerplate/blob/gh-pages/js/views/backbone/page.js](https://github.com/thomasdavis/backboneboilerplate/blob/gh-pages/js/views/backbone/page.js)

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:16:28.200

您可以将它们放在单独的文件中，但在服务器端合并为一个文件。

并从我那里对您将模板保留在字符串中的想法进行了很多否定:)。它可能会在它们变得简单之前起作用，但是当它们变得更复杂时它会变得很糟糕，因为 html 结构不是那么明显，所以很难编写 css 等等。

# asp.net-mvc-3 - 将模型传递给控制器 动作

> ID：10993527
> 
> 赞同：0
> 
> 时间：2012-06-12T09:07:24.523
> 
> 标签：asp.net-mvc-3, forms, parameter-passing

这是我的看法：

```
@model IDictionary<int, RemoteControl.Core.Slot>

<div style="left: 20px; width: 350px">
<form id="rcForm">
@foreach (var a in Model)
{
    <div id="@a.Key-div">
        <div style="float: left; width: 225px">
            <input type="radio" class="slotRadio" name="slots" id="@a.Key" value="@a.Key"/>@a.Value.Name</div>
        <div>
            <input type="text" readonly="readonly" value="@a.Value.Status" style="width:20px"/>
            <input disabled="disabled" type="submit" class="buttonOperation" id="@a.Key-btnON" value="ON" />
            <input disabled="disabled" class="buttonOperation" type="submit" id="@a.Key-btnOFF" value="OFF" /></div>
    </div>
}
</form>
</div> 
```

此视图从我的 Home Controller 的 Index 操作接收 IDictionary。它显示字典的元素，每个元素对应一个单选按钮。

每个元素都有一个名称和状态。元素的每个单选按钮旁边都有两个按钮：ON 和 OFF。

我希望每次单击 ON/OFF 按钮时，单选按钮中选择的元素的名称和状态都将传递给控制器​​中的操作。我一直在尝试做一个表单集合，但我总是看到只使用输入文本框的例子..所以我怎么能这样做呢？

PS：不要担心只读和禁用的属性......我在我的jquery中用它做一些事情......

# java - TreeMap - 为什么即使在其中添加超过 2 个元素后它只返回一个大小？

> ID：10993533
> 
> 赞同：2
> 
> 时间：2012-06-12T09:07:46.880
> 
> 标签：java, core

```
public class BigD{
    public static void main(String[] args) {

        List<Employee> emps = new ArrayList<Employee>();
        emps.add(new Employee("Bal", "5"));
        emps.add(new Employee("Kiri", "7"));
        emps.add(new Employee("Pad", "2"));

        Map tree = new TreeMap();
        for(int i=0; i<emps.size(); i++) {
            Employee emp = null;
            emp = emps.get(i);
            System.out.println("hashcode : " + emp.hashCode());
           tree.put(emp, emp.getFirstNM()); // why is not keeping all three elements here ?
        }
        System.out.println(tree.size()); //why does it print the size as "1"
    }
}

class Employee implements Comparable {
    private String firstNM;
    private String lastNM;

    Employee(String firstNM, String lastNM) {
        this.firstNM = firstNM;
        this.lastNM = lastNM;
    }

    public String getFirstNM() {
        return firstNM;
    }
    public void setFirstNM(String firstNM) {
        this.firstNM = firstNM;
    }
    public String getLastNM() {
        return lastNM;
    }
    public void setLastNM(String lastNM) {
        this.lastNM = lastNM;
    }

    public int compareTo(Object o) {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

请让我知道为什么树形图“树”只有一个元素是员工对象“Pad”，即使我添加的所有三个员工对象都具有不同的哈希码。是因为我没有覆盖等于/哈希码吗？如果是 - 当所有人都返回不同的哈希码时，我为什么要覆盖您的想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T09:09:10.213

`compareTo()`因为您在方法中比较每个对象相同

```
 public int compareTo(Object o) {
        // TODO Auto-generated method stub
        return 0;
    } 
```

让它像

```
public int compareTo(Object o) {
      return ((this.getFirstName() + this.getLastName()).compareTo((o.getFirstName() + o.getLastName())));
} 
```

这将表示如果两个人的名字和姓氏相同，那么他们是相等的，我建议你有一个人 ID 字段来区分

因此，当它尝试添加另一个实例时，它会发现它与 Key `Set`of 中已添加的实例相同`Map`

使 compareTo 实现正确也覆盖 `equals()`方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:24:19.497

问题是当您将对象放入树形图中时，树形图使用 employee.comparedTo 方法来查看您是否正在输入新键。由于定义了 compareTo 方法每次都返回 0（这意味着两个对象相同），因此每次调用 treeMap.put 时，treeMap 都会认为您将不同的 Employee 值与相同的键对象配对。如果您将 compareTo 更改为返回 -1 或反映对象顺序的适当值，则 treeMap.size() 将返回 3。

# facebook - Facebook Like Image 被裁剪/截断

> ID：10993537
> 
> 赞同：1
> 
> 时间：2012-06-12T09:08:16.160
> 
> 标签：facebook, image, facebook-graph-api, facebook-like

我遇到了一个问题，即在用户单击“赞”按钮后将其拉到用户墙上的图像被裁剪。图片见链接：

[http://imageshack.us/photo/my-images/36/fblikeimage.jpg/](http://imageshack.us/photo/my-images/36/fblikeimage.jpg/)

这是我的 iFrame 代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fmysite.org&amp;send=false&amp;layout=box_count&amp;width=450&amp;show_faces=false&amp;action=recommend&amp;colorscheme=light&amp;font&amp;height=90&amp;appId=1234" 
width="320" height="60"></iframe> 
```

这是我的OG标签：

```
<meta content="123456879" property="fb:app_id"> 
<meta content="sch_donations:donate" property="og:type"> 
<meta content="https://mysite.org/?utm_source=internal&amp;utm_medium=social&amp;utm_content=recommend-on-facebook&amp;utm_campaign=WTH-FB" property="og:url"> 
<meta content="Title text" property="og:title"> 
<meta content="Description text" property="og:description"> 
<meta content="https://mysite.org/image.jpg" property="og:image"> 
<meta content="https://mysite.org/?utm_source=internal&amp;utm_medium=social&amp;utm_content=recommend-on-facebook&amp;utm_campaign=WTH-FB" property="sch_donations:link"> 
```

我想知道是否有其他人遇到过这个问题？你能在我的代码中看到任何可能导致这种情况的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:28:05.040

我认为图像是问题......它的原始尺寸是多少？如果图像的高度和宽度不相等，Fb 往往会像这样裁剪它......

# asp.net - 根据mvc3 asp.net中的条件确定html标签的内容

> ID：10993538
> 
> 赞同：0
> 
> 时间：2012-06-12T09:08:18.907
> 
> 标签：asp.net, html, asp.net-mvc-3, razor

这听起来很基本，但我找不到答案。

我将 Message 结构传递给 View，我想显示它。

如果 Message.Category 字段是“技术”，我想显示“技术问题”，否则就按原样显示。

如何让视图理解技术问题不是陈述，而是我要显示的 html 文本？

我的代码：

```
<span class="cright" id="cat">
@{
    if (String.Compare(ViewBag.Message.Category, "Technical") == 0) 
    {
     Technical Problem <----THIS  
    } 
    else @ViewBag.Message.Category
 }
</span> 
```

更多信息：我正在开发一个消息传递系统。用户创建一条消息，并在发送消息时查看它。该类别是强制性的（问题、建议或技术问题），为了避免数据库中的冗余，我将最后一个选项截断为“技术”，但是当用户查看他们发送的消息时，我希望它完整显示。

谢谢大家; 从我得出的所有答案中：

```
<span class="cright" id="cat">

      @if (ViewBag.Message.Category == "Technical ")
         {<text>Technical Problem</text>}
       else
         {<text>@ViewBag.Message.Category</text>}

</span> 
```

就像我想要的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:11:55.083

这是你想要的？

 ~~~~```
@("Technical Problem") 
```~~  ~~或者

```
<text>Technical Problem</text> 
```

或者

```
@:Technical Problem 
```

阅读[http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)了解语法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:12:57.847

您可以使用

```
<text>Technical Problem</text> 
```

为了这。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:21:23.283

**原始答案**

```
if(ViewBag.Message.Category == "Technical")
{
  <span>Technical problem</span>
}
else
{
  <span>Problem is : @(ViewBag.Message.Category)</span>
} 
```

**更新的答案**

```
 //Model
   public class Message
   {
      public int ID {get; set;}
      public string Message {get; set;}
      public string Category {get; set;}
   }

   //Controller
    public ActionResult Index()
    {
      //If you use Linq to Sql, I made this up but this should give you an idea

      using(MessageDataContext context = new MessageDataContext())
      {
        var messages = context.Messages.Where(m => m.Category == "Technical")
       .Select(m => new Message { ID = m.ID, Message = m.Text, Category = m.Category});

        return View(messages);
      }
    }

//View
@model IEnumerable<Message>

@foreach(var message in Model)
{
    if(message.Category == "Technical")
    {
      //Id and class will be "TechnicalMessage1"
      //Now you can create css class called "TechnicalMessage1" and only message with Id = 1 will have it
      <span id="@(message.Category)Message@(message.ID)" class="@(message.Category)Message@(message.ID)">Technical problem</span>
    }
    else
    {
      <span>Problem is : @(ViewBag.Message.Category)</span>
    }
} 
```~~~~

# c# - 网页上的 UNDO 功能使用哪种类型的集合

> ID：10993539
> 
> 赞同：1
> 
> 时间：2012-06-12T09:08:21.790
> 
> 标签：c#

我正在使用 Asp.net 和 C#，我需要为网络空间创建和 UNDO 功能。

我想知道最合适的 Collection。

数组、哈希表、字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:11:52.413

由于您希望以执行时的相反顺序撤消推荐，因此`Stack<T>`将适合您的需要。然后，您可以在执行命令后将命令推送到堆栈上，并在您希望撤消时弹出它们

# jquery-ui - 从列表行中的图标拖动时允许列表重新排序

> ID：10993543
> 
> 赞同：0
> 
> 时间：2012-06-12T09:08:32.183
> 
> 标签：jquery-ui, jquery-ui-sortable

我正在使用 JQuery UI Sortable 来允许在拖动元素时对列表中的元素进行重新排序。我想通过仅在从每个元素中存在的图标（此图标是 li 中的跨度）而不是整个元素中拖动时才允许重新排序来改进此处理。

可以用 Sortable 做到这一点吗？

非常感谢您的帮助！蒂埃里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:02:44.373

是的，jQuery-UI 提供了一个“句柄”选项：

> [http://jqueryui.com/demos/sortable/#option-handle](http://jqueryui.com/demos/sortable/#option-handle)
> 
> 限制排序开始点击指定元素...
> 
> 使用指定的句柄选项初始化可排序。
> 
> ```
> $( ".selector" ).sortable({ handle: 'h2' }); 
> ```

# mysql - 在 SQL 中更改列类型

> ID：10993546
> 
> 赞同：1
> 
> 时间：2012-06-12T09:08:39.730
> 
> 标签：mysql, sql

嘿，我有一个 SQL 表，其中有一列用于存储日期，但日期列的类型为 varchar。我想将类型更改为日期，但我不希望该列中的实际数据丢失。我怎样才能做到这一点。

手动备份表格然后输入每个条目？还是有其他很酷的方法可以做到这一点？其实数据很大

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:14:56.880

我这样做的方式：

(1) 添加新列：

```
ALTER TABLE yourtable 
ADD COLUMN `new_date` DATE NULL AFTER `views`; 
```

(2) 更新新列

```
UPDATE yourtable SET new_date = old_date; 
```

注意`old_date`. 如果它不是 formatted `yyyy-mm-dd`，您可能必须在此-statement中进行[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)一些字符串替换以适合您的目的。`UPDATE`

*例子：*

如果您的数据如下所示：`mmmm dd, yyyy, hh:mm`(pe `May 17, 2012, 8:36 pm`) ，您可以像这样更新：

```
UPDATE yourtable
SET new_date = STR_TO_DATE(old_date, "%M %e, %Y"); 
```

[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)基本上逆向工程师将字符串数据转换为日期值。

(3) 删除旧列

```
ALTER TABLE yourtable 
DROP COLUMN `old_date`; 
```

(4) 重命名新列

```
ALTER TABLE yourtable 
CHANGE `new_date` `old_date` DATE NULL; 
```

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:13:20.477

关于什么：

1）添加具有正确类型的新列

2）用解析的日期更新你的新列

3）删除旧列

更新以填充日期模式解析要求：

```
SELECT STR_TO_DATE('May 17, 2012, 8:36 pm','%M %d, %Y'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:12:10.883

使用此查询：

```
ALTER TABLE tablename MODIFY COLUMNNAME Datatype 
```

例如

```
ALTER TABLE Users MODIFY RegisterDate DateTime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:12:35.033

添加具有所需数据类型的新列，然后运行 ​​UPDATE 查询以将数据从旧列复制到新列。然后删除旧列。

请注意，您可能必须使用 CONVERT 函数将日期字符串转换为日期时间。

# iphone - 当用户从 iphone 中删除我的应用程序时，是否有一个方法被调用

> ID：10993549
> 
> 赞同：0
> 
> 时间：2012-06-12T09:08:50.637
> 
> 标签：iphone, xcode

我想知道是否有办法知道用户是否（永久）从他的 iphone 中删除了我的应用程序。

（我想处理这种事件，以便从我服务器上的数据库中删除它）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:09:41.463

简单的答案。不。您最好的选择是检查 x 时间的不活动状态，并假设这意味着它已被删除。

# gem - Sass / Compass CSS3 混合不工作

> ID：10993556
> 
> 赞同：6
> 
> 时间：2012-06-12T09:09:00.653
> 
> 标签：gem, sass, compass-sass

我刚开始使用 sass 和 compass 之类的东西，编写自己的 mixins 效果很好，等等……所以 SASS 似乎工作正常。

起初发现 compass 听起来很棒，但我有一个问题，即默认的 CSS3-Supported-Mixins 无法正常工作。

创业板版本：1.8.24

SASS 版本：3.1.19

指南针版本：0.12.1

我的屏幕.scss

```
@import "compass/reset";

.bam {
  @include border-radius(5px);
} 
```

我通过创建项目`compass create myProject`。随后使用`cd myProject`. 紧随其后`compass watch`。

写上面提到的`.scss`我收到以下错误消息

```
Change detected at $time to: screen.scss
error sass/screen.scss <Line 11: Undefined mixin 'border-radius'.> overwrite stylesheets/screen.css 
```

指南针手册没有说明需要更多配置。所以我有点卡在这里。任何帮助将不胜感激！

**解决方案**

尽管我以前在测试中也这样做过，但解决方案实际上是通过以下方式包含所需的 Compass “类”`@import "compass/css3"`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T09:48:46.907

问题是我没有导入 compass/css3 依赖项。这是通过添加`@import "compass/css3"`到 .scss 文件来完成的

# jquery - JQuery colorbox 奇怪的行为

> ID：10993557
> 
> 赞同：1
> 
> 时间：2012-06-12T09:09:06.847
> 
> 标签：jquery, html, colorbox

我有一个奇怪的问题。我实际上在插件 jquery.colorbox.js 上工作。我的程序的目的是显示一个简单的 html 页面，其中包含指向显示图像的颜色框的链接。问题来自与css文件的链接。如果我把 URL href="colorbox.css" 它完美地工作，但是有了这个 href="css/colorbox.css" 动画似乎很好，但没有背景，颜色框只是一个带有图像的白色方块正确显示在其中心。但是所有酷炫的效果都不存在。

我的主项目文件夹中有 3 个文件夹以及 index.html 和文件 colorbox.css 的副本：

文件夹图像：palmiers.jpg
文件夹 css：colorbox.css
文件夹 js：jquery.min.js jquery.colorbox-min.js

文件：colorbox.css
文件：index.html

下面是 index.html 文件的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
    <head>
        <title>ColorBox Examples</title>
        <style>
            body
            {
                background-color:#666;
            }
        </style>
        <link rel="stylesheet" media="screen" type="text/css" href="css/colorbox.css"/>
        <script language="javascript" src="js/jquery.min.js"></script>
        <script language="javascript" src="js/jquery.colorbox-min.js"></script>
        <script>
            $(document).ready(function(){
                $("#image").colorbox({width:'500', height:'500'});
            });
        </script>
    </head>
    <body>
        <p><a id="image" href="images/palmiers.jpg">link to the lightBox</a></p>
    </body>
</html> 
```

所以如果我改变这行代码：

```
<link rel="stylesheet" media="screen" type="text/css" href="css/colorbox.css"/> 
```

经过 ：

```
<link rel="stylesheet" media="screen" type="text/css" href="colorbox.css"/> 
```

颜色框显示正确。但我想将我所有的 css 文件放到 css 文件夹中。为什么当我更改链接时我有两种不同的行为？这两个 colorbox.css 文件完全相同。

有人可以帮助我吗？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:16:38.137

不确定这个问题是否真的与您的任何标签有关，这更像是一个简单的参考问题。

您可以通过在路径前加上一个字符来指定“绝对”路径，前提`/`是您的“css”文件夹是根目录文件夹，那么这应该可以工作......

```
<link rel="stylesheet" media="screen" type="text/css" href="/css/colorbox.css"/> 
```

没有`/`前缀，您实际上是在声明“相对”路径，这意味着完整路径将从当前目录开始（即当前文件所在的任何位置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:42:18.323

你看到的是插件没有找到它自己的图像资产（不是你的图像）的结果。

ColorBox 自己的 CSS 文件是指它使用的图像资源。它假设这些资产将存储在哪里。要使用任意位置，您需要编辑 ColorBox 自己的 CSS 文件以使用该位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:12:57.703

尝试使用您的项目 url 在 head 标签内添加基本标签，例如：

```
<head>
<base href="http://your_site_url" /> 
```

不确定，但这可能会有所帮助

# rest - (Jquery) Ajax 中的 beforeSend 函数有什么用

> ID：10993562
> 
> 赞同：1
> 
> 时间：2012-06-12T09:09:14.103
> 
> 标签：rest, jquery, jersey

`beforeSend`jQuery Ajax中的 Function 有什么用？

如何使用jQuery函数？

我正在使用 jQuery 1.6.0，并在服务器端使用 Jersey API（Restful Web 服务）。

```
$.ajax({

    type: "GET",
    url:ajax_url,
    dataType: "json",
    contentType: "application/json",                    
    async: false,
    beforeSend: function (xhr){ 
xhr.setRequestHeader('Authorization', "Basic "+ btoa(username + ':' + password)); 
    },
    success:function(data){
        alert(data.groups);
    },
    error:function(xhr,err){
        console.log("readyState:"+xhr.readyState+"\nstatus: "+xhr.status)
        alert(xhr.responseText)
        alert("Service is not Available , Try it after Some time");
    }
}); 
```

Java 代码：

```
@GET

@Produces(MediaType.APPLICATION_JSON)

public String authCheck(){

return "({"groups": "success"})";

} 
```

每当我发送身份验证时，我都会收到成功响应。

如何使用`beforeSend`功能，我们需要在服务器端做任何事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:53:48.853

通常`beforeSend()`用于在实际发送 AJAX 请求之前做一些事情，例如设置自定义标头等...

但是您的需求不同，您希望在 ajax 调用之前对用户进行身份验证，而不是

创建另一个功能，使您的用户已通过身份验证或未响应，假设此功能是`checkAuth();`

所以用

```
type: "GET",
    url:ajax_url,
    dataType: "json",
    contentType: "application/json",                    
    async: false,
    beforeSend:checkAuth,

.
.
. 
```

# java - Netbeans 找不到或加载主类

> ID：10993563
> 
> 赞同：0
> 
> 时间：2012-06-12T09:09:15.130
> 
> 标签：java, netbeans

我有一个项目名称 JavaApplication3 并将其放在`D:\\`. 但是当我构建项目时，编译器说：

```
Error: Could not find or load main class javaapplication3.JavaApplication3. 
```

但是当我将我的项目移到`C:\\User\\Administrator`它的工作时。

**我应该怎么做才能将我的项目放到另一个地方但它仍然可以工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:12:08.800

我正在使用具有以下规格的 Netbeans：

产品版本：NetBeans IDE 7.0.1（内部版本 201107282000）Java：1.7.0_09；Java HotSpot(TM) Client VM 23.5-b02 系统：在 x86 上运行的 Windows XP 5.1 版；CP1252; en_US (注)

还可以关闭保存时自动编译的选项，然后打开您要运行的文件，进行一些微小的编辑，保存并重新编译它。

此外，我发现擦除/删除 netbeans 自动创建的所有临时文件也是一种很好的做法。在我的系统上，这些位于 C:\temp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:17:31.863

右键单击项目节点 > 项目属性 > 运行 > 选择主类。

[MANIFEST.MF](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/manifest.html)文件描述了将哪个类视为主类。

# iphone - 苹果拒绝了我们最新的应用程序

> ID：10993567
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:09:34.570
> 
> 标签：iphone, ios, xcode, app-store, appstore-approval

我们最新的应用程序被拒绝，原因如下

“当用户启动应用程序时，会产生一个空白的黑屏”

我们对此进行了多次测试，并没有注意到这个问题。我们现在再次测试，但它对我们来说工作正常。

有人可以帮助我们找出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:12:14.583

我认为没有人可以帮助您找到此问题，我的建议是跟进审核小组并尝试从他们那里获取尽可能多的信息。例如，它是在什么设备上测试的，什么操作系统版本等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:14:43.520

啊，应用商店流程的许多困境。确保您不仅在模拟器上而且在物理设备上测试了您的应用程序。其次，问题可能是您对设备上的数据做出了一些（错误的）假设，您可能已经手动放置了这些数据，但在重新安装时没有处理。

因此，攻击计划可能是从设备和模拟器中删除完整的应用程序，并尝试从全新安装而不是在已安装的安装之上运行它们。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:15:30.600

尝试从干净的状态构建和安装您的应用程序。您可能看到的与审阅者不同，因为如果您一直只“构建并运行”，那么不属于最终构建的旧文件仍然存在于您的设备或模拟器中。

所以清理构建文件夹，从设备中删除应用程序，然后重试。此外，请检查您的应用是否可以在没有互联网连接的情况下运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:13:02.367

最好的办法是直接与 Apple 人员（解决中心）讨论这个问题。

# android - Android图像文件大小限制以及如何处理大图像？

> ID：10993568
> 
> 赞同：1
> 
> 时间：2012-06-12T09:09:37.190
> 
> 标签：android, image

如果我们使用大图像（位图），我们最终会在图像允许的大小（以便显示）上碰壁。我想知道是否有人知道这个限制在哪里？这有很多因素，手机的最大堆大小等。

如果您想显示大图像并使其具有交互性，是否有任何解决方法来处理大图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:18:28.173

如果您已经解码了图像数据，则可以将它们存储在存储上的文件中，然后映射此缓冲区。

[然后您可以通过createBitmap 函数](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int%5B%5D,%20int,%20int,%20int,%20int,%20android.graphics.Bitmap.Config%29)在此缓冲区上创建子图像（图块）

MMapped 内存区域不计入堆，不受垃圾收集的影响，并且由分页子系统处理，绕过通常的文件操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:19:23.330

要压缩大图像尺寸，您可以使用

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:13:53.850

如果要全屏显示整个图像，请将其委托给内置应用程序：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(uri, "image/jpeg");
startActivity(i); 
```

当您想将其显示为缩略图等时，请阅读[此文档](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T21:47:05.947

This article talks about working with large bitmaps and dealing with memory constraints. It also talks about a few factors that cause the OutOfMemoryErrors such as heap size, other bitmaps loaded into memory and memory fragmentation. Finally, it provides an algorithm to dynamically load the largest possible image file into memory and perform transforms.

[http://bricolsoftconsulting.com/handling-large-images-on-android/](http://bricolsoftconsulting.com/handling-large-images-on-android/)

# firefox - 关闭 Firefox 13 中的内置 rss 阅读器

> ID：10993569
> 
> 赞同：4
> 
> 时间：2012-06-12T09:09:41.370
> 
> 标签：firefox, selenium, rss, automated-tests, molybdenum

几年前，我使用[Molybdenum](https://www.molyb.org/confluence/display/molyb/Home)为 web 应用程序设计了一堆自动测试。其中一些通过 xml 解析器检查了 rss 提要中显示的数据。测试要求浏览器将 rss 显示为一个简单的 xml 文件。

当时我设法关闭了 firefox 内置 rss 阅读器，[更改了 feedconverter.js 文件中的参数](http://www.walkernews.net/2007/11/20/how-to-view-rss-feed-in-xml-format-with-firefox/)。随着 Firefox（4.0 到现在）的主要更新，这个文件丢失了，开发人员似乎没有为这种技巧留下任何空间。

你知道关闭内置 rss 阅读器的本地方法吗？

PS = 使用*视图源的解决方案：* URL 后缀在这种情况下不起作用，因为*打开*命令会回答**失败：访问受限 URI 被拒绝**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:41:03.130

**不起作用**的事情：

*   将“Web feed”内容处理程序设置为“在 Firefox 中预览”（显示格式化的 HTML 版本，而不是纯文本 XML）
*   设置[`browser.feeds.handler`](http://kb.mozillazine.org/Browser.feeds.handler)为“阅读器”（这是`about:config`上面的替代方法）或其他任何内容。没有`plaintext`选择。
*   在个人资料文件夹中编辑`mimeTypes.rdf`- Firefox 似乎并不关心那里的提要设置
*   添加带有 URI的新 Web[内容处理程序](http://kb.mozillazine.org/Browser.contentHandlers.types.%2a.uri)`view-source:%s`- 我认为它非常接近，但 Firefox 会转义转发的 URL 并拒绝打开它
*   [`storeHtmlSource`](https://www.molyb.org/confluence/display/molyb/HtmlSource-accessor-selcore)因为它太聪明了，并且确实返回了格式化页面的代码，而不是 XML 源代码

# c# - C# ThreadStatic + volatile 成员未按预期工作

> ID：10993574
> 
> 赞同：6
> 
> 时间：2012-06-12T09:10:00.653
> 
> 标签：c#, multithreading, volatile, threadstatic

我正在阅读[提示和技巧](https://stackoverflow.com/questions/9033/hidden-features-of-c/59691#59691)帖子，我想我会尝试一些我以前从未做过的 C# 东西。因此，下面的代码没有实际用途，只是一个“测试功能”，看看会发生什么。

无论如何，我有两个静态私有字段：

```
private static volatile string staticVolatileTestString = "";
[ThreadStatic]
private static int threadInt = 0; 
```

如您所见，我正在测试**ThreadStaticAttribute**和**volatile**关键字。

无论如何，我有一个看起来像这样的测试方法：

```
private static string TestThreadStatic() {
    // Firstly I'm creating 10 threads (DEFAULT_TEST_SIZE is 10) and starting them all with an anonymous method
    List<Thread> startedThreads = new List<Thread>();
    for (int i = 0; i < DEFAULT_TEST_SIZE; ++i) {
        Thread t = new Thread(delegate(object o) {
            // The anon method sets a newValue for threadInt and prints the new value to the volatile test string, then waits between 1 and 10 seconds, then prints the value for threadInt to the volatile test string again to confirm that no other thread has changed it
            int newVal = randomNumberGenerator.Next(10, 100);
            staticVolatileTestString += Environment.NewLine + "\tthread " + ((int) o) + " setting threadInt to " + newVal;
            threadInt = newVal;
            Thread.Sleep(randomNumberGenerator.Next(1000, 10000));
            staticVolatileTestString += Environment.NewLine + "\tthread " + ((int) o) + " finished: " + threadInt;
        });
        t.Start(i);
        startedThreads.Add(t);
    }

    foreach (Thread th in startedThreads) th.Join();

    return staticVolatileTestString;
} 
```

我希望看到从这个函数返回的是这样的输出：

```
thread 0 setting threadInt to 88
thread 1 setting threadInt to 97
thread 2 setting threadInt to 11
thread 3 setting threadInt to 84
thread 4 setting threadInt to 67
thread 5 setting threadInt to 46
thread 6 setting threadInt to 94
thread 7 setting threadInt to 60
thread 8 setting threadInt to 11
thread 9 setting threadInt to 81
thread 5 finished: 46
thread 2 finished: 11
thread 4 finished: 67
thread 3 finished: 84
thread 9 finished: 81
thread 6 finished: 94
thread 7 finished: 60
thread 1 finished: 97
thread 8 finished: 11
thread 0 finished: 88 
```

但是，我得到的是：

```
thread 0 setting threadInt to 88
thread 4 setting threadInt to 67
thread 6 setting threadInt to 94
thread 7 setting threadInt to 60
thread 8 setting threadInt to 11
thread 9 setting threadInt to 81
thread 5 finished: 46
thread 2 finished: 11
thread 4 finished: 67
thread 3 finished: 84
thread 9 finished: 81
thread 6 finished: 94
thread 7 finished: 60
thread 1 finished: 97
thread 8 finished: 11
thread 0 finished: 88 
```

输出的后半部分与预期的一样（我想这意味着 ThreadStatic 字段的工作方式与我想的一样），但似乎一些初始输出已从前半部分“跳过”。

~~此外，前“半”中的线程乱序，但我知道线程不会在您调用 Start() 后立即运行；但相反，内部操作系统控件将按照它认为合适的方式启动线程。~~ 编辑：不，他们不是，实际上，我只是认为他们是因为我的大脑错过了连续的数字

* * *

所以，我的问题是：导致我在输出的前“一半”中丢失几行的问题是什么？例如，' *thread 3 setting threadInt to 84* '这一行在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T09:27:19.687

线程同时执行。概念上发生的是这样的：

```
staticVolatileTestString += Environment.NewLine + "\tthread " + ((int) o) + " setting threadInt to " + newVal; 
```

1.  线程 1 读取 staticVolatileTestString
2.  线程 2 读取 staticVolatileTestString
3.  线程 3 读取 staticVolatileTestString
4.  线程 1 追加内容并写回 staticVolatileTestString
5.  线程 2 追加内容并写回 staticVolatileTestString
6.  线程 3 追加内容并写回 staticVolatileTestString

这会导致您的线路丢失。挥发性在这里没有帮助。连接字符串的整个过程不是原子的。您需要围绕这些操作使用锁定：

```
private static object sync = new object();

lock (sync) {
    staticVolatileTestString += Environment.NewLine + "\tthread " + ((int) o) + " setting threadInt to " + newVal;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:28:25.043

MSDN 描述了关键字`volatile`在[这里](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.80%29.aspx)的作用：

> volatile 关键字表示一个字段可能被多个并发执行的线程修改。声明为 volatile 的字段不受假设由单个线程访问的编译器优化的影响。这确保了字段中始终存在最新的值。

这意味着，在您的示例中，会发生什么*（*这可能会不时变化；取决于调度程序）：

*   线程 0 正在读取字符串`staticVolatileTestString`
*   线程 0 正在附加“线程 0 将 threadInt 设置为 88”
*   线程 0 正在将字符串写回`staticVolatileTestString`

到目前为止，这与预期的一样，但是随后：

*   线程 1-4 正在读取字符串`staticVolatileTestString`
*   线程 1 正在附加“线程 1 将 threadInt 设置为 97”
*   线程 2 正在附加“线程 2 将 threadInt 设置为 11”
*   线程 2 正在将字符串写回`staticVolatileTestString`
*   ...线程 1、2、3 正在读取和附加，以及正在写入
*   **线程 4 正在将字符串写回`staticVolatileTestString`**
*   等等...

看看这里发生了什么？线程 4 读取字符串 'thread 0 setting threadInt to 88'，附加它的 'thread 4...' 并将其写回，覆盖线程 1、2 和 3 已经写入字符串的所有内容。

# asp.net - 提交按钮不适用于更新面板中的验证器

> ID：10993579
> 
> 赞同：1
> 
> 时间：2012-06-12T09:10:27.423
> 
> 标签：asp.net, updatepanel, validation, requiredfieldvalidator

```
<asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Always">
    <ContentTemplate>
        <asp:ListView ID="EditModeListView" runat="server" DataSourceID="DataSourceWrite">
            <itemtemplate>
                <tr class="cat" onclick="return ApplyTRToggle(this);">
                    <td colspan="5"><img src="/_layouts/images/COLLAPSE.GIF" class="toggle-img"/>  <%# Eval("Cat.CategoryName")%></td>
                </tr>
                <asp:ListView ID="SubListView" runat="server" DataSource='<%# Eval("Blocks") %>'  >
                    <ItemTemplate>
                        <tr class="sec" onclick="return ApplyTRToggle(this);">
                            <td></td>
                            <td><img src="/images/COLLAPSE.GIF" /><%# Eval("Block.CategoryName")%> </td>
                            <td></td>
                            <td><%# Eval("StringFormat") != null ? String.Format(Eval("StringFormat").ToString(), Eval("BlockSum")):Eval("BlockSum") %></td>
                            <td>
                                <asp:ListView ID="SuberListView" runat="server" DataSource='<%# Eval("Crits") %>'  >
                                    <ItemTemplate>
                                        <tr>
                                            <asp:HiddenField ID="Identifier" runat="server" Value='<%# DataBinder.Eval(Container.DataItem, "ValueID")%>' />
                                            <td></td>
                                            <td><%# Eval("Crit.CategoryName")%></td>
                                            <td><%# Eval("CritUnit")%></td>
                                            <td>
                                                <asp:HiddenField runat="server" ID="IsDecimalController" Value='<%# DataBinder.Eval(Container.DataItem, "IsDecimal")%>' />
                                                <asp:TextBox runat="server" ID="ValueControl" Text='<%# DataBinder.Eval(Container.DataItem, "CritSum")%>' MaxLength="12"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="ErrorMSG" ValidationGroup="NumbersValidation" ControlToValidate="ValueControl" Display="Dynamic"></asp:RequiredFieldValidator>
                                                <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ValidationExpression='<%# Const.FLOAT_DIGITALS%>' ValidationGroup="NumbersValidation" ErrorMessage="ErrorMSGG" ControlToValidate="ValueControl" Display="Dynamic" />
                                            </td>
                                            <td><%# DataBinder.Eval(Container.DataItem ,"Crit.Comment")%></td>
                                        </tr>
                                    </ItemTemplate>
                                    <LayoutTemplate>
                                        <div ID="itemPlaceholder" runat="server"></div>
                                    </LayoutTemplate>
                                </asp:ListView> 
                            </td>
                        </tr>
                    </ItemTemplate>
                    <LayoutTemplate>
                        <tr ID="itemPlaceholder" runat="server"></tr>
                    </LayoutTemplate>
                </asp:ListView>
            </itemtemplate>
            <layouttemplate>
                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                        <div runat="server" ID="itemPlaceholder">
                        </div>
                    </table>
                <div class="indicators-toolbar">
                    <asp:Button runat="server" ID="saveButton" Text="Save" ValidationGroup="NumbersValidation" CausesValidation="true" onclick="saveButton_Click"/>
                    <asp:Button runat="server" ID="cancelButton" Text="Cancel" CssClass="ms-ButtonHeightWidth" CausesValidation="false" onclick="cancelButton_Click"/>
                </div>
            </layouttemplate>
        </asp:ListView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

那在我的用户控制中。问题是当没有输入有效文本或在触发必填字段验证器并显示错误文本时留空`<asp:TextBox runat="server" ID="ValueControl" Text='<%# DataBinder.Eval(Container.DataItem, "CritSum")%>' MaxLength="12"></asp:TextBox>`。然后按提交按钮，没有任何反应，但是在文本框中输入正确文本并且没有验证器触发提交按钮不起作用。如何解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:26:45.747

当点击按钮触发ajax触发器时.....它可能对你有帮助

```
 </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="imgbtnSubmit" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel> 
```

# activemq - 消费者在动态创建时不消费消息

> ID：10993582
> 
> 赞同：0
> 
> 时间：2012-06-12T09:10:51.370
> 
> 标签：activemq, producer-consumer

我正在学习在我的项目中实现活动 mq 接口。这就是我创建生产者和消费者的方式。

```
public void connectionSetup(String portName) { // portname is object of PortTO class.   We are creating producer and consumer pair for every existing PortTO object.
            Connection connection = null; 
            try { 

                    if (timeToLive != 0) { 

                    } 

                    // Create the connection. 
                    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(user, password, url); 
                    connection = connectionFactory.createConnection(); 

                    connection.start(); 
                    connection.setExceptionListener(this); 

                    // Create the session 
                    Session session = connection.createSession(transacted, Session.AUTO_ACKNOWLEDGE); 
                    if (topic) { 
                            destination = session.createTopic(subject); 
                    } else { 
                            destination = session.createQueue(portName); 
                    } 

                    // Create the producer. 
                    MessageProducer producer = session.createProducer(destination);                        if (persistent) { 
                            producer.setDeliveryMode(DeliveryMode.PERSISTENT); 
                    } else { 
                            producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT); 
                    } 

                    MessageConsumer consumer = session.createConsumer(destination);                        if (timeToLive != 0) 
                            producer.setTimeToLive(timeToLive); 

                    mapOfSession.put(portName, session); 
                    mapOfMessageProducer.put(portName, producer); 
                    mapOfMessageConsumer.put(portName, consumer);                        log.info("Producer is " + producer); 
                    log.info("Consumer is " + consumer); 

            } catch (Exception e) { 

                    log.error(e.getMessage()); 
            } 
    } 
```

因此，我们正在创建生产者和消费者，并将它们存储在每个 PortTO 对象的映射中。现在，生产者正在发送消息：

```
TextMessage message = session.createTextMessage(); 
 message.setIntProperty(key, 2); 
  producer.send(message); 
```

但是消费者并没有消费它...

```
 public void onMessage(Message message) { 
            PortService portService = new PortService();      
           List<PortTO> portTOList = portService.getMoxaPorts(); 
                    for(PortTO portTO : portTOList) {  // catching messages from producers of every PortTO object                                
              MessageConsumer consumer = DataCollectionMessageProducer.getMapOfMessageConsumer().get(portTO.getPort());  // getting consumer from map of PortTO
                            consumer.setMessageListener(this); 
                            message = consumer.receive(1000);                                if (message instanceof TextMessage) { 
            / / some processing 
                         } 
                            } else { 
                                    if (verbose) { 

                                    } 
                            } 

                    } 
                    } 
```

可能是什么原因？我的方法错了吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:14:25.933

您正在 onMessage 方法中设置 messageListener。这是第 22 个问题，因为仅当 messageListener 设置为该对象时才会调用 onMessage 方法。

另一件事，我不确定您为什么要在消息侦听器中接收。一旦将队列中的每条消息设置为侦听器，就会为队列中的每条消息调用 onMessage，并且每条接收到的消息的逻辑都应该以事件驱动的方式驻留在其中。至少，这首先是 JMS 的想法

# android - View.onClickListner 未从其他类调用

> ID：10993583
> 
> 赞同：2
> 
> 时间：2012-06-12T09:10:52.570
> 
> 标签：android, android-alertdialog

参考我之前的问题，[按钮未显示在 alertDialog 中](https://stackoverflow.com/questions/10991805/button-not-shown-in-alertdialog#comment14360203_10991805)

我正在创建一个扩展 AlertDialog 的类。在课堂上，我正在设置具有按钮的 xml 内容，但我的按钮没有响应。我的自定义警报 java 文件是

```
public class DateTimeDialog extends AlertDialog{

    Date date;
    String title;
    View.OnClickListener listner;
    protected DateTimeDialog(Context context, String title, Date date ) {
        super(context, android.R.style.Theme_Holo_Light_Dialog);
        // TODO Auto-generated constructor stub
        this.title = title;
        this.date = date;
    }

    public void initListener(View.OnClickListener listner){
        this.listner = listner;
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        //super.onCreate(savedInstanceState);
        setContentView(R.layout.date_time_picker);

        setTitle(title);

        Button dialogButtonOK = (Button) findViewById(R.id.btn_ok);
        // if button is clicked, close the custom dialog
        dialogButtonOK.setOnClickListener(listner);

        Button dialogButtonCancel = (Button) findViewById(R.id.btn_cancel);
        // if button is clicked, close the custom dialog
        dialogButtonCancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View dialog) {
                // TODO Auto-generated method stub

            }
        });

    } 
```

我调用这个类的方法是

```
final DateTimeDialog dateTimeDialog = new DateTimeDialog(context, "Title", date);
           dateTimeDialog.show();
           dateTimeDialog.initListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    //done something
                }
            }); 
```

问题是单击时未调用我的确定按钮，但调用了取消。我不知道我哪里错了。请帮忙！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:13:48.563

试试这个：

```
public void initListener(View.OnClickListener listner){
    this.listner = listner;
    Button dialogButtonOK = (Button) findViewById(R.id.btn_ok);
    dialogButtonOK.setOnClickListener(listner);
} 
```

# android - 如何从活动中识别或获取片段中配置的元素的ID [水平分页]

> ID：10993584
> 
> 赞同：1
> 
> 时间：2012-06-12T09:10:52.680
> 
> 标签：android

有没有办法从FragmentActivity的子类中获取元素id，元素是通过Fragment子类配置的？

有 2 个布局 xml 文件。这两个布局 xml 使用 2 个 Fragment 类作为 Fragment1 和 Fragment2 进行配置。

这两个Fragment类通过FragmentPagerAdapter子类和viewpager标签配置为FragmentActivity子类，实现水平分页。

layout1.xml 有 2 个文本视图元素。其中一个是静态和固定的文本，另一个是用倒计时时间更新的。layout2.xml 有一个 EditText 字段和一个提交按钮。当用户在编辑文本中输入文本并单击提交按钮时，EditText 字段的文本值将被捕获到 FragmentActivity 类中。

请帮我。

迷你吧。

# c++ - 在 Linux 上编写多线程 TCP 服务器

> ID：10993586
> 
> 赞同：6
> 
> 时间：2012-06-12T09:11:03.490
> 
> 标签：c++, linux, multithreading, sockets, pthreads

在工作中，我的任务是实现 TCP 服务器作为 Modbus 从设备的一部分。我在堆栈交换和一般互联网上都做了很多阅读（包括优秀的[ht​​tp://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)），但我正在努力解决设计问题。总之，我的设备只能接受 2 个连接，并且每个连接上都会传入 modbus 请求，我必须在主控制器循环中处理这些请求，然后回复成功或失败状态。我对如何实现这一点有以下想法。

1.  有一个侦听器线程来创建、绑定、侦听和接受连接，然后生成一个新的 pthread 来侦听连接上的传入数据并在空闲超时时间后关闭连接。如果当前活动线程数为 2，则立即关闭新连接以确保仅允许 2 个。

2.  不要从侦听器线程中生成新线程，而是使用 select() 来检测传入的连接请求以及活动连接上的传入 modbus 连接（类似于 Beejs 指南中的方法）。

3.  创建 2 个侦听器线程，每个线程都创建一个套接字（相同的 IP 和端口号），可以阻塞 accept() 调用，然后关闭套接字 fd 并处理连接。在这里，我（也许天真地）假设这将只允许最多 2 个连接，我可以使用阻塞读取来处理这些连接。

我已经使用 C++ 很长时间了，但我对 Linux 开发还很陌生。我真的很欢迎关于上述哪种方法最好（如果有的话）的任何建议，以及我对 Linux 的缺乏经验是否意味着它们中的任何一种都是非常糟糕的想法。我热衷于避免 fork() 并坚持使用 pthread，因为传入的 modbus 请求将被排队并定期读取主控制器循环。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:22:12.717

第三种方法不行，只能绑定一次本地地址。

我可能会使用您的第二个替代方案，除非您需要进行大量处理，在这种情况下，第一个替代方案的组合可能有用。

我正在考虑的两个第一个替代方案的组合是让主线程（程序启动时始终拥有的那个）创建两个工作线程，然后进行阻塞`accept`调用以等待新连接。当新连接到达时，告诉其中一个线程开始处理新连接并返回阻塞`accept`。当第二个连接被接受时，你告诉另一个线程在那个连接上工作。如果两个连接都已打开，则要么在一个连接关闭之前不接受，要么等待新连接但立即关闭它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:22:15.493

由于您只处理 2 个连接，因此每个连接的线程非常适合这种应用程序。如果您需要扩展到数千个连接，则使用非阻塞或异步 I/O 的面向对象方法会更好。2 个侦听器线程有意义，您无需关闭接受 fd。连接完成后回来接受就可以了。实际上，一种变体是让三个线程阻塞执行接受。如果其中两个线程正在主动处理连接，则第三个线程会重置新创建的连接（或返回忙碌响应，无论您的设备是否合适）。

要让所有三个线程在接受时阻塞，您需要让主线程在三个线程启动之前创建并绑定您的套接字以进行接受/处理处理。

Linux 上 pthreads的[手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)表明 accept 是线程安全的。（线程安全函数下的部分列出了非线程安全的函数，看图。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T09:55:59.897

您提出的所有设计选项都不是非常面向对象的，而且它们都更倾向于 C 而不是 C++。如果您的工作允许您使用 boost，那么 Boost.Asio 库非常适合制作简单（和复杂）的套接字服务器。您几乎可以采用他们的任何示例并将其简单地扩展为仅允许 2 个活动连接，并在打开所有其他连接后立即关闭它们。

在我的脑海中，他们的简单 HTTP 服务器可以通过在连接类中保留一个静态计数器（构造函数中的 inc，析构函数中的 dec）进行修改，并在创建新计数器时检查计数并决定是否关闭连接。连接类也可以获得 boost::asio::deadline_timer 来跟踪超时。

这将最类似于您的第一个设计选择，boost 可以在 1 个线程中执行此操作，并且在后台执行类似于`select()`（通常`epoll()`）的操作。但这是“C++ 方式”，在我看来，使用`select()`and raw `pthread`s 是 C 方式。

# axis - jqPlot-显示条形图的问题-轴填充和条间距

> ID：10993587
> 
> 赞同：2
> 
> 时间：2012-06-12T09:11:06.283
> 
> 标签：axis, padding, jqplot

我正在使用以下代码在`jqPlot`. 但是，我遇到了两个问题：

1.  xaxis 范围值的任何一侧都没有填充。pad 属性似乎没有效果。

2.  当条的数量很大时，条相互重叠。barPadding 属性似乎没有效果。

我查看了这个链接[有 jqPlot bar chart 的问题](https://stackoverflow.com/questions/9057765/having-problems-with-jqplot-bar-chart)。答案建议使用`CategoryAxisRenderer`. 但由于我使用的是时间序列数据，因此我需要`DateAxisRenderer`.

请帮忙。

```
function plotBarGraph(data,myticks,series)
{
    $("#placeholder").empty();
    $.jqplot('placeholder',data,
            {
                //stackSeries:true,
                    seriesDefaults:{ 
                        renderer:$.jqplot.BarRenderer,
                        barMargin:1,
                        barPadding:0.5
                    },
                   axes:
                        {
                        xaxis:
                            {
                            ticks:myticks,
                            tickInterval:10,
                            renderer:$.jqplot.DateAxisRenderer,
                            pad:2.5,
                            tickOptions:
                                {
                                formatString:'%d-%m-%y'
                                }
                            }
                        },
                        legend:
                            {
                            show:true,
                            labels:series
                            }     
            });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:24:14.070

在这种情况下，如果您不想使用链接中提到的方法，您可能希望使用日期轴的最小/最大值。

我认为您可能还会发现[解决类似填充问题的方法](https://stackoverflow.com/a/10447196/613495)很有用，我选择在创建时设置刻度并在绘制绘图后隐藏不需要的刻度。

*在我可以提供任何进一步的帮助之前，请提供一个展示您的问题的样本。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:02:15.717

对于您的第二个问题，我遇到了类似的问题。我设置了一个选择语句，根据图表中的柱数来扩大图表的大小。然后我使父 div 可滚动（称为“dataHolder”），这解决了问题。

```
 // set div properties depending on how many sets of data are in the 
        //array so the view is sized properly
        $("#chartDiv").html("").css("width", "750px"); // chartDiv's default settings
        $("#tabs-6").removeClass("dataHolder").css("width", "900px"); // parent Div's default settings
        if (dataArray.length > 10) {
            $("#chartDiv").css("width", "1600px");
            $("#tabs-6").addClass("dataHolder").css("width", "900px");
        } else if (dataArray.length > 6) {
            $("#chartDiv").css("width", "1200px");
            $("#tabs-6").addClass("dataHolder").css("width", "900px");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T14:51:43.230

我找到了将 Date 数据与 CategoryAxisRenderer 一起使用的解决方案。您必须按如下方式配置 de xaxis：

```
axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            rendererOptions: {
                tickRenderer: $.jqplot.DateTickRenderer,
                tickOptions: {
                    formatter: $.jqplot.DateTickFormatter,
                    formatString:'%d/%m'
                }
            }
        }
    } 
```

我希望它有帮助！;)

# javascript - 选择表框计数器

> ID：10993591
> 
> 赞同：3
> 
> 时间：2012-06-12T09:11:20.997
> 
> 标签：javascript, jquery, jquery-ui

有这个小提琴，我想让它计算被选中的盒子的数量。现在它显示了盒子的数量。

知道怎么做吗？

```
 $(function() {
    $(".selectable").selectable({
        filter: "td.cs",

        stop: function() {
            var result = $("#select-result").empty();
            var result2 = $("#result2");
            $('.ui-selecting:gt(31)').removeClass("ui-selecting");

            alert($(".ui-selected").length);
            if ($(".ui-selected").length > 4) {
                $(".ui-selected", this).each(function(i, e) {
                    if (i > 3) {
                        $(this).removeClass("ui-selected");
                    }
                });
                return;
            }

            $(".ui-selected", this).each(function() {
                var cabbage = this.id + ', ';
                result.append(cabbage);
            });

            var newInputResult = $('#select-result').text();
            newInputResult = newInputResult.substring(0, newInputResult.length - 1);
            result2.val(newInputResult);
        }
    });
});​ 
```

我的问题是显示允许的最大选定框的结果。例如，如果您选择 8 个框以仅显示 4 个并获得 4 的结果，这是允许的最大值。最后不要成为警报，显示在 div 标签或类似标签中

[http://jsfiddle.net/dw6Hf/46/](http://jsfiddle.net/dw6Hf/46/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:18:19.103

您可以显示这样的消息[Live Demo](http://jsfiddle.net/dw6Hf/50/)

```
$('#divmsg').html($(".ui-selected").length + " box selected")
if ($(".ui-selected").length > 4) {
         $('#divmsg').html($('#divmsg').html() + ", Selection of only 4 allowed");
         $(".ui-selected").each(function(i, e) {                  
         if (i > 3) {
                        $(this).removeClass("ui-selected");
         }
        });
        return;
  } 
```

# python - 如何使用 werkzeug 或其他 python 请求框架制作非常简单的 http 代理？

> ID：10993592
> 
> 赞同：5
> 
> 时间：2012-06-12T09:11:21.790
> 
> 标签：python, http, proxy, flask, werkzeug

是否可以在端口 9090 上设置一个侦听器并添加一个标头，例如 Host: test.host 到在 9090 上传入的每个请求并将其发送到 8080？

谢谢

编辑：我现在使用反向代理，将主机名：端口应用于传入的*任何*请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:10:18.647

Twisted 有一个反向代理的实现，您可以修改它以满足您的需要。您可以在[此处](http://twistedmatrix.com/documents/current/web/examples/)查看示例。如果您查看 的源代码`twisted.web.proxy`，您可以看到 'Host:' 标头已设置在 中`ReverseProxyRequest.process`，因此您可以对其进行子类化并设置您自己的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:52:01.963

Unless you need to tailor the proxied request based on parameters that only your web application can know (for example, you need to authenticate the proxied request with your webapp's custom authentication system), you should use your web server's proxy capabilities.

Example with Apache:

```
Listen 0.0.0.0:9090
ProxyRequests off
<VirtualHost myhost:9090>
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/
    ProxyPassReverseCookieDomain localhost myhost
</VirtualHost> 
```

If you have to proxy things in a Flask or Werkzeug application, you can use httplib, creating requests based on the incoming request data and returning the response, either raw or modified (eg for link rewriting). It's doable, I have one such proxy in use where there was no good alternative. If you do that I recommend against using regular expressions to rewrite HTML links. I used PyQuery instead, it's far easier to get it right.

# php - Zend 框架，将索引控制器和索引操作名称添加到 URL

> ID：10993605
> 
> 赞同：2
> 
> 时间：2012-06-12T09:12:05.190
> 
> 标签：php, apache, zend-framework, url-rewriting, http-status-code-301

我需要在 url 中添加索引控制器名称和索引操作名称，例如：

application.local 将显示 application.local/index/index (index controller, index action) 在url中我需要显示完整路径：application.local/index/index

和

application.local/pages 将显示 application.local/pages/index - 我需要在 url 中显示完整路径：application.local/pages/index

这就像一个 301 重定向，但我想知道是否有可能从框架而不是 htaccess 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:58:05.247

解决此问题的一种方法是检查 URL (ie `$request->getServer('REQUEST_URI')`) 和分派的控制器和操作 ( `$request->getControllerName()`, `$request->getActionName()`) 以查看是否满足您的重定向标准。如果是这样 - 做一个重定向。

放置此逻辑的好地方是 FrontController 插件。

# android - 询问您是否要录制视频或拍照

> ID：10993611
> 
> 赞同：0
> 
> 时间：2012-06-12T09:12:30.213
> 
> 标签：android, video, android-intent, photo

当用户点击一个按钮时，我怎么能做到这一点，这要求有意识地拍摄照片或视频？

实际上我显示了一个带有 2 个按钮的警报对话框，但我知道可以显示典型的意图文件询问，然后在其中选择。

```
 @Override
            public void onClick(View v) {

                tipo_fichero = "1";
                cuando = ANTES;
                Intent i = new Intent();
                i.setAction(Intent.ACTION_CHOOSER);
                i.setType("image/*");
                i.setType("video/*");
                startActivityForResult(
                        Intent.createChooser(i, "Selecciona una accion"),
                        CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
            } 
```

我试试这个，但这只会让我打开画廊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:18:00.630

您可能正在寻找`Intent#createChooser` [http://developer.android.com/reference/android/content/Intent.html#createChooser](http://developer.android.com/reference/android/content/Intent.html#createChooser)

# python - 如何从 Python 中的字符串中删除 \xa0？

> ID：10993612
> 
> 赞同：316
> 
> 时间：2012-06-12T09:12:32.727
> 
> 标签：python, python-2.7, unicode, beautifulsoup, utf-8

我目前正在使用 Beautiful Soup 来解析 HTML 文件并调用`get_text()`，但似乎我留下了很多 \xa0 Unicode 表示空格。有没有一种有效的方法可以在 Python 2.7 中删除所有这些，并将它们更改为空格？我想更笼统的问题是，有没有办法删除 Unicode 格式？

我尝试使用: `line = line.replace(u'\xa0',' ')`，正如另一个线程所建议的那样，但这将 \xa0's 更改为 u's，所以现在我到处都有“u”。):

编辑：问题似乎已解决`str.replace(u'\xa0', ' ').encode('utf-8')`，但只是`.encode('utf-8')`不这样做`replace()`似乎会导致它吐出更奇怪的字符，例如 \xc2 。谁能解释一下？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2012-07-19T17:42:44.883

\xa0 实际上是 Latin1 (ISO 8859-1) 中的不间断空格，也是 chr(160)。您应该用空格替换它。

`string = string.replace(u'\xa0', u' ')`

当 .encode('utf-8') 时，它会将 unicode 编码为 utf-8，这意味着每个 unicode 可以用 1 到 4 个字节表示。对于这种情况，\xa0 由 2 个字节 \xc2\xa0 表示。

阅读[http://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)。

请注意：这个答案从 2012 年开始，Python 已经继续，你现在应该可以使用`unicodedata.normalize`了

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2016-01-08T04:24:55.070

`unicodedata`Python 的库中有很多有用的东西。其中之一是[`.normalize()`](https://docs.python.org/2/library/unicodedata.html#unicodedata.normalize)功能。

尝试：

```
new_str = unicodedata.normalize("NFKD", unicode_str) 
```

如果您没有得到您想要的结果，请使用上面链接中列出的任何其他方法替换 NFKD。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-01-16T16:57:40.633

尝试了几种方法，总结一下，我就是这样做的。以下是从解析的 HTML 字符串中避免/删除 \xa0 字符的两种方法。

假设我们的原始 html 如下：

```
raw_html = '<p>Dear Parent, </p><p><span style="font-size: 1rem;">This is a test message, </span><span style="font-size: 1rem;">kindly ignore it. </span></p><p><span style="font-size: 1rem;">Thanks</span></p>' 
```

所以让我们尝试清理这个 HTML 字符串：

```
from bs4 import BeautifulSoup
raw_html = '<p>Dear Parent, </p><p><span style="font-size: 1rem;">This is a test message, </span><span style="font-size: 1rem;">kindly ignore it. </span></p><p><span style="font-size: 1rem;">Thanks</span></p>'
text_string = BeautifulSoup(raw_html, "lxml").text
print text_string
#u'Dear Parent,\xa0This is a test message,\xa0kindly ignore it.\xa0Thanks' 
```

上面的代码在字符串中生成这些字符**\xa0**。要正确删除它们，我们可以使用两种方法。

**方法#1（推荐）：** 第一个是BeautifulSoup的**get_text**方法，**strip参数为True** 所以我们的代码变成：

```
clean_text = BeautifulSoup(raw_html, "lxml").get_text(strip=True)
print clean_text
# Dear Parent,This is a test message,kindly ignore it.Thanks 
```

**方法#2：** 另一种选择是使用python的库unicodedata

```
import unicodedata
text_string = BeautifulSoup(raw_html, "lxml").text
clean_text = unicodedata.normalize("NFKD",text_string)
print clean_text
# u'Dear Parent,This is a test message,kindly ignore it.Thanks' 
```

我还在[这个博客上](http://www.alirazabhayani.com/2018/01/python-html-to-text-for-sending-sms-sms.html)详细介绍了这些方法，您可能想参考一下。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-07-21T21:50:36.607

尝试在行尾使用 .strip() `line.strip()`对我来说效果很好

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-06-12T09:20:32.923

尝试这个：

```
string.replace('\\xa0', ' ') 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-12-11T20:39:35.243

我遇到了同样的问题，使用 python 从 sqlite3 数据库中提取一些数据。上面的答案对我不起作用（不知道为什么），但确实如此：`line = line.decode('ascii', 'ignore')`但是，我的目标是删除 \xa0s，而不是用空格替换它们。

我从[Ned Batchelder 的这个超级有用的 unicode 教程中得到了这个。](http://nedbatchelder.com/text/unipain.html)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-03-20T13:04:08.803

试试这个代码

```
import re
re.sub(r'[^\x00-\x7F]+','','paste your string here').decode('utf-8','ignore').strip() 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-04-23T07:16:38.760

Python 将其识别为空格字符，因此您可以`split`不使用 args 并通过普通空格连接：

```
line = ' '.join(line.split()) 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-02-22T12:09:07.290

我在谷歌搜索无法打印字符的问题时来到这里。我使用 MySQL`UTF-8` `general_ci`并处理波兰语。对于有问题的字符串，我必须按以下方式处理：

```
text=text.replace('\xc2\xa0', ' ') 
```

这只是一种快速的解决方法，您可能应该尝试使用正确的编码设置。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-06-12T12:02:29.257

0xA0 (Unicode) 在 UTF-8 中是 0xC2A0。`.encode('utf8')`只会取你的 Unicode 0xA0 并用 UTF-8 的 0xC2A0 替换。因此 0xC2s 的出现......编码并没有取代，正如你现在可能已经意识到的那样。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-01-19T14:51:48.697

在 Beautiful Soup 中，您可以传递`get_text()`strip 参数，该参数从文本的开头和结尾去除空白。如果它出现在字符串的开头或结尾，这将删除`\xa0`或任何其他空格。Beautiful Soup 替换了一个空字符串，`\xa0`这为我解决了这个问题。

```
mytext = soup.get_text(strip=True) 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-03-06T17:23:47.420

它相当于一个空格字符，所以去掉它

```
print(string.strip()) # no more xa0 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-02T12:28:45.570

带有正则表达式的通用版本（它将删除所有控制字符）：

```
import re
def remove_control_chart(s):
    return re.sub(r'\\x..', '', s) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-30T14:13:44.253

你可以试试`string.strip()`
它对我有用！:)

# jsf - 发生验证错误时突出显示 JSF 中的 inputText

> ID：10993615
> 
> 赞同：10
> 
> 时间：2012-06-12T09:12:35.397
> 
> 标签：jsf, jsf-2

我有一个包含很多 inputText 的表单，我想要突出显示那些没有填写正确数据的表单。

我尝试使用'component.valid'，但它总是返回该字段无效（即字段始终为红色）。

这是代码：

```
<h:inputText value="#{creerPersonne1.nom}" id="nom" 
    style="#{not nom.valid ? 'border-color:red;' : 'border-color:black;'}">
    <f:validateRegex pattern="^[a-zA-Z]+$"></f:validateRegex>
</h:inputText> 
```

这是结果：

![始终无效](../Images/92c97fe028b392fb87b97044a73228e3.png)

请注意，第一次加载页面时，该字段也会突出显示。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T09:28:26.393

您应该使用`component.valid`而不是`nom.valid`.

`component`是当前输入组件的隐式 EL 对象。并`component.valid`调用`isValid()`服务器端组件的方法。该`id`论点不能以这种方式使用。

所以你应该改变你的代码如下：

```
style="#{ component.valid ? 'border-color:black;' : 'border-color:red;'}" 
```

（不相关，但您最好使用样式类而不是硬编码样式。有效检查也适用于`styleClass`属性）。

# c# - 重载扩展方法

> ID：10993616
> 
> 赞同：1
> 
> 时间：2012-06-12T09:12:35.660
> 
> 标签：c#, excelpackage

是否可以重载扩展方法？

我做了这样的事情

```
 public static ExcelWorksheet CreateSheet(this ExcelPackage thisPackage, List<Document> list)
    {
        ExcelWorksheet worksheet = thisPackage.Workbook.Worksheets.Add("Documents");
        return worksheet;
    }
    public static ExcelWorksheet CreateSheet(this ExcelWorksheet thisPackage, List<Book> list)
    {
        ExcelWorksheet worksheet = thisPackage.Workbook.Worksheets.Add("Books");
        return worksheet;
    } 
```

在这种情况下，它仅将第一种方法识别为扩展方法，并忽略第二种方法，而不会出现任何编译器警告或错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:15:39.447

您不会在此处重载，因为扩展方法位于不同的对象上，`ExcelPackage`并且`ExcelWorksheet`. 不过，重载扩展方法**是**可以接受的。

# openxml - OpenXML SDK 和 MathML

> ID：10993621
> 
> 赞同：3
> 
> 时间：2012-06-12T09:13:01.007
> 
> 标签：openxml, docx, equation, mathml

我使用 MathML 创建一些数据块，我需要通过 OpenXML SDK 将其插入到 docx 文件中。我听说这是可能的，但我没有做到。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T20:46:09.730

据我所知，OpenXml SDK 不支持开箱即用的演示 MathML。

相反，OpenXml SDK 支持 Office MathML。因此，要将演示文稿 MathML 插入 Word 文档，我们首先必须将演示文稿 MathML 转换为 Office MathML。

幸运的是，Microsoft 提供了一个 XSL 文件（称为*MML2OMML.xsl*）来将演示文稿 MathML 转换为 Office MathML。文件 MML2OMML.xsl 位于`%ProgramFiles%\Microsoft Office\Office12`. 结合 .Net Framework 类 `XslCompiledTransform`，我们能够将演示文稿 MathML 转换为 Office MathML。

下一步是`OfficeMath`从转换后的 MathML 创建一个对象。该类`OfficeMath`表示包含 WordprocessingML 的运行，该运行应像 Office Open XML Math 一样进行处理。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-Us/library/documentformat.openxml.wordprocessing.officemath.aspx)。

表示 MathML 不包含字体信息。为了得到一个好的结果，我们必须将字体信息添加到创建的`OfficeMath`对象中。

在最后一步中，我们必须将`OfficeMath`对象添加到我们的 Word 文档中。`Paragraph`在下面的示例中，我只是在名为*template.docx*的 word 文档中搜索第一个并将`OfficeMath`对象添加到找到的段落中。

```
XslCompiledTransform xslTransform = new XslCompiledTransform();

// The MML2OMML.xsl file is located under 
// %ProgramFiles%\Microsoft Office\Office12\
xslTransform.Load("MML2OMML.xsl");

// Load the file containing your MathML presentation markup.
using (XmlReader reader = XmlReader.Create(File.Open("mathML.xml", FileMode.Open)))
{
  using (MemoryStream ms = new MemoryStream())
  {
    XmlWriterSettings settings = xslTransform.OutputSettings.Clone();

    // Configure xml writer to omit xml declaration.
    settings.ConformanceLevel = ConformanceLevel.Fragment;
    settings.OmitXmlDeclaration = true;

    XmlWriter xw = XmlWriter.Create(ms, settings);

    // Transform our MathML to OfficeMathML
    xslTransform.Transform(reader, xw);
    ms.Seek(0, SeekOrigin.Begin);

    StreamReader sr = new StreamReader(ms, Encoding.UTF8);

    string officeML = sr.ReadToEnd();

    Console.Out.WriteLine(officeML);

    // Create a OfficeMath instance from the
    // OfficeMathML xml.
    DocumentFormat.OpenXml.Math.OfficeMath om =
      new DocumentFormat.OpenXml.Math.OfficeMath(officeML);

    // Add the OfficeMath instance to our 
    // word template.
    using (WordprocessingDocument wordDoc =
      WordprocessingDocument.Open("template.docx", true))
    {
      DocumentFormat.OpenXml.Wordprocessing.Paragraph par =
        wordDoc.MainDocumentPart.Document.Body.Descendants<DocumentFormat.OpenXml.Wordprocessing.Paragraph>().FirstOrDefault();        

      foreach (var currentRun in om.Descendants<DocumentFormat.OpenXml.Math.Run>())
      {
        // Add font information to every run.
        DocumentFormat.OpenXml.Wordprocessing.RunProperties runProperties2 =
          new DocumentFormat.OpenXml.Wordprocessing.RunProperties();

        RunFonts runFonts2 = new RunFonts() { Ascii = "Cambria Math", HighAnsi = "Cambria Math" };        
        runProperties2.Append(runFonts2);

        currentRun.InsertAt(runProperties2, 0);
      }

      par.Append(om);
    }
  }
} 
```

# iphone - Objective-C 读取文件内容使用 NSUTF8StringEncoding 返回不正确的编码文本

> ID：10993624
> 
> 赞同：2
> 
> 时间：2012-06-12T09:13:08.017
> 
> 标签：iphone, objective-c, ios, encoding, utf-8

我有一个应用程序，它有一个脚本，可以读取 json 内容的文件。脚本是：

```
 NSString *jsonString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    NSLog(@"%@", jsonString);
    //filepath debug log: /var/mobile/Applications/1394B0D1-5B12-445D-BDFA-7B1E2661B685/Documents/json_branch_1_ru 
```

在 iPhone 模拟器中一切正常，返回文本是正确的：

> {"id":1,"add":"Казахстан, Алматы, улица Толе би, 73а","lon":"43.254677","lat":"76.934434","bnkid":42,"al":" ","rat":10,"prod":"","valid":1,"wrktime":"с физ.лицами: понедельник-пятница: 09:00-18:00 с юр.лицами: Нет данных" }

当我在我的**设备**上测试应用程序时，返回的文本编码不正确：

> {"id":1,"add":"–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –ê–ª–º–∞—Ç—ã, —É–ª–∏ —Ü–∞ –¢–æ–ª–µ –±–∏, 73–∞","lon":"43.254677","lat":"76.934434","bnkid":42,"al":"" ,"rat":10,"prod":"","valid":1,"wrktime":"—Å —Ñ–∏–∑。–ª–∏—Ü–∞–º–∏: –ø– æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞：09:00-18:00 —Å —é—Ä。 ª–∏—Ü–∞–º–∏: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"},{"id":2,"add":"–ö–∞– ∑–∞—Ö—Å—Ç–∞–Ω, –ê–ª–º–∞—Ç—ã, –º–∫—Ä. 5, 30","lon":"43.231442","lat" :"76.867923","bnkid":42,"al":"","rat":10,"prod":"","valid":1,"wrktime":"09:00 - 18:00" }

问题是什么？
**注意：**
1.我的文件没有扩展名
2.用utf-8编码保存的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:29:40.910

我解决了这个问题。
问题是json 文本中的**换行符或制表符。**不知何故，它损坏了文本编码。

# php - Mysql - 查找等于 $variable 的字段值回显该行的另一个字段值

> ID：10993628
> 
> 赞同：0
> 
> 时间：2012-06-12T09:13:20.073
> 
> 标签：php, mysql, arrays

任何帮助/指导将不胜感激。希望这是有道理的。

我正在尝试从 db 回显用户朋友列表。当前用户来自 $userid。

数据库结构：

```
CREATE TABLE IF NOT EXISTS `wallfriends` (
  `mem_id_from` int(11) NOT NULL,
  `mem_id_to` int(11) NOT NULL,
  `confirm` int(1) NOT NULL,
  `sender` int(11) NOT NULL DEFAULT '0'
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我正在努力的一点是从数据库中获取不是当前 $userid 的朋友 ID（查找等于 $userid 的字段值回显该行的另一个字段值：所以它可能是 mem_id_from 或 mem_id_to）。

下面是我的脚本，但我无法理解我需要编码的结构。

**（根据 josnidhin 的回答修改）**

```
 <?php
$my_friends = mysql_query('SELECT * from wallfriends WHERE (mem_id_from = '.$userid.') OR (mem_id_to = '.$userid.') AND confirm = 1');

$available_friends = mysql_fetch_array($my_friends);
foreach($available_friends as $friend)
{
  if($friend['mem_id_from']=== $userid && $friend['mem_id_to']!== $userid)
  {
    echo '<a href="'.$path.'profile.php?userid='.$friend['mem_id_to'].'">'
    echo '<img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />'
    echo '</a>';
  } 
  else if($friend['mem_id_from']!== $userid && $friend['mem_id_to']=== $userid)
  {
    echo '<a href="'.$path.'profile.php?userid='.$friend['mem_id_from'].'">'
    echo '<img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />'
    echo '</a>';
  }
}

        ?> 
```

在josnidhin回答之后，我尝试了：

```
$userid = '4276';

print_r($available_friends);

Array ( [0] => 3441 [mem_id_from] => 3441 [1] => 4276 [mem_id_to] => 4276 [2] => 1 [confirm] => 1 [3] => 3441 [sender] => 3441 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:31:07.857

我真的不明白你在问什么，但我认为这就是你要找的

```
<?php
    $my_friends = mysql_query('SELECT * from wallfriends WHERE (mem_id_from = '.$userid.') OR (mem_id_to = '.$userid.') AND confirm = 1');

    while ($friend = mysql_fetch_array($my_friends, MYSQL_ASSOC)) {
      if($friend['mem_id_from']=== $userid && $friend['mem_id_to']!== $userid)
      {
        echo '<a href="'.$path.'profile.php?userid='.$friend['mem_id_to'].'">'
        echo '<img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />'
        echo '</a>';
      } 
      else if($friend['mem_id_from']!== $userid && $friend['mem_id_to']=== $userid)
      {
        echo '<a href="'.$path.'profile.php?userid='.$friend['mem_id_from'].'">'
        echo '<img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />'
        echo '</a>';
      }
    }

    ?> 
```

[在http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)查看文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:28:49.087

```
<?php
$my_friends = mysql_query('SELECT * from wallfriends WHERE (mem_id_from = '.$userid.') OR (mem_id_to = '.$userid.') AND confirm = 1');

$available_friends = mysql_fetch_array($my_friends);
foreach($available_friends as $friend)
{
if($friend['mem_id_from']=== $userid && $friend['mem_id_to']!== $userid){
echo'<a href="'.$path.'profile.php?userid='.$friend['mem_id_to'].'">
    <img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />
</a>';
} else if($friend['mem_id_from']!== $userid && $friend['mem_id_to']=== $userid){
echo'<a href="'.$path.'profile.php?userid='.$friend['mem_id_from'].'">
    <img src="'.$post_avatar.'" width="70px" height="70px" border="0" alt="" />
</a>';
}
}

?> 
```

# java - PHP 编码 - Java 解码（URL 部分）

> ID：10993632
> 
> 赞同：0
> 
> 时间：2012-06-12T09:13:34.333
> 
> 标签：java, php, encoding, decoding

我有在 php 中解码 url 的代码。然后它的部分用于创建一个包含键值对的字符串（如 Param=EncodedPartOfUrl&Param2=EncondedPartofUrl&...）`(urlencode)`

现在我想用Java对其进行解码。我可以使用`URLDecoder`它还是可能不兼容？我还猜想在 PHP 中没有指定编码方案（当我正确理解文档时） - 我该如何在 java 中解决这个问题？不使用指定的 econding 方案（在 Java 6 中已弃用`URLDecoder`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:39:58.273

您不能只构建您的 URL，然后`url_encode`在 PHP 中构建它，然后在 Java 中使用您的 URLDecoder（或其他任何东西）吗？

仅对键值对中的值进行 URL 编码是不够的，也不是很好的方法 - 您应该为此对整个 URL 进行 URL 编码...

**编辑**：

> 感谢您的回答，但我在那里没有影响力。我只能在代码的 java 端工作。

然后你有唯一的可能性：解析 URL 以获取`GET`参数并 URL 分别解码它们的每个值......

# jgit - 如何使用 JGit 执行“git show sha1:file”

> ID：10993634
> 
> 赞同：3
> 
> 时间：2012-06-12T09:13:40.077
> 
> 标签：jgit

我使用 JGit 在本地磁盘上克隆了一个存储库。现在，我需要读取任何给定提交 id (SHA1) 的文件内容。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-21T14:58:06.943

[Rüdiger Herrmann 在此答案](https://stackoverflow.com/a/11008859/2040545)中的评论包含相关提示；但是为了让复制和粘贴解决方案的朋友在这里更容易，我完整的自包含 junit 测试示例代码创建了文件的修订版，然后检索此修订版的内容。适用于 jGit 4.2.0。

```
@Test
public void test() throws IOException, GitAPIException
{
    //
    // init the git repository in a temporary directory
    //
    File repoDir = Files.createTempDirectory("jgit-test").toFile();
    Git git = Git.init().setDirectory(repoDir).call();

    //
    // add file with simple text content
    //
    String testFileName = "testFile.txt";
    File testFile = new File(repoDir, testFileName);
    writeContent(testFile, "initial content");

    git.add().addFilepattern(testFileName).call();
    RevCommit firstCommit = git.commit().setMessage("initial commit").call();

    //
    // given the "firstCommit": use its "tree" and 
    // localize the test file by its name with the help of a tree parser
    //
    Repository repository = git.getRepository();
    try (ObjectReader reader = repository.newObjectReader())
    {
        CanonicalTreeParser treeParser = new CanonicalTreeParser(null, reader, firstCommit.getTree());
        boolean haveFile = treeParser.findFile(testFileName);
        assertTrue("test file in commit", haveFile);
        assertEquals(testFileName, treeParser.getEntryPathString());
        ObjectId objectForInitialVersionOfFile = treeParser.getEntryObjectId();

        // now we have the object id of the file in the commit:
        // open and read it from the reader
        ObjectLoader oLoader = reader.open(objectForInitialVersionOfFile);
        ByteArrayOutputStream contentToBytes = new ByteArrayOutputStream();
        oLoader.copyTo(contentToBytes);
        assertEquals("initial content", new String(contentToBytes.toByteArray(), "utf-8"));
    }

    git.close();
}

// simple helper to keep the main code shorter
private void writeContent(File testFile, String content) throws IOException
{
    try (OutputStreamWriter wr = new OutputStreamWriter(new FileOutputStream(testFile), Charset.forName("utf-8")))
    {
        wr.append(content);
    }
} 
```

**编辑**添加：另一个可能更好的例子是[https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/api/ReadFileFromCommit.java](https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/api/ReadFileFromCommit.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:44:35.943

通过使用这个。`Iterable<RevCommit> gitLog = gitRepo.log().call();`您可以从该对象获取所有提交哈希。

# dojo - 道场商店 getIdentity

> ID：10993639
> 
> 赞同：1
> 
> 时间：2012-06-12T09:13:58.890
> 
> 标签：dojo

store.getIdentity() 到底是什么：假设我有以下商店，我可以用 getIndetity 做什么？

```
var store = new dojo.store.Memory({
    data: [
        {id: 1, name: "store1_item1", prime: false},
        {id: 2, name: "store1_item2", prime: true},
        {id: 3, name: "store1_item3", prime: true},
        {id: 4, name: "store1_item4", prime: false},
        {id: "xy", name: "store1_item5", prime: true}
    ]
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:26:02.310

从`dojo/store/Memory`源代码：

```
// idProperty: String
//     Indicates the property to use as the identity property. The values of this
//     property should be unique.
idProperty: "id",

getIdentity: function(object){
// summary:
//     Returns an object's identity
// object: Object
//     The object to get the identity from
// returns: Number
return object[this.idProperty]; 
```

IE：

```
var id = 1;
store.getIdentity(store.get(id)) == id; 
```

您当然可以定义自己的`idProperty`：

```
var store = new dojo.store.Memory({
    data: [
        {id: 1, name: "store1_item1", prime: false},
        {id: 2, name: "store1_item2", prime: true},
        {id: 3, name: "store1_item3", prime: true},
        {id: 4, name: "store1_item4", prime: false},
        {id: "xy", name: "store1_item5", prime: true}
    ],
    idProperty: "name"
}); 
```

然后：

```
var item = store.get("store1_item1"); // item == {id: 1, name: "store1_item1", prime: false}
store.getIdentity(item) == "store1_item1"; 
```

基本上，它应该返回`primary key`从存储中检索到的对象的 a。

# asp.net - 更新 SQL Server 后列的新值

> ID：10993640
> 
> 赞同：1
> 
> 时间：2012-06-12T09:14:01.633
> 
> 标签：asp.net, sql-server

我有一个`SqlCommand`

```
UPDATE table SET intColumn = intColumn + 1 WHERE id = @id 
```

有没有办法获得`intColumn`相同的新价值`SqlCommand`？

就像是

```
UPDATE table 
SET intColumn = intColumn + 1 
WHERE id = @id; 
SELECT intColumn 
```

与`ExecuteScalar`？

例如：

```
Dim x as int32 = sqlCommand.ExecuteScalar("sql") 
```

x 是`intColumn`?的新值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:25:42.063

SQL 查询的框架应如下所示

```
 sqlCommand.ExecuteScalar("UPDATE table SET intColumn=intColumn+1 
                             OUTPUT INSERTED.intColumn
                             WHERE id=@id") 
```

# sphinx - 使用 xml 管道进行 Sphinx 搜索

> ID：10993641
> 
> 赞同：0
> 
> 时间：2012-06-12T09:14:02.137
> 
> 标签：sphinx

我有一个 json 对象数组。我正在从这个 JSON 数组创建与 sphinx 兼容的 xml 文档。对于每个对象，我创建一个文档并为其指定 id 值。例如，如果 json 数组包含 20 个对象，那么我必须创建 20 个文档开始从 1 到 20。现在我的 json 数组随时间更新，新对象到位，所以我需要从 21 开始为它们分配 id，依此类推。那么有什么方法可以在内部从 Sphinx 端维护这个 id 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:08:39.953

只需将最新使用的 id 存储在某处。一个文本文件什么的。

或者只是从 sphinx 索引中获取最高的 id。所以构建xml文件的脚本，可以先运行一个sphinxql查询

```
select id from gi_stemmed order by id desc limit 1; 
```

# windows - 使用向上箭头访问 PowerShell 历史记录

> ID：10993644
> 
> 赞同：11
> 
> 时间：2012-06-12T09:14:19.590
> 
> 标签：windows, powershell

我最近切换到了 powershell，因为我的 Cygwin bash 在使用 maven 时开始给我带来毫无意义的编译错误。我在（[https://stackoverflow.com/questions/9259723/is-there-a-windows-shell-tool-can-keep-history](https://stackoverflow.com/questions/9259723/is-there-a-windows-shell-tool-can-keep-history "有没有可以保存历史的windows shell工具")）中找到了如何保存和恢复我的命令历史记录，这似乎有效（使用“历史”将在干净启动后显示最近的命令）。

我似乎无法做的是使用向上箭头访问此历史记录，就像在当前会话中使用该命令一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T13:26:58.827

我建议改掉这个旧习惯（我知道，他们很难改掉）并使用为此构建的 PowerShell 特定功能。它实际上非常棒。这是#*[tab]，这里有2个选项（括号中的tab（[tab]）表示应该按下tab按钮）：

```
#pattern_from_command[tab] 
```

-> Powershell 循环遍历历史中包含“pattern_from_command”的所有命令。

-> EG：在 Powershell 中：键入#echo，按 Tab -> Powershell 循环浏览历史中包含“echo”的所有命令（当然，如果有的话）。

```
#<id>[tab] 
```

-> Powershell 使用 id <id> 完成命令。

-> EG：在 Powershell 中：键入 #3，按 Tab -> Powershell 将历史记录中的第三 (3) 个命令写入命令​​行（虽然不直接执行，但只需按 enter 即可执行）。

我知道这与您在 bash 中所做的不同，但我认为值得尝试并习惯。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-25T16:12:46.637

截至 2013 年 10 月，现在可以使用精彩的 PSReadline 模块：http: [//github.com/lzybkr/PSReadLine](http://github.com/lzybkr/PSReadLine)

当您的 powershell 会话退出时，您仍然需要保存您的历史记录，并在加载 PSReadline 之前将其加载到您的 profile.ps1 中（请参阅[http://technet.microsoft.com/en-us/library/ee156792.aspx](http://technet.microsoft.com/en-us/library/ee156792.aspx)）。当 PowerShell 存在时，您可以使用如下钩子注册一个钩子以保存您的历史记录：[Powershell profile "on exit" event?](https://stackoverflow.com/questions/2436510/powershell-profile-on-exit-event) . 与普通 PowerShell 不同，PSReadLine 允许上/下键访问此历史缓冲区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-13T19:16:57.243

就像说[@jhc​​lark](https://stackoverflow.com/users/758067/jhclark)现在有可能

您在官方 GitHub 中拥有所有安装文档：[https ://github.com/PowerShell/PSReadLine](https://github.com/PowerShell/PSReadLine)

您必须很好地遵循整个教程并注意：

*   `-AllowPrerelease`如果您有错误，请删除arg
*   `Import-Module 'PSReadLine'`在您的个人资料中添加此行，`code $PROFILE`例如使用 vscode 打开您的个人资料
*   `PSReadLine`如果您希望一切正常，请在安装后关闭所有 shell

如果您希望 fleche 像在 Linux 上一样在历史中搜索，请启动这两行，因为我认为这是大多数人正在寻找的：

```
Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward
Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward 
```

默认情况下是组合键`F8`，`SHIFT + F8`默认配置

你可以看到 conf ：

```
Get-PSReadLineKeyHandler 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:24:53.007

你不能。没有用于访问控制台程序历史的 API。

# java - 客户端分发的SVN结构

> ID：10993646
> 
> 赞同：3
> 
> 时间：2012-06-12T09:14:28.580
> 
> 标签：java, javascript, html, svn, tortoisesvn

我正在开发一个包含多个模块（JSP、JS 和 CSS）的 Web 项目。

在为多个客户端分发应用程序时，从 SVN 的角度来看，最好的方法是什么，每个客户端都可以访问有限数量的模块，并且可以自定义每个页面的布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:48:58.003

从一个在配置管理的沼泽和战壕中度过了几十年的人那里得到它：

# 不要使用分支

对不起，大喊大叫，但我想警告你不要去那里。甚至不想去那里。分支意味着处理分支，它永远不会发生。它变得越来越难以维护，并且开始被忽视。让我们看看两种不同的策略：

### 每个客户的分支

哦，听起来很简单。我将创建一个基本项目，并在不同的客户分支上标记客户之间的差异。如果所有客户都有变化，我会把它放在基础分支上，然后合并到所有不同的客户分支上。还有什么比这更简单的？

我已经看到公司因为这种策略而倒闭。他们决定为客户创建自定义代码，因此他们为该客户分支然后，第二个客户需要自定义代码，他们为此分支。然后是第三个。现在，似乎客户端 #3 也需要对客户端 #1 进行更改。好吧，我们将从客户端 #1 合并到客户端 #3。等等，客户#2 也需要改变。好的，我们也将它合并到客户端#2。

但是，此功能现在在您的所有客户端中，但不在您的基本代码中。您的基本代码与您的客户所拥有的完全不同步。总有一天，您会将这些更改添加到该基本代码中并对其进行更新，但您永远不会这样做。相反，它变成了一个溃烂的提醒，你已经把它搞砸了。

每五年，你应该把你的源代码，通过粉碎机，然后重新开始。那是因为每五年，整个软件环境都会发生如此大的变化，以至于您的遗留代码成为您拖来走去的枷锁。如果您有一个项目，那么开始一个新项目也不会太糟糕。但是，您现在有六个客户和六个不同的项目。你不可能有资源把所有东西都放在一起。你已经把自己写进了一个虚拟的角落。

然而，竞争对手会来，他们将拥有最新最好的代码，他们会一个接一个地把你的客户拉走，直到他们都消失了，你的工作也是如此。我一遍又一遍地看到它。您必须不断创新，但是当您到处都有客户特定的代码时，这很难。

### 保留核心代码并仅分支特定的客户资料

听起来很容易，如果你从来没有在你的生活中编程过。开发人员确切地知道这意味着什么：您需要从两个或三个单独的项目和/或分支中签出才能进行开发。其中一些组合会产生难以追踪的整洁而有趣的错误。您的持续构建服务器将为每个可能的组合带来工作机会。现在被认为是*客户特定*的代码是基础的，必须移动（尽管这可能永远不会发生）。

最后，根本不可能保持直线。您最终会得到在您的基础中应该是特定于客户端的代码，并且在您的客户端之间传播的基础代码。这与第一个场景非常相似，但您还添加了一个事实，即您的构建系统也是地狱。

* * *

那你该怎么办？

*   首先，使用 Maven。我不是 Maven 的忠实粉丝，但它可以做很多事情。
    *   Maven 会准确地告诉您如何布置所有内容。你把你的源代码放在这里，你把你的 JSP 放在这里。没有人可以争论它，因为 Maven 这么说的。你可以不同意，但不能争论。Maven 将使您将每个 jar 或战争作为一个单独的子项目，并将其归入`pom.xml`您的项目（它将有一个`pom.xml`将所有内容联系在一起的项目。这是处理此问题的正确方法。
    *   Maven 有一个内置的方式来处理依赖关系。这不仅适用于第三方 jar，还适用于您生成的多个项目使用的 jar。创建一个本地 Maven 存储库并使用它。
    *   不知道马文？学习它。学习它，就好像你的工资取决于它，因为它确实如此。对于 Java 开发人员来说，了解 Maven 每年可能价值约 20,000 美元。是的，了解 Maven 的开发人员可以获得更多报酬——大众捷达和奥迪 A6 之间的区别。
*   创建统一的发布版本并使用配置记录来确定客户端应该看到的内容。如果客户端 #1 需要功能“A”，而客户端 #2 需要功能“B”，则将 A 和 B 同时放入代码中，并通过配置记录确定客户端看到的功能。这样做的目的也是让您在编码之前进行思考。检查客户特定的分支并破解非常容易。但是，如果您有十几个客户并且只有一个代码库，您就无法做到这一点。你开始寻找和看到共同点，也许是处理这种情况的更好方法。你最终会得到更好的代码。
*   会有客户特定的代码。在这种情况下，为自定义 JSP 屏幕之类的内容创建一个目录。尽量减少这种情况，并使用 Perl 或 Python 脚本来帮助构建客户端特定的布局。事实上，使用单个集中式脚本，并提出一个配置方案来处理构建客户端差异。这将使您更容易看到差异。
*   为所有客户端制作一个版本，并设置您的服务器，因此客户端特定配置不会被新版本覆盖。这使得发布更容易，更不容易出错。

90% 的编码都在初始设计中。其余 90% 正在维护中。分支创建更多维护，并鼓励您不必担心整体设计。如果没有必要，不要分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:31:30.577

考虑到 css、js、.. 会影响应用程序的视图，可能为您拥有的每个客户创建一个分支是一个好主意。他们每个人都有自己的副本和主干供自己开发和推进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:33:50.420

当使用 svn 时，分支很重，我建议使用

*   一个主要项目

*   每个客户一个项目（带有主干和分支）

这样您就可以更轻松地管理整个事情，而不会冒险将文件泄露给错误的客户，尤其是当客户开始要求您访问他的存储库时。

这当然取决于技术。在 java 中，我使用 maven 或 ant 任务将主项目包含为客户端项目使用的（混淆的）jar。

# javascript - 调用具有未定义值的javascript函数

> ID：10993648
> 
> 赞同：2
> 
> 时间：2012-06-12T09:14:37.750
> 
> 标签：javascript, jquery

我在 javascript 中有一个函数：

```
function test(a, b, c) {
    if(typeof b == "undefined")
      //do something 
    //function code
} 
```

现在我想以这样的方式调用这个函数，以便`typeof b remains undefined`和`a & c containes`值（**不重新排序`a`，`b`&`c`**），比如

```
test("value for a",  what i can pass here so that b type will be undefined, "value for c") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T09:17:51.397

只需通过`undefined`（不带引号）：

```
test("value for a", undefined, "value for c"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T09:16:40.403

任何变量（未定义）。

```
var undefinedVar;
test("value for a", undefinedVar, "value for b"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T09:20:08.617

如果你知道你要么通过 a、b 和 c 或者你通过 a 和 c，我会建议另一种方法。然后执行以下操作

```
function test(a, b, c) {
  if (arguments.length < 3){
      c = b;
      b = arguments[2]; //undefined
      //do want ever you would do if b is undefined
  }
} 
```

在这种情况下，如果您错误地为 b 传递了未定义，则更容易发现它，因为它没有被解释为*“未定义实际上并不意味着未定义，而是一个告诉我做不同事情的标志”* ，测试参数长度通常比测试更健壮依赖参数的值，特别是如果该值也可能是错误的结果（即，如果该值未定义）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:14:33.007

您可以使用[void](https://developer.mozilla.org/en/JavaScript/Reference/Operators/void)运算符：

```
test('value for a', void 0, 'value for c'); 
```

`void`运算符计算`expression`并返回`undefined`。

# iphone - 图片未下载完成

> ID：10993653
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:14:50.717
> 
> 标签：iphone, ios, image

在我的应用程序中，如果我以 JPG 格式从服务器下载图像。我正在使用 NSURLConnection 同步下载图像。但有时一半的图像无法下载。它甚至不会抛出错误消息。

如何修复这个错误。任何指南都会有所帮助。

* * *

我在服务器上将图像更改为base64并转换为设备上的图像，然后这个问题就消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:23:09.227

许多人使用`NSURLConnection`不正确，并且不检查早期的服务器断开连接。

如果服务器在向您发送 中指定的字节数之前断开连接`Content-Length`，则不会产生错误，并且您的下载将不完整。由于这个问题，我已经看到了您描述的相同问题。

In`connection:didReceiveResponse:`你需要记住`[response expectedContentLength]`和 in`connectionDidFinishLoading:`你需要检查你是否收到了这么多字节。如果没有，您可能会生成自己的错误并导致下载失败。您还需要处理内容长度未知的情况（`expectedContentLength`将返回`NSURLResponseUnknownLength`）。

# php - php中的正则表达式失败

> ID：10993657
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:15:31.773
> 
> 标签：php, regex

我正在尝试从文件中获取它：

```
BEGIN_SEREFERRALS 2 google 13 15 search 2 2 END_SEREFERRALS 
```

我使用这个功能：

```
 function getTextBetweenSEO($file)
{
    $pattern = "/BEGIN_SEREFERRALS\s(.*)\sEND_SEREFERRALS/i";
    preg_match_all($pattern, $file, $matches);
    print_r($matches);
    exit();
    return $matches[1];

} 
```

我打印的是这样的：

```
Array ( [0] => Array ( ) [1] => Array ( ) ) 
```

为什么正则表达式失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:21:20.427

你可以试试这个正则表达式：

$pattern = "^BEGIN_SEREFERRALS(.*)END_SEREFERRALS^";

```
Array
(
    [0] => Array
        (
            [0] => BEGIN_SEREFERRALS 2 google 13 15 search 2 2 END_SEREFERRALS
        )

    [1] => Array
        (
            [0] =>  2 google 13 15 search 2 2 
        )
) 
```

FIX 对于 blob 文本数据的模式：

$pattern = "/BEGIN_SEREFERRALS(.*)END_SEREFERRALS/";

```
getTextBetweenSEO("jsdfhksdjhskjfdsjfhsdkjfhBEGIN_SEREFERRALS 2 google 13 15 search 2 2 END_SEREFERRALSjklajdakldjaslkdjakldjalkdjalksdj")

Array
(
    [0] => Array
        (
            [0] => BEGIN_SEREFERRALS 2 google 13 15 search 2 2 END_SEREFERRALS
        )

    [1] => Array
        (
            [0] =>  2 google 13 15 search 2 2 
        )
) 
```

# salesforce - 我可以在 Salesforce.com 专业版中安排多少每日分析快照

> ID：10993660
> 
> 赞同：0
> 
> 时间：2012-06-12T09:15:40.913
> 
> 标签：salesforce

我正在使用 Salesforce.com 的专业版。

我想设置几个不同的分析快照来每天运行。但是，当我尝试安排第二个快照时，我找不到可用的开始时间。我检查了[专业版限制](http://eu1.salesforce.com/help/doc/en/limits.htm#ReportAndDashboardLimitDetails)，但他们不清楚可以安排多少快照。

我每天可以安排多少个分析快照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:14:20.037

我询问了 Salesforce 支持并得到了回复。

> 为了向您澄清，您只能在专业版的任何一天安排一个分析快照开始。

# c++ - 如何显示从文件中读取的整数的最小值和最大值？

> ID：10993666
> 
> 赞同：-2
> 
> 时间：2012-06-12T09:16:28.573
> 
> 标签：c++

下面是我的代码。我的算法有问题。它显示输入文件中整数的最后一个最大值和最小值。价值观。有人可以看看并告诉我我做错了什么吗？

```
#include "cstdlib"
#include "iostream"
#include "fstream"

using namespace std;

int main()
{
    fstream instream;
    ofstream outstream;
    instream.open("num.txt");
    if(instream.fail())
    {
        cout<<"The input file failed to open\n";
        exit(1);
    }
    outstream.open("output.txt");
    if(outstream.fail())
    {
        cout<<"The output file failed to open";
        exit(1);
    }

    int next, largest, smallest;
    largest = 0;
    smallest = 0;

    while(instream>>next)
    {
        largest = next;
        smallest = next;
        if(largest<next)
        {
            largest = next;
        }
        if(smallest>next)
        {
            smallest = next;
        }
    }

    outstream<<"The largest number is: "<<largest<<endl;
    outstream<<"The smallest number is: "<<smallest<<endl;
    instream.close();
    outstream.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:27:53.977

您在每次迭代中无条件地分配`next`to`largest`和的值：`smallest`

```
while(instream>>next)
    {
        largest = next;    //  <--  Why are you surprised?
        smallest = next;   //  <--  :)
        if(largest<next)
        {
            largest = next;
        }
        if(smallest>next)
        {
            smallest = next;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:28:30.597

程序倾向于按照他们被告知的去做。这是你告诉要做的：

```
while(instream>>next) {
        largest = next;
        smallest = next; 
```

这是您始终将它们设置为最新的地方。也许将这三行更改为：

```
largest = 0;
smallest = –0;
while(instream>>next) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:25:56.820

问题可能出在这个循环中吗？

```
 while(instream>>next)

    {

    largest = next;

    smallest = next;

    if(largest<next)

    {

    largest = next;

    }

    if(smallest>next)

    {

      smallest = next;

    }

    } 
```

由于最大和最小都等于下一个，因此无法访问 2 个 if 语句吗？如果 while 中的 2 个 if 语句从不执行，则每次迭代中最大和最小的将始终设置为 next。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T19:54:25.860

```
#include<cstdlib>
#include<iostream>
#include<fstream>

using namespace std;

int main()
{
    fstream instream;
    ofstream outstream;
    instream.open("joy.txt");
    if(instream.fail())
    {
        cout<<"The input file failed to open\n";
        exit(1);
    }
    outstream.open("output.txt");
    if(outstream.fail())
    {
        cout<<"The output file failed to open";
        exit(1);
    }

    int next, largest, smallest;
    largest = 0;
    smallest = 0;

    while(instream>>next)
    {

        if(largest<next)
        {
            largest = next;
        }else{
                  smallest = next;
        }
    }

    outstream<<"The largest  number is: "<<largest<<endl;
    outstream<<"The smallest number is: "<<smallest<<endl;
    instream.close();
    outstream.close();

    system("pause");
    return 0;
} 
```

# javascript - 访问 JavaScript 中的原始全局变量和属性

> ID：10993669
> 
> 赞同：5
> 
> 时间：2012-06-12T09:16:35.453
> 
> 标签：javascript, security, global-variables

我正在处理在网页上注入的代码（使用浏览器插件或脚本标签）。

问题是我们想要使用全局对象和变量，比如`JSON`, `window.location`,`String.split`等，而这些的实现可能已经被网页改变了。这可能会使我们的代码失败，这是一个安全问题。

例子：

```
>>> String.prototype.split = function() { return 'foo'; };
function()
>>> 'a,b,c'.split(',');  // gives unexpected result
"foo" 
```

那么，有没有办法像在更改之前一样访问浏览器的对象和函数的默认实现？它不必是标准的，我只希望功能存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:22:02.143

## 更新

也许更可行的方法是`<iframe>`动态创建一个空。

这是一个`String.prototype.split`在父窗口中污染但从`<iframe>`.

```
<html>
<head>
<script type="text/javascript">
    function onBodyLoad() {

        String.prototype.split = function() { return 'foo'; }; // contaminate original window
        console.log(String.prototype.split); // yeah, it's contaminated

        var acr = document.getElementById("accessor");
        acr.onclick = function ()
        {
            var dummyFrame = document.createElement("iframe");
            document.body.appendChild(dummyFrame); 
            console.log(dummyFrame.contentWindow.String.prototype.split); // uncontaminated
        }
    }
</script>
</head>
<body onload="onBodyLoad()">
    <a href="#" id="accessor">Access iframe Window object</a>
</body>
</html> 
```

* * *

~~不是一般意义上的；尽管那里可能有一些异国情调的黑客。~~

~~我能想到的唯一方法是确保您的代码在任何其他脚本之前加载。如果满足该要求，则可以将必要的全局变量克隆到安全位置。~~

# rest - 在 Restful 服务中处理孤立数据

> ID：10993671
> 
> 赞同：1
> 
> 时间：2012-06-12T09:16:36.160
> 
> 标签：rest

假设我有一个包含任务列表的 RESTful 服务。

```
GET mycorp/api/v1/tasks 
```

这些任务中的每一个都可以有一个或多个上下文。

```
GET mycorp/api/v1/tasks?context=somecontext 
```

在使用过程中，用户删除了一批任务。

```
DELETE mycorp/api/v1/tasks?context=somecontext 
```

让我们假设一旦执行此操作，由于上面的 DELETE 操作，我们现在有一些上下文在系统中处于孤立状态。让我们还假设可以使用孤立的上下文来节省用户必须一遍又一遍地输入相同的上下文。

如果用户 DID 想要显式删除这些上下文，那么在 REST 上下文中执行此操作的正确方法是什么？我自然倾向于两种选择。

```
DELETE mycorp/api/v1/tasks?context=somecontext&&deleteorphancontexts=true 
```

并且

```
DELETE mycorp/api/v1/contexts?isorphaned=true 
```

我对 REST 还是新手，以及如何确保我构建的 api 是严格的、有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:00:01.133

首先，REST 不是一套严格的指导方针，因此对此没有明确的答案，但我认为它会帮助您将不同的 URL 视为资源（这毕竟是 REST 的全部内容）。

当您向服务器发送 DELETE 请求时，您是在指示它删除该位置的资源。在您的示例中，您假设您正在删除集合的内容，但您实际上是在指示服务器删除集合本身。因此，如果您在之后立即发出 GET 请求，您应该期望得到 204（无内容）响应，而不是带有空集合的 200 响应。如果这是合适的，那么你的问题就解决了。

在我看来，将 DELETE 请求用于单个上下文/任务会更好，这与 PUT 请求相反。通过发出包含删除指定内容的命令的 POST 请求来修改集合更正确。

通过这种方式，您可以 POST 到

mycorp/api/v1/contexts

并发送一个命令，指示服务器删除所有孤儿。

我更喜欢这个的原因是，您将上下文路径视为一个集合，其中某些项目可能是孤立的。

通常，当您有疑问时，POST 是您的朋友，因为它是 HTTP 的小丑。

# android - 图钉的 OnClickListener

> ID：10993679
> 
> 赞同：0
> 
> 时间：2012-06-12T09:17:10.373
> 
> 标签：android, android-mapview, android-maps

在这里，我使用了谷歌地图和叠加层。我使用图钉的图像指向 GeoPoint。

我想为`OnClickListener`图钉设置一个事件。当用户触摸图钉时，我想敬酒。下面是代码。

```
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Bundle;
import android.widget.Toast;

public class Googlemap1_6Activity extends MapActivity 
{
    /** Called when the activity is first created. */
    MapView mapView;
    MapController mc;
    GeoPoint p;

class Mapoverlay extends com.google.android.maps.Overlay
{

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) 
    {
        // TODO Auto-generated method stub
        super.draw(canvas, mapView, shadow, when);

        Point screenPts =new Point();
            mapView.getProjection().toPixels(p, screenPts);
            Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pushpin2);
            canvas.drawBitmap(bmp,  screenPts.x, screenPts.y-26, null);

        return true;
    }

    @Override
    public boolean onTap(GeoPoint pl, MapView mapView) {
        // TODO Auto-generated method stub

         if(pl.equals(p))
        {

             Toast.makeText(getBaseContext(),
                        "This is International Airport",
                        Toast.LENGTH_LONG).show();
         }

         return super.onTap(pl, mapView);
}

}

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String lat_coordinates[] ={"27.700556"};
    String lng_coordinates[] ={"85.3630"}; 

    Double lat = Double.parseDouble(lat_coordinates[0]);
    Double lng = Double.parseDouble(lng_coordinates[0]);

    p = new GeoPoint(
            (int) (lat*1E6),
            (int) (lng*1E6));

    mapView = (MapView) findViewById(R.id.mapView);
    mc=mapView.getController();
    mapView.setBuiltInZoomControls(true);
    mc.setZoom(10); 
    mc.animateTo(p);

    Mapoverlay MapOverlay  = new Mapoverlay();
    List<Overlay> listofOverlays = mapView.getOverlays();
    listofOverlays.clear();
    listofOverlays.add(MapOverlay);

    mapView.invalidate();

}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:31:49.200

你覆盖你自己的覆盖，所以你必须自己处理标签。为什么不使用[ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)。覆盖那里的[onTab(int index)](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay#onTap%28int%29)就完成了。它还有一个有用的[hitTest](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay#hitTest%28Item,%20android.graphics.drawable.Drawable,%20int,%20int%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:50:52.850

为此，请使用以下链接的代码，它可能会对您有所帮助。

[地图视图气球](https://github.com/jgilfelt/android-mapviewballoons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:43:01.480

谢谢大家的支持...同时，我解决了我的问题，所以我在这里发布它，希望它可以帮助其他人...

```
package org.nip.gmap;

import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import android.graphics.drawable.Drawable;
import android.os.Bundle;

public class Main extends MapActivity {

    /** Called when the activity is first created. */

    MapView map;
    MapController controller;
    List<Overlay> overlayList;
    int lat=0;
    int lng=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        map = (MapView) findViewById(R.id.mapView);
        map.setBuiltInZoomControls(true);

        overlayList = map.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.pushpin2);
        CustomPinpoint itemizedoverlay = new CustomPinpoint(drawable,this);

        double lat_coordinates[] ={27.700556,28.2642635,30.0018168,29.776669,29.4096819,29.4560611};
        double lng_coordinates[] ={85.3630,83.9735195,80.7382742,81.2518833,81.8115051,80.5403779};
        String place_name[] ={"kathmandu","Pokhara","Darchula","Bajhang","Bajura","Baitadi"};
        String place_info[] ={"Its an capital of Nepal","Its and tourist place of Nepal","Its one of the beautiful place in country side","CHD District Target:10 51,960, VDCs/Muncipalities reported:41/41","CHD District Target: 71,280, VDCs/Muncipalities reported: 47/47","CHD District Target:10 51,960, VDCs/Muncipalities reported:41/41","CHD District Target: 71,280, VDCs/Muncipalities reported: 7/7","CHD District Target:10 21,960, VDCs/Muncipalities reported:44/41","CHD District Target: 33,3123, VDCs/Muncipalities reported: 47/47"};

         try{
            for(int i=0; i<place_name.length; i++)
             {
                 GeoPoint point = new GeoPoint((int)(lat_coordinates[i]*1E6),(int)(lng_coordinates[i]*1E6));
                 OverlayItem overlayitem = new OverlayItem(point, place_name[i], place_info[i]);
                 itemizedoverlay.addOverlay(overlayitem);
             }
         }catch(NullPointerException e){
             e.getStackTrace();

         }
         finally{
            overlayList.add(itemizedoverlay);
         }

        controller = map.getController();
        controller.animateTo(new GeoPoint((int)(lat_coordinates[0]*1E6),(int)(lng_coordinates[0]*1E6)));
        controller.setZoom(8);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

创建新班级...

```
package org.nip.gmap;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

//import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomPinpoint extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
    private Context c;

    public CustomPinpoint(Drawable defaultMarker, Context context) {
        super(boundCenter(defaultMarker));
        c= context;

    }

//  public CustomPinpoint(Drawable M, Context context) {
//      
//      this(M);
//      c= context;
//  }

    public void addOverlay (OverlayItem overlay)
    {
        pinpoints.add(overlay);

        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return pinpoints.get(i);
    }

    @Override
    public int size() {

        // TODO Auto-generated method stub
        return pinpoints.size();
    }
    @Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub
        OverlayItem item = pinpoints.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(c);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;

    }

} 
```

# windows - 在所有本地驱动器中搜索和删除文件

> ID：10993680
> 
> 赞同：1
> 
> 时间：2012-06-12T09:17:11.913
> 
> 标签：windows, batch-file, find, delete-file

我想知道是否有人知道如何在所有本地驱动器上按名称批量搜索文件并在找到时将其删除，因此它被永久删除，而不仅仅是在回收站中。

到目前为止，`DEL /S /P "123.MSN"`虽然这不会搜索超出批次所在的当前目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:48:39.763

您应该能够为每个驱动器号执行此操作

`del C:\123.msn /f /s /q`

只需更换`C:\`驱动器，或者如果未知，您可以递归地对所有驱动器执行此操作，请参见[此处](https://serverfault.com/questions/132685/batch-scripting-iterate-over-drive-letters)。这将在整个驱动器中搜索该文件，如果找到，则删除。

此外，您正在使用`/p`将提示删除的开关。我不确定这是否是为了`/q`抑制确认。将`/f`删除只读文件，文件不会进入回收站，只会被删除。

# html - 无法使用 Jquery 绑定视频事件

> ID：10993681
> 
> 赞同：5
> 
> 时间：2012-06-12T09:17:11.973
> 
> 标签：html, jquery-mobile, html5-video, bind

我正在使用视频标签并使用 bind 或 live 绑定它。在这两种情况下它都不起作用。下面是我的代码可能是我做错了什么并且无法捕捉到它。

```
 <video width="videoWidth"
            height="videoHeight"
            poster="../Poster/poster.png"
            id="videoId"
            controls="controls"
            muted="true"    
            seeking="true"
            paused="true"   >

            <source src="../video/trailer.mp4" type="video/mp4"/>               
            <source src="../video/trailer.ogv" type="video/ogv"/>
            <source src="../video/trailer.webm" type="video/webm"/>
                Your browser does not support the video tag.
            </video> 
```

这是用于绑定事件的 JS 文件包含。

```
$("#videoId").bind('ended',function() {
            alert("Entered");
        }); 
```

**更新**

我正在更新以前的 JS，现在它适用于所有视频事件。现在我遇到了错误事件，其中事件将根据事件代码触发。可能是我在编写代码时出错但**错误**事件不起作用。下面是我的 JS

```
$(document).ready(function(){
        $("#videoId").bind('play',function() {
            alert("Play");
        });

        $("#videoId").bind('canplay',function() {
            alert("Can Play");
        });

        $("#videoId").bind('empited',function() {
            alert("Empited");
        });

        $("#videoId").bind('ended',function() {
            alert("Ended");
        });

        $("#videoId").bind('loadstart',function() {
            alert("Load Start");
        });

        $("#videoId").bind('pause',function() {
            alert("Pause");
        });

        $("#videoId").bind('playing',function() {
            alert("Playing");
        });

        $("#videoId").bind('progress',function() {
            alert("Progress");
        });

        $("#videoId").bind('suspend',function() {
            alert("Suspend");
        });

        $("#videoId").bind('volumechange',function() {
            alert("Volume");
        });

        $("#videoId").bind('waiting',function() {
            alert("waiting");
        });
        $("#videoId").bind('error',function(e,ui) {
            switch (e.target.error.code) {
             case e.target.error.MEDIA_ERR_ABORTED:
               alert('You aborted the video playback.');
               break;
             case e.target.error.MEDIA_ERR_NETWORK:
               alert('A network error caused the video download to fail part-way.');
               break;
             case e.target.error.MEDIA_ERR_DECODE:
               alert('The video playback was aborted due to a corruption problem or because the video used features your browser did not support.');
               break;
             case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
               alert('The video could not be loaded, either because the server or network failed or because the format is not supported.');
               break;
             default:
               alert('An unknown error occurred.');
               break;
           }
            //alert("Error Code : "+event.target.error.code);
        });

        }); 
```

在控制台中得到“获取”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-25T17:53:15.757

这将警告视频元素上的错误对象中的所有对象

```
$("video").on("error", function(err) {
    for (var i in err.currentTarget.error) {
        alert(i + ": " + err.currentTarget.error[i]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T23:03:58.723

尝试使用：

$("#videoId").bind('error',function(e,ui) {...function here...}, true);

这至少应该抛出你的错误处理程序，但错误可能是更高的传播。下一步将查明实际错误。这个链接应该有帮助：

[https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener)

# mysql - 将长文本描述存储在数据库或文件系统中更好吗？

> ID：10993684
> 
> 赞同：0
> 
> 时间：2012-06-12T09:17:33.487
> 
> 标签：mysql, database

我刚刚读了一篇文章，声称在 [文件系统上存储图像更好](http://databases.aspfaq.com/database/should-i-store-images-in-the-database-or-the-filesystem.html) 我想知道在文件中存储文本的优点和缺点是什么（除了我没有问题的整个安全问题，因为文本将是公开的）

我认为将文本存储在数据库中会更好。（文字只是对图像的描述或其他人应该遵循的一些方向）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:21:46.400

有些人认为文件与数据库的性能更好。这取决于很多因素。

其他人认为，数据库与文件相比，简单性/可维护性更好。想想备份、数据库复制等。同时拥有一个包含数据的文件系统和一个需要处理的数据库是更多的工作。

只有清楚地了解所有相关因素，才能回答这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:56:54.467

mvds 所说的内容，还有一些需要考虑的因素：

*   您需要在文本描述中搜索 / 吗？如果是 -> 数据库
*   会有全文索引的需求吗？如果是 -> 数据库
*   单独的存储增加了一定程度的复杂性——文件存储（即文件夹结构）和数据库必须保持同步

如果性能不是所有主要因素，恕我直言，数据库存储是文本内容的首选。另一方面，如果文本已经“编译”成 word/pdf/libre office/... 文档，那么 db 存储的很多优点就失去了，文件存储可能更可取

# c# - 为 401（授权失败）提供自定义错误页面

> ID：10993685
> 
> 赞同：1
> 
> 时间：2012-06-12T09:17:36.373
> 
> 标签：c#, asp.net-mvc, authorization, custom-error-pages

我正在使用 Windows 身份验证。身份验证工作正常（用户加载了它的角色）。

当授权失败（使用`Authorize`）属性时，我想提供一个自定义错误页面。似乎该`HandleError`属性仅被引发的异常调用，而不是任何错误状态代码（`>= 300`）。

自定义错误部分：

```
<customErrors mode="On" defaultRedirect="~/Error/">
  <error statusCode="404" redirect="~/Error/NotFound/" />
  <error statusCode="401" redirect="~/Error/NotAuthorized/" />
</customErrors> 
```

我得到了一个`ErrorController`返回视图。但它永远不会被调用。

我是否必须开始在自定义`Authorize`属性中引发异常才能处理 401，还是有更好的 MVC3 特定方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:46:02.390

你可以覆盖`HandleUnauthorizedRequest`你的`CustomAuthorize`

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary
                                         {
                                             {"area", ""},
                                             {"controller", "Error"},
                                             {"action", "NotAuthorized"},
                                             {"returnUrl", filterContext.HttpContext.Request.RawUrl}
                                         });
} 
```

# javascript - 可以通过代码触发的菜单

> ID：10993689
> 
> 赞同：0
> 
> 时间：2012-06-12T09:17:54.743
> 
> 标签：javascript, jquery, css, menu

我正在尝试在 javascript/JQuery 中创建一个菜单（css 也是一个选项），它允许我让它执行诸如显示特定下拉菜单、激活菜单中的按钮和模拟鼠标悬停效果等操作，而无需鼠标实际执行任何操作这些东西。

这样做的原因是我正在制作一个界面，该界面使用类似于让我为您搜索该功能的功能，这意味着鼠标在屏幕上移动的图像“显示”您在菜单中的何处查找内容。因此，我需要能够编写代码以使特定的菜单按钮假装鼠标悬停或被单击。

所以基本上，我如何为每个按钮制作一个具有唯一标识符的菜单，可以调用它以获得所需的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:41:18.613

如果您将所有事件处理程序都设为独立函数，您也可以手动调用它们。例如，不要像这样注册匿名点击处理程序：

```
$('#myelement').click(function(){ /* do stuff */ }); 
```

你将会拥有：

```
function doStuff() { /* do stuff */ }

$('#myelement').click(doStuff);

// somewhere else in your code
doStuff(); 
```

或者，如果您使用 jQuery，您可以`$('#myelement').click()`在代码中的其他位置调用，它会调用附加到元素的任何 onclick 处理程序，就像有人物理单击它一样。

# python - python：转换为 HTML 特殊字符

> ID：10993692
> 
> 赞同：3
> 
> 时间：2012-06-12T09:18:02.957
> 
> 标签：python, html

> **可能重复：**
> [用 Python 2.6 中相应的 utf-8 字符替换 html 实体 在 Python](https://stackoverflow.com/questions/730299/replace-html-entities-with-the-corresponding-utf-8-characters-in-python-2-6)
> [中转义 HTML 的最简单方法是什么？](https://stackoverflow.com/questions/1061697/whats-the-easiest-way-to-escape-html-in-python)

有一种方法可以轻松地将字符串转换为 HTML 字符串，例如将 <、> 等字符替换为，`&lt;` `&gt;` 或者我是否必须编写自己的转换例程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T09:23:59.123

如果您只关心关键的特殊字符，例如`&`,`<`和`>`：

```
>>> import cgi
>>> cgi.escape("<hello&goodbye>")
'&lt;hello&amp;goodbye&gt;' 
```

对于其他非 ASCII 字符：

```
>>> "Übeltäter".encode("ascii", "xmlcharrefreplace")
b'&#220;belt&#228;ter' 
```

当然，如果需要，你可以将两者结合起来：

```
>>> cgi.escape("<Übeltäter>").encode("ascii", "xmlcharrefreplace")
b'&lt;&#220;belt&#228;ter&gt;' 
```

# c++ - 避免“局部变量作为默认参数”的最佳设计？

> ID：10993695
> 
> 赞同：2
> 
> 时间：2012-06-12T09:18:15.220
> 
> 标签：c++, default-parameters

我正在编写一个以两个不同的公差值作为参数的近似函数：

```
bool Approximate(vector<PointC*>* pOutput, LineC input, double horizontalTolerance, double verticalTolerance) 
```

如果未设置verticalTolerance，我希望该函数设置verticalTolerance = Horizo​​ntalTolerance。所以，我想完成类似的事情：

```
bool Approximate(vector<PointC*>* pOutput, LineC input, double horizontalTolerance, double verticalTolerance=horizontalTolerance) 
```

我知道这是不可能的，因为[不允许局部变量作为默认参数](http://msdn.microsoft.com/en-us/library/50w8cey5%28v=vs.80%29.aspx)。所以我的问题是，设计这个功能的最佳方式是什么？

我想到的选项是：

1.  不要使用默认参数并让用户明确设置两个公差。

2.  将verticalTolerance的默认值设置为负值，如果为负，则重置为horizo​​ntalTolerance：

    ```
    bool Approximate(vector<PointC*>* pOutput, LineC input, double horizontalTolerance, double verticalTolerance=-1)
    {
        if (verticalTolerance < 0)
        {
            verticalTolerance = horizontalTolerance;
        }
        // Rest of function
    } 
    ```

在我看来，第一点不是解决方案而是绕过，第二点不可能是最简单的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T09:21:13.343

或者您可以使用重载：

```
bool Approximate(vector<PointC*>* pOutput, LineC input, 
                     double horizontalTolerance, double verticalTolerance)
{
//whatever
}

bool Approximate(vector<PointC*>* pOutput, LineC input, 
                     double tolerance)
{
   return Approximate(pOutput, input, tolerance, tolerance);
} 
```

这完美地模仿了您想要实现的目标。

# jquery - jquery插件创作内部方法调用从另一个内部方法

> ID：10993699
> 
> 赞同：1
> 
> 时间：2012-06-12T09:18:26.590
> 
> 标签：jquery, function, jquery-plugins, each

我是 jquery 插件创作的新手，想知道插件中的方法如何在同一个插件中调用另一个方法。

在示例代码中，我尝试从 f1 调用 f2，但由于 f2 方法中的 this.each() 出现 js 错误。

你能启发我吗？

谢谢

编辑：可以从插件 $.pluginName('f1') 和 $.pluginName('f2') 外部调用 f1() 和 f2()。

我想要的是在 f1() 中的某些代码之后调用 f2()。

```
;
(function( $ ){
    'use strict';

    var pluginName = 'pluginName';

    var defaults = {
    };

    var methods = {
        init : function( options ) {
            return this.each(function ( ) {
                var $this = $(this);
                var settings = $.extend({}, defaults, options);
                $this.data(pluginName, settings);
                return $this;
            });
        },

        f1 : function() {
            methods.f2(); // Uncaught TypeError: Object #<Object> has no method 'each' 
        },

        f2 : function() {
            return this.each(function() {

            });
        }
    };

    $.fn[pluginName] = function( method ) {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.' + pluginName + '()');
        }
    };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:43:25.690

这显示错误，因为当您调用时`f2()`，`f1()`您没有将 jQuery 对象传递给，`f2()`因此`this`不会引用内部相同的对象`f2()`，因此它不会工作。

所以像这样改变你的`f1()`代码

```
f1 : function() {
            // some code of F1
            this.css('color','red');
            // now call f2
            methods.f2.apply(this,[]); 
        }, 
```

它指定了`this`inside 的含义`f2()`。在这种情况下，我们传递的是 jQuery 对象。

[工作示例](http://jsfiddle.net/yNHFQ/)

更多关于[.apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)

# maven - maven 发布：准备版本字符错误

> ID：10993701
> 
> 赞同：1
> 
> 时间：2012-06-12T09:18:29.080
> 
> 标签：maven, maven-release-plugin, prepare

我正在尝试让 maven 发布插件工作，与 Perforce 集成。我昨天终于到了某个地方并设法运行：

```
mvn release:prepare 
```

并被要求指定很多版本和新的工作快照。我将版本“0.1”（不带引号）指定为所有子项目的发布版本，并将工作快照设置为“1.0-SNAPSHOT”（与以前相同），因为我只是在测试插件和集成使用 Perforce，而不是实际尝试构建一个版本。但是，输入信息后，我收到以下错误：

> [错误] 无法在项目 myproject 上执行目标 org.apache.maven.plugins:maven-release-plugin:2.3.1:prepare (default-cli)：执行目标 org.apache.maven.plugins:maven 的 default-cli -release-plugin:2.3.1:prepare failed: 数据“0.1”对于 JDOM 字符内容是不合法的：0x1b 不是合法的 XML 字符。-> [帮助 1]

（我不是 100% 确定这是我得到的确切错误）

但是现在，每次我运行`mvn release:prepare`时，我都会遇到同样的错误（肯定是上面的那个），没有机会重新提供版本或工作快照名称。

版本“0.1”是否无效，或者我是否设法在其中一个值中输入了转义字符（“0x1b”），或者其他地方有什么问题？

我也找不到我输入的值去了哪里。我如何能够再次设置它们，或者从头开始准备输入新值？

提前感谢任何看到这个的人。

编辑：

我找到了后一部分的答案，即如何重置值。如果我跑

```
mvn release:prepare -Dresume=false 
```

我可以再次输入值。

（正如@tom 在答案中已经提到的那样，我可以跑去`mvn release:rollback`摆脱那些存在的东西。但是，这似乎不起作用，可能是因为准备失败了。）

这次我输入了默认值，但我注意到我的问题比这更深，而且我可能没有正确设置 Perforce 集成。我得到这个信息输出：

> 没有找到密码，没有它继续。

即使我将其设置为：

```
<server>
  <id>ip-of-perforce-server</id>
  <username>my-perforce-username</username>
  <password>***************</password>
</server> 
```

在我的 settings.xml 中。我只在项目的 pom 中的示例中看到过它的设置，但有人提到你可以在 settings.xml 中进行设置，这似乎是唯一有意义的事情（因为 pom通常*在*单片机）。如果我将用户名和密码指定为环境变量（-Dusername=xxx 等），我可以避免收到此消息。

但我也得到错误：

> CommandLineException 退出代码：1 - 客户端“PCNAME”未知 - 使用“客户端”命令创建它。

其中 PCNAME 是我的桌面的 Windows 名称。我尝试运行：

```
p4 client 
```

并打开一个包含以下内容的文件：

```
Client: PCNAME
Owner:  my-perforce-username
Host:   PCNAME 
```

那么为什么它说它是未知的/需要创建的呢？

为了回答自己，我只是注意到在运行后`p4 client`它说`Client PCNAME saved.`我猜这就是它显示的原因：P 所以我只需要按照错误消息中的说明进行操作。

现在我只需要解决问题：

如果我在 cygwin 中运行，我会收到错误`Path 'D:\Server\pom.xml' is not under client's root '/cygdrive/d/Server'`，我猜这与 unix 和 windows 路径之间的冲突有关。

除此之外，在输入获得以下内容的版本之前，我没有收到任何错误：

```
java.io.IOException: The filename, directory name, or volume label syntax is incorrect
    at java.io.WinNTFileSystem.canonicalize0(Native Method)
    at java.io.Win32FileSystem.canonicalize(Win32FileSystem.java:396)
    at java.io.File.getCanonicalPath(File.java:559)
    at org.apache.maven.scm.provider.perforce.command.edit.PerforceEditCommand.createCommandLine(PerforceEditCommand.java:109)
    at org.apache.maven.scm.provider.perforce.command.edit.PerforceEditCommand.executeEditCommand(PerforceEditCommand.java:51)
    at org.apache.maven.scm.command.edit.AbstractEditCommand.executeCommand(AbstractEditCommand.java:40)
    at org.apache.maven.scm.command.AbstractCommand.execute(AbstractCommand.java:59)
    at org.apache.maven.scm.provider.perforce.PerforceScmProvider.edit(PerforceScmProvider.java:210)
    at org.apache.maven.scm.provider.AbstractScmProvider.edit(AbstractScmProvider.java:560)
    at org.apache.maven.shared.release.phase.AbstractRewritePomsPhase.writePom(AbstractRewritePomsPhase.java:631)
    at org.apache.maven.shared.release.phase.AbstractRewritePomsPhase.transformProject(AbstractRewritePomsPhase.java:231)
    at org.apache.maven.shared.release.phase.AbstractRewritePomsPhase.transform(AbstractRewritePomsPhase.java:125)
    at org.apache.maven.shared.release.phase.AbstractRewritePomsPhase.execute(AbstractRewritePomsPhase.java:110)
    at org.apache.maven.shared.release.DefaultReleaseManager.prepare(DefaultReleaseManager.java:234)
    at org.apache.maven.shared.release.DefaultReleaseManager.prepare(DefaultReleaseManager.java:169)
    at org.apache.maven.shared.release.DefaultReleaseManager.prepare(DefaultReleaseManager.java:146)
    at org.apache.maven.shared.release.DefaultReleaseManager.prepare(DefaultReleaseManager.java:107)
    at org.apache.maven.plugins.release.PrepareReleaseMojo.prepareRelease(PrepareReleaseMojo.java:291)
    at org.apache.maven.plugins.release.PrepareReleaseMojo.execute(PrepareReleaseMojo.java:247)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)                            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)                                        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[ERROR] CommandLineException Exit code: 1 - Usage: add/edit/delete [-c changelist#] [ -d -f -k -n -v ] [-t type] files...
Missing/wrong number of arguments.

Command line was:p4 -d D:\Server -p perforce-ip-and-port -u my-username -P my-password edit
org.codehaus.plexus.util.cli.CommandLineException: Exit code: 1 - Usage: add/edit/delete [-c changelist#] [ -d -f -k -n -v ] [-t type] files...
Missing/wrong number of arguments. 
```

和最终的 Maven 构建失败错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3.1:prepare (default-cli) on project project-name: Error writing POM: D:\Server\pom.xml (Access is denied) -> [Help 1] 
```

*（请注意，在命令行上运行命令时也会发生这种情况，不会*出现有关 pom 不在客户端视图中的错误）

这似乎是我剩下的最后一个问题......到达那里:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:24:28.990

0.1 绝对是合法版本。您输入的值已进入与您的文件处于同一级别的`pom.xml`文件中（不记得名称，因为它们在 之后消失`mvn release:perform`）。要擦除它们，您可以使用`mvn release:rollback`

此外，在使用多模块项目时，请务必使用“autoVersionSubModules”标志：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>${maven.plugin.release.version}</version>
    <configuration>
            <autoVersionSubmodules>true</autoVersionSubmodules>
    </configuration>
</plugin> 
```

这也会改变你的模块的版本。

编辑：这个答案只回答了关于 Maven 发布插件的部分。不是问题的其他部分。提问者决定就问题的其他部分提出新的问题。

# jquery-plugins - 如何在叠加层中自动播放 html5 视频元素？

> ID：10993702
> 
> 赞同：0
> 
> 时间：2012-06-12T09:18:34.967
> 
> 标签：jquery-plugins, html5-video, flowplayer

我创建了一个包含多种媒体的页面，每个媒体都在一个隐藏的 div 中，当单击菜单链接时，该隐藏的 div 被触发以加载到 jquery 工具中覆盖。单击链接时我希望实现的几件事：

1.  视频加载到叠加层时自动播放
2.  覆盖关闭时视频暂停或停止
3.  如果再次单击同一链接，视频会重新加载并自动播放

我达到了 #2，但在 #1 和 #3 上失败了。使用下面的代码，视频播放器和媒体在覆盖中加载但不会自动播放，并且当尝试关闭链接并重新打开时播放器无法加载。

我在下面的代码中做错了什么？

```
<div id="menu">
   <a href="#"><img src="images/image1.jpg" rel="#overlay1"/></a>
   <a href="#"><img src="images/image2.jpg" rel="#overlay2"/></a>
   <a href="#"><img src="images/image3.jpg" rel="#overlay3"/></a>
</div>
<div class="overlay" id="overlay1">
   <video class="player" id="bbb" controls="controls" poster="http://sandbox.thewikies.com/vfe-generator/images/big-buck-bunny_poster.jpg" width="640" height="360">
     <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4" />
     <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.webm" type="video/webm" />
     <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg" />
     <object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="640" height="360">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="transparent" />
        <param name="flashVars" value="config={'playlist':['http%3A%2F%2Fsandbox.thewikies.com%2Fvfe-generator%2Fimages%2Fbig-buck-bunny_poster.jpg',{'url':'http%3A%2F%2Fclips.vorwaerts-gmbh.de%2Fbig_buck_bunny.mp4','autoPlay':true}]}" />
        <img alt="Big Buck Bunny" src="http://sandbox.thewikies.com/vfe-generator/images/big-buck-bunny_poster.jpg" width="640" height="360" title="No video playback capabilities, please download the video below" />
      </object>
   </video>
</div>
<div class="overlay" id="overlay2">(same as above, different media)</div>
<div class="overlay" id="overlay2">(same as above, different media)</div>

<script>
$(function() {
    $("a [rel]").overlay({
        effect: 'apple',        
        expose: '#101010',
        closeOnClick: 'false',
        closeOnEsc: 'false',
        onLoad: function(content) {
            this.getOverlay().find(".player").flowplayer(0).load();
            $('#bbb').get(0).play()
        },
        onClose: function(content) {
            $(".overlay").children().filter("video").each(function(){
                this.pause();
            });
        }
    });         
    $(".player").flowplayer("http://releases.flowplayer.org/swf/flowplayer-3.2.11.swf", {clip: {autoPlay: true}});
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:14:38.040

最简单的方法是在 mouseout 上清空覆盖内容，然后在显示覆盖之前在 mouseover 上填充它们。这样浏览器就会为你完成所有的工作。由于 dom 操作，性能会受到很小的影响，但几乎不值得一提..

就像是：

```
<div class="overlay" id="overlay1" data-vsrc-mp4="...mp4" data-vsrc-webm="...webm" data-vsrc-ogv="...ogv" data-vsrc-poster="...jpg"> 
```

因此，您现在拥有元素数据属性上的所有必要内容，然后您可以执行以下操作：

```
var videoTemplate = 
'<video class="player" id="bbb" controls="controls" poster="##poster##" width="640" height="360"><source src="##mp4##" type="video/mp4" /><source src="##webm##" /><source src="##ogv##" type="video/ogg" /><object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="640" height="360"><param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" /><param name="allowFullScreen" value="true" /><param name="wmode" value="transparent" /><param name="flashVars" value="config={\'playlist\':[\'##poster##\',{\'url\':\'##mp4##\',\'autoPlay\':true}]}" /><img alt="Big Buck Bunny" src="##poster##" width="640" height="360" title="No video playback capabilities, please download the video below" /></object></video>';

$("div.overlay").hover(function(){
   var newhtml = videoTemplate.replace(/##poster##/g,$(this).data("vsrc-poster")//....and so on for all data elements
   $(this).empty().append(newhtml);
},function(){
   $(this).empty();
}); 
```

我没有测试过这个，但这个想法是合理的......

希望有帮助。

# spring - 定义多个 webAppConfig (Jetty)

> ID：10993703
> 
> 赞同：0
> 
> 时间：2012-06-12T09:18:36.637
> 
> 标签：spring, jetty, web.xml, applicationcontext

**简介**
目前我正在使用一个基于 Spring 的 webapp，其中我们有两个不同的 DAO bean 实现：

*   一个真正的 DB 访问实现（基于 JDBC 从 DB 中检索数据）。*   一个测试实现（其中每个方法都返回假数据）。

    这些实现是使用 applicationContext 文件映射的（我们有两个，上面描述的每种情况一个）。使用其中一个的方法是拥有两个不同的 web.xml 文件，并让第二个文件（例如“web-test.xml”）包含以下内容：

    ```
    <context-param>
       <param-name>contextConfigLocation</param-name>
       <param-value>classpath:{...}/applicationContext-test.xml</param-value>
    </context-param> 
    ```

    在jetty插件的配置中，我们可以覆盖web.xml：

    ```
    <webAppConfig>
     <contextPath>/${projectName}-test</contextPath>
     <overrideDescriptor>${basedir}/web/WEB-INF/web-test.xml</overrideDescriptor>
    </webAppConfig> 
    ```

    这适用于使用一个 applicationContext**或**另一个，但我们需要在集成测试期间同时使用这两者，因为一些测试需要数据库访问，而其他测试需要使用假数据。

    **问题**
    是否可以定义多个 webAppConfigs，以便我们可以根据使用的 contextPath 使用“web.xml”或“web-test.xml”？
    我们想区分访问不同 url 的两种情况，例如：

    *   localhost:8080/myWebApp（用于真正的数据库访问）*   localhost:8080/myWebApp-test（用于假数据模拟）

    我们在 pom.xml 上尝试了这样的事情：

    ```
    <webAppConfig>
     <contextPath>/${projectName}</contextPath>
    </webAppConfig>

    <webAppConfig>
     <contextPath>/${projectName}-test</contextPath>
     <overrideDescriptor>${basedir}/web/WEB-INF/web-int-test.xml</overrideDescriptor>
    </webAppConfig> 
    ```

    但结果是 webAppConfig 被第二个定义覆盖。有没有办法通过同一个 Jetty 实例访问这两个上下文？

    预先感谢您的帮助。

# openerp - 已创建对象的工作流程

> ID：10993704
> 
> 赞同：1
> 
> 时间：2012-06-12T09:18:48.300
> 
> 标签：openerp

我有一个在 res.partner 上创建工作流的模块。不幸的是，如果我在安装模块时创建了一些合作伙伴，则这些合作伙伴没有任何关联的工作流。

有没有办法做到这一点？

达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:11:34.547

我不知道是否有更好的方法，但我认为您可以通过在模块的一个数据文件中包含一个[函数标签来实现这一点。](http://doc.openerp.com/v6.1/developer/03_modules_1.html#function-tag)该函数应该是模型类上的一个函数，它为任何还没有工作流条目的合作伙伴创建一个工作流条目。

您可能想要添加`noupdate="1"`到功能标签，这样它就不会在每次升级模块时运行。

# jquery - 开始和停止 div 在其他两个 div 之间滚动

> ID：10993705
> 
> 赞同：2
> 
> 时间：2012-06-12T09:18:59.390
> 
> 标签：jquery

最近有人帮助我解决了这个问题，但我正在寻求更多帮助。我目前有这个工作 -

```
var windw = this;

$.fn.followTo = function ( elem ) {
var $this = this,
    $window = $(windw),
    $bumper = $(elem),
    bumperPos = $bumper.offset().top,
    thisHeight = $this.outerHeight(),
    setPosition = function(){
        if ($window.scrollTop() > (bumperPos - thisHeight)) {
            $this.css({
                position: 'absolute',
                    top: (bumperPos - thisHeight)
                });
            } else {
                $this.css({
                    position: 'fixed',
                    top: 0
                });
            }
        };
    $window.resize(function()
    {
        bumperPos = pos.offset().top;
        thisHeight = $this.outerHeight();
        setPosition();
    });
    $window.scroll(setPosition);
    setPosition();
};

$('#one').followTo('#two'); 
```

这里的例子 - [jsFiddle](http://jsfiddle.net/Tgm6Y/1447/)

一旦 div 到达另一个 div 的边界，它就会停止滚动 - 效果很好。我现在想弄清楚的是如何让滚动 div 从一个 div 开始，然后向下滚动并在另一个 div 处停止，就像在这个例子中那样。有人有什么想法吗？

这是一个可怕的例子[——jsFiddle](http://jsfiddle.net/Tgm6Y/1450/)。蓝色部分应该位于黄色部分下方，直到您到达它。由于我的大脑功能有限，我只是无法弄清楚这是怎么可能的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:59:32.217

向您的函数添加另一个参数以传递起始元素，然后在您的函数中设置一些变量以将其存储`offset().top + height()`为起始位置，然后添加另一个参数`if`以检查该`scrollTop()`值是否低于起始值，如下所示：

```
var windw = this;

$.fn.followTo = function (from, bumper) { //renamed "elem" to "bumper", to 
    var $this = this,                     //prevent ambiguity
        $window = $(windw),
        $from = $(from),
        $bumper = $(bumper),
        $startPos = $from.offset().top + $from.height(), //new start position
        bumperPos = $bumper.offset().top,
        thisHeight = $this.outerHeight(),
        setPosition = function(){
            if ($window.scrollTop() < $startPos) { //new if < startPos
                $this.css({
                    position: 'absolute',
                    top: $startPos //resets element to start position
                });
            } else if ($window.scrollTop() > (bumperPos - thisHeight)) {
                $this.css({
                    position: 'absolute',
                    top: (bumperPos - thisHeight)
                });
            } else {
                $this.css({
                    position: 'fixed',
                    top: 0
                });
            }
        };
    $window.resize(function()
    {
        bumperPos = pos.offset().top;
        thisHeight = $this.outerHeight();
        setPosition();
    });
    $window.scroll(setPosition);
    setPosition();
};

$('#one').followTo('#half', '#two'); 
```

[***JSFiddle***](http://jsfiddle.net/ult_combo/Tgm6Y/1455/)

# android - 如何在我的应用小部件中以编程方式更改我的 textview 的填充？

> ID：10993707
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:19:04.127
> 
> 标签：android, android-layout

由于`findviewbyid()`小部件不支持，我无法在小部件上动态设置 TextView 填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:22:28.897

据我所知，没有办法。appwidget 旨在不允许动态操作布局对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T12:59:20.123

如果您正在为 API 级别 > 16 进行开发，您可以使用以下方法来设置左填充，例如：

```
views.setViewPadding(R.id.widget_item_news_publishedDate_text, 20, 0, 0, 0); 
```

将 20 更改为您需要的任何维度（您甚至可以通过调用从资源中获取维度

```
context.getResources().getDimensionPixelOffset(R.dimen.content_padding)) 
```

其中 content_padding 是 8dp。

这有帮助吗？

# javascript - 使用cordova在android中呼叫不起作用，从手机中获取联系人

> ID：10993710
> 
> 赞同：2
> 
> 时间：2012-06-12T09:19:09.140
> 
> 标签：javascript, android, cordova, phone-call

我想通过单击链接拨打电话号码，但应该从电话中检索联系人。所以我为此实现了一个代码。但是电话正在打开拨号器，但我检索到的联系号码丢失了。有什么建议吗？

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.1.0.min.css" />
    <script src="jquery-1.7.1.min.js"></script>
    <script src="jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        // specify contact search criteria
        var options = new ContactFindOptions();
        options.filter="";          // empty search string returns all contacts
        options.multiple=true;      // return multiple results
        filter = ["displayName"];   // return contact.displayName field

        // find contacts
        navigator.contacts.find(filter, onSuccess, onError, options);
    }

    // onSuccess: Get a snapshot of the current contacts
    //
    function onSuccess(contacts) {
        for (var i=0; i<contacts.length; i++) {
            alert(contacts[i].displayName);
            var phonenumber;
            phonenumber = contacts[i].phoneNumbers;
            $("ul").append("<li><a href=tel:"+phonenumber+">"+contacts[i].displayName+"</a></li>");
        }
    };

    // onError: Failed to get the contacts
    //
    function onError(contactError) {
        alert('onError!');
    }

    </script>
  </head>
  <body>
    <ul data-role="listview" data-theme="g" data-filter="true">
        <li><a>hello</a></li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:47:57.890

`contacts[i].phoneNumbers`是一个数组，所以你应该添加它的变量：

```
var phonenumber = contacts[i].phoneNumbers[0]; 
```

或循环遍历最适合您的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:39:32.057

尝试

```
$("ul").append("<li><a href=callto:"+phonenumber+">"+contacts[i].displayName+"</a></li>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T06:49:55.647

这对我有用：

```
phonenumber = contacts[i].phoneNumbers[0].value.replace(" ", "");

$("#ul").append("<li><a href=tel:+91"+phonenumber.replace(" ", "")+">"+contacts[i].displayName+"<br/>"+phonenumber.replace(" ", "")+"</a></li><br/>"); 
```

我使用了 replace() 函数，因为我在电话号码的数字之间有空格。

希望它会帮助你。

# php - 访问管理页面

> ID：10993719
> 
> 赞同：0
> 
> 时间：2012-06-12T09:19:36.687
> 
> 标签：php, session, login, admin

您好我正在尝试创建一个管理员登录。在我的 mysql 数据库中，在表“users_table”中，我有字段 admin 并且它的默认值 = N 但如果它等于 Y 则直接将其 Admin.php 这里是我当前用于启动新会话的代码，我想知道是否我可以把它放在那里，如果它确实 = Y 然后说会话'Admin'启动并重定向到 Admin.php 而不是 $_SESSION['name'] （顺便说一句，'name' 是我数据库中的字段 1 和字段 'admin ' 是 7

```
 <?php
session_start();
    include ('condb.php');

   $name = $_POST ['username'];
   echo $name;
   $query ="SELECT name FROM users_table WHERE (name = '$name')" ;
   $result = mysql_query($query)
    or die (mysql_error($con)); 
 $row= mysql_num_rows($result);  
 if ($row=1){
 $_SESSION['name'] = $row[1];
  }         
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:24:40.177

除了强制性的 SQL 注入，你还尝试过什么？这说“这是我的代码，修复它”。请阅读（最近的）PHP + MySQL 教程，它将为您指明 PDO。真的，给它读一读。

与此同时，这样的事情可能会奏效：

```
$rowcount = mysql_num_rows($result);
if ($rowcount == 1){
    $row = mysql_fetch_array($result);
    $_SESSION['name'] = $row['name'];
    if ($row['admin'] == 'Y')
    {
        $_SESSION['admin'] = $row['admin'];
        header("Location: admin.php");
        exit();
    }
} 
```

# c++ - 模板函数中使用的类的前向声明不是由 clang++ 编译的

> ID：10993720
> 
> 赞同：12
> 
> 时间：2012-06-12T09:19:37.050
> 
> 标签：c++, templates, g++, forward-declaration, clang++

有这个代码：

```
class A;

template <class T>
void fun() {
   A a;
}

class A { 
public: 
   A() {  } 
};

int main() { 
   fun<int>(); 
   return 0;
} 
```

g++ 4.5 和 g++ 4.7 编译它没有错误。但是 clang++ 3.2 (trunk) 给出了这个错误：

```
main.cpp:5:6: error: variable has incomplete type 'A'
   A a;
     ^
main.cpp:1:7: note: forward declaration of 'A'
class A;
      ^ 
```

根据 C++ 标准，哪个编译器是正确的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T12:59:11.663

> 根据 C++ 标准，哪个编译器是正确的？

两者都是正确的。这是一个格式错误的程序。强调我的：

> N3290 14.6¶9
> 如果在非依赖名称中使用的类型在定义模板时是不完整的，但在实例化完成时是完整的，并且该类型的完整性是否会影响程序格式正确或影响程序的语义，程序格式错误**；不需要诊断**。

clang++ 和其他编译器确实在这里发出诊断是一个不错的附加功能，但诊断不是强制性的。该条款“程序格式错误；不需要诊断”使编译器开发人员可以自由支配在这种情况下做任何事情并且仍然符合要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T09:33:45.557

据我所知，Clang 是正确的。在你的函数 fun 中，你不知道 A 的大小，并且由于你分配了一个 A，你需要知道它的大小。在我看来，gcc 是一种宽容的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:11:20.250

`clang++`正在使用正确的行为，这`4.6/9`在标准 ( *n1905* ) 部分中进行了描述。

* * *

> **`Templates 14.6/9 Name resolution`**
> 
> 如果名称不依赖于模板参数（如 *14.6.2*中定义），则该名称的声明（或声明集）应在该名称出现在模板定义中的点的范围内；该名称绑定到在该点找到的声明（或多个声明），并且此绑定不受在实例化点可见的声明的影响。

* * *

把事情简单地说；如果名称**不**依赖于模板参数，则它应该在找到定义的范围内；因此，您需要在`A`定义`template<typename T> void fun ()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:42:40.867

Comeau 的编译器也不喜欢它：

```
"ComeauTest.c", line 5: error: incomplete type is not allowed
     A a;
       ^ 
```

然而，我在 C++ 标准中寻找章节和经文的尝试没有结果。它似乎隐藏在“实例化点”、“名称解析”的线条和交互之间。2003 年标准的第 14.6/8 和 14.6/9 段似乎相关。

# c# - 如何获取控制台应用程序的执行目录

> ID：10993721
> 
> 赞同：69
> 
> 时间：2012-06-12T09:19:41.520
> 
> 标签：c#, .net, filepath

我尝试使用以下代码获取控制台应用程序的目录，

```
Assembly.GetExecutingAssembly().Location 
```

但这一个给了我组装所在的位置。这可能与我执行应用程序的位置不同。

我的控制台应用程序解析没有参数的日志。它必须转到`logs/`可执行文件文件夹内的文件夹，或者如果我给它一个路径来`logs/`解析它。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-06-12T09:21:08.650

使用`Environment.CurrentDirectory`.

> 获取或设置当前工作目录的标准路径。
> （MSDN [Environment.CurrentDirectory 属性](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory(v=vs.90))）

```
string logsDirectory = Path.Combine(Environment.CurrentDirectory, "logs"); 
```

如果您的应用程序在*c:\Foo\Bar* `logsDirectory`中运行，则将指向 *c:\Foo\Bar\logs*。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-12T09:29:07.920

用这个 ：

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

将其与

```
System.IO.Path.GetDirectoryName if all you want is the directory. 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T09:22:08.567

最安全的方式：

```
string temp = Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-01-07T20:58:54.137

Scott Hanselman 有一篇[博](https://www.hanselman.com/blog/how-do-i-find-which-directory-my-net-core-console-application-was-started-in-or-is-running-from)文，内容如下：

```
using System;
using System.Diagnostics;
using System.IO;

namespace testdir
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine($"Launched from {Environment.CurrentDirectory}");
            Console.WriteLine($"Physical location {AppDomain.CurrentDomain.BaseDirectory}");
            Console.WriteLine($"AppContext.BaseDir {AppContext.BaseDirectory}");
            Console.WriteLine($"Runtime Call {Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName)}");
        }
    } 
```

他在 .NET Core 3.1 中使用它，但是，我正在运行 .NET 4.8，它对我有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-19T17:37:30.337

这是一个简单的日志记录方法

```
using System.IO;
private static void logWrite(string filename, string text)
{
    string filepath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\" + filename;

    using (StreamWriter sw = File.AppendText(filepath))
    {
        sw.WriteLine(text);
        Console.WriteLine(text);
    }
} 
```

用法：

```
logWrite("Log.txt", "Test"); 
```

# android - 在tabHost上放一张图片

> ID：10993723
> 
> 赞同：0
> 
> 时间：2012-06-12T09:20:02.613
> 
> 标签：android, android-layout

我创建了一个主机选项卡，我只会将图像放在选项卡上。我找到了这个方法：

```
 tabHost.addTab(tabHost.newTabSpec("Tab 1").setContent(R.id.tab1)
            .setIndicator("Tab 1",getResources().getDrawable(R.drawable.book))); 
```

提供文本和图像，但没有好处。我应该怎么做？

编辑

我尝试放入 main.xml：

```
 <LinearLayout
                        android:id="@+id/tab1"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <ImageView 
                            android:id="@+id/x2"
                            android:src="@drawable/book"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />

                    </LinearLayout> 
```

我在活动中添加了以下声明：

```
 tabHost.addTab(tabHost.newTabSpec("Tab 1").setContent(R.id.tab1)); 
```

但是程序崩溃了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:32:40.720

我已经四处寻找与您的问题相关的类似问题，我认为如果您查看以下问题中提供的答案，您可能会找到一些对您有所帮助的答案：

[如何更改 TabHost 中的选项卡图像](https://stackoverflow.com/questions/4507718/how-to-change-the-tabs-images-in-the-tabhost-in-android)

希望这可以帮助。

# search - 如何使用tortoisehg 的搜索工具？

> ID：10993731
> 
> 赞同：17
> 
> 时间：2012-06-12T09:20:33.170
> 
> 标签：search, mercurial, tortoisehg

我想在特定分支（即“ABC-123”）的特定文件（即“index.php”）中搜索特定短语（即“comma_delimited”）。这样做的原因是，该文本不再在文件中，我想查看它是在哪个提交时取出的，而不是查看此分支上该文件的每个修订版。

有没有办法在 tortoisehg 中做到这一点？我看到有一个搜索按钮，它会弹出一个搜索面板，您可以在其中输入模式，但我不知道如何使用它（也不知道如何编写模式），谷歌搜索了一段时间后，发现没有用关于它的信息。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T09:59:22.553

有两个搜索按钮 - 一个用于搜索存储库，另一个用于过滤修订图。也许你按错了？

如果您使用菜单选择查看/搜索，这将选择您想要的搜索视图。

它应该在修订图下方显示一个大面板，其中包含许多要填写的控件。

*   在第一个编辑控件中输入“comma_delimited”（与右侧的搜索和停止按钮在同一行）
*   选择该编辑控件下方的“所有历史记录”单选按钮。
*   输入`**index.php`标记为“包含”的编辑控件（`index.php`如果您有多个文件并希望将搜索限制为特定文件，则输入完整路径）
*   按搜索按钮

窗口底部的列表现在应该显示包含该短语的修订的详细信息。它将显示何时添加（以“+”为前缀）和何时删除（以“-”为前缀）

这是一个示例搜索窗口： ![示例搜索窗口](../Images/1ba21db807c9a5ed13ea274b7c5cb6ab.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:00:29.033

TortoiseHg 搜索字段支持[revsets](http://selenic.com/hg/help/revsets)。看起来有一个`grep(regex)`函数，但看起来它只是关键字函数的正则表达式变体，它只搜索“提交消息，用户名和更改文件的名称”。真可惜。看起来你唯一的选择是使用[Mercurial 的`grep`命令](http://www.selenic.com/mercurial/hg.1.html#grep)：

```
> hg grep -r ABC-123 'comma_delimited' index.php 
```

# ios - 如何在多个 OCUnit 测试用例之间共享代码？

> ID：10993732
> 
> 赞同：1
> 
> 时间：2012-06-12T09:20:45.063
> 
> 标签：ios, unit-testing, testing, refactoring, ocunit

有没有办法在几个 OCUnit 测试用例之间共享代码？也许我错过了一些明显的东西，但我做不到......

我试图将通用代码放在另一个类中，但似乎您只能在从 SenTestCase 继承的类的实例方法中使用 STAssertxxx 宏。考虑到这一点，我将这个通用代码放在从 SentTestCase 继承的单例中，没有测试方法，但这似乎打破了 OCUnit 的一些内部假设，因为我没有从共享代码中的失败测试中得到任何错误。

我当前的代码（不工作）是这样的：

```
@interface TestHelper : SenTestCase
+ (TestHelper *)sharedHelper;
- (void)assertSomething:(id)object;
@end

@implementation TestHelper
+ (TestHelper *)sharedHelper
{
    // Typical singleton magic
}

- (void)assertSomething:(id)object
{
    STAssertWhateverOnObject(object, ...);
}
@end

@interface RealTestCase : SenTestCase
- (void)testWhatever;
- (void)testAnotherThing;
@end

@implementation RealTestCase
- (void)testWhatever
{
    [[TestHelper sharedHelper] assertSomething:someObject];
    STAssertOtherThings(someObject, ...);
}

- (void)testAnotherThing
{
    [[TestHelper sharedHelper] assertSomething:someSimilarObject];
    STAssertSomeOtherThings(someSimilarObject, ...);
}
@end 
```

请注意，这是一个简单的示例。在这种情况下，我可以将所有代码放在 RealTestCase 类中，但我想要一个通用的解决方案来在多个测试用例之间共享代码，而不仅仅是在同一个测试用例中的方法之间。

顺便说一句，我在使用 Kiwi 时遇到了类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:25:29.800

我认为你的选择是：

*   使用独立的辅助函数，而不是辅助类。或者，
*   使用不同的断言机制，如[OCHamcrest](https://github.com/hamcrest/OCHamcrest)，它不会限制您使用 SenTestCase 子类。

您*可以*编写类似于 ST 的自定义断言宏，但这很痛苦（也是我编写 OCHamcrest 的部分原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:43:30.983

我首选的方法是使用函数/方法来生成数据进行测试（例如返回`BOOL`条件），而不是进行实际测试。

在某些情况下，我确实使用了宏函数——它直接展开到您的测试用例中并且没有任何限制。

# android - TabHost 包含不启动活动的 tabwidget

> ID：10993737
> 
> 赞同：0
> 
> 时间：2012-06-12T09:21:16.300
> 
> 标签：android, android-activity, tabs

我有 4 个选项卡小部件，当我单击其中的前三个时，它们必须启动各自的活动，当我单击第四个选项卡时，布局应该是背景上的先前活动，并且必须弹出选项卡下方的快速操作类型对话框。这可能吗。有人请给建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:30:05.657

希望这会有所帮助！在您的类 TabhostActivity（扩展 TabActivity）中，您必须添加：

```
Resources res = getResources();
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, your_first_tab.class);

    // Initialize a TabSpec for the first tab
    spec = tabHost.newTabSpec("").setIndicator("",res.getDrawable(R.drawable.ic_tab_name_of_the_first_tab)).setContent(intent);
    tabHost.addTab(spec);

// Initialize a TabSpec for the second tab
    intent = new Intent().setClass(this, your_second_tab.class);
    spec = tabHost.newTabSpec("").setIndicator("",res.getDrawable(R.drawable.ic_tab_name_of_the_second_tab)).setContent(intent);
    tabHost.addTab(spec); 
```

其他人的工作相同。

* * *

ic_tab_name_of_the_first_tab 是一个这样的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected, use grey -->
<item android:drawable="@drawable/first_icon_grey"
      android:state_selected="true" />
<!-- When not selected, use white-->
<item android:drawable="@drawable/first_icon_white" /> 
```

# c++ - 函数指针

> ID：10993743
> 
> 赞同：6
> 
> 时间：2012-06-12T09:21:38.480
> 
> 标签：c++, function-pointers

我正在阅读Don Clugston 在 Codeproject 上的[一篇文章](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)。这是一篇漂亮的文章，很有名。在下面的代码片段中，我发现一个特定的概念非常难以理解：

```
class A {
 public:
       virtual int Afunc() { return 2; };
};

class B {
 public: 
      int Bfunc() { return 3; };
};

// C is a single inheritance class, derives only from A
class C: public A {
 public: 
     int Cfunc() { return 4; };
};

// D uses multiple inheritance
class D: public A, public B {
 public: 
    int Dfunc() { return 5; };
}; 
```

该片段后面是以下段落：

> 假设我们为 C 类创建了一个成员函数指针。在这个例子中，Afunc 和 Cfunc 都是 C 的成员函数，所以我们的成员函数指针可以指向 Afunc 或 Cfunc。***但是 Afunc 需要一个指向 C::A（我称之为 Athis）的 this 指针，而 Cfunc 需要一个指向 C（我称之为 Cthis）的 this 指针。***编译器编写者通过一个技巧来处理这种情况：他们确保 A 在物理上存储在 C 的开头。这意味着 Athis == Cthis。我们只有一个需要担心，世界一切都很好。

我想了解的唯一一件事是上一段中粗体和斜体的行。

我不完全理解**Afunc 需要一个指向 C::A**的指针，而**Cfunc 需要一个指向 C 的指针**是很自然的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T09:30:22.263

通过在 C++ 中调用成员函数，内部发生的事情是实例作为隐藏的第一个参数传递（但请注意，此行为是严格的实现定义的行为。C++ 标准对此主题无话可说，它只是一个非常常见的实现方式）：

```
x.f(y); // is treated internally as:
f(&x, y); 
```

然后可以通过`this`指针获得第一个参数。

现在，`Afunc`在上面的示例中，*内部*有签名`void Afunc(A* const this)`，而`CFunc`有内部签名`void CFunc(C* const this)`。

请注意，两种情况下的参数类型是不同的，因此当您在同一个对象上调用函数时，必须传递不同的指针。C++ 通过定义从任何派生对象到其基础对象的隐式转换来解决这个问题。也就是说，在以下代码中：

```
C* pc = something;
pc->Afunc(); 
```

此代码在内部的处理方式类似于以下（伪代码）：

```
C* pc = something;
Afunc(static_cast<A*>(pc)); 
```

对于单继承，这种强制转换是通过引用中提到的技巧进行的无操作（即可以将其删除）：`C`对象及其父`A`对象存储在相同的物理地址中。`C`存储在内存中某个地址的类型对象的`x`物理布局方式是，其父类型对象`A`也*存储*在该地址`x`，然后是`C`可能具有的所有其他成员（但在您的情况下，它具有没有成员，并且`sizeof(C) == sizeof(A)`）。

# php - 如何在wordpress中保存来自RSS的图像

> ID：10993749
> 
> 赞同：1
> 
> 时间：2012-06-12T09:21:55.920
> 
> 标签：php, xml, wordpress, rss

我的英语是一周，所以如果你发现理解困难，那么我提前道歉。

**问题：**我正在从 RSS 编写 XML 并将其导入 wordpress，在那个 RSS 中，我有每个项目的图像，我想存储图像名称，在 wordpress 中链接帖子，

尝试了很多这样的教程，[但](http://ipggi.wordpress.com/2011/03/16/the-wordpress-extended-rss-wxr-exportimport-xml-document-format-decoded-and-explained/)我也找不到导入图像的方法，我将所有图像都放在一个目录中，

我应该将它们（图像）保存在 wordpress 中的位置以及如何将它们的名称与帖子一起保存，

如果这个问题需要编辑，请编辑它。

再次非常感谢！

# c# - 我们如何在 C# 中设置/获取其他用户的环境变量？

> ID：10993755
> 
> 赞同：0
> 
> 时间：2012-06-12T09:22:18.680
> 
> 标签：c#, .net, environment-variables

用户环境变量对于机器上的每个用户帐户都是独立的。

考虑以下情况，我使用`userA`非管理员用户帐户登录，现在我想通过使用在的上下文中`userB`运行的 C# 应用程序来获取/设置其他用户的（比如）环境变量。`userA`

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:29:55.697

环境变量存储在注册表中，因此要为其他用户更改它们，您必须导入他们的注册表配置单元。

用户变量的关键是

`HKEY_CURRENT_USER\Environment`

系统变量的关键是

`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment`

因此，如果您导入当前用户配置单元，您可以为其他用户更改它，或者对于机器变量，`HKLM`从任何管理员帐户更改密钥。

不过这很麻烦，我不建议您这样做。

或者您可以使用一些 P/Invoke 来使用[Impersonation。](https://stackoverflow.com/questions/6564153/edit-registry-key-of-other-user)

# java - Eclipse JDT AST：解析具有嵌套成员的类时出现问题

> ID：10993762
> 
> 赞同：0
> 
> 时间：2012-06-12T09:22:41.323
> 
> 标签：java, eclipse, eclipse-plugin, abstract-syntax-tree, eclipse-jdt

我想对Java源代码做一些静态代码分析。对于解析，我在 Eclipse`ASTParser`之外使用 Eclipse JDT (3.6)，代码如下：

```
private static final Map<String, String> COMPILER_OPTIONS;

static {
    COMPILER_OPTIONS = new HashMap<String, String>(JavaCore.getOptions());
    COMPILER_OPTIONS.put(JavaCore.COMPILER_COMPLIANCE, JavaCore.VERSION_1_6);
    COMPILER_OPTIONS.put(JavaCore.COMPILER_CODEGEN_TARGET_PLATFORM, JavaCore.VERSION_1_6);
    COMPILER_OPTIONS.put(JavaCore.COMPILER_SOURCE, JavaCore.VERSION_1_6);
}

private CompilationUnit parseReadSourceFileIfPossible(String readSourceFile) {
    CompilationUnit result = null;
    if (isPossibleToParse(readSourceFile)) {
        final ASTParser parser = createAndConfigureParser();
        parser.setSource(readSourceFile.toCharArray());
        result = (CompilationUnit) parser.createAST(null);
    }
    return result;
}

private ASTParser createAndConfigureParser() {
    final ASTParser result = ASTParser.newParser(AST.JLS3);
    result.setKind(ASTParser.K_COMPILATION_UNIT);
    result.setCompilerOptions(COMPILER_OPTIONS); return result;
} 
```

对于“普通”Java 类，这种方法非常有效。但是，如果我解析以下类 ( `ValidUnrestrictedComponent`)，解析器就会遇到问题。

```
package valid;

import de.htwg_konstanz.joi.annotations.JoiComponten;

@JoiComponent
public final class ValidUnrestrictedComponent {

    private static final class Implementation implements TestInterface {

        @Override
        public int doSomething() {
            // TODO Auto-generated method stub
            return 0;
        }
    }

    private ValidUnrestrictedComponent() {
        throw new AssertionError();
    }

    public static Implementation getInstance() {
        return new Implementation();
    }

    private static void getNothing() {
      // Nothing to do here
    }

    private void doNothing() {
      // Nothing to do here
    }

} 
```

我确实收到了一个 type 的对象`CompilationUnit`，但它只包含嵌套成员`Implementation`及其方法。班上的其他人——喜欢 `getInstance`或`doNothing`不见了。

得到的`CompilationUnit`包含一个字段`problems`，存在以下三个问题：

*   DefaultProblem (id=141): Pb(240) 语法错误，插入“}”完成ClassBody
*   DefaultProblem (id=143): Pb(240) Syntax error, insert "}" to complete ClassBody
*   DefaultProblem (id=164): Pb(240) Syntax error, insert "}" to complete MethodBody

I can not see any syntax errors in the above mentioned class `ValidUnrestrictedComponent`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:33:03.900

Can you double check the contents of 'readSourceFile'? My guess is that there are no '\n' or new line characters in that. Missing new-line characters would result in all the lines after the first comment becoming part of the comment itself.

# bash - 让 bash 脚本一直运行但可以中止

> ID：10993770
> 
> 赞同：5
> 
> 时间：2012-06-12T09:23:11.760
> 
> 标签：bash

我有一个这样的 bash 脚本：

```
#!/bin/bash
startsomeservice &
echo $! > service.pid

while true; do
    # dosomething in repeat all the time here
    foo bar
    sleep 5
done

# cleanup stuff on abort here
rm tmpfiles
kill $(cat service.pid) 
```

这个脚本的问题是，我不能中止它。如果我按 ctrl+ci 进入下一个循环......是否可以运行这样的脚本但让它中止？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:34:44.087

由于您使用 Bash 执行脚本，因此可以执行以下操作：

```
#!/bin/bash

startsomeservice &
echo $! > service.pid

finish()
{
    rm tmpfiles
    kill $(cat service.pid)
    exit
}
trap finish SIGINT

while :; do
    foo bar
    sleep 5
done 
```

请注意，此行为是 Bash 特定的，例如，如果您使用 Dash 运行它，您将看到两个不同之处：

1.  你无法捕捉`SIGINT`
2.  中断信号将中断 shell 循环。

另请注意，`C-c`当您直接从交互式提示符执行循环时，即使您正在运行 Bash，也会用一个循环来中断 shell 循环。请参阅有关从 shell 处理的[详细讨论。](http://www.cons.org/cracauer/sigint.html)`SIGINT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:32:26.120

以下 bash 脚本将继续运行，直到收到终止信号。陷阱命令负责处理 SIGINT。

```
#!/bin/bash

keepgoing=1
trap '{ echo "sigint"; keepgoing=0; }' SIGINT

while (( keepgoing )); do
    echo "sleeping"
    sleep 5
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T02:50:03.690

我会使用：

```
tail -f /var/log/apache2/error.log & wait ${!} 
```

在脚本的最后，我认为 sleep 会导致延迟信号处理，但这一行会立即响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T13:41:15.963

您还可以通过以下简单的方式完成任务：

```
#!/bin/bash

startsomeservice &

read # wait for user input

finish 
```

# c++ - 在将已删除的指针分配给新对象时调用析构函数

> ID：10993774
> 
> 赞同：1
> 
> 时间：2012-06-12T09:23:29.303
> 
> 标签：c++

```
 #include <iostream>
    #include <cstdlib>
    #include <string.h>

    using namespace std;

    class A {
            public:
            A () {cout<<" A\n";}
            virtual ~A () {cout<<" ~A\n";}
            };

    class B : public A {
            public:
            B () :A() {cout<<" B\n";}
            virtual ~B() {cout<<" ~B\n";}
            };

    int main (int, char *[]) {
            A *ap = new B;
            delete ap;
            A b = *ap;
            return 0;
            } 
```

输出是：

```
 A

  B

 ~B

 ~A 
```

为什么 A 的最后一个析构函数被 A b = *ap 调用 为什么不在这里调用 A 的构造函数？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:24:19.630

您遇到了**未定义的行为**，**任何事情都**可能发生。

在您调用`delete ap;`取消引用它是非法的之后：

```
delete ap;
A b = *ap; 
```

除此之外，您确实知道析构函数是按继承的相反顺序调用的，对吧？这意味着如果您删除 a ，也会调用`B`基类析构函数。`~A`

另请注意，如果它有效（不是），`A b = *ap;`将调用编译器生成的*copy-constructor*，而不是您的构造函数。

# html - 减少经典 ASP 中的所有标题

> ID：10993778
> 
> 赞同：0
> 
> 时间：2012-06-12T09:24:00.207
> 
> 标签：html, regex, asp-classic, replace

我的脚本中有一个函数，它应该接收一个 HTML 字符串并返回相同的字符串，但所有元素都应更改为高 2 级的元素（即 h1->h3、h2-> h4 等）。这个原因需要独立于大小写，并且它不能删除属性，但是，我也不打算使用完整的 html 解析器，因为这是一个相当简单的任务，所以我想我会去这与正则表达式。问题是（我对 vbscript 相当陌生）我不知道如何达到预期的效果。

我目前拥有的是这样的：

```
Function fiksoverskrifter(html)
   Dim regex, matches, match
   Set regex = New RegExp
   regex.Pattern = "<(/?)h([0-9])(.*?)>"
   regex.IgnoreCase = True
   regex.Multiline = False

   fiksoverskrifter = html

   Set matches = regex.Execute(html)
   For Each match in matches

   Next

   Set regex = Nothing
   Set matches = Nothing
   Set match = Nothing
End Function 
```

我在`For Each`-loop 中想要的只是交换数字，但是，我不知道该怎么做（我什至不确定`match`-object 暴露了哪些属性，而且我一直无法在网上找到它） .

我应该如何完成这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:50:35.267

如果只是替换标题的情况，我会使用replace（）

```
For i = 4 To 1 Step -1
    strHtml = replace(strHtml, "<h" & cstr(i), "<h" & cstr(i + 2), 1, -1, vbTextCompare)
    strHtml = replace(strHtml , "</h" & cstr(i), "</h" & cstr(i + 2), 1, -1, vbTextCompare)
Next 
```

（HTML 规范仅对`H1`- `H6`- 不确定是否要忽略`H5`&有效`H6`）

如果你想坚持使用正则表达式选项，我建议使用`regex.replace()`

我知道在 JavaScript 中你可以将匹配的模式传递给一个函数并使用该函数作为替换，这正是你在这里需要的 - 但我从未见过在 VBSCRIPT 中这样做过，例如： [使用 RegExp 匹配括号内的数字然后递增它](https://stackoverflow.com/questions/423107/use-regexp-to-match-a-parenthetical-number-then-increment-it)

**编辑1：**

找到对匹配集合和匹配对象的引用：

[http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic3](http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic3)

因此，您可以从 match.value 属性中读取匹配项，但我认为您仍然需要求助于第二次替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:34:26.380

这是一个更通用的解决方案，但可能偏离主题，因为它是在 Perl 中，而不是在 VBScript 中。请注意，我记录了它以对抗正则表达式往往具有的只写效果。

```
C:\TEMP :: more /t4 hdradj.pl
use strict;
use warnings;

# Make a subroutine that will adjust HTML headers
# (like h1, H2) by doing string replacement.
# Will only work properly for the range from 1 to 9.
sub mk_header_adjuster {
    my( $adjustment, $lower, $upper ) = @_;
# Compile substitution expression to adjust headers like h1, H2.
# Left-hand side matches headers from the range specified.
# Uses word boundaries (\b) and a character range (square brackets).
# Captures matches for "h|H" in $1 and for the level in $2.
# Right-hand side uses an eval (e-switch) to compute substitution.
# Case is ignored (i-switch), replacement is global (g-switch).
# Wraps expression in subroutine to modify first argument.
    my $str = <<"EOSUB";
sub {
    \$_[0] =~ s/\\b(h)([$lower-$upper])\\b/\$1 . (\$2 + $adjustment)/ige
}
EOSUB
#   print $str, "\n"; # debug output
    my $sub = eval $str; # compile expression
    die $@ if $@; # abort in case of errors in eval compilation
    return $sub;
}

# ==== main ====
# Test the above subroutine is working properly.
my $test_input = <<'EOS';
<h1>eins</h1>
<p>...
<h2 bla="blub">eins blub</h2>
< H2 >zwei </ H2>
<h3 >drei </h3>
<h4>vier </h4>
<h5>fünf </h5>
EOS

# Compile a header adjuster moving headers 2 to 4 by 2 levels down.
my $adjuster = mk_header_adjuster 2, 2, 4;
my $number_of_replacements = $adjuster->( $test_input );
printf STDERR
"Replaced %u header tags in supplied input.\n", $number_of_replacements;
print $test_input; 
```

# c# - 如何在图表中正确显示一周中的几天的颜色列

> ID：10993781
> 
> 赞同：1
> 
> 时间：2012-06-12T09:24:12.017
> 
> 标签：c#, winforms, mschart

我想以不同的颜色显示一周中的每一天（星期一红色、星期二绿色等），但在图表中正确显示数据时遇到问题。
我每天都有系列。但是使用**ChartType:column**时，图表每天都显示得很丑（参见此处的图片：http: [//i49.tinypic.com/oszeqt.png](http://i49.tinypic.com/oszeqt.png)）。
图表中的数据：

```
01:12000
02:12500
03:13000
04:13500
05:14029
06:14509
07:15000
08:15500
09:16000
10:16500
11:17000
12:17125 
```

一点代码

```
 DateTime dateValue = new DateTime(2012, 5, int.Parse(tempDay));

                    switch ((int)dateValue.DayOfWeek)
                    {
                        case 1:
                            chart1.Series["Monday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 2:
                            chart1.Series["Tuesday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 3:
                            chart1.Series["Wednesday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 4:
                            chart1.Series["Thursday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 5:
                            chart1.Series["Friday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 6:
                            chart1.Series["Saturday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                        case 7:
                            chart1.Series["Sunday"].Points.AddXY(int.Parse(tempDay), int.Parse(tempTime));
                            break;
                    } 
```

我的问题：如何正确显示每一列的颜色。（我不需要每天都有单独的系列。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:14:58.960

好的，我终于找到了解决方案！

```
chart1.Series[0]["DrawSideBySide"] = "false"; 
```

之后，如果它们太胖，则必须设置列的宽度

```
chart1.Series[0]["PointWidth"] = "0.1"; 
```

这也可以在自定义属性的系列属性中的设计中找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:10:02.853

不完全确定颜色本身是否是你担心的，如果是这样，我使用了这样的东西：

```
Dim ListOfColors As List(Of String) = Utilities.BuildCustomColorPalette(firstColor) 
```

..

```
Public Shared Function BuildCustomColorPalette(colorIN As String) As List(Of String)
      Dim arrCol() As String = {"DarkOrange", "Green", "Blue", "Yellow", "Purple", "Red", "Aqua", "Fuchsia", "Lime", "DodgerBlue", "Gold"}
      Dim listOfColors As New List(Of String)
      listOfColors.Add(colorIN)
      For idx = 0 To arrCol.Length - 1
         If listOfColors.Contains(arrCol(idx)) Then
            'nada
         Else
            listOfColors.Add(arrCol(idx))
         End If
         If listOfColors.Count = 10 Then
            Return listOfColors
         End If
      Next
      Return listOfColors
   End Function 
```

.. 像这样使用：

```
Chart.Series(Idx).Color = Color.FromName(ListOfColors(Idx)) 
```

# .net - 适用于 n 层架构的良好 .Net 同步框架

> ID：10993786
> 
> 赞同：3
> 
> 时间：2012-06-12T09:24:21.440
> 
> 标签：.net, wcf, entity-framework, synchronization, n-tier-architecture

对于一个项目，我需要更改服务器和客户端之间的通信。

实际上，它是一个托管在控制台应用程序中的 WCF 服务，它将整个表内容发送到客户端，客户端将其所有本地缓存​​替换为新内容。

客户端应用程序可以离线工作（我们有一个区域设置缓存，它通过序列化在磁盘上持久化，我们还有一个事务列表，它存储我们必须在连接后发送到服务器的所有更改）。

问题是这种同步现在将发生在 GSM 连接上，并且发送整个表格内容真的很繁重。

所以要么我自己实现这一切（设置修改日期，存储最后同步日期，只获取更新的字段，更新我的缓存），要么我可以找到一个标准的方法来做到这一点。我认为专门的图书馆会做得更好，因为他们已经想到了很多我当然没有的场景。

同步层的耦合度很低，所以改变它的工作方式没什么大不了的。

我的项目要求是：

*   应该有增量同步
*   可以将更改推送到服务器
*   离线访问/存储信息
*   可以进行完全重新同步（缓存损坏或新计算机）
*   服务器端的数据提供者是 Entity Framework
*   我需要重用我当前的自定义身份验证
*   奖励：某些类型有特殊的同步（例如，我有一个包含小文件的数据库，但在客户端，文件必须直接放在文件夹中）

我环顾四周看看存在什么。

我发现了一些关于 Microsoft Sync Framework 的东西，但它似乎非常面向 ADO.Net，我不确定它是否可以从实体服务中获取数据并将它们放入序列化缓存中。

所以：

你能给我一些框架或库来完成这项工作吗？或者你认为关于我的需求，我宁愿自己实现这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:36:36.327

我过去曾将 Microsoft Sync Framework 用于类似的 N-Tier 偶尔连接的客户端，并且效果很好。自从我上次使用它以来它一直在发展，但这是我看到它满足您的要求的方式。

**WCF**

在 WCF 上运行良好，这就是我们使用它的方式。（[如何：配置 N 层同步](http://msdn.microsoft.com/en-us/library/bb902831%28v=sql.105%29)）

**应该有增量同步**

同步服务可以很好地做到这一点，但您可能需要在同步表中添加时间戳。您的客户端数据库（在我的情况下是 SQL Server CE 数据库）保存上次同步时使用的最后一个时间戳，然后它将使用它来获取在下一次同步期间更改的所有内容。

**可以将更改推送到服务器**

我们又这样做了。有很多钩子可以在服务器上提供自定义逻辑来验证数据。

**离线访问/存储信息**

在完全断开连接的情况下工作正常（假设用户已经先同步了他们的数据）。请参阅[离线场景](http://msdn.microsoft.com/en-us/library/bb902819%28v=sql.105%29)。

**可以进行完全重新同步（缓存损坏或新计算机）**

它是保存所有同步信息的客户端数据库（如果需要，您可以将有关客户端已同步的内容的信息放到服务器上）。如果您删除本地数据库，则客户端将执行完全同步。

**服务器端的数据提供者是 Entity Framework**

这不是我使用它的方式，但同步提供程序是完全可定制的。我们本来打算做一个 NHibernate 的，但是问问自己为什么要这样做。开箱即用的同步服务将允许您使用存储过程或直接表查询来推送和拉取数据。这很容易设置，因为您可能使用大量数据，所以运行速度非常快，并且数据很容易跨 WCF 边界同步（尽管我们确实从 xml 格式化程序切换到二进制格式化程序以获得更好的性能）。

我们发现只是因为我们在服务器上使用了实体，它们在客户端上不一定有意义，因此我们在客户端上有了一组全新的实体。这也意味着我们在存储过程中剥离了客户端不需要的数据。同样，这很容易，您不需要弄脏 ADO.net。然后，一旦数据在客户端上，我们使用 NHibernate 读取和写入本地数据库。

[为 Microsoft Sync Framework 构建自定义同步提供程序](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2008/MBL403)

**我需要重用我当前的自定义身份验证**

如果您的意思是 WCF 自定义身份验证，那么可以，因为我们有自己的 WCF 自定义安全令牌，它运行良好，没有任何影响。

**奖励：某些类型有特殊的同步（例如，我有一个包含小文件的数据库，但在客户端，文件必须直接放在文件夹中）**

简短的回答我不知道，因为他们是我没有使用过的新框架中的文件同步提供程序，但您还有另外两个选择。

1.  在客户端同步期间，您实际上可以挂钩数据将被放入表中的点，您有机会提取二进制数据并将其写入文件系统而不是数据库。

2.  从同步中排除文件二进制数据，并在同步后使用另一个进程拉下此数据。我们这样做是因为我们拉下的包非常大，所以我们使用初始同步来拉下“元数据”，然后我们使用称为[BITS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968799%28v=vs.85%29.aspx)的东西，它是 Windows 的一部分来异步拉下文件。

[Microsoft Sync Framework 文件同步提供程序简介](http://msdn.microsoft.com/en-us/sync/bb887623)

**[更新]**

回应评论中提出的问题。

1.  我的应用程序应该适用于同一台计算机上的不同用户。在我的情况下，我使用隔离存储来保证它们在不同的位置工作，这对于 SQL Server CE 是否可行？

    我们的应用程序是通过 ClickOnce 部署的，它将为每个用户提供单独的应用程序安装，但我认为这不是所要求的。SQL CE 只是一个内存数据库，您将指向[`SqlCeEngine`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceengine%28v=vs.100%29.aspx)要加载的数据库文件，因此隔离存储是完美的。

2.  据我所知，SQL Server CE 就像 SQLite，你如何管理模式创建？

    如果需要，您可以让 Snyc Services 为您创建数据库架构，这足以让您继续前进，但从长远来看，您可能不得不在某个时候更改架构。这可能会在您进行升级时进行，因此您最好尽早考虑它。我通过不将数据库视为属于同步服务而是将其视为同步服务被告知它可以使用的方式来处理这个问题。

    当我们的应用程序启动时，它会做一些内务处理，比如如果数据库不存在则创建数据库，或者如果应用程序刚刚升级，则运行数据库脚本。

3.  你知道是否有这个 N 层同步的类实现示例吗？我需要看看我必须实现哪些接口。

    当前的稳定版本是 2.1，我在 2.0 发布时使用它，所以我所有的工作都在 1.0 中。这是MSDN 上[Microsoft Sync Framework 2.1](http://msdn.microsoft.com/en-us/library/bb902854) api 的链接。我必须使用 1.0 文档来查找我用来驱动 WCF 接口的示例，所以我不知道事情发生了多大的变化，但你可以使用[它](http://msdn.microsoft.com/en-us/library/bb902831%28v=sql.105%29)来开始，它将接口定义为：

    [ServiceContract] 公共接口 IServiceForSync { [OperationContract()] SyncContext ApplyChanges(SyncGroupMetadata groupMetadata, DataSet dataSet, SyncSession syncSession);

    ```
    [OperationContract()]
    SyncContext GetChanges(SyncGroupMetadata groupMetadata, SyncSession syncSession);

    [OperationContract()]
    SyncSchema GetSchema(Collection<string> tableNames, SyncSession syncSession);

    [OperationContract()]
    SyncServerInfo GetServerInfo(SyncSession syncSession); 
    ```

    }

4.  我想每种数据类型都有一项服务？

不，正如您从上面看到的，只有一项服务。同步的内容取决于您在服务器上公开的内容以及客户端想要参与的内容。例如，我们有两个客户端，一个只对一小部分数据感兴趣并且只参与同步几个表（称为a [`SyncTable`](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.synctable.aspx)) 其他同步所有表的地方。

还有一个 a 的概念[`SyncGroup`](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.syncgroup.aspx)，这些由相关的更改组成，这些更改应该以事务方式持久化，因为它们都是相关的，即如果一个失败，它们都会失败。您还可以单独同步组，而无需同步所有内容。

5.  我可以只同步与用户相关的数据吗？

绝对地。当您进行同步时，您会传递一个[`SyncParameter`](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.syncparameter.aspx)包含值的值，您可以使用这些值来过滤返回给客户端的数据。[如何：过滤行和列](http://msdn.microsoft.com/en-us/library/bb726003%28v=sql.105%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:35:49.220

根据您可以或愿意部署和公开服务器的方式，您可以使用[SQL Server 复制](http://msdn.microsoft.com/en-us/library/ms151198%28v=sql.105%29.aspx)

当您担心应用程序时，复制可以处理所有繁琐的[复制任务。](http://msdn.microsoft.com/en-us/library/ms152531%28v=sql.105%29.aspx)

您可能会考虑安装 SQL Express 并使用合并复制。

**编辑** [使用参数化过滤器](http://msdn.microsoft.com/en-us/library/ms152478.aspx)来管理将复制哪些数据并[使用引导程序安装 SQL Express 作为先决条件](http://robindotnet.wordpress.com/2011/02/06/how-about-a-bootstrapper-package-for-sqlserver-express-2008-r2/)。显然微软没有为 SQL Express 提供引导程序，[这里有一个关于](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/1365acab-b62b-438c-97e4-a6187319812b/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:19:01.523

你看过这个[Database Sync: SQL Server and SQL Compact N-Tier with WCF](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-7e88adab)吗？

过滤也不是那么难，请参阅：[演练：定义过滤范围和供应服务器](http://msdn.microsoft.com/en-us/library/ff928521)和[演练：供应具有过滤范围的客户端](http://msdn.microsoft.com/en-us/library/ff928732)

# json - 使用 json 数据返回一个网格

> ID：10993794
> 
> 赞同：0
> 
> 时间：2012-06-12T09:24:54.790
> 
> 标签：json, express

我的节点服务器中有以下代码。我遇到间歇性的“套接字不可写”问题，有人知道为什么会这样吗？

第二个问题 - 哪个网格最适合显示我的 json 数据？

```
var express = require('express');
var app = express.createServer(express.logger());
var pg = require('pg');
var async = require('async');

app.configure(function() {
  console.log("Configuring");
  app.use(express.bodyParser());
});

app.get('/', function(req, res) {

  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "X-Requested-With");

  var output = '';
  pg.connect(process.env.DATABASE_URL, function(err, client) {
    var query = client.query('SELECT * FROM links');

    query.on('row', function(row) {
      output += JSON.stringify(row);
    });

    query.on('end', function() {
      client.end();
      res.send(output);
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:58:28.750

1 - 您应该在服务器启动时初始化您的数据库连接，而不是在每次请求响应时都这样做。

2 - 这种建议超出了stackoverflow的目的+我们不知道你想显示什么+我们不知道你在客户端使用什么技术/框架（甚至不确定你想输出HTML... ) + 我们不知道您正在处理什么数据...

# codeigniter - 如何更改控制器中配置项的值？- 代码点火器

> ID：10993795
> 
> 赞同：4
> 
> 时间：2012-06-12T09:24:57.240
> 
> 标签：codeigniter, controller, config

我有一个配置文件：`application/config/breadcrumbs.php`

在文件中，我有以下配置项：

```
$config['hide_number'] = TRUE; 
```

如何通过控制器更改此配置项的值。

我只需要更改一次此配置项的值。这是怎么做到的？？？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T09:28:10.377

```
$this->config->load('breadcrumbs');
$this->config->set_item('hide_number', 'your value'); 
```

有关更多信息，请参阅文档：

[http://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)

# c# - 如何使用 LibGit2Sharp 部分暂存文件？

> ID：10993798
> 
> 赞同：3
> 
> 时间：2012-06-12T09:25:16.160
> 
> 标签：c#, .net, git, libgit2, libgit2sharp

我已提交此文件：

**foo.txt**

```
line 1
line 2
line 3 
```

现在我将其修改为：

```
line 1
line 1.5
line 2
line 2.5
line 3 
```

我跑`git add . && git diff --cached foo.txt`了，这就是我得到的：

```
diff --git a/foo.txt b/foo.txt
index c4dfc64..4942553 100644
--- a/foo.txt
+++ b/foo.txt
@@ -1,3 +1,5 @@
 line 1
+line 1.5^M
 line 2
+line 2.5^M
 line 3 
```

假设我现在想`line 1.5`从索引中删除并保留`line 2.5`，我将如何使用 LibGit2Sharp 执行此操作？

这也可以反过来问：如何将部分文件添加到索引？我正在寻找某种程序化版本的`git add -p`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:46:32.280

显然没有简单的（理解：LibGit2Sharp-native）方法来做到这一点。

但这可能是可能的。为什么要删除此特定行？这取决于您的标准，但更简单的方法是简单地编辑文件本身（由 的结果帮助`git diff --cached foo.txt`）。所以 git 不会暂存你不需要的修改。

# iis - 如何在 IIS 中启用/禁用表单身份验证

> ID：10993801
> 
> 赞同：0
> 
> 时间：2012-06-12T09:25:22.533
> 
> 标签：iis, wix, appcmd

我正在使用 WIX 工具构建安装包。我需要根据用户要求为 IIS 中的特定虚拟目录启用/禁用表单身份验证。我已经尝试过 appcmd 命令，但无法让它工作：

`appcmd set config "Default Web Site/Test" /commit:WEBROOT /section:system.web/authentication /mode:Forms /commit:apphost`

请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:24:46.553

这是对我有用的代码..

要启用表单身份验证：

```
appcmd set config "Default Web Site/Test" /section:system.web/authentication /mode:Forms 
```

要禁用表单身份验证：

```
appcmd set config "Default Web Site/Test" /section:system.web/authentication /mode:Windows 
```

刚刚删除`/commit:WEBROOT`以使其正常工作。

如果我要添加`/commit:WEBROOT`上述代码仅适用于“默认网站”而不适用于“默认网站/测试”

# c# - 分离 XML 值

> ID：10993803
> 
> 赞同：0
> 
> 时间：2012-06-12T09:25:34.213
> 
> 标签：c#, oracle11g

我在 .Net 和 Oracle 工作。我的表中有一个 XML 数据。我的数据是这样的。。

```
<Goals>
    <Reg>
        <Min>75</Min>
        <Max>90</Max>
    </Reg>
    <Sale>
        <Min>75</Min>
        <Max>90</Max>
    </Sale>
</Goals> 
```

该表中还有其他一些列。我需要获取这个，我应该在 gridview 中绑定这个值。我的 gridview 将为这些 XML 提供单独的列。例如，Reg Min、Reg Max、Sale Min、Sale Max 等。

我应该如何分离这个 XML 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:29:17.720

使用[Linq to XML](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.load.aspx) ,

```
XDocument doc = XDocument.Parse(str);
string max = (string)doc.Root.Element("Reg").Element("Max");//return Max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:09:38.090

您也可以在数据库中执行此操作：

```
select t.id,
       xmltype(t.xmltext) .extract('//Reg/Min/text()').getstringval() reg_min,
       xmltype(t.xmltext) .extract('//Reg/Max/text()').getstringval() reg_max,
       xmltype(t.xmltext) .extract('//Sale/Min/text()').getstringval() sale_min,
       xmltype(t.xmltext) .extract('//Sale/Max/text()').getstringval() sale_max
  from table_name t 
```

我用作`table_name`您的表名，并`xmltext`用作保存您的 xml 的列名（假设它是一个字符串）

# symfony - Symfony2表单提交相关实体错误

> ID：10993813
> 
> 赞同：1
> 
> 时间：2012-06-12T09:26:08.313
> 
> 标签：symfony, symfony-forms

提交与相关实体的来自时遇到问题。提交表单时收到以下错误消息：

```
Catchable Fatal Error: Argument 1 passed to 
My\ReportBundle\Entity\Clearance::setProjectProject() must be an instance of 
My\ReportBundle\Entity\Project, null given, called in
/var/www/Symfony/src/My/ReportBundle/Controller/DefaultController.php on line 85 and 
defined in /var/www/Symfony/src/My/ReportBundle/Entity/Clearance.php line 272 
```

表单构建器代码如下所示：

```
namespace My\ReportBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ClearanceType extends AbstractType
{

public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        // Fields from the clearance entity removed ...
        // here is the problematic entry
        ->add('projectProject','entity',
         array('class'=>'My\ReportBundle\Entity\Project', 'property'=>'projectId'))
      ;
     }

      public function getName()
     {
         return 'my_reportbundle_clearancetype';
      } 
```

控制器包含以下代码：

```
 public function newclearanceAction()
     {
    $request = $this->getRequest();
    $id = $request->query->get('projectId');
    $em = $this->getDoctrine()->getEntityManager();
    $project = $em->getRepository("MyReportBundle:Project")->find($id);

    $clearance = new Clearance();
    $clearance->setProjectProject($project);
    $form = $this->createForm(new ClearanceType(), $clearance);

    if ($request->getMethod() == 'POST'){
            $form->bindRequest($request);

            if($form->isValid()) {
                    $em = $this->getDoctrine()->getEntityManager();
                    $em->persist($clearance);
                    $em->flush();
                    return $this->
                    redirect($this->generateUrl('MyReportBundle_project_list'));
            }
         }
         return $this->render('MyReportBundle:Clearance:new.html.twig',
                 array('form'=>$form->createView())); 
```

我不知道如何解决这个问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:37:55.293

当您发布表单时，您是否在查询字符串中设置了 projectId？

如果不尝试：

```
$request = $this->getRequest();

$em = $this->getDoctrine()->getEntityManager();
$clearance = new Clearance();

if($request->getMethod() != 'POST'){
    $id = $request->query->get('projectId'); 
    $project = $em->getRepository("MyReportBundle:Project")->find($id);
    $clearance->setProjectProject($project);
}
$form = $this->createForm(new ClearanceType(), $clearance); 
```

错误来了，因为当您尝试通过 id 查找一个项目时，您没有得到一个项目，因此当您尝试设置项目时，您正在传递一个空值。

# java - 如果我们已经有子类的超类，我们如何调用超类方法？

> ID：10993814
> 
> 赞同：2
> 
> 时间：2012-06-12T09:26:18.003
> 
> 标签：java

我的问题是，如果有一个子类由父类扩展并且由祖父类扩展，那么子类如何直接访问祖父的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:43:12.070

最好用一个例子来说明这一点：

```
public class GF {
    public void one() { ... }
    public void two() { ... }
}

public class F extends GF {
    public void two() { ... }
}

public class C extends F {
    public void one() {
        super.one(); // Calls one in GF
    }

    public void two() { 
        super.two(); // Calls two in F
    }
} 
```

从子类中调用重写方法的语法是`super.method(....)`. 但是你只能这样做来调用第一级覆盖的方法。如果该方法本身是一个覆盖，那么您不能调用第二级覆盖；例如，没有`C.two()`办法直接调用`GF.two()`。你不能反射性地这样做，甚至 JVM 字节码也不允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:29:11.697

这取决于祖父的方法可见性。一般来说，它可以作为父亲的方法来访问。如果你想跳过父类对祖父方法的覆盖，你不能在不修改父类的情况下做到这一点。

调用祖父方法的唯一方法是这样的：

```
public class GF {
    public void m() {
        //do something
    }
}

public class F {

    public void m() {
        //do something that you don't need in son
    }

    /* add this method for the clean access to GF*/
    public void gfM() {
        super.m();
    }
}

public class S {
    public void aMethod() {
        gfM(); //actually calls the GF.m() method
    }
} 
```

# sql - 组功能不适用于字符行

> ID：10993815
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:26:18.333
> 
> 标签：sql, oracle

我在 Oracle 表中有这种格式的数据

```
Gname, PBOOK, CNIC,  LPNAME, ACRE 
Bilal  1234   33202  A            
       1234          A       2    
       1234          A       2    
Adeel  5678   35230  B            
       5678          B       3    
       5678          B       5 
```

我想总结一下提交的英亩数，数据应该是这样的

```
 Gname, PBOOK, CNIC,  LPNAME, SUM(ACRE) 
    Bilal  1234   33202  A       4    
    Adeel  5678   35230  B       8 
```

请给出任何想法在 oracle 中制作这种 sql 语句，以便生成我想要的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:56:07.853

我不确定我是否完全理解您，但您可以尝试：

```
 SELECT max(Gname), PBOOK, max(CNIC),  LPNAME, SUM(ACRE)
    FROM your_table
GROUP BY PBOOK, LPNAME 
```

# arrays - Magento 记录打印数组内容

> ID：10993818
> 
> 赞同：5
> 
> 时间：2012-06-12T09:26:27.023
> 
> 标签：arrays, magento, logging

Mage::log 对我来说很好，**除了**打印数组信息。

例如，如果我有一个数组 $result，然后执行以下操作：

Mage::log('[CartController: getDeliverLeadTime(country): ' . $result . ')');

在我的 system.log 文件中，我刚刚得到： [CartController: getDeliverLeadTime~(country): **Array** )

***我希望它像普通的 print_r 那样打印数组的实际结构和内容。***

如果我对数组执行 var_dump，我什么也得不到，即 [CartController: getDeliverLeadTime~(country): )。

如果我做一个 print_r 我得到： [CartController: getDeliverLeadTime~(country): 1)

这对我来说是一个障碍，因为我无法调试我需要的东西 - 如果有人能阐明如何让 Magento 实际打印日志中的数组内容，将不胜感激。

我在 alanstorm.com 上读到它意味着默认情况下会发生，但它不适合我。

谢谢保罗

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T09:30:32.700

您必须将[print_r](http://php.net/manual/en/function.print-r.php)作为字符串返回，所以`print_r($result, true)`应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-18T06:46:39.070

**试试看**

```
$array = array('ID' => 1, 'NAME' => 'Amaresh', 'EMAIL' => 'example@gmail.com');

Mage::log($array); 
```

**输出**

```
2015-09-18T06:44:24+00:00 DEBUG (7): Array
(
    [ID] => 1
    [NAME] => Amaresh
    [EMAIL] => example@gmail.com
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:17:16.390

看看代码下面的代码，

```
$collection = Mage::getModel('catalog/product')->getCollection()
Mage::log("Query product: ".print_r($collection->getData(), true),null,'test.log'); 
```

检查文件夹`test.log`中的`var/log`文件。

# database - 架构或不同的数据库 - SQL Server 2008？

> ID：10993820
> 
> 赞同：0
> 
> 时间：2012-06-12T09:26:29.833
> 
> 标签：database, sql-server-2008, database-design

我们正在开发一个包含多个平台（例如视频、论坛等）的系统。

作为数据库平台，我们使用的是 SQL Server 2008。

我有一个来自数据库方面的问题。

将所有平台的集中式数据库分开在不同的模式上，还是每个平台都有不同的数据库更好？

注意：平台需要通信（通过服务）。所有用户都需要拥有单点登录并跨平台共享所有个人信息。

此外，还要考虑数据库维护和分区。

有什么建议么？

# java - 为动态添加的视图设置 OnClickListeners

> ID：10993822
> 
> 赞同：0
> 
> 时间：2012-06-12T09:26:42.220
> 
> 标签：java, android, android-layout, dynamic, android-widget

我正在向线性布局添加一个小视图。我必须对其应用 a `View.OnClickListener`，但即使添加了视图，`onClick`仍然不会触发。这是我的方法

```
for (Streams stream : streamArray) {
streamCount++;
    if (!(streamCount > 3)) {
    // ADD AN ITEM
    View v = li.inflate(R.layout.stream_item, theLinearLayoutforStreamItems, false);
    //SET ONCLICK

    v.setOnClickListener(new android.view.View.OnClickListener() {

        public void onClick(View v) {
            Log.i("onclick", ""+position );
            }
        });

    txtStreamItem = (TextView) v.findViewById(R.id.txtViewStream_item);
    txtStreamItem.setText(stream.name);
    theLinearLayoutforStreamItems.addView(v);

} 
```

`onClick()`不开火。我不知道为什么，我在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:30:34.777

我认为您真正想要实现的是：

```
txtStreamItem.setOnClickListener(new android.view.View.OnClickListener() {

    public void onClick(View v) {
        Log.i("onclick", ""+position );
        }
    }); 
```

把它放在这条线的下面：

```
txtStreamItem = (TextView) v.findViewById(R.id.txtViewStream_item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:29:03.467

设置`View.setClickable`& `focus-able true`。

# javascript - 做 N 次（声明式语法）

> ID：10993824
> 
> 赞同：120
> 
> 时间：2012-06-12T09:26:54.650
> 
> 标签：javascript, jquery, underscore.js

Javascript中有没有一种方法可以轻松编写这样的内容：

```
[1,2,3].times do {
  something();
} 
```

任何可能支持某些类似语法的库？

**更新：**澄清 - 我想`something()`为每个数组元素迭代分别调用 1,2 和 3 次

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-12T09:27:46.600

只需使用一个`for`循环：

```
var times = 10;

for(var i = 0; i < times; i++){
    doSomething();
} 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2016-08-30T15:50:40.327

可能的 ES6 替代方案。

```
Array.from(Array(3)).forEach((x, i) => {
  something();
}); 
```

而且，如果您希望它“分别被调用 1,2 和 3 次”。

```
Array.from(Array(3)).forEach((x, i) => {
  Array.from(Array(i+1)).forEach((x, i2) => {
    console.log(`Something ${ i } ${ i2 }`)
  });
}); 
```

### 更新：

取自[fill-arrays-with-undefined](http://2ality.com/2018/12/creating-arrays.html#filling-arrays-with-undefined:)

这似乎是创建初始数组的一种更优化的方式，我还更新了它以使用@felix-eve 建议的第二个参数映射函数。

```
Array.from({ length: 3 }, (x, i) => {
  something();
}); 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-12-03T19:29:00.197

这个答案是基于`Array.forEach`，没有任何库，只是原生[香草](http://vanilla-js.com/)。

要基本上调用`something()`3 次，请使用：

```
[1,2,3].forEach(function(i) {
  something();
}); 
```

考虑以下功能：

```
function something(){ console.log('something') } 
```

输出将是：

```
something
something
something 
```

* * *

要完成这个问题，这里有一种`something()`分别调用 1、2 和 3 次的方法：

### 现在是 2017 年，你可以使用 ES6：

```
[1,2,3].forEach(i => Array(i).fill(i).forEach(_ => {
  something()
})) 
```

### 或者在旧的 ES5 中：

```
[1,2,3].forEach(function(i) {
  Array(i).fill(i).forEach(function() {
    something()
  })
})) 
```

在这两种情况下，输出将是

输出将是：

```
something

something
something

something
something
something 
```

（一次，两次，然后3次）

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2018-07-18T10:31:59.367

### 在使用之前创建一个数组和[`fill`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)所有项目：`undefined`[`map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

[阅读](https://stackoverflow.com/a/18949651/104380)`map`跳过从未定义的数组项的详细原因

⚠️*`Array.fill`没有**IE**支持*

```
Array(5).fill().map((item, i) => console.log(item, i))
```

[或者通过解构 Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)进行与上述相同的操作，如果未设置项目的值，则会自动为每个项目*设置：* `undefined`

```
[...Array(5)].map((item, i) => console.log(item, i))
```

* * *

如果您想让上述内容更具***“声明性”***，我目前基于意见的解决方案将是：

```
const iterate = times => callback => [...Array(times)].map((n,i) => callback(i))

iterate(3)(console.log)
```

* * *

### 使用老式（反向）循环：

```
// run 5 times:
for( let i=5; i--; )
   console.log(i) 
```

或作为声明性的*"while"*：

```
const run = (cb, ...args) => count => { while(count--) cb(...args) }

// executes the callback with whatever arguments, 3 times
run(console.log, 1,2,3)(3)
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2016-08-20T04:25:10.870

使用[lodash](https://lodash.com)：

```
_.each([1, 2, 3], (item) => {
   doSomeThing(item);
});

//Or:
_.each([1, 2, 3], doSomeThing); 
```

或者如果你想做**N 次**：

```
const N = 10;
_.times(N, () => {
   doSomeThing();
});

//Or shorter:
_.times(N, doSomeThing); 
```

安装参考这个[链接](https://lodash.com)`lodash`

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-06-12T10:05:41.047

既然你提到了下划线：

假设`f`是您要调用的函数：

```
_.each([1,2,3], function (n) { _.times(n, f) }); 
```

会成功的。例如，使用`f = function (x) { console.log(x); }`，您将进入控制台： `0 0 1 0 1 2`

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2019-10-08T11:14:23.257

您也可以对解构执行相同的操作，如下所示

```
[...Array(3)].forEach( _ => console.log('do something')); 
```

或者如果你需要索引

```
[...Array(3)].forEach(( _, index) => console.log('do something')); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-10-24T08:51:11.323

如果不能使用 Underscorejs，可以自己实现。通过将新方法附加到 Number 和 String 原型，您可以这样做（使用 ES6 箭头函数）：

```
// With String
"5".times( (i) => console.log("number "+i) );

// With number variable
var five = 5;
five.times( (i) => console.log("number "+i) );

// With number literal (parentheses required)
(5).times( (i) => console.log("number "+i) ); 
```

您只需创建一个函数表达式（任何名称）并将其分配给您想要访问它的任何属性名称（在原型上）：

```
var timesFunction = function(callback) {
  if (typeof callback !== "function" ) {
    throw new TypeError("Callback is not a function");
  } else if( isNaN(parseInt(Number(this.valueOf()))) ) {
    throw new TypeError("Object is not a valid number");
  }
  for (var i = 0; i < Number(this.valueOf()); i++) {
    callback(i);
  }
};

String.prototype.times = timesFunction;
Number.prototype.times = timesFunction; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-07T08:57:28.420

有一个很棒的库叫做 Ramda，它类似于 Underscore 和 Lodash，但更强大。

```
const R = require('ramda');

R.call(R.times(() => {
    console.log('do something')
}), 5); 
```

Ramda 包含很多有用的功能。参见[Ramda 文档](https://ramdajs.com/docs/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-12T09:31:46.300

只需使用嵌套循环（可能包含在函数中）

```
function times( fct, times ) {
  for( var i=0; i<times.length; ++i ) {
    for( var j=0; j<times[i]; ++j ) {
      fct();
    }
  }
} 
```

然后像这样调用它：

```
times( doSomething, [1,2,3] ); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-12T10:08:20.640

```
times = function () {
    var length = arguments.length;
    for (var i = 0; i < length ; i++) {
        for (var j = 0; j < arguments[i]; j++) {
            dosomthing();
        }
    }
} 
```

你可以这样称呼它：

```
times(3,4);
times(1,2,3,4);
times(1,3,5,7,9); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-06-12T09:28:42.047

```
var times = [1,2,3];

for(var i = 0; i < times.length;  i++) {
  for(var j = 0; j < times[i];j++) {
     // do something
  }
} 
```

使用 jQuery`.each()`

```
$([1,2,3]).each(function(i, val) {
  for(var j = 0; j < val;j++) {
     // do something
  }
}); 
```

或者

```
var x = [1,2,3];

$(x).each(function(i, val) {
  for(var j = 0; j < val;j++) {
     // do something
  }
}); 
```

# 编辑

您可以使用纯 JS 执行以下操作：

```
var times = [1,2,3];
times.forEach(function(i) {
   // do something
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-06-12T09:34:06.500

您可以使用

Array.forEach

例子：

```
function logArrayElements(element, index, array) {  
    console.log("a[" + index + "] = " + element);  
}  
[2, 5, 9].forEach(logArrayElements) 
```

或使用 jQuery

```
$.each([52, 97], function(index, value) { 
  alert(index + ': ' + value); 
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-01-20T16:56:15.043

简单的一会儿怎么样。

```
let times = 5;

while (times--) {

    console.log(times+1)

}
```

关于其工作原理的参考：[Falsy](https://developer.mozilla.org/en-US/docs/Glossary/Falsy)和[Decrement (--)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Decrement)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-08-29T15:08:57.300

# [Array.from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from) (ES6)

```
function doSomthing() {
    ...
} 
```

像这样使用它：

```
Array.from(Array(length).keys()).forEach(doSomthing); 
```

或者

```
Array.from({ length }, (v, i) => i).forEach(doSomthing); 
```

或者

```
// array start counting from 1
Array.from({ length }, (v, i) => ++i).forEach(doSomthing); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-03-30T18:00:59.583

```
// calls doSomething 42 times
Array( 42 ).join( "x" ).split( "" ).forEach( doSomething ); 
```

和

```
// creates 42 somethings
var somethings = Array( 42 ).join( "x" ).split( "" ).map( () => buildSomething(); ); 
```

或（通过[https://stackoverflow.com/a/20066663/275501](https://stackoverflow.com/a/20066663/275501)）

```
Array.apply(null, {length: 42}).forEach( doSomething ); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-06-06T20:47:39.180

```
const loop (fn, times) => {
  if (!times) { return }
  fn()
  loop(fn, times - 1)
}

loop(something, 3) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-01-28T03:00:10.683

假设我们可以使用一些像扩展运算符这样的 ES6 语法，我们会想要做的次数与集合中所有数字的总和一样多。

在这种情况下，如果 times 等于`[1,2,3]`，则总次数将为 6，即 1+2+3。

```
/**
 * @param {number[]} times
 * @param {cb} function
 */
function doTimes(times, cb) {
  // Get the sum of all the times
  const totalTimes = times.reduce((acc, time) => acc + time);
  // Call the callback as many times as the sum
  [...Array(totalTimes)].map(cb);
}

doTimes([1,2,3], () => console.log('something'));
// => Prints 'something' 6 times 
```

如果构造和传播数组背后的逻辑不明显，这篇文章应该会[有所帮助。](https://itnext.io/heres-why-mapping-a-constructed-array-doesn-t-work-in-javascript-f1195138615a)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-07-03T03:07:32.173

给定一个函数`something`：

```
function something() { console.log("did something") } 
```

并在原型`times`中添加了一个新方法：`Array`

```
Array.prototype.times = function(f){
  for(v of this) 
    for(var _ of Array(v))
      f();
} 
```

这段代码：

```
[1,2,3].times(something) 
```

输出这个：

```
did something
did something
did something
did something
did something
did something 
```

我*认为*这回答了您更新的问题（5 年后），但我想知道在阵列上进行这项工作有多大用处？效果会不会和 call 一样`[6].times(something)`，而 call 又可以写成：

```
for(_ of Array(6)) something(); 
```

（虽然`_`如果你使用它作为垃圾变量可能会破坏lodash或下划线）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-07T03:48:22.270

**打字稿实现：**

对于那些对如何实现`String.times`以及`Number.times`以一种类型安全且与`thisArg`.

```
declare global {
    interface Number {
        times: (callbackFn: (iteration: number) => void, thisArg?: any) => void;
    }
    interface String {
        times: (callbackFn: (iteration: number) => void, thisArg?: any) => void;
    }
}

Number.prototype.times = function (callbackFn, thisArg) {
    const num = this.valueOf()
    if (typeof callbackFn !== "function" ) {
        throw new TypeError("callbackFn is not a function")
    }
    if (num < 0) {
        throw new RangeError('Must not be negative')
    }
    if (!isFinite(num)) {
        throw new RangeError('Must be Finite')
    }
    if (isNaN(num)) {
        throw new RangeError('Must not be NaN')
    }

    [...Array(num)].forEach((_, i) => callbackFn.bind(thisArg, i + 1)())
    // Other elegant solutions
    // new Array<null>(num).fill(null).forEach(() => {})
    // Array.from({length: num}).forEach(() => {})
}

String.prototype.times = function (callbackFn, thisArg) {
    let num = parseInt(this.valueOf())
    if (typeof callbackFn !== "function" ) {
        throw new TypeError("callbackFn is not a function")
    }
    if (num < 0) {
        throw new RangeError('Must not be negative')
    }
    if (!isFinite(num)) {
        throw new RangeError('Must be Finite')
    }
    // num is NaN if `this` is an empty string 
    if (isNaN(num)) {
        num = 0
    }

    [...Array(num)].forEach((_, i) => callbackFn.bind(thisArg, i + 1)())
    // Other elegant solutions
    // new Array<null>(num).fill(null).forEach(() => {})
    // Array.from({length: num}).forEach(() => {})
} 
```

可以在[此处找到带有一些示例的](https://www.typescriptlang.org/play/?ssl=51&ssc=2&pln=1&pc=1#code/CYUwxgNghgTiAEBzCB7ARlC8DeAoeB8AlgHYAuIMAZlGAgHICuAtmpTvoV2UcyAM4AueAAowmCBjABrAGIlhIohRhQeKBfBIs2MAJTwAvAD54ANxRFgAGnhkAFkX4BBGIgD8wqCQCeBk%20aWwADcnAQAvmHE5JQ0dPAAymQwpIgcXNy8AoriEJK0cppKKmpEGsLarJT%20phZWtg5Orh5evjWBVqFckZG4TFUwAHQADjAoZOM%20wyCDPHz8RvBUjCRg6iSiufky8g2OLm4GeFxgGvxkWiyLjfyDZpiMIADyVCJ6UURUomRTIChfWykhXgAEJDIZ4AAiZardaQ%20BHKLcexjADuWhA6IAKr8AKIwMYwESQwEFeTEBYkcbwKBLFZrMokSHvbofL4iSrwAA88AADIiMoQHGiMeiAEreRAgfGEkQAcgAsoxzlpqWwMYhSmYQHKWYRIlxPqIQU5ZKRlCAOSw9ALBXYUSh0SRMfAJSQpTKUETFcqLuqzSQLbqogbCEalPx6FB6FbmDb0nbhY7Ra7JdKCV75UqVVS-Qxo8HWVEANqDMuuVQ%20WN6AC6gyoXtxtHsIhEAH1bER2qSdiRBmhSMARDdmp34ABqeAARj0bz1BAA9Av4E8HOwQBAQJryPB%20CgIIx1vwokuUxWoD4udo8sZq-WiHkrXk9PXG83W%201sOF5-BT%20efPWYzMCI2Cbu6DgVCw36vjATZgC2bxGKYX7vL0SQpO6IxjBMPzTLMWQLBCMIMhomwSECuz2k0hwJgQm4XJyELDLA-AgAAkuQw77HcDzPK8Npst8vz-PAPbAmCELQvScIIrRGRJk6Lo4tMnpEiS5FkhsTiqhctLEXCP6hgQ4acjy-JyciIrOuKaaqVmvo6fA6rOpqPDaoW%20qCSIJr8AGFrVragoKSmboehm3rZnm8B%20RQHkRCey6ctpUb0MQXwAAY3OlFI0hsIDMMMPy7skqTwF5TgpQFFmEIxfIhrgJZloM-7VnWDawe%207adt2Gm9v2g5cdRiBjpOM5zglK5rjA8Ablu3gXHuB5HhN1nwP%20V6MDed5UA%20EBPhAL7tXBCGft%20E3-oBKDAaBIDgfYkHMNBR2dadqENaepwkDmW5YqiKCLAAtAATLgp4ub9KD4fMH5IaJZz7jMqCIPKlS6MIjgMXNbk6gJp4pVDAgwwEn2LYjKDI3KqOUOjyjwClurvKeHE7YGPwE-wROmCTCODEjKM6NT8AY-AzPmj8DO4CTFwgAAHlABWbli%20yLNgO3asIACskT0XYf2LCDZB-ezIj6Yy3z7MIuF-F8svy8Miv7J2JTrIFcNfTzfNyvBD7AFRQjwHKexOD%203Obrz5PEhaqjrAAxMIkJO5QpQaKhti2wrIBK8HDWg8ucpysbiHE-DYee%20cGGIDTFz07jefAwXcyE0XXMl2TFPl6kVcalqOOM3nGsNwRnNu6T4ftyV7pVxLuCy8MXoXNg8DhKEQA)**TypeScript Playground**链接

这篇文章实现了由**Andreas Bergström**、 vinyl 、**Ozay Duman**和**SeregPie发布的解决****方案**

 ***** * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-18T20:15:34.920

这些答案都很好，IMO @Andreas 是最好的，但很多时候在 JS 中我们必须异步执行操作，在这种情况下，async 已经涵盖了：

[http://caolan.github.io/async/docs.html#times](http://caolan.github.io/async/docs.html#times)

```
const async = require('async');

async.times(5, function(n, next) {
    createUser(n, function(err, user) {
        next(err, user);
    });
}, function(err, users) {
    // we should now have 5 users
}); 
```

这些“时间”功能对于大多数应用程序代码来说不是很有用，但对测试应该很有用。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-15T16:07:36.003

使用`Array.from`和`.forEach`。

```
let length = 5;
Array.from({length}).forEach((v, i) => {
  console.log(`#${i}`);
});
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-05-31T15:19:11.873

只是想我要补充一下，有一个漂亮的 JS 方法被调用`.repeat(n)`，它会重复一个字符串“n”次。因此，如果您正在寻找可以重复字符串“n”次的内容...

```
function repeatString (number, string) {
  return string.repeat(number);
} 
```

所以如果你这样做...

```
repeatString(3, 'Hey there! '); 
```

你会得到：'嘿！嘿！嘿！'****

# c# - 我可以将 C# 变量管理到 .js 中吗？

> ID：10993825
> 
> 赞同：0
> 
> 时间：2012-06-12T09:26:57.960
> 
> 标签：c#, javascript, .net

我将我的 script.js 放入文件夹脚本中。我想在那个脚本中管理一些来自 Web 窗体（例如`<%= myString = 3 %>`）的 C# 变量。

我认为这是不可能的，但也许我可以以某种方式做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:37:02.947

如果变量与页面上的特定元素直接相关，那么您绝对应该考虑使用 HTML5`data-*`属性来存储值。想象一下变量与锚元素有关，您可以像这样输出：

```
<a href="something" id="myLink" data-my-var="5">Blah</a> 
```

然后，您可以像这样使用 jQuery 访问变量`$("#myLink").data("myVar")`（注意骆驼案例）。jQuery 将尝试将值转换为正确的类型。如果你想要原始值，那么只需使用`attr`像这样的 jQuery 方法`$("#myLink").attr("data-my-var")`（注意属性名称没有改变）。

或者，您可以在服务器端代码中执行以下操作以输出到您的页面：

```
<script type="text/javascript">
   var myVar = <%= someVariableToOutput %>;
</script> 
```

只要此代码在您的依赖脚本上方输出，就可以像使用任何其他 JS 变量一样访问它。

最后，您可以在页面加载时执行 AJAX 请求并以这种方式获取变量（尽管如果数据仅在主请求期间可用，这可能不适用）

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:30:28.643

Javascript 是客户端执行的代码，C# 是服务器端执行的代码。因此，您不能严格地使“变量”可见，因为它们是两个完全不同的代码平台/运行时，在两台不同的计算机上运行。但是，您仍然可以通过几种不同的方式编组它们之间的数据。

*   编写一个 Web 服务并通过 AJAX 调用它
*   使用您的数据填充页面的控件或 URL，并通过 Javascript DOM API（或通过诸如 jQuery 之类的包装库）查询它

第二个例子（既然你问了）：

```
<!-- Somewhere in your page -->
<span style="visibility:hidden" id="myData"><%= myString %></span>

// In Javascript, using jQuery:
var myData = $('#myData').text(); 
```

# java - 输入流返回空

> ID：10993827
> 
> 赞同：3
> 
> 时间：2012-06-12T09:27:04.447
> 
> 标签：java, ftp

我正在尝试通过 ftp 下载文件，但 retrieveFileStream 返回 null，我检查了 getReplyString 并返回 200，这是我的代码：

```
File file = new File(this.config.getDestDirectory() + File.separator + fileName);
String t = this.ftp.getReplyString();
InputStream in = this.ftp.retrieveFileStream(fileName);
FileOutputStream fos = new FileOutputStream(file);
StreamUtils.copy(in, fos);
in.close();
fos.close(); 
```

有什么建议吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:09:06.900

试试这种方式。它是我代码库中的一个示例，我使用了开源 Apache commons-net-ftp-2.0。

```
public void goforIt()
{
    FTPClient con = null;

    try
    {
        con = new FTPClient();
        con.connect("10.0.0.1");     // Dummy address

        if (con.login("Administrator", "KUjWbk361wobbyl"))
        {
            con.enterLocalPassiveMode(); // important!
            con.setFileType(FTP.BINARY_FILE_TYPE);
            String data = "/sdcard/2prerakm4a.m4a";

            OutputStream out = new FileOutputStream(new File(data));
            boolean result = con.retrieveFile("prerakm4a.m4a", out);
            out.close();
            if (result) Log.v("download result", "succeeded");
            con.logout();
            con.disconnect();
        }
    }
    catch (Exception e)
    {
        Log.v("download result","failed");
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T13:02:17.893

AFAIK。您假设通过调用 completePendingCommand() 并验证传输确实成功来完成文件传输。即你需要在fos.clos()下面添加调用函数。

fos.close(); client.completePendingCommand()

应该这样做！你也可以考虑一下，根据 FTPClient.retrieveFileStream() 的 API，该方法在无法打开数据连接时返回 null，这种情况下你应该检查回复代码（例如 getReplyCode()、getReplyString()、getReplyStrings( )) 看看为什么它失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T21:36:30.060

![在此处输入图像描述](../Images/9cc1fc672ecf9379686d4eb4a274b7e3.png)

如果您已经验证了上述所有答案但仍有问题，只需检查源下的上述设置。如果您有 Excluded:** 那么所有文件都将不可用，如果您只是从 Edit 选项中删除该 ** 您的代码应该可以工作。我有

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T09:58:36.717

在这里您可以看到此方法何时返回 null： [http ://commons.apache.org/net/api-3.1/src-html/org/apache/commons/net/ftp/FTPClient.html#line.1742](http://commons.apache.org/net/api-3.1/src-html/org/apache/commons/net/ftp/FTPClient.html#line.1742)

# c++ - 根据大 O，明确函数的时间复杂度是 std::map 是多少？

> ID：10993830
> 
> 赞同：2
> 
> 时间：2012-06-12T09:27:12.360
> 
> 标签：c++, map, time-complexity

清晰函数的时间复杂度是 std::map 是多少？
我说它是 O(1) 对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:44:45.377

该标准在**[associative.reqmts]/8** *表 102*中说：

> `a.clear()`<=>`a.erase(a.begin(), a.end())` 线性`a.size()`

所以它实际上被要求为 O(N)。

* * *

**编辑：**总结各种位。

要删除节点，a`map`执行两个操作：

1.  调用分配器`destroy`方法销毁元素
2.  调用allocator`deallocate`方法释放节点占用的内存

前者可以在代码中省略（检查`is_trivially_destructible`），实际上它通常在`vector`example 中完成。不幸的是后者更棘手，并且不存在任何特征，因此我们必须依赖优化器。

不幸的是，即使通过内联优化器可以完全删除`destroy`and`deallocate`节点，恐怕它也无法意识到树遍历现在是无用的，也无法对其进行*优化*。因此，您最终会在树的 Θ(N) 遍历中结束，并且每一步都没有做任何事情......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:38:12.073

因为它是一个模板，所以在编译时可能会知道该类型（例如`std::map<int>`）在无操作中的销毁，因此销毁成员的需要并不是推断必要的最坏情况性能的良好基础。尽管如此，编译器必须访问二叉树的每个节点，释放堆内存，并且节点的数量与元素的数量呈线性关系（`erase()`只会使指向已擦除元素的迭代器/引用/指针无效，`insert()`不会使任何等无效） . 都证明了 1:1 的关系）。

所以，它是线性的，但是因为即使不需要元素析构函数也需要清理堆的使用......

（有趣的是，这意味着如果所有内存都是从一个专用内存池分配的，那么对于具有琐碎的无操作析构函数的元素，一个类似`std::map<>`的关联容器 - 或者可能`std::map<>`它本身带有一个聪明的自定义分配器 - 可以是 O(1)在 O(1) 中“扔掉”。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T09:30:02.467

[cplusplus 参考站点](http://www.cplusplus.com/reference/stl/map/clear/)声称它在容器大小方面具有线性复杂性，因为必须调用每个元素的析构函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T09:36:50.110

据我所知，所有清理操作的复杂性都是 O(n)，因为您需要一一销毁这些对象。

# android - 卸载应用程序后在 Android 中存储设置

> ID：10993832
> 
> 赞同：3
> 
> 时间：2012-06-12T09:27:16.503
> 
> 标签：android

我正在开发一个 Android 应用程序。此应用程序存储与其功能相关的偏好（用户设置），例如首选图像质量等。还有购买。

我的问题是：如何将这些设置存储在 Android 中，即使应用程序被删除，它们也能保持持久性。

具体采购。我希望用户能够购买应用内功能，卸载应用，如果他重新安装应用并按下“恢复购买”按钮，之前购买的功能将被恢复。

我目前正在使用 Android 的 SharedPreferences 来存储这些设置。我想评论一下这是否适合我的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:32:09.863

如果您使用共享首选项，它将不起作用。我们无法使用共享首选项永久存储数据。最好的方法是使用 Web 服务作为后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:41:48.733

对于您的具体情况，简短的回答是在设置应用内结算时使用[“由用户帐户管理”购买类型。](http://developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type)

关于一般情况，`SharedPreferences`当您的应用程序被卸载时，您的应用程序会被删除，所以不，这不起作用。卸载后保留的唯一数据是存储在外部存储（通常但不总是 SD 卡）的*公共目录中的数据。*在卸载过程中，您的应用程序在外部存储上的私有目录以及您的数据库`SharedPreferences`等将被删除。

使用外部存储的公共区域来尝试为此目的保存用户数据是一种糟糕的形式（而且不是很可靠）。正如@anoop 建议的那样，跨设备存储用户数据或卸载/重新安装周期的一般问题的正确解决方案是将其发送到服务器。

# asp.net - 在 DataGrid 控件中绑定 DropDownList t Datatable 列

> ID：10993834
> 
> 赞同：2
> 
> 时间：2012-06-12T09:27:20.173
> 
> 标签：asp.net, sql-server, data-binding, datagrid, dropdownbox

我得到`DataGrid`了从这个 DataGrid 中获取其数据的 Control`DataTable`我想将`DropDownList`Control 与 DataTable 中的相关数据绑定

```
DropDownList commentDrop = (DropDownList)packageCommentDataGrid.FindControl("commentDrop");
       commentDrop.DataSource = dt;
        commentDrop.DataTextField = dt.Columns["CommentString"][0];
        commentDrop.DataValueField = dt.Columns["CommentP"][0]; 
```

和 ItemDataBound 事件将是这样的：

```
protected void packageCommentDataGrid_ItemDataBound(object sender, DataGridItemEventArgs e)
{
    if (e.Item.ItemType==ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        DropDownList commentDrop = (DropDownList)e.Item.FindControl("commentDrop");

    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:39:20.417

如果我理解正确，这就是你想要做的。

**首先：** 您必须将具有 to 的`GridView`列转换`DropDownList`为`TemplateField`。确保`DropDownList`位于`<TemplateField><ItemTemplate><DropDownList id="" runat="server" /></ItemTemplate></TemplateField>`.

**第二：**在后面的代码中 创建`Gridview.RowDataBound`事件处理程序。然后在此方法中执行以下操作：

```
if(e.Row.RowType == DataControlRowType.DataRow)
{
    DropDownList ddl = (DropDownList)e.Row.Cells["Column Name / Index here"].FindControl("commentDrop");
    ddl.DataSource = dt;
    ddl.DataTextField = "Column Name";
    ddl.DataValueField = "Column Name";
    ddl.DataBind();
} 
```

# android - 这个异常是什么意思？

> ID：10993838
> 
> 赞同：0
> 
> 时间：2012-06-12T09:27:51.187
> 
> 标签：android

我正在从 web 服务将图像显示到列表视图中，假设我正在测试应用程序 10 次，然后 6 次出现此异常，请任何人帮助我。我正在使用 AsyncTask 调用 Web 服务。

```
06-12 14:49:53.132: E/dalvikvm-heap(3071): Out of memory on a 1920016-byte allocation.
 06-12 14:49:53.160: E/AndroidRuntime(3071): FATAL EXCEPTION: AsyncTask #3
 06-12 14:49:53.160: E/AndroidRuntime(3071): java.lang.RuntimeException: An error  occured while executing doInBackground()
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at android.os.AsyncTask$3.done(AsyncTask.java:278)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-12 14:49:53.160: E/AndroidRuntime(3071):     at java.lang.Thread.run(Thread.java:856)
06-12 14:49:53.160: E/AndroidRuntime(3071): Caused by: java.lang.OutOfMemoryError
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at an droid.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
06-12 14:49:53.160: E/AndroidRuntime(3071):     at com.rentfaster.utilities.ImageLoader.decodeFile(ImageLoader.java:142)
06-12 14:49:53.160: E/AndroidRuntime(3071):     at com.rentfaster.utilities.ImageLoader.getBitmap(ImageLoader.java:78)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at com.rentfaster.handler.DetailPhotoHandler.imagefecher(DetailPhotoHandler.java:211)
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at com.rentfaster.handler.DetailPhotoHandler.characters(DetailPhotoHandler.java:153)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at org.apache.harmony.xml.ExpatParser.text(ExpatParser.java:163)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at org.apache.harmony.xml.ExpatParser.appendBytes(Native Method)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:513)
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279)
 06-12 14:49:53.160: E/AndroidRuntime(3071):    at com.rentfaster.home.PropertyDetail$Photostask.doInBackground(PropertyDetail.java:1174)
  06-12 14:49:53.160: E/AndroidRuntime(3071):   at com.rentfaster.home.PropertyDetail$Photostask.doInBackground(PropertyDetail.java:1)
06-12 14:49:53.160: E/AndroidRuntime(3071):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-12 14:49:53.160: E/AndroidRuntime(3071):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-12 14:49:53.160: E/AndroidRuntime(3071):     ... 4 more
06-12 14:50:02.882: E/parse exception0(3258):  dont know why
06-12 14:50:02.882: E/XML Error(3258): java.net.MalformedURLException: Protocol not found: &area=53.447557,-113.460058,53.447557,-113.460058&max=100
06-12 14:50:02.921: E/MapActivity(3258): Couldn't get connection factory client 
```

我仍然面临内存不足的问题，我正在使用此代码，请帮助我

```
//decodes image and scales it to reduce memory consumption
    private static Bitmap decodeFile(File f){
       try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inSampleSize = 2;
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();

        o2.inSampleSize=2;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, null);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:57:37.373

您在创建来自的位图时内存不足，您需要使用减小位图的大小

```
 BitmapFactory.Options option = new BitmapFactory.Options();
    option.inSampleSize = 2;

Bitmap bm = BitmapFactory.decodeFile(root.getPath() + "/" + imageName,
                            option);
                    imageView.setImageBitmap(bm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:45:19.680

问题是`OutOfMemoryError`
这些链接应该可以解决您的问题，
[android如何处理内存不足异常](https://stackoverflow.com/questions/4544919/android-how-to-handle-out-of-memory-exception)
[如何处理内存不足错误？](https://stackoverflow.com/questions/3035228/how-to-handle-out-of-memory-error)
[Android：Gallery](https://stackoverflow.com/questions/3238388/android-out-of-memory-exception-in-gallery)
[android 中的内存不足异常 - 创建位图时出现内存不足异常](https://stackoverflow.com/questions/5697760/android-out-of-memory-exception-when-creating-bitmap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:30:55.580

您在解码来自某个流（网络服务？）的位图时内存不足，也许您不应该将图像作为消息交换的一部分（它将被 base64 编码并一次又一次地复制污染您宝贵的堆）提供图像，而是作为单独的请求提取二进制文件从服务器流式传输？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:32:46.617

你得到一个 RuntimeException，它是由 OutOfMemoryError 引起的。OutOfMemoryErrors 通常发生在您尝试加载的图像对于 Android 分配给您的应用程序的空间而言太大时。

如果您可以发布以下行以及它们上方和下方的一些代码，以及调用方法并解释您在应用程序中所做的事情，我们可能会为您提供更好的帮助：

```
ImageLoader.java:142
ImageLoader.java:78
DetailPhotoHandler.java:211
DetailPhotoHandler.java:153 
```

# python - 是否有类似 Spock 的 Python 测试库

> ID：10993839
> 
> 赞同：17
> 
> 时间：2012-06-12T09:27:52.060
> 
> 标签：python, unit-testing

我曾与 Spock 合作过，并且喜欢 'where' 子句，它允许您轻松地使用多个输入和输出来练习测试用例。例如：

```
class HelloSpock extends spock.lang.Specification {
    def "length of Spock's and his friends' names"() {
        expect:
            name.size() == length

        where:
            name     | length
            "Spock"  | 5
            "Kirk"   | 4
            "Scotty" | 6
    }
} 
```

Python有类似的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-10-24T08:12:54.103

就在这里！

我是[Nimoy](https://github.com/browncoat-ninjas/nimoy)的作者——一个为 Python 构建的框架。

您可以创建数据驱动的测试：

```
from nimoy.specification import Specification

class MySpec(Specification):

    def my_feature_method(self):
        with given:
            a = value_of_a
            b = value_of_b

        with expect:
            (a * b) == expected_value

        with where:
            value_of_a | value_of_b | expected_value
            1          | 10         | 10
            2          | 20         | 40 
```

您可以进行模拟：

```
from unittest import mock
from nimoy.specification import Specification

class MySpec(Specification):

    def my_feature_method(self):
        with setup:
            the_mock = mock.Mock()

        with when:
            the_mock.some_method() << [5, 6, 7]

        with then:
            the_mock.some_method() == 5
            the_mock.some_method() == 6
            the_mock.some_method() == 7 
```

我们也有非常模拟的断言：

```
from unittest import mock
from nimoy.specification import Specification

class MySpec(Specification):

    def my_feature_method(self):
        with setup:
            the_mock = mock.Mock()

        with when:
            the_mock.some_method('abcd', True)

        with then:
            1 * the_mock.some_method('abcd', True) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T10:15:14.973

pytest 允许您对[测试函数进行参数化](http://pytest.org/latest/example/parametrize.html#paramexamples)：

```
import pytest
@pytest.mark.parametrize(("input", "expected"), [
    ("3+5", 8),
    ("2+4", 6),
    ("6*9", 42),
])
def test_eval(input, expected):
    assert eval(input) == expected 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-12T21:45:38.860

我也是 Java/Groowy 世界中 Spock 框架的忠实粉丝。在 Python 中搜索类似。在我的搜索中，我发现了看起来很有希望的[nimoy 。](https://github.com/browncoat-ninjas/nimoy)

来自官方页面的示例：

```
from nimoy.specification import Specification

class MySpec(Specification):

    def my_feature_method(self):
        with given:
            a = value_of_a
            b = value_of_b

        with expect:
            (a * b) == expected_value

        with where:
            value_of_a | value_of_b | expected_value
            1          | 10         | 10
            2          | 20         | 40 
```

还有作者[博客文章](https://medium.com/python-pandemonium/python-needs-a-fresh-testing-framework-19b41f3aa2d)为什么它诞生了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-01T17:10:09.470

如果你有多个测试，我会推荐一个 BDD 框架，比如[行为](http://pythonhosted.org/behave/tutorial.html)。您指定[Gherkin 语法](https://github.com/cucumber/cucumber/wiki/Gherkin)，例如（链接教程中的代码）：

```
Scenario: some scenario
  Given a set of specific users
     | name      | department  |
     | Barry     | Beer Cans   |
     | Pudey     | Silly Walks |
     | Two-Lumps | Silly Walks |

 When we count the number of people in each department
 Then we will find two people in "Silly Walks"
  But we will find one person in "Beer Cans" 
```

以及用于解析它的 Python 代码，例如：

```
@given('a set of specific users')
def step_impl(context):
    for row in context.table:
        model.add_user(name=row['name'], department=row['department']) 
```

编写 Python 代码相当容易，网上有许多样板代码示例。这种技术的美妙之处在于您的测试套件具有高度的可重用性，并且可以很容易地由非程序员进行扩展。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-31T19:19:51.307

不，那里没有。这很可悲，因为Spock真的很棒。我已经找了一年了，因为我非常想念它，所以我一直在思考在 python 中创建这样一个 DSL 需要什么。

Behave 和 Lettuce 将为您提供 BDD 样式的语法和习语，但您必须维护与您的场景文件匹配的单独步骤文件。显然，当您想要进行 TDD 但具有 Spock 所支持的 BDD 的可读性时，这很糟糕。

如果您还想要 Spock 风格的模拟，那么[Mox](https://code.google.com/p/pymox/)是我找到的最接近的。但是一旦你被Spock宠坏了，它又是一个糟糕的替代品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-04T06:03:40.367

有一个新的 pytest 插件可以做到这一点：[https ://github.com/zen-xu/spock](https://github.com/zen-xu/spock)

下面是一个测试函数的例子，取自它的文档：

```
@pytest.mark.spock("{a} > {b}")
def test_bigger():
    def expect(a, b):
        assert a > b

    def where(_, a, b):
        _ | a | b
        _ | 7 | 3
        _ | 5 | 2 
```

我喜欢你可以使用内部 python 方法的方式，文档清晰且易于使用。

# iphone - OpenGL ES 2.0 顶点光照

> ID：10993843
> 
> 赞同：2
> 
> 时间：2012-06-12T09:28:03.763
> 
> 标签：iphone, opengl-es-2.0, shader, lighting

我正在尝试使用 openGLES 2.0 在实体上获得平滑的照明效果。我从搅拌机中导出了一个 .obj 实体，并将 obj 文件转换为 C 顶点和法线数组（使用 obj2openGL - [http://heikobehrens.net/2009/08/27/obj2opengl/](http://heikobehrens.net/2009/08/27/obj2opengl/) ）。然后我在我的 openGL 上绘制这些数据iPhone 上的 ES 应用程序。问题是实体的面具有平面照明（每个面的颜色相同）。我想要一个不使用每个片段照明的平滑效果。我试图增加面孔的数量，但没有结果。

openGLES2.0 上是否有控制这种效果（平滑与平面照明）的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:06:44.977

我解决了这个问题。为了在具有搅拌器 2.62 的 .obj 中导出顶点法线，必须选择“阴影平滑”（在编辑模式下按 ctrl-F 并选择阴影模式）。希望这可以帮助某人！非常感谢克里斯蒂安，这是最简单的解决方案。

# recursion - Antlr 和左递归规则

> ID：10993847
> 
> 赞同：0
> 
> 时间：2012-06-12T09:28:08.787
> 
> 标签：recursion, antlr, ambiguity

我正在尝试使用 ANTLR 编写语法，但我无法理解 antlr 如何与递归选择一起工作。

我阅读了很多文章和论坛，但无法解决我的问题......

这是我语法的一小部分：

```
grammar MyGrammar;

ComponentRef :
    IDENT ('[' Expression (',' Expression)* ']')?
;

Expression:
    ComponentRef ('(' FunctionArguments ')')?
;

FunctionArguments:
    Expression (',' Expression)*
;

IDENT: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*; 
```

我仍然不明白为什么它不起作用......没有歧义！不是吗？

以下是我的语法应该使用的一些代码示例：

```
a
a[b,c]
a[b[c], d]
func(a)
func(a,b,c)
func[a](b,c)
func(a[b], c[d])
func[a](b[c]) 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:10:05.930

首先，一定要了解[词法分析器和解析器规则](https://stackoverflow.com/q/4297770/59087)。另请阅读[ANTLR Mega 教程](https://tomassetti.me/antlr-mega-tutorial/)。

该代码仅使用词法分析器规则，这是行不通的。尽管即使词法分析器规则*也可以*是递归的（在 ANTLR 语法中），但最好避免使用它们。相反，大多数规则应该是解析器规则：

```
componentRef :
    IDENT ('[' expression (',' expression)* ']')?
;

expression:
    componentRef ('(' functionArguments ')')?
;

functionArguments:
   expression (',' expression)*
;

IDENT: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*; 
```

上面的语法无法识别您发布的输入，但不再有错误。识别您发布的输入的语法可能如下所示（未经测试！）语法：

```
parse
 : expr* EOF
 ;

expr
 : IDENT (index | call)*
 ;

index
 : '[' expr_list ']'
 ;

call
 : '(' expr_list ')'
 ;

expr_list
 : expr (',' expr)*
 ;

IDENT
 : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
 ;

SPACE
 : (' ' | '\t' | '\r' | '\n')+ {skip();}
 ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-14T19:34:26.507

我假设您的国会大厦表达式是一个错误。您可能打算输入小写字母。

你怎么能说没有歧义？表达式调用 functionArguments，functionArguments 调用表达式。-1

# sql - 使用 SQL 查询文本文件会将大数转换为 NULL

> ID：10993848
> 
> 赞同：0
> 
> 时间：2012-06-12T09:28:09.627
> 
> 标签：sql, ado, jet

我正在从文本文件中导入数据并且遇到了问题。我有一个数值字段，它偶尔有非常大的值（100 亿+），其中一些值被转换为 NULL。

经过进一步测试，我将问题隔离如下 - 前 25 行数据用于确定字段大小，如果前 25 个值都不大，那么它会抛出任何值 >= 2,147,483,648 (2^31)紧接着。

我正在使用 ADO 和以下连接字符串：Provider=Microsoft.Jet.OLEDB.4.0;Data Source=FILE_ADDRESS;Extended Properties=""text;HDR=YES;FMT=Delimited""

因此，任何人都可以建议我如何解决这个问题，而不必将源数据按大值列降序排序？有什么方法可以在导入之前定义记录集的数据类型，而不是让它自己决定？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:02:52.077

您可以使用放置在您要连接的目录中的 INI 文件来描述列类型。

有关详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)

# deployment - 在不安装 JRE 的情况下运行 Java 可执行文件？

> ID：10993850
> 
> 赞同：7
> 
> 时间：2012-06-12T09:28:19.537
> 
> 标签：deployment, java, executable-jar

> **可能重复：**
> [在不安装 jre 的情况下运行 java？](https://stackoverflow.com/questions/3371535/running-java-without-installing-jre)

我正在开发一个 Java 应用程序。我为我的应用程序创建了一个可执行的 .jar 文件。它在我的机器上运行良好。现在，我想将它部署在本地没有 JRE 的客户端机器上。

*   有没有办法在不本地安装 JRE 的情况下运行我的可执行 jar 文件？
*   或者：JRE 文件夹中需要哪些最少文件，以便我可以将它们与我的安装包一起打包？

建议总是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:31:43.607

> jre 或 jdk 文件夹中需要哪些最小文件，以便我可以将它们与我的安装包一起打包？

[您可以使用Launch4J](http://launch4j.sourceforge.net/)等软件将 jre 与可运行的 .jar打包在一起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:32:48.673

我知道的唯一方法是`jre.jar`与您的应用程序一起打包（当然，您甚至可以将它包含在您的字符中）。一些 jar>executable 工具已经提供了这个选项（例如[Launch4J](http://launch4j.sourceforge.net/) as user1444702 已经提到）。

# salesforce - 如何隐藏基于所有者的页面布局部分

> ID：10993851
> 
> 赞同：1
> 
> 时间：2012-06-12T09:28:19.660
> 
> 标签：salesforce, visualforce, force.com

我是 Salesforce 的新手，我正在考虑为潜在客户/联系人/帐户制作页面布局，以便拥有特殊的所有者可见性。

我使用标准 Salesforce 页面布局根据需要查看详细信息页面，但我想知道如何根据查看用户是否是记录的所有者来显示或隐藏布局的一部分。

* * *

**所需场景**：

记录 R 由用户 A 所有。记录 R 的详细信息页面是标准 Salesforce 页面布局，包含 2 个部分：一个部分包含联系信息（只有用户 A，所有者，可以看到），一个部分包含附加信息（所有用户可以看到）。

* * *

我已经查看了文档，据我所知，唯一的方法是构建自定义控制器或扩展。这是唯一的方法吗？如果是这样，是否有人有一个很好的演练，只更改页面布局的一部分而不是创建一个全新的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T16:55:07.437

您的最佳选择（方法 1）是将您的字段分成字段集（请参阅[在 Visualforce 中使用字段集](http://www.salesforce.com/us/developer/docs/pages/Content/pages_dynamic_vf_field_sets.htm)），然后使用 Visualforce 页面覆盖详细信息页面，该页面使用这些字段集来确定要显示哪些字段，并且仅显示某些字段集，如果查看页面的用户是记录的所有者。这种方法不需要自定义控制器/扩展，允许您向非所有者隐藏页面的各个部分，并允许您（或其他管理员）使用拖放字段集编辑器修改每个部分中的字段，这与拖放页面布局编辑器非常相似。

另一种不需要自定义控制器/扩展的方法（方法 2）是创建一个 Visualforce 页面，其中包含您只想向所有者显示的字段，然后仅在运行用户是记录所有者时才呈现这些字段。然后，您可以将此 Visualforce 页面添加到您的页面布局中。我不推荐这种方法的原因是，让这个页面中的字段样式与标准页面布局的其余部分相匹配是很痛苦的。

仅供参考，没有直接的方法（阅读：没有 JavaScript hacks）在不使用 Visualforce 的情况下显示/隐藏标准页面布局的部分。

方法一：

```
<apex:page standardController="Contact">
     <!-- Fields everyone should see -->
     <!-- (stored in the 'FieldsEveryoneSees' fieldset) -->
     <apex:repeat value="{!$ObjectType.Contact.FieldSets.FieldsEveryoneSees}" var="f"> 
         <apex:outputField value="{!Contact[f]}" /><br/>
     </apex:repeat>
     <!-- Fields only the Owner should see -->
     <!-- (stored in the 'OwnerOnlyFields' fieldset) -->
     <apex:repeat value="{!$ObjectType.Contact.FieldSets.OwnerOnlyFields}" var="f"
              rendered="{!$User.Id == Contact.OwnerId}"> 
         <apex:outputField value="{!Contact[f]}" /><br/>
     </apex:repeat>
</apex:page> 
```

方法 2：

```
<apex:page standardController="Contact" showHeader="false" sidebar="false">
     <apex:outputPanel rendered="{!Contact.OwnerId == $User.Id}">
          <!-- Fields only the Owner should see -->
          <apex:outputField value="{!Contact.LastModifiedDate}"/>
          <!-- etc... -->
     </apex:outputPanel>
</apex:page> 
```

# php - 如何在php上解析深层xml

> ID：10993856
> 
> 赞同：0
> 
> 时间：2012-06-12T09:28:31.970
> 
> 标签：php, xml, xml-parsing

我对 XML 解析有疑问：

```
<pricecatalog>
    <pricecathdr></pricecathdr>
    <listofcatalogdetails>

        <catalogitem>
        <product>
           <productid>1515159115</productid>
        </product>
        </catalogitem>

        <catalogitem>
        <product>
           <productid>251541851</productid>
        </product>
        </catalogitem>

        <catalogitem>
        <product>
           <productid>15181158</productid>
        </product>
        </catalogitem>

    </listofcatalogdetails>
</pricecatalog> 
```

我使用 DOM 来解析它：

```
 $doc = new DOMDocument();
    $doc->loadXML($this->response);
    $items = $doc->getElementsByTagName("catalogitem");
    $i = 0;
    foreach($items as $itm){
        $i++;
    }
    echo $i; 
```

我认为如果解析成功，我必须得到 2，但我会得到 0。

# c++ - 如何测量创建对话框所需的时间？

> ID：10993859
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:28:44.497
> 
> 标签：c++, performance

如何测量创建对话框所需的时间？
我是在开始时在演员中做，然后在结束时做吗？那会是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:33:38.370

这取决于您是否只想在整个链的构造函数中编写代码，包括分配和父类初始化。

如果你想要所有，包括可能的继承链，那么你需要在创建你的类时这样做：

```
clock_t start = clock();
CMyDialog *myDlg = new CMyDialog;
clock_t end = clock(); 
```

# python - 通过 bash 脚本打开另一个窗口，同时保持主线程运行

> ID：10993860
> 
> 赞同：1
> 
> 时间：2012-06-12T09:28:46.663
> 
> 标签：python, linux, bash

我想要做的是制作一个 bash 脚本，它在某一时刻启动另一个带有命令的终端，同时在主线程中保持正常的程序流程。

我可以通过使用来完成第一部分

```
xterm -e python something.py 
```

但主程序流程也会暂停，直到新打开的窗口关闭。

假设，

```
xterm -e python something.py
echo "Wait for sometime"
sleep 7

kill something.py 
```

所以，在这里我想在 7 秒后自动杀死在新窗口中打开的 something.py。无论如何，这可以在 bash 中实现。或者在 Python 程序本身中，在 7 秒后自行关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:30:14.193

用这个替换你的行：

```
xterm -e python something.py & 
```

注意`&`-- 它要求 shell 在后台执行命令并恢复脚本的执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:50:22.567

按照@sarnold 的建议进行操作并使用：

```
kill %1 
```

杀死工作。

# sql-server - 如何从“连接到服务器”对话框中删除缓存的服务器名称？

> ID：10993861
> 
> 赞同：74
> 
> 时间：2012-06-12T09:28:49.987
> 
> 标签：sql-server, caching, login, sql-server-2012, ssms

或者，换句话说，SQL Server 2012 的 SqlStudio.bin 在哪里？[通过查看其他 SO question](https://stackoverflow.com/questions/1059105)，它似乎不在预期的位置。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-06-12T11:50:04.943

从 SQL Server 2012 开始，您不再需要经历删除 bin 文件的麻烦（这会导致其他副作用）。您应该能够`Delete`在“连接到服务器”对话框的“服务器名称”下拉列表的 MRU 列表中按下该键。这在[此 Connect 项目](http://web.archive.org/web/20130411000212/http://connect.microsoft.com/SQLServer/feedback/details/424800)和[此博客文章](http://blogs.msdn.com/b/managingsql/archive/2011/07/13/deleting-old-server-names-from-quot-connect-to-server-quot-dialog-in-ssms.aspx)中有记录。

需要明确的是，因为几个月来似乎有几个人遇到了麻烦：您需要单击`Server name:`下拉菜单，然后用鼠标向下箭头或悬停，直到选择要删除的服务器，*然后*按`Delete`。在这个屏幕截图中，我现在要按`Delete`，它会`ADMIN:SHELDON\SQL2014`从我的 MRU 列表中删除服务器。请注意，因为我只是用鼠标悬停，所以这甚至不是`Server name:`文本框中显示的服务器。

![在此处输入图像描述](../Images/edbfd63b8790c8a39cad508298961878.png)

请注意，如果您对单个服务器名称有多个条目（例如，一个用于 Windows，一个用于 SQL Auth），您将无法判断您正在删除哪一个。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T09:44:22.057

找到了！

```
C:\Users\%username%\AppData\Roaming\Microsoft\SQL Server Management Studio\11.0\SqlStudio.bin 
```

所以答案和以前一样：删除文件，或者使用一些漂亮的 PowerShell 魔法来编辑它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-11T19:19:25.887

至于 SQL Server Management Studio v18，这个文件现在是 XML，您可以直接编辑它： `%APPDATA%\Microsoft\SQL Server Management Studio\18.0\UserSettings.xml`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-30T08:28:08.837

如果要在 Windows 10 上删除特定帐户或更新密码，则可以转到凭据管理器中的 Windows 凭据并更新或删除相关条目：控制面板 >> 凭据管理器 >> Windows 凭据 >> Microsoft:SSMS

[![在此处输入图像描述](../Images/316027bfcf3071c88ab596b84d1f1501.png)](https://i.stack.imgur.com/RmUAZ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T03:48:24.470

这是从列表中清除这些服务器名称的最佳方式。

打开（SSMS）版本。我的是 18 岁。你应该在可以看到服务器名称下拉列表的地方。如果没有，您将打开位于文件菜单栏中的连接到服务器对话框 单击服务器名称字段下拉列表。“将鼠标悬停在”（非常重要）要删除的项目上。按键盘上的删除 (DEL) 键应该可以解决问题。别客气

# ios - 水平滚动控制

> ID：10993866
> 
> 赞同：0
> 
> 时间：2012-06-12T09:28:59.190
> 
> 标签：ios

我有一个数组中的项目列表。数组中的项目是一个 NSDictionary，它有一个 id（昵称）和一个指向个人资料图片的 url。我需要在水平滚动视图中显示每个项目（个人资料图片和 ID）。如果我需要将其显示为垂直滚动视图，我可以使用 UItableView。但现在我需要一个水平滚动视图。有什么好主意来实现这个功能。如果我使用 UITableView，我可以在 UITableViewCell 中显示每个项目。如果我使用启用了水平滚动的 UIScrollView，哪个控件最好包含 ID 和 IMAGE、UITableViewCell 或 UIView？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:33:37.210

我使用了一个包含项目的水平滚动这个想法是每个项目都有一个宽度，水平滚动在项目之间有一个水平间距

项目“i”的放置大致是这样完成的

```
SizeOfItem * i + (i-1)ItemSpacing 
```

我曾经在插入此控件的每个项目上添加 TapGestureRecognizer 或 UIButton，我这样做是为了呈现一些委托功能，例如`didSelectItemAtIndex:`

实现它的最佳方法是使用自定义 UIView，还要注意您需要呈现数据源和委托以使您的 Horizo​​ntalScroller 更易于处理。

我知道这是一个非常笼统的，但是创建一个水平项目需要一些工作

# iphone - CoreGraphics 图像调整大小

> ID：10993868
> 
> 赞同：3
> 
> 时间：2012-06-12T09:29:07.740
> 
> 标签：iphone, ios, ios5, core-graphics

此代码来自 Apple 的 WWDC 2011 Session 318 - iOS Performance in Depth，并使用 CoreGraphics 从服务器托管的图像创建缩略图。

```
CGImageSourceRef src = CGImageSourceCreateWithURL(url);
NSDictionary *options = (CFDictionaryRef)[NSDictionary 
dictionaryWithObject:[NSNumber numberWithInt:1024
forKey:(id)kCGImageSourceThumbnailMaxPixelSize];

CGImageRef thumbnail = CGImageSourceCreateThumbnailAtIndex(src,0,options);
UIImage *image = [UIImage imageWithCGImage:thumbnail];
CGImageRelease(thumbnail);
CGImageSourceRelease(src); 
```

但它不起作用，文档并没有真正帮助。在**iOS**文档`CGImageSource` `CGImageSourceRef` `CGImageSourceCreateThumbnailAtIndex`中可用

> 在 Mac OS X v10.4 或更高版本中

我怎样才能让它工作？

**编辑**

这些是我得到的编译器错误：

*   使用未声明的标识符“CGImageSourceRef”
*   使用未声明的标识符“kCGImageSourceThumbnailMaxPixelSize”
*   使用未声明的标识符“src”
*   函数 'CGImageSourceCreateThumbnailAtIndex' 的隐式声明在 C99 中无效
*   函数“CGImageSourceRelease”的隐式声明在 C99 中无效
*   函数“CGImageSourceCreateWithURL”的隐式声明在 C99 中无效

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T10:11:37.377

小学生的错误。

没有添加`#import <ImageIO/ImageIO.h>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:58:32.123

尝试调整图像大小：

```
-(UIImage*) resizedImage:(UIImage *)inImage:(CGRect) thumbRect
{
    CGImageRef          imageRef = [inImage CGImage];
    CGImageAlphaInfo    alphaInfo = CGImageGetAlphaInfo(imageRef);

    // There's a wierdness with kCGImageAlphaNone and CGBitmapContextCreate
    // see Supported Pixel Formats in the Quartz 2D Programming Guide
    // Creating a Bitmap Graphics Context section
    // only RGB 8 bit images with alpha of kCGImageAlphaNoneSkipFirst, kCGImageAlphaNoneSkipLast, kCGImageAlphaPremultipliedFirst,
    // and kCGImageAlphaPremultipliedLast, with a few other oddball image kinds are supported
    // The images on input here are likely to be png or jpeg files
    if (alphaInfo == kCGImageAlphaNone)
        alphaInfo = kCGImageAlphaNoneSkipLast;

    // Build a bitmap context that's the size of the thumbRect
    CGContextRef bitmap = CGBitmapContextCreate(
                                                NULL,
                                                thumbRect.size.width,       // width
                                                thumbRect.size.height,      // height
                                                CGImageGetBitsPerComponent(imageRef),   // really needs to always be 8
                                                4 * thumbRect.size.width,   // rowbytes
                                                CGImageGetColorSpace(imageRef),
                                                alphaInfo
                                                );

    // Draw into the context, this scales the image
    CGContextDrawImage(bitmap, thumbRect, imageRef);

    // Get an image from the context and a UIImage
    CGImageRef  ref = CGBitmapContextCreateImage(bitmap);
    UIImage*    result = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);   // ok if NULL
    CGImageRelease(ref);

    return result;
} 
```

我在我的代码中使用了一段时间，但我不记得它的来源

试试这个也 [调整 UIImage 的大小而不将它完全加载到内存中？](https://stackoverflow.com/questions/5860215/resizing-a-uiimage-without-loading-it-entirely-into-memory)

# cluster-analysis - SIFT 向量的分层 k 均值聚类

> ID：10993870
> 
> 赞同：2
> 
> 时间：2012-06-12T09:29:09.387
> 
> 标签：cluster-analysis, hierarchical-data, sift, descriptor, object-recognition

全部

我正在寻找在[http://www.wisdom.weizmann.ac.il/~bagon/CVspring07/files/scalable.pdf中应用 David Nister 和 Henrik Stewenius 的相同方法](http://www.wisdom.weizmann.ac.il/~bagon/CVspring07/files/scalable.pdf)

在本文中，他们使用大量 SIFT 向量 (128-D) 作为分层 k-means 聚类的输入，以构建分层视觉词汇树。

有谁知道我可以用来进行这种聚类的任何好的库？

Ps：输入 SIFT 描述符的数量很高（70,000,000），我希望结果将是具有 1,000,000 个叶节点的词汇树。

非常感谢。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:52:09.327

[如果数据采用受支持的格式，OpenIMAJ 中的ClusterQuantiser](http://www.openimaj.org)工具应该能够做到这一点。如果该工具无法直接使用您的数据，那么您可以为`org.openimaj.ml.clustering.kmeans.HierarchicalByteKMeans`类（在 svn trunk 版本中）或`org.openimaj.ml.clustering.kmeans.HByteKMeans`1.0.5 版本中的类编写驱动程序。两个版本的类都支持来自磁盘的流式数据，因此您无需将所有功能都保存在内存中！

为了完整起见，[vlfeat](http://www.vlfeat.org)也有一个分层的 k-means 实现，但我不确定它的扩展程度。

根据实际经验，您还可以考虑在聚类之前对特征进行采样。我不确定你是否会从将它们全部聚类中获得很多好处。

# javascript - 如何通过索引引用对象属性？

> ID：10993873
> 
> 赞同：1
> 
> 时间：2012-06-12T09:29:24.247
> 
> 标签：javascript, performance, object

有没有办法在不使用 for in 循环的情况下迭代对象中的属性？

根据 Nicholas C. Zakas 的说法，for in 循环迭代对象的时间比 for 循环长 8 倍，但我无法找到一种方法来迭代对象的属性而不将其名称更改为 1、2 , 3 等女巫并不理想。

速度是我主要关心的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:29:56.820

你不能。对象没有索引属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:38:28.267

您可以拥有另一个数组来保存您的密钥。像这样的东西：

```
var obj = {
    'key': 'value',
    'some': 'other value'
},
    arr = [ 'key', 'some' ];

for ( var i = 0, l = arr.length; i < l; i++ ) {
    console.log( obj[ arr[ i ] ] );
} 
```

然而，这很丑陋。这种情况下的性能永远不会成为你的瓶颈，你应该更喜欢可读性。上面的代码可以这样完成：

```
Object.keys( obj ).forEach( function( key ) {
    console.log( obj[ key ] );
} ); 
```

这只是更清洁和更具可读性。（`for..in`也可以使用，只是为了举例）

# asp.net - 如果结果集为空，Linq lambda 表达式会抛出错误

> ID：10993876
> 
> 赞同：2
> 
> 时间：2012-06-12T09:29:32.920
> 
> 标签：asp.net, linq, entity-framework, lambda

在我的项目中，我需要使用 linq 选择一行值

```
try
{
return database.Employees.Where(x => id.Equals(x.ID)).Single();
}
catch (InvalidOperationException Ix)
{
    throw;
} 
```

使用它，我将通过实体对象获取相应的行值。但是如果结果集为空，则会引发错误。问题出在我的项目中，必须记录异常。如何在不出现异常的情况下管理此代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:31:36.880

如果没有结果，您正在使用`Single()`记录[*在案的抛出异常。*](http://msdn.microsoft.com/en-us/library/bb155325.aspx)如果您不想要这种行为，请不要使用该方法:)

如果你使用[`SingleOrDefault()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)它，如果没有结果，它将返回 null。但是，如果有多个结果，它仍然会抛出异常。或者，您可以使用`FirstOrDefault`来避免这种情况。

`Single`请注意，您也可以在/中指定谓词`SingleOrDefault`，因此您不需要`Where`先调用：

```
return database.Employees.SingleOrDefault(x => id.Equals(x.ID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:34:36.377

```
try
{
  return database.Employees.SingleOrDefault(x => id.Equals(x.ID));

}
catch (InvalidOperationException Ix)
{
  throw;
} 
```

# asp.net-mvc - MvcSiteMap 可以像 WebForms 中的那样工作吗

> ID：10993877
> 
> 赞同：1
> 
> 时间：2012-06-12T09:29:32.937
> 
> 标签：asp.net-mvc, authorization, asp.net-mvc-sitemap

在 webforms 中，如果某个用户无法访问某个路径，它将被隐藏，这可以通过 MvcSiteMap 完成吗？

[https://github.com/maartenba/MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)

在 Webforms 中，您需要做的就是

```
 <location path="SomePath">
    <system.web>
      <authorization>
        <allow roles="SomeRole" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

如果不属于 SomeRole 菜单项会被隐藏，可能在 MvcSiteMap 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:29:42.460

在 ASP.NET 中，定义授权的推荐方法是使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)。

启用时MvcSiteMapProvider`AuthorizeAttribute`完全支持`securityTrimming`。请参阅[注册提供程序](https://github.com/maartenba/MvcSiteMapProvider/wiki/Registering-the-provider)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T08:44:44.483

我知道这是一篇旧帖子，但以防万一其他人遇到它，您可以通过将角色属性添加到您注册节点的 mvc.sitemap 文件来明确实现您正在寻找的内容。不属于该角色的任何人都无法看到具有该属性的节点。

```
<mvcSiteMapNode title="TheMenuOption" clickable="false"  roles="someRole"> 
```

# iphone - UITextField 停止 UIGestureRecognizer 工作

> ID：10993881
> 
> 赞同：0
> 
> 时间：2012-06-12T09:29:46.693
> 
> 标签：iphone, objective-c, ios, ipad

我有一个包含各种类型子视图的视图。在某一时刻，我想禁用与视图和子视图的所有交互，并从我放置在整个视图上的手势识别器中注册点击：

```
tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:revealController action:@selectorrdoSomething:)];
tapGestureRecognizer.cancelsTouchesInView = YES; 
```

虽然它有点工作，但下面的视图仍然与所有触摸交互。然后我尝试添加：

```
tapGestureRecognizer.delaysTouchesBegan = YES;
tapGestureRecognizer.delaysTouchesEnded  = YES; 
```

它现在可以工作了——当我点击 UITextField 时，它会接收手势识别器的触摸 INSTEAD。这是为什么，我该如何阻止它？任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:38:39.450

听起来您想要做的是将不想接收 touches`.userInteractionEnabled`属性的视图设置为`FALSE`. 或者我误解了什么。

```
yourView.userInteractionEnabled = FALSE; 
```

# c++ - 如何测量对话框所需的内存？

> ID：10993887
> 
> 赞同：-3
> 
> 时间：2012-06-12T09:30:04.653
> 
> 标签：c++, memory

如何测量刚刚创建的对话框所需的内存？
我一点头绪都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:12:44.057

没有办法回答这个问题。例如，Microsoft Windows 专门允许一个合理的“Out Of Memory”对话框而不使用任何内存（所有资源都是由操作系统分配的）。但是你无法判断其他资源是否被类似地分配。

# jquery - 使用 jQuery 调整 HTML 表格单元格宽度

> ID：10993901
> 
> 赞同：0
> 
> 时间：2012-06-12T09:30:36.697
> 
> 标签：jquery, html, css

我有如下所示的 HTML 表格。它有七列。我正在使用 jQuery 调整表格单元格的宽度。jQuery 中的总百分比为 100。但是，表格并没有占用完整的空间；有一些未使用的空间。如何纠正这个？

[http://jsfiddle.net/Lijo/eFS5J/3/](http://jsfiddle.net/Lijo/eFS5J/3/)

![在此处输入图像描述](../Images/7cbc79ac69e21b1c40226e9c4fd34e9f.png)

```
 $(document).ready(function () {

        $('#gridDiv').css('width', '630px');

        //Set width of table cells
        var numberOfColumns = 7;
        $('.resultGridTable th, .resultGridTable td').each(function (i) {

            $(this).css('background-color', (['Purple', 'Orange', 'Purple', 'Orange', 'Purple', 'Orange', 'Purple'][i % 7]));

            if (i % numberOfColumns == 0) {
                $(this).css('width', '15%');
            }

            if (i % numberOfColumns == 1) {
                $(this).css('width', '15%');
            }

            if (i % numberOfColumns == 2) {
                $(this).css('width', '15%');
            }

            if (i % numberOfColumns == 3) {
                $(this).css('width', '15%');
            }
            if (i % numberOfColumns == 4) {
                $(this).css('width', '10%');
            }
            if (i % numberOfColumns == 5) {
                $(this).css('width', '15%');
            }

            if (i % numberOfColumns == 6) {
                $(this).css('width', '15%');
            }

        }
 );

    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:33:45.367

将以下属性添加到您的表格元素。

```
width="100%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:38:46.877

干得好：

```
<table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdTaxAssociates" style="border-collapse: collapse; width:100%;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:50:24.423

仅通过在下面的位置使用内联 css 将宽度设置为 100%

```
<table class="resultGridTable" cellspacing="0" id="detailContentPlaceholder_grdTaxAssociates"
                    style="border-collapse: collapse;width:100%;"> 
```

[在此处查看演示](http://jsfiddle.net/eFS5J/8/)

# javascript - Esprima 解析器工作示例

> ID：10993910
> 
> 赞同：1
> 
> 时间：2012-06-12T09:31:24.557
> 
> 标签：javascript, parsing

解析器的基本用法是 `esprima.parse(code, options);` 现在我如何在此处为 javascript 代码使用 loc 选项，任何人都可以通过示例解释或提供资源，所有选项都通过示例进行解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:20:20.840

```
esprima.parse('var x = 42', { loc: true }); 
```

语法树格式已记录在案，请参阅[http://esprima.org/doc/index.html#ast](http://esprima.org/doc/index.html#ast)（也可进一步参考 Mozilla Reflect API）。

# html-table - 如何在顶部的表格中放置表格

> ID：10993912
> 
> 赞同：1
> 
> 时间：2012-06-12T09:31:27.000
> 
> 标签：html-table, html-email

我正在与对 CSS 的 html 客户端的不良支持作斗争，我需要使用表格布局制作一个电子邮件模板。我只是无法在表格中正确放置和对齐表格。我用 valign 等尝试过，但这不起作用......

**如何将一张桌子放在另一张桌子的顶部和中间？**

为了说明我已经发布了这个小提琴：http: [//jsfiddle.net/eabJh/1/](http://jsfiddle.net/eabJh/1/)

它`<td >Another nested table</td>`位于中心位置，但不是在顶部，而是在中间。

这是我的html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <title></title>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <body style="background-color: black">
            <table background="http://i3.mirror.co.uk/incoming/article276604.ece/ALTERNATES/s615/tweet-that-ricky-gervais-jibe-at-mongs-pic-twitter-com-rickygervais-132840776.jpg"  width="810" border="20" bordercolor="white" style="border-style:solid; border-spacing:0px; border-collapse:collapse">
                <tr style="height:400px">
                    <td>test
                        <table width="380" cellspacing="0" cellpadding="2" align="center"  border="0">
                            <tr>
                                <td >Another nested table</td>
                            </tr>
                        </table></td>
                </tr>
            </table>

        </body>
    </html>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:32:52.370

**[更新小提琴](http://jsfiddle.net/eabJh/2/)**

使用`valign = "top"`：

```
<td valign = "top">test
     <table width="380" cellspacing="0" cellpadding="2" align="center"  border="0">
          <tr>
              <td>Another nested table</td>
          </tr>
     </table>
</td> 
```

# java - Java Web 服务请求-响应问题

> ID：10993915
> 
> 赞同：0
> 
> 时间：2012-06-12T09:31:33.810
> 
> 标签：java, web-services, soap, keystore

我正在实现基于 WS 的代理，它将管理来自[PCRF](http://www.huawei.com/en/products/core-network/singlesdb/upcc/index.htm)的肥皂请求/响应。连接是通过 https 端口，它使用 Java Key Store（密钥存储工具）[从受信任的证书生成密钥存储文件](http://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html)。连接似乎没问题（我不确定身份验证是否成功），但返回的信息（响应）是一个不可读的短字符串。

通过[SoapUI](http://www.soapui.org/)应用程序执行的相同程序运行良好。

这两个过程之间的唯一区别是，第一次我使用的是密钥库，第二次我使用的是受信任的证书。

我怎么可能解决这个问题？我不明白哪里出了问题。

如果有帮助，我可以将用于 SOAP 消息发送方的 Java 源和从 PSRF 接收到的响应共享到 SoapUI 和已实现的 WS 中。

```
package SOAPSender;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Socket;

public class DebugMain {

    public static void main(String[] args) {
        //PCRFProvisioningAgent temp = new PCRFProvisioningAgent(); 

            loadKeyAndTrustStore();

            StringBuffer outputStream = new StringBuffer();
            BufferedWriter wr = null;
            BufferedReader rd = null;
            Socket sock = null;
            String outputBuffer = null;

            try {

                // Create socket
                sock = new Socket("10.96.227.219", 8080);

                // Create header
                wr = new BufferedWriter(new OutputStreamWriter(
                        sock.getOutputStream(), "UTF-8"));

                String xmlData = "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:rm=\"rm:soap\">"+
                           "<soapenv:Header/>"+
                           "<soapenv:Body>"+
                              "<rm:getSubscriber>"+
                                 "<inPara>"+
                                    "<subscriber>"+
                                       "<attribute>"+
                                          "<key>USRIDENTIFIER</key>"+
                                          "<value>284090000000004</value>"+
                                       "</attribute>"+
                                    "</subscriber>"+
                                 "</inPara>"+
                              "</rm:getSubscriber>"+
                           "</soapenv:Body>"+
                        "</soapenv:Envelope>";              

                wr.write("POST https://10.96.227.219:8080/axis/services/ScfPccSoapServiceEndpointPort HTTP/1.1\r\n");
                wr.write("User-Agent: https://10.96.227.219:8080/axis/services/ScfPccSoapServiceEndpointPort\r\n");
                wr.write("Content-Length: " + xmlData.length() + "\r\n");
                wr.write("Content-Type: text/xml;charset=UTF-8\r\n");
//              wr.write("SOAPAction: \"rm:soap/ScfPccSoapServiceEndpoint/getSubscriberRequest\"\r\n");
                wr.write("SOAPAction: \"\"\r\n");
                wr.write("\r\n");

                // Send data
                wr.write(xmlData);
                wr.flush();

                // Read response
                // exception handler - when connection is reset instead of close
                // after sending a packet from source
                char cbuf[] = new char[4096];
                int i = 0;
                // buffer is sized to max 4096 packet size

                try {
                    rd = new BufferedReader(new InputStreamReader(
                            sock.getInputStream(), "UTF-8"));
                    while ((i = rd.read(cbuf)) != -1) {
                        outputStream.append(cbuf, 0, i);
                        int contStartIndex = outputStream.toString().indexOf(
                                "Content-Length: ")
                                + "Content-Length: ".length();
                        int contEndIndex = outputStream.toString().indexOf("\n",
                                contStartIndex) - 1;
                        if (outputStream.toString().indexOf("Content-Length: ") != -1) {
                            int contLength = Integer.valueOf(
                                    outputStream.toString().substring(
                                            contStartIndex, contEndIndex))
                                    .intValue();
                            int headerLength = outputStream
                                    .toString()
                                    .substring(
                                            0,
                                            outputStream.toString().indexOf(
                                                    "\n\r\n")).length() + 3;
                            // if the message body is complete but there is not an
                            // ending character
                            // while will break
                            // warning - with national characters! content length is
                            // count of bytes not chars
                            if (i - headerLength >= contLength)
                                break;
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
                System.out.println("--------\n" + String.valueOf(cbuf)
                        + "\n--------------");
                outputBuffer = outputStream.toString();

            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    if (wr != null)
                        wr.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    if (rd != null)
                        rd.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    if (sock != null)
                        sock.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
    }

    private static void loadKeyAndTrustStore() {
        try {
            // System.out.println(Constants.ROOT_PATH + Constants.STORE_FILE);
            // AdminLogger.error("Certificate file: " + Constants.ROOT_PATH
            // + Constants.STORE_FILE);

            // System load ssl the file of certificate
            // Load Key store

            System.out.println(System.getProperty("javax.net.ssl.keyStoreType"));
            System.setProperty("javax.net.ssl.keyStoreType", "****");
            System.out.println(System.getProperty("javax.net.ssl.keyStoreType"));

            System.out.println(System.getProperty("javax.net.ssl.keyStore"));
            System.setProperty("javax.net.ssl.keyStore",
                    "****");
            System.out.println(System.getProperty("javax.net.ssl.keyStore"));

            System.out.println(System.getProperty("javax.net.ssl.keyStorePassword"));
            System.setProperty("javax.net.ssl.keyStorePassword", "****");
            System.out.println(System.getProperty("javax.net.ssl.keyStorePassword"));

            // TrustStore

            System.out.println(System.getProperty("javax.net.ssl.trustStore"));
            System.setProperty("javax.net.ssl.trustStore",
                    "****");
            System.out.println(System.getProperty("javax.net.ssl.trustStore"));

            System.out.println(System.getProperty("javax.net.ssl.trustStorePassword"));
            System.setProperty("javax.net.ssl.trustStorePassword", "****");
            System.out.println(System.getProperty("javax.net.ssl.trustStorePassword"));

        } catch (Exception ex) {
            // AdminLogger.error(ex, "StartupServlet.loadKeyAndTrustStore");
        }
    }

} 
```

这是回应：

![](../Images/696e02e607dd5452812e40a50e4f3831.png)

...这是来自 SoapUI 应用程序的响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <getSubscriberResponse xmlns="rm:soap">
         <result xmlns="">
            <resultCode>12302</resultCode>
            <paras>
               <key>errorDescription</key>
               <value>The subscriber does not exist.</value>
            </paras>
         </result>
      </getSubscriberResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:38:25.050

套接字不是从 Java 调用 Web 服务的理想方式。请使用像 JAX-WS 这样的 Java API。从 PSRF Web 服务获取 WSDL 并使用 ws-import 命令生成客户端存根。

在安全方面，您将需要使用 JAX-WS 安全 API 来调用使用 WS-Security 保护的 Web 服务。

看到这个线程 - [jax-ws-sumption-web-service-with-ws-security-and-ws-addressing](https://stackoverflow.com/questions/699254/jax-ws-consuming-web-service-with-ws-security-and-ws-addressing)

谢谢，斯里哈里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:49:01.313

As noted by @sreehari, Sockets is an less than ideal for invoking web services - you will basically have to implement all the relevant details of the application protocol (e.g. HTTP/S) yourself. In itself that is a tremendous undertaking.

If you want to stay "low-level", and build the requests yourself, then I suggests you "upgrade" to using HttpsUrlConnection.

# vba - VBA中的匹配位置/坐标

> ID：10993921
> 
> 赞同：2
> 
> 时间：2012-06-12T09:31:44.417
> 
> 标签：vba, gps, coordinates, coordinate-systems

我正在寻找一些 VBA 代码（算法）以将 GPS 位置列表（在本例中为船舶轨迹）与给定的 GPS 位置相匹配。也就是说，列表中位于该位置周围具有给定半径的圆内的所有位置。

见图片：所以只有所有位置的“绿色位置”匹配。抱歉图片不佳，用 Windows Paint 手工制作 ;-)

所有位置都以纬度 + 经度给出，例如 52.24782、4.12082。

![地点](../Images/96f6b28d037a15b25714dd1095395d57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:19:28.730

**功能**

```
Public Function CheckCoords(x#, y#, radius#) As String
    ' x^2 + y^2 = r^2
    ' ==> results true if (p,q) fall outside of the circle
    CheckCoords = IIf((x ^ 2 + y ^ 2) < radius ^ 2, "outside circle", "inside circle")
End Function 
```

***实际实施所需的单位转换***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:18:42.170

找到这个：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

我只需要将代码重写为 VBA 代码并将其与@Cylian 的代码结合使用

# ruby-on-rails - redmine升级

> ID：10993924
> 
> 赞同：1
> 
> 时间：2012-06-12T09:31:58.747
> 
> 标签：ruby-on-rails, redmine

目前我想将 redmine 1.4.0 升级到最新版本 2.0.2。

所以我按照这个页面上的howto：

```
http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade 
```

简而言之，我下载了 redmine-source 并将其解压缩到一个单独的文件夹
“/var/www/redmine-2.0.2”中（而我的工作安装在 /var/www/redmine 中）。

直到步骤 3.5 一切正常，但在 3.6 中发生以下情况：

```
root(at)information:/var/www/redmine-2.0.2# rake config/initializers/session_store.rb
rake aborted!
Don't know how to build task 'config/initializers/session_store.rb'

(See full trace by running task with --trace)

root(at)information:/var/www/redmine-2.0.2# rake --trace     
config/initializers/session_store.rb
rake aborted!
Don't know how to build task 'config/initializers/session_store.rb'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/task_manager.rb:49:in `[]'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-   
0.9.2.2/lib/rake/application.rb:115:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake   - 
0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake- 
0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:66:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-
0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top 
(required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
root(at)information:/var/www/redmine-2.0.2#

root(at)information:/var/www/redmine-2.0.2# rake --trace generate_session_store
Invoke generate_session_store (first_time)
Invoke generate_secret_token (first_time)
Invoke config/initializers/secret_token.rb (first_time)
Execute config/initializers/secret_token.rb
Execute generate_secret_token
Execute generate_session_store
Note: The rake task generate_session_store has been deprecated, please use the         
replacement version generate_secret_token
root(at)information:/var/www/redmine-2.0.2#

root(at)information:/var/www/redmine-2.0.2# rake generate_session_store

Note: The rake task generate_session_store has been deprecated, please use the 
replacement version generate_secret_token

root(at)information:/var/www/redmine-2.0.2# rake --trace generate_secret_token
Invoke generate_secret_token (first_time)
Invoke config/initializers/secret_token.rb (first_time, not_needed)
Execute generate_secret_token 
```

这最后一步似乎生成了“/var/www/redmine-2.0.2/config/initializers/secret_token.rb”，并且根据它的方法，它足以替代之前的“rake-commands”。

```
root(at)information:/var/www/redmine-2.0.2# 
root(at)information:/var/www/redmine-2.0.2# rake db:migrate RAILS_ENV=production 
root(at)information:/var/www/redmine-2.0.2# rake tmp:cache:clear
root(at)information:/var/www/redmine-2.0.2# rake tmp:sessions:clear 
```

我的第一个问题是如何启动应用程序。我仍然可以转到我的旧安装“/var/www/redmine”并从

```
ruby ./script/server -e production & 
```

仍然有效，输出为：

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-
2.3.14/lib/active_support/inflector.rb:3:in `<top (required)>': iconv will be deprecated  
in the future, use String#encode instead.
=> Booting Mongrel
=> Rails 2.3.14 application starting on http://0.0.0.0:3000
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after     
2011-11-01.
Gem.source_index called from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-
2.3.14/lib/rails/gem_dependency.rb:21.
=> Call with -d to detach
=> Ctrl-C to shutdown server 
```

但是我无法通过转到新文件夹“/var/www/redmine-2.0.2/”并调用

```
ruby ./script/server -e production & 
```

因为没有文件

```
"/var/www/redmine-2.0.2/script/server". 
```

如何启动 redmine 的更新版本或尚无法启动？我认为 redmine 2.0.2 需要 rails 3.2.5 并且我认为我安装了它，因为：

```
root(at)information:/var/www/redmine-2.0.2/script# rails -v
Rails 3.2.5
root(at)information:/var/www/redmine-2.0.2/script# 
```

根据上面的引导协议，Rails 使用的是 2.3.14。错误的 ？

我的错误是什么？有人可以建议如何成功升级吗？

提前感谢您的帮助！

干杯，

安斯加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:37:02.767

`bundle exec rails s -d -e production`通过使用默认端口（即3000）在后台启动应用程序来解决它。

# 更新

如果您打开一个新的 shell 并运行，这似乎是一个 RVM 问题：

```
$ type rvm | head -1 
```

没有显示“rvm 是一个函数”，RVM 的来源不正确。

确保 RVM 在任何路径设置之后作为 RVM 获取并操作路径。如果您不这样做，RVM 可能无法按预期工作。

# javascript - FB.Event.subscribe 永远不会被调用

> ID：10993928
> 
> 赞同：1
> 
> 时间：2012-06-12T09:32:12.623
> 
> 标签：javascript, facebook

这是我的 Facebook 连接代码：

```
<script>
jQuery(document).ready(function($){
    $(".fb-login-button").live('click', function() {
      console.log('click');
      fbEnsureInit(function() {
        console.log('EnsureInit');
        FB.login(function(response) {
          console.log('FB.login');
          // redirect will be done
        }, {scope: 'email'});
      });
  });
});

window.fbAsyncInit = function() {
  FB.init({
    appId      : '105224616211361', // App ID
    /*channelUrl : '///channel.html', // Channel File // We don't do not to get caching problems with the laguage!*/
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    oauth      : true, // enable OAuth 2.0
    xfbml      : true  // parse XFBML
  });
  // Additional initialization code here
  fbApiInitialized = true;

  // whenever the user logs in, we refresh the page
  FB.Event.subscribe('auth.login', function(response) {
    try {
      if (response.status == 'connected') {
      console.log('connected');
      $.ajax({
        type: "POST",
        url: "/?eID=login&modus=facebook&fb-login=1",
        data: $(this).serialize(),
        success: function(msg) {
          console.log("LOGIN");
          window.location.reload();
        }
      })             
    } else {
      console.log('not connected');
      window.location.reload();
    }
  } catch(err) {
    window.location.reload();
   }
});
};

/**
 * Make sure that the FB is initialized!
 */
function fbEnsureInit(callback) {
  if (!window.fbApiInitialized) {
    setTimeout(function() { fbEnsureInit(callback); }, 50);
  } else {
    if (callback) { callback(); }
  }
}

/**
 * Load the JS SDK directly from Facebook
 */
(function() {
    var e = document.createElement('script'); e.async = true;
      e.src = document.location.protocol +
      '//connect.facebook.net/de_DE/all.js';
      document.getElementById('fb-root').appendChild(e);
    }());

</script> 
```

SDK 被加载。我可以看到 FB- 按钮，当我单击它时，代码可以工作，直到

```
console.log('FB.login'); 
```

FB-Popup 弹出并没有任何反应......这应该是点：

```
 FB.Event.subscribe('auth.login', function(response) { 
```

应该被调用......但它没有......任何人都可以帮助我解决这个问题吗？

谢谢。

**编辑：**

我只是注意到只有当我已经登录 Facebook 时才会发生这种情况。如果我没有登录，登录弹出窗口会弹出两次（！），我可以登录 Facebook 并调用函数 FB.Event.Subscribe。

那么如何查看用户是否登录到 Facebook 并连接到我的应用程序？

为什么弹出窗口被调用两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:11:12.770

`FB.getLoginStatus`如果要检查用户是否连接到您的应用程序，则需要使用。

The login popup is fired twice because the FB-button has a login function too. Remove your ajax call to `$(".fb-login-button").live` and modify your login button like this:

```
<div class="fb-login-button" scope="email" data-show-faces="true" data-width="200" data-max-rows="1"></div> 
```

# database - 数据库不仅是本地机器而且对任何人都可用？

> ID：10993929
> 
> 赞同：0
> 
> 时间：2012-06-12T09:32:15.097
> 
> 标签：database

我需要一些关于我应该使用哪个数据库的建议。

我想在 Java EE 中创建一个 Web 应用程序，我需要一个数据库来存储一些信息。

我想让它不仅可以从我的个人计算机上使用。Java 代码将被简单导出，但我应该如何处理数据库？

我应该使用哪个数据库以使其可供任何人使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:16:35.220

几乎任何现代的客户端/服务器 dbms 都可以工作。如果我站在你的立场上，我会先尝试[PostgreSQL](http://www.postgresql.org/)。在线文档有一整章关于[服务器配置](http://www.postgresql.org/docs/9.1/static/runtime-config.html)。特别注意“[连接和身份验证](http://www.postgresql.org/docs/9.1/static/runtime-config-connection.html)”。

远程用户通常会连接到应用程序（例如网页），然后该应用程序将连接到数据库。通常应用程序和 dbms 在不同的服务器上运行，在这种情况下，dbms 将只接受来自 localhost（用于维护）、局域网（用于公司内部使用）和来自应用程序服务器的连接。

在决定让 dbms 接受来自地球上每个 IP 地址的连接之前做一些研究；这有点冒险。

# sql - 加入两个表以使每个记录在第一个具有所有行在第二个

> ID：10993940
> 
> 赞同：0
> 
> 时间：2012-06-12T09:32:59.097
> 
> 标签：sql, database, join

我需要加入两个表，其中第一个表中的每一行都得到第二个表中的每一行。

例子

表 1：InvoiceNo、产品代码、数量

表二：产品代号、产品名称

在表 1 I 中，对于每个发票记录，我只有一些产品，但在输出中，如果该产品未包含在发票中，我必须获取每张发票的所有产品，保持数量为 0。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:37:12.853

您是否尝试过 CROSS JOIN - 这会为每个 Invoice (table2) 生成 Product (table1) 中的所有行。然后您可以 INNER JOIN 到发票行表以获取总计。

这是你需要的吗？

[http://sqlfiddle.com/#!3/e2f66/4](http://sqlfiddle.com/#!3/e2f66/4)

更新：

（哎呀）当我说 INNER 加入时，我的意思是 LEFT，否则你会消除空值 :)

更新：

需要添加分组并添加到join中以确保lines产品代码被join到products表中

[http://sqlfiddle.com/#!3/e2f66/14](http://sqlfiddle.com/#!3/e2f66/14)

我得到这些结果：

```
INVOICENO    PRODUCTCODE    QUANTITY   
INV0001      PROD01         1
INV0001      PROD02         2
INV0001      PROD03         0
INV0002      PROD01         0
INV0002      PROD02         0
INV0002      PROD03         0
INV0003      PROD01         0
INV0003      PROD02         0
INV0003      PROD03         0 
```

当然，这是基于以下数据：

```
CREATE TABLE InvoiceHeader
(
  InvoiceNo varchar(10)
)

CREATE TABLE InvoiceLines
(
  InvoiceNo varchar(10),
  ProductCode varchar(10),
  Quantity int
)

CREATE TABLE Products
(
  ProductCode varchar(10)
)

INSERT INTO InvoiceHeader VALUES ('INV0002')
INSERT INTO InvoiceHeader VALUES ('INV0001')
INSERT INTO InvoiceHeader VALUES ('INV0003')

INSERT INTO InvoiceLines VALUES ('INV0001', 'PROD01', 1)
INSERT INTO InvoiceLines VALUES ('INV0001', 'PROD02', 2)

INSERT INTO Products VALUES ('PROD01')
INSERT INTO Products VALUES ('PROD02')
INSERT INTO Products VALUES ('PROD03') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:42:16.313

我不得不猜测您的表名，但我认为这可以按要求工作：

```
SELECT  InvoiceNo, 
        ProductName, 
        SUM(CASE WHEN Invoice.ProductCode = Product.ProductCode THEN Quantity ELSE 0 END) AS Quantity
FROM    Invoice, Product
GROUP BY InvoiceNo, ProductName 
```

**编辑**

要以您需要使用条件`SUM`的格式获取数据，因为我认为 SQL-Server CE 不支持`PIVOT`. 像这样的东西对你有用：

```
SELECT  InvoiceNum,
        SUM(CASE WHEN ProductCode = 'P1' THEN Quantity ELSE 0 END) [Product 1],
        SUM(CASE WHEN ProductCode = 'P2' THEN Quantity ELSE 0 END) [Product 2],
        SUM(CASE WHEN ProductCode = 'P3' THEN Quantity ELSE 0 END) [Product 3]
FROM    Invoice
GROUP BY InvoiceNum 
```

这只有在您知道编写代码时拥有的所有产品时才有效。如果这可能会改变，您可以使用动态 SQL 创建上述查询，但动态添加产品，因此在添加新产品时不需要更改查询。我还没有在 CE 上测试过这个，但我看不出有任何原因它不起作用。

```
DECLARE @SQL NVARCHAR(MAX)

SELECT  @SQL = COALESCE(@SQL, '') + ', SUM(CASE WHEN ProductCode = ''' + ProductCode + ''' THEN Quantity ELSE 0 END) ' + QUOTENAME(ProductName)
FROM    Product

SET @SQL = N'SELECT InvoiceNum' + @SQL + N'FROM Invoice GROUP BY InvoiceNum'

EXECUTE SP_EXECUTESQL  @SQL 
```

我在[SQL Fiddle上放了一些使用 SQL-Server 2008R2 的例子](http://sqlfiddle.com/#!3/bfbdf/2)

# c# - Rhino Mocks 的“需要返回值或抛出异常”是什么意思？

> ID：10993941
> 
> 赞同：14
> 
> 时间：2012-06-12T09:33:06.833
> 
> 标签：c#, wcf, rhino-mocks

模拟对 WCF 服务的调用时，出现以下错误：

> 方法'ICustomerEntities.GetCustomerFromPhoneNumber("01234123123");' 需要返回值或抛出异常。

我已经用谷歌搜索了这个并在这里搜索 - 我能找到的只是我需要重新订购各种电话等，但这在我的情况下似乎没有意义？也许有人可以向我指出它确实*如此*？

我的测试设置如下所示

```
_entities = MockRepository.GenerateStrictMock<ICustomerEntities>(); 
```

并且测试方法在第三行失败，设置`result2`

```
_entities.Expect(ip => ip.GetCustomerFromPhoneNumber("01234123123"));
var test = MockRepository.GenerateMock<ICustomerEntities>(_factory);
var result2 = _entities.GetCustomerFromPhoneNumber("01234123123");
var result = test.GetAllCustomersWithAGivenPhoneNumber("01234123123");
Assert.AreEqual(result,result2); 
```

最初的调用试图模拟这个（它在一个名为 的方法中`GetAllCustomersWithAGivenPhoneNumber`）：

```
using (var entities = _factory.CreateEntities())
{
    var customer = entities.GetCustomerFromPhoneNumber(telephoneNumber);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T09:53:14.970

请记住，模拟对象就是这样，一个模拟。根本没有实现，所以如果 mock 需要从函数返回一个值，除非你告诉它，否则它无法知道要返回什么。

我假设您的 GetCustomerFromPhoneNumber() 返回一个客户对象或 id，因此您需要告诉 Rhino 要返回什么：

我从未使用过 Rhino，但希望即使语法不完全正确，这也会为您指明正确的方向。

```
var test = MockRepository.GenerateMock<ICustomerEntities>(_factory);
test.Stub(ent => ent.GetCustomerFromPhoneNumber("01234123123")).Return(new Customer()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T11:18:28.757

您的 _entities 对象是 Mock，因此它没有实现。您必须指定它的行为和返回值。要存根返回值，您必须执行以下操作：

```
_entities.Stub(x => x.GetCustomerFromPhoneNumber(Arg<string>.Is.Anything)).Returns(*here specify what do You want to return*); 
```

对我来说，以这种方式进行测试没有任何意义，但这是另一种情况。

# sockets - 使用接口名称设置 IP_MULTICAST_IF 时 sendto 中的参数无效

> ID：10993944
> 
> 赞同：3
> 
> 时间：2012-06-12T09:33:22.170
> 
> 标签：sockets, multicast, sendto, setsockopt

我正在编写一个发送和接收多播数据包的小程序。我需要使用其名称（例如 eth0）而不是其地址来设置传出接口。因此我必须使用 struct ip_mreqn（而不是 struct in_addr），以便我可以使用它的 imr_ifindex 字段来设置接口索引（我可以使用接口的名称来获取）。

但是由于某种原因它不起作用。对 setsockopt() 的调用工作正常，但对 sendto() 的以下调用返回“无效参数”错误。当然，如果我用 in_addr 替换 ip_mreqn 并改用接口的地址，错误就会消失。

以下是我的代码：

```
sd = socket(AF_INET, SOCK_DGRAM, 0);

struct ip_mreqn addr;
addr.imr_ifindex = if_nametoindex("eth0");
setsockopt(sd, IPPROTO_IP, IP_MULTICAST_IF, &addr, sizeof(addr);

struct sockaddr_in sock_addr;
memset((char *) &sock_addr, 0, sizeof(sock_addr));
sock_addr.sin_family = AF_INET;
sock_addr.sin_port = destination_port;
sock_addr.sin_addr.s_addr = destination_address;

char msg[] = "abc";

while (sendto(sd, msg, sizeof(msg), 0, reinterpret_cast<const sockaddr*>(&sock_addr),
  sizeof(sock_addr)) < 0)
    throw std::runtime_error(strerror(errno)); 
```

设置 IP_MULTICAST_IF 时使用 struct ip_mreqn 有什么问题吗？有人知道吗？非常感谢帮助。谢谢。

请注意，目标端口和地址已经按网络字节顺序排列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:34:49.943

从[tldp 的多播 howto](http://tldp.org/HOWTO/Multicast-HOWTO-6.html)：

> 通常，系统管理员指定应该从哪个默认接口发送多播数据报。程序员可以覆盖它并使用这个选项为给定的套接字选择一个具体的传出接口。

```
struct in_addr interface_addr;
setsockopt (socket, IPPROTO_IP, IP_MULTICAST_IF, &interface_addr, sizeof(interface_addr)); 
```

在他们看来，仅仅一个接口的索引是不够的。

**编辑：**
您可能会混淆`IP_MULTICAST_IF`，`IPV6_MULTICAST_IF`后者采用无符号整数来表示接口编号（请参阅[`man 7 ipv6`](http://www.kernel.org/doc/man-pages/online/pages/man7/ipv6.7.html)）。

**编辑：**
事实证明，给出的示例按预期工作。这是我的完整测试用例：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <net/if.h>
#include <arpa/inet.h>
#include <sys/socket.h>

int main()
{
    int sd = socket(AF_INET, SOCK_DGRAM, 0);
    struct sockaddr_in sa = {0};
    struct ip_mreqn addr = {{0}};
    char msg[] = "abc";

    addr.imr_ifindex = if_nametoindex("eth0");
    setsockopt(sd, IPPROTO_IP, IP_MULTICAST_IF, &addr, sizeof(addr));

    sa.sin_family = AF_INET;
    sa.sin_port = 8653;

    inet_pton(AF_INET, "224.255.255.5", &sa.sin_addr);
    if (sendto(sd, msg, sizeof(msg), 0, (void*)&sa, sizeof(sa)) < 0) {
        perror("bugger");
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T22:44:16.363

在答案的代码示例中，不要忘记 htons() .sin_port 中的目标端口

# merge - Perforce 如何处理合并/集成之后但在提交之前所做的更改？

> ID：10993945
> 
> 赞同：0
> 
> 时间：2012-06-12T09:33:29.490
> 
> 标签：merge, perforce

我在 Perforce 中看到了我无法解释的行为。我采用了主干的一个分支，并定期提交我的更改并偶尔从主干合并到我的分支，以确保在我重新集成时不会发生重大冲突。

这项工作完成后，我使用 Perforce Merge/Integrate 选项将更改应用到主干。在将这些更改发送给代码审查后，我对主干进行了一些更改。此时，没有任何更改被提交到主干。

当我提交所有这些更改时，差异显示的文件完全符合我的预期。提交更改列表后，提交的更改与差异窗口中显示的不同。相反，自合并/集成以来我所做的更改不存在。在服务器和我在主干上的本地副本之间进行比较，在代码审查后对相同文件进行了所有更改。因此，我不得不进行第二次提交来修复损坏的构建。

我很困惑这是怎么发生的，因为我认为 Perforce 只在客户端上保留了每个文件的一个本地副本？

即使有标记显示文件已被篡改，它提交的文件在哪里？它肯定在提交窗口中显示了主干路径，但我猜它可能已经从分支中获取了文件？

另一个问题是，在使用 Perforce 版本控制时，我应该如何最好地处理上述情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:43:44.147

我们都犯的一个错误是 (a) 将文件从一个分支集成到另一个分支，(b) 将其解析为“接受合并”，(c) 在 (d) 提交之前对文件进行本地更改。如果您在步骤 (b) 之后和步骤 (c) 之前没有明确打开文件进行编辑，则服务器不知道您的本地更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:41:51.820

您在主干副本上直接编辑内容时犯了第一个错误。始终使用任务分支。它可能不会导致您看到的问题，但如果您弄乱了任务分支，它不会破坏构建。查看本地主干副本时，请确保已从仓库刷新它。如果您的主干文件的本地副本已过期，您将获得黄色的小三角形，在您的主干副本上编辑和提交过期文件必然会导致“奇怪”行为。

> 我很困惑这是怎么发生的，因为我认为 Perforce 只在客户端上保留了每个文件的一个本地副本？

主干一份，每个任务分支一份。

# java - JMS 客户端会话使用

> ID：10993946
> 
> 赞同：2
> 
> 时间：2012-06-12T09:33:32.887
> 
> 标签：java, .net, jms, websocket, kaazing

我正在尝试利用 .NET Kaazing 客户端通过 Web 套接字与 JMS 后端进行交互。我正在努力理解会话的正确用法。最初，我有一个跨所有线程共享的会话，但我注意到这[不受支持](http://docs.oracle.com/javaee/1.3/api/javax/jms/Session.html)：

> Session 对象是用于产生和使用消息的单线程上下文。尽管它可以在 Java 虚拟机 (JVM) 之外分配提供者资源，但它被视为轻量级 JMS 对象。

我只有一个会话的原因只是因为我认为这会产生更好的性能。由于文档声称会话是轻量级的，我毫不犹豫地切换我的代码以使用每个“操作”的会话。“操作”是指发送单个消息或订阅队列/主题。在前一种情况下，会话是短暂的，并在消息发送后立即关闭。在后一种情况下，只要订阅处于活动状态，会话就需要存在。

当我尝试创建多个会话时，出现错误：

```
System.NotSupportedException: Only one non-transacted session can be active at a time 
```

谷歌搜索这个错误没有结果，所以我尝试切换到事务会话。但是当试图创建一个消费者时，我得到一个不同的错误：

```
System.NotSupportedException: This operation is not supported in transacted sessions 
```

所以看起来我被困在一块石头和一个坚硬的地方之间。我看到的唯一可能的选择是跨线程共享我的会话，或者使用单个非事务会话来创建消费者，并使用多个事务会话来创建其他所有会话。这两种方法对我来说似乎都有些不合时宜。

任何人都可以阐明我在客户中处理会话的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:27:19.313

有几种方法可以为您的应用程序添加并发性。您可以使用多个连接，但由于网络开销的增加，这可能是不可取的。更好的做法是实现一个简单的机制，通过调度任务或通过 ConcurrentQueues 传递消息来处理消息侦听器中的并发。以下是一些实施策略的选择：

1.  基于任务的方法将使用 TaskScheduler。在 MessageListener 中，将安排一个任务来处理工作并立即返回。例如，您可以为每条消息安排一个新任务。此时，MessageListener 将返回，并且下一条消息将立即可用。这种方法适用于低吞吐量应用程序 - 例如每秒处理几条消息 - 但您可能需要并发性，因为某些消息可能需要很长时间才能处理。

2.  另一种方法是使用消息的数据结构来处理待处理的工作（[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)）。当调用 MessageListener 时，每个 Message 都会被添加到 ConcurrentQueue 并立即返回。然后，一组单独的线程/任务可以使用适合您的应用程序的策略从该 ConcurrectQueue 中提取消息。这将适用于更高性能的应用程序。

3.  这种方法的一种变体是为每个处理入站消息的线程设置一个 ConcurrentQueue。在这里，MessageListener 不会管理自己的 ConcurrentQueue，而是将消息传递到与每个线程关联的 ConcurrentQueue。例如，如果您有代表股票提要和新闻提要的入站消息，则一个线程（或一组线程）可以处理股票提要消息，另一个可以单独处理入站新闻项目。

请注意，如果您使用 JMS 队列，则当您的 MessageListener 返回时，每条消息都会被隐式确认。这可能是也可能不是您希望应用程序的行为。

对于更高性能的应用程序，您应该考虑方法 2 和 3。

# android - 安卓图库背景

> ID：10993952
> 
> 赞同：0
> 
> 时间：2012-06-12T09:33:41.673
> 
> 标签：android, android-layout, android-gallery

我遵循[了一个画廊教程](http://developer.android.com/resources/tutorials/views/hello-gallery.html)并让它工作正常，但我需要帮助解决的问题是我想更改画廊的背景颜色。如果我只是使用：

```
setBackgroundColor(Color.BLACK); 
```

然后它搞砸了，我也失去了边界。我想保留边框，但将颜色从默认的灰色更改。我也尝试过使用不同的资源，例如：

```
R.styleable.gallery1_android_colorBackground 
```

但这也行不通。有谁知道如何解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:08:17.910

在`getView()`您`ImageAdapter`添加以下属性：

```
imageView.setBackgroundColor(Color.BLACK); 
```

希望这有帮助。

# c#-4.0 - 在循环中产生多个线程并知道何时完成完成某些任务

> ID：10993959
> 
> 赞同：1
> 
> 时间：2012-06-12T09:34:04.700
> 
> 标签：c#-4.0

我必须在循环中生成多个线程以配置编号。的站点，然后每个线程都有多个子线程。完成所有线程后，我需要执行某些任务将数据保存到数据库中。我如何知道是否所有任务都已完成。
我当前的代码：

```
List<SocialDataConfig> configList = SetConfiguration();
foreach (SocialDataConfig config in configList)
{
    new Thread(delegate()
    {
        FetchSocialData(config);
    }).Start();
}
// save fetched data into database and log fetched information in database

private void FetchSocialData(SocialDataConfig config)
{
    for (int i = 0; i < config.ThreadCount; i++)
    {
        Thread thread = new Thread(delegate()
        {
            FetchData(54764876, config);
        });
        thread.Start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:47:26.623

您可以使用 C# 中的新任务库，而不是创建自己的线程。

然后你可以使用这样的东西：

```
int n = 10;

// Construct started tasks
Task<int>[] tasks = new Task<int>[n];
for (int i = 0; i < n; i++)
{
    tasks[i] = Task<int>.Factory.StartNew(action, i);
}

// Wait for all the tasks to finish.
Task.WaitAll(tasks); 
```

这是[WaitAll](http://msdn.microsoft.com/en-us/library/dd270695.aspx)上的 MSDN 文档以及完整的示例。

# c++ - 如何根据元素数量选择 max_load_factor？

> ID：10993964
> 
> 赞同：2
> 
> 时间：2012-06-12T09:34:33.277
> 
> 标签：c++, stl, set

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:46:16.230

Load factor is independent of the number of items you insert. It's basically the percentage of available space that's actually in use. If, for example, you currently have space for 100 elements allocated, the maximum load factor could say to start resizing the table when you had inserted, say, 80 items (this would correspond to a maximum load factor of 80%).

Setting the maximum load factor is, therefore, largely independent of the number of elements you're going to store. Rather, it's (mostly) an indication of how much extra space you're willing to use to improve search speed. All else being equal, a table that's closer to full will have more collisions, which will slow searching.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:01:39.357

If you want to optimize an unordered set to hold N elements, you want to use the rehash function. This accepts an argument that sets the minimum buckets for the set. This will prevent a rehash from occuring when you are inserting elements into your set.

For instance, if your desired load factor is `75%` then your bucket size should be `N / .75`

```
//  This creates an unordered set optimized for `80` elements with a load factor of `75%`
std::unordered_set<std::string> myset;
myset.rehash(120); 
```

# java - java - 如何使用java webapplication访问tomcat文件夹中可用的资源？

> ID：10993969
> 
> 赞同：1
> 
> 时间：2012-06-12T09:34:56.647
> 
> 标签：java, servlets

> **可能重复：**
> [配置 Tomcat 以使用属性文件加载数据库连接信息](https://stackoverflow.com/questions/1380793/configure-tomcat-to-use-properties-file-to-load-db-connection-information)

我想在属性文件中设置一些值并将文件放在tomcat中的某个位置，因为属性文件的值是可变的。我将只提供战争文件和属性文件，客户将在使用应用程序时更改属性文件中的值。

```
mail.smtp.host=smtp.gmail.com
mail.smtp.port= 465 
```

这正是我的需要。我想为此设置`mail.smtp.host`值`mail.smtp.port`

我想从 servlet 访问这些值。

请帮我怎么做。

问候托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:39:55.397

采用

```
servletContext.getRealPath("/"); 
```

然后你可以从tomcat导航到你的目录

**另见**

*   [Web 应用程序中的属性文件](https://stackoverflow.com/questions/4814506/properties-file-in-web-app)

# c# - 如何将 float 转换为 int - 类型转换为字符串格式？

> ID：10993971
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:35:27.423
> 
> 标签：c#, asp.net, floating-point, int, type-conversion

我想键入以下转换。

我的 C# 代码是。

```
float percentage = (present/total) * 100;
lblPercentage.Text += String.Format("{0:0.00}", (float)present / (float)total); 
```

它提供如下输出：`0.71`但我想要输出如下：`71`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:39:36.720

我认为您应该使用`{0:p}`格式，然后它会与`%`标志一起正确显示

# xml - Dom4j：sax 解析加载的文档

> ID：10993972
> 
> 赞同：0
> 
> 时间：2012-06-12T09:35:29.173
> 
> 标签：xml, sax, dom4j

我正在尝试完成以下任务：

1.  加载文档（完成）
2.  首先深入了解文档深度并使用 JDK 中的 DefaultHandler 做一些工作

我想这样做的原因是我已经有了我的处理程序，现在我将它与 SAX 解析器一起使用。我现在想在内存文档上使用处理程序。

请注意，这在以下方面很有用：我必须多次使用处理程序。对于大型文档，我想使用 SAX，对于小型文档，我想使用内部表示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:03:55.367

完成此操作的最快方法（快速编码）是将您希望使用 SAX 解析的内部文档部分写入内部字符串，然后使用`StringReader`基于该字符串的 a，使用您的处理程序将其传递给 SAX 解析器.

您真正需要的是根据您的数据生成 SAX 事件并将这些事件提供给处理程序。您可以通过将数据转换为[`InputSource`](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/InputSource.html)or的形式，`Reader`然后在解析中使用它来做到这一点，这是上面描述的策略，或者您可以通过直接调用[`ContentHandler`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/ContentHandler.html)您已经编写的方法来简单地模拟 SAX 事件。但是，如果您的文档非常复杂，那么以正确的顺序调用它们并为它们提供正确的数据以完成您需要的工作可能会很痛苦。

如果 Dom4J 提供了一种`InputSource`基于文档结构中的节点创建的方法，那将是最容易使用的，并且可能比首先将其写入字符串更有效。

您最好考虑将`ContentHandler`执行实际工作的部分提取到一个单独的类中，您可以从`ContentHandler`该类和遍历内部树的新类中使用该类。

# java - 无效操作：结果集已关闭

> ID：10993975
> 
> 赞同：5
> 
> 时间：2012-06-12T09:35:32.823
> 
> 标签：java, jakarta-ee, jdbc

当我的结果集数据很大时，我会遇到 `com.ibm.db2.jcc.am.SqlException: [jcc][t4][10120][10898][4.9.78] Invalid operation: result set is closed. ERRORCODE=-4470, SQLSTATE=null`异常，但当我尝试在结果集中使用较少的数据时不会

下面是我的代码片段

```
ResultSet rs=null;
String sql_query="select * from exception_main;select * from m_roles"
String query1=sql_query.toUpperCase();
String[] results=query1.split(";");         
CSVWriter writer = new CSVWriter(new FileWriter(csv_file_path + csv_file_name), ',',CSVWriter.NO_QUOTE_CHARACTER);                     
for(int i=0;i<results.length;i++)                         
{                             
  if(results[i].startsWith("SELECT"))                             
  {                                 
    System.out.println("Inside select"+ results[i]);                             

    ps = conn1.prepareStatement(results[i].toString());                             
    rs = ps.executeQuery();             

    ...                        

    //writing to csv file                          
    System.out.println("Count..." + rs.getRow());                        
    writer.writeAll(rs, true);                         

    while(rs.next()){                                  
      rs.deleteRow();                                
    }                          
    System.out.println("Count...3:::::::" + rs1.getRow());     
  }     
}
writer.close(); 
rs.close(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T09:42:54.130

保持

```
stmt = conn1.createStatement(); 
```

在 for 循环之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T09:39:41.333

来自[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#close%28%29)：

*当 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，生成它的 Statement 对象会自动关闭 ResultSet 对象。*

因此你的错误。

每次循环`stmt`中都会重新执行您的Statement 对象。`for`

另外，[从这里](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14533153)：

*对于非保持游标，当驱动程序完成第一个结果集的单步执行时，如果 autoCommit 处于打开状态，驱动程序将执行提交，这将关闭其他所有内容。如果您希望其他 ResultSet 保持打开状态，您可能需要使用 with hold 光标。*

* * *

**编辑：**

（给 OP - 请发布一个片段。不要一直更改片段）答案仍然是相同的：您`ResultSet`在`for`循环中使用相同的两个查询。那是行不通的。如果您使用不同的查询重新执行相同的对象，则会`ResultSet`关闭。`Statement`要么使用不同`Statement`的对象，要么使用不同的方法并放弃这个`for`循环想法。

# sql - SQL 现有列条件更新查询

> ID：10993978
> 
> 赞同：2
> 
> 时间：2012-06-12T09:35:45.540
> 
> 标签：sql, sql-server, sql-server-2008

我有这个数据

```
AnsID  QuesID  AnsOrder
-----------------------
1       5       NULL
2       5       NULL
3       5       NULL
4       5       NULL
5       5       NULL
6       3       NULL
7       3       NULL
8       3       NULL
9       3       NULL
10      3       NULL
11      4       NULL
12      4       NULL
13      4       NULL
14      4       NULL
15      4       NULL
16      7       NULL
17      9       NULL
18      9       NULL
19      9       NULL
20      9       NULL
21      8       NULL
22      8       NULL
23      8       NULL
24      8       NULL 
```

想把它更新成这种格式

```
AnsID  QuesID  AnsOrder
-----------------------

1       5       1
2       5       2
3       5       3
4       5       4    
5       5       5
6       3       1
7       3       2
8       3       3
9       3       4
10      3       5
11      4       1
12      4       2
13      4       3
14      4       4
15      4       5
16      7       1
17      9       1
18      9       2
19      9       3
20      9       4
21      8       1
22      8       2
23      8       3
24      8       4 
```

基本上我想根据 QuesID 列按升序更新 AnsOrder 列，这样可以提高可读性。

```
AnsID  QuesID  AnsOrder
-----------------------

1       5       1
2       5       2
3       5       3
4       5       4    
5       5       5

6       3       1
7       3       2
8       3       3
9       3       4
10      3       5

11      4       1
12      4       2
13      4       3
14      4       4
15      4       5

16      7       1

17      9       1
18      9       2
19      9       3
20      9       4

21      8       1
22      8       2
23      8       3
24      8       4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:47:30.553

您可以通过 quesID 生成 row_numbers 并将它们分配给 AnsOrder，如下所示：

```
; with ord as (
  select *,
         row_number() over (partition by quesID
                            order by AnsID) rn
    from table1
)
update ord 
   set ansorder = rn 
```

为了保持一致性，我已按 AnsID 订购。 [检查这个@Sql Fiddle](http://sqlfiddle.com/#!3/30cdd/5)。

# ios - 在 iOS 的 web 视图中加载 webivew

> ID：10993982
> 
> 赞同：0
> 
> 时间：2012-06-12T09:35:59.467
> 
> 标签：ios, ios5, uiwebview, uiwebviewdelegate

我在加载时遇到问题`UIWebView`。我有一个 webview(1st)，其中加载了一个 url。当加载该页面时，我正在创建一个小视图，它在第一个 webview 顶部有 webview(2nd)，它正在加载第二个 url。基本上我在 webview 中加载 webview。点击第二个 webview 中的 url，生成的 url 必须在应用程序外部的 safari 中打开。如果我没有设置`[webview setDelegate:self]`，那么页面会按预期加载到小型 web 视图中，但是在点击时，什么都没有发生..

但是，如果我将第二个委托人设置`UIWebView`为 self，则需要在第二个`UIWebView`加载的 url 将在第一个 url 中加载。

有没有人更早地完成过这种 webview 加载。请帮助。非常感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:47:07.703

在您当前的课程中，您应该测试`UIWebView`代表正在处理第一组：

```
webView.delegate = self; 
```

然后在`shouldStartLoadWithRequest`：

```
//UIWebView *smallWebView;
//UIWebView *mainWebView;
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
     if(webView == smallWebView
     {
         //Load stuff on safari
     }
     else
     {
         //This means that link was pressed in the mainWebView
         //Depending on your logic, you will load the smallWebView 
     }
} 
```

# c# - 在 C# 中读取和加密 PDF 文件

> ID：10993984
> 
> 赞同：0
> 
> 时间：2012-06-12T09:36:04.200
> 
> 标签：c#, pdf, encryption

我想读取 PDF 文件的内容并使用 AES256 加密对内容进行加密，并将内容（加密）作为 base64 字符串发布。

为此我有2个解决方案

1.  使用流阅读器（PDF 格式数据）读取内容，加密内容和 base64 编码，最后发送加密字符串

2.  阅读 PDF 内容并将其转换为文本，然后加密，然后发送

哪种方法最好，如果我使用第一种方法，那么失败会有任何问题

我需要你的意见请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:19:35.970

您的第一种方法似乎绝对没问题，我当然会采用这种方法。您实际上所做的只是将文件从一台机器传输到另一台机器。

如果您考虑在没有加密的情况下这样做，那么您应该做的就是发送与您读取的文件流完全相同的文件流，这可以确保接收器以原始状态获取文件，并且可以可靠地打开文件，因为它将在与开始时完全相同的格式。

现在，当我们考虑添加加密时，我们所做的就是更改文件的原始二进制数据。只要我们在另一端使用相同的密钥参数解密文件，我们就可以确定我们仍然会拥有与开始时相同的原始原始文件数据（假设我们在连接期间没有任何数据丢失 - 您可以添加例如，如果需要，对此进行哈希检查）

# mysql - SQL 字符串匹配

> ID：10993985
> 
> 赞同：3
> 
> 时间：2012-06-12T09:36:05.350
> 
> 标签：mysql, sql, pattern-matching

我使用字符串来存储星期几，如下所示：MTWTFSS。如果我搜索 MF（星期一和星期五），则查询必须返回所有包含 MF 的字符串（例如：MWF、MTWTFS、MF 等）。

我不知道如何在 SQL (MySQL) 中执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T09:40:46.937

`LIKE`在单个字符之间使用`%`-wildcard：

```
SELECT * FROM table WHERE column LIKE '%M%F%'; 
```

请注意，这仅在字符顺序正确时才有效 - 搜索`FM`而不是`MF`不会给您任何结果。
您还需要找到一种方法将`%`s 插入到您的搜索词中，但这应该不是一个大问题（遗憾的是，您没有说您正在使用哪种编程语言）。

如果字符可以按随机顺序排列，则必须构建如下查询：

```
SELECT * FROM table WHERE
  column LIKE '%M%'
AND
  column LIKE '%F%'
[more ANDs per character]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:38:21.463

```
SELECT * FROM yourTable WHERE columnName LIKE '%MF%' 
```

学到更多：

[http://www.sqllike.com/](http://www.sqllike.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T09:39:41.127

你能不能只说

```
SELECT * FROM blah WHERE weekday LIKE "%MF%" 
```

# iphone - 弹出到导航堆栈中的第一个 ViewController

> ID：10993989
> 
> 赞同：0
> 
> 时间：2012-06-12T09:36:42.283
> 
> 标签：iphone, ios, uinavigationcontroller

在我的导航堆栈中，我有 2 个视图控制器，它们被推送到导航堆栈。除此之外，我有一个 PresentModalViewController 作为 rootviewcontroller，我在它上面再推了 2 个 viewcontroller。所以导航堆栈会像

> 视图控制器
> 
> 视图控制器
> 
> PresentModalViewController 作为 rootviewcontroller
> 
> 视图控制器
> 
> 视图控制器

从最顶部的视图控制器，单击按钮，我想移动到最底部的视图控制器。应该弹出或关闭其间的视图控制器。这怎么可能。我已经尝试过`dismissModalViewControllerAnimated:`，`popToRootViewControllerAnimated:`但没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:45:17.000

试试这个，这会奏效

```
 NSArray *vcs = [self.navigationController viewControllers];
            [self.navigationController popToViewController:[vcs objectAtIndex:[vcs count]-2] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:10:18.673

你需要`popToRootViewControllerAnimated`使用`navigationController`你的`ModalViewController`. 那么你应该使用`dismissModalViewControllerAnimated`. 然后你应该这样做`popToRootViewControllerAnimated`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T12:25:07.470

使用委托来解决这个问题。

```
Class A.h
@protocol MyDelegateClass
- (void)didLoadHomeView; 

Class B.h
@interface MyViewController : UIViewController<MyHomeViewDelegate>

Class B.m
- (void)didLoadHomeView
{
    [self.navigationController popToRootViewControllerAnimated:YES];
}

Class C.h
@interface MyCurrentViewController : UIViewController
{
    id <MyLoadHomeDelegate> homeDelegate; 
}
    @property (nonatomic,assign) id <MyLoadHomeDelegate>   homeDelegate;

Class C.m
-(IBAction) OnHome:(id)sender{
    [self dismissModalViewControllerAnimated:NO];
    if (self.homeDelegate) {
        [homeDelegate didLoadHomeView];
    } 
```

}

，`ModalViewController`即当前在类中的方法中`RootViewController`被解除。关闭后，我弹出到导航堆栈中的当前根视图控制器，即主视图（firstViewController）。上面的代码在我的情况下完美运行。`OnHome:(id)sender``MyCurrentVIewController``ModalViewController`

# castle-windsor - 为什么我的温莎安装程序之一被调用两次？

> ID：10993992
> 
> 赞同：0
> 
> 时间：2012-06-12T09:36:53.177
> 
> 标签：castle-windsor

我在单独的程序集中有两个安装程序，一个在引导代码所在的程序集中，另一个在另一个引用程序集中。

我像这样引导：

```
container = new WindsorContainer()
   .Install(FromAssembly.InThisApplication(), FromAssembly.Named("My.Other.Assembly")); 
```

由于某种原因，第二个程序集（“My.Other.Assembly”）中的安装程序被调用了两次，这显然会导致尝试注册重复组件时出现问题。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:15:56.850

`FromAssembly.InThisApplication()`将扫描当前程序集和所有以当前程序集名称为前缀的程序集（包括点）。

因此，如果您的应用程序被称为`My`或`My.Other`，那么`My.Other.Assembly`将作为`FromAssembly.InThisApplication()`明确包含它的结果和结果进行扫描。

难不成这就是惹你的祸？

# php - 通过 PHP 使用 mysql 进行递归树遍历

> ID：10993998
> 
> 赞同：5
> 
> 时间：2012-06-12T09:37:32.163
> 
> 标签：php, mysql, loops, recursion, traversal

我正在为客户创建一份问卷，要求将问题按 3 层级别组织。我已经成功创建了 UI，但是在过去的 3 个小时里我一直在尝试从数据库中提取数据，以使所有内容都加载到正确的位置。数据库是由客户端组织的，所以我无法控制它：

```
id    description    parentId    
1      Level 1        0           
2      Level 2        0           
3      Level 1a       1   
4      Level 1b       1 
5      Level 1a1      3 
```

我在网站上发现了一个与我类似的问题，但是当我尝试它的解决方案时，我无限重复地得到了以下内容：

代码：

```
function makeList($par_id = 0) {
    //your sql code here
    $result = mysql_query("SELECT * FROM pB_test WHERE parentId = $par_id");
    $pages = mysql_fetch_array( $result );

    if (count($pages)) {
        echo '<ul>';
        foreach ($pages as $page) {
            echo '<li>', $page['description'];
                makeList($page['parentId']);
                echo '</li>';
        }
        echo '</ul>';
    }
}

makeList(); 
```

输出：

```
1
3
5
5
l
l
3
5
5
l
l
3
5
5
l
l
3
5
5
l
l 
```

有谁知道如何解决这个问题以及问题到底是什么？干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T05:30:07.513

每次调用mysql服务器并获取结果并不好

如果你有超过 100 行怎么办？或 200+

使用它只查询一次：

```
$result = mysql_query("SELECT * FROM test");
$arrs = array();

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $arrs[] = $row;
}

function build_tree($arrs, $parent_id=0, $level=0) {
    foreach ($arrs as $arr) {
        if ($arr['parent_id'] == $parent_id) {
            echo str_repeat("-", $level)." ".$arr['name']."<br />";
            build_tree($arrs, $arr['id'], $level+1);
        }
    }
}

build_tree($arrs); 
```

表的常见示例

```
 id    name    parent_id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T09:49:53.067

递归执行此操作：

```
function printChildQuestions($parentid) {
  $sql="SELECT * FROM pB_test WHERE parentID=$parentid";
  $result=mysql_query($sql);
  $i=0;
  while (true) {
    $row=mysql_fetch_array($result);
    if (!$row) break;
    if ($i==0) echo "<ul>";
    $i=1;
    echo '<li>'.$row['id'].'&nbsp;'.$row['description'].'&nbsp;'.$row['parentId'].'</li>';
    printChildQuestions($row['id']);
  }
  if ($i>0) echo '</ul>';
}

printChildQuestions(0); 
```