# StackOverflow 问答 12303000-12303999

# matlab - matlab中Dsolve的初始值

> ID：12303001
> 
> 赞同：0
> 
> 时间：2012-09-06T15:03:47.637
> 
> 标签：matlab, symbolic-math, dsolve

假设你有一个微分方程，你想用`dsolve`matlab 中的函数求解它，但首先你必须向用户询问初始值，然后根据他输入的内容，程序给出答案。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:57:18.430

您想知道如何获取用户输入吗？然后，您可以使用该`input()`功能。例子：

```
reply = input('Do you want more? Y/N [Y]: ', 's'); 
```

其中`'s'`参数表示用户的输入将不被计算，即字符只是作为 MATLAB 字符串返回。也许您希望用户输入要解决的表达式`dsolve`。您可以执行以下操作：

```
expression = input('Which expression do you want to solve?','s');
dsolve(expression) 
```

如果用户输入`'Dx = -a*x'`，那么您将拥有`dsolve('Dx = -a*x')`。

[`input()`Web 文档](http://www.mathworks.com/help/techdoc/ref/input.html)中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:37:38.257

您尝试过（根据您的评论）：

```
a=input('y(0) = ');
b=input('y''(0) = ');
c=input('input the first of the domain : ');
d=input('input the last of the domain : ');
sym x;
y=dsolve('D2y+Dy+y=cos(x)','y(0)=a','Dy(0)=b','x');
h=ezplot(y,[c d]); 
```

`sym x`不做任何事情，因为您忽略了输出。你可以放心地省略它。

现在，要让用户输入`dsolve`命令，您必须编写创建相应字符串的代码：

```
y=dsolve('D2y+Dy+y=cos(x)',['y(0)=' num2str(a)],['Dy(0)=' num2str(b)],'x'); 
```

或者，`input`与`'s'`标志和`['y(0)=' a]`.

# ios - 将 WordPress iOS 应用程序与受 Shibboleth 保护的 WordPress 配合使用

> ID：12303004
> 
> 赞同：0
> 
> 时间：2012-09-06T15:03:52.587
> 
> 标签：ios, wordpress, shibboleth

我管理着一个面向 Shibboleth 的多站点 WordPress 安装，并且我的用户（包括我自己）想要使用 iOS WordPress 应用程序。不幸的是，我们的 Shibboleth 部署的本质是 SP 提示用户使用大学集中的 Shibboleth 登录页面，经过身份验证，然后使用他们的身份验证令牌返回 WordPress。我们正在使用 WP 插件存储库中的 Shibboleth WordPress 插件。

是否有人克服了此类问题，以便该应用程序可以与外部身份验证提供程序一起使用？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:15:26.927

我们在大学解决了这种情况。WP 的设置/配置确实取决于您的要求。例如，这是我们的一个用例，我认为它可以回答您的问题。我们使用多站点（子域）WP。一般要求：

*   允许公开访问一个博客的所有站点内容，除了控制台 (/wp-admin)
*   控制台身份验证：ldap、本地身份验证或 shibboleth

我们编写了自己的 Shibboleth 插件，它是 WP Shibboleth 插件的简化版本，专门针对我们的用例。我们还编写了自己的 WP ldap auth 插件（我们不喜欢现有的 ldap 插件）。当用户尝试访问控制台时，系统会提示他们登录页面。登录页面由一个表单（本地或 ldap auth 的用户名/密码）和一个 Shibboleth 用户的链接组成。允许用户使用三种身份验证系统中的任何一种访问 WP 控制台。

这一切的关键是我们的 shibboleth 插件。我们的插件不强制/要求 shibboleth 身份验证。如果用户未通过 Shibboleth 进行身份验证，则 Shibboleth 插件返回失败；并且 WP 尝试使用其他身份验证方法对用户进行身份验证，例如本地/WP auth。Shibboleth 身份验证由用户在登录页面中使用 Shibbolized 登录链接（基本上是一个惰性会话 url）发起。

# java - 结果集不滚动

> ID：12303010
> 
> 赞同：0
> 
> 时间：2012-09-06T15:04:12.967
> 
> 标签：java, jdbc

请看下面的代码

```
public List searchData(String query)
    {
        List data = new ArrayList();

        try
        {
             createConnection();

             Statement st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
             ResultSet rs = st.executeQuery(query);

                while(rs.next())
                {

                 data.add(rs.getString(2));
                 data.add(rs.getString(11));
                 data.add(rs.getString(12));
                 data.add(rs.getInt(3));
                 data.add(rs.getInt(4));
                 data.add(rs.getInt(5));
                 data.add(rs.getInt(6));
                 data.add(rs.getString(7));
                 data.add(rs.getString(8));
                 data.add(rs.getString(9));
                 data.add(rs.getString(10));

                }

                for(int i=0;i<data.size();i++)
                {
                    System.out.println(data.get(i));
                }

                System.out.println("Size of the array: "+data.size());

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            closeConnection();
        }
} 
```

此代码给出以下错误

```
java.sql.SQLException: [Microsoft][ODBC SQL Server Driver]Invalid Descriptor Index
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
    at sun.jdbc.odbc.JdbcOdbc.SQLGetDataInteger(JdbcOdbc.java:3810)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getDataInteger(JdbcOdbcResultSet.java:5637)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getInt(JdbcOdbcResultSet.java:582)
    at normal.DatabaseHandler.searchData(DatabaseHandler.java:331)
    at normal.SearchForm$ButtonAction.actionPerformed(SearchForm.java:470)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

为什么是这样？如果我把

```
data.add(rs.getString(11));
data.add(rs.getString(12)); 
```

最后，这个错误没有发生。我什至将结果集设置为可滚动的！为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:27:09.220

“滚动”结果集与在*不同行*之间来回移动有关。*您在获取给定行*的列值时遇到问题。一些 jdbc 驱动程序对列顺序很敏感，我认为这不是设置问题。我会说您要么需要按顺序阅读列，要么可能寻找不同的 jdbc 驱动程序。

# mysql - mysql查询中的汇总信息列

> ID：12303017
> 
> 赞同：0
> 
> 时间：2012-09-06T15:04:40.547
> 
> 标签：mysql, sql

我有一个简单的查询：

```
SELECT sds.district_id,detail.year, detail.race, SUM(count)
FROM school_data_race_ethnicity_raw as detail
INNER JOIN school_data_schools as sds USING (school_id)
GROUP BY district_id, year, race 
```

样本结果集：

```
| 68080104    | 2009 | Multiracial     |          0 |
| 68080104    | 2009 | White           |        847 |
| 68080104    | 2010 | American Indian |          1 |
| 68080104    | 2010 | Asian           |          4 |
| 68080104    | 2010 | Black           |         17 |
| 68080104    | 2010 | Hispanic        |          4 |
| 68080104    | 2010 | Multiracial     |          2 |
| 68080104    | 2010 | White           |        823 |
| 68080104    | 2011 | American Indian |          4 |
| 68080104    | 2011 | Asian           |          4 |
| 68080104    | 2011 | Black           |          9 |
| 68080104    | 2011 | Hispanic        |         10 |
| 68080104    | 2011 | Multiracial     |         24 |
| 68080104    | 2011 | White           |        767 |
+-------------+------+-----------------+------------+ 
```

我想添加一个名为 total 的第 5 列，它显示给定年份和地区总人口的总和。例如，如果我在 2011 年在 68080104 区，那么总数将是 (4+4+9+10+24+767)。我需要它作为此查询中的另一列。它还需要快速。（不到 10 秒）。我正在努力解决如何做到这一点而不影响速度和数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:11:32.577

您需要为此创建一个单独的查询并将其与原始查询连接。试试这个，

```
SELECT a.*, b.totalCount
FROM
    (
        SELECT sds.district_id,detail.year, detail.race, SUM(count)
        FROM    school_data_race_ethnicity_raw as detail
                    INNER JOIN school_data_schools as sds 
                        USING (school_id)
        GROUP BY district_id, year, race
    )   a INNER JOIN
    (
        SELECT sds.district_id,detail.year, SUM(count) totalCount
        FROM    school_data_race_ethnicity_raw as detail
                    INNER JOIN school_data_schools as sds 
                        USING (school_id)
        GROUP BY district_id, year
    )   b ON a.district_id = b.district_id AND
            a.year = b.year 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:07:51.253

使用 WITH ROLLUP

```
SELECT sds.district_id,detail.year, detail.race, SUM(count)
FROM school_data_race_ethnicity_raw as detail
INNER JOIN school_data_schools as sds USING (school_id)
GROUP BY district_id, year, race WITH ROLLUP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:12:14.517

在 MySQL 中，要获取同一行上的数据，您几乎必须将其作为连接来执行：

```
select t.*, t2.cnt as TotalDistrictYear
from (SELECT sds.district_id,detail.year, detail.race, SUM(count) as cnt
      FROM school_data_race_ethnicity_raw as detail INNER JOIN
           school_data_schools as sds USING (school_id)
      GROUP BY district_id, year, race
     ) t join
    (SELECT sds.district_id,detail.year,SUM(count) as cnt
      FROM school_data_race_ethnicity_raw as detail INNER JOIN
           school_data_schools as sds USING (school_id)
      GROUP BY district_id, year
     ) t2
     on t.district_id = t2.district_id and
        t.year = t2.year 
```

# python - 从 for 循环中更新外部范围变量值的最佳方法？

> ID：12303018
> 
> 赞同：3
> 
> 时间：2012-09-06T15:04:40.337
> 
> 标签：python, perl, reference, for-loop, scope

这个问题与我之前的问题有关：[python update outer passed value from within a for loop](https://stackoverflow.com/questions/12286231/python-update-outer-passed-value-from-within-a-for-loop)。

来自 Perl 背景，通过引用传递变量并从子范围内更新值从来都不是问题，如下面的 for 循环示例所示：

```
#!/usr/bin/perl
my ($str1,$str2) = ('before','before');
print "before - str1:'$str1', str2:'$str2'\n";

foreach my $str($str1,$str2){$str = 'after'}
print "after - str1:'$str1', str2:'$str2'\n"; 
```

我知道在 Python 中这是不可能的，因为变量是*按值*而不是*按引用*导入的，到目前为止，我在 Python 中找到的唯一能够完全满足我需要的解决方案是：

```
def changeValue(str):
  return 'after'

str1 = 'before'
str2 = 'before'
for s in str1,str2: print s

str1 = changeValue(str1)
str2 = changeValue(str2)
for s in str1,str2: print s 
```

虽然不理想，但如果我可以*从***for 循环中调用函数 'changeValue'**就可以了——而不是像上面那样单独调用它们——但是我又回到了原来的“不能通过引用传递变量”问题。

我确信必须有一种简单且不那么复杂的 Pythonic 方式来实现我所追求的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:13:32.163

在 python 中，做这样的事情的方法几乎可以肯定是使用字典来存储你的数据：

```
d = {'s1':'before','s2':'before'}

for k in d.keys():
    print d[k]

for k in d.keys():
    d[k] = 'after'
    print d[k] 
```

还有其他解决方案（修改`globals`字典有效，但**非常不鼓励，因为它会导致几乎无法阅读/调试的代码**）。也许如果我们知道这方面的实际用例，我们也许可以提供一些更好的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:13:17.677

对此的解决方案是停止使用自变量，而是将它们存储在字典中。例如：

```
def changeValue(str):
  return 'after'

data = {
    'str1': 'before',
    'str2': 'before',
}

for k, v in data.iteritems():
    print k, v

# as you had it:
data['str1'] = changeValue(str1)
data['str2'] = changeValue(str2)

# with a loop:
for key in ['str1', 'str2']:
    data[key] = changeValue(data[key])

# or a nicer way:
for k, v in data.iteritems():
    data[k] = changeValue(v)

for k, v in data.iteritems():
    print k, v 
```

# c# - 如何自动将新用户添加到 AddThis 服务以设置分析服务

> ID：12303019
> 
> 赞同：0
> 
> 时间：2012-09-06T15:04:44.750
> 
> 标签：c#, javascript, api, jquery-mobile, addthis

我正在构建一个为我的客户提供移动网站的网站（后台）。

所有用户的移动网站结构都是相同的。

我想在后台添加一个“报告”选项卡，其中包含使用 AddThis 服务的分析信息，因此每个用户都可以查看他的移动网站统计信息。

据我了解，我需要将 AddThis javascript 分析代码添加到每个客户（即每个移动网站）以及一个公共号码。

如何为每个登录的新用户自动获取一个新的公共号码？

我确信有一个更简单的解决方案。

我是一名新开发人员，我正在用 C# 开发后台办公室，并使用 jQquery mobile 和 javascript 开发移动网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:31:20.730

您可以为每个站点创建一个新的配置文件并生成一个新的 pubid。可以通过转到“设置”部分并单击左侧导航中的“配置文件”来创建配置文件。然后，您将能够使用他们的 pubid 查询网站的分析。

配置文件信息：http: [//support.addthis.com/customer/portal/articles/381216-using-profiles#.UFczpaSXRuo](http://support.addthis.com/customer/portal/articles/381216-using-profiles#.UFczpaSXRuo)

分析 API 信息：http: [//support.addthis.com/customer/portal/articles/381264-addthis-analytics-api#.UFc0MaSXRuo](http://support.addthis.com/customer/portal/articles/381264-addthis-analytics-api#.UFc0MaSXRuo)

# jquery - .ajax 问题，会降低 IE 的整体性能

> ID：12303022
> 
> 赞同：2
> 
> 时间：2012-09-06T15:04:48.937
> 
> 标签：jquery, ajax, performance, internet-explorer

我在同一页面上有两个 .ajax 调用，联系 google 和 flickr api。

```
$.ajax({
    type: "GET",
    url: 'https://gdata.youtube.com/feeds/api/users/marcomshull/uploads?v=2&alt=json&max-results=3&callback=?',
    contentType: "application/json; charset=utf-8",
    dataType: 'json',
    cache: false,
    success: function(data)
    {
        // some function
    }
}); 
```

出于某种原因，即使我对收到的数据什么都不做，它似乎仍然会减慢页面速度，“.animation()”和其他 javascript 功能的巨大延迟。

Firefox 和 Chrome 显示了出色的结果。

页面加载后，我尝试发出更多请求来闪烁页面减慢几秒钟，以加载内容，之后它工作正常。

我一直在使用IE7和IE8。
第一个 ajax 请求 6 个项目（~32.64KB），第二个是 10 个（~1.83KB）。
页面上总共有 29 个请求 - 68kb 的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:38:35.980

IE7 和 IE8 在今天是相当老的浏览器，有时如果你正在处理一个有很多移动部分（jQuery 动画等）的页面，你肯定会看到很多速度变慢。然而在 IE7 中更是如此。IE8 应该是半显眼的，但远没有 IE7 差。

**话虽如此**，您是否尝试过完全删除 ajax 调用并分析 IE7/IE8 中的页面性能？我猜如果没有电话，情况也会同样糟糕。

几年前我也遇到过同样的问题，发现我只是想用旧技术做很多事情=/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:58:50.420

我不知道这对你来说是否可行，但如果你在动画完成后进行 ajax 调用，它将提高效果的性能。

例子：

```
$('#content').animate(600, function(){
//ajax call here
)}; 
```

# android - 复杂布局中的 Webview 滚动/尺寸问题

> ID：12303026
> 
> 赞同：0
> 
> 时间：2012-09-06T15:05:01.387
> 
> 标签：android

我有这个布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/back"
>

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<ImageView android:layout_width="200dp"
    android:layout_height="200dp"
    android:layout_gravity="center_horizontal"/>

<WebView 
    android:id="@+id/htmlView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

/>

</ScrollView> 
```

Webview 仅用于显示 html 格式的文本，我不需要任何特殊功能。问题是我没有得到可滚动的布局，而是这样的：

* * *

textview（大，大约占布局的 30%，不可滚动）

* * *

图片（大，大约 50% 不可滚动）

* * *

微小的可滚动网页视图

* * *

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:03:12.660

这可能会帮助你......

```
parentScrollView.setOnTouchListener(new View.OnTouchListener() {

                    public boolean onTouch(View v, MotionEvent event) {
                        Log.v(TAG,"PARENT TOUCH");
                        findViewById(R.id.webView).getParent().requestDisallowInterceptTouchEvent(false);
                        return false;
                    }
                });
                webView.setOnTouchListener(new View.OnTouchListener() {

                    public boolean onTouch(View v, MotionEvent event)
                    {
                        Log.v(TAG,"CHILD TOUCH");
                         //  Disallow the touch request for parent scroll on touch of child view
                        v.getParent().requestDisallowInterceptTouchEvent(true);
                        return false;
                    }
                }); 
```

# android - 运行在主线程中的回调方法可以运行在onStartCommand中间吗？

> ID：12303027
> 
> 赞同：0
> 
> 时间：2012-09-06T15:05:08.697
> 
> 标签：android, multithreading, service

我知道 onStartCommand 中的代码将在主线程上运行。在这个方法中，我生成了一个新的网络线程，它与服务器通信，当它完成时，它执行一个也在主线程中运行的回调方法。

我的问题是，如果onStartCommand和callback方法都在主线程中执行，并且只要网络调用完成就执行callback方法，那么callback方法的代码行是否可能在中间执行onStartCommand 方法的执行？

这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:41:00.207

如果生成的网络线程进行了您确定将在主线程中执行的函数调用，那么实现此目的的唯一方法是通过某种共享资源，最常见的是：某种工作队列、套接字或两个线程之间共享的变量（通过方法调用设置），必须由主线程轮询，导致它执行某个方法。

我认为最简单的方法是工作队列，但根据您在评论中发布的链接，它提到了通常使用 TCP/IP 套接字的 JSON。我将介绍每种方法通常是如何工作的。

工作队列：

网络线程将创建某种工作条目并将其排入主线程工作队列。如果主线程在方法（onStartCommand()）的中间，那么它也不能执行工作条目。最有可能的是，当它完成当前方法时，它将返回并返回到从队列中拉出条目的轮询方法。因此，如果使用这种方法，那么 onSuccess() 和 onFailure() 将创建工作条目并将其排入队列，这些工作条目将从 onStartCommand() 返回后执行

JSON 套接字：

这种方法与工作队列非常相似，但将使用套接字消息而不是工作条目。并且将有一个函数会轮询（很可能通过 select() 或 poll()）套接字并将接收到的消息视为工作项。因此如果使用这种方法，那么 onSuccess() 和 onFailure() 将创建并发送套接字消息，这些消息将在从 onStartCommand() 返回后执行

# coffeescript - 如何初始化实例变量而不必将它们放入构造函数中？

> ID：12303028
> 
> 赞同：2
> 
> 时间：2012-09-06T15:05:09.010
> 
> 标签：coffeescript

鉴于这种

```
class A
   opt: {}
   init: (param) ->
      console.log "arg is ", @opt.arg
      @opt.arg = param

a = new A()
a.init("a")
console.log "first", a.opt.arg

b = new A()
b.init("b")
console.log "second", b.opt.arg 
```

这是输出

```
arg is  undefined
first a
arg is  a
second b 
```

该变量`opt`充当静态变量，它属于类`A`而不是实例`a`或`b`。如何初始化实例变量而不必将它们放入构造函数中？像这样：

```
class A
   constructor: ->
      @opt = {} 
```

编辑：

当使用继承时这是有问题的，因为超级构造函数被覆盖了。

```
class B
   constructor: ->
      console.log "i won't happen"
class A extends B
   constructor: ->
      console.log "i will happen"
      @opt = {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:10:00.587

您的 opt 对象是通过原型共享的，您可以直接在实例中覆盖它，但是如果您更改其中的对象，您实际上会更改原型对象（静态行为）。在使用咖啡脚本类时，了解原型非常重要。

我认为初始化实例成员的最好方法是在构造函数中，就像你在做 atm 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:05:00.090

好的，在构造函数中启动所有类成员并记住`super()`在子类构造函数中调用解决了它......

```
 class B
       constructor: ->
          console.log "i will also happen"
    class A extends B
       constructor: ->
          super()
          console.log "i will happen"
          @opt = {}

    new A() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:26:29.817

如果“opt”应该作为静态附加到类

```
class A
    @opt: {}
    init: (param) ->
        # the rest is ommitted 
```

# android - 以编程方式更改 Android 主屏幕页面

> ID：12303030
> 
> 赞同：2
> 
> 时间：2012-09-06T15:05:11.730
> 
> 标签：android, icons, shortcut, homescreen, desktop-shortcut

以下是在 Android 主屏幕上创建一些指定快捷方式的示例代码：

```
public void setupShortCut(String iconName, String siteAddress)
{
Intent i = new Intent();
i.setAction(Intent.ACTION_VIEW);
i.setData(Uri.parse(siteAddress));

Intent installer = new Intent();
installer.putExtra(Intent.EXTRA_SHORTCUT_INTENT, i);
installer.putExtra(Intent.EXTRA_SHORTCUT_NAME, iconName);       
installer.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
sendBroadcast(installer);
} 
```

问题是：如何更改主屏幕的当前页面以不在当前选择的页面上而是在指定的页面上创建新的快捷方式？或者，除了快捷方式的名称、位图等之外，还有一种方法可以指定主屏幕页码以放置新的快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:11:14.363

你不能这样做（只要我们一般谈论发射器）。这将没有真正的用处，因为您不知道用户获得了多少屏幕，并且您的选择之一是否已经满了。

# iphone - iphone开发：在动画期间禁用用户交互

> ID：12303036
> 
> 赞同：11
> 
> 时间：2012-09-06T15:05:42.167
> 
> 标签：iphone, objective-c, ios, animation, user-interaction

在我的应用程序中，我有一些动画。例如，我的主菜单中有一个按钮，当您单击它时，动画开始（例如移动某个地方等），并在动画结束时导航到另一个页面。我需要的是在动画期间禁用用户交互。因为在动画期间如果我按下按钮的起点，应该导航的页面会打开两次。综上所述，如果我在动画过程中不让任何形式的用户交互，我的问题就迎刃而解了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T15:08:59.893

动画前：

```
self.view.userInteractionEnabled = NO; 
```

在动画完成块中：

```
self.view.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-19T07:13:15.800

这可能会有所帮助：

```
// for ignoring event
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];
[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

代码将如下所示：

```
[UIView animateWithDuration:1.0 animations:^{
        //some animation
        [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    }
    completion:^(BOOL done){
        if (done){
            [[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
        }
    }
]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-06T15:07:46.517

很简单，您可以在动画开始之前设置`setUserInteractionEnabled`为`NO`，然后在动画完成处理程序中将其设置回`YES`.

```
[myObject setUserInteractionEnabled:NO];
[UIView animateWithDuration:1.0 animations:^{
    [myObject setTransform:CGAffineTransformMakeTranslation(100, 100)];//some animation
}completion:^(BOOL done){
    if (done){
        [myObject setUserInteractionEnabled:YES];
    }
}]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T15:15:20.847

您不必修改完成块 - 有一个动画选项可以做到这一点：

```
[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction
    animations:^{
        // animations here
    }
    completion:nil]; 
```

如果您设置了`UIViewAnimationOptionAllowUserInteraction`，则将允许用户交互。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-30T10:19:20.470

要在视图中禁用触摸事件，

```
 [[UIApplication sharedApplication] beginIgnoringInteractionEvents]; 
```

在视图中启用触摸事件

```
[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-06T15:08:32.257

```
yourView.userInteractionEnabled = NO;
[UIView animateWithDuration:1 animations:^
{
    //animations here                    
}
completion:^(BOOL finished)
{
    yourView.userInteractionEnabled = YES;
}]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T15:09:16.610

禁用 Button 的 userIntrection。

```
Btn.userInteractionEnabled = NO; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-21T11:46:56.063

我有带有打开页面图标的视图控制器。如果用户快速点击 icon1 和 icon2，则打开 2 个页面。

为了防止我在点击事件的开头有这 2 行，这确保无论发生什么，endIgnoring 都会调用

```
-(void) on_image_tap:(UITapGestureRecognizer * ) tapGesture
{
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    [[UIApplication sharedApplication] performSelector:@selector(endIgnoringInteractionEvents) withObject:nil afterDelay:0.5f]; 
```

# javascript - 获取用户按键的时间

> ID：12303037
> 
> 赞同：0
> 
> 时间：2012-09-06T15:05:46.670
> 
> 标签：javascript, html, clock

我真的很感激，如果有人可以帮助我，我已经被这个问题困扰了几天，谷歌和其他 stackoverflow 答案似乎没有帮助。

我有一个带有模拟时钟的 Web 应用程序，从时钟我需要能够获取用户按下键盘的时间并将其与他们输入的时间进行比较，我可以通过表单获取他们输入的时间，但我我无法理解如何获得实际的按键时间。

只是为了确保我走在正确的轨道上，我是否能够在每个任务页面中放入一个 for 循环，例如：

```
 var i = 0; 
    for (i = 0; i < 40; i ++){

         //Add user input from form into an array

         //Add actual key press time in an array

         //Show next task link after the 40 trials are complete

         document.getElementById('nextTask').style.visibility="visible";
         document.getElementById('nextTask').style.display="block";
      } 
```

有 120 个试验，分 3 个单独的任务。

其中1个没有声音。

另外两个有声音，但只有 50% 和 75% 的时间会发出哔哔声，而在其他时候则不会......（我仍然在这方面苦苦挣扎......但我稍后会解决这个问题，哈哈。）

最后一点，我是否能够仅使用一个网页运行 40 次试验，或者我是否必须为整个任务创建 40 X 3 个单独的页面。

我创建了一个 JSFiddle，我对整个想法还是陌生的，所以如果我犯了错误，请告诉我。[http://jsfiddle.net/StrangeLondoner/ymXeG/](http://jsfiddle.net/StrangeLondoner/ymXeG/)

时钟在随机数毫秒后停止，要按下的两个键是 s 和 k。

我要感谢您花时间阅读这个问题，并希望能以某种方式帮助我找到解决方案。

**完成的**

嘿伙计们，感谢您的意见。我想我会让你们知道我做了什么，以及是否有其他人正在寻找类似的答案。它可能有点原始，但我创建了一个相同的计数器，并与时钟同时运行，我知道性能方面这并不理想，但我想这必须做，直到我想出一个更好的解决方案。我想我必须让它以某种方式工作。

不管怎么说，还是要谢谢你。如果我能以某种方式找到更好的解决方案，我会更新这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:18:43.813

获取系统时钟并根据您的时钟指示进行匹配。这将是最准确的，因为您的时钟可能会滞后于系统负载。（当然，尝试获得按键也可以，但至少可以将伤害降到最低。）

Javascript 对于实时处理来说是一种糟糕的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:31:14.773

我会尝试这个 jQuery。它可能对您正在做的事情有用。

```
$(document).keydown(function(f){

if (f.keycode == 83 || f.keycode == 75) //key codes for s and k
{
    var d = new Date();
    var n = d.getTime();  // n now equals the number of milliseconds since January 1, 1970;
}

doSomethingWithTheTime(n); //Here you would call a function to store or compare your time.

return false;

}); 
```

# photoshop - 如何制作自定义占位符图像？

> ID：12303040
> 
> 赞同：0
> 
> 时间：2012-09-06T15:05:49.120
> 
> 标签：photoshop, placeholder

我知道有很好的服务可以提供占位符图像。我用过这些。我想为我的办公室制作占位符图像。有没有一种简单的方法来生成特定的图像尺寸而不是使用照片编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:44:41.397

当然。尝试[placehold.it](http://placehold.it)或[dummyimage](http://dummyimage.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T14:22:31.193

我最喜欢的是[http://placekitten.com](http://placekitten.com)

您只需要使用这种格式的 url 设置 img 的 src，`http://placekitten.com/{width}/{height}`例如`http://placekitten.com/g/200/300`

每个请求都会返回不同的小猫图片

好的 placekitten 图像不是自定义的，正确答案是前一个：[https](https://dummyimage.com/) ://dummyimage.com/但这些占位符并不像小猫那样漂亮

# visual-studio - 如何检查是否指向我的复杂框架？

> ID：12303041
> 
> 赞同：0
> 
> 时间：2012-09-06T15:05:50.433
> 
> 标签：visual-studio, mfc, region

在我的 MFC 应用程序中，我有 MianFrame 和许多浮动/停靠栏，它们几乎没有共同点。我需要检查是否指向我的复杂框架。我曾尝试使用此代码：

```
MainFrame::___
{
...
HRGN hrgn = CreateRectRgn(0,0,0,0);
int regionType = GetWindowRgn(hrgn);
if (regionType != ERROR) 
{ 
if ( !PtInRegion(hrgn, p.x, p.y) )  
    return false;
}
DeleteObject(hrgn); 
...
} 
```

但 regionType 总是 == 错误。你能明白为什么吗？或者，您可能知道另一种解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:12:07.543

您可以尝试调用 GetLastError() 以获得更好的错误代码。

或者您可以尝试使用 GetClientRect() 和 PtInRect() 看看是否能提供更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:51:07.600

您可以使用 GetWindowRect() 获取“rect”，然后使用 HRGN hrgn = CreateRectRgn(0,0,0,0)，然后使用 hrgn 和 'rect' 获取 SetRectRgn。只要 SetRectRgn 正常返回，你的代码就可以了。

我对此也很陌生。是否需要启动hrgn？

# oauth - 发布自定义对象返回发生未知错误 OAuthException 代码 1

> ID：12303043
> 
> 赞同：3
> 
> 时间：2012-09-06T15:05:55.890
> 
> 标签：oauth, facebook-opengraph

使用 Graph API Explorer，我可以使用应用令牌或用户令牌重现此错误。

呼叫 (POST)

```
/0000userid0000/mynamespace:Create
thread=aURLonOurSite
access_token=xxxxxx 
```

回复

```
{
  "error": {
    "message": "An unknown error has occurred.", 
    "type": "OAuthException", 
    "code": 1
  }
} 
```

运行令牌调试表明我有权限：

```
Issued : 1346937448 (about an hour ago) 
Expires: 1352121448 (in about 2 months) 
Valid  : True 
Origin : Web 
Scopes : email publish_actions user_location 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:03:01.630

您的问题不够清楚，但我将在这里向您展示我在以前的项目中使用过的示例。

```
$params = array(
    'voucher'=>$plink,//'https://thevoucherlink.com/account/order/post.php?image='.$file_name.'&business_name='.$dd['title'].'&from='.$_SESSION['fb_uid'].'&to='.$_POST['friend_id'].'&msg='.$d['giftmsg'],
    'access_token'=>$facebook->getAccessToken(),
    'message'=>$d['giftmsg'],
    );

$out = $facebook->api('/me/thevoucherlink:send','post',$params); 
```

在这里，我`send`对对象使用了动作`Voucher`。我认为您没有在参数上使用对象。

谢谢

# wordpress - 重写 Wordpress 的 URL 发布格式（旁边、链接、图库...）（翻译 slugs）

> ID：12303047
> 
> 赞同：2
> 
> 时间：2012-09-06T15:06:05.420
> 
> 标签：wordpress, seo

我使用西班牙语的 WordPress，我喜欢有西班牙语的永久链接。对于西班牙语用户来说，它更具语义。

在*设置*>*永久链接*中可以更改“*类别库*”（默认为“类别”）和“标签库”（默认为“标签”）。对于一些插件，还有“作者库”和“分页库”（默认为“页面”）。但是，我已经更改了帖子格式基础（类型为 Tipo），但**我不知道如何更改帖子格式的 slug 名称（默认情况下为“aside”、“link”、“quotes”、...）**。

我想获得一个像“http://domain.com/tipo/cita ”这样的**永久链接**，而不是“http://domain.com/ **type/quote** **”**来列出引用帖子。

 **谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T22:37:09.360

我看到@cscean 几天后在[http://justintadlock.com/archives/2012/09/11/custom-post-format-urls](http://justintadlock.com/archives/2012/09/11/custom-post-format-urls)收到了答复。要将帖子格式基础从 type 更改为 tipo，他会使用

```
add_filter( 'post_format_rewrite_base', 'my_post_format_rewrite_base' );

function my_post_format_rewrite_base( $slug ) {
return 'tipo';
} 
```

作者包含更多代码来完成对永久链接问题的回答。**

# apache-flex - 在 Flex 中的图像/按钮/图标上添加文本

> ID：12303052
> 
> 赞同：0
> 
> 时间：2012-09-06T15:06:18.430
> 
> 标签：apache-flex, mxml

我有一个 GridItem()。我需要添加一个带有文本的小图像，但我不太清楚如何。我可以添加一个按钮并将标签设置为某些东西，效果很好。我不知道如何更改按钮的图像。我可以添加一个图标，但该图标就位于按钮内的文本旁边。

有任何想法吗？我对 flex 很陌生，不知道如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:53:39.990

为什么不使用内置组件，而不是构建自定义组件？创建一个新的 MXML 组件，给它一个 Group 超类。然后只需创建您想要的内容。

最后应该看起来像这样。

```
<s:Group width="200" height="50">
    <s:Image id="image" source="blah" left="0" right="0"/>
    <s:Label id="label" text="Blah some more" verticalCenter="0" horizontalCenter="0" />
</s:Group> 
```

这显然是相当简单的，但你明白了。您可以轻松扩展它。您可以将点击事件添加到基本组，您可以在其中添加更多项目。而且，最好的是，您可以随心所欲地重复使用它。或者，您可以将该代码直接放入您当前的类/组件中并完成它。内置组件很棒，但有时自己构建自定义组件确实更容易。

# css - CSS3 渐变为 SVG

> ID：12303056
> 
> 赞同：6
> 
> 时间：2012-09-06T15:06:30.997
> 
> 标签：css, svg, gradient, radial-gradients

在我的页面上，我使用了很多 CSS3 渐变。我想为 IE 和 Opera 提供一些 SVG 后备。

为 CSS3 线性渐变创建 SVG 后备非常简单。我使用以下代码：

```
 <svg xmlns="http://www.w3.org/2000/svg">
     <linearGradient id="g" gradientTransform="rotate(90,.5,.5)">
       <stop stop-color="black" offset="0"/>
       <stop stop-color="white" offset="1"/>
     </linearGradient>
     <rect x="0" y="0" width="100%" height="100%" fill="url(#g)"/>
   </svg> 
```

这相当于这个css：

```
 background:-webkit-linear-gradient(black,white);
  background:   -moz-linear-gradient(black,white);
  background:     -o-linear-gradient(black,white);
  background:        linear-gradient(black,white); 
```

现在，当谈到 CSS3 径向渐变时，事情变得有点复杂了。我没有运气为 CSS3 径向渐变创建 SVG 等效项，如下所示：

```
 background:-webkit-radial-gradient(50% 10%,circle,rgba(255,255,255,.3) 10%,rgba(255,255,255,0) 90%);
  background:   -moz-radial-gradient(50% 10%,circle,rgba(255,255,255,.3) 10%,rgba(255,255,255,0) 90%);
  background:     -o-radial-gradient(50% 10%,circle,rgba(255,255,255,.3) 10%,rgba(255,255,255,0) 90%);
  background:        radial-gradient(circle at 50% 10%,rgba(255,255,255,.3) 10%,rgba(255,255,255,0) 90%); 
```

到目前为止，我已经设法想出了这个：

```
<svg xmlns="http://www.w3.org/2000/svg">
  <radialGradient id="g">
    <stop stop-opacity=".3" stop-color="white" offset=".1"/>
    <stop stop-opacity="0" stop-color="white" offset=".9"/>
  </radialGradient>
  <rect x="0" y="0" width="100%" height="100%" fill="url(#g)"/>
</svg> 
```

但它给了我不同的结果。

如何在 CSS3 中产生与原始渐变相同的渐变？

这是两个渐变的演示：http: [//jsfiddle.net/QuMnA/](http://jsfiddle.net/QuMnA/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:02:08.503

您需要指定径向渐变的`cx`和`cy`属性...

```
<svg xmlns="http://www.w3.org/2000/svg">
  <radialGradient id="g" r="1" cx="50%" cy="10%">
    <stop stop-opacity=".3" stop-color="white" offset=".1"/>
    <stop stop-opacity="0" stop-color="white" offset=".9"/>
  </radialGradient>
  <rect x="0" y="0" width="100%" height="100%" fill="url(#g)"/>
</svg> 
```

# asp.net-mvc-3 - 使用自定义 MembershipProvider 部署 MVC3 应用程序

> ID：12303060
> 
> 赞同：1
> 
> 时间：2012-09-06T15:06:48.273
> 
> 标签：asp.net-mvc-3, deployment

在尝试使用自定义 MembershipProvider delpoy ASP.Net MVC3 应用程序时，我得到了这个：

```
This method cannot be called during the application's pre-start initialization stage.

Line 43    <membership defaultProvider="NAMembershipProvider">
Line 44      <providers>
Line 45        <clear/>
Line 46        <add name="NAMembershipProvider" type="MyPage.Infrastructure.NAMembershipProvider" 
                    enablePasswordRetrieval="false" enablePasswordReset="true"
                    requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" 
                    minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
                    applicationName="/" />
Line 47      </providers>
Line 48    </membership> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:06:36.147

这样做的常见问题实际上是没有清除您的提供商，您已经完成了。

你有没有遵循这个： [ASP.NET：在应用程序的预启动初始化阶段不能调用这个方法](https://stackoverflow.com/questions/4626647/asp-net-this-method-cannot-be-called-during-the-applications-pre-start-initial/4682282#4682282)

这将出现的另一次是在 MVC 框架升级之后。您可以通过简单地重新启动 IIS（或重新启动机器，如果您愿意的话）来解决这个问题。我无法解释为什么会这样，或者什么资源被搁置了，但它在升级后至少两次对我有用。

# python - 当调用 pexpect.spawn 时，生成的程序是否立即开始执行？

> ID：12303061
> 
> 赞同：3
> 
> 时间：2012-09-06T15:06:51.907
> 
> 标签：python, pexpect

`pexpect.spawn`对象在`expect`（或`interact`,`send`等）被调用之前是否处于非活动状态，或者被调用的进程是否立即启动？例如：

```
import pexpect
process = pexpect.spawn("echo HELLO")
print ("Process created? Or run?")
process.expect("HELLO") 
```

当`print`语句发生时，`pexpect`已经在后台运行了 echo 命令并且只是推迟让它返回，直到`expect`处理调用？还是在第一次致电或类似情况`echo`之前没有发生任何事情（尚未运行） ？`expect`

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:17:34.817

当传递一个命令时，`pexpect.spawn()`立即分叉并调用该命令。您示例中的 echo 命令已经运行。

这在[`spawn`构造函数文档](http://pexpect.sourceforge.net/pexpect.html#spawn)中有所暗示：

> 这是构造函数。命令参数可以是一个字符串，包括命令和命令的任何参数。例如：：
> 
> ```
> child = pexpect.spawn ('/usr/bin/ftp')
> child = pexpect.spawn ('/usr/bin/ssh user@example.com')
> child = pexpect.spawn ('ls -latr /tmp') 
> ```
> 
> 您也可以使用如下参数列表构造它：
> 
> ```
> child = pexpect.spawn ('/usr/bin/ftp', [])
> child = pexpect.spawn ('/usr/bin/ssh', ['user@example.com'])
> child = pexpect.spawn ('ls', ['-latr', '/tmp']) 
> ```
> 
> 在此之后，子应用程序将被创建并准备好与之交谈。

我已经通过查看[源代码](http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/pexpect.py?revision=HEAD&view=markup)确认了这一点；构造函数调用`_spawn()`，记录如下：

> 这将在子进程中启动给定的命令。这为 pty 做了所有的 fork/exec 类型的东西。这是由 调用的`__init__`。如果 args 为空，则将解析命令（按空格分割），并将 args 设置为已解析的参数。

# c# - HttpWebResponse -> 如何找到具有特定 id、类和标题的链接？

> ID：12303072
> 
> 赞同：0
> 
> 时间：2012-09-06T15:07:38.437
> 
> 标签：c#, .net, element, httpwebresponse, windows-applications

如何解析 HTML 以找到带有特定or or的锚 ( `<a />`) 元素？`id``class``title`

最终，我想找到`href`属性的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:25:05.447

这是一个例子

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(somehtmlstring);

string value = doc.DocumentNode.Descendants("a")
    .First(n => n.Attributes["class"].Value == "someclass")
    .Attributes["href"]
    .Value; 
```

# caching - 模拟 Akamai 缓存环境

> ID：12303073
> 
> 赞同：2
> 
> 时间：2012-09-06T15:07:44.363
> 
> 标签：caching, testing, emulation, akamai

我正在尝试测试一些代码并查看它在使用 Akamai 缓存时的工作方式。谁能推荐一个工具或插件，它可以让我模拟页面加载，就像在 Akamai 缓存时一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:26:46.570

大约一年前我使用了 Akamai，但从未找到过这样的工具。我希望我这样做了，它会非常有用。

您*可以*使用 Charles 或类似的工具，并为要测试的任何资产返回 304 Not Modified HTTP 代码作为缓存。这是一种非常手动的方法，但取决于您的测试规模，它可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T23:08:55.180

作为严格测试从缓存加载页面的 var ，您可以设置[varnish](https://www.varnish-cache.org/)。就像您可以配置 akamai 设置缓存的内容和不缓存的内容一样，您也可以在 varnish 中进行设置。

如果您正在测试速度，那么这是另一个问题，就像您在本地进行测试一样，显然可以消除任何网络延迟。如果您在相对本地的托管服务器上进行测试，则它会更准确，因为 akamai 的全球网络除了缓存内容外，还通过将最终用户定向到最近的边缘服务器来提高页面速度。这不是一个补充，它只是一个你应该知道的数据，这取决于你试图模仿的是什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-06T10:13:32.787

对于其他需要这个的人，你可以很容易地在你的环境中使用 nginx 作为反向代理。一个简单的例子就是这个 nginx conf，它允许你缓存来自上游服务器的响应。请注意，您可能需要修改主机文件或主机头以满足原始虚拟主机规则。

```
http {

    proxy_cache_path cache levels=1:2 keys_zone=mycache:100m inactive=60m;
    proxy_cache_key "$scheme$request_method$host$request_uri";
    proxy_store_access user:rw group:rw all:r;

    server {

        listen       80;
        server_name  localhost;

        location / {

            proxy_set_header Host $http_host;
            proxy_cache mycache;

            # proxy to ..
            proxy_pass $scheme://www.yoursite.com;

        }

    }

} 
```

你可以在这里看到这种类型的东西[https://github.com/wyvern8/akamai-nginx](https://github.com/wyvern8/akamai-nginx) ..它使用 Akamai 属性 api 自动配置具有类似规则的 nginx 代理。

# jquery - jQuery API counter++ 在悬停时暂停然后恢复

> ID：12303078
> 
> 赞同：1
> 
> 时间：2012-09-06T15:08:07.687
> 
> 标签：jquery, api, timer

我需要在鼠标悬停或悬停时让这个计数器暂停（停留在当前 div），并在鼠标悬停时恢复计数器。我尝试了很多方法，但对 jQuery API 还是很陌生。

```
<div id="slide_holder">
<div id="slide1" class="hidden">
<img src="images/001.jpg" class="fill">
</div>
<div id="slide2" class="hidden">
<img src="images/002.png" class="fill">
</div>
<div id="slide3" class="hidden">
<img src="images/003.jpg" class="fill">
</div>

    <script>
        $(function () {

            var counter = 0,
                divs = $('#slide1, #slide2, #slide3');

            function showDiv () {
                divs.hide() // hide all divs
                    .filter(function (index) { return index == counter % 3; }) // figure out correct div to show
                    .fadeIn('slow'); // and show it

                counter++;
            }; // function to loop through divs and show correct div

            showDiv(); // show first div    

            setInterval(function () {
                showDiv(); // show next div
            }, 3 * 1000); // do this every 10 seconds    

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:25:33.403

这应该可以解决问题：

## *[jsBin 演示](http://jsbin.com/awakiv/5/edit)*

```
$(function () {

    var counter = 0,
        divs = $('.slide'),  // add a class to your elements !!
        divsN = divs.length, // will return a number of elements in collection
        intv;                // add this

    function showDiv () {
        divs.hide().eq(counter++%divsN).fadeIn('slow'); // wow! :)    
    }                        // <-- remove ';'
    showDiv();

    function auto(){         // create a function
        clearInterval(intv);
        intv = setInterval(function(){
            showDiv(); 
        }, 10000 );          
    }
    auto();                  // kick auto 'slide'

    divs.on('mouseenter mouseleave',function(e){
        var evt = e.type=='mouseenter' ? clearInterval(intv) : auto();
    });

}); 
```

# java - Java 7 keytool 椭圆曲线加密

> ID：12303079
> 
> 赞同：8
> 
> 时间：2012-09-06T15:08:08.127
> 
> 标签：java, encryption, keytool, elliptic-curve

我正在尝试使用带有 keyalg ECC 的 keytool 创建一个密钥库。

根据[Oracle](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes) ，这应该是可能的。我引用：

> 领域：工具
> 
> 概要：`keytool`和`jarsigner`工具现在支持密钥对生成和 jar 签名中的 ECC 算法。
> 
> 射频：[6870812](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6870812)

我正在使用 32 位版本 1.7.0_07，并且我已经尝试使用带有 -keyalg ECC、ECIES、ECDSA 的 keytool...但我总是得到`Cannot derive signature algorithm`.

我是否使用了错误的 Java 版本？我是否为 ECC 使用了错误的名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-28T20:06:19.293

这是算法选择的[来源](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/share/classes/sun/security/tools/keytool/Main.java#l1556)。允许的值为`DSA`,`RSA`和`EC`。据我所知，这些值没有记录在任何地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T15:10:46.813

我相信您必须为 JCE 安装无限强度策略才能使用所有算法。如果您还没有这样做，它位于此页面的底部：[http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# sql - 将 Excel 中的数据提交到 SQL 表

> ID：12303084
> 
> 赞同：1
> 
> 时间：2012-09-06T15:08:30.800
> 
> 标签：sql, excel

我需要帮助，我正在尝试给我们的一位员工一个 Excel 表，该表从 SQL 表中提取数据，然后允许她使用 Excel 将某些字段更新回 SQL 表。我有数据连接设置，因此 Excel 可以正确地从 SQL 中提取数据，但我没有运气让 Excel 将数据发送回 SQL 表并更新字段。我已经看到了多个代码示例，这些示例似乎与我正在寻找的内容相似，但我对此没有任何吸引力。

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:05:26.207

I've tried this a few times and it's never worked out very well, far easier for me and our employees has been to use Access with a linked table that allows data to be written directly back to the server. If possible it might be worth exploring this as it's a completely 'out of the box' solution.

# apache - IIS 和 Apache2 之间的 502 代理错误

> ID：12303087
> 
> 赞同：6
> 
> 时间：2012-09-06T15:08:37.630
> 
> 标签：apache, iis, proxy, mod-proxy

我目前正在`apache2`一个`SUSE`实例上运行`@EC2`。作为我网站的一部分，我的数据用于`mod_proxy`访问`REST`通过`IIS`.`Proxy/ReverseProxy`

在设置我的`vhosts`，启用`mod_proxy`和建立我的配置后，我发现我经常遇到`502`错误。这些错误是有`Proxy Error`味道`Bad Gateway`的。在做了一些相当大的谷歌之后，我发现方式有所不同，`IIS`并`apache`终止了导致错误的连接。设置以下环境变量后，性能明显提升：

SetEnv force-proxy-request-1.0 1
SetEnv proxy-nokeepalive 1 SetEnv
proxy-initial-not-pooled 1

我想知道为什么这会起作用以及理想的配置会是什么样子。

我的理解是，对于 Env 变量：
我正在强制一个`HTTP 1.0 request`（这将标准化终止预期）
不保持任何连接
不使用任何池连接
正确吗？

如果我需要使用池连接怎么办？如果我想使用保活怎么办？简而言之，我正在寻找替代我目前使用的牙签和胶水解决方案的最佳做法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:07:10.457

我看到这个问题已经存在了一段时间，所以我想我会投入 2 美分。反正我的经验更多...

据我所知，这三个环境变量或设置在生产中是可以的。你对它们的理解也是正确的。当我遇到这个问题时，我发现[这个](http://weblogs.asp.net/gunnarpeipman/archive/2009/02/07/apache-iis-and-502-proxy-error.aspx)链接在解释问题时很有用。它只发生在后端的 IIS 中......请注意，初始池设置会特别影响 Http/1.0 客户端的性能......我从来没有注意到任何事情，但是，仅 iis 服务器就有 64gb 的内存和几个核心在机器上......所以我承认我不能确定“它根本没有影响”，我所知道的是“有足够的资源你就没有问题”......

老实说，但是，关于你的牙签声明，我知道有几十个实现这个的生产环境......你可以设置其他东西并使用 apache 并更改它以实现更长的超时等，但我已经设置了这些设置并且它只是工作......

我想我只是想说你不应该因为这些设置而失去任何睡眠。在我看来，虽然我不知道它们是否是最佳实践，但它们是安全的......

对不起，我帮不上什么忙……

干杯罗宾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:50:32.163

我认为我收到此错误是因为服务器的硬盘空间不足。不寻常，但它发生了。

# r - 异步写入 R 中的文件

> ID：12303088
> 
> 赞同：6
> 
> 时间：2012-09-06T15:08:38.673
> 
> 标签：r, asynchronous

谁能为我提供一些关于如何从一个非常大的文件块中异步写入的指导，每个文件都在多个集群（8-500）中使用相同的函数进行处理。该文件大约 25 GB，太大而无法放入内存。

我们目前正在使用“snow(fall)”和“mmap”包，但无法克服一些瓶颈。同步写入工作正常，但异步写入效率更高。

我不确定您需要更多信息，但请随时问我！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-07T20:24:12.487

也许你可以使用

```
sink("filename.any_extension") 
```

因此，一旦从命令接收到结果，使用它就会在文本文件中输出结果，并进一步处理您的结果

```
readLines("filename.any_extension",n=-1,warn=TRUE). 
```

我希望这有帮助。

# javascript - 在 Javascript 对象数组中查找元素

> ID：12303091
> 
> 赞同：1
> 
> 时间：2012-09-06T15:08:45.160
> 
> 标签：javascript, jquery

我有一个像

```
var objArr = [Object{key="1", value="a"}, Object{key="2", value="b"}, ...] 
```

我们是否有任何 Jquery 方法找到对象并将其删除。我知道使用`$.each`

```
$.each(objArr, function(index, obj) {

}) 
```

但是我们有什么简单有效的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:10:05.563

如果没有 jQuery，只需使用javascript[的过滤器功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var filtered = objArr.filter(function(o){return o.key!='badkey';}); 
```

（请注意，MDN 页面提供了与非常旧的浏览器兼容的提示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:00:22.430

要查找元素，您可以使用 .grep() 函数示例：过滤数字数组以包含不大于零的数字。

```
$.grep( [0,1,2], function(n,i){
return n > 0; 
},true); 
```

结果：[0]

或者，如果您只需要查找该元素的位置，您可以使用 .inArray() 函数示例：查找与匹配的元素的位置：“1”

```
var arr = [ 4, 2, 3, 1, "hello" ];
var exist = $.inArray(1, arr); 
```

结果：

存在 = 3

对于删除，有一个帖子可能可以解决您的问题 [How to remove specific value from array using jQuery](https://stackoverflow.com/questions/3596089/how-to-add-and-remove-array-value-in-jquery)

# asp.net - 如何操作从 IIS7 提供的静态文件

> ID：12303094
> 
> 赞同：1
> 
> 时间：2012-09-06T15:08:47.217
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, http, iis-7

我有一个 ASP.net MVC 站点，我还从虚拟目录中提供一些静态 html、js 和 css 文件。根据请求的用户代理，我想在提供静态 html 文件时对其进行操作（使用剃刀视图不是一个选项 - 我需要在静态文件中工作）。你是写一个 HttpHandler og 一个 HttpModule 还是有一些可以挂钩的 StaticHttpHandler 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:03:11.973

编写一个普通的控制器和动作。将适当的路线映射到该操作。您可以在该操作中做任何您想做的事情，包括读取文件、修改数据并将其返回给 HTTP 客户端。

# php - 如何从两个不同但相关的 MySQL 表中回显元素？

> ID：12303100
> 
> 赞同：0
> 
> 时间：2012-09-06T15:09:06.513
> 
> 标签：php, mysql

好的，所以我在 MySQL 中有这两个表。一种称为“历史”，一种称为“注释”。

“历史”表充满了可以重复的随机 YouTube 视频 ID。“注释”表包含每个视频 ID 的唯一副本以及该 ID 的描述。看起来像这样：

```
History                            Annotated

video id                   video id         description

id_1                       id_1             description_1
id_1                       id_2             description_2
id_3                       id_3             description_3
id_2                       id_4             description_4
id_3                       etc.             etc.
id_1
id_4
id_2
etc. 
```

好的，所以历史表的顺序非常重要。我想将订单（重复和全部）打印到我的页面上，但我想从它们旁边的带注释的表中打印它们各自的描述，所以它看起来像这样：

```
id_1   -    description_1
id_1   -    description_1
id_3   -    description_3
id_2   -    description_2
id_3   -    description_3  
id_1   -    description_1
id_4   -    description_4
id_2   -    description_2
etc.        etc. 
```

到目前为止，我已经查询了数据库，并从我想要打印的历史记录中制作了一个数组。代码如下所示：

```
$query = mysql_query("SELECT `videoid` FROM `History` WHERE BLAH BLAH;");
$idVideoColumn = array();
while($row = mysql_fetch_array($query)){
      $idVideoColumn[] = $row['videoid'];
}
$implodedIdVideo = "'".implode("', '", $idVideoColumn)."'"; 
```

所以我已经准备好我的 videoid 列表，以供变量 $implodedIdVideo 中包含的 MySQL 查询使用。任何人都知道是否可以打印我正在尝试做的事情？（请不要回答我已弃用的​​ MySQL 语法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:11:34.067

```
SELECT h.videoid, a.description
    FROM history h
        INNER JOIN annotated a
            ON h.videoid = a.videoid
    WHERE blah blah
    ORDER BY h.SomeColumnForOrdering; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:41:08.097

```
 $sql =  select video_id , description from history A , annotated B   where A.video_id = B.video_id ORDER BY A.video_id DESC; 
```

您必须预先加入才能获得期望的结果。

您粘贴错误的代码：

```
while($row = mysql_fetch_array($query)){
      $idVideoColumn[] = $row['videoid'];
} 
```

$idvideoCoulm 应该为空，因为您正在使用 mysql_fetch_array 来获取结果，然后您将 $row['videoid'] 分配给具有名称索引的 $idVideoColumn[]。这是永远不会发生的，因为 mysql_fetch_array 总是按数组索引返回值，你应该使用 mysql_fetch_assoc。

```
$str = "" ;
while($row = mysql_fetch_assoc($query)){
      $str .= $row['videoid'] . ',' . $row['description'] ; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:56:04.790

呃，我不能让它与连接表一起工作。我对 MySQL 的了解还不够好。我决定以笨重不灵活的方式来做。

```
$query4 = mysql_query("SELECT `videoid` FROM `History` WHERE BLAH BLAH;");
$idVideoColumn = array();
while($row = mysql_fetch_assoc($query4)){
    $idVideoColumn[] = $row['videoid'];
}
$implodedIdVideo = "'".implode("', '", $idVideoColumn)."'";
$length = count($idVideoColumn);

$i = 0;
while($i < $length) {
    $query = mysql_query("SELECT `description` FROM `Annotated` WHERE `videoid` = '".$idVideoColumn[$i]."';");
    $result = mysql_fetch_assoc($query);
    echo $idVideoColumn[$i] . " --- " . $result['description']."<br /><br />";
    $i = $i + 1;
} 
```

# c# - 隐藏时如何调用对象方法

> ID：12303102
> 
> 赞同：1
> 
> 时间：2012-09-06T15:09:23.800
> 
> 标签：c#, .net

例如，如果我有一个创建以下方法的类：

```
public new string ToString() {
//some code
} 
```

但是假设我需要从 Object 类中调用 ToString 方法。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:10:29.963

您应该转换为`Object`然后调用该方法：

```
class A
{
    public new string ToString()
    {
        return "bugaga!";
    }
}

static void Main(string[] args)
{
    var a = new A();

    Console.WriteLine(a.ToString());
    Console.WriteLine(a); // here object 'a' will be casted to object
} 
```

输出：

```
bugaga!
ConsoleApplication4.Program+A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:12:34.877

使用`((Object)myvariable).ToString()`，铸造回基地。

更多在这里：

[http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.100).aspx)

你确定你真的想在你的班级上创建一个*新* `ToString()`的吗？*覆盖*原始实现是很常见的：

[http://msdn.microsoft.com/en-us/library/ms173154(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms173154(v=vs.100).aspx)

# xcode - 我可以从情节提要和代码中获得相同的视图控制器对象吗？

> ID：12303107
> 
> 赞同：0
> 
> 时间：2012-09-06T15:09:45.703
> 
> 标签：xcode, uiviewcontroller, storyboard, segue, uistoryboardsegue

我已经提到了[Storyboard - 请参阅 AppDelegate 中的 ViewController](https://stackoverflow.com/questions/8186375/storyboard-refer-to-viewcontroller-in-appdelegate)。

我想问一下它是否和我们在故事板中看到的一样。如果我们这样编码：

```
 FirstViewController* fvc = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"first"];
    NSLog(@"fvc=%@", fvc);
    [fvc performSegueWithIdentifier:@"go2next" sender:fvc]; 
```

正如我测试的那样，它与以下内容不同：

```
 NSLog(@"self=%@", self);
    [self performSegueWithIdentifier:@"go2next" sender:self]; 
```

从日志中，我可以看到它们不是同一个对象。如何通过代码从情节提要中获取相同的视图控制器 obj？

我在情节提要中创建了两个名为（FirstViewController，SecondController）的视图控制器，并在两者之间添加了一个segue。我尝试使用 performSegueWithIdentifier 转移到第二页。[self performSegueWithIdentifier] 有效，而 [fvc performSegueWithIdentifier] 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:34:50.617

我终于解决了这个问题。如果我在 AppDelegate.m 中添加以下行

```
FirstViewController* fvc = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"first"];
self.window.rootViewController = fvc;
NSLog(@"fvc=%@", fvc);
[fvc performSegueWithIdentifier:@"go2next" sender:fvc]; 
```

它的工作原理与：

```
NSLog(@"self=%@", self);
[self performSegueWithIdentifier:@"go2next" sender:self]; 
```

# asp.net - 如何将 GUID 与原始文件名映射？

> ID：12303109
> 
> 赞同：0
> 
> 时间：2012-09-06T15:09:52.310
> 
> 标签：asp.net, asp.net-mvc-3, razor

所以我上传文件并将 GUID 添加到数据库中，在我的索引视图页面上，我想在一个列中显示具有原始文件名的文件，在下一列中显示 GUID，有什么建议吗？

类定义为

```
public Guid ID { get; set; }
    public string FileName { get; set; } 
```

索引控制器

```
 public ViewResult Index()
    {

        return View(uploadedfileRepository.AllIncluding(UploadedFile => UploadedFile.TimeEntrys));
    } 
```

和视图

```
 @foreach (var item in Model)
{
    <tr>
        <td>
            @item.ID
        </td>
        <td>
           @item.FileName
        </td>
} 
```

因此，我将文件保存到我的uploadfile 数据库上下文中，并尝试在索引视图中显示该文件，并在其旁边显示我的原始文件名和guid。

我保存文件的方式

```
UploadedFileRepository newUploadedFileRepository = new UploadedFileRepository();
    private string _uploadsFolder = HostingEnvironment.MapPath("~/App_Data/Files/");

    public Guid SaveUploadedFile(HttpPostedFileBase fileBase)
    {
        var identifier = Guid.NewGuid();
        fileBase.SaveAs(_uploadsFolder + identifier + suffix(fileBase.FileName));
var file = new UploadedFile { FileName = _uploadsFolder + identifier + suffix(fileBase.FileName), ID = Guid.NewGuid() };
        _repository.UploadedFiles.Add(file);
        return identifier;

    }
    static string suffix(string filename)
    {
        string[] names = filename.Split('.');

        return "." + names[1].ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:12:41.010

```
@model MyWebApplicationNameSpace.Models.MyModel

<table>
  <tr>
    <td>@Model.ID</td>
    <td>@Model.FileName</td>
  </tr>
</table> 
```

与其返回 Guid，不如返回 UploadedFile 类型。

```
public UploadedFile SaveUploadedFile(HttpPostedFileBase fileBase) {

    ...
    return file;
} 
```

# spring - Apache commons httpclient 还是 Spring 的 Resttemplate？

> ID：12303118
> 
> 赞同：0
> 
> 时间：2012-09-06T15:10:14.630
> 
> 标签：spring, http, rest

如果我需要创建一个发送请求 xml 并取回响应 xml 的 HttpClient，我试图在 commons http 客户端和 resttemplate 之间找出哪个是更好的选择。xml 包含服务器端将存储在数据库中的元数据信息。另外，java.net.HttpURLConnection 的普通 java 类呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:32:34.737

您应该使用 RestTemplate，它可以通过接口 ClientHttpRequestFactory 使用 java.net 包、commons-httpclient 或 http-component 的 java 类。

ClientHttpRequestFactory 默认有一些实现：

*   SimpleClientHttpRequestFactory -> 用于 java.net.HttpURLConnection 的普通旧 java 类

*   HttpComponentsClientHttpRequestFactory -> 用于 Apache HttpComponents HttpClient

*   CommonsClientHttpRequestFactory (@Deprecated) -> 用于 Jakarta Commons HttpClient

# html - 在 h1 元素旁边显示内联 HTML 元素时的最佳实践？

> ID：12303124
> 
> 赞同：9
> 
> 时间：2012-09-06T15:10:41.790
> 
> 标签：html, css, block, html-heading

我有一个显示“产品”名称的网页，在同一行旁边有编辑/删除链接。例子：

**产品 1**（编辑 | 删除）

我希望产品名称具有大字体，并且编辑/删除按钮具有常规字体大小（即与段落等相同）。我希望它们显示为内联，就像上面的例子一样。我只是想知道我应该使用什么 HTML/CSS 来实现这一点。

如果我使用 h1 元素作为产品名称，它会将编辑/删除链接推送到下一行，因为 h1 是一个块元素。所以我可以在我的 CSS 和 make 中覆盖 h1 `display: inline`，但是弄乱 h1 的自然外观似乎违反了最佳实践（？）。

另一种选择是根本不使用 h1 元素并使用几个内联 div 或 span。但是不使用 h1 元素作为网页的顶级标题似乎也违背了最佳实践......它还需要我明确设置字体大小，这意味着我不能使用默认字体大小h1 和 p 元素，我在整个网站的其余部分都使用它们。

在这种情况下最好的方法是什么？我知道这是一个简单/微不足道的问题，但无论如何很高兴知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:15:44.583

是的，这些链接不属于您的`<h1>`. 一种方法是浮动标题，如下所示：

```
​&lt;h1>Title</h1>
<div class="tools"> <!-- perhaps use an unordered list here and not div -->
    <a href="#">Edit</a>
    <a href="#">Delete</a> <!-- use a form with POST to delete instead -->
</div> 
```

```
h1 { float:left; } 
```

[http://jsfiddle.net/JeuXt/](http://jsfiddle.net/JeuXt/)

显示部分（CSS）没有通用的最佳实践或方法，但您*确实*希望保持 HTML 干净并让所有内容在语义上正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:40:50.177

使用包装器`div`和`h1`浮动它可能会对您有所帮助。

这是你想要的？：http: [//jsfiddle.net/Pt2BZ/](http://jsfiddle.net/Pt2BZ/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T15:21:55.857

另一种选择是使用经常被忽视的`display: run-in;`风格。这将导致`h1`“运行”到紧邻的块级元素。

**注意**- 浏览器对此规则的支持可能仍然有点参差不齐，所以我一定会在生产环境中使用之前对其进行测试。

HTML

```
<h1>Page Title</h1>
<div class="links">
    ( <a href="#">Edit</a> | <a href="#">Delete</a> )
</div>​ 
```

CSS

```
h1 {     
    display: run-in;
    vertical-align: middle;
} 
```

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/Bgmwh/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T15:22:05.187

就我个人而言，我只是使用`<span></span>`带有 CSS 类的标签而不是标题标签来制作自定义类型的标题。由于标题标签展示了它们自己的默认行为，您将拥有更大的灵活性，并且您可能会发现自己对标题标签样式所做的任何更改都会开始影响您网站的其他部分。

编辑：这是 W3C 关于使用`<H1>`标签的想法的链接：[链接](http://www.w3.org/QA/Tips/Use_h1_for_Title)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-06T15:13:17.467

我建议使用`<h1>`标签并将要缩小的元素包装在`<span>`. 然后在 span 上设置一个类并使用 CSS 定位它，例如：

**HTML**

```
<h1>Product 1 <span class="foo">(Edit | Delete)​​​​​&lt;/span></h1>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
​.foo {
    font-size: 10px;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/HEhHc/)**

# html - 字段出错时无法制作内联提交按钮

> ID：12303131
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:11:09.153
> 
> 标签：html, css

我有这样的问题。

我想始终使提交和字段内联 ![](../Images/54fa3290f6d08ae6ed6f0b0d55b1ffde.png)

但是当出现错误时，轮到：

![](../Images/6ab9a48e275a170a623e972649633b19.png)

这是出现错误时表单的html代码：

```
 <form accept-charset="UTF-8" action="/wibiya_users/1" class="edit_user"></div>
  <div class="field">
   <div class="field_with_errors"><input id="user_email" name="user[email]" size="30" type="text" value="email@mail.com1"></div>
  </div>
 <ul>
   <li>Email is invalid</li>
</ul>

 <div class="submit">
  <a href="#" onclick="$(this).closest('form').submit(); return false;">Edit</a>
 </div>

</form> 
```

这个CSS：

```
 .field{
  display:inline;
  }
   .submit{
  display:inline;
  } 
```

尝试添加：

```
 .field_with_errors{
   margin:0;
    diplay:inline;
  } 
```

但没有帮助。

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:23:23.830

将您的编辑按钮放在错误消息上方，并`float:left;`应用于`.field`. 它会起作用。

[**小提琴**](http://jsfiddle.net/9sXDA/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:27:12.957

您的错误消息在您的输入和提交之间......因此，当它不存在时，一切都很好，但是当它存在时，它会按下它之后的元素，在这种情况下是提交按钮。

# javascript - 需要 JavaScript 支持的页面上的 cURL 请求

> ID：12303134
> 
> 赞同：6
> 
> 时间：2012-09-06T15:11:16.780
> 
> 标签：javascript, cookies, curl, web-scraping, spoofing

我需要获取 pinnaclesports.com 的 HTML 源代码。问题是它检测是否启用了cookies和JS，如果没有，它只返回一些页面说

> 本网站需要启用 JavaScript 和 Cookie。请更改您的浏览器设置或升级您的浏览器。

使用 cURL 时有什么方法可以欺骗 JS 支持？

编辑：我可以使用作为 Perl/Ruby 模块运行或用 PHP 编写的无头浏览器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-30T12:19:22.473

其他建议是设置用户代理，这个解决方案适用于谷歌组的解析器：

```
curl -L -v "https://groups.google.com/d/forum/<GROUP-NAME>" -A "Mozilla/5.0 (compatible;  MSIE 7.01; Windows NT 5.0)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:50:37.423

我发现，如果您进行无 cookie 请求，则将返回一个页面，该页面使用 javascript 设置 cookie，即您使用 curl 获得的页面。

像这样打另一个 curl 电话

```
curl https://www.pinnaclesports.com/ --cookie "YPF8827340282Jdskjhfiw_928937459182JAX666=122.167.231.139" 
```

即您必须进行 2 次调用 1) 减少 cookie 调用、读取和正则表达式以查找 cookiename。2) 设置 cokie 名称后进行第二次请求。这将解决您的问题。

或者
只使用 YQL

```
select * from html where url="https://www.pinnaclesports.com/" 
```

将你的卷曲指向[这里](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20html%20where%20url=%22https://www.pinnaclesports.com/%22&diagnostics=true)

# maven-2 - 如何更改 nexus 后缀 url？

> ID：12303135
> 
> 赞同：2
> 
> 时间：2012-09-06T15:11:19.247
> 
> 标签：maven-2, nexus

我需要设置 nexus 以使他将 url 从一个更改为另一个，例如，如果用户类型： mySite.com/ **maven2**他应该被重定向到 mySite.com/ **content/groups/maven2**。如何更改连接设置来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:59:26.563

在 Nexus 前面放置一个代理服务器，为您执行此操作。我会推荐 Apache httpd 或 NGINX。

# css - 移动网站的每个页面上的不同背景图片？

> ID：12303139
> 
> 赞同：1
> 
> 时间：2012-09-06T15:11:40.090
> 
> 标签：css, image, mobile, background-image

目前，我正在使用这段代码来调用静止图像背景，而不是在常规站点上播放的视频：

```
media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
         html{
           background: url('img/background.jpg') no-repeat center center fixed !important;
           background-size: cover;
           height: 100%;
         }
} 
```

我想为每个页面使用不同的图像，我该如何实现呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:45:59.333

如果您为每个页面的正文标记提供不同的 ID，则可以使用不同的图像定位每个页面：

HTML：

```
<body id="homepage">

<body id="about"> 
```

ETC...

然后，在您的媒体查询中，CSS 将是：

```
body#homepage {
    background-image: url('img/homepageBackground.jpg');
}

body#about {
    background-image: url('img/aboutBackground.jpg');
} 
```

# javascript - 基于 Ruby If 语句插入 Javascript

> ID：12303140
> 
> 赞同：1
> 
> 时间：2012-09-06T15:11:43.240
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, modal-dialog

我正在尝试根据当前用户的条件触发引导模式。本质上，要在用户访问的页面中做任何事情，他们需要在系统中创建一个酒店。如果他们没有，我想要一个模式弹出创建表单。目前，我有：

```
 <%= unless current_user.hotels.exists? 
    "<script>
       $('#createhotelModal').modal('toggle') 
     </script>"
     end    
    %> 
```

它只是插入 as 文本。尝试下一个 <%= javascript_tag do %> 命令不适用于控制器抛出各种错误。这是明智的做法，还是我应该创建一个完全独立的页面并使用控制器将人们发送到正确的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:21:41.367

遵循此[railscast中列出的建议](http://railscasts.com/episodes/324-passing-data-to-javascript)

```
<%= javascript_tag do %>
  $('#createhotelModal').modal('toggle')
<% end %> 
```

# c - 无法理解 sysinfo 返回的负载

> ID：12303141
> 
> 赞同：10
> 
> 时间：2012-09-06T15:11:48.933
> 
> 标签：c, sysinfo

为了找到 linux 中的平均负载，我使用了 sys/sysinfo.h，其中包括 linux/kernel.h，其中定义了以下结构：

```
struct sysinfo {
long uptime;            /* Seconds since boot */
unsigned long loads[3];     /* 1, 5, and 15 minute load averages */
unsigned long totalram;     /* Total usable main memory size */
unsigned long freeram;      /* Available memory size */
unsigned long sharedram;    /* Amount of shared memory */
unsigned long bufferram;    /* Memory used by buffers */
unsigned long totalswap;    /* Total swap space size */
unsigned long freeswap;     /* swap space still available */
unsigned short procs;       /* Number of current processes */
unsigned short pad;     /* explicit padding for m68k */
unsigned long totalhigh;    /* Total high memory size */
unsigned long freehigh;     /* Available high memory size */
unsigned int mem_unit;      /* Memory unit size in bytes */
char _f[20-2*sizeof(long)-sizeof(int)]; /* Padding: libc5 uses this.. */
}; 
```

但我认为它并没有给出真正的负载。

输出：2552402、3214049236、134513148

这个值是什么意思？

`uptime`我们可以使用以下命令找到当前负载：

```
$uptime
13:00:14 up 35 min,  2 users,  load average: 1.07, 0.95, 0.80 
```

我找不到以上两个输出之间的任何联系。

* * *

我在互联网上搜索过。[这](http://www.linuxquestions.org/questions/programming-9/load-average-return-values-from-sysinfo-309720/)表示将其除以 2^16 (65536)。我也试过了。（或按 SI_LOAD_SHIFT 移动 1，即 1 << SI_LOAD_SHIFT。因为 65536 = 1 << 16）

我使用具有四个 i3-2120 处理器的计算机。'upitime' 的输出与 CPU 的数量有关。[维基百科 load_average](http://en.wikipedia.org/wiki/Load_%28computing%29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-08-01T05:58:13.087

查看您提供的链接，您应该根据`SI_LOAD_SHIFT`常量（由 包含`sys/sysinfo.h`）缩放负载，并引入可用 CPU 的数量以将其转换为 CPU 使用率百分比：

```
struct sysinfo sysinf;
memset(&sysinf, 0, sizeof sysinf);
if (!sysinfo(&sysinf)) {
    float f_load = 1.f / (1 << SI_LOAD_SHIFT);
    printf("load average (1 min): %.2f (%.0f%% CPU)\n",
        sysinf.loads[0] * f_load,
        sysinf.loads[0] * f_load * 100/get_nprocs());
    // process other loads as well of you need
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:52:05.327

负载平均值以定点算法表示。相关常量请参见[此处](http://lxr.linux.no/#linux+v3.5.3/include/linux/sched.h#L111)。我们看到最后一个 FSHIFT 位用于表示小数部分。要获得平均负载，您始终可以像[/proc/loadavg](http://lxr.linux.no/#linux+v3.5.3/fs/proc/loadavg.c)一样进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:25:13.387

我得到了解决方案。

我忘了调用`sysinfo(&sysinfo_obj)`函数。

# java - ..和*在aspectj中是什么意思

> ID：12303142
> 
> 赞同：7
> 
> 时间：2012-09-06T15:11:50.220
> 
> 标签：java, annotations, aspectj

我的理解是，这`..`是`0-Many`args 并且`*`是`any`名称的一个 arg。这个对吗？

aspectj 是否支持类似的语法`args(..,myArg,..)`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T15:56:57.513

这是来自 AspectJ 网站： http: [//www.eclipse.org/aspectj/doc/next/progguide/semantics-pointcuts.html](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-pointcuts.html)

`*`表示除“.”之外的任意数量的字符

`..`表示任意数量的字符，包括任意数量的“.”

**Update** From AspectJ in Action - 对于方法签名：

> 在方法签名中，通配符 .. 用于表示方法采用的任何类型和数量的参数

`*`指定单个参数

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T17:54:59.070

其他人已经回答了我面前的部分问题，所以我只会修改：

`.., bla, ..`不起作用，因为如果将参数绑定`bla`到变量，则可能存在多个匹配组合，以防匹配类型在参数列表中多次出现。例子：

`void foo(int a, String b, String c, File d)`

现在，如果建议是：

`before(String bla) : call(void foo(.., bla, ..)) && args(bla)`

应该`bla`绑定到or的`String`值？`b``c`

# google-closure-library - 使用 goog.labs.async.combine 获取“多次尝试设置此结果的状态”

> ID：12303143
> 
> 赞同：0
> 
> 时间：2012-09-06T15:11:54.863
> 
> 标签：google-closure-library

尝试使用新的 goog.labs.async.combine 但它抛出异常“多次尝试设置此结果的状态”。我阅读了源代码和示例并遵循它。下面是我使用组合的部分。在继续之前，我需要 2 个 xhr 调用的结果（示例保持简单，但实际上我还需要 3 或 4 个调用）。任何帮助或信息我都非常感谢。君维克多里奥

```
var xhr = goog.labs.net.xhr;
var emailUrl = "some url...";
var companyUrl = "some url...";

var emailResults = null;
var companyResults = null;

try {
    emailResults = xhr.getJson(emailUrl, {"headers":{"Accept":"*/*", "Content-     Type":"application/json"}});
    companyResults = xhr.getJson(companyUrl, {"headers":{"Accept":"*/*", "Content-Type":"application/json"}});

    var combineResult = goog.labs.async.combine(emailResults, companyResults);

    goog.labs.async.wait.onSuccess(combineResult, function(results) {
        log("Combined Finished");
    });

    goog.labs.async.wait.onError(combineResult, function(results) {
        log("Combined Finished");
    });

} catch (error) {
   log(error);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:15:16.007

它看起来像闭包库问题。我有同样的问题，这个修复工作。 [http://code.google.com/p/closure-library/issues/detail?id=495](http://code.google.com/p/closure-library/issues/detail?id=495)

# git - Gerrit 挂钩重定向

> ID：12303144
> 
> 赞同：0
> 
> 时间：2012-09-06T15:11:55.320
> 
> 标签：git, redirect, hook, gerrit

您是否使用任何用于 gerrit 的钩子？我需要一个来扫描补丁集。

我试图在 下创建更新钩子`GIT_DIR/hooks/`，但是 gerrit 会在合并时绕过该钩子，而在直接推送到 git 时它可以工作。然后我尝试`gerrit_site/hooks/patchset_created`使用**+x**权限创建。我可以看到类似“ `echo $GIT_DIR`”的 error_log，但消息无法重定向到 ssh 终端等用户界面。退出 0 和 1 也不会阻止推送。

gerrit 钩子是否有可能充当 git 之一，可以将消息重定向到用户并阻止某些补丁集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:50:25.897

> gerrit 钩子是否有可能充当 git 之一，可以将消息重定向到用户并阻止某些补丁集？

不，Gerrit 钩子不能阻止操作，也不能将输出重定向回用户。它们运行后动作，因此在调用钩子时动作已经完成。[请参阅http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/config-hooks.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/config-hooks.html)上的官方文档

目前正在添加预提交钩子，并将在 Gerrit 的未来版本中可用，可能作为插件。

当前最好的选择是创建一个 Gerrit 挂钩，它会像您描述的那样扫描补丁集，然后使用 ssh 接口对 Gerrit 中的更改进行评论。在 $dayjob，我们使用这样的钩子自动给带有不符合我们标准的提交消息的补丁提供 -2 审查分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:50:08.160

它似乎没有记录，我自己还没有测试过，但是 ref-update（没有来自 ref-updated 的 d）钩子似乎做了你应得的：[https ://gerrit-review.googlesource.com/#/ c/31350/](https://gerrit-review.googlesource.com/#/c/31350/)

# arrays - 液体标记贴图过滤器示例

> ID：12303149
> 
> 赞同：4
> 
> 时间：2012-09-06T15:12:18.997
> 
> 标签：arrays, liquid

我可以举一个关于 Liquid 地图过滤器如何工作的通用示例吗？似乎没有这方面的文档。映射过滤器是“在给定属性上映射/收集数组” - 但是您如何确定属性？

此示例存在 -[液体模板映射过滤器](https://stackoverflow.com/questions/5751830/liquid-template-map-filter)- 但它似乎特定于单个用例。地图一般如何工作？

我知道要过滤的输出是数组，但是map的参数是什么？

例如：

```
{{ page.tags | map: 'name' }} 
```

什么名字？它是要输出的值的标签吗？对于给定的对象，如何确定该标签可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:38:43.993

map 通过遍历元素数组的每个元素，然后获取给定属性的值来工作。

您必须知道要传入的元素数组的属性是什么。

即：如果您有一个collection.products，并且您想获取集合中每个产品的句柄，然后以逗号分隔的字符串返回它们，您可以执行以下操作：

```
{{ collection.products | map: 'handle' | join: ',' }} 
```

这将列出所有产品句柄：

```
across-the-mountains,alpine-meadow,appproaching-storm,arboretum-poster,around-st-peters,basic-tee,bryce-canyon-sunrise,crocuses,flower-print-mum,gatineau-park-stream,product-2,hooded-sweater,product-3,last-light-at-sandbanks,last-light-on-opabin-plateau,library-of-parliament,library-of-parliament-poster,long-beach-tofino,magnolia,meadow-2,mountain-panoramic-2,ready-to-frame-tulip-print-10,ready-to-frame-tulip-print-11,ready-to-frame-tulip-print-12,ready-to-frame-tulip-print-13,ready-to-frame-tulip-print-14,ready-to-frame-tulip-print-15,ready-to-frame-tulip-print-2,ready-to-frame-tulip-print-3,ready-to-frame-tulip-print-4,ready-to-frame-tulip-print-6,ready-to-frame-tulip-print-7,ready-to-frame-tulip-print-8,ready-to-frame-tulip-print-9,ready-to-frame-tulip-print-5,ready-to-frame-tulip-print-1,sample,shopify-shirt,shirt,sunset-on-lake-ohara,t-shirt,library-of-parliament2,test-prdouct,test-prod,test-product-1,test-product,testing,the-arboretum-poster,the-arboretum-central-experimental-farm,the-colosseum 
```

# asp.net - 如何使用 Linq-To-Sql 在一个组中编写一个 CASE？

> ID：12303152
> 
> 赞同：1
> 
> 时间：2012-09-06T15:12:30.827
> 
> 标签：asp.net, sql, linq, linq-to-sql

在 ASP.NET 4 中，我正在尝试使用 LINQ-To-SQL 在组中编写 case 语句。例如，我正在尝试这样做：

```
Select ...
FROM Table T
GROUP BY CASE
            WHEN T.COLUMN1 IS NULL THEN T.COLUMN2 
            ELSE T.COLUMN3 
         END 
```

您将如何在 LINQ 中翻译该查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:23:49.507

就像是

```
from t in T
group t by (t.Column1 == null ? t.Column2 : t.Column3) into grp
select ... ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:24:02.707

您可以尝试使用此代码

```
 var result = 
   from item in T
   group item by new { YourColumn = ((item.Column1 == null) ?  item.Column2  : item.Column3) } into g
   select g; 
```

# java - JTable keypressed 事件仅在按下的第一个键时触发

> ID：12303160
> 
> 赞同：0
> 
> 时间：2012-09-06T15:12:51.117
> 
> 标签：java, swing, jdbc, autocomplete

我正在创建一个计费软件，我想显示数据库中与我的 JTable 的项目列中键入的值相匹配的项目名称。为此，我添加了一个 KeyListener。一切正常，除了只有第一个键，keypressed 事件被触发。如果我按回车键然后再次输入，它会再次被触发。我希望为连续输入列中的每个键触发keyevent，任何人都可以帮助我......？

我将给出代码片段...我希望 DB 中的项目显示在 itable 中...

```
 public void keyPressed(KeyEvent e) {
        rows=table.getSelectedRow();
        cols=table.getSelectedColumn();
        if(cols==2){
           String code=(String)table.getValueAt(rows, cols);

           Statement stmt = null;
           ResultSet rs = null;

           for (int i =model1.getRowCount();i>0; i--) {
              model1.removeRow(i-1);
            }
            table.changeSelection(rows,cols, false, false);

           itable.setVisible(true);
           int i=0;
           String SQL = "SELECT * FROM items where name like\'"+code+"%\' or
                           code=\'"+code+"\' order by name";

           try{
               stmt =  (Statement) dbcon.con.createStatement();
               rs = stmt.executeQuery(SQL);
               while (rs.next()) {
                    model1.insertRow((i),new Object[]{""});
                    itable.setValueAt((Object)rs.getString("name"), i, 0);
                     i++;
                }

            }
            catch(Exception e1){
                  table.editCellAt(rows,cols,null);
                  return;

            }}
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:27:24.067

这可能是因为您不再在 JTable 中，而是在表格的 CellEditor 中。

创建一个带有键侦听器的 JTextField。将其作为表格的编辑器（通过 getColumn().setCellEditor()）并使用“textCellEditor.setClickCountToStart(1);”定义您的单元格编辑器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:44:31.280

*   不要使用`KeyListener`for `Swing JComponents`，这`Listener`不是指定 for`JTextComponents`也不是 for `Compound JComponents`as `JTable`，`JSpinner`或者`JComboBox`是

*   不要在每个事件上都与 e`ResultSet`对抗`Databas`，也不要打开`JDBC Connection`，因为这两个动作可能需要很长时间并且`GUI`以这种形式等待直到`ResultSet`结束

*   `Connection`, `Resultset`and `Statement`must be `close()`, and into `finally`block ( `try - catch - finally`) 否则会留在内存中，数据库也可以减少连接数，您可以获取`OutOfMemory`或数据库可以拒绝打开新连接，因为您超载了打开的最大并发连接数

*   您的代码谈论将减少的记录数加载到`AutoCompleted JComboBox or JTextField`应用程序 Start_Up 上，仅一次，

*   那么你可以问一个新问题[如何......](https://stackoverflow.com/questions/6410839/highlights-substring-in-the-tablecells-which-is-using-for-jtable-filetering)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:44:30.703

问题是，只要您在选定表格的情况下键入一个键，该表格就会开始编辑该选定项目（并且所有以下键事件都将被定向到该“TableCellEditor”）。

假设您不希望以这种方式编辑任何数据，一个简单的解决方案是覆盖“DefaultTableModel”，因此所有数据都不可编辑。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TestProject extends JPanel{

    public TestProject(){
        super();

        //Use default table model - only make it so no cells are editable
        final DefaultTableModel model = new DefaultTableModel(0, 5){
            @Override
            public boolean isCellEditable(int row, int column){
                return false; // makes no table cells editable
            }
        };

        //Create table off of Table Row
        final JTable table = new JTable(model);
        for(int i = 0; i < 20; i++){
            model.addRow(new String[]{i+".1", i+".2",i+".3",i+".4",i+".5",});
        }

        add(table, BorderLayout.CENTER);

        //Add Key Listener
        table.addKeyListener(new KeyAdapter() {         
             public void keyPressed(KeyEvent e) {
                 System.out.println("pressed");
                 char key = e.getKeyChar();
                 int selectedColumn = table.getSelectedColumn();

                 //Update info in table
                 for(int i = 0; i < model.getRowCount(); i++){
                     String value = (String)model.getValueAt(i, selectedColumn);
                     model.setValueAt(value + key, i, selectedColumn);
                 }
             }
        });
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TestProject());    
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# asp.net - ASP.NET Webforms, JavaScript in user controls

> ID：12303162
> 
> 赞同：6
> 
> 时间：2012-09-06T15:12:58.987
> 
> 标签：asp.net, webforms

We are struggling a little regarding the right implementation of JavaScript in our solution (APS.NET Webforms).

We want to have all (or at least as much as possible) of our javascript at the bottom of pages, according to best practice, so pages load HTML and CSS first and give a better user experience.

There is a lot of jQuery code throughout our project that is often specific to certain controls, so we don't want that to load on every page.

Currently jQuery itself, including jQuery UI are positioned at the top of pages, so that we can have jQuery usages in controls (either from js files or sometimes inline code), however, we want to move all that stuff down to the bottom of the page. We have already added a contentplaceholder ("JavascriptFooter") at the bottom of the page, so we can place javascript from pages in the footer of the page, but we're stuck on the controls.

What are best practices for this? Should we externalize all JS and in the JS check if a control is loaded? But then we will be showing too much stuff all the time. Or is there another way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:04:11.180

首先，我建议从 CDN 加载 Jquery。这是谷歌的代码：

```
<script type="text/javascript">
    document.write(["\<script type='text/javascript' src='", 
    ("https:" == document.location.protocol) ? "https://" : "http://", 
    "ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'>\<\/script>"].join(''));
</script> 
```

这样，如果访问者已在另一个站点上获得此服务，则它已经被缓存。此外，当它是从不同的主机交付时，它将并行下载。

我也同意@ctorx - 您应该使用文档就绪执行。

此外，您可以使用 a`ScriptManager`并在每个控件后面的代码中创建所有特定于控件的 JS（如果该控件是唯一使用该 JS 的对象，这可能是一个好主意） - 所有这些代码都呈现在页面底部。

例子：

```
Page pg = (Page)System.Web.HttpContext.Current.Handler; // or this.Page in .ascx
ScriptManager.RegisterStartupScript(pg, typeof(Page), "myJS", "[... your code ]", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:27:53.043

I bet there are as many solutions to this as there are companies using webforms. That said, you can always use the request context to store the necessary scripts and then write them before the page renders.

您也可以使用[requireJS](http://requirejs.org/docs/api.html "要求JS")。我不是专家，但有很多选择，它可以处理脚本加载超时、循环依赖、定义多个依赖等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:39:30.507

首先，最好的方法是将 JavaScript 从一个 JS 文件中的控件外部化，该文件是在对您的站点的第一个请求和所有后续请求（即 site.js）时加载的。然后，该文件将被浏览器缓存，用户不必像 JS 留在控件中那样一遍又一遍地下载 JS。

接下来，您需要创建一种机制来仅执行与正在执行的页面或控件相关的脚本部分。

有几种方法可以实现这一点，但是如果我处于你的情况，我会这样做。

确定一个包含大部分内容的页面级元素……通常人们称之为`wrapper`。将自定义属性动态添加到名为“ `data-js`”的包装器。从页面或用户/自定义控件动态（在服务器端）设置“data-js”的值。允许它具有由竖线 (|) 或其他字符分隔的多个键。

```
<div class="wrapper" data-js="funtion1|function2">
     <!-- Page content goes here -->
</div> 
```

利用 jQuery 在 DOM 就绪时查找此属性，并根据 data-js 属性中的值执行自定义 JS 函数。该函数将仅包含与当前页面或控件相关的代码。

```
 $(function(){
    var funcKeys = $('.wrapper').attr('data-js');
    if(funcKeys != null)
    {
        var funcs = funcKeys.split('|');
        for(var i=0; i< funcs.length; i++) {
           var funcName = eval(funcs[i]);
           if(typeof funcName == 'function') {
                funcName();
           }
        }
    }    
}); 
```

使用这种方法，您只需要 jQuery CDN 引用、对您网站的 JS 文件的引用以及布局中的上述代码片段。

然后，您只需在站点特定的 JS 文件中包含页面/控件特定功能，如下所示：

```
function function1() {
    alert("This is function 1");
}

function function2() {
    alert("This is function 2");
} 
```

我希望这有帮助。

仅供参考，我还为你设置了一个小提琴来玩它是如何工作的：http: [//jsfiddle.net/hh84f/1/](http://jsfiddle.net/hh84f/1/)

# line - 不带单位的线高

> ID：12303169
> 
> 赞同：19
> 
> 时间：2012-09-06T15:13:24.193
> 
> 标签：line, typography, css

我看到人们使用行高而不指定单位，如下所示：`line-height: 1.5;`

数字代表什么？我猜这是一个比率，是这样的`em`吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T16:47:18.147

是的，它是一个比率：1.5 表示元素字体大小的 1.5 倍。所以它的含义与 1.5em 或 150% 相同，但有一个重要的例外：在继承中，当使用纯数字时，继承的是数字，而不是计算值。

因此，如果您有一个字体大小为 24pt 的元素，`line-height: 1.5`请将行高设置为 36pt。但是如果元素有一个子元素，即内部元素，字体大小为 10pt，并且没有设置任何行高，那么子元素继承`line-height`1.5 的值，这意味着该元素为 15pt。另一方面，如果将行高设置为`1.5em`或`150%`，则子级将继承计算值 36pt，从而产生怪诞的行距。

从技术上讲，这隐藏在一个[表述](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)下。对于用作`line-height`值的纯数字：“计算值与指定值相同。” 因此，名义上，子代继承了“计算”值 1.5，然后将在子代的上下文中进行解释（*其*字体大小的 1.5 倍）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-06T15:22:50.553

[`line-height`@Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/CSS/line-height)有一个很好的解释（和示例），与[`line-height`CSS 规范](http://www.w3.org/TR/CSS21/visudet.html#line-height)相比更容易理解。

`line-height`可以通过以下方式之一指定值

```
line-height: normal | <number> | <length> | <percentage> 
```

在您的情况下，您使用的`<number>`是描述为：

> 使用的值是这个无单位`<number>`乘以元素的字体大小。计算的值与指定的 相同`<number>`。在大多数情况下，这是设置 line-height 的首选方法，在继承的情况下不会出现意外结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T15:15:52.233

请参阅[各自的规范@W3C](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)：

> 该属性的使用值是这个数字乘以元素的字体大小。负值是非法的。计算值与指定值相同。

因此，正如您所猜测的那样，它是一个比率，与电流有关`font-size`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:20:15.683

`line-height: X;`基本上翻译成`line-height: (X*100)%;`

`line-height: 1;`是相同的`line-height: 100%;`

相似地，

`line-height: 1.5;`是相同的`line-height: 150%;`

* * *

其中`line-height: X%;`表示元素*当前设置的字体和大小的行高的 X% 。*

例如，如果根据当前设置的字体和大小，元素的 line-height 为`24px`，`line-height: 150%`则将使其 line-height `36px`。等等..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-14T16:38:33.607

您还可以使用[`rem`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCAQFjAA&url=http%3A%2F%2Fcaniuse.com%2Frem&ei=YMQVVPL_A9H2yQS70YHgCw&usg=AFQjCNEdvOJNOLiDt7sML4x9aUCu2Ocjtw&sig2=V0AzjbUmtW-DwMNBQyykrg&bvm=bv.75097201,d.aWw)以使用根 em 大小而不是当前字体大小。

所以这些都是当前字体大小的两倍的行高

```
font-size: 2em;
font-size: 2; 
```

但这是 ROOT 字体大小两倍的行高

```
font-size: 2rem; 
```

# c# - 用户控制之间的转换

> ID：12303172
> 
> 赞同：1
> 
> 时间：2012-09-06T15:13:35.010
> 
> 标签：c#, .net, wpf, wpf-controls

我的页面上目前有 2 个用户控件。第一个 UserControl1 有一个绑定到集合的列表框。另一个 UserControl2 将包含基于从 UserControl1 的列表框中选择的信息。

我想要的是隐藏 UserControl2，直到用户从 ListBox 中进行选择，并且页面将从列表转换为信息。

我真正想要的是一个简单易用的用户控件来处理转换。我更喜欢从 Zune 软件中获得外观，我可以在 UserControl2 上有一个后退按钮......

我目前正在.NET 3.5 中开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:45:27.360

[我们使用Caliburn Micro](http://caliburnmicro.codeplex.com/) [Screens & Conductors](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation)重新创建类似 Zune 的 UI进行导航：

*   在 View 上有一个名为 ActiveItem的[ContentControl 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)
*   [使用ActivateItem](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation) Conductor替换 ViewModel 上的 ActiveItem 。

对于换出效果，我们确实使用两个触发器（在 ActiveItem 更改时从 ViewModel 引发）为 ActiveItem 设置动画。一个用于换入的触发器和一个用于换出的触发器（此动画所做的只是将边距从偏移量更改为适当的值，并稍加延迟）。

您不仅可以为 ActiveItem 扩展此方法，还可以为要换出的每个控件扩展此方法，因此我希望这会给您一个想法。至于从一个控件传递所选项目，另一个控件在 ViewModel 中使用 ActivateItem 时[注入该值。](http://en.wikipedia.org/wiki/Dependency_injection)

# c# - SVNNotifier 源文件错误

> ID：12303173
> 
> 赞同：1
> 
> 时间：2012-09-06T15:13:35.453
> 
> 标签：c#, .net, winforms, svn

我想添加一个自动/恒定的结帐`SVNNotifier`，我下载了他们的开源代码来改变它。这是我第一次尝试修改开源代码。

我想在更新部分添加一个名为“AutoCheckout”的复选框，但我收到了这个我不明白的错误消息：

错误 1 ​​类型“CHD.SVN_Notifier.SettingsForm”已包含“checkBox_AutoCheckout”的定义 C:\Users\conrad.chamerski\Documents\SVNNotifier\SVN_Notifier\SettingsForm.cs 1189 22 SVN_Notifier

我不明白的是有一个区域有一堆代码：

```
private System.Windows.Forms.Label label1;
        private System.Windows.Forms.Label label2;
        private System.Windows.Forms.TextBox textBox_SVNpath;
        private System.Windows.Forms.TextBox textBox_TortoiseSVNpath;
        private System.Windows.Forms.Button button_OK;
        private System.Windows.Forms.Button button_Cancel;
        private System.Windows.Forms.Button button_BrowseSvn;
        private System.Windows.Forms.Button button_BrowseTortoise;
        private System.Windows.Forms.OpenFileDialog openFileDialog_svn;
        private System.Windows.Forms.OpenFileDialog openFileDialog_Tortoise; 
```

还有更多......但是复选框的定义在哪里？

我的复选框代码添加到下方`SettingsForm.cs`

```
private void checkBox_AutoCommit(object sender, System.EventArgs e)
        {
            MessageBox.Show("AutoCommit");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:00:32.733

我发现我的错误是由于缺乏知识。

申请表很简单，不需要编码。选中该框后，我们通常按`OK butto`。OK 按钮`events`位于`thunderbolt icon`中`properties`。通过双击 click 属性，我们得到了所有的代码。现在，我们知道按下 OK 时会发生什么，我们可以对其进行配置。

# c# - CLR 类冗余

> ID：12303174
> 
> 赞同：0
> 
> 时间：2012-09-06T15:13:36.537
> 
> 标签：c#, .net, vb.net, class, clr

是否有任何文档或文章描述了 .net 的相似类之间的差异，或者具有不同含义但名称相同的类，或者具有不同名称但做几乎相同事情的类？

例如：我们什么时候应该使用`System.Timers.Timer`vs `System.Threading.Timer`？

或者btw`System.ServiceProcess.TimeoutException`和有什么区别`System.TimeoutException`？

有时您甚至不知道您一直在使用实际上被认为是“旧”和“过时”的东西，您应该使用一些更好的类来代替，这是在新版本的 .net 中引入的。

你能举出更多的例子吗？了解所有这些课程会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:25:06.973

不，没有，可能是因为“类似的类”对于文档或文章来说还不够好（我只是在这里推测）。

但是，对于特定问题 - 您会找到文章。谷歌“.NET 中的计时器”，您会发现这篇[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)解释了框架提供的三个计时器之间的区别。

# javascript - jQuery change() 事件 - 不使用 bind()、live()、keyup+keydown+keypress，什么都没有

> ID：12303177
> 
> 赞同：2
> 
> 时间：2012-09-06T15:13:47.400
> 
> 标签：javascript, jquery, ajax

我看过关于这个主题的各种帖子。我正在为文本框制作一个字符递减计数器（例如'98 Characters Left'），我可以让它触发的唯一事件是`keydown()`，但是当文本粘贴到文本框时它不会处理它。我尝试制作一个`updateCharCount()`功能并将其设置为每个事件（一次全部，并且每个单独：keyup，keydown，keypress，change。

我还尝试使用`bind()`and设置处理程序`live()`。如果我尝试同时为 keydown 和 keyup 设置处理程序，那么无论发生什么，无论发生什么，都不会触发，尽管我在任何地方都读到了这就是解决方案。这怎么可能？

另外，当我只处理`keydown()`事件时，我会遇到一些奇怪的行为。（顺便说一句，我的文本框上的 maxLength 属性设置为 100）如果我输入到最大字符数，退格一次或两次，然后再次输入到最大计数，即使它会显示 '1 Character(s) Left'已最大化，如果我从那里退格一次，它会显示“0 个字符”。这是我的代码：

```
function updateCharCount(){
    var clientmsg = $("#usermsg").val();
    var count = $("#usermsg").attr("maxLength") - clientmsg.length;
    $("#charsleft").html(count);
}
$("#usermsg").keydown(updateCharCount()); 
```

如果有人可以解释这种奇怪的行为会很好，但我真正想知道的是为什么如果 .change() 被如此广泛使用，它对我不起作用，也不 .bind('change', ... ) 或 .live('改变', ...)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:19:40.220

**[您可以使用.on()](http://api.jquery.com/on/)**绑定多个事件（不推荐使用 bind 和 live），如下所示：

```
$("#usermsg").on({
    change: updateCharCount,
    keyup: updateCharCount,
    keydown: updateCharCount
})​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/YWSrP/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:16:29.887

使用`keyup`而不是`keydown`在插入符号之前发生 keydown 。

仅当焦点离开该字段时，才会更改文本字段。如果发生了变化，但不是任何时候添加符号

Keyup 也将处理粘贴事件。

# ms-access-2007 - 数据库移动/更改名称时如何更改excel中的嵌入式查询

> ID：12303178
> 
> 赞同：0
> 
> 时间：2012-09-06T15:13:58.270
> 
> 标签：ms-access-2007

我有一个电子表格，其中包含来自 Access 数据库的嵌入式查询。

数据库名称/位置可能会不时移动，我希望能够轻松更新查询以指向新数据库。对于其他用户而言，必须手动更改它们可能很困难。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:00:48.127

根据表的创建方式，您可以在这些行上尝试一些东西。这将更新工作簿中的第二个连接。

```
sCom = ActiveWorkbook.Connections(2).ODBCConnection.CommandText
sCon = ActiveWorkbook.Connections(2).ODBCConnection.Connection
db1 = "Z:\Docs\db1.mdb"
db2 = "Z:\Docs\db2.mdb"
sCom = Replace(sCom, db1, db2)
sCon = Replace(sCon, db1, db2)

ActiveWorkbook.Connections(2).ODBCConnection.CommandText = sCom
ActiveWorkbook.Connections(2).ODBCConnection.Connection = sCon
ActiveWorkbook.Connections(2).Refresh 
```

# informix - 内部错误和语句错误 - I4GL

> ID：12303183
> 
> 赞同：1
> 
> 时间：2012-09-06T15:14:16.663
> 
> 标签：informix, 4gl

当我运行程序（Informix 4GL SE）时，出现以下错误。有没有人知道解决方案？

FORMS 语句错误号 -6327。运行时库文件 Report.c(933) 中的内部错误：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T09:07:19.370

这只发生在一种表格上还是所有表格上？

我在这里深入挖掘了黑暗的记忆，但我相信这就像未能根据您的平台设置 $TERM、$TERMINFO 或 $TERMCAP 之一一样简单 - 如果它是其中之一，$TERM 必须在termcap 或 terminfo。

或者 - 它可能是 $DBCENTURY、$DBDATE 或类似的设置有缺陷。

是的，Report.c 应该参与这个问题似乎很愚蠢，但事实就是如此。

我希望现在提供帮助还为时不晚，或者您已经解决了吗？这对您发布问题所在可能是件好事。

# php - PHP/MYSQL 使购物车优惠券代码适用于两种产品之一

> ID：12303186
> 
> 赞同：0
> 
> 时间：2012-09-06T15:14:21.693
> 
> 标签：php, sql, shopping-cart

好的，这让我很难过..

我目前有一个系统，购物车检查优惠券表以查看购物者输入的优惠券代码是否对产品有效。

这很好用，但我希望扩展系统，以便将单个代码用于多个产品之一。

**这是目前的工作代码：**

```
$coupon = mysql_real_escape_string(htmlentities(strtoupper($_POST['coupon'])));
$coup_qry = mysql_query("select tblcoupon.*, sell_product.product_code,sell_product.id from tblcoupon,sell_product WHERE tblcoupon.code='$coupon' AND sell_product.product_code = tblcoupon.products");
if($numrows = mysql_num_rows($coup_qry) > 0) // check if typed coupon exists in tblcoupon table 
{
    while($coup_w = mysql_fetch_array($coup_qry))           
    {
        $start_date = $coup_w['start_date'];
        $end_date = $coup_w['end_date'];
        $start = strtotime($start_date);
        $todays_date = date("Y-m-d");
        $today = strtotime($todays_date);
        $expiration_date = strtotime($end_date);
        if($today >= $start && $today <= $expiration_date) // if todays date is > start date 
                                                            and < end date then execute the below script                
        {   
            $coupon_productcode = $coup_w['products'];    //product code in the tblcoupon table
            $sell_product_productcode = $coup_w['product_code'];
            //check if any of the products in the shopping cart match any of the products 
            foreach ($_SESSION['cart'] as $name => $value) 
            {
                $id = substr($name, 5, (strlen($name)-5));
                if($id==$coup_w['id'])
                {
                    $_SESSION['coupon'] = "C$coupon-$id";
                    if(isset($_SESSION['offer'])) { 
                        unset($_SESSION['offer']); 
                    }
                    if(isset($_SESSION['error'])) { 
                        unset($_SESSION['error']); 
                    }       
                    $errCoupon = "Coupon code accepted-green";
                } 
                else {
                    $errCoupon = "Coupon Code is Invalid for this product.";
                }
            }
        } 
        else if ($today < $start){
            $errCoupon = "Coupon Code is not yet active!-red";
        } 
        else if ($today > $expiration_date){
            $errCoupon = "Coupon Code has expired!-red";
        }
    }
} 
```

我需要做的是在`tbl_coupon`调用中添加一个新列`products2`（这将是一个不同的产品代码），并让 SQL 查询查找行`sell_product.product_code = tblcoupon.products OR sell_product.product_code = tblcoupon.products2`

然后，我需要检查`$_SESSION['cart']` `$id`产品是否为有效选项（`products`或`products2`），但不能同时为两者。优惠券只能用于 2 个选项之一。

任何帮助都会很棒。

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:17:29.057

```
$coupon = mysql_real_escape_string(htmlentities(strtoupper($_POST['coupon'])));
$coup_qry = mysql_query("select tblcoupon.*, sell_product.product_code,sell_product.id from tblcoupon,sell_product WHERE tblcoupon.code='$coupon' AND sell_product.product_code = tblcoupon.products");
if($numrows = mysql_num_rows($coup_qry) > 0) // check if typed coupon exists in tblcoupon table 
    {
        while($coup_w = mysql_fetch_array($coup_qry))           
                    {
                        $coup_w['used'] = 0; //Coupon has not been used yet
                        $start_date = $coup_w['start_date'];
                        $end_date = $coup_w['end_date'];
                        $start = strtotime($start_date);
                        $todays_date = date("Y-m-d");
                        $today = strtotime($todays_date);
                        $expiration_date = strtotime($end_date);
                        if($today >= $start && $today <= $expiration_date) // if todays date is > start date and < end date then execute the below script               
                            {   
                                $coupon_productcode = $coup_w['products'];  //product code in the tblcoupon table
                                $sell_product_productcode = $coup_w['product_code'];
                                //check if any of the products in the shopping cart match any of the products 
                                foreach ($_SESSION['cart'] as $name => $value) 
                                    {
                                        $id = substr($name, 5, (strlen($name)-5));
                                        //test if the coupon matches AND has not been used
                                        if($id == $coup_w['id'] && $coup_w['used'] == 0)                                                
                                            {                                                                                                       
                                                $_SESSION['coupon'] = "C$coupon-$id";
                                                if(isset($_SESSION['offer'])) { unset($_SESSION['offer']); }                                                    
                                                if(isset($_SESSION['error'])) { unset($_SESSION['error']); }                                                    
                                                $errCoupon = "Coupon code accepted-green";
                                                $coup_w['used'] = 1; //Coupon has now been used.
                                            } 
                                        else {$errCoupon = "Coupon Code is Invalid for this product.";}                                         
                                    }
                            } 
                        else if ($today < $start){$errCoupon = "Coupon Code is not yet active!-red";} 
                        else if ($today > $expiration_date){$errCoupon = "Coupon Code has expired!-red";}
                    } 
```

}

“仅使用一次优惠券”部分的一个简单解决方案是在 $coup_w 数组中携带一个“已使用”键，以指示优惠券是否已被使用（如果为假，则为 0，如果为真，则为 1）。然后您需要测试优惠券 id 是否匹配并且优惠券尚未使用。如果满足条件，则优惠券有效，“已使用”应设置为 1。

至于'product1/product2'，我认为你不应该限制自己的列数。我认为最好的方法是执行以下操作：

```
//YOU'LL HAVE TO MAKE SURE THIS IS VALID, I'M NOT SURE, BUT THE LOGIC IS THE IDEA
"SELECT ... AND tblcoupon.products LIKE CONCAT('%', sell_product.product_code, '%')" 
```

其中 tblcoupon.products 是优惠券有效的产品代码的逗号分隔列表。

我还应该提到，使用 mysql_ 函数是不可取的。您应该查看 mysqli_ 或 PDO

# javascript - RequireJS 的异步特性

> ID：12303190
> 
> 赞同：1
> 
> 时间：2012-09-06T15:14:24.607
> 
> 标签：javascript, requirejs

Javascript 新手，所以我猜这很明显，但我显然缺少有关 RequireJS 的一些基本知识。

```
require(['lib/someSlowLoadingLib'], function() {
    console.log('Loaded Slow Lib');
    console.log(slowLib.incByOne(10)); // shows 11
});

// References slow lib
slowLib.incByOne(10) // throws error, slowLib not found 
```

如何立即使用“require”正在加载的内容？如果它是异步加载的，当我需要它时它不可用，这是马上的。

我知道我可以将我的代码放在 require 函数中，这对于单个依赖项来说是可以的，但是如果我的依赖项嵌套得很深，这可能会变得混乱，不是吗？我的主要代码在几个匿名函数中运行？如果这是它的完成方式，那很好，但它似乎不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:25:03.000

您应该将需要 someSlowLoadingLib 的所有代码放在需要它的回调中。

这就是异步模式的本质。

您放置在该回调函数之外的任何内容都不得需要 slowLib。

# xml - 从网页读取 xml 数据

> ID：12303197
> 
> 赞同：0
> 
> 时间：2012-09-06T15:14:41.063
> 
> 标签：xml, vb.net

我有一个按钮，单击该按钮时，我会传递一个 url，它将我带到包含 xml 数据的网页，我怎样才能在数据表中获取整个 xml 数据并从中读取特定节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:51:15.367

这是另一个简单的例子： [Read Xml File using Asp.Net](http://www.knowlegezone.com/documents/45/Reading-RSSXML-Feed-with-Aspnet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:18:10.390

在 xml 上使用 linq。看一下这个。[http://msdn.microsoft.com/es-es/library/bb387098.aspx](http://msdn.microsoft.com/es-es/library/bb387098.aspx)

# simperium - Simperium POST 400 错误

> ID：12303198
> 
> 赞同：0
> 
> 时间：2012-09-06T15:14:41.950
> 
> 标签：simperium

对于某些托管对象，我收到以下错误：

```
****
Simperium POST returned error 400 for change {
    ccid = 94baf4de055140dea4de68710b913779;
    clientid = "ios-b96fa382bbf25166705a25959bc7acbf";
    error = 400;
    id = "New Restaurant Table";
    r =     (
        5040581637a4014af7000000
    );
} 
```

如果有人可以描述为什么会发生此错误，那将非常有帮助。非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:56:54.973

400 响应是一个包罗万象的错误。请[联系我们](http://simperium.com/contact/)并提供您的应用 ID、启用详细日志记录的日志，如果可能，请提供您的核心数据模型的屏幕截图。如果您看到任何明显的症状，例如无法创建、删除或更新对象，请同时告知我们。

以下是供参考的错误代码列表：

400 - 捕获所有错误

404 - 缺少实体/版本

405 - 错误版本

409 - 重复更改

412 - 空零钱

413 - 文档太大

440 - 无效的差异

# xml - 如何根据 XML 节点的属性值使用 XSLT 进行排序？

> ID：12303199
> 
> 赞同：1
> 
> 时间：2012-09-06T15:14:47.043
> 
> 标签：xml, xslt, sorting

我经历了许多类似的问题和 XSLT 教程，但我仍然无法弄清楚 XSLT 是如何工作的。

下面是我想要排序的 XML：-

```
<?xml version="1.0" encoding="UTF-8"?>
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1">
<file product="mxn" source-language="en">
<body>

<!-- Menu -->

    <msg-unit id="Menu.PerformTask">
        <msg>Perform Task</msg>
        <note>When selected performs a task.</note>
    </msg-unit>
    <msg-unit id="Menu.Add">
        <msg>Add New</msg>
        <note>When selected Adds a new row.</note>
    </msg-unit>

</body>
</file>
</xliff> 
```

预期输出是：-

```
<?xml version="1.0" encoding="UTF-8"?>
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1">
<file product="mxn" source-language="en">
<body>

<!-- Menu -->

    <msg-unit id="Menu.Add">
        <msg>Add New</msg>
        <note>When selected Adds a new row.</note>
    </msg-unit>
    <msg-unit id="Menu.PerformTask">
        <msg>Perform Task</msg>
        <note>When selected performs a task.</note>
    </msg-unit>

</body>
</file>
</xliff> 
```

**标签需要根据`<msg-unit>`其`id`属性的值进行排序。**其他标签（如评论）应该在任何地方。

我尝试了很多组合，但我对 XSLT 毫无头绪。以下是我最后一次尝试。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" indent="yes" />
    <xsl:template match="/">
        <xsl:copy-of select="*">
            <xsl:apply-templates>
                <xsl:sort select="attribute(id)" />
            </xsl:apply-templates>
        </xsl:copy-of>
    </xsl:template>
</xsl:stylesheet> 
```

这个简单地吐出它得到的任何 XML，没有任何排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:35:10.093

**编辑**更新 - 此模板将仅对`msg-unit`元素进行排序，`@id`而不会干扰 xml 的其余部分。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                >
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:choose>
                <xsl:when test="*[local-name()='msg-unit']">
                    <xsl:apply-templates select="@* | node()">
                        <xsl:sort select="@id" />
                    </xsl:apply-templates>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="@* | node()" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

# spring - 在 Hibernate+Spring 中插入与属性相同的对象

> ID：12303202
> 
> 赞同：0
> 
> 时间：2012-09-06T15:15:00.413
> 
> 标签：spring, hibernate, spring-mvc

> **可能重复：**
> [Spring + Hibernate：具有相同标识符值的不同对象已与会话关联](https://stackoverflow.com/questions/2144697/spring-hibernate-a-different-object-with-the-same-identifier-value-was-alrea)

我有以下对象（简化）作为 JavaBean：

```
public class Person {
  private Integer id;
  private City cityOfBirth;
  private City city;
  // ...
} 
```

在我的春季表格中，我有 2 个选择组合来选择两个城市，如下所示：

```
<form:form method="post" action="" commandName="person">
City of birth: <form:select path="cityOfBirth" items="${ cities }" itemValue="id" />
City: <form:select path="city" items="${ cities }" itemValue="id" />
...
</form:form> 
```

我的 City 类的 PropertyEditor 只需调用我的 CityDao 的 get，如下所示：

```
@Component
public class CityDaoImpl implements CityDao {
  private @Autowired HibernateTemplate hibernateTemplate;

  public City get (Integer id) {
    return (City) hibernateTemplate.get(City.class, id);
  }
} 
```

我的 PersonDao 会这样做以保存实例：

```
public void save (Person person) {
  hibernateTemplate.saveOrUpdate (person);
} 
```

当我尝试用 2 个不同的城市保存一个人时，一切正常，但是当我选择同一个城市时，我收到以下错误：

```
org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [com.project.si.models.common.City#90] 
```

我在其他帖子中读到，这是因为 Hibernate Session 当前知道在 propertyEditor 调用时获得的上一个 City `cityDao.get(id)`，所以我应该在某处使用 merge() ，但我不知道应该在哪里应用它。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:51:22.977

问题是由于您级联`saveOrUpdate()`操作 from`Person`到`City`，并且`update()`当与要更新的对象具有相同 id 的对象已经与`Session`.

我认为这个问题的最佳解决方案是从`city`和中删除级联选项`cityOfBirth`。

只要您的用户必须`City`从现有城市列表中选择一个，级联在这里就没有意义，因为您不需要级联任何更改 from`Person`到`City`。

或者，您可以使用`merge()`而不是`saveOrUpdate()`：

```
public void save (Person person) {
    hibernateTemplate.merge(person); 
} 
```

# silverstripe - ImageField 选择目录

> ID：12303203
> 
> 赞同：0
> 
> 时间：2012-09-06T15:15:06.007
> 
> 标签：silverstripe

我正在使用 SilverStripe 2.4.7，我想知道是否有办法限制用户在使用 ImageField 时从 CMS 上的文件夹中选择图像（不允许他们从桌面上传）？

到目前为止，我还没有发现任何东西让我相信它甚至是可能的。

**编辑**

我找到了这个，但我不确定如何应用它。我猜我需要在 imagefield 变量上调用它。

[http://api.silverstripe.org/2.4/forms/fields-files/ImageField.html#methodEditFileForm](http://api.silverstripe.org/2.4/forms/fields-files/ImageField.html#methodEditFileForm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:01:20.833

您总是可以使用 TreeDropdownField 而不是 ImageField。这将允许用户从下拉列表中浏览和选择文件。

```
$filefield = new TreeDropdownField('MyFileID', 'Select a file', 'File'); 
```

您还可以使用...将选择选项限制为特定文件夹

```
$filefield->setTreeBaseID($idOfFolder); 
```

我想唯一的缺点是用户在附加图像时无法看到缩略图，就像他们使用 ImageField 一样......另一个选择是子类化 ImageField 并查看你可以做些什么来删除“从您的计算机”单选选项。

# iphone - 如何在 Core Data 中获取父对象的子实体？

> ID：12303206
> 
> 赞同：0
> 
> 时间：2012-09-06T15:15:11.263
> 
> 标签：iphone, objective-c, core-data, nspredicate

我正在尝试使用 NSFetchedResultsController 来获取特定父对象的所有子实体。这看起来应该很简单，但我在 NSPredicate 上得到“无法解析此格式字符串”。有任何想法吗？

注意：我知道我可以只引用 parent.children 而不是使用 NSFetchedResultsController，但这是针对实时 tableView 的，我想要 NSFetchedResultsController 提供的对象监控功能。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Child" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

NSString *predicateString = [NSString stringWithFormat:@"parent == %@", self.parent];
NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateString];
[fetchRequest setPredicate:predicate];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil cacheName:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:21:45.880

`predicateWithFormat`需要与给定不同的参数。

尝试：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"parent == %@", self.parent]; 
```

# php - Facebook cookie 'expires' 属性的格式与 RFC 2109 中指定的格式不同

> ID：12303207
> 
> 赞同：-3
> 
> 时间：2012-09-06T15:15:13.347
> 
> 标签：php, facebook, cookies

我刚刚查看 Facebook 在我的浏览器中设置的 cookie，当我注意到该`expires`属性的值的格式与 RFC 2109 中指定的格式不同时。默认标准是`;expires=Weekday, DD-MON-YY HH:MM::SS GMT`，例如**;expires=Friday, 15-Mar-格林威治标准时间 07 12:00:00**。但是，FB 正在使用类似**06 October 2012 20:42:03**的内容。为什么浏览器会认为它是合法的？

![在此处输入图像描述](../Images/65b13c35df5f7085ad9b012453f1e108.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:07:53.653

> 但是，FB 正在使用类似 2012 年 10 月 6 日 20:42:03 的内容。

不，这就是*您的*浏览器向您*显示*日期的方式。

使用 Firebug 或类似工具，并查看原始 HTTP 响应标头 - 您会看到 Facebook 使用为 cookie 定义的日期格式：`Thu, 01-Jan-1970 00:00:01 GMT`

# apache - wamp 服务器无法启动：Windows 7、64 位

> ID：12303216
> 
> 赞同：25
> 
> 时间：2012-09-06T15:15:46.367
> 
> 标签：apache, wamp, windows-7-x64

我正在尝试在 Windows 7、64 位操作系统上安装 wamp 服务器（以下是确切的设置名称）。但它永远不会启动，图标保持橙色意味着某些服务没有启动。

```
wampserver2.2e-php5.3.13-httpd2.2.22-mysql5.5.24-x64 
```

我没有找到任何解决方案。

```
No skype, port 80 is not in use. 
```

在 Windows 服务中，当我尝试手动启动 wampapache 服务时，会引发以下错误：

> Windows 无法在本地计算机上启动 wampapache 服务。
> 错误 1053：服务未及时响应启动或控制请求。

```
apache_error.log is empty. 
```

在 Windows XP 中使用的东西可以正常工作。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-08-07T17:24:40.180

我解决该问题的解决方案如下：

开始 > 搜索 > cmd.exe（以管理员身份运行）

在命令提示符 (cmd.exe) 中键入：

```
cd c:/wamp/bin/apache/ApacheX.X.X/bin
httpd.exe -e debug 
```

**请注意，ApacheX.XX 是正在运行的 Apache wamp 的版本。

这应该输出 apache 服务器正在做什么。导致 Apache 加载的错误应该在那里。我的问题是 httpd.conf 试图加载一个丢失或损坏的 DLL (php5apache2_4.dll)。一旦我覆盖了这个文件，我就重新启动了 Wamp，一切都很顺利。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-01T15:40:54.023

我这样解决了这个问题：

*   在橙色 WAMP 图标上，单击 Apache > 服务 > 测试端口 80。返回“端口 80 无法访问——（可能是 Skype）”
*   从 Skype 注销并关闭程序。
*   单击橙色图标并点击 Apache > 服务 > 安装服务
*   单击橙色图标并点击 Apache > Service > Start Service
*   单击橙色图标并点击在线
*   图标变为绿色，服务已启动并在线

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-16T09:11:43.807

请按照以下步骤操作（取自[此 Youtube 视频](https://www.youtube.com/watch?v=hvgUxpIurNU&feature=youtu.be)）。

1.  退出 Skype
2.  卸载 IIS
    *   转到控制面板
    *   请参阅程序和功能
    *   转到打开或关闭 WINDOWS 功能
    *   寻找INTERNET信息服务
    *   卸载

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-17T12:14:15.563

您只需要安装 Visual C++ 运行时 2015，如果您将 php 版本更改为最新版本，您将收到错误。这就是apache有php依赖错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T12:39:41.337

我导航到 C:\wamp\bin\apache\Apache2.4.4\bin 运行 httpd 并且 apache（粉红色和白色图标）加载到系统托盘中。橙色的 W 也变成了绿色。

apache apache 服务没有运行，它不在服务列表中（开始> 类型服务），这就是为什么它是橙色而不是绿色的原因。

解决方案：重新安装对我有用。

我的版本是：WAMPSERVER（64 位和 PHP 5.4）2.4 Apache：2.4.4 MySQL：5.6.12 PHP：5.4.12 PHPMyAdmin：4.0.4 SqlBuddy：1.3.3 XDebug：2.2.3 [http://www.wampserver。 com/en/](http://www.wampserver.com/en/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-08T11:49:28.307

您可以打开 Windows 事件查看器以尝试获取有关错误的更多信息：在 Windows 日志的“应用程序”部分，您很有可能会找到来自 Apache 的错误消息。（至少我发现我的情况有什么问题！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T03:03:51.080

检查您的 apache 错误日志。我有这个错误“[错误]（OS 5）访问被拒绝。：无法打开传输日志文件C：/wamp/logs/access.log。无法打开日志”然后我将我的“access.log”重命名为其他名称，如果您不需要/永远不会看到您的访问日志，您可以删除。然后重新启动您的 apache 服务。发生这种情况是因为文件大小太大。我想如果您尝试使用记事本打开此文件，它将无法打开，我之前尝试过打开它。希望它有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-27T09:22:48.230

对我来说，它使用以下链接解决：http: [//viralpatel.net/blogs/wamp-server-not-getting-started-problem/](http://viralpatel.net/blogs/wamp-server-not-getting-started-problem/)

我在哪里安装和运行Skype和Wamp

# sql - 查询报告员工是否在第二个表中列出的特定日期工作时间

> ID：12303221
> 
> 赞同：1
> 
> 时间：2012-09-06T15:16:29.300
> 
> 标签：sql, report, ms-access-2007

我需要有关如何在 access 2007 中处理查询的想法。它可以计算特定工作日的奖金。

我有两个从不同软件导入的表。

每天一张桌子并列出：

*   每个员工 ID
*   他们的部分/全职/待命代码状态
*   每天工作时间：

例子

```
Date       | ID  | jobcode |  hours worked |   
8/01/2012  | 003 | Full    | 8             |  
8/01/2012  | 004 | Part    | 4             |  
8/02/2012  | 003 | Full    | 8             |  
8/02/2012  | 004 | part    | 5             | 
```

第二张桌子有

*   假期开始的一天
*   假期结束日
*   每种类型的员工在那些日子或几天范围内必须工作的总小时数

例子：

```
begin      |   End      |  Parttime  | Fulltime |   
8/01/2012  | 8/01/2012  |      4     |    8     |  
9/01/2012  | 9/02/2012  |      4     |    12    |  
10/01/2012 | 10/01/2012 |      4     |    8     |  
11/01/2012 | 11/01/2012 |      4     |    8     | 
```

一年大约有 30 个假期，如果员工按规定的时间工作，一年后可以获得奖金。

我需要创建一个查询，告诉我员工没有满足他们的要求的假期以及他们休假的时间。

我曾想过在我更熟悉该语言的 vba 中做这件事。那是更好的路线吗？

我认为日期的加入也可以，但不确定如何处理跨越多个日期的假期。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:55:32.103

好的，这是经过测试的，对我有用。更改了一些字段名称以避免保留名称。还将假日名称添加到第二个表中。

```
SELECT Hours.EmpID, Hours.JobCode, Holidays.HolidayName, Sum(Hours.HoursWorked) AS TotalHours, Holidays.Fulltime AS Req, [TotalHours]-[fulltime] AS Balance
FROM Holidays, Hours
WHERE (((Hours.DateWorked) Between [begindate] And [enddate]) AND ((Hours.JobCode)='full'))
GROUP BY Hours.EmpID, Hours.JobCode, Holidays.HolidayName, Holidays.Fulltime

Union

SELECT Hours.EmpID, Hours.JobCode, Holidays.HolidayName, Sum(Hours.HoursWorked) AS TotalHours, Holidays.parttime AS Req, [TotalHours]-[parttime] AS Balance
FROM Holidays, Hours
WHERE (((Hours.DateWorked) Between [begindate] And [enddate]) AND ((Hours.JobCode)='part'))
GROUP BY Hours.EmpID, Hours.JobCode, Holidays.HolidayName, Holidays.parttime; 
```

我得到的输出（我在 9 月也增加了几个小时）是：

```
EmpID  JobCode  HolidayName   TotalHours  Req  Balance
3      Full     Happy August           8    8        0
3      Full     Labor Day             16   12        4
4      Part     Happy August           4    4        0
4      Part     Labor Day              9    4        5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:56:51.847

在标准 SQL 中（我尽量避免使用 MS Access），你应该这样做：

```
select x.* ,
       expected = case x.job_code
                    when 'Full' then y.Fulltime
                    when 'Part' then y.Parttime
                  end ,
       delta    = x.actual
                - case x.job_code
                    when 'Full' then y.Fulltime
                    when 'Part' then y.Partime
                  end
from ( select emp_id        = t.id      ,
              job_code      = t.jobcode ,
              holiday_start = h.begin   ,
              holiday_end   = h.end     ,
              actual        = sum( t.hours_worked )
       from employee_time t
       join holiday       h on t.date between h.being and h.end
       group by t.id    ,
                h.begin ,
                h.end
     ) x
join holiday y on y.begin = x.holiday_start
              and y.end   = x.holiday_end
where (   x.actual
        - case x.job_code
            when 'Full' then y.Fulltime
            when 'Part' then y.Parttime
          end
      ) < 0 
```

我们首先使用一个虚拟表（`from`子句中的子查询别名为`x`。这个虚拟表计算每个员工在每个特定假期的实际工作时间，`group by`用于汇总数据。

然后，我们将其加入到假期表（别名为`y`）以获得预期的工作时间。

正如您所期望的那样，增量计算为实际 - 预期。预期必须用 计算多次`case...when`。

该`where`条款不包括那些具有非负增量的工人。

简单的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:28:33.957

如果您以与第一个表格更一致的格式获得第二个表格，您的生活会容易得多。如果你能让他们做出改变，你所需要的只是加入。（尽管您应该考虑避免保留字，并使用更具描述性的列名。

```
CREATE TABLE Table1
    ([Date] date, [ID] char(3), [jobcode] varchar(4), [hours_worked] int);

INSERT INTO Table1
    ([Date], [ID], [jobcode], [hours_worked])
VALUES
    ('2012-08-01', 003, 'Full', 8),
    ('2012-08-01', 004, 'Part', 4),
    ('2012-08-02', 003, 'Full', 8),
    ('2012-08-02', 004, 'part', 5);

-- I added this one, a full timer who didn't work enough hours on 09-01.
insert into table1 values ('2012-09-01', '003', 'Full', 11);

CREATE TABLE Table2
    ([begin] date, [End] date, [jobcode] char(4), [hours_to_work] int);

INSERT INTO Table2
    ([begin], [End], [jobcode], [hours_to_work])
VALUES
    ('2012-08-01', '2012-08-01', 'Part', 4),
    ('2012-08-01', '2012-08-01', 'Full', 8),
    ('2012-09-01', '2012-09-02', 'Part', 4),
    ('2012-09-01', '2012-09-02', 'Full', 12),
    ('2012-10-01', '2012-10-01', 'Part', 4),
    ('2012-10-01', '2012-10-01', 'Full', 8),
    ('2012-11-01', '2012-11-01', 'Part', 4),
    ('2012-11-01', '2012-11-01', 'Full', 8); 
```

现在您只需进行连接即可获得正确的行。

```
select t1.*, t2.*
from Table1 t1
inner join table2 t2 
  on t1.[date] between t2.[begin] and t2.[end]
  and t1.jobcode = t2.jobcode
  and t1.hours_worked < t2.hours_to_work; 
```

# c++ - c ++代码结果输出不同，具体取决于执行方法调试与运行

> ID：12303224
> 
> 赞同：2
> 
> 时间：2012-09-06T15:16:45.657
> 
> 标签：c++, random, srand

该程序生成随机字符串 3 次

当在 Eclipse 中使用“step into”进行调试时，结果是唯一且不同的

刚执行时结果是相同的字符串 3 次

**为什么结果因执行方法、调试与编译运行不同而不同？**

```
#include <iostream>
using std::cout;
using std::endl;

#include <string>
using std::string;

#include <ctime>
#include <cstdlib>

string generaterandomstring(int length){
    int i, x, alphabetsize, asciioffset;
    string s1;

    alphabetsize = 26; // size of all lower case letters
    asciioffset = 97; // lower case letters start at 97

    srand ( time(NULL) );

    for ( i = 0; i < length; i++ )
    {
        //generate random number
        x = rand() % alphabetsize + asciioffset;
        cout << "x: " << x;
        //get a letter
        cout << " char: " << char(x);
        //append it to string
        s1 = s1 + char(x);
        cout << " s1: " << s1 << endl;
    }
    return s1;
}

int main() {
    int i;
    string s1;
    int length = 3;

    srand ( time(NULL) );

    for ( i = 0; i < length; i++ )
    {
        s1 = generaterandomstring(length);
        cout << "i is: " << i << " from main s1: " << s1 << endl;
        cout << rand() % 10 << endl;
    }

    cout << "!The End!" << endl; // prints !!!Hello World!!!
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:21:13.087

[http://cplusplus.com/reference/clibrary/cstdlib/srand/](http://cplusplus.com/reference/clibrary/cstdlib/srand/)

> 使用作为种子传递的参数初始化伪随机数生成器。
> 
> 对于在调用 srand 时使用的每个不同的种子值，可以预期伪随机数生成器在随后调用 rand 时生成不同的连续结果。 **使用相同种子的两个不同初始化指示伪随机生成器在两种情况下为随后对 rand 的调用生成相同的连续结果**。

[http://cplusplus.com/reference/clibrary/ctime/time/](http://cplusplus.com/reference/clibrary/ctime/time/)

> 获取当前日历时间作为 time_t 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:25:44.040

发生这种情况是因为您调用`srand` **inside** `generaterandomstring`。在调试会话期间，迭代之间有足够的时间（超过一秒），因此`time(NULL)`每次返回不同的值。在自由运行时，您的程序将随机种子设置为相同的值，并且每次迭代都会获得相同的“随机”值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:25:49.157

它在调试中起作用的原因是调试速度很慢，以至于您以毫秒为单位重新初始化 srand 会产生不同的随机字符串。在发布时，您的代码太快了，因此 srand 被重新初始化为相同的随机数列表。正如另一个答案所建议的那样，您应该只调用一次 srand 。虽然有趣的是，如果你在那里睡眠 1 毫秒，问题就会消失。

# hibernate - EasyMock - HibernateCallback.doInHibernate() 方法调用

> ID：12303225
> 
> 赞同：1
> 
> 时间：2012-09-06T15:16:46.310
> 
> 标签：hibernate, easymock, powermock

如何从 DAO 类为以下方法创建 junit 测试方法（使用 EasyMock 和 PowerMock），

```
public List<MyVo> getSomeValue(final String systemId) {
    //assume template set by @Resource(name = "hibernateTemplate")
    HibernateCallback<List<MyVo>> callback = new HibernateCallback<List<MyVo>>() {
        @Override
        public List<MyVo> doInHibernate(Session session) {
            Criteria criteria = session
                    .createCriteria(
                            EntityClass.class,
                            "main");
            criteria.createAlias("AnotherName",
                    "ColName1");
            criteria.add(Restrictions.eq("pkId",
                    systemId));
            return template.findByCriteria(MyVo.class, criteria);
        }

    };
    return template.execute(callback);
} 
```

我用谷歌搜索了它，但无法得到任何解决方案。
请建议。
谢谢。
VAm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:26:30.190

在我看来，在这样的单元测试中，尝试模拟是没有意义的`HibernateTemplate`，因为您的测试只会断言您以特定顺序调用某些方法 - 并且使用 DAO 源代码中存在的确切字段班级。这种类型的测试不会增加太多价值。

*我认为使用真正* 连接到内存 SQL 数据库的 DAO 测试要好得多`HibernateTemplate`，使用 DBUnit 之类的东西或仅使用外部 SQL 脚本来设置数据库中所需的“前置”条件数据。然后，您可以断言`getSomeValue()`返回给定数据库中数据的预期值。

这可能更多地被认为是“集成测试”，但 IMO 它比使用模拟的无用单元测试更有价值，模拟`HibernateTemplate`仅断言您以特定顺序调用某些方法。

Spring 具有良好的[JDBC 测试支持](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#integration-testing-support-jdbc)以及[TestContext 框架](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#testcontext-framework)，这使得在测试中加载 Spring 上下文并将 bean 连接到测试类中变得非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:22:42.267

模拟的规则之一是：[不要模拟你不拥有的类型](https://www.google.co.uk/search?q=mock%20classes%20you%20dont%20own)

如果您想测试 DAO，您将通过编写集成测试而不是单元测试来获得更多价值。

# android - 如何在 onCreate 方法中或从中获取布局的高度，以便再次设置子项？

> ID：12303228
> 
> 赞同：0
> 
> 时间：2012-09-06T15:16:56.940
> 
> 标签：android, layout, height, android-edittext

当然，我知道它会返回 0 个度量，直到它被绘制到窗口。但是我需要获取布局的高度，因此应该调整子视图。下面是我的代码片段。在这个类中，我使用适配器类生成 36 个编辑文本。所以我需要根据屏幕获取布局的高度来调整edittexts。屏幕高度对我的应用没有帮助。任何代码片段将不胜感激。提前致谢。

```
public class GameView extends Activity implements OnClickListener {

    FrameLayout frameLayout1;

    GridView gridView;

    EditText et[][]=new EditText[6][6];

    TextAdapter textadapter;

       protected void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);

              setContentView(R.layout.gamedisplay);

              frameLayout1=(FrameLayout)findViewById(R.id.fLayout1);

              int layoutHeight = frameLayout1.getMeasuredHeight();//this is I need. So according to this I make adustments to edittexts.
              Log.d("tag"," height :: " + layoutHeight);
              System.out.println("In gameview >>>>>>>>>>>>>>>>>>>>>   "+layoutHeight);
              gridView = (GridView) findViewById(R.id.gridview);

              gridView.setAdapter(new TextAdapter(this));

              //gridView.setVerticalScrollBarEnabled(true);

              WindowManager wm=getWindowManager();
              Display display=wm.getDefaultDisplay();
              int gridSize = display.getWidth();
              int colWidth = (gridSize / 6);
              gridView.setColumnWidth(colWidth);

             // getEditTexts();
             // putValues();

           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:56:02.370

只有在 XML 中有硬编码维度时，您才能预先测量事物。例如，在您的 XML 中，如果您有类似的`android:layout_height="20dp"`内容，那么您可以使用类似的内容：

```
Resources r = getResources();
float layoutHeight = TypedValue.applyDimension(
            TypedValue.COMPLEX_UNIT_DIP, 20, r.getDisplayMetrics()); 
```

如果您使用的是 wrap_content 或 match_parent，那么根据定义，这些内容是相对于屏幕上的布局方式计算的，并且在布局之前获取这些维度充其量是模糊的。

# ios - iOS TableView 与一个单元格，停留在底部？

> ID：12303233
> 
> 赞同：-2
> 
> 时间：2012-09-06T15:17:13.027
> 
> 标签：ios, xcode, uitableview

我有一个表格视图，并且将永远只有一个单元格。我希望此单元格位于视图框架的底部，但不确定如何执行此操作。任何帮助，将不胜感激。表视图附加了一个 .xib，并被分组，包含 1 个部分和一个单元格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:22:04.830

不要使用 tableView :)

你应该使用 textView（或任何你需要的东西），如果你想让它看起来像一个 tableView，你可以设置视图的背景并为你的 subView 添加圆角。我认为你应该让它看起来像一个 tableView，但你不应该使用一个。您还可以添加一个滚动视图以使其更加相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:19:47.083

只需将表格视图拖到 xib 的常规视图中，并让其视图控制器实现`<UITableViewDataSource>`和`<UITableViewDelegate>`协议。然后，您可以将表格视图拖动到您在 xib 中选择的任何位置。

# javascript - KendoUI 过滤器 TreeView

> ID：12303235
> 
> 赞同：15
> 
> 时间：2012-09-06T15:17:26.443
> 
> 标签：javascript, kendo-ui

我正在使用 KendoUI 的树视图，并希望让用户能够过滤它。甚至有一个演示可以满足我的要求（http://demos.kendoui.c​​om/web/treeview/api.html）

问题是过滤器仅适用于 TreeView 的第一个层次结构，因此如果过滤器文本存在于子项中但不存在于父项中，则不会显示子项。

例子：

*   项目 1
*   第 2 项
    *   项目 xzy
    *   项目 abc

如果搜索文本为“abc”，则不会显示任何项目。相反，我希望得到以下结果：

*   第 2 项
    *   项目 abc

有谁知道如何做到这一点？这是我正在使用的代码：

```
 var tree_view_data = new kendo.data.HierarchicalDataSource({
        transport: {
            read: {
                url: "getall/items",
                dataType: "json"
            }
        },
        schema: {
            model: {
                children: "ChildItems"
            }
        }
    });
    //init tree view itself
    var $treeview = $("#div-treeview").kendoTreeView({
        dataSource: tree_view_data,
        dataTextField: [ "Text", "ChildrenText" ]
    });

    //allow filter of navigation tree
    var refreshTree = function () {
        tree_view_data.filter({
            field: "Text", //if I would use "ChildrenText" here nothing be displayed at all if filtertext is set
            operator: "contains",
            value: $("#tree-text-search").val()
        });
    };

    $("#tree-text-search").change(refreshTree).keyup(refreshTree); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T16:33:34.023

我找到了一种方法来实现这一点，只需使用 jQuery 选择器来隐藏和显示必要的子节点。

首先是当您创建树视图时，将此参数添加到您的选项中：

负载需求：假

这样，树将在被请求之前渲染出您的子节点的所有 HTML，从而允许您使用 jQuery 进行导航。

这是我正在使用的 jQuery 代码，它过滤掉不匹配的节点，打开匹配的节点组，并显示它们。

```
$("#searchTextInputField").keyup(function () {

        var filterText = $("#searchTextInputField").val();

        if(filterText !== "") {   
            $("#myTree .k-group .k-group .k-in").closest("li").hide();
            $("#myTree .k-group .k-group .k-in:contains(" + filterText + ")").each(function() {
                $(this).closest("ul").show();
                $(this).closest("li").show();
            });
        } else {
            $("#myTree .k-group").find("ul").hide();
            $("#myTree .k-group").find("li").show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T11:12:45.353

**2016-01-13 更新**：现在有一个帮助主题显示[如何根据用户字符串执行 TreeView 过滤](http://docs.telerik.com/kendo-ui/controls/navigation/treeview/how-to/filtering/filter-out-search-results)。

您需要手动过滤子数据源，以便只显示必要的节点。对于不同的级别有不同`dataTextField`的 s 使得它更难掌握，所以这段代码`text`只使用了这个字段。此外，由于此过滤是在客户端执行的，它假定您已加载所有节点。

```
var treeview = $("#treeview").data("kendoTreeView"),
    item = treeview.findByText("Item 1.3"), // find the node that will be shown
    dataItem = treeview.dataItem(item),
    nodeText = dataItem.text;

// loop through the parents of the given node, filtering them to only one item
while (dataItem.parentNode()) {
    dataItem = dataItem.parentNode();
    dataItem.children.filter({ field: "text", operator: "contains", value: nodeText });
    nodeText = dataItem.text;
}

treeview.dataSource.filter({ field: "text", operator: "contains", value: nodeText }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-22T00:14:04.910

对于超过 4 个级别，遍历 UL 和 LI 类型的所有父级并调用 show()。

```
$("#filterText").keyup(function (e) {
    var filterText = $(this).val();

    if (filterText !== "") {
        $("#treeview-standards .k-group .k-group .k-in").closest("li").hide();
        $("#treeview-standards .k-group .k-group .k-in:contains(" + filterText + ")").each(function () {
            $(this).parents("ul, li").each(function () {
                $(this).show();
            });
        });
    } else {
        $("#treeview-standards .k-group").find("ul").hide();
        $("#treeview-standards .k-group").find("li").show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T09:10:32.623

首先。[与来自 ASP.NET http://www.telerik.com/help/aspnet-ajax/dropdowntree-overview.html](http://www.telerik.com/help/aspnet-ajax/dropdowntree-overview.html)的 Teleriks RadDropDownTree 相比，KendoTreeView 是非常低级的控件（我的意思当然是 js！）应该采取这个到 jquery/kendo ......它需要改进这个过滤器，所以如果你更喜欢对数据项而不是“findByText”进行适当的过滤，这样做：

.1) 查找所有数据项 .2) 检查您的条件（此处小写包含值/文本） .3) 标记项，标记父项 .4) 清理，删除父项留在树中的节点

```
that.nodeFilter = { logic: "or", filters: [] };
that.nodeFilter.filters.push({ field: "hidden", operator: "eq", value: false });
tree.element.find(".k-in").each(function () {
    var dItem = tree.dataItem($(this).closest("li"));
    dItem.hidden = false;
    if (dItem[that.options.dataValueField].toLowerCase().indexOf(searchTerm) != -1 ||
        dItem[that.options.dataTextField].toLowerCase().indexOf(searchTerm) != -1) {
        that.nodeFilter.filters.push({ field: that.options.dataValueField, operator: "eq", value: dItem[that.options.dataValueField] })
        while (dItem.parentNode()) {
            dItem = dItem.parentNode();
            dItem.hidden = false;
            that.nodeFilter.filters.push({ field: that.options.dataValueField, operator: "eq", value: dItem[that.options.dataValueField] })
        }
    } else {
        dItem.hidden = true;
    }
});
tree.dataSource.filter(that.nodeFilter);
tree.element.find(".k-in").each(function () {
    var node = $(this).closest("li");
    var dataItem = tree.dataItem(node);
    if (dataItem.hidden) {
        tree.remove(node);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-28T17:33:45.997

此版本搜索整个树，不区分大小写，并隐藏不包含搜索查询的节点（jQuery 1.8+）。

```
$("#search").keyup(function (e) {
        var query = $(this).val();

        if (query !== "") {
            $("#tree-view .k-in").closest("li").hide();
            $("#tree-view .k-item .k-in:Contains(" + query + ")").each(function () {
                $(this).parents("ul, li").each(function () {
                    $(this).show();
                });
            });
        } else {
            $("#tree-view .k-group").find("ul").hide();
            $("#tree-view .k-group").find("li").show();
        }
    });

jQuery.expr[":"].Contains = jQuery.expr.createPseudo(function (arg) {
    return function (elem) {
        return jQuery(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T11:07:01.657

如果我很好地阅读了这个问题，那是关于过滤视图中的数据而不是树视图本身。它可以通过递归来完成。

有效的递归示例：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Kendo UI Snippet</title>

    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.common.min.css"/>
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.rtl.min.css"/>
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.silver.min.css"/>
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.mobile.all.min.css"/>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2018.1.117/js/kendo.all.min.js"></script>
</head>
<body>
  <div class="demo-section k-content">
    <div id="treeview1"></div>
    <div id="showit"></div>
    <div id="treeview2"></div>
  </div>
<script>
    //
    // Define hierarchical data source
    //
    var mydata = new kendo.data.HierarchicalDataSource({ 
      name: "Food", items: [
      { name: "Meat", items:
        [
          { name: "Pork" },
          { name: "Beef" }
        ]
      },
      { name: "Vegetables", items:
        [
          { name: "Pepper" }          
        ]
      }
      ]
    });

    //
    // When debugging
    //    
    var debug=false;

    //
    // Find and return Item when found.
    //
    function FindByName(items, myName)
    {
      //Query definition
      var query = kendo.data.Query.process(items, {
              filter: {
                logic: "or",
                filters: [{
                  field: "name",
                  value: myName,
                  operator: "eq"
                }]
              }
            });

       if (debug) $("#showit").html($("#showit").html()+"  found:" + JSON.stringify(query.data));

       //
       // return Item when found.
       //
       if (query.data != "")       
         return query.data; //ready
       else
       {
         //
         // if sub-items, search further
         //
         for (let i=0; i<items.length; i++)            
         {
           if (debug) $("#showit").html($("#showit").html()+"  test:" + JSON.stringify(items[i]));
           if (items[i].items!=null)
           {           
             if (debug) $("#showit").html($("#showit").html()+"  search sub....");
             var r = FindByName(items[i].items, myName);
             if (r!=null) return r; //ready, else continue searching further
           };
         }
       }
      if (debug) $("#showit").html($("#showit").html()+"  not found.");
      return null; //nothing found.
    }

    //
    // print the input
    //
    $("#showit").html($("#showit").html()+"  Food:" + JSON.stringify(mydata.options.items));
    //
    // print the result
    //
  	var ret=FindByName(mydata.options.items,"Beef");
    $("#showit").html($("#showit").html()+"<p>  Beef:" + JSON.stringify(ret));

    $("#treeview1").kendoTreeView({
      dataSource: mydata.options.items,
      dataTextField: ["name"]
    });

    ret=FindByName(mydata.options.items,"Meat");
    $("#showit").html($("#showit").html()+"<p>  Meat:" + JSON.stringify(ret));
    ret=FindByName(mydata.options.items,"Pepper");
    $("#showit").html($("#showit").html()+"<p>  Pepper:" + JSON.stringify(ret));
    ret=FindByName(mydata.options.items,"Vegetables");
    $("#showit").html($("#showit").html()+"<p>  Vegetables:" + JSON.stringify(ret));
    //
    // Example: bind return value [ret] to treeview.
    //
    $("#treeview2").kendoTreeView({
      dataSource: ret,
      dataTextField: ["name"]
    });
</script>
</body>
</html>
```

# php - 如何忽略购物车中的产品

> ID：12303237
> 
> 赞同：0
> 
> 时间：2012-09-06T15:17:27.927
> 
> 标签：php, magento, magento-1.7

在我的电子商务项目中，我必须将一些“外部产品”添加到我的购物车中。我必须在购物车产品列表 (/checkout/cart/) 中写入外部产品价格，但此价格不应添加到购物车总价中。

而且，在下一步中，客户不应该看到外部产品。销售管理中的相同内容。

我怎样才能做到这一点 ？我已经尝试修改 Checkout 的模块但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:37:38.743

你怎么知道你应该添加或忽略什么产品？您可以使模型扩展 Mage_Catalog_Model_Product 并覆盖方法 getPrice，在那里您可以控制获得价格的产品以及获得 0.00 的产品。IMO 你应该做一个模型来配置什么产品是无价的，然后在 getPrice 你在这个模块上搜索。

# php - 将 http Cache-Control 复制到新服务器

> ID：12303238
> 
> 赞同：0
> 
> 时间：2012-09-06T15:17:32.670
> 
> 标签：php, curl, http-headers

我有一个设置，我们在其中卷曲我们的一个 solr 服务器并使用 http 标头 Cache-Control 来缓存结果。

我们正在设置一个将进行相同调用的新服务器，有没有办法从旧服务器移动缓存并将其复制到新服务器？在linux上默认存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:50:48.810

基于我们在上述评论中的讨论。您当前似乎没有可操作的缓存。PHP cURL 没有任何内置的缓存机制，如果需要，您需要实现自己的缓存机制。

# delphi - 为什么即使子类定义了抽象函数，我也会收到抽象错误？

> ID：12303239
> 
> 赞同：2
> 
> 时间：2012-09-06T15:17:33.787
> 
> 标签：delphi, function, dynamic, call

我有一个`Packet`带有抽象方法的类`getID`：

```
Type
  Packet = class
    ...
    function getID() : Integer;virtual;abstract;
    class procedure writePacket(par0 : Packet; par1 : TIdTCPConnection);
    ...
implementation 

class procedure Packet.writePacket(par0 : Packet; par1 : TIdTCPConnection);
// par1 is a TCP connection used to send data through the network; 
begin
  par1.writeInteger(par0.getID());
  //some code following 
end; 
```

我有以下子类：

```
type
  PacketTest = class(Packet)
    ...
    function getID() : Integer;
    ...

function PacketTest.getID():Integer;
begin
  result := {some value individual for each subclass}
end; 
```

现在我`writePacket`用一个数据包的子类调用超类的类过程`par0`，然后它应该调用子类的函数`getID`。相反，它调用超类的函数`getID`并且（当然）抛出一个抽象错误。

我希望它动态调用子类的 function `getID`，这永远不会引起问题，因为`par0`它始终是一个子类，`Packet`因为`Packet`它本身是抽象的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:24:08.490

子类中的声明`getID`必须有 override 关键字：

```
type
  PacketTest = class(Packet)
    function getID: Integer; override;
  end;

function PacketTest.getID: Integer;
begin
  Result := {some value individual for each subclass}
end; 
```

# html - 如何在 不删除标签本身的情况下覆盖标签？

> ID：12303241
> 
> 赞同：21
> 
> 时间：2012-09-06T15:17:35.863
> 
> 标签：html

`<base>`我正在尝试向使用标签的该站点添加一些哈希链接（以内容表的格式，以便于网页导航） 。

现在显然由于基本标签，所有其他相对标签都将相对于基本标签href。为了让我创建这个包含指向特定页面不同部分的链接的内部内容表，我需要获取默认 URL（在基本标记生效之前），以便内部链接可以正常工作。

有没有办法绕过基本标签并完成此任务？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T16:32:03.340

标记的效果对`base`文档来说是全局的，而覆盖其效果的唯一方法`<base href="...">`是使用绝对 URL。

如果文档是通过 HTTP 检索的，您可以`window.location`在 JavaScript 中使用来获取页面本身的 URL。您可以使用它来构造绝对 URL。

这些`base`天通常不需要标签。最好使用允许您从一个或多个基地址构造地址的服务器端技术。所以很可能最好的方法是摆脱标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T14:28:23.030

您可以使用一些 javascript 和 jQuery 来“修复”这个问题 -

```
// get all the internal anchors inside #article 
$('#article a').each(
        function() {
            // get the href attribute
            href = $(this).attr('href');
            // does it have a href?
            if (href) {
                // does it have an internal anchor?
                if (href.match(/#/i)) {
                    // append window.location and write back to the href Attribute
                    new_href = window.location + href;
                    $(this).attr('href', new_href);
                }
            }
        }
    ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-12T15:04:00.523

作为一个小替代方案，拥有本地 url 并保留基本 href，您可以试试这个。

```
$('a.local').each(
    function () {
		// get the href attribute
		var href = $(this).attr('href');
		// does it have a href?
		if (href) {
			var lastSlash = window.location.toString().lastIndexOf("/");
			var new_href = window.location.toString().substr(0, lastSlash + 1) + href;
			$(this).attr('href', new_href);
		}
	});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<base href="http://www.google.com">
<a class="local" href="mylocalpage.html">local page</a>
<a href="pageOnRemoteServer.html">remote page</a>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-31T12:53:35.997

在链接之前添加一个`/`应该可以完成工作。假设你有`<base href="/assets/images/" />`. 如果您使用`<img src="logo.png" />`，则它会加载`/assets/images/logo.png`。否则，如果您使用，它将从根目录`<img src="/logo.png" />`加载。`/logo.png`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-28T17:32:16.027

我需要包含一个相对样式表，忽略标签`href`中的。`base`我发现如果我将样式表放在标签`link`之前，则不会受到影响。`base``href`

我基于此信息：

> 如果指定了以下任一属性，则该元素必须位于具有 URL 属性值的其他元素之前，例如 's href 属性。

来自[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base)

我意识到这很可能需要您将`a`标签放在文档`head`中，然后以某种方式设置它们以显示在正确的位置。所以这个技巧可能不是很有用。

注意：文档说基本标签“必须”出现在使用 URL 的元素之前，因此根据规范，我所做的可能不合法。

# jquery - 用 jquery 调用图像

> ID：12303247
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:17:52.113
> 
> 标签：jquery, image

我有一个非常简单的问题：我不能用 jquery 调用图像。使用 a 标签的 id 它正在工作。我应该改变什么？

js：

```
$("#for_close").click(function(){
disablePopup();
}); 
```

html:

```
<img src="images/close-x.png" id="for_close" /> 
```

和图片有区别吗？谢谢！

没有准备好文档：

```
$(document).ready(function() {
   $("#pentru_close").click(function(){
disablePopup();
});
}); 
```

我不明白为什么这与文本有效：

```
<a id="pentru_close">x</a> 
```

这不是：

```
 <img src="images/close-x.png" id="pentru_close" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:28:09.190

jQuery - 确保您已将链接添加到您的 jQuery 文件

```
 $(document).ready(function()  {
           $("#for_close").click(function(){
            disablePopup();
            });
       });

        function disablePopup() {
         alert(' . . . ');
         } 
```

HTML -

```
 <img src="images/close-x.png" id="for_close" /> 
```

# ruby - 带有字符串键的 ruby 新哈希冒号表示法

> ID：12303248
> 
> 赞同：23
> 
> 时间：2012-09-06T15:17:52.590
> 
> 标签：ruby

使用 ruby​​ 1.9.3，字符串键似乎不适用于哈希冒号表示法：

```
1.9.3p194 :005 > {abc: 5}
 => {:abc=>5} 

1.9.3p194 :004 > {'abc': 5}
SyntaxError: (irb):4: syntax error, unexpected ':', expecting tASSOC
{'abc': 5}
       ^ 
```

我认为我正在运行正确版本的 Ruby

```
1.9.3p194 :006 > RUBY_ENGINE
 => "ruby" 
1.9.3p194 :007 > RUBY_VERSION
 => "1.9.3" 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-06T15:21:55.240

这是正确的 - 哈希的新冒号表示法仅在键是符号时才有效。

对不起，事情就是这样。

*更新*：使用 ruby​​ 2.2 及更高版本中的新符号支持通用符号（字符串*作为*键仍然不是）：

```
irb
2.2.2 :001 > {'abc': 5}
=> {:abc=>5} 
```

# json - 通过网络服务上传包含文件的对象

> ID：12303249
> 
> 赞同：1
> 
> 时间：2012-09-06T15:17:54.753
> 
> 标签：json, winforms, web-services, asp.net-mvc-4, file-upload

我正在使用 Asp.Net MVC4 编写 Web 服务。我正在为客户端使用 WinForms。我已经实现了一个能够返回项目列表的 SearchController。

```
[HttpGet]
public IEnumerable<Shared.Item> ByTag(string search)
{
    ModelDbContext db = ModelDbContext.Current;
    db.Items.Load();
    //find some items....
    return itemList;
} 
```

我这样称呼它：

```
public Task<IEnumerable<Item>> SearchByTag(string tag)
        {

            client.BaseAddress = serviceAdress;
            var getStuffCall=client.GetAsync("Search/ByTag/" + tag);
            var r=getStuffCall.ContinueWith(
                t =>t.Result.IsSuccessStatusCode? (t.Result.Content.ReadAsAsync<IEnumerable<Item>>().Result):new List<Item>()
                );
            return r;
        } 
```

这工作正常。现在我还想将一个项目上传到服务器。问题是，我的类型 Item 是结构化的，还包含文件列表和图片列表。据我了解，这不适用于 json 对象。或者我可以以某种方式包装/编码我的文件和图片吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:28:40.350

在 WinForms 中，您可能想要使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28VS.80%29.aspx)，它允许您将多部分表单发布到服务器。

请记住，HTTP 并不是真正为文件传输而设计的，所以如果您有大量文件要推送，请考虑一下。

最后在控制器上，您将要执行以下操作：[如何接受文件 POST](https://stackoverflow.com/questions/10320232/how-to-accept-a-file-post-asp-net-mvc-4-webapi)

那里有几个相关链接和一些很好的示例。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:58:21.937

您将不得不自己编写一堆代码，或者使用诸如[Uploadify](http://www.uploadify.com/about/)之类的 jQuery 插件。原因是 XMLHttpRequest 不允许通过 Ajax 编码/上传文件。该插件使用几种已知的解决方法/解决方案/故障转移来使其适合您。

有了这个，您可以考虑进行两次调用，一次调用您的对象，一次调用您希望推送到服务器的文件/图像。

干杯。

# iphone - IOS中的WePay支付网关集成

> ID：12303252
> 
> 赞同：1
> 
> 时间：2012-09-06T15:18:14.103
> 
> 标签：iphone, ios, in-app-purchase, payment-gateway

我想在我的应用程序中实现 Wepay，在应用内购买时，我搜索了我找不到任何关于集成的链接，我什至找不到任何 SDK。

我正在考虑使用任何 Web 服务来实现这一点，但我不清楚如何实现这一点，任何对此有想法的人都可以指导我实现这一目标。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:48:42.697

**如果您想销售应用程序的功能，则必须使用 IAP（阅读 iOS 指南）。**如果您要销售独立于您的应用程序的真实产品或服务（如网络服务），则不允许使用 IAP，您必须使用 WePay 之类的东西。

如果您想销售真正的产品或网络服务，请设置一个使用 WePay（使用 PHP SDK）的基于网络的商店，并让应用程序与您的网络商店进行交互。

另一种方法是直接在应用程序中实现它。我强烈建议不要直接在应用程序内实施付款流程。这将非常容易被破解，因为您的客户可以更改您的应用程序的二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T16:42:32.660

作为更新，您可以通过 iOS SDK 集成 WePay。

[https://www.wepay.com/developer/resources/ios](https://www.wepay.com/developer/resources/ios)

# jquery - 为什么从 Jquery 1.5.1 更改为 Jquery 1.8.1 会破坏我在 MVC3 中的所有 CSS？

> ID：12303256
> 
> 赞同：0
> 
> 时间：2012-09-06T15:18:19.720
> 
> 标签：jquery, css, asp.net-mvc, asp.net-mvc-3, modernizr

我不太确定发生了什么。我替换了 jquery、jquery-ui、jquery-validate（**不是**jquery.validate.unobtrusive）和modernizr。我将文件分别更新为：1.8.1、1.8.23、1.8.1 和 2.6.2。我也更新了 _Layout.cshtml 文件以反映更改。CSS 坏了。因此，我替换了 Content 文件夹中的 CSS 和图像，并将它们替换为新的 JQuery UI 内容。还是坏了。当我说破碎时，我的意思是身体的灰色背景消失了。整个页面颜色为蓝色。除了选项卡（那些背景颜色仍然是灰色的）。此外，我的 div 不再向左浮动。他们只是将一个渲染在另一个之下。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:39:39.063

没有理由升级 jQuery 会影响你的 CSS。jQuery 与 CSS 无关，只是有一些特定于 jQuery UI 的样式表。

当您更新 html 以使用新的 jQuery 时，您很可能犯了一个错误，并且 HTML 不再有效。您可能希望显示布局中的 html 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:49:03.307

Modernizr 生成的脚本似乎是这样开始的：`;window.Modernizr = function (a, b, c)`. 一旦我删除了`;`，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T17:12:57.210

JQuery 1.8 需要在您的主文档之上：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

如果您从一开始就使用它来构建页面，那么所有功能都应该可以正常工作，但是如果您在编写页面后添加它，那么它也可能会弄乱您的页面。

# c - 通过网络发送的填充结构

> ID：12303263
> 
> 赞同：2
> 
> 时间：2012-09-06T15:19:22.477
> 
> 标签：c, network-programming, padding

如果我有这样的结构

`struct MixedStructure{
char a;
short b;
int c;
char d;
};`

填充将生效。

我想知道的是，通过网络发送这样的结构是否有问题。

我的意思是，由于填充，这个结构实际上有 12 个字节（而不是 8 个）。如果在另一端使用了另一种填充方案（或没有），会有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:25:07.223

如果您使用的是 GCC，则使用[`__packed__`](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html)属性：

```
#define PACKED __attribute__((__packed__))
struct PACKED MixedStructure { ... }; 
```

如果您在 Windows 上，请使用`pragma`：

```
#pragma pack(push, 1)
struct MixedStructure { ... };
#pragma pack(pop) 
```

如果要对齐，还可以使用显式填充：

```
#include <stdint.h>
#define PACKED __attribute__((__packed__))
struct PACKED MixedStructure {
    int8_t a;
    int8_t pad0; /* added for alignment */
    int16_t b;
    int32_t c;
    int8_t d;
    int8_t pad1[3]; /* added for alignment */
}; 
```

我还建议使用上述显式宽度类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:29:39.797

这不是你唯一的问题。你怎么知道 sizeof(int) 或 sizeof(short) 在构建该结构的两个盒子之间是一致的？

大多数编译器都有方法来指定[固定大小的变量](http://publib.boulder.ibm.com/infocenter/comphelp/v9v111/topic/com.ibm.xlcpp9.aix.doc/standlib/header_cstdint.htm)（即 uint32_t）。为了回答您的具体问题，大多数编译器也有指定[包装](http://msdn.microsoft.com/en-us/library/2e70t5y1.aspx)的方法。

将结构覆盖到字节缓冲区是高性能网络编程中非常常见的习惯用法，但可能会充满危险。您还需要了解这个习语如何违反[严格混叠](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)以及什么是[字节序](http://en.wikipedia.org/wiki/Endianness)。

我知道在非常高性能的情况下，这是最好的选择。只是要非常非常小心，并在所有可能一起通信的潜在主机之间进行非常好的测试。如果您不需要这种性能，请查看[google 的协议缓冲区之](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCIQFjAA&url=http://code.google.com/p/protobuf/&ei=DMJIULH1C8_miwLt0YGwDg&usg=AFQjCNEH5XQOuk2HkPhnqqJRXpNgRAOWdQ&sig2=0D_SFqriXw9tFBf6uF7oIg)类的东西，以一种非常高效的方式传输数据，让您避免了解打包/字节序等。

# jquery - 如何触发 mobile.loading 方法？

> ID：12303270
> 
> 赞同：0
> 
> 时间：2012-09-06T15:19:51.503
> 
> 标签：jquery, jquery-mobile, cordova

我正在尝试做一些看起来相当简单的事情。基本上我有一个 Ajax 事件侦听器，它检查 Ajax 开始事件和 Ajax 结束事件，当检测到开始或结束时，它应该运行`$.mobile.loading('show')`，当 Ajax 事件结束时它应该运行`$.mobile.loading('hide')`。但是，加载图标和文本不显示。

认为我的 Ajax 事件开始和事件结束侦听器没有正确接收 Ajax 开始和结束事件有问题，我将其替换`$.mobile.loading('show')`为标准警报，该警报正常工作。这是我的代码：

```
$("#page1").ajaxStart(function() { $.mobile.loading('show'); }); 
```

和

```
$("#page1").ajaxEnd(function() { $.mobile.loading('hide'); }); 
```

我知道我做错了什么，但我不知道是什么。任何想法？

哦，在重要的情况下，这个 JQM 应用程序在 cordova (1.7.0) 和 jquery 1.8.1 和 jquery mobile 1.1.1 下运行

库按该顺序加载，事件侦听器在设备就绪事件之后加载。

所以：

```
function onBodyLoad() { document.addEventListener("deviceready", onDeviceReady, false); }

function onDeviceReady() {
    / load the ajax start and end listeners code displayed above /
} 
```

**编辑：** 这是我的文件头的样子：

```
<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
<script src="js/jquery-1.8.1.min.js"></script>
<script src="js/jquery.mobile-1.1.1.js"></script>
<script type="text/javascript">

function onBodyLoad()
{
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady()
{
    $("#page1").ajaxStart(function() {
        $.mobile.loading('show');
    });

    $("#page1").ajaxStop(function() {
        $.mobile.loading('hide');
    });
} 
```

Page 1 有一些由 JQM 增强的表单字段，当用户单击提交按钮时，它会运行一个函数来检查用户是否连接到网络，如果是，则通过 Ajax 提交该数据。该`$.mobile.loading`方法应该在 Ajax 执行它的操作时运行，但它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:54:22.550

您确定 jquerymobile 在您调用 ajax 时已初始化吗？这是您可以尝试并为我工作的方法。（您可以通过命名空间变量进一步清理代码，但这应该给出一个想法）

```
var deviceready = false, pageinitialized = false;
function onBodyLoad() { 
   document.addEventListener("deviceready", onDeviceReady, false); 
   $(document).bind("pageinit", function(){
     pageinitialized =true;
     myloading();
   });
}

function onDeviceReady() {
 / load the ajax start and end listeners code displayed above /
  myloading();
}

var myLoading = function(){
 if ( !deviceready || !pageinitialized ) {
  return
 }
 //Your ajax call here

} 
```

# php - 来自mysql数据库的php电子邮件发送列表

> ID：12303271
> 
> 赞同：1
> 
> 时间：2012-09-06T15:20:02.927
> 
> 标签：php, mysql

我正在尝试从 mysql 数据库创建一个电子邮件发送列表，该列表仅在正确的日期发送给收件人，我希望每人发送一封单独​​的电子邮件，如果他们都在`"To: "`现场，我可以做到这一点。这是我没有的

```
 <?
 $freq=date("N");

//get email address's

$result = mysql_query("SELECT * FROM email_list ");

while($row = mysql_fetch_array($result))
{

 if($row['period']=="daily"){     
 $to="To: ".$row['name']." <".$row['email'].">\r\n";
 $subject="Your exchange rate update";
 $headers  = 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .="To: ".$row['name']." <".$row['email'].">\r\n";
 $headers .= "From: ME <me@me.com>" . "\r\n";
 mail($to, $subject, $email, $headers);
 }
 if($row['period']==$freq){
   $to="To: ".$row['name']." <".$row['email'].">\r\n";
 $subject="Your exchange rate update";
 $headers  = 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .="To: ".$row['name']." <".$row['email'].">\r\n";
 $headers .= "From: name <me@me.com>" . "\r\n";
 mail($to, $subject, $email, $headers);
     }

}   
 ?> 
```

不会发送电子邮件，也不会收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:22:57.443

您不会将“To：”放入作为第一个参数传递给`mail()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:23:06.707

您只是`email`从表中选择字段，但在生成邮件标题时，您正在尝试访问`$row['name']`和`$row['email']`。

`$row['name']`可能会给出未定义的索引警告，弄乱标题和随后的电子邮件发送。

**更新：**我看到您已将查询更新为`select *`而不是`select email`. 作为提示，请不要像这样默默地更新问题，而是用评论更新它，并让人们知道您所做的任何更改是否有助于/改变了基于发布的原始代码的行为。

当有人查看问题中发布的代码并发现发布的答案与它完全无关时，这变得很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:22:13.670

当您选择电子邮件时，$row 数组将仅包含 $row["email"]

也尝试回显邮件功能的响应，并打开错误报告：

```
error_reporting(-1); 
```

您还需要在运行此代码的系统上运行正常的邮件服务器：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:23:09.343

您只选择“电子邮件”。`$row['period']`为空，因为它未在您的查询中选择。所以两个 if 都是 False，因此不发送电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T15:24:53.047

尝试这个

```
<?
 $freq=date("N");

//get email address's

$result = mysql_query("SELECT * FROM email_list ");

while($row = mysql_fetch_array($result))
{

 if($row['period']=="daily"){     
 $to=$row['name']." <".$row['email'].">\r\n";
 $subject="Your exchange rate update";
 $headers  = 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .="To: ".$row['name']." <".$row['email'].">\r\n";
 $headers .= "From: ME <me@me.com>" . "\r\n";
 mail($to, $subject, $email, $headers);
 }
 if($row['period']==$freq){
   $to=$row['name']." <".$row['email'].">\r\n";
 $subject="Your exchange rate update";
 $headers  = 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .="To: ".$row['name']." <".$row['email'].">\r\n";
 $headers .= "From: name <me@me.com>" . "\r\n";
 mail($to, $subject, $email, $headers);
     }

}   
 ?> 
```

# macos - VirtualBox：VBoxManage modifyhd 在 mac os x 上托管不支持调整大小

> ID：12303274
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:17.800
> 
> 标签：macos, resize, virtualbox

我正在使用 VirtualBox 在 OS X 上托管一个 VM。我正在尝试使用以下命令调整虚拟硬盘驱动器的大小：

```
VBoxManage modifyhd [file path]/ubuntu_vm-disk1.vmdk --resize 16000 
```

我收到以下错误：

```
0%...
Progress state: VBOX_E_NOT_SUPPORTED
VBoxManage: error: Resize hard disk operation for this format is not implemented yet! 
```

这是我的showhdinfo：

```
Accessible:           yes
Logical size:         15719 MBytes
Current size on disk: 6066 MBytes
Type:                 normal (base)
Storage format:       VMDK
Format variant:       dynamic default 
```

我究竟做错了什么？

**更新** 我删除了所有快照并在路径周围重试了“”命令，现在出现以下错误：

```
VBoxManage: error: Failed to lock media when compacting '/Users/dwstein_old/VirtualBox VMs/Ubuntu_120723/ubuntu_vm-disk1.vmdk'
VBoxManage: error: Details: code VBOX_E_INVALID_OBJECT_STATE (0x80bb0007), component Medium, interface IMedium, callee nsISupports
Context: "Resize(cbResize, progress.asOutParam())" at line 522 of file VBoxManageDisk.cpp
VBoxManage: error: Code VBOX_E_INVALID_OBJECT_STATE (0x80BB0007) - Current object state prohibits operation (extended info not available) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:22:15.617

可以通过 3 个步骤完成：

*   使用 VBoxManage 将您的 VMDK 克隆为 VDI 格式
*   使用 VBoxManage 调整磁盘大小以创建可用空间
*   使用 GParted 修改文件系统以将可用空间分配给您的驱动器

我在这里写了一个教程来[调整你的虚拟机磁盘](http://www.ifusio.com/blog/resize-your-sda1-disk-of-your-vagrant-virtualbox-vm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T21:36:41.283

简短的回答是您需要先转换它，然后克隆它，然后再尝试调整它的大小。你有一个额外的第一步来转换它。vmdk -> vdi

# [1.正如tvial所说，按照该教程](https://tvi.al/tag/vm/)中的步骤1将您的vdmk文件转换为vdi

这里说使用`clonehd`命令。所以在你的情况下，它会完全像： `VBoxManage clonehd <ubuntu_vm-disk1.vmdk> <output-name-here-step1.vdi> --format vdi`

他的教程中的实际步骤是这样的：

```
# Go to the VM folder on your Host computer.
cd ~/VirtualBox VMs/VM-NAME  
# Since resize can't be applied to .vmdk, we'll convert the disk to .vdi format
VBoxManage clonehd box-disk1.vmdk box-disk1.vdi --format vdi  
# Output example : 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100% # Clone hard disk created in format 'vdi'. UUID: 49474a0a-c48c-4b15-8df0-0b9687b4bbaf 
```

# 2.克隆步骤

2a. 在 VirtualBox 中，创建一个新的虚拟机，分配更多空间。

2b。（可能跳过此步骤）`clonemedium`使用与步骤 1 中相同的输出文件名作为第一个参数运行命令，并将您刚刚在步骤 2a 中创建的 vdi 作为第二个参数，在您的情况下： `VBoxManage clonemedium <output-name-here-step1.vdi> <name-of-vdi-step2a.vdi> --existing`

最后别忘了`--existing`！

# 3.按照此处的其余步骤[进行 OS X 的精彩教程](https://medium.com/@akshay.g174_68301/increasing-virtualbox-vdi-capacity-on-mac-os-x-ac4d52b63f0c)

完成教程，调整文件大小。如果运行 VirtualBox 5.1.2 或更新版本，请使用`modifymedium`而不是 modifyhd。我使用了 modifyhd，但其他资源说它已被弃用，取而代之的是 modifymedium。

```
VBoxManage modifymedium --resize 1600 <name-of-vdi-step2a>.vdi 
```

# 4\. 还应注意，Ubuntu（它的一个虚拟机）可能*无法*识别分配的较大空间。您必须启动 Ubuntu VM，然后对其进行重新分区。可以在[这里](https://www.tecmint.com/extend-and-reduce-lvms-in-linux/)找到步骤：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T17:07:57.090

这只是一个权限问题。只需使用管理员命令提示符尝试相同的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-20T01:08:40.587

我的情况 - 带有快照和动态分配内存的 Virtual box 6.0。

备份您的虚拟机并将其关闭。

步骤 1\. - 删除快照。

第 2 步 - 使用下面给出的命令增加虚拟大小。

```
VBoxManage modifymedium disk "\Path\To\Vdi\xyz.vdi" --resize XXXXX 
```

（以 MB 为单位的新大小）

第 3 步 - 启动虚拟机并打开终端。

第 4 步 - 此步骤将为您提供所有驱动器分区的列表。在我的情况下，它是 /dev/disk1 的 disk1s2 应该增加大小。

```
diskutil list 
```

第 5 步 -

```
diskutil repairdisk disk1 
```

第 6 步 -

```
diskutil apfs resizeContainer disk1s2 124g 
```

（这里 124g 是我真正想要的尺寸。）

# c# - MVC4 - 使整个项目的价值全球化

> ID：12303276
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:20.530
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我正在使用具有多语言支持的数据库。现在的问题是我需要在查询中输入我的语言才能获取信息，这很好，但是存储该信息的最佳方式是什么。

当然，在客户端，它将存储在 cookie 中。现在我能想到的唯一方法是在类上创建全局变量，然后在我的函数中使用它。这是唯一的方法吗？

## 示例代码

```
private string lang = Infrastructure.UserSettings.Language(); // I don't have this implemented yet

[HttpGet]
public dynamic List()
{
    string lang = "English"; // That's why I set it here manually for testing

    var items = _db.Items.OrderByDescending(x => x.ID).Select(x => new
    {
        ID = x.ID,
        Price = x.Price,
        Name = x.ItemTranslations.Where(y => y.Language.Name == lang).Select(y => y.Name).SingleOrDefault(),
        Category =  new {
            ID = x.Category.ID,
            Name = x.Category.CategoryTranslations.Where(y => y.Language.Name == lang).Select(y => y.Name).SingleOrDefault()
        }
    });

    return items;
} 
```

我的问题：这是这样做的好方法还是有一些更优化的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:07:19.060

您可以使用只读变量制作基本控制器，如下所示：

```
public class BaseController : Controller
{
    public string UserLanguage
    {
        get
        {
            var cLanguage = HttpContext.Request.Cookies["lang"];
            if (cLanguage != null)
                return cLanguage.Value;
            else
                return "English";
        }
    }
} 
```

然后继承您的基本控制器，如下所示：

```
public class HomeController : BaseController 
```

然后像这样访问您的变量：

```
var items = _db.Items.OrderByDescending(x => x.ID).Select(x => new
{
    ID = x.ID,
    Price = x.Price,
    Name = x.ItemTranslations.Where(y => y.Language.Name == UserLanguage).Select(y => y.Name).SingleOrDefault(),
    Category =  new {
        ID = x.Category.ID,
        Name = x.Category.CategoryTranslations.Where(y => y.Language.Name == lang).Select(y => y.Name).SingleOrDefault()
    }
}); 
```

您只需要在特定时间设置 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:37:21.467

每个页面请求都会向服务器发送一个 cookie。如果设置在 cookie 中可用，只需在需要查询时读取 cookie。读取已经存在的 cookie 没有性能开销。

# android - 现有课程不适用于具有意图的新项目

> ID：12303277
> 
> 赞同：1
> 
> 时间：2012-09-06T15:20:23.617
> 
> 标签：android, android-intent, touch-event

我写了一个有 1 个活动和 1 个视图的应用程序，所以它给了我放在屏幕上的手指的坐标。工作完美。

现在的问题是：我创建了一个具有多个 Activity 的新应用程序，因此我可以根据意图在它们之间进行更改。也工作得很好。但是一项活动应该是给我手指位置的活动。所以我复制了课程和活动将它们放入清单中。并制作了一个按钮并打算运行它。因此，当我尝试运行它时，它会创建类但不再对我的 onTouchEvents 做出反应......我不知道为什么。我希望我能很好地解释我的问题，让你们理解。

所以这是我的主要活动。启动菜单，选择去非工人阶级

```
public class V1_2 extends Activity implements OnClickListener{
    Button btn_1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_v1_2);

        btn_1 = (Button) findViewById(R.id.button1);
        btn_1.setOnClickListener(this);

    }

    public void onClick(View v) {
        if( btn_1.getId() == ((Button)v).getId() ){
            startActivity(new Intent(this,Obj_recog.class));
        }
    } 
```

现在这是为 touchevents 创建 touchpiont 类的活动

```
public class Obj_recog extends Activity implements OnClickListener{
    touchtest TP;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.blank);
        TP = new touchtest(this);
    }

    public void onClick(View v) {

    } 
```

现在是一个在这里不起作用但在最后一个项目中以相同方式工作的例子

```
public class touchtest extends View{

    public touchtest(Context context) {
        super(context);
        Log.d("worked", "worked");

    }
    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        Log.d("Touch", "TOUCH!!!!");
        return true;
    }

} 
```

所以我得到了它“有效”的消息，但它不像以前那样对触摸事件做出反应......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:55:20.470

如果您使用 setcontentview 添加 touchtest 视图作为主视图，然后在该视图上添加 touchlistener 并从您的 touchtest 类调用您的 ontouchevent，它将起作用。代码将像 -

```
 TP = new touchtest(this);
    setContentView(TP);
    TP.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

                            TP.onTouchEvent(event);

            return false;
        }
    }); 
```

我认为应该改变这种方法，找到一种替代方法来实现你要以这种方式实现的目标。

通过这种方式，您可以保留空白布局以及 TP。

```
RelativeLayout rl = (RelativeLayout) findViewById(R.id.rl);
TP = new touchtest(this);
    rl.addView(TP);

    TP.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

                            TP.onTouchEvent(event);

            return false;
        }
    }); 
```

# javascript - 检查萤火虫时，javascript window.location 给了我一个错误的 url 路径

> ID：12303281
> 
> 赞同：2
> 
> 时间：2012-09-06T15:20:27.487
> 
> 标签：javascript

我有一个示例 url 网站： http: [//mysite.com/](http://mysite.com/)

```
 var host = window.location.protocol+"//"+window.location.hostname;

$.ajax({
   type:"POST",
   data: params,
   url : host+'/forms/get_data.php',
   success:function(data){
       ...othercodeblahblah
   }
}); 
```

为什么当我尝试检查我的萤火虫时，它会使 URL 变得奇怪。

这是 firebug 的示例输出：

```
http://mysite.com/mysite.com/forms/get_data.php 
```

有了这个网址，它现在给了我：

```
"NetworkError: 404 Not Found -  http://mysite.com/mysite.com/forms/get_data.php" 
```

它不应该像[http://mysite.com/forms/get_data.php](http://mysite.com/forms/get_data.php)那样输出吗？为什么它给我一个错误的 url 路径？

您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:22:04.983

我不确定这样的错误可能来自哪里，但是指定主机是多余的：AJAX 请求无论如何都是同域的（除非特别配置），所以只需从根指定一部分：

```
url: "/forms/get_data.php", 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:36:57.630

原因是`window.location.protocol`已经包含一个冒号 (:)。

因此`host`变量包含`http:://mysite.com`

jQuery 发现您没有传递完整的有效 URL，因此它会自动添加您的主机名。

修复正在改变

```
var host = window.location.protocol+"://"+window.location.hostname; 
```

到

```
var host = window.location.protocol+"//"+window.location.hostname; 
```

* * *

## 编辑

我用你的代码创建了一个 jsfiddle：http: [//jsfiddle.net/xH5ZV/](http://jsfiddle.net/xH5ZV/)

和固定代码：http: [//jsfiddle.net/xH5ZV/1/](http://jsfiddle.net/xH5ZV/1/)

请注意，在固定代码中，您不会两次获得主机名。

# c++ - 在二进制文件中查找全局数据的所有实例

> ID：12303282
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:33.910
> 
> 标签：c++, dll, static, global

在二进制文件中查找所有静态数据实例的好方法是什么？我正在修复 luacom（lua 的 dll 包）以确保线程安全，并想确定我是否找到了所有会受并发影响的全局数据实例。

有没有什么好的工具可以解决这个问题？VC 2008 中的任何功能？

# c# - 通过 IEnumerable 迭代生成隐藏字段

> ID：12303283
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:40.947
> 
> 标签：c#, asp.net-mvc

如何在没有硬编码的情况下使其工作。

```
@foreach (var item in Model.Items)
{   
   //not working - it's assigning blank value
   @Html.HiddenFor(o => o.ItemIds, new { @value = item.Value.ToString() })
   //working
   @Html.Hidden("ItemIds", item.Value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:41:50.560

您可以将`Model.Items`声明从 an更改`IEnumerable`为 an `List`，然后通过索引引用您的项目，如下所示：

```
@Html.HiddenFor(o => o.Items[Model.Items.IndexOf(item)].Value) 
```

# android - 在浏览器中下载链接/如果标题中有特殊的 Content-Type，请打开我的活动

> ID：12303284
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:48.377
> 
> 标签：android, android-intent

情况：

有一个网站以这种形式列出了下载：

[http://www.xyz.org/download.php?id=1234568](http://www.xyz.org/download.php?id=1234568)

来自服务器的响应标头如下所示：

```
HTTP/1.1 200 OK
Date: Thu, 06 Sep 2012 15:14:33 GMT
Server: Apache
X-Powered-By: PHP/5.2.6-1+lenny16
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Disposition: attachment; filename=myspecialfile.myx
Content-Length: 20269746
Last-Modified: Wed, 05 Sep 2012 17:15:01 GMT
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: application/my+xyz+app 
```

如您所见，有一个特殊的内容类型应用程序/my+xyz+app

我如何为我的活动开始的清单文件编写意图过滤器，以便我可以处理下载？

这是我到目前为止所拥有的：

```
 <activity
        android:name=".ui.Library"
        android:label="@string/app_name"
        android:launchMode="singleTask" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http"  android:mimeType="application/my+xyz+app" />
        </intent-filter>
    </activity> 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T12:31:10.470

根据另一个 StackOverflow 答案，浏览器检查 Content-Disposition 标头，如果它指示附件，则甚至不检查意图过滤器。

[https://stackoverflow.com/a/8770360/304876](https://stackoverflow.com/a/8770360/304876)

# wpf - 适用于 Web 和 WPF 应用程序的自动化解决方案

> ID：12303286
> 
> 赞同：3
> 
> 时间：2012-09-06T15:20:55.423
> 
> 标签：wpf, testing, selenium, automation, desktop

我想知道是否有人解决了以下挑战：

由 Web 应用程序和 WPF 桌面应用程序组成的产品的自动化测试。我正在寻找一种涵盖同一引擎盖和技术的自动化解决方案。

例如：我想到了：Selenium + MS UI 自动化库都在同一个自动化项目下，使用 C# 和 .NET。

可能吗？这类产品还有其他解决方案吗？

我知道 QTP 可能会做到这一点，但缺乏良好的浏览器支持——到目前为止还不如 Selenium。并且还缺乏像JAVA或C#这样的可靠编程语言。

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:23:18.550

绝对可以将 Selenium (C#) 与 MS UI 自动化一起使用。除了您自己编写的代码之外，没有太多共同点，但我个人认为，如果您是一个强大的程序员，这种方法是一个好主意。MS UI 自动化一点也不容易。另一种选择是考虑 Silk4Net。您可以将它用于 Web 和 WCF，但如果您想将 Selenium 用于 Web，将 Silk4Net 用于 WCF，那也可以。只是普通的 ole Silk4Net 'library usuage' 许可证价格合理。

# c++ - 在 C 中使用 *&*&p 理解复杂的指针和地址运算符

> ID：12303287
> 
> 赞同：0
> 
> 时间：2012-09-06T15:20:58.407
> 
> 标签：c++, c, pointers, addressof

任何人都可以在下面解释 printf 如何打印 hello 吗？

```
#include<stdio.h>

void main()
{
 char *p;
 p="hello";
 printf("%s",*&*&p);
} 
```

我知道*&p...表示p 中的值，即字符串“hello”的地址。最初的 *& 发生了什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T15:24:02.677

正如你所说，`*&p`意味着`p`，这意味着连续`*`和`&`取消。因此也`*&*&p`变得`p`。

正如@Kerrek 所说（在评论中）`*&p`产生一个左值，所以你*再次*获取它的地址。

* * *

请注意，您的代码不符合标准。`main()`必须`int`作为返回类型。而且您不能分配`"hello"`给*非常量* `char*`。一定是`const char*`。一个标准的符合代码是这样的：

```
#include<stdio.h>

int main()
{
   const char *p = "hello"; 
   printf("%s",*&*&p);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:24:56.360

`&p`是 的地址`p`。

`*p`是地址指向的东西`p`。

`*&p`是`*(&p)`地址所指向的东西`&p`——它`p`本身（即地址“p 的地址”所指向的东西）。

因此事实证明，这`*&p`只是`p`-`*&`相互抵消。您可以重复此操作：`*&*&p`仍将是`p`. 您可以无限执行此操作：`*&*&*&*&*&*&*&*&*&p`也将是`p`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:25:26.817

'*&' 相互抵消。您正在获取 p 的地址，然后再次取消引用它。所以最终结果将只是 p。

# c++ - 为什么要将包含的类声明为头文件？

> ID：12303288
> 
> 赞同：5
> 
> 时间：2012-09-06T15:21:01.180
> 
> 标签：c++

为什么要将包含的类声明为头文件？

```
#include "TreeCallObj.h"
#include "TreeDevObj.h"
#include "TreeDevCallObj.h"

class TreeCallObj; //what is the purpose of this line ?
class TreeDevObj;  //what is the purpose of this line ?
class TreeDevCallObj;  //what is the purpose of this line ?

class Apple
{
public:
...
private:
...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:29:54.713

考虑一下：

```
//a.h
#ifndef A_H
#define A_H

#include "b.h"
class A
{
   B* b;
};
#endif

//b.h
#ifndef B_H
#define B_H

#include "a.h"
class B
{
   A* a;
};
#endif 
```

现在，您尝试将其中一个文件包含在另一个文件中，例如`#include "a.h"`.

编译器会将其解析为：

```
#ifndef A_H
#define A_H 
```

很好 -`A_H`没有定义

```
#include "b.h" 
```

尝试粘贴内容：

```
#ifndef B_H
#define B_H 
```

好的，因为`B_H`没有定义

```
#include "a.h" 
```

这不会定义`A`，因为`A_H`已定义。所以接下来，我们有

```
class B
{
   A* a;
}; 
```

这将导致错误，因为`A`在使用之前没有定义或声明。

前向声明解决了这个问题。

**当然**，最好的解决方案是根本不包括（除非你绝对必须）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T15:24:28.327

> 这条线的目的是什么？

理想情况下什么都没有。这是多余的。

但是，正如@Luchian Grigore 指出的那样，可能存在设计不良的代码，以至于由于包含防护和交叉包含的不正确使用，前向声明可能是必要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T15:23:32.090

如果在文件中有类的定义，那么`forward declaration`在正常情况下是不必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:33:17.053

我注意到您的标题没有防止多重包含。也有可能一些包含的其他标题（标题通常有这样的保护）包括那个标题。结果它没有编译。所以有人添加了前向声明来修复错误的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T15:24:32.423

完全没有理由。根据情况，您需要做其中之一，但不能两者都做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T15:28:29.313

就目前而言，没有必要。

然而，这可能是历史演变而来的：在某些时候，一个不完整的类型可能就足够了：

```
class Foo;

struct Gizmo
{
    void f(Foo);
}; 
```

然后，稍后，作者决定她需要完整的类型：

```
#include "Foo.hpp"

class Foo;

struct Gizmo
{
    void f(Foo);
    Foo x;
}; 
```

原始代码可能刚刚被修改为现在需要的标题包含......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T15:29:00.953

我想这有一些历史。最初，编码器尝试不包含头文件，而是使用前向声明。然后随着代码的扩展，他们发现他们毕竟需要头文件，但并没有费心去删除前向声明。

正如其他人所说，在类声明之后进行前向声明是没有意义的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T15:28:12.903

如果您的头文件是正确的，我认为声明没有意义，因为它们应该已经在头文件中声明

# attributes - p:工具提示方向

> ID：12303293
> 
> 赞同：2
> 
> 时间：2012-09-06T15:21:25.290
> 
> 标签：attributes, primefaces, tooltip

p:tooltip 是否有任何属性作为我们使用 rich:tooltip 获得的方向？我基本上希望我的工具提示显示在图像的右上角。不知道该怎么做。p:tooltip 的属性数量似乎非常有限。以下是richfaces的代码。

```
<h:commandLink value="Simple Link" id="link">
<rich:toolTip followMouse="true" direction="top-right" mode="ajax" value="#{bean.toolTipContent}" horizontalOffset="5" 
    verticalOffset="5" layout="block">
    <f:facet name="defaultContent">
        <f:verbatim>DEFAULT TOOLTIP CONTENT</f:verbatim>
    </f:facet>
</rich:toolTip> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:53:32.037

那么这可能对你有用吗？[http://fractalsoft.net/primeext-showcase-mojarra/sections/tooltip/customizedTooltips.jsf;jsessionid=14y1z1yedm21t910h6zonwboq](http://fractalsoft.net/primeext-showcase-mojarra/sections/tooltip/customizedTooltips.jsf;jsessionid=14y1z1yedm21t910h6zonwboq)

Primefaces ext 有一个非常简洁的工具提示 imo。

# c# - 在所有类中只有部分方法相同时创建抽象方法

> ID：12303299
> 
> 赞同：0
> 
> 时间：2012-09-06T15:21:46.253
> 
> 标签：c#, abstract-class

我有一堆类，我试图重构和抽象它们的公共成员变量和方法。

我在每个类中看到的一种方法是称为 MethodFoo() 的方法。此方法有一个 Common 主体，但每个类都添加了更多内容。例如，对于一个类，它是这样的：

```
private method MethodFoo()
{

   // common stuff ...// wow! a Goto Statement ..seriously!  //1

   **// NON-common stuff just for the method of this class**  //2

   Goto: // bunch of COMMON stuff again   //3
} 
```

所以模板总是第 1 部分和第 3 部分对于这个方法在不同的类中是相同的，但是在 eaxch 类中它的不同之处是第 2 部分......而且不要忘记那个丑陋的 goto 语句:)

所以考虑到这张图片，你认为有没有办法可以将其中的一部分放在我的抽象类中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T15:24:04.890

在您的基类中：

```
private method MethodFoo()
{

   // common stuff ...// wow! a Goto Statement ..seriously!  //1

   DoExtraStuff();

   Goto: // bunch of COMMON stuff again   //3
}

protected abstract void DoExtraStuff(); 
```

这样，您*必须*`DoExtraStuff`在所有继承类中实现。

该模式被称为[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:24:47.217

您正在描述[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

实现者处理`DetailStep`and 但`ToDo`对所有人来说都是通用的。

```
public abstract class Parent
{
    public void ToDo()
    {
        Pre();

        DetailStep();

        Post();
    }

    protected abstract void DetailStep();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T16:07:48.297

这可以使用“模板方法”模式来解决。请参阅此处的“表格 A”：

[非虚拟和抽象方法的命名约定](https://stackoverflow.com/questions/2597556/naming-convention-for-non-virtual-and-abstract-methods)

您可以重构所有 MethodFoo 以将常见的东西“拉起”到基类中。向基类添加一个方法“受保护的虚拟 MethodFooInternal”（类似于上面示例的“WalkInternal”）。派生类将在 MethodFooInternal 中实现它们不常见的东西。

要消除 GOTO，您可以在基类中创建条件逻辑来决定是否调用 MethodFooInternal。

```
private method MethodFoo()
{

   // common stuff ...// wow! no more Goto Statement   //1

    if (this.needToExecuteNonCommonStuff()) {
       **// NON-common stuff just for the method of this class**  //2
        MethodFooInternal();
    }

   // bunch of COMMON stuff again   //3
}

protected abstract void MethodFooInternal();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:24:48.473

使其成为受保护的方法，您的派生类可以覆盖它并调用基实现：

```
protected override void MethodFoo()
{

  base.MethodFood();

   **// NON-common stuff just for the method of this class**  //2
} 
```

这当然需要知道这些步骤需要在派生类中发生的顺序。更好的方法是使用 Austin Salonen 或 Oded 提供的答案。

# c# - 将文件从 FTP 服务器下载到网络驱动器

> ID：12303300
> 
> 赞同：0
> 
> 时间：2012-09-06T15:21:53.290
> 
> 标签：c#, .net, ftp, filestream

我正在尝试实现一个 Windows 服务应用程序，该应用程序从 FTP 服务器下载文件并将它们保存到 DB 中指定的网络驱动器位置。网络共享文件夹授予“所有人”的完全访问权限

```
bool status = true;
string webError = string.Empty;
FtpWebResponse response = null;
Stream ftpStream = null;
FileStream outputStream = null;
FtpDownloadToFolder = @"\\servername\SharedFolder\";
fileName  = "test.jpg";

FtpWebRequest reqFTP = WebRequest.Create(new Uri(FtpAddress + "/" + fileName)) as FtpWebRequest;
reqFTP.Credentials = new NetworkCredential(FtpUser, FtpPassword);
reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
reqFTP.UseBinary = true;
reqFTP.Timeout = FtpTimeout;
response = reqFTP.GetResponse() as FtpWebResponse;
ftpStream = response.GetResponseStream();

if (!FtpDownloadToFolder.EndsWith("\\"))
{
    FtpDownloadToFolder = FtpDownloadToFolder + "\\";
}
outputStream = new FileStream(FtpDownloadToFolder + "/" + fileName, FileMode.Create);

long cl = response.ContentLength;
int bufferSize = 2048;
byte[] buffer = new byte[bufferSize];
int readCount = ftpStream.Read(buffer, 0, bufferSize);

while (readCount > 0)
{
    outputStream.Write(buffer, 0, readCount);
    readCount = ftpStream.Read(buffer, 0, bufferSize);
} 
```

所以，我在这里尝试将文件从 FTP 服务器下载到网络驱动器中。但我收到以下错误：

```
Access to the path '\\servername\SharedFolder\test.jpg' is denied.

System.Net.WebException: The remote server returned an error: 150 0.066 seconds (measured here), 3.78 Mbytes per second
---> System.IO.IOException: The operation is not allowed on non-connected sockets.
   at System.Net.Sockets.NetworkStream.InitNetworkStream(Socket socket, FileAccess Access)
   at System.Net.Sockets.NetworkStream..ctor(Socket socket, Boolean ownsSocket)
   at System.Net.FtpControlStream.QueueOrCreateFtpDataStream(Stream& stream)
   at System.Net.FtpControlStream.PipelineCallback(PipelineEntry entry, ResponseDescription response, Boolean timeout, Stream& stream)
   at System.Net.CommandStream.PostReadCommandProcessing(Stream& stream)
   at System.Net.CommandStream.PostSendCommandProcessing(Stream& stream)
   at System.Net.CommandStream.ContinueCommandPipeline()
   at System.Net.CommandStream.CheckContinuePipeline()
   --- End of inner exception stack trace ---
   at System.Net.FtpWebRequest.CheckError()
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.CommandStream.Abort(Exception e)
   at System.Net.CommandStream.CheckContinuePipeline()
   at System.Net.FtpDataStream.System.Net.ICloseEx.CloseEx(CloseExState closeState)
   at System.Net.FtpDataStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at System.Net.FtpWebResponse.Close() 
```

我在这里错过了什么吗？如何将文件从 FTP 服务器复制到网络共享文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:31:36.537

通常，您的服务将在仅在本地主机上的帐户下运行。因此，它不是从您网络上经过身份验证的帐户运行的。只需更改运行服务的帐户，以确保它是来自您的网络 AD 的帐户，因此它将成为您所指的 Everyone 组的一部分。

# asp.net-mvc-3 - MVC3 C# + MSSQL 区分大小写的字段

> ID：12303304
> 
> 赞同：1
> 
> 时间：2012-09-06T15:22:01.183
> 
> 标签：asp.net-mvc-3, custom-validators

我在 MSSQL 服务器中有字段“名称 nvarchar(10)”的表现在我正在尝试查找一些数据，但我无法进行区分大小写的搜索。IE

```
 this.SomeTable.SingleOrDefault(u => (u.Name==login)); 
```

或者

```
 this.PortalUsers.SingleOrDefault(u => (u.Name.Equals(login)) 
```

返回一个值，但不应该，因为 "aaaa"!="AAAA" 如何在不修改数据库单元排序规则的情况下修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:12:22.387

不是一个很好的解决方案，但如果您无法更改 MSSQL 服务器，那么您将受到限制。

尝试

```
 this.PortalUsers.Where(u => u.Name == login).ToList().SingleOrDefault(u => u.Name == login) 
```

这将不分大小写地提取所有匹配的记录，将其转换为内存数组，然后根据区分大小写的匹配项挑选出一个。

不过，我敦促您小心，这不是一个很好的解决方案，它可能会返回大量必须在内存中创建的记录，不会太贵，但需要提防。

硅

# java - 两个按钮在初始点击后触发相同的功能

> ID：12303311
> 
> 赞同：0
> 
> 时间：2012-09-06T15:22:19.653
> 
> 标签：java, javascript, html, jakarta-ee, struts

我有两个按钮，“搜索”和“矩阵搜索”。当我第一次点击“搜索”按钮时，它会做它应该做的事情。但是，如果我在单击“矩阵搜索”按钮后单击“搜索”按钮，它会调用 matrixSearch() 函数。为什么会这样？和范围有关系吗？

以下是我的操作顺序：

单击按钮 A---> 工作正常（调用函数 A）

单击按钮 B---> 工作正常（调用函数 B）

单击按钮 A---> 调用按钮 B onClick 函数（调用函数 B）为什么？

jsp文件：

```
<input type="submit" title="Search" value="Search" 
                name="Search" id="Search"
                onClick="clickSearchButton();" />
<input type="button" class="buttonIndent" value="Matrix Search" 
                onclick="matrixSearch()" />

function matrixSearch(){
    //some Code omitted for simiplicity
    form.action = '<%= request.getContextPath() %>/matrixSearch.do';
}

function clickSearchButton(){
    form.action = "<%= request.getContextPath()%>/search.do";
    form.setAttribute("target", "_blank");
    document.form.submit();
} 
```

Struts 配置文件：

```
<action path="/search" type="com.action.MyAction"
     name="form" scope="session" validate="false"
     parameter="search">
     <forward name="success" path="tile.view"/> 
</action>

<action path="/matrixSearch"
    type="com.action.MyAction"
    name="form" parameter="searchMatrix"
    scope="request" validate="false">
    <forward name="success" path="/matrix_search.jsp"/>
    <forward name="failure" path="tile.view"/>  
</action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:57:37.153

我终于找到了答案。有两个问题。第一个问题是使用以下语句：form.setAttribute("target", "_blank");

出于某种原因，即使在我的下一个按钮单击期间，此属性也会保留。所以我在我的其他功能中添加了以下内容

form.setAttribute("目标", "_self");

第二个问题是我的 clickSearchFunction() 中存在问题。这个函数很长，所以我没有在我的问题中写下整个代码。该函数中的一条语句是访问我已删除的字段，因为我不再需要它了。我刚刚删除了那行，它就像一个魅力。

感谢每一个参与这个问题的人。

# sftp - 为什么 FileZilla 可以在不知道任何密钥的情况下工作，而 WinSCP 却不行？

> ID：12303314
> 
> 赞同：3
> 
> 时间：2012-09-06T15:22:33.057
> 
> 标签：sftp, public-key, filezilla, winscp, winscp-net

我获得了 SFTP 服务器的连接详细信息，使用 FileZilla 连接到它，然后从该 SFTP 成功下载了一个文件。

我拥有的唯一详细信息是主机、端口、用户和通行证。

现在我正在尝试通过 WinSCP .NET 程序集（C#）连接到同一台服务器

```
using(Session session = new WinSCP.Session()) {
    session.Open(new SessionOptions() { 
        Protocol = Protocol.,
        HostName = "ftp.*********.be",
        UserName ="*****",
        Password ="*****"
    });

    TransferOptions transferOptions = new TransferOptions();
    transferOptions.TransferMode = WinSCP.TransferMode.Binary;
    TransferOperationResult transferResult;
    transferResult = session.GetFiles("/downld/fileonserver.dbf",@"c:\testfolder\localfilename.dbf", false, transferOptions); 
```

无论我在这里尝试什么，它都会不断要求 SSH 的密钥，但我没有那个密钥，我在网上某处生成了一个 128 位 RSA 密钥并将其放入会话选项中，例如：

```
SshHostKeyFingerprint = "ssh-rsa 1024 82:09:12:b4:93:92:3a:61:10:90:61:12:b4:XX:XX:XX" 
```

但这只是告诉我密钥无效。

我有点想通，我可能需要来自服务器的公共/私有 SSH 密钥才能使其工作，但遗憾的是我无法访问该服务器。

**既然 FileZilla 可以在我不输入任何 KEYS 的情况下连接到它，为什么我的 C# 程序不能这样做呢？**

在涉及安全相关的事情时，我不是专家，所以请指出我正确的方向。我找到[了这个线程](https://stackoverflow.com/questions/44089/how-to-extract-sftp-ssh-key-from-key-cache-in-filezilla-ftp-client)，但我无权访问`.ssh`FTP 服务器上的文件夹，而且我真的不知道他们在做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T06:51:05.537

1.  您将 SSH 服务器公共主机密钥验证与客户端公共密钥身份验证混淆了。这是两个完全不同的东西。这首先涉及服务器的公钥，而后者涉及您的帐户公钥。

    [阅读 SSH 密钥对](https://winscp.net/eng/docs/ssh_keys)以了解其中的区别。

2.  FileZilla**也无法**在不验证服务器的公共主机密钥的情况下进行连接。在第一次连接时，它总是提示您接受密钥。完成后，它会选择性地缓存密钥并且不会再次提示您，除非密钥更改。

    ![FileZilla 主机密钥验证](../Images/98e4c7eb7a095155e78e8c37fe309c59.png)

    您可能忘记了您之前收到过此提示，或者之前有人从您的机器上连接到了服务器。

    任何 SSH (SFTP) 客户端都必须这样做。如果您没有验证服务器的主机密钥，您将失去任何安全性。

3.  您应该从服务器管理员处获取主机密钥指纹。

    如果您没有，您可以在 WinSCP[服务器和协议信息对话框](https://winscp.net/eng/docs/ui_fsinfo)中看到它。

    有关详细信息，请参阅 WinSCP 常见问题解答[我在哪里获取 SSH 主机密钥指纹以授权服务器？](https://winscp.net/eng/docs/faq_hostkey)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:25:25.113

我通过将返回到 FileZilla 客户端的 SSH 密钥复制到我的 C# 应用程序中解决了这个问题。我不知道这是否是正确的做法，但至少它让我的解决方案现在可以工作了。

它也是一个 SSH-DSS 密钥 2048 密钥而不是 SSH-RSA 1024，这就是我猜想弄乱密钥一直失败的原因。

# javascript - 选择没有选择器的元素，仅使用元素 ID

> ID：12303321
> 
> 赞同：1
> 
> 时间：2012-09-06T15:22:45.527
> 
> 标签：javascript, dom

我总是不得不使用选择器来获取 DOM 中的元素，这样我就可以检索我需要的数据。例如：

```
var test1 = document.getElementById('testElement').value; // or
var test2 = document.querySelector('#testElement').value; // or
var test3 = $('#testElement').val(); // etc... 
```

最近，我注意到我不再需要这样做。相反，简单地使用元素的 id 似乎就足够了。它似乎被用作对元素的引用。下面的代码适用于我在 Chrome、Firefox 甚至 IE9 中。

```
var test4 = testElement.value; 
```

我一直试图找到更多关于此的信息，但无论我在哪里，每个人都说需要使用选择器。
所以要么我和我的同事不知何故完全错过了这一点，或者没有多少人知道这一点。或者，我想，我在搜索信息方面很糟糕。

**基本上，我正在寻找有关此的更多信息。**

所以请指出我正确的方向，以便我可以进一步调查并确保此功能可以保留并且可以始终如一地使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:24:48.363

这是浏览器功能，**不**符合规范。这意味着要让您的代码在大多数浏览器上运行，它应该使用一些选择器。此外，`testElement`如果它已经是全局变量，则可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:26:07.830

根据浏览器，元素 id*可能*在全局范围内。这是一个很好的功能，但我不会依赖于您的应用程序。如果你想彻底，我建议使用`getElementById()`jQuery 或选择器。

# c# - 在 IE 以外的浏览器中显示 Visio 文档？

> ID：12303331
> 
> 赞同：0
> 
> 时间：2012-09-06T15:23:08.510
> 
> 标签：c#, asp.net, ms-office, visio

在我的网站上，我在浏览器中显示了几种不同类型的文件，例如图像、文本文件等。我想要显示的文件之一是 Visio 文档。

为了在页面上显示它，我正在创建一个 iframe，其源设置为 .vsd 文件的 url。这在 IE 中可以正常工作，但在任何其他浏览器中都不能。IE 会显示文件，但其他浏览器只是打开下载对话框来保存文件。

有没有办法在其他浏览器中嵌入 .vsd 文件？

# php - 来自 CSV 的 MySQL 自动更新程序

> ID：12303334
> 
> 赞同：0
> 
> 时间：2012-09-06T15:23:10.433
> 
> 标签：php, mysql

我正在尝试为足球数据库创建一个自动分数更新器。我的客户将通过电子邮件向我发送包含比赛日期、主队、主场比分、客队和客场比分的 CSV 电子表格。问题是我有一个单独的团队表（team_id、team_name 等）和游戏表，如下所述：

团队（team_id、team_name 等）

游戏（game_id、game_home_team、game_home_score、game_visitor_team、game_visitor_score、game_date、game_complete）

sample game data(1, 123, 0, 156, 0, 8-31-2012, No) -> 我在比赛表中存储了球队的 id 而不是他们的名字。

我需要编写一个脚本来自动更新分数。每周将有大约 327 个分数。

CSV 将如下所示（带有列标题）：

game_date, home_team, home_score, visitor_team, visitor_score

(2012-8-31, Forest Hills, 44, Westmont Hilltop, 0) -> 样本数据

我将如何首先获得球队 ID，然后将他们的主场和访客 ID 与他们的球队名称相匹配，然后获取与匹配的 team_id 对应的游戏 ID，然后更新该游戏的分数？这是很多，我有点迷失在这个问题上。任何帮助甚至更好的方法都将不胜感激。以下是我到目前为止的内容：

```
UPDATE game SET 
    game_home_score = ?, 
    game_visitor_score = ?, 
    game_complete = 'Yes' 
WHERE game_id = 
    SELECT game_id 
    FROM game 
    WHERE game_home_team IN (
        SELECT team_id 
        FROM team 
        WHERE team_name = ?
    ) AND game_visitor_team IN (
        SELECT team_id 
        FROM team 
        WHERE team_name = ?
    ); 
```

我知道该查询是错误的，但就我需要走的方向而言，这是我的想法。我的 MySQL 知识还不够广博（我不这么认为）来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:00:32.693

让我们将 CSV 文件中的数据放入一个名为 csv_data 的表中，这样应该可以：

```
update game g, csv_data c, team home_team, team visit_team
set g.game_home_score = c.home_score,
    g.game_visitor_score = c.visitor_score,
    g.game_complete = 'Yes'
where g.game_date = c.game_date
and home_team.team_name = c.home_team
and home_team.team_id = game.home_team
and visit_team.team_name = c.visit_team
and visit_team.team_id = game.visit_team 
```

希望有帮助。

# c# - 将 SQL 语句转换为 Linq

> ID：12303338
> 
> 赞同：2
> 
> 时间：2012-09-06T15:23:23.950
> 
> 标签：c#, sql, linq

我正在尝试将以下内容转换为 C# 中的 LINQ to SQL 语句。谁能帮我一把？基本上，我的表记录了所有更改历史记录，以便每个种子区的创建日期最大日期是最新记录并且要显示的正确记录。

```
SELECT 
    reports.* 
FROM
    [dbo].[Reports] reports
WHERE
    reports.createdDate
IN (
    SELECT 
        MAX(report_max_dates.createdDate) 
    FROM 
        [dbo].[Reports] report_max_dates
    GROUP BY 
        report_max_dates.Lot
    ) 
```

到目前为止，这就是我所拥有的。

```
var result = (from report in db.Reports
    where report.createdDate == (from report_max in db.Reports
                                group report_max by report_max.Lot into report_max_grouped
                                select report_max_grouped).Max()
    select report); 
```

我不知道如何获取`MAX`所有报告的日期以及如何`IN`在 report.createdDate 上做一个声明。

**编辑**

如果我有一个包含多个报告的单独标题，我现在将如何为语句建模。例如，我有报告 l、m、n、x、y、z。报告 lmn 具有通过外键 reportList_Id 链接到它们的标题“hello”，并且 xyc 具有以相同方式链接的标题“goodbye”。

基本上我现在需要将所有报告放入以下对象

```
public class ReportRoot : DbContext {
     public DbSet<ReportList> reportList {get;set;}
}

public class ReportList {
    public int Id {get;set;}
    public string status {get;set;}
    public List<ReportItem> {get;set;}
}

public class ReportItem {
    public int Id {get;set}
    public string title {get;set;}
    public List<Report> {get;set;}
}

public class Report {
    public int Id {get;set;}
    public string Lot {get;set;}
    public DateTime createdDate {get;set;}
} 
```

有我的课程的完整列表。我需要做的是取回包含多个reportItems 的reportList（这是带有标题的报告列表）。所以这些 ReportItems 将包含报告本身。所以我需要取回所有带有 max createdDate 的报告，就像我们对查询的第一部分所做的一样，但我需要将它们作为包含 ReportItems 的 ReportList 对象取回，以便多个报告具有它们的标题。

我需要上述格式的对象才能将 JSON 正确序列化和反序列化到我的对象中。

我想出了这个，它将它们分开并返回标题，但是我返回了不需要的记录，例如我更改标题的记录显示在两个标题下。

```
db.ReportLists.Select(rl => db.ReportItems
                      .Where(ri => ri.ReportListId == rl.Id)
                      .Select(ri => db.Reports
                              .Where(r => r.ReportItemId == ri.Id)
                              .GroupBy(r => r.seedLot)
                              .Select(g => g.OrderByDescending(x => x.createdDate).FirstOrDefault()))) 
```

谢谢，德曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:35:42.743

```
var recentDates = Reports
    .GroupBy(r=>r.SeedLot, r=>r.CreatedDate)
    .Select(rg=>rg.Max());

var result =
    from r in Reports
    join d in recentDates
        on r.createdDate equals d
    select r; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:41:28.160

我可能不明白，但基本上，您想要每个不同批次的最后创建日期？如果是，那么

```
db.Reports
  .GroupBy(r => r.Lot)
  .Select(g => g.OrderByDescending(x => x.createdDate).FirstOrDefault()); 
```

或像你一样（但我不确定这是最简单的方法）

```
var maxDates = Reports.GroupBy(r => r.Lot)
            .Select(x => x.Max(g => g.createdDate).ToList();

var result = db.Reports.Where (m => maxDates.Contains(m.createdDate)); 
```

**编辑**

您的示例不是那么清楚（为了清楚起见，我稍微更改了名称）。

首先使用代码，你应该有类似的东西（想法是一样的）

课堂报告

```
public class Report {
   public int Id {get;set;}
   public int Lot {get;set;}
   public Datetime CreatedDate {get;set;}
   public virtual Category Category {get;set;} //Navigation property
} 
```

一类类别

```
public class Category {
    public int Id {get;set;}
    public string Title {get;set;}
    public virtual IList<Report> ReportList {get;set;} //Navigation property
} 
```

最终成为“结果类”

```
public class ReportList {
    public string Title {get;set;}
    public List<Report> ReportList {get;set;}
} 
```

然后查询可能变成

```
db.Reports
  .GroupBy(r => r.Lot)
  .Select(g => g.OrderByDescending(x =x.createdDate).FirstOrDefault())
  .GroupBy(m => m.Category.Id)
  .Select(g => new  ReportList {
    Title = g.FirstOrDefault().Category.Title,
    ReportList = g.OrderBy(x => x.Lot)
  }); 
```

# php - 在 PHP 中使用 Facebook 应用程序中的表单

> ID：12303343
> 
> 赞同：1
> 
> 时间：2012-09-06T15:23:39.867
> 
> 标签：php, facebook, forms

我正在尝试在 facebook 应用程序中使用标准表单

表单代码如下所示

```
<form method="POST" action="/bristolhouse/">
<input type="hidden" name="kind" value="admin" />

{$admin_message} <br />

<input type="submit" value="Add" />
</form> 
```

我得到的错误是

API 错误代码：100 API 错误描述：无效参数错误消息：需要有效的重定向 URI。

当我的配置文件中没有正确的重定向 URI 值时，我已经看到了这个错误。我不确定是否需要包含 auth_tokens 或我应该如何包含 URI。我在网上找不到任何例子。

编辑：例如我要访问的链接是[https://www.facebook.com/dialog/oauth?client_id=282683341837527&redirect_uri=](https://www.facebook.com/dialog/oauth?client_id=282683341837527&redirect_uri=)

所以我到了正确的地方只是没有传递正确的参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:26:48.807

建议，尝试更改`action="/bristolhouse/"`为`action="bristolhouse"`

即删除斜线

# javascript - css/js：通过滚动固定位置

> ID：12303345
> 
> 赞同：0
> 
> 时间：2012-09-06T15:23:48.477
> 
> 标签：javascript, css, html, sticky

CSS(3) 是否允许我在页面上粘贴一个带有 position:absolute 的 DIV 并将其保留在浏览器窗口的中间——即使在滚动时也是如此？

目前，当用户向上/向下/向左/向右滚动时，我一次又一次地重新绘制和重新定位 DIV，但也许 css3 有更好的方法来实现同样的效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:25:15.900

这`position:fixed`就是为了。

# javascript - 错误：Ajax 未定义

> ID：12303347
> 
> 赞同：0
> 
> 时间：2012-09-06T15:23:51.493
> 
> 标签：javascript, ajax

我在脚本标签中使用以下代码在后台调用一个 URL。

```
var request = new Ajax.Request(logoffURL, {method : 'post'}); 
```

但我收到脚本错误`Ajax is undefined`。

我需要包含任何外部脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:40:19.550

该代码使用[Prototype](http://www.prototypejs.org/)。如果您想使用该代码，则需要将 Prototype 包含到您的页面中。例如，使用 Google 的 CDN：

```
<script src="//ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:31:34.430

这是一个很好的起点：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如示例所示，您可以执行以下操作：

```
$.ajax({
  url: logoffURL,
  context: document.body
}).done(function() { 
  alert("DONE");
}); 
```

我建议使用 CDN 来引用 jquery：

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:27:09.660

是的，您需要包含一些外部脚本（例如[jQuery](http://jquery.com/)）并学习如何在那里进行 ajax 调用。浏览器中没有 Ajax 对象，但是有 XMLHTTPRequest。但同样 - 你必须先学习如何使用它。例如 -[这](http://www.quirksmode.org/js/xmlhttp.html)是您如何使用 XMLHTTPRequest

# routing - 如何重定向到 MVC 4 中的登录视图

> ID：12303348
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:23:59.123
> 
> 标签：routing, asp.net-mvc-4, visual-studio-2012

我使用 VS 2012 创建了一个新的 mvc 4 项目。现在我运行它打开 Home/Index 的应用程序，因为它在 RouteConfig.cs 中设置为默认值。我想将帐户/登录作为我项目的第一页。我尝试通过将默认路由更改为 Account/Login 来做到这一点，但这对我不起作用。谁能让我知道除此之外我还有什么需要注意的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:54:22.910

修改默认路由与强制用户登录页面不同。

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

将上述内容更改为`controller="Account", action="Login"`确实会处理您在 IIS 中的站点上配置的任何指定主机头上的任何请求。但是，它不会重定向任何具有合法路由的用户。

为此，您确实需要使用`[Authorize]`@mreyeros 提到的属性。您可以在站点中的每个控制器上执行此操作，也可以创建一个新的基本控制器，您可以从项目中的其他控制器继承该控制器。

如果你真的只是想要一个重定向，你*可以*采用相同的方法（新的、属性化的基控制器继承）并创建你自己的 RedirectOnLandingAttribute，但我认为你想要实现的最好方法是利用框架已经拥有的东西提供。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:30:27.160

似乎您的整个应用程序都需要对用户进行身份验证，甚至是您的家庭控制器。您可以将 AuthorizeAttribute 添加到您的 HomeController 中，并且它应该要求访问它的用户应该首先登录。

```
[Authorize]
public class HomeController : Controller {
    ...
} 
```

# objective-c - 更改默认删除按钮 UITableViewCell

> ID：12303349
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:01.177
> 
> 标签：objective-c, cocoa-touch, uitableview

有什么办法可以更改 a 中的默认删除按钮`UITableViewCell`吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-06T16:37:46.673

```
- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return @"Custom Title";
} 
```

# iphone - 优化数据获取以提高加载时间

> ID：12303352
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:03.137
> 
> 标签：iphone, ios, uitableview

我是 iOS 开发的新手，我无法弄清楚如何在启动时有效地加载我的应用程序的数据。我的应用由一个 UITableView 组成，其中填充了歌曲列表。每个单元格显示有关歌曲的数据：当前用户评分（如果已评分）和平均值。用户评分（所有用户的平均评分）。我正在使用[Parse](https://parse.com/)进行后端数据存储。

在启动时，我的应用程序运行两个查询。第一个查询获取歌曲以填充表。然后计算平均值。用户评分（我的后端架构包括计数对象：rating1_count、rating2_count 等，当用户对歌曲评分时会增加）。它还将歌曲排序到单独的数据模型数组中：topTracksOfTheWeek、topTracksOfTheMonth、topTracksAllTime。

第二个查询获取当前用户的所有评分歌曲。然后，它将这个查询与第一个查询进行比较，以将用户评分数据嵌入到第一个查询中，从而形成应用程序的数据模型。

我想将第一个查询限制为 50 首歌曲以优化加载时间。但是，使用我当前的数据模型，我需要查询数据库中的所有歌曲来计算所有的平均值。用户评分，然后将歌曲排序到 topTracks 数组中。

我能想出的唯一解决方案是定期运行服务器端脚本来计算平均值。用户评分。我必须在我的数据库中为脚本排序的 topTracks 数组创建一个新类。在我的应用程序中，我会懒惰地对 topTracks 数组进行第三次查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:06:06.220

为什么不通过 a) 在添加新评分时存储和重新计算平均评分来最小化客户端和服务器端的操作 b) 获得排序和分页的歌曲，订单类型和页面大小可以支持不同的查询或相同的查询参数。

理想情况下，如果可以在服务器端进行计算，则不要在移动设备上进行任何计算。

# openid - 从谷歌应用同步用户并处理登录

> ID：12303355
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:16.350
> 
> 标签：openid, oauth-2.0, sync, google-apps

我已经四处寻找了一段时间，但我自己无法弄清楚这一点。实际上，我对 google api 文档感到非常困惑和迷失 :-)

我需要做两件事。

1.  从谷歌应用程序帐户同步用户并存储在我自己的数据库中。
2.  如果已经同步到数据库，让用户使用他们的 google 应用程序帐户登录。

我设法使用联系人 api 和 oauth2 使用 gdata python 库来完成这项工作。但问题是有很多需要在 google api 控制台（重定向 url，js 源）中配置才能使其工作。它只是不像最简单的方法那样接缝，因为用户/客户必须自己做这件事。其他网站如何解决谷歌应用登录？我也一直在看 openid 但我不确定（1）是否可以使用它来解决。

任何曾经这样做过并知道首选哪种方法或有任何建议的人？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:28:11.873

为什么需要预先同步用户列表？为什么不只允许用户登录，并根据哪些用户登录在您的数据库中动态创建用户？

**如果您确实需要同步用户：**

同步用户应该使用[Google Apps Provisioning API](https://developers.google.com/google-apps/provisioning/)，而不是 Contacts API。

您是在构建已安装的应用程序（在某处的服务器上），还是构建允许来自多个站点的域管理员访问并授予访问权限的 Web 应用程序？

如果它是一个已安装的应用程序（在您的服务器上）——那么只要您只需要只读访问权限即可将用户从 Google Apps 抓取到另一个系统，这相当简单。

**域管理员需要做的：**

1) 参观：

```
https://www.google.com/a/cpanel/(YOUR DOMAIN NAME)/ManageOauthClients 
```

授予与 (YOUR DOMAIN NAME) 相同的客户端名称对范围的访问权限：

```
https://apps-apis.google.com/a/feeds/user/#readonly 
```

2) 获取您的域使用者密钥/秘密，并确保它已启用。从这里抓取：

```
https://www.google.com/a/cpanel/(YOUR DOMAIN NAME)/SetupOAuth 
```

**开发者需要做的：**

然后，您需要使用 2-legged OAuth 1.0 和该消费者密钥和密码才能访问。[您可以使用OAuth 1.0 playground](https://googlecodesamples.com/oauth_playground/)进行尝试。在操场上，不要触摸第 1 和第 3 部分的任何东西。只需使用第 2 节选择 HMAC_SHA1 作为签名方法，并在这些字段中提供您的密钥（即域名）和密码。在第 #6 节中，指定您要请求的 URL，它将是：

```
https://apps-apis.google.com/a/feeds/(YOUR DOMAIN NAME)/user/2.0 
```

并点击执行。请注意，OAuth 1.0 Playground 并非托管在启用 SSL 的 URL 上——因此您可能希望在尝试时在测试域上执行此操作，并在测试后重置域密码。

如果给出适当的说明，步骤 #1 和 #2 对于域管理员来说应该很容易遵循。使其更容易的唯一方法是在[Google Apps Marketplace](https://www.google.com/enterprise/marketplace/)上托管应用程序。这为应用程序提供了一个密钥/秘密，安装应用程序并授予权限的管理员足以授予应用程序密钥/秘密访问安装域数据的访问权限。他们不必手动执行步骤#1 和#2。

**注意**：如果您正在构建的 Web 应用程序需要管理员授予对其域用户列表的访问权限，或者需要对配置 API 的写入权限，则域客户端/密钥将不起作用。您需要使用[其他授权机制](https://developers.google.com/google-apps/provisioning/auth)之一。您的应用程序需要在 API 控制台中设置客户端 ID/客户端密码——但您不需要让每个用户都这样做。

**让用户使用他们的应用程序帐户登录：**

使用 OAuth 2.0 登录（基于 OpenID Connect）： [https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

您必须在 API 控制台中设置应用程序的客户端信息，但这只是一次——不需要为每个域或类似的东西都设置。

# .net - Selenium：Firefox 在单击操作后不更新 IWebElement 状态

> ID：12303360
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:28.273
> 
> 标签：.net, selenium-webdriver

我遇到了一个问题，Selenium 在单击时没有刷新按钮对象的状态。当您单击它时，网页会将按钮的文本从“开”切换到“关”。但是，在 Firefox 中，如果您在单击后获取文本，则获取的是原始文本而不是当前文本。在 Chrome 中，它工作正常。还没试过IE。有没有办法（无需再次在页面上找到小部件）来刷新内部状态？或者，我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:00:07.867

很抱歉在这里浪费时间，但事实证明这是一个程序错误。:(

# delphi - 如何使用 delphi mongo-delphi-driver.GridFS.pas 从 MongoDB 下载文件？

> ID：12303362
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:43.997
> 
> 标签：delphi, mongodb

我正在试验 MongoDB 和 Delphi ( [mongo-delphi-driver](https://github.com/gerald-lindsly/mongo-delphi-driver) )

虽然我能够使用底部的代码上传文件，但我正在努力将其从 MongoDB 下载回我的文件系统。

是否有人已经有可以显示给我的代码片段？

谢谢大家

```
uses
  ...
  MongoDB, MongoBson, GridFS;

...

procedure UploadFile();
const
  LOCAL_FILE_NAME = 'C:\local_file_name'; 
  REMOTE_FILE_NAME = 'remote_file_name';
var
  GridFSStoreFileSuccess: Boolean;
  myGridFS: TGridFS;
begin
  myGridFS := TGridFS.Create(mongo, db);
  try
    GridFSStoreFileSuccess := myGridFS.storeFile(LOCAL_FILE_NAME, REMOTE_FILE_NAME);
    if GridFSStoreFileSuccess then
      ShowMessage('File upload was successful!')
    else
      ShowMessage('File upload was *NOT* successful!');
  finally
    myGridFS.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-04T11:54:53.840

目前我也尝试将 mongodb 与 delphi 一起使用。这是满足您需求的片段

```
var
  GridFSTest : TGridFS;
  p : Pointer;
  stream : TMemoryStream;
  filename : string;
  f : TGridfile;
begin  
  // Create and link TGridFS to 'test' db
  GridFSTest := TGridFS.Create(Mongo,'test');
  stream := TMemoryStream.Create;

  // Find the image file... 
  f := GridFSTest.find('topo gigio.jpg');

  p := AllocMem(f.getLength);
  f.read(p,f.getLength);

  stream.Write(p^,f.getLength);
  stream.Position := 0;

  ClientDataSet1.Close;
  ClientDataSet1.CreateDataSet;
  ClientDataSet1.Insert;
  TBlobField(ClientDataSet1.FieldByName('immagine')).LoadFromStream(stream);
  ClientDataSet1.Post;

//  stream.SaveToFile('c:\a.jpg');

  stream.Free;
  FreeMem(p);
  GridFS.Free;
end; 
```

# security - yii 模型 save() 方法安全吗？

> ID：12303370
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:56.163
> 
> 标签：security, yii, sql-injection

我有一个模型`User` ，假设我从该模型创建了一个新对象

```
$x = new User; 
```

并从 _POST var 设置其属性

```
$x->lastName = $_POST["last_name"]; 
```

如果我做了

```
$x->save(); 
```

它会受到 SQL 注入的保护吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:58:55.197

当您首先执行`$model->save()`模型的验证时，您的变量将根据模型中定义的验证规则进行验证，如果有错误，则模型将不会被保存，值不会进入您的数据库，因此没有注射。

验证规则在模型的规则数组中定义，已经有许多内置的验证类，这是一篇[很好的 wiki 文章](http://www.yiiframework.com/wiki/56/ "http://www.yiiframework.com/wiki/56/")，提供了验证器类的入门知识。

您还可以定义[自己的验证器](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule "http://www.yiiframework.com/wiki/168/create-your-own-validation-rule")。

因此，只要您正在*清理*（或验证）您的输入，您就可以开始了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:11:38.873

Yii 使用 PDO 进行连接，所以是的，它不会受到 SQL 注入的影响。

但它对 XSS 并不安全。[http://www.yiiframework.com/doc/guide/1.1/en/topics.security](http://www.yiiframework.com/doc/guide/1.1/en/topics.security) http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/#hh11

# perforce - 在 perforce 中查看修订之间已删除的文件

> ID：12303371
> 
> 赞同：0
> 
> 时间：2012-09-06T15:24:58.737
> 
> 标签：perforce

谁能指出我如何查看在 Perforce 的修订之间已删除的文件？我是一个新用户，最新版本由于缺少必须在上一个版本中遗漏的文件而导致一些构建失败。我需要一种简单的方法来识别这些文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:16:40.910

最简单的方法是使用 P4V 的文件夹差异。您可以从命令行运行`p4 diff2`并查找文件存在于一个修订版中但不存在于另一个修订版中的情况。

# shell - 意外标记附近的语法错误`

> ID：12303377
> 
> 赞同：1
> 
> 时间：2012-09-06T15:25:06.473
> 
> 标签：shell, syntax-error

以下脚本旨在对目录中的所有文件运行程序“senna”，并将每个文件的输出（保留输入文件名）写入另一个目录

```
for file in ./Data/in/*;
do
    ./senna -iobtags -usrtokens -posvbs -srl < $file > ./Data/out/$file    
done 
```

在尝试执行脚本时，出现以下错误。

```
-bash-4.0$ sh run.s
'un.s: line 1: syntax error near unexpected token `
'un.s: line 1: `for file in ./Data/in/*; 
```

该脚本的代码行与上面完全相同，并且没有`。也许它暗示了别的东西。帮助解决错误将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:38:45.427

脚本中的行尾是错误的。通过它`dos2unix`以消除 CR。

# yii - yii-用户管理配置文件 404 错误

> ID：12303379
> 
> 赞同：0
> 
> 时间：2012-09-06T15:25:11.840
> 
> 标签：yii, yii-extensions

我终于进入了 yii 用户管理的管理区域，但现在我点击了个人资料链接

profile/profile/view/id/1 并且出现 404 错误

再次感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:25:52.050

将它放在 config/main.php 中解决了这个问题。

```
'modules'=>array(
    'registration' => array(),
    'avatar' => array(),
    'role' => array(),
    'messages' => array(),
    'usergroup' => array(),
    'membership' => array(),
    'profile' => array(),
    'friendship' => array(),
    'user' => array()
     ), 
```

这会激活模块部分。（我是 yii 的新手）

# reportviewer2008 - ms reportviewer 不显示主机服务器上的数据

> ID：12303381
> 
> 赞同：1
> 
> 时间：2012-09-06T15:25:19.587
> 
> 标签：reportviewer2008

我创建了一个 Asp.net 项目，我使用 MS Reportviewer 来报告我的项目。当我通过在我的主项目中创建新应用程序将这个项目放在我的 IIS 中时。在其中我的报告显示正确但是当我通过在我的主项目下创建虚拟目录将此项目放在共享主机上时，其中没有显示数据并且出现以下错误。

```
**Not Found**

The requested document was not found on this server. 
```

在我的网页中，我调用报告如下所示

```
<div>

<rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana"

Font-Size="8pt" Height="575px" Width="100%">

<localreport reportpath="Reports\rptChartofAccount.rdlc">

<datasources>

<rsweb:ReportDataSource DataSourceId="ObjectDataSource1"     Name="trialBalnace_vwBalanceSheet" />

</datasources>

</localreport>

</rsweb:ReportViewer>

<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
SelectMethod="GetData" TypeName="AmsWeb.trialBalnaceTableAdapters.vwBalanceSheetTableAdapter" >

</asp:ObjectDataSource>

</div> 
```

在我的代码后面

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    ObjectDataSource1.SelectParameters.Add("brid", Session("BrId"))

    Dim Param(0) As ReportParameter

    Param(0) =New ReportParameter("BrName", Session("BrName").ToString)

    ReportViewer1.LocalReport.SetParameters(Param)

    ReportViewer1.LocalReport.Refresh()

 End Sub 
```

对于 ms reportviewer web.config 文件如下

```
<httpHandlers>
<remove path="*.asmx" verb="*"/>

----------

<add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false"/>
</httpHandlers>
<httpModules> 
```

和装配添加如下

```
<assemblies>
<clear/>
<add assembly="*"/>

<add assembly="Microsoft.ReportViewer.WinForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>

<add assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
<add assembly="Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
<add assembly="System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>

</assemblies>

<buildProviders>
<add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
</buildProviders> 
```

# c# - 在绑定的 ObservableCollection 中绑定列表

> ID：12303383
> 
> 赞同：0
> 
> 时间：2012-09-06T15:25:20.447
> 
> 标签：c#, wpf, binding

在我的 WPF 应用程序中，我有一个 Observablecollection“CollOfPersons”的 Persons，其中每个 Person 对象都有一个类型为“NotesOnPerson”的属性

```
List<Notes> 
```

（在其他属性中）。现在我将“CollOfPersons”绑定到代码中的列表框 lb

```
lb.ItemsSource = CollOfPersons; 
```

现在我已经建立了一个如何显示一个人的模板，即我将每个人包装在一个“扩展器”中，并在 Expander.header 中显示基本属性（例如，姓名、年龄），这很好用，例如，

```
<Expander.Header>
  <StackPanel Orientation="Horizontal">
    ...
    <TextBlock Text="{Binding Path=Name}"/>
    ...
  </StackPanel>
</Expander.Header> 
```

但是，现在我想将 NotesOnPerson 笔记列表绑定到 Expander.Content。但由于这又是一个大小不一的列表，我不知道该怎么做。与上面相同的策略不起作用，因为我不知道扩展器的名称（因为我知道所有东西都在其中的大列表框的名称 'lb'）。就像是

```
<Expander.Content>
   <ListBox ItemTemplate="{StaticResource NoteTemplate}"
            ItemsSource="{Binding Path=NotesOnPerson}"/>
</Expander.Content> 
```

似乎不起作用。我似乎对代码和 XAML 绑定感到困惑。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:27:56.647

这是你要找的吗？

```
<Expander.Content>
   <ListBox ItemTemplate="{StaticResource NoteTemplate}"
            ItemsSource="{Binding NotesOnPerson}"/>
</Expander.Content> 
```

我不熟悉`Expander`，但由于`NotesOnPerson`它（大概）是 的`Person`而不是 的属性`Name`，因此您应该使用这种语法。（ the`Path=`是可选的，因为像这样放入它是另一种声明 的方式`Path`）

# java - Java：如何在字符串后返回单个字符

> ID：12303390
> 
> 赞同：-2
> 
> 时间：2012-09-06T15:25:35.650
> 
> 标签：java, string, search

我有一个文件目录，看起来像

```
C:\projects\lab3\test\test.java 
```

或者

```
C:\projects\assignment3\test\test.java 
```

但是“lab3”或“assignment3”可以出现在目录的任何位置，不是设置目录

我想要检查目录是否包含“lab”或“assignment”并获取后面的数字。在这种情况下，“3”

这就是我到目前为止所拥有的

```
 if(directory.toLowerCase().contains("lab")){

 } else if (directory.toLowerCase().contains("assignment")){

 } 
```

但我不知道如何在单词之后立即检查字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:32:01.730

你可以使用正则表达式：

```
Pattern pattern = Pattern.compile(".*(?:lab|assignment)([0-9]).*", Pattern.CASE_INSENSITIVE);
String substr = pattern.matcher(directory).replaceAll("$1"); 
```

这会在字符串中最后一次出现“lab”或“assignment”之后获取任何一位数。

为此，您需要导入以下类：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:29:10.313

您可以使用[String#substring](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)提取“实验室”之后的部分，然后使用[Integer#parseInt](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)检查它是否为整数并进行转换。

```
String partAfterLab = filename.substring(4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:35:49.673

这可以满足您的要求：

```
String directory = "C:\\projects\\lab3\\test\\test.java";
if(directory.toLowerCase().contains("lab")){
 System.out.println(directory.substring(directory.indexOf("lab")+3,   directory.indexOf("lab")+4));

         } 
```

+3 参数是因为“lab”字符串的大小。你可以通过这种方式做得更好：

```
String directory = "C:\\projects\\lab3\\test\\test.java";
String myWord = "lab";
if(directory.toLowerCase().contains(myWord)){
  System.out.println(directory.substring(directory.indexOf(myWord)+ myWord.length(), directory.indexOf(myWord)+ myWord.length()+1));

         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:33:05.287

您可以使用正则表达式，例如`C:\\\\projects\\\\(lab|assignment)([0-9]+)\\\\.*`在“lab”或“assignment”之后提取数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T15:35:37.740

使用正则表达式

```
public static void main(final String[] args) {
    final String dir = "C:\\projects\\lab3\\test\\test.java";

    final Pattern pattern = Pattern.compile(".*?(lab)(\\d+).*");
    final Matcher matcher = pattern.matcher(dir);
    if (matcher.find()) {
        System.out.println(matcher.group(1)); //contains lab
        System.out.println(matcher.group(2)); //contains number
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T15:39:37.837

这是另一种方法：

```
Integer.valueOf(s.replaceFirst(".*(assignment|lab)([0-9]+).*", "$2")); 
```

例如：

```
String assignment = "C:\\projects\\assignment3\\test\\test.java";
String lab = "C:\\projects\\lab3\\test\\test.java";
String none = "C:\\projects\\test\\test.java";

try {
    int assignmentNumber = Integer.valueOf(assignment.replaceFirst(".*(assignment|lab)([0-9]+).*", "$2"));
    System.out.println(assignmentNumber);
} catch (NumberFormatException e) {
    System.out.println("Can't find neither assignment nor lab");
}

try {
    int labNumber = Integer.valueOf(lab.replaceFirst(".*(assignment|lab)([0-9]+).*", "$2"));
    System.out.println(labNumber);
} catch (NumberFormatException e) {
    System.out.println("Can't find neither assignment nor lab");
}

try {
    int noneNumber = Integer.valueOf(none.replaceFirst(".*(assignment|lab)([0-9]+).*", "$2"));
    System.out.println(noneNumber);
} catch (NumberFormatException e) {
    System.out.println("Can't find neither assignment nor lab");
} 
```

印刷：

```
3
3
Can't find neither assignment nor lab 
```

# .net - 如何从 httpListenerRequest 解析文件数据

> ID：12303395
> 
> 赞同：2
> 
> 时间：2012-09-06T15:25:49.723
> 
> 标签：.net, vb.net, bytearray, httplistener

我正在尝试解析 httpListenerRequest 的输入流，并且遇到了 multipart/form-data 的严重问题。

这是一个示例原始帖子：

```
POST http://removed/ HTTP/1.1
Content-Type: multipart/form-data; boundary=-------------------------8cf5a569f9a4d4a
Host: removed
Content-Length: 15600
Expect: 100-continue
Proxy-Connection: Keep-Alive

---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="realname"

james
---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="username"

jrb1978
---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="password"

password
---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="public"

0
---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="group"

0
---------------------------8cf5a569f9a4d4a
Content-Disposition: form-data; name="avatar"; filename="Untitled.png"
Content-Type: image/png

?PNG
//jibberish filedata here
---------------------------8cf5a569f9a4d4a 
```

现在我到底如何获得该图像数据？我可以使用流阅读器将输入流读取为字符串以提取第一个 5 个表单变量，但我不知道如何提取图像数据，因为将其转换为字符串会损坏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:36:42.963

检查[http://msdn.microsoft.com/en-us/library/6196h3wt.aspx](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)以确保您的字符串解码良好。

然后使用此函数将包含图像的字符串部分转换为字节数组：

```
 Public Shared Function StrToByteArray(str As String) As Byte()
    Dim encoding As New System.Text.UTF8Encoding()
    Return encoding.GetBytes(str)
 End Function 'StrToByteArray 
```

然后使用此函数将字节数组转换为图像：

```
 Private Function BytesToImage(ByVal ImageBytes() As Byte) As Image
    Dim imgNew As Image
    Dim memImage As New System.IO.MemoryStream(ImageBytes)
    imgNew = Image.FromStream(memImage)
    Return imgNew
 End Function 
```

# shell - GNU 并行处理

> ID：12303396
> 
> 赞同：2
> 
> 时间：2012-09-06T15:25:53.603
> 
> 标签：shell, wireshark, tcpdump, gnu-parallel

我有以下要运行的脚本`GNU parallel`，它是一个需要运行`n`时间的 for 循环。我怎样才能做到这一点`GNU parallel`？

```
SHARK=tshark

# Create file list
FILELIST=`ls $1`
TEMPDIR=/tmp/foobar
mkdir $TEMPDIR
i=1
for I in $FILELIST; do
    echo "$i $I $2"
    $SHARK -r $I -w $TEMPDIR/~$I-$i -R "$2" &>/dev/null
    i=`echo $i+1|bc`
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T15:24:11.800

有很多方法可以做到这一点，无论是使用子外壳还是子进程，参见例如

*   [并行运行 shell 脚本](https://stackoverflow.com/questions/5547787/running-shell-script-in-parallel)

或通过安装旨在执行此操作的简洁实用程序，例如：

*   [|P|P|S|S| - （分布式）并行处理Shell脚本](http://code.google.com/p/ppss/)
*   [`GNU Parallel`](http://www.gnu.org/software/parallel/)

我会尝试先用子外壳完成它，然后如果您仍然需要更好的功率，请尝试其他的。

# asp.net - 为什么 maskedEditExtender 不替换掩码？

> ID：12303399
> 
> 赞同：0
> 
> 时间：2012-09-06T15:25:58.317
> 
> 标签：asp.net, input, mask, maskededitextender

我有一个简单的时间框，它看起来应该可以工作，但有几个问题：

1.  光标跳到输入的末尾
2.  用户键入时，掩码“_”不会被替换

    ajaxToolkit:MaskedEditExtender ID="meeStartTime" runat="server" TargetControlID="txtStartTime" Mask="99:99" MessageValidatorTip="true" OnFocusCssClass="MaskedEditFocus" OnInvalidCssClass="MaskedEditError" MaskType="Time" DisplayMoney="None" AcceptNegative="None" AcceptAMPM="true" ErrorTooltipEnabled="True"

    ajaxToolkit:MaskedEditValidator ID="mevStartTime" runat="server" ControlExtender="meeStartTime" ControlToValidate="txtStartTime" EmptyValueMessage="输入开始时间" InvalidValueMessage="开始时间无效" Display="动态" TooltipMessage="输入开始时间时间"EmptyValueBlurredText=" *"InvalidValueBlurredMessage="* "IsValidEmpty="false"

我在代码中看不到任何错误，但我可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:20.630

向 MaskedEditExtender 标签添加另外两个属性：

```
InputDirection="LeftToRight" 
ClearMaskOnLostFocus="True" 
```

# android - Phonegap android 存储大数据的最佳存储

> ID：12303403
> 
> 赞同：3
> 
> 时间：2012-09-06T15:26:09.447
> 
> 标签：android, cordova

我正在创建一个需要存储大量文本数据的应用程序。哪个是存储它的最佳机制？从科尔多瓦文档中，我了解到可能的方法是-

1.  sqllite 数据库
2.  本地存储

请让我知道是否有其他方法可用。这对我的应用程序来说是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:47:35.473

正如你所说，科尔多瓦[在这里提供存储机制](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)

但是我不知道它对你有多大的效果，因为你需要存储大量的文本数据。取决于您的数据大小。

我可以建议的另一个更好的选择是使用[File API](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File) ，您可以使用它读/写文本文件。希望这会有所帮助。

# python - 将时间段字符串转换为值/单位对

> ID：12303405
> 
> 赞同：2
> 
> 时间：2012-09-06T15:26:13.200
> 
> 标签：python, regex

我需要解析代表时间段的字符串的内容。字符串的格式为值/单位，例如：1s、60min、24h。我会将实际值（一个 int）和单位（一个 str）分隔为单独的变量。

目前我这样做：

```
def validate_time(time):
    binsize = time.strip()
    unit = re.sub('[0-9]','',binsize)
    if unit not in ['s','m','min','h','l']:
        print "Error: unit {0} is not valid".format(unit)
        sys.exit(2)
    tmp = re.sub('[^0-9]','',binsize)
    try:
        value = int(tmp)
    except ValueError:
        print "Error: {0} is not valid".format(time) 
        sys.exit(2)
    return value,unit 
```

但是，它并不理想，因为像 1m0 这样的东西也（错误地）被验证（`value=10`，`unit=m`）。

验证/解析此输入的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:15:28.127

只需用一个正则表达式解析整行：

```
_timeunit = re.compile(r'^(?P<value>\d+)(?P<unit>s|m|min|h|l)$')
def validate_time(time):
    match = _timeunit.match(time.strip())
    if match is None:
        print "Error: {0} is not valid".format(time)
        sys.exit(2)

    return int(match.group('value')), match.group('unit') 
```

演示（将 sys.exit 暂时替换为 return）：

```
>>> validate_time('10l')
(10, 'l')
>>> validate_time('10l0')
Error: 10l0 is not valid 
```

正则表达式匹配开头的数字（由`^`插入符号匹配），然后是有限集合中的单位`s`, `m`,或`min`，但前提是它们位于行尾，由美元符号匹配。`h``l``$`

顺便说一句，在验证方法中引发异常并在调用该方法的地方处理该异常会更加pythonic。这使它更具可重用性：

```
_timeunit = re.compile(r'^(?P<value>\d+)(?P<unit>s|m|min|h|l)$')
def validate_time(time):
    match = _timeunit.match(time.strip())
    if match is None:
        raise ValueError('{0} is not a valid timespan'.format(time))    
    return int(match.group('value')), match.group('unit')

try:
    validate_time(foobar)
except ValueError, e:
    print 'Error: {0}'.format(e.args[0])
    sys.exit(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:36:00.503

为什么不一次性解析它：

```
m = re.match(r'(?P<value>\d+)\s*(?P<unit>\w+)',time.strip())
#              #^number
#                            #^spaces (optional) 
#                               #^non-number
if not m:
   pass #error

if m.group(0) != time.strip():
   pass #error -- leftover stuff at the end.  This will catch '1m0'

unit = m.group('unit')
value = int(m.group('value')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:10:41.353

试试这个：

```
#!/usr/bin/env python

import re

time = '1m'
try:
  m = re.match(r'^(?P<value>\d+)(?P<middle>.*)(?P<unit>(m|min|s|h|l))$',
    time.strip())
  value = m.group('value')
  unit = m.group('unit')
  middle = m.group('middle')
  if middle :
    # Reuse the exception raised if an expected group is not found
    raise AttributeError
  print value, unit
except AttributeError:
  print "Wrong format" 
```

它确保时间以数字开始，以有效单位结束，并在中间捕获任何内容。

# asp.net-mvc-4 - 使用 UnobtrusiveJavaScript 时从 jquery 验证中获取消息

> ID：12303406
> 
> 赞同：0
> 
> 时间：2012-09-06T15:26:14.487
> 
> 标签：asp.net-mvc-4, unobtrusive-javascript, jquery-validate

嘿，StackOverflow 爱好者。

我正在尝试将我的旧站点更新为最新版本的 Asp.net MVC4。它以前在 MVC2 上，在 MVC2 上，它允许我将我的 jquery 和客户端的东西与任何后端的东西分开。但我猜想使用 MVC4，他们希望您将很多验证内容直接绑定到您的模型等等。

但是我有一个以前运行良好的客户端 jquery 验证脚本，我想知道，我怎样才能让它再次工作。具体来说，如果用户输入超过 4000 个字符，我有一个不会被验证的字段。否则就不需要了。这是以前在 MVC2 中工作的客户端代码......

```
Comment: {
    required: function (element) {
    return $(element).val().length > 4000;
    },
    maxlength: 4000
} 
```

以及如果未通过验证将显示的消息...

```
messages: {
                ...
                Comment: 'Why dont you stop attempting to put in more than 4000 characters?  Thanks...'
            } 
```

如何使用 MVC 4 做到这一点？为了在另一个字段中显示任何内容，我注意到我需要在模型中的字段上放置一个 required ......

```
 [Required(ErrorMessage = "Please select an Admit Date")]
    public DateTime? AdmitDate { get; set; } 
```

有没有办法编写一个需求函数，以便只在某些情况下需要它？如果您知道我的意思，我宁愿将其保留在客户端以将我的担忧分开。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:17:38.667

您可以使用`[Required]`和`[StringLength]`来限制您的评论上的输入。

```
[Required(ErrorMessage = "Please fill in a comment")]
[StringLength(4000, ErrorMessage = "Why dont you stop attempting to put in more than 4000 characters?  Thanks...")]
public string Comment { get; set; } 
```

默认数据注释不涵盖条件要求的约束。处理“复杂”验证的默认方式是`IValidatableObject`在模型上实现接口。

但是，由于您正在寻找客户端解决方案，我们可以查看可能为您解决此问题的其他框架。例如，[MVC Foolproof Validation](http://foolproof.codeplex.com/)支持`[RequiredIf]`也适用于客户端的属性。

# video - 录制视频播放的硒测试（ffmpeg）

> ID：12303409
> 
> 赞同：0
> 
> 时间：2012-09-06T15:26:26.770
> 
> 标签：video, selenium, ffmpeg, webdriver

我正在尝试使用 Java/Ubuntu 和 ffmpeg/x11grab 实现播放录制测试。我们经常在一个盒子上启动多个测试（通过 grid2），并且想知道是否有 ffmpeg/x11grab 记录每个窗口而不是整个桌面，以防窗口重叠。

记录硒测试以便回放它们的其他选项是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:36:28.523

您始终可以在图形机器上运行测试并记录输出。如果您在 x 服务器上运行测试，请尝试检查一下。

[http://www.jedi.be/blog/2010/08/30/capturing-the-screen-of-your-virtual-machines-using-x-vnc-rdp-or-native/](http://www.jedi.be/blog/2010/08/30/capturing-the-screen-of-your-virtual-machines-using-x-vnc-rdp-or-native/)

# seo - 如果我的最后一段 URL 重复，我会受到处罚吗？

> ID：12303413
> 
> 赞同：0
> 
> 时间：2012-09-06T15:26:34.150
> 
> 标签：seo

我已经使系统与这个站点非常相似，其中`site.com/item/{id}/{name}`. 现在我想知道我是否`{name}`会像这个例子一样重复自己

```
site.com/item/1/something
site.com/item/2/something
site.com/item/3/something 
```

我会因此被谷歌机器人禁止还是完全正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:09:43.430

ID 不应该指定数据库中的唯一行吗？在这种情况下，可能存在`name`与其他实例相似但可能从未重复的实例。

但是，如果它是重复的，那么是的，这将是重复的内容，对您的网站不利。您不会被“*禁止使用 Google 机器人*”，但这些页面在 SERP 中的得分会很低。将其视为过滤器，而不是惩罚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:06:30.147

如果我使用`/{id}/{name}`这个名字会重复，我会受到惩罚。

我所做的是`/{id}-{name}`。这样它就永远不会重复自己，我将能够找到它。

# c# - 将可点击的超链接添加到没有新段落的 RichTextBox

> ID：12303414
> 
> 赞同：2
> 
> 时间：2012-09-06T15:26:38.847
> 
> 标签：c#, wpf, richtextbox

是否可以在不创建新段落的情况下动态添加超链接，例如在这个问题[Dynamicly added hyperlinks to a RichTextBox 中](https://stackoverflow.com/questions/9279061/dynamically-adding-hyperlinks-to-a-richtextbox)？

我想要类似“请访问[http://www.google.com](http://www.google.com)。谢谢！” 不是

“请拜访

[http://www.google.com](http://www.google.com)

。谢谢！”。

RichTextBox 也必须是只读的，用户不能输入。它有点像日志，我只需要定期添加一些有时包含 URL 的文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T18:18:53.543

好的，看起来这就是我需要的（感谢@Blam 和@PaulN[将超链接动态添加到 RichTextBox](https://stackoverflow.com/questions/9279061/dynamically-adding-hyperlinks-to-a-richtextbox)）：

```
 public MainWindow()
    {
        InitializeComponent();

        rtb.IsDocumentEnabled = true;
        rtb.Document.Blocks.FirstBlock.Margin = new Thickness(0);
    }

    private void AddHyperlinkText(string linkURL, string linkName, 
              string TextBeforeLink, string TextAfterLink)
    {
        Paragraph para = new Paragraph();
        para.Margin = new Thickness(0); // remove indent between paragraphs

        Hyperlink link = new Hyperlink();
        link.IsEnabled = true;
        link.Inlines.Add(linkName);
        link.NavigateUri = new Uri(linkURL);
        link.RequestNavigate += (sender, args) => Process.Start(args.Uri.ToString()); 

        para.Inlines.Add(new Run("[" + DateTime.Now.ToLongTimeString() + "]: "));
        para.Inlines.Add(TextBeforeLink);
        para.Inlines.Add(link);
        para.Inlines.Add(new Run(TextAfterLink)); 

        rtb.Document.Blocks.Add(para);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {   
        AddHyperlinkText("http://www.google.com", "http://www.google.com", 
               "Please visit ", ". Thank you! Some veeeeeeeeeery looooooong text.");
    } 
```

![在此处输入图像描述](../Images/368f5e4eeb4351838087915b45c49a8a.png)

但是还有一个小问题：也许有人知道如何删除上图红线标记的开头的空白？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:42:31.807

至于使 RichTextBox 或 TextBox 只读

[TextBoxBase.IsReadOnly 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.isreadonly.aspx)

要添加文本，您可以使用运行

```
 FlowDocument doc = new FlowDocument();
    rtb.Document = doc;
    rtb.IsReadOnly = true;

    Paragraph para = new Paragraph();
    doc.Blocks.Add(para);

    Hyperlink link = new Hyperlink();
    link.IsEnabled = true;
    link.Inlines.Add("Hyperlink");
    link.NavigateUri = new Uri("http://www.google.co.uk");
    para.Inlines.Add(link);
    Run run = new Run();
    run.Text = " next words";
    para.Inlines.Add(run); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-11T01:11:26.440

注意：通过执行以下操作从 RichText 中删除空白行：

```
MyRichTextBox.Document.Blocks.Clear(); 
```

添加段落运行时在 RichTextBox 的开头移动空格

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:48:01.130

你可以这样做

```
 <ContentControl>
    <Span>
        <Run Text="Please visit"/>
        <Hyperlink NavigateUri="http://google.com">
            <Run Text="google"/>
        </Hyperlink>
        <Run Text=". Thank you!"/>
    </Span>
</ContentControl> 
```

如果您在 navigationFrame 中，您将免费获得超链接功能

或者...

```
<StackPanel Orientation="Horizontal">
<TextBlock Text="Please visit"/>
<Button Style="linkButton" Content="Google" Command/Click="GotoGoogle"/>
<TextBlock Text=". Thank you!"/>
</StackPanel> 
```

# javascript - 如何选择给定类的前一个元素

> ID：12303417
> 
> 赞同：1
> 
> 时间：2012-09-06T15:26:42.247
> 
> 标签：javascript, jquery

我有一个 UL 清单：

```
<ul>
  <li data-sel='foo'></li>
  <li></li>
  <li data-sel='foo'></li>
  <li class='selected'></li>
  <li data-sel='foo'></li>
 </ul> 
```

我可以使用选择器访问`li.selected`没有属性的前一个元素`data-sel=foo``:not`

```
var element = $('.selected').prev("li:not([data-sel='foo'])"); 
```

但是我怎样才能访问`li.selected`who has attribute的第一个先前元素`data-sel=foo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:28:08.220

这应该可以正常工作：

```
var element = $('.selected').prev("li[data-sel='foo']"); 
```

[演示](http://jsfiddle.net/amaan/pxhRv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:28:06.117

你试过`:has`选择器吗？[http://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:32:15.430

这就是`prev()`工作原理，您可以`prevAll()`像这样使用：

[jsFiddle](http://jsfiddle.net/5Fnjh/)

```
$('.selected').prevAll('li').not('[data-sel="foo"]').first(); 
```

或者

```
$('.selected').prevAll('li:not([data-sel="foo"]):first'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:37:49.650

这有效：

```
var element = $('.selected').prevAll("li[data-sel='foo']")[0]; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rKVvk/)**

# java - Spring MVC 中的 Java 类对象

> ID：12303418
> 
> 赞同：0
> 
> 时间：2012-09-06T15:26:44.853
> 
> 标签：java, spring, reflection, spring-mvc

好的，我正在使用 spring MVC 3.0，我正在添加一个日志实体，如下所示

```
@RooJavaBean
@RooToString
@RooEntity
public class Log {

    @NotNull
    @Size(max = 1000)
    private String logMessage;

    @NotNull
    @ManyToOne
    private Staff staff;

    @NotNull
    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(style = "M-")
    private Calendar dateAndTime;

    @NotNull
    private Class owningClass;
} 
```

我正在查看本[指南](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)以寻求帮助。问题是我如何使用类对象，比如说学生，找到一个 id 为 10 或 20 的特定学生，......我在想这样的事情

```
Class c = Class.forName("My.Domain.Student"); //gives the bsae class 
```

这是我不知道该怎么做的地方。我想要类似的东西

```
Student student = c.find(10); 
```

我怎样才能完成这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:01:35.927

我相信（我目前手头没有 Roo 项目，我正在使用 Manning Spring Roo In Action 书籍作为参考）您可以检查 Spring ROO ActiveRecord 模式实施类的内容，并查看 ID 的位置是通过实体管理器查找：

```
public static Course Course.findCourse(Long id) {
  if (id == null) return null;
  return entityManager().find(Course.class, id);
} 
```

如您所见，您可以将您喜欢的任何实体类引用传递给实体管理器，以根据类和 id 进行查找。

所以你基本上需要获取对 EntityManager 的引用并调用它的 find() 方法。

# python - 使用太多 RAM 在 python 中处理 XML 文件

> ID：12303423
> 
> 赞同：2
> 
> 时间：2012-09-06T15:26:49.620
> 
> 标签：python, xml, performance, csv

我有一个大约 30MB 的 XML 文件，里面有大约 300000 个元素。

我使用下面的代码来处理这个文件。

```
xmldoc=xml.dom.minidom.parse("badges.xml")

csv_out=open("badge.csv","w")

for badge in xmldoc.getElementsByTagName("row"):
    some processing here
    csv_out.write(line) 
```

该文件只有 30MB，但是当我在我的 MBP（10.7，8G RAM）上运行这个脚本时，它使用了将近 3GB 的内存。为什么这么简单的脚本和这么小的文件会占用这么多内存？

此致，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:31:49.657

您需要切换到迭代解析器，该解析器以块的形式处理 XML 语句，从而允许您清理中间的内存。DOM 解析器一次性将整个文档加载到内存中。

标准库为您提供了[SAX 解析器](http://docs.python.org/library/xml.sax.html)和[ElementTree.iterparse](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)选项。

快速迭代解析示例：

```
from xml.etree.ElementTree import iterparse

with open("badge.csv","w") as csvout:
    for event, elem in iterparse("badges.xml"):
        if event == 'end' and elem.tag == 'row': # Complete row tag
            # some processing here
            csv_out.write(line)
            elem.clear() 
```

注意`.clear()`通话；释放元素并将其从内存中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:35:14.070

DOM 类型的 XML 解析器会使用大量内存，因为它们会加载整个文档。对于 30MB 的文件来说，3GB 似乎有点过多，所以可能还有其他事情发生。

但是，您可能需要考虑使用 SAX 样式的 XML 解析器（ Python 中的[xml.sax](http://docs.python.org/library/xml.sax.html)）。在这种类型的解析器中，您的代码在解析器处理每个元素（标签、文本等）时通过回调来查看它。SAX 风格的解析器不保留文档结构；实际上，只考虑一个 XML 元素。因此，它快速且节省内存。如果您的解析需求很复杂，使用起来可能会很痛苦，但您的解析需求似乎非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:49:40.707

我在非常大的 xml 文件上使用 lxml 并且从来没有任何问题。

请参阅此 stackoverflow 文章以获取安装帮助，因为我必须在我的 ubuntu 系统上执行此操作：

[pip安装lxml错误](https://stackoverflow.com/questions/5178416/pip-install-lxml-error)

# java - oracle sql 加载器无法从管道读取

> ID：12303431
> 
> 赞同：1
> 
> 时间：2012-09-06T15:27:04.180
> 
> 标签：java, linux, oracle, pipe, sql-loader

我使用命名管道和**Oracle SQL*Loader**将大约 2000 万行加载到数据库中。

**管道的来源来自使用简单FileOutputStream**写入管道的 Java 应用程序。

可以观察到，Oracle SQL*Loader 需要在 Java 应用程序上等待很长时间才能产生足够的数据进行加载。

等待很好。但是，Oracle SQL*Loader 在加载大约 100 万行后总是存在，输出如下：

```
SQL*Loader-501: Unable to read file (upipe.dat)
SQL*Loader-560: error reading file
SQL*Loader-2026: the load was aborted because SQL Loader cannot continue. 
```

在这种情况下，Java 将抛出带有信息的 IOException：

```
Exception in thread "main" java.io.IOException: Broken pipe
at java.io.FileOutputStream.writeBytes(Native Method)
at java.io.FileOutputStream.write(FileOutputStream.java:284) 
```

它在Linux环境下运行。知道为什么会发生这种情况吗？

谢谢。

# mysql - 如何在 mysql UNION 查询中编写此 GROUP BY

> ID：12303432
> 
> 赞同：0
> 
> 时间：2012-09-06T15:27:03.973
> 
> 标签：mysql, group-by, union

试图将两个查询的结果组合在一起。当我运行此查询时：

```
SELECT pr_id,
        pr_sbtcode,
        pr_sdesc,
        od_quantity,
        od_amount
FROM (
        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `bgOrderMain`
        INNER JOIN `bgOrderData`
        INNER JOIN `bgProducts`
        WHERE `bgOrderMain`.`or_id` = `bgOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                        )
        GROUP BY `bgProducts`.`pr_id`

        UNION

        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `npOrderMain`
        INNER JOIN `npOrderData`
        INNER JOIN `bgProducts`
        WHERE `npOrderMain`.`or_id` = `npOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                        )
        GROUP BY `bgProducts`.`pr_id`
        ) TEMPTABLE3; 
```

它产生这个结果

```
+--------+--------------+----------------+---------------+------------+
| pr_id  |  pr_sbtcode  |  pr_sdesc      |  od_quantity  |  od_amount |
+--------+--------------+----------------+---------------+------------+
|   415  |  NP13        |  Product 13    |  5            |  125       |
|  1088  |  NPAW        |  Product AW    |  4            |  100       |
|   415  |  NP13        |  Product 13    |  5            |  125       |
|  1088  |  NPAW        |  Product AW    |  2            |  50        |
+--------+--------------+----------------+---------------+------------+ 
```

我想得到一个将它们组合成两行的结果：

```
+--------+--------------+----------------+---------------+------------+ 
| pr_id  |  pr_sbtcode  |  pr_sdesc      |  od_quantity  |  od_amount |
+--------+--------------+----------------+---------------+------------+ 
|   415  |  NP13        |  Product 13    |  10           |  250       |
|  1088  |  NPAW        |  Product AW    |  6            |  150       | 
+--------+--------------+----------------+---------------+------------+ 
```

所以我将 GROUP BY pr_id 添加到查询的末尾：

```
SELECT pr_id,
        pr_sbtcode,
        pr_sdesc,
        od_quantity,
        od_amount
FROM (
        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `bgOrderMain`
        INNER JOIN `bgOrderData`
        INNER JOIN `bgProducts`
        WHERE `bgOrderMain`.`or_id` = `bgOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                        )
        GROUP BY `bgProducts`.`pr_id`

        UNION

        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `npOrderMain`
        INNER JOIN `npOrderData`
        INNER JOIN `bgProducts`
        WHERE `npOrderMain`.`or_id` = `npOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                        )
        GROUP BY `bgProducts`.`pr_id`
        ) TEMPTABLE3
GROUP BY pr_id; 
```

但这只是给了我这个：

```
+--------+--------------+----------------+---------------+------------+ 
| pr_id  |  pr_sbtcode  |  pr_sdesc      |  od_quantity  |  od_amount |
+--------+--------------+----------------+---------------+------------+ 
|   415  |  NP13        |  Product 13    |  5            |  125       | 
|  1088  |  NPAW        |  Product AW    |  4            |  100       |
+--------+--------------+----------------+---------------+------------+ 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:32:55.023

您的代码很难格式化，因为您添加了`nbsp`. 但无论如何试试这个，

***第一次尝试***

```
SELECT pr_id,
        pr_sbtcode,
        pr_sdesc,
        SUM(od_quantity) totalQuantity,
        SUM(od_amount) totalAmount
FROM 
    (
        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `bgOrderMain`
        INNER JOIN `bgOrderData`
        INNER JOIN `bgProducts`
        WHERE `bgOrderMain`.`or_id` = `bgOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                    )
        GROUP BY `bgProducts`.`pr_id`
        UNION
        SELECT `bgProducts`.`pr_id`,
                `bgProducts`.`pr_sbtcode`,
                `bgProducts`.`pr_sdesc`,
                SUM(`od_quantity`) AS `od_quantity`,
                SUM(`od_amount`) AS `od_amount`,
                MIN(UNIX_TIMESTAMP(`or_date`)) AS `or_date`
        FROM `npOrderMain`
        INNER JOIN `npOrderData`
        INNER JOIN `bgProducts`
        WHERE `npOrderMain`.`or_id` = `npOrderData`.`or_id`
                AND `od_pr` = `pr_id`
                AND UNIX_TIMESTAMP(`or_date`) >= '1262322000'
                AND UNIX_TIMESTAMP(`or_date`) <= '1346990399'
                AND (
                        `pr_id` = '415'
                        OR `pr_id` = '1088'
                    )
        GROUP BY `bgProducts`.`pr_id`
    ) unionedTable
GROUP BY pr_id,
        pr_sbtcode,
        pr_sdesc 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/5ad01/2 "点击重定向")

# mysql - utf8_bin 中字段的 SQL 语句中的 COLLATE 比使用默认排序规则慢？

> ID：12303433
> 
> 赞同：3
> 
> 时间：2012-09-06T15:27:04.357
> 
> 标签：mysql, utf-8, collation

两种情况：

使用默认排序规则：

```
CREATE TABLE IF NOT EXISTS `table` (
  `name` varchar(255) collate utf8_general_ci NOT NULL,
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

SELECT `name` FROM `table` ORDER BY `name`; 
```

使用`COLLATE`：

```
CREATE TABLE IF NOT EXISTS `table` (
  `name` varchar(255) collate utf8_bin NOT NULL,
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

SELECT `name` FROM `table` ORDER BY `name` COLLATE utf8_general_ci; 
```

我需要从第一种情况更改为第二种情况，因为索引不区分大小写。订购仍然很重要。有实验性的排序规则，`utf8_general_cs`但它需要特殊的编译。

# 这会对性能产生影响吗？

在我看来，如果`MySQL`在 utf8 内部独立于排序规则存储文本字段，它不应该影响性能。

**编辑：** 使用情况下的解释输出与`COLLATE`不使用时相同。

```
mysql> EXPLAIN SELECT * 
    -> FROM `table`
    -> ORDER BY `name`
    -> COLLATE utf8_general_ci;
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | SIMPLE      | table | ALL  | NULL          | NULL | NULL    | NULL |    5 | Using filesort | 
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set (0.00 sec)

mysql> EXPLAIN SELECT * 
    -> FROM `table`
    -> ORDER BY `name`;
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | SIMPLE      | table | ALL  | NULL          | NULL | NULL    | NULL |    5 | Using filesort | 
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:53:45.993

排序规则确定了为索引考虑列的方式以及进行比较的方式。utf8 bin 用于按二进制值比较字符串，而 utf8 general 用于按字母值进行比较。被视为匹配的内容会因排序规则而异，并且顺序也会因排序规则而异。如果该列被视为二进制（如在 UTF8 bin 中），则当且仅当其位值相等时，一个字符才等于另一个字符。

当您在 select 语句中指定与字段的默认排序规则不同的排序规则时，您无法利用现有索引（使用默认排序规则）。如果您在使用索引列的查询上手动指定排序规则，它应该与在非索引列上的排序规则大致相同（假设手动指定的排序规则与列的默认排序规则不同），因为它只会忽略索引，在这种情况下，MySQL 将使用 QuickSort（使用基于指定排序规则的比较器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:38:31.053

如果您在该列上没有索引，我认为它不会变慢。使用索引列会更慢。

对于第一个表，我得到 Extra field =“Using index;”，第二个表“Using index; Using filesort”。所以第二个会慢一些。

# iphone - 一个客户刚刚在我身上丢了 20,000 行 ObjC (iPhone) 源代码，之前的编码器已经分裂，从哪里开始？

> ID：12303437
> 
> 赞同：-3
> 
> 时间：2012-09-06T15:27:12.250
> 
> 标签：iphone, objective-c

20,000 行意大利面条代码 (iPhone ObjC) 刚刚丢在我的腿上。问题：从哪里开始，是否有一个工具可以对所有内容进行概要分析？这是一团糟，甚至不知道从哪里开始。欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:01:30.963

您正在寻找的是一种称为统一标记语言 (UML) 的东西。这是开发过程中被严重忽视的部分，用于布局“类名、方法、链接等”。

幸运的是，过去许多程序员都面临过您的问题，并且有几种不同的 Magic Bullet 解决方案可用。因为我从来没有从代码向后工作到 UML（通常你首先构建 UML），所以我不得不快速搜索以找到一些解决方案：

这个看起来很有希望：[doxygen](http://www.doxygen.nl/index.html)

或者这个：[AutoGraf](http://mac.softpedia.com/get/Developer-Tools/AutoGraf.shtml)

我敢肯定，如果这些对您不起作用，您可以在 Google 上花几分钟时间找到所需的一切；现在您已经了解了 UML。

# mysql - SQLAlchemy 动态覆盖反射列

> ID：12303439
> 
> 赞同：2
> 
> 时间：2012-09-06T15:27:14.853
> 
> 标签：mysql, reflection, sqlalchemy, python-2.7

我在脚本中使用 SA，我将使用该脚本定期将 mysql 表的子集从“生产”副本“复制”到开发/测试系统。我编写了代码来简单地反映源表和`meta.create_all(destination_engine)`. 由于 FK 的性质，我现在知道我需要`use_alter=True`在创建表时应用到表上的 ForeignKey，这样我就不会遇到 CircularDependencyErrors 或其他问题。我需要假设在我浏览元数据之前我不知道有多少个 FK 或他们的名字。

我是 SA 新手，通常是 Java 程序员（如您所说：D）。我试图改变 use_alter attr。首先迭代：

```
tablesd = smeta.tables.items()
for tname, t in tablesd:
    for c in t.columns:
       for fk in c.foreign_keys:
            fk.use_alter = True
smeta.create_all(to_engine) 
```

**编辑：**重要的是要注意 create_all() 在我像上面那样设置 use_alter 属性后不会抛出 CircularDependencyError 。如果我删除该代码， create_all() 不起作用。它似乎并没有从创建中删除 FK...

这显然是行不通的。然后我阅读了 SA 文档中的[Overriding Reflected Columns](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#overriding-reflected-columns)，示例为：

```
mytable = Table('mytable', meta,
Column('id', Integer, primary_key=True), # override reflected 'id' to have primary key
Column('mydata', Unicode(50)),    # override reflected 'mydata' to be Unicode,   autoload=True) 
```

我猜想单独反映每个表`use_alter=True`，然后添加 FK 定义会起作用，但我不能假设 FK/列的名称和值或#。我读了很多关于使用`DeclarativeBase`来做这样的事情，但我不确定它是如何工作的......

如何获取我的任意表列表，反映它们，然后在它们各自的外键上覆盖 use_alter 选项？我在想这个错误的方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T21:01:58.233

答案最终出现在问题内部（想象一下……）。虽然每个`ForeignKey`对象都有一个`use_alter`可以设置的值，但也有一个可以设置的单独属性（我在[API 文档](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#constraints-api)`Constraints`中找不到这个。通过 PyDev 的调试器运行它后，我注意到前者正在设置，但所有与它们关联的键仍然. 我因此将它们设置为 true：`Constraints``False`

```
for fk in table.foreign_keys:
    fk.use_alter=True
    fk.constraint.use_alter=True 
```

这似乎产生了我正在寻找的 SQL，并且表被正确创建，没有错误`CircularDependencyErrors`，`metadata.sorted_tables`似乎工作正常，没有错误。我实际上能够重构我的代码并以*正确*的方式做事！

对于希望使用 SQLAlchemy 使用复杂 FK 进行 DB-->DB 反射的任何人，此答案和[Tyler Lesmann 的文章](http://www.tylerlesmann.com/2009/apr/27/copying-databases-across-platforms-sqlalchemy/)都适合您。

**更新：**使用此方法已通过同行评审，现在被用作生产代码。似乎运作良好！

# excel - Excel Vba 中的日期选择器

> ID：12303441
> 
> 赞同：2
> 
> 时间：2012-09-06T15:27:20.383
> 
> 标签：excel, vba

我需要在 Excel 中以自定义 vba 表单添加日期选择器。

我知道我可以使用 MSCOMCT2.ocx，但它似乎在 Excel 2010 中已过时：用户必须安装自定义包。

我需要该代码无需安装即可从 Excel 2003 运行到 2010 年（或者如果组件不可用，至少不会抛出错误消息）。我无法控制运行环境。

有什么解决办法吗？像完整 vba 中的自定义日期选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:40:09.717

我已经成功地使用了以下内容来混合使用 Excel 2003 和 2007。作者确实说它应该与所有版本兼容。

[https://sites.google.com/site/e90e50/calendar-control-class](https://sites.google.com/site/e90e50/calendar-control-class "https://sites.google.com/site/e90e50/calendar-control-class")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T23:04:18.607

我没有使用日期选择器，而是在我的 Excel 中的所有日期列中使用自动填充。请看下文。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim xRg As Range, xCell As Range
On Error Resume Next
If (Target.Count = 1) Then
    If (Not Application.Intersect(Target, Me.Range("H4,H7")) Is Nothing) Then _
        Target.Offset(0, x1down) = Date
    Application.EnableEvents = False
    Set xRg = Application.Intersect(Target.Dependents, Me.Range("H4,H7"))
    If (Not xRg Is Nothing) Then
        For Each xCell In xRg
            xCell.Offset(0, x1down) = Date
                        Next
    End If
    Application.EnableEvents = True
End If
End Sub 
```

# asp.net - 文本框在 ASP.Net 中回发的 HeaderTemplate 中丢失数据

> ID：12303442
> 
> 赞同：2
> 
> 时间：2012-09-06T15:27:27.443
> 
> 标签：asp.net, gridview, textbox

我有一个 ASP.Net GridView，我自己构建了列集合。在列集合中，我有一个 HeaderTemplate，在其中我有一个文本框，用于过滤网格中的记录。

当我在此文本框中输入文本并在网格上执行导致回发（即更改页面）的操作时，我会丢失文本框中的文本。

有人对为什么这些数据丢失有任何想法吗？

我的标题模板的 ASP 代码如下：

```
<HeaderTemplate>
    <asp:Label ID="Label1" Text="Number" runat="server" />
    <asp:TextBox ID="textBoxNumberFilter" runat="server" />
    <asp:ImageButton ID="buttonFilterNumber" runat="server" OnClick="buttonFilters_Click" />
</HeaderTemplate> 
```

提前致谢。我正在使用 ASP.Net 4.0

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-06T16:42:16.440

我认为这可能会有所帮助。

[http://www.codeproject.com/Articles/38714/How-To-Perpetuate-Dynamic-Controls-Between-Page-Vi](http://www.codeproject.com/Articles/38714/How-To-Perpetuate-Dynamic-Controls-Between-Page-Vi)

# java - 有没有一种特殊的方法可以向 MMSC 发送 MM7 肥皂请求以向 Android 设备发送彩信

> ID：12303444
> 
> 赞同：0
> 
> 时间：2012-09-06T15:27:29.337
> 
> 标签：java, soap, mms, mms-gateway, mm7

我们使用 MM7 向 MMSC 发送 MMS 发送请求。接收用户有一部安卓手机，他没有收到彩信。但是当接收用户有一部功能手机时，他会收到彩信。

这里很混乱。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:16:34.967

您无需特别处理 MM7 消息以使其与 Android 兼容。

“但是当接收用户拥有功能手机时，他会收到彩信”是什么意思？您可以检查以下步骤进行故障排除。

*   检查手机是否可以接收来自其他来源的彩信，尝试从另一部手机向您的安卓手机发送彩信。如果没有，请检查您的安卓手机上的彩信设置。
*   检查 MMSC 端的消息状态。如果您可以访问服务器，您可以检查网络转储并提取您的消息。
*   在提交您的 MM7 消息时请求交付报告

# r - 在R中格式化日期到日期时间格式

> ID：12303449
> 
> 赞同：0
> 
> 时间：2012-09-06T15:28:04.063
> 
> 标签：r

这次我有一个很好的。我需要结合并`df$Date`如下：`df$Time``Date_Time`

```
df
   Date      Time   Date_Time
    1/2/2012   9     1/2/2012 9:00:00
    1/3/2012   2.3   1/3/2012 2:30:00
    1/4/2012   8     1/4/2012 8:00:00 
```

我正在这样做，但这段代码不能正常工作。

```
 df$Time<-gsub( '\\.', ':', df$Time)
    df$Time <- paste(df$Time, ":00", sep='')
    df$Date_Time <- paste(df$Date, df$Time, sep=' ')
    df$Date_Time<-strptime(df$Date_Time, format="%Y-%m-%d %H:%M") 
```

不管最后是否完成，是否有一种简单且更好的方法可以转换`date`为？`datetime``H:M:S`

基本上，如果`Date_Time`是这样的：

```
1/1/2012 9 or 1/1/2012 9.3 
```

有没有办法在 R 中将此数据转换为日期时间格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:55:10.357

是的，只是做`strptime(paste(df$Date, format(df$Time, nsmall=2)), format='%m/%d/%Y %H.%M')`

编辑：更改`nsmall`为 2

# oracle - 内部或外部左连接

> ID：12303452
> 
> 赞同：2
> 
> 时间：2012-09-06T15:28:08.457
> 
> 标签：oracle, oracle11g

我很难针对这种情况修改脚本，并且想知道是否有人可以提供帮助：

我有一张`address`桌子和一张`phone`桌子都共享同一个名为 `id_number`. 所以`id_number = 2`在两个表上都指的是同一个实体。过去，地址和电话信息存储在一个表（表）中，但自从我们迁移到 Oracle 11g 后，`address`它现在被拆分为表。`address``phone`

有一个名为 3 的表`both_ids`。`id_number`除了`other_ids`存储列`SSN`和一些其他 id之外，该表还有一个列。

在将表拆分为`address`和`phone`表之前，我有这个脚本：（用 Sybase 编写）

```
INSERT INTO sometable_3 (          
SELECT a.id_number, a.other_id, 
       NVL(a1.addr_type_code,0)      home_addr_type_code,             
       NVL(a1.addr_status_code,0)    home_addr_status_code,             
       NVL(a1.addr_pref_ind,0)      home_addr_pref_ind,             
       NVL(a1.street1,0)             home_street1,             
       NVL(a1.street2,0)              home_street2,             
       NVL(a1.street3,0)              home_street3,             
       NVL(a1.city,0)                 home_city,             
       NVL(a1.state_code,0)           home_state_code,             
       NVL(a1.zipcode,0)              home_zipcode,             
       NVL(a1.zip_suffix,0)           home_zip_suffix,             
       NVL(a1.telephone_status_code,0) home_phone_status,             
       NVL(a1.area_code,0)             home_area_code,             
       NVL(a1.telephone_number,0)      home_phone_number,             
       NVL(a1.extension,0)             home_phone_extension,             
       NVL(a1.date_modified,'')      home_date_modified               
 FROM both_ids a, address a1          
 WHERE a.id_number = a1.id_number(+) 
 AND a1.addr_type_code = 'H'); 
```

现在我们迁移到 Oracle 11g，地址和电话信息被拆分了。

**如何修改上述脚本以在 Oracle 11g 中生成相同的结果？**

我是否必须首先在地址表和电话表之间进行 INNER JOIN，然后对 both_ids 进行 LEFT OUTER JOIN？

我尝试了以下方法，但没有奏效：

```
Insert Into..
  select ...
    FROM a1\. address
      INNER JOIN t.Phone ON a1.id_number = t.id_number
      LEFT OUTER JOIN both_ids a ON a.id_number = a1.id_number
    WHERE a1.adrr_type_code = 'H' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:48:26.807

您的查询中有语法错误。您在下面的评论中写道，您的查询是：

```
 ..
 FROM address a1 JOIN telephone t ON a1.id_number = t.id_number
 AND RIGHT OUTER JOIN tt_gl_both_ids a ON a.id_number = a1.id_number
 WHERE
 .. 
```

扔掉`AND`它就会起作用。此外，将右外连接替换为左外连接，因为这就是您要实现的目标（同样，基于您编写的评论）。

# jquery - jQuery UI datepicker下拉焦点在chrome中“跳跃”

> ID：12303455
> 
> 赞同：1
> 
> 时间：2012-09-06T15:28:13.777
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

当在 jQuery UI datepicker 中添加年份或月份下拉菜单时，当我打开它们并将鼠标悬停在不同的项目上时，焦点会跳回到默认选择的那个 - 例如，如果 datepicker 打开时的默认月份是 9 月，我打开下拉菜单并将鼠标悬停在 1 月上，它突出显示它，但很快又回到了 9 月。我用 Chrome、IE 和 FF 进行了测试，它只发生在 chrome 中。

```
$(function() {
  $('#date').datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: 'c-100',
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:37:13.233

我也遇到了这个

```
 $(function() {
                    $('#date').datepicker({
                      changeMonth: true,
                      changeYear: true,
                      yearRange: 'c-100',
                      onSelect: function (date) {
                     $(this).focus();
                     });
                  }); 
```

尝试添加 `$(this).focus();`

# c - 这在语法上正确吗？

> ID：12303459
> 
> 赞同：-5
> 
> 时间：2012-09-06T15:28:48.567
> 
> 标签：c

我在源文件之一中有如下代码：

```
#include <stdio.h>
#include <math.h>

int a ;
int b = 256 ;
int c = 16 ;
int d = 4 ;

int main() {

    if ((d <= (b) && (d == ( c / sizeof(a))))
    {
        printf("%d",sizeof(a) );
    }
    return 0;

} 
```

我已经删除了演员表并简化了数据名称。`sizeof(a)`可以视为 4。我想知道语法是否有效，`if`如果是，为什么不执行？

PS：由于时间限制，我没有坐下来很长时间。如果您在代码中发现幼稚的错误，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:32:01.577

你试过编译它吗？

您的 if 语句还需要一个）。那或将其简化为：

```
if ((d <= b) && (d == c / sizeof(a))) 
```

对于 C99，您的 printf 语句应该使用 "%zu\n"，尽管[它很复杂](https://stackoverflow.com/questions/1546789/clean-code-to-printf-size-t-in-c-or-nearest-equivalent-of-c99s-z-in-c)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:34:03.960

IMO 缺少一个右括号。我用垂直括号对齐技术打开了你的 if 。

```
#include <stdio.h>
#include <math.h>

int a ;
int b = 256 ;
int c = 16 ;
int d = 4 ;

int main() {

    if (
        (
         d <= (b) && (
                      d == (
                             c / sizeof(a)
                           )
                     )
        )
       //Here needs another closing parantheses
    {
        printf("%d",sizeof(a) );
    }
    return 0;

} 
```

实际上，您可以在代码段中自行删除一些括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:32:45.163

尝试在`printf`语句中添加换行符：

```
printf("%d\n", sizeof a); 
```

标准输出通常是缓冲的，因此输出并不总是立即显示在您的控制台上，除非有换行符或您在调用 `fflush(stdout);`后添加 a。`printf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:32:51.800

```
((d <= (b) && (d == ( c / sizeof(a)))) 
```

在. `(`_`b`

```
( (d <= b) && (d == (c/sizeof(a)))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T15:34:26.227

您忘记在第 11 行关闭一个括号，您打开了六个并关闭了五个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T15:36:03.153

我认为你的 if 语句有问题，它应该是这样的

```
if ( (d <= b) && (d == ( c / sizeof(a)))) 
```

你有一个额外的（在'b'的左侧

# android - Android MediaPlayer 崩溃的应用程序

> ID：12303460
> 
> 赞同：3
> 
> 时间：2012-09-06T15:28:53.563
> 
> 标签：android

我有一个带有播放声音的按钮的 android 应用程序。播放声音的代码：

```
if (mp != null)
{
    mp.release();
}
mp = MediaPlayer.create(this, R.raw.match);
mp.start(); 
```

mp 是活动中的一个字段：

```
public class Game extends Activity implements OnClickListener {
/** Called when the activity is first created. */
//variables:
MediaPlayer mp;
//... 
```

该应用程序运行正常，但在模拟器上单击按钮约 200 次后，应用程序崩溃并给了我这个错误[https://dl.dropbox.com/u/5488790/error.txt](https://dl.dropbox.com/u/5488790/error.txt)（不知道如何发布它在这里，所以它会显得体面）
我假设这是因为 MediaPlayer 对象消耗了太多内存，但是 mp.release() 不应该处理这个问题吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:46:34.557

如果您要为按钮附加声音效果，`MediaPlayer`通常对于此操作来说太重了。每次只是将声音数据加载到内存中，您都会得到不必要的延迟。你应该看看 using `SoundPool`。

`MediaPlayer`在任何一种情况下，都没有正当理由每次都释放并重新创建。如果您决定使用`MediaPlayer`，请通过单击按钮来控制您拥有的单个实例。

```
MediaPlayer mp;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Other init code

    //Create the player this way so it doesn't auto-prepare
    mp = new MediaPlayer();
    AssetFileDescriptor afd = getResources().openRawResourceFd(R.raw.match);
    mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
    afd.close();
}

public void onDestroy() {
    super.onDestroy();
    //Release it only when no longer needed
    mp.release();
    mp = null;
}

public void onButtonClick(View v) {
    if (mp.isPlaying()) {
        mp.stop();
    }
    //Play the sound
    mp.prepare();
    mp.start();
} 
```

`SoundPool`希望对您有所帮助，但如果这种声音只是一个短暂的效果，我强烈建议您改用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:46:37.923

看起来您的代码应该可以工作，但显然`release()`并没有真正发布所有内容。

可能是因为`R.raw.match`每次想要播放声音时都必须重新加载。如果`R.raw.match`只是一个简短的音效，那么您可能要考虑`SoundPool`改用。

如果您使用`SoundPool`，您只需加载`R.raw.match`一次，这可能会防止内存问题。

本教程有一个很好的例子来说明如何使用它：[http ://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool](http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool)

您几乎只需创建一个 SoundPool 实例，然后加载一次声音并在需要时播放它。

希望这可以帮助！

**编辑**

如果你想使用媒体播放器...

```
public class Blah extends Activity implements OnClickListener {
   MediaPlayer mp;

   @Override 
   public void onCreate(Bundle b)
   {
      // blah blah
      mp = MediaPlayer.create(R.raw.match);

      // blah blah
   }

   @Override
   public void onClick(View v)
   {
      if (v.getId() == yourButtonID)
      {
         // play sound from beginning
         mp.seekTo(0);
         mp.start();
      }
   }
} 
```

这样，您只需创建一个实例，并且无论何时要播放它，只需将其倒回到开头然后播放即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:35:48.113

尝试

```
if (mp != null)
        {
            mp.release();
        }
        mp = MediaPlayer.create(this, R.raw.match);
        mp.prepare(); // not needed 
        mp.start(); 
```

祝你好运！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T09:38:21.950

如果您持有 MediaPlayer，请在活动结束时释放它

```
@Override
void onDestroy() {

    if (mMediaPlayer != null) {
        mMediaPlayer.release();
        mMediaPlayer = null;
    }

    super.onDestroy();
} 
```

# facebook - Facebook 自动创建了一个我无法编辑的粉丝页面

> ID：12303466
> 
> 赞同：0
> 
> 时间：2012-09-06T15:29:21.450
> 
> 标签：facebook, facebook-opengraph, facebook-page, social-media

我们推出了一个网站，该网站使用 Facebook 开放图和点赞按钮在 Facebook 等上分享内容。其中一个开放图标签包含有关网站所有者 ( `<meta property="fb:admins" content="..."/>`) 的 Facebook ID 的信息，因此包含这些信息。我是管理员之一，当我喜欢这个网页时，Facebook 会自动创建一个粉丝页面。没关系，我们将保留粉丝页面，但我似乎无法编辑它。

有什么方法可以编辑自动创建的 Facebook 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:16:20.117

我设法通过创建一个新的 Facebook 页面然后将旧的、不可编辑的页面（首先是自动创建的）与新页面合并来解决这个问题。从我创建的新页面我去了：

**编辑页面**>**更新信息**>**资源**>**请求合并重复页面**。

选择旧页面并将其合并到新页面。旧页面中的所有更新和图片都丢失了（这不是真正的问题），但喜欢的内容已合并到新页面中。它还询问我想为新的组合页面使用哪个用户名（形成 Facebook.com URL），所以我选择了旧页面的用户名，因为这是每个人都习惯的。在这个过程结束时，我有一个 Facebook 页面，与以前相同的喜欢和相同的 URL，我现在可以对其进行编辑。

我希望这有帮助。

# regex - 为什么零宽度匹配正则表达式不起作用？

> ID：12303467
> 
> 赞同：2
> 
> 时间：2012-09-06T15:29:23.713
> 
> 标签：regex, perl, mainframe, jcl

我编写了一个 Perl 函数来替换 JCL 脚本中的作业名称。这里使用了零宽度匹配。

```
sub modify_jcl_jobname ()
{
    my ($jcl, $old, $new) = @_;

    $jcl =~ s/
         # The name must begin in column 3.
         ^(?<=\/\/)     

         # The first charater must be alphabetic or national.
        ($old)

         # The name must be followed by at leat on blank.
         # Append JCL keyword JOB 
        (?=\s+JOB)
       /$new/xmig; # Multi-lines, ignore case.

    return $jcl;
} 
```

但是直到我做了一个简单的修改，删除了前导符号“^”，这个功能才起作用。

```
 #before  ^(?<=\/\/) 

  #after    (?<=\/\/) 
```

所以我想把问题的原因说清楚。任何答复将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:48:46.737

问题在于

```
^(?<=\/\/) 
```

`^`仅当匹配后的点前面有两个字符时，该模式才会匹配`//`。这永远不会发生，因为`/^/m`匹配字符串的开头和换行符之后。

但是您不想在行首开始匹配。您想开始匹配 2 个字符。您实际上想要的是：

```
(?<=^\/\/) 
```

做了一些改进后，代码如下：

```
sub modify_jcl_jobname {
    my ($jcl, $old, $new) = @_;
    $jcl =~ s{
         (?<= ^// )
         \Q$old\E
         (?= \s+ JOB )
    }{$new}xmig;

    return $jcl;
} 
```

改进：

*   删除了不正确的原型 ( `()`)。它迫使调用者告诉 Perl 忽略原型（通过使用`&`）。
*   添加了代码 ( `\Q...\E`) 以在使用它之前将其内容`$old`转换为正则表达式模式。
*   删除了不必要的捕获 ( `(...)`)。
*   将替换的分隔符（从`s///`到`s{}{}`）切换为需要较少的转义。
*   删除了高度冗余的评论。（好的评论解释*了为什么*正在做某事而不是正在做*什么*。）

* * *

优化器可能会更好地处理这个版本：

```
$jcl =~ s{
     ^// \K
     \Q$old\E
     (?= \s+ JOB )
}{$new}xmig; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:35:39.440

`^`符号与行首相匹配。然后你想要一些前面有两个斜杠的东西 - 如果下一个字符是该行的第一个字符，这些斜杠应该放在哪里？

```
s{^//
  ($old)
  ...
 }{//$new}xmig 
```

应该工作：你不需要回头看。

**更新：**感谢 ikegami，我现在明白你为什么使用它了。您希望将 保留`//`在字符串中：好吧，您可以在替换中重复它们，或者将`^`字符移动到后视中。

# php - 带有linq的Windows手机中的xml

> ID：12303476
> 
> 赞同：0
> 
> 时间：2012-09-06T15:30:08.613
> 
> 标签：php, xml, vb.net, windows-phone-7, xaml

我有这个服务器端代码：

```
<?php
header('Content-Type: text/xml');
?>
<?xml version="1.0" encoding="utf-8" ?>
<Data>
<Entry> <?php echo time(); ?> </Entry>
</Data> 
```

这在 Windows Phone 应用程序上：

```
Imports System.Xml.Linq
Partial Public Class MainPage
    Inherits PhoneApplicationPage
    Public Sub New()
        InitializeComponent()
    End Sub
    Private Sub cl_DownloadStringCompleted(sender As Object, e As System.Net.DownloadStringCompletedEventArgs)
        Dim doc = XDocument.Parse(e.Result)
        TextBox1.Text = doc.<Data>.<Entry>.Value
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
        Dim cl As New WebClient
        AddHandler cl.DownloadStringCompleted, AddressOf cl_DownloadStringCompleted
        cl.DownloadStringAsync(New Uri("http://localhost/wp/helloworld.php"))
    End Sub
End Class 
```

但这是我的问题：它不会改变值！它一直显示相同的东西！它一定是类似于缓存内存的东西......（？）

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:37:56.007

尝试在您的请求中添加一些虚假数据：

```
cl.DownloadStringAsync(New Uri("http://localhost/wp/helloworld.php?" + "fake="+DateTime.Now.Ticks)); 
```

这是一种欺骗操作系统缓存系统的方法。

而且您不需要`fake`在服务器端解析参数。

# python - 从数组中选择特定点

> ID：12303477
> 
> 赞同：0
> 
> 时间：2012-09-06T15:30:09.780
> 
> 标签：python

这是一个新任务：我从数组中选择数据时遇到以下问题

```
a = [1100, 1140, 1258, 1800, 2100, 2365] 
```

我想从中选择严格低于 2000 的值和严格高于 2000 的值......在这种情况下是 1800 和 2100

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:00:16.517

那是你需要的吗？

```
>>> a = [1100, 1140, 1258, 1800, 2100, 2365]
>>> max(x for x in a if x < 2000)
1800
>>> min(x for x in a if x > 2000)
2100 
```

当然，还有更多（也许更好）的解决方案。

上述解决方案使用了所谓的[生成器表达式](http://docs.python.org/reference/expressions.html#grammar-token-generator_expression)（在 Python 2.4 中引入），即这种方法不会创建新的列表对象。它只是迭代`a`两次。正如其他人指出的那样，您可以在`a`已经排序时将其减少为单次迭代。

**更新（根据您上面的评论）：**

```
>>> from itertools import izip
>>> a = [1100, 1140, 1258, 1800, 2100, 2365]
>>> b = ['r', 's', 't', 'u', 'v', 'w']
>>> max((a,b) for a,b in izip(a,b) if a < 2000)
(1800, 'u')
>>> min((a,b) for a,b in izip(a,b) if a > 2000)
(2100, 'v') 
```

这种方法在 2 元组列表中搜索极值，例如`[(1100, 'r'), (1140, 's'), ...]`。这意味着对于搜索极值，`b`如果列表中的值相等，则考虑列表中的值`a`，参见[此答案](https://stackoverflow.com/a/5292332/145400)。

只是为了让您知道：为了获得与第一种方法完全相同的行为，即实际上仅`a`在极值搜索期间评估值，您可以使用

```
from operator import itemgetter
from itertools import izip
min(((a,b) for a,b in izip(a,b) if a > 2000)), key=itemgetter(0)) 
```

这使用项目 0，即 2 元组中的第一个项目，即`a`用于搜索最小值的列表中的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:14:06.863

如果您使用的是 NumPy：

```
a[a>2000].min()
a[a<2000].max() 
```

NumPy 数组可以通过布尔数组进行索引：您只选择满足给定条件的元素（这里，无论您是高于还是低于 2000），输出本身就是一个 NumPy 数组（称为`ndarray`）[实际上，什么是返回的是您的初始数组的子集，相同的元素]。因为它是一个`ndarray`，你可以使用它的`min`和`max`方法。

你会承认语法非常易读，对吧？

但是如果你在没有 numpy 的情况下被困住，你总是可以尝试类似的东西

```
min(i for i in a if i>2000)
max(i for i in a if i<2000) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:02:55.983

如果你真的是指低于 2000 的最高值和高于 2000 的最低值，那么你可以通过

```
In [3]: max([x for x in a if x < 2000])
Out[3]: 1800

In [4]: min([x for x in a if x > 2000])
Out[4]: 2100 
```

这是如何运作的？列表推导`[x for x in a if x < 2000]`选择所有小于 2000 的元素。然后，只需查找最大值。

如果您知道列表已经排序，则可能有更有效的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:00:16.377

我只是对数组进行排序，然后当你找到高于 2000 的第一个值时，取那个和前一个。

# django - 使用 django-allauth 时如何自定义用户配置文件

> ID：12303478
> 
> 赞同：116
> 
> 时间：2012-09-06T15:30:15.197
> 
> 标签：django, profile, django-allauth

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-09-06T21:40:39.883

Suppose you want to ask the user for his first/last name during signup. You'll need to put these fields in your own form, like so:

```
class SignupForm(forms.Form):
    first_name = forms.CharField(max_length=30, label='Voornaam')
    last_name = forms.CharField(max_length=30, label='Achternaam')

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save() 
```

Then, in your settings point to this form:

```
ACCOUNT_SIGNUP_FORM_CLASS = 'yourproject.yourapp.forms.SignupForm' 
```

Note that `SignupForm` cannot be defined in the same file as form overrides through `ACCOUNT_FORMS` or `SOCIALACCOUNT_FORMS`, because that would lead to a circular import error.

That's all.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-15T16:13:44.030

Using the solution suggested by pennersr I was getting a DeprecationWarning:

```
DeprecationWarning: The custom signup form must offer a def signup(self, request, user) method DeprecationWarning) 
```

This is because [as of version 0.15](http://django-allauth.readthedocs.org/en/latest/index.html#from-0-15-0) the save method has been deprecated in favour of a def signup(request, user) method.

So to solve this, the code of the example should be like this:

```
class SignupForm(forms.Form):
    first_name = forms.CharField(max_length=30, label='Voornaam')
    last_name = forms.CharField(max_length=30, label='Achternaam')

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save() 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-01-27T05:34:06.287

Here's what worked for me combining a few of the other answers (none of them are 100% complete and DRY).

In `yourapp/forms.py`:

```
from django.contrib.auth import get_user_model
from django import forms

class SignupForm(forms.ModelForm):
    class Meta:
        model = get_user_model()
        fields = ['first_name', 'last_name']

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save() 
```

And in `settings.py`:

```
ACCOUNT_SIGNUP_FORM_CLASS = 'yourapp.forms.SignupForm' 
```

This way it uses the model forms so that it's DRY, and uses the new `def signup`. I tried putting `'myproject.myapp.forms.SignupForm'` but that resulted in a error somehow.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-27T15:29:07.547

@Shreyas: The below solution may not be the cleanest, but it works. Please let me know if you have any suggestions to clean it up any further.

To add information that does not belong to the default user profile, first create a model in yourapp/models.py. Read the general django docs to learn more about it, but basicly:

```
from django.db import models

class UserProfile(models.Model):
    user = models.OneToOneField(User, related_name='profile')
    organisation = models.CharField(organisation, max_length=100, blank=True) 
```

Then create a form in yourapp/forms.py:

```
from django import forms

class SignupForm(forms.Form):
    first_name = forms.CharField(max_length=30, label='Voornaam')
    last_name = forms.CharField(max_length=30, label='Achternaam')
    organisation = forms.CharField(max_length=20, label='organisation')

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        # Replace 'profile' below with the related_name on the OneToOneField linking back to the User model
        up = user.profile
        up.organisation = self.cleaned_data['organisation']
        user.save()
        up.save() 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-12T11:56:27.170

In your `users/forms.py` you put:

```
from django.contrib.auth import get_user_model
class SignupForm(forms.ModelForm):
    class Meta:
        model = get_user_model()
        fields = ['first_name', 'last_name']
    def save(self, user):
        user.save() 
```

In settings.py you put:

```
ACCOUNT_SIGNUP_FORM_CLASS = 'users.forms.SignupForm' 
```

In this way you don't break DRY principle by multiplicity User models fields definition.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-04-08T19:58:12.797

I've tried many different tutorials and all of them is missing something, repeating unnecessary code or doing weird things, bellow follows my solution that joins all the options that I've found, it's working, I have already put it in production BUT it still not convincing me because I would expect to receive first_name and last_name inside the functions that I attached to Users create to avoid creating a profile inside the form but I couldn't, by the away I think it will help you.

Models.py

```
class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    bio = models.TextField(max_length=500, blank=True)
    nationality = models.CharField(max_length=2, choices=COUNTRIES)
    gender = models.CharField(max_length=1, choices=GENDERS)

def __str__(self):
    return self.user.first_name

@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        Profile.objects.create(user=instance)

@receiver(post_save, sender=User)
def save_user_profile(sender, instance, **kwargs):
    instance.profile.save() 
```

Forms.py

```
class SignupForm(forms.ModelForm):
    first_name = forms.CharField(max_length=100)
    last_name = forms.CharField(max_length=100)

    class Meta:
        model = Profile
        fields = ('first_name', 'last_name', 'nationality', 'gender')

    def signup(self, request, user):
        # Save your user
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save()

        user.profile.nationality = self.cleaned_data['nationality']
        user.profile.gender = self.cleaned_data['gender']
        user.profile.save() 
```

Settings.py

```
ACCOUNT_SIGNUP_FORM_CLASS = 'apps.profile.forms.SignupForm' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-10T23:22:07.417

```
#models.py

from django.conf import settings

class UserProfile(models.Model):
    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    image = models.ImageField(default='users/default.png', upload_to='users')
    fields = models.ForeignKey('Field' ,null=True ,on_delete=models.SET_NULL)
    category = models.ForeignKey('Category' ,null=True ,on_delete=models.SET_NULL)
    description = models.TextField()
    interests = models.ManyToManyField('Interests')

    ...

   def save(self, *args, **kwargs):
       super().save(*args, **kwargs)

...

def userprofile_receiver(sender, instance, created, *args, **kwargs):
    if created:
        userprofile = UserProfile.objects.create(user=instance)
    else:
        instance.userprofile.save()

post_save.connect(userprofile_receiver, sender=settings.AUTH_USER_MODEL)

 #forms.py

 class SignupForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(SignupForm, self).__init__(*args, **kwargs)
        self.fields['first_name'].widget = forms.TextInput(attrs={'placeholder': 'Enter first name'})
        self.fields['last_name'].widget = forms.TextInput(attrs={'placeholder': 'Enter last name'})

    first_name = forms.CharField(max_length=100)
    last_name = forms.CharField(max_length=100)

    interests  = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple, help_text="Choose your interests", queryset=Interests.objects.all())

    image = forms.ImageField(help_text="Upload profile image ")
    fields = forms.ChoiceField(help_text="Choose your fields ")
    category = forms.ChoiceField(help_text="Choose your category")

    class Meta:
        model = UserProfile
        fields = ('first_name', 'last_name',  'name', 'image', 'fields', 'category', 'description', 'phone', 'facebook', 'twitter', 'skype', 'site', 'address', 'interests' ,'biography')
        widgets = {
             ...
            'description': forms.TextInput(attrs={'placeholder': 'Your description'}),
            'address': forms.TextInput(attrs={'placeholder': 'Enter address'}),
            'biography': forms.TextInput(attrs={'placeholder': 'Enter biography'}),
            ....
    }
    def signup(self, request, user):
        # Save your user
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.save()

        user.userprofile.image = self.cleaned_data.get('image')
        user.userprofile.fields = self.cleaned_data['fields']
        user.userprofile.category = self.cleaned_data['category']
        user.userprofile.description = self.cleaned_data['description']
        interests = self.cleaned_data['interests']
        user.userprofile.interests.set(interests)
        user.userprofile.save()

# settings.py or base.py

ACCOUNT_SIGNUP_FORM_CLASS = 'nameApp.forms.SignupForm' 
```

That is it. (:

* * *

## 回答 #8

> 赞同：-10
> 
> 时间：2012-09-06T15:38:58.663

Create a Profile Model with user as OneToOneField

```
class Profile(models.Model):
    user = models.OneToOneField(User, verbose_name=_('user'), related_name='profiles')
    first_name=models.CharField(_("First Name"), max_length=150)
    last_name=models.CharField(_("Last Name"), max_length=150)
    mugshot = ImageField(_('mugshot'), upload_to = upload_to, blank=True)
    phone= models.CharField(_("Phone Number"), max_length=100)
    security_question = models.ForeignKey(SecurityQuestion, related_name='security_question')
    answer=models.CharField(_("Answer"), max_length=200)
    recovery_number= models.CharField(_("Recovery Mobile Number"), max_length=100)
    city=models.ForeignKey(City,related_name='city', blank=True, null=True, help_text=_('Select your City'))
    location=models.ForeignKey(Country,related_name='location', blank=True, null=True, help_text=_('Select your Location')) 
```

# c++ - 使用 karma 为指针向量生成输出

> ID：12303480
> 
> 赞同：3
> 
> 时间：2012-09-06T15:30:23.510
> 
> 标签：c++, boost, boost-spirit, boost-spirit-karma

我在使用 karma 为保存在 boost::shared_ptrs 向量中的结构生成输出时遇到了一些麻烦。我有一个使用无法编译的整数的小测试用例。我在想我可以使用 deref_iterator 自定义点来处理这种情况，或者开箱即用的精神可能会注意到我的容器持有指针类型并执行额外的取消引用。无论如何，这是测试用例：

```
#include <boost/spirit/include/karma.hpp>
#include <boost/shared_ptr.hpp>
#include <vector>

typedef boost::shared_ptr< int > ptr;
typedef std::vector< ptr > vec;

namespace boost {
namespace spirit {
namespace traits {

// specialise how iterators into containers of pointers are dereferenced
template <>
struct deref_iterator< typename container_iterator< vec const >::type >
{
    typedef int type;

    static
    type
    call( typename container_iterator< vec const >::type & it ) {
        return **it;
    }
};

} // namespace traits
} // namespace spirit
} // namespace boost

int
main() {
    vec v;
    v.push_back( ptr( new int( 1 ) ) );
    v.push_back( ptr( new int( 2 ) ) );
    v.push_back( ptr( new int( 3 ) ) );

    using namespace boost::spirit::karma;
    using boost::spirit::ascii::space;

    generate_delimited(
        std::ostream_iterator< char >( std::cout ),
        *int_,
        space,
        v
    );

    return 0;
} 
```

这是编译错误：

```
...patience...
...patience...
...found 1986 targets...
...updating 3 targets...
gcc.compile.c++ /home/john/Dev/Bio/bin/Bio/gcc-4.6/release/src/spirit/vector-of-ptrs.o
In file included from /home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/bool_policies.hpp:16:0,
from /home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/bool.hpp:29,
from /home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric.hpp:13,
from /home/john/src/boost/boost_1_51_0/boost/spirit/home/karma.hpp:15,
from /home/john/src/boost/boost_1_51_0/boost/spirit/include/karma.hpp:16,
from src/spirit/vector-of-ptrs.cpp:1:
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/detail/numeric_utils.hpp: In static member function ‘static boost::shared_ptr<
        int> boost::spirit::traits::absolute_value<boost::shared_ptr<int>, void>::call(boost::shared_ptr<int>)’:
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/detail/numeric_utils.hpp:149:41:   instantiated from ‘boost::spirit::traits::absolute_value<boost::shared_ptr<int> >::ame boost
    ::spirit::traits::absolute_value<T>::type = boost::shared_ptr<int> boost::spirit::traits::get_absolute_value(boost::shared_ptr<int>)’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/int.hpp:213:57:   instantiated from ‘static bool boost::spirit::karma::any_int_generator<
        int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false
    >::insert_int(boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type> &, const boost::shared_ptr<int> &)’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/int.hpp:242:39:   instantiated from ‘static bool boost::spirit::karma::any_int_generator<
        int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false
    >::generate(
        boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type> &, boost::spirit::context<
            boost::fusion::cons<const vector<boost::shared_ptr<int> > &, boost::fusion::nil>, boost::spirit::locals<> > &, const boost::spirit::karma::any_space<boost::spirit::char_encoding::ascii> &
      , const boost::shared_ptr<int> &)’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/detail/fail_function.hpp:36:62:   instantiated from ‘bool boost::spirit::karma::detail::fail_function<
        boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type>, boost::spirit::context<
            boost::fusion::cons<const vector<boost::shared_ptr<int> > &, boost::fusion::nil>, boost::spirit::locals<> >, boost::spirit::karma::any_space<boost::spirit::char_encoding::ascii> >
    ::operator()(const boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false> &, const boost::shared_ptr<int> &) const’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/detail/pass_container.hpp:274:13:   instantiated from ‘bool boost::spirit::karma::detail::pass_container<
        boost::spirit::karma::detail::fail_function<
            boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type>, boost::spirit::context<
                boost::fusion::cons<const vector<boost::shared_ptr<int> > &, boost::fusion::nil>, boost::spirit::locals<> >, boost::spirit::karma::any_space<boost::spirit::char_encoding::ascii> >,
        vector<boost::shared_ptr<int> >, boost::spirit::karma::detail::indirect_iterator<vector<boost::shared_ptr<int> >::const_iterator>, mpl_::bool_<false> 
    >::dispatch_container(const boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false> &, mpl_::mpl_::bool_<false>) const’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/detail/pass_container.hpp:321:61:   [ skipping 2 instantiation contexts ]
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/operator/kleene.hpp:53:32:   instantiated from ‘bool boost::spirit::karma::base_kleene<
        boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false>, mpl_::bool_<false>, boost::spirit::karma::kleene<
            boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false> > 
    >::generate_subject(
        boost::spirit::karma::detail::pass_container<
            boost::spirit::karma::detail::fail_function<
                boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type>, boost::spirit::context<
                    boost::fusion::cons<const vector<boost::shared_ptr<int> > &, boost::fusion::nil>, boost::spirit::locals<> >, boost::spirit::karma::any_space<boost::spirit::char_encoding::ascii> >
          , vector<boost::shared_ptr<int> >, boost::spirit::karma::detail::indirect_iterator<vector<boost::shared_ptr<int> >::const_iterator>, mpl_::bool_<false> >, const vector<
            boost::shared_ptr<int> > &, mpl_::mpl_::bool_<false>) const’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/operator/kleene.hpp:126:17:   instantiated from ‘bool boost::spirit::karma::base_kleene<
        boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false>, mpl_::bool_<false>, boost::spirit::karma::kleene<
            boost::spirit::karma::any_int_generator<int, boost::spirit::unused_type, boost::spirit::unused_type, 10u, false> > 
    >::generate(
        boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0>, boost::spirit::unused_type> &, boost::spirit::context<
            boost::fusion::cons<const vector<boost::shared_ptr<int> > &, boost::fusion::nil>, boost::spirit::locals<> > &, const boost::spirit::karma::any_space<boost::spirit::char_encoding::ascii> &
      , const vector<boost::shared_ptr<int> > &) const’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/generate.hpp:161:53:   instantiated from ‘bool boost::spirit::karma::generate_delimited(
        boost::spirit::karma::detail::output_iterator<ostream_iterator<char>, mpl_::int_<0> > &, const boost::proto::exprns_::expr<
            boost::proto::tagns_::tag::dereference, boost::proto::argsns_::list1<const boost::spirit::terminal<boost::spirit::tag::int_> &>, 1l> &, const boost::proto::exprns_::expr<
            boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l> &, boost::spirit
        ::karma::delimit_flag::enum_type, const vector<boost::shared_ptr<int> > &)’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/generate.hpp:185:82:   instantiated from ‘bool boost::spirit::karma::generate_delimited(
        ostream_iterator<char> &, const boost::proto::exprns_::expr<boost::proto::tagns_::tag::dereference, boost::proto::argsns_::list1<const boost::spirit::terminal<boost::spirit::tag::int_> &>,
            1l> &, const boost::proto::exprns_::expr<
            boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l> &, boost::spirit
        ::karma::delimit_flag::enum_type, const vector<boost::shared_ptr<int> > &)’
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/generate.hpp:227:48:   instantiated from ‘bool boost::spirit::karma::generate_delimited(
        const ostream_iterator<char> &, const boost::proto::exprns_::expr<
            boost::proto::tagns_::tag::dereference, boost::proto::argsns_::list1<const boost::spirit::terminal<boost::spirit::tag::int_> &>, 1l> &, const boost::proto::exprns_::expr<
            boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l> &, const vector<
            boost::shared_ptr<int> > &)’
src/spirit/vector-of-ptrs.cpp:46:2:   instantiated from here
/home/john/src/boost/boost_1_51_0/boost/spirit/home/karma/numeric/detail/numeric_utils.hpp:60:26: error: No match for ‘fabs(boost::shared_ptr<int> &)’

STL Decryptor reminder:
    Use the /cand:L option to see all suppressed template candidates

    "/home/john/src/stlfilt/gfilt"  -ftemplate-depth-128 -Wno-deprecated -Wno-unused -Wno-error -O3 -finline-functions -Wno-inline -Wall -fPIC -Wno-deprecated -Wno-unused -DBOOST_FILESYSTEM_VERSION=3 -DNDEBUG -DWITH_NONAMESPACES -DXML_LIBRARY  -I"../Bio" -I"../Hmm" -I"/home/john/src/boost/boost_1_51_0" -c -o "/home/john/Dev/Bio/bin/Bio/gcc-4.6/release/src/spirit/vector-of-ptrs.o" "src/spirit/vector-of-ptrs.cpp"

...failed gcc.compile.c++ /home/john/Dev/Bio/bin/Bio/gcc-4.6/release/src/spirit/vector-of-ptrs.o...
...removing /home/john/Dev/Bio/bin/Bio/gcc-4.6/release/src/spirit/vector-of-ptrs.o
...skipped <p/home/john/Dev/Bio/bin/Bio/gcc-4.6/release>spirit-vector-of-ptrs for lack of <p/home/john/Dev/Bio/bin/Bio/gcc-4.6/release>src/spirit/vector-of-ptrs.o...
...failed updating 1 target...
...skipped 1 target... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T23:52:59.113

一些实验使我找到了未按预期实例化特化的原因：迭代器在生成器表达式的*求*`karma::detail::indirect_iterator`值过程中已被包裹（with） 。

 *这是对我有用的修复：

```
namespace boost {
namespace spirit {
namespace traits {

    // specialise how iterators into containers of pointers are dereferenced
    template <>
        struct deref_iterator< karma::detail::indirect_iterator<vec::const_iterator> >
    {
        typedef karma::detail::indirect_iterator<vec::const_iterator> It;
        typedef int type;

        static type call( It const & it ) {
            return **it;
        }
    };

} // namespace traits
} // namespace spirit
} // namespace boost 
```*

# java-me - 在 j2me 中显示警报后的空白屏幕

> ID：12303481
> 
> 赞同：1
> 
> 时间：2012-09-06T15:30:23.620
> 
> 标签：java-me, alert, midp, lcdui, nokia-s40

我开发了一款游戏，但这是我面临的一个严重问题。我的代码中没有任何线程，但是每当我使用警报时

```
Display.setCurrent(my_alert)// my_alert has a timeout of 3000ms 
```

然后在此警报之后，出现一个空白的白色屏幕。按下屏幕时，我的游戏画布重新出现。在设置警报之前，我的棋盘游戏画布设置为当前显示。自动键盘锁定后也会出现此问题。

此警报对我的游戏至关重要，请提出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:00:29.723

此类问题通常表明 GameCanvas 方法[showNotify()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html#showNotify%28%29 "API 文档")的覆盖丢失或不正确：

> 该实现在此 Canvas 在显示器上可见之前立即调用 showNotify()。Canvas 子类可能会覆盖该方法以在显示之前执行任务，例如设置动画、启动计时器等。该方法在 Canvas 类中的默认实现是空的。

上述方法在从警报返回到前一屏幕时被调用。GameCanvas 应该以某种方式触发屏幕的重绘（例如使用`repaint`或`flushGraphics`方法），否则它将显示为空白。

事实上，在自动键盘锁定之后也会出现此问题，这使得更有可能`showNotify`在您的 MIDlet 中未正确完成。

# ios - 我可以对一个 UITableViewDelegate 使用多个 segue 吗？

> ID：12303485
> 
> 赞同：7
> 
> 时间：2012-09-06T15:30:30.093
> 
> 标签：ios, uitableview, segue

我有一个*UITableView*列出多种类型的对象，我想根据用户选择的对象类型选择不同的视图。

是否可以通过使用多个 segues 来做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T15:39:32.113

当然 ！**通过从 tableViewController**（不是一行，tableViewController 本身）拖到下一个视图来定义故事板上的所有 segue 。给他们ID，这样你就知道该打电话给哪个了。当您的所有转场都以可视方式定义后，请转到代码。在你的 tableView 的委托中`didSelectRowAtIndexPath`，只需调用你想要的 segue，通过检查`indexPath.row`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    switch (indexPath.row) {
        case 0: [self performSegueWithIdentifier:@"Segue0" sender:self];
                break;
        case 1: [self performSegueWithIdentifier:@"Segue1" sender:self];
                break;
        [...]
        default: break;
    }
} 
```

这样，当用户选择第一行时，ID 为“Segue0”的 segue 将被触发，依此类推。

您还可以添加以下行：在用户触摸后该行不会保持选中`[tableView deselectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1] animated:YES];`状态的开头！`didSelectRowAtIndexPath`

编辑：这适用于静态和动态单元格！小心从 tableViewController 中按住 ctrl-拖动你的 segue，而不是一个单元格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:24:43.627

另一种实现方式是：

*   在表格视图中为您要存储的每种类型的对象创建一个专门的可重用prototypeCell（或者从您的对象库中拖动一个新的单元格对象，或者单击现有的默认对象并复制/粘贴）。请记住为每个可重复使用的单元格填写一个唯一标识符，稍后您需要能够将它们区分开来（可能会调用

    [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier0"];

里面

```
(UITableViewCell *)tableView(UITableView *)tableViewcellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

*   按住 Ctrl 键单击每个原型单元格，然后拖动为每个单元格创建一个 segue

*   segues 将被自动解雇，只需要在他们被解雇时处理它们

如果每个可重复使用的单元格有一个转换，这很有效，这可能涵盖许多情况。

# google-chrome-extension - 如何使 Google Chrome 扩展示例工作？

> ID：12303486
> 
> 赞同：2
> 
> 时间：2012-09-06T15:30:32.137
> 
> 标签：google-chrome-extension

最近我决定写一个非常简单的谷歌浏览器扩展。它要做的就是在用户按下扩展按钮时使用 JavaScript 从网页中隐藏一些 DOM 元素。

由于我对 Chrome 扩展一无所知，所以我开始阅读教程，并且偶然发现了这个 Google 的示例：[一个没有图标的浏览器操作使页面变红](http://developer.chrome.com/extensions/examples/api/browserAction/make_page_red.zip)

这个样品真的很接近我想要做的。问题是我不能让它工作。每当我在 Chrome 中加载扩展程序时，我都可以看到此扩展程序的按钮，但是当我按下它时 - 没有任何反应。示例不起作用，可能我应该知道一些我还不知道的事情。

在你开始问我之前：

*   是的，我尝试重新启动浏览器；
*   我使用最新版本的 Chrome。

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:37:25.697

如果您打开示例 zip... 找到 backgrond.js... 编辑。找到写着：

```
null, {code:"document.body.style.background='red !important'"}); 
```

并删除“！重要”。所以它应该是：

```
null, {code:"document.body.style.background='red'"}); 
```

这就对了。只需保存并重新加载扩展，应该可以工作（除非页面有一个 !important 标志设置为背景）。

恐怕我不知道为什么“！important”标签不起作用，但我从来没有能够让它在扩展中工作。希望这里的其他人能够给出解释，也许可以解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:18:00.817

我想我可以帮助澄清导致扩展中断的“！important”覆盖属性。虽然我不是 100%，但我相信这个属性不允许用于涉及安全复杂性的问题。我有一个指向另一个 SO 线程的链接，它也可能有助于澄清这一点。

[我的 CSS 没有通过我的内容脚本注入](https://stackoverflow.com/questions/9721344/my-css-is-not-getting-injected-through-my-content-script)

我通过阅读本文假设您必须在清单文件中指定内容脚本时使用 !important 覆盖。否则，如果正在注入 css，则不需要 !important。再次不是100％。

# php - 哪里可以使用 PHP $_GET 超全局

> ID：12303488
> 
> 赞同：0
> 
> 时间：2012-09-06T15:30:42.950
> 
> 标签：php

PHP 超全局 $_GET 是否可以在表单标签之外按预期使用和工作？例如，我可以在表单标签之外执行 $_GET('select box id') 并让它按预期工作吗？

```
<?php
    ---Placeholder for DB login info---

    switch($_GET['select box id'])
    {
        case "text shown for second option of select box":
        $query = mysql_query("placeholder for actual query");
        $row = mysql_fetch_row($query);
        $textboxValue = $row[0];
        break;
    }      
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:32:05.103

> 可以在表单标签之外使用 PHP 超全局变量`$_GET`并按预期工作吗？

是的。PHP 代码在 HTML 中的位置完全无关紧要，除了确定输出将出现在文档中的什么位置。

> `$_GET['select box id']`

表单控件使用它们的名称作为提交键，而不是 id。

> `mysql_query`

阅读该[功能文档页面上的](http://php.net/mysql_query)红色大警告框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:37:32.717

如果这是用于登录信息，则无论如何您都不应该使用 get 请求 - 您应该使用 post.

但无论如何，是的，它应该工作。只要数据与查询一起发送，它就应该工作。

也就是说，您可能还想对一些基本的安全方面进行一些研究，例如验证和清理输入。否则，您可能会面临一些相当讨厌的攻击。

我会推荐 O'Reilly Press 的 Essential PHP Security 一书。我也会考虑使用 MySql PDO 之类的东西来进行数据库查询，因为它比简单地使用 mysql_query 更可靠和安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:32:21.580

超全球意味着可在任何地方/任何地方使用。

# asp.net-mvc - 用户按下“接受”按钮后，mvc jquery 传递表单值

> ID：12303491
> 
> 赞同：0
> 
> 时间：2012-09-06T15:30:58.707
> 
> 标签：asp.net-mvc, jquery

所以我有一个表单和一个提交按钮，可以将表单发布到一个动作中。但我想显示一个弹出窗口，用户可以在其中拒绝或接受协议。

这是我的jQuery

```
$(document).ready((function () {
            var dialog = $('#confirmation-dialog').dialog({
                autoOpen: false, width: 500, height: 600, resizable: false, modal: true,
                buttons: {
                    "Accept": function () {
                        $(this).dialog('close');
                        $.ajax({
                            type: 'POST',
                            data: {__RequestVerificationToken: $("input[name=__RequestVerificationToken]").val()}
                        });
                    },
                    "Cancel": function () {
                        $(this).dialog('close');
                    }
                }
            });
            $('#registration-submit').click(function (e) {
                var action = $(this.form);
                console.log(action);
                var form = $('form');
                dialog.dialog("open");
                return false;
            });
        })); 
```

我的问题是它会发布，但它只会发送我的 AntiforgeryToken，而不是表单的值。但是当它通过 TryupdateModel 时，由于某种原因它会通过但不会保存（因为丢失的数据没有在 formcollection 上传递）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:36:24.837

您没有发送表单的数据......您只是发送`__RequestVerificationToken:`您的 ajax 请求。

也许尝试：

```
$(this).dialog('close');
var dataObj = $('form').serialize(); 
dataObj.__RequestVerificationToken = $("input[name=__RequestVerificationToken]").val();
$.ajax({
    type: 'POST',
    data: dataObj
}); 
```

这样，您将表单输入中的值添加到数据中，然后将您的令牌添加到其中。

# hp-ux - 这些 HP-UX PA-RISC aCC 编译器选项是什么意思？

> ID：12303492
> 
> 赞同：0
> 
> 时间：2012-09-06T15:31:05.570
> 
> 标签：hp-ux, compiler-options, acc, pa-risc

我正在检查一个有 7 年历史的 C/C++ 系统的 Makefile。它由 HP aCC 编译，在 HP-UX PA-RISC 上运行。我在这里找到了许多 cflags 描述：http: [//h21007.www2.hp.com/portal/download/files/unprot/aCxx/Online_Help/options.htm](http://h21007.www2.hp.com/portal/download/files/unprot/aCxx/Online_Help/options.htm)，但这些我在任何地方都没有找到：

+Z、+DA2.0、+DS2.0、+W。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:27:52.407

给你：

*   +Z - 使编译器生成与位置无关的代码 (PIC) 以用于构建共享库。
*   +DA2.0 - 为 32 位或窄模式的 PA-RISC 2.0 生成代码
*   +DSmodel - 使用调整到指定模型的指令调度程序
*   +Warg1[,arg2,...,argn] - 选择性地抑制任何指定的警告消息，其中 arg1 到 argn 是有效的编译器警告消息编号

# perl - 在对齐序列中输入缺失数据

> ID：12303494
> 
> 赞同：-6
> 
> 时间：2012-09-06T15:31:07.863
> 
> 标签：perl

我想要一个简单的 perl 脚本，它可以帮助我在对齐序列中估算缺失的核苷酸：例如，我的 old_file 包含以下对齐序列：

```
seq1
ATGTC
seq2
ATGTC
seq3
ATNNC
seq4
NNGTN
seq5
CTCTN 
```

所以我现在想推断文件中的所有 N，并获得一个新文件，其中所有 N 都是根据特定位置的多数核苷酸推断出来的。我的 new_file 应该是这样的：

```
seq1
ATGTC
seq2
ATGTC
seq3
ATGTC
seq4
ATGTC
seq5
CTCTC 
```

具有用法的脚本：“impute_missing_data.pl old_file new_file”或任何其他方法将对我有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:44:05.393

这似乎做了所需要的

```
use strict;
use warnings;

use Fcntl 'SEEK_SET';

open my $fh, '<', 'old_file' or die $!;

my @counts;

while (<$fh>) {
  next if /[^ATGCN\s]/;
  my $i = 0;
  $counts[$i++]{$_}++ for /[ATGC]/g;
}

for my $maj (@counts) {
  ($maj) = sort { $maj->{$b} <=> $maj->{$a} } keys %$maj;
}

seek $fh, 0, SEEK_SET;

while (<$fh>) {
  s/N/$counts[pos]/eg unless /[^ATGCN\s]/;
  print;
} 
```

**输出**

```
seq1
ATGTC
seq2
ATGTC
seq3
ATGTC
seq4
ATGTC
seq5
CTCTC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:03:31.083

```
use warnings;
use strict;
my (@data, $counts, @max);
#read in the file
while (<>) {
  chomp;
  next if /seq/;
  my @sings = split //; 
  for (my $i = 0; $i < @sings; $i++) {
    $counts->[$i]{$sings[$i]}++ if $sings[$i] ne 'N';
  }
  push (@data, \@sings);
}
# get most freq letters
foreach my $col (@$counts) {
  my ($max, $maxk) = (0, '');
  foreach my $cell (keys %$col) {
    if ($col->{$cell} > $max) {
      ($max, $maxk) = ($col->{$cell}, $cell);
    }   
  }
  push (@max, $maxk);
}
# substitute Ns with most freq letters
foreach (my $i = 0; $i < @data; $i++) {
  my $row = $data[$i];
  for (my $i = 0; $i < @$row; $i++) {
    if ($row->[$i] eq 'N') {
      $row->[$i] = $max[$i];
    }   
  }
  print "seq".($i+1)."\n".join("", @$row), "\n";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T16:22:36.740

这是我评论中的脚本以更易读的形式：

```
#!/usr/bin/perl
use strict;
my @stat;
while(<>) {
  print and next if /^seq/;
  chomp;
  my @seq = split //;
  for my $i (0..$#seq){
    my ($e, %s) = ($seq[$i], %{$stat[$i]}); # read-only aliases
    if($e=~/N/){
      my $substitution = [sort {$s{$a} <=> $s{$b}} keys %s]->[-1];
      $seq[$i] = $substitution;
      warn "substituted N with $substitution in col $i, count $s{$substitution}\n";
    } else {
      $stat[$i]->{$e}++;
    }
  }
  print @seq, "\n"';
} 
```

要抑制`undefined`警告，请将它们静音（坏）或初始化统计信息：

```
for my $i (0..4) {
  for my $c (qw(A C G T)) {
    $stat[$i]->{$c} = 0;
} 
```

或者

```
my @stat = map +{map {$_ => 0} qw(A C G T)} 0..4; 
```

# java - Java WatchKey 在路径删除后仍然有效（仅限 Windows）

> ID：12303496
> 
> 赞同：1
> 
> 时间：2012-09-06T15:31:15.257
> 
> 标签：java, directory, nio

如果问题之前已经问过，请指出答案。

我正在阅读关于[观察目录更改](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)的本教程以及如果目录（路径）不再可用时程序应该退出的[示例- 已删除。](http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)

`SHIFT`仅当使用+删除（完全）文件时才会出现这种情况`Del`。

如果是“简单”删除（使目录/文件进入回收站的删除），`WatchKey`它仍然有效，就好像文件根本没有被删除一样。

这是一种令人沮丧的行为，因为用户可能会使用任何一种方式删除文件/目录，很可能是第二种方式。

如何确保在`WatchKey`“简单”删除后变为无效（按`Del`）？

在 Windows 7 上测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:08:15.410

> 如果目录（路径）不再可用，则示例程序应该退出 - 已删除

不，不是。如果注册的密钥用完，即目录变为空，它应该退出。您想要的是目录本身的删除监视。

# python - 给定分箱数据的python绘制简单直方图

> ID：12303501
> 
> 赞同：28
> 
> 时间：2012-09-06T15:31:24.573
> 
> 标签：python, plot, matplotlib, histogram

我有计数数据（其中 100 个），每个对应一个 bin（0 到 99）。我需要将这些数据绘制为直方图。但是，直方图会计算这些数据并且无法正确绘制，因为我的数据已经被分箱了。

```
import random
import matplotlib.pyplot as plt
x = random.sample(range(1000), 100)
xbins = [0, len(x)]
#plt.hist(x, bins=xbins, color = 'blue') 
#Does not make the histogram correct. It counts the occurances of the individual counts. 

plt.plot(x)
#plot works but I need this in histogram format
plt.show() 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-06T16:05:14.913

如果我理解您想要正确实现的目标，那么以下内容应该可以满足您的需求：

```
import matplotlib.pyplot as plt
plt.bar(range(0,100), x)
plt.show() 
```

它不使用`hist()`，但看起来您已经将数据放入 bin 中，所以没有必要。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-06T16:01:16.613

问题出在您的 xbin 上。你目前有

```
xbins = [0, len(x)] 
```

这将为您提供列表 [0, 100]。这意味着您只会看到 1 个 bin（不是 2 个）以 0 为界，以 100 为界。我不完全确定您想要从直方图中得到什么。如果你想有 2 个不均匀间隔的箱子，你可以使用

```
xbins = [0, 100, 1000] 
```

在一个 bin 中显示低于 100 的所有内容，在另一个 bin 中显示其他所有内容。另一种选择是使用整数值来获得一定数量的均匀间隔的 bin。换句话说

```
plt.hist(x, bins=50, color='blue') 
```

其中 bins 是所需的 bin 数量。

附带说明一下，每当我不记得如何使用 matplotlib 做某事时，我通常只会去[缩略图库](http://matplotlib.sourceforge.net/gallery.html)并找到一个看起来或多或少我想要完成的示例。这些示例都有随附的源代码，因此非常有用。matplotlib的[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.hist)也非常方便。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-13T02:34:21.610

酷，谢谢！这就是我认为OP想要做的事情：

```
import random
import matplotlib.pyplot as plt
x=[x/1000 for x in random.sample(range(100000),100)]
xbins=range(0,len(x))
plt.hist(x, bins=xbins, color='blue')
plt.show() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T16:02:51.790

我很确定你的问题是垃圾箱。它不是限制列表，而是 bin 边缘列表。

```
xbins = [0,len(x)] 
```

在您的情况下返回一个列表，其中包含`[0, 100]`指示您想要一个位于 0 的 bin 边缘和一个位于 100 的 bin。所以你得到一个从 0 到 100 的 bin。你想要的是：

```
xbins = [x for x in range(len(x))] 
```

返回：

```
[0,1,2,3, ... 99] 
```

这表示您想要的 bin 边缘。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-27T14:29:39.470

您也可以使用 matplotlib 的 hist 来实现这一点，不需要 numpy. 您基本上已经将垃圾箱创建为`xbins`. 在这种情况下`x`，将是您的权重。

```
plt.hist(xbins,weights=x) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T15:44:12.963

查看 matplotlib 文档中的直方图[示例](http://matplotlib.sourceforge.net/examples/pylab_examples/histogram_demo_extended.html)。您应该使用该[`hist`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.hist)功能。如果默认情况下它没有产生您期望的结果，那么在`hist`将数据提供给`hist`. 我不太清楚你想要达到什么目标，所以在这一点上我无能为力。

# git - 合并并推送功能分支到错误的远程分支。怎么修？

> ID：12303502
> 
> 赞同：0
> 
> 时间：2012-09-06T15:31:25.460
> 
> 标签：git

当地分支机构：-

> 1.  '特征/100'

和远程分支： -

> 1.  '掌握'
> 2.  '版本 2'

不小心，我已将我的功能分支“ **feature/100** ”合并到**主**分支，并将其**推**送到远程存储库。

而功能分支“ **feature/100** ”应该已合并到远程分支“ **Version2** ”中。

我应该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:45:40.017

使用`git revert -m1 <commit id of the merge>`. 合并的父编号在哪里`1`（以便应还原哪个合并父编号）。我认为它是`1`默认的，但它很少可能是`2`.

更多信息： http: [//git-scm.com/2010/03/02/undoing-merges.html](http://git-scm.com/2010/03/02/undoing-merges.html)

# dllimport - 外部和 DLL 导入

> ID：12303507
> 
> 赞同：0
> 
> 时间：2012-09-06T15:31:45.663
> 
> 标签：dllimport, extern

我的代码中有这几行看起来很奇怪，我正试图破译。有谁知道它说什么？

```
[DllImport("kernel32")]
private static extern int GetPrivateProfileString(string section, string key, string def, StringBuilder retVal, int size, string filePath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:38:54.383

该行称为 Platform Invoke，基本上它只是使 kernel32.dll 中的函数 GetPrivateProfileString 可用于您的程序。查看[http://www.pinvoke.net/default.aspx/kernel32.GetPrivateProfileString](http://www.pinvoke.net/default.aspx/kernel32.GetPrivateProfileString)以获取有关该特定功能的更多信息。

# c# - 跨网站的 ASP.net 通用菜单和导航栏

> ID：12303509
> 
> 赞同：0
> 
> 时间：2012-09-06T15:31:46.490
> 
> 标签：c#, asp.net, menu, twitter-bootstrap, navbar

我们想创建一个新网站，在所有页面（开始/登录页面除外）上都有一个通用菜单和导航栏。问题是我们将使用 twitter 引导框架，但不知道这是否可以仅通过框架实现（或任何 html + css 技巧）......

以前我们在这种情况下使用过 iframe，但这次我们更喜欢做一个无框架的网站，不知道框架在母版页上的表现如何......

有什么建议么？如果唯一的方法是使用母版页，您能否提供一些示例或链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:38:31.460

使用 asp.net 母版页。我认为这与 twitter 引导框架无关。

创建一个只有标题和正文容器的空父母版页。使用父母版页为起始页和登录页创建两个 Web 表单。使用父母版页创建子母版页并在子级上实现菜单。使用子母版页创建其他所有内容，以便您在每个页面上都有一个菜单。

如果您想要一个菜单​​较少的页面，请使用 parent.masterpage。如果您想要菜单版本，请使用 children.masterpage。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:38:58.157

[母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh%28v=vs.100%29.aspx)是要走的路。这是一个[步行](http://msdn.microsoft.com/en-us/library/ehszf8ax%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T15:44:07.143

您应该使用母版页。这是母版页上 asp.net 教程的链接：[http ://www.asp.net/web-forms/tutorials/master-pages](http://www.asp.net/web-forms/tutorials/master-pages)

# iphone - iPhone 显示宽度

> ID：12303510
> 
> 赞同：2
> 
> 时间：2012-09-06T15:31:48.657
> 
> 标签：iphone, html, css, mobile

据我了解，iPhone 上 Safari 的显示宽度为 640 像素。我已经建立了一个宽度为 640 像素的网站，但是当我在 iPhone 4 上查看它时，它只占用了 2/3 的屏幕。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:44:42.897

您可能需要指定 ViewPort 以确保 Safari 不会调整页面大小/缩放。

```
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" /> 
```

# nhibernate - NHibernate 不从连接表中删除记录，将其更新为空

> ID：12303519
> 
> 赞同：0
> 
> 时间：2012-09-06T15:32:04.773
> 
> 标签：nhibernate, join, mapping

我的映射（经过编辑和简化以保护不那么无辜的人）：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
           assembly="MyAssembly, Culture=neutral"
           namespace="MyAssembly" auto-import="false">
  <class name="Customer" table="Customers">
    <id name="Id" access="nosetter.camelcase-underscore" >
      <generator class="assigned"/>
    </id>
    <property name="blah"/>
    ...
    <property name="bleh"/>
    <join table="Addresses" optional="true">
      <key column="Id"/>
      <component name="Address" class="MyAssembly.Address, MyAssembly, Culture=neutral" access="field.camelcase-underscore">
        <property name="Street" />
        <property name="Number" />
      </component>
    </join>
  </class>
</hibernate-mapping> 
```

当我这样做时：

```
Address dir = new Address();
dir.Street = "Foo";
dir.Number = 27;
//// Previously loaded customer
cli.Address = dir;
//// Save repository, commit transaction 
```

这工作正常，并自动将新地址插入地址表。但是，如果我想删除地址：

```
//// Previously loaded customer with attached address
cli.Address = null;
//// Save repository, commit transaction 
```

也就是说，NHibernate 不会从 Addresses 表中删除行来更新它，而是将其所有字段设置为空，除了 Id。

我的映射有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:49:06.327

鉴于您的映射，NHibernate 正确执行。连接子句适用于将单个对象分布在多个表中的情况。通常，每个表中总会有一行用于对象。

另一方面，组件映射是当您想要一个细粒度的对象模型，但将数据存储在与所属类相同的表中时。如果该属性为 null，NHibernate 只能将组件使用的所有列设置为 null。组件列是连接表中唯一的非键列这一事实无关紧要。

也许您正在寻找一对一的映射？ [http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-onetoone](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-onetoone)

# java - 为枚举赋值的枚举

> ID：12303520
> 
> 赞同：0
> 
> 时间：2012-09-06T15:32:05.757
> 
> 标签：java

> **可能重复：**
> [如何将枚举值转换为 int？](https://stackoverflow.com/questions/8157755/how-to-convert-enum-value-to-int)

我正在尝试为我的枚举分配值，例如：

```
enum it { one=5,two=7}; 
```

我不敢相信我不记得如何做到这一点。

有人可以帮我吗？？

非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:33:36.613

```
enum it
{
    one(5), two(7);

    private int value;

    it(int value){this.value = value;}

    public int getValue(){return value;}
}; 
```

* * *

```
System.out.println(it.one.getValue()); 
```

**输出：**

```
5 
```

# c# - 从 PictureBox 中获取绘图区域

> ID：12303521
> 
> 赞同：0
> 
> 时间：2012-09-06T15:32:07.910
> 
> 标签：c#, picturebox

我遇到了`PictureBox`不同分辨率之间大小不同的问题。

我有一个需要适应的图像`PictureBox`，但我需要知道它的绘图大小，因为我需要自己调整大小（否则系统太慢了，我决定手动调整大小，这如果我知道所需的分辨率，效果很好）。

我试过`PictureBox.Height / Width`和`PictureBox.ClientRectangle.Height / Width`，但所有分辨率的值都是相同的。我如何设法获得实际的图纸尺寸？

初始化代码：

```
 // 
            // PicboxRed
            // 
            this.PicboxRed.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom)
                        | System.Windows.Forms.AnchorStyles.Left)
                        | System.Windows.Forms.AnchorStyles.Right)));

            this.PicboxRed.BackColor = System.Drawing.Color.DimGray;
            this.PicboxRed.BackgroundImageLayout = System.Windows.Forms.ImageLayout.Center;
            this.PicboxRed.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
            this.PicboxRed.Location = new System.Drawing.Point(19, 92);
            this.PicboxRed.Margin = new System.Windows.Forms.Padding(4, 4, 4, 4);
            this.PicboxRed.Name = "PicboxRed";
            this.PicboxRed.Size = new System.Drawing.Size(852, 840);
            this.PicboxRed.SizeMode = System.Windows.Forms.PictureBoxSizeMode.Normal;
            this.PicboxRed.TabIndex = 9;
            this.PicboxRed.TabStop = false;
            this.PicboxRed.Click += new System.EventHandler(this.PicboxRed_Click);
            this.PicboxRed.Paint += new System.Windows.Forms.PaintEventHandler(this.Picbox_Paint); 
```

我知道这与设置的锚点有关，但这可以让 PictureBox 在不同的分辨率下被很好地看到。我如何抓住那个真正的绘图区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:10:39.193

ClientSize 属性告诉您它有多大。ClientSizeChanged 事件会告诉您它何时因任何原因而更改，包括由于表单的 AutoScaleMode 属性而自动缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:39:54.227

`I tried PictureBox.Height / Width, and PictureBox.ClientRectangle.Height / Width, but that values are the same for all resolutions.`

我认为您正在寻找 dpi 设置：

```
int currentDPI = 0;

using (Graphics g = this.CreateGraphics())
{
    currentDPI = (int)g.DpiX;    
} 
```

此值应在具有不同分辨率和 dpi 设置的计算机上更改。

或者，也许您对获取当前屏幕分辨率感兴趣。他们可能会帮助：

`Rectangle resolution = Screen.PrimaryScreen.Bounds;`

# freemarker - Freemarker 在 IE8 上的渲染方式不同

> ID：12303525
> 
> 赞同：0
> 
> 时间：2012-09-06T15:32:30.483
> 
> 标签：freemarker

我们有一个用于记录行的模板

```
<input type="${inputType}" name="${variableName}.code" id="${variable}.${vnum}.${answer.code}" class="checkbox" value="${answer.code}"
             [#nested/] [#if (answer.textLength > 0) && scripting]onchange="showOtherBox( this, '${variable}.[#if descriptionHack]${variableNumber}[#else]${vnum}[/#if].${answer.code}.description' )"[/#if]
             [#if showValues && (existing == answer.code)]checked="checked"[/#if]/> 
```

在 IE8 上它呈现为这样

```
<span class="field">
<INPUT id=responses.8.L class=checkbox value=L type=checkbox name="responses['8'].answers['L'].code"> 
<LABEL for=responses.8.L>Award(s) for special accomplishment or performance related to activity participation (please list)</LABEL> 
<TEXTAREA id=responses.8.L.description class=" visible" rows=4 cols=60 name="responses['8'].answers['L'].description"></TEXTAREA> 
</span> 
```

在我们尝试过的所有其他浏览器上，它呈现为

```
<span class="field">
<input type="checkbox" name="responses['8'].answers['L'].code" id="responses.8.L" class="checkbox" value="L" onchange="showOtherBox( this, 'responses.8.L.description' )">
<label for="responses.8.L">Award(s) for special accomplishment or performance related to activity participation (please list)</label>
<textarea rows="4" cols="60" name="responses['8'].answers['L'].description" id="responses.8.L.description" class="visible" classname="visible"></textarea>
</span> 
```

不同之处在于 FTL 脚本中的 if 语句

```
[#if (answer.textLength > 0) && scripting] 
```

对除 IE 之外的所有内容都是如此。在 IE8 中，由于某种原因它为 false，因此它不会将 OnChange javascript 事件放在输入标记上。有没有人见过这样的事情？我们正在使用 Freemarker 2.3.9

更新，如果我打开 IE8 的兼容模式，它有点工作。但不完全是。当我这样做时，onchange 事件不会触发，直到复选框失去焦点。这与其他一切都非常不同。有没有一种快速的方法来解决这个问题而没有太多麻烦？我想我可以放一些东西，如果 ie8，插入 onclick 而不是 onchange。这可能有效，但我需要客户的授权才能像这样修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:35:25.950

由于 FreeMarker 仅在服务器上运行，因此不受浏览器直接影响。您应该`<!-- answer.textLength = ${answer.textLength}, scripting = ${scripting?string} -->`在此之前放置类似 ) 的内容`[#if]`，这样您就可以了解条件失败的确切原因，然后找出有问题的变量的值来自哪里，因为通常不是 FreeMarker 设置它。（准系统 FreeMarker 甚至无法检测浏览器类型。）

# ms-access - 与 TFS 2010 中的 Access 2003 .adp 持续集成...有可能吗？

> ID：12303528
> 
> 赞同：0
> 
> 时间：2012-09-06T15:32:44.993
> 
> 标签：ms-access, version-control, build, tfsbuild

我有一个使用 Access 2003 ADP 作为 UI 的项目。我最近发现，通过使用 MSSCCI 提供程序，我可以在 TFS 中添加这个项目并跟踪更改进行分支/合并。我想开始在 TFS 中进行构建，但我不确定从哪里开始。在办公室中，安装源代码管理插件后，可以选择从源代码管理构建数据库，这很有效。我在 codeplex 上阅读了一些关于 Office Interops 和这个项目的信息：http: [//buildmsaccessdb.codeplex.com/](http://buildmsaccessdb.codeplex.com/)

在阅读完所有材料后，我有点旋转=D。社区中是否有人有任何建议？是否有替代方案可以从 TFS 专门针对 Office 产品进行构建？

谢谢。

# c# - Web 服务总是返回空的纯文本/文本

> ID：12303529
> 
> 赞同：1
> 
> 时间：2012-09-06T15:32:46.507
> 
> 标签：c#, soap-client

一直使用`Service Reference`没有成功：

[Web 服务仅返回 XML](https://stackoverflow.com/questions/12294807/web-service-return-only-xml)

现在我正在使用原始 SOAP 消息来执行此操作：

```
XmlDocument doc = new XmlDocument();
                doc.Load("Service.xml");

                // create the request to your URL
                Uri wsHost = new Uri("http://www.rrr.net/services/Connect");
                HttpWebRequest request = (HttpWebRequest) WebRequest.Create(wsHost);

                // add the headers
                // the SOAPACtion determines what action the web service should use
                request.Headers.Add("SOAPAction", "act");

                // set the request type
                request.ContentType = "text/xml;charset=\"utf-8\"";
                request.Accept = "text/xml";
                request.Method = "POST";

                // add our body to the request
                Stream stream = request.GetRequestStream();
                doc.Save(stream);
                stream.Close();

                // get the response back
                using( HttpWebResponse response = (HttpWebResponse)request.GetResponse() )
                {
                    Stream dataStream = response.GetResponseStream();
                    StreamReader dataReader = new StreamReader(dataStream); 

                    // Use Linq to read the xml response
                    using (XmlReader reader = XmlReader.Create(dataStream))
                    { 
```

帖子是正确的，但`response`总是给我`text/plain`空的结果，响应头：

```
Headers = {Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/plain
Date: Thu, 06 Sep 2012 15:59:28 GMT

} 
```

SOAP 消息是，act 是函数：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://webService">
  <soapenv:Header/>
  <soapenv:Body>
    <web:act>
      <web:d1>1</web:d1>
      <web:d2>14</web:d2>
    </web:act>
  </soapenv:Body>
</soapenv:Envelope> 
```

我使用`SoapUI`，下面是来自 SoapUI 的原始请求，它返回一个 xml 结果：

```
POST http://www.rrr.net/services/Connect HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: ""
Content-Length: 516
Host: www.rrr.net
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:52:48.903

您必须在请求和服务接口中都指定一个操作。您可以使用下面显示的属性在接口成员上设置操作值，然后使用您使用的方法在请求中设置操作值，但通过指定您在合同中使用的操作名称：

**接口成员的属性**

```
[OperationContract Name="YourActionName"]
[WebInvoke (Method = "POST", UriTemplate = "YourActionName")]
Message YourServiceFunction(); 
```

**一种指定消息操作的方法**

```
Message inputMessage = Message.CreateMessage (MessageVersion.Soap, "YourActionName", reader); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:40:17.023

SOAP Web 服务需要指定动作/方法（并且不是空的）。如果您不知道要执行哪个操作，可以通过使用 queryString "?WSDL" 调用 Web 服务来查看 Web 服务 WSDL。IE`www.yourSite.com/your/Web/Service/URL?WSDL`

# android - 用于 Eclipse 的 Assus EEE PAD 变压器模拟器

> ID：12303532
> 
> 赞同：1
> 
> 时间：2012-09-06T15:33:03.323
> 
> 标签：android, android-emulator

全部

我正在开发在 Assus EEE Pad Transformer 上有一些问题的应用程序，所以我需要在 Assus EEE Pad Transformer 模拟器上进行测试，但是我搜索了很多我找不到 Assus EEE Pad Transformer 模拟器，请帮助我如何测试Assus EEE Pad Transformer 模拟器的应用程序。

# css - 使用 Font Awesome 图标作为项目符号

> ID：12303533
> 
> 赞同：12
> 
> 时间：2012-09-06T15:33:04.837
> 
> 标签：css, fonts, font-awesome

字体真棒的一个示例用例是这样的（取自[他们的示例](http://fortawesome.github.com/Font-Awesome/#examples)）：

```
<ul class="icons">
    <li><i class="icon-ok"></i> Lists</li>
    <li><i class="icon-ok"></i> Buttons</li>
    <li><i class="icon-ok"></i> Button groups</li>
    <li><i class="icon-ok"></i> Navigation</li>
    <li><i class="icon-ok"></i> Prepended form inputs</li>
</ul> 
```

只要列表项是 1 行，此列表就可以满足我的目的。但是如果列表项是多行的，那么第二行和进一步不正确缩进（默认情况下）。

如果这些图标可以用作标准的 css 项目符号，那就太好了，因为这样多行项目会自动缩进。

有没有一种简单而优雅的方法来实现这一点？如果我可以使用这样的标记，那就太棒了：

```
<ul class="icon-bullets">
    <li class="icon-ok">Lists</li>
    <li class="icon-ok">Buttons</li>
    <li class="icon-ok">Button groups</li>
    <li class="icon-ok">Navigation</li>
    <li class="icon-ok">Prepended form inputs</li>
</ul> 
```

即重用特定的图标类，但使它们成为 li 元素的一部分。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T14:47:52.603

约翰的回答是不正确的。Font Awesome 使用网络字体，而不是大背景图片！

应该注意的是，您可以简单地将类放在 li 标签上，如下所示：

```
<ul>
    <li class="icon-ok">Lists</li>
    <li class="icon-ok">Buttons</li>
    <li class="icon-ok">Button groups</li>
    <li class="icon-ok">Navigation</li>
    <li class="icon-ok">Prepended form inputs</li>
</ul> 
```

但是，有一个警告，它在 ie7 中不起作用，即使使用条件 ie7 样式表也是如此。列表项消失，只留下图标！如果您不支持 ie7，那么只需省略条件样式表，那么至少那些不幸使用 ie7 的人仍然能够阅读您的列表，没有图标！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T05:19:34.860

我知道我迟到了，但我认为任何解决方案，即使是选择的解决方案，都不能完全解决问题。这是关于尽可能准确地解决具体问题。

根据 OP 的核心问题：*“如果这些图标可以用作标准的 CSS 项目符号，那就太好了，因为这样多行项目会自动缩进。”*

我遇到了同样的问题，这就是我解决它的方法：在 . 中添加`padding-left:`一个，`<ul>`然后在.`margin-right:``margin-left:``li:before`

您将在演示中看到的基本上是这样的：`margin:0 5px 0 -15px;`.

***[演示](http://jsfiddle.net/eJXGV/1/)***

一些注意事项：

1.  此解决方案只需要 CSS，不需要任何额外的标记

2.  这适用于多行内容，因此如果您的内容换行到第二行或更多行，它将不会出现在图标/列表项下。

3.  没有必要使用像 Font Awesome 和 Bootstrap 这样的额外标记，这是完全错误的，因为我们都知道我们必须将内容与样式与功能分开。为了使用图标而添加额外的标记显然是代码膨胀。我的解决方案使用简单的标记，如下所示：

    ```
    <ul>
      <li>...</li>
      <li>...</li>
      <li>...</li>
    </ul> 
    ```

4.  由于无法加载字体，因此我使用`»`字符作为`content:'»'`值来说明图标/列表项。但是，我确实保留了所有`@font-face`声明，因此任何人都可以使用它并替换其字体文件的路径。像这样：

    ```
    url("path/to/font-name.woff") format("woff"), 
    ```

5.  您可能需要使用边距值`li:before`才能正确定位图标/列表项，在使用上述任何解决方案或 FontAwesome 和 Bootstrap 的解决方案时，无论如何您都必须这样做。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-03T20:46:27.067

时尚迟到...`icon-ok`从`li`'s 中删除类并将列表设置为使用图标作为项目符号。从 Font Awesome 详细信息页面中获取图标的 unicode 字符。在这种情况下`icon-ok`已迁移到`icon-check`版本 4。unicode 是相同的`f00c`。

```
ul.ok {
    list-style-type: none;
    margin-left: 0;
    padding-left: 1em;
}

ul.ok li:before {    
    font-family: 'FontAwesome';
    content: '\f00c';
    margin:0 5px 0 -15px;
    color: #f00;
}

<ul class="ok">
    <li>Lists</li>
    <li>Buttons</li>
    <li>Button groups</li>
</ul> 
```

[使用 Font Awesome 图标作为项目符号，带有单个列表项元素](https://stackoverflow.com/questions/12468359/using-font-awesome-icon-for-bullet-points-with-a-single-list-item-element)

![如何检查图标的代码](../Images/7431d88f40d5c789a8dc4e3cad8cc74a.png)

感谢@armfoot 提供检查员信息。我已经添加了这个截图来解释如何做，点击`::before`DOM 树中的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-27T18:24:05.003

对于多列列表，我使用这个：

```
ul.twocolumn, ol.twocolumn {
  -moz-column-count: 2;
  -moz-column-gap: 5px;
  -ms-column-count: 2;
  -ms-column-gap: 5px;
  -webkit-column-count: 2;
  -webkit-column-gap: 5px;
  column-count: 2;
  column-gap: 5px;
  list-style-position: inside; /* bugfix for hidden bullets/numbers */
} 
```

通常当你声明它时：

```
<ul class="fa-ul twocolumn">
  <li><i class="fa-li fa fa-whatever-icon"></i> foo</li>
  <li><i class="fa-li fa fa-whatever-icon"></i> bar</li>
</ul> 
```

但是，它不起作用......请注意，由于某种原因，Font Awesome 图标不会出现列数大于 1。使用 Chrome 进行测试，您将在切换 -webkit-column-count 时看到差异： 2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-14T13:28:58.423

在 Font Awesome 5 中，可以使用纯 CSS 来完成，如上述一些答案中的一些修改。

包括到 Font Awesome 的链接：

```
<link rel="stylesheet" href="../css/fontawesome-all.min.css"> 
```

为了简单起见，我将按如下方式使用 html，而无需单独的`ul`类`li`。

```
<ul>
    <li>Lists</li>
    <li>Buttons</li>
    <li>Button groups</li>
    <li>Navigation</li>
    <li>Prepended form inputs</li>
</ul> 
```

CSS

```
ul {
  list-style-type: none;
}

li:before {
  position: absolute;
  font-family: 'Font Awesome 5 free';
          /*  Use the Name of the Font Awesome free font, e.g.:
           - 'Font Awesome 5 Free' for Regular and Solid symbols;
           - 'Font Awesome 5 Brand' for Brands symbols.
           - 'Font Awesome 5 Pro' for Regular and Solid symbols (Professional License);
          */
  content: "\f1fc"; /* Unicode value of the icon to use: */
  font-weight: 900; /* This is important, change the value according to the font family name
                       used above. See the link below  */
  color: red;
} 
```

如果没有正确的字体粗细，它只会显示一个空白方块。

[https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements#define](https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements#define)

# java - 处理时间、延迟和响应时间的含义和计算公式

> ID：12303535
> 
> 赞同：5
> 
> 时间：2012-09-06T15:33:09.157
> 
> 标签：java, networking, jmeter, qa, performance-testing

任何人都可以从下图中验证处理时间、延迟和响应时间公式。我对响应时间公式有一些疑问。

如果您与我的这些公式有冲突，请给我证明参考。

![公式图片](../Images/6d80fa690a01830dde74983b2c8b48a3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:00:47.487

我会采取;

*   最坏情况下的延迟为 T8 - T1 也经过时间
*   处理时间 T6 - T3 也是响应时间，因为您可以从第一个字节开始处理并且仍然处理到最后一个字节。

如果您在获得最后一个字节之前无法在服务器上开始处理消息，那么您也必须使用最后一个字节来处理延迟，否则它会不一致。

我会假设服务器比客户端的性能调整得更高，即它可能从第一个数据包开始处理，但客户端可能需要整个消息来做任何有用的事情（这取决于客户端）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:09:41.070

我同意彼得关于处理时间和最坏情况延迟的观点：T6 - T3

但对于延迟，我会说它是 T7 -T1。我认为它是第一个字节的时间。

在 JMeter 中是：

```
JMeter measures the latency from just before sending the request to just  
after the first response has been received. Thus the time includes all the processing 
needed to assemble the request as well as assembling the first part of the response, 
which in general will be longer than one byte. Protocol analysers (such as Wireshark) 
measure the time when bytes are actually sent/received over the interface. The JMeter 
time should be closer to that which is experienced by a browser or other application
client. 
```

还请看：

*   [负载测试中的延迟时间](https://stackoverflow.com/questions/10023985/latency-time-in-load-testing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:46:49.820

来自[维基百科](http://en.wikipedia.org/wiki/Response_time_%28technology%29)：

> 在数据系统中，系统响应时间是从收到查询消息传输结束到开始向发起查询的站发送响应消息之间的时间间隔。

应该是 T5-T4（就像处理时间一样）。

# php - 为什么通过 PHP 上传时，发件人永远不会关闭（200 标头？），所以上传似乎永远不会结束

> ID：12303536
> 
> 赞同：1
> 
> 时间：2012-09-06T15:33:10.563
> 
> 标签：php, upload, header

我正在使用服务器端的 php 将文件上传（POST）到我的服务器。该文件已上传好，但我希望一旦上传，它会在屏幕上显示一些文本，这就是它的结尾。

但是，服务器似乎从来没有告诉发件人上传已收到并且一切正常。我假设它在等待 200 标题并且它永远不会到达，这听起来可能吗？可能是什么原因造成的？

# mysql - Django 会话清理被杀死

> ID：12303543
> 
> 赞同：1
> 
> 时间：2012-09-06T15:33:31.580
> 
> 标签：mysql, django

我尝试使用清理过期的 django 会话`./manage.py cleanup`，在按 Enter 后，它似乎做了几秒钟的事情，然后它返回的只是' `killed`'。我还尝试运行 mysql shell 并导航到该表并执行“ `select * from django_sessions;`”，然后我被从 shell 中踢出并返回 bash，并显示相同的消息：“ `killed`”。这里有什么问题？我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:07:05.270

似乎有些东西会杀死长时间运行的命令。这是共享主机上的常见情况。如果您不是此服务器的所有者/管理员，则应由实际所有者/管理员给出答案。

也许这些答案会对您有所帮助：[谁“杀死”了我的流程，为什么？](https://stackoverflow.com/questions/726690/who-killed-my-process-and-why)

# python - 如果另一个互斥参数为真，则将默认值设置为假

> ID：12303547
> 
> 赞同：11
> 
> 时间：2012-09-06T15:33:43.820
> 
> 标签：python, arguments, command-line-arguments, argparse

我意识到这很像[使用 argparse 模块在 Python 中设置两个互斥选项的默认选项，](https://stackoverflow.com/questions/9365486/setting-default-option-in-python-of-two-mutually-exclusive-options-using-the-arg)尽管从不同的角度来看（并且那里给出的答案似乎没有帮助）。

代码块（解析器是 argparse.ArgumentParser 的一个实例）：

```
mutex_group = parser.add_mutually_exclusive_group()
mutex_group.add_argument("--show", action="store_true", 
    dest="show", default=True)
mutex_group.add_argument("--insert", action="store_true", 
    dest="insert")

opts = parser.parse_args() 
```

如果既不指定`--show`也不`--insert`指定，我想默认为`--show`（因此`default=True`），但如果`--insert`使用则`opts.show`仍然设置为 true（因为默认），尽管它是互斥块的一部分。

当前代码在测试是否为 True 时检查是否未设置任何其他选项`opt.show`，即：

```
if opts.show and not opts.insert:
    do_something()
elif opts.insert:
    do_something_else() 
```

但这不会扩展（当您添加`--delete`到互斥组时会发生什么，等等）所以我正在寻找一种更好的方法来使所有其他变量都变为`opts.show`假，同时仍将其作为默认值。

阅读 argparse 文档，我认为自定义操作将是可行的方法，但看不到如何从其中访问互斥组的其他成员（理论是我可以遍历它们，如果其余的任何一个都设置好了）。另一种选择是反转 if 条件，但这似乎不干净（如果默认更改，if 语句的顺序也必须更改）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T15:58:35.033

在我看来，这`'store_const'`可能是一个更合适的行动（所有论点都指向同一个目的地）。

```
import argparse
parser = argparse.ArgumentParser()
mutex_group = parser.add_mutually_exclusive_group()
mutex_group.add_argument("--show", action="store_const", 
    dest="mutex", const="show")
mutex_group.add_argument("--insert", action="store_const", 
    dest="mutex", const="insert")
mutex_group.add_argument('--delete', action="store_const",
    dest="mutex", const="delete")

parser.set_defaults(mutex='show')
args = parser.parse_args()
print(args) 
```

现在您可以使用`args.mutex`它来确定要执行的操作。

# wordpress - 如何为 TinyMCE 高级编辑器添加“小型大写字母”样式以使用 WordPress 的“样式”下拉工具中的样式

> ID：12303548
> 
> 赞同：1
> 
> 时间：2012-09-06T15:33:46.520
> 
> 标签：wordpress, tinymce

Mystique 主题包括两个需要更新以允许自定义样式部分的文件。添加了“小型大写字母”样式，用于正确格式化法律期刊引文。为 TinyMCE 高级编辑器添加“小型大写字母”样式以使用 WordPress 中“样式”下拉工具中的样式的步骤是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T13:22:44.690

使用 TinyMCE 4，以下自定义设置函数将添加一个 SmallCaps 控件：

```
setup: function (ed) {
    //Adds smallcaps button to the toolbar
    ed.addButton('smallcaps', {
        title: 'Smallcaps',
        icon: 'forecolor',
        onclick: function (evt) {
            ed.focus();
            ed.undoManager.beforeChange();//Preserve highlighted area for undo
            ed.formatter.toggle('smallcaps');
            ed.undoManager.add();//Add an undo point
        },
        onPostRender: function () {
            var ctrl = this;
            ed.on('NodeChange', function (e) {
                //Set the state of the smallcaps button to match the state of the selected text.
                ctrl.active(ed.formatter.match('smallcaps'));
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T10:12:20.123

Goetz 给出的答案并不完整，因为如果您没有明确定义，TinyMCE 不知道您的“用户定义格式”。也许几年前就这样做了，但 4.7.x 版似乎没有这样做。除了他的答案之外，添加下面的代码（它可能需要 bevore *setup*）：

```
formats: {
    smallcaps: {
      inline: 'span',
      styles: {
        'font-variant': 'small-caps'
      },
      attributes: {
        title: 'smallcaps'
      }
    },
  },
  toolbar: 'smallcaps_button' 
```

我更喜欢通过*_button*或*_format 之*类的后缀稍微不同地命名格式和按钮，但这实际上不应该是一个问题。因此，它避免忘记在这里正确定义所有需要的部分（`format`, `toolbar`, `ed.addButton()`）。所以，我`toolbar`包含按钮*smallcaps_button*并且功能是*ed.addButton('smallcaps_button')*

而已。

# iphone - 如何像 Apple 的默认录音机一样在 AVAudioRecorder View 上实现红条？

> ID：12303552
> 
> 赞同：2
> 
> 时间：2012-09-06T15:33:51.127
> 
> 标签：iphone, audio-recording

我正在尝试以与 Apple 的默认录音机应用程序相同的视图和效果来实现 AVAudioRecorder 录音。我彻底搜索但找不到解决方案。有什么方法可以在不违反 Apple 规则的情况下实现这一点。

虽然我找到了一种在应用程序处于后台及其录制时显示红色条的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:10:50.000

我也尝试过这样做，我的研究使我得出结论，当应用程序在后台运行时，您可以通过添加

```
<key>UIBackgroundModes</key>
<array>
    <string>audio</string>
</array> 
```

到您的 *-info.plist 文件。但是，我认为当您的应用程序处于前台时，没有一种简单的方法可以启用此功能。在 iOS 6 及更高版本中，您可以更改状态栏颜色，但在此之前这是不可能的。因此，在 iOS 6 中，您可能可以将栏的颜色更改为红色，并在状态栏下方添加一个红色矩形来模仿效果。

# freemarker - 如何在freemarker中检查两个java对象是否相同

> ID：12303554
> 
> 赞同：1
> 
> 时间：2012-09-06T15:33:54.180
> 
> 标签：freemarker

我需要比较 freemarker 中的两个 java 对象是否相同。有没有办法检查freemarker中两个java对象的相等性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:02:48.030

不幸的是，从 2.3.19 开始就没有这种可能性了；可能会在 2.3.20 左右。您必须编写一个`TemplateMethodModelEx`来实现它，例如`sameObjects(p1, p2)`. 在这种情况下，您必须从参数`TemplateModel`-s 中提取原始对象。为此，您必须检查参数是否实现`AdapterTemplateModel`然后调用`AdapterTemplateModel.getAdaptedObject(Object.class)`。然后您可以将原始对象与`==`, 仍然在 Java 中进行比较，然后返回`true`/ `false`。

**更新：**因为我打算将这个贡献给 FreeMarker，所以我做了更多的研究。对此使用`AdapterTemplateModel`并不完全正确，因为它可能涉及转换（如 Python 到 Java），然后您会丢失原始对象的身份，从而得到假阴性。using`WrapperTemplateModel`看起来像解决方案，但事实证明它对 Jython 的实现是错误的......所以我看到的唯一解决方案永远不会给出不正确的结果（但可能会给出错误，因为不可能进行比较）是 with `BeanModel`。下面是具体实现：

```
package com.example;

import java.util.List;

import freemarker.ext.beans.BeanModel;
import freemarker.ext.beans.BeansWrapper;
import freemarker.template.TemplateBooleanModel;
import freemarker.template.TemplateMethodModelEx;
import freemarker.template.TemplateModelException;

/**
 * Checks if two values correspond to the same object. This only works if both
 * arguments are wrapped into {@link BeanModel}-s by the object wrapping
 * facility of FreeMarker, which is usually the case for objects that aren't
 * {@code Collection}-s, {@code Map}-s, {@code String}-s, {@code Number}-s,
 * {@code Date-s}, {@code Boolean}-s, Jython objects, Rhino objects or DOM
 * objects. If you are using pure {@link BeansWrapper} for wrapping, this is the
 * case for all objects. If not all the arguments are {@link BeanModel}-s, or
 * some of them are {@code null}-s, this will throw an exception.
 */
public class IsSameObjectMethodModel implements TemplateMethodModelEx {

    public Object exec(List args) throws TemplateModelException {
        if (args.size() != 2) {
            throw new TemplateModelException(
                    "Method expects exactly 2 arguments, but " +
                    args.size() + " was given.");
        }
        return toRawArg("1st", args.get(0)) == toRawArg("2nd", args.get(1)) ?
                TemplateBooleanModel.TRUE : TemplateBooleanModel.FALSE;
    }

    /**
     * Extracts the original object from the argument.
     * @param argName Used in error messages
     */
    private Object toRawArg(String argName, Object argVal)
    throws TemplateModelException {
        if (argVal == null) throw new TemplateModelException(
                "Method doesn't support null arguments, but the " +
                argName + " argument was null");
        if (argVal instanceof BeanModel) {
            return ((BeanModel) argVal).getWrappedObject(); 
        } else {
            throw new TemplateModelException(
                    "Method only supports arguments that were wrapped by " +
                    "FreeMarker (or something else) so that they extend " +
                    "freemarker.ext.beans.BeanModel, but " +
                    "the " + argName + " argument wasn't like that (class: " +
                    argVal.getClass().getName() + "). To avoid this error, " +
                    "avoid comparing objects that are Collection-s, " +
                    "Map-s, String-s, Number-s, Date-s, Boolean-s, Jython " +
                    "objects, Rhino objects or DOM objects.");
        }
    }

} 
```

要使用它，请将其放入数据模型中，或者假设您有一些用于导入/包含的模板，假设`utils.ftl`：

```
...
[#assign isSameObject = "com.example.IsSameObjectMethodModel"?new()]
... 
```

然后在模板中：

```
[#import "utils.ftl" as u]
...
[#if u.isSameObject(o1, o2)]
  same
[#else]
  different
[/#if] 
```

# ruby - Node.JS：如何从外部应用程序获取服务器的端口？

> ID：12303557
> 
> 赞同：0
> 
> 时间：2012-09-06T15:34:03.943
> 
> 标签：ruby, node.js, port

我正在开发一个与 Node.JS 应用程序通信的 Ruby 应用程序，我想知道是否有办法在我的 Ruby 应用程序中获取 Node 应用程序使用的端口。

如果没有，您可以强制在选定的端口上运行，而不更改节点应用程序中的代码吗？

我找到[了这个](https://stackoverflow.com/questions/4840879/nodejs-how-to-get-the-servers-port)，但它在 JS 中。

干杯！

编辑：这可以通过 -p port

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:56:12.993

您可以使用[环境变量](http://nodejs.org/api/process.html#process_process_env)为应用程序提供端口号。或将其作为命令行参数提供。

# c# - 如何在 OSX 上使用 C# 运行 shell 脚本？

> ID：12303563
> 
> 赞同：7
> 
> 时间：2012-09-06T15:34:21.810
> 
> 标签：c#, macos, unity3d

我想使用 C# 来执行一个 shell 脚本。基于类似的问题，我得出了一个看起来像这样的解决方案。

```
System.Diagnostics.Process.Start("/Applications/Utilities/Terminal.app","sunflow/sunflow.sh"); 
```

它当前打开终端，然后使用默认应用程序（在我的情况下为 Xcode）打开 shell 文件。更改默认应用程序不是一种选择，因为需要为其他用户安装此应用程序。

理想情况下，该解决方案将允许 shell 文件的参数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T15:42:49.600

我现在无法使用 Mac 进行测试，但以下代码适用于 Linux，并且应该适用于 Mac，因为 Mono 非常接近 Microsoft 的核心 .NET 接口：

```
ProcessStartInfo startInfo = new ProcessStartInfo()
{
    FileName = "foo/bar.sh",
    Arguments = "arg1 arg2 arg3",
};
Process proc = new Process()
{
    StartInfo = startInfo,
};
proc.Start(); 
```

关于我的环境的一些注意事项：

*   我专门创建了一个测试目录来仔细检查这段代码。
*   我在子目录 foo 中创建了一个文件 bar.sh，代码如下：

    ```
    #!/bin/sh
    for arg in $*
    do
        echo $arg
    done 
    ```

*   我`Main`在 Test.cs 中围绕上面的 C# 代码包装了一个方法`dmcs Test.cs`，并使用`mono Test.exe`.

*   最终输出为“arg1 arg2 arg3”，三个标记用换行符分隔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-12T00:43:20.640

谢谢亚当，这对我来说是一个很好的起点。但是，由于某种原因，当我尝试使用上述代码（更改为我的需要）时，我遇到了错误

```
System.ComponentModel.Win32Exception: Exec format error 
```

请参阅下面给出上述错误的代码

```
ProcessStartInfo startInfo = new ProcessStartInfo()
               {
                       FileName = "/Users/devpc/mytest.sh",
                       Arguments = string.Format("{0} {1} {2} {3} {4}",  "testarg1", "testarg2", "testarg3", "testarg3", "testarg4"),
                       UseShellExecute = false,
                       RedirectStandardOutput = true,
                       CreateNoWindow = true
                   };
                  Process proc = new Process()
                  {
                    StartInfo = startInfo,
                  };
                   proc.Start();
                   while (!proc.StandardOutput.EndOfStream)
                   {
                       string result = proc.StandardOutput.ReadLine();
                       //do something here
                   } 
```

并花了一些时间想出了下面，它在我的情况下工作 - 以防万一有人遇到这个错误，试试下面

工作解决方案：

```
 var command = "sh";
    var scriptFile = "/Users/devpc/mytest.sh";//Path to shell script file
    var arguments = string.Format("{0} {1} {2} {3} {4}",  "testarg1", "testarg2", "testarg3", "testarg3", "testarg4");
    var processInfo = new ProcessStartInfo()
    {
        FileName = command,
        Arguments = arguments,
        UseShellExecute = false,
        RedirectStandardOutput = true,
        CreateNoWindow = true

    };

    Process process = Process.Start(processInfo);   // Start that process.
    while (!process.StandardOutput.EndOfStream)
    {
        string result = process.StandardOutput.ReadLine();
        // do something here
    }
    process.WaitForExit(); 
```

# windows-7 - Mercurial 克隆失败，系统找不到指定的路径

> ID：12303565
> 
> 赞同：6
> 
> 时间：2012-09-06T15:34:33.197
> 
> 标签：windows-7, mercurial, clone

我正在为我的 Maven 应用程序尝试发布：执行，但在执行 Mercurial 结帐作为流程的一部分时它会失败。从命令提示符尝试相同的命令会失败，但会提供更多详细信息：

```
hg clone -r Simple-Marauroa-0.02.05 https://javydreamercsw@bit
bucket.org/javydreamercsw/simple-marauroa-java "Z:\NetBeans\Simple Marauroa\Simp
le Marauroa Java\Simple Marauroa Parent\target\checkout"
adding changesets
adding manifests
adding file changes
added 226 changesets with 3379 changes to 2264 files
updating to branch default
abort: Z:\NetBeans\Simple Marauroa\Simple Marauroa Java\Simple Marauroa Parent\t
arget\checkout\Simple Marauroa Parent/Card Game Interface DataBase Implementatio
n/src/main/java/com/reflexit/magiccards/core/storage/database/controller/CardCol
lectionHasCardJpaController.java: The system cannot find the path specified 
```

起初我以为该文件不在存储库中，但它确实存在。如果您想知道 Z，是一个 USB 驱动器，但我已经能够从同一个驱动器发布较小的项目。在我的桌面上执行相同的命令可以正常工作。

这是在 Windows 7 上完成的，我猜这似乎与漫长的道路有关。

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T15:43:18.253

将 workingDirectory 参数与 C:\checkout 这样的本地较短路径一起使用就可以了。

# multithreading - Node.js 将带有函数定义的对象发送到工作线程

> ID：12303566
> 
> 赞同：9
> 
> 时间：2012-09-06T15:34:38.233
> 
> 标签：multithreading, function, node.js, cluster-computing, worker

所以我正在使用 Node.js 开发一个项目，我想打开一些额外的线程来更有效地处理处理负载。但是我正在使用带有函数定义的类，当我尝试将这些对象发送到工作线程时，对象中定义的函数消失了，我只剩下对象中的其他字段。有没有办法向工作人员发送一个对象并保留函数，以便可以在工作人员中调用它们？

```
var cluster = require('cluster');

if(cluster.isMaster){
    Monster = function(species){
        this.attack = function(){
            console.log('CHOMP');
        };
        this.name = species;
    };
    var vamp = new Monster('vampire'),
    worker   = cluster.fork();
    worker.send({'monster' : vamp});
    }
else{
    process.on('message', function(msg) {
        console.log(msg.monster); //this logs "{ name: 'vampire' }"  
        msg.monster.attack(); //TypeError: Object #<Object> has no method 'attack'
    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:51:44.997

不，没有办法在线程之间传递函数。您只能传递 JS 普通对象（仅限数据）并使用当前线程中定义的函数处理它（例如使用接收到的数据创建新对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T08:06:49.487

查理，我知道你在一年前问过这个问题，但我想做一些非常相似的事情，我遇到了你还没有标记答案的问题。我想我会对它进行“刺探”，并向您展示我对您的代码所做的事情。这种组织代码的不同方式对我来说是我的 node.js 工作中非常可接受的解决方法。我很确定这给了你一种方法来完成你想要的，即使你不能以你想要的方式去做。

在集群代码之外声明你的“类”，如下所示：

```
var cluster = require('cluster');

var Monster = function(species){
    this.attack = function(){
        console.log('CHOMP!');
    };
    this.die = function() {
        console.log("Oh, what did I eat?  I don't feel so good....\r\n");
        process.exit(0);
    };
    this.scare = function() {
        console.log("BOO! I am a " + this.name + "!");
    };
    this.name = species;
};

if(cluster.isMaster){
    worker = cluster.fork();
    worker.send({'species' : 'Vampire'});
}
else{
    process.on('message', function(msg) {
        if(typeof msg.species !== "undefined") {
            myMonster = new Monster(msg.species);
            myMonster.scare();
            myMonster.attack();
            myMonster.die();
        }
    });
} 
```

试一试，看看这是否是您可以接受的答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T10:23:45.870

好的，偶然发现了这个答案，我觉得奇怪的是没有人提出这个问题，但这可能是一个比问题更现代的功能：

[评估](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval)

```
let str = "() => { console.log('test') }"
let func = eval(str)
func() 
```

认为这里发生了什么很明显，您可以将任何字符串解析为 javascript，您可以将字符串发送给工作人员，因此您可以使用函数构建和对象：

```
let obj = { a: "() => { ... }" } 
```

并将对象发送过来。（JSON.stringify(obj) 首先，然后你必须先解析对象，然后分别解析所有子字符串）

# java - 无法在 Java 中输出正确的哈希。怎么了？

> ID：12303567
> 
> 赞同：4
> 
> 时间：2012-09-06T15:34:38.640
> 
> 标签：java, android, sha

在我的 Android 应用程序中，我有一个 SHA256 哈希值，我必须使用 RIPEMD160 消息摘要算法进一步对其进行哈希处理。

我可以输出任何字符串的正确 sha256 和ripemd160 哈希值，但是当我尝试用ripemd160 对sha256 哈希值进行哈希处理时，我得到一个不正确的哈希值。

根据在线哈希计算器，字符串“test”（全部小写）的 SHA256 值为：

```
9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08 
```

字符串 'test' 的 RIPEMD160 值为：

```
5e52fee47e6b070565f74372468cdc699de89107 
```

根据在线计算，使用成熟的 sha256 散列哈希得到的值是：

```
4efc1c36d3349189fb3486d2914f56e05d3e66f8 
```

我的应用程序给我的是：

```
cebaa98c19807134434d107b0d3e5692a516ea66 
```

这显然是错误的。

这是我的代码：

```
public static String toRIPEMD160(String in)
{
    byte[] addr = in.getBytes();
    byte[] out = new byte[20];
    RIPEMD160Digest digest = new RIPEMD160Digest();
    byte[] sha256 = sha256(addr);
    digest.update(sha256,0,sha256.length);
    digest.doFinal(out,0);
    return getHexString(out);
}

public static byte[] sha256(byte[] data)
{
    byte[] sha256 = new byte[32];
    try
    {
        sha256 = MessageDigest.getInstance("SHA-256").digest(data);
    }
    catch(NoSuchAlgorithmException e)
    {}

    return sha256;
} 
```

对于ripemd160 算法，您需要bouncycastle 和java.security.MessageDigest for sha256。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:42:07.010

您的“在线计算器”结果是使用 SHA-256 对字符串“test”的字节进行散列，将该散列的结果转换为十六进制字符串，然后获取与该十六进制字符串的 ASCII 字符对应的字节并进行散列的结果第二次。这与您的 Java 代码非常不同，后者将来自第一个散列的字节直接传递给第二个散列，而不将它们打印为十六进制并将这些字符转换回其间的字节。值为 254（十进制）的单个字节在十六进制中变为“fe”，当转换回字节时变为两字节序列 [0x66, 0x65]。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:13:20.000

你的哈希工作正常。问题是您使用的在线计算器正在处理您的输入：

```
9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08 
```

作为*字符串*而不是字节数组。换句话说，它将每个字符视为一个字节，而不是将字符对解析为十六进制的字节。如果我将其作为字符串提供给在线计算器，我确实得到了你所得到的：

```
4efc1c36d3349189fb3486d2914f56e05d3e66f8 
```

但是，您将输出视为字节数组而不是 a `String`，这会给您带来不同的结果。您应该将原始 SHA256 哈希编码为字符串，然后将编码后的字符串传递给哈希函数。我看到你有一个`getHexString`方法，所以我们将使用它。

```
public static String toRIPEMD160(String in) {
    try {
        byte[] addr = in.getBytes();
        byte[] out = new byte[20];
        RIPEMD160Digest digest = new RIPEMD160Digest();

        // These are the lines that changed
        byte[] rawSha256 = sha256(addr);
        String encodedSha256 = getHexString(rawSha256);
        byte[] strBytes = encodedSha256.getBytes("UTF-8");
        digest.update(strBytes, 0, strBytes.length);

        digest.doFinal(out, 0);
        return getHexString(out);
    } catch (UnsupportedEncodingException ex) {
        // Never happens, everything supports UTF-8
        return null;
    }
} 
```

如果您想知道它是否有效，请取 的值`encodedSha256`并将其放入在线哈希计算器中。只要计算器使用 UTF-8 编码将字符串转为字节数组，它就会匹配你的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:07:47.100

要获取`byte[]`摘要的可打印版本，请使用以下代码：

```
StringBuffer hexString = new StringBuffer();
for (int i=0;i<out.length;i++) {
    hexString.append( String.format("%02x", 0xFF & out[i]) );
} 
```

然后打电话`hexString.toString();`

# multithreading - C# 从类中设置剪贴板数据

> ID：12303574
> 
> 赞同：0
> 
> 时间：2012-09-06T15:35:14.293
> 
> 标签：multithreading, text, clipboard

我有一个公共类，在那个类中我有一个设置 Clipboard.Text 的 void 并且我有一个线程，我从中调用该函数，每次我调用它时我都会得到

> 在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。

我尝试了以下方法：

```
 Thread t = new Thread(Worker);
        t.SetApartmentState(ApartmentState.STA);
        t.Start(); 
```

但我仍然收到错误，我什至试过 [STAThread] 我的函数看起来像这样

```
 public void Set(string s)
    {

        Clipboard.SetText(s);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:56:42.187

我相信它告诉您将`STAThread`属性放在您的主要功能上，如下所示：

```
[STAThread]
static void Main()
{
    // Your code
} 
```

您说您尝试了 STAThread，但它是在主函数还是您正在调用的函数上？

# html - 远程服务器返回错误：(407) 需要代理身份验证

> ID：12303576
> 
> 赞同：0
> 
> 时间：2012-09-06T15:35:33.537
> 
> 标签：html

我正在使用以下代码使用 itextsharp dll 从网页生成 pdf。

但我收到以下错误。远程服务器返回错误：(407) 需要代理身份验证。

我的代码：

```
 Response.ContentType = "application/pdf";
        Response.AddHeader("content-disposition", "attachment;filename=TestPage.pdf");
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        this.Page.RenderControl(hw);
        StringReader sr = new StringReader(sw.ToString());
        Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
        HTMLWorker htmlparser = new HTMLWorker(pdfDoc);

        PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
        pdfDoc.Open();

        htmlparser.Parse(sr);
        pdfDoc.Close();
        Response.Write(pdfDoc);
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T17:08:51.707

我遇到了同样的问题，我通过从我的 html 文件中的*!DOCTYPE html*标记中删除 url 解决了这个问题。

即，我更换了：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

和

```
<!DOCTYPE html> 
```

进行此更改后，HtmlParser.Parse 命令正常运行并生成了 .pdf，而没有给我 (407) 代理身份验证错误。

# sorting - MSB 优先基数排序

> ID：12303577
> 
> 赞同：-3
> 
> 时间：2012-09-06T15:35:34.847
> 
> 标签：sorting

正如书中给出的那样，基数排序通常是从 LSB 到 MSB 完成的。但是我认为通过使用 MSB 到 LSB，我们可以将输入元素划分为更小的分区。现在我必须构建一个示例来说明 MSB 优先基数排序可能比 LSB 优先基数排序渐进地差。这是我的分配问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:49:09.103

设排序范围为[1,n2]，即我们需要在[1,n]范围内两次应用桶排序。如果我们使用 MSB 优先排序，那么时间界限是 ∑(i=1 到 n) O(ni +n)，其中 ni 是桶中（MSB 的）元素的数量。LSB 的范围是 [1, n]。同样对 [1, n] 范围内的 m 个数字进行排序需要时间 O(m + n)。∑(i=1 to n) O(ni +n) = n + ∑(i=1 to n) n 的值可以是Ω(n2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T02:37:42.490

基数排序并不像第一次出现所暗示的那样有限。它现在是许多 GPGPU 排序的核心（哇！双音排序又回到了壁橱里）。我写了使基数排序适用于许多数据集的基本方法，其中键可以由 memcmp(3) 在这个[关于基数排序的谷歌文档中排序](http://goo.gl/eZeqJI)---将图表复制到 stackoverflow 文本框中是超出我的:-)最大的“障碍”是不遵循快速排序的“分而治之”方法，因为它重复了 MSB 基数排序的昂贵启动成本。“分治法”的基数排序等价物是将输入集减少为已排序和未排序范围的列表，并在每次传递中一起处理所有剩余的未排序范围。. 高温高压

# php - 哪个是最适合在 Wordpress 中设置 cookie 的钩子？

> ID：12303578
> 
> 赞同：2
> 
> 时间：2012-09-06T15:35:35.523
> 
> 标签：php, wordpress, cookies, hook

嗯，这就是问题。
我在想一些之前那个`init`钩子。如果另一个插件进行某些重定向或任何意外行为，是否存在最佳选择？

# javascript - javascript window.close，再次

> ID：12303585
> 
> 赞同：0
> 
> 时间：2012-09-06T15:36:00.323
> 
> 标签：javascript, window

如果我没有正确完成研究，我很抱歉，但找不到我需要的答案，所以这里是：

在我的主页上，我使用 mainPlayer = window.open(); 打开一个新窗口；

此窗口保持打开状态，直到用户单击 mainPlayer.close(); 事件。（或者只是 x 关闭窗口）

然而，这个想法是让玩家在浏览其余页面的同时继续玩游戏成为可能。

但是一旦用户离开打开 mainPlayer 窗口的页面，对 mainPlayer 窗口的引用似乎就丢失了。

如何从站点的其他页面检查 mainPlayer 窗口是否打开并在单击事件时将其关闭？

谢谢约翰

**编辑**

我检查了这个线程：[查找以前由 window.open 打开的窗口](https://stackoverflow.com/questions/2455158/find-window-previously-opened-by-window-open) 并按照答案建议进行操作，但没有运气。但也许我误解了这个想法。

我所做的是：

我建立

```
function tjek_ClosePlayer()
{
var playerUrl = 'custom_inserts/custom_player.php';
var mainPlayer= window.open('', 'mainPLayer', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=605, height=100') ;
if(mainPLayer.location == 'about:blank' ){ mainPlayer.location = playerUrl ; }
mainPLayer.close();
} 
```

然后从刷新的页面调用函数onclick。没运气。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:00:23.337

当您关闭父窗口时，对弹出窗口的引用确实会被破坏。我想这是无法通过代码控制的。

您可以做的一件事是在打开弹出窗口时写出一个 cookie，弹出窗口可以定期检查并采取行动。

例如：`X='opened'`在打开弹出窗口之前写出一个名为的 cookie。在弹出窗口中定期检查 的值，`X`一旦发现等于`'close'`，删除 cookie 并关闭弹出窗口 - 通过`window.close()`

*注意：*如果您有父页面以及从同一域提供的弹出页面，这将更容易。

# mysql - PHPFOG 和 MySql

> ID：12303586
> 
> 赞同：0
> 
> 时间：2012-09-06T15:36:02.530
> 
> 标签：mysql, connection, phpfog

我正在玩 PHPFog，结果我得到了一个 MySql 数据库。我试图弄清楚如何通过成功消息连接到它。

PHPFog 说使用这个：

```
mysql_connect(
  $server = getenv('MYSQL_DB_HOST'),
  $username = getenv('MYSQL_USERNAME'),
  $password = getenv('MYSQL_PASSWORD'));
mysql_select_db(getenv('MYSQL_DB_NAME')); 
```

所以我基本上将我的变量插入到上面？还是我做一些不同的事情？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:02:53.490

是的，您可以简单地将您的主机、用户、密码和数据库名称插入其中。`getenv`使用来检索这些值没有什么神奇的。

但是，请注意，该 PHP api 中的 mysql_connect() 和相关函数已被破解。您应该切换到使用 MySQLi [http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php) 或 PDO [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)。

# asp.net-mvc-4 - 如何覆盖 MVC Web API 中的 [Authorize] 属性？

> ID：12303589
> 
> 赞同：1
> 
> 时间：2012-09-06T15:36:10.953
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我有一个在类级别使用 [Authorize] 属性的 MVC Web Api 控制器。这使得所有 api 方法都需要授权，但我想创建一个名为 [ApiPublic] 的属性来覆盖 [Authorize] 属性。对于普通的 MVC 控制器，[这里](http://farm-fresh-code.blogspot.com/2011/04/default-authorization-filter-provider.html)描述了一种类似的技术。

我尝试创建一个基于 System.Web.Http.AuthorizeAttribute 的 AuthorizeAttribute，但是如果我将它放在类级别具有 [Authorize] 的 api 方法上，则不会调用任何被覆盖的事件。任何人都知道如何覆盖 Web api 的授权？

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class ApiPublicAttribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.HandleUnauthorizedRequest(actionContext);
    }

    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.OnAuthorization(actionContext);
    }

    protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T15:47:38.050

我可以建议您改用 [AllowAnonymous] 吗？

您可以将此属性赋予任何方法，它将覆盖您在类级别指定的 Authorize 属性，从而避免您编写自己的属性。

# c# - 加密 web.config 部分

> ID：12303590
> 
> 赞同：3
> 
> 时间：2012-09-06T15:36:16.097
> 
> 标签：c#, asp.net, vb.net, visual-studio, web-config

在 .NET 4.0 网站中，哪些 web.config 部分可以加密？我读到并非所有部分都可以加密，但我找不到任何详细说明哪些部分可以加密的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:40:17.027

从[MSDN docs](http://msdn.microsoft.com/en-us/library/hh8x3tas.aspx)中可以清楚地看出，只要该部分不是这些部分之一，就可以使用带有选项和要加密的配置***元素的名称***的工具来加密和解密`web.config` **部分：**`Aspnet_regiis.exe``–pe`

 *> 以下是无法使用受保护配置加密的配置部分的列表：***processModel、runtime、mscorlib、startup、system.runtime.remoting、configProtectedData、satelliteassemblies、cryptographySettings、cryptoNameMapping 和 cryptoClasses***。建议您使用其他加密敏感信息的方法，例如 ASP.NET 设置注册表控制台应用程序 (Aspnet_setreg.exe) 工具，以保护这些配置部分中的敏感信息。

以下是加密所有其他可能部分所需的内容：

[加密和解密配置部分](http://msdn.microsoft.com/en-us/library/zhhddkxy%28v=vs.100%29.aspx)

[演练：使用受保护的配置加密配置信息](http://msdn.microsoft.com/en-us/library/dtkwfdky%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T13:05:54.557

诸如文件之类的配置文件`Web.config`通常用于保存敏感信息，包括**用户名**、**密码**、**数据库连接字符串**和**加密密钥**。这就是为什么我们应该始终以加密形式保存这些敏感部分。

**您可以加密的部分：**

*   `<appSettings>`
*   `<connectionStrings>`
*   `<identity>`
*   `<sessionState>`

**您无法加密的部分：**

*   `<processModel>`
*   `<runtime>`
*   `<mscorlib>`
*   `<startup>`
*   `<system.runtime.remoting>`
*   `<configProtectedData>`
*   `<satelliteassemblies>`
*   `<cryptographySettings>`
*   `<cryptoNameMapping>`

> **请记住：**加密和解密数据会产生性能开销。要将此开销降至最低，请仅加密配置文件中存储敏感数据的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T06:06:17.943

加密

转到命令提示符 C:\Windows\Microsoft.NET\Framework\v4.0.30319 中的以下目录>

1.  加密连接字符串 Web 配置部分的命令并加密 ShopAPI IIS 应用程序 web.config 文件。

**aspnet_regiis -pe "connectionStrings" -app "/ShopAPI"**

**aspnet_regiis -pd "connectionStrings" -app "/ShopAPI"***

# ios5 - 使用图像设置 backgroundView 时缺少分组的 UITableView 的单元格分隔符

> ID：12303591
> 
> 赞同：1
> 
> 时间：2012-09-06T15:36:19.857
> 
> 标签：ios5, uitableview

我有一个带有自定义 UITableViewCell 类的分组 UITableView，并且我正在向每个单元格添加自定义背景图像。但是，当我这样做时，单元格的分隔符不可见。如果只是将表格样式切换为普通而不是分组，则会显示分隔符。

我需要分组表 - 如何显示分隔符？

这是我的代码：

```
@interface MyCustomTableViewCell : UITableViewCell

@end

@implementation MyCustomTableViewCell

// because I'm loading the cell from a xib file
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self)
    {
        // Create a background image view.  
        self.backgroundView = [[UIImageView alloc] init];
    }
    return self;
}

// MyViewController

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //
    // standard cell dequeue + create cell code here
    //

    //
    // Configure the cell background now
    //
    UIImage *backgroundImage = [UIImage imageNamed:@"odd_row.png"];
    if (indexPath.row % 2 == 0)
    {
        backgroundImage = [UIImage imageNamed:@"even_row.png"];    
    }

    UIImageView *backgroundView = (UIImageView *)cell.backgroundView;
    backgroundView.image = backgroundImage; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:48:22.807

当您将 subView 提供给您的单元格时，它将自动隐藏分隔符。因此，尝试将分隔线添加到图像本身。所以它会给你分隔符的外观。

一切顺利。

# android - 更改键盘输入语言

> ID：12303593
> 
> 赞同：19
> 
> 时间：2012-09-06T15:36:26.610
> 
> 标签：android

我正在用两种不同的语言开发一个 android 应用程序。当用户单击“更改语言”按钮时，它会要求从两种不同的语言选项中选择语言并根据该语言更改键盘。

例如：用户选择“阿拉伯语”语言，然后键盘输入语言应自动从英语变为阿拉伯语。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T15:44:56.670

这真的不太可能。您可以使用 stackoverflow 上已经存在的许多解决方案来更改用户区域设置：

[以这里为例](https://stackoverflow.com/questions/10701882/android-change-language-programmatically)，或者[这里为另一个](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)。

但是，这只会更改语言环境。你会遇到的问题是键盘本身就是一个应用程序。因此，您不能直接从您的应用程序更改它，也不能保证您的用户将拥有“阿拉伯语”字符集或插件或其他任何内容，因为他们使用的键盘应用程序。

如果您希望完成所需的工作，您唯一真正可靠的解决方案是创建自己的键盘输入。否则，将由用户将其键盘更改为阿拉伯语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-07T19:02:48.340

（API 24+）：如果您使用的是`TextView`/ `EditText`，那么您可以调用[TextView#setImeHintLocales(LocaleList)](https://developer.android.com/reference/android/widget/TextView#setImeHintLocales(android.os.LocaleList))

```
textView.setImeHintLocales(new LocaleList(new Locale("zh", "CN"))); 
```

**注意：**如果您希望新的“提示”立即生效，您需要调用`InputMethodManager#restartInput(View)`.

# google-chrome - 有什么方法可以在 chrome 扩展中检查后退/前进历史记录到会话中

> ID：12303597
> 
> 赞同：2
> 
> 时间：2012-09-06T15:37:05.890
> 
> 标签：google-chrome, google-chrome-extension

我们有实用程序来检查 Mozilla [canGoBack](https://developer.mozilla.org/en-US/docs/en-US/XUL/Property/canGoBack)和[canGoForward](https://developer.mozilla.org/en-US/docs/en-US/XUL/Property/canGoForward)的前后历史记录。

chrome 扩展是否存在相同的实用程序？

我进行了很多搜索，但没有找到任何适当的线索来检查 chrome extension 的相同内容。

如果有人有任何想法，请告诉我。将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:35:15.597

不确定这是否会有所帮助，但我认为此链接可能有助于阐明该主题。

[如何在 Chrome 扩展程序中收听“返回”、“下一步”等历史事件？](https://stackoverflow.com/questions/8960602/how-to-listen-to-history-events-like-go-back-go-next-in-chrome-extension)

# jpa - 如何管理与单向映射相同类型的一对一和一对多？

> ID：12303598
> 
> 赞同：2
> 
> 时间：2012-09-06T15:37:08.347
> 
> 标签：jpa, one-to-many, one-to-one, schemaexport

我正在尝试为两个或多个用户之间的私人消息实现模型。

这意味着我有两个实体：

*   用户
*   私人信息

用户模型不应该被编辑，所以我试图建立一个单向关系：

```
@Entity (name = "User")
@Table (name = "user")
public class User implements Serializable {
@Id
String username;
String password;
// something like this ...
} 
```

PrivateMessage 模型针对多个接收者，并且只有一个发送者。所以我需要这样的东西：

```
@Entity (name = "PrivateMessage")
@Table (name = "privateMessage")
@XmlRootElement
@XmlType (propOrder = {"id", "sender", "receivers",
        "title", "text", "date", "read"})
public class PrivateMessage implements Serializable {

    private static final long serialVersionUID = -9126766942868177246L;

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    private String title;

    @NotNull
    private String text;

    @NotNull
    @Temporal(TemporalType.TIMESTAMP)
    private Date date;

    @NotNull
    private boolean read;

    @NotNull
    @ElementCollection(fetch = FetchType.EAGER, targetClass = User.class)
    private Set<User> receivers;

    @NotNull
    @OneToOne
    private User sender;

    // and so on
} 
```

不会生成相应的“privateMessage”表，只满足 PM 和许多接收者之间的关系。我对此感到困惑。每次我尝试设置“mappedBy”属性时，我的 IDE 都会将其标记为错误。

用户实体不知道映射它的私人消息似乎是一个问题。

我在这里做错了什么？我已经解决了一些与此类似的情况，但这些解决方案都不会在这里起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:39:17.663

我现在知道我的问题的答案：

“read”字段是 MySQL 的保留关键字：http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

所以我将字段更改为未读，现在表格已成功生成。

此外，我认为从 PrivateMessage 到用户的正确映射是 @ManyToMany，因为在 PM 中可以有多个用户地址，并且用户可以接收多个 PM。“发件人”字段仍为 @OneToOne。

现在所有表都已成功生成。主要问题是，我使用了保留的 MySQL 关键字并且阻止了表的生成。解决该问题后，很容易找出映射的正确配置。

# scala - 如何在 Scala 2.10 中反映注释？

> ID：12303603
> 
> 赞同：9
> 
> 时间：2012-09-06T15:37:29.230
> 
> 标签：scala, reflection, annotations, scala-2.10

我试图发现一个特征的值是否有一个与之关联的注释。在查看了 Scala 2.10-M7 反射 API 之后，我认为*getAnnotations*方法（位于*Symbol*中）可能是一个很好的选择，但它返回一个空列表，如下面的 REPL 会话所示：

```
scala> class W extends scala.annotation.Annotation
defined class W

scala> trait A { @W val a: Int }
defined trait A

scala> typeOf[A].members.last
res0: $r.intp.global.Symbol = value a

scala> res0.getAnnotations
res1: List[$r.intp.global.AnnotationInfo] = List() 
```

这些“注释”与我要处理的注释相同吗？我怎么知道*a是否用**W*注释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:23:47.743

看起来像一个错误：[https ://issues.scala-lang.org/browse/SI-6325](https://issues.scala-lang.org/browse/SI-6325)

更新。实际上这不是一个错误，而是注释在 Scala 中如何工作的非显而易见方式的组合。有一种方法可以使特征中的抽象注释 val 按需要工作。有关更多详细信息，请查看上述链接中的讨论。

# javascript - 使用 jQuery 在 IE8 中平移 div

> ID：12303604
> 
> 赞同：0
> 
> 时间：2012-09-06T15:37:30.207
> 
> 标签：javascript, jquery, html, internet-explorer-8

我在尝试使用 jQuery mousemove、mouseup 和 mousemove 事件在 IE8 中平移 div 时遇到问题。一旦我按下 mousedown，直到我释放鼠标按钮并检测到 mouseup 时才会检测到 mousemove，我必须再次按下鼠标按钮。

这是javascript：

```
// ********** CLICK AND DRAG MAP PANNING ********** //
            var mouseDown = false;
            var mouseX = 0;
            var mouseY = 0;
            var originalLeft = $("#layout").offset().left;
            var originalTop = $("#layout").offset().top;

            $("#layout").mousedown(function(event){
                mouseDown = true;
                mouseX = event.pageX;
                mouseY = event.pageY;
                originalLeft = $("#layout").offset().left;
                originalTop = $("#layout").offset().top;
                return false;
            });

            $(document).mouseup(function(){
                mouseDown = false;
                return false;
            });

            $(document).mousemove(function(event){
                if (mouseDown == true) {
                    var panLeft = (event.pageX - mouseX);
                    var panTop = (event.pageY - mouseY);
                    var left = originalLeft + panLeft;
                    var top = originalTop + panTop;

                    // Constrain the map
                    var container = $("#map");
                    var map = $("#layout");

                    if (left >= container.offset().left) {
                        left = container.offset().left;
                    } else if (left + map.width() <= container.offset().left + container.width()) {
                        left = container.offset().left + container.width() - map.width();
                    }

                    if (top >= container.offset().top) {
                        top = container.offset().top;
                    } else if (top + map.height() <= container.offset().top + container.height()) {
                        top = container.offset().top + container.height() - map.top();
                    }

                    $("#layout").offset({ left: left, top: top });
                } else {
                    return false;
                }
            });
            // ********** ********** ********** // 
```

这是html：

```
<div id="map">
    <div id="layout">
        <img src="images/map.png" alt="map"/>
    </div>
</div> 
```

#layout div 中的图像设置为与 div 相同的大小。我认为在 IE8 中可能存在问题，它认为我正在尝试拖动图像。不过，不确定是否是这种情况，我曾考虑将其设为背景，但由于 IE 不使用 background-size 属性，因此我无法正确调整其大小。如果我将图像缩小以使用背景，则在放大时会变得模糊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:59:43.647

可能是因为您绑定`mousedown`到`#layout`，而另外两个绑定到`document`. 您可能还想尝试添加：

```
if ( 'attachEvent' in document ) {
    document.attachEvent('ondragstart', function() { return false; });
} 
```

防止在IE中拖拽

# javascript - 如何让我的脚本连续提交两个表单？

> ID：12303606
> 
> 赞同：0
> 
> 时间：2012-09-06T15:37:38.607
> 
> 标签：javascript, ajax, greasemonkey

我有两页，每页一张表格。当您提交第一个表单时，您将使用第二个表单移动到第二页。
如何在一个 Greasemonkey 脚本中提交两种表格。

一步步：

1.  打开 Page_1
2.  点击提交按钮
3.  提交操作将我们移至 Page_2
4.  Click submit_button_2

Note that both pages have the same URL, but Page_1 shows on 'GET', Page_2 on 'POST'. (Editor's note: They may be AJAX-powered forms or submit-to-same-page forms.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:18:29.953

将两个 url 添加到 @include 列表并遵循以下伪代码：

```
if (isUrl1) {
    submitFormAtUrl1;
} else {
    submitFormAtUrl2;
} 
```

例子：

```
// @include http://domain/page1.php
// @include http://domain/page2.php

...

if ("/page1.php" == location.pathname) {
    form1.submit();
} else {
    form2.submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:58:42.130

如果您*总是*希望单击这些表单，请使用如下脚本。这种方法也适用于 AJAXified 表单/页面，例如您的：

```
// ==UserScript==
// @name     _Submit either of 2 forms
// @include  {{{Page_1}}}
// @include  {{{Page_2}}}
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design change
    introduced in GM 1.0.
    It restores the sandbox.
*/

waitForKeyElements ("SUBMIT_BUTTON_1 CSS SELECTOR", clickOnSubmitButton);
waitForKeyElements ("SUBMIT_BUTTON_2 CSS SELECTOR", clickOnSubmitButton);

function clickOnSubmitButton (jNode) {
    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:44:14.260

一些示例代码会有所帮助，但同时提交两个表单的最简单方法是将它们合并到一个页面中。如果您希望在视觉上分解这两个表单，您可以使用 jQuery 来隐藏表单的第二部分，直到用户单击按钮，然后隐藏第一部分并显示第二部分。

另一种选择是提交第一个表单，然后将其所有响应添加到第二页上的服务器端隐藏表单元素。

# visual-studio-2010 - don't add my files in xap file (phonegap)

> ID：12303607
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:37:48.847
> 
> 标签：visual-studio-2010, windows-phone-7, cordova

I don't add files in xap file built visual studio in phonegap project.

Noticed that js files are added. But, for example, images do not show (adding all folders)

What do I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:16:22.800

您是否已将相关文件条目添加到`ManifestProcessor.js`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:52:18.290

这个 VS 2010，添加文件属性：资源，但文件 BuildManifestProcessor.js 解析内容链接。从文件中创建属性并构建操作：内容。

我不知道为什么没有在 *.csproj 中添加资源文件。

# frame - NSTextView frame issue inside NSTableView

> ID：12303610
> 
> 赞同：1
> 
> 时间：2012-09-06T15:37:52.990
> 
> 标签：frame, nstableview, nstextview

I want to put a attributed string on a nstextview, and manually calculate the height of the textview and row

```
-(CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row 
```

inside

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
    {
        WBMessageTableCellView *result = [tableView makeViewWithIdentifier:@"wbCell" owner:self];

        //do some calculation, and update textview's frame
        textView.frame = CGRectMake(57.0f, 36.0f-height, 380.0f, height);
    } 
```

height is the calculated result for NSTextView.

everything is fine for the first time, ![enter image description here](../Images/52c2dc06e9446add37b9b5f2e3ea7e79.png)

but if I scroll, the TextView starts move down, ![enter image description here](../Images/fd1fcb98b94a624eaa91385ef8ae55b0.png)

it has been bugs me for a day, does anyone knows why? thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:21:06.080

我自己想办法。

答案是我需要覆盖`prepareForReuse`，并将单元格的框架重置为原始大小，所以计算很好。

# c# - 构建项目时缺少资产消息

> ID：12303613
> 
> 赞同：0
> 
> 时间：2012-09-06T15:37:56.350
> 
> 标签：c#, visual-studio-2010, xna, xna-4.0

我正在创建一个 3d 游戏，因此一直在为 3d 模型引入 .fbx 文件，到目前为止没有任何问题。但是，我的一个 .fbx 文件现在正在构建时创建缺少资产错误消息。错误信息是：

*错误 1 ​​缺少资产“C:\Users\RICHARD\Documents\Visual Studio 2010\Projects\Basketball\Basketball\BasketballContent”。C:\Users\RICHARD\Documents\Visual Studio 2010\Projects\Basketball\Basketball\BasketballContent\court.fbx 篮球*

.fbx 文件已导出以包含模型所需的纹理。此外，我之前能够成功使用 .fbx 文件，而不会出现丢失的资产消息，并在我的 xna 游戏中看到模型。

我不确定我可以做些什么来导致此消息，因为我更改了解决方案中的代码，也更改了模型上的任何主要内容。

其他 3d 模型不受影响。我尝试重命名文件但没有成功。我也尝试加载原始文件但没有成功。我也一直在清理项目并重建，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:39:01.540

自发布问题以来，我发现我使用的模型存在问题，导致从 3ds max 导出错误。它现在已修复，我可以构建该项目。

# bitmap - 在 WPF 应用程序中使用 kinect 1.5 sdk 将字节 [] 数组转换为位图

> ID：12303614
> 
> 赞同：0
> 
> 时间：2012-09-06T15:38:02.933
> 
> 标签：bitmap, byte, kinect, emgucv

我正在使用 kinect skd 1.5 和 WPF 应用程序来模拟鼠标事件。为此，我正在使用 kinect 传感器。听说我使用 depthFrames 来获取手的距离并跟踪手。我已经正确地跟踪了手。但要进行手势识别，我必须使用灰度图像。我可以使用 depthFrame 得到手。但它返回 byte[] 数组。有没有办法将此字节数组转换为灰度图像。为了进行手势识别，我将 EmguCV 用于 openCV 包装器。这是我的源代码。但是当我转换时，我的位图对象-> 静态成员有错误说“无法取消引用表达式。指针无效”。我怎样才能正确地完成这个过程。请帮助我..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using System.Windows.Forms;
using Emgu.CV.Structure;
using Emgu.CV;
using System.IO;
using System.Drawing;
using System.ComponentModel;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;

namespace SkelitonApp
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    byte[] pixeData;
    private WriteableBitmap colorBitmap;
    KinectSensor kinectsensor = KinectSensor.KinectSensors.FirstOrDefault(s => s.Status == KinectStatus.Connected);
    public MainWindow()
    {

        InitializeComponent();

    }

    const int skeletonCount = 6;
    Skeleton[] allSkeletons = new Skeleton[skeletonCount];

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        kinectsensor.Start();
        kinectsensor.AllFramesReady+=new EventHandler<AllFramesReadyEventArgs>(kinectsensor_AllFramesReady);
        kinectsensor.ColorStream.Enable();
        kinectsensor.DepthStream.Enable();
        kinectsensor.SkeletonStream.Enable();
    }

    void kinectsensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {

        Skeleton first = GetFirstSkeleton(e);
        if (first == null)
        {
            return;
        }
        GetCameraPoint(first, e);
        //set scaled position
        /*ScalePosition(headImage, first.Joints[JointType.Head]);
        ScalePosition(leftEllipse1, first.Joints[JointType.HandLeft]);
        ScalePosition(rightEllipse2, first.Joints[JointType.HandRight]);*/

        using (DepthImageFrame handDepthFrame = e.OpenDepthImageFrame())
        {
            byte[] handBytes = null;
            SkeletonFrame newskeletonFrame;
            if (handDepthFrame == null)
            {
                return;
            }
            using (newskeletonFrame = e.OpenSkeletonFrame())
            {
                if (newskeletonFrame == null)
                {
                    return;
                }

            }
            handBytes = GenerateColoredBytes(handDepthFrame, newskeletonFrame, first);
            int stride = handDepthFrame.Width * 4;
            image2.Source =
                BitmapSource.Create(handDepthFrame.Width, handDepthFrame.Height, 96, 96, PixelFormats.Bgr32, null, handBytes, stride);

             //Hear is the place that i have the error(nnn bitmap variable)
            Bitmap nnn = BitmapSourceToBitmap2(BitmapSource.Create(handDepthFrame.Width, handDepthFrame.Height, 96, 96, PixelFormats.Bgr32, null, handBytes, stride));

            Console.WriteLine("aa");
        }
    }
    public static System.Drawing.Bitmap BitmapSourceToBitmap2(BitmapSource srs)
    {
        System.Drawing.Bitmap btm = null;
        int width = srs.PixelWidth;
        int height = srs.PixelHeight;
        int stride = width * ((srs.Format.BitsPerPixel + 7) / 8);
        IntPtr ptr = Marshal.AllocHGlobal(height * stride);
        srs.CopyPixels(new Int32Rect(0, 0, width, height), ptr, height * stride, stride);
        btm = new System.Drawing.Bitmap(width, height, stride, System.Drawing.Imaging.PixelFormat.Format1bppIndexed, ptr);
        return btm;
    }

    private byte[] GenerateColoredBytes(DepthImageFrame handDepthFrame, SkeletonFrame newskeletonFrame, Skeleton first)
    {

       short[] rawDepthdata=new short[handDepthFrame.PixelDataLength];
       handDepthFrame.CopyPixelDataTo(rawDepthdata);
        Byte[] pixels=new byte[handDepthFrame.Height*handDepthFrame.Width*4];

        DepthImagePoint rightHandPoint = handDepthFrame.MapFromSkeletonPoint(first.Joints[JointType.HandRight].Position);

        int DistanceToHand = rightHandPoint.Depth;
        const int BlueIndex = 0;
        const int GreenIndex =1;
        const int RedIndex = 2;

        int handDistanceMax = DistanceToHand + 10;
        int handDistancemin = DistanceToHand - 60;
        //int handAreaDiff = handDistanceMax - handDistancemin;

        for (int depthIndex = 0, colorIndex = 0; depthIndex < rawDepthdata.Length && colorIndex < pixeData.Length; depthIndex++, colorIndex += 4)
        {
            int player = rawDepthdata[depthIndex] & DepthImageFrame.PlayerIndexBitmask;
            int depth = rawDepthdata[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

            /*if (depth < 900)
            {
                pixels[colorIndex + BlueIndex] = 255;
                pixels[colorIndex + GreenIndex] = 0;
                pixels[colorIndex + RedIndex] = 0;

            }*/

            if (depth <handDistanceMax && depth>handDistancemin)
            {
                pixels[colorIndex + BlueIndex] = 255;
                pixels[colorIndex + GreenIndex] = 0;
                pixels[colorIndex + RedIndex] = 0;

            }

        }

        return pixels;
    }

    private void ScalePosition(FrameworkElement element, Joint joint)
    {
        /*Joint scaledJoint = joint.ScaleTo(1280, 720);

        Canvas.SetLeft(element, scaledJoint.Position.X);
        Canvas.SetTop(element, scaledJoint.Position.Y); */
    }

    private void GetCameraPoint(Skeleton first, AllFramesReadyEventArgs e)
    {
        using (DepthImageFrame depth = e.OpenDepthImageFrame())
        {
            if (depth == null)
            {
                return;
            }

            //map a joint location to a point on the depth map
            DepthImagePoint headDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.Head].Position);
            DepthImagePoint leftDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.HandLeft].Position);
            DepthImagePoint rightDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.HandRight].Position);

            //map a depth point to a point in the color image
            ColorImagePoint headColorPoint =
                depth.MapToColorImagePoint(headDepthPoint.X,headDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);

            ColorImagePoint leftColorPoint =
                depth.MapToColorImagePoint(leftDepthPoint.X, leftDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);

            ColorImagePoint rightColorPoint =
                depth.MapToColorImagePoint(rightDepthPoint.X, rightDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);

            //set location

            //System.Windows.Forms.Cursor.Position = new System.Drawing.Point(rightColorPoint.X,rightColorPoint.Y);

            double screenWidth = Screen.PrimaryScreen.WorkingArea.Width;
            double screenHeight = Screen.PrimaryScreen.WorkingArea.Height;
            double windowWidth = Convert.ToInt32(image1.Width);
            double windowHeight = Convert.ToInt32(image1.Height);
            double x1 = rightColorPoint.X;
            double y1 = rightColorPoint.Y;
            double posX = (x1*100/ windowWidth);
            posX = posX / 100 * screenWidth;

            double posY = (y1 * 100 / windowHeight);
            posY = posY / 100 * screenHeight;

          //  System.Windows.Forms.Cursor.Position = new System.Drawing.Point((int)posX, (int)posY);

           /*
            CameraPosition(headImage,headColorPoint);
            CameraPosition(leftEllipse1, leftColorPoint);
            CameraPosition(rightEllipse2, rightColorPoint);
            */

        }
    }

    private void CameraPosition(FrameworkElement element, ColorImagePoint point)
    {

        Canvas.SetLeft(element,point.X-element.Width/2);
        Canvas.SetTop(element, point.Y - element.Height / 2);

    }

    private Skeleton GetFirstSkeleton(AllFramesReadyEventArgs e)
    {
        ////////////////////////
        bool receiveData = false;
        using (ColorImageFrame colorImageFrame = e.OpenColorImageFrame())
        {
            if (colorImageFrame != null)
            {
                if (pixeData == null)
                {
                    pixeData = new byte[colorImageFrame.PixelDataLength];
                }
                colorImageFrame.CopyPixelDataTo(pixeData);
                receiveData = true;

                this.colorBitmap = new WriteableBitmap(this.kinectsensor.ColorStream.FrameWidth, this.kinectsensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

            }
            else
            {
                // apps processing of image data is taking too long, it got more than 2 frames behind.
                // the data is no longer avabilable.
            }

        }
        if (receiveData)
        {
            this.colorBitmap.WritePixels(
                   new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                   this.pixeData,
                   this.colorBitmap.PixelWidth * sizeof(int),
                   0);
            image1.Source = this.colorBitmap;
        }

        ///////////////////////////

       using(SkeletonFrame skeletonFrameData=e.OpenSkeletonFrame())
       {
           if (skeletonFrameData == null)
           {
               return null;
           }

           skeletonFrameData.CopySkeletonDataTo(allSkeletons);

           //get the first tracked skeleton
           Skeleton first=(from s in allSkeletons
                               where s.TrackingState==SkeletonTrackingState.Tracked
                               select s).FirstOrDefault();

            return first;
       }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:48:07.737

回答问题：如何将字节数组转换为位图？

```
 public static Bitmap ToBitmap(this byte[] pixels, int width, int height, PixelFormat format)
    {
        if (pixels == null)
            return null;

        var bitmap = new Bitmap(width, height, format);

        var data = bitmap.LockBits(
            new System.Drawing.Rectangle(0, 0, bitmap.Width, bitmap.Height),
            ImageLockMode.ReadWrite,
            bitmap.PixelFormat);

        Marshal.Copy(pixels, 0, data.Scan0, pixels.Length);

        bitmap.UnlockBits(data);

        return bitmap;
    } 
```

我不太确定这是否能解决您的问题。请更新您的问题，解释什么方法或代码行有问题。

# xml - 如何在以“时间跨度”格式表示的 XSLT 中求和持续时间

> ID：12303619
> 
> 赞同：1
> 
> 时间：2012-09-06T15:38:29.327
> 
> 标签：xml, xslt

在这个代码挑战中，我必须创建一个 XSLT 转换，它将计算所有 TestResut 节点的迭代持续时间。简而言之，TestResults 运行了多长时间。

```
 <TestResults>
        <TestResult>
            <Iteration duration="00:00:02.6312623" />
            <Iteration duration="00:01:03.5725194" />
            <Iteration duration="00:00:07.5725194" />
        </TestResult>
        <TestResult>
            <Iteration duration="00:00:04.6312623" />
            <Iteration duration="00:01:03.6777194" />
            <Iteration duration="00:02:07.5723194" />
        </TestResult>
    </TestResults> 
```

Sum 不能直接在 TestResults/TestResult/Iteration/@duration xpath 上完成，而是在此处需要转换为表示时间的刻度，我在问：对所有持续时间求和避免同时多次转换的最佳做法是什么？

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
      <xsl:output method="xml" indent="yes"/>

      <xsl:template match="/">
        <xsl:variable name="TotalDuration" select="sum(TestResults/TestResult/Iteration/@duration)"/>

        <Summary>
          <Duration>
            <xsl:value-of select="$TotalDuration"/>
          </Duration>
        </Summary>
      </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:31:54.700

这是 XSLT 1.0 还是 2.0？在 2.0 中，对日期/时间算法有很多支持。在 1.0 中，查看 EXSLT 日期/时间库。

# java - Is there a reliable way to get the name of a Plugin's JAR file?

> ID：12303623
> 
> 赞同：2
> 
> 时间：2012-09-06T15:38:39.540
> 
> 标签：java, jar, minecraft, bukkit

Using the bukkit API, is it possible to make a call that would do something like the following pseudocode:

```
Bukkit.getPluginManager().getPlugin("PluginName").getJarFile(); 
```

Where for a plugin like MobBountyReloaded, it would return `plugins/MobBountyReloaded_v235.jar`.

I tried just looking for files using well-known naming-schemes like just appending `.jar` or `<version>.jar` to the name of the plugin, but that doesn't always yield correct results. The above example fails because the version number in the `plugin.yml` file is just `235` and not `_v235`, and some plugins use schemes like `<PluginName>-<Version>-<buildnumber>.jar`.

Is there a simple way to accomplish this? The File information for every loaded plugin must be *somewhere* in memory, no?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:44:01.543

If you have a class loaded from the plugin, you can use the code source feature to get the jar from which the class was loaded.

```
Bukkit.getPluginManager().getPlugin("PluginName").getClass().getProtectionDomain().getCodeSource().getLocation(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:49:52.780

in your org.bukkit.plugin.java.JavaPlugin subclass,

```
this.getFile().getAbsoluteFile(); 
```

returns full jar file name with path where just this.getFile() returns something like this: "plugins\clj-minecraft-1.0.1-SNAPSHOT-standalone.jar"

in my case I needed this: "file:/S:/cb/plugins/memorystone-2.0.0-SNAPSHOT.jar" as an URL(not URI) which was: this.getFile().toURI().toURL();

tested in [org.bukkit/bukkit "1.4.5-R0.3-SNAPSHOT"]

# jquery - 如何选择父 div 内容

> ID：12303625
> 
> 赞同：-3
> 
> 时间：2012-09-06T15:38:43.127
> 
> 标签：jquery

我正在尝试使用 Jquery 在父 div 的 sideblings 中找到图像。我想知道找到它的最佳和快速方法是什么。

```
html

more divs..and all generated dynamically..
<div>
other dynamically generated image...

<img src='haha1.jpg' />
<img src='haha2.jpg' />
</div>

<div>div 2</div>
<div>div 3</div>
<div>div 4</div>
<div>div 5</div>

more divs....

<div>
<button id='btn'/>
</div>

$('#btn').click(function(){

   //I have to change image source by using parent() method....

}) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:50:20.163

如果我理解正确，您希望能够更改特定 div 内图像的 src。如果是这种情况，请查看此代码中的选项是否有帮助。

```
$('#btn').click(function(){

//I have to change image source by using parent() method....

$("#divId").children("img").attr("src", "newImgSource.jpg"); //this will probably  change all the images int the div.
$("#imgId").attr("src", "newImgSource.jpg");//this should change a specific image's src.

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:51:39.090

如果你的按钮可以有一个`ID`...

```
<div id="images">  <!-- add an ID here too -->
   <img src='haha1.jpg' />
   <img src='haha2.jpg' />
</div> 
```

jQuery：

```
var source = 'folder_name/';

$('#btn').click(function(){
   $('#images').find('img').each(function(){
      $(this).attr('src', source+this.src);
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:51:48.543

[http://jsfiddle.net/truuD/12/](http://jsfiddle.net/truuD/12/)

我通常使用 .prev() 和 .find() 来处理这样的事情。不确定它是最快还是最好的方法，但它对我有用。

```
$("button").click(function(){               
    console.log($(this).parent("div").prev("div").find("img"));
});​ 
```

# hudson - 如何以编程方式将工作添加到哈德逊的视图

> ID：12303629
> 
> 赞同：5
> 
> 时间：2012-09-06T15:38:48.643
> 
> 标签：hudson, hudson-api

我有一个 Java 程序控制一组 hudson 服务器自动生成的作业。使用 hudson 远程 API 创建、删除或更新作业（配置）没有问题。我还管理它来创建 hudson 视图并为 hudson 视图创建一个新工作。但我仍然需要知道如何将已经存在的作业添加到视图以及如何再次将其删除。

是否有带有参数的 URL 来完成这项工作（比如创建工作）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-27T14:16:05.177

[您可以通过Hudson CLI API](http://wiki.hudson-ci.org/display/HUDSON/Hudson+CLI)执行一个 groovy 脚本，将作业**添加**到视图中。这是代码：

```
import hudson.model.*

def job = Hudson.instance.getView("View").getItem("Job")
Hudson.instance.getView("View2").add(job) 
```

CLI 的命令是：

```
java -jar hudson-cli.jar -s http://`your-hudson-server` groovy myScript.groovy 
```

请注意，您必须在 Hudson 实例上安装 Groovy 支持插件才能执行脚本。您可以将其安装在： http:// `your-hudson-server`/pluginManager 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:36:19.490

没有用于视图配置的 api（至少在 Jenkins v1.424.6 中没有），但应该可以使用（提交到）`foo`的表单添加要查看的作业。`http://[jenkins-host]/view/foo/configure``http://[jenkins]/view/foo/configSubmit`

如果你使用 Java，Apache [HttpComponents的](http://hc.apache.org/)[HTMLUnit](http://htmlunit.sourceforge.net/)或 [HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)可以帮助你。

# php - 回显在php中相互减去的两个字段数据

> ID：12303630
> 
> 赞同：0
> 
> 时间：2012-09-06T15:38:50.623
> 
> 标签：php

```
echo "<<td>td>".$rec["year1"] * $rec["year2"]."<</td>/td>"; 
```

现在这行得通。但是当我用 '-' （减号）替换 '*' 时，它不起作用，并给出了 4rec["id"] 值列表，前面带有减号。（即-10-12-14 等；）

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:40:08.667

```
echo "<td><td>".( (int)$rec["year1"] - (int)$rec["year2"])."</td>/td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:42:44.333

使用逗号和括号：

```
echo "<td>", ( (int)$rec["year1"] - (int)$rec["year2"]), "</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:43:20.563

您需要转换它们：

```
echo "<td>" . (intval($rec["year1"]) - intval($rec["year2"])) . "</td>"; 
```

也修改了HTML，因为也错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:43:22.767

只需在等式周围加上括号，例如：

```
echo "<td>" . ($rec["year1"] - $rec["year2"]) . "</td>"; 
```

# asp.net-mvc - 如何为简单的 HelloWorld 实现 Quartz.net 调度程序

> ID：12303637
> 
> 赞同：0
> 
> 时间：2012-09-06T15:39:14.477
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, scheduled-tasks, quartz-scheduler

以下代码产生以下错误：

```
Imports Quartz
Imports Quartz.Impl

Public Class InsertRssFeedJob
    Implements IJob

    Public Sub Execute(context As JobExecutionContext)
        Dim rssContoller = New RssController()
        rssController.InsertRssFeedItem("")
    End Sub

End Class 
```

> 错误 1 ​​类“InsertRssFeedJob”必须为接口“Quartz.IJob”实现“Sub Execute(context As IJobExecutionContext)”。C:\Users\darchual\documents\visual studio 2010\Projects\MyBlog\MyBlog\QuartzScheduler\Class1.vb 5 16 MyBlog

我已经添加了库包引用，可以成功导入 Quartz，但是“Implements `IJob`”下面有一条蓝线，显示上面的错误。我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:40:44.457

这就是我使用它的方式（首先在不同的类/子中创建 scheduleFactory）......

```
Dim schedFact As ISchedulerFactory = New StdSchedulerFactory()

' get a scheduler
Dim sched As IScheduler = schedFact.GetScheduler()
sched.Start()

' construct job info
Dim jobDetail As New JobDetail(TriggerName, Nothing, GetType(cls_schedule))
Dim trigger As Trigger = TriggerUtils.MakeDailyTrigger(hour, min)

trigger.StartTimeUtc = DateTime.UtcNow
trigger.Name = TriggerName
sched.ScheduleJob(jobDetail, trigger) 
```

我将类名“cls_schedule”传递给 JobDetail，然后您可以使用您的类（作为参数传递）来执行实际任务。

```
Public Class cls_schedule
    Implements IJob

    Public Sub Execute(ByVal context As Quartz.JobExecutionContext) Implements Quartz.IJob.Execute
        Dim jobType As String = context.Trigger.Name
                 ' Your Code Goes here
    End sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:44:51.180

它是执行方法上的签名，将其更改为 IJobContext，应该可以解决它。

# jquery - 使用jQuery以百分比设置outerWidth

> ID：12303641
> 
> 赞同：3
> 
> 时间：2012-09-06T15:39:32.380
> 
> 标签：jquery, css, css-float

## 简洁版本

如果我不设置水平边距，我的代码运行良好。这就是为什么我的代码使用 .width() 来获取和设置元素宽度，但我不能对 .outerWidth() 做同样的事情，因为它是只读的。有没有办法设置它？

## 长版

我有许多`float: left`不同宽度的按钮（使用 ），我希望每个按钮都有一个宽度，以便制作一个漂亮且优化的按钮表。

所以我写了这个：

```
buttons = $('.button-table > button');
maxWidth = Math.max.apply(
    Math,
    buttons.map(function(){
    return $(this).width();
    }).get()
);
columns = Math.floor($('#container').width()/maxWidth);
buttons.width(100/columns+'%'); 
```

此代码有效，但如果我为按钮设置水平边距，最后一个将在下一行移动。

注意：我更喜欢百分比，因为如果我使用此代码，我经常会在容器的右端看到一些像素（我可以看到它们使用不同的颜色）：

```
buttons.width(Math.floor($('.button-table').width()/columns)); 
```

**笔记**

这是我在 Stack Overflow 上的第一个问题，如果我在使用这个平台时出现错误，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:36:18.130

这是解决方案：

无边距：http: [//jsfiddle.net/x33bD/2/](http://jsfiddle.net/x33bD/2/)

有边距：http: [//jsfiddle.net/x33bD/7/](http://jsfiddle.net/x33bD/7/)

基本上，我在`class="box"`这种风格的按钮周围添加了 div（使用 ）：

```
.box {
    float: left;
}
.box button {
    margin-left: auto ;
    margin-right: auto ;
    margin-top: 5px;
    margin-bottom: 5px;
    display: block;
    width: 90%;
    white-space: nowrap;
} 
```

这个 CSS 可能会更好：它可以在不设置宽度的情况下拉伸按钮。

jQuery 代码是相同的（变成了， `buttons`.width `.box`() 变成了 .outerWidth()...）：

```
boxes = $('#container > .box');
maxWidth = Math.max.apply(
Math, boxes.map(function() {
    return $(this).outerWidth();
}).get());
columns = Math.floor($('#container').width() / maxWidth);
boxes.width(100 / columns + '%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:32:54.960

如果我理解正确的话。您想为这些按钮设置`width`+ `margin`。

开始了。

你可能已经知道了。`total width`= `margin`+ `border`+ `padding`+`content width`

所以，在你的情况下，你可以这样做。

```
var buttons = $('.button-table > button'),
// filter out the widest element
    widest  = buttons.sort(function(a, b){ return $(a).outerWidth() - $(b).outerWidth(); }).pop(),
    btn_width   = Math.floor($('.button-table').width()/columns),
    btn_margin  = parseInt($(widest).css('margin-left')) + parseInt($(widest).css('margin-right'));

// set actual width
button.css({
    width: btn_width - btn_margin
})​ 
```

# jquery - Jquery Modal窗口在按钮单击时打开

> ID：12303642
> 
> 赞同：1
> 
> 时间：2012-09-06T15:39:36.237
> 
> 标签：jquery, .net, vb.net, jquery-plugins, jquery-selectors

我正在尝试将模式窗口添加到 asp.net 4.0 应用程序。目前，模态窗口在锚点单击时打开，我希望通过单击按钮打开它。

在我看来，我只需要修改我的 jquery 选择器以在按钮单击时触发，但这似乎不起作用。

IE。$(":button").live("click", function (e) { 应该在按钮点击时触发

在链接上触发的工作代码如下。

标记：

```
<a href="#" data-reveal-id="myModal">
    Add User
</a> 
```

jQuery 文件：

```
(function ($) {
$("a[data-reveal-id]").live("click", function (e) {
    e.preventDefault();
    var modalLocation = $(this).attr("data-reveal-id");
    $("#" + modalLocation).reveal($(this).data())
});
$.fn.reveal = function (options) {
    var defaults = { animation: "fadeAndPop", animationspeed: 300, closeonbackgroundclick: true, dismissmodalclass: "close-reveal-modal" };
    var options = $.extend({}, defaults, options); return this.each(function () {
        var modal = $(this), topMeasure = parseInt(modal.css("top")),topOffset = modal.height() + topMeasure, locked = false, modalBG = $(".reveal-modal-bg");
        if (modalBG.length == 0) { modalBG = $('<div class="reveal-modal-bg" />').insertAfter(modal) } modal.bind("reveal:open", function () {
            modalBG.unbind("click.modalEvent");
            $("." + options.dismissmodalclass).unbind("click.modalEvent");
            if (!locked) {
                lockModal();
                if (options.animation == "fadeAndPop") {
                    modal.css({ top: $(document).scrollTop() - topOffset, opacity: 0, visibility: "visible" });
                    modalBG.fadeIn(options.animationspeed / 2);
                    modal.delay(options.animationspeed / 2).animate({ top: $(document).scrollTop() + topMeasure + "px",opacity: 1},options.animationspeed, unlockModal())
                }
                if (options.animation == "fade") {
                    modal.css({ opacity: 0, visibility: "visible", top: $(document).scrollTop() + topMeasure });
                    modalBG.fadeIn(options.animationspeed / 2);
                    modal.delay(options.animationspeed / 2).animate({ opacity: 1 }, options.animationspeed, unlockModal())
                }
                if (options.animation == "none") {
                    modal.css({ visibility: "visible", top: $(document).scrollTop() + topMeasure });
                    modalBG.css({ display: "block" });
                    unlockModal()
                }
            } modal.unbind("reveal:open")
        });
            modal.bind("reveal:close", function () {
            if (!locked) {
                lockModal();
                if (options.animation == "fadeAndPop") {
                    modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                    modal.animate({ top: $(document).scrollTop() - topOffset + "px", opacity: 0 }, options.animationspeed / 2, function () {
                        modal.css({ top: topMeasure, opacity: 1, visibility: "hidden" });
                        unlockModal()
                    })
                }
                if (options.animation == "fade") {
                    modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                    modal.animate({ opacity: 0 }, options.animationspeed, function () { modal.css({ opacity: 1, visibility: "hidden", top: topMeasure }); unlockModal() })
                }
                if (options.animation == "none") {
                    modal.css({ visibility: "hidden", top: topMeasure });
                    modalBG.css({ display: "none" })
                } 
            } modal.unbind("reveal:close")
        });
        modal.trigger("reveal:open");
        var closeButton = $("." + options.dismissmodalclass).bind("click.modalEvent", function () { modal.trigger("reveal:close") });
        if (options.closeonbackgroundclick) {
            modalBG.css({ cursor: "pointer" });
            modalBG.bind("click.modalEvent", function () { modal.trigger("reveal:close") })
        }
        $("body").keyup(function (e) {
        if(e.which===27){modal.trigger("reveal:close")}});
        function unlockModal(){locked=false}function lockModal(){locked=true}})}})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:16:06.163

> 使用有效 CSS 与 $(":button") 等效的选择器是 $("button, input[type='button']")。

[-来自 jquery.com](http://api.jquery.com/button-selector/)

你在使用`<input type="submit">`标签吗？如果是这样，它不会被 :button 选择器拾取。

试试这个：

```
 $("button, input[type='button'], input[type='submit']")
     .live("click", function (e) { } 
```

只是一个想法，也许你没有使用提交标签。

# c# - 从服务发送通知到 WPF 应用程序的好方法

> ID：12303644
> 
> 赞同：2
> 
> 时间：2012-09-06T15:39:36.610
> 
> 标签：c#, wpf, wcf, service, ipc

我正在开发一个应用程序（学校项目），它是一项服务 + 一个外部 WPF UI。我计划使用 WCF 进行 UI 到服务的通信。无论如何，如果发生某些事件，服务需要通知 UI，我正在寻找一种简单的方法来做到这一点。

当然，任何基本的 IPC 都可以工作，但我不想弄乱管道、互斥体、事件等。

在本机 win32 应用程序中，我使用了一条`WM_USER`消息，但据我了解，WPF 本身并不支持它。

有人可以指出一些可能/最佳解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:09:07.803

您可以使用 WCF[回调操作](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx#S2)来通知客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:07:42.007

我使用的一种方法是充当队列的共享数据库表。您的 UI 应用程序会跟踪它看到的最后一条记录（索引或时间戳）并定期轮询新事件。将您的查询和更新与事务绑定以防止并发问题。数据库的一个优点是它保存有助于调试和崩溃的事件。[System.Data.Sqlite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)、[RavenDB](http://ravendb.net/)和[Sql Server Compact Edition](http://www.microsoft.com/en-us/download/details.aspx?id=17876)是不错的选择。

另一种选择是使用[ZeroMQ](http://www.zeromq.org/)作为通过 TCP/IP 的发布/订阅消息系统。ZeroMQ 非常容易设置并且可以处理大量消息。

数据库和 ZeroMQ 方法都允许您将 UI 应用程序放在远程机器上，而不是要求它位于服务主机上。

我还建议您将事件定义为一个类并将其序列化为字符串，无论您是使用数据库还是 ZeroMQ 来传递事件。我推荐[ServiceStack](https://github.com/ServiceStack/ServiceStack.Text)的优秀、易于使用的 JSON 序列化器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T20:48:30.543

您的服务和应用程序是否在不同的机器上运行？如果您的服务在您的应用未运行时发送通知，您是否希望在您的应用下次运行时收到通知？如果是这样，您最好的选择是[Message Queuing](http://msdn.microsoft.com/en-us/library/ms978430.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:37:29.223

您可以尝试`EventAggregator`发送通知（订阅+发布方法）

链接：http: [//msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

# asp.net-mvc-3 - 带有 Ninject 和 EntityFramework 的 ASP.NET MVC 3 中的 ChildAction

> ID：12303648
> 
> 赞同：3
> 
> 时间：2012-09-06T15:39:53.233
> 
> 标签：asp.net-mvc-3, entity-framework, ninject

我在使用 Ninject 和 EntityFramework 的 ASP.NET MVC 3 应用程序时遇到了一个奇怪的问题。

我们有一个 ISession 接口，它由 EntitySession 扩展，它实际上是 EntityFramework DbContext 的轻包装器。

这是我的 Ninject 绑定：

```
Kernel.Bind<MyEfDbContext>().To<MyEfDbContext>().InRequestScope();
Kernel.Bind<ISession>().To<EntitySession>().InRequestScope(); 
```

如您所见，一切都在请求范围内。

问题是当我执行 ChildAction 时，当我第一次点击页面时它工作正常，但是当我刷新页面时，我总是得到这个异常，我必须重建或重置 IIS 才能摆脱它。

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

我在我的控制器中注入 ISession，它应该在请求结束时处理。

在我看来，执行子操作不应该执行另一个请求，因此它应该使用与主操作相同的 dbcontext 实例。

我不知道其他人是否对这个堆栈有类似的问题。

我的剃须刀代码如下所示：

```
@Html.Action(MVC.Controller.Action(Model.Id)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T01:29:24.043

我猜这可能是由于引用 MyEfDbContext 的对象之一具有比 MyEfDbContext 本身更长的生命周期。请检查依赖链并尝试确定您是否在应用程序、会话、单例范围内的对象中使用上下文。

如果找到它，只需将对 MyEfDbContext 的依赖替换为对 MyEfDbContext Factory 对象的依赖。

在这种情况下，您可以为自己编写一个工厂类，或者您可以使用工厂扩展来动态创建工厂（[https://github.com/ninject/ninject.extensions.factory](https://github.com/ninject/ninject.extensions.factory)）。

希望有帮助！

# gwt - gwt 编译错误：您是否忘记继承所需的模块？- 服务器端

> ID：12303652
> 
> 赞同：1
> 
> 时间：2012-09-06T15:40:11.513
> 
> 标签：gwt, gwtp

我有一个可以工作的 gwtp 应用程序。当我使用“-strict”标签编译它时，我的服务器端代码（仅服务器端）出现很多错误：

当我使用超级开发模式时，我得到这些编译错误，但代码有效。

我在 Mac 10.8 操作系统上使用 Juno，GWT 2.5

```
 [ERROR] Errors in 'file:/tf/server/curl/CurlActionHandler.java'
     [ERROR] Line 16: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 19: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 21: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 32: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/database/DataBaseServiceImpl.java'
     [ERROR] Line 18: No source code is available for type java.sql.Connection; did you forget to inherit a required module?
     [ERROR] Line 43: The method forName(String) is undefined for the type Class
     [ERROR] Line 44: No source code is available for type java.sql.DriverManager; did you forget to inherit a required module?
     [ERROR] Line 64: No source code is available for type java.sql.ResultSet; did you forget to inherit a required module?
     [ERROR] Line 68: No source code is available for type java.sql.Statement; did you forget to inherit a required module?
     [ERROR] Line 80: No source code is available for type java.sql.SQLException; did you forget to inherit a required module?
     [ERROR] Line 143: No source code is available for type java.sql.PreparedStatement; did you forget to inherit a required module?
     [ERROR] Line 166: No source code is available for type java.lang.ClassNotFoundException; did you forget to inherit a required module?
     [ERROR] Line 181: No source code is available for type java.io.ObjectInputStream; did you forget to inherit a required module?
     [ERROR] Line 183: No source code is available for  type java.io.ByteArrayInputStream; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/results/FlightToServerHandler.java'
     [ERROR] Line 23: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 26: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 28: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 39: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/results/FlightbToServerHandler.java'
     [ERROR] Line 23: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 26: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 28: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 39: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/results/LoadFlightToServerHandler.java'
     [ERROR] Line 27: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 30: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 32: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 43: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
       [ERROR] Errors in 'file:/tf/server/flight/results/parser/AirlinesServer.java'
     [ERROR] Line 53: No source code is available for type java.sql.ResultSet; did you forget to inherit a required module?
     [ERROR] Line 60: No source code is available for type java.sql.SQLException; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/results/parser/AirportsServer.java'
     [ERROR] Line 67: No source code is available for type java.sql.ResultSet; did you forget to inherit a required module?
     [ERROR] Line 86: No source code is available for type java.sql.SQLException; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/results/parser/DateField.java'
     [ERROR] Line 83: No source code is available for type java.util.TimeZone; did you forget to inherit a required module?
     [ERROR] Line 85: No source code is available for type java.text.DateFormat; did you forget to inherit a required module?
     [ERROR] Line 85: No source code is available for type java.text.SimpleDateFormat; did you forget to inherit a required module?
     [ERROR] Line 157: No source code is available for type java.util.Calendar; did you forget to inherit a required module?
     [ERROR] Line 157: No source code is available for type java.util.GregorianCalendar; did you forget to inherit a required module?
   [ERROR] Errors in 'file:/tf/server/flight/results/timezone/TimezoneUtil.java'
     [ERROR] Line 16: No source code is available for type com.google.gwt.dev.util.collect.HashMap<K,V>; did you forget to inherit a required module?
     [ERROR] Line 70: No source code is available for type java.sql.ResultSet; did you forget to inherit a required module?
     [ERROR] Line 79: No source code is available for type java.sql.SQLException; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/search/airport/autocomplete/AutocompleteToServerHandler.java'
     [ERROR] Line 18: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 21: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 23: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 34: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/search/airport/nearairport/NearAirportsToServerHandler.java'
     [ERROR] Line 20: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 23: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 25: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 36: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/flight/search/airport/popular/PopularToServerHandler.java'
     [ERROR] Line 19: No source code is available for type com.gwtplatform.dispatch.server.actionhandler.ActionHandler<A,R>; did you forget to inherit a required module?
     [ERROR] Line 22: No source code is available for type javax.servlet.http.HttpServletRequest; did you forget to inherit a required module?
     [ERROR] Line 24: No source code is available for type javax.servlet.ServletContext; did you forget to inherit a required module?
     [ERROR] Line 35: No source code is available for type com.gwtplatform.dispatch.server.ExecutionContext; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/guice/DispatchServletModule.java'
     [ERROR] Line 7: No source code is available for type com.google.inject.servlet.ServletModule; did you forget to inherit a required module?
     [ERROR] Line 12: No source code is available for type com.gwtplatform.dispatch.server.guice.DispatchServiceImpl; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/guice/GuiceServletConfig.java'
     [ERROR] Line 7: No source code is available for type com.google.inject.servlet.GuiceServletContextListener; did you forget to inherit a required module?
     [ERROR] Line 10: No source code is available for type com.google.inject.Injector; did you forget to inherit a required module?
     [ERROR] Line 11: No source code is available for type com.google.inject.Guice; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/server/guice/ServerModule.java'
     [ERROR] Line 19: No source code is available for type com.gwtplatform.dispatch.server.guice.HandlerModule; did you forget to inherit a required module?
  [ERROR] Errors in 'file:/tf/shared/library/CurlUtil.java'
     [ERROR] Line 27: No source code is available for type java.net.URL; did you forget to inherit a required module?
     [ERROR] Line 28: No source code is available for type java.net.HttpURLConnection; did you forget to inherit a required module?
     [ERROR] Line 30: No source code is available for type java.io.InputStreamReader; did you forget to inherit a required module?
     [ERROR] Line 31: No source code is available for type java.io.BufferedReader; did you forget to inherit a required module?
     [ERROR] Line 36: No source code is available for type java.net.MalformedURLException; did you forget to inherit a required module? 
```

我认为这可能与我的 .xml 文件有关

```
<module rename-to='tf'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>
  <inherits name="com.google.gwt.uibinder.UiBinder" />
  <inherits name="com.google.gwt.inject.Inject" />
  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <inherits name='com.google.gwt.user.theme.standard.Standard'/>
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                   -->
  <inherits name='com.gwtplatform.dispatch.Dispatch'/>
  <inherits name='com.gwtplatform.mvp.Mvp'/>

  <!-- Super Dev mode -->
  <add-linker name="xsiframe"/>
  <set-configuration-property name="devModeRedirectEnabled" value="true"/>
  <set-property name="compiler.useSourceMaps" value="true"/>

  <!-- Logging module inherits                                      -->
  <inherits name="com.google.gwt.logging.Logging"/>
  <set-property name="gwt.logging.logLevel" value="INFO"/>          # To change the default logLevel SEVERE
  <!-- 
  <set-property name="gwt.logging.enabled" value="FALSE"/>            # To disable logging
  <set-property name="gwt.logging.consoleHandler" value="DISABLED"/>  # To disable a default Handler
  -->

  <!-- Specify the app entry point class.                         -->
  <entry-point class='com.tf.client.Tf'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>
  <source path='server'/>

  <!-- This is required for Gwt-Platform Proxy's generator -->
  <define-configuration-property name="gin.ginjector" is-multi-valued="false" />
  <set-configuration-property name="gin.ginjector" value="com.tf.client.gin.ClientGinjector" />

  <!-- <set-configuration-property name="CssResource.obfuscationPrefix" value="empty" />     -->
  <set-configuration-property name="CssResource.style" value="pretty"/>
</module> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:02:45.160

尝试从您的模块 .xml 中删除这一行：

```
<source path='server'/> 
```

源元素指定可*翻译代码*的路径，即要编译为 javascript 的代码，因此它不应包含[JRE 仿真参考](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)中未列出的任何代码。

# javascript - 从工作日结束到下一个工作日开始的完整日历 JS 包装时间

> ID：12303653
> 
> 赞同：3
> 
> 时间：2012-09-06T15:40:11.793
> 
> 标签：javascript, jquery, fullcalendar, fullcalendar-3

我在 AgendaWeek 视图中使用完整日历 JS，并且我将可见时间限制为上午 8 点到下午 5 点，而不是默认显示的每天完整的 12 小时，但是当我尝试扩展事件的时间并将其拖到结束时可见的时间，它不会包裹到第二天。相反，它一直持续到午夜才结束。

有没有简单的方法来防止这种情况？基本上我只希望它在一周中的上午 8 点到下午 5 点之间显示事件。

这是我的代码：

```
$('#calendar').fullCalendar({
  defaultView: 'agendaWeek',
  allDaySlot: false,
  minTime: '8:00am',
  maxTime: '6:00pm',
  weekends: false,
  header: {
    left: 'prev,next',
    center: 'title',
    right: ''
  },
  editable: true,
  droppable: true, // this allows things to be dropped onto the calendar !!!
  events: "{{URL::to('schedule/fetch')}}"
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.js"></script>
```

我的事件以 UTC 格式存储在数据库中，只有开始时间和持续时间。要获得结束时间，我只需添加开始时间和持续时间，然后通过 AJAX 将其传回。我假设如果它溢出到第二天，我需要让完整日历简单地添加到持续时间，但我只是不确定如何完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-06T09:33:18.383

我在完整日历的选择中使用以下解决方案解决了：

```
select: function(start, end) {

     if(start.format() > minTime && start.format() <  maxTime){

       eventId++;               
       var event = {
          id : eventId,
          start:  moment(start.format()),
          end:   moment(end.format())
       };
       $('#calendar').fullCalendar('renderEvent', event, true); 
    }

} 
```

# jquery - 在 JQuery 文件上传演示中限制文件类型

> ID：12303660
> 
> 赞同：22
> 
> 时间：2012-09-06T15:40:53.097
> 
> 标签：jquery, codeigniter, file-upload, blueimp

我正在使用Codeigniter为我的下一个项目使用[JQuery 文件上传演示。](http://blueimp.github.com/jQuery-File-Upload/)谁能告诉我如何实现以下目标：

*   将上传文件类型限制为 .zip 和 .rar
*   限制文件大小
*   清除已上传文件列表（JQuery 文件上传插件显示已上传文件列表）

帮助赞赏！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-21T08:55:54.110

您现在可能有很多解决方案，但是我想为 jquery 上传器使用 BASIC 插件，即没有任何其他脚本.. 由于某种原因 maxFileSize/fileTypes 选项不起作用-但这无疑是我的不足阅读文档！

无论如何对我来说，它就像执行以下操作一样快：

```
 add: function (e, data) {
        var goUpload = true;
        var uploadFile = data.files[0];
        if (!(/\.(gif|jpg|jpeg|tiff|png)$/i).test(uploadFile.name)) {
            common.notifyError('You must select an image file only');
            goUpload = false;
        }
        if (uploadFile.size > 2000000) { // 2mb
            common.notifyError('Please upload a smaller image, max size is 2 MB');
            goUpload = false;
        }
        if (goUpload == true) {
            data.submit();
        }
    }, 
```

因此，只需使用 ADD 选项仅允许正则表达式中的图像类型，并检查（在我的情况下）文件大小最大为 2mb。

相当基本，我再次确定 maxFileSize 选项有效，只是我只包括基本插件脚本 jquery.fileupload.js

**编辑** 我应该在我的情况下添加我只上传一个文件（个人资料图片），因此 data.files[0].. 你当然可以遍历文件集合。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T06:36:13.057

在 jquery.fileupload-ui.js 中编辑这部分：

```
 $.widget('blueimp.fileupload', $.blueimp.fileupload, {

    options: {
        // The maximum allowed file size:
        maxFileSize: 100000000,
        // The minimum allowed file size:
        minFileSize: undefined,
        // The regular expression for allowed file types, matches
        // against either file type or file name:
        acceptFileTypes:  /(zip)|(rar)$/i,
        ---------------------------------------------------------------- 
```

清除上传文件列表 - 如果您不需要该功能，请从 main.js 中删除 $.getJSON 调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T15:45:42.750

根据官方文档；

```
$('#file_upload').fileUploadUIX({
    maxFileSize: 5000000, // Maximum File Size in Bytes - 5 MB
    minFileSize: 100000, // Minimum File Size in Bytes - 100 KB
    acceptFileTypes: /(zip)|(rar)$/i  // Allowed File Types
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-16T08:54:16.857

另一种方法如下。

```
 $('#upload').fileupload({ 
       change: function (e, data) { 
                if (!(/\.(jpg|jpeg|png|pdf)$/i).test(data.files[0].name)) {
                    alert('Not Allowed');
                    return false;
                }
        } 
 }); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-06T15:45:40.893

试试看这一行：

```
 process: [
            /*
                {
                    action: 'load',
                    fileTypes: /^image\/(gif|jpeg|png)$/,
                    maxFileSize: 20000000 // 20MB
                },
                {
                    action: 'resize',
                    maxWidth: 1920,
                    maxHeight: 1200,
                    minWidth: 800,
                    minHeight: 600
                }, 
```

在 jquery.fileupload-fp.js

# android - Android：从以前的位置恢复应用程序

> ID：12303663
> 
> 赞同：10
> 
> 时间：2012-09-06T15:40:59.383
> 
> 标签：android, android-intent

如何从以前的位置恢复我的应用程序。

请注意，它仍然处于活动状态，只是暂停了。因此，如果我单击 androids 当前应用程序按钮或应用程序图标，它会恢复正常。

但是我是谁从我的小部件中做到这一点的..

我有以下内容：

```
// Create an Intent to launch Activity
Intent intent = new Intent(context, LoginForm.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0); 
```

这显然会启动 LoginForm 而不是仅仅恢复应用程序。

有谁知道如何做到这一点？

编辑：

只是为了澄清，我不想要任何特别的东西。我基本上想模仿按下 android 图标启动器。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T15:49:51.283

你基本上已经回答了你自己的问题;-)

只需模拟启动应用程序时 Android 的操作：

```
Intent intent = new Intent(context, LoginForm.class);
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0); 
```

或者你可以试试这个（假设`LoginForm`是你的应用程序的根活动，并且这个活动的一个实例在任务堆栈中仍然处于活动状态）：

```
Intent intent = new Intent(context, LoginForm.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0); 
```

设置`FLAG_ACTIVITY_NEW_TASK` **应该**只是将应用程序的现有任务从后台带到前台，而无需实际创建活动的实例。先试试这个。如果它不适合你，做另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T09:57:01.390

使用它与 android 为您的启动器活动所做的相同

```
Intent notificationIntent = new Intent(context, SplashActivity.class);
        notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        notificationIntent.setAction(Intent.ACTION_MAIN);
        notificationIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        PendingIntent clickActionIntent = PendingIntent.getService(context, 0, notificationIntent, 0); 
```

# html - HTML表单提交后两次发布

> ID：12303666
> 
> 赞同：3
> 
> 时间：2012-09-06T15:41:20.380
> 
> 标签：html, forms, post

**编辑解决方案：**

我仍然不知道它为什么要进行复式输入，但目前我已经做了一些技巧。

我在表单中添加了一个 UID 令牌，生成了一个 MD5 并将其与 DB 条目一起存储。该脚本会检查条目是否已存在。如果是，它会传递条目 ID，如果不是，它会添加一个新的，然后传递 ID 以用于最终确认消息。

幸运的是，表单甚至是 UID 的两倍，所以我能够抓住它。如果是两个不同的UID，那我可能有问题了，哈哈。

我想给 PeeHaa 加分，因为如果其他人发现这个问题，我希望其他人也知道 Post、Redirect 和 Get 是一种很好的编码实践。（发布到您的插入脚本，从页面重定向到确认页面，并使用 GET 获取要显示的值）。

**以前的内容：**

好的，这是非常基本的。

我知道这里已经被问了无数次了，但是现有的问题都与我的问题无关。

基本的 HTML 表单。没有花哨的 jQuery 或任何东西。

```
<form id="attendee_confirm" class="regform" method="post" action="http://url.com/wip/events/register/?">
<input name="attendee[0][first_name]" value="Bruce">  
<input name="attendee[0][last_name]" value="Wayne">

<input type="hidden" name="reg_form" value="true">
<input type="hidden" name="questions" value="true">
<input type="hidden" name="action" value="done_confirming">
<input type="hidden" name="event_id" value="1">

<input type="submit" name="mySubmit" id="mySubmit" value="Confirmed"> 
<input type="button" value=" &lt;-- BACK " onclick="history.go(-1);return false;">

</form> 
```

为什么我的表格两次发布它的数据？我真的不明白这个。

这是确认表格。用户在填写完第一个表格后被带到这里，只是为了确认姓名。

第一种形式工作正常，并带来了适当的信息。第二个应该确认并发送电子邮件/流程。

表单发布两次，我只看到第二次尝试的输出。我无法从第一个获得任何输出。

因此，如果我尝试将会话令牌“捕获”添加到表单以尝试捕获重复条目，则允许第一次尝试通过，但用户只能看到第二次捕获。

这可能是服务器问题吗？我的服务器正在运行 ModSecure（最近让我很生气），我真的很沮丧。当我不应该...

**编辑信息：**

这发生在所有浏览器上，因此它不是特定于浏览器的。

我还尝试将捕获脚本设置为在接收到要处理的信息后重定向，但正如我所提到的，数据首先是由一些不可见的东西发送的，而用户看到的输出实际上是第二个数据。不是第一组。一切仍然翻倍。哎呀。。

服务器日志很糟糕。它发生在一篇文章中。我将仔细检查可能运行两次的脚本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T06:31:34.893

I have find this problem more than once and I have feeling, that this problem is more rule than exception. Anybody can correct if they think that I am wrong and create good explanation why this is error in html code, because I haven't find errors in my code all these years.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:15:53.193

我仍然不知道它为什么要进行复式输入，但目前我已经做了一些技巧。

我在表单中添加了一个 UID 令牌，生成了一个 MD5 并将其与 DB 条目一起存储。该脚本会检查条目是否已存在。如果是，它会传递条目 ID，如果不是，它会添加一个新的，然后传递 ID 以用于最终确认消息。

幸运的是，表单甚至是 UID 的两倍，所以我能够抓住它。如果是两个不同的UID，那我可能有问题了，哈哈。

我想给 PeeHaa 加分，因为如果其他人发现这个问题，我希望其他人也知道 Post、Redirect 和 Get 是一种很好的编码实践。（发布到您的插入脚本，从页面重定向到确认页面，并使用 GET 获取要显示的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:49:14.047

您的 ACTION 参数看起来有点古怪。为什么结尾有问号？您的方法是 POST，但您的 ACTION url 暗示该方法是 GET。

# c - 埃拉托色尼筛法错误输出

> ID：12303671
> 
> 赞同：0
> 
> 时间：2012-09-06T15:41:31.497
> 
> 标签：c, algorithm, sieve-of-eratosthenes

我试图找出高达 200 万的所有素数的总和。

**所以我为它写了以下代码：**

```
#include <math.h>
#include <stdlib.h>
#define limit 2000000
int main(void)
{
    unsigned int *sieve, i, j;
    unsigned long long int sum = 0;
    sieve = malloc(sizeof(int)*limit);
    for(i=2;i<=limit;i++)
        sieve[i] = 1;
    for(i=2;i<=limit;i++)
    {
        if(sieve[i])
        {
            for(j=i;j*i<=limit;j++)
                sieve[j*i] = 0;
        }
    }

    for(i=2;i<=limit;i++)
{
        if(sieve[i])
            sum += i;
    }
    printf("The sum is %llu\n",sum);
    return 0;
} 
```

答案应该是`142913828922`，但我得到了`142889228620`。

你能告诉我出了什么问题吗？我想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:47:36.573

```
unsigned int *sieve, i, j;
for(j=i;j*i<=limit;j++) 
```

计算`j*i`溢出`i > 65535`。在这种情况下，这会虚假地产生一些伪合成。

`i`当达到极限的平方根时停止筛分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:50:19.203

我认为，您错误地将内存分配给筛子。尝试：

```
sieve = malloc(sizeof(int)*limit + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T15:53:02.707

您可以在第一个循环中添加总和，并避免乘以可能溢出的 i*j。*还为 limit+1 个项目分配空间*。

```
for(i=2;i<=limit;i++)
{
    if(sieve[i])
    {
        // Add to sum
        sum += i;
        // Zero all multiples of i, up to limit
        for(j=i; j <= limit; j+=i)
            sieve[j] = 0;
    }
}
printf("The sum is %llu\n",sum); 
```

上面的代码给了我你想要的结果。

# java - 尝试在 Java 中运行我编译的程序时出错

> ID：12303672
> 
> 赞同：0
> 
> 时间：2012-09-06T15:41:31.597
> 
> 标签：java, runtime-error

这是我的第一个程序，也是我第一次尝试运行它。我在 Ubuntu 上。

源代码：

```
class printTest {
    public static void main(String[] args){
        System.out.println("Hello, world!");
    }
} 
```

这是我尝试运行它时遇到的错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: printTest : 
                                               Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: printTest. Program will exit.

------------------
(program exited with code: 1)
Press return to continue 
```

编辑：好的，这是我的 JRE 版本：owner@ubuntu:~$ java -version java version "1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1) OpenJDK 64 -Bit Server VM (build 20.0-b12, 混合模式) owner@ubuntu:~$

但我的 javac 版本是：1.7.0_03

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:42:31.493

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: 
```

您的运行时 JVM 版本与编译时 JVM 版本不同。

确保您的类路径指向与编译时相同的 JVM 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:23:35.983

尝试在 IDE 中编写程序。这要容易得多，因为它会向您显示代码中的错误，并且您可以轻松地从同一个程序编译它。这是您可以下载一个好的 [网站 http://www.eclipse.org/downloads/packages/eclipse-ide-java-and-dsl-developers/junosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-and-dsl-developers/junosr2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:43:05.683

编译源代码的 Java 版本和执行源代码的 Java 版本之间存在差异。

`You are compiling in java 7 and executing in lesser version you need to set JAVA_HOME to java7 only.`

[这是在 Ubantu 上设置 JAVA_HOME 的方法。](http://www.zimbio.com/the+ubuntu+guy/articles/82/How+set+JAVA_HOME+environment+variable+Ubuntu)

# c# - 使用标准 C# /.net 类和方法的性能

> ID：12303673
> 
> 赞同：-4
> 
> 时间：2012-09-06T15:41:31.053
> 
> 标签：c#, .net, performance-testing, base-class

我想了解您是否可以就以下代码提供您的意见，这是使用 .net 内置方法解决性能问题的最简单示例。在线教程强烈推荐它们...

```
 public void stringFormatVsConcatShowResults()
    {
        float timeFormat = 0, timeConcat = 0;
                for (int counter = 0; counter < 10; i++)
                {

                    if (counter % 2 == 0)
                         timeFormat += TestStrFormat(1000000, true);
                    else timeConcat += TestStrFormat(1000000);

                }

                if (timeFormat > timeConcat)
                {
                    float precWonBy = (timeConcat / timeFormat) * 100;
                    int prcfractionalPart = new Version(precWonBy.ToString()).Major;
                    MessageBox.Show("The fstest (by " + prcfractionalPart + " %)is Concat");
                }
                else
                {

                    float precWonBy = (timeConcat / timeFormat) * 100;
                    int precfractionalPart = new Version(precWonBy.ToString()).Major;
                    MessageBox.Show("The fstest (by" + precfractionalPart + " %)is string.Format()");
                }
        }

    public int TestStrFormat(int iterate, bool WstringFormat=false)
    {
        string testStr = string.Empty, Enewline = Environment.NewLine;
        const string header = "its iteration No': ", sign = " !";
        Stopwatch swStrFrm = new Stopwatch();
        swStrFrm.Start();
        if (WstringFormat)
        {

            for (int counter = 0; counter < iterate; i++)
            {
                testStr = string.Format("--{0}{1}{2}--{3}", header, counter, sign, Enewline);
            }

        }
        else
        {
                for (int counter = 0; counter < iterate; i++)
                {
                    testStr = "--its iteration No': " + counter + " !--" + Enewline ;
                }

        }
        swStrFrm.Stop();
        return Convert.ToInt32(swStrFrm.ElapsedTicks);
    } 
```

你会选择什么，你有没有注意到这个性能问题，

这只是一个简单的例子，

有很多方法，例如将屏幕捕获到位图并将图像转换为字节 [] ...

由于我是软件开发的新手（4 个月 - 自学），我在多个路口遇到了这些情况，我需要去哪里，所以我该如何选择使用什么方法？...我想是一个 .net当我选择在我的应用程序中获得最大性能或者它的（C#）意图不是性能时，我就会叛逆。

打电话`stringFormatVsConcatShowResults()`给你自己看看我在说什么

*   重新编辑

所以在那之后用长字符串说我会做以下事情：

```
 public int TestStrWStrBld(int iterate)
    {
        StringBuilder sb = new StringBuilder();

        const string header = "its iteration No': ", sign = " !";

        Stopwatch swStrFrm = new Stopwatch();
        swStrFrm.Start();

            for (int i = 0; i < iterate; i++)
            {
                sb.Append(header).Append(i).Append(sign).Append(Environment.NewLine);
            }

        swStrFrm.Stop();
        return Convert.ToInt32(swStrFrm.ElapsedTicks);
    } 
```

现在是 StringBuilder 让它快了 600% 以上

感谢您打开我的思路，从现在开始......我将继续寻找正确的实现。

*   ReEdit2 或较小的字符串：与字符串相比

`Str = "a" + "b" + "c";`

下面的速度甚至快了 800%！

```
 public int TestStrWStrBld(int iterate)
    {
        StringBuilder sb = new StringBuilder();

        const string header = "its iteration No': ", sign = " !";
        string str = string.Empty;
        Stopwatch swStrFrm = new Stopwatch();
        swStrFrm.Start();

            for (int i = 0; i < iterate; i++)
            {
                str= String.Concat(header, i.ToString(), sign,Environment.NewLine);

            }

        swStrFrm.Stop();
        return Convert.ToInt32(swStrFrm.ElapsedTicks);
    } 
```

所以我想正确的方法是使用 String.Concat(string1, string2, etc...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:57:48.797

> 我在多个路口遇到过这些情况，我需要决定要做什么

我猜你的问题是“我该如何选择使用什么方法？”...

虽然`String.Concat`在这种情况下速度更快（在我的机器上，在 x64 构建中大约快 75%），但在这种情况下，我怀疑任何一个选项都可以*充分*执行。在现实世界的场景中，像这样构建*单个*字符串不太可能成为性能瓶颈。如果您正在构建大字符串，那么`StringBuilder`可能是比其中任何一个更好的选择......

我会根据可读性和可维护性来决定使用框架中的哪种方法。稍后，当您分析您的应用程序并发现问题时，很容易决定在那个时间点如何调整它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:49:09.003

我很惊讶教程没有告诉你这样做：

```
for (int counter = 0; counter < iterate; i++)
            {
                testStr = new StringBuilder().Append("--its iteration No': ").Append(counter).Append(" !--").Append(Environment.NewLine).toString();
            } 
```

# sql - 是否有任何 SQL 系统在数字文字中使用逗号作为小数点？

> ID：12303676
> 
> 赞同：2
> 
> 时间：2012-09-06T15:41:37.443
> 
> 标签：sql, ado.net, localization, number-literal

据我所知，大多数 SQL 实现都坚持使用 '.'。数字文字中的小数点。

是否使用'，'代替？（即许多欧洲国家使用的），或者可以使用“。” 假设？

我的具体情况是 .NET/ADO.NET 通过 ODBC 调用数据库。由于我不会深入讨论的原因，UPDATE 语句是作为 SQL 字符串发送的。.NET 在本地化和使用用户本地化设置中指定的小数点方面非常聪明。这可能会导致 SQL 语法错误。在特定情况下修复很容易（强制使用英式小数点），但我想确保它在所有情况下都能正常工作，或者至少知道它不起作用的情况。

我认为这可能是 ADO.NET 连接配置中的一个设置，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:17:26.450

由于逗号用于 SQL 中的单独事物，我怀疑任何 SQL 系统都允许它。

回到你的问题，当然最好使用带有参数的 ADO.NET 来避免问题，但是如果你被迫连接字符串使用`Format`并`CultureInvariant`从你的号码中获取一个不变的字符串。

这个扩展方法应该很方便

```
public static class DecimalHelpers {
    public static string ToInvariantString(this Decimal Numero) {
        return Numero.ToString("0.####", CultureInfo.InvariantCulture);
    }
} 
```

**我强烈建议您不要使用**字符串连接，它是主要的 PITA，可能是 SQL 注入攻击和其他问题的根源。现在是 2012 年，我们已经超越了这一点。

# iphone - iphone开发：同时使用touch down和touch up inside

> ID：12303680
> 
> 赞同：0
> 
> 时间：2012-09-06T15:41:49.623
> 
> 标签：iphone, objective-c, ios, cocoa-touch, user-interaction

在我的应用程序中，我使用了一个按钮，并为它们分配了两种方法，一种在您按下时工作（按钮图像已更改），另一种在您在内部触摸时工作（打开另一个视图）。很简单，如果你想打开一个视图，你按下按钮，但是当你触摸按钮时，图像会改变，当你抬起手指后，另一个视图就会打开。我的问题是，如果您按下按钮，图像就会改变，但是如果您将手指移到远离按钮的某处，则内部触摸无法正常工作。但问题是图像坚持其过度版本，因为触地触发一次。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:46:13.000

您可以在控制状态下`touchDragOutside`或`touchDragExit`根据您想要它做什么来处理它。使用`touchDragOutside`您可以检测用户何时在按钮内部触摸并在不离开按钮可触摸边界的情况下将手指拖开，并`touchDragExit`检测用户何时将其拖动到按钮可触摸边界之外。

```
[button addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchDragExit];
[button addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchDragOutside]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:53:19.270

我建议您使用 UIButton 对象的这种方法来更改图像。

```
- (void)setImage:(UIImage *)image forState:(UIControlState)state 
```

你可以在这里看到状态的所有选项[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

我会为您的目标使用状态 UIControlStateNormal 和 UIControlStateHighlighted。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T07:24:52.113

我自己也遇到过这个问题，我们主要使用这些事件：-

// 这个事件工作正常并触发

[按钮 addTarget:self action:@selector(holdDown) forControlEvents:UIControlEventTouchDown];

// 这根本不会触发

[按钮 addTarget:self action:@selector(holdRelease) forControlEvents:UIControlEventTouchUpInside];

**解决方案：-**

使用长按手势识别器：-

```
 UILongPressGestureRecognizer *btn_LongPress_gesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleBtnLongPressgesture:)];
[button addGestureRecognizer:btn_LongPress_gesture]; 
```

手势的实现：-

```
- (void)handleBtnLongPressgesture:(UILongPressGestureRecognizer *)recognizer{

//as you hold the button this would fire

if (recognizer.state == UIGestureRecognizerStateBegan) {

    [self someMethod];
}

//as you release the button this would fire

if (recognizer.state == UIGestureRecognizerStateEnded) {

    [self someMethod];
}
} 
```

# apache2 - apache2 mod_proxy 拒绝不工作

> ID：12303692
> 
> 赞同：1
> 
> 时间：2012-09-06T15:42:35.840
> 
> 标签：apache2, mod-proxy

我有 ubuntu apache2，我有一个名为 proxy 的模块，在 proxy.conf 中是这样的：（我已经用 XXX 替换了我的 ip）

当我这样做时，代理工作得很好，但它似乎对任何人都开放使用。有什么想法我可能做错了吗？

谢谢乔尔

```
 <IfModule mod_proxy.c>
   ProxyRequests On

    <Proxy *:8080>
            AddDefaultCharset off
            Order deny,allow
            Deny from all
            Allow from XXX.XXX.XXX.XXX
    </Proxy>

    ProxyVia On
</IfModule> 
```

# codeigniter - Codeigniter Ajax - 无法正常工作，出现网络错误

> ID：12303695
> 
> 赞同：0
> 
> 时间：2012-09-06T15:42:48.383
> 
> 标签：codeigniter

我是 CI 新手。

我试图制作一个ajax进程。但我收到以下错误。

**NetworkError: 500 Internal Server Error - 不允许您请求的操作**

这是我的代码

```
 <script type="text/javascript">
    $(document).ready(function() {
       $('#submit').click(function() {
            var form_data = {
            comment : $('#comment').val(),
            ajax : '1'
       };
       $.ajax({
          url: "<?php echo $this->config->item('base_url'); ?>comment/insert",
          type: 'POST',
          async : false,
          data: form_data,
          success: function(msg) {
           $('#emsg').html(msg);
          }
       });
      return false;
   });
 });
 </script>
 But when i access the url directly 
 <?php echo $this->config->item('base_url'); ?>comment/insert 
```

它工作正常。

所以请帮我解决这个问题。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:13:20.230

这里有几件事：

如果您要使用`base_url`，则无需将其分配给或从配置数组访问它。它可以作为`base_url()`. 原样`site_url()`。查看 CodeIgniter 关于[URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)的文档。

现在，话虽如此，我建议不要在你的 's 或's 中使用`site_url()`or函数，除了*一次*：`base_url()``href``src`

 *在`<head>`您的 HTML 文档中使用该`<base>`标记。如果你写: `<base href="<?= site_url();?>">`，你可以简单地使用: 来引用你所有的控制器和函数`controller/function`。无需继续调用`site_url()`or `base_url()`，因为`<base>`为文档中包含的所有相对 URL 指定了一个基本 URL。

接下来，如果您收到 500 个内部服务器错误，请确保启用 PHP 错误报告。在您的控制器调用的构造函数中`error_reporting(E_ALL);`。现在，当发生错误时，使用 Chrome 开发工具检查来自服务器的响应；触发 ajax 请求并进入开发工具的 Network 选项卡。找到 Ajax POST，单击它，您将能够检查服务器响应的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T02:00:01.490

由于以下原因导致此问题

1.  语法错误
2.  控制器或模型中的重复功能*

# android - Android 4.0 软键盘与 EditText 重叠

> ID：12303700
> 
> 赞同：1
> 
> 时间：2012-09-06T15:43:09.443
> 
> 标签：android, android-edittext, android-softkeyboard

找不到解决方案如何通过位于主窗口底部的 ScrollView 下方的 EditText 的弹出 SoftKeyboard 来避免重叠。我花了一天时间在这里寻找解决方案，但所有建议：

我添加了 android:descendantFocusability="beforeDescendants" android:focusableInTouchMode="true" 和 android:focusable="true" android:focusableInTouchMode="true" - 这没有帮助。

调整清单：

```
<activity
    android:name=".mvc.views.SightingDetailsActivity"
    android:theme="@android:style/Theme.Black"
    android:screenOrientation="portrait"
    android:windowSoftInputMode="stateHidden|adjustPan"
    /> 
```

已解决 Android 低于 4.0（2.2、2.3 和 3.2）的问题，但尚未解决 Android 4.0 及更高版本的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:06:57.827

```
use scroll View as a parent and put the other layout component as
a child inside this scroll View.

  <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:paddingLeft="30dp"
  android:paddingRight="30dp"
  android:layout_height="match_parent">
 <TableLayout
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:shrinkColumns="*" 
   android:stretchColumns="*" 
   android:focusableInTouchMode="true">
    <TableRow
         android:layout_width="match_parent"
         android:padding="20dp"
         android:layout_height="wrap_content">
       <TextView
           android:text="@string/introduction"
           android:layout_width="match_parent"
           android:layout_height="wrap_content"
           android:textSize="27dp"
           android:textColor="@color/green"
           android:layout_span="4"
           android:gravity="center_horizontal"/>
  </TableRow>
    <TableRow
          android:layout_width="match_parent"
          android:layout_height="1dp"
          android:background="@color/green">
       <TextView android:layout_span="2" 
           android:layout_height="1dp" 
           android:layout_width="match_parent"
           android:text="">
       </TextView>
      </TableRow>
    </ScrollView> 
```

# objective-c - 在运行时查找发布/调试模式？

> ID：12303702
> 
> 赞同：0
> 
> 时间：2012-09-06T15:43:15.713
> 
> 标签：objective-c, objective-c-runtime

> **可能重复：**
> [发布和调试版本（Obj-C）中的不同代码/配置](https://stackoverflow.com/questions/1406175/different-code-config-in-release-debug-build-obj-c)

有没有办法在 objetive-c 中查找应用程序是在发布模式下运行还是在调试模式下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:06:37.517

[http://jomnius.blogspot.com/2011/09/how-to-do-dynamic-debug-logging-in.html](http://jomnius.blogspot.com/2011/09/how-to-do-dynamic-debug-logging-in.html)这似乎引导我走向正确的方向。

# jquery - 延迟加载后的jQuery淡入图像

> ID：12303703
> 
> 赞同：3
> 
> 时间：2012-09-06T15:43:16.837
> 
> 标签：jquery, image, loading, fadein, delay

我用它来延迟我的图像的加载：

HTML：

```
<img src="loading.gif" delayedSrc="url/to/real/image.png" /> 
```

jQuery：

```
image.attr('src', currentImage.attr('delayedSrc')); 
```

现在加载完成后，如果希望它淡入，而不是仅仅从 loading.gif 切换到真实图像。我试过：

```
image.attr('src', currentImage.attr('delayedSrc')).load(function() {
    image.hide().fadeIn(1000);
} 
```

如果图像尚未缓存（加载 iamge 节目，然后真实图像淡入），这可以正常工作。但是，问题是，如果图像已经被缓存，它们会在页面加载时显示（没有显示加载图像），然后被隐藏并再次淡入，看起来很丑..

我该如何解决这个问题？我的想法可能是检查图像是否已被缓存，并且只有在没有缓存的情况下才进行淡入淡出......毕竟淡化只是在加载图像和真实图像之间获得更柔和的过渡所必需的。但我该如何检查呢？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:49:52.907

您不能仅使用单个图像从一个图像渐变到另一个图像。如果效果不错，您可以将单个图像从零不透明度淡化为完全不透明度。

这是一个例子：http: [//jsfiddle.net/jfriend00/38Afs/](http://jsfiddle.net/jfriend00/38Afs/)

HTML：

```
<img class="delayImg" delayedSrc="http://photos.smugmug.com/photos/344291068_HdnTo-L.jpg" />​ 
```

CSS：

```
.delayImg {opacity:0;}​ 
```

Javascript：

```
$(document).ready(function() {
    $(".delayImg").each(function() {
        this.onload = function() {
            $(this).animate({opacity: 1}, 2000);
        };
        this.src = this.getAttribute("delayedSrc");
    });
});​ 
```

注意：`onload`更改时不会在所有浏览器中可靠地触发`.src`，只有在第一次设置时才会触发，因此设置初始图像`.src`然后稍后更改并在加载新图像时收到通知是一个问题。如果您真的想要这种效果，那么您可能需要将背景图像用于第一张图像，或者使用两个图像对象叠加在一起，使第一个图像淡出，第二个淡入淡出。

这是创建第二个图像的示例，因此您可以在加载后立即淡出另一个图像：http: [//jsfiddle.net/jfriend00/yvc8d/](http://jsfiddle.net/jfriend00/yvc8d/)。

这是稍后在用户操作后消失的地方：http: [//jsfiddle.net/jfriend00/LRRRm/](http://jsfiddle.net/jfriend00/LRRRm/)。

# c - 下面给出的程序中 a 和 b 的值

> ID：12303713
> 
> 赞同：0
> 
> 时间：2012-09-06T15:43:45.077
> 
> 标签：c, undefined-behavior

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

```
int main()
{
int a,b=3;
a=(b++)*(b++)*(b++);
printf("%d %d",a,b);
} 
```

`a`变为 27 但`b`在执行表达式后为 6。谁能告诉我表达式是如何执行的？

# .net - 如何以编程方式确定 LINQ-to-SQL 生成的对象中属性的最大字段长度？

> ID：12303722
> 
> 赞同：0
> 
> 时间：2012-09-06T15:44:18.430
> 
> 标签：.net, linq-to-sql

我有一个非常大的表，有 137 个字段。我在 VB 的 Record 对象中为该表构建记录，然后尝试使用 LINQ to SQL 插入它们。但我无法插入记录，因为一个或多个字段太长。当我尝试使用 linq to sql 插入时，出现错误：*字符串或二进制数据将被截断。该语句已终止。*

我查看了错误消息的详细信息，但找不到哪个字段太长。

为了解决这个问题，我想使用反射循环遍历 Record 对象中每个字段的每个值，然后检查它是否太长。为了做到这一点，我需要以编程方式访问从 linq 到 sql 对象的最大字段长度（所以我知道最大大小是多少）。我怎样才能做到这一点？在给定 linq to sql 对象的 GUI 中，我可以看到每个字段都有一个存储最大值的 serverdatatype 属性。如何使用代码访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:59:38.077

您必须获取属性的属性并查看`DbType`任何应用的属性`ColumnAttribute`以找出“长度”。例如

```
Account acc = new Account();
ColumnAttribute[] att = acc.GetType().GetProperty("CreditCardNumber").GetCustomAttributes(typeof(ColumnAttribute), false) as ColumnAttribute[]; 
```

上面，我有一个 Account 类型（映射到 account 表）和 CreditCardNumber 属性（映射到 CreditCardNumber 列）。此属性具有由 L2S 应用的 ColumnAttribute。

如果`ColumnAttribute`应用了 a，`att`上面将包含一个`ColumnAttribute`对象。`DbType`您可以通过 'att[0].DbType'找出它是什么。例如，这可能是“NVarChar(100)”。您可以解析它以从中获得 100 个。

### 更新：

您还可以使用`MetaModel`与数据上下文关联的对象。例如，如果您已经有一个名为 的数据上下文`dbContext`，则可以按如下方式获取 DbType：

```
 dbContext.Mapping.GetTable(typeof (Account)).RowType.GetDataMember(typeof (Account).GetProperty("CreditCardNumber")).DbType; 
```

您仍然需要解析“NVarChar(100)”文本。

# ruby - 在 tumblr API v2 上使用 oauth 时出现 REXML::ParseException

> ID：12303723
> 
> 赞同：0
> 
> 时间：2012-09-06T15:44:21.173
> 
> 标签：ruby, ruby-on-rails-3, api, heroku, tumblr

我正在使用 Omniauth 尝试从 Tumblr API v2 获取 Oauth 令牌。我可以在 Tumblr 上授权该应用程序，但是当我被重定向到我的应用程序回调页面时，我收到此错误：

```
(tumblr) Callback phase initiated.
REXML::ParseException (#<REXML::ParseException: Missing end tag for 'link' (got "head")
Line: 10
Position: 528
Last 80 unconsumed characters:
> 
```

我看到的日志再往下一点：

```
Missing end tag for 'link' (got "head")
Line: 10
Position: 528 
```

有什么方法可以调试请求对象，以便查看返回的数据是否格式不正确？还有什么我做错了吗？

托管与 Heroku

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:47:29.287

发现答案是使用过时的宝石。

我正在使用omniauth 1.0.1 - 更新到1.1.1，一切正常！

# jquery - # 和 Jquery 选择器中的点有什么区别

> ID：12303729
> 
> 赞同：2
> 
> 时间：2012-09-06T15:44:38.430
> 
> 标签：jquery, jquery-selectors

Jquery中的`#`和（点）有什么区别？`.`

例如，我见过

```
$('#divName').show(); 
```

并且

```
$('.divName').append(); 
```

在我们的代码库中，有人可以解释一下吗？我是 Jquery 的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T15:46:20.007

虽然它基本上是一个 css 选择器，但这里是示例[jQuery 选择器](http://api.jquery.com/category/selectors/)

`#`是一个元素 ID 选择器

`.`是一个元素类选择器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:45:31.970

`#`用于按 id 查找元素，而`.`用于按类名查找元素。

所以`$('#divName')`意味着：`div`使用 id查找`divName`并且`$('.divName')`意味着查找所有具有类的 div`divName`

[您可以在jQuery API Selectors](http://api.jquery.com/category/selectors/)找到选择器范围的描述

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T15:46:51.303

`#`与元素的 id 属性有关，选择器仅返回第一次出现。 `.`与类属性相关，并返回类的所有元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:46:13.730

哈希 (#) 是基于 id 的选择器`<div id="myid">` ，点 (.) 是基于类的选择器`<div class="somethingClass">`

# wpf - 是否可以覆盖 CollectionViewSource.GetDefaultView 以返回我的 ICollectionView 实现？

> ID：12303730
> 
> 赞同：1
> 
> 时间：2012-09-06T15:44:41.830
> 
> 标签：wpf, collectionviewsource, icollectionview

是否可以覆盖 CollectionViewSource.GetDefaultView 以返回我对特定集合类型的 ICollection 视图的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:10:33.677

我认为您不能将其作为默认设置，但您可以使用 CollectionViewSource.CollectionViewType 以使特定的 CollectionViewSource 返回某个 CollectionView 类型。

# c# - 在 C# 中，如何将数组绑定到 DataGridView 以便显示数组中的值？

> ID：12303735
> 
> 赞同：3
> 
> 时间：2012-09-06T15:44:56.507
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用 Visual C# 2010 Express。我有一个像这样 arr[100][2] 的字符串数组。这是我的 3 行代码

```
 string FilePath = @"c:\data.txt";
 var arrData = File.ReadLines(FilePath).Select(line => line.Split('\t')).ToArray();
 dataGridView1.DataSource = arrData; 
```

当我运行代码时，我在 DataGridView 控件中看到 7 个列标题，而不是我的数组的内容：Length、LongLength、Rank、SyncRoot、IsReadOnly、IsFixedSize 和 IsSynchronized。这是什么？

不知何故，我正在显示数组的属性，而不是数组中实际包含的值。

我知道数组中有合法值，因为当我单步执行代码时，我可以清楚地看到内容（姓名和年龄）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:16:46.687

尝试先转换为“对象”列表。我创建了一个包含名字、姓氏和年龄的测试文件，所有这些文件都由一个选项卡分隔以进行测试：

```
string FilePath = @"c:\data.txt";
var arrData = File.ReadLines(FilePath).Select(line => 
                                              line.Split('\t')).ToArray();

var query = from x in arrData
            select new { FirstName = x[0], LastName = x[1], Age = x[2] };

dataGridView1.DataSource = query.ToList(); 
```

我认为您正在尝试的内容很容易出错。我会考虑首先将文件转换为实际的对象列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:15:10.797

你能把你的 arrData 变成一个列表吗？所以它会是这样的：

```
 string FilePath = @"c:\data.txt";
 var arrData = File.ReadLines(FilePath).Select(line => line.Split('\t')).ToList();
 dataGridView1.DataSource = arrData; 
```

这应该是您需要做的所有事情。另外，请务必确保您的 arrData 实际上也包含数据：)

# migration - Websphere 8 迁移 - AbstractMethodError: javax/servlet/ServletRequest.getDispatcherType

> ID：12303736
> 
> 赞同：0
> 
> 时间：2012-09-06T15:44:59.037
> 
> 标签：migration, websphere

我想将我的 Web 应用程序从 WAS 7.0.0.7 升级到 WAS 8.5。该应用程序正常部署，但只要我想访问它，我就会得到以下异常：

```
java.lang.AbstractMethodError: javax/servlet/ServletRequest.getDispatcherType()Ljavax /servlet/DispatcherType 
```

WAS 8 使用 Servlet 3.0 容器，但它应该与我在应用程序中使用的 2.4 版本向后兼容。

我将类加载设置为 PARENT LAST 并且仍然得到相同的错误。

Websphere 正在调用自 Servlet 3.0 起可用的 getDispatcherType()。为什么？

我使用以下 web.xml 标头

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
     version="2.4"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:33:00.697

您是否有机会在您的应用程序中包含包含标准 Servlet API 的 JAR 文件？您能否列出您的 EAR 中包含的所有 JAR 文件？

编辑了询问者的以下信息：您提到您正在包装请求对象。我猜，当您编译代码时，您是针对 Servlet 2.4 类进行编译的。这就是编译通过 OK 的原因（您不必实现`getDispatcherType`）。稍后，在运行时，您会得到，`AbstractMethodError`因为您的包装器实现不包含现在需要的`getDispatcherType`方法的实现。

解决这个问题的唯一方法（在我看来）仍然是针对 Servlet 3.0 类进行编译。WebSphere 8.5 将*始终*假定请求是 Servlet 3.0，没有办法绕过它。

为什么不能针对 Servlet 3.0 类进行编译是有原因的吗？

# c# - 类中接口之外的公共方法

> ID：12303740
> 
> 赞同：2
> 
> 时间：2012-09-06T15:45:19.800
> 
> 标签：c#, unit-testing, testing, tdd

例子：

```
public interface IFoo
{
    bool DoSomething();
}

public class Foo:IFoo
{
    public bool DoSomething()
    {
        var result = DoOtherThing();
        ...
        return result;
    }

    public bool DoOtherThing()
    {
        ...
    }
} 
```

我通常的 TDD 方法是在`DoSomething()`和`DoOtherThing()`方法上编写单元测试。`DoOtherThing`但如果是私有方法，这将很难做到。我还读过测试私有方法是一个禁忌。

为了便于代码覆盖和测试，在一个类上拥有公共方法是否被认为是可以接受的，即使该类的目的只是通过其 (IFoo) 接口访问？通常我会将接口范围之外的方法作为私有方法，但这不允许您有效地测试所有代码。公开方法允许您对`Foo`类进行正确的测试，但至少对我来说，拥有不从类外部调用的公共方法似乎不正确。这种方式被认为最适合 TDD 还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:49:44.100

公共方法是公共的，因为它们应该是可访问的。如果不打算从外部调用它，请将其设为私有。

如果您未能获得代码覆盖率，您可能希望将您的类分解为多个类并改用组合。

难以测试的东西通常表明存在设计缺陷。

**更新**

> 好的，假设您有一种发送电子邮件的方法。第 1 步是生成一个 MailMessage 类并填充它。第 2 步是发送电子邮件

那是两个责任（SRP）。撰写电子邮件并实际发送。我不会在同一个班级这样做。如果您所有的电子邮件类都编写它们的消息然后发送它们，这也将是代码重复。你如何处理网络故障？你也复制这些支票吗？

执行以下操作：

```
public class SendWelcomeEmailComposer
{
    MailMessage Compose(User user)
}

public class EmailSender
{
    void SendEmail(MailMessage);
}

public class EmailService
{
    void SendWelcomeEmail(User user)
    {
        // compose email
        // and send using the classes above.
    }
} 
```

**更新 2**

就我而言，您不应该测试私有方法的原因是质量度量。如果您的测试覆盖率较低，您可能会违反一些基本原则 (SOLID)。

因此，最好花时间反思类设计，而不是尝试测试私有方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:55:35.453

这里的诀窍是使用

```
[assembly: InternalsVisibleTo("NameOfYourTestAssembly")] 
```

在 AssemblyInfo.cs 文件中。

这允许您将可测试方法设为内部，这意味着它们只能在您正在编写的程序集中以及此属性中的程序集中访问。

（如果您有一个 Mycode.dll 和一个 Mycode.Tests.dll，那么您将属性添加到 MyCode/Properties/AssemblyInfo.cs）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:45:10.040

我认为你需要专注于测试*什么*，你会发现*如何*设计一个（或多个）通过测试的对象只是一个偏好和方便的问题。你的问题没有一个正确的答案。

由于您决定分两步分解全局操作，因此您需要测试以下内容：

1.  验证第一部分 ( `DoSomething()`) 的行为是否符合预期。这可能包括测试它是否调用了正确的依赖项，将 Foo 对象置于正确的状态等。

2.  验证第一步之后是第二步，换句话说，如果需要，使用正确的参数调用`DoSomething()`。`DoOtherThing()`

3.  验证第二步 ( `DoOtherThing()`) 的行为是否符合预期。同样，这可能包括它正确地与其依赖项对话，产生正确的输出等等。

不*知道如何*。虽然 #1 的测试和实施非常简单，因为我们有`DoSomething()`公开的先决条件，但 #2 和 #3 让您的实施和测试选项更加开放。基本上你可以做两件事：

*   将 2 个职责留在一个类中。反过来，此选项在许多可能性中失效：`DoOtherThing()` *公开*（易于测试但不安全，因为我们可能不希望将操作的内部子步骤暴露给外部），正如@AlSki 指出的那样使其成为*内部的，使其**[受到保护](http://blogs.clariusconsulting.net/kzu/mocking-protected-members-with-moq/)虚拟*并在您的测试中使用[部分模拟](http://www.barebonescoder.com/2010/09/the-joy-of-moq-partial-mocks/)来验证这两种方法之间的协作。名单肯定还在继续。

*   给每个步骤一个自己的类。如果它们确实是处理系统的不同部分或与不同层对话的两个不同的职责，则这一点尤其重要。您通常的模拟和协作测试适用于此。

**旁注 1**：如果您未能区分操作中的 2 个职责并将这两个步骤放在一个方法中，那么事情将会完全不同，因为您的测试实际上是集成测试而不是单元测试。这可能会带来一些问题，比如只关注管道每一端发生的事情，而无法验证所有中间作业的正确性。因此，我认为最好在尽可能多的合理步骤中分解大型操作（例如在电子邮件发送示例中，创建正确的`MailMessage`数据结构显然是与发送数据结构不同的责任）并测试其中的每一个.

**Side note 2** : The fact that your class implements IFoo is only remotely related to all this. It basically affects the other side of the coin - defining the entry point to your class from other classes. If you want to test things in isolation, you'll probably have to create IFoo mocks in IFoo consumers' tests and verify that these consumer classes call `DoSomething()` properly.

# javascript - 使用谷歌地图 api 3 的 MapTypeId.TERRAIN 的单独按钮

> ID：12303741
> 
> 赞同：2
> 
> 时间：2012-09-06T15:45:23.357
> 
> 标签：javascript, google-maps-api-3

我目前的理解是，当用户将鼠标悬停在 MAP 按钮 (MapTypeId.ROADMAP) 上时，谷歌地图 api3 MapTypeId.TERRAIN 显示为复选框选项。我想把它分解成一个单独的按钮，每个 mapTypeId 有 3 个按钮（ROADMAP、SATELLITE、TERRAIN）。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T22:03:25.070

实现[自定义控件](https://developers.google.com/maps/documentation/javascript/controls#CustomControls)。单击它时，设置 mapTypeId。

# powershell - Powershell ParseExact 日期格式 yyyyMMdd 问题

> ID：12303748
> 
> 赞同：1
> 
> 时间：2012-09-06T15:46:05.023
> 
> 标签：powershell

下午好，

有人可以告诉我如何使用 powershell 将日期 20120624 转换为 yyyyMMdd，因为我在运行以下代码时得到“字符串未被识别为有价值的日期时间”

```
[String]$ServiceTag = "b26ybt1";

Try{ 
       $AssetService = New-WebServiceProxy -Uri "http://xserv.dell.com/services/AssetService.asmx?WSDL"; 
       $ApplicationName = "AssetService"; 
       $Guid = [Guid]::NewGuid(); 
       $Asset = $AssetService.GetAssetInformation($Guid,$ApplicationName,$ServiceTag); 
       $Writer = New-Object "System.IO.StringWriter"; 
       $XmlSerializer = New-Object System.Xml.Serialization.XmlSerializer($Asset.GetType()); 
       $XmlSerializer.Serialize($Writer,$Asset); 
       [String]$Result = $Writer.ToString(); 
       $Writer.Flush(); 
       $Writer.Close(); 
       Return $Result; 
} 
Catch{ 
       Write-Host $($_.Exception.Message);     
}

$prog = [regex]::match($Result,'(?<=StartDate>)(.*)(?=T00)').Groups[1].Value
[System.Text.RegularExpressions.Regex]::Replace($prog,"[-]","");

[datetime]::ParseExact($prog,"yyyyMMdd",$null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:24:04.567

改变

```
[System.Text.RegularExpressions.Regex]::Replace($prog,"[-]",""); 
```

到

```
$prog = [System.Text.RegularExpressions.Regex]::Replace($prog,"[-]",""); 
```

您所做的只是返回替换将执行的操作，而实际上从未将其分配给变量。当我像上面那样运行它时，我得到了以下信息：

```
Sunday, June 24, 2012 12:00:00 AM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:47:14.217

您可以将结果转换为 XML 而不是 String 并避免字符串解析：

```
[xml]$Result = $Writer.ToString()
[datetime]$Result.ArrayOfAsset.Asset.Entitlements.EntitlementData[0].StartDate 
```

# git-tf - git-tf 是否允许合并远程分支？樱桃采摘怎么样？

> ID：12303755
> 
> 赞同：2
> 
> 时间：2012-09-06T15:46:20.670
> 
> 标签：git-tf

我们在发布周期中维护多个 TFS 分支。当前流程是在用户故事完成后从 WIP 分支中挑选变更集到测试分支中。

我很想知道 git-tf 是否允许以这种方式处理多个远程分支，以及它是否能够签入合并而不是签入看起来像新代码的代码。

有一个关于这个here的讨论：

[用 git tfs 合并两个 TFS 分支](https://stackoverflow.com/questions/8559814/merge-two-tfs-branches-with-git-tfs)

并且有人提到 git-tfs 不会与其他直接使用 VS 的人相处得很好。有谁知道 git-tf 是不是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:45:16.610

此时，`git-tf`不会用 git 分支表示 TFS 分支，也不会在任一方向翻译合并——也就是说它不会在合并中签入，也不会将 TFS 合并的结果显示为 git 合并。这是一个非常重要的问题，因为两种架构中的合并之间存在一些非常根本的差异。

**TFS 合并为 git 合并：**

在 git 中，您合并两个提交并最终得到一个结果提交。TFS 看起来很相似——因为您选择了合并源和目标变更集，但合并源不必是变更集。您可以根据标签、工作区版本、日期等进行合并。这意味着您最终可以合并来自多个不同更改的不同文件。这是很容易解决的问题（最终，我认为，将其表示为一些疯狂的章鱼合并）。

一个更难解决的问题是基于 TFS 分支创建 git 分支。这更像是一个设置问题 - 即，您想要哪些分支？他们都是？他们中有一些？如果答案是“全部”，那么在您进行初始克隆时很容易设置。但对我来说，那是 - 微不足道的数百个分支机构，而且第一次建立起来有点贵。如果答案是“其中一些”，那么您必须在克隆时全部指定它们，否则您最终会以令人讨厌的方式重写 git 历史记录。

**git 合并为 TFS 合并：**

在 git 中，分支是短暂的。它实际上只是一个指向树中节点的指针......没有长寿命的状态说“提交`1b4caf`曾经在分支`branch`中”。想象一下，您有一些 git 分支`master`指向 TFS 分支`$/Proj/main`，而另一个 git 分支`test`指向`$/Proj/test`. 在 git 中，你合并`test`到`main`. 没问题，此时`main`的`HEAD`提交有一个父级是`test`'s `HEAD`。但是，如果您开始更改`test`分支中的内容，这很快就会变得难以确定。

此外，现在`git-tf`将单个 git 分支映射到您的 TFS 服务器路径。对于合并签入，我们必须一次签入多个分支。假设您对它们进行了一些提交`master`和一些提交`test`，然后合并它们`HEAD`的每一个。现在我们必须检查每个 TFS 分支的多个提交，然后进行合并。这并不一定很难，但它与`git-tf`当前的工作方式大相径庭。

这绝不是一个不可能的问题，但这需要一些聪明的工程和大量的聪明测试。但它还没有。

# ruby - 如何使用 GLI 2.0 ruby gem 来接受 ARGF 数据？

> ID：12303756
> 
> 赞同：3
> 
> 时间：2012-09-06T15:46:25.650
> 
> 标签：ruby, command-line, gli-gem

我使用[GLI 2.0 gem](http://davetron5000.github.com/gli/)为所有漂亮的命令行结构创建了自己的 gem。它工作正常，但我也想支持输入的数据。

```
my_prog new some_file # this is ok already
some_process | my_prog # how do I add this? 
```

在某个地方我需要检查它是如何被调用的（不知何故），然后采取适当的行动。我已经简化了一点，但我当前的代码如下。

```
require 'rubygems'
require 'gli'

include GLI::App

desc 'My example'
command :new do |c|
  desc 'Specify input file'
  arg_name 'filename'
  c.flag [:i,:input]

  c.action do |global_options,options,args|
    exit_now!("Input file must be specified") if options[:o].nil?
    exit_now!("New failed") unless File.exists?(options[:o])
  end
end

exit run(ARGV) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:18:57.600

简单总结一下上面的讨论：

GLI 目前 mutates `ARGV`，因此即使您正在输入，也`ARGF`应该在命令块内正常工作`action`。但是，GLI 确实需要某种命令才能运行，即使它覆盖了`help`相关命令的默认值。

# asp.net - 一个gridview数据源可以是另一个gridview吗

> ID：12303761
> 
> 赞同：0
> 
> 时间：2012-09-06T15:46:35.093
> 
> 标签：asp.net, vb.net

gridview 数据源可以是另一个 gridview 吗？

```
'table2 is a custom datatable

Dim myCustomGV As GridView = New GridView()
myCustomGV.DataSource = table2

'GridView1 is a control on the page
GridView1.DataSource = myCustomGV
GridView1.DataBind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:19:24.047

没有一个网格视图的数据源应该是一个实现 IDataSource 的对象，显然 GridView 没有实现它。所以你不能，它也没有意义。

这是一个帮助您使用 [http://msdn.microsoft.com/en-us/library/system.web.ui.idatasource.aspx的链接](http://msdn.microsoft.com/en-us/library/system.web.ui.idatasource.aspx)

# java - 将 GenBank 格式文件转换为 FASTA 格式

> ID：12303763
> 
> 赞同：1
> 
> 时间：2012-09-06T15:46:44.047
> 
> 标签：java, netbeans-6.9, fasta, biojava, genbank

我对 Java 很陌生，想构建一个可以将 GenBank 文本文件转换为 FASTA 格式的程序。基本上会有两个 texboxes：一个是我上传 GenBank 格式文件的地方，另一个是显示转换后的 FASTA 格式文件的地方。

这是一个 GenBank 格式文件：

```
LOCUS       AB000263                 368 bp    mRNA    linear   PRI 05-FEB-1999
DEFINITION  Homo sapiens mRNA for prepro cortistatin like peptide, complete
            cds.
ACCESSION   AB000263
ORIGIN      
        1 acaagatgcc attgtccccc ggcctcctgc tgctgctgct ctccggggcc acggccaccg
       61 ctgccctgcc cctggagggt ggccccaccg gccgagacag cgagcatatg caggaagcgg
      121 caggaataag gaaaagcagc ctcctgactt tcctcgcttg gtggtttgag tggacctccc
      181 aggccagtgc cgggcccctc ataggagagg aagctcggga ggtggccagg cggcaggaag
      241 gcgcaccccc ccagcaatcc gcgcgccggg acagaatgcc ctgcaggaac ttcttctgga
      301 agaccttctc ctcctgcaaa taaaacctca cccatgaatg ctcacgcaag tttaattaca
      361 gacctgaa
// 
```

其对应的FASTA格式文件为：

```
>AB000263 |acc=AB000263|descr=Homo sapiens mRNA for prepro cortistatin like peptide, complete cds.|len=368
ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCC
CCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGC
CTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGG
AAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCC
CTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAG
TTTAATTACAGACCTGAA 
```

任何人都可以帮助我提供有关如何修剪 GenBank 文件并通过单击按钮将其显示在第二个文本框中的方法或代码的建议。

我正在使用 Netbeans 6.9。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:22:04.110

我没有使用它，但[BioJava 项目](http://biojava.org/wiki/Main_Page)包含用于[读取](http://biojava.org/wiki/BioJava%3aCookbook%3aSeqIO%3aReadGES)可能包含多个序列的 GenBank 文件的代码。有关显示，请参阅[*如何以 Fasta 格式打印序列*](http://biojava.org/wiki/BioJava%3aCookbook%3aSeqIO%3aWriteInFasta)。

# xcode - xcode interfacebuilder 对象链接到检查器中的自定义类？

> ID：12303767
> 
> 赞同：2
> 
> 时间：2012-09-06T15:46:54.227
> 
> 标签：xcode, interface-builder

在 Xcode（最新版本）Interfacebuilder 中，您可以将对象链接到代码。

我创建了一个类：@interface FileChangeController：NSObject

但它没有在自定义类中列出，在 Interfacebuilder Inspector 中？

你必须做一些特别的事情吗？

在此先感谢 问候克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:50:49.483

您必须从 UI* 类中继承子类才能显示在检查器中。例如：

```
@interface FileChangeController : UIViewController 
```

这应该使它在检查器中可见。

![自定义类检查器](../Images/91d0495494cb3a31b3bef5fc572db988.png)

此外，它仅对相关控件可见。那就是 UIViewController 类只会对视图控制器（duh！）对象可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:54:25.717

首先确保您已将视图控制器类正确链接到界面构建器视图控制器

![在此处输入图像描述](../Images/dcf26a1cbd99ed6f59c66e0718636060.png)

然后使用助手编辑器，您可以直接将连接拖到代码中。

![在此处输入图像描述](../Images/f2bc16c8d4e755f586548eda8b5a42af.png)

# vba - VBA 筛选表并将结果列的子集复制到剪贴板

> ID：12303770
> 
> 赞同：2
> 
> 时间：2012-09-06T15:46:57.427
> 
> 标签：vba, excel, filter, copy-paste

我正在尝试将源表中的行和列的子集自动复制到剪贴板中，以便在其他应用程序中使用。我正在表的标题上创建过滤器并正确过滤行，但不知道如何按我想要的顺序选择列的子集。源表是 A - L 列，我想在应用过滤器后按顺序将 C、I、H 和 F 列复制到剪贴板。下面包含一些代码（减去复制部分）。

```
Sub exportExample()
    Dim header As Range
    Dim srcCol As Range

    Set header = [A5:L5]

    header.AutoFilter
    header.AutoFilter 12, "Example", xlFilterValues

    'Copy out columns C, I, H and F of the resulting table in that order
End Sub 
```

我可以弄清楚如何复制列，但不知道如何按照我想要的顺序获取它们。任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:32:25.547

这是你正在尝试的吗？我已经对代码进行了注释，以便您理解它不会有任何问题。

**逻辑**：

1.  过滤数据
2.  创建一个临时表
3.  将过滤后的数据复制到临时表
4.  删除不必要的列（A、B、D、E、G、J、K、L）
5.  将相关列（C、F、H、I）重新排列为 C、I、H 和 F
6.  最后删除Temp Sheet（IMP：阅读代码末尾的注释）

**代码（*经过试验和测试*）**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet, wsTemp As Worksheet
    Dim rRange As Range, rngToCopy As Range
    Dim lRow As Long

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Get the Last Row
        lRow = .Range("L" & .Rows.Count).End(xlUp).Row

        '~~> Set your range for autofilter
        Set rRange = .Range("A5:L" & lRow)

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Filter, copy visible rows to temp sheet
        With rRange
            .AutoFilter Field:=12, Criteria1:="Example"

            '~~> This is required to get the visible range
            ws.Rows("1:4").EntireRow.Hidden = True

            Set rngToCopy = .SpecialCells(xlCellTypeVisible).EntireRow

            Set wsTemp = Sheets.Add

            rngToCopy.Copy wsTemp.Range("A1")

            '~~> Unhide the rows
            ws.Rows("1:4").EntireRow.Hidden = False
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With

    '~~> Re arrange columns in Temp sheet so that we get C, I, H and F
    With wsTemp
        .Range("A:B,D:E,G:G,J:L").Delete Shift:=xlToLeft
        .Columns("D:D").Cut
        .Columns("B:B").Insert Shift:=xlToRight
        .Columns("D:D").Cut
        .Columns("C:C").Insert Shift:=xlToRight

        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        Set rngToCopy = .Range("A1:D" & lRow)

        Debug.Print rngToCopy.Address

        '~~> Copy the range to clipboard
        rngToCopy.Copy
    End With

    'NOTE
    '
    '~~> Once you have copied the range to clipboard, do the necessary
    '~~> actions and then delete the temp sheet. Do not delete the
    '~~> sheet before that. An alternative would be to use the APIs
    '~~> to place the range in the clipboard so you can safely delete
    '~~> the sheet before performing any actions. This will not clear
    '~~> clear the range if the sheet is immediately deleted.
    '
    '

    Application.DisplayAlerts = False
    wsTemp.Delete
    Application.DisplayAlerts = True
End Sub 
```

**截屏**

代码运行前的 Sheet1

![在此处输入图像描述](../Images/d5d2a5f7c81063595e93b862baba4068.png)

带有过滤数据的临时表

![在此处输入图像描述](../Images/7ca792848f1caa7e5a5aa9da71e135d5.png)

**跟进**

要删除边框，您可以将此代码添加到上面的代码中

```
With rngToCopy
    .Borders(xlDiagonalDown).LineStyle = xlNone
    .Borders(xlDiagonalUp).LineStyle = xlNone
    .Borders(xlEdgeLeft).LineStyle = xlNone
    .Borders(xlEdgeTop).LineStyle = xlNone
    .Borders(xlEdgeBottom).LineStyle = xlNone
    .Borders(xlEdgeRight).LineStyle = xlNone
    .Borders(xlInsideVertical).LineStyle = xlNone
    .Borders(xlInsideHorizontal).LineStyle = xlNone
end with 
```

将上面的代码放在该行之后`Debug.Print rngToCopy.Address`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:36:51.053

您必须单独复制列，因为引用范围的对象要求单元格按顺序排列。

像这样的东西应该工作：

```
activeworkbook.Sheets(1).Columns("C:C").copy activeworkbook.Sheets(2).Columns("A:A")
activeworkbook.Sheets(1).Columns("I:I").copy activeworkbook.Sheets(2).Columns("B:B")
activeworkbook.Sheets(1).Columns("H:H").copy activeworkbook.Sheets(2).Columns("C:C")
activeworkbook.Sheets(1).Columns("F:F").copy activeworkbook.Sheets(2).Columns("D:D") 
```

那么你应该能够做到：

```
activeworkbook.Sheets(2).Columns("A:D").copy 
```

把它放到剪贴板

# android - AsyncTask 下载图像错误

> ID：12303773
> 
> 赞同：0
> 
> 时间：2012-09-06T15:47:02.700
> 
> 标签：android, android-asynctask

我使用 Google Chart API 在我的应用程序中构建图表。

就我而言，我需要在每个图表上下载图像。我为此使用 AsyncTask。

要监控下载过程，我使用进度对话框。但是在此类 AsyncTask 中出现错误。

AsyncTask 的执行：

```
new loadChart(ChartAct.this,img).execute(); 
```

和 AsyncTask 的代码：

```
public class loadChart extends AsyncTask<Void, Void, Void> {
    private ImageView img;
    private Context con;
    private ProgressDialog dialog;

    public loadChart(Context context, ImageView img1) {
        this.img = img1;
        this.con = context;
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(con, "Connecting:",
                "Loading. Please wait...", true);
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params) {
        final Bitmap bitmap = DownloadImage();
        img.setImageBitmap(bitmap);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        dialog.dismiss();
        super.onPostExecute(result);
    }

    private static InputStream OpenHttpConnection(String urlString)
            throws IOException {

        Log.d("palval", "OpenHttpConnection");
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            response = httpConn.getResponseCode();

            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }

            String res = Integer.toString(response);
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    public static Bitmap DownloadImage() {
        Log.d("palval", "DownloadImage");
        Bitmap bitmap = null;
        InputStream in = null;
        try {

            in = OpenHttpConnection("https://chart.googleapis.com/chart?chs=440x220&chd=t:60,40&cht=p3&chl=Hello|World");
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;
    }

} 
```

错误：

```
09-06 18:35:35.574: E/AndroidRuntime(2502): FATAL EXCEPTION: AsyncTask #1
09-06 18:35:35.574: E/AndroidRuntime(2502): java.lang.RuntimeException: An error occured while executing doInBackground()
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.lang.Thread.run(Thread.java:864)
09-06 18:35:35.574: E/AndroidRuntime(2502): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4132)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:723)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.View.requestLayout(View.java:12957)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.View.requestLayout(View.java:12957)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.View.requestLayout(View.java:12957)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.View.requestLayout(View.java:12957)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.view.View.requestLayout(View.java:12957)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.widget.ImageView.setImageDrawable(ImageView.java:362)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.widget.ImageView.setImageBitmap(ImageView.java:377)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at com.example.headache.loadChart.doInBackground(loadChart.java:37)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at com.example.headache.loadChart.doInBackground(loadChart.java:1)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-06 18:35:35.574: E/AndroidRuntime(2502):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-06 18:35:35.574: E/AndroidRuntime(2502):     ... 5 more
09-06 18:35:36.055: E/WindowManager(2502): Activity com.example.headache.ChartAct has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40dd3b28 that was originally added here
09-06 18:35:36.055: E/WindowManager(2502): android.view.WindowLeaked: Activity com.example.headache.ChartAct has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40dd3b28 that was originally added here
09-06 18:35:36.055: E/WindowManager(2502):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:352)
09-06 18:35:36.055: E/WindowManager(2502):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:373)
09-06 18:35:36.055: E/WindowManager(2502):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:321)
09-06 18:35:36.055: E/WindowManager(2502):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
09-06 18:35:36.055: E/WindowManager(2502):  at android.view.Window$LocalWindowManager.addView(Window.java:541)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.Dialog.show(Dialog.java:301)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ProgressDialog.show(ProgressDialog.java:116)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
09-06 18:35:36.055: E/WindowManager(2502):  at com.example.headache.loadChart.onPreExecute(loadChart.java:29)
09-06 18:35:36.055: E/WindowManager(2502):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
09-06 18:35:36.055: E/WindowManager(2502):  at android.os.AsyncTask.execute(AsyncTask.java:511)
09-06 18:35:36.055: E/WindowManager(2502):  at com.example.headache.ChartAct.onCreate(ChartAct.java:31)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.Activity.performCreate(Activity.java:4531)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
09-06 18:35:36.055: E/WindowManager(2502):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 18:35:36.055: E/WindowManager(2502):  at android.os.Looper.loop(Looper.java:154)
09-06 18:35:36.055: E/WindowManager(2502):  at android.app.ActivityThread.main(ActivityThread.java:4945)
09-06 18:35:36.055: E/WindowManager(2502):  at java.lang.reflect.Method.invokeNative(Native Method)
09-06 18:35:36.055: E/WindowManager(2502):  at java.lang.reflect.Method.invoke(Method.java:511)
09-06 18:35:36.055: E/WindowManager(2502):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-06 18:35:36.055: E/WindowManager(2502):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-06 18:35:36.055: E/WindowManager(2502):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:51:06.270

您不能将图像设置为`doInBackground()`使其返回位图并将其设置在`onPostExecute()`

```
public class loadChart extends AsyncTask<Void, Void, Bitmap> {
    private ImageView img;
    private Context con;
    private ProgressDialog dialog;

    public loadChart(Context context, ImageView img1) {
        this.img = img1;
        this.con = context;
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(con, "Connecting:",
                "Loading. Please wait...", true);
        super.onPreExecute();
    }

    @Override
    protected Bitmap doInBackground(Void... params) {
        final Bitmap bitmap = DownloadImage();
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        dialog.dismiss();
        img.setImageBitmap(result);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:48:46.127

您无法从中访问 UI `doInBackground()`，这就是您通过使用`img.setImageBitmap(bitmap);`. 如果您在使用后台活动时需要这样做`runOnUiThread()`，请将您的 UI 访问代码移动到`onPostExecute()`或将位图存储在对象中但分配给 UI 元素`onProgressUpdate()`。一般看一下[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:50:26.513

您不能从 修改 UI 元素`doInBackground()`。

尝试使用`runOnUIThread()`Activity 的方法或将更改 UI 的方法放入`onPostExecute()`方法中。

阅读[此答案](https://stackoverflow.com/questions/7768221/asynctask-crashes-sometimes/7777980#7777980)以获取更多详细信息。

# c# - 如果 Interface/AbstractClass 已经评论了我要写什么给子类？

> ID：12303775
> 
> 赞同：1
> 
> 时间：2012-09-06T15:47:14.900
> 
> 标签：c#, .net, comments

如果 Interface 或 AbstractClass 中的方法已被注释（这就是正确的方法？总是注释 interface 和 abtract 方法），我必须在 Subclass 方法中写入什么？没有什么？或者也许是参考（如何？）？正确的方法是什么？如果假设我在子类中评论了一个方法，但我想在子类方法中扩展它，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:54:30.123

我倾向于说你应该评论两者。我对此的主要理由是，如果覆盖没有，智能感知将不会获取基本方法的注释，而且覆盖可能具有不同的逻辑，这意味着原始注释可能不准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:54:34.090

如果说“评论”你的意思是添加一个`comment`，那么`VisualStudio`智能会告诉你：没有评论派生（多态性）的概念，所以对于那个的每个孩子，`interface`或者`abstract class`你必须添加一个新的评论。

# delphi - 如何最好地使用 Omnithread 转换多个 Delphi TTimer 后台扫描任务

> ID：12303776
> 
> 赞同：0
> 
> 时间：2012-09-06T15:47:20.430
> 
> 标签：delphi, omnithreadlibrary, ttimer

我已经开始考虑使用 Omnithread 来使用多线程改进我的 Delphi 应用程序。文档很好地涵盖了创建一个或多个工作任务，因此我从按钮单击调用的长操作可以替换为此演示代码（Async、CreateTask 等）。我遇到的困难是如何替换我最“混乱”的代码，其操作如下。

我有一个对应于硬件模块的单个类实例的概念。该类发布了一个或多个属性，这些属性公开了硬件的当前值和设置。属性可能是只读的或读/写的。对于这些类实例中的每一个，可以有从零到几个可见的显示表单。显示表单具有 TTimer 和上述已发布属性的内置列表。该列表被迭代以匹配适当命名的控件，例如标签或编辑控件，并且使用 RTTI 机制来获取和设置控件及其属性之间的值。结果是一个表单，它为实际硬件模块提供了一个很好的 UI，其副作用是可以打开多个表单，修改其中一个表单上的数据会导致其他表单在不久之后显示该数据。此属性监视由 TTimer 以 300 ms 的间隔滴答执行。每个刻度使它扫描类的所有属性并刷新其窗体上的匹配控件。计时器在打开表单的生命周期内运行。表单在需要时创建然后释放（这具有有用的性能优化，即在没有打开表单来检查硬件的情况下，应用程序必须尽可能快地运行，因为没有监控任务可以运行）。

有没有更好的方法使用线程来访问我发布的属性，而不是在 UI 线程中使用 TTimer？或者同步问题是否会超过任何优势？如果线程很有用，如何创建重复任务，例如模拟滴答计时器？

# asp.net - 使用 Team City 的 Web Deploy 预编译 ASP.NET

> ID：12303777
> 
> 赞同：4
> 
> 时间：2012-09-06T15:47:21.343
> 
> 标签：asp.net, msbuild, webdeploy

我目前在 Team City 中有一个具有以下命令行参数的解决方案构建：

```
/p:DeployOnBuild=true;DeployTarget=Package 
```

这将创建一个 Web 部署包，然后从另一个构建步骤进行部署。我遇到的问题是这个包不包含预编译视图，尽管在`Package/PublishWeb`.

我知道发布配置文件不能通过 msbuild 获得（这很糟糕......），但即便如此，我希望这仍然可以通过命令行实现。

任何帮助将不胜感激。

# python - Pika worker 运行 channel.declare_queue 时抛出异常

> ID：12303784
> 
> 赞同：7
> 
> 时间：2012-09-06T15:47:56.420
> 
> 标签：python, rabbitmq, amqp, pika

我正在编写一个 python 客户端来接受来自 RabbitMQ 代理的作业消息并处理作业，将结果返回到另一台服务器。我的向 RabbitMQ 代理发送消息的脚本启动良好，但我的工作人员在运行 channel.declare_queue(queue='task_queue') 时抛出以下错误

pika.exceptions.AMQPChannelError：（406，“PRECONDITION_FAILED - vhost '/' 中队列 'task_queue' 的参数不等效”）

客户：

```
import pika    
connection = pika.BlockingConnection(pika.ConnectionParameters(host=cmdargs.server))
channel = connection.channel()
channel.queue_declare(queue='task_queue')
channel.basic_qos(prefetch_count=1)
channel.basic_consume(ProcJobCallback, queue='task_queue')
channel.start_consuming() 
```

与 RabbitMQ 交互的服务器方法：

```
def addNewJob(self, newJob):
        self.jobList.append(newJob)
        connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
        channel = connection.channel()
        channel.queue_declare(queue='task_queue')

        for tile in newJob.TileStatus:
                message = "{0},{1},{2}".format(newJob, tile[0], tile[1])
                channel.basic_publish(exchange='', routing_key='task_queue', body=message, properties=pika.BasicProperties(delivery_mode = 2, ))
        connection.close() 
```

非常感谢任何帮助或见解。

编辑：我发现了上面列出的代码出现错误的原因。我在发布消息时指定了 delivery_mode=2，但是当我声明队列时，我忘记添加 Durable=True 参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-22T18:03:26.737

如果您的队列是持久的，只需删除声明“channel.queue_declare(queue='task_queue')”，在您的情况下就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:37:55.523

您确定要连接到发布者和消费者端的同一服务器（主机）吗？

```
connection = pika.BlockingConnection(pika.ConnectionParameters(host=cmdargs.server))

connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T08:15:07.070

当我尝试使用耐用 = True 使队列消息持久化时，我遇到了同样的问题。

尝试重命名队列名称，它适用于我的脚本。也许杀死队列***new_task***，然后重新运行您的脚本也可以。

# wso2 - 使用 WSO2 产品的价格比较引擎

> ID：12303785
> 
> 赞同：1
> 
> 时间：2012-09-06T15:47:56.457
> 
> 标签：wso2, drools, rule-engine, business-rules, wso2esb

我们将 WSO2 ESB 用于聚合项目。我们正在从六个供应商处获取使用 SOAP 的某些产品的价格，响应格式已经在 ESB 中统一，每个响应包含 5-10 个产品。以下是一些示例响应：

**供应商 1 的回应：**

```
<Products Vendor="1stVendor">
    <Product>
        <Brand>Sony</Brand>
        <Model>M5<Model> 
        <Price>800.00<Price>
    <Product>
    <Product>
        <Brand>Dell</Brand>
        <Model>B6<Model> 
        <Price>900.00<Price>
    <Product>
    <Product>
        <Brand>IBM</Brand>
        <Model>H9<Model> 
        <Price>950.00<Price>
    <Product>
<Products> 
```

**供应商 2 的回应：**

```
<Products Vendor="2ndVendor">
    <Product>
        <Brand>Sony</Brand>
        <Model>M5<Model> 
        <Price>720.00<Price>
    <Product>
    <Product>
        <Brand>Dell</Brand>
        <Model>B6<Model> 
        <Price>950.00<Price>
    <Product>
    <Product>
        <Brand>IBM</Brand>
        <Model>H9<Model> 
        <Price>940.00<Price>
    <Product>
<Products> 
```

现在我们需要比较每种产品的价格，以找到每种产品的最便宜价格，并返回最佳选项作为最终响应。对于上面的示例，它应该如下所示：

```
<Products>
    <Product CheapestVendor="2ndVendor">
        <Brand>Sony</Brand>
        <Model>M5<Model> 
        <Price>720.00<Price>
    <Product>
    <Product CheapestVendor="1stVendor">
        <Brand>Dell</Brand>
        <Model>B6<Model> 
        <Price>900.00<Price>
    <Product>
    <Product CheapestVendor="2ndVendor">
        <Brand>IBM</Brand>
        <Model>H9<Model> 
        <Price>940.00<Price>
    <Product>
<Products> 
```

关于以上细节：

1-实施此的最佳/最快策略是什么？

2- 我们可以使用 WSO2 BRS（业务规则服务器）作为价格比较引擎来实现这一点吗？如果是，我们应该将所有响应合并到一条消息中并传递给 BRS，还是必须单独发送消息。

3- 我们是否需要 WSO2 BPS（或任何 BPEL 引擎）来实现此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:42:27.200

最快和（对我来说）最简单的将是我在 Esb 中完成它。如果您有很多复杂的业务逻辑/规则，将 BRS 纳入图片是有道理的。另一方面，如果您有可能需要很长时间才能完成的工作流等，则它是 BPS 的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T11:41:57.313

You can use WSO2 ESB to compare the two results. ESB contains with several [mediators](https://docs.wso2.org/display/ESB480/Mediators) that can help you. With ESB, you can get the inflow and filter values using filter mediator.

```
<filter source="//Product/Price" regex=".*/Price.*">
      <then>
          <send/>
      </then>
      <else>
          <drop/>
      </else>
</filter> 
```

Once you filtered two inflow's Pricing values, name them using property mediator. Then you can filter again two values to find the smallest value of the two.

# ms-access - 如何判断 ACCDB 文件的版本？

> ID：12303787
> 
> 赞同：5
> 
> 时间：2012-09-06T15:48:06.317
> 
> 标签：ms-access

我有 Access 2010。但是每次我创建并打开一个新数据库时，标题栏都会显示 2007。当在其他人的 Access 2010 中打开相同的 accdb 文件时，它会显示`(Access 2007-2010)`. 为什么会这样？

如何判断我的数据库是 2007 还是 2010？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:57:09.347

你可能会发现

```
CurrentProject.FileFormat 
```

西装

```
9 = Microsoft Access 2000
10 = Microsoft Access 2003
12 = Microsoft Access 2010 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:33:16.557

问题是 Access 的一个到另一个版本通常使用相同的文件版本。因此，例如 Access 2002 和 2003 共享相同的版本。（没有 2002 版，也没有 2003 版，而是 2002/2003 版）。

这同样适用于 Access 2007 和 2010。如果您将 SP 更新安装到 office 2010，则 Access 2010 将因此显示 2007-2010，正如您在另一台计算机上记下的那样。因此，当您将 sp 更新安装到 office 时，这是一个 UI 问题。

请记住，就像 Access 2002 和 2003 共享相同的文件版本一样，Access 中的功能集在两个版本之间是不同的。虽然在 2002/2003 中这通常不是什么大问题，但在 Access 2010 中，存在显着的功能差异，因此将 2007/2010 格式与 2010 一起使用意味着您可以非常轻松地更改 accDB 文件，这将导致文件不能与 2007 一起使用。如果您正在处理的数据库需要由以前的版本使用，您可能希望使用 2002/2003 格式以防止意外插入任何 2010 功能，从而防止 accDB文件被 Access 2007 使用。

因此，在您将 SP 更新安装到 office 之前，Access 2010 仅显示 2007 格式，而实际上它应该显示 2007-2010 格式，因为它们是文件的相同格式版本。

# c++ - 不同项目中的visual studio 2010 express链接文件

> ID：12303789
> 
> 赞同：0
> 
> 时间：2012-09-06T15:48:16.077
> 
> 标签：c++, visual-studio-2010, static-linking, dynamic-linking

在 Visual Studio 2010 速成版中。我有一个名为 prj1 的项目（一个静态库）。prj1 具有创建对象 obj1 的代码。

在另一个项目 prj2 中，它是一个动态库，我有代码通过“new obj1”来实例化对象（obj1 的代码在 prj1 中）。

现在，当我尝试构建 prj2 时，出现链接错误：

1> 当我尝试右键单击 prj2->properties->frameworkk 和引用时，如果我将 prj1 添加为新引用，则会出现很多链接错误，例如 MSVCRTD.lib(MSVCR100D.dll)：错误 LNK2005：

2>如果我不做上面的步骤1，右键单击解决方案->属性->项目依赖项，然后选择prj1依赖prj2。然后我得到一个链接错误，它抱怨：错误LNK2019：未解析的外部符号obj1 ...未解析的外部。

如果有人可以帮助我解决这个问题，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:52:19.103

似乎您选择运行时库的选项不同。例如，一个项目链接到“多线程调试 DLL”，另一个项目链接到“多线程调试”。当您尝试将项目相互链接时，您将获得多重定义的运行时库符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:50:34.477

您的静态库也必须找到/添加到您的库目录和依赖项列表中。

# php - PHP从数据库输出到HTML

> ID：12303791
> 
> 赞同：0
> 
> 时间：2012-09-06T15:48:22.163
> 
> 标签：php, html, database, post, methods

我无法将行值的值输出到 html 内容有关如何执行此操作的任何建议？我尝试使用不同的方法，以便我将在页面上打印，但它总是空白有什么办法吗？

```
<?php 

//connect
$dbh=mysql_connect ("localhost", "xxxx_admin", "xxxx") 
   or die ('I cannot connect to the database.');
 mysql_select_db ("xxxx_Client"); 

$term = $_POST['term'];
echo $term;

$sql = mysql_query("select * from ClientTable where FName like '$term'");

if ($row['FName'] == $term){

$ID = $row['ID'];
$FName = $row['FName'];
$LName = $row['LName'];
$PHON = $row['PHON'];

}

else
echo "invalid input";

?>

<html>
<head>
<title></title>
</head>
<body>
asdadasdad<br>

<?php echo $FName; ?><br>a<br>
<?php echo $_POST["$LName"]; ?><br>a<br>

$FName <br>
$LName <br>
$ID <br>
$PHON <br>

sadasdasda
</bod>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:50:37.377

首先，您可能没有从查询中得到任何结果。通常，当`LIKE` 您在查询中使用某种形式的通配符时，如下所示：

```
select * from ClientTable where FName like '%$term%' 
```

其次，您实际上并没有使用结果集。

您需要使用某种`mysql_fetch_array`或类似的方法将值放入 $row。

当然，你真的不应该使用 mysql_* 函数，因为它们已被弃用，取而代之的是 mysqli_* 或 PDO。

最后，您需要学习如何防止 SQL 注入。您的代码现在很容易受到攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:54:23.910

尝试`error_reporting(E_ALL);`在代码开头附近添加。通知消息很有可能会告诉您您做错了什么。

# python - scipy.optimze curve_fit 返回错误值

> ID：12303794
> 
> 赞同：1
> 
> 时间：2012-09-06T15:48:36.037
> 
> 标签：python, scipy, curve-fitting

我试图用 scipy 拟合一个特定的函数，结果很奇怪。我决定测试一些我知道答案的东西，所以我创建了这个：

```
from scipy.optimize import curve_fit as cf
import numpy as np
import random

def func(x,a):
    return a+X

X =[]
for i in range (10):
    V = random.random()
    X.append(i+3 + V/10)

print cf(func, np.array(range(10)),np.array(X)) 
```

我希望得到大约 3 的东西，但是，这里的输出：

```
(array([ -2.18158824e-12]), inf) 
```

作为旁注，我试图查看我发送的东西`func`，我得到了这个：

```
print func(np.array(range(10)),3)

Traceback (most recent call last):
  File "/tmp/py1759O-P", line 16, in <module>
    print func(np.array(range(10)),3)
  File "/tmp/py1759O-P", line 6, in func
    return a+X
TypeError: unsupported operand type(s) for +: 'int' and 'list 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:59:03.803

当它们具有如此不同的含义时，不要使用`x`and`X`作为变量名（或者你可能不知道 Python 区分大小写？）：

```
def func(x,a):
    return a+X

X =[] 
```

`x`是一个 numpy 数组，`X`是一个列表，`a`是一个标量参数值。

`a+X`导致错误，因为您无法将标量添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:02:32.787

在 func 中，参数是`x`, 但`X`在函数体中使用。

这是您的代码的修改版本。它使用了 numpy 的更多功能（例如 np.random.random() 而不是 random.random()）。

```
from scipy.optimize import curve_fit as cf
import numpy as np

def func(x, a):
    return a + x

n = 10
xdata = np.arange(n)
ydata = func(xdata, 3) + np.random.random(n) / 10

print cf(func, xdata, ydata) 
```

输出是

```
(array([ 3.04734293]), array([[  8.19208558e-05]])) 
```

# sql - 如何在没有游标的情况下将值分布在多行中？

> ID：12303795
> 
> 赞同：5
> 
> 时间：2012-09-06T15:48:35.653
> 
> 标签：sql, tsql, sql-server-2005

有没有一种简单的方法可以将值分布在多行中？

例如，我的表包含

```
类型 已开票 已付 电流
收费 100 0 100
收费 100 0 100
收费 100 0 100
付款 0 250 0
付款 0 25 0

```

数据是以这种方式导入的，但我需要根据也导入的支付交易来填充`Current`和列。`Paid`

是否有一种简单的方法可以编写查询来确定`Current`每条记录的列的余额？

例如，250 将 100 应用于前两条记录，50 应用于接下来的两条，而 25 将应用于最后一条，因此更新`Current`表中余额后的最终结果应该是：

```
类型 已开票 已付 电流
收费 100 100 0
收费 100 100 0
收费 100 75 25
付款 0 250 0
付款 0 25 0

```

理想情况下，我希望使用单个查询来执行此操作，而不是使用游标单独处理每个项目。我一直在尝试通过使用[Row_Number()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数并加入两个子查询来做到这一点，但我知道我在这里遗漏了一些东西

这是我的第一次尝试，结果得到了当前余额的总和

```
;with cte(invoiced, paid, current)
as (
    select invoiced, paid, current
        , row_number() over (order by datecreated)
    from mytable
)

select t1.invoiced, t1.paid, sum(t2.invoiced - t2.paid) as [current]
from cte as t1
join cte as t2 on t1.number = t2.number and t2.rownum <= t1.rownum
group by t1.uid, t1.number, t1.rownum
order by t1.rownum 
```

结果：

```
已开票的当前
100 0 100
100 0 200
100 0 300
0 250 50
0 25 25

```

我确信有办法做到这一点，但现在我的大脑似乎在罢工并且拒绝提出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:29:47.357

我想我找到了解决方案

首先，我不需要将付费交易链接到发票交易，所以我只需要所有付款的总和

```
select accountid, sum(paid)
from mytable
where type = 'Payment'
group by accountid 
```

然后我需要将此值应用于每条记录，直到运行总额大于支付总额。

为此，我修改了我的运行总查询，因此它只对费用求和，而不是对费用和付款进行求和

```
;with cte(id, accountid, invoiced, paid, current)
as (
    select id, accountid, invoiced, paid, current
        , row_number() over (order by datecreated)
    from mytable
    where type = 'Charge'
)

select t1.id, t1.accountid, t1.invoiced, sum(t2.invoiced) as [runningTotalOfCharges]
from cte as t1
join cte as t2 on t1.number = t2.number and t2.rownum <= t1.rownum
group by t1.id, t1.accountid, t1.invoiced 
```

并将其加入到支付查询中，所以现在我有一堆行，其中包含总支付金额、直到该记录的总费用以及当前记录的费用金额。

从那里，我只需要一份`CASE`声明来确定费用是全额支付、部分支付还是根本没有支付，并使用一些数学来计算`Paid`和`Current`记录

```
select charged.Id, charged.AccountId, charged.Invoiced
    -- Use Case statements to determine if this payment is fully paid, partially paid, 
    -- or not paid at all, then determine Current and Paid based on that
    , case when totalpaid - runningtotal >= 0 then invoiced 
        when invoiced > abs(totalpaid - runningtotal) then invoiced + totalpaid - runningtotal
        else 0 end as [Paid]
    , case when totalpaid - runningtotal >= 0 then 0 
        when invoiced > abs(totalpaid - runningtotal) then abs(totalpaid - runningtotal)
        else invoiced end as [Current]
from 
(
    -- Running total query from above
    select t1.id, t1.accountid, t1.invoiced, sum(t2.invoiced) as [runningtotal]
    from cte as t1
    join cte as t2 on t1.number = t2.number and t2.rownum <= t1.rownum
    group by t1.id, t1.accountid, t1.invoiced
) as charged

inner join (
    -- Total Paid query from above
    select accountid, sum(paid) as totalpaid
    from mytable
    where type = 'Payment'
    group by accountid
) as paid on charged.number = paid.number 
```

最终的结果就是我想要的。只需要将其通过`Id`列连接到实际数据表，并更新`Paid`和`Current`值:)

```
Id AccountId Invoiced 已付 当前
1 1 100 100 0
2 1 100 100 0
3 1 100 75 25

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:02:07.677

您可以计算已付费列和当前列的运行总计和总和，然后执行一些数学运算以获取当前列值。我试了一下，但在计算最终值时陷入了困境。这不是一个简单的方法，但它是一种方法。

```
DECLARE @myTable TABLE
(
    [TranId] INT,
    [Type] VARCHAR(10),
    [Invoiced] INT,
    [Paid] INT,
    [Current] INT,
    [SumPaid] INT,
    [SumCurrent] INT,
    [RunningPaid] INT,
    [RunningCurrent] INT
)

INSERT INTO @myTable SELECT 1, 'Charge', 100, 0, 100, null, null, null, null
INSERT INTO @myTable SELECT 2, 'Charge', 100, 0, 100, null, null, null, null
INSERT INTO @myTable SELECT 3, 'Charge', 100, 0, 100, null, null, null, null
INSERT INTO @myTable SELECT 4, 'Paid', 0, 250, 0, null, null, null, null
INSERT INTO @myTable SELECT 5, 'Paid', 0, 25, 0, null, null, null, null

UPDATE @myTable SET SumPaid = (SELECT SUM([Paid]) FROM @myTable)
UPDATE @myTable SET SumCurrent = (SELECT SUM([Current]) FROM @myTable)
UPDATE @myTable
SET 
    [RunningPaid] = full_running_total_set.[RunningPaid], 
    [RunningCurrent] = full_running_total_set.[RunningCurrent]
FROM @myTable
INNER JOIN
(
    SELECT
        TranId1,
        SUM([Paid]) AS [RunningPaid],
        SUM([Current]) AS [RunningCurrent]
    FROM
    (
        SELECT
            set2.[Paid],
            set2.[Current],
            set1.[TranId] AS [TranId1],
            set2.[TranId] AS [TranId2]
        FROM @myTable set1
        INNER JOIN @myTable set2
            ON set1.[TranId] >= set2.[TranId]
    )running_total_set
    GROUP BY [TranId1]
)full_running_total_set
ON [TranId] = full_running_total_set.[TranId1]

SELECT * FROM @myTable 
```

# python - 如何为其他类创建通用类也可以具有相同的模型

> ID：12303796
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:48:40.257
> 
> 标签：python, django, class

我是 Python 和 Django 平台的新手。我正在尝试设计一个通用类，以便其他类可以使用通用类来创建相同的模型类型。为了更好地解释，我举一个例子

假设我的普通班是

```
class Person(models.Model):
 name = models.CharField(max_length=20)
 lastname=models.CharField(max_length=20)
 job=models.CharField(max_length=20)
 salary=models.IntegerField() 
```

我想为我创建的每个人创建一个与 Person 类完全相同的表。

在我的脑海里是这样的......

```
Class Person1(models.Model) 
Person()
Class Person2(models.Model) 
Person() 
```

因此，每个 person 表都将具有与 Person 类相同的模型类型。你能帮我怎么做吗？或者有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:53:45.640

我不确定我是否了解您想要什么或为什么想要那样，但是，我认为您的问题的答案是使用[Abstract Base Class](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)。

例子：

```
class Person(models.Model):
   name = models.CharField(max_length=20)
   lastname = models.CharField(max_length=20)
   job = models.CharField(max_length=20)
   salary = models.IntegerField()

   class Meta:
       abstract = True

class Person1(Person):
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:27:26.993

我认为您缺少的是对 django 模型如何工作的基本了解。

django 中的模型是数据库*中表的表示。*在此表中，您可以存储多行。您编写的每个字段都是此表中的一列。

由于您有一个模型*Person* - django 将在数据库中创建一个表，其中包含您在*Person*类中定义的列。在此表中，您可以添加许多“人”项。

您不需要创建其他模型来存储您已经在*Person*模型中描述*的相同内容。*

 *继承是 django 模型中的一个高级概念，只会在以后导致问题。我建议您逐步[阅读 django 教程，因为它解释了如何使用 django 对象关系模型 (ORM) - 模型。](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

最终，你会意识到要存储多个“人”，你只需要这样做：

```
personA = Person()
personA.name = 'John'
personA.lastname = 'Smith'
personA.job = 'Chef'
personA.salary = 130
personA.save()

personB = Person(name='Homer',lastname='Simpson',job='Donut Eater',salary=100)
personB.save() 
```*

# c - 汇编器和字对齐

> ID：12303800
> 
> 赞同：2
> 
> 时间：2012-09-06T15:48:58.623
> 
> 标签：c, assembly

今天我了解到，如果你声明一个 char 变量（即 1 个字节），汇编器实际上在内存中使用 4 个字节，因此边界位于字长的倍数上。

如果一个 char 变量无论如何都使用 4 个字节，那么将其声明为 char 有什么意义？为什么不将其声明为 int？他们不使用相同数量的内存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:24:57.943

当您用汇编语言编写并为一个字符声明空间时，汇编器为一个字符分配空间，仅此而已。（我写的是关于通用汇编器的。）如果你想在汇编语言中对齐对象，你必须为此目的包含汇编器指令。

当您使用 C 语言编写代码时，编译器会将其转换为汇编代码和/或机器代码，可能会填充字符空间。通常这样做不是因为字符对象的对齐优势，而是因为您在程序中声明了几件事。例如，考虑当您声明时会发生什么：

```
char a;
char b;
int i;
char c;
double d; 
```

一个天真的编译器可能会这样做：

*   在相关内存的开头分配一个字节，`a`该内存恰好与 16 个字节的倍数对齐。
*   为 分配下一个字节`b`。
*   然后它想放置`int i`需要四个字节的地方。在这台机器上，`int`对象必须与四个字节的倍数对齐，否则试图访问它们的程序将会崩溃。所以编译器会跳过两个字节，然后为`i`.
*   为 分配下一个字节`c`。
*   跳过 7 个字节，然后为`d`. 这使得`d`对齐到八字节的倍数，这对这个假设的机器是有益的。

因此，即使使用简单的编译器，字符对象本身也不需要四个完整字节。它可以与相邻字符对象或其他不需要更大对齐的对象共享。但是会有一些空间浪费。

更聪明的编译器会这样做：

*   根据对齐要求对必须为其分配空间的对象进行排序。
*   首先放置最严格的对象：为 . 留出 8 个字节`d`。
*   放置下一个最严格的对象：为 . 留出四个字节`i`。请注意，`i`它与四个字节的倍数对齐，因为它跟在`d`之后，它是一个与八个字节的倍数对齐的八字节对象。
*   `a`放置限制最少的对象：为、`b`和分别留出一个字节`c`。

这种重新排序避免了浪费空间，任何体面的编译器都会将它用于可以自由排列的内存（例如堆栈上的自动对象或全局内存中的静态对象）。

当您在结构中声明成员时，编译器需要使用您声明成员的顺序，因此它无法执行此重新排序以节省空间。在这种情况下，声明字符对象和其他对象的混合可能会浪费空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:51:14.107

问：程序是否为您声明的每个“char”分配四个字节？

答：不 - 绝对不是 ;)

问：是否有可能，如果您分配一个字节，程序可能会“填充”额外的字节？

答：是的——绝对是的。

问题是“对齐”。一些计算机体系结构*必须*访问相对于特定偏移量的数据值：16 位、32 位等。如果它们总是访问相对于偏移量的字节，则其他体系结构的*性能会更好。*因此“填充”：

*   [http://en.wikipedia.org/wiki/Byte_padding#Data_structure_padding](http://en.wikipedia.org/wiki/Byte_padding#Data_structure_padding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:13:42.357

其他人大部分都回答了这个问题。假设一个 char 是一个单字节，声明一个 char 是否意味着它总是填充到对齐？不，有些编译器在默认情况下会做一些不做的事情，而且很多你可以在某处使用某种命令来更改默认值。这是否意味着您不应该使用字符？这取决于，首先填充并不总是发生，所以少数浪费的字节并不总是发生。您正在使用编译器使用高级语言进行编程，所以如果您认为整个二进制文件中只有 3 个浪费的字节......再想一想。根据使用 chars 的体系结构可以节省一些，例如在某些体系结构上加载立即数可以节省三个字节或更多。其他架构只是为了对寄存器进行简单操作，需要额外指令来对较大的寄存器进行签名扩展或剪辑，以使其表现得像一个字节大小的寄存器。如果您使用的是 32 位计算机并且使用 8 位字符，因为您只从 1 数到 100，您可能想要使用全尺寸的 int，从长远来看，您可能不会通过使用字符。现在，如果这是一台运行 DOS 的基于 8086 的 PC，那就另当别论了。或者一个 8 位微控制器，那么你想尽可能地倾向于 8 位变量。现在，如果这是一台运行 DOS 的基于 8086 的 PC，那就另当别论了。或者一个 8 位微控制器，那么你想尽可能地倾向于 8 位变量。现在，如果这是一台运行 DOS 的基于 8086 的 PC，那就另当别论了。或者一个 8 位微控制器，那么你想尽可能地倾向于 8 位变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:51:04.423

声明单个`char`变量可能确实没有任何意义。

然而，可能有很多充分的理由需要`char`-array ，而*-array*`int`真的不能解决问题！

（尝试用整数填充数据结构......）

# c++ - C++ 我的第一个链表我做错了什么？

> ID：12303802
> 
> 赞同：0
> 
> 时间：2012-09-06T15:49:04.407
> 
> 标签：c++, linked-list

嘿伙计们，我正在处理我的第一个链接列表以保存学生记录（名称 id gpa addr），但我遇到了错误，我想知道你们是否能发现错误？

```
#include <iostream>
#include <string>

using namespace std;

int main()
{

struct Student
{
    string name;
    string address;
    double id;
    double gpa;
    Student *next;

};

Student *head;
head = NULL;

string Student_name;
double Student_id;
double Student_gpa;
string Student_address;

for (int i = 0; i<20; i++)
{
    cout << "What is the student's name?";
    getline (cin, Student_name);
    cout << "What is " << Student_name << "'s ID Number?";
    cin >> Student_id;
    cout << "What is " << Student_name << "'s GPA?";
    cin >> Student_gpa;
    cout << "What is " << Student_name << "'s address?";
    getline (cin, Student_address);
}
    Student *newStudent;
    Student *Student_ptr;
    newStudent = new Student;
    newStudent->name = Student_name;
    newStudent->id = Student_id;
    newStudent->gpa = Student_gpa;
    newStudent->address = Student_address;
    newStudent->next = NULL;

    if (!head)
        head = newStudent;
    else
    {
        Student_ptr = head;

        while (Student_ptr -> next)
            Student_ptr = Student_ptr->next;
            Student_ptr->next = newStudent;
    }

    cout << endl;

Student *Display_ptr;
Display_ptr = head;
while (Display_ptr)
{
    cout << Display_ptr-> name << endl;
    cout << Display_ptr-> id << endl;
    cout << Display_ptr-> gpa << endl;
    cout << Display_ptr-> address << endl;

    Display_ptr = Display_ptr->next;
    cout << endl;

}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:55:30.123

好吧，最好将实际的链表设为自己的类，您甚至可以将结构设为自己的类，以便将来重用这些类。Node 可以是一个模板类，但实际的链表类可以保持不变；它只有一个“LinkedListNode”类型的数据成员，它会根据您需要的数据而改变。

按照现在的设置方式，您必须重新编写大部分内容。只是为了实现第二个链表并稍作更改。使链表成为类也意味着您可以编写实际的插入/删除/搜索等。函数，而不是在 main.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:42:27.623

好吧，我不知道如何使用模板，除非您的意思是使用标准列表而不是自己制作。在main 函数的主体中包含**struct Student**对我来说似乎并不好。这是重写代码的一部分，这将是一件好事。并制作类似的东西

```
using namespace std;
namespace MyDataStructs{

class MyLinkedListNode
{
public:
  MyLinkedListNode():
    name("Empty"),
    address("Empty"),
    studentID(0.0),
    gpa(0.0),
    next(NULL)
  {
  }
  ~MyLinkedListNode();

  void setName(const string& a_name){name = a_name;}
  void setAddress(const string& a_address){address = a_address;}
  void setID(const int& a_Id){studentID = a_Id;}
  void setGPA(const double& a_GPA){gpa = a_GPA;}
  void setNextNode(MyLinkedListNode* a_node){next = a_node;}

  string getName(){return name;}
  string getAddress(){return address;}
  int getId(){return studentID;}
  double getGPA(){return gpa;}
  MyLinkedListNode* getNextNode(){return next;}

private:
  string name;
  string address;
  int studentID;
  double gpa;
  MyLinkedListNode *next;
};

class MyLinkedList
{
  MyLinkedList():
    m_size(0)
  {
  }
  ~MyLinkedList()
  {
    clear();
  }

  void push_back(const MyLinkedListNode& a_node)
  {
    MyLinkedListNode* newNode = new MyLinkedListNode(a_node);
    if(m_end == NULL)
    {
      m_head = newNode;
      m_end = newNode;
    }
    else
    {
      m_end->setNextNode(newNode);
      m_end = newNode;
    }
    m_size++;
  }

  bool deleteNode(const int& a_index)
  {
    if(a_index >= m_size)
      return false;
    if(m_head == NULL)
      return false;

    m_size--;
    MyLinkedListNode* currentNode;

    if(a_index == 0)
    {
      currentNode = m_head->getNextNode();
      delete m_head;
      m_head = currentNode;
      return true;
    }
    curentNode = m_head;
    MyLinkedListNode* previousNode;
    for(int i = 0; i < a_index; i++)
    {
      previousNode = currentNode;
      currentNode = currentNode->getNextNode();
    }
    if(currentNode == m_end)
    {
      m_end = previousNode;
    }
    previousNode->setNextNode(currentNode->getNextNode());
    delete currentNode;
    return true;
  }

  void clear()
  {
    MyLinkedListNode* currentNode = m_head;
    MyLinkedListNode* nextNode;
    while(currentNode != NULL)
    {
      nextNode = currentNode->getNextNode();
      delete currentNode;
      currentNode = nextNode;
    }
  }

private:
  MyLinkedListNode* m_head;
  MyLinkedListNode* m_end;
  int m_size;

};

}//MyDataStructs 
```

我不知道，我很无聊，你们怎么看……虽然重温一些基本的数据结构很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:56:30.337

结构定义不应进入 main() 内部。从技术上讲，因为这是 C++，所以你真的应该使用类而不是结构。

更重要的是，您的循环需要在每次迭代时分配新的数据结构。也就是说，每次用户输入学生信息时，都应该进入一个新的链表元素，然后添加到现有列表中。

# hash - Oh-my-zsh 哈希（磅）符号错误模式或未找到匹配项

> ID：12303805
> 
> 赞同：5
> 
> 时间：2012-09-06T15:49:20.943
> 
> 标签：hash, key, zsh

我很确定是在处理我的 Oh-my-zsh 配置，但我不知道它是什么。

当我在我的 git 命令中使用“#”符号时（但在其他所有内容上，例如“ls #2”）我得到“错误模式”错误或“未找到匹配项”

我想是关于计算一些东西，但我找不到在哪里配置它。

IE

```
➜  demo git:(adlist) git push origin adlist#3 
zsh: no matches found: adlist#3 
```

或者

```
➜  demo git:(adlist) git push origin #3-adlist
zsh: bad pattern: #3-adlist 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T01:20:54.020

使用单引号：

```
git push origin 'adlist#3'
git push origin #3-adlist 
```

在 zsh`#`中用于模式删除。请参阅：http: [//zsh.sourceforge.net/Guide/zshguide05.html](http://zsh.sourceforge.net/Guide/zshguide05.html)标题下的*标准形式：模式去除*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-08-06T17:05:32.863

你可以`unsetopt EXTENDED_GLOB`，这应该不再`#`被解释为模式的一部分。

如果你真的想保留 的大部分特性`EXTENDED_GLOB`，但又想禁用`#`用于模式，那么你可以`disable -p '#'`（你必须单引号`#`参数，这样它就不会像模式一样被扩展）。这当然适用于我的 zsh 安装版本 5.7.1，即使它没有记录在[zshbuiltins(1)](https://linux.die.net/man/1/zshbuiltins)中。

# objective-c - 确定本地化语言

> ID：12303807
> 
> 赞同：0
> 
> 时间：2012-09-06T15:49:35.803
> 
> 标签：objective-c, cocoa-touch, localization

> **可能重复：**
> [在 iOS 中获取当前设备语言？](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)

我有一个应用程序，它使用带有两个视图的标签栏控制器。在第一个选项卡中，我获取了所有文本字段并将它们本地化。在第二个选项卡中，我想放置一个翻译后的 HTML 文件，以获取有关使用我的应用程序的帮助/说明。我的应用支持的六种语言中的每一种都有一个文件。

如何判断 iOS 根据位置选择了哪种语言，以便将正确的文件加载到 Web 视图中？

我搜索了 Google 和 SO，并没有发现任何特定于这个问题的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:53:26.247

采用

```
NSString *sysLangCode = [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

# jquery - 复选框的用户可编辑标签

> ID：12303812
> 
> 赞同：2
> 
> 时间：2012-09-06T15:49:55.123
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在尝试创建一个摄像机列表，允许用户在需要时输入自定义名称。理想情况下，当他们选择复选框或周围的文本时，他们将能够更改文本。名称稍后需要存储在数据库中。

我尝试使用“易于编辑的文本”，但我无法弄清楚。这就是我所拥有的。任何帮助，将不胜感激。谢谢你。

```
<!DOCTYPE html> 
<html> 
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1"> 
        <title>FMVSS - Camera Selection</title> 
        <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />  
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
    </head> 

    <body> 
        <div data-role="page">
            <h1>Camera Selection</h1>
            <div data-role="content">
                <form action="#" method="get">
                    <h3>Camera request for: (Customer Name, passed or queryied)</h3>
                    <h3>Test Type: (Passed or queryied)</h3>
                    <div  data-role="fieldcontain">
                        <div><legend>Do a look-up to see what the default views are for the selected TEST TYPE</legend></div>
                        <div><legend>Allow custom entries</legend></div>

                        <fieldset data-role="Selections">
                            <div class="Fixed_Camera_Check_Box">                    
                                <input type="checkbox" name="CameraView-1" id="CameraView-1" />
                                <label for="CameraView-1">Oblique View From Front (Left Hand Side)</label>
                            </div>
                            <div class="Fixed_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-2" id="CameraView-2" />
                                <label for="CameraView-2">Oblique View From Front (Right Hand Side)</label>
                            </div>
                            <div class="Fixed_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-3" id="CameraView-3" />
                                <label for="CameraView-3">Oblique View From Rear (Right Hand Side)</label>
                            </div>
                            <div class="Custom_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-7" id="CameraView-7" />
                                <label class="custom" for="CameraView-7">Custom Camera View #1 ***Value should be editable by user***</label>
                            </div>
                            <div class="Custom_Camera_Check_Box">
                                <input type="checkbox" name="CameraView-8" id="CameraView-8" />
                                <label class="custom" for="CameraView-8">Custom Camera View #2</label>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div><!-- /content -->
        </div><!-- /page -->
    </body>
</html>
<script>
    $(document).ready(function(){

        $('.custom').click(function(){ //this runs when you click on the 
            $(this).html('New Label Here'); //I can edit the label here, so I know I am in the right place
            //$(this).hide(); //Should hide the label making room for the input
            $(this).append('<input class="custom_edit" type="text" value="Custom Camera View"/>'); //Puts an input field in the form
        });

        $('.custom_edit').blur(function() { //this runs after you click out of textbox 
             if ($.trim(this.value) == '')  //If there is nothing in the textbox do this
                 {}  //put previous value back
             else //If there is something in the textbox do this
                 {$(this).prev().html(this.value);} //Put new value into label
             $(this).hide(); //Hides text box
             $(this).prev().show(); //Shows the label
         });

          $('.custom_edit"]').keypress(function(event) { //runs on every keystroke while in a textbox, looking for enter
              if (event.keyCode == '13') 
                { //"ENTER" was pressed alert('1');
                    if ($.trim(this.value) == '')  //If there is nothing in the textbox do this
                         {}  //put previous value back and unselect checkbox
                    else//If there is something in the textbox do this
                        {$(this).prev().html(this.value);} //Put new value into label 
                    $(this).hide(); //Hides the edit box
                    $(this).prev().show(); //Shows the label
                }
          });

        $('input[type=checkbox]').on('click',function(e) {
            if( $('input[type=checkbox]:checked').length == 3 ) 
                {$('input[type=checkbox]:not(:checked)').attr('disabled','disabled');}
            else
                {$('input[type=checkbox]:not(:checked)').removeAttr('disabled');}
        });//endo of checkbox click functions

    });//end of document ready
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:52:57.283

试一试。

单击相机标签进行编辑。

```
<!DOCTYPE html> 
<html> 
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1"> 
        <title>FMVSS - Camera Selection</title> 
        <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />  
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
    </head> 

    <body> 
        <div data-role="page">
            <h1>Camera Selection</h1>
            <div data-role="content">
                <form action="#" method="get">
                    <h3>Camera request for: (Customer Name, passed or queryied)</h3>
                    <h3>Test Type: (Passed or queryied)</h3>
                    <div  data-role="fieldcontain">

                        <fieldset data-role="Selections">

                        <legend>Allow custom entries - click on the label to edit</legend>

                            <div class="Fixed_Camera_Check_Box">                    
                                <input type="checkbox" name="CameraView-1" id="CameraView-1" />
                                <label for="CameraView-1">Oblique View From Front (Left Hand Side)</label>
                            </div>
                            <div class="Fixed_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-2" id="CameraView-2" />
                                <label for="CameraView-2">Oblique View From Front (Right Hand Side)</label>
                            </div>
                            <div class="Fixed_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-3" id="CameraView-3" />
                                <label for="CameraView-3">Oblique View From Rear (Right Hand Side)</label>
                            </div>
                            <div class="Custom_Camera_Check_Box"> 
                                <input type="checkbox" name="CameraView-7" id="CameraView-7" />
                                <label class="custom" for="CameraView-7">Custom Camera View #1 ***Value should be editable by user***</label>
                            </div>
                            <div class="Custom_Camera_Check_Box">
                                <input type="checkbox" name="CameraView-8" id="CameraView-8" />
                                <label class="custom" for="CameraView-8">Custom Camera View #2</label>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div><!-- /content -->
        </div><!-- /page -->

        <script>
            $(document).ready(function () {

                var editCameraLabel = function (label) {

                    label.hide();
                    var labelText = label.text();

                    label.after("<input type='text' value='" + labelText + "' /><input type='button' value='Save' />");

                    var input = label.next();
                    input.focus();

                    var saveButton = input.next();

                    saveButton.click(function () {

                        labelText = input.val();
                        label.text(labelText);
                        input.remove();
                        $(this).remove();
                        label.show();
                    });
                };

                $('label').click(function () {

                    editCameraLabel($(this));

                });

            });//end of document ready
</script>

    </body>
</html> 
```

# iis - 更改 IIS Admin 服务的登录（用户） - 错误 1068 依赖服务或组无法启动

> ID：12303814
> 
> 赞同：2
> 
> 时间：2012-09-06T15:50:09.227
> 
> 标签：iis, admin

我的任务是更改 IIS Admin、WWW 发布服务和 IIS6 (Windows 2003) 的 HTTP SSL windows 服务的用户。它与本地系统帐户完美配合（默认情况下，使用这个新的 Windows 2003 实例进行选择） - 但我必须更改用户 - 不幸的是，这对我来说不可协商，因为这是我老板给我的必须做的指示。

我试图将其设置为例如 UserABC 的用户在服务器上，并且是其他执行没有问题的服务的登录。

因此，首先我尝试为 HTTP SSL 设置登录但收到错误：“错误 1079：为此服务指定的帐户与为在同一进程中运行的其他服务指定的帐户不同”。现在，当我查看依赖项时，我看到 WWW 发布服务依赖于 HTTP SSL。

所以我尝试为 WWW 发布服务设置登录，但出现错误：“无法在本地计算机上启动 WWW 发布服务”“错误 5：访问被拒绝”

现在我尝试为 IIS 管理员设置用户，但收到错误：“无法在本地计算机上启动 IIS 管理员服务：错误 1068：依赖服务或组无法启动”

请对我如何更改这些服务的用户登录有任何建议？IIS 的实例工作正常，它只是我需要设置的密码。是否有我必须为 UserABC 分配权限的文件夹？我还缺少什么？

网络上的其他论坛建议删除“MetaBase.bin”或运行 MS 修复： http: [//support.microsoft.com/kb/827328](http://support.microsoft.com/kb/827328)但这对我在这个新服务器上不起作用 - 但我不想解决这个问题。

谢谢

# c - 开关和外壳出错？

> ID：12303815
> 
> 赞同：1
> 
> 时间：2012-09-06T15:50:11.363
> 
> 标签：c

我对以下 C 代码感到困惑：

```
int main()
{
 const int i=2;

 switch(2)
 {
   case 1:
     printf("this is case 1");
     break;
   case i:
     printf("it should be case 2");
 } 
```

我知道在关键字之后`case`，应该有一个常量表达式。

如已声明`i`为常量，为什么此代码会出现编译错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T15:51:39.827

因为在 C 中 a`const`不是真正的编译时常量。它只是一个只读对象。关于这个主题有一个[C 常见问题解答。](http://c-faq.com/ansi/constasconst.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:51:56.373

常量变量仍然不是常量表达式。constexprs（通常称为）必须仅包含文字和编译时常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T15:57:31.650

原因：

1.`const`不能在switch语句中使用。你可以用一个`#define/enum`。请参阅[此链接](https://stackoverflow.com/questions/1674032/static-const-vs-define-in-c)。

2.第二种情况没有`break`。

3.没有`default`案例。

4.后面应该有一个冒号`case`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:52:25.427

这是因为您在代码中使用了变量。您不能在 case 语句中使用变量。这里 a 被假定为变量

> 编译器被明确允许使用高效的二叉树或跳转表来评估 case 语句。
> 
> 因此，case 语句是编译时常量。

C99 标准说明了这一点（C89 标准非常相似）：

> §6.8.4.2 switch 语句
> 
> 约束
> 
> ¶1 switch 语句的控制表达式应为整数类型。
> 
> [...]
> 
> ¶3 每个 case 标签的表达式应为整数常量表达式，同一 switch 语句中的任何两个 case 常量表达式在转换后不得具有相同的值。switch 语句中最多可以有一个默认标签。

# jquery - 使用客户端测试 (qunit) 测试什么

> ID：12303816
> 
> 赞同：2
> 
> 时间：2012-09-06T15:50:12.783
> 
> 标签：jquery, asp.net-mvc-3, unit-testing, qunit

我正在考虑开始一些客户端测试，但我似乎想不出如何正确使用 qunit。所有文档示例都有单元测试，例如 `ok( 1 == "1", "Passed!" );`

我们是在我们的项目中引用 HTML 还是重新编写模仿它的 HTML 部分？

是重新引用真正的 Javascript 函数还是我们重写类似的函数？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:30:29.553

我通常用它来测试为项​​目编写的任何客户端 JavaScript。一些 JavaScript 可能有公共方法，可以很容易地直接测试。这应该很容易作为一个单元获得。

通常，许多使用 jQuery 的 JavaScript 都是事件驱动的。例如，假设您有一些 JavaScript，当用户单击 ID 为“send-ajax”的链接时，它会向服务器发送 AJAX 调用。

我通常会编写一个模拟 $.ajax 的测试，然后创建一个 ID 为“send-ajax”的链接，然后模拟用户点击，然后测试模拟的 $.ajax 方法是否被调用。

# boost - 使用 Boost 序列化库在 OMNeT++ 中链接错误

> ID：12303827
> 
> 赞同：1
> 
> 时间：2012-09-06T15:50:55.657
> 
> 标签：boost, omnet++

我对 OMNeT++ 很陌生，我想使用 boost 框架中包含的序列化库。但是，在尝试使用它时，我收到了很多错误，例如：

```
Description    Resource    Path    Location    Type
undefined reference to `boost::archive::archive_exception::~archive_exception()'
OmCCN line 36, external location: /home/alexander/UniBE/BT/simulator/boost-compiledLibs
/include/boost/serialization/throw_exception.hpp    C/C++ Problem 
```

. 我想问题是我还没有在 OMNeT 中链接已编译的库。我查看了makefile，但任何更改都毫无价值，因为它是由makemake自动生成的。此外，尝试访问项目 > 属性 > OMNeT++ IDE 中的菜单项“makemake”会引发错误（当前显示的页面包含无效值）。

谁能给我一个关于错误可能导致什么或如何正确链接编译库的提示？

任何提示都**非常**感谢！

干杯亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:25:43.520

首先，您应该获取库文件。

例如，在 Ubuntu 中，您应该安装这两个软件包：libboost1.46-dev 和 libboost-serialization1.46-dev。头文件将安装在 usr/include/boost 中，库文件将安装在 usr/lib 中。

要将序列化库链接到您的程序：

右键单击您的项目，然后单击属性。然后转到 OMNET++ > Makemake。

找到“链接”选项卡，然后在***“要链接的其他对象：（通配符，...”***部分，指定序列化库的路径（例如 /usr/lib/libboost_serialization-mt.a）。

# nhibernate - 如何配置 NHibernate 设施？

> ID：12303829
> 
> 赞同：3
> 
> 时间：2012-09-06T15:51:02.817
> 
> 标签：nhibernate, transactions, fluent-nhibernate, castle-windsor, castle

我对 NHibernate 有一些经验，我正在尝试开始使用 Castle Nhibernate 设施或 Castle NhibernateIntegration。我想知道，在哪里可以找到如何在服务层（业务、类库项目）中配置和执行事务控制（带属性）的演示项目？没有文档，而且我很难找到一些入门内容。

我在网上找到了一些示例，但只有代码片段而不是演示项目......我想下载一些东西来学习。我没有找到一个完整的解决方案，只是业务类（类库）中的配置和事务控制。

对不起，这里有这种线程，但我知道如何开始。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:41:14.737

如果您想查看 Castle Windsor 与 nHibernate 集成的完整示例，那么我会查看[Sharp Architecture](http://sharparchitecture.net/)

Sharp 是一个“最佳实践”模板项目的尝试，并利用了许多技术（包括 Castle 和 nHibernate）。虽然它所做的某些事情可能不符合您的口味，但它会清楚地向您展示一种可以将它们组合在一起的方式。

如果您想了解低级别发生的情况，您可能需要在 GitHub 上搜索源代码库，因为 Sharp 在模板项目中使用它自己的预编译基类（尽管它仍然是开源的，所以您可以如果你愿意，看看发生了什么）。

当我将我的架构整合在一起时，这对我来说是一个非常宝贵的帮助，我可以诚实地说 Castle 和 nHibernate 是要走的路，所以你走在正确的轨道上。

编辑评论1：也许我在这里有点困惑。根据城堡笔记

> 设施是集装箱延伸的主要方式。使用工具，您可以将容器与外部框架（如 WCF 或 NHibernate）集成，向容器添加新功能，如事件连接、事务支持……或组件（同步、可启动语义……）。

据我所知，Castle Nhibernate 设施和城堡 NhibernateIntegration 都是设施，必须基于容器。

如果你想在没有容器的情况下工作，那么你需要使用某种形式的 Singleton Factory 来管理 SessionFactory。这里有一个例子[。](http://www.martinwilley.com/net/code/nhibernate/sessionmanager.html)

就控制事务的属性而言，这就是夏普的做法（参见[此处](http://code.google.com/p/sharp-architecture/source/browse/trunk/src/SharpArch/SharpArch.Web/NHibernate/TransactionAttribute.cs?r=477)）。您可能会重用此代码并将 NHibernateSession 替换为您自己的 Singleton （如[他们的](http://code.google.com/p/sharp-architecture/source/browse/trunk/src/SharpArch/SharpArch.Data/NHibernate/NHibernateSession.cs?r=477)）。

您不需要实现 UnitOfWork，因为 nHibernate 有效地为您执行此操作。您真正需要的是一种架构，它允许您在单点控制（单例）上管理事务，并且在每个存储库中都可用。

# android - findViewById 是否提供唯一（静态）实例？

> ID：12303845
> 
> 赞同：0
> 
> 时间：2012-09-06T15:51:54.557
> 
> 标签：android, android-layout

从[findViewById 的文档中](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)：
`Look for a child view with the given id. If this view has the given id, return this view.`

但我不知道幕后是什么。
例如，如果我有一个`TextView`这样的布局 xml：

```
 <TextView
    android:id="@+id/txt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

然后我在代码中得到这个 TextView：

```
TextView txt1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     txt1 = (TextView)findViewById(R.id.txt);
     txt1.setText("Some text");
 } 
```

在另一个地方（可能在按钮 onClickListener 中），我再次得到这个 TextView：

```
((Button) findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

   TextView txt2 = (TextView) findViewById(R.id.txt);
   Log.d(TAG,"txt2: " + txt2.getText().toString());
   Log.d(TAG,"txt1: " + txt1.getText().toString());
   //Change txt2 text
   txt2.setText("aaa");
   Log.d(TAG,"txt2: " + txt2.getText().toString());
   Log.d(TAG,"txt1: " + txt1.getText().toString());
   //change txt1 text
   txt1.setText("bbb");
   Log.d(TAG,"txt2: " + txt2.getText().toString());
   Log.d(TAG,"txt1: " + txt1.getText().toString());
  }
}); 
```

结果如下：

```
txt2: Some text
txt1: Some text
txt2: aaa
txt1: aaa
txt2: bbb
txt1: bbb 
```

你能解释一下吗？findViewById 是否只提供静态实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:02:31.990

你可以很容易地发现你在调试器中得到了完全相同的对象（变量 -> 值列 -> Id）它不是一个静态对象，它只是一个对象，当你得到一个活动实例时，你会得到这个视图的一个实例，查看只有在重新创建活动时才会重新创建。

换句话说，在重新创建活动之前，您在调用时总是会得到相同的对象`findViewById`，因此更好的做法是一次性获取`onCreate()`并重用变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:03:20.667

`txt2`,`txt1`指向表示与id`same Id`相同的对象，因此这种行为必然会发生`TextView``txt`

# magento - Magento - 如何为所有商店设置路由器？

> ID：12303846
> 
> 赞同：1
> 
> 时间：2012-09-06T15:51:54.813
> 
> 标签：magento, module, frontend, router

我设置了一个扩展 Standard.php 路由器的路由器文件。如果我这样设置路由器，它可以工作，但是我希望能够设置“所有商店”。这可能吗？还是每次添加商店时都必须更改配置。这是我的 config.xml 的内容：

```
 <stores>
<mystore1>
    <web>
        <routers>                               
            <myextension>
                <area>frontend</area>
                <class>Mymodule_Myextension_Controller_Router</class>
            </myextension>
        </routers>
    </web>
</mystore1>
</stores>
<frontend>
<routers>
    <myextension>
        <use>myextension</use>
        <args>
            <module>Mymodule_Myextension</module>
            <frontName>myextension</frontName>
        </args>
    </myextension>
</routers>
<layout>
    <updates>
        <myextension>
            <file>myextension.xml</file>
        </myextension>
    </updates>
</layout>
</frontend> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:54:23.600

将商店更改为“管理员”，它将适用于所有商店。

```
<admin>
    <web>
        <routers>                               
            <myextension>
                <area>frontend</area>
                <class>Mymodule_Myextension_Controller_Router</class>
            </myextension>
        </routers>
    </web>
</admin> 
```

# c++ - id3lib 提取标签

> ID：12303848
> 
> 赞同：3
> 
> 时间：2012-09-06T15:51:57.200
> 
> 标签：c++, mp3, id3lib

我尝试使用 C++ 中的 ID3lib。我测试了近 50 个 mp3 文件，大多数情况下我得到的答案是文件没有任何标签。但实际上，它们在那里（我使用另一个软件检查它并正确显示它们）

实际上，我什么也没做，我只是链接库并从[官方文档中复制示例](http://id3lib.sourceforge.net/id3lib-manual.php)

```
 void next_try()
 {
  ID3_Tag tag;
  tag.Link("file.mp3");
  cout<<"success\n";
  cout<<tag.GetFileSize()<<"\n";

   ID3_Frame *frame;
    if ( frame = tag.Find ( ID3FID_TITLE ) )
      {
       char title[ 1024 ];
       frame->Field ( ID3FN_TEXT ).Get ( title, 1024 );
       cout << "Title: " << title << endl;
      }
    else
     cout<<"not found\n";
 } 
```

还有一个带有标签的文件[http://zalil.ru/33733757](http://zalil.ru/33733757)

但我得到的答案是它没有标签。但是有！！！这不是一个单一的事件。我想知道这个库是否真的有效。

也许有人对这个库有经验。此外我很困惑，因为[官方页面上](http://id3lib.sourceforge.net/)有指向工作项目的链接，所以已经证明库可以正常工作。
提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-07T09:43:55.323

id3lib 不再维护并且已经过时，因为它不支持 ID3v2.4。

你可以很容易地看到`hexdump -C -n4 your.mp3`：

`00000000 49 44 33 03 |ID3.| 00000004`

如果 mp3 文件以 ID3 开头并且第 4 个字节是 03，它将与 id3lib 一起使用。如果有 04，它使用的是 ID3v2.4。

# php - 在mysql表中保存当前IP地址

> ID：12303854
> 
> 赞同：3
> 
> 时间：2012-09-06T15:52:43.093
> 
> 标签：php, mysql, web

我正在寻找一种好方法，以显示当前（实时）访问我的网站的人数。

我发现，当我将访问我的服务器/站点的人的 IP 地址保存在 mysql 表中时，这可能是最简单的方法。

所以我可能要做的是：

创建一个配置良好的 mysql 表

添加保存IP地址的功能（我猜是php）

添加删除IP地址的功能，如果不再需要

使过程实时或接近实时

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:56:29.020

这是一个快速示例，说明如何获取客户端的真实 IP 地址，然后从 mysql DB 存储和检索其值

```
//Test if it is a shared client
if (!empty($_SERVER['HTTP_CLIENT_IP'])){
  $ip=$_SERVER['HTTP_CLIENT_IP'];
//Is it a proxy address
}elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
  $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
}else{
  $ip=$_SERVER['REMOTE_ADDR'];
}
//The value of $ip at this point would look something like: "192.0.34.166"
$ip = ip2long($ip);
//The $ip would now look something like: 1073732954 
```

现在您已经将客户端的真实 IP 地址转换为 INT 格式，您可以像往常一样将其写入 DB

```
$sql = "INSERT INTO user(ip) VALUES('$ip')";
$dbQuery = mysql_query($sql,$dbLink); 
```

有关此链接的更多信息：**[在 MySQL 中存储 IP 地址的最佳方式](http://daipratt.co.uk/mysql-store-ip-address/)**

附加信息：使您的代码免受**[SQL 注入](http://daipratt.co.uk/mysql-store-ip-address/)**的影响。使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $stmt = $dbh->prepare("INSERT INTO user(ip) VALUES(?)");
    $stmt->bindParam(1, $ip);

    $stmt->execute();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:06:25.900

将您的访问者存储到数据库中（就像其他答案一样）。使用一个`datetime`包含访问者最后一次请求日期的字段（您必须在每次综合浏览量时更新该行）。

现在您可以使用 MySQL 间隔计算“当前在线访问者”。

例如：

```
SELECT
COUNT(1) AS `online_visitors`
FROM `visitors`
WHERE `datetime` > NOW() - INTERVAL 30 SECONDS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:58:22.667

[这是Google Analytics](http://www.google.com/analytics/)中已经内置的功能，`IP`地址并不是跟踪访问者数量的最佳方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T16:03:55.157

首先，我可以建议这个问题的标题不是很好吗？人们在寻求帮助时第二次猜测问题的解决方案是一个典型的错误——当员工提交错误报告时，我一直在我工作过的当前/以前的公司中看到这一点。

您想要实现的目标是实施某种形式的分析，这样您就可以确定有多少人正在访问您的网站，其中有多少是唯一访问者，并且还能够查看当前正在使用该网站的用户的实时数据. 所以一个更好的标题应该是“我怎样才能获得关于谁在访问我的网站的信息？”。

将 ip 地址存储在表中是实现此目的的有效方法，但远非理想。我强烈建议使用[谷歌分析](http://www.google.com/analytics/)（或类似的东西），因为这将使您能够看到所有这些信息以及更多信息，而且您不需要付出太多努力。您甚至不必成为编码员 - 您只需将他们提供的代码段复制并粘贴到您的 HEAD 标签中即可。那里有很多关于如何做到这一点的信息，所以我不会详细介绍，但请随时询问您是否有任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T15:56:50.480

每次请求页面时，您都可以将 IP 地址推送到 MySQL 数据库，以便它是唯一的。

```
<?php
    $ipaddress = $_SERVER["REMOTE_ADDR"];
    mysql_connect();
    mysql_select_db("visitors");
    mysql_query("INSERT INTO `visitors` (`ipaddress`) VALUES ('$ipaddress')");
    mysql_close();
?> 
```

# jquery - 设备登录问题

> ID：12303860
> 
> 赞同：-1
> 
> 时间：2012-09-06T15:53:08.320
> 
> 标签：jquery, ruby-on-rails, devise

我的标准布局中有这样的模态窗口（默认为隐藏）

```
.sign_in_modal
      .top
        %h4
          Вход для пользователей
        = link_to "Закрыть", "#", :remote => true, :class => "close-link"
      .left
        .input-area
          = form_tag new_user_session_path do
            = email_field_tag :email, nil, :placeholder => "Ваш e-mail", :required => "true", :class => "input"
            = password_field_tag :password, nil, :placeholder => "Ваш пароль", :required => "true", :class => "input"
            = check_box_tag "Запомнить меня",'user[remember_me]', true
            %span
              Запомнить?
          .button-area
            = submit_tag "Вход", :class => "sign_in_link", :id => "submit"
      .right
        %h4
          или
        %p
          Войти при помощи:
          = link_to image_tag('facebook.png'), user_omniauth_authorize_path(:facebook)
          = link_to image_tag('vk.png'), url_for(user_omniauth_authorize_path(:vkontakte))
        %h4
          Преимущества: 
```

我的 js 看起来像这样：

```
jQuery(function($) {
  $(".close-link").click(function() {
    $(".sign_up_modal").hide();
    $(".sign_in_modal").hide();
    $('.hide').hide("slow");
  });

  $(".sign_in_link").click(function() {
      console.log("eue123ueu");
      $('.hide').fadeTo("slow",0.8);
      $(".sign_in_modal").show();
      $(".sign_in_modal").center(); 
  }); 
}); 
```

但是当我填写表格并单击按钮时，什么也没有发生。如何做到这一点，如果我填写表格并单击提交按钮，设计授权日志是我的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:01:48.283

据我从您的代码中可以看出，您在 HAML 缩进中有错误。你是阻塞`submit_tag`的外部`form_tag`原因。`.button_area`

只需将它们都向右移动以更正缩进。

# java - Openfileinput 返回空指针异常

> ID：12303864
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:18.653
> 
> 标签：java, android, file-io, fileinputstream

我正在使用以下代码来创建和写入文件

```
 FileOutputStream fOut = mcontext.openFileOutput("msg.txt",Context.MODE_WORLD_READABLE);
    OutputStreamWriter osw = new OutputStreamWriter(fOut);
    osw.write("abc");
    osw.flush();
    osw.close(); 
```

但是在 LOG cat 中，它在上述代码的第一行给出了空指针异常。

这是整个代码

```
public class Server implements Runnable 
{
private String address ="127.0.0.1";
private String add="127.0.0.2";
private static Context mcontext;
byte[] buf = new byte[256];
DatagramSocket socket;

@Override

public void run()

{
    try{

    InetAddress serveradd =  InetAddress.getByName(address);
    InetAddress clientadd = InetAddress.getByName(add);
    socket=new DatagramSocket(6000,serveradd);
    Log.d("UDP", "S: Connecting...");

    DatagramPacket packet=new DatagramPacket(buf,buf.length);
    socket.receive(packet);
    Log.d("UDP", "S: Receiving...");

    /* Receive the UDP-Packet */
    String data=new String(packet.getData());
    String phno=data.substring(0,9);
    String identity=data.substring(10,14);

    //FileWriter f = new FileWriter("/sdcard/download/msg.txt");
    // I/O operation
    FileOutputStream fOut = mcontext.openFileOutput("msg.txt",Context.MODE_WORLD_READABLE);
    OutputStreamWriter osw = new OutputStreamWriter(fOut);
    osw.write("gfdffg");
    osw.flush();
    osw.close();

    Log.d("UDP", "S: ReceivedJI: '" + new String(packet.getData()) + "'");
    Log.d("UDP", "S: Done.");
    //Toast.makeText(context.getApplicationContext(),"received"+new String(packet.getData()),Toast.LENGTH_LONG).show();
   // if(TextUtils.isDigitsOnly(phno) && identity.equals("novel"))
   // {
    byte[] bufsend =("hi").getBytes();
    Log.d("UDP", "S: sending.");
    DatagramPacket packetsend=new DatagramPacket(bufsend,bufsend.length,clientadd,5000);
    socket.send(packetsend);
    Log.d("UDP", "S: send.'"+bufsend+"'");
    //}
    //else
   // {
        //Log.d("UDP", "S: not matched.");
   // }
    }
    catch (Exception e)
    {
        Log.e("UDP", "S: Error", e);
        e.printStackTrace();
        //Toast.makeText(context.getApplicationContext(),"received"+e,Toast.LENGTH_LONG).show();    
    }

}

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:07:57.500

使用时，`mcontext`您没有在代码中的任何位置设置它。所以变量是`null`。你应该给你`Runnable`一个构造函数，它接受一个`Context`：

```
public Server(Context context) {
    mcontext = context;
} 
```

所以你可以设置 mcontext 变量。另外，不要让它成为静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:00:34.783

将此添加到 manifest.xml

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# mysql - MYSQL SUM 功能通过“键”列对表组中的行“值”进行总计

> ID：12303866
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:21.307
> 
> 标签：mysql, sql, sum

快速提问，关于 SQL SUM()

我需要汇总表中一行的值，按另一列分组。因此，如果我有类似以下内容并将其转换为以下内容。我知道你能做到

```
SELECT SUM(value) WHERE key = 'ONE'
SELECT SUM(value) WHERE key = 'TWO'
... 
```

但我想在一个查询中做（如果可能的话）。原因是我不知道表格结果是 ONE 还是 ONE/TWO 或 ONE/TWO/THREE 等等。所以基本上我想为每种键类型做一个 SUM

```
key - value
-----------------
ONE - 3
TWO - 2
ONE - 3
ONE - 1
TWO - 6 
```

我正在寻找的结果。

```
ONE - 7
TWO - 8 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:54:25.723

```
SELECT key, SUM(value) FROM table GROUP BY key; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:58:45.473

您需要添加一列，最好是该`KEY`列，使用`AGGREGATE`函数`SUM`并将它们分组`KEY`

```
SELECT `key`, SUM(value) totalValue
FROM table Name
GROUP BY `key` 
```

# asp.net - 包含在 DATEDIFF() 中的 SELECT MAX()

> ID：12303871
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:37.890
> 
> 标签：asp.net, sql-server-2008, function, stored-procedures

我正在为我工​​作的公司的桌面支持团队写一份报告。该报告需要在从 ASP.NET 应用程序传入的指定时间范围内生成一组新的启动器。目前我们的 Worker 表和 Contract 表之间是一对多的关系。我们雇佣了很多承包商，他们有时会在几个月后回来，但仍然被视为新的初学者，因为新机器需要与桌面空间一起配置。

每次薪酬审查、职位变更和新员工都会添加一份新合同。我们需要过滤掉除新首发之外的所有内容。为工作变动和薪酬审查添加的最新合同自然总是在前一个合同的结束日期之后一天。由于我在宏伟的计划中仍然是一个新手，我正在努力使用一组我试图用来实现我的目标的功能。

```
WHERE    
(dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF) AND DATEDIFF(day, SELECT MAX(StartDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID, SELECT MAX(EndDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID)> 1 
```

如果当前有效的合同与之前的合同有一天不同，我基本上想在员工有多个合同的情况下找出，无论离开和回来还是支付审查。根据我的想法，这应该只给我所有新的开始。

问题是我仍在努力弄清楚何时使用不在选择中的聚合函数以及何时应用 HAVING 子句。

任何帮助将不胜感激，以帮助我理解为什么我缺乏理解导致此查询/逻辑失败。

谢谢

编辑

好的，我仍然在抨击这个解决方案，这在语法上是不正确的。为了消除这里的一些歧义，查询是带有更新的；

```
 Declare @StartDateF varchar(10)

    Set @StartDateF = '2012-08-03'

    Declare @EndDateF varchar(10)
    Set @EndDateF = '2012-09-04'

    SELECT w1.Worker_ID, w1.Title, w1.FirstName, w1.Surname,w1.Gender, w1.DateofBirth,
           dbo.[Contract].StartDate, (select w2.surname + ',' + w2.firstname from worker w2 WITH (NOLOCK) where w2.worker_ID = w1.manager)as Manager, dbo.Grade.GradeDescription AS JobTitle, dbo.Grade.Discipline,
           CASE WHEN dbo.[Contract].ContractType_ID = 1 OR dbo.[Contract].ContractType_ID = 2 OR dbo.[Contract].ContractType_ID = 5 OR dbo.[Contract].ContractType_ID = 6
           THEN 'Staff' ELSE 'Contractor' END AS ContractType
    FROM dbo.Worker w1 WITH (NOLOCK) inner join 
         dbo.[Contract] WITH (NOLOCK) ON  dbo.[Contract].Worker_ID = w1.Worker_ID inner join
         dbo.Grade WITH (NOLOCK) ON dbo.Grade.Grade_ID = dbo.[Contract].Grade_ID
    WHERE 

    (dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF AND EndDate IS NULL) 

    group by 
    w1.Worker_ID, w1.Title, w1.FirstName, w1.Surname,w1.Gender, w1.DateofBirth,
           dbo.[Contract].StartDate, manager,  dbo.Grade.Discipline,dbo.Grade.GradeDescription, dbo.[Contract].ContractType_ID

   Having DATEDIFF(day, SELECT MAX(StartDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID, SELECT MAX(EndDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID) 
```

我已经添加了 group by 和 having 子句，但现在我收到以下错误

消息 156，级别 15，状态 1，第 24 行关键字“SELECT”附近的语法不正确。消息 102，级别 15，状态 1，第 24 行 ',' 附近的语法不正确。消息 102，级别 15，状态 1，第 24 行 ')' 附近的语法不正确。

毫无疑问，这些都与have子句中的功能有关，您可以看到。但我不明白这个查询有什么问题，这主要是问题所在。我需要充分了解 SQL 函数，以便我可以实施正确的解决方案。

我在这里跟进了 DATEDIFF() 函数[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

根据 MS 文档，我可以看到在此函数中使用函数是可以接受的。

编辑

注释掉 Have 子句给了我我期望的结果集。它向人们展示了合同变更（加薪），但这是没有人应该看到的信息，这些是现在唯一需要过滤掉的记录

编辑

我现在已经做了一些改进并克服了错误消息，但我仍然让人们知道发生了加薪。这是来自 group by 的修改后的查询

```
group by 
w1.Worker_ID, w1.Title, w1.FirstName, w1.Surname,w1.Gender, w1.DateofBirth,
       dbo.[Contract].StartDate, manager,  dbo.Grade.Discipline,dbo.Grade.GradeDescription, dbo.[Contract].ContractType_ID, w1.Worker_ID
Having

(((dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF) 
AND COUNT(dbo.[Contract].Worker_ID) = 1)

 OR 

 ((dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF) 
 AND DATEDIFF(day, (SELECT MAX(EndDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID), (SELECT MAX(StartDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID))>1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:42:05.940

要获得一份以上合同的工人，您可以使用：

```
select c.workerID
from Contract c
group by c.workerID
having count(distinct contractID) > 1 
```

不过，这听起来就像您只想计算除新开始之外的所有内容。你可以这样做：

```
select w.workerID
from Contract c
where c.ContractType = 'New'
group by w.workerID
having count(distinct contractID) > 1 
```

因为您没有提供表格的外观、示例输入数据的外观以及您想要实现的结果的详细信息，所以这是可以做到的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:48:06.420

```
 WHERE ( (dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF)AND dbo.[Contract].Worker_ID 
        IN (select worker_id from dbo.[Contract] 
        group by worker_id 
        having count(worker_id) = 1))

  OR 

   ((dbo.[Contract].StartDate BETWEEN @StartDateF AND @EndDateF) 
   AND DATEDIFF(day, (SELECT MAX(EndDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID), (SELECT MAX(StartDate)FROM dbo.[Contract] WHERE dbo.[Contract].Worker_ID = w1.Worker_ID))>1 
   AND dbo.[Contract].Worker_ID = w1.Worker_ID ) 
```

现在为我工作:)

# ruby-on-rails - 使用 Heroku 和 Postgres 确保为多个开发人员提供一致的数据

> ID：12303876
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:51.623
> 
> 标签：ruby-on-rails, postgresql, heroku, solr

我正在一个由 4 名开发人员组成的团队中构建一个部署在 Heroku 上的 Rails 应用程序。我们目前在我们的开发机器和 Postgres 上使用 Sqlite 进行暂存（在 Heroku 上）。由于我们应用程序的某个部分的工作方式，所有开发人员在开发时都必须拥有相同的数据。

在我们的登台应用程序中，我们创建这些记录，然后将其推送到测试 Solr 集群。然后问题来了，当我们在本地开发时，我们遇到了相同的测试集群，并且那里存在的 ID 与我们本地 Sqlite 表中记录的 ID 不匹配，我们需要能够将 Solr 结果绑定回表记录。

我们的一个想法是转换到 Postgres 进行开发（无论如何我们应该已经这样做了），从 Heroku 导出数据并导入到我们的本地数据库表中。虽然我相信这种方法会很好用。我想知道是否有其他人遇到过类似的问题以及他们采取了什么方法来解决它。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:04:28.623

实际上我昨晚刚遇到这个问题；我实际上也将我的本地数据库转换为 postgres。特别是对于 Heroku，使用[PG 备份](https://devcenter.heroku.com/articles/pgbackups)并导入到我的本地副本几乎是微不足道的。这是我第一次使用 PostGres，所以有了新的体验，我无法想象它会变得更容易。我和我的同事现在可以使用与您一样的相同数据，这是必需的。

# php - 可以像超级全局变量一样在每个页面上使用的自定义变量？

> ID：12303877
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:54.420
> 
> 标签：php, mysql, server-side-includes, superglobals

我希望一个变量是超全局的，但是由于我使用的是程序风格，我认为我不能自己制作一个，所以基本上问题是使用查询从安全表中检索我的网站的所有安全控制，我检查**维护模式**是否打开/关闭，如果打开，则将其重定向到维护页面下的网站，因此在每个页面上我需要检查变量的状态，`$maintenance_status`为此，我需要在每个页面上调用该查询，否则我收到一个未定义变量的错误，此外，如果我正在创建一个函数并将该函数文件包含在其他页面中，它向我显示`$db_connect`（这是我的数据库连接变量）未定义，我将我的页面包含在这个序列中

```
include_once('connection.php');
include_once('functions.php');
 /*other scripts goes here*/ 
```

知道如何在每个页面上提取此状态吗？我想为常见查询创建一个新文件，但它是一个干净的解决方案吗？此外，我想我不理解包含，如果我`connection.php`之前包含而`functions.php`不是为什么我`functions.php`显示未定义的变量`$db_connect`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:00:26.470

您可以通过使用 define() 来使用常量。每次脚本执行可以设置一次定义，并且在一次脚本执行期间不能更改。它们是超全局的 - 也跨被包含的文件。

请参阅[http://php.net/define](http://php.net/define)或只是

```
define('MY_CONSTANT', 'whatever');
define('MY_OTHER_CONSTANT', false);

function foo() {
    if (MY_OTHER_CONSTANT !== true) {
        echo MY_CONSTANT;
    }
}

foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:59:29.047

如果没有更多关于文件中哪里出现错误的代码上下文，将很难提供任何建议。例如，您对 $db_connect 的引用是从函数内部完成的吗？如果是这样，除非您`global $db_connect`在该函数中有声明（在全局范围内使用 $db_connect 而不是在函数范围内使用未定义的 $db_connect），否则它将不起作用。

虽然出于多种原因我不喜欢`global`在函数中使用这样的声明（我宁愿使用依赖注入，或者通过静态单例函数调用获取数据库连接），但这可能是另一个教训。

无论如何，您可能最好在某种初始化脚本中进行查询（例如在您的 connection.php inlcude 之后）并定义一个关于维护模式是打开还是关闭的常量。像这样的东西

```
// assuming you have already made DB query and have a value of true/false on a variable called $is_maint_mode
define('MAINT_MODE', $is_maint_mode); 
```

这将为您提供一个`MAINT_MODE`对您的代码全局可用的常量。

# oauth - 使用 oauth-php 通过 LinkedIn 获取自己的公司更新

> ID：12303878
> 
> 赞同：0
> 
> 时间：2012-09-06T15:53:58.813
> 
> 标签：oauth, linkedin, access-token

我需要使用[oauth-php](http://code.google.com/p/oauth-php/)通过 LinkedIn API 进行身份验证。我想从我自己公司的 LinkedIn 个人资料中获取 LinkedIn 状态更新。LinkedIn 提供了一个很好的示例，如何使用 PHP OAuth 扩展[在他们的网站上](https://developer.linkedin.com/documents/quick-start-guide#toggleview%3aid=php)检索您自己的 LinkedIn 个人资料，但我不知道如何使用 oauth-php 库来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:11:37.423

根据[公司更新](https://developer.linkedin.com/reading-company-updates)文档，您可以使用 oauth-php 调用以下端点：

```
http://api.linkedin.com/v1/companies/{id}/updates 
```

# asp.net - 试图弄清楚如何遍历 asp.net 处理页面上发布的数据

> ID：12303880
> 
> 赞同：0
> 
> 时间：2012-09-06T15:54:14.587
> 
> 标签：asp.net, forms

我的表单是动态的，可以提交用户想要的内容，我有一个处理页面来处理数据：

```
<form id="imageForm" method="post" action="WebFormDesignImageProcessor.aspx" target="imageCollector">
  <input id="image61472" name="image[61472]" value="" src="file:\\C:\Users\william.francis\Downloads\errmergerd.jpg" type="file">
  <input id="image61474" name="image[61474]" value="" src="file:\\C:\Users\william.francis\Downloads\william_linkedin_photo.jpg" type="file">
  <input id="data[image61472]" name="image61472data" value="61472" type="hidden">
  <input id="data[image61474]" name="image61474data" value="61474" type="hidden">
</form> 
```

数据是动态的，表单可以根据用户输入而增长或缩小。我想要做的是将数据集配对在一起，并以某种方式迭代它。

```
for( i = 0; i < $_POST['data[]'].length; i++){
   byte[] img = $_POST['image['.i.']'];
   string pk = $_POST['image'.i.'data];
   //then query
} 
```

我知道上面的示例是在 PHP 伪代码混合的东西中，但在 ASP.net 中寻找东西。

**作为旁注：我可以将上面的名称设计更改为任何数字，只要数字在那里......因为这就是它的独特之处。这可能会容易得多**

*编辑：我可以将项目的名称命名为 idData[] 和 imgData[]，但是当将其发送到服务器时，我不知道哪个项目引用了什么....因为没有链接....这是什么数字是为了。这是一个障碍，部分有助于解决问题*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:39:02.603

我不知道你是否可以在 .NET 中做同样的事情；但是你可以使用 linq：

```
var rq = HttpContext.Current.Request;
var keys = rq.Form.AllKeys.Where(i => i.StartsWith("data") == true);

foreach (var key in keys)
{
    //check key, and process accordingly
} 
```

类似的东西。请注意，名称是表单集合中可用的标识符，而不是 ID（很确定是这种情况）。

# asp.net - 将远程开发数据库移至本地使用

> ID：12303881
> 
> 赞同：1
> 
> 时间：2012-09-06T15:54:18.407
> 
> 标签：asp.net, sql-server

我一直在使用位于云中的中央 MS SQL 数据库来开发网站项目。我最近发现自己处于需要在没有互联网连接的情况下进行开发的情况。我想开始使用现有数据库的本地可用副本，将​​其放在 App_Data 文件夹中。

为了使项目与本地数据库合作，我需要采取哪些正确的步骤？

例如：

1.  从现有 SQL 实例中分离数据库。
2.  复制到开发机器。等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:01:13.773

移动 SQL-Server 数据库并不难。在这里寻找一些方法来做到这一点。

[http://support.microsoft.com/kb/314546](http://support.microsoft.com/kb/314546)

我通常发现 sp_detach + sp_attach 方法非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:56:08.063

我会在本地创建一个空的 shell 数据库，然后使用许多可用的模式比较解决方案之一来使本地数据库看起来与云数据库完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:01:14.367

正确的方法是使用导入/导出创建并定期更新您的独立数据库副本。特别是 MS SQL Server 为此提供了[导入/导出向导工具](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:25:03.110

1.  进行备份
2.  复制备份文件
3.  在您的服务器上恢复
4.  恢复/组织用户

# spring - Spring：注解等价于 security:authentication-manager 和 security:global-method-security

> ID：12303894
> 
> 赞同：13
> 
> 时间：2012-09-06T15:54:44.303
> 
> 标签：spring, spring-security

在 XML 配置中，我可以使用`security`命名空间来启用对安全性的支持，例如：

```
<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="authenticator" />
</security:authentication-manager>

<security:global-method-security pre-post-annotations="enabled" />

<bean id="authenticator"
    class="org.springframework.security.authentication.TestingAuthenticationProvider" /> 
```

我尝试使用没有 XML 的 Spring，只有`@Configuration`类。与上面的 XML 示例这样的配置等价的纯 Java 是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T16:36:31.210

**编辑**：2013 年 12 月[Spring Security 3.2 发布](https://spring.io/blog/2013/12/16/spring-security-3-2-0-release-released)并[实现了 Java 配置](http://docs.spring.io/spring-security/site/docs/3.2.x/reference/htmlsingle/#jc)，所以上面的 XML 大致相当于：

```
@Configuration
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class SecurityConfiguration extends WebSecurityConfigurerAdapter {

  @Override
  protected void configure(final AuthenticationManagerBuilder auth)
      throws Exception {
    auth.authenticationProvider(authenticator());
    super.configure(auth);
  }

  @Bean
  public AuthenticationProvider authenticator() {
    return new TestingAuthenticationProvider();
  }

} 
```

**2012年的旧答案：**

不幸的是，没有。[检查这个答案](https://stackoverflow.com/a/8852347/708434)（半年前由 Spring Security [Lead dev](https://jira.springsource.org/secure/ViewProfile.jspa?name=rwinch)发布）：

> 目前没有简单的方法来使用 Java 配置进行 Spring Security 配置。您必须知道命名空间在幕后做了什么，这使得它变得困难且容易出错。出于这个原因，我建议坚持使用 Spring Security 命名空间配置。

[一种选择是为非官方项目Scalasec](https://github.com/tekul/scalasec/)做出贡献，该项目提供基于 Scala 的配置，并[在 SpringSource 博客上的这篇文章中](http://blog.springsource.org/2011/08/01/spring-security-configuration-with-scala/)进行了描述。同样，不建议将其用于生产，因为项目似乎已被放弃。我想有一天尝试这个项目，但目前没有空闲时间:(

# php - 在 ajax 中使用 SQL 查询

> ID：12303896
> 
> 赞同：0
> 
> 时间：2012-09-06T15:54:50.237
> 
> 标签：php, jquery, ajax

仅在 ajax 调用中使用 SQL 查询有什么问题吗？例如：

```
$.ajax({
     type: "POST",
     url: "queryhandler.php",
     data: { query: "INSERT INTO users VALUES(incontrol, drowssap)" },
     dataType: "json",
     success: function (data) {
         if (typeof callback == 'function')
             callback(data);
     }
); 
```

这是不明智的吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:56:30.687

这是一个*非常*糟糕的主意。如果您可以从 AJAX 进行直接 SQL 查询，这是一种*客户端技术*，任何使用您网站的人都无法做到。如果您返回结果，这意味着您网站上的每个人不仅可以添加/删除/修改数据并可能操纵表结构，而且他们还可以从您的数据库中提取私人或机密数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:58:10.873

是的，有几个原因。

一个。您为任何“黑客”提供了一个直接接口来读取和操作您的数据。

湾。即使您在服务器端添加一个过滤受操纵查询的白名单，您也会暴露您的数据库结构（或其中的一部分），这可以帮助攻击者更有针对性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:38:58.207

是的，这是错误的，因为您正在邀请黑客访问您的网站并入侵您的网站。

# internet-explorer - getElementById 与 ie9

> ID：12303902
> 
> 赞同：0
> 
> 时间：2012-09-06T15:55:12.503
> 
> 标签：internet-explorer, getelementbyid

使用 getElementById 在最后一行出现错误。是什么赋予了？

```
import win32com.client as client

import time

ie = client.Dispatch('InternetExplorer.Application.1')

ie.Visible = 1

ie.Navigate('www.myweb.it') 

while ie.Busy:
time.sleep(0.1)

while ie.Document.readyState != 'complete':
time.sleep(0.1)

click = ie.Document.getElementById('some_id').click() # here goes in error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:28:33.427

它应该工作。

```
 Ex.function test()
    {
        var hyperlink = document.getElementById('nameofid');
        hyperlink.onclick = "your code";
    } 
```

# tfs - 更改 TFS 服务器映射

> ID：12303903
> 
> 赞同：0
> 
> 时间：2012-09-06T15:55:16.310
> 
> 标签：tfs

运行 VS 2010，我现在想在 TFS 2010 上构建。

最初我连接了 TFS 服务器“tfs1”。现在我想将我的本地路径映射到新的 TFS 服务器“tfs2”。如何断开与 tfs1 的旧映射？我收到一个错误：

```
The path C:\test\xxxAdmin is already mapped in workspace aaa-PC[http://tfs1:8080/tfs/windowsapp] 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:01:37.467

在旧服务器的源代码管理资源管理器中，您可以下拉“工作区”列表，选择“管理工作区”，然后删除您不再想使用的工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:08:46.510

大多数情况下，您可以在 VS 命令窗口 (Start->All Programs\Microsoft Visual Studio 2010\Visual Studio Tools\Visual Studio Command Prompt (2010) 中转到有问题的目录 ("C:\test\xxxAdmin") ) 然后输入“ **tf workspace** ”。除非事情有点棘手，否则这将打开 GUI“编辑工作区”。在“工作文件夹”列表中找到该目录，选择它，然后单击“删除”。

您现在应该能够创建新映射

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:16:13.153

选择`Manage workspaces`并删除不需要的工作区。

![在此处输入图像描述](../Images/3291ae4830bdd4377b770c6b89e25cc5.png)

你也可以使用工具`Tfs Workspace`

![在此处输入图像描述](../Images/a2fc49a71d0dd05bcb42ce8af4c19781.png)

# php - PHP 循环遍历导出产品目录中的父子菜单项

> ID：12303905
> 
> 赞同：0
> 
> 时间：2012-09-06T15:55:19.970
> 
> 标签：php, mysql, arrays

这个有点难，我已经从 ACTINIC 导入了一个产品列表到一个 mysql 数据库。我需要能够从顶级菜单项中收集所有产品并将所有子菜单项放在一个数组中，以便我可以查找哪些产品属于所述顶级项。

所有菜单项都有从 1 开始顺序的 id。

我需要一种方法来循环基于其父 id 的未确定数量的子项目，并将所有这些 id 收集到一个数组中以用于循环产品。

我想我已经解释得很好，任何帮助或想法都会很棒。只需要一个起点，我就可以从这里出发。

// 编辑

感谢约翰为我指明了正确的方向

```
// $all is a mysql query
loopit($all);
function loopit($array){

    while($forone = mysql_fetch_array($array)){

        echo "id=" . $forone['nSectionID'] . " name=" . $forone['Section text'] . "<br />";

        $seltwo = mysql_query("SELECT * FROM [table] WHERE nParentSectionID='" . $forone['nSectionID'] . "'");

        loopit($seltwo);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:58:11.480

为此，您将需要一个递归函数。像这样的东西：

```
function import ( $items ) {
  foreach ( $items as $item ) {
    // handle item import
    // .....

    if ( $item->children ) {
      import( $item->children ); // Notice the function calling itself here.
    }
  }
} 
```

# iphone - 通用 Xcode 相机胶卷应用程序问题

> ID：12303911
> 
> 赞同：0
> 
> 时间：2012-09-06T15:55:47.953
> 
> 标签：iphone, ipad, camera, xcode4.3, ios-universal-app

我在 Xcode 中有一个通用应用程序。如果用户使用的是 iPad，则使用库中的图像按钮效果很好。但是，如果他们使用 iPhone，则该按钮不起作用。

这是我收到的错误。

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIPopoverController initWithContentViewController:] 未在 UIUserInterfaceIdiomPad 下运行时调用。”

被告知此代码将起作用。它是否进入下面的（IBAction）代码？

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) { Add Popover code here } else {     
Add alternative for popover here }

- (IBAction) useCameraRoll: (id)sender
{

if ([self.popoverController isPopoverVisible]) {
    [self.popoverController dismissPopoverAnimated:YES];

} else {
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = YES;

        newMedia = NO;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:12:57.987

发生此崩溃是因为您不能在 iPhone 上使用 UIPopOverControllers，而只能在 iPad 上使用。

> [UIPopoverController initWithContentViewController:]**未** 在 UIUserInterfaceIdiom **Pad**下运行时调用。

尝试这样的事情：

```
- (IBAction)useCameraRoll:(id)sender
{
    UIPopoverController *popoverController = [[UIPopoverController alloc] init];
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = YES;

        newMedia = NO;
    }
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        if (popoverController.isPopoverVisible) {
            [popoverController dismissPopoverAnimated:YES];
        }else{
                [popoverController setContentViewController:imagePicker];
                [popoverController setDelegate:self];
                [popoverController presentPopoverFromRect:CGRectMake(0, 0, 320, 320) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        }
    }else{
        [imagePicker presentViewController:imagePicker animated:YES completion:nil];
    }
} 
```

# php - while循环内的while循环？从 PHP 中分离数据

> ID：12303914
> 
> 赞同：0
> 
> 时间：2012-09-06T15:55:53.480
> 
> 标签：php, while-loop

```
while($row = mysql_fetch_array($result))

//Template for each card in search result
{
echo '<div class="sleeve">';
echo '<div class="card ', $row['name'], '">';
    echo '<div class="front face">';
        echo '<img src="/', $row['cardset'], '/', $row['name'], $row['altart'], '.jpg"', ' alt="', $row['name'], '" />';
    echo '</div>';
    echo '<div class="back face">';
        echo '<a id="name">', $row['name'], '</a><br/>';
        echo '<form name="info" action="">';
        echo '<select name="set">';
            //while???
            echo '<option value="Zendikar">', $row['sets'],'</option>';
        echo '</select>';
        echo 'Foil:<input type="checkbox" name="foil" value="true"/><br/>';
        echo '<select name="condition">';
            echo '<option value="Near Mint">Mint</option>';
            echo '<option value="Played">Played</option>';
            echo '<option value="Damaged">Damaged</option>';
        echo '</select>';
        echo 'Trade:<input type="checkbox" name="trade" value="true"/ <br/>';
        echo '</form>';
        echo '<b>Rulings:</b> <br/>';
        echo $row['rulings'];
    echo '</div>';
echo '</div>';
echo '</div>';
} 
```

**//尽管？？？**在那乱七八糟的回声中可能很难看到，但有一个部分我不知道如何处理。PHP 正在抓取信息行，并很好地填充它们。它用小信息框填满了屏幕。

在本节中，我不知道如何处理，其中一行中的数据包含多个事物（thing1、thing2、thing3），每次都用 (, ) 分隔。我需要新事物中的每一个

所以我觉得每张卡内都会有另一个while循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:59:45.533

你在正确的轨道上循环。尝试这样的事情，它将字符串分解成一个数组，基于逗号分隔符，使用[`explode()`](http://php.net/explode)：

```
echo '<select name="set">';
foreach( explode( ',', $row['sets']) as $item)
    echo '<option>', $item, '</option>';
echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:04:40.137

在将字符串分解为数组之后，您可能需要一个 foreach 语句：而不是 //while 行和以下行：

```
foreach (explode(',', $row['sets']) as $value)
  echo '<option value="', $value, '">', $value,'</option>'; 
```

我猜你实际上可能每行都有另一个值（一个要显示，另一个是你要设置的实际值），但是字符串看起来更像“（key1 = value1，key2 = value2）”然后你需要做更多的工作，但你明白了。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:59:59.917

是的，您需要先`explode`将该行放入一个数组中

```
$list_of_things = explode(",", $row['whatever']); 
```

然后使用 a`while`或 a `foreach`：

```
$thing_options = '';
foreach($list_of_things as $thing)
    $thing_options .= "<option>$thing</option>"; 
```

您可能还会发现*此处的文档*语法很有用：

```
print <<<TEMPLATE
<div class="sleeve">
    <div class="card {$row['name']}">
    <div class="front face">
        <img src="/{$row['cardset']}/{$row['name']}{$row['altart']}.jpg"
           alt="{$row['name']}" />
    </div>
    <div class="back face">
        <a id="name">{$row['name']}</a>
        <br/>
        <form name="info" action="">
        <select name="set">
            {$thing_options}
            <option value="Zendikar">{$row['sets']}</option>
        </select>
        ...
TEMPLATE; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T16:07:55.043

虽然告诉您`explode()`数组的所有答案都是正确的，但我不禁认为，有一个用逗号分隔的值填充的 db 列是您的数据库未规范化的症状。您应该查看以下链接以了解数据库规范化的介绍：http: [//mikehillyer.com/articles/an-introduction-to-database-normalization/](http://mikehillyer.com/articles/an-introduction-to-database-normalization/)

我还建议*不要*回显 HTML。理想情况下，您的 PHP 脚本应遵循以下模式：

预先进行所有 PHP 处理，包括数据库查询和表单处理。结果应存储在变量中。

|
|
|
五

几乎是纯 HTML 模板/视图，只有足够的显示逻辑（if/else、循环、`echo`）来实际显示您存储在步骤 1 中的变量中的结果。

如果您让 PHP 成为大脑，HTML 成为美丽，您会发现调试/编辑要简单得多。就像标记和样式应该如何分开一样，脚本和显示也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T16:00:11.100

您可以使用 PHP 的[`explode`- 方法](http://php.net/manual/en/function.explode.php)将逗号分隔的字符串拆分为其值，然后在 foreach 循环中处理该数组：

```
$raw = "one,two,three";
$values = explode("," $raw);
foreach($values as $value) {
    echo $value;
} 
```

# php - 提交到电子邮件时带有复选框和下拉菜单的 PHP 表单

> ID：12303915
> 
> 赞同：1
> 
> 时间：2012-09-06T15:55:54.587
> 
> 标签：php, forms, form-submit, checkbox

好的，我对 php 或表单不是很好，但是已经做了很多挖掘并且没有想出我可以弄清楚如何工作的解决方案。我有一个带有两组复选框和一个下拉列表的表单，其中包括标准名称、电子邮件等......字段。我的问题是让复选框的值显示在表单提交时收到的电子邮件中。这是表单代码：

```
 <form method="post" action="appointment-process.php">
<fieldset>
    <label for="name">Name<em class="warning">*</em></label>
    <input id="name" name="name" type="text" class="span6" autofocus required placeholder="Raider Red">
    <span class="help-block">Please enter your FIRST and LAST name.</span>

    <label for="email">Email Address<em class="warning">*</em></label>
    <input id="email" name="email" type="email" class="span6" placeholder="raider.red@ttu.edu" required>

    <label for="phone">Phone Number<em class="warning">*</em></label>
    <input id="phone" name="phone" type="tel" class="span6" placeholder="8067421234" required>

    <label for="legal">Legal Issues<em class="warning">*</em></label>
    <input id="legal" name="legal" type="text" class="span6" placeholder="Landlord Problems" required>  

    <label for="classification">Classification</label>
    <div class="controls">                              
        <select id="classification" name="classification">
            <option>Freshman</option>
            <option>Sophomore</option>
            <option>Junior</option>
            <option>Senior</option>
            <option>Other</option>
        </select>                                       
    </div>
    <div class="control-group">
        <label for="">Preferred Appointment Times</label>
        <span class="help-block">Please check all of the days and times that work with your schedule</span>
        <div class="controls row">
                <div class="span3">
                    <label class="checkbox" for="timez">
                        <input type="checkbox" name="timez[]" value="9am">9:00 am 
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="timez[]" value="10am">10:00 am
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="timez[]" value="11am">11:00 am
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="timez[]" value="1:30pm">1:30 pm
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="timez[]" value="2:30pm">2:30 pm
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="timez[]" value="3:30pm">3:30 pm
                    </label>
                </div>                                              
                <div class="span3">
                    <label class="checkbox" for="dayz">
                        <input type="checkbox" name="dayz[]" value="Monday">Monday
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="dayz[]" value="Tuesday">Tuesday
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="dayz[]" value="Wednesday">Wednesday
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" name="dayz[]" value="Thursday">Thursday
                    </label>
                </div>

        </div>
    </div>
    <button type="submit" class="btn">Submit</button>
</fieldset> 
</form> 
```

这是我的php代码：

```
<?php  
if( isset($_POST) ){  

    //form validation vars  
    $formok = true;  
    $errors = array();  

    //submission data  
    $ipaddress = $_SERVER['REMOTE_ADDR'];  
    $date = date('d/m/Y');  
    $time = date('H:i:s');

    //form data
    $name = $_POST['name'] ;
    $email = $_POST['email'] ;
    $phone = $_POST['phone'] ;
    $legal = $_POST['legal'] ;
    $timez = $_POST['timez'] ;
    //$dayz = $_POST['dayz'];

    //form validation to go here....

    //validate name is not empty
    if(empty($name)){
        $formok = false;
        $errors[] = "You have not entered a name";
    }

    //validate email address is not empty
    if(empty($email)){
        $formok = false;
        $errors[] = "You have not entered an email address";
    //validate email address is valid
    }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){
        $formok = false;
        $errors[] = "You have not entered a valid email address";
    }

    //validate phone number is not empty
    if(empty($phone)){
        $formok = false;
        $errors[] = "You have not entered a phone number";
    }

    //validate legal issue is not empty
    if(empty($legal)){
        $formok = false;
        $errors[] = "You have not entered a legal issue";
    }

    if(isset($_POST['dayz'])){
        $message .= implode(', ', $_POST['dayz']);
    }

    //send email if all is ok
    if($formok){
        $headers = "From: email@email.com" . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

        $emailbody = "<p>You have recieved a new Appointment Request.</p>
                      <p><strong>Name: </strong> {$name} </p>
                      <p><strong>Email Address: </strong> {$email} </p>
                      <p><strong>Phone Number: </strong> {$phone} </p>
                      <p><strong>Legal Issue: </strong> {$legal} </p>
                      <p><strong>Classification: </strong> {} </p>
                      <p><strong>Preferred Appointment Day(s): </strong> {$dayz} </p>
                      <p><strong>Preferred APpointment Time(s): </strong> {$timez} </p>                   

                      <p>This message was sent on {$date} at {$time}</p>";

        imap_mail("email@email.com","Title",$emailbody,$headers);
    }

    //what we need to return back to our form
    $returndata = array(
        'posted_form_data' => array(
            'name' => $name,
            'email' => $email,
            'timez' => $timez,
            'dayz' => $dayz
        ),
        'form_ok' => $formok,
        'errors' => $errors
    );

    //if this is not an ajax request
    if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){

        //set session variables
        session_start();
        $_SESSION['cf_returndata'] = $returndata;

        //redirect back to form
        header('location: ' . $_SERVER['HTTP_REFERER']);

    }

}

?> 
```

任何帮助都将不胜感激。这是我第一次在这里发帖，所以如果我没有遵循正确的协议，请告诉我，我会纠正的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:02:42.177

我猜这条线：

```
<p><strong>Preferred APpointment Time(s): </strong> {$timez} </p> 
```

只是返回数组。

您需要遍历此数组以获取选中的数组：

```
$timeAv = array();

foreach($timez as $time) {

    if(!empty($time)) {

        $timeAv[] = $time;

    }
}

$timeStr = implode(', ', $timeAv); 
```

这应该建立一个检查的时间数组，然后将它们添加到一个字符串中。我希望我理解正确 - 否则就是浪费了几行代码！

谢谢

# jsf - Primefaces & IE9 渲染问题

> ID：12303922
> 
> 赞同：2
> 
> 时间：2012-09-06T15:56:08.120
> 
> 标签：jsf, primefaces, internet-explorer-9

Primefaces 2.2.1 和 IE9 存在一些恼人的渲染问题。在某些 ajax 更新之后似乎有某种“两步渲染”。

1.  在第一步中，在没有应用适当的 css 的情况下呈现 ajax 更新的代码 - 这看起来很乱，如下所示：![第一步：丑](../Images/d738b7eade56336aecf2792b5ea18af4.png)

2.  在第二步中，应用了正确的 css，一切看起来都符合预期，如下所示：![在此处输入图像描述](../Images/dabad20cdf1dd5921b52ff064c4f82c9.png)

并不是所有的 ajax 更新都有这个渲染问题，但是我们很难弄清楚是什么触发了这个行为。

如果您有任何想法或提示，请告诉我，因为这真的很烦人和丑陋。

问候：吉米

# c# - 如何在 C# 中强制内联函数？

> ID：12303924
> 
> 赞同：31
> 
> 时间：2012-09-06T15:56:20.607
> 
> 标签：c#, .net

> **可能重复：**
> [C# 中的内联函数？](https://stackoverflow.com/questions/473782/inline-functions-in-c)

在 c++ 中，我们可以强制[函数内联](http://en.wikipedia.org/wiki/Inline_function)。

这在c#中也可以吗？有时，当方法很小时，它会自动内联。但是有可能在 c#/.Net 中强制内联函数吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-06T15:59:31.507

有点。*确定打开*不在您的直接控制之下。它从不在 IL 中内联 - 它仅由 JIT 完成。

您可以使用显式强制方法*不*被内联[`MethodImplAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimplattribute)

```
[MethodImpl(MethodImplOptions.NoInlining)]
public void Foo() { ... } 
```

从 .NET 4.5 开始，您还可以进行“请求”内联：

```
[MethodImpl(MethodImplOptions.AggressiveInlining)]
public void Foo() { ... } 
```

......但你不能强迫它。（在 .NET 4.5 之前，该枚举值不存在。例如，请参阅[.NET 4 文档](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions%28v=vs.100%29)。）

# c# - 如何将 linq 中的值解析为实体？

> ID：12303929
> 
> 赞同：0
> 
> 时间：2012-09-06T15:56:38.907
> 
> 标签：c#, entity-framework, types

我想做这样的事情：

```
var apps = from app in context.Apps
    where (platform == AppPlatform.All ||
    (app.Platform == sPlatform && new Version(app.PlatformVersion) <= version))&&
    (availability == AppAvailability.All || app.Availability == sAvailability)
    select app;
return apps.ToList(); 
```

该行`new Version(app.PlatformVersion) <= version))`导致错误：`Only parameterless constructors and initializers are supported in LINQ to Entities.`

基本上我需要的是让我的实体模型将 app.PlatformVersion 解析为一个新的 Version() 对象，而不是字符串，但我显然不能从我的 linq-to-entity 中做到这一点。我可以在实体模型级别执行此操作吗？我还有其他字段（字符串）我也想解析为类型（比如将字符串解析为枚举）。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:07:23.907

因为 EF 试图将 Linq 查询翻译成 SQL，并且没有办法翻译 Version 方法。因此，您可以先查询其他条件并将其存储在内存中，然后使用复杂的 Linq 查询从内存对象中查询。

从技术上讲，您可以做到这一点，（您绝对可以在性能方面做得更好）

```
var apps_temp = from app in context.Apps.All().ToList();

//this query will not be translated to SQL.
var apps = from app in apps_temp
    where (platform == AppPlatform.All ||
    (app.Platform == sPlatform && new Version(app.PlatformVersion) <= version))&&
    (availability == AppAvailability.All || app.Availability == sAvailability)
    select app;

return apps.ToList(); 
```

# android - 向 Google Play Android Developer API 发出 HTTP 发布请求

> ID：12303935
> 
> 赞同：3
> 
> 时间：2012-09-06T15:56:59.950
> 
> 标签：android, api, http-post, httprequest, google-play

我正在尝试授权 Google Play Android Developer API。我正处于需要发出 HTTP 发布请求以交换访问令牌和刷新令牌的授权代码的步骤。[Google](https://developers.google.com/accounts/docs/OAuth2InstalledApp)给出了以下示例请求：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/v6xr77ewYqhvHSyW6UJ1w7jKwAzu&
client_id=8819981768.apps.googleusercontent.com&
client_secret={client_secret}&
redirect_uri=https://oauth2-login-demo.appspot.com/code&
grant_type=authorization_code 
```

我很困惑...首先，对于已安装的应用程序（Android），没有给出 client_secret。我在 Google API 控制台中为同一个项目创建了一个 Web 应用程序，这给了我一个 client_secret，所以我使用了它，即使没有 Web 应用程序。以下代码给了我一个“invalid_grant”错误：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("https://accounts.google.com/o/oauth2/token");

try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
    nameValuePairs.add(new BasicNameValuePair("code", "CODE"));
    nameValuePairs.add(new BasicNameValuePair("client_id", "CLIENT_ID"));
    nameValuePairs.add(new BasicNameValuePair("client_secret", "CLIENT_SECRET"));
    nameValuePairs.add(new BasicNameValuePair("redirect_uri", "urn:ietf:wg:oauth:2.0:oob"));
    nameValuePairs.add(new BasicNameValuePair("grant_type", "authorization_code"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = httpclient.execute(httppost);
    .... 
```

完全取出 client_secret 给了我一个“invalid_request”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:12:12.263

这就是我解决它的方法。我最终使用了 Web Applcation。在我的回复中查看更多详细[信息](https://stackoverflow.com/questions/12427479/am-i-getting-the-steps-right-for-verifying-a-users-android-in-app-subscription)。

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
nameValuePairs.add(new BasicNameValuePair("grant_type",    "refresh_token"));
nameValuePairs.add(new BasicNameValuePair("client_id",      CLIENT_ID));
nameValuePairs.add(new BasicNameValuePair("client_secret",  CLIENT_SECRET));
nameValuePairs.add(new BasicNameValuePair("refresh_token",  REFRESH_TOKEN));
post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = client.execute(post); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:39:17.400

我已经设法在没有Web应用程序帮助的情况下从android应用程序兑换访问令牌的访问代码，方法**是简单地消除client_secret密钥**，因为它不适用于已安装的应用程序。

```
HttpPost httppost = new HttpPost("https://accounts.google.com/o/oauth2/token");
httppost.setHeader("Content-type", "application/x-www-form-urlencoded");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
nameValuePairs.add(new BasicNameValuePair("grant_type",    "authorization_code"));
nameValuePairs.add(new BasicNameValuePair("client_id",      BLOGGER_CLIENT_ID));
nameValuePairs.add(new BasicNameValuePair("redirect_uri",  "http://localhost"));
nameValuePairs.add(new BasicNameValuePair("code", BLOGGER_ACCESS_CODE));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpClient httpClient = new DefaultHttpClient(myParams);
response = httpClient.execute(httppost);
String returnedJsonStr = EntityUtils.toString(response.getEntity());
JSONObject jsonObject = new JSONObject(returnedJsonStr);
String receivedToken = jsonObject.getString("access_token"); 
```

发表此评论的原因是，您的解决方案可能会误导那些可能认为在移动应用程序中获取访问令牌的唯一方法是通过网络应用程序的人，这是我在几分钟前阅读您的帖子后想到的！

为避免 invalid_grant 错误，请遵循以下代码： [https ://stackoverflow.com/a/14141020/989418](https://stackoverflow.com/a/14141020/989418)

# wpf - 如何在 UserControl 中设置与 Combox 的绑定？

> ID：12303937
> 
> 赞同：2
> 
> 时间：2012-09-06T15:57:01.977
> 
> 标签：wpf, binding

我在这个问题上花了几天时间，似乎无法让它发挥作用。

我有一个用户控件，它使用以下代码保存到 xaml 文件中：

```
 StringBuilder outstr = new StringBuilder();
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.OmitXmlDeclaration = true;

        XamlDesignerSerializationManager dsm = new 
        XamlDesignerSerializationManager(XmlWriter.Create(outstr, settings));
        dsm.XamlWriterMode = XamlWriterMode.Expression;

        System.Windows.Markup.XamlWriter.Save(test1, dsm);

        String saveCard = outstr.ToString();

        File.WriteAllText("inputEnum.xaml", saveCard); 
```

用于用户控件的 Xaml：

```
<Grid >
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="{Binding DescriptionWidth}" />
        <ColumnDefinition Width="{Binding ValueWidth}" />
    </Grid.ColumnDefinitions>

    <ComboBox Grid.Column="1" Background="White" FontSize="{Binding FontSizeValue}" Width="Auto" 
              Padding="10,0,5,0" ItemsSource="{Binding ComboItemsProperty}" SelectedIndex="{Binding EnumSelectedIndex}">

    </ComboBox>
</Grid> 
```

组合框中的 ItemsSource 给我带来了问题。当我将此用户控件的实例保存到文件中时，据我了解，{Binding ComboItemsProperty} 丢失了。所以，在我的用户控件的构造函数中，我有：

```
public UserInputEnum()
{
     InitializeComponent();

     Binding bind = new Binding();
     bind.Mode = BindingMode.TwoWay;
     bind.Source = this;
     bind.Path = new PropertyPath("ComboItemsProperty");
     this.SetBinding(ComboBox.ItemsSourceProperty, bind);
} 
```

这是我的财产和更改的方法：

```
 EnumItemsCollection ComboItems = new EnumItemsCollection();
    public EnumItemsCollection ComboItemsProperty
    {
        get { return ComboItems; }
        set 
        { 
            ComboItems = value;
            OnPropertyChanged("ComboItemsProperty"); 
        }
    }
    public void OnPropertyChanged(string propertyName)
    {
        getEnumItems(this.ComboItemsProperty, this.EnumSelectedIndex, this.ID, this.SubmodeID);
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this.ComboItems, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

只是一个注释。EnumItemsCollection 是一个简单的类，它继承了 ObservableCollection。这门课没有别的了。（不确定这是否有所作为）。

我认为这应该可以，但是当我通过 XAMLReader 加载 XAML 文件时，我的组合框项目不会更新。

编辑：

我对不是从 XAML 加载但位于 MainWindow.xaml 中的用户控件实例运行了一个小测试。

一切正常。当我添加到 ComboItemsProperty 时，组合框会更新。

所以，我拿走了 {Binding ComboItemsProperty} 并尝试在上面的代码中设置绑定，将“this”更改为用户控件的实例。没用。这告诉我绑定代码无法正常运行。

我相当确定问题是 bind.Source 行。当它在 UserControl 中时，我不确定该放什么。

编辑：

从文件加载用户控件的代码：

```
FileStream stream = File.Open("usercontrol.xaml", FileMode.Open, FileAccess.Read);
ComboBox cmb = System.Windows.Markup.XamlReader.Load(stream) as ComboBox; 
```

它加载得很好。绑定不起作用（ItemsSource={Binding ComboItemsProperty}），因为绑定没有保存。

我从一个文件中加载它，因为这个程序在某种意义上会有很多用户界面。每一个都将由不同的人使用该程序加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:42:39.207

您需要设置包含您的属性**ComboItemsProperty**的实例的上下文。`this.DataContext`因此，您应该将其设置为或其他包含您定义的 ItemSource 属性的类对象实例，而不是“this” 。

尝试这个，

```
Binding bind = new Binding();  
bind.Mode = BindingMode.TwoWay;  
bind.Source = this.DataContext;  
bind.Path = new PropertyPath("ComboItemsProperty");  
this.SetBinding(ComboBox.ItemsSourceProperty, bind); 
```

## 更新

根据msdn 上可用 [的 XamlWriter.Save 的序列化限制，](http://msdn.microsoft.com/en-us/library/ms754193)

*   原始 XAML 文件的许多设计时属性在 XAML 作为内存对象加载时可能已经优化或丢失，并且在调用 Save 进行序列化时不会保留。
*   由各种标记扩展格式（例如`StaticResource`or `Binding`）生成的对对象的公共引用将被序列化过程取消引用。

**结论**`Serialization - Deserialization`，我现在得出的结论是，您不能通过程序直接加载整个 UserControl `XAML`。`Serialization - Deserialization`我认为您可以通过 UserControl上的过程加载对象实例，`DataContext`即您具有数据绑定的自定义列表或对象。

# c - 这个数组是静态的还是动态的？

> ID：12303944
> 
> 赞同：4
> 
> 时间：2012-09-06T15:57:39.547
> 
> 标签：c, arrays, dynamic, static, malloc

所以我正在研究内存分配，它说你只能使用 malloc() 动态分配内存；但这不是动态内存分配吗？顺便说一句。所以我有点困惑。

```
#include<stdio.h>
#include<conio.h>
int main()
{
    int integer,cntr;
    scanf("%d",&integer);
    char words[integer];
    for(cntr = 0;cntr < integer - 1;cntr++)
        words[cntr] = 'k';
    words[cntr] = '\0';
    printf("%s",words);
    getch();
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:59:10.920

那是一个[变长数组](http://en.wikipedia.org/wiki/Variable-length_array)。大小确实是动态的，但实际上它通常会分配在堆栈而不是堆上（所以不要将它用于太大的东西）。

根据您的编译器等，这可能最终会比分配堆内存快得多，只不过是堆栈指针的调整。

可变长度数组是在 C99 标准中引入的，因此请记住，您将无法在非常旧的 C 编译器（例如 MSVC）中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:59:03.570

该数组是一个***本地数组***，一旦定义它的作用域( , ) 结束，它将***自动释放。*** 从技术上讲，该标准没有定义它应该分配到哪里，而只定义了这样一个数组必须提供的特性。该标准甚至没有提到堆栈或堆。： `{``}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:58:48.343

*这是静态的，因为数组是在堆栈*上分配的，而不是在*堆上*。

它不是由内存管理器分配的，它只是保留在堆栈上，仅此而已。一旦超出范围，它就会不复存在（从某种意义上说，使用它会提供垃圾）。

请注意，由于堆栈是有限的，您将无法以这种方式分配这么大的数组。

# solr - 如果我们要使用 Hadoop 和 Solr 制作搜索引擎，NUTCH 的作用是什么？

> ID：12303946
> 
> 赞同：3
> 
> 时间：2012-09-06T15:57:49.703
> 
> 标签：solr, hadoop, nutch

我想做一个搜索引擎。我想在其中抓取一些站点并将它们的索引和信息存储在 Hadoop 中。然后使用 Solr 搜索将完成。但我面临很多问题。如果通过 google 搜索，那么不同的人会给出不同的建议和不同的配置方式来设置基于 hadoop 的搜索引擎。这些是我的一些问题：

1）如何爬行？有没有使用 NUTCH 来完成爬行？如果是，那么 Hadoop 和 NUTCH 如何相互通信？

2) Solr 有什么用？如果 NUTCH 完成了爬取，并将爬取的索引和信息存储到 Hadoop 中，那么 Solr 的作用是什么？

3) 我们可以使用 Solr 和 Nutch 进行搜索吗？如果是，那么他们会将抓取的索引保存在哪里？

4) Solr 如何与 Hadoop 通信？

5）如果可能的话，请一一解释我如何抓取一些网站并将它们的信息保存到数据库（Hadoop或任何其他）中，然后进行搜索。

我真的很坚持这一点。任何帮助将不胜感激。

非常感谢提前。:)

请帮我解决我的大问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:54:00.290

我们使用 Nutch 作为网络爬虫，使用 Solr 在一些生产环境中进行搜索。所以我希望我能给你一些关于3）的信息。

这是如何运作的？Nutch 有自己的爬行数据库和一些开始爬行的网站。它有一些插件，您可以在其中配置不同的东西，例如 pdf 抓取，哪些字段将从 html 站点中提取等等。在抓取 Nutch 时，会存储从网站中提取的所有链接，并将在下一个周期中跟踪它们。所有爬取结果都将存储在爬取数据库中。在 Nutch 中，您配置了一个间隔，其中爬取的结果将过时，并且爬虫从定义的起始点开始。

爬取数据库中的结果将同步到 solr 索引。因此，您正在搜索 solr 索引。Nutch 只是为了从网站获取数据并将其提供给 solr。

# xcode - 哪个版本的 Xcode 与 OS X Lion 10.7.1 兼容？

> ID：12303947
> 
> 赞同：0
> 
> 时间：2012-09-06T15:57:50.383
> 
> 标签：xcode, osx-lion

我购买了一台装有 Mac OS X Lion 10.7.1 的 Mac 笔记本电脑。现在我想开发 iPhone 应用程序，所以我想知道它支持哪个具有情节提要功能的 Xcode 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:59:06.750

只需从[App Store](http://itunes.apple.com/hu/app/xcode/id497799835?mt=12)获取最新版本。它支持故事板并与 Lion 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:10:33.910

[如果您必须留在 Lion 10.7.1，请尝试此处](https://developer.apple.com/downloads/index.action?name=Xcode%204%2E2)提供的第一个 Lion 开发者工具版本（Xcode 4.2 或 4.2.1）

# eclipse - 用于开发 RESTful Web 服务的 Eclipse 插件

> ID：12303950
> 
> 赞同：4
> 
> 时间：2012-09-06T15:57:59.360
> 
> 标签：eclipse, rest, plugins, service, web

我正在寻找一个 Eclipse 插件，它可以让使用 JAX-RX 更轻松、更快地编写 RESTful Web 服务，最好是一个可以从给定数据库生成代码的插件。NetBeans 可以从数据库、实体类或模式自动创建 RESTful Web 服务，我正在 Eclipse 中寻找类似的东西。

到目前为止，我只知道 Glassfish 附带的一个向导可以从模式创建 Web 服务。

任何帮助表示赞赏，谢谢。

# r - 行的条件插入

> ID：12303954
> 
> 赞同：2
> 
> 时间：2012-09-06T15:58:10.060
> 
> 标签：r, insert, formatting, rows, genetics

我有一个独特的数据集，其中一部分可以使用以下方法复制：

```
data <- textConnection("SNP_Pres,Chr_N,BP_A1F,A1_Beta,A2_SE,ForSortSNP,SortOrder
rs122,13,100461219,C,T,rs122,6
1,16362,0.8701,-0.0048,0.0056,rs122,7
1,19509,0.546015137607046,-0.0033,0.0035,rs122,8
1,17218,0.1539,-0.004,0.013,rs122,9
rs142,13,61952115,G,T,rs142,6
1,16387,0.1295,0.0044,0.0057,rs142,7
1,17218,0.8454,0.006,0.013,rs142,9
rs160,13,100950452,C,T,rs160,6
1,16387,0.549,-0.0021,0.0035,rs160,7
1,19509,0.519102731537216,0.003,0.0027,rs160,8
rs298,13,66664221,C,G,rs298,6
1,19509,0.308290808358246,-0.0032,0.0033,rs298,8
1,17218,0.7227,0.022,0.01,rs298,9")
mydata <- read.csv(data, header = T, sep = ",", stringsAsFactors=FALSE) 
```

它被格式化用于需要为丢失的数据条目保留点的程序中使用。在这种情况下，缺少的条目由`Sort Order`列中的数字跳过指示。如果列下降 6 - 7 - 8 - 9，则条目完成，新条目再次以 6 开头。

我需要一种方法来读取数据文件，并为每个缺失的条目插入一行零，以便文件如下所示：

```
data <- textConnection("SNP_Pres,Chr_N,BP_A1F,A1_Beta,A2_SE,ForSortSNP,SortOrder
rs122,13,100461219,C,T,rs122,6
1,16362,0.8701,-0.0048,0.0056,rs122,7
1,19509,0.546015137607046,-0.0033,0.0035,rs122,8
1,17218,0.1539,-0.004,0.013,rs122,9
rs142,13,61952115,G,T,rs142,6
1,16387,0.1295,0.0044,0.0057,rs142,7
0,0,0,0,0,rs142,8
1,17218,0.8454,0.006,0.013,rs142,9
rs160,13,100950452,C,T,rs160,6
1,16387,0.549,-0.0021,0.0035,rs160,7
1,19509,0.519102731537216,0.003,0.0027,rs160,8
0,0,0,0,0,rs160,9
rs298,13,66664221,C,G,rs298,6
0,0,0,0,0,rs289, 7
1,19509,0.308290808358246,-0.0032,0.0033,rs298,8
1,17218,0.7227,0.022,0.01,rs298,9")
mydata <- read.csv(data, header = T, sep = ",", stringsAsFactors=FALSE) 
```

最终，最后两列`ForSortSNP`和`SortOrder`将从数据文件中删除，但为了方便起见，现在将它们包括在内。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:56:50.770

这是使用`expand.grid`and`merge`函数的解决方案。

```
grid <- with(mydata, expand.grid(ForSortSNP=unique(ForSortSNP), SortOrder=unique(SortOrder)))
complete <- merge(mydata, grid, all=TRUE, sort=FALSE)
complete[is.na(complete)] <- 0 # replace NAs with 0's
complete <- complete[order(complete$ForSortSNP, complete$SortOrder), ] # re-sort 
```

# .htaccess - 使用 mod_rewrite 清理 url

> ID：12303957
> 
> 赞同：0
> 
> 时间：2012-09-06T15:58:11.417
> 
> 标签：.htaccess, url, mod-rewrite

我在 stackoverflow 上找到了几个关于 mod_rewrite 的主题，但没有一个能解决我的问题。我还尝试了这个网站上的教程[http://edrackham.com/apache/beginners-mod_rewrite-tutorial/](http://edrackham.com/apache/beginners-mod_rewrite-tutorial/) 我一直在尝试使用 mod_rewrite 来获取干净的 url。例如：

```
 www.myweb.com/itemdetail.php?itemid=111234 
```

至

```
 www.myweb.com/itemdetail/111234 or 
  www.myweb.com/itemdetail/iphone 
```

这是我的 .htaccess 文件内容。

```
 RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-d 
   RewriteCond %{REQUEST_FILENAME} !-f 
   RewriteCond %(REQUEST_FILENAME) !-l
   RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

正如stackoverflow中所建议的，我在上面的文件中添加了以下重写

```
 RewriteRule ^itemdetail/([0-9]+)/$ itemdetail.php?itemid=$1 [NC,L] 
```

但这并没有解决我的问题。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:04:40.433

在某些服务器上，您不能在 RewriteRule 中使用斜杠（我有同样的问题）。要检查这一点，请尝试以下作为您的 htaccess 文件：

```
 RewriteEngine on
    RewriteRule ^itemdetail-([0-9]+)/?$ itemdetail.php?itemid=$1 

```

**编辑：** 当然你的永久链接是 www.myweb.com/itemdetail-111234

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:07:14.880

您应该使最后一个斜杠可选：

```
RewriteRule ^itemdetail/([0-9]+)/?$ itemdetail.php?itemid=$1 [NC,L] 
```

# arrays - 复制 Bash 数组失败

> ID：12303974
> 
> 赞同：43
> 
> 时间：2012-09-06T15:59:10.793
> 
> 标签：arrays, bash

在 Bash 脚本中将数组分配给变量似乎相当复杂：

```
a=("a" "b" "c")
b=$a

echo ${a[0]} 
echo ${a[1]}

echo ${b[0]} 
echo ${b[1]} 
```

导致

```
a 
b 
a 
```

代替

```
a
b
a
b 
```

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-06T16:01:17.050

如果要将包含数组的变量*复制到另一个名称，请执行以下操作：*

```
a=('a' 'b' 'c')
b=( "${a[@]}" ) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-08-07T05:22:51.147

## 为什么？

如果`a`是一个数组，则`$a`展开到数组中的第一个元素。这就是为什么`b`在您的示例中只有一个值。在 bash 中，引用数组的变量不能像 C++ 或 Java 中的指针那样赋值。相反，变量*扩展*（如在参数扩展中）为字符串，这些字符串被复制并与被分配的变量相关联。

## 我该如何解决？

要复制包含带空格的值的稀疏数组，必须通过索引一次复制一个元素 - 可以使用 ${!a[@]} 获得。

```
declare -a b=()
for i in ${!a[@]}; do
    b[$i]="${a[$i]}"
done 
```

从 bash 手册页：

> 可以获得数组的键（索引）以及值。${!name[@]} 和 ${!name[*]} 扩展为数组变量名中分配的索引。双引号中的处理类似于特殊参数@和*在双引号中的扩展。

这是一个您可以自己测试的脚本：

```
#!/bin/bash

declare -a a=();
a[1]='red hat'
a[3]='fedora core'

declare -a b=();

# Copy method that works for sparse arrays with spaces in the values.
for i in ${!a[@]}; do
    b[$i]="${a[$i]}"
done

# does not work, but as LeVar Burton says ...
#b=("${a[@]}")

echo a indicies: ${!a[@]}
echo b indicies: ${!b[@]}

echo "values in b:"
for u in "${b[@]}"; do
    echo $u
done 
```

印刷：

```
a indicies: 1 3
b indicies: 1 3  # or 0 1 with line uncommented
values in b:
red hat
fedora core 
```

这也适用于 bash 4 中的关联数组，如果您`declare -A`在声明数组时使用（使用大写 A 而不是小写）。

# php - 防止在学说 2 侦听器中删除实体

> ID：12303975
> 
> 赞同：1
> 
> 时间：2012-09-06T15:59:15.347
> 
> 标签：php, doctrine-orm

我需要让实体改变状态，除了被删除。对于那些我为 on flush 方法添加了一个监听器。所以，我可以看到所有被删除的实体，但不能阻止它们被删除。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T06:35:48.563

在事件处理程序中抛出异常会切断事务并回滚更改。

```
public function onFlush(OnFlushEventArgs $eventArgs)
{
    $em = $eventArgs->getEntityManager();
    $uow = $em->getUnitOfWork();

    foreach ($uow->getScheduledCollectionDeletions() AS $col) {
         throw new Exception('avoid delete');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:30:51.623

只需安装学说扩展[https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)或以它为示例来开发您自己的解决方案

# android - Phonegap Cordova 2.0.0 全新安装 Hello World 错误

> ID：12303976
> 
> 赞同：1
> 
> 时间：2012-09-06T15:59:28.207
> 
> 标签：android, cordova

我已经下载了 Phonegap/Cordova 的新副本，以了解为什么我的应用程序不断抛出一些错误。

我遵循了 Phonegap 的“入门”，最终在我的设备上运行了 Hello World（带有 Android 2.3.3 的 HTC DesireHD）。

所以这个应用程序什么也不做，只是在设备上打印 hello world。

该应用程序运行良好，但是我在日志中收到了一些令人不快的错误消息：

具体来说：

> 09-06 17:26:31.487: E/dalvikvm(32594): 找不到类 'android.webkit.WebResourceResponse'，引用自方法 org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse 09-06 17:26:31.487: W /dalvikvm(32594): VFY: 无法解析 Lorg/apache/cordova/CordovaWebViewClient 中的新实例 452 (Landroid/webkit/WebResourceResponse;)；

然后我会重复其他相关错误。

我重申该应用程序有效，但我真的不希望在日志中看到任何错误:-)

其他人提到这可能是由于我的 libs 文件夹的名称（它正确命名为 libs 与`"s"`）

我在下面附上了我的`AndroidManifest.xml`、我`MainActivity.java`的和完整的`LogCat`。

我正在使用 Win7、Eclipse 3.8。

非常感谢您的帮助。

**AndroidManifest.xml：**

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.qwentes.phonegaptest" android:versionCode="1" android:versionName="1.0">
        <uses-sdk android:minSdkVersion="9" android:targetSdkVersion="15" />
        <supports-screens  android:largeScreens="true" android:normalScreens="true" android:smallScreens="true" android:resizeable="true" android:anyDensity="true" />
        <uses-permission android:name="android.permission.VIBRATE" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
        <uses-permission android:name="android.permission.READ_PHONE_STATE" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.RECEIVE_SMS" />
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
        <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
        <uses-permission android:name="android.permission.READ_CONTACTS" />
        <uses-permission android:name="android.permission.WRITE_CONTACTS" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.GET_ACCOUNTS" />
        <uses-permission android:name="android.permission.BROADCAST_STICKY" />
        <application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/AppTheme">
            <activity android:name=".MainActivity" android:label="@string/title_activity_main" android:configChanges="orientation|keyboardHidden">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    </manifest> 
```

**MainActivity.java**

```
 package com.qwentes.phonegaptest;

    import android.os.Bundle;
    import org.apache.cordova.*;

    public class MainActivity extends DroidGap {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");
        }

    } 
```

**日志猫.txt**

```
 09-06 17:26:29.265: I/dalvikvm(32594): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
    09-06 17:26:29.265: W/dalvikvm(32594): VFY: unable to resolve direct method 3117: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    09-06 17:26:29.265: D/dalvikvm(32594): VFY: replacing opcode 0x70 at 0x0001
    09-06 17:26:29.265: D/dalvikvm(32594): VFY: dead code 0x0004-0059 in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    09-06 17:26:29.705: D/Database(32594): dbopen(): path = /data/data/com.qwentes.phonegaptest/databases/webview.db, flag = 6, cannot stat file, errno: 2,message: No such file or directory
    09-06 17:26:29.705: D/Database(32594): dbopen(): path = /data/data/com.qwentes.phonegaptest/databases/webview.db, mode: delete, disk free size: 554 M, handle: 0x34d960
    09-06 17:26:30.606: V/webviewdatabase(32594): TCP pre connection: creating table in database
    09-06 17:26:30.897: D/Database(32594): dbopen(): path = /data/data/com.qwentes.phonegaptest/databases/webviewCache.db, flag = 6, cannot stat file, errno: 2,message: No such file or directory
    09-06 17:26:30.897: D/Database(32594): dbopen(): path = /data/data/com.qwentes.phonegaptest/databases/webviewCache.db, mode: delete, disk free size: 554 M, handle: 0x372128
    09-06 17:26:31.467: D/skia(32594): htcFlashPlugin::htcFlashPlugin
    09-06 17:26:31.477: D/qct(32594): [WebView.WebView] >> Enable Shutdown = true
    09-06 17:26:31.477: I/CordovaLog(32594): Changing log level to DEBUG(3)
    09-06 17:26:31.477: I/CordovaLog(32594): Found preference for useBrowserHistory=false
    09-06 17:26:31.477: D/CordovaLog(32594): Found preference for useBrowserHistory=false
    09-06 17:26:31.487: E/dalvikvm(32594): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse
    09-06 17:26:31.487: W/dalvikvm(32594): VFY: unable to resolve new-instance 452 (Landroid/webkit/WebResourceResponse;) in Lorg/apache/cordova/CordovaWebViewClient;
    09-06 17:26:31.487: D/dalvikvm(32594): VFY: replacing opcode 0x22 at 0x0046
    09-06 17:26:31.487: W/dalvikvm(32594): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    09-06 17:26:31.487: D/dalvikvm(32594): VFY: dead code 0x0048-004c in Lorg/apache/cordova/CordovaWebViewClient;.generateWebResourceResponse (Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    09-06 17:26:31.527: W/dalvikvm(32594): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    09-06 17:26:31.527: W/dalvikvm(32594): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    09-06 17:26:31.527: I/dalvikvm(32594): Could not find method android.webkit.WebViewClient.shouldInterceptRequest, referenced from method org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest
    09-06 17:26:31.527: W/dalvikvm(32594): VFY: unable to resolve virtual method 3129: Landroid/webkit/WebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    09-06 17:26:31.527: D/dalvikvm(32594): VFY: replacing opcode 0x6f at 0x0015
    09-06 17:26:31.527: D/dalvikvm(32594): VFY: dead code 0x0018-0019 in Lorg/apache/cordova/CordovaWebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    09-06 17:26:31.527: D/DroidGap(32594): DroidGap.init()
    09-06 17:26:31.547: D/CordovaWebView(32594): >>> loadUrl(file:///android_asset/www/index.html)
    09-06 17:26:31.547: D/PluginManager(32594): init()
    09-06 17:26:31.547: D/CordovaWebView(32594): >>> loadUrlNow()
    09-06 17:26:31.587: D/ATRecorder(32594): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4053e810
    09-06 17:26:31.597: D/WindowManagerImpl(32594): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@4053ada8
    09-06 17:26:31.597: D/SoftKeyboardDetect(32594): Ignore this event
    09-06 17:26:31.687: W/webcore(32594): Not supported in this case.
    09-06 17:26:31.687: D/SoftKeyboardDetect(32594): Ignore this event
    09-06 17:26:31.817: D/qct(32594): [RequestQueue.ActivePool.ActivePool] >> Enable Shutdown = true
    09-06 17:26:31.817: D/qct(32594): [IdleCache.IdleCache] >> IDLE_CACHE_MAX = 40
    09-06 17:26:32.418: D/DroidGap(32594): onMessage(onPageStarted,file:///android_asset/www/index.html)
    09-06 17:26:32.558: D/szipinf(32594): Initializing inflate state
    09-06 17:26:32.558: D/szipinf(32594): Initializing zlib to inflate
    09-06 17:26:32.618: D/webkit-timers(32594): [JWebCoreJavaBridge::resume] >> do resume
    09-06 17:26:32.738: D/dalvikvm(32594): GC_CONCURRENT freed 134K, 44% free 3208K/5639K, external 0K/0K, paused 2ms+20ms
    09-06 17:26:33.729: D/Cordova(32594): onPageFinished(file:///android_asset/www/index.html)
    09-06 17:26:33.729: D/CordovaWebView(32594): >>> loadUrlNow()
    09-06 17:26:33.729: D/DroidGap(32594): onMessage(onNativeReady,null)
    09-06 17:26:33.729: D/DroidGap(32594): onMessage(onPageFinished,file:///android_asset/www/index.html)
    09-06 17:26:34.030: I/Database(32594): sqlite returned: error code = 14, msg = cannot open file at line 27206 of [42537b6056]
    09-06 17:26:34.190: D/DroidGap(32594): onMessage(networkconnection,wifi)
    09-06 17:26:34.230: D/DroidGap(32594): onMessage(spinner,stop)
    09-06 17:26:35.741: D/DroidGap(32594): onMessage(spinner,stop)
    09-06 17:26:44.430: D/dalvikvm(32594): GC_CONCURRENT freed 376K, 46% free 3284K/6023K, external 0K/0K, paused 2ms+3ms
    09-06 17:27:34.619: D/dalvikvm(32594): GC_FOR_MALLOC freed 586K, 50% free 3133K/6151K, external 0K/0K, paused 43ms
    09-06 17:28:04.808: D/dalvikvm(32594): GC_CONCURRENT freed 357K, 48% free 3208K/6151K, external 0K/0K, paused 6ms+3ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:38:58.160

对于 2.0.0 中的那些讨厌的日志，您无能为力，但它们会在 2.1.0 中消失，而 2.1.0 应该会在一周内发布。它们由此提交修复：

[https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=commit;h=07439ff99ca5f61c444ae7673d9fec96e4502492](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=commit;h=07439ff99ca5f61c444ae7673d9fec96e4502492)

# sql - 可能的递归或分析查询。这可以通过 SQL 完成还是需要脚本？

> ID：12303980
> 
> 赞同：3
> 
> 时间：2012-09-06T15:59:33.733
> 
> 标签：sql, oracle, oracle11g

不确定这是否可能通过标准查询，但这是我希望我的数据的方式。

```
START    END    SETTLE    NEW_SETTLE    CORRECTION_FACT    STORED_SETTLE
1        2      120       NULL          1                  120
2        3      127       119           1.0084             128.0668
3        4      NULL      125           1.0245344          NULL 
```

计算如下：

```
CORRECTION_FACT 
```

基本上，如果 NEW SETTLE 为空或这是第 1 行，则校正因子始终为 1。如果行 > 1，则校正因子为`PREV ROW STORED_SETTLE / NEW_SETTLE` 例如。120/119

```
STORED_SETTLE 
```

这将始终是`CORRECTION_FACTOR`* `SETTLE`。在插入下一行之前，该值是未知的，因此有时它会为 NULL。棘手的部分是，这取决于`CORRECTION_FACT`which 也是计算值并且`CORRECTION_FACT`取决于`STORED_SETTLE`.

就我所拥有的价值观而言，我拥有`SETTLE, NEW_SETTLE, START`和`END`。 `CORRECTION_FACT`并且`STORED_SETTLE`总是需要计算。

所以这里的问题是我可以使用某种递归查询或分析函数来做到这一点，还是我必须编写一个脚本来填充？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:59:13.300

```
with T1 as
  (select 1 strt, 2 en, 120  settle, null new_settle from dual union all
   select 2 strt, 3 en, 127  settle, 119  new_settle from dual union all
   select 3 strt, 4 en, null settle, 125  new_settle from dual
  )
select strt
     , en
     , settle
     , new_settle
     , correction_fact
     , stored_settle 
  from t1
  model
   dimension by(row_number() over (order by strt) RowNumber)
   measures(strt, en, settle, new_settle
          , cast(null as number) correction_fact
          , cast(null as number) stored_settle)
   rules automatic order
   (
     correction_fact[1]=1,
     correction_fact[RowNumber>1] = decode(new_settle[cv()], null,
                  1,stored_settle[cv()-1]/new_settle[cv()]),                           
     stored_settle[rownumber]=(correction_fact[cv()]*settle[cv()])
   ); 
```

结果：

```
 STRT         EN     SETTLE NEW_SETTLE CORRECTION_FACT STORED_SETTLE
---------- ---------- ---------- ---------- --------------- -------------
     1          2        120                          1           120
     2          3        127        119      1.00840336    128.067227
     3          4                   125      1.02453782 
```

# openerp - 如何定义在 OpenERP 中单击树视图行时发生的操作？

> ID：12303984
> 
> 赞同：2
> 
> 时间：2012-09-06T15:59:40.107
> 
> 标签：openerp

我无法弄清楚如何定义单击 OpenERP 树视图中的一行时发生的操作。我创建了一个自定义树视图来显示产品供应商 (product.supplierinfo)。理想情况下，我想打开 product.product 对象的表单视图，其中供应商选项卡处于活动状态，而不是 product.supplierinfo 对象的视图（就像现在一样）。这可能吗？至少我想打开一个弹出窗口，其中包含供应商信息的视图以及指向父产品的链接。

供应商信息视图（default_code、manuf_name 和 manuf_code 都是添加到 product.supplierinfo 模型中的自定义字段）：

```
<record id="product_suppliers_tree_view" model="ir.ui.view">
  <field name="name">product.suppliers.tree.view</field>
  <field name="model">product.supplierinfo</field>
  <field name="type">tree</field>
  <field name="priority">16</field>
  <field name="arch" type="xml">
    <tree string="Product Suppliers">
      <field name="default_code"/>
      <field name="product_id"/>
      <field name="name"/>
      <field name="product_code"/>
      <field name="manuf_name"/>
      <field name="manuf_code"/>
    </tree>
  </field>
</record> 
```

供应商信息操作：

```
<record id="product_suppliers_action" model="ir.actions.act_window">
  <field name="name">Product Suppliers</field>
  <field name="type">ir.actions.act_window</field>
  <field name="res_model">product.supplierinfo</field>
  <field name="view_type">form</field>
  <field name="view_mode">tree,form</field>
  <field name="view_id" ref="product_suppliers_tree_view"/>
  <field name="help">Here you can search for products by supplier information, including supplier and manufacturer name and part number. Each product can have one or more supplier sources.</field>
</record> 
```

# http - 在这种情况下我应该使用 PUT 还是 POST？

> ID：12303986
> 
> 赞同：3
> 
> 时间：2012-09-06T15:59:43.567
> 
> 标签：http, rest

服务器端服务正在填充数据库。我从我的应用程序发送一个 http 请求，其中包含文档中的一些元数据信息，我希望服务器端服务为此文档生成一个唯一的 uuid，并使用 doc uuid 和元数据填充数据库并将 uuid 发送回给我。在这种情况下，客户端应该执行 PUT 请求还是 POST。我只想要一个文档元数据的记录和为其生成的 uuid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:03:12.010

PUT 通常用于覆盖和替换或创建资源。

我认为这就是你应该在这里使用的。例如：

```
PUT /document/ HTTP/1.1
Host: example.com 
```

并让它返回文档的 UUID 和元数据。

并引用另一个[SO 问题](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)：

> 我认为 PUT 是幂等的这一事实再怎么强调也不为过：如果网络出现问题并且客户端不确定他的请求是否通过，它可以只发送第二次（或第 100 次），并且由HTTP 规范，这与发送一次具有完全相同的效果。

# javascript - JavaScript中多个数组的笛卡尔积

> ID：12303989
> 
> 赞同：147
> 
> 时间：2012-09-06T15:59:56.847
> 
> 标签：javascript, arrays, algorithm, cartesian-product

你将如何在 JavaScript 中实现多个数组的笛卡尔积？

举个例子，

```
cartesian([1, 2], [10, 20], [100, 200, 300]) 
```

应该返回

```
[
  [1, 10, 100],
  [1, 10, 200],
  [1, 10, 300],
  [2, 10, 100],
  [2, 10, 200]
  ...
] 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2017-03-27T18:23:58.123

# 2020 年更新：使用香草 JS 的 1 行 (！) 答案

**2017 年原始答案：香草 JS 的 2 行答案：（** *请参阅下面的更新）*

这里的所有答案都**过于复杂**，大部分都需要 20 行代码甚至更多。

这个例子只使用了**两行 vanilla JavaScript**，没有 lodash、underscore 或其他库：

```
let f = (a, b) => [].concat(...a.map(a => b.map(b => [].concat(a, b))));
let cartesian = (a, b, ...c) => b ? cartesian(f(a, b), ...c) : a; 
```

### 更新：

这与上述相同，但经过改进以严格遵循[Airbnb JavaScript 样式指南](http://airbnb.io/javascript/)- 使用[ESLint](http://eslint.org/)和[eslint-config-airbnb-base 进行](https://www.npmjs.com/package/eslint-config-airbnb-base)验证：

```
const f = (a, b) => [].concat(...a.map(d => b.map(e => [].concat(d, e))));
const cartesian = (a, b, ...c) => (b ? cartesian(f(a, b), ...c) : a); 
```

特别感谢**ZuBB**让我知道原始代码的 linter 问题。

### 2020 年更新：

由于我写了这个答案，我们得到了更好的内置函数，这最终可以让我们将代码减少（不是双关语）只有 1 行！

```
const cartesian =
  (...a) => a.reduce((a, b) => a.flatMap(d => b.map(e => [d, e].flat()))); 
```

特别感谢**inker**建议使用 reduce。

特别感谢**Bergi**建议使用新添加的 flatMap。

特别感谢**[ECMAScript 2019](https://www.digitalocean.com/community/tutorials/js-es2019)**为语言添加了 flat 和 flatMap！

## 例子

这是您问题的确切示例：

```
let output = cartesian([1,2],[10,20],[100,200,300]); 
```

## 输出

这是该命令的输出：

```
[ [ 1, 10, 100 ],
  [ 1, 10, 200 ],
  [ 1, 10, 300 ],
  [ 1, 20, 100 ],
  [ 1, 20, 200 ],
  [ 1, 20, 300 ],
  [ 2, 10, 100 ],
  [ 2, 10, 200 ],
  [ 2, 10, 300 ],
  [ 2, 20, 100 ],
  [ 2, 20, 200 ],
  [ 2, 20, 300 ] ] 
```

## 演示

请参阅以下演示：

*   [带有 Babel 的 JS Bin](http://jsbin.com/vihibelome/edit?js,console)（适用于旧浏览器）
*   [没有 Babel 的 JS Bin](http://jsbin.com/siwefuqina/edit?js,console)（适用于现代浏览器）

## 句法

我在这里使用的语法并不新鲜。我的示例使用了扩展运算符和其余参数——JavaScript 的特性在 2015 年 6 月发布的第 6 版 ECMA-262 标准中定义，并且开发得更早，更广为人知的是 ES6 或 ES2015。看：

*   [http://www.ecma-international.org/ecma-262/6.0/](http://www.ecma-international.org/ecma-262/6.0/)
*   [https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/rest_parameters](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/rest_parameters)
*   [https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)

ES2019 中添加了 Update 2020 示例中的新方法：

*   [http://www.ecma-international.org/ecma-262/10.0/](http://www.ecma-international.org/ecma-262/10.0/)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)

它使这样的代码变得如此简单，以至于不使用它是一种罪过。对于原生不支持它的旧平台，您始终可以使用 Babel 或其他工具将其转换为较旧的语法 - 事实上，我由 Babel 转换的示例仍然比这里的大多数示例更短更简单，但它没有真的很重要，因为转译的输出不是你需要理解或维护的东西，这只是我觉得有趣的一个事实。

## 结论

不需要编写数百行难以维护的代码，也不需要为这么简单的事情使用整个库，两行原生 JavaScript 就可以轻松完成工作。正如您所看到的，使用该语言的现代特性确实是值得的，如果您需要支持古老的平台而没有对现代特性的本机支持，您可以随时使用**Babel**、**TypeScript**或其他工具将新语法转换为旧的。

## 不要像 1995 年那样编码

JavaScript 的发展是有原因的。TC39 通过添加新功能在语言设计方面做得非常出色，而浏览器供应商在实现这些功能方面做得非常出色。

要查看浏览器中任何给定功能的本机支持的当前状态，请参阅：

*   [http://caniuse.com/](http://caniuse.com/)
*   [https://kangax.github.io/compat-table/](https://kangax.github.io/compat-table/)

要查看 Node 版本中的支持，请参阅：

*   [http://node.green/](http://node.green/)

要在本机不支持现代语法的平台上使用现代语法，请使用 Babel 或 TypeScript：

*   [https://babeljs.io/](https://babeljs.io/)
*   [https://www.typescriptlang.org/](https://www.typescriptlang.org/)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-09-27T19:33:36.693

这是使用and提供的问题的功能解决方案（没有任何**可变变量**！），由 提供：`reduce``flatten``underscore.js`

```
function cartesianProductOf() {
    return _.reduce(arguments, function(a, b) {
        return _.flatten(_.map(a, function(x) {
            return _.map(b, function(y) {
                return x.concat([y]);
            });
        }), true);
    }, [ [] ]);
}

// [[1,3,"a"],[1,3,"b"],[1,4,"a"],[1,4,"b"],[2,3,"a"],[2,3,"b"],[2,4,"a"],[2,4,"b"]]
console.log(cartesianProductOf([1, 2], [3, 4], ['a'])); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore.js"></script>
```

备注：此解决方案的灵感来自[http://cwestblog.com/2011/05/02/cartesian-product-of-multiple-arrays/](http://cwestblog.com/2011/05/02/cartesian-product-of-multiple-arrays/)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-03-26T10:31:02.897

这是@viebel 的纯 Javascript 代码的修改版本，不使用任何库：

```
function cartesianProduct(arr) {
    return arr.reduce(function(a,b){
        return a.map(function(x){
            return b.map(function(y){
                return x.concat([y]);
            })
        }).reduce(function(a,b){ return a.concat(b) },[])
    }, [[]])
}

var a = cartesianProduct([[1, 2,3], [4, 5,6], [7, 8], [9,10]]);
console.log(JSON.stringify(a));
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2017-05-16T21:49:42.280

以下高效的[生成器函数返回所有给定](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/function*#Generatoren_und_Iteratoren_in_Firefox-Versionen_vor_26)[迭代](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols)的笛卡尔积：

```
// Generate cartesian product of given iterables:
function* cartesian(head, ...tail) {
  const remainder = tail.length > 0 ? cartesian(...tail) : [[]];
  for (let r of remainder) for (let h of head) yield [h, ...r];
}

// Example:
console.log(...cartesian([1, 2], [10, 20], [100, 200, 300]));
```

它接受数组、字符串、集合和所有其他实现[可迭代协议](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol)的对象。

遵循[n 元笛卡尔积](https://en.wikipedia.org/wiki/Cartesian_product#Finite_n-ary_product)的规范，它产生

*   `[]`如果一个或多个给定的可迭代对象为空，例如`[]`或`''`
*   `[[a]]`如果给出了包含单个值的单个迭代`a`。

如以下测试用例所示，所有其他情况均按预期处理：

```
// Generate cartesian product of given iterables:
function* cartesian(head, ...tail) {
  const remainder = tail.length > 0 ? cartesian(...tail) : [[]];
  for (let r of remainder) for (let h of head) yield [h, ...r];
}

// Test cases:
console.log([...cartesian([])]);              // []
console.log([...cartesian([1])]);             // [[1]]
console.log([...cartesian([1, 2])]);          // [[1], [2]]

console.log([...cartesian([1], [])]);         // []
console.log([...cartesian([1, 2], [])]);      // []

console.log([...cartesian([1], [2])]);        // [[1, 2]]
console.log([...cartesian([1], [2], [3])]);   // [[1, 2, 3]]
console.log([...cartesian([1, 2], [3, 4])]);  // [[1, 3], [2, 3], [1, 4], [2, 4]]

console.log([...cartesian('')]);              // []
console.log([...cartesian('ab', 'c')]);       // [['a','c'], ['b', 'c']]
console.log([...cartesian([1, 2], 'ab')]);    // [[1, 'a'], [2, 'a'], [1, 'b'], [2, 'b']]

console.log([...cartesian(new Set())]);       // []
console.log([...cartesian(new Set([1]))]);    // [[1]]
console.log([...cartesian(new Set([1, 1]))]); // [[1]]
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2012-09-06T17:16:36.807

社区似乎认为这很简单和/或很容易找到参考实现。然而，经过短暂的检查，我找不到一个，……要么就是我喜欢重新发明轮子或解决类似课堂的编程问题。无论哪种方式，它都是你的幸运日：

```
function cartProd(paramArray) {

  function addTo(curr, args) {

    var i, copy, 
        rest = args.slice(1),
        last = !rest.length,
        result = [];

    for (i = 0; i < args[0].length; i++) {

      copy = curr.slice();
      copy.push(args[0][i]);

      if (last) {
        result.push(copy);

      } else {
        result = result.concat(addTo(copy, rest));
      }
    }

    return result;
  }

  return addTo([], Array.prototype.slice.call(arguments));
}

>> console.log(cartProd([1,2], [10,20], [100,200,300]));
>> [
     [1, 10, 100], [1, 10, 200], [1, 10, 300], [1, 20, 100], 
     [1, 20, 200], [1, 20, 300], [2, 10, 100], [2, 10, 200], 
     [2, 10, 300], [2, 20, 100], [2, 20, 200], [2, 20, 300]
   ] 
```

相对高效的完整参考实现……

关于效率：您可以通过将 if 退出循环并拥有 2 个单独的循环来获得一些收益，因为它在技术上是恒定的，并且您将帮助进行分支预测和所有这些混乱，但这一点在 JavaScript 中是没有实际意义的。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2015-04-12T03:40:34.920

这是一个不花哨的、直接的递归解决方案：

```
function cartesianProduct(a) { // a = array of array
  var i, j, l, m, a1, o = [];
  if (!a || a.length == 0) return a;

  a1 = a.splice(0, 1)[0]; // the first array of a
  a = cartesianProduct(a);
  for (i = 0, l = a1.length; i < l; i++) {
    if (a && a.length)
      for (j = 0, m = a.length; j < m; j++)
        o.push([a1[i]].concat(a[j]));
    else
      o.push([a1[i]]);
  }
  return o;
}

console.log(cartesianProduct([[1, 2], [10, 20], [100, 200, 300]]));
// [
//   [1,10,100],[1,10,200],[1,10,300],
//   [1,20,100],[1,20,200],[1,20,300],
//   [2,10,100],[2,10,200],[2,10,300],
//   [2,20,100],[2,20,200],[2,20,300]
// ]
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2020-01-01T20:24:32.837

这是使用本机 ES2019 的单行代码`flatMap`。不需要库，只需一个现代浏览器（或转译器）：

```
data.reduce((a, b) => a.flatMap(x => b.map(y => [...x, y])), [[]]); 
```

它本质上是 viebel 答案的现代版本，没有 lodash。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2016-08-24T00:22:50.637

这是一种使用 ECMAScript 2015[生成器函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator)的递归方式，因此您不必一次创建所有元组：

```
function* cartesian() {
    let arrays = arguments;
    function* doCartesian(i, prod) {
        if (i == arrays.length) {
            yield prod;
        } else {
            for (let j = 0; j < arrays[i].length; j++) {
                yield* doCartesian(i + 1, prod.concat([arrays[i][j]]));
            }
        }
    }
    yield* doCartesian(0, []);
}

console.log(JSON.stringify(Array.from(cartesian([1,2],[10,20],[100,200,300]))));
console.log(JSON.stringify(Array.from(cartesian([[1],[2]],[10,20],[100,200,300]))));
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2017-03-18T10:26:06.143

[这是一个使用箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)的纯 ES6 解决方案

```
function cartesianProduct(arr) {
  return arr.reduce((a, b) =>
    a.map(x => b.map(y => x.concat(y)))
    .reduce((a, b) => a.concat(b), []), [[]]);
}

var arr = [[1, 2], [10, 20], [100, 200, 300]];
console.log(JSON.stringify(cartesianProduct(arr)));
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-04-12T03:50:32.250

使用 ES6 生成器的典型回溯，

```
function cartesianProduct(...arrays) {
  let current = new Array(arrays.length);
  return (function* backtracking(index) {
    if(index == arrays.length) yield current.slice();
    else for(let num of arrays[index]) {
      current[index] = num;
      yield* backtracking(index+1);
    }
  })(0);
}
for (let item of cartesianProduct([1,2],[10,20],[100,200,300])) {
  console.log('[' + item.join(', ') + ']');
}
```

```
div.as-console-wrapper { max-height: 100%; }
```

下面有一个与旧浏览器兼容的类似版本。

```
function cartesianProduct(arrays) {
  var result = [],
      current = new Array(arrays.length);
  (function backtracking(index) {
    if(index == arrays.length) return result.push(current.slice());
    for(var i=0; i<arrays[index].length; ++i) {
      current[index] = arrays[index][i];
      backtracking(index+1);
    }
  })(0);
  return result;
}
cartesianProduct([[1,2],[10,20],[100,200,300]]).forEach(function(item) {
  console.log('[' + item.join(', ') + ']');
});
```

```
div.as-console-wrapper { max-height: 100%; }
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2014-03-02T23:38:50.317

带有 lodash 的咖啡脚本版本：

```
_ = require("lodash")
cartesianProduct = ->
    return _.reduceRight(arguments, (a,b) ->
        _.flatten(_.map(a,(x) -> _.map b, (y) -> x.concat(y)), true)
    , [ [] ]) 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2018-05-31T19:27:49.820

单行方法，以便更好地阅读缩进。

```
result = data.reduce(
    (a, b) => a.reduce(
        (r, v) => r.concat(b.map(w => [].concat(v, w))),
        []
    )
); 
```

它需要一个带有所需笛卡尔项目数组的数组。

```
var data = [[1, 2], [10, 20], [100, 200, 300]],
    result = data.reduce((a, b) => a.reduce((r, v) => r.concat(b.map(w => [].concat(v, w))), []));

console.log(result.map(a => a.join(' ')));
```

```
.as-console-wrapper { max-height: 100% !important; top: 0; }
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2019-04-16T15:09:24.423

这是标记为*函数式编程*的，所以让我们看一下[*List monad*](https://en.wikipedia.org/wiki/Monad_(functional_programming)#Another_example:_List)：

> 这个单子列表的一个应用是表示非确定性计算。`List` *可以保存算法中所有执行路径*的结果...

好吧，这听起来很*适合*。`cartesian`JavaScript 给了我们`Array`和 monadic 绑定函数是`Array.prototype.flatMap`，所以让我们使用它们 -

```
const cartesian = (...all) =>
{ const loop = (t, a, ...more) =>
    a === undefined
      ? [ t ]
      : a .flatMap (x => loop ([ ...t, x ], ...more))
  return loop ([], ...all)
}

console .log (cartesian ([1,2], [10,20], [100,200,300]))
```

而不是`loop`上面，`t`可以添加为咖喱参数 -

```
const makeCartesian = (t = []) => (a, ...more) =>
  a === undefined
    ? [ t ]
    : a .flatMap (x => makeCartesian ([ ...t, x ]) (...more))

const cartesian =
  makeCartesian ()

console .log (cartesian ([1,2], [10,20], [100,200,300]))
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-08-21T18:40:50.103

你可以[`reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)二维数组。[`flatMap`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)在累加器数组上使用以获取`acc.length x curr.length`每个循环中的组合数。`[].concat(c, n)`之所以使用，是因为`c`在第一次迭代中是一个数字，然后是一个数组。

```
const data = [ [1, 2], [10, 20], [100, 200, 300] ];

const output = data.reduce((acc, curr) =>
  acc.flatMap(c => curr.map(n => [].concat(c, n)))
)

console.log(JSON.stringify(output))
```

（这是基于[Nina Scholz 的回答](https://stackoverflow.com/a/50631472/3082296)）

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-10-02T16:10:03.040

当任何输入数组包含数组项时，本主题下的一些答案会失败。你最好检查一下。

无论如何都不需要下划线，lodash。我相信这个应该用纯 JS ES6 来做，尽可能地实用。

这段代码使用reduce和嵌套映射，只是为了获得两个数组的笛卡尔积，但是第二个数组来自对具有较少数组的同一函数的递归调用；因此.. `a[0].cartesian(...a.slice(1))`

```
Array.prototype.cartesian = function(...a){
  return a.length ? this.reduce((p,c) => (p.push(...a[0].cartesian(...a.slice(1)).map(e => a.length > 1 ? [c,...e] : [c,e])),p),[])
                  : this;
};

var arr = ['a', 'b', 'c'],
    brr = [1,2,3],
    crr = [[9],[8],[7]];
console.log(JSON.stringify(arr.cartesian(brr,crr))); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-12-12T14:12:53.753

在我的特定环境中，“老式”方法似乎比基于更现代特征的方法更有效。下面是代码（包括与@rsp 和@sebnukem 在此线程中发布的其他解决方案的小比较），它是否也对其他人有用。

思路如下。假设我们正在构建数组的外积`N`，每个数组`a_1,...,a_N`都有`m_i`组件。这些数组的外积有`M=m_1*m_2*...*m_N`元素，我们可以用一个维向量来识别它们中的每一个，`N-`维向量的分量是正整数，`i`第一个分量从上面严格限定为`m_i`。例如，向量`(0, 0, ..., 0)`将对应于从每个数组中获取第一个元素的特定组合，而`(m_1-1, m_2-1, ..., m_N-1)`用从每个数组中获取最后一个元素的组合来标识。因此，为了构建所有`M`组合，下面的函数连续构造所有这样的向量，并为它们中的每一个标识输入数组元素的相应组合。

```
function cartesianProduct(){
    const N = arguments.length;

    var arr_lengths = Array(N);
    var digits = Array(N);
    var num_tot = 1;
    for(var i = 0; i < N; ++i){
        const len = arguments[i].length;
        if(!len){
            num_tot = 0;
            break;
        }
        digits[i] = 0;
        num_tot *= (arr_lengths[i] = len);
    }

    var ret = Array(num_tot);
    for(var num = 0; num < num_tot; ++num){

        var item = Array(N);
        for(var j = 0; j < N; ++j){ item[j] = arguments[j][digits[j]]; }
        ret[num] = item;

        for(var idx = 0; idx < N; ++idx){
            if(digits[idx] == arr_lengths[idx]-1){
                digits[idx] = 0;
            }else{
                digits[idx] += 1;
                break;
            }
        }
    }
    return ret;
}
//------------------------------------------------------------------------------
let _f = (a, b) => [].concat(...a.map(a => b.map(b => [].concat(a, b))));
let cartesianProduct_rsp = (a, b, ...c) => b ? cartesianProduct_rsp(_f(a, b), ...c) : a;
//------------------------------------------------------------------------------
function cartesianProduct_sebnukem(a) {
    var i, j, l, m, a1, o = [];
    if (!a || a.length == 0) return a;

    a1 = a.splice(0, 1)[0];
    a = cartesianProduct_sebnukem(a);
    for (i = 0, l = a1.length; i < l; i++) {
        if (a && a.length) for (j = 0, m = a.length; j < m; j++)
            o.push([a1[i]].concat(a[j]));
        else
            o.push([a1[i]]);
    }
    return o;
}
//------------------------------------------------------------------------------
const L = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
const args = [L, L, L, L, L, L];

let fns = {
    'cartesianProduct': function(args){ return cartesianProduct(...args); },
    'cartesianProduct_rsp': function(args){ return cartesianProduct_rsp(...args); },
    'cartesianProduct_sebnukem': function(args){ return cartesianProduct_sebnukem(args); }
};

Object.keys(fns).forEach(fname => {
    console.time(fname);
    const ret = fns[fname](args);
    console.timeEnd(fname);
}); 
```

，`node v6.12.2`我得到以下时间：

```
cartesianProduct: 427.378ms
cartesianProduct_rsp: 1710.829ms
cartesianProduct_sebnukem: 593.351ms 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-03-05T11:04:41.217

对于那些需要 TypeScript 的人（重新实现 @Danny 的回答）

```
/**
 * Calculates "Cartesian Product" sets.
 * @example
 *   cartesianProduct([[1,2], [4,8], [16,32]])
 *   Returns:
 *   [
 *     [1, 4, 16],
 *     [1, 4, 32],
 *     [1, 8, 16],
 *     [1, 8, 32],
 *     [2, 4, 16],
 *     [2, 4, 32],
 *     [2, 8, 16],
 *     [2, 8, 32]
 *   ]
 * @see https://stackoverflow.com/a/36234242/1955709
 * @see https://en.wikipedia.org/wiki/Cartesian_product
 * @param arr {T[][]}
 * @returns {T[][]}
 */
function cartesianProduct<T> (arr: T[][]): T[][] {
  return arr.reduce((a, b) => {
    return a.map(x => {
      return b.map(y => {
        return x.concat(y)
      })
    }).reduce((c, d) => c.concat(d), [])
  }, [[]] as T[][])
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2019-08-12T17:38:18.367

现代 JavaScript 只需几行代码。没有像 Lodash 这样的外部库或依赖项。

```
function cartesian(...arrays) {
  return arrays.reduce((a, b) => a.flatMap(x => b.map(y => x.concat([y]))), [ [] ]);
}

console.log(
  cartesian([1, 2], [10, 20], [100, 200, 300])
    .map(arr => JSON.stringify(arr))
    .join('\n')
);
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2021-04-07T02:58:42.390

另一个更简化的 2021 式答案，仅使用 reduce、map 和 concat 方法：

```
const cartesian = (...arr) => arr.reduce((a,c) => a.map(e => c.map(f => e.concat([f]))).reduce((a,c) => a.concat(c), []), [[]]);

console.log(cartesian([1, 2], [10, 20], [100, 200, 300]));
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-12-07T13:55:11.783

对于那些对 ramda 解决方案感到满意的人：

```
import { xprod, flatten } from 'ramda';

const cartessian = (...xs) => xs.reduce(xprod).map(flatten) 
```

或者没有依赖关系和两个免费的乐高积木（`xprod`和`flatten`）相同：

```
const flatten = xs => xs.flat();

const xprod = (xs, ys) => xs.flatMap(x => ys.map(y => [x, y]));

const cartessian = (...xs) => xs.reduce(xprod).map(flatten); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2021-04-07T04:48:12.940

[`flatMap`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)这是一个仅使用and的递归单行代码[`map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)：

```
const inp = [
  [1, 2],
  [10, 20],
  [100, 200, 300]
];

const cartesian = (first, ...rest) => 
  rest.length ? first.flatMap(v => cartesian(...rest).map(c => [v].concat(c))) 
              : first;

console.log(cartesian(...inp));
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-03-17T09:13:51.127

一种非递归方法，可在实际将产品添加到结果集之前添加过滤和修改产品的功能。

注意：使用`.map`而不是`.forEach`。在某些浏览器中，`.map`运行速度更快。

```
function crossproduct(arrays, rowtest, rowaction) {
  // Calculate the number of elements needed in the result
  var result_elems = 1, row_size = arrays.length;
  arrays.map(function(array) {
    result_elems *= array.length;
  });
  var temp = new Array(result_elems), result = [];

  // Go through each array and add the appropriate
  // element to each element of the temp
  var scale_factor = result_elems;
  arrays.map(function(array) {
    var set_elems = array.length;
    scale_factor /= set_elems;
    for (var i = result_elems - 1; i >= 0; i--) {
      temp[i] = (temp[i] ? temp[i] : []);
      var pos = i / scale_factor % set_elems;
      // deal with floating point results for indexes,
      // this took a little experimenting
      if (pos < 1 || pos % 1 <= .5) {
        pos = Math.floor(pos);
      } else {
        pos = Math.min(array.length - 1, Math.ceil(pos));
      }
      temp[i].push(array[pos]);
      if (temp[i].length === row_size) {
        var pass = (rowtest ? rowtest(temp[i]) : true);
        if (pass) {
          if (rowaction) {
            result.push(rowaction(temp[i]));
          } else {
            result.push(temp[i]);
          }
        }
      }
    }
  });
  return result;
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-01-31T14:21:28.223

只是为了选择一个使用数组的真正简单的实现`reduce`：

```
const array1 = ["day", "month", "year", "time"];
const array2 = ["from", "to"];
const process = (one, two) => [one, two].join(" ");

const product = array1.reduce((result, one) => result.concat(array2.map(two => process(one, two))), []); 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-03-17T12:07:52.127

**一个简单的“思想和视觉友好”的解决方案。**

[![在此处输入图像描述](../Images/2807dd5ed1993019a6e82c01c36eaec7.png)](https://i.stack.imgur.com/fIhuA.png)

* * *

```
// t = [i, length]

const moveThreadForwardAt = (t, tCursor) => {
  if (tCursor < 0)
    return true; // reached end of first array

  const newIndex = (t[tCursor][0] + 1) % t[tCursor][1];
  t[tCursor][0] = newIndex;

  if (newIndex == 0)
    return moveThreadForwardAt(t, tCursor - 1);

  return false;
}

const cartesianMult = (...args) => {
  let result = [];
  const t = Array.from(Array(args.length)).map((x, i) => [0, args[i].length]);
  let reachedEndOfFirstArray = false;

  while (false == reachedEndOfFirstArray) {
    result.push(t.map((v, i) => args[i][v[0]]));

    reachedEndOfFirstArray = moveThreadForwardAt(t, args.length - 1);
  }

  return result;
}

// cartesianMult(
//   ['a1', 'b1', 'c1'],
//   ['a2', 'b2'],
//   ['a3', 'b3', 'c3'],
//   ['a4', 'b4']
// );

console.log(cartesianMult(
  ['a1'],
  ['a2', 'b2'],
  ['a3', 'b3']
)); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-01-05T18:44:38.017

又一个实现。不是最短或花哨的，但很快：

```
function cartesianProduct() {
    var arr = [].slice.call(arguments),
        intLength = arr.length,
        arrHelper = [1],
        arrToReturn = [];

    for (var i = arr.length - 1; i >= 0; i--) {
        arrHelper.unshift(arrHelper[0] * arr[i].length);
    }

    for (var i = 0, l = arrHelper[0]; i < l; i++) {
        arrToReturn.push([]);
        for (var j = 0; j < intLength; j++) {
            arrToReturn[i].push(arr[j][(i / arrHelper[j + 1] | 0) % arr[j].length]);
        }
    }

    return arrToReturn;
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-02-10T20:56:12.290

@viebel 的纯 Javascript 代码的简单修改版本：

```
function cartesianProduct(...arrays) {
  return arrays.reduce((a, b) => {
    return [].concat(...a.map(x => {
      const next = Array.isArray(x) ? x : [x];
      return [].concat(b.map(y => next.concat(...[y])));
    }));
  });
}

const product = cartesianProduct([1, 2], [10, 20], [100, 200, 300]);

console.log(product);
/*
[ [ 1, 10, 100 ],
  [ 1, 10, 200 ],
  [ 1, 10, 300 ],
  [ 1, 20, 100 ],
  [ 1, 20, 200 ],
  [ 1, 20, 300 ],
  [ 2, 10, 100 ],
  [ 2, 10, 200 ],
  [ 2, 10, 300 ],
  [ 2, 20, 100 ],
  [ 2, 20, 200 ],
  [ 2, 20, 300 ] ];
*/ 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2019-04-09T07:47:25.093

# 不需要图书馆！:)

虽然需要箭头功能，但可能效率不高。：/

```
const flatten = (xs) => 
    xs.flat(Infinity)

const binaryCartesianProduct = (xs, ys) =>
    xs.map((xi) => ys.map((yi) => [xi, yi])).flat()

const cartesianProduct = (...xss) =>
    xss.reduce(binaryCartesianProduct, [[]]).map(flatten)

console.log(cartesianProduct([1,2,3], [1,2,3], [1,2,3]))
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-10-16T12:49:01.820

更易读的实现

```
function productOfTwo(one, two) {
  return one.flatMap(x => two.map(y => [].concat(x, y)));
}

function product(head = [], ...tail) {
  if (tail.length === 0) return head;
  return productOfTwo(head, product(...tail));
}

const test = product(
  [1, 2, 3],
  ['a', 'b']
);

console.log(JSON.stringify(test));
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-03-25T13:01:03.890

```
f=(a,b,c)=>a.flatMap(ai=>b.flatMap(bi=>c.map(ci=>[ai,bi,ci]))) 
```

这适用于 3 个阵列。
一些答案为任意数量的数组提供了一种方式。
这可以很容易地收缩或扩展为更少或更多的阵列。
我需要一组与重复的组合，所以我可以使用：

```
f(a,a,a) 
```

但使用：

```
f=(a,b,c)=>a.flatMap(a1=>a.flatMap(a2=>a.map(a3=>[a1,a2,a3]))) 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-09-20T22:19:05.680

我注意到没有人发布允许传递函数来处理每个组合的解决方案，所以这是我的解决方案：

```
const _ = require('lodash')

function combinations(arr, f, xArr = []) {
    return arr.length>1 
    ? _.flatMap(arr[0], x => combinations(arr.slice(1), f, xArr.concat(x)))
    : arr[0].map(x => f(...xArr.concat(x)))
}

// use case
const greetings = ["Hello", "Goodbye"]
const places = ["World", "Planet"]
const punctuationMarks = ["!", "?"]
combinations([greetings,places,punctuationMarks], (greeting, place, punctuationMark) => `${greeting} ${place}${punctuationMark}`)
  .forEach(row => console.log(row)) 
```

输出：

```
Hello World!
Hello World?
Hello Planet!
Hello Planet?
Goodbye World!
Goodbye World?
Goodbye Planet!
Goodbye Planet? 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-03-26T08:15:17.247

```
var chars = ['A', 'B', 'C']
var nums = [1, 2, 3]

var cartesianProduct = function() {
  return _.reduce(arguments, function(a, b) {
    return _.flatten(_.map(a, function(x) {
      return _.map(b, function(y) {
        return x.concat(y);
      });
    }), true);
  }, [
    []
  ]);
};

console.log(cartesianProduct(chars, nums))
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
```

刚刚将[@dummersl 的](https://stackoverflow.com/a/22135232/1766716)答案从 CoffeScript 转换为 JavaScript。它只是工作。

```
var chars = ['A', 'B', 'C']
var nums = [1, 2, 3]

var cartesianProduct = function() {
  return _.reduce(arguments, function(a, b) {
    return _.flatten(_.map(a, function(x) {
      return _.map(b, function(y) {
        return x.concat(y);
      });
    }), true);
  }, [[]]);
};

console.log( cartesianProduct(chars, nums) ) 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-04-15T18:17:53.337

作为记录

这是我的版本。我使用最简单的 javascript 迭代器“for()”制作了它，因此它在每种情况下都兼容并具有最佳性能。

```
function cartesian(arrays){
    var quant = 1, counters = [], retArr = [];

    // Counts total possibilities and build the counters Array;
    for(var i=0;i<arrays.length;i++){
        counters[i] = 0;
        quant *= arrays[i].length;
    }

    // iterate all possibilities
    for(var i=0,nRow;i<quant;i++){
        nRow = [];
        for(var j=0;j<counters.length;j++){
            if(counters[j] < arrays[j].length){
                nRow.push(arrays[j][counters[j]]);
            } else { // in case there is no such an element it restarts the current counter
                counters[j] = 0;
                nRow.push(arrays[j][counters[j]]);
            }
            counters[j]++;
        }
        retArr.push(nRow);
    }
    return retArr;
} 
```

最好的祝福。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-03-31T14:14:27.870

**2021 年版 David Tang 的精彩[回答](https://stackoverflow.com/a/4331713/12496886)**
也受到了 Neil Mountford 的[回答的启发](https://stackoverflow.com/a/15301002/12496886)

*   快（比接受的答案快 95%）
*   适用于任何数据类型

```
const getAllCombinations = (arraysToCombine) => {
  const divisors = [];
  let combinationsCount = 1;
  for (let i = arraysToCombine.length - 1; i >= 0; i--) {
      divisors[i] = divisors[i + 1] ? divisors[i + 1] * arraysToCombine[i + 1].length : 1;
      combinationsCount *= (arraysToCombine[i].length || 1);
  }

  const getCombination = (n, arrays, divisors) => arrays.reduce((acc, arr, i) => {
      acc.push(arr[Math.floor(n / divisors[i]) % arr.length]);
      return acc;
  }, []);

  const combinations = [];
  for (let i = 0; i < combinationsCount; i++) {
      combinations.push(getCombination(i, arraysToCombine, divisors));
  }
  return combinations;
};

console.log(getAllCombinations([['a', 'b'], ['c', 'z'], ['d', 'e', 'f']]));
```

基准测试：[https ://jsbench.me/gdkmxhm36d/1](https://jsbench.me/gdkmxhm36d/1)

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2018-02-22T05:05:48.620

将数组作为输入的普通 JS 蛮力方法。

```
var cartesian = function(arrays) {
    var product = [];
    var precals = [];
    var length = arrays.reduce(function(acc, curr) {
        return acc * curr.length
    }, 1);
    for (var i = 0; i < arrays.length; i++) {
        var array = arrays[i];
        var mod = array.length;
        var div = i > 0 ? precals[i - 1].div * precals[i - 1].mod : 1;
        precals.push({
            div: div,
            mod: mod
        });
    }
    for (var j = 0; j < length; j++) {
        var item = [];
        for (var i = 0; i < arrays.length; i++) {
            var array = arrays[i];
            var precal = precals[i];
            var k = (~~(j / precal.div)) % precal.mod;
            item.push(array[k]);
        }
        product.push(item);
    }
    return product;
};

cartesian([
    [1],
    [2, 3]
]);

cartesian([
    [1],
    [2, 3],
    [4, 5, 6]
]); 
```

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2021-06-01T14:10:08.017

实现这一点最简单的方法是使用 ES6 方式。所有人都必须了解维恩图的工作原理。因此，类似地，ES6 为我们提供了一种对任何类型的数据结构执行所有集合操作的方法。

让我们看看下面的例子

var arr1 = [1,2,2,3,5] var arr2 = [2,3,5,6,7]

arr1.filter(x => arr2.includes(x))

结果 => [2,2,3,5]

我们可以看到结果中重复了“2”，这可以通过使用上述答案中提到的任何一个数组上提供的 Set Class 来避免

[... new Set(arr1)].filter(x => arr2.includes(x))

结果 => [2,3,5]

# xml - xpath 高级语法混淆

> ID：12303998
> 
> 赞同：1
> 
> 时间：2012-09-06T16:00:22.040
> 
> 标签：xml, xslt, xpath

```
<xsl:template name="makeDiv">   
    <xsl:when test="descendant::*[Parent][Name]">
    </xsl:when>  
</xsl:template> 
```

某处下线...

```
<xsl:if test="descendant::ParentCheck">
   <xsl:call-template name="makeDiv"/>
</xsl:if> 
```

有人可以向我解释定义了什么 template-name=makeDiv 以及测试在做什么吗？它是否正在寻找属于 的后代的任何节点的属性 ' `Parent`' 和 ' ' ？`Name``ParentCheck`

还有，什么`<xsl:when test="not(descendant::*[SomeAttribute])">` 意思？它是指其他不是的子元素`SomeAttribute`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:09:56.187

`descendant:*[Parent][Name]`表示“任何具有子 'Parent' 元素和 'Name' 元素的后代。

```
i.e. <SomeElement>
         <Parent/>
         <Name/>
     <SomeElement> 
```

`descendant::ParentCheck`表示“任何名为 ParentCheck 的后代”

```
i.e. <ParentCheck /> 
```