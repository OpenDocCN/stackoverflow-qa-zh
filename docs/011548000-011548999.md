# StackOverflow 问答 11548000-11548999

# c++ - 如何将两个HICON变成一个HICON？一个在另一个之上

> ID：11548002
> 
> 赞同：0
> 
> 时间：2012-07-18T18:29:51.387
> 
> 标签：c++, windows, mfc

我正在尝试在 mfc 下的另一张图片上叠加一张小图片。

现在我有两个 HICON 指向 2 张图片。

我怎样才能把它们合二为一？

谢谢。

# javascript - window.screen.width 和 window.screen.height 在 iPad 3 上不起作用

> ID：11548003
> 
> 赞同：4
> 
> 时间：2012-07-18T18:30:00.060
> 
> 标签：javascript

我正在使用这些功能

```
window.screen.width
window.screen.height 
```

检测用户的屏幕分辨率。它们在 PC 上的工作就像一个魅力，但在 iPad 3 上却不行。它们输出 768 和 1024 而不是 2048 和 1536。

有人可以帮我吗？先感谢您

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T19:19:54.913

是的。欢迎来到有趣的移动设备世界！

iPad 3（和其他视网膜设备）使用`window.devicePixelRatio`set to`2`来显示它们具有与逻辑像素不同的 css 像素。iPad 3 仍然报告 1024 × 768，因为这是 CSS 像素的数量。

作为另一个混淆来源，一些 Android 设备报告视口宽度，而一些报告物理宽度，这意味着如果您询问一些 Android 设备，`window.screen.height`如果文档很长，则将是成千上万。

简而言之，对于您的问题，请`window.devicePixelRatio`用作乘数。我会使用类似的东西

```
if(!window.devicePixelRatio) {
    window.devicePixelRatio = 1;
} 
```

确保如果未设置，则在开始之前将其声明为 1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T06:38:02.133

```
if(window.devicePixelRatio !== undefined) {
    dpr = window.devicePixelRatio;
} else {
    dpr = 1;
}

var screen_width = window.screen.width * dpr;
var screen_height = window.screen.height * dpr; 
```

该解决方案完美运行。

# ruby-on-rails - 在 Rails 中使用用户名 slug/短 URL 时要更改的内容

> ID：11548004
> 
> 赞同：2
> 
> 时间：2012-07-18T18:30:00.077
> 
> 标签：ruby-on-rails, session, url-rewriting, url-routing, friendly-id

我对rails很陌生，所以如果我忽略了简单的事情或rails方式，请原谅我。我的目标是完全替换表单的 URL

`/users/1`

和

`/username`

用于所有目的。（我认为公开暴露 ID 的脚手架就像在你的手臂上伸出一根骨头四处走动。）但实施似乎比我预期的要复杂一些。这似乎改变了 rails 索引和查找用户的整个方式，而不仅仅是替换查找方法。

虽然我已经`to_param`在我的文件中使用覆盖来实现这个功能`user.rb`，但我已经读过这意味着我在使用时[会遇到](https://stackoverflow.com/questions/5611649/ruby-on-rails-routing-matching-username)[索引](http://apidock.com/rails/ActiveRecord/Base/to_param) [问题](http://blog.nhocki.com/2012/01/22/beautiful-urls-in-rails-the-easy-way) ，而且我不确定它会如何影响我的`params([:username])`

(a) 新用户创建时的会话模型，以及

(b) user/show.html.erb 文件中的@User 用法。

因此，我已经查阅了以下页面（或提出了问题）：

*   [Ruby on rails 路由匹配用户名](https://stackoverflow.com/questions/5611649/ruby-on-rails-routing-matching-username)
*   [使用用户名自定义 rails url](https://stackoverflow.com/questions/2269885/username-in-url-with-rails-routes)
*   [Rails 中的路由使用户名成为 URL：](https://stackoverflow.com/questions/11048063/routing-in-rails-making-the-username-an-url)
*   [路由错误：url 中的用户名](https://stackoverflow.com/questions/5204057/routing-error-with-username-in-url)
*   [在 Rails 中按用户名正确路由短 url](https://stackoverflow.com/questions/11514723/correct-routing-for-short-url-by-username-in-rails/11514977#comment15244810_11514977)
*   [rails3，干净的 url，friendly_id，会话](https://stackoverflow.com/questions/6461814/rails3-clean-url-friendly-id-sessions)

我想从这个问题中了解的主要问题：

1.  过渡到这个我会失去什么功能？也就是说，如果我追求这个替换，我必须解决和重写哪些目前在 Rails 中“正常工作”的东西？
2.  [作为一种做法，用friendly_id](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)替换是否更好？我在这里担心的是，在我的数据库中创建一个与用户名相同的 slug 列似乎有点不干燥，让我感到不舒服，我宁愿尽可能避免依赖外部 gem。
3.  我的 users#show 需要是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:06:26.950

你应该检查友好的ID。让你想做的事情变得非常容易。

[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

它也有一个 Railscast。

[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T03:48:48.803

如果您的用户名包含特殊字符，例如**@、-、.** 并得到一个错误，说**“没有路由匹配”**，那么你需要过滤它的路由。见下文：

```
match "/user/:username" => 'users#show', :as => :profile, :username => /[\.a-zA-Z0-9_@-]+/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T17:43:33.140

在解决这个问题几个星期之后，我想说截至 2012 年 8 月 2 日的最佳答案是，如果你这样做，就会违反许多轨道约定，并撕裂时间和空间本身的结构。

URL 中丑陋的脚手架是 rails 实现 RESTful 方法的必要部分。

# python - NumPy 或 Pandas：将数组类型保持为整数，同时具有 NaN 值

> ID：11548005
> 
> 赞同：198
> 
> 时间：2012-07-18T18:30:02.887
> 
> 标签：python, numpy, int, pandas, type-conversion

是否有一种首选方法可以将`numpy`数组的数据类型固定为`int`（`int64`或其他），同时仍将内部元素列为`numpy.NaN`？

特别是，我正在将内部数据结构转换为 Pandas DataFrame。在我们的结构中，我们有仍然有 NaN 的整数类型列（但列的 dtype 是 int）。如果我们将其设为 DataFrame，似乎会将所有内容重铸为浮点数，但我们真的很想成为`int`.

想法？

**尝试的事情：**

我尝试使用`from_records()`pandas.DataFrame 下的函数，`coerce_float=False`但这并没有帮助。我还尝试使用 NumPy 掩码数组和 NaN fill_value，这也不起作用。所有这些都导致列数据类型变为浮点数。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-18T18:43:27.740

`NaN`不能存储在整数数组中。这是目前 pandas 的一个已知限制；我一直在等待 NumPy 中的 NA 值（类似于 R 中的 NA）取得进展，但 NumPy 获得这些功能至少需要 6 个月到一年，看来：

[http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na)

（此功能已从 pandas 0.24 版本开始添加，但请注意，它需要使用扩展 dtype Int64（大写），而不是默认的 dtype int64（小写）： [https ://pandas.pydata.org/pandas- docs/version/0.24/whatsnew/v0.24.0.html#optional-integer-na-support](https://pandas.pydata.org/pandas-docs/version/0.24/whatsnew/v0.24.0.html#optional-integer-na-support) ）

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2018-08-24T03:36:20.830

此功能已添加到 pandas（从版本 0.24 开始）： [https ://pandas.pydata.org/pandas-docs/version/0.24/whatsnew/v0.24.0.html#optional-integer-na-support](https://pandas.pydata.org/pandas-docs/version/0.24/whatsnew/v0.24.0.html#optional-integer-na-support)

此时，它需要使用扩展 dtype Int64（大写），而不是默认的 dtype int64（小写）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-08T23:40:59.973

如果性能不是主要问题，您可以改为存储字符串。

```
df.col = df.col.dropna().apply(lambda x: str(int(x)) ) 
```

然后你可以`NaN`随心所欲地混合。如果您真的想要整数，根据您的应用程序，您可以使用`-1`, 或`0`, or`1234567890`或其他一些专用值来表示`NaN`.

您还可以临时复制列：一个像您一样，带有浮动；另一个是实验性的，带有整数或字符串。然后在每个合理的地方插入`asserts`，检查两者是否同步。经过足够的测试后，您可以放开浮动。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-12T13:08:53.080

这不是适用于所有情况的解决方案，但我的（基因组坐标）我已经使用 0 作为 NaN

```
a3['MapInfo'] = a3['MapInfo'].fillna(0).astype(int) 
```

这至少允许使用正确的“本机”列类型，减法、比较等操作按预期工作

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-12-19T14:31:10.853

### 熊猫 v0.24+

支持`NaN`整数系列的功能将在 v0.24 及更高版本中可用。v0.24“新增功能”部分中有相关信息，可空整数数据类型下有更多[详细](http://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.24.0.html#optional-integer-na-support)[信息](http://pandas-docs.github.io/pandas-docs-travis/user_guide/integer_na.html#integer-na)。

### Pandas v0.23 及更早版本

一般来说，最好`float`尽可能使用系列，即使系列由于包含值而被向上`int`转换。这启用了基于向量化 NumPy 的计算，否则将处理 Python 级循环。`float``NaN`

文档确实[建议](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na)：“一种可能性是改用`dtype=object`数组。” 例如：

```
s = pd.Series([1, 2, 3, np.nan])

print(s.astype(object))

0      1
1      2
2      3
3    NaN
dtype: object 
```

出于美观的原因，例如输出到文件，这*可能*是更可取的。

### Pandas v0.23 及更早版本：背景

[`NaN`被认为是一个`float`](https://stackoverflow.com/questions/48558973/why-is-nan-considered-as-a-float)。[当前（从 v0.23 开始）](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na)的文档指定了整数系列向上转换为的原因`float`：

> 由于 NumPy 没有从头开始构建高性能 NA 支持，因此主要的损失是在整数数组中表示 NA 的能力。
> 
> 这种权衡主要是出于内存和性能的原因，而且结果系列仍然是“数字的”。

由于包含，文档还[提供了向上转换的规则](http://pandas.pydata.org/pandas-docs/stable/user_guide/gotchas.html#na-type-promotions)`NaN`：

```
Typeclass   Promotion dtype for storing NAs
floating    no change
object      no change
integer     cast to float64
boolean     cast to object 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-26T16:35:03.263

## 熊猫新版 v1.00 +

您不再（也不能）使用`numpy.nan`任何东西。现在你有`pandas.NA`.

请阅读：[https ://pandas.pydata.org/pandas-docs/stable/user_guide/integer_na.html](https://pandas.pydata.org/pandas-docs/stable/user_guide/integer_na.html)

> IntegerArray 目前是实验性的。它的 API 或实现可能会在没有警告的情况下更改。
> 
> 在 1.0.0 版更改: 现在使用 pandas.NA 作为缺失值而不是 numpy.nan。
> 
> 在处理缺失数据中，我们看到 pandas 主要使用 NaN 来表示缺失数据。因为 NaN 是浮点数，这会强制具有任何缺失值的整数数组变为浮点数。在某些情况下，这可能无关紧要。但是，如果您的整数列是一个标识符，那么转换为浮点数可能会出现问题。有些整数甚至不能表示为浮点数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-25T17:08:08.700

这现在是可能的，因为 pandas v 0.24.0

[pandas 0.24.x 发行说明](https://pandas.pydata.org/pandas-docs/version/0.24/whatsnew/v0.24.0.html#optional-integer-na-support) 引用：“ **Pandas 已经获得了保存具有缺失值的整数 dtype 的能力。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-01T18:53:35.920

只是想补充一点，如果您尝试将浮点 (1.143) 向量转换为整数 (1)，而 NA 转换为新的 'Int64' dtype 会给您一个错误。为了解决这个问题，您必须对数字进行四舍五入，然后执行“.astype('Int64')”

```
s1 = pd.Series([1.434, 2.343, np.nan])
#without round() the next line returns an error 
s1.astype('Int64')
#cannot safely cast non-equivalent float64 to int64
##with round() it works
s1.round().astype('Int64')
0      1
1      2
2    NaN
dtype: Int64 
```

我的用例是我有一个浮点数系列，我想四舍五入到整数，但是当你做 .round() 时，数字末尾的 '*.0' 仍然存在，所以你可以从最后删除那个 0转换为 int。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-17T14:33:46.417

如果文本数据中有空格，通常为整数的列将作为 float64 dtype 转换为浮点数，因为 int64 dtype 无法处理空值。如果您正在加载多个带有空格的文件（最终会以 float64 结尾，而没有空格的其他文件将以 int64 结尾），这可能会导致架构不一致

此代码将尝试将任何数字类型列转换为 Int64（而不是 int64），因为 Int64 可以处理空值

```
import pandas as pd
import numpy as np

#show datatypes before transformation
mydf.dtypes

for c in mydf.select_dtypes(np.number).columns:
    try:
        mydf[c] = mydf[c].astype('Int64')
        print('casted {} as Int64'.format(c))
    except:
        print('could not cast {} to Int64'.format(c))

#show datatypes after transformation
mydf.dtypes 
```

# jquery - Jquery比较背景颜色

> ID：11548006
> 
> 赞同：1
> 
> 时间：2012-07-18T18:30:04.943
> 
> 标签：jquery

我在用：

```
var element = $(this).parents("tr:first");

if (element.css("background-color")=="black)")
    element.animate({ backgroundColor: "white" }, 1000);
else
    element.animate({ backgroundColor: "black" }, 1000); 
```

要更改背景颜色，但比较似乎失败，我也尝试过：

```
if (element.css("background-color")==rgb(0,0,0)) 
```

但是 if 条件似乎每次都返回 false ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:38:18.110

这取决于您的浏览器及其支持的内容。

一些浏览器会返回`rgb(0,0,0)`，但大多数较新的浏览器支持 rgba 并返回`rgba(0,0,0,0)`。其他浏览器可能返回完全不同的东西，谁知道呢？

试试这个[Fiddle](http://jsfiddle.net/GMNV9/)看看它是否可以工作，它适用于我在最新的 Chrome 中，但它可能不适用于所有浏览器。

```
var element = $(this).parents("tr:first");

if (element.css("background-color")==="rgba(0, 0, 0, 0)") {
    element.animate({ backgroundColor: "black" }, 1000);
}else{
    element.animate({ backgroundColor: "white" }, 1000);
} 
```

此外，您的 if/else 语句有缺陷，缺少大括号！

由于检查浏览器返回的颜色不是很可靠，您应该考虑使用标志来代替

```
var element = $(this).parents("tr:first");
var flag    = element.data("flag");

if ( flag ) {
    element.animate({ backgroundColor: "black" }, 1000);
}else {
    element.animate({ backgroundColor: "white" }, 1000);
}

element.data("flag", !flag); 
```

最后，jQuery 不支持没有插件或 jQuery UI 的动画颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:37:04.127

返回值是 rgb 格式，字符串应使用引号：

```
if(element.css("background-color") == "rgb(0, 0, 0)") 
```

# javacard - SIM卡小程序开发——硬件推荐

> ID：11548007
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:30:07.707
> 
> 标签：javacard, pcsc

我想开发 JavaCard 2.2.x 小程序，加载到开发者 SIM 卡。我还需要通过 Ubuntu 上的 PCSC-Lite 连接到 SIM 卡（因为 SEEK-FOR-ANDROID）。

但是，我不知道我应该买什么硬件......我已经从 Ebay 等购买了一些（便宜的）PC/SC 智能卡读卡器，但是金雅拓卡管理器或任何其他加载软件都无法识别小程序到 SIM 卡。

我负担不起尝试“真正的”开发套件，因为它们对我来说非常昂贵（......学生）。在购买任何这些之前，我需要确定。所以我的问题是...

**您能给我一些建议，我应该购买哪些 JavaCard 开发工具包（阅读器 + 开发 SIM 卡）？我读过，ACR38 开发套件与金雅拓开发套件配合得很好，但套件中没有 DEV SIM 卡（至少，规格中没有提到）。**

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:04:12.900

坦率地说，除了昂贵的（针对学生）Gemalto Card Admin 和 Gemalto Dev Suite 之外，我不知道任何包含样卡的便宜套件。[对于读者，我可以向您推荐金雅拓 PCTwin 阅读器，您可以在此处](http://boutique.gemalto.com/boutique/GEMALTO-B2CCORP-Site/-/PC-USB-TR/pdu-WFS-en_US-EUR-wrAKAwOEefAAAAEizsko8Cyo-JDQKAwOEVoIAAAElCuseUAux?JumpTo=OfferList&ParcoursTracking=.Home)从金雅拓网上商店在线购买。

同时，正式的 Gemalto Dev Suite 不能在 Ubuntu 上运行，您可以从 Gemalto Dev Network 下载的试用版有限制 - 您只能使用 Card Simulator 而不能使用真正的阅读器。可能这就是为什么您不能像使用 PCSC 阅读器一样使用阅读器的原因，Dev Suite 没有区别。

作为学生，我可以向您提出什么建议 - 参加金雅拓 SIMAgine 学生竞赛。在这种情况下，您将免费获得所有工具和卡片。

# paradigms - 这是什么类型的编程范式？

> ID：11548008
> 
> 赞同：0
> 
> 时间：2012-07-18T18:30:08.377
> 
> 标签：paradigms

在某些语言中，您可以非常轻松地做很多事情。例如：如果我想获取一个 XML 文档的值，我可以很容易地写出这行代码：

```
result = XML.GetValue("root/element/element"); 
```

您可以从这行代码中推断出哪种类型的编程范例？（面向对象？，程序？，...）

请介绍一些使用该编程范式的其他语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:36:43.550

好吧，这看起来像 XPath，它是一种查询语言（更多信息[http://en.wikipedia.org/wiki/XPath](http://en.wikipedia.org/wiki/XPath)）

此处列出了更多查询语言 - [http://en.wikipedia.org/wiki/Query_language](http://en.wikipedia.org/wiki/Query_language)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:37:04.440

由于涉及到有状态的函数调用，因此这样的代码行可以被认为是面向对象的编程范例。这个例子实际上很差，但可能会给出这个想法。因为GetValue“过程”作用于具有先前状态的对象，知道特定的xml文档。

谈论使用该范例的编程语言，它们是当今最流行的：例如 Java 和 C#

# android - 如何将已经在后台堆栈上启动的此活动带到前面的任务

> ID：11548010
> 
> 赞同：1
> 
> 时间：2012-07-18T18:30:19.187
> 
> 标签：android, android-activity, task

如果另一个任务想要启动此活动，如何将已启动活动的任务置于前面（此活动可以在堆栈后面）。我试图用意图和标志来做到这一点，但它没有帮助。新任务启动根活动，而不是将已经启动此活动的任务置于前面。不是从同一个应用程序创建的任务

在 netbeans 上，我有 2 个应用程序启动应用程序 B 和第二个应用程序 b，用户可以直接从设备启动它。

希望你能帮忙。如果可以给出一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:26:22.027

我不太确定我是否正确理解了这个问题，但是如果这样做，那么也许您可以以某种方式使用`startActivityForResult()`? 在这种情况下，根活动（为一个结果而开始）可能会收到一条消息，在这种情况下它应该开始（或带到前面）另一个活动。

可以使用 ie 标志来处理设备 BACK 键（因此它不会返回到根活动）。

# sql-server-2008 - 有没有办法让失败的 SELECT 不会扔到 TRY/CATCH 中？

> ID：11548013
> 
> 赞同：3
> 
> 时间：2012-07-18T18:30:26.830
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

例如：

```
CREATE PROCEDURE dbo.MyProc
AS
BEGIN
  SET NOCOUNT ON;
  BEGIN TRY
    ...
    DECLARE @Id INT;

    -- I don't want the following line to throw and abort processing. 
    -- I just want @Id to remain NULL. I can add a nested TRY/CATCH, but is there
    -- a better way?
    SET @Id=(SELECT Id FROM MyTable WHERE ...); 
    ...
  END TRY
  BEGIN CATCH
    ...
  END CATCH;
END; 
```

更新：澄清一下，如果返回多行，我希望 @Id 保持 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:41:48.023

我会做这样的事情来避免多行错误：

```
SELECT top 1 @Id = Id FROM MyTable WHERE ... 
```

或这个

```
SELECT @Id = Id FROM MyTable WHERE ...
if @@rowcount > 1
   set @id = null 
```

当有多行时，最后一块会将@Id 设置为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:59:11.897

尝试这个：

```
select @id = (select max(id) from MyTable Where <YOUR CONDITION> Having count(1) = 1) 
```

这将返回单行，如果有多个匹配则不返回任何行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:35:41.257

很确定这不会抛出：

```
SELECT @Id = Id FROM MyTable WHERE ... 
```

# java - 是否可以在 Java 中通过反射在新进程中调用 main 方法

> ID：11548014
> 
> 赞同：1
> 
> 时间：2012-07-18T18:30:33.927
> 
> 标签：java, reflection, processbuilder

是否可以在新进程中执行诸如 m.invoke(param1 ,param2) 之类的语句。

即，我想通过首先使用反射迭代搜索其主类并找到主类以在新进程中调用它来执行Java类文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:39:05.933

确实。

1.  在 Path 中查找所有可用的类
2.  反省并找到具有main方法的类[检查签名]
3.  使用 java [ProcessBuilder](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ProcessBuilder.html) [JRE 5 +] 或创建一个新的[java.lang.Process](http://java.sun.com/javase/6/docs/api/java/lang/Process.html)来生成它应该“正常工作”的新进程

# javascript - CodeMirror 使用 jQuery 导入文本

> ID：11548017
> 
> 赞同：0
> 
> 时间：2012-07-18T18:30:48.133
> 
> 标签：javascript, codemirror

我使用 CodeMirror 具有以下功能。

```
function app() {
    jQuery.get('http://localhost:2748/foo.txt', function (data) {
        alert(data);
    });
    alert(data);
    editor.setValue(data);
} 
```

警报显示文本文件数据，但是当我将它们分配给编辑器时不显示。例如，如果我创建一个新变量`t = "test";`，`editor.setValue(t);`然后它就可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:32:53.927

您`data`在回调函数之外不可用。在回调中设置编辑器值：

```
function app() {
    jQuery.get('http://localhost:2748/foo.txt', function (data) {
        alert(data);
        editor.setValue(data);
    });
} 
```

# asp.net-mvc-3 - 更正事件以检查 BaseController 类中的用户身份验证

> ID：11548031
> 
> 赞同：2
> 
> 时间：2012-07-18T18:31:45.970
> 
> 标签：asp.net-mvc-3

我正在将我的 Web 应用程序转换为 MVC 应用程序。我认为它会从中受益，但我是 MVC 的新手。我希望我的所有控制器都是基本控制器固有的，如果用户未通过身份验证，我要做的第一件事是将用户重定向到登录视图。已经编写的方法基本上会查找 Cookie，如果没有找到，它会对登录屏幕执行 Response.Redirect()。我想将此方法移至 BaseController 但我不确定最好的方法是什么。所以本质上我应该在加载页面之前调用什么 BaseController 事件来检查身份验证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:35:22.513

处理此问题的 MVC 方法是使用[AuthorizationAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)装饰控制器操作。

> 当您使用 AuthorizeAttribute 标记操作方法时，对该操作方法的访问仅限于经过身份验证和授权的用户。如果使用该属性标记控制器，则控制器中的所有操作方法都会受到限制。
> 
> Authorize 属性允许您指示授权仅限于预定义的角色或单个用户。这使您可以高度控制谁有权查看网站上的任何页面。
> 
> 如果未经授权的用户尝试访问标有 Authorize 属性的方法，MVC 框架将返回 401 HTTP 状态代码。如果站点配置为使用 ASP.NET 表单身份验证，则 401 状态代码会导致浏览器将用户重定向到登录页面。

# ssh - Cron 作业 - 无法打开输入文件：

> ID：11548034
> 
> 赞同：4
> 
> 时间：2012-07-18T18:31:52.987
> 
> 标签：ssh, crontab, cgi-bin

我已经设置了一个 php 文件来运行它只是回显你好。

```
<?php
echo hello;
?> 
```

我的 cron 工作如下所示：

```
/usr/local/bin/php -f “/home/username/public_html/mls/test.php” 
```

当我的脚本运行时，我收到一封确认电子邮件，上面写着：

```
Could not open input file: /home/username/public_html/mls/test.php 
```

我不知道这是什么原因造成的。我正在使用安装了 cpanel x 的 godaddy 的虚拟专用服务器。我已经使用 ssh 对文件夹和文件设置了权限 777，但仍然无法运行。

任何意见将是有益的。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:38:12.327

由于某种原因 PHP 无法打开该文件。尝试用“ls -la”替换 /usr/local/bin/php -f 以尝试获取更多信息。记住不要在 crontab 中引用文件名：php -f filename.php，而不是 php -f "filename.php"，除非它包含空格——然后最好使用单引号。

可能，尝试“ls -la /home”、“ls -la /home/username”、“ls -la ~/public_html”等等。

也尝试附加

```
2>&1 
```

到命令行，以防只有标准输出被邮寄给你（我真的不这么认为，但确保成本很低）。

# 另一种可能

crontab 指的是`/home/username/public_html/mls/test.php`- 即*用户名*的主目录最常见值内的公共 HTML 目录。

cron 作业可能没有以适当的用户和权限运行，或者它“看到”的用户实际上是**虚拟**用户 - 根本*没有*“/home/username” - 和“主目录”在其他地方，甚至可能只要 cron 作业运行就存在。在这种情况下，解决方案*可能*是参考

```
~/public_html/mls/test.php 
```

或者，如上所述，首先运行一个命令，例如`pwd`或`ls -la`以确定 cron 作业的当前工作目录的确切*位置*。

如果这也失败了，那么另一种解决方法可能是通过 curl 或 lynx 调用 PHP HTTP 处理程序：

```
/usr/bin/curl http://www.thishostname.com/mls/test.php 
```

可能使用某些环境变量或 curl 标头或 _GET 选项将脚本作为 cron 作业进行身份验证，并避免从外部访问它。

# sqlite - JRuby + Sqlitejdbc：没有找到适合 jdbc:sqlite 的驱动程序：

> ID：11548035
> 
> 赞同：0
> 
> 时间：2012-07-18T18:31:55.253
> 
> 标签：sqlite, jruby

在我只有一个用户帐户的机器上，我想将作业的输出转储到 sqlite 数据库而不是文本文件中。为此，我从 jarfile 运行 jruby。

使用本地 gem ( `dbi, dbd/Jdbc, jdbc/sqlite3`)的方法不起作用（`GEM_HOME`未找到合适的驱动程序），并且还会从 gem 中生成弃用消息（“include_class 已弃用。使用 java_import。”）

我转向 Zentus 的 sqlitejdbc-v056.jar 并在路径中运行带有 Zentus 的 JRuby：

`java -cp .:sqlitejdbc-v056.jar -jar jruby-complete-1.7.0.preview1.jar test.rb`

其中 test.rb 受到[http://www.zentus.com/sqlitejdbc/](http://www.zentus.com/sqlitejdbc/)的启发，以及[如何在 JRuby 中初始化 SQLite3 JDBC 驱动程序？](https://stackoverflow.com/questions/1717674/how-to-initialize-the-sqlite3-jdbc-driver-in-jruby)：

```
require 'java'
require '/home/jens/jruby/sqlitejdbc-v056.jar'

org.sqlite.JDBC                 # load the driver so DriverManager detects it 
p clazz = Java::JavaClass.for_name("org.sqlite.JDBC")
java.sql.DriverManager.registerDriver( clazz )
#Java::OrgSqlite::JDBC          # alternate means of same

puts "enumerating..."
java.sql.DriverManager.getDrivers.each{ |e| puts e }

connection = java.sql.DriverManager.getConnection 'jdbc:sqlite:/home/jens/jruby/test.db'
begin
  statement = connection.createStatement
  ...
ensure
  connection.close
end 
```

我从中得到的输出是：

```
class org.sqlite.JDBC
enumerating...
sun.jdbc.odbc.JdbcOdbcDriver@73415727
DriverManager.java:602:in `getConnection': java.sql.SQLException: No suitable driver found for jdbc:sqlite:/home/jens/jruby/test.db
from DriverManager.java:207:in `getConnection'
from NativeMethodAccessorImpl.java:-2:in `invoke0'
    ... 
```

奇怪的是，驱动程序由 DriverManager 列出，但不适合 sqlite。

我期待着任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:16:37.327

首先，您应该使用 bundler 来管理您的 gem 依赖项。Bundler 使用 Gemfile 列出您需要的 gem（将其放在脚本所在的位置）。并确保 jruby 在您的路径中。

在您的情况下， Gemfile 应包含：

```
source 'http://rubygems.org'

gem "activerecord-jdbcsqlite3-adapter", ">= 1.2" 
```

然后执行：

```
bundle install --path vendor/bundle 
```

然后像这样修改你的脚本：

```
require 'rubygems'
require "java"
require 'bundler/setup'
require 'jdbc/sqlite3'

Bundler.require
org.sqlite.JDBC                 # load the driver so DriverManager detects it 
p clazz = Java::JavaClass.for_name("org.sqlite.JDBC")
java.sql.DriverManager.registerDriver( clazz )

puts "enumerating..."
java.sql.DriverManager.getDrivers.each{ |e| puts e }

connection = java.sql.DriverManager.getConnection 'jdbc:sqlite:/home/jens/jruby/test.db'
begin
  statement = connection.createStatement
ensure
  connection.close
end 
```

# php - 转义引号php和mysql

> ID：11548038
> 
> 赞同：1
> 
> 时间：2012-07-18T18:32:06.563
> 
> 标签：php, mysql, sql, security, escaping

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我通过`addslashes($str)`.

当我将输入从文本字段保存到 MySQL 数据库时，这是否足以防止 MySQL 注入，或者我是否需要进一步过滤输入，因为您可以绕过这种转义方法？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:34:24.690

您应该阅读 PDO 中的准备好的语句： [http ://www.php.net/manual/en/pdo.prepared-statements.php](http://www.php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:35:36.320

转义引号绝对是不够的。最安全的做法是使用参数绑定。请参阅[mysqli_stmt::bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:39:23.940

就在这里。您可以根据预期值检查以下任何内容的所有参数：

*   变量的值是否有意义？
*   变量的值是否在合理的取值范围内？
*   变量的值是否在预定义的最大长度内？

这些是一些可以为您省去很多麻烦的基本检查。另外，为了避免更多问题：

*   始终过滤文件上传，从不执行上传的任何内容。
*   永远不要执行 SQL 或评估直接包含用户输入的代码。始终首先解析您的输入，以确保它不包含任何异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T18:34:55.860

你可以这样做：

```
<?php  
    $query = mysql_query("SELECT id FROM users WHERE username =   '".mysql_real_escape_string($username)."' AND password = '".mysql_real_escape_string($password)."'");  
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-18T18:35:42.640

我建议使用 mysql_real_escape_string 或类似函数（取决于您使用的数据库访问方法）。

# android - Android GPS 不再工作

> ID：11548040
> 
> 赞同：1
> 
> 时间：2012-07-18T18:32:26.487
> 
> 标签：android, gps

我在我的 HTC Desire S 上使用 GPS 并制作了一个非常小的地图应用程序。它工作得很好，直到我偶然发现了[这个应用程序](https://play.google.com/store/apps/details?id=com.lexa.fakegps)。我再次卸载它，现在我的 GPS 不再工作了。我知道有固定时间，但是

```
locManager.isProviderEnabled(LocationManager.GPS_PROVIDER) 
```

总是返回 true，并且应用程序不再请求位置更新。

GPSMapTrackerService.java：

```
package net.hobbycoder.android.gpsmap;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class GPSMapTrackerService extends Service implements LocationListener {

    private Resources res;
    private FileManager fileManager;
    private LocationManager locManager;
    private boolean showNotification = true;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        res = getResources();
        fileManager = new FileManager(getApplicationContext());
        locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        //GPS on?
        if(!locManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
            Toast.makeText(this, res.getString(R.string.noGPSText), Toast.LENGTH_LONG).show();
            showNotification = false;
            stopSelf();
        }
        else{
            showNotification = true;
        }
    }

    @Override
    public void onStart(Intent intent, int startID) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        if(showNotification)
            Toast.makeText(this, res.getString(R.string.startedText), Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onDestroy() {
        locManager.removeUpdates(this);
        if(showNotification)
            Toast.makeText(this, res.getString(R.string.stoppedText), Toast.LENGTH_SHORT).show();
    }

    public void onLocationChanged(Location loc) {
        fileManager.write(loc.getLatitude() + ":" + loc.getLongitude() + ";");
    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

似乎位置卡住了，因为我的时钟小部件下的文字说我在纽约，但我在德国。

[此应用程序](https://play.google.com/store/apps/details?id=com.chartcross.gpstest)也无法正常工作，因此问题不应该出现在我的代码中。

希望任何人都可以提供帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:02:52.443

尝试使用[GPS Status & Toobox](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2&hl=en)应用程序清除 GPS 数据并重新下载。我目前没有该应用程序，但它位于菜单选项中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:45:14.317

[Service.onStart()](http://developer.android.com/reference/android/app/Service.html#onStart%28android.content.Intent,%20int%29)已弃用，如果您阅读首选的[Service.onStartCommand()](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)文档，您会发现根据您的 API，onStart() 甚至可能不会被调用。

尝试将 onStart() 更改为 onStartCommand()：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    if(showNotification)
        Toast.makeText(this, res.getString(R.string.startedText), Toast.LENGTH_SHORT).show();
} 
```

**此外，您永远不会在***任何*覆盖的方法中调用该`super`函数。更新所有这些（除了 onBind() 什么都不做）：

 *```
@Override
public void onCreate() {
    super.onCreate();
    ...

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    if(showNotification)
        Toast.makeText(this, res.getString(R.string.startedText), Toast.LENGTH_SHORT).show();
    return super.onStartCommand(intent, flags, startId);
}

// etc, etc 
```*

# vb.net - 在通过 51degrees (vb.net) 重定向之前捕获 HTTP 错误

> ID：11548045
> 
> 赞同：1
> 
> 时间：2012-07-18T18:32:45.907
> 
> 标签：vb.net, http-error, 51degrees

我正在使用 51degrees.mobi，它运行良好，但在移动服务器遇到问题（HTTP 错误状态）的情况下，我希望能够允许用户继续使用移动站点的桌面版本。我知道我可以通过注释掉配置的重定向部分来停止重定向，但是是否可以务实地停止重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:56:28.757

我目前在 51Degrees.mobi 工作。

如果我理解正确，那么通过 51Degrees 无法完成您要求做的事情，因为您无法更改配置规则。

但是，您可以通过编辑 web.config 文件来实现您想要做的事情，以便在使用 customErrors 元素抛出错误代码时将您发送到正常页面？可以在[此处](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)找到有关执行此操作的更多信息。也可以通过修改您的页面[PreInit()](http://msdn.microsoft.com/en-us/library/system.web.ui.page.preinit.aspx#Y0)事件来完成。

希望这可以帮助。

# c# - WCF：将用户名和密码传递给另一个服务（无 Https）

> ID：11548053
> 
> 赞同：1
> 
> 时间：2012-07-18T18:33:11.370
> 
> 标签：c#, .net, wcf, wcf-security, wcf-authentication

我必须创建一个 WCF 服务（ServiceWrapper），它引用另一个 WCF 服务（RealService）。

我希望 ServiceWrapper 的客户在身份验证请求中传递用户名/密码。

ServiceWrapper 的操作调用 RealService。我需要将收到的用户名/密码传递给使用 RealSerivce 进行身份验证，然后调用其操作。

我需要在 Http 而不是 Https(SSL/TLS) 上托管服务。

问题：如何在不使用 Https(SSL/TLS) 的情况下使用服务接收的客户端凭据向引用的服务进行身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:27:22.380

您可以使用 SOAP 安全性。有两种 SecurityMode 适合您 - Message、TransportWithMessageCredential。

1.  `<binding>`您应该在这样的部分配置安全模式（用户名）

    ```
    <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="" />
        <message clientCredentialType="UserName" />
    </security> 
    ```

2.  接下来，您应该在部分中指定自定义验证`<behavior>`器

    ```
    <behavior name="CommonBehavior">
        <serviceMetadata />
        <serviceDebug includeExceptionDetailInFaults="True"/>
        <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom"
                 customUserNamePasswordValidatorType="Megatec.MasterTourService.CustomUserNameValidator, Megatec.MasterTourService"/>

            <serviceCertificate findValue="WCFServer" storeLocation="LocalMachine" 
                storeName="My" x509FindType="FindBySubjectName"/>
            <clientCertificate>
                <authentication certificateValidationMode="PeerTrust" />
            </clientCertificate>
        </serviceCredentials>
    </behavior> 
    ```

3.  在您的自定义验证器中，您可以访问和存储用户名和密码，它们是作为 ServiceWrapper 的贷方提供的。

    ```
    using System.ServiceModel;
    using System.IdentityModel.Selectors;
    namespace MyService
    {
        public class CustomUserNameValidator : UserNamePasswordValidator
        {
            public override void Validate(string userName, string password)
            {
                if (!(userName == "testMan" && password == "pass"))
                    throw new FaultException("Incorrect login or password");

                // save your Usermame and Password for future usage.
             }
        }
    } 
    ```

4.  当您需要访问 RealService 时，您可以使用用户名和密码作为凭据，如下面的示例：

    ```
    private readonly Dictionary<Type, Object> channelFactoryDictionary = new Dictionary<Type, Object>();
    private ChannelFactory<T> GetChannelFactory<T>() where T : class
    {
        if (channelFactoryDictionary.Keys.Contains(typeof(T)))
            return channelFactoryDictionary[typeof(T)] as ChannelFactory<T>;

        var channelFactory = new ChannelFactory<T>("*");
        channelFactory.Credentials.UserName.UserName = userName;
        channelFactory.Credentials.UserName.Password = password;

        channelFactoryDictionary.Add(typeof(T), channelFactory);

        return channelFactory;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:52:37.967

如果 SSL 不是一个选项，您将需要使用 SOAP 消息安全性 (SecurityMode = Message)。

[http://msdn.microsoft.com/en-us/library/ms733137.aspx](http://msdn.microsoft.com/en-us/library/ms733137.aspx)

# random - 如何在lua中生成随机浮点数？

> ID：11548062
> 
> 赞同：16
> 
> 时间：2012-07-18T18:33:45.720
> 
> 标签：random, lua

我需要在 Lua中生成随机**浮点数。**它必须 > 1，因此 math.random() 不是解决方案。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T18:39:53.190

这应该生成 1（包括）和 100（不包括）之间的随机浮点数

```
math.random() + math.random(1, 99) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-13T12:52:17.107

您也可以使用类似这样的方法来获取和之间的`lower`数字`greater`

```
function randomFloat(lower, greater)
    return lower + math.random()  * (greater - lower);
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T04:43:59.150

只是为了好玩而发帖，但您可以使用 math.random() 不带参数来执行此操作：P

```
print(math.floor((math.random()*100)+0.5)) 
```

# c# - 如何停止正在执行的功能

> ID：11548065
> 
> 赞同：1
> 
> 时间：2012-07-18T18:33:58.410
> 
> 标签：c#

我在我的网页上调用了一个函数。此函数会进行一些计算，可能需要几个小时才能完成。当功能正常工作时，页面什么也没有显示，只是挂在“加载”阶段。我注意到如果我关闭浏览器，该功能仍然有效。我怎样才能结束这个过程？

```
String query ="some query";
Scanner.Program eb = new Scanner.Program();
eb.getEbay_com_API(query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:42:12.213

它是 Web 服务器做这项工作，而不是浏览器。重新启动 IIS，或在线程上执行函数，以便稍后终止线程（yuk），或将处理传递给外部程序（IIS 不意味着执行长时间运行的任务）。

# javascript - 为什么这个咖啡脚本没有“正确”编译？

> ID：11548066
> 
> 赞同：2
> 
> 时间：2012-07-18T18:34:00.087
> 
> 标签：javascript, coffeescript

我在 Rails 应用程序中有以下内容：

```
# projects.js.coffee
jQuery ->
  $('#project_title').typing ->
    start: (event, element) ->
      element.css 'background', '#fa0'

    stop: (event, element) ->
      element.css 'background', '#f00'
      alert 'send request to populate samples'

    delay: 400 
```

但是，在编译的 js 文件中，我得到以下内容：

```
(function() {

  jQuery(function() {
    return $('#sprinkler_word').typing(function() {
      ({
        start: function(event, element) {
          return element.css('background', '#fa0');
        },
        stop: function(event, element) {
          return element.css('background', '#f00');
        }
      });
      alert('send request to populate sprinkle samples');
      return {
        delay: 400
      };
    });
  });

}).call(this); 
```

为什么“警报”调用不包含在“停止”功能中？我假设我的语法不正确，但我看不到在哪里。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:36:45.983

将您的代码粘贴到“Try Coffeescript”小部件中您期望的代码，即停止函数中的警报：

```
jQuery(function() {
  return $('#project_title').typing(function() {
    return {
      start: function(event, element) {
        return element.css('background', '#fa0');
      },
      stop: function(event, element) {
        element.css('background', '#f00');
        return alert('send request to populate samples');
      },
      delay: 400
    };
  });
}); 
```

因此，我猜测制表符和空格会弄乱缩进。

# gwt - 将 Java.util.scanner 与 GWT 一起使用

> ID：11548068
> 
> 赞同：2
> 
> 时间：2012-07-18T18:34:09.883
> 
> 标签：gwt, java.util.scanner

由于某种原因，当我尝试将扫描仪与 gwt 一起使用时，出现以下错误：

```
No source code is available for type java.util.Scanner; did you forget to inherit a required module? 
```

我环顾四周，似乎“没有源代码可用于 xxxx 类型”错误是由于没有 Java 类型的 Javascript 等效类型。扫描仪不能与 GWT 一起使用吗？

这是我的代码片段：

```
import java.util.Scanner;
...
public void submit(){
    String text = editor.getEditor().getText();
    Scanner input = new Scanner(text);
    while(input.hasNextLine()){
        String line = input.nextLine();
        if(line.contains("//")){
            cInfo.setDone(false);
            cInfo.setCode(text);
            return;
        }
        cInfo.setDone(true);
        cInfo.setCode(text);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T18:41:06.060

java.util.Scanner 不是 GWT JRE 仿真的一部分。如果您需要详细了解仿真内部的内容，请参阅文档链接：

[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_util](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_util)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:02:34.213

您的代码（至少是您问题的当前版本中的代码）可能^([*])相当于

```
public void submit() {
  String text = editor.getEditor().getText();

  if ("".equals(text))
    return;

  cInfo.setDone(!text.contains("//"));
  cInfo.setCode(text);
} 
```

但是，我有一种感觉，这实际上可能不是想要做的（或者是吗？）

如果你需要在客户端拆分字符串，我通常推荐[Guava](http://code.google.com/p/guava-libraries/)中的 Splitter 类。它的大多数方法都是[GwtCompatible](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/annotations/GwtCompatible.html)，并且（与 CharMatcher、Joiner 一起...）在 Java 代码的客户端和服务器端都可以使用。

[[*] 假设 setDone 和 setCode 是没有副作用的简单设置器]

# math - x86-64 大整数表示？

> ID：11548070
> 
> 赞同：3
> 
> 时间：2012-07-18T18:34:15.057
> 
> 标签：math, x86-64, biginteger, arbitrary-precision

x86-64 上的高性能原生大整数库如何表示内存中的大整数？（还是会有所不同？有最常见的方法吗？）

我天真地考虑将它们作为以 0 结尾的数字字符串存储在 base 2 ^(64)中。

例如假设`X`在内存中为：

```
[8 bytes] Dn
.
.
[8 bytes] D2
[8 bytes] D1
[8 bytes] D0
[8 bytes] 0 
```

令 B = 2 ^(64)

然后

> X = D [n] * B ^n + ... + D [2] * B ² + D [1] * B ¹ + D [0]

空字符串（即 8 个字节的零）表示零。

这是一种合理的方式吗？这种方式的优缺点是什么？有没有更好的办法？

你将如何处理签名？2 的补码是否适用于这个可变长度值？

（发现这个：[http](http://gmplib.org/manual/Integer-Internals.html) : //gmplib.org/manual/Integer-Internals.html 什么是肢体？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:42:23.937

我认为这将是一个从最低值到最高值的数组。我在汇编程序中实现了添加任意大小的数字。CPU 提供了[进位标志](http://en.wikipedia.org/wiki/Carry_flag)，使您可以轻松地执行这些类型的操作。您编写了一个循环，以字节大小的块执行操作。进位标志包含在使用“带进位加法”指令（ADC 操作码）的下一个操作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T07:11:18.673

这里我有一些处理大整数的例子。

**添加**

原理很简单。您需要使用`CF`(carry-flag) 来处理任何更大的溢出。让我们考虑一下两个 128 位数字的加法。

```
num1_lo: dq 1<<63
num1_hi: dq 1<<63
num2_lo: dq 1<<63
num2_hi: dq 1<<62
;Result of addition should be 0xC0000000 0x000000001 0x00000000 0x00000000
mov eax, dword [num1_lo]
mov ebx, dword [num1_lo+4]
mov ecx, dword [num1_hi]
mov edx, dword [num1_hi+4]

add eax, dword [num2_lo]
adc ebx, dword [num2_lo+4]
adc ecx, dword [num2_hi]
adc edx, dword [num2_hi+4]
jc .overflow 
```

**减法**

与加法非常相似，尽管您`CF`现在称为借用。

```
mov eax, dword [num1_lo]
mov ebx, dword [num1_lo+4]
mov ecx, dword [num1_hi]
mov edx, dword [num1_hi+4]

sub eax, dword [num2_lo]
sbb ebx, dword [num2_lo+4]
sbb ecx, dword [num2_hi]
sbb edx, dword [num2_hi+4]
jb .overflow    ;or jc 
```

**乘法**

困难得多。您需要将第一个数字的每个部分与第二个数字的每个部分相乘并添加结果。您不必只乘以肯定会溢出的两个最高部分。伪代码：

```
long long int /*128-bit*/ result = 0;
long long int n1 = ;
long long int n2 = ;
#define PART_WIDTH 32 //to be able to manipulate with numbers in 32-bit registers

int i_1 = 0; /*iteration index*/
for(each n-bit wide part of first number : n1_part) {
    int i_2 = 0;
    for(each n-bit wide part of second number : n2_part) {
        result += (n1_part << (i_1*PART_WIDTH))*(n2_part << (i_2*PART_WIDTH));
        i_2++;
    }
    i++;
} 
```

**分配**

更复杂。OsDev.org 论坛上的用户 Brendan[发布](http://forum.osdev.org/viewtopic.php?p=224704#p224704)了 n 位整数除法的示例伪代码。我把它贴在这里是因为原理是一样的。

```
result = 0;
count = 0;
remainder = numerator;

while(highest_bit_of_divisor_not_set) {
    divisor = divisor << 1;
    count++;
}
while(remainder != 0) {
    if(remainder >= divisor) {
        remainder = remainder - divisor;
        result = result | (1 << count);
    }
    if(count == 0) {
        break;
    }
    divisor = divisor >> 1;
    count--;
} 
```

# jquery - 构建没有滚动条的可滚动div

> ID：11548072
> 
> 赞同：0
> 
> 时间：2012-07-18T18:34:23.323
> 
> 标签：jquery, scrollbar

我正在尝试构建一个没有滚动条的动态可滚动菜单。我按照[Stackoverflow](https://stackoverflow.com/questions/3293650/hide-scrollbar-while-still-able-to-scroll-with-mouse-keyboard)的示例进行操作，但仍然出现滚动条。我怎样才能摆脱滚动条？我的代码在[jsFiddle](http://jsfiddle.net/Cupidvogel/nnDCt/)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T18:45:44.010

我想这就是你要找的...... [http://jsfiddle.net/qcv5Q/1/](http://jsfiddle.net/qcv5Q/1/)

我更新了你的[http://jsfiddle.net/nnDCt/2/](http://jsfiddle.net/nnDCt/2/) 我刚刚从列表中删除了宽度

# php - PHP MySQL检查请求是否有'#'字符插入新行

> ID：11548083
> 
> 赞同：1
> 
> 时间：2012-07-18T18:35:01.887
> 
> 标签：php, mysql

我有一些如下要求：

```
$input  = "$POS,1234,5223,A,2719"; 
```

如果收到上述请求，请使用以下代码处理保存到数据库：

```
$input_ex = explode(",", $input);

$input_ex[0];
$input_ex[1];
$input_ex[2];
$input_ex[3];
$input_ex[4];

mysql_query("INSERT INTO table_name (cl_1,cl_2,cl_3,cl_4,cl_5)
values ('$input_ex[0]','$input_ex[1]','$input_ex[2]','$input_ex[3]','$input_ex[4]') 
```

***问题：***
我的输入有时可能不止一个，并用“#”字符分割
最后一行输入可能也有“#”字符

```
$input  = "$POS,1234,5223,A,2719#
$POX,752,4342,N,SXD#
$POZ,122,6242,B,XFB#"; 
```

***如何***分隔每一行并将其作为新行插入数据库？
谢谢 ;）

***编辑：*** 输入是 3 种不同的模式，第 1 行是没有任何`#`符号的单行，第 2 行是在最后一行有更多行`#` ，第 3 行在最后一行末尾没有`#`符号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:38:10.633

```
foreach (explode('#', $input) as $record) {
  $record = trim($record);

  if ($record == '')
    continue;

  $input_ex = explode(',', $record);

  $input_ex[0];
  $input_ex[1];
  $input_ex[2];
  $input_ex[3];
  $input_ex[4];

  // Same MySQL query as you already have
  mysql_query("...");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:36:58.387

首先按“#”展开，然后为每个结果按“，”展开并添加新行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:37:50.063

只需先在“#”上爆炸，然后像您正在做的那样循环遍历在“，”上爆炸的结果数组，并为每一行进行插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:41:43.400

您将需要使用`explode()`两次。首先检查多条记录，然后再一次在分隔符上拆分`,`：

```
<?php  
$input  = "POS,1234,5223,A,2719# POX,752,4342,N,SXD# POZ,122,6242,B,XFB#";

foreach(explode('#', $input) as $records){
    $record = explode(',', $records);
    print_r($record);
}
?> 
```

# objective-c - 随机不重复数 Xcode

> ID：11548086
> 
> 赞同：0
> 
> 时间：2012-07-18T18:35:15.023
> 
> 标签：objective-c, xcode, random, repeat

对不起我的英语不好，我是阿根廷人。我有一个问题，我正在制作一个琐事应用程序，从逻辑上讲，它不必重新问同样的问题。我有 30 个问题，这是我的代码：

```
-(IBAction)randomear{
    random1=arc4random() % 30;
    if (random1 == 0)
    {
        labelpregunta.text = @"Las ovejas pueden nadar?";
    }
    if (random1 == 1)
    {
        labelpregunta.text = @"Con que se tiñe la lana de negro?";
    }
    if (random1 == 2)
    {
        labelpregunta.text = @"De que material es el mejor casco?";
    }
    if (random1 == 3)
    {
        labelpregunta.text = @"Para fabricar lana necesitas 4 _____";
    }
} 
```

我想创建一个 NSArray ，如果有重复的数字，它会再次随机播放。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:39:39.053

您想要的实际上是一个[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)（因为您将在新值进入时对其进行扩展），并用于`-indexOfObject`检查先前选择的值。请注意， NSMutableArray 存储类型为 的对象`id`，而 int 是一个原始类型。您需要将随机值包装在 NSNumber 中，然后才能存储它们。像这样的东西：

```
//.h
@property (nonatomic, strong) NSMutableArray *previouslySelectedValues;

//.m
-(IBAction)randomear{
    //I suppose this is an int, right?
    //Supongo que esto es un número entero.
    random1=arc4random() % 30;
    //check if the array can find the object.  It internally uses `-isEqual` in a loop for us
    //estamos comprobando si la matriz se puede encontrar el objeto
    if (![previouslySelectedValues indexOfObject:[NSNumber numberWithInt:random1]]) {
        if (random1 == 0)
        {
            labelpregunta.text = @"Las ovejas pueden nadar?";
        }
        if (random1 == 1)
        {
            labelpregunta.text = @"Con que se tiñe la lana de negro?";
        }
        if (random1 == 2)
        {
            labelpregunta.text = @"De que material es el mejor casco?";
        }
        if (random1 == 3)
        {
            labelpregunta.text = @"Para fabricar lana necesitas 4 _____";
        }

        //et cetera/ etcétera

        //add the object because it doesn't exist and we don't want to select it again.
        //Añadir el objeto a la matriz debido a que es nuevo
        [previouslySelectedValues addObject:[NSNumber numberWithInt:random1]];
    }
    else {
        //do nothing, or use the below pick again if you want
        //No hacer nada, o utilizar el método de abajo para elegir otro número

        //[self randomear];
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:58:23.697

```
 // You store your strings here
    static NSArray *myQuestions = [[NSArray alloc] initWithObjects:
                                          @"Las ovejas pueden nadar?",
                                          @"Con que se tiñe la lana de negro?",
                                          @"De que material es el mejor casco?",
                                          @"Para fabricar lana necesitas 4 _____",nil];
    // Make a copy which is mutable
    NSMutableArray *copy = [NSMutableArray arrayWithArray:myQuestions];
    ...

-(IBAction)randomear{

    // Now select one entry
    random1=arc4random() % [copy count];
    labelpregunta.text = [copy objectAtIndex:random1];
    [copy removeObjectAtIndex:random1];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:19:43.713

我不会生成一个随机数并检查该数字是否已被使用，而是创建一个数字 0 到 29 的 NSMutableArray（每个都包含在一个 NSNumber 中），然后使用 Gregory Goltsov 在此 SO 中提供的类别随机打乱**数组**质疑[什么是最好的方式来洗牌一个 nsmutablearray](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)。

然后，您只需从 NSMutable 数组的开头迭代每个 NSNumber 对象。IE

```
#import "NSMutableArray_Shuffling.h // From Gregory Goltsov
NSMutableArray* randomNumbers = [[NSMutableArray alloc] init];
for(int i=0; i<30; i++) {
  [randomNumbers addObject:[NSNumber numberWithInt:i]];
}
[randomNumbers shuffle]; // From Gregory Goltsov

...

int lastIndex = 0;

-(IBAction)randomear
{
    if (lastIndex<30) {
        NSNumber* theRandomNumber = [randomNumbers objectAtIndex:lastIndex];
        int theQuestion = [theRandomNumber intValue];
        if (theQuestion == 0)  {
            labelpregunta.text = @"Las ovejas pueden nadar?";
        }
        if (theQuestion == 1) {
            labelpregunta.text = @"Con que se tiñe la lana de negro?";
        }
        if (theQuestion == 2) {
            labelpregunta.text = @"De que material es el mejor casco?";
        }
        if (theQuestion == 3){
            labelpregunta.text = @"Para fabricar lana necesitas 4 _____";
        }

        //et cetera/ etcétera    
        lastIndex++;
    } else {
        // No more questions
    }
} 
```

但是，最好用一系列对象填充数组，这些对象既包含问题又包含单个问题的答案。IE

```
@interface aQuestion : NSObject
@property (nonatomic, string) NSString* question;
@property (nonatomic, string) NSString* answer;
-(void)initWithQuestion:(NSString)aQuestion and:(NSString) anAnswer;
-(BOOL)isCorrectAnswer(NSString testAnswer);
@end

@implementation aQuestion
-(void)initWithQuestion:(NSString*)aQuestion and:(NSString*) anAnswer
{
  if(!(self=[super init])) return self;

  question = aQuestion;
  answer = anAnswer;

  return self;
}

-(BOOL)isCorrectAnswer(NSString testAnswer)
{
  [answer isEqualToString:testAnswer];
}
@end

...
#import "NSMutableArray_Shuffling.h // From Gregory Goltsov
NSMutableArray* questions = [[NSMutableArray alloc] init];

[questions addObject:[[aQuestion alloc] initWithQuestion:@"Question 1" and:@"Answer 1"]];
[questions addObject:[[aQuestion alloc] initWithQuestion:@"Question 2" and:@"Answer 2"]];
[questions addObject:[[aQuestion alloc] initWithQuestion:@"Question 3" and:@"Answer 3"]];
[questions addObject:[[aQuestion alloc] initWithQuestion:@"Question 4" and:@"Answer 4"]];
[questions shuffle]; // From Gregory Goltsov

...
for(int i=0; i<[questions count]; i++) {
   aQuestion* theQuestion = [questions objectAtIndex:i];

   // Ask theQuestion.question
   labelpregunta.text = theQuestion.question;

   ...

   // wait for theAnswer

   ....

   NSString theAnswer = labelrespuesta.text;

   if ([theQuestion isCorrectAnswer:theAnswer]) {
      // You win!!!!!!!
   }
}

// No more questions 
```

**编辑**

我最初说的是 Kristopher Johnson 的回答，但我的意思是 Gregory Goltsov 的回答

(Y mi español es peor que el Inglés)

# html - 链接透明

> ID：11548089
> 
> 赞同：0
> 
> 时间：2012-07-18T18:15:36.263
> 
> 标签：html, css

我目前正在建立一个网站，一旦我`<a>`为一个词添加了链接标签`<p>`，它就会变得透明。主页上有两个链接，编码完全相同，但其中一个链接是透明的？html 通过验证，css 也是如此。如果我在颜色显示中添加旧学校`<font color>`html 属性`<a>`，但单词会在不同的行上分开。我知道这种方式已经过时了，但是现在没有 CSS 可以工作吗？帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:25:41.233

确保背景颜色与超链接颜色不同。

对于踢，试试这个：`<font face="verdana" color="green">[your-entire-hyperlink-code]</font>`

这不是应该这样做的，而只是为了测试它。如果您看到文字，那么您的背景颜色和超链接颜色是相同的，需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:42:20.597

尝试为`<a>`标签中的`<p>`标签添加 CSS 选择器。类似于以下内容：

```
p a {
  color: #000;
  }
p a:hover {
  color: #1c1c1c;
  } 
```

默认情况下，这应该是任何`<a>`黑色，悬停时是深灰色。如果这不起作用，请尝试禁用除默认浏览器样式表之外的所有样式（如 Hakre 所说）。

# bash - 我的 Bash 别名不起作用

> ID：11548093
> 
> 赞同：13
> 
> 时间：2012-07-18T18:35:33.720
> 
> 标签：bash, shell, scripting, alias

我不知道为什么，但我的 Bash 别名似乎不起作用。这是我的`.bashrc`文件

```
 # v 0.0.1 - 7/03/12

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

# expanding history to 10000 commands
export HISTSIZE=10000

# don't store repeated commands more than once
export HISCONTROL=ignoredups

# where to look for Java
export JAVA_HOME=/Library/Java/Home

# tomcat server configuration
export CATALINA_HOME=/usr/local/apache-tomcat-6.0.35

# default editor
export EDITOR=vim

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi 
```

这是我的`.bash_aliases`文件

```
# v 0.0.1 - 7/03/12

# aliases for directory traversal
alias ..='cd ../'
alias ...='cd ../../'
alias ....='cd ../../../'

alias gs='git status '
alias ga='git add '
alias gb='git branch '
alias gc='git commit'
alias gd='git diff'
alias go='git checkout '
alias gk='gitk --all&'
alias gx='gitx --all'

alias got='git '
alias get='git ' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T18:40:07.027

将此添加到您的末尾`.bashrc`：

```
if [ -f $HOME/.bash_aliases ]
then
  . $HOME/.bash_aliases
fi 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T17:18:21.810

我最近遇到了类似的问题。该解决方案似乎正在关闭所有打开的 shell（root 和用户；我没有注意到我在编辑用户 .bashrc 和 .bash_aliases 文件时正在运行最小化的 root shell）。.bash_aliases 文件似乎被读取了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-23T18:51:10.730

默认情况下

```
if [ -f ~/.bash_aliases ]; then
.  ~/.bash_aliases
fi 
```

这些可在 ubuntu 18,19 中的 .bashrc 文件中找到。实际上问题在于获取文件，因此通过运行以下命令来获取这两个文件。我遇到了同样的问题，这就是我解决它的方法。

```
source ~/.bashrc
source ~/.bash_aliases 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T18:41:01.113

Bash 不查找名为`.bash_aliases`;的文件。你必须明确来源。

环顾四周，它似乎`~/.bash_aliases`来自`.bashrc`Ubuntu 机器上的默认值；我无权确认。但是，它不是标准`bash`配置文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-23T02:49:38.930

我最近安装了 RVM 并将我的终端配置文件更改为“作为登录 shell 运行命令”。这使 .bashrc 无法加载。

修复：编辑 -> 配置文件首选项 -> 标题和命令 -> 作为登录 shell 运行命令（取消选中）

查找此帖子以获取更多信息，为我修复它。

[https://askubuntu.com/questions/161249/bashrc-not-executed-when-opening-new-terminal](https://askubuntu.com/questions/161249/bashrc-not-executed-when-opening-new-terminal)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-31T05:25:26.500

有时忘记 source bashrc 也会产生这个问题。所以在添加别名后不要忘记来源它。

```
source ~/.bashrc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T18:41:37.760

您需要包含该文件。从默认`.bashrc`文件执行此操作的示例代码如下：

```
# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi 
```

# jmeter - Jmeter 抛出无法为 HTTPS 创建密钥库错误

> ID：11548102
> 
> 赞同：0
> 
> 时间：2012-07-18T18:36:02.647
> 
> 标签：jmeter

我正在使用 jmeter 2.7 并试图访问我的 HTTPS 测试服务器。根据[我的最后一个问题](https://stackoverflow.com/questions/11106796/setting-up-jmeter-to-do-https)，Ant 确实帮助我在我的机器上正确设置了 https。它运行良好，但突然之间我无法进行任何 https 测试。我没有对我的设置进行任何更改。我只是将协议设置为 https。当我运行时，我收到以下密钥库错误。有人可以告诉我如何解决这个问题吗？

> 无法创建密钥库：[default =KeyStore.getDefaultType()] 未找到
> java.lang.RuntimeException：无法创建密钥库：[default = KeyStore.getDefaultType()]
> 在 org.apache.jmeter.util.SSLManager.getKeyStore中找不到(SSLManager.java:116)
> 在 org.apache.jmeter.util.JsseSSLManager.createContext(JsseSSLManager.java:232)
> 在 org.apache.jmeter.util.JsseSSLManager.getContext(JsseSSLManager.java:198)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:56:09.540

这现在对我有用。我不得不卸载并安装 jmeter，现在一切似乎都好了。

# php - 根据品类、设计师、品牌组合数组，根据品类、品牌、设计师划分数组

> ID：11548113
> 
> 赞同：1
> 
> 时间：2012-07-18T18:37:00.030
> 
> 标签：php, arrays

我有 2 个 PHP 数组，第一个存储值，第二个存储键，如下所示：

1.  `['first designer', 'shirt', 'cloth1', 'cloth2', 'second designer']`
2.  `['designer', 'brand', 'category', 'category', 'designer']`

我想转换这些数组，以便我可以按以下格式输出它们，根据第二个数组的相应元素对第一个数组中的项目进行分组：

```
 <div id="category">
  cloth1
  cloth2
  </div>

  <div id="brand">
  shirt
  </div>

  <div id="designer">
  first designer
  second desinger
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:41:39.460

试试这个：

```
<?php
    $foo = array("designer", "brand", "category", "category", "designer");
    $bar = array("first designer", "shirt", "cloth1", "cloth2", "second designer");
    $baz = array();

    for ($i = 0; $i < sizeof($foo); $i++) {
        $baz[$foo[$i]][] = $bar[$i];
    }

    foreach ($baz as $key=>$values) {
        echo '<div id="' . $key . '">
';
        foreach ($values as $value) {
            echo '    ' . $value . '<br />
';
        }
        echo '</div>
';
    }
?> 
```

这将输出：

```
<div id="designer">
    first designer<br />
    second designer<br />
</div>
<div id="brand">
    shirt<br />
</div>
<div id="category">
    cloth1<br />
    cloth2<br />
</div> 
```

**键盘**：[http ://codepad.org/T7NmPyVR](http://codepad.org/T7NmPyVR)

# php - PHP中的面包屑使用“foreach”

> ID：11548117
> 
> 赞同：1
> 
> 时间：2012-07-18T18:37:17.880
> 
> 标签：php, arrays, loops, foreach, breadcrumbs

我有一个应用程序，每个页面都包含一个头文件。由于我的应用程序的性质，这些页面没有组织到文件夹中，并且页面中包含的文件往往会中断。

所以我试图通过包含两个关于标题的数组来使用面包屑。一个带有页面名称，一个带有相应的 URL，如下所示：

```
$breadCrumbs=array("Department Managment", "Class Managment"); //The breadcrumb page names
$breadLinks=array("/department.php","/class.php"); //The breadcrumb URLs
require_once "../include/headers.php"; //Include header 
```

我真正需要帮助的是 foreach 循环。这是我到目前为止所拥有的：

```
 <?php
foreach ($breadCrumbs as $bc){
        foreach ($breadLinks as $bl){
echo ("<li class='ELEMENT-crumb'><a href='" . $bl ."'>" . $bc . "</a></li>");}} ?> 
```

但是，这会按此顺序返回四个面包屑：

部门管理 - /department.php

部门管理 - /class.php

班级管理 - /department.php

类管理 - /class.php

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:41:11.667

实现此目的的一种方法是使用*一个*数组，该数组将描述用作键，将 URL 用作它们的关联值。那么你只需要一个循环：

```
// Array indexed by page name
$breadCrumbs=array(
  "Department Managment" => "/department.php",
  "Class Managment" => "/class.php"
);

// Loop over the array only once
foreach ($breadCrumbs as $page => $url) {
  // Using htmlspecialchars() in case it includes <,>,& etc...
  echo ("<li class='ELEMENT-crumb'><a href='" . $url ."'>" . htmlspecialchars($page) . "</a></li>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:42:33.313

为什么不做类似的事情：

```
$link1 = array("name" => "Department Management", "link" => "/department.php");
$link2 = array("name" => "Class Management", "link" => "/class.php");

$breadcrumbs = array($link1, $link2);

foreach($breadcrumb as $link) {
    echo '<li class="ELEMENT-crumb"><a href="' + $link["link"] + '">' + $link["name"] + '</a></li>';
} 
```

没有测试过，但它应该可以工作。

# asp.net - MVC 中的文件上传控制 - 使其在原始位置查找文件

> ID：11548118
> 
> 赞同：0
> 
> 时间：2012-07-18T18:37:19.413
> 
> 标签：asp.net, .net, html, asp.net-mvc, file-upload

我在 MVC 项目中使用文件上传控件。

```
 <input type="file" name="file" id="Ids2" style="float:right"/> 
```

当我尝试将文件 (TestDocument.txt) 保存在数据库中时出现以下错误。假设我点击上传按钮，然后浏览器到位置 - “c:\TestDocument.txt” - 并尝试上传它，我得到这个错误..

> 找不到文件“C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\TestDocument.txt”。

编辑：（我从输入类型“文件”值传递文件名）

```
session.Advanced.DatabaseCommands.PutAttachment(id,null, 
                    File.ReadAllBytes(@fileName), optionalMetaData); 
```

即使我从 C:\ 位置选择文本文件，它总是在上面的“C:\Program Files (x86)\Co.....”位置查找文件。如何使它从原始位置获取文件。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:19:45.947

您不能只将文件的文件名传递给服务器并期望使用该文件路径打开文件。传递的路径在客户端本地计算机上，但您正试图在服务器上打开文件。

您需要一个表单元素来将实际文件内容发布到服务器。

Phil Haack 有一篇很好的文章，其中包含有关如何使用 MVC 上传文件的信息。

[http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# html - CSS角度边框作为带有文本的按钮

> ID：11548120
> 
> 赞同：1
> 
> 时间：2012-07-18T18:37:24.250
> 
> 标签：html, css, border, angle

[http://jsfiddle.net/NEgv6/](http://jsfiddle.net/NEgv6/)

我想用css而不是图像来做这个，因为文本不会相同，所以角度边框（背景）会扩大

我在 Google Play (https://play.google.com/store) 页面上看到了这个方法，我检查了这个元素，但我无法让它在我的情况下工作

解决[了 http://jsfiddle.net/NEgv6/5/](http://jsfiddle.net/NEgv6/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:00:03.350

这应该是一个很好的基础：http: [//jsfiddle.net/NEgv6/2/](http://jsfiddle.net/NEgv6/2/)

# java - GoogleAppEngine 错误 403

> ID：11548121
> 
> 赞同：0
> 
> 时间：2012-07-18T18:37:26.543
> 
> 标签：java, windows, eclipse, google-app-engine

我已经编写了该 gae 代码：

index.html 一个表单

```
 <!-- Simple text field -->
 <label for="name">Name </label>
 <input type="text" name="name"/>
 <br/>

  <!-- Email -->
 <label for="email">Email </label>
 <input type="email" name="email"/>
 <br/>

  <!-- Textarea -->
 <label for="description">Description </label>
 <textarea  name="description" cols="50" rows="5">Type your comment here</textarea>
 <br/>

 <input type="submit" name="submit" value="Send Request"/>
 </form>
 </body>
</html> 
```

web.xml

```
 <servlet>
        <servlet-name>FeedbackServlet</servlet-name>
        <servlet-class>at.wunderapps.servlets</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>FeedbackServlet</servlet-name>
        <url-pattern>/feedback</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

小服务程序：

```
import java.io.IOException;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class FeedbackServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String name = req.getParameter("name");
        String description = req.getParameter("description");
        String email = req.getParameter("email");
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);

        String msgBody = name  + description + email + " :EMAIL";

        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress("apps@gmail.com",
                    "Es FUNKTIONIERT!!!"));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress("my.mail@mail.com", "Your name"));
            msg.setSubject("Bestellung");
            msg.setText(msgBody);
            Transport.send(msg);

        } catch (Exception e) {
            resp.setContentType("text/plain");
            resp.getWriter().println("Something went wrong. Please try again.");
            throw new RuntimeException(e);
        }

        resp.setContentType("text/plain");
        resp.getWriter().println(
                "Thanks you for your feedback. An Email has been send out.");
    }
} 
```

当我在做 localhost 我得到：

HTTP 错误 403

访问 / 时出现问题。原因：

```
FORBIDDEN 
```

为什么？

PS.：我在 Windows 7 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:04:19.483

您的 html 页面未指定 servlet 的路径，因此容器使用默认的 /。

采用

```
<input type="submit" name="submit" value="Send Request" action="/feedback"/> 
```

# javascript - 如何 - jQuery 切换文本视图

> ID：11548127
> 
> 赞同：1
> 
> 时间：2012-07-18T18:37:58.027
> 
> 标签：javascript, jquery, html, css, toggle

我一直在研究一个 jQuery HTML CSS，我的大部分内容都是正确的。我想要做的是当我点击隐藏文本应该向下滑动的名称时——我得到了这个工作。但是我有 4-5 个这样的名字，当我点击第二个名字时，第一个应该隐藏起来，依此类推

这是我的代码

```
 /*JQUERY CODE */

 jQuery(document).ready(function () {

jQuery('#toggle li').click(function () {

    var text = jQuery(this).children('div.slide');

    if (text.is(':hidden')) {
        text.slideDown('200');
        jQuery(this).children('span').html('-');
        jQuery(this).children('.selected').css('color','#a61607');
    } else {
        text.slideUp('200');
        jQuery(this).children('span').html('+');
        jQuery(this).children('.selected').css('color','#878484');      
    }

});

}); 
```

/* HTML 代码 */

```
<ul id="toggle">
  <li>
    <h3 class="selected">TEST 1</h3>
    <span>+</span>
    <div class="slide">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet consequat sem, a venenatis purus mollis in. Mauris bibendum dui eget nunc sagittis sit amet placerat tortor euismod. Duis blandit urna in lorem venenatis condimentum.</p>
    </div>
  </li>
  <li>
    <h3 class="selected">TEST 2</h3>
    <span>+</span>
    <div class="slide">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet consequat sem, a venenatis purus mollis in. Mauris bibendum dui eget nunc sagittis sit amet placerat tortor euismod. Duis blandit urna in lorem venenatis condimentum..</p>
    </div>
  </li>
  <li>
    <h3 class="selected">TEST 3</h3>
    <span>+</span>
    <div class="slide">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet consequat sem, a venenatis purus mollis in. Mauris bibendum dui eget nunc sagittis sit amet placerat tortor euismod. Duis blandit urna in lorem venenatis condimentum.</p>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:40:53.517

我认为这是最简单（但可能不是那么漂亮）的方法：

```
if(text.is(':hidden'))
{
    jQuery('#toggle li > div.slide:not(:hidden)').click();
    text.slideDown('200');
    jQuery(this).children('span').html('-');
    jQuery(this).children('.selected').css('color','#a61607');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:45:54.280

快速解决方案：

```
jQuery(document).ready(function () {

jQuery('#toggle li').click(function () {
    $('.slide').slideUp('200');
    $('#toggle span').html('+');
    $('.selected').css('color','#878484');
    var text = jQuery(this).children('div.slide');

    if (text.is(':hidden')) {
        text.slideDown('200');
        jQuery(this).children('span').html('-');
        jQuery(this).children('.selected').css('color','#a61607');
    } 
});

}); 
```

示例：http: [//jsfiddle.net/Jznbh/](http://jsfiddle.net/Jznbh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:48:30.597

`jQuery('#toggle li').click()`在函数顶部添加这一行：

```
jQuery(this).siblings().children('div.slide').slideUp(); 
```

`div`这将在选定的向下滑动时向上滑动打开的 s。您可能还想看看[jQuery UI 的手风琴功能](http://jqueryui.com/demos/accordion/)。

# lisp - Common Lisp：“字符串中没有非空白字符”

> ID：11548131
> 
> 赞同：2
> 
> 时间：2012-07-18T18:38:10.063
> 
> 标签：lisp, common-lisp, sbcl

对于 Project Euler [Problem 8](https://projecteuler.net/problem=8)，我被告知要解析一个 1000 位数字。这是一个蛮力的 Lisp 解决方案，它基本上每 5 个连续的数字进行一次，并从头到尾将它们相乘，并在循环结束时返回最大的一个。

编码：

```
(defun pep8 ()
  (labels ((product-of-5n (n)
         (eval (append '(*)
               (loop for x from n to (+ n 5)
                collect (parse-integer
                1000digits-str :start x :end (+ x 1)))))))
    (let ((largestproduct 0))
      (do ((currentdigit 0 (1+ currentdigit)))
          ((> currentdigit (- (length 1000digits-str) 6)) (return largestproduct))
        (when (> (product-of-5n currentdigit) largestproduct)
          (setf largestproduct (product-of-5n currentdigit))))))) 
```

它编译时没有任何警告，但在运行它时我得到：

```
no non-whitespace characters in string "73167176531330624919225119674426574742355349194934...".
   [Condition of type SB-INT:SIMPLE-PARSE-ERROR] 
```

`product-of-5n`我通过将其再次编写为全局函数来检查本地函数是否正常工作：

```
(defun product-of-5n (n)
  (eval (append '(*)
        (loop for x from n to (+ n 5)
           collect (parse-integer
                1000digits-str :start x :end (+ x 1)))))) 
```

这个编译没有警告并且在运行它时，似乎运行完美。例如，

> CL_USER> (product-of-5n 1) => 882

这似乎是正确的，因为前五个数字是 7、3、1、6 和 7。

至于`1000digits-str`，它只是用`defvar`和 Emacs'编译的`longlines-show-hard-newlines`，我*认为*字符串中没有任何空白字符，因为这就是 SBCL 抱怨的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:31:02.097

`EVAL`这不是一个好主意。

你的循环上限是错误的。

否则，我用数字字符串尝试了它，它可以工作。

它也是欧拉 8，而不是 9。

这是我的版本：

```
(defun euler8 (string)
  (loop for (a b c d e) on (map 'list #'digit-char-p string)
        while e maximize (* a b c d e))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:21:06.527

> 我*认为*字符串中没有任何空白字符，因为这就是 SBCL 所抱怨的，对吧？

错误消息不是抱怨*white-space的**存在*，而是抱怨*non-white-space*的*缺失*。但这实际上有点误导：消息*应该*说的是要解析的特定子字符串中没有非空格。这是因为您跑出了字符串的末尾，因此解析了一个零长度的子字符串。

 ***另外，`product-of-5n`定义不完全正确。`(product-of-5n 1)`返回前五位数字的乘积只是偶然事件。字符串从 开始索引`0`，因此`(product-of-5n 1)`从*第二个*字符开始；*并且函数从n* +0迭代到*n* +5，一共是六个字符；所以`(product-of-5n 1)`返回 3 × 1 × 6 × 7 × 1 × 7，恰好与 7 × 3 × 1 × 6 × 7 × 1 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:58:27.850

前段时间我已经解决了这个问题，~~并且您在问题描述中缺少一件事~~。您需要将 consequent 读取为从*任何*偏移量开始到一个 sting 中，而不仅仅是可被 5 整除的偏移量。因此问题的解决方案将更像以下内容：

```
(defun pe-8 ()
  (do ((input  (remove #\Newline
"73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450"))
       (tries 0 (1+ tries))
       (result 0))
      ((= tries 5) result)
    (setq result
          (max result
               (do ((max 0)
                    (i 0 (+ 5 i)))
                   ((= i (length input)) max)
                 (setq max
                       (do ((j i (1+ j))
                            (current 1)
                            int-char)
                           ((= j (+ 5 i)) (max current max))
                         (setq int-char (- (char-code (aref input j)) 48))
                         (case int-char
                           (0 (return max))
                           (1)
                           (t (setq current (* current int-char))))))))
          input (concatenate 'string (subseq input 1) (subseq input 0 1))))) 
```

这有点难看，但它说明了这个想法。

*编辑*对不起，我混淆了你的两个功能。所以那种喜欢是不正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:29:35.687

因为我不知道常见的 lisp，所以我稍微修改了你的代码以适应 elisp。至于发现错误，除了已经说过的（`(product-of-5n 1)`应该返回 126），我唯一的评论是 in `(pep8)`，做 length-4 而不是 -6 （否则你会丢失最后 2 个字符）。抱歉，我不知道如何修复您的解析错误（我`string-to-number`改用了），但如果您发现它有用，这里是代码：

```
(defun product-of-5n (n)       ;take 5 characters from a string "1000digits-str" starting with nth one and output their product
  (let (ox)                    ;define ox as a local variable
    (eval                      ;evaluate
     (append '(*)              ;concatenate the multiplication sign to the list of 5 numbers (that are added next)
         (dotimes (x 5 ox)     ;x goes from 0 to 4 (n is added later to make it go n to n+4), the output is stored in ox
           (setq ox (cons      ;create a list of 5 numbers and store it in ox 
             (string-to-number 
              (substring 1000digits-str (+ x n) (+ (+ x n) 1) ) ;get the (n+x)th character  
              )                ;end convert char to number
             ox )              ;end cons
             )                 ;end setq
           )                   ;end dotimes, returns ox outside of do, ox has the list of 5 numbers in it
         )                     ;end append
     )                         ;end eval
    )                          ;end let
  )

(defun pep8 () ;print the highest 
  (let ((currentdigit 0) (largestproduct 0))                    ;initialize local variables
    (while  (< currentdigit  (- (length 1000digits-str) 4)    ) ;while currentdigit (cd from now on) is less than l(str)-4
      ;(print (cons "current digit" currentdigit))              ;uncomment to print cd
      (when (> (product-of-5n currentdigit) largestproduct)     ;when current product is greater than previous largestproduct (lp)
      (setq largestproduct (product-of-5n currentdigit))        ;save lp
      (print (cons "next good cd" currentdigit))                ;print cd
      (print (cons "with corresponding lp" largestproduct))     ;print lp
      )                                                         ;end when
    (setq currentdigit (1+ currentdigit))                       ;increment cd
    )                                                           ;end while
    (print (cons "best ever lp" largestproduct) )               ;print best ever lp
    )                                                           ;end let
  )

(setq 1000digits-str "73167176531330624919")
(product-of-5n 1)
(pep9) 
```

返回（在前 20 个字符上运行时）

```
"73167176531330624919"
126 

("next good cd" . 0)
("with corresponding lp" . 882)

("next good cd" . 3)
("with corresponding lp" . 1764)

("best ever lp" . 1764) 
```***

# c# - 将 LineSeries 值绑定到对象字段

> ID：11548133
> 
> 赞同：0
> 
> 时间：2012-07-18T18:38:11.547
> 
> 标签：c#, wpf, wpftoolkit

我正在使用 2010 版的 WPF Toolkit for DataVisualization。

如果我想以编程方式创建 LineSeries 图表，这就是我之前所做的。此代码有效并成功绘制数据：

```
public class TrendData {
    public string Group;
    public IEnumerable<KeyValuePair<DateTime, decimal>> Series;
}
...
//somewhere within my chart update method
foreach (TrendData line in DataCollection) {
   LineSeries l = new LineSeries() {
      DependentValuePath = "Value",
      IndependentValuePath = "Key",
      Title = line.Group,
      ItemsSource = line.Series
   };
   Chart.Series.Add(l);
} 
```

这没有问题。但是，我想将其他值与数据点一起存储，因为我想在鼠标悬停数据点时显示其他信息。所以我天真地尝试了这个：

```
public class TrendData {
   public string Group;
   public IEnumerable<PointData> Series;
}
public class PointData {
   public DateTime time;
   public decimal rate;
   public int x;
}
...
//somewhere within my chart update method
foreach (TrendData line in DataCollection) {
   LineSeries l = new LineSeries() {
      DependentValuePath = "rate",
      IndependentValuePath = "time",
      Title = line.Group,
      ItemsSource = line.Series
   };
   Chart.Series.Add(l);
} 
```

这不起作用，而是给我一个`InvalidOperationException: "No suitable axis is available for plotting the dependent value."`来自 DataPointSeries。

想法？我这样做完全错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:29:42.557

事实证明这绝对完美。我只是在其他地方的代码中有错字，导致了这种情况。

# c# - MVVM - 在 ViewModel 中使用实体

> ID：11548135
> 
> 赞同：1
> 
> 时间：2012-07-18T18:38:20.640
> 
> 标签：c#, mvvm, dependency-injection, inversion-of-control, castle-windsor

我真的只是从 MVVM、IoC 和依赖注入开始，我遇到了一个我不知道如何解决的绊脚石，但我明白它为什么会发生。

我将 Castle Windsor 用于 DI 和 IoC 功能，并将 MVVM Light 作为我在 WPF 应用程序中的 MVVM 框架。使用[本教程](http://fir3pho3nixx.blogspot.co.uk/2011/08/silverlight-mvvm-light-toolkit-and.html)，我设法让 Castle Windsor 创建一个`MainPageViewModel`注入`IGroupRepository`构造函数的函数。我已经在温莎城堡注册了一个模拟实现。

以下是`MainPageViewModel`该类中除构造函数之外的唯一其他代码。

```
public ObservableCollection<GroupViewModel> Groups
{
    get
    {
        var groupVms = new ObservableCollection<GroupViewModel>();
        IEnumerable<Group> groups = _repository.GetAllGroups();
        foreach (Group g in groups)
        {
            var vm = new GroupViewModel(g);
            groupVms.Add(vm);
        }

        return groupVms;
    }
} 
```

目的是为存储库中的每个组创建一个视图模型。但是，这样做会导致 Castle Windsor 给出以下异常：

> 无法创建组件“Planner.ViewModel.GroupViewModel”，因为它需要满足依赖关系。'Planner.ViewModel.GroupViewModel' 正在等待以下依赖项：
> 
> *   未注册的服务“Planner.Models.Group”。

我理解这个例外 - Castle Windsor 负责构建我的视图模型，但它无法处理我的实体。

我做了很多谷歌搜索，但发现这个问题的答案或建议很少，这让我认为我所做的事情是错误的。 [这个 Stack Overflow 问题](https://stackoverflow.com/questions/2720329/should-i-use-dtos-as-my-data-models-in-mvvm)有两个答案表明在视图模型上有一个实体是可以的，但我开始怀疑这是否属实。其他问题，[例如这个](https://stackoverflow.com/questions/4147250/ef4-mvvm-expose-entities-in-viewmodel)问题表明实体不应该靠近视图模型。

解决此问题的正确方法是什么？

**更新：**根据要求，这是异常的堆栈跟踪：

```
at Castle.MicroKernel.Handlers.DefaultHandler.AssertNotWaitingForDependency()
at Castle.MicroKernel.Handlers.DefaultHandler.ResolveCore(CreationContext context, Boolean requiresDecommission, Boolean instanceRequired, Burden& burden)
at Castle.MicroKernel.Handlers.DefaultHandler.Resolve(CreationContext context, Boolean instanceRequired)
at Castle.MicroKernel.Handlers.AbstractHandler.Resolve(CreationContext context)
at Castle.MicroKernel.DefaultKernel.ResolveComponent(IHandler handler, Type service, IDictionary additionalArguments, IReleasePolicy policy)
at Castle.MicroKernel.DefaultKernel.Castle.MicroKernel.IKernelInternal.Resolve(Type service, IDictionary arguments, IReleasePolicy policy)
at Castle.MicroKernel.DefaultKernel.Resolve(Type service, IDictionary arguments)
at Castle.Windsor.WindsorContainer.Resolve(Type service)
at Planner.ViewModel.ViewModelResolver.Resolve(String viewModelName) in D:\Planner\Planner\Planner\ViewModel\ViewModelResolver.cs:line 27
at Planner.ViewModel.ViewModelLocator.get_Item(String viewModelName) in D:\Planner\Planner\Planner\ViewModel\ViewModelLocator.cs:line 21 
```

我认为这是正确的行为，因为下面的代码（我相信）拦截了对视图模型构造函数的任何调用并在适当时注入它们。

```
public class ViewModelResolver : IViewModelResolver
{
    private IWindsorContainer _container;

    public object Resolve(string viewModelName)
    {
        if (_container == null)
        {
            _container = new WindsorContainer();
            _container.Install(new WindsorViewsInstaller());
            _container.Install(new WindsorRepositoriesInstaller());
        }

        var viewModelType =
            GetType()
            .Assembly
            .GetTypes()
            .Where(t => t.Name.Equals(viewModelName))
            .FirstOrDefault();

        return _container.Resolve(viewModelType);
    }
} 
```

**更新 2：**我认为这回答了 Ritch 的问题：

```
public class ViewModelLocator : DynamicObject
{
    public IViewModelResolver Resolver { get; set; }

    public ViewModelLocator()
    {
        Resolver = new ViewModelResolver();
    }

    public object this[string viewModelName]
    {
        get
        {
            return Resolver.Resolve(viewModelName);
        }
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = this[binder.Name];
        return true;
    }
} 
```

我想我现在对这一点有了更多的了解。问题实际上不在于我发布的原始代码。问题实际上是在设置温莎时发生的，不是吗？不过，我仍然不确定如何解决该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:57:05.330

`Groups`on属性`MainPageViewModel`创建了一堆不在容器中的虚拟机，但是您的堆栈跟踪是寻找绑定/创建 GroupViewModel 实例的定位器（为什么？我现在无法用您发布的代码来判断。） .

您在`GroupViewModel`s 的创建方式和容器在做什么方面存在脱节。您要么需要让 Windsor 通过工厂接口[Factory Interface Documentation](http://docs.castleproject.org/Default.aspx?Page=Typed-Factory-Facility-interface-based-factories&NS=Windsor&AspxAutoDetectCookieSupport=1)创建它们，要么将它们完全从容器中移除并自行管理它们。基于直觉，我会倾向于工厂界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:28:31.883

Ritch 的回答使我朝着正确的方向前进，但我想发布一个单独的答案，以便我可以展示我最终得到的代码，希望它对尝试这样做的下一个人有用。

除了 Ritch 的回答之外，[这个 Stack Overflow 问题](https://stackoverflow.com/questions/8053092/using-castle-windsor-child-containers-to-resolve-a-type-with-a-specific-instance)和Castle Windsor 的主要贡献者之一 Krzysztof Koźmic 的[这篇博](http://kozmic.pl/2009/12/23/castle-typed-factory-facility-reborn/)文都帮助我以我认为正确的方式解决了这个问题。

正如 Ritch 所说，我不应该直接为我的视图模型调用构造函数——这就是容器的用途。所以这样做的方法是创建一个类来帮助 Windsor 创建你的视图模型。这被称为类型化工厂设施。这些类的好处是您实际上不需要实现它们——它们只是接口。这是最终将用于创建视图模型的类的代码：

```
public interface IGroupViewModelFactory
{
    GroupViewModel Create(Group group);
} 
```

这被注入到视图模型的构造函数中，该构造函数将创建`GroupViewModel`在我的例子中是`MainWindowViewModel`类。这是该类的代码：

```
public class MainWindowViewModel : ViewModelBase
{
    private readonly IGroupRepository _repository;
    private readonly IGroupViewModelFactory _groupViewModelFactory;

    public MainWindowViewModel(IGroupRepository repository, IGroupViewModelFactory groupViewModelFactory)
    {
        _repository = repository;
        _groupViewModelFactory = groupViewModelFactory;
    }

    public ObservableCollection<GroupViewModel> Groups
    {
        get
        {
            var groupVms = new ObservableCollection<GroupViewModel>();
            IEnumerable<Group> groups = _repository.GetAllGroups();
            foreach (Group g in groups)
            {
                var vm = _groupViewModelFactory.Create(g);
                groupVms.Add(vm);
            }

            return groupVms;
        }
    }
} 
```

最后一步是向 Windsor 注册工厂类，这是通过以下代码完成的：

```
_container.AddFacility<TypedFactoryFacility>();

_container.Register(
    Component.For<Group>(),
    Component.For<IGroupViewModelFactory>()
    .AsFactory()); 
```

值得注意的是，我之前链接的问题`Component.For<Group>(),`在上面的代码中没有这一行。没有那个，我从温莎那里得到了一个例外，但不幸的是我没有保留细节，我不能再复制它，所以我的应用程序中可能还有其他问题。

通过 Castle Windsor 的魔力，您现在可以从存储库中的实体创建视图模型！

# php - 在函数中未定义的变量

> ID：11548142
> 
> 赞同：0
> 
> 时间：2012-07-18T18:38:44.657
> 
> 标签：php, variables, undefined

我正在处理一个项目，我收到 $host、$dbname、$user 和 $pass 的未定义错误。

但是只有在 dbConnect() 函数内部时才会出现错误。

这是代码（upload.php）：

```
<?php
error_reporting(E_ALL);
require('config.php');

$filename = htmlentities($_FILES['file']['name']);
$tmpname = $_FILES['file']['tmp_name'];
$filesize = $_FILES['file']['size'];
$filetype = $_FILES['file']['type'];    

function dbConnect() {

    try {
        global $dbcon;
        $dbcon = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    }
    catch (PDOException $e) {
        echo $e->getMessage();
    }
}

if (dbConnect()) {
    print('worked');
} 
```

配置.php：

```
<?php
global $host, $user, $pass, $dbname;

$host =  "localhost"; // MySQL Hostname
$user = "root"; // MySQL User
$pass = "mypass"; // MySQL Password
$dbname = "files"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:43:04.543

您需要将变量作为参数传递给函数。在函数外部声明的变量在该函数内部不可用：

```
function dbConnect($user, $pass, $host, $dbname) {

    try {
        global $dbcon;
        $dbcon = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    }
# ... 
```

阅读更多关于[PHP 中的变量作用域](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:39:51.063

您还需要在 dbConnect 中声明这些变量 GLOBAL 。

```
function dbConnect() {
  try {
        global $dbcon;
        global $host, $user, $pass, $dbname;
        $dbcon = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
  }
  catch (PDOException $e) {
        echo $e->getMessage();
  }
} 
```

**编辑**

是的，全局变量并不是一个好主意——它们阻碍了代码重用并“污染”了命名空间，你永远不知道哪些变量存在哪些不存在，并且冒着更改在其他地方使用的变量的风险。

解决问题的更好方法是将所需信息作为“参数”传递。这同样适用于返回值，它可以是资源（如果一切顺利的话）或表示错误消息的字符串。

```
function dbConnect($host, $dbname, $user = 'nobody', $pass = '') {
  try {
        return new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
  }
  catch (PDOException $e) {
        return $e->getMessage();
  }
} 
```

你会调用这样一个函数来传递参数并检查它的输出，如果一切顺利，它应该是一个对象：

```
if (!is_object($conn = dbConnect($host, $dbname, $user, $pass) {
   die("There was an error: $conn");
} 
```

参数的另一个优点是您可以为参数设置默认值（例如，如果您编写了 dbConnect($host, $dbname)，该函数将“理解”并使用 'nobody' 并为其余参数使用空密码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:25:54.763

我建议您使用数组来存储连接字符串信息。

首先，在您的`config.php`页面中创建一个返回必要的数据库连接字符串信息的函数。要使用，您只需在其中声明一个变量`upload.php`，该变量`$dbconfig`将函数返回的值存储`loadDBConfig()`在`config.php`文件中。`dbConnect()`然后，您将通过声明`$dbcon`变量并将值设置为 来执行该函数`dbConnect()`。这会将函数的结果返回给变量，然后您可以检查所需的结果。

该解决方案消除了对全局变量的需求并改进了组织。

*注意：从技术上讲，您的整个 DB 交互应移至一个类以提高可移植性。*

**上传.php**：

```
...
function dbConnect() {
    $dbconfig = loadDBConfig();
    try {
        $dburl = "mysql:host=" . $dbconfig['host'] . ";dbname=" . $dbconfig['dbname'];
        return new PDO($dburl, $dbconfig['user'], $dbconfig['pass']); 
    } catch (PDOException $e) {
        echo $e->getMessage();
    }
 }  

$dbcon = dbConnect();
... 
```

**配置.php**：

```
<?php 
function loadDBConfig(){
    $host =  "localhost"; // MySQL Hostname 
    $user = "root"; // MySQL User 
    $pass = "mypass"; // MySQL Password 
    $dbname = "files"; 

    return array('host' => $host, 'user' => $user,  'pass' => $pass, 'dbname' => $dbname);
}
?> 
```

# objective-c - Objective-C 中指针的使用

> ID：11548143
> 
> 赞同：1
> 
> 时间：2012-07-18T18:38:48.200
> 
> 标签：objective-c, pointers

> **可能重复：**
> [客观语言中的指针有什么意义](https://stackoverflow.com/questions/10582250/what-is-the-point-of-pointers-in-objective-language)

我对何时以及为什么在 Obj-C 代码中使用指针感到困惑。我是 Obj-C 的新手，并且从我大学的入门课程中获得了 C++ 的良好基础。

```
NSDate *now = [NSDate date]; 
```

为什么在这里使用指针（以及它的目的到底是什么？），而不是在这里......

```
NSUInteger arrayLength = [<some array> count]; 
```

我对第二个例子更满意，但第一个例子仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:42:30.987

令人困惑的是Apple的typedef的措辞。

```
NSUInteger 
```

只是一种幻想`typedef`；`unsigned int`因此它是标量类型而*不是*对象；对于这样一个简单的用例，您通常不需要指向它的指针。

然而，

```
NSDate 
```

是基础课程；这意味着它的实例是正确的 Objective-C 对象。您可能知道，Objective-C 是一种完全动态的语言：不允许类的静态实例，因此每个对象本质上都是一个指针（嗯，而不是指针后面分配的内存）。所以当你使用 Objective-C 对象时，你总是需要一个指向它们的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:47:50.760

嗯，Objective-C 和 C++ 之间有一些根本的区别。在 Objective-C 中，实际上有一个“通用对象”（类型“id”），你可以传递对象而不用担心类。

使这成为可能的实现细节之一是 Objective-C 没有“静态”对象。*所有*对象都是通过“new”等价物创建的，并通过指针访问（字符串文字可能不同，但它们仍然是“NSString*”类型）。这就是它在 Objective-C 中的方式；你根本不能有一个“NSString MyString”。

正因为如此，整个“对象只是对象，编译器实际上并不是你正在处理的东西”是可能的，因为所有对象都只是简单的指针——它们都是相同的大小。编译器可以在不知道它们是什么的情况下传递它们，您可以将它们存储在容器中而容器不知道它们是什么等。

Objective-C 和 C++ 可能都是 C 的“面向对象”扩展，但它们仍然完全不同。

编辑：您可以编写诸如“NSString* MyString”之类的东西，以便编译器知道它正在处理什么样的对象，但这只是方便：您仍然可以将其他对象放入该指针中（事实上，因为“new”等效通常返回 id，我犯的一个更常见的错误是“新建”一个与指针所说的不同的类）从积极的方面来说，如果您将 NSWindow* 分配给 MyString，编译器会警告您，并且它如果您在 MyString 上调用“open”，也会警告您。然而，这只是编译器的一个额外好处；您也可以将所有内容声明为“id”，或者丢弃警告。

# moodle - 获取moodle版本信息，没有管理员权限

> ID：11548150
> 
> 赞同：15
> 
> 时间：2012-07-18T18:39:15.820
> 
> 标签：moodle

有没有办法只使用“教师”级别的访问权限来获取 Moodle 网站的版本信息？似乎此功能在 1.9.7 及更高版本中已删除。我正在尝试自动化上传测试的过程并且拥有版本信息会非常方便。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-07-30T08:27:08.097

为了查看moodle的当前版本，你只需要阅读这个文件： [http://yourmoodlesite/lib/upgrade.txt](http://yourmoodlesite/lib/upgrade.txt)

以下是有关它的更多信息： [https ://github.com/moodle/moodle/blob/MOODLE_29_STABLE/lib/upgrade.txt](https://github.com/moodle/moodle/blob/MOODLE_29_STABLE/lib/upgrade.txt)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T05:20:04.210

抱歉，这些说明可能看起来有些晦涩难懂，但这是我能找到的获得只有“教师”级别访问权限的 Moodle 版本的唯一方法。

作为一名教师，您应该能够创建任何课程的备份（尽管此功能可能已在您使用的 Moodle 中删除）。备份只是 zip 文件，但具有 .mbz 扩展名。如果将此扩展名更改为 .zip，您将能够提取 zip。解压缩 zip 后，打开“moodle_backup.xml”，在那里您应该在顶部附近的某处找到“moodle_release”项目，为您提供用于创建备份的 Moodle 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T12:58:28.837

当没有管理员或文件访问权限时，最肮脏的做法是与版本之间的公共文件不同。例如，index.php 文件在 v1.x 上可以是 1024Kb 长度，在 1.2 版本上可以是 1033Kb 长度。

此外，检查一组文件的存在/不存在是一种常用方法（css、html、js、图标等）

如果我找到特定的解决方案，我将再次编辑。

**第一次编辑：对于 19 或更高版本，您可以直接从**[https://github.com/moodle/moodle/blob/MOODLE_19_STABLE/README.txt](https://github.com/moodle/moodle/blob/MOODLE_19_STABLE/README.txt) 的 readme.txt 文件中检查版本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-17T09:39:14.133

作为一名助教，我不想搞乱备份，这听起来很奇怪，但考虑到我独特的位置，合理（对我来说）。

在我使用的具有 TA 权限的 moodle 的实现中，页面底部有一个指向 moodle 文档的链接，如果您打开此链接，它会将您带到带有`moodle_url/moodle_version/___`.

也许这是我的系统所特有的，但我相信这是默认设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-27T01:37:12.140

如果您甚至没有实例上的帐户，您仍然可以找到版本。API 中的任何身份验证错误都将返回以下形式的错误消息：

```
[{
   "error":true,
   "exception":{
       "message":"Course or activity not accessible.",
       "errorcode":"requireloginerror",
       "link":"https:\/\/moodle.example.com\/",
       "moreinfourl":"http:\/\/docs.moodle.org\/36\/en\/error\/moodle\/requireloginerror"
   }
}] 
```

moreinfourl 包含一个近似的版本号（在本例中为 3.6）。对我来说，当我访问实例的登录页面时请求了这个页面 - 一个 POST 请求

```
https://moodle.example.com/lib/ajax/service.php?sesskey=JQrdIcgMn4&info=core_fetch_notifications 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-10T08:54:25.170

我的辅助函数在这里： [https ://gist.github.com/tigusigalpa/af051a9112512b1b0369572b5dbea2fd](https://gist.github.com/tigusigalpa/af051a9112512b1b0369572b5dbea2fd)

```
function checkMoodleVersion($version, $checkfor = 'all', $compare = '<=') {
    global $CFG;

    $versions = [
        '3.1' => [
            'version' => '2016052300',
            'release' => '3.1'
        ],
        '3.2' => [
            'version' => '2016120500',
            'release' => '3.2'
        ],
        '3.3' => [
            'version' => '2017051500',
            'release' => '3.3'
        ],
        '3.4' => [
            'version' => '2017111300',
            'release' => '3.4'
        ],
        '3.5' => [
            'version' => '2018051700',
            'release' => '3.5'
        ],
        '3.6' => [
            'version' => '2018120300',
            'release' => '3.6'
        ]
    ];
    switch ($checkfor) {
        case 'all':
            if (isset($versions[$version]['version'])) {
                return version_compare($versions[$version]['version'], $CFG->version, $compare) &&
                    version_compare($version, $CFG->release, $compare);
            }
            break;
        case 'version':
        case 'release':
            if (isset($versions[$version][$checkfor])) {
                return version_compare($versions[$version][$checkfor], $CFG->$checkfor, $compare);
            }
            break;
    }
    return false; 
```

}

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-19T04:19:27.063

默认情况下不是，因为这可用于收集过时的 Moodle 站点。

您可以创建一个脚本来相当容易地做到这一点，例如：

```
<?php
require_once('config.php');
echo 'Version: '.$CFG->version;
echo 'Humand readable release: '.$CFG->release; 
```

# jquery - 如何使用 jquery 禁用所有超链接

> ID：11548152
> 
> 赞同：1
> 
> 时间：2012-07-18T18:39:22.597
> 
> 标签：jquery

我知道如何一次禁用一个超链接，所以当用户点击它时，什么都不会发生。这是示例：

```
$('#myLink').click(function(e) {
    e.preventDefault();
    //do other stuff when a click happens
}); 
```

`li`但是现在我在and中有很多用于我的寻呼机的超链接`div`。看起来像：

```
<div id='pager'>
    <ul>
        <li>
            <a href='search.aspx?page=1'>1</a>
        </li>
        <li>
            <a href='search.aspx?page=2'>2</a>
        </li>
        <li>
            <a href='search.aspx?page=3'>3</a>
        </li>
        <li>
            <a href='search.aspx?page=4'>4</a>
        </li>
    </ul>
</div> 
```

我想在我的所有超链接中迭代，`div`并通过两个例程启用/禁用所有。因此，当用户单击时，什么都不会发生，也不会发生回发。一个例程将禁用所有超链接，一个例程将像以前一样启用所有超链接。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:40:43.117

```
$('#pager a').click(function(e) {
e.preventDefault();
//do other stuff when a click happens
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:40:41.037

只需使用一个 jQuery 选择器来获取所有这些 A 标记，如下所示：

```
$('#pager a').click(function(e) {
    e.preventDefault();
} 
```

# javascript - 选择框导航：页面加载时寡妇打开而不是更改

> ID：11548153
> 
> 赞同：0
> 
> 时间：2012-07-18T18:39:37.610
> 
> 标签：javascript, drop-down-menu, dom-events

我有一个带有一些选项的选择框。我想让用户选择一个选项，然后转到存储在该选项的 value 属性中的 URL。但是，我的脚本在页面加载时不断打开新窗口，而不是在更改时打开。为什么？！帮助！

```
function selectBoxNav() {
"use strict";
var mySelectBox = document.getElementById('mySelectBox');
var myOption = mySelectBox.options[mySelectBox.selectedIndex];
var myURL = myOption.value;
function newWindow() {
  window.open(myURL);
}
mySelectBox.addEventListener('change', newWindow(), false);
}

window.addEventListener('DOMContentLoaded', selectBoxNav(), false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:49:28.063

您需要将函数传递给`addEventListener()`，而是调用它并传递它的返回值。`newWindow()`调用函数。要传递它，您应该删除括号：`mySelectBox.addEventListener('change', newWindow, false);`

# sql - 多对多时不同的 SQL

> ID：11548156
> 
> 赞同：0
> 
> 时间：2012-07-18T18:39:41.847
> 
> 标签：sql, sql-server

3 个表 sto_Product、sto_ProductXCategory 和 sto_Category

*   sto_Product 拥有所有产品信息（bvin=主键）
*   sto_Category 拥有所有 Categoryinfo (bvin=Primary Key)
*   sto_ProductXCategory（ProductId 和 CategoryId 是 PK 和 FK）

目前它会导致产品重复，因为某些产品在 sto_ProductXCategory 中重复（具有不同的 CategoryId）。

这个 SQL 语句是一个更大的存储过程的一部分，所以我试图让它保持相似。

这是我要修复的声明

```
DECLARE @Sortorder int =6;
with product as  
(  
    select distinct p.* 
    from sto_Product p   
        inner join sto_ProductXCategory px on(p.bvin = px.productid)  
    where p.parentID = '' 
        and p.Status = 1 
        and p.siteprice >=0 
        and p.siteprice <= 2147483647 
        and ( 
                (p.manufacturerid = '8036ab2c-641e-487b-a577-76c09c5c3cc9'
                )
            ) 
),      
AllProducts AS 
    (
        SELECT   
            RowNum =       
                CASE        
                    WHEN @Sortorder = 0 
                        THEN ROW_NUMBER() OVER (ORDER BY px.SortOrder)       
                    WHEN @Sortorder  = 1 
                        THEN ROW_NUMBER() OVER (ORDER BY  px.SortOrder)      
                    WHEN @Sortorder  = 2 
                        THEN ROW_NUMBER() OVER (ORDER BY ProductName)       
                    WHEN @Sortorder  = 3 
                        THEN ROW_NUMBER() OVER (ORDER BY SitePrice)       
                    WHEN @Sortorder  = 4 
                        THEN ROW_NUMBER() OVER (ORDER BY SitePrice DESC)            
                    WHEN @Sortorder  = 6 
                        THEN ROW_NUMBER() OVER (ORDER BY ProductName DESC)       
                    ELSE ROW_NUMBER() OVER (ORDER BY px.SortOrder)      
                END,        
            p.* 
        from product p     
            inner join sto_ProductXCategory px on(p.bvin = px.productid) 
    )    
        SELECT AllProducts.RowNum,*, 
            (SELECT COUNT(*) FROM AllProducts) As TotalRowCount  
        FROM AllProducts 
        WHERE RowNum   BETWEEN (1) and (12 )     
    ORDER BY AllProducts.RowNum 
```

* * *

## 样本数据集

**sto_Product**

1.  **bvin,sku,产品名称,网站价格**
2.  0001,001,产品名称,100
3.  0002,002,B产品名称,50
4.  0003,003,C产品名称,75

**sto_Category**

1.  **bvin,类别名称**
2.  1000，A类别名称
3.  2000,B类别名称
4.  3000,C类别名称

**sto_ProductXCategory**

1.  **产品 ID、类别 ID、排序顺序**
2.  0001,1000,1
3.  0001,2000,2
4.  0001,3000,3
5.  0002,2000,4
6.  0003,2000,5
7.  0003,3000,6

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:09:14.100

你已经说过

...目前它会导致产品重复，因为某些产品在 sto_ProductXCategory 中重复（具有不同的 CategoryId）。

但是你还没有说你想要发生什么。

出于我的目的，我假设您只需要每个产品一行，忽略出现在 sto_ProductXCategory 中的 CategoryID 的不同值

在 AllProducts 中，您拥有：

```
 from product p inner join sto_ProductXCategory px on(p.bvin = px.productid) 
```

这需要更改以过滤 sto_ProductXCategory 中您不希望在输出数据集中出现的重复行；

```
 from product p join (
        select productid, min(categoryid) as Category
        from sto_ProductXCategory 
        group by productid
      ) x on p.bvin = x.productid
      join sto_ProductXCategory px on p.bvin = px.Productid and x.Category = px.CategoryID 
```

怎么样？

# css - 有人可以解释为什么 Sencha Toolbar CSS 不适用于 Chrome 吗？

> ID：11548159
> 
> 赞同：0
> 
> 时间：2012-07-18T18:39:46.587
> 
> 标签：css, firebug, extjs, sencha-touch-2

我有一个顶部停靠的工具栏，我使用 firebug 检查元素以找到 css 类，它是：

```
 .x-toolbar-dark.x-docked-top 
  {
      border-bottom-color: #000000;
  } 
```

我将其更改为：

```
 .x-toolbar-dark.x-docked-top 
  {
     border-bottom-color: #000000;
     background-color: transparent !important;
  } 
```

现在我在 Firefox 中看到工具栏是透明的，但在 chrome 中它仍然具有默认的背景颜色（蓝色）。为什么会这样？也许我不需要在这里使用这种技术，但在某些情况下，我肯定需要使用 firebug 找到一个非常具体的 css 类。任何帮助或信息？

注意：我尝试使用工具栏的 Cls 属性，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:10:46.217

在 Chrome 中，背景图像（它是一个渐变）同时在 Firefox 中被忽略。

所以你所要做的就是像这样设置背景图像和背景颜色`.x-toolbar-dark`：

```
.x-toolbar-dark{
   background-image: none;   
   background-color: transparent;   
}​ 
```

[http://jsfiddle.net/awHkT/1/](http://jsfiddle.net/awHkT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:12:25.127

Sencha 是为 webkit 浏览器设计的，所以它的 CSS 是为 Chrome 或 Safari 等 webkit 浏览器制作的。所以这种或问题一定是因为有一个带有 -webkit 前缀的 CSS 规则，因此仅适用于 webkit 浏览器并在 Firefox 中被忽略。

但无论如何，工具栏都有渐变背景，所以如果你想覆盖它，你需要这样做：

```
background-image: none;
background-color: transparent; 
```

**最后两件事**

*   重写 Sencha 的 CSS 是不好的做法。使用`cls`工具栏上的配置为其分配一个 CSS 类，然后使用该类来设置工具栏的样式。

*   不要使用 Firefox 测试您的应用程序，而是使用 Safari 的 Chrome。

希望这可以帮助

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-18T19:54:35.043

你能创建一个安装 SASS 和 Compass 的自定义主题吗？对于 Mac 和 Windows 用户，安装 SASS 和 Compass 的说明略有不同。Mac 用户需要打开终端应用程序并键入以下内容：

```
i. sudo gem install haml
ii. sudo gem install compass 
```

您需要使用您的用户名和密码进行身份验证才能完成安装。Windows 用户需要打开命令行并键入以下内容：

```
i. gem install haml
ii. gem install compass 
```

**安装 Ruby**

Mac 用户可以休息一下，因为 Ruby 已经默认安装在 OSX 上。Windows 用户应从 ruby​​installer.org 下载 Ruby 安装[程序](http://rubyinstaller.org)。

安装完成后，我们就可以设置文件夹并开始使用 SASS 和 Compass。

**创建您的自定义主题**

您需要做的下一件事是创建您自己的主题 SCSS 文件。在 ../lib/resources/sass 中找到 sencha-touch.scss 文件，并制作该文件的副本。将文件的新副本重命名为 myTheme.scss。

现在，您需要告诉索引寻找您的新主题。使用您之前的示例文件，打开您的 index.html 文件，并找到显示以下内容的行：

```
<link rel="stylesheet" href="lib/resources/css/sencha-touch.css" type="text/css"> 
```

将 index.html 文件中的 sencha-touch.css 样式表引用更改为指向 myTheme.css：

```
<link rel="stylesheet" href="lib/resources/css/myTheme.css" type="text/css"> 
```

**SCSS 和 CSS**

请注意，您当前包含来自 css 文件夹的样式表，称为 sencha-touch.css，并且您在 scss 文件夹中有一个匹配的文件，称为 sencha-touch.scss。编译 SCSS 文件时，它会在您的 css 文件夹中创建一个新文件。这个新文件的后缀将是 .css 而不是 .scss。

.scss 是 SASS 文件的文件扩展名。SCSS 是 Sassy CSS 的缩写。

现在您已经设置了路径，让我们看看我们制作的主题文件副本。打开你的 myTheme.scss 文件。您应该看到以下内容：

```
@import 'sencha-touch/default/all';
@includesencha-panel;
@includesencha-buttons;
@includesencha-sheet;
@includesencha-picker;
@includesencha-tabs;
@includesencha-toolbar;
@includesencha-toolbar-forms;
@includesencha-carousel;
@includesencha-indexbar;
@includesencha-list;
@includesencha-list-paging;
@includesencha-list-pullrefresh;
@includesencha-layout;
@includesencha-form;
@includesencha-msgbox;
@includesencha-loading-spinner; 
```

此代码获取所有默认的 Sencha Touch 主题文件，并将它们编译为位于 css 文件夹中的新 CSS 文件。如果您打开 ../lib/resources/css 文件夹中的 sencha-touch.css 文件，您将看到之前使用的压缩 CSS 文件。这个文件非常大，但它都是从基本命令创建的。

最好的部分是您现在可以使用一行代码更改应用程序的整个配色方案。

**基本颜色**

Sencha Touch 主题中的关键变量之一是`$base_color`. 这种颜色及其变化在整个主题中使用。要了解我们的意思，您可以更改主题的颜色，将以下内容添加到 myTheme.scss 文件的顶部（**高于所有其他文本**）：

```
$base_color: #d1d3d4; //for example, color gray 
```

接下来，您需要重新编译 SASS 文件以创建样式表。从命令行，您需要切换到 myTheme.scss 文件所在的 sass 文件夹。进入文件夹后，在命令行中键入以下内容并按 Enter：

```
compass compile 
```

玩得开心:)，这将使用新`$base_color`值更新您的 myTheme.css 文件。在 Safari 或 FF 或任何地方重新加载页面，您应该会看到您的应用程序呈现新的灰色外观。

并在[http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application中查看](http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application)

**我希望这有帮助。:)**

# android - Android：从单独的线程中加载网络图像

> ID：11548162
> 
> 赞同：0
> 
> 时间：2012-07-18T18:39:50.757
> 
> 标签：android, multithreading

我需要从网络上获取图像并将其显示在我的应用程序的主要活动中。我试图将它放在一个单独的线程中，使用以下代码（它位于 onCreate 方法中）：

```
 Thread trd = new Thread(new Runnable(){
            @Override
            public void run(){
                ImageView iv1 = (ImageView) findViewById(R.id.promo);
                try{
                    URL url = new URL("http://www.domain.com/image.jpg");
                    InputStream content = (InputStream)url.getContent();
                    Drawable d = Drawable.createFromStream(content, "src");
                    iv1.setImageDrawable(d);
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
        trd.run(); 
```

此代码工作正常，并使用我从网络上获取的图像更新 UI。

**问题**：

1.  我听说 Android 只允许您从主 UI 线程修改 UI，但看起来我的代码是从一个单独的线程中进行的。怎么会？我是否应该担心我的代码可能由于某种原因而中断？

2.  上面的代码是否有效地确保我的应用程序 UI 在等待检索网络图像时不会冻结？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:48:09.013

```
I heard that Android only allows you to modify the UI from the main UI thread, but it looks like with my code I am doing it from inside a separate thread. How come? Should I be worried my code might break for some reason? 
```

是的，您正在从一个单独的线程进行修改。

在线程使用中设置drawable，并将`d`其设为final。

```
SampleActivity.this.runOnUiThread(new Runnable() {

                    public void run() {
                        iv1.setImageDrawable(d);

                    }
                }); 
```

`Is the above code efficient to make sure my app UI will not freeze while waiting for the web image to be retrieved?`

No as It will not run at all. and will through the `Exception`.

# php - 当我使用 jQuery AJAX 在我的页面上提交 tinyMCE 表单时，实际提交到数据库需要两次点击

> ID：11548164
> 
> 赞同：7
> 
> 时间：2012-07-18T18:39:58.833
> 
> 标签：php, forms, jquery, tinymce

一个多星期以来，我一直在尝试不同的选择，但似乎没有任何效果。使这稍微复杂的是，我在页面上有多个表单，它们都需要绑定到同一个提交函数。他们都有不同的ID。

以下是我的 jQuery 的简化版本：

```
$('form').on('submit', function(form){
    var data = $(this).serialize();
    $.ajax({
        type:       'POST',
        cache:      false,
        url:        'inc/process.php',
        data:       data,
        success:    function(){
                        // The following fires on first AND second submit
                        console.log("Updates have successfully been ajaxed");
        }
    });
    return false;
}); 
```

我也尝试过使用`$('form').submit()`相同的结果。

process.php的相关部分：

```
$query =    'UPDATE     pop_contents
            SET     ';
$id = $_POST['content_id'];
/* to avoid including in MySQL query later */
unset($_POST['content_id']);

$length = count($_POST);
$count = 0;
foreach($_POST as $col => $value){
    $value = trim($value);
    $query .= $col."='".escapeString($value);
    // don't add comma after last value to update
    if(++$count != $length){ $query .= "', "; }
    // add space before WHERE clause
    else{ $query .= "'  "; }
}
$query .= 'WHERE        id='.$id;

$update_result = $mysqli->query($query); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T16:47:35.777

经过多次拉扯和发誓，我已经解决了这个问题。

TinyMCE 编辑器实例不直接编辑`textareas`，所以为了提交表单，我需要`tinyMCE.triggerSave()`先从[TinyMCE API 调用](http://www.tinymce.com/wiki.php/API3%3atinymce.api.3.x)。因此，工作代码如下所示：

```
$('form').on('submit', function(form){
    // save TinyMCE instances before serialize
    tinyMCE.triggerSave();

    var data = $(this).serialize();
    $.ajax({
        type:       'POST',
        cache:      false,
        url:        'inc/process.php',
        data:       data,
        success:    function(){
                        console.log("Updates have successfully been ajaxed");
        }
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:25:01.737

当我通过 tinyMce 传递 Ajax 字符串数据时我很困惑 ..但它没有用 php 保存到数据库中......然后我使用

```
tinyMCE.triggerSave();
event.preventDefault(); 
```

那么好吧…………

```
$("#save").click(function() {
tinyMCE.triggerSave();
event.preventDefault();
var data = $(this).serialize();
 var position = $("#position").val();
 var location = $("#job_location").val();
|
|
|
|
 var end_date = $("#end_date").val();
 var dataString = '&position='+ position + '&job_location=' + location + '&job_category=' + category + '&job_des=' + job_des +'&job_res='+ job_res + '&job_requ='+ job_requ + '&start_date='+ start_date + '&end_date='+ end_date;
alert(dataString);
 $.ajax({
 type: "POST",
 url: "regis.php",
 data: dataString,
 success: function(data){

 }
 });
 return false;
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:50:03.950

我认为问题在于您没有阻止表单的默认操作。试试这个

```
$('form').bind( 'submit', function(event) {
   event.preventDefault(); // added
   console.log("Binding"); // changed to console.log
    $.ajax({
      type: "POST",  
      url: "inc/process.php",
      data: $(this).serialize(),
      success: function() {
        console.log("Your updates have successfully been added."); // changed to console.log
      }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T18:37:14.360

另一个巧妙的技巧是在 tinymce 编辑器上设置进度状态，为您提供一种添加加载图标的非常简单的方法。[TinyMCE 文档中的这篇文章](http://www.tinymce.com/wiki.php/TinyMCE3x:How-to_load/save_with_Ajax_in_TinyMCE)解释了如何做到这一点。

同样来自那篇文章，使用 ed.setContent() 将允许您设置在编辑器中显示的文本。我用它来空白编辑器，但只有在成功发布之后。

# ios - 子视图的 InAppSettingKit setHiddenKeys

> ID：11548165
> 
> 赞同：0
> 
> 时间：2012-07-18T18:40:03.783
> 
> 标签：ios, iphone, inappsettingskit

看来 setHiddenKeys 不适用于通过类似的方式加载的子视图

```
 <dict>
        <key>File</key>
        <string>ChildView</string>
        <key>Title</key>
        <string>CHILD_VIEW_TITLE</string>
        <key>Type</key>
        <string>PSChildPaneSpecifier</string>
    </dict> 
```

目标文件中指定的任何键都不会在 IASK 的数据源中迭代。

任何想法如何让 setHiddenKeys 在整个子视图中工作？

谢谢！

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:16:08.973

This has been fixed: [https://github.com/futuretap/InAppSettingsKit/issues/167](https://github.com/futuretap/InAppSettingsKit/issues/167)

# c# - 使用 Javascript 更改 ActiveX 视频播放器源

> ID：11548168
> 
> 赞同：2
> 
> 时间：2012-07-18T18:40:22.133
> 
> 标签：c#, javascript, video, activex

这是我在网页中嵌入的 ActiveX 控件：

```
<object id="MediaPlayer1" 
        CLASSID="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" 
        codebase="http://activex.microsoft.com/activex/controls/mplayer/ en/nsmp2inf.cab#Version=5,1,52,701"
        standby="Loading Microsoft Windows® Media Player components..."
        TYPE="application/x-oleobject"
        width="280"
        height="256">
<param name="fileName" value="/media/paul.avi">
<param name="animationatStart" value="true">
<param name="transparentatStart" value="true">
<param name="autoStart" value="false">
<param name="showControls" value="true">
<param name="Volume" value="-20">
<embed type="application/x-mplayer2"
        pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"
        src="/media/paul.avi"
        name="MediaPlayer1"
        width=280
        height=256 
        autostart=1
        showcontrols=1
        volume=-20>
</object> 
```

Javascript有没有办法控制标签的值`fileName`和src ？`embed`我使用了一种类似于普通 html5 视频所需的方法，这里是：

```
function vidSwap(vidURL) {
    var myVideo = document.getElementsByTagName('video')[0];
    myVideo.src = vidURL;
    myVideo.load();
    myVideo.play();
} 
```

我很确定`document.getElementsByTagName('video')[0]`抓取`<video>`页面中的第一个标签，但如果我试图在标签内获取一些东西，它是否会沿着:`<object>`的行`document.getElementsByTagName('param')[0]`和类似的行？`<embed>``document.getElementsByTagName('embed')[0]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:12:55.237

我对以下内容做了一些实验，它似乎有效；只需在 embed-tag 中添加一个 id，查找它，然后更改您想要的任何值：

```
<html><head></head><body>
<object id="MediaPlayer1" 
        CLASSID="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" 
        codebase="http://activex.microsoft.com/activex/controls/mplayer/ 
                  en/nsmp2inf.cab#Version=5,1,52,701"
        standby="Loading Microsoft Windows® Media Player components..."
        TYPE="application/x-oleobject"
        width="280"
        height="256">
<param name="fileName" value="/media/paul.avi">
<param name="animationatStart" value="true">
<param name="transparentatStart" value="true">
<param name="autoStart" value="false">
<param name="showControls" value="true">
<param name="Volume" value="-20">
<embed type="application/x-mplayer2"
      id="myEmbededTag"
      pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"
      src="/media/paul.avi"
      name="MediaPlayer1"
      width=280
      height=256 
      autostart=1
      showcontrols=1
      volume=-20>
</object>

<script type="text/javascript">
    // Look up the ID, and get a ref. to it:
    var element = document.getElementById('myEmbededTag');
    alert(element.src);
    element.src = 'http://example.com/yourvideo.avi';
    alert(element.src);
</script>
</body>
</html> 
```

**针对以下 febreezey 的评论进行更新：**

这取决于你什么时候想这样做；假设您只想设置源并在页面完成加载时开始播放视频，那么您可以执行以下操作（将前面的 JavaScript 部分替换为以下内容）：

```
<script type="text/javascript">
    window.onload = function(){
        var element = document.getElementById('myEmbededTag');
        alert(element.src);
        element.src = 'http://www.rabiner.com/files/David_Rabiner.wmv';
        alert(element.src);
    }
</script> 
```

（注意，我不知道示例视频是关于什么的，我只是挑选了一些完全随机的示例视频......）

**最终更新：**

我不确定这是解决您的问题的理想/完美方式（感觉有点粗糙），但您可能可以这样做：

```
<a href="#" 
 onclick="javascript:SetVid('http://www.rabiner.com/files/David_Rabiner.wmv');">
Click to set value
</a>

<script type="text/javascript">
    var SetVid = function(videoUrl){
        var element = document.getElementById('myEmbededTag');
        alert(element.src);
        element.src = videoUrl;
        alert(element.src);
    }
</script> 
```

# wpf - 为什么 Process.WaitForInputIdle() 不起作用？

> ID：11548176
> 
> 赞同：6
> 
> 时间：2012-07-18T18:40:51.233
> 
> 标签：wpf, process

我正在使用 Windows 自动化来测试我的 UI 并正在打开和关闭进程。我想要一个有效的 WindowHandle，但 Process.WaitForInputIdle() 等待的时间不够长。我有一个解决方法，但不明白为什么 WaitForInputIdle() 不起作用。

下面是一个小代码片段：

```
Process = new Process
              {
                 StartInfo =
                 {
                     WorkingDirectory = directory,
                     FileName = EXECUTABLE_FILE_NAME
                 }
              };

Process.Start();

//Process.WaitForInputIdle() doesn't work, 
//so will use a while loop until MainWindowHandle isn't IntPtr.Zero anymore,
//or until 10 seconds have elapsed

int count = 0;

while (Process.MainWindowHandle == IntPtr.Zero && count<100)
{
    count++;
    Thread.Sleep(100);
}

AppElement = AutomationElement.FromHandle(Process.MainWindowHandle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:31:57.820

正如 Chaser324 在他的评论中所说，我的问题的答案可以在[这里](https://stackoverflow.com/questions/3247125/wait-for-wpf-app-to-load-after-starting-with-process-start)找到。

我基本上需要在我的“while”循环中添加对 Process.Refresh() 的调用。

# c++ - 使用placement new在构造函数中调用构造函数

> ID：11548186
> 
> 赞同：4
> 
> 时间：2012-07-18T18:41:19.723
> 
> 标签：c++, constructor

这几天一直在苦苦挣扎。

问题是构造函数调用。

我写了一段代码，例如：

```
#include <iostream>
using namespace std;

class Foo
{

  private: int _n;

  public:

  Foo() { Foo(5);}

  Foo(int n) {_n=n; cout << n << endl; }

};

int main()
{
   Foo* foo = new Foo();
   return 0;

} 
```

当我使用默认构造函数在外面构造一个 Foo 对象时：

```
Foo* f = new Foo(); 
```

我想变量 _n 是 5，但是，它不是。

在 Java 中可以，但在 c++ 中不行。

此外，在 Visual C++ 6 sp 6 中，

```
Foo() {this->Foo(5);} 
```

作品。

但是，这个表达式被 gcc/g++ 4 拒绝了。

最后，我找到了解决方案。

只需将默认构造函数更改为

```
Foo() {Foo(5);} 
```

进入

```
Foo() { new (this) Foo(5); } 
```

解决问题。

括号中的“this”是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:50:09.537

所做的是在所指向的位置`(this)`创建一个全新的对象（这称为放置新）。您应该只在and的数组中使用它，不要在其他任何地方使用它（而且几乎从不在那里）。由于您在已经开始构建的位置构建 a，因此您所做的是未定义的行为，并且如果您有基类，则会在整个地方泄漏资源。从历史上看，正常的做法只是将初始化移至私有函数。`Foo``this``char``unsigned char``Foo``this`

```
class Foo {
public:    
  Foo() { init(5);}    
  Foo(int n) {init(n);}
private: 
  int _n;
  void init(int n) {
    _n=n;
  };
} 
```

在 C++11 中，构造函数应该能够使用这种语法相互调用，但我不知道哪些编译器支持它。 [根据 Apache](http://wiki.apache.org/stdcxx/C++0xCompilerSupport)的说法，GCC 4.7 和 Clang 3.0 支持它，但英特尔 C++ 和 VC++ 尚不支持。

```
class Foo {
public:    
  Foo() : Foo(5) {}
  Foo(int n) {_n=n;}
private: 
  int _n;
} 
```

您开始的代码`Foo() { Foo(5);}`开始构造`this`，然后使用参数 5 在堆栈上创建一个全新的`Foo`对象，然后销毁它，然后认为自己完全构造，而不初始化它自己的任何值。这就是为什么它编译并运行，但似乎没有做任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:49:15.420

在 C++11 中，您可以使用委托构造函数来指定它：

```
Foo() : Foo(5) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:50:22.617

`(this)`括号中的意思是new*操作*符将使用地址`this`作为初始化类的地址。

这是*非常*危险的：你在当前对象的构造函数中，并且你在同一个内存空间上调用了一个新的构造函数。想象一下如果你从另一个类继承会发生什么！

至于您的问题，您*不能*从构造函数中调用另一个重载的构造函数。典型的解决方案是有一个方法来初始化你的类：

```
class Foo
{
  int _n;
public:
  Foo() { init(5); }
  Foo( int i) { init(i); }
  void init(int i) { _n = i; }
}; 
```

我在这里遇到了同样的问题：[又一个 C++ 对象初始化询问](https://stackoverflow.com/questions/9911309/yet-another-c-object-initialization-interrogation)；随时查看解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:49:12.150

```
Foo() { new (this) Foo(5); } 
```

是一个“placement new”运算符，它在预分配的内存上调用构造函数。

现在，对于您的另一个问题 - C++11 完全允许（相互调用构造函数），但早期的标准（尤其是 MSVC 6 使用的标准）没有，所以使用那些丑陋`init()`的方法是去找你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:46:48.343

C++ 中的正确语法是

```
class Foo { 

  private: int _n; 

  public: 

  Foo() : Foo(5) {} 

  Foo(int n) _n(n) {} // As suggested by another member's edit, initializer lists are preferred

}; 
```

或者，C++ 允许默认参数值，例如

```
Foo(int n = 5); 
```

这允许您编写一个构造函数而不是两个。

此外，您应该确保了解内联函数和非内联函数之间的区别。这种 Java 风格的编程是有效的 C++，但它有其优点和缺点，至少还有一个其他替代方案。

# r - 应用于数据框

> ID：11548193
> 
> 赞同：1
> 
> 时间：2012-07-18T18:41:50.700
> 
> 标签：r

我有两个结构：

```
max_map <-
structure(list(name = structure(1:11, .Label = c("2-Acetylaminofluorene", 
"amsacrine", "aniline", "aspartame", "cyclophosphamide", "doxorubicin", 
"indomethacin", "phenacetin", "quercetin", "raloxifene", "urethane"
), class = "factor"), value = c(0.811811403850414, 0.8670680916324, 
0.794704077953131, 0.652724115286456, 0.946812003911574, 0.94467294086402, 
0.99210186168903, 0.965998352825426, 0.953645104970837, 0.903845608662668, 
0.858610554863266)), .Names = c("name", "value"), row.names = c(NA, 
-11L), class = "data.frame")

maps <-
structure(list(name = c("2-Acetylaminofluorene", "amsacrine", 
"aniline", "aspartame", "cyclophosphamide", "doxorubicin", "indomethacin", 
"phenacetin", "quercetin", "raloxifene", "urethane"), avg_relations_fan = c(0.596381660936706, 
0.627169363301574, 0.52144016932515, 0.335756276148214, 0.710245148396949, 
0.786168090022777, 0.931928694886563, 0.797790600434933, 0.836458734127729, 
0.764397331494529, 0.548648356310039), baseline = c(0.441175818174093, 
0.661376446637227, 0.470246408568704, 0.325159351267395, 0.664171399502648, 
0.75247341151084, 0.894791275258052, 0.79447733086043, 0.791316894314006, 
0.593161248492605, 0.546928771024265), baseline_mesh = c(0.511440934523423, 
0.635334407445469, 0.466187120416127, 0.292197730456067, 0.712015987803737, 
0.774493950979802, 0.936857915628513, 0.776404901563741, 0.786072875131457, 
0.586564923115283, 0.602183350788001), standard = c(0.441269542443449, 
0.656249151603696, 0.451995996997505, 0.331622681220588, 0.680778834932872, 
0.742015626142688, 0.883911615393179, 0.791293422595675, 0.760673562009157, 
0.559234401021581, 0.555385232882166), sum_relations_fan = c(0.593111715736251, 
0.518197244570419, 0.52676186810563, 0.331234383858585, 0.697489423349489, 
0.77249112456473, 0.940506641487552, 0.79946569580319, 0.82893149142568, 
0.749819491774919, 0.624830313758535), total = c(0.593111715736251, 
0.518197244570419, 0.52676186810563, 0.331234383858585, 0.697489423349489, 
0.77249112456473, 0.940506641487552, 0.79946569580319, 0.82893149142568, 
0.749819491774919, 0.624830313758535)), .Names = c("name", "avg_relations_fan", 
"baseline", "baseline_mesh", "standard", "sum_relations_fan", 
"total"), row.names = c(NA, 11L), class = c("cast_df", "data.frame"
), idvars = "name", rdimnames = list(structure(list(name = c("2-Acetylaminofluorene", 
"amsacrine", "aniline", "aspartame", "cyclophosphamide", "doxorubicin", 
"indomethacin", "phenacetin", "quercetin", "raloxifene", "urethane"
)), .Names = "name", row.names = c("2-Acetylaminofluorene", "amsacrine", 
"aniline", "aspartame", "cyclophosphamide", "doxorubicin", "indomethacin", 
"phenacetin", "quercetin", "raloxifene", "urethane"), class = "data.frame"), 
    structure(list(series = c("avg_relations_fan", "baseline", 
    "baseline_mesh", "standard", "sum_relations_fan", "total"
    )), .Names = "series", row.names = c("avg_relations_fan", 
    "baseline", "baseline_mesh", "standard", "sum_relations_fan", 
    "total"), class = "data.frame"))) 
```

我想将该函数应用于`x/y`数据`maps`帧，其中 x 是当前值，y 是`name`.

我已经试过了

```
mapply(function(x,y) {x/y}, t(maps[,!names(maps) %in% c('name')]), arrange(max_map, name)$value) 
```

但这给了我一个没有任何关联名称的大列表。我希望结果与数据框相似`maps`，只是具有不同的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:57:05.127

我只是在这里猜测，但也许你想做这样的事情：

```
m <- merge(maps,max_map)
m[,2:7] <- m[,2:7] / m[,8] 
```

没有`merge`并且没有指定你有多少列：

```
maps[,-1] <- maps[,-1] / max_map$value 
```

再次，假设两者的顺序相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T19:00:01.787

Joran 的回答绝对是更好的方法，但这可能会帮助您`mapply`更好地理解。每个参数都是一个列表，两者中较短的一个被回收，在本例中为第二个。

```
mapply(function(x,y) {x/y}, maps[,!names(maps) %in% c('name')], list(arrange(max_map, name)$value))

      avg_relations_fan  baseline baseline_mesh  standard sum_relations_fan     total
 [1,]         0.7346308 0.5434462     0.6299997 0.5435616         0.7306028 0.7306028
 [2,]         0.7233219 0.7627734     0.7327388 0.7568600         0.5976431 0.5976431
 [3,]         0.6561438 0.5917252     0.5866172 0.5687601         0.6628403 0.6628403
 [4,]         0.5143923 0.4981574     0.4476589 0.5080595         0.5074646 0.5074646
 [5,]         0.7501438 0.7014818     0.7520141 0.7190222         0.7366715 0.7366715
 [6,]         0.8322119 0.7965438     0.8198541 0.7854736         0.8177339 0.8177339
 [7,]         0.9393478 0.9019147     0.9443163 0.8909484         0.9479940 0.9479940
 [8,]         0.8258716 0.8224417     0.8037332 0.8191457         0.8276057 0.8276057
 [9,]         0.8771174 0.8297813     0.8242824 0.7976485         0.8692243 0.8692243
[10,]         0.8457167 0.6562639     0.6489658 0.6187278         0.8295880 0.8295880
[11,]         0.6389956 0.6369928     0.7013463 0.6468418         0.7277226 0.7277226 
```

# java - 提高 Android GPS 性能

> ID：11548196
> 
> 赞同：2
> 
> 时间：2012-07-18T18:41:55.623
> 
> 标签：java, android, gps

如何改善 Android 平台上慢速 GPS 信号采集？

我正在测试一个基于[此开源代码](http://code.google.com/p/gpslogger/)的简单 GPS 记录器，虽然它似乎可以工作，但它可能需要 10-15 分钟才能首先获取信号并开始显示 GPS 坐标。然而，在同一台设备上运行谷歌地图应用程序似乎几乎可以立即获得信号（它甚至能够实时检测我所面对的方向），而 GPS 记录器服务仍然表示它找不到信号。

为什么谷歌地图获取 GPS 信号的速度如此之快，而标准的 GPS 系统服务却需要很长时间？

我拥有的启动 GPS 服务的具体代码是：

```
private void startLoggerService() {
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationListener = new MyLocationListener();
    lm.requestLocationUpdates(
        LocationManager.GPS_PROVIDER, 
        2000, 
        1,
        locationListener);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T22:17:29.463

在使用位置数据时，您应该注意并一定要考虑以下几点：

*   不要只依赖 GPS 传感器。尽管 GPS 可能会为您提供最准确的结果，但它相对较慢且非常耗电。相反，还向网络提供商请求位置更新：`LocationManager.NETWORK_PROVIDER`。在大多数情况下，这将提供足够准确的结果以在您的应用程序中使用（我玩过的大多数设备似乎产生大约 60~65m 的最坏情况精度），但更重要的是：它要快得多。请注意，与 GPS 一样，用户可以在系统设置中自行启用和禁用功能。有关更多详细信息，请参阅[使用位置管理器](http://developer.android.com/training/basics/location/locationmanager.html)。
*   想想您需要多久更新一次位置信息。如果可能，请防止持续更新（这会立即耗尽电池）并在收到所需数据后立即释放传感器。此外，一个好的做法是在一定程度上缓存位置 - 即使它不完全准确，用户也会立即获得反馈。您可以将其与一些考虑时间戳的逻辑结合起来。
*   使用 Android 开发者网站上已有的资源。例如，有一个关于[位置策略](http://developer.android.com/guide/topics/location/strategies.html)的主题值得一读。另一个很好的资源是[Reto Meier 的博客文章](http://android-developers.blogspot.co.nz/2011/06/deep-dive-into-location.html)和他的[开源项目](http://code.google.com/p/android-protips-location/)，该项目实现了他的 Android Protips for Location。如果您有时间，还可以查看他的[Google I/O 2011 演示文稿](http://www.google.com/events/io/2011/sessions/android-protips-advanced-topics-for-expert-android-app-developers.html)，该演示文稿讨论了基于位置/位置感知的 Android 应用程序的最佳实践。

附带说明：您面对的方向的实时指示与位置无关，而是来自磁场传感器（阅读：数字罗盘）或陀螺仪。两者都处理设备的方向，而不是位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:33:11.740

代码中的 1 表示提供商只会在您的设备移动 1 米时广播该位置。尝试将此设置为 0。

API 文档指出：

“可以使用 minTime 和 minDistance 参数控制通知的频率。如果 minTime 大于 0，LocationManager 可能会在位置更新之间休息 minTime 毫秒以节省电力。如果 minDistance 大于 0，则只会广播位置如果设备移动 minDistance 米。要尽可能频繁地获取通知，请将两个参数都设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:40:02.520

如果谷歌地图显示你的方向，它必须使用 GPS 定位。Google 地图必须使用最新的 gps 修复程序，您可以使用[Location.getLastKnownLocation](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)获得。据推测，如果该位置不是太旧，谷歌地图认为它总比没有好，并在您等待新的 GPS 修复时显示给您。

当您在室内时，GPS 修复通常会非常缓慢或根本没有。我假设您在开发时正在尝试获取 GPS 修复？你可能不得不起床走到外面。

许多手机都有相当糟糕的gps接收器。即使在晴朗的户外天空中，我也拥有手机，这需要很多分钟才能获得第一个 GPS 定位。它很烂，而且是抄袭，但这是真的。

# photoshop - 如何在 Photoshop 中创建新画布并逐层应用图层名称？

> ID：11548206
> 
> 赞同：0
> 
> 时间：2012-07-18T18:42:28.233
> 
> 标签：photoshop, layer, photoshop-script

如何在 Photoshop 中创建新画布并逐层应用图层名称？

这么简单我想要的是

```
Create a new canvas certain size such as 150x40
Apply a layer to that canvas. Select layer by its name 
```

我如何使用 Photoshop 脚本来完成这 2 件简单的事情

CS6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:54:34.437

[Photoshop Javascript 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/photoshop/pdfs/cs6/Photoshop-CS6-JavaScript-Ref.pdf)

我相信你正在寻找`documents.add()`and `Layers.getByName()`。

# php - 在循环中交换显示顺序

> ID：11548208
> 
> 赞同：0
> 
> 时间：2012-07-18T18:42:30.933
> 
> 标签：php

我正在尝试循环交换显示顺序。
例如，我有一个`$array`包含值的数组：`1,2,3,4,5`并希望按顺序显示结果`2,1,3,4,5`。我为此目的使用以下代码，并且对我有用：

```
<?php
$array = array(
    1,
    2,
    3,
    4,
    5,
);
$tempArray = array();
$count = 1;
foreach($array as $key => $value){
    $tempArray[$key] = $value;
    if(in_array($count, array(1, 2))){
        if($count == 2){
            echo $tempArray[1] . '<br />';
            echo $tempArray[0] . '<br />';
        }
    }else{
        echo $value . '<br />';
    }
    $count++;
} 
```

但我想知道是否有任何有效（更好）的方法？

**编辑**：

```
$array = array(
    1,
    2,
    3,
    4,
    5,
);
//Either
/*$temp = $array[1];
$array[1] = $array[0];
$array[0] = $temp;*/

//OR
list($array[1], $array[0]) = array($array[0], $array[1]);

foreach($array as $key => $value){
    echo $value . '<br />';
} 
```

无论哪种方式都适用于最少的代码。
感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:54:27.663

`$array`要更改它的显示顺序`array(1, 2, 3, 4, 5)`而不更改元素的顺序，`$array`您需要定义显示顺序，然后根据显示顺序显示：

```
$array   = array(1, 2, 3, 4, 5);

$display = array_keys($array);
list($display[1], $display[0]) = array($display[0], $display[1]);

foreach ($display as $key)
{
    $value = $array[$key];
    printf("%d<br />\n", $value);
} 
```

这有效 - 正如您在评论中自己写的那样 - 通过切换前两个元素的顺序（键）（`0`并且`1`，数组从零开始）。

# javascript - 将 div 内容复制到第二个 div

> ID：11548219
> 
> 赞同：1
> 
> 时间：2012-07-18T18:43:08.007
> 
> 标签：javascript, html

如何克隆 div 的所有内容（包括输入或其他标签的内存数据）并将它们放入另一个 div？

我尝试使用该`innerHTML`属性，但同时不会复制输入到文本框中的任何信息。

有没有人有任何解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:46:56.973

纯 JavaScript：使用`var clone = [somediv].cloneNode(true)`. 如果适用，请务必更改克隆的 ID！`cloneNode(true)`将复制原始的所有属性和子节点，afiak 它还将复制输入字段的值。它不会复制分配给原始元素的处理程序。另请参阅[MDN](https://developer.mozilla.org/en/DOM/Node.cloneNode)

我已经编辑了[这个 jsfiddle](http://jsfiddle.net/KooiInc/e62sw/)（打算回答另一个 SO-question）来演示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:44:38.630

您可以使用 jQuery 的`.clone(true)`： [http ://api.jquery.com/clone/](http://api.jquery.com/clone/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:48:47.963

没有 jQuery，你可以使用

```
var clone = cloneNode(true); 
```

然后将该节点附加到您喜欢的任何位置，例如

```
var targetNode = documentGetElementById('someID');
targetNode.appendChild(clone); 
```

# javascript - 骨干.js collection.get() 未定义

> ID：11548222
> 
> 赞同：2
> 
> 时间：2012-07-18T18:43:21.643
> 
> 标签：javascript, collections, backbone.js

我正在使用 Backbone，我有一个包含 7 个模型的集合。

我想抓住一个模型并将其从集合中拉出来。但是，我尝试的一切都会返回`undefined`。

这是我填充集合的方式

```
var coll = new TestCollection();
coll.fetch(); 
```

一个简单的控制台日志调用显示该集合是从 JSON 文件填充的

```
child
_byCid: Object
_byId: Object
_onModelEvent: function () { [native code] }
_removeReference: function () { [native code] }
length: 7
models: Array[7]
__proto__: ctor 
```

但是，我尝试了一大堆方法，以便从集合中获取其中一个模型，包括`coll.at(1)`但`coll.get(1)`每个都返回`undefined`。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:45:52.867

该[`fetch`](http://backbonejs.org/#Collection-fetch)方法是一个 AJAX 调用，这意味着它是异步的。您的`console.log`调用将实时引用放入控制台（因此它是异步的），因此您最终会得到以下事件序列：

1.  你打电话`coll.fetch()`。
2.  Backbone 发出`$.ajax`呼叫。
3.  你打电话`console.log(coll)`，一个实时参考进入控制台。
4.  您调用`coll.at(1)`or`coll.get(1)`并没有得到任何结果，因为**2**尚未从服务器返回。
5.  **2** 从服务器返回并填充您的集合。
6.  然后你去看看控制台，但`coll`现在已经被填充了，所以`coll`控制台中的引用包括了在**5**中返回的模型。
7.  困惑。

成功[`fetch`](http://backbonejs.org/#Collection-fetch)触发`"reset"`事件，因此如果您想知道何时填充集合，您应该监听该事件：

```
coll.on('reset', this.some_method); 
```

或者，对于一次性通知，您可以使用`success`回调：

```
coll.fetch({
    success: function(collection, response) {
        //...
    }
}); 
```

* * *

在较新版本的 Backbone 中，如果需要重置事件，则需要将`reset: true`选项传递给：`fetch`

```
coll.fetch({ reset: true }); // This will now trigger a 'reset' event 
```

# java - 将 raw 添加到 res 目录

> ID：11548227
> 
> 赞同：0
> 
> 时间：2012-07-18T18:43:44.990
> 
> 标签：java, android, eclipse, r.java-file

我知道这是一个众所周知的问题
，但我做了所有可能的事情：

1.  清理项目
2.  重建
3.  删除项目并再次添加。

但仍然。R文件没有更新

你建议我怎么做？

谢谢
socksocket

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:15:01.943

*   确保您已从项目属性中选择了适当的目标构建设置
*   使用您在应用程序中使用的布局交叉检查平台版本
*   删除导入语句，例如`import android.R.*;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:38:34.127

好的。找到了
我在“raw”目录中有子目录的解决方案，我认为出于某种原因
，我将 mp3 文件移动到“raw”目录并删除了名为“sounds”的子目录

现在它可以工作了！
干杯！

# visual-studio - 我可以使用 TargetFileName 将文件放在 Visual Studio 模板中的目录中吗？

> ID：11548229
> 
> 赞同：7
> 
> 时间：2012-07-18T18:43:53.843
> 
> 标签：visual-studio, templates

我有一个 .cs 文件，其中包含我想在许多项目中使用的基类。我首先将此cs文件放在项目文件夹上方（与.sln一起）。然后，在项目中，我改变了

`<Compile Include="BaseClass.cs">`
到
`<Compile Include="..\BaseClass.cs">`

这行得通，然后文件图标有一个小快捷箭头。

* * *

当我想将项目导出为项目模板时，问题就来了。BaseClass 未包含在模板中，因为它位于项目文件夹之外。我尝试将 BaseClass.cs 添加到模板 zip 并添加
`<ProjectItem ReplaceParameters="true" TargetFileName="..\BaseClass.cs">BaseClass.cs</ProjectItem>`
到 MyTemplate.vstemplate，但出现错误：
`A target file name within the VSTemplate file is invalid, it contains a fully qualified path`
如果我删除`..\`，它会直接包含该文件。如果我不`<ProjectItem>`使用 .vstemplate 文件，而只是将`<Compile Include="..\BaseClass.cs">`.csproj 文件放入模板中，它会在`Users/me/AppData/Local...`.

如何让模板引用项目目录之外的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T10:05:17.407

这是微软尚未解决的已知问题：[https ://connect.microsoft.com/VisualStudio/feedback/details/565068/project-template-relative-file-path-does-not-work](https://connect.microsoft.com/VisualStudio/feedback/details/565068/project-template-relative-file-path-does-not-work)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-07-23T22:49:30.577

您应该在 VSTemplate 中而不是在项目中映射文件夹。VS 不会在模板中进行任何操作。

一个例子是这样的。下面会将文件从“InnerFolder”复制到根目录。

```
<Folder Name="InnerFolder" TargetFolderName="." >
    <ProjectItem ReplaceParameters="true" TargetFileName="Web.config">Web.config</ProjectItem>
</Folder> 
```

# android - Android：降低图像位图质量以使活动加载更快

> ID：11548230
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:43:58.820
> 
> 标签：android, memory, bitmap

首先，我是Android的新手。这个问题可能很愚蠢。请忍受我。

我的活动加载了用户（外部）拍摄的大量图片，并在 listView 或 Horizo​​ntalScrollView 中以缩略图（小尺寸图片）的形式显示它们。我想知道有什么好方法可以让位图加载得更快吗？我使用 bitmapFactory.insampleSize 来缩小它。inDensity 会有帮助吗？还有什么好的方法吗？

我正在考虑为每个图像保存一个低质量的副本，因此每次应用程序都会显示缩略图低质量图像，除非用户真的想看到原始图像。这适用吗？如果是这样，有什么方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:21:56.600

我会建议你创建你的位图的缩小版本。请按照[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)了解如何拥有您的位图的缩小版本。由于它是显示缩略图的位图的缩小版本，因此它当然会节省您的内存使用量。

# wso2esb - wso2esb - 项目管理

> ID：11548231
> 
> 赞同：0
> 
> 时间：2012-07-18T18:44:01.737
> 
> 标签：wso2esb

我对 wso2 的 SOA 产品进行了几周的评估，并且有一些基本的（对我来说至关重要的）功能我找不到/使用，或者它可能根本不存在。我想确定。

首先，创建IDE支持。可能你们大多数人都知道 wso2 团队提供了 Carbon Studio，这是一件非常好的事情。不幸的是，当涉及到团队工作时，经常将现有项目导入 IDE 我碰壁了，因为：

1）如果我使用分发项目，我需要提交实际包含 Carbon Studio 理解的自然的 .projects 文件。这是可以接受的，但在我看来这也是不好的做法。

2）如果我使用 Maven，那么在导入后我将放松项目性质，因此如果不准备 .projects，插件将无法工作。

我错过了什么吗？我想摆脱 .projects 并能够 100% 使用 IDE。是否可以？不能生成它什么的。通常插件会尝试识别文件类型并使用指定的插件对其进行编辑。我知道大多数 Synapse 配置（例如）都是 XML，但这不是我的理由。无论如何，有人知道某种解决方案吗？

如果已知的 maven 存储库无法交付某些工件，则分发项目也无法从命令行构建。我可以编写 maven 插件来隐式构建每个想要的工件，但如果 maven 可以为我做这件事，那不是我想做的事情。而且我不能使用 maven，因为导入后我会失去 IDE 功能。

如果我需要在实际导入之前修复每个项目，那么 IDE 对我来说毫无用处。时间非常宝贵。

第二个重要且不可接受的功能是在使用例如生成器时将 jars 导入项目。为什么无法将创建的项目配置为使用依赖项？

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:43:54.543

您使用的开发者工作室版本是什么？从开发人员工作室 2.0.0 开始，有一个功能可以导入碳项目。然后你不需要提交 .project 文件。

转到导入 --> WSO2 --> 现有 WSO2 项目到工作区

# jquery - 平滑滚动导航栏

> ID：11548244
> 
> 赞同：0
> 
> 时间：2012-07-18T18:45:14.603
> 
> 标签：jquery

我打算让导航栏保持在固定位置，直到导航栏在滚动时到达浏览器窗口的顶部。

我能够用 jquery 实现这一点，但它并不顺利

```
 $(window).scroll(function()
     {     var box = document.getElementById('box'), 
           scroll = $(window).scrollTop();     
           if (scroll <= 598) { $("#box").css("top",598); }  
          else { $("#box").css("top",scroll); }
   }); 
```

怎么能像这里一样流畅？

1.  [参考1](http://corp.ign.com/)

我最终得到这样的东西[：](http://test.artedigitalli.com/pda/index.php?bgid=5)

如果我没有详细解释问题，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:00:04.370

你很接近。IGN 只是在您超过滚动标记并将栏切换到固定位置时进行侦听。这样你的浏览器只需要处理一个滚动事件，然后 CSS 处理其余的。

如果您打开 firebug / chrome 开发工具并观察元素，您实际上可以在标记处看到样式从 变`position: absolute`​​为。`position: fixed`

# php - 具有现有身份验证系统的 Bycript/Blowfish 和 Salts

> ID：11548248
> 
> 赞同：0
> 
> 时间：2012-07-18T18:45:40.520
> 
> 标签：php, authentication, blowfish, bcrypt, crypt

我正在尝试过渡到 Blowfish 以获取身份验证系统。请耐心等待，我不是密码学家，我对 Blowfish 的理解还不完全。

当前设置使用 sha1 和 salts。为每个用户生成盐并存储在数据库中。归结为：

```
$salt = $this->getSalt($username);
$hash = sha1($password . $salt);
if ($hash == $hashInDB)
{
     // user is authenticated, set session id etc ...
} 
```

该`getSalt()`方法为指定用户获取存储在数据库中的盐。

现在，如果我正确理解了所有内容，那么使用 crypt 我应该这样做：

```
$salt = '$2a$07$' . $this->getSalt($username) . '$';
$hash = crypt($password, $salt);

if ($hash == crypt($password, $saltInDB))
{
     // The user is authenticated, set session id etc..
} 
```

澄清一下，对于第二个示例，`$saltInDB`变量是一个类似于“$2a$07$arandomsaltcreatedatregistration$”的值。

*   我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:31:23.810

你的例子几乎是正确的。

当您使用该函数创建散列时`crypt()`，您将看到使用的参数（算法、成本和盐）是生成散列的一部分（散列的开头）：

```
$2a$07$LCzy1mE0b9lS8Uyx9HEeUgHm8zH1iDDZ5... 
```

这意味着，您可以替换`$saltInDB`为`$hashInDB`， crypt() 函数将自动从 中提取所需的参数`$hashInDB`。这也回答了您关于存储盐的问题，只需将哈希值存储在数据库中，盐就包含在其中。是的，您应该为每个密码生成一个新的盐。

不需要加盐后的“$”。

有关如何生成 bcrypt-hash 的更多信息，您可以在[此处](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)找到，如果您正在寻找一个完善的库，我可以推荐[phpass](http://www.openwall.com/phpass/)。

# c# - ASP.net c#，采用不同参数类型的同名方法

> ID：11548254
> 
> 赞同：4
> 
> 时间：2012-07-18T18:45:55.550
> 
> 标签：c#, asp.net, asp.net-mvc-3

> **可能重复：**
> [您可以在 ASP.Net MVC 中重载控制器方法吗？](https://stackoverflow.com/questions/436866/can-you-overload-controller-methods-in-asp-net-mvc)

我需要 2 种采用不同类型参数的方法。所以我尝试了这个，

```
[HttpPost]
public ActionResult ItemUpdate(ORDER ln)
{
   // do something
}

[HttpPost]
public ActionResult ItemUpdate(List<ORDER> lns)
{
  // Do Something
} 
```

但它不起作用。

编译的时候没有报错，但是运行的时候就报错了。

我如何编写代码以使其正常工作？

谢谢！

[编辑]

```
[HttpGet]
public ActionResult ItemUpdate(string name)
{
    return Content(name);
}

[HttpGet]
public ActionResult ItemUpdate(int num)
{
    return Content(num.ToString());
} 
```

当我调用 /Test/ItemUpdate/

它会出错，

```
Server Error in '/' Application.
The current request for action 'ItemUpdate' on controller type 'OrderController' is ambiguous between the following action methods:
System.Web.Mvc.ActionResult ItemUpdate(System.String) on type Ecom.WebUI.Controllers.OrderController
System.Web.Mvc.ActionResult ItemUpdate(Int32) on type Ecom.WebUI.Controllers.OrderController 
```

[编辑]

它与 ORDER 甚至单个参数都不匹配。

```
if (lns.GetType() == typeof(ORDER))
{
  // always false
}else{
  // also I can not cast the object.
  ORDER ln = (ORDER)lns; //Unable to cast object of type 'System.Object' to type 'ORDER'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:28:45.460

MVC 不支持重载操作。调度员无法分辨这两个 Action 之间的区别。您可以通过为您的一项操作指定`[HttpGet]`属性和另一项指定`[HttpPost]`属性来解决此问题。

如果这不是一个选项（或者如果您有三个或更多重载），您始终可以自己调度 Action，方法是使用对象参数并使用运行时类型标识来选择要调用的正确函数。例如：

```
[HttpPost]
public ActionResult ItemUpdate(object arg)
{
    if (arg.GetType() == typeof(ORDER))
    {
        return ItemUpdateOrder((Order)arg);
    }
    else if (arg.GetType() == typeof(List<ORDER>))
    {
        return ItemUpdateList((List<Order>)arg);
    }
}

public ActionResult ItemUpdateOrder(ORDER ln)
{
    //...
}

public ActionResult ItemUpdateList(List<ORDER> lns)
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:50:49.943

你不能在控制器中这样做。您将不得不更改第二个方法名称。

```
[HttpPost]
public ActionResult ItemUpdates(List<ORDER> lns)
{
  // Do Something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:29:51.853

```
public ActionResult ItemUpdates(object myInputValue)
{
    if (myInputValue.GetType() == typeof(string)
    // Do something
    else if (myInputValue.GetType() == typeof(List<ORDER>))
    // Do something else
} 
```

然后，您可以将对象转换为您选择的类型并正常操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:45:00.223

在 ASP.NET 中，不可能有没有[ActionFilter](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)属性的重载方法来区分这些操作。这样做的原因是 ActionInvoker（在 Controller 基类中用于调用 actiosn 的类）无法确定调用哪个方法，因为它需要为每个如果 ModelBinder 可以从传递的 HTTP 请求构造该参数对象，则重载。对于简单的场景，这会起作用，但在更复杂的场景中，这会失败，因为 ModelBinder 将成功绑定多个重载的参数。在 ASP.NET MVC 中不允许重载是非常聪明的设计决定。

为了解决您的问题，您可以`ItemUpdate`通过仅保留第二个操作并仅执行一个操作来修复 HTTP GET 操作，因为 ModelBinder 不介意作为 URL 参数传递的值是 a`string`还是`int`.

```
[HttpGet]
public ActionResult ItemUpdate(string name)
{
    return Content(name);
} 
```

对于`ItemUpdate`HTTP POST 版本，我建议重命名这些操作之一或只有一个操作，列表版本，因为更新单个`ORDER`只是更新多个`ORDER`对象的特定情况。

# c# - HTML-Agility-Pack 的 DocumentNode.SelectNodes 无法找到特定节点

> ID：11548257
> 
> 赞同：0
> 
> 时间：2012-07-18T18:46:08.463
> 
> 标签：c#, xpath, html-agility-pack

我正在使用 HTML-Agility-Pack 从[Mcafee Threat Intelligence 实验室](http://www.mcafee.com/us/mcafee-labs/threat-intelligence.aspx)抓取有关域和 IP 的数据，但无论我向 DocumentNode.SelectNodes 提供什么 XPATH，它都找不到我正在寻找的节点（威胁级别的图像）。据我所知，它可以找到其他节点和图像，但不是这个特定的。特定 img 在此页面上的 id 为“ctl00_mainContent_imgRisk”：www.mcafee.com/threat-intelligence/domain/default.aspx?domain=facebook.com（以 facebook.com 为例）。这是我正在使用的代码：

```
 string XPATH = "foo"
        string url = "http://www.mcafee.com/threat-intelligence/ip/default.aspx?";
        if (y == true)
            url = url + "ip=" + ipaddress;
        if (y == false)
            url = url + "domain=" + domainname;
        HttpWebRequest mcafeeReq = (HttpWebRequest)WebRequest.Create(url);
        mcafeeReq.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5";
        HtmlDocument mcafeeWeb = new HtmlDocument();
        HttpWebResponse resp = (HttpWebResponse)mcafeeReq.GetResponse();
        var resultStream = resp.GetResponseStream();
        mcafeeWeb.Load(resultStream);
        HtmlNodeCollection nodes = mcafeeWeb.DocumentNode.SelectNodes(XPATH);
        try
        {
            foreach (HtmlNode node in nodes)
            {
                try
                {
                    HtmlAttribute att = node.Attributes["title"];
                    Console.WriteLine(att.Value);
                }
                catch
                {
                    Console.WriteLine("No Value Found");
                }
            }
        }
        catch
        {
            Console.WriteLine("No Nodes Found.");
        } 
```

我已经为 XPATH 尝试了许多不同的值来找到 img，包括

"//img[@id='ctl00_mainContent_imgRisk']"，不返回节点

"//img"，返回一些img，但不是正确的

img 的完整 XPATH "/html/body[@id='ctl00_MasterBody']/div[@class='wrapper']/div[@class='page']/div[@class='container pageContainer'] /div[@class='pageMiddle']/div[@class='pageTopGradient']/div[@class='pageBottomGradient']/div[@class='canvas pageContent pageBannerBolster']/div[@class='row pageBanner pageBannerTeal']/div[@class='area primaryContent']/div[@class='bannerContent bannerContentImage']/img[@id='ctl00_mainContent_imgRisk']"，不返回节点。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:19:02.837

你的 XPath 是

```
//img[@id='ctl00_mainContent_imgRisk']

```

其余的都是多余的。

不要使用工具生成的 XPath。自己制作 XPath。

# javascript - 一个div的画布drawImage

> ID：11548258
> 
> 赞同：3
> 
> 时间：2012-07-18T18:46:09.207
> 
> 标签：javascript, html, html5-canvas

我正在尝试在画布上绘制图像。我的来源是一个包含文本和图像集合的 div。这可能吗？我试图将一些代码放在一起，但由于画布为空而失败。

**分区**

```
<div id="puzzle">
Some text
<img src="sky" />
text text
<img src="sun.png />
</div> 
```

**代码**

```
<canvas id="mycanvas" width="300" height="150"></canvas>
var canvas = document.getElementById("mycanvas");
var ctx = ccanvas.getContext("2d");
var img = document.getElementById("puzzle");
img.onload = function(){
    ctx.drawImage(img,0,0,40,40);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:50:04.530

改变

```
ccanvas.getContext("2d"); 
```

到

```
canvas.getContext("2d"); 
```

否则，这似乎就是您要查找的内容：[您可以使用 Canvas 对页面进行“截图”吗？](https://stackoverflow.com/questions/4340056/can-you-take-a-screenshot-of-the-page-using-canvas)

更具体地说：[http ://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T15:34:40.060

写`id=puzzle`在img标签里面

# javascript - Extjs 3，Borderlayout 没有显示北方

> ID：11548263
> 
> 赞同：1
> 
> 时间：2012-07-18T18:46:26.573
> 
> 标签：javascript, extjs, extjs3

在 ExtJS 3 中，我创建了一个如下所示的面板，我将其设置为 BorderLayout，但它不会显示北部区域，尽管它会显示中心部分。

请帮忙。

```
MyContainer = Ext.extend(Ext.Panel, {
    initComponent: function () {
        var period_start = new Ext.form.TextField({
            id: 'PERIOD_START',
            fieldLabel: 'PERIOD START',
            allowBlank: true,          
            width: 250
        });
        var tmpPanel = new Ext.Panel();
        tmpPanel.add(period_start);

        var period_start1 = new Ext.form.DateField({
            id: 'PERIOD_START1',
            fieldLabel: 'PERIOD START',
            allowBlank: true,
            width: 250
        });
        var tmpPanel1 = new Ext.Panel();
        tmpPanel1.add(period_start1);       

        var config = {
            layout: 'border',
            items: [
                {
                    region: 'north',
                    layout: 'fit',
                    minHeight: 150,
                    items: [tmpPanel]
                },
                {
                    region: 'center',
                    layout: 'fit',
                    items: [tmpPanel1]
                }
            ]
        };

      .....
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:49:19.063

您必须为面板定义一个中心区域。这对我很有效（ExtJS 3.4）：

```
 var config = {
                            layout: 'border',
                            region: 'center',
                            items: [
                                {
                                    region: 'north',
                                    layout: 'fit',
                                    height: 150,
                                    minHeight: 150,
                                    items: [tmpPanel]
                                },
                                {
                                    region: 'center',
                                    layout: 'fit',
                                    height: 300,
                                    items: [tmpPanel1]
                                }
                            ]
                        }; 
```

如果需要，这是整个代码：

```
 <div id="frontendlayout">

        <script type="text/javascript">

                Ext.ns('Test');

                Test.MyContainer = Ext.extend(Ext.Panel, {
                    initComponent: function () {
                        var period_start = new Ext.form.TextField({
                            id: 'PERIOD_START',
                            fieldLabel: 'PERIOD START',
                            allowBlank: true,          
                            width: 250
                        });
                        var tmpPanel = new Ext.Panel();
                        tmpPanel.add(period_start);

                        var period_start1 = new Ext.form.DateField({
                            id: 'PERIOD_START1',
                            fieldLabel: 'PERIOD START',
                            allowBlank: true,
                            width: 250
                        });
                        var tmpPanel1 = new Ext.Panel();
                        tmpPanel1.add(period_start1);       

                        var config = {
                            layout: 'border',
                            region: 'center',
                            items: [
                                {
                                    region: 'north',
                                    layout: 'fit',
                                    height: 150,
                                    minHeight: 150,
                                    items: [tmpPanel]
                                },
                                {
                                    region: 'center',
                                    layout: 'fit',
                                    height: 300,
                                    items: [tmpPanel1]
                                }
                            ]
                        };

                        // config bestätigen
                        Ext.apply(this, Ext.apply(this.initialConfig, config));

                        Test.MyContainer.superclass.initComponent.apply(this, arguments);

                    },

                    onRender:function() {
                        Test.MyContainer.superclass.onRender.apply(this, arguments);
                    }

                });

                Ext.reg('test.mycontainer', Test.MyContainer);

                Ext.onReady(function(){

                    var container = Ext.get("frontendlayout");
                    new Ext.Viewport({
                        renderTo: container,
                        layout: 'border',
                        items: [
                            {xtype:'test.mycontainer'}
                        ]
                    });

                });

        </script>

 </div> 
```

# sql - NOT IN 运算符问题 Oracle

> ID：11548267
> 
> 赞同：9
> 
> 时间：2012-07-18T18:46:40.627
> 
> 标签：sql, oracle, plsql

这是我的查询：

```
Select a.* from Table1 a, Table2 b
Where 
a.tid=b.tid and 
b.createddate=(Select max(createddate) from Table2) and
a.tid not in (Select distinct tid from Table3); 
```

问题是我知道这应该返回一些有效的输出，但它没有。我们的问题是 a.tid 中的最后一行**不在（从 Table3 中选择不同的 tid）；**如果我将 Select distinct tid from Table3 替换为 ('T001','T002','T003','T004') 等硬编码值，则它可以正常工作并返回数据。

怎么了？我错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T19:14:47.433

试试这个：

```
Select a.* from Table1 a, Table2 b
Where 
a.tid=b.tid and 
b.createddate=(Select max(createddate) from Table2) and
a.tid not in (Select tid from Table3 where tid is not null); 
```

正如评论中提到的所有人一样，如果 table3 中至少有一行 tid 为空值，则不会返回任何行。这是因为对于 Oracle，null 就像是在说“我不知道这个值是什么”。Oracle 不能肯定地说您正在搜索的值肯定不在您的子选择中，因为它不知道这个“未知”值实际上是什么。此外，文档说它是这样工作的：http: [//docs.oracle.com/cd/B28359_01/server.111/b28286/conditions013.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions013.htm)

另一种选择是将查询编写为：

```
Select a.* from Table1 a, Table2 b
Where 
a.tid=b.tid and 
b.createddate=(Select max(createddate) from Table2) and
not exists (Select null from Table3 t3 where t3.tid = a.tid); 
```

空值的处理是 not exists 和 not in 之间的主要区别之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:51:29.263

您的查询，稍微改写：

```
Select a.*
from Table1 a join
     Table2 b 
     on a.tid=b.tid 
where b.createddate=(Select max(createddate) from Table2) and
      a.tid not in (Select distinct tid from Table3) 
```

这告诉我的是，Table2 中创建日期最长的 tid 在 Table3 中。

要对此进行测试，请从 table2 获取最大创建日期。然后获取table1中与这个最大值对应的所有记录。你会发现这些也在table3中。

如果我不得不推测，您可能需要 Table2 中每个表的最大创建日期，而不是总体最大值。

顺便说一句，在 Oracle（和大多数其他数据库）中，最后一个子查询中的 distinct 是多余的。在这种情况下，数据库应该足够智能以删除重复项。

# javascript - 从标签中获取样式表文本

> ID：11548272
> 
> 赞同：3
> 
> 时间：2012-07-18T18:47:03.663
> 
> 标签：javascript, html, dom

我有一个样式表`<link>`标签：

```
<link rel=stylesheet href="/path/to/foo/bar.css" /> 
```

我想`/path/to/foo/bar.css`通过 javascript 获取样式表的文本。

**这可能吗？** 我什至会接受不能跨浏览器工作的答案...

***注意：***涉及的答案`document.styleSheet`不算数，因为浏览器已经转换了诸如 URL 之类的东西，而且我对原始源感兴趣（尽管这确实提供了一种[有趣的方式来解析 URL...](https://twitter.com/kriskowal/status/222825051274219521)）

***ASLO 注意：***我更愿意在没有任何 xhr 的情况下执行此操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:55:50.733

只需对指定的 URL 执行 AJAX 请求。

使用 jQuery：

```
$.get('/path/to/foo/bar.css', function(CSS_text) {
    // Just use the CSS_text here...
}); 
```

你可以很容易地用原生 JS 做同样的事情......

# java - 将IP地址转换为Java中的十进制等效值？

> ID：11548273
> 
> 赞同：2
> 
> 时间：2012-07-18T18:47:06.930
> 
> 标签：java, ip

我想写一个方法，但不知道从哪里开始将字符串转换为十进制格式。

这是我想要的一个例子：

我有以下字符串：

`String ipAddress = "192.168.1.10 "`

我想把它转换成它的十进制等价物：

`3232235786`

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:59:45.817

怎么样：

```
new BigInteger( InetAddress.getByName("1.1.1.1").getAddress() ).intValue() 
```

如果我没记错的话，这应该可以解决问题……显然使用您的 IP 而不是 1.1.1.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:51:16.307

怎么样（测试和工作）：

```
 String ipAddress = "192.168.1.10";
    String[] addrArray = addr.split("\\.");

    long ipDecimal = 0;

    for (int i = 0; i < addrArray.length; i++) {

        int power = 3 - i;
        ipDecimal += ((Integer.parseInt(addrArray[i]) % 256 * Math.pow(256, power)));
    }

    System.out.println(ipDecimal); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-01T14:05:20.907

转换方程：

```
A.B.C.D = D + (C * 256) + (B * 256 * 256) + (A * 256 * 256 * 256) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:56:39.680

```
public class Main
{
    public static void main(String[] args)
    {
        String ip="192.168.1.10";
        String[] addrArray = ip.split("\\.");
        long num = 0;
        for (int i = 0; i < addrArray.length; i++)
        {
            int power = 3 - i;
            num += ((Integer.parseInt(addrArray[i]) % 256 * Math.pow(256, power)));
        }
        System.out.println(num);
    }
} 
```

输出：

```
3232235786 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T10:00:43.093

我使用以下代码将 IP 转换为整数，以便使用 MaxMind[或](http://www.maxmind.com/en/country)IP2Location[的](http://www.ip2location.com/databases/db1-ip-country)IP2Country-Databases 。

您可以根据自己的需要将此代码复制粘贴到帮助程序类中。

```
public static int ip2Int(String ip) {
    int ipInt = 0;
    String[] tokens = ip.split("\\.");
    int factor = 256*256*256;
    for (String t:tokens) {
        ipInt += new Integer(t).intValue()*factor;
        factor = factor/256;
    }
    return ipInt;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T18:49:51.773

将其转换为二进制，然后将其转换为十进制

或试试[这个](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T18:51:54.893

将每个段转换为一个 8 位二进制数，将所有 4 个 8 位二进制数连接成一个 32 位二进制数，然后将 32 位二进制数转换为十进制数，您就有了答案。

编辑：这是您如何将数字转换为二进制的方法：

```
public static int binaryToDecimal(String bin) {
    int result = 0;
    int len = bin.length();
    for(int i = 0; i < len; i++) {
        result += Integer.parseInt(bin.charAt(i) +  "") * Math.pow(2, len - i - 1);
    }
    return result;
}

public static String decimalToBinary(int num) {
    String result = "";
    while(true) {
        result += num % 2;
        if(num < 2)
            break;
        num = num / 2;
    }
    result = reverse(result);
    return result;
}

public static String reverse(String str) {
    String result = "";
    for(int i = str.length() - 1; i >= 0; i--)
        result += str.charAt(i);
    return result;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-30T11:23:08.353

您可以通过将字符串表示的 IP 地址（无论是 IPv4 还是 IPv6）转换为 BigInteger 来将其转换为十进制：

```
private static BigInteger ipToDecimal(String ip) {
    return new BigInteger(1, InetAddresses.forString(ip).getAddress());
} 
```

必要时，您可以通过以下方式将其转换回来：

```
private static String decimalToIp(String decimal) throws Exception {
    BigInteger parsed = new BigInteger(decimal);

    if (parsed.compareTo(BigInteger.valueOf(4294967295L)) > 0) {
        return Joiner.on(":").join(Splitter.fixedLength(4).split(parsed.toString(16)));
    } else {
        return InetAddress.getByName(decimal).getHostAddress();
    }
} 
```

转换回来并不完美 - 您必须计算 IPv4 映射地址，[请参阅 wiki](https://en.wikipedia.org/wiki/IPv6#IPv4-mapped_IPv6_addresses)

# html - 图片在 IE 中被截断

> ID：11548274
> 
> 赞同：0
> 
> 时间：2012-07-18T18:47:09.343
> 
> 标签：html, css

请在 Internet Explorer 中查看我的网站：

[http://www.ziftit.com/index2.html](http://www.ziftit.com/index2.html)

我无法弄清楚为什么礼品盒图像在图像顶部被截断。

* * *

**更新：**我将文档类型添加到页面顶部，然后删除了所有评论，现在它完美显示了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:50:37.517

第一步，将正确的 Doctype 添加到您的文档中。

然后验证 HTML 和 CSS 是否有效。

# streaming - FMS VOD 流媒体：如何访问上传到 webroot/vod 目录的内容？

> ID：11548275
> 
> 赞同：0
> 
> 时间：2012-07-18T18:47:12.237
> 
> 标签：streaming, flash-media-server

我最近开始使用全新安装的 FMS 4.5.0，但在让我的媒体加载 VOD 应用程序时遇到了一些问题。

在将我自己的一些 FLV/F4V 内容上传到“/webroot/vod/”后，我目前只能从安装中加载示例。

是否需要进行某种配置才能访问我的媒体？

我需要为每个视频创建清单吗？

我一直在通过以下方式运行测试： [http ://www.osmf.org/configurator/fmp/](http://www.osmf.org/configurator/fmp/)

并且幸运地使用以下方法访问了安装随附的视频：

视频源（网址）：http://[我的主机]/vod/sample1_1000kbps.f4v

但是，当我将其更改为指向我最近上传的一个视频时，它每次都会失败。

另一个奇怪的提示是，我能够播放其中一个样本，但后来我更改了它的名称，当文件名发生更改时，它仍然能够使用相同的文件名加载那个特定的视频。这让我相信它并没有真正加载正确的文件，或者我可能正在上传到错误的目录。但我找不到任何其他包含视频的目录。

如果您需要更多信息来帮助我，请告诉我。我对此很陌生，不确定要包括什么。

提前感谢您的帮助！

**编辑：这是一个路径问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:18:43.043

这已解决。

显然我的服务器的 webroot 目录没有正确设置，在它指向正确的目录之后它被修复了。

# javascript - 如何创建在特定时间重置的倒计时时间

> ID：11548276
> 
> 赞同：4
> 
> 时间：2012-07-18T18:47:13.117
> 
> 标签：javascript, datetime, time, timer

首先让我说我对 javascript 没有深入的了解，但我知道如何以足够的方式为页面编写小脚本。我的一个客户需要我为网站执行以下操作：

1.  在他们的计算机上查找用户的本地时间。
2.  取当地时间并从下午 6 点减去它。
3.  在倒计时中显示该时间，或者只是一个声明，让用户知道当天发货还剩多少时间。
4.  下午 6 点之后，时间会重置或消失，直到下一个工作日。

到目前为止，我已经能够创建从本地计算机获取时间的逻辑。我以为我可以使用 datejs，但它不会计算一天中的小时数。

这是我拥有的当前代码：

```
var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()

var suffix = "AM";
if (hours >= 12) 
{
  suffix = "PM";
  hours = hours - 12;
 }

var suffix = "AM";

if (hours >= 12) 
{
  suffix = "PM"; 
  hours = hours - 12;
}

if (hours == 0) 
{
  hours = 12;
}

if (minutes < 10)
  minutes = "0" + minutes;

document.write("<b>" + hours + ":" + minutes + " " + suffix + "</b>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:57:00.853

这个怎么样：

```
var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()

var suffix = "AM";
if (hours >= 12) {
suffix = "PM";
hours = hours - 12;
  }

if (minutes < 10)
minutes = "0" + minutes

if (suffix == "PM" && hours >= 6)
    {
 document.write("You're too late for next day shipping!");
}
    else
    {
    var hoursLeft = 5 - hours;
var minsLeft = 60 - minutes;
    document.write("<b> You've got " + hoursLeft  + " hours and " + minsLeft + " minutes left to qualify for next day shipping! </b>")
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:04:04.783

如果这个网站允许我评论其他人的答案，我会把这归功于 Giovanni，但由于我还不能评论其他人的工作，所以这里需要改变。

```
var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()

var suffix = "AM";

if (minutes < 10)
minutes = "0" + minutes

if (hours >= 18)
{
 document.write("You're too late for next day shipping!");
}
else
{
var hoursLeft = 17 - hours;
var minsLeft = 60 - minutes;
if(minsLeft==60){
    minsLeft=0;
    hoursLeft++;
}

document.write("<b> You've got " + hoursLeft  + " and " + minsLeft + " minutes left to qualify for next day shipping! </b>")
} 
```

原因是早上 5 点下单的人可能会认为他们必须在下一个小时内提交才能在第二天发货，而实际上他们还有 13 个小时。

**编辑：**看到你的时区问题，[这里](http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329)有一个你可能感兴趣的帖子。

**编辑2：**发布了错误的链接。正确的答案现在应该出来了，尽管它可能有点过时了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:20:26.993

我昨天也解决了类似的问题，所以这很容易。这是javascript代码：

```
function start_onload(last_hour){
    var timeout_message = document.getElementById('timeout_message');
    var currentTime = new Date();
    var hours = currentTime.getHours();
    var minutes = currentTime.getMinutes();
    var seconds = currentTime.getSeconds();
    var expire_time = 0; // in seconds
    if (hours<last_hour) {
        expire_time += (last_hour-hours-1)*3600;
        expire_time += (59-minutes)*60;
        expire_time += (59-seconds);
    }
    else {
        timeout_message.innerHTML = 'It\'s after '+last_hour+' o\'clock!';
        return;
    }
    var expire_time = currentTime.getTime() + 1000*expire_time;
    //console.log(expire_time, hours, minutes, seconds, expire_time);
    function countdown_session_timeout() {
        var current_time = new Date().getTime();
        var remaining = Math.floor((expire_time - current_time)/1000);
        if (remaining>0) {
            hours = Math.floor(remaining/3600);
            minutes = Math.floor((remaining - hours*3600)/60);
            seconds = remaining%60;
            timeout_message.innerHTML = 'Countdown will stop in '+ hours + ' hours ' + minutes + ' min. ' + seconds + ' sec.';
            setTimeout(countdown_session_timeout, 1000);
        } else {
            timeout_message.innerHTML = 'Time is up!';
        }
    }
    countdown_session_timeout();
} 
```

完整的脚本@ [pastebin.com](http://pastebin.com/3kSGd0Mt)在这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T07:58:47.773

这是一个简单的倒计时计时器，从函数运行后的 30 秒开始，到 0 结束。达到 0 后，它会自动重置计数器。它再次进入 30 秒，此过程循环继续

> ```
>   window.onload = function() { startCountDown(30,
> 1000，我的功能）；}
> 
> 函数 startCountDown(i, p, f) { var pause = p; 变量 fn = f;   
> var countDownObj = document.getElementById("countDown");
> 
>    countDownObj.count = 函数（i）{
>       //写出计数
>       countDownObj.innerHTML = i;
>       如果（我 == 0）{
>       //执行函数
>       //fn();
>                 startCountDown(30, 1000, myFunction); //停止
>       返回; } 设置超时（函数（）{
>       // 重复
>       countDownObj.count(i - 1);
>       },
>       暂停  
>       ); } //设置它 countDownObj.count(i); }
> 
> 函数 myFunction(){};
> 
> ```
>  </script> 
> ```
> 
>   
>    
> ```

# sql-server-2008 - 这个复合索引会帮助所有这些查询吗？

> ID：11548279
> 
> 赞同：2
> 
> 时间：2012-07-18T18:47:24.013
> 
> 标签：sql-server-2008, tsql, indexing

假设我有下表：

```
Orders
======
OrderID
CustomerID
StatusID
DateCreated 
```

我有以下查询：

```
select CustomerID from Orders where OrderID = 100

select OrderID from Orders where CustomerID = 20

select OrderID, StatusID from Orders where CustomerID = 100 and OrderID = 1000 
```

如果我制作以下索引：

```
create nonclustered index Example
  On dbo.Orders(OrderID,CustomerID)
  Include(StatusID) 
```

这是否会使用一个索引优化所有 3 个查询？换句话说，复合索引是否改进了使用复合中的一项的查询？或者是否也应该在这些列上创建单独的索引（即 OrderID、CustomerID）以满足查询 1 和 2？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:49:05.700

该索引对第二次查询没有帮助，因为不可能首先在索引中最左边的列上查找。

想想电话簿。首先，尝试查找姓氏为 Smith 的所有人。容易，对吧？现在，尝试查找所有名字为 John 的人。电话簿中“索引”的工作方式是姓氏、名字。当您尝试查找所有 John 时，首先按 LastName 对它们进行排序根本没有帮助 - 您仍然需要查看整个电话簿，因为会有 John Anderson 和 John Zolti 以及介于两者之间的所有内容。

为了充分利用所有三个查询，并假设这些是唯一正在使用的三个查询表单，我可能*会*建议一个额外的索引：

```
create nonclustered index Example2
  On dbo.Orders(CustomerID) INCLUDE(OrderID) 
```

（如果 OrderID 是主键，则不需要包含它。）

但是，这应该针对您的工作负载进行测试，因为索引不是免费的——它们确实需要额外的磁盘空间，并且在您运行 DML 查询时需要维护额外的工作。同样，这假设您的问题中列出的三个查询是您使用的唯一形状。如果您有其他查询具有不同的输出列或不同的 where 子句，那么所有的赌注都会被取消。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:20:32.653

以上答案都是正确的。但他们遗漏了一件事。您可能需要 ORDER_ID 上的聚集索引。如果您在 ORDER_ID 上创建聚集索引，则表上的任何非聚集索引都将自动包含该值，因为非聚集索引条目指向存在聚集索引的表上的聚集索引。所以你会想要这个：

```
create clustered index IX_ORDERS_ORDERID on ORDERS (OrderID)
go
create nonclustered index IX_ORDERS_CustomerID
On dbo.Orders(CustomerID)
Include(StatusID)
go 
```

现在您可以快速搜索订单 ID 或客户 ID，并且您的所有查询都将运行良好。你知道怎么看执行计划吗？在 sql studio 中去查询 - 包括实际的执行计划，然后运行您的查询。您将看到使用了哪些索引、是否执行了查找或扫描等的图形表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:59:55.147

```
create nonclustered index Example
  On dbo.Orders(OrderID,CustomerID)
  Include(StatusID) 
```

将此索引读取为：从 Orders 表中创建 OrderID、CustomerID、StatusID 的系统维护副本。按 OrderID 订购此副本，并与 CustomerID 断绝关系。

```
select CustomerID from Orders where OrderID = 100 
```

由于索引是按 OrderID 排序的，因此查找第一个符合条件的记录很快。一旦我们找到第一条记录，我们可以继续在索引中读取，直到找到 OrderID 不是 100 的记录。然后我们可以停止。由于我们想要的所有列都在索引中，我们不必查找实际的表。伟大的！

```
select OrderID from Orders where CustomerID = 20 
```

由于索引按 OrderID 排序，然后按 CustomerID 排序，因此符合条件的记录可以出现在索引中的任何位置。第一条记录可能符合条件（OrderID = 1，CustomerID = 20）。最后一条记录可能符合条件（OrderID = 1000000000，CustomerID = 20）。我们**必须阅读整个索引**才能找到符合条件的记录。**这是不好的。** 一个小帮助：因为我们想要的所有列都在索引中，所以我们不必查找实际的表。因此，从技术上讲，第二个查询得到了索引的帮助——只是没有到其他查询得到帮助的程度。

```
select OrderID, StatusID from Orders where CustomerID = 100 and OrderID = 1000 
```

由于索引是按 OrderID 然后按 CustomerID 排序的，因此查找第一个符合条件的记录很快。一旦我们找到第一条记录，我们就可以继续在索引中读取，直到找到一条不合格的记录。然后我们可以停下来。由于我们想要的所有列都在索引中，我们不必查找实际的表。伟大的！

* * *

> 复合索引是否改进了使用复合中的一项的查询？

有时！

> 或者是否也应该在这些列上创建单独的索引（即 OrderID、CustomerID）以满足查询 1 和 2？

有时不是！

**真正的答案是索引声明中列**的顺序决定了索引**中记录**的顺序这一事实的细微差别。一些排序有助于一些查询，而另一些则没有。您可能需要再补充一个索引以涵盖 CustomerID、OrderID 的情况。

* * *

> “由于我们想要的所有列都在索引中，我们不必查找实际的表”——所以索引可以用于读取目的，尽管不用于查找/查找目的？

当索引（它是表的一部分的副本）包含解析查询所需的所有信息时，不需要读取实际的表。索引“覆盖”查询。

# c++ - opencv计算矩阵秩

> ID：11548282
> 
> 赞同：2
> 
> 时间：2012-07-18T18:47:31.813
> 
> 标签：c++, visual-studio-2008, opencv

我正在尝试查找矩阵的等级。在 matlab 中，这相当简单，但我使用的是 Visual Studio 2008 (c++)。我最近安装了openCV，到目前为止它适用于我的大部分矩阵运算，除了我不知道如何使用openCV来获取矩阵的等级。在我的在线研究中，我发现显然 cvSVD 可以给我排名 [http://www.emgu.com/wiki/files/1.3.0.0/html/55d6f4d2-223d-8c55-2770-2b6a9c6eefa2.htm](http://www.emgu.com/wiki/files/1.3.0.0/html/55d6f4d2-223d-8c55-2770-2b6a9c6eefa2.htm)

但我不知道 cvSVD 将如何返回这个特定的属性。关于从openCV获取矩阵等级的任何想法？？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:51:42.500

阅读以下

[http://en.wikipedia.org/wiki/Singular_value_decomposition#Applications_of_the_SVD](http://en.wikipedia.org/wiki/Singular_value_decomposition#Applications_of_the_SVD)

在**Range、null space 和 rank**部分中，它解释了如何从奇异值中获取 Rank。引用此页面：

> 因此，M 的秩等于非零奇异值的个数

所以基本上你可以计算非零奇异值的数量，这就是排名。根据您在问题中提供的链接，您在 opencv 中的 SVD 计算函数应该返回一个矩阵或奇异值向量 - 如果它是一个矩阵，则奇异值位于该矩阵的主对角线上。从这里你应该没问题。可能有更简单的方法，但是我对opencv不熟悉。

# ant - 需要 Ant 条件示例

> ID：11548285
> 
> 赞同：3
> 
> 时间：2012-07-18T18:47:42.937
> 
> 标签：ant, ant-contrib

有人可以用代码中的“if”、“and”、“not”和“istrue”的 Ant 条件属性示例来解释我吗？

我是 Ant 新手，需要帮助。

基本上我需要使用 FTP 下载文件。我有下载代码。但是在下载之前我需要检查的条件很少。

1.  在下载之前检查 Downloadstatus 变量值（通常是它的真或假值”）
2.  检查文件是否已下载或在路径中可用
3.  如果两个条件都失败，则执行 FTP 下载代码。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T00:34:43.193

ant-contrib 是一个广泛使用的库，if/else/for/foreach 任务不仅使编写复杂的 ant 脚本变得更容易，它们还将使您的 ant 脚本更具可读性。

但是，既然你坚持:)

我过去处理此问题的方法是设置一个仅在设置属性 X 时执行的任务 A，并使任务 A 依赖于检查条件并设置属性 X 的某个任务 B（如果它们为真）。例如：

```
<target name="get-ftp-file" depends="check-need-ftp-file" if="ftp.call.required">
  <ftp ... />
</target>

<target name="check-need-ftp-file">
  <condition property="ftp.call.required">
    <and>
      <not>
        <!-- Checks if Downloadstatusvariable variable is true -->
        <istrue value="${Downloadstatusvariable}"/>
      </not>
      <not>
        <!-- Checks if file is present in filesystem -->
        <available file="${my.file}"/>
      </not>
    </and>
  </condition>
</target> 
```

编辑：

coolgokul，`<and>`和`<not>`任务是标准的逻辑运算符。`<available>`如果文件存在于本地计算机上，则上述示例中的条件评估为真。但是我们只想在本地机器上不存在该文件时才下载该文件，因此我们将其包装在`<not>`任务中。与`${Downloadstatusvariable}`检查类似——我们想确保它不是真的，所以我们使用`<istrue>`然后将其包装在`<not>`.

最后，我们要确保变量不为真并且文件不存在，因此我们将这两个条件都包含在`<and>`. 翻译成英文，我们问“Downloadstatusvariable 是否不正确，下载的文件是否不可用？”

推荐你阅读更多关于条件运算符@http [://ant.apache.org/manual/Tasks/conditions.html](http://ant.apache.org/manual/Tasks/conditions.html)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:58:42.127

标准 Ant 没有“if”任务，但您可以使用“condition”任务执行几乎任何您需要的条件逻辑。请参阅[http://ant.apache.org/manual/Tasks/condition.html](http://ant.apache.org/manual/Tasks/condition.html)举一些例子。

[在ant-contrib](http://ant-contrib.sourceforge.net/)库中有一组附加任务，包括“if”任务，但我建议不要使用它，除非你真的需要，因为它会增加你的构建环境的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:53:40.843

您是否正在尝试使用[Ant Contrib Task？](http://ant-contrib.sourceforge.net/tasks/tasks/index.html). 如果您单击那里的链接，该文档会举例说明您可能希望通过每个任务实现的目标

一些相关的例子可能在这里：[Steve J's Blog](http://blog.stefanjaeger.ch/2008/02/05/ant-contrib/)

# javascript - 给yepnope打电话一次或多次？

> ID：11548291
> 
> 赞同：1
> 
> 时间：2012-07-18T18:48:42.550
> 
> 标签：javascript, yepnope

提供了有用的`yepnope.js`API：`yepnope`. 它接受单个对象或数组作为其参数。

但是是

```
yepnope({
  load: 'a.js',
  complete: function() {
    console.log("loaded a.js");
  },
});

yepnope({
  load: 'b.js',
  complete: function() {
    console.log("loaded b.js");
  },
}); 
```

和

```
yepnope([
{
  load: 'a.js',
  complete: function() {
    console.log("loaded a.js");
  },
},
{
  load: 'b.js',
  complete: function() {
    console.log("loaded b.js");
  },
}
]); 
```

相等的？如果不是，哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:41:10.693

在功能上，我认为没有区别。这取决于您的风格、情况以及应用程序其余部分的编写方式。

当这两个示例在 Chrome 中运行时，开发人员工具显示的页面加载时间几乎相同。平均而言，第一个示例看起来快了几毫秒。但有时它也可能更慢。

# django - 本地和母语的 Django 语言选择器

> ID：11548292
> 
> 赞同：5
> 
> 时间：2012-07-18T18:48:43.423
> 
> 标签：django, internationalization, translation

我有一个 django 网站，我正在使用语言选择器添加翻译，该语言选择器列出了用户语言中的可用语言。我想让下拉列表也包括本机拼写。

目前它看起来像这样：
英语
荷兰语
简体中文

当我切换到中文时，它看起来像：
英语
荷兰语<br> 简体中文

我试图让它看起来像：
English/English
Dutch/Nederlands
Simplified Chinese/简体中文

settings.py 包括：

```
ugettext = lambda s: s  
LANGUAGES = (
    ('en', ugettext('English')),
    ('nl', ugettext('Dutch')),
    ('zh-cn', ugettext('Simplified Chinese')),
) 
```

base.html：

```
 {% load i18n %}
    {% get_available_languages as LANGUAGES %}
    <form action="/i18n/setlang/" method="post">{% csrf_token %}
      <input name="next" type="hidden" value="/" />
        {% csrf_token %}
        <select name="language">
          {% for lang in LANGUAGES %}
            <option value="{{ lang.0 }}">{{ lang.1 }}</option>
          {% endfor %}
        </select>
      <input type="submit" value="Go" />
    </form> 
```

我的想法是在母语 LANGUAGES 中添加另一个项目，例如：

```
LANGUAGES = (
    ('en', ugettext('English'), 'English'),
    ('nl', ugettext('Dutch'), 'Nederlands'),
    ('zh-ch', ugettext('Simplified Chinese'), '简体中文'),) 
```

但 Django 似乎期望 LANGUAGES 有一个 2 项元组。还有其他想法吗？

**根据亚历山大的评论编辑：** 我认为这可能是一个更简单的解决方案，但在更改代码之后：

```
 <form action="/i18n/setlang/" method="post">{% csrf_token %}
        <input name="next" type="hidden" value="/" />
        <select name="language">
            <option value="en">English</option>
            <option value="nl">Dutch\Nederlands</option>
            <option value="ru">Russian\Русский</option>
            <option value="zh-cn">Simplified Chinese-简体中文&lt;/option>
        </select>
        <input type="submit" value="Go" />
    </form> 
```

俄语和中文脚本显示为问号 - 俄语\???????，中文-????

我`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />` 在 html 中，其他俄文和中文文本（在此表单之外）看起来很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T02:20:25.443

试试这个：

```
LANGUAGES = (
    ('en',    '{}/{}'.format(ugettext('English'), 'English')),
    ('nl',    '{}/{}'.format(ugettext('Dutch'), 'Nederlands')),
    ('zh-cn', '{}/{}'.format(ugettext('Simplified Chinese'), '简体中文')),
) 
```

然后你可以在你的模板中使用它：

```
{% for lang in LANGUAGES %}
    <option value="{{ lang.0 }}">{{ lang.1 }}</option>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T21:07:58.610

接受 Alexander 的建议，我能够让上面编辑中的代码正常工作。我在“头部”区域内没有这`<meta http-equiv="content-type" content="text/html;charset=UTF-8" />` 条线，这是必需的，这给了我???? 汉字应该在哪里。

在看到它的实际操作后，我可能有 2 个语言选择器，一个被翻译成当前语言，另一个带有英语/母语字符，如果它不是太忙的话。

我还将语言列表放在一个模块中，并将其传递给类似于获取 LANGUAGES 的模板。

# map - 使用 MapReduce 或其他分布式计算方法进行分析计算？

> ID：11548295
> 
> 赞同：0
> 
> 时间：2012-07-18T18:48:58.503
> 
> 标签：map, mapreduce, distributed-computing, reduce

假设我有三个基本模型：用户、公司和访问。每次用户去公司时，都会以这种格式记录一次访问`(user_id, company_id, visit_date)`。

我希望能够计算公司访问之间的平均时间。不是总体访问量，而是具体而言，他们的一位顾客在返回商店之前平均等待多长时间。

例如，如果一位用户在周二、周三和周五访问，则给出一天的“间隙”和两天的“间隙” => (1, 2)。如果另一个用户在周一和周五访问，则有 4 天的间隔 => (4)。如果第三个用户只访问过一次，则不应考虑他。公司用户访问的平均时间为 (1 + 2 + 4) / 3 = 2.333 天。

如果我有成千上万的用户、水龙头和公司，我想为每家公司计算一个数字，我应该怎么做？我以前只做过基本的 MapReduce 应用程序，我不知道我的 Map 和 Reduce 步骤是什么来完成这项工作。任何人都可以帮我找出伪代码中的 MapReduce 吗？还是有其他一些我可以合理执行的分布式计算方法？作为记录，我想每晚对我的数据库执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:06:44.243

过于简单的方法是有两个工作步骤。

第一个工作步骤有一个映射器，以“company:user”和“visit_date”的形式写入键值。在上面的示例中，映射器将编写如下内容：

```
"user1:companyA" -> "2012/07/16"
"user1:comapnyA" -> "2012/07/17"
"user1:comapnyA" -> "2012/07/19"
"user2:comapnyA" -> "2012/07/15"
"user2:comapnyA" -> "2012/07/19"
... 
```

这意味着对 reducer 的每次调用都会将单个用户的所有访问传递给单个公司。这意味着对 reducer 的一次调用将传入：

```
"user1:companyA" -> {2012/07/16, 2012/07/17, 2012/07/19} 
```

另一个电话将传入：

```
"user2:companyA" -> {2012/07/15, 2012/07/19} 
```

我假设日期集（作为 Iterable 值传入）在您对其进行排序时很容易管理，找出差距并以“公司”和“差距”的形式将每个差距的记录作为键值对写入. 例如，当通过时：

```
"user1:companyA" -> {2012/07/16, 2012/07/17, 2012/07/19} 
```

第一个作业的减速器将写入上下文：

```
"companyA" -> 1
"compnayA" -> 2 
```

第二个工作有一个传递映射器，它只是将公司/差距信息传递给减速器。对 reducer 的每次调用都会为特定公司提供一个可迭代的差距值。遍历数据以产生平均值并以“company”和“average_gap”的形式写入键值对。

如果原始访问集太大，我们可以讨论让 hadoop 使用一些自定义比较器为您进行排序。

# java - 包含多个包的 jar 文件外的公共类

> ID：11548299
> 
> 赞同：1
> 
> 时间：2012-07-18T18:49:08.537
> 
> 标签：java, jar, packages, public

因此，我有一个 Java 项目，其中包含多个包（如`com.myapp.`, `com.myapp.b`, `com.myapp.c`）以提高可读性，并且我想构建一个 jar 以用作另一个项目中的库。

但我只想从这个 jar 中公开一些类和接口。问题是，如果我不将这些类声明为公共，那么它们就无法在包之间的 jar 文件中看到（例如，我在包中有一个`A`在`com.myapp.a`包中使用的类`com.myapp.b`）。

那么，当我在里面定义了多个包时，如何才能在 jar 之外公开我想要的东西呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:57:38.350

目前 Java 并没有直接解决这个问题。

[OSGi](http://www.osgi.org/Main/HomePage)通过显式定义导出的包列表来解决这个问题。[也希望Java 8](http://www.jcp.org/en/jsr/detail?id=337)模块化系统也能解决这个问题。

因此，一种选择是使用[OSGi ，但如果直接使用 jar 文件而不是作为](http://www.osgi.org/Main/HomePage)[OSGi](http://www.osgi.org/Main/HomePage)包使用，则此选项不起作用。

另一种选择是使用代码混淆（如[Proguard](http://proguard.sourceforge.net/)）来混淆您不想公开的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:00:38.837

Eclipse 通过使所有类都可用来“解决”这个问题，但是不打算由客户端使用的类被放置在名称包含“internal”的包中。例如，这可能意味着您有名为“com.myapp.b”和“com.myapp.internal.b”的包。类的用户清楚地知道，内部类不保证向上兼容，甚至不保证在以后的版本中出现。

# c# - Azure 配置设置和 Microsoft.WindowsAzure.CloudConfigurationManager

> ID：11548301
> 
> 赞同：13
> 
> 时间：2012-07-18T18:49:12.423
> 
> 标签：c#, azure, configuration-files

显然， [Microsoft.WindowsAzure.CloudConfigurationManager.GetSettings](http://msdn.microsoft.com/en-us/LIBRARY/microsoft.windowsazure.cloudconfigurationmanager)将从查看 ServiceConfiguration.*.cscfg 开始，然后返回到 web.config 和 app.config。

但是 - web/app .config 中应该采用什么格式？

例如，`Microsoft.WindowsAzure.CloudConfigurationManager.GetSettings("Foo")`从 app.config 中获取 XML 会是什么样子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T18:54:36.893

它只是一个[appSettings 键/值](http://blogs.claritycon.com/blog/2012/06/smarter-settings-in-june-2012-azure-sdk/)。

```
<configuration>
  <appSettings>
    <add key="Foo" value="AzureSetting"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:51:11.707

您需要将设置添加到 ServiceDefinition.csdef 和 ServiceConfiguration.cscfg

例如：ServiceDefinition.csdef

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WindowsAzure1" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
    <WebRole name="WebRole1" vmsize="Small">
        <ConfigurationSettings>
            <Setting name="Foo"/>
        </ConfigurationSettings>
        :
    </WebRole>
</ServiceDefinition> 
```

例如：ServiceConfiguration.cscfg

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceConfiguration serviceName="WindowsAzure1" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="1" osVersion="*" schemaVersion="2012-05.1.7">
  <Role name="WebRole1">
    <Instances count="1" />
    <ConfigurationSettings>
        <Setting name="Foo" value="val"/>
    </ConfigurationSettings>
  </Role>
</ServiceConfiguration> 
```

# python - 检查字典中是否存在键。如果没有，请附加它

> ID：11548302
> 
> 赞同：5
> 
> 时间：2012-07-18T18:49:12.733
> 
> 标签：python, dictionary

我有一个从 json 数据创建的大型 python 字典，并且正在从大的字典中创建一个较小的字典。大字典的某些元素有一个称为“详细信息”的键，而某些元素没有。我想要做的是检查大字典中的每个条目中是否存在该键，如果不存在，则将键“详细信息”附加到新字典的值“没有可用的详细信息”。我在下面放了一些示例代码作为演示。LargeDict 更大，我的代码中有很多键，但为了清楚起见，我保持简单。

```
LargeDict = {'results':
[{'name':'john','age':'23','datestart':'12/07/08','department':'Finance','details':'Good Employee'},
 {'name':'barry','age':'26','datestart':'25/08/10','department':'HR','details':'Also does payroll'},
 {'name':'sarah','age':'32','datestart':'13/05/05','department':'Sales','details':'Due for promotion'},
 {'name':'lisa','age':'21','datestart':'02/05/12','department':'Finance'}]} 
```

这就是我获取 SmallDict 数据的方式：

```
SmallDict = {d['name']:{'department':d['department'],'details':d['details']} for d in LargeDict['results']} 
```

但是，当大型 dict 条目之一没有详细信息时，我收到一个关键错误。我说我需要使用该`DefaultDict`模块是对的还是有更简单的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T18:50:26.453

你不需要一个`collections.defaultdict`. 您可以使用`setdefault`字典对象的方法。

```
d = {}
bar = d.setdefault('foo','bar') #returns 'bar'
print bar # bar
print d  #{'foo': 'bar'} 
```

正如其他人所指出的，如果您不想将键添加到字典中，则可以使用该`get`方法。

这是我经常发现自己在看的旧[参考。](http://docs.python.org/release/2.5.2/lib/typesmapping.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T18:51:16.417

`collections.defaultdict`如果你想在你的`dict`自动创建一个条目，你可以使用。但是，如果您不这样做，并且只想要“不可用”（或其他），那么您可以分配给`dict`as`d[key] = v`并用作`d.get(k, 'Not available')`默认值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:52:19.313

当缺少键时，使用该`get(key, defaultVar)`方法提供默认值：`'details'`

```
SmallDict = {d['name']:{'department':d['department'],'details':d.get('details','No details available')} for d in LargeDict['results']} 
```

# windows - 在 Sublime Text 2 中使用 Ctrl+D 进行多项选择时如何跳过匹配项？

> ID：11548308
> 
> 赞同：209
> 
> 时间：2012-07-18T18:49:31.970
> 
> 标签：windows, sublimetext2

我有一些代码，例如：

```
testVar = { a: 1 };
testVariable1 = 2;
var c = testVar.a + testVariable2;
var d = testVar; 
```

我想重命名“testVar”变量。`Ctrl`当我用+设置多个光标`D`并编辑变量时，“testVariable”也被选中并编辑。

有没有办法在使用`Ctrl`+设置多个光标时跳过一些选择`D`？

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-07-18T20:27:23.433

只需使用`Ctrl`+ `K`，`Ctrl`+ `D`。

（对于 OS X：`Cmd`+ `K`，`Cmd`+ `D`）

需要一点练习，但可以完成工作！

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-07-24T03:03:48.557

您可以同时按`Ctrl`+`K`和`Ctrl`+`D`来跳过选择。如果您的选择太过分了，您可以使用`Ctrl`+`U`返回到之前的选择。

*注意*：替换`Ctrl`为`Cmd`Mac OS X。

可以通过转到应用程序菜单栏中的`Preferences`>查看默认配置`Key Bindings-Default`，您将在其中看到如下内容：

```
{ "keys": ["ctrl+d"], "command": "find_under_expand" },
{ "keys": ["ctrl+k", "ctrl+d"], "command": "find_under_expand_skip" } 
```

如果需要，您可以根据需要配置密钥，方法是转到`Preferences`>`Key Bindings-User`并复制上述代码，然后更改密钥。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2013-04-17T19:30:55.533

如果您将光标悬停在单词上并使用`Ctrl`+`D`选择单词。下次您点击`Ctrl`+`D`时，它应该选择下一个突出显示的单词。

如果您双击选择单词，`Ctrl`+`D`将选择确切的字符串，而不仅仅是突出显示的字符串。

换句话说，**没有突出显示的****`Ctrl`+`D`**会进行全词搜索。如果您已经突出显示了某些内容，`Ctrl`+`D`将进行子字符串搜索。

我已经测试过，它适用于 Sublime Text 2 版本 2.0.1，Build 2217。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-23T12:44:39.230

将光标放在变量**之前**，不要选择变量，点击`Ctrl+D`选择每个出现的变量，而不是模式。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-01-26T00:47:06.893

2020 年在 windows 上更新了 vscode 的答案，在 keybindings.json 添加此行以轻松跳过下一个选定的事件：

```
 {
    "key": "ctrl+alt+d",
    "command": "editor.action.moveSelectionToNextFindMatch",
    "when": "editorFocus"
  }, 
```

*是的，我知道这个问题是针对崇高文本的，但是我通过谷歌搜索相同的问题 + vscode 找到了它，因此它可能对某人有所帮助，因为映射是相同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-08T09:55:08.930

我想我明白了为什么它让我感到困惑：这不是跳过，而是*取消选择*。

您`Ctrl+D`像往常一样点击，如果您错误地选择了一个`Ctrl+K, D`，您首先按`K`，然后按`D`而不松开`Ctrl`。这将取消选择。

# java - 保证多边形法线的向外方向

> ID：11548309
> 
> 赞同：2
> 
> 时间：2012-07-18T18:49:37.460
> 
> 标签：java, vector, geometry

我正在尝试用 Java 编写一个使用分离轴定理进行碰撞检测的 2D 游戏。为了解决两个多边形之间的碰撞，我需要知道碰撞的最小平移向量，并且我需要知道它相对于多边形指向哪个方向（这样我就可以给一个多边形沿着那个方向的惩罚力和其他方向相反的惩罚力）。作为参考，我正在尝试在[这里](http://www.codezealot.org/archives/55#sat-mtv)实现算法。

我想保证，如果我调用我的碰撞检测函数`collide(Polygon polygon1, Polygon polygon2)`并且它检测到碰撞，返回的 MTV 将始终指向*远离**多边形*1的多边形 2。为了做到这一点，我需要保证我生成的分离轴，即多边形边缘的法线，总是指向远离生成它们的多边形。（这样，我知道在将它用作 MTV 之前，要否定来自 polygon2 的任何轴）。

 *不幸的是，似乎我为多边形边缘生成的法线是指向多边形内部还是外部，取决于多边形的点是按顺时针还是逆时针顺序声明的。我正在使用[此处](http://www.codezealot.org/archives/55#sat-axes)描述的算法生成法线，并假设我选择`(x, y) => (y, -x)`“垂直”方法，如果我以顺时针顺序遍历顶点，则生成的法线只会指向远离多边形。

鉴于我不能强制客户端以顺时针顺序声明多边形的点（我正在使用 java.awt.Polygon，它只为 x 和 y 坐标公开两个数组），是否有一种数学方法可以保证我生成的法线向量的方向是朝向多边形的外部吗？我不太擅长矢量数学，所以我可能缺少一个明显的解决方案。大多数关于 SAT 的 Internet 资源只是假设您始终可以按顺时针顺序遍历多边形的顶点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:40:59.090

[例如，您可以使用此](https://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-points-are-in-clockwise-order)问题的答案来计算每个多边形的排序方向，然后如果两个多边形具有不同的顺序，则将您的法线乘以 -1。

您还可以再次使用上述算法检查传递给算法的每个多边形以查看其排序是否错误，并在必要时反转顶点顺序。

请注意，在计算顶点顺序时，某些算法适用于所有多边形，而有些算法仅适用于凸多边形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:08:27.667

我终于想通了，但发布的一个答案不是完整的解决方案，所以我不会接受它。[我能够使用此 SO 答案](https://stackoverflow.com/a/1165943/1500563)中描述的基本算法来确定多边形的顺序（在 David Norman 的链接中也描述得不太清楚），即：

```
for each edge in polygon:
    sum += (x2 - x1) * (y2 + y1) 
```

但是，有一个重要的警告，这些答案都没有提到。通常，如果总和为正，您可以决定多边形的顶点是顺时针方向的，如果总和是负的，则决定多边形的顶点是逆时针方向的。但是在 Java 的 2D 图形系统中，***这种比较是倒置***的，实际上在许多图形系统中，因为*正 y 轴指向下方*。所以在一个正常的数学坐标系中，你可以说

```
if sum > 0 then polygon is clockwise 
```

*但*在带有倒置 y 轴的图形坐标系中，它实际上是

```
if sum < 0 then polygon is clockwise 
```

我使用 Java 的 Polygon 的实际代码看起来像这样：

```
//First, find the normals as if the polygon was clockwise

int sum = 0;
for(int i = 0; i < polygon.npoints; i++) {
    int nextI = (i + 1 == polygon.npoints ? 0 : i + 1);
    sum += (polygon.xpoints[nextI] - polygon.xpoints[i]) * 
        (polygon.ypoints[nextI] + polygon.ypoints[i]);
}

if(sum > 0) {
    //reverse all the normals (multiply them by -1)
} 
```*

# redirect - History.go 和浏览器缓存

> ID：11548310
> 
> 赞同：1
> 
> 时间：2012-07-18T18:49:40.033
> 
> 标签：redirect, browser-cache

我可能有一个非常简单的问题，但我无法在任何地方找到答案。

当我通过 history.go 使用 javascript 重定向时，如何确保浏览器不使用它的浏览器缓存但实际上重新加载了该页面？

或者换一种说法：是否可以将以前访问过的页面存储为字符串，然后通过 window.location 将用户重定向到该页面？或者这不是我的问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:55:24.340

完全取决于浏览器的实现。这与使用浏览器的后退或前进按钮相同。最有可能使用缓存。这是一个很好的链接。我希望你在那里找到你的答案。

[返回 html 缓存历史记录](https://stackoverflow.com/questions/2695875/html-cache-history-back)

# javascript - 带有多个选择框的 Jquery 表单验证

> ID：11548312
> 
> 赞同：0
> 
> 时间：2012-07-18T18:49:48.827
> 
> 标签：javascript, jquery, forms, validation

我在使用此插件在多个选择框上显示表单验证时遇到了一些问题：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

验证似乎只对第一个选择框起作用。如果第一个选择框未选中，它将呈现验证错误，但是，如果以下选择为空，则提交表单而不进行验证。

我使用过这个插件，它可以完美地处理多个文本输入，但这是我第一次尝试多个选择框。

```
<form action="someactionhere" method="POST" class="form" id="errors">
                        <label>First Select</label><br>
                        <select id="first" class="required">
                                <option selected="" value="">Select</option>
                                <option value="first">first</option>
                                <option value="second">second</option>
                                <option value="third">third</option>
                        </select><br><br>
                        <label>Second Select</label><br>
                        <select id="second" class="required">
                                <option selected="" value="">Select</option>
                                <option value="first">first</option>
                                <option value="second">second</option>
                                <option value="third">third</option>
                        </select>
                        <button type="submit" class="button">SUBMIT</button>
</form>
<script src="/js/jquery-1.7.1.js" type="text/javascript"></script>
<script src="/js/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#errors").validate();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:11:23.420

jquery.validation 使用 name 属性绑定。为您的选择命名。

# ios - 如何在 UiScrollview 中获取子视图的内容

> ID：11548314
> 
> 赞同：1
> 
> 时间：2012-07-18T18:49:48.680
> 
> 标签：ios, uiview, uiscrollview

我在选项卡中有一个 UIScrollview，我在 UIScrollview 中添加了一些 UIView (NIB)。每个 UIView 都有一些 UISwictch、标签、按钮等。我怎样才能将视图内的 label.text 添加到 UIScrollview。

我尝试了很多东西，但我可以访问添加到 UIScrollview 的 UIView 的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T18:55:31.770

检查这个，

```
for (UIView *addedView in [self.scrollView subviews])
{
        for (UIView *sub in [addedView subviews])
        {
            if([sub isKindOfClass:[UILabel class]])
            {
                UILabel *myLabel = (UILabel *)sub;
                NSLog(@"My label :%@",myLabel .text);
            }
        }
} 
```

这`scrollView` 是您的滚动视图。它将打印所有标签的文本。

如果您需要打印任何特定标签的文本。然后为其添加标签并在打印之前检查标签，例如`if(myLabel.tag == 7)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T18:59:43.223

`tag`为您的标签设置一个唯一的。

eg：（`label.tag = 10345`一些随机数，这是一个唯一的标签）

`parentView`你可以像这样搜索标签

```
UILabel *theLabel = (UILabel *)[parentView viewWithTag: 10345]; 
```

然后你可以用标签做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T12:56:33.123

第 1 步：在您的滚动视图中添加此代码

```
UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTap:)];
singleTapGestureRecognizer.numberOfTapsRequired = 1;
singleTapGestureRecognizer.enabled = YES;
singleTapGestureRecognizer.cancelsTouchesInView = NO;
[scrollView addGestureRecognizer:singleTapGestureRecognizer]; 
```

第 2 步：实现此方法

```
-(void)singleTap:(UITapGestureRecognizer *)gesture
 {
    // Convert gesture into view for getting subviews
    CGPoint point = [gesture locationInView:mainScrollView];
    UIView *tappedView = [mainScrollView hitTest:point withEvent:nil];

    // Get the subviews of the view
    NSArray *subviews = [view tappedView];

    // Return if there are no subviews
    if ([subviews count] == 0) return;

    for (UIView *subview in subviews) {

        NSLog(@"%@", subview);

        // List the subviews of subview
        [self your_method:subview];
    }
} 
```

# wcf-ria-services - 如何在 Silverlight RIA 中不使用带有 IsInRole 的魔术字符串？

> ID：11548327
> 
> 赞同：0
> 
> 时间：2012-07-18T18:50:23.730
> 
> 标签：wcf-ria-services, windows-authentication, silverlight-5.0, isinrole

我在我的 Silverlight RIA 中扩展了`UserBase`课程`System.ServiceModel.DomainServices.Server.ApplicationServices`，是的，人们仍在使用 Silverlight，我想知道最佳实践是什么，`IsInRole(@"domain\groupName")`以及如何摆脱使用硬编码的组名？

我正在使用 Windows 身份验证和身份验证 DomainService。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:33:13.427

您可以将所有域\组字符串放在一个静态类中 - 然后至少您的硬编码字符串都在一个地方。

如果您希望使用 RequiresRole 属性，则字符串需要是 const 而不是 static，否则 VS 会在构建过程中报错。

硬编码的组名还不错 - 问题是硬编码的域名恕我直言 - 因为您可以定义您的应用程序专有的组并将设置的责任推给网络管理员（这是多少 Windows 服务器应用程序的行为）

或者，您可以使用标准 ASP.NET 角色并在域组和 ASP.NET 角色之间进行一些自定义映射（有点像 SQL Server 必须这样做）

# c# - 让 C# 垃圾收集列表而不是重用它是不好的形式吗？

> ID：11548331
> 
> 赞同：3
> 
> 时间：2012-07-18T18:50:37.117
> 
> 标签：c#, list, garbage-collection

我有一个稳步增长的元素列表，直到我将该列表中的所有数据转储到一个文件中。然后，我想再次出于相同目的重用该列表。将其简单地分配给新列表而不是从列表中删除所有元素是不好的做法吗？似乎垃圾收集应该处理旧列表，这样我就不必担心删除元素。

例如：

```
var myList = new List<element>();
myList.Add(someElement);
myList.Add(anotherElement);
// dumps the elements into a file

myList = new List<element>(); 
```

编辑：即使有解决这个问题的简单方法，我也想知道它的哲学方面。如果有办法绕过它，让垃圾收集起来是不是很糟糕？允许垃圾收集与删除元素并重用相同内存的成本是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:54:22.783

`myList.Clear()`比编码更容易`myList = new List<element>();`

[msdn: List.Clear 方法](http://msdn.microsoft.com/en-us/library/dwb5h52a%28v=vs.80%29.aspx)

列表中的每个元素本身都是一个不同的对象，无论您清除列表、重新创建新列表还是一次删除一个项目，都需要进行垃圾收集。如果您只是清除列表并重用它，则不需要进行垃圾收集的是列表本身。除非您的列表很大，包含数十万个项目，否则很难以一种或另一种方式衡量性能差异。幸运的是，垃圾收集器经过高度优化，开发人员需要考虑它在做什么的情况很少见。

（正如其他人指出的那样，涉及各种因素，例如......您将向新列表中添加多少元素？与旧列表中有多少元素？......但重点是：垃圾在收集列表元素时，列表本身的集合并不相关。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T18:58:17.577

这取决于列表中有多少元素。如果支持列表的数组足够大以位于大型对象堆上，那么最好清除列表并重新使用它。这将减少大内存分配的数量，并有助于减少大对象堆碎片的问题。（参见[http://msdn.microsoft.com/en-us/magazine/cc534993.aspx](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)和[http://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large -object-heap/](http://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/)了解更多信息；请参阅[http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx) .NET 4.5 带来的改进）

如果列表很小，最好只创建一个新列表，或者调用`Clear()`. 如有疑问，请测量性能。

编辑：针对您在编辑中提出的哲学问题，创建新列表的原因有两个：

1.  一般来说，如果你不重用对象，代码会更干净，更容易推理。垃圾回收的成本低，混淆代码的成本高。
2.  考虑一下如果转储列表内容的代码在另一个函数中会发生什么，因为它很可能是。一旦您将该列表从其本地上下文中传递出去，就可能存在对同一列表的非本地引用。其他代码可能正在修改列表，或者可能（错误地）假设您没有修改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:16:12.533

听起来你在问两个不同的问题。一个是是否可以将其设置为新对象或只是清除它，我认为 Eric 回答得很好。第二个是你是否应该忽略 GC 并让它工作而不试图“帮助”它 - 对此，我会说绝对是的。让框架做框架做的事，直到你不得不这样做。

很多程序员都想深入挖掘，而且大多数时候它导致的问题多于帮助。GC 旨在收集这些东西并为您清理它们。除非您看到一个非常具体的问题，否则您应该编写有效的代码并在收集某些内容时忽略（除了在适当时[使用](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)关键字）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:55:45.983

我不是专家，但是：
创建一个*新*列表，期望 GC 会“照顾”旧列表可能是一个*坏*主意，因为这是一种不好的做法并且可能效率低下。
虽然这是一个微优化，但我会说“设置”新值直到达到`list.Count`，并且继续`list.Add`是最好的方法，因为这样你就不会清除或分配不必要的新内存（除非它是你的大列表**想要**清除空间）
无论如何，我建议使用`List.Clear()`- 它可以节省您和 GC 的麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T19:04:16.703

我宁愿使用`List.Clear()`删除所有元素以供重复使用。容量保持不变，因此不应该有额外的开销成本，并让 GC 处理内存垃圾收集，这样您就可以保持干净的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T19:00:05.393

重要的观点是干净的代码。当您创建一个新列表时，旧列表将被 GC 删除（如果没有其他对它的引用。）

# openssl - OpenSSL 验证返回码：20（无法获取本地颁发者证书）

> ID：11548336
> 
> 赞同：86
> 
> 时间：2012-07-18T18:50:56.320
> 
> 标签：openssl

我正在运行 Windows Vista 并尝试通过 https 连接以以多部分形式上传文件，但我在使用本地颁发者证书时遇到了一些问题。我只是想弄清楚为什么现在这不起作用，然后在解决后回到我的 cURL 代码。我运行命令：

```
openssl s_client -connect connect_to_site.com:443 
```

它给了我来自 VeriSign, Inc. 的数字证书，但也抛出了一个错误：

```
Verify return code: 20 (unable to get local issuer certificate) 
```

什么是本地颁发者证书？那是我自己电脑上的证书吗？有没有解决的办法？我尝试使用 -CAfile mozilla.pem 文件，但仍然给我同样的错误。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-03T17:22:30.140

我遇到了同样的问题，并通过将路径传递到存储 CA 密钥的目录来解决它。在 Ubuntu 上是：

```
openssl s_client -CApath /etc/ssl/certs/ -connect address.com:443 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-16T17:07:13.473

如果您使用的自签名证书`keyUsage`缺少 value ，也会发生此错误`keyCertSign`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-04-19T10:16:07.660

**解决方案：** 您必须显式添加参数`-CAfile your-ca-file.pem`。

注意：我也尝试`-CApath`了另一个答案中提到的参数，但对我不起作用。

**说明：** 错误`unable to get local issuer certificate`意味着`openssl`不知道您的根 CA 证书。

* * *

注意：如果您有**更多域的 Web 服务器**，请不要忘记添加`-servername your.domain.net`参数。此参数将“在 ClientHello 中设置 TLS 扩展服务器名”。如果没有此参数，响应将始终包含默认 SSL 证书（不是证书，与您的域匹配）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-07T04:22:00.450

我在 Macports 的 OSX OpenSSL 1.0.1i 上遇到了同样的问题，并且还必须指定 CApath 作为解决方法（正如 Ubuntu 错误报告中所述，即使是*无效*的CApath 也会使 openssl 在默认目录中查找）。有趣的是，使用 PHP 的 openssl 函数（在 PHPMailer 5 中使用）连接到同一台服务器工作得很好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-03T17:04:46.897

您的服务器是否配置了客户端身份验证？如果是这样，您需要在与服务器连接时传递客户端证书。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-04T08:01:09.953

将您的 CA 和根证书放入 /usr/share/ca-certificate 或 /usr/local/share/ca-certificate。然后

dpkg-重新配置 ca 证书

甚至使用 apt-get 重新安装 ca-certificate 包。

完成此操作后，您的证书将被收集到系统的数据库中：/etc/ssl/certs/ca-certificates.crt

那么一切都应该没问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-24T12:26:18.453

使用中间和根 ca 创建证书链文件。

```
cat intermediate/certs/intermediate.cert.pem certs/ca.cert.pem > intermediate/certs/ca-chain.cert.pem

chmod 444 intermediate/certs/ca-chain.cert.pem 
```

然后验证

```
openssl verify -CAfile intermediate/certs/ca-chain.cert.pem \
  intermediate/certs/www.example.com.cert.pem 
```

www.example.com.cert.pem: OK 部署证书

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-07-31T01:28:17.337

使用客户端身份验证：

```
openssl s_client -cert ./client-cert.pem -key ./client-key.key -CApath /etc/ssl/certs/ -connect foo.example.com:443 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-19T06:56:46.313

我遇到了同样的问题，在证书中保留颁发者主题值后得到修复，因为它是颁发者证​​书的主题。

所以请检查“证书中的颁发者主题值（cert.pem）==颁发者主题（CA.pem）”

> openssl 验证 -CAfile CA.pem cert.pem
> cert.pem: OK

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-18T15:48:57.823

当我的 NGINX 服务器在其配置的证书文件中没有完整的证书链时，我遇到了这个问题。

我的解决方案是找到一个类似的服务器并从该服务器中提取证书，例如：

```
openssl s_client -showcerts -CAfile my_local_issuer_CA.cer -connect my.example.com:443 > output.txt 
```

然后，我将来自该“output.txt”文件（机器证书除外）的 ASCII 装甲证书添加到我的机器证书文件的副本中，并将 NGINX 指向该复制的文件，错误就消失了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-16T14:24:14.673

我将通过执行以下操作更新@user1462586 答案：

我认为它更适合使用`update-ca-certificates`命令，包含在`ca-certificates`包中而不是`dpkg-reconfigure`.

所以基本上，我会改变它的有用答案：

1.  检索证书（从此[stackoverflow答案](https://stackoverflow.com/a/52553687/1740398)并将其写入正确的目录：

```
# let's say we call it my-own-cert.crt
openssl s_client -CApath /etc/ssl/certs/ -connect <hostname.domain.tld>:<port> 2>/dev/null </dev/null | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > /usr/share/ca-certificates/my-own-cert.crt 
```

如果您需要其他证书，请重复此操作。

例如，如果您需要带有 Active Directory 的 ldaps/starttls 的 CA 证书，请参阅[此处](https://wiki.processmaker.com/3.1/Export_the_Active_Directory_Certificate)了解如何处理这个 + 使用 openssl 将其转换为 pem/crt：

```
openssl x509 -inform der -in LdapSecure.cer -out my-own-ca.pem
#and copy it in the right directory...
cp my-own-ca.pem /usr/share/ca-certificates/my-own-ca.crt 
```

2.  将此证书添加到`/etc/ca-certificates.conf`配置文件中：

```
echo "my-own-cert.crt" >> /etc/ca-certificates.conf
echo "my-own-ca.crt" >> /etc/ca-certificates.conf 
```

3.  更新`/etc/ssl/certs`目录：

```
update-ca-certificate 
```

4.  享受

请注意，如果您使用私有域名机器，而不是合法的公共域名，您可能需要编辑您的`/etc/hosts`文件才能拥有相应的`FQDN`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-24T20:53:49.807

此错误消息意味着 CABundle 不是由 (-CAfile ...) 给出的，或者 CABundle 文件不是由自签名的根证书关闭的。

不用担心。即使您从 openssl s_client 收到 theis 消息，与服务器的连接也将起作用...（假设您也没有犯其他错误）

# ruby - 如何使用 OpenPGP 和 Ruby 对数据进行非对称加密？

> ID：11548337
> 
> 赞同：3
> 
> 时间：2012-07-18T18:51:04.153
> 
> 标签：ruby, encryption, gnupg, encryption-asymmetric, openpgp

这感觉应该很简单，但我没有任何运气。

场景是这样的：我有一个公共 *.asc 密钥文件。我想使用*这个文件*（不是我的个人密钥环）来加密服务器上的数据，以便我可以使用密钥在本地对其进行解密。

从命令行我可以使用`gpg`. 我查看了 GPGME 和 OpenPGP gems，但无法弄清楚如何使用它们。文档（尤其是 OpenPGP）非常稀少。

例如，这是我尝试使用 GPGME 的东西，但没有任何运气：

```
key = GPGME::Data.new(File.open(path_to_file))
data = GPGME::Data.new("I want to encrypt this string.")

# Raises GPGME::Error::InvalidValue
GPGME::Ctx.new do |ctx|
  e = ctx.encrypt(key, data)
end 
```

有没有人经历过这个？这肯定不会那么复杂吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:02:38.703

我*相信*我现在已经弄清楚了。这实际上只是我缺少的一些简单的部分：

1.  用of初始化`GPGME::Ctx`对象。`keylist_mode``GPGME::KEYLIST_MODE_EXTERN`
2.  使用 . 导入公钥文件`GPGME::Ctx#import`。
3.  用于`GPGME::Crypto#encrypt`执行加密并指定正确的收件人。

所以我的解决方案现在看起来像这样：

```
key = GPGME::Data.new(File.open(path_to_file))
data = GPGME::Data.new("I want to encrypt this string.")

GPGME::Ctx.new(GPGME::KEYLIST_MODE_EXTERN) do |ctx|
  ctx.import(key)
  crypto = GPGME::Crypto.new(:armor => true, :always_trust => true)
  e = crypto.encrypt(data, :recipients => "recipient@domain.com")
end 
```

# css - 添加新行以使链接垂直对齐

> ID：11548340
> 
> 赞同：0
> 
> 时间：2012-07-18T18:51:16.097
> 
> 标签：css, asp.net-mvc, asp.net-mvc-2

ASP.NET MVC 2 项目。

我希望视图的链接垂直对齐。我应该添加 br 还是 \n 什么？

谢谢。

```
 <div class="links">
                    <%=Html.ActionLink("Home", "Index", "Home") %>
                    <%=Html.ActionLink("About", "About", "Home") %>
               </div> 
```

例如。

```
 <div class="links">
                    <br />
                    <br />
                    <%=Html.ActionLink("Home", "Index", "Home") %>
                    <br />
                    <br />
                    <%=Html.ActionLink("About", "About", "Home") %>
               </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:01:06.360

使用你现在拥有的东西，你可以应用一些 CSS：

```
div.links a {
    display: block;
} 
```

这会将每个链接放在自己的行上。

# perl - 如何有效地将行转换为 Vim 中的列？

> ID：11548342
> 
> 赞同：4
> 
> 时间：2012-07-18T18:51:32.553
> 
> 标签：perl, vim

我有一个如下的数据文件：

```
----------------------------
a b c d e .............
A B C D E .............
---------------------------- 
```

但我希望它采用以下格式：

```
----------------------------
a A
b B
c C
d D
e E
...
...
---------------------------- 
```

在 Vim 或 Perl 中进行转换的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T20:00:20.453

Basically `:.s/ /``Space``Ctrl+v``Enter``/g``Enter``jma:.s/ /``Ctrl+v``Enter``/g``Enter``Ctrl+v``'axgg$p'adG` will do the trick. :)

OK, let's break that down:

1.  `:.s/ /``Ctrl+v``Enter``/g``Enter`: On the current line (`.`), substitute (`s`) spaces (`/ /`) with a space followed by a carriage return (`Space``Ctrl+v``Enter``/`), in all positions (`g`). The cursor should now be on the last letter's line (`e` in the example).
2.  `j`: Go one line down (to `A B C D E`).
3.  `ma`: Set mark `a` to the current position... because we want to refer to this position later.
4.  `:.s/ /``Ctrl+v``Enter``/g``Enter`: Do the same substitution as above, but without the `Space`. The cursor should now be on the last letter's line (`E` in the example).
5.  `Ctrl+v``'a`: Select from the current cursor position (`E`) to mark `a` (that we set in step 3 above), using the block select.
6.  `x`: Cut the selection (into the `"` register).
7.  `gg`: Move the cursor to the first line.
8.  `$`: Move the cursor to the end of the line.
9.  `p`: Paste the previously cut text after the cursor position.
10.  `'a`: Move the cursor to the `a` mark (set in step 3).
11.  `dG`: Delete everything (the empty lines left at the bottom) from the cursor position to the end of the file.

P.S. I was hoping to learn about a "built-in" solution, but until such time...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T13:41:54.907

假设光标位于两行的第一行，我会使用命令

```
:s/ /\r/g|+&&|'[-;1,g/^/''+m.|-j 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T19:12:23.393

列的简单重新映射：

```
use strict;
use warnings;

my @a = map [ split ], <>;  # split each line on whitespace and store in array
for (0 .. $#{$a[0]}) {      # for each such array element
    printf "%s %s\n", $a[0]->[$_], $a[1]->[$_];   # print elements in order
} 
```

**用法：**

```
perl script.pl input.txt 
```

# ios - 如何更好地优化 iOS 上的网络？

> ID：11548345
> 
> 赞同：15
> 
> 时间：2012-07-18T18:51:45.843
> 
> 标签：ios, networking, nsoperationqueue

我在 GitHub 上创建了一个项目，因此我可以学习如何优化我的 iOS 应用程序的网络。我大量使用了块和 GCD，在观看了 WWDC 2012 视频和过去几年的视频后，我了解到我可以使用 NSOperationQueue 做更多事情。具体来说，我可以控制并发操作（网络连接）的数量以及提供操作的取消。我正在尝试允许 1、2、4、8 和 16 个并发操作，我看到了我完全没有预料到的有趣结果。我正在测量结果，但我想知道我是否应该测量更多。

您可以在此处找到示例项目：

[https://github.com/brennanMKE/OptimizedNetworking](https://github.com/brennanMKE/OptimizedNetworking)

由于我使用的是 NSURLConnection 的异步 API，因此拥有多个并发连接有很多好处，因为 API 会花费大量时间等待 HTTP 数据包。以前我的代码会从一系列项目开始下载并按顺序请求它们，这阻碍了并发的好处。我也一直在使用通知来取消网络连接。现在我可以通过操作对这个项目执行此操作，并且我已将它们设置为使用优先级和类别的值，以便我可以对下载进行优先排序和排序并取消操作类别。我可以选择为每个视图使用一个类别，当用户离开一个视图时，该视图的所有操作都将使用该类别取消。这将为活动视图释放资源。

使用更多并发操作的一个问题是 CPU 使用率以及 I/O，但我不知道使用 iOS 测量这些值的方法。iOS 中用于显示 CPU 使用情况的“w”命令的等效项可能很有用。我不太关心 I/O，但测量它会更全面。

我在网络上的主要问题是响应式 UI。我发现我一直在做的事情使 UI 变得迟缓。这种新方法可能会有很大帮助，但前提是我要减少并发操作的数量。最佳操作数可能因连接类型（3G、WiFi 等）而异，因此检查连接类型可能会导致一些优化。

如果您对在您的应用程序中加速网络通信的更好方法感兴趣，请尝试这个示例项目并建议我可以测量性能的其他方法，并提供进一步优化通信的方法。（另请注意，我引用了 Apple 示例项目 MVCNetworking 以及 ASIHTTPRequest 项目。

接下来我可以做的是汇总下载的数据量，并记录该量以及完成下载的总时间。

自述文件应该有助于解释项目及其工作原理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:10:10.380

[如果这有助于 Mugunth Kumar 在设置 MKNetworkKit 中的NSOperationQueue](https://github.com/MugunthKumar/MKNetworkKit)最大连接大小之前使用可达性类实际检查连接类型

# c# - 如果这是写入或扫描的，如何区分相同的字符串（条形码）

> ID：11548352
> 
> 赞同：1
> 
> 时间：2012-07-18T18:52:35.773
> 
> 标签：c#, windows-mobile, barcode

我在 C# 上编程，对于手持设备，接下来的问题是当客户访问用户寻找它时，他键入客户的号码。但现在它将被扫描，例如客户 123 通常我会去写 123 来寻找这个客户，现在我按“销售”开始销售。（它有一个按钮，因为客户有加号选项例如提问的问题）

现在将扫描相同的号码，并且在那一刻，它必须自动打开销售。

读取条形码时是否有事件？或者如果这是被扫描或键入我的真正问题如何知道字符串是否被扫描，我该如何区分？

> windows移动框架3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:41:47.780

您必须查看扫描仪附带的 DLL。我的公司刚刚在 Mobile Framework 3.5 中使用条形码扫描仪做了一个类似的项目。我们有自己的专有 DLL，它公开一个 OnSuccessfulScanHandler 事件并将其绑定到 SuccessScan 甚至来自 Scanner 对象。

我想这些事件也将成为任何其他软件包的一部分。

在 SuccessScan 事件中，您可以让它自动填充文本框并继续自动处理数据，还可以为任何对象设置一个布尔值，以确定它是被扫描的还是手动输入的。

# solr - 搜索存储在 Hadoop 中的文档 - 使用哪个工具？

> ID：11548357
> 
> 赞同：5
> 
> 时间：2012-07-18T18:53:09.460
> 
> 标签：solr, hadoop, lucene, cloudera, carrot2

我迷失在：Hadoop、Hbase、Lucene、Carrot2、Cloudera、Tika、ZooKeeper、Solr、Katta、Cascading、POI ......

当您阅读有关该工具的信息时，您通常可以确定将提及其他工具中的每一个。

我不希望你向我解释每一个工具——当然不会。如果您可以帮助我针对我的特定场景缩小此设置范围，那就太好了。到目前为止，我不确定以上哪一个适合，而且看起来（一如既往）有不止一种方法可以做要做的事情。

场景是：500GB - ~20 TB 的文档存储在 Hadoop 中。多种格式的文本文档：email、doc、pdf、odt。有关存储在 SQL db 中的文档的元数据（发件人、收件人、日期、部门等）。文档的主要来源将是 ExchangeServer（电子邮件和附件），但不仅如此。现在开始搜索：用户需要能够对这些文档进行复杂的全文搜索。基本上，他会看到一些搜索配置面板（java 桌面应用程序，而不是 web 应用程序） - 他将设置日期范围、文档类型、发件人/收件人、关键字等 - 触发搜索并获取文档的结果列表（以及每个文档信息为什么包含在搜索结果中，即在文档中找到了哪些关键字）。

我应该考虑哪些工具，哪些不应该考虑？关键是用最少的“胶水”代码开发这样的解决方案。我精通 SQLdbs，但对 Apache 和相关技术很不适应。

基本工作流程如下所示：ExchangeServer/其他来源 -> 从 doc/pdf/... 转换 -> 重复数据删除 -> Hadoop + SQL（元数据） -> 构建/更新索引 <- 搜索文档（并快速完成) -> 显示搜索结果

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:35:09.797

使用 solr 是一个不错的选择。我已经将它用于您上面描述的类似场景。您可以将 solr 用作其分布式索引服务器来处理真正的海量数据。

但是要获取有关所有这些文档格式的元数据，您应该使用其他工具。基本上你的工作流程就是这样。

1）使用hadoop集群存储数据。

2）使用map/redcue提取hadoop集群中的数据

3）做文件识别（识别文件类型）

4) 从这些文档中提取元数据。

5）在solr服务器中索引元数据，将其他摄取信息存储在数据库中

6）Solr 服务器是分布式索引服务器，因此每次摄取都可以创建一个新的分片或索引。

7) 当需要搜索时，搜索所有索引。

8) Solr 支持所有复杂的搜索，因此您不必制作自己的搜索引擎。

9）它也为你做分页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T21:48:02.140

通过使用 Solr 作为 HBase 的“辅助索引器”，我们已经为我们的一些客户完成了这一点。HBase 的更新被发送到 Solr，您可以对其进行查询。通常人们从 HBase 开始，然后进行嫁接搜索。听起来您从一开始就知道搜索就是您想要的，因此您可能可以从提供 HBase 的管道中嵌入二级索引。

尽管您可能会发现仅使用 Solr 就可以满足您的所有需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T23:48:06.373

另一个值得关注的项目是 Lily，[http://www.lilyproject.org/lily/index.html](http://www.lilyproject.org/lily/index.html)，它已经完成了将 Solr 与分布式数据库集成的工作。

另外，我不明白为什么您不想为此应用程序使用浏览器。您正在准确描述分面搜索是什么。虽然您当然可以设置一个与服务器通信（解析 JSON）并在胖客户端 GUI 中显示结果的桌面应用程序，但所有这些工作都已经在浏览器中为您完成了。而且，Solr 附带了一个开箱即用的免费多面搜索系统：只需按照教程进行操作即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T22:44:06.523

使用 Solr ( [http://lucene.apache.org/solr](http://lucene.apache.org/solr) ) 是一个很好的解决方案，但要准备好处理一些不明显的事情。首先是正确规划索引。多 TB 的数据几乎肯定需要 Solr 上的多个分片才能获得任何级别的合理性能，而您将负责自己管理这些分片。它确实提供了分布式搜索（对多个分片进行查询），但这只是成功的一半。

ElasticSearch ( [http://www.elasticsearch.org/](http://www.elasticsearch.org) ) 是另一种流行的替代方案，但我在规模方面没有太多经验。它使用相同的 Lucene 引擎，所以我希望搜索功能集是相似的。

另一种类型的解决方案类似于 SenseiDB——从 LinkedIn 开源——它提供了全文搜索功能（也是基于 Lucene 的）以及经过验证的大量数据规模：

[http://senseidb.com](http://lucene.apache.org/solr)

他们确实在那边做了大量的搜索工作，我随意使用它是很有希望的。

假设您的所有数据都已经在 Hadoop 中，您可以编写一些自定义 MR 作业，以一致的模式友好格式将数据拉入 SenseiDB。SenseiDB 已经提供了一个 Hadoop MR 索引器，您可以查看它。

唯一需要注意的是，它的设置有点复杂，但会为您节省很多倍的缩放问题——尤其是在索引性能和分面功能方面。如果 HA 对您很重要，它还提供集群支持 - 它[仍处于 Alpha 阶段](http://wiki.apache.org/solr/SolrCloud/)（Solr 4.x 是 alpha atm）。

希望有帮助，祝你好运！

更新：

我问了一个比我更精通 ElasticSearch 的朋友，它确实具有基于你拥有的机器和分片的数量进行集群和重新平衡的优势。这绝对是对 Solr 的胜利——尤其是在您处理 TB 的数据时。唯一的缺点是 ElasticSearch 的当前文档状态还有很多不足之处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T00:05:06.810

作为旁注，您不能说文档存储在 Hadoop 中，它们存储在分布式文件系统中（很可能是 HDFS，因为您提到了 Hadoop）。

关于搜索/索引：Lucene 是用于您的场景的工具。您可以将它用于索引和搜索。这是一个java库。还有一个相关的项目（称为 Solr），它允许您通过 WebServices 访问索引/搜索系统。因此，您还应该看看 Solr，因为它允许处理不同类型的文档（Lucene 将解释文档（PDF、Word 等）的责任放在了您的肩上，但您可能已经可以这样做了）

# arrays - Bash：遍历数组名称

> ID：11548358
> 
> 赞同：1
> 
> 时间：2012-07-18T18:53:09.953
> 
> 标签：arrays, bash, loops, iteration

我正在尝试编写代码来将一个大数组分解成许多不同的小数组。最终我将通过的数组是一个未知大小的数组，这只是我的测试对象。我已经做到了这一点：

```
#!/bin/bash
num=(10 3 12 3 4 4)
inArray=${#num[@]}
numArrays=$(($inArray/2))
remain=$(($inArray%2))
echo $numArrays
echo $remain
nun=0
if test $remain -gt  $nun; then
        numArrays=$(($numArrays+1))
fi
array=(1 2)
j=0
for ((i=0;i<$numArrays;i++, j=j+2)); do
        array=("${num[@]:$j:2}")
        echo "The array says: ${array[@]}"
        echo "The size? ${#array[@]}"
done 
```

我真正遇到的问题是：我想让变量“数组”每次都能稍微更改名称，因此每个数组都被保留并在循环后具有唯一的名称。我试过命名`array_$i`，但返回：

```
[Stephanie@~]$ ./tmp.sh 
3
0
./tmp.sh: line 16: syntax error near unexpected token `"${num[@]:$j:2}"'
./tmp.sh: line 16: `    array_$i=("${num[@]:$j:2}")'
[Stephanie@RDT00069 ~]$ ./tmp.sh 
3
0
./tmp.sh: line 16: syntax error near unexpected token `$i'
./tmp.sh: line 16: `    array($i)=("${num[@]:$j:2}")' 
```

有人有建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:04:50.447

使用简单变量，您可以使用`declare`关键字进行间接赋值：

```
v=foo
declare $v=5
echo $foo    # Prints 5 
```

这并没有扩展到明显的（对我来说，无论如何）意义上的数组：

```
i=2
# This produces a syntax error
declare -a array_$i=("${num[@]:$j:2}") 
```

相反，您可以声明一个空数组

```
declare -a array_$i 
```

或一次分配一个项目：

```
declare -a array_$i[0]=item1 array_$i[1]=item2 
```

这是一个使用 for 循环将大数组的第 3 个和第 4 个字母复制到较小数组的示例。我们 `i`用作较小数组名称的动态部分，并 `j`用作该数组的索引。

```
letters=(a b c d e f)
i=1
j=0
for letter in "${letters[@]:2:2}"; do
    # E.g., i=0 and j=1 would result in
    #   declare -a array_0[1]=c
    declare -a array_$i[$j]=$letter
    let j+=1
  done
done

echo ${array_1[@]};  # c d 
```

`${foo[@]:x:y}``x, x+1, ..., x+y-1`给我们来自`foo`和的元素

您可以将整个内容包装在另一个 for 循环中，以实现拆分`letters`为 3 个较小数组的目标：

```
 # We'll create array_0, array_1, and array_2
for i in 0 1 2; do 
  # Just like our subset above, but start at position i*2 instead of
  # a constant.
  for letter in "${letters[@]:$((i*2)):2}"; do
      declare -a array_$i[$j]=$letter
  done
done 
```

一旦你设法填充了你的三个数组，你如何在没有 的情况下访问它们`eval`？Bash 有间接访问的语法：

```
v=foo
foo=5
echo ${!v}   # echoes 5! 
```

感叹号表示将后面的单词用作变量，其值应用作要扩展的参数的名称。知道了这一点，您可能会认为您可以执行以下操作，但您错了。

```
i=1
v=array_$i   # array_1
echo ${!v[0]}  # array_1[0] is c, so prints c, right? Wrong. 
```

在上面，`bash`尝试找到一个被调用的变量`v[0]`并展开它以获得要展开的参数的名称。我们实际上必须将我们的数组加上它的索引视为一个名称：

```
i=1
v=array_$i[0]
echo ${!v}    # This does print c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:42:35.703

我不认为你可以真正避免`eval`在这里，但如果你小心的话，你也许可以安全地做到这一点。这是我的方法：

```
for name in "${!array_*}"; do # Get all names starting with array_
    i="${name#array_*}" # Get the part after array_
    if [[ $i != *[^0-9]* ]]; then # Check that it's a number.
        printf '%s is not a valid subarray name\n' "$name"
    else
        # Create a variable named "statement" that contains code you want to eval.
        printf -v statement 'cur_array=( "${%s[@]}" )' "$name"
        eval "$statement"
        # Do interesting things with $cur_array
    fi
done 
```

在此之前，当您刚刚创建数组时，您知道`$name`应该是什么，所以只需使用该`printf -v`部分。

为了使其更安全，您可以将所有允许的数组名称保存在另一个数组中并[检查它`$name`是否为 member](http://mywiki.wooledge.org/BashFAQ/036)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:11:06.447

这应该可以，但这不是一个好的解决方案，另一种语言可能更好 bash 不支持多维数组

```
eval array_$i='('"${num[@]:$j:2}"')' 
```

然后，例如

```
eval 'echo "${array_'$i'[0]}"' 
```

# eclipse - 在 IDE 中终止时，Scala println 不起作用

> ID：11548360
> 
> 赞同：3
> 
> 时间：2012-07-18T18:53:18.697
> 
> 标签：eclipse, scala, scala-ide

我正在编写一个循环运行的服务器，并在 Eclipse IDE 的控制台窗口中按下 SIGINT(ctrl-c) 或终止按钮的情况下终止。我希望它优雅地关闭并打印出终止日志。但问题是 println 在通过按下 Eclipse IDE 中的终止按钮触发关闭序列时似乎不起作用。看下面的简单代码：

```
object Test extends App {
  println("start")
  Runtime.getRuntime().addShutdownHook(new Thread {
    override def run = println("shutdown")
  })
  synchronized { wait }
} 
```

它适用于命令行 scala 工具。当我按 ctrl-c 时，会打印“开始”和“关闭”这两条消息。但是当我在 Eclipse IDE 中运行它并点击控制台窗口的终止按钮时，不会打印“关闭”消息。它只是默默地终止。我已经验证了关闭挂钩中的其他所有内容在终止时都可以正常运行。只有 println 不起作用。

对此有任何想法吗？我需要打印出用于记录的终止消息。
提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:07:21.993

关闭进程时，Eclipse 不会运行关闭挂钩：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=38016](https://bugs.eclipse.org/bugs/show_bug.cgi?id=38016)

该错误报告已解决为*不会修复*

我意识到这是一个老错误，所以从那时起事情可能发生了变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:03:33.647

你可以试试scala提供的shutDownHook

```
sys addShutdownHook(println("shutdown")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:09:32.680

尝试将关闭消息记录到文件中。Eclipse 可能会在程序真正终止之前关闭其标准输出管道的末端。

# c# - Resharper：如何使用括号格式化多行方法作为花括号和缩进参数？

> ID：11548361
> 
> 赞同：3
> 
> 时间：2012-07-18T18:53:30.000
> 
> 标签：c#, resharper, indentation, code-formatting

我是 Resharper 的新手，我似乎找不到像这样格式化多行方法声明的选项：

```
public void SomeMethod
(
    int parameter1,
    string parameter2
); 
```

相反，我得到了这个：

```
public void SomeMethod
    (
        int parameter1,
        string parameter2
    ); 
```

有没有办法在代码清理时**自动完成？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:58:24.317

尝试转到选项| C# | 格式样式 | 大括号布局。

从那里您可以更改缩进的规则。对于常规方法，我的方法设置为在下一行（BSD 样式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T22:04:48.827

在 ReSharper -> 选项中

C# -> 格式化样式 -> 其他 -> 缩进，

设置：连续行缩进乘数为 0

# jquery - 这个 UI 行为叫什么，它是如何实现的？

> ID：11548366
> 
> 赞同：1
> 
> 时间：2012-07-18T18:53:51.053
> 
> 标签：jquery, user-interface

这是一个非常愚蠢的问题，但是在[http://thenounproject.com/terms-of-use/](http://thenounproject.com/terms-of-use/)上 ，如果右侧的信息向上滚动然后静态保持在原位，那么这种效果会被称为什么。

另外，是否有关于如何实现此效果的杀手 jQuery 教程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:04:40.103

无需深入研究他们在该特定示例中的操作方式，我可以告诉您，可以通过查看元素的[偏移量](http://api.jquery.com/offset/)和窗口的[scrollTop](http://api.jquery.com/scrollTop/)来实现效果。

如果 scrollTop 大于偏移量的顶部，则意味着页面已滚动超过该元素。您可以在 jQuery 中检查这一点，然后修改元素的 CSS 以使其相对于窗口顶部具有固定位置。

**编辑：**在 jsfiddle 上拼凑了一个[快速而肮脏的例子](http://jsfiddle.net/H9zFn/)。随意复制代码，但您可能需要稍微清理一下。

# ruby - 缓存外部 API 的 API 设计

> ID：11548367
> 
> 赞同：3
> 
> 时间：2012-07-18T18:53:54.267
> 
> 标签：ruby, api, caching

我构建了一个轻量级的 Ruby 代码来包装外部 API：

```
api = ExternalAPI.new
api.expensive_operation(object) 
```

它工作正常。但是，由于 API 很昂贵，除非必要，我不想调用它。这就是为什么我要创建一个使用本地缓存包装 API 调用的更高级别的 API。我不希望应用程序不必担心有关如何缓存 API 的细节。（缓存可以通过内存、磁盘、[算盘](http://en.wikipedia.org/wiki/Abacus)，甚至[鸽子](http://en.wikipedia.org/wiki/IP_over_Avian_Carriers)来完成——这不是应用程序关心的问题。）

这是我目前正在考虑的：

```
包装器 = ExternalAPIWrapper.new
wrapper.expensive_operation(object)

```

我不喜欢这个名字`ExternalAPIWrapper`。它是通用的，不传达包装器的**目的**。特别是，它并不表示它首先检查本地缓存，并且仅在必要时访问低级 API。

我正在寻找在这个起点上有所改进的答案。以下是我正在寻找的一些东西：

1.  高级班更好的名字
2.  更好的样式 API
3.  可能有帮助的设计模式
4.  （也许是一个远景......）一个包装和缓存 API 调用的 Ruby gem

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:38:48.467

对于#1，想到的名字是`CachedExternalAPI`:) 不过，不确定你所说的“更好的风格 API”是什么意思。

至于#3/4：我不知道 RubyGem 会做这种缓存的事情，但我会以“元编程”方式实现缓存的 API，自动生成缓存 API 调用的方法，例如

```
class CachedExternalAPI
  @cache = { }

  class << self

    [:foo, :bar, :baz].each do |m|
      define_method m do
        return (puts "Totally cached!"; @cache[m]) if not @cache[m].nil?
        puts "Not cached :("
        @cache[m] = 42
      end
    end

  end
end

CachedExternalAPI.foo()
CachedExternalAPI.foo()

CachedExternalAPI.bar()
CachedExternalAPI.bar() 
```

哪个会产生

> 未缓存 :(
> 完全缓存！
> 未缓存 :(
> 完全缓存！

这当然假设所有 API 调用的缓存机制都是相同的。但是，如果您的 API 可以通过这种方式缓存，您可以保持缓存的 API 包装器相当干燥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:05:52.963

我的一个朋友 Rob 找到[了 APICache](https://github.com/mloughran/api_cache)：

> APICache（又名 api_cache）
> 
> APICache 允许使用强大的缓存层轻松包装任何 API 客户端库。它支持缓存（显然）、提供陈旧数据和限制 API 调用的数量。如果您只想缓存一个麻烦的 url，它也有一个方便的语法。

APICache 支持多种缓存策略，包括：

*   一个简单的内存缓存
*   [通过Moneta](https://github.com/wycats/moneta)的各种后端，“键值存储的统一接口”
*   Memcached via [Dalli](https://github.com/mperham/dalli)，以 Dalí 的记忆持久化命名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:00:49.610

Too little detail to know exactly what you want but I thought of a bridge pattern straight away since you are essentially trying to decouple your abstraction and implementation when looking at varying your cache backend.

# r - 从一个文本文件在 R 中制作多个绘图

> ID：11548368
> 
> 赞同：0
> 
> 时间：2012-07-18T18:54:06.163
> 
> 标签：r, plot, text-files, batch-processing

我是 R 新手，试图从一个文件中生成大量图表，并在不同数据集之间使用标题。我有一个制表符分隔的纯文本文件，格式如下：

```
Header: Boston city data
Month    Data1    Data2    Data3
1        1.5      9.1342   8.1231
2        12.3     12.31    1.129
3        (etc...)  

Header: Chicago city data
Month    Data1    Data2    Data3
1        1.5      9.1342   8.1231
2        12.3     12.31    1.129
... 
```

我想为每个城市创建月与 Data1、月与 Data2 和月与 Data2 的图表。

我知道在python中，我可以遍历每一行，如果该行以“标题”开头，则做一些不同的事情，然后以某种方式处理这些数字。我想简单地这样做：

```
for (data block starting with header) in inf:
    data = read.delim()
    barplot(data, main=header, ylab="Data1", xlab="Month")
    # repeat for Data2, Data3 
```

但我不确定如何实际遍历文件，或者我是否应该按城市将我的文件拆分为许多小文件，然后遍历要读取的小文件列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:44:28.790

您可以使用`gsub`,`grep`和的组合`strsplit`：

```
## get city name
nameSet <- function(x) {
    return(gsub(pattern="Header: (.*) city data", replacement="\\1", x=x))
}

## extract monthly numbers
singleSet <- function(x) {
    l <- lapply(x, function(y) {
        ## split single line by spaces
        s <- strsplit(y, "[[:space:]]+")
        ## turn characters into doubles
        return(as.double(s[[1]]))
    })
    ## turn list into a matrix
    m <- do.call(rbind, l)
    return(m) 
}

## read file
con <- file("data.txt", "r")
lines <- readLines(con)
close(con)

## determine header lines and calculate begin/end lines for each dataset
headerLines <- grep(pattern="^Header", x=lines)
beginLines <- headerLines+2
endLines <- c(headerLines[-1]-1, length(lines))

## layout plotting region
par(mfrow=c(length(beginLines), 3))

## loop through all datasets
for (i in seq(along=headerLines)) {
    city <- nameSet(lines[headerLines[i]])
    data <- singleSet(lines[beginLines[i]:endLines[i]])

    for (j in 2:ncol(data)) {
        barplot(data[,j], main=city, xlab="Month", ylab=paste("Data", j-1))
    }
}
par(mfrow=c(1, 1)) 
```

![条形图](../Images/39b63b173bb728cd12718ded0a1c73ea.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:46:54.153

这是我的评论中提到的功能的*略微修改版本。*

```
read.funkyfile = function(funkyfile, expression, ...) {
  temp = readLines(funkyfile)
  temp.loc = grep(expression, temp)
  temp.loc = c(temp.loc, length(temp)+1)
  temp.nam = gsub("[[:punct:]][[:space:]]", "", 
                  grep(expression, temp, value=TRUE))
  temp.nam = gsub(expression, "", temp.nam)
  temp.out = vector("list")

  for (i in 1:length(temp.nam)) {
    temp.out[[i]] = read.table(textConnection(
      temp[seq(from = temp.loc[i]+1,
               to = temp.loc[i+1]-1)]),
                             ...)
    names(temp.out)[i] = temp.nam[i]
  }
  temp.out
} 
```

假设您的文件名为“File.txt”，加载函数并像这样读取数据。您可以添加任何`read.table`您需要的参数：

```
temp = read.funkyfile("File.txt", "Header", header=TRUE, sep="\t") 
```

现在，情节：

```
# to plot everything on one page (used for this example), uncomment the next line
# par(mfcol = c(length(temp), 1)) 
lapply(names(temp), function(x) barplot(as.matrix(temp[[x]][-1]), 
                                        beside=TRUE, main=x, 
                                        legend=TRUE))
# dev.off() or par(mfcol = c(1, 1)) if par was modified 
```

这是您的小样本数据的样子`par(mfcol = c(length(temp), 1))`：

![在此处输入图像描述](../Images/e8ff27f83257d1d9dfdb7cedf43a2f8f.png)

# c# - 如何通过双击启动器/.exe/etc在c#上运行网站？

> ID：11548372
> 
> 赞同：-2
> 
> 时间：2012-07-18T18:54:22.370
> 
> 标签：c#

我打算做的是运行一个网站应用程序，就好像它是一个桌面应用程序一样，双击它会在 Internet Explorer 中打开。

关键是我想创建一个网站来创建我和我的团队每天从一个点在我们的 IT 公司创建的读取和存档数据。

这是因为该网站最终会上线，但目前我需要公司中**没有程序员**在我目前工作的办公室以外的其他地点工作的反馈，因此他们无法在我的计算机上试用。

我只需要他们能够双击某些东西并运行网站，在他们的本地计算机上进行尝试和其他操作。

在 Visual Studio 上打开源代码然后编译它对于这些人（经理）来说已经太难了，这就是全部原因。

我使用 Visual Studio Professional 在 C# 上编程

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:57:27.597

做一个捷径。我不知道您的目标浏览器，但这是 IE 的链接

[http://support.microsoft.com/kb/168124](http://support.microsoft.com/kb/168124)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:59:47.833

好吧，这取决于您的网站建立在哪个平台上。
假设您正在使用`ASP.NET`. 您会发现“使服务器上线”文件是文件夹中的一些可执行`IIS`文件（假设您的朋友已经`IIS`安装......）。使用批处理文件，您可以使其根据您的文件自动启动服务器并启动浏览器。
那就是如果我正确地理解了你。总之，这可不是什么好事……

# c# - 我可以在 C# 5 中使用 .Net 4.5 做什么，而在 C# 4 中使用 .Net 4 却无法做到？

> ID：11548373
> 
> 赞同：63
> 
> 时间：2012-07-18T18:54:24.947
> 
> 标签：c#, .net, .net-4.5, c#-5.0, asp.net-4.5

我在 Windows 8 Release Preview 上安装了 Visual Studio 2012 RC，我的问题是是否有任何与 Metro 无关的有用新功能，或者 Metro 是否将 .Net 4 和 .Net 4.5 分开？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-18T19:56:54.760

请参阅[*.NET Framework 4.5 中*](http://msdn.microsoft.com/en-us/library/ms171868%28v=vs.110%29.aspx)的[*新增功能和 Visual Studio 2012 中 Visual C# 的新增功能*](http://msdn.microsoft.com/en-us/library/hh156499%28v=vs.110%29.aspx)。

C# 5.0 最大的新特性是更好地支持异步操作，使用 new`await`关键字。

# javascript - How can I prevent a change event from being fired from a selected radio button?

> ID：11548379
> 
> 赞同：1
> 
> 时间：2012-07-18T18:54:57.353
> 
> 标签：javascript, jquery

I'm trying to fire a change event for a selected group radio button but this event gets fired if I select an already selected radio button. Can I prevent this from happening?

```
$("input[type='radio']").mouseup(function(){
    ... 
}).change(function(){
    ...
}); 
```

HTML

```
<label class="radio">
    <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
            Option one
</label>
<label class="radio">
    <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
            Option two
</label> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:56:36.990

```
$("input[type='radio']:not(:selected)").mouseup(function(){
    ... 
}).change(function(){
    ...
}); 
```

OR

```
$("input[type='radio']:not(:checked)").mouseup(function(){
    ... 
}).change(function(){
    ...
}); 
```

`:not(:selected)` will exclude all `selected` `radio`s.

Read about **[`:selected`](http://api.jquery.com/selected-selector/)** and **[`:not()`](http://api.jquery.com/not-selector/)** selectors.

# windows-8 - Metro 应用程序使用企业身份验证：为什么我仍然看到登录提示

> ID：11548380
> 
> 赞同：3
> 
> 时间：2012-07-18T18:54:59.907
> 
> 标签：windows-8, microsoft-metro, winjs

我有一个 WinJS Metro 应用程序，用于连接到同一个域的远程 Web 服务。我阅读了应用程序清单功能（以及在线存在的少量内容），并希望我能够使用已登录的用户凭据来访问此 Web 服务，而无需他们登录。

我正在尝试使用 contentType：“application/x-www-form-urlencoded;charset='utf-8'”通过帖子对 Web 服务进行身份验证。此应用程序以前是一个网站，它会使用上述帖子在身份验证步骤中提示用户输入登录凭据。在 WinJS Metro 应用程序中，我有效地使用相同的代码（细微调整）来实现相同的结果。

有没有人在 WinJS Metro 应用程序中使用企业身份验证的经验，并且可以更好地解释我将/不会访问哪些类型的资源。我希望这不是特定于访问文件共享和 Intranet 站点等内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:26:44.587

我也有这个确切的问题。确保在 package.appxmanifest 中启用了以下功能后：

*   企业认证
*   互联网（客户端）
*   专用网络（客户端和服务器）

我仍然必须将我们的 Web 服务的 URL 添加到 Internet Explorer 的 Intranet 站点列表中。直到那时，提示才消失。

# wcf - 具有负载平衡端点的 WCF 发现

> ID：11548381
> 
> 赞同：0
> 
> 时间：2012-07-18T18:55:00.903
> 
> 标签：wcf, ws-discovery

我有以下情况：

我有一个主控制 WCF 应用程序，它允许不同的客户端应用程序相互通信。它使用 WCF 发现找到想要相互通信的客户端。如下所示：

```
[Client Prod 1] <--> [Controller] <--> [Client Prod 2] 
```

一切正常，但是我刚刚被告知客户端的产品环境正在我的控制器和客户端应用程序之间使用负载平衡器：

```
[Client Prod 1-1]                                                             [Client Prod 2-1]
[Client Prod 1-2] <--> Load Balancer <--> [Controller] <--> Load Balancer <--> [Client Prod 2-2]
[Client Prod 1-3] 
```

当客户端产品 1 发出“Hello”通知时，WCF 会注册 3 个单独的产品 1，还是只注册负载均衡器？

（附加信息：.NET 4 和 IIS 7.5）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:45:02.323

老问题，所以你可能已经有了答案。仍然...

发现基于 UDP。如果您图片上的负载均衡器将 CP1 放在不同的子网中，则发现根本不起作用。但是，如果所有服务器都在同一个子网中，则任一控制器可以启动发现并定位所有 CP1，或者所有 CP1 必须宣布它们的存在并因此由控制器注册。

# javascript - 与javascript一起工作的RequiredFieldValidator

> ID：11548383
> 
> 赞同：2
> 
> 时间：2012-07-18T18:55:11.603
> 
> 标签：javascript, asp.net, validation, requiredfieldvalidator

我有多个RequiredFieldValidator，例如：

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtbox1" 
            Display="Dynamic" ErrorMessage="Required Field" SetFocusOnError="True" 
            ValidationGroup="validator1" CssClass="validator" /> 
```

链接到此按钮：

```
<asp:LinkButton runat="server" ID="btnNext1" Text="Next Page" CssClass="btn" ValidationGroup="validator1" /> 
```

连同一些javascript：

```
<script type="text/javascript">
$(function() {
    function nextPage1() {

        $( "#divFirstPage" ).hide("fade");
        $( "#divSecondPage" ).show("fade");
        $( "#<%=btnNext1.ClientID%>" ).hide();
        $( "#<%=btnNext2.ClientID%>" ).show();
        $( "#<%=btnPrevious1.ClientID%>" ).show();
    };
    $( "#<%=btnNext1.ClientID%>" ).click(function() {
        nextPage1();
        return false;
    });
    $( "#divSecondPage" ).hide();
    $( "#divThirdPage" ).hide();
    $( "#<%=btnNext2.ClientID%>" ).hide();
    $( "#<%=btnPrevious1.ClientID%>" ).hide();
    $( "#<%=btnPrevious2.ClientID%>" ).hide();
});
</script> 
```

但是 javascript 在验证之前执行，所以 id 需要在 javascript**之前执行验证**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T19:04:12.883

如果我的理解是正确的，您想在执行 javascript 代码之前验证您的表单

尝试这样的事情：

```
$( "#<%=btnNext1.ClientID%>" ).click(function() {
    var val = Page_ClientValidate();
    if(!val) {
        return false;
    }
    nextPage1();
    return true;
}); 
```

或者，如果要指定自定义`ValidationGroup`，可以使用以下代码：

```
Page_ClientValidate('your group name'); 
```

# c# - ASP.NET - 在文本中查找和替换动态生成的 URL

> ID：11548385
> 
> 赞同：0
> 
> 时间：2012-07-18T18:55:22.317
> 
> 标签：c#, asp.net, .net, regex

我正在开发一个 asp.net (C#) 应用程序，我需要在其中解析和替换动态生成的文本。

文本的示例是：
`onclick="javascript:EnterFolder('http:\u002f\u002fmyserver\u002fapps\u002fsitename\u002fsubsite1name?`

我需要将其替换为：
`onclick="javascript:EnterFolder('http:\u002f\u002fmyserver\u002fapps\u002fsitename?`

简单地删除和删除`subsite1`是不合适的，因为它存在于文本的其他部分并且在那里需要。

我只想定位和编辑前面的网址：`javascript:EnterFolder('`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:13:47.797

此正则表达式将起作用：

```
string newString = Regex.Replace(origString, @"(javascript:EnterFolder\('http:\\u002f\\u002fmyserver\\u002fapps\\u002fsitename)\\u002fsubsite1name\?", "$1?"); 
```

或者，更通用的用途：

```
string newString = Regex.Replace(origString, @"(javascript:EnterFolder\('http:(.+?))\\u002fsubsite1name\?", "$1?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:17:47.673

使用这个正则表达式：

```
onclick=\"javascript:EnterFolder\('http:\\[\w\\]+(\\\w+)\? 
```

用。。。来代替

```
"" 
```

# android - 尽快在NDK中填充android位图数据的任何方法

> ID：11548386
> 
> 赞同：1
> 
> 时间：2012-07-18T18:55:22.877
> 
> 标签：android, android-ndk

现在，我正在做一些关心速度的事情。

众所周知，在*Android 2.2*或更高版本中，我们可以使用`libjnigraphics`NDK 级别填充 android Java 位图数据，因为它非常快且内存消耗低。

但是对于低于 2.2 的 Android 版本，我们只能使用`int`数组作为桥梁。随之而来的是更慢和更高的内存消耗（对于临时`int`数组）。

所以我的问题是，有没有办法在低于 Android 2.2 的 Android 版本中尽快做到这一点？

谢谢。

# php - 尝试在json编码期间获取非对象错误的属性

> ID：11548387
> 
> 赞同：0
> 
> 时间：2012-07-18T18:55:29.843
> 
> 标签：php, json, codeigniter

这是我正在尝试编写的一段代码。在这里，我想从数据库中检索数据，将其存储到一个数组中，然后对其进行 json_ecode 并将其设置为输出。但我不断收到此错误“试图获取非对象的属性”。

这是代码

```
$data['query'] = $this->db->get('forms');

foreach($data['query'] as $row)
{
    $forms_array[] = array(
        $row->id 
    );
}   

$return=json_encode($forms_array);
$this->output->set_output($return); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:02:01.577

您应该首先检查您的查询是否实际返回行。其次，你想`$data['query']->result()`在你的`foreach`：

```
if($data['query']->num_rows() > 0){
    // The query returned rows...
    foreach($data['query']->result() as $row){
        $forms_array[] = array(
            $row->id 
        );
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:05:19.563

您应该在 foreach 之外声明 $forms_array[]。

# angularjs - 删除元素时的angularJS通知

> ID：11548390
> 
> 赞同：15
> 
> 时间：2012-07-18T18:55:42.367
> 
> 标签：angularjs

我正在创建一个新指令，我想知道当从 DOM 中删除元素时如何得到通知。
我的目标是在删除元素时添加一个 jquery 动画。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-18T20:14:12.623

如果您尝试为元素的移除设置动画，则需要在移除之前执行此操作。

我创建了一个[小提琴](http://jsfiddle.net/ShadowBelmolve/sg4tK/2/)来证明这一点。

在第一部分中，您将监听`$destroy`从 DOM 中删除的元素的角度调用事件。

在第二种情况下，我创建了一个指令来自动淡出并删除元素。

在第三种情况下，指令只是淡出元素并将删除传递给控制器​​。

如果要淡出已删除的元素，则不能使用第一个选项。

在第二个和第三个之间，我个人建议第三个，因为它更灵活。

# android-ndk - 谷歌breakpad无法在cygwin下为android编译

> ID：11548393
> 
> 赞同：1
> 
> 时间：2012-07-18T18:55:46.670
> 
> 标签：android-ndk, cygwin, google-breakpad

我从 svn 对 google breakpad 进行了干净的结帐，并尝试使用 cygwin for android 对其进行编译。然而，进展并不顺利。

```
cd <google-breakpad>
android/run-checks.sh --ndk-dir=<my-ndk-dir> --tmp-dir=$PWD/bin --no-cleanup --no-device --verbose 
```

我收到一个错误`Can't build host-tools`，原因是：

```
cc1plus: error: unrecognized command line option "-Werror=non-virtual-dtor"
cc1plus: error: unrecognized command line option "-Werror=vla"
cc1plus: error: unrecognized command line option "-Werror=unused-variable"
cc1plus: error: unrecognized command line option "-Werror=missing-braces"
cc1plus: error: unrecognized command line option "-Werror=overloaded-virtual" 
```

如果我修改 makefile 以将这些警告作为错误选项删除，则构建会更进一步，但无法找到明显存在的文件：

```
Could not rebuild Android client library!
arm-linux-androideabi-g++.exe: /cygdrive/c/Users/Tom/dev/android/modules/google_breakpad/android/../src/client/linux/log/log.cc: No such file or directory 
```

但：

```
$ ls -l /cygdrive/c/Users/Tom/dev/android/modules/google_breakpad/android/../src/client/linux/log/log.cc
-rw-r--r-- 1 Tom None 2.0K Jul 16 20:49 /cygdrive/c/Users/Tom/dev/android/modules/google_breakpad/android/../src/client/linux/log/log.cc 
```

所有文件都以相同的方式失败 - 不仅仅是那个。

任何帮助表示赞赏。

# c# - 将图像绘制到数据网格视图中的自定义组合框

> ID：11548395
> 
> 赞同：0
> 
> 时间：2012-07-18T18:55:51.683
> 
> 标签：c#, .net, winforms, datagridview, combobox

我是这个自定义 datagridview 列机制的新手。我想在 datagridview 中有一个组合框，它允许用户选择不同的线条样式（使用 DashStyle）。我发现的教程要么不适用于组合框，要么不使用绘图。

我已经可以通过覆盖 OnDrawItem() 来制作一个可以工作的自定义独立组合框，使用[这里的代码](https://stackoverflow.com/questions/10891214/c-sharp-combobox-with-lines)

但我无法制作自定义 datagridview 组合框列。

1.  我希望组合框单元的值返回 DashStyle。
2.  我也无法在表单加载时显示绘制的项目。将默认启动值设置为 Dashstyle.Solid 在组合框中写入“Solid”。当我点击它时，它会触发绘图项目......

这是我到目前为止的代码，基于网络上的其他示例：

```
public class CustomComboBoxColumn : DataGridViewComboBoxColumn
{
  public CustomComboBoxColumn()
  {
    CustomComboBoxCell cbc = new CustomComboBoxCell();
    this.CellTemplate = cbc;
  }
}

public class CustomComboBoxCell : DataGridViewComboBoxCell
{
  public CustomComboBoxCell()
  : base() { }

  public override void InitializeEditingControl(int rowIndex, object initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
  {
    base.InitializeEditingControl(rowIndex, initialFormattedValue, dataGridViewCellStyle);

    var ctl = DataGridView.EditingControl as CustomComboBoxControl;

    if (this.Value == null)
      ctl.SelectedIndex = 0;
  }

  public override Type EditType
  {
    get { return typeof(CustomComboBoxControl); }
  }

  public override Type ValueType
  {
    get { return typeof(DashStyle); }
  }

  public override object DefaultNewRowValue
  {
    get { return DashStyle.Solid; }
  }

}

public class CustomComboBoxControl : MyComboBox, IDataGridViewEditingControl
{
  private int index_ = 0;
  private DataGridView dataGridView_ = null;
  private bool valueChanged_ = false;

  public CustomComboBoxControl() : base()
  {
    this.SelectedIndexChanged += new EventHandler(ComboBoxControl_SelectedIndexChanged);
    this.DrawMode = DrawMode.OwnerDrawVariable;
    this.DropDownStyle = ComboBoxStyle.DropDownList;
  }

  public void ComboBoxControl_SelectedIndexChanged(object sender, EventArgs e)
  {
    NotifyDataGridViewOfValueChange();
  }

  protected virtual void NotifyDataGridViewOfValueChange()
  {
    this.valueChanged_ = true;
    if (this.dataGridView_ != null)
    {
      this.dataGridView_.NotifyCurrentCellDirty(true);
    }
  }

  public void ApplyCellStyleToEditingControl(DataGridViewCellStyle dataGridViewCellStyle) {      }

  public DataGridView EditingControlDataGridView
  {
    get { return dataGridView_; }
    set { dataGridView_ = value; }
  }

  public object EditingControlFormattedValue
  {
    get { return base.SelectedValue; }
    set { base.SelectedValue = value; NotifyDataGridViewOfValueChange(); }
  }

  public int EditingControlRowIndex
  {
    get { return index_; }
    set { index_ = value; }
  }

  public bool EditingControlValueChanged
  {
    get { return valueChanged_; }
    set { valueChanged_ = value; }
  }

  public bool EditingControlWantsInputKey(Keys keyData, bool dataGridViewWantsInputKey)
  {
    if (keyData == Keys.Return)
      return true;
    switch (keyData & Keys.KeyCode)
    {
      case Keys.Up:
      case Keys.Down:
        return true;
      default:
        return false;
    }
  }

  public Cursor EditingPanelCursor
  {
    get { return base.Cursor; }
  }

  public object GetEditingControlFormattedValue(DataGridViewDataErrorContexts context)
  {
    var val = EditingControlFormattedValue;
    if (val == null)
      val = DashStyle.Solid;
    return val.ToString();
  }

  public void PrepareEditingControlForEdit(bool selectAll) { }

  public bool RepositionEditingControlOnValueChange
  {
    get { return false; }
  }

} 
```

我很感激任何关于我做错了什么以及它是如何工作的信息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:58:31.270

创建一个采用字符串“solid”并返回 DashStyle.Solid 的方法

```
private DashStyle GetDashStyle(string style){
  switch(style)
   {
        case "Solid":
         return DashStyle.Solid;
   }
} 
```

# jquery - 基于 HighChart 图例切换 DataTable 行

> ID：11548396
> 
> 赞同：0
> 
> 时间：2012-07-18T18:55:53.807
> 
> 标签：jquery, datatables, highcharts

我有以下设置：

```
HighChart Graph
--------------------

DataTable Header
Month             | Day       | Total   | etc
----------------------------------------
June              |     2     | 10      | ...
June              |     5     | 20      | ...
July              |    29     | 10      | ...
Aug               |     1     | 30      | ... 
```

我图表上的系列标题为月份。

我想做的是，当切换图例时，它将隐藏与单击的系列匹配的行。

问题是，如何将 HighChart 回调与 DataTables 的过滤器集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:55:53.807

在这个答案中，我假设变量`dataTable`等于 DataTable 对象的变量。

**第一的，**

让我们从 HighCharts 设置回调。

```
...
plotOptions: {
    spline: {
       events: {
            legendItemClick: function () {
                 // Filters Go Here
            }
       },
       showInLegend: true 
    }
}
... 
```

**第二，**

我们将更进一步，并在切换系列时添加检测：

```
filters = []; // Set this inside your $(document).ready(function(e) {
...
plotOptions: {
    spline: {
       events: {
            legendItemClick: function () {
                 tmp = [];

                 // Series was Visible, Now Hidden
                 if(this.visible){
                     // Add Action Here
                 }
                 // Series was Hidden, Now Visible
                 else{
                     // Add Action Here
                 }
            }
       },
       showInLegend: true 
    }
}
... 
```

第三，

我们现在知道该系列何时切换。我们可以检测到他们来自哪个州以及他们要去哪个州。我们不会为 DataTables 设置过滤器。

```
filters = []; // Set this inside your $(document).ready(function(e) {
...
plotOptions: {
    spline: {
       events: {
            legendItemClick: function () {
                 tmp = [];

                 // Series was Visible, Now Hidden
                 if(this.visible){
                     filter.push(this.name);
                 }

                 // Series was Hidden, Now Visible
                 else{
                     var series = this.name;
                     $.each(filter, function(k, v){
                         if(v != series){
                             tmp.push(v);
                         }
                     });

                     filter = tmp;
                 }
            }
       },
       showInLegend: true 
    }
}
... 
```

**最后，**

我们现在用HighCharts Legend`filter`中的名称填充了数组。`series`我们需要获取这个数组，并将其应用于过滤器。

```
filters = []; // Set this inside your $(document).ready(function(e) {
...
plotOptions: {
    spline: {
       events: {
            legendItemClick: function () {
                  tmp = [];

                 // Series was Visible, Now Hidden
                 if(this.visible){
                     filter.push(this.name);
                 }

                 // Series was Hidden, Now Visible
                 else{
                     var series = this.name;
                     $.each(filter, function(k, v){
                         if(v != series){
                             tmp.push(v);
                         }
                     });

                     filter = tmp;
                }

                regex = (filter.length > 0 ? '^((?!('+filter.join('|')+')).)*$' : "");

                dataTable.fnFilter(
                    regex,
                    0, // set this to your column index
                    true
                );
            }
       },
       showInLegend: true 
    }
}
... 
```

**完毕！**

上面使用的 RegEx`^((?!('+filter.join('|')+')).)*$`将使用`filter`带有`|`（管道）字符作为`OR`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:59:20.183

您可以将以下内容应用于回调..我认为..

```
$.each(chart.options.series, function(key, value){
    // filter here
} 
```

# android - 创建一个包含 3 个单独视图的类

> ID：11548400
> 
> 赞同：0
> 
> 时间：2012-07-18T18:56:09.590
> 
> 标签：android, view

`Views`基本上我希望一个班级在一个屏幕上单独举行 3 个班级。

我希望屏幕的上**半**`View`部分显示全景（我已在 Panorama.java 中定义），下半部分将垂直分成两半，并`Views`在它们上分开 2 个。左边是我的地图类（CampusMap.java），右边是我的另一个`Activity`（CampusTour.java）。

这可能吗？如果是这样，我将如何实施它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:10:56.703

[片段](http://developer.android.com/guide/components/fragments.html)可能是您正在寻找的。

您可以在同一屏幕上同时拥有多个片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:04:16.420

您一次只能运行一项活动。您可能希望`views`在一个布局中实现三个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:09:53.410

碎片我的朋友......你寻求的答案是碎片......

它们基本上是模块化代码块，由与 Java 代码结合的 XML 文件组成。它们可以填充到单个容器视图中，通过容器或通过它们自己的代码对它们完成工作，并且可以在运行时删除和添加

# android - Dialog的标题有限制吗？

> ID：11548401
> 
> 赞同：0
> 
> 时间：2012-07-18T18:56:11.913
> 
> 标签：android

我已经创建`DialogFragment`并使用`getDialog().setTitle("Application failed to decrypt the file")`了，我在标题中看到的是“应用程序失败”。标题有限制吗？如何将整个字符串放入其中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:59:00.357

使用[AlertDialog](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setMessage%28java.lang.CharSequence%29) 来显示一条消息，而不是这么长的东西。

# gcc - “/usr/bin/ld: 找不到 -lui”

> ID：11548402
> 
> 赞同：0
> 
> 时间：2012-07-18T18:56:21.653
> 
> 标签：gcc

当我遇到以下错误时，我正在尝试编译我的代码。我正在尝试用 cmake 编译。

我在论坛中搜索了类似的错误。但我找不到以下具体错误。我在论坛问题中发现了其他图书馆问题。

错误：

```
/usr/bin/ld: cannot find -lui
/usr/bin/ld: cannot find -lmodelcommands
/usr/bin/ld: cannot find -lmodel
collect2: ld returned 1 exit status 
```

我尝试安装“sudo apt-get install lib32z1-dev”。但没有解决办法。此外，我还遇到了“lmodelcommands & lmodel”错误。

如果有人遇到过类似的错误，请给我一个解决方案。

Makefile 包含：

```
# CMAKE generated file: DO NOT EDIT!
# Generated by "Unix Makefiles" Generator, CMake Version 2.8

# Default target executed when no arguments are given to make.
default_target: all
.PHONY : default_target

#=============================================================================
# Special targets provided by cmake.

# Disable implicit rules so canoncical targets will work.
.SUFFIXES:

# Remove some rules from gmake that .SUFFIXES does not remove.
SUFFIXES =

.SUFFIXES: .hpux_make_needs_suffix_list

# Suppress display of executed commands.
$(VERBOSE).SILENT:

# A target that is always out of date.
cmake_force:
.PHONY : cmake_force

#=============================================================================
# Set environment variables for the build.

# The shell in which to execute make rules.
SHELL = /bin/sh

# The CMake executable.
CMAKE_COMMAND = /usr/bin/cmake

# The command to remove a file.
RM = /usr/bin/cmake -E remove -f

# The program to use to edit the cache.
CMAKE_EDIT_COMMAND = /usr/bin/ccmake

# The top-level source directory on which CMake was run.
CMAKE_SOURCE_DIR = /home/pvadhana/Desktop/stpproject

# The top-level build directory on which CMake was run.
CMAKE_BINARY_DIR = /home/pvadhana/Desktop/stpproject/build

#=============================================================================
# Targets provided globally by CMake.

# Special rule for the target edit_cache
edit_cache:
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Running CMake cache editor..."
    /usr/bin/ccmake -H$(CMAKE_SOURCE_DIR) -B$(CMAKE_BINARY_DIR)
.PHONY : edit_cache

# Special rule for the target edit_cache
edit_cache/fast: edit_cache
.PHONY : edit_cache/fast

# Special rule for the target install
install: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Install the project..."
    /usr/bin/cmake -P cmake_install.cmake
.PHONY : install

# Special rule for the target install
install/fast: preinstall/fast
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Install the project..."
    /usr/bin/cmake -P cmake_install.cmake
.PHONY : install/fast

# Special rule for the target install/local
install/local: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Installing only the local directory..."
    /usr/bin/cmake -DCMAKE_INSTALL_LOCAL_ONLY=1 -P cmake_install.cmake
.PHONY : install/local

# Special rule for the target install/local
install/local/fast: install/local
.PHONY : install/local/fast

# Special rule for the target install/strip
install/strip: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Installing the project stripped..."
    /usr/bin/cmake -DCMAKE_INSTALL_DO_STRIP=1 -P cmake_install.cmake
.PHONY : install/strip

# Special rule for the target install/strip
install/strip/fast: install/strip
.PHONY : install/strip/fast

# Special rule for the target list_install_components
list_install_components:
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Available install components are: \"Unspecified\""
.PHONY : list_install_components

# Special rule for the target list_install_components
list_install_components/fast: list_install_components
.PHONY : list_install_components/fast

# Special rule for the target package
package: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Run CPack packaging tool..."
    /usr/bin/cpack --config ./CPackConfig.cmake
.PHONY : package

# Special rule for the target package
package/fast: package
.PHONY : package/fast

# Special rule for the target package_source
package_source:
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Run CPack packaging tool for source..."
    /usr/bin/cpack --config ./CPackSourceConfig.cmake /home/pvadhana/Desktop/stpproject/build/CPackSourceConfig.cmake
.PHONY : package_source

# Special rule for the target package_source
package_source/fast: package_source
.PHONY : package_source/fast

# Special rule for the target rebuild_cache
rebuild_cache:
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Running CMake to regenerate build system..."
    /usr/bin/cmake -H$(CMAKE_SOURCE_DIR) -B$(CMAKE_BINARY_DIR)
.PHONY : rebuild_cache

# Special rule for the target rebuild_cache
rebuild_cache/fast: rebuild_cache
.PHONY : rebuild_cache/fast

# Special rule for the target test
test:
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Running tests..."
    /usr/bin/ctest --force-new-ctest-process $(ARGS)
.PHONY : test

# Special rule for the target test
test/fast: test
.PHONY : test/fast

# The main all target
all: cmake_check_build_system
    $(CMAKE_COMMAND) -E cmake_progress_start /home/pvadhana/Desktop/stpproject/build/CMakeFiles /home/pvadhana/Desktop/stpproject/build/CMakeFiles/progress.marks
    $(MAKE) -f CMakeFiles/Makefile2 all
    $(CMAKE_COMMAND) -E cmake_progress_start /home/pvadhana/Desktop/stpproject/build/CMakeFiles 0
.PHONY : all

# The main clean target
clean:
    $(MAKE) -f CMakeFiles/Makefile2 clean
.PHONY : clean

# The main clean target
clean/fast: clean
.PHONY : clean/fast

# Prepare targets for installation.
preinstall: all
    $(MAKE) -f CMakeFiles/Makefile2 preinstall
.PHONY : preinstall

# Prepare targets for installation.
preinstall/fast:
    $(MAKE) -f CMakeFiles/Makefile2 preinstall
.PHONY : preinstall/fast

# clear depends
depend:
    $(CMAKE_COMMAND) -H$(CMAKE_SOURCE_DIR) -B$(CMAKE_BINARY_DIR) --check-build-system CMakeFiles/Makefile.cmake 1
.PHONY : depend

#=============================================================================
# Target rules for targets named Continuous

# Build rule for target.
Continuous: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 Continuous
.PHONY : Continuous

# fast build rule for target.
Continuous/fast:
    $(MAKE) -f CMakeFiles/Continuous.dir/build.make CMakeFiles/Continuous.dir/build
.PHONY : Continuous/fast

#=============================================================================
# Target rules for targets named ContinuousBuild

# Build rule for target.
ContinuousBuild: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousBuild
.PHONY : ContinuousBuild

# fast build rule for target.
ContinuousBuild/fast:
    $(MAKE) -f CMakeFiles/ContinuousBuild.dir/build.make CMakeFiles/ContinuousBuild.dir/build
.PHONY : ContinuousBuild/fast

#=============================================================================
# Target rules for targets named ContinuousConfigure

# Build rule for target.
ContinuousConfigure: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousConfigure
.PHONY : ContinuousConfigure

# fast build rule for target.
ContinuousConfigure/fast:
    $(MAKE) -f CMakeFiles/ContinuousConfigure.dir/build.make CMakeFiles/ContinuousConfigure.dir/build
.PHONY : ContinuousConfigure/fast

#=============================================================================
# Target rules for targets named ContinuousCoverage

# Build rule for target.
ContinuousCoverage: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousCoverage
.PHONY : ContinuousCoverage

# fast build rule for target.
ContinuousCoverage/fast:
    $(MAKE) -f CMakeFiles/ContinuousCoverage.dir/build.make CMakeFiles/ContinuousCoverage.dir/build
.PHONY : ContinuousCoverage/fast

#=============================================================================
# Target rules for targets named ContinuousMemCheck

# Build rule for target.
ContinuousMemCheck: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousMemCheck
.PHONY : ContinuousMemCheck

# fast build rule for target.
ContinuousMemCheck/fast:
    $(MAKE) -f CMakeFiles/ContinuousMemCheck.dir/build.make CMakeFiles/ContinuousMemCheck.dir/build
.PHONY : ContinuousMemCheck/fast

#=============================================================================
# Target rules for targets named ContinuousStart

# Build rule for target.
ContinuousStart: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousStart
.PHONY : ContinuousStart

# fast build rule for target.
ContinuousStart/fast:
    $(MAKE) -f CMakeFiles/ContinuousStart.dir/build.make CMakeFiles/ContinuousStart.dir/build
.PHONY : ContinuousStart/fast

#=============================================================================
# Target rules for targets named ContinuousSubmit

# Build rule for target.
ContinuousSubmit: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousSubmit
.PHONY : ContinuousSubmit

# fast build rule for target.
ContinuousSubmit/fast:
    $(MAKE) -f CMakeFiles/ContinuousSubmit.dir/build.make CMakeFiles/ContinuousSubmit.dir/build
.PHONY : ContinuousSubmit/fast

#=============================================================================
# Target rules for targets named ContinuousTest

# Build rule for target.
ContinuousTest: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousTest
.PHONY : ContinuousTest

# fast build rule for target.
ContinuousTest/fast:
    $(MAKE) -f CMakeFiles/ContinuousTest.dir/build.make CMakeFiles/ContinuousTest.dir/build
.PHONY : ContinuousTest/fast

#=============================================================================
# Target rules for targets named ContinuousUpdate

# Build rule for target.
ContinuousUpdate: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ContinuousUpdate
.PHONY : ContinuousUpdate

# fast build rule for target.
ContinuousUpdate/fast:
    $(MAKE) -f CMakeFiles/ContinuousUpdate.dir/build.make CMakeFiles/ContinuousUpdate.dir/build
.PHONY : ContinuousUpdate/fast

#=============================================================================
# Target rules for targets named Experimental

# Build rule for target.
Experimental: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 Experimental
.PHONY : Experimental

# fast build rule for target.
Experimental/fast:
    $(MAKE) -f CMakeFiles/Experimental.dir/build.make CMakeFiles/Experimental.dir/build
.PHONY : Experimental/fast

#=============================================================================
# Target rules for targets named ExperimentalBuild

# Build rule for target.
ExperimentalBuild: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalBuild
.PHONY : ExperimentalBuild

# fast build rule for target.
ExperimentalBuild/fast:
    $(MAKE) -f CMakeFiles/ExperimentalBuild.dir/build.make CMakeFiles/ExperimentalBuild.dir/build
.PHONY : ExperimentalBuild/fast

#=============================================================================
# Target rules for targets named ExperimentalConfigure

# Build rule for target.
ExperimentalConfigure: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalConfigure
.PHONY : ExperimentalConfigure

# fast build rule for target.
ExperimentalConfigure/fast:
    $(MAKE) -f CMakeFiles/ExperimentalConfigure.dir/build.make CMakeFiles/ExperimentalConfigure.dir/build
.PHONY : ExperimentalConfigure/fast

#=============================================================================
# Target rules for targets named ExperimentalCoverage

# Build rule for target.
ExperimentalCoverage: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalCoverage
.PHONY : ExperimentalCoverage

# fast build rule for target.
ExperimentalCoverage/fast:
    $(MAKE) -f CMakeFiles/ExperimentalCoverage.dir/build.make CMakeFiles/ExperimentalCoverage.dir/build
.PHONY : ExperimentalCoverage/fast

#=============================================================================
# Target rules for targets named ExperimentalMemCheck

# Build rule for target.
ExperimentalMemCheck: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalMemCheck
.PHONY : ExperimentalMemCheck

# fast build rule for target.
ExperimentalMemCheck/fast:
    $(MAKE) -f CMakeFiles/ExperimentalMemCheck.dir/build.make CMakeFiles/ExperimentalMemCheck.dir/build
.PHONY : ExperimentalMemCheck/fast

#=============================================================================
# Target rules for targets named ExperimentalStart

# Build rule for target.
ExperimentalStart: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalStart
.PHONY : ExperimentalStart

# fast build rule for target.
ExperimentalStart/fast:
    $(MAKE) -f CMakeFiles/ExperimentalStart.dir/build.make CMakeFiles/ExperimentalStart.dir/build
.PHONY : ExperimentalStart/fast

#=============================================================================
# Target rules for targets named ExperimentalSubmit

# Build rule for target.
ExperimentalSubmit: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalSubmit
.PHONY : ExperimentalSubmit

# fast build rule for target.
ExperimentalSubmit/fast:
    $(MAKE) -f CMakeFiles/ExperimentalSubmit.dir/build.make CMakeFiles/ExperimentalSubmit.dir/build
.PHONY : ExperimentalSubmit/fast

#=============================================================================
# Target rules for targets named ExperimentalTest

# Build rule for target.
ExperimentalTest: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalTest
.PHONY : ExperimentalTest

# fast build rule for target.
ExperimentalTest/fast:
    $(MAKE) -f CMakeFiles/ExperimentalTest.dir/build.make CMakeFiles/ExperimentalTest.dir/build
.PHONY : ExperimentalTest/fast

#=============================================================================
# Target rules for targets named ExperimentalUpdate

# Build rule for target.
ExperimentalUpdate: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 ExperimentalUpdate
.PHONY : ExperimentalUpdate

# fast build rule for target.
ExperimentalUpdate/fast:
    $(MAKE) -f CMakeFiles/ExperimentalUpdate.dir/build.make CMakeFiles/ExperimentalUpdate.dir/build
.PHONY : ExperimentalUpdate/fast

#=============================================================================
# Target rules for targets named Nightly

# Build rule for target.
Nightly: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 Nightly
.PHONY : Nightly

# fast build rule for target.
Nightly/fast:
    $(MAKE) -f CMakeFiles/Nightly.dir/build.make CMakeFiles/Nightly.dir/build
.PHONY : Nightly/fast

#=============================================================================
# Target rules for targets named NightlyBuild

# Build rule for target.
NightlyBuild: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyBuild
.PHONY : NightlyBuild

# fast build rule for target.
NightlyBuild/fast:
    $(MAKE) -f CMakeFiles/NightlyBuild.dir/build.make CMakeFiles/NightlyBuild.dir/build
.PHONY : NightlyBuild/fast

#=============================================================================
# Target rules for targets named NightlyConfigure

# Build rule for target.
NightlyConfigure: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyConfigure
.PHONY : NightlyConfigure

# fast build rule for target.
NightlyConfigure/fast:
    $(MAKE) -f CMakeFiles/NightlyConfigure.dir/build.make CMakeFiles/NightlyConfigure.dir/build
.PHONY : NightlyConfigure/fast

#=============================================================================
# Target rules for targets named NightlyCoverage

# Build rule for target.
NightlyCoverage: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyCoverage
.PHONY : NightlyCoverage

# fast build rule for target.
NightlyCoverage/fast:
    $(MAKE) -f CMakeFiles/NightlyCoverage.dir/build.make CMakeFiles/NightlyCoverage.dir/build
.PHONY : NightlyCoverage/fast

#=============================================================================
# Target rules for targets named NightlyMemCheck

# Build rule for target.
NightlyMemCheck: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyMemCheck
.PHONY : NightlyMemCheck

# fast build rule for target.
NightlyMemCheck/fast:
    $(MAKE) -f CMakeFiles/NightlyMemCheck.dir/build.make CMakeFiles/NightlyMemCheck.dir/build
.PHONY : NightlyMemCheck/fast

#=============================================================================
# Target rules for targets named NightlyMemoryCheck

# Build rule for target.
NightlyMemoryCheck: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyMemoryCheck
.PHONY : NightlyMemoryCheck

# fast build rule for target.
NightlyMemoryCheck/fast:
    $(MAKE) -f CMakeFiles/NightlyMemoryCheck.dir/build.make CMakeFiles/NightlyMemoryCheck.dir/build
.PHONY : NightlyMemoryCheck/fast

#=============================================================================
# Target rules for targets named NightlyStart

# Build rule for target.
NightlyStart: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyStart
.PHONY : NightlyStart

# fast build rule for target.
NightlyStart/fast:
    $(MAKE) -f CMakeFiles/NightlyStart.dir/build.make CMakeFiles/NightlyStart.dir/build
.PHONY : NightlyStart/fast

#=============================================================================
# Target rules for targets named NightlySubmit

# Build rule for target.
NightlySubmit: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlySubmit
.PHONY : NightlySubmit

# fast build rule for target.
NightlySubmit/fast:
    $(MAKE) -f CMakeFiles/NightlySubmit.dir/build.make CMakeFiles/NightlySubmit.dir/build
.PHONY : NightlySubmit/fast

#=============================================================================
# Target rules for targets named NightlyTest

# Build rule for target.
NightlyTest: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyTest
.PHONY : NightlyTest

# fast build rule for target.
NightlyTest/fast:
    $(MAKE) -f CMakeFiles/NightlyTest.dir/build.make CMakeFiles/NightlyTest.dir/build
.PHONY : NightlyTest/fast

#=============================================================================
# Target rules for targets named NightlyUpdate

# Build rule for target.
NightlyUpdate: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 NightlyUpdate
.PHONY : NightlyUpdate

# fast build rule for target.
NightlyUpdate/fast:
    $(MAKE) -f CMakeFiles/NightlyUpdate.dir/build.make CMakeFiles/NightlyUpdate.dir/build
.PHONY : NightlyUpdate/fast

#=============================================================================
# Target rules for targets named stpproject

# Build rule for target.
stpproject: cmake_check_build_system
    $(MAKE) -f CMakeFiles/Makefile2 stpproject
.PHONY : stpproject

# fast build rule for target.
stpproject/fast:
    $(MAKE) -f source/CMakeFiles/stpproject.dir/build.make source/CMakeFiles/stpproject.dir/build
.PHONY : stpproject/fast

# Help Target
help:
    @echo "The following are some of the valid targets for this Makefile:"
    @echo "... all (the default if no target is provided)"
    @echo "... clean"
    @echo "... depend"
    @echo "... Continuous"
    @echo "... ContinuousBuild"
    @echo "... ContinuousConfigure"
    @echo "... ContinuousCoverage"
    @echo "... ContinuousMemCheck"
    @echo "... ContinuousStart"
    @echo "... ContinuousSubmit"
    @echo "... ContinuousTest"
    @echo "... ContinuousUpdate"
    @echo "... Experimental"
    @echo "... ExperimentalBuild"
    @echo "... ExperimentalConfigure"
    @echo "... ExperimentalCoverage"
    @echo "... ExperimentalMemCheck"
    @echo "... ExperimentalStart"
    @echo "... ExperimentalSubmit"
    @echo "... ExperimentalTest"
    @echo "... ExperimentalUpdate"
    @echo "... Nightly"
    @echo "... NightlyBuild"
    @echo "... NightlyConfigure"
    @echo "... NightlyCoverage"
    @echo "... NightlyMemCheck"
    @echo "... NightlyMemoryCheck"
    @echo "... NightlyStart"
    @echo "... NightlySubmit"
    @echo "... NightlyTest"
    @echo "... NightlyUpdate"
    @echo "... edit_cache"
    @echo "... install"
    @echo "... install/local"
    @echo "... install/strip"
    @echo "... list_install_components"
    @echo "... package"
    @echo "... package_source"
    @echo "... rebuild_cache"
    @echo "... test"
    @echo "... stpproject"
.PHONY : help

#=============================================================================
# Special targets to cleanup operation of make.

# Special rule to run CMake to check the build system integrity.
# No rule that depends on this can have commands that come from listfiles
# because they might be regenerated.
cmake_check_build_system:
    $(CMAKE_COMMAND) -H$(CMAKE_SOURCE_DIR) -B$(CMAKE_BINARY_DIR) --check-build-system CMakeFiles/Makefile.cmake 0
.PHONY : cmake_check_build_system 
```

====================================================

CMakeCCompiler.cmake 文件包含：

```
SET(CMAKE_C_COMPILER "/usr/bin/gcc")
SET(CMAKE_C_COMPILER_ARG1 "")
SET(CMAKE_C_COMPILER_ID "GNU")
SET(CMAKE_C_PLATFORM_ID "Linux")

SET(CMAKE_AR "/usr/bin/ar")
SET(CMAKE_RANLIB "/usr/bin/ranlib")
SET(CMAKE_LINKER "/usr/bin/ld")
SET(CMAKE_COMPILER_IS_GNUCC 1)
SET(CMAKE_C_COMPILER_LOADED 1)
SET(CMAKE_COMPILER_IS_MINGW )
SET(CMAKE_COMPILER_IS_CYGWIN )
IF(CMAKE_COMPILER_IS_CYGWIN)
  SET(CYGWIN 1)
  SET(UNIX 1)
ENDIF(CMAKE_COMPILER_IS_CYGWIN)

SET(CMAKE_C_COMPILER_ENV_VAR "CC")

IF(CMAKE_COMPILER_IS_MINGW)
  SET(MINGW 1)
ENDIF(CMAKE_COMPILER_IS_MINGW)
SET(CMAKE_C_COMPILER_ID_RUN 1)
SET(CMAKE_C_SOURCE_FILE_EXTENSIONS c)
SET(CMAKE_C_IGNORE_EXTENSIONS h;H;o;O;obj;OBJ;def;DEF;rc;RC)
SET(CMAKE_C_LINKER_PREFERENCE 10)

# Save compiler ABI information.
SET(CMAKE_C_SIZEOF_DATA_PTR "")
SET(CMAKE_C_COMPILER_ABI "")

IF(CMAKE_C_SIZEOF_DATA_PTR)
  SET(CMAKE_SIZEOF_VOID_P "${CMAKE_C_SIZEOF_DATA_PTR}")
ENDIF(CMAKE_C_SIZEOF_DATA_PTR)

IF(CMAKE_C_COMPILER_ABI)
  SET(CMAKE_INTERNAL_PLATFORM_ABI "${CMAKE_C_COMPILER_ABI}")
ENDIF(CMAKE_C_COMPILER_ABI)

SET(CMAKE_C_HAS_ISYSROOT "")

SET(CMAKE_C_IMPLICIT_LINK_LIBRARIES "")
SET(CMAKE_C_IMPLICIT_LINK_DIRECTORIES "") 
```

==================================================== =================

谢谢！！

# asp.net - 使用哪种服务来主持小组项目？

> ID：11548407
> 
> 赞同：0
> 
> 时间：2012-07-18T18:56:48.837
> 
> 标签：asp.net, .net, visual-studio, c#-4.0

好吧，我打算将我的教授分配给 GitHub 或 CodePlex 之类的服务的小组项目托管。我什至在 CodePlex 上注册了一个帐户以开始使用。我感到困惑的是，对于像我这样的初学者或我的团队成员来说，哪个最容易使用。此外，Visual Studio 2010 Professional 使用哪个源代码控制系统？任何链接或教程都会对我有所帮助。

另外：个人项目使用哪个许可证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:08:28.623

如果您正在使用 VS Professional 并在团队中工作，那么我建议您尝试使用带有 CodePlex 的[Team Foundation Server 。](http://codeplex.codeplex.com/wikipage?title=Using%20TFS%20and%20Team%20Explorer%20with%20CodePlex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:00:42.710

[TortoiseGit](http://code.google.com/p/tortoisegit/)非常易于使用来管理 GitHub 存储库。

要将 Git 与 Visual Studio 集成，您可以尝试[Git Source Control Provider](http://gitscc.codeplex.com/)。

# mongodb - Mongo中的快速子字符串搜索

> ID：11548412
> 
> 赞同：4
> 
> 时间：2012-07-18T18:57:05.710
> 
> 标签：mongodb, substring

我们有一个 Mongo 数据库，其中包含大约 400,000 个条目，每个条目都有一个相对较短（< 20 个字符）的标题。我们希望能够对这些标题进行快速的子字符串搜索（足够快，以便能够在自动完成栏等内容中使用结果）。我们也只搜索前缀（标题是否以*substring*开头）。我们能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:58:38.097

如果您只进行前缀搜索，那么索引该字段就足够了。有根的正则表达式查询使用索引并且应该很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:59:04.523

Sergio 是正确的，但更具体地说，在其上的索引和不带 i（不区分大小写）标志的左根前缀将有效利用索引。事实上，这在文档中有所说明：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

如果您也想对查询进行基准测试，请不要忘记使用[.explain() 。](http://www.mongodb.org/display/DOCS/Explain)

# asp.net - 返回 IQueryable

> ID：11548413
> 
> 赞同：2
> 
> 时间：2012-07-18T18:57:10.607
> 
> 标签：asp.net, asp.net-mvc, pagedlist

我正在使用 pageList （由 troy goode 制作的那个），在他的例子中，他有

```
// in this case we return IEnumerable<string>, but in most
// - DB situations you'll want to return IQueryable<string>
private IEnumerable<string> GetStuffFromDatabase()
{
    var sampleData = new StreamReader(Server.MapPath("~/App_Data/Names.txt")).ReadToEnd();
    return sampleData.Split('\n');
} 
```

由于我使用的是我更改为的数据库`IQueryable`，但是，我不知道在里面写什么来从数据库中返回数据，我尝试将路径更改为 ~/App_Data/DatabaseName.sdf 但我明白了`sampleData.Split('\n');`

`cannot implicitly convert type string to system.linq.iqueryable<string>`

我怎么能改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:24:40.210

```
return sampleData.Split('\n').AsQueryable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:50:59.890

您的方法的返回类型是 IEnumerable 并且需要作为 Enumeration 返回

所以请这样做

```
return sampleData.Split('\n').AsEnumerable(); 
```

# javascript - 在数组中预加载图像（并等待它们下载完毕）

> ID：11548414
> 
> 赞同：0
> 
> 时间：2012-07-18T18:57:13.847
> 
> 标签：javascript, arrays, preloading

所以我遇到了另一个问题。

当我开始重做我正在处理的网页时，我想到了一个想法——为什么不让页面预加载材料，而在它这样做的时候，显示一个加载屏幕？好吧，我为此做了一个函数，但问题是，它开始做它应该做的事情，直到图像预加载的 open() 部分。它根本行不通。是因为我给它的 arguments[i] 部分导致它停在那里？有更好的方法吗？

```
function mainPageLoad() {
    var loadScreen = document.getElementById('pageload');
    loadScreen.innerHTML = "<p>Loading<span id='loadingWhat'>...</span></p><img src='images/loading.gif?v2'>";
    var loadspan = document.getElementById('loadingWhat');
    loadspan.innerHTML = " images";
    preloadImages(["images/logo.jpg"])
    //loadspan.innerHTML = " content";
    //preloadContent([""]);
}

function preloadImages() {
    var images = new Array();
    var imagesToLoad = arguments.length;
    document.writeln(imagesToLoad);
    var imagesLoaded = 0;
    document.writeln(imagesLoaded);
    for (i = 0; i < arguments.length; i++) {
        document.writeln("Loading images.");
        images[i] = new XMLHttpRequest();
        document.writeln("Made object");
        images[i].open("GET", arguments[i], true);
        document.writeln("Well, that worked.");
        images[i].send(null);
        document.writeln("Sent.");
        images[i].onreadystatechange = function() {
            document.writeln("Ready state change!");
            if (images[i].readystate == 4 && images[i].status == 200){
                imagesLoaded = imagesLoaded + 1;
                window.alertln("We have loaded another image.");
                window.alertln("Image" + String(imagesLoaded) + "out of" + String(imagesToLoad));           
            }
        }
    }
}

window.onload = init; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:00:17.330

这是一种更简单的方法来预加载图像，并在图像完成加载后调用回调，相关的先前问题/答案：[支持事件的图像预加载器 javascript](https://stackoverflow.com/questions/8264528/image-preloader-javascript-that-supports-events/8265310#8265310)。

# c# - 从多个线程调用 LINQ-to-SQL 中的 SubmitChanges()

> ID：11548416
> 
> 赞同：2
> 
> 时间：2012-07-18T18:57:16.800
> 
> 标签：c#, asp.net, multithreading, linq-to-sql, task-parallel-library

我在 SO 上找到了类似的线程，但似乎没有一个能解决我的确切问题。

基本上，我使用 .NET 任务并行库编写了一个简单的生产者/消费者应用程序。生产者每隔 30 秒检查一次数据库表中的记录。当它找到记录时，它会将它们添加到`BlockingQueue`. 同时，我用来`Task.Factory`对记录执行一些操作。

当即将对记录执行操作时，我想更新记录上的字段以指示它已经在队列中。这样一来，如果生产者在最后一批仍在处理时检查新记录，它就不会将旧条目添加回队列。

`SubmitChanges()`我遇到的这个问题是从多个线程调用我的数据上下文。我*想*我正在参加比赛，但我不确定。

我得到的错误是`The operation cannot be performed during a call to SubmitChanges.`

**生产者代码：**

```
BlockingCollection<QueuedMessage> workItems = new BlockingCollection<QueuedMessage>();

System.Threading.Timer workItemTimer = new System.Threading.Timer((s) =>
    {
        var items = repository.GetQueuedMessages();

        foreach (var item in items)
        {
            workItems.Add(item);
        }

    }, null, 0, 30000); 
```

**消费者守则：**

```
while (workItems.TryTake(out queuedMessage, Timeout.Infinite, new CancellationToken()))
{
    Task.Factory.StartNew((t) =>
        {
            var messageToSend = (QueuedMessage)t;

            repository.MarkQueuedMessageAsProcessing(messageToSend.Id);

            ...

            Do some stuff with messageToSend

            ....

    }, queuedMessage);
} 
```

**存储库代码：**

```
var entity = DataContext.QueuedMessages.SingleOrDefault(m => m.Id == messageId);
entity.ProcessingStarted = true;
DataContext.SubmitChanges(); 
```

当我使用一些排队的消息运行它时，`DataContext.SubmitChanges()`将开始抛出我之前提到的消息的异常，`The operation cannot be performed during a call to SubmitChanges.`

就像我说的，我*认为*这是因为我从多个线程调用它，但我不知道如何解决这个问题。

我尝试将有问题的行更改为：

```
ThreadPool.QueueUserWorkItem(s => DataContext.SubmitChanges()); 
```

但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:21:20.127

您的存储库应为每次更新创建一个新的数据上下文。每一个都应该只用于[一个工作单元](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx#remarksToggle)。试试这个：

```
public static void ProcessingStarted(int messageId)
{
    using (DataContext dc = new DataContext())
    {
        var update = dc.QueuedMessages.SingleOrDefault(m => m.Id == messageId);
        if (update != null)
        {
            update.ProcessingStarted = true;
            dc.SubmitChanges();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:51:38.323

您需要提交更改吗？如果生产者每次都使用相同的 DataContext 实例，那么它应该返回一个已经在内存中的实例。

如果您在每次检查时使用新的 DataContext，则在新的 DataContext 上执行每个 SubmitChanges，尽管您可能需要将其与原始上下文分离并将其附加到新的上下文中，如果您想将其提交为已修改。

# sql - 填写缺失日期 DB2 SQL

> ID：11548419
> 
> 赞同：0
> 
> 时间：2012-07-18T18:57:27.510
> 
> 标签：sql, db2, gaps-and-islands

我的初始查询如下所示：

```
select process_date, count(*) batchCount
from T1.log_comments 
order by process_date asc; 
```

我需要能够对缺少的周末进行一些快速分析，但想知道是否有一种快速的方法来填写`process_date`.

我已经在[这里](https://stackoverflow.com/questions/5059380/filling-gaps-in-dates-returned-from-database-pure-sql-solution-possible)看到了解决方案，但很好奇 db2 中是否隐藏着任何魔法，只需对我的原始查询稍作修改就可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:10:17.023

*注意：未经测试，根据我对 SQL Server/Oracle 的了解构建它。我想这给了你一个想法：* *现在在 DB2 上进行了修改和测试*

```
WITH MaxDateQry(MaxDate) AS 
(
    SELECT MAX(process_date) FROM T1.log_comments 
),
MinDateQry(MinDate) AS 
(
    SELECT MIN(process_date) FROM T1.log_comments 
),
DatesData(ProcessDate) AS 
(
    SELECT MinDate from MinDateQry
    UNION ALL
    SELECT (ProcessDate  + 1 DAY) FROM DatesData WHERE  ProcessDate < (SELECT MaxDate FROM MaxDateQry)
)
SELECT  a.ProcessDate, b.batchCount
  FROM  DatesData a LEFT JOIN 
    (
        SELECT process_date, COUNT(*) batchCount
        FROM T1.log_comments 
    ) b
    ON a.ProcessDate = b.process_date
ORDER BY a.ProcessDate ASC; 
```

# css - Div 未扩展到 100%（默认行为）

> ID：11548420
> 
> 赞同：0
> 
> 时间：2012-07-18T18:57:28.220
> 
> 标签：css, html, width

我有一个奇怪的问题......

默认情况下，Div 应该扩展到 100% 的可用空间，但事实并非如此。

我不明白发生了什么，即使我把 display:block 它表现得像自动宽度（相对于内容）。

我很感激任何帮助。

提前致谢。

[http://jsfiddle.net/T3arP/](http://jsfiddle.net/T3arP/)

我需要达到的效果是让带有绿色边框的框绝对或固定在其容器的顶部，这样您就可以滚动关键字但标题会保留在那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:06:08.607

当您绝对定位某些东西时（使用`position: absolute`or `position: fixed`）`width: auto`不再将其扩展到容器的宽度。实际确定宽度的规则很复杂*。这就是为什么许多人认为在这些元素（即绝对定位的元素）上设置特定宽度是一种很好的做法。

[*您可以在http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width)了解这些规则）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T19:10:09.760

如前所述，一旦你绝对定位一个元素，它在某种意义上就失去了父级的标签关联。所以你也许可以做这样的事情。

[http://jsfiddle.net/T3arP/1/](http://jsfiddle.net/T3arP/1/)

# c# - Entity Framework 4.1 未向 SQL Server Express 数据库添加任何行

> ID：11548422
> 
> 赞同：5
> 
> 时间：2012-07-18T18:57:32.013
> 
> 标签：c#, wpf, entity-framework, sql-server-express

使用带有 SQL Server Express`.mdf`数据库的 Entity Framework 4.1。

出于测试目的，我试图在 WPF 应用程序中使用实体模型对 SQL Server Express 数据库执行 CRUD 操作。

我是这个概念的新手，我按照视频教程进行了编码

我创建了一个非常简单的表的实体模型。我在cs文件中编写了简单的代码来使用以下代码向数据库添加一行

```
testEntities db = new testEntities();
TestTable tb = new TestTable();
tb.Name = txtName.Text;
tb.Email = txtMail.Text;
db.TestTables.AddObject(tb);
db.SaveChanges(); 
```

但是，如果我回去检查数据库，则不会添加任何数据。请告诉我这里出了什么问题？？

这是我的连接字符串

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="testEntities" 
         connectionString="metadata=res://*/DBModel.csdl|res://*/DBModel.ssdl|res://*/DBModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\test.mdf;integrated security=True;connect timeout=30;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:15:41.730

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将复制`.mdf`文件（从`DataDirectory`正在运行的应用程序的输出目录），并且**很可能**，您的`INSERT`工作正常 - 但最终您只是查看了**错误的`.mdf`文件**！

如果您想坚持使用这种方法，请尝试在`.SaveChanges()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查正在运行的应用程序目录中的文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`TestDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=TestDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# bash - Gedit 在新窗口中打开，然后在新选项卡中打开

> ID：11548423
> 
> 赞同：0
> 
> 时间：2012-07-18T18:57:37.467
> 
> 标签：bash, tabs, gedit, new-window

我要做的是让 Gedit 打开一个新窗口，然后在该新窗口中打开一个新选项卡，同时 Gedit 已经打开。我正在写的脚本有点大，570 行，所以这里是一个例外。

```
File1="test"
File2="test2"
function Gedit() {
    local newwindow

    if [ "$2" == "yes" ]; then
         newwindow="--new-window"
    fi

    gedit $newwindow $1 & # & is Very Important b/c of KVIrc
}
function FunctionA {
    Gedit $a "yes"
    Gedit $b 
}

FunctionA 
```

我想通了，它最后是与号 (&)。但如前所述，这非常重要，因为当我运行我的脚本时，我会在 KVIrc 中运行它。如果我取出 &，KVIrc 会等待 Gedit 完全关闭。我尝试使用 ,`-s`和`--name`gedit `--sm-client-id`。我也尝试过使用`coproc`，这真的没有用。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:26:42.427

好的，这就是我解决它的方法：

```
function OpenWithGedit() {
local newwin=$1
shift
local outfile ofile i
local newwindow

#splits $@ into two parts
ofile=${@:1:$(($#/2))}
outfile=${@:$(($#/2+1)):$#}

if [ "$newwin" == "yes" ]; then
    newwindow="--new-window"
fi 

for i in $outfile
do
    SayE "Gedit" $i #echos $i with some format
done
gedit $newwindow $ofile &
} 
```

该命令的格式如下：

```
OpenWithGedit "yes" $File1 $File2 $File3 $File1Out $File2Out $File3Out 
```

您可以在其中拥有任意数量的 $Files。

# ios - 通过网络将应用程序部署到手机

> ID：11548426
> 
> 赞同：1
> 
> 时间：2012-07-18T18:57:46.167
> 
> 标签：ios, networking, xamarin.ios, monodevelop

我正在虚拟机上开发 iOS 应用程序，因此无法使用 USB 电缆在 iOS 设备上安装我的应用程序。是否可以通过网络将应用程序部署到我的设备？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:00:37.953

你可以使用像[TestFlight这样的东西](https://testflightapp.com)

# ruby - ruby 模块和类混淆

> ID：11548427
> 
> 赞同：0
> 
> 时间：2012-07-18T18:57:46.363
> 
> 标签：ruby, class, module

我正在学习红宝石，我试图弄清楚以下定义的含义：

```
class Rectangle::Square < Shape 
```

所以我知道 Square 是 Shape 的子类，但为什么是范围解析运算符呢？这通常用于从 ruby​​ 的模块中访问类和常量，但是这里有类定义，那么它怎么可能已经位于模块中呢？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:02:26.860

此定义“打开”`Rectangle`类/模块并向其添加一个新类，`Square`. 这或多或少相当于

```
class Rectangle
  class Square < Shape
  end
end 
```

我能想到的唯一区别是，如果`Rectangle`未定义，您的代码段将失败，而此代码段不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:34:02.140

除了代码在`Rectangle`未定义时失败之外，还有另一个问题：

在该`class Rectangle`块中，您可以通过 引用其他类`Square`。在它之外，您必须将其称为`Rectangle::Square`. 但是，如果将其定义为`class Rectangle::Square`，则必须将类称为`Rectangle::Square`. 命名空间中的所有其他类（和其他常量）也是如此`Rectangle`。您经常看到这种模式的原因是代码编写者希望避免完全限定嵌套类。外部模块（在这种情况下）通常`Rectangle`包含一些需要相互交互的类。

这也是你经常可以看到这样定义的规范的原因：

```
class Rectangle
  describe Square
  end
end 
```

这样你就可以通过做来构建一个正方形`Square.new`。如果是`describe Rectangle::Square`，那么您将需要完全限定它并执行`Rectangle::Square.new`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T19:03:25.377

这是同义词

```
module Rectangle
  class Square < Shape
  end
end 
```

# c# - 我需要将 FileNet 中的文件页面组合成 C# WPF 中的 tiff 格式

> ID：11548429
> 
> 赞同：1
> 
> 时间：2012-07-18T18:58:10.030
> 
> 标签：c#, tiff, filenet-panagon

此代码将从文件中获取文件的第一页`FileNet`并将其转换为 tiff。

```
string fileNm = fnDoc.GetCachedFile(1, "", 
                        IDMObjects.idmGetCachedFileOptions.idmDocGetOriginalFileName);
string name = fnDoc.Name;            
string onlyName = fnDoc.Name;

m_destFile = pathStart + docSubPath + name + ".tif";

File.Copy(fileNm, m_destFile, true);
File.SetAttributes(m_destFile, FileAttributes.Normal); 
```

相反，我该如何循环浏览页面，然后将所有 tiff 合并到一个包含多个页面的 tiff 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:01:44.743

GetCachedFile() 方法的第一个参数是您要获取的页面，因此您可以沿页数迭代文件。

您正在使用该代码执行的操作是将缓存文件的第一页从缓存复制到路径。

您也可以阅读这个问题，如何合并生成的 TIFF：

[将多个 TIFF 文件合并到一个 TIFF 文件中](https://stackoverflow.com/questions/5861060/merging-multiple-tiff-files-in-one-tiff-file)

# ms-access - DoCmd acCmdSelectRecord 给我运行时错误 3125

> ID：11548430
> 
> 赞同：1
> 
> 时间：2012-07-18T18:58:12.930
> 
> 标签：ms-access, vba, runtime-error

我正在构建一个相对简单的数据表样式表单来选择记录（将用于填充另一个表单）

该表单从具有多列的查询中提取。由于当用户想要做的只是选择一条记录时，突出显示字段和数据输入光标是违反直觉的，所以我在表单上的每个字段中添加了以下代码：

```
Private Sub Model_Enter()
    RunCommand acCmdSelectRecord
End Sub 
```

这适用于“模型”字段，但对于每个其他字段，它都会给我以下错误：

> 运行时错误 3125
> 
> " 不是一个有效的名称。确保它不包含无效字符或标点符号，并且它不是太长。

这种形式实际上没有其他任何事情发生，所以我不知道问题出在哪里，也不知道为什么代码对 Model 有效而对其他所有内容都无效。还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:01:33.850

我建议您使用 On Current 事件，而不是为每个控件编写代码。也可以使用条件格式和一些代码来突出显示记录。

# javascript - 逐行比较两个html表数据并使用jquery突出显示

> ID：11548431
> 
> 赞同：1
> 
> 时间：2012-07-18T18:58:12.777
> 
> 标签：javascript, jquery, grails, gsp

我已经创建了一个 GSP 页面，其中包含两个带有数据的动态表，现在我必须比较数据（内部 html），如果有任何差异，则在表 2 中突出显示。如何在客户端使用 JS/jquery 单击按钮？

表一是——

```
 <table class="table loadTable" id ="table1">
<thead>
<tr bgcolor="#f0f0f0">
<td nowrap=""><b>COLUMN_NAME</b></td>       
<td nowrap=""><b>DATA_TYPE</b></td>     
<td nowrap=""><b>IS_NULLABLE</b></td>       
<td nowrap=""><b>CHARACTER_MAXIMUM_LENGTH</b></td>      
<td nowrap=""><b>NUMERIC_PRECISION</b></td>
<td nowrap=""><b>COLUMN_KEY</b></td>
</tr>
</thead>
<tbody>
<tr>        
  <td nowrap="">CountryCode   </td>
  <td nowrap="">int   </td>
  <td nowrap="">YES   </td>
       <td nowrap="">NULL </td>
       <td nowrap="">10   </td>
  </tr>
  <tr>      
    <td nowrap="">Number   </td>
    <td nowrap="">varchar   </td>
    <td nowrap="">NO   </td>
    <td nowrap="">20   </td>
            <td nowrap="">NULL </td>
            <td nowrap="">PRI </td> 
       </tr><tr>        
    <td nowrap="">Type   </td>
    <td nowrap="">tinyint   </td>
    <td nowrap="">NO   </td>
            <td nowrap="">NULL </td>
            <td nowrap="">3   </td>
            <td nowrap="">PRI </td>     
        </tr>
    <tr>        
        <td nowrap="">Date   </td>
        <td nowrap="">smalldatetime   </td>
        <td nowrap="">NO   </td>            
        <td nowrap="">NULL </td>
        <td nowrap="">NULL </td>
    </tr>
</tbody> 
```

表 2 是——

```
 <table class="table loadTable" id ="table2">
  <thead>
    <tr bgcolor="#f0f0f0">
<td nowrap=""><b>COLUMN_NAME</b></td>
<td nowrap=""><b>DATA_TYPE</b></td>
<td nowrap=""><b>IS_NULLABLE</b></td>
<td nowrap=""><b>CHARACTER_MAXIMUM_LENGTH</b></td>
<td nowrap=""><b>NUMERIC_PRECISION</b></td>
<td nowrap=""><b>COLUMN_KEY</b></td>
    </tr>
</thead>
<tbody>
    <tr>            
            <td nowrap="">CountryCode</td>
            <td nowrap="">int</td>
            <td nowrap="">NO</td>
            <td nowrap="">NULL</td>
            <td nowrap="">10</td>
            <td nowrap=""></td>
        </tr>
        <tr>    
            <td nowrap="">PhoneNumber</td>
            <td nowrap="">varchar</td>
            <td nowrap="">NO</td>
            <td nowrap="">20</td>
            <td nowrap="">NULL</td>
            <td nowrap="">PRI</td>
        </tr>
<tr>        
            <td nowrap="">Type</td>
            <td nowrap="">tinyint</td>
            <td nowrap="">NO</td>
            <td nowrap="">NULL</td>
            <td nowrap="">3</td>
            <td nowrap="">PRI</td>
        </tr>
<tr>        
            <td nowrap="">EffectiveDate</td>
            <td nowrap="">datetime</td>
            <td nowrap="">NO</td>
            <td nowrap="">NULL</td>
            <td nowrap="">NULL</td>
            <td nowrap=""></td>
        </tr>
</tbody>
</table> 
```

如果我们单击以下按钮，则表 2 应突出显示任何与表 2 不匹配的数据。

```
<div style="align:right"><input type="submit" value="Compare IVR & TNS" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:22:32.677

我写了一个快速函数，只要行数始终相同并且用户不能删除一行，它就可以工作。在这种情况下，您应该将 id 添加到行中并按 id 或键比较行。

```
function compareTables(t1, t2){
var t2rows = t2.find('tbody > tr');
t1.find('tbody > tr').each(function(index){
    var t1row = $(this);
    var t2row = $(t2rows[index]);
    var t2tds = t2row.find('td');

    t1row.find('td').each(function(index){
        if($(this).text().trim() != $(t2tds[index]).text().trim() ){
            console.log('difference: table1:('+$(this).text()+')  table2:('+$(t2tds[index]).text()+')');
            //set row in error
            return;
        }
    });

});
} 
```

# mysql - 物化路径和SQL查询说明

> ID：11548437
> 
> 赞同：0
> 
> 时间：2012-07-18T18:58:50.507
> 
> 标签：mysql, sql, tree

我正在阅读这篇关于将树保存到数据库中的文章
[http://www.dba-oracle.com/t_sql_patterns_trees.htm](http://www.dba-oracle.com/t_sql_patterns_trees.htm) 但我不明白例如这个

```
select e1.ename from emp e1, emp e2
where e1.path like e2.path || '%'
and e2.ename = 'JONES' 
```

这是什么意思：`e1.path like e2.path || '%'`

我不明白在该查询中使用布尔运算符。我知道 '%' 在正则表达式中是 (.*) 。它看起来像我：`(e1.path == e2.path) or (e1.path == whateverIWant)`。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:00:11.900

`%`是类似 SQL 的表达式中的通配符，所以它意味着`e1.path`应该以 . 开头`e2.path`。

`e1.path`因此是 的孩子`e2.path`。

此查询检索employee 的所有下属`JONES`。

# iphone - UITableView 单元格背景就像在“音乐”应用程序中一样

> ID：11548438
> 
> 赞同：0
> 
> 时间：2012-07-18T18:58:58.063
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

> **可能重复：**
> [在 iPhone 上设置表格视图单元格的背景颜色](https://stackoverflow.com/questions/900094/setting-background-color-of-a-table-view-cell-on-iphone)
> [如何更改表格视图上的颜色替代单元格](https://stackoverflow.com/questions/5945615/how-to-change-the-color-alternate-cell-on-table-view)

我想要一个具有正常背景的单元格，而下一个具有一些很棒的背景的单元格，就像在这个屏幕截图中一样： ![在此处输入图像描述](../Images/477b183c90de420a4e91abd1235a7b87.png) 关于如何为无限数量的单元格实现这个漂亮和干净的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:05:37.450

嘶嘶声：

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if ((indexPath.row % 2) == 0) {
        [cell.contentView setBackgroundColor:[UIColor whiteColor]];
        [cell.textLabel setBackgroundColor:[UIColor whiteColor]];
    }
    else {
        [cell.contentView setBackgroundColor:[UIColor colorWithRed:243.0f/255.0f green:243.0f/255.0f blue:243.0f/255.0f alpha:1.0f]];
        [cell.textLabel setBackgroundColor:[UIColor colorWithRed:243.0f/255.0f green:243.0f/255.0f blue:243.0f/255.0f alpha:1.0f]];
    }
    cell.textLabel.text = [songArray objectAtIndex:indexPath.row];
    return cell;
} 
```

![在此处输入图像描述](../Images/efdc82aebb10be3c31eeb39f19848fb6.png)

# ios - 如何为 facebook ios sdk 设置 URLSchemes

> ID：11548439
> 
> 赞同：4
> 
> 时间：2012-07-18T18:58:58.110
> 
> 标签：ios, facebook-ios-sdk, url-scheme

我在这个问题上花了一整天的时间，经过数小时的谷歌搜索和调试后没有找到任何好的答案。我终于解决了这个问题，我将在这里分享。

设置 facebook-ios-sdk 的文档显示了如何设置一个 url 方案，用于在授权后将用户返回到您的应用程序。像fb12087732691这样的东西......

不幸的是，他们使用的是旧版本的 Xcode，图形如下所示：

![在此处输入图像描述](../Images/9d3e8d6b0490725cfe6bfc9b5b014692.png)

使用 Xcode 4+，它真正应该是这样的：

![在此处输入图像描述](../Images/1d2657967a73a27e37ccc149e5d9d146.png)

希望这可以挽救某人几个小时的生命！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T02:50:55.413

您的项目中有一个**AppName-Info.plist**文件。打开它，你会发现类似的东西。它对 Xcode4+ 是通用的（据我所知）。

# android - Android：高级渐变样式

> ID：11548442
> 
> 赞同：1
> 
> 时间：2012-07-18T18:59:07.803
> 
> 标签：android, linear-gradients, shapedrawable

*请原谅* 我试图让我的列表视图弹出一点图像的缺乏。我正在尝试的一个选项是为每个列表行的背景添加渐变。渐变具有三种颜色，默认情况下类似于以下结构：

***-- (起始颜色)
|
|
-- (中心颜色)
|
|
--（结束颜色）*** 

我希望它更像这样：

***-- (起始颜色)
|
-- (中心颜色)
|
|
-- (中心颜色)
|
--（结束颜色）*** 

不同之处在于中间有更多的中心颜色，并且渐变从非常接近末端开始。

有人可以给我一些指导吗？

**编辑**我试图尽可能远离图像，尽管我不反对尝试图像选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:28:22.513

据我所知，Android 目前不支持您所追求的渐变。A`LinearGradient`会给你最接近的结果，但没有办法在颜色上设置“重力”，颜色的数量限制为三种。

话虽如此，您可以轻松地在您喜欢的图像编辑软件中渲染出渐变并将其转换为[9-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)。垂直拉伸的区域将位于该图像的中间。这将使“中心颜色”填充大部分可用高度，并将开始和结束颜色保持在顶部和底部。

SDK 中包含一个[9-patch 工具，它有助于仅在 1 像素边框中进行绘制，并提供正在进行的工作的预览。](http://developer.android.com/tools/help/draw9patch.html)虽然它有它的缺点，所以我不会怪你使用其他一些成像软件。

# ember.js - Ember - 如何在控制器之间共享单例

> ID：11548448
> 
> 赞同：1
> 
> 时间：2012-07-18T18:59:37.580
> 
> 标签：ember.js

我有一个获取 url 的服务，需要创建为具有应用程序特定配置的单例。

我的几个控制器需要使用此服务。

如何在一个地方创建此服务，最好在应用程序中创建并在控制器之间共享，以便他们可以直接使用它？

我的模块被分成不同的文件，使用requirejs。

URLService.js

```
var urlService = URLService.create({config: {...} }) 
```

SomeController.js

```
var SomeController = Em.Controller.extend({ 
  service: null
}) 
```

应用：

```
App = Em.Application.create({
  SomeController: SomeController  <-- inject the urlService into SomeController.service
}) 
```

是否有这样做的内置方式或最佳实践？还是我在架构中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:25:18.880

您可以创建一个类似于您已经在做的基类，以及来自它的所有应用程序控制器`extend`，如下所示：`Controller``extend`

```
// the service
var urlService = URLService.create({config: {...} })

// the base controller class
var BaseController = Em.Controller.extend({ 
    service: null,
    init: function() {
        this._super();
        this.set('service', urlService);
    }
});

// your controllers inheriting from your base controller already with the service instance
var SomeController1 = BaseController.extend(...);
var SomeController2 = BaseController.extend(...); 
```

# facebook - glassdoor facebook 应用程序如何在新闻源故事中附加多个图像？

> ID：11548456
> 
> 赞同：1
> 
> 时间：2012-07-18T19:00:00.623
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我知道如何通过 fb api 发帖，而且我知道有关元标签的所有内容。但我无法通过附加多个用户图像将故事发布到新闻源。就像 glassdoor 应用程序一样。我要发布的新闻提要故事的一个示例是 - 用户在 appnamespace 上激活了 4 个连接（在单个新闻提要中附加了 4 个用户图像），还附加了一个示例作为图像屏幕截图。 ![在此处输入图像描述](../Images/83d2f2ca1d699781a419bf45a5da23fc.png)

# objective-c - Cocoa 中的分布式对象

> ID：11548458
> 
> 赞同：1
> 
> 时间：2012-07-18T19:00:03.290
> 
> 标签：objective-c, macos, cocoa, objective-c++, distributed-objects

我试图在我的应用程序中跨两个进程出售一个对象。但是，当我测试我的代码时，接收出售对象的进程只是阻塞。我或多或少地遵循了[http://www.mikeash.com/pyblog/friday-qa-2009-02-20-the-good-and-bad-of-distributed-objects.html](http://www.mikeash.com/pyblog/friday-qa-2009-02-20-the-good-and-bad-of-distributed-objects.html)上的示例代码。

下面是我的两个进程的代码：

```
/*
 * Description: Vends an object that the receiver can then access
 *              through the distributed object.
 */

#import <Cocoa/Cocoa.h>
#import <iostream>

using namespace std;

int main() {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    cout << "Starting vendor " << endl;

    NSMutableArray *mutable_array;
    [mutable_array addObject:@"Louis Lang"];
    [mutable_array addObject:@"John Doe"];

    NSConnection *connection = [NSConnection connectionWithReceivePort:[NSPort port] sendPort:nil];
    [connection setRootObject:mutable_array];
    [connection registerName:@"com.example.whatever"];

    [[NSRunLoop currentRunLoop] run];

    [pool drain];

    return 0;
} 
```

和“接收者”

```
/*
 * Description: Receives the vended object from the server
 *
 */

#import <Cocoa/Cocoa.h>
#import <iostream>

using namespace std;

int main() {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    cout << "Starting receiver." << endl;

    id theObject = (id)[NSConnection rootProxyForConnectionWithRegisteredName:@"com.example.whatever" host:nil];

    int the_count = [theObject count];

    NSLog(@"There are %i items in mutable_array", the_count);

    [pool drain];

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:47:23.813

您的代码大部分看起来都不错，至少是分布式对象部分。但：

```
NSMutableArray* mutable_array = [[NSMutableArray alloc] init];
[mutable_array addObject:@"Louis Lang"];
[mutable_array addObject:@"John Doe"]; 
```

我认为肯定会有所帮助。

如果您使用的是 Xcode 4.4+，也可以这样做：

```
NSArray* array = @[ @"Louis Lang", @"John Doe" ]; 
```

# java - 要获取的 SQL，如果不存在则插入新条目

> ID：11548459
> 
> 赞同：3
> 
> 时间：2012-07-18T19:00:04.007
> 
> 标签：java, mysql, sql, stored-procedures

我不确定这个问题是否适合 SQL、MySQL、存储例程甚至 JDBC 领域。基本上我想要一个看起来像这样的 SQL 函数：

```
INSERT IGNORE (id, data) INTO table
SELECT id FROM table WHERE `data` = data 
```

这需要通过原始 SQL 或存储的例程从 Java 启动。这看起来非常糟糕，因为如果`insert ignore`成功，它不应该立即跟进 SQL 查询来获取它刚刚插入的内容。请注意，`id`它将自动生成。做到这一点的最佳方法是对 SQL 查询的数量和可读性等有效吗？我真的不知道 INSERT IGNORE 的效率有多高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:09:21.507

您可以使用[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id), 有一点逻辑：

```
INSERT IGNORE ... INTO Table
SELECT IF(LAST_INSERT_ID() <> 0, LAST_INSERT_ID(), (SELECT id FROM table WHERE `data` = data)) 
```

（未经测试）

# c++ - 如何将函数包装器转换为模板？

> ID：11548463
> 
> 赞同：1
> 
> 时间：2012-07-18T19:00:22.493
> 
> 标签：c++, templates

我有几个非常相似的功能：

```
v8::Handle<v8::Value> jsAudioPlay(const v8::Arguments &args) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) audio->play(get(args[0], 0));
    return args.This();
}

v8::Handle<v8::Value> jsAudioPause(const v8::Arguments &args) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) audio->pause();
    return args.This();
}

v8::Handle<v8::Value> jsAudioLoop(const v8::Arguments &args) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) audio->loop(get(args[0], -1));
    return args.This();
}

v8::Handle<v8::Value> jsAudioVolume(const v8::Arguments &args) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) audio->volume(get(args[0], 1.0f));
    return args.This();
} 
```

我已经阅读了几个小时关于 C++ 模板的文章，并且我确信可以摆脱这些函数并用模板替换它们。我设想最终结果将是这样的：

```
typedef Handle<Value> (*InvocationCallback)(const Arguments& args);

template <class T> InvocationCallback FunctionWrapper ...;
template <class T> FunctionWrapper FunctionReal ...;
template <class T, class arg1> FunctionWrapper FunctionReal ...;
template <class T, class arg1, class arg2> FunctionWrapper FunctionReal ...; 
```

我意识到有人问过类似的问题，但我在上面的模板中找不到模板的示例。

* * *

**2012 年 7 月 21 日更新**

模板：

```
template <class T> v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args) {
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) t->volume(args[0]->NumberValue());
    return args.This();
} 
```

用法：

```
audio->PrototypeTemplate()->Set("Volume", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio>)); 
```

现在，如果我能弄清楚如何传递`&Audio::volume`给模板，我就会做生意。

* * *

**2012 年 7 月 24 日更新**

有关我如何解决此问题的信息，请参阅我的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:31:26.757

欢迎来到 lambda 的魔力。

```
template<typename F> v8::Handle<v8::Value> jsAudio(const v8::Arguments &args, F&& f) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) f(audio, args);
    return args.This();
}
int main() {
    jsAudio(..., [&](Audio* audio, const v8::Arguments &args) {
        audio->play(get(args[0], 0));
    });
} 
```

例如。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T16:34:51.640

我的模板：

```
template <class T, class RT, RT(T::*f)()> v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args) {
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) (t->*f)();
    return args.This();
}
template <class T, class RT, class A0, RT(T::*f)(A0)> v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args) {
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) (t->*f)(jsConvert<A0>(args[0]));
    return args.This();
}
template <class T, class RT, class A0, class A1, RT(T::*f)(A0, A1)> v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args) {
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) (t->*f)(jsConvert<A0>(args[0]), jsConvert<A1>(args[1]));
    return args.This();
} 
```

用法：

```
audio->PrototypeTemplate()->Set("Play", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio, Audio*, int, &Audio::play>));
audio->PrototypeTemplate()->Set("Pause", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio, Audio*, &Audio::pause>));
audio->PrototypeTemplate()->Set("Loop", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio, Audio*, int, &Audio::loop>));
audio->PrototypeTemplate()->Set("Volume", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio, Audio*, float, &Audio::volume>)); 
```

现在我需要弄清楚最后两个步骤：可变数量的参数，以及正确模板`jsConvert`以返回所需的类型`<A0>`。

# android - MapView.getZoomLevel() 中的 NullPointerException

> ID：11548475
> 
> 赞同：0
> 
> 时间：2012-07-18T19:01:15.520
> 
> 标签：android, nullpointerexception, android-mapview

尝试从我的 MapView 获取当前缩放级别时，我变得非常奇怪 NullPointerException。问题是这种情况并非每次都发生，而是发生在**`getZoomLevel()`**函数内部的某个地方。调查此函数的源代码表明这只是一个 getter 函数，并且 NullPointerException 不应该在这里发生。mapView 本身在发生并调用其他 MapView 接口时不为空（例如`getProjection()`工作正常）。

这是我的代码结构的简要背景：

我有一定数量的项目的地图视图和 ItemizedOverlay。当我有新数据时 - 我需要合并彼此接近的项目。起作用的参数之一`coalesce()`是当前缩放级别，理论上我应该能够从我的 MapView 中获得。

我试图`coalesce()`在 uiThread 内部进行调用，但有时我仍然会收到 NullPointerException。

我设法通过在我的自定义地图视图中跟踪最后一个已知的 zoomLevel 并在`getZoomLevel`失败时返回它来解决这个问题：

```
public final int getCurrentZoomLevel() 
{
    try 
    {
        return this.getZoomLevel();
    } catch (Exception ex) 
    {
        ex.printStackTrace();
        return lastZoomLevel;
    }
} 
```

但是，我仍然很好奇它为什么会发生。它发生在不同的设备和不同的 Android 版本上。

这是堆栈跟踪：

```
07-18 11:31:22.435: W/System.err(8054): java.lang.NullPointerException
07-18 11:31:22.435: W/System.err(8054):     at com.google.android.maps.MapView.getZoomLevel(MapView.java:1094)
07-18 11:31:22.435: W/System.err(8054):     at com.inrix.lib.view.CustomMapView.getCurrentZoomLevel(CustomMapView.java:195)
07-18 11:31:22.435: W/System.err(8054):     at com.inrix.lib.mapitems.incidents.IncidentMapItemOverlay.performCoalesceInternal(IncidentMapItemOverlay.java:109)
07-18 11:31:22.435: W/System.err(8054):     at com.inrix.lib.mapitems.MapItemsOverlay$4.run(MapItemsOverlay.java:448)
07-18 11:31:22.435: W/System.err(8054):     at java.lang.Thread.run(Thread.java:1096)
07-18 11:31:22.435: W/System.err(8054):     at com.inrix.lib.mapitems.MapItemsOverlay.recoalesce(MapItemsOverlay.java:450)
07-18 11:31:22.442: W/System.err(8054):     at com.inrix.lib.mapitems.MapItemsOverlay$2.run(MapItemsOverlay.java:281)
07-18 11:31:22.442: W/System.err(8054):     at android.os.Handler.handleCallback(Handler.java:587)
07-18 11:31:22.442: W/System.err(8054):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-18 11:31:22.442: W/System.err(8054):     at android.os.Looper.loop(Looper.java:123)
07-18 11:31:22.442: W/System.err(8054):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-18 11:31:22.442: W/System.err(8054):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 11:31:22.442: W/System.err(8054):     at java.lang.reflect.Method.invoke(Method.java:521)
07-18 11:31:22.442: W/System.err(8054):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-18 11:31:22.442: W/System.err(8054):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-18 11:31:22.442: W/System.err(8054):     at dalvik.system.NativeStart.main(Native Method) 
```

调用`coalesce`看起来像：

```
protected void performCoalesceInternal(IOnCoalesceCompleteListener callback) 
{
    if (callback != null) 
    {
        callback.onCoalesceComplete(coalescer.coalesce(
                mapItemsController.getRawItemsCollection(), 
                MapItemType.Incident,  
                mapView.getCurrentZoomLevel(), 
                mapView.getProjection()));
    }
} 
```

请注意，我有 NullPointerException 仅`getZoomLevel()`随叫随到。`mapView.getProjection()`工作正常。

活动创建/初始化阶段：

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ........

    this.setContentView(R.layout.content_inrixmap_activity);

    // Initialize map.
    this.mapView = (CustomMapView) findViewById(R.id.map_view);

    ........

    // Create overlays.
    this.currentLocationOverlay = new CurrentLocationOverlay(this.mapView);
    this.trafficTileOverlay = new TrafficTileOverlay(new TrafficTileManager(this, this.trafficTileHandler));
    this.cameraOverlay = new CameraMapItemOverlay(this, this.mapView, this);
    this.incidentsOverlay = new IncidentMapItemOverlay(this, this.mapView, this);

    // Add overlays to map.
    this.mapView.addOverlay(this.trafficTileOverlay);
    this.mapView.addOverlay(this.currentLocationOverlay);
    this.mapView.addOverlay(this.cameraOverlay);
    this.mapView.addOverlay(this.incidentsOverlay);
    this.mapView.preLoad();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:26:21.240

您确定在将新数据添加到 Itemized Overlay 后调用了 populate 吗？

祝你好运，路易斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:29:53.623

显然这个问题有点特定于我的代码。显然，android 缓存了要由回调处理的 mapView 的实例。当我的活动重新创建时，回调使用有效但未初始化的旧实例。

通过在重新创建 mapView 时取消所有活动的网络请求来解决

# mysql - MySql 按 COUNT 排序并列出总计数

> ID：11548479
> 
> 赞同：2
> 
> 时间：2012-07-18T19:01:31.507
> 
> 标签：mysql

我正在使用此代码从我的数据库中进行计数和排序：

```
$qry = "select entertainer, count(*) from final_results group by entertainer order by count(*) desc"; 
```

我得到了正确的结果，因为它按顺序或受欢迎程度列出了所有内容。

我想要的是要显示的前 5 个结果，每个结果都有一个计数，然后是所有结果的总计数。

例如

> 最高响应 (10)
> 第二响应 (8)
> 第三响应 (6)
> 等等...
> 
> 总数 = 56

我将不胜感激任何帮助和建议。

谢谢，

约翰 C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:31:27.553

您可以使用 获得总数[`WITH ROLLUP`](http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html)，但这不适用于[`LIMIT 5`](http://dev.mysql.com/doc/refman/5.6/en/select.html)您想要的，以便仅获取前五个结果。*（编辑：）*正如评论中所讨论的，它也不适用于排序。

因此，您要么必须获取所有结果，而不仅仅是前 5 个结果，并在应用程序中对它们进行排序，要么使用两个不同的查询，可能使用`UNION`@RedFilter 建议的方式在服务器端合并。但是，如果您执行两个单独的查询，我个人宁愿从客户端应用程序中分别发出每个查询，因为稍后将总数从前五名中拆分出来是太多的工作而收效甚微。

要获取所有结果，您可以使用

```
select entertainer, count(*)
from final_results
group by entertainer with rollup 
```

要进行两次不同的提取，您将使用

```
select entertainer, count(*)
from final_results
group by entertainer
order by count(*) desc
limit 5 
```

和

```
select count(*)
from final_results 
```

如果你想要两个都在一个联合中，你可以这样做

```
(select 1 as unionPart, entertainer, count(*) as count
 from final_results
 group by entertainer
 order by count(*) desc
 limit 5)
union all
(select 2 as unionPart, 'Total count', count(*) as count
 from final_results)
order by unionPart asc, count desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:04:58.263

```
select entertainer, count
from (
    (select entertainer, count(*) as count, 1 as sort
    from final_results 
    group by entertainer 
    order by count(*) desc
    limit 5)

    union all 

    (select 'Total count', (select count(*) from final_results), 2 as sort)
) a 
order by sort, count desc 
```

# extjs4 - Extjs 组合框在下拉列表中显示方形项目符号

> ID：11548481
> 
> 赞同：1
> 
> 时间：2012-07-18T19:01:33.830
> 
> 标签：extjs4

这是创建组合框的配置：

```
{
    xtype: 'combobox',
    id: 'state',
    fieldLabel: 'State',
    displayField: 'name',
    valueField: 'abbr',
    store: states,
    typeAhead: true,
    labelWidth: 35,
    padding: '0 10 0 0'
} 
```

下拉列表在文本前面显示一个方形项目符号 - 这是我不想要的，滚动列表时的突出显示不会突出显示整行，而是项目符号之前的空格，项目符号和第一个字母没有突出显示。我正在使用 ext-all-gray.css。我假设我需要覆盖一种样式，但无法弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:07:23.617

我找到了解决方案 - 创建一个新模板并使用 extjs 类作为选择器：

```
 tpl: '<div><tpl for="."><div class="x-boundlist-item">{name}</div></tpl></div>',
 itemSelector: 'div.x-boundlist-item', 
```

# ruby-on-rails - Rails 是否必须延迟加载所有内容？或者是吗？

> ID：11548488
> 
> 赞同：3
> 
> 时间：2012-07-18T19:02:13.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我注意到这样的事情时：在我的规范中，一个简单的方法需要 0.15 秒，例如：

```
class String
  def to_slug
    (self.dup).gsub(/["']/, '').gsub(/@/, 'at').gsub(/&/, 'and').parameterize
  end
end 
```

我开始问自己发生了什么事，所以在没有参数化的情况下对方法进行基准测试后，我认为这是参数化内部的问题，不一定是方法本身的问题，但是，对于它的加载方式，在我看来它是懒惰的当像这样的猴子补丁应该急切加载时加载，它会导致延迟，它不应该存在 IMO。所以我的问题是，Rails 真的懒惰地加载包含参数化的文件吗？有没有办法说服 Rails 急切地将补丁加载到 String 和其他 stdlib 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:47:26.883

调用`config.threadsafe!`你的`config/environments/test.rb`应该强制所有代码在启动时加载。请注意，这将设置`cache_classes`为`true`，因此不要在`development`环境中使用它，否则您将丢失代码重新加载。

另一种方法是更改`config.eager_load_paths`​​以包含您要加载的目录。

### 资源：

*   Aaron Patterson`config.threadsafe!`在他的文章[Removing config.threadsafe 中解释道！](http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html).
*   [Rails 的配置指南](http://guides.rubyonrails.org/configuring.html)有很多关于每个选项的信息。

# facebook - FB Share 按钮不再显示

> ID：11548493
> 
> 赞同：2
> 
> 时间：2012-07-18T19:02:21.743
> 
> 标签：facebook

更新：按钮又回来了：[Facebook 分享按钮：它正式死了吗？](https://stackoverflow.com/questions/11537996/facebook-share-button-is-it-officially-dead)

* * *

我有一个奇怪的问题。Facebook 分享按钮已停止显示。使用的代码是

```
<p style="margin-top:-50px; margin-left:300px; width:600px;">Join us on Facebook
  <a name="fb_share" type="button" share_url="https://example.com/"></a>
  <script src="https://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
  </script>
</p>
```

自从我被指派处理该网站以来，代码没有更改。任何想法为什么会发生这种情况？HTML 在那里。但是没有按钮出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T13:50:19.943

Facebook 不再使用它。

而是使用下面的代码。

并在打开`<body>`标签后粘贴

```
<div id="fb-root"></div>{literal}
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOUR APP ID HERE";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>{/literal} 
```

在您希望它出现的任何地方，添加以下代码：

```
<fb:share-button type="box_count"></fb:share-button> 
```

确保您更改了 App ID，您必须先创建应用程序

# python-2.7 - 通过 pyral 更新 Rally 中的缺陷时出现“无法解析输入流”错误

> ID：11548494
> 
> 赞同：2
> 
> 时间：2012-07-18T19:02:24.573
> 
> 标签：python-2.7, rally

我正在使用 Python Toolkit for Rally REST API 来更新我们的 Rally 服务器上的缺陷。我已经确认我能够与服务器取得联系，并通过获取当前缺陷列表进行身份验证。我在更新它们时遇到了问题。我正在使用 Python 2.7.3 和 pyral 0.9.1 并请求 0.13.3。

此外，我将 'verify=False' 传递给 Rally() 调用，并对 restapi 模块进行了适当的更改以弥补这一点。

这是我的测试代码：

```
import sys
from pyral import Rally, rallySettings

server = "rallydev.server1.com"
user = "user@mycompany.com"
password = "trial"
workspace = "trialWorkspace"
project = "Testing Project"
defectID = "DE192"

rally = Rally(server, user, password, workspace=workspace,
              project=project,     verify=False)
defect_data = { "FormattedID" : defectID,
                "State"       : "Closed"
              }
try:
    defect = rally.update('Defect', defect_data)
except Exception, details:
    sys.stderr.write('ERROR: %s \n' % details)
    sys.exit(1)

print "Defect %s updated" % defect.FormattedID 
```

当我运行脚本时：

```
[temp]$ ./updefect.py  
ERROR: Unable to update the Defect 
```

如果我更改 RallyRESTResponse 函数中的代码以在找到时打印出 self.errors 的值（rallyresp.py 的第 164 行），我会得到以下输出：

```
[temp]$ ./updefect.py   
[u"Cannot parse input stream due to I/O error as JSON document: Parse error: expected '{' but saw '\uffff' [ chars read = >>>\uffff<<< ]"]  
ERROR: Unable to update the Defect 
```

我确实在这里找到了另一个听起来可能与我的问题有关的问题：
[App SDK: Erorr parsing input stream when running query](https://stackoverflow.com/questions/8450975/app-sdk-erorr-parsing-input-stream-when-running-query)

你能提供任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:10:20.533

您所看到的可能与使用的 Python 2.7.3 / requests 0.13.3 版本无关。您看到的错误消息也是使用基于 Javascript 的 App SDK 和 .NET Toolkit for Rally 报告的（这里有 2 份关于 SO 的单独报告）以及至少一个使用 Python 2.6.6 并请求 0.9.2 的人。似乎正在 Rally WSAPI 后端生成错误措辞。Rally'ers 的当前评估是，这是一个与编码相关的问题。问题是编码问题的根源。
我还没有能够重现这个问题，已经尝试了几个版本的 Python（2.6.x 和 2.7.x）、几个版本的请求以及 Linux、MacOS 和 Win7。

由于您似乎对深入研究代码并在调试模式下运行感到非常自在，因此尝试的一种方法是捕获有缺陷的 POST URL 和 POST 数据，并尝试通过基于浏览器的 REST 客户端（如“简单 REST 客户端”或海报并观察您是否在 WSAPI 响应中收到相同的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:21:29.543

在尝试向缺陷添加附件时，我看到了与 pyral 类似的行为。

通过调试和登录，我在标准输出上看到了这个请求：

```
2012-07-20T15:11:24.855212   PUT   https://rally1.rallydev.com/slm/webservice/1.30/attachmentcontent/create.js?workspace=workspace/123456789 
```

然后是日志文件中的json：

```
2012-07-20 15:11:24.854 PUT attachmentcontent/create.js?workspace=workspace/123456789
                            {"AttachmentContent": {"Content": "iVBORw0KGgoAAAANSUhEUgAABBQAAAJrCAIAAADf2VflAAAXOWlDQ... 
```

然后在日志文件中（在与 restapi.py 进行一些斗争以解决 unicode 错误之后）：

```
2012-07-20 15:11:25.260 404 Cannot parse input stream due to I/O error as JSON document: Parse error: expected '{' but saw '?' [ chars read = >>>?<<< ] 
```

值得注意的是**404**错误代码。此外，“无法解析输入流...”错误消息不是来自 pyral，而是来自 Rally 的服务器。所以 pyral 正在向 Rally 发送 Rally 无法理解的东西。

我还记录了响应标头，这可能是一个线索：

```
{'rallyrequestid': 'qs-app-03ml3akfhdpjk7c430otjv50ak.qs-app-0387404259', 'content-encoding': 'gzip', 'transfer-encoding': 'chunked', 'expires': 'Fri, 20 Jul 2012 19:18:35 GMT', 'vary': 'Accept-Encoding', 'cache-control': 'no-cache,no-store,max-age=0,must-revalidate', 'date': 'Fri, 20 Jul 2012 19:18:36 GMT', 'p3p': 'CP="NON DSP COR CURa PSAa PSDa OUR NOR BUS PUR COM NAV STA"', 'content-type': 'text/javascript;  charset=utf-8'} 
```

请注意“内容编码”：“gzip”。我怀疑请求模块（我在 Macos Python 2.6 中使用 0.13.3）是 gzip 编码其 PUT 请求，但 Rally API 服务器没有正确解码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:45:49.853

将 Michael 对 GZIP 编码的观察与另一位精明的 Rally 客户在该问题上处理支持案例的观察配对 - 如果未明确定义内容类型，则某些版本的请求模块似乎将默认为 GZIP 压缩。

修复方法是在 pyral 的 config.py 的 REST Headers 部分中将 content-type 设置为 application/json：

```
RALLY_REST_HEADERS = \
{
  'X-RallyIntegrationName'     : 'Python toolkit for Rally REST API',
  'X-RallyIntegrationVendor'   : 'Rally Software Development', 
  'X-RallyIntegrationVersion'  :       '%s.%s.%s' % __version__,
  'X-RallyIntegrationLibrary'  : 'pyral-%s.%s.%s' % __version__,
  'X-RallyIntegrationPlatform' : 'Python %s' % platform.python_version(),
  'X-RallyIntegrationOS'       : platform.platform(),
  'User-Agent'                 : 'Pyral Rally WebServices Agent',
  'Content-Type'               : 'application/json',
} 
```

# python - Python从字符串中清理html

> ID：11548499
> 
> 赞同：1
> 
> 时间：2012-07-18T19:02:32.307
> 
> 标签：python, parsing

有没有办法转义字符串中的所有引号和双引号？

例如，如果我有这样的字符串：

`Hi my name is 'Shelby"`

有没有办法对此进行预处理以转义该字符串？

编辑：

也许这不是解决问题的最佳方法。所以这就是我真正想要做的，我有一个分析`swf`文件的工具，（即`swftools`-> `swfdump`）但有时，一些恶意`swf`文件会包含`html`标签，我将这些结果输出到页面。那么有没有办法`html`在python中清理这些标签？

字符串示例：

```
（3 个字节）动作：Push Lookup16:443 ("title_txt")
 ( 0 字节) 动作：GetMember
 ( 6 bytes) action: Push Lookup16:444 ("htmlText") Lookup16:445 (" Please check your Log In info. ")
 （0字节）动作：SetMember
 （14 字节）动作：推送 int:2 int:1 register:1 Lookup:30 ("login_mc")

```

对于说它`Please check your log info`应该说的部分：`font color = '#ff0000'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:51:16.767

如果你只是要进行 HTML 清理，你可以试试这个：

如果您想添加更多转义类型，这可能是最简单的方法：

```
def escape(htmlstring):
    escapes = {'\"': '&quot;',
               '\'': '&#39;',
               '<': '&lt;',
               '>': '&gt;'}
    # This is done first to prevent escaping other escapes.
    htmlstring = htmlstring.replace('&', '&amp;')
    for seq, esc in escapes.iteritems():
        htmlstring = htmlstring.replace(seq, esc)
    return htmlstring 
```

`&`这会将, `'`, `"`, `<`, 和的每个实例替换为`>`正确的 HTML 转义码。

有关 HTML 转义的更多信息：

[维基百科 HTML 页面](http://en.wikipedia.org/wiki/HTML#Character_and_entity_references)

[可以想象的每一次逃脱](http://www.hybridelephant.com/computer/tutorial/spechar.html)

逃脱快乐！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T07:12:24.483

如果您使用[Jinja](http://jinja.pocoo.org/)或[Genshi](http://genshi.edgewall.org/)之类的模板，他们已经为您做到了。*除非您明确*告诉它不要，否则嵌入到页面中的所有文本都将被正确转义。在构建网页时，使用模板引擎可能是个好主意。

# css - Shopify：无法从另一台服务器加载外部样式表

> ID：11548500
> 
> 赞同：2
> 
> 时间：2012-07-18T19:02:36.023
> 
> 标签：css, shopify

[https://friends-with-you.myshopify.com/](https://friends-with-you.myshopify.com/)

我正在尝试开发我的第一个 shopify 主题。我正在尝试加载托管在另一台服务器上的样式表，但未加载 CSS。如果我将该 CSS 直接复制并粘贴到 shopify 主题中的文件中，它就可以工作。

```
 <link type="text/css" rel="stylesheet" href="http://fwy.pagodabox.com/magic/themes/fwy/fwy.css" /> 
```

我在上面的 URL 做错了什么，为什么没有加载 css？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T21:24:27.833

你能通过 http 和 https 加载你的 CSS 文件吗？如果是这样，请将您的标签更改为如下所示：

```
<link type="text/css" rel="stylesheet" href="//fwy.pagodabox.com/magic/themes/fwy/fwy.css" /> 
```

这样，无论用户使用`http://yourstore.com`或访问`https://yourstore.com`，他们都将使用他们所在的协议获得样式表（并且您不会收到任何混合内容警告）。

更多背景知识：http: [//paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

在 IE7 和 IE8 下，在标签中使用 this`<link>`将导致您的内容被提取两次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T21:20:05.577

更改链接标签以使用安全 URL：

```
<link type="text/css" rel="stylesheet" href="https://fwy.pagodabox.com/magic/themes/fwy/fwy.css" />
                                                 ^ 
```

您现在使用的 URL 本身就可以正常工作，但由于您通过 SSL 浏览 Shopify 商店，因此许多 Web 浏览器会犹豫是否通过不安全的连接加载 CSS。

我刚刚检查并 pagodabox 通过 SSL 很好地提供 CSS 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:27:34.417

在普通的 HTML 文档中，可以从任何地方加载样式表，只要它们存在并且您可以通过键入 URL 来加载它们（我可以）。

我将页面视为左侧带有徽标的两个导航栏。在每个项目上都有悬停状态过渡到颜色背景。虽然，当我加载页面时，Chrome 警告我不要加载所谓的不安全内容。在加载之前，我只看到 Times New Roman 中的文本。我认为这是你的问题。

我使用 WordPress 的主题和样式表（大部分）。我不明白为什么你不能把样式表和主题的其余部分放在一起。

总的来说，答案是肯定的（通常），但在这种情况下，浏览器可能会认为它不安全，因此不会加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:33:16.450

是的你可以！但是将样式表托管在您的服务器/其他文件所在的位置会更快。如果您计划包含来自其他地方的样式表，您可能会遇到该服务器关闭/忙碌的问题，因此您的主题将不会按要求显示。正如@Blieque 提到的，某些浏览器可能会质疑外部内容，从而导致向用户/用户代理弹出不必要的警告。

# java - 如何确定字符来源是否来自键盘（在读取文件内容时）

> ID：11548502
> 
> 赞同：0
> 
> 时间：2012-07-18T19:02:41.243
> 
> 标签：java, opencsv

我正在解析 CSV 文件，有时可能会遇到非法文件，例如*jpeg*或*pdf*等...

因此，当我解析文件内容时，我想确定字符是否合法（来自键盘），例如*5 & % ！*等等...

但不是这样的字符：*� ַ*和其他奇怪的字符，可以在*图像* *pdf*和其他文件中找到

我不想检查文件的 mime 类型，我不想添加几个第三方 jar 来解决这个问题，我想通过查看其字符来确定正在解析的文件是否有效

类似的东西`Character.isLetterOrDigit`可以判断这个字符是从键盘输入的字符还是一些奇怪的字符，比如*◌ַ*

*还有一件事我需要能够接受各种语言的字符（不仅是英语），所以我想避免做简单的字符比较`c <= 32 && c >= 126`等等......

* * *

顺便说一句，我正在寻找这个问题[CSV file validation with Java中描述的问题的答案](https://stackoverflow.com/q/644539/617373)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:11:33.110

如果您正在寻找内置功能，我不知道有一个。但是，您可以查看`char`的 ascii 值并根据自己的喜好进行过滤。查看[此 ASCII 表](http://www.asciitable.com/)中的值。

你可以说，比如ascii值是`<= 32 && >= 126`，你就不会接受；否则，您将：

```
public boolean isValid(char c) {
    if (c <= 32 && c >= 126) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

如果您对整行 / 进行操作`String`，则可以使用它来去除有效字符并确定是否保留任何无效字符：

```
public boolean isValid(String s) {
    return s.replaceAll("\\w|\\p{Punct}", "").length() == 0;
} 
```

# iphone - 导航控制器（及其所有视图）仅是纵向的。我怎样才能让他们只风景？

> ID：11548516
> 
> 赞同：0
> 
> 时间：2012-07-18T19:03:45.563
> 
> 标签：iphone, ios, cocoa-touch, ipad, storyboard

> **可能重复：**
> [横向模式仅适用于 iPhone 或 iPad](https://stackoverflow.com/questions/2647786/landscape-mode-only-for-iphone-or-ipad)

我正在制作一个仅限 iPad 的应用程序，我只想在整个过程中保持横向。

我对 iOS 编程*非常*陌生，并且正在使用 StoryBoard 方法来创建界面。

当我第一次设置应用程序时，我选择了一个视图并单击按钮使其仅是横向的。我发现这只会让它以横向启动，但不会阻止用户手动旋转。

所以，我发现我必须这样做：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
        if (interfaceOrientation == UIDeviceOrientationLandscapeLeft ||  interfaceOrientation ==  UIDeviceOrientationLandscapeRight) 
        {
           return YES;
        }
        return NO;
    } 
```

为了防止用户手动旋转它。

现在，我创建了一个导航控制器和一个设置为根视图控制器的常规视图。我还在该视图中添加了一个按钮。

我的问题是我的应用程序似乎仅在第一次启动时是横向的（字面意思是闪烁横向），但随后仅在导航控制器中是纵向的。

我还发现为导航控制器和 Storyboard 界面中的第一个视图控制器选择了“方向：横向”。

即使我将设备旋转到横向，应用程序也不会旋转。即使所有设置仅适用于横向，它似乎也停留在纵向。

如何使我的应用程序仅横向而不是其当前的纵向状态？

**编辑：我实际上找到了自己的解决方案。**

似乎链接到导航控制器的视图未链接到仅设置横向代码的类文件。

我所做的只是在 Storyboard 界面中选择 View Controller，单击右侧边栏上的“Show Identity Inspector”按钮并将类设置为我的 ViewController 文件的名称，其中代码：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

曾是。

简而言之，我的视图控制器没有链接到视图控制器类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:14:18.233

回来`YES`，`NO`不是很推荐。

但是，返回`UIDeviceOrientationLandscapeLeft`应该使您的应用“仅限横向”：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

如果这不起作用，请导航到您的`Info.plist` ![Info.plist 文件](../Images/a12b8d61edaffb783f680f60ac8c85ae.png)

并用和添加`Supported interface orientations`一行。`Landscape (left home button)``Landscape (right home button)`

![行的](../Images/3ba6e5e3db736fa6b26e2680d8d434c5.png)

`Landscape`此外，我建议在 *Attributes Inspector*中将 view(s) Orientation 更改为。

![景观](../Images/67b58574172e4ff88609263a9696530c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:10:10.557

设置您的返回值：

```
return NO; 
```

如果您使用的是最新的 xcode，请从项目选项中设置方向。否则使用项目信息 plist 设置方向，支持的界面方向并将其设置为横向（左主页按钮） - 删除其余数组键。

# jquery - 带有 jQ uery Parallax 的 Buggy 滚动

> ID：11548519
> 
> 赞同：1
> 
> 时间：2012-07-18T19:04:01.197
> 
> 标签：jquery, html, css, scroll, parallax

在页面上：*[链接删除]*我正在使用[https://github.com/richardshepherd/Parallax-Scrolling/](https://github.com/richardshepherd/Parallax-Scrolling/)插件。滚动是锯齿状和跳跃的有什么原因吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:25:48.473

删除重复的 jQuery 文件和大图像文件后，问题就解决了（感谢 @MrOBrian）。

# actionscript-3 - AS3 中的补间

> ID：11548523
> 
> 赞同：1
> 
> 时间：2012-07-18T19:04:09.387
> 
> 标签：actionscript-3, flash, actionscript, tween

我听说过多种方法可以在 AS3 中对对象进行补间；我听说人们谈论 TweenLite 和 TweenMax 是解决这类问题的方法。但是，我迷失了整个想法，有人可以向我解释一下 TweenLite 和 TweenMax 是如何工作的，以及它们具有的功能吗？如果没有，您能否给我链接一个网站，该网站提供有关如何有效使用它们的良好信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:10:47.857

您必须小心使用 Greensock 产品。如果您打算将代码用于商业产品，则必须为许可证付费。而且是年费，不是一次性付款。

实际上有免费的选项，包括补间 (http://code.google.com/p/tweener/) 和 Flash/AS3 附带的补间。Tweener 不再更新，但仍然可以完成工作。

阅读文档或搜索教程是明确的第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:49:10.807

如评论中所述，如果您在生产工作中使用 Greensock，则必须支付年度许可费。

您可以使用 Flash 程序附带的常规补间选项来完成所有补间需求，并且/或者您也可以使用 AS2/AS3 代码为对象设置动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:08:50.840

我会使用 GTween，它是在 MIT 许可下获得许可的。我以前用过，很好用！

# html - 中心导航栏并添加顶部/底部边框

> ID：11548524
> 
> 赞同：0
> 
> 时间：2012-07-18T19:04:09.650
> 
> 标签：html, css, wordpress, navbar

我想在[这个站点](http://blueboxluxe.com/)上（自动）居中导航栏。另外，我需要有一个 1px 边框顶部和 1 像素边框底部，以扩展大约 70% 的导航区域。

完成后它应该看起来像这个模型：

![屏幕](../Images/ce27456915d3395036b5b2421b04b0b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:16:22.860

看看这个小提琴[http://jsfiddle.net/qZTAt/](http://jsfiddle.net/qZTAt/)

关键是这段代码：

```
nav {
    border-top: 1px solid #fff;
    border-bottom: 1px solid #fff;
    margin: 0 15%;
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:19:29.950

删除 li 标签上的浮动，并在 #navigation 上添加`text-align: center;`. 您的浮动使您的父母的高度为 0，这反过来又不允许您拥有边界。这解决了这两个问题。从那里，只需添加`border-top: 1px solid white; border-bottom: 1px solid white;`到您的 ul 即可获得您的台词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:07:35.673

尝试使用`margin:0 auto; padding:0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:41:43.860

是的，我将迟到参加这个聚会（有一个已经回答的问题！）只是为了添加我会做的事情。它基于此技术[here](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)

[http://jsfiddle.net/rabmcnab/GSSQx/](http://jsfiddle.net/rabmcnab/GSSQx/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T08:52:13.657

```
<body>
<header>
<h1 class="font"> Heading</h1>
<nav>
<ul> 
```

```
<style> body {
  font-family: 'Poiret One', cursive;
  font-weight: bold;
  font-size: 20px;
}
.font {
  font-family: 'Poiret One', cursive;
}
header {
  background-color: aqua;
  padding: 40px 0px;
}
ul {
  list-style-type: none;
}
li {
  display: inline-block;
  padding: 0 40px;
  margin: 0 auto;
  text-align: center;
}
nav {
  border-top: thin solid white;
  border-bottom: thin solid white;
  width: 50%;
  margin: 0 auto;
}
h1 {
  text-align: center;
  margin-top: -10px;
  color: white;
  font: 40px/0 arial;
  padding: 40px 0;
}
li:hover {
  color: #fff;
  cursor: pointer;
}
</style>
```

```
<link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">

<body>
  <header>
    <h1 class="font"> Heading</h1>
    <nav>
      <ul>
        <li>Wedding</li>
        <li>Engagement</li>
        <li>Services</li>
      </ul>
    </nav>

  </header>

</body>

</html>
```

```
 <li>Wedding</li>
    <li>Engagement</li>
    <li>Services</li>
</ul>
</nav> 
```

# mysql - 仅从目标到源添加新值的最佳方法

> ID：11548527
> 
> 赞同：1
> 
> 时间：2012-07-18T19:04:12.933
> 
> 标签：mysql, database

我有两张桌子。table1（源）和 table2（目标）。当且仅当 table1 中不存在该记录时，我希望将 table2 中的整个记录​​复制到 table1。我使用以下语句：

```
INSERT INTO test.dest
SELECT * 
FROM test.source
WHERE NOT EXISTS(SELECT * 
                 FROM test.dest
                 WHERE (source.DomainName=dest.hostnmae)
                 ); 
```

我的问题：有没有另一种更好的方法来加快这个过程？

# java - Java Jericho 超链接解析

> ID：11548530
> 
> 赞同：0
> 
> 时间：2012-07-18T19:04:17.577
> 
> 标签：java, parsing, jericho-html-parser

我试图找出一种方法来获取网页中的所有超链接-除非它们位于锚标记（）中。

为此，我正在使用 Jericho 解析器。

我最初的方法是区分 `List<Element> elementList = source.getAllElements();`and `getAllElements(HTMLElementName.A)`，但其他元素也可能包含其中的锚链接，所以我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:08:05.440

我推荐你使用[Jsoup](http://jsoup.org/)进行 Html 处理。

这是一个如何获取所有链接的示例（= `a`-tag with `href`-attribute）：

```
Document doc = Jsoup.connect("http:// - link here -").get(); // Connect to website and parse its html
Elements links = doc.select("a[href]"); // Select all 'a'-tags' with 'href'-attribute

for( Element element : links ) // iterate over all links (example)
{
    // process element
} 
```

**文档：**

*   [选择器 API（DOM API 也可用）](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)
*   [食谱*（示例）*](http://jsoup.org/cookbook/)
*   [列出链接`(Example)`](http://jsoup.org/cookbook/extracting-data/example-list-links)
*   [JavaDoc](http://jsoup.org/apidocs/)

顺便提一句。你能再解释一下吗？

> 除非它们在锚标记中

# javascript - 有没有办法在 TestComplete 中自动格式化（Javascript）代码？

> ID：11548538
> 
> 赞同：2
> 
> 时间：2012-07-18T19:04:57.827
> 
> 标签：javascript, formatting, code-formatting, testcomplete

与 Netbeans 中的 ALt-Shift-F 非常相似，是否可以在 TestComplete 的 ide 中正确执行此操作？不确定这是否可行，或者是否有人可以在不离开 TestComplete 窗口的情况下想到自动格式化的解决方法。

我正在尝试使以下解决方案与[http://jsbeautifier.org/](http://jsbeautifier.org/)一起用于 TestComplete 中的 javascript / Jscript 代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:01:50.160

好问题！

没有内置功能。因此，我们不应该期望任何解决方案都是 100% 方便的 - 修改当前脚本编辑器内容（如果可能的话）并不是一项简单的任务。所以，无论你做什么，它仍然是某种妥协。

一般来说，任务分为三个方面：

1.  获取当前单位代码。

2.  格式化代码。

3.  将代码放回单元。

根据我的理解，第 1 项和第 3 项只能通过创建一个 TestComplete 插件来完成 - 访问项目节点的编辑器并不是一件容易的事情。

更新：愚蠢的我！有一种方法可以访问脚本编辑器代码 - 我已经更新了以下部分。

[脚本扩展](http://support.smartbear.com/viewarticle/26408/)可以帮助我们避免切换到不同的应用程序：

*   我们以脚本扩展的形式创建一个自定义检查点，并将其安装到 TestComplete。结果，我们在工具栏上获得了一个按钮，我们可以单击该按钮来调用我们的代码。

*   在设计时动作中，我们调用一些读取编辑器内容的代码，然后使用外部代码格式化功能，并用格式化代码替换编辑器内容。

看到其他 TestComplete 用户可以建议的实现会非常有趣！首先，我发布了一个解决方案，其中包括使用外部网站来格式化 VBScript 代码 ( [http://www.vbindent.com/](http://www.vbindent.com/) )。我知道这篇文章的开头可能是使用 JScript，但我还没有找到 JScript 格式化程序。

我的解决方案是一个简单的脚本扩展。我这里不能发文件，所以我把两个Script Extension文件的代码贴出来：

说明文件：

```
<!-- Description.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<ScriptExtensionGroup>
  <Category Name="Checkpoints">
    <ScriptExtension Name="VBScript Code Indent" Author="SmartBear Software" Version="0.1" HomePage="smartbear.com">
      <Script Name="VBIndent.js">
        <DesignTimeAction Name="Indent Current VBScript Unit" Routine="DesignTimeExecute"/>
      </Script>
      <Description>
        Indents VBScript code in the currently active unit.
      </Description>
    </ScriptExtension>
  </Category>
</ScriptExtensionGroup> 
```

代码文件：

```
// VBIndent.js
function DesignTimeExecute()
{
  if (CodeEditor.IsEditorActive)
  {
    var newCode = IndentVBSCode_Through_VBIndent(CodeEditor.Text);
    if (null == newCode)
      return;
    CodeEditor.Text = newCode;
  }
}

function IndentVBSCode_Through_VBIndent(codeToIndent)
{
  var URL_VBIndent = "http://www.vbindent.com/?indent";

  var httpObj = Sys.OleObject("MSXML2.XMLHTTP");

  httpObj.open("POST", URL_VBIndent, false);
  httpObj.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
  httpObj.send("thecode=" + escape(codeToIndent));

  var responseText = httpObj.responseText;

  // Extract the indented code from the response
  var rx = /<textarea name=\"thecode\".*?>((.*\n)*?)<\/textarea>/;
  matches = rx.exec(responseText);
  if (null == matches)
  {
    return null;
  }
  codeIndented = matches[1];
  return codeIndented;
} 
```

创建这些文件后，将它们放在“\Bin\Extensions\ScriptExtensions\VBIndent”之类的位置，然后单击“文件|安装脚本扩展|重新加载”，您将在自定义中看到一个新的“缩进当前 VBScript 单元”项工具栏上的检查点下拉按钮。单击该元素将格式化当前活动编辑器中的 VBScript 代码。

因此，这是为了清楚地了解解决方案的外观。欢迎提出更好的建议！分享你的意见！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-26T07:33:48.280

供参考

我弄完了。根据你的帖子。

JSFormat.tcx

[https://drive.google.com/uc?export=download&id=0B1x_73bHRc2Jcm8wbTJ2dUpZQTQ](https://drive.google.com/uc?export=download&id=0B1x_73bHRc2Jcm8wbTJ2dUpZQTQ)

安装扩展复制附件 JSFormat.tcx 到 C:\Program Files (x86)\SmartBear\TestComplete 10\Bin\Extensions\ScriptExtensions

要使用查看下一张图片：

[https://drive.google.com/uc?export=download&id=0B1x_73bHRc2Jc3RuLXFpTnlCSnc](https://drive.google.com/uc?export=download&id=0B1x_73bHRc2Jc3RuLXFpTnlCSnc)

问候

# ruby-on-rails - Rails 3.2 + Facebook 身份验证 + CSRF 失败

> ID：11548539
> 
> 赞同：5
> 
> 时间：2012-07-18T19:04:59.373
> 
> 标签：ruby-on-rails, heroku, facebook-oauth

这是我在尝试通过 facebook 登录时看到的错误，我总是看到该错误。似乎无法摆脱它：

> 无法从 Facebook 授权您，因为“检测到 Csrf”。

我放了一个跳过：

```
skip_before_filter :verify_authenticity_token 
```

在 Omniauth 回调上，但我仍然收到错误消息。这在本地和 prod (heroku) 环境中都是如此。我已经设置了heroku环境变量。任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T12:56:07.007

我在同一天遇到了同样的问题！！我认为这是一个宝石更新或类似的东西，但根本不是。通过深入调试，我发现omniauth“回调阶段已启动”。被叫了两次。

这是由于愚蠢的双重初始化

> 提供者：脸书，......

一个在 config/initializers/devise.rb 和另一个初始化器中。

我希望它会给你一个提示来找到你的错误

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T02:38:17.090

我发现问题在于 gem 太新并且将 STATE 标头传递给 facebook，这是 fb 不想要的。我回滚了omniauth-facebook gem版本，它工作了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:49:33.123

您是否发送 p3p 标头可能会添加...

```
before_filter :set_p3p
private

def set_p3p
  headers['P3P'] = 'CP="ALL DSP COR CURa ADMa DEVa OUR IND COM NAV"'
end 
```

到您的应用程序控制器

# c++ - 在析构函数中调用函数是一种好习惯吗？

> ID：11548543
> 
> 赞同：1
> 
> 时间：2012-07-18T19:05:21.667
> 
> 标签：c++, destructor

假设有一个对象的析构函数为：

```
anObject::~anObject()
{
    _functionCalledfromDestructor=1; //this sets the flag = 1
    functionCall(); //this function does something different than usual
                    //on seeing the flag
} 
```

我的问题：

这种在析构函数中编码的风格/方法是一个好习惯吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T19:08:35.580

像这样的“隐藏频道”总是一个坏主意。函数的行为不应该依赖于不可见的状态。您可以给函数一个参数，然后在析构函数中传递一个值，在其他任何地方传递另一个值。如果您愿意，可以为更常见的情况使用默认值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T19:07:35.220

> 这种在析构函数中编码的风格/方法是一个好习惯吗？

如果函数根据调用它的位置做了两件不同的事情，那么*你有两个函数，而不是一个*。让这两个函数实际上是两个函数，你不需要问这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T19:09:33.863

一般来说，没有。我认为你最好做这样的事情：

```
class anObject 
{
private:
  void doSomethingInternal(bool fromDestructor) {...}
public:
  void doSomething() {doSomethingInternal(false);};
  virtual ~anObject() { doSomethingInternal(true); };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:10:20.120

Calling functions inside a destructor is commonly not considered a good practise, as there is the possibility that an exception is thrown. This leads to not correctly cleaned up memory and the behaviour of exceptions in the destructor is undefined.

Here is more information about throwing exceptions in the destructor:

[SP on throwing in the destructor](https://stackoverflow.com/questions/130117/throwing-exceptions-out-of-a-destructor)

In your case, a well defined clean up via a public interface is a whole better way to go. You could for example provide a `Dispose` method that does the clean-up.

Consider something like the following (in pseudocode):

```
public:
    void Dispose()
    {
        bool isDestructing = true;
        functionCall(isDestructing);
    } 
```

# javascript - 检索动态生成的 html 表的所有值

> ID：11548551
> 
> 赞同：0
> 
> 时间：2012-07-18T19:06:03.010
> 
> 标签：javascript, jquery, html, javascriptserializer, dynamic-html

我在显示模式对话框窗口中显示了一个 html 表，html-body 有几个 div，每个 div 有几个表，其中 tr 和 td。

用户将更新输入标签中的条目，因此我需要捕获更改。

一个这样的 div 如下所示。如何在单击按钮时检索所有这些值。我听说过 serialize() 方法。它是否适用于所有标签类型，“插入”、“选择”、“选项”等？

```
<div>
  <table>
    <tr><td></td><td></td><td></td>
    </tr>
  </table>
  <table>
    <tr><td></td><td></td>
    </tr>
    <tr><td></td><td></td><td></td><td></td>
    </tr>
  </table>
  <table>
    <tr><td></td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:28:30.747

抱歉，以伪代码方式编写我的解决方案：

//我创建了一个div容器然后循环遍历所有的div

//然后使用以下方法之一检索值

```
 $("classname > div[id]").each(function(){

      var a=   document.getElementsByName("name of the tag");   //by name
      var b=   document.getElementById("id of the tag");      //by id
      var c=   $("input[class='"+trd_id+"']:checked").val();     // for radio button

    }); 
```

// 按 div 计数循环并警告值。解决了我的问题

# jsp - 如何将任何动作类的任何属性获取到 jsp 页面..？

> ID：11548552
> 
> 赞同：1
> 
> 时间：2012-07-18T19:06:02.740
> 
> 标签：jsp, struts2, action

我有两个jsp页面。`one.jsp`和`two.jsp`。上面`one.jsp`有一个带有提交按钮的表单。用户提交表单，表示`find.action`执行操作，成功后用户导航到`two.jsp`。`find.action`映射到 struts.xml 并定义成功结果。`find.action`用行动类行动说`FindMyString`。`FindMyString`有一个属性说`String mystring = "Hello from Action class";`我想在 two.jsp 上显示“mystring”属性的值。

请通过提供合适的编码提出一些方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:14:56.467

您的操作需要一个 getter 来公开需要在 JSP 中显示的任何信息。因此，首先在您的操作中创建一个`getMyString()`方法。然后，您可以使用以下任一方法在 JSP 中输出值：

## OGNL

```
<s:property value="myString"/> 
```

## JSTL

```
<c:out value="${action.myString}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:12:15.737

您可以使用 OGNL 访问正在运行的字段。

这是一个帮助您入门的教程[http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-ognl-expression-language-example-1.html](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-ognl-expression-language-example-1.html)

这是 OGNL [http://struts.apache.org/2.0.11.2/docs/ognl.html的文档](http://struts.apache.org/2.0.11.2/docs/ognl.html)

# css - 网站在除 IE 之外的其他浏览器中看起来不错

> ID：11548555
> 
> 赞同：0
> 
> 时间：2012-07-18T19:06:07.853
> 
> 标签：css, internet-explorer

在我的[主页上](http://www.heatherkirk.net)，我的作品列在三行列中。它在除 Internet Explorer 之外的所有浏览器上看起来都非常好。在 IE 中，左边的行应该在中间，行下面的行应该是最左边的行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:23:37.813

您的 HTML 有点混乱，这可能是 Internet Explorer 出现问题的原因。您有两个`<div>`具有相同 id ( `row2`) 的标签。我认为这是 IE 显示的其他浏览器不显示的内容，这会弄乱您的列。

看起来您复制并粘贴了一段代码两次。

这看起来是额外的代码：

```
<a title="Angry Walk Cycle - Made in Maya" href="http://vimeo.com/43512708" rel="prettyPhoto">

        <div id="row2">
        <ul> 
        <li class="notactive"></li></ul></div></a> 
```

从代码中删除它可以让我在 IE 9 中正确显示。

# javascript - HTML5 历史禁用前进按钮

> ID：11548558
> 
> 赞同：15
> 
> 时间：2012-07-18T19:06:17.047
> 
> 标签：javascript, jquery, html, google-chrome, history.js

我正在使用 HTML5 History API 编写一个单页 javascript 应用程序。应用程序通过 Ajax 加载内容并在内部使用屏幕堆栈在前景屏幕上维护状态信息。

**我想使用后退按钮启用导航，但我不想启用前进按钮。**

一些快速的信息：

*   用户应该只能返回，不能前进
*   按浏览器后退按钮关闭当前页面屏幕用户打开并重新加载上一个
*   项目仅针对最新版本的 Chrome，因此其他浏览器的实现并不重要
*   我只使用本机 JavaScript 和 jQuery，我想在没有 History.js 的情况下这样做

当我加载一个新屏幕时，我运行以下行：

```
history.pushState(screenData, window.document.title, "#"); 
```

我通过 jQuery 绑定到 popstate 事件：

```
$(window).bind("popstate", function(event) {
    if (event.originalEvent.state != null) {
        // Logic that loads the previous screen using my screen stack
    }
}); 
```

我的应用程序的历史管理正在运行，但是当我返回时，前进按钮被启用。我需要弄清楚如何从事件中删除`history`数据`popstate`。

我可以用 replaceState 做到这一点吗？我不知道该怎么做...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T20:43:35.270

**坏部分**

要真正禁用前进按钮，您必须能够删除浏览器历史记录，这是所有 javascript 实现都不允许的，因为它会允许站点删除整个历史记录，这永远不会符合用户的利益。

**好部分**

这有点棘手，但我想如果你想做自定义历史，它可能会起作用。您可以`pushState`在`popstate`事件中使用，使您的实际页面成为最顶层的历史条目。我假设你处理历史的方式，你的窗口永远不会卸载。这使您可以自己跟踪用户历史记录：

```
var customHistory = []; 
```

`history.pushState(screenData, window.document.title, "#");`像以前一样推送您加载的每个页面。只有您也将状态添加到自定义历史记录中：

```
history.pushState(screenData, window.document.title, "#");
customHistory.push({data: screenData, title: window.document.title, location: '#'}); 
```

现在，如果您有一个`popstate`事件，您只需弹出自定义历史并将其推送到最顶部的条目：

```
window.onpopstate = function(e) { 
  var lastEntry = customHistory.pop();
  history.pushState(lastEntry.data, lastEntry.title, lastEntry.location);
  // load the last entry
} 
```

或者在 jQuery 中

```
$(window).on('popstate', function(e) {
  var lastEntry = customHistory.pop();
  history.pushState(lastEntry.data, lastEntry.title, lastEntry.location);
  // load the last entry
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-10-02T13:14:01.633

接受的答案解决了禁用前进按钮的问题，但创建了一个新的烦人问题“导航回的页面”被重复插入历史记录（如答案评论中所示）。

这是解决“禁用前进按钮”问题并**避免**“重复”后退按钮问题的方法。

```
//setup the popstate EventListener that reacts to browser history events
window.addEventListener("popstate",function(event){
     // In order to remove any "forward"-history (i.e. disable forward 
     // button), this popstate's event history state (having been navigated 
     // back to) must be insert _again_ as a new history state, thereby 
     // making it the new most forwad history state. 
     // This leaves the problem that to have this popstate event's history
     // state to become the new top, it would now be multiple in the history
     //
     // Effectively history would be:
     //  * [states before..] ->
     //  * [popstate's event.state] -> 
     //  * [*newly pushed _duplicate_ of popstate's event.state ]
     // 
     // To remove the annoyance/confusion for the user to have duplicate
     // history states, meaning it has to be clicked at least twice to go 
     // back, we pursue the strategy of marking the current history state
     // as "obsolete", as it has been inserted _again_ as to be the most
     // forward history entry. 
     // 
     // the popstate EventListener will hence have to distinguish 2 cases:
     //
     // case A) "popstate event is _not_ an obsolete duplicate"...
     if( typeof event.state == "object" 
         && event.state.obsolete !== true)
     {
         //...so we _firstly_ mark this state as to from now on "obsolete",
         // which can be done using the history API's replaceState method
         history.replaceState({"obsolete":true},"");
         // and _secondly_ push this state _one_more_time_ to the history
         // which will solve the OP's desired "disable forward button" issue
         history.pushState(event.state,"");
     }

     // case B: there is the other case that the user clicked "back" and
     // encounters one of the duplicate history event entries that are 
     // "obsolete" now.
     if( typeof event.state == "object" 
         && event.state.obsolete === true)
     {
         //...in which case we simply go "back" once more 
         history.back() 
         // by this resolving the issue/problem that the user would
         // be counter-intuively needing to click back multiple times.
         // > we skip over the obsolete duplicates, that have been the
         // the result of necessarily pushing a history state to "disable
         // forward navigation"
     }

},false); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-14T06:35:37.553

只需使用以下 jquery 禁用前进按钮：

```
 $( document ).ready( function(){
    history.pushState(null,  document.title, location.href);        
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-23T13:01:42.070

**笔记：**

*   这段代码经过测试并且运行良好，没有显示任何问题，但是我会鼓励开发人员在将代码投入生产之前对其进行更多测试。
*   如果在应用程序的任何地方使用HTML5 *history.replaceState() ，下面的代码现在可能会起作用。*

我创建了一个自定义函数来禁用前进按钮。

这是代码（它不适用于哈希路由策略）：

```
 <script>
    (function() {
      // function called after the DOM has loaded
      disableForwardButton();
    })();

    function disableForwardButton() {
      var flag, loop = false;
      window.addEventListener('popstate', function(event) {
        if (flag) {
          if (history.state && history.state.hasOwnProperty('page')) {
            loop = true;
            history.go(-1);
          } else {
            loop = false;
            history.go(-1);
          }
        } else {
          history.pushState({
              page: true
            },
            null,
            null
          );
        }
        flag = loop ? true : !flag;
      });

      window.onclick = function(event) {
        flag = false;
      };
    }
  </script> 
```

正如*Redrif*在已接受答案的评论中指出的那样，问题是您必须双击后退按钮才能导航回乏味且不切实际的页面。

**代码说明：**每次点击后退按钮时都需要创建一个额外的历史元素，这样你所在的当前页面就会指向新创建的历史页面。这样就没有页面可以前进，因为这`pushState`是最后一个状态（将其想象为数组中的最后一个元素），因此您的前进按钮将始终被禁用。

强制引入循环变量的原因是因为您可以有一个场景，您返回到某个页面并且`pushState`代码发生创建最后一个历史元素，而不是再次返回，您选择再次单击某个链接并再次返回上一页，现在创建了一个额外的历史元素。换句话说，你有这样的东西：

> [第 1 页，第 2 页，第 2 页，第 2 页]

现在，一旦打开`page2`（索引 3 元素）并再次单击后退按钮，您将再次进入`page2`索引 1 元素，而您不希望这样。请记住，您可以拥有一个`x` `page2`元素数组，因此引入了循环 false 变量来解决该特定情况，`page2`无论数组中有多少`page2`元素，您都可以从它一直跳到第 1 页。

# windows - 将标准输入/标准输出连接到 Windows 上的网络端口

> ID：11548559
> 
> 赞同：0
> 
> 时间：2012-07-18T19:06:38.000
> 
> 标签：windows, linux, sockets, client-server, inetd

我编写了一个服务器软件，它使用标准输入/标准输出与客户端进行通信。在 Linux 和类似系统上，我使用 inetd 来定义我的程序应该响应的端口，然后 inetd 将负责回答任何传入呼叫并将套接字与我的程序的 stdin/stdout 连接。我在 Windows 中完成此操作的最简单方法是什么？

# java - 方法运行完成后是否收集局部变量

> ID：11548560
> 
> 赞同：4
> 
> 时间：2012-07-18T19:06:55.847
> 
> 标签：java, variables, garbage-collection

例如

```
public void doSomething() {
   Dog smallDog = new Dog();
   smallDog.bark();
} 
```

运行此方法后会收集狗对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:12:11.630

当方法返回时，它可能*有资格*被收集。垃圾收集何时真正发生是在未来某个未知的时间。

如果没有看到 bark() 的实现，就无法确定。

如果这是你的树皮：

```
public void bark() {
   BarkListeners.callBack(this);
}

public class BarkListeners {
  private static final List<Dog> barkers = new ArrayList<Dog>();

  public static void callBack(Dog dog) {
    barkers.add(dog);
  }
} 
```

那么不，它不会被垃圾收集！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:08:30.713

根本没有。我的意思是，时间不一定是那样的。

所有 Java 对象都在堆中分配并由 GarbageCollector 收集。GarbageCollector 在后台运行，几乎不受何时执行实际垃圾收集的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:15:31.117

从技术上讲，不可能给出和回答，因为我们还没有看到`Dog#bark()`.

一般来说，答案是肯定的，`Dog`实例将在方法运行后被收集，只是无法确切知道何时。这样做的原因是，除非该`bark`方法`Dog`与另一个对象共享对该对象的引用，否则`Dog`将无法再访问 的特定实例。下次垃圾收集器运行时，它将确定它`Dog`不可访问并收集用于保留它的堆空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:09:59.510

这取决于物体的到达能力。如果对象不可访问，则它有资格进行 GC。何时进行 GC 取决于 JVM 实现。[关于垃圾收集的真相](http://java.sun.com/docs/books/performance/1st_edition/html/JPAppGC.fm.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T19:13:09.523

[这篇博客文章](http://javarevisited.blogspot.de/2011/04/garbage-collection-in-java.html)很好地解释了垃圾收集过程的工作原理。总结一下：

> 如果无法从任何活动线程或任何静态引用访问对象，则该对象将有资格进行垃圾收集。它（垃圾收集器）只有在 JVM 认为它需要基于 Java 堆大小的垃圾收集时才会触发。

因此，您不应假设任何对象将被垃圾收集。

# .net - 如何安装/获取 QuickFIX 库

> ID：11548561
> 
> 赞同：0
> 
> 时间：2012-07-18T19:07:01.040
> 
> 标签：.net, vb.net, libraries, quickfix, installation

我正在使用 QuickFIX/N 创建一个应用程序，因为我在 VB.NET 中进行编码。现在，这一直是我最长时间的问题，在线文档很糟糕——或者在我看来只是过于混乱。

在我拥有 QuickFIX 和 QuickFIX/N 之后，如何运行 .bat 或 .jar 文件以获取我的应用程序工作所需的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:43:10.073

首先，在这里下载最新版本：[http ://www.quickfixn.org/download](http://www.quickfixn.org/download)

将下载的文件解压缩到您选择的文件夹中，然后请阅读文件**README.md**

在这里：[http](http://www.quickfixn.org/tutorial/creating-an-application) ://www.quickfixn.org/tutorial/creating-an-application你可以找到一个简单的例子来创建你的第一个应用程序。

# jquery - JQuery setTimeout 不能循环工作

> ID：11548564
> 
> 赞同：0
> 
> 时间：2012-07-18T19:07:19.303
> 
> 标签：jquery, settimeout

我想做的是创建一个快速而肮脏的幻灯片放映。我的想法是我的主 div 包含一个空白的“主”img 标签和一组 div，每个 div 都包含它自己的 img 和一个 span 标签。每个图像的来源依次设置为主 img 的来源。所以我开始遍历每个图像，并尝试将它的源设置为主 img 的源，并设置一个 setTimeout() 和 2 秒的延迟。我遇到的问题是代码似乎要等待两秒钟，并且只显示序列中的最后一个图像。

```
$(document).ready(function () {
    $('div#slideshow').children('div.slideshowsourceimage').each(function () {
        var src = $(this).children('img').attr('src');
        var desc = $(this).children('span').text();

        setTimeout(function () {
            $('img#slideshowimage').attr('src', src);
        }, 2000);
    });
}); 
```

如果我能得到第二双眼睛来帮助我找出我做错了什么，我会很感激的。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:16:07.767

我会做这样的事情：

```
$(function() {
    var $images = $('#slideshow div.slideshowsourceimage');
    var x = 0;
    setInterval(function() {
        if(x == $images.length) { // start over if we get to the last one
            x = 0;
        }

        var $cur = $images.eq(x);
        var src = $cur.find('img').attr('src');
        var desc = $cur.find('span').text();

        $('#slideshowimage').attr('src', src);
        x++;
    }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:09:38.683

您需要使用 setInterval 或增加每个图像显示之间的秒数。现在发生的事情是一切都被记录在两秒钟内发生，所以只有最后一张图片显示。就像是

```
$(document).ready(function () {
    var time=0;
    $('div#slideshow').children('div.slideshowsourceimage').each(function () {
        var src = $(this).children('img').attr('src');
        var desc = $(this).children('span').text();

        setTimeout(function () {
            $('img#slideshowimage').attr('src', src);
            time+=2000;
        }, time);
    });
}); 
```

# matlab - 怎么做才能让整个果子都是白色的，背景是黑色的

> ID：11548572
> 
> 赞同：2
> 
> 时间：2012-07-18T19:08:03.537
> 
> 标签：matlab, image-processing

我有一个可以识别水果的应用程序。到目前为止，我已经使您可以裁剪图像并获得所需水果的颜色。现在我想得到水果的圆度，但我需要水果是黑色的，背景是白色的，这样我才能找到面积和圆度值。到目前为止，这是我对该部分的代码：

```
 crop_temp = rgb2gray(crop);
    threshold = graythresh(crop_temp);
    bw = im2bw(crop_temp,threshold);
    imshow(bw) 
```

裁剪图像时，我通过了裁剪。当水果有相机闪光灯并且该部分保持白色时，问题就出现了。

一个示例图像是这张柠檬图片：

![在此处输入图像描述](../Images/48c30435e229542ee075246fcd2eafb1.png)

问题是柠檬中的白色区域在代码之后保持白色，但我想要它以便整个柠檬是黑色的。但不仅仅是柠檬，其他水果也是如此。

问题是柠檬中的白色区域在代码之后保持白色，但我想要它以便整个柠檬是黑色的。但不仅仅是柠檬，其他水果也是如此。

是的，你怎么能让水果是白色的，背景是黑色的。我是图像处理的新手，所以不要跳到我身上。我只是找不到具体的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:40:32.953

蛮力方法是检查图像中的每个白色像素，并查看它是否在 X 和 Y 方向上都被黑色像素包围，如果是这种情况，则将其变为黑色。这将处理水果内部的斑点，并且不应该给你太多的误报，除非你的水果形状奇怪，或者你的图像边缘有很多噪点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:14:59.860

试试这个：

```
fbw = ones(size(bw))-imfill(ones(size(bw))-bw);
imshow(fbw) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:30:38.843

[您可以从使用这个Matlab 演示](http://www.mathworks.ch/help/toolbox/images/f0-8778.html)开始练习，在图像中分割（和计数）大米。特别是估计背景的部分。

[阅读Otsu 的方法以及关于](http://en.wikipedia.org/wiki/Otsu%27s_method)[SO](https://stackoverflow.com/questions/9937316/document-image-binarization/9940718#9940718)和[DSP](https://dsp.stackexchange.com/questions/1932/what-are-the-best-algorithms-for-document-image-thresholding-in-this-example)的背景/前景估计的这两个问题也很有帮助，其中考虑了本地统计数据。

# xslt - 如何更改 wkhtmltopdf 输出中的 TOC 位置？

> ID：11548573
> 
> 赞同：3
> 
> 时间：2012-07-18T19:08:07.870
> 
> 标签：xslt, pdf, pdf-generation, wkhtmltopdf

我需要目录位于第 3 页。显然，如果有办法控制它，它必须通过 XSL 样式表。我所有的搜索尝试都没有给我任何线索。有可能吗？

我不能使用`cover`选项，因为我需要在第一页和第二页上显示标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:30:38.750

好的，我找到了一种使用 wkhtmltopdf 0.11 的方法。我已经将前两页提取到一个单独的 HTML 文档中，然后像这样运行它

```
wkhtmltopdf [options] page cover.html toc --xsl-style-sheet ... input_file.html out.pdf 
```

不幸的是，它比我预期的要付出更多的努力，因为我通过 wicked_pdf 在 Rails 应用程序中使用它，并且它与新的选项格式不兼容，所以我不得不分叉它并进行必要的更改.

wicked_pdf 生成的命令行如下所示（省略长路径）：

```
"c:/program files (x86)/wkhtmltopdf/wkhtmltopdf.exe"  
   --header-html "file:///path/to/header" --footer-html "file:///path/to/footer" 
   --margin-top 20 --margin-bottom 15 --margin-left 5 --margin-right 40    page "file:///path/to/cover/page" --disable-javascript  toc --xsl-style-sheet "path/to/style/sheet"  - - 
```

# html - 为什么单引号显示为双引号？

> ID：11548574
> 
> 赞同：2
> 
> 时间：2012-07-18T19:08:11.677
> 
> 标签：html, parsing, html-parsing, dom

```
<span id='a'><img src='b.gif' /></span>
<script>
alert(document.getElementById('a').innerHTML);
</script> 
```

输出是：`<img src="b.gif" />`

“b.gif”显示为“b.gif”

在 FireBug 中查看源代码也会显示双引号。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:11:30.710

~~双引号是属性的标准，但单引号显然是可以接受的。~~

~~是经过处理的`innerHTML`标签集，因此浏览器将使用双引号将属性设置为标准~~

正如已经指出的那样，属性上的双引号或单引号没有“标准”。

我的**猜测**是浏览器默认使用双引号，因此当你请求时`innerHTML`，它会这样格式化它们。如果我不正确，我将立即删除此答案

# javascript - 使用 Lightbox2 显示视频

> ID：11548589
> 
> 赞同：2
> 
> 时间：2012-07-18T19:09:26.487
> 
> 标签：javascript, jquery, html, lightbox2

网站：[http ://blieque.comli.com/motion](http://blieque.comli.com/motion)

在我开始之前，我知道 Lightbox2 (Lokesh Dhakar's) 有很多替代品来显示视频，但我想避免使用三种不同的 JavaScript 东西，已经在使用 MooTools 和 JQuery，因为我想将 HTTP 请求保持在最低限度，以及作为磁盘使用。

因为它来了，Lightbox2 不支持视频，句号。但是，我注意到 JavaScript 本质上是在灯箱打开时获取`a`'`href`属性的内容并将其放入`img`'属性中。`src`据我所见，将其更改`img`为`iframe`(done) 并将锚标记设置`href`为`youtube.com/embed/*video-id*`应该生成`iframe`包含该 YouTube 视频的内​​容（替换`watch?id=`为`embed/`呈现视频的全屏版本。

然后，我还在 default 之上添加了宽度、高度和 frameborder 属性的 JavaScript `class="lb-image"`。现在，当页面加载并且 Lightbox 调用它时，它会创建一个空窗口。如果您检查代码，您可以看到所有属性都在那里，但没有加载框架框架中的页面，只是创建了一个空`head`标签`body`。

我只是想知道这是服务器问题还是代码问题，如果是，如何解决。如果有什么办法让它工作？

谢谢

**注意：我没有使用 Drupal，因此该`lightvideo`选项不可用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-01T14:34:04.733

也许有人仍在寻找解决方案。

我在我的项目中遇到了同样的问题。不适用于 youtube iframe，但实现它并不难。Lightbox2 无法扩展，所以我编写了添加监听器和观察器的简单类。为了正确显示，要求视频具有相同尺寸的海报。这是保持弹出窗口大小正确的最快方法。

在 href 中需要添加带有图像 url 的数据集 href

```
<a href="POSTER_URL" data-href="VIDEO_URL" data-lightbox="Videos">
Open Lightbox
</a> 
```

SCSS 在弹出窗口中覆盖图像并在加载时设置淡入淡出效果

```
.lightbox {
  .lb {
    &-outerContainer {
      video {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 9999;
        width: 100%;
        height: auto;
        opacity: 1;
        transition: opacity 300ms ease-in-out;
        border: none;
        outline: none;
        &:hover, &:focus {
          border: none;
          outline: none;
        }
      }
      &.animating {
        video {
          opacity: 0;
        }
      }
    }
    &-container {
      position: relative;
      .lb-image {
        border: none;
      }
    }
  }
} 
```

以及创建视频并将视频设置为弹出窗口的 JS 类。也许有点乱，但我不在乎。这只是快速的解决方案。

```
class LightBoxVideo {
    constructor() {
        this.videos = {};
        this.lightBoxVideo();
    }

    lightBoxVideo = () => {
        this.setEvents();
        this.setMutationObserver();
    }

    setMutationObserver = () => {
        const observer = new MutationObserver(mutation => {
            const imageMutations = mutation.filter((m) => {
                return m.attributeName === "src" && m.target.className === 'lb-image'
            });

            const overlayDisplay = window.getComputedStyle(document.querySelector('.lightboxOverlay'), null).display;
            if("none" === overlayDisplay) {
                this.removeVideoElement();
            }

            if(imageMutations.length > 0) {
                if(this.videos[imageMutations[0].target.src]) {
                    this.removeVideoElement();
                    this.setVideoElement(this.videos[imageMutations[0].target.src]);
                }
            }
        });

        observer.observe(document.body, {
            childList: false,
            attributes: true,
            subtree: true,
            characterData: false
        });
    }

    setEvents = () => {
        const videoLinks = this.findVideoLinks();
        videoLinks.forEach((link) => {
            this.videos[link.href] = link;
            link.addEventListener('click', (e) => {
                this.removeVideoElement();
                this.setVideoElement(e.target);
            });
        });
    }

    setVideoElement = (element) => {
        const lightbox = document.querySelector('.lightbox')
        const container = lightbox.querySelector('.lb-container');

        const videoElement = this.createVideoElement(element);
        container.prepend(videoElement);
    }

    removeVideoElement = () => {
        const lightbox = document.querySelector('.lightbox')
        const container = lightbox.querySelector('.lb-container');
        const video = container.querySelector('video');

        if(video) {
            container.removeChild(video);
        }
    }

    createVideoElement = (element) => {
        const video = document.createElement('video');

        video.setAttribute('poster', element.href);
        video.setAttribute('controls', 'true');

        const source = document.createElement('source');
        source.setAttribute('src', element.dataset.href);
        source.setAttribute('type', 'video/mp4');

        video.append(source);

        return video;
    }

    findVideoLinks = () => {
        const hrefs = document.querySelectorAll('a[data-lightbox]');
        const regex = /\.(mp4|mov|flv|wmv)$/;
        if(0 === hrefs.length) {
            return [];
        }
        return Array.from(hrefs).filter((href) => {
            return !! href.dataset.href.match(regex);
        });
    }
} 
```

要预览它是如何工作的 - 此处为 codepen：[https ://codepen.io/PatrykN/pen/RwKpwMe](https://codepen.io/PatrykN/pen/RwKpwMe)

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-07-19T10:01:01.037

**启用视频支持**

默认情况下，禁用对视频的支持。但是，这可以通过检查 admin/settings/lightbox2 上的启用视频支持选项轻松启用。

*基本示例*

```
<a href="http://video.google.com/videoplay?docid=1811233136844420765" rel="lightvideo">This Video</a> 
```

[参考](http://drupal.org/node/252276)

# matlab - 如何让 Matlab 读取正确数量的 xml 节点

> ID：11548590
> 
> 赞同：8
> 
> 时间：2012-07-18T19:09:30.477
> 
> 标签：matlab, xml-parsing

我正在使用 matlab 的 xmlread 内部函数读取一个简单的 xml 文件。

```
<root>
    <ref>
        <requestor>John Doe</requestor>
        <project>X</project>
    </ref>
</root> 
```

但是当我调用`ref`元素的 getChildren() 时，它告诉我它有**5 个**孩子。

**如果**我将所有 XML 放在**一行**中，它就可以正常工作。Matlab 告诉我`ref`元素有**2 个**孩子。

它似乎不喜欢元素之间的空间。

即使我在 oXygen XML 编辑器中运行*Canonicalize*，我仍然得到相同的结果。因为 Canonicalize 仍然会留下空格。

Matlab 使用 java 和 xerces 处理 xml 内容。

# 问题：

我该怎么做才能使我的 xml 文件保持人类可读的格式（不是全部在一行中）但仍然让 matlab 正确解析它？

# 代码更新：

```
filename='example01.xml';
docNode = xmlread(filename);
rootNode = docNode.getDocumentElement;
entries = rootNode.getChildNodes;
nEnt = entries.getLength 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T01:44:55.397

幕后的 XML 解析器正在为节点元素之间的所有空白创建 #text 节点。无论哪里有换行符或缩进，它都会在节点的数据部分创建一个带有换行符和缩进空格的#text 节点。因此，在您提供的 xml 示例中，当它解析“ref”元素的子节点时，它返回 5 个节点

1.  节点 1：#text 带有换行符和缩进空格
2.  节点 2：“请求者”节点，该节点又在数据部分有一个带有“John Doe”的#text 子节点
3.  节点 3：#text 带有换行符和缩进空格
4.  节点 4：“project”节点，该节点又在数据部分有一个带有“X”的#text 子节点
5.  节点 5：#text 带有换行符和缩进空格

此功能为您删除所有这些无用的#text 节点。请注意，如果您故意让一个 xml 元素仅由空格组成，那么此函数将删除它，但对于 99.99% 的 xml 情况，这应该可以正常工作。

```
function removeIndentNodes( childNodes )

numNodes = childNodes.getLength;
remList = [];
for i = numNodes:-1:1
   theChild = childNodes.item(i-1);
   if (theChild.hasChildNodes)
      removeIndentNodes(theChild.getChildNodes);
   else
      if ( theChild.getNodeType == theChild.TEXT_NODE && ...
           ~isempty(char(theChild.getData()))         && ...
           all(isspace(char(theChild.getData()))))
         remList(end+1) = i-1; % java indexing
      end
   end
end
for i = 1:length(remList)
   childNodes.removeChild(childNodes.item(remList(i)));
end

end 
```

像这样称呼它

```
tree = xmlread( xmlfile );
removeIndentNodes( tree.getChildNodes ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T15:39:57.780

我觉得@cholland 的回答很好，但我不喜欢额外的 xml 工作。因此，这是一种从 xml 文件的副本中去除空格的解决方案，这是不需要元素的根本原因。

```
fid = fopen('tmpCopy.xml','wt');
str = regexprep(fileread(filename),'[\n\r]+',' ');
str = regexprep(str,'>[\s]*<','><');
fprintf(fid,'%s', str);
fclose(fid); 
```

# javascript - 使用我的自定义编辑器编辑 .cs 文件和 aspx 文件

> ID：11548594
> 
> 赞同：0
> 
> 时间：2012-07-18T19:09:45.090
> 
> 标签：javascript, jquery

我正在开发自己的 asp .net 编辑器来生成和编辑 Visual Studio 解决方案。所以我试图以文本模式打开一个 .aspx 页面。现在我正在尝试使用 jQuery 使用以下代码获取文本，但它不起作用。这是我的代码

```
 jQuery.get('http://localhost:27487/TestSolution/Form1.cs', function (data) {
            alert(data); 
```

对于上面的代码，如果我更改 Form1.cs 并将文本文件 test.txt 放在 TestSolution 文件夹中，警报会显示文本文件的数据。关于如何在我的变量中读取 .aspx 和 .cs 文本的任何建议或帮助？请随时给我建议。

# xcode - 从另一个类调用方法，而不重新初始化它

> ID：11548599
> 
> 赞同：1
> 
> 时间：2012-07-18T19:10:00.427
> 
> 标签：xcode, cocoa, class, methods, public-method

我有一个 ViewController，我在其中调用另一个类（TCP 类）的方法，在那里我与服务器建立 TCP 连接，这给了我一个响应。我想，当那个 TCP 类从服务器获取响应时，从 ViewController 调用另一个方法。

问题：

1.  我是菜鸟。
2.  我正在 TCP 上初始化并分配第一个 Viewcontroller，并且我的所有变量都被重置（这是我不想要的）。

所以...我该怎么做才能使它正确？我只想调用一个已经在内存中分配的不同类的方法。

谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:16:39.357

您可以将 ViewController 设置为 TCP 类的观察者。这是一个解释 Obj-C 中观察者模式实现的链接。（与我使用的非常相似，但写得很好。）

[http://www.a-coding.com/2010/10/observer-pattern-in-objective-c.html](http://www.a-coding.com/2010/10/observer-pattern-in-objective-c.html)

我通常也喜欢将持久层与接口分开。我使用观察者或 KVO 来通知我的业务逻辑并查看控制器发生了一些变化。

如果您愿意，也可以通过提供的通知中心发送信息...

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)

基本代码示例：

```
@implementation ExampleViewController
//...
- (void)viewDidLoad
{
   [super viewDidLoad:animated];
   [TCPClass subscribeObserver:self];
}
- (void)viewDidUnload
{
   [super viewDidUnload:animated];
   [TCPClass unsubscribeObserver:self];
}
- (void)notifySuccess:(NSString*)input
{
   //Do whatever I needed to do on success
}
//...
@end

@implementation TCPClass
//...
//Call this function when your TCP class gets its callback saying its done
- (void)notifySuccess:(NSString*)input 
{    
    for( id<Observer> observer in [NSMutableArray arrayWithArray:observerList] )
    {
        [(NSObject*)observer performSelectorOnMainThread:@selector(notifySuccess:)   withObject:input waitUntilDone:YES];
    }
}
//maintain a list of classes that observe this one
- (void)subscribeObserver:(id<Observer>)input {
    @synchronized(observerList) 
    {
        if ([observerList indexOfObject:input] == NSNotFound) {
        [observerList addObject:input];
        }
    }
}

- (void)unsubscribeObserver:(id<Observer>)input {
    @synchronized(observerList) 
    {
        [observerList removeObject:input];
    }
}
//...
@end

//Observer.h
//all observers must inherit this interface
@protocol Observer
- (void)notifySuccess:(NSString*)input;
@end 
```

希望有帮助！

# loading - 将 192 件物品分成多个包裹（每个包裹最多 12 个），同时最小化总表面积

> ID：11548610
> 
> 赞同：0
> 
> 时间：2012-07-18T19:10:34.393
> 
> 标签：loading, mathematical-optimization, bin, pallet

我正在尝试解决以下问题。给定 192 件具有指定长度和宽度的物品，我想找到一个**最小化总表面积的包装订单**。这些项目都具有相同的高度（未指定）。每个包裹不能包含超过 12 件物品，并且由于物品的尺寸，同一层中不能存放超过 1 件物品。**如果一个项目的宽度和长度不超过下方项目的宽度和长度，则该**项目只能堆叠在另一个项目的顶部。

 **目标是**最小化总表面积**，即最大物体的表面（在底部）。

我找到了大量关于托盘和垃圾箱装载的文献，但我无法弄清楚我到底需要什么。这是我想出的：

1）选择具有最大表面（宽度*长度）的项目i并将其放在堆栈j的底部。

2）选择具有第二大表面的项目i

a) 如果它的宽度和高度不超过堆栈 j 的底部项目的宽度和高度，则将其放在堆栈 j=1 中的底部项目的顶部

b) 如果它的宽度和高度确实超过了堆栈 j 的底部项目的宽度和高度，则旋转该项目。如果合适，将其放在堆栈 j=1 的底部项目的顶部。

c) 如果旋转后的item的宽度和高度超过stack j的底部item的宽度和高度，将它放在stack j+1 = 2的底部

3）选择具有第三大表面的项目并重复步骤a，b和c

等等...

有什么意见或提示吗？我不知道这是否会产生（最佳）解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:04:46.490

只是一个思考的提示：“可以堆叠在顶部”约束定义了项目的部分排序。偏序可以通过拓扑排序表示为图。

现在您可以考虑从每个项目开始的路径，长度不超过 12。可以通过迭代地从图中删除这些路径来尝试尝试性解决方案，直到图耗尽。（当您删除一条路径时，您将不得不修复与它有共同项目的其他路径。）

用路径表示的问题可能比用节点表示的问题更容易解决。

必须解决一个问题：删除路径时，它是否总是具有最大长度，或者较短的路径能否产生更好的全局解决方案？**

# php - shtml中的php代码

> ID：11548611
> 
> 赞同：0
> 
> 时间：2012-07-18T19:10:35.223
> 
> 标签：php, apache, shtml

好的，所以我对网站设计非常陌生，所以请记住这一点。我一直在开发一个网站（文件扩展名为 .shtml），现在是时候向它添加 php 代码了。这只是一点代码，但在.shtml网站上不起作用；php 代码以注释形式出现在源代码中。我想知道是否有办法让 php 代码在 shtml 网站上工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:44:29.227

将 .shtml 更改为 .php 更新您可能拥有的包含文件以及您正在使用的文件。

要保留您的 .shtml，请添加此

`AddType application/x-httpd-php .shtml`

请记住，这会给您的网络服务器带来额外的负载，因为它现在将扫描所有 .shtml 中的 php 而不仅仅是 .php 文件

这可以在 httpd.conf 文件中添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:13:15.187

您需要设置一个 Web 服务器才能使其正常工作。结帐 Apache，或[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)以获得非常容易设置的东西。您不能只是将 PHP 放入 html 页面并期望它执行，它需要解释器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T18:48:11.307

将您的 PHP 代码编写为单独的 .php 文件，然后使用 SSI 将其包含在内，如下所示：

```
<!--#include virtual="/path/to/yourfile.php" --> 
```

这在托管网站上对我有用，无需更改 .htaccess。PHP 在包含在 .shtml 页面中之前执行。

# android - 应用程序未安装在android错误中

> ID：11548612
> 
> 赞同：0
> 
> 时间：2012-07-18T19:10:40.363
> 
> 标签：android

我已经在 Netbeans7.1.2 中提出了申请。我的应用程序在配置为 android 2.1 的模拟器中完美运行，但在 Android 设备（平板电脑）中复制 bin 文件夹后出现错误“未安装应用程序”。如果有人知道这个问题，请问这是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:36:22.037

复制`bin/`文件夹不足以保证安装。

你可以这样做：

使用调用的 Android 的 SDK 工具`adb`将其直接安装到设备上。例如，假设您的项目中的包名称名为**org.foo.bar.app**，并且生成了一个名为**foobar.apk**的 apk 文件（通常位于`bin/`）文件夹中，或者您指定 Eclipse 生成apk，来自 Eclipse：

*   右键单击项目
*   点击*安卓工具*
*   点击`Export the unsigned Application Package`

**或者**

*   点击`Export Signed Application Package`。

然后：

将电缆插入设备，并从内部发出命令，`Windows Cmd`或者`Linux Terminal`，以这种方式，`adb install foobar.apk`

要从设备上卸载应用程序，请指定包名称，如下所示`adb uninstall org.foo.bar.app`

# objective-c - 如何将 NSDecimalNumber 转换为双精度

> ID：11548615
> 
> 赞同：0
> 
> 时间：2012-07-18T19:10:45.627
> 
> 标签：objective-c, ios, double, nsdecimalnumber

我有一个值存储为 NSDecimalNumber，当我将其转换为双精度时，它会丢失精度。

对于我正在调试的当前数据，该值为 0.2676655。当我向它发送双值消息时，我得到 0.267665。它是截断而不是舍入，这对一些使用哈希来检测同步操作的数据更改的代码造成了严重破坏。

NSDecimalNumber 实例来自第三方框架，因此我不能只用原始双精度数替换它。最终它被插入到 NSMutableString 中，所以我在使用字符串表示形式，但是它需要通过“%.6lf”的格式说明符，基本上我需要小数点后六位数字，所以它看起来像 0.267666。

我怎样才能在不丢失精度的情况下做到这一点？如果有一种很好的方法来格式化 NSDecimalNumber 而无需转换为双精度也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:26:46.410

> NSDecimalNumber 实例来自第三方框架，因此我不能只用原始双精度数替换它。

是的你可以。NSDecimalNumber 是 NSNumber 的不可变子类，在转换方面有点太有用了：

```
double myDub = [NSDecimalNumber decimalNumberWithDecimal:[[NSNumber numberWithDouble:((double)0.2676655)] doubleValue]]; 
```

> 最终它被插入到一个 NSMutableString 中，所以我在一个字符串表示之后，但是它需要通过“%.6lf”的格式说明符，基本上我需要小数点后六位数字，所以它看起来像 0.267666。

不幸的是，双精度不会四舍五入，但是得到一个百万分之一的字符串值并不是什么大不了的事（我希望）：

```
NSDecimalNumber *num = [NSDecimalNumber decimalNumberWithDecimal:[[NSNumber numberWithDouble:((double)0.2676655)] decimalValue]];
NSString *numString = [NSString stringWithFormat:@"%.6lf", [num doubleValue]];
NSLog(@"%@",numString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:52:22.183

我认为您走错了路，不知所措。

首先，请记住，objective-c 中**不支持**lond double ，因此您最好使用 %f 之类的东西而不是 %lf。[可在 Objective C 运行时编程指南的“类型编码”下的文档库中找到]

然后我宁愿期望该值显示为被截断，因为 doubleValue 返回一个近似值，但您使用的范围仍在正确范围内。

您应该使用简单的格式化程序而不是移动数字，例如：

```
 // first line as an example for your real value
    NSDecimalNumber *value = [NSDecimalNumber decimalNumberWithString:@"0.2676655"];
    NSNumberFormatter *numFmt = [[NSNumberFormatter alloc] init];
    [numFmt setMaximumFractionDigits:6];
    [numFmt setMinimumFractionDigits:6];
    [numFmt setMinimumIntegerDigits:1];
    NSLog(@"Formatted number %@",[numFmt stringFromNumber:value]); 
```

如果需要，这还有一个好处是使用区域感知格式化程序。数字格式化程序的结果是所需的字符串。

# iphone - 如何使用一堆图像目录创建视频文件？

> ID：11548618
> 
> 赞同：1
> 
> 时间：2012-07-18T19:10:58.043
> 
> 标签：iphone, ios

我有一个 NSMutableArray，其中有图像路径。我想将它们组合成一个视频文件。有没有办法做到这一点？我已经搜索过了，但我找不到任何特别的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:25:03.570

该`FFmpeg`库可以将图像序列转换为视频。为 iOS
编译并运行.`FFmpeg``FFmpeg``NSTask`

两个相关的问题可以帮助您入门：

*   [图像序列到视频质量](https://stackoverflow.com/questions/3158235/image-sequence-to-video-quality)
*   [使用带有 iPhone SDK 的 FFMPEG 库进行视频编码](https://stackoverflow.com/questions/1679649/using-ffmpeg-library-with-iphone-sdk-for-video-encoding)

# dynamic - 指数数组的边界之外

> ID：11548620
> 
> 赞同：0
> 
> 时间：2012-07-18T19:11:02.100
> 
> 标签：dynamic, controls

我不确定为什么会收到此错误。如何动态设置控件的错误提供程序？

```
if (errorList.Count == 0)
        {
            return true;
        }
        else
        {
            foreach (ErrorEntity ee in errorList)
            {
                if (ee.InError)
                {
                    Control[] ctl = this.Controls.Find(ee.FieldName, true);
                    if (ctl != null)
                    {
                        errorProvider.SetError(ctl[0], ee.ErrorMessage);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:32:07.797

我的猜测是

```
this.Controls.Find(ee.FieldName, true); 
```

正在返回一个空集合，而不是 null。所以当你检查null时，你也应该检查空（即：Count==0）

# sql-server-2008 - 遍历 CSV 文件的行并将特定的行值分配给包变量

> ID：11548622
> 
> 赞同：0
> 
> 时间：2012-07-18T19:11:06.750
> 
> 标签：sql-server-2008, ssis

我目前正在使用 SSIS 2008 并且对它相当陌生。我有一些 Java、VBA 和 VB.NET 的编程背景。

我有一个到包含 URL 列表的 csv 文件的连接。
文件中有大约一千行，对于每一行，我想将 URL 添加到一个包变量中，该变量将用于查看最新的链接是否已经下载和更新。

我设置了一个 Foreach 循环容器，旨在循环遍历 csv 文件的每一行。

但是，我无法弄清楚如何“查看”每一行。一旦我能做到这一点，我就知​​道将 URL 分配给变量是没有问题的，但我被卡在了中途。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:55:49.830

您想对来自给定来源的每一行*做一些事情。*这通常是一种数据流类型的活动。将 a`Data Flow Task`放到您的控制流上。在该数据流中，添加一个平面文件源。在平面文件连接管理器中，单击新建并填写文件的详细信息。我假设每行只有一个数据元素（url）。单击确定，然后您应该有一个工作数据源。

太好了，现在您需要做的就是对传入的数据进行“某事”，在您的情况下，“查看最新的链接是否已经下载和更新”。我不确定这到底*是什么*意思，但是无论您附加到平面文件源的输出（查找任务、脚本任务等），都会对流经它的每一行执行该操作。

# iphone - iOS：删除由 NSArray 创建的 UIImageView 实例？

> ID：11548624
> 
> 赞同：1
> 
> 时间：2012-07-18T19:11:11.743
> 
> 标签：iphone, ios, sdk, nsarray, sigabrt

我有一个名为 imgBall 的 NSArray，它包含一个名为 imgView 的临时变量，当用户触摸屏幕上的某个点时，它会在屏幕上显示一个图像。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(40, 40, 40, 40)];
    imgView.image = [UIImage imageNamed:@"ball.png"];
    [self.view addSubview:imgView];
    imgView.center = [myTouch locationInView:self.view];
    [imgBall addObject:imgView];
} 
```

用户可以通过触摸屏幕上的任意位置来创建多个实例。可能意味着阵列中有 5、10 或 20 个不同的球。

现在，我有一个需要“清除”屏幕并删除所有 imgView 实例的按钮。我尝试了以下方法：

```
 for (UIImageView *imgView in imgBall) {
    [self.view removeFromSuperview:imgView]; 
} 
```

和

```
 for (UIImageView *imgView in imgBall) {
    [imgBall removeObject:imgView];
} 
```

但它们都产生 SIGABRT 并抛出异常：

```
Terminating app due to uncaught exception 'NSGenericException', reason: 
'*** Collection     <__NSArrayM: 0x735f4a0> was mutated while being enumerated.' 
```

我有什么方法可以做到这一点而不会每次都抛出 SIGABRT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:14:39.783

我想你想要：

```
for (UIImageView *imgView in imgBall) {
    [imgView removeFromSuperview]; 
    [imgBall removeObject:imgView];
} 
```

**在touchesEnded中创建的时候还需要**在[imgBall addObject:imgView]之后做[imgView release]，否则会泄漏内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:17:57.330

这样做：

```
for (UIImageView *imgView in imgBall)
{
[imgView removeFromSuperview];
} 
```

然后不要忘记释放并将数组 imgBall 设置为 nil 以避免内存问题。如果它是 NSMutableArray，只需调用 removeAllObjects。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:23:00.127

你应该这样做......

```
for (UIImageView *imgView in imgBall) {
    [imgView removeFromSuperview];
}
[imgBall removeAllObjects]; 
```

# java - 在 Java for Android 中将此字符串分解为键/值字符串的最简单方法是什么？

> ID：11548625
> 
> 赞同：2
> 
> 时间：2012-07-18T19:11:15.907
> 
> 标签：java, android, for-loop, iterator, key-value

这是我的`String`：

```
&username=john&password=12345&email=john@go.com 
```

将其分解为键/值字符串以便它们可以作为参数添加的最好和最有效的方法是什么。这是我需要的一个模拟示例：

```
for (set in array)
{
   params.add(new BasicNameValuePair(set.key, set.value));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:16:20.597

做这个：

```
String all = "&username=john&password=12345&email=john@go.com";
//Split across all instances of the 'and' symbol
String[] keyValueConcat = all.split("&");
Map<String, String> kvPairs = new HashMap<String, String>();
for (String concat : keyValueConcat) {
    if (concat.contains("=") {
        //For any string in the split that contains an equals sign
        //Split over the equals sign and add to the map
        String[] keyValueSplit = concat.split("=", 2);
        kvPairs.put(keyValueSplit[0], keyValueSplit[1];
    }
} 
```

并且地图 kvPairs 应该包含您需要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:17:37.267

看到这个问题：[Parsing query strings on Android](https://stackoverflow.com/questions/1667278/parsing-query-strings-in-java)

> 在 Android 上，Apache 库提供了一个查询解析器：

[http://developer.android.com/reference/org/apache/http/client/utils/URLEncodedUtils.html](http://developer.android.com/reference/org/apache/http/client/utils/URLEncodedUtils.html)

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:12:43.220

为此，您可以使用[StringTokenizer](http://www.mkyong.com/java/java-stringtokenizer-example/)（或）[String.split 。](http://javaeschool.com/java-examples/java-string-split-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:23:03.970

```
String exp="&username=john&password=12345&email=john@go.com"
String[] pairs=exp.split("&");
String[] temp;
Map<String, String> myMap= new HashMap<String, String>();

for(i=0;i<pairs.length;i++){
temp=pairs[i].split("=");
myMap.put(temp[0],temp[1]);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-21T07:16:32.110

不确定它是否在 java for android 中可用，但在 Java 8 中，可以使用以下方法将字符串分解为键值对：

```
String string = "&username=john&password=12345&email=john@go.com";
Map<String, String> map= Stream.of(string.split("&")).map(p->p.split("=")).filter(p->p!=null && p.length==2).collect(Collectors.toMap(p->p[0], p->p[1])); 
```

# javascript - 动态变化的 HTML 标签

> ID：11548632
> 
> 赞同：1
> 
> 时间：2012-07-18T19:11:35.807
> 
> 标签：javascript, html, dynamic

有没有办法动态更新 HTML 标签？

我拥有的 HTML 标签是：

```
<p id=something>hello</p> 
```

有没有一种方法可以通过 JavaScript 更改`hello`为另一个值。

更改该值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:12:48.083

```
document.getElementById("something").innerHTML = 'Something New'; 
```

# drupal-7 - 注意：未定义索引：workflow_tokens() 中的节点

> ID：11548634
> 
> 赞同：0
> 
> 时间：2012-07-18T19:12:10.617
> 
> 标签：drupal-7

我在我的 drupal 站点的许多页面中都收到了上述错误通知。

> 注意：未定义索引：workflow_tokens() 中的节点（/home/lafune27/public_html/sites/all/modules/workflow/workflow.module 的第 188 行）。注意：试图在 workflow_tokens() 中获取非对象的属性（/home/lafune27/public_html/sites/all/modules/workflow/workflow.module 的第 189 行）。

请帮忙。

这是一个![截屏](../Images/219cc4f862379cf5d0261236872d98d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:27:44.390

看起来它可能是一个错误。[drupal.org](http://drupal.org/node/1485816)上有一个未解决的问题。[请参阅http://drupal.org/node/1485816](http://drupal.org/node/1485816)中的评论 #2

# ruby-on-rails - CSV - 不带引号的字段不允许 \r 或 \n（第 2 行）

> ID：11548637
> 
> 赞同：23
> 
> 时间：2012-07-18T19:12:14.767
> 
> 标签：ruby-on-rails, ruby, csv, fastercsv

尝试解析 CSV 文件，但仍收到错误消息**Unquoted fields do not allow \r or \n （第 2 行）。**.

我在这里找到了类似的主题，其中有以下提示：

```
 CSV.open('file.csv', :row_sep => "\r\n") do |csv| 
```

但不幸的是，他对我不起作用......我无法更改 CSV 文件，所以我需要在代码中修复它。

**编辑**CSV 文件示例：

```
A;B;C
1234;... 
```

有什么办法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T19:42:28.837

首先，您应该将列分隔符设置为“;”，因为这不是解析 CSV 文件的正常方式。这对我有用：

```
CSV.open('file.csv', :row_sep => :auto, :col_sep => ";") do |csv|
    csv.each { |a,b,c| puts "#{a},#{b},#{c}" } 
end 
```

从 1.9.2 CSV 文档：

> 自动发现会提前读取数据以寻找下一个`\r\n`、 `\n`或`\r`序列。即使序列出现在带引号的字段中，也会被选中，假设您在那里有相同的行尾。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-10T22:57:15.917

如果 CSV 被任何可能使用奇怪格式的程序（例如 Excel 或电子表格）触摸或保存，则更简单的解决方案：

1.  **使用任何纯**文本编辑器打开文件（我使用了 Sublime Text 3）
2.  按回车键在任意位置添加新行
3.  保存文件
4.  删除刚刚添加的行
5.  再次保存文件
6.  再次尝试导入，错误应该消失了

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-17T10:29:42.413

对我来说，我正在导入 LinkedIn CSV 并收到错误。

我删除了这样的空白行：

```
 def import
    csv_text = File.read('filepath', :encoding => 'ISO-8859-1')
    #remove blank lines from LinkedIn
    csv_text = csv_text.gsub /^$\n/, ''
    @csv = CSV.parse(csv_text, :headers => true, skip_blanks: true)
  end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-26T17:28:23.707

就我而言，我必须提供编码和保证不会出现在数据中的引号字符

```
CSV.read("file.txt", 'rb:bom|UTF-16LE', {:row_sep => "\r\n", :col_sep => "\t", :quote_char => "\x00"}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-25T21:04:54.330

我意识到这是一篇旧文章，但我最近遇到了一个类似的问题，即格式错误的 CSV 文件无法使用标准 Ruby CSV 库进行解析。

我尝试了[SmarterCSV](https://github.com/tilo/smarter_csv/) gem，它可以立即解析文件。它是一个外部库，因此它可能不是每个人的最佳解决方案，但它胜过自己解析文件。

```
opts = { col_sep: ';', file_encoding: 'iso-8859-1', skip_lines: 5 }
SmarterCSV.process(file, opts).each do |row|
  p row[:someheader]
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-30T08:38:35.687

请参阅此线程[未加引号的字段不允许 \r 或 \n](https://stackoverflow.com/questions/51971826/csv-parsing-returns-unquoted-fields-do-not-allow-r-or-n-but-cant-find-error/51974034)

解决方案：

```
file = open(file.csv).read.gsub!("\r", '')
CSV.open(file, :row_sep => "\r\n") do |csv| 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-08T10:25:17.683

如果您必须处理来自 Excel 的文件并在单元格中使用换行符，那么还有一个解决方案。

这种方式的最大缺点是，字符串中不允许使用分号或双引号。

我选择不带分号

```
if file.respond_to?(:read)
  csv_contents = file.read
elsif file_data.respond_to?(:path)
  csv_contents = File.read(file.path)
else
  logger.error "Bad file_data: #{file_data.class.name}: #{file_data.inspect}"
  return false
end

result = "string"
csv_contents = csv_contents.force_encoding("iso-8859-1").encode('utf-8') # In my case the files are latin 1...

# Here is the important part (Remove all newlines between quotes):
while !result.nil?
  result = csv_contents.sub!(/(\"[^\;]*)[\n\r]([^\;]*\")/){$1 + ", " + $2}
end

CSV.parse(csv_contents, headers: false, :row_sep => :auto, col_sep: ";") do |row|
  # do whatever
end 
```

对我来说，该解决方案运行良好，如果您处理大文件，您可能会遇到问题。

如果您不想使用引号，只需将正则表达式中的分号替换为引号即可。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-27T20:34:03.157

就我而言，电子表格/CSV 的第一行是一段双引号的介绍文本。我得到的错误是：/Users/.../.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/csv.rb:1880:in `block (2 levels) in shift': Unquoted字段不允许 \r 或 \n（第 1 行）。(CSV::MalformedCSVError)

我删除了带有 " 字符的注释，因此 .csv 只有 .csv 数据，保存它，并且我的程序没有错误地运行。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-02-12T03:13:07.550

修复由 Excel 引起的奇怪格式的另一个简单解决方案是将数据复制并粘贴到 Google 电子表格中，然后将其下载为 CSV。

# c# - 删除关联控件

> ID：11548642
> 
> 赞同：0
> 
> 时间：2012-07-18T19:12:30.993
> 
> 标签：c#, winforms, treeview, controls, tabcontrol

有一个`TreeView`控件，`WinForm`它表示一组层次结构的对象。每个对象都有一些类的对象集。有`DataGridView`，表示与选定`TreeView`节点关联的对象。通过双击添加新`DataRow`的`DataGridView`，其中表示与选定对象关联的对象的详细值（某个类的对象的集合）。通过双击添加新的in ，其中表示与双击关联的对象的详细值（某个类的对象的集合）。然后我们可以通过`TabControl1``TabPage``DataGridView``DataRow``DataRow``TabControl1``TabControl2``TabPage``DataGridView``DataRow``TreeView`并通过双击 DataRows 查看详细信息并创建新的 TabPages。现在，当我删除`TreeNode`from时`TreeView`，我需要删除与它关联的所有 TabPages（带有 DataGridViews）`TreeNode`。

是否有用于集中创建和删除关联控件链的设计模式？

![表格模型](../Images/80efe801abca822407f35117c32ecab2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:22:41.097

如果 DataGridView1、TabControl1 和 TablControl2 将始终出现在表单中（而不是在面板中设置单独的 UserControl），则将方法添加到 TreeView 的 BeforeSelect 事件中。在这种情况下，调用方法来清除每个其他控件的数据。如果您确实选择了 UserControls 路线，最好使用 ClearData 方法创建一个接口来逐步执行每个控件。

在这些方法中的每一个中，检查是否存在 DataGridView 或选项卡（因为用户可能还没有进入 TabControl2 等），并将它们从父控件中删除。

这不是一种模式，但它应该可以解决问题。如果您需要更多细节，或者我遗漏了一些东西，那么不要那么抽象会有所帮助。

我认为不会有集中加载所有内容的模式，因为每个步骤都取决于用户输入。

# jquery - 追加后带有最后一个孩子的jquery

> ID：11548645
> 
> 赞同：1
> 
> 时间：2012-07-18T19:12:41.243
> 
> 标签：jquery, append, css-selectors

我似乎有一个非常基本的问题，我无法解决，我希望有人能够帮助我......

我有一个 'wrapper' div，其中包含三个 'page' div。当点击最右边的 div 时，这个应该变成中间的。我找到了一个很好的方法，首先克隆第一个子 div 并将其附加到末尾，然后将“包装器”div 向左设置动画，然后删除原始的第一个子 div 并恢复“包装器”div 的原始位置。

但问题是这只适用于原始 DOM 中的第一次点击；也就是说，它不会将附加的 div 识别为新的最后一个孩子....任何人都可以帮助我吗？

jQuery

```
$(document).ready(function() {
            $('#wrapper div:last-child').click(function() {
                $('#wrapper').animate({'left' : '-33%' }, 500, function() {
                    $('#wrapper div:first-child').clone(true).appendTo('#wrapper');
                    $('#wrapper div:first-child').remove();
                    $('#wrapper').css('left', '0');
                });
            });
        }); 
```

HTML

```
 <div id="wrapper">
        <div class="page" id="p1">1st</div>
        <div class="page" id="p2">2nd</div>
        <div class="page" id="p3">3rd</div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:14:33.777

```
$('#wrapper').on('click', 'div:last-child', function() {
    $('#wrapper').animate({
        'left': '-33%'
    }, 500, function() {
        $('#wrapper div:first-child').clone(true).appendTo('#wrapper');
        $('#wrapper div:first-child').remove();
        $('#wrapper').css('left', '0');
    });
}); 
```

当您动态添加`div`to`#wrapper`时，您需要委托事件处理程序。使用 jQuery你可以像上面那样**[`.on()`](http://api.jquery.com/on)**绑定。`click`

委托事件的语法`.on()`是：

```
$( staticParent ).on( eventName, targetChild, handler); 
```

其中，`staticParent`指非动态的目标元素（动态元素）的容器。

# php - 无法访问存储在缓存中的 JSON 文本文件

> ID：11548649
> 
> 赞同：0
> 
> 时间：2012-07-18T19:12:54.687
> 
> 标签：php, javascript, json, jquery, twitter

我在从存储在我网站缓存中的字段中检索一些 JSON 数据时遇到了一些麻烦。我正在编写的脚本从 twitter 列表中获取最新的推文，将它接收到的 JSON 数据存储在网站缓存中的 .txt 文件中。然后将其读取并转换为显示推文的字符串，或者至少应该如此。当我不缓存推文并直接访问它们时，它就可以工作，但是一旦我尝试缓存推文然后从缓存中访问它们，我就会碰壁。*cache-tweets.php*文件在服务器上作为 cron 作业运行，并且工作正常，它创建了一个包含 JSON 数据的文本文件，没有问题。*cache-tweets.php*的代码如下。

```
$cache = dirname(__FILE__) . '/cache/twitter-json.txt';  

$data = file_get_contents('https://api.twitter.com/1/lists/statuses.json?slug=tab&owner_screen_name=swoophoop&per_page=15&page=1&include_entities=true');   

$cachefile = fopen($cache, 'wb');  
fwrite($cachefile,utf8_encode($data));  
fclose($cachefile); 
```

然后，此代码应使用它：

```
<script type ="text/javascript"> 
$(document).ready(function(){
$.ajax({
    dataType: 'json',
    url: 'http://sotontab.co.uk/wp-content/cache/twitter-json.txt',
    success: function (data) {
        var strTweet = '';

        $.each(data, function(index, tweet){                
            var user_link = '\x3Ca href="http://twitter.com/' + tweet.user.screen_name + '">' + '\x3Cb>' + tweet.user.name + '\x3C/b>\x3C/a>';
            strTweet=strTweet + user_link + ' : &nbsp' + tweet.text.linkify() + '&nbsp' + '\x3Cdiv class="time">' + relative_time(tweet.created_at) + '\x3C/div>&nbsp&nbsp&nbsp';
        });
        tweetMarquee = new Marquee($('div#marquee'),strTweet,$('div#marquee').width);
    }
});
});      

</script> 
```

如果我将上面代码中的 url 替换为*cahe-tweets.php*中的 url，它会完美运行，并且推文会显示在我网站的选框内。但是如果我按原样运行它，什么都不会出现。选框甚至不会显示为空。有谁知道为什么它不适用于上述网站网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:03:52.843

您可以尝试的一件事是将 dataType 标记为文本，然后执行`data = JSON.parse(data);`并查看它是否有效。或者，如果您使用 json 后缀而不是文本文件保存文件，它可能会起作用。

# javascript - 如何仅更新 DIV 的文本而不更新任何其他子节点

> ID：11548655
> 
> 赞同：2
> 
> 时间：2012-07-18T19:13:33.703
> 
> 标签：javascript, html

```
<div id='container'>
  This is some text
  <span> more text </span>
</div> 
```

如何只更新文本部分（“这是一些文本”）而不影响“跨度”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:07:18.713

```
var childNodes = elem.childNodes;
for (var i = 0; i < childNodes.length; i++) {
    var child = childNodes[i];

    if (child.nodeName == "#text") {
      elem.removeChild(child);
      i--;
    }
} 
```

在 IE7 中工作（这就是我得到的）。您可能需要针对不同的浏览器调整nodeName检查，但总体概念是一样的：不检查`firstChild`，通过`nodeName`属性检查节点的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:16:15.863

**纯javascript解决方案**

# [演示](http://jsfiddle.net/LV9X8/)

```
 var fieldNameElement = document.getElementById('container');

fieldNameElement.removeChild(fieldNameElement.firstChild);
var newText = document.createTextNode("New Text");
fieldNameElement.insertBefore(newText , fieldNameElement.firstChild); 
```

或者

**jQuery**

# [演示](http://jsfiddle.net/mWK8r/)

```
$('#container').each(function(i,el) {
    el.firstChild.data = 'New Title Goes Here';
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:54:04.837

使用段落标签将其格式化并使用javascript来更改段落标签的innerHTML是最简单的。这是仅更改该文本的最简单和最短的方法。

```
<div id='container'>
<p id="text">This is some text</p>
<span> more text </span>
</div> 
```

# cakephp - 在 CakePHP 2.2.1 中更改哈希函数

> ID：11548656
> 
> 赞同：0
> 
> 时间：2012-07-18T19:13:41.117
> 
> 标签：cakephp, hash

有人可以向我解释如何更改 CakePHP 2.2.1 中的哈希函数吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:49:15.843

您可以`Security::setHash()`用来设置默认值，也可以使用第二个参数来`Security::hash()`表示散列类型。

[用于 setHash 的 API](http://api.cakephp.org/class/security#method-SecuritysetHash)

[哈希 API](http://api.cakephp.org/class/security#method-Securityhash)

# php - Magento 在哪里设置报价项目的价格？

> ID：11548659
> 
> 赞同：11
> 
> 时间：2012-07-18T19:13:49.273
> 
> 标签：php, oop, magento

每当您在 Magento 中加载购物车页面时，都会运行以下代码

```
$cart->init();
$cart->save(); 
```

这样做的一个副作用是，如果产品的价格已更新，则购物车中任何商品的价格都会更新。这实际上更新了`sales_flat_quote_item`. 我试图追踪**代码**中每个报价项目的价格更新位置，以及每个报价项目的保存位置。

我知道它**可以**设置的无数个位置。我希望有人知道它实际设置在哪里。Magento 1.7x 分支，尽管欢迎来自所有版本的信息。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T20:19:08.667

自己挖了这个。所以有这个

```
#File: app/code/core/Mage/Sales/Model/Quote.php
foreach ($this->getAllAddresses() as $address) {
    ...
    $address->collectTotals();
    ...
} 
```

这导致了这个

```
#File: app/code/core/Mage/Sales/Model/Quote/Address.php
public function collectTotals()
{
    Mage::dispatchEvent($this->_eventPrefix . '_collect_totals_before', array($this->_eventObject => $this));
    foreach ($this->getTotalCollector()->getCollectors() as $model) {
        $model->collect($this);            
    }
    Mage::dispatchEvent($this->_eventPrefix . '_collect_totals_after', array($this->_eventObject => $this));
    return $this;
} 
```

该`getTotalCollector`对象返回一个`sales/quote_address_total_collector`对象，该对象从中加载一系列收集器模型`global/sales/quote/totals`并调用`collect`它们。小计收集器的`collect`方法最终调用这个

```
#File: app/code/core/Mage/Sales/Model/Quote/Address/Total/Subtotal.php
protected function _initItem($address, $item)
{
    //...
    if ($quoteItem->getParentItem() && $quoteItem->isChildrenCalculated()) {
        $finalPrice = $quoteItem->getParentItem()->getProduct()->getPriceModel()->getChildFinalPrice(
           $quoteItem->getParentItem()->getProduct(),
           $quoteItem->getParentItem()->getQty(),
           $quoteItem->getProduct(),
           $quoteItem->getQty()
        );
        $item->setPrice($finalPrice)
            ->setBaseOriginalPrice($finalPrice);
        $item->calcRowTotal();
    } else if (!$quoteItem->getParentItem()) {
        $finalPrice = $product->getFinalPrice($quoteItem->getQty());
        $item->setPrice($finalPrice)
            ->setBaseOriginalPrice($finalPrice);
        $item->calcRowTotal();
        $this->_addAmount($item->getRowTotal());
        $this->_addBaseAmount($item->getBaseRowTotal());
        $address->setTotalQty($address->getTotalQty() + $item->getQty());
    }    
    //...
} 
```

这就是报价项目获得其价格设置/休息的地方。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-18T20:17:48.770

从高层次来看，启动整个过程的代码是第 464 行和第 465 行`Mage_Checkout_Model_Cart`：

```
 $this->getQuote()->collectTotals();
 $this->getQuote()->save(); 
```

新产品价格是根据方法中的报价设置`Mage_Sales_Model_Quote_Address_Total_Subtotal`的`_initItem`。您将`$item->setPrice`在从第 104 行开始的 if / else 语句中看到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:03:24.483

如果您尝试对购物车中的产品进行自定义价格更改，而不是扩展和修改核心类，我使用观察者 sales_quote_save_before。如果您尝试自定义定价（特别是当我有可以自定义长度的产品时），它会非常有用。

# algorithm - 寻找四边形内最大的矩形

> ID：11548660
> 
> 赞同：2
> 
> 时间：2012-07-18T19:13:55.513
> 
> 标签：algorithm, math

最近，我扫描了很多专辑封面，试图将我的音乐收藏数字化。扫描后的默认过程是旋转和裁剪。

对于旋转，重要的是找到一条或多条参考线。旋转后，“正常”线或多或少会水平（或垂直），而奇数线会有些倾斜。可以区分两个“不同”的旋转：

![两个四边形](../Images/8b5f628f174407c0d6cd07a5301e3c5c.png)

注意：两个四边形是两个专辑封面。您可以将专辑封面中的两条线想象成两条印刷线。所有参考线均以粗体显示。您可能想知道为什么专辑封面不只是矩形，但请注意这张图片被大大夸大了。也就是说，如果您曾经仔细查看过专辑封面，您会注意到它们很少接近矩形。

在情况 A 中，很明显大部分封面边缘是平行的并形成 90 度角，和/或打印对象过度倾斜，这表明打印本身是倾斜的。在这两种情况下，我都可以更好地使用封面边缘作为参考。

在情况 B 中，大部分线条看起来不规则，打印效果还不错。然后我最好使用打印的对象作为参考。

总而言之，这主要是一个直观的过程。

尽管上述不是实际问题的一部分，但我认为首先了解背景信息对您很有用。我们现在已经到了裁剪步骤，一直困扰着我的部分。

我的问题很简单：如果我必须裁剪任何专辑封面，我该如何裁剪它以使我留下专辑封面的最大部分？换句话说，我怎样才能找到一起形成四边形内最大可能矩形的 4 个值？

唯一的条件是矩形必须平行于参考线，即水平。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-18T19:25:14.180

如果您接受给定矩形将与现实世界中的 x 和 y 轴对齐而不是倾斜的约束，您可以执行以下操作

```
Given that point contains values x,y
Given quadrilateral roughly formed by

    A
                  B

      C          D

A rectangle may be formed via the following

leftX = max(A.x,C.x) 
topY = min(A.y,B.y)
rightX = min(B.x,D.x)
botY = max(C.y,D.y)

rectA = point(leftX, topY)
rectB = point(rightX, topY)
rectC = point(leftX, botY)
rectD = point(rightX, botY) 
```

# asp.net-mvc - Bootstrap 工具提示太大且太方形

> ID：11548661
> 
> 赞同：1
> 
> 时间：2012-07-18T19:14:03.733
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在尝试实现引导工具提示，而不是像示例中那样的小黑色区域，我正在体验一个大的外部矩形框。只是想知道是否有人遇到过这个问题？

我正在初始化

```
 $("[rel=tooltip]").tooltip(); 
```

我的工具提示区域是

```
<a id="button" style="float: left; margin-left:12px; margin-right:2px" rel="tooltip" title="first tooltip"  href="#"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:32:51.780

I was being terribly dumb, there was another file in the project that was overriding some of the bootstrap css files. I found this by using google chrome devloper tools>going to scripts, pausing while the hover box was up and then going back to elements, inspecting the hover and viewing which css files are being used.

# jquery - 通过 JQuery 在带有 colspan 的表格单元格上添加 CSS 边框底部

> ID：11548662
> 
> 赞同：0
> 
> 时间：2012-07-18T19:14:14.523
> 
> 标签：jquery, css

我正在通过 JQuery 进行一些操作，为几个单元格添加底部边框。但是，由于某种原因，底部边框也被添加到 JS 代码或 CSS 中不存在的单元格中。您可以通过下图和 jsfiddle 代码查看。可能是因为它的colspan引起的？ [http://jsfiddle.net/hCAwm/3/](http://jsfiddle.net/hCAwm/3/)

提前致谢。

![在此处输入图像描述](../Images/0c13a88c0ab16c42bf4610581f9d0508.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:20:31.223

是的，这是因为您之前使用 jQuery 应用的 colspan：[请参阅我更新的 fiddle](http://jsfiddle.net/chippper/hCAwm/13/)。

我不知道你为什么要添加 colspan，所以我无法提供修复 - 我只是在验证问题。

# php - Wordpress WP 电子商务 UPS Shipping

> ID：11548667
> 
> 赞同：1
> 
> 时间：2012-07-18T19:14:22.413
> 
> 标签：php, wordpress, e-commerce

我正在为我的产品使用 wordpress 和 wp 电子商务，我正在使用 UPS 进行运输，并且我在 UPS 上创建了一个帐户，并获得了 API，我在运输下输入的信息是正确的，并且我已经检查了所有正确的框。

我知道 UPS Shipping 只进行计算，但是有没有办法让用户下订单时，它会进入我的 UPS 帐户，并带有跟踪号或类似的东西。我收到了一封来自 wp-ecommerce 的电子邮件，上面说

无论是否拥有在线商店，您都可以按照自己的方式运送产品。在大多数情况下，这意味着进入您的 UPS 系统并创建一个运输标签。此时，您将获得一个跟踪号，然后您可以将其输入到该订单的商店销售日志中。然后将向具有跟踪信息的人发送通知。

这是运送我的最佳方式还是有人有更好的主意？

谢谢，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:02:13.907

我的两分钱：在开始遵循@c2h50h 的解决方案（很棒的发现，顺便说一句！）后，我意识到 PayPal 有一个打印运输标签选项，并与您的 UPS 帐户无缝集成。我的客户使用 PayPal Pro（这是他们每月 30 美元的白标支付解决方案），运输信息会自动传输到 PayPal，您可以在实施后打印标签。注意：这也应该适用于其他 PayPal（免费）平台。

当我在测试中得到@c2h50h 的解决方案时，我意识到要为客户端创建一个可行的插件需要大量的编码。不过，他们喜欢 PayPal 解决方案，我不得不承认，我很难为他们的 WordPress 管理页面设计更好/更可靠的东西。

如果您想走这条路线，请参考以下说明：

1.  注册 PayPal 专业版
2.  接下来，将您的 PayPal API 信息添加到 WP E-Commerce：[如何查找 PayPal API 凭据](http://www.putler.com/support/faq/how-to-get-paypal-api-username-password-and-signature-information/)
3.  设置完成后，登录 PayPal 帐户。
4.  在您的订单旁边的帐户页面上，单击“打印运输标签”。
5.  添加 UPS 帐户（或 USPS）
6.  客户可以从 PayPal 打印运输标签，然后向他们的 PayPal 或 UPS 帐户收费。
7.  将跟踪号放入 WP E-Commerce。

挺容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:22:37.770

这是目前可用于 WP eCommerce 的唯一方式：

我不知道有任何 WP 插件除了从 UPS 获取运费之外做任何事情 - 你必须让某人为你编写自定义插件，该插件还可以生成运输摘要并将其提交给 UPS 以获得运输标签。

这里有一些你可以开始制作这样一个插件的代码

```
$xmlRequest1='<?xml version="1.0" encoding="ISO-8859-1"?>
<AccessRequest>
<AccessLicenseNumber>ACCESS LICENCE NUMBER</AccessLicenseNumber>
<UserId>UPS USERNAME</UserId>
<Password>UPS PASSWORD</Password>
</AccessRequest>
<?xml version="1.0" encoding="ISO-8859-1"?>
<ShipmentAcceptRequest>
<Request>
<TransactionReference>
<CustomerContext>Customer Comment</CustomerContext>
</TransactionReference>
<RequestAction>ShipAccept</RequestAction>
<RequestOption>1</RequestOption>
</Request>
<ShipmentDigest>SHIPMENT DIGEST</ShipmentDigest>
</ShipmentAcceptRequest>
';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://wwwcie.ups.com/ups.app/xml/ShipAccept");
// uncomment the next line if you get curl error 60: error setting certificate verify locations
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
// uncommenting the next line is most likely not necessary in case of error 60
// curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlRequest1);
curl_setopt($ch, CURLOPT_TIMEOUT, 3600);

//if ($this->logfile) {
//   error_log("UPS REQUEST: " . $xmlRequest . "\n", 3, $this->logfile);
//}
$xmlResponse = curl_exec ($ch); // SHIP ACCEPT RESPONSE
//echo curl_errno($ch);

$xml = $xmlResponse;

preg_match_all( "/\<ShipmentAcceptResponse\>(.*?)\<\/ShipmentAcceptResponse\>/s",
$xml, $bookblocks );

foreach( $bookblocks[1] as $block )
{
preg_match_all( "/\<GraphicImage\>(.*?)\<\/GraphicImage\>/",
$block, $author ); // GET LABEL

preg_match_all( "/\<TrackingNumber\>(.*?)\<\/TrackingNumber\>/",
$block, $tracking ); // GET TRACKING NUMBER
//echo( $author[1][0]."\n" );
}

echo '<img src="data:image/gif;base64,'. $author[1][0]. '"/>'; 
```

代码来源：[http ://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/](http://webcollage.wordpress.com/2011/05/13/ups-label-print-with-php/)

在这里[http://webcollage.wordpress.com/2011/05/10/ups-shipping-confirmation-code-in-php/](http://webcollage.wordpress.com/2011/05/10/ups-shipping-confirmation-code-in-php/) 你会发现运输摘要的样子

# asp.net-mvc-3 - 如何在来自 Shibboleth 的 SAML SSO 后修复浏览器后退按钮问题

> ID：11548668
> 
> 赞同：3
> 
> 时间：2012-07-18T19:14:28.167
> 
> 标签：asp.net-mvc-3, postback, back-button, saml, shibboleth

在 .NET MVC (3) 上构建 SAML2 服务提供程序 Web 应用程序。我们使用 ComponentSpace 的 SAML2 库进行身份验证，*而不是*Shibboleth SP。以下是相关的控制器逻辑：

```
public class SignOnController : Controller
{
    // constructor-inject _services

    [HttpPost]
    public ActionResult SendAuthnRequest(string userName, string returnUrl)
    {
        // this users ComponentSpace internally to push user to IdP
        _services.SamlServiceProvider.SendAuthnRequest(args);
        return new EmptyResult();
    }

    [HttpPost]
    public ActionResult ReceiveAuthnResponse()
    {
        var samlResponse = _services.SamleServiceProvider
            .ReceiveSamlResponse(args);
        // ...
        return Redirect(samlResponse.RelayResourceUrl ?? defaultUrl);
    }
} 
```

最终，用户登陆中继 url 或默认登录页面。但是，当他们单击链接，然后单击返回按钮时，浏览器会返回到 Shibboleth IdP 服务器上的错误页面。在那之后，浏览器的前进和后退按钮最终变得毫无用处。

我在上述任何一种方法中做错了吗？发送时我应该返回 View() 而不是 EmptyResult() 吗？是否有某种方法可以重置浏览器历史记录以防止重复回发回 IdP？这是我可以在 ComponentSpace 的实现中配置的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:41:12.010

所以我知道您在身份验证期间在 IdP i WBSSO SAML2 配置文件中点击了返回按钮？我不知道您列举的组件，但在 Shibboleth 情况下，它总是以错误页面结尾。我可能错了，但是如果您考虑 SP->IdP 通信的性质，我相信没有其他选择，除非您重新实现某些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T02:05:18.920

通过浏览器发送的 SAML SSO 中使用的 SAML 协议消息。如您所见，在使用 SAML SSO 时单击浏览器的前进和后退导航按钮可能会出现问题。

这个问题没有简单的解决方案。您可以考虑合并 Javascript 来禁用导航按钮，但这很可能会导致其他问题。

我认为最好和最简单的解决方案是在发生这种情况时显示通用错误消息。这是您需要在应用程序中执行的操作。

我们发布的 MvcExampleIdentityProvider 和 MvcExampleServiceProvider 应用程序在大多数情况下都没有问题。他们使用 SAML 高级 API，而不是问题中使用的 SAML 低级 API，但这应该没有什么区别。在我们的示例中，我们也返回一个 EmptyResult。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T13:53:10.823

我们使用这个脚本。它检查是否从 SSO 重定向调用主 url。如果是这样，它会在用户单击后退按钮时跳过 SSO 页面。如果没有，脚本什么也不做，因为后退按钮按预期工作。

```
 (function(window, location) {
        var previous = document.referrer.toLowerCase();
        var issso = previous.indexOf('account/sso');
        if(issso >= 0){
            history.replaceState(null, document.title, location.pathname+"#!/skipsso");
            history.pushState(null, document.title, location.pathname);
            window.addEventListener("popstate", function() {
                if(location.hash === "#!/skipsso") {
                    setTimeout(function(){
                        history.go(-2);
                    },0);
                }
            }, false);
        }
    }(window, location)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T19:34:09.090

我们遇到了同样的问题，并使用 JavaScript 历史 API 解决了这个问题：

[https://www.thecssninja.com/javascript/stealing-history-api](https://www.thecssninja.com/javascript/stealing-history-api)

这并不好，因为本质上浏览历史是被操纵的。但它可以有效地工作并防止错误页面出现。您的 Web 应用程序中的后退/前进按钮继续正常工作，但用户无法返回到任何不是您的 Web 应用程序的先前页面。这是我们可以接受的妥协。

# python - MySQL Python 查询大型数据库的时间过长

> ID：11548672
> 
> 赞同：3
> 
> 时间：2012-07-18T19:14:50.850
> 
> 标签：python, mysql, performance

我有一个数据库，其中包含超过 30,000 个表和每个表中约 40-100 行。我想检索包含特定列下的字符串的表名列表。

例如：

我想检索包含'foo'的所有表的名称......

```
Database
    Table_1
        ID: 1, STR: bar
        ID: 2, STR: foo
        ID: 3, STR: bar
    Table_2
        ID: 1, STR: bar
        ID: 2, STR: bar
        ID: 3, STR: bar
    Table_3
        ID: 1, STR: bar
        ID: 2, STR: bar
        ID: 3, STR: foo 
```

所以在这种情况下，函数应该返回 ['Table_1', 'Table_3']

到目前为止，我有这个，它运行良好，但需要 2 多分钟才能执行，这对于我想到的应用程序来说太长了。

```
self.m('SHOW TABLES')
result = self.db.store_result()
tablelist = result.fetch_row(0, 1)
for table in tablelist:
    table_name = table['Tables_in_definitions']
    self.m("""SELECT `def` FROM `""" + table_name + """` WHERE `def` = '""" + str + """'""")
    result = self.db.store_result()
    r = result.fetch_row(1, 1)
    if len(r) > 0:
        results.append(table_name) 
```

我不够聪明，无法想出一种方法来加快速度，所以如果有人有任何建议，将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:56:02.513

如果您只是测试每个表 where 中是否存在一行`def = 'str'`，那么一件简单的事情（没有其他更改）就是在`LIMIT 1`查询末尾添加一个子句。

（如果您的查询正在执行全表扫描，MySQL 可以在找到第一行后停止它。如果没有找到行，则全表扫描必须运行到表的末尾。）

这也避免了准备大量行以返回给客户端并在不需要时将它们返回给客户端的开销。

`def`此外，如果您的查询正在大表中查找“大海捞针”，则作为前导列的索引（至少在您最大的表上）可能会提高性能。

* * *

**更新：**

我重新阅读了您的问题，我看到您有 30,000 个表要检查，即 30,000 个单独的查询，30,000 次到数据库的往返。（ACCCKKK。）

所以我之前的建议几乎没有用。（这将更适合 40 个表，每个表有 30,000 行。）

另一种方法是同时查询一堆这些表。不过，我什至会犹豫一次尝试超过几百张桌子，所以我会分批进行。

```
SELECT DISTINCT 'Table1' AS table_name FROM Table1 WHERE def = 'str'
 UNION ALL
SELECT DISTINCT 'Table2' FROM Table2 WHERE def = 'str'
 UNION ALL
SELECT DISTINCT 'Table3' FROM Table3 WHERE def = 'str' 
```

如果`def`在每个表中都是唯一的，或者，如果它几乎是唯一的，并且您可以处理返回的重复 table_name 值，则可以摆脱 DISTINCT 关键字。

您确实需要确保列表中的每个表都有一个名为`def`. 如果您遇到的表中没有该列，则整个批次都会失败。并且 a`SHOW TABLES`不会检查列名。我将使用这样的查询来获取具有名为的列的表名列表`def`：

```
SELECT table_name
  FROM information_schema.columns
 WHERE table_schema = DATABASE()
   AND column_name = 'def'
 GROUP BY table_name
 ORDER BY table_name 
```

# sql - 如何在亲子关系中最好地保持地位

> ID：11548673
> 
> 赞同：1
> 
> 时间：2012-07-18T19:14:50.390
> 
> 标签：sql, tsql, sql-server-2008-r2, relational-database

我不知道如何用这个问题的标题来表达清楚，所以这是我最好的解释：

我的客户有一系列相互之间存在父子关系的表。例如：

```
CREATE TABLE dbo.First_Level (
    id INT IDENTITY(1, 1) NOT NULL,
    name VARCHAR(20) NOT NULL,
    active BIT NOT NULL DEFAULT(1),
    CONSTRAINT PK_First_Level PRIMARY KEY CLUSTERED (id)
)

CREATE TABLE dbo.Second_Level (
    id INT IDENTITY(1, 1) NOT NULL,
    first_level_id INT NOT NULL,
    name VARCHAR(20) NOT NULL,
    active BIT NOT NULL DEFAULT(1),
    CONSTRAINT PK_Second_Level PRIMARY KEY CLUSTERED (id),
    CONSTRAINT FK_SecondLevel_FirstLevel FOREIGN KEY (first_level_id) REFERENCES dbo.First_Level (id)
)

CREATE TABLE dbo.Third_Level (
    id INT IDENTITY(1, 1) NOT NULL,
    second_level_id INT NOT NULL,
    name VARCHAR(20) NOT NULL,
    active BIT NOT NULL DEFAULT(1),
    CONSTRAINT PK_Third_Level PRIMARY KEY CLUSTERED (id),
    CONSTRAINT FK_ThirdLevel_SecondLevel FOREIGN KEY (second_level_id) REFERENCES dbo.Second_Level (id)
) 
```

棘手的部分是，如果父母被标记为不再活动（活动 = 0），那么它下面的任何孩子也应该被视为不再活动。但是，即使父母仍然处于活动状态，孩子**也可以**被标记为不再活动。

我正在寻找有关如何最好地执行这些业务规则的建议。我可以覆盖视图，然后查看所有父级以确定任何给定行的最终活动标志，但我的客户已经围绕这些表编写了大量代码。

我可以通过触发器强制执行规则，但我希望有一种更优雅的方式来执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:01:55.643

我个人不喜欢把业务规则放到数据库里，但是开发中关于这个是有分歧的。无论如何，这是一个从逻辑级别应用您描述的规则的解决方案，即不更改基础表。这允许您限制更新并确保所有表中每一行的活动/非活动状态不会与其他行耦合得太紧。

```
SELECT
    FL.id AS FirstLevelId
    ,FL.active AS FirstLevelActive
    ,SL.id AS SecondLevelId
    -- If First Level is Active, ignore it by passing it as NULL to coalesce, and take the value of Second_Level.active
    -- If First Level is not active, take its value as the "active" value for this level. 
    ,COALESCE(NULLIF(FL.active, 1), SL.active) AS SecondLevelActive
    ,TL.id AS ThirdLevelId
    -- Same as above, but with one more level involved
    ,COALESCE(NULLIF(FL.active, 1), NULLIF(SL.active, 1), TL.active) AS ThirdLevelActive
FROM
    First_Level FL
    LEFT JOIN
    Second_Level SL ON
        (SL.first_level_id = FL.id)
    LEFT JOIN
    Third_Level TL ON
        (TL.second_level_id = SL.id) 
```

**优点**
- 通过应用业务规则来检索活动状态，但保留级别的数据。
- 无需更新，因此无需跟踪级联更新，也无需使用触发器。
- 通过将此查询放在视图中，应用程序将始终“即时”获得正确的状态

**缺点**
- 由于表格结构，解决方案很僵化
- 添加新律师需要相应地更改查询

*致谢*
感谢《厕所物语 4》的作曲家 Ghidorah 提供的鼓舞人心的音乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:18:59.583

当前活动的顶级条目集是对整个集的顶级顶级条目的 RESTRICT 视图：

CREATE VIEW FIRST_LEVEL_ACTIVE AS SELECT * FROM FIRST_LEVEL WHERE ACTIVE ... ;

当前处于活动状态的二级条目集合是那些满足条目本身仍然处于活动状态并且它们的父项出现在刚刚定义的视图中的条件：

CREATE VIEW SECOND_LEVEL_ACTIVE AS (SELECT * FROM SECOND_LEVEL WHERE ACTIVE ...) NATURAL JOIN FIRST_LEVEL_ACTIVE; /* 或其他任何与 NATURAL JOIN 达到相同效果的操作 */

当前处于活动状态的三级条目集合是那些满足条目本身仍然处于活动状态且其父项出现在 SECOND_LEVEL_ACTIVE 中的条件的条目

等等等等

为了处理对这些视图的更新，SQL 标准具有 INSTEAD OF 触发器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:34:36.773

您可以通过在更新活动状态时让更新语句也更新子项来强制执行业务规则：

```
-- Delete first level
DECLARE @FirstLevelIdToDelete INT
SET @FirstLevelIdToDelete = x

UPDATE  Third_Level
SET     Third_level.active = 0
FROM    Third_Level tl
JOIN    Second_Level sl ON tl.second_level_id = sl.id
WHERE   sl.first_level_id = @FirstLevelIdToDelete

UPDATE  Second_Level
SET     active = 0
WHERE   Second_Level.first_level_id = @FirstLevelIdToDelete

UPDATE  First_Level
SET     active = 0
WHERE   id = @FirstLevelIdToDelete

-- Delete second level
DECLARE @SecondLevelIdToDelete INT
SET @SecondLevelIdToDelete = x

UPDATE  Third_Level
SET     active = 0
WHERE   Third_Level.second_level_id = @SecondLevelIdToDelete

UPDATE  Second_Level
SET     active = 0
WHERE   id = @SecondLevelIdToDelete

-- Delete third level
DECLARE @ThirdLevelIdToDelete INT
SET @ThirdLevelIdToDelete = x

UPDATE  Third_Level
SET     active = 0
WHERE   id = @ThirdLevelIdToDelete 
```

# python - logging.info 不会出现在控制台上，但会出现警告和错误

> ID：11548674
> 
> 赞同：128
> 
> 时间：2012-07-18T19:14:52.377
> 
> 标签：python, logging, warnings

当我使用 记录事件时`logging.info`，它不会出现在 Python 终端中。

```
import logging
logging.info('I am info')  # no output 
```

相反，记录的事件`logging.warn`确实出现在终端中。

```
import logging
logging.warn('I am warning')  # outputs "I am warning" 
```

我可以更改环境级别以`logging.info`打印到控制台吗？我想避免在每个 Python 文件中进行更改。

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-07-18T19:19:29.303

根记录器始终默认为警告级别。试着打电话

```
logging.getLogger().setLevel(logging.INFO) 
```

你应该没事。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2018-10-11T13:43:00.200

就像@ztyx 所说的默认记录器级别是警告。您必须将其设置为较低的级别

您可以通过使用[logging.basicConfig](https://docs.python.org/3/library/logging.html#logging.basicConfig)和设置[记录器级别](https://docs.python.org/3/library/logging.html#logging-levels)来做到这一点：

```
logging.basicConfig(level=logging.DEBUG) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-11-27T09:17:55.143

上述解决方案对我不起作用，但[这里](https://docs.python.org/3/howto/logging-cookbook.html)的代码确实：

```
# set up logging to file
logging.basicConfig(level=logging.DEBUG,
                    format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',
                    datefmt='%m-%d %H:%M',
                    filename='/temp/myapp.log',
                    filemode='w')
# define a Handler which writes INFO messages or higher to the sys.stderr
console = logging.StreamHandler()
console.setLevel(logging.INFO)
# add the handler to the root logger
logging.getLogger('').addHandler(console) 
```

（为了可读性，我省略了部分代码）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-06-18T05:51:44.883

这将起作用

```
import logging

logging.basicConfig()
logger = logging.getLogger(__name__)
logger.setLevel(logging.INFO)

logger.info('its working') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-12T21:58:02.220

对于那些使用`absl.logging`，等效的命令是

```
from absl import logging
logging.set_verbosity(logging.INFO) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-12T07:01:56.480

工作模块级记录器所需的最低代码是多少？我做了一个实验（使用python 3.8.6版）。

要点是：

*   `logging.basicConfig()`需要（但是，`level=...`不需要指定）
*   有*必要*配置根记录器：`logging.getLogger().setLevel(...)`

因此，一个最小的工作示例是：

```
# in library/module code
import logging
lg = logging.getLogger('x.y.z')

# in application code
logging.basicConfig()
logging.getLogger().setLevel(logging.INFO)  # configure root logger
lg.info("hi")  # this should print now 
```

这是实验：

```
In [1]: import logging

In [2]: lg = logging.getLogger('x.y.z')

In [3]: lg.info(1)

In [4]: logging.basicConfig()

In [5]: lg.info(1)

In [6]: logging.basicConfig(level=logging.INFO)

In [7]: lg.info(1)

In [8]: logging.basicConfig()

In [9]: logging.getLogger().setLevel(logging.INFO)

In [10]: lg.info(1)
INFO:x.y.z:1 
```

# c - C 中的二进制文件：使用 fread 函数和 nlogn 排序问题

> ID：11548675
> 
> 赞同：0
> 
> 时间：2012-07-18T19:14:55.283
> 
> 标签：c, string, binary, binaryfiles

我真的很想得到你对以下问题的帮助。

我需要从两个**两个二进制文件中读取****N**个整数（二进制格式） ，并在**O(nlogn)**时间内将所有常见整数（再次以二进制格式）写入另一个输出文件。

 ****这是我想要做的草图：

1-我知道我不能使用`fscanf`with `%d`，因为这些不是文本文件，但是因为我知道每个文件中有 N 个数字，所以我想在“for”循环中运行 N 次并且

```
for (i=0; i<N; i++) {
    fread(&int1, 4, 1, file1);
    fread(&int2, 4, 1, file2);
    arr1[i]=int1;
    arr2[i]=int2;
} 
```

在哪里`arr1`，`arr2`每个都是 N 大小的 int 数组，这是正确的吗？如果我知道有 N 个整数，其中每个整数由 4 位表示，我会在文件末尾完成，是吗？

2-我想`qsort`用步骤对每个数组进行排序`nlogn`，但是我应该如何在仍然 nlogn 步骤的情况下比较两者？我没有找到任何聪明的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:22:14.713

您的代码大部分是正确的，但它在到达文件末尾时将无法正常运行。 `fread`直到您尝试读取结尾才检测到 EOF，因此您应该测试返回值以防它达到 EOF 或发生错误，例如：

```
if(fread(..., file1) < 1 ||
   fread(..., file2) < 1)
{
    // Error or EOF occurred
    break;
} 
```

您也可以在一次`fread`调用中直接读取整个数组，而不是循环，因为数据是二进制的：

```
int arr1[20], arr2[20];
if(fread(arr1, sizeof(arr1[0]), 20, file1) < 20 ||
   fread(arr2, sizeof(arr2[0]), 20, file2) < 20)
{
    // Error or early EOF occurred
} 
```

对于第二个问题，只需将所有整数放入一个平面数组中。您可以通过将它们直接读入单个数组来执行此操作，或者在读入所有数据后将它们复制到一个数组中。然后`qsort`是组合数组。****

# wordpress - WordPress - 获取自定义分类类别中的帖子

> ID：11548678
> 
> 赞同：1
> 
> 时间：2012-07-18T19:15:03.867
> 
> 标签：wordpress, taxonomy, custom-post-type

我的 WP 查询有点奇怪。我有一个自定义帖子类型（投资组合），有一个名为 year 的自定义分类。我每年都有类别，所以我想做的是显示每年的所有帖子。问题是，只有 2012 年有效。如果我订购类别 ASC/DESC 没关系 - 只有 2012 有效。

```
<section id="content">
    <?php
    $categories = get_categories('taxonomy=year&order=DESC');
    foreach($categories as $category) : ?>
    <article class="year">
        <h2><?php echo $category->name ?></h2>
        <div class="items"> 
        <?php
        $posts = get_posts('taxonomy=year&post_type=portfolio&year=' . $category->slug);
        foreach($posts as $post) : ?>
            <div class="item">
            <?php 
            $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'full');
            echo '<a href="' . $large_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" rel="lightbox[' . $category->slug . ']" >';
            the_post_thumbnail('thumbnail');
            echo '</a>';
            ?>
            </div>
        <?php endforeach; ?>                    
        </div>  
    </article>
    <?php 
    endforeach;
    wp_reset_query();
    ?>
</section> 
```

我究竟做错了什么？对我来说，这似乎是对的..我已经尝试了很多不同的方法，从真实的查询到荒谬的排序，但我就是做错了..

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:16:10.360

我现在自己解决了它，仍然没有得到 100%，但它至少可以工作.. 必须有一些更聪明的方法来做到这一点，因为我现在循环遍历每个术语的所有图像。好吧，这是代码（从自定义分类中获取按术语分组的帖子）。

```
<section id="content">
<?php
$categories = get_categories('taxonomy=year&order=DESC');

foreach($categories as $category) { ?>

    <article class="year">
        <h2><?php echo $category->name ?></h2>
        <div class="items"> 
        <?php
        $args = array(
            'post_type' => 'portfolio'
        );

        query_posts($args);
        $count = 0;

        while(have_posts()) : the_post();
            $terms = get_the_terms( $post->ID, 'year' );

            foreach ( $terms as $term ) {
                $imgslug = $term->name;
            }

            if($imgslug == $category->name) {
                if($count == 6) {
                    echo '<div class="expanded-items">';
                }
        ?>
                <div class="item">
                <?php 
                $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'full');
                echo '<a href="' . $large_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" rel="lightbox[' . $category->slug . ']" >';
                the_post_thumbnail('thumbnail');
                echo '</a>';
                ?>
                </div>

                <?php 
            }
            $count++;

        endwhile;
        if($count >= 6) {
            echo '</div>';
        }
        ?>                  
        </div>
        <div class="expand">Visa fler</div>
    </article>
<?php } ?>
</section> 
```

那是一个可扩展的列表，因此它从一开始就显示 6，然后扩展以显示其余项目（jQuery）。

# python - 扭曲获取 POST 请求的主体

> ID：11548682
> 
> 赞同：10
> 
> 时间：2012-07-18T19:15:21.533
> 
> 标签：python, http, post, twisted

行，

这应该很简单，因为人们总是这样做。我想让一个 POST 请求的主体发送一个扭曲的`Agent`. 这是用扭曲的`FileBodyProducer`. 在服务器端，我为我的方法获取了一个`request`对象。`render_POST`

如何找回尸体？

服务器：

```
from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "{0}".format(request.args.keys())
    def render_POST(self, request):
        return "{0}".format(request.data)
        with open(request.args['filename'][0], 'rb') as fd:
            fd.write(request.write())

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run() 
```

客户：

```
from StringIO import StringIO

from twisted.internet import reactor
from twisted.web.client import Agent
from twisted.web.http_headers import Headers

from twisted.web.client import FileBodyProducer
from twisted.internet.defer import Deferred
from twisted.internet.protocol import Protocol
from pprint import pformat

class BeginningPrinter(Protocol):
    def __init__(self, finished):
        self.finished = finished
        self.remaining = 1024 * 10

    def dataReceived(self, bytes):
        if self.remaining:
            display = bytes[:self.remaining]
            print 'Some data received:'
            print display
            self.remaining -= len(display)

    def connectionLost(self, reason):
        print 'Finished receiving body:', reason.getErrorMessage()
        self.finished.callback(None)

agent = Agent(reactor)
body = FileBodyProducer(StringIO("hello, world"))
d = agent.request(
    'POST',
    'http://127.0.0.1:8080/',
    Headers({'User-Agent': ['Twisted Web Client Example'],
             'Content-Type': ['text/x-greeting']}),
    body)

def cbRequest(response):
    print 'Response version:', response.version
    print 'Response code:', response.code
    print 'Response phrase:', response.phrase
    print 'Response headers:'
    print pformat(list(response.headers.getAllRawHeaders()))
    finished = Deferred()
    response.deliverBody(BeginningPrinter(finished))
    return finished
d.addCallback(cbRequest)

def cbShutdown(ignored):
    reactor.stop()
d.addBoth(cbShutdown)

reactor.run() 
```

我能找到的用于设置消费者方面的唯一文档还有[一些不足之处](http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7)。首先，消费者如何使用该`write(data)`方法来*接收*结果？

我错过了将这两个组件连接在一起的哪一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T20:19:45.870

好的，所以它就像调用一样简单`request.content.read()`。据我所知，这在[API](http://twistedmatrix.com/documents/current/api/twisted.web.http.Request.html)中没有记录。

这是客户端的更新代码：

```
from twisted.internet import reactor
from twisted.web.client import Agent
from twisted.web.http_headers import Headers

from twisted.web.client import FileBodyProducer
from twisted.internet.defer import Deferred
from twisted.internet.protocol import Protocol
from pprint import pformat

class BeginningPrinter(Protocol):
    def __init__(self, finished):
        self.finished = finished
        self.remaining = 1024 * 10

    def dataReceived(self, bytes):
        if self.remaining:
            display = bytes[:self.remaining]
            print 'Some data received:'
            print display
            self.remaining -= len(display)

    def connectionLost(self, reason):
        print 'Finished receiving body:', reason.getErrorMessage()
        self.finished.callback(None)

class SaveContents(Protocol):
    def __init__(self, finished, filesize, filename):
        self.finished = finished
        self.remaining = filesize
        self.outfile = open(filename, 'wb')

    def dataReceived(self, bytes):
        if self.remaining:
            display = bytes[:self.remaining]
            self.outfile.write(display)
            self.remaining -= len(display)
        else:
            self.outfile.close()

    def connectionLost(self, reason):
        print 'Finished receiving body:', reason.getErrorMessage()
        self.outfile.close()
        self.finished.callback(None)

agent = Agent(reactor)
f = open('70935-new_barcode.pdf', 'rb')
body = FileBodyProducer(f)
d = agent.request(
    'POST',
    'http://127.0.0.1:8080?filename=test.pdf',
    Headers({'User-Agent': ['Twisted Web Client Example'],
             'Content-Type': ['multipart/form-data; boundary=1024'.format()]}),
    body)

def cbRequest(response):
    print 'Response version:', response.version
    print 'Response code:', response.code
    print 'Response phrase:', response.phrase
    print 'Response headers:'
    print 'Response length:', response.length
    print pformat(list(response.headers.getAllRawHeaders()))
    finished = Deferred()
    response.deliverBody(SaveContents(finished, response.length, 'test2.pdf'))
    return finished
d.addCallback(cbRequest)

def cbShutdown(ignored):
    reactor.stop()
d.addBoth(cbShutdown)

reactor.run() 
```

这是服务器：

```
from twisted.web import server, resource
from twisted.internet import reactor
import os

# multi part encoding example: http://marianoiglesias.com.ar/python/file-uploading-with-multi-part-encoding-using-twisted/
class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "{0}".format(request.args.keys())
    def render_POST(self, request):
        with open(request.args['filename'][0], 'wb') as fd:
            fd.write(request.content.read())
        request.setHeader('Content-Length', os.stat(request.args['filename'][0]).st_size)
        with open(request.args['filename'][0], 'rb') as fd:
            request.write(fd.read())
        request.finish()
        return server.NOT_DONE_YET

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run() 
```

我现在可以写我收到的文件内容，并读回结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:04:45.473

如果内容类型是 application/x-www-form-urlencoded 或 multipart/form-data，则正文将被解析并放入 request.args dict。

如果 body 太大，则写入 temp 文件，否则写入 StringIO。

读取正文后，将调用方法 finish()。您可以继承 Request 并在此方法中解析主体或做其他事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T21:49:03.980

如果您想使用正文（不是文件）进行简单的 POST，您可以执行以下操作

```
import urllib
from twisted.internet import protocol
from twisted.internet import defer
from twisted.web.http_headers import Headers
from twisted.internet import reactor
from twisted.web.client import Agent
from twisted.web.iweb import IBodyProducer
from zope.interface import implements
from twisted.internet.defer import succeed

class StringProducer(object):
    implements(IBodyProducer)

    def __init__(self, body):
        self.body = body
        self.length = len(body)

    def startProducing(self, consumer):
        consumer.write(self.body)
        return succeed(None)

    def pauseProducing(self):
        pass

    def stopProducing(self):
        pass

class SimpleReceiver(protocol.Protocol):
    def __init__(self, d):
        self.buf = ''; self.d = d

    def dataReceived(self, data):
        self.buf += data

    def connectionLost(self, reason):
        self.d.callback(self.buf)

def httpRequest(url, values=None, headers=None, method='POST'):

    agent = Agent(reactor)
    data = urllib.urlencode(values) if values else None

    d = agent.request(method, url, Headers(headers) if headers else {},
        StringProducer(data) if data else None
        )

    def handle_response(response):
        if response.code == 204:
            d = defer.succeed('')
        else:
            d = defer.Deferred()
            response.deliverBody(SimpleReceiver(d))
        return d

    d.addCallback(handle_response)
    return d 
```

现在要在实际代码中使用上面的内容，您可以即

```
d = httpRequest('htpp://...', post_data_as_dictionary, some_headers, 'POST')
d.addCallback(your_ok_callback_function)
d.addErrback(your_errorback_function) 
```

示例标题应如下所示

```
headers = {'Accept' : ['application/json',],
            'Content-Type': ['application/x-www-form-urlencoded',] 
} 
```

我希望这会有所帮助

# javascript - Google 文档脚本 addToFolder

> ID：11548683
> 
> 赞同：0
> 
> 时间：2012-07-18T19:15:28.920
> 
> 标签：javascript, google-api, google-apps-script, google-drive-api

我正在尝试使用 Google Docs 运行脚本的能力为新客户创建必要的文件夹结构（将内容/图像上传到）。到目前为止，这是我所拥有的：

```
/**
 * This script creates the necessary folder structure for a new client
 */
function newClientSetup() {

  var initial = DocsList.getFolder("Clients");
  var client = DocsList.addtoFolder.createFolder("Client Name");
  var file = DocsList.addtoFolder(client);

}; 
```

现在这不起作用（`TypeError: Cannot call method "createFolder" of undefined. (line 7)`），但我无法弄清楚如何`Folder`在`DocList`. 我看到`DocsList`有一个`createFolder`方法，我可以像这样使用：

```
var folder = DocsList.createFolder("Folder Name"); 
```

但我试图从一个名为`Clients`（已在 Google Docs 中）的父文件夹开始，然后创建以下结构：

```
Clients
    Client Name
        Content
        Images 
```

理想情况下，我可以运行此脚本，但传入一个变量`Client Name`以实际创建客户端名称，但我没有从文档中找到太多帮助。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:33:07.903

这是它如何工作的示例，请参阅评论：

```
function createSubFolder(subfolder) { // the argument is the name of the folder you want to create
    var parentfolder = DocsList.getFolder('Clients'); //begin in the client folder (you could also open by Id, I prefer the ID as I find it more failsafe (ID are unique, names aren't necessarily 
    var newFolder = DocsList.createFolder(subfolder); // create the new subfolder from the argument of the function
    newFolder.addToFolder(parentfolder);// add the newly created folder to 'Clients'
} 
```

要测试此功能，只需使用以下内容：

```
function test(){
    createSubFolder('test');// this will create a new folder called test in your Clients folder
} 
```

注意：*要获取文件夹的 ID，请在文件夹 url 中的 folder/ 后面取值。**粗体****示例*：[https: //drive.google.com/?hl=fr&tab=wo#folders/](https://drive.google.com/?hl=fr&tab=wo#folders/) **0B3qSFxxxxxxxxxdsMTFZMDQ**

如果您有更多文件夹级别，则序列可能会更长......但结构始终相同，并且每个文件夹都是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:46:06.590

这是我编写的一个函数和一些代码，可能会对您有所帮助。它使用子函数来查看文件夹是否已经存在以及是否不存在。如果该文件夹确实存在，它会返回有助于链接的对象（[在此处引用它的使用方式](http://mashe.hawksey.info/2012/06/using-google-apps-script-to-fast-track-student-feedback-behind-the-code/)）：

```
function newClientSetup() {
   var ROOT_FOLDER = "Clients";
   var CLIENTNAME_FOLDER = "Client Names";

   // get a the system route folder (if it deosn't existing make it 
   var rootFolder = folderMakeReturn(ROOT_FOLDER); 
   // create/get draft and release folders 
   var clientNamesFolder = folderMakeReturn(CLIENTNAME_FOLDER,rootFolder, ROOT_FOLDER+"/"+CLIENTNAME_FOLDER);   
}

// function to see if folder exists in DocList and returns it 
// (optional - if it doesn't exist then makes it) 
function folderMakeReturn(folderName,optFolder,optFolderPath){ 
   try { 
      if (optFolderPath != undefined){ 
         var folder = DocsList.getFolder(optFolderPath); 
      } else { 
         var folder = DocsList.getFolder(folderName); 
      } 
      return folder; 
   } catch(e) { 
      if (optFolder == undefined) { 
         var folder = DocsList.createFolder(folderName); 
      } else { 
         var folder = optFolder.createFolder(folderName); 
      } 
      return folder; 
   } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T08:49:07.457

我知道问题/答案已有 3 年历史，而且之前是正确的，但是这个解决方案不再像 2015 年那样与 Google Apps 脚本一起正常工作，目前在特定文件夹上创建子文件夹的最简单方法是，

```
function createSubFolder(parentId, folderName)
{
  var id="";
  try
  {
    var parent=DriveApp.getFolderById(parentId);   // get parent folder
    var folder =parent.createFolder(folderName);   // create sub folder 
    id=folder.getId();                             // get the subfolder id to return
  }
  catch(e)
  {
  }
  return id;
} 
```

使用您要创建的子文件夹名称传递父文件夹 ID，Folder 类具有方法 createFolder 在其下创建一个文件夹，该文件夹返回创建的子文件夹的对象。

# .net - 强命名程序集代替未命名程序集

> ID：11548685
> 
> 赞同：0
> 
> 时间：2012-07-18T19:15:36.277
> 
> 标签：.net, strongname, portable-class-library

有没有办法使用强命名程序集代替未命名程序集？

真正的问题是：

我正在创建一个引用另一个库（例如：System.Data.dll）的库（例如：SqliteOrm.dll）（在我的实例中是可移植类库，问题是任何类型），这取决于平台（iOS， Android、WP、桌面和 WinRT）。这个库 (SqliteOrm.dll) 然后由每个平台的应用程序使用，但会切换 System.Data.dll。

然而，System.Data.dll 以强名称存在于 GAC 中。这会在使用库时导致异常：

```
System.IO.FileNotFoundException: 
Could not load file or assembly 'System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
The system cannot find the file specified. 
```

我这样做的原因是因为 System.Data.dll 在 WP 中不存在，但在 M4A 中存在。我在 M4A 上使用本机 System.Data.dll，但在 WP 上使用我自己的版本。我的版本只包括必要的类型，所以它确实有所不同。

我目前正在使用 Metro 和桌面应用程序进行测试，这就是发生异常的地方。我隐约记得 M4A 运行时实际上并没有进行检查，但我希望我的库也可以在桌面上工作。

有没有人对我有任何提示，或者这整件事是一个不好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:41:53.537

考虑在任何地方使用您自己的 System.Data。可能比其他任何事情都少很多痛苦。

这里有一些建议：[http ://www.simple-talk.com/blogs/2007/08/30/strong-naming-remoting-nothg-but-ye-liveliest-awfulness/](http://www.simple-talk.com/blogs/2007/08/30/strong-naming-remoting-nothg-but-ye-liveliest-awfulness/)

然后是疯狂的方法：它实际上可以将您的程序集设置为由 MS 密钥延迟签名，然后在安装时将程序集注册为延迟签名程序集（在 WP 上）。当然，现在您需要管理员权限才能安装，并且可能会让任何期望在 WP 上获得更健全的 System.Data 的人感到困惑。

# maven - Mule 3 和 Maven：“filterAppDirectory”配置参数不起作用

> ID：11548686
> 
> 赞同：1
> 
> 时间：2012-07-18T19:15:37.003
> 
> 标签：maven, mule

我有一个使用 Maven 的 Mule 3.3 项目。我希望 Mule Maven 插件将过滤应用于我的 Mule 配置文件（位于：“src/main/app/mule-config.xml”）

我将“filterAppDirectory”配置参数设置为“true”，就像它在[文档](http://www.mulesoft.org/maven-mule-plugin)中所说的那样，但这不起作用。它只是将配置文件复制到项目 ZIP 文件中而不过滤它。

这是我的POM：

```
<project>
  ...
  <build>
    <resources>
      <resource>
        <filtering>true</filtering>
        <directory>src/main/resources</directory>
      </resource>
    </resources>

    <filters>
      <filter>src/main/filters/filter.properties</filter>
    </filters>

    <plugins>
      <plugin>
        <groupId>org.mule.tools</groupId>
        <artifactId>maven-mule-plugin</artifactId>
        <version>1.7</version>
        <extensions>true</extensions>
        <configuration>
          <copyToAppsDirectory>true</copyToAppsDirectory>
          <filterAppDirectory>true</filterAppDirectory>
        </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

谢谢。

编辑：在 maven-mule-plugin 项目页面上打开了一个问题：

[https://github.com/mulesoft/maven-mule-plugin/issues/10](https://github.com/mulesoft/maven-mule-plugin/issues/10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:39:21.890

插件版本 1.7 不支持`<filterAppDirectory>`配置参数。在 1.8 版中添加了支持。

见：[https ://github.com/mulesoft/maven-mule-plugin/issues/10](https://github.com/mulesoft/maven-mule-plugin/issues/10)

# wordpress - 带视频的 Wordpress 滑块

> ID：11548690
> 
> 赞同：0
> 
> 时间：2012-07-18T19:15:42.877
> 
> 标签：wordpress

我正在寻找适用于图像和视频的滑块。我尝试了很多，但他们没有这个功能。我可以自己做（基于类别和 jquery 中的帖子） - 这不是一个大问题，但问题是当在视频幻灯片上点击播放时 - 幻灯片必须停止。

我在哪里可以找到类似的东西（首选免费）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:13:05.897

看看 Flexslider 和很棒的 Flexslider 2。

[http://flexslider.woothemes.com/video.html](http://flexslider.woothemes.com/video.html)

# django - Django 中的 LDAP 身份验证

> ID：11548691
> 
> 赞同：2
> 
> 时间：2012-07-18T19:15:45.247
> 
> 标签：django

我对 Django 和 LDAP 很陌生……不胜感激。

所以我正在尝试在 Django 中设置和 ldaps。我正在尝试遵循此（http://packages.python.org/django-auth-ldap/）指令，但我有几个问题......

1.  AUTHENTICATION_BACKENDS 位于何处？这样我就可以添加 django_auth_ldap.backend.LDAPBackend
2.  AUTH_LDAP_SERVER_URI 在哪里？

如果我得到这些的解决方案，我也许能够找出其余的......

非常感谢您对此进行调查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:30:22.467

AUTHENTICATION_BACKENDS 应该位于您的 settings.py 中。这是几乎所有配置完成的地方。

对于 AUTH_LDAP_SERVER_URI，我认为您需要将其作为全局变量添加到您的 settings.py 中。

您还可以快速查看您引用的页面上的[示例配置。](http://packages.python.org/django-auth-ldap/#example-configuration)

* * *

**编辑**

你是对的，这些变量不存在于初始`settings.py`. 您需要将以下内容添加到您的 settings.py 中：

```
# Keep ModelBackend around for per-user permissions and maybe a local
# superuser.
AUTHENTICATION_BACKENDS = (
    'django_auth_ldap.backend.LDAPBackend',
    'django.contrib.auth.backends.ModelBackend',
)

AUTH_LDAP_SERVER_URI = "ldap://ldap.example.com"  # replace by the real URI 
```

# sql - 如何使用 SQL 在 Access 中的表中列出字段的名称

> ID：11548697
> 
> 赞同：17
> 
> 时间：2012-07-18T19:16:13.297
> 
> 标签：sql, ms-access

您能否告诉我是否可以列出 MS Access 表中的所有字段名称？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T23:27:06.617

我在 ms 访问中工作太多了。

我知道这样做的唯一方法是使用 vba，并定义例如记录集，然后循环遍历字段。

例如：

```
Sub ListFields()

dim rst as new adodb.recordset
rst.open "SELECT * FROM SomeTable", CurrentProject.Connection, adOpenForwardOnly, adLockReadOnly
' Note: adOpenForwardOnly and adLockReadOnly are the default values '
' for the CursorType and LockType arguments, so they are optional here '
' and are shown only for completeness '

dim ii as integer
dim ss as string
for ii = 0 to rst.fields.count - 1
    ss = ss & "," & rst.fields(ii).name
next ii

Debug.Print ss

End Sub 
```

字符串变量`ss`将包含名为“SomeTable”的表中所有列名的逗号分隔列表。

通过对逻辑进行一些重新格式化，如果您愿意，您应该能够将此数据插入到另一个表中，然后将其查询出来。

这有帮助吗？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-15T18:47:07.570

此版本易于运行，并将直接粘贴到 Access 中。将此函数添加到模块中，按 F5 运行，然后从输入框中复制结果：

```
Public Function FieldNames() As String

    Dim sTable As String
    Dim rs As DAO.Recordset
    Dim n As Long
    Dim sResult As String

    sTable = InputBox("Name of table?")
    If sTable = "" Then
        Exit Function
    End If

    Set rs = CurrentDb.OpenRecordset(sTable)

    With rs
        For n = 0 To .Fields.Count - 1
            sResult = sResult & .Fields(n).Name & vbCrLf
        Next 'n
        .Close
    End With

    Set rs = Nothing

    InputBox "Result:" & vbCrLf & vbCrLf _
            & "Copy this text (it looks jumbled, but it has one field on each line)", _
            "FieldNames()", sResult

End Function 
```

**替代输出：**

用户 user1003916 提供了 InputBox 的替代方案来克服 1024 个字符的限制（我还没有测试过）：

```
Sub CopyText(Text As String)

    'VBA Macro using late binding to copy text to clipboard.
    'By Justin Kay, 8/15/2014

    Dim MSForms_DataObject As Object
    Set MSForms_DataObject = CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}")

    MSForms_DataObject.SetText Text
    MSForms_DataObject.PutInClipboard
    Set MSForms_DataObject = Nothing

End Sub 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-19T13:04:35.903

**更新：要使用此 SQL 查询，您必须使用 DBEAVER 等工具。访问客户端将不允许您查询它的隐藏结构。**

哎呀！IMO：我无法想象想要深入 VBA 的阴暗面

# 如何通过 SQL 获取访问表列

```
SELECT * FROM information_schema.columns 
    WHERE TABLE_NAME="YOUR_TABLE_NAME" 
       AND 
    TABLE_SCHEMA="PUBLIC" 
```

PS 我注意到 Access 将我的架构称为“公共”

上面使用了 Access 2016，并通过 ODBC 和 jdbc:ucanaccess 进行了测试，效果非常好。

**示例输出**

[![列名的屏幕截图](../Images/566b32e39532e41dfa38cea9f6f316c1.png)](https://i.stack.imgur.com/aGNff.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-18T19:44:55.937

您可以简单地使用 Documenter 工具。转至`Database Tools > Database Documenter`，选择表格并按 OK。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-30T23:52:53.717

一种快速而肮脏的方法涉及 Excel。请执行下列操作：

1.  在数据表视图中打开表。
2.  使用适用于您的 Access 版本的特定过程导出到 Excel 文件。
3.  打开 Excel 文件（如果尚未打开）。
4.  选择并复制包含标题的第一行。
5.  将另一个工作表添加到工作簿（如果不存在）。
6.  单击 A1。
7.  选择性粘贴 > 转置

字段将粘贴在单个列中。要找出它们的字段索引号，请在单元格 B1 中键入“0”，然后将系列填写到字段号的最后一行。

此外，您可以按字母顺序对列进行排序，特别是对于涉及数十个字段的旧版平面文件。当我尝试将平面文件转换为关系模型时，这确实节省了很多时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-13T19:51:10.847

这不是 SQL，但对于像我这样只需要列出查询所需的字段名称的人来说，这个问题是最重要的 Google 结果，因为 Access 不支持 "* except foo, bar" 以获得 99% 的桌子。

答案改编自 Patrick Wood 的 social.msdn.com 答案，访问 MVP [https://social.msdn.microsoft.com/Forums/office/en-US/1fe5546b-db3f-4e17-9bf8-04f4dee233b7/how-to-列出指定表中的所有字段名称？forum=accessdev](https://social.msdn.microsoft.com/Forums/office/en-US/1fe5546b-db3f-4e17-9bf8-04f4dee233b7/how-to-list-all-the-field-names-in-a-specified-table?forum=accessdev)

将 tablename 更改为您在模块中的名称。这个函数应该在全局级别：

```
Function ListTdfFields()
    ' NOT doing DIMs, since then you must enable/attach ADODB or DAO
    ' Dim db As ADO.Database
    Set db = CurrentDb
    tablename = "tblProductLicense"  ' <=== YOUR TABLE NAME HERE
    Set tdf = db.TableDefs(tablename)
    For Each fld In tdf.Fields
        Debug.Print tablename; ".["; fld.Name; "]," ; 
        ' remove ending ; for 1 line per field
    Next
    Debug.Print ""
    Set tdf = Nothing
    Set db = Nothing
End Function 
```

然后添加一个宏 RunCode ListTdfFields() 并运行它。输出将被发送到模块的 VBA 设计视图的即时窗口。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-19T10:46:53.203

已经有一些很好的答案，但我决定添加我自己的转折。希望它们是不言自明的。

## 用法：

*   getFieldNames(TableName:="Table1",IncludeBrackets:=True,Delimiter:=vbNewLine,CopyToClipboard:=True)
*   getFieldNames(TableName:="Table1",IncludeBrackets:=True,CopyToClipboard:=True)
*   getFieldNames(TableName:="Table1",IncludeBrackets:=True)
*   getFieldNames(TableName:="Table1")

我用它来构建一个字段名称数组：

*   Chr(34) & getFieldNames(TableName:="Table1",IncludeBrackets:=False, 分隔符:= Chr(34) & "," & Chr(34)) & Chr(34)

* * *

```
Function getFieldNames(ByVal TableName As String, Optional ByVal IncludeBrackets As Boolean, Optional ByVal Delimiter As String = ", ", Optional ByVal CopyToClipboard As Boolean) As String
    Dim rs As DAO.Recordset

    On Error Resume Next
    Set rs = CurrentDb.OpenRecordset(TableName)
    On Error GoTo 0

    If rs Is Nothing Then Exit Function

    Dim results() As String
    ReDim results(rs.Fields.Count - 1)

    Dim n As Long
    For n = 0 To rs.Fields.Count - 1
        results(n) = rs.Fields(n).Name
    Next
    rs.Close

    Dim result As String
    If IncludeBrackets Then
        result = "[" & Join(results, "]" & Delimiter & "[") & "]"
    Else
        result = Join(results, Delimiter)
    End If

    If CopyToClipboard Then
        With CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}")
            .SetText result
            .PutInClipboard
        End With
    End If

    getFieldNames = result
End Function 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-20T17:09:05.990

此 SQL 在 Access 2016 中适用于查询，而不是表，但可能有用。

```
SELECT MSysObjects.Name AS QueryName, 
       IIf(IsNull([Name1]),
           Right([Expression],Len([Expression])-InStr(1,[Expression],".")),[name1])
           AS FieldName
  FROM MSysQueries INNER JOIN MSysObjects 
    ON MSysQueries.ObjectId = MSysObjects.Id
 WHERE MSysQueries.Attribute=6; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-21T22:02:17.367

构建查询：

```
SELECT Table_Name.*
FROM Table_Name
WHERE False; 
```

导出到 Excel 您将在没有任何数据的情况下将每个字段名称放在一行中。如果您选择行并复制，您可以粘贴特殊>转置并将它们全部放在一个列中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-17T17:39:48.370

我想分享这个 VBA 解决方案，我没有写，只是稍作修改（将 tableName 更改为使用'SourceTable'）。运行后，您可以查询它创建的表。它利用了隐藏的系统表。

```
Sub GetField2Description()
'************************************************* *********
'Purpose: 1) Deletes and recreates a table (tblFields)
' 2) Queries table MSysObjects to return names of
' all tables in the database
' 3) Populates tblFields
'Coded by: raskew
'Inputs: From debug window:
' Call GetField2Description
'Output: See tblFields
'************************************************* *********
Dim db As DAO.Database, td As TableDef
Dim rs As Recordset, rs2 As Recordset
Dim Test As String, NameHold As String
Dim typehold As String, SizeHold As String
Dim fielddescription As String, tName As String
Dim n As Long, i As Long
Dim fld As Field, strSQL As String
n = 0
Set db = CurrentDb
' Trap for any errors.
On Error Resume Next
tName = "tblFields"
'Does table "tblFields" exist? If true, delete it;
DoCmd.SetWarnings False
DoCmd.DeleteObject acTable, "tblFields"
DoCmd.SetWarnings True
'End If
'Create new tblTable
    db.Execute     "CREATE TABLE tblFields(Object TEXT (55), FieldName TEXT (55),     FieldType TEXT (20), FieldSize Long, FieldAttributes Long, FldDescription TEXT (20));"
strSQL = "SELECT MSysObjects.Name, MSysObjects.Type From MsysObjects WHERE"
strSQL = strSQL + "((MSysObjects.Type)=1)"
strSQL = strSQL + "ORDER BY MSysObjects.Name;"
Set rs = db.OpenRecordset(strSQL)
If Not rs.BOF Then
' Get number of records in recordset
rs.MoveLast
n = rs.RecordCount
rs.MoveFirst
End If
Set rs2 = db.OpenRecordset("tblFields")
For i = 0 To n - 1
fielddescription = " "
Set td = db.TableDefs(i)
'Skip over any MSys objects
If Left(rs!Name, 4) <> "MSys" And Left(rs!Name, 1) <> "~" Then
NameHold = rs!Name
On Error Resume Next
For Each fld In td.Fields
tableName = fld.SourceTable

fielddescription = fld.Name
typehold = FieldType(fld.Type)
SizeHold = fld.Size
rs2.AddNew
rs2!Object = tableName
rs2!FieldName = fielddescription
rs2!FieldType = typehold
rs2!FieldSize = SizeHold
rs2!FieldAttributes = fld.Attributes
rs2!FldDescription = fld.Properties("description")
rs2.Update
Next fld
Resume Next
End If
rs.MoveNext
Next i
rs.Close
rs2.Close
db.Close
End Sub
Function FieldType(intType As Integer) As String
Select Case intType
Case dbBoolean
FieldType = "dbBoolean" '1
Case dbByte
FieldType = "dbByte" '2
Case dbInteger
FieldType = "dbInteger" '3
Case dbLong
FieldType = "dbLong" '4
Case dbCurrency
FieldType = "dbCurrency" '5
Case dbSingle
FieldType = "dbSingle" '6
Case dbDouble
FieldType = "dbDouble" '7
Case dbDate
FieldType = "dbDate" '8
Case dbBinary
FieldType = "dbBinary" '9
Case dbText
FieldType = "dbText" '10
Case dbLongBinary
FieldType = "dbLongBinary" '11
Case dbMemo
FieldType = "dbMemo" '12
Case dbGUID
FieldType = "dbGUID" '15
End Select
End Function 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-03T06:08:03.123

我来这里是为了寻找同样的要求，在参考了这个帖子之后，为我的要求起草了下面的代码。源表中的字段名称将被添加到一个数组中，稍后字段名称将分配给第二个表。只是在这里分享，这可能会帮助以后的人..

```
Public Sub FieldName_Change()
Dim intNumberOfFields, intX As Integer
Dim txtTableName,txttmpTableName txtFieldName() As String

intNumberOfFields = GetFieldNames(txtTableName, txtFieldName())
For intX = 1 To intNumberOfFields
  CurrentDb.TableDefs(txttmpTableName).Fields("F" & intX).Name = txtFieldName(intX)
Next intX
End Sub

Public Function GetFieldNames(ByVal txtTableName As String, ByRef txtFiledName() As String) As Integer
Dim rs As DAO.Recordset
Dim n As Long
Dim sResult As String

Set rs = CurrentDb.OpenRecordset(txtTableName)
ReDim txtFiledName(rs.Fields.Count)
With rs
    For n = 0 To .Fields.Count - 1
        txtFiledName(n + 1) = .Fields(n).Name
    Next n
    .Close
    GetFieldNames = n
End With
Set rs = Nothing
End Function 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-07-19T02:34:39.233

似乎这项任务在过去更容易。这个答案可能高度依赖于版本。它适用于我对 Access 2007 DB 的快速测试：

```
select 
Specs.SpecName AS TableName,
Columns.FieldName
from
MSysIMEXColumns Columns
inner join MSysIMEXSpecs Specs on Specs.SpecID = Columns.SpecID
order by
Specs.SpecName,
Columns.FieldName 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-03-16T23:06:32.500

试试这个...

```
 private void Button_OldDDLDump_Click(object sender, EventArgs e)
    {
        string _cnstr = "connectionstringhere";
        OleDbConnection _cn = new OleDbConnection(_cnstr);
        try
        {
            _cn.Open();
            System.Data.DataTable _dt = null;            
            try
            {
                _dt = _cn.GetSchema("tables");
                m_msghelper.AppendArray( DataTableHelper.DataTableToString(_dt) );                               
            }
            catch (Exception _ex)
            {
                System.Diagnostics.Debug.WriteLine(_ex.ToString());
            }
            finally
            {
                _dt.Dispose();
            }
        }
        catch (Exception _ex)
        {
            System.Diagnostics.Debug.WriteLine(_ex.ToString());
        }
        finally
        {
            _cn.Close();
        }
    } 
```

在此处将数据库结构转储到字符串数组的辅助方法..

```
public static class DataTableHelper
{
    public static string[] DataTableToString( System.Data.DataTable dt )
    {
        List<string> _retval = new List<string>();

        foreach (System.Data.DataRow row in dt.Rows)
        {
            foreach (System.Data.DataColumn col in dt.Columns)
            {
                _retval.Add( string.Format("{0} = {1}", col.ColumnName, row[col]) );
            }
            _retval.Add( "============================");
        }
        return _retval.ToArray();
    }
} 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-06-06T18:42:16.817

从 information_schema.columns 中选择 column_name，其中 table_name='table'

# php - 我应该将其转换为布尔值还是假布尔值？

> ID：11548710
> 
> 赞同：4
> 
> 时间：2012-07-18T19:17:02.203
> 
> 标签：php, syntax

如果我得到一个整数变量（从`0`+ 开始），我可以做一些事情来确保这个数字**不是** `0`（零）：

*   选项1：

    ```
    if($number > 0){
        // number is not zero
    } 
    ```

*   选项 2：

    ```
    if($number){
        // number is not zero
    } 
    ```

*   选项 3：

    ```
    if((bool) $number){
        // number is not zero
    } 
    ```

*   选项 4：

    ```
    if(!!$number){
        // number is not zero
    } 
    ```

*   等等……

以上哪一项被认为是最好的？
还是有更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:19:16.073

使用*相同的* [比较](http://php.net/manual/en/language.operators.comparison.php)操作，它不会做任何类型的杂耍（并且速度更快）。

```
if ($number !== 0) {
 //         ^^^
 // Number is not identical to 0
} 
```

***注意：**这是假设变量实际上是“整数变量”，而不是恰好包含数字的字符串。*

```
if (false == ($number === 0)) {
 //                   ^^^
 // It is false that Number is identical to 0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:21:28.660

我一直用这个：

```
if(!empty($number)){
 // Number is not 0
} 
```

我认为它是两只鸟与一块石头。

*   变量集。
*   不是`0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:22:22.010

```
if($number != 0){
 // Number is not 0
} 
```

# haskell - 我需要什么类型的签名才能将函数列表转换为 haskell 代码？

> ID：11548711
> 
> 赞同：3
> 
> 时间：2012-07-18T19:17:06.920
> 
> 标签：haskell

> **可能重复：**
> [为什么在haskell中不允许这样的函数定义？](https://stackoverflow.com/questions/6168880/why-is-such-a-function-definition-not-allowed-in-haskell)

我做了一个名为 .haskell 的函数`funlist`。它的作用是接受一个起始值和一个函数列表，并将列表中的所有函数应用于起始值。

```
funlist thing [function] = function thing
funlist thing (function:functions) = funlist (function thing) functions
funlist _ _ = error "need a list of functions" 
```

这个函数的问题是它的类型是`funlist :: t -> [t -> t] -> t`. 该类型意味着虽然 ghc 将允许不将起始值转换为完全不同类型的函数列表（例如`[sin,cos,tan]`将被允许），但将起始值转换为不同类型（例如`show`）的函数将产生错误因为该函数与类型签名不匹配。

这不是该功能应该如何工作的方式。它应该能够获取更改起始值类型（例如`[sin,show]`）的函数列表。这个函数基本上转换`funlist 5 [sin,cos,tan,isInfinite,show]`为`show $ isInfinite $ tan $ cos $ sin $ 5`，虽然后者有效，但前者无效。

有什么办法可以让这个功能正常工作吗？

**编辑：**我知道`.`and `>>>`，我只是想知道是否有办法使这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T19:37:51.110

您可以使用 GADT 编写您想要的内容：

```
{-# LANGUAGE GADTs #-}
module Funlist where

data F x y where
  Id :: F a a
  Ap :: (a->b) -> F b c -> F a c

-- A very round about way to write f x = x + x

f1 :: Int -> Char
f1 = toEnum

f2 :: Char -> String
f2 x = x:x:[]

f3 :: String -> [Int]
f3 = map fromEnum

f4 :: [Int] -> Integer
f4 = foldr (+) 0 . map toInteger

f_list :: F Int Integer
f_list = Ap f1 (Ap f2 (Ap f3 (Ap f4 Id)))

ap :: F a b -> a -> b
ap Id x = x
ap (Ap f gs) x = ap gs (f x) 
```

现在`ap f_list 65`是`130`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T19:25:30.623

这不适用于 Haskell 中的普通函数/普通列表，因为它需要动态类型语言，而不是像 Haskell 这样的静态类型语言。根据`funlist`运行时函数列表的内容，函数不能有不同的类型；它的类型必须在编译时知道。此外，编译器必须能够检查函数链是否有效，这样您就不能使用`[tan, show, sin]`例如列表。

这个问题有两种解决方案。

您可以使用[异构列表](http://hackage.haskell.org/package/HList)。这些列表可以存储每个元素都是不同类型的列表。然后，您可以检查每个元素必须是函数并且一个元素返回类型必须是下一个函数的参数类型的约束。这很快就会变得非常困难。

您还可以使用[`Data.Dynamic`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Dynamic.html)让您的函数采用和返回动态类型。在这种情况下，您必须执行一些动态类型转换。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-18T19:29:48.237

如果您对这个函数列表所做的只是将它们应用于管道中的单个值，那么不要编写和调用您的`funlist`函数，而是执行以下操作：

```
show . isInfinite . tan . cos . sin $ 5 
```

或者，如果您不想在代码中反转列表，请执行以下操作：

```
import Control.Arrow (>>>)

(sin >>> cos >>> tan >>> isInfinite >>> show) 5 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T23:44:51.083

通常，Haskell 中的函数具有看起来像 的类型，对于和`a -> b`的某些选择。在你的情况下，你有一个函数列表，你想计算这个：`a``b``[f0, ..., fn]`

```
funlist [f0, ..., fn] x == f0 (funlist [f1, ..., fn] x)
                        == f0 (f1 (funlist [f2, ..., fn] x))
                        ...
                        == f0 (f1 (... (fn x))) 
```

`t -> t`您遇到的问题是以下两件事的结果：

1.  此计算要求 的参数类型为`f0`的返回类型`f1`， 的参数类型为`f1`的返回类型`f2`，依此类推：`f0 :: y -> z, f1 :: x -> y, ..., fn :: a -> b`。
2.  但是你将所有这些函数放在一个列表中，并且 Haskell 中列表的所有元素都必须具有相同的类型。

这两个加在一起，意味着 中使用的函数列表`funlist`必须具有 type `[t -> t]`，因为这是同时满足两个条件的唯一方法。

除此之外，dave4420 的答案是最好的简单答案，IMO：使用函数组合。如果你不能使用它，因为要完成的计算只在运行时知道，那么你希望有一些比列表更复杂的数据结构来表示可能的计算。Chris Kuklewicz 对此提出了一个非常通用的解决方案，但我通常会针对手头的特定问题区域做一些定制的事情。

也很高兴知道你`funlist`可以这样写：

```
funlist :: a -> [a -> a] -> a
funlist x fs = foldr (.) id fs x 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T06:33:52.487

简短的回答：不，没有办法用列表做你想做的事（至少以一种明智的方式）。

原因是 Haskell 中的列表总是同质的，即列表的每个元素必须具有相同的类型。您要添加到列表中的函数具有以下类型：

```
sin :: Floating a => a -> a
isInfinite :: Floating b => b -> Bool
show :: Show c => c -> String 
```

所以你不能把函数放在同一个列表中。您的两个主要选择是：

1.  使用列表以外的结构（例如 HList 或自定义 GADT）
2.  使用动态类型

由于其他答案已经给出了 GADT 示例，以下是使用动态类型实现函数的方法：

```
import Data.Dynamic

funlist :: Dynamic -> [Dynamic] -> Dynamic
funlist thing (function:functions) = funlist (dynApp function thing) functions
funlist thing [] = thing 
```

但是，使用动态类型会导致一些样板，因为您必须在静态和动态类型之间进行转换。因此，要调用该函数，您需要编写

```
funlist (toDyn 5) [toDyn sin, toDyn cos, toDyn tan, toDyn isInfinite, toDyn show] 
```

不幸的是，即使这样还不够。下一个问题是动态值必须具有[同态](http://www.haskell.org/haskellwiki/Monomorphism)类型，因此例如，`show :: Show a => a -> String`您需要手动指定具体类型而不是函数`show :: Bool -> String`，因此上述变为：

```
funlist (toDyn (5::Double)) [toDyn sin, toDyn cos, toDyn tan, toDyn isInfinite,
    toDyn (show :: Bool -> String)] 
```

而且，函数的结果是另一个动态值，所以如果我们想在常规函数中使用它，我们需要将它转换回静态值。

```
fromDyn (funlist (toDyn (5::Double)) [toDyn sin, toDyn cos, toDyn tan,
    toDyn isInfinite, toDyn (show :: Bool -> String)]) "" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T23:39:50.143

你想要的东西在 Haskell 中有效，但它不是一个列表。它是一个函数组合，实际上可以包装在 GADT 中：

```
import Control.Arrow
import Control.Category
import Prelude hiding ((.), id)

data Chain :: * -> * -> * where
    Chain :: (a -> c) -> Chain c b -> Chain a b
    Id    :: Chain a a

apply :: Chain a b -> a -> b
apply (Chain f k) x = apply k (f x)
apply Id x          = x 
```

现在您可以在一定程度上检查函数链的结构。您可以找到的信息不多，但`Chain`如果您需要更多信息，可以向构造函数添加更多元信息。

该类型还形成了一个有趣的类别，它保留了附加信息：

```
instance Category Chain where
    id = Id

    Id . c           = c
    c  . Id          = c
    c2 . Chain f1 k1 = Chain f1 (c2 . k1)

instance Arrow Chain where
    arr f = Chain f Id

    first (Chain f c) = Chain (first f) (first c)
    first Id = Id 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T09:59:18.117

那里有一些使用 GADT 的答案，这是做这些事情的好方法。我想在这里补充的是，这些答案中使用的结构已经以更一般的方式存在：它被称为[thrist](http://hackage.haskell.org/packages/archive/thrist/0.2.2/doc/html/Data-Thrist.html)（“类型线程列表”）：

```
Prelude Data.Thrist> let fs = Cons (show :: Char -> String) (Cons length Nil)
Prelude Data.Thrist> let f = foldl1Thrist (flip (.))  fs
Prelude Data.Thrist> :t fs
fs :: Thrist (->) Char Int
Prelude Data.Thrist> :t f
f :: Char -> Int
Prelude Data.Thrist> f 'a'
3 
```

当然，你也可以`foldl1Thrist (>>>) fs`改用。请注意，thrists 构成一个类别、一个箭头和一个幺半群（带有`appendThrist`）。

# ruby-on-rails - guides.rubyonrails.org 上不正确的自连接模型示例

> ID：11548712
> 
> 赞同：0
> 
> 时间：2012-07-18T19:17:07.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

[我觉得http://guides.rubyonrails.org/association_basics.html#self-joins](http://guides.rubyonrails.org/association_basics.html#self-joins)上给出的以下自加入模型示例不正确。

```
class Employee < ActiveRecord::Base
  has_many :subordinates, :class_name => "Employee",
    :foreign_key => "manager_id"
  belongs_to :manager, :class_name => "Employee"
end 
```

我觉得应该如下。你能建议哪一个是正确的，为什么？

```
class Employee < ActiveRecord::Base
  has_many :subordinates, :class_name => "Employee",
  belongs_to :manager, :class_name => "Employee", :foreign_key => "manager_id"
end 
```

我的理由：模型轴承`belongs_to`关系带有它引用的模型的foreign_key。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:07:45.080

你是对的。应该是这样的。

但是在那种情况下，我会使用acts_as_tree 或类似的东西来构建层次结构。允许您调用诸如`Employee.first.descendants`查找为该人工作的所有人员之类的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:32:02.427

这个例子是正确的。

“约定优于配置”的口号在这里适用，如果不是，您只需要指定外键是什么`"#{name_of_association}_id"`

因此`belongs_to :manager, :class_name => "Employee"`暗示外键是`manager_id`

但是`has_many :subordinates, :class_name => "Employee"`假设`subordinates_id`是孩子的外键，这就是为什么必须定义 if 的原因。has_many 中的定义`:foreign_key`将针对孩子，并将与当前模型的`id`.

# php - 如何创建具有相同键的数组？

> ID：11548714
> 
> 赞同：-2
> 
> 时间：2012-07-18T19:17:13.663
> 
> 标签：php, arrays, mongodb, key

都来自数组：

```
$g = array("Drama", "Crime"); 
```

做：

```
$genre = array("genre" => "Drama", "genre" => "Crime"); 
```

我们需要对数据库 mongoDB 进行查询，基本上是在这个条件下：

```
genre = 'Drama' OR genre = 'Crime' 
```

这就是我尝试的原因：

```
find(array("genre" => "Drama", "genre" => "Crime")) 
```

由于键相同，因此不可能创建这样的数组。如何执行所需的查询？

**UPD** 正确的解决方案：

```
$g = array("Drama", "Crime");
find(array("genre" => array('$in' => $g))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:18:36.237

在数组内部创建一个数组：

```
$genre = array(
    "genre" => array(
        "Drama",
        "Crime"
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:38:35.307

我对 MongoDB 了解不多（我不得不谷歌这个：[Docs](http://www.mongodb.org/display/DOCS/OR+operations+in+query+expressions)），但是有一个`$in`操作员。你要`genere IN ("Drama", "Crime")`

我认为这就是你在 PHP/MongoDB 中的做法

```
find(array("genre" => array('$in' => array("Drama", "Crime")))) 
```

# java - COM4J 将字节数组传递给 COM 方法

> ID：11548718
> 
> 赞同：2
> 
> 时间：2012-07-18T19:17:26.697
> 
> 标签：java, com, com4j

我正在尝试通过 com4j 库从 java 调用一些 COM 方法。在我可以访问的文档中，COM 方法的签名是：

```
HRESULT method1 ([in] VARIANT (SafeArray UI1) vInBuf, 
                [out] VARIANT (SafeArray UI1) *pvOutBuf,
                [out, retval] long *plResult) 
```

我想将一个字节数组传递给该方法并从中获取一个字节数组。Com4J 生成的界面显示为：

```
@DISPID(2) 
@VTID(8)
int method1 (
  @MarshalAs(NativeType.VARIANT) java.lang.Object vSendData,
  java.lang.Object pvReceiveData); 
```

但是我不知道以什么格式发送它们。

```
byte[] req = new byte[]{1,2,3,4};
byte[] res = new byte[512];
method1(req,res); 
```

似乎不起作用。也没有将它们声明为对象或诸如此类的东西。我查看了 com4j.SafeArray ( [http://com4j.kohsuke.org/apidocs/com4j/SafeArray.html](http://com4j.kohsuke.org/apidocs/com4j/SafeArray.html) )，但我不太明白应该如何将数组放入其中。

有没有其他人曾经使用过 com4j 库并弄清楚如何发送/接收字节数组？

# objective-c - 将 png 加载到 UIImageView iOS

> ID：11548723
> 
> 赞同：1
> 
> 时间：2012-07-18T19:17:38.307
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, png

我有两张需要相互叠加的图像，它们都是 png 图像（因为我需要能够使它们透明）。但是，当我将它们加载到我的 xib 文件中的 UIImage 视图中时，它们都不会显示！当我尝试使用相同图像的 jpg 格式时，它可以正常工作，但是因为 jpg 不支持透明度，所以我需要的叠加效果丢失了。如何让 png 图像实际显示在窗口中？

![界面生成器](../Images/cdbebac299206bedaaea698e7220e0f8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:26:19.090

这是一种从代码中比从接口“Crappy”生成器更容易完成的任务：

```
CGRect imageFrame = CGRectMake(x, y, width, height);

UIImage *image1 = // however you obtain your 1st image
UIImage *image2 = // however you obtain your 2nd image

UIImageView *imgView1 = [[UIImageView alloc] initWithImage:image1];
// Adjust the alpha of the view
imgView1.alpha = 1.0f; // This is most advisably 1.0 (always)
imgView1.backgroundColor = [UIColor clearColor];
imgView1.frame = imageFrame;

UIImageView *imgView2 = [[UIImageView alloc] initWithImage:image2];
// Adjust the alpha of the view
imgView1.alpha = 0.5f; // or whatever you find practical
imgView1.backgroundColor = [UIColor clearColor];
imgView2.frame = imageFrame;

// Assume a view controller
[self.view addSubview:imgView1];
[self.view addSUbview:imgView2]; // add the image view later which you wanna be on the top of the other one

// If non-ARC environment, we need to take care of the percious RAM
[imgView1 release];
[imgView2 release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:31:40.023

尝试在 photoshop 或 pixelmator 等照片编辑器中打开您的 png 图像，然后将其再次保存为非隔行扫描（在 png 的保存选项中）。

# jquery - JQuery Ajax 脚本在本地机器上工作但不在服务器上

> ID：11548725
> 
> 赞同：0
> 
> 时间：2012-07-18T19:17:42.307
> 
> 标签：jquery, html, ajax, file

我已经详尽地浏览了互联网以找到解决此问题的方法。
所以我有一个 jquery ajax 脚本，它加载到一个 csv 文件中并生成一些将数据合并到 csv 文件中的 html 代码。

```
<script type="text/javascript">
    $(document).ready(function() {
    $.ajax({

       type: "GET",
       url: "database.csv",
       dataType: "html",
       data: {},
       success: function(text) {
           // Location of key information
           var nameLoc;
           var siteLoc;
           var typeLoc;
           var categoryLoc;
           var descripLoc;
           var canRequestLoc;
           var EClassLoc;
           var description='';
           var temp = "Y";
           var charTemp;
           var site;
           var len;
           var fields = text.split(/\n/);
           fields.pop(fields.length-1);

           var headers = fields[0].split(','), html = '<table align="center" id="searchData">';

           for(var i = 0; i < headers.length; i += 1) {
              switch (headers[i]){
                case 'Name':
                    nameLoc = i;
                 break;
                case 'RequestSystem':
                    siteLoc = i;
                break;
                case 'Type':
                    typeLoc = i;
                break;
                case 'Category':
                    categoryLoc = i;
                break;
                case 'canRequest':
                    canRequestLoc = i;
                break;
                case 'ECAPSClassification':
                    EClassLoc = i;
                break;
                case 'Description':
                    descripLoc = i;
                break;
              };
           }
           descripLoc = canRequestLoc + 2;

           var data = fields.slice(1, fields.length);

           for(var j = 0; j < data.length; j += 1) {

              var dataFields = data[j].split(',');
              if (dataFields[nameLoc]==0){
                html += '</table>';
                $(html).appendTo('body');
                break;
              };

              html += '<tr>';
              html += '<td class="demo-show"> <h3>' + dataFields[nameLoc] +  '</h3>';
              html += '<div class="menuBar"> ';

              charTemp = dataFields[canRequestLoc];
              if (charTemp=='Y'){
                switch (dataFields[siteLoc]){
                    case 'Service Now':
                        site = 'https://ccsn.service-now.com/'; 
                        break;
                    case 'CCR IdM':
                        site = 'http://idm.na.cokecce.com'; 
                        break;
                    case 'ECAPS':
                        site = 'https://ecaps.cokeccr.com/ecaps';   
                        break;
                    case 'KO IdM':
                        site = 'https://apps.ko.com/idm';   
                        break;
                    default:
                        site = 'default';   
                        break;
                };
                html += '<a href="' + site + '">' + 'Request Access' + '</a><br>';
              }
              else{
                html += '<br><b> ' + dataFields[canRequestLoc+1] + '</b> <br> <br>';
              };
              html += '<b>Request System: </b>' + dataFields[siteLoc] + '<br>';
              if (dataFields[siteLoc]=='ECAPS'){
                html += '<b>ECAPS Classification: </b>' + dataFields[EClassLoc] + '<br>';
              };
              html += '<b>Type: </b>' + dataFields[typeLoc] + '<br>';
              html += '<b>Category: </b>' + dataFields[categoryLoc] + '<br>';

               html += '<b>Description: </b> ' ;

              for (var k=descripLoc; k<dataFields.length; k+=1){
                 html += dataFields[k];
              }

               html += '<br><br></div>';
              html += '</td> </tr>';

           }
           html += '</table>';
           $('.app').append(html);
       }        
    });
});
</script> 
```

所以脚本完美地加载了所有信息，但部分

```
html += '<td class="demo-show"> <h3>' + dataFields[nameLoc] +  '</h3>'; 
```

class="demo-show" 应该将其链接到另一个脚本，在该脚本中，它使信息在隐藏之下。像手风琴一样。

脚本是（在文档的不同部分）：

```
$(document).ready(function() {
    $('td.demo-show > div').hide();  
    $('td.demo-show > h3').click(function() {
        $(this).next().slideToggle('fast');
    });
}); 
```

所有这些都在我的本地机器上工作，但是当我把它放在服务器上时，手风琴脚本不起作用，这很奇怪，因为在网站的另一部分使用完全相同的脚本并且它工作。

只有 JQuery Ajax 部分加载的部分不起作用。

我什么都试过了！！这是我第一次在论坛上发帖。请看看，让我知道你的想法。

更新：这里是网站。请在 IE 中尝试 [http://jsolomon9.99k.org/](http://jsolomon9.99k.org/)

不起作用的部分是，当您单击“标题 1”时，它下面的信息也应该产生手风琴效果。相反，它只是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:18:03.343

我查看了您的源代码，这是您添加的 js 文件

```
<script src="files/jquery.js" type="text/javascript"></script>
<script src="files/more-show.js" type="text/javascript"></script>
<script type="text/javascript" src="files/jquery.min.js"></script> 
```

您不应该添加两个 jquery 文件，而是删除`files/jquery.js`并移至`files/jquery.min.js`页面顶部。像这样然后尝试

```
<script type="text/javascript" src="files/jquery.min.js"></script>
<script src="files/more-show.js" type="text/javascript"></script> 
```

# java - Java Rest - 使用 GET 方法发送参数化列表

> ID：11548728
> 
> 赞同：5
> 
> 时间：2012-07-18T19:17:55.240
> 
> 标签：java, rest, jersey, jax-rs

我正在尝试通过 GET 方法发送列表。

这是我的服务器端：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public List<User> getUsers(){
    return managment.getUsers();
} 
```

我的客户端：

```
public static void getUsers(){
    try {
        ClientConfig clientConfig = new DefaultClientConfig();
        clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
        Client client = Client.create(clientConfig);

        WebResource webResource = client
                .resource("http://localhost:8080/Serwer07/user");

        ClientResponse response = webResource.accept("application/json")
                .get(ClientResponse.class);

        if (response.getStatus() != 200) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + response.getStatus());
        }

       List users = response.getEntity(List.class);          
       User user = (User) users.get(0);  //cannot cast
        e.printStackTrace();
    }
} 
```

我有从 Java 对象到用户的转换问题。如何发送此列表？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:45:26.497

使用[GenericType](http://jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/GenericType.html)。

```
List<User> users = webResource.accept(MediaType.APPLICATION_JSON)
   .get(new GenericType<List<User>>() {}); 
```

**更新**

`ClientResponse`还重载[getEntity](http://jersey.java.net/nonav/apidocs/1.1.5.1/jersey/com/sun/jersey/api/client/ClientResponse.html#getEntity%28com.sun.jersey.api.client.GenericType%29)以接受`GenericType`s。

```
List<User> users = response.getEntity(new GenericType<List<User>>() {}); 
```

# javascript - 为什么我的 jQuery Mobile 包含显然不起作用？

> ID：11548729
> 
> 赞同：1
> 
> 时间：2012-07-18T19:17:56.337
> 
> 标签：javascript, jquery-mobile, cordova

我有一个很棒的 PhoneGap 移动网络应用程序项目，然后我的笔记本电脑死了。我将所有文件都保存到了云端，所以没有代码丢失的问题，但现在我一直在尝试重建项目，这就是问题所在。

我已经重新设置了整个东西，它加载正常，所有的 html 元素都在那里编码，但是 jQuery Mobile css 似乎没有包含在我的任何页面上，因为我看到的只是一个白色带有正常下划线蓝色链接的页面。很没有吸引力。

这是我在每一页上的代码的开头：

```
<!DOCTYPE html>
<html>
  <head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css"/>
      <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

      <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script> 
```

应该没问题，我想……无论如何，它以前工作过。

少了什么东西？我倾向于认为它在配置中的某个地方而不是代码中，给出具体情况。

应该有某种cordova.css 文件吗？因为没有，而且我认为曾经有。（关于谷歌...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:57:50.940

您是否检查过 code.jquery.com 是否在您的 phonegap.plist（或 cordova.plist）的 ExternalHosts 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:26:42.357

请试试这个，

```
https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.0/jquery.mobile-1.1.0.min.css 
```

希望这可以帮助。:)

# javascript - FB.api post 将 app_data 从链接剥离到选项卡

> ID：11548735
> 
> 赞同：0
> 
> 时间：2012-07-18T19:18:08.127
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-apps

我创建了一个 FB 标签应用程序，它使用 JS FB.api 将消息发布到用户的墙上。贴在墙上的链接是指向 FB 选项卡的链接，其中一些参数是使用 app_data 添加的。直到几天前，这一切都很好。现在 FB 在发布到墙上之前从链接中删除 app_data 参数，从而发布一个链接到没有参数的选项卡。如何让 FB 发布带有参数的链接？

```
function postToRecipient() {
    var opts = {
        message: Message,
        name: Name,
        picture: 'http://test.com/images/image.jpg',
        link: 'https://www.facebook.com/pages/pagename?sk=app_xxxxxxxxx&app_data=certificate%3dxxxxxxxxx',
        caption: 'caption'
    };
    var callback = function (response) {
        if (!response || response.error) {
            console.log(response.error);
        } else {
            console.log('Success');
        }
    };
    FB.api('/' + recipId + '/feed', 'post', opts, callback);
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:39:39.297

app_data 功能本身仍在工作。我遇到了同样的问题，并通过 app_data 的简单重定向暂时解决了。

# internet-explorer - Coldfusion Datefield 控件在 IE7 中不随页面的其余部分滚动

> ID：11548736
> 
> 赞同：1
> 
> 时间：2012-07-18T19:18:10.037
> 
> 标签：internet-explorer, coldfusion, coldfusion-9

我在包含 Coldfusion 日期控件*cfinput type="datefield"的 cfwindow 中创建了一个表单*

我的问题是：使用滚动条时，表单会按预期滚动，但日期控件除外，它不会相对于窗口移动。无论日历控件是否打开，都会发生这种情况。

除了 IE7 和 Quirks 模式外，所有浏览器和版本都可以正常工作——这是我的客户的要求。

如果需要，将很乐意根据要求提供附加信息。

# javascript - 使用 Javascript 动态更改 HTML 元素的 ID

> ID：11548737
> 
> 赞同：1
> 
> 时间：2012-07-18T19:18:11.850
> 
> 标签：javascript, html, list

好的。我创建了一个自定义对象，用于构建事物列表。此自定义对象的功能之一是将对象添加到列表中。在这个列表中，我为每个不同的元素分配了一个值，用于跟踪该项目中有多少已添加到列表中。如：

(3) 对象#1
(2) 对象#2

3 和 2 当然是该对象的“计数”值。我的问题是我通过调用动态创建列表：

```
function Thing(count, value)
{
    this.count=count;
    this.value=value;
}

Thing.prototype.addToList = function()
{
if (this.count == 0)
{
    this.count++;

    var list = document.getElementById("blah");
    var li = document.createElement("li");
    var interior = "<span id='counter'>("+this.count+")</span>";
    li.innerHTML = interior;
    list.appendChild(li);
}
else
{
    this.count++;
    var countInc = document.getElementById("counter");
    countInc.innerHTML = "("+this.count+")";
}
} 
```

这很好用，但是如果我要添加具有单独计数值的多个对象，则无法区分它们，因此，列表中的第一个“计数器”跨度会随着最多的计数值而改变最近添加的对象。所有其他计数值保持不变 (1)。我试过了：

```
var interior = "<span id='counter"+this.value+"'>("+this.count+")</span>"; 
```

每次都尝试创建一个唯一的 ID，但这不起作用。基本上，我想知道每次实例化一个新对象时如何创建新的 ID 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:23:28.800

试试这个

```
var list = document.getElementById("blah");
var li = document.createElement("li");
var interior = "<span id='counter-"+this.count+"'>("+this.count+")</span>";
li.innerHTML = interior; 
```

# vba - 不保存宏

> ID：11548738
> 
> 赞同：4
> 
> 时间：2012-07-18T19:18:16.123
> 
> 标签：vba, excel

我需要使用宏打开和关闭文件，但我不想保存它。我可以穿excel提示您保存或不保存，不保存的VBA命令是什么。这就是我正在使用的我只需要它不保存和关闭excel。

```
Sheets("Sheet1").Select
Range("A1").Select

Sheets("Sheet6").Select
Range("A1").Select

Workbooks.Open Filename:= _
    "X:\File.xlsx"
Workbooks.Close 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T19:45:20.007

在 Close 方法之后放置`False`第一个参数以告诉 VBA 不保存工作簿更改。所以：

```
Workbooks.Close False 
```

或者

```
Workbooks.Close SaveChanges:=False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:28:51.803

如果我理解得很好，请尝试使用`Application.DisplayAlerts`：

```
Application.DisplayAlerts=False
Workbooks.Close
Application.DisplayAlerts=True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T23:51:17.703

您可以为此使用对象的`Saved`属性。`Workbook`将此属性设置为`True`将停止出现提示（但实际上不会保存工作簿）：

```
Dim wb as workbook

Set wb = Workbooks.Open("X:\File.xlsx")

' do stuff here

wb.Saved = True
wb.Close 
```

请参阅[http://msdn.microsoft.com/en-us/library/ff196613.aspx](http://msdn.microsoft.com/en-us/library/ff196613.aspx)以供参考

# excel-2010 - 带下拉的多表 Excel 计算

> ID：11548741
> 
> 赞同：0
> 
> 时间：2012-07-18T19:18:32.477
> 
> 标签：excel-2010

我一整天都在尝试这个，我准备放弃并编写一个.net程序......

我目前的布局如下：

表 1（库存中的材料）

*   材料名称
*   原始成本

表 2（当前项目）

*   材料名称（数据验证下拉菜单）
*   ％ 用过的
*   成本（根据使用百分比 * sheet1 的原始成本计算）

我认为根据下拉菜单从 sheet2 中找到“原始成本”单元格很容易，但我一生都无法弄清楚。我确实有数据验证工作，但我似乎无法根据数据验证下拉菜单访问“原始成本”单元格。

根据工作表 2 中的下拉菜单，我需要使用什么样的公式来访问工作表 1 中的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:44:19.693

您将希望使用 Vlookup 根据下拉列表中选择的值从第一张表中收集原始成本。

# excel - SpreadsheetGear WorkbookView 中可以保存的数据量是否有限制？

> ID：11548744
> 
> 赞同：1
> 
> 时间：2012-07-18T19:18:43.313
> 
> 标签：excel, size, spreadsheetgear

我有一个应用程序，它从 Excel 中获取数据表，并将其导入我的嵌入式`SpreadsheetGear.WorkbookView`. 我知道 Excel 中工作表大小的限制，但我想知道 Excel 是否能够处理大于`SpreadsheetGear`. 有没有人遇到过这个？

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:03:21.047

我刚刚对在 .NET 4.5 x64 应用程序和 Excel 2013 x64 RTM 上运行的 SpreadsheetGear 2012 进行了测试，两者都在具有超频 Core i7-980X 的 Windows 8 x64 上运行。

我创建了一个包含 1000 万个公式（使用公式“=RAND()”的 1,000,000 行和 10 列）的工作簿。

Excel 2013 在 20.18 秒内创建了工作簿，使用了 795MB 的 RAM，计算时间为 0.39 秒。

SpreadsheetGear 2012 在 0.42 秒内创建了工作簿，使用了 153MB 的 RAM，并在 0.09 秒内完成了计算。

SpreadsheetGear 仅受内存量的限制，在内存使用方面显然比 Excel 2013 更有效，更不用说 SpreadsheetGear 2012 创建和计算大型工作簿的速度比 Excel 2013 更快 - 至少在这种情况下是这样。

[您可以在此处](https://www.spreadsheetgear.com/downloads/register.aspx)下载适用于 .NET 的 SpreadsheetGear 的免费评估。

免责声明：我拥有 SpreadsheetGear LLC。

这是我为 SpreadsheetGear 运行的代码：

```
 using System;
    using SpreadsheetGear;

    namespace SpreadsheetGearMemTest
    {
        class Program
        {
            static void Test(IWorkbook workbook, int rows, int cols)
            {
                var worksheet = workbook.Worksheets[0];
                var cells = worksheet.Cells;
                var timer = System.Diagnostics.Stopwatch.StartNew();
                var startMem = System.GC.GetTotalMemory(true);
                cells[0, 0, rows - 1, cols - 1].Formula = "=RAND()";
                timer.Stop();
                var memUsed = System.GC.GetTotalMemory(true) - startMem;
                var calcTimer = System.Diagnostics.Stopwatch.StartNew();
                workbook.WorkbookSet.Calculate();
                Console.WriteLine("Creating took {0} seconds and {1}MB, calc took {2} seconds.",
                    timer.Elapsed.TotalSeconds, memUsed / (1024.0 * 1024.0), calcTimer.Elapsed.TotalSeconds);
                workbook.Close();
            }

            static void Main(string[] args)
            {
                // Get the code JITed.
                Test(Factory.GetWorkbook(), 100, 10);
                // Do the test.
                Test(Factory.GetWorkbook(), 1000000, 10);
            }
        }
    } 
```

# grails - grails中有日期限制吗？

> ID：11548749
> 
> 赞同：3
> 
> 时间：2012-07-18T19:19:06.260
> 
> 标签：grails, groovy, dns

我在用。

```
Date dateOfBirth
    static constraints = {
        dateOfBirth blank: false, date: true
    } 
```

这是否允许我在日期限制之后并且我还想指定格式我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:10:01.363

阅读验证器：http: [//grails.org/doc/latest/guide/validation.html](http://grails.org/doc/latest/guide/validation.html)

```
Date dateOfBirth
static constraints = {
    dateOfBirth blank: false, date: true, validator: { val -> validateDate(val) }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:44:50.647

grails 中的 Date 对象将是一个日期选择器，格式为 dd/mm/yyyy/hh:mm:ss。您可以通过指定将其格式化为仅日月和年`precision="day"`- 例如：

```
<g:datePicker name="fromDate" value="${params?.fromDate?: new Date().clearTime()}" precision="day"
                       noSelection="['':'-Choose-']"/> 
```

其中 clearTime() 将小时分钟和秒设置为 00:00:00 以便在您不需要那么高的精度并且只关心日期时使用。

如果要格式化日期的输出：[g:formatDate](http://grails.org/doc/latest/ref/Tags/formatDate.html)。对于验证，您可能需要使用闭包。但是，我不确定您要验证什么。仅仅是 dateOfBirth 不为空吗？还是dOB在某个日期或之后？在后一种情况下，使用闭包来定义约束。

# java - 如何获取用于 XSL 转换的 HTML 表单中的动态数据？

> ID：11548752
> 
> 赞同：0
> 
> 时间：2012-07-18T19:19:23.913
> 
> 标签：java, html, xslt

我有一个普通的 ole' HTML 文档。它被读入我编写的一些 Java 代码，并通过一些 XSL-T 和 Apache FOP 翻译成 PDF。

我的问题是，这个 HTML 文档是一种合法形式，在发送给各种计算机/用户之前，应该预先填充 Java 对象中包含的值。**如何读取动态（运行时）数据，然后像往常一样继续对其进行转换？**

我想知道可以在服务器端完成的策略/技术。任何想法，将不胜感激！

（我可以采用一个非常丑陋的解决方案，将我的 Java 代码中的字符串拼凑在一起，然后在中间一次插入一个数据，但是我有很多片段，而且我的公司很难维护这些代码。）

**编辑：**澄清一下——我[已经在 SO 上找到了这个答案，](https://stackoverflow.com/questions/2987533/dynamic-data-manipulation-using-xslt-from-xml "这")它解决了类似的问题。我相信，在那个问题中，它解决了通过文本输入从用户浏览器中读取数据的问题。那是客户端的问题。我需要从服务器端的 Java 代码中读取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:26:27.620

我的问题措辞不是很好，请允许我澄清一下我想要完成什么以及我是如何完成它的（对于谷歌观众。）

我有一个用 XHTML（格式良好的 HTML）编码的文档。我需要本文档的 PDF 版本的最终结果，其中包含在运行时收集的一些数据。我不认为我的解决方案是新颖的，甚至不接近某人可能做到的最佳方式，但为了结束，我将列出它：

1.  将标记插入 HTML/XML 文档，指示稍后需要填写的值。例如`<day/>`时间戳中的一天。

2.  保留我现有的 XSL-T 文档以将文本从 XML 转换为 PDF 格式。它会忽略所有标签`<day/>`，因为我没有立即准备好替换所有字段。

3.  在运行时使用简单的正则表达式为`replaceFirst("<day/>", getTimestamp())`具有适当内容的标签创建代码。该方法需要通过用户输入数据时触发的“struts”事件来调用。

4.  运行时，程序接受用户数据，调用读取 XHTML 文件的方法，用收集的数据替换字段，使用 Apache FOP 将修改后的文件传递给我的 XSLT 转换。

这并不优雅，但它可以解决问题。

# c# - Windows 服务启动和 Exe

> ID：11548758
> 
> 赞同：4
> 
> 时间：2012-07-18T19:19:34.490
> 
> 标签：c#, wpf, windows-services

我目前正在开发一个包含 WCF 服务、Windows 服务和 WPF 应用程序的项目。Windows 服务与 WCF 通信，在特定情况下，必须启动 WPF 应用程序才能让用户接收消息。（WCF 在远程服务器上，其余的在客户端上）。我在发射时遇到了一些障碍。我让服务将消息写入应用程序日志，以便我可以在此过程中进行一些“调试”。Windows 服务运行以下代码没有问题。

C# 代码，Windows 服务：

```
WriteLog.WriteString("PostOffice.MessagesWaiting: Inside, starting up.", EventLogEntryType.Warning);
// Call the WPF Application
var messagingProcess = new Process();
var messageProcessStartInfo = new ProcessStartInfo(@"""C:\GoldenEyeMessages.exe""");
messageProcessStartInfo.CreateNoWindow = false;
messageProcessStartInfo.UseShellExecute = false;
messageProcessStartInfo.FileName = @"""C:\GoldenEyeMessages.exe""";
messageProcessStartInfo.WindowStyle = ProcessWindowStyle.Normal;
messageProcessStartInfo.Verb = "runas";

messageProcessStartInfo.RedirectStandardOutput = true;
messagingProcess.StartInfo = messageProcessStartInfo;
messagingProcess.Start();
StreamReader daStreamReaderMan = messagingProcess.StandardOutput;
string newString = daStreamReaderMan.ReadLine();

WriteLog.WriteString("PostOffice.MessagesWaiting: The Eagle has landed.", EventLogEntryType.Warning); 
```

WPF 应用程序不在当前用户的会话中执行。相反，我会弹出一个窗口来查看消息。这是它的图片：

![在此处输入图像描述](../Images/ab074c2b48e10b67efe25c80c7a3a6d5.png)

选择“查看消息”选项后，它当然会将我切换到另一个会话，然后运行 ​​WPF 应用程序。

我的问题是，我应该如何让 WPF 应用程序在当前用户的会话或“活动”会话中启动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T19:22:49.197

您得到这个是因为尝试启动 WPF 可执行文件的用户没有与桌面交互的权限。

Windows 服务通常不会在具有该权限的帐户下运行，这样做会被视为安全漏洞。

> 在大多数情况下，建议您不要更改允许服务与桌面交互设置。如果您允许服务与桌面交互，则服务在桌面上显示的任何信息也将显示在交互式用户的桌面上。然后，恶意用户可以控制该服务或从交互式桌面对其进行攻击。

[http://technet.microsoft.com/en-us/library/cc782435(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc782435(v=ws.10).aspx)

更安全的替代方法是让 WPF 应用程序始终在系统托盘中运行，并为 Windows 服务安排一种机制，以向 WPF 应用程序发出需要显示消息的信号。一种简单的机制是将文件写入约定的位置并使用 WPF 应用程序中的文件观察程序来查找该文件（并在显示后将其删除）。请注意，Windows 服务可能在用户登录之前很久（在 WPF 应用程序运行之前很久）就已经运行了，因此无论您使用什么通知机制，都需要允许消息在登录后累积并立即显示。

# java - Java找出.class有什么导入

> ID：11548765
> 
> 赞同：0
> 
> 时间：2012-07-18T19:20:26.137
> 
> 标签：java, bytecode, java-bytecode-asm, bcel

有没有办法找出一个类有什么进口？

在[这个](https://stackoverflow.com/questions/5701305/how-to-get-all-imports-defined-in-a-class-using-java-reflection)问题中： Jon Skeet 说你不能使用反射来做到这一点，但是

> 如果您想查找编译后的代码中使用的所有类型，那就是另一回事了。您可能希望将 BCEL 视为一种分析字节码的方法。

这就是我想知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:43:27.127

这是[ASM 字节码操作框架](http://asm.ow2.org)的旧教程，解释[了如何](http://asm.ow2.org/doc/tutorial-asm-2.0.html)使用 ASM 读取类依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:23:02.100

您可以使用这样的 Java 反编译器： [Java Decompiler](http://java.decompiler.free.fr/)

# javascript - 循环功能不起作用

> ID：11548768
> 
> 赞同：1
> 
> 时间：2012-07-18T19:20:33.340
> 
> 标签：javascript, jquery, loops, for-loop

我在循环时遇到了这个小麻烦，我总是得到相同的“y”值（5）并且它不会减少或增加。我想要的是重复 ajax 调用 X 次 [all] 并通过匿名函数传递响应和当前呼叫号码。我希望你能帮助我。

```
function _shds(long, count, func) {
    for (var y = 0; y < count; y++) {
        gapi.client.load('urlshortener', 'v1', function() {
            var request = gapi.client.urlshortener.url.insert({
                'resource': {
                    'longUrl': long
                }
            });
            var resp = request.execute(function(resp) {
                func(resp.id, y);
            });
        });
    }
}
var total = 3;
var base = "soem";
var lista = ["1", "2", "3", "4", "5"];
_shds("222", total, function(data, y) {
    if (data != "undefined") {
        newbase = base.replace("soem", data);
        console.log(lista[y].uid + newbase + " pos:" + y);
    }
});​ 
```

更新：对不起，这是代码示例：http: [//jsfiddle.net/ZgXZB/](http://jsfiddle.net/ZgXZB/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:31:19.877

这是一个比最初出现的问题更棘手的问题，也是一个常见的 JavaScript 陷阱。当你说：

```
for (var y = 0; y < count; y++) {
    gapi.client.load('urlshortener', 'v1', function() {
        var request = gapi.client.urlshortener.url.insert({
            'resource': {
                'longUrl': long
            }
        });
        var resp = request.execute(function(resp) {
            func(resp.id, y);
        });
    });
} 
```

`y`您正在传递给的函数回调中创建一个闭包`get`。但是，您只创建了一个闭包，它的最终`y`值为`count`. 你想要做的是创建`count`不同的闭包，所以你需要引入一个新的范围：

```
for (var y = 0; y < count; y++) {
 (function (y){      
  gapi.client.load('urlshortener', 'v1', function() {
      var request = gapi.client.urlshortener.url.insert({
          'resource': {
              'longUrl': longurl
          }
      });
      var resp = request.execute(function(resp) {
          func(resp.id, y);
      });
  });
 })(y);      
} 
```

我相信应该这样做。您需要声明一个新函数以在 JavaScript 中创建一个新作用域，并通过将`y`其作为参数传递给该函数，您将为`y`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:28:05.737

问题是您试图在回调返回`i` *之后获取值，这是**在*您的 for 循环完成之后。您需要做的是当您第一次构造中间回调时要传递给回调的`bind`值：`i``$.get`

```
function _short(longurl, count, func) {
    for (var y = 0; y < count; y++) {
        gapi.client.load('urlshortener', 'v1', function() {
            var request = gapi.client.urlshortener.url.insert({
                'resource': {
                    'longUrl': longurl
                }
            });
            var resp = request.execute((function(y, resp) {
                func(resp.id, y);
            }).bind(this, y));
        });
    }
}
var totalchat = 10;
var base = "soem";
var listachat = ["1", "2", "3", "4", "5"];
_short("222", 3, function(data, y) {
    if (data != "undefined") {
        newbase = base.replace("soem", data);
        console.log(listachat[y].uid + newbase + " pos:" + y);
    }
}); 
```

什么`bind`是创建一个新函数，其中的值`this`绑定到第一个参数（我刚刚设置为`this`），所有剩余的参数都绑定到函数的第一个参数，而它返回的函数采用一组新的参数（在这种情况下，只`data`保留原始函数的参数，它与`$.get`) 的回调签名相匹配。

# xml - XML 不使用 XSLT 进行转换？

> ID：11548777
> 
> 赞同：-1
> 
> 时间：2012-07-18T19:21:22.217
> 
> 标签：xml, xslt

我正在尝试`ageCode`从下面的 xml 和 xslt 中获取属性，`<Adults>3</Adults>`如果`ageCode`= 10 或`<Children>0</Children>``ageCode = 8，则输入。这是我的示例 xml：

```
<Root>
    <Reservations>
        <Reservation>
            <Rooms>
                <Room>
                    <Guests>
                        <Guest ageCode="10" count="3" />
                        <Guest ageCode="8" count="0" />
                    </Guests>
                </Room>
            </Rooms>
        </Reservation>
    </Reservations>
</Root> 
```

我正在尝试将其转换为：

```
<Reservation>
    <Rooms>
        <Room>
            <Adults>3</Adults>
            <Children>0</Children>
        </Room>
    </Rooms>
</Reservation> 
```

使用以下 XSLT，但我无法让它工作（我对 XSLT 完全陌生）：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
<xsl:element name="Reservation">
  <xsl:apply-templates />
</xsl:element>
</xsl:template>
<xsl:template match="Root/Reservations/Reservation/Rooms/Room/Guests">
 <xsl:for-each select="Guest">
  <xsl:if test="@ageCode = '10'">
    <xsl:element name="Adults">
      <xsl:value-of select="@count"/>
    </xsl:element>
  </xsl:if>
  <xsl:if test="@ageCode = '8'">
    <xsl:element name="Children">
      <xsl:value-of select="@count"/>
    </xsl:element>
  </xsl:if>
  </xsl:for-each>
  </xsl:template>
  </xsl:stylesheet> 
```

XSLT 如何工作？我的意思是它是否从上到下应用模板？我问是因为您说我需要 3 个模板，并且每应用一个模板，就会进行新的转换。

第一个和第二个模板实际上是做什么的？有没有一种方法可以在应用第一个之后显示 XML，然后是第二个？我在这里正确理解 XSLT 吗？

应用更深层次的模板是什么意思？

如果我必须创建许多 XSLT，像 MapForce 这样的工具会有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:37:01.027

您需要 3 个模板：一个用于丢弃前 2 个元素，一个用于匹配所有内容并仅输出自身并递归，一个用于执行您的客人 -> 成人转换。

第一个是

```
<xsl:template match="Root|Reservations">
    <xsl:apply-templates/>
</xsl:template> 
```

它不输出任何内容并应用更深层次的模板。

第二个是

```
<xsl:template match="*">
  <xsl:element name="{name(.)}">
  <xsl:apply-templates />
  </xsl:element>
</xsl:template> 
```

它输出自己（即具有当前名称的元素）并应用更深的模板。

第三个是您所拥有的，但只需匹配“Guests”而不是完整路径：

```
<xsl:template match="Guests">
 <xsl:for-each select="Guest">
  <xsl:if test="@ageCode = '10'">
    <Adults>
      <xsl:value-of select="@count"/>
    </Adults>
  </xsl:if>
  <xsl:if test="@ageCode = '8'">
    <Children>
      <xsl:value-of select="@count"/>
    </Children>
  </xsl:if>
  </xsl:for-each>
</xsl:template> 
```

顺便说一句，您不需要使用`xsl:element`常量名称，只需使用文字即可。

# c++ - C++ 如何为基类转换对象调用纯虚拟方法？

> ID：11548778
> 
> 赞同：0
> 
> 时间：2012-07-18T19:21:23.543
> 
> 标签：c++, copy, polymorphism, destructor

> **可能重复：**
> [为什么派生类中的重写函数隐藏了基类的其他重载？](https://stackoverflow.com/questions/1628768/why-does-an-overridden-function-in-the-derived-class-hide-other-overloads-of-the)

你好，

让我用这个例子解释我的问题：

```
class A
{
    virtual ~A() = 0 { }

    A(const A&);
    virtual void operator =(const A&) = 0;
}

class B : public A
{
    ~B();

    B(const B&);
    void operator =(const B&);
}

void main(void)
{
    A* a = new B();
    delete a; // Is ~A() called, ~B() or both ?
} 
```

这让我问了两个问题：

1.  在抽象基类指针上使用 delete 时调用哪个析构函数？
2.  是否可以使用上述复制方法之一复制我的对象“a”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:01:59.387

1.  Both are called.

    In `delete a` the derived class destructor `~B::B` is found and called using the virtual dispatch mechanism. The implementation of `~B::B` in turn implicitly calls the base class destructor `~A::A`. However, this call is implemented as non-virtual ordinary call, meaning it is not affected by the fact that `~A::A` is declared as pure.

    This is actually the reason why pure virtual destructors still have to be defined. Although the language specification does not permit in-class definitions for pure virtual functions. Even if you want it to be inline, you still have to define it out of class.

2.  It is not possible to copy a standalone object of type `A` simply because there can't be any standalone object of abstract type. Please, clarify your question. What do you want to copy and to where?

    If you want to do something like this

    ```
    B b1, b2;
    A *a1 = &b1, *a2 = &b2;

    *a1 = *a2; 
    ```

    and expect the last assignment to behave as if `b1 = b2` was performed... well, it can be done but it will take some effort and might/will result in pretty ugly code. I'd say that burdening the overloaded assignment operator with that sort of functionality is not a good idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:59:09.550

1) The destructor ~B() is called first, after the destructor ~A(), remember just that's:

> Where the constructor have been call, the destructor will be call at reverse order.

2) yes, because it's pointer, the heritage can block the copy (contructor by recopy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:28:14.633

```
virtual ~A() = 0 { } 
```

这不会编译。纯虚拟析构函数如下所示：

```
virtual ~A() = 0; 
```

即使这样，您也*必须*添加一个实现，因为在销毁对象时将调用类层次结构的*所有析构函数。*所以，如果你不实现主体，这将导致 UB（或者它甚至不会编译，因为它不适合我使用 gcc 4.6.3）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:29:52.397

1：`~B()`通过虚拟调用`~A() = 0`；的实现`~A()`然后由 调用`~B()`。

另外，`virtual ~A() = 0 { }`语法不正确；您必须编写`virtual ~A() = 0;`然后`inline A::~A() { }`在类定义之外提供。

2：您的代码将无法编译，因为`B::operator=(const B&)`; 不是可接受的覆盖`A::operator=(const A&) = 0`。对于虚方法，只有函数返回类型允许是协变的。

没有简单的方法可以通过复制构造函数或赋值运算符来复制多态对象，因为这样的成员必须使用双重调度（参见[虚拟赋值运算符 C++](https://stackoverflow.com/questions/669818/virtual-assignment-operator-c)）。通常的方法是拥有一个`virtual A *clone() = 0`函数，该函数期望返回`new`派生类的一个实例。

# linux-kernel - 从 fork() 到 do_fork() 的函数调用

> ID：11548779
> 
> 赞同：3
> 
> 时间：2012-07-18T19:21:24.213
> 
> 标签：linux-kernel

在浏览了一些文本和源代码后`fork`，我意识到这三个都是通过不同的参数执行的。`vfork``clone``do_fork``fork.c`

但究竟如何`fork()`调用`do_fork()`..

调用时调用`fork()`了哪些函数？

`do_fork()`什么是逐步课程`fork()`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T23:03:37.200

**libc**和其他系统调用的实现`fork()`包含调用系统调用的特殊处理器指令。系统调用调用是特定于体系结构的，并且可能是一个相当复杂的主题。

让我们从一个“简单”的例子开始，MIPS：

在 MIPS 上，系统调用是通过 SYSCALL 指令调用的。因此，libc 的实现`fork()`最终将一些参数放在一些寄存器上，将系统调用号放在 regiter 中`v0`，并发出一条`syscall`指令。

在 MIPS 上，这会导致`SYSCALL_EXCEPTION`（异常编号 8）。启动时，内核将异常 8 与以下处理例程相关联`arch/mips/kernel/traps.c:trap_init()`：

```
set_except_vector(8, handle_sys); 
```

因此，当 CPU 因为程序发出指令而接收到异常 8 时， CPU 会转换到内核模式，并在at`syscall`开始执行处理程序（对于不同的 32/64 位内核空间/用户空间组合有几个文件）。该例程在系统调用表中查找系统调用号并跳转到相应的函数，在本例中。`handle_sys``/usr/src/linux/arch/mips/kernel/scall*.S``sys_...()``sys_fork()`

现在，x86 更加复杂。传统上，Linux 使用中断 0x80 来调用系统调用。这与 x86 门相关联`arch/x86/kernel/traps_*.c:trap_init()`：

```
set_system_gate(SYSCALL_VECTOR,&system_call); 
```

x86 处理器具有多个级别（环）的特权（从 80286 开始）。只能通过预定义的门访问（跳转到）较低的环（= 更多特权），这是内核设置的特殊类型的段描述符。因此，当`int 0x80`调用 an 时，产生了一个中断，CPU 查找一个名为 IDT（Interrupt Descriptor Table）的特殊表，发现它有一个门（x86 中的陷阱门，x86-64 中的中断门），并过渡到环 0，在/处开始执行`system_call`/`ia32_syscall`处理程序（分别针对 x86/x86_64）。`arch/x86/kernel/entry_32.S``arch/x86/ia32/ia32entry.S`

但是，自 Pentium Pro 以来，有另一种调用系统调用的方法：使用`SYSENTER`指令（AMD 也有自己的`SYSCALL`指令）。这是调用系统调用的更有效方式。这种“较新”机制的处理程序设置为`arch/x86/vdso/vdso32-setup.c:syscall32_cpu_init()`：

```
#ifdef CONFIG_X86_64
[...]
void syscall32_cpu_init(void)
{
    if (use_sysenter < 0)
            use_sysenter = (boot_cpu_data.x86_vendor == X86_VENDOR_INTEL);

    /* Load these always in case some future AMD CPU supports
       SYSENTER from compat mode too. */
    checking_wrmsrl(MSR_IA32_SYSENTER_CS, (u64)__KERNEL_CS);
    checking_wrmsrl(MSR_IA32_SYSENTER_ESP, 0ULL);
    checking_wrmsrl(MSR_IA32_SYSENTER_EIP, (u64)ia32_sysenter_target);

    wrmsrl(MSR_CSTAR, ia32_cstar_target);
}
[...]
#else
[...]
void enable_sep_cpu(void)
{
    int cpu = get_cpu();
    struct tss_struct *tss = &per_cpu(init_tss, cpu);

    if (!boot_cpu_has(X86_FEATURE_SEP)) {
            put_cpu();
            return;
    }

    tss->x86_tss.ss1 = __KERNEL_CS;
    tss->x86_tss.sp1 = sizeof(struct tss_struct) + (unsigned long) tss;
    wrmsr(MSR_IA32_SYSENTER_CS, __KERNEL_CS, 0);
    wrmsr(MSR_IA32_SYSENTER_ESP, tss->x86_tss.sp1, 0);
    wrmsr(MSR_IA32_SYSENTER_EIP, (unsigned long) ia32_sysenter_target, 0);
    put_cpu();
}
[...]
#endif  /* CONFIG_X86_64 */ 
```

以上使用机器特定寄存器 (MSR) 进行设置。处理程序例程是`ia32_sysenter_target`and `ia32_cstar_target`（最后一个仅适用于 x86_64）（in `arch/x86/kernel/entry_32.S`or `arch/x86/ia32/ia32entry.S`）。

**选择要使用的系统调用机制**

linux 内核和 glibc 有一种机制可以在调用系统调用的不同方式之间进行选择。

内核为每个进程设置了一个虚拟共享库，称为 VDSO（虚拟动态共享对象），您可以在以下输出中看到`cat /proc/<pid>/maps`：

```
$ cat /proc/self/maps
08048000-0804c000 r-xp 00000000 03:04 1553592    /bin/cat
0804c000-0804d000 rw-p 00003000 03:04 1553592    /bin/cat
[...]
b7ee8000-b7ee9000 r-xp b7ee8000 00:00 0          [vdso]
[...] 
```

这个 vdso 包含一个适当的系统调用调用序列，用于正在使用的 CPU，例如：

```
ffffe414 <__kernel_vsyscall>:
ffffe414:       51                      push   %ecx        ; \
ffffe415:       52                      push   %edx        ; > save registers
ffffe416:       55                      push   %ebp        ; /
ffffe417:       89 e5                   mov    %esp,%ebp   ; save stack pointer
ffffe419:       0f 34                   sysenter           ; invoke system call
ffffe41b:       90                      nop
ffffe41c:       90                      nop                ; the kernel will usually
ffffe41d:       90                      nop                ; return to the insn just
ffffe41e:       90                      nop                ; past the jmp, but if the
ffffe41f:       90                      nop                ; system call was interrupted
ffffe420:       90                      nop                ; and needs to be restarted
ffffe421:       90                      nop                ; it will return to this jmp
ffffe422:       eb f3                   jmp    ffffe417 <__kernel_vsyscall+0x3>
ffffe424:       5d                      pop    %ebp        ; \
ffffe425:       5a                      pop    %edx        ; > restore registers
ffffe426:       59                      pop    %ecx        ; /
ffffe427:       c3                      ret                ; return to caller 
```

在`arch/x86/vdso/vdso32/`使用`int 0x80`,`sysenter`和的实现中，`syscall`内核会选择合适的实现。

为了让用户空间知道有一个 vdso 以及它的位置，内核在辅助向量中设置`AT_SYSINFO`和条目（ ，第 4 个参数，用于将一些信息从内核传递给新启动的进程）。指向 vdso 的 ELF 头，指向 vsyscall 实现：`AT_SYSINFO_EHDR``auxv``main()``argc, argv, envp``AT_SYSINFO_EHDR``AT_SYSINFO`

```
$ LD_SHOW_AUXV=1 id    # tell the dynamic linker ld.so to output auxv values
AT_SYSINFO:      0xb7fd4414
AT_SYSINFO_EHDR: 0xb7fd4000
[...] 
```

glibc 使用此信息来定位`vsyscall`. 它将它存储到动态加载器 global`_dl_sysinfo`中，例如：

```
glibc-2.16.0/elf/dl-support.c:_dl_aux_init():
ifdef NEED_DL_SYSINFO
  case AT_SYSINFO:
    GL(dl_sysinfo) = av->a_un.a_val;
    break;
#endif
#if defined NEED_DL_SYSINFO || defined NEED_DL_SYSINFO_DSO
  case AT_SYSINFO_EHDR:
    GL(dl_sysinfo_dso) = (void *) av->a_un.a_val;
    break;
#endif

glibc-2.16.0/elf/dl-sysdep.c:_dl_sysdep_start()

glibc-2.16.0/elf/rtld.c:dl_main:
GLRO(dl_sysinfo) = GLRO(dl_sysinfo_dso)->e_entry + l->l_addr; 
```

在 TCB（线程控制块）的头部中的一个字段中：

```
glibc-2.16.0/nptl/sysdeps/i386/tls.h

_head->sysinfo = GLRO(dl_sysinfo) 
```

如果内核是旧的并且不提供 vdso，glibc 提供了一个默认实现`_dl_sysinfo`：

```
.hidden _dl_sysinfo_int80:
int $0x80
ret 
```

当针对 glibc 编译程序时，根据情况，在调用系统调用的不同方式之间做出选择：

```
glibc-2.16.0/sysdeps/unix/sysv/linux/i386/sysdep.h:
/* The original calling convention for system calls on Linux/i386 is
   to use int $0x80\.  */
#ifdef I386_USE_SYSENTER
# ifdef SHARED
#  define ENTER_KERNEL call *%gs:SYSINFO_OFFSET
# else
#  define ENTER_KERNEL call *_dl_sysinfo
# endif
#else
# define ENTER_KERNEL int $0x80
#endif 
```

*   `int 0x80`← 传统方式
*   `call *%gs:offsetof(tcb_head_t, sysinfo)`←`%gs`指向 TCB，所以它通过指向存储在 TCB 中的 vsyscall 的指针间接跳转。这对于编译为 PIC 的对象是首选。这需要 TLS 初始化。对于动态可执行文件，TLS 由 ld.so 初始化。对于静态 PIE 可执行文件，TLS 由 __libc_setup_tls() 初始化。
*   `call *_dl_sysinfo`← this 通过全局变量间接跳转。这需要重新定位 _dl_sysinfo，因此可以避免编译为 PIC 的对象。

所以，在 x86 中：

```
 fork()
                         ↓
int 0x80 / call *%gs:0x10 / call *_dl_sysinfo 
  |                ↓              ↓
  |       (in vdso) int 0x80 / sysenter / syscall
  ↓                ↓              ↓            ↓
      system_call     | ia32_sysenter_target | ia32_cstar_target
                          ↓
                       sys_fork() 
```

# php - URL 重写/路由 (mod_rewrite) 对框架真的有必要吗？

> ID：11548784
> 
> 赞同：1
> 
> 时间：2012-07-18T19:21:53.533
> 
> 标签：php, frameworks, url-routing, conceptual

我多年来一直在编写 PHP 代码。现在我有很多可重用的模块——至少对我来说是这样。典型的经典老式开发人员：D。但是现在几乎每个人都使用*烘焙即时*框架，并且我的模块不再*可重用*——在某种程度上。目前大多数*著名*的框架，如CI、Zend、Cake等，以及应该更简单的微框架，如Fat-free、Silex、MicroMVC等，都使用了URL路由/URL重写等方法。

但是……你认为这种*花哨*的 URL 路由真的有必要吗？

让我们考虑一下：

*   处理这种复杂的奇特方法需要多少工作？正则表达式解析使用相对繁重的计算不是吗？值得吗？
*   我们多久手动编写一次 URL 地址/键入它？而不是点击书签和/或超链接？
*   它真的对搜索引擎友好吗？我的意思是搜索引擎索引 URL 参数不好吗？
*   为什么 Google、Facebook 等 BIG 网站仍在使用“path?var1=val1&var2=val2&...”？
*   不同网络服务器上的不同设置怎么样？Apache/IIS/Nginx/Lightthy？例如将 .htaccess 移植到 web.config 和另一个？它不是比更多的解决方案带来更多的问题吗？（用于调试等）

你怎么看？我们应该继续使用那个*花哨*的URL 路由吗？或者我们最好用 [更简单的] 请求参数回到 [web] 自然？任何回应表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T19:35:00.287

*   通过使用 APC 减轻通过正则表达式运行 URL 的计算成本
*   这与手动 URL 输入无关
*   是的，它对搜索引擎优化有影响
*   因为他们必须保存每一次失败，所以您的网站每天没有数十亿的请求
*   这实际上就是为什么使用[前端控制器](http://martinfowler.com/eaaCatalog/frontController.html)而不是 .htaccess 来解析 URL

那应该照顾你的“点”。

是的，我们应该继续使用“漂亮的 URL”，因为很多人在点击链接之前都会浏览完整的 URL。当人们看到完整且易于理解的 URL 时，他们会感到更安全。

此外，相当多的专业 PHP 开发人员试图避开*流行*的框架。主要是因为就代码质量而言，所述框架的质量非常非常糟糕（即使是被认为是最好的可用框架之一的 Symfony2 也存在问题）。

仅仅因为你使用了一个框架，它并不能使你的应用程序变得更好。相反，您应该专注于正确的 OOP，遵循 SOLID 原则并遵守得墨忒耳法则。MVC 只是另一种设计模式，它实际上解决了领域业务逻辑表示的分离。

如果您想了解 MVC，请阅读*Martin Fowler*的[GUI Architectures](http://martinfowler.com/eaaDev/uiArchs.html)。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:45:58.523

最终，它归结为设计架构，特别是这些，[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

> 处理这种复杂的奇特方法需要多少工作？正则表达式解析使用相对繁重的计算不是吗？值得吗？

虽然启动重写引擎有一点成本，但这些框架中的大多数不在其路由中使用正则表达式。它只是盲目地将每个未映射到现有资源的请求路由到控制器（例如 index.php）并让它自己解决。话虽如此，对运行 php 的影响可能比对重写引擎的影响更大。

> 多久手动写一次 URL 地址/输入？而不是点击书签和/或超链接？

不确定这是什么相关性。`http://domain.com/post/intro-to-apache`输入（或记住）比输入更容易`http://domain.com/post.php?post_id=141`吗？

> 它真的对搜索引擎友好吗？我的意思是搜索引擎索引 URL 参数不好吗？

是的，确实如此，而且影响很大。不仅如此，人们更容易看到链接是什么。

> 为什么 Google、Facebook 等 BIG 网站仍在使用“path?var1=val1&var2=val2&...”？

`post_id`在 URI 中使用 a 与`q`在查询字符串中使用 a是有区别的。前者是动态访问现有内容，后者是动态表单输入，可以*是用户输入的任何内容*。

编辑：请注意，Facebook*确实*会进行 URL 重写，维基百科也是如此。这是为了使 URL 具有人类可读性以及更好的 SEO。

> 不同网络服务器上的不同设置怎么样？Apache/IIS/Nginx/Lightthy？例如将 .htaccess 移植到 web.config 和另一个？它不是比更多的解决方案带来更多的问题吗？（用于调试等）

路由规则非常非常简单。这些框架为广泛使用的网络服务器提供了它。如果你想做一些自定义的事情，显然你必须绕过这些路由规则，但首先你必须至少熟练掌握网络服务器的重写引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:35:17.397

如果不出意外，拥有漂亮的 URL 对搜索引擎来说是使用（并且可能部分仍然是）重要的东西。如果您将链接发送给其他人也更好。*

# http - 你能telnet到ssh吗？

> ID：11548787
> 
> 赞同：9
> 
> 时间：2012-07-18T19:21:57.320
> 
> 标签：http, tcp, ssh, telnet

我知道您可以使用 HTTP 协议标准远程登录并与 HTTP 服务器协商 - 例如：

```
telnet google.com 80
Trying 173.194.70.139...
Connected to google.com.
Escape character is '^]'.
GET / HTTP.1.1
HOST: my.com 
```

我得到回应：

```
HTTP/1.0 400 Bad Request
Content-Type: text/html; charset=UTF-8
Content-Length: 925
Date: Wed, 18 Jul 2012 19:17:26 GMT
Server: GFE/2.0 
```

但我的问题是我可以对 SSH 协议做同样的事情吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T19:29:58.207

尝试在端口 22 上使用 telnet 访问 SSH 服务器。您会收到第一条消息，但没有其他有用的信息。只是“协议不匹配”并且连接关闭。

telnet 客户端以这种方式作为一种工具很有用，因为它使用纯文本协议。您可以访问任何使用不同纯文本协议的端口并在头脑中对其进行解码，就像使用 HTTP 一样。SSH 对所有内容进行加密，因此使用 telnet 连接到 SSH 服务器将证明用肉眼有点难以阅读。

```
telnet yoursshserver 22
Trying 50.112.5.74...
Connected to yoursshserver.
Escape character is '^]'.
SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
something I typed
Protocol mismatch.
Connection closed by foreign host. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T13:40:34.283

SSH : SSH-protoversion-softwareversion SP 评论 CR LF

示例：SSH-2.0-billsSSH_3.6.3q3

位于：http: [//www.networksorcery.com/enp/rfc/rfc4253.txt](http://www.networksorcery.com/enp/rfc/rfc4253.txt)

# ios - 如何在 Xcode 4.3 中安装新的 iOS 基础 SDK？

> ID：11548789
> 
> 赞同：1
> 
> 时间：2012-07-18T19:22:00.577
> 
> 标签：ios, xcode, sdk

我正在创建一个 iOS 项目，我有理由怀疑我的应用程序在 iOS 5.1 上运行良好，但在 iOS 5.0 上运行良好。但是，我希望它在 iOS 5.0 上完美运行。问题是，我不知道如何在 Xcode 中使用 iOS 5.0 作为我的基础 SDK。我找到了可以更改 sdks 的地方（目标 > 构建设置），但那里列出的唯一 iOS SDK 是 5.1。如何在 Xcode 中安装基本 SDK iOS 5.0？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:37:17.037

你不会使用 iOS 5.0 作为你的基础 SDK。只要 5.0 或更低版本是您的部署目标，它将在 iOS 5 上启动。然后，您只需要在 iOS 5 和 iOS 5.1 上进行测试并修复您遇到的任何问题（您可以在 Xcode 中的两个模拟器中进行测试，只需从 Xcode 中的首选项面板下载 iOS 5.0 模拟器——尽管如果你有 iOS 5.0 设备，确保它在那里顺利运行也很重要）。

# olap - 创建投影的最佳方法是什么？

> ID：11548791
> 
> 赞同：-1
> 
> 时间：2012-07-18T19:22:08.183
> 
> 标签：olap, projection, vertica

我正在尝试了解 Vertica DB 的工作原理，并想知道创建将由我的查询使用的投影的最佳方法是什么。

1.  我知道我可以通过编写代码来创建就`vsql`行了。
2.  提供将用于 Vertica 数据库设计器的查询，以便 Vertica 为其自身创建正确的投影。

我有点困惑，因为我是手动创建的（没有 DB Designer），但 Vertica 并没有使用它们。

这是一个例子：

*   我有表 AAA ( `id, name, address`)，我打算在它上面运行这个查询：

    `select count(name) from AAA;`

*   为此，我正在创建一个名为`proj1`：

    `create projection proj1 as select name from AAA;`

*   现在我有了创建的投影，但是当我运行`explain`表单时，我的选择计数脚本显示未使用创建的投影。

谁能帮我理解这里的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:05:07.593

查询特定的投影（不包含所有列）可能不包含所有行，这不会给出表中记录的准确计数。为了保证准确计算列/表中的行数，应使用超投影。

该查询特定投影与反对超级投影相比没有优势。您的查询仅处理“名称”列，元数据将能够像任何查询特定投影一样快速地从超级投影中提供该信息，同时确保计数准确性。

如果您使用投影名称而不是表名称运行查询，它将强制使用特定的投影。您可以通过这种方式比较执行时间。

# c# - 简单的 Windows 窗体/WPF 应用程序是否适用于平板电脑的 Windows 8？

> ID：11548792
> 
> 赞同：24
> 
> 时间：2012-07-18T19:22:10.747
> 
> 标签：c#, .net, windows, windows-8

我正在开发一个需要在 Windows 7、Windows 8 和 Windows 8 Tablet 上运行的 C# .NET 业务应用程序。

1.  “简单”的 Windows 窗体应用程序可以在 Windows 8 台式机和平板电脑上运行吗？
2.  是否有 Windows 8 平板电脑模拟器？
3.  有没有其他选择？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T21:20:51.700

1.  是的，常规的 ol' windows 窗体可以在 Windows 8 上运行。它们可以在任何支持您的目标 .NET Framework 版本的操作系统上运行。它们可能无法在 Windows RT 平板电脑上运行，但运行完整版 Windows 8 的平板电脑就可以了。
2.  没有平板电脑模拟器，但您可以在 HP Slate 500 上运行 Windows 8，或者（我正在做的）通过 iPad 上的 Parallels 使用触摸控制运行 Windows 8。
3.  您可以在 Silverlight/WPF 中开发您的应用程序，并使其在 Windows 7 和 8 以及 Windows RT（适用于 ARM 平板电脑）中运行良好。或者 HTML5 应用程序也是一种选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T05:44:13.920

Windows 8 仍将具有 win32，因此所有基于 win32 的应用程序示例 winform、C++、COM 应用程序仍可正常运行而无需重新编译。但是 Win32 不会出现在 Surface 平板电脑上，因此它们不会在那里运行。您将不得不使用 Metro 风格重新编码您的应用程序，该风格将实习生使用 WinRT（Windows 运行时）。

有关详细信息，请参阅我在[windows 8上的博客](http://programmingwpf.blogspot.com/2012/08/windows-8-arranged-marriage-of-windows.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T17:10:20.020

看，Windows 8 有 2 个版本 RT/PRO。支持 RT 的平板电脑不会运行任何旧版桌面应用程序（您的 Winforms 是桌面应用程序）。他们只会运行从 Store 下载的 Windows Store Apps。

您始终可以制作 Windows 8 应用程序的桌面版本，但可以在 Windows 8 Pro 机器上运行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T06:24:03.567

为了回答您问题的第二部分，[splashtop](http://www.splashtop.com/win8)有一个 Windows Metro 测试平台，可以在 ipad 或 Android 平板电脑上使用，以远程进入 Windows 8 并测试触摸界面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T19:15:07.703

WinForms 属于桌面应用程序类别，因此任何安装了 windows Pro 的机器，无论是平板电脑还是 PC 都可以运行它。安装了 WinRT 的平板电脑不支持它，因为它们只运行应用商店应用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T10:41:18.457

对于第 2 部分：Visual Studio 2012 具有用于测试 Windows 应用商店应用程序的内置模拟器，它提供了测试任何触摸手势的方法，并且还允许不同的屏幕分辨率和方向。

但是，此模拟器可用于测试任何应用程序。要启动模拟器，请打开“Program Files\Common Files\microsoft shared\Windows Simulator\11.0\Microsoft.Windows.Simulator.exe”，或者搜索可执行文件。

现在在模拟环境中导航到您希望测试并运行它的应用程序。

这并不完美，但它确实有效。

# iphone - Game Center IBA动作成就

> ID：11548794
> 
> 赞同：0
> 
> 时间：2012-07-18T19:22:14.960
> 
> 标签：iphone, ios, xcode, game-center

我最近一直在使用 Game Center（成就），我只知道如何做基于分数的成就。我怎么能做这样的事情？

```
-(IBAction) {

//Unlock Achievement 

} 
```

除此以外，我了解有关游戏中心的所有其他内容。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:05:56.180

以下是从按钮创建 IBAction 的两种方法：

以编程方式：

```
UIButton *theButton = [[UIButton alloc] initWithFrame:CGRectMake(160, 240, 50, 20)];

[theButton addTarget:self action:@selector(unlockAch:) forControlEvents:UIControlEventTouchUpInside];

[self.view addSubview:theButton]; 
```

然后创建方法：

```
-(IBAction)unlockAch:(id)sender
{
    //Unlock code
} 
```

或者您可以使用界面生成器来完成。创建按钮并按住 Ctrl，单击按钮，然后拖入 .h 文件。您将看到一个弹出窗口，允许您创建一个操作并为其命名：

![在此处输入图像描述](../Images/e5dcd7a34b3405935f87c731195584cc.png)

然后界面生成器会将其放入您的 .h 和 .m 文件中，它将被连接并准备就绪！

![在此处输入图像描述](../Images/77535f6f76110fb2d850b5d7efcc7bfa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:38:12.900

好的，首先我建议您使用单例辅助类（我们称之为 GCAssistant）来处理特定于游戏中心的操作。就像[本](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)教程中解释的那样。

在类头中，定义成就ID，以便在编码时更容易提交成就；如下所示：

```
#define kAchievementChainer @"1C"
#define kAchievementBoardClear @"1A"
#define kAchievement7Games @"1B"
#define kAchievement77Games @"1D"
#define kAchievementBreakAll @"1E"
#define kAchievementMultiplayer @"1F" 
```

在助手类中，这是我用来提交成就的方法：

```
-(void) reportAchievementWithID:(NSString*) AchievementID {

[GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error) {

    if(error) NSLog(@"error");

    for (GKAchievement *ach in achievements) {
        if([ach.identifier isEqualToString:AchievementID]) { //already submitted
            NSLog(@"Already submitted");
            return ;
        }
    }

    GKAchievement *achievementToSend = [[GKAchievement alloc] initWithIdentifier:AchievementID];
    achievementToSend.percentComplete = 100;
    achievementToSend.showsCompletionBanner = YES;
    [achievementToSend reportAchievementWithCompletionHandler:NULL];

}];

} 
```

此方法检查之前是否提交过成就；如果不是，则提交。因此，您可以在项目中的任何地方进行操作（只要导入了 GCAssistant 类）：

```
[[GCAssistant sharedInstance] reportAchievementWithID:kAchievementChainer]; 
```

它不在文档中，而且我在观看 WWDC 2012 视频之前也不知道这一点，但如果出现错误，iOS 5 会负责重新提交分数/成就。因此，您不必担心为 iOS 5 及更高版本手动存储未发送的提交等。

对于您的问题，您现在可能已经猜到了，您所要做的就是致电：

```
[[GCAssistant sharedInstance] reportAchievementWithID:kYourAchievementID]; 
```

在你的`IBAction`方法中。祝你好运，如果你有任何问题，请告诉我。

# java - Java 字母距离？

> ID：11548797
> 
> 赞同：4
> 
> 时间：2012-07-18T19:22:29.823
> 
> 标签：java

有没有办法在Java中找到字母的距离？

我的意思是例如：

```
A -> C = 3 (as A, B, C)
B -> G = 6 (as B, C, D, E, F, G)
R -> Z = 9 (as R, S, T, U, V, W, X, Y, Z) 
```

（我正在寻找包含第一个字母的距离）

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T19:23:28.760

你可以这样做：

```
int diff = Character.toLowerCase('C') - Character.toLowerCase('A'); 
```

这是可行的，因为每个`char`都与一个[ASCII](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)值相关联。'C' 的值为 67，而 'A' 的值为 65，因此`'C' - 'A'`== `67 - 65`。请注意，这仅适用于所有字符为大写或所有字符均为小写的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:27:03.567

对于包含单个字符的字符串：

```
String s1 = "A";
String s2 = "c";

int result = ((int)s2.toLowerCase().charAt(0) - (int)s1.toLowerCase().charAt(0)) + 1; 
```

如果您只使用字符（没有字符串），那么 Java 的`Character`类有一个静态`toLowerCase()`方法。

**编辑**

对于结果可能为负（'A' - 'C'）的情况：

```
result = Math.abs(result); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T19:28:05.417

大多数情况下，减去 ASCII 码和 UNICODE 码点应该可以工作。

对于与编码无关的解决方案，您可以使用此代码段：即使您使用~~恐龙在地球上漫游时存在的一些~~[非常古老的编码](http://en.wikipedia.org/wiki/EBCDIC) ，这也将起作用。

 ~~```
String all = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
int diff = all.indexOf('Y')-all.indexOf('B')+1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T19:28:18.410

作为一般解决方案：

```
public static int countLetters(char a, char b)
{
    return Math.abs(Character.toLowerCase(a) - Character.toLowerCase(b)) + 1;
} 
```

```
System.out.println(countLetters('a', 'B')); 
```

**输出：**

```
2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T19:36:06.983

在 Java 中，`char`变量实际上可以被视为`int`. 变量的范围`char`是 0 到 65,535（含），每个数字对应一个不同的 Unicode 字符。

因此，您可以简单地直接对字符执行数学运算以达到所需的结果。要转换您给定的示例：

```
System.out.println(('C'-'A') + 1);
> 3
System.out.println(('G'-'B') + 1);
> 6
System.out.println(('Z'-'R') + 1);
> 9 
```

我们必须添加一个以使距离包含在内。

请务必注意，字符是大写还是小写都会影响结果，因为它们具有不同的 Unicode 值。例如，以下操作会产生意想不到的结果：

```
System.out.println(('c'-'A') + 1);
> 35 
```

因此，如果您希望两个字母之间的距离完全独立于大小写，请务必在输入和数学运算之间添加一些大小写检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T19:25:14.820

你总能做到

`System.out.println('C' - 'A' + 1);`~~

# mysql - 致命错误：在非对象上调用成员函数 query()

> ID：11548803
> 
> 赞同：0
> 
> 时间：2012-07-18T19:22:54.370
> 
> 标签：mysql

我使用了下面的代码，它会产生一个致命错误。

```
mysql_connect("localhost", "", "") or die(mysql_error());
mysql_select_db("") or die(mysql_error());

$sel12 = $db->query("SELECT * FROM ".SPICE." WHERE status=1 ORDER BY spice_id desc LIMIT 0 , 9"); 
if(mysql_num_rows($sel12)>0){
$m=0;
?>
<?php 
while($row12=mysql_fetch_array($sel12)){ ?>

<a href="<?php echo SITE; ?>air/<?php echo $row12['spice_id']; ?>/<?php echo $m+1; ?>" title="<?php echo $row12['title']; ?>"></a>
<?php $m++; } ?>
<?php } ?> 
```

致命错误：在第 49 行的 /home/tolly25/public_html/slideshow.php 中的非对象上调用成员函数 query()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:26:52.293

`mysql_select_db("")` - 空数据库？

使用`mysql_query`而不是`$db->query`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:28:44.660

您的查询

```
$sel12 = $db->query('query'); 
```

应该

```
$sel12 = mysql_query('query'); 
```

# php - 使用 cake/sql 时的数组元素命名

> ID：11548810
> 
> 赞同：1
> 
> 时间：2012-07-18T19:23:20.737
> 
> 标签：php, arrays, cakephp

我有一段代码，我从 SQL 中获取多行数据，并且在其中一列中有一个数值，如果它等于某个数字，我需要检查并将数据更改为文本。为了做到这一点，我需要知道数组元素是如何命名`$results[????]`的，以便获取并更改它。那么在使用 SQL/Cake 时，数组的命名约定是什么？

这是结块的代码：

```
$params = array(
    'fields' => array(
        $this->name . '.AUTHORIZE_PROVIDER_NAME',           
        $this->name . '.SOURCE_ID',
        $this->name . '.ORDER_ITEM_TITLE',
        $this->name . '.DOSE_AMOUNT',      
        $this->name . '.DOSE_UNIT',
        $this->name . '.DT_CREATED_TIME',
        $this->name . '.ROUTE_ID',
        $this->name . '.SEQUENCE_NO',
        $this->name . '.LOCATION',
        $this->name . '.BODY_SITE_ID',
        $this->name . '.COMMENT', 
        'DD.DICTIONARY_DATA_CODE',
    ),

    /*
    'conditions' => array(
        //conditions
        $this->name . '.HID'    => $hospital_id,
        $this->name . '.PID'    => $patient_id,                
    ),
    */

    'order' => array(
        $this->name . '.DT_CREATED_TIME',
    ),
    'joins' => array(
        array(
            'table'     => 'DICTIONARY_DATA',
            'alias'     => 'DD',
            'type'      => 'INNER',
            'fields'    => 'DD.DICTIONARY_DATA_CODE as DD_Code',
            'conditions'=> array(
                $this->name . '.PRIORITY_ID = DD.DICTIONARY_DATA_ID',
                $this->name . '.HID' => $hospital_id,
                $this->name . '.PID' => $patient_id,
            )
        )
    ),
);
$rs = $this->find('all', $params); 
```

我在这里获取数据：

```
foreach ($rs as $record){
    try {
        $result[] = $record[$this->name];
        array_push($result, $record['DD']);
    }
} 
```

并返回它以作为 JSON 对象打印出来。所以我想检查一下and`$results[]`的数值。我怎么能做到这一点而不做？`SOURCE_ID``ROUTE_ID``foreach`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:28:11.590

我想到了：

使用结块 SQL 语句时，会返回一个 3-D 数组（当只请求一个字段或选择时，会返回 2-D）。它们被命名为：

```
Array(
    Array[table_name] =>
        [column_name] => field value
        [column_name] => field value
        .
        .
    Array[table_name] =>
        [column_name] => field value
        [column_name] => field value
        .
        .
    .
    .
); 
```

并且当每个都通过 foreach 语句运行时，元素会根据它在数组中的位置更改为数字`[table_name]` 或`[column_name]`现在`[0]`，或等。`[1]`

为了检查`ROUTE_ID`和`SOURCE_ID`我创建了一个哈希表这样的数值

```
$sourceValues = array(
        500002 => 'Verbal',
        500003 => 'Telephone',
        500004 => 'Written',
        500005 => 'Other'
    );

$routeValues = array(
        11     => 'Intramuscular',
        22     => 'Nasal',
        28     => 'Subcutaneous'
    ); 
```

并遍历 and 的每一行的值，`SOURCE_ID`如下`ROUTE_ID`所示：

```
foreach($record as $value){
           $source = $value['SOURCE_ID'];
           $route = $value['ROUTE_ID'];
           $value['SOURCE_ID'] = $sourceValues[$source];
           $value['ROUTE_ID'] = $routeValues[$route];
           $result[] = $value;
    } 
```

# ios - 将“AudioStream”插件添加到 PhoneGap 1.7 项目时出现问题

> ID：11548817
> 
> 赞同：1
> 
> 时间：2012-07-18T19:23:47.227
> 
> 标签：ios, xcode, plugins, cordova, phonegap-plugins

晚上好，

我只是想将“AudioStream”插件（[https://github.com/liip/phonegap-plugins-audiostream](https://github.com/liip/phonegap-plugins-audiostream)）添加到我的项目中。

使用此插件，您可以将当前标题信息设置为 iOS 锁屏。

但是当我尝试编译时，我得到了这个错误：

`/Users/~/Documents/Arbeit/Rhythm/Source/iOS App/Project/Rhythm/Rhythm/AudioStream.h:9:9: 'PhoneGapCommand.h' file not found`

我重命名为`PhoneGapCommand.h`，`Cordova/CDVPlugin.h`但后来出现更多错误。

有人可以更改这些插件文件，以便它们可以正常工作并在此处发布吗？

我会非常感谢它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T21:50:23.017

看起来这个项目有更新的原生和 Javascript 代码：[https ://github.com/liip/Radios](https://github.com/liip/Radios)

# windows - 如何在 VB 2010 中使用设备主机 API？

> ID：11548818
> 
> 赞同：1
> 
> 时间：2012-07-18T19:23:48.970
> 
> 标签：windows, api, device, host, upnp

我正在 VB 2010 中编写一个通过 UPNP 公开功能的应用程序，但正如 MS 在其网站中解释的那样，我对 Device Host API 完全感到困惑。有没有人有一个简单的例子来说明如何在 VB 2010 中使用这个 API？谷歌让我失望了，我发现的几个例子只是控制点。

提前致谢。

编辑：没关系，[UPNP 技术的开发人员工具](http://opentools.homeip.net/dev-tools-for-upnp)更快地解决了我的问题。所以请考虑解决这个问题。

# c# - 解决 antlr 中的令牌冲突

> ID：11548819
> 
> 赞同：4
> 
> 时间：2012-07-18T19:24:02.333
> 
> 标签：c#, antlr, antlr3, antlrworks

我有一个令牌 OR:'OR'; 我用于评估布尔表达式（a==b OR a==c）我有另一个规则用于解析字符列表 AZ、AK、OR、GA 中的状态缩写...我发现的是 antlr在状态列表上有错误认为 OR 应该是一个`or`令牌而不是

```
stateName   
    : CHAR CHAR (','|EOF) ->^(STATE CHAR+)
    ; 
```

我将如何解决这种歧义？

这是我试图解析的一些规则

*   THEN STATE_LICENSE AL，AK，AS，AZ，AR，CT，DE，DC，FM，FL，GA，GU，HI，ID，IL，IN，IA，KS，KY，LA，ME，MH，MD，MA， MI，MN，MS，MO，MT，NE，NV，NH，NJ，NM，NY，NC，ND，MP，OH，OK，OR，PW，PA
*   如果 1198 == "x" 或 1190 != "x" 那么禁用 800
*   IF 801 >= "1000000" THEN DISPLAY_ERROR "这+太贵了。+Go+and+get+cheaper+one+!!!"

这是我正在使用的语法

```
grammar PointFieldRule;

options 
{
//language = 'CSharp3'; 
output=AST; 
ASTLabelType=CommonTree;
} 
tokens{
STATE;

}

rule : ifExpression?  actionExpression EOF!
;
ifExpression 
    :'IF'! logicalConditionExpression
    ;

logicalConditionExpression
    : booleanAndConditionExpression ( BigOR^ booleanAndConditionExpression)*
    ;

booleanAndConditionExpression
    : logicalCondition ( BigAND^ logicalCondition )*
    ;

BigAND : 'and'|'AND';

logicalCondition
    : booleanAndCondition ( OR^ booleanAndCondition )*
    ;

OR:'||';

booleanAndCondition
    : evalCondition ( AND^ evalCondition)*
    ;

AND: '&&';

evalCondition 
    : FieldID OPERATOR^ (FieldID|STRING)
    ;

 actionExpression 
    : 'THEN'! (actionMessage | fieldAction | stateAction )  
    ;

actionMessage 
    : ('DISPLAY_WARNING' | 'DISPLAY_ERROR')^ STRING
    ;

fieldAction 
    : ('DISABLE' | 'REQUIRED')^ FieldID ( ','! FieldID )* 
    ;

stateAction
    : 'STATE_LICENSE'^ stateName+ //(','! stateName)*
    ;

FieldID
    :'0'..'9'+;

 /* item : FIELD 
    | CHAR CHAR
    ;
*/
//class csharpTestLexer extends Lexer; 

stateName   
    : CHAR CHAR (','|EOF) ->^(STATE CHAR+)
    ;   
CHAR:  ('a'..'z'|'A'..'Z')
    ;

WS : (' ' 
| '\t' 
| '\n' 
| '\r') 
{ $channel = HIDDEN; } 
//{ $channel = Hidden; } 
; 

OPERATOR 
    :   '=='
    | '!='
    |    '<='
    |    '>='
    |    '<'
    |    '>'
    | 'TD'
    | 'FD'
    | 'PD'
    | 'TY'
    | 'LY'
    | 'TM'
    | 'LM'
    | '+(DELTA%)>'
    | '-(DELTA%)>'
    | '+(DELTA)>'
    | '-(DELTA)>'
    | 'LIKE'
    ;

STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ;

//fragment
BigOR: 'or'|'OR'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:06:50.230

词法分析器独立于解析器创建标记。`CHAR`因此，解析器是否在给定点“需要”两个标记并不重要，如果词法分析器“看到”文本`"OR"`，它将始终创建一个`BigOR`标记。你对此无能为力。

在您的情况下，您可以简单地让`stateName`匹配两个`CHAR`令牌，或者像这样的单个`OR`令牌：

```
stateName   
 : name (','|EOF) ->^(STATE name)
 ;   

name
 : CHAR CHAR
 | BigOR
 ; 
```

解析输入`"THEN STATE_LICENSE AL,OR,PA"`将产生以下 AST：

![在此处输入图像描述](../Images/bebc8ea9f13ed191f8e85fe5ce8c1ddd.png)

请注意`OR`，与其他标记不同，它的类型是单个标记，`CHAR`并且它们的字符是分开的。如果您希望您的`OR`节点也有这样的行为，请执行以下操作：

```
name
 : CHAR CHAR
 | BigOR     -> CHAR[""+$BigOR.text.charAt(0)] CHAR[""+$BigOR.text.charAt(1)]
 ; 
```

导致：

![在此处输入图像描述](../Images/afbc49c3fdee859aea7d14c2939fe40f.png)

或者，如果您希望连接两个单独的字符，请执行以下操作：

```
name
 : (CHAR CHAR | BigOR) -> CHAR[$text]
 ; 
```

导致：

![在此处输入图像描述](../Images/0a627539c461583b4107bdad04706e6e.png)

# .net-4.0 - XNA4 游戏类中组件的绘制顺序是什么？

> ID：11548822
> 
> 赞同：0
> 
> 时间：2012-07-18T19:24:21.520
> 
> 标签：.net-4.0, components, drawable, xna-4.0

我正在创建一个具有不同组件的炸弹人游戏。我已经`DrawableGameComponents`为`BombList`、`PlayerList`、单独创建了`WallList`，`PlayerDisplay (List of players when TAB is pressed)`并将它们添加到`Components`列表中。篮板和说明文字绘制在主课中`Game1`。

我想知道这些组件的渲染顺序。是否按照它们在`Components`列表中的顺序？最初看起来是这样的。

后来，我需要更新`BombList`,`PlayerList`和`WallList`. 但这一次，它`PlayersDisplay`在后面渲染。我试图将它们插入不同的位置，但我意识到重要的是添加组件的顺序（无论在什么位置）。

我的问题是

*   **组件在列表中以什么顺序呈现`Components`？**
*   **如果我有很多组件，那么何时会相对于列表中的其他组件调用该类的`Draw()`？`Game1`**
*   **是否已将此类`Game`添加`Components`到基础构造函数的列表中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:01:48.543

阅读[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.drawablegamecomponent_members.aspx "DrawableGameComponent 成员")解释了这一点。

它有以下成员：`.DrawOrder`

> 组件的绘制顺序，相对于同一 GameComponentCollection 中的其他组件。

此外，当您调用覆盖时，您正在调用所有组件的`base.Draw()`方法。`Draw``.Draw`

# javascript - 调试 Firefox 插件 IDE

> ID：11548826
> 
> 赞同：0
> 
> 时间：2012-07-18T19:24:35.757
> 
> 标签：javascript, ide, firefox-addon, aptana, firefox-addon-sdk

我发现自己正在开发一个带有`ADD-ON SDK`.

是否可以使用 IDE 调试此扩展，例如 Aptana 或 WebStorm？

这个扩展修改了一个基于 URL 的网页，并且应该有几个内容脚本。

使用`page-mod`模块，相信也`self module`一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:40:45.607

目前唯一的方法是使用错误控制台（Ctrl+Shift+J）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:29:09.717

目前还没有办法远程调试 SDK 代码，但是我们希望最终能够连接到 Firefox 的新 JS 调试器（现在在 Firefox 15 beta 中可用）。

# asp.net-mvc - 如何为 Google Earth (.NET MVC 3) 返回动态 KML 文件

> ID：11548827
> 
> 赞同：1
> 
> 时间：2012-07-18T19:24:36.287
> 
> 标签：asp.net-mvc, kml, google-earth

我在控制器中有下一个方法

```
public ActionResult LimitesCampo(int id)
{
    var kml = fieldService.GetKml(id);

    FileInfo fileInfo = new FileInfo("Field" + id + ".kml");
    if (!fileInfo.Exists)
    {
        using (StreamWriter writer = fileInfo.CreateText())
        {
            writer.WriteLine(limites.KML);
        }
    }

    this.Response.AddHeader("Content-Disposition", "filename=" + Server.HtmlEncode("Field" + id + ".kml"));
    this.Response.ContentType = "application/vnd.google-earth.kml+xml";

    return File(fileInfo.OpenRead(), "application/vnd.google-earth.kml+xml");
} 
```

当我输入控制器操作的 URL 时，KML 会正确返回，即使浏览器要求下载文件并且在 Google 地球独立应用程序上工作正常，但是如果我尝试从 jQuery AJAX 函数中检索 KML，KML 不起作用在我的应用程序的 GE 插件上。我尝试使用存储在磁盘上的 KML 文件并正常工作，问题在于动态数据。

注意：我正在使用与 Visual Studio 2010 Express 集成的 Web 服务器。

# concurrency - 如何使并发问题更频繁地发生？

> ID：11548835
> 
> 赞同：0
> 
> 时间：2012-07-18T19:25:24.540
> 
> 标签：concurrency

这是一个普遍的问题。假设服务器有并发问题。客户端可以同时发送多个请求来触发问题。那么如何让问题更频繁地发生呢？

1.  客户端需要足够快以同时发送更多请求

2.  服务器需要足够快

他们会帮助重现问题吗？或者是否相反？服务器需要慢吗？

编辑1：我认为这是一个竞争条件并发问题。多个线程使用同一个对象，但该对象不是线程安全的。

我主要关心的是假设我们有一个每秒发送一些请求的客户端，使用更快的服务器或更慢的服务器更容易重新创建问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:28:27.493

如果您想让问题发生得更多，那么同时获得更多活跃的客户端，或者让您的客户端使用自动循环来提交导致问题的 API 命令。

我假设您想让问题发生，以便您可以确定它发生的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:31:04.220

如果您正在谈论锁争用并发问题，那么我会说快速（或多个）客户端和慢速服务器。在锁中花费的时间越多越好。

如果您在想要高水平的随机性时谈论竞争条件 - 不同的服务器性能水平。服务器上的大量连接也会对此有所帮助，但您需要尝试各种不同的服务器负载。从一些客户端开始以确保并发性，然后增加吞吐量，直到您淹没服务器。

我怀疑重新创建您的问题将会受到打击和错过。添加或记录消息时要小心，`System.out`因为这会改变同步模式。

**编辑：**

如果您谈论的是非线程安全对象上的读/写竞争条件，那么我会说您想要尽可能多的不同性能级别。竞态条件都是关于线程时间片何时完成并且线程被换出、缓存内存刷新时间、其他线程何时在编写器线程运行的同时运行以及操作的顺序。

同样，我会编写您的客户端，以便它们启动缓慢，然后构建，以便服务器将受到不同程度的负载。

# java - 如果字符串字段以加号（+）开头，则更新 Sqlite 表？

> ID：11548837
> 
> 赞同：4
> 
> 时间：2012-07-18T19:25:30.247
> 
> 标签：java, android, database, sqlite

我的 android 应用程序有一个 sqlite 表。此表有一个字符串字段（电话）。当我想插入或更新以 + 加号开头的电话号码（例如“+905331234567”）时，它会忽略加号。它只写 905331234567。但是当我用空格（或除数字以外的任何其他字符）字符（例如“+905331234567”）修改值时，就没有问题了。

```
update friend set phone = "+905331234567"; //905331234567
update friend set phone = " +905331234567";// +905331234567 
```

感谢您的回复。凯末尔

* * *

**编辑**

创建字符串：

```
private static final String CREATE_FRIEND =  // create table 
        "create table " + FriendBean.DB_TABLE_NAME + "(" + 
        FriendBean.KEY_ROWID + " integer primary key autoincrement, " +
        FriendBean.KEY_contactID + " String, " +
        FriendBean.KEY_name + " String, " +
        FriendBean.KEY_phone + " String, " +
        FriendBean.KEY_accessCode + " String, " +
        FriendBean.KEY_flag + " int " +
        ");"; 
```

插入方法：

```
public void insertFriend(FriendBean bean) {
    SQLiteStatement statement = database.compileStatement(FriendBean.getInsertSQL());    

    statement.bindString(1,bean.getContactID());
    statement.bindString(2,bean.getName());
    statement.bindString(3,bean.getPhone() +"");
    statement.bindString(4,bean.getAccessCode());
    statement.bindLong(5,bean.getFlag());

    long id= statement.executeInsert();
} 
```

班级：

```
public class FriendBean{

    public static final String DB_TABLE_NAME = "friend";

    public static final String KEY_contactID = "contactID";
    public static final String KEY_name = "name";
    public static final String KEY_phone = "phone";
    public static final String KEY_accessCode = "accessCode";
    public static final String KEY_flag = "flag";
    ... 
```

解决方案： 将**String** Fieldtype 替换为**Text**。

参考 [http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html) 和评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:15:35.863

解决方案：

String **Fieldtype**替换为**Text**。

创建表友（rowid整型主键自增，电话文本）；

参考

1.  [http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)
2.  评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:37:19.270

尝试 rawQuery：

```
String sql = "INSERT INTO myTable(Col1, ColDate) VALUES(1,'+7777')";
db.rawQuery(sql ,null); 
```

# matlab - 以时间为 x 轴描绘速度幅度的更好方法

> ID：11548845
> 
> 赞同：1
> 
> 时间：2012-07-18T19:26:26.567
> 
> 标签：matlab

我没有得到一个很好的 pcolor 图，所以我需要做一个速度大小的等高线图，深度（等高线）和时间作为 x 轴。我知道还有其他选择，但我更喜欢等高线图。

```
figure;

timeC = x(in);                %  811 X 1 matrix
depC = [1.20,2.20,3.20];
depC = depC';                 % 3 X 1 matrix

ur = dat3(in,1:3);            % 811 X 3 matrix
vr = dat4(in,1:3);            % 811 X 3 matrix
[THETAc,Rc] = cart2pol(vr,ur);
vMag = Rc';                   % 3 X 811 matrix

hpc = pcolor(timeC,depC,vMag);
set(gca,'YDir','reverse');
set(hpc,'EdgeColor','none');
caxis([0,0.2]);
t = colorbar('peer',gca);
set(gca, 'xlim', [min(timeC) max(timeC)]);
datetick(handles.axes4,'x', 15, 'keeplimits'); % does not work with pcolor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:01:24.300

尝试`help contour`或`help contourf`。您会发现函数参数与 pcolor 非常相似，因此您可能只需替换`pcolor`为`contour`，即

```
hcnt = contour(timeC,depC,vMag); 
```

有关更多自定义选项，请参阅文档。

# java - Android - 何时删除发送的附件

> ID：11548847
> 
> 赞同：1
> 
> 时间：2012-07-18T19:26:38.103
> 
> 标签：java, android, email, gmail, attachment

我有一个小应用程序，用户可以在其中保存他的 GPS 位置。这些位置保存到 .txt 文件。当用户完成后，他应该将此文件发送到他的电子邮件。不应通过 onPause 或 onDestroy 方法取消添加位置。但是当我在通过 GMail 发送文件后尝试删除文件时，它不发送任何附件（因为文件在 gmail 发送之前已被删除 - 有时用户必须手动打开 GMail 并刷新它）。那么什么时候是删除文件的合适时机呢？

# html - 更改悬停时的图像和文本并单击

> ID：11548856
> 
> 赞同：1
> 
> 时间：2012-07-18T19:26:56.903
> 
> 标签：html, css, image, hover

我有一个图像和文本伴随它到一边，我想在悬停或单击图像时同时更改这两者。

我可以设法让图像和文本分别交换，但不能同时交换。

### HTML

```
<body>
<div id="page-container">
    <div class="box-container">
        <div class="image-container">
            <a href="#"><img src=".jpg" height="100" width="200"/></a>
        </div>
        <div class="second-image-container">
            <a href="#"><img src=".jpg" height="100" width="200"/></a>
        </div>
        <div id="text">
            <div id="text-box">
                <p>This is some text</p>

                <p id="more-text">This is some more text</p>
            </div>
        </div>
        <div id="text-two">
            <div id="text-box-two">
                <p>This is some text</p>

                <p id="even-more-text">This is some more text</p>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</body>
</html> 
```

### CSS

```
div#text {
    position: absolute;
    background-color: black;
    width: 350px;
    height: 300px;
    top: 10px;
    right: -65px;
}

div#text p {
    position: absolute;
    color: white;
    top: 100px;
    left: 125px;
}

div#text-box p {
    background-color: blue;
    width:
}

div#text-box p#more-text {
    background-color: red;
    top: 65px;
    left: 90px;
}

div.image-container {
    opacity: 1;
    position: absolute;
    z-index: 500
}

div.second-image-container {
    position: absolute;
    top:;
    opacity: 1;
    z-index: 119
}

div#text-two {
    position: absolute;
    background-color: black;
    width: 350px;
    height: 300px;
    right: -65px;
    top: 10px;
}

div#text-box-two p {
    position: absolute;
    background-color: blue;
    z-index: 10
}

div#text-box-two p#more-text {
    background-color: red;
}

    /*and the CSS that makes each individual image and text to swap:*/
div.image-container:hover, div#text:hover {
    opacity: 0
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:03:03.727

不要尝试在每个单独的 div（图像容器和文本）的悬停上执行此操作，而是更改包含 div（框容器）的悬停时的不透明度。CSS 看起来像这样：

```
.box-container:hover .image-container,
.box-container:hover #text {
    opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:12:03.040

这适用于点击[http://dabblet.com/gist/3138537](http://dabblet.com/gist/3138537)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:09:45.447

我的 2 美分关于如何创建带有文本下方的图像，悬停任何一个都会将图像提升 15 像素。文本保留在自己的位置。直接取自我的网站，因此可能需要编辑以供您个人使用。

CSS：

```
.menu_imgdiv
{
    display:inline-block;
    padding-top:20px;
    padding-left:20px;
    padding-right:20px;
}

.menu_imgdiv p
{
    padding-top:4px;
    text-align:center;
    font-size:larger;
}

.menu_img
{
    width:128px;
    height:128px;
}

.menu_imgdiv:hover .menu_img,
.menu_imgdiv:hover .menu_imgdiv p
{
    margin: -15px 0px 15px;
} 
```

和 HTML：

```
<div id="tm_header">  
    <a href="#/"> <div class="menu_imgdiv"> 
    <img class="menu_img" src="images/home.png" />
    <br /> <p>Homepage</p>  </div> </a>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:05:04.217

您可以将文本和图像与您希望它在下面变成的图像（在相同的 jpeg、gif 或 png 中）合为一个图像，然后使用 :hover 函数更改图像的背景位置。

CSS将是：

```
div.imagecontainer {
width:50px;/*be sure to specify a height & width*/
height:50px;
background:url(images/example.jpeg);
background-position:0px 0px;
overflow:hidden;
}

div.imagecontainer:hover {
background-position:0px -50px;
} 
```

这将消除对第二个图像的需要。如果您使用此技术，请务必添加一个段落元素，其中包含您将要在那里编写的文本并使用可见性：隐藏；z 指数：-100；或文本缩进：1000px；溢出：隐藏；隐藏它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-15T07:12:25.263

一个图像

```
div { background:url('http://www.placehold.it/200x200/f2f2f2') no-repeat; } 
```

悬停时显示不同的图像

```
div:hover { background:url('http://www.placehold.it/200x200/666666') no-repeat; } 
```

如果元素是锚点或定义了一些 onclick 函数.. 使用新类在选择时显示不同的图像

```
div.selected { background:url('http://www.placehold.it/200x200/000000') no-repeat; } 
```

# c - 在使用 realloc 之前是否需要释放指针变量？

> ID：11548857
> 
> 赞同：6
> 
> 时间：2012-07-18T19:26:57.953
> 
> 标签：c, pointers, memory-management, malloc

`realloc`在再次用于指针变量之前是否有必要释放内存。以下哪项是正确的？

```
for(i = 0; i < n; i++){
   myArray = (int *)realloc(myArray, i*sizeof(int));
}

for(i = 0; i < n; i++){
   myArray = (int *)realloc(myArray, i*sizeof(int));
   free(myArray);
   myArray = NULL;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T19:29:17.180

的具体用处`realloc`是您在使用它之前不需要**：**`free`它的存在是为了增加已经分配的内存。

因此，它不是必需的，并且不常见。当传递一个`NULL`指针时，`realloc`表现为`malloc`. 如果您`free`在调用它之前使用它，那么您还不如使用`malloc`.

这两个示例都不正确，因为您省略了错误处理。所有分配器都可以返回`NULL`，并且`realloc`在这方面的使用有点棘手。仔细阅读文档和示例。具体来说，`ptr = realloc(ptr, ...`这总是一个坏主意，因为如果`realloc`失败并返回`NULL`，那么您只是丢失了引用并泄漏了内存。而是使用 tmp 变量，例如：

```
tmp = realloc(ptr, newSize);
if (tmp != NULL)
    ptr = tmp;
else handle_error(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T19:31:22.333

没有一个。您应该始终检查 realloc 是否返回 NULL；如果你不这样做，你就会泄漏内存。此外，您正在转换分配器函数的返回值，这是[不可取](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)的。此外，您最好使用`sizeof(*myArray)`而不是显式`sizeof(type)`构造，因为如果您稍后更改数组/指针的类型，并且您也忘记在此处更改类型，您将面临难以追踪的段错误和/或内存泄漏错误。总结一下：

```
for(i = 0; i < n; i++){
    int *tmp;
    tmp = realloc(myArray, i*sizeof(*myArray));
    if (tmp == NULL)
    {
        free(myArray);
        /* And handle error */
    }
    myArray = tmp;
} 
```

哦，好吧，要真正回答你的问题：你不需要 free()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T19:30:02.130

这取决于你想做什么。 `realloc()`专门设计用于获取现有分配并更改其大小，尽可能多地保留数据。您提供的两个示例在它们将编译的意义上都是正确的，但它们会做不同的事情。

`realloc(NULL, n)`与 相同`malloc(n)`，因此第二种情况在语义上等价于：

```
for(i = 0; i < n; i++){
   myArray = (int *)malloc(i*sizeof(int));
   free(myArray);
   myArray = NULL;
} 
```

`myArray`在第一个示例中，将保留指向的数据。在第二个示例中，现有的分配将被丢弃并被一个全新的、未初始化的分配所取代。原始分配指向的任何数据都将被丢弃。

* * *

应该注意的是，如果分配失败，`realloc()`它将返回`NULL`——但如果你给它传递了一个非`NULL`指针，那么该分配将不会被释放。如果重新分配失败，将一个指针传递`realloc()`给并将结果*直接*分配给同一个指针变量可能会导致内存泄漏，因为原始分配仍然存在。正确的方法是使用临时指针变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T19:28:57.810

没有为什么？的全部意义`realloc`在于它重新分配了现有的内存块，保留了已经存储在该内存块中的值。这个想法是，在某些情况下，它可能会重用现有的内存位置，而不是分配一个全新的内存块并在那里复制旧值。

如果您不想保留旧块的内容，那么您可能根本不需要`realloc`。

还应该提到的是，在给定适当的参数值的情况下， `realloc`' 的功能还包括`malloc`' 和' 的功能。`free`您在代码的第二个周期中所做的基本上是`realloc`在纯`malloc`模式下使用。

# macos - 运行使用 gcc 构建的 ObjC++ 程序而不显示终端窗口

> ID：11548859
> 
> 赞同：0
> 
> 时间：2012-07-18T19:27:07.863
> 
> 标签：macos, gcc, objective-c++

我已经组装了一个在 Windows 中运行没有问题的小型 C++/Objective-C++ 应用程序。当我在 Mac 上使用 gcc 构建时，它确实可以工作，但它总是在运行时显示终端。在 Windows 中，使用 MinGW 我只需添加`-mwindows`. 任何机会 OS X 有一个等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:41:17.197

所以我找到了自己的答案——我把应用程序放在一个“捆绑包”中，得到了我想要的结果。创建一个文件夹并将其命名为“whatever.app”，在其中放置一个名为 MacOS 的文件夹，然后将 gcc 的输出放在那里。捆绑文件夹的根目录还必须有一个 info.plist 文件，其中包含指向您的可执行文件的条目“可执行文件”。完成，运行时不再有终端。可能有一种更合适的方法（除了使用 XCode），但这就是我现在的做法。

# tsql - 在 t-sql 中生成具有可变长度的给定字符集的所有可能排列

> ID：11548860
> 
> 赞同：3
> 
> 时间：2012-07-18T19:27:10.390
> 
> 标签：tsql

我编写了下面的脚本来生成指定字符集的所有可能排列。

有没有办法有效地做到这一点，同时允许在运行时指定长度？

```
DECLARE @string NVARCHAR(MAX)
SELECT @string = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';

DECLARE @Chars TABLE (
    C CHAR(1) PRIMARY KEY
)

DECLARE @N INT 
SET @N = 1 
WHILE @N <= LEN(@string) BEGIN
    INSERT @Chars (
        C
    ) VALUES (
        SUBSTRING(@string, @N, 1)
    )

    SET @N = @N + 1
END

--SELECT * FROM @Chars

SELECT
    A.C + B.C + C.C
FROM @Chars A, @Chars B, @Chars C
ORDER BY
    A.C,
    B.C,
    C.C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:34:03.020

如果您使用的是 SQL Server 2005 或更高版本，您可以尝试递归 CTE：

```
DECLARE @length int;
SET @length = 3;

WITH expanded AS (
  SELECT
    C = SUBSTRING(@string, N, 1)
  FROM numbers
  WHERE number BETWEEN 1 AND LEN(@string)
),
permutations AS (
  SELECT
    S = CAST(C AS nvarchar(max)),
    L = 1
  FROM expanded
  UNION ALL
  SELECT
    S = S + C,
    L = L + 1
  FROM permutations p
  CROSS JOIN expanded e
  WHERE L < @length
)
SELECT *
FROM permutations
WHERE L = @length
; 
```

这`numbers`是一个[数字辅助表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers "SQL，数字辅助表")，用于将字符串扩展为单个字符的列。

如果不进行更多更改，此查询将使用`@length`高达 100 的值而不会出现问题。如果您想要更大长度的排列，则需要附加此行：

```
OPTION (MAXRECURSION *n*)
```

其中*`n`*是一个从 0 到 32767 的整数值，表示递归 CTE 的最大迭代次数，上面提到的 100 是默认值。Nil 实际上意味着没有限制，应该谨慎使用。

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/2742)尝试此查询（并使用它），在那里我将其减少`@string`到只有 8 个字符（以便能够指定更多不同的值`@length`而不使查询返回太多行）并将`numbers`表定义为[系统表`master..spt_values`](https://stackoverflow.com/questions/4273723/what-is-the-purpose-of-system-table-table-master-spt-values-and-what-are-the-me "系统表 table master..spt_values 的用途是什么，其值的含义是什么？")的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:40:04.923

在收到有关可能排列数量的评论后，我意识到字符集的长度和指定的长度应该有非常严格的限制。

鉴于允许的长度非常小，我认为在我的脚本中使用条件没有什么害处......就像这样：

```
DECLARE
    @string NVARCHAR(40), --limit the length of the character set to 40
    @length INT -- the limit for this is in a validation check below

SELECT
    @string = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    @length = 2

IF (@length < 1 OR @length > 4) BEGIN
    RAISERROR('Invalid length specified. This function only supports lengths from 1 to 4', 16, 1)
END

DECLARE @Chars TABLE (
    C CHAR(1) PRIMARY KEY
)

;WITH numbers AS (
    SELECT TOP(LEN(@string)) number
    FROM master..spt_values
    WHERE type = 'P'
    AND number != 0
)

INSERT @Chars (
    C
)
SELECT
    C = SUBSTRING(@string, number, 1)
FROM numbers

IF (@length = 1) BEGIN
    SELECT C FROM @Chars ORDER BY C
END ELSE IF (@length = 2) BEGIN
    SELECT A.C + B.C
    FROM @Chars A, @Chars B
    ORDER BY A.C, B.C
END ELSE IF (@length = 3) BEGIN
    SELECT A.C + B.C + C.C
    FROM @Chars A, @Chars B, @Chars C
    ORDER BY A.C, B.C, C.C
END ELSE IF (@length = 4) BEGIN
    SELECT A.C + B.C + C.C + D.C
    FROM @Chars A, @Chars B, @Chars C, @Chars D
    ORDER BY A.C, B.C, C.C, D.C
END 
```

# php - PDO 类的对象无法转换为字符串

> ID：11548861
> 
> 赞同：1
> 
> 时间：2012-07-18T19:27:12.247
> 
> 标签：php, oop

标题中引用的错误（显然）发生在第 33 行。作为旁注，如果您对我可以优化它的方法有任何建议，或者只是一般性建议，我会全力以赴。谢谢！

这是代码：

```
<?php
error_reporting(E_ALL);
require('config.php');

$filename = htmlentities($_FILES['file']['name']);
$tmpname = $_FILES['file']['tmp_name'];
$filesize = $_FILES['file']['size'];
$filetype = $_FILES['file']['type'];    
$file = $_FILES['file'];

class connect {

    public function dbConnect($host, $user, $pass, $dbname) {

        try {
            global $dbcon;
            $dbcon = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
        }
        catch (PDOException $e) {
            print $e->getMessage();
        }
    }
}

class upload Extends connect {
    public function uploadFile($dbcon, $filename, $filesize, $filetype, $file) {

        if ($filesize > 2000000) {
            echo "File too large!";
        }
        elseif ($filesize <= 2000000) {
            $stmt = $dbcon->prepare("INSERT INTO upload (name, type, size, content) VALUES (?, ?, ?, ?)");
            $stmt->$dbcon->bindParam(1, $filename);
            $stmt->$dbcon->bindParam(2, $filetype);
            $stmt->$dbcon->bindParam(3, $filesize);
            $stmt->$dbcon->bindParam(4, $file);
            $stmt->$dbcon->execute();
            $stmt->$dbcon->close();
            echo "File uploaded!";
        }
        else {
            echo "Unexpected error! Please try again!";
        }
    }
}
$con = new connect;
$con->dbConnect($host, $user, $pass, $dbname);

$exec = new upload;
$exec->uploadFile($dbcon, $filename, $filesize, $filetype, $file); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:30:43.283

你应该使用：

```
$stmt->bindParam(); 
```

从. `$dbcon`_`$stmt->$dbcon->bindParam()`

# jquery - 在 iPhone 上触摸 html 按钮时，href 偶尔会在 URL 中添加 #：为什么？

> ID：11548862
> 
> 赞同：0
> 
> 时间：2012-07-18T19:27:26.083
> 
> 标签：jquery, iphone, events, touch, touchstart

# [这是一个现场演示页面](http://jsbin.com/erumaz)

...以及相关代码：

```
$('#button').on('touchstart', 'a', function(e) {

    e.preventDefault();

}); 
```

在使用我的 iPhone4 和 Safari 5.1.1 时，**有时**当触摸黑色按钮（[在我的演示页面上](http://jsbin.com/erumaz)）时，我会在 URL 中获得一个井号标签（即[http://foo.com/#](http://foo.com/#)）。**它不会一直发生**，只是偶尔发生......当在按钮的外边缘*缓慢*触摸时似乎会发生。

我难住了！

知道这里发生了什么吗？有关如何确保链接永远不会触发的提示？

* * *

### 编辑＃1：

我不希望哈希标签出现在 URL 中。（抱歉，如果不清楚）。*

* * *

### 编辑＃2：

对于未来的读者：在提出我的问题后，我[发现了这个问题](https://stackoverflow.com/questions/7018919/how-to-bind-touchstart-and-click-events-but-not-respond-to-both)......它与我的问题有关，并且有很多有用的建议。

感谢所有在这里回复的人......如果不是你，我可能不会发现上面的帖子。

此外，[这是我最新的演示页面](http://jsbin.com/inajiq/2)，以防万一有人想看到我为处理“幽灵点击”而选择的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:29:16.347

您还需要处理和取消该`click`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:30:28.667

为了将 href 属性添加到链接元素但不让它们去任何地方，您可以在 href 中添加“#”。：href="#"。没有它，链接会丢失指针光标。

# android - 如何让 Android 程序“等待”

> ID：11548864
> 
> 赞同：11
> 
> 时间：2012-07-18T19:27:32.133
> 
> 标签：android, timedelay

我想让我的程序暂停一定的毫秒数，我该怎么做呢？

我找到了不同的方法，例如`Thread.sleep( time )`，但我认为这不是我需要的。我只想让我的代码在某行暂停 x 毫秒。任何想法将不胜感激。

这是C语言的原始代码...

```
extern void delay(UInt32 wait){
    UInt32 ticks;
    UInt32  pause;

    ticks = TimGetTicks();
    //use = ticks + (wait/4);
    pause = ticks + (wait);
    while(ticks < pause)
        ticks = TimGetTicks();
} 
```

等待是毫秒数

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T19:48:41.833

你真的不应该像这样让 UI 线程休眠，如果你这样做，你可能会因为 ActivityNotResponding 异常而让你的应用程序强制关闭。

如果您想延迟某些代码运行一段时间，请使用 Runnable 和 Handler，如下所示：

```
Runnable r = new Runnable() {
    @Override
    public void run(){
        doSomething(); //<-- put your code in here.
    }
};

Handler h = new Handler();
h.postDelayed(r, 1000); // <-- the "1000" is the delay time in miliseconds. 
```

这样，您的代码仍然会延迟，但您并没有“冻结” UI 线程，这充其量只会导致性能不佳，而最坏的情况是 ANR 强制关闭。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T23:18:22.803

好的，首先，永远不要像你正在做的那样在繁忙的循环中实现延迟。我可以看到它来自哪里——我猜 palm Pilot 是一个没有内置 sleep() 功能的单进程设备，但在多进程设备上，像这样的繁忙循环只会带来整个处理器跪了。它会耗尽您的电池，阻止正常的系统任务正常运行，减慢其他程序或完全停止它们，使设备无响应，甚至可能导致它在您的手中变热。

您正在寻找的电话是 Thread.sleep()。您需要进行设置以捕获在您睡觉时发生的任何中断异常。

其次，使用基于事件的用户界面，如 Android（或几乎任何现代 GUI 系统），您永远不想在 UI 线程中休眠。正如其他海报所提到的，这还将冻结整个设备并导致 ANR（活动无响应）崩溃。最重要的是，这些小冻结完全破坏了用户体验。

（例外：如果您睡眠的时间间隔足够短，用户可能不会注意到，您可以侥幸逃脱。1/4 秒可能没问题，尽管根据情况它可能会使应用程序卡顿。）

不幸的是，如果您正在做的是将基于循环的应用程序移植到基于事件的系统中，那么就没有干净而优雅的方式来做您想做的事。

也就是说，正确的过程是在您的 UI 线程中创建一个处理程序并向其发送延迟消息。延迟消息将“唤醒”您的应用程序并触发它执行延迟后将要执行的任何操作。

像这样的东西：

```
View gameBoard;     // the view containing the main part of the game
int gameState = 0;  // starting
Handler myHandler;

public void onCreate(Bundle oldState) {
  super.onCreate(oldState);
  ...
  gameBoard = findViewById(R.layout.gameboard);
  myHandler = new Handler();
  ...
}

public void onResume() {
  super.onResume();
  displayStartingScreen();
  myHandler.postDelayed(new Runnable() { 
    gotoState1(); 
  }, 250);
}

private void gotoState1() {
  // It's now 1/4 second since onResume() was called
  displayNextScreen();
  myHandler.postDelayed(new Runnable() { 
    gotoState2();
  }, 250);
}
... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T19:30:32.160

执行以下操作。这是[参考](https://stackoverflow.com/questions/5791307/wait-for-3-seconds-or-user-click)的链接，这可能会有所帮助。

```
final MyActivity myActivity = this;   

    thread=  new Thread(){
        @Override
        public void run(){
            try {
                synchronized(this){
                    wait(3000);
                }
            }
            catch(InterruptedException ex){                    
            }

            // TODO              
        }
    };

    thread.start(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-21T20:54:22.943

您可以使用`Handler`类和`postDelayed()`方法来做到这一点：

```
Handler h =new Handler() ;
h.postDelayed(new Runnable() {
    public void run() {
                 //put your code here
              }

            }, 2000);
} 
```

2000 ms 是执行函数内部代码之前的延迟时间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T19:35:45.153

不知道为什么要暂停程序。如果您希望在后台执行某些任务并使用结果，请查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。不久前我有[一个类似的问题](https://stackoverflow.com/questions/6760829/waiting-for-a-function-to-finish-execution-and-using-the-results)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-15T22:00:48.850

SystemClock.sleep(millis) 是一个与 Thread.sleep(millis) 非常相似的实用函数，但它忽略了 InterruptedException。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T19:29:57.537

我认为**Thread.sleep(....)**可能是你想要的，你可能没有正确地做到这一点。你到底想暂停什么？希望不是 UI 线程？我猜你有一些后台线程以某种间隔执行一些任务？如果是这样，那么 Thread.sleep 将使该特定线程休眠一段时间，但是它不会暂停所有线程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-29T05:11:19.330

```
try {
    Thread.sleep(2000); //1000 milliseconds is one second.
}
catch (InterruptedException e) 
{
    e.printStackTrace();
} 
```

# sql - SQL 返回非重复记录

> ID：11548876
> 
> 赞同：1
> 
> 时间：2012-07-18T19:28:26.733
> 
> 标签：sql

我正在尝试构建一个查询，该查询将按 and 排序`Name`，`Year`过滤具有较高年份的重复项并将这些记录返回到表中。我的数据目前如下所示：

```
ID-----Name-----Year
1      Bob      2010
2      John     2014
3      Bob      2004
4      Eric     2005 
```

数据应该首先按降序排序，`Name`然后按`Year`降序排序，如下所示：

```
ID-----Name-----Year
3      Bob      2004
1      Bob      2010
4      Eric     2005
2      John     2014 
```

然后重复`Name`记录应该被过滤，只返回最低的`Year`，如下所示：

```
ID-----Name-----Year
3      Bob      2004
4      Eric     2005
2      John     2014 
```

我已经尝试过类似的东西`SELECT DISTINCT`，`HAVING COUNT`但我似乎无法得到它。可能缺少一些简单的东西。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:29:46.643

```
select ID, Name, Year
from (
    select ID, Name, Year, Rank() over (partition by Name order by year) as Rank
    from MyTable
) t
where Rank = 1 
```

[SQL Fiddle 示例 #1](http://sqlfiddle.com/#!3/d0393/1)

如果你不能使用`PARTITION`，你可以这样做：

```
select m.ID, m.Name, m.Year
from (
    select Name, min(Year) as MinYear
    from MyTable
    group by Name
) mm
inner join MyTable m on mm.Name = m.Name and mm.MinYear = m.Year 
```

[SQL 小提琴示例 #2](http://sqlfiddle.com/#!3/d0393/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:30:59.113

```
SELECT Name, MIN(Year) FROM table
GROUP BY Name
ORDER BY Name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:35:42.133

假设 MySQL

```
select min(id), name, min(year)
from (
select distinct t1.id, t1.name, t2.year
from tbl t1, tbl t2
odrer by t1.name, t2.year
) T
group by name 
```

# django - 如何在models.py中使用基类但没有django为基类创建表？

> ID：11548889
> 
> 赞同：3
> 
> 时间：2012-07-18T19:29:15.593
> 
> 标签：django

> **可能重复：**
> [Django models.Model 超类](https://stackoverflow.com/questions/7625010/django-models-model-superclass)

默认情况下，如果你继承一个模型类，django 会为基类创建一个单独的表。有什么方法可以使用基类（这样我就可以在所有派生模型中拥有相同的列），但没有 django 创建该基表，而是创建具有所有这些相同列的派生表？

例如：

```
class MyBaseModel(models.Model):
    createdate = models.DateTimeField(auto_now_add=True) 

class A(MyBaseModel):
    nameA ...

class B(MyBaseModel):
    nameB ...

#I want 2 tables created, A with 2 columns(nameA, createdate) and B with 2 columns. 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:32:55.910

是的。阅读文档：[https ://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

基类应包含：

```
class Meta:
    abstract = True 
```

# jquery - 扭曲 XML 格式

> ID：11548891
> 
> 赞同：0
> 
> 时间：2012-07-18T19:29:36.123
> 
> 标签：jquery, xml

我正在使用 jQuery 对象来附加元素并修改 XML 文档的值，我正在使用具有诸如`<tgroup>`、`<table>`、`<row>`、`<tbody>`等节点的 XML 字符串对其进行初始化，如下所示。

```
var str = "<txml> <table><tsnipp><tbody> <row> ... </row>  </tbody> </tsnipp> </table> </txml>" 
```

现在我正在使用`$(str)`. XML 文档中的元素`<tsnipp>`在`<table>`元素之下；但是，当使用 Firebug 检查 jQuery 对象时，我将其视为`<table>`元素上方，因此 与`<tsnipp>`处于同一级别`<table>`，而不是其子项之一。我认为 jQuery 本身就是这样组织它的，因为它认为`<table>`元素是 HTML 元素。

只需更改`<table>`为`<d_table>`，jQuery 就做了正确的事情。

我想使用 jQuery 来操作对象，因为它更容易作为 DOM 对象进行操作。但是，将其转换为字符串，然后转换为 jQuery 对象将需要大量的正则表达式来来回地将某些字符串替换为其他字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:49:20.507

您可以使用[`jQuery.parseXML`](http://api.jquery.com/jQuery.parseXML)将文档解析为 XML 而不是 HTML：

```
var doc = $($.parseXML(str)); 
```

# iphone - 直接使用 NSStream 是否有优势（相对于 CFNetwork、BSD 套接字等）

> ID：11548900
> 
> 赞同：0
> 
> 时间：2012-07-18T19:30:00.530
> 
> 标签：iphone, sockets, tcp, nsstream, cfstream

我熟悉几种不同的 TCP 连接方式（CFNetwork、BSD 套接字等），但我最近发现 NSStream 有“XXXwithURL:”API，它只允许使用 NSStream 进行 TCP 连接。以这种方式创建连接有什么好处吗？

另外，NSStream 和 CFStream 之间有什么联系？看起来它们是免费桥接的，但这是否意味着 NSStream 是建立在 CFStream 之上的？

# visual-studio-2010 - 错误 LNK2019：函数中引用了未解析的外部符号 MPI_INIT

> ID：11548902
> 
> 赞同：3
> 
> 时间：2012-07-18T19:30:17.323
> 
> 标签：visual-studio-2010, compiler-errors, mpi, windows-7-x64, intel-fortran

我正在尝试使用 Visual Studio 2010 和 Intel Composer XE 2011 SP1 的试用版，ifort Visual fortran 编译器与 Intel Parrelel Studio 2011。我已经设法使用 64 位版本的 ifort 编译了所有目标文件，但是在链接文件时我收到以下错误：

```
1>------ Build started: Project: Console2, Configuration: Release x64 ------
1>Linking...
1>main.obj : error LNK2019: unresolved external symbol MPI_INIT referenced in function MAIN__
1>main.obj : error LNK2019: unresolved external symbol MPI_COMM_SIZE referenced in function MAIN__
1>main.obj : error LNK2019: unresolved external symbol MPI_COMM_RANK referenced in function MAIN__
1>general.obj : error LNK2019: unresolved external symbol MPI_BCAST referenced in function RESEAU
1>potential.obj : error LNK2001: unresolved external symbol MPI_BCAST
1>main.obj : error LNK2001: unresolved external symbol MPI_BCAST
......etc
1>x64\Release\Console2.exe : fatal error LNK1120: 7 unresolved externals
1>
1>Build log written to  "file://C:\Users\Arturo\Documents\Visual Studio 2010\Projects\Console2\Console2\x64\Release\BuildLog.htm"
1>Console2 - 18 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我尝试通过添加命令 /L"C:\PathtoMPILibrary\" 链接到 64 位 Intel MPI 库以及 MPICH2 64 位库，但无济于事。我也尝试过使用这个 makefile，使用 mingw32 包中的 gmake 运行：

```
#Make file for the fdmnes package
objects = main.obj clemf0.obj coabs.obj convolution.obj dirac.obj fdm.obj fprime.obj general.obj hubbard.obj lecture.obj mat.obj metric.obj minim.obj potential.obj scf.obj selec.obj spgroup.obj sphere.obj sub_util.obj tab_data.obj tddft.obj tensor.obj
compiler = mpif90 -O3 -c
fdmnes_mpi : $(objects)
    mpif90 -o fdmnes_mpi $(objects)
main.obj : main.f
    $(compiler) main.f 
clemf0.obj : clemf0.f
    $(compiler) clemf0.f
.....etc 
```

但是当我运行 gmake 时，出现以下错误：

```
Intel(R) Visual Fortran Intel(R) 64 Compiler XE for applications running on Intel(R) 64,
Version 12.1.0.233 Build 20110811
Copyright (C) 1985-2011 Intel Corporation. All rights reserved.

ifort: error #10037: could not find 'link' 
```

我已经用尽了论坛，我需要在 64 位窗口下用 MPI 编译它。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T03:01:17.943

微软在这里给出一些解释`Linker Tools Error LNK2019`，希望对你有所帮助。
[链接器工具错误 LNK2019](http://msdn.microsoft.com/en-us/library/799kze2z%28v=VS.80%29.aspx)

* * *

解决此问题的另一种方法是转到项目的属性->链接器->输入->附加
依赖项，`lib`在此处添加您需要的内容。
例如，如果你使用`timeGetDevCaps`函数并得到`LNK2019`错误，那么你可以添加`Winmm.lib`到`Additional Dependencies`，之后，一切都会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T20:10:46.460

“Диспетчер устройств” -> “创建平台” -> “ARM X64” -> ok

# css - Fancybox 中的溢出内容

> ID：11548907
> 
> 赞同：0
> 
> 时间：2012-07-18T19:30:42.353
> 
> 标签：css, facebook-like, fancybox

我正在使用 Fancy Box (fancybox.net)，但我遇到了内容过多的问题。我的 Fancy Box 窗口中有一个 Facebook 点赞按钮，但是每当有人点击“Like”时，弹出的相应评论框就会被 Fancy Box 窗口切断。我不想增加 Fancy Box 窗口的大小，但是我希望这个评论窗口能够重叠并挂在 Fancy Box 窗口之外。这应该通过一些溢出来修复：可见规范，但到目前为止，我的更改没有效果。任何人都有让这些内容落在窗外的想法吗？谢谢！

# objective-c - Objective-C中的URN？

> ID：11548915
> 
> 赞同：0
> 
> 时间：2012-07-18T19:31:08.797
> 
> 标签：objective-c, urn

所以我需要使用这个 URN 从服务器获取图像和 xml。但老实说，我对此感到很困惑，所以任何帮助都将不胜感激。

例如，这里引用了来自利奇菲尔德大教堂的圣乍得福音第 12 页的高分辨率全彩色数字图像：`urn:cite:fufolioimg:ChadRGB.Chad012`. 引文是瓮格式

任何已知 URN 的图像都可以通过将其 URN 添加到地址来加载到图像引用工具中。默认情况下，该工具的地址是这样的：

```
folio.furman.edu/projects/cite-roi/index.html?w=600&urn=urn:cite:fufolioimg:ChadRGB.Chad012 
```

CHS 图像服务理解这些请求：

GetBinaryImage GetCaption GetRights GetIIPMooViewer

我不知道如何使用所有这些信息来连接和获取图像或 xml。

其他帮助参考：

*   [http://folio.furman.edu/projects/lawdi/index.html](http://folio.furman.edu/projects/lawdi/index.html)

*   [http://chs75.chs.harvard.edu/projects/diginc/techpub/cts-overview](http://chs75.chs.harvard.edu/projects/diginc/techpub/cts-overview)

*   [http://amphoreus.hpcc.uh.edu/tomcat/chsimg/requests](http://amphoreus.hpcc.uh.edu/tomcat/chsimg/requests)

*   [http://www.homermultitext.org/hmt-doc/guides/ict.html](http://www.homermultitext.org/hmt-doc/guides/ict.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:02:23.663

您地址的页面包含此链接：

```
http://amphoreus.hpcc.uh.edu/tomcat/chsimg/Img?&request=GetBinaryImage&urn=urn:cite:fufolioimg:ChadRGB.Chad012&w=3000 
```

这重定向到

```
http://amphoreus.hpcc.uh.edu/fcgi-bin/iipsrv.fcgi?OBJ=IIP,1.0&FIF=/project/homer/Lichfield/ptiffs/Chad_RGB_ptiffs/Chad012.tif&RGN=null&WID=3000&CVT=JPEG 
```

宽度为 3000px 的图像。

所以你只需要下载这个地址的图片

```
http://amphoreus.hpcc.uh.edu/tomcat/chsimg/Img?&request=GetBinaryImage&urn=urn:cite:fufolioimg:ChadRGB.Chad012&w=3000 
```

stackoverflow 上有数以千计的答案显示你可以下载一些东西。

* * *

```
NSSTring urn = @"urn:cite:fufolioimg:ChadRGB.Chad012";

NSString *urlString = [NSString stringWithFormat:@"http://amphoreus.hpcc.uh.edu/tomcat/chsimg/Img?&request=GetBinaryImage&urn=%@&w=3000", urn]; 
```

[我更喜欢使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)]

# jquery - 可以弄清楚为什么 jQuery 脚本不能正确地与 ASP.NET Web API 对话

> ID：11548920
> 
> 赞同：0
> 
> 时间：2012-07-18T19:31:33.337
> 
> 标签：jquery, ajax, asp.net-mvc-4, asp.net-web-api

尝试运行此脚本时出现 500 错误。我在 asp.net mvc4 中设置了一个演示项目，带有一个小型 web api 控制器和默认的 home 控制器。这是我的 api 控制器：

```
namespace MyTrainingApi.Controllers
{

public class CoursesController : ApiController
{

    //for demo mock data, would pull from dbContext here. 
    static List<Course> _courses = InitCourses();

    private static List<Course> InitCourses()
    {
        var ret = new List<Course>();
        ret.Add(new Course { id = 0, name = "HTTP Fundamentals" });
        ret.Add(new Course { id = 1, name = "HTTP Fundamentals Part 2" });
        ret.Add(new Course { id = 2, name = "HTTP Fundamentals Part 3" });
        ret.Add(new Course { id = 3, name = "How to bake a cake" });

        return ret;
    }

    //uri: /api/courses/
    public IEnumerable<Course> Get()
    {
        return _courses;
    }

    //uri: /api/courses/{id}
    public Course Get(int id)
    {
        Course ret = null;
        ret = (from c in _courses where c.id == id select c).FirstOrDefault();
        if (ret == null)
        {
            //TODO: return 404
        }
        return ret;
    }

    public Course Post(Course newCourse)
    {
        newCourse.id = _courses.Count();
        _courses.Add(newCourse);
        //TODO: return 202
        return newCourse;
    }

}

public class Course
{
    public int id { get; set; }
    public string name { get; set; }
}
} 
```

这是我的 HomeController：

```
namespace MyTrainingApi.Controllers
{
public class HomeController : Controller
{
    public ActionResult Index()
    {
    }

    public ActionResult Course(int id)
    {
        return View(id);
    }

    public ActionResult Create()
    {
        return View();
    }
}
} 
```

所以我有三个我正在试验的视图：索引是所有课程的列表，课程是基于 id 的一门课程，创建应该返回一些信息并添加课程。Create 视图是我在这里遇到的问题。这是视图代码：

![在此处输入图像描述](../Images/a102bbf0d308a70d2abfd67d9897ddb9.png)

错误消息说：

没有 MediaTypeFormatter 可用于从媒体类型为“未定义”的内容中读取“课程”类型的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:39:57.717

好吧，我想通了，感谢关于在评论中指定数据的提示，我将其添加到 ajax 请求中

数据：{ id：0，名称：$('#name').val() }

现在它起作用了！

# java - 使用 SWT eclipse 在 Java 中编辑 GridData？

> ID：11548923
> 
> 赞同：0
> 
> 时间：2012-07-18T19:31:35.983
> 
> 标签：java, swt

我得到了一个使用 GridData 的代码，如下所示：

```
public DetailView(Composite parent) {
        carModel = new Composite(parent, SWT.NONE);
        carModel.setLayoutData(new GridData(GridData.FILL_BOTH));
        carModel.setLayout(new GridLayout());
}

public void constructView() {
        carModelViewer = new TableViewer(carModelComposite, SWT.BORDER);
        CarModelProvider = new carModelContentProvider();
        carModelViewer.setContentProvider(carModelProvider);
        carModelViewer.setLabelProvider(new CarModelLabelProvider());

        Table carModel = carModelViewer.getTable();
        carModel.setHeaderVisible(true);
        carModel.setLinesVisible(true);
        carModel.setLayoutData(new GridData(GridData.FILL_BOTH));

        TableColumn carModelColumn = new TableColumn(carModel, SWT.LEFT);
        carModelColumn.setText("Model:");
        carModel.pack();
} 
```

我想知道是否可以在应用程序的 UI 中编辑单元格。我尝试阅读API并找到两种方法：1。2 `setCellEditor()` 。`setCellModifier()` 但不确定参数。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:09:24.237

`GridData`与单元格的内容完全无关，它只是告诉整个表格应该如何定位在父复合材料中。如果您想更改表格的布局，请阅读[了解 SWT 中的布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)。

如果您想让用户更改单元格的内容，请阅读[使用 SWT/JFace 构建和交付表格编辑器](http://www.eclipse.org/articles/Article-Table-viewer/table_viewer.html)。

# sql - 观看 SQL 运行查询

> ID：11548927
> 
> 赞同：-1
> 
> 时间：2012-07-18T19:31:53.353
> 
> 标签：sql, sql-server

观看专门针对大型数据插入或类似查询集运行查询的性能。

**举个例子 ：**

如果您要对大约数百万条记录进行 Select-Insert 一个非常简单的查询，可以选择什么

是否可以使用 CountDown 性能计时器来查看每千条记录所用的时间？

基于代码的实践或基于工具的实践

你有什么建议？

*任何有关这些的信息都值得赞赏。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:47:18.700

您可能无法分析动态插入每条 1k 记录需要多长时间，除非您建立一种机制来为您的查询提供反馈。即，您可以执行一个循环并分批执行 1k 条记录，或者您可以定期从另一个线程执行 select 语句以对表进行计数并查看差异，尽管我对该方法的尝试并不总是完美。

如果你想要一个比 SQL Server 附带的更好的分析器（在我看来），你可以在这里免费获得一个：http: [//anjlab.com/en/projects/opensource/sqlprofiler](http://anjlab.com/en/projects/opensource/sqlprofiler)。这个分析器的伟大之处在于，您实际上可以对仍在输入的结果进行排序，而这是 Microsoft 的分析器无法做到的。我在上一份工作中经常使用它来识别我们的应用程序中没有缓存数据的地方，并且一遍又一遍地不必要地运行相同的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:46:49.913

SQL Server Profiler 将为您提供正在运行的各个 SQL 语句的资源消耗的详细细分。SSMS 的“显示执行计划”选项将分解单个 SQL 语句并向您显示有关 SQL Server 如何选择优化您的语句的内部详细信息。

如果我理解正确（我不确定我是否理解），那么您最好使用 Profiler 来跟踪一般性能。

# objective-c - 如何从同一个 .m 文件中的另一个方法调用一个方法

> ID：11548931
> 
> 赞同：-7
> 
> 时间：2012-07-18T19:32:12.767
> 
> 标签：objective-c, ios

抱歉标题很复杂，但我不确定最好的表达方式，我这里有两种方法.h

```
@interface Deck : NSObject

-(void) shuffle: (NSMutableArray *) unshuffledDeck;

-(NSMutableArray *) giveHand: (NSMutableArray *)  deck;

-(void) moveOpperand: (NSMutableArray *) moveFrom :(NSMutableArray *) moveTo;

@end 
```

.m

```
-(void) moveOpperand: (NSMutableArray *) moveFrom :(NSMutableArray *) moveTo{
    NSString *opperandObject = [moveFrom lastObject];
    if (opperandObject) {
    [moveTo addObject:moveFrom.lastObject];
        [moveFrom removeLastObject];
    }
}

-(NSMutableArray *) giveHand: (NSMutableArray *)  deck{
    NSMutableArray *hand;
    for (int i=0; i<7; i++) {
      [moveOpperand [_refrenceDeck] [hand]]; //use of undeclared identifier 'moveOpperand'
    }
    return hand;
} 
```

正如您所看到的，我试图在下面的一个中调用上面的那个，问题是我不断收到我上面评论的消息，上面说使用了未声明的标识符，我不知道为什么会发生这种情况，所以我想知道，如何您是否从同一个 .m 文件中的另一个方法调用您编写的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:43:08.400

`[self moveOperand:_referenceDeck :hand];`正如声明的那样，该方法有些令人困惑- moveFrom 是一个参数，而不是参数名称，因此 [self moveOperand:_referenceDeck moveFrom:hand]; 是错的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:36:57.350

```
[self moveOpperand:arg1 :arg2]; 
```

等等

另请注意，`self`在实例方法中指的是实例/实际对象，而在类（“静态”）方法中指的是类本身。

# ruby-on-rails-3 - Ruby on Rails 3 教程练习号。1 提示

> ID：11548932
> 
> 赞同：1
> 
> 时间：2012-07-18T19:32:17.137
> 
> 标签：ruby-on-rails-3, railstutorial.org

我知道我在这篇文章中要求很多，但是在阅读了 4 本书关于 Ruby/Rails 之后，我对我没有得到“啊哈”时刻感到沮丧。如果有人能帮忙，我会过来给你做早餐（一周）。

我来自 PHP/MySQL 的世界，我发现很难掌握 Rails 中的某些东西。我读的最后一本书 Michael Hartl 提出了一些练习，可以添加到他在书中构建的应用程序中。它与协会有关。所以我想知道是否有人可以给我一些提示如何解决这个问题，因为我真的被卡住了。

他构建的应用程序几乎是 Twitter 的克隆。有发微博的用户。他们的主页看起来像这样[http://ruby.railstutorial.org/chapters/following-users#fig:home_page_with_feed](http://ruby.railstutorial.org/chapters/following-users#fig:home_page_with_feed) 用户自己的微博贴在“提要”的右侧。除了提要中用户的微博之外，还有当前用户正在关注的用户的微博。您可以关注和取消关注您想要的任何用户。

练习建议添加@replies。@reply 是一个以@username 开头的微博（例如'@mikeglaz 你好吗'）。然后，此微博会出现在您的提要和用户名的提要中（不一定是您关注的人）。作者建议如下：“这可能涉及在 microposts 表中添加一个 in_reply_to 列，并为 Micropost 模型添加一个额外的 include_replies 范围。” 但是关于关注其他用户的关联非常复杂，这就是让我陷入困境的原因。我将发布一些代码：

**用户**

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :microposts, dependent: :destroy
  has_many :relationships, foreign_key: "follower_id", dependent: :destroy
  has_many :followed_users, through: :relationships, source: :followed
  has_many :reverse_relationships, foreign_key: "followed_id",
       class_name:  "Relationship",
       dependent:   :destroy
  has_many :followers, through: :reverse_relationships, source: :follower

  def feed
    Micropost.from_users_followed_by(self)
  end

  def follow!(other_user)
    relationships.create!(followed_id: other_user.id)
  end

  def unfollow!(other_user)
    relationships.find_by_followed_id(other_user.id).destroy
  end
end

end 
```

**关系**

```
class Relationship < ActiveRecord::Base
  attr_accessible :followed_id

  belongs_to :follower, class_name: "User"
  belongs_to :followed, class_name: "User"
end 
```

**微博**

```
class Micropost < ActiveRecord::Base
  attr_accessible :content
  belongs_to :user

  def self.from_users_followed_by(user)
    followed_user_ids = user.followed_user_ids
    where("user_id IN (?) OR user_id = ?", followed_user_ids, user)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:38:15.473

嗯，你的具体问题是什么？您根本不必查看复杂的用户关联，这是一个提示！（我发现它们也令人困惑，所有的后续和后续都是如此。但变化主要发生在 Micropost 模型中，所以你应该按照 Michael Hartl 给出的提示开始。

如果您愿意，您可以查看我 14 天前添加的解决方案

[https://github.com/htw-rails/TutorialSampleApp32/](https://github.com/htw-rails/TutorialSampleApp32/)

*   一些源代码可能看起来有点不同，因为这个版本是从 Rails 3.0 版本的教程发展而来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:03:44.577

请注意，我是通过使用用户名来寻找人的......我特别添加了允许@reply 工作的代码。你应该已经完成​​了 Michael Hartl 的 rails 教程

**数据库**

```
class CreateRecipients < ActiveRecord::Migration
  def change
    create_table :recipients do |t|
      t.string :user_id
      t.string :micropost_id

      t.timestamps
    end
  end

  def self.down
    drop_table :recipients
  end
end 
```

**楷模**

```
class Recipient < ActiveRecord::Base
  attr_accessible :micropost_id, :user_id

  belongs_to :user
  belongs_to :micropost

end

class Micropost < ActiveRecord::Base
  attr_accessible :content, :recipients
  belongs_to :user

  USERNAME_REGEX = /@\w+/i

  has_many :recipients, dependent: :destroy
  has_many :replied_users, :through => :recipients, :source => "user"

  scope :from_users_followed_by, lambda { |user| followed_by(user) }

  after_save :save_recipients

  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                     WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids}) OR user_id = :user_id", 
          user_id: user.id)
  end

  private

    def self.followed_by(user)
      followed_ids = %(SELECT followed_id FROM relationships
                    WHERE follower_id = :user_id)
      micropost_ids = %(SELECT micropost_id FROM recipients
                    WHERE user_id = :user_id)
      where("id IN (#{micropost_ids}) OR user_id IN (#{followed_ids}) OR user_id",
      {:user_id => user})
    end

    def save_recipients
      return unless reply?

      people_replied.each do |user|
        Recipient.create!(:micropost_id => self.id, :user_id => user.id)
      end
    end

    def reply?
      self.content.match( USERNAME_REGEX )
    end

    def people_replied
      users = []
      self.content.clone.gsub!( USERNAME_REGEX ).each do |username|
        user = User.find_by_username(username[1..-1])
        users << user if user
      end
      users.uniq
    end
end

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation,
                  :username
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  VALID_UNAME_REGEX = /^[a-z](\w*[a-z0-9])*$/i

  has_many :micropost, dependent: :destroy

  has_many :relationships, foreign_key: "follower_id", dependent: :destroy
  has_many :followed_users, through: :relationships, source: :followed

  has_many :reverse_relationships, foreign_key: "followed_id",
                                   class_name:  "Relationship",
                                   dependent:   :destroy
  has_many :followers, through: :reverse_relationships, source: :follower

  has_many :replies, :class_name => 'Recipient', :dependent => :destroy
  has_many :received_replies, :through => :replies, :source => 'micropost'

  def to_param
    self.username
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T13:26:47.913

我的解决方案不涉及任何 has_many: 关联或范围。它可能更粗糙，但似乎有效。

这就是我所做的：

1.  添加`user_name`到用户
2.  添加`in_reply_to`到微博
3.  在控制器中使用正则表达式扫描 @user_name 的新帖子并挑选出相关的 user_id
4.  将该 user_id 保存在微博的`in_reply_to`
5.  添加到提要的 SQL 查询以挑选出`in_reply_to`与用户 ID 匹配的帖子

我的仓库在这里： [https ://github.com/paul-ylz/sample_app](https://github.com/paul-ylz/sample_app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-03T10:51:53.853

我认为 Michael Hartl 关于“在微博中添加一个 in_reply_to 列”的暗示过于复杂了——你所做的只是扫描微博内容。看看我的解决方案：

用于在提要中包含 @content 的 User_Controller 方法

```
#first of all, if you ever want to paginate an array, you need to include
#'will_paginate/array', otherwise you'll experience problems. 
require 'will_paginate/array'
def show
    current_page = params[:page]
    per_page = params[:per_page]

    #creates an activity feed
    @user = User.find(params[:id])
    @ears_burning = Array.new     #<<-- this is my @replies array
    Micropost.all.each do |m|
      #this looks for a username drop in the post, for example "greenranger"
      if(m.content.include?(@user.username))
        #the micropost with the username(s) is added to the array
        @ears_burning.push(m)
      end
    end

    #my example app, users can also post blogs called "articles", hence
    #the additional arrays, but it serves as a good example as to how I
    #tackled the problem. As you can see, I merge them all into one array
    @array = @user.microposts + @user.articles + @ears_burning

    #This is the user profile activity array, sorted and paginated by 
    #created_at time. Simple!
    @activity = @array.sort_by(&:created_at).reverse!
    @pagination = @activity.paginate(page: params[:show], :per_page => 5)

    # anything else that happens in show
end 
```

我看起来有点不整洁，但它完成了工作。您会注意到，这只查找用户名，而不是@，因此这适用于在微博中键入其他人的用户名。我之所以这样保留它是因为像 twitter 这样的社交网站会自动包含用户的个人资料，无论名称前面有没有“@”符号，但是可以通过使用我在下面的视图代码中使用的正则表达式来稍微改变一下。

这样做的缺点是，如果用户有数千个链接的微博，那么您可能会注意到性能问题 - 但有一些方法可以解决这个问题，就像数据库相关的性能问题一样。

为了给事物添加一个漂亮的“推特”旋转，我在主页的微博提要中添加了一个指向标记用户名的链接。同样，有很多方法可以做到这一点，但我认为最简单和最有效的方法是让 _micropost 部分逐字构建每个微博，扫描每个微博以查找“@”标签。微博有 140 个字符的限制，所以它永远不会是一项巨大的工作。这段代码会出现在你显示微博的任何地方：

```
<!-- micropost main content -->
<span class = "content">
    <% words = mp.content.split(" ") %>
    <% words.each do |e| %>
        <!-- this is where the magic happens, re-builds micropost -->
        <% if e.include?("@") %>
            <!-- adds a link to the user profile if '@' is detected -->
            <%= link_to e, User.find_by_username(e[/@.*/].split('@')[+1][/[^ ]+/]
                        .delete(",")) %> <!-- that regex I was on about -->
        <% else %>
            <!-- posts the word in sequence if not a tag -->
            <%= e %>
        <% end %>  
        <!-- end of magic -->              
    <% end %>
</span> 
```

这样做的缺点是它确实为 Rails 应用程序的视图部分带来了一些逻辑——但在某些情况下这是不可避免的。希望这可以帮助！

# java - 防止外键列中的重复元素

> ID：11548938
> 
> 赞同：0
> 
> 时间：2012-07-18T19:33:03.697
> 
> 标签：java, hibernate, jakarta-ee

使用 Hibernate 3.1 并有两个映射文件 m_devotee 和 m_member，类为 M_devotee 和 M_member。我想避免来自 m_devotee 列 devotee_id 的重复条目，该列在 m_member 表中被引用为 devotee_id 外键。

我是 Hibernate 的新手，想知道我是否在映射中遗漏了一些标签。

这是我的文件，[https://gist.github.com/2e2560e7a04a769848a4](https://gist.github.com/2e2560e7a04a769848a4)

现在，我试图通过在我的 dao 文件中添加代码来防止重复。它给了我一个 ClassCastException。它还应该回滚事务并向 servlet 返回 false，因此它不会将其转发到其他 jsp 文件。

```
Query qr1=session.createQuery("select m.devotee_id from M_member m");  
List<M_member> l1=qr1.list();  
for(M_member mi:l1)  
{  
 if(!(l1.contains(member.getDevotee_id())))  
 {  
  member.setDevotee_id(member.getDevotee_id());  
 //System.out.println("print devotee id"+member.getDevotee_id());  
 }  
} 
```

M_devotee 对象不能转换为 M_member ，如此处所示。

我迷路了，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:26:02.207

这不是很清楚，在我看来，您错过了手册中关于关联的部分（以及 Java 手册中关于命名约定的部分）。

但可以肯定的是，如果您查询字段 devotee_id：

```
select m.devotee_id from M_member m 
```

您将得到一个奉献者 ID 列表。不是 M_member 的列表。因此，假设 devotee_id 是 Long 类型的字段，您将得到一个`List<Long>`. 不是一个`List<M_member>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:51:11.997

将 M_member 和 M_devotee 之间的关联设置为映射为 java Set 的双向多对一关联。这样，就不需要重复检查，因为 Set 接口保证一个值只添加一次到集合中。

```
<class name="Parent">
    <id name="id" column="parent_id"/>
    ....
    <set name="children" inverse="true">
        <key column="parent_id"/>
        <one-to-many class="Child"/>
    </set>
</class>

<class name="Child">
    <id name="id" column="child_id"/>
    ....
    <many-to-one name="parent" 
        class="Parent" 
        column="parent_id"
        not-null="true"/>
</class> 
```

请参阅 Hibernate 文档 7.3.2。双向关联 [http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/collections.html#collections-bidirectional](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/collections.html#collections-bidirectional)

# android - 在为 Android 构建代理服务器方面急需帮助

> ID：11548939
> 
> 赞同：2
> 
> 时间：2012-07-18T19:33:09.577
> 
> 标签：android, multithreading, proxy

我正在为 android 构建一个代理服务器，但我已经碰壁了。我迫切需要帮助。我对Android很陌生。所以，起初，我在 Java SE 中制作了代理服务器。代理服务器的工作方式如下：

1.  它监听本地端口，

2.  当客户端连接时，会创建一个新线程。每个线程也有一个名称。

3.  HOST 是从请求中提取的。

4.  客户端的请求然后被转发到远程地址（从主机获取）。

5.  然后代理读取远程服务器的地址，直到找到-1。

6.  然后将此响应转发给客户端。

代理服务器在笔记本电脑中运行。客户端是安卓手机的Youtube APP。手机已经root，我已经安装了ProxyDroid来告诉客户端代理服务器在哪里。使用了 ProxyDroid 的“全局代理”选项。

Java SE 中的代码：

```
 import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.net.InetAddress;
    import java.net.NetworkInterface;
    import java.net.ServerSocket;
    import java.net.Socket;
    import java.util.Enumeration;

    class clientThread implements Runnable
    {
        Socket clientSocket = null;//each client socket.

        Socket connectYoutubeServerSock = null;//This socket is used to write client's request to the 
                                        //YouTube Server.
        int videoFlag = 0;//this flag determines whether the GET request is a video request or not. 

        final int BufferSize = 8019;
        public String hostURL;
        int youtubePort = 80;
        //public DataOutputStream sendClientResponse = null;

        public clientThread(Socket clientSocket)
        {
            this.clientSocket = clientSocket;
        }

        public void run()
        {
            System.out.println("Client connected: "+clientSocket.toString());
            System.out.println("Current Thread Name: "+Thread.currentThread().getName());

            try
            {
                byte youtubeAppReqArray[] = new byte[BufferSize];//this byte array will house youtube app's request!
                InputStream youtubeAppReq = clientSocket.getInputStream();

                // reading the request and put it into youtubeAppReqArray.
                int bytesRead = youtubeAppReq.read(youtubeAppReqArray,0,BufferSize);
                String youtubeAppReqString = new String(youtubeAppReqArray, 0, bytesRead);
                System.out.println(youtubeAppReqString);

                // extract the url of the GET request!
                int gStart = youtubeAppReqString.indexOf("GET: ") + 4;
                int gEnd = youtubeAppReqString.indexOf('\n', gStart);
                String gURL = youtubeAppReqString.substring(gStart, gEnd - 9);
                System.out.println("URL of GET: " + gURL);
                //test if videoplayback is there or not?
                if(gURL.indexOf("videoplayback") > -1  )
                {
                    System.out.println("This is a video request!");
                    videoFlag = 1;
                }

                // extract the host to connect to
                int hStart = youtubeAppReqString.indexOf("Host: ") + 6;
                int hEnd = youtubeAppReqString.indexOf('\n', hStart);
                String host = youtubeAppReqString.substring(hStart, hEnd - 1);
                System.out.println("Connecting to host " + host);

                //forward the youtube app request from proxy to the youtube server
                Socket youtubeServerSocket = new Socket(host, 80);
                OutputStream writeToYoutubeServerStream = youtubeServerSocket.getOutputStream();
                System.out.println("Forwarding request to server");
                writeToYoutubeServerStream.write(youtubeAppReqArray, 0, bytesRead);
                writeToYoutubeServerStream.flush(); 

                // forward the response from the server to the browser
                byte youtubeServerResArray[] = new byte[BufferSize];//this byte array will house youtube server's response.

                InputStream readFromYoutubeServerStream = youtubeServerSocket.getInputStream();
                OutputStream writeToYoutubeAppStream = clientSocket.getOutputStream();

                System.out.println("Forwarding request from server");

                int remoteBytesRead;
                do 
                {
                    remoteBytesRead = readFromYoutubeServerStream.read(youtubeServerResArray,0,BufferSize);
                    System.out.println("Receiving " + remoteBytesRead + " bytes");
                    if (remoteBytesRead > 0) 
                    {
                        writeToYoutubeAppStream.write(youtubeServerResArray, 0, remoteBytesRead);
                        String rData = new String(youtubeServerResArray,0,remoteBytesRead);
                        System.out.println("Remote data:  "+rData);
                    }
                } while (remoteBytesRead > 0); 

                writeToYoutubeAppStream.flush();
                youtubeServerSocket.close();
                clientSocket.close();
                System.out.println("End of communication");
            }
            catch(IOException ioe)
            {
                System.out.println("Error"+ioe.getMessage());
            }
        }
    }

    public class ChallengeProxy extends IOException 
    {
        public static final int SERVERPORT = 4447;
        public static int threadName = 0;
        public static void main(String[] args) 
        {
            ChallengeProxy proxyObj = new ChallengeProxy();
            proxyObj.knowIP();//get the IP address of the local machine!

             try 
             {
                 ServerSocket serverSocket = new ServerSocket(SERVERPORT);
                 System.out.println("Started on: "+SERVERPORT);

                 while(true)//Non stop listen for clients!
                 {
                     Socket clientSocket = serverSocket.accept();//blocks until client is connected!
                     System.out.println("Client connected: "+clientSocket.toString());

                     Thread t = new Thread(new clientThread(clientSocket), Integer.toString(threadName));
                     t.start();

                     threadName++;
                 }
             } 
             catch (IOException ioe) 
             {
                System.out.println("Could not listen on port: "+SERVERPORT);
                System.out.println("Error"+ioe.getMessage());
             }
             catch(Exception e)
             {
                 System.out.println("Error"+e.getMessage());
             }
        }

        public void knowIP()
        {
            try 
            {
                 Enumeration e = NetworkInterface.getNetworkInterfaces();

                 while(e.hasMoreElements()) 
                 {
                    NetworkInterface ni = (NetworkInterface) e.nextElement();
                    System.out.println("Net interface: "+ni.getName());

                    Enumeration e2 = ni.getInetAddresses();

                    while (e2.hasMoreElements())
                    {
                       InetAddress ip = (InetAddress) e2.nextElement();
                       System.out.println("IP address: "+ ip.toString());
                    }
                 }
             }
             catch (Exception e) 
             {
                 e.printStackTrace();
             }
        }

} 
```

这正是我想要的。现在，我稍微改造一下代码，让它在 Android 中运行。但是，下面的逻辑是相同的。同样，当新客户端连接时，也会创建一个新线程。Youtube APP 仍然是客户端。所以现在，YouTube APP 会请求驻留在同一台 Android 机器上的代理服务器。和以前一样，ProxyDroid 被配置为，YouTube APP 知道我的代理服务器在哪里运行。
Android的代码看起来像（这个代码在我得到第一个答案后进行了相应的修改并且它不完整，因为在完成之前代码已经开始显示严重错误！）：

```
public class ChallengeAndroidProxyActivity extends Activity 
{
    public static final int SERVERPORT = 4453;
    public static int threadName = 0;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        (new Thread(new Runnable() 
                                 {
                                    public void run() 
                                    {
                                        startSocketServer();
                                    }
                                 }
                     )).start();
    }

    /*
     * Here we will create an infinite loop that will listen
     * for client connections.
     * 
     * */
    public void startSocketServer() 
    {
        knowIP();// Now we find the IP address of the native machine.
        String LOG_TAG = "SocketServerThread";
        Log.i(LOG_TAG,"Inside the server thread! ");

        try 
        {
            ServerSocket serverSocket = new ServerSocket(SERVERPORT);
            Log.i(LOG_TAG, "Started on : " + SERVERPORT);

            threadName = 0;
            while (true)// Non stop listen for clients!
            {
                Socket clientSocket = serverSocket.accept();
                Log.d(LOG_TAG , "Client connected : " + clientSocket.toString());

                Thread t = new Thread(new clientThread(clientSocket), Integer.toString(threadName));
                t.start();

                threadName++;
            }
        }
        catch (IOException ioe) 
        {
            Log.i(LOG_TAG, "Could not listen on port: " + SERVERPORT);
            Log.i(LOG_TAG, "Error : " + ioe.getMessage());
        } 
        catch (Exception e) 
        {
            Log.i(LOG_TAG, "Error : " + e.getMessage());
        }
    }

class clientThread implements Runnable
    {
        String LOG_TAG = "clientSocketThread";
        Socket clientSocket = null;//each client socket.

        Socket connectYoutubeServerSock = null;//This socket is used to write client's request to the 
                                        //YouTube Server.
        int videoFlag = 0;//this flag determines whether the GET request is a video request or not. 

        final int BufferSize = 8019;
        public String hostURL;
        int youtubePort = 80;

        public clientThread(Socket clientSocket)
        {
            this.clientSocket = clientSocket;
        }

        public void run()
        {
            Log.i(LOG_TAG,"Client connected: "+clientSocket.toString());
            Log.i(LOG_TAG,"Current Thread Name: "+Thread.currentThread().getName());

            try
            {//1
                byte youtubeAppReqArray[] = new byte[BufferSize];//this byte array will house youtube app's request!
                InputStream youtubeAppReq = clientSocket.getInputStream();

                // reading the request and put it into youtubeAppReqArray.
                int bytesRead = youtubeAppReq.read(youtubeAppReqArray,0,BufferSize);
                String youtubeAppReqString = new String(youtubeAppReqArray, 0, bytesRead);
                Log.i("Youtube App Request: ",youtubeAppReqString);

                // extract the host to connect to
                int hStart = youtubeAppReqString.indexOf("Host: ") + 6;
                int hEnd = youtubeAppReqString.indexOf('\n', hStart);
                String host = youtubeAppReqString.substring(hStart, hEnd - 1);
                Log.i("Connecting to host ",host);

                InetAddress addr = InetAddress.getByName(host);
                int port = 80;
                SocketAddress sockaddr = new InetSocketAddress(addr, port);

                Socket youtubeServerSocket = new Socket();
                youtubeServerSocket.connect(sockaddr);

                OutputStream writeToYoutubeServerStream = youtubeServerSocket.getOutputStream();
                //writeToYoutubeServerStream.write(youtubeAppReqArray, 0, bytesRead);

            }//1
            catch(IOException ioe)
            {//1
                Log.i("Error",ioe.getMessage());
            }//1
        }
    }   

    /************************************************************************************/
    public void knowIP()
    {
            This function just gets the IP of the native machine.
    }
} 
```

代码已根据第一个答案建议的更改进行了修改。当代码行

```
//writeToYoutubeServerStream.write(youtubeAppReqArray, 0, bytesRead); 
```

被**注释掉**（通过这一行，我的代理将客户端的请求写入远程服务器），我从客户端获得的请求如下所示：

```
07-19 22:30:16.309: I/ApplicationPackageManager(2843): cscCountry is not German : NEE
07-19 22:30:16.399: I/Net interface:(2843): wlan0
07-19 22:30:16.429: I/IP address:(2843): /192.168.1.129
07-19 22:30:16.429: I/Net interface:(2843): lo
07-19 22:30:16.439: I/IP address:(2843): /127.0.0.1
07-19 22:30:16.439: I/SocketServerThread(2843): Inside the server thread! 
07-19 22:30:16.439: I/SocketServerThread(2843): Started on : 4453
07-19 22:30:20.929: D/SocketServerThread(2843): Client connected : Socket[addr=/192.168.1.129,port=44276,localport=4453]
07-19 22:30:20.959: I/clientSocketThread(2843): Client connected: Socket[addr=/192.168.1.129,port=44276,localport=4453]
07-19 22:30:20.959: I/clientSocketThread(2843): Current Thread Name: 0
07-19 22:30:20.969: I/Youtube App Request:(2843): GET http://gdata.youtube.com/feeds/api/users/asadfffx/newsubscriptionvideos?format=2%2C3%2C9&start-index=1&max-results=10&safeSearch=none HTTP/1.1

07-19 22:30:20.969: I/Youtube App Request:(2843): GData-Version: 2

07-19 22:30:20.969: I/Youtube App Request:(2843): X-GData-Device: device-id="AOuj_RqmoX-WkCNNaJKieF2mmwMlkOMFRk7sQsKP_wmdrL1BB1N9V_iVIJAUBkvvyzGdpxWVS83wE7UkGPYjWf0BWvbPa0Uoo0cmgKfxzEqOog8EC-Rm1Wg", data="H1NEdDZ+FuL4U9v3Bx1hlVIAm1s="

07-19 22:30:20.969: I/Youtube App Request:(2843): Authorization: GoogleLogin auth="DQAAAKcAAAC5aU6IN0t6yUkoiU9OmjU8fYjKm1m7MLKleHLhtR-uwCclnZGcKGm-6gYfkjvAGKGXK88dbKnB708CVCQkvJofL6smBXp7TEFj1FqGaRasdOx2iVYrbaTbWtIc8sBaga7v2P1BfctMiSTtEU2HWCqqCiubMvpfspnl9wS284SLgk-Se4jjFsZTo-84la_2wJy_Wmap8OSTdif7JoaxpxYLAWECByrJO50iMTj__6cN3A"

07-19 22:30:20.969: I/Youtube App Request:(2843): Host: gdata.youtube.com

07-19 22:30:20.969: I/Youtube App Request:(2843): User-Agent: Android-YouTube/2

07-19 22:30:20.969: I/Youtube App Request:(2843): Proxy-Connection: close

07-19 22:30:20.969: I/Youtube App Request:(2843): Connection: close

07-19 22:30:20.969: I/Youtube App Request:(2843): 

07-19 22:30:20.979: I/Connecting to host(2843): gdata.youtube.com 
```

这就是客户端请求的样子。但是当我取消注释以下行时（即它被执行）：

```
writeToYoutubeServerStream.write(youtubeAppReqArray, 0, bytesRead); 
```

一切都崩溃了。特别是，来自 YouTube 应用程序的请求没有任何意义。创建了数百个线程。我的 GET 请求开始看起来像：

```
07-19 22:36:21.969: I/Youtube App Request:(2916): GData-Version: 2

07-19 22:36:21.969: I/Youtube App Request:(2916): X-GData-Device: device-id="AOuj_RqmoX-WkCNNaJKieF2mmwMlkOMFRk7sQsKP_wmdrL1BB1N9V_iVIJAUBkvvyzGdpxWVS83wE7UkGPYjWf0BWvbPa0Uoo0cmgKfxzEqOog8EC-Rm1Wg", data="H1NEdDZ+FuL4U9v3Bx1hlVIAm1s="

07-19 22:36:21.969: I/Youtube App Request:(2916): Authorization: GoogleLogin auth="DQAAAKcAAAC5aU6IN0t6yUkoiU9OmjU8fYjKm1m7MLKleHLhtR-uwCclnZGcKGm-6gYfkjvAGKGXK88dbKnB708CVCQkvJofL6smBXp7TEFj1FqGaRasdOx2iVYrbaTbWtIc8sBaga7v2P1BfctMiSTtEU2HWCqqCiubMvpfspnl9wS284SLgk-Se4jjFsZTo-84la_2wJy_Wmap8OSTdif7JoaxpxYLAWECByrJO50iMTj__6cN3A"

07-19 22:36:21.969: I/Youtube App Request:(2916): Host: gdat
07-19 22:36:21.969: I/Connecting to host(2916): gdata.youtube.com
07-19 22:36:21.979: D/SocketServerThread(2916): Client connected : Socket[addr=/192.168.1.129,port=55126,localport=4453]
07-19 22:36:21.979: I/clientSocketThread(2916): Client connected: Socket[addr=/192.168.1.129,port=55125,localport=4453]
07-19 22:36:21.979: I/clientSocketThread(2916): Current Thread Name: 463
07-19 22:36:21.979: I/Youtube App Request:(2916): GET http://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.comhttp://gdata.youtube.com/feeds/api/users/asadfffx/newsubscriptionvideos?format=2%2C3%2C9&start-index=1&max-results=10&safeSearch=none HTTP/1.1

07-19 22:36:21.979: I/Youtube App Request:(2916): GData-Version: 2

07-19 22:36:21.979: I/Youtube App Request:(2916): X-GData-Device: device-id="AOuj_RqmoX-WkCNNaJKieF2mmwMlkOMFRk7sQsKP_wmdrL1BB1N9V_iVIJAUBkvvyzGdpxWVS83wE7UkGPYjWf0BWvbPa0Uoo0cmgKfxzEqOog8EC-Rm1Wg", data="H1NEdDZ+FuL4U9v3Bx1hlVIAm1s="

07-19 22:36:21.979: I/Youtube App Request:(2916): Authorization: GoogleLogin auth="DQAAAKcAAAC5aU6IN0t6yUkoiU9OmjU8fYjKm1m7MLKleHLhtR-uwCclnZGcKGm-6gYfkjvAGKGXK88dbKnB708CVCQkvJofL6smBXp7TEFj1FqGaRasdOx2iVYrbaTbWtIc8sBaga7v2P1BfctMiSTtEU2HWCqqCiubMvpfspnl9wS284SLgk-Se4jjFsZTo-84la_2wJy_Wmap8OSTdif7JoaxpxYLAWECByrJO50iMTj__6cN3A"

07-19 22:36:21.979: I/Youtube App Request:(2916): Host: gdata.youtube.com 
```

为什么 GET 请求看起来像这样？我的猜测是，线程有问题。创建套接字，读/写线程安全吗？代码是否在线程之间跳转？我究竟做错了什么？相同的代码在 Java SE 中工作；那么为什么它在Android中分崩离析？

任何建议、评论和代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:23:27.417

您不应在活动的 onCreate() 方法中运行服务器循环，因为您将阻塞 UI 线程。启动另一个运行您的套接字服务器的线程。在 onCreate()、onStart() 和 onResume() 方法完成之前，您的应用程序不会被视为正在运行。如果您阻止 onCreate() 您的应用程序将永远不会启动。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    (new Thread(new Runnable() {

        public void run() {
            startSocketServer();
        }
    })).start();
}

private void startSocketServer() {
    final String LOG_TAG = "SocketServerThread";
    knowIP();

    try {

        ServerSocket serverSocket = new ServerSocket(SERVERPORT);
        Log.i(LOG_TAG, "Started on : " + SERVERPORT);

        while (true)// Non stop listen for clients!
        {
            Socket clientSocket = serverSocket.accept();!
            Log.d(LOG_TAG , "Client connected : " + clientSocket.toString());

            Thread t = new Thread(new clientThread(clientSocket),
                    Integer.toString(threadName));
            t.start();

            threadName++;
        }
    } catch (IOException ioe) {
        Log.i(LOG_TAG, "Could not listen on port: " + SERVERPORT);
        Log.i(LOG_TAG, "Error : " + ioe.getMessage());
    } catch (Exception e) {
        Log.i(LOG_TAG, "Error : " + e.getMessage());
    }
} 
```

阅读 Android 应用程序生命周期 [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html) ![活动生命周期](../Images/7df2e63d2ffaf1899bce45410d43db40.png)

您还可以考虑将套接字服务器作为服务运行。 [http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# objective-c - 简单拖放到窗口返回文件路径

> ID：11548942
> 
> 赞同：0
> 
> 时间：2012-07-18T19:33:20.577
> 
> 标签：objective-c, cocoa, xcode4.3

我想在我的应用程序中实现简单的拖放。如果将文件拖到窗口中，我想用 NSLog 返回文件路径。这是我的代码，但如果我拖动文件，什么也不会发生。顺便说一句，我将 AppDelegate 与带有窗口（委托）的引用插座连接起来，以接收来自窗口的所有内容。

AppDelegate.m：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
      [_window registerForDraggedTypes:[NSArray arrayWithObjects:NSFilenamesPboardType, nil]]; 
}

-(NSDragOperation)draggingEntered:(id < NSDraggingInfo >)sender
{
    return NSDragOperationGeneric;
}
-(BOOL)prepareForDragOperation:(id < NSDraggingInfo >)sender
{
    NSPasteboard* pbrd = [sender draggingPasteboard];
    NSArray *draggedFilePaths = [pbrd propertyListForType:NSFilenamesPboardType];
    // Do something here.
    return YES;

   NSLog(@"string2 is %@",draggedFilePaths);}

@end 
```

* * *

AppDelegate.h：

```
//
//  AppDelegate.h
//  testdrag
//
//  Created by admin on 18.07.12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:53:41.860

只有占据屏幕空间的对象——窗口或视图——才能接受和处理拖动事件。您的应用程序委托都不是这些。此外，窗口不会将它收到的*任何消息发送给它的委托人。*它只发送属于`NSWindowDelegate`协议一部分的消息。你需要在一个视图类中实现这个拖动代码，它的一个实例出现在屏幕上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-02T23:55:57.717

这是一个老问题，但这是我解决这个问题的方法：

我做了一个子类`NSWindow`，命名它`MainWindow`。然后我将协议添加`NSDraggingDestination`到新类`MainWindow`中。在 Interface Builder 中，我选择了应用程序窗口，并将`MainWindow`其作为类名放入 Identity Inspector。

在`AppDelegate`：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [_window registerForDraggedTypes:[NSArray arrayWithObjects:NSFilenamesPboardType, nil]];
} 
```

并执行`MainWindow`：

```
#import "MainWindow.h"

@implementation MainWindow

- (void)awakeFromNib {
    [super awakeFromNib];
    printf("Awake\n");
}

- (NSDragOperation)draggingEntered:(id<NSDraggingInfo>)sender {
    printf("Enter\n");
    return NSDragOperationEvery;
}

/*
- (NSDragOperation)draggingUpdated:(id<NSDraggingInfo>)sender {
    return NSDragOperationEvery;
}
*/

- (void)draggingExited:(id<NSDraggingInfo>)sender {
    printf("Exit\n");
}

- (BOOL)prepareForDragOperation:(id<NSDraggingInfo>)sender {
    printf("Prepare\n");
    return YES;
}

- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender {
    printf("Perform\n");

    NSPasteboard *pboard = [sender draggingPasteboard];

    if ( [[pboard types] containsObject:NSFilenamesPboardType] ) {
        NSArray *files = [pboard propertyListForType:NSFilenamesPboardType];
        unsigned long numberOfFiles = [files count];
        printf("%lu\n", numberOfFiles);
    }
    return YES;
}

- (void)concludeDragOperation:(id<NSDraggingInfo>)sender {
    printf("Conclude\n");
}

@end 
```

奇迹般有效！（最后！）

# apache - 在 x86 机器（64 位）中编译 Solaris 10 中的 Apache 2.4.2 错误

> ID：11548943
> 
> 赞同：2
> 
> 时间：2012-07-18T19:33:29.817
> 
> 标签：apache, x86-64, solaris-10

我**很难**在 x86 机器（64 位）的 Solaris 10 中编译 Apache 2.4.2

我安装了所有必需的程序没有问题，但是当用 apache 配置（或做 make）时它爆炸了。

我不知道问题是否出在环境变量上。我不知道哪一个失败了——如果是这样的话——。

这是一个迷你脚本（运行它：*source* **script**）来说明我在做什么（**请注意**，我使用*前缀*标志将所有内容安装在**/opt中）：**

 *```
#!/bin/sh

#Set ENV variables
export LDFLAGS=" -L/usr/sfw/lib -R/usr/sfw/lib -L/usr/X/lib -R/usr/X/lib -L/usr/X11/lib -R/usr/X11/lib -L/usr/ccs/lib -R/usr/ccs/lib "
export PATH=/usr/ccs/bin/amd64/usr/ccs/bin:/usr/sbin:/usr/bin:/usr/sfw/bin:/usr/sfw/sbin
export LD_LIBRARY_PATH=/usr/lib:/usr/sfw/lib
export LD_LIBRARY_PATH_64=/usr/lib/64:/usr/sfw/lib/64

export CFLAGS=-m64 -O3
export CPP_FLAGS=-m64 -O3
export CC=cc

#Install OPENSSL
cd /opt/build_src/source_apache_openssl/openssl-1.0.1c
./config --prefix=/opt/openssl-1.0.1c thread shared solaris64-gcc -m32
gmake clean
gmake
gmake install

#Install ARP
cd /opt/build_src/source_apache_openssl/apr-1.4.6
./configure --prefix=/opt/apr-1.4.6 --with-gnu-ld --enable-threads
gmake clean
gmake
gmake install

#Install ARP-UTIL
cd /opt/build_src/source_apache_openssl/apr-util-1.4.1
./configure --prefix=/opt/apr-util-1.4.1 --with-openssl=/opt/openssl-1.0.1c --with-apr=/opt/apr-1.4.6 --with-crypto --enable-threads 
gmake clean
gmake
gmake install

#Instalamos Apache
cd /opt/build_src/source_apache_openssl/httpd-2.4.2   ---- IT FAILS!!! 
```

请注意环境变量。**他们还好吗？？？**

这是我在配置 ( **./configure ...** ) Apache 时得到的错误： .... 检查构建系统类型... i386-pc-solaris2.10 检查主机系统类型... i386-pc- solaris2.10 检查目标系统类型... i386-pc-solaris2.10

```
Configuring Apache Portable Runtime library ...

checking for APR... yes
  setting CPP to "gcc -E"
  adding "-g" to CFLAGS
  adding "-O2" to CFLAGS
  setting CPPFLAGS to " -DSOLARIS2=10 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -   D_LARGEFILE64_SOURCE"

Configuring Apache Portable Runtime Utility library...

checking for APR-util... yes
  adding "-L/opt/openssl-1.0.1c/lib" to LDFLAGS
checking for gcc... cc
checking whether the C compiler works... no              (!!!!!)
configure: error: in `/opt/build_src/source_apache_openssl/httpd-2.4.2':  (!!!!!)
configure: error: C compiler cannot create executables     (!!!!!)
See `config.log' for more details 
```

**config.log**没有说任何相关的东西-最后对我来说-，它只是列出了设置的环境变量-数百个！- 。

不过，如果我对那个错误执行“gmake”，我会得到：

```
Undefined                       first referenced
 symbol                             in file
BIO_set_callback                    ab.o
BIO_set_callback_arg                ab.o
BIO_get_callback_arg                ab.o
SSL_CTX_set_info_callback           ab.o
ld: fatal: symbol referencing errors. No output written to ab
collect2: ld returned 1 exit status
gmake[2]: *** [ab] Error 1
gmake[2]: Leaving directory `/opt/build_src/source_apache_openssl/httpd-2.4.2/support'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/opt/build_src/source_apache_openssl/httpd-2.4.2/support'
gmake: *** [all-recursive] Error 1 
```

**编辑**：遵循 **twalberg**的建议后，我用 GCC 编译它而不是用 cc，但现在我在执行 gmake 时遇到了这个错误：

```
...
ld: fatal: file ab.o: wrong ELF class: ELFCLASS32
ld: fatal: file processing errors. No output written to ab

-----other times I get-----
ld: fatal: file /opt/pcre-8.30/lib/libpcre.so: wrong ELF class: ELFCLASS32
ld: fatal: file processing errors. No output written to httpd
NOTE: I installed prce with (and without) the path to PATH=/usr/sfw/lib/64

collect2: ld returned 1 exit status
gmake[2]: *** [ab] Error 1
gmake[2]: Leaving directory `/opt/build_src/source_apache_openssl/httpd-2.4.2/support'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/opt/build_src/source_apache_openssl/httpd-2.4.2/support'
gmake: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:34:21.317

谢谢**twalberg**，你在这方面给予了启发。

我必须使用 -m64 标志编译所有内容。

我将放置我使用的迷你脚本。我希望，如果其他人有类似的问题，这可以帮助你：

```
#!/bin/sh

#####################apacheInstaller####################################
# by: kani
# Pre-requisites:
# You must download and install in THIS ORDER:
#
# pcre-8.30 (ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre)
# openssl-1.0.1c (http://www.openssl.org)
# apr-1.4.6
# apr-util-1.4.1
# httpd-2.4.2 (apache)
#
# I gathered all the files in:
#     /opt/build_src/source_apache_openssl/DIRECTORIES
#
# NOTE: this was done in a Solaris 10 x86-64 bit machine!
#
# HOW TO: execute the script
# chmod u+x apacheInstaller.sh
# source ./apacheInstaller.sh 
# NOTE: source is used for the export of the ENV variables!
#######################################################################

#Set ENV variables
export LDFLAGS=" -L/usr/sfw/lib -R/usr/sfw/lib -L/usr/X/lib -R/usr/X/lib -L/usr/X11/lib -R/usr/X11/lib -L/usr/ccs/lib -R/usr/ccs/lib "
export     PATH=/usr/ccs/bin:/usr/sbin:/usr/bin:/usr/sfw/bin:/usr/sfw/sbin:/usr/ccs/bin/amd64
export LD_LIBRARY_PATH=/usr/lib:/usr/sfw/lib
export LD_LIBRARY_PATH_64=/usr/lib/64:/usr/sfw/lib/64
#Dont use CC, use GCC! This is VERY important. It wont work otherwise!!
export CC=gcc
export CFLAGS=-m64 -O3
export CPP_FLAGS=-m64 -O3

#also used:
#export LD_LIBRARY_PATH=/usr/lib/64:/usr/sfw/lib/64
#but not sure if this is needed. Maybe LD_LIBRARY_PATH_64 is enough?

#Install PCRE
#The -m64 flag is FUNDAMENTAL!!! Not sure about the others
cd /opt/build_src/source_apache_openssl/pcre-8.30
./configure --disable-cpp CFLAGS="-g -O3" CC="gcc -m64" --prefix=/opt/pcre-8.30
gmake clean
gmake
gmake install

#Install OPENSSL
cd /opt/build_src/source_apache_openssl/openssl-1.0.1c
./config --prefix=/opt/openssl-1.0.1c thread shared solaris64-gcc -m32
gmake clean
gmake
gmake install

#Install ARP
cd /opt/build_src/source_apache_openssl/apr-1.4.6
./configure --prefix=/opt/apr-1.4.6 --with-gnu-ld --enable-threads
gmake clean
gmake
gmake install

#Install ARP-UTIL
cd /opt/build_src/source_apache_openssl/apr-util-1.4.1
./configure --prefix=/opt/apr-util-1.4.1 --with-openssl=/opt/openssl-1.0.1c --with-  apr=/opt/apr-1.4.6 --with-crypto --enable-threads 
gmake clean
gmake
gmake install

#Install Apache. THE HOT PART!!
cd /opt/build_src/source_apache_openssl/httpd-2.4.2
./configure --prefix=/opt/httpd-2.4.2 --enable-so --enable-pie --enable-module=all --enable-mods-shared=all --enable-proxy --enable-proxy-connect --enable-proxy-ftp --enable-proxy-http --enable-proxy-ajp --enable-proxy-balancer --enable-ssl --with-ssl=/opt/openssl-1.0.1c --enable-static-support --enable-static-htpasswd --enable-static-htdigest --enable-static-rotatelogs --enable-static-logresolve --enable-cgi --enable-vhost --enable-imagemap --with-mpm=prefork --with-pcre=/opt/pcre-8.30 --with-apr=/opt/apr-1.4.6 --with-apr-util=/opt/apr-util-1.4.1
gmake clean
gmake
gmake install 
```*

# c# - 使用异步控制器填充数据表

> ID：11548944
> 
> 赞同：1
> 
> 时间：2012-07-18T19:33:36.947
> 
> 标签：c#, asp.net-mvc, database, asynchronous

我有一个创建某种形式的报告的站点。整个过程最多需要一分钟。为了提高性能，我正在考虑将**同步**控制器变成**异步**控制器。

我阅读了很多主题和指南，但我似乎没有掌握它的窍门。

现在我有一个包含 ~15 个数据表的数据集。大约 15 个数据表中的每一个都由不同的查询填充。

为了将此页面转换为异步控制器，我创建了一个**ConnectionManager**，为每个 DataTable 创建了 15 个**getMethod**，每个 DataTable 都在模型中。我还创建了**2 个控制器**- 一个名为**[Name]Async**，一个名为**[Name]Complete**。但是，现在我被困住了。

如何创建 ~15 个线程并分配每个任务以使用 getMethod 填充 DataTable？！

这里是代码的一些部分。

**控制器**

```
public class RunTableStatisticsController : AsyncController
{
    public void RunTableStatisticsAsync()
    {
        AsyncManager.OutstandingOperations.Increment(2);

        // Create Threads who populate RunTableStatisticsModels DataTables
    }

    public ViewResult RunTableStatisticsComplete(RunTableStatisticsModel voModel)
    {
        return View(voModel);
    }
} 
```

**获取方法**

```
public static DataTable getDataTable1()
        {
            try
            {
                DataTable dtTemp= new DataTable();
                dtTemp.Columns.Add(new DataColumn("ColumnName1", typeof(string)));
dtTemp.Columns.Add(new DataColumn("ColumnName2", typeof(string)));

                string sQuery = "select * from 1";

                // Instantiate the Command Object
                OleDbCommand dbCommand = new OleDbCommand(sQuery, ..MyConnectionManager.Connection);
                dbCommand.CommandType = CommandType.Text;

                // Execute the Stored Procedure
                OleDbDataReader dr = dbCommand.ExecuteReader();

                while (dr.Read())
                {
                    DataRow row = dtTemp.NewRow();
                    row["ColumnName1"] = dr["ColumnName1"]);
                    row["ColumnName2"] = dr["ColumnName2"];

                    dtTemp.Rows.Add(row);
                }
                return dtTemp;

            }

            catch (Exception ex)
            {
                throw new Exception("Error: Reading database.", ex);
            }
        } 
```

我的模型中确实有通讯员

```
public DataTable dtTable1{ get; set; } 
```

然后我有一个视图，其中包含将由数据填充的 Telerik 网格扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:50:25.687

您可以使用 TPL 来并行化这些 DataTables 的检索。这是一个 2 的例子，如果你有更多，你可以考虑使用 DataTables 的集合：

```
public class RunTableStatisticsController : AsyncController 
{
    public void RunTableStatisticsAsync()
    {
        AsyncManager.OutstandingOperations.Increment(2);

        // Create tasks that populate RunTableStatisticsModels DataTables

        Task.Factory.StartNew(() =>
        {
            AsyncManager.Parameters["dt1"] = DAL.GetDataTable1();
            AsyncManager.OutstandingOperations.Decrement();
        });

        Task.Factory.StartNew(() =>
        {
            AsyncManager.Parameters["dt2"] = DAL.GetDataTable2();
            AsyncManager.OutstandingOperations.Decrement();
        });
    }

    public ViewResult RunTableStatisticsComplete(DataTable dt1, DataTable dt2)
    {
        var model = new RunTableStatisticsModel
        {
            DtTable1 = dt1,
            DtTable2 = dt2,
        };
        return View(model);
    }
} 
```

# android - Android：JSON 解析错误，因为字符串包含“”

> ID：11548945
> 
> 赞同：1
> 
> 时间：2012-07-18T19:33:46.930
> 
> 标签：android, json

我正在尝试解析一些 JSON 字符串并且我已经成功了，但是有时 A 字符串会抛出一个引号，例如“size_box”：“PO#45836,4587,3PLTS 48"x40"962LBS @ SHIPREADY BTWN 8AM- 1PM", " 当它达到 48"x40"962LBS 时出现强制关闭错误，所以我的问题是，如果 JSON 格式链接包含特殊字符，我该如何解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:27:02.020

生成这些字符串的任何内容都已损坏，需要通过转义来`"`修复`\"`。

这需要在源头完成 - 之后几乎不可能修复它，因为您将无法分辨哪些引号应该在那里以及哪些（我猜）表示以英寸为单位的盒子大小 - 48“ x40" 是 48 英寸 x 40 英寸正确吗？

只要服务器转义那些引号，它就会正确解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:37:48.900

在 JSON 字符串中，引号`"`应使用反斜杠进行转义。`\`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T19:39:22.053

用另一个字符替换引号，解析字符串，替换引号；

使用功能`String replace(char oldChar, char newChar)`

# python - 我可以使用 Pyramid 分别渲染 Jinja2 模板的不同部分吗？

> ID：11548951
> 
> 赞同：1
> 
> 时间：2012-07-18T19:34:06.947
> 
> 标签：python, pyramid, jinja2

我有一个页面可以在特定页面上加载大量分析和数据，到目前为止它的加载还可以，但我想知道是否可以加快速度。我不得不尝试加快速度的想法是分别渲染每个部分。

例如，查看您在 SO 上的个人资料页面：它有问题、答案、声誉、标签、帐户、徽章、投票，在我当前的模型中，这些内容将被收集在模板中`view.py`，然后由模板呈现。但是，如果“声誉”或“标签”查询由于 XYZ 原因而变慢怎么办，即使它对大多数用户来说不是超级重要，它也会减慢整个页面的加载速度。我考虑过使用 JavaScript 发出请求并在页面上异步呈现 json 回复来解决这个问题，但我真的很喜欢 Pyramid 并使用 Python，所以如果可能的话，我想使用我已经知道的工具而不是学习 javascript 来做到这一点。这种方法的好处是我可以先加载/显示页面顶部，然后在查询完成时渲染页面的其余部分，或者按查询速度排序。

这可能吗，或者您对如何执行此操作有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:32:20.863

这当然是可能的，但实现几乎完全与 Pyramid 或 Jinja2 无关。Pyramid（或任何其他 Web 框架）的工作方式是它从客户端获取一些文本（抽象为请求对象）并基本上返回另一个文本块作为响应，因此操作或多或少是原子的 -在模板引擎完成生成页面的全文之前，不会将响应发送回客户端。

实际上，有一种方法可以让 Pyramid 一点一点地向客户端发送数据，这将使浏览器逐步渲染页面（就像在拨号连接时返回一样） - 就像直接写入文件一样代表响应正文的对象：

```
import time
def some_view(request):
    for i in range(1, 31):
        request.response.body_file.write(".")
        time.sleep(1) 
```

但是这种方法有点受限，因为您只能将数据附加到您已经发送的内容中，无法显示“请稍候，图表正在加载”消息并将其替换为真实图表，甚至首先加载页眉和页脚，然后在中间插入一些东西。此外，这种方法需要您手动渲染模板或根本不使用模板。我只将它用于一些长时间运行的批处理操作

正如您在问题中提到的，更好的技术涉及使用 JavaScript 从单独的 URL 加载页面的位。我相信异步加载的块通常被称为“部分”。

*   您注册了一些单独的视图，它们代表您的主页和您要插入的位，因此，例如，`/questions/123454`将加载页面的主要部分，`/questions/123454/badges`将加载带有徽章的块并`/questions/123454/related`加载相关问题的列表

*   您在将插入部分的页面中定义占位符：

    < div id="badges-partial" >加载中...</div >

*   您在页面中添加了一点 javascript 来加载部分内容（好吧，如果您使用[jquery](http://api.jquery.com/load/)会很小:)：

    ```
    $(function () {
        $("#badges-partial").load("/questions/123454/badges");
        $("#related-partial").load("/questions/123454/related");
    }); 
    ```

因此，如您所见，JavaScript 解决方案更简洁、更简单、更灵活。

# wpf - WPF 依赖属性 MVVM

> ID：11548952
> 
> 赞同：0
> 
> 时间：2012-07-18T19:34:07.600
> 
> 标签：wpf, mvvm, mvvm-light, dependency-properties

我正在创建一个用户控件，这个控件会做一些工作，然后填充三个依赖属性，然后通过绑定被控件的父元素使用。

我的问题是使用 MVVM 在何处保留依赖项属性的最佳实践是什么？我应该为 MVVM 使用框架吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:54:24.287

`DependencyProperties`旨在由 WPF 的绑定系统使用，该系统将 UI 层与数据层联系起来。它们应该保存在 UI 层，而不是数据层 ( `ViewModels`)

关于是否应该使用框架的问题是完全独立的。

我肯定会推荐一个框架，其中包含 MVVM 中经常使用的通用事物（继承对象的基类`INotifyPropertyChanged`，a `RelayCommand`or `DelegateCommand`，消息系统，如`EventAggregtor`or`Messenger`等​​），但是我鼓励您花时间弄清楚在使用框架之前 MVVM 是如何工作的 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:42:27.870

惯用的依赖属性与 ViewModel 表示的“视图状态”无关，也没有理由将它们添加到 ViewModel。我会将它们放在一个文件中，该文件包含您正在实现的控件的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:43:02.317

虽然您可以在不使用框架的情况下实现 MVVM 模式，但为什么要重新发明轮子？只需使用众多出色的 MVVM 框架之一（Caliburn、MVVMLight、Simple MVVM Toolkit 等等……）。

# svn - 推荐的方法来查看两天之间的 SVN 差异统计信息？

> ID：11548955
> 
> 赞同：0
> 
> 时间：2012-07-18T19:34:24.063
> 
> 标签：svn

我正在我公司的内部网站上编写一个非常简单的程序，显示两个日期之间的 svn 提交、行更改和文件更改的数量。我制作了实际页面，但在试图找出执行比较的最佳方法时遇到了麻烦。我希望有人可以推荐一种解决此问题的方法。

编辑：SVN 命令没问题，但似乎应该有一种更简单的方法可以直接获取这些数字。我可以进行解析，但 API 会只给我数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T15:01:04.700

我发现最简单的方法是使用 PHP 调用 SVN 命令并使用正则表达式解析数据。有很多东西要学，它可能会变慢，但它奏效了。

# java - Java：NoSuchElementException

> ID：11548956
> 
> 赞同：2
> 
> 时间：2012-07-18T19:34:32.473
> 
> 标签：java, exception

我开始通过简单地读取数据文件来做练习。当我运行程序时，数据文件被读取，但由于某种原因，我仍然得到“NoSuchElementException”，并且我的输出没有按照预期的方式格式化。这是发生了什么：

我创建了一个简单的数据文件，如下所示：

```
Barry Burd
Author
5000.00
Harriet Ritter
Captain
7000.00
Ryan Christman
CEO
10000.00 
```

之后，我编写了一个简单的“getter”和“setter”程序（代码如下）。

```
import static java.lang.System.out;

  //This class defines what it means to be an employee

public class Employee {

  private String name;
  private String jobTitle;

  public void setName(String nameIn) {
    name = nameIn;
  }

  public String getName() {
    return name;
  }

  public void setJobTitle(String jobTitleIn) {
    jobTitle = jobTitleIn;
  }

  public String getJobTitle() {
    return jobTitle;
  }

  /*The following method provides the method for writing a paycheck*/

  public void cutCheck(double amountPaid)   {
    out.printf("Pay to the order of %s ", name);
    out.printf("(%s) ***$", jobTitle);
    out.printf("%,.2f\n", amountPaid);
  }

} 
```

很容易。 **然后**我编写了实际使用这些东西的程序（下面的代码）。

```
import java.util.Scanner;
import java.io.File;
import java.io.IOException;

public class DoPayroll {

  public static void main(String[] args) throws IOException {
    Scanner diskScanner = new Scanner(new File("EmployeeInfo.txt"));

    for (int empNum = 1; empNum <= 3; empNum++) {
      payOneEmployee(diskScanner);
    }
  }

  static void payOneEmployee(Scanner aScanner) {
    Employee anEmployee = new Employee();

    anEmployee.setName(aScanner.nextLine());
    anEmployee.setJobTitle(aScanner.nextLine());
    anEmployee.cutCheck(aScanner.nextDouble());
    aScanner.nextLine();
  }
} 
```

这是我的输出：

```
Pay to the order of Exception in thread "main" java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Scanner.java:1516)
    at DoPayroll.payOneEmployee(DoPayroll.java:25)
    at DoPayroll.main(DoPayroll.java:14)
 Barry Burd ( Author) ***$5,000.00
Pay to the order of  Harriet Ritter ( Captain) ***$7,000.00
Pay to the order of  Ryan Christman ( CEO) ***$10,000.00 
```

**编辑** 我发现了问题，但我不明白，哈哈。显然，我必须在数据文件的末尾添加一个空行......为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:48:47.010

> 我发现了问题，但我不明白，哈哈。显然，我必须在数据文件的末尾添加一个空行......为什么？

因为您告诉`Scanner`输入文件中的薪水后会有回车。但是，对于最后一个条目，没有回车，因此它确定您犯了编程错误并引发了未经检查的异常。

您可以像这样在代码中解决问题：

```
static void payOneEmployee(Scanner aScanner) {
    Employee anEmployee = new Employee();

    anEmployee.setName(aScanner.nextLine());
    anEmployee.setJobTitle(aScanner.nextLine());
    anEmployee.cutCheck(aScanner.nextDouble());
    if (aScanner.hasNextLine()) {
        aScanner.nextLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:51:04.917

每次你打电话`payOneEmployee()`你`aScanner.nextLine()`最后打电话。这包括你最后一次调用它（当你的循环`empNum`中等于 3 时）。`for`当文件中不再有新行 ( `\n`) 并且您仍然调用`nextLine()`时，您会收到一个`NoSuchElementException`因为...好吧...没有这样的元素。这是因为文件中的最后一个元素是一个`0`字符。

为了将来避免这种情况，您可以添加一个简单的检查器。`java.util.Scanner`已经为您实施了`hasNextLine()`。因此，您可以简单地更改

```
aScanner.nextLine(); 
```

... 到 ...

```
if(aScanner.hasNextLine()) aScanner.nextLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:47:33.080

我认为它到达了文件的末尾。您应该添加一个while循环：

```
while(aScanner.hasNext()) {
    ...
} 
```

这可以防止扫描程序超出文件末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:47:40.537

这里的问题是您的文件以字符“0”结尾，同时`aScanner.nextLine()`尝试使用换行符（“\n”）。

现在，这里有趣的是异常出现的地方。它似乎在第一次`cutCheck()`打印的中间。我的猜测是它与输出流的 IO 缓冲和异步性有关。`out.printf()`是标准输出，而错误消息出现在标准错误上，因此可以解释那里的奇怪行为。

如果你`Thread.sleep()`在你的 for 循环中放了一个，那可能会清除打印问题（尽管这显然只是一个好奇心，而不是对你的代码或类似的东西的修复）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T19:49:24.030

您应该在调用 aScanner.nextLine() 之前调用 hasNextLine。您正在尝试读取文件末尾没有一行的行。

# entity-framework - 实体框架迁移：仅在 -Script 输出中包含 Go 语句

> ID：11548959
> 
> 赞同：17
> 
> 时间：2012-07-18T19:34:38.750
> 
> 标签：entity-framework, entity-framework-migrations

作为规划实体框架迁移的一部分，为了调试数据移动，我经常使用 -Script 参数来生成脚本。

然后我可以将此脚本带到查询分析器并将其包装在事务中以便手动测试它。

我遇到了一种情况，我们需要一个 Go 语句来正确执行脚本。为了在适当的位置输出 Go，将以下代码添加到迁移中。

```
Sql("GO"); 
```

当使用 -Script 时，这会在适当的位置添加一个 GO 语句。但是当不使用 -Script 时。我得到了例外...

```
System.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'GO'. 
```

有没有一种安全的方法可以将 Go 命令添加到脚本中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T12:51:17.430

我最近遇到了完全相同的情况。我的 EF 代码迁移经常引入一个新的表或列，然后我还将使用 Sql(...) 的数据迁移放入那些有时想要引用新表/列的迁移中。正如您所指出的，当作为 EF 代码迁移运行时，每个语句似乎都作为离散批处理发布到数据库，因此没有任何问题。但是，为了满足生产部署的限制，我们将一组代码从 sprint 迁移到单个脚本（使用 -Script），以便为部署团队提供单个聚合 SQL 脚本迁移。正如您所指出的，此脚本文件有时会失败，因为它尝试从单个代码迁移中处理单个 T SQL 批处理，其中后面的语句尝试引用仅在批处理中较早定义的结构。

我并不特别喜欢我现在为减轻这种情况而采取的两种方法中的任何一种，但它们是：

一个。如果我当时碰巧在考虑，我会将代码迁移分成两个迁移，这样在编写脚本时，它们会分成两个（或更多）单独的批次。我不喜欢这样，因为在代码迁移的开发过程中没有任何反馈表明这是必要的，因此它似乎容易出错。

湾。当我生成聚合脚本时，我针对一个临时数据库运行它们以证明它们，并且我最终在该脚本中必要的地方手动注入“GO”语句。这是一个令人讨厌的过程，必须返回并执行，并导致 -Script 输出不是代码迁移的 100% 反映。

我还没有花太多时间深入研究 EF Code Migrations 的源代码，看看我是否能理解为什么它将“GO”解释为存储过程，以及源代码中是否有任何东西可以指向一种方法提供一个可以避免这种情况的指令。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-02T10:10:06.840

```
internal sealed class Configuration : DbMigrationsConfiguration<Context>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        const string providerInvariantName = "System.Data.SqlClient";
        SetSqlGenerator(providerInvariantName, new BatchingMigrationSqlGenerator(GetSqlGenerator(providerInvariantName)));
    }

    protected override void Seed(Context context)
    {
    }

}

internal class BatchingMigrationSqlGenerator : MigrationSqlGenerator
{
    private readonly MigrationSqlGenerator migrationSqlGenerator;

    public BatchingMigrationSqlGenerator(MigrationSqlGenerator migrationSqlGenerator)
    {
        this.migrationSqlGenerator = migrationSqlGenerator;
    }

    public override IEnumerable<MigrationStatement> Generate(IEnumerable<MigrationOperation> migrationOperations, string providerManifestToken)
    {
        var migrationStatements = migrationSqlGenerator.Generate(migrationOperations, providerManifestToken).ToArray();
        foreach (var migrationStatement in migrationStatements)
        {
            migrationStatement.BatchTerminator = "GO";
        }
        return migrationStatements;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T07:41:56.893

`Configuration`当我使用和不使用`-Script`参数运行迁移时，我最终使用了两个不同的类。在我的一个`Configuration`类中，我将其包装`MigrationSqlGenerator`在一个自定义实现中，该实现添加了`GO`语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T06:10:21.500

这对我有用：

```
public class MigrationScriptBuilder : SqlServerMigrationSqlGenerator
{
    public override IEnumerable<MigrationStatement> Generate(IEnumerable<MigrationOperation> migrationOperations, string providerManifestToken)
    {
        var statements = base.Generate(migrationOperations, providerManifestToken);

        statements = statements.SelectMany(s => new[] {
            s,
            new MigrationStatement
            {
                Sql = "GO"
            }
        }).ToList();

        return statements;
    }
} 
```

在 DbContext 配置中，可以通过这种方法使用哪个（如其他答案所示）（迁移流程）：

```
 public Configuration()
    {
        SetSqlGenerator("System.Data.SqlClient", new MigrationScriptBuilder());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-20T12:35:40.233

我用过：

```
public class MigrationScriptBuilder : SqlServerMigrationSqlGenerator
{
#if !DEBUG
    protected override void Generate(System.Data.Entity.Migrations.Model.SqlOperation sqlOperation)
    {
        Statement("GO");

        base.Generate(sqlOperation);

        Statement("GO");
    }
#endif
} 
```

所以当它调试时它不会崩溃。我从发布模式编写脚本。

# asp.net-mvc - 带有 if 语句的 ASP.NET MVC 3 Razor 嵌套 foreach

> ID：11548966
> 
> 赞同：4
> 
> 时间：2012-07-18T19:35:22.687
> 
> 标签：asp.net-mvc, razor, nested-loops

我是一名初级网络开发人员，这是我第一次在这里发帖。

我遇到了一个问题，由于某种原因，最内部的 if 语句无法识别，而是打印为文本。有人对此有解决方案吗？

编辑：找到解决方案：[似乎无法使用 Razor 的 foreach 和 if 语句有条件地创建新表行？](https://stackoverflow.com/questions/5733885/cant-seem-to-conditionally-create-a-new-table-row-using-razors-foreach-and-if)

```
@model IEnumerable<FairShare.Models.Product>
@{
    ViewBag.Title = "Products";
}
<h2>
    Auctions</h2>
<table border="1">
    <col width="192" />

    @{int i = 0;}
        @foreach (var item in Model)
        {
            if (item.DateEnd.Subtract(DateTime.Now).TotalMinutes > -5)
            {
                if (i == 0)
                {
                    <tr>
                }
            <td>
                <a href="/ProductDetails/Index?productID=@item.ID">
                    <img src="Images/@item.ImageName" width="192" height="108"/>
                </a>
                <br />
                <a href="/ProductDetails/Index?productID=@item.ID">@Html.DisplayFor(modelItem => item.ShortTitle)</a><br />
                @Html.DisplayFor(modelItem => item.ShortDescription)<br />
                <div style="color: red;">@Html.DisplayFor(modelItem => item.TimeLeft)</div>
                <div style="color: green;">
                    Current bid: @Html.DisplayFor(modelItem => item.CurrentBid)</div>
            </td>

                i = i + 1;
                if (i == 5)
                {
                    </tr>
                    i = 0;
                }
            }
        }

</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T20:12:34.870

```
 You need to write code this way.  @Html.Raw("<tr>")
          Copy the below code and paste it into your view. it will work. 

            @model IEnumerable<FairShare.Models.Product>

            @{
                ViewBag.Title = "Products";
            }
            <h2>
                Auctions</h2>
            <table border="1">
                <col width="192" />

                @{int i = 0;}
                    @foreach (var item in Model)
                    {
                        if (item.DateEnd.Subtract(DateTime.Now).TotalMinutes > -5)
                        {
                            if (i == 0)
                            {
                               @Html.Raw("<tr>")
                            }
                        <td>
                            <a href="/ProductDetails/Index?productID=@item.ID">
                                <img src="Images/@item.ImageName" width="192" height="108"/>
                            </a>
                            <br />
                            <a href="/ProductDetails/Index?productID=@item.ID">@Html.DisplayFor(modelItem => item.ShortTitle)</a><br />
                            @Html.DisplayFor(modelItem => item.ShortDescription)<br />
                            <div style="color: red;">@Html.DisplayFor(modelItem => item.TimeLeft)</div>
                            <div style="color: green;">
                                Current bid: @Html.DisplayFor(modelItem => item.CurrentBid)</div>
                        </td>

                            i = i + 1;
                            if (i == 5)
                            {
                               @Html.Raw("</tr>")
                                i = 0;
                            }
                        }
                    }

            </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-15T18:32:45.973

**** 向我的表达道歉，但这有点愚蠢，但就像这个例子一样。您不需要额外的 @ 内部代码，并且 html.raw 的使用变得非常方便！当心缺少关闭标签，诀窍是将条件内容包装在`<text>`标签内；）根据以下示例：****

```
 @{
        int x = 0;
    }

    @foreach (var item in Model)
    {

        if (x == 0)
        {
            <text>
                @Html.Raw("<div id=\"rowbeg\" class=\"row\">")
            </text>
        }

        <div class="col-md-3 col-sm-6 col-md-12">
            <div class="item">
                <!-- Use the below link to put HOT icon -->
                <div class="item-icon"><span>HOT/SALE/50%</span></div>
                <!-- Item image -->
                <div class="item-image">
                    @{
                    var base64 = Convert.ToBase64String(item.ProductImage);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                    }
                    <img src='@imgSrc' style="max-width:200px; max-height:150px;" />
                </div>
                <!-- Item details -->
                <div class="item-details">
                    <h5><a href="single-item.html" style="color:blue;">@item.ProductName</a></h5>
                    <div class="clearfix"></div>
                    <p>@item.ProductDescription</p>
                    <!-- Price -->
                    <div class="item-price pull-left">$@item.ProductPrice</div>
                    <!-- Add to cart -->
                    <div class="pull-right"><a href="#" class="btn btn-success btn-sm">Add to Cart</a></div>
                    <div class="clearfix"></div>
                    <hr />
                </div>
            </div>
        </div>

        x = x + 1;
        if (x == 2)
        {
            x = 0;
            <text>
            @Html.Raw("</div>")
            </text>

        }

    } 
```

# symfony - Symfony 功能测试 - 无法保持登录状态

> ID：11548969
> 
> 赞同：0
> 
> 时间：2012-07-18T19:35:37.960
> 
> 标签：symfony, phpunit

成功使用爬虫登录后，我似乎无法保持身份验证。一旦我通过身份验证，我希望能够运行我的每个服务并检查接收到正确的响应。

```
public function testGetClientsAction()
{
    $client = static::createClient();
    $client->followRedirects();

    $cookie = new Cookie('locale2', 'en', time() + 3600 * 24 * 7, '/', null, false, false);
    $client->getCookieJar()->set($cookie);

    // Visit user login page and login
    $crawler = $client->request('GET', '/login');
    $form = $crawler->selectButton('login')->form();
    $crawler = $client->submit($form, array('_username' => 'greg', '_password' => 'greg'));
    $client->insulate();

    $client->request(
       'GET', 
       '/clients/12345', 
        array(), 
        array(), 
        array('X-Requested-With' => "XMLHttpRequest")
    );

    print_r($client->getResponse()->getContent());
    die();

} 
```

print_r 返回登录后重定向到的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:20:14.007

我通过删除解决了这个问题`$client->followRedirects();`

# c++ - 是否有解析 C++ 的工具来强制执行文档

> ID：11548972
> 
> 赞同：0
> 
> 时间：2012-07-18T19:35:45.217
> 
> 标签：c++, documentation

是否有一个工具可以自动检测头文件中定义的所有函数是否都记录在案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:37:58.577

您可能想使用 doxygen 的[`WARN_IF_UNDOCUMENTED`](http://www.doxygen.nl/manual/config.html#cfg_warn_if_undocumented)选项。

# java - 变量范围如何影响多线程竞争条件？

> ID：11548975
> 
> 赞同：0
> 
> 时间：2012-07-18T19:35:52.920
> 
> 标签：java, multithreading, thread-safety

实例变量是否也像静态变量一样共享？这是否意味着竞争条件仅由于静态和实例变量而发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:39:17.310

不管共享资源是共享对象、公共实例变量还是静态内容，所有这些都可能导致[*竞争条件*](http://en.wikipedia.org/wiki/Race_condition)（也就是说，除非共享资源是[*不可变*](http://www.javapractices.com/topic/TopicAction.do?Id=29)的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:40:54.920

是的，实例变量也是共享的，如果多个线程可以访问该实例，那么可能需要防止可能破坏对象状态的过时读取或多部分写入。

此外，访问外部资源（例如文件系统上的文件）可能会导致竞争条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T19:37:07.047

Runnable/Thread 对象的实例变量在线程之间共享（如果多个线程在同一个对象上工作）并且不保证线程执行的顺序或顺序，这可能导致结果不一致。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T20:52:02.270

> 实例变量是否也像静态变量一样共享？

不，它们是每个对象的，而静态是每个类的。您应该对线程对象的数据成员没有直接问题 - 与任何其他对象一样，每个实例都有自己的变量。同样，当然，基于堆栈的自动变量。

要解决线程对象实例变量和由线程对象基于每个线程创建的对象的实例成员的多线程问题，您必须更加努力。使用静力学，它自然而然地发生了:)

> 这是否意味着竞争条件仅由于静态和实例变量而发生？

如果你足够努力，你几乎可以搞砸任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T19:42:45.593

如果没有特定的构造来创建线程局部上下文，则默认情况下没有任何保持状态的东西是线程安全的。不仅仅是 Runnable 的实例，任何代码可以触及并且未能锁定的东西都是未定义行为的潜在来源（不仅仅是竞争条件，还有其他不可预测的部分更新结果，这将使您的应用程序状态同样受到损害）。

# javascript - Phonegap Android SSL 无法从导出的 APK 连接

> ID：11548976
> 
> 赞同：0
> 
> 时间：2012-07-18T19:36:03.190
> 
> 标签：javascript, android, cordova

我正在使用 phonegap 为 Android 开发应用程序。我买了一个证书并在我的服务器中设置了它，当我尝试使用 eclipse 签名的应用程序（调试模式）时，它可以在任何地方（模拟器、电话等）工作，当我使用密钥库导出 APK 时它不会在电话里工作。

有什么想法？

问候

PS：我的证书来自 rapidSSL。

# colors - mercurial 颜色扩展的有效颜色是什么？

> ID：11548978
> 
> 赞同：6
> 
> 时间：2012-07-18T19:36:19.300
> 
> 标签：colors, mercurial, ansi-term

Mercurial 的`color` [扩展](http://mercurial.selenic.com/wiki/ColorExtension)非常棒，但该页面上没有有效颜色的列表。我寻找了一个名为 color 的 python 文件，希望我能够读取源代码并在那里看到它，但没有运气。我希望使用灰色或浅灰色作为颜色，但它无效。灰色（或灰色）似乎很可能出现在颜色列表中。

在哪里可以找到`color`扩展的有效颜色列表？或者我在哪里可以找到`color`扩展的来源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:35:52.477

[您可以在Mercurial Color Extension](http://selenic.com/repo/hg-stable/file/436cc9d017c6/hgext/color.py)中找到源代码。

默认情况下，它识别的颜色是黑色、红色、绿色、黄色、蓝色、洋红色、青色、白色。

但是，正如您从源代码中看到的那样，可以定义自定义颜色，但是如何执行此操作将取决于您的终端。`brightblue`在源中搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-08T10:00:07.420

有效的 - 背景和前景 - 颜色取决于 mercurial 使用的着色模式。使用 terminfo 着色时，您可以获得最大的 (?) 灵活性，在这种情况下，您通常可以访问 xterm 的 256 色立方体。[Marius Gedminas](http://mailto:Marius%20Gedminas%20%3Cmarius@gedmin.as%3E)的[这个 python 脚本](https://gist.github.com/mgedmin/2762225)将在您的终端上为您列出所有这些（它是 shell 可执行文件，以 shebang 开头，因此您可以直接执行它 - 在 Unix'ish 系统上）。但为了省去你的麻烦，我已经链接到下面的输出。

不过，在列出所有颜色之前，这里有一个具体示例，说明如何在`.hgrc`文件中使用该列表：

```
[extensions]
color =

[color]
mode=terminfo
color.lightgray = 250
color.darkgray = 239
status.modified = darkgray bold lightgray_background 
```

这将在较浅的灰色背景上生成深灰色文本（尽管这些不是“规范”的深灰色和浅灰色 - 它们是 007 和 015）。请注意，前景色和背景色没有单独的定义 - 您只需附加`_background`到已定义的颜色名称即可。

[![颜色表](../Images/13bf72b8656cc8910befad0892b3f27b.png)](https://i.stack.imgur.com/3lBc6.png)

# ios - UIImage灰度阈值

> ID：11548983
> 
> 赞同：0
> 
> 时间：2012-07-18T19:36:36.540
> 
> 标签：ios

我想对灰度 UIImage 设置阈值。最简单的方法是什么？

我想我必须获取 UIImage 的位图，然后将其与某个值进行比较，然后将其设置为 0/255。如何获取位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:49:50.537

如果你想从 UIImage 获取位图，这里有一个完整的教程。

[iOS：将 UIImage 转换为 RGBA8 位图并返回](http://paulsolt.com/2010/09/ios-converting-uiimage-to-rgba8-bitmaps-and-back/)

这肯定会帮助你。

谢谢

# performance - 我应该在批量插入之后总是重建索引还是定期重建索引？

> ID：11548985
> 
> 赞同：1
> 
> 时间：2012-07-18T19:36:46.197
> 
> 标签：performance, sql-server-2008, bulkinsert, indexing

我了解批量插入会忽略索引。如果我有一个 1 亿条记录表，并且每天使用 Bulk Insert 插入 30-50k 条记录，那么每周重建索引与每天重建索引会有很大区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:45:51.883

大容量插入更新索引就像 SQLServer 中的普通插入一样。它不会忽略它们。

重建索引就像对磁盘进行碎片整理。使用 50k 插入，每周重建是慷慨的。每月应该没问题。

# python - 向复杂的 Django 视图添加值

> ID：11548992
> 
> 赞同：1
> 
> 时间：2012-07-18T19:37:19.480
> 
> 标签：python, django, view, django-models

我正在尝试从`Photographer`模型中获取值字典以显示在我的表单中。之后，用户将选择 a `Photographer`，提交表单（连同其他信息），然后`A`将使用`Photographer`as 属性创建模型的实例。虽然我知道 ModelForms 可以更友好，但在这种情况下我必须使用 BaseForm：

```
@login_required
def create_in(request, slug):
    element = get_object_or_404(Element, slug=slug)
    a = A.objects.create(element=element, user=request.user)
    a.save()
    return redirect('CreationEditView', pk=a.pk) 
```

将`urlconf`用户发送到`create_in,`用户选择的位置， `element`然后重定向到`CreationEditView,`使用 Django 通用视图中的[BaseUpdateView](https://github.com/django/django/blob/master/django/views/generic/edit.py)来操作对象的位置：

```
class EditView(BaseUpdateView):
    model = A
    form_class = AForm
    context_object_name = 'a'
    page = 'edit.html'

    def get_element(self):
        return self.object.element

    def render_to_response(self, context, **response_kwargs):
        element = self.get_element()
        return render_page(self.request, element,
                           self.page, context)

    def get_success_url(self):
        return reverse('view_all')

    def get_context_data(self, **kwargs):
        context = super(EditView, self).get_context_data(**kwargs)
        return context

    def get_queryset(self):
        qs = super(EditView, self).get_queryset()
        return qs.filter(active=True, user=self.request.user)

    def get(self, request, *args, **kwargs):
        self.object = self.get_object()
        return super(EditView, self).get(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        self.object = self.get_object()
        return super(EditView, self).post(request, *args, **kwargs)

    @method_decorator(login_required)
    def dispatch(self, request, *args, **kwargs):
        return super(EditView, self).dispatch(request, *args, **kwargs)

class CreationEditView(EditView):
    def get_queryset(self):
        qs = super(EditView, self).get_queryset()
        return qs.filter(active=False, user=self.request.user)

    def get_success_url(self):
        return reverse('create_finished',
                       kwargs=dict(pk=self.object.pk))

    def get_context_data(self, **kwargs):
        context = super(CreationEditView, self).get_context_data(**kwargs)
        context['create'] = True
        return context 
```

然后通过 渲染页面`render_page`，如下所示：

```
def render_page(request, element, page, context):
    template_name = element_template_name(element, page)
    try:
        template = get_template(template_name)
    except TemplateDoesNotExist:
        template = get_template('template_location/%s' % page)
    context = RequestContext(request, context)
    return HttpResponse(template.render(context)) 
```

如果我的模型是这样的：

```
class Photographer(models.Model):
    name = models.CharField(max_length=20)
    models = models.ManyToManyField('Model')

class Model(models.Model):
    model = models.CharField(max_length=20, blank=False)
    series = models.ForeignKey('Series', null=True, blank=True)

class A(models.Model):
    user = models.ForeignKey(User)
    photographer = models.ForeignKey('Photographer', blank=True, null=True)
    model = models.ForeignKey('Model', blank=True, null=True) 
```

您将如何将这些值`Photographer`正确集成到视图代码中，以便稍后在模板中使用？这些值将成为用户从中选择的下拉表单的一部分。一个使用示例将非常有帮助。

感谢您的任何想法。

编辑（添加表格）

* * *

```
class AForm(BaseForm):
    def __init__(self, data=None, files=None, instance=None, auto_id='id_%s',
                 prefix=None, initial=None, error_class=ErrorList,
                 label_suffix=':', empty_permitted=False):

        if not instance:
            raise NotImplementedError("Instance must be provided")

        self.instance = instance
        object_data = self.instance.fields_dict()
        self.declared_fields = SortedDict()
        self.base_fields = fields_for_a(self.instance)

        # if initial was provided, it should override the values from instance
        if initial is not None:
            object_data.update(initial)

        BaseForm.__init__(self, data, files, auto_id, prefix, object_data,
                          error_class, label_suffix, empty_permitted)

        cleaned_data = self.cleaned_data

        # save fieldvalues for self.instance
        fields = field_list(self.instance)

        for field in fields:
            if field.enable_wysiwyg:
                value = unicode(strip(cleaned_data[field.name]))
            else:
                value = unicode(cleaned_data[field.name])

        return self.instance 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T12:09:50.917

我认为您缺少 Django 编程的一个基本方面，即 Django 表单。您应该创建一个类似的表单：

```
class AForm(forms.Form):
    model = forms.ModelChoiceField(queryset=Model.objects.all())
    photographer = forms.ModelChoiceField(queryset=Photographer.objects.all())

    class Meta:
        model = A
        fields = ('model', 'photographer', ) 
```

然后您的创建视图将如下所示：

```
@login_required
def create_in(request, slug):
    if request.method == 'POST':
        form = AForm(request.POST)
        if form.is_valid():
            instance = form.save(commit=False)
            instance.user = request.user
            return HttpResponseRedirect("/somewhere/")
    else:
        form = AForm()
    return render_to_response('create_in.html', { 'form': form }, context_instance=context) 
```

很难弄清楚您要做什么，我认为您变得过于棘手，因为我从来不需要扩展 BaseForm 并且我已经完成了许多带有特殊过滤器的表单。通常这些是这样的：

```
class AForm(forms.Form): 
   def __init__(self, profile, *args, **kwargs):
       super(AForm, self).__init__(*args, **kwargs)
       self.fields['photographer'].queryset = models.Photographer.objects.filter(profilephotographer__profile=profile) 
```

# .net - WCF 肥皂消息删除“到”标题

> ID：11548996
> 
> 赞同：2
> 
> 时间：2012-07-18T19:37:58.300
> 
> 标签：.net, soap, wcf-security, wcf-client

尽管关于这个主题还有其他问题，但没有一个真正涵盖这个确切的问题。我很少问问题，因为我通常可以找到答案。

我们正在使用 WCF 客户端与使用 Soap 1.1 的 Java Web 服务通信。我必须创建一个自定义 WseHttpBinding 来添加一个 userNameToken。问题是，当请求被序列化时，会添加一堆 Java 服务讨厌的标头元素。这些具体是：

操作 MessageID 回复到

实际的标头如下所示：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
 <s:Header>
 <a:Action s:mustUnderstand="1"/>
 <a:MessageID>urn:uuid:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</a:MessageID>
 <a:ReplyTo><a:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</a:Address></a:ReplyTo>
 <a:To s:mustUnderstand="1">https://xxx.xxx.xxx</a:To>

 <MORE SECURITY ELEMENTS...>
 </s:Header> 
```

在研究了我的选项后，我找不到一种方法来删除那些不编写自定义编码器或在发送消息之前对其进行操作。我选择了后者。

使用自定义行为，我使用 IClientMessageInspector 来实现 messageInspector 类。在 BeforeSendRequest 方法中，我使用了以下内容：

```
message.Headers.RemoveAll("Action", "http://schemas.xmlsoap.org/ws/2004/08/addressing");
message.Headers.RemoveAll("MessageID","http://schemas.xmlsoap.org/ws/2004/08/addressing");
message.Headers.RemoveAll("ReplyTo", "http://schemas.xmlsoap.org/ws/2004/08/addressing");
message.Headers.RemoveAll("To", "http://schemas.xmlsoap.org/ws/2004/08/addressing"); 
```

我很惊讶它删除了所有标题异常。结果如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<a:To s:mustUnderstand="1">https://pilot.eidverifier.com/uru/soap/ut/usv3</a:To>
<MORE SECURITY ELEMENTS...>
</s:Header> 
```

如您所见，“To”元素仍然存在。所以，我的问题是为什么？是否需要发送消息？

我不禁觉得我以错误的方式接近这个问题。有没有办法使 mustUnderstand 错误？是否有删除所有额外元素的属性设置？我处于发布模式。

任何帮助或方向表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-08T11:24:10.083

你用错了`messageVersion`，

删除，使用`Soap11`而不是`Soap11WSAddressing10`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T21:14:38.330

我在 WCF Core 中遇到了完全相同的问题

```
TextMessageEncodingBindingElement encodingElement = new TextMessageEncodingBindingElement(MessageVersion.Soap12WSAddressing10, System.Text.Encoding.UTF8); 
```

通过切换到解决

```
MessageVersion msgver = MessageVersion.CreateVersion(EnvelopeVersion.Soap12, AddressingVersion.None);
TextMessageEncodingBindingElement encodingElement = new TextMessageEncodingBindingElement(msgver, System.Text.Encoding.UTF8); 
```

# rabbitmq - RabbitMQ 声明一个没有插件或客户端的交换

> ID：11548998
> 
> 赞同：1
> 
> 时间：2012-07-18T19:38:15.947
> 
> 标签：rabbitmq

我有一个用例，在第一次安装、配置和启动 RabbitMQ 后，我需要在它上声明 Exchange。Exchange 的属性（名称、类型、持久性等）位于一个文件（或多个文件）中。

这必须是自动化的，并且安装管理插件或任何其他插件不是一个选项（还没有）。

是否可以在没有客户端（Java、Erlang 等）的情况下执行此操作？

我正在运行 CentOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:15:39.980

安装管理插件或使用客户端确实是您唯一的选择。Rabbitmqctl 非常轻量级，不具备创建队列和交换的能力。如果可能的话，我建议获取管理插件。如果你有能力使用 Python 之类的东西，它有[kombu](http://pypi.python.org/pypi/kombu/)和[pika](https://github.com/pika/pika/)，它们都是很棒的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:30:14.337

使用 python 和 pika [http://pika.github.com/communicating.html](http://pika.github.com/communicating.html)，只需几行代码就可以完成，这可以与客户端程序代码分开。

```
def init_broker():
    connection = pika.BlockingConnection(pika.ConnectionParameters(host=BROKER_ADDRESS))
    channel = connection.channel()
    channel.exchange_declare(callback=None, ticket=0, exchange=EXCHANGE, type='direct', passive=False, durable=True, auto_delete=False, internal=False, nowait=False, arguments={})
    channel.queue_declare(queue=QUEUE, passive=False, durable=True, exclusive=False, auto_delete=False, nowait=False, arguments={})
    channel.queue_bind(callback=None, ticket=0, queue=QUEUE, exchange=EXCHANGE, routing_key=QUEUE, nowait=False, arguments={}) 
```